# StackOverflow 问答 12161000-12161999

# c - 指向数组地址的结构指针

> ID：12161002
> 
> 赞同：3
> 
> 时间：2012-08-28T14:03:00.507
> 
> 标签：c, pointers, data-structures

可以将字符数组的地址提供给结构指针吗？

```
 typedef struct {
  int ID;
  word32 Myports;
  stripports gd[256] ;
  }Table;

  typedef struct {
  oldxmd used;
  newip  ip;
  newxmd new;
  }stripports;

  char buffer1[256];

  Table *tableptr = buffer1 ;

  tableptr ->ID = 15 ;
  tableptr ->Myports= somenumber ;
  tableptr ->gd[0].used = somenumber ; 
```

困难的部分是我无法说明为什么*tableptr*会接受数组起始地址！我最好的选择是上面的代码不正确或不安全。

虽然后来采用了强制转换，但为什么它接受一个数组？

```
 Table* tableptr = (Table*)buffer1; 
```

`Table *tableptr = buffer1 ;``Table* tableptr = (Table*)buffer1;`在随后的许多测试中被替换为。

如果不进行强制转换，`struct`指针可以采用新创建的指针地址以外的值`struct`吗？

我在存储库中有许多作者编写的一系列测试，这确实令人困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:17:01.643

不能保证将字符数组的地址分配给结构指针，可能存在对齐问题。一些体系结构只允许`int`s 在偶数地址上对齐，而字符数组通常可以从任何地址开始。

还有缓冲区溢出问题。如果`Table`类型大于字符数组，您最终可能会覆盖其他变量或出现内存保护错误。

这两个问题都可以通过改变来解决

```
char buffer1[256]; 
```

至

```
char *buffer1 = (char*)malloc(sizeof Table); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:14:44.910

不，这不好。

演员表

```
Table* tableptr = (Table*)buffer1; 
```

只是告诉编译器“闭嘴，做吧！”。它不会神奇地让它工作，它只是让编译器不会抱怨它。

# javascript - 有没有一种可靠的方法可以使用 javascript 将天真的 UTC 时间戳转换为本地时间？

> ID：12161006
> 
> 赞同：3
> 
> 时间：2012-08-28T14:03:11.647
> 
> 标签：javascript, jquery, datetime, timezone

确定用户的时区服务器端并从 UTC 转换已证明比其价值更麻烦。

javascript / jquery是否有可靠的方法来确定用户的时区并将偏移量应用于UTC日期时间戳（2012-08-25 10：59：56.511479）并以我想要的格式输出（2012-08-25 - 10 ：上午 59 点）？

jquery 代码可能会说什么

```
// dom ready
$('span.localtime').each(function(e) {
    // get stamp and apply conversion
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:06:32.110

`.getTimezoneOffset()`在日期对象上可用，并以分钟为单位为您提供与 UTC 的偏移量。

```
var offset = (new Date()).getTimezoneOffset();

// convert myUtcDate to a date in local time
myUtcDate.setMinutes(myUtcDate.getMinutes() + (offset*-1)); 
```

因此：

```
$('.span.localtime').each(function() {
   var myUtcDate = new Date($(this).html()); // assuming "2012-08-25 10:59:56.511479"
   myUtcDate.setMinutes(myUtcDate.getMinutes() + (myUtcDate.getTimezoneOffset() * -1));

   $(this).html(myUtcDate.toString());
}); 
```

请注意，它`myUtcDate.toString()`可以替换为您想要的任何日期格式。在你的情况下，它可能看起来像

```
$(this).html(formatDate(myUtcDate));

function formatDate(d) {

   var months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];

    var y = d.getFullYear().toString().slice(-2); // "12"
    var m = months[d.getMonth()]; // "Aug"
    var d = d.getDate(); // "25"

    var ampm = 'AM';
    var h = d.getHours();

    if(h>=12) {
        h -= 12;
        ampm = 'PM';
    }

    if(h == 0)
       h = 12;

    var min = ("00" + d.getMinutes()).slice(-2);

    return m + " " + d + " '" + y + " - " + h + ":" + min + ampm;
} 
```

您可能希望使用[日期格式插件](http://archive.plugins.jquery.com/project/jquery-dateFormat)以更简洁、更可靠的方式格式化日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:55:10.940

另外，看看[https://github.com/GregDThomas/jquery-localtime](https://github.com/GregDThomas/jquery-localtime) - 它把所有这些都包装在一个简单易用的 jQuery 插件中。

# mysql - 带有 GROUP_CONCAT 的 sql

> ID：12161012
> 
> 赞同：0
> 
> 时间：2012-08-28T14:03:21.467
> 
> 标签：mysql

我正在运行这个 SQL 查询

```
$sql = "select images.image, images.comment as feedDescription, 
        customers.fullName, CONCAT('[', GROUP_CONCAT(DISTINCT likes.uid),']') as likes, 
        CONCAT('[', GROUP_CONCAT(DISTINCT CONCAT('{\"userid\":\"', comments.fid, '\", \"comment\":\"', comments.comment, '\"}') separator ','),']') as comments 
        FROM images 
        LEFT JOIN customers on images.client_id = customers.client_id 
        LEFT JOIN likes on images.image = likes.image 
        LEFT JOIN comments on images.image = comments.image 
        WHERE images.fid=:userID 
        ORDER BY images.image LIMIT $offset,$limit"; 
```

唯一的问题是我只得到第一行......

我有图像表、客户表（通过我在图像中获得的 id 取客户的姓名）、喜欢表（在图像上“点赞”的人）和评论（在表上写“评论”的人）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:23:06.640

您在查询中使用聚合函数，因此 MySQL 自动只返回一行——所有数据的聚合。

在其他数据库中，这会产生错误，因为您混合了聚合列和非聚合列。这是 MySQL 的一个（错误）功能，称为“隐藏列”。

将 group by 添加到您的查询中以解决问题：

```
group by images.image, images.comment, customers.fullName 
```

请务必在 WHERE 子句之后和 ORDER BY 之前添加它。

# f# - 在 F# 中计算序列的后续元素的差异

> ID：12161015
> 
> 赞同：4
> 
> 时间：2012-08-28T14:03:27.527
> 
> 标签：f#

我在 F# 中有一个浮点序列，我需要获得一个定义的序列`(Math.Log currentElement)/(Math.Log previousElement)`。显然它将比原始序列短一个元素。

在 F# 中实现这一目标的最优雅方法是什么？我正在考虑使用带有 for 循环的 seq{} 表达式，但即使这样以相当不错的方式处理第一个元素似乎也很困难......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T14:09:49.357

```
items |> Seq.pairwise |> Seq.map (fun (x, y) -> log y / log x) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:11:26.710

或者，如果您愿意：

```
let f (x, y) = (log y) / (log x)

let ans = s |> Seq.pairwise |> Seq.map f 
```

# c - 使用 C 连接到 REST 服务

> ID：12161016
> 
> 赞同：1
> 
> 时间：2012-08-28T14:03:36.653
> 
> 标签：c, rest

我有一个在**unix 环境**上运行的**C 应用程序**。我需要连接到 RESTful 服务，到目前为止，我所有的 google'ing 都显示了如何连接到肥皂服务。要连接到肥皂服务，我手动创建了 xml 并将其发送出去。人们告诉我，我需要将 REST 服务包装到一个soap 服务中并调用soap 服务来访问REST 服务。

 **有没有一种方法可以只导入一个 dll/模块并直接连接到 REST 服务而无需编写 SOAP 包装器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:15:34.227

> 人们告诉我，我需要将 REST 服务包装到一个soap 服务中并调用soap 服务来访问REST 服务。

别再听那些人的了。他们似乎不知道他们在说什么。

> 有没有一种方法可以只导入一个 dll/模块并直接连接到 REST 服务而无需编写 SOAP 包装器？

阅读 REST。[从我如何向妻子解释 REST](http://tomayko.com/writings/rest-to-my-wife)开始。主要思想是使用 GET 和 POST 之类的 HTTP 命令/动词直接与另一台机器交互，而不是像 SOAP 那样将事情包装在复杂的信封中。访问 RESTful 服务器就像发出 HTTP 请求一样简单。关键是知道该说什么——你如何为那个系统构建一个代表你想要的数据的 URL？您需要查看您计划为此访问的特定服务。

如果您在使用 C 中的 HTTP 时需要帮助，请查看[libcurl](http://curl.haxx.se)。**

# sql - 如何在数据库的两个表中同时插入数据？

> ID：12161019
> 
> 赞同：3
> 
> 时间：2012-08-28T14:03:51.607
> 
> 标签：sql, sql-server, database

我使用 SQL Server 工作。我有 2 张桌子，`Animal`并且`Cat`. 当我向数据库中添加一只新猫时，我想更新这两个表。我应该先把猫加到`Animal`桌子上，然后我才能把它`animal_Id`加到`Cat`桌子上。

有没有办法同时在两个表中添加记录？如果没有，最好的方法是什么？

我只是想要一个想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:05:00.110

如果您使用[事务](http://en.wikipedia.org/wiki/Database_transaction)，则至少在逻辑上，两个插入都将“同时”完成。

这意味着从事务外部完成的任何其他查询都无法看到“插入之间”的基础。如果两次插入之间都失败（并且没有有效的提交），最终状态将忽略第一次插入。

为了获取刚刚添加到会话中的行的 id，请使用[SCOPE_IDENTITY](http://msdn.microsoft.com/en-us/library/ms190315.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T14:06:23.290

您不能在一个语句中对两个表使用 INSERT。

```
SET XACT_ABORT ON
BEGIN TRANSACTION

INSERT INTO [A](...) VALUES(...);
INSERT INTO [B](...) VALUES(...);

COMMIT TRANSACTION
SET XACT_ABORT OFF 
```

事务是为了确保它是全部或什么都没有提交。XACT_ABORT 确保如果一个因错误而失败（因此`COMMIT TRANSACTION`不会触发），事务将被强制回滚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:14:17.417

我建议在这里使用事务。例如（如果您事先知道新行的 ID）：

```
DECLARE @CAT TABLE(id int, name varchar(50));
DECLARE @ANIMAL TABLE(id int);
DECLARE @anmalId INT = 1;

BEGIN TRAN 
 INSERT INTO @ANIMAL VALUES(@anmalId);
 INSERT INTO @CAT VALUES(@anmalId, 'Kitty');
COMMIT TRAN

SELECT * FROM @CAT;
SELECT * FROM @ANIMAL; 
```

在自动增量的情况下，您可以使用@@identity。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-18T14:00:02.770

使用触发器。这是最好的方法

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-28T14:11:14.560

插入一张表时使用触发器怎么样？

# winforms - DataGrid（不是DataGridView）中的DataGridBoolColumn ..这应该如何工作

> ID：12161021
> 
> 赞同：1
> 
> 时间：2012-08-28T14:03:54.353
> 
> 标签：winforms

我正在开发一个基于 WinForms 的旧软件，该软件使用 DataGrid 和派生自 DataGridtextBoxColumn 之类的类。我需要添加一个复选框列，简单吧？只需创建一个与其他类类似的类，该类派生自 DataGridBoolColumn.. 嗯，但我该如何使用这个控件！？我真的希望自己解决这个问题，但经过很长时间“测试”不同的技术后，我真的没有进一步了。问题是：

a）当不关注/编辑列时，复选框为灰色并选中（我已将允许 null 设置为 false 并将 TrueValue 设置为 true，将 FalseValue 设置为 false 等。

b）编辑字段时，我可以选中或取消选中列，但是当覆盖 Commit 方法然后使用 GetColumnValueAtRow(source, rowNum) 检索值时，它始终为 false .. 始终，无论是否选中。

c）最后在编辑后离开复选框列时，无论我做了什么，它都会变回灰色并选中

这可能是数据绑定问题吗？似乎不是。这只是我缺乏 WinForms 经验，从我可以看出一个旧且不太直观的 MS API 的情况。

有没有人有相关经验为我指明正确的方向，因为我完全不知道该领域的最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:35:35.073

哇..这实际上很简单。您可以随心所欲地说 AllowNulls = false，但如果您的 DefaultValue 设置为 String.Empty，那么它将始终默认为“nulled”位置（至少就绘制时间而言）。

关键是： col.DataType = typeof(bool); col.DefaultValue = 假；

# maven - 自定义 Maven 构建

> ID：12161022
> 
> 赞同：3
> 
> 时间：2012-08-28T14:03:56.913
> 
> 标签：maven, customization, http-unit

是否可以在不编写插件的情况下自定义 Maven 构建生命周期？我想自定义我的项目以在不运行测试的情况下对其进行打包，然后运行测试。背景是测试在 HTTPUnit 上运行，它需要一个完全构建的 Web 应用程序目录结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-06T16:55:08.530

正如 khmarbaise 所建议的，您可以使用[maven-failsafe-plugin](http://maven.apache.org/surefire/maven-failsafe-plugin/)，它是 maven-surefire-plugin 的扩展。

Maven 生命周期有四个阶段非常适合您的意图：

1.  `pre-integration-test`用于设置集成测试环境。
2.  `integration-test`用于运行集成测试。
3.  `post-integration-test`用于拆除集成测试环境。
4.  `verify`用于检查集成测试的结果。

一般来说，在`pre-integration-test` [我们启动服务器的过程中](http://maven.apache.org/surefire/maven-failsafe-plugin/usage.html)

例如：

```
 <executions>
      [...]
      <execution>
        <id>start-jetty</id>
        <phase>pre-integration-test</phase>
        <goals>
          <goal>run-exploded</goal>
        </goals>
        <configuration>
          <scanIntervalSeconds>0</scanIntervalSeconds>
          <daemon>true</daemon>
        </configuration>
      </execution>
      <execution>
        <id>stop-jetty</id>
        <phase>post-integration-test</phase>
        <goals>
          <goal>stop</goal>
        </goals>
      </execution> 
```

我将此插件与[Hudson](http://hudson-ci.org/)一起使用；在[Maven 构建自定义 - 第 5 章](http://bit.ly/10kN5MT)中，您可以找到更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:21:08.250

看来您正在编写集成测试。

您可以使用[maven-failsafe-plugin](http://maven.apache.org/plugins/maven-failsafe-plugin/)。此插件默认在[Maven 构建生命周期](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Build_Lifecycle_Basics)的集成测试阶段（打包阶段之后）执行...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T14:21:19.450

出于这些目的，您需要专门用于此类事情的集成测试阶段。它在打包阶段之后但在安装/部署阶段之前。这可以通过使用[maven-failsafe-plugin](http://maven.apache.org/plugins/maven-failsafe-plugin/)来实现。[您可以在此处](http://khmarbaise.github.com/maui/it-example-container.html)找到完整示例。

# drupal - Drupal - 如何让非管理员查看（不编辑）用户

> ID：12161032
> 
> 赞同：0
> 
> 时间：2012-08-28T14:04:21.427
> 
> 标签：drupal

作为管理员，我可以在 D6 中查找/查看/编辑用户。我希望非管理员能够查看用户数据（当他们注册时，他们的姓名和电子邮件），但不能编辑或更改任何信息（尤其是密码）。

是否有此模块，或者我是否需要编写新权限。

TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T04:43:00.720

获取用户名和电子邮件的视图怎么样？

# c++ - 部分模板专业化仅限于某些类型

> ID：12161033
> 
> 赞同：5
> 
> 时间：2012-08-28T14:04:24.820
> 
> 标签：c++, templates, template-specialization, typetraits

是否可以编写仅用于类类型的部分模板特化，例如，从特定类继承或遵守可以通过类型特征表达的某些其他约束？即，像这样：

```
class A{}

class B : public A{}

template<typename T>
class X{
    int foo(){ return 4; }
};

//Insert some magic that allows this partial specialization
//only for classes which are a subtype of A
template<typename T> 
class X<T>{
    int foo(){ return 5; }
};

int main(){
    X<int> x;
    x.foo(); //Returns 4
    X<A> y;
    y.foo(); //Returns 5
    X<B> z;
    z.foo(); //Returns 5
    X<A*> x2; 
    x2.foo(); //Returns 4
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T14:07:48.480

通常如果你想要有条件的部分模板特化，你需要提供一个额外的参数，然后使用 enable_if：

```
template<typename T, typename=void>
class X {
public:
    int foo(){ return 4; }
};

template<typename T>
class X<T, std::enable_if_t<std::is_base_of_v<A, T>>> {
public:
    int foo(){ return 5; }
}; 
```

# c++ - 将 pugixml 节点设置为空？

> ID：12161037
> 
> 赞同：1
> 
> 时间：2012-08-28T14:04:39.163
> 
> 标签：c++, reference, xml-parsing, pugixml

在[pugixml](http://pugixml.org/documentation/)中，类型`pugi::xmlnode`是用于引用 XML 树的部分的对象。这些对象像指针一样模糊，可以是*null*。pugi 库经常返回空节点，但我怎样才能自己创建一个呢？

*[更新]*也许“创建”一个空节点不是我想要的。我实际上想获取一个现有的节点对象并将其设为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:07:52.137

你试过了吗：

```
pugi:xml_node node(NULL); 
```

# php - PHP数学问题与否定

> ID：12161044
> 
> 赞同：0
> 
> 时间：2012-08-28T14:05:06.917
> 
> 标签：php, math, for-loop

> **可能重复：**
> [PHP 底片不断添加](https://stackoverflow.com/questions/12145882/php-negatives-keep-adding)

我这里有这个代码....

```
$remaining = 0;
foreach($array as $value=>$row){
        $remaining = $remaining + $row['remainingbalance'];
} 
```

它所做的是它正在遍历数组中的所有剩余余额，`-51.75`并且`-17.85`使用上面的代码我得到`-69.60`了正确的。但我想知道如果它们可以减去它的两个负数怎么办？那可能吗？

我试过这个

```
$remaining = 0;
foreach($clientArrayInvoice as $value=>$row){
        $remaining = $remaining + abs($row['remainingbalance']);
} 
```

但它给了我`69.60`没有负面的东西。

有人有什么想法吗？

我的目标是仅在减去负数时才采取`-51.75`并`-17.85`提出。`-33.90`否则添加

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:12:02.440

每当您添加一个负数时，您实际上减去了正值（反之亦然）。

所以`0 + (-16) = 0 - 16 = -16`。

当您打电话时，`abs()`您会计算完全不同的东西。

# visual-studio - 是否可以为 VS2012 起始页提供自定义内容？

> ID：12161045
> 
> 赞同：3
> 
> 时间：2012-08-28T14:05:09.953
> 
> 标签：visual-studio, visual-studio-2012

Visual Studio 2012（和 2010 也是）有一个包含链接和流式视频的起始页。我的包是否可以在此页面上提供内容，例如，在 Welcome/Windows 8/etc 旁边创建一个单独的部分？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-07T10:06:53.250

我终于得到了一个在 VS2012 中工作的自定义起始页 - 我的问题是我无法在 2012 年安装起始页项目模板，因为该扩展仅在 2010 年安装（我无权访问）并且我的“我的文档”文件夹被映射到一个网络驱动器，因此将原始 XAML 文件放在 My Documents/Visual Studio 2012/Startpages 中不起作用，因为 Visual Studio 拒绝使用这个“不可信的文件”。

1.  [从此处](http://visualstudiogallery.msdn.microsoft.com/f655a5dc-1a2d-4eca-b774-76c352c03b87/)下载起始页模板。
2.  将文件重命名为 .zip 并解压缩。
3.  将“\Solution\CSharp\Extensibility\StartPage.zip”文件复制到您的项目模板文件夹（默认为“My Documents\Visual Studio 2012\Templates\ProjectTemplates\Visual C#”）。
4.  使用此模板创建一个新项目。
5.  按照[此处](http://msdn.microsoft.com/en-us/library/jj991932.aspx)的说明从 2010 升级到 2012 起始页。

    *   将项目属性目标框架更新为 4.5。
    *   通过删除 Microsoft.VisualStudio.Shell.10.0 引用并添加 Microsoft.VisualStudio.Shell.11.0 和 Microsoft.VisualStudio.Shell.Immutable.11.0 引用来更新 Control 项目中的项目引用。
    *   通过用下面的两个替换现有的命名空间引用来更新 xaml 文件中的命名空间引用。

    > ```
    > xmlns:vs="clr-namespace:Microsoft.VisualStudio.PlatformUI;assembly=Microsoft.VisualStudio.Shell.11.0"
    > xmlns:vsfxim="clr-namespace:Microsoft.VisualStudio.Shell;assembly=Microsoft.VisualStudio.Shell.Immutable.11.0" 
    > ```

    *   将对键的引用替换`vsfx:VsBrushes`为键`vs:EnvironmentColors`，例如`vsfx:VsBrushes.StartPageBackgroundKey``vs:EnvironmentColors.StartPageTabBackgroundBrushKey`
6.  在 VSIX 项目中，对`source.extension.vsixmanifest`文件进行以下更改（值取决于是否需要 2010 支持，它不适合我）：

    *   添加作者，默认空标签是不允许的：`<Author>Ken</Author>`
    *   将 Visual Studio 支持版本更改/添加到 11.0：`<VisualStudio Version="11.0">`
    *   将支持的运行时版本更改为包括 4.5：`<SupportedFrameworkRuntimeEdition MinVersion="4.5" MaxVersion="4.5" />`
7.  VSIX 解决方案现在应该在项目 bin 文件夹中构建并生成一个 VSIX 文件。安装它，您现在可以从 Visual Studio 选项的下拉列表中选择您的起始页。

除此之外，我实际上还没有开发我的自定义起始页，但希望它对想要开始使用 VS2012 开发它们的人有所帮助

编辑：一个包含基本 2012 起始页、自定义控件并可通过 VSIX 部署的项目：[模板](https://dl.dropboxusercontent.com/u/3424077/StartPageTemplate.zip)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T15:39:00.053

自定义起始页，通过 google：

[http://msdn.microsoft.com/en-us/library/aa991992.aspx](http://msdn.microsoft.com/en-us/library/aa991992.aspx)

# ios - 更改超级视图会破坏 UIPanGestureRecognizer

> ID：12161047
> 
> 赞同：4
> 
> 时间：2012-08-28T14:05:21.317
> 
> 标签：ios, uiview, uipangesturerecognizer, superview

我正在尝试实现一个可以拖出其超级视图的 UIView。

我尝试将一个添加`UIPanGestureRecognizer`到我希望能够拖动的视图中。然而，似乎从其父视图中删除 UIView 并将其添加到另一个视图，正在破坏手势识别器。

在`UIGestureRecognizerStateBegan`注释掉代码后，其他两个块中的代码可以正常运行，但是当我恢复它时，永远无法实现 UIGestureRecognizerStateChanged 和 UIGestureRecognizerStateEnded 状态。

出了什么问题？

```
if ([gr state] == UIGestureRecognizerStateBegan)
{
    CGPoint newCenter = [endView convertPoint:[self center]
                                     fromView:startView];
    [self removeFromSuperview];
    [endView addSubview:self];
    [self setCenter:newCenter];

}

if ([gr state] == UIGestureRecognizerStateChanged)
{
    // Some code that successfully moves the view.
}

if ([gr state] == UIGestureRecognizerStateEnded)
{
    // Other code.
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T14:21:57.103

你推断正确，`[self removeFromSuperview]`打破了手势识别器。我曾经也有过一样的问题。注释这一行`[self removeFromSuperview]`应该没问题，你不必将它从superview中删除，因为 UIView 只能是一个视图的子视图。

# utf-8 - 发件人名称中的德语字母未在 Java 邮件中显示

> ID：12161055
> 
> 赞同：3
> 
> 时间：2012-08-28T14:05:44.773
> 
> 标签：utf-8, character-encoding, jakarta-mail

我正在使用 Java Mail 发送邮件。我使用以下设置发件人信息：

```
msg.setFrom(new InternetAddress("test@example.com", "Schaltfläche")); 
```

问题：当我将此邮件发送到我的 GMail 时，发件人显示为**Schaltfl?che**。

在源代码中是：

```
From: "=?ANSI_X3.4-1968?Q?Schaltfl=3Fche?=" <test@example.com> 
```

哪个看起来……好吗？至少看起来已经努力对**ä**进行编码。

那么，我做错了什么？我可以责怪 GMail，但这有点牵强，测试人员也看到其他客户端的错误。

（相关但不相关：消息正文中显示相同的名称正常）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:16:01.383

通过更多搜索，我发现了两件事：

*   `ANSI_X3.4-1968`显然是 的规范名称`ASCII`，当然不能编码**ä**。此外，`=3F`解码为**？**（不知道为什么它首先需要编码）。
*   有一个构造函数`InternetAddress(mail, name, charset)`

所以，我现在正在创建`InternetAddress`with `UTF-8`，它解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T12:58:34.867

很高兴看到为`InternetAddress`对象定义字符集为您修复了它。

另一种解决方案（特别是如果您无法更改代码）是通过相应的 VM 参数以定义的编码运行 JVM：

`-Dfile.encoding=utf-8`

# javascript - 如何在 javascript 或 jquery 中按维度对图像进行排序

> ID：12161056
> 
> 赞同：4
> 
> 时间：2012-08-28T14:05:44.603
> 
> 标签：javascript, jquery

如何在 JavaScript 或 jQuery 中按维度对图像进行排序。我的代码如下：

```
var imgsrc = '';
if (document.images.length < 1) {
    alert('No images to open');
    return;
}
for (var i = 0; i < window.parent.document.images.length; i++) {
    imgsrc + = '\n';
}

if (imgsrc != '') {
    var newwin = window.open('', '');
    newwin.document.open();
    newwin.document.write('\n' + imgsrc + '');
    newwin.document.close();
} else {
    alert('No images!')
}​ 
```

请帮帮我。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:10:28.653

有关获取图像尺寸的信息，请参见[此处。](https://stackoverflow.com/questions/623172/how-to-get-image-size-height-width-using-javascript)[您可以像这样](http://www.w3schools.com/jsref/jsref_sort.asp)对数组进行排序。.sort() 有一个带有排序函数的重载。那是你比较大小的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:26:09.413

如果您使用的是 jquery：

```
​var images = $('img');

if ( images.length ) {
// images were found
 images.sort( function (img1, img2) { return img1.width - img2.width } );                                     
} 
```

这是一个工作[小提琴](http://jsfiddle.net/fNbQB/)

# java - 使用 java 代码中的用户名和密码创建 mysql 数据库

> ID：12161060
> 
> 赞同：2
> 
> 时间：2012-08-28T14:05:55.477
> 
> 标签：java, mysql, database, jdbc

如何使用 java 代码中的用户名和密码创建 mysql 数据库？并创建所有表格？

我在谷歌搜索，我发现了这段代码

```
Conn = DriverManager.getConnection
("jdbc:mysql://localhost/?user=root&password=rootpassword"); 
s=Conn.createStatement();
int Result=s.executeUpdate("CREATE DATABASE databasename"); 
```

但就我而言，我需要：

-从java设置用户名和密码

*   创建所有表

确保：

*   MySQL 字符集：UTF-8 Unicode (utf8)

*   MySQL 连接排序规则：utf8_general_ci

*   我的数据库和表排序规则设置为：utf8_general_ci 或 utf8_unicode_ci

然后我必须在mysql中执行这个：SET NAMES 'utf8'

设置字符集 utf8

我可以在java代码上做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:33:43.280

看到您对从文件运行脚本的评论，您可以在以下帖子中查看我的答案：

[Java/Mysql 如何将整个 SQL 文件注入 mysql 服务器？](https://stackoverflow.com/questions/10142687/java-mysql-how-would-you-inject-an-entire-sql-file-to-a-mysql-server/10143901#10143901)

它将允许您通过 shell 运行文件。它是为 linux 制作的，但您可以轻松地重命名函数和命令以在 windows 下运行。这将允许您从文件中运行所有命令。所以实际上你可以导出一些数据库并在每次需要创建类似的数据库时运行它，也支持用户名和密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T15:46:38.643

有一个[使用java创建数据库的例子](http://www.tutorialspoint.com/jdbc/jdbc-create-database.htm)

希望这可以帮助

# iphone - 滑块在时间段内自动递增

> ID：12161064
> 
> 赞同：0
> 
> 时间：2012-08-28T14:06:07.587
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uislider

我正在尝试使用电影播放器​​中的当前时间来增加 iPad 应用程序中的滑块值。

```
slider.maximumValue=10;
slider.minimumValue=0; 
```

如何在特定时间段内将 slider.value 从 0 增加到 10？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:04:33.053

如果您事先知道具体的时间段，您可以使用[NSTimer](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)将滑块值重复加 1：

```
NSTimer *aTimer = [NSTimer scheduledTimerWithTimeInterval:(timePeriod/slider.maximumValue)
target:self selector:@selector(timerFired:) userInfo:nil repeats:YES];

- (void)timerFired:(NSTimer*)theTimer {
    [slider setValue:slider.value + 1.0];
    if(slider.value == slider.maximumValue) {
        [theTimer invalidate];
    }
} 
```

# python - Python空白txt文件创建

> ID：12161067
> 
> 赞同：0
> 
> 时间：2012-08-28T14:06:10.717
> 
> 标签：python, python-3.x

我正在尝试根据列表创建批量文本文件。文本文件有许多行/标题，目的是创建文本文件。以下是我的titles.txt 以及非工作代码和预期输出的样子。

```
titles = open("C:\\Dropbox\\Python\\titles.txt",'r')  
for lines in titles.readlines():  
       d_path = 'C:\\titles'     
   output = open((d_path.lines.strip())+'.txt','a')  
   output.close()  
titles.close() 
```

`titles.txt
Title-A
Title-B
Title-C`

`new blank files to be created under directory c:\\titles\\
Title-A.txt
Title-B.txt
Title-C.txt`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:11:43.050

很难说出你在这里尝试什么，但希望这会有所帮助：

```
import os.path
with open('titles.txt') as f:
    for line in f:
        newfile = os.path.join('C:\\titles',line.strip()) + '.txt'
        ff = open( newfile, 'a')
        ff.close() 
```

如果您想用空白文件替换现有文件，您可以使用 mode`'w'`而不是`'a'`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:17:56.480

以下应该工作。

```
import os
titles='C:/Dropbox/Python/titles.txt'
d_path='c:/titles'
with open(titles,'r') as f:
    for l in f:
        with open(os.path.join(d_path,l.strip()),'w') as _:
            pass 
```

# c# - 从 SOCKS 服务器传递 http 请求

> ID：12161069
> 
> 赞同：1
> 
> 时间：2012-08-28T14:06:21.573
> 
> 标签：c#, socks

由于 SOCKS 代理服务器可以处理 http 请求以及套接字请求。所以我试图通过 SOCKS 代理服务器传递 http 请求，但我无法做到这一点。我已通过 SOCKS 代理服务器成功发出套接字请求，并通过 http 代理服务器发出 http 请求。这是我通过http代理服务器发出http请求的方式。字符串网址；sURL = textBoxWebAddress.Text；

```
 WebRequest wrGETURL;
            wrGETURL = WebRequest.Create(sURL);

            WebProxy myProxy = new WebProxy(textBoxSOCKSHost.Text, int.Parse(textBoxSOCKSPort.Text));
            myProxy.BypassProxyOnLocal = true;

            wrGETURL.Proxy = myProxy;//WebProxy.GetDefaultProxy();

            Stream objStream;
            objStream = wrGETURL.GetResponse().GetResponseStream();

            StreamReader objReader = new StreamReader(objStream);

            string sLine = "";
            int i = 0;

            while (sLine != null)
            {
                i++;
                sLine = objReader.ReadLine();
                if (sLine != null)
                    Console.Write(sLine);
            } 
```

但是当我输入 SOCKS 代理服务器的地址和端口时，它会出现连接失败错误。我做错了什么？谢谢。

# sharepoint-2010 - 表单不会在 Sharepoint Designer 2010 中打开

> ID：12161079
> 
> 赞同：0
> 
> 时间：2012-08-28T14:06:54.013
> 
> 标签：sharepoint-2010, sharepoint-designer

我正在使用 Sharepoint Designer (2010) 开发一系列连接列表。

我有许多子列表，我使用主列表的“DispForm.aspx”来添加这些“孩子”。

最近 DispForm.aspx 已停止在 Sharepoint Designer 中打开。从列表的主页单击它会进入表单视图，但该页面永远不会加载，并且我没有收到任何错误消息。

由于我看不到代码窗口，因此我无法进行任何更改，即使页面在浏览器中运行良好并且我可以通过 Sharepoint 直接在网站上执行（有限）编辑。

如果我无法在 Sharepoint Designer 中打开 DispForm.aspx 中的代码，是否有人对我可以尝试什么有任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T13:47:38.747

不是这样的修复，但我通过将驱动器映射到共享点站点并使用记事本++直接编辑文件来解决这个问题。

如果您浏览列表文件夹和您感兴趣的列表，您将在其中看到显示、新建、编辑表单

小号

# iphone - Xcode 升级：PBXContainerItemProxy 缺少 containerPortal 密钥

> ID：12161081
> 
> 赞同：2
> 
> 时间：2012-08-28T14:06:58.290
> 
> 标签：iphone, ios, xcode

我刚刚升级了我的 Xcode，现在当我尝试打开我的项目时，我收到了这个错误：

> 项目 /Users/xxx/xxxx/xxxxx/xxxxxx/xxxxxxxx.xcodeproj 无法打开：PBXContainerItemProxy (xxxxxxxxxxxxxxxxx) is missing a containerPortal key

我已经搜索了网络和 stackoverflow，但没有得到任何相关的信息。

我确实将 Three20 作为我项目的一部分，我不知道这是否重要。我刚刚升级到 xcode 4.4.1

感谢您的任何见解。

-D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T09:29:41.430

我们看到的项目图标，即projectname.xcodeproj，实际上是一个目录，你这样做

1\. 在终端中执行 cd yourproject.xcodeproj
2.ls
3.vi project.pbxproj
4\. 向下滚动到 /* Begin PBXContainerItemProxy section */
5.there you will see all sections check for the section that is missing a portal key edit it并保存它：wq 它会工作

![截屏](../Images/289c5b8aeb8d0bc47da327c20efa6701.png)

如果您看到第一部分缺少容器门户密钥，则在图像中。只需从其他部分拍摄并替换它..

它会工作：D看到这个[链接](http://www.amarendrasingh.com/objective-c/xcode-upgrade-pbxcontaineritemproxy-missing-containerportal-key/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:38:22.887

现在我应该从我不知道实际错误开始，以前从未见过，但我确实在这篇文章中找到了对“PBXContainerProxy”错误的引用（[只要我将项目添加到 XCode 4.0.2 它就会崩溃](https://stackoverflow.com/questions/5794704/as-soon-as-i-add-a-project-to-xcode-4-0-2-it-crashes)) 并认为您可以从那里尝试解决方案？

> “显然这是由于 XCodeProjects 的新版本。我通过预编译导致问题的库然后使用链接器链接到 .a 文件找到了解决方法。我还必须复制 .a 库进入 DerivedData 路径。
> 
> 真正的解决方案是删除该项目并用新版本 XCode 的更新项目替换它。”

希望有所帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:20:41.660

也从未见过该错误，但如果您直接从 XCode 3.X 升级，我建议您访问[https://developer.apple.com/downloads/index.action?name=Xcode](https://developer.apple.com/downloads/index.action?name=Xcode)

并在其他地方下载/安装以前版本的 Xcode。（你可以在你的机器上安装几个不同的副本，如果你不知道怎么做就用谷歌搜索，但记得使用 xcode-select 来选择你想要使用的那个）。重复所有版本回到 4.0.1 直到（希望）它工作。我知道这很乏味，但它可能会有所帮助。

如果是，请验证项目设置并尝试使用 4.4.1 打开它。那应该行得通。

祝你好运

# c++ - 从 QLineEdit 获取值

> ID：12161082
> 
> 赞同：16
> 
> 时间：2012-08-28T14:07:00.890
> 
> 标签：c++, qlineedit

我有一个`QLineEdit`只允许数字的，我想从中获取当前值。我不知道怎么做。

```
ui->lineEdit->setValidator(new QIntValidator(this)); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-28T14:18:55.673

我想到了：

```
QString XMAX=ui->lineEdit->text();
xMax=XMAX.toDouble(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-19T09:38:41.057

或者

```
std::stod(ui->lineEdit->text().toStdString()); 
```

但要注意编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-31T12:53:18.557

试试这个：

```
ui->leNome->displayText() 
```

# eclipse-plugin - Eclipse Jface Projection Viewer - 对 Ctrl-Z 没有反应

> ID：12161083
> 
> 赞同：0
> 
> 时间：2012-08-28T14:07:03.197
> 
> 标签：eclipse-plugin, text-editor, jface, undo

在我当前的项目中，我正在使用附加到`TextEditor`嵌套在`MultiPageEditor`. 我现在的任务是实现对 Ctrl-Z 的自定义反应，据我所知，最好通过将特定实现附加`IUndoHandler`到查看器来完成，所有这些都没有问题。

但是，在使 TextEditor 聚焦的同时按 Ctrl-Z 不会引起任何预期的反应。在上下文菜单中单击*“撤消键入”*时，显示关联的组合键 Ctrl-Z 会导致`TextViewerUndoManager.DocumentUndoListener`调用 的通知方法，`TextViewerUndoManager`按 Ctrl-Z 时不会触摸其中的任何代码行。

作为这个问题的一个可能来源，我假设可能会在扩展点中为这个组合键定义一个处理程序，因为我之前已经尝试过这种机制，但是 plugin.xml 没有定义任何组合键，也没有定义任何撤消处理程序。一个与不同小部件的特殊上下文菜单相关联的菜单。

值得注意的是 Ctrl-C 和 Ctrl-V 按预期工作。

我需要找出按下 Ctrl-Z 时会发生什么，以及为什么什么都没有传递到`TextViewerUndoManager`.

如果有人可以描述 eclipse 如何正常处理这些组合键并决定哪个命令是合适的，那将是非常有帮助的。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:38:39.863

Cntrl+Z- 撤消使用 处理`OperationHistorySupport`。看`UndoActionHandler`课。

绑定支持是使用 keydown 事件过滤器实现的`WorkbenchKeyboard`（所有 keydown 事件首先使用此类过滤。这是如何`BindingService`实现的）。这将找出键绑定的相应命令。

`DocumentUndoManager.UndoableTextChange`是处理撤消操作的地方。

# php - str_用图像替换文本

> ID：12161084
> 
> 赞同：2
> 
> 时间：2012-08-28T14:07:12.947
> 
> 标签：php, str-replace

我有一个聊天框，想用一个图标替换诸如“:D”之类的东西。

```
$chatText = str_replace(":D","<img src='images/icons/smileys/smile-big.png' width='20' height='20' alt='Big Smile' />",$chatText); 
```

以上是我正在使用的代码。在聊天中，它不是用情感替换文本，而是用 html 代码替换“:D”：

```
<img src='images/icons/smileys/smile-big.png' width='20' height='20' alt='Big Smile' /> 
```

我已经做了一些改变（我已经研究过）的尝试，例如：

```
$chatText = str_replace(":D", "< img src=\"/images/icons/smileys/smile-big.png\" width=\"20\" height=\"20\" alt=\"Big Smile\" />",$chatText); 
```

我在那里没有运气。我的问题是我怎样才能让它发挥作用，让用户能够有情绪。在我的代码的最顶端，我也有`$chatText = htmlspecialchars($chatText, ENT_QUOTES);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:53:10.153

我看到了几个可能的问题——你的代码不是 100% 清楚的：

### 可能性 #1：您没有在 TEXTAREA 或其他内容中设置文本

如果您只是为 textarea 设置文本，那么它不支持嵌套 HTML，并且您将无法以这种方式制作表情符号。确实支持这些的 gmail 和 facebook 之类的东西基本上重新实现了内容的呈现。

要正确设置文本，您需要使用`innerHTML`某些特定`div`元素的属性来正确设置 HTML。

在 JQuery 中，我可能会写：

```
$('chat_text').html($('chat_text').html() + fixed_up_smilie_text); 
```

### 可能性 2：您正在使用`htmlspecialchars`

如果您在将文本`htmlspecialchars`放入 HTML 之前使用它转义文本，那么您将看到您在上面看到的内容。修复很简单：不要^_^。

# ios - 如何在两个不同部分的两个不同 NSMutableArray 的单元格中显示内容（两个标签和一个图像视图）。

> ID：12161088
> 
> 赞同：1
> 
> 时间：2012-08-28T14:07:20.617
> 
> 标签：ios, iphone, objective-c, uitableview

我想解析 xml 并在表格单元格中显示标题、描述和图像。

我做了以下代码，但如果图像不可用，那么单元格上也会显示垃圾图像。

我做了代码来隐藏它，但图像视图没有隐藏。

此外，我将 frame 设置为零值，但显示带有垃圾图像的图像视图：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.
    return 2;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.
    appDelegate = (AppDelegate_iPhone *) [[UIApplication sharedApplication] delegate];

    if (section == 0) {
        return [appDelegate.TrendDataArray count];
    }else {
        return [appDelegate.MyDataArray count];
    }

}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section

{

    if(section == 0)

        return @" Trending ";

    else

        return @" Live Feeds ";

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UILabel *lblTitle;
    UILabel *lbldescription;
    UIImageView *imgViewTemp;
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {

        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        lblTitle = [[UILabel alloc] initWithFrame:CGRectZero];
        [lblTitle setLineBreakMode:UILineBreakModeWordWrap];
        [lblTitle setNumberOfLines:2];
        lblTitle.textAlignment= UITextAlignmentLeft;
        [lblTitle setFont:[UIFont fontWithName:@"Helvetica-Bold" size:FONT]];
        lblTitle.textColor=[UIColor blackColor];
        [lblTitle setTag:1];

        lbldescription = [[UILabel alloc] initWithFrame:CGRectZero];
        [lbldescription setLineBreakMode:UILineBreakModeWordWrap];
        [lbldescription setNumberOfLines:3];
        lbldescription.textAlignment= UITextAlignmentLeft;
        [lbldescription setFont:[UIFont fontWithName:@"Helvetica" size:FONT2]];
        lbldescription.textColor=[UIColor grayColor];
        [lbldescription sizeToFit];
        [lbldescription setTag:2];

        imgViewTemp = [[UIImageView alloc] initWithFrame:CGRectZero];
        [imgViewTemp setTag:3];

        [cell.contentView addSubview:lblTitle];
        [cell.contentView addSubview:lbldescription];

        //[imgViewTemp release];
        [lblTitle release];
        [lbldescription release];

    }

    // Configure the cell...
    if (indexPath.section == 0) {

        appDelegate=(AppDelegate_iPhone  *)[[UIApplication sharedApplication] delegate];
        objXmlParse_Attributes= [appDelegate.TrendDataArray objectAtIndex:indexPath.row];

    }else if (indexPath.section == 1) {

        appDelegate=(AppDelegate_iPhone  *)[[UIApplication sharedApplication] delegate];
        objXmlParse_Attributes= [appDelegate.MyDataArray objectAtIndex:indexPath.row];

    }

    NSString *text = objXmlParse_Attributes.CommenUrlTitle;
    text = [text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    NSString *text2 = objXmlParse_Attributes.CommenUrlDescription;
    text2 = [text2 stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    CGSize constraint = CGSizeMake(WIDTH - (MARGIN * 2), 20000.0f);
    CGSize size = [text sizeWithFont:[UIFont fontWithName:@"Helvetica-Bold" size:FONT] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];
    CGSize size2 = [text2 sizeWithFont:[UIFont fontWithName:@"Helvetica" size:FONT2] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];

    NSString *link = [NSString stringWithFormat:@"%@", objXmlParse_Attributes.CommenUrlImage];

    //imgViewTemp = [[UIImageView alloc] initWithFrame:CGRectZero];
    //[UIImage imageNamed:@"noimage.png"]

    if([link isEqualToString:@"No image"] || [link isEqualToString:@"no image"]){
        link = @"";
        if ([link isEqualToString:@""]) {

            imgViewTemp = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,0,0)];

        //[imgViewTemp release];

        lblTitle = (UILabel*)[cell.contentView viewWithTag:1];
        [lblTitle setText:text];
        [lblTitle setFrame:CGRectMake(MARGIN+3,MARGIN, WIDTH-110+83,MIN(size.height,30))];

        lbldescription = (UILabel*)[cell.contentView viewWithTag:2];
        [lbldescription setText:text2];
        [lbldescription setFrame:CGRectMake(MARGIN+3,MARGIN + MIN(size.height,30),WIDTH-110+83,MIN(size2.height,40))];
     }
    }
    else{

        //imgViewTemp = (UIImageView*)[cell.contentView viewWithTag:3];
        imgViewTemp = [[UIImageView alloc] initWithFrame:CGRectMake(7,11,73,60)];
        [imgViewTemp setImageWithURL:[NSURL URLWithString:link] placeholderImage:nil];
        //image1.hidden=FALSE;

        lblTitle = (UILabel*)[cell.contentView viewWithTag:1];
        [lblTitle setText:text];
        [lblTitle setFrame:CGRectMake(MARGIN + 83, MARGIN, WIDTH-110,MIN(size.height,30))];

        lbldescription = (UILabel*)[cell.contentView viewWithTag:2];
        [lbldescription setText:text2];
        [lbldescription setFrame:CGRectMake(MARGIN + 83, MARGIN + MIN(size.height,30),WIDTH-110,MIN(size2.height,40))];

        [cell.contentView addSubview:imgViewTemp];

    }

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:51:57.993

嘿，只需搜索制作表格的教程。在这部分不要问这样的问题，有很多例子`UITableView`......我希望你能理解。

# .net - 开源 BPM 工具（如 Activiti、bonita）和 Windows Workflow Foundation 有什么区别

> ID：12161089
> 
> 赞同：5
> 
> 时间：2012-08-28T14:07:29.227
> 
> 标签：.net, workflow-foundation-4, business-process-management, activiti

我试图找到一个基于 asp.net 的免费开源 BPM 工具，但不幸的是我找不到这样的工具。

但是最近看了一篇关于 Windows Workflow Foundation 的文章，它是否提供了类似于 Activiti、bonita、Joget 等开源 BPM 工具的功能。或者 Windows Workflow Foundation 不能用于构建完整的业务流程工作流，如在 Activiti 和其他开源 BPM 工具中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T18:10:15.020

首先要记住的是，WF 不是 BPM 工具，而是一个可以用来构建可靠且灵活的业务流集的框架。如果您正在寻找一种可以为您提供大量内置功能的解决方案，您无需进行任何编码，而只需将形状放在工作表上 - WF 不是您的工具。

但是，我强烈推荐WF。首先，WF 4.0 中的性能非常好。其次，它可以分布在一组 Web 服务器上。第三，它的灵活性为您提供了实现这些边缘情况所需的能力。

最后，因为您希望与 ASP.NET 集成，所以我要说 WF 是唯一可行的选择。我并不是说其他​​选项不起作用，我只是说它集成得很好。

我希望您做的另一件事是查看[我最近提出](https://stackoverflow.com/questions/513657/why-use-windows-workflow/11972559#11972559)的关于您为什么应该或不应该使用 Windows Workflow Foundation 的答案 - 希望它对您有价值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-10T12:56:47.937

WF 根本不是 BPM 的替代品。WF 这很耗时。使用 Process Maker、Bonita Software 等工具设计和实施工作流程比使用 WF 从头开始​​开发类似的东西要容易得多。这与试图重新发明轮子是一回事。我的 BPM 应用程序建议，ProcessMaker、Bonita 和 Joget。此外，如果您的工作流程很简单，这些工具的开源版本就足以解决您的问题，您不必购买企业版。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-13T14:42:31.610

我同意之前关于 WF 不是 BPM 工具的答案。然而，它为定义工作流提供了极大的灵活性。如果您在一家拥有软件开发团队的公司工作，其中至少有一名了解 bpm 业务的首席开发人员，那么使用 WF 构建自己的 bpm 而不是购买完整的 bpm 套件将是一个不错的选择。

但是你还需要实现一些东西，比如工作流分配、池、收件箱和发件箱等。

如果您既没有自己的 IT 团队，也没有了解 bpm 业务的开发人员，那么您可能会发现购买或使用功能齐全的 bpm 解决方案很有用。

Workflow Foundation 没有完整的 bpm 工具的功能，但可以帮助您构建一个。还有一些产品是基于 WF 构建的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T18:36:08.997

我不认为 WF (Windows Workflow Foundation) 是 BPM 工具，它不提供与您列出的工具类似的功能。例如，没有内置的管理控制台或内置的方式来处理人工任务；你必须自己建造它。（注意：我的经验是使用 WF 3.5）

我认为它确实有它的位置。如果您正在构建一个特别复杂、长时间运行、面向服务的应用程序（例如，需要像状态机一样运行的应用程序），WF 提供了实现此类应用程序的替代方法。但是，对我来说，它似乎不太适合 BPM，您正在尝试构建一个通常跨越业务单元和应用程序的流程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-07T12:37:57.900

忘记WF。这个项目已经死了好几年了。我们只是在等待微软最终安葬。

# iis-7 - 从 Windows Server 2008 发出请求时经典 asp 出错

> ID：12161090
> 
> 赞同：0
> 
> 时间：2012-08-28T14:07:29.937
> 
> 标签：iis-7, asp-classic, msxml

下面的代码在 windows 7 IIS 中的经典 asp 中运行良好，在 windows server 2008 中它给出错误（如下所示）。

这是代码：

```
url = "https://api.test.credex.net:10001/merchant/xxxx/requests"
set xmlhttp = CreateObject("MSXML2.ServerXMLHTTP") 
postData = "" // some json formatted data
xmlhttp.open "POST", url, false
xmlhttp.setOption(2) = 13056
xmlhttp.setOption(3) = "/credex/credex_net_ext_bundle.pem"
xmlhttp.setRequestHeader "Content-Type", "application/json"
xmlhttp.setRequestHeader "Accept", "application/json"
xmlhttp.setRequestHeader "Authorization", "Basic "&Base64Encode("xxxxxxxx")
xmlhttp.send postData

Response.write xmlhttp.responseText     
set xmlhttp = nothing 
```

**错误：**

> 类别：msxml3.dll
> 列：-1
> 简要说明：客户端和服务器无法通信，因为它们没有共同的算法。
> 错误行号指向“xmlhttp.send postData”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:11:25.857

在你的代码修改行

```
set xmlhttp = CreateObject("MSXML2.ServerXMLHTTP") 
```

至

```
set xmlhttp = CreateObject("Msxml2.ServerXMLHTTP.6.0") 
```

尝试这个

```
<%@language=Jscript%>
<%
   var objSrvHTTP;
   var objXMLSend;
   var objXMLReceive;
   objSrvHTTP = Server.CreateObject("Msxml2.ServerXMLHTTP.6.0");
   objXMLSend = Server.CreateObject("Msxml2.DOMDocument.6.0");
   objXMLReceive = Server.CreateObject("Msxml2.DOMDocument.6.0");

   objXMLSend.async = false;
   objXMLSend.loadXML ("<msg><id>2</id></msg>");

   objSrvHTTP.open ("POST","http://someotherserver/respond.asp",false);
   objSrvHTTP.send (objXMLSend);
   objXMLReceive = objSrvHTTP.responseXML;
   Response.ContentType = "text/xml";
   Response.Write (objXMLReceive.xml);
%> 
```

# sql - 用于从实时数据库镜像数据以进行测试的 SQL 工具？

> ID：12161091
> 
> 赞同：0
> 
> 时间：2012-08-28T14:07:32.260
> 
> 标签：sql, sql-server-2008, tsql

目前，我们有几个环境，但主要是我们有一个实时环境和一个测试环境，就像大多数人一样。

在我们的测试环境中，我们似乎总是在测试环境中拥有良好的数据时遇到问题。很大程度上是因为我们的测试sql环境是由一堆维护得不是很好的松散脚本维护的。显然，一种行动方案是更有效地维护这些，我们发现这不会发生。

所以，我正在寻找一个可以帮助解决这个问题的工具。有没有人发现或使用过这样的工具？

任何建议或方向将不胜感激。这确实是我们开发人员的眼中钉。

**更新**我们的主要问题是测试结构通常与实时不同，我们需要一个自动化的解决方案来处理这个问题，即当一个表在测试中的列多于实时时。更新问题以反映这一点，谢谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T01:03:39.780

就数据传输而言，使用 SSMS 导入和导出数据向导。如果源表和目标表的名称和架构相同，数据传输很容易。我经常使用它从未遇到任何问题（如果有任何问题，请使用身份插入选项身份col）。

SSMS 的脚本生成功能也不错。通常我必须手动编辑脚本的“创建数据库”和“创建用户”部分。

# spring - 从 Tomcat 的 lib 目录加载 Spring 数据库属性

> ID：12161094
> 
> 赞同：0
> 
> 时间：2012-08-28T14:07:38.477
> 
> 标签：spring, tomcat

我想将带有数据库连接字符串的属性文件放在 Tomcat 的 lib 目录中，并在 Spring XML 定义中为数据源加载该文件。有没有办法做到这一点？（因为我知道如何从类路径加载）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:24:20.203

是的，这是完全可能的，因为 tomcat lib 中可用的文件在 web 应用程序的类路径下可用。我们已经在项目中使用它。

```
 <util:properties id="appConfig" location="classpath:app.properties" />

<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
    destroy-method="close">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="#{appConfig['app.db.url']}" />
    <property name="username" value="#{appConfig['app.db.user']}" />
    <property name="password" value="#{appConfig['app.db.password']}" />
    <property name="testOnBorrow" value="true" />
    <property name="testOnReturn" value="false" />
    <property name="testWhileIdle" value="true" />
    <property name="minEvictableIdleTimeMillis" value="60000"></property>
    <property name="validationQuery" value="SELECT 1" />
</bean> 
```

# jquery - 未触发元素上的单击事件（仅在悬停时显示）

> ID：12161097
> 
> 赞同：1
> 
> 时间：2012-08-28T14:07:49.147
> 
> 标签：jquery, events, hover

当您单击一个元素时，我无法触发事件，并且该元素仅在您悬停 td 元素时显示。

```
//Hovering over a td element displayed a Span
$('td').hover(
    function() {$(this).append('<span class="editCell">hello</span>')}, 
    function() {$(this).find('span:last').remove()}
)

//Clicking on that span, it's supposed to trigger alert. But it doesn't. 

$('.editCell').click( function(){

    alert('hello');
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:19:20.247

因为`.click()`事件不适用于动态添加的内容。

使用[.on()](http://api.jquery.com/on/)代替

```
$("td").on("click", ".editCell" ,function(){

}); 
```

*   第一个参数是要绑定的事件。
*   第二个参数是选择器，它过滤所有元素`td`并将`click`事件绑定到该选择器。
*   第三个参数是要调用的函数。

以上称为`delegated-events`。

你也可以这样做：

```
$(".editCell").on("click",function(){

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:10:49.217

这是因为该`editCell`元素是在页面加载后附加的。您需要将事件委托给最近的静态元素。尝试这个：

```
$("td").on("click", ".editCell", function() {
    alert("hello");
}); 
```

虽然`td`选择器仍然有点宽泛，但`editCell`为了性能起见，您应该在最近的父级上放置一个 id。

# php - jQuery POST 表单数据行

> ID：12161102
> 
> 赞同：2
> 
> 时间：2012-08-28T14:07:59.100
> 
> 标签：php, javascript, jquery, ajax, arrays

我正在尝试将一个简单的购物车系统添加到我的照片库中，目前我正在创建一种简单的方法来更新所选产品的类型和数量。但是，我在处理 PHP 端的数据时遇到了问题。

因为我正在发送具有相同字段名称的行，所以 PHP 正在覆盖数据以仅创建 1 个数组。理想情况下，我希望它在 PHP 中变成这样；

```
array(item, product, quantity), 
array(item, product, quantity), 
array(item, product, quantity) 
```

处理此问题的最佳方法是什么。

1.  使用某种唯一标识符创建字段名称，然后让 PHP 重新处理 post 数组。
2.  用 JS 创建数组，然后将它们作为数组作为一行发送，所以在我的例子中是 3 个数组。不确定它是否会起作用，因为它会在 POST 期间转换回字符串？
3.  以“item_gallery_id”字段为键创建帖子数组的某种方式？
4.  我已经坚持了几个小时，对于我认为很简单的事情，我已经尝试了一切:(

开机自检参数

```
cart_id 1
item_gallery_id 6
item_gallery_id 3
item_gallery_id4
product_options 12
product_options 12
product_options 12
quantity    1
quantity    1
quantity    1 
```

我有以下 HTML

```
<form id="order_photo_form">
<table width="100%" border="0">
  <thead>
    <tr>
      <th>Item</th>
      <th>Album/Item</th>
      <th>Product/Price</th>
      <th>Quantity</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <input class="form_data" name="item_gallery_id" value="6" type="hidden">
      <td><img src="img" width="100"></td>
      <td>Item</td>
      <td><select class="form_data" name="product_options">
          <option value="12">Canvas 100x150cm - $550</option>
          <option value="11">Canvas 100x100cm - $350</option>
        </select></td>
      <td><select class="form_data" name="quantity">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
        </select></td>
    </tr>
    <tr>
      <input class="form_data" name="item_gallery_id" value="3" type="hidden">
      <td><img src="img" width="100"></td>
      <td>Item</td>
      <td><select class="form_data" name="product_options">
          <option value="12">Canvas 100x150cm - $550</option>
          <option value="11">Canvas 100x100cm - $350</option>
    </select></td>
      <td><select class="form_data" name="quantity">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
        </select></td>
    </tr>
    <tr>
      <input class="form_data" name="item_gallery_id" value="4" type="hidden">
      <td><img src="img" width="100"></td>
      <td>Item</td>
      <td><select class="form_data" name="product_options">
          <option value="12">Canvas 100x150cm - $550</option>
          <option value="11">Canvas 100x100cm - $350</option>
        </select></td>
      <td><select class="form_data" name="quantity">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
        </select></td>
    </tr>
  </tbody>
</table>
</form> 
```

然后是一些简单的jQuery；

```
$.ajax({
   url: "ajax.php?update_cart",
   type: "POST",
   data: $('#order_photo_form').serialize(),
      success: function(data){
         $.jGrowl(data, { life: 10000 });                           
      },
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:20:00.673

您应该通过添加 id/counter 为表单元素赋予唯一名称，然后在 post 数组上循环以读取您发布的数据并进行处理。

确切的代码取决于您如何准确地确定表单字段名称，但假设您使用了一个从 1 开始并递增 1 的计数器，您可以在您的 php 脚本中执行类似的操作（未经测试，但向您展示了这个想法）：

```
$orders = array();

for($i=1;array_key_exists($_POST, "item_gallery_id" . $i);$i++){
    //read the values and store them
    $newOrder = array(
        "id" => $_POST['item_gallery_id' . $i],  
        "options" => $_POST['product_options' . $i],  
        "quantity" => $_POST['quantity' . $i]
    );        

    array_push($orders, $newOrder);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:34:38.467

您可以执行以下操作：

```
<form id="form" name="form" action="">
  <input name="items[]" type="text" id="item_1" />
  <input name="items[]" type="text" id="item_2" />
</form> 
```

现在`$_POST['items']`是一个数组，您可以循环遍历它：

```
for ($i = 0; $i < count($_POST['items']); $i++) {
    $item = $_POST['items'][$i];
} 
```

但是，这仅适用于 PHP，如果您想在 JavaScript 中引用元素，您必须执行以下操作：`document.getElementsByName('items[]')`. 正如您在 JavaScript 中看到的，括号是名称的一部分，而在 PHP 中，它们表示该值是一个数组。

# meteor - 将 findOne 对象返回到模板

> ID：12161104
> 
> 赞同：1
> 
> 时间：2012-08-28T14:08:21.770
> 
> 标签：meteor

难以理解如何从 findOne() 返回和使用对象。

我的代码是这样的：

html:

```
<head>
  <title>count</title>
</head>

<body>
  {{> hello}}
</body>

<template name="hello">
  {{showcount}}
</template> 
```

JS：

```
var Database = new Meteor.Collection("counters");

if(Meteor.is_client) {
  Template.hello.showcount = function () {
    var c = Database.findOne();
    return c;
  };

}

if (Meteor.is_server) {
  Meteor.startup(function () {
    if(Database.find().count() === 0)
    {
        Database.insert({name: "counter", value: 0});
    }
  });
} 
```

现在我想知道是否有任何方法可以从我的对象访问数据。从 {{showcount}} 更改为 {{showcount.name}} 似乎根本不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T03:07:02.630

当我开始使用 Meteor 时，同样的问题让我好几次......

当 Meteor 客户端连接到服务器时，模板在集合完成同步之前被渲染。即客户端集合在您调用时为空`findOne`。

`console.log(c)`要在通话后看到这一点，`findOne`请尝试重新加载页面。您将看到两个日志条目；一次在初始页面加载时，然后在集合完成同步时再次。

要解决此问题，您需要做的就是更新`hello`模板以处理集合可能尚未同步的事实。

```
{{#if showcount}}
    {{showcount.name}}
{{/if}} 
```

我使用上述更改测试了您的代码，并且可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-28T17:52:51.830

正确的方法是使用#with 标签。

```
<template name="hello">
{{#with showcount}}
    {{name}}
{{/with}}
</template> 
```

有关#with 标签的更多信息，请参阅下面的文档

[https://github.com/meteor/meteor/blob/devel/packages/spacebars/README.md](https://github.com/meteor/meteor/blob/devel/packages/spacebars/README.md)

# sql-server - tSQLt faketable 不重置表映射时如何恢复？

> ID：12161106
> 
> 赞同：14
> 
> 时间：2012-08-28T14:08:24.270
> 
> 标签：sql-server, tdd, tsqlt

faketable 函数没有重新分配为正常。我使用 faketable 的所有表现在都包含我在插入单元测试时使用的值的内容。它有很多表，它使我的数据库毫无用处。请帮助解决此问题或至少解决其原因。这让我对在我们的 CI 部署过程中使用它感到非常紧张，也许更重要的是在我们的本地开发工作中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T18:39:59.927

您的某个测试或您的代码可能使事务处于无法回滚的状态。这通常会导致在结果中看到一个或多个带有“错误”（而不是“成功”或“失败”）的测试。

在这些情况下，FakeTable 操作不会回滚，并且表仍处于伪造状态。

在幕后，FakeTable 重命名表并创建它的新副本。发生重命名时，操作会记录在 tSQLt.Private_RenamedObjectLog 中。

例如，您可以使用以下代码重现 tSQLt 无法正常回滚的错误：

```
EXEC tSQLt.NewTestClass 'SOF_Example'
GO

CREATE TABLE SOF_Example.MyTable (i INT);
GO

INSERT INTO SOF_Example.MyTable (i) VALUES (5);
GO

CREATE PROCEDURE SOF_Example.[test fake a table]
AS
BEGIN
    EXEC tSQLt.FakeTable 'SOF_Example.MyTable';

    INSERT INTO SOF_Example.MyTable (i) VALUES (12);

    COMMIT;
END;
GO

EXEC tSQLt.Run 'SOF_Example'; 
```

您可以使用此代码查看重命名的表日志：

```
SELECT OriginalName, SCHEMA_NAME(schema_id) + '.' + name AS [Name of Renamed Table], create_date
FROM tSQLt.Private_RenamedObjectLog
JOIN sys.objects ON ObjectId = object_id; 
```

如果您已多次重新执行测试，则每个伪造表的日志中可能有许多条目。您可以使用 create_date 来帮助确定哪一个包含原始数据。

**现在，说了这么多：**最好不要在必须保存数据的数据库中编写和执行测试用例。最好的方法是使用不包含用户数据（最多只包含基本配置数据）的数据库。您应该在空白数据库中进行开发和单元测试。填充的数据库应该用于其他形式的测试，例如集成、可用性、性能等。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-07T19:36:58.803

这仅处理将表放回原位（因为这是我和 OP 都遇到的问题），但使用删除表的行可能会使其与其他对象类型一起使用。

```
DECLARE @cmd nvarchar(MAX) = '';

WITH x AS (
    SELECT TOP 10000 
           PL.Id                                            AS Id
          ,PARSENAME(PL.OriginalName,1)                     AS OriginalName
          ,ISNULL(SO.name,'')                               AS name
          ,QUOTENAME(SCHEMA_NAME(ISNULL(SO.schema_id,1)))   AS SchemaName
          ,ISNULL(SEP.major_id,-1)                          AS major_id
      FROM tSQLt.Private_RenamedObjectLog PL
      LEFT JOIN sys.objects SO
        ON ObjectId = object_id
      LEFT JOIN sys.extended_properties SEP
        ON SEP.major_id = SO.object_id
       AND SEP.name = 'tSQLt.FakeTable_OrgTableName'
     ORDER BY SO.create_date DESC
)
SELECT @cmd = @cmd 
       + CASE WHEN x.name = '' OR OriginalName = x.name 
              THEN N'DELETE tSQLt.Private_RenamedObjectLog WHERE Id = ' + CAST(x.Id AS nvarchar) + N';'
              ELSE N'DROP ' 
                 + N'TABLE'   --Replace this with a CASE statement to deal with other object types
                 + N' ' + SchemaName + '.' + QUOTENAME(x.OriginalName) + '; ' 
                 + NCHAR(13) + NCHAR(10) + N'EXEC sp_rename ''' + SchemaName + N'.' 
                                         + QUOTENAME(x.name) + N''',''' + OriginalName + N''';'
                 + NCHAR(13) + NCHAR(10) + N'IF OBJECT_ID('''+SchemaName + N'.' + QUOTENAME(x.name)+N''') IS NULL'
                 + NCHAR(13) + NCHAR(10) + N'BEGIN'
                 + CASE WHEN x.major_id != -1 
                        THEN NCHAR(13) + NCHAR(10) + N'    EXEC sp_dropextendedproperty ''tSQLt.FakeTable_OrgTableName'',''SCHEMA'',''' 
                           + PARSENAME(SchemaName,1) + N''',''TABLE'',''' + OriginalName + N''';'
                        ELSE ''
                   END
                 + NCHAR(13) + NCHAR(10) + N'    DELETE tSQLt.Private_RenamedObjectLog WHERE Id = ' + CAST(x.Id AS nvarchar) + N';'
                 + NCHAR(13) + NCHAR(10) + N'END'
         END
       + NCHAR(13) + NCHAR(10)
       + NCHAR(13) + NCHAR(10)
  FROM x;

--/*   <-Remove leading dashes to execute
PRINT @cmd;
--*/EXEC (@cmd); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-15T13:12:43.557

我对 tSQLt 有同样的问题，并且能够使用表 tSQLt.Private_RenamedObjectLog 的内容来恢复所有内容

该表由 tSQLt 框架维护，并证明包含被伪造的原始表的名称，以及临时（即伪造）表的 SQL ObjectID。使用以下查询生成伪造表的列表，以及它们临时重命名的名称（由 tSQLt 生成的随机名称，例如*tSQLt_tempobject_3815e077fea84c7c*）：

```
SELECT        
  ObjectId, OriginalName, 
  OBJECT_SCHEMA_NAME(ObjectId) AS SchemaName, 
  OBJECT_NAME(ObjectId) AS TemporaryName
FROM            
  tSQLt.Private_RenamedObjectLog 
```

刷新 SSMS 中的对象资源管理器表明确实存在具有这些随机名称的表，并且它们确实包含我的原始数据（哇！！）。

然后我做了以下事情：

1.  试了一个`ROLLBACK TRANSACTION`以防万一。它没有。
2.  备份数据库（即使它搞砸了）
3.  删除了假表（即具有**原始名称**的表，而不是临时名称）
4.  将表（使用临时名称）重命名为原始名称，对每个表使用以下名称：

    `EXEC sp_rename 'schema.tempname', 'originalname'`

5.  *在我知道我的表回来后*清除了表 tSQLt.Private_RenamedObjectLog ，使用

    `DELETE FROM tSQLt.Private_RenamedObjectLog`

制作一个自动生成恢复脚本的程序很容易！也许 tSQLt 中已经有一个 - 有人知道吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-27T11:34:22.873

*我知道我以前回答过这个问题！希望这个答案更有用。而且这个问题很老了。没有其他人使用[SpyProcedure](https://tsqlt.org/user-guide/isolating-dependencies/spyprocedure/)处理伪造函数或过程。*

是的，这个问题很容易由在事务之外运行 tSQLt 测试的代码引起。tSQLt 运行事务中的每个测试，因此所有伪造等都会在测试结束时回滚。tSQLt 重命名表等以伪造它们，这通常会被回滚。运行[SpyProcedure](https://tsqlt.org/user-guide/isolating-dependencies/spyprocedure/)还会创建一个日志表，当您再次尝试运行 SpyProcedure 时可能会发生冲突。因此，如果您不在事务中运行测试，这些更改不会被回滚。幸运的是，tSQLt 包含恢复一切所需的所有信息。

首先尝试`ROLLBACK TRANSACTION`以防万一。如果没有，请检查您的原始表等是否记录在 tSQLt 的表中以获取伪造/重命名的内容：

```
SELECT ObjectId, OriginalName,
  OBJECT_SCHEMA_NAME(ObjectId) AS SchemaName, OBJECT_NAME(ObjectId) AS TemporaryName
FROM tSQLt.Private_RenamedObjectLog 
```

如果返回任何记录，则很有可能可以恢复。但请先备份您的数据库！

现在我们生成 SQL 代码来删除伪造的对象（经过测试原始对象仍然存在）并将原始对象重命名为真实名称。据我所知，tSQLt 可以使用[SpyProcedure伪造](https://tsqlt.org/user-guide/isolating-dependencies/spyprocedure/)[表、视图和函数](https://tsqlt.org/full-user-guide/)以及过程，因此这应该适用于几乎所有情况。SpyProcedure 创建的日志表也会被删除：

```
DECLARE @SQL_work NVARCHAR(MAX) = '';
DECLARE @template NVARCHAR(MAX) = 
'IF OBJECT_ID(''%s.%s'') IS NOT NULL BEGIN -- check original still exists
  DROP %s %s.%s   -- deleted faked object
  EXEC sp_rename ''%s.%s'', ''%s''
END
';
SELECT
  @SQL_work = @SQL_work + 
    FORMATMESSAGE (CAST (@template AS NVARCHAR (MAX)),
      QUOTENAME(OBJECT_SCHEMA_NAME(r.ObjectId)), OBJECT_NAME(ObjectId),
      CASE WHEN type IN ('U', 'V') THEN 'TABLE'
           WHEN type IN ('FN','FS','TF','IF','FT') THEN 'FUNCTION'
           WHEN type = 'P' THEN 'PROCEDURE'
      END, 
      QUOTENAME(OBJECT_SCHEMA_NAME(r.ObjectId)), OriginalName,
      QUOTENAME(OBJECT_SCHEMA_NAME(r.ObjectId)), OBJECT_NAME(ObjectId),
      PARSENAME (OriginalName, 1)
    ) +
    CASE WHEN type = 'P' 
         THEN FORMATMESSAGE ('DROP TABLE %s.%s_SpyProcedureLog
',              QUOTENAME(OBJECT_SCHEMA_NAME(r.ObjectId)),
                PARSENAME (OriginalName, 1)
              )
         ELSE ''
    END +CHAR(13)+CHAR(10)
FROM
  tSQLt.Private_RenamedObjectLog AS r
JOIN 
  sys.objects AS o ON r.ObjectId = o.object_id
PRINT @SQL_work
PRINT 'DELETE FROM tSQLt.Private_RenamedObjectLog' 
```

上面生成并打印代码来设置东西。我建议谨慎执行生成的脚本，即逐个执行部分，并且仅在**其他一切正常**`DELETE`时才执行最后一条语句。

 **我很想知道这是否对您有用，或者是否遇到任何问题以便改进代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-02T16:45:47.710

请注意，每个 tSQLt 测试都只是一个存储过程。它们可以通过简单的 EXEC 执行。未能使用 tSQLt.Run 可能会在不创建事务的情况下执行测试过程。这意味着 FakeTable 等的效果不会在测试完成时回滚。由于 SQL Server 中的事务操作是 tSQLt 功能的核心原则，因此应注意一些。

在我们的组织中，我们提供了一个所有开发人员都应该使用的测试程序模板。模板做的第一件事是检查代码是否在事务中运行。如果不是，它会以适当的消息中止。这不会解决所有与事务相关的问题，但可以确保测试不会裸运行。**

# excel - 考虑到过滤器，您如何计算列的 MEDIAN？

> ID：12161108
> 
> 赞同：13
> 
> 时间：2012-08-28T14:08:35.730
> 
> 标签：excel, excel-formula, excel-2010

我最近发现，您可以使用`SUBTOTAL`各种函数来总结或查找列的总数，即使有过滤器应用于它。

但是，函数列表`SUBTOTAL`不包括`MEDIAN`.

考虑到某些行已被过滤掉，是否可以找到一列数字的中位数？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-28T14:21:09.900

更新以从下面的 lori_m 中获取评论

**1\. 原始答案 - 所有 xl 版本**[由此解决方案](http://www.pcreview.co.uk/forums/subtotal-using-median-functoin-t1753713.html)
中的Aladin Akyurek 提供 如果您的数据在 A1:A10 中，则数组输入此公式，按[shift](/questions/tagged/shift "show questions tagged 'shift'") [ctrl](/questions/tagged/ctrl "show questions tagged 'ctrl'") [enter](/questions/tagged/enter "show questions tagged 'enter'") `=MEDIAN(IF(SUBTOTAL(3,OFFSET(A1:A10,ROW(A1:A10)-MIN(ROW(A1:A10)),,1)),A1:A10))`

**2\. 更新答案（非数组） - 所有 xl 版本** `=MEDIAN(IF(SUBTOTAL(3,OFFSET(A1:A10,MMULT(ROW(A1:A10),1)-MIN(MMULT(ROW(A1:A10),1)),,1)),A1:A10))`

**3\. Excel 2010 和 Excel 2013**
`=AGGREGATE(12,5,A1:A10)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-19T14:00:14.103

是的，`SUBTOTAL`不包括`MEDIAN`，但您可以通过首先使用**Excel 公式的一部分，**`SUBTOTAL`然后在需要.**`MEDIAN`**

 **想象一下，您`AVERAGE`在 Excel 小计函数中使用了公式，例如 =SUBTOTAL(1;E10:E12) 现在，将所有出现的 替换为**`"SUBTOTAL(1;"`**（**`"MEDIAN("`**不带引号）。**

# c++ - 迭代器或指针的 std::enable_if 或 SFINAE

> ID：12161109
> 
> 赞同：7
> 
> 时间：2012-08-28T14:08:37.103
> 
> 标签：c++, templates, iterator, sfinae, enable-if

我想为`MyClass`它编写一个带有参数的构造函数，并且我希望它仅在参数是 a`pointer`或 an `iterator`（具有 的东西`iterator_traits`）时编译。如何做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-28T14:17:45.787

遗憾的是，没有标准的方法来检测一个类是否为模型`Iterator`。最简单的检查是`*it`并且`++it`在语法上都是有效的；您可以使用标准 SFINAE 技术做到这一点：

```
template<typename T,
    typename = decltype(*std::declval<T&>(), void(), ++std::declval<T&>(), void())>
    MyClass(T); 
```

考虑到`Iterator`24.2.2:2 的要求：

```
template<typename T> typename std::enable_if<
    !std::is_void<decltype(*std::declval<T &>())>::value
    && std::is_same<decltype(++std::declval<T &>()),
                    typename std::add_lvalue_reference<T>::type>::value,
    std::true_type>::type has_iterator_requirements_helper(int);
template<typename T> std::false_type has_iterator_requirements_helper(...);
template<typename T> struct has_iterator_requirements:
    decltype(has_iterator_requirements_helper<T>(0)) {};

template<typename, bool> struct is_iterator_check: std::false_type {};
template<typename T> struct is_iterator_check<T, true>: std::true_type {
    typedef typename std::iterator_traits<T>::difference_type difference_type;
    typedef typename std::iterator_traits<T>::value_type value_type;
    typedef typename std::iterator_traits<T>::iterator_category iterator_category;
    typedef typename std::iterator_traits<T>::reference reference;
    typedef typename std::iterator_traits<T>::pointer pointer;
    static_assert(std::is_same<decltype(*std::declval<T &>()), reference>::value
        || std::is_void<reference>::value, "*r must be of type reference");
};
template<typename T> struct is_iterator: is_iterator_check<T,
    (std::is_pointer<T>::value
     && !std::is_void<typename std::remove_pointer<T>::type>::value
     && !std::is_function<typename std::remove_pointer<T>::type>::value
     ) || (std::is_copy_constructible<T>::value
     && std::is_copy_assignable<T>::value
     && std::is_nothrow_destructible<T>::value
     // TODO: check lvalues are swappable
     && has_iterator_requirements<T>::value
     )> {}; 
```

尝试使用的问题`iterator_traits`在于它是为所有类型定义的模板，并且它的实例化在非 SFINAE 上下文中将失败（回想一下，SFINAE 仅适用于直接替换失败）。libstdc++ 有一个[符合标准的扩展](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/libstdc++/api/a01471_source.html#l00143)`iterator_traits`，因此在非迭代器类型上实例化将产生一个空类型；您可以通过检查`iterator_category`类型的存在来做类似的技巧：

```
template<typename T> std::true_type has_iterator_category_helper(
    T::iterator_category *);
template<typename T> std::false_type has_iterator_category_helper(...);
template<typename T> struct has_iterator_category<T>:
    decltype(has_iterator_category_helper<T>(0)) { };
template<typename T> struct is_iterator: std::integral_constant<bool,
    std::is_pointer<T>::value || has_iterator_category<T>::value> {};

template<typename T, typename = std::enable_if<is_iterator<T>::value>>
    MyClass(T); 
```

但是，这*不适*用于本身不公开`iterator_category`但已由单独的`iterator_traits`专业化调整的类型；在这种情况下，简单的 SFINAE 方法更有意义（您可以`iterator_traits`在构造函数中实例化以确认该类型类似于迭代器）。

# less - 在lesscss中继承，不继承子类

> ID：12161112
> 
> 赞同：3
> 
> 时间：2012-08-28T14:08:43.590
> 
> 标签：less

这是我的`style.less`代码：

```
.transition {
    -ms-transition: all 0.3s ease-in-out;
    -moz-transition: all 0.3s ease-in-out;
    -o-transition: all 0.3s ease-in-out;
    -webkit-transition: all 0.3s ease-in-out;
    transition: all 0.3s ease-in-out;
}

.shadow {
    padding: 10px 10px 10px 10px;
    margin: 10px 10px 10px 10px;
    -moz-box-shadow: 0px 0px 10px #808080;
    -o-box-shadow: 0px 0px 10px #808080;
    -webkit-box-shadow: 0px 0px 10px #808080;
    box-shadow: 0px 0px 10px #808080;
}

    .shadow:hover {
        -moz-box-shadow: 0px 0px 10px #a5a5a5;
        -o-box-shadow: 0px 0px 10px #a5a5a5;
        -webkit-box-shadow: 0px 0px 10px #a5a5a5;
        box-shadow: 0px 0px 10px #a5a5a5;
    }

.radius {
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;
}

#t1 {
    .shadow;
    .transition;
    .radius;
} 
```

但是当我悬停时`#t1`，阴影不会改变。我想知道为什么它不起作用并期望添加`#t1:hover`和继承样式还有其他方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T14:31:47.600

您需要更改`.hover`类以将`:hover`状态包含在类定义中：

```
.hover {
    ...styles...

    &:hover {
        ...hover state styles...
    }
}
.someOtherClass {
    .hover;
} 
```

[例子](http://codepen.io/zzzzBov/pen/gaEpr)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T14:42:25.067

为了`:hover`正确生成样式，您需要连接`.shadow`并`.shadow:hover`通过`&`运算符使它们属于一起：

```
.shadow {
    /*normal styles*/
    &:hover{
       /* hover styles */
    }
} 
```

其余的可以保持不变，因为

```
#t1{
  .shadow;
} 
```

现在将自动生成正常和悬停规则。

你可以在这里尝试一下：[Online-Less-Converter](http://www.marcdonaldson.com/less-2-css-online-converter/)

`.shadow`您通过运算符添加的每个附加块也`&`将自动应用到`#t1`，因此如果您添加另一个块：

```
.shadow{
    &:hover{}   
    &.foo{
       /* another set of rules*/
    }
}
#t1{
    .shadow; /* this will now generate 3 ruleblocks for #t1*/
} 
```

规则块也将`.foo`生成`#t1`：

```
#t1{...}
#t1:hover{...}
#t1.foo{/* another set of rules*/} 
```

# json - JPA 实体，JSON 序列化

> ID：12161113
> 
> 赞同：0
> 
> 时间：2012-08-28T14:08:48.880
> 
> 标签：json, serialization, jpa

我有我的 JPA 实体类 AssetOrder。我为另一个名为 Product 的实体定义了一个自定义 JSONSerializer，AssetOrder 实体在内部使用它来映射 Product 中的 productID。正如我们所见，AssetOrder 还有一个 JSONSerializer 用于格式化 Date 对象。Date 对象 JSON 序列化完美运行。但是，我不确定产品的 JSONSerializer 是否完美运行。当我从 JPA DAO 检索 AssetOrder 对象并尝试在我的客户端页面上显示时，我收到一条响应说 - 响应包含无效的 JSON 数据。我附上了三个 java 类，AssetOrder.java、Product.java 和 JSONProductSerializer.java。请帮忙，我做错了什么。谢谢。

```
//===================== AssetOrder.java ============================

package my.pkg;

import java.util.Date;

import javax.persistence.CascadeType;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;

import com.fasterxml.jackson.annotation.JsonAutoDetect;
import com.fasterxml.jackson.databind.annotation.JsonSerialize;

@JsonAutoDetect
@Entity
public class AssetOrder {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long orderId;
    private String orderRequesterSignum;
    private String orderOwnerSignum;

    @JoinColumn(name = "productID")
    @ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.EAGER)
    private Product product;

    //private String productId;
    private int duartion;
    private String processInstanceUUID;
    private Date orderDate;
    private Date orderDeliveryDate;
    private Date modifiedDate;
    private String status;
    private String comments;

    public Long getOrderId() {
        return orderId;
    }
    public void setOrderId(Long orderId) {
        this.orderId = orderId;
    }
    public String getOrderRequesterSignum() {
        return orderRequesterSignum;
    }
    public void setOrderRequesterSignum(String orderRequesterSignum) {
        this.orderRequesterSignum = orderRequesterSignum;
    }
    public String getOrderOwnerSignum() {
        return orderOwnerSignum;
    }
    public void setOrderOwnerSignum(String orderOwnerSignum) {
        this.orderOwnerSignum = orderOwnerSignum;
    }
    public int getDuartion() {
        return duartion;
    }
    public void setDuartion(int duartion) {
        this.duartion = duartion;
    }
    public String getProcessInstanceUUID() {
        return processInstanceUUID;
    }
    public void setProcessInstanceUUID(String processInstanceUUID) {
        this.processInstanceUUID = processInstanceUUID;
    }

    @JsonSerialize(using=JsonDateSerializer.class)
    public Date getOrderDate() {
        return orderDate;
    }
    public void setOrderDate(Date orderDate) {
        this.orderDate = orderDate;
    }

    @JsonSerialize(using=JsonDateSerializer.class)
    public Date getOrderDeliveryDate() {
        return orderDeliveryDate;
    }
    public void setOrderDeliveryDate(Date orderDeliveryDate) {
        this.orderDeliveryDate = orderDeliveryDate;
    }

    @JsonSerialize(using=JsonDateSerializer.class)
    public Date getModifiedDate() {
        return modifiedDate;
    }
    public void setModifiedDate(Date modifiedDate) {
        this.modifiedDate = modifiedDate;
    }

    public String getStatus() {
        return status;
    }
    public void setStatus(String status) {
        this.status = status;
    }
    public String getComments() {
        return comments;
    }
    public void setComments(String comments) {
        this.comments = comments;
    }

    @JsonSerialize(using=JsonProductSerializer.class)
    public Product getProduct() {
        return product;
    }
    public void setProduct(Product product) {
        this.product = product;
    }
}

//============================Product.java=========================
package my.pkg;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;

@Entity
public class Product {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long productID; 
    private String productName;
    private String productCategory;
    private String productDesc; 
    private Long productOwnerId;
    private Long productHierarchyId;
    private String productProcessID;
    private Long productGroupID;

    public Long getProductID() {
        return productID;
    }
    public void setProductID(Long productID) {
        this.productID = productID;
    }
    public String getProductName() {
        return productName;
    }
    public void setProductName(String productName) {
        this.productName = productName;
    }
    public String getProductCategory() {
        return productCategory;
    }
    public void setProductCategory(String productCategory) {
        this.productCategory = productCategory;
    }
    public String getProductDesc() {
        return productDesc;
    }
    public void setProductDesc(String productDesc) {
        this.productDesc = productDesc;
    }
    public Long getProductOwnerId() {
        return productOwnerId;
    }
    public void setProductOwnerId(Long productOwnerId) {
        this.productOwnerId = productOwnerId;
    }
    public Long getProductHierarchyId() {
        return productHierarchyId;
    }
    public void setProductHierarchyId(Long productHierarchyId) {
        this.productHierarchyId = productHierarchyId;
    }
    public String getProductProcessID() {
        return productProcessID;
    }
    public void setProductProcessID(String productProcessID) {
        this.productProcessID = productProcessID;
    }
    public Long getProductGroupID() {
        return productGroupID;
    }
    public void setProductGroupID(Long productGroupID) {
        this.productGroupID = productGroupID;
    }
}

//=================JSONProductSerializer.java=========================
//the commented part in the below code didn't work either
//=====================================================================
package my.pkg;

import java.io.IOException;

import org.springframework.stereotype.Component;

import com.fasterxml.jackson.core.JsonGenerator;
import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.JsonSerializer;
import com.fasterxml.jackson.databind.SerializerProvider;

/**
 * Used to serialize com.xxxx.persistence.entity.Product, which is not a common JSON
 * type, so we have to create a custom serialize method;.
 *
 * source: google.com
 */
@Component
public class JsonProductSerializer extends JsonSerializer<Product>{

    @Override
    public void serialize(Product product, JsonGenerator gen, SerializerProvider provider)
            throws IOException, JsonProcessingException {

        synchronized(product) {
            /*gen.writeStartObject();
            gen.writeNumberField("productID", product.getProductID());
            gen.writeStringField("productName", product.getProductName());
            gen.writeStringField("productCategory", product.getProductCategory());
            gen.writeStringField("productDesc", product.getProductDesc());
            gen.writeNumberField("productOwnerId", product.getProductOwnerId());
            gen.writeNumberField("productHierarchyId", product.getProductHierarchyId());
            gen.writeStringField("productProcessID", product.getProductProcessID());
            gen.writeNumberField("productGroupID", product.getProductGroupID());
            gen.writeEndObject();*/
            gen.writeNumber(product.getProductID());
            gen.writeString(product.getProductName());
            gen.writeString(product.getProductCategory());
            gen.writeString(product.getProductDesc());
            gen.writeNumber(product.getProductOwnerId());
            gen.writeNumber(product.getProductHierarchyId());
            gen.writeString(product.getProductProcessID());
            gen.writeNumber(product.getProductGroupID());
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:21:17.333

实际上，问题出在带有 com.fasterxml.jackson（jackson 的最新版本）包的 java.util.Date 序列化上。我恢复到 org.codehaus.jackson，一切都像魅力一样。

# android - Gallery的ImageView上的setOnClickListener停止Gallery的滚动

> ID：12161117
> 
> 赞同：0
> 
> 时间：2012-08-28T14:09:15.967
> 
> 标签：android, android-imageview, android-gallery

我有一个包含一个 textview 和 imageview 的画廊。如果我在 Imageview 上设置 OnClickListener，Gallery 将停止滚动。我需要一个可点击和滚动的画廊，用户可以在其中点击 imageview 或 textview 将显示应用程序的下一个活动。

在 onClick 事件中，我想通过捆绑将一些数据传递给下一个活动。如果我在 ImageAdapter 类之外调用 onClick，我无法将数据传递给下一个活动。

如果我放 holder.image 或画廊而不是 holder.text。图库停止滚动。

请建议我一些解决方案，以便我可以单击图像和文本，同时我可以滚动图库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:14:18.357

不，不，不......你不应该把你的 onClickListener 放在你的`getView()`. 你应该做的是：

```
gallery.setOnClickListener(); 
```

并在`onClickListener()`其中检索`index`单击的项目的。在您展示的代码中，您只是对触摸区域过度充电，因此它会破坏一切。

- 编辑

这是您可以执行的操作：

```
Gallery gallery = (Gallery) findViewById(R.id.top_gallery);
    gallery.setAdapter(new ImageAdapter(this));
    gallery.setOnItemClickListener(new OnItemClickListener()
    {
        public void onItemClick(AdapterView parent, 
                View v, int position, long id) 
                {
                    TextView tView = (TextView) findViewById(R.id.cat_desc);
                    switch(gallery.getSelectedItemPosition())
                    {   
                    //do your stuff here...
                    }
    } 
```

# php - 可以用 PHP 获取网络地址吗？

> ID：12161118
> 
> 赞同：1
> 
> 时间：2012-08-28T14:09:15.707
> 
> 标签：php, ip

> **可能重复：**
> [使用 PHP 获取用户真实 IP 地址](https://stackoverflow.com/questions/4686318/getting-users-real-ip-address-using-php)

我在一个网站上有一个脚本，可以在客户离开页面时保存一些关于客户的信息。是否有可能获得他的网络地址，例如`192.168.1.154`。

我在论坛上看到一个关于这个的讨论，他们说可以使用`$_SERVER['HTTP_X_FORWARDED_FOR']`，但它不起作用！它显示了我的真实 IP。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:28:56.977

如果您的服务器位于 NAT 网络之外，则您无法获取客户端的内部本地 IP。这不仅会带来安全风险，而且会破坏 NAT 的目的。

如果你想要他的本地 NAT'd IP，你可以运行一个 javascript，这样的[东西可能会起作用](http://www.webdeveloper.com/forum/showthread.php?t=242538)：

```
function myIP(){
  var yip2=java.net.InetAddress.getLocalHost(); 
  var yip=yip2.getHostAddress();
  return yip;
}//end myIP

alert("your machine's local network IP is "+ myIP()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T14:12:33.540

`$_SERVER['REMOTE_ADDR']`

文档[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

如果客户端会从本地网络访问你，你会得到`192.168.*.*`，否则远程 ip 就像`35.88.33.11`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T14:13:01.853

**用这个：**

```
<?php  

   echo $_SERVER['REMOTE_ADDR'];  //ip of visitor - you need this

   echo $_SERVER['SERVER_ADDR'];  //ip of server

?> 
```

**使用 JSON，您还可以使用以下代码获取客户端 ip：**

```
$(document).ready(function(){

    //Service 1
    $.getJSON( "http://smart-ip.net/geoip-json?callback=?",
            function(data){
                alert( data.host);
            }
    );

    //Service 2
    $.getJSON( "http://jsonip.appspot.com/?callback=?",
            function (json){
                alert( "User ip: " + json.ip); // alerts the ip address
            }
    );

}); 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T14:16:16.257

这是不可能的服务器端。像 192.168.1.154 这样的地址是不可路由的，所以服务器对它们一无所知。某些路由器可能设置了 HTTP_X_FORWARDED_FOR 标头，但您不应该指望它。除非脚本只在本地网络上运行，就像 Peter Szymkowski 建议的那样。

有关 NAT 的更多信息，请参阅[https://superuser.com/questions/63124/is-it-possible-to-get-the-nat-i ​​p-address](https://superuser.com/questions/63124/is-it-possible-to-get-the-nat-ip-address)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T14:16:36.793

我会看看哪个参数`var_dump($_SERVER);`显示您的网络IP。

# c# - 在 UI 中设置图像

> ID：12161119
> 
> 赞同：0
> 
> 时间：2012-08-28T14:09:16.877
> 
> 标签：c#, jquery, html, asp.net-mvc-3, image

我使用 .net c# MVC3 模型。当我点击页面上的保存时，我需要显示一个名为加载的 gif。每当用户使用 jquery 单击保存按钮时，我都会使用`<img src="sourcepath" alt="loading" style="display:none"/>`并尝试显示它。我已将图像临时存储在视图文件夹中。不幸的是，我无法在屏幕上看到图像。我可以通过一个小的红十字取消按钮看到它的划分。

请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:20:39.507

如果您看到损坏的图像图标，则表示您的 src“源路径”错误。您通常会将静态内容放在站点的 Content 文件夹中，并使用`/Content/imagename.jpg`or`/Content/Images/imagename.jpg`或类似方法访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:18:51.790

尝试使用搜索，在这里您可以找到在执行 ajax 请求时显示微调器的解决方案：

[如何在 jQuery 中显示加载微调器？](https://stackoverflow.com/questions/68485/how-to-show-loading-spinner-in-jquery)

# asp.net-mvc-3 - 在我的 MVC3 中执行存储过程时出现错误？

> ID：12161120
> 
> 赞同：0
> 
> 时间：2012-08-28T14:09:18.030
> 
> 标签：asp.net-mvc-3, sql-server-2008, stored-procedures

大家好，我有方法将一些参数传递给存储过程，当我执行它时，我得到了这个错误

**[从具体化的“System.Int32”类型到“System.String”类型的指定转换无效。]**

这就是我如何调用我的存储过程

```
 public JsonResult CreatedBugs()
    {
        int year;
        int month;
        int projectid;
        year = 2012;
        month = 8;
        projectid = 16;
        var loggedbugs = db.ExecuteStoreQuery<LoggedBugs>("LoggedBugs @Year,@Month,@ProjectID", new SqlParameter("@Year",year ), new SqlParameter("@Month",  month ), new SqlParameter("@ProjectID", projectid )).ToList();
        var ClosedBugs = db.ExecuteStoreQuery<LoggedBugs>("ClosedBugs @Year,@Month,@ProjectID", new SqlParameter("@Year", year), new SqlParameter("@Month", month), new SqlParameter("@ProjectID", projectid)).ToList();
        var model = new LoggedBugs
        {
            LoggedBugsCount = loggedbugs,
            ClosedBugs = ClosedBugs
        };
        return Json(model, JsonRequestBehavior.AllowGet);
    } 
```

这是我的存储过程

```
 alter procedure LoggedBugs
      (
      @Year int,
      @Month int,
      @ProjectID int
      )
      as
      begin
       SELECT projectName,
    ProjectYear,
    ProjectMonth, 
      Week1, Week2, Week3, Week4, Week5
          FROM (
 Select  p.projectName,YEAR(b.CreatedDate) ProjectYear, MONTH(b.CreatedDate) ProjectMonth,
        'Week' + CAST(DATEDIFF(week, DATEADD(MONTH, DATEDIFF(MONTH, 0, b.CreatedDate), 0), b.CreatedDate)+1 AS VARCHAR) as [Weeks],
        b.BUGID
From    BUGS b inner join projects p on b.ProjectId = p.ProjectId
Where   DatePart(year, CreatedDate) = @Year and datepart(month, Createddate) = @Month and b.projectid = @ProjectID 
  ) p
   PIVOT (COUNT(BUGID) FOR [Weeks] IN (WEEK1, WEEK2, WEEK3, Week4, Week5)) AS pvt
 end 
```

我在哪里做错了

**编辑1**

这是我的 LoggedBug 类

```
 public class LoggedBugs
{
    public string projectName { get; set; }
    public string ProjectYear { get; set; }
    public string ProjectMonth { get; set; }
    public string Week1 { get; set; }
    public string Week2 { get; set; }
    public string Week3 { get; set; }
    public string Week4 { get; set; }
    public string Week5 { get; set; }
    public IEnumerable<LoggedBugs> LoggedBugsCount { get; set; }
    public IEnumerable<LoggedBugs> ClosedBugs { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T18:03:09.040

`ProjectYear`和可能有问题`ProjectMonth`。在数据库端它们是`int`，所以在 .NET 端它们可能会被拆箱为`System.Int32`. 在您的实体中，它们是`string`. 尝试将其转换为`varchar`您的 sp 或将实体中的类型更改为`int`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T21:15:28.260

将 ProjectYear 和 ProjectMonth 属性更改为在 LoggedBugs 类中键入 int。您的 sql 将它们作为 int 返回，请参阅[YEAR SQL MSDN 描述](http://msdn.microsoft.com/en-us/library/ms186313.aspx)，因为 YEAR 和 MONTH sql 函数都返回 int 类型的值。您的 C# 代码需要一个字符串，因此您会收到类型不匹配异常。

# objective-c - 使用图纸视图缩放

> ID：12161123
> 
> 赞同：4
> 
> 时间：2012-08-28T14:09:21.620
> 
> 标签：objective-c, ios, uiview, zooming, drawrect

我正在寻找一种解决方案，以便在绘图视图上进行漂亮的缩放。在我的应用程序中，我有一个带有其他 UIView 的视图（用作绘图视图），当我在其上绘制笔画时，笔画是完美的。但是当我放大视图时，我有这个非常丑陋的效果（像素化的笔画）：（[来源：][[imagup.com](http://data.imagup.com/10/1160827911.5509png)][）][![截屏](../Images/15163f0062ce6662ab6bd32f94a9132c.png)](https://i.stack.imgur.com/eTuNn.png)

[网址图片](https://www.imagup.com/)

是否有解决方案才能获得适当的中风？

我的 UIViewController 有这样的层次结构：

*   UIViewController
    *   滚动视图
        *   可缩放视图（使用 viewForZoomingInScrollView 方法定义）
            *   图像视图
            *   图纸视图

非常感谢 ！

问候，塞巴斯蒂安；）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:59:10.457

我正在制作矢量绘图应用程序，让我告诉你，要正确完成这不是一项简单的任务，需要相当多的工作。

需要记住的一些问题：

*   如果您不使用矢量图形（例如，CGPath 是矢量），您将无法移除像素化。例如，一个 UIImage 就只有这么多的分辨率。
*   为了使您的绘图看起来不像素化，您将不得不重绘所有内容。如果你有很多绘图，这可能是一项昂贵的任务。
*   具有良好的分辨率而缩放几乎是不可能的，因为它需要过大的上下文，并且您的绘图可能会超出设备的功能

我使用核心图形进行绘图，因此我解决此问题的方法是分配和管理多个 CGContext 并将它们用作缓冲区。我有一个上下文始终保持在我的最小缩放级别（比例因子为 1）。该上下文始终被引入并使其在完全取消缩放时不会花费时间重新绘制，因为它已经完成了。缩放时单独使用另一个上下文进行绘图。未缩放时，该上下文将被忽略（因为无论如何都必须根据新的缩放级别重新绘制它）。我如何执行缩放的高级算法如下：

```
- (IBAction)handlePinchGesture:(UIGestureRecognizer *)sender
{
    if(sender.state == UIGestureRecognizerStateBegan)
    {
         //draw an image from the unzoomedContext into my current view

             //set the scale transformation of my current view to be equal to "currentZoom", a property of the view that keeps track of the actual zoom level
    }
    else if(sender.state == UIGestureRecognizerStateChanged)
    {
         //determine the new zoom level and transform the current view, keeping track in the currentZoom property

             //zooming will be pixelated.
    }
    else if(sender.state == UIGestureRecognizerStateEnded || sender.state == UIGestureRecognizerStateCancelled)
    {
             if(currentZoom == 1.0)
             {
                   //you are done because the unzoomedContext image is already drawn into the view!
             }
             else
             {
                   //you are zoomed in and will have to do special drawing

                   //perform drawing into your zoomedContext
                   //scale the zoomedContext

                   //set the scale of your current view to be equal to 1.0

                   //draw the zoomedContext into the current view.  It will not be pixelated!

                   //any drawing done while zoomed needs to be "scaled" based on your current zoom and translation amounts and drawn into both contexts
             }

    }

} 
```

这对我来说变得更加复杂，因为我有额外的缓冲区用于缓冲区，因为在有大量绘图时绘制路径的图像比绘制路径要快得多。

在管理多个上下文、调整代码以有效地绘制到多个上下文、遵循适当的 OOD、根据当前缩放和平移缩放新绘图等之间，这是一项艰巨的任务。希望这可以激励您并使您走上正确的轨道，或者您认为摆脱这种像素化不值得努力:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T06:33:48.913

我遇到了同样的问题并找到了解决方案：告诉视图使用 a`CATiledLayer`作为支持层，然后告诉视图它支持多少级别的缩放。这对我有用，当（父）视图缩放时，我的绘图方法会自动调用。

`levelsOfDetail`和的简短解释`levelsOfDetailBias`：

*   `levelsOfDetail`确定总共有多少缩放级别
*   `levelsOfDetailBias`确定其中有多少正在放大。

所以在我的示例中，我有 4 个缩放级别，3 个被放大，1 个是非缩放级别，这意味着我的视图仅在放大时重绘。

```
@imprementation MyZoomableView

+ (Class)layerClass
{
    return [CATiledLayer class];
}

- (id)initWithFrame:(CGRect)frame
{
    if ((self = [super initWithFrame:frame])) {
        ((CATiledLayer *)self.layer).levelsOfDetail = 4;
        ((CATiledLayer *)self.layer).levelsOfDetailBias = 3;
    }
    return self;
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T10:30:48.417

`[self setContentScaleFactor:scale];`在您的`scrollViewDidEndZooming:`委托方法中使用。

# html - 下拉菜单 css

> ID：12161129
> 
> 赞同：2
> 
> 时间：2012-08-28T14:09:47.000
> 
> 标签：html, css, drop-down-menu

我有一个带有 html 和 css 水平的菜单，我只想为菜单“参数”的最后一个元素添加一个垂直菜单

这是html代码：

```
<div id="templatemo_menu">
                        <ul>
                            <li><a href="/impression/faces/vues_admin/acceuil_admin.xhtml" class="current"><span class="home">Acceuil</span></a></li>
                            <li><a href="/impression/faces/vues_admin/touslesCommandes.xhtml" class="commandes"><span class="commandes">Commandes</span></a></li>
                            <li><a href="/impression/faces/vues_admin/utilisateurs.xhtml"><span class="users">Utilisateurs</span></a></li>
                            <li><a href="/impression/faces/vues_admin/newMessage.xhtml"><span class="gallery">Message</span></a></li>
                            <li><a href="/impression/faces/vues_admin/historiqueMessages.xhtml"><span class="contact">Messages</span></a></li>
                            <li>
                                <a href="/impression/faces/vues_admin/historiqueMessages.xhtml"><span class="contact2">Paramétres</span></a>
                                <ul class="sousmenu">
                                    <li><a href="#">CSS</a></li>
                                    <li><a href="#">Graphic design</a></li>
                                    <li><a href="#">Development tools</a></li>
                                    <li><a href="#">Web design</a></li>
                                </ul>

                            </li>
                        </ul>       

                    </div> 
```

这是CSS代码：

```
 #templatemo_menu {
    width: 980px;
    height: 110px;
    margin: 0 auto;
    background: url(images/templatemo_menu.jpg) repeat-x;
}

#templatemo_menu ul {
    margin: 0;
    padding: 1px 40px 0 40px;
    list-style: none;
}

#templatemo_menu ul li {
    padding: 0px;
    margin: 0px;
    display: inline;
}

#templatemo_menu ul li a {
    float: left;
    display: block;
    width: 120px;
    height: 95px;   
    padding: 15px 0 0 0;
    margin-right: 5px;
    text-align: center;
    font-size: 16px;
    text-decoration: none;
    color: #163142; 
    font-weight: bold;
    outline: none;
    background: url(images/templatemo_menu_item.jpg) no-repeat;
}

#templatemo_menu li a:hover, #templatemo_menu li .current {
    color: #000000; 
    background: url(images/templatemo_menu_hover.jpg) no-repeat;
}

#templatemo_menu ul li a .home {
    display: block;
    height: 20px;
    padding: 55px 0 0 0;
    background: url(images/home_48.png) no-repeat center top;
}

#templatemo_menu ul li a .aboutus {
    display: block;
    height: 20px;
    padding: 55px 0 0 0;
    background: url(images/new_order2.png) no-repeat center top;
}
#templatemo_menu ul li a .commandes {
    display: block;
    height: 20px;
    padding: 55px 0 0 0;
    background: url(images/commandes_v1.png) no-repeat center top;
}
#templatemo_menu ul li a .users {
    display: block;
    height: 20px;
    padding: 55px 0 0 0;
    background: url(images/user.png) no-repeat center top;
}

#templatemo_menu ul li a .services {
    display: block;
    height: 20px;
    padding: 55px 0 0 0;
    background: url(images/historiqueCommandes2.png) no-repeat center top;
}

#templatemo_menu ul li a .news {
    display: block;
    height: 20px;
    padding: 55px 0 0 0;
    background: url(images/newspaper_48.png) no-repeat center top;
}

#templatemo_menu ul li a .gallery {
    display: block;
    height: 20px;
    padding: 55px 0 0 0;
    background: url(images/newMessage.png) no-repeat center top;
}

#templatemo_menu ul li a .contact {
    display: block;
    height: 20px;
    padding: 55px 0 0 0;
    background: url(images/mail_48.png) no-repeat center top;
} 
```

（好像有点长，因为我做了网站的模板）

所以我尝试了这段代码css（一个下拉菜单）但它不起作用，我尝试添加和删除属性但没有结果：

```
 #templatemo_menu .sousMenu
{
    display: none;
    list-style-type: none;
    margin: 0;
    padding: 0;
    border: 0;
}
#templatemo_menu .sousMenu li
{
    float: none;
    margin: 0;
    padding: 0;
    border: 0;
    width: 149px;
    border-top: 1px solid transparent;
    border-right: 1px solid transparent;
}
#templatemo_menu .sousMenu li a:link, #menuDeroulant .sousMenu li a:visited
{
    display: block;
    color: #FFF;
    margin: 0;
    border: 0;
    text-decoration: none;
    background: transparent url("fondTR.png") repeat;
}
#templatemo_menu .sousMenu li a:hover
{
    background-image: none;
    background-color: #F2462E;
}

#templatemo_menu li:hover > .sousMenu { display: block; } 
```

你有什么想法吗，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:00:53.740

在您的 HTML 中替换`<ul class="sousmenu">`为`<ul class="sousMenu">`

或者

在你的 css`.sousmenu`中用`.sousMenu`(Everywhere) 改变。

做你喜欢的事，但在情况下让他们平等。看看它的不同之处。

# javascript - 有没有办法可以检查数据属性是否存在？

> ID：12161132
> 
> 赞同：207
> 
> 时间：2012-08-28T14:09:59.653
> 
> 标签：javascript, jquery

有什么方法可以运行以下命令：

```
var data = $("#dataTable").data('timer');
var diffs = [];

for(var i = 0; i + 1 < data.length; i++) {
    diffs[i] = data[i + 1] - data[i];
}

alert(diffs.join(', ')); 
```

**仅**当 id 为 #dataTable 的元素上有一个名为 data-timer 的属性时？

* * *

## 回答 #1

> 赞同：339
> 
> 时间：2012-08-28T14:12:33.890

```
if ($("#dataTable").data('timer')) {
  ...
} 
```

注意这仅`true`在数据属性不是空字符串或“假”值（例如`0`or ）时返回`false`。

如果要检查数据属性是否存在，即使为空，请执行以下操作：

```
if (typeof $("#dataTable").data('timer') !== 'undefined') {
  ...
} 
```

* * *

## 回答 #2

> 赞同：118
> 
> 时间：2012-08-28T14:11:33.707

```
if (typeof $("#dataTable").data('timer') !== 'undefined')
{
    // your code here
} 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2014-04-08T14:21:22.967

为了提供与上述不同的答案；你可以这样检查`Object.hasOwnProperty(...)`：

```
 if( $("#dataTable").data().hasOwnProperty("timer") ){
     // the data-time property exists, now do you business! .....
 } 
```

或者，如果您有多个要迭代的数据元素，则可以对`.data()`对象进行变量化并像这样对其进行迭代：

```
 var objData = $("#dataTable").data();
 for ( data in objData ){
      if( data == 'timer' ){
            //...do the do
      }
 } 
```

并不是说这个解决方案比这里的任何其他解决方案都好，但至少它是另一种方法......

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-12-10T09:24:01.113

或者结合一些香草JS

```
if ($("#dataTable").get(0).hasAttribute("data-timer")) {
  ...
} 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2016-03-24T01:09:09.310

如果要区分空值和缺失值，可以使用 jQuery 进行检查。

```
<div id="element" data-foo="bar" data-empty=""></div>

<script>
"foo" in $('#element').data(); // true
"empty" in $('#element').data(); // true
"other" in $('#element').data(); // false
</script> 
```

所以从最初的问题开始，你会这样做。

```
if("timer" in $("#dataTable").data()) {
  // code
} 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2012-08-28T14:14:24.273

您可以使用 jQuery 的 hasData 方法。

[http://api.jquery.com/jQuery.hasData/](http://api.jquery.com/jQuery.hasData/)

> jQuery.hasData(element) 的主要优点是它不会创建数据对象并将其与元素关联（如果当前不存在）。相比之下，jQuery.data(element) 总是向调用者返回一个数据对象，如果之前不存在数据对象，则创建一个。

这只会检查元素上是否存在任何数据对象（或事件），它无法确认它是否特别具有“计时器”对象。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2019-10-03T10:56:56.937

这里的所有答案都使用 jQuery 库。

但是香草 javascript 非常简单。

如果只想在带有`id`of的元素`#dataTable` *也*有`data-timer`属性的情况下运行脚本，那么步骤如下：

```
// Locate the element
const myElement = document.getElementById('dataTable');

// Run conditional code
if (myElement.dataset.hasOwnProperty('timer')) {

  [... CODE HERE...]

} 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2014-06-04T10:14:51.627

您可以创建一个非常简单的 jQuery 插件来查询元素：

```
$.fn.hasData = function(key) {
  return (typeof $(this).data(key) != 'undefined');
}; 
```

然后你可以简单地使用`$("#dataTable").hasData('timer')`

陷阱：

*   `false`仅当值不存在时才会返回(is `undefined`)；如果它设置为`false`/`null`它`hasData()`仍然会返回`true`。
*   `$.hasData()`它与仅检查元素上是否设置了*任何*数据的内置不同。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-01-29T18:22:27.327

我发现这对动态设置的数据元素效果更好：

```
if ($("#myelement").data('myfield')) {
  ...
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-05-27T04:12:22.723

在我看来，最简单的解决方案是选择所有具有特定数据属性的元素：

```
var data = $("#dataTable[data-timer]");
var diffs = [];

for(var i = 0; i + 1 < data.length; i++) {
    diffs[i] = data[i + 1] - data[i];
}

alert(diffs.join(', ')); 
```

### 这是它如何工作的屏幕截图。

[![jquery 选择器的控制台日志](../Images/f492594b1c94369e6b026e057d851835.png)](https://i.stack.imgur.com/s5ezJ.png)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-03-07T15:03:14.990

您可以通过 css 属性选择进行检查

```
if ($('#dataTable').is('[data-timer]')) {
   // data-timer attribute exists
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-08-05T23:13:10.137

**错误答案 - 请参阅最后的编辑**

让我以亚历克斯的回答为基础。

为了防止创建不存在的数据对象，我最好这样做：

```
$.fn.hasData = function(key) {
    var $this = $(this);
    return $.hasData($this) && typeof $this.data(key) !== 'undefined';
}; 
```

然后， where`$this`没有创建数据对象，`$.hasData`返回`false`并且不会执行`$this.data(key)`。

**编辑：**函数`$.hasData(element)`仅在使用设置数据时才有效`$.data(element, key, value)`，而不是`element.data(key, value)`。因此，我的回答是不正确的。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-11-26T12:24:48.997

我需要一个简单的布尔值来处理。因为它未定义为不存在且不为假，所以我使用`!!`来转换为布尔值：

```
var hasTimer = !!$("#dataTable").data('timer');
if( hasTimer ){ /* ....... */ } 
```

另一种解决方案是使用过滤器：

```
if( $("#dataTable").filter('[data-timer]').length!==0) { /* ....... */ } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-08-28T14:14:39.313

```
var data = $("#dataTable").data('timer');
var diffs = [];

if( data.length > 0 ) {
for(var i = 0; i + 1 < data.length; i++) {
    diffs[i] = data[i + 1] - data[i];
}

alert(diffs.join(', '));
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-08-31T14:21:27.187

那么：

```
if ($('#dataTable[data-timer]').length > 0) {
    // logic here
} 
```

# java - 随机算法的 TDD

> ID：12161133
> 
> 赞同：2
> 
> 时间：2012-08-28T14:10:03.270
> 
> 标签：java, unit-testing, testing, tdd

我的测试有问题。有一些花哨的程序的算法。该算法从 [-999,999; 范围内获取一个随机数；+999,999]，将其视为表中的 id 号，并在数据库中执行一些随机操作。这意味着我需要大量调用该方法以确保随机数分布正确。

我想使用 TDD 编写所有代码（只是为了多学一点）。

问题是我不知道如何在考虑到 TDD 原则的情况下测试算法。

根据 TDD，如果不先编写测试，则不应运行任何代码。

我想到的解决方案之一是在主类中有一个名为 debug(text) 的虚拟方法。此方法在生产代码中不会执行任何操作。但是，然后我将创建一个重载此方法的子类，这一次它将存储一些有趣的信息。稍后可以通过测试使用此信息来确定该功能是否正常工作。数据库连接将被模拟并且什么也不做。

另一种解决方案是创建一个模拟数据库连接，该连接将存储有趣的信息，稍后在测试中使用。但是，创建这样一个连接将是大量的工作，我认为不值得花时间在上面。

稍后将进行集成测试以检查数据库是否正确更改。但是集成测试不是 TDD 的一部分。

我是否遇到了 TDD 失败、无用或太难使用的地方？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T14:13:31.753

是*你的*随机数函数吗？

**它是：**随机数生成器应该在使用它的任何东西之外进行测试。

**它不是：**你根本不应该测试它，除非你真的需要验证它的随机性。IMO 的投资回报率不是很高，但这完全取决于您的实际需求。

DB 功能应该假设 RNG 实际上是 R，并且应该与 RNG*分开*测试——在测试期间您可能不想使用 RNG。至少，您可能希望播种 RNG 以使测试可重复——这可能会使正确性更难验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:22:54.657

以下是您的代码库的一些假设：

1) 对存储过程的调用在数据访问代码中。

2) 数据访问代码实现一个接口。

3）您想用TDD编写的业务逻辑可以将数据访问代码注入到它的构造函数中。

如果是这种情况，您可以使用模拟框架来模拟您的数据访问代码。不调用实际的存储过程。

可以使用 TDD 开发新代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T14:21:14.190

你应该重新考虑你的设计。单元测试（通过 TDD 或稍后添加测试）应该完全隔离地测试每个类。

在您的情况下，您有一些不同的功能：

*   随机数生成器
*   在数据库中查找
*   一些针对数据库运行的代码

[通过使用诸如依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)和[模拟](http://en.wikipedia.org/wiki/Mock_object)之类的设计模式，可以对这些中的每一个进行完全隔离的测试。

单元测试不应依赖于随机行为。这样，它们将变得脆弱且难以维护。

因此，在您的情况下，您将通过大量运行随机数生成器并检查结果是否在预期范围内来测试随机数生成器。无论一天中的什么时间，该测试每次运行时都应该成功。

对于数据库部分，我将创建一个界面来隐藏您的数据库代码（查看[Repository 模式](http://martinfowler.com/eaaCatalog/repository.html)）。在您的单元测试中，您可以模拟此接口并检查是否使用正确的参数调用了正确的函数。在您的集成测试中，您可以使用真正的 Repository 实现。

然后第二个测试检查您的数据库查找是否正常工作。检查传递的“随机数”是否正确用于在您的数据库模拟上调用正确的方法。

第三个测试将检查是否针对您的数据库模拟执行了正确的代码。

几个月前，我为 .NET 杂志写了一篇关于单元测试和一些最佳实践的文章。也许它可以提供帮助：[单元测试，地狱还是天堂？](http://wouterdekort.blogspot.nl/2012/03/unit-testing-hell-or-heaven.html)

# ruby-on-rails - 提交表单后如何设置单选按钮的值？

> ID：12161135
> 
> 赞同：3
> 
> 时间：2012-08-28T14:10:02.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用 Rails 3.2。我有一个搜索表单，其下方有单选按钮。它根据选择的单选按钮进行搜索。目前我认为：

```
 = radio_button_tag(:ad_type, "free")
  = label_tag(:ad_type_free, "free")
  = radio_button_tag(:ad_type, "paid")
  = label_tag(:ad_type_paid, "paid")
  = radio_button_tag(:ad_type, "featured")
  = label_tag(:ad_type_featured, "featured") 
```

所以我的问题是，如何设置要选择的默认单选按钮？我尝试过使用`radio_button_tag(:ad_type, "free", :checked => true)`，但在提交表单后，它总是选择那个单选按钮。我想要的是根据先前的请求选择值。我应该从 url 参数中获取值吗？如果是这样，我如何设置初始默认值（当没有以前的搜索时）？非常感谢。

**更新**

我创建了一个辅助方法 ad_type_selected？

```
 def ad_type_selected?(ad_type)
    selected_ad_type = params[:ad_type] || "free"
    (selected_ad_type == ad_type) ? true : false
  end 
```

我认为这是：

```
 = radio_button_tag(:ad_type, "free", :checked => ad_type_selected?("free")) 
```

但是，单选按钮仍然没有被选中。检查日志，我看到对助手的第一次调用返回 true，其他返回 false，这正是我想要的。但问题是它仍然没有选择单选按钮。如果我检查输入标签，我只能看到已检查的属性设置为“已检查”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-22T00:03:43.843

我正在挖掘坟墓，但我只是遇到了这个。

```
<label class='checkbox-inline'>
  <%= radio_button_tag :option, :user, true %>
  Username
</label>
<label class='checkbox-inline'>
  <%= radio_button_tag :option, :email, params[:option] == 'email' ? true : false %>
  Email
</label>
<label class='checkbox-inline'>
  <%= radio_button_tag :option, :name, params[:option] == 'name' ? true : false %>
  Full Name
</label> 
```

所以......这将默认设置第一个按钮（并且总是），但如果选择了其他参数，它们将变为真。单选按钮将始终`true`为您选择最后一个按钮，因此只要您将默认选项放在列表中的第一位，设置为 true，其余设置为：

```
params[:name_of_your_buttons] == 'button_value' ? true : false 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T17:04:57.733

显然，为所有单选按钮添加选中属性会导致始终选择最后一个单选按钮。因此，如果参数与单选按钮匹配，我所做的就是添加一个选中的属性。

因此，对于我的示例，我只是使用了一个助手来生成适当的单选按钮，如下所示：

```
 def ad_type_radio_button(ad_type)
    selected_ad_type = params[:ad_type] || "free"

    if selected_ad_type == ad_type
      radio_button_tag(:ad_type, ad_type, :checked => true)
    else
      radio_button_tag(:ad_type, ad_type)
    end
  end 
```

在我看来是这样的：

```
= ad_type_radio_button("free") 
```

我知道它远非优雅，但它现在表现正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T15:14:55.573

根据[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-radio_button_tag)，`checked`不是选项哈希参数，它只是一个布尔值。

这没有用（至少在rails 4中）：

```
= radio_button_tag(:ad_type, "free", :checked => ad_type_selected?("free")) 
```

它应该是：

```
= radio_button_tag(:ad_type, "free", ad_type_selected?("free")) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T14:22:43.703

如果 params[:ad_type] 为 nil，此代码段将设置为 false。否则，如果 params[:ad_type] 设置为 true，它将设置为 true。

```
radio_button_tag(:ad_type, "free", :checked => (params[:ad_type] == nil ? false : params[:ad_type])) 
```

以防万一您还没有看到上面使用的 if / then / else 的简写，它是：

```
test-expression ? if_true_expression : if_false_expression 
```

# android - Android 从 URL 下载图像并在 Imageview 中显示

> ID：12161137
> 
> 赞同：3
> 
> 时间：2012-08-28T14:10:06.293
> 
> 标签：android, android-asynctask, imageview

我想在我的 Imageview 中显示我下载的图像。我收到错误“类型不匹配：无法从 ImageView 转换为位图”。它说我不能在 imageview 中显示位图图像。谁能告诉我实现它的方法？

```
public class SingleImageViewActivity  extends SherlockActivity {

        // XML node keys
    static final String KEY_TITLE = "title";
    static final String KEY_ARTIST = "artist";  
    static final String KEY_BIG_URL = "big_url";
    private ProgressDialog pDialog;
    String title;
    String artist;
    String big_image_url;
    ImageView view;
    URL url;
    Bitmap bmImg = null;
    ShareActionProvider mShareActionProvider;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.single_view_item);
            getSupportActionBar().setDisplayHomeAsUpEnabled(true);

            new loadSingleView().execute();

        }

    public class loadSingleView extends AsyncTask<String, String, String> {

            @Override
            protected void onPreExecute() {
                super.onPreExecute();
                pDialog = new ProgressDialog(SingleImageViewActivity.this);
                pDialog.setTitle("Connect to Server");
                pDialog.setMessage("This process can take a few seconds to a few minutes, depending on your Internet Connection Speed.");
                pDialog.setIndeterminate(false);
                pDialog.setCancelable(false);
                pDialog.show();
            }
            @Override
            protected String doInBackground(String... args) {
                // updating UI from Background Thread
                try {  
                    Intent in = getIntent();

                    big_image_url = in.getStringExtra(KEY_BIG_URL);
                    title = in.getStringExtra(KEY_TITLE);
                    artist = in.getStringExtra(KEY_ARTIST);

                    url = new URL(big_image_url);
                    HttpURLConnection conn = (HttpURLConnection) url.openConnection();   
                    conn.setDoInput(true);   
                    conn.connect();     
                    InputStream is = conn.getInputStream();
                    bmImg = BitmapFactory.decodeStream(is); 
                }
                catch (IOException e)
                {       
                    e.printStackTrace();  
                }

                return null;   
            }
                @Override       
        protected void onPostExecute(String args) {
            // dismiss the dialog after getting all products
             TextView lblName = (TextView) findViewById(R.id.name_title);
                TextView lblCost = (TextView) findViewById(R.id.name_artist);

                lblName.setText(title);
                lblCost.setText(artist);

                ActionBar ab = getSupportActionBar();
                ab.setTitle(title);
                ab.setSubtitle(artist);

                view = (ImageView) findViewById(R.id.single_image);
                view.setImageBitmap(bmImg);

            pDialog.dismiss();

        }

                } 
```

日志猫：

```
08-28 22:19:44.225: E/AndroidRuntime(20825): FATAL EXCEPTION: AsyncTask #3
08-28 22:19:44.225: E/AndroidRuntime(20825): java.lang.RuntimeException: An error occured while executing doInBackground()
08-28 22:19:44.225: E/AndroidRuntime(20825):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
08-28 22:19:44.225: E/AndroidRuntime(20825):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
08-28 22:19:44.225: E/AndroidRuntime(20825):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
08-28 22:19:44.225: E/AndroidRuntime(20825):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
08-28 22:19:44.225: E/AndroidRuntime(20825):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-28 22:19:44.225: E/AndroidRuntime(20825):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
08-28 22:19:44.225: E/AndroidRuntime(20825):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
08-28 22:19:44.225: E/AndroidRuntime(20825):    at java.lang.Thread.run(Thread.java:856)
08-28 22:19:44.225: E/AndroidRuntime(20825): Caused by: java.lang.NullPointerException
08-28 22:19:44.225: E/AndroidRuntime(20825):    at com.example.androidhive.SingleImageViewActivity$loadSingleView.doInBackground(SingleImageViewActivity.java:91)
08-28 22:19:44.225: E/AndroidRuntime(20825):    at com.example.androidhive.SingleImageViewActivity$loadSingleView.doInBackground(SingleImageViewActivity.java:1)
08-28 22:19:44.225: E/AndroidRuntime(20825):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
08-28 22:19:44.225: E/AndroidRuntime(20825):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
08-28 22:19:44.225: E/AndroidRuntime(20825):    ... 4 more
08-28 22:19:49.631: E/WindowManager(20825): Activity com.example.androidhive.SingleImageViewActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@416c0328 that was originally added here
08-28 22:19:49.631: E/WindowManager(20825): android.view.WindowLeaked: Activity com.example.androidhive.SingleImageViewActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@416c0328 that was originally added here
08-28 22:19:49.631: E/WindowManager(20825):     at android.view.ViewRootImpl.<init>(ViewRootImpl.java:428)
08-28 22:19:49.631: E/WindowManager(20825):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
08-28 22:19:49.631: E/WindowManager(20825):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
08-28 22:19:49.631: E/WindowManager(20825):     at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
08-28 22:19:49.631: E/WindowManager(20825):     at android.view.Window$LocalWindowManager.addView(Window.java:537)
08-28 22:19:49.631: E/WindowManager(20825):     at android.app.Dialog.show(Dialog.java:278)
08-28 22:19:49.631: E/WindowManager(20825):     at com.example.androidhive.SingleImageViewActivity$loadSingleView.onPreExecute(SingleImageViewActivity.java:72)
08-28 22:19:49.631: E/WindowManager(20825):     at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:561)
08-28 22:19:49.631: E/WindowManager(20825):     at android.os.AsyncTask.execute(AsyncTask.java:511)
08-28 22:19:49.631: E/WindowManager(20825):     at com.example.androidhive.SingleImageViewActivity.onCreate(SingleImageViewActivity.java:57)
08-28 22:19:49.631: E/WindowManager(20825):     at android.app.Activity.performCreate(Activity.java:4465)
08-28 22:19:49.631: E/WindowManager(20825):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
08-28 22:19:49.631: E/WindowManager(20825):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
08-28 22:19:49.631: E/WindowManager(20825):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
08-28 22:19:49.631: E/WindowManager(20825):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
08-28 22:19:49.631: E/WindowManager(20825):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
08-28 22:19:49.631: E/WindowManager(20825):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-28 22:19:49.631: E/WindowManager(20825):     at android.os.Looper.loop(Looper.java:137)
08-28 22:19:49.631: E/WindowManager(20825):     at android.app.ActivityThread.main(ActivityThread.java:4512)
08-28 22:19:49.631: E/WindowManager(20825):     at java.lang.reflect.Method.invokeNative(Native Method)
08-28 22:19:49.631: E/WindowManager(20825):     at java.lang.reflect.Method.invoke(Method.java:511)
08-28 22:19:49.631: E/WindowManager(20825):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:982)
08-28 22:19:49.631: E/WindowManager(20825):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:749)
08-28 22:19:49.631: E/WindowManager(20825):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:26:31.900

我使用[Prime](https://github.com/DHuckaby/Prime)来加载所有图像。您可以使用`RemoteImageView`该类使这变得非常容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T14:17:14.433

您将 ImageView 声明为

```
ImageView view; 
```

您必须在 ImageView 上设置图像。应该是这样的

```
view = (ImageView) findViewById(R.id.single_image);
view.setImageBitmap(bmImg); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-07T04:46:58.350

你可以`asynk tast`用来做显示：

```
 public class ImageDownloaderTask extends AsyncTask<String, Void, Bitmap> {

private final WeakReference<ImageView> imageViewReference;
private final MemoryCache memoryCache;
private final BrandItem brandCatogiriesItem;
private Context context;
private String url;

public ImageDownloaderTask(ImageView imageView, String url, Context context) {
    imageViewReference = new WeakReference<ImageView>(imageView);
    memoryCache = new MemoryCache();
    brandCatogiriesItem = new BrandItem();
    this.url = url;
    this.context = context;
}

@Override
protected Bitmap doInBackground(String... params) {

    return downloadBitmap(params[0]);
}

@Override
protected void onPostExecute(Bitmap bitmap) {
    if (isCancelled()) {
        bitmap = null;
    }

    if (imageViewReference != null) {
        ImageView imageView = imageViewReference.get();
        if (imageView != null) {
            if (bitmap != null) {
                memoryCache.put("1", bitmap);
                brandCatogiriesItem.setUrl(url);
                brandCatogiriesItem.setThumb(bitmap);
                // BrandCatogiriesItem.saveLocalBrandOrCatogiries(context, brandCatogiriesItem);
                imageView.setImageBitmap(bitmap);
            } else {
                Drawable placeholder = imageView.getContext().getResources().getDrawable(R.drawable.placeholder);
                imageView.setImageDrawable(placeholder);
            }
        }

    }
}

private Bitmap downloadBitmap(String url) {
    HttpURLConnection urlConnection = null;
    try {
        URL uri = new URL(url);
        urlConnection = (HttpURLConnection) uri.openConnection();

        int statusCode = urlConnection.getResponseCode();
        if (statusCode != HttpStatus.SC_OK) {
            return null;
        }

        InputStream inputStream = urlConnection.getInputStream();
        if (inputStream != null) {

            Bitmap bitmap = BitmapFactory.decodeStream(inputStream);
            return bitmap;
        }
    } catch (Exception e) {
        Log.d("URLCONNECTIONERROR", e.toString());
        if (urlConnection != null) {
            urlConnection.disconnect();
        }
        Log.w("ImageDownloader", "Error downloading image from " + url);
    } finally {
        if (urlConnection != null) {
            urlConnection.disconnect();

        }
    }
    return null;
} 
```

并称之为：

新 ImageDownloaderTask(thumbImage, item.thumbnail, context).execute(item.thumbnail);

# javascript - Bootstrap 2.1 与 jQuery UI 兼容吗？

> ID：12161139
> 
> 赞同：5
> 
> 时间：2012-08-28T14:10:18.800
> 
> 标签：javascript, jquery, css, jquery-ui, twitter-bootstrap

[从这个 github 讨论](https://github.com/twitter/bootstrap/issues/156)中可以看出，旧的 Bootstrap 无法与 jQuery UI 一起工作，这是一个已知问题。

两者有一些混搭，包括John Seigers 的 jQuery Bootstrap 和[Addy Osmani 的](http://jslegers.github.com/jquery-bootstrap/)[jQuery UI Bootstrap](http://addyosmani.github.com/jquery-ui-bootstrap/)。

新版本的 Bootstrap 是否仍然需要这些混搭，或者您现在可以直接使用 Bootstrap 和 jQuery UI（正如在 github 讨论中模糊地提到的那样）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T10:13:30.157

我正在实施一个使用 Twitter Bootstrap 2.1 和 jQuery UI 1.8.23 的解决方案，到目前为止我还没有遇到任何问题。
显然 Twitter Bootstrap v2 不再与 jquery ui 冲突。[您可以在此处](https://github.com/twitter/bootstrap/issues/171)
找到更多信息。

马克·奥托[说](https://github.com/twitter/bootstrap/issues/4566)

> 我们不能保证与 jQuery UI 等其他框架的兼容性...

所以我猜你可能对一些 jQuery UI 组件有问题，请他们帮助你并找到解决方案。

目前我对 jqGrid 有一些问题。

# python - 在 'Web scraping with beautiful soup' 中生成各种事件

> ID：12161140
> 
> 赞同：0
> 
> 时间：2012-08-28T14:10:22.503
> 
> 标签：python, web-scraping, beautifulsoup

有什么方法可以生成各种事件，例如：

*   填充输入字段
*   提交表格
*   点击链接
*   处理重定向等

通过 python 美丽的汤库。如果不是上述最好的方法（基本功能）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:18:21.937

BeautifulSoup 是一个解析和分析 HTML 的工具。它无法与 Web 服务器通信，因此您需要另一个库来执行此操作，例如`urllib2`（内置，但低级）或`requests`（高级，处理 cookie、重定向、https 等开箱即用）。或者，您可以查看`mechanize`或`windmill`，或者如果您还需要执行 JavaScript 代码，`phantomjs`。

# jquery - 停止在 jQueryUI 大小效果上调整边框大小

> ID：12161141
> 
> 赞同：0
> 
> 时间：2012-08-28T14:10:23.287
> 
> 标签：jquery, jquery-ui, resize, border, effects

我正在执行一个简单的 jQueryUI“大小”效果。

```
myElement.effect( "size", { to: { height: myHeight }}, 500); 
```

问题是元素的边框也被调整了大小。是否有任何属性停止调整边框大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T18:18:29.880

查看有关尺寸效果的文档：http: [//docs.jquery.com/UI/Effects/Size](http://docs.jquery.com/UI/Effects/Size)

有四个可能的参数/选项（从、到、原点、比例）。您正在寻找的论点是规模论点。默认情况下，它设置为“两者”。您想将其设置为“内容”..

```
myElement.effect( "size", { to: { height: myHeight }, scale: "content"}, 500);​​​​​​​​ 
```

这是一个 jsfiddle：http: [//jsfiddle.net/rjHWR/2/](http://jsfiddle.net/rjHWR/2/)

# php - 检查 OpenCart 中是否启用了 vqMod

> ID：12161143
> 
> 赞同：2
> 
> 时间：2012-08-28T14:10:30.213
> 
> 标签：php, xml, opencart

我有一个在 OpenCart 上开发的 vqmod 扩展（我们称之为 vqmod1.xml），我有我自己开发的 vqmod 扩展（vqmod2.xml）。

我想知道如果 vqmod1.xml 被禁用，有没有办法阻止 vqmod2.xml 加载？

这可能吗？

谢谢彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:10:42.663

没有办法做到这一点。vQmod 彼此不知道，因为它们不会被加载到系统中。您可以做的是检查 vqmod1.xml 所做的更改。如果它不存在，则不要运行 vqmod2.xml 代码，但这很棘手。如果您解释了这两个模块的作用以及为什么第二个模块依赖于第一个模块，这将更有帮助

# ios - 在 iOS 中获取 Facebook 好友信息的最简单方法

> ID：12161145
> 
> 赞同：-2
> 
> 时间：2012-08-28T14:10:34.053
> 
> 标签：ios, facebook, api

以 JSON 格式获取 Facebook 好友信息（姓名、生日等）的最简单方法是什么。如果可能的话，我不想使用 FB iOS SDK 使用 UIWebView。

我认为有 2-3 个 http 请求是可能的。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:15:52.507

试试下面的功能来获取你的脸书信息（登录用户信息）

```
- (void)fetchUserDetails {
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"SELECT uid, name, pic FROM user WHERE uid=me()", @"query",nil];

[fb requestWithMethodName:@"fql.query"
                                 andParams:params
                             andHttpMethod:@"POST"
                               andDelegate:self];} 
```

希望这可以帮助

# java - 当我们在同一个类中多次导入包时，Java 会做什么？

> ID：12161146
> 
> 赞同：5
> 
> 时间：2012-08-28T14:10:35.670
> 
> 标签：java

试试这段代码。它编译。

```
import java.io.*;
import java.io.*;
import java.io.*;

import java.util.*;
import java.util.*;
import java.util.*;

import javax.swing.*;
import javax.swing.*;
import javax.swing.*;

public class ImportMultipleTimes
{
   public static void main(String[] args)
   {
      System.out.println("3 packages imported multiples times in the same class.");
   }
} 
```

编译器是否只是忽略了额外的 import 语句？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T14:12:49.683

是的，编译器会认为它是多余的，由[JLS 7.5.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.5.2-300)指定：

> 同一编译单元中的两个或多个按需类型导入声明可以命名相同的类型或包。除了其中一个声明之外，所有声明都被认为是多余的；效果就好像该类型只导入了一次。

笔记：

*   "type-import-on-demand" 是一个包导入：`import somepackage.*;`
*   这同样适用[于单一类型导入](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.5.1-300)：*“如果两个单一类型导入声明 [...] 尝试导入 [...] 相同类型，则 [...] 重复声明将被忽略。”*

# android - 在 Android 4.0/4.0.3 上运行 Cordova/Phonegap 1.7 应用程序时出错

> ID：12161148
> 
> 赞同：0
> 
> 时间：2012-08-28T14:10:44.353
> 
> 标签：android, cordova

当页面转换具有查询字符串参数时，Cordova 1.7 (Phonegap) 移动应用程序在 Android 4.0 和 4.0.3 上运行是否存在问题？该应用程序在 Android 2.3.3 和 4.1 中运行良好，但在 4.0 或 4.0.3 中无法正常运行。我在过渡时收到可怕的“未知铬错误：-6”错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T00:55:31.603

PhoneGap 没有这个问题。谷歌有问题。请点星：

[http://code.google.com/p/android/issues/detail?id=17535](http://code.google.com/p/android/issues/detail?id=17535)

与此同时，您应该尝试使用 PhoneGap 2.0.0，因为 Joe 已针对此问题进行了解决。如果这不起作用或者您无法升级，请使用 localStorage 在页面之间传递参数。

# android - android videoview 播放、暂停和停止视频

> ID：12161153
> 
> 赞同：2
> 
> 时间：2012-08-28T14:10:51.630
> 
> 标签：android

您好，我想为我的视频视图播放、暂停和停止，但似乎不能这样做。看看下面的代码：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_LEFT_ICON);
    setContentView(R.layout.iworkout);
    getWindow().setFeatureDrawableResource(Window.FEATURE_LEFT_ICON, R.drawable.exercises32);

    vv = (VideoView) findViewById (R.id.vv_Exercise);
    play = (Button) findViewById (R.id.btWorkOutPlay);
    pause = (Button) findViewById (R.id.btWorkOutPause);
    stop = (Button) findViewById (R.id.btWorkOutStop);

}

public void onClick(View v) {
    // TODO Auto-generated method stub

    switch(v.getId()){
    case R.id.btWorkOutPlay:
        Uri uri = Uri.parse("android.resource://"+getPackageName()+"/"+R.raw.exercise1);
        vv.start();
        vv.setVideoURI(uri);
        break;
    case R.id.btWorkOutPause:
        vv.pause();
        break;
    case R.id.btWorkOutStop:
        vv.stopPlayback();
        break;
    }

} // end of onClick method 
```

如果有人知道怎么做，我会很感激你的帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:13:38.250

`MediaController`与 一起使用`VideoView`：

```
....
MediaController mc= new MediaController();
Videoview.setMediaController(mc);
.... 
```

# r - 使用 R 处理日期时格式化直方图 x 轴

> ID：12161154
> 
> 赞同：10
> 
> 时间：2012-08-28T14:10:52.430
> 
> 标签：r, date, histogram

我正在使用 R 创建流行曲线（每天疾病病例数的直方图），并且在格式化 x 轴方面有点挣扎。

我知道 ggplot 提供了非常漂亮的图表和易于操作的轴（[Understanding dates and plotting a histogram with ggplot2 in R](https://stackoverflow.com/questions/10770698/understanding-dates-and-plotting-a-histogram-with-ggplot2-in-r)），但在这种情况下，我更喜欢使用该`hist()`命令，因为我同时描述了两种不同的模式，如下面（我认为你不能在 ggplot 中做类似的事情）：

![在此处输入图像描述](../Images/481c4007b06002225ec5f0b167eaa4cf.png)

这里的问题是x轴不是从第一种情况开始的，有太多的刻度线，我希望能够有一个系统的日期标记，例如。每 7 天或每月 1 日。

数据以每个疑似病例一行的形式存储在数据库 (dat.geo) 中，其中包含有关发病日期和郊区的信息（直方图中是黑色还是白色），如下所示：

```
> head(dat.geo)
  number age sex       suburb Date_of_Onset
1      1  12   F            x    2011-10-11
2      2  28   M            x    2011-10-10
3      3  15   F            x    2011-10-12
4      4  12   M            y    2011-10-25
5      5  10   F            x    2011-10-15
6      6   9   M            y    2011-10-20 
```

这是我的代码：

```
pdf(file='1.epi.curve.pdf')
hist(dat.geo$Date_of_Onset[(dat.geo$suburb=="x")], "days", 
 format = "%d %b %y", freq=T, col=rgb(0,0,0,1), axes=T, main="", add=T)
hist(dat.geo$Date_of_Onset[(dat.geo$suburb=="y")], "days", 
 format = "%d %b %y", freq=T, main="", col=rgb(1,1,1,.6), add=T, axes=F)
dev.off() 
```

我曾尝试抑制轴并稍后使用此代码添加操纵轴

```
axis(1, labels=T)
axis(2) 
```

但这就是我得到的（我不知道如何操纵它）：

![在此处输入图像描述](../Images/a794224460f9cf9a09dea8b135eca7e1.png)

非常感谢您的帮助！

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-28T14:36:38.193

由于您有效地要求我们提供`ggplot`解决方案，所以这里是：

```
dates <- seq(as.Date("2011-10-01"), length.out=60, by="+1 day")

set.seed(1)
dat <- data.frame(
  suburb <- rep(LETTERS[24:26], times=c(100, 200, 300)),
  Date_of_Onset <- c(
    sample(dates-30, 100, replace=TRUE),
    sample(dates,    200, replace=TRUE),
    sample(dates+30, 300, replace=TRUE)
  )
)

library(scales)
library(ggplot2)
ggplot(dat, aes(x=Date_of_Onset, fill=suburb)) + 
  stat_bin(binwidth=1, position="identity") + 
  scale_x_date(breaks=date_breaks(width="1 month")) 
```

请注意使用`position="identity"`来强制每个条形图起源于轴上，否则默认情况下您会得到一个堆叠图表。

![在此处输入图像描述](../Images/f60e0518bd0538548fa2e84dca120dfc.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-04T15:54:50.973

有 2 种可用的解决方案；1个使用hist()，另一个使用ggplot()：

```
library(date)
hist(dat.geo$Date_of_Onset[(dat.geo$suburb=="x")], "weeks", 
 format = "%d %b %y", freq=T, col=rgb(0,0,0,1), axes=F, main="")
hist(dat.geo$Date_of_Onset[(dat.geo$suburb=="y")], "weeks", 
 format = "%d %b %y", freq=T, main="", col=rgb(1,1,1,.6), add=T, axes=F)
axis.Date(1, at=seq(as.Date("2011-10-10"), as.Date("2012-03-19"), by="2 weeks"),
 format="%d %b %y")
axis.Date(1, at=seq(as.Date("2011-10-10"), as.Date("2012-03-19"), by="weeks"), 
 labels=F, tcl= -0.5) 
```

该流行曲线如下：

![在此处输入图像描述](../Images/ec34a8e1da003fa7a6f538ed52cc8280.png)

上面 Andrie 建议的使用 ggplot 的解决方案如下：

```
library(scales)
library(ggplot2)
ggplot(dat.geo,aes(x=Date_of_Onset, group=suburb, fill=suburb))+
 stat_bin(colour="black", binwidth=1, alpha=0.5,
 position="identity") + theme_bw()+
 xlab("Date of onset of symptoms")+
 ylab("Number of cases")+
 scale_x_date(breaks=date_breaks("1 month"), labels=date_format("%b %y")) 
```

这给出了如下流行曲线：

![在此处输入图像描述](../Images/f3cc26cfb1e108f0dd2d803fc45f6b0e.png)

# android - 无法启动服务 Intent { act=android.intent.action.VIEW... }

> ID：12161155
> 
> 赞同：0
> 
> 时间：2012-08-28T14:10:57.857
> 
> 标签：android, android-intent, notifications, browser, android-pendingintent

好吧，我这里有个问题……我愿意通过通知启动网络浏览器。
这是我所拥有的：

```
notifIntent = new Intent(Intent.ACTION_VIEW);
                Uri u = Uri.parse("http://www.google.com");
                notifIntent.setData(u);
                pendingIntent = PendingIntent.getService(context, 0, notifIntent, PendingIntent.FLAG_UPDATE_CURRENT);
                notification = buildNotification(context, pendingIntent, "MY TITEL",
                        "Heres some text", false, false);
                notificationManager.notify(NOTIF_ID, notification); 
```

所以，对我来说似乎没问题，但仍然......我有一个荒谬的“无法开始服务等等等等。”

我真的不知道如何解决这个问题，因为这个服务是谷歌服务，不是我创建的！

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:14:42.423

利用

```
PendingIntent.getActivity 
```

代替

```
PendingIntent.getService 
```

# c# - 使用asp.net c#在客户端打开一个wav文件

> ID：12161156
> 
> 赞同：0
> 
> 时间：2012-08-28T14:11:03.027
> 
> 标签：c#, asp.net, audio, client-server, wav

我想直接在我的客户端默认播放器中打开 wav 文件 asp.net c# 。我使用了响应方法，但它让我弹出是否打开或保存。我不希望在他单击链接时直接播放声音文件。

我还使用了 system.diagoniscs("") 它只在服务器中工作

需要一些东西来试试。

谢谢

# java - 如何找出在java中调用方法的类？

> ID：12161158
> 
> 赞同：7
> 
> 时间：2012-08-28T14:11:09.330
> 
> 标签：java, class

如何在不将任何变量传递给该方法的情况下找出哪个类调用了我的方法？假设我们有这样的事情：

```
Class A{}
Class B{}
Class C{
public void method1{}
System.out.print("Class A or B called me");
} 
```

假设 A 类的实例调用 C 类的实例，B 类也是如此。当 A 类调用 C 类方法 1 方法时，我希望它打印类似“A 类调用我”之类的内容，而当 B 类调用它时打印“B班叫我”。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-28T14:18:10.307

没有真正简单的方法可以做到这一点，因为通常方法不需要也不应该需要关心从哪里调用它。如果你编写你的方法，使它的行为取决于它从哪里被调用，那么你的程序很快就会变成一个难以理解的混乱。

但是，这里有一个例子：

```
public class Prut {
    public static void main(String[] args) {
        example();
    }

    public static void example() {
        StackTraceElement[] stackTrace = Thread.currentThread().getStackTrace();
        StackTraceElement element = stackTrace[2];
        System.out.println("I was called by a method named: " + element.getMethodName());
        System.out.println("That method is in class: " + element.getClassName());
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-28T14:15:18.427

您可以使用`Thread.currentThread().getStackTrace()`

它返回一个数组，`[StackTraceElements][1]`其中表示程序的当前堆栈跟踪。

# ms-access - Excel VBA 连接到 Access 2010

> ID：12161161
> 
> 赞同：1
> 
> 时间：2012-08-28T14:11:15.347
> 
> 标签：ms-access, excel, ms-access-2007, vba

我有一个类正在处理我与 Access 2003 数据库的连接。我想仅为 Access 07/10 .accdb 文件设置相同的内容。任何帮助表示赞赏！谢谢！

这是我的引用列表和类对象的副本

参考：

*   Microsoft Access 14.0 对象库
*   Microsoft DAO 3.6 对象库

连接类：

```
Option Explicit

Private Const DbFile = "\\server\folders\Report.mdb"
Dim OpenConn As DAO.Database
Dim ObjAccess As Object

Private Sub Class_Initialize()
    On Error Resume Next
    Set OpenConn = DAO.OpenDatabase(DbFile)
    If Err.Number = 3024 Then MsgBox "Check connection string in the VBA StaticClass object", vbOKOnly

    Set ObjAccess = CreateObject("Access.Application")
    ObjAccess.Visible = False
    ObjAccess.OpenCurrentDatabase (DbFile)
End Sub

Public Function runSQL(ByVal sql As String) As Recordset
    Set runSQL = OpenConn.OpenRecordset(sql)
End Function

Public Function runVolumeReport(ByVal inMacro As String)
    ObjAccess.DoCmd.RunMacro inMacro
End Function

Public Function closeResources()
    Set ObjAccess = Nothing
    OpenConn.Close
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:39:08.487

中有一个问题`Class_Initialize`。

```
On Error Resume Next
Set OpenConn = DAO.OpenDatabase(DbFile)
If Err.Number = 3024 Then MsgBox "Check connection string in the VBA StaticClass object", vbOKOnly 
```

因为`On Error Resume Next`，除了 3024（“找不到文件”）之外的任何错误都将静默通过，并且 OpenConn 不会按照您的意愿设置。稍后当您尝试使用时`OpenConn`，您将触发另一个错误。而且，在评论中，您报告说您确实收到了此行的另一个错误：

```
Set runSQL = OpenConn.OpenRecordset(sql) 
```

不幸的是，由于`On Error Resume Next`，我们不知道为什么没有设置`OpenDatabase`失败`OpenConn`。由于`ObjAccess`似乎作为 Access 应用程序对象工作，您可以尝试设置`OpenConn`为`ObjAccess.CurrentDb`.

```
Private Sub Class_Initialize()
    Set ObjAccess = CreateObject("Access.Application")
    ObjAccess.Visible = False
    ObjAccess.OpenCurrentDatabase DbFile
    Set OpenConn = ObjAccess.CurrentDb
End Sub 
```

`OpenConn`OTOH，如果您像这样更改功能，则可以完全省去`runSQL`...

```
Public Function runSQL(ByVal sql As String) As Recordset
    'Set runSQL = OpenConn.OpenRecordset(sql) '
    Set runSQL = ObjAccess.CurrentDb.OpenRecordset(sql)
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:15:18.713

打开 accdb (SQL Server) 表的一种方法是：

```
Dim cmd As New ADODB.Command
Dim rs As ADODB.Recordset
Dim strSQL As String

strSQL = "select SomeStuff from SomeTable"

cmd.ActiveConnection = CurrentProject.Connection
cmd.CommandText = strSQL ' you can put in the SQL directly, 
                         ' but I find the string easier to manipulate away from the .CommandText
Set rs = cmd.Execute 
```

我的参考资料（Access 2010）：
![参考文献列表](../Images/88ab60637840e677cab8865c680cf2d7.png)
我认为您需要添加的关键是 Microsoft ActiveX Data Objects XX Library

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-11T14:54:52.583

```
Imports System.Data.OleDb

Public Class Form1
    Dim strSQL As String
    Dim ds As New DataSet
    Dim strConnection As String
    Dim DBconnection As New OleDbConnection
    Dim oledbAdapter As New OleDbDataAdapter
    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
strConnection = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=P:\Informatica\April - Juni\Acces\db-games.accdb"
        DBconnection = New OleDbConnection(strConnection)
        strSQL = "SELECT * from tbl_games"

        Try
            DBconnection.Open()
            oledbAdapter = New OleDbDataAdapter(strSQL, DBconnection)
            oledbAdapter.Fill(ds)
            DataGridView1.DataSource = ds.Tables(0)
        Catch ex As Exception
            MsgBox(ex.ToString)
        End Try
        DBconnection.Close()
    End Sub
End Class 
```

Dim con As New OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=P:\Informatica\Acces\db_Games.accdb;Persist Security Info=False") Dim cmd As New OleDbCommand

```
 con.Open()

    cmd.Connection = con

    cmd.CommandText = "INSERT INTO tbl_gerne(Omschrijving) VALUES('adventure')"
    cmd.ExecuteNonQuery()

    con.Close() 
```

# php - 在交互式会话中详细运行 PHP

> ID：12161162
> 
> 赞同：2
> 
> 时间：2012-08-28T14:11:19.763
> 
> 标签：php

我通过`php -a`在命令行键入以交互方式使用 PHP。我已修改 /etc/php5/cli/php.ini 以加载我使用 SWIG 构建的扩展模块。

当我终止交互式会话时，出现分段错误：

```
root@yourbox:~$ php -a
Interactive shell

php > ^DSegmentation fault
root@yourbox:~$ 
```

我想以详细模式运行 php，以便我可以看到导致段错误的调用。有没有办法在交互模式下详细运行 php？例如，使用 Python，可以运行`python -v`以获取详细的诊断信息。有没有与 PHP 等价的东西？

**[[更新]]**

这是使用 valgrind 时的堆栈跟踪：

```
root@yourbox:~$ USE_ZEND_ALLOC=0 valgrind php -a
==16414== Memcheck, a memory error detector
==16414== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==16414== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==16414== Command: php -a
==16414== 

valgrind:  Fatal error at startup: a function redirection
valgrind:  which is mandatory for this platform-tool combination
valgrind:  cannot be set up.  Details of the redirection are:
valgrind:  
valgrind:  A must-be-redirected function
valgrind:  whose name matches the pattern:      strlen
valgrind:  in an object with soname matching:   ld-linux-x86-64.so.2
valgrind:  was not found whilst processing
valgrind:  symbols from the object with soname: ld-linux-x86-64.so.2
valgrind:  
valgrind:  Possible fixes: (1, short term): install glibc's debuginfo
valgrind:  package on this machine.  (2, longer term): ask the packagers
valgrind:  for your Linux distribution to please in future ship a non-
valgrind:  stripped ld.so (or whatever the dynamic linker .so is called)
valgrind:  that exports the above-named function using the standard
valgrind:  calling conventions for this platform.  The package you need
valgrind:  to install for fix (1) is called
valgrind:  
valgrind:    On Debian, Ubuntu:                 libc6-dbg
valgrind:    On SuSE, openSuSE, Fedora, RHEL:   glibc-debuginfo
valgrind:  
valgrind:  Cannot continue -- exiting now.  Sorry. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:24:43.697

您可以使用 C 调试的常用工具获取堆栈跟踪。例如：

*   瓦尔格林：

    ```
    $ USE_ZEND_ALLOC=0 valgrind php -a 
    ```

*   广发银行：

    ```
    $ gdb php
    > r -a 
    ```

如果您没有获得有意义的堆栈跟踪，您可能需要使用调试符号和减少优化来重新编译 PHP。您可以通过传递`--enable-debug`到您的`./configure`线路来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:24:12.550

您可能会想要使用`valgrind`或类似工具来准确跟踪您的 PHP 安装在哪里是 Seg Faulting。

该错误很可能与您已加载的扩展有关，该扩展可能未编译为正确的体系结构、包含泄漏或其他原因。

# sql-server - 使用 T-SQL 从 XML 中检索值

> ID：12161164
> 
> 赞同：1
> 
> 时间：2012-08-28T14:11:24.603
> 
> 标签：sql-server, xml, tsql, xquery

谁能帮我`<QuoteId>`使用 T-SQL 和 XQuery 从附加的 XML 文件中检索一个值？

我正在尝试使用这个 T-SQL 但没有运气

```
declare @QuoteResponse XML
select @QuoteResponse =gQuoteResponse FROM AutoRenew where policyid= '454544'

SELECT b.value('(OverallResultStatus)[1]', 'varchar(100)')  as status
FROM
@QuoteResponse.nodes('GetQuoteResponse/OperationResult') as a(b) 
```

这是我用来检索`QuoteId`

```
DECLARE @QuoteResponse XML

SELECT @QuoteResponse = gQuoteResponse FROM [dbo].[AutoRenew] WHERE policyid = '454544'

SELECT
    @QuoteResponse.value('(GetQuoteResponse/QuoteResults/QuoteResult/QuoteId)[1]', 'bigint') 
```

谢谢

```
<GetQuoteResponse xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <OperationResult>
    <OverallResultStatus>xxxx</OverallResultStatus>
    <Results>
      <Result>
        <ResultStatus>xxxx</ResultStatus>
        <ResultCode>ddf</ResultCode>
        <ResultMessage>xxxxx</ResultMessage>
      </Result>
    </Results>
  </OperationResult>
  <QuoteResults>
    <QuoteResult>
      <OperationResult>
        <OverallResultStatus>xxx</OverallResultStatus>
        <Results>
          <Result>
            <ResultStatus>xx</ResultStatus>
            <ResultCode>xxxx</ResultCode>
            <ResultMessage>xx</ResultMessage>
          </Result>
        </Results>
      </OperationResult>
      <MainData>
        <StartDate>2012-08-14T00:00:00</StartDate>
        <ReturnDate>2013-08-13T00:00:00</ReturnDate>
        <TripType>xxx</TripType>
        <Area>xxx</Area>
        <Relationship>Individual</Relationship>
        <Product>
          <ProductId>xxx</ProductId>
          <Name>xxxx</Name>
        </Product>
        <Endorsements>
          <Endorsement>
            <EndorsementCode>xx</EndorsementCode>
            <Selected>xx</Selected>
            <Name>xxx</Name>
          </Endorsement>
          <Endorsement>
            <EndorsementCode>xxx</EndorsementCode>
            <Selected>xxx</Selected>
            <Name>xxxx</Name>
          </Endorsement>
        </Endorsements>
        <Promotion>
          <PromotionCode />
        </Promotion>
        <Travellers>
          <Traveller requestedMedicalScreening="false">
            <TravellerId>xxxx</TravellerId>
            <Title>xxx</Title>
            <FirstName>xxx </FirstName>
            <LastName>xxxx</LastName>
            <Age>xxx</Age>
          </Traveller>
        </Travellers>
      </MainData>
      <Price>
        <NetToParentAgent>xxx</NetToParentAgent>
        <NetPrice>xxx</NetPrice>
        <Tax>edew</Tax>
        <GrossPriceWithAllSurchargesAndMedicalScreenings>103.02</GrossPriceWithAllSurchargesAndMedicalScreenings>
      </Price>
      <QuoteId>322423234</QuoteId>
      <QuoteExpiryDate>xxx</QuoteExpiryDate>
      <SummaryOfCover />
    </QuoteResult>
  </QuoteResults>
</GetQuoteResponse> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:28:58.477

这个怎么样：

```
DECLARE @QuoteResponse XML
SELECT @QuoteResponse = gQuoteResponse FROM dbo.AutoRenew WHERE policyid = '454544'

SELECT
    @QuoteResponse.value('(/GetQuoteResponse/QuoteResults/QuoteResult/QuoteId)[1]', 'bigint') 
```

您只需要遵循 XML 元素层次结构 - 直到您读取所需的值：

```
<GetQuoteResponse     -- this one is relevant ....
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <OperationResult>  -- irrelvant - not in here.....
    ......
  </OperationResult>
  <QuoteResults>       -- this one is relevant ....
    <QuoteResult>      -- this one is relevant ....
      <OperationResult>  -- irrelvant - not in here..... 
        ....
      </OperationResult>
      <MainData>   -- irrelvant - not in here..... 
        ......
      </MainData>
      <Price>    -- irrelvant - not in here..... 
        ......
      </Price>
      <QuoteId>322423234</QuoteId>   -- here's our value ! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:28:28.787

您是否尝试过创建临时表然后使用 openxml 填充临时表？

```
DECLARE @QuoteResponse XML
SELECT @QuoteResponse =gQuoteResponse FROM AutoRenew where policyid= '454544'

DECLARE @idoc INT
EXEC sp_xml_preparedocument @idoc OUTPUT, @QuoteResponse

CREATE TABLE #QuoteIds(   
    [QuoteId] VARCHAR (10))

INSERT INTO #QuoteIds ([QuoteId])
    SELECT QuoteId
    FROM OPENXML(@idoc, '/QuoteResults/QuoteResult/QuoteId', 2) WITH #QuoteIds

DECLARE @quoteid VARCHAR (10)
SET @quoteid = (SELECT TOP 1 QuoteId FROM #QuoteIds) 
```

# jquery - 如何使用 jQuery 或 vanilla JS 检测链接是否隐藏在折叠的 twitter 引导导航栏中

> ID：12161165
> 
> 赞同：4
> 
> 时间：2012-08-28T14:11:24.857
> 
> 标签：jquery, twitter-bootstrap, overflow, hidden, nav

当 twitter 引导响应导航栏处于折叠状态时，我在检测导航链接的可见性时遇到问题。

问题的根源在于 .collapsed div 设置了溢出：隐藏规则。这意味着虽然导航 ul 的维度不为零，但它仍然是隐藏的，因为 .collapse 容器的高度为零（在关闭状态下设置在 style 属性中）。

问题是，如果#some-nav-link 是 .nav ul 中的 li 项之一，它将与 $('#some-nav-link :visible') 匹配，因为它不知道该元素是被溢出隐藏。

是否有一种万无一失的方法来检查可以解释这一点的元素的可见性？

我尝试使用 li $.fn.offset() 方法依赖 elementFromPoint，但在 li 有一些填充的情况下它不够好，例如，在这种情况下 elementFromPoint 返回 li 的父级之一。

注意 - 我的代码是相关网站上的第三方代码，因此我无法更改导航栏的工作方式。

**重要更新** 我正在寻找一个独立于 twitter bootstrap crash 工作机制的解决方案。这是确定元素可见性问题的一般解决方案，该元素位于溢出：隐藏元素的子元素的溢出部分中。我觉得最好将其与引发此问题的具体问题联系起来，但如果当前问题将被视为令人困惑，我愿意相应地对其进行修改。我希望这次更新就足够了。

感谢阅读，我期待一些聪明的解决方案！

这是一个显示检查的小提琴：折叠时可见返回true - [http://jsfiddle.net/VDR3Y/](http://jsfiddle.net/VDR3Y/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T17:53:31.043

选择器的 jQuery 实现`:visible`需要在任何祖先中将**高度**和**宽度**都设置为 0 才能失败。否则，您的原始代码会起作用。

AFAIK 没有选择器可以直接执行此操作，因此可能需要自定义函数：

```
(function () {

  function isCollapsed(element) {
    var $e = $(element);

    return $e.width()*$e.height() === 0;
  }

  $.fn.isReallyVisible = function () {
    var $this = $(this).filter(':visible');

    // if jQuery says its not visible, trust it, otherwise
    // check if any of the parents are collapsed
    return $this ? !$this.parents().toArray().some(isCollapsed) : false;
  };
})(); 
```

这将处理您父母崩溃的情况。

```
$('#some-nav-link').isReallyVisible(); 
```

## [JSFiddle](http://jsfiddle.net/mmfansler/mUeay/)

您可能需要添加更多来处理溢出，但由于这不在 OP 中，我认为这现在可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:34:06.290

把这张支票

```
$('div.nav-collapse.in').length > 0 ? 'links are visible' : 'links are not visible' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T22:40:53.697

对于任何有兴趣的人——我最终选择了一个不同的解决方案，基于 document.elementFromPoint。

```
(function($) {

    function checkFromPoint(index) {
        var $e = $(this);
        var fromPoint = document.elementFromPoint($e.offset().left + $e.width() / 2, $e.offset().top + $e.height() / 2);

        return $e.get(0) == fromPoint || $e.has(fromPoint).length;
    }

    $.fn.isReallyVisible = function() {
        var $this = $(this).filter(':visible');    

        return $this.length ? !!$this.filter(checkFromPoint).length : false;
    };
}(jQuery)); 
```

我更新了一个[jsfiddle](http://jsfiddle.net/dxHmk/)，您可以在其中看到它在工作中。

# nhibernate - Nhibernate QueryOver 在 Eager Fetch 中使用别名

> ID：12161166
> 
> 赞同：2
> 
> 时间：2012-08-28T14:11:29.703
> 
> 标签：nhibernate, queryover

我试图让 nhibernate 在急切的获取中使用别名。我不确定它是否可能。

我正在尝试在我的提取中使用别名（在我的示例中为 bAlias）。

```
QueryOver<A>() 
.JoinAlias(x => x.B, () => bAlias) 
.JoinAlias(x => x.B, () => bAlias2) 
.Where(() => bAlias2.Surname == "Smith") 
.Fetch(() => bAlias).Eager 
.Fetch(() => bAlias.C).Eager; 
```

如您所见，获取命令使用 2 个别名而不是来自 .

上面的代码不起作用。有效的代码是

```
QueryOver<A>() 
.JoinAlias(x => x.B, () => bAlias) 
.JoinAlias(x => x.B, () => bAlias2) 
.Where(() => bAlias2.Surname == "Smith") 
.Fetch(x => x.B).Eager 
.Fetch(x => x.B.C).Eager; 
```

如您所见，它的 Fetch 语句是不同的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:41:22.123

尝试这样的事情：

```
B b = null;

QueryOver<A>()
   .Fetch(x => x.B).Eager
   .JoinAlias(x => x.B, () => b, JoinType.LeftOuterJoin); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:51:02.480

您可以只使用连接，无论如何都`Fetch`可以解决。~~`INNER JOIN`~~ `LEFT OUTER JOIN`

```
QueryOver<A>() 
    .JoinAlias(x => x.B, () => bAlias) 
    .Where(() => bAlias.Surname == "Smith") 
    .Fetch(x => x.B).Eager 
    .JoinQueryOver(() => bAlias.C) 
```

# android-mediaplayer - 如何在媒体播放器 android 中使用 setWakeMode 方法？

> ID：12161174
> 
> 赞同：0
> 
> 时间：2012-08-28T14:11:42.273
> 
> 标签：android-mediaplayer

我正在使用媒体播放器进行电话响铃，我想在电话响铃时打开屏幕，请帮助我

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T09:52:01.277

要获得振铃事件：

```
private PhoneStateListener  phoneStateListener  = new PhoneStateListener() {
                                                        @Override
                                                        public void onCallStateChanged(int state, String incomingNumber) {

                                                            switch (state) {
                                                                case TelephonyManager.CALL_STATE_RINGING:
                                                                    break;
                                                                case TelephonyManager.CALL_STATE_OFFHOOK:
                                                                    break;
                                                                case TelephonyManager.CALL_STATE_IDLE:
                                                                    break;
                                                            }
                                                        }
                                                    }; 
```

设置观察者：

```
 try {
            TelephonyManager telephonyManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
            telephonyManager.listen(phoneStateListener, PhoneStateListener.LISTEN_CALL_STATE);
        }
        catch (SecurityException e) {
            // don't have READ_PHONE_STATE
        } 
```

并保持屏幕开启

解决方案1：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

解决方案 2：

```
<uses-permission android:name="android.permission.WAKE_LOCK"/>

yourwakelock = getContext().getSystemService(Context.POWER_SERVICE).newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK, getClass().getName()); 
```

目前为止就这样了

# sql - 获取 ActiveRecord::Relation 对象的名称

> ID：12161179
> 
> 赞同：0
> 
> 时间：2012-08-28T14:11:58.627
> 
> 标签：sql, ruby-on-rails, ruby, activerecord

整个下午，

我有一个月模型，其中有很多酒店。一家酒店属于一个月，有一个名称、信息、图片、twitter_id 等和一个获胜者列，这是一个布尔值。在我几个月的索引视图中，每个月我都想显示“赢家”为真的酒店名称。

我一直在尝试以下 where 查询；

```
<% @months.each do |month| %>
    <td><%= month.date %></td>
    <td><%= month.created_at.strftime("%v") %></td>
    <td><%= month.hotels.where(winner: "true") %></td>
<% end %> 
```

这又回来了；`#<ActiveRecord::Relation:0x007fae1ed9cd70>` （拍打 .name 最后只是给出“酒店”的关系名称）

如何执行检索获胜酒店名称的查询？

任何指针都会非常感谢，我的代码如下；

月控制器.rb

```
def show
    @month = Month.find(params[:id])
    @hotels = @month.hotels
  end

  def index
    @months = Month.paginate(page: params[:page], per_page: 10).includes(:hotels)
  end 
```

如果您需要更多代码，请大声喊叫。欢呼安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:13:45.413

假设每个月有一名获胜者：

```
month.hotels.where(winner: "true").first.try(:name) 
```

如果可能有很多获胜者，您可以这样做：

```
month.hotels.where(winner: "true").pluck(:name) 
```

这将返回所有获胜者姓名的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:18:38.327

当您进行`where`查询时，它会向您返回酒店对象的数组。也许您应该尝试使用另一种`find_by`方法来仅检索一个这样的酒店：

```
month.hotels.find_by_winner(true).name 
```

编辑：

```
<% winner = month.hotels.find_by_winner(true) %>
<%= winner.name if winner %> 
```

这样，只有当获胜者不是 nil 时才会调用 name 方法。

# c++ - 计算大矩阵的零空间

> ID：12161182
> 
> 赞同：0
> 
> 时间：2012-08-28T14:12:02.667
> 
> 标签：c++, python, c, algorithm, matrix

我正在寻找可以用来计算极大（数百万个元素，不一定是正方形）矩阵的零空间的最快算法/包。任何语言都可以，最好是 Python/C/C++/Java。您的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:23:32.500

避免破坏 CPU 缓存的方式很大程度上取决于矩阵的存储/加载/传输方式，您没有解决这一点。

有一些通用的建议：

1.  将问题划分为工作线程，每个线程处理连续的行

2.  递增指针（在 C 中）以遍历行并在每个线程的基础上保持计数

3.  在所有工作线程结束时合并每个线程的结果。

如果您的矩阵单元由位（而不是字节、整数或数组）组成，那么您可以读取`words`（在 32 位/64 位平台上为 4 字节或 8 字节）以加快计数。

问题描述中有太多未回答的问题，无法为您提供任何进一步的指导。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T14:27:16.947

您的矩阵以哪种数据结构表示？如果您使用元素列表来表示矩阵，即一个矩阵元素的“列、行、值”元组，那么解决方案将只是计算元组的数量（减去矩阵大小）

# memory - 如何增加 OpenEJB 独立容器的内存？

> ID：12161183
> 
> 赞同：1
> 
> 时间：2012-08-28T14:12:05.480
> 
> 标签：memory, configuration, openejb

通常我们只是找到 JVM 的 -Xm 开关并增加它，但似乎 OpenEJB 4.0.0 正在使用 Javaagent 来启动 JVM。

在这种情况下，我们如何增加 RAM 的堆限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:23:45.820

它的工作方式相同。该`-javaagent:`标志对内存的设置方式没有影响。

旁注，`-javaagent`如果其中任何一个为真，您只需要该选项：

*   您正在使用 OpenJPA 作为您的 JPA 提供程序
*   您正在使用 CMP2 `EntityBean`。

# php - 如何在 php 中使用 echo 提供外部链接？

> ID：12161184
> 
> 赞同：1
> 
> 时间：2012-08-28T14:12:06.220
> 
> 标签：php, sql, echo

我正在尝试在数据库中存储一些链接，例如`www.google.com`。假设从数据库中提取值后，我将其存储在`$url`. 现在，我正在尝试通过执行设置链接

```
echo "<a href=$url>link</a>" 
```

现在，问题 - 每当我点击链接时，链接都会转到`www.mydomain.com/www.google.com`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T14:13:17.573

您必须添加`http://`到链接的开头。例如：

```
 echo "http://$url"; 
```

:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T14:13:50.503

这可能取决于浏览器，但链接始终是相对的，出站链接应包括正确的`http`或`https`协议规范。

# javascript - 谷歌分析 anonymizeIp - 如何匿名？

> ID：12161187
> 
> 赞同：0
> 
> 时间：2012-08-28T14:12:16.907
> 
> 标签：javascript, google-analytics, google-analytics-api

我知道 anonymizeIp 选项会导致谷歌从用户 IP 中删除最后一个八位字节。

我的问题是，还剩下多少准确度。我还能看到访客来自哪个国家，哪个城市？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:18:39.817

任何 GeoIP 数据库仍应在国家层面进行检测，因为国家将由前 3 个八位字节确定。不过，城市级别的检测可能不起作用。

# mongodb - C# MongoDB - 绑定对象属性，插入时 _id null

> ID：12161188
> 
> 赞同：2
> 
> 时间：2012-08-28T14:12:18.587
> 
> 标签：mongodb, mongodb-.net-driver

当我插入 Mongo 时，我不想定义 _id，但我确实想读取 _id。使用对象时，例如

```
public class MyClass
    {
        public Object _id { get; set;}
        public String propery1 { get; set; }
    } 
```

如果我做类似的事情，我正在写 null _id

```
this.myobj.property1 = "Useless info";    
SafeModeResult result = this.uploads.Insert(uploadedfilecanonical, SafeMode.True); 
```

我是否需要为查询绑定和插入绑定创建单独的类类型，其中插入没有定义 _id 属性但可查询的呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T15:32:13.623

我不是很理解你的问题，所以我会在这里尽力而为。如果您进行插入，如果 _id 为空，它将保持为空。如果您使用保存，它会为您创建一个标识符（如果不存在）。但是，您使用 Object 作为您的 id，这很奇怪。我们建议您使用 ObjectId、整数、Guid 或其他内容。

此外，您可以为 .NET 类使用名为“Id”的属性，而不是非常规的 _id。或者，您可以使用[属性](http://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial#CSharpDriverSerializationTutorial-IdentifyingtheIdfieldorproperty)来表示 id，或者您可以创建[约定](http://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial#CSharpDriverSerializationTutorial-Writeacustomconvention)来应用通用模式。我强烈建议阅读[教程](http://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-04T19:56:39.137

只有`ObjectId`and`Guid`在这里作为一种 Id 属性工作。您可以不带下划线（且不带`[BsonId]`属性）命名属性。

`ObjectId`对于 mongo 来说是很自然的，服务器会创建它并用它来响应，这是最快的方式，AFAIU。 `Guid`对于 .NET 来说很自然，但客户端的 Mongo 驱动程序将生成此 ID 并将其编码为 mongo。最后 2 行是 .Net Guid 存储在 mongo 中的方式。前几行是自然的 mongo `ObjectId`。 [![在此处输入图像描述](../Images/9ccb5b97b9d346d295c5a03d3cdcc14a.png)](https://i.stack.imgur.com/DeIAU.png)

只要您只需要在某处提供参考，`ObjectId`结构就应该适合您。

但是，如果您对 Id 进行序列化，您可能会看到令人不快的结果。可以使用属性更改 BsonRepresentation 并使用字符串，例如：

```
 public class SimpleTask
    {
        [BsonRepresentation(BsonType.ObjectId)]
        public string Id { get; set; }
        public string Subject { get; set; }
    } 
```

# android - 如何使用 SurfaceView 平滑动画？

> ID：12161194
> 
> 赞同：3
> 
> 时间：2012-08-28T14:12:45.970
> 
> 标签：android, android-layout

```
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.View.OnTouchListener;

public class Play extends Activity implements OnTouchListener {

MKZSurface ourSurfaceView;
float x, y, sx, sy, fx, fy;
float cW, cH;
float ballx, bally;
float blockx = 0;
int counter = 0;
int countx = 0, county = 0;
int ballc;
long startTime, currentTime, ballStartTime, ballTime;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ourSurfaceView = new MKZSurface(this);
    ourSurfaceView.setOnTouchListener(this);
    setContentView(ourSurfaceView);
    startTime = System.currentTimeMillis();
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    ourSurfaceView.pause();

}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    ourSurfaceView.resume();
}

@Override
public boolean onTouch(View arg0, MotionEvent event) {
    // TODO Auto-generated method stub

    try {
        Thread.sleep(20);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    x = event.getX();
    y = event.getY();

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        sx = event.getX();
        sy = event.getY();
        break;
    case MotionEvent.ACTION_UP:
        fx = event.getX();
        fy = event.getY();

        break;

    }
    return true;
}

public void svBackGround(Canvas canvas, Paint SolidC) {
    canvas.drawRect(0, (cH - 100), cW, cH, SolidC);
    canvas.drawRect(0, 0, cW, 100, SolidC);
}

public boolean ballJump() {
    if (sx != 0 && sy != 0) {
        return true;
    } else {
        return false;
    }
}

public void Jump() {
    if (ballc == 0) {
        ballStartTime = System.currentTimeMillis();
        ballc = 1;
    }
    if (ballc == 1) {
        ballTime = System.currentTimeMillis();
    }

    if (county >= -50 && counter == 0 && ballTime - ballStartTime <= 1000) {
        county -= 10;

    } else if (county <= -50 && ballTime - ballStartTime <= 1000) {
        counter = 1;
    } else if (ballTime - ballStartTime >= 1000 && county < 0) {
        county += 10;
        counter = 1;
    }

    if (ballTime - ballStartTime >= 250 && county == 0 && counter == 1) {
        sx = 0;
        sy = 0;
        ballc = 0;
        counter = 0;
    }
}

public class MKZSurface extends SurfaceView implements Runnable {

    SurfaceHolder ourHolder;
    Thread ourThread = null;
    boolean isRunning = false;

    public MKZSurface(Context context) {
        super(context);
        ourHolder = getHolder();

        // TODO Auto-generated
    }

    public void pause() {
        isRunning = false;
        while (true) {
            try {
                ourThread.join();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            break;
        }
        ourThread = null;
    }

    public void resume() {
        isRunning = true;
        ourThread = new Thread(this);
        ourThread.start();
    }

    @Override
    public void run() {
        // TODO Auto-generated method stub
        while (isRunning) {
            if (!ourHolder.getSurface().isValid())
                continue;

            Canvas canvas = ourHolder.lockCanvas();
            canvas.drawRGB(255, 255, 255);

            Paint SolidC = new Paint();
            SolidC.setColor(Color.LTGRAY);

            Paint BallC = new Paint();
            BallC.setColor(Color.CYAN);

            if (ballJump() == true) {
                Jump();
            }

            cW = canvas.getWidth();
            cH = canvas.getHeight();

            ballx += 10;
            bally = (cH - 115) + county;

            canvas.drawCircle(ballx, bally, 15, BallC);
            svBackGround(canvas, SolidC);
            ourHolder.unlockCanvasAndPost(canvas);
        }

    }
} 
```

动画不流畅且不会相互淡入，我尝试提高帧速率，但没有帮助，我已经缩短了距离。如何使动画更流畅？它只是在不同的点重新创建圆，并没有显示它移动。如何让球看起来像在移动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:16:57.143

`new Paint()`从您的 onDraw() 方法中删除。将 BallC 设置为类属性，因此您可以将其初始化一次 - 或延迟初始化，如下所示：

```
public class MKZSurface extends SurfaceView implements Runnable {

  SurfaceHolder ourHolder;
  Thread ourThread = null;
  boolean isRunning = false;
  Paint SolidC = new Paint();
  Paint BallC = new Paint();

  public MKZSurface(Context context) {
      super(context);
      ourHolder = getHolder();
      // This must be done only once !
      SolidC.setColor(Color.LTGRAY);
      BallC.setColor(Color.CYAN);
  }

  // ...

  @Override
  public void run() {
      // TODO Auto-generated method stub
      while (isRunning) {
          if (!ourHolder.getSurface().isValid())
              continue;

          Canvas canvas = ourHolder.lockCanvas();
          canvas.drawRGB(255, 255, 255);

          if (ballJump() == true) {
              Jump();
          }

          cW = canvas.getWidth();
          cH = canvas.getHeight();

          ballx += 10;
          bally = (cH - 115) + county;

          canvas.drawCircle(ballx, bally, 15, BallC);
          svBackGround(canvas, SolidC);
          ourHolder.unlockCanvasAndPost(canvas);
      }

} 
```

更一般地说，您必须尽可能避免在关键代码中创建任何对象。

# spring - OData4j 和 CXF 与 Spring

> ID：12161197
> 
> 赞同：1
> 
> 时间：2012-08-28T14:12:56.200
> 
> 标签：spring, cxf, jax-rs, odata4j

我正在尝试将 odata4j 集成到现有的 CXF 服务应用程序中。servlet 已经托管了一个现有的soap and rest 服务。我的应用服务器是tomcat。

**我的 web.xml：**

```
<servlet>
        <servlet-name>CXFServlet</servlet-name>
        <display-name>CXF Servlet</display-name>
        <servlet-class>
            org.apache.cxf.transport.servlet.CXFServlet
        </servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
        <servlet-mapping>
        <servlet-name>CXFServlet</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping> 
```

现有的soap 和rest 服务是通过jaxrs 和jaxws 配置文件配置的。

**我创建了我的 JPA OData Producer Factory：**

```
public class CmecfOdataProducerFactoryImpl implements ODataProducerFactory {
    String namespace = "MyOData";
    private int maxResults = 100;
    @Override
    public ODataProducer create(Properties prprts) {

        String persistenceName = null;
        try {
            persistenceName = ServiceLocator.getInstance().getResource("java:/comp/env/persistenceUnitName", String.class);
        } catch (Exception ex) {
            Logger.getLogger(CmecfOdataProducerFactoryImpl.class.getName()).log(Level.SEVERE, null, ex);
        }
        EntityManagerFactory emf = Persistence.createEntityManagerFactory(persistenceName);
        JPAProducer producer = new JPAProducer(emf, namespace, maxResults);

        return producer;
    }
} 
```

包含此 odata 服务的最简洁方法是什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:31:44.773

只需在 web.xml 文件中添加您的 odata JPA 工厂即可。下面的 web.xml 配置将正常工作，正确放置您的 JPA 工厂包。

```
<servlet>     
<servlet-name>JPAFactory</servlet-name>     
<servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>     
<init-param>       
<param-name>javax.ws.rs.Application</param-name>       
<param-value>org.odata4j.jersey.producer.resources.ODataApplication</param-value>     
</init-param> 
<init-param> 
<param-name>odata4j.producerfactory</param-name> 
<param-value>**your packageName**.CmecfOdataProducerFactoryImpl </param-value> 
</init-param> 
<load-on-startup>1</load-on-startup>   
</servlet>   
<servlet-mapping>     
<servlet-name>JPAFactory</servlet-name>     
<url-pattern>/jpaproducer.svc/*</url-pattern>   
</servlet-mapping> 
```

# apache - 重写别名目录

> ID：12161198
> 
> 赞同：7
> 
> 时间：2012-08-28T14:12:57.153
> 
> 标签：apache, mod-rewrite, mod-alias

我正在尝试首先使用 Alias 文件夹将我的项目文件存储在与 my 不同的位置`DocumentRoot`，然后`mod_rewrite`在此请求上执行 a 。但是它似乎没有解析`.htaccess`文件。

这是我的别名文件的内容：

```
Alias /test F:/Path/To/Project

<Directory F:/Path/To/Project>
    Order allow,deny
    Allow from all
</Directory> 
```

这是我的`.htaccess`文件：

```
Options +FollowSymlinks
RewriteEngine on

RewriteRule .* index.php [NC] [PT] 
```

当我删除别名时，一切正常。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T14:14:42.597

mod_alias 总是优先于 mod_rewrite。你永远不能用 mod_rewrite 覆盖 mod_alias 指令。

在这种情况下，AliasMatch 指令可能会对您有所帮助[。](http://httpd.apache.org/docs/current/mod/mod_alias.html#aliasmatch)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-06T03:42:30.020

这是一个解决方案，可以解决您尝试使用别名和重写但由于它们冲突而无法使用的某些情况。

假设您`DocumentRoot`的特定应用程序是`/var/www/example.com/myapp`，并且您具有以下基本目录结构，其中公共请求要么针对文件`public`（例如，css 文件），要么通过`index.php`.

```
myapp/
|- private_library/
   |- private_file.php
|- private_configs/
   |- private_file.php
|- public/
   |- index.php
   |- css/
      |- styles.css 
```

目标是仅在内部提供内容，但是 URL不`public_webroot`应该是.`example.com/myapp``example.com/myapp/public`

以下似乎应该有效：

```
DocumentRoot /var/www/example.com
Alias /myapp /var/www/example.com/myapp/public
<Directory /var/www/example.com/myapp/public>
    # (or in this dir's .htaccess)
    RewriteEngine On
    RewriteBase /public
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?q=$1 [QSA,PT]
</Directory> 
```

但是，如果您请求一个不存在的文件的 URL（即应该通过的文件`index.php`），这将导致无限循环。

一种解决方案是*不*使用 mod_alias，而只需在应用程序的根目录中使用 mod_rewrite，如下所示：

```
DocumentRoot /var/www/example.com
<Directory /var/www/example.com/myapp>
    # (or in this dir's .htaccess)
    RewriteEngine On
    RewriteRule   (.*) public/$1 [L]
</Directory>
<Directory /var/www/example.com/myapp/public>
    # (or in this dir's .htaccess)
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?q=$1 [QSA,L]
</Directory> 
```

就这样！

# javascript - 设置中心后的 Google Maps API 缩放

> ID：12161203
> 
> 赞同：0
> 
> 时间：2012-08-28T14:13:04.020
> 
> 标签：javascript, google-maps, zooming

我尝试使用 Google 地图将位置添加到用户可以创建的事件中。因此，有一个“添加位置”复选框，`onclick="initialize()"`然后显示地图和搜索框，搜索按钮具有`onclick="codeAddress()"`。但是，初始化的地图设置为缩放级别 10（因为它是整个伦敦）但是当有人输入例如地址时，我需要它缩放到适当的级别。

我觉得这似乎应该更简单。我已经阅读了很多关于使用的信息`LatLngBounds()`，但是这些示例是针对多个标记的，并且您必须设置 SW 和 NE 角，我不确定如何针对不同的搜索进行适当的计算。

```
var geocoder;
var map;
var markersArray = [];
function initialize() {
  var locationStart = new google.maps.LatLng(51.5073346, -0.12768310000001293);
  geocoder = new google.maps.Geocoder();
  var myOptions = {
    center: locationStart,
    zoom: 10,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
  var marker = new google.maps.Marker({
    position: locationStart,
    map: map
  });
  markersArray.push(marker);
}
// Function to remove markers
function clearOverlays() {
  if(markersArray) {
    for (var i = 0; i < markersArray.length; i++) {
      markersArray[i].setMap(null);
    }
  }
}
// Function to search addresses and generate a list of the other options returned
function codeAddress() {
  var address = document.getElementById("address").value;
  geocoder.geocode({
    'address': address,
    'region' : 'uk'
  },
  function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      var divTest = document.getElementById("results");
      divTest.innerHTML = "";
      if (results.length > 1) {
        $('#addressOptions').show();
        for (var i=0; i<results.length; i++) {
          divTest.innerHTML += "<tr><td id=\"address"+ i + "\" onclick=\"grabLocation(" + i + ")\" >" + results[i].formatted_address + "</td></tr>";
        };
      } else {
        $('#addressOptions').hide();
      }
      divTest.innerHTML += "";
      var marker = new google.maps.Marker({
        'map' : map,
        'position' : results[0].geometry.location,
        'preserveViewport' : false
      });
      map.setCenter(results[0].geometry.location);
      markersArray.push(marker);
    } else {
      alert("Geocode was not successful for the following reason: " + status);
    }
  });
} 
```

抱歉，如果这是一个简单的问题，我一直在寻找一个简单的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:58:01.760

地理编码器返回建议的视口

```
results[0].geometry.viewport 
```

它可用于缩放到对返回结果有意义的级别

[例子](http://geocodezip.com/v3_zoom2stateSelectList.html)

# java - 使用 FOP 的 XML 到 PDF 返回一个空白页

> ID：12161204
> 
> 赞同：1
> 
> 时间：2012-08-28T14:13:07.313
> 
> 标签：java, xml, xslt, apache-fop

我正在尝试使用 Apache FOP 将 xml 文件转换为 pdf 文件，但我只收到一个空白页，这是我的代码：

```
protected byte[] buildPDF(byte[] xml) throws IOException {
    FileOutputStream fos;
    byte[] pdfBytes = null;

    try{

        // Setup input and output files
        File xmlfile = new File(MULTIMEDIA_PATH + File.separator + "xml/report.xml");
        File xsltfile = new File(MULTIMEDIA_PATH + File.separator + "xml/transformation.xsl");

        fos = new FileOutputStream(xmlfile);
        fos.write(xml);
        fos.close();

        // Step 1: Construct a FopFactory
        FopFactory fopFactory = FopFactory.newInstance();
        FOUserAgent foUserAgent = fopFactory.newFOUserAgent();

        // Step 2: Setup output stream
        OutputStream out = new BufferedOutputStream(new FileOutputStream((MULTIMEDIA_PATH + File.separator + "xml/result.pdf")));

        try {
            // Step 3: Construct FOP with desired output format
            Fop fop = fopFactory.newFop(MimeConstants.MIME_PDF, foUserAgent, out);

            // Step 4: Setup JAXP using identity transformer
            Source xslt = new StreamSource(xsltfile);
            TransformerFactory factory = TransformerFactory.newInstance();
            Transformer transformer = factory.newTransformer(xslt);

            // Step 5: Setup input and output for XSLT transformation
            Source src = new StreamSource(xmlfile);
            Result res = new SAXResult(fop.getDefaultHandler());

            // Step 6: Start XSLT transformation and FOP processing
            transformer.transform(src, res);

        } finally {
            out.close();
        }

    } catch (Exception e) {
        e.printStackTrace(System.err);
        System.exit(-1);
    }       

    return pdfBytes;

} 
```

你对这个问题有任何想法吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:16:18.493

如果你得到空输出，那么我认为你最后会丢失类似的东西：

```
pdfBytes = out.toByteArray(); 
```

如果您的输出不为空（如果您确实有上述内容），那么您应该提供 transformation.xsl 的内容，也许有问题。

# iphone - XCode图像颜色叠加效果

> ID：12161205
> 
> 赞同：0
> 
> 时间：2012-08-28T14:13:12.383
> 
> 标签：iphone, ios, image, uiimageview

我想知道以下是否可能以及如何去做。

我有一个图像（UIImageView），它是一个具有透明背景的 png 文件。图像都是相同的灰色阴影（本质上是一个剪影），并且有 4 个不同的部分。

在图像下方，我有一个带有 4 个停止点（包括开始和结束）的滑块 - 因此，当用户滑动它时，它会“捕捉”，以便指针直接位于图像的“片段”下方。

我想做的是：例如，如果滑块位于第 2 段下方，则图像将从某个 x 位置到另一个 x 位置显示为蓝色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:27:23.197

我认为最好的方法是`UIControlEventValueChanged`在`UISlider`. 您可以设置`slider.minimumValue = 0;`和`slider.maximumValue = 4;`。

然后在您设置的操作中，`UIControlEventValueChanged`您可以将滑块捕捉到该位置并更改色调。前任：

```
- (void)valueChanged:(id)sender {
    if (value<0) {
         slider.value = 0;
         //Tint the uiimage
    }
    else if (value<1) {
         slider.value = 2;
         //Tint the uiimage
    }
} 
```

# sql - SQL Server 日志传送和在辅助服务器上创建用户

> ID：12161206
> 
> 赞同：2
> 
> 时间：2012-08-28T14:13:15.827
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005, log-shipping

我们的服务器`A`是我们的生产服务器，我们使用 SQL Server 日志传送将事务日志从服务器`A`传送到`B`.

我了解该服务器`B`随后处于热备用只读状态。

我的问题是，我们如何添加一个 windows 域帐户以只读访问服务器上的该数据库，`B`但不能访问服务器上的数据库`A`。

当我尝试创建用户并为服务器分配只读访问权限时`B`，我当然不能因为服务器`B`处于待机模式。我怎样才能解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:28:27.040

我认为您可以使用备用选项恢复日志传送辅助并使辅助可读。不过需要注意的是，在恢复到备用文件之前，您无法恢复任何进一步的日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-20T05:18:56.580

如果服务器 A 和服务器 B 使用日志传送进行复制，则 db 应该相同，如果只读用户帐户无法访问服务器 A 是什么原因？

顺便说一句，如果你真的需要这个功能，你应该使用 SQL 复制而不是日志传送，因为服务器 B 上的 SQL 复制是在线的，你可以向数据库添加额外的用户

# java - 在java中使用gsm调制解调器发送批量短信

> ID：12161209
> 
> 赞同：0
> 
> 时间：2012-08-28T14:13:18.437
> 
> 标签：java, sms

我想开发可以发送批量短信的应用程序。我不知道如何实现它。[我有一个应用程序，通过阅读这个网站](http://www.harshadura.net/2011/10/simply-send-sms-using-java-with-your.html)只能发送一条短信。但我想知道如何发送批量短信。请告诉我我该怎么做？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T17:58:45.117

Assuming you've gotten that module to work, adding a loop around the gsmModem.Sender call should send a specified amount of messages. I would suggest adding in a sleep method, as your modem probably won't be able to handle all of the AT commands at once.

# javascript - 仅当会话历史记录中有弹出窗口而不是 pushstate 时，如何在 onpopstate 上触发？

> ID：12161211
> 
> 赞同：1
> 
> 时间：2012-08-28T14:13:21.103
> 
> 标签：javascript, jquery, history.js

当从普通的 HTML5 历史 API 切换到 history.js 时，出现的一个重要问题是即使在 pushstate 上也会触发 onpopstate。这对我来说是有问题的，因为我想像 HTML5 历史 API 那样将回调添加到 onpopstate。

我可以确定 statechange 是历史堆栈上的推送还是弹出操作吗？

# google-maps-api-3 - 将 Google Maps JS API v3 导入 Netbeans IDE

> ID：12161213
> 
> 赞同：3
> 
> 时间：2012-08-28T14:13:28.627
> 
> 标签：google-maps-api-3

我正在利用谷歌地图为您的应用程序制作地理工具的机会，这太棒了！刚刚开始了解您可以使用 API 创建多少。

我在用于 PHP 的 Netbeans IDE 中工作。有谁知道是否以及如何以某种方式将 Google 地图 API 导入 Netbeans？目的是当我输入谷歌之类的东西时。然后按 Ctrl+Space，IDE 应该会向我显示所有可用于 google 的库机会。* 现在我必须要么记住库树，要么搜索我需要的每个单独的库树。在 IDE 中获取提示的工具将不胜感激:)

# jquery - jQuery UI 1.8 手风琴“活动”

> ID：12161215
> 
> 赞同：0
> 
> 时间：2012-08-28T14:13:36.730
> 
> 标签：jquery, jquery-ui, jquery-ui-accordion

我正在使用 jQuery UI 1.8 Accordion 小部件。当使用“活动”功能以便在页面加载时打开特定的手风琴窗口时，我发现如果我将其设置为“活动 3”，则会打开第 4 个窗口。或者，如果我将其设置为“活动”，则会打开第三个窗口。

有谁知道为什么？这是一个小提琴的链接.... [http://jsfiddle.net/bbyrdhouse/hZGL7/](http://jsfiddle.net/bbyrdhouse/hZGL7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:15:53.210

因为它是一个基于零的集合——第一个元素是“0”，第二个元素是“1”，依此类推。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:16:22.650

这是因为该`active`属性是从零开始的。要使第一个选项卡处于活动状态，您需要设置`0`第二个选项卡`active: 1`，依此类推。

# php - 从数组中检索 PHP 值；数组从 2 开始？

> ID：12161217
> 
> 赞同：0
> 
> 时间：2012-08-28T14:13:38.420
> 
> 标签：php, arrays

> **可能重复：**
> [混合数组和对象](https://stackoverflow.com/questions/10725622/mixed-array-and-object)

我`print_r`用来查看数组包含的内容：

```
Array ( 
    [2] => stdClass Object ( 
        [id] => 2 
        [category] => 1 
        [sortorder] => 10001 
        [shortname] => 2323 
        [fullname] => asdaSDa 
        [startdate] => 1343188800 
        [visible] => 1 
        [groupmode] => 0 
        [groupmodeforce] => 0 
        [numsections] => 10 
        [role] => student 
        [rolename] => Student 
    ) 
) 
```

我想检索`[id]`. 如何使用 PHP 实现这一点？

我尝试了以下方法，但从服务器收到异常 500：

```
echo "<h1>CODIGO: ".$courses[2]["id"]."</h1>"; 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T14:14:46.097

您拥有的是一组对象，因此您无法`id`使用括号访问。相反，您需要使用`->`直接获取对象属性：

```
echo $array[2]->id; 
```

如果键更改（但元素是第一个），请使用[`array_shift()`](http://php.net/array_shift)：

```
$first = array_shift( $array);
echo $first->id; 
```

同样，[`array_pop()`](http://php.net/array_pop)如果元素是数组中的最后一个，则使用。

# python - 了解python的argparse模块

> ID：12161223
> 
> 赞同：2
> 
> 时间：2012-08-28T14:13:48.903
> 
> 标签：python, command-line, arguments, argparse

我正在尝试在 python 中使用 argparse，但我不知道如何在命令行中调用该程序以查看它是否有效。

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument("DocID", type= int, help= "Insert DocID Here")
parser.add_argument("echo", help = "Enter in the FileName to be read")
args = parser.parse_args()
print args 
```

这是我非常基本的程序，我试图使用它来了解更多关于 argparse 如何工作的信息。我只需要了解如何以及在何处调用程序就可以使用我给它的参数。

编辑：为了让我的问题更清楚对不起。我有这段代码，但我不知道如何调用整个程序以便我可以运行它。就像我将如何在命令行中运行它一样？因为当仅在 IDLE 中运行时，它会由于缺少命令而产生错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:17:23.683

ArgumentParser 的`parse_args`方法可以将列表作为输入。该列表用于解析命令行参数。所以，一个常见的成语是：

```
args = parser.parse_args('-a -b -c --value=True'.split()) 
```

因为`str.split`返回一个列表。( `'a b c'.split() == ['a', 'b', 'c']`)

* * *

通常，当您添加参数时，您会这样做：

```
parser.add_argument('-a', '--a-long-name', type=int, ...) 
```

前面没有`-`或的参数是位置参数，所以你的两个参数都是位置参数。`--`如果你这样做，你可以看到一些正在发生的事情：

```
args = parser.parse_args(['1','foo'])
print args.DocID # 1
print args.echo  # foo 
```

这与调用您的脚本相同`python youscript.py 1 foo`（没有里面的列表`parse_args`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:37:34.437

如果您想知道脚本的命令行语法...只需使用 --help 调用它，argparse 会自动为您提供。

```
⚫  gbin@sal tmp % python test.py --help
usage: test.py [-h] DocID echo

positional arguments:
  DocID       Insert DocID Here
  echo        Enter in the FileName to be read

optional arguments:
  -h, --help  show this help message and exit 
```

# iphone - 无法让 UIPageViewController 工作

> ID：12161229
> 
> 赞同：0
> 
> 时间：2012-08-28T14:14:02.413
> 
> 标签：iphone, objective-c, ios

我一直在努力让 UIPageViewController 工作很长一段时间，但缺乏结果开始让我发疯......

以下代码是部分教程（我也没有开始工作）和我的一部分。现在我正在尝试让每个 viewControllers 查看一个标签，以便在添加内容之前确保它可以正常工作。

```
- (void)viewDidLoad
{
[super viewDidLoad];

vcArray = [self createViewControllers:1];
NSLog(@"TEST1");

self.pageController = [[UIPageViewController alloc] initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal options:nil];
self.pageController.delegate = self;
self.pageController.dataSource = self;
NSLog(@"TEST2 %@", vcArray);
[self.pageController setViewControllers:vcArray direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:nil];
[[pageController view] setFrame:[[self view] bounds]];
NSLog(@"TEST3");
[self addChildViewController:self.pageController];
[[self view] addSubview:[self.pageController view]];
[pageController didMoveToParentViewController:self];
NSLog(@"TEST4");

}

- (NSArray *) createViewControllers:(NSInteger)ammount{
NSMutableArray *array = [NSMutableArray new];
for (NSInteger i = 0; i <= ammount; i++) {
    PageContentViewController *pageContentViewController = [PageContentViewController new];
    UILabel *label = [UILabel new];
    label.text = @"STRING";
    pageContentViewController.view = label;
    [array addObject:pageContentViewController];
}
return array;
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController
{
NSUInteger index = [self indexOfViewController:
                    (PageContentViewController *)viewController];
if ((index == 0) || (index == NSNotFound)) {
    return nil;
}

index--;
return [vcArray objectAtIndex:index];
}

- (UIViewController *)pageViewController:
(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController
{
NSUInteger index = [self indexOfViewController:
                    (PageContentViewController *)viewController];
if (index == NSNotFound) {
    return nil;
}

index++;
if (index == [vcArray count]) {
    return nil;
}
return [vcArray objectAtIndex:index];
}

- (NSUInteger)indexOfViewController:(PageContentViewController *)viewController
{
return [vcArray indexOfObject:viewController.dataObject];
} 
```

你能看到我错过了什么吗？我经历了太多教程和stackoverflow问题，这让我更加困惑......

在此先感谢，汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:31:01.737

一般提示：

不使用`[PageContentViewController new]`，使用`[[PageContentViewController alloc] initWithNibName:nil bundle:nil]`。不使用`[UILabel new]`，使用`[[UILabel alloc] initWithFrame:CGZeroRect]`。

单步执行您的代码。检查应该是对象的东西`nil`。Objective-C 会默默地允许事物存在`nil`，即使你在它们上调用方法！

# javascript - Cordova：未捕获的 ReferenceError：PhoneGap 未由 chbrody 使用 SQLitePlugin.js 定义

> ID：12161231
> 
> 赞同：3
> 
> 时间：2012-08-28T14:14:06.877
> 
> 标签：javascript, android, sqlite, cordova, cordova-2.0.0

我在 Android 上使用 cordova-2.0.0 和 chbrody 的 SQLite 插件。（https://github.com/chbrody/Cordova-SQLitePlugin）

我的 js-imports 是

```
<script type="text/javascript" charset="utf-8" src="js/cordova-2.0.0.js"></script>
<script type="text/javascript" charset="utf-8" src="js/jquery.min.js"></script>
<script type="text/javascript" charset="utf-8" src="js/SQLitePlugin.js"></script> 
```

js-Error 发生在 SQLitePlugin.js 的这一行中：

```
return PhoneGap.exec(success, error, "SQLitePlugin", "open", [this.dbPath]); 
```

我查了一下，发现Framework对象不再叫“PhoneGap”而是改名为“cordova”了。将插件 js 中的对象重命名为“cordova”对我也不起作用。

发生错误后，数据库按定义创建，但日志中仍然出现js错误。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:11:18.953

PhoneGap 桥接项目现在正式命名为 Cordova。我建议您更新 SQLLite 库并确保您在代码中使用最后一个对象名称。

SQLLite 插件的最后一个版本看起来为cordova 更新： [https ://github.com/brodyspark/PhoneGap-SQLitePlugin-iOS](https://github.com/brodyspark/PhoneGap-SQLitePlugin-iOS) [https://github.com/brodyspark/PhoneGap-SQLitePlugin-Android](https://github.com/brodyspark/PhoneGap-SQLitePlugin-Android)

# erlide - ErlIDE 和控制台输出支持

> ID：12161233
> 
> 赞同：0
> 
> 时间：2012-08-28T14:14:11.167
> 
> 标签：erlide

如何在 ErlIDE 中查看我的 io:format(...) 输出？是否支持？我想不通。

我的断点和代码工作正常，但除了

```
Eshell V5.9.1
(erlhttp@ONIXNB)1> 
```

显示在控制台上。此外，我无法在控制台下方的代码输入窗口中执行任何代码；当我按*Ctrl+Enter*时，它只是换行。

手动**erl**启动向我展示了我在程序中打印的所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T06:47:57.800

我需要更多信息来告诉你会发生什么。

我有这个代码

```
-module(y).
-compile(export_all).
f() ->
    F = oki,
    io:format("format ~p~n", [F]),
    F. 
```

在控制台中

```
Eshell V5.9.1.1
(main@eselnts1104.mo.sw.ericsson.se)1> y:f().
format oki
oki 
```

请将日志发送给我（例如，在[https://www.assembla.com/spaces/erlide/support/tickets](https://www.assembla.com/spaces/erlide/support/tickets)，我不知道您是否可以将它们附在此处）。从 window->preferences->erlang->report problem 中检索日志。

# ruby-on-rails - 新的 LinkedIn 权限 - 范围未传达

> ID：12161235
> 
> 赞同：9
> 
> 时间：2012-08-28T14:14:16.183
> 
> 标签：ruby-on-rails, authentication, permissions, omniauth, linkedin

LinkedIn 最近更改了他们的 API，要求第三方在他们请求的信息中更加明确。为了使用omniauth 访问用户过去的就业历史和教育，您必须传递r_fullprofile 权限令牌（之前，您不必对过去的就业或教育数据提出特定请求）。要访问用户的电子邮件地址，您需要传递 r_emailaddress 权限令牌。在有人问之前，我正在使用新的 LinkedIn API 密钥（旧密钥不受最近更改的影响）。

omn [​​iauth-linkedin gem](https://github.com/skorks/omniauth-linkedin)最近已更新，以考虑 LinkedIn 的权限更改，但我仍然在通过[身份验证流程的](https://developer.linkedin.com/documents/authentication)*所有*部分传递这个新的范围参数时遇到问题。我按照 omniauth-linkedin 自述文件中提供的说明创建我的 config/omniauth.rb 文件：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :linkedin, ENV['LINKEDIN_KEY'], ENV['LINKEDIN_SECRET'], 
  :scope => 'r_fullprofile,r_emailaddress', :fields => ['id', 'email-address', 'first-name', 'last-name', 'headline', 'industry', 'picture-url', 'public-profile-url', 'location', 'positions']
end 
```

范围似乎成功通过了身份验证的第一部分，在下面的第一个屏幕截图中可见（您的完整个人资料...您的电子邮件地址）：

![authentication_first_step](../Images/b662d4152b3ac62c9a71dd0fabaae7c2.png)

但是，在用户输入他们的凭据后，范围似乎丢失了，只有默认的“您的个人资料概览”字段被传输：

![在此处输入图像描述](../Images/c9735e4db5a15d27c2d4540eaf0cb833.png)

非常坚持这一点，并且真的可以使用一些帮助，因为我需要为我的用户提供完整的个人资料和教育数据。让我知道是否需要提供我的 auth_controller 代码。谢谢你。

# html - 在表单中标记字段：如 (*) 星号表示必填字段

> ID：12161238
> 
> 赞同：0
> 
> 时间：2012-08-28T14:14:19.460
> 
> 标签：html, winforms, forms, standards

是否有在表单（Web/Windows）中标记必填字段的标准方法。

用*（星号）标记标签是一种标准。

有哪些可用的标准？

如果是单选按钮、列表框、复选框，这是如何完成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:32:12.530

There are no standards. It's a matter of Usability - Users are used to the fact that required fields are marked somehow. Sometimes you have a `*` marking the mandatory fields, sometimes it's vice versa.

You go best by marking them e.g. with a `*` and add a note `* these fields are required`. In the end doing it according to the majority of the websites and the most influental ones (facebook,google) is porobably a good choice.

You can do this for all types of inputs regardless of it being an input field or a checkbox or radio button.

# jquery - 使用 struts2、jQuery 和 JSON 进行双重选择

> ID：12161239
> 
> 赞同：0
> 
> 时间：2012-08-28T14:14:22.503
> 
> 标签：jquery, json, select, struts2, double

我正在尝试将其`<sj:select>`用作双重选择，其中第一个选择的值应用作第二个选择的输入参数。

首先选择：

```
<s:url id="remoteurlKontor" namespace="/json" action="getKontor"/>  
<sj:select  label="Kontor" 
            href="%{remoteurlKontor}" 
            id="franKontor" 
            name="franKontor" 
            onChangeTopics="reloadsecondlist" 
            list="kontor" 
            listKey="kontorKod" 
            listValue="kodAndNamn" 
            emptyOption="true" 
            headerKey="-1" 
            headerValue="Välj kontor"
/> 
```

二次选择

```
<s:url id="remoteurlSektion" namespace="/json" action="getSektionskoder" /> 
<sj:select  label="Sektion" 
            href="%{remoteurlSektion}" 
            id="franSektion" 
            name="franSektion"
            reloadTopics="reloadsecondlist"  
            list="sektionsKoder"
            emptyOption="true" 
            headerKey="-1" 
            headerValue="Välj Sektion"
            onSelectTopics="check"
/> 
```

我希望从第一个选择中选择的值作为参数进入，`href="%{remoteurlSektion}"`因此 URL 将`/json/getSektionskoder.action?kontorskod=0515`与第二个选择中的一样。

有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:08:40.007

当然有可能。[请参阅Showcase App](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)中的示例。AJAX Form / AJAX SELECT (Doubleselect) 下有一个例子。

两个标签是否在同一个表单内？否则，您应该在第二个标签中指定 formIds 属性。

# node.js - 在保留原始错误的节点中运行 next(new Error())

> ID：12161253
> 
> 赞同：0
> 
> 时间：2012-08-28T14:14:46.120
> 
> 标签：node.js, error-handling

我正在尝试找出*完美*的方法来处理我的应用程序中的错误。我设计了一种方法（见下文），但我对丢失原始错误的事实感到困扰。

在我的代码中，我有这样的东西（这是一个中间件）：

```
exports.tokenApi = function( req, res, next, token ){

  Workspace = mongoose.model('Workspace');
  User = mongoose.model('User');

  req.application = {};
  // Find the token
  Workspace.findOne({ 'access.token': token } , function(err, doc){
    if(err){
      next( new g.errors.BadError503('Database error resolving workspace Id') );
    } else {
      if(! doc ){
        next( new g.errors.ForbiddenError403('Access denied') );
      } else {

        // The token is there and it's valid.
        // Set req.application.workspaceId, req.application.login and
        //  req.application.workspace (which contains all of the settings!)
        req.application.workspaceId = doc._id;
        req.application.workspace = doc;
        req.application.login = doc.access.filter(function(entry){ return entry.token == token;  } )[0].login;
      next();
      }
    } 
```

一个不同的文件定义了错误：

```
// Defining the BadError error type, thrown by the application itself
//
function BadError503( message ){
  this.httpError = 503;
  this.message = message || "Internal error";
  this.name = this.constructor.name;
}
util.inherits(BadError503, Error);
exports.errors.BadError503 = BadError503;

// Defining the Error error type, thrown by the application itself
//
function ForbiddenError403( message ){
  this.httpError = 403;
  this.message = message || "User not logged in";
  this.name = this.constructor.name;
}
util.inherits(ForbiddenError403, Error);
exports.errors.ForbiddenError403 = ForbiddenError403; 
```

该应用程序定义了一个错误处理程序，如下所示：

```
exports.AppErrorHandler = function( err, req, res, next){

  var user = null;
  var workspace = null;

  switch(err.name){
    case 'BadError503':
    case 'ForbiddenError403':
      Logger(null, null, 4, 'The application threw an error: ' + err.name + ', message: ' + err.message, req  );
      res.json( { message: err.message }, err.httpError );
    break; 
```

这段代码的问题是我丢失了原始错误。我有一个自定义错误处理程序，可以说“做正确的事”（参见上面的代码：通过 Ajax 返回错误），但如果我以某种方式保留实际问题的原因，我希望它。

这给我带来了一个不同的问题：这是不好的做法吗？在某种程度上，我喜欢我自己抛出错误并且可以 100% 处理它的事实（我自己编写了 Error 对象）。但是，丢失原始错误对我来说似乎是个坏主意。

我*也许*可以将原始错误传递给我创建的自定义错误对象。但是还是...

有什么想法吗？或者，我应该注意的任何标准模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T18:37:11.550

看看这篇文章：

[http://www.devthought.com/2011/12/22/a-string-is-not-an-error/](http://www.devthought.com/2011/12/22/a-string-is-not-an-error/)

它解释了如何定义自定义错误对象以正确保留堆栈跟踪等。您可以定义一个错误构造函数，该构造函数采用字符串或现有错误对象，并从原始错误中窃取所有重要信息，例如堆栈跟踪。

然后，您可以将任何错误包装在您自己的特殊情况错误中，而不会丢失任何信息。

# java - 我应该在我的适配器中为行和标题使用什么集合？

> ID：12161255
> 
> 赞同：0
> 
> 时间：2012-08-28T14:14:50.303
> 
> 标签：java, android, android-listview, android-adapter

我有一个`BaseAdapter`管理我的行的`ListView`. 所有这一切，而我一直在列表视图中显示记录，没有任何分组或标题，它运行良好。我的适配器对一组未分组的数据使用`ArrayList`and ，它工作得很好。这是它的样子：

```
public class SearchResultsAdapter extends BaseAdapter {

  public ArrayList<Result> objResults;

  public SearchResultsAdapter(Search ctxContext, ArrayList<Result> objResults) {
    this.objResults = objResults;
  }

  public View getView(int position, View convertView, ViewGroup parent) {    
    if (check whether it is a category) {    
      View v = mInflater.inflate(R.layout.category, null);

      final TextView sectionView = (TextView) v.findViewById(R.id.text);
      sectionView.setText("New Category");

      return v;    
    } else {
      View vewRow = mInflater.inflate(R.layout.row, null);

      TextView tvwName = (TextView) vewRow.findViewById(R.id.name);
      tvwName.setText(objResults.get(position).getName());

      return vewRow;    
    }    
  }

} 
```

当`getView`适配器的方法在内部被调用时，它只希望它从我的集合中返回一行`position`。

理想情况下，我可以使用 a `HashMap`，因为我可以将我的数据分组并将每个组的数据存储在地图中的一个键下，但我不能使用;尽可能`HashMap`简单地引用项目。这是合乎逻辑的。`position``ArrayList`

我见过很多应用程序`ListView`都使用 来显示标题和行，但我不明白什么集合/模式最适合这个。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:21:22.463

根据 Samir 的评论和[示例](http://samir-mangroliya.blogspot.in/2012/05/android-sectioned-listview-with-search_6865.html)：

创建`ArrayList`一个自定义接口。创建两个类 -`Row`实现`Section`该自定义接口，然后在返回 的`getView`方法中的行时`BaseAdapter`，返回正确的视图，即基于该位置列表中的对象是 a`Row`还是 a 的行或部分`Section`。

# iphone - 在 UIVIewControllers 之间隐藏一个按钮

> ID：12161258
> 
> 赞同：1
> 
> 时间：2012-08-28T14:15:04.943
> 
> 标签：iphone, ios5, sdk, views, hidden

我已经在我的 MainViewController 中声明了一个按钮，所以当用户登录时它需要显示一个按钮，`self.mybutton.hidden = FALSE;`但是在我的 ProfileViewController 上我有一个注销按钮，它需要再次使用隐藏按钮`self.mybutton.hidden = TRUE;`

在视图之间进行交流的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:23:47.847

NSUserDefaults 对您来说可能是一个简单的解决方案，无需过多考虑。将特定的 BOOL 值（如果您坚持）保存到其中，然后在每个视图中检查该值是否应该隐藏或显示该按钮：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setBool:TRUE forKey:@"checkThisBool"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:32:49.083

如果您使用故事板，则可以在 prepareForSegue 函数下传递任何信息。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
  if ([segue.identifier isEqualToString:...]) { 
    MyViewController *controller = (MyViewController *segue.destinationViewController;
    controller.myProperty1 = ...; 
    controller.myProperty2 = ...;
  }
} 
```

# c# - 设置 System.Enum 的基础值

> ID：12161259
> 
> 赞同：2
> 
> 时间：2012-08-28T14:15:06.987
> 
> 标签：c#

我有一个枚举，它是对象的成员变量。我不知道枚举的确切类型，只知道它是从`System.Enum`. 我想设置枚举的基础数值。换句话说：

```
Enum e;
// ...
e = 42;  // Doesn't comple 
```

这可能吗？可以通过反射完成吗？

编辑 1：枚举是较大数据结构的一部分，因此不适合使用 Enum.ToObject() 创建新值。

编辑 2：阐明枚举是对象的成员变量。

编辑 3：由于一些评论者要求提供更多上下文，因此总结一下：我有一些通用代码，应该将 UI 控件（文本框等）与对象数据模型中的相应字段相关联。当 UI 更改时，模型会更新，反之亦然。我正在考虑将其扩展到组合框和枚举之间的映射；其中枚举将设置为所选组合条目的索引。从枚举的基础值设置所选项目是微不足道的，但问题发生的地方恰恰相反。我相当确定这是不可能的，但我认为这值得一问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:17:43.163

请注意，实际上不可能更改对象本身的值，但您可以获得相同类型的新对象。根据您要执行的操作，这可能对您不起作用。你想做什么？

```
e = Enum.ToObject(e.GetType(),42) 
```

* * *

好的，我认为你可以在这里做的最好的事情是：

```
void SetTo42<T>(out T e) {
    e = (T)Enum.ToObject(typeof(T), e);
} 
```

不过，这是一件非常奇怪的事情，所以我不得不问你是否应该重新考虑你的设计。

* * *

好的，我要冒昧地猜测您要做什么-我假设您的“Enum e”来自使用GetValue，因此您有一个FieldInfo（或PropertyInfo）

```
void SetFieldTo42(Object obj, FieldInfo f) {
    f.SetValue(obj,Enum.ToObject(f.FieldType, 42));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:17:21.830

你需要`Type`在*运行时*知道枚举，即使你在*编译时*不知道它-`Enum`因为是一个装箱的值，为了装箱你需要访问类型的东西（这样`.GetType()`返回正确的东西） ; 例如，在运行时执行此操作：

```
public Enum GetEnumValue(Type type) {
    return (Enum)Enum.ToObject(type, 42);
} 
```

# css - 为什么 IE9 不应用带有许多选择器的 css？

> ID：12161265
> 
> 赞同：1
> 
> 时间：2012-08-28T14:15:22.987
> 
> 标签：css, internet-explorer-9

我遇到了一个特定于 IE9 的问题，需要一些帮助才能找到它的根源。我们在我们的项目中使用 SCSS，随着项目的发展，有时会出现我们有一个带有深树的文件。

这是破坏页面布局的 SCSS 构造（似乎根本没有应用此样式之后的样式）：

```
.a {
  ...
  .b {
    ...
    .c, .d, .e, .f {
      ...
      .g {
        ...
        .h {
          ... 
        }
      }
    }
  }
} 
```

删除类 .h 可以解决问题。删除类 .f 也解决了这个问题。

这种构造IE9也不喜欢：

```
.a {
  ...
  .b {
    ...
    .c, .d, .e {
      ...
      .g {
        ...
        .h {
          ... 
        }
        .i {
          ... 
        }
      }
    }
  }
} 
```

可能是什么原因？我已经检查过这个问题不取决于类名的长度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:25:15.480

谢谢大家调查。我已经解决了这个问题，同时最小化了将示例上传到 jsFiddle 的 css 文件。实际上，我们超出了每个样式表 4096 个选择器的 IE 限制，这导致了布局问题。尽管该浏览器声称具有相同的选择器限制，但我仍然不明白为什么相同的 css 文件在 IE8 中有效。

# lua - 为什么我的 lua 'class' 报告尝试索引全局对象错误？

> ID：12161266
> 
> 赞同：1
> 
> 时间：2012-08-28T14:15:24.513
> 
> 标签：lua

以下代码位于名为 object.lua 的文件中：

```
function object:new()
  local instance = {}
  setmetatable(instance, self)
  self.__index = self
  return instance
end 
```

在一个主文件中，我有：

```
local object = require("object")
local obj = object:new() 
```

报告的错误是：lua ./object.lua:1:尝试索引全局'object'（一个nil值）

第 1 行是第一个带有 'function object:new()' 的行

主要是第一行（需要）。

代码创建自： [http ://www.lua.org/pil/16.1.html](http://www.lua.org/pil/16.1.html)

编辑：

请参阅此页面： http: [//www.coronalabs.com/blog/2011/09/29/tutorial-modular-classes-in-corona/](http://www.coronalabs.com/blog/2011/09/29/tutorial-modular-classes-in-corona/)

然后搜索“詹姆斯”，这将是第一个评论帖子，你可以看到我正在尝试做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T13:58:56.687

这里的问题是，当 object.lua 中的代码运行并且您尝试创建 object:new 函数时，没有可以在其中创建它的对象表。

Dogbert 的解决方案在该 object.lua 中工作正常，在使用它之前创建对象表。但是，它通过显式创建一个全局变量然后期望调用者发现这不是最佳解决方案来做到这一点。Nicol Bolas 提供的修改后的解决方案……在 object.lua 中创建一个本地对象并返回它是此类任务更普遍认可的模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:21:25.453

这对我有用：

主程序.lua

```
require("object")
local obj = object:new() 
```

对象.lua

```
object = {}

function object:new()
    local instance = {}
    setmetatable(instance, self)
    self.__index = self
    return instance
end 
```

您在 object.lua 中声明了一个全局“对象”，而不是返回它，所以您只需要这样做`require("object")`

# jquery - jQuery 不加载 IE9 - 标准？

> ID：12161267
> 
> 赞同：1
> 
> 时间：2012-08-28T14:15:28.370
> 
> 标签：jquery, html, xhtml, internet-explorer-9, doctype

有一个网站运行良好，但最近在 IE9 中它停止运行。jQuery 不加载。到现在为止一直很好。

但是任何需要 jQuery 的东西都不会加载，例如下拉菜单、简易滑块、颜色框。

当我查看开发人员工具时，它会在控制台中显示：

```
HTML1113: Document mode restart from IE9 Standards to Quirks 
local.domain.com

HTML1113: Document mode restart from Quirks to IE9 Standards 
local.domain.com

HTML1201: chinacraftireland.com is a website you've added to Compatibility View. 
local.domain.com

HTML1113: Document mode restart from IE9 Standards to Quirks 
local.domain.com

HTML1113: Document mode restart from Quirks to IE9 Standards 
local.domain.com 
```

我已经更改了 DocType，但似乎没有任何区别。

是什么原因造成的？它工作正常，IE9有更新吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:20:59.367

嗯。如果您选中了“兼容性视图”按钮，请取消选中它。

[IE 兼容性视图](http://blogs.msdn.com/b/ie/archive/2008/08/27/introducing-compatibility-view.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-19T15:58:19.237

首先把它放在你的头部。将 DOCTYPE 添加到您的 html[更多关于 DOCTYPE](https://hsivonen.fi/doctype/)

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-18T12:50:52.713

刚看了一下，是来自推特的脚本导致了这个问题。当他们被禁用时，一切正常。

# python - 我可以在 Django 1.3 中使 STATICFILES_DIR 与 STATIC_ROOT 相同吗？

> ID：12161271
> 
> 赞同：45
> 
> 时间：2012-08-28T14:15:47.717
> 
> 标签：python, django, django-views, django-staticfiles

我正在使用 Django 1.3，我意识到它有一个**collectstatic**命令可以将静态文件收集到**STATIC_ROOT**中。在这里，我还有一些需要使用**STATICFILES_DIR**提供的其他全局文件。

我可以让他们使用相同的目录吗？

谢谢。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-08-28T14:22:18.363

不。事实上，该文件`django/contrib/staticfiles/finders.py`甚至会对此进行检查，并`ImproperlyConfigured`在您这样做时引发异常：

> “STATICFILES_DIRS 设置不应包含 STATIC_ROOT 设置”

可以包含带有静态文件的`STATICFILES_DIRS`其他目录（不一定是应用程序目录），并且这些静态文件将`STATIC_ROOT`在您运行时收集到您的*collectstatic*中。然后，这些静态文件将由您的 Web 服务器提供，它们将从您的`STATIC_ROOT`.

如果您当前有要提供的文件`STATIC_ROOT`，那么您需要将这些文件移动到不同的目录并将该其他目录放入`STATICFILES_DIRS`. 您的`STATIC_ROOT`目录应该是空的，并且所有静态文件都应该收集到该目录中（即，它不应该已经包含静态文件）。

# xml - solr 索引嵌套文档

> ID：12161275
> 
> 赞同：1
> 
> 时间：2012-08-28T14:15:52.830
> 
> 标签：xml, solr, indexing

solr 是否支持嵌套文档？有没有更好的方法来实现这种文档？

```
<doc>
    <field name="name">Mr. Test</field>
    <field name="case">
        <field name="link">http://foo.com</field>
        <field name="date">1-2-1234</filed>
        <field name="title">My title</filed>
    </field>
    <field name="case">
        <field name="link">http://foo.com/2/</field>
        <field name="date">1-2-1234</filed>
        <field name="title">My title 2</filed>
    </field>
</doc> 
```

我所拥有的是一个参与过多个案件的人。这种形式的模式对于 solr 是否合法？不同的人也可以是同一案件的一部分。所以它看起来确实像一个关系数据库的任务，但我在这个项目中使用了 solr。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-12T11:44:17.760

较新版本的 Solr 提供对嵌套文档的支持

索引这个 Json

```
[
  {
    "id": "1",
    "title": "Solr adds block join support",
    "content_type": "parentDocument",
    "_childDocuments_": [
      {
        "id": "2",
        "comments": "SolrCloud supports it too!"
      }
    ]
  },
  {
    "id": "3",
    "title": "Lucene and Solr 4.5 is out",
    "content_type": "parentDocument",
    "_childDocuments_": [
      {
        "id": "4",
        "comments": "Lots of new features"
      }
    ]
  }
] 
```

在 schema.xml 中，您必须添加此处使用的所有字段，即“title”、“content_type”、“comments”。参数“ *childDocuments* ”是 solr 处理的参数，它通过它理解这是一个子文档，“content_type”：“parentDocument”是 solr 的标识符，用于理解这是父文档。如果我们查询，在索引这个 Json 之后

```
"*":"*" 
```

我们应该总共看到 4 个文件。[现在我们可以在Block 和 join 查询解析器](https://cwiki.apache.org/confluence/display/solr/Other+Parsers#OtherParsers-BlockJoinQueryParsers)的帮助下获取父文档或子文档。试试这个查询

```
http://localhost:8983/solr/collection_test/select?q={!child%20of=%22content_type:parentDocument%22}title:lucene 
```

和这个

```
http://localhost:8983/solr/collection_test/select?q={!parent%20which=%22content_type:parentDocument%22}comments:SolrCloud 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T14:56:39.257

不，Solr 不支持这种嵌套结构。也看看[这个其他问题](https://stackoverflow.com/questions/5584857/solr-documents-with-child-elements)。

# java - 如何围绕某个点旋转顶点？

> ID：12161277
> 
> 赞同：60
> 
> 时间：2012-08-28T14:16:05.457
> 
> 标签：java, math, geometry

想象一下，您在 2d 空间中有两个点，您需要将其中一个点旋转 X 度，另一个点作为中心。

```
float distX = Math.abs( centerX -point2X );
float distY = Math.abs( centerY -point2Y );

float dist = FloatMath.sqrt( distX*distX + distY*distY ); 
```

到目前为止，我只是要找到两点之间的距离......我应该从哪里开始？

![在此处输入图像描述](../Images/d763d4fa9e60dddd8fa6e9d921f388b9.png)

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-08-28T14:22:12.970

最简单的方法是组合三个转换：

1.  将点 1 带到原点的翻译
2.  绕原点旋转所需角度
3.  将点 1 带回其原始位置的翻译

当你完成这一切时，你最终会得到以下变换（`x`以弧度为单位的所需旋转角度在哪里）：

```
newX = centerX + (point2x-centerX)*Math.cos(x) - (point2y-centerY)*Math.sin(x);

newY = centerY + (point2x-centerX)*Math.sin(x) + (point2y-centerY)*Math.cos(x); 
```

请注意，这假设`x`顺时针旋转的角度为负（坐标系的所谓[标准或右手方向](https://en.wikipedia.org/wiki/Cartesian_coordinate_system#Orientation_and_handedness)）。如果不是这种情况，那么您需要反转涉及`sin(x)`.

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-28T14:23:11.730

你需要一个二维旋转矩阵[http://en.wikipedia.org/wiki/Rotation_matrix](http://en.wikipedia.org/wiki/Rotation_matrix)

你的新观点是

```
 newX = centerX + ( cosX * (point2X-centerX) + sinX * (point2Y -centerY))
 newY = centerY + ( -sinX * (point2X-centerX) + cosX * (point2Y -centerY)) 
```

因为你是顺时针而不是逆时针旋转

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-28T14:24:44.080

假设您正在使用 Java Graphics2D API，请尝试以下代码 -

```
 Point2D result = new Point2D.Double();
    AffineTransform rotation = new AffineTransform();
    double angleInRadians = (angle * Math.PI / 180);
    rotation.rotate(angleInRadians, pivot.getX(), pivot.getY());
    rotation.transform(point, result);
    return result; 
```

其中枢轴是您旋转的点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-28T14:22:30.783

1.  将“1”转换为 0,0

2.  旋转

    x = sin(角度) * r; y = cos(角度) * r;

3.  翻译回来

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-31T08:48:41.103

这是一个关心旋转方向的版本。右（顺时针）为负，左（逆时针）为正。您可以发送一个点或二维向量并在此方法（最后一行）中设置其基元，以避免为性能分配内存。您可能需要将 vector2 和 mathutils 替换为您使用的库或 java 的内置点类，您可以使用 math.toradians() 代替 mathutils。

```
/**
 * rotates the point around a center and returns the new point
 * @param cx x coordinate of the center
 * @param cy y coordinate of the center
 * @param angle in degrees (sign determines the direction + is counter-clockwise - is clockwise)
 * @param px x coordinate of point to rotate 
 * @param py y coordinate of point to rotate 
 * */

public static Vector2 rotate_point(float cx,float cy,float angle,float px,float py){
    float absangl=Math.abs(angle);
    float s = MathUtils.sin(absangl * MathUtils.degreesToRadians);
    float c = MathUtils.cos(absangl * MathUtils.degreesToRadians);

    // translate point back to origin:
    px -= cx;
    py -= cy;

    // rotate point
    float xnew;
    float ynew;
    if (angle > 0) {
        xnew = px * c - py * s;
        ynew = px * s + py * c;
    }
    else {
        xnew = px * c + py * s;
        ynew = -px * s + py * c;
    }

    // translate point back:
    px = xnew + cx;
    py = ynew + cy;
    return new Vector2(px, py);
} 
```

请注意，这种方式比您在帖子中尝试的方式具有更高的性能。因为您使用的 sqrt 非常昂贵，并且如果您想知道的话，可以通过查找表将角度转换为弧度。因此它具有非常高的性能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-07T18:12:10.007

这是一种在 2D 中围绕任何其他点旋转任何点的方法。请注意，在 3D 中，这可以用作围绕 z 轴的旋转，因为它不会改变，所以被输入点的 z 坐标。也可以轻松实现 3D 中围绕 x 轴和 y 轴的旋转。

代码在 JavaScript 中。开头的注释行是该功能的测试集。它们也可作为使用示例。

```
//A = new Array(0,0)
//S = new Array(-1,0)
//fi = 90
//alert("rotujBod: " + rotatePoint(A, S, fi))

function rotatePoint(A, S, fi) {
/** IN points A - rotated point, S - centre, fi - angle of rotation (rad)
*    points in format  [Ax, Ay, Az], angle fi (float)
*       OUT point B
*/
    r = Math.sqrt((A[0] - S[0])*(A[0] - S[0]) + (A[1] - S[1])*(A[1] - S[1]))
    originOfRotation = new Array(S[0] + r, S[1])
    if (A[1] < S[1]) {
        A2 = new Array(A[0], -1*A[1])
        originalAngle = -1*sizeOfAngle(originOfRotation, S, A2)
    } else {
    originalAngle = sizeOfAngle(originOfRotation, S, A)
    }
    x = S[0] + r*Math.cos(fi + originalAngle)
    y = S[1] + r*Math.sin(fi + originalAngle)
    B = new Array(x, y)
    return(B)
}

function sizeOfAngle(A, S, B) {
    ux = A[0] - S[0]
    uy = A[1] - S[1]
    vx = B[0] - S[0]
    vy = B[1] - S[1]
    if((Math.sqrt(ux*ux + uy*uy)*Math.sqrt(vx*vx + vy*vy)) == 0) {return 0}
    return Math.acos((ux*vx + uy*vy)/(Math.sqrt(ux*ux + uy*uy)*Math.sqrt(vx*vx + vy*vy)))
} 
```

# android - 带有可点击复选框和容器的 ListView 项目

> ID：12161286
> 
> 赞同：1
> 
> 时间：2012-08-28T14:16:26.517
> 
> 标签：android, listview, android-listview

# 问题

我想创建一个类似于股票 gmail 应用程序的 ListView。我在左边有一个 CheckBox，在右边有两个 TextView。我可以选择复选框，但不能选择布局的其余部分。我想选择复选框来激活上下文操作栏，但原始的其余部分应该启动另一个活动（侦听器的两个不同操作）。我的列表项如下所示： ![在此处输入图像描述](../Images/419a321d4ed0e102162ec07bd8edda31.png)

# 问题

如何创建列表项，列表项的不同区域会触发不同的操作？

# 代码

列表项布局：

```
<merge xmlns:android="http://schemas.android.com/apk/res/android" >
<CheckBox
    android:id="@+id/checkbox"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:focusable="false" />

<TextView
    android:id="@+id/amount"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:gravity="right" />

<TextView
    android:id="@+id/title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="8dp"
    android:layout_toRightOf="@+id/checkbox" />
</merge> 
```

列表项本身：

```
<?xml version="1.0" encoding="utf-8"?>
<hu.gulyasm.fintrac.ui.TransactionItem xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/list_item_root"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:clickable="true"
   android:padding="24dp" /> 
```

最后是我`getView()`在适配器中的方法，以及`onClickListener`：

```
@Override
public void onClick(View v) {
    if (v.getId() == R.id.checkbox) {
        Toast.makeText(getActivity(), "Checkbox pressed", Toast.LENGTH_SHORT).show();
    } else {
        Toast.makeText(getActivity(), "Item pressed", Toast.LENGTH_SHORT).show();
    }
}

@Override
public View newView(Context arg0, Cursor arg1, ViewGroup arg2) {
    LayoutInflater layoutInflater = getActivity().getLayoutInflater();
    TransactionItem view = (TransactionItem) layoutInflater.inflate(R.layout.list_item, arg2, false);
    view.setOnClickListener(TransactionListFragment.this);
    // View checkBox = view.findViewById(R.id.checkbox);
    // checkBox.setOnClickListener(TransactionListFragment.this);
    bindToExistingView(view, arg1);
    return view;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:37:56.060

在复选框上试试这个组合：

```
 android:focusable="false"
    android:focusableInTouchMode="false" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:44:11.043

您可以为您的,为in设置`onClick`事件。并记住禁用对可点击项目的关注，例如和。这是[Cyril Mottier](http://android.cyrilmottier.com/)的两篇非常详细的博客文章。他们解释了详细步骤以及如何解决问题。您的问题通过自定义 Button 和 CheckBox部分解决。`Button``onCheckedChange``CheckBox``getView``Button``CheckBox``Don’t press everything!`

```
 package com.cyrilmottier.android.listviewtipsandtricks.widget;

import android.content.Context;
import android.util.AttributeSet;
import android.view.View;
import android.widget.Button;

public class DontPressWithParentButton extends Button {

    public DontPressWithParentButton(Context context) {
        super(context);
    }

    public DontPressWithParentButton(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public DontPressWithParentButton(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    public void setPressed(boolean pressed) {
        if (pressed && getParent() instanceof View && ((View) getParent()).isPressed()) {
            return;
        }
        super.setPressed(pressed);
    }

} 
```

[ListView 提示和技巧#4：添加几个可点击区域](http://android.cyrilmottier.com/?p=525)

[ListView 提示和技巧 #5：扩大可触摸区域](http://android.cyrilmottier.com/?p=574)

# blackberry - 在不向cordova.jar添加源代码的情况下开发blackberry webworks phonegap插件

> ID：12161290
> 
> 赞同：1
> 
> 时间：2012-08-28T14:16:42.600
> 
> 标签：blackberry, cordova, phonegap-plugins, blackberry-webworks, cordova-2.0.0

我需要为 blackberry webworks phonegap 开发插件。但我不想将我的插件源文件添加到cordova.jar。我想创建另一个 jar 并将其放入我的项目中 www 文件夹中的某个位置。

可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T19:07:12.220

In my experience with Phonegap/Cordova you must place your plugin within their JAR file. It goes against their standard implementation to add a plugin any other way, and I imagine you'd have a world of trouble getting it to work properly otherwise.

I've never seen it done any other way personally. Can I ask why you wouldn't want to add your plugin to their JAR???

-Chad

# mysql - 使用变量时的 Wordpress 数据库查询 ($wpdb) 错误

> ID：12161291
> 
> 赞同：2
> 
> 时间：2012-08-28T14:16:50.020
> 
> 标签：mysql, wordpress

我在 WordPress MultiSite 上有一个名为“ihn_2_frm_item_metas”的自定义 WordPress 表，用于表单条目。

数据库表截图在这里：[https ://www.dropbox.com/s/ex54qxxohkexg5t/mysql.png](https://www.dropbox.com/s/ex54qxxohkexg5t/mysql.png)

现在，有两个条目。每个条目都有自己唯一的“item_id”（在这种情况下，Bob Marley 的条目的 id 为 10，而 Molly Dolly 的条目的 id 为 9）。这些条目也对应于实际的 WordPress 用户（他们的用户名是他们的电子邮件地址，他们的密码是“test”）。条目 ID 与他们的 WordPress 用户 ID 不同。

我已使用密码“test”以“bob@marley.com”身份登录。

在博客的主页上，我只想为当前登录的用户显示“meta_value”列中的所有项目。

我想分两步做到这一点：

1.  查找当前登录用户的电子邮件地址 ("bob@marley.com")。
2.  在匹配的电子邮件地址的同一行中找到该用户的表单条目 (10) 的“item_id”。

这是我想出的代码：

```
 global $wpdb;
    global $current_user;
    get_currentuserinfo();
    $email = $current_user->user_email;

    $id = $wpdb->get_var( " SELECT item_id FROM ihn_2_frm_item_metas WHERE meta_value = $email " );
    $client_meta = $wpdb->get_results(" SELECT * FROM ihn_2_frm_item_metas WHERE item_id = $id " );

    echo '<p> $email is a ' . gettype($email) . '</p>';
    echo '<p> $id is a ' . gettype($id) . '</p>';
    echo '<p>The current logged in user is ' . $email . '.</p>';
    echo '<p>The current form entry id is ' . $id . '.</p>';
    echo "<ul>";

    foreach ($client_meta as $value) {
        echo '<li>' . $value->meta_value . '</li>';
    }

    echo "</ul>"; 
```

我有两个`gettype()`语句只是为了确认我的两个变量`$email`和`$id`都是字符串。

这是我的代码的输出：

> $email 是一个字符串。
> 
> $id 是 NULL。
> 
> 当前登录的用户是 bob@marley.com。
> 
> 当前的表单条目 id 是 .

注意`$id`是`NULL`. 让我感到困惑的是，当我将`$id`变量更改为此（用`$email`“bob@marley.com”替换变量）时：

```
$id = $wpdb->get_var( " SELECT item_id FROM ihn_2_frm_item_metas WHERE meta_value = 'bob@marley.com' " ); 
```

我的输出正是我所需要的：

> $email 是一个字符串。
> 
> $id 是一个字符串。
> 
> 当前登录的用户是 bob@marley.com。
> 
> 当前表单条目 ID 为 10。
> 
> *   鲍勃
> *   马利
> *   bob@marley.com
> *   测试
> *   8

我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:20:45.163

您在 上省略了单引号`$email`：

```
$id = $wpdb->get_var( " SELECT item_id FROM ihn_2_frm_item_metas WHERE meta_value = '$email' " );
//---------------------------------------------------------------------------------^^^^^^^^ 
```

这会导致查询中出现语法错误。我不熟悉 WordPress 如何处理这些错误，但它会返回`NULL`不成功的查询。

如果除了在后续查询中使用它之外，您实际上不需要知道`item_id`other 的值，我想您可以使用子查询将它们组合成一个语句`IN()`：

```
$client_meta = $wpdb->get_results("
  SELECT * FROM ihn_2_frm_item_metas WHERE item_id IN (
    SELECT item_id FROM ihn_2_frm_item_metas WHERE meta_value = '$email'
  )
"); 
```

# wso2 - WSO2 WSF/CPP 是否已针对 NVD 数据库进行预强化或检查？

> ID：12161292
> 
> 赞同：1
> 
> 时间：2012-08-28T14:16:53.953
> 
> 标签：wso2, wsh

我们正在准备将我们的产品部署给我们的客户，目前正在经历强化过程。谁能告诉我 WSO2 WSF/CPP 是否已针对 [NVD](http://nvd.nist.gov/) 数据库进行了强化或检查？

谢谢您的帮助

尤金

# php - 如何从单选中获取两个值

> ID：12161296
> 
> 赞同：0
> 
> 时间：2012-08-28T14:17:07.370
> 
> 标签：php, javascript, jquery, ajax

嗨，正如标题所暗示的那样，我试图从一个选择元素中获取两个值。

我已经准备好设置的是两个选择元素，在选择第一个选择后过滤第二个，第二个有超过 16000 个项目要过滤，我想我可能需要更好的方法来整合它，但无论如何我需要从选择中获取显示的名称和值，并创建第二个变量来保存该值。

从顶部开始，这是过滤值的脚本，如果有人可以将我指向一个好的 ajax tut 的方向来设置所有这些，我会很高兴这是我的 js

```
<script type="text/javascript">
//<![CDATA[
jQuery.fn.filterOn = function(selectFrom, values) {
    return this.each(function() {
        var select = this;
        var options = {};
$(select).find('option').each(function() {
    var $o = $(this), title = $o.attr('title');
    if (options.hasOwnProperty(title) === false) {
        options[title] = [];
    }
    options[title].push({ 'text': $o.text(), 'value': $o.val() });
});
$(select).data('options', options);
        console.log(selectFrom);
       $(selectFrom).change(function() {
    var $select = $(select),
        options = $select.empty().data('options')[$(this).val()];
    // options is now just an array of objects with value and text properties, so:
    $.each(options, function () {
        $('<option value="' + this.value + '">' + this.text + '</option>').appendTo($select);
    });
  }); 
  });
};

$(function() {
    $('#city').filterOn('#country', {
        'default': [],
        'LK':['LK'],'SY':['SY'],'KE':['KE'],'KH':['KH'],'MN':['MN'],'SN':['SN'],'JO':['JO'],'SE':['SE'],'GB':['GB'],'AT':['AT'],'IL':['IL'],'PY':['PY'],'JM':['JM'],'MX':['MX'],'CL':['CL'],'CA':['CA'],'BG':['BG'],'MC':['MC'],'PR':['PR'],'LB':['LB'],'EC':['EC'],'PW':['PW'],'GU':['GU'],'MK':['MK'],'RE':['RE'],'BW':['BW'],'LY':['LY'],'TG':['TG'],'TH':['TH'],'MY':['MY'],'ES':['ES'],'DK':['DK'],'DO':['DO'],'BZ':['BZ'],'NI':['NI'],'VE':['VE'],'LV':['LV'],'AZ':['AZ'],'MD':['MD'],'AE':['AE'],'MT':['MT'],'SZ':['SZ'],'YE':['YE'],'SV':['SV'],'MW':['MW'],'GF':['GF'],'BD':['BD'],'LI':['LI'],'SM':['SM'],'BY':['BY'],'MZ':['MZ'],'IR':['IR'],'PK':['PK'],'RU':['RU'],'MU':['MU'],'TW':['TW'],'PT':['PT'],'NG':['NG'],'GR':['GR'],'CH':['CH'],'KW':['KW'],'LU':['LU'],'CZ':['CZ'],'HR':['HR'],'AR':['AR'],'EG':['EG'],'CR':['CR'],'US':['US'],'LT':['LT'],'KZ':['KZ'],'RS':['RS'],'EE':['EE'],'SG':['SG'],'FM':['FM'],'AL':['AL'],'ML':['ML'],'UG':['UG'],'ZA':['ZA'],'MM':['MM'],'AU':['AU'],'FJ':['FJ'],'IT':['IT'],'AD':['AD'],'NO':['NO'],'BR':['BR'],'UY':['UY'],'GT':['GT'],'PF':['PF'],'SC':['SC'],'BB':['BB'],'ME':['ME'],'LA':['LA'],'CK':['CK'],'KY':['KY'],'GA':['GA'],'SA':['SA'],'VN':['VN'],'PH':['PH'],'KR':['KR'],'JP':['JP'],'VU':['VU'],'NZ':['NZ'],'TN':['TN'],'IE':['IE'],'SI':['SI'],'SR':['SR'],'FI':['FI'],'AW':['AW'],'NP':['NP'],'FO':['FO'],'SD':['SD'],'ID':['ID'],'CN':['CN'],'MV':['MV'],'UZ':['UZ'],'HK':['HK'],'DZ':['DZ'],'DE':['DE'],'OM':['OM'],'FR':['FR'],'SK':['SK'],'PL':['PL'],'BS':['BS'],'GP':['GP'],'CO':['CO'],'BO':['BO'],'UA':['UA'],'AN':['AN'],'TO':['TO'],'GE':['GE'],'ET':['ET'],'BM':['BM'],'CY':['CY'],'GM':['GM'],'MA':['MA'],'HU':['HU'],'HN':['HN'],'PE':['PE'],'RO':['RO'],'AM':['AM'],'NC':['NC'],'ZM':['ZM'],'IN':['IN'],'TZ':['TZ'],'NL':['NL'],'BE':['BE'],'TR':['TR'],'NA':['NA'],'GD':['GD'],'QA':['QA'],'IS':['IS'],'BH':['BH'],'ZW':['ZW'],'GI':['GI'],'CM':['CM']
    });
});

 //]]>
</script> 
```

然后我有两个选择，它们是用数据库表中的 php 构建的

```
<select id="country" name="country">
 <option value="">---------</option>
 <option value="LK">Sri Lanka</option>
 <option value="SY">Syria</option>
 <option value="KE">Kenya</option>
 <option value="KH">Cambodia</option>
 <option value="MN">Mongolia</option>     
 <option value="SN">Senegal</option>
 <option value="PY">Paraguay</option>
 <option value="SE">Sweden</option>
</select>

<select id="city" name="city">
  <option value="3439389">Asuncion</option>
  <option value="3439352">Bella Vista</option>
  <option value="3439101">Ciudad Del Este</option>
  <option value="3438735">Encarnacion</option>
</select> 
```

基本上，这一切都是通过页面传递的，这就是查询的样子：

```
&country=PY  &city=3439101 
```

我需要做的是创建另一个名为 citycode 的变量并为其提供城市编号并将显示的文本用作城市值，因此它看起来像这样

```
&country=PY &city=Ciudad Del Este  &citycode=3439101 
```

但是如何创建字段 &citycode 并将 html 选项文本作为值分配给 city 变量？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:21:02.833

```
$('#country option:selected').val(); // returns LK
$('#country option:selected').text(); // returns Sri Lanka

$('#city option:selected').val(); // returns 3439389
$('#city option:selected').text(); // returns Asuncion 
```

有了这些知识，您[可以将隐藏的输入添加到 POST/GET 请求](https://stackoverflow.com/questions/2530635/jquery-add-additional-parameters-on-submit-not-ajax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:21:49.847

您最好的选择可能是创建一个名为的隐藏文件`city`，您可以在城市上使用 jQuery onchange 事件`select`将值填充到其中。然后，您需要将您的`city`选择的名称更改为`citycode`.

# iphone - 如何在iphone sdk中截取UIImageView的截图

> ID：12161298
> 
> 赞同：-1
> 
> 时间：2012-08-28T14:17:12.017
> 
> 标签：iphone

我想截取一个图像视图的屏幕截图。并将该屏幕截图设置为另一个图像视图中的图像。我在这个过程中受到了打击。请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T14:23:07.283

```
UIGraphicsBeginImageContext(imageView.frame.size);
 [imageView.layer renderInContext:UIGraphicsGetCurrentContext()];
 UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
 UIGraphicsEndImageContext();
yourSecondImageView.image = viewImage; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T14:19:10.790

您应该获取您拥有的 UIImageView 的 UIImage 属性，并将其分配给您想要的其他图像视图。

# linux - Linux下将AT命令重定向到microcom命令

> ID：12161301
> 
> 赞同：8
> 
> 时间：2012-08-28T14:17:17.843
> 
> 标签：linux, redirect, pipe, stdin, tty

在Linux 的命令中存在`BusyBox` [与](http://en.wikipedia.org/wiki/BusyBox)`microcom`串行调制解调器通信的命令：

```
BusyBox v1.13.2 (2012-05-10 17:13:08 CEST) multi-call binary

Usage: microcom [-d DELAY] [-t TIMEOUT] [-s SPEED] [-X] TTY

Copy bytes for stdin to TTY and from TTY to stdout

Options:    
        -d  Wait up to DELAY ms for TTY output before sending every next byte to it
        -t  Exit if both stdin and TTY are silent for TIMEOUT ms
        -s  Set serial line to SPEED
        -X  Disable special meaning of NUL and Ctrl-X from stdin 
```

我不想使用标准输入键入 AT 命令，而是将它们放入一个文本文件中，并将该文件的内容重定向为上述命令的标准输入。例如，我有一个文件

```
/tmp/at.txt 
```

使用 AT 命令`AT`，通常由 TTY 使用`OK`. 使用标准输入的标准会话如下所示：

```
microcom -t 3000 -X /dev/ttyS5                                 
at
OK 
```

其中字符串`at`是直接在键盘上输入的。为了使用文件的内容`/tmp/at.txt`（只包含'at\n'）。去做这个，。我尝试了以下变体：

```
microcom -t 3000 -X /dev/ttyS5  < /tmp/at.txt   
microcom -t 3000 /dev/ttyS5  < /tmp/at.txt 
cat /tmp/at.txt |  microcom -t 3000 /dev/ttyS5
tail -f  /tmp/at.txt |  microcom -t 3000 /dev/ttyS5
cat /tmp/at.txt |  microcom -t 3000 /dev/ttyS5 -X
tail -f  /tmp/at.txt |  microcom -t 3000 /dev/ttyS5 -X 
```

并且它们都不起作用，即这些命令都没有在屏幕上返回文本“OK”。因此，我得出结论，将文件内容重定向`/tmp/at.txt`为命令的标准输入存在一些问题`microcom`。也许与如何解释行尾或文件结尾有关。如果有人有一些想法，我将不胜感激。

谢谢，

亚历克斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-09-15T11:02:21.580

您需要以特殊字符**\r结束****AT COMMANDS**

 **```
echo "AT+CIMI\r" | microcom -t 2000 /dev/ttyS5 
```

使用**\n**它不起作用

问候

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-06T14:02:29.437

我在 SliTaz 4.0 下的 BusyBox v1.18.4 中运行 microcom，我复制了问题然后解决了它。如果您要在此级别模拟键盘输入，则 takefile 必须在每一行之后都有一个完整的 CRLF，因为键盘键传输一个 ^M (0x0D)。大多数 ASCII 编辑器编写的 Linux 标准 0x0A 是不够的。

有很多方法可以做到这一点，但我只是在每行末尾创建了一个额外的字节，然后使用 ncurses-hexedit 程序将字节转换为 0x0D。我测试了上述命令并得到了从此类文件中获取的输入的 OK 响应。

希望这可以帮助。**

# java - Java - 替换多个字符

> ID：12161307
> 
> 赞同：0
> 
> 时间：2012-08-28T14:17:28.620
> 
> 标签：java, string, replace

> **可能重复：**
> [将符号、重音字母转换为英文字母](https://stackoverflow.com/questions/1008802/converting-symbols-accent-letters-to-english-alphabet)

我不是 Java 程序员，我想用非特殊字符替换特殊字符。我正在做的是`myString.toLowerCase().replace('ã','a').replace('é','a').replace('é','e')...`，但我确信必须有一种更简单的方法来做到这一点。

我曾经使用 PHP，它有这个[str_replace](http://www.php.net/manual/en/function.str-replace.php)函数

```
// Provides: You should eat pizza, beer, and ice cream every day
$phrase  = "You should eat fruits, vegetables, and fiber every day.";
$healthy = array("fruits", "vegetables", "fiber");
$yummy   = array("pizza", "beer", "ice cream");

$newphrase = str_replace($healthy, $yummy, $phrase); 
```

Java中有类似的东西吗？或者至少比`replace`对我想替换的每个字符都使用 a 更容易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:24:50.263

我不认为 JDK 附带了与数组等效的 str_replace，但如果您发现它更方便，您可以轻松地自己创建它：

```
public static String strReplace(String[] from, String[] to, String s){
  for(int i=0; i<from.length; i++){
    s = s.replaceAll(from[i], to[i]);
  }
  return s;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:22:28.157

我很长时间没有使用 Java，但你总是可以使用一系列替换（任何语言）......

```
char[] specials = "ãéé".toCharArray();
char[] replacements = "aee";
for (int i = 0; i < specials.length; i++) {
    myString.replaceAll(specials[i], replacements[i]);
} 
```

# java - Java 不可变队列

> ID：12161317
> 
> 赞同：0
> 
> 时间：2012-08-28T14:17:59.250
> 
> 标签：java, immutability

在下面的代码中，我有两个链表 liperm 和 litemp。我想先用 liperm 的值初始化 litemp，然后再添加其他值。但它不起作用，因为它没有初始化它们。你能帮忙吗：

```
public class ExamImmutableQueueImpl<E> implements ExamImmutableQueue<E> {

   LinkedList<E> liperm = new LinkedList<E>();
   LinkedList<E> litemp = new LinkedList<E>(liperm);

   public ExamImmutableQueueImpl(LinkedList li){
       System.out.println(li.toString());
   }

   public ExamImmutableQueueImpl(){}

@Override
   public ExamImmutableQueue<E> enqueue(E e) {
       System.out.println(litemp.toString());
       litemp.add(e);

       return new ExamImmutableQueueImpl<>(litemp);
   }

   public final void setQueue(E e){
       liperm.add(e);

   }

   public void getQueue(){
       System.out.println(litemp.toString());
   }

} 
```

主要方法是：

```
public static void main(String args[]){
    ExamImmutableQueueImpl<Integer> o1 = new ExamImmutableQueueImpl<Integer>();
    ExamImmutableQueue<Integer> obj;
    o1.setQueue(2);
    o1.setQueue(1);
    o1.setQueue(2);
    o1.setQueue(3);
    obj = o1.enqueue(6); 
```

接口是：

```
public interface ExamImmutableQueue<E> {
public ExamImmutableQueue<E> enqueue(E e);} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T14:59:34.673

我将首先给你一个建议：把这段代码放在一边，重新开始。在设计层面上似乎有什么问题：

*   你不太明白什么是不可变对象。再读一遍。不可变意味着对象状态在构造后永远不会改变。
*   您有几个公共方法，其中接口中的合同只是“入队”。
*   你倾向于让方法做他们不期望做的事情。只打印的构造函数， `setQueue`它不设置任何队列。至少仔细选择你的名字。

方向：

*   `litemp`不应该是类字段。也许不应该存在。
*   您需要对象内的最终字段。尤其是收藏`liperm`
*   在构造函数中构造你的对象。什么都不做的构造函数可能没有它的位置
*   你知道元素`E`是可变的还是不可变的？这对您可以做的事情有所不同。
*   重点落实`enqueue`。为了让事情变得更好，您还可以将[Queue](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Queue.html)作为接口。

注意：不可变队列对我来说似乎没有意义（考虑到***理论上***的队列）。在开始实施之前再次询问这个集合的用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-24T03:15:48.593

这是来自 Github 的 ImmutableQueue 的实现。
访问[https://github.com/guptaAbhishek/ImmutableQueue](https://github.com/guptaAbhishek/ImmutableQueue)

```
package com.liuhao.DataStructures;

import java.util.NoSuchElementException;

public class ImmutableQueue<E> {
    private static class ImmutableStack<E> {

        private E head; // head is an object of generic type E
        private ImmutableStack<E> tail; // tail is an ImmutableStack object
        private int size; // size of the stack

        /**
         * Default constructor head to null, tail to null, size to 0
         * */
        private ImmutableStack() {
            this.head = null;
            this.tail = null;
            this.size = 0;
        }

        /**
         * Constructor Overloading (E Object, ImmutableStack object tail) head
         * is object tail is tail (ImmutableStack object) size = size of the
         * tail+1
         * */
        private ImmutableStack(E obj, ImmutableStack<E> tail) {
            this.head = obj;
            this.tail = tail;
            this.size = tail.size + 1;
        }

        /**
         * Emptying the stack returning the ImmutableStack
         * */
        public static ImmutableStack emptyStack() {
            return new ImmutableStack();
        }

        /**
         * Checking if stack is empty with their size
         * 
         * @return true of false if Stack is empty or not
         * */
        public boolean isEmpty() {
            return this.size == 0;
        }

        /**
         * Push into the stack
         * 
         * @param E
         *            object
         * @return ImmutableStack with object
         * */
        public ImmutableStack<E> push(E obj) {
            return new ImmutableStack<E>(obj, this);
        }

        /**
         * Take stack object and push the head of the tail stack to the stack do
         * this until the stack is empty
         * 
         * @return reverse stack
         * */
        public ImmutableStack<E> toReverseStack() {
            ImmutableStack<E> stack = new ImmutableStack<E>();
            ImmutableStack<E> tail = this;
            while (!tail.isEmpty()) {
                stack = stack.push(tail.head);
                tail = tail.tail;
            }
            return stack;
        }
    }

    /**
     * Two stack for enqueue and dequeue the element from the queue order for
     * enqueue reverse for dequeue
     * 
     * */
    private ImmutableStack<E> order;
    private ImmutableStack<E> reverse;

    /**
     * Default constructor ImmutableQueue two empty stacks
     * 
     * */
    public ImmutableQueue() {
        this.order = ImmutableStack.emptyStack();
        this.reverse = ImmutableStack.emptyStack();
    }

    /**
     * Constructor overloading Using two immutable stack order and reverse
     * 
     * */
    public ImmutableQueue(ImmutableStack<E> order, ImmutableStack<E> reverse) {
        this.order = order;
        this.reverse = reverse;
    }

    /**
     * Balancing the Queue reverse the order stack and assign it to reverse
     * stack and make order stack empty
     * */
    private void balanceQueue() {
        this.reverse = this.order.toReverseStack();
        this.order = ImmutableStack.emptyStack();
    }

    /**
     * Enqueue Object if object is null throw IllegalArgumentException
     * 
     * @return ImmutableQueue with object
     * */
    public ImmutableQueue<E> enqueue(E object) {
        if (object == null)
            throw new IllegalArgumentException();
        return new ImmutableQueue<E>(this.order.push(object), this.reverse);
    }

    /**
     * Dequeue from the queue if Queue is empty then throw
     * NoSuchElementException
     * 
     * if Reverse Stack is not empty then return Immutable queue with reverse
     * stack's tail object
     * 
     * else reverse the Order ImmutableStack and take the tail of this and clean
     * the order ImmutableStack
     * 
     * @return ImmutableQueue
     * */
    public ImmutableQueue<E> dequeue() {
        if (this.isEmpty())
            throw new NoSuchElementException();
        if (!this.reverse.isEmpty()) {
            return new ImmutableQueue<E>(this.order, this.reverse.tail);
        } else {
            return new ImmutableQueue<E>(ImmutableStack.emptyStack(), this.order.toReverseStack().tail);
        }
    }

    /**
     * Getting the peek of the queue if Object is empty throw and Exception
     * NoSuchElementException. if reverse stack is Empty balanceQueue.
     * 
     * @return head of the reverse stack
     * */
    public E peek() {
        if (this.isEmpty())
            throw new NoSuchElementException();
        if (this.reverse.isEmpty())
            balanceQueue();
        return this.reverse.head;
    }

    public boolean isEmpty() {
        return size() == 0;
    }

    public int size() {
        return this.order.size + this.reverse.size;
    }

    public double percentage(double x) {
        double value = 0;
        if (!this.isEmpty()) {
            value = size() * x / 100;
        }
        return value;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T11:06:45.037

以下解决方案取自 GitHub，可以在 [GitHub 上](https://github.com/vivekFuneesh/Constant-Queue)看到具有时间复杂性证明的完整解决方案，由 Vivek Mangla 创建。

Immutable Queue Algorithm 可以更好地理解为 Linked List ，非常正确的方法。

可以使单链表充当不可变队列，这样每当执行入队时，只会修改前后的新对象，而前一个对象仍将代表前一个队列。因此不会进行不必要的复制。

也可以说，如果前一个对象多次入队，那么我们别无选择，只能复制整个队列并创建一个新对象，其前后指向前（第一个）元素，后指向最后一个元素。

使用链表的完整代码可以看成：

```
 * This has been released under GPL v3 Licence by Vivek Mangla 2014.
 * For More Information go to::     http://www.gnu.org/licenses/ 
 * AlgoRithM::::::
 * 
 * According to the Immutable Queue Concept******
 * 
 * If suppose there is an object q representing an Immutable Queue
 *             Now if we perform an enQueue() operation then,
 *                             this object will STILL Represent The Previous Queue
 *                             and a new Object q1 of Immutable Queue will be representing 
 *                                 new Queue with 1 extra element then previous one.
 *                      *************similar argument for dequeue()operation *************
 * 
 *     *******It MEANS THAT THERE IS NO BOUNDATION ON MEMORY FOR an OBJECT..
 * 
 *                i.e.  it is NOT NECESSARY that  a new Object MUST HAVE A 
 *                        WHOLE NEW MEMORY SPACE Of New Queue it is representing.********
 * 
 *BUT If we are EnQueing a value in previous persistent Object MORE_THAN_ONCE than we have  to allocate a Whole new Memory Space
 * 
 * 
 * Using the Above CONCEPT ...
 * 
 * I have created an algorithm to make a Linked List to work like an Immutablequeue.
 * 
 * In this Algorithm,
 *       A new Object may be using  Same Memory Space as Previous One's 
 *         but with certain RESTRICTIONS so that....<<<<.....It is NOT going to CONTRADICT ABOVE CONCEPTS...>>>>>
 *       And Those <Restrictions> are::
 *                                     <1>..<Current Queue Object's front and rear are not to be modified >
 *                                     <2>..<Current Queue Object's SIZE is not to be Modified>
 *       And Hence <Modifications> will be done only on::
 *                                      <1>..<Previous Linked List node's next value ..(If necessary)>
 *                                      <2>..<new Linked List node's data value>
 *                                      <3>..<new Queue Object's rear,front and SIZE value>
 *                                      <4>..<In worst case copy whole Queue of Current Object for  new Object >
 * 
 * <<WHERE rear is a reference to last element of Linked_List and front is First element of Linked_List>>
 * 
 * <<...NOTE::!!!!THE CURRENT QUEUE OBJECT'S Variable Values Are Not Modified At ALL...!!!!>>
 * 
 **************************<********************************************************************************>************* 
 */

import java.util.NoSuchElementException;

public class IQ1<E>{

    /*************************<***********************************************************************>***********************
     * The Object of this class is having 3 Variables...
     * 
     * 1.> front  :: for keeping track of head of this Object..
     * 2.> rear   :: for keeping track of end of this Object..
     * 3.> SIZE   :: for keeping track of number of elements of this Object..
     *********************<*******************************************************************************>******************* 
     */

    List front=null,rear=null;
    int SIZE=0;
    IQ1<E> IQ1=null;
    static List list=null,node=null,p=null,p1=null;

    public IQ1(){}

    /************************************
     ********************************************************************
     * enqueue(E e) operation 
     ********************************************************************
     * 
     * if(parameter passed is null){
     *                               THROW ILLEGAL_ARGUMENT_EXCEPTION ;
     *                             }
     * 
     * else if(it is not null){
     * 
     *                         Create a new List Node.. List list=new List();
     *                         Now data part of this list contains value passed in parameter ;
     *                         Create a new Immutable Queue Object..IQ1<E> IQ1=new IQ1<E> ;
     *                         Now ,
     *                           if((current Object's front is null)OR
     *                                 (it's front is just one step ahead of it's rear i.e.
     *       <this object has been created by removing last element from another object whose rear  was in somewhere middle of list>)){
     *                                           new Object's front is equal to new List Node formed ;
     *                                           new Object's rear is equal to new List Node Formed ;
     *                                                             }
     * 
     *                           else if(this object's rear is  referring to last element){
     *                                     new Object's front is equal to current Object's front ;
     *                                     new Object's rear is equal to new List Node Formed ;
     *                                }
     *                           else{
     *                            << Create a Duplicate Queue of Current Object and adjust new Object's rear and front references>>
     *                           }
     *                           
     *                           new Object's SIZE is 1 More than current Object's SIZE ;
     *                          
     *                          }
     * 
     * return null;
     *****************************************<******************************************>************************************                      
     */

    /************************<****************************************************************>************
     * <<TIME_COMPLEXITY>>
     *              <1.>..<Best Case::>  O(1)
     *              <2.>..<Worst Case::> Less Than |_O(n/2)_|<< WHERE, n IS no. of elements enqueued>> 
     * <<****FOR CALCULATION OF TIME COMPLEXITY SEE END OF THIS PROGRAMM****>>
     ***************************<***********************************************************>****************
     */

    @SuppressWarnings("unchecked")
     public IQ1<E> enqueue(E e){

        if(e==null)throw new IllegalArgumentException();/** <<YOU_MAY_HANDLE_THIS_EXCEPTION_ON_YOUR_OWN>> **/

            list=new List();
            list.object=e;
            IQ1=new IQ1<E>();
            if((front==null)||(rear.next==front)){IQ1.rear=IQ1.front=list;}
            else if (rear.next==null){
                IQ1.front=front;
                IQ1.rear=list;
                rear.next=list;
            }
            else{
                p=front;p1=null;
                node=new List();
                node.object=p.object;IQ1.front=node;
                p1=node;p=p.next;
                while(p!=rear.next){
                    List node1=new List();
                    node1.object=p.object;
                    p1.next=node;p1=node;p=p.next;
                }
                p1.next=list;
                IQ1.rear=list;
            }

            IQ1.SIZE=SIZE+1;

            return IQ1;

     }

    /**************************<*************************************************************************************>********
     * *********************************
     * dequeue() Operation
     * *********************************
     * 
     * Now Dequeue operation is little bit TRICKY..
     * Because We have to remove first element BUT CURRENT OBJECT's Bounds MUST NOT BE CHANGED
     * SO,
     * 
     * if(current's front is null i.e. EMPTY OR..... if it's rear.next is  referring to it's front i.e. 
     *                                 previous object was containing single item and then a dequeue operation was performed
     *                                 on it and allocated to current object){
     *                                                                         THROW EXCEPTION ;
     *                                                                       }
     * 
     *                                       Create a new Immutable Queue Object;
     *                                       it's front will refer to current's front.next;
     *                                       it's rear will refer to current's rear;
     *                                       it's SIZE will be 1 LESS than current's SIZE;
     *                                       return this new Object;
     * 
     * *****************************<******************************************************************************>***********
     */

    /***********************<*************************************************************************************>
     * <<Time_Complexity>>..
     *                   <O(1)...in ALL CASES>
     ************************<************************************************************************************>*
     */

    @SuppressWarnings("unchecked")
     public IQ1<E> dequeue(){

        if((front==null)||(rear.next==front)){
            rear=null;front=null;
            throw new NoSuchElementException();
            /** <<YOU_MAY_HANDLE_THIS_EXCEPTION_ON_YOUR_OWN>> **/
        }

        IQ1=new IQ1<E>();
        IQ1.front=front.next;
        IQ1.rear=rear;
        IQ1.SIZE=SIZE-1;

         return IQ1;

     }

    /******************************<********************************************************************************>**********
     ***********************
     * peek() Operation
     ***********************
     * 
     * if(current's front is null i.e. EMPTY OR..... if it's rear is  refering to it's front i.e. 
     *                                 previous object was containing single item and then a dequeue operation was performed
     *                                 on it and allocated to current object){
     *                                                                         THROW EXCEPTION ;
     *                                                                       }
     * 
     *                                       return current Object's front.object ;
     * 
     *****************************<**********************************************************************************>********
     */

     /**
     * <<Time_Complexity>>..
     *                   <O(1)...in ALL CASES>
     ****************************<*************************************************************************************>
     */

     @SuppressWarnings("unchecked")
     public E peek(){
         if((front==null)||(rear.next==front))throw new NoSuchElementException();/** <<YOU_MAY_HANDLE_THIS_EXCEPTION_ON_YOUR_OWN>> **/

         return (E)front.object;

     }

     /**************************<**********************************************************************************>***********
      *<************************
      * size() Operation
      *************************>
      *                                                 return SIZE ;
      * 
      *************************<**********************************************************************************>************ 
      * 
      */

    /*******************************************<****************************************>*************************************
     *
     * <<Time_Complexity>>..
     *                   <O(1)...in ALL CASES>
     *******************************************<******************************************>***********************************
     */

     public int size(){

             return SIZE;

    }

}

/*****************************<**************************************************************************************>****
 ****************************************************
 * Linked List Has Been Used To Store Pushed Element.
 * class List is used to declare Linked list  Node.
 * This class is also a Generic Class to support Generic data Types.
 ****************************************************
 * 
 * It has 2 variables::
 *     1.> A Generic Reference variable   E object;
 *     2.> A  next reference which refers to next node  List next=null;
 ****************************<**************************************************************************************>***** 
 */

class List<E>{

    E object;/**<<Node Data Part Can Contain Any Object>>**/
    List next=null;/***<<Reference to next Node>>**/
} 
```

希望这会有所帮助。

# c++ - push_back() 问题

> ID：12161320
> 
> 赞同：-2
> 
> 时间：2012-08-28T14:18:04.153
> 
> 标签：c++, vector

我想将行存储在文件中，例如

```
15 1 0 0 0 0
33 1 0 0 0 0
29 1 0 0 0 0
18 1 0 0 0 0
25 1 0 0 0 0 
```

成为数组的元素。所以如果我这样做

```
#include <stdio.h>
#include <vector>
using namespace std

char* file = "somefile.txt"
FILE *fb_r = fopen(file,"r");
char line[100];
vector <char> lineArr;
string lineElement;
while(fgets(line,256,fb_r){
  sscanf(line, "%s", &lineElement);
  lineArr.push_back(lineElement);  //problem arises here
} 
```

但我收到错误：
无法调用向量 >::pushBack(lineElement)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:19:33.083

更改`lineArr`为：

```
vector<string> lineArr; 
```

你的`sscanf`也坏了，你不能用`std::string`. 整个事情应该是：

```
lineArr.push_back(line); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:21:04.033

好吧，您的向量包含单个`char`s

```
vector <char> lineArr; 
```

看起来你正试图推动一个`std::string`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:35:00.040

除了以前的好答案，请找到一个完整的工作程序：

```
#include <stdio.h>
#include <vector>
#include <string>
#include <iostream>
using namespace std;

int main() {
    const char* file = "somefile.txt";
    FILE *fb_r = fopen(file,"r");
    char line[100];
    vector<string> lineArr;
    string lineElement;
    while(fgets(line,256,fb_r)) {
      lineElement = line;
      lineArr.push_back(lineElement.substr(0, lineElement.size() -1)); // We here remove the carriage return from the input file which you probably do not want
    }

    for(vector<string>::const_iterator lineIter = lineArr.begin(); lineIter != lineArr.end(); lineIter++) {
       cout << *lineIter << std::endl;
    }

    return 0;
 } 
```

哪个将输出，关于您的输入文件：

```
15 1 0 0 0 0
33 1 0 0 0 0
29 1 0 0 0 0
18 1 0 0 0 0
25 1 0 0 0 0 
```

希望能帮助到你，

# coldfusion - 如何使用命令提示符而不是 Coldfusion Administrator html 界面打包编译好的 Coldfusion 代码？

> ID：12161330
> 
> 赞同：3
> 
> 时间：2012-08-28T14:18:25.703
> 
> 标签：coldfusion, compilation, packaging

我正在尝试自动化打包编译的 Coldfusion 代码的过程，第一步是弄清楚如何覆盖用户界面并调用将编译的 Coldfusion 代码（使用 cfcompile 实用程序编译）打包到 war 文件中的实际代码。

附加信息：

编写一个调用 cfcompile.bat 并编译 Coldfusion 代码的应用程序相当简单。我遇到问题的部分是包含打包编译的 Coldfusion 代码的部分。这通常使用 Coldfusion 9 附带的 Administrator 工具（一个 html 文件）来完成。

我的目标是在不使用该工具的情况下打包代码，但除了向该 html 文件发出 POST 请求之外，我不知道如何访问 html 页面使用的实际工具。

（顺便说一句，我不熟悉 ANT 脚本，所以如果有人可以提供可以从命令提示符实现的解决方案，我将不胜感激）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:28:21.767

我承认我需要完成一些文档，但它比其他选项要好得多。

查看[https://github.com/orangeexception/CFCompile-Pass-All](https://github.com/orangexception/CFCompile-Pass-All)

cfcompile-pass-all.bat 基于 ColdFusion 提供的 cfcompile，但它实际上可以工作并且是参数驱动的。

放入`cfcompile-pass-all.bat`（`/WEB-INF/cfusion/bin`这些文件使用 findjava.bat & findjava.sh）

然后你最终这样称呼它......

`${sCFwwwrootPath}/WEB-INF/cfusion/bin/cfcompile-pass-all.bat ${sCFwwwrootPath}/WEB-INF/cfusion ${sCFLibPath}/jrun.jar ${sCFwwwrootPath}/WEB-INF ${sCFwwwrootPath} ${sCFAppPath} ${sCFAppCompiledPath}" />`

如果您正在寻找编译为 WAR（到 EAR）构建的完整源代码，请查看 Ant 脚本。它为你做一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:23:41.357

本文可能会有所帮助： [使用 eclipse、ant 和 cfcompile.bat 预编译您的代码](http://www.webdevref.com/blog/index.cfm/2006/11/7/Use-eclipse,-ant-and-cfcompile.bat-to-precompile-your-code)

# iphone - iPhone：如何开始通话然后返回我的应用程序？

> ID：12161333
> 
> 赞同：-1
> 
> 时间：2012-08-28T14:18:36.790
> 
> 标签：iphone, objective-c, ios, cocoa-touch, call

> **可能重复：**
> [iOS 4.2 - 通话后返回应用程序](https://stackoverflow.com/questions/5028329/ios-4-2-return-to-app-after-phone-call)

我想让用户有机会直接从我的应用程序中给某人打电话。这就是我使用这段代码的原因：

```
 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel:0801920"]]; 
```

我工作得不是很好，但问题是我希望在通话结束后或者如果用户按下取消它会立即回到我的应用程序中。现在它只停留在电话的呼叫中。我需要的是使用某种委托。

我在谷歌上搜索，我想出了这样的东西：

```
 pinkAppDelegate *appDelegate=  (pinkAppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

但我不确定如何使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:26:01.177

你不能做这个。打开 URL 调用将打开一个不同的应用程序。当前运行的应用程序是 openURL 方法的接收应用程序。该应用程序现在是前台应用程序，它将无法重新启动您的应用程序。

# android - 使用 onBackPressed 时如何传递登录屏幕活动

> ID：12161336
> 
> 赞同：2
> 
> 时间：2012-08-28T14:18:45.293
> 
> 标签：android

我的应用程序有三个主要活动。

1.  飞溅活动
2.  登录活动
3.  菜单活动

当我启动应用程序时，启动屏幕工作四秒钟，然后进入登录活动。如果用户登录成功，则应用程序进入菜单活动。在我的菜单中，有注销按钮。如果用户单击它，则应用程序将进入登录活动。它工作正常。但是如果用户不想注销并单击设备上的后退按钮，我想直接退出应用程序。如果我找不到这个问题的解决方案，用户必须进入登录屏幕，然后启动屏幕，最后在他们想使用后退按钮退出应用程序时退出。我应该使用哪种解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T14:20:30.427

登录成功后，您可以`finish()`在启动菜单活动后立即调用登录活动。这有效地从后台堆栈中删除了登录活动。

编辑：正如下面评论中提到的，这也适用于您的 Splash 活动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T14:27:14.653

@Keyboardsurfer 提供的解决方案非常适合您，但如果您想处理后退按钮事件，请使用以下代码获取有关后退按钮事件的通知。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK)) {
        Log.d(this.getClass().getName(), "back button pressed");  
        // your code to handle back button event.
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T16:10:37.660

登录成功后，您应该调用您的菜单活动，如下所示：

```
Intent intent=new Intent(LoginActivity.this,MenuActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent);
this.finish(); 
```

如果用户通过 SharedPreferences 登录，我认为您正在检查您的 Splash 活动，您应该以您在调用这两个活动中的任何一个时指定的相同方式关闭您的 Splash 活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T14:31:04.183

您必须覆盖 Activity（仅限 Splash）的 onPause 方法：

方法如下；

```
 @Override
protected void onPause() {

    super.onPause();
    this.finish();

} 
```

并在登录活动中在登录内容完成后调用完成方法。答案已编辑（请参阅下面的讨论）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-30T13:58:35.523

我不认为它会在 other 中导致意外行为`Activities`，只是它的`Splash Activity`原因是它`onPause()`被覆盖而不是其他的，并且因为 splash 只被调用一次，我认为这并不重要。

# android - 使用 PhoneGap 使 Android 应用程序可访问（针对残障人士）

> ID：12161343
> 
> 赞同：11
> 
> 时间：2012-08-28T14:19:08.607
> 
> 标签：android, cordova, accessibility

有没有人在使用 PhoneGap 时有任何使 Android 应用程序可访问的经验？至少，我们需要使我们的应用程序符合第 508 节。

我已经尝试实现一些标准的辅助功能（文本框的标签、向 div 添加标题属性等）。但是，当在 Android 中使用 TalkBack 和 Expore by Touch 时，当我的 PhoneGap 应用程序加载时，它只会显示“WEB CONTENT”——仅此而已。关于我的应用程序的其他任何内容都没有被大声说出来。

当同一个应用程序在 iOS 中运行 VoiceOver 时，一切都运行良好。它可以很好地读取所有“标题”属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T00:52:56.287

是的，我也可以重现这个问题。看起来 TalkBack 无法读取 WebView 中的内容。您应该向他们提出问题：

[https://code.google.com/p/eyes-free/issues/list](https://code.google.com/p/eyes-free/issues/list)

我相信我们很乐意与他们合作。

# java - 在 pdf 上书写和显示希伯来字母

> ID：12161346
> 
> 赞同：1
> 
> 时间：2012-08-28T14:19:13.233
> 
> 标签：java, pdf, hebrew

我正在pdf文件上写内容。

当我写希伯来字母（“שלום”）时，这些字母不会出现在 pdf 中。

Waybe它是一个编码问题，无论如何我如何在pdf文件上写希伯来语？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:22:37.403

这*可能*是一个编码问题，但如果不知道您是如何写入 PDF 文件（什么库、什么编码等），就很难说出来。

要查看的另一件事是 PDF 中使用的嵌入式字体 - 默认情况下不会有任何字体，您需要嵌入希伯来语字体以用于希伯来语文本。在这样做之前，您需要确保您有权嵌入和分发此类字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T02:21:19.203

您需要嵌入在 PDF 中的带有希伯来字母（字形）的字体。

# php - PHP DOMDocument - 检查更新的 XML 文件

> ID：12161348
> 
> 赞同：0
> 
> 时间：2012-08-28T14:19:22.333
> 
> 标签：php, domdocument

我目前有一个看起来像这样的脚本，

```
$doc = new DOMDocument();
$doc->load( 'sync-img/data.xml' );

$user1 = $doc->getElementsByTagName( "user1" )->item(0)->nodeValue;
$user2 = $doc->getElementsByTagName( "user2" )->item(0)->nodeValue;
$user3 = $doc->getElementsByTagName( "user3" )->item(0)->nodeValue;
$user4 = $doc->getElementsByTagName( "user4" )->item(0)->nodeValue;
$user5 = $doc->getElementsByTagName( "user5" )->item(0)->nodeValue;
$user6 = $doc->getElementsByTagName( "user6" )->item(0)->nodeValue; 
```

当 XML 文件获得新数据时，它会希望脚本或页面刷新。有没有办法将该`$doc->load()`部分放入循环并检查它是否每隔几秒钟更新一次，然后强制刷新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:26:49.220

是的你可以。

制作一个检查文件哈希的 PHP 脚本。

```
echo hash_file('md5', 'sync-img/data.xmlt'); 
```

在你的 JavaScript 存储一个变量：

```
xmlHash = '<?php echo hash_file('md5', 'sync-img/data.xmlt');?>'; 
```

比定期检查**xmlHash**是否已更改：

```
$(document).ready(function(){
    checkHash();
});

function checkHash()
{
    $.get('/get_xml_hash.php', function(data) {
        var newHash = data;
                if(newHash != xmlHash)
                     location.reload();
    });

    setTimeout("checkHash()",8000);
} 
```

或者您可以使用[HTML5 服务器发送事件](http://dsheiko.com/weblog/html5-and-server-sent-events/)

# ruby - profile.assume_untrusted_certificate_issuer = false 不适合我

> ID：12161349
> 
> 赞同：0
> 
> 时间：2012-08-28T14:19:22.723
> 
> 标签：ruby, selenium, webdriver, watir, watir-webdriver

使用 watir-webdriver 进行自动化我无法处理 Firefox "Untrusted Connection" 。已经尝试过这个：

```
 require 'watir-webdriver'
 profile = Selenium::WebDriver::Firefox::Profile.new
 profile.assume_untrusted_certificate_issuer = false
 browser = Watir::Browser.new(:firefox, :profile => profile)
 browser.goto("http://xxx.xxx.xxx.com) 
```

仍然得到相同的结果？任何帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:20:11.413

这对我有用：

```
 @profile=Selenium::WebDriver::Firefox::Profile.from_name "default"
   @profile.assume_untrusted_certificate_issuer=false
   @profile.secure_ssl = true 
   browser = Watir::Browser.new :firefox, :profile => @profile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-15T13:38:46.783

能力帮助我：

```
capabilities = Selenium::WebDriver::Remote::Capabilities.firefox(accept_insecure_certs: true)
$driver = Selenium::WebDriver.for :firefox, desired_capabilities: capabilities 
```

geckodriver 0.14.0，Mozilla Firefox 52.0，selenium-webdriver 3.2.1

# entity-framework - 实体框架包含对 varchar 列的查询

> ID：12161353
> 
> 赞同：4
> 
> 时间：2012-08-28T14:19:36.800
> 
> 标签：entity-framework, code-first

我有以下 Code First 实体：

```
public class Department
{ 
    public int DepartmentID { get; set; }
    public string DepartmentName { get; set; }
} 
```

我设置的配置如下表：

```
dbo.Departments
    DepartmentID INT PRIMARY KEY
    DepartmentName VARCHAR(75) 
```

我手动向 DepartmentName 添加了索引并运行以下查询：

```
var depts = new string[] { "Engineering", "Manufacturing" };
var departments = from d in db.Departments
                  where depts.Contains(d.DepartmentName)
                  select d; 
```

当我运行跟踪时，它产生了以下 SQL：

```
SELECT 
[Extent1].[DepartmentID] AS [DepartmentID], 
[Extent1].[DepartmentName] AS [DepartmentName]
FROM [dbo].[Departments] AS [Extent1]
WHERE [Extent1].[DepartmentName] IN (N'Engineering',N'Manufacturing') 
```

由于我的列是 varchar 并且查询将文本转换为 NVARCHAR，因此优化器选择在我的 DepartmentName 索引上执行聚集索引扫描而不是索引查找。

除了将我的数据库更改为使用 nvarchar 之外，还有什么方法可以解决这个问题？这是一个错误还是这是正常的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:00:12.310

如果您的索引数据表很小，这是可以预料的。

SQL 将从磁盘读取的最小数据量为 8k（一页），因此如果它使用索引，则需要访问磁盘两次，一次用于索引，然后再次用于数据。如果所有数据都适合一个 8k 数据页，那么无论如何它都可以一口气读取，因此使用索引会增加不必要的磁盘 IO。

# javascript - 如何从选择的 JS 中删除搜索框？

> ID：12161354
> 
> 赞同：22
> 
> 时间：2012-08-28T14:19:38.220
> 
> 标签：javascript, jquery-chosen

在 github 上，它说搜索框现在在所选选择框中是可选的。有谁知道如何删除它？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-10-03T01:42:41.990

当前版本的[Chosen](http://harvesthq.github.com/chosen/)提供了两种方法来控制搜索框的显示。两者都在初始化期间作为选项传入。要完全隐藏搜索框，请传入选项`"disable_search": true`：

```
$("#mySelect").chosen({
  "disable_search": true
}); 
```

或者，如果您想在有一定数量的选项时显示搜索，请使用该选项`"disable_search_threshold": numberOfOptions`（其中`numberOfOptions`是显示搜索框之前所需的最小选项数）：

```
$("#mySelect").chosen({
  "disable_search_threshold": 4
}); 
```

```
jQuery(function($) {
  // Create a set of OPTION elements from some dummy data
  var words = ["lorem", "ipsum", "dolor", "sit", "amet,", "consectetur", "adipiscing", "elit", "duis", "ullamcorper", "diam", "sed", "lorem", "mattis", "tristique", "integer", "pharetra", "sed", "tortor"],
      options = $($.map(words, function(word) {
        return $(document.createElement('option')).text(word)[0];
      }));
  $('select').each(function() {
    // Add the dummy OPTIONs to the SELECT
    var select = $(this).append(options.clone());
    // Initialize Chosen, using the options from the
    // `data-chosen-options` attribute
    select.chosen(select.data('chosen-options'));
  });
});
```

```
body {
  font-family: sans-serif;
  font-size: .8em; }
label {
  display: block;
  margin-bottom: 1.4em; }
  label .label {
    font-weight: bold;
    margin-bottom: .2em; }
select {
  width: 14em; }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.min.css" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>

<label>
  <div class='label'>Default behavior</div>
  <select name='default' data-chosen-options='{}'></select>
</label>
<label>
  <div class='label'>No search at all</div>
  <select name='no-search' data-chosen-options='{ "disable_search": true }'></select>
</label>
<label>
  <div class='label'>Search iff more than 4 items</div>
  <select name='conditional-search' data-chosen-options='{ "disable_search_threshold": 4 }'></select>
</label>
<label>
  <div class='label'>Search iff more than 32 items</div>
  <select name='conditional-search' data-chosen-options='{ "disable_search_threshold": 32 }'></select>
</label>
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T15:59:57.643

只需在需要时隐藏它

```
$('.chzn-search').hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T05:30:23.197

`display:none`selected.jquery.js 只是用类在 div中设置搜索框的样式`chzn-search`

```
<div class="chzn-search"><input type="text" autocomplete="off" style="display:none;" /></div> 
```

# javascript - Rails Uncaught ReferenceError: $$ is not defined 升级到 jquery

> ID：12161355
> 
> 赞同：0
> 
> 时间：2012-08-28T14:19:41.723
> 
> 标签：javascript, jquery, ruby-on-rails

嘿，所有人都在查看整个 stackoverflow，这看起来像是一个常见的错误，我无法理解。我正忙着将我们的网站从纯 JS 升级到 jquery，为我们迁移到 Rails 3.1 做准备，现在我有了这个 javascript：

```
 :javascript
   ["Ownership", "Management", "EmploymentEquity", "SkillsDevelopment", "PreferentialProcurement", "EnterpriseDevelopment", "SocioeconomicDevelopment"].each(function(element) {
     $$('.' + element).each(function(s) {
       s.toggle();
     });
 }); 
```

所以基本上它是通过一系列 css 类运行，然后切换它们。现在当我使用 jQuery lib 运行它时，我得到一个看起来像这样的错误

```
Uncaught TypeError: Object Ownership,Management,EmploymentEquity,SkillsDevelopment,PreferentialProcurement,EnterpriseDevelopment,SocioeconomicDevelopment has no method 'each' 
```

现在我只是试图一次测试一个元素以使 jQuery 工作至少这是我到目前为止所拥有的。

```
$("OwnershipHeader").click(function () {
$("Ownership").toggle("slow");
}); 
```

非常简单，所以当您单击标题时，它会切换其子项。所以当我在控制台中输入它时它工作得很好。直到我点击粗略的标题：

```
Uncaught ReferenceError: $$ is not defined 
```

这看起来真的很简单，但它每次都打破......我对 jQuery 比较陌生，我之前刚刚使用过 Jquery UI 库。任何建议表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:27:47.397

> 未捕获的类型错误：对象所有权、管理、就业权益、技能发展、优惠采购、企业发展、社会经济发展没有方法“每个”

我想你的意思是`forEach`。但由于这不适用于所有浏览器，请使用 jQuery 的[`each`功能](http://api.jquery.com/jQuery.each/)

```
$.each(["Ownership", "Management"], function(i, element) {... 
```

> 未捕获的 ReferenceError：$$ 未定义

jQuery 使用单个美元符号 ( `$`)

```
$("OwnershipHeader").click(function () {
  $("Ownership").toggle("slow");
}); 
```

[jQuery 选择器](http://api.jquery.com/category/selectors/)大多类似于 CSS 选择器。所以这应该工作：

```
$(".OwnershipHeader").click(function () {
  $(".Ownership").toggle("slow");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:23:53.347

试试这个。

```
var array = ["Ownership", "Management", "EmploymentEquity", "SkillsDevelopment", "PreferentialProcurement", "EnterpriseDevelopment", "SocioeconomicDevelopment"];

$.each(array, function(i,element) {
    $('.' + element).toggle();
}); 
```

看起来它以前是用 PrototypeJS 编码的，它提供`$$`和`[].each`.

我不确定`.toggle`PrototypeJS 和 jQuery 中的行为是否相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:24:18.720

```
var col = ["Ownership", "Management", "EmploymentEquity", "SkillsDevelopment", "PreferentialProcurement", "EnterpriseDevelopment", "SocioeconomicDevelopment"];
$.each(col,function(i,e){
  $('.'+e).each(function(j,s){
    $(s).toggle();
  });
}) 
```

*在jquery中，首先没有定义变量`$$`，只有`$`定义。
*其次，正如我所提到的那样使用每个函数，传递给每个函数的第一个变量是提供给每个函数的第二个变量是[每个](http://api.jquery.com/jQuery.each/)`index in array`函数的实际`element` 外观和[切换](http://api.jquery.com/toggle/)文档

# php - 如何获取您所有的 Facebook 状态并计算有多少用户喜欢它

> ID：12161356
> 
> 赞同：-1
> 
> 时间：2012-08-28T14:19:47.313
> 
> 标签：php, facebook-graph-api, facebook-like

我想在 facebook 中获得我所有的状态，同时我想计算有多少人喜欢它。这可能使用 Facebook API 吗？

您的指导或帮助将不胜感激和奖励！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:50:13.457

您可以首先调用`/me/feed`以获取用户的状态更新。每次更新都会有一个`id`. 然后，您需要进行第二次 API 调用以`/[id]/likes`获取喜欢该更新的用户列表。

# sql-server - 当一个语句中过滤器的值为空时，如何忽略 TSQL Where 条件？

> ID：12161362
> 
> 赞同：1
> 
> 时间：2012-08-28T14:20:13.567
> 
> 标签：sql-server, tsql, case, isnull, case-when

当过滤器的值在一个语句中为空时，如何忽略 where 条件？

```
-- if @filter1LowerBound is null then
select * from MyTable

-- if @filter1LowerBound is not null then
select * from MyTable
where column1 > @filter1LowerBound 
```

是否可以编写一个单独的 where 条件来处理上述情况？

我知道`CASE WHEN`当我的专栏使用“=”时我可以声明。

或喜欢：

```
select * from MyTable
where column1 = ISNULL(@filter1LowerBound, column1) 
```

但我有大于和小于运算符。

我有更多的大于和小于这样的过滤器，所以我需要让它工作。

那将如何实现？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:22:57.887

一种方法是像这样组合子句：

```
SELECT * FROM MyTable 
WHERE (@filter1LowBound IS NULL OR column1 > @filter1LowerBound)
   -- AND other conditions here 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T14:23:50.893

怎么样

```
select * from MyTable where 
   (@filter1LowerBound is null or column1 > @filter1LowerBound) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T14:21:22.927

假设 column1 是数字

```
select * from MyTable where column1 > ISNULL(@filter1LowerBound, column1-1)
select * from MyTable where column1 < ISNULL(@filter1LowerBound, column1+1) 
```

同样，如果它是一个字符串

```
select * from MyTable where column1 > ISNULL(@filter1LowerBound, '') 
```

ETC

# java - 如何序列化可选 与 Gson 一起上课？

> ID：12161366
> 
> 赞同：24
> 
> 时间：2012-08-28T14:20:32.800
> 
> 标签：java, json, serialization, gson

我有一个具有以下属性的对象。

```
private final String messageBundle;
private final List<String> messageParams;
private final String actionBundle;
private final Map<String, String> data;
private final Optional<Pair<Integer,TimeUnit>> ttl;
private final Optional<Integer> badgeNumber;
private final Optional<String> collapseKey; 
```

该对象在一个库中，我不想仅仅为了序列化目的而对其进行修改，并且希望避免创建另一个 DTO 的成本。

我如何序列化/反序列化可选属性？Optional 没有默认构造函数（既没有 apache commons Pair），但我不能使用 InstanceCreator，也不太了解如何创建一个 TypeAdapter，它只会将序列化委托给底层的 Optional 内容。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-08-01T10:40:19.197

经过几个小时的搜索和编码 - 这是我的版本：

```
public class OptionalTypeAdapter<E> extends TypeAdapter<Optional<E>> {

    public static final TypeAdapterFactory FACTORY = new TypeAdapterFactory() {
        @Override
        public <T> TypeAdapter<T> create(Gson gson, TypeToken<T> type) {
            Class<T> rawType = (Class<T>) type.getRawType();
            if (rawType != Optional.class) {
                return null;
            }
            final ParameterizedType parameterizedType = (ParameterizedType) type.getType();
            final Type actualType = parameterizedType.getActualTypeArguments()[0];
            final TypeAdapter<?> adapter = gson.getAdapter(TypeToken.get(actualType));
            return new OptionalTypeAdapter(adapter);
        }
    };
    private final TypeAdapter<E> adapter;

    public OptionalTypeAdapter(TypeAdapter<E> adapter) {

        this.adapter = adapter;
    }

    @Override
    public void write(JsonWriter out, Optional<E> value) throws IOException {
        if(value.isPresent()){
            adapter.write(out, value.get());
        } else {
            out.nullValue();
        }
    }

    @Override
    public Optional<E> read(JsonReader in) throws IOException {
        final JsonToken peek = in.peek();
        if(peek != JsonToken.NULL){
            return Optional.ofNullable(adapter.read(in));
        }

        in.nextNull();
        return Optional.empty();
    }

} 
```

您可以像这样简单地注册它`GsonBuilder`：

```
instance.registerTypeAdapterFactory(OptionalTypeAdapter.FACTORY) 
```

请注意，如果 json 中不存在字段，Gson 不会为您的类字段设置值。所以你需要`Optional.empty()`在你的实体中设置默认值。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-28T17:33:39.527

Ilya 的解决方案忽略了类型参数，因此在一般情况下它不能真正起作用。我的解决方案相当复杂，因为需要区分`null`和`Optional.absent()`- 否则您可以将封装剥离为列表。

```
public class GsonOptionalDeserializer<T>
implements JsonSerializer<Optional<T>>, JsonDeserializer<Optional<T>> {

    @Override
    public Optional<T> deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context)
            throws JsonParseException {
        final JsonArray asJsonArray = json.getAsJsonArray();
        final JsonElement jsonElement = asJsonArray.get(0);
        final T value = context.deserialize(jsonElement, ((ParameterizedType) typeOfT).getActualTypeArguments()[0]);
        return Optional.fromNullable(value);
    }

    @Override
    public JsonElement serialize(Optional<T> src, Type typeOfSrc, JsonSerializationContext context) {
        final JsonElement element = context.serialize(src.orNull());
        final JsonArray result = new JsonArray();
        result.add(element);
        return result;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-01T23:21:18.837

就像对 maaartinus 解决方案的补充一样，没有封装列表的版本`Optional.absent`被简单地序列化为`null`：

```
public class GsonOptionalDeserializer<T> implements JsonSerializer<Optional<T>>, JsonDeserializer<Optional<T>> {
    @Override
    public Optional<T> deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context)
        throws JsonParseException {
        final T value = context.deserialize(json, ((ParameterizedType) typeOfT).getActualTypeArguments()[0]);
        return Optional.fromNullable(value);
    }

    @Override
    public JsonElement serialize(Optional<T> src, Type typeOfSrc, JsonSerializationContext context) {
        return context.serialize(src.orNull());
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-18T06:42:40.310

我将添加到[Anton Onikiychuk](https://stackoverflow.com/users/2153327/anton-onikiychuk)的答案

```
@Override
public Optional<E> read(JsonReader in) throws IOException {
    JsonToken peek = in.peek();
    if (peek == JsonToken.NULL) {
        in.nextNull(); // consuming JSON null
        return Optional.empty();
    }

    return Optional.ofNullable(adapter.read(in));
} 
```

# javascript - 检查 GET 变量是否已设置

> ID：12161368
> 
> 赞同：2
> 
> 时间：2012-08-28T14:20:35.063
> 
> 标签：javascript

例如，我有这个代码`?prside=5`。但是，如果您更改它并且 url 已经是`&prside=5`，它只是再次附加它（`&prside=5&prside=40`）。

如果它已经存在，我如何更新它而不是附加它？

```
<select name="prside" onchange="document.location.href = document.location.href + \'&prside=\' + this.value">
    <option>Annoncer pr. side</option>
    <option value="5">5</option>
    <option value="10">10</option>
    <option value="20">20</option>
    <option value="40">40</option>
</select> 
```

编辑：真实 URL 中还有其他 GET 变量。上面的脚本确实有效，只是多个 &prside 不是很漂亮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:24:12.330

您可以使用字符串 indexOf 方法检查 prside 是否存在，然后您可以使用正则表达式替换该值（如果存在）：

```
href = document.location.href;
if(!~href.indexOf('prside'))
    document.location.href = href + 'prside=' + this.value;
else
    document.location.href = href.replace(/(prside=)\d+/, '$1' + this.value) 
```

如果您想将其直接放入 HTML 中，这是一个单行

```
document.location.href = !~document.location.href.indexOf('prside') ? document.location.href + 'prside=' + this.value : document.location.href.replace(/(prside=)\d+/, '$1' + this.value); 
```

# ios - iOS：在 NSDateFormatter 的格式字符串中指定 unix 时间

> ID：12161369
> 
> 赞同：2
> 
> 时间：2012-08-28T14:20:35.560
> 
> 标签：ios, nsdateformatter, date-format, unix-timestamp

我在服务器的响应中收到这种格式**“/Bla(1344433014807)/”的日期。**1344433014807 是从 1970 年 1 月 1 日开始的秒数。

我在我使用的网络引擎中也有这个代码：

```
NSDateFormatter* dateformatter = [[NSDateFormatter alloc] init];
[dateformatter setDateFormat:dateFormat];
NSDate *date = [dateformatter dateFromString:dateString]; 
```

**问题：**如何指定正确的 dateFormat 以从 dateString 中获取日期，例如 @"/Bla(1344433014807)/" 甚至有可能吗？

**注意：**在引擎中，我无权使用 dateString 进行操作。我只能设置 dateFormat 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:28:14.810

[Apple 文档](http://developer.apple.com/iphone/library/documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html)为您的查询提供了解决方案

```
NSDate* date = [NSDate dateWithTimeIntervalSince1970:123456789];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss zzz"];
NSString *dateString = [dateFormatter stringFromDate:date]); 
```

/Bla 部分是与实际纪元时间一起传递的不必要值，即 1344433014807。Unix 时间是 Unix 纪元是 1970 年 1 月 1 日 00:00:00 UTC 时间（或 1970-01-01T00:00:00Z ISO 8601）。参考[这个](http://en.wikipedia.org/wiki/Unix_time#Encoding_time_as_a_number)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T13:29:42.270

从Apple 文档的[此页面](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/DataFormatting/DataFormatting.html#//apple_ref/doc/uid/TP40002369-SW4)`NSDateFormatter`中，您可以看到遵循[Unicode Technical Standard](http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_Patterns)，并且从那里您可以看到指定 unix 时间不是一个选项。

因此，您必须拆分字符串，将数字转换为 NSTimeInterval，然后将其读入 NSDate。

[http://unixtimestamp.com](http://unixtimestamp.com)对调试非常有帮助。您会注意到**1344433014807 实际上是毫秒**。

这是一个 Swift 实现，因为我最终不得不自己编写它，希望它能正常工作:)

```
public func dateFromBlaString(string: String) -> NSDate? {
    if let rangeOfDate = string.rangeOfString("^/Bla\\(", options: .RegularExpressionSearch, range: nil, locale: nil)
        where count(string) >= count("/Bla(") { // avoid out of range error
            let startIndex = advance(string.startIndex, count("/Bla(")
            let suffix = string.substringFromIndex(startIndex) // "1344433014807)/"
            if let parenthesisRange = suffix.rangeOfString(")", options: .LiteralSearch, range: nil, locale: nil) {
                let parenthesisIndex = parenthesisRange.startIndex
                let unixTimeInMillisecondsString = suffix.substringToIndex(parenthesisIndex) // "1344433014807"
                if let unixTimeInMillisecondsDouble = NSNumberFormatter().numberFromString(unixTimeInMillisecondsString)?.doubleValue { // 1344433014807.0
                    let unixTime = NSTimeInterval(unixTimeInMillisecondsInt) / 1000
                    return NSDate(timeIntervalSince1970: unixTime)
                }
            }
    }

    return nil
} 
```

# php - 在 StofDoctrineExtensions 中覆盖 DoctrineExtensions 方法

> ID：12161371
> 
> 赞同：1
> 
> 时间：2012-08-28T14:20:43.507
> 
> 标签：php, inheritance, symfony

我正在尝试更改 Gedmo\Tree\RepositoryUtils->buildTree() 方法的行为，因为我想更改返回数组的构造方式。

我正在尝试关注：

我有一堂课：

```
<?php

namespace MyCorp\CMSBundle\Util;

use Doctrine\Common\Persistence\Mapping\ClassMetadata;
use Doctrine\Common\Persistence\ObjectManager;
use Gedmo\Exception\InvalidArgumentException;

/**
 * Description of jsandjqTreeCompatibleRepositoryUtils
 *
 * @author peterrus
 */
class jsandjqTreeCompatibleRepositoryUtils extends Gedmo\Tree\RepositoryUtils {

    public function buildTree(array $nodes, array $options = array()) {

        $meta = $this->getClassMetadata();
        $nestedTree = $this->repo->buildTreeArray($nodes);

        $default = array(
            'decorate' => false,
            'rootOpen' => '<ul>',
            'rootClose' => '</ul>',
            'childOpen' => '<li>',
            'childClose' => '</li>',
            'nodeDecorator' => function ($node) use ($meta) {
                // override and change it, guessing which field to use
                if ($meta->hasField('title')) {
                    $field = 'title';
                } elseif ($meta->hasField('name')) {
                    $field = 'name';
                } else {
                    throw new InvalidArgumentException("Cannot find any representation field");
                }
                return $node[$field];
            }
        );
        $options = array_merge($default, $options);
        // If you don't want any html output it will return the nested array
        if (!$options['decorate']) {
            return $nestedTree;
        }

        if (!count($nestedTree)) {
            return '';
        }

        $build = function($tree) use (&$build, &$options) {
                    $output = is_string($options['rootOpen']) ? $options['rootOpen'] : $options['rootOpen']($tree);
                    foreach ($tree as $node) {
                        $output .= is_string($options['childOpen']) ? $options['childOpen'] : $options['childOpen']($node);
                        $output .= $options['nodeDecorator']($node);
                        if (count($node['children']) > 0) {
                            $output .= $build($node['children']);
                        }
                        $output .= $options['childClose'];
                    }
                    return $output . $options['rootClose'];
                };

        return $build($nestedTree);
    }

}

?> 
```

现在我正在尝试使用此类而不是调用时默认使用的类

```
$pagerepo = $this->getDoctrine()->getRepository('MyCorpCMSBundle:Page'); 
```

通过执行以下类型转换：

```
$pagerepo = (jsandjqTreeCompatibleRepositoryUtils) $this->getDoctrine()->getRepository('MyCorpCMSBundle:Page'); 
```

但是因为这不是java，所以这是不可能的。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-22T16:00:02.717

可能有点晚了，但我需要做同样的事情 - 这是其他人需要的解决方案：

您的存储库类：

```
namespace Acme\Model\Repository;

use Doctrine\ORM\EntityManager;
use Gedmo\Tree\Entity\Repository\NestedTreeRepository;
use Doctrine\ORM\Mapping\ClassMetadata;
use MyNamespace\GenericBundle\Repository\RepositoryUtils as MyRepositoryUtils;

/**
 * Group Repository
 */
class CategoryRepository extends NestedTreeRepository
{
    /**
     * @param EntityManager $em
     * @param ClassMetadata $class
     */
    public function __construct(EntityManager $em, ClassMetadata $class)
    {
        parent::__construct($em, $class);
        $this->repoUtils = new MyRepositoryUtils($this->_em, $this->getClassMetadata(), $this->listener, $this);
    }
} 
```

在 MyRepositoryUtils 中，您可以覆盖 buildTree 方法：

```
namespace MyNamespace\GenericBundle\Repository;

use Doctrine\Common\Persistence\Mapping\ClassMetadata;
use Doctrine\Common\Persistence\ObjectManager;
use Gedmo\Exception\InvalidArgumentException;
use Gedmo\Tree\RepositoryUtils as GedmoRepositoryUtils;

class RepositoryUtils extends GedmoRepositoryUtils
{
    /**
     * {@inheritDoc}
     */
    public function buildTree(array $nodes, array $options = array())
    {
    }
} 
```

# regex - 在 perl 中使用正则表达式提取两个分隔符之间的字符串

> ID：12161374
> 
> 赞同：0
> 
> 时间：2012-08-28T14:20:48.283
> 
> 标签：regex, perl, unix

我有一个看起来像这样的文件：

```
uniprotkb:Q9VNB0|intact:EBI-102551   uniprotkb:A1ZBG6|intact:EBI-195768
uniprotkb:P91682|intact:EBI-142245   uniprotkb:Q24117|intact:EBI-156442
uniprotkb:P92177-3|intact:EBI-204491     uniprotkb:Q9VDK2|intact:EBI-87444 
```

我希望提取`:`和`|`分隔符之间的字符串，输出应该是：

```
Q9VNB0   A1ZBG6
P91682   Q24117
P92177-3 Q9VDK2 
```

制表符分隔在两列之间。我在 unix 中写了一个 perl 命令：

```
perl -l -ne '/:([^|]*)?[^:]*:([^|]*)/ and print($1,"\t",$2)' <file> 
```

我得到的输出是：

```
Q9VNB0  EBI-102551   uniprotkb:A1ZBG6
P91682  EBI-142245   uniprotkb:Q24117
P92177-3    EBI-204491   uniprotkb:Q9VDK2 
```

我想知道我做错了什么以及如何解决问题。我不想使用拆分功能。

谢谢，

汤姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:40:10.373

你给出的表达式太贪心，因此消耗的字符比你想要的多。以下表达式适用于您的示例数据集：

```
perl -l -ne '/:([^|]*)\|.*:([^|]*)\|/ and print($1,"\t",$2)' 
```

`":"`它使用 a和`"|"`pair之间的明确匹配来锚定搜索。如果您的数据不完全匹配，它*应该*忽略输入行，但我没有对此进行测试。即，这个正则表达式假定在每行之间恰好有两个条目`":"`并且将存在。`"|"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T15:35:14.140

您指定它的方式，它必须以这种方式匹配。您想要一个冒号后跟任意数量的非管道，然后是任意数量的非冒号。

```
single colon -> :
non-pipe     -> Q9VNB0
non-colon    -> |intact
colon        -> :
non-pipe     -> EBI-102551   uniprotkb:A1ZBG6 
```

相反，我将空格作为合同的结尾，并要求我的所有模式都以冒号开头，以竖线结尾并由非空格/非竖线字符组成。

```
perl -M5.010 -lne 'say join( "\t", m/[:]([^\s|]+)[|]/g )'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:27:26.400

试试`m/: ( [^:|]+ ) \| .+ : ( [^:|]+ ) \| /x`吧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T14:30:08.503

解决方法可能是在第一个字符串和第二个字符串之间使用贪婪表达式。它`.*`一直到最后并开始回溯搜索最后一个冒号，后跟一个管道。

```
perl -l -ne '/:([^|]*).*:([^|]*)\|/ and print($1,"\t",$2)' <file> 
```

输出：

```
Q9VNB0  A1ZBG6
P91682  Q24117
P92177-3        Q9VDK2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T16:15:47.990

```
perl -nle'print "$1\t$2" if /:([^|]*)\S*\s[^:]*:([^|]*)/' 
```

或 5.10+：

```
perl -nE'say "$1\t$2" if /:([^|]*)\S*\s[^:]*:([^|]*)/' 
```

解释：

```
:          Matches the start of the first "word".
([^|]*)    Matches the desired part of the first "word".
\S*        Matches the end of the first "word".
\s+        Matches the "word" separator.
[^:]*:     Matches the start of the second "word".
([^|]*)    Matches the desired part of the second "word". 
```

这不是最短的答案（尽管很接近），因为每个部分都完全独立于其他部分。这使它更健壮、更不容易出错并且更易于维护。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T14:35:48.193

看看它**[在行动](http://regexr.com?31vj7)**：

```
:([\w\-]*?)\| 
```

**[另一种](http://regexr.com?31vja)**方法：

```
:(\S*?)\| 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-28T18:21:56.283

为什么不想使用该`split`功能。从表面上看，这很容易通过编写来解决

```
my @fields = map /:([^|]+)/, split 
```

我不确定您的正则表达式应该如何工作。使用`/x`修饰符来允许不重要的空格，它看起来像这样

```
/ : ([^|]*)? [^:]* : ([^|]*) /x 
```

它找到一个冒号，并可以选择捕获尽可能多的非管道字符。然后将尽可能多的非冒号字符跳过到下一个冒号。然后尽可能多地捕获零个非管道字符。因为你的所有匹配都是贪婪的，所以只要字符匹配字符类，它们中的任何一个都可以消耗字符串的所有其余部分。请注意，`?`表示可选序列的 a 将首先匹配它所能匹配的所有内容，并且只有当模式的其余部分无法匹配时才会采用跳过该序列的选项

很难从您的示例中判断一个字段的精确标准，但是这段代码应该可以解决问题。它查找既不是冒号也不是管道的字符序列，这些字符以冒号开头并以管道结尾

```
use strict;
use warnings;

while (<DATA>) {
  my @fields = /:([^:|]+)\|/g;
  print join("\t", @fields), "\n";
}
__DATA__
uniprotkb:Q9VNB0|intact:EBI-102551   uniprotkb:A1ZBG6|intact:EBI-195768
uniprotkb:P91682|intact:EBI-142245   uniprotkb:Q24117|intact:EBI-156442
uniprotkb:P92177-3|intact:EBI-204491     uniprotkb:Q9VDK2|intact:EBI-87444 
```

**输出**

```
Q9VNB0  A1ZBG6
P91682  Q24117
P92177-3    Q9VDK2 
```

# ruby-on-rails - Rails 3.2：从可挂载引擎添加种子任务

> ID：12161376
> 
> 赞同：6
> 
> 时间：2012-08-28T14:20:50.990
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, rake

我有一个 Rails 应用程序，它使用`rake db:seed`了我的数据库中的一些基础知识来开始工作。这通过一个小基础设施和一个其他人编写的将 YAML 加载到数据库中的 fixtures.rb 来工作。
我想要做的是把这个基础设施移动到我自己的gem中，这样我就可以在其他地方再次使用它，这需要我都通过gem的种子任务插入一些我自己的gem模型（我想要从主应用程序中的调用`db:seed`或类似的东西运行）并且主应用程序使用它自己的种子推送一些 gem 的模型。我已经开始工作的第二部分，它是在我收到的 fixtures.rb 文件中的一个简单修复。我现在想做的事情：

*   将 fixtures.rb 移动到 gem 中：我仍然没有任何源在 gem 中运行它。现在要做到这一点，我可能需要从那里调用文件，`[MyGem::Engine.root, 'lib', ...].join`然后在那里调用一个方法，该方法具有将 YAML 文件从加载到数据库中的路径，我不明白为什么它不应该工作。
*   `rake db:seed`开始运行我的 gem 中定义的任务。我已经在我的 gem（它是一个引擎）的 lib/tasks 下添加了 .rake 文件，但我似乎无法从主应用程序 rakefile 调用它们。
    为了让自己清楚，我想做的是通过 gem（不是主应用程序 - 或在主应用程序中使用 1 行代码）添加对主应用程序种子任务的依赖项，以便当有人`rake db:seed`在主应用程序中运行时gem 将运行额外的播种，而主应用程序开发人员甚至不必知道它们。

我想避免的肮脏解决方案是从主应用程序内的 gem 加载 .rake 文件，或者从主应用程序中的 gem 加载 seed.rb 文件。

所以我要问的基本上是如何通过`rake db:seed`在gemfile中拥有gem来使任务执行我的gemified引擎中定义的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:26:08.490

所以在问这个问题后不久，我就明白了。第一步是从这里开始的：[How to add a gems tasks to the main app](https://stackoverflow.com/a/6544417/1577125)

然后在任务文件中

```
#lib/task/some_task.rake
Rake::Task['db:seed'].enhance ['my_seed_task']

#lib/tasks/my_seed_task.rake
task 'my_seed_task' do
  ...
end 
```

现在，当我在主应用程序中运行时`rake db:seed`，它会运行 my_seed_task 定义为附加项的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:00:30.507

而是尝试扩展`Rails::Generators::Base`.

[这是文档中给出的机制](http://guides.rubyonrails.org/v3.0.3/generators.html#creating-your-first-generator)：

> “调用生成器时执行生成器中的每个公共方法”

所以

```
class DbGenerator < Rails::Generators::Base
  source_root File.expand_path('../../../../db', __FILE__)

  def copy_seeds_file
    copy_file 'seeds.rb', 'db/seeds.rb'
  end

  def copy_seeds_dir
    Dir.foreach seeds_dir do |file|
      copy_file "seeds/#{file}", "db/seeds/#{file}"  unless file.match /^\./
    end
  end

  def seeds_dir
    File.expand_path 'seeds', self.class.source_root
  end
end 
```

这种方法将允许*所有*基于 gem 的种子数据复制到应用程序目录中以供`db:seed`运行

# android - 在 AsyncTask 中关闭 ProgressDialog 时出现非常不寻常的错误

> ID：12161388
> 
> 赞同：-1
> 
> 时间：2012-08-28T14:21:28.150
> 
> 标签：android, android-asynctask, progressdialog

我开发了一个 Android 2.2 应用程序，我只收到一次这个错误：

```
java.lang.IllegalArgumentException: View not attached to window manager 
```

当我解雇时发生此错误`ProgressDialog`。这`dialog`是在一个`AsyncTask`. 这是我的代码：

```
private class LoadGatesAsyncTask extends AsyncTask<Void, Void, Boolean>
{
    private Context mContext;
    private ArrayList<Gate> mGatesList;
    private ProgressDialog mLoadingDialog;

    public LoadGatesAsyncTask(Context context)
    {
        this.mContext = context;
        mLoadingDialog = new ProgressDialog(mContext);
        mLoadingDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        mLoadingDialog.setMessage(getString(R.string.msg_loading_gates));
        mLoadingDialog.setCancelable(false);
        mLoadingDialog.show();
    }

    @SuppressWarnings("unchecked")
    @Override
    protected Boolean doInBackground(Void... params)
    {
        Boolean result = false;

        try
        {
            [ ... ]
        }
        catch (Exception ex)
        {
            ex.printStackTrace();
        }
        return result;
    }

    @Override
    protected void onPostExecute(Boolean result)
    {
        super.onPostExecute(result);

        if (result)
        {
            [ ... ]

            mLoadingDialog.dismiss();
        }
        else
        {
            mLoadingDialog.dismiss();
            Toast toast = Toast.makeText(mContext,
                    getString(R.string.msg_error_loading_gates),
                    Toast.LENGTH_SHORT);
            toast.setGravity(Gravity.CENTER, 
                    toast.getXOffset() / 2,
                    toast.getYOffset() / 2);

            toast.show();
        }
    }

} 
```

如何以编程方式避免此错误？如果不是，我是否可以做任何检查以避免将其解雇`attached to window manager`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:30:18.787

你在 OnCreate 中实例化 LoadGatesAsyncTask 吗？

如果是这样，请将 loadingDialog 实例化移动到构造函数中，`OnPreExecute`而不是在构造函数中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T14:31:00.830

您可以添加支票：

```
if(mLoadingDialog.isShowing()){
   mLoadingDialog.dismiss();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T14:31:39.763

您`ProgressDialog`在构造函数中初始化 this ，而不是 in `onPreExecute()`，这是**错误**的，因为您正在关闭`ProgressDialog`in `onPostExecute`，您需要在**同一个**UI 线程上执行此操作。

如果你初始化对象 - AsynTask，你会调用你的构造函数。所以你的`ProgressDialog`将被显示，但你还没有调用`.execute()`AsyncTask！因此，当您尝试关闭它时，编译器会发现自己位于不同的线程上。

**编辑：**澄清被误解的陈述。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-26T20:14:02.740

我认为真正的问题在于附加`Activity`的背后`progressDialog`，

它正在更改为新的参考（实例），

这样`progressDialog.OwnerActivity=`**null**（通常在轮换 onCreate 时被调用）

它通过将新的重新创建的 Activity 附加到所有者来解决：（`progressDialog.OwnerActivity = myActivity;`它将在您的类中传递一个本地参数，在构造函数中传递它，就像 :( 这里是 C# android，类似于 java .. 相同的想法）

```
class ProgressDialogAsync: AsyncTask //extends asynctask
{
//used parameters

Activity Activity;

string Title;
string Message;

ProgressDialog AsyncDialog;

public ProgressDialogAsync(Activity Activity, string Title, string Message)
 {    
  this.Title = Title;
  this.Message = Message;
  this.Activity = Activity;
 }

protected override void OnPreExecute()
{
 AsyncDialog = new ProgressDialog(Activity);
}

protected override Java.Lang.Object DoInBackground(params Java.Lang.Object[] @params)       {
 //do background operation
}

protected override void OnPostExecute(Java.Lang.Object result)
{
 //do something
 AsyncDialog.OwnerActivity = Activity;
 AsyncDialog.Dismiss();
 base.OnPostExecute(result);
} 
```

# sql-server - 使用 SSDT，当我的视图引用不同数据库中的对象时，如何解决 SQL71561 错误？

> ID：12161392
> 
> 赞同：30
> 
> 时间：2012-08-28T14:21:32.050
> 
> 标签：sql-server, sql-server-data-tools

我在 SSDT 中有一个数据库项目，当我导入一个引用不同数据库中对象的视图时，我收到错误 SQL71561，其描述如下：

> 错误 4 SQL71561：视图：[schema].[viewname] 对对象 [other_db].[schema].[table].[column] 的引用未解析

我花了一些时间试图弄清楚这一点，所以为了帮助其他人遇到这个问题，我将发布对我有用的答案。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-28T14:21:32.050

为了解决这个问题，我添加了对另一个数据库的引用，清除了对话框中的“数据库变量”字段。如果我不清除此字段，则在进行模式比较时，SSDT 将使用数据库变量名称生成更新脚本，这将失败。

1.  向项目添加**数据库引用**。
2.  在我的情况下，另一个数据库是同一解决方案中的另一个项目，因此我可以在“添加数据库引用”对话框的第一个下拉菜单中选择它。
3.  确保“数据库名称”字段中的文本正确。
4.  清除“数据库变量”字段。

查看“示例用法”文本并验证它是否符合预期。单击“确定”以添加引用，这应该会处理“未解决的引用”错误。

这样做之后，我能够进行架构比较，但是尝试构建项目会产生以下错误：

> 错误 408 SQL00208：对象名称“db.schema.table”无效。

转到项目属性并取消选中“为公共对象启用扩展 Transact-SQL 验证”允许项目成功构建。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-02-10T16:54:51.817

我的问题是从一个角度来看。在我的观点中...

```
...FROM [MyDatabase].[dbo].[MyTable] 
```

我把它换成...

```
...FROM [MyTable] 
```

原因是您可能将 bacpac/dacpac 导入到不同的数据库名称中，因此对 [MyDatabase] 的引用可能无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-13T13:39:34.687

如果您的构建顺序不正确，您可能会遇到这种情况。

从源代码管理中提取项目的新副本并执行“构建解决方案”时，我遇到了这个问题。

如果引用不起作用，请确保构建引用的数据库 [other_db]。一旦我建立 [other_db] 我的参考工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-31T17:17:28.963

当我将项目属性 > 目标平台从 SQL Server 2016 更改为 SQL Server 2014 时，这些错误开始出现。

在我的场景中，我有一个由一个 SSDT 项目 (A) 中的外部工具创建的数据库，以及另一个项目 (B) 中的我的 SQL 视图等，并参考了 B->A。

针对 SQL 2016 进行开发后，我发现我们的测试环境在 2014 年运行，因此更改了 (B) 中的目标平台，以便进行部署。(A) 未部署 - 还安装并配置了外部工具以生成相同的数据库。

奇怪的是，我后来能够更改 (B) 中的视图并发布，但后来想删除一列。此时，由于这些参考错误，发布一直失败。将项目 (A) 上的目标平台更改为 2014，然后清除错误并允许我继续。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-15T11:30:45.530

在尝试了上述所有四个答案之后，我的两个存储过程仍然出现相同的错误。（从 1000+ 个错误到只有 2 个）

所以现在起作用的是，我只是用表名本身替换了表别名，然后构建成功了。

```
--From
table1 t1 join table2 t2
t1.col1 = t2.col1
--To
table1 t1 join table2 t2
table1.col1 = t2.col1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-04T18:41:45.693

以上解决方案都不适合我。

但是这个：

![添加数据库引用](../Images/3df778329d88d5c38abf70bc5834e2b7.png)

并更改那些引用其他数据库项目的脚本。例如，如果您有一个引用的视图`AdventureWorks`，请`AdventureWorksDW`使用以下语法：

```
select * from [$(Your Database Variable)].Schema.Object 
```

例如

```
select * from [$(Your Database Variable)].dbo.dimDate 
```

# android - Android蓝牙聊天示例-如何让用户等待消息

> ID：12161394
> 
> 赞同：0
> 
> 时间：2012-08-28T14:21:37.263
> 
> 标签：android, bluetooth, chat

我正在解释蓝牙聊天示例，并试图找到一种方法使一个设备只能在从其他设备收到消息后才能写入。例如，第一台设备连接到第二台设备，因此第二台设备在从第一台设备收到消息之前无法写入（发送消息）。试图进行一些搜索，但一无所获......也许有人可以帮助我吗？代码中的示例更改将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T06:42:27.260

我不知道蓝牙提供的任何机制，这将帮助您完成您正在尝试实现的内容。但你可以做这样的事情

```
class YourClass {
    private boolean allowedToSend = false;
    private void send() {
        if(allowedToSend) {
            allowdToSend = false;
            //Sending your data
        }
    }
    private void receive() {
        allowdToSend = true;
        //receiving your data
    }
} 
```

# java - 使用 Java 获取特定日期的 Bloomberg 字段

> ID：12161395
> 
> 赞同：1
> 
> 时间：2012-08-28T14:21:42.770
> 
> 标签：java, bloomberg

我正在尝试从 Bloomberg Java API 中提取特定的数据字段。我从开发人员指南中看到，我可以通过以下方式引入一些领域：

```
Request request = refDataSvc.createRequest("ReferenceDataRequest");
request.getElement("securities").appendValue("AAPL US Equity");
request.getElement("securities").appendValue("IBM US Equity");

request.getElement("fields").appendValue("PX_LAST"); // Last Price
request.getElement("fields").appendValue("DS002"); // Description
request.getElement("fields").appendValue("VWAP_VOLUME");
session.sendRequest(request, new CorrelationID(1)); 
```

如何在获取特定日期范围内的某些字段的同时拨打这样的电话？例如，我想获得：最后交易价格、最后交易量、2012 年 8 月 27 日的开盘价以及 8 月 26 日上午 9 点到 11 点之间的 VWAP 交易量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:42:13.047

您需要创建一个“HistoricalDataRequest”请求：

```
Request request = refDataSvc.createRequest("HistoricalDataRequest"); 
```

然后，您可以指定开始日期和结束日期：

```
DateTimeFormatter fmt = DateTimeFormat.forPattern("yyyyMMdd");
request.set("startDate", startDate.toString(fmt));
request.set("endDate", endDate.toString(fmt)); 
```

在您的情况下，第一个请求的 startdate 和 enddate 将是 8 月 27 日，第二个请求是 8 月 26 日。

但是，我不确定如何在历史请求中覆盖字段 (`VWAP_START_TIME`和`VWAP_END_TIME`) 以将 VWAP 限制为上午 9 点到 11 点，对于参考数据，您可以像下面的代码一样进行处理 - 它也可能适用于历史请求：

```
Element overridesElt = request.getElement("overrides");
Element override = overridesElt.appendElement();
override.setElement("fieldId", "VWAP_START_TIME");
override.setElement("value", "09:00:00");

override = overridesElt.appendElement();
override.setElement("fieldId", "VWAP_END_TIME");
override.setElement("value", "11:00:00"); 
```

# python - 为什么 Python 没有隐式转换？

> ID：12161402
> 
> 赞同：4
> 
> 时间：2012-08-28T14:22:04.703
> 
> 标签：python, concatenation

> **可能重复：**
> [为什么 Python 在连接字符串时不执行类型转换？](https://stackoverflow.com/questions/6380500/why-does-python-not-perform-type-conversion-when-concatenating-strings)

与 C++ 或 Java 不同，每当我有类似`print "Hello " + 1`. 我收到一个错误，它无法连接`str`和`int`对象。为什么这种转换不像其他语言那样隐式完成？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T14:26:12.743

```
print "Hello", 1 
```

串联不起作用的原因是字符串对象中没有任何代码来执行类型转换作为其`__add__()`方法的一部分。至于为什么，想必圭多认为这是个坏主意。Python 之禅说“显式胜于隐式”。

但是，您可以编写一个以这种方式工作的字符串子类：

```
class MagicStr(str):
    def __add__(self, other):
        return MagicStr(str(self) + str(other))
    def __radd__(self, other):
        return MagicStr(str(other) + str(self))
    __iadd__ = __add__ 
```

当然，没有办法让 Python 将该类用于字符串文字或用户输入，因此您最终不得不不断地转换字符串：

```
 MagicStr("Hello") + 1 
```

在这一点上，您不妨只写：

```
 "Hello" + str(1) 
```

# java - 数据库与spring roo的关系

> ID：12161404
> 
> 赞同：1
> 
> 时间：2012-08-28T14:22:10.660
> 
> 标签：java, database, spring, spring-roo, table-relationships

是否可以在两个不同持久性单元中的两个实体之间创建关系（@OneToMany，@ManyToMany）？

遵循此设置[http://viralpatel.net/blogs/spring-roo-two-database-configuration/](http://viralpatel.net/blogs/spring-roo-two-database-configuration/)后， 我想查看使用一个持久单元上下文创建的实体是否可以与另一个上下文中的另一个实体交互。

如果这不可能，我是否只需要自己管理交易？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T08:11:28.387

您不能跨两个不同的上下文/数据库建立关系。一些数据库允许您设置 db-links。这些在数据库中创建了一个虚拟模式/数据库，它看起来像在同一个数据库中，即使它不是。但是，我发现这些类型的解决方案很慢而且有问题。

此外，在处理 2 个不同的数据库时，事务管理变得更加复杂。您可以使用完整的 2 阶段提交事务管理。或者您可以使用专门用于您的 2 个数据库实例的自定义事务管理器。

# windows-8 - 提供 Windows 8 应用程序和桌面应用程序

> ID：12161407
> 
> 赞同：3
> 
> 时间：2012-08-28T14:22:16.187
> 
> 标签：windows-8, desktop-application, windows-store

我希望在我的桌面应用程序中提供 Metro 应用程序。问题是用户将获得桌面应用程序，而 Metro 应用程序将只是一个没有桌面应用程序实际上毫无用处的伴侣。因此，由于消费者无法在没有商店的情况下获得 Win 8 应用程序（至少据我所知），我正在寻找替代方案。例如，是否可以在安装期间调用 Windows 应用商店并直接在配套应用程序的商店页面上获取用户？更好的是，是否有可能使该过程自动化？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T14:29:12.600

您只需要记录商店中有一个姊妹应用程序可用的事实。如您所知，此配套应用程序仍需经过严格的 Microsoft 测试程序，因此无法与桌面版本一起提供。我想你可以在你的主应用程序中的某个地方有一个“获取 Metro App”链接，该链接会转到你的 Metro 页面以供下载......

您必须将桌面应用程序模块化，以便在使用和不使用 Windows 8 Metro 应用程序的情况下工作（我相信无论如何你都会这样做）。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T17:56:18.373

Your app must be fully functional to pass Store certification. You wrote ...

> "... Metro app would just be a companion that is practically useless without the desktop application."

Section 1.2 of the [Certification Requirements](http://msdn.microsoft.com/en-US/library/windows/apps/hh694083) reads ...

> The Windows Store offers only fully functional apps to provide customers with the best experience. Anything that might cause our testers to think that your app is not completely finished will cause your app to fail certification.

The testers will not install a companion app and therefore your app will fail certification. It will also likely fail 1.1 ...

> Your app must offer customers unique, creative value or utility in all the languages and markets that it supports

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T16:51:05.020

从您的问题中不清楚“商店”应用程序是否会与桌面应用程序通信。如果需要安装桌面应用程序才能充分使用商店应用程序，那么认证过程将会复杂得多。您需要将桌面应用程序的副本提供给认证团队进行测试，并且不能保证此类应用程序会被商店接受。

# php - 如何将元信息添加到 wp-admin 中的自定义帖子类型？

> ID：12161408
> 
> 赞同：1
> 
> 时间：2012-08-28T14:22:15.417
> 
> 标签：php, wordpress, custom-post-type

我已经为我正在处理的 wordpress 网站设置了 3 种自定义帖子类型，在 functions.php 中使用以下代码：

```
if ( function_exists('add_action') )
{
    add_action( 'init', 'create_post_types' );
    function create_post_types()
    {
        register_post_type('dj',Array('labels' => Array('name' => "DJ&#8217;s",'singular_name' => "DJ"),'public' => true,'has_archive' => true));
        register_post_type('gerecht',Array('labels' => Array('name' => "Gerechten",'singular_name' => "Gerecht"),'public' => true,'has_archive' => true));
        register_post_type('agenda',Array('labels' => Array('name' => "Agenda",'singular_name' => "Evenement"),'public' => true,'has_archive' => true));
    }
} 
```

但是在 wp-admin 屏幕中，我无法在帖子中添加任何元信息。我该如何解决这个问题，或者这是不可能的？

编辑：我不想为此使用任何插件，而是自己编写代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:24:08.150

就个人而言，我会使用名为[Advanced Custom Fields](http://wordpress.org/extend/plugins/advanced-custom-fields/)的插件，它提供了非常好的界面来执行此操作，因为它提供了广泛的选项。

您可以将上述内容与[Custom Post Type UI](http://wordpress.org/extend/plugins/custom-post-type-ui/)结合使用，它允许您使用 UI 创建自定义帖子类型和分类。仅供参考，您可以“获取代码”并将其放入您的 functions.php 中。

一个例子：

```
register_post_type('custom-post-name', array(  'label' => 'Custom Post Label','description' => '','public' => true,'show_ui' => true,'show_in_menu' => true,'capability_type' => 'post','hierarchical' => false,'rewrite' => array('slug' => ''),'query_var' => true,'exclude_from_search' => false,'supports' => array('title','editor','custom-fields',),'labels' => array (
  'name' => 'Custom Post Name',
  'singular_name' => 'Value',
  'menu_name' => 'Custom Post Menu Name',
  'add_new' => 'Add Item',
  'add_new_item' => 'Add New Item',
  'edit' => 'Edit',
  'edit_item' => 'Edit Item',
  'new_item' => 'New Item',
  'view' => 'View Item',
  'view_item' => 'View Item',
  'search_items' => 'Search Custom Post',
  'not_found' => 'No Item(s) Found',
  'not_found_in_trash' => 'No Item(s) Found in Trash',
  'parent' => 'Parent Value',
),) ); 
```

您可能想查看数组并添加您自己的描述性数据，即它所说`Item`的`singular_name`和`name`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:41:47.410

您需要在初始化数组中添加*支持字段，如下所示：*

```
register_post_type('dj', Array(
    'labels' => Array(
         'name' => "DJ&#8217;s",
         'singular_name' => "DJ"
     ),
    'public' => true,
    'has_archive' => true,
    'supports' => array('title', 'editor', 'custom-fields') // notice 'custom-fields'
)); 
```

默认情况下它只有*title*和*editor*，这就是为什么你可能不会在后端得到它们。

支持的功能的完整列表如下所示：

*   *title* : 用于创建帖子标题的文本输入字段。
*   *editor* : 用于写作的内容输入框。
*   *评论*：能够打开/关闭评论。
*   *trackbacks*：能够打开/关闭trackbacks和pingbacks。
*   *修订*：允许对您的帖子进行修订。
*   *author*：显示一个用于更改帖子作者的选择框。
*   *excerpt*：用于编写自定义摘录的文本区域。
*   *thumbnail* : 缩略图（3.0 中的特色图片）上传框。
*   *custom-fields*：自定义字段输入区域。
*   *page-attributes*：为页面显示的属性框。这对于分层帖子类型很重要，因此您可以选择父帖子。

这是关于该主题的一篇不错的文章：[WordPress 中的自定义帖子类型](http://justintadlock.com/archives/2010/04/29/custom-post-types-in-wordpress)。

这里也是询问 WordPress 相关问题的更好地方：[WordPress Answers](https://wordpress.stackexchange.com/)。

# javascript - 有没有办法在服务器端页面加载之前运行 javascript？

> ID：12161416
> 
> 赞同：0
> 
> 时间：2012-08-28T14:22:48.103
> 
> 标签：javascript, asp.net, vb.net

在我的应用程序（asp.net - 使用 vb 作为语言背后的代码）中，服务器端 (vb) 页面加载代码首先运行，然后在完成时运行 javascript onload。无论如何要先运行javascript onload吗？我的 javascript 从父窗口（使用 iframe）获取变量的值，并使用它在子窗口中设置控件。页面加载处理控件集（如果来自父级的值是某个值，则将自动选中不同的复选框）。

我能想到的这个问题的唯一其他解决方案是检查当前的值，以查看在另一个生成页面 html 的函数运行时是否选中了这些框。问题在于该函数是使用 pagemethods 从 javascript 调用的，并且需要共享，因此我无法检查该函数的开头是否已选中复选框。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:25:03.033

不，javascript 总是在服务器完成向客户端发送响应后在客户端上运行。

您必须更改您的 javascript 以针对生成的 html 运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T15:01:27.820

你的问题的答案是否定的。

但是，如果我了解您要执行的操作，则您希望根据服务器的值修改控件。为什么不直接发送 AJAX 请求来获取该值，然后相应地更新控件。

话虽如此，您的应用程序的架构似乎有点混乱，所以如果您只需要一个创可贴，也许您可​​以生成该服务器值，将其呈现在 id 或隐藏的输入元素中，然后读取该值用你的 JS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T15:13:31.570

如果您只是使用它从父窗口获取值，则可以使用我以前使用过的一些解决方法。从您的父窗口中，您可以设置 iframe 的源并在其上附加一个查询字符串，该字符串将具有您的价值。然后从 iframe 中的页面，您可以检查查询字符串以获取值，然后相应地检查您的复选框。

在加载 pr prerender 中，根据您设置所需变量的时间，您可以在主页上放置类似`iframeWhatever.Attributes.Add("src", "../filepath/page.aspx?ValueNeeded=" + ValueNeeded.ToString)`

我很确定这将能够完成您当前尝试使用 javascript 完成的工作。

# knockout.js - Knockout JS 和依赖视图模型

> ID：12161418
> 
> 赞同：0
> 
> 时间：2012-08-28T14:22:53.660
> 
> 标签：knockout.js

我正在为如何用 Knockout 最好地表示我的数据而苦苦挣扎。拥有一个包含子视图模型的主视图模型还是只有一个主视图模型更好？以下是表示数据的方式的示例：

```
Company { CompanyID, Industry, Name, Address, Phone }

Employee { CompanyID, EmployeeID, Name, Address, Phone } 
```

可以有很多公司，每个公司可以有很多员工。我需要用户能够从下拉列表中选择一家公司，填写公司记录，然后显示员工记录列表。如果公司记录发生更改，我只想将公司记录（通过 jSON）发回服务器。如果员工记录发生变化，我只想将员工记录发送回服务器。

当然，在`Employee`加载记录之前不能加载任何记录`Company`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:15:14.793

Try not to think about "better" ... instead think about what your View needs. Build a viewmodel for it with the models that it needs. if you need a list of companies, to select a company, then to show a list of employees all in one View then you could have a viewmodel which exposes this hierarchy of models.

Or you could create multiple Views: 1 for selecting the company from a list, 1: for show company details, 1: for selecting employees ... you get the idea. Then each view has its own viewmodel with that data.

Or you can create a master viewmodel with sub viewmodels.

I usualyl start with 1 View and 1 ViewModel and only split amongst several once I get to a point where it feels like the ViewModel (or view) is getting heavy.

# html - 水平对齐 div 中的图像

> ID：12161422
> 
> 赞同：2
> 
> 时间：2012-08-28T14:23:06.203
> 
> 标签：html, css, image, alignment

如果图像太多，希望水平对齐多个图像并让它们沿页面向下流动。（这是一个位于 wordpress 帖子中间的迷你画廊）。

在尝试了在此站点上找到的多种代码变体后，我仍然无法使其正常工作。但是它在 JSFiddle 上运行良好......

**这里需要的链接：**

[JSFiddle 的工作代码](http://jsfiddle.net/tzhsu/4/ "在职的")

[我网站上的非工作代码](http://goo.gl/T7Ym6)（即使使用与上面完全相同的代码）。

有人可以帮助我解决问题吗？

* *HTML 和 CSS 在第一个“JSFiddle”链接中很明显*

**使用最新版本的 wordpress*

**问题已解决：（** *由于是新的，我无法在另外 8 小时内回答我自己的问题）*

wordpress 中有自动格式化和自动文本，它会自动在我的图像超链接的末尾添加“中断”。

在 CSS 中添加了“.photographs br {display: none;}”，它工作正常！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T14:25:27.573

您的图像之间有`<br>`标签。删除它们，它会自行修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T14:26:51.143

`<br/>`在您的代码中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T22:24:05.640

**问题解决了！**

有`Auto Formatting`或`AutoText`中`Wordpress`有自动添加`<br />`到我的图像超链接的末尾。

添加`.photographs br {display: none;}`到 中`CSS`，它可以作为一种享受。

# symfony - 为什么我的 Symfony 2.0 站点在带有 Linux 主机的 Vagrant 上运行缓慢？

> ID：12161425
> 
> 赞同：17
> 
> 时间：2012-08-28T14:23:12.813
> 
> 标签：symfony, vagrant

我有一个 Symfony 2.0 应用程序，它使用 Vagrant 和 Linux 来宾和主机 O/S (Ubuntu) 运行。但是，它运行缓慢（例如，加载页面需要几秒钟，通常超过 10 秒），我不知道为什么。我在本地而不是在 Vagrant VM 上运行该站点的同事使其运行速度更快。

我在其他地方读到过，如果未启用 NFS，Vagrant VM 的运行速度会非常慢，但我已经启用了它。我也在使用 APC 缓存来尝试加快速度，但问题仍然存在。

[我使用http://webmozarts.com/2009/05/01/speedup-performance-profiling-for-your-symfony-app](http://webmozarts.com/2009/05/01/speedup-performance-profiling-for-your-symfony-app)上的说明对我的网站运行 xdebug ，但我不清楚从哪里开始分析数据由此而来。我已经在 KCacheGrind 中打开它并在“Incl.”下寻找高数字。和“自我”，但这只是表明`php::session_start`需要相当长的时间。

关于我应该在这里尝试什么的任何建议？抱歉这个稍微宽泛的问题，但我很难过！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-04T12:40:30.053

我在我的 OS X 主机上看到过类似的问题，我忘了启用**NFS**！在 Windows 主机上，性能影响不太真实......对于我非常小的网站，我有 12649 个文件......所以很容易达到 1000+ 个文件的限制。

所以我的两分钱：在你的 Vagrantfile 中启用这样的**NFS ：**

```
config.vm.share_folder "v-root", "/vagrant", ".." , :nfs => true 
```

并且来自专家：

> 众所周知，VirtualBox 共享文件夹的性能会随着共享文件夹中文件数量的增加而迅速下降。当一个项目达到 1000 多个文件时，做一些简单的事情，比如运行单元测试，甚至只是运行一个应用服务器，可能比在原生文件系统上慢很多数量级（例如，从 5 秒到 5 分钟以上）。
> 
> 如果您在共享文件夹中看到这种性能下降，NFS 共享文件夹可以提供解决方案。Vagrant 将在主机上编排 NFS 服务器的配置，并为您在来宾上挂载文件夹。
> 
> 注意：Windows 主机不支持 NFS。根据 VirtualBox 的说法，Windows 上的共享文件夹不应遭受与基于 unix 的系统相同的性能损失。如果这不是真的，请随时使用我们的支持渠道，也许我们可以帮助您。

编辑：

在 Windows 上，我找到了另一个解决方案，我在我的项目中的供应商文件夹上使用符号链接 (ln -fs) 链接到非共享文件夹。这减少了 Windows 主机、防病毒软件等看到的文件数量。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-08T09:22:49.333

在我工作的地方，我们尝试了两种解决 Vagrant + Symfony 速度慢的问题的方法。我推荐第二个（nfs 和绑定挂载）。

**rsync 方法**

首先，我们使用[rsync](https://docs.vagrantup.com/v2/synced-folders/rsync.html)。[我们的方法与AdrienBrault 的回答](https://stackoverflow.com/a/12168060/328817)中概述的方法略有不同。相反，我们的代码如下`Vagrantfile`：

```
config.vm.define :myproj01 do |myproj|
  # Networking & Port Forwarding
  myproj.vm.network :private_network, type: "dhcp"
  # NFS Share
  myproj.vm.synced_folder ".", "/home/vagrant/current", type: 'rsync', rsync__exclude: [
    "/.git/",
    "/vendor/",
    "/app/cache/",
    "/app/logs/",
    "/app/uploads/",
    "/app/downloads/",
    "/app/bootstrap.php.cache",
    "/app/var",
    "/app/config/parameters.yml",
    "/composer.phar",
    "/web/bundles",
    "/web/uploads",
    "/bin/behat",
    "/bin/doctrine*",
    "/bin/phpunit",
    "/bin/webunit",
  ]
  # update VM sooner after files changed
  # see https://github.com/smerrill/vagrant-gatling-rsync#working-with-this-plugin
  config.gatling.latency = 0.5
end 
```

正如您可能从上面注意到的那样，我们使用[Vagrant gatling rsync 插件](https://github.com/smerrill/vagrant-gatling-rsync)保持文件同步。

**改进的 NFS 方法，使用绑定挂载（推荐解决方案）**

rsync 方法解决了速度问题，但我们发现它存在一些问题。特别是，当在 VM 上生成文件（如`composer.lock`或 Doctrine 迁移）时，或者当我们想要访问`/vendor`. 我们必须使用 SFTP 将内容复制回来 - 对于新文件，请在下一次运行 gatling 插件清除它们之前执行此操作！

因此，我们转向了一种解决方案，该解决方案使用[绑定挂载](http://backdrift.org/how-to-use-bind-mounts-in-linux)来以不同的方式处理缓存和日志等文件夹。没有这些共享会大大提高速度。

Vagrantfile 的相关位如下：

```
# Binding mounts for folders with dynamic data in them
# This must happen before provisioning, and on every subsequent reboot, hence run: "always"
config.vm.provision "shell",
  inline: "/home/vagrant/current/bin/bind-mounts",
  run: "always" 
```

上面引用的`bind-mounts`脚本如下所示：

```
#!/bin/bash

mkdir -p ~vagrant/current/app/downloads/
mkdir -p ~vagrant/current/app/uploads/
mkdir -p ~vagrant/current/app/var/
mkdir -p ~vagrant/current/app/cache/
mkdir -p ~vagrant/current/app/logs/

mkdir -p ~vagrant/shared/app/downloads/
mkdir -p ~vagrant/shared/app/uploads/
mkdir -p ~vagrant/shared/app/var/
mkdir -p ~vagrant/shared/app/cache/
mkdir -p ~vagrant/shared/app/logs/

sudo mount -o bind ~vagrant/shared/app/downloads/ ~/current/app/downloads/
sudo mount -o bind ~vagrant/shared/app/uploads/ ~/current/app/uploads/
sudo mount -o bind ~vagrant/shared/app/var/ ~/current/app/var/
sudo mount -o bind ~vagrant/shared/app/cache/ ~/current/app/cache/
sudo mount -o bind ~vagrant/shared/app/logs/ ~/current/app/logs/ 
```

NFS + 绑定安装是我推荐的方法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-28T21:54:35.487

ATM 基本上不会将您的网站代码放在 /vagrant 共享文件夹中。由于它在您的 VM 和主机 O/S 之间共享，因此速度较慢；而且我没有找到任何有效的解决方案来获得良好的性能。我们使用的解决方案是从经典的 /var/www 为我们的开发应用程序提供服务，并使用 rsync 使它们与我们的本地副本保持同步。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-12-06T12:08:50.643

按照这篇文章[Speedup Symfony2 on Vagrant box](http://www.whitewashing.de/2013/08/19/speedup_symfony2_on_vagrant_boxes.html "在 Vagrant 盒子上加速 Symfony2")的说明，帮助我解决了这个问题，将我的 Symfony2 项目的页面加载时间从 6-10 秒减少到 1 秒。基本上所有的解决方法是使用 NFS 设置主机和来宾（vagrant VM 框）之间的同步类型，而不是使用非常慢的 VirtualBox 共享文件夹系统。

还将以下代码添加到 Symfony2 项目的 AppKernel.php 中，将缓存和日志目录更改为 vagrant box 上的共享内存目录（/dev/shm），而不是将它们写入 NFS 共享，因此它改善了页面加载速度甚至更好。

```
<?php

class AppKernel extends Kernel
{
    // ...

    public function getCacheDir()
    {
        if (in_array($this->getEnvironment(), array('dev', 'test'))) {
            return '/dev/shm/appname/cache/' .  $this->getEnvironment();
        }

        return parent::getCacheDir();
    }

    public function getLogDir()
    {
        if (in_array($this->getEnvironment(), array('dev', 'test'))) {
            return '/dev/shm/appname/logs';
        }

        return parent::getLogDir();
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T09:42:32.167

我使用 sshfs 在主机 OS 和 VM 之间共享目录（Windows 的扩展驱动器）它比原生 VBox 目录共享快得多

# asp.net - 从 .NET 代码导出 Excel 中的数据时引发“System.OutOfMemoryException”

> ID：12161436
> 
> 赞同：0
> 
> 时间：2012-08-28T14:23:35.007
> 
> 标签：asp.net, vb.net, excel, export

我有一个代码来调试我试图在 Excel 中导出数据的位置。它适用于较小的数据，但是当数据大小增加到数千时，我得到“内存不足异常”。我的应用程序在 IIS 6.0 上运行。有什么建议吗？

PS：进程通常在占用超过 1.2 GB 内存时会失败（查看任务管理器）

```
Protected Overrides Sub Render(ByVal writer As System.Web.UI.HtmlTextWriter)
  If (IsExportToCSV) Then
  Response.Clear()
        Response.ContentType = "application/vnd.ms-excel"

        Response.ContentType = "a"
        'Remove the charset from the Content-Type header.
        Response.Charset = ""
        'Turn off the view state.
        Page.EnableViewState = False
        Dim tw As System.IO.StringWriter
        tw = New System.IO.StringWriter
        Dim hw As HtmlTextWriter = New HtmlTextWriter(tw)
        'Get the HTML for the control.
        Me.GridView1.AllowPaging = False
        Me.GridView1.DataBind()
        Me.GridView1.EnableViewState = False
        Me.GridView1.AutoGenerateEditButton = False
        Me.GridView1.RenderControl(hw)
        Response.Write(tw.ToString)
        Response.Flush()
        Response.End()

    Else
        MyBase.Render(writer)
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T19:22:27.183

完美解决方案！

我一直在与这个作斗争，解决方案非常简单：不要构建一个字符串来传递给响应写入，因为字符串存在于内存中，而是使用多个 Response.Write 调用将每一行直接放入响应中

将 DataTable 转换为 HTML 表并作为 excel 发送到客户端的示例...

```
string contentType = "Reports.xls";
string fileName = "application/msexcel";

Response.Clear();
Response.Buffer = true;
Response.ContentType = contentType;
string attachment = string.Format("attachment; filename=\"{0}\"", fileName);
Response.AddHeader("Content-Disposition: ", attachment);
byte[] preamble = Encoding.UTF8.GetPreamble();
Response.BinaryWrite(preamble);

string strFontSize = "12";

Response.Write("<html xmlns:o=\"urn:schemas-microsoft-com:office:office\" \r\n xmlns:x=\"urn:schemas-microsoft-com:office:excel\" \r\n xmlns=\"http://www.w3.org/TR/REC-html40\">");
Response.Write(@"<head>");
Response.Write("<meta http-equiv=Content-Type content=\"text/html; charset=windows-1252\">");
Response.Write("<meta name=ProgId content=Excel.Sheet>");
Response.Write("<meta name=Generator content=\"Microsoft Excel 11\">");
Response.Write(@"</head>");
Response.Write(@"<body>");

Response.Write(@"<table style='width: 100%; font-size:" + strFontSize + ";' border='1'>");

foreach (DataColumn column in dt.Columns)
    {
        Response.Write(@"<td><b>" + column.ColumnName + "</b></td>");
    }
Response.Write(@"</tr>");

int intCell = 0;
string strCell = "";
foreach (DataRow row in dt.Rows)
    {
        intCell = 0;
        Response.Write(@"<tr>");
        foreach (DataColumn column in dt.Columns)
        {
            strCell = row.ItemArray[dt.Columns[column.ColumnName].Ordinal].ToString().Trim();
            Response.Write(@"<td>" + strCell + "</td>");
        }
        Response.Write(@"</tr>");
    }
Response.Write(@"</table>");
Response.Write(@"</body>");
Response.Write(@"</html>");
Response.End(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:29:47.943

将每一行直接写入响应流的信息，而不是通过 StringWriter

# python - 多处理导致 PicklingError

> ID：12161437
> 
> 赞同：2
> 
> 时间：2012-08-28T14:23:37.497
> 
> 标签：python, multiprocessing, pickle

执行示例

```
from multiprocessing import Process

def f(name):
    print 'hello', name

if __name__ == '__main__':
    p = Process(target=f, args=('bob',))
    p.start()
    p.join() 
```

从包的 python 文档中`multiprocessing`得到一个`PicklingError: Can't pickle <function f at 0x05A57830>: it's not found as __main__.f`.

我该如何解决这个问题？

*完整的错误信息是*

```
Traceback (most recent call last):
  File "<ipython console>", line 1, in <module>
  File "C:\Python27\lib\site-packages\spyderlib\widgets\externalshell\startup.py", line 128, in runfile
    execfile(filename, glbs)
  File "C:\Users\Ruben\Desktop\untitled0.py", line 15, in <module>
    p.start()
  File "C:\Python27\lib\site-packages\multiprocessing-2.6.2.1-py2.7-win32.egg\multiprocessing\process.py", line 109, in start
    self._popen = Popen(self)
  File "C:\Python27\lib\site-packages\multiprocessing-2.6.2.1-py2.7-win32.egg\multiprocessing\forking.py", line 244, in __init__
    dump(process_obj, to_child, HIGHEST_PROTOCOL)
  File "C:\Python27\lib\site-packages\multiprocessing-2.6.2.1-py2.7-win32.egg\multiprocessing\forking.py", line 167, in dump
    ForkingPickler(file, protocol).dump(obj)
  File "C:\Python27\lib\pickle.py", line 224, in dump
    self.save(obj)
  File "C:\Python27\lib\pickle.py", line 331, in save
    self.save_reduce(obj=obj, *rv)
  File "C:\Python27\lib\pickle.py", line 419, in save_reduce
    save(state)
  File "C:\Python27\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Python27\lib\pickle.py", line 649, in save_dict
    self._batch_setitems(obj.iteritems())
  File "C:\Python27\lib\pickle.py", line 681, in _batch_setitems
    save(v)
  File "C:\Python27\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Python27\lib\pickle.py", line 748, in save_global
    (obj, module, name))
PicklingError: Can't pickle <function f at 0x05A57830>: it's not found as __main__.f 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T15:53:45.897

这是 IPython 中的一个[已知错误](https://github.com/ipython/ipython/issues/29)。您正在从 ipython 控制台运行代码：

```
File "<ipython console>", line 1, in <module> 
```

`__main__` [引用 FakeModule](https://github.com/ipython/ipython/issues/29)和 pickle 的地方找不到`__main__.f`：

```
PicklingError: Can't pickle <function f at 0x05A57830>: it's not found as __main__.f 
```

（`multiprocessing`用于`pickle`将函数和参数传递给工作进程。）

所以解决方案是将您的代码作为脚本运行，而不是从`ipython`.

# spring - 使用 Ext JS 模型加载方法在参数名称中使用句点

> ID：12161445
> 
> 赞同：0
> 
> 时间：2012-08-28T14:24:10.083
> 
> 标签：spring, extjs

将 Ext-JS 4.1 与 Spring 3.1 控制器一起使用。

我正在尝试使用 load() 方法从我的 Spring Controller 中检索一个对象。我从文本字段中读取一个字符串并将其发送到 load 方法。字符串字段将包含一个完全限定的服务器名称，例如“company.server.com”。发生的情况是 Spring 控制器中的值是“company.server”，换句话说，它删除了“.com”。我在末尾添加了一个附加句号，例如“company.server.com”。然后它以“company.server.com”的形式出现。似乎正在进行某种标记化。我使用逗号 (,) 只是为了看看会发生什么。使用逗号，字符串按预期输入。由于某些原因，句点 (.) 导致了问题。

这是模型：

```
Ext.define('AB.model.Server', {
    extend: 'Ext.data.Model',
    fields: [
        {name:'serverName', type:'String'},
        {name:'memory', type:'String'},
        {name:'cpus', type:'int'}
    ],

    proxy {
        type: 'rest',
        url: '/web/user/'
    }
}); 
```

下面是调用 load() 的表单片段：

```
Ext.define('AB.view.Form', {
    extend: 'Ext.form.Panel',

    ....

    ,{
        xtype: 'button',
        text: 'Retrieve Information',
        handler: function() {
           Ext.ModelManager.getModel('AB.model.User').load(Ext.getCmp('serverName').getValue(), {
               success: function(user) {
                   alert("Success");
        }

    ....
} 
```

使用 Firebug，我将其视为被调用的 URL：

```
http://myServer/web/user/company.server.com?_dc=13461612333647?id=company.server.com 
```

所以 URL 具有正确的服务器名称，但在 Spring Controller 端，我的参数值是“company.server”。

当我直接在我的网络浏览器中直接输入以下 URL 时：

```
http://myServer/web/user/company.server.com/ 
```

它与 Spring Controller 中的参数“company.server.com”一起正常工作。

这是一个 EXT JS 问题吗？EXT JS to Spring有问题吗？我不认为这只是一个 Spring 问题，因为直接在浏览器中的 URL 可以正常工作。

更新：

当我将以下 URL 直接放在我的网络浏览器中时：

```
http://myServer/web/user/company.server.com 
```

它的行为与 EXT JS Rest 调用相同。请注意，没有结束斜杠 (/)。所以也许这是一个春天的问题？或者可能是 web.xml 问题？

# networking - Linux VirtualBox 与 Win7 来宾网络无线问题

> ID：12161446
> 
> 赞同：0
> 
> 时间：2012-08-28T14:24:10.967
> 
> 标签：networking, virtualbox

带有 Linux Mint 13 主机和 Win7 Guest 的笔记本电脑。配置了 2 个网络适配器，1 个 NAT 和 1 个桥接。如果网络电缆插入笔记本电脑，客人将只能看到互联网。如果笔记本电脑在无线或移动宽带上，将看不到互联网。

在来宾网络适配器属性中禁用了 IPV6（来自 VB 论坛）。

当主机使用非有线连接时，如何让客人看到互联网？这曾经在几个月前工作，但也许 VB 已经更新了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T04:12:21.107

在 Virtualbox 中找到了连接问题的简单解决方案：

1.  在虚拟机/来宾机的 Virtualbox 设置 中将**网络设置设置为 NAT**
2.  启动到虚拟机/访客机后，转到网络适配器属性，
    然后插入以下**DNS 服务器地址**：
    **208.67.222.222
    208.67.220.220**
    （OpenDNS 配置）
3.  现在已经建立了完整的互联网连接。

# android - Android：一次添加 3 个事件

> ID：12161452
> 
> 赞同：0
> 
> 时间：2012-08-28T14:24:25.360
> 
> 标签：android, events, calendar

我有这个代码

```
 Calendar cal = Calendar.getInstance();
                cal.set(Integer.parseInt(data_scelta_splittata[2]),Integer.parseInt(data_scelta_splittata[1]),Integer.parseInt(data_scelta_splittata[0]),Integer.parseInt(ora_scelta_splittata[0]),Integer.parseInt(ora_scelta_splittata[1]));
                Intent intent = new Intent(Intent.ACTION_EDIT);
                intent.setType("vnd.android.cursor.item/event");
                intent.putExtra("beginTime", cal.getTimeInMillis());
                intent.putExtra("allDay", "allDayFlag");
                intent.putExtra("rrule", "FREQ=DAILY");
                intent.putExtra("endTime", cal.getTimeInMillis());
                intent.putExtra("title", "Avviso Bioscalin "+prodotto);
                startActivity(intent); 
```

问题是我需要同时添加 3 个事件，此代码添加一个事件并提示用户添加预编译的日历，但我不能这样做 3 次，这对用户来说很无聊。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:51:17.427

如果您使用的是 4.0+，则可以使用[CalendarContract](http://developer.android.com/reference/android/provider/CalendarContract.html)。但是，在 ICS 之前，您的选择更加有限。即使您现在启动的活动也无法在制造商已替换日历应用程序的 Android 设备上运行。

没有任何方法可以操纵 vnd.android.cursor.item 意图使其保持沉默或执行多个请求。此外，虽然您可以通过各种意图与日历应用程序交互，但这种交互没有记录，因此不推荐。

您可能会考虑使用[Google Calendar API](https://developers.google.com/google-apps/calendar/)通过 REST 与用户的日历进行交互。只要您要与之交互的日历是与用户的 Google 帐户相关联的日历，这种方法就会为您提供适用于任何 Android API 级别的代码，以及已替换库存日历应用程序的设备。缺点是它不能让您将事件添加到用户的 Outlook 日历。

# python - Django 使用代理对复杂继承建模

> ID：12161454
> 
> 赞同：0
> 
> 时间：2012-08-28T14:24:29.610
> 
> 标签：python, django, django-models, django-inheritance

我有这些模型：

```
class Base(models.Model):
    # ... attributes
    def f(self):
        raise Exception()

class A(Base):
    attribute = models.IntegerField()

class B(A):
    class Meta:
        proxy = True
    def f(self):
        print "B", attribute

class C(A):
    class Meta:
        proxy = True
    def f(self):
        print "C", attribute 
```

现在我和他们玩了一下，但我发现了一个问题：

```
c = C()
c.attribute = 1
c.save()

b = Base.objects.all()
b.f() # Aspected "C 1" to be printed, exception fired instead! 
```

最后一行以意想不到的方式工作！因此，为了更好地查看文档，我搜索了 Django 自动向下转换属性，但我发现只有一个`A()`没有自动转换的类`B()`或`C()`.

当我保存数据时，还有一种方法可以保存继承吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:41:42.137

根据文档，查询集仍然返回请求的模型。看[这里](https://docs.djangoproject.com/en/dev/topics/db/models/#querysets-still-return-the-model-that-was-requested)

在您的示例中，您返回原始模型 Base 的查询集。

# javascript - 如何让这个 javascript 计算两个侦听器字段作为价格？

> ID：12161457
> 
> 赞同：0
> 
> 时间：2012-08-28T14:24:44.250
> 
> 标签：javascript, function

我有两个用户输入数据的字段，RoomCount 和contractedNights。我不知道我哪里出错了。我已经添加了我的听众，并尝试了一系列不同的方法来让这些字段相乘，并在 calculatePrice 函数中显示最小因子为 60 (math.max60) 的结果。有人可以帮我看看/了解我做错了什么吗？谢谢你。

```
var listenerFieldIDs = {
  "roomCountID": "item4_text_1",
  "contractedNightsID": "item8_text_1"
};

var impactFields = ["item12_text_1", "item1_text_1", "item16_text_1", "item18_text_1", "item20_text_1"];
var estimatedBottleSize = 1.5,
  occupancyRate = (60 / 100),
  collectionDuration = 365,
  soapOuncesRecoverable = 0.63,
  bottleOuncesRecoverable = 0.47,
  lbConversion = 0.0626;

var $ = function (id) {
  return document.getElementById(id);
}

var updateFormField = function (id, amount) {
  $(id).value = amount;
}

var updateForm = function (roomCount, contractedNights) {

  updateFormField(impactFields[0], addCommas(calculateLbsOfSoap(roomCount).toFixed(2)));
  updateFormField(impactFields[1], addCommas(calculateLbsOfBottles(roomCount).toFixed(2)));
  updateFormField(impactFields[2], addCommas(calculateBarsOfSoap(roomCount).toFixed(0)));
  updateFormField(impactFields[3], addCommas(calculateBottles(roomCount).toFixed(0)));
  updateFormField(impactFields[4], ("$" + addCommas(calculatePrice(checkCount(roomCount), contractedNights).toFixed(2))));
}

var listenForNumbers = function (event) {
  updateForm($(listenerFieldIDs["roomCountID"]).value, $(listenerFieldIDs["contractedNightsID"]).value);
}

var calculateLbsOfSoap = function (rmCnt) {
  return checkCount(rmCnt) ? 0 : ((soapOuncesRecoverable * lbConversion) * (rmCnt * occupancyRate) * collectionDuration);
}

var calculateLbsOfBottles = function (rmCnt) {
  return checkCount(rmCnt) ? 0 : ((bottleOuncesRecoverable * lbConversion) * (rmCnt * occupancyRate) * collectionDuration);
}

var calculateBarsOfSoap = function (rmCnt) {
  return checkCount(rmCnt) ? 0 : ((calculateLbsOfSoap(rmCnt) * 16) / 3);
}

var calculateBottles = function (rmCnt) {
  return checkCount(rmCnt) ? 0 : (((calculateLbsOfBottles(rmCnt) * 16) / estimatedBottleSize) * (2 / 3));
}

var calculatePrice = function (rmCnt, contractedNights) {
  return checkCount(rmCnt, contractedNights) ? 0 : (calculatePrice(rmCnt) * (contractedNights));
}

var checkCount = function (count) {
  return (count < 0 || count == 0) ? true : false;
}

var addCommas = function (num) {

  var result = "",
    numString = "",
    numOfDigits = 0;

  numString = num.toString();
  numOfDigits = numString.indexOf(".");

  if (numOfDigits == -1) {
    numOfDigits = numString.length;
  }

  if (numOfDigits < 4) {
    result = num;
  } else {

    var extraDigits = numOfDigits % 3;
    var count = extraDigits;

    if (count != 0) {
      result = numString.substring(0, extraDigits) + ",";
    }

    while (count < numOfDigits) {
      /             
            if(numOfDigits - count == 3){
                break;
            }

            result = result + numString.substring(count,count + 3) + ",";
            count = count + 3;          }

        result = result + numString.substring(count,count + 3) + numString.substring(numOfDigits);

}

return result;
}

var stripCommas = function(formattedNumber){

var strippedFormat = ""; 
var pulledNumbers = formattedNumber.match(/ [0 - 9\.] / );

    for (var i = 0; i < pulledNumbers.length; i++) {
      strippedFormat = strippedFormat + pulledNumbers[i];
    }

    return parseFloat(strippedFormat);

  }

  var initializeRealTimeCalcToForm = function () { //Used to load the needed functionality to the form.

    if (window.attachEvent) {
      $(listenerFieldIDs["roomCountID"]).attachEvent("onkeydown", listenForNumbers, false);
      $(listenerFieldIDs["roomCountID"]).attachEvent("onkeyup", listenForNumbers, false);
      $(listenerFieldIDs["roomCountID"]).attachEvent("onkeypress", listenForNumbers, false);
      $(listenerFieldIDs["roomCountID"]).attachEvent("onchange", listenForNumbers, false);
      $(listenerFieldIDs["contractedNightsID"]).attachEvent("onkeydown", listenForNumbers, false);
      $(listenerFieldIDs["contractedNightsID"]).attachEvent("onkeyup", listenForNumbers, false);
      $(listenerFieldIDs["contractedNightsID"]).attachEvent("onkeypress", listenForNumbers, false);
      $(listenerFieldIDs["contractedNightsID"]).attachEvent("onchange", listenForNumbers, false);
    } else {

      $(listenerFieldIDs["roomCountID"]).addEventListener("keydown", listenForNumbers, false);
      $(listenerFieldIDs["roomCountID"]).addEventListener("keyup", listenForNumbers, false);
      $(listenerFieldIDs["roomCountID"]).addEventListener("keypress", listenForNumbers, false);
      $(listenerFieldIDs["roomCountID"]).addEventListener("change", listenForNumbers, false);
      $(listenerFieldIDs["contractedNightsID"]).addEventListener("keydown", listenForNumbers, false);
      $(listenerFieldIDs["contractedNightsID"]).addEventListener("keyup", listenForNumbers, false);
      $(listenerFieldIDs["contractedNightsID"]).addEventListener("keypress", listenForNumbers, false);
      $(listenerFieldIDs["contractedNightsID"]).addEventListener("change", listenForNumbers, false);
    }

  }

  window.onload = function () { //This will kick start the process to install the functionality onto your form.
    initializeRealTimeCalcToForm();
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:49:50.570

改变

```
updateFormField(impactFields[4], ("$" + addCommas(calculatePrice(checkCount(roomCount), contractedNights).toFixed(2)))); 
```

到：

```
updateFormField(impactFields[4], ("$" + addCommas(calculatePrice(roomCount, contractedNights).toFixed(2)))); 
```

和

```
var calculatePrice = function (rmCnt, contractedNights) {
  return checkCount(rmCnt, contractedNights) ? 0 : (calculatePrice(rmCnt) * (contractedNights));
} 
```

到

```
var calculatePrice = function (rmCnt, contractedNights) {
  return checkCount(rmCnt) || checkCount(contractedNights) ? 0 : (rmCnt * contractedNights);
} 
```

# java - 按代表时间的 2 列对 JTable 进行排序

> ID：12161466
> 
> 赞同：1
> 
> 时间：2012-08-28T14:25:24.560
> 
> 标签：java, sorting, jtable

我有一个包含三列的表：名称 | 日期时间 | 描述

![在此处输入图像描述](../Images/f59c0a8c035325c29bbe2c1767df3148.png)

Date-Time 的值实际上存储在数据库表中的 2 个单独字段和（过时的数据库 - 无法更改，因此必须解决它）。

我应用了以下代码：

```
tbNotes.setAutoCreateRowSorter(true); //tbNotes is the JTable
DefaultRowSorter sorter = ((DefaultRowSorter) tbNotes.getRowSorter());
ArrayList list = new ArrayList();
list.add(new RowSorter.SortKey(2, SortOrder.DESCENDING)); //column 2 because I have an invisible ID column
sorter.setSortKeys(list);
sorter.sort(); 
```

产生的结果看起来是正确的 - 行按日期排序，较旧的项目显示在底部。但是，有时我会看到： ![在此处输入图像描述](../Images/46501b51b61e7b3e9fe3d071a0593256.png)

很明显，排序会查看字符串中的第一个字符并假设 1 大于 0，因此 12/28/2011 比 01/03/2012 更大（更新）

我将如何按日期对我的 JTable 进行适当的排序？

谢谢你

PS这是填充JTable的代码

```
try {
        DefaultTableModel noteDataModel = new DefaultTableModel() {
            @Override
            public boolean isCellEditable(int row, int column) {
                return false;
            } 
        };
        tbNotes.setModel(noteDataModel);

Object[] objects = new Object[4];
ListIterator<Todonote> todoNoteListIterator = noteList.listIterator();
while (todoNoteListIterator.hasNext()) {
    todoNoteEntity = todoNoteListIterator.next();
        DateFormat noteDateFormatter = new SimpleDateFormat("MM/dd/yyyy");
        String noteDateTime = noteDateFormatter.format(todoNoteEntity.getUserDate())
                        + " - " + todoNoteEntity.getUserTime().substring(0, 2) + ":" + todoNoteEntity.getUserTime().substring(2);
        objects[0] = todoNoteEntity.getPrimaryKey();
        objects[1] = todoNoteEntity.getUserContact().getName();
        objects[2] = noteDateTime;
        objects[3] = todoNoteEntity.getNotes();
        noteDataModel.addRow(objects);
} 
```

**编辑 1**

我更新了表格模型

```
@Override
 public Class getColumnClass(int column) {
     for (int row = 0; row < getRowCount(); row++) {
         Object o = getValueAt(row, column);

         if (o != null) {
             return o.getClass();
         }
      }

      return Object.class;
 } 
```

它现在似乎可以工作，但日期显示为 2012 年 10 月 26 日，而不是 yyyy/MM/dd - HH:mm - 我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:40:33.843

我不确定，但如果你想将 Date 对象显示为指定格式，如 yyyy/MM/dd - HH:mm，为什么不试试渲染器呢？

# ruby-on-rails - 在 ruby on rails 中使用 pg_search 在全文搜索之前限制 domaing

> ID：12161468
> 
> 赞同：1
> 
> 时间：2012-08-28T14:25:27.150
> 
> 标签：ruby-on-rails, postgresql, full-text-search, pg-search

是否有指定使用 pg_search 搜索的有限表域？

我正在考虑在发布范围搜索`where`之前在 ActiveRecord 模型上使用多个链式调用。`pg_search`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:48:02.950

`where`最新版本可以对or`order`等返回的结果进行操作。

因此，您可以执行以下搜索：
`YourModel.where(id: "some condition").search("query")`

# file - 在 CakePHP 文件输入中限制文件类型

> ID：12161470
> 
> 赞同：2
> 
> 时间：2012-08-28T14:25:38.303
> 
> 标签：file, cakephp, upload, mime, file-type

我只是想知道是否有办法限制文件输入对话框只显示某些类型的文件。我的网页只能接受 .bin 或 .gz 文件类型，但用户可以选择其他文件类型并尝试上传它们。

防止上传错误类型文件的最佳方法是什么？

这是我的文件上传控制器：

```
 public function uploadFile()
    {
        $this->Session->write('isFileUpload', false);
        $this->Session->write('isFileLarge', false);

        if($this->request->is('post'))
        {
            $uploadedFile = array();

            // Check if the Document object is set
            // If it is set, process the file for uploading,
            if(isset($this->request->data['Document']))
            {
                $filename = $this->request->data['Document']['MyFile']['tmp_name'];

                $uploadedFile['MyFile']['name'] = $this->request->data['Document']['MyFile']['name'];
                $uploadedFile['MyFile']['type'] = $this->request->data['Document']['MyFile']['type'];
                $uploadedFile['MyFile']['size'] = $this->request->data['Document']['MyFile']['size'];

                // Move the file to the /home/spectracom folder
                $filePath = DS . 'home' . DS . $uploadedFile['MyFile']['name'];

                if (move_uploaded_file($filename, $filePath))
                {
                    $this->Session->write('isFileUpload', true);
                    $this->Session->write('isFileLarge', false);
                    $this->redirect('/tools/upgradebackup');
                }
                else
                {
                    $this->Session->write('isFileUpload', false);
                    $this->Session->write('isFileLarge', true);
                    $this->redirect('/tools/upgradebackup');
                }
            }
            else
            {
                $this->Session->write('isFileUpload', false);
                $this->Session->write('isFileLarge', true);
                $this->redirect('/tools/upgradebackup');
            }
        }
    } 
```

我基本上检查文件是否存在，否则它太大，当它返回主升级页面时，它会设置会话变量。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T15:29:49.467

[`accept`您可以使用属性](https://stackoverflow.com/questions/181214/file-input-accept-attribute-is-it-useful)限制浏览器允许用户在文件选择对话框中选择的内容，尽管并非所有浏览器都支持它。

我认为这应该适用于创建输入（您需要使用 MIME 类型来查看哪些有效）：

`echo $this->Form->input('MyFile', array('type' => 'file', 'options' => array('accept' => 'application/gzip,application/gzipped,application/octet-stream')));`

您还应该通过在模型上设置[验证](http://book.cakephp.org/2.0/en/models/data-validation.html#core-validation-rules)（查看`extension`和`mimeType`验证规则）来验证文件到达服务器后。

您还可以在用户选择文件扩展名后使用 JavaScript 验证文件扩展名，如果扩展名错误，则清除文件输入字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-05T20:55:50.513

用 Cakephp 3.4 测试

```
$this->Form->control('my_file', ['label' => 'Upload File','type' => 'file', 'accept' => 'application/msword']); 
```

# tsql - 计算每个用户的有效值

> ID：12161471
> 
> 赞同：2
> 
> 时间：2012-08-28T14:25:38.593
> 
> 标签：tsql, count

我有一个包含值列表的表格。-1 是一个空白值：

```
 ID    FieldType1A FieldType1B FieldType2A FieldType2B Person
  1             15          14          10          -1      1
  2             16          -1          12          10      1
  3             17          -1           5           6      1
  4              6          -1           7          -1      2
 ... 
```

所以结果应该是：

```
 Person      FieldType1     FieldType2
      1               4              5
      2               1              1 
```

有一个包含用户 ID 列表的用户表，是否有一种方法可以迭代该值列表以在结果集中生成人员列表（0 表示字段类型完全有效，因为它只是计数）？我认为[T-SQL Column Values Count](https://stackoverflow.com/questions/9085756/t-sql-column-values-count)的答案是朝着我尝试的方向迈出的一步，但不确定如何组合相同的列（A/B 允许列出答案）。那并且我有兴趣将所有有效值组合起来，而不是尝试计算每个有效响应的数量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:32:53.763

您可以使用`CASE`表达式将所有非负一值更改为 1，将 -1 值更改为 0，然后将它们相加。

```
SELECT Person, 
    SUM(CASE WHEN FieldType1A <> -1 THEN 1 ELSE 0 END) + 
        SUM(CASE WHEN FieldType1B <> -1 THEN 1 ELSE 0 END) AS FieldType1,
    SUM(CASE WHEN FieldType2A <> -1 THEN 1 ELSE 0 END) + 
        SUM(CASE WHEN FieldType2B <> -1 THEN 1 ELSE 0 END) AS FieldType2
FROM YourTable
GROUP BY Person 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T14:37:56.243

```
SELECT Person, 
count(nullif(FieldType1A, -1)) + count(nullif(FieldType1B, -1)) as FieldType1, 
count(nullif(FieldType2A, -1)) + count(nullif(FieldType2B, -1)) as FieldType2
FROM yourtable
GROUP BY person 
```

# html - Canvas (Kinetic.JS) - 克隆组不出现？

> ID：12161473
> 
> 赞同：2
> 
> 时间：2012-08-28T14:25:45.293
> 
> 标签：html, canvas, clone, shape, kineticjs

我正在玩 Kinetic，似乎无法弄清楚为什么我正在克隆的组不会出现。

**小提琴：http: [//jsfiddle.net/DgwLd/3/](http://jsfiddle.net/DgwLd/3/)**

我可以克隆形状没问题 - 它只是不出现的组。文档确认可以克隆组，所以我不确定这里有什么。这是小提琴的代码：

```
//group and original circle - appears fine
layer.add(new Kinetic.Group({id: 'group'}));
stage.get('#group')[0].add(new Kinetic.Circle({
    fill: 'orange',
    x: 200,
    y: 50,
    radius: 30
}));

//clone of group at different Y pos - doesn't appear
layer.add(stage.get('#group')[0].clone({y: 120})); 
```

**更新**- 似乎克隆一个组不会进行深层复制。这可以通过控制台记录组来验证 -`console.log(stage.get('#group2'))`你会看到它的`children`集合是空的）。这是一个错误吗？不知道您为什么要克隆没有其成员的组。

有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:44:36.567

似乎您自己弄清楚了-确实，进行组克隆，或者实际上是任何容器的克隆，都会执行浅拷贝。

实际上，查看源代码可能比其他任何东西都提供更多信息：

```
clone: function(obj) {
    // instantiate new node
    var classType = this.shapeType || this.nodeType;
    var node = new Kinetic[classType](this.attrs);

    /*
     * copy over user listeners
     */
    for(var key in this.eventListeners) {
        var allListeners = this.eventListeners[key];
        for(var n = 0; n < allListeners.length; n++) {
            var listener = allListeners[n];
            /*
             * don't include kinetic namespaced listeners because
             *  these are generated by the constructors
             */
            if(listener.name.indexOf('kinetic') < 0) {
                // if listeners array doesn't exist, then create it
                if(!node.eventListeners[key]) {
                    node.eventListeners[key] = [];
                }
                node.eventListeners[key].push(listener);
            }
        }
    }

    // apply attr overrides
    node.setAttrs(obj);
    return node;
} 
```

如您所见，它所做的只是使用当前节点的属性实例化一个新节点，然后复制事件侦听器。这可能是设计使然 - 通常您希望采用阻力最小的路径，并且当您认为该`.clone()`方法适用于任何通用节点（它不是专门用于容器）时，这种实现是可以的。

不过，似乎确实应该有一种`.deepclone()`专门用于容器的方法。也许是这样的：

```
deepclone: function(obj) {
    var node = this.clone(obj);

    if (this.children) {
        for (var i = 0; i < this.children.length; i++) {
            node.add(this.children[i].clone();
        }
    }

    return node;
} 
```

# java - 如何使用异常详细信息和 sendmail 按钮构建 Struts 自定义错误页面

> ID：12161474
> 
> 赞同：1
> 
> 时间：2012-08-28T14:25:51.503
> 
> 标签：java, error-handling, struts

我目前正在管理 Struts 中的错误（404、500），因此任何遇到错误的用户都会看到一个方便的错误页面，其中包含所有详细信息。我还想`sendmail`在该错误页面中实现一个功能，以便他们可以立即将错误消息发送给开发团队。

该`sendmail`功能已经完成。我只需要找到一种在我的 JSP 页面上打印异常详细信息的方法。

这是我所拥有的：

**`web.xml`：**

```
<error-page>
    <error-code>500</error-code>
    <location>/jsp/common/error500.jsp</location>
</error-page>

<error-page>
    <error-code>404</error-code>
    <location>/jsp/common/error404.jsp</location>
</error-page> 
```

**JSP：**

标题是：

```
<%@ page isErrorPage="true" import="java.io.*" contentType="text/plain"%> 
```

尝试了以下方法：

1.

```
<div class="container" align="center">
    ERROR 404

    <html:errors/>
</div> 
```

2.

```
<div class="container" align="center">
    ERROR 404

    Message:
    <%= exception.getMessage()%>

    StackTrace:
    <%
    StringWriter stringWriter = new StringWriter();
    PrintWriter printWriter = new PrintWriter(stringWriter);
    exception.printStackTrace(printWriter);
    out.println(stringWriter);
    printWriter.close();
    stringWriter.close();
    %>
</div> 
```

如您所见，重定向工作得很好。我只需要找到如何在 JSP 中打印堆栈跟踪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:34:40.940

正常的 Struts 1 异常处理使用声明式处理。

`Globals.EXCEPTION_KEY`除非您提供自己的密钥，否则异常会存储在下面。

S1 异常处理在指南的[异常处理](http://struts.apache.org/1.x/userGuide/building_controller.html#a4.5_Exception_Handler)部分中有详细说明。

如果您绕过正常的异常处理机制，我不确定异常是否会存储在范围内；你可以检查一下它是否在那里。然而，404 与异常是不同的问题。这是一个缺失的映射，而不是例外。

如果您使用的是 Struts 2，这是一个不同但相似的过程。在提问时包含 Struts 版本非常重要——Struts 1 和 2 以及 S1.2 和 S1.3 之间发生了很大变化。

（如果您使用的是 S1.2 之前的版本，请嘘。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:43:30.017

试用

```
out.println(stringWriter.getBuffer().toString()); 
```

以下代码覆盖`RequestProcessor`以`exception`在 JSP 中可用。

```
protected ActionForward processException(HttpServletRequest request,
                                       HttpServletResponse response,
                                       Exception exception,
                                       ActionForm form,
                                       ActionMapping mapping)
throws IOException, ServletException {
request.setAttribute("exception", exception);
return mapping.findForward("error"); 
```

}

# android - 解压 .fsd 文件

> ID：12161475
> 
> 赞同：0
> 
> 时间：2012-08-28T14:25:53.237
> 
> 标签：android

我正在使用以下代码解压缩`.fsd`文件，但它显示异常：

```
java.util.zip.ZipException: Central Directory Entry not found 
```

我的代码是：

```
public void unzipFolder(String zipfile_name,String unzipfolder_name){
    System.out.println("zip file nme----"+zipfile_name);

    try {
        ZipFile zf = new ZipFile(zipfile_name);
        System.out.println("zip file size----"+zf.size());
        Enumeration< ? extends ZipEntry> zipEnum = zf.entries();
        String dir = unzipfolder_name;

        while( zipEnum.hasMoreElements() ) {
        ZipEntry item = (ZipEntry) zipEnum.nextElement();

        if (item.isDirectory()) {
        File newdir = new File(dir + File.separator + item.getName());
        newdir.mkdir();
        } else {
        String newfilePath = dir + File.separator + item.getName();
        File newFile = new File(newfilePath);
        if (!newFile.getParentFile().exists()) {
        newFile.getParentFile().mkdirs();
        }
        copyInputStream(zf.getInputStream(item),
                   new BufferedOutputStream(new FileOutputStream(newfilePath)));

        }
        }
        zf.close();
        } catch (Exception e) {
        e.printStackTrace();
        }
}

public static final void copyInputStream(InputStream in, OutputStream out) {
    byte[] buffer = new byte[1024];
    int len;
    try {
        while((len = in.read(buffer)) >= 0){
            out.write(buffer, 0, len);
        }
        in.close();
        out.close();
    } catch (IOException e) {
        System.err.println("Zip -> copyInputStream : "+e.getMessage()); 
    }
} 
```

这里`zipfile_name=/mnt/sdcard/forside_bookshelf_download/P160225200007046510000718MASenC.fsd`和`unzipfolder_name=/mnt/sdcard/`。

我在以下行中得到了上述异常：

```
ZipFile zf = new ZipFile(zipfile_name); 
```

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:46:21.977

我曾经用 zip4j 遇到过这个问题。当我在 zipfile 中添加一个主文件夹并将所有其他内容放在那里时，它就解决了。

# ios - iOS 模态视图上的 AddThis API

> ID：12161478
> 
> 赞同：0
> 
> 时间：2012-08-28T14:26:02.403
> 
> 标签：ios, crash, modalviewcontroller, addthis

我刚刚开始使用适用于 iOS 的 AddThis SDK 来共享我的应用程序中的 URL 和图像。我有一个 MainViewController，它调用一个名为“SummaryViewController”的模态视图控制器。在主视图控制器上按下某个按钮后执行此转场。

“SummaryViewController”上有一个 UIButton，负责在 Facebook（或任何其他）上分享，并执行：

```
-(IBAction)shareOnFacebook { 
   [AddThisSDK shareImage...];
} 
```

问题是它有效！

那么问题出在哪里？**当用户返回主视图控制器时，通过按下“返回”按钮，第二次**打开 SummaryViewController并按下“共享”按钮，应用程序崩溃，“无法识别的选择器发送到实例”，有时没有任何消息，并且线程卡在 [ATCoreController topViewController]

知道为什么会发生这种情况以及如何解决吗？第一次展示 VC 和第二次有什么不同？

非常感谢 ！！

在 MainViewController.m 中：

```
- (IBAction)showSummary:(id)sender {
    self.summaryViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"Summary ViewController"];
    [self presentModalViewController:self.summaryViewController animated:YES];  
} 
```

在 SummaryViewController.m 中：

```
- (IBAction)dismissModalViewController:(id)sender {
    [super dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:04:41.170

addthis.h 中有一个静态方法。

```
+ (void)setRootViewController:(UIViewController *)rootViewController; 
```

您应该`rootviewcontroller`在默认情况下设置第一次，它会设置您的 viewcontroller 实例，但是当您按下并再次打开`summaryviewcontroller`它时，它会搜索`rootviewcontroller`或 top`viewcontroller`分配给前一个实例，因此如果它不可用，您的应用程序会因过多而崩溃。

因此，在呈现弹出窗口之前，请使用此方法解决您的问题。

# ios - “apple-mobile-web-app-capable”站点在注销后切换到 Mobile Safari

> ID：12161479
> 
> 赞同：4
> 
> 时间：2012-08-28T14:26:06.213
> 
> 标签：ios, session, mobile-safari, iphone-standalone-web-app

在 iOS 全屏模式下运行移动网站时，使用“apple-mobile-web-app-capable”元标记，我使用 AJAX 和同步页面请求（包括重定向）的组合，在用户登录时成功.

但是，当用户注销并且会话被破坏时，iOS 设备会离开全屏模式并在 Mobile Safari 窗口中打开登录页面。

这是一个常见的事件序列：

1.  用户单击主屏幕上的按钮以在 iOS 全屏模式下启动移动网站
2.  服务器将用户重定向到登录页面进行身份验证（仍然全屏）
3.  用户登录，并被重定向回移动主页（仍然全屏）
4.  用户通过 GET 和 POST 执行各种操作，有些使用 AJAX，有些不使用（仍然全屏）
5.  用户点击注销按钮，这会破坏会话并重定向回登录页面
6.  移动 Safari 窗口第二次打开以呈现登录页面

我在注销成功时尝试了 301、302 和 303 重定向，但似乎没有任何改变这种行为。它似乎与在全屏模式下运行时用户的会话结束有关。我认为这并不重要，但安全机制是通过运行在 Tomcat 上的 Spring Security 实现的。

有什么办法可以防止这种行为？我不希望在注销时使用 location.href 客户端重定向。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T14:35:59.050

您可以取消链接的默认行为，方法是使用 jQuery 的事件委托将单个顶级事件处理程序分配给页面上的所有链接。当检测到点击事件时，我们取消默认行为（即在移动 Safari 中打开），然后手动更改窗口的位置。这种方法允许在不破坏 iPhone 独立应用程序体验的情况下更改页面。

[http://www.bennadel.com/blog/2302-Preventing-Links-In-Standalone-iPhone-Applications-From-Opening-In-Mobile-Safari.htm](http://www.bennadel.com/blog/2302-Preventing-Links-In-Standalone-iPhone-Applications-From-Opening-In-Mobile-Safari.htm)

我之前遇到这种情况的印象是，任何非 ajax/javascript 导航都会导致应用程序跳转到 safari 以提供页面

# python - 如何使这个 Python 函数异步？

> ID：12161482
> 
> 赞同：2
> 
> 时间：2012-08-28T14:26:08.733
> 
> 标签：python, google-app-engine

作为 Python 的新手，我发现 yield 和 generators 以及 async 函数非常压倒性（我已经阅读了关于该主题的所有 SO 问题和其他几个不同的参考资料 - 仍然很难连接所有部分）。我已经习惯了 Objective-C 的描述性语法，所有的东西都只是告诉你它在做什么，而不是试图连接所有你不知道的不同关键字的片段，这些关键字真的不知道它们如何协同工作。

我真的很喜欢 Python，因为它很容易上手——至少对于基本的东西。但是对于更高级的东西，代码只是不会跟你说话。它不会告诉你它在做什么。（好吧，也许我只是有点沮丧和缺乏经验。）

无论如何，我想让以下功能完全异步：

```
@ndb.tasklet
def get_new_statues(friends):
    status_list = list()
    for friend_dic in friends:
        lastStatusDate = #some date
        userKey = #some key
        query = ndb.gql('SELECT * FROM Statuses WHERE ANCESTOR IS :1 AND date > :2', userKey, lastStatusDate)
        qit = query.iter()
        while (yield qit.has_next_async()):
            status = qit.next()
            status_list.append(status.to_dict())
    raise ndb.Return(status_list) 
```

当我写这篇文章时，我对自己印象深刻，并且很高兴我能够在短短几个小时内将所有代码转换为异步。但[有人告诉我](https://stackoverflow.com/questions/12142496/efficient-way-to-query-in-a-for-loop-in-google-app-engine)，上面的函数根本不是异步的。但是[在另一个问题](https://stackoverflow.com/questions/12125342/creating-an-asynchronous-method-with-google-app-engines-ndb)中，有人告诉我是的，我所做的是正确的。

那么究竟发生了什么？这里的 yield 语句是否使我的代码同步？我将如何修改它以使其异步？

（我提出的问题似乎都很相似，但问题是我得到了更多的代码作为答案而不是解释。我是一个寻找可以帮助我理解代码的单词的人，而不是机器正在寻找更多代码来帮助我理解更多代码。每个人都只是告诉我如何或什么，没有人告诉我*为什么*。）

**附录**：我想最让我失望的是：`while (yield qit.has_next_async()):`作为人类读者，我读过 yield 一词，在您对该词的典型用法中，它的意思是“如有必要，让其他事情做其他事情”，我看到了 async 这个词，这意味着异步。所以我想出了异步方法的 yield + async = 神奇公式，但显然情况并非如此？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:15:29.757

听起来你不明白 yield 的作用。

虽然这可能不完全准确，但您通常可以将“yield”视为“return”，除非您再次调用此函数，它会从上次产生的位置继续运行，而不是函数的开头。

由于 qit.has_next_async() 是异步的，所以这个函数是异步的。每次调用这个函数，它都会返回qit.has_next_function() 的值，并获取下一个实体。完成后，结果会引发异常。

# .net - 如何在 Mono 中使用 c#.net EPPlus

> ID：12161483
> 
> 赞同：1
> 
> 时间：2012-08-28T14:26:10.503
> 
> 标签：.net, monodevelop, epplus

我研究了在不使用 Excel 互操作的情况下使用 c#.net 操作 Excel 文件的方法，并且遇到了 EPPlus。它似乎在 Windows 上工作得很好。但是我怎样才能让它在 Mono 中工作（我们的服务器是 Linux 服务器）。

这是我试图测试的代码（一个简单的.exe）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using OfficeOpenXml;
using OfficeOpenXml.Drawing;
using OfficeOpenXml.Style;
using System.IO;

namespace ConsoleApp
{
class Program
{
    static void Main(string[] args)
    {

        ExcelPackage excelPackage = new ExcelPackage();
        ExcelWorksheet excelWorksheet = CreateSheet(excelPackage, "TestSheet");

        Byte[] bin = excelPackage.GetAsByteArray();
        string file = Directory.GetCurrentDirectory() + @"\Test.xlsx";
        File.WriteAllBytes(file, bin);
    }
}
} 
```

但是当然，当我尝试从 Linux 服务器运行它时，它会崩溃并显示“控制台应用程序已停止工作”。有什么明显的我做错了吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:22:14.833

此版本不支持 Mono。请参考[EPPlus 常见问题](http://epplus.codeplex.com/wikipage?title=FAQ)

> **我可以将这个库与 Mono 一起使用吗？**
> 
> 好问题！我没试过，所以不知道。如果您尝试过，请给我一些反馈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-20T20:38:30.387

是的你可以！下载了Epplus 4.0.3。使用 libreoffice 创建了一个 Excel 工作簿。在 mint 17.1 上使用 monodevelop 创建了一个控制台应用程序。

```
using System;
using OfficeOpenXml;
using System.IO;
namespace test
{
    class MainClass
    {
        public static void Main (string[] args)
        {
            FileInfo f = new FileInfo ("tht.xlsx");
            using (ExcelPackage p = new ExcelPackage(f))
            {
                ExcelWorksheet ws = p.Workbook.Worksheets["Ark1"];
                Console.WriteLine(ws.Cells[1, 1].Value);
            }

        }
    }
} 
```

# php - 如何在 CodeIgniter 中编写用于数据库查询的复合语句

> ID：12161486
> 
> 赞同：0
> 
> 时间：2012-08-28T14:26:23.057
> 
> 标签：php, database, codeigniter

为了设计密码-用户名身份验证，我尝试从表（成员资格）中检索“salt”并将其附加到密码中。然后用 SHA256 加密组合。但是当我编写如下的 validate() 函数时，出现了一个错误

> 严重性：4096
> 
> 消息：CI_DB_mysql_driver 类的对象无法转换为字符串

代码：

```
public function validate(){

  $this->db->where('username',$this->input->post('username'));
  $salt=(string)$this->db->select('salt');
  $this->db->where('password',hash('sha256',$this->input->post('password').$salt));
  $query=$this->db->get('membership');

  if($query->num_rows()==1){ return TRUE; }
} 
```

如何解决问题？我正在使用 codeigniter 2.1.2。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:01:26.160

您需要创建两个单独的查询：

```
public function validate(){

    $this->db->select('salt');
    $this->db->where('username', $this->input->post('username', TRUE));
    $salt = (string) $this->db->get('membership')->row()->salt;

    $this->db->where('password', 
                    hash('sha256', $this->input->post('password', TRUE). $salt));
    $query=$this->db->get('membership'); 

    if($query->num_rows()==1) { 
         return TRUE; 
    }
    return FALSE;
} 
```

# c# - 表单在错误的显示器上打开

> ID：12161496
> 
> 赞同：2
> 
> 时间：2012-08-28T14:26:58.773
> 
> 标签：c#, .net, winforms

我有以下代码：

```
//Create the login form.
ConnectionTypeForm ctf = new ConnectionTypeForm();
if (ctf.ShowDialog() == DialogResult.OK)
{
    Form form = Statics.CreateForm(
        "Main Form",
        new MainDesignerControl());
    Application.Run(form);
} 
```

当我运行程序时，`ConnectionTypeForm`它将在我的右侧（辅助）监视器上打开，但一旦`MainForm`打开，它就会在左侧监视器（主）上打开。我无法将它的起始位置设置为，`FormStartPosition.CenterParent`但由于`ConnectionTypeForm`它实际上不是`MainForm`父级，所以它没用。

有什么建议么？我只是希望它在同一台显示器上打开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:21:41.477

这不是一个简单的解决方案，但您始终可以将应用程序的位置存储在注册表中。每次打开表单时，您都可以检查该值是否存在。

这样，您自己或任何用户都可以更改表单打开的位置。

通过一些数学运算，您可以找出屏幕的“中心”。

还需要考虑分辨率是否已更改（因此您的应用程序不会离开屏幕，例如，如果您卸下笔记本电脑并且分辨率已更改）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-31T15:53:15.397

在 ShowDialog() 方法中指定父级并更改开始位置。

```
Dim ds As New FormDiagramSettings
ds.StartPosition = FormStartPosition.CenterParent
ds.ShowDialog(Me) 
```

或 C#

```
FormDiagramSettings ds = new FormDiagramSettings();
ds.StartPosition = FormStartPosition.CenterParent;
ds.ShowDialog(this); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-28T14:31:48.580

尝试这个 ：

```
Form form = new Form();
        form.StartPosition = FormStartPosition.CenterParent;
        form.Show(); 
```

# selenium - 对象的 xpath 的 Selenium Webdriver 长度

> ID：12161501
> 
> 赞同：2
> 
> 时间：2012-08-28T14:27:16.667
> 
> 标签：selenium, webdriver, selenium-webdriver, xpath

我可以通过 xpath 找到我的对象`//div[@id='menu-groups-group1']`

这是 -

```
//div[@id='menu']//div[@class='menu-items-block menu-groups']//div[@id='menu-groups-menu1'] 
```

相同的对象但更长的 xpath。

我的对象的 xpath 长度有关系吗？是否影响对象的搜索速度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T15:06:04.867

是的，这很重要，是的，它会影响速度。

*   `//div[@id='menu-groups-group1']`告诉 WebDriver 中的 XPath 处理器查找`<DIV>`文档中具有.`id`属性的所有元素`menu-groups-group1`。然后，根据您正在执行的操作（*例如*、`findElement()`、`findElements()`），它可能会在找到第一个操作后停止，也可能不会停止。
*   `//div[@id='menu']//div[@class='menu-items-block menu-groups']//div[@id='menu-groups-menu1']`告诉 WebDriver 中的 XPath 处理器查找`<DIV>`文档中`id`属性为 的`menu`所有元素，然后查找`<DIV>`嵌入在这些元素中任意深度且`class`属性为 的所有元素，`menu-items-block menu-groups`然后查找所有`<DIV>`嵌入的元素在*这些*元素中的任何深度并且`id`具有`menu-groups-group1'`. 然后，根据您正在执行的操作（*例如*、`findElement()`、`findElements()`），它可能会在找到第一个操作后停止，也可能不会停止。

如您所见，较长的 XPath 具有更复杂的处理，并可能创建更大的元素集以供检查。

`id('menu-groups-group1')`使用 XPath或者甚至使用 WebDriver会更好`By.id('menu-groups-group1')`。使用示例的第二种形式的唯一原因是`menu-groups-group1`id 不是唯一的。在这种情况下，开发人员应该为自己感到羞耻。

# vim - 是否可以让 vim 在我的光标当前所在的括号范围内加下划线？

> ID：12161508
> 
> 赞同：2
> 
> 时间：2012-08-28T14:27:30.373
> 
> 标签：vim, vim-syntax-highlighting

我知道 vim 有一个彩虹插件，它可以为左括号和右括号着色，我知道 vim 可以突出显示匹配的括号。我希望 vim 在我目前所在的括号范围内强调所有内容。

例如：让 | 为当前光标位置，则：

```
(a|bc (de fg)) 
```

会强调一切。

```
(abc (de |fg)) 
```

只会下划线`(de fg)`。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T15:05:18.690

这场比赛似乎运作良好：

```
syn match Foo /([^(]*\%#.*)/
hi link Foo Underlined 
```

你可以把它放在你的 ~/.vimrc 或特定语言的语法文件中。

### 一步步：

`syn match Foo`- 根据正则表达式匹配语法组并将其命名为 Foo

`/([^(]*`- 匹配 a`(`后跟无限量或 0 的任何字符，除了`(`

`\%#`- 匹配当前光标位置

`.*`- 匹配无限数量或 0 个任意字符

`)`- 匹配一个`)`

`hi link Foo Underlined`- 将 Foo 组链接到带下划线的

应该注意的是，这是一个不完美的解决方案，因为正则表达式不适用于嵌套子结构。[Rainbow Parenthesis](http://www.vim.org/scripts/script.php?script_id=1230)通过添加多达 13 级递归来实现这一点，但它不提供无限递归。您可以使用我提供的正则表达式示例修改其 13 级递归，以完成任意数量的递归。我不确定可能对速度产生的影响。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T14:49:34.330

您可以在以下内容中执行视觉上类似的操作`.vimrc`：

```
nmap <f12> m[%v%:sleep 350m<CR>`[
imap <f12> <Esc>m[%v%:sleep 350m<CR>`[a 
```

[更多信息来源](http://vim.wikia.com/wiki/Highlight_text_inside_matching_parentheses)

# c# - WindowsFormsHost ToolTipService

> ID：12161516
> 
> 赞同：1
> 
> 时间：2012-08-28T14:27:56.667
> 
> 标签：c#, wpf, windowsformshost

我遇到的问题的简单案例代码：

```
<Window x:Class="WFHTooltipEnableTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:wf="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms"  
    >
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition></RowDefinition>
            <RowDefinition></RowDefinition>                        
        </Grid.RowDefinitions>
        <WindowsFormsHost Name="HostControl">
            <wf:MaskedTextBox x:Name="mtbDate" Mask="00/00/0000"/>
        </WindowsFormsHost>
        <Button Content="Toggle" Grid.Row="1" Click="Button_Click"></Button>
    </Grid>
</Window> 
```

```
using System.Windows;
using System.Windows.Controls;

namespace WFHTooltipEnableTest
{
    public partial class MainWindow : Window
    {
        bool enabled = true;
        public MainWindow() {}
        private void Button_Click(object sender, RoutedEventArgs e)
        {
            enabled = !enabled;
            ToolTipService.SetIsEnabled(this.HostControl, enabled);
        }
    }
} 
```

该按钮将切换传递给 SetIsEnabled 的值。当为 false 时，托管在 windows 窗体主机控件中的东西将被禁用。

似乎无法为这种行为找到任何解释。

# css - CSS 选择器：Class 与 Id

> ID：12161517
> 
> 赞同：4
> 
> 时间：2012-08-28T14:28:03.513
> 
> 标签：css, css-selectors

如果想要在速度、加载时间等方面获得更好的性能，我已经阅读过 JavaScript（也包括 jQuery）中使用的那种类型的选择器。

这同样适用于 CSS 吗？如果是这样，哪种选择器更适合在 DOM 中使用：id、类或嵌套？我在这里谈论某些元素（例如特定的`<ul>`而不是`<ul>`一般的全部）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:36:53.380

我怀疑 CSS 会在加载时间和速度方面造成很大的渲染问题。根据我的经验，我得出的结论是你应该让你的 CSS 保持简洁。我见过这样的事情：

```
.element1 {...}
   .element1 #element2 {...}
   .element1 #element2 .element3 {...} 
```

但我宁愿尽可能使用独特的选择器，并将它们简单地描述为：

```
.element1 {...}
 #element2 {....} 
```

在我看来，优化 CSS 非常棘手，你应该小心翼翼地去做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:32:14.170

页面上的两个 HTML 元素不能相同`id`，因此对于单个元素处理，最好使用 ID。同一类可以被许多元素使用，因此对于组操作，使用类是好的。在性能方面，两者都适用于我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:36:01.623

正如我多次阅读的那样，ID 查找元素比类更快，因为具有 ID 的元素存储为哈希表并且搜索速度更快。

不幸的是，我不知道有任何资源可以证明或拒绝这一点，但正如我已经说过的那样，我已经看到了很多这样的陈述。

# jquery - 如何在两个剑道 UI 窗口控件之间传递数据

> ID：12161527
> 
> 赞同：1
> 
> 时间：2012-08-28T14:28:41.363
> 
> 标签：jquery, asp.net, asp.net-mvc-3, kendo-ui, kendo-grid

我有两个剑道 UI 窗口控件。获取客户详细信息的第一个（父）窗口以及搜索按钮。第二个（子）窗口使用客户名字、姓氏等搜索客户。

搜索结果会显示在子窗口的网格控件中，比如

> 标题 名字 姓氏 地址1 Subrub
> John Karter 先生 Goyal garden, NSW
> Miss Emile Watson Garden brown, VC

如果我在网格中选择任何客户，我需要在第一个（父）窗口的相应控件中填充客户详细信息。所以我在更改事件上调用 js 函数，如下所示

```
@(Html.Kendo().Grid((IEnumerable<OnlineABThemes.Data.GetCustomers_Result>)ViewData["CustomerSearchGrid"])
    .Name("ChildWindowCustomerGrid")
    .Columns(columns => {
        columns.Bound(p => p.ID).Visible(false);
        columns.Bound(p => p.Title).Width(60);
        columns.Bound(p => p.FirstName).Width(130);
        columns.Bound(p => p.LastName).Width(100);
        columns.Bound(p => p.Address1).Width(150);
        columns.Bound(p => p.Suburb).Width(80);
        columns.Bound(p => p.State).Width(80);
        columns.Bound(p => p.PostCode).Width(120);
        columns.Bound(p => p.Phone).Width(100);
        columns.Bound(p => p.Mobile).Width(100);
        columns.Bound(p => p.Email).Width(120);
    })
    .Sortable()
    .Scrollable()
    .Filterable()
    .DataSource(ds => ds.Server()
    .Model(model => model.Id(p=>p.ID))
)
.Selectable(s=>s.Mode(GridSelectionMode.Single))
.Events(events => events.Change("CustomerChanged"))
) 
```

这是我的js函数

```
function CustomerChanged() {
    var grid = $('#ChildWindowCustomerGrid').data('kendoGrid');
    var customerID = grid.select("ID");

    $.ajax({<br>
        url: "/Customer/GetCustomer",
        type: "POST",
        data: { customerId: customerID }
    })

    $("#childWindow").data("kendoWindow").close();
    .fail(function (r, o) {
        alert("Failed : " + r.responseText);
    });
} 
```

我无法获取客户 ID 以及如何填写第一个（父）窗口中的客户详细信息。即，如何通过将 customerID 从一个窗口传递到另一个窗口来填写客户详细信息。

谢谢桑托什
_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T03:24:39.317

我不能说我完全遵循您的代码，但这可能会有所帮助。Kendo 窗口控件以两种模式运行：1) 通过在 iframe 中加载另一个 URL，以及 2) 通过在看起来像窗口的 div 中加载内容。如果您正在使用第一个场景，您可以通过调用`window.opener`,`window.parent`或`window.top`（取决于您要执行的操作）传回客户 ID，并以这种方式获取对父窗口的引用。如果您在第二种情况下工作，则可以使用某种视图模型来存储可在所有窗口中访问的当前选择。也许这会激发一些想法，但是如果您发布更多代码，我可能会更具体地了解解决方案。

# spring - Spring jaxb WebServiceGatewaySupport 实现 java.lang.IllegalArgumentException

> ID：12161529
> 
> 赞同：2
> 
> 时间：2012-08-28T14:28:46.773
> 
> 标签：spring, jaxb, webservicetemplate

我正在使用 Spring 在 jaxb 中工作，尝试使用 WebServiceGatewaySupport 编写自定义解组过程。

我的课在下面。问题在于响应，当我调用以下方法时

```
getWebServiceTemplate().sendSourceAndReceiveToResult 
```

它崩溃并显示消息“java.lang.IllegalArgumentException：'uri'不能为空”。似乎即使我使用的是 StringResult，它也在尝试解析 xml 并找到 xml/soap 响应错误。

```
public class WUResultGateway extends WebServiceGatewaySupport{

    private WebServiceTemplate webServiceTemplate;

    private SourceExtractor ratingResponseExtractor = new WUResponseExtractor();

    public WUResultGateway(WebServiceTemplate webServiceTemplate){
           this.webServiceTemplate =   webServiceTemplate;
    }
    private Source marshall( SendRDCResults results ) throws IOException{

        StringResult resp = new StringResult();
        Marshaller marshaller = webServiceTemplate.getMarshaller();
        marshaller.marshal( results, resp );

        return new ResourceSource( new ByteArrayResource( resp.toString().getBytes() ) );
    }

    public Object wuResponse( SendRDCResults results) throws IOException{
        //StringSource source = new StringSource();
        Result result = new StreamResult();
        StringResult strResult = new StringResult();
        boolean flag = getWebServiceTemplate().sendSourceAndReceiveToResult( marshall( results ), strResult );
        return result;
    }

} 
```

在不对来自服务器的响应进行任何更改的情况下，我想以 s String 或简单的 xml 格式获取值而不会出错。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:19:07.167

setDefaultUri(webServiceTemplate.getDefaultUri());

最后看起来如下

```
 public Object wuResponse( SendRDCResults results) throws IOException{
            //StringSource source = new StringSource();
            Result result = new StreamResult();
            StringResult strResult = new StringResult();
            setDefaultUri(webServiceTemplate.getDefaultUri());
            boolean flag = getWebServiceTemplate().sendSourceAndReceiveToResult( marshall( results ), strResult );
            return result;
        } 
```

# magento - 在可配置产品中，带重音符号的字符计为两个字符

> ID：12161530
> 
> 赞同：1
> 
> 时间：2012-08-28T14:28:52.107
> 
> 标签：magento

我们销售需要带有字符限制的文本字段的可配置产品（我们销售带有客户姓名的个性化手镯）。

因此，我们在产品页面上创建了一个限制为 15 个字符的文本字段。

如果我在这个字段中输入例如：“abcdefghijklmno”（这是 15 个字母），它会非常有效。

但是，如果我输入“abcdéfghijklmno”（仍然是 15 个字母，但带有“e”锐角），它就不起作用，它说“请指定产品选项”。

经过几次测试，我发现带有重音符号的字母被计为 2 个字符。

我怎样才能避免这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:44:49.677

这很可能是字符编码的问题——例如 UTF-8 与 Latin1。

你没有提到你正在使用什么编程语言。猜测它是一个 web 应用程序并且它是 PHP 的可能性，你可以使用`mb_strlen`(which count **characters** ) 而不是`strlen`(which counts **bytes** )。

如果不是 PHP，其他编程语言也有类似的功能来计算字符而不是字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:40:07.163

> ÉÉÉ

用`html_entity_decode($string);`

```
$example = html_entity_decode("abcdéfghijklmno");
print_r($example); 
```

尝试学习[htmlentities](http://php.net/manual/en/function.htmlentities.php)和[html_entity_decode](http://www.php.net/manual/en/function.html-entity-decode.php)

如果你想替换所有的急性，

[在指定产品选项url_encode](http://www.w3schools.com/tags/ref_urlencode.asp)之前，您必须创建一个列表并 str_replace 它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T16:15:12.730

感谢您，我也找到了解决方案：

您必须编辑此文件：app/code/core/Mage/Catalog/Model/Product/Option/Type/Text.php

替换（大约第 49 行）：

```
if (strlen($value) == 0 && $option->getIsRequire() && !$this->getProduct()->getSkipCheckRequiredOption()) {
            $this->setIsValid(false);
            Mage::throwException(Mage::helper('catalog')->__('请指定产品所需的选项。'));
        }
        if (strlen($value) > $option->getMaxCharacters() && $option->getMaxCharacters() > 0) {
            $this->setIsValid(false);
            Mage::throwException(Mage::helper('catalog')->__('文本太长'));
```

经过 ：

```
if (mb_strlen($value,'UTF-8') == 0 && $option->getIsRequire() && !$this->getProduct()->getSkipCheckRequiredOption()) {
            $this->setIsValid(false);
            Mage::throwException(Mage::helper('catalog')->__('请指定产品所需的选项。'));
        }
        if (mb_strlen($value,'UTF-8') > $option->getMaxCharacters() && $option->getMaxCharacters() > 0) {
            $this->setIsValid(false);
            Mage::throwException(Mage::helper('catalog')->__('文本太长'));
```

# xna - 如何在 XNA 中获取屏幕的每英寸像素值？

> ID：12161535
> 
> 赞同：1
> 
> 时间：2012-08-28T14:29:06.470
> 
> 标签：xna

有人知道上面问题的答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:34:09.410

我不认为你能得到这个值。您不知道连接的是什么显示器，虽然可能有驱动程序实际上知道这种类型，但它可能是默认驱动程序。无论哪种方式，您都无法访问此信息。

此外，可能会有重复的显示器、电视输出、投影仪等等。因此，这种情况比连接到渲染窗口或全屏窗口的已知监视器的正常情况更复杂

# node.js - 使用 Mongoose 进行批量更新

> ID：12161538
> 
> 赞同：9
> 
> 时间：2012-08-28T14:29:11.127
> 
> 标签：node.js, mongodb, mongoose

我正在从 RETS(XML) 提要中提取数据，并使用节点和猫鼬将其保存在本地 MongoDB 中。

我需要定期更新文档并删除不活动的文档以及添加新文档。我没有对 Mongo 或 RETS 服务器进行多次查询，而是同时拉取并循环访问数据。

这很好用，但是有没有办法通过更新和插入将 Mongoose 结果保存回数据库？还是我需要找到每个文档并单独更新？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T15:05:20.703

在 MongoDB 上，要使用 Mongoose 更新多个文档（不仅仅是一个），您可以使用**multi**选项：

```
Model.updateMany({ 
  size: 'lage'
}, { 
  $set: { size: 'large' }
}); 
```

在 Mongoose 文档中查看更多关于[更新文档](https://mongoosejs.com/docs/documents.html#updating)和[这里](https://mongoosejs.com/docs/api.html#model_Model.update)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-30T07:53:56.487

为了完整起见，如果任何人有多个查询条件，并且想为查询条件的每个匹配文档添加新字段，那么我们可以使用

```
var bulk = Person.collection.initializeUnorderedBulkOp();
bulk.find(query1).update(update1);
bulk.find(query2).update(update2);
bulk.execute(callback); 
```

在以下文档中，据说`db.collection.initializeUnorderedBulkOp()`

> 为集合初始化并返回一个新的 Bulk() 操作构建器。构建器构建了 MongoDB 批量执行的写入操作的无序列表。MongoDB 并行执行列表中的写操作。

[https://docs.mongodb.org/v3.0/reference/method/db.collection.initializeUnorderedBulkOp/](https://docs.mongodb.org/v3.0/reference/method/db.collection.initializeUnorderedBulkOp/)

# git - “git svn clone”失败的解决方法（需要完整的历史记录）

> ID：12161541
> 
> 赞同：29
> 
> 时间：2012-08-28T14:29:24.697
> 
> 标签：git, svn, git-svn

我想将 Subversion 存储库子目录（由`module`此处表示）转换为具有完整历史记录的 git 存储库。在我的 Subversion 存储库的历史中，有许多`svn copy`操作（Subversion 人称它们为分支）。发布策略是，在每个发布或其他分支创建后，旧 URL 将不使用，新 URL 替换旧 URL 以包含工作。

最佳情况下，根据我的阅读，这似乎应该可以解决问题：

```
$ git svn clone --username=mysvnusername --authors-file=authors.txt \
    --follow-parent \
    http://svnserver/svn/src/branches/x/y/apps/module module 
```

（其中`branches/x/y/`描绘了最新的分支）。但我收到一个错误，看起来像这样：

```
W: Ignoring error from SVN, path probably does not exist: (160013): Filesystem has no item: '/svn/src/!svn/bc/100/branches/x/y/apps/module' path not found
W: Do not be alarmed at the above message git-svn is just searching aggressively for old history. 
```

（**更新：**在上面添加选项`--no-minimize-url`不会删除错误消息。）

该目录`module`被创建并填充，但未导入最新提交之后的 Subversion 历史记录`svn copy`（创建的 git 存储库最终只有两个提交，而我预计会有数百个提交）。

问题是，在这种情况下如何导出完整的 Subversion 历史记录？

## 可能的原因

1.  搜索错误消息，我发现：[git-svn 匿名结帐失败并带有 -s](https://stackoverflow.com/questions/1493052/git-svn-anonymous-checkout-fails-with-s) 链接到此 Subversion 问题：[http ://subversion.tigris.org/issues/show_bug.cgi?id=3242](http://subversion.tigris.org/issues/show_bug.cgi?id=3242)

    根据我的阅读理解，Subversion 1.5 中的某些内容改变了客户端访问存储库的方式。对于较新的 Subversion，如果没有对 URL 路径的某些超级目录的读取访问权限（对我来说是真的，`svn ls http://svnserver/svn`失败为`403 Forbidden`），那么我们会因某些 Subversion 操作而失败。

2.  Jeff Fairley 在他的回答中指出 Subversion URL 中的空格也可能导致此错误消息（由用户 Owen 确认）。看看他的解决方案，看看他是如何解决这个案子的，如果你`git svn clone`在同样的情况下失败了。

3.  Dejay Clayton 在他的回答中透露，如果分支和标签 svn url 中最深的子目录组件名称相同（例如`.../tags/release/1.0.0`和`.../branches/release-candidates/1.0.0`），则可能会发生此错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-06-25T21:08:36.870

当我在分支或标签中有同名的子目录时遇到了这个问题。

例如，我有标签`candidates/1.0.0`and `releases/1.0.0`，这导致了记录的错误，因为子目录`1.0.0`同时出现在`candidates`and`releases`中。

每个[git-svn 文档](http://git-scm.com/docs/git-svn "git-svn 文档")：

> 当使用多个 --branches 或 --tags 时，git svn 不会自动处理名称冲突（例如，如果来自不同路径的两个分支具有相同的名称，或者一个分支和一个标签具有相同的名称）。在这些情况下，使用 init 设置您的 Git 存储库，然后在您第一次获取之前，编辑 $GIT_DIR/config 文件，以便分支和标签与不同的名称空间相关联。

因此，虽然以下命令由于名称`candidates`和`releases`标签相似而失败：

```
git svn clone --authors-file=../authors.txt --no-metadata \
    --trunk=/trunk --branches=/branches --tags=/candidates \
    --tags=/releases --tags=/tags -r 100:HEAD \
    --prefix=origin/ \
    svn://example.com:3692/my-repos/path/to/project/ 
```

以下命令序列确实有效：

```
git svn init --no-metadata \
    --trunk=/trunk --branches=/branches --tags=/tags \
    --prefix=origin/ \
    'svn://example.com:3692/my-repos/path/to/project/'

git config --add svn-remote.svn.tags \
    'path/to/project/candidates/*:refs/remotes/origin/tags/Candidates/*'

git config --add svn-remote.svn.tags \
    'path/to/project/releases/*:refs/remotes/origin/tags/Releases/*'

git svn fetch --authors-file=../authors.txt -r100:HEAD 
```

`branches`请注意，这仅有效，因为和中没有其他冲突`tags`。如果有，我将不得不以类似方式解决它们。

成功克隆 SVN 存储库后，我执行以下步骤： 将 SVN 标签转换为 GIT 标签；变成; `trunk`_ `master`将其他引用变成分支；并重新定位远程路径：

```
# Make tags into true tags
cp -Rf .git/refs/remotes/origin/tags/* .git/refs/tags/
rm -Rf .git/refs/remotes/origin/tags

# Make other references into branches
cp -Rf .git/refs/remotes/origin/* .git/refs/heads/
rm -Rf .git/refs/remotes/origin
cp -Rf .git/refs/remotes/* .git/refs/heads/ # May be missing; that's okay
rm -Rf .git/refs/remotes

# Change 'trunk' to 'master'
git checkout trunk
git branch -d master
git branch -m trunk master 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-26T14:12:21.800

不是一个完整的答案，但可能是您缺少的片段（我也对迁移感兴趣，所以我找到了难题的那一部分）。

当您查看[git-svn 的文档时](https://www.kernel.org/pub/software/scm/git/docs/git-svn.html)，您会发现以下选项：

```
--no-minimize-url 
```

> 当跟踪多个目录（使用 --stdlayout、--branches 或 --tags 选项）时，git svn 将尝试连接到 Subversion 存储库的根目录（或允许的最高级别）。如果整个项目在存储库中移动，此默认设置允许更好地跟踪历史记录，但可能会导致存在读取访问限制的存储库出现问题。传递 --no-minimize-url 将允许 git svn 按原样接受 URL，而无需尝试连接到更高级别的目录。当只跟踪一个 URL/分支时，此选项默认关闭（它不会有什么好处）。

这适合您的情况，因此`git svn`不会尝试读取更高级别的目录树（将被阻止）。

至少你可以试一试...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-20T17:56:36.163

我最近将一长串 SVN 存储库迁移到 Git 中，最后遇到了这个问题。我们的 SVN 结构非常草率，所以我不得不使用`--no-minimize-url`相当多的。通常，我会运行如下命令：

```
$ git svn clone http://[url]/svn/[repo]/[path-to-code] \
            -s --no-minimize-url \
            -A authors.txt 
```

我运行的最后几次迁移在 URL 中有一个空格。我不知道是空间还是其他原因，但我遇到了与您看到的相同的错误。如果没有必要，我不想修改配置文件，幸运的是我最终找到了解决方案。我最终跳过了`-s --no-minimize-url`选项，转而以不同的方式明确声明路径。

```
$ git svn clone http://[url]/svn/[repo]/ \
            --trunk="/[path-to-code]/trunk" \
            --branches="/[path-to-code]/branches" \
            --tags="/[path-to-code]/tags" \
            -A authors.txt \
            --follow-parent 
```

*   请注意，我`--follow-parent`从您的示例中添加，但我也不确定它有什么不同。
*   请记住，这些存储库中有空格，因此在`""`主干/分支/标签路径周围。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-06T19:48:36.337

[*我意识到这应该是对 Jeff Fairley 的回答的评论，但我没有这样发布它的声誉。由于原始海报确实要求确认该方法有效，因此我将其作为答案提供。*]

我可以确认他的解决方案适用于他（和我）遇到的由路径中的空格引起的问题。我有相同的要求（从具有历史记录的 SVN 存储库中克隆单个模块），只是我没有需要担心的分支或标签。

我尝试了几种在 URL 中提供模块完整路径的排列方式（例如使用`--no-minimise-url`、指定`--trunk`或`--stdlayout`），但均未成功。对我来说，结果通常是一个带有完整历史日志但没有任何文件的 git repo。这可能是也可能不是 FooF 遇到的相同问题（在 SVN 中没有读取访问权限），但这肯定是由于我的模块路径中有空格造成的。

仅使用 SVN 回购库作为 URL 和我的模块的路径再次尝试`--trunk`完美无缺。之后我的 .git/config 看起来像这样：

```
[core]
        repositoryformatversion = 0
        filemode = false
        bare = false
        loggallrefupdates = true
        symlinks = false
        ignorecase = true
        hideDotFiles = dotGitOnly
[svn-remote "svn"]
        url = https://[url]/svn/[repo]
        fetch = trunk/[path-to-code]:refs/remotes/trunk
[svn]
        authorsfile = ~/working/authors-transform.txt 
```

并且随后的`git`和`git svn`命令根本没有抛出任何错误。谢谢杰夫！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-05T04:36:17.367

*[这是原版海报~~说话的~~写作。以下内容曾经是对该问题的更新，但由于它解决了这个问题 - 尽管我的口味并不令人满意 - 我会将其发布为缺乏更好解决方案的答案。]*

我不喜欢这样，但我最终在 ( , ) 之间进行了`clone` 一些编辑：`init``fetch``.git/config``repopath=apps/module``gitreponame=module`

```
$ git svn init--username=mysvnusername \
            --branches=/src/branches/ \
            --trunk=/src/trunk/${repopath} \
            --tags=/src/tags/ \
            http://svnserver/svn/src ${gitreponame}
$ cd ${gitreponame}
$ sed -i.bak "s|*:|*/${repopath}:|" .git/config
$ git svn fetch --authors-file=../authors.txt --follow-parent 
```

我找不到如何为子目录迁移指定分支`git svn`- 因此无法编辑`.git/config`文件。以下统一差异说明了使用 编辑的效果`sed`：

```
 [svn-remote "svn"]
        url = http://svnserver/svn/src
        fetch = trunk/apps/module:refs/remotes/trunk
-       branches = branches/*:refs/remotes/*
-       tags = tags/*:refs/remotes/tags/*
+       branches = branches/*/apps/module:refs/remotes/*
+       tags = tags/*/apps/module:refs/remotes/tags/* 
```

由于实际需要`HEAD`的是另一个 URL，所以我只添加了另一个`[svn-remote]`部分`.git/config`：

```
+ [svn-remote "svn-newest"]
+       url = http://svnserver/svn/src
+       fetch = branches/x/y/apps/module:refs/remotes/trunk
+       branches = branches/*/apps/module:refs/remotes/*
+       tags = tags/*/apps/module:refs/remotes/tags/* 
```

（在现实生活中的实验中，我还在这里添加了一些第一次获取未拾取的分支），然后再次获取：

```
$ git svn fetch --authors-file=../authors.txt --follow-parent svn-newest 
```

这样我就结束了将完整的 Subversion 历史迁移到新生成的 git 存储库。

**注1**：我可能只是告诉我的“trunk”是`branches/x/y/apps/module`“trunk”的意思，因为`git-svn`似乎基本上有git的意思`HEAD`（主干、分支、标签的颠覆概念没有深厚的技术基础，它们很重要社会认可的惯例）。

**注2**：可能`--follow-parent`不需要`git svn fetch`，但我现在无法知道或试验。

**Note-3**：虽然早期阅读[svn2git](https://github.com/nirvdrum/svn2git)似乎是一个包装器`git-svn`，但我没有看到动机，但看到标签的混乱呈现我现在有点明白了。如果我不得不再次尝试这样做，我会尝试`svn2git`下一次。

**PS**这是一种相当尴尬的操作方式。这里的次要问题（为什么`.git/config`需要外部编辑）似乎是

1.  Subversion 分支没有任何必要的技术意义（ Subversion 中的*分支*和*标签*只是版本化文件系统副本的*社会认可标签*以及完成副本的“标准”或其他社会认可的约定 -*主干*也没有技术意义） ， 和
2.  `git svn`实现严格假定在一定程度上遵循社交 Subversion 约定（如果您只想迁移子目录而不是整个 Subversion 存储库，这是不可能的）。

**TODO：**`.git/config`在这里解释文件的格式会有所帮助`git svn`- 例如，我现在（在写了原始答案一年半之后）不知道`[svn-remote "svn-newest"]`上面的意思。此外，该方法可以通过编写脚本来自动化，但这超出了我目前对该问题的兴趣，我无权访问原始 Subversion 存储库或复制该问题。

# facebook-graph-api - 以编程方式检查 Facebook Graph API 访问令牌何时过期

> ID：12161544
> 
> 赞同：1
> 
> 时间：2012-08-28T14:29:34.870
> 
> 标签：facebook-graph-api

是否有 API 端点来获取[此处](https://developers.facebook.com/tools/debug/access_token?q=%5BTOKEN%5D)可用的信息？

我希望能够在访问令牌过期时签入代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T15:47:37.343

没有特定的端点来检查 access_tokens，相反，您可以`/me`使用您拥有的 access_token 调用，直到它返回错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T20:01:50.477

当您使用 facebook javascript SDK 登录时，它会在“autheResponse”对象下为您提供一个“expiresIn”值。

我相信这个数字以秒为单位。

不幸的是，我不确定如何延长该号码，或要求更长的到期日期等。

为没有超级精确而道歉，facebook API 总是留下这种“不确定”的感觉。

编辑：也许您可能想查看“扩展令牌”的说明：

[https://developers.facebook.com/docs/facebook-login/access-tokens](https://developers.facebook.com/docs/facebook-login/access-tokens)

# c# - 带反射的 GetComponent

> ID：12161548
> 
> 赞同：2
> 
> 时间：2012-08-28T14:29:51.850
> 
> 标签：c#

我正在尝试使用反射获取表单的 BindingSource。以下代码是我迄今为止尝试过的，尽管它有错误：

```
public class MyClass :Form
{
    BindingSource bs = new BindingSource();
}

public static class Class2
{
    public static BindingSource GetBindingSource(string FieldNameP, Form FormP)
    {
        BindingSource Bs = null;

        var info=FormP.GetType().GetField(FieldNameP);
        if(info != null)
        {
            Bs = (BindingSource)info.GetValue(null)
        }

        return Bs;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:32:17.813

在调用 get 字段时，您需要使用接受[绑定标志的](http://msdn.microsoft.com/en-us/library/system.reflection.bindingflags.aspx)[重载](http://msdn.microsoft.com/en-us/library/4ek9c21e.aspx)。您可能需要尝试一下，但我认为您需要：

```
BindingFlags.NonPublic | BindingFlags.Instance 
```

`.GetValue`获取要在其上调用字段的对象的实例。

```
.GetValue(myform); 
```

更好的方法可能是创建一个接口：

```
public interface IBindable
{
    BindingSource Source { get; }
} 
```

将其应用于表单：

```
public class MyClass : Form, IBindable
{
    private BindingSource _Source = new BindingSource();
    public BindingSource Source { get { return _Source; } }
} 
```

使用界面：

```
BindingSource formSource = MyForm.Source; 
```

# iphone - Xcode生成的NSManagedObject模型在ARC项目中使用retain属性

> ID：12161549
> 
> 赞同：1
> 
> 时间：2012-08-28T14:30:02.770
> 
> 标签：iphone, ios, core-data, automatic-ref-counting

```
@interface Event : NSManagedObject

@property (nonatomic, retain) NSDate * timeStamp;

@end 
```

这里没有编译错误。为什么可以`retain`在这里使用？我应该用 替换它`strong`吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:37:47.430

`strong`是 100% 的同义词`retain`，因此除非您愿意，否则您不需要替换它。XCode 生成它，因为它再次与`strong`.

`strong`也就是说，如果为了一致性而使用它会很好。Apple 的文档通常会说 if ARC == use `strong`，所以如果他们也这样做就好了！

# c# - 系统颜色 - WPF

> ID：12161553
> 
> 赞同：0
> 
> 时间：2012-08-28T14:30:09.510
> 
> 标签：c#, wpf, windows, colors, system

> **可能重复：**
> [为什么 WPF 主题不使用 SystemColors？](https://stackoverflow.com/questions/11828587/why-dont-wpf-themes-use-systemcolors)

我已经构建了一个应用程序并为文本/文本框/背景等手动定义了大部分颜色（如果不是全部的话）。但是，如果 Windows 主题更改为高对比度之类的东西，我如何才能让它反映这一点，我的应用程序将转换和在这种情况下仍然可以在视觉上使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:32:55.397

最好的事情是不要触及默认值。但是，您也可以在 XAML 文件中使用系统颜色，如下所示：

```
Background="{StaticResource {x:Static SystemColors.ActiveCaptionBrushKey}}" 
```

# delphi - 解决无法加载 BPL 但您已经重新编译的 Delphi BPL 包问题（Windows VirtualStore 文件系统问题）

> ID：12161554
> 
> 赞同：12
> 
> 时间：2012-08-28T14:30:13.310
> 
> 标签：delphi, dependencies, bpl

我的一般问题是如何解决“我的 BPL 不会加载，因为依赖关系不会消失，无论我清理和重新编译多少次”。 **更新**您可能认为您有一个干净的重新编译系统，但由于 Windows 及其文件系统虚拟化错误功能的逆向奇迹，您没有。

当我尝试将我的设计时包（在本例中名为`dclFsTee.bpl`）加载到我的 Delphi IDE（它是快速报告 4 teechart 包装器组件包）中时，它抱怨：

```
The program can't start because tee7100.bpl is missing from your computer. Try reinstalling ... 
```

我`tee7100.bpl`知道的系统上的任何 DCP 或 DCU 文件都没有引用它。但很明显，出了点问题，我找不到问题所在。

所有 Delphi 用户都面临着一百个使用 BPL 的“无法编译或无法加载”的问题。当被问及该做什么时，普遍的避免是清理您的计算机。

然而，我现在已经花了几个小时清理我的计算机，虽然一切都在编译文件，但很明显，一定有一些过时的东西隐藏在某个地方，因为我试图加载的生成的 BPL 文件仍然想要加载一个版本几天前我从这个系统中删除的 TeeChart BPL，以及我能找到的每一条痕迹。

我删除的 Delphi 2007 中 TeeChart 东西的痕迹包括 $(BDS)\Lib 和 $(BDS)\Lib\debug 文件夹中的所有内容，以及系统上的所有 DCP 和 BPL 文件夹。每个以 TeeChart-unit 命名的 dcu 文件也都消失了。

一旦你走到了路的尽头，接下来你会尝试什么？（格式化硬盘，买新电脑。）认真的。我认为我是个聪明人，但我有一个 1 tb 的硬盘驱动器，一个运行到 80 多个文件夹的库路径，以及一个看起来组织良好的源代码存储库，但显然有些东西隐藏在我无法做到的地方找到它。

我有 TeeChart Standard 2012，带有完整的源代码，据我所知，我的开发机器不再包含 delphi 附带的“tee chart tee7100.bpl”版本中的任何旧 TeeChart BPL 或 DCP 文件。

我已经运行了 teechart 附带的“recompile.exe”向导，在向 tee.inc 文件写入 {$DEFINE x} 声明后，它似乎只是运行 MSBuild 并构建包（源代码中有两个）分配）。

然而，不知何故，似乎其中一个包的隐式导入之一正在绘制一些尚未重建的陈旧文件，因此它试图加载 tee7100.bpl。新的 bpl 名称是 tee911.bpl。

我没有提出关于fastreport 的非常具体的问题，我只是将它作为我在Delphi 开发时遇到过数十次的一般伤害世界的一个具体实例来提及。

我只提供快速报告的详细信息，因此您可以看到这实际上是一个一般问题的特定实例，在处理具有依赖关系的组件源代码或包或包集时，有时在 Delphi IDE 中会面临这个问题. 清理您的计算机，以便您的代码甚至构建都可能很棘手。

所以这是我的 Delphi package-to-package-dependency-resolution 问题：

1.  查找或跟踪一些不再需要的 BPL 问题的隐式加载的最有效方法是什么，以便我的代码（构建和编译得很好！）实际上将加载到 Delphi IDE 中。运行 Recompile 生成的 BPL 文件似乎正确链接到正确的 DCP 文件，并且不存在旧的/陈旧的 DCP 或 DCU 文件。例如，新的 DCP 文件名为 tee911.dcp。

2.  您能否以某种方式了解哪些包实际上是陈旧的，以及 .bpl 链接时正在读取、链接和静态导入的内容？（我在想可能像 BPL 文件的特殊类似 MAP 的文件？）

**更新**经过数小时的斗争，并使用了我所知道的每一个技巧，我意识到我没有[检查 Windows 7 中文件虚拟化引起的一些`VirtualStore`相关问题](http://support.microsoft.com/kb/927387)。这意味着 Windows 7 依赖于在它之上运行的程序. 它为您提供了文件的另一个版本，这不是您想要的。这在几个方面可能是致命的；一; 您重新编译了一个 BPL，但它不是加载的。杀死我的 BPL 位于 VirtualStore 的 SysWow64 文件夹中。请注意，虚拟存储基本上会使幻像文件出现，只有当您是某个“低权限”程序时才会出现，这显然是 Win7/64 位上的 Delphi 2007。要删除当前用户帐户的 SysWow64 VIRTUALSTORE 文件夹中的 BPL 文件：

```
 del %HOMEPATH%\AppData\Local\VirtualStore\Windows\SysWow64\*.bpl 
```

...有些日子我只是讨厌 Windows 体系结构。无论如何，我不会将上述内容作为答案，因为我想知道是否有人有更好的方法或任何提示或建议下次可能会有所帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T16:45:17.527

好的，没有其他人回答，所以我把它放在这里对未来的人有帮助：

-- 在清理带有旧版本 DLL 的损坏系统时，请记住 Windows VirtualStore，包括 TeeChart、FastReport、Indy 等，这些系统往往会陷入混乱，因为它们既可以作为“随 delphi 提供的开箱即用软件包”而存在如果您直接从供应商处购买并安装它们，则经常作为升级版本安装，或者第三，您可能在公司的 mega-component-pack-directory 中有自己的编译副本。

-- 在搜索重复或过时的 BPL 时，在 windows 中进行文件搜索不会查看虚拟存储，您必须手动为您的进程或用户或程序定位并删除整个虚拟存储区域。

这个问题的第二个层次是这样的：

FastReports 的依赖关系图很复杂：

*   这取决于 Indy，您可能有自己的 Indy 版本，Delphi 本身也有，硬盘上的其他东西可能有自己的 Indy 副本。

*   它支持各种版本的 TeeChart，包括 Delphi 附带的二进制文件，可能还有标准版本或您可能从 Steema 购买的其他购买版本的 TeeChart。

*   它使用预编译的头包含文件来进行编译，而不仅仅是一个，而是同名包含 (.inc) 文件的两个不同副本。

*   当您使用他们自己的编译器工具（重新编译 FastReport）时，它可以非常可靠地工作，但当您想从单个构建脚本构建项目中的所有内容时，它并不是最好的，这就是我的问题的根源。

*   关键是要了解关于你庞大的包中所有组件的依赖关系的所有信息，并干净地组织你的系统，这样你就没有旧的东西（比如 Indy 和 TeeChart bpls、dcp 或 dcu文件）躺在周围。如果您不知道自己在做什么，那么清理它是一项相当复杂的工作。

    *   一个实用程序可以真正删除系统附带的 Indy 和 TeeChart 版本的所有痕迹，而 FastReports 的“Embarcadero 版本”是解决这种情况的关键。一个普遍的提示是“如果一个版本的 X 与 Delphi 一起提供，并且您要安装一个新版本，请准备好受苦，直到您的系统真正清理干净”。

    *   避免所有这些废话的一个非常了不起的技术是在初始 Delphi IDE 安装期间不安装 Indy、FastReport 或 TeeChart（取消选中或跳过它们），然后自己从源代码中一个一个地安装它们。仅仅因为 Delphi 中预装了一个版本并不能说明这是一件好事。（更新：在安装过程中您不能再取消选择 Indy，它是基本 Delphi 产品的一部分，至少从 Delphi XE8 开始。从 Delphi 自己的 lib 目录中删除内置 Indy 的清理实用程序对于构建自己的任何人都是必要的.)

    *   另一个真正令人惊叹的技术是在虚拟机上运行商业组件的安装程序，然后只需收集 pascal 源代码并将其传输到干净的开发机器上，然后自己构建它。这样，您可以避免在系统中散布 BPL 和东西，甚至安装到`C:\Windows\System32`（在 32 位系统上）和`C:\Windows\SysWow64`（在 64 位系统上的等效路径）时发生的可怕事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-04T02:02:01.707

将该 BPL (tee7100.bpl) 放在 $(BDSCOMMONDIR)\Bpl 下

```
for XE: $(BDSCOMMONDIR)=  "C:\Users\Public\Documents\RAD Studio\8.0"
for XE5: $(BDSCOMMONDIR)=  "C:\Users\Public\Documents\RAD Studio\12.0" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-03T13:37:38.140

可能导致此问题的另一个问题是系统路径中没有存储 .bpl 文件的文件夹。

这是因为 Delphi 尝试使用文件名而不是绝对路径调用 WinAPI 函数 LoadLibrary。因此，如果 Windows 找不到该文件，Delphi 就无法加载它。

有关更多信息，请参阅[此论坛帖子](http://embarcadero.newsgroups.archived.at/public.delphi.ide/201003/10031814135.html)。

这似乎是 Windows 7 中的一个问题，但在 Windows 10 中不是。

# matlab - 在matlab中加载具有可变列数的文件

> ID：12161555
> 
> 赞同：1
> 
> 时间：2012-08-28T14:30:14.277
> 
> 标签：matlab

我需要在matlab中加载一个列数不固定的文件，跳过前两行和最后一行。

```
Good gRace! Old Maple Actually Chews Slate
5296
350GLU      N 3475 -11.747  -2.990  -0.626
350GLU      H 3476 -11.792  -2.965  -0.541
350GLU     CA 3477 -11.605  -3.015  -0.625
..........................................
1441LEU      C14823 -12.241  -9.504  -2.663
1441LEU      O14824 -12.316  -9.586  -2.714
14.31797  21.41320   9.79756 
```

有谁知道这是怎么做到的吗？textscan 和 fscanf 看起来都需要预先指定的列数。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:41:56.680

您可以使用[*dlmread*](http://www.mathworks.com/help/techdoc/ref/dlmread.html)命令。所以你可以做类似的事情

```
data = dlmread('myDataFile.txt', '\t', [startRow startCol endRow endCol]); 
```

希望这可以帮助！

# python - 在 matplotlib 图中绘制 SVG（嵌入在 wxPython 中）

> ID：12161559
> 
> 赞同：6
> 
> 时间：2012-08-28T14:30:25.370
> 
> 标签：python, svg, matplotlib

我正在尝试在 matplotlib 子图中嵌入 SVG 图像。

> matplotlib 只能原生读取 PNG，但如果安装了 PIL，它将使用它来加载图像并返回一个数组（如果可能），该数组可以与 imshow() 一起使用。 [http://matplotlib.sourceforge.net/api/pyplot_api.html](http://matplotlib.sourceforge.net/api/pyplot_api.html)

```
import Image     
filename = "/tmp/figure.svg"
pil_img = Image.open(filename) # PIL image
img = np.asarray(pil_img) # converting PIL image into numpy array
self.axes.cla()
self.axes.imshow(img) 
```

但当然 PIL 不支持 SVG。错误：

> 文件“/usr/lib/python2.7/dist-packages/PIL/Image.py”，第 1980 行，打开
> 
> raise IOError("无法识别图像文件")
> 
> IOError：无法识别图像文件

如何栅格化 SVG 文件以`imshow`使用 matplotlib 绘制或直接绘制矢量？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-09-10T09:11:56.937

我也遇到了同样的问题，但现在在我的包 pylustrator 中实现了一个解决方案： [https ://pylustrator.readthedocs.io/en/latest/composing.html#svg-files](https://pylustrator.readthedocs.io/en/latest/composing.html#svg-files)

它可以读取和解析 svg 文件并创建 matplotlib 艺术家以在图中显示 svg 内容。

并非所有 svg 功能都可以由 matplotlib 艺术家模拟，因此不会显示渐变或过滤器，但支持大多数 svg 功能。

# datetime - 为什么“错误：无效的转义序列？”

> ID：12161560
> 
> 赞同：2
> 
> 时间：2012-08-28T14:30:26.613
> 
> 标签：datetime, embedded-linux, glib, vala

根据[瓦拉多克](http://valadoc.org/#!api=glib-2.0/GLib.DateTime.format)

```
var now = new DateTime.now(new TimeZone.local());
var timestamp = now.format("\%F.\%T"); 
```

应将时间戳设置为“2012-08-28.09:51:06”。为什么在“F”和“T”上出现“错误：无效的转义序列”？[valadoc](http://valadoc.org/#!api=glib-2.0/GLib.DateTime.format)中的其他格式会导致相同的错误，而 now.to_string() 实际上是“2012-08-28T09:51:06+0000”

编辑：也许嵌入式linux目标缺少一些东西？

编辑：[这里](http://fpaste.org/BQZ0/)的测试代码在这个使用 glib 2.26.1 的项目中打印“（null）”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T23:12:13.833

正如 NullUserException 所提到的，您不应该包含反斜杠——这就是导致无效转义序列错误的原因。

删除反斜杠后它仍然不起作用的原因是 %T 格式说明符直到 2.30 周期才添加。相关的提交是[414c8ce532c19fe65deb8dfb80222d0164be5cbe](http://git.gnome.org/browse/glib/commit/?id=414c8ce532c19fe65deb8dfb80222d0164be5cbe)

您可以通过执行以下操作来解决它：

```
var timestamp = now.format ("%F.%H:%M:%S"); 
```

# jquery - jQuery each() 完成回调函数

> ID：12161561
> 
> 赞同：2
> 
> 时间：2012-08-28T14:30:26.750
> 
> 标签：jquery, callback, each

我正在尝试使用以下 each() 函数扫描 DOM 中的所有样式表

```
$("link").each(function(){
    $.get($(this).attr('href'), function() {
        // Some Code...
    });
}); 
```

此代码工作正常，但我想回调以知道**所有样式表**已被扫描并在此后运行另一个函数。有可能做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T14:35:52.173

创建对象数组[`$.Deferred`](http://api.jquery.com/category/deferred-object/)：

```
var jqXHRs = $("link").map(function() {
  return $.get($(this).attr('href'), function () {
    // Some code...
  });
}); 
```

然后将它们传递给[`.when()`](http://api.jquery.com/jQuery.when/)并使用[`done()`](http://api.jquery.com/deferred.done/)回调：

```
$.when.apply(null, jqXHRs.get()).done(
  function() {
    // All done
  }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:35:53.193

`document.styleSheets`当您可以通过API询问它们时，为什么还要通过 AJAX 再次加载每个样式表（它们已经在您的页面中加载过一次） ？

```
for (var i in document.styleSheets) {
    /* code here involving cssText or whatever */
} 
```

由于这种方法将构成同步操作，因此您不需要回调 - 您只需将“回调”代码放在循环之后。

# jax-ws - JAX WS 没有产生正确的 HTTP 请求

> ID：12161564
> 
> 赞同：0
> 
> 时间：2012-08-28T14:30:48.287
> 
> 标签：jax-ws, webservice-client

我已经通过远程 wsdl 的 wsimport 生成了存根文件，并创建了一个独立的客户端。现在当我运行客户端时，产生的 HTTP 请求是这样的：

HTTP 标头：

```
---[HTTP request - http://www.transportdirect.info/EnhancedExposedServices/CarJourneyPlannerSynchronous/v1/CarJourneyPlannerSynchronousService.asmx]---
Content-type: text/xml;charset="utf-8"
Soapaction: "http://www.transportdirect.info/TransportDirect.EnhancedExposedServices.CarJourneyPlannerSynchronous.V1/GetGridReference"
Accept: text/xml, multipart/related, text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2 
```

HTTP 正文：

```
<?xml version="1.0" ?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
  <S:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <wsse:UsernameToken>
        <wsse:Username>USERNAME</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">PASSWORD</wsse:Password>
      </wsse:UsernameToken>
    </wsse:Security>
  </S:Header>
  <S:Body>
    <GetGridReference xmlns="http://www.transportdirect.info/TransportDirect.EnhancedExposedServices.CarJourneyPlannerSynchronous.V1">
      <transactionId>bfe2ccbe-9197-4992-9073-cd3a3c0e5c47</transactionId>
      <locationType>Postcode</locationType>
      <locationValue>W11</locationValue>
    </GetGridReference>
  </S:Body>
</S:Envelope> 
```

现在，SOAP Envelope 部分完全没问题，因为我已经使用 SOAP 工具对其进行了测试，并且得到了正确的输出。但是上面的HTTP请求总是给我

```
---[HTTP response - http://www.transportdirect.info/EnhancedExposedServices/CarJourneyPlannerSynchronous/v1/CarJourneyPl
annerSynchronousService.asmx - 500]---
null: HTTP/1.1 500 Internal Server Error
Cache-control: private
X-ua-compatible: IE=EmulateIE7
Content-type: text/html; charset=utf-8
Content-length: 7424
Connection: close
X-powered-by: ASP.NET 
```

后面是很多 html 标签，描述了一些错误。

我的 Java 客户端代码如下所示 -

```
CarJourneyPlannerSynchronousService service = new CarJourneyPlannerSynchronousService();
port = service.getCarJourneyPlannerSynchronousServiceSoap();
port.getGridReference(transactionId, "bla-bla", "bla-bla"); 
```

你能告诉我我在这里想念什么吗？如果您想查看更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:48:01.257

注意上线：

```
HTTP/1.1 500 Internal Server Error 
```

它表明服务器端出现了问题。检查服务器日志，您将找到错误的原因。

如果您无权访问服务器，请查看 Web 服务的文档并检查您是否发送了一些可能导致服务器崩溃的不适当参数（非常不可能，因为您提到您使用其他工具测试了 SOAP 请求） . 我怀疑`soapaction`您的 HTTP 标头中的字段，因为基于 .NET 的 Web 服务经常遇到问题 - 如果您发送一个他们不期望的值，您可能会收到错误 500。

参考：

*   [http://bluebones.net/2003/07/server-did-not-recognize-http-header-soapaction/](http://bluebones.net/2003/07/server-did-not-recognize-http-header-soapaction/)
*   [https://sharepoint.stackexchange.com/questions/43543/how-to-debug-500-internal-server-error-when-calling-web-services](https://sharepoint.stackexchange.com/questions/43543/how-to-debug-500-internal-server-error-when-calling-web-services)

# c - 如何解释 *( (char*)&a )

> ID：12161567
> 
> 赞同：4
> 
> 时间：2012-08-28T14:30:55.027
> 
> 标签：c, endianness

我看到了一种了解平台字节顺序的方法是这个程序，但我不明白

```
#include <stdio.h>
int main(void)
{
  int a = 1;
  if( *( (char*)&a ) == 1) printf("Little Endian\n");
  else printf("Big Endian\n");
  system("PAUSE");  
  return 0;
} 
```

测试有什么作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T14:35:12.600

An`int`几乎总是大于一个字节，并且经常跟踪架构的字长。例如，32 位体系结构可能具有 32 位整数。所以给定典型的 32 位整数，4 个字节的布局可能是：

```
 00000000 00000000 00000000 00000001 
```

或最低有效字节在前：

```
 00000001 00000000 00000000 00000000 
```

char* 是一个字节，所以如果我们将此地址转换为 char* 我们将得到上面的第一个字节，要么

```
 00000000 
```

或者

```
 00000001 
```

因此，通过检查第一个字节，我们可以确定架构的字节序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T14:36:25.087

这仅适用于`sizeof(int) > 1`. 例如，我们假设它是 2，而 a`char`是 8 位。

基本上，使用 little-endian，作为 16 位整数的数字 1 如下所示：

```
00000001 00000000 
```

但是对于大端，它是：

```
00000000 00000001 
```

所以首先是代码集`a = 1`，然后是：

```
*( (char*)&a ) == 1) 
```

获取 的地址`a`，将其视为指向 a 的指针`char`，然后取消引用它。所以：

*   如果`a`包含一个 little-endian 整数，您将得到该`00000001`部分，当作为 a 插入时为 1`char`

*   如果`a`包含一个大端整数，你会得到`00000000`。检查`== 1`将失败，代码将假定平台为大端。

您可以使用`int16_t`and`int8_t`而不是`int`and来改进此代码`char`。或者更好的是，只需检查是否`htons(1) != 1`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T14:32:29.273

1.  取地址`a`
2.  将其投射到`char*`
3.  取消引用 this `char*`，这会给你的*第一个*字节`int`
4.  检查它的值 - 如果它是`1`，那么它是小端。否则 - 大。

* * *

假设`sizeof(int) == 4`，则：

```
|........||........||........||........|    <- 4bytes, 8 bits each for the int a
| byte#1 || byte#2 || byte#3 || byte#4 | 
```

执行步骤 1、2 和 3 时，`*( (char*)&a )`将为您提供第一个字节`| byte#1 |`.

然后，通过检查它的值，`byte#1`您可以了解它是大端还是小端。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-28T14:37:13.437

*   您可以将整数视为 4 个字节的数组（在大多数平台上）。小端整数将具有值`01 00 00 00`和大端`00 00 00 01`。
*   通过这样做`&a`，您可以获得该数组的第一个元素的地址。
*   该表达式`(char*)&a`将其转换为单个字节的地址。
*   最后`*( (char*)&a )`得到该地址所包含的值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T14:35:38.350

该程序只是将 an 占用的空间重新解释`int`为 s 的数组，`char`并假设`1`int 将存储为一系列字节，其中最低顺序为值为 1 的字节，其余为 0。

因此，如果最低位字节首先出现，则平台为小端，否则为大端。

这些假设可能不适用于现有的每个平台。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-28T14:38:28.397

```
a = 00000000 00000000 00000000 00000001
    ^                                 ^
    |                                 |
    &a if big endian                  &a if little endian

    00000000                   00000001
    ^                                 ^
    |                                 |
    (char*)&a for BE                  (char*)&a for LE

    *(char*)&a = 0 for BE             *(char*)&a = 1 for LE 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-28T19:40:30.467

以下是它的分解方式：

```
 a        -- given the variable a
          &a        -- take its address; type of the expression is int *
  (char *)&a        -- cast the pointer expression from type int * to type char *
*((char *)&a)       -- dereference the pointer expression
*((char *)&a) == 1  -- and compare it to 1 
```

基本上，强制`(char *)&a`转换将表达式的类型`&a`从指向的指针转换`int`为指向的指针`char`；当我们将解引用运算符应用于结果时，它为我们提供了存储在`a`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-28T14:43:41.937

```
*( (char*)&a ) 
```

在 BigEndian 中，int i=1（大小为 4 字节）的数据将在内存中排列为：-（从低地址到高地址）。

```
00000000 -->Address 0x100
00000000 -->Address 0x101
00000000 -->Address 0x102
00000001 -->Address 0x103 
```

虽然 LittleEndian 是：-

```
00000001 -->Address 0x100
00000000 -->Address 0x101
00000000 -->Address 0x102
00000000 -->Address 0x103 
```

分析上述演员阵容：-

也`&a= 0x100`因此
`*((char*)0x100)`意味着考虑一次取一个字节（因为为 int 加载了 4 个字节），因此将引用 0x100 处的数据。

```
*( (char*)&a ) == 1 => (*0x100 ==1) that is 1==1 and so true,implying its little endian. 
```

# c# - Viewport3D 禁用重新缩放/调整大小

> ID：12161568
> 
> 赞同：0
> 
> 时间：2012-08-28T14:30:57.480
> 
> 标签：c#, wpf, viewport3d, rescale

如何在 WPF 中禁用 Viewport3d 的以下奇怪的调整大小/重新缩放行为？请注意，我没有更改窗口高度：

[![http://i.stack.imgur.com/jCgPe.png](../Images/6cfdd9d27012dcb3654a5eeb9ae0d14a.png)](https://i.stack.imgur.com/jCgPe.png)

[![http://i.stack.imgur.com/Q0V6X.png](../Images/eda6c64f215f91c636b895dee2183446.png)](https://i.stack.imgur.com/Q0V6X.png)

如何禁用 WPF 的此“功能”（或为什么要这样做？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:24:59.617

对于任何偶然发现这个问题的人，这是 Mike Danes 的回答： http: [//social.msdn.microsoft.com/Forums/en-US/wpf/thread/642253a6-e7a5-4ce2-bc08-e91f2634605b/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/642253a6-e7a5-4ce2-bc08-e91f2634605b/)

> 这种自动缩放是透视工作方式的结果。
> 
> 默认视野为 45，默认近平面距离为 0.125。这意味着当 x 坐标为 tan(45/2) * 0.125 = 0.051776 时，在视口右侧可以看到一个点 (x, 0, 0.125)。请注意视口宽度在此计算中如何不发挥作用，如果将其变宽，点 (0.051776, 0, 0.125) 仍将在视口右侧可见，这就是茶壶看起来更大的原因。
> 
> 您可以通过改变视野和近平面距离来补偿宽度增加，沿着这些线：

```
double newWidth = grid.ActualWidth;
double originalWidth = 509.0;
double originalNearPlaneDistance = 0.125;
double originalFieldOfView = 45.0;
double scale = newWidth / originalWidth;

double fov = Math.Atan(Math.Tan(originalFieldOfView / 2.0 / 180.0 * Math.PI) * scale) * 2.0;
camera.FieldOfView = fov / Math.PI * 180.0;
camera.NearPlaneDistance = originalNearPlaneDistance * scale; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T18:33:22.613

我知道这是一篇旧帖子，但我遇到过几次，我不确定接受的答案是否正确。Near Plane Distance 定义了对象在哪个点太近而无法渲染。我不确定这会如何影响 viewport3d 及其子项的比例。我遇到的是修改 Viewport3d.Width 会影响 3D 场景的比例，而修改 Height 只会导致剪切（或者如果变大则添加空白）。在我看来，这并不直观，但也许它是我不知道的 3D 编程约定。

对于上述问题，我的解决方案是将 Viewport3D 从其所在的 Grid 中删除，然后将其放置在画布内。这将防止窗口调整大小改变视口的宽度，并且它应该保持相同的大小。

# c# - WinRT中UIElement的绝对坐标

> ID：12161584
> 
> 赞同：9
> 
> 时间：2012-08-28T14:32:05.787
> 
> 标签：c#, user-interface, windows-runtime, uielement

找不到一种方法来定位`UIElement`Metro 风格应用程序的绝对位置。有人知道解决方案吗？

（上下文：我希望在调用它的按钮旁边显示一个弹出窗口）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-28T17:54:22.337

这应该工作...

```
private void Button_Click(object sender, RoutedEventArgs e)
{
   var button = sender as Button;
   var ttv = button.TransformToVisual(Window.Current.Content);
   Point screenCoords = ttv.TransformPoint(new Point(0, 0));
} 
```

# html - 块引用引号样式

> ID：12161590
> 
> 赞同：5
> 
> 时间：2012-08-28T14:32:19.937
> 
> 标签：html, css

我正在尝试制作一个块引用样式，其中开始和结束引号比文本大，但仍然适合它的行，就像这样[![例子](../Images/19333021f2583abc5f559141698564b7.png)](https://i.stack.imgur.com/v3GkA.png)

这是我的代码[http://jsfiddle.net/EnL3R/2/](http://jsfiddle.net/EnL3R/2/)

```
<div id="conteudo">
  <ul class="parcerias">
    <li><a href="#">Title- <i>Author</i></a></li>
     <li class="descricao">
        <blockquote>

            <p><span>“&lt;/span>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus fringilla nisl quis enim scelerisque ac consectetur tortor molestie. Morbi mollis augue et risus imperdiet dictum. Suspendisse sed sapien nec erat pretium consectetur et et metus. Maecenas tincidunt turpis placerat nisi vulputate at volutpat ante vulputate. Duis accumsan suscipit posuere. Nunc suscipit facilisis dapibus. Nulla scelerisque felis sed urna bibendum facilisis. Vivamus fermentum egestas lorem ac accumsan. Aenean vulputate massa pharetra sapien tincidunt placerat. Aenean molestie luctus velit. Ut cursus ante ante, quis luctus diam. Ut varius, lorem non vestibulum ornare, sem nisi gravida leo, a molestie mauris mauris non orci. Proin sit amet leo nunc.
            </p> 
            <p> 
            Nunc mollis, nunc eu vestibulum feugiat, lacus dui hendrerit metus, a placerat nulla tortor eget lacus. Etiam semper ligula turpis. Vivamus eget luctus nulla. Aliquam non nibh turpis. Aliquam aliquet lorem id massa cursus auctor egestas est tempor. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Phasellus at purus vitae tortor venenatis vulputate eget eu metus. Donec accumsan metus scelerisque orci iaculis sed hendrerit ante suscipit. Vivamus tortor dolor, varius mollis scelerisque sed, sollicitudin a tellus. Mauris sit amet tincidunt mauris. Sed sed massa arcu, non eleifend felis. Cras non lacus nisi. Nulla magna turpis, lobortis ac adipiscing sed, consequat sed augue.
            </p> 
            <p> 
            Donec vel purus tortor, ut viverra mauris. Vivamus urna sapien, eleifend at posuere a, malesuada nec risus. In vitae erat in mauris ornare iaculis. Phasellus consectetur vestibulum risus non facilisis. Ut eu nibh quam. Donec eu augue sit amet lacus feugiat ullamcorper eu bibendum arcu. Pellentesque elementum rutrum nisi, ut pellentesque est bibendum id. Fusce justo lacus, venenatis eu vehicula a, porttitor quis mi.
            </p> 
            <p> 
            Sed in felis urna, non vestibulum magna. Nullam vitae augue sed mauris fermentum facilisis. Sed dictum diam eget ante varius at rhoncus arcu rutrum. Suspendisse lorem neque, convallis a vehicula quis, faucibus faucibus elit. Sed eget mauris nec felis malesuada pharetra quis in eros. Fusce urna nisi, iaculis vitae blandit non, posuere et nulla. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Aenean vel leo sem. Vestibulum posuere, neque non mollis laoreet, quam quam pretium elit, in tincidunt lacus lectus ac lorem. Mauris vel odio dolor. Phasellus faucibus lobortis justo id malesuada.
            </p> 
            <p> 
            Nullam sed dolor id purus feugiat tincidunt. Aliquam eget consequat lacus. Cras augue erat, mattis sed consequat eget, mattis vel tellus. Aliquam erat volutpat. Ut in ornare lorem. Nam quis sodales tellus. Sed consequat imperdiet mattis. Morbi quis odio quis massa pellentesque laoreet. Curabitur lacinia lacus risus. Maecenas tincidunt ullamcorper ultrices.<span class="ultimo">„&lt;/span>
                       </p> 

        </blockquote>    
    </li> 
```

```
/* CSS Document */
@font-face {
    font-family: 'LoraBold';
    src: url('fonts/lora-bold-webfont.eot');
    src: url('fonts/lora-bold-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/lora-bold-webfont.woff') format('woff'),
         url('fonts/lora-bold-webfont.ttf') format('truetype'),
         url('fonts/lora-bold-webfont.svg#LoraBold') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'LoraItalic';
    src: url('fonts/lora-italic-webfont.eot');
    src: url('fonts/lora-italic-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/lora-italic-webfont.woff') format('woff'),
         url('fonts/lora-italic-webfont.ttf') format('truetype'),
         url('fonts/lora-italic-webfont.svg#LoraItalic') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'LoraRegular';
    src: url('fonts/lora-regular-webfont.eot');
    src: url('fonts/lora-regular-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/lora-regular-webfont.woff') format('woff'),
         url('fonts/lora-regular-webfont.ttf') format('truetype'),
         url('fonts/lora-regular-webfont.svg#LoraRegular') format('svg');
    font-weight: normal;
    font-style: normal;

}

#conteudo ul.parcerias li.descricao blockquote {
    font-style:italic;
    margin:2em 0 3em 2em;
    quotes:'”' '„';

}

#conteudo ul.parcerias li.descricao blockquote span {
    font-size:1000%;
    color:black;
    display:inline;
    }

#conteudo ul.parcerias li.descricao blockquote span.ultimo {
    float:none;
    font-size:1000%;
    color:black;
    display:inline;
} 
```

左引号显示在文本上方，并且左引号和右引号都在上面加上了一些边距，我意识到这是因为字体中的字符本身有这个空白，无论如何我可以补偿这个吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T16:11:28.040

如果您不必担心在 ie7 或更早版本中显示，我认为伪元素将是可行的方法。[http://jsfiddle.net/EnL3R/16/](http://jsfiddle.net/EnL3R/16/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T15:55:54.857

修改了`padding`、和属性`margin`，现在似乎可以正常显示了：`display``position`

```
blockquote span {
    font-size:100px;
    color:black;
    position: relative;
    display:inline-block;
    padding:0px;
}

blockquote span.primo {
    margin: -40px 0 -100px 0;
    bottom: -40px;
}

blockquote span.ultimo {
    margin:-130px 0 0 0;
    bottom:0px;
}

/* IE7 only styles */
blockquote span {
    *display: inline; zoom: 1; /* IE7 fix for inline-block */
}
blockquote span.primo {
    *margin: -20px; *bottom: -20px; /* IE7 position adjustment */
}
blockquote span.ultimo {
    *margin: -50px; /* IE7 position adjustment */
} 
```

[http://jsfiddle.net/EnL3R/26/](http://jsfiddle.net/EnL3R/26/)（标签周围的黄色边框`span`仅用于测试）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T16:16:21.937

在我看来，使用图像可能会更好。如果您尝试使用文本作为引号，则会遇到这样一个事实，即引号本身只是行高的一小部分。

您可以将图像放入您的内容中并用于`vertical-align`获得正确的定位。如果您不需要对 IE 7 或更低版本的支持，您甚至可以将它们放在 CSS、the`:before`和`:after`伪元素中。

```
blockquote :first-child:before {
    content: url('images/openquote.png');
    }

 blockquote :last-child:after {
    content: url('images/closequote.png');
    vertical-align: -35px; /* tuned to fit image */
} 
```

演示：http: [//jsfiddle.net/EnL3R/17/](http://jsfiddle.net/EnL3R/17/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-11-23T17:27:34.100

更新块引用的样式..检查下面的代码。

```
blockquote {
    font-size: 18px;
    padding:20px;
    text-transform: uppercase;
}
blockquote:before {
    top: 10px;
    left: 20px;
    content: "\201C";
}
blockquote:after {
   top:80px;
   content: "\201D";
}
blockquote:before, blockquote:after {
    position: absolute;
    width: 60px;
    height: 60px;
    font-size: 80px;
    line-height: 1;
    color: #dd7975;
} 
```

# php - Android ICS - iframe 内的链接不起作用

> ID：12161592
> 
> 赞同：1
> 
> 时间：2012-08-28T14:32:23.967
> 
> 标签：php, android, html, web, android-4.0-ice-cream-sandwich

我有一个网站，我在其中使用“iframe”加载一些外部链接。在所有浏览器中一切正常，但在 Android ICS 中，当我单击 iframe 页面内的链接时，它会重定向到其他页面。我搜索了一些解决方法，发现有一些 ICS 特定问题，但没有找到任何解决我的问题的方法。还有其他人面临同样的问题吗？这个问题有什么解决方法吗？请帮忙。

# java - 关于 Spring DM、OSGi 和 Web 应用程序的问题

> ID：12161605
> 
> 赞同：1
> 
> 时间：2012-08-28T14:33:17.367
> 
> 标签：java, plugins, osgi, enterprise

我开始关注 osgi 的主要目的是完成我面前的任务。基本上，我将能够分发基于 Web 的应用程序并分别构建整个 Web 应用程序的特定功能，这样我就可以在 A 处部署具有功能 a、b、c 的 Web 应用程序，并在 B 处部署具有功能 a、c 的 Web 应用程序,d。

有点像如何在 joomla 中安装插件。因此，例如，当我想添加 Web 应用程序的不同方面时，我会用所有 html 和`its admin`部分构建一个小战争，并在主管理面板中提供此功能管理部分。

第二个问题是关于 Spring DM。最有可能我会使用 Spring，我看到 Spring DM 提供的东西似乎合乎逻辑。下载 Spring DM .1.2.1 后，我发现它的 lib 文件夹包含版本 2.5.6.SEC01 的 spring jar，但我计划使用3.1.2 所以我有点困惑，因为一切都将如何发挥得很好。

谢谢阅读

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T07:19:15.790

我一直在做这样的练习，所以我可以在没有 Spring 开销的情况下阐明你是如何做到的。我做了一个明确的划分：所有应用程序代码都在浏览器中，所有数据处理都在服务器中。借助 HTML5，浏览器已发展成为令人印象深刻、可移植且功能强大的应用程序环境。一个具有多处理、消息传递、模块化和惊人的视觉效果。我在浏览器中使用 angularjs 作为框架。

Angular 使用中央路由表，将页面 url 的哈希部分映射到 Javascript 中的“模块”。这使得定义哪些模块是应用程序的一部分变得非常容易。服务器可以轻松控制这部分。

在服务器端，我有包含 Javascript 代码、html 片段和数据处理的包。我基于 OSGi Http Server 模型，因为它更灵活。但是，我在包中添加了对静态资源的适当支持：缓存、流式传输、范围等。

在服务器中，我使用 DS 和 bndtools 来开发捆绑包。这是一次令人印象深刻的开发体验，因为它像 Smalltalk 一样工作。你改变了，它会立即反映在服务器上。添加捆绑包，删除捆绑包，服务器继续运行。服务器重启在开发过程中很少见。

缺点是不幸的是很少有组件可以利用 OSGi。大多数组件（以 Spring 为典型示例）严重依赖类加载技巧来从中心点连接应用程序。这基本上不是模块化的。出于这个原因，我不得不开发许多利用 OSGi 服务模型的高度内聚和解耦的组件。一旦我有时间，我会将它们捐赠给一个开源项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:35:59.480

我不确定您是否需要考虑 OSGi，至少不是直接考虑，以满足您的状态要求。你说：

> 基本上，我将能够分发基于 Web 的应用程序并分别构建整个 Web 应用程序的特定功能，这样我就可以在 A 处部署具有功能 a、b、c 的 Web 应用程序，并在 B 处部署具有功能 a、c 的 Web 应用程序,d。

如果这些是您的要求，那么您实际上不需要直接关注 OSGi，而是找到一个支持模块化扩展的 Web 应用程序框架。这很可能意味着框架本身使用了 OSGi。我不熟悉 Spring，但我知道 Struts 2（一个类似的 Web 应用程序框架）有一个[基于 OSGi 的插件](http://struts.apache.org/2.3.4.1/docs/osgi-plugin.html)，旨在实现您的用例。

另一方面，如果您的想法是使用 OSGi，那么我建议您选择较低级别的任务，例如编写 Web 应用程序框架，而不是 Web 应用程序本身。

# android - 带有 html Table 的 TextView 与带有几个 TextView 的 TableLayout

> ID：12161611
> 
> 赞同：1
> 
> 时间：2012-08-28T14:33:35.013
> 
> 标签：android, html, android-layout, android-tablelayout

我目前正在开发一个 android 应用程序，我最近遇到了一些事情，其中​​提到一个活动的目标应该是少于 80 个视图。

我有几个表格布局，每个布局都有一些文本视图。拥有一个文本视图并使用 html 表格来尝试实现与表格布局相同的外观会更有效/可能吗？

它会减少视图的数量，但是否值得花时间重新设计布局？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T15:11:09.877

要从 HTML 片段中获取`Spannable`-object（可以显示在 a 中`TextView`），您可以使用 Android 框架中的[`HTML`-class](http://developer.android.com/reference/android/text/Html.html)，如下所示：[如何在 TextView 中显示 HTML？](https://stackoverflow.com/questions/2116162/how-to-display-html-in-textview)

但是，此类的文档还指出：

> 此类将 HTML 字符串处理为可显示的样式文本。**并非所有 HTML 标记都受支持。**

可以在这个答案和这个博客帖子中找到一个很好的支持标签**列表**[（](https://stackoverflow.com/a/3150456/717341)剧[透](http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html)：*不*支持）。`<table>`

 *** * *

从理论上讲，一个 Activity 有超过 80 个视图是很多的。在实践中，事实证明这可以由许多手机轻松处理。

我创建了一个应用程序，它收集地理数据并在一个表中显示所有拍摄的位置（其中包含 900 多个项目）。即使是满桌，它也能流畅滚动（在我的摩托罗拉 Xoom 和我的 HTC Desire HD 上）。

* * *

如果您在某些设备上遇到长列表/表格的任何问题，总是可以选择*延迟加载*。

在顶部显示最重要/最精确的数据应该是一个总体目标（因此用户根本不需要滚动）。

因此，您将显示 30 个最佳匹配项，当用户向下滚动到第 20 个（左右）时，您将异步加载接下来的 30 个条目。这样，您将获得一个永无止境的列表（假设数据是无穷无尽的）。**

# php - IE 不发送 post 数据 PHP & jQuery

> ID：12161612
> 
> 赞同：1
> 
> 时间：2012-08-28T14:33:38.083
> 
> 标签：php, javascript, internet-explorer, jquery

在 IE 中，只有在发送 post 请求时，服务器才不会收到 POST 信息。

这在所有其他经过测试的浏览器中都能正常工作。

编码 ：

```
$.ajax({
    url: '/dashboard/draft/get/data?date=' + new Date(),
    type: 'post',
    data:  {
        'draftid': $.allpro.draftid, 
        'iefix': true
    },
    cache: false,
    success: function(response) {
        $.allpro.draft.salary_cap = parseInt(response.data.salary_cap)
        $.allpro.draft.salary_remaining = parseInt(response.data.salary_remaining)
        $.allpro.draft.average_spent = response.data.average_spent
        $('#salary_cap').text(response.data.salary_cap)
        $('#salary_remaining').text(response.data.salary_remaining)
        $('#average_spent').text(response.data.average_spent)
        $.each(response.data.drafted, function(_i, _v){
            if (_v.playerid == "0") {
                var id = _v.teamid
                var is_team = 1
            } else {
                var id = _v.playerid
                var is_team = 0
            }
            $.allpro.draft.playerOptions.queue_add(
                id,
                is_team,
                _v.position
            )
        })
        set_requirements(response.data.requirements)
    }
}) 
```

`var_dump`两者都做`$_REQUEST`，但`$_POST`什么也没收到。

我对此进行了研究，发现许多描述类似问题的主题，但没有一个提供解决方案……正如您所见，我已经尝试添加一个额外的帖子字段、缓存破坏和禁用缓存，但没有解决问题.

谢谢！

* * *

将其更改为 GET 可以解决手头的问题……但是如果有人可以找到解决方法，问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:37:57.227

试着把你的日期放在你的数据数组中

```
$.ajax({
    url: '/dashboard/draft/get/data',

    ...

    data:  {
        'draftid': $.allpro.draftid, 
        'iefix': true,
        'date': new Date()
    },

    ...

}) 
```

然后使用 firebug 之类的东西，您可以查看帖子标题以查看是否有帖子数据。

# excel - 从另一个工作表中的某些可变数量的行中获取数据

> ID：12161613
> 
> 赞同：0
> 
> 时间：2012-08-28T14:33:41.907
> 
> 标签：excel, excel-2007

我已经搜索并搜索了一个解决方案 - 但我真的不知道从哪里开始。可能不是最有效的搜索。

我有一个电子表格，按时间顺序排列任务，旁边有负责人的姓名首字母（领导者和备份）。我要制作一个新的工作表，以不同的方式显示这些数据并且是基于人的。

有没有办法让 Excel 找出哪些行给出了首字母缩写（首字母在源中自己的单元格中） - 在领导单元格或备用单元格中 - 然后为这些行插入如下公式？这个例子从不同的单元格中抓取一堆文本并将它们放在一起（AB+CD，这个地方 - 这样做）在我正在使用的不同布局中。我需要 Excel 做的是填写行（下面的 30）：

='AUDSCHED-COPY'!I30&"+"&'AUDSCHED-COPY'!J30&", "&'AUDSCHED-COPY'!D30&" - "& 'AUDSCHED-COPY'!E30

我想为每个人设置一个小部分，一个在另一个之上。Excel 是否能够根据一个人的姓名首字母在另一张纸上出现的次数来调整整张纸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:38:23.507

这涉及到很多关于您想要实现的目标的猜测，但至少应该是一个开始。

将您的公式应用于现有工作表中的所有行。

1.  复制现有数据正下方的所有行，标签行除外。
2.  将复制的部分移动`ColumnJ`到空白列，例如`Y`，（相同的行）。
3.  将复制的部分移动`ColumnI`到空白列，例如`Z`，（相同的行）。
4.  将 的相关行`ColumnsY and Z`移至`ColumnsI and J`。
5.  `ColumnsI to K`在现有工作表的新工作表中创建数据透视表，其中包含来自`ColumnI`行`ColumnJ`标签的标签。
6.  按字母顺序对数据透视行进行排序。

要添加新任务，请覆盖第一个复制的行，然后将所有行 [从标签行下方到被覆盖的行] 复制到覆盖行下方的行并刷新数据透视表。

不优雅，但如果这种“手动”方法达到了您想要的结果，那么您就有了代码解决方案的基础。

# asp.net - 在托管服务器上写入文件时出现安全异常

> ID：12161618
> 
> 赞同：0
> 
> 时间：2012-08-28T14:33:55.190
> 
> 标签：asp.net, security, file, permissions

我的 ASP.NET Web 应用程序写入本地文件。在我的开发服务器上它工作正常，但是当托管时，我在写入的代码行中得到一个安全异常。

![在此处输入图像描述](../Images/6dbccc9f1b6935c9d968cc402b35cc2e.png)

我四处搜索并找到有关 web.config 信任级别的解释。更改信任级别是否会对安全性产生负面影响？这是解决此问题的唯一方法吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:39:23.557

想想看，在托管环境中，如果允许在根站点目录之外写入，那么任何人都可以在另一个站点的目录中写入数据。[`Medium Trust`](http://www.4guysfromrolla.com/articles/100307-1.aspx)嗯，这是一个主要的安全问题，微软为了这个特定的原因迫使每个托管服务提供商将信任级别更改为。当然，您的开发机器可以更改为信任您喜欢的一切，但这在真实的托管场景中永远不会发生

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:45:11.873

您应该联系您的托管公司，这绝对是一个信任问题，而不是您可以解决的问题。但是，您可以找到另一家支持 Medium Trust + 级别的托管公司。

# google-maps - 谷歌地图最近点避开河流/按行程

> ID：12161620
> 
> 赞同：1
> 
> 时间：2012-08-28T14:34:00.300
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

这是交易：我需要从一个半径点找到最近的点。例如，我需要获取 15 公里半径内的所有点。使用 Google Maps Radius 和网络上的所有示例，这很容易；）

问题是从我的办公室，一个点在15公里半径下，但在河的另一边，所以汽车行程大约30公里（使用桥梁）！

是否有一个简单的解决方案来排除这些点或按路线计算？我想我需要用返回点计算所有行程？方向请求 API？

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:02:54.797

*   使用您的 15 公里半径来细化点集。
*   使用[距离矩阵服务](https://developers.google.com/maps/documentation/javascript/distancematrix)来获取距离（或至少验证它是否合理）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T15:36:40.940

此混搭计算给定半径内的行驶路线：

[http://maps.forum.nu/gm_driving_radius.html](http://maps.forum.nu/gm_driving_radius.html)

它是使用 API V2 编写的，但您可以看到它是如何完成的。

请注意，当您说：

> 我需要获得 15 公里半径内的所有点

...您将需要一台相当大的计算机，因为点数是无限的。:-)

# python - 从 python 脚本中多次调用 python 脚本的最佳方法

> ID：12161624
> 
> 赞同：0
> 
> 时间：2012-08-28T14:34:10.020
> 
> 标签：python, import, subprocess, popen

我需要使用不同的参数从另一个 python 脚本中多次执行 python 脚本。我知道这听起来很可怕，但这是有原因的。然而，问题是被调用者脚本**不**检查它是否被导入或执行（如果 __name__ == '__main__': ...）。

1.  我知道我可以使用 subprocess.popen("python.exe callee.py -arg") 但这似乎比它应该慢得多，我猜那是因为 Python.exe 正在启动和终止多次。
2.  我无法定期将脚本作为模块导入，因为它的设计如开头所述 - 导入时它将在没有 args 的情况下执行，因为它缺少 main() 方法。
3.  我也无法更改被调用者脚本
4.  据我了解，我也不能使用 execfile() 因为它不接受参数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:55:46.910

为您找到解决方案。您可以在 python 中重新加载模块，并且可以修补 sys.argv。

想象 echo.py 是您想要多次调用的被调用脚本：

```
#!/usr/bin/env python
# file: echo.py

import sys
print sys.argv 
```

你可以做你的调用者脚本：

```
#!/usr/bin/env python
# file: test.py 
import sys
sys.argv[1] = 'test1'
import echo
sys.argv[1] = 'test2'
reload(echo) 
```

并调用它，例如：python test.py place_holder

它将打印输出：

```
['test.py', 'test1']
['test.py', 'test2'] 
```

# ruby - 理解Ruby的repeat_permutation方法的源代码

> ID：12161627
> 
> 赞同：2
> 
> 时间：2012-08-28T14:34:15.670
> 
> 标签：ruby, arrays, jruby, permutation

我一直在用 Ruby 构建一个智能的 Mastermind 游戏。在我的游戏中，如果您选择让计算机扮演代码破解者的角色，计算机就会有根据地猜测代码制作者的代码是什么。

作为我算法的一部分，计算机首先查看所有可能的代码的整个列表。

例如，如果有 6 种颜色可供选择（红橙蓝绿紫黄）并且代码由 4 种颜色组成（允许重复），那么要查看所有可能的代码，您可以这样做：

```
valid_colors = %w(red orange blue green purple yellow)
all_possible_codes = valid_colors.repeated_permutation(4).to_a 
```

并且`all_possible_codes`将是一个数组，其中填充了代表每个可能代码的数组。然后，当计算机从每个猜测中获得反馈时，它会从该列表中删除代码。

然而，接下来我要做的事情需要我使用 JRuby 1.6.6，它使用没有`repeated_permutation`方法的 Ruby 1.8.7。我需要编写具有相同功能的自己的方法。

所以我去了这里找到的源代码：[http ://www.ruby-doc.org/core-1.9.3/Array.html#method-i-repeated_permutation](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-repeated_permutation)

不幸的是，我不明白他们在做什么，也不明白如何通过编写自己的方法来解决这个问题。我对编程很陌生，无法弄清楚这一点。任何有助于理解源代码的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:54:23.100

您链接的代码调用 rpermute0 完成大部分工作，Array.c 中 rpermute0 的源代码是

```
static void
rpermute0(long n, long r, long *p, long index, VALUE values)
{
    long i, j;
    for (i = 0; i < n; i++) {
    p[index] = i;
    if (index < r-1) {              /* if not done yet */
        rpermute0(n, r, p, index+1, values); /* recurse */
    }
    else {
        /* We have a complete permutation of array indexes */
        /* Build a ruby array of the corresponding values */
        /* And yield it to the associated block */
        VALUE result = rb_ary_new2(r);
        VALUE *result_array = RARRAY_PTR(result);
        const VALUE *values_array = RARRAY_PTR(values);

        for (j = 0; j < r; j++) result_array[j] = values_array[p[j]];
        ARY_SET_LEN(result, r);
        rb_yield(result);
        if (RBASIC(values)->klass) {
        rb_raise(rb_eRuntimeError, "repeated permute reentered");
        }
    }
    }
} 
```

基本上是蛮力，从 0 开始，每次迭代返回一个排列。红宝石版本类似于

```
require 'pp'

def rpermute(numRepeat, pArray, index, originArray)
  0.upto(originArray.length-1) do |i|
    pArray[index] = i
    if index < numRepeat-1
      rpermute(numRepeat, pArray, index+1, originArray)
    else
      result = Array.new
      0.upto(numRepeat-1) do |j|
        result[j] = originArray[pArray[j]]
      end
     pp result
    end
  end
end

originArray1 = [1,2,3,4,5]
originArray2 = ['a','b','c','d','e']
pArray = []

rpermute(4, pArray, 0, originArray1)
rpermute(4, pArray, 0, originArray2) 
```

我测试了上面的代码，它打印出所有长度为 4 的排列，你可能想把它们放入数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:02:12.697

谢谢英格姆！

只是为了扩展您的答案，我重命名了一些变量以使其更具 Ruby 风格、更清晰、更具描述性和明确性。我还改变了一些东西，所以方法的返回值就是答案，一个包含每个可能排列的数组。

```
def repeated_permutations(original_array, length_of_each_permutation, list_of_permutations, index_positions, index)
    0.upto(original_array.length - 1) do |index1|
        index_positions[index] = index1
        if index < length_of_each_permutation - 1
            repeated_permutations(original_array, length_of_each_permutation, list_of_permutations, index_positions, index + 1)
        else
            permutation = Array.new
            0.upto(length_of_each_permutation - 1) do |index2|
                permutation[index2] = original_array[index_positions[index2]]
            end 
            list_of_permutations.push(permutation)
        end
    end
    list_of_permutations
end 
```

我不喜欢命名它`index_positions`，但想不出更好的名字。上述方法将返回一个数组，其中填充了所有可能排列的数组，并允许重复。

实施：

`valid_colors = %w(red orange blue green purple yellow)` `repeated_permutations(valid_colors, 4, [], [], 0)`

# assembly - 组装：添加两个数字

> ID：12161630
> 
> 赞同：1
> 
> 时间：2012-08-28T14:34:22.967
> 
> 标签：assembly, x86, add, nasm, mov

我想添加两个数字 num1B 和 num2B 并将数字存储在结果中，最后显示结果。

但是，当我启动 nasm 时，它说：

prog2_1.txt:4：警告：尝试在 nobits 部分初始化内存：忽略

prog2_1.txt:5：警告：尝试在 nobits 部分初始化内存：忽略

prog2_1.txt:6：警告：尝试在 nobits 部分初始化内存：忽略

我的代码：

```
org 0x0100 ;

section .bss
    num1B: db 0Ah ; init num1B to 0Ah
    num2B: db 00111111b ; init num2B to 00111111b
    result: db 0 ; init result to 0

section .data

section .text

    mov AX,0 ; AX = 0
    add AX,[num1B] ; AX = AX + num1B
    add AX,[num2B] ; AX = AX + num2B
    mov [result],AX ; result = result + AX

    mov DX,[result] ; show result
    mov AH,09h
    int 21h

    mov AH,4Ch
    int 21h 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:38:55.063

您需要将您的`.bss`部分更改为`.data`部分。该`.bss`部分用于未初始化的数据，而该`.data`部分用于已初始化的数据。这就是为什么你不能在节中使用`db`,`dw`等等。`.bss`相反，您可以将它们放在`.data`部分中。同样，您可以使用`resb`. `resw`以此类推，`.bss`但不在`.data`部分中。

简而言之，`.data`是针对已初始化的数据，`.bss`是针对未初始化的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T23:21:20.657

你是对的，这是一条漫长的道路。如果您想要“简单”，请坚持使用 BASIC！你正在取得进展。您在“.data”中有两个数字，而不是“.bss”，但我认为它们仍然是“db”。当您使用 ax 进行加法时，它使用 16 位 - 一个“字”或两个字节。这会将一个数字放在 al 中，将第二个数字放在 ah 中 - 这不是您想要的！要么使用 al 进行加法，要么将你的两个数字（和结果！）“dw”而不是“db”。“显示结果”是最难的部分，除了让你显示大于 255 的数字之外，做文字可能比字节容易。有人刚刚发布了一个“显示结果”例程......作为 Masm 的宏，但是你应该能够修改代码以在 Nasm 中工作。你可能不想要一个宏 - 它' 每次使用时都会复制相同的代码。一个子程序会更好，但如果你不知道怎么做，那就把它“排成一行”——你只做一次（现在）。如果您仍然遇到问题，请发布一些更新的代码...

最好的，弗兰克 [http://www.nasm.us](http://www.nasm.us)

# php - 通过 php DOMDocument 从 xml 中获取相同的标签值

> ID：12161632
> 
> 赞同：0
> 
> 时间：2012-08-28T14:34:25.773
> 
> 标签：php, xml, domdocument

我有一个 XML 文件，文件的一部分是

```
<Images>
     <image_>image1.jpg</image_>
     <image_>image2.jpg</image_>
</Images> 
```

我需要图像名称。我使用像这样的代码

```
$Images = $domtree->getElementsByTagName('Images');
foreach($Images as $Image){

    $Image = $Image->nodeValue."<br>";

    echo $Image;

    } 
```

这是返回图像名称，但一次作为字符串，我需要作为数组。我的意思是我想在数据库中插入图像。谁来帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:59:38.700

问题是您正在遍历`Images`元素。因此，当您 echo 时`nodeValue`，您将获得整个`Images`元素（及其所有子元素）的值。

您需要遍历元素（父）`image_`内的每个元素（子）`Images`

```
$val = array();
$Images = $DOM->getElementsByTagName('Images');
foreach($Images as $Image){
    $imgs = $Image->getElementsByTagName('image_');
    foreach($imgs as $i){
        $img = $i->nodeValue;
        $val[] = $img;
        echo $img."<br>";
    }
}
var_dump($val); 
```

# java - 网格的 VBO 不正确：一些三角形已连接且不应 [2D]

> ID：12161633
> 
> 赞同：3
> 
> 时间：2012-08-28T14:34:26.283
> 
> 标签：java, android, opengl-es, opengl-es-2.0, vbo

我正在用这段代码生成我的 VBO

```
 int SCREEN_WIDTH = 800;
    int SCREEN_HEIGHT = 480;
    int PIXEL_PER_VERTEX = 4;
    int CAVERN_TEXTURE_WIDTH = 1024;
    int CAVERN_TEXTURE_HEIGHT = 512;

    final int vertexCount = ((SCREEN_WIDTH / PIXEL_PER_VERTEX) +1 ) * 2;
    final float[] bufferDataLowerCave = new float[vertexCount * CavernBoundMesh.VERTEX_SIZE];

    for(int i=0; i < vertexCount; i += 2) {
        bufferDataLowerCave[i * CavernBoundMesh.VERTEX_SIZE + CavernBoundMesh.VERTEX_INDEX_X] = PIXEL_PER_VERTEX * i / 2.f;
        bufferDataLowerCave[i * CavernBoundMesh.VERTEX_SIZE + CavernBoundMesh.VERTEX_INDEX_Y] = 200;
        bufferDataLowerCave[i * CavernBoundMesh.VERTEX_SIZE + CavernBoundMesh.TEXTURECOORDINATES_INDEX_U] = ( (float) PIXEL_PER_VERTEX * i / 2.f) / SCREEN_WIDTH;
        bufferDataLowerCave[i * CavernBoundMesh.VERTEX_SIZE + CavernBoundMesh.TEXTURECOORDINATES_INDEX_V] = 0.f;

        bufferDataLowerCave[(i + 1 ) * CavernBoundMesh.VERTEX_SIZE + CavernBoundMesh.VERTEX_INDEX_X] = PIXEL_PER_VERTEX * i / 2;
        bufferDataLowerCave[(i + 1 ) * CavernBoundMesh.VERTEX_SIZE + CavernBoundMesh.VERTEX_INDEX_Y] = 0;
        bufferDataLowerCave[(i + 1 ) * CavernBoundMesh.VERTEX_SIZE + CavernBoundMesh.TEXTURECOORDINATES_INDEX_U] = ( (float) PIXEL_PER_VERTEX * i / 2.f) / SCREEN_WIDTH;
        bufferDataLowerCave[(i + 1 ) * CavernBoundMesh.VERTEX_SIZE + CavernBoundMesh.TEXTURECOORDINATES_INDEX_V] = 0.5f;
    } 
```

我正在用 TRIANGLE_STRIP 绘制网格（以原点为中心）。

抱歉，因为我使用的是引擎（AndEngine），所以没有 openGL 代码。但如果你真的需要，我可以尝试追踪它.. ![显示的网格不正确](../Images/9a0a638020283e5051a7ac2cfb43f129.png)

正如您在图像中看到的，最后 2 个顶点与原点中的一个顶点相连。我调试了 VBO 的创建，这是第一个和最后一个顶点

```
//X       Y       U        V
[0.0,    200.0,  0.0,     0.0,
 0.0,    0.0,    0.0,     0.5,
 4.0,    200.0,  0.0050,  0.0,
 4.0,    0.0,    0.0050,  0.5,
 8.0,    200.0,  0.01,    0.0,
 8.0,    0.0,    0.01,    0.5,
 12.0,   200.0,  0.015,   0.0,
 12.0,   0.0,    0.015,   0.5,
 16.0,   200.0,  0.02,    0.0,
 16.0,   0.0,    0.02,    0.5
 [..]
 780.0,  200.0,  0.975,   0.0,
 780.0,  0.0,    0.975,   0.5,
 784.0,  200.0,  0.98,    0.0,
 784.0,  0.0,    0.98,    0.5,
 788.0,  200.0,  0.985,   0.0,
 788.0,  0.0,    0.985,   0.5,
 792.0,  200.0,  0.99,    0.0,
 792.0,  0.0,    0.99,    0.5,
 796.0,  200.0,  0.995,   0.0,
 796.0,  0.0,    0.995,   0.5] 
```

这是我使用的顶点着色器

```
uniform mat4 u_modelViewProjectionMatrix;
uniform float u_elapsedSeconds;

attribute vec4 a_position;
attribute vec2 a_textureCoordinates;

varying vec2 v_textureCoordinates;

void main(void)
{
    v_textureCoordinates = a_textureCoordinates;
    vec4 temp_position = u_modelViewProjectionMatrix * a_position;

    float variation = 0.3*sin((u_elapsedSeconds + 1.5 * temp_position.x))*(1.0 + temp_position.y);
    temp_position.y += variation;

    gl_Position = temp_position;
} 
```

我对这个东西很陌生，所以我不太了解规格和​​它是如何工作的，但我真的不明白是怎么回事产生这种奇怪的效果。你能帮我吗？

编辑1：

我做了一些更多的测试。即使使用标准的顶点和片段着色器，它只是设置位置和从纹理中获取它的颜色，它会给出奇怪的结果。

EDIT2：更多图像，这次只是使用 2 个标准的垂直和碎片着色器用于位置和纹理颜色（这些图像是从平板电脑拍摄的，而第一张是从手机拍摄的）

![错误的图像 1](../Images/0f8783e352c56f0f7a2e5086846dea41.png) ![2° 错误图像](../Images/3c3fc93b4d1210f8c40b18cb0ecf51ae.png) ![3° 错误图像](../Images/a32bcf4b834f3e8210edaab60fdd05e4.png) ![我最喜欢的错误图片](../Images/cafb53ea04c415733c6819da2d5e15ba.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T17:17:26.803

我很确定您为绘图代码指定了错误数量的图元，因为顶点本身对我来说看起来不错。当您对 openGL 或任何其他 3D 图元绘图进行绘图调用时，您不需要指定要绘制的顶点数，而是*图元*数。在您的情况下，原语是三角形。

因为它是一个三角形带，所以你正在绘制它`numberOfVertices - 2`在你的调用中总是原始的。如果它是一个三角形列表，它本来就是`numberOfVertices/3`​​，而对于一个三角形风扇，它又是一个`numberOfVertices - 2`。

由于您可能指定要绘制的三角形多于要绘制的数据，因此它可能使用了一些默认值`(0,0,0,0)`，这解释了它试图在左下角绘制两个退化三角形，这也引用了纹理坐标`0,0`。这也是有道理的，因为在您的列表中甚至没有具有位置`0,0`和 T/U`0,0`的顶点，因此最后一个顶点必须是某个默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T19:51:50.303

好的，我解决了。

在尝试了 libgdx 之后（我不是很喜欢它，它接缝了很多实用功能，而且我还没有真正掌握它背后的概念，例如它如何处理纹理，如何管理实体等）并实现一个非常小的带有 jni 的本地语言渲染器，还设置了 cocos-2d-x（但没有尝试过，因为我第一次使用 jni 代码并编写了上面提到的渲染器）我回到了 AndEngine。

我成功地用 VBO 和 IBO 实现了一个网格，但最后我通过在 VBO 的开始和结束处复制（添加 2 个相同的顶点）解决了我的问题，这样额外的三角形就会退化并且不会被绘制。所以，这是最有效的解决方法，但只要它有效..

# c# - 在网页上显示 Facebook 主页的活动源

> ID：12161635
> 
> 赞同：0
> 
> 时间：2012-08-28T14:34:32.360
> 
> 标签：c#, asp.net, facebook, feed

我在网页上显示 Facebook 提要时遇到问题。目的是在外部页面上显示 Facebook 页面（[http://www.facebook.com/kvaernerasa](http://www.facebook.com/kvaernerasa)）的提要，但我遗漏了一些东西。

首先，我使用 Facebook 自己的“生成器”来创建活动提要框：

[http://developers.facebook.com/docs/reference/plugins/activity/](http://developers.facebook.com/docs/reference/plugins/activity/)

它要求一个域（http://www.kvaerner.com）......然后呢？！我想要一个页面的提要，所以没有*app id*。它如何知道我要什么提要？我还需要在不需要用户登录的情况下显示提要。

我已经设法显示 RSS 提要（没有样式），但更喜欢使用 Facebook 自己的插件。我在这里想念什么？

正如 TommyBs 所提到的，Like Box 是唯一的其他选择吗？其他网站是如何实现这一点的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:43:45.493

“活动提要插件通过喜欢和评论向用户展示他们的朋友在您的网站上所做的事情”这是来自 FB 的描述。对我来说，这意味着它不显示原生 Facebook 页面提要，只显示与您网站上的页面相关的信息，所以我认为这不是您所追求的

我想你想要的是like-box

[https://developers.facebook.com/docs/reference/plugins/like-box/](https://developers.facebook.com/docs/reference/plugins/like-box/)

# iphone - 如何在目标c中将BOOL值从一个视图传递到另一个视图

> ID：12161636
> 
> 赞同：0
> 
> 时间：2012-08-28T14:34:31.343
> 
> 标签：iphone, objective-c, uiviewcontroller, boolean

我目前正在开发一个应用程序，如果用户单击一个按钮，它会将 buttonPressed 设置为“YES”并转到一个新视图。在这个新视图中，您可以选择颜色，一旦选择了颜色，它将返回上一个视图，并在单击的按钮的背景上使用其选择的颜色。

我在运行代码时无法访问布尔值并收到 SIGBART 错误。我在这里做错了什么？在我的 ChangeClothesViewController

```
@property (assign, readwrite) BOOL pantsPressedBool;
@synthesize pantsPressedBool = _pantsPressedBool;

- (IBAction)pantsPressed:(UIButton *)sender {
ChooseColorsViewController *color = [[ChooseColorsViewController alloc] initWithNibName:@"ChooseColorsViewController" bundle:nil];
[self.navigationController pushViewController:color animated:YES];
//AppDelegate *passColors = (AppDelegate *)[[UIApplication sharedApplication]delegate];
//this code above does nothing and is not even needed. I was testing something out and forgot to take it out

_pantsPressedBool = YES;
} 
```

在我的 RectangleView 里面（这是我在按钮后面制作一个矩形来为按钮制作背景的地方）

```
- (void)drawRect:(CGRect)rect
{
//custom delegate
AppDelegate *passColors = (AppDelegate *)[[UIApplication sharedApplication]delegate];
changeClothes *whichButton = (changeClothes *)[[UIApplication sharedApplication]delegate];

for (int i=0; i < [passColors.getColors count]; i++) {
    if ([[passColors.getColors objectAtIndex:i] isEqualToString: @"Black"]) {
        NSLog(@"what button: %c", whichButton.pantsPressedBool); //HERE
        if (whichButton.pantsPressedBool == YES ) { //AND HERE is where I get the SIGABRT error
            // Drawing code
            CGContextRef context = UIGraphicsGetCurrentContext();
            [[UIColor blackColor] set];
            //CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 0.5); //CGContextRef, Red, Green, Blue, Alpha
            rect = CGRectMake(20, 20, 40, 80); //x, y, width, height
            CGContextFillRect(context, rect); //CGContextRef, CGRect
        }

    }
}
} 
```

与往常一样，任何帮助将不胜感激。

提前致谢。

[编辑]

所以我正在尝试不同的东西。

```
- (IBAction)pantsPressed:(UIButton *)sender {
ChooseColorsViewController *color = [[ChooseColorsViewController alloc] initWithNibName:@"ChooseColorsViewController" bundle:nil];
[self.navigationController pushViewController:color animated:YES];
AppDelegate *chosenButton = (AppDelegate *)[[UIApplication sharedApplication]delegate];
chosenButton.pantsButton = YES; 
} 
```

所以在我的 AppDelegate 里面，我有

```
@property (assign, readwrite) BOOL pantsButton;
@synthesize pantsButton = _pantsButton; 
```

如果单击该按钮，我正在尝试将 AppDelegate 内的 BOOL 变量（pantsButton）设置为“YES”并制作 if 语句

```
if ([chosenButton.pantsButton == YES]) {
    do something
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:13:27.950

`(changeClothes *)`当您分配给时，您正在将应用程序委托转换为，`whichButton`但事实并非如此（也就是说，我假设您的应用程序委托不是 的子类`changeClothes`）。

这条线...

```
changeClothes *whichButton = (changeClothes *)[[UIApplication sharedApplication]delegate]; 
```

...是说，获取应用程序委托并假装它是一个`changeClothes`对象。问题是你在对编译器撒谎。:-) 后来，当应用程序尝试使用你告诉它的东西时，它是一个`changeClothes`对象......

```
if (whichButton.pantsPressedBool == YES ) { 
```

...它发现你给它的东西并没有按照`changeClothes`对象应该的方式运行（即不知道任何关于 的内容`pantsPressedBool`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T15:14:12.390

您正在使用 AppDelegate`passColors`和`whichButton`. 在您`drawRect`中，您指`pantsPressedBool`的是 AppDelegate 的属性。但是，您的财产是在声明中声明的`ChangeClothesViewController`。

您需要在您的`drawRect`和您的`pantsPressed`以及您的函数中引用正确的对象。在这种情况下，它应该是您的`ChangeClothesViewController`实例。

# linux - 当用户使用 ssh 身份作为共享用户登录时，我可以在 linux 系统上审核用户活动吗？

> ID：12161639
> 
> 赞同：0
> 
> 时间：2012-08-28T14:34:38.973
> 
> 标签：linux, ssh

假设我在 linux 系统上有一个用户“appuser”，在他们的 authorized_keys 文件中设置了许多公钥，几个不同的人可以作为“appuser”登录。

当我使用与我的公钥链接的私钥登录时，我作为“appuser”所做的事情是否可以追溯到我？（我希望它是）。如果活动无法追溯到以应用用户身份登录的用户的身份，有没有办法让它可以追溯到该身份？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:01:36.200

authorized_keys 文件允许一些选项，包括“命令”，它将调用您可以编写的程序或脚本。我还没有尝试过，但是您可以在脚本中执行您需要的任何操作，然后执行 bash（或您选择的 shell）。

您可以将登录名与密钥匹配的另一种方法是将 sshd_config 中的 LogLevel 转换为 VERBOSE 并 grep /var/log/secure （或任何 AUTHPRIV 消息将要发送）以获取“找到匹配的 .* 密钥”。您可以通过“ssh-keygen -l -f”运行在“找到匹配”行中找到的密钥，这会将匹配条目转储到授权密钥中。

# ruby - 在 Ruby 中设置请求标头

> ID：12161640
> 
> 赞同：34
> 
> 时间：2012-08-28T14:34:40.183
> 
> 标签：ruby, rest

我有其余的客户端 gem，我正在定义一个这样的请求：

```
url = 'http://someurl'
request =  {"data" => data}.to_json
response = RestClient.post(url,request,:content_type => :json, :accept => :json) 
```

但是我需要将 HTTP 标头设置为某些东西。例如 API 密钥。这可以在 curl 中完成：

```
curl -XHEAD -H x-auth-user: myusername -H x-auth-key: mykey "url" 
```

在红宝石中做到这一点的最佳方法是什么？使用这个宝石？或者我可以手动进行以获得更多控制权。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-28T14:40:23.310

[第三个参数是标头哈希](https://github.com/rest-client/rest-client/blob/master/lib/restclient.rb#L71)。

你可以做你想做的事：

```
response = RestClient.post( 
  url, 
  request,
  :content_type => :json, :accept => :json, :'x-auth-key' => "mykey") 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-11-29T06:46:03.043

你也可以这样做

```
RestClient::Request.execute(
   :method => :get or :post,
   :url => your_url,
   :headers => {key => value}
) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-28T11:00:00.387

我对 Rest-Client (1.7.2) 有同样的问题，我需要同时放置参数和 HTTP 标头。

我用这个语法解决了：

```
params = {id: id, device: device, status: status}
headers = {myheader: "giorgio"}

RestClient.put url, params, headers 
```

我讨厌 RestClient :-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-26T07:57:34.470

如果`PUT`不允许，我们可以在`POST`. 粗体标题。这对我有用：

`act_resp = RestClient.post url, req_param, **:content_type => :json, :method => :put*`*

# java - Java if 语句被忽略

> ID：12161642
> 
> 赞同：0
> 
> 时间：2012-08-28T14:34:47.047
> 
> 标签：java, android, if-statement

我正在制作一个简单的应用程序，用户单击一个按钮，将 TextView 更改为相应的字符串，但是当我的第一个 if 语句完成时，它不会继续完成下面的 if 语句。

```
if (index == 0 && index > -1 && index < 5) {
  one.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
      index++;
      text1.setText("1");
    }
  }); 
```

这是我的第一个 if 语句，它将 TextView 设置为“1”，然后应添加到整数“index”，这会将索引的值变为“1”，这应该结束该语句，因为它不再符合条件，这将开始下面的 if 语句。

```
if (index == 1 && index > -1 && index < 5) {
  one.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
      text2.setText("1");
      index++;
    }
  }); 
```

现在因为前面的`if`语句将索引的变量设置为“1”，这个`if`语句应该开始而前面的结束，但情况并非如此，即使变量不再符合条件，它也不会停止，下一个 if 语句也不会开始。就好像该`if`声明被忽略了。

**更新。**

我解决了我的问题，这就是我将代码更改为：

```
one.setOnClickListener(new View.OnClickListener(){public void onClick(View v){
  if(index == 0){
    text1.setText("1");
    index++;
  }else if(index == 1){
    text2.setText("1");
    index++;
  }else if(index == 2){
    text3.setText("1");
    index++;
  }else if(index == 3){
    text4.setText("1");
    index++;
  }
}}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:38:27.440

if 语句不是这样工作的。当条件变为假时，控制流不会突然离开块并跳转到其他条件为真的 if 块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T14:36:47.637

从你的 if 语句

```
if (index == 0 && index > -1 && index < 5) 
```

只要

```
if (index == 0) 
```

足够的

和第二个一样。。

```
if (index == 1) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T14:41:56.650

您的问题是您的`index++`语句在 onClick 回调中。因此，在单击按钮之前不会执行此代码。到那时，您的第二个 if 语句将长期执行。换句话说：

您的第一个 if 语句为真，这会`onClick`为按钮添加一个侦听器。您的第二个陈述是错误的，这没有任何作用。用户点击按钮。现在**只**执行第一个回调中的代码：`index`增加并且文本设置为“1”。就这些。

[编辑这可能是你想要的]

```
one.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        if ( index == 0 ) {
            index++;
            text1.setText("1");
        } else if (index == 1 ) {
            text2.setText("1");
            index++;
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T15:01:38.063

另一个可行的解决方案：

```
if ((index > -1) && (index < 5)) {
    one.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            text2.setText(index.toString());
            index++;
    }
}); 
```

- 显然这取决于您具体需要的逻辑，如果您确实需要在 index == 0 时再次出现，则必须更改此格式：

```
if (index == 0) {
    //Whatever you want to do here... eg:
    one.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            text2.setText("0");
            index++;
        }
    });
}
else if ((index > -1) && (index < 5)) {
    one.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            text2.setText(index.toString());
            index++;
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T14:39:13.577

在 index == 1 或 index == 0 之后，其他条件的相关性是什么？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T14:42:23.950

它不起作用的原因是侦听器可能添加在“onLoad”方法或类的构造函数中。

由于您`setOnClickListener`被 if 语句包围，因此只有当语句为真时才设置侦听器。在您的情况下，第一个陈述是正确的，而第二个陈述是错误的。

这意味着只添加第一个侦听器，并且每次单击按钮时`text1.setText("1")`都会调用 。

您应该将 if 语句放在 onClickListener 中，而不是围绕设置侦听器的逻辑。所以下面的代码：

```
 if (index == 0 && index > -1 && index < 5) {
        one.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                index++;
                text1.setText("1");

            }
        }); 
```

应该

```
one.setOnClickListener(new View.OnClickListener() {
  public void onClick(View v) {
    if (index == 0) {
      index++;
      // Do stuff
    } else if(index == 1) {
      index++;
      // Do stuff
    }
  });
} 
```

每次用户点击按钮“一”时，都会调用 onClick。在 onClick 内部计算语句，并执行正确的“Do stuff”。

# mysql - 使用日期组合 2 个选择查询，然后连接 2 个表

> ID：12161647
> 
> 赞同：0
> 
> 时间：2012-08-28T14:34:51.527
> 
> 标签：mysql, sql

我试图加入我的查询，但我被困在周日时间，

我有一个非常基本且直接的联接查询，用于计算员工的所有工作时间、正常时间和加班时间，并且查询运行良好，但是当我想加入星期天时间时，一切都变得混乱了......

没有周日时间的完整查询：-

```
SELECT
`empl_attendance`.`employee_id`,
`employee`.`employee_surname`,
`employee`.`employee_first_name`,
`employee`.`employee_second_name`,
FORMAT((IF(SUM...some basic maths...)),1) AS nt,
FORMAT((...some basic maths...),1) AS ot,
FORMAT((...some basic maths...),1) AS total
FROM
`empl_attendance`
WHERE
 (`empl_attendance_date` BETWEEN '$start_date' AND '$end_date')
INNER JOIN 
`employee` 
ON `empl_attendance`.`employee_id`=`employee`.`employee_id` 
GROUP BY `employee_id` 
```

但是我需要结合下面的查询，它基本上计算了每个员工的周日总小时数。该查询本身可以正常工作，我只是在努力结合这两个查询：

```
SELECT SUM(`empl_attendance_total`) AS sundays
FROM `empl_attendance`
WHERE
(`empl_attendance_date` BETWEEN '$start_date' AND '$end_date')
AND
WEEKDAY(`empl_attendance_date`) > 5
GROUP BY `employee_id` 
```

谢谢

周杰伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:52:17.743

您可以使用 case 语句来做到这一点：

```
 SELECT  ea.`employee_id`, e.`employee_surname`,  e.`employee_first_name`,  e.`employee_second_name`,
         FORMAT((IF(SUM...some basic maths...)),1) AS nt,
         FORMAT((...some basic maths...),1) AS ot,
         FORMAT((...some basic maths...),1) AS total,
         sum(case when weekday(ea.empl_attendance_date) > 5 then ea.empl_attendance_total end) as SundayTotal
 FROM empl_attendance ea join
      employee e
      ON ea.`employee_id = e.employee_id
  WHERE  ea.empl_attendance_date BETWEEN '$start_date' AND '$end_date'
  GROUP BY `employee_id` 
```

我假设以 FORMAT 开头的行正在寻找非星期天的日期，或者至少包括它们，如果这是你想要的。

# python - 在 Python 中合并命名元组的简单方法是什么？

> ID：12161649
> 
> 赞同：12
> 
> 时间：2012-08-28T14:34:56.073
> 
> 标签：python, namedtuple

我想在不丢失键名的情况下合并两个命名元组。如果，我只是与 '+' 运算符合并，结果我得到一个元组，但没有名称。

例如：

```
n [1]: from collections import namedtuple

In [2]: A = namedtuple("A", "a b c")

In [4]: B = namedtuple("B", "d e")

In [5]: a = A(10, 20, 30)

In [6]: b = B(40, 50)

In [7]: a + b
Out[7]: (10, 20, 30, 40, 50) 
```

正如你在上面的例子中看到的， a + b 的结果没有与之关联的名称。

但是，我可以通过创建第三个命名元组来实现它，它具有来自 A 和 B 的字段。

```
In [8]: C = namedtuple("C", A._fields + B._fields)

In [9]: C(*(a + b))
Out[9]: C(a=10, b=20, c=30, d=40, e=50) 
```

这是正确的方法还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T14:40:10.267

一些观察：

*   通常，当您尝试合并两个恰好具有相同名称的字段的命名元组时，Python 不知道该怎么做。也许这就是为什么没有运算符或函数的原因。

*   的[文档`_fields`](http://docs.python.org/dev/library/collections#collections.somenamedtuple._fields)说：

> 列出字段名称的字符串元组。对于自省和从现有命名元组创建新的命名元组类型很有用。

这表明您的方法很好，甚至可能由 namedtuple 代码的作者暗示。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-02-15T20:48:14.510

就 vanilla Python 而言，您几乎已经掌握了它，但如果您使用的是 Python 3.5+，则可以进行额外的简化。

```
>>> from collections import namedtuple
>>> A = namedtuple("A", "a b c")
>>> B = namedtuple("B", "d e")
>>> a = A(10, 20, 30)
>>> b = B(40, 50)
>>> C = namedtuple("C", A._fields + B._fields)
>>> C(*(a + b))
C(a=10, b=20, c=30, d=40, e=50)
>>> #Available in Python 3.5+
>>> C(*a, *b)
C(a=10, b=20, c=30, d=40, e=50) 
```

此外，如果您发现自己经常这样做，可以使用以下函数来消除样板代码：

```
>>> from functools import reduce
>>> from itertools import chain
>>> from operator import add
>>> def namedtuplemerge(*args):
...     cls = namedtuple('_'.join(arg.__class__.__name__ for arg in args), reduce(add, (arg._fields for arg in args)))
...     return cls(*chain(*args))
...
>>> namedtuplemerge(a, b)
A_B(a=10, b=20, c=30, d=40, e=50) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-18T20:28:30.220

Python 不会自动创建一个新的`namedtuple`，一个新的类。您必须自己定义组合`namedtuple`：

```
A = namedtuple("A", "a b c")
B = namedtuple("B", "d e")
AB = namedtuple("AB", "a b c d e")

a = A(1,2,3)
b = B(4,5)
ab = AB(*(a+b))

>>> a
A(a=1, b=2, c=3)
>>> b
B(d=4, e=5)
>>> ab
AB(a=1, b=2, c=3, d=4, e=5) 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2014-08-05T02:51:32.407

怎么样

```
>>> [a] + [b]
[A(a=10, b=20, c=30), B(d=40, e=50)] 
```

# spring - tomcat: guvnor & webservice 加载顺序

> ID：12161651
> 
> 赞同：1
> 
> 时间：2012-08-28T14:34:59.933
> 
> 标签：spring, tomcat7, guvnor

我已经在 tomcat 7 上部署了 guvnor。现在需要在 BRMS 周围部署一个包装器 web 服务。webservice 是一个 spring-ws 并使用 @Autowired kbase 依赖注入。kbase 在 spring-context XML 中配置为（不是文字）：

```
<drools:resource id="xxx" source="http://localhost:8080/guvnor/.../<package>/LATEST 
```

现在的问题是tomcat首先加载无法初始化的webservice，因为guvnor URL还没有启动。

我可以通过首先仅启动 guvnor 和 tomcat 启动来解决此问题，然后将 WS 战争复制到 webapps 文件夹。这有效，但每次都做起来很痛苦。

最好的方法是什么？

我看过这个线程，但不确定它是否可以在这种情况下工作：[有没有办法在 tomcat6 中强制执行部署顺序？](https://stackoverflow.com/questions/6698646/is-there-a-way-to-enforce-a-deployment-order-in-tomcat6)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:25:04.257

尝试了以下方法来解决这个问题：

1.  Tomcat 在启动时会同时启动这两个服务。webservice初始化失败，通过tomcate管理界面手动调出webservice。
2.  使用脚本执行与上述相同的操作，以在延迟后启动 Web 服务。
3.  将 drools 包初始化更改为通过 drools [API](http://docs.jboss.org/jbpm/v5.1/javadocs/)而不是通过配置文件以及重试逻辑加载。

所有这些工作，但保留生产代码中的最后一个选项。

# web-config - Elmah (mvc4) 忽略 customErrors （但它记录）

> ID：12161653
> 
> 赞同：0
> 
> 时间：2012-08-28T14:35:10.440
> 
> 标签：web-config, asp.net-mvc-4, elmah

我刚刚将一个 MVC3 项目迁移到了 4。

我还安装了 ELMAH 的最新更新。

我确实有未处理的异常的问题。

在我的 web.config 我有这个：

```
<customErrors mode="On" defaultRedirect="/Error/Error" redirectMode="ResponseRedirect">
  <error statusCode="404" redirect="/Error/NotFound" />
</customErrors> 
```

当我得到一个未处理的异常时，Elmah 会记录它，那里没有问题，但它不会将我发送到错误/错误视图。它也不做'ResponseRedirect'

相反，它的作用是保持 URL 不变，并显示 Shared 文件夹中的 Error.aspx 视图。

如何在某处更改设置，使 customErrors 不会被忽略？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:12:21.723

如果您正在查看该`Error.aspx`页面，那么肯定`HandleError`过滤器正在其后面播放。转到`Global.asax.cs`并检查`HandleErrorAttribute`方法中没有添加`RegisterGlobalFilters`。

还要确保您没有覆盖`OnException`控制器的方法并自己手动执行某些操作。

# cocoa - 限制 NSTextField 只允许数字

> ID：12161654
> 
> 赞同：28
> 
> 时间：2012-08-28T14:35:10.657
> 
> 标签：cocoa, nstextfield

如何限制 a`NSTextField`只允许数字/整数？我发现了这样的问题，但他们没有帮助！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-30T05:17:26.543

尝试创建自己的`NSNumberFormatter`子类并检查方法中的输入值`-isPartialStringValid:newEditingString:errorDescription:`。

```
@interface OnlyIntegerValueFormatter : NSNumberFormatter

@end

@implementation OnlyIntegerValueFormatter

- (BOOL)isPartialStringValid:(NSString*)partialString newEditingString:(NSString**)newString errorDescription:(NSString**)error
{
    if([partialString length] == 0) {
        return YES;
    }

    NSScanner* scanner = [NSScanner scannerWithString:partialString];

    if(!([scanner scanInt:0] && [scanner isAtEnd])) {
        NSBeep();
        return NO;
    }

    return YES;
}

@end 
```

然后将此格式化程序设置为您的`NSTextField`：

```
OnlyIntegerValueFormatter *formatter = [[[OnlyIntegerValueFormatter alloc] init] autorelease];
[textField setFormatter:formatter]; 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-10-08T17:17:42.007

斯威夫特 3 版本

```
import Foundation

    class OnlyIntegerValueFormatter: NumberFormatter {

    override func isPartialStringValid(_ partialString: String, newEditingString newString: AutoreleasingUnsafeMutablePointer<NSString?>?, errorDescription error: AutoreleasingUnsafeMutablePointer<NSString?>?) -> Bool {

        // Ability to reset your field (otherwise you can't delete the content)
        // You can check if the field is empty later
        if partialString.isEmpty {
            return true
        }

        // Optional: limit input length
        /*
        if partialString.characters.count>3 {
            return false
        }
        */

        // Actual check
        return Int(partialString) != nil
    }
} 
```

利用：

```
let onlyIntFormatter = OnlyIntegerValueFormatter()
myNsTextField.formatter = onlyIntFormatter 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-20T19:35:01.553

这是一个过滤的解决方案。给文本字段一个委托和一个出口并设置 controlTextDidChange 方法。

```
- (void)controlTextDidChange:(NSNotification *)aNotification {

    NSTextField *textfield = [notification object];
    NSCharacterSet *charSet = [NSCharacterSet characterSetWithCharactersInString:@"0123456789"];

    char *stringResult = malloc([textfield.stringValue length]);
    int cpt=0;
    for (int i = 0; i < [textfield.stringValue length]; i++) {
        unichar c = [textfield.stringValue characterAtIndex:i];
        if ([charSet characterIsMember:c]) {
            stringResult[cpt]=c;
            cpt++;
        }
    }
    stringResult[cpt]='\0';
    textfield.stringValue = [NSString stringWithUTF8String:stringResult];
    free(stringResult);
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-28T14:42:10.470

尝试这个 -

```
NSNumberFormatter *formatter = [[[NSNumberFormatter alloc] init] autorelease];
[formatter setNumberStyle:NSNumberFormatterDecimalStyle];
[textField setFormatter:formatter]; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-03-16T11:01:08.057

这是一个斯威夫特版本：

```
override func isPartialStringValid(partialString: String, newEditingString newString: AutoreleasingUnsafeMutablePointer<NSString?>, errorDescription error: AutoreleasingUnsafeMutablePointer<NSString?>) -> Bool {
    if (count(partialString.utf16)) {
        return true
    }

    if (partialString.rangeOfCharacterFromSet(NSCharacterSet.decimalDigitCharacterSet().invertedSet) != nil) {
        NSBeep()
        return false
    }

    return true
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-01-22T21:19:10.637

在 SWIFT 中，我是这样做的

1.  使用 Int() 将文本值转换为 Int
2.  检查转换后的值不小于0
3.  如果小于 0，则显示错误消息，其他接受该值

    ```
    if ((Int(txtField.stringValue)) < 0){
        // Display error message
    } 
    ```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-01-18T10:45:54.953

**[适用于 Swift 3.0.1]**

正如其他人所建议的，子类`NumberFormatter`和覆盖`isPartialStringValid`方法。最简单的方法是在 xib/storyboard下放置一个`NumberFormatter`对象并将其更新为. 下一个实现只允许整数或空白值，并在字符串包含非法字符时发出哔哔声。`NSTextField``Custom Class`

```
class IntegerFormatter: NumberFormatter {

    override func isPartialStringValid(_ partialString: String, newEditingString newString: AutoreleasingUnsafeMutablePointer<NSString?>?, errorDescription error: AutoreleasingUnsafeMutablePointer<NSString?>?) -> Bool {

        // Allow blank value
        if partialString.numberOfCharacters() == 0  {
            return true
        }

        // Validate string if it's an int
        if partialString.isInt() {
            return true
        } else {
            NSBeep()
            return false
        }
    }
} 
```

`String``numberOfCharacters()`和`isInt()`是在扩展中添加的方法。

```
extension String {

    func isInt() -> Bool {

        if let intValue = Int(self) {

            if intValue >= 0 {
                return true
            }
        }

        return false
    }

    func numberOfCharacters() -> Int {
        return self.characters.count
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-03-07T15:09:48.410

这是创建相同的步骤....

只需创建带有子类 NSNumberFormatter 的 ANYCLASS（称为 SAMPLE）...

在 .m 文件中编写以下代码...

```
 - (BOOL)isPartialStringValid:(NSString *)partialString newEditingString:(NSString      **)newString errorDescription:(NSString **)error {
// Make sure we clear newString and error to ensure old values aren't being used
if (newString) { *newString = nil;}
if (error) {*error = nil;}

static NSCharacterSet *nonDecimalCharacters = nil;
if (nonDecimalCharacters == nil) {
    nonDecimalCharacters = [[NSCharacterSet decimalDigitCharacterSet] invertedSet] ;
}

if ([partialString length] == 0) {
    return YES; // The empty string is okay (the user might just be deleting everything and starting over)
} else if ([partialString rangeOfCharacterFromSet:nonDecimalCharacters].location != NSNotFound) {
    return NO; // Non-decimal characters aren't cool!
}

return YES; 
```

}

现在..在您的实际类中将格式化程序设置为您的 NSTextField 对象，如下所示...

```
NSTextField *mySampleTxtFld; 
```

为此设置格式化程序...

```
SAMPLE* formatter=[[SAMPLE alloc]init];// create SAMPLE FORMATTER OBJECT 

self.mySampleTxtFld.delegate=self;
[self.mySampleTxtFld setFormatter:formatter]; 
```

你完成了！！！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-03-16T09:12:40.880

Swift 2.0 自定义格式化程序，使用 0 而不是空格：

```
class OnlyIntegerValueFormatter: NSNumberFormatter {

    override func isPartialStringValid(partialString: String, newEditingString newString: AutoreleasingUnsafeMutablePointer<NSString?>, errorDescription error: AutoreleasingUnsafeMutablePointer<NSString?>) -> Bool {

        if partialString.isEmpty {
            newString.memory = "0"
            return false
        }

        if Int(partialString) < 0 {
            NSBeep()
            return false
        } else {
            return true
        }
    }
} 
```

# mysql - 多次显示一列，其中包含来自 3 个不同日期间隔的数据

> ID：12161658
> 
> 赞同：0
> 
> 时间：2012-08-28T14:35:31.047
> 
> 标签：mysql, sql

我试图显示同一列的三个不同数字在 mysql 查询中并连接所有三个表，我想保持一个月的静态：April，所以会是这样的情况我想显示当前月份，上个月和我正在使用的一年中的静态月份，在这种情况下，让我们坚持 2012 年

```
table: persons
ID     name
 1     Carl

table: vehicle  
ID     v_name         person_veh
100   Dodge Viper       1

Table:payment
 pay_id , pay_date,    amount  person_id
    1    2012-02-12    1000        1
    2    2012-03-11    780         1
    3    2012-04-15    890         1
    4    2012-05-12    1200        1
    5    2012-06-12    1890        1
    6    2012-07-12    1350        1
    7    2012-08-12    1450        1 
```

所以我想要做的是显示 4 月份的列金额，正如我所说的，我想让该行保持静态：`890`当前月份可以说当前月份是`August:1450`，上个月的金额是 7 月：1350：所以最终结果将是这样的：

```
name     v_name    april_amount   current_month_amount  previous_month_amount
Carl   Dodge viper    890                 1450                 1350 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:14:02.390

您可以使用以下 - 它使用带有`CASE`语句的聚合函数：

```
select p.name,
  v.v_name,
  sum(case when Month(py.pay_date) = 4 then amount end) april_amount,
  sum(case when Month(py.pay_date) = Month(curdate())
        then amount end) current_month_amount,
  sum(case when Month(py.pay_date) = Month(curdate())-1
        then amount end) previous_month_amount
from persons p
left join vehicle v
  on p.id = v.person_veh
left join payment py
  on p.id = py.person_id
group by p.name,
  v.v_name 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/97b8c/13)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:52:19.653

尝试

```
SELECT a.name, b.pay_date, b.amount, b.person_id, c.v_name 
FROM persons a
LEFT JOIN payment b on a.id = b.person_id 
LEFT JOIN vehicle c on a.id = c.person_veh 
```

此查询假定 id、person_veh 和 person_id 是相似的列，这些列将这个用户链接到这三个表中

# r - 如何为多元响应编写 R 公式？

> ID：12161659
> 
> 赞同：10
> 
> 时间：2012-05-29T20:55:52.690
> 
> 标签：r, regression

在 RI 中，想要对所有预测变量的多变量响应做一些回归，对于单变量响应，我知道公式就像

`y~.,` 这是使用所有预测变量来回归 y，如果现在我面对 100 个响应，我不能输入 100 yi like `y1+y2+y3...+y4~x`，那么如何使用所有预测变量来回归多元响应？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-29T02:18:06.953

在 R 中，多元[公式](http://cran.r-project.org/doc/manuals/R-intro.html#Formulae-for-statistical-models)用于`cbind()`您的`Y`变量。因此，公式将是：

```
model <- lm(cbind(y1, y2, y3, y4)~x) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T21:13:00.330

`y`如果是一个有 100 列的矩阵，这相对容易。在这种情况下，您以相同的方式进行操作。例如：

```
lm(y ~ x) 
```

将对 y 的列进行线性回归`x`。

# magento - 如何在magento中获取登录客户的订单列表

> ID：12161664
> 
> 赞同：3
> 
> 时间：2012-08-28T14:35:44.947
> 
> 标签：magento

我正在获取客户订购的订单号（名称）列表。我试过使用

`Mage::getModel('sales/order')->load($order_id);`

但对我不起作用？实际上，我正在研究帮助台模块并尝试将订单分配给工单。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-29T06:44:28.330

好的朋友谢谢你的提示，我用这个得到了这个

```
require_once 'app/Mage.php'; 
      Mage::app();       

      $orders = Mage::getResourceModel('sales/order_collection')
        ->addFieldToSelect('*')
        ->addFieldToFilter('customer_id', Mage::getSingleton('customer/session')->getCustomer()->getId())
        ->addFieldToFilter('state', array('in' => Mage::getSingleton('sales/order_config')->getVisibleOnFrontStates()))
        ->setOrder('created_at', 'desc')
    ;   

     $this->setOrders($orders); 

     foreach ($orders as $order):

    echo $order->getRealOrderId().'&nbsp;at&nbsp;'.$this->formatDate($order->getCreatedAtStoreDate()).'&nbsp;('.$order->formatPrice($order->getGrandTotal()).')';

    endforeach; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T14:51:21.240

你可以试试这个：

```
$yourCustomerId = '123123';
$field          = 'customer_id';
$collection     = Mage::getModel("sales/order")->getCollection()
                   ->addAttributeToSelect('*')
                   ->addFieldToFilter($field, $yourCustomerId);
echo "<pre>";
print_r($collection);
echo "</pre>"; 
```

* * *

```
// if the customer is logged in you can add this
if(!Mage::getSingleton('customer/session')->isLoggedIn()){
    $yourCustomerId = Mage::getSingleton('customer/session')->getCustomer()->getId();
    $field          = 'customer_id';
    $collection     = Mage::getModel("sales/order")->getCollection()
                       ->addAttributeToSelect('*')
                       ->addFieldToFilter($field, $yourCustomerId);
    echo "<pre>";
    print_r($collection);
    echo "</pre>";
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-02T12:42:25.367

你也可以试试这个

```
$customer = Mage::getSingleton('customer/session')->getCustomer();
$email = $customer->getEmail(); 
```

现在您的 $email 变量中有客户电子邮件地址。因此，您可以使用此电子邮件地址轻松获取订单，如下所示：

```
 $orderCollection = Mage::getModel(‘sales/order’)->getCollection();
 $orderCollection->addFieldToFilter(‘customer_email’, $email);

foreach ($orderCollection as $_order)
{
    echo $_order->getRealOrderId() ;
    echo $this->formatDate($_order->getCreatedAtStoreDate()) ;
    echo $_order->getShippingAddress() ? $this->escapeHtml($_order->getShippingAddress()->getName()) ;
    echo $_order->formatPrice($_order->getGrandTotal());
    echo $_order->getStatusLabel();
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T14:40:36.383

$orders = Mage::getModel('sales/order')->getCollection();

$orders->getSelect()->where('e.customer_id ='.$customer_id);

# android - android-socket通信中的SocketTimeoutException

> ID：12161665
> 
> 赞同：1
> 
> 时间：2012-08-28T14:35:46.063
> 
> 标签：android, sockets, exception

我正在尝试将我的“Galaxy S”连接到我的 Panasonic PLC（甚至其他 PC 本身），但我总是收到 SocketTimeoutException。我的安卓版本是 2.3.3：

IP-PLC：192.168.2.99

IP-GalaxyS：不知道怎么查

网络掩码：255.255.255.0

PLC直接与wi-fi路由器连接，我将手机连接到这个网络。

```
package com.example.communication;

import java.io.IOException;
import java.net.InetAddress;
import java.net.Socket;
import java.net.SocketTimeoutException;

import android.util.Log;

public class TryConnection implements Runnable {    
public void run() {
    try {
        InetAddress serverAddr = InetAddress.getByName("192.168.2.99");
        Socket socket = new Socket(serverAddr, 9094);
        Log.e("SUCESS", "SUCESS");
    } catch(SocketTimeoutException e) {
        Log.e("SOCKET TIMEOUT", "SOCKET TIMEOUT", e);
    } catch (IOException e) {       
        Log.e("CONNECTION ", " ERROR", e);
    }       
} 
```

和我的 MainActivity 类：

```
package com.example.communication;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;

public class MainActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

public void sendTag(View view) {        
    TryConnection tryconnection = new TryConnection();
    Thread thread = new Thread(tryconnection);
    thread.start();
}
} 
```

你知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:55:08.190

它也发生在我身上，重新启动 eclipse 以解决问题。

# java - 如何为 HTML 扩展 StructuredTextEditor（或文本编辑器）内容助手

> ID：12161668
> 
> 赞同：0
> 
> 时间：2012-08-28T14:35:50.003
> 
> 标签：java, eclipse-plugin

我想为 HTML 动态扩展内容助手 - 例如： - 添加新标签、属性和属性值 - 对于此代码：

```
<div class="someClass">
...
</div>
<div class=$>
.. 
```

光标位置是 $。我想在显示的提案中添加“someClass”。

问题是 - 最好的方法是什么？扩展 HTMLTagsCompletionProposalComputer 是否更好，将其连接到扩展点并覆盖 computeCompletionProposals(CompletionProposalInvocationContext, IProgressMonitor) 还是有更好的解决方案？一些好的教程或示例将非常有帮助。最重要的是 - 我需要动态地执行此操作，因此添加新模板对我来说不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:55:39.913

嗯，最好的地方是在eclipse里面。

我不认为这应该是一个额外的插件。你不认为你更好地为日食开发本身做出贡献吗？如果是这样：

1.  下载 Eclipse 源
2.  添加您的功能
3.  将修复发布到 bugs-eclipse 作为建议。

问候

# javascript - 检测 jQuery 中的未定义项

> ID：12161674
> 
> 赞同：1
> 
> 时间：2012-08-28T14:36:04.150
> 
> 标签：javascript, jquery

如何在“if 语句”中检测 jQuery 中未定义的项目我已经尝试过类似下面的操作，但到目前为止没有任何成功。

```
 success: function(data){

  if(typeof data.DATA[0].RECIPIENTID = 'undefined'){
     // do nothing                          
   }
   else {
       //else get value
       console.log(data.DATA[0].RECIPIENTID);                       
   }

 console.log(data);

 }
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T14:37:39.283

[`=`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Assignment_Operators)是JavaScript[中的赋值运算符。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Assignment_Operators)[使用`===`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)，不使用`=`。

```
if(typeof data.DATA[0].RECIPIENTID === 'undefined'){
    // ...
}
// ... 
```

另请参阅[JavaScript 比较中应该使用哪个等号运算符（== vs ===）？](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:41:14.407

undefined 不需要引号 ''

```
 if(RECIPIENTID === undefined){
     // do nothing                          
   alert("undefined");
} 
```

# css - @font-face in ie 不工作

> ID：12161676
> 
> 赞同：0
> 
> 时间：2012-08-28T14:36:09.177
> 
> 标签：css, font-face

我正在使用`samarn`我的网站中调用的字体。该字体在*Firefox*和*Google Chrome*中看起来不错，但在**IE**中不显示。

我的代码是：

```
@font-face {
    font-family: 'SamarkanNormal';
    src: url('../fonts/samarn.eot');
    src: url('../fonts/samarn.eot?#iefix') format('embedded-opentype'),
         url('../fonts/samarn.woff') format('woff'),
         url('../fonts/samarn.ttf') format('truetype'),
         url('../fonts/samarn.svg#samarn') format('svg');
    font-weight: normal;
    font-style: normal;
}

#name { 
    font-family:'SamarkanNormal'; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:39:02.520

尝试

```
@font-face {
  font-family: 'font';
  src: url('font.eot');
  src: local('☺'),
         url('font.otf') format('opentype');
} 
```

更多信息：http: [//paulirish.com/2009/bulletproof-font-face-implementation-syntax/](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)

也许尝试使用其他（除了 fsq）字体生成器 fe。[http://fontface.codeandmore.com/](http://fontface.codeandmore.com/)

# jquery - ajax 回调中的 Url.RouteUrl 并使用 jquery 添加参数

> ID：12161677
> 
> 赞同：1
> 
> 时间：2012-08-28T14:36:13.013
> 
> 标签：jquery, asp.net-mvc

我在 ajax 调用的回调中有以下代码：

```
jQuery.each(res, function () 
{
   var anchor = $("<a/>", { id: this.UrlTitle, text: this.Name.toLowerCase(), style: 'color:#000000;' });
    anchor.attr('href', @(Url.RouteUrl("Detail",new{indicator=this.Name,urltitle=this.NameUrl}));");
}); 
```

我想在 foreach 中使用 this.Name 和 this.UrlTitle。

问题是我想避免使用查询字符串变量（？param = 1等......）

你知道如何将 jquery 变量注入到 html helper Url.RouteUrl 中吗？

提前致谢

问候。

何塞。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:38:30.223

```
jQuery.each(res, function () {
    var anchor = $('<a/>', { 
        id: this.UrlTitle, 
        text: this.Name.toLowerCase(), 
        style: 'color:#000000;' 
    });
    var url = '@Url.RouteUrl("Detail", new { indicator = "__indicator__", urltitle = "__title__" })'
        .replace('__indicator__', encodeURIComponent(this.Name))
        .replace('__title__', encodeURIComponent(this.NameUrl));
    anchor.attr('href', url);
}); 
```

# jquery - insertAfter 基于 ID 的特定元素

> ID：12161678
> 
> 赞同：4
> 
> 时间：2012-08-28T14:36:20.907
> 
> 标签：jquery, jquery-selectors, insertafter

我有两个链接列表。我有它，当用户单击任一列表上的链接时，它会移动到另一个列表。很快列表变得杂乱无章，所以我想通过 ID 来组织它们。

然后我想要的是当用户单击链接时，它将在列表中搜索`data-id`小于单击链接的最后一个元素。然后我会在那之后插入元素。

现在，我真正感兴趣的是使用 jQuery 执行此操作的最有效（代码方面）的方法。我知道我可以使用它来做到这一点，`$(".added").each()`但它看起来很笨重。有没有更好的方法使用选择器或其他东西？

```
<div class="available">
    <h2>Available Groups</h2>
    <a href="" data-id="1">Group 1<span>Add</span></a>
    <a href="" data-id="2">Group 2<span>Add</span></a>
    <a href="" data-id="3">Group 3<span>Add</span></a>
    <a href="" data-id="4">Group 4<span>Add</span></a>
    <a href="" data-id="5">Group 5<span>Add</span></a>
</div>

<div class="added">
    <h2>Added Groups</h2>
</div> 
```

目前的实现：

```
$(".available a").on("click",function(){
        var myID = parseInt($(this).data("id"));
        var alist = $(".added a");
        if (alist.length > 0) {
            var nodeToInsertAfter;
            $(".added a").each(function () {
                if (parseInt($(this).data("id")) < myID)
                    nodeToInsertAfter = $(this)
            });

            if (nodeToInsertAfter)
                $(this).insertAfter(nodeToInsertAfter);
            else
                $(this).prependTo(".added");
        }
        else {
            $(this).appendTo(".added");
        }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:59:25.423

这是一种方法：**[jsFiddle 示例](http://jsfiddle.net/j08691/yRxcq/2/)**

```
$(".available a").on("click", function(e) {
    e.preventDefault();
    $('.added h2').after($(this));
    var items = $('.added a').get();
    items.sort(function(a, b) {
        var A = $(a).data('id');
        var B = $(b).data('id');
        if (A < B) return -1;
        if (A > B) return 1;
        return 0;
    });
    $('.added h2').after(items);
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:43:14.630

insertAfter 不是好方法，试试这个：[http ://api.jquery.com/appendTo/](http://api.jquery.com/appendTo/)

# android - 从 CursorAdapter 事件调用 ListFragment 中的自定义侦听器

> ID：12161683
> 
> 赞同：1
> 
> 时间：2012-08-28T14:36:27.473
> 
> 标签：android, events, listener, fragment, android-cursoradapter

我有一个 SherlockListFragment，其中有一个自定义列表项（复选框、图标和一些文本） - 工作正常。该列表是从自定义 CursorAdapter 填充的，在这里我捕获了 Checkbox 事件（因此我也可以通过方向更改来保存数据 - 也可以）。当用户选中一个或多个复选框以显示操作栏项时，我希望能够在 ListFragment 中引发事件。

我已经在片段中实现了一个接口来接受事件，但是无法在 cursoradapter 的复选框 onClick 侦听器中找出引发片段事件的语法 - 事件触发正常，但无法调用侦听器，无法暂停使用的对象。

分段：

```
public class ContactListFragment extends SherlockListFragment implements
        LoaderManager.LoaderCallbacks<Cursor>
{   
  public interface ListItemCheckedListener
  {
     public void OnListItemChecked(int count);
  }

  private SimpleCursorAdapter mAdapter;   
  public ListItemCheckedListener checkListener;

  public void setListItemListener(ListItemCheckedListener listener)
  {
     checkListener = listener;
  }

<snip>   

  @Override
  public void onActivityCreated(Bundle savedInstanceState)
  {
     super.onActivityCreated(savedInstanceState);

 <snip>   

     setListItemListener(new ListItemCheckedListener()
        {   
           @Override
           public void OnListItemChecked(int count)
           {
              // Turn on/off Action Bar Item   
              //if (count > 0)...
           }   
        }); 
```

光标适配器：

```
 public class ContactCursorAdapter extends SimpleCursorAdapter
  {      
 <snip>   
     @Override
     public void bindView(View view, Context context, Cursor cursor)
     {
 <snip>   
        CheckBox cBox = (CheckBox)view.findViewById(R.id.checkBox);

        final int pos = cursor.getPosition();

        cBox.setOnClickListener(new OnClickListener()
           {
              public void onClick(View view)
              {
                 CheckBox cb = (CheckBox)view.findViewById(R.id.checkBox);

                 if (cb.isChecked())
                 {
                    itemChecked.set(pos, true);
                    countChecked++;
                    <something>.checkListener(countChecked); // <----- Umm?
                 }

                 else if (!cb.isChecked())
                 {
                    itemChecked.set(pos, false);
                    countChecked--;
                    <something>.checkListener(countChecked); // <----- ditto
                 }
              }
           });            
        cBox.setChecked(itemChecked.get(pos)); 
     } 
```

我已经为“某事”尝试了各种对象，但似乎无法完全找到正确的对象。

请帮忙...！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:06:12.423

好吧，经过相当多的死胡同，我终于想出了一个解决方案。不知道这是否是一个好的解决方案，或者它是否是“正确”的方法，但它有效......

我只是向 CursorAdapter 类添加了一个公共 ListItemCheckedListener 变量，在设置适配器后直接将我的 ListFragment ListItemCheckedListener 实例分配给它，然后可以在 CursorAdapter 中调用侦听器的本地实例，事件将传播到 ListFragment。

列表片段：

```
public class ContactListFragment extends SherlockListFragment implements
           LoaderManager.LoaderCallbacks<Cursor>// , OnQueryTextListener
{

  private ContactCursorAdapter          _adapter; // <----- HERE

  <snip>

@Override
public void onActivityCreated(Bundle savedInstanceState)
{
  super.onActivityCreated(savedInstanceState);

  setListItemListener(new ContactListItemCheckedListener()
     {
        @Override
        public void OnListItemChecked(int count)
        {
           if (count > 0)
           {
              if (_mode == null)
              {
                 _loaderManager = getLoaderManager();

                 ContactsActivity activity = (ContactsActivity)getActivity();

                 _mode = activity.startActionMode(_actionModeCallback);
              }

              if (_contactInvite != null)
                 _contactInvite.setRecipCount(count);
           }

           else
           {
              if (_mode != null)
              {
                 _mode.finish();

                 _mode = null;
              }
           }
        }
     });

  _fragment = this;

  setListProcessedListener(new ContactListProcessedListener()
     {
        public void OnListProcessed(int contactMethod)
        {
           for (int i = 0; i < _adapter.itemChecked.size(); i++)
              _adapter.itemChecked.set(i, false);

           _fragment.setListAdapter(_adapter);

           _loaderManager.initLoader(0, null, _fragment);
        }
     });

  setEmptyText(this.getString(R.string.contacts_none));

  setHasOptionsMenu(true);

  _adapter = new ContactCursorAdapter(getActivity(),
                                      R.layout.contact_list_item,
                                      null,
                                      new String[] { Contacts._ID,
                                               Contacts.DISPLAY_NAME,
                                               Contacts.CONTACT_STATUS },
                                      CONTACT_SUMMARY_FIELDS,
                                      0);

  _adapter.checkListener = checkListener;

  boolean[] iChecked = null;
  if (savedInstanceState != null)
  {
     if (savedInstanceState.containsKey("itemChecked"))
     {
        iChecked = savedInstanceState.getBooleanArray("itemChecked");

        for (int i = 0; i < iChecked.length; i++)
           _adapter.itemChecked.add(i, iChecked[i]);

        _adapter.countChecked = savedInstanceState.getInt("countChecked");

        checkListener.OnListItemChecked(_adapter.countChecked);
     }
  }

  try
  {
     setListAdapter(_adapter);

     setListShown(false);

     // Prepare the loader. Either re-connect with an existing one,
     // or start a new one.
     getLoaderManager().initLoader(0, null, this);

     ((ContactsActivity)getActivity()).setSearchTextListener(new ContactsActivity.SearchTextListener()
        {
           @Override
           public void OnSearchTextChange(String text)
           {
              onQueryTextChange(text);
           }
        });
  }

  catch (Exception e)
  {
     Singletons.Logger().error(TAG + ".onActivityCreated() failed",
                               e.getMessage());
  }
} 
```

光标适配器：

```
 public class ContactCursorAdapter extends SimpleCursorAdapter
  {      

  <snip>

     public ListItemCheckedListener checkListener; // <----- HERE

  <snip>

     @Override
     public void bindView(View view, Context context, Cursor cursor)
     {

<snip>

        cBox.setOnClickListener(new OnClickListener()
           {
              public void onClick(View view)
              {
                 CheckBox cb = (CheckBox)view.findViewById(R.id.checkBox);

                 if (cb.isChecked())
                 {
                    itemChecked.set(pos, true);
                    countChecked++;
                    checkListener.OnListItemChecked(countChecked); // <----- HERE
                 }

                 else if (!cb.isChecked())
                 {
                    itemChecked.set(pos, false);
                    countChecked--;
                    checkListener.OnListItemChecked(countChecked); // <----- HERE
                 }
              }
           });

        cBox.setChecked(itemChecked.get(pos)); 
     } 
```

相当简单和相当优雅，如果我自己这么说的话。嗯......至少与我之前的一些失败尝试相比（！）。我仍然觉得这不是最好的方法，不知何故只是感觉不对，但是嘿......它有效。

如果有人有更好的方法来做到这一点，我很想听听他们的意见。同时，我希望这对其他人有所帮助。

# struts2 - Struts2：测试相等性 从动作到变量

> ID：12161684
> 
> 赞同：1
> 
> 时间：2012-08-28T14:36:29.703
> 
> 标签：struts2

我正在尝试测试：

```
<s:if test="%{selectedLanguage == <s:property/>}"> 
```

其中 selectedLanguage 来自动作，而 s:property 是当前对象。在这样的迭代器中：

```
<s:iterator value="languages">
    <s:if test="%{selectedLanguage == <s:property/>}">
        <option id="<s:property/>" selected><s:property/></option>
    </s:if>
    <s:else>
        <option id="<s:property/>"><s:property/></option>
    </s:else>
</s:iterator> 
```

显然，它不起作用。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:56:32.717

无需修复，只需使用`var`属性为迭代对象命名：

```
<s:iterator value="languages" var="language">
    <s:if test="%{selectedLanguage == #language}">
        <option id="<s:property/>" selected><s:property/></option>
    </s:if>
    <s:else>
        <option id="<s:property/>"><s:property/></option>
    </s:else>
</s:iterator> 
```

你也可以用它`#top`来获得堆栈的顶部，但我认为命名它更具交流性。

我建议`selected`基于`#language`或仅使用 select 标签设置属性。

# objective-c - 如何丢弃与 UITableView 关联的所有表格单元格以刷新它们

> ID：12161685
> 
> 赞同：0
> 
> 时间：2012-08-28T14:36:30.237
> 
> 标签：objective-c, ios, cocoa-touch

我创建了一次表格单元格，因为由于单元格上的所有图像，它的过程很慢。很少有任何改变，但在极少数情况下我想要完全改变细胞。

获取单元格的代码是

```
UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier:PlaceholderCellIdentifier]; 
```

如果没有关联的单元格，我创建一个。

```
 UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier:PlaceholderCellIdentifier];

if (cell == nil)
{
    //create cell
    return cell;
}
else
{
    return cell;
} 
```

有没有办法转储与此表关联的所有可重用单元格？所以当我打电话时

```
[table reloadData]; 
```

它会生成一组新的细胞吗？

非常感谢，-代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:51:34.063

[根据这个答案你可以。](https://stackoverflow.com/a/6164346/243192)但是我*强烈*建议不要这样做。干涉班级内部是不好的做法。

除此之外，我不明白您为什么要这样做。单元的重用实际上是为了加快进程并减少使用的内存。我看不出从头开始创建一个单元实际上比重用一个单元要快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:58:11.250

只需重用现有的单元格。没有必要释放现有的。

我猜你想问不同的问题。您可能想问如何强制表格视图重新显示具有更新数据的每个单元格...？如果是这样，那么答案是使用 call

```
[self.tableView reloadData]; 
```

（假设您将调用放在表视图控制器中）

# cakephp - CakePHP - 如何在 habtm 模型上获得线程查找？

> ID：12161692
> 
> 赞同：0
> 
> 时间：2012-08-28T14:36:53.240
> 
> 标签：cakephp, tree, has-and-belongs-to-many

假设我有以下表格：类别、帖子和类别帖子。类别充当树。Category 和 Post 之间有一个习惯。

我想从帖子控制器做的是找到一个特定的帖子并以线程/嵌套格式列出它所属的类别。

临时解决方案：（我的编码可能很差 - 我很抱歉）

```
public function view($id=null) {
    $this->Post->id = $id;
    if($this->Post->exists()) {
        $data = $this->Post->read();
        $data['Category'] = $this->_thread($data); 
        $this->set(compact('data'));
    }
}

public function _thread($data, $parent_id=null) {
    $out = array();
    $parents = Set::extract("/Category[parent_id={$parent_id}]", $data);
    foreach($parents as $k => $item) {
        $out[$k] = $item;
        $out[$k]['Category']['children'] = Set::extract("/Category[parent_id={$item['Category']['id']}]", $data);
        foreach($out[$k]['Category']['children'] as $key => $child) {
            $out[$k]['Category']['children'][$key]['Category']['children'] = $this->_thread($data, $child['Category']['id']);
        }
    }
    return $out;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T08:14:27.870

这可能会帮助你：

```
$data = $this->Post->find('threaded', array(
    'conditions' => array('id' => 1)
)); 
```

例如，“条件”数组，如果有的话，你可以传递你需要的条件。

# javascript - 表单在 ascx 页面中消失

> ID：12161693
> 
> 赞同：0
> 
> 时间：2012-08-28T14:36:56.260
> 
> 标签：javascript, asp.net, forms

所以这应该在[jsfiddle](http://jsfiddle.net/uNxpE/2/)上。
但是当我把它放在一个`.ascx`页面中时。`.aspx`在页面内加载。`<form>`决定让`null`自己。
任何人都知道它为什么这样做？

进一步来说：

```
document.getElementById('emvForm').submit(); 
```

上面的行正在返回`null`。

好的，看看我注意到我得到的代码：

```
<form id="1" runat="server">
    <form id="emvForm">
    </form>
</form> 
```

Firefox 会忽略第二种形式，因为它是一种嵌套形式。id 保持不变，它没有更改，因为 runat 没有在其上定义。

无论如何绕过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:11:47.547

查看您的代码，您可以更好地执行以下操作：

而不是调用：

```
document.getElementById('emvForm').submit(); 
```

返回真：

```
return true; 
```

然后将您的输入按钮修改为：

```
<input type="submit" value="Submit Form" id="SubmitButton" class="contactFormButton submit emailValid" onClick="return validForm();"> 
```

现在，当您返回 true 时，表单将被提交，而您在 validForm 函数中返回 false 时，表单将停止提交。

# c++ - 从另一个类访问静态成员函数

> ID：12161697
> 
> 赞同：4
> 
> 时间：2012-08-28T14:37:04.697
> 
> 标签：c++

我在 C++ 类中有一个静态 stl 映射，并有另一个静态成员函数来返回指向映射中对象的常量指针。该映射对类中的所有对象都是通用的。

唯一的问题是，我需要搜索此映射并从另一个类中设置它，该类位于不同的 .cpp/.h 文件中，当我尝试在 vs2010 中编译它们时，我得到未解析的外部符号。这些方法在 Timestream 类中定义为

```
static void setRoomList(std::map<std::string, RoomDescription> rl);
static RoomDescription * getRoom(std::string ref); 
```

这两个功能都是公开的，所以应该没有访问问题。这些函数在 Timestream.cpp 文件中定义为正常，即

```
RoomDescription * Timestream::getRoom(std::string ref)
{
    std::map<std::string, RoomDescription>::iterator cIter= roomList.find(ref);

    if(cIter!=roomList.end())
        return &(cIter->second);

    return NULL;
} 
```

我想这样称呼

```
RoomDescription *r =Timestream::getRoom("Bathroom") 
```

从另一个班级。网络上的其他帖子似乎在谈论使用 extern，但我不确定。我不明白为什么这与从不同的类调用任何其他成员函数有什么不同？

谢谢，詹姆斯

编辑：是的，我已经宣布

```
std::map<std::string, RoomDescription> roomList; 
```

在 Timestream.cpp 文件的顶部。在标题中它被定义为

```
static  std::map<std::string, RoomDescription> roomList; 
```

我已将 RoomDescription 的标头包含在我试图从中调用这些方法的类的标头中。

我得到的错误是这个

> Import.obj：错误 LNK2019：未解析的外部符号“public：static void __cdecl Timestream::setRoomList(class std::map,class std::allocator >,class RoomDescription,struct std::less,class std::allocator > > ,class std::allocator,class std::allocator > const ,class RoomDescription> > >)" (?setRoomList@Timestream@@SAXV?$map@V?$basic_string@DU?$char_traits@D@std@@V ?$allocator@D@2@@std@@VroomDescription@@U?$less@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2 @V?$allocator@U?$pair@$$CBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@VroomDescription@@@std@@@2 @@std@@@Z) 在函数 "public: int __thiscall Import::getRoomData(void)" (?getRoomData@Import@@QAEHXZ) 中引用
> 
> Timestream.obj：错误 LNK2001：未解析的外部符号“私有：静态类 std::map,class std::allocator >,class RoomDescription,struct std::less,class std::allocator > >,class std::allocator,类 std::allocator > const ,类 RoomDescription> > > Timestream::roomList" (?roomList@Timestream@@0V?$map@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@ D@2@@std@@VroomDescription@@U?$less@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2@V?$ allocator@U?$pair@$$CBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@VoomDescription@@@std@@@2@@std@ @一种）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:42:57.413

您需要添加：

```
std::map<std::string, RoomDescription> Timestream::roomList; 
```

to `Timestream.cpp`，或者任何你的实现文件被调用。

这将*定义*静态成员。在头文件中，您只需*声明*它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T14:44:24.193

我猜未解析的外部符号是`roomList`; 这是错误消息中包含的重要信息。而且，大概`roomList`是在类定义中声明的静态成员。如果这些假设是正确的，那么错误的原因是代码没有**定义**.`roomList`

通常，静态成员必须在类定义中声明并**在****源**文件中定义：

 **```
// foo.h:
class C {
    static int data;
};

// foo.cpp:
int C::data = 42; 
```

这与从另一个类访问静态成员无关。如果您尝试从声明它的类访问它，您会得到同样的错误。

编辑：从新发布的错误消息中，缺少两个名称：`setRoomList`和`roomList`. 请注意，它`roomList`是 的成员`Timestream`，并且必须这样定义，也就是说，它的定义必须包括`Timestream::`。如上所示，它只是一个全局数据对象，而不是`Timestream`. 的问题`setRoomList`可能是一样的。**

# playframework-2.0 - Cloud Foundry Playframework：错误 310：暂存失败：

> ID：12161698
> 
> 赞同：0
> 
> 时间：2012-08-28T14:37:05.860
> 
> 标签：playframework-2.0, cloud-foundry

我正在尝试在 Cloud Foundry 中托管一个示例 (HelloWorld) Play 应用程序，但在 Staging 时总是出现此错误，

```
Error 310: Staging failed: 'Staging task failed:
 Staging plugin failed: cp: cannot stat `/var/vcap/data/stager/tmp/d20120828-24156-128z05h/unstaged/logs/*': No such file or directory
/var/vcap/data/packages/ruby/6.1/lib/ruby/1.9.1/fileutils.rb:1231:in `chmod': No such file or directory - /var/vcap/data/stager/tmp/d20120828-24156-128z05h/staged/app/start (Errno::ENOENT)
    from /var/vcap/data/packages/ruby/6.1/lib/ruby/1.9.1/fileutils.rb:1231:in `chmod'
    from /var/vcap/data/packages/ruby/6.1/lib/ruby/1.9.1/fileutils.rb:879:in `block in chmod'
    from /var/vcap/data/packages/ruby/6.1/lib/ruby/1.9.1/fileutils.rb:878:in `each'
    from /var/vcap/data/packages/ruby/6.1/lib/ruby/1.9.1/fileutils.rb:878:in `chmod'
    from /var/vcap/packages/stager/vendor/bundle/ruby/1.9.1/gems/vcap_staging-0.1.62/lib/vcap/staging/plugin/play/plugin.rb:14:in `block in stage_application'
    from /var/vcap/packages/stager/vendor/bundle/ruby/1.9.1/gems/vcap_staging-0.1.62/lib/vcap/staging/plugin/play/plugin.rb:11:in `chdir'
    from /var/vcap/packages/stager/vendor/bundle/ruby/1.9.1/gems/vcap_staging-0.1.62/lib/vcap/staging/plugin/play/plugin.rb:11:in `stage_application'
    from /var/vcap/packages/stager/bin/run_plugin:19:in `<main>' 
```

我对此很陌生，所以不知道这意味着什么。我也尝试过谷歌搜索，但无济于事。

我也试过这个，但它不起作用所以[类似于这个的问题](https://stackoverflow.com/questions/11658029/error-310-staging-failed-staging-task-failed-cloudfoundry)

* * *

**编辑：**
*上面的链接指向有效，只需确保在 vmc push 命令中提供应用程序名称，如答案所示。*

* * *

非常感谢任何帮助。

谢谢。

***开发环境：***

*   Play 2.0 - 基于 Scala

*   Ubuntu 12.04

*   vmc 来部署应用程序。

**附加信息：**

我跟着这个教程[玩 scala Cloud Foundry](http://docs.cloudfoundry.com/frameworks/play/scala-getting-started.html)

```
Would you like to deploy from the current directory? [Yn]: 
Application Name: HelloSample
Detected a Standalone Application, is this correct? [Yn]: n
1: Play
2: Lift
3: JavaWeb
4: Node
5: Standalone
6: Rails
7: Spring
8: Rack
9: Grails
10: Sinatra
Select Application Type: 1
Selected Play Framework Application
Application Deployed URL [HelloSample.cloudfoundry.com]: hellosample.cloudfoundry.com
Memory reservation (128M, 256M, 512M, 1G, 2G) [256M]: 
How many instances? [1]: 
1
Create services to bind to 'HelloSample'? [yN]: 1
Would you like to save this configuration? [yN]: y
Manifest written to manifest.yml.
Creating Application: OK
Uploading Application:
  Checking for available resources: OK
  Processing resources: OK
  Packing application: OK
  Uploading (106K): OK   
Push Status: OK
Staging Application 'HelloSample': ..Error 310: Staging failed: 'Staging task failed:
 Staging plugin failed: cp: cannot stat `/var/vcap/data/stager/tmp/d20120828-24156-128z05h/unstaged/logs/*': No such file or directory
/var/vcap/data/packages/ruby/6.1/lib/ruby/1.9.1/fileutils.rb:1231:in `chmod': No such file or directory - /var/vcap/data/stager/tmp/d20120828-24156-128z05h/staged/app/start (Errno::ENOENT)
    from /var/vcap/data/packages/ruby/6.1/lib/ruby/1.9.1/fileutils.rb:1231:in `chmod'
    from /var/vcap/data/packages/ruby/6.1/lib/ruby/1.9.1/fileutils.rb:879:in `block in chmod'
    from /var/vcap/data/packages/ruby/6.1/lib/ruby/1.9.1/fileutils.rb:878:in `each'
    from /var/vcap/data/packages/ruby/6.1/lib/ruby/1.9.1/fileutils.rb:878:in `chmod'
    from /var/vcap/packages/stager/vendor/bundle/ruby/1.9.1/gems/vcap_staging-0.1.62/lib/vcap/staging/plugin/play/plugin.rb:14:in `block in stage_application'
    from /var/vcap/packages/stager/vendor/bundle/ruby/1.9.1/gems/vcap_staging-0.1.62/lib/vcap/staging/plugin/play/plugin.rb:11:in `chdir'
    from /var/vcap/packages/stager/vendor/bundle/ruby/1.9.1/gems/vcap_staging-0.1.62/lib/vcap/staging/plugin/play/plugin.rb:11:in `stage_application'
    from /var/vcap/packages/stager/bin/run_plugin:19:in `<main>'
' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:21:20.047

您需要在 Play 中运行“dist”命令。这会在 ./dist 文件夹中生成一个 zip 文件，您可以像这样使用“路径”开关推送应用程序；

```
vmc push <app-name-goes-here> --path=dist/<generated-zip-file>.zip 
```

VMC 应将此识别为 Play 应用程序并正确部署它。

# java - 有没有比 while (1) ... break; 更清洁的方法？

> ID：12161702
> 
> 赞同：2
> 
> 时间：2012-08-28T14:37:15.573
> 
> 标签：java

此应用程序匹配两个单词列表，一个在字典文件中，一个由应用程序在 TreeSet 中生成。也许有更好的方法来做到这一点，但这超出了这个问题的范围——我们使用的方式是从文件中读取一行，从 TreeSet 中读取一行，比较它们并

如果 TreeSet 行等于文件行，则保存

如果 TreeSet 行 > 文件行，则从文件中读取一行

如果文件行 > TreeSet 行，则从 TreeSet 读取一行

在伪代码中：

```
while (1) {
    String dict = reader.readLine();
    if (dict == null || !TreeIterator.hasNext()) break;
    if (dict.equals(TreeIterator.next())...save
    elseif > .... read tree
    elseif < .... read file
} 
```

使用 while (1) 似乎不正确，但我没有找到更简洁的方式来表达这种双重条件。没有办法读取 while 条件中的两个字符串，是吗？是否有可能保持这种方法的简单性（不再混乱），同时失去奇怪的 while(1)？

最好的祝福。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-28T14:39:27.337

首先，`while(1)`在 Java 中无效。你需要`while(true)`. 我个人倾向于将其处理为：

```
String line;
while ((line = reader.readLine()) != null && TreeIterator.hasNext())
{
    ...
} 
```

尽管我通常不喜欢条件中的副作用，但这种“获取下一个并检查它是否确实存在”的方法非常普遍，以至于正常的可读性问题不是 IME 的问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-28T14:40:00.607

你可以写

```
for(String dict; TreeIterator.hasNext() && (dict=reader.readLine()) != null; ) {
    if (dict.equals(TreeIterator.next())...save
    elseif > .... read tree
    elseif < .... read file
} 
```

我不确定这是否更清洁。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T14:39:42.577

是的。尝试

```
String dict;
while ( (dict = reader.readLine()) != null && TreeIterator.hasNext() ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T14:40:17.540

这个怎么样（在伪代码中）：

```
String dict = reader.readLine();
while (dict != null && TreeIterator.hasNext()) {
    if (dict.equals(TreeIterator.next())...save
    elseif > .... read tree
    elseif < .... read file
    dict = reader.readLine();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T14:39:42.403

您可以将 while 替换为您的中断条件：

```
String dict;
while((dict = reader.readLine()) != null && TreeIterator.hasNext()) 
```

这种方式停止条件更具可读性

# c++ - 回收站物品切碎

> ID：12161703
> 
> 赞同：0
> 
> 时间：2012-08-28T14:37:17.883
> 
> 标签：c++, windows, winapi, visual-c++, windows-shell

我想粉碎回收站数据，但我不知道哪个是最好的方法，所以它是： - 在 windows vista 和 7 中，文件以 $R 和一堆随机字符以及一个以 $I 开头的文件并创建相同的随机字符，该文件包含有关该文件的一些信息，包括它的名称。$Recycler.bin 目录还包含一个Desktop.ini，我不知道它是做什么的。- 在下面的 vista 中，回收文件的管理是使用隐藏的 INFO2 文件完成的，这些文件在随机文件名和真实姓名之间进行关联。

现在，假设我想构建一个可以在 vista 上下系统上运行的应用程序，你会使用什么常见的策略？我的第一个线索是导航命名空间，获取 Recycler 目录的绝对路径，覆盖文件中的数据并从 Recycler 目录中手动删除它们。之后我还需要通知shell。

您还会使用哪些其他方法？

*如果我在上述陈述中错了，请纠正我。来源：[这里](http://www.pcmag.com/article2/0,2817,1159633,00.asp)和[这里](http://www.raymond.cc/blog/what-is-info2-file-hidden-in-recycled-or-recycler-folder/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:47:52.700

使用 IShellFolder 接口怎么样？

```
LPITEMIDLIST    pidlRecycleBin    = NULL;
SHGetSpecialFolderLocation (m_hWnd, CSIDL_BITBUCKET, &pidlRecycleBin);
[...] 
```

# haskell - 使用 Keter 以特定用户身份运行 Yesod 应用程序

> ID：12161705
> 
> 赞同：1
> 
> 时间：2012-08-28T14:37:32.163
> 
> 标签：haskell, deployment, yesod

如何让**Keter**以特定用户身份运行我的**Yesod应用程序？**
以 root 身份运行似乎不太安全。此外，我的应用程序正在调用一个外部命令，该命令希望以*非超级用户*身份运行并希望访问由主应用程序创建的文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T02:43:59.597

我不知道是否为时已晚，但似乎 snoyberg 在大约一个月前使用 setuid 增加了对此的支持（至少如果我理解正确的话）。

他有一个示例 keter-config.yaml 文件 [1]：

```
root: .
host: "*4"
port: 80
setuid: myname 
```

希望这是你要找的东西！:)

[1] [https://github.com/snoyberg/keter/blob/master/keter-config.yaml](https://github.com/snoyberg/keter/blob/master/keter-config.yaml)

# magento - 如何限制用户访问magento中的特定类别？

> ID：12161706
> 
> 赞同：1
> 
> 时间：2012-08-28T14:37:32.750
> 
> 标签：magento, magento-1.6

我创建了一个在线购物网站，我想将我的管理面板提供给一些供应商，以便他们插入与他们正在处理的特定类别相关的自己的产品。

例如：- 在电子产品类别中，有多种选择，如相机、手机等。

```
1.So, i want one vendor who is related with mobiles should be allowed only to enter his related products(only mobiles) from admin panel.

2.And he should not be allowed to see or update the products in other categories like cameras.He will only be given access to update his related category. 
```

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:42:25.357

这不是开箱即用的，并且正确完成多用户是企业版功能，即使您想要“多商店”而不是“类别”。

您可能会发现有人编写了一个模块来支持您所追求的功能，但是，您所追求的与 Magento 社区版的整体设计背道而驰。

# java - 无法使用 netbeans 中的文本字段过滤 jtable 的行

> ID：12161711
> 
> 赞同：1
> 
> 时间：2012-08-28T14:37:54.760
> 
> 标签：java, netbeans

```
DBOperations objDB;
ArrayList alstStock;
private TableRowSorter sorter;
public void viewDailyStock() {
    initComponents();
    setSize(Toolkit.getDefaultToolkit().getScreenSize());
    objDB = new DBOperations();
    alstStock = objDB.getStockList();
    generateTable();
    txtSearch.getDocument().addDocumentListener(
            new DocumentListener() {
        @Override
                public void changedUpdate(DocumentEvent e) {
                    newFilter();
                }
        @Override
                public void insertUpdate(DocumentEvent e) {
                    newFilter();
                }
        @Override
                public void removeUpdate(DocumentEvent e) {
                    newFilter();
                }
            });
    setVisible(true);
}

void generateTable() {
    Object data[][] = new Object[alstStock.size()][10];
    String date = null;
    for (int i = 0; i < alstStock.size(); i++) {
        StockBean objBean = (StockBean) alstStock.get(i);
        data[i][0] = i + 1;
        data[i][1] = objBean.getBrand();
        data[i][2] = objBean.getProductCode();
        data[i][3] = objBean.getProductName();
        data[i][8] = objBean.getItemInBox();
        SimpleDateFormat df = new SimpleDateFormat("EEEE, MMM d,yyyy");
        date = df.format(objBean.getDate());
        data[i][4] = date;
        data[i][5] = objBean.getUser();
        data[i][6] = objBean.getLotNumber();
        data[i][7] = objBean.getQtyInItem();
        data[i][9] = objBean.getQtyInBox();
    }
    String header[] = {"S.No.", "Brand", "Code", "Name", "Date", "Added By", "Lot No.", "Qty In Item", "Item", "Qty In Boxes"};

    tblStock = new JTable(data,header);
    sorter=new TableRowSorter(tblStock.getModel());
    tblStock.setRowSorter(sorter);
    jScrollPane1.setViewportView(tblStock);
    setWidth();
    tblStock.setAutoCreateRowSorter(true);

}

private void newFilter() {
    RowFilter rf = null;
    try {
        rf = RowFilter.regexFilter(txtSearch.getText(), 3);
    } catch (java.util.regex.PatternSyntaxException e) {
        System.out.println("Exception "+e);
    }
    sorter.setRowFilter(rf);
} 
```

DBOperations 是一个用于从数据库表中获取数据的类。StockBean 是一个具有getter 和setter 方法的对象类。

这是我使用文本字段对 jtable 的第 4 列实施行过滤器的代码，但它不起作用。请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:29:55.657

您可以使用以下代码解决问题：

```
 private void txtSearchKeyReleased(java.awt.event.KeyEvent evt) {                                        

  String target = txtSearch.getText();  
  TableRowSorter<TableModel> sorter = new TableRowSorter<TableModel>(tblStock.getModel());
  tblStock.setRowSorter(sorter);
  sorter.setRowFilter(RowFilter.regexFilter(".*"+target+".*", yourColumnIndice));

  } 
```

那应该对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:48:41.663

索引是从 0 开始的，所以第 3 列是索引 2。

另外，您的评论`newFilter()`不正确。

```
private void newFilter() {
    RowFilter rf = null;
    //If current expression doesn't parse, don't update.
    try {
        rf = RowFilter.regexFilter(txtSearch.getText(), 3);
    } catch (java.util.regex.PatternSyntaxException e) {
        System.out.println("Exception "+e);
    }
    sorter.setRowFilter(rf);
} 
```

`setRowFilter()`即使抛出异常，您也在调用。因此，如果当前正在过滤表并且新的过滤器字符串导致异常，则过滤器将重置为`null`。这意味着当前过滤器将被删除，表格的显示**将**更新。

# java - 谷歌驱动器索引大文件的限制是什么？

> ID：12161714
> 
> 赞同：8
> 
> 时间：2012-08-28T14:37:56.493
> 
> 标签：java, google-drive-api

我正在使用 google drive api 来存储和检索 pdf 文件。我想使用搜索参数查询这些文件。

但在我开始实施之前。我想知道谷歌如何处理大型 pdf 文件的索引。（600+ 页 25Mb+）我想知道基于文本的 pdf。（他们不需要 ocr）

我在驱动器网站上尝试了一些搜索，但并不总是有效。

我想知道是否有任何限制以及它们是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T12:54:24.203

根据[this page](http://support.google.com/drive/bin/answer.py?hl=en&answer=176692&topic=2375187&ctx=topic) for PDFs with OCR：

图像（.jpg、.gif、.png）和 PDF 文件 (.pdf) 的最大大小为 2 MB。对于 PDF 文件，我们在搜索要提取的文本时只查看前 10 页。

[此页面](http://support.google.com/drive/bin/answer.py?hl=en&answer=2423485)适用于带有文本的 PDF ：

您可以通过以下方式在 PDF 和图像文件中搜索文本：

*   在网络版 Google 云端硬盘的搜索框中键入查询。
*   打开 Google Drive 查看器并使用右上角的搜索框。

理论上，您应该能够搜索您上传的任何文本文档或基于文本的 PDF 的前 100 页。您还可以在您的云端硬盘上搜索任何图像 PDF 的前十页中的文本。

# c# - 使用 Web API 在根和实体 XML 元素上自定义名称

> ID：12161715
> 
> 赞同：0
> 
> 时间：2012-08-28T14:38:00.377
> 
> 标签：c#, asp.net, asp.net-mvc-4, asp.net-web-api

我正在利用 MVC4 中的 Web API 为我的 Web 服务提供一个简单的 API。`[XmlType]`我已经阅读了关于在模型上使用,等的各种帖子，`[XmlRoot]`以`[XmlElement]`在根元素和包装每个实体的元素上设置自定义名称，但它们似乎都没有效果。API 总体上运行良好，但 XML 属性似乎没有效果，给我留下了不相关的元素名称。

我已经稍微简化了我的代码，以使示例更清晰，但这基本上是它的样子：

**API控制器：**

```
public class SomeController : ApiController
{
    [HttpGet]
    public List<MyViewModel> All()
    {
        return ApiProvider.All()
                        .Select(v => new MyViewModel
                        {
                            SomeId = v.SomeId
                            SomeValue = v.SomeValue
                        }).ToList();
    }
} 
```

**我的视图模型：**

```
public class MyViewModel
{
    public int SomeId { get; set; }
    public int SomeValue { get; set; }
} 
```

**当前的 XML 响应：**

```
<ArrayOfMyViewModel xmlns:i="http://www.w3.org/2001/XMLSchema-instance"
                    xmlns="http://schemas.datacontract.org/2004/07/...">
    <MyViewModel>
        <SomeId>3</SomeId>
        <SomeValue>My value</SomeValue>
    </MyViewModel>
</ArrayOfMyViewModel> 
```

**所需的 XML 响应：**

```
<CustomRootName xmlns:i="http://www.w3.org/2001/XMLSchema-instance" 
                xmlns="http://schemas.datacontract.org/2004/07/...">
    <CustomEntityName>
        <SomeId>3</SomeId>
        <SomeValue>My value</SomeValue>
    </CustomEntityName>
</CustomRootName> 
```

我没有对我想使用的序列化程序或类似的东西进行任何配置更改。

我在这里遗漏了什么，或者为什么我不能更改元素的名称？是否有其他方法可以采取，或者我缺少一些必要的设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:08:45.177

你就不能上课吗

```
CustomRootName : List<MyViewModel> 
```

并返回一个 CustomRootName 的实例？

* * *

[我对您的评论的回复如下]

是的，这是我在启动 api 时的观点，但 ArrayOfMyViewModel 本质上是由序列化程序创建的伪包装器，并且为每个资源列表创建一个行包装器就是一个绑定。考虑当您的 api 变得更复杂并且您需要支持更复杂的列表类型时，即：

```
<CustomRootName >
    <RootType>typeB</RootType>
    <CustomEntityName>
        <SomeId>3</SomeId>
        <SomeValue>My value</SomeValue>
    </CustomEntityName>
    <CustomEntityName>
...etc
    </CustomEntityName>
</CustomRootName> 
```

您将从一致的界面中受益。我们发现的另一个好处是文档。我们使用 xml-doc 标签记录我们的代码，然后使用 xslt 和一些反射自动生成 api 用户指南。如果您没有包装类，那么可以在此处挂起 xml-doc 标记。所以最初看起来很痛苦，但我很快就被说服了。

# c# - IFFT 来自 AForge.Net 中的 FFT

> ID：12161716
> 
> 赞同：0
> 
> 时间：2012-08-28T14:38:02.173
> 
> 标签：c#, fft, ifft

我正在将代码从 Matlab 重写为 C#。我对数学完全陌生。我必须使用在 AForge.net 库中找到的 FFT 函数，但现在我需要 IFFT。这可以使用 FFT 在几行中计算 IFFT 吗？

Aforge.Net FFT 声明：

```
 public static void FFT (Complex[] data, Direction direction) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:50:21.130

[来自ComplexImage.cs](http://code.google.com/p/aforge/source/search?q=fft&origq=fft&btnG=Search%20Trunk)的图像逆变换。

```
 FourierTransform.FFT2( data, FourierTransform.Direction.Backward );
            fourierTransformed = false;

            for ( int y = 0; y < height; y++ )
            {
                for ( int x = 0; x < width; x++ )
                {
                    if ( ( ( x + y ) & 0x1 ) != 0 )
                    {
                        data[y, x].Re *= -1;
                        data[y, x].Im *= -1;
                    }
                }
            } 
```

# php - 转换为 DateTime 对象

> ID：12161719
> 
> 赞同：0
> 
> 时间：2012-08-28T14:38:15.267
> 
> 标签：php, datetime

有没有办法转换这个：

```
Tue Aug 28 13:59:01 +0000 2012 
```

进入日期时间对象？

我需要用 DateTime 对象来区分上述值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:40:40.970

只需将其传递给 DateTime 构造函数...

```
$date = new DateTime('Tue Aug 28 13:59:01 +0000 2012');
echo $date->format('Y-m-d H:i:s'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:41:22.790

```
$date = new DateTime($yourDate); 
```

这将转换为标准 DateTime 对象

[在此处](http://www.php.net/manual/en/datetime.construct.php)查看 php 手册。示例 2 将说明这一点。

# c# - 从树中删除重复项

> ID：12161720
> 
> 赞同：8
> 
> 时间：2012-08-28T14:38:20.313
> 
> 标签：c#, data-structures, tree, duplicates

我有课：

```
class Node
{
    public string Name;
    public string Address;
    public int Id;
    public List<Node> Children = new List<Node>;
    public Node Parent;
} 
```

表示树中的一个节点。

现在我想从树中删除重复的节点。以树为例：

![在此处输入图像描述](../Images/8380913d33993c05c3830f16800973b6.png)

注意：绿色 Foo ！= 紫色 Foo

什么算法将使我能够从树中删除重复项，以便最终得到：

------------------------------------------![在此处输入图像描述](../Images/224e741fc44f27944909369707f24dab.png)

为了确定绿色 Foo 不等于（！=）紫色 Foo 我想我需要另一个属性来存储节点的高度或其他一些属性，使我能够比较节点。这是我认为我需要的属性（CompareId）：

```
 class Node
    {
        public string Name;     
        public string Address;
        public int Id;
        public List<Node> Children = new List<Node>();
        public Node Parent;

        public string CompareId  //  <----------------- Property I need to compare
        {
            get
            {
                var temp = this.Name + this.Address + this.Id;

                if (this.Parent == null)
                    return temp;
                else
                    return temp + this.Parent.CompareId;
            }
        }
    } 
```

* * *

如果您想创建相同的树，我在这里是代码：

```
Node root = new Node() { Name = "Root", Id = 12, Address = "0x0A1F12" };

Node tom1 = new Node() { Name = "Tom", Id = 15, Address = "0x0F1A17", Parent=root };
root.Children.Add(tom1);
Node tom2 = new Node() { Name = "Tom", Id = 15, Address = "0x0F1A17", Parent = root };
root.Children.Add(tom2);
Node foo = new Node() { Name = "Foo", Id = 99, Address = "0x4C0012", Parent=root };                        
root.Children.Add(foo);

Node foo1 = new Node() { Name = "Foo", Id = 99, Address = "0x4C0012", Parent = tom1 };
tom1.Children.Add(foo1);
Node foo2 = new Node() { Name = "Foo", Id = 99, Address = "0x4C0012", Parent = tom1 };
tom1.Children.Add(foo2);

Node foo3 = new Node() { Name = "Foo", Id = 99, Address = "0x4C0012", Parent =  tom2};
tom2.Children.Add(foo3);
Node foo4 = new Node() { Name = "Foo", Id = 99, Address = "0x4C0012", Parent =  tom2};
tom2.Children.Add(foo4);

Node joe1 = new Node() { Name = "Joe", Id = 99, Address = "0x605C2C", Parent = foo };
foo.Children.Add(joe1);
Node joe2 = new Node() { Name = "Joe", Id = 99, Address = "0x605C2C", Parent = foo };                                                            
foo.Children.Add(joe2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:02:19.997

请检查一下：

```
public class Node
{
    public string Name;
    public string Address;
    public int Id;
    public List<Node> Children;
    public Node Parent;

    public Node()
    {
        this.Children = new List<Node>();
    }

    public string CompareId
    {
        get
        {
            var temp = string.Concat(this.Name, this.Address, this.Id);

            if (this.Parent == null)
                return temp;
            else
                return string.Concat(temp, this.Parent.CompareId);
        }
    }

    public override bool Equals(object OtherNode)
    {
        if (OtherNode is Node)
            return this.CompareId.Equals(((Node)OtherNode).CompareId);
        else
            return false;
    }

    public static Node RemoveDuplicatesFromTree(Node RootNode)
    {
        if (RootNode.Children.Count > 0)
        {
            List<Node> OldChildrenList = new List<Node>();
            OldChildrenList.AddRange(RootNode.Children);

            foreach (Node CurrentChild in OldChildrenList)
            {
                if (RootNode.Children.Any<Node>(x => x.Equals(CurrentChild)))
                {
                    List<Node> Duplicates = RootNode.Children.Where(x => x.Equals(CurrentChild)).ToList<Node>();

                    Duplicates.ForEach(x =>
                        {
                            CurrentChild.Children = CurrentChild.Children.Union<Node>(x.Children).ToList<Node>();
                            RootNode.Children.Remove(x);
                        });

                    RootNode.Children.Add(CurrentChild);
                }

                Node.RemoveDuplicatesFromTree(CurrentChild);
            }
        }

        return RootNode;
    }
} 
```

这可能不用说，仍然。用法：

```
Node.RemoveDuplicatesFromTree(root); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T15:01:50.047

```
private void RemoveDuplicatesFromTree(Node root)
{
    List<Node> nodesToBeremoved = new List<Node>();
    root.Children.ForEach(p =>
        {
            if (!nodesToBeremoved.Contains(p))
            {                        
                nodesToBeremoved.AddRange(root.Children.Where(q => q.Name == p.Name && q != p));
            }
        });
    for (int i = 0; i < nodesToBeremoved.Count; i++)
    {
        root.Children.Remove(nodesToBeremoved[i]);
    }
    if (root.Children != null && root.Children.Count > 0)
    {
        root.Children.ForEach(t => this.RemoveDuplicatesFromTree(t));
    }

} 
```

只需将根传递给这个递归函数；它将修剪同一级别中的所有重复项。您不需要创建比较 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T15:25:00.540

```
static void RemoveDuplicates(ref Node root)
{
        Dictionary<string, Node> nonDuplicates = new Dictionary<string, Node>();

        Action<Node> traverseTree = null;
        traverseTree = (x) =>
        {
            var compareId = x.CompareId;

            if (nonDuplicates.ContainsKey(compareId)) // if there is a duplicate 
            {
                x.Parent.Children.Remove(x); // remove node
            }
            else
            {
                nonDuplicates.Add(compareId, x);                    
            }

            // cannot use foreach loop because removing a node will result in exception

            // keep traversing the tree
            for (var i = x.Children.Count - 1; i >= 0; i--)
                traverseTree(x.Children[i]);

        };

        traverseTree(root);
} 
```

# json - 带有很多标记的谷歌地图，数据结构的选择

> ID：12161722
> 
> 赞同：0
> 
> 时间：2012-08-28T14:38:21.913
> 
> 标签：json, google-maps

mysql数据库中的经纬度。我想知道将这些数据输出到网页的正确方法是什么。如果数据由 PHP 输出并存储在 javascript 中，例如

var locations = [ ['218 S. Wabash Building (TE)', '218 S Wabash Ave
Chicago, IL 60604', 41.8789520, -87.6261270, 0], ['33 E. Congress Building (C)', '33 E国会
芝加哥，IL'，41.87560160，-87.62651219999999，0]
......

那么存储在那里的许多信息将是多余的，因为只有与地图当前视图有关的数据才有用。当然，当用户缩小或拖动到另一个视图时，我希望有相关的标记。

有没有人有开发类似应用程序的经验？什么是最有效的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:44:07.773

只需使用 Ajax。当视口发生变化时，根据当前的纬度/经度/视口从数据库中加载相关标记。

# c++ - 什么可能导致流进入“坏”状态？

> ID：12161728
> 
> 赞同：13
> 
> 时间：2012-08-28T14:38:40.530
> 
> 标签：c++, stream, iostream

在 C++ 中，每个流都有`bad`一点：

> 此标志由在读取或写入数据时发生错误时在流上执行的操作设置，通常会导致流的完整性丢失。

[*来源*](http://www.cplusplus.com/reference/ios/ios/bad/)

什么会导致流“失去完整性”并进入`bad`状态？这与`fail`状态不同，状态最常发生在输入流尝试将值存储到无法接受所述值的变量中（例如尝试将字符串存储到整数变量中）。

请注意，这个问题是[c++ file bad bit](https://stackoverflow.com/questions/2547355/c-file-bad-bit)的更一般形式，它特定于文件输入流；这个问题不是完全重复的，因为它通常适用于输入和输出流。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-28T14:47:58.330

根据[cppreference.com](http://en.cppreference.com/w/cpp/io/basic_ios/bad)：

> 标准库在以下情况下设置 badbit：
> 
> *   因任何原因插入输出流`put()`或失败。`write()`
>     
>     
> *   `operator<<`由于到达了输出流的末尾，通过`std::put_money`或 向输出流中的插入`std::put_time`无法完成（构面的格式化输出函数，例如 `num_put::put()`or `money_put::put()`，返回一个迭代器`iter`，使得`iter.failed()==true`）
>     
>     
> *   Stream 是用一个 null 指针构造的`rdbuf()`，或者 `putback()`/`unget()`在一个带有 null 的流上被调用`rdbuf()`，或者一个 null 指针传递给`operator<<(basic_streambuf*)`
>     
>     
> *   `rdbuf()->sputbackc()`或`rdbuf()->sungetc()`返回`traits::eof()`unget `putback() or`()`
>     
>     
> *   `rdbuf()->pubsync()`返回 -1 到`sync()`、 到`flush()`或 到流`ostream::sentry`上的析构函数`unitbuf`
>     
>     
> *   关联流缓冲区的任何成员函数（例如，、、、等）`sbumpc()`在`xsputn()`I `sgetc()`/ O 操作期间抛出异常`overflow()`
>     
>     
> *   抛出异常`iword()`或`pword()`（例如`std::bad_alloc`）

* * *

这可能是选择 cppreference.com 而不是 www.cpluplus.com 的另一个原因，请参阅： [cplusplus.com 有什么问题？](http://jcatki.no-ip.org/fncpp/cplusplus.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:51:43.083

查看[Apache C++ 标准库用户指南](http://stdcxx.apache.org/doc/stdlibug/29-1.html)。那里列出了两个潜在的错误原因。我引用：

**内存不足**：没有可用于创建缓冲区的内存，或者由于其他原因（例如从流外部提供），缓冲区的大小为 0，或者流无法为自己的内部数据分配内存。

**底层流缓冲区抛出异常：**流缓冲区可能会失去其完整性，例如内存不足、代码转换失败或来自外部设备的不可恢复的读取错误。流缓冲区可以通过抛出异常来指示完整性丢失，该异常被流捕获并导致在流的状态中设置坏位。

# c# - 将处理程序添加到调用全局 javascript 函数的对象

> ID：12161729
> 
> 赞同：0
> 
> 时间：2012-08-28T14:38:52.723
> 
> 标签：c#, javascript, asp.net

我不确定我是否以最好的方式表达了这个问题，所以我将展示我的代码示例。

我有多个使用相同 javascript 函数的页面。我没有将该功能添加到每个页面，而是将其添加到 .js 中并将其导入到站点主控器中。如何将处理程序添加到将调用该函数的对象，我拥有它的方式似乎不起作用。

编辑：我发现问题出在

```
document.getElementById('<%= PostBackButton.ClientID %>').click(); 
```

javascript函数确实被正确调用并且页面确实有一个PostBackButton asp按钮，但是getelement返回null。

```
//chart-ajaxDateSelection.js
function dateSelectionChanged(sender, args) {
  selectedDate = sender.get_selectedDate();

  document.getElementById('<%= PostBackButton.ClientID %>').click();
}

function getSlide()
{
  var i,x,y,ARRcookies=document.cookie.split(";");
  for (i=0;i<ARRcookies.length;i++)
  {
    x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
    y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
    x=x.replace(/^\s+|\s+$/g,"");
    if (x=="slide")
    {
      return y;
    }
  }
} 
```

我的处理程序：

```
<asp:TextBox ID="OverviewChartStartDateTextBox" runat="server"></asp:TextBox>
<ajaxToolkit:CalendarExtender ID="OverviewChartStartCal" 
  OnClientDateSelectionChanged="dateSelectionChanged" runat="server" 
  TargetControlID="OverviewChartStartDateTextBox">
</ajaxToolkit:CalendarExtender> 
```

如您所见，当在 ajax 日历上更改所选日期时，我试图调用 dateSelectionChanged 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:13:41.210

听起来`Javascript`文件没有被正确包含。作为测试，请在`<script>`标签中包含页面本身的功能：

```
<script>
    function dateSelectionChanged(sender, args) {
        selectedDate = sender.get_selectedDate();  
        document.getElementById('<%= PostBackButton.ClientID %>').click();
    }
</script> 
```

测试日期更改事件，如果它有效，您就知道您的脚本文件没有正确包含。

如果它仍然不起作用，则脚本可能有错误。`OnClientDateSelectionChanged`日历扩展器的事件是否有参数？

也许 sender 是`null`，并且脚本在到达您的按钮单击事件之前出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:38:40.780

仅供参考，如果您有 .net >= 3.5，您可以将控件 ClientIDMode 设置为静态并使用 document.getElementById("controlId"); 访问控件 这样你就不必使用 <% %> 标签

* * *

```
<asp:TextBox ID="tb_companyEmail" ClientIDMode="Static" runat="server" CssClass="input"
                                    type="email" />

document.getElementById("tb_companyEmail"); 
```

# asp.net - ASP.NET MVC web.config - 用户登录失败

> ID：12161735
> 
> 赞同：2
> 
> 时间：2012-08-28T14:39:09.173
> 
> 标签：asp.net, asp.net-mvc-3, configuration, web-config

我正在部署一个 ASP.NET MVC 应用程序，但我在使用 web.config 时遇到了困难。该应用程序将部署到我们的服务器，但将访问不同的异地服务器上的数据库。尝试加载访问数据库的页面时出现以下错误：

> “/”应用程序中的服务器错误。
> 
> * * *
> 
> 用户“LOCALSERVERNAME$”登录失败。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Data.SqlClient.SqlException：用户“LOCALSERVERNAME$”登录失败。

web.config 中的连接字符串如下所示：

```
<connectionStrings>
<add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" />
<add name="AppEntities" connectionString="metadata=res://*/Models.Model.csdl|res://*/Models.Model.ssdl|res://*/Models.Model.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=EXTERNALSERVERNAME;Password=****;User ID=****;Initial Catalog=AppData;Integrated Security=True;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" />
</connectionStrings> 
```

所以错误是为了验证本地服务器，它只是托管文件。应用程序中不与数据库交互的普通 ASP 页面得到了正确处理。该问题似乎仅在尝试访问位于完全不同服务器上的数据库时出现。我也知道异地服务器的连接字符串是正确的，它适用于其他应用程序。

我很少处理配置的东西，而且我在一个极其受限的环境中工作，所以这很难解决。很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:46:45.613

这通常意味着访问数据库的服务器位于另一台机器上，而该机器对其尝试访问的数据库没有权限。更多信息可以在[这里找到](http://blogs.msdn.com/b/sql_protocols/archive/2008/05/03/understanding-the-error-message-login-failed-for-user-the-user-is-not-associated-with-a-trusted-sql-server-connection.aspx)

# c# - SslStream.Read() 的奇怪行为

> ID：12161738
> 
> 赞同：3
> 
> 时间：2012-08-28T14:39:15.500
> 
> 标签：c#, .net, c#-4.0, .net-4.0, sslstream

使用 SslStream 处理一些套接字层。**[参考](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.aspx)**

使用参考，我实现了一个简单的客户端。尴尬的部分是当您运行应用程序时，服务器似乎没有回复客户端。

进入调试屏幕并设置一些断点，我意识到正是这个函数处于无限循环中。

```
static string ReadMessage(SslStream sslStream)
{
    // Read the  message sent by the server. 
    // The end of the message is signaled using the 
    // "<EOF>" marker.
    byte [] buffer = new byte[2048];
    StringBuilder messageData = new StringBuilder();
    int bytes = -1;
    do
    {
        bytes = sslStream.Read(buffer, 0, buffer.Length);

        // Use Decoder class to convert from bytes to UTF8 
        // in case a character spans two buffers.
        Decoder decoder = Encoding.UTF8.GetDecoder();
        char[] chars = new char[decoder.GetCharCount(buffer,0,bytes)];
        decoder.GetChars(buffer, 0, bytes, chars,0);
        messageData.Append (chars);
        // Check for EOF. 
        if (messageData.ToString().IndexOf("<EOF>") != -1)
        {
            break;
        }
    } while (bytes != 0); 

    return messageData.ToString();
} 
```

进一步调查指出了真正的罪犯：

```
bytes = sslStream.Read(buffer, 0, buffer.Length); 
```

好像，`SslStream.Read()`是回不去了。检查`byte[] buffer`in debug 屏幕显示响应已写入到`buffer`till `crlf`。该功能已经完成了它的工作，但它仍然没有成功返回？！

这可能是什么原因？我应该采取哪些步骤来忽略这个问题？

另外，对于**持怀疑态度的人**：我曾经`openssl`查看服务器是否正常运行，并且服务器端的一切都很好。

**注意：**我已经知道该`SslStream.ReadTimeout`属性。虽然它通过引发它来完成这项工作，`exception`但这并不是每个场景的正确答案，特别是当服务器响应大量数据流时，只能使用 while 循环和缓冲区有效读取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-01T00:35:05.827

我一直在为同样的问题而苦苦挣扎，程序是无限循环的。

我通过以下信息解决了

如果您使用 http、https 协议？您添加到标题，“连接：关闭\r\n”

[Http 标准文章](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

14.10 连接

Connection general-header 字段允许发送者指定该特定连接所需的选项，并且不能由代理通过进一步的连接进行通信。

Connection 标头具有以下语法：

```
 Connection = "Connection" ":" 1#(connection-token)
   connection-token  = token 
```

HTTP/1.1 代理必须在转发消息之前解析 Connection 头字段，并且对于该字段中的每个连接令牌，从消息中删除与连接令牌同名的任何头字段。连接选项由 Connection 头字段中存在的连接令牌发出信号，而不是任何相应的附加头字段，因为如果没有与该连接选项关联的参数，则可能不会发送附加头字段。

Connection 标头中列出的消息标头不得包含端到端标头，例如 Cache-Control。

HTTP/1.1 为发送者定义了“关闭”连接选项，以表明在响应完成后连接将被关闭。例如，

```
 **Connection: close** 
```

在请求或响应标头字段中表示在当前请求/响应完成后，连接不应被视为“持久”（第 8.1 节）。

不支持持久连接的 HTTP/1.1 应用程序必须在每条消息中包含“关闭”连接选项。

接收包含 Connection 标头的 HTTP/1.0（或更低版本）消息的系统必须，对于此字段中的每个连接令牌，从消息中删除并忽略与连接同名的任何标头字段 -令牌。这可以防止 HTTP/1.1 之前的代理错误地转发此类标头字段。请参阅第 19.6.2 节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:43:20.147

如果连接仍然打开并且服务器尚未写入`<EOF>`，那么它只是“挂起”绝对是有道理的。它正在等待更多数据。它可以知道没有更多数据的唯一方法是让服务器关闭连接。

它是否已经设法读取了服务器实际发送的所有数据？在没有返回的调用*之前*`messageData`的迭代中看起来像什么？

 ** * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-29T16:20:30.167

经过一番思考，我想出了一个解决方法。

```
sslStream.ReadTimeout = 100; //How much time does it takes for a processor to read and write 2048bytes to the buffer? 
```

不得不使用超时，似乎没有其他工作。修改了 Reader 以处理异常。

```
static string ReadMessage(SslStream sslStream)
{
    // Read the  message sent by the server.
    // The end of the message is signaled using the
    // "<EOF>" marker.
    byte[] buffer = new byte[2048];
    StringBuilder messageData = new StringBuilder();
    int bytes = -1;

    do
    {
        try
        {
            bytes = sslStream.Read(buffer, 0, buffer.Length);

        }
        catch (Exception ex)
        {
        }
        // Use Decoder class to convert from bytes to UTF8
        // in case a character spans two buffers.
        Decoder decoder = Encoding.ASCII.GetDecoder();
        char[] chars = new char[decoder.GetCharCount(buffer, 0, bytes)];
        decoder.GetChars(buffer, 0, bytes, chars, 0);
        messageData.Append(chars);
        // Check for EOF.
        if (messageData.ToString().IndexOf("\r\n") != -1)
        {
            break;
        }

    }
    while (bytes != -1);

    return messageData.ToString();
} 
```

虽然这有效，但这并不意味着它是一个好的答案。如果有人可以提供更好的答案，那就太好了。*

# facebook-graph-api - 通过 Graph API 访问上传到页面的视频

> ID：12161744
> 
> 赞同：-1
> 
> 时间：2012-08-28T14:39:31.090
> 
> 标签：facebook-graph-api

我需要获取用户上传到 Facebook 页面的视频。

我原以为它们会出现在[https://graph.facebook.com/me/videos/uploaded](https://graph.facebook.com/me/videos/uploaded)中，但似乎这只涵盖了我上传到我的个人资料中的视频，而不是页面。

我能找到这些显示的唯一地方是[https://graph.facebook.com/PageName/tagged](https://graph.facebook.com/PageName/tagged)，但是它们挤在所有其他东西中，我无法过滤以找到经过身份验证的用户的上传到页面。

有没有办法只获取特定用户的视频上传/标签到页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:15:03.330

好的，如果我们只是在这里讨论贴在墙上的视频，我想您可以通过查询[FQL`stream`表](https://developers.facebook.com/docs/reference/fql/stream/)获得该信息。

按以下方式过滤：

*   source_id：帖子所在页面的ID
*   actor_id：发布帖子的用户ID
*   类型：“128” - 已发布视频

有关视频的信息应在`attachment`列中。

# r - 如何避免 R 的 LSA 包中的 textmatrix 函数出错

> ID：12161745
> 
> 赞同：1
> 
> 时间：2012-08-28T01:46:52.820
> 
> 标签：r, kaggle, lsa

我正在参加[这个 Kaggle 比赛](http://www.kaggle.com/c/asap-sas)，我想知道是否有人熟悉R 中[LSA 包](http://cran.r-project.org/web/packages/lsa/index.html)中的***textmatrix***函数。

基本上，*textmatrix*函数接受一个目录作为参数，它将使用在指定目录中找到的所有文本文件创建一个 textmatrix。

不幸的是，*textmatrix*函数在遇到包含零项的文本文件时会抛出错误（例如，如果您使用停用词进行过滤，就会发生这种情况）。

有谁知道让 textmatrix***忽略***以零项结尾的文件的简单方法？或者是一种相对快速的方法来识别和删除这些文件？

蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:03:04.930

我不知道如何让它忽略空文件。我使用的一种解决方法是将语料库中尚未出现的单词添加到每个文件中。

优点：

*   每个文件都至少有一个单词，这样`textmatrix`就不会失败
*   每个文件中的同一个词不会影响单个文档的相关性
*   你知道根据textmatrix的单词数比原始文档中的单词数多一

坏处：

*   每个文件都变得与其他文件有点相似，因为它们都共享一个单词。

（注意：可能有我没有想到的缺点。）

# c# - Windows服务创建文件时拒绝访问路径

> ID：12161749
> 
> 赞同：3
> 
> 时间：2012-08-28T14:39:56.207
> 
> 标签：c#, windows-services

我无法在我的 Windows 服务中创建文件，这是错误

**错误在 onstart 方法中访问路径“C:\Windows\system32\BridgeServiceLog.txt”被拒绝。**

```
 protected override void OnStart(string[] args)
      {

            try
            {
                 Logger.InitLogFile("BridgeServiceLog.txt");
                 Trace.WriteLine(Logger.logSwitch.TraceInfo, "Trace Started");
                 Trace.WriteLineIf(Logger.logSwitch.TraceInfo, "OnStart Started");

                 _bridgeServiceEventLog.WriteEntry("new OnStart");
                 if (Vytru.Platform.Bridge.Configuration.LicenseValidetor.ValidCountAndTypeDevices())
                 {
                      SharedData.InitializeBridge();
                      // WsInitializeBridge();
                 }
                 else
                 {

                      this.Stop();
                      _bridgeServiceEventLog.WriteEntry("LicenseValidetor Error");
                 }
                 _bridgeServiceEventLog.WriteEntry("end Start");
            }
            catch (Exception e)
            {
                 Trace.WriteLineIf(Logger.logSwitch.TraceError, e.Message);
                 _bridgeServiceEventLog.WriteEntry("error In onstart method " + e.Message);
            }
            Trace.WriteLineIf(Logger.logSwitch.TraceInfo, "OnStart Ended");

      } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T14:41:59.987

服务用户帐户可能无权写入`C:\Windows\System32`（这是 Windows 服务的工作目录）。

无论如何，您不应该写入该文件夹。它适用于操作系统 - 而不是您的服务。

您可以使用[Environment.GetFolderPath](http://msdn.microsoft.com/en-us/library/14tx8hby.aspx)来获取合适的路径，以便以适用于任何计算机的方式写入日志文件等文件，而不仅仅是您自己的计算机。这是一个例子。

```
var companyPath = Path.Combine(
  Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData),
  "MyCompany"
);
var productPath = Path.Combine(companyPath, "MyProduct");
var logFilePath = Path.Combine(productPath, "BridgeServiceLog.txt"); 
```

您当然应该为`MyCompany`和使用合适的值`MyProduct`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T14:42:40.673

运行 Windows 服务时，默认工作文件夹是`<System drive>:\Windows\System32\`.
幸运的是，不是每个人都可以访问该文件夹。

有两种方法；将您的文件写入您有权访问的另一个文件夹，或以管理员权限运行您的服务。

我会推荐第一个选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:48:36.207

最简单的解决方案是去你要保存文件的文件夹，右键单击，属性，安全，添加一个新用户 IIS_Users 并授予写入权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-19T08:13:49.633

在 ProjectInstaller 上使用 LocalSystem 帐户

# vb.net - Datagridview 有只读行，还想去行输入事件吗？

> ID：12161751
> 
> 赞同：0
> 
> 时间：2012-08-28T14:39:58.647
> 
> 标签：vb.net, datagridview

当行是只读的时，我的行输入事件不会触发。当用户选择一行时我需要一个事件，以便我可以填充另一个网格。行输入似乎没有触发有没有办法让 rowenter 触发或我可以使用的不同事件？

有人建议我将行中的每个单元格设置为只读而不是行，这可能会修复它，这会改变很多程序，我觉得它仍然无法工作，我不想这样做，除非有人可以确认它会起作用。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:05:36.147

您可以尝试使用数据网格的单击事件并从那里获取选定的行属性吗？抱歉，如果没有帮助，值得一试！

希望能帮助到你！

# c - C中生产者-消费者的线程安全环形缓冲区

> ID：12161754
> 
> 赞同：4
> 
> 时间：2012-08-28T14:40:06.427
> 
> 标签：c, data-structures, buffer

在 C 语言中，我有**几个线程产生** `long`值，**一个线程消耗**它们。因此，我需要一个固定大小的缓冲区，以与[维基百科实现](http://en.wikipedia.org/wiki/Circular_buffer#Difficulties)类似的方式实现，以及以线程安全方式访问它的方法。

在一般层面上，应满足以下条件：

*   当添加到一个完整的缓冲区时，线程应该被阻塞（不覆盖旧值）。
*   消费者线程应该被阻塞直到缓冲区满——它的工作有很高的固定成本，应该做尽可能多的工作。（这是否需要双缓冲解决方案？）

我想使用一个尝试过的实现，最好来自一个库。有任何想法吗？

* * *

动机与解释：

我正在编写处理删除作为[标记](http://docs.oracle.com/javase/6/docs/platform/jvmti/jvmti.html#Heap)保存在堆对象中的[全局引用的 JNI 代码。](http://java.sun.com/docs/books/jni/html/refs.html)

当一个`ObjectFree`JVMTI 事件发生时，我得到一个`long`代表我需要释放的全局引用的标记`DeleteGlobalRef`。为此，我需要一个`JNIEnv`参考 - 获取它的成本**非常**高，所以我想缓冲请求并一次删除尽可能多的请求。

可能有很多线程接收`ObjectFree`事件，并且会有一个线程（我的）进行引用删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:23:26.177

您可能需要考虑条件。看看消费者的这段代码：

```
while( load == 0 )
    pthread_cond_wait( &notEmpty, &mutex ); 
```

它的作用是检查负载（存储列表中元素数量的位置）是否为零，如果为零，它将等到生产者生成新项目并将其放入列表中。
您应该为生产者实现相同的条件（当它想要将项目放入完整列表时）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:06:00.550

您可以使用单个缓冲区，在访问时使用互斥锁。您需要跟踪使用了多少元素。对于“信号”，您可以使用条件变量。生产者线程在将数据放入队列时触发的一种；这会释放消费者线程来处理队列，直到为空。另一个由消费者线程在清空队列时触发；这向任何阻塞的生产者线程发出信号以填充队列。对于消费者，我建议在释放锁之前尽可能锁定队列并取出（以避免过多的锁），特别是因为出队操作简单快捷。

**更新**
一些有用的链接：
* [Wikipedia 解释](http://en.wikipedia.org/wiki/Monitor_%28synchronization%29)
* [POSIX Threads](https://computing.llnl.gov/tutorials/pthreads/#ConditionVariables)
* [MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682052%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T18:32:29.793

两种可能：

a) malloc() 一个 *Buffer 结构，带有一个数组来保存一些 long 和一个索引 - 不需要锁定。让每个生产者线程 malloc 自己的 *Buffer 并开始加载它。当生产者线程填充最后一个数组位置时，将 *Buffer 排队到生产者-消费者队列中的消费者线程，并立即 malloc() 一个新的 *Buffer。消费者获取 *Buffers 并处理它们，然后释放它们，（或将它们排在其他地方，或将它们推回池中以供生产者重用）。这避免了缓冲区本身的任何锁定，只留下 PC 队列上的锁定。问题是，仅偶尔生成 long 的生产者将不会处理他们的数据，直到他们的 *Buffer 被填满，这可能需要一些时间，（在这样的线程中，您可以在数组变满之前推出 Buffer。

b) 用一个数组声明一个 Buffer 结构来保存一些 long 和一个索引。使用互斥锁/futex/CS 锁进行保护。malloc() 只是一个共享的 *Buffer 并让所有线程获得锁，推动它们的长并释放锁。如果一个线程推入最后一个数组位置，则将 *Buffer 排队到生产者-消费者队列上的消费者线程，立即 malloc 一个新的 *Buffer 然后释放锁。消费者获取 *Buffers 并处理它们，然后释放它们，（或将它们排在其他地方，或将它们推回池中以供生产者重用）。

# javascript - 通过原型/构造函数从复选框输出值

> ID：12161757
> 
> 赞同：1
> 
> 时间：2012-08-28T14:40:08.710
> 
> 标签：javascript

我正在尝试从表单元素输出值，我设法从选择元素输出单个值，但是如果选择了多个复选框，我如何输出多个值。看看有没有人可以帮忙？也许我需要通过数组传递复选框值！

```
<head><title></title></head>
<style>
#box{
border:solid 1px red;
height:16px;

}
</style>
<body>
size : <select id = "test1">
<option>Large</option>
<option>Medium</option>
<option>small</option>

</select>

Base : <select id = "test2">
<option>Thick</option>
<option>Thin</option>
</select>

Tomato:<Input type ="checkbox">
Onion:<Input type ="checkbox">
Paprika:<Input type ="checkbox">

<input type="submit" value = "Submit" onclick ="buttonClick()" />
<br /> <br />
<div id ="box"></div>

<script type = "text/javascript">

function Pizza(s,t){
this.size = s;
this.type = t;
}

Pizza.prototype.myPizza = function(){

document.getElementById('box').innerHTML = "This is a " + this.size + " Pizza with " +  this.type + " base and the toppings include: ";

}
function buttonClick(){
x = document.getElementById('test1').value;
y = document.getElementById('test2').value;
Tuesday = new Pizza(x,y);
Tuesday.myPizza();
}
</script>
</body>
</html> 
```

代码也可以在这里查看：http: [//jsfiddle.net/bhEeZ/2/](http://jsfiddle.net/bhEeZ/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:43:50.977

这应该这样做：**[jsFiddle example](http://jsfiddle.net/j08691/bhEeZ/3/)**

```
function Pizza(s, t, tops) {
    this.size = s;
    this.type = t;
    this.toppings = tops;
}
Pizza.prototype.myPizza = function() {
    document.getElementById('box').innerHTML = "This is a " + this.size + " Pizza with " + this.type + " base and the toppings include: " + this.toppings.join(', ');
};
function buttonClick() {
    x = document.getElementById('test1').value;
    y = document.getElementById('test2').value;
    z = new Array();
    var chk_arr = document.getElementsByName("topping[]");
    for (var i = 0; i < chk_arr.length; i++) {
        if (document.getElementsByName("topping[]")[i].checked) z.push(document.getElementsByName("topping[]")[i].value);
    }
    Tuesday = new Pizza(x, y, z);
    Tuesday.myPizza();
}​ 
```

# asp.net - 如何更改href的域

> ID：12161764
> 
> 赞同：1
> 
> 时间：2012-08-28T14:40:37.363
> 
> 标签：asp.net, .net, asp.net-mvc-3

我有一个具有一个域的项目和另一个具有不同域的项目。我想在第一个项目上有一个链接到第二个项目的按钮。我怎样才能做到这一点？我目前只知道如何使用 href 更改控制器和操作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:43:21.877

没有内置帮助程序允许您跨不同的 ASP.NET 项目生成链接。url 帮助程序仅用于生成内部控制器操作的链接。ASP.NET 路由仅适用于当前项目。

您将必须使用绝对 url 或编写自定义帮助程序，例如可以使用您将在 web.config 中配置的一些基本 url，这些基本 url 将与您需要到达的实际相对 url 连接。

# c++ - C++ 数组的 matlab 样式索引

> ID：12161768
> 
> 赞同：8
> 
> 时间：2012-08-28T14:40:48.583
> 
> 标签：c++, matlab, indexing

我想知道以下matlab习语最有效的c++实现是什么。

假设我在 matlab 中有 3 个向量，x，y 和 idx。

```
x = [13,2,5.5,22,107]
y = [-3,100,200]
idx = [1,2,5] 
```

我想用 y 的内容替换 x 的位置 1,2 和 5。在matlab我做

```
x[idx] = y 
```

在 c++ 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-28T14:41:24.867

[Armadillo](http://arma.sf.net)库可能是最接近的，因为它的目标之一是让习惯 Matlab 的人更容易。

这是一个简短的示例（并且`uvec`是无符号整数向量的 typdef）

```
// set four specific elements of X to 1
uvec indices;
indices << 2 << 3 << 6 << 8;

X.elem(indices) = ones<vec>(4); 
```

显然，右侧可以是与索引相同维度的任何其他向量。

但是很少有语言强加的限制是您无法克服的：

*   C++ 级别的从零开始的索引（您可以更改，但很少有 C/C++ 程序员会认为这是个好主意）
*   某些运营商，包括`[`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T14:43:11.080

循环似乎很简单，尽管可以使用辅助函数使其更简单。

```
// helper function to get the size of an array
template<typename T, size_t S>
constexpr size_t size(T (&)[S])
{
  return S;
}

// loop
for (size_t i = 0; i < size(idx); ++i) x[idx[i]] = y[i]; 
```

当然，在这里你应该检查它`y`是否足够大：

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T15:14:16.083

如果你想在非常基本的 C++ 中使用它（没有优雅的奖品）试试这个：

```
double x[] = { 13.0, 2.0, 5.5, 22.0, 107.0 };
double y[] = { -3.0, 100.0, 200.0 };
size_t idx[] = { 1, 2, 5 };

for ( size_t i = 0; i < sizeof(x)/sizeof(double); ++i )
    cout << x[i] << " ";
cout << endl;

// Make a mutable copy of x
double x1[ sizeof(x)/sizeof(double) ];
std::copy( x, x + sizeof(x)/sizeof(double), x1 );

// The transformation
for ( size_t i = 0; i < sizeof(idx)/sizeof(double); ++i )
    x1[idx[i]] = y[i];

for ( size_t i = 0; i < sizeof(x)/sizeof(double); ++i )
    cout << x1[i] << " ";
cout << endl; 
```

请注意非常漂亮，但它确实提供了以下内容：

```
13 2 5.5 22 107 

-3 100 5.5 22 200 
```

（请注意，我假设索引从 1 而不是 0 in 开始`idx`）

# php - 将会员跟踪代码添加到打开购物车？

> ID：12161769
> 
> 赞同：0
> 
> 时间：2012-08-28T14:40:51.303
> 
> 标签：php, opencart

我最近在一个附属网络上注册了我的网站，该网络允许博客以固定价格写关于我的文章。但是我在正确添加代码时遇到了一些困难。

这是我应该添加的代码： `<iframe src="http://track.domain.com/?trackID=[CookieID]&orderValue=[orderValue]&orderID=[orderID]&programID=319" scrolling="no" frameborder="0" width="1" height="1"></iframe>`

所以这是我尝试在成功页面中添加的代码，这是代码应该发送到附属网络的位置（如果通过给定链接访问该页面）。请注意，我尝试发送测试订单只是为了确保它已添加到我的个人资料中。

```
<?php 
class ControllerCheckoutSuccess extends Controller { 
public function index() { 

        $adrecordPixel = '<iframe src="http://track.adrecord.com/?trackID=' . $_COOKIE['trackID'] . '&orderValue=555555&orderID=5555555&programID=319&test=' . $this->session->data['order_id'] . '" scrolling="no" frameborder="0" width="1" height="1"></iframe>'; 
```

和

```
if ($this->customer->isLogged()) {
        $this->data['text_message'] = sprintf($this->language->get('text_customer'), $this->url->link('account/account', '', 'SSL'), $this->url->link('account/order', '', 'SSL'), $this->url->link('account/download', '', 'SSL'), $this->url->link('information/contact'));

        $this->data['text_message'] = $adrecordPixel; 
```

但它不起作用:(

任何人都知道我该怎么做？

我将每 5 分钟刷新一次以检查答案，我会尽快回复。如果有人想知道网址，请询问。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:56:57.880

你为什么用这一行写 $text_message 变量：

```
$this->data['text_message'] = $adrecordPixel; 
```

只需在控制器 index() 函数中自己的变量中准备 html 并传递它：

```
$this->data['pixel'] = '<iframe src="http://track.adrecord.com/?trackID=' . $_COOKIE['trackID'] . '&orderValue=555555&orderID=5555555&programID=319&test=' . $this->session->data['order_id'] . '" scrolling="no" frameborder="0" width="1" height="1"></iframe>'; 
```

然后在您的视图中回显 $pixel 。

# pdf - 使用 iTextSharp 删除或隐藏 PDF 文档中的字段

> ID：12161770
> 
> 赞同：1
> 
> 时间：2012-08-28T14:40:58.367
> 
> 标签：pdf, itextsharp, livecycle, xfa

有没有办法使用 iTextSharp 库删除或隐藏 PDF 文档中的字段。对于以 LiveCycle（xfa 格式）创建的 PDF 模板，iTextSharp 似乎无法执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:04:10.690

我也找不到解决方法，我最终创建了多个模板，其中包含在每种情况下我需要删除的字段。不是最好的处理方法，但它会起作用！

[http://pthok.wordpress.com/2010/12/16/itextsharp-removing-fields-from-pdf-templates/](http://pthok.wordpress.com/2010/12/16/itextsharp-removing-fields-from-pdf-templates/)

# html - sp_send_dbmail - 将表格中的行格式化为红色以发出警报

> ID：12161771
> 
> 赞同：2
> 
> 时间：2012-08-28T14:40:58.713
> 
> 标签：html, tsql, sql-server-2008-r2, sp-send-dbmail

我在此 MSDN 页面上使用类似于示例 C 的内容：http: [//msdn.microsoft.com/en-us/library/ms190307.aspx](http://msdn.microsoft.com/en-us/library/ms190307.aspx)

```
DECLARE @tableHTML  NVARCHAR(MAX) ;

SET @tableHTML =
    N'<H1>Work Order Report</H1>' +
    N'<table border="1">' +
    N'<tr><th>Work Order ID</th><th>Product ID</th>' +
    N'<th>Name</th><th>Order Qty</th><th>Due Date</th>' +
    N'<th>Expected Revenue</th></tr>' +
    CAST ( ( SELECT td = wo.WorkOrderID,       '',
                    td = p.ProductID, '',
                    td = p.Name, '',
                    td = wo.OrderQty, '',
                    td = wo.DueDate, '',
                    td = (p.ListPrice - p.StandardCost) * wo.OrderQty
              FROM AdventureWorks.Production.WorkOrder as wo
              JOIN AdventureWorks.Production.Product AS p
              ON wo.ProductID = p.ProductID
              WHERE DueDate > '2004-04-30'
                AND DATEDIFF(dd, '2004-04-30', DueDate) < 2 
              ORDER BY DueDate ASC,
                       (p.ListPrice - p.StandardCost) * wo.OrderQty DESC
              FOR XML PATH('tr'), TYPE 
    ) AS NVARCHAR(MAX) ) +
    N'</table>' ;

EXEC msdb.dbo.sp_send_dbmail @recipients='danw@Adventure-Works.com',
    @subject = 'Work Order List',
    @body = @tableHTML,
    @body_format = 'HTML' ; 
```

我有一个名为 Rating 的列，根据我自己的逻辑设置为“好”或“坏”。我想让所有评级为“坏”的行都有红色背景。我知道如何在 HTML 中执行此操作，但不确定如何使用此示例中演示的“FOR XML”查询来执行此操作。似乎我必须为某些 TD 语句添加属性，而不是其他语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T05:30:36.797

你不能直接做。需要一点“手工制作”的 HTML。这是一种可以使用的方法。

在单独的 CTE 中选择好记录和坏记录并附加“td”标签。对于坏的也附加样式信息。

然后附加“tr”标签并组合（UNION）数据行并使用 xmlpath 将它们连接起来。

为简单起见，我删除了按列排序，但您可以在 CTE 中选择它们并稍后对结果进行排序。

注意：我已经测试了输出 HTML，它可以工作，但我不是 HTML 人，所以不要介意 HTML 标签中是否有任何错误。请随时更正它。

```
DECLARE @tableHTML  NVARCHAR(MAX) 
,@Data NVARCHAR (MAX)=''
SET @tableHTML =
N'<H1>Work Order Report</H1>' +
N'<table border="1">' +
N'<tr><th>Work Order ID</th><th>Product ID</th>' +
N'<th>Name</th><th>Order Qty</th><th>Due Date</th>' +
N'<th>Expected Revenue</th></tr>' 

 ;WITH CTE_Good AS
 (
 SELECT          HTMLRowData=    N'<td>'+STR(wo.WorkOrderID)+N'</td>'
                        +N'<td>'+STR(p.ProductID)+N'</td>' 
                        +N'<td>'+p.Name+N'</td>' 
                        +N'<td>'+STR(wo.OrderQty)+N'</td>' 
                        +N'<td>'+CONVERT(VARCHAR(10),wo.DueDate,101)+N'</td>' 
                        +N'<td>'+STR((p.ListPrice - p.StandardCost) * wo.OrderQty)+N'</td>' 
      FROM AdventureWorks.Production.WorkOrder as wo
      JOIN AdventureWorks.Production.Product AS p
      ON wo.ProductID = p.ProductID
      WHERE DueDate > '2004-04-30'
        AND DATEDIFF(dd, '2004-04-30', DueDate) < 2
        --AND Rating = 'Good'
  )
,CTE_Bad AS 
  (
   SELECT        HTMLRowData=    N'<td><p style="color:red">'+STR(wo.WorkOrderID)+N'</p></td>'
                        +N'<td><p style="color:red">'+STR(p.ProductID)+N'</p></td>' 
                        +N'<td><p style="color:red">'+p.Name+N'</p></td>' 
                        +N'<td><p style="color:red">'+STR(wo.OrderQty)+N'</p></td>'
                        +N'<td><p style="color:red">'+CONVERT(VARCHAR(10),wo.DueDate,101)+N'</p></td>' 
                        +N'<td><p style="color:red">'+STR((p.ListPrice - p.StandardCost) * wo.OrderQty)+N'</p></td>'
      FROM AdventureWorks.Production.WorkOrder as wo
      JOIN AdventureWorks.Production.Product AS p
      ON wo.ProductID = p.ProductID
      WHERE DueDate > '2004-04-30'
      AND DATEDIFF(dd, '2004-04-30', DueDate) < 2
      --AND Rating = 'Bad'

  )

SELECT @Data=(SELECT  HTMLRows 
              FROM    (
        SELECT N'<tr>'+HTMLRowData+N'</tr>' AS HTMLRows FROM CTE_Good
        UNION  SELECT N'<tr>'+HTMLRowData+N'</tr>' AS HTMLRows FROM CTE_Bad 
       ) mi            
     FOR XML PATH(''), TYPE
       ).value('/', 'NVARCHAR(MAX)')

  SET @tableHTML=@tableHTML+@Data+N'</table>'

--SELECT @tableHTML

EXEC msdb.dbo.sp_send_dbmail @recipients='danw@Adventure-Works.com',
@subject = 'Work Order List',
@body = @tableHTML,
@body_format = 'HTML' ; 
```

# c - 什么时候需要动态内存？

> ID：12161774
> 
> 赞同：13
> 
> 时间：2012-08-28T14:41:02.010
> 
> 标签：c, memory, malloc, free

> **可能重复：**
> [Malloc 或普通数组定义？](https://stackoverflow.com/questions/11241014/malloc-or-normal-array-definition)

我们了解到 C 和动态变量中存在动态内存：

```
#include <stdio.h>
int a = 17;
int main(void)
{
  int b = 18; //automatic stack memory
  int * c;
  c = malloc( sizeof( int ) ); //dynamic heap memory
  *c = 19;
  printf("a = %d at address %x\n", a, &a);
  printf("b = %d at address %x\n", b, &b);
  printf("c = %d at address %x\n", *c, c);
  free(c);  
  system("PAUSE");  
  return 0;
} 
```

我如何知道要使用哪种类型的内存？我什么时候需要一个或另一个？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-28T14:50:51.220

在以下情况下使用动态：

1.  当你需要大量内存时。典型的堆栈大小是 1 MB，所以任何大于 50-100KB 的东西最好动态分配，否则你就有崩溃的风险。一些平台可以有这个限制甚至更低。

2.  当函数返回后内存必须存在。函数结束时堆栈内存被破坏，动态内存在需要时被释放。

3.  当您构建大小未知（即可能变大）的结构（如数组或图形）时，会动态变化或难以预先计算。动态分配允许您的代码在任何时候并且仅在您需要时自然地逐块请求内存。不可能在`for`循环中重复请求越来越多的堆栈空间。

否则首选堆栈分配。它更快并且不会泄漏。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T14:44:13.080

当仅在运行时事先不知道分配的大小时，您可以使用动态内存。

例如，您要求用户输入名称（最多可以说 10 个名称）并将它们存储在字符串数组中。由于您不知道用户将提供多少名称（仅在运行时），因此只有在知道要分配多少名称后才必须分配数组，因此您将使用动态分配。

您当然可以使用固定大小的 10 数组，但是对于较大的数量，这将是浪费

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T14:44:45.130

如果您不确切知道程序在编译时需要分配多少内存，请使用动态内存**分配**。

`int a[n]`例如将您的数组大小限制为 n。此外，无论您是否使用它，它都会分配 nx 4 字节的内存。这是在堆栈上分配的，并且变量 n**必须**在编译时已知。

`int *a = (int *)malloc(n * sizeof (int))`另一方面，在运行时分配，在堆上，并且`n`只需要在运行时知道，不一定在编译时知道。

这还可以确保您分配的内存与您真正需要的内存一样多。但是，当**您**在运行时分配它时，必须由您使用`free`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-28T14:46:51.093

您应该在以下情况下使用动态内存：

*   如果您希望您的对象在创建它的范围之外持续存在。
*   通常，堆栈大小是有限的，因此如果您的对象占用大量内存，那么您可能会用完堆栈空间，在这种情况下，通常会进行动态内存分配。

请注意，c99 标准在 C 中引入了***可变长度数组（VLA）***，因此您无需使用动态内存分配，因为您事先不知道数组尺寸（除非`#2`上面提到的是这种情况）

最好尽可能避免动态内存分配，因为这意味着***显式管理内存***，而不是语言提供的***自动机制***。显式内存管理意味着您容易犯更多错误，这可能会导致灾难性后果。
话虽如此，动态内存分配不能总是避免，必须在必须使用时使用（上面提到的两种情况）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-28T14:50:14.953

如果您可以在没有动态分配的情况下进行编程，请不要使用它！
但是有一天你会被阻塞，解除阻塞的唯一方法就是使用动态分配，然后你就可以使用它了

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-28T15:00:22.663

Als 提出了一个有趣的观点，即如果您的对象需要在创建它的范围之外持续存在，您应该从堆中分配内存。在上面的代码中，您根本不需要从堆中分配内存。你可以像这样重写它：

```
#include <stdio.h>
int a = 17;
int main(void)
{
    int b = 18; //automatic stack memory
    int c[1]; // allocating stack memory. sizeof(int) * 1
    c[0] = 19;
    printf("a = %d at address %x\n", a, &a);
    printf("b = %d at address %x\n", b, &b);
    printf("c = %d at address %x\n", c[0], c);
    system("PAUSE");  
    return 0;
} 
```

事实上，作为 C99 标准（[可变长度数组](http://en.wikipedia.org/wiki/Variable-length_array "变长数组")）的一部分，您可以使用`[]`运算符在堆栈上为数组分配动态空间，就像通常创建数组一样。您甚至不需要在编译时知道数组的大小。编译器只会`x86`根据请求的分配空间调整 esp 寄存器（对于机器），你就可以开始了。

# sql - 如何在 Oracle 中调整输出参数的日期时间格式？

> ID：12161775
> 
> 赞同：0
> 
> 时间：2012-08-28T14:41:02.730
> 
> 标签：sql, oracle

我在 oracle 中有一个名为 outTime 的输出参数，类型为 DATE。其格式设置为 yyyy-mm-dd，当我选择表格时，我需要能够包含表格中的时间。

我不断收到错误消息：日期格式图片在转换整个输入字符串之前结束。

这是插入语句。

```
SELECT TO_CHAR(Table_Time, 'YYYY-MM-DD HH24:MI:SS') into outTime
FROM Table_One; 
```

out 参数声明为

```
outTime OUT DATE; 
```

在其他过程包中的存储过程中。

我一直在寻找全局设置格式的方法，但我只需要为此实例设置格式。

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:47:26.187

A`DATE`没有格式。日期的字符串表示具有格式，但 a`DATE`没有。

如果`Table_Time`是`VARCHAR2`格式中的（日期的字符串表示形式）`yyyy-mm-dd hh24:mi:ss`，那么您将希望使用`TO_DATE`将字符串转换为 a （我假设在此示例中`DATE`只有一行，否则将引发 a或异常。`table_one``SELECT ... INTO``no_data_found``too_many_rows`

```
SELECT TO_DATE(Table_Time, 'YYYY-MM-DD HH24:MI:SS') 
  into outTime
  FROM Table_One; 
```

如果`Table_Time`是 a `DATE`，您只需将其分配给`outTime`

```
SELECT Table_Time
  into outTime
  FROM Table_One; 
```

当您想要显示`outTime`时，您需要将 转换`DATE`为日期的字符串表示形式 (a `VARCHAR2`)。此时，您可以使用该`TO_CHAR`功能。

# sql - 删除重复和更新空值

> ID：12161776
> 
> 赞同：1
> 
> 时间：2012-08-28T14:41:05.747
> 
> 标签：sql, sql-server, null, duplicates

我刚刚负责删除数据库中的所有重复值。很简单。但他们也希望我检查一下在该记录的先前条目中是否有任何 Null 值不是 Null。

因此，假设我们有用户 123。无论出于何种原因，用户 123 都没有列出邮政编码。但是在过去的条目中，他的邮政编码为 55555。我应该使用过去条目中的邮政编码更新最新条目，然后删除过去的条目。只留下一个用户 123 的条目并且邮政编码为 55555。

我只是不确定如何进行更新部分。有人有什么建议吗？
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:59:39.557

以下是如何进行更新。它找到 zip 的最后一个值，然后根据需要更新该字段：

```
with lastval as (
    select *
    from (select id, zip, row_number() over (partition by id order by datecreated desc) as seqnum
          from t
          where zip is not null
         ) t
    where seqnum = 1
)
update t
    set t.zip = lastval.zip
    from lastval
    where t.id = lastval.id 
```

但是，我建议您使用所需的数据创建一个新表。不要同时删除和更新 zilion 行，使用以下查询创建表：

```
select *
from (select t.*, row_number() over (partition by id order by datecreated desc) as seqnum
      from t
      where zip is not null
     ) t
where seqnum = 1 
```

并将行插入到新表中。

而且，还有一个建议。问另一个问题，更好地了解表中的字段是什么样的，以及您要查找哪些字段的最后一个值。这将为更好的解决方案提供更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T15:06:51.227

您可以使用类似于以下的语句：

```
update t1
set t1.address = dt.address,
    t1.city = dt.city,
    ... and so on ...
from your_table as t1
inner join 
(
select 
    max(id) as id,
    companyname,
    max(address) as address,
    max(city) as city,
    ... and so on ...
    from your_table
    group by companyname -- your duplicate detection goes here
) dt
on dt.id = t1.id 
```

这样，您就可以填补副本中的所有空白。然后你只需要删除重复项。

# android - Android 应用小部件未更新

> ID：12161778
> 
> 赞同：2
> 
> 时间：2012-08-28T14:41:11.923
> 
> 标签：android, android-widget, android-manifest

我已经看到其他几个关于小部件未更新的问题，但所有这些问题都是因为 updatePeriodMillis 配置为小于 30 分钟的值，而我已将我的设置为 1 小时并且现在检查了几个小时。

我已经从我的实际小部件项目开始了一个单独的项目，只是为了测试更新，但我一无所获。

该小部件仅使用 currentTimeMillis() 更新 TextView。

AndroidManifest.xml

```
 <receiver android:name="TestWidget" android:exported="false">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE"/>
        </intent-filter>
        <meta-data android:resource="@xml/widget" android:name="android.appwidget.provider"/>
    </receiver> 
```

小部件.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
     android:initialLayout="@layout/widget"
     android:minHeight="40dp"
     android:minWidth="250dp"
     android:updatePeriodMillis="3600000" >
 </appwidget-provider> 
```

第一次调用时一切正常，但永远不会再次调用 onUpdate。

有什么建议么？

编辑：

TestWidget.class 仅覆盖 onUpdate

```
@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {

    final int N = appWidgetIds.length;

    for (int i = 0; i < N; i++) {
        // Inflate the layout
        RemoteViews v = new RemoteViews(context.getPackageName(),
                R.layout.widget);
        v.setTextViewText(R.id.text1, Double.toString(Math.random()));
        v.setTextViewText(R.id.text2,
                Long.toString(System.currentTimeMillis()));

        // Update the widget
        appWidgetManager.updateAppWidget(appWidgetIds[i], v);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T08:11:47.250

我想为这个不必要的问题向社区道歉，因为最终我的手机似乎出了问题（考虑到我重新启动了这个东西）或者我只是有点不耐烦。

看起来，框架开始调用 onUpdate 确实需要几个小时。在过去的 3 个小时里（在那之前我正在睡觉），我可以看到更新非常一致。

我没有删除问题，以防万一有人遇到同样的问题，您真的需要等待！

谢谢。

# ruby - 有没有办法编写一个在最大设定时间内运行一次迭代的 Ruby 循环？

> ID：12161783
> 
> 赞同：3
> 
> 时间：2012-08-28T14:41:25.170
> 
> 标签：ruby, loops, timer

我希望创建一个最多运行一段时间的 Ruby (MRI 1.9.3) 循环，一旦该时间结束，它就会进入循环的下一次迭代。

例如，这就是我希望实现的目标：

```
timer = Timer.new
while foo
  timer.after 5 do # The loop on foo only gets to run for 5 seconds
    next
  end

  # Do some work here
end 
```

到目前为止，我发现了名为 Timers ( [https://github.com/tarcieri/timers](https://github.com/tarcieri/timers) ) 的 tarcieri 的 gem，这是我在上面的代码中试图模拟的，但我的实现并没有给出我期望的行为，如果我的工作需要更长的时间，那么循环将在 5 秒后进入下一次迭代。有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-28T14:49:52.387

```
require 'timeout'
timeout_in_seconds = 5
while foo
  begin
    Timeout.timeout(timeout_in_seconds) do
      # Do some work here
    end
  rescue Timeout::Error
    next
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T14:50:51.463

自从我刷掉我的 Ruby 技能已经有一段时间了，但我相信你可以使用 timeout 库来做到这一点。

```
require 'timeout'

while foo
    Timeout.timeout(5) do
        work()
    end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-10T22:44:50.747

你也可以试试这个：

```
time = 60
time_start = Time.now
begin      
      time_running = Time.now - time_start
      #You_code_goes_here
end until (time_running.to_i >= time) 
```

该循环将一直发生，直到`time_running`var 等于或大于“60”。

# arduino - Arduino 串行数据解析

> ID：12161784
> 
> 赞同：5
> 
> 时间：2012-08-28T14:41:36.773
> 
> 标签：arduino

我正在编写一个应用程序来通过蓝牙用我的 Android 手机控制我的机器人，一切顺利，数据得到回显和验证，但我在协议方面遇到了一些问题，特别是我希望我的机器人的轮子在我发送时转动一个命令，例如`s,10,100`or `s,-30,-10`...（以百分比表示的值）。

我的问题是，当我想在我的Arduino上解析我的轮速命令时，我必须从最多*4 个*单独解析`bytes`为到-100？`int``s,-100,-100``setSpeed(left, right);``left``right`

我知道我可以单独分析每个字节并将它们放在一起以获得一个整数，但这不是很优雅，并且可能已经有更好的解决方案，不幸的是我还没有找到它。

# 编辑

这是用于解析我的命令的 Arduino 函数：

```
void parseCommand(char* command, int* returnValues)
{
  // parsing state machine
  byte i = 2, j = 0, sign = 0;
  int temp = 0;
  while(*(command + i) != '\0')
  {
    switch(*(command + i))
    {
      case ',':
        returnValues[j++] = sign?-temp:temp;
        sign = 0;
        temp = 0;
        break;
      case '-':
        sign = 1;
        break;
      default:
        temp = temp * 10 + *(command + i) - 48;
    }
    i++;
  }
  // set last return value
  returnValues[j] = sign?-temp:temp;
} 
```

`s,100,-100`在解析类似（必须`\0`终止）的内容时，您可以这样称呼它：

```
char serialData[16];
void loop()
{
  if(Serial.available() > 0)
  {
    Serial.readBytesUntil('\0', serialData, 15);
    switch(serialData[0])
    {
      case 's':
        int speed[2];
        parseCommand(serialData, speed);
        setSpeed(speed[0], speed[1]);
        break;
    }
    // always echo
    Serial.write(serialData);
    // end of message is maked with a \0
    Serial.print('\0');

    // clear serialData array
    memset(serialData, 0, sizeof(serialData));
  }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T14:47:48.887

只需将逐个字符读入状态机即可。它简单而高效。

要逐位读取数字，请执行以下操作：从零开始。对于每个数字，将数字乘以十并添加数字的值。因此，例如，读取 97 将像这样工作：

1.  你读入一个没有前面数字的数字，你从 0 开始。

2.  你读入 9 并计算 (0*10)+9 -> 9

3.  你读入 7 并计算 (9*10)+7 -> 97

4.  你读取一个非数字，你输出 97。

这是一个更完整的例子`s,10,100`：

1.  您从“准备读取命令状态”开始。

2.  你读“s”，“s”是命令。您切换到“准备阅读第一个逗号”状态。

3.  你读了第一个逗号，你就切换到“准备找出第一个参数的符号”状态。

4.  你读了一个数字。由于这不是“-”，因此第一个参数是正数。您将第一个数字设置为数字的值 1。您现在处于“读取第一个数字”状态。

5.  您读取了一个数字 0。您将第一个数字设置为 1*10+0 -> 10。您仍处于“读取第一个数字”状态。

6.  你读了一个逗号。您现在处于“准备找出第二个参数的符号”状态。

7.  你读到了 1。第二个数字是正数（因为这不是“-”）。您将第二个数字设置为 1。您处于“读取第二个数字”状态。

8.  您读取 0。第二个数字现在设置为 1x10+0 -> 10。您仍处于“读取第二个数字”状态。

9.  您读取 0。第二个数字现在设置为 10x10+0 -> 100。您仍处于“读取第二个数字”状态。

10.  你读到了行尾。你执行你的结果：命令是“s”，第一个数是正数，第一个数是10，第二个数是正数，第二个数是100。

11.  您切换回“准备读取命令”状态。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T17:31:06.433

我喜欢[David Swartz](https://stackoverflow.com/users/721269/david-schwartz)的回答，但我想我会扮演魔鬼的拥护者。

以二进制形式读取数据可能很优雅，这取决于您需要用它做什么。

在以下示例中，从串行读取数据，直到它看到二进制分隔符`0X7F`。读取的字节存储在`inData`char 数组中。查看文档[`Serial.readBytesUntil()`](http://arduino.cc/en/Serial/ReadBytesUntil)

```
char inData[16];
int bRead;
bRead = Serial.readBytesUntil(0x7F,inData,4); 
```

然后可以将该字节转换为整数或以其他方式进行操作。请记住，最大值为 +/-126，因为这是一个有符号字符（127 是一个分隔符，不会被视为一个值）。

您可以通过以下方式访问这些值：

```
Serial.print("Bytes Read: ");
Serial.println(bRead);
Serial.println("First Byte");
Serial.println((int)inData[0]);
Serial.println(
            map((int)inData[0],0,126,0,1024)
);
Serial.println("Second Byte");
Serial.println((int)inData[1]); 
```

我使用以下 bash 命令对此进行了测试（确保正确设置了串行速度之后）：

```
echo -ne '\x01\x02\x7F' > /dev/ttyACM0 
```

我写的一些**粗略的**示例代码可以在**[这里找到](http://code.google.com/p/power-wheelino/source/browse/trunk/0.1a/server/linux/MEGA2560_SerialRead/main.cpp)**

# php - Zend 查询更新

> ID：12161786
> 
> 赞同：0
> 
> 时间：2012-08-28T14:41:45.677
> 
> 标签：php, mysql, zend-framework

我不想进行 zend 更新查询。

我正在查看[**zend 文档**](http://framework.zend.com/manual/en/zend.db.adapter.html) ，但没有看到任何我想要的示例。

这个问题是否有人可以帮助我进行查询。

我想进行下一个查询：

```
Update cars set active = 0 
Where id in (SELECT idCar FROM UserCars Where idUser=3) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T15:29:37.353

也许更多 Zendy 方式：

```
$idUser = 3;
$sub_select
  = $db->select()
       ->from('UserCars', array('id'))
       ->where('idUser = ?', $idUser);

$updated_rows 
  = $db->update('cars', 
        array('active' => 0),
        "id IN ($sub_select)" 
    ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T15:09:55.010

Simplest way to run any complex query. There can be some better ways to do same.

```
$sql = "Update cars set active = 0 
Where id in (SELECT idCar FROM UserCars Where idUser=3)";
$query = $this->getDbTable()->getAdapter()->query($sql, $data);
$query->execute(); 
```

Try this too

```
$data = array { 'active' = '0' };
$where = "id in (SELECT idCar FROM UserCars Where idUser=3)";
$db->update($data, $where); 
```

# maven - TinyRadius Maven 存储库

> ID：12161794
> 
> 赞同：0
> 
> 时间：2012-08-28T14:42:14.710
> 
> 标签：maven, pom.xml

我正在寻找最新的 TinyRadius maven 存储库工件 ID

谁能告诉我 TinyRadius jar 的依赖信息，以便我可以添加到我的 pom.xml

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T15:21:05.147

[最新 TinyRadius 版本](http://sourceforge.net/projects/tinyradius/files/)（1.0）的 pom包含以下信息：

```
<groupId>org.tinyradius</groupId>
<artifactId>tinyradius</artifactId> 
```

但是，它也有以下信息：

```
<version>0.9.9</version> 
```

所以 pom 中的版本与包含 pom 的实际版本不匹配。我也无法在这个 groupId 和 artifactId 下的任何 maven 存储库中找到这个工件，但这些是它们唯一可能的值 - 至少基于 pom。

您可以简单地从 sourceforge 下载 jar，然后从本地驱动器或 maven 存储库手动将其包含在您的 pom 中 - 有关详细信息，请参阅此问题： [Maven：包括在公共存储库中找不到的 jar](https://stackoverflow.com/questions/1355548/maven-including-jar-not-found-in-public-repository)

# python - 我如何在python中同时在循环下方打印一些字符串

> ID：12161796
> 
> 赞同：0
> 
> 时间：2012-08-28T14:42:17.773
> 
> 标签：python

我想同时执行多个进程，例如我想在正在进行的循环下方打印一些字符串...

```
import time
from threading import Thread
print 'top'
def foo():   
  for i in range(1,10):
    sys.stdout.write(str('\r%s\r'%i))
    sys.stdout.flush()
    time.sleep(1)
timer = Thread(target=foo)
timer.start()
'''bottom' 
```

我希望上面的代码看起来像这样

```
top
'''looping counter is underway'''
bottom 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:47:48.223

听起来你想阻塞你的主线程，直到你的工作线程完成。为此，您需要[加入功能](http://docs.python.org/library/threading.html#threading.Thread.join "加入方式")

```
import time
import sys
from threading import Thread
print 'top'
def foo():   
  for i in range(1,10):
    sys.stdout.write(str('\r%s\r'%i))
    sys.stdout.flush()
    time.sleep(1)
timer = Thread(target=foo)
timer.start()
timer.join()
print 'bottom' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:48:23.980

好吧，请阅读您最喜欢的线程文档。

你需要 join() 线程

```
timer.join() 
```

[http://docs.python.org/library/threading.html#module-threading](http://docs.python.org/library/threading.html#module-threading)

# javascript - Turn off compilation of files during Minification during Dojo build

> ID：12161797
> 
> 赞同：0
> 
> 时间：2012-08-28T14:42:18.140
> 
> 标签：javascript, build, dojo, minify, rhino

I am using Dojo Build system to build my project and minify the files. I am getting an error during the build and am unable to locate the source. So I want to skip the compilation/optimization step during the build and only need the minification to work.

Is this possible? and if yes, how?

THanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:28:24.960

Minification involves compilation, because system actually compiles your JavaScript to internal representation, optimizes this machine-readable form and then outputs it back, generating new JS source from it. Therefore no, you can't minify without compilation.

# python - 有什么更好的方法可以绕过 Python 中的“静态变量”？

> ID：12161799
> 
> 赞同：0
> 
> 时间：2012-08-28T14:42:23.203
> 
> 标签：python

似乎在 Python 中，要在类中声明一个变量，它是静态的（在下一个实例中保留它的值）。有什么更好的方法来解决这个问题？

```
class Foo():
  number = 0
  def set(self):
    self.number = 1

>>> foo = Foo()
>>> foo.number
0
>>> foo.set()
>>> foo.number
1
>>> new_foo = Foo()
>>> new_foo.number
1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T14:56:50.413

在类级别定义的变量确实是“静态的”，但我认为它们的工作方式并不像您认为的那样。这里有 2 个级别，您需要担心。有*类*级别的属性，也有*实例*级别的属性。每当您`self.attribute = ...`在方法中执行操作时，您都是在实例级别设置属性。每当python查找一个属性时，它首先查找实例级别，如果没有找到该属性，它会查找类级别。

这可能有点令人困惑（特别是如果属性是对*可变*对象的引用）。考虑：

```
class Foo(object):
    attr = []  #class level attribute is Mutable
    def __init__(self):
        # in the next line, self.attr references the class level attribute since
        # there is no instance level attribute (yet)
        self.attr.append('Hello')
        self.attr = []
        # Now, we've created an instance level attribute, so further appends will
        # append to the instance level attribute, not the class level attribute.
        self.attr.append('World')

a = Foo()
print (a.attr)  #['World']
print (Foo.attr) #['Hello']
b = Foo()
print (b.attr)  #['World']
print (Foo.attr) #['Hello', 'Hello'] 
```

正如其他人所提到的，如果您希望属性特定于实例，只需将其初始化为`__init__`（使用`self.attr = ...`）中的实例属性。 `__init__`是一个特殊的方法，它在类被初始化时运行（有一些我们不会在这里讨论的例外）。

例如

```
class Foo(object):
   def __init__(self):
       self.attr = 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:43:37.533

只留下声明。如果要为变量提供默认值，请`__init__`改为在方法中初始化它们。

```
class Foo(object):
    def __init__(self):
        self.number = 0

    def set(self):
        self.number = 1

>>> foo = Foo()
>>> foo.number
0
>>> foo.set()
>>> foo.number
1
>>> new_foo = Foo()
>>> new_foo.number
0 
```

**编辑**：替换了上述代码段的最后一行；它曾经读过，`1`虽然这只是我这边的一个错字。好像在我不在的时候引起了很多混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:53:33.170

您可能想要更改类属性：

```
class Foo():
    number = 0
    def set(self):
        Foo.number = 1 
```

而不是覆盖它！

# c++ - 设置使用 libHaru 生成的 PDF 的背景颜色

> ID：12161801
> 
> 赞同：0
> 
> 时间：2012-08-28T14:42:26.603
> 
> 标签：c++, pdf, pdf-generation, libharu

所以我试图在 C++ 中使用 libHaru 为我的新 pdf 设置背景颜色。

我在设置它时遇到问题。通过文档搜索，要么不存在，要么我错过了。

谁知道如何为pdf页面设置背景颜色？

还有对 libHaru 的评论吗？你会推荐它等等会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:05:58.817

PDF 页面没有背景颜色。例如，如果您想让页面变为红色，您可以绘制一个覆盖页面的矩形并用红色填充它。

# javascript - 网格拖放：抑制某些记录（组）

> ID：12161803
> 
> 赞同：2
> 
> 时间：2012-08-28T14:42:32.127
> 
> 标签：javascript, extjs, drag-and-drop, extjs4

嘿那里，

是否可以控制可以拖动哪些记录以及可以放置它们的位置（在悬停期间从一开始或中间抑制拖动操作）？

我需要的详细信息如下：

我有一个包含一些组的网格（比如说男性和女性），并且只想激活组“女性”中的 d&d，这意味着两件事：

1.）我开始从“女性”组（丽莎）中拖出一张唱片。一旦拖动在组“女性”之外（在组“男性”之上......），它应该显示错误状态，就像在网格边界之外拖动时一样：
[![错误状态示例](../Images/61c3d638049255803c10bafc62b6c535.png)](https://i.stack.imgur.com/dXjtv.png)

2.) 开始从组“男性”中拖动一个项目要么根本不可能（只是不显示 d&d 面板），要么从一开始就显示上面提到的错误状态并且永远不会更改为“正确” -状态。

谢谢，

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:55:30.917

在对 ext 的来源进行了一些挖掘之后，我刚刚找到了一个可行但并不完美的解决方案：

“drop-allowed-indication”可以由在 treeviewdragdrop-plugin 的 onViewRender 中创建的底层 DropZone 处理。这没有记录，但可以在插件[的源代码中看到。](http://docs.sencha.com/ext-js/4-1/source/TreeViewDragDrop.html#Ext-tree-plugin-TreeViewDragDrop)

需要做的一切（至少对于本示例）是覆盖/扩展 DropZone 的 onNodeOver- 和 onContainerOver- 方法，以返回适当的 css 类用于放置不允许或放置允许指示。

```
Ext.override(Ext.view.DropZone, {
    onNodeOver: function(nodeData, source, e, data) {
        if (data && data.records && data.records[0]) {
            // The check should be better specified, e.g. a
            // female with the name 'Malena' would be recognized as male!
            if (nodeData.innerHTML.indexOf(data.records[0].get('sex')) < 0) {
                return this.dropNotAllowed;
            }
        }
        return this.callOverridden([nodeData, source, e, data]);
    },
    onContainerOver: function(source, e, data) {
        return this.dropNotAllowed;
    }
}); 
```

工作示例：http: [//jsfiddle.net/suamikim/auXdQ/](http://jsfiddle.net/suamikim/auXdQ/)

### 我不喜欢这个解决方案的一些事情：

1.  覆盖更改（根据定义...）我的应用程序中所有 DropZone 的行为。我怎样才能只覆盖/扩展一个网格的特定 DropZone？

    我尝试了以下方法：

    *   在呈现 gridview 后向 dropZone 添加一个拦截器：http: [//jsfiddle.net/suamikim/uv8tX/](http://jsfiddle.net/suamikim/uv8tX/)

        起初这似乎有效，因为它显示了正确的 drop-allowed-indication 但即使指示器也会丢弃记录表明这是不允许的（它总是显示“绿线”......）

    *   定义一个新的 dnd-plugin 扩展 treeviewdragdrop-plugin 并在它创建后覆盖 dropZone 的 onNodeOver 方法：http: [//jsfiddle.net/suamikim/5v67W/](http://jsfiddle.net/suamikim/5v67W/)

        这种与拦截方法相反。它还显示了正确的指示，但它从不显示“绿线”，并且不允许在任何地方下降......

2.  我要覆盖的类（Ext.view.DropZone）在[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.ViewDropZone)中被标记为私有，并注明不应直接使用它...

我真的很感激对这两个问题的一些评论，甚至可能是一些更好的解决方案！

谢谢，米克

* * *

编辑：

我调整了我定义了一个新的 dnd-plugin 的版本，它扩展了原始的 gridviewdragdrop-plugin。“魔术”还扩展了 gridviewdropzone 并扩展了 onNodeOver 方法，而不是仅仅覆盖它。

这需要完成，因为现在由 callParent 调用的原始 onNodeOver 方法处理“绿线”并最终允许丢弃。

我扩展的 gridviewdragdrop-plugin 现在唯一要做的就是在 onViewRender 方法中创建新的 dropzone 类的实例，而不是标准的 gridviewdropzone。
到目前为止，这似乎是一种合理的方式：

```
// Extend the treeview dropzone
Ext.define('ExtendedGridViewDropZone', {
    extend: 'Ext.grid.ViewDropZone',

    onNodeOver: function(nodeData, source, e, data) {
        if (data && data.records && data.records[0]) {
            // The check should be specified, e.g. a female with the name 'Malena' would be recognized as male!
            if (nodeData.innerHTML.indexOf(data.records[0].get('sex')) < 0) {
                    return this.dropNotAllowed;
            }
        }

        return this.callParent(arguments);
    },
    onContainerOver: function(source, e, data) {
        return this.dropNotAllowed;
    }
});

Ext.define('ExtendedGridDnD', {
    extend: 'Ext.grid.plugin.DragDrop',
    alias: 'plugin.extendeddnd',

    onViewRender: function(view) {
        this.callParent(arguments);

        // Create a instance of ExtendedGridViewDropZone instead of Ext.grid.ViewDropZone
        this.dropZone = Ext.create('ExtendedGridViewDropZone', {
            view: view,
            ddGroup: this.dropGroup || this.ddGroup
        });
    }
}); 
```

工作示例：http: [//jsfiddle.net/5v67W/1/](http://jsfiddle.net/5v67W/1/)

尽管如此，我仍然会欣赏不同的方法，因为它仍然感觉可以更轻松地完成......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-03T19:40:14.563

你可以对分机 5 和 6 这样做

在您的树形面板定义中：

```
 listeners: {        
        viewready           : 'onViewReady'
    } 
```

在您的视图控制器上：

```
onViewReady       : function (tree) {
    var view = tree.getView(),
        dd = view.findPlugin('treeviewdragdrop'),
        rec;

    dd.dropZone.onNodeOver = function (data, e) {
        rec = view.getRecord(e.getTarget(view.itemSelector));
        return rec.get('customProperty') === 'someValue' ? this.dropAllowed : this.dropNotAllowed;
    }
}, 
```

参考[https://www.sencha.com/forum/showthread.php?282685](https://www.sencha.com/forum/showthread.php?282685) [https://www.sencha.com/blog/declarative-listeners-in-ext-js-5/](https://www.sencha.com/blog/declarative-listeners-in-ext-js-5/)

# javascript - 如何提高 webkit 图像缩放性能

> ID：12161808
> 
> 赞同：0
> 
> 时间：2012-08-28T14:42:57.477
> 
> 标签：javascript, animation, css, webkit, jquery-animate

在网页上，我正在缩放`<img/>`标签。

为此，我使用了通过jquery`.animate`方法链接的css3变换缩放功能（https://github.com/louisremi/jquery.transform.js）。总而言之，在 Firefox 和 IE9 上效果不错。但是在 webkit 浏览器（尤其是 chrome 21）下，性能开销很大，而且动画效果也不好。

所以，我看一下 chrome devtool 时间线。而且这个问题肯定是由重绘引起的`<img/>`，重绘图像所花费的时间非常长。

只是让你知道，我们不经常访问 dom（在动画时从不），我们使用`requestAnimationFrame`. 问题似乎确实存在于 webkit 用于调整图像大小的算法中。我们添加了 css `-webkit-transform-style: preserve-3d;`，这有点帮助，但不是很多。

有人对此有提示吗？

# symfony - 使用 Symfony2 安装 DoctrineFixturesBundle

> ID：12161809
> 
> 赞同：4
> 
> 时间：2012-08-28T14:42:58.710
> 
> 标签：symfony

我尝试安装现有的 Symfony 2.0 项目，因此我运行 rm -rf vendor 和 bin/vendor install。他找不到 DoctrineFixturesBundle，所以我更新了我的 deps 文件并输入：

```
[DoctrineFixturesBundle]
    git=https://github.com/doctrine/DoctrineFixturesBundle.git
    target=/bundles/Symfony/Bundle/DoctrineFixturesBundle
    version=origin/2.0 
```

我再次运行 rm -rf vendor/* 和 bin/vendor install，我得到这个错误：

**自动加载器期望类“Symfony\Bundle\DoctrineFixturesBundle\DoctrineFixturesBundle”在文件“/home/me/developpement/myproject/app/../vendor/bundles/Symfony/Bundle/DoctrineFixturesBundle/DoctrineFixturesBundle.php”中定义。找到文件但类不在其中，类名或命名空间可能有错字。**

所以，在我的 AppKernel.php 我替换：

```
new Symfony\Bundle\DoctrineFixturesBundle\DoctrineFixturesBundle(), 
```

和 ：

```
new Doctrine\Bundle\FixturesBundle\DoctrineFixturesBundle(), 
```

因为 DoctrineFixturesBundle.php 文件命名空间是 Doctrine\Bundle\FixturesBundle。

现在，我收到此错误：

**致命错误：在第 21 行的 /home/me/developpement/myproject/app/AppKernel.php 中找不到类 'Doctrine\Bundle\FixturesBundle\DoctrineFixturesBundle'**

我应该怎么做才能让它工作？

**编辑添加**：

这是我的 autoload.php ：

```
$loader->registerNamespaces(array(
    'Symfony'          => array(__DIR__.'/../vendor/symfony/src', __DIR__.'/../vendor/bundles'),
    'Sensio'           => __DIR__.'/../vendor/bundles',
    'JMS'              => __DIR__.'/../vendor/bundles',
    'Doctrine\\Common' => __DIR__.'/../vendor/doctrine-common/lib',
    'Doctrine\\DBAL'   => __DIR__.'/../vendor/doctrine-dbal/lib',
    'Doctrine'         => __DIR__.'/../vendor/doctrine/lib',
    'Monolog'          => __DIR__.'/../vendor/monolog/src',
    'Assetic'          => __DIR__.'/../vendor/assetic/src',
    'Metadata'         => __DIR__.'/../vendor/metadata/src',
    'Gedmo'            => __DIR__.'/../vendor/gedmo-doctrine-extensions/lib',
    'Doctrine\\Common\\DataFixtures' => __DIR__.'/../vendor/doctrine-fixtures/lib',
    'Doctrine\\Common' => __DIR__.'/../vendor/doctrine-common/lib',
    'Doctrine\\DBAL\\Migrations' => __DIR__.'/../vendor/doctrine-migrations/lib',
    'Doctrine\\DBAL'   => __DIR__.'/../vendor/doctrine-dbal/lib',
    'Knp\Component'    => __DIR__.'/../vendor/knp-components/src',
    'Knp\Bundle'       => __DIR__.'/../vendor/bundles',
 )); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:26:39.680

你检查你的 autoload.php 了吗？这是您告诉 Symfony 哪个命名空间位于特定目录中的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T09:36:44.573

命名空间可能不是自动加载的。检查此`vendor\composer\autoload_namespaces.php`文件并确保它包含以下代码。

`'Doctrine\\Bundle\\FixturesBundle' => array($vendorDir . '/doctrine/doctrine-fixtures-bundle')`,

# windows - 使用 rundll32.exe 运行 dll .. 没有看到输出或错误

> ID：12161813
> 
> 赞同：1
> 
> 时间：2012-08-28T14:43:05.933
> 
> 标签：windows, winapi, dll, window, rundll32

我正在使用 rundll32.exe 运行 dll，但我没有看到预期的输出，也没有看到我的日志语句，也没有看到任何类型的错误。

我该如何调试？

谢谢，

公斤

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:13:22.123

在 Windows 中有两种程序：控制台程序和窗口程序。对于控制台程序，系统在进程启动期间分配并附加其控制台。

对于 Windows 程序，这不会发生，因此 stdout、stderr 等无处可去。Windows 程序仍然可以在其代码中显式分配 ( `AllocConsole()`) 和附加 ( `AttachConsole()`)（最多一个）控制台。所以你可能会尝试在调试版本中这样做。您不应该在发布（生产）构建中这样做，因为 DLL 通常不应该这样做。

我猜`rundll32.exe`是Windows应用程序。

# jquery - JQuery 可扩展表选项不会自动隐藏

> ID：12161822
> 
> 赞同：0
> 
> 时间：2012-08-28T14:43:35.613
> 
> 标签：jquery, html-table, show-hide

我对 JQuery 很陌生，并且有相当粗劣的 Javascript 技能，所以如果我错过了一些非常明显的东西，我深表歉意。

我使用下面源代码中的以下代码制作了一个表格，该表格包含的项目在单击后会扩展为更多信息：

```
$(function() {
    $('tr.parent')
        .css("cursor","pointer")
        .attr("title","Click to expand/collapse")
        .click(function(){
            $(this).siblings('.child-'+this.id).toggle('fast');
        });
    $('tr[@class^=child-]').hide().children('tr');
}); 
```

[http://www.javascripttoolbox.com/jquery/](http://www.javascripttoolbox.com/jquery/)

目前默认情况下，表格显示子信息（应该隐藏），但是当点击该行时会折叠。

我希望它默认隐藏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:00:20.450

您的代码产生以下错误：

```
Uncaught Error: Syntax error, unrecognized expression: [@class^=child-] 
```

你需要的是：

```
$('tr[class^=child-]').hide().children('tr'); 
```

[http://jsfiddle.net/ZD4qE/](http://jsfiddle.net/ZD4qE/)

# ios - iOS 计算文件大小的总和总是负数

> ID：12161827
> 
> 赞同：2
> 
> 时间：2012-08-28T14:43:46.650
> 
> 标签：ios, math, core-data, sum, restkit

我在这里遇到了一个奇怪的问题，我敢肯定这只是小问题。

我通过 JSON 接收有关文件的信息（RestKit 做得很好）。我通过 coredata 将每个文件的文件大小写入本地存储。

之后在我的一个视图控制器中，我需要总结数据库中所有文件的文件大小。我获取所有文件，然后通过一个斜率（for）来总结大小。

问题是现在，结果总是否定的！

coredata 实体文件大小的类型为 Integer 32（文件大小由 JSON 以字节为单位报告）。我在 NSArray 中读取了 fetchresult，`allPublicationsToLoad`然后尝试总结。Type 的 NSArray 中的 Objects`CDPublication`有一个 NSNumber 类型的值`filesize`：

```
for(int n = 0; n < [allPublicationsToLoad count]; n = n + 1)
{
    CDPublication* thePub = [allPublicationsToLoad objectAtIndex:n];
    allPublicationsSize = allPublicationsSize + [[thePub filesize] integerValue];
    sum = [NSNumber numberWithFloat:([sum floatValue] + [[thePub filesize] floatValue])]; 
```

单个 CDPublications 对象的每个单个文件大小都是正数且正确的。之后只有所有文件大小的总和为负。现在大约有 240 个对象，文件大小值介于 4000 和 234.645.434.123 之间。

有人可以给我一个正确的方向吗！？是 Integer 32 或 NSNumber 不能容纳这么大的范围的问题吗？

谢谢

疯狂的应用程序}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:47:43.037

NSNumber 对象不能容纳这么大的数字。由于负数的存储方式，结果是负数。

负数使用[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)存储，这样做是为了使正数和负数的加法更容易。NSNumber 可以容纳的数字范围分为两部分，最高一半（最高位等于 1 的 int 值）被认为是负数，最低一半（最高位等于 0）是正常的正数。现在，如果您添加足够大的数字，结果将位于最高一半，因此被解释为负数。这是 4 位整数情况的说明（32 的工作原理完全相同，但要键入的 0 和 1 会多得多；））

使用 4 位，您可以表示以下有符号整数范围：

```
0000 (=0)
0001 (=1)
0010 (=2)
... 
0111 (=7)

1000 (=-8)
1001 (=-7)
...
1111 (=-1) 
```

在这种情况下，您可以表示的最大正整数是 7。例如，如果您添加 5 和 4，您将得到：

```
0101 + 0100 = 1001 
```

当您表示这样的有符号整数时，1001 等于 -7（而不是 9，正如您所期望的那样）。这就是您正在观察的效果，但规模更大（32 位）

在这种情况下，获得正确结果的唯一选择是增加用于表示整数的位数，这样结果就不会在位组合的负数范围内。因此，如果 32 位不够（如您的情况），您可以使用 long（64 位）。

```
[myNumber longLongValue]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T14:48:04.160

我认为这与`int`溢出有关：非常大的整数在溢出`int`（32 位）的大小时会被重新解释为负数。使用`longLongValue`代替`integerValue`：

```
long long allPublicationsSize = 0;
for(int n = 0; n < [allPublicationsToLoad count]; n++) {
    CDPublication* thePub = [allPublicationsToLoad objectAtIndex:n];
    allPublicationsSize += [[thePub filesize] longLongValue];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T14:51:03.107

这是与使用[二进制补码算法](http://en.wikipedia.org/wiki/Two%27s_complement)相关的整数溢出问题。对于一个 32 位整数，恰好有 2 ^(32) (4,294,967,296) 个可以表示的可能整数值。使用二进制补码时，最高有效位用作符号位，它允许一半的数字表示非负整数（当符号位为 0 时），另一半表示负数（当符号位为 1 时） ）。这给出了 [-2 ^(31) , 2 ^(31) -1] 或 [-2,147,483,648, 2,147,483,647] 的有效范围。

要为您的情况克服这个问题，您应该考虑使用 64 位整数。这应该适用于您似乎有兴趣使用的值范围。或者，如果 64 位还不够，您应该寻找适用于 iOS 的大整数库。

# php - 在php中查找两个字符串之间的匹配百分比？

> ID：12161828
> 
> 赞同：4
> 
> 时间：2012-08-28T14:43:46.010
> 
> 标签：php, string, string-comparison, fuzzy-logic

谁能建议我一个更好的方法（或最首选的方法）来使用模糊逻辑找到两个字符串之间的匹配百分比（即这两个字符串（例如名称）在百分比方面的相关程度）。？谁能帮我写代码？真的我想知道从哪里开始..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-16T16:43:40.650

```
$str1 = 'Hello';
$str2 = 'Hello, World!';
$percent;
similar_text($str1, $str2, $percentage); 
```

[http://php.net/manual/en/function.similar-text.php](http://php.net/manual/en/function.similar-text.php)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-14T13:57:43.230

## 字比较器

这是基于单词的比较 - 它比基于字符的比较*快得多，而且按单词比较人类文本通常更有意义。*但是，字长确实很重要。该算法考虑到这一点，以获得更好的结果。最后检查测试结果；我认为它们几乎就是人类会说的。

```
function wordSimilarity($s1,$s2) {

    $words1 = preg_split('/\s+/',$s1);
    $words2 = preg_split('/\s+/',$s2);
    $diffs1 = array_diff($words2,$words1);
    $diffs2 = array_diff($words1,$words2);

    $diffsLength = strlen(join("",$diffs1).join("",$diffs2));
    $wordsLength = strlen(join("",$words1).join("",$words2));
    if(!$wordsLength) return 0;

    $differenceRate = ( $diffsLength / $wordsLength );
    $similarityRate = 1 - $differenceRate;
    return $similarityRate;

} 
```

此函数为您提供介于 0 和 1 之间的浮点值，其中 1 是总相似度。

#### 让我们看看一些测试

```
 $test = "this is something you've never done before";

    wordSimilarity($test,"this is something you've never done before");  //  1.000
    wordSimilarity($test,"this is something");                           //  0.588
    wordSimilarity($test,"this is nothing you have ever done");          //  0.312
    wordSimilarity($test,"leave me alone with lorem ipsum");             //  0.000
    wordSimilarity($test,"before you do something you've never done");   //  0.845
    wordSimilarity($test,"never have i ever done this");                 //  0.448 
```

# html - 数据 URL 是否只接受 Powerpoint 的二进制文件或 base 64？

> ID：12161830
> 
> 赞同：0
> 
> 时间：2012-08-28T14:43:59.317
> 
> 标签：html, powerpoint, data-uri

使用数据 uri 在客户端创建文件有一个技巧。例如，要创建一个 MS PowerPoint，您可以执行类似的操作

```
<a href="data:application/vnd.openxmlformats-officedocument.presentationml.presentation;base64,UEsDBBQACAAIAGeGhT8AAAAAAAAAAAAAAAATAAAAW0NvbnRlbnRfVHlwZXNdLnhtbM2ay27bMBBF9wX6D4K2hUWbbtO0sJNFH6s+AiT9AFYa22wlkiBpN/77UnLaKEFsiNUQnY1smZw7B0MNLwFrcXnb1NkOrJNaLfNZMc0zU..."  download="jones6.pptx"> Test File 3 </a> 
```

可以在 URL 中指定的唯一数据是文件的 base64 还是二进制表示？是否可以表达文件的任何其他表示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:51:10.030

支持 Base64 编码和纯内容。例如，您也可以使用 HTML：

```
 <a href="data:text/html;charset=UTF-8,%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3Ctitle%3ETest%3C%2Ftitle%3E%3C%2Fhead%3E%3Cbody%3E%3Ch3%3EIt%20works!%3C%2Fh3%3E%3C%2Fbody%3E%3C%2Fhtml%3E">Click Here!</a> 
```

您应该看到“它有效！” 点击链接后。（适用于 Firefox 和 Chrome，有关兼容性表，请参阅[http://caniuse.com/datauri](http://caniuse.com/datauri)）要生成可以填充到数据 URI 中的纯内容，您需要使用`encodeURIComponent`JavaScript 或`rawurlencode`PHP 之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:46:13.107

数据协议的语法如下：

```
data:[sMediaType;][sBase64Encoding;],sResourceData 
```

（[https://msdn.microsoft.com/library/cc848897](https://msdn.microsoft.com/library/cc848897)）

如您所见，非 base64 编码没有任何选项。

# java - MyEclipse 中无法识别包

> ID：12161832
> 
> 赞同：1
> 
> 时间：2012-08-28T14:44:07.897
> 
> 标签：java, jsp, jakarta-ee, servlets, myeclipse

我在 MyEclipse 中创建了一个 EE 项目。

我在“WebRoot”下有一个 jsp 文件，它包含以下几行：

```
<%@ page language="java" import="java.util.*,java.sql.*,com.sp.model.*" pageEncoding="ISO-8859-1"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
  <html>
     <body>
      <%
         String username=request.getParameter("username");
         String password=request.getParameter("passwd");

         UserBeanCL ubc=new UserBeanCL();
       %>
 ... 
```

我还在 MyEclipse 的“src”下创建了一个名为 com.sp.model 的包。从上面 JSP 代码的第一行可以看出，我已经使用 import 语句导入了该包。UserBeanCL 只是一个普通的 JAVA 类坐在那个包裹下，没什么特别的。MyEclipse 中的一切看起来都不错。它确实找到了包和 UserBeanCL 类。

但是，在我将整个站点部署到 Tomcat 并尝试在浏览器中运行此 JSP 后，它总是会出错并抱怨以下行：

```
UserBeanCL ubc=new UserBeanCL(); 
```

错误类似于：“UserBeanCL 无法解析为类型”。堆栈跟踪是：

```
Stacktrace:
org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:102)
org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:331)
org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:469)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:378)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

这个错误让我很困惑，因为它只在部署后出现。专家能帮我调试一下吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:50:19.133

采用：

```
<%@ page language="java" import="java.util.*,java.sql.*,com.sp.model.*" pageEncoding="ISO-8859-1"%> 
```

问候;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T08:17:49.600

如果您允许的话，MyEclipse 中的编辑器通常会为每种类型创建单独的导入语句。也就是说，在您的情况下，将添加以下语句：

> <%page import="com.sp.model.UserBeanCL">

我不确定这是否会有所帮助，因为我无法复制您的问题，但如果您的控制台中的消息比您发布的更多，它可能会有所帮助，因为主要原因可能是一些解析问题，这将在前面出现控制台消息。

# html - 在 HTML 中，如何使控件占用左列的所有水平空间而不转到下一行

> ID：12161835
> 
> 赞同：1
> 
> 时间：2012-08-28T14:44:20.497
> 
> 标签：html, css

我正在努力成为一名优秀的开发人员并且不使用表格，但我一直没有成功。这是我的尝试...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Because some people complain if I don't specify all the obvious tags</title>
</head>
<body>
    <div style="width:100%">
        <div style="background-color:Purple;width:25px;float:right"><input type="button" style="width:15px" /></div>
        <div style="background-color:Aqua"><input style="width:100%" /></div>
    </div>
</body>
</html> 
```

这是我得到的输出。我希望输入框位于按钮的左侧，但不幸的是它在下方。

![输出](../Images/dcbdd71bcf79e27485a0575a245f340f.png)

为了演示我想要什么，如果我要使用表格，我会这样做：

```
<table style="width:100%">
    <tr>
        <td style="background-color:Aqua"><input style="width:100%;box-sizing: border-box" /></td>
        <td style="background-color:Purple;width:25px"><input type="button" style="width:15px" /></td>
    </tr>
</table> 
```

![预期产出](../Images/8a538138d4422e337d8225fa23acd863.png)

请注意：

*   我无法更改 doctype 标签
*   解决方案不能使用表
*   无论包含 div 中指定的大小如何，这都应该有效，当前设置为 100%。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:56:47.757

如果我像你一样有一个工作表布局，我会做这样的事情：

```
.layout-table
{
    display: table;
}
.layout-table > div
{
    display: table-row;
}
.layout-table > div > div
{
    display: table-cell;
} 
```

进而：

```
<div class="layout-table" style="width:100%">
    <div>
        <div style="background-color:Aqua">
            <input style="width:100%;box-sizing: border-box">
        </div>
        <div style="background-color:Purple;width:25px">
            <input type="button" style="width:15px">
        </div>
    </div>
</div> 
```

[**小提琴**](http://jsfiddle.net/yWD8D/11/)

当然，所有这些造型也可以在外部完成，但你明白了。这与您的表格布局相同，但它是使用 div 样式完成的，其行为类似于表格，将布局与内容分开。

实际上，我可能会很懒，只是使用`<table role="presentation">`，但这很糟糕（更不用说对你过时的文档类型无效了）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T15:05:43.857

当您使用 CSS 浮动元素时，您会将其从所谓的“文档流”中取出。所以基本上这里发生的事情是，水色盒子实际上是在黄色盒子后面延伸。见：http: [//jsfiddle.net/hegvz/](http://jsfiddle.net/hegvz/)。结果是 aqua 框的宽度实际上比可见的要大，因此输入会扩展以填充渲染框的整个宽度。

您有几个选项可以解决此问题：

1）在非浮动框的侧面添加一个填充，等于浮动框的宽度，加上你想要的任何空白。示例：http: [//jsfiddle.net/QVpnw/](http://jsfiddle.net/QVpnw/)。您会看到 aqua 框仍延伸到黄色框的后面，但 aqua 框的输入现在已正确缩短。

2）在非浮动框的一侧添加一个边距，等于浮动框的宽度。这将导致水色框呈现白色空间，而不是颜色。在这种情况下，您还需要调整填充。[http://jsfiddle.net/SVKr6/](http://jsfiddle.net/SVKr6/)

# javascript - Mustache.js lambdas 和数字格式 toFixed

> ID：12161837
> 
> 赞同：5
> 
> 时间：2012-08-28T14:44:29.990
> 
> 标签：javascript, lambda, mustache, tofixed

我正在尝试设置一个 mustache.js 模板，该模板使用 lambda 将数字格式化为特定的小数位，但我遇到了问题。给定一个看起来像这样的对象：

```
{
     x: 123,
     points: [
          { name: "foo", y: 1.234567 },
          { name: "bar", y: 2.123456 },
          { name: "fax", y: 3.623415 }
     ]
} 
```

首先，我尝试设置一个看起来像这样的模板：

```
var template = "{{x}}{{#points}}<br/>{{name}}, {{#y.toFixed}}2{{/y.toFixed}}"; 
```

这不起作用（在数字应该是的地方生成了一个空白空间。我虽然可能 lambda 格式不正确，因为 toFixed 不返回函数（[mustache docs](http://mustache.github.com/mustache.5.html)）。所以我尝试了：

```
Number.prototype.toMustacheFixed = function(){
     var n = this;
     return function(d){ return n.toFixed(d); };
};
var template = "{{x}}{{#points}}<br/>{{name}}, {{#y.toMustacheFixed}}2{{/y.toMustacheFixed}}" 
```

再次，失败。我什至尝试将 toMustacheFixed 函数简化为：

```
Number.prototype.toMustacheFixed = function(){
     return function(){ return 123.45; };
}; 
```

这没有帮助。我仍然在模板中得到一个空白。那么，Mustache.js 可以不处理数字上的本机和原型函数，还是我做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T16:31:56.903

试试这种方式：http: [//jsfiddle.net/QXFY4/10/](http://jsfiddle.net/QXFY4/10/)

我完成了你的部分：`{{/points}}`

我在[http://mustache.github.com/mustache.5.html](http://mustache.github.com/mustache.5.html)`toFixed`的 Lambdas 部分中添加了一个与示例对应的函数

有了这个，我可以`{{y}}`通过解析浮点数并调用 toFixed 来改变它的渲染。

# android - Android Facebook 分享不起作用

> ID：12161839
> 
> 赞同：1
> 
> 时间：2012-08-28T14:44:36.413
> 
> 标签：android, facebook, feed

我花了很多时间尝试实现 Facebook 分享，但没有成功。我尝试了各种实现，并阅读了很多与我遇到的类似问题相关的问答。

我有尽可能多的简单 Facebook 示例。我想要的是设置提要对话框的描述或至少消息。这是我添加到示例代码中的内容：

```
Bundle parameters = new Bundle();
parameters.putString("caption", "1000vaikai Caption...");
parameters.putString("description", "This is a description"); // the message to post to the wall
parameters.putString("user_message_prompt", "This is message prompt");
parameters.putString("user_message", "MEEEESAGE");

mFacebook.dialog(Example.this, "feed", parameters,
                 new SampleDialogListener()); 
```

但它没有效果。没有任何预设，只是一个简单的提要对话框。[这里](https://developers.facebook.com/docs/reference/androidsdk/dialog/)它说对话框方法具有键值参数，但我找不到它们的列表。如您所见，我尝试使用提要 URL 中的参数，但它不起作用。

有人让它正常工作吗？

**编辑** 我破解了 Facebook SDK，它似乎生成了正确的 URL（https://m.facebook.com/dialog/feed + 我的参数 + 取自 Facebook SDK 本身的参数）。这意味着它确实使用与提要对话框页面文档中列出的参数相同的参数。但它仍然不起作用。正在设置这些参数：

*   用户信息
*   重定向uri
*   描述
*   app_id
*   展示
*   标题
*   访问令牌
*   user_message_prompt

只有 app_id（我可以看到我的应用名称）、access_token（共享确实有效）和 redirect_uri（它重定向回移动应用）似乎有效果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T07:29:50.873

所以我发现您必须提供*链接*或*图片*。如果不是 - 它只是忽略所有过度参数。

# c# - 当 lambda 表达式中不能计算 'let' 时跳过添加元素

> ID：12161840
> 
> 赞同：1
> 
> 时间：2012-08-28T14:44:43.023
> 
> 标签：c#, lambda

我有以下 lambda 表达式：

```
string queryToken = queryTokens.Last();
var result = from locationAddress in locations
             let tokens = GetLetterTokens(locationAddress.Name)
             let distance = (from token in tokens
                             where token.Contains(queryToken, StringComparison.OrdinalIgnoreCase)
                             select token.Length - queryToken.Length).Min()
             orderby distance
             select new
                        {
                            LocationAddress = locationAddress,
                            LocationDistance = distance,
                        }; 
```

不管它是为了什么而写的。有时计数时`distance`，没有`tokens`包含`queryToken`，所以`.Min()`无法返回。如何跳过这些情况？我不想将它们添加到`result`变量中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:48:56.527

听起来你只是想要：

```
let tokens = ...
where tokens.Any(token.Contains(queryToken, StringComparison.OrdinalIgnoreCase))
let distance = ... 
```

或者，只需在选择令牌时进行过滤，然后检查是否存在：

```
var result = from locationAddress in locations
             let tokens = GetLetterTokens(locationAddress.Name)
                              .Where(token => token.Contains(queryToken, StringComparison.OrdinalIgnoreCase)
             where tokens.Any()
             let distance = tokens.Min(token => token.Length - queryToken.Length) 
```

# c# - 有没有一种简单的方法可以让动态/ExpandoObject 返回字符串而不是对象？

> ID：12161842
> 
> 赞同：2
> 
> 时间：2012-08-28T14:44:46.887
> 
> 标签：c#, .net, .net-4.0

我想在我通常使用的动态对象中使用`Dictionary<string, string>`. 我想从

```
dict.Add("key", "value");
string val = dict["key"]; 
```

到

```
 dyna.key = "value";
 string val = dyna.key 
```

典型的`ExpandoObject`会返回一个`object`for `dyna.key`，有什么简单的方法可以让它在访问每个值时返回字符串而不进行强制转换？

* * *

编辑：对不起，我还没有深入研究我的问题——

并不是我正在调用的代码不能将它用作字符串，它有这个：

```
public static implicit operator SomethingSomething(string name) 
```

这就是它破裂的原因

EDIT2：哎呀，我是个白痴，只有在从头开始重新创建它之后，我才阅读了完整的错误消息：没有名为“GetMyClass”的适用方法，但似乎有一个名为“GetMyClass”的扩展方法。扩展方法不能动态调度。考虑强制转换动态参数或在没有扩展方法语法的情况下调用扩展方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:46:56.230

> 典型的 ExpandoObject 将为 dyna.key 返回一个对象

呃，不完全是，它会返回你告诉它返回的任何东西：

```
dynamic dyna = new ExpandoObject();
dyna.key = "value";
string val = dyna.key; 
```

当然你不能再依赖编译时检查，下面的代码显然会在运行时崩溃：

```
dynamic dyna = new ExpandoObject();
dyna.key = "value";
int val = dyna.key; 
```

因此，请确保您使用的类型与用于存储值的类型相同。

* * *

更新：

```
class Program
{
    static void Main()
    {
        dynamic dyna = new ExpandoObject();
        dyna.key = "value";
        Test(dyna.key);
    }

    public static void Test(string message)
    {
        Console.WriteLine(message);
    }
} 
```

* * *

更新 2：

我仍然不明白问题是什么：

```
class Program
{
    static void Main()
    {
        dynamic d = new ExpandoObject();
        d.key = "value";
        Program p = d.key;
        Console.WriteLine(p.Name);
    }

    public string Name { get; set; }

    public static implicit operator Program(string name)
    {
        return new Program
        {
            Name = name
        };
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T14:47:35.737

使用`dynamic`时，所有强制转换都是隐式的，因此：

```
dynamic key = ...
dyna.key = "value";
string val = dyna.key; 
```

已经完成了这项工作。

更准确地说，成员访问 ( `.key`) 返回`dynamic`，并且此`dynamic`结果具有到目标类型的隐式转换（类型检查，在运行时验证）`string`。

# xml - 使用 xslt 文件转换 xml 数据

> ID：12161843
> 
> 赞同：0
> 
> 时间：2012-08-28T14:44:46.947
> 
> 标签：xml, xslt, ssis

我想使用 xslt 从给定的 xml 文件中删除元数据和模式信息，以便我可以将这些数据导入 sql 表中，但我无法从 xml 文件中删除它的元数据和模式信息。从过去三天开始，我实际上做了很多谷歌搜索，但我无法执行。请向我提供一个有效的 xslt 文件代码，它可以从给定的 xml 文件中删除元数据和架构。

在这里，我为您提供 xml 文件的代码。

```
<?xml version="1.0" encoding="utf-16"?>
<DataSet>
  <xs:schema id="NewDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
    <xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
      <xs:complexType>
        <xs:choice minOccurs="0" maxOccurs="unbounded">
          <xs:element name="Table">
            <xs:complexType>
              <xs:sequence>
                <xs:element name="lukas_id_nagrody" type="xs:string" minOccurs="0" />
                <xs:element name="ilosc" type="xs:int" minOccurs="0" />
              </xs:sequence>
            </xs:complexType>
          </xs:element>
        </xs:choice>
      </xs:complexType>
    </xs:element>
  </xs:schema>
  <diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1">
    <NewDataSet>
      <Table diffgr:id="Table1" msdata:rowOrder="0">
        <lukas_id_nagrody>10</lukas_id_nagrody>
        <ilosc>4</ilosc>
      </Table>
      <Table diffgr:id="Table2" msdata:rowOrder="1">
        <lukas_id_nagrody>12</lukas_id_nagrody>
        <ilosc>10</ilosc>
      </Table>
      <Table diffgr:id="Table3" msdata:rowOrder="2">
        <lukas_id_nagrody>21</lukas_id_nagrody>
        <ilosc>32</ilosc>
      </Table>
      <Table diffgr:id="Table4" msdata:rowOrder="3">
        <lukas_id_nagrody>32</lukas_id_nagrody>
        <ilosc>13</ilosc>
      </Table>
      <Table diffgr:id="Table5" msdata:rowOrder="4">
        <lukas_id_nagrody>33</lukas_id_nagrody>
        <ilosc>15</ilosc>
      </Table>
      <Table diffgr:id="Table6" msdata:rowOrder="5">
        <lukas_id_nagrody>34</lukas_id_nagrody>
        <ilosc>2</ilosc>
      </Table>
    </NewDataSet>
  </diffgr:diffgram>
</DataSet> 
```

我在 SSIS 中使用 xml 任务。

转换上述 xml 数据后，我想要以下输出。

```
<NewDataSet>
    <Table>
            <lukas_id_nagrody>34</lukas_id_nagrody>
            <ilosc>2</ilosc>
    </Table>
</NewDataSet> 
```

我想要输出这样的东西。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:11:17.283

您需要一个简化的身份/副本模式，从属性开始`NewDataSet`并省略属性。试试这个：

```
<xsl:template match="DataSet/diffgr:diffgram/NewDataSet|DataSet/diffgr:diffgram/NewDataSet//*|text()">
    <xsl:copy>
        <xsl:apply-templates select='*|text()' />
    </xsl:copy>
</xsl:template> 
```

**[可运行的演示](http://www.xmlplayground.com/1rAUXQ)**（见输出*源*）

# makefile - 无法在 ubuntu 12.04 上编译 gst-plaugin-bad-0.10

> ID：12161845
> 
> 赞同：0
> 
> 时间：2012-08-28T14:44:56.557
> 
> 标签：makefile, gstreamer

我有 gstraemer 源的流动目录结构

```
/home/dev/cerbero/sources/linux_x86_64/gst-plugins-bad-0.10.23 
```

当我运行 .autogen.sh 它运行良好

但是当我“制作”时，它会出现以下错误

[gst-plugins_bad_compile_error](http://pastebin.com/p1J1w7nA)

进一步来说

```
Making all in gst
make[2]: Entering directory `/home/dev/cerbero/sources/linux_x86_64/gst-plugins-  bad-0.10.23/gst'
make -C adpcmdec
make[3]: Entering directory `/home/dev/cerbero/sources/linux_x86_64/gst-plugins-bad-0.10.23/gst/adpcmdec'
  CC     libgstadpcmdec_la-adpcmdec.lo
adpcmdec.c:586:21: error: expected declaration specifiers or '...' before '(' token
adpcmdec.c:586:40: error: expected declaration specifiers or '...' before '(' token
adpcmdec.c:586:59: error: unknown type name 'adpcmdec'
adpcmdec.c:587:5: error: expected declaration specifiers or '...' before string constant
adpcmdec.c:587:22: error: expected declaration specifiers or '...' before 'plugin_init'
adpcmdec.c:587:35: error: expected declaration specifiers or '...' before string constant
adpcmdec.c:587:44: error: expected declaration specifiers or '...' before string constant
adpcmdec.c:587:52: error: expected declaration specifiers or '...' before string constant
adpcmdec.c:588:5: error: expected declaration specifiers or '...' before string constant
adpcmdec.c:576:1: warning: 'plugin_init' defined but not used [-Wunused-function]
make[3]: *** [libgstadpcmdec_la-adpcmdec.lo] Error 1
make[3]: Leaving directory `/home/dev/cerbero/sources/linux_x86_64/gst-plugins-    bad-0.10.23/gst/adpcmdec'
make[2]: *** [adpcmdec] Error 2
make[2]: Leaving directory `/home/dev/cerbero/sources/linux_x86_64/gst-plugins-bad-0.10.23/gst'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/dev/cerbero/sources/linux_x86_64/gst-plugins-bad-0.10.23'
make: *** [all] Error 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:51:28.793

建站前的几件事

你安装了 liboil 和 orc 编译器吗？

运行 ./configure --enable-orc 如果你没有运行 ./configure 如果你没有

然后做一个

请记住在执行上述步骤之前执行 make distclean 或简单地获取干净的源代码。不要直接在“dirty half built”文件夹上执行此操作。

尽管我对此表示怀疑，但它也可能是一个 nasm/yasm 问题。

编辑：我的建议是安装 orc，因为这可以大大加快 gstreamer 的速度！

# java - 用于在 SOA 环境中实现请求-响应类型应用程序的框架/协议/工具

> ID：12161847
> 
> 赞同：0
> 
> 时间：2012-08-28T14:45:14.350
> 
> 标签：java, web-services, rest, soa, distributed-computing

我正在构建一个 Web 应用程序，我想在其中将代码分发到 UI、业务逻辑和数据库等各个层。这是我想要的功能，可以解释我的使用场景：

*   实时高性能请求-响应型应用程序
*   应用程序被划分为不同的层，如 UI、业务逻辑和数据库——每一层都在一组计算机上工作
*   这些层应支持负载平衡和故障转移功能，最好对其他交互层透明。
*   未来与各种语言的互操作性将是一个额外的可取特性
*   这些层将驻留在我的组织内部，即我目前不打算与外部组织服务交互。

我尝试了 RMI，但缺点是 Java 锁定并且不支持负载平衡和故障转移功能。我考虑过 JMS，但意识到即使负载平衡、MOM 的故障转移等功能非常诱人，对我来说，它似乎并不适合实时请求-响应类型的应用程序（如果你认为我错了，请纠正我）。

请向我推荐最适合此用例场景的流行、合适的框架。

**更新：**
探索 SOA，我遇到了两个突出的选项 SOAP 和 REST。正如我所提到的，我必须在我的应用程序的模块/层之间内部使用的通信方法方面做出选择。在寻找快速请求响应和高可扩展性、负载平衡、故障转移方案时，它们之间是否有明显/流行的选择？我不打算将这篇文章转换为 REST 与 SOAP 的讨论，但如果快速 lite 比较在这种情况下会有所帮助。如果我缺少的 SOA 中有任何第三种选择，我也愿意接受它。来自现实世界部署场景的一些示例也将有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T02:22:06.693

实时和分布式有点成反比。

是的，基于 JMS 的解决方案更适合异步性，而不适合实时性。

对于您所设想的分布式 SOA 服务（是的 Web 服务）解决方案的那种实现，似乎很合适。服务在负载平衡的集群环境中运行，提供高可用性。取决于你需要多少实时。

也就是说，如果您认为不需要外部交互，那么运行直接部署，将 ui-service-dao/dal 层部署为应用服务器上的一个捆绑包，更加实时。您仍然可以使用支持会话故障转移的集群节点实现负载平衡和故障转移。这可能不提供互操作性，但是当您真正需要它时，您可以为此提供一个包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:34:11.427

让我们深入了解您的架构要求：

1.  实时高性能请求-响应型应用程序

    *   如果您可能试图实现几乎为零的应用程序延迟，那么您**必须缓存**Web 层附近的几乎所有内容，例如**memcached**，并异步延迟或进行更新。
    *   还可以考虑使用 REST，它比 SOAP 需要更少的开销，并且您可以使用 JSON 作为文档格式，它也比 XML 更紧凑，降低了网络吞吐量要求。
2.  应用程序被划分为不同的层，如 UI、业务逻辑和数据库——每一层都在一个计算机集群上工作：

    *   您使用的层数越多，您的应用程序可能具有的延迟越多，**数据库是**几乎所有架构中可扩展性最小的项目，那么您必须尽量**避免每次请求都命中它**，您肯定需要强大的缓存。
3.  这些层应支持负载平衡和故障转移功能，最好对其他交互层透明：

    *   为了提高可扩展性和故障转移，您必须寻求[服务无状态](http://www.soaprinciples.com/service_statelessness.php)，因为服务器之间的会话状态同步非常昂贵，并且具有粘性会话的负载均衡器在单个服务器崩溃时将成为问题。
    *   HTTP 负载平衡器可以非常透明。
4.  未来与各种语言的互操作性将是一个额外的可取特性

    *   SOAP 有更多花哨的功能，但并非所有语言都支持，如果您使用 REST，您可能会在这里更安全。与 SOAP 的 WSDL 相比，REST 接口通常更易于设计并且对特定技术的依赖更少。
5.  这些层将驻留在我的组织内部，即我目前不打算与外部组织服务交互。

    *   如果您认为您将与服务存储库之外的其他服务进行交互，那么您必须知道，如果您不使用标准，您可能需要一种可以进行消息转换的网关层。

# c# - 进度条未按预期更新

> ID：12161852
> 
> 赞同：0
> 
> 时间：2012-08-28T14:45:36.883
> 
> 标签：c#, progress-bar

进度条到70就好了。当循环开始时，当我去更新它时，栏不会移动。

```
int count = finalFiles.Length; //finalFiles in an array and it varies in size.
int current = 0;

private void uploadWorker_DoWork(object sender, DoWorkEventArgs e)
{  
      uploadWorker.ReportProgress(20);

      DoSomeWork();

      uploadWorker.ReportProgress(50);

      DoMoreWork();

      uploadWorker.ReportProgress(70);

      foreach (string file in finalFiles)
      {
           current++; 
           doProcess();
           uploadWorker.ReportProgress(current / count * 30 + 70);
      }
} 
```

同样，问题是进度条一旦达到 70 就不会更新。它只是不动。顺便说一下，表格没有锁定，因为我正在使用后台工作人员。

有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:52:40.227

你有一个**integer** `current`和一个**integer** `count`。由于`count`更大，当您进行除法时，它始终为 0（整数除法），直到`current`达到`current`。在进行除法之前，您应该制作`count`/`double`或`decimal`将两者之一转换为`double`/ 。`decimal`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:48:31.560

我不知道是什么`doProcess()`，但你不应该增加`current`你的 foreach 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:49:19.087

看起来你需要一些括号，例如

```
 foreach (string file in finalFiles)
      {
           doProcess();
           uploadWorker.ReportProgress( ((current / count) * 30) + 70);
      } 
```

好的，我不知道你需要的数学（对不起，我在这里做其他事情），但我建议你在计算中加上括号，因为在我看来这可能是一个问题。

# android - 使用 onitemclicklistener 获取字符串上下文

> ID：12161853
> 
> 赞同：0
> 
> 时间：2012-08-28T14:45:40.300
> 
> 标签：android, gridview, onitemclicklistener, getstring

我有以下类定义，其中包含一些我想从另一个类中获取的信息。我使用了上下文，因此 getstring() 可以工作：

```
public class Util{

public ArrayList<RecetaBean> getRellenas(Context con) {
ArrayList<RecetaBean> MiLista = new ArrayList<RecetaBean>();

RecetaBean receta1 = new RecetaBean();
String ingrediente1[] = {         con.getString(R.string.app_name), con.getString(R.string.app_name),
};
receta1.setIngredientesLista(ingrediente1);

MiLista.add(receta1);
MiLista.add(receta1);
MiLista.add(receta1);

return MiLista; 
```

}

然后在另一个类扩展活动中，我在 OnListItemClick() 上调用这个类并且工作得很好。但是在另一个收取gridview而不是列表的类中，我使用 OnItemClicklistener() 并且不起作用，这就是代码：

```
gridView.setOnItemClickListener(new OnItemClickListener() {        
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
        Util u = new Util();
        ArrayList<RecetaBean> Recetas = u.getRellenas(); 
```

错误是：

> Util 类型中的方法 getRellenas(Context) 不适用于参数（新的 AdapterView.OnItemClickListener(){}）

我不知道如何实现和修复它！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:49:36.950

在你的

```
Utils.getRellenas(Context con) 
```

您期望 Context 作为参数。我认为它可能会像这样解决

```
ArrayList<RecetaBean> Recetas = u.getRellenas(MyActivityName.this); 
```

您将“MyActivityName”替换为包含活动的名称。

# c# - 无法使用 oData 查询选项

> ID：12161854
> 
> 赞同：7
> 
> 时间：2012-08-28T14:45:47.640
> 
> 标签：c#, asp.net-web-api, odata, asp.net-web-api-odata

我有一个 ASP.NET Web API 项目。我正在尝试将一些查询选项传递给我的 API 控制器，如下所示：

```
http://localhost:61736/api/Enquiries?
callback=callback&$top=30&$skip=30&orderby=EnquiryId
&$inlinecount=allpages&_=1346164698393 
```

但我得到以下信息：

`The query parameter '$inlinecount' is not supported.`

当我尝试使用时，我也会得到同样的结果`$callback`，`$format`

知道我做错了什么吗？根据： http: [//msdn.microsoft.com/en-us/library/ff478141.aspx](http://msdn.microsoft.com/en-us/library/ff478141.aspx)我应该可以使用它们吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T15:21:54.430

[如本博](http://blogs.msdn.com/b/alexj/archive/2012/08/15/odata-support-in-asp-net-web-api.aspx)文所述，ASP.NET Web API 仅提供对 OData 的**有限**支持。我没有看到您在该列表中提到的查询参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T07:24:05.917

在当前版本中，web api 仅支持 $filter、$orderby、$top 和 $skip。您可以覆盖 QueryableAttribute 以添加对 OData 协议的更多支持。公共 nuget 发布后的签入使 ValidateQuery 方法成为虚拟方法，以便您可以覆盖它以绕过验证。[请在http://www.myget.org/F/aspnetwebstacknightly/](http://www.myget.org/F/aspnetwebstacknightly/)尝试我们的夜间构建。

您还可以使用 ODataQueryOptions。下面的代码等价于 [Queryable] 属性，只是它在看到不支持的选项时不会抛出异常。

```
public IEnumerable<Product> Get(ODataQueryOptions options) 
{
    return options.ApplyTo(_db.Products as IQueryable) as IEnumerable<Product>; 
} 
```

您可以通过 ODataQueryOptions.RawValues.InlineCount 获得 $inlinecount。有关 OData 查询支持的详细信息，请参阅：http: [//blogs.msdn.com/b/alexj/archive/2012/08/21/web-api-queryable-current-support-and-tentative-roadmap.aspx](http://blogs.msdn.com/b/alexj/archive/2012/08/21/web-api-queryable-current-support-and-tentative-roadmap.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T18:07:44.793

对 $inlinecount 的支持已于 2012 年 12 月 6 日签入项目，大概下一个版本将包含此支持。您可以下载最新的源代码或获取夜间版本：

[http://aspnetwebstack.codeplex.com/SourceControl/changeset/ed65e90e83c8](http://aspnetwebstack.codeplex.com/SourceControl/changeset/ed65e90e83c8)

```
Revision: ed65e90e83c8f9391b4f4806d305c83f55d28ff6
Author: youssefm < youssefm@microsoft.com >
Date: 12/6/2012 1:51:44 PM
Message:
[OData] Add support for the $inlinecount query option 
```

我相信每晚的包被推送到[http://www.myget.org/F/aspnetwebstacknightly/](http://www.myget.org/F/aspnetwebstacknightly/)但我还没有验证自己。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-28T21:16:35.043

如果您有机会使用 KendoUI，[这篇文章](http://www.kendoui.com/blogs/teamblog/posts/12-10-25/using_kendo_ui_with_mvc4_webapi_odata_and_ef.aspx)将解释如何通过切换到 JSON 而不是 JSONP 来禁用某些选项，例如 $callback。

# sql - 几个查询中的相同 SQL 错误

> ID：12161857
> 
> 赞同：0
> 
> 时间：2012-08-28T14:45:53.990
> 
> 标签：sql, compiler-errors, ms-access-2010, calculated-columns

> **可能重复：**
> [在查询之间引用字段值](https://stackoverflow.com/questions/12131924/referencing-field-values-between-queries)

我有 3 个类似的查询，运行时给我同样的错误

```
You tried to execute a query that does not include the specified expression 'CompanyName' as part of an aggregate function 
```

我有点理解这个问题，但我不知道如何解决它.. 这是 3 个查询中的 1 个..

```
 SELECT qb1.CompanyName, qb1.AssetName, qb1.Year, 
    (qb2.MPPOil-SUM(IIf(qb1.DatapointID=2003,
qb1.DatapointValue*1000000,
qb1.DatapointValue))) AS UnallocatedLossesOIL

    FROM PEBaseQuery AS qb1 
    INNER JOIN PE_MPPOilRevised AS qb2 
    ON qb1.AssetName = qb2.AssetName
    WHERE qb1.DatapointID In (2032,2034,2042,2036,2030,2028); 
```

这是基于以下计算：

**未分配损失 = MPP - (GAS × 1000000) - (油井 + 年度停机维护 + 出口 + 工厂 + 水库损失)**

我在另一个运行平稳的表中使用了类似的语法：S 下面是代码：

```
SELECT qb1.CompanyName, qb1.AssetName, qb1.Year, (qb1.DatapointValue/qb2.DatapointValue)*1000000 AS TRIPerMillionManHours
FROM HSEBaseQuery AS qb1 
INNER JOIN HSEBaseQuery AS qb2 
ON qb1.Assetname=qb2.AssetName
WHERE qb2.DatapointID=310005 AND qb1.DatapointID<>qb2.DatapointID; 
```

为什么一个有效而另一个无效？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:10:52.430

第一个查询包含一个聚合函数，任何不属于计算值的总和必须包含在 group by 子句中：

```
SELECT qb1.CompanyName
       , qb1.AssetName
       , qb1.Year
       , (qb2.MPPOil - SUM( IIf( qb1.DatapointID=2003,
                                 qb1.DatapointValue*1000000,
                                 qb1.DatapointValue))) AS UnallocatedLossesOIL
FROM  PEBaseQuery AS qb1 
      INNER JOIN PE_MPPOilRevised AS qb2 ON qb1.AssetName = qb2.AssetName
WHERE qb1.DatapointID In (2032,2034,2042,2036,2030,2028)
GROUP BY qb1.CompanyName
         , qb1.AssetName
         , qb1.Year
         , qb2.MPPOil; 
```

正如 HansUp 所说，第二个查询不包含聚合函数 sum()，因此不需要 group by。

# python - PyQt：QGraphicsScene 事件不会向下传播到 GraphicItems

> ID：12161860
> 
> 赞同：2
> 
> 时间：2012-08-28T14:45:59.100
> 
> 标签：python, events, pyqt, qgraphicsitem

我在填充有许多矩形（项目）的 QGraphicView 中有一个 GraphicScene。我希望每个矩形都响应鼠标单击，但我无法找到将事件处理程序附加到正确对象并将事件传播给它的钩子。

我在场景中附加了一个事件处理程序：

```
scene.event = myfunction 
```

它起作用了（它触发了每个事件），但我无法将相同的功能附加到它的一个孩子身上。你能给我一个关于在哪里搜索这样一个入口点的见解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T17:17:53.187

所以 - 我不太确定你在那里做什么，但我想不出 PyQt 中有任何东西应该将自定义函数直接映射到场景的事件方法。

你有一个实际的例子吗？

如果你正在做：

```
scene.mousePressEvent = my_mouse_function 
```

那么这不是你想要的方式。

您可以查看使用事件过滤器 (http://doc.qt.nokia.com/4.7-snapshot/eventsandfilters.html#event-filters)。

获得所需内容的最佳方法是将 QGraphicsItem 子类化（无论您使用的是 QGraphicsRectItem、QGraphicsPathItem 等）并在其上重载 mousePressEvent 方法。

[http://doc.qt.nokia.com/4.7-snapshot/qgraphicsitem.html#mousePressEvent](http://doc.qt.nokia.com/4.7-snapshot/qgraphicsitem.html#mousePressEvent)

例如：

```
from PyQt4.QtGui import QGraphicsRectItem

class MyItem(QGraphicsRectItem):
    def mousePressEvent(self, event):
        super(MyItem, self).mousePressEvent(event)
        print 'overloaded'

scene.addItem(MyItem()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T17:13:51.827

子类化视图、场景、项目等并重新实现`mousePressEvent`和/或`mouseReleaseEvent`；或在这些项目上安装[事件过滤器。](http://doc-snapshot.qt-project.org/4.8/qobject.html#eventFilter)

有关在场景中使用事件过滤器的示例，请参阅[此答案](https://stackoverflow.com/a/12117380/984421)。

这是一个重新实现[`mouseReleaseEvent`](http://doc-snapshot.qt-project.org/4.8/qgraphicsview.html#mouseReleaseEvent)视图的演示：

```
from PyQt4 import QtGui, QtCore

class Window(QtGui.QWidget):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        self.view = View(self)
        self.label = QtGui.QLabel(self)
        layout = QtGui.QVBoxLayout(self)
        layout.addWidget(self.view)
        layout.addWidget(self.label)

class View(QtGui.QGraphicsView):
    def __init__(self, parent):
        QtGui.QGraphicsView.__init__(self, parent)
        self.setScene(QtGui.QGraphicsScene(self))
        for index, name in enumerate('One Two Three Four Five'.split()):
            item = QtGui.QGraphicsRectItem(
                index * 60, index * 60, 50, 50)
            item.setData(0, name)
            self.scene().addItem(item)

    def mouseReleaseEvent(self, event):
        pos = event.pos()
        item = self.itemAt(pos)
        if item is not None:
            text = 'Rectangle <b>%s</b>' % item.data(0).toString()
        else:
            text = 'No Rectangle (%d, %d)' % (pos.x(), pos.y())
        self.parent().label.setText(text)
        QtGui.QGraphicsView.mouseReleaseEvent(self, event)

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.resize(400, 400)
    window.show()
    sys.exit(app.exec_()) 
```

# sqlite - sqlite3 错误：复杂更新操作上的数据类型不匹配

> ID：12161862
> 
> 赞同：0
> 
> 时间：2012-08-28T14:46:02.500
> 
> 标签：sqlite, sql-update, sqldatatypes

我有两张桌子`auth_user`和`temp`

这些是他们的架构：

```
CREATE TABLE "auth_user" (
    "id" integer NOT NULL PRIMARY KEY,
    "username" varchar(30) NOT NULL UNIQUE,
    "first_name" varchar(30) NOT NULL,
    "last_name" varchar(30) NOT NULL,
    "email" varchar(75) NOT NULL,
    "password" varchar(128) NOT NULL,
    "is_staff" bool NOT NULL,
    "is_active" bool NOT NULL,
    "is_superuser" bool NOT NULL,
    "last_login" datetime NOT NULL,
    "date_joined" datetime NOT NULL
);

CREATE TABLE "temp" ( "id" integer, "username" varchar(30)); 
```

如果用户名相同，我希望将表中的`id`字段`auth_user`更新为表中的`id`字段。`temp`我怎样才能做到这一点？

我试过这个 SQL：

```
Update auth_user set id=(select temp.id from temp where temp.username=auth_user.username); 
```

但我得到这个错误：

```
Error: datatype mismatch 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T06:09:18.173

I found this question [Update table values from another table with the same user name](https://stackoverflow.com/questions/3845718/sql-how-to-update-table-values-from-another-table-with-the-same-user-name)

It is similar to my question. Looking at the [answer](https://stackoverflow.com/a/3845931/883832) in that page, I tried this query

```
update auth_user set id=(select temp.id from temp where temp.username=auth_user.username) where exists (select * from temp where temp.username=auth_user.username); 
```

and it works great. Same as my query in the question but with just an extra `where` clause. I don't get the `Error: datatype mismatch` now (but I don't know the exact reason why).

# delphi - Delphi Chromium Embedded 的问题

> ID：12161863
> 
> 赞同：5
> 
> 时间：2012-08-28T14:46:09.090
> 
> 标签：delphi, chromium

我是 StackOverflow 的新手，通常可以在这里找到我正在寻找的答案。这次除外。我很困惑。开始：

几周前，我下载了[Delphi Chromium Embedded](http://code.google.com/p/delphichromiumembedded/)的 Revision 306 ，并将其安装在 Delphi XE 的新副本上。现在，这是从 DCEF Google 代码页面的“下载”部分获取的。

我注意到的第一件事是该站点提到支持 Delphi XE，但没有专门针对 XE 包含的项目包。自然，我安装了适用于 Delphi 2010 的软件包，因为 XE2 的软件包由于 FMX 和其他一些原因（？）而无法工作。

过去在 D7 上使用过旧版本，我自然而然地在表单上放置了一个 TChromium，将默认 URL 设置为`http://foundry-local/assist/node/`，然后运行应用程序。这是我受到的欢迎：

> 异常 EExternal Exception in libcef.dll ... 外部异常 80000003。

无法在他们的新 Google 群组中发布任何内容（他们在代码页面上禁用了问题跟踪器），所以我想我会来这里弄清楚发生了什么。但就在此之前，我决定从主干检查最新的代码构建。成功安装它（仍然没有 XE 包），在空白表单上放置一个 TChromium，然后运行该应用程序。这次我受到了如下的欢迎：

> FoundryAssistNodeManager.exe 模块中的异常 EReadError 位于 0004BE24。读取 Chromium1.Options.AcceleratedCompositingEnabled 时出错：属性路径无效。

因此：我真的很困惑。

> （编辑：该应用程序可以看到核心库，并且它们正在被拾取。）

有没有其他人在 Delphi XE 上使用 DCEF 时遇到问题？如果是这样，有人有某种解决方案吗？

看，我正在为我即将发布的产品构建一个定制的帮助平台。使用IE是不可靠的，Gecko的组件也不再开发。

任何提示，指南都会很棒。提前谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T05:57:43.703

从技术上讲，这不是我问题的答案，但我觉得有必要向这个问题的观众展示最佳路线。

真的很简单：升级到 DCEF3。

我本地的一些开发人员也报告了同样的问题，但没有明显的修复。使用版本 3 解决了这个问题。

对于上面的评论者，感谢您的帮助。非常感激。

# sql - 如何使用 SELECT 语句将 SQL 中的日期转换为文本？

> ID：12161868
> 
> 赞同：2
> 
> 时间：2012-08-28T14:46:14.600
> 
> 标签：sql, sql-server-2008, date, datetime

我一直在寻找“类似”问题的复杂解决方案，但我认为我需要的要简单得多。

我有一张桌子，里面有“赢家”。姓名、地址等……最重要的是，他们获胜的日期。然后我想在网站上显示这个。

```
SELECT FirstName, LastName, Prize, Winning_Date FROM Prize_Table
ORDER BY Winning_Date DESC 
```

现在该`Winning_Date`列是 data type `date`。

所以这是我的问题。

如果日期是`2012-01-01`，我希望能够以常规文本仅显示月份和年份...。

例如：

```
January, 2012 
```

如果能够仅将月份缩写（Jan）和年份放在 span 标签内的两个不同位置，这也将是一件好事。有点像你看到那些带有月份、年份……和/或日期等的小日历图标。

```
JAN

2012 
```

我想确保我保留按日期排序的能力......月，年都可以。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:49:57.200

你可以这样做：

```
SELECT FirstName,
       LastName,
       Prize,
       datename(mm, Winning_Date) + ', ' + datename(yyyy, Winning_Date) AS 
FROM Prize_Table
ORDER BY Winning_Date DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:55:37.803

这实际上取决于您的 sql 风格（例如 mysql、t-sql）。

在mysql中你可以做这样的事情。

```
Select concat(winner, concat(' ', date_format(Winning_date, '%m%d%Y'))) 
```

在 t-SQL（用于 MSsql 服务器）中，您可以使用

```
select winner + ' ' + CONVERT(VARCHAR, Winning_date, 120) 
```

convert-function 调用中的数字表示日期转换为的格式。

有关格式的更多示例，请参见[此处](http://www.sqlusa.com/bestpractices/datetimeconversion/)。

啊。我没有看到 sqlserver 2008 的标签。我把这个留给其他人，很难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:52:28.693

尝试这个：

```
SELECT FirstName, LastName, Prize, (DATENAME(month, Winning_Date) + ',' + DATENAME(year, Winning_Date)) AS "MonthYear"  FROM Prize_Table
ORDER BY Winning_Date DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T14:53:22.333

Convert 函数将数据显示为文本。

请参阅[http://msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

您可以谷歌查找日期格式功能或使用替换（）等写你的。

在 MSSQL 中，您可以： 按不在结果集中的内容排序。
并非所有 DBMS 都具备这种能力。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T14:53:56.367

试试这个`DATENAME()`功能。

这将获取月份的名称和年份作为字符串。因此，您的 select 语句可以更改为：

```
SELECT 
    FirstName, 
    LastName, 
    Prize, 
    DATENAME(month, Winning_Date) + ', ' +  DATENAME(year, Winning_Date)
FROM Prize_Table
ORDER BY 
    Winning_Date DESC 
```

订购应该仍然有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T14:54:07.327

这是查询：

```
SELECT FirstName, LastName, Prize, DATENAME(MM, Winning_Date) + ', ' + CAST(YEAR(Winning_Date)     AS VARCHAR(4)) AS [Winning_Date] FROM Prize_Table 
ORDER BY DATEPART(month,Winning_Date) DESC , DATEPART(year,Winning_Date) DESC 
```

# jquery - jQuery inArray 验证问题

> ID：12161869
> 
> 赞同：0
> 
> 时间：2012-08-28T14:46:17.197
> 
> 标签：jquery, arrays, forms, conditional-statements

我的 inArray jQuery 验证不起作用：

html：

```
<input type="text" name="number" class="verify" conditions="requierd numeric"/>
<input type="text" name="number2" class="verify" conditions="requierd string"/> 
```

带有我的 inArray 验证的 jQuery 代码：

```
 $('input.verify').blur(function(){
        var conditions = $(this).attr('conditions').split(' ');
            if($.inArray('requierd', conditions)){
                alert('ok');
            }
    }); 
```

但是当我把`=== false`我的状况抛在脑后时，它就起作用了！

```
 $('input.verify').blur(function(){
        var conditions = $(this).attr('conditions').split(' ');
            if($.inArray('requierd', conditions) === false){
                alert('ok');
            }
    }); 
```

为什么 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:49:54.827

官方[文档](http://api.jquery.com/jQuery.inArray/)说：

> 未找到匹配项时返回 -1。如果数组中的第一个元素与值匹配，则 $.inArray() 返回 0。
> 
> 因为 JavaScript 将 0 视为松散地等于 false（即 0 == false，但 0 !== false），如果我们要检查数组中是否存在值，我们需要检查它是否不等于（或大于) -1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:49:49.040

与 同`indexOf()`，`$.inArray`必须核对`-1`。否则，如果未找到该元素，它将返回`-1`哪个是*真*值，即它将您的条件解析为真。

简而言之：

```
if ($.inArray('something', array) != -1) 
```

请注意，您实际上并不需要拆分条件字符串 - 您可以使用带有单词边界的 REGEX。

```
if (/\brequired\b/.test($(this).attr('conditions')) { /* code */ } 
```

最后，您应该使用`data-`属性而不是仅仅发明自定义属性，因为后者会使您的 HTML 无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:51:03.113

[`$.inArray()`](http://api.jquery.com/jQuery.inArray/)`-1`如果未找到该元素，将返回，其计算结果为`true`. 要么使用：

```
if (~$.inArray('requierd', conditions)) 
```

这将起作用，因为`~-1 == 0 == false`. 或者，作为替代方案，也是迄今为止最常见的：

```
if ($.inArray('requierd', conditions) != -1) 
```

# php - 说明 REST 概念（使用 PHP）

> ID：12161874
> 
> 赞同：0
> 
> 时间：2012-08-28T14:46:30.473
> 
> 标签：php, rest, curl

我对 REST 的一些概念有点困惑，希望能得到一些澄清。我正在关注本教程，所以我使用的任何代码都来自它。 [http://phpmaster.com/rest-can-you-do-more-than-spell-it-3/](http://phpmaster.com/rest-can-you-do-more-than-spell-it-3/)

**1）。每当我想发布数据时，我是否必须通过 curl 交易的整个过程？**

```
<?php
// set up the URI value involved in a variable
$uri = "http://www.funland.com/summerschedule";

// set up the data that is going to be passed
$events = array(
array("event" => "20120601-0001",
      "name"  => "AC/DC Drink Till U Drop Concert",
      "date"  => "20120601",
      "time"  => "22000030"),
array("event" => "20120602-0001",
      "name"  => "Enya – Can You Feel the Peace",
      "date"  => "20120602",  
      "time"  => "19300045"),
array("event" => "20120603-0002",
      "name"  => "Nicki Menaj – The Midnight Girls Concerrtt",
      "date"  => "20120603",  
      "time"  => "21300039"));
$jsonData = json_encode($events) 

// perform the curl transaction
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $jsonData);

$response = curl_exec($ch); 
$decode = json_decode($response);
print_r($resonse); 
```

**2\. 每当我创建一个链接时，就 URI 而言，我是否需要做一些特别的事情，或者我会根据它的访问方式来格式化它吗？**

要创建指向 www.example.com/restaurant/42 的链接，我会创建以下链接，还是我需要做其他事情？

```
//assuming $resource = restaurant in this example

<a href ="www.example.com/".$resource."/".$id">Item 42</a> 
```

**3\. 对于解析 URL 路径的代码，我是在每个文件中都有这个，还是我会创建一个文件（例如 api.php）并在每个文件中包含它？**

```
<?php
// assume autoloader available and configured
$path = parse_url($_SERVER["REQUEST_URI"], PHP_URL_PATH);
$path = trim($path, "/");
@list($resource, $params) = explode("/", $path, 2);

$resource = ucfirst(strtolower($resource));
$method = strtolower($_SERVER["REQUEST_METHOD"]);
$params = !empty($params) ? explode("/", $params) : array();

if (class_exists($resource)) {
   try {
     $resource = new $resource($params);
     $resource->{$method}();
}
catch (Exception $e) {
    header("HTTP/1.1 500 Internal Server Error");
}
}
else {
  header("HTTP/1.1 404 File Not Found");
} 
```

**4.我在哪里为某个类的每个功能设置可接受的“动词”？**以下代码来自上面链接的教程的第 2 部分。我看到有一个类构造函数，但是我应该为那里的每个函数指定可接受的操作吗？也许我误解了这段代码，但我看不出它在哪里说 DELETE 不被接受为餐厅/id之类的东西

```
<?php
abstract class Resource
{
    protected static $httpMethods = array("GET", "POST", "HEAD",
    "PUT", "OPTIONS", "DELETE", "TRACE", "CONNECT"); 

protected $params;

public function __construct(array $params) {
    $this->params = $params;
}

protected function allowedHttpMethods() {
    $myMethods = array();
    $r = new \ReflectionClass($this);
    foreach ($r->getMethods(\ReflectionMethod::IS_PUBLIC) as $rm) {
        $myMethods[] = strtoupper($rm->name);
    }
    return array_intersect(self::$httpMethods, $myMethods);

}

public function __call($method, $arguments) {
    header("HTTP/1.1 405 Method Not Allowed", true, 405);
    header("Allow: " . join($this->allowedHttpMethods(), ", "));
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:57:30.617

为了：

1.  您可以编写一个封装整个 cURL 小曲的函数。

2.  不确定是什么`$resource`和`$id`指向什么，但这似乎是有道理的；请注意，URL 应以`http://`or开头`https://`。

3.  该代码看起来像一个典型的路由器，应该在每次请求时调用；确保在该代码之前设置您的自动加载器，以便您的类自动加载。

4.  您的所有资源类都将从该基类扩展；通过`public function get() { }`在您的类中创建，路由器将在有方法的情况下自动调用该`GET`方法；无论您未实现什么，都会导致`__call()`运行，这将为 REST 客户端提供错误代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:59:42.173

响应 Q4 - 我最喜欢的方法是创建一个表示 HTTP 进程的接口，并`method_exists()`在对被调用资源执行方法之前使用该接口检查该接口。

```
// declaring the methods
interface HTTP {
    public function get();
    public function post();
    public function put();
    ....
}

// checking if the attempted method is allowable
method_exists('HTTP', $method); 
```

# vb.net - WebBrowser 控件使用过多的 CPU 和 RAM

> ID：12161875
> 
> 赞同：1
> 
> 时间：2012-08-28T14:46:33.257
> 
> 标签：vb.net, timer, browser

在我的应用程序中，我只有一个 webbrowser 和几个计时器，但如果 webbrowser 正在加载，它会使用 50% 的 CPU 和 5 分钟左右的 120k RAM。我能做些什么？

我的代码：

```
Public Sub work()
    WebBrowser1.Navigate("Site")
    tim.Start()
End Sub

Public Sub work2()
    WebBrowser1.Document.GetElementFromPoint(point).InvokeMember("click")
    tim2.Start()
    tim.Stop()
End Sub

Dim point As New Point(800, 30)
Dim WithEvents tim As New Timer
Dim WithEvents tim2 As New Timer

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    tim.Interval = 6000
    tim2.Interval = 6000
    work()
End Sub

Private Sub tim_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles tim.Tick
    work2()
End Sub

Private Sub tim2_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles tim2.Tick
    work()
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-03T07:08:52.520

net wrapper 使用 IE7，但如果您将其更改为您的程序的最新版本，它将使其更安全并提高性能，而不是您可以使用带有您的程序名称的 DWORD 子键 1 打开 gpu 渲染和它会让gpu处理一些工作量也大大提高速度。使用这些使 webcontrol 从视频期间使用大约 70-80% 的 CPU 下降到低 3% 和高 20% 的 CPU 使用率，有利于未来参考，还可以在此处了解有关注册表功能的更多信息[https://msdn.microsoft.com/en-us/library/ee330733(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/ee330733(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:55:19.313

如果控件中加载了一些繁重的网页，120k 听起来非常合理。例如，如果您在 IE 中以 mht 格式（完整存档）保存 microsoft.com 的主页，它几乎有 1MB 大。处理器的使用很可能取决于点击处理程序的作用 - 是否有任何繁重的脚本附加到元素？

# javascript - 在更新面板回发中注册客户端脚本块

> ID：12161879
> 
> 赞同：0
> 
> 时间：2012-08-28T14:46:51.423
> 
> 标签：javascript, asp.net, vb.net, registerstartupscript

*更新面板中的 ASP.NET VB 回发*

我试图在这个错误上加载一个 JS 函数（关闭加载覆盖和弹出窗口应该出现错误）。当我尝试显示标签时，它可以正常工作（当然它被覆盖层覆盖）。

```
Me.lblerrormsg.Visible = True 
```

我尝试了 3 种不同的方法来注册脚本：

```
Dim errorScript = "<script>alert('WTF');</script>" '<-- not even this works

Page.ClientScript.RegisterClientScriptBlock(Page.GetType(), "errorDemoManual",
     errorScript, True)

'Tried this one with the Panel & Page itself...
ScriptManager.RegisterStartupScript(pnlPatientInfo, pnlPatientInfo.GetType(), 
     "ErrorDemo", errorScript, True)

ScriptManager.RegisterStartupScript(Page, Page.GetType(), "errorScript",
     errorScript, True) 
```

**没有**一个工作......我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:24:38.317

我认为这些都行不通，因为（我认为，尽管我可能是错的）这些方法只能通过将脚本添加到 html 页面*表单*的开头或结尾来操作。您*可能*能够将脚本直接呈现到 ajax 响应中，例如在更新面板中使用文字控件，但我记得有一些问题。已经有几年了，但它似乎沿着这个问题的思路运行：[SCRIPT tag removed from AJAX response in Internet Explorer](https://stackoverflow.com/questions/8430141/script-tag-removed-from-ajax-response-in-internet-explorer)。注意：他们显然通过调整作为响应发送的 html 解决了他们的问题。*有点*_*安全的赌注是在您的更新面板中有某种隐藏的输入或内容，其中包含您需要的一切，并有某种 JavaScript 仅在更新面板更新时运行，并根据隐藏的输入或内容触发某些内容. 当然，这很容易成为设置和维护的麻烦（除非，也许，您正在使用`event`某些 javascript 库提供的某种通用机制）。*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T22:51:54.240

问题是我需要使用 RadScriptManager - Telerik UpdatePanels 的一部分才能使其正常工作。

```
RadScriptManager.RegisterClientScriptBlock(Page, Page.GetType(), "errorDemoManual", "errorDemoManual();", True) 
```*

# ussd - 关闭远程 USSD 会话

> ID：12161880
> 
> 赞同：2
> 
> 时间：2012-08-28T14:46:52.740
> 
> 标签：ussd

我正在开发一个 USSD 客户端。除了关闭远程 USSD 会话外，一切正常。

在规范中，我们可以看到函数 CUSD: AT+CUSD=2 应该关闭 USSD 会话，但事实并非如此。

实际上，当我执行此序列时：

```
AT+CUSD='#xxx#',12
AT+CUSD='1',12 
```

我有一个开放的远程连接。在您的手机上，您可以通过拨打#xxx*#来打开一个新会话

如果我发送：

```
 AT+CUSD='#xxx*#',12 
```

这不是打开一个新的远程会话。如果我发送：

```
AT+CUSD=2
AT+CUSD='#xxx#' 
```

这不是打开一个新的远程会话。

你知道如何关闭远程会话吗？我在 Windows 或 Linux 上使用华为密钥 E160 和 E173。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-16T06:25:33.513

按以下方式使用。AT+CUSD='#xxx#',15 AT+CUSD=2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-21T14:11:13.000

我发布这个是因为这是关于使用 AT 命令终止 USSD 会话的最佳结果，也因为答案含糊不清。这是我最后使用的 c# 代码（我将命令发送到 gsm 调制解调器）。希望它可以帮助别人

```
 SerialPort SendingPort=null;

    public string TerminateUssdSession()
    {
            InitializePort();

            //// generate terminate command for modem
            string cmd = "";
            cmd = "AT+CUSD=2\r";

            // send cmd to modem
            OpenPort();

            SendingPort.Write(cmd);

            Thread.Sleep(500);

            string response = SendingPort.ReadExisting();

            return response;

    }

    private void InitializePort()
    {
        if (SendingPort == null)
        {
            SendingPort = new SerialPort();
            SendingPort.PortName = PortName;//put portname here e.g COM5
            SendingPort.BaudRate = "112500";
            SendingPort.Parity = Parity.None;
            SendingPort.DataBits = 8;
            SendingPort.StopBits = StopBits.One;
            SendingPort.Handshake = Handshake.None;
            SendingPort.ReadTimeout = 500;
        }
    }

    private void OpenPort()
    {
        if (!SendingPort.IsOpen)
        {
            SendingPort.Open();
        }
    } 
```

# c# - 如何在 Windows 窗体中使用 for 循环在拆分容器中添加控件

> ID：12161885
> 
> 赞同：2
> 
> 时间：2012-08-28T14:47:08.217
> 
> 标签：c#, winforms

我正在开发一个包含 3 个拆分容器（每个两个面板，总共 6 个面板）的 Windows 应用程序。现在我想在每个面板中动态添加 3 个标签。我正在尝试使用 for 循环并访问所有拆分容器及其面板的解决方案，但我不知道如何使用 for 循环来访问拆分容器。我可以为此使用for循环吗？我还想同时向所有面板（6）添加控件。这个怎么做。提前致谢..！！这就是我所做的......

```
foreach (SplitContainer sp in this.Controls)
        {          
            Label tileTitle = new Label();
            tileTitle.Text = "OneClick";
            tileTitle.Visible = true;
            tileTitle.Location = new Point(10, 10);
            sp.Panel1.Controls.Add(tileTitle);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:10:30.297

```
foreach (Control c in this.Controls)
{
    if (c is SplitContainer)
    {
        Label tileTitle = new Label();
        tileTitle.Text = "OneClick";
        tileTitle.Visible = true;
        tileTitle.Location = new Point(10, 10);

        Label tileTitle2 = new Label();
        tileTitle2.Text = "OneClick";
        tileTitle2.Visible = true;
        tileTitle2.Location = new Point(10, 10);

        ((SplitContainer)c).Panel1.Controls.Add(tileTitle);
        ((SplitContainer)c).Panel2.Controls.Add((tileTitle2));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T15:41:53.060

尝试使用 Controls.OfType 扩展只获取 SplitContainer 类型的控件

```
foreach (SplitContainer sp in this.Controls.OfType<SplitContainer>())
{
    Label title = MakeLabel("OneClick", new Point(10, 10);
    sp.Panel1.Controls.Add(title);
    Label title1 = MakeLabel("OneClick", new Point(10, 10);
    sp.Panel2.Controls.Add(title1);
}

private Label MakeLabel(string caption, Point position)
{
    Label lbl = new Label();   
    lbl.Text = caption;   
    lbl.Location = position;   
    lbl.Visible = true;   
    return lbl;
} 
```

**编辑** 史蒂夫，您将相同的标签添加到面板 1 和面板 2。我在 panel2 的 add 方法中修复了变量名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T08:23:22.263

我以与史蒂夫相同的方式完成此操作，但我使用 a来存储所有拆分容器，因为您可以同时`TableLayoutPanel`添加多个。 `SplitContainer``Dockstyle.Fill`

```
 private void Form1_Load(object sender, EventArgs e)
    {
        foreach (SplitContainer sc in this.tableLayoutPanel1.Controls.OfType<SplitContainer>())
        {
            Label title = MakeLabel("OneClick", new Point(10, 10));
            sc.Panel1.Controls.Add(title);
            Label title1 = MakeLabel("TwoClick", new Point(10, 10));
            sc.Panel2.Controls.Add(title1);
        }
    }

    private Label MakeLabel(string caption, Point position)
    {
        Label lbl = new Label();
        lbl.Text = caption;
        lbl.Location = position;
        lbl.Visible = true;
        return lbl;
    } 
```

该解决方案完美运行，如下所示：http: [//imageshack.us/photo/my-images/838/splitcontainer.png/](http://imageshack.us/photo/my-images/838/splitcontainer.png/)

# wcf - wcf 休息服务 xml 结构

> ID：12161887
> 
> 赞同：2
> 
> 时间：2012-08-28T14:47:18.533
> 
> 标签：wcf

我正在为我的项目使用实体框架和 wcf 休息服务。我需要的是我想改变像这样生成的 xml 结构

```
<ArrayOfBug>
<Bug>
<BugID>1</BugID>
<PageName>Home.aspx</PageName>
<BugDescription>Bug Testing</BugD`enter code here`escription>
<Priority>H</Priority>
</Bug>
</ArrayOfBug>

------------- 
```

我需要属性而不是这样的元素

```
 <ArrayOfBug>
    <Bug BugID="1" PageName="Home.aspx" BugDescription="Bug Testing" Priority="H" >
    </Bug>
    </ArrayOfBug> 
```

最好的方法是什么？我的界面是这样的

```
[OperationContract]
        [WebGet(BodyStyle=WebMessageBodyStyle.Bare,  UriTemplate = "/SelectAllBug", ResponseFormat = WebMessageFormat.Xml )]
        List<Bug> SelectAllBug(); 
```

提前感谢莫尼什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:18:15.117

WCF 中没有开箱即用的方式来做你想做的事。

您可以通过创建自定义消息格式化程序来扩展 WCF，如这篇[优秀的博客文章中所示。](http://blogs.msdn.com/b/carlosfigueira/archive/2011/05/03/wcf-extensibility-message-formatters.aspx)不利的一面是，您需要花一些时间来了解 WCF 消息处理管道如何工作以潜在地处理请求和响应消息的格式设置。

# android - Android DialogBu tton 不关闭

> ID：12161888
> 
> 赞同：1
> 
> 时间：2012-08-28T14:47:18.870
> 
> 标签：android

`DialogButton`即使我在其中，我也不会拒绝`.dismiss()`。我的代码：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.iabout);
    // custom dialog
    final Dialog dialog = new Dialog(context);
    dialog.setContentView(R.layout.iabout);

    dialogButton = (Button) dialog.findViewById(R.id.btAboutOK);
    // if button is clicked, close the custom dialog
    dialogButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            dialog.dismiss();
        }
    }); 
} 
```

感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:05:21.560

请不要使用对话框，请使用[DialogFragments](https://developer.android.com/reference/android/support/v4/app/DialogFragment.html)。它们更容易维护。 *（对于预蜂窝添加支持库到您的项目）*

然后在你的`DialogFragment`课堂上使用类似这样`AlertDialog.Builder`的：`onCreateDialog(Bdl bundle)`

```
public class MyDialogFragment extends DialogFragment {

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {

    return new AlertDialog.Builder(getActivity())
            .setIcon(R.drawable.alert_dialog_icon)
            .setTitle(R.string.alert_dialog_custom_title)
            .setPositiveButton(android.R.string.ok,
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        ((MyActivity)getActivity()).doPositiveClick();
                    }
                }
            )
            .setNegativeButton(android.R.string.cancel,
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        ((MyActivity)getActivity()).doNegativeClick();
                    }
                }
            )
            .create();
}

} 
```

这些例子可以在[这里找到。](https://developer.android.com/reference/android/app/DialogFragment.html#BasicDialog)

如果您打算使用旧的使用对话框的方式，请至少使用[对话框生成器](https://developer.android.com/reference/android/app/AlertDialog.Builder.html)。

然后根据上面的示例，您可以设置回调方法。

如果您想使用自定义布局进行自定义对话框，使用s，那么您可以正确控制对话框的生命周期，`DialogFragment`然后您的自定义按钮可以只调用`dismiss()`.`DialogFragment`

阅读此处提到的示例[。](https://developer.android.com/reference/android/app/DialogFragment.html#BasicDialog)

干杯，克里斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T15:04:36.007

根据这个答案[https://stackoverflow.com/a/3378859/975959](https://stackoverflow.com/a/3378859/975959)，问题可能是因为您将对话框放在了`onCreate()`方法中。

虽然这个答案是关于方向变化的问题，但考虑他们的答案可能会更好：将对话实现移动到

```
@Override
onPostCreate() 
```

方法。希望这可以帮助。

您还可以添加`setCancelable(true)`允许使用后退按钮关闭对话框

# box-api - Box.Net API v2.0 在服务操作上移动文件

> ID：12161891
> 
> 赞同：0
> 
> 时间：2012-08-28T14:47:21.587
> 
> 标签：box-api

构建一个允许通过用户输入动态移动文件的工作流（重命名，整个工作）。使用服务操作，Web 服务将根据用户输入字段和其他一些幕后处理重命名和移动文件。但是，一旦服务运行并且窗口关闭，文件就会移动，但用户体验会变差。该文件在预览窗格中不断刷新，重定向回根目录，并且在您离开之前没有任何工作正常。

理想的解决方案是当我们正在查看“处理”文件夹时，移动文件并且用户移动到文件夹中的下一个文件（或至少保留在文件夹中）。

有没有理想的最佳实践？我是否只需要复制文件而不是移动，然后在事后运行删除例程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:21:26.560

您最好通过 Box dot com 的 API 上的电子邮件与 Box 联系，以更好地解释您的应用程序正在尝试完成什么。一般来说，描述业务案例有助于我们更快地解决此类问题。

# android - android twitter4j 回调不起作用

> ID：12161900
> 
> 赞同：0
> 
> 时间：2012-08-28T14:47:51.703
> 
> 标签：android, twitter, callback, twitter4j

使用 twitter 进行身份验证后，我遇到了回调问题。我在 onNewItem 上获得了令牌，但网页仍然存在。

这是我的代码

```
public class TwitterRequest extends Activity {

    private Twitter niceTwitter;
    public RequestToken niceRequestToken;
    private Twitter twitter;
    private RequestToken requestToken;
    public final static String TWIT_KEY = "dsadsdsdsads";

    public final static String TWIT_SECRET = "sdsdsdsd";

    public final static String TWIT_URL = "callbackapp://tweeter";

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        niceTwitter = new TwitterFactory().getInstance();

        niceTwitter.setOAuthConsumer(TWIT_KEY, TWIT_SECRET);

        niceRequestToken = null;

        try {
            niceRequestToken = niceTwitter.getOAuthRequestToken(TWIT_URL);
        } catch (TwitterException e) {
            e.printStackTrace();
            Dbg.p("niceRequestToken: " + niceRequestToken);
        }

        String authURL = niceRequestToken.getAuthenticationURL();

        startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(authURL)));

    }

    protected void onNewIntent(Intent intent) {

        super.onNewIntent(intent);

        Uri twitURI = intent.getData();
        Intent response = new Intent();

        if (twitURI != null && twitURI.toString().startsWith(TWIT_URL)) {

            String oaVerifier = twitURI.getQueryParameter("oauth_verifier");

            try {

                AccessToken accToken = niceTwitter.getOAuthAccessToken(
                        niceRequestToken, oaVerifier);

                String token = accToken.getToken();

                response.putExtra("token", token);

            } catch (TwitterException te) {
                Log.e("tag",
                        "Failed to get access token: " + te.getMessage());
                response.putExtra("token", "error");
            }

            setResult(RESULT_OK, response);
            finish();
        }
    }

} 
```

打开网页时，我登录 twitter 并收到令牌，但浏览器可见并且 android 不会关闭页面。

这是我的清单

```
<activity
            android:name=".activities.twitter.TwitterRequest"
            android:launchMode="singleInstance" >
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />

                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />

                <data
                    android:host="tweeter"
                    android:scheme="callbackapp" />
            </intent-filter>
        </activity> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:54:08.397

问题是您启动了一个启动浏览器应用程序的新活动。

此时您有 2 个活动。当您在第一个活动上调用 finish() 时，第二个活动仍将保留。

我建议你`WebView`在你的活动中做一个，这样你就可以控制网页的可见性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:53:41.313

试试下面修改的清单活动条目

```
<activity
            android:name=".activities.twitter.TwitterRequest"
            android:launchMode="singleTask" >
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />

                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />

                <data
                    android:host="callback"
                    android:scheme="x-oauthflow-twitter" />
            </intent-filter>
        </activity> 
```

# asp.net - 在 ASP.NET MVC3 中实现报表功能（Crystal Report）

> ID：12161908
> 
> 赞同：2
> 
> 时间：2012-08-28T14:48:11.023
> 
> 标签：asp.net, asp.net-mvc-3, crystal-reports, report

我正在开发一个 ASP.NET MVC3.0 应用程序，需要创建一些报告。我不知道如何将 Crystal Reports 或任何其他免费报告工具与 MVC3.0 集成以实现报告。你能告诉我如何在 ASP.NET MVC3.0 中生成报告吗

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T20:06:12.187

请浏览此博客。作者在视觉表示中一步一步解释。

[http://kbochevski.blogspot.in/2010/01/aspnet-mvc-and-crystal-reports.html](http://kbochevski.blogspot.in/2010/01/aspnet-mvc-and-crystal-reports.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T10:30:22.983

您可以查看此博客，其中您可以在 ASP.NET MVC razor 中实现水晶报表。

[http://atikpassion.blogspot.com/2014/11/aspnet-mvc-sap-crystal-report.html](http://atikpassion.blogspot.com/2014/11/aspnet-mvc-sap-crystal-report.html)

# jquery - 如何从外部每个循环中脱颖而出

> ID：12161913
> 
> 赞同：11
> 
> 时间：2012-08-28T14:48:33.210
> 
> 标签：jquery

我有以下情况：

```
$.each(array, function() {
    ...
    $.each(array1, function() {
        if condition () { }
    });
}); 
```

`each`当我的条件在内部循环内评估为 true 时，如何跳出外部`each`循环？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-28T14:50:45.983

```
$.each(array, function() {
    var flag = true;

    $.each(array1, function() {
        if (condition) {
            flag = false;
            return false;
        }
    });

    return flag;
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T14:51:52.953

在外循环中设置要测试的值以退出

```
$.each(array, function() {
    var exit = false;
    $.each(array1, function() {
        if ( condition ) { 
           exit = true;
           return false;
        }
    }
    if (exit){
        return false;
    }
} 
```

# javascript - 选择多个实例中的第一个

> ID：12161918
> 
> 赞同：4
> 
> 时间：2012-08-28T14:48:59.447
> 
> 标签：javascript, jquery

我`<section>`在班级的一页上有 3 个 s，`.slider`其中有几个`<article>`s。为了使这些作为选项卡式内容工作，我想使用 jQuery 来隐藏除了这些`<article>`s 中的第一个之外的所有内容。

以下：

```
$(".slider > article:not(:first)").hide(); 
```

隐藏除了第一个之外的所有内容`<article>`，`<section>`我需要它遍历三个`<section>`s 并隐藏每个中的第一个。我假设我需要使用`each()`来遍历它们，但我无法使任何工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T14:50:16.920

```
$(".slider > article:not(:first-child)").hide(); 
```

如果不是第一个孩子，你可以这样做。

```
$(".slider").find("article:not(:first)").hide(); 
```

# mysql - Varchar、Char 或 Binary 以提高 MySQL 性能

> ID：12161933
> 
> 赞同：1
> 
> 时间：2012-08-28T14:49:55.547
> 
> 标签：mysql, database, database-design, relational-database, varchar

我正在使用 MySQL，并且我在某些地方读到 using `CHAR`in indexed columns 比 use 快 20% `VARCHAR`。在其他地方似乎它的好处是只有当表没有任何`VARCHAR`列时。真的吗？

我要存储的信息是 GUID。如果数据库使用字符集 utf8 ，将数据存储在 a`BINARY`或 a中是更好的选择吗？每次我想通过 GUID 插入、更新或查询过滤时，是否`CHAR`值得将我的数据转换为？`BINARY`我更喜欢更快的数据访问而不是节省磁盘使用量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T21:04:11.127

与可变宽度类型相比，任何固定宽度的列类型都将有助于更快的搜索操作。除非您的表是分区的，否则即使在不涉及它们的操作上，可变宽度类型也会降低性能。作为考虑，考虑一下算法，当所有列都是固定宽度时，如何迭代列中的所有值，然后当一些不是：

对于所有固定宽度的表（或分区），您可以使用简单的指针算法，每次通过循环时，将分区中所有列的组合数据宽度的值相加。

但是，如果有任何可变宽度列，则需要根据列的实际磁盘“宽度”计算每次迭代添加到指针的数量。

# file - 另一个 jar 中 jar 的文件路径

> ID：12161935
> 
> 赞同：0
> 
> 时间：2012-08-28T14:49:59.923
> 
> 标签：file, jar, eclipse-plugin

对于 Eclipse 插件，我需要引用插件目录中的 jar 文件（为用户提供代码）。这在开发时运行插件时（在运行时-eclipse-应用程序内）非常有效。

但是当我建立一个更新站点时，我的插件被构建到一个 jar 文件中。图像的文件路径仍然有效，但是当应该导入 jar 时，eclipse 显示以下错误： `Description Resource Path Location Type The container 'DoodleDebug' references non existing library 'file:\C:\Users\Me\.eclipse\org.eclipse.platform_3.7.0_740800064\plugins\ch.unibe.scg.doodledebug_1.0.0.201208281642.jar!\DoodleDebug-Client.jar'`

外部 jar 路径是正确的，当使用 WinRAR 检查它时，我可以在其中看到所需的 jar 文件！

为什么这没有按预期工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:08:47.667

您将需要以分解的形式安装您的插件。为此，请在您的 MANIFEST.MF 文件中添加以下行：

```
Eclipse-BundleShape: dir 
```

这将确保您的插件安装为目录，而不是 jar 文件。没有办法引用嵌套的 jar，所以它们必须被分解。

有关更多信息，请参见此处：http: [//eclipsesource.com/blogs/2009/01/20/tip-eclipse-bundleshape/](http://eclipsesource.com/blogs/2009/01/20/tip-eclipse-bundleshape/)

# php - 重新排列我的mysql结果？

> ID：12161937
> 
> 赞同：-3
> 
> 时间：2012-08-28T14:50:03.987
> 
> 标签：php, mysql, html

我有这个代码：

```
 <?
        $sql = mysql_query("SELECT * FROM VIDEOS ORDER BY ID DESC");
        while($rs = mysql_fetch_assoc($sql)){
     ?>
            <img src="<?echo $rs['V_LOGO'];?>" width="150px" height="150px" />
            <p><a href="view.php?v=<?echo $rs['ID'];?>"><?echo $rs['V_TITLE'];?></a></p><br />
            <p><?echo $rs['V_DESC'];?></p>
    <?}?> 
```

我想将视频并排显示，每五个视频换一个新行，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:55:22.267

首先.. 如果您的数据库内容未经过清理 - 使用[htmlspecialchars](https://stackoverflow.com/questions/46483/htmlentities-vs-htmlspecialchars)以避免注入不需要的 javascript/html 代码。

你可以这样循环：

```
<?
$i=0;
while(..){
if($i%5==0)echo "<p>";

echo "<a href=\"....>";

if($i%5==4)echo "</p>";
$i++;
}

if($i%5!=4)echo "</p>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T15:00:22.990

我不得不这样做很多。

尝试这样的事情

```
<?
  $sql = mysql_query("SELECT * FROM VIDEOS ORDER BY ID DESC");
  $count = 0;
  while($rs = mysql_fetch_assoc($sql)){
?>
    <div class="image-wrapper row-<?echo (int)$count/5;?> col-<?echo (int)$count%5;?>">
      <img src="<?echo $rs['V_LOGO'];?>" width="150px" height="150px" />
      <p><a href="view.php?v=<?echo $rs['ID'];?>"><?echo $rs['V_TITLE'];?></a></p><br />
      <p><?echo $rs['V_DESC'];?></p>
    </div>
<?
    $count++;
  }
?> 
```

然后使用css代码：

```
.image-wrapper {
  float: left;
  width: 160px;
  height: 150px;
}

.image-wrapper .col-0 {
  clear: left;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T15:01:25.660

这与您如何使用 CSS 设置视频样式有关。为视频创建块内容并将它们向左浮动，直到达到 5 个视频，然后转到新行。例如，

```
<div class='wrapper'>
   <?
        $sql = mysql_query("SELECT * FROM VIDEOS ORDER BY ID DESC");
        while($rs = mysql_fetch_assoc($sql)){
     ?>
        <div class='block'>
            <img src="<?echo $rs['V_LOGO'];?>" width="150px" height="150px" />
            <p><a href="view.php?v=<?echo $rs['ID'];?>"><?echo $rs['V_TITLE'];?></a></p><br />
            <p><?echo $rs['V_DESC'];?></p>
        </div>
    <?}?>
</div> 
```

例如，您的包装容器宽度为 960px，那么您可以像这样设置块内容的样式：

```
.block {
   width: 150px;
   height: 150px;
   margin-right: 20px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T15:04:11.003

```
<?php
    $i = 1;
    $sql = mysql_query("SELECT * FROM VIDEOS ORDER BY ID DESC");
    while($rs = mysql_fetch_assoc($sql))
    {
        if ($i == 1)
            echo '<div>';
        echo '<img src="'.$rs['V_LOGO'].'" width="150px" height="150px" />
        <p><a href="view.php?v='.$rs['ID'].'">'.$rs['V_TITLE'].'</a></p><br />
        <p>'.$rs['V_DESC'].'</p>';
        if ($i % 5 == 0)
        {
            echo '</div>';
            $i = 1;
        }
        $i++;
    }
?> 
```

你去吧。我还修复了你糟糕的 php 代码。

# android - 从 R.style 创建 AttributeSet

> ID：12161947
> 
> 赞同：2
> 
> 时间：2012-08-28T14:50:32.210
> 
> 标签：android

我有一个在循环中实例化的自定义组件，它们都需要应用相同的样式。由于它是一个自定义组件（特别是 LinearLayout 的子类），我不能只在 XML 中设置样式属性，因为组件布局 XML 的根标记是一个合并（以免使视图层次结构过于疯狂）。我找到了这个：

[如何从 style.xml 创建 AttributeSet？](https://stackoverflow.com/questions/4410152/how-to-create-an-attributeset-from-a-style-xml)

这几乎准确地描述了我的问题。只有答案是无用的——我的 R.java 是新鲜的，风格就在那里。我认为问题在于 getResources().getXml(R.style.my_style) 实际上并没有在 /res/values/styles.xml 文件中查找？

我使用的是 Scala，所以语法有点……更好。我的组件：

```
class MyLinearLayout(object : MyDatabaseObject, context : Context, attrs : AttributeSet = null) 
        extends LinearLayout(context, attrs) {
    // Shows and interacts with the data in object
} 
```

在活动中：

```
val componentStyle = Xml.asAttributeSet(getResources.getXml(R.style.my_style))
for (obj <- dbResults) viewGroup.addView(new MyLinearLayout(obj, this, componentStyle)) 
```

第一行会引发 Resources.NotFoundException。样式本身与其他样式一起在 res/values/styles.xml 中，并在不同的活动中应用于 LinearLayouts，所以这不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T18:38:05.163

不幸的是，没有办法通过`R.style.your_style`引用以编程方式设置视图的样式。有许多 SO 帖子证实了这一点，但有一种解决方法是通过创建一个应用了样式的 xml 布局或可绘制文件。我认为这可能适用于您的情况，因为您的所有组件都以相同的方式创建，具有相同的所需属性（可以说它在 drawable/custom_view 中：

```
<?xml version="1.0" encoding="utf-8"?>
<com.your.CustomView xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="pick_your_width"
   android:layout_height="pick_your_height"
   style="@style/your_style" /> 
```

然后在添加自定义视图时使用：

```
CustomView newView = (CustomView)getLayoutInflater().inflate(R.drawable.custom_view, null); 
```

抱歉，这并不适合您的情况，但这是我找到的最佳解决方案，可以有条不紊地将一种样式应用于自定义视图，而不会弄乱您的 java.util.View 。基于在[此处](https://stackoverflow.com/questions/3142067/android-set-style-in-code)找到的解决方案。

# ruby - Rails 选择 Empty 方法？

> ID：12161948
> 
> 赞同：0
> 
> 时间：2012-08-28T14:50:35.290
> 
> 标签：ruby, ruby-on-rails-3, forms, select

我的 Rails 应用程序的助手中有以下选择：

```
 def unit_select
    Unit.all.map{|unit| unit.calls.empty? ? [unit.unit_name, unit.id] : ["#{unit.unit_name} (on call)", unit.id] }
  end 
```

这样做是寻找一个有呼叫的单元，如果该单元在表格中的单元旁边有一个呼叫附加（待命）。我看到的问题是当它去寻找 unit.calls.empty 时？它考虑了不应考虑的“关闭”状态的通话记录。

是否有另一种我可以使用（或编写）的方法让我查看 unit.calls 并传递调用是否处于 call_status 打开状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:06:11.827

在您的单元模型中，您可以覆盖空的？调用关联的方法：

```
class Unit < ActiveRecord::Base
  has_many :calls do
    def empty?
      self.where(:call_status => :open).any?
    end
  end
end 
```

# c++ - C++：我可以使用什么来在图像上生成正弦波模式？

> ID：12161951
> 
> 赞同：0
> 
> 时间：2012-08-28T14:50:49.743
> 
> 标签：c++, image, image-processing

我正在寻找任何可以帮助我在加载的图像上生成像条纹图案的正弦波的 C++ 工具，如下所示：

![样本输出](../Images/feefd610e6256aad17f9ebfb2c4de09a.png)

使用其他编程模式（脚本？）的任何想法也会很有用。如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:05:17.973

您必须更具体地了解您要查找的内容。 [Magick++是](http://www.imagemagick.org/Magick++/)[ImageMagick](http://www.imagemagick.org/script/index.php)库的 C++ 绑定，有很多工具可用于进行各种类型的图像处理，但根据您的需要，它可能会也可能不会做您想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T15:26:00.343

您可能想研究 OpenCV：

[http://opencv.itseez.com/doc/tutorials/core/basic_linear_transform/basic_linear_transform.html#brightness-and-contrast-adjustments](http://opencv.itseez.com/doc/tutorials/core/basic_linear_transform/basic_linear_transform.html#brightness-and-contrast-adjustments)

看起来它可能有用，但我不知道它是否足以满足您的特定用例。不过，您应该可以手动完成。

正弦波的渲染将通过计算图像位置相对于周期（例如周期 == 图像宽度）的正弦值来进行局部亮度调整。我对该库没有任何真正的了解，但是从以前使用 Matlab 和类似工具的经验来看，亮度分布将按像素计算，因此可以计算

local_brightness = sin(2pi*cur_pos/width)*local_brightness

如果您知道图像的颜色空间和格式，您不妨手动进行，如上所述的逐个像素。[在这种情况下，您可以使用http://libav.org/](http://libav.org/)读取图像并重新计算它。

哦，最后一个总体思路，假设您知道图像格式和色彩空间：

生成一个适合目标图像宽度的向量，然后计算与x轴相关的正弦信号，并将得到的向量与目标图像亮度相乘？

我承认这是一个很长的镜头，但它可能对你有用：P

# google-chrome - 'socket' 不允许用于指定的包类型（主题、应用程序等）

> ID：12161964
> 
> 赞同：4
> 
> 时间：2012-08-28T14:51:39.260
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-app

用于套接字的 Chrome API 现在对我不起作用。

我有以下清单：

```
{
 "name": "My name",
 "version": "0.1",
 "manifest_version": 2,
 "background": {
  "page": "background.html"
  },
 "browser_action": {
  "default_icon": "ico16.png",
  "default_title": "My extension",
  "default_popup": "popup.html"
  },
  "description": "bla bla bla",
  "minimum_chrome_version": "23",
 "icons": {
    "ico128": "ico128.png",
    "ico16": "ico16.png",
    "icon_logo": "icon_logo.png"
  },
 "options_page": "options.html",
 "permissions": ["experimental",
                 {"socket": [
                     "udp-send-to"
                   ]},
                  "notifications",
                  "background"]

} 
```

但在加载扩展程序时显示以下警告：

***'socket' 不允许用于指定的包类型（主题、应用程序等）。***

我用版本**23.0.1246.0 canary 和 23.0.1246.0 dev-m测试过**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T16:01:03.010

这是预期的行为，套接字 API 仅适用于[打包的应用程序](http://developer.chrome.com/apps)，并且基于您正在处理扩展的清单。

# web-services - JAX WS Web Service 生成是否总是创建 XSD 文件

> ID：12161967
> 
> 赞同：1
> 
> 时间：2012-08-28T14:51:49.460
> 
> 标签：web-services, xsd, websphere, jax-ws, rad

我正在使用 RAD 7.5 从使用 JAX-WS 的 java 服务类生成 WSDL。我的服务器是 WAS 7.0。我无法在 RAD 中看到任何排除 XSD 生成并在 WSDL 本身中包含请求和响应类型对象详细信息的选项。

这是否可以创建一个 WSDL 文件，该文件还将使用 JAX-WS 保存请求和响应对象的详细信息？我不想有 XSD 文件。

我是 Web 服务的新手，如果我在想一些垃圾，请告诉我 :)

# hbase - Hbase 批量上传问题 - 独立模式

> ID：12161972
> 
> 赞同：0
> 
> 时间：2012-08-28T14:52:04.857
> 
> 标签：hbase, bulkinsert, ubuntu-12.04

我对 Hbase 很陌生。我在独立模式下使用 Hbase 并使用 google n-grams 开发应用程序。我在 Amazon Ec2 实例中使用 ubuntu 框

我正在通过批处理 api 使用我的程序进行 100 万次写入。

```
 HTable table = new HTable(conf, tableName);
        conf.set("zookeeper.session.timeout", "180000");
        conf.set("hbase.rpc.timeout", "180000");
        conf.set("hbase.regionserver.logroll.period", "180000");
        conf.set("hbase.hregion.max.filesize","51200");
        table.setAutoFlush(false);
        table.batch(iterateList);
        table.flushCommits(); 
```

当我用 1M 行执行此操作时，我按以下顺序收到以下异常，

```
 12/08/28 14:17:13 INFO zookeeper.ClientCnxn: Unable to read additional data from server sessionid 0x1396d9653bd0004, likely server has closed socket, closing socket connection and attempting reconnect
    12/08/28 14:17:13 INFO zookeeper.ClientCnxn: Unable to read additional data from server sessionid 0x1396d9653bd0003, likely server has closed socket, closing socket connection and attempting reconnect
    12/08/28 14:17:13 WARN client.HConnectionManager$HConnectionImplementation: Failed all from region=googlegrams,,1346160551634.abc8baf335dee8485d64a6c8b989d6b0., hostname=ip-10-80-74-132.ec2.internal, port=45549 
```

java.util.concurrent.ExecutionException：java.io.IOException：调用 ip-10-80-74-132.ec2.internal/10.80.74.132:45549 本地异常失败：java.io.EOFException

接着

```
 12/08/28 14:17:15 WARN zookeeper.ClientCnxn: Session 0x1396d9653bd0004
  for server null, unexpected error, closing socket connection and attempting reconnect
  java.net.ConnectException: Connection refused
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:701)
    at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:286)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1035) 
```

我尝试过的几件事是，1\. 更改 ubuntu 的 ulimit 和 nproc 设置 2\. Hbase 配置，例如 zookeeper 超时、rpc 超时 logroll period 和 hregion fileSize

请帮忙！

干杯，德瓦拉克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:35:16.653

尝试增加 hbase.client.lease.period

# c# - 在gridview中编辑和更新

> ID：12161973
> 
> 赞同：0
> 
> 时间：2012-08-28T14:52:11.837
> 
> 标签：c#, asp.net, gridview

我正在尝试使用gridview本身编辑和更新我的数据库。我几乎完成了所有工作，但我唯一的问题是我有一个下拉列表。我对编辑标签感到满意，并将其更改为编辑模式下的下拉列表。现在我是无法将下拉值单独更新到我的数据库中。我得到一个名为 system.web 的值。我无法获得所需的值，由于文字控制而面临困难。我是新手，所以请帮助我。谢谢提前交友。我的设计：

```
<asp:GridView runat ="server"  GridLines = "Both" DataKeyNames="book_id"  
 AutoGenerateColumns ="false" CellPadding ="5" CellSpacing ="5" allowpaging="True" allowsorting="True"
 ID="gv_table1" EmptyDataText ="No data exists" OnRowEditing="gv_RowEditing" 
        PageIndex="0" PageSize="10" ToolTip="true"
OnRowCancelingEdit="gv_RowCancelingEdit" OnRowUpdating="gv_RowUpdating" 
        OnRowDeleting="gv_RowDeleting" onpageindexchanging="gv_table1_PageIndexChanging"  
>
<Columns>

<asp:BoundField DataField="book_name"   HeaderText="BookName">
<ControlStyle Width ="60" />
</asp:BoundField>
<asp:BoundField DataField="author_name" HeaderText="Author Name">
<ControlStyle Width ="60" />
</asp:BoundField>
<asp:BoundField DataField="publisher" HeaderText="Publisher">
<ControlStyle Width ="60" />
</asp:BoundField>
<asp:BoundField DataField="year_edition" HeaderText="Year/Edition">
<ControlStyle Width ="60" />
</asp:BoundField>
<asp:BoundField DataField="total_no" HeaderText="Total No">
<ControlStyle Width ="30" />
</asp:BoundField>
<asp:BoundField DataField="available" HeaderText="Available">
<ControlStyle Width ="30" />
</asp:BoundField>
<asp:BoundField DataField="tags" HeaderText="Tags">
<ControlStyle Width ="60" />
</asp:BoundField>
<asp:BoundField DataField="fare" HeaderText="Fare">
<ControlStyle Width ="30" />
</asp:BoundField>
<asp:TemplateField HeaderText="state">
                            <ItemTemplate>
                                <asp:Label ID="drpstatus1" AppendDataBoundItems="True"   Text='<%# Bind("state") %>'   Width ="60" runat="server">

                                </asp:Label >

                            </ItemTemplate>
                            <EditItemTemplate >
                           <asp:DropDownList ID="drpstatus" runat="server"    >
                                <asp:ListItem Text="available" Value="0"></asp:ListItem>
                                <asp:ListItem Text="binding" Value="1"></asp:ListItem>
                                <asp:ListItem Text="lost" Value ="2"></asp:ListItem>
                                <asp:ListItem Text ="notavailable" Value ="3"></asp:ListItem>
                            </asp:DropDownList>

                        </EditItemTemplate>

                            </asp:TemplateField>

 <asp:TemplateField HeaderText ="Options">

                                <itemtemplate >

                                        <asp:linkbutton id="btnEdit" runat="server" commandname="Edit" text="Edit" />

                                        <asp:linkbutton id="btnDelete" runat="server" commandname="Delete" text="Delete" />
                                </itemtemplate>
                                <edititemtemplate>
                                        <asp:linkbutton id="btnUpdate" runat="server" commandname="Update" text="Update" />
                                        <asp:linkbutton id="btnCancel" runat="server" commandname="Cancel" text="Cancel" />
                                </edititemtemplate>
                        </asp:templatefield>

</Columns>
</asp:GridView> 
```

我背后的代码：

```
 public void setgrid()
    {

            gv_table1.DataSource = con.GetData("select  book_id,book_name,author_name,publisher,year_edition,total_no,state ,available,tags,fare from book_info where status!='deleted'");
            gv_table1.DataBind();
              }
     protected void gv_RowEditing(object sender, GridViewEditEventArgs e)
    {

        gv_table1.EditIndex = e.NewEditIndex;

        this.setgrid();
        if (!IsPostBack)
        {
            Response.Write("not post back"); 
        }

    }

    protected void gv_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
    {

        gv_table1.EditIndex = -1;

        this.setgrid();
    }

    public void gv_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {

        string totalno = (gv_table1.Rows[e.RowIndex].Cells[4].Controls[0] as TextBox).Text;
        string available = (gv_table1.Rows[e.RowIndex].Cells[5].Controls[0] as TextBox).Text;
        int total = Convert.ToInt32(totalno);
        int avail = Convert.ToInt32(available);

        if (total < avail)
        {
            Page page = HttpContext.Current.Handler as Page;

            if (page != null)
            {

               string error = "available should not be greater than total no";

                ScriptManager.RegisterStartupScript(page, page.GetType(), "err_msg", "alert('" + error + "');", true);

            }

        }
        else
        {
            int bookid = Convert.ToInt32(gv_table1.DataKeys[e.RowIndex].Values["book_id"].ToString());
            string bookname = ((TextBox)(gv_table1.Rows[e.RowIndex].Cells[0].Controls[0])).Text;
            string fare = (gv_table1.Rows[e.RowIndex].Cells[7].Controls[0] as TextBox).Text;

            string authorname = ((TextBox)(gv_table1.Rows[e.RowIndex].Cells[1].Controls[0])).Text;
            string publisher = ((TextBox)(gv_table1.Rows[e.RowIndex].Cells[2].Controls[0])).Text;
            string yearedition = ((TextBox)(gv_table1.Rows[e.RowIndex].Cells[3].Controls[0])).Text;
            string tags = ((TextBox)(gv_table1.Rows[e.RowIndex].Cells[6].Controls[0])).Text;

            string spacediv3 = Convert.ToString (( LiteralControl)(gv_table1.Rows[e.RowIndex].Cells[8].Controls[0])) ;
            string s = spacediv3 ;
            string status = "active";

            con.parameters("@bookid", DBConnection.Type.eInt, bookid);
            con.parameters("@createduser", DBConnection.Type.eVarchar, "user");
            con.parameters("@status", DBConnection.Type.eVarchar, status);
            con.parameters("@bookname", DBConnection.Type.eVarchar, bookname);
            con.parameters("@authorname", DBConnection.Type.eVarchar, authorname);
            con.parameters("@publisher", DBConnection.Type.eVarchar, publisher);
            con.parameters("@yearedition", DBConnection.Type.eVarchar, yearedition);
            con.parameters("@totalno", DBConnection.Type.eInt, totalno);
            con.parameters("@available", DBConnection.Type.eInt, available);
            con.parameters("@tags", DBConnection.Type.eVarchar, tags);
            con.parameters("@fare", DBConnection.Type.eInt, fare);
            con.parameters("@state", DBConnection.Type.eVarchar, s );
            con.parameters("@createddate", DBConnection.Type.eDateTime, "");
            con.parameters("@modifieduser", DBConnection.Type.eVarchar, "");
            con.parameters("@modifieddate", DBConnection.Type.eDateTime, "");

            con.ExecProcedure("sp_books");
            Response.Redirect("book_add.aspx");
        }
    }

    protected void gv_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {

        int bookid = Convert.ToInt32(gv_table1.DataKeys[e.RowIndex].Values["book_id"].ToString());
        string status = "deleted";
        con.parameters("@bookid", DBConnection.Type.eInt, bookid);
        con.parameters("@createduser", DBConnection.Type.eVarchar, "user");
        con.parameters("@status", DBConnection.Type.eVarchar, status);
        con.parameters("@bookname", DBConnection.Type.eVarchar, "");
        con.parameters("@authorname", DBConnection.Type.eVarchar, "");
        con.parameters("@publisher", DBConnection.Type.eVarchar, "");
        con.parameters("@yearedition", DBConnection.Type.eVarchar, "");
        con.parameters("@totalno", DBConnection.Type.eInt, "");
        con.parameters("@available", DBConnection.Type.eInt, "");
        con.parameters("@tags", DBConnection.Type.eVarchar, "");
        con.parameters("@fare", DBConnection.Type.eInt, "");
        con.parameters("@state", DBConnection.Type.eVarchar, "");
        con.parameters("@createddate", DBConnection.Type.eDateTime, "");
        con.parameters("@modifieduser", DBConnection.Type.eVarchar, "");
        con.parameters("@modifieddate", DBConnection.Type.eDateTime, "");

        con.ExecProcedure("sp_books");
        Response.Redirect("book_add.aspx");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:02:17.817

由于您的 DropDownList 在 a 内，`TemplateField`您可以通过以下方式找到参考`FindControl("ID")`：

```
public void gv_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    GridView gv = (GridView)sender;
    GridViewRow row = gv.Rows[e.RowIndex];
    DropDownList ddlStatus = (DropDownList)row.FindControl("drpstatus");
    String selectedStatus = ddlStatus.SelectedValue; 
```

旁注：

1.  使用验证器而不是回发+警报。通过这种方式，您可以避免不必要的回发，并且能够通过 css 轻松更改错误布局。
2.  什么是骗局？我希望它不是静态连接！[https://stackoverflow.com/a/9707060/284240](https://stackoverflow.com/a/9707060/284240)
3.  你已经使用`AppendDataBoundItems`了一个`Label`. 这仅适用于 ListBox 或 DropDownList 等列表控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T15:00:51.910

其他需要更正的项目，这一行：

```
string spacediv3 = Convert.ToString (( LiteralControl)(gv_table1.Rows[e.RowIndex].Cells[8].Controls[0])) ; 
```

应该：

```
string spacediv3 = ((LiteralControl)(gv_table1.Rows[e.RowIndex].Cells[8].Controls[0])).Text; 
```

您必须从文字控件中获取文本，而无需将其转换为字符串。否则，默认情况下，它会调用 LiteralControl 上的 ToString()，返回“System.Web.UI.LiteralControl”。

至于您提到的下拉菜单，我在标记中看到它，但在我能看到的任何代码中都没有。

# objective-c - 我怎样才能创建这种选项？

> ID：12161974
> 
> 赞同：0
> 
> 时间：2012-08-28T14:52:14.003
> 
> 标签：objective-c, ios, cocoa-touch, button

我需要知道 cocoa/ios 中“按钮功能”的名称。例如，当您进入 iPhone 上的图像库，然后单击图像使其全屏显示，然后单击带有一个指向的箭头，允许您通过邮件、短信等发送图像。那个“功能”叫什么？我想在我的应用程序中实现它，但不知道在哪里寻找它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:54:27.380

`UIDocumentInteractionController`是被触发的控制器。

[预览和打开文件](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/PreviewingandOpeningItems.html#//apple_ref/doc/uid/TP40010410-SW1)

# jquery - maxLength 上的 ajax 调用 - 不在 CTRL V 上更新（粘贴）

> ID：12161976
> 
> 赞同：1
> 
> 时间：2012-08-28T14:52:18.193
> 
> 标签：jquery, ajax, input, maxlength

```
//show city/state on input maxlength
$("input#billZipCode").live("keyup", function( event ){

    if(this.value.length == this.getAttribute('maxlength')) {
        if(!$(this).data('triggered')) {
            // set the 'triggered' data attribute to true
            $(this).data('triggered', true); 
            if ($(this).valid() == true ) { zipLookup(this, "USA"); } 
        }
    } else {
    $(this).data('triggered', false);
    }

}); 
```

该函数`zipLookup`执行 ajax 调用并填充字段。

以上适用于用户输入邮政编码的情况 - 但是，如果用户输入邮政编码然后粘贴（CTRL V）新的邮政编码值，则该函数不会再次触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:00:05.347

您可能会捕捉到 paste 事件：

```
$(document).on('change keyup paste', '#billZipCode', function(){
   // do something
});​​​​​​ 
```

`onpaste`jquery 使用的回调参考： [https ://developer.mozilla.org/en-US/docs/DOM/element.onpaste](https://developer.mozilla.org/en-US/docs/DOM/element.onpaste)

请注意，如[文档中所述](http://api.jquery.com/on/)，这在 IE8 上不起作用：您必须将`paste`事件直接附加到元素：

> 在 Internet Explorer 8 及更低版本中，粘贴和重置事件不会冒泡。此类事件不支持与委托一起使用，但可以在事件处理程序直接附加到生成事件的元素时使用。

旁注：

*   使用“#billZipCode”而不是“input#billZipCode”
*   使用`on`, not `live`（已弃用）

# javascript - 查询。移除 DOM 树中的前一个兄弟

> ID：12161980
> 
> 赞同：2
> 
> 时间：2012-08-28T14:52:32.687
> 
> 标签：javascript, jquery

我有下一个使用 JQuery 动态创建的代码。有多个`row`类 div 一个放在另一个之下。

```
<div class="row">
    ....
</div>
<div class="row">
   <div class="line_type"></div>
   <div class="download_value"></div>
   <div class="flag"></div>
   <div class="email"></div>
   <div class="prize"></div>
</div>
<div class="row">
    ....
</div> 
```

在我创建这些之后`divs`，我有一个指向特定 div 的“指针”，该 div 属于 class `row`。在 JQuery 中，我是如何做到的，所以我沿着 DOM 树向下，直到我到达类的 div`line_type`并将`download_value`它们都删除，而且我还想在类型的 div 处再向下一个节点`email`并更改一些它的CSS属性。

我在网上找不到任何东西，也许是因为我仍然是这些菜鸟。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:56:18.847

假设`row_pointer`指向有问题的行：

```
$('.line_type, .download_value', row_pointer).remove();
$('.email', row_pointer).css(...); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T14:57:14.330

*我有一个指向特定 div 的“指针”，它属于 row* ->

假设你有`this`对应的 div 类的对象`row`.. 那么你可以`.find`用来获取该div 中的`line_type`and `download_value`。

```
$(this).find('.line_type').remove();
$(this).find('.download_value').remove(); 
```

然后您可以使用相同`.find`的方法获取带有类的 div`email`并访问`.css`

```
$(this).find('.email').css(/* You code*/); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T15:04:45.260

看一下这个

```
$('div.row').bind('click', function() {
    $this = $(this);
    $('div.line_type, div.download_value', $this).remove();
      $('div.email', $this).css('background-color', 'red');
}); 
```

[http://jsfiddle.net/YvyE3/](http://jsfiddle.net/YvyE3/)

# c# - C# 中从指定类型继承的模板类的等价物是什么？

> ID：12161983
> 
> 赞同：1
> 
> 时间：2012-08-28T14:52:40.083
> 
> 标签：c#, c++, templates

> **可能重复：**
> [为什么 C# 泛型不能像在 C++ 模板中那样从泛型类型参数之一派生？](https://stackoverflow.com/questions/1842636/why-cannot-c-sharp-generics-derive-from-one-of-the-generic-type-parameters-like)
> [继承其泛型类型的泛型类](https://stackoverflow.com/questions/5895363/generic-class-that-inherits-its-generic-type)

我希望能够做这样的事情，只有在 C# 中：

```
template<class MyClass>
class MockComposite : MyClass
{

}; 
```

上面的类继承自指定的类型。MyClass 是一个基本类型，这就是我想要这种行为的原因。我希望能够使用派生自 MyClass 的类来实例化这个对象。

我知道您不能在 C# 中使用模板，但是有没有办法获得我想要的行为而不必为每种不同类型的对象编写一个新类？

编辑 - 我希望能够实例化一个对象，该对象将测试任何类的行为，只要该类派生自指定类型 - 'MyClass'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:54:51.723

在 C# 中，您有泛型的概念。以下代码等效于您的 C++ 代码：

```
class MockComposite<T> : T
    where T : MyClass
{
} 
```

不幸的是，它是无效的。您将收到以下编译错误：

> 无法从“T”派生，因为它是类型参数

在 C# 中，您通常会使用*组合*而不是*继承*来解决此问题。

在这种情况下，组合意味着两件事之一：

1.  您的类仍然具有通用参数，但不会尝试从中派生。此外，它有`new`约束，这意味着泛型参数需要有一个默认构造函数：

    ```
    class MockComposite<T>
        where T : MyClass, new()
    {
        T _toTest;

        public MockComposite()
        {
            _toTest = new T();
        }
    } 
    ```

    这意味着您可以像这样实例化模拟类：`var mock = new MockComposite<ClassA>();`无需在`ClassA`模拟类之外创建实例。

    ```
    class MockComposite
    {
        MyClass _toTest;

        public MockComposite(MyClass toTest)
        {
            _toTest = toTest;
        }
    } 
    ```

    这意味着您必须像这样实例化模拟类：`var mock = new MockComposite(new ClassA());`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:55:05.110

这在 C# 中根本不可能。但这是试图将一种语言用作另一种不同的语言的情况。在 C++ 中，这种模式有其用途。您可以在 C# 中完成相同的事情，但使用不同的技术。

也许这会帮助你：

```
class Myclass
{
}

class ChildClass : MyClass
{
}

class MockComposite<T> where T : MyClass
{
    public MockComposite(T objectToTest) { ... }
} 
```

在这里，您可以传递派生自`MyClass`into的任何类`CompositeTester<>`。这和你的代码最大的区别是，这里你需要传入真实的现有非泛型类，这些类继承`MyClass`. 您正在尝试进行一般继承，这是不可能的。

在 C++ 中，这基本上就像在做：

```
class Myclass
{
};

class ChildClass : MyClass
{
};

template<typename T>
class MockComposite
{
public:
    MockComposite(const T& objectToTest) { ... }
}; 
```

C# 泛型可能看起来有点像 C++ 模板，但这是一个完全不同的想法。虽然 C++ 模板让您非常灵活，几乎可以像宏一样，但泛型在类型方面仍然相当紧凑。你不能用一个你没有说它可以显式做的泛型类型做任何事情，因此像`where T : MyClass`. 通过指定，`MockComposite.MockComposite`可以`T`用作`MyType`.

# r - 如何优雅地将日期时间从十进制转换为“%d.%m.%y %H:%M:%S”？

> ID：12161984
> 
> 赞同：7
> 
> 时间：2012-08-28T14:52:56.357
> 
> 标签：r, date, split

我正在做一个产生自动记录数据的实验。该软件会生成格式为 的时间戳`41149.014850`。我想将此十进制时间戳转换为`28.08.2012 00:21:23`. 我怎样才能最优雅地在 R 中做到这一点？

我尝试使用该函数`strsplit`以及`as.Date`具有指定来源的函数以及该`times`函数。但无济于事。我在将时间戳分成两个数字时遇到问题，我可以使用函数`as.Date`和`times`.

这是一些演示代码：

```
myDatetime <- c(41149.004641, # 28.08.2012  00:06:41
41149.009745, # 28.08.2012  00:14:02
41149.014850, # 28.08.2012  00:21:23
41149.019954) # 28.08.2012  00:28:44

## not working out for me
Dat.char <- as.character(myDatetime)
date.split <- strsplit(Dat.char, split = "\\.")
## how to proceed from here, if it is a good way at all 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T15:09:45.187

您的日期采用类似于 Excel 的日期格式（1900 年 1 月 1 日之后的几天），因此您需要将它们转换为 R 日期格式。然后您可以将其转换为日期时间格式 ( `POSIXct`)。

```
# first convert to R Date
datetime <- as.Date(myDatetime-1, origin="1899-12-31")
# now convert to POSIXct
(posixct <- .POSIXct(unclass(datetime)*86400, tz="GMT"))
# [1] "2012-08-28 00:06:40 GMT" "2012-08-28 00:14:01 GMT"
# [3] "2012-08-28 00:21:23 GMT" "2012-08-28 00:28:44 GMT"
# times are sometimes off by 1 second, add more digits to seconds to see why
options(digits.secs=6)
posixct
# [1] "2012-08-28 00:06:40.9823 GMT" "2012-08-28 00:14:01.9680 GMT"
# [3] "2012-08-28 00:21:23.0399 GMT" "2012-08-28 00:28:44.0256 GMT"
# round to nearest second
(posixct <- round(posixct, "sec"))
# [1] "2012-08-28 00:06:41 GMT" "2012-08-28 00:14:02 GMT"
# [3] "2012-08-28 00:21:23 GMT" "2012-08-28 00:28:44 GMT"
# now you can convert to your desired format
format(posixct, "%d.%m.%Y %H:%M:%S")
# [1] "28.08.2012 00:06:41" "28.08.2012 00:14:02"
# [3] "28.08.2012 00:21:23" "28.08.2012 00:28:44" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T15:12:00.903

这接近了：数字表示自接近 1900 年 1 月 1 日以来的秒数：

```
as.POSIXct(x*3600*24, origin=as.Date("1900-01-01")-2, tz="UTC")
[1] "2012-08-28 01:06:40 BST" "2012-08-28 01:14:01 BST" "2012-08-28 01:21:23 BST"
[4] "2012-08-28 01:28:44 BST" 
```

那里仍然有一个时区偏移。

# python - 将大量数字乘以 random() (Python)

> ID：12161988
> 
> 赞同：1
> 
> 时间：2012-08-28T14:53:10.273
> 
> 标签：python, optimization, largenumber

**问题：**生成大型二进制字符串（长度 2000+）。快点做，因为这个 generateRandom() 函数将在算法中被调用 300,000 次。

**尝试的解决方案：**生成 3 或 4 个二进制数并将它们全部附加 500 次。这非常慢。

对 random.random() 进行一次调用并将其乘以一个巨大的数字。转换为二进制一次即可完成。这适用于较小的数字，但由于二进制字符串必须具有一定的长度，因此要转换为二进制的数字必须非常大（2 ** len(binString)）。

**当前代码（适用于较小的数字）：**

```
binaryRepresentation = ''

binaryRepresentation += bin(int(random.random() * (2 ** binLength)))[2:].zfill(binLength) 
```

**我需要帮助修复的错误：**此调用会抛出带有大数字的“long int too large to convert to float”。有没有办法让整个算法更高效，或者让这个大数字可以转换为浮点数？

*谢谢！*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T15:04:07.333

衡量它是否足够快以满足您的目的，“随机性”可能会随着您的称呼而减少：[`os.urandom(250)`](http://docs.python.org/library/os.html#os.urandom). 它产生一个二进制字符串，也就是字节。

为避免“long int too large to convert to float”错误，请勿使用浮点数。

如果您需要一个带有`k`随机位的整数而不是二进制字符串：

```
import random
r = random.SystemRandom()

n = r.getrandbits(2000) # uses os.urandom() under the hood 
```

获取一串“0”和“1”：

```
k = 2000
binstr = "{:0{}b}".format(r.getrandbits(k), k) 
```

注意：如果不使用，则不能用于`randint/randrange`大数`getrandbits`：

```
import random

class R(random.Random):
    def random(self): # override random to suppress getrandbits usage
        return random.random()

r = R()
r.randrange(2**2000) # -> OverflowError: long int too large to convert to float 
```

## b2a_bin

[`b2a_bin()`扩展](https://gist.github.com/3526111)允许直接从字节字符串创建二进制字符串（“01”），而无需创建中间 Python 整数。它比纯 Python 类似物快 3-20 倍：

```
def b2a_bin_bin(data):
    return bin(int.from_bytes(data, 'big', signed=False)
               )[2:].zfill(len(data)*8).encode('ascii', 'strict')

def b2a_bin_format(data):
    n = int.from_bytes(data, 'big', signed=False)
    return "{:0{}b}".format(n, len(data)*8).encode('ascii', 'strict') 
```

用法：

```
>>> import os
>>> from b2a_bin import b2a_bin
>>> b2a_bin.b2a_bin(b'\x0a')
b'00001010'
>>> b2a_bin(os.urandom(5))
b'1001111011000011111001110010000101111010' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T15:43:31.907

从 JF Sebastian 的答案转到二进制字符串（其中包含`0`和`1`字符的字符串）：

```
>>> import random
>>> r = random.SystemRandom()
>>> bin(r.getrandbits(2000))[2:].zfill(2000)
'00010110001101100011000011001011011000010001010111000001111001001111010110010110011011110011101101100001111000011111010110100110011011110011111110010111111001110110011011011111011101000010101001001000100010001011011100011101100101010110001101101100100000001001010001101100110001100001101101010010001000010010010101100110100000001001001101000110001011111111111010011111111011001000100011001011011100010100010000010011100100011111011110111101010001001111011010101101010000110110010011000101111110000101001111100111111101101101110001100111011110011001000110110011101001010111100110000111000110011010000000111011001011100000100100111011110111101001110001110010010101100110000111001011100101111110100000100101011000110100111111001100111001000000111010000000101001111011111101111111101101011010010001101101101010011000100101000111000100100011010100111101111010001011110100100011111101101000111011100010000111000111110100001100111010001001010100001010111100001001010110010010100010011010010010011000000011010111110001100001100110101111011100010100100101000101000111110011111011011011111101011001001111010110000101100011111000111010100001000000101111011010011010011101011110000101011011110001111111101100000100000110111100011010110000111110110010100010010111111110010000000100001011110011100001001110110111100001101000011101011011101110001001001110011111111010001000100011010000110011000000000011111011011011101011010010001000101001011111110110000011000000000010101101111100011001010011100010010110111011001001011011010101111011101000001000011110010011111000011001110000100100111010000011100111110101110111010010101110010111100011111001101010010010000001010110011110001110010011011001110011000010010111111100101101100110111100001101100001100000101110000000011111010011000010000000011001101000001001000101001010100001110001011111110100110111000101011101111110010110001111111010100000100011011110011100010000000101001011100000010101101110110001110010111010000111101110100001100101000101010000110111011001001011'
>>> bin(r.getrandbits(2000))[2:].zfill(2000)
'11111011011010000011111101101101001110101011100110100011111011101101111100110001000110110100101010101000110010000101010100011111100111100010000001011011101100011101000001100101000101000010010000001111110101010011001110001001010011000011010100011111110111110010100000111011000000110000100000000110101101101111001101100000010010000100101001111100101010011101011010111110010001111111100101011110001101100111010010101110111000001000100101111011010001111001001010010000011100111101101101111101111010101100001000110011100110010110010101101001011000010101011111010010111000000100101100000100000010010000001000000001110010010100100111001011011111100111111001100000111111110011100001000111111110110001000010010110101100100001000001011110110100000111010101100111111010011111011111011000100101010111111000110111001001100011101101001000100110011001011101100010011010101111000011011111110001010110100100100001010100100100110101100111011110101001001111000010001101001010111111110011110111011111010001110011001000000100000101100001001100101000010011001101001110000101100000110000110101110011000010111110100100100100110010111110011101001000100111110011001101010000101100010011110100100110000111010111001000001101010101000001111001110010111000000101111101000110100101101000100000101100100110111101100010011110111011010111000111111100001110000100111001110001010101111000111100000011111111111110110100011000000111010100111011011100100010110100010110001111010110010100101111010111101110011010110100100010001001001110010110100111010010111001011101100000010011000110011011011010001100010000000010110011101101000111101000011101100001010001010001010111111110101100001110010000001010000000011000000000101111001001100100010110010000000101001010011110110111101111001110001001110111101011111111010101101011101010010111101000000010000101010100000101111010011010001001001101000001001011010110000000000111010001111001110100110000100011110100110110010011000111110100011000110001100001101101001010110001001001001101000011011101001010'
>>> bin(r.getrandbits(2000))[2:].zfill(2000)
'00100010111111011100001001000010100100101000100010101010100001011100101010100000000011111000001001011101010010010000101111111001101101100101011011001011110001001111101011101000101101000001000000110010011001110010101100101000011111001111111011011010001010010000011000000010011001101000100101000001001101001100010100000100100110000010110101011101011111010000010110011001101010010010000111001101101101001001100101111001101110111111111000011000001011011100111010011101001100011101011001110010111101011111010100101101010001011011001001010001111011100100101100100011111010010011110010011101100101001100111011011110011101010101010011001100000100110000001001111001111010011110110110001100110111011011111001110101000100100000011101001100111001100010001101010110000110010101010100011011101101010010100011111100001100100011010111000001011000101110100001111111001001111111101001000000011110110001010101001110110011000010101011010111111011010000011000000111110001110111111110110001110101011000010101001111110111101101010000111000011001111110101000001000011110000101011011001001000100010000110000110011100000100110100101011010011000110001010000101001110101111000110101001010010101000100011010101001110101101111010010101000011111101110110100101000110011010100010110110101010111001010110111011000000010001000110010011000011011110101101000111111101110100100011100000011110100000110111001001101110000011001101101011001000000101001110110011101111111010000000101111011100011010110111110000000001110101101100001001000001010000100101001111110110101000000101101111010010110000111101111011111100001111010001000100110111011010100110111011101011110001001001010100010101011001100100110101101111010011110001010011110000100100011101100101000000001011001010100101010011000011000100001011010010001010100001110101101100000010101011111010011000000000100100000000001011110101011101100101100010110101000111001010000001011000010001111101011111000011100101101110111110000011001000001101010001010000111001100101100111000111000001000000000' 
```

有了这个基准：

```
import random
import time

def run(n):
    r = random.SystemRandom()
    for i in xrange(n):
        if i%30000 == 0: print i
        bin(r.getrandbits(2000))[2:].zfill(2000)

s = time.time()
run(300000)
e = time.time()
print "Took %.2fs" % (e-s,) 
```

结果是`Took 12.32s`

只是在没有任何字符串转换的情况下（仅`r.getrandbits(2000)`）获取随机位`7.77s`，所以如果你能找到一种方法来使用随机位，`long`那么你会节省一些时间。

重新运行基准测试，`os.urandom(250)`而不是（没有额外的处理）只采取了`3.59s`，所以这似乎是最快的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T15:28:21.453

真的`random.randrange`太慢了​​吗？让我们看看它到底有多慢。

```
import random

word_size = 2048
word_max = 2 ** word_size

def random_bits(n):
    """
    Return a string consisting of `n` zeroes and ones (chosen randomly).
    """
    def words():
        s, m, r = word_size, word_max, n % word_size
        for _ in range(n // s):
            yield bin(random.randrange(m))[2:].zfill(s)
        yield bin(random.randrange(2 ** r))[2:].zfill(r)
    return ''.join(words())

>>> from timeit import Timer
>>> Timer(lambda:random_bits(2000)).timeit(number=300000)
9.680696964263916 
```

选择 6 亿个随机位，10 秒似乎并不是一个荒谬的时间。因此，也许您可​​以更多地说明您的速度要求。这真的太慢了​​吗？

# android - 查找是否在 Android 中连接了外部 USB 或蓝牙键盘

> ID：12161989
> 
> 赞同：8
> 
> 时间：2012-08-28T14:53:12.920
> 
> 标签：android, keyboard

谁能告诉我是否有任何方法可以找出蓝牙 QWERTY 键盘是否连接到 android 设备。

我尝试使用 getResources().getConfiguration.keyboard，但无论是否连接键盘，它总是给我相同的值。

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-28T15:13:28.923

一种方法是`android:configChanges="keyboard"`在 AndroidManifest.xml 文件中添加活动。

有了这个，您可以覆盖 `onConfigurationChanged`每当插入或拔出键盘时都会调用它

```
 @Override
 public void onConfigurationChanged(Configuration newConfig) 
 {
   if(newConfig.hardKeyboardHidden == Configuration.HARDKEYBOARDHIDDEN_NO) {
        //A hardware keyboard is being connected
   }  
   else if(newConfig.hardKeyboardHidden == Configuration.HARDKEYBOARDHIDDEN_YES)
       //A hardware keyboard is being disconnected
   }

 } 
```

# deployment - Jboss 4.2.3 自定义共享库

> ID：12161991
> 
> 赞同：1
> 
> 时间：2012-08-28T14:53:25.913
> 
> 标签：deployment, jboss, shared-libraries, jboss-4.2.x

我正在将共享库移动到一些自定义 jboss lib 文件夹中。现在，正如我所见，库被放置在

> 1)Jboss/lib 文件夹
> 
> 2)Jboss/服务器/FM/lib
> 
> 3)Web应用程序中的WebInf/Lib

现在我想移动一些由 webapp 在共享库中共享的库，但不在 jboss/server/FM/lib 下，因为我希望它们位于单独的文件夹中，如下所示：

> jboss/服务器/FM/lib/自定义。

我仍然希望从 Jboss/server/Fm/lib 加载库。在 Jboss 4.2.3 中有什么方法可以做吗？我查看了 stackoverflow 上的类似问题，但找不到任何令人满意的答案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:06:35.047

只需`JBoss/server/TM/conf/jboss-service.xml`在行后添加

```
 <classpath codebase="${jboss.server.lib.url:lib}" archives="*"/> 
```

另一条线

```
 <classpath codebase="${jboss.server.lib.url:lib}/custom" archives="*"/> 
```

并重新启动。

# java - 依赖项的类路径扫描

> ID：12161992
> 
> 赞同：0
> 
> 时间：2012-08-28T14:53:29.770
> 
> 标签：java, spring

我有一个 3 层应用程序：Web 服务、服务层和域层。Web 服务存在于 Web 应用程序 (WAR) 中。服务层和领域层是两个 JAR 项目。依赖项是：

网络服务 --> 服务层 --> 域层

在服务层，服务用 注释`@Service`。在域层中，DAO 使用`@Repository`. Web 服务实现类使用服务层 JAR 的服务，因此它为每个自动注入的服务保留一个实例（`@Autowired`）。

依赖关系在我的 POM 中得到了很好的定义。当我在 Tomcat 上部署 WAR 时，出现以下异常：

```
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.mycompany.project.services.MyService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:952)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:821)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:735)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:551)
    ... 37 more 
```

我引用了 Spring 文档中的一个相关部分：

> 类路径包的扫描需要类路径中存在相应的目录条目。当您使用 Ant 构建 JAR 时，请确保您没有激活 JAR 任务的仅文件开关。

我已经检查过，服务层 JAR 存在于 WEB-INF/lib 目录中。

任何想法？

谢谢

* * *

**编辑：**我只有一个上下文文件，它位于`src/main/webapp/WEB-INF`. 在这种情况下，我启用了类路径扫描，如下所示：

```
<context:component-scan base-package="com.mycompany.project" /> 
```

该包`com.mycompany.project`是我项目的基础包，其下有web-service（`com.mycompany.project.server`）、service-layer（`com.mycompany.project.services`）和domain-layer（`com.mycompany.project.domain`）包。

我已经解决了这个问题。我不明白为什么我所做的会导致这样的问题。每个服务都实现了一个定义其公共方法的接口。在我的 Web 服务实现类中，对服务的引用使用了实现类而不是接口。我只是将它们更改为使用界面，我不再遇到问题了。谁能解释一下使用服务实现类而不是自动装配接口有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T20:18:06.487

这是您编辑的答案：

引用接口有效但具体实现失败的原因可能与Spring 为您的服务注释等情况创建的[动态代理](http://blog.springsource.org/2012/05/23/understanding-proxy-usage-in-spring/)`@Transactional`有关。在这种情况下发生的情况是您的 bean 的类型不是不再是实现类型，而是围绕您的实现类型。因此，当您按实现类型拥有@Autowired 时，它只是无法按类型找到它（这是默认设置）。

您的修复非常合适，因为动态代理继续从您为实现定义的接口派生，因此可以按接口类型注入 - 我提供的参考可以更好地解释这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T15:32:01.273

你能展示你的组件扫描配置吗？如果设置不正确，那么 Spring 可能不会发现您的服务。

你想要这样的东西：

```
<context:component-scan base-package="your.service.package"/> 
```

**编辑：**

我认为问题在于您的`@Service`注释在接口而不是实现类上。

如果你注释你的服务实现，那么你的 web 控制器可以使用：

```
@Autowired
private ExampleService service; 
```

或者

```
@Autowired
private ExampleServiceImpl service; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T15:39:03.203

1.  确保你使用`<context:component-scan base-package="your.service.package"/>`
2.  检查您的自动连线策略是`byName`或`byType`；如果`byName`，`Service`注解的名称值应该是正确的。
3.  如果问题仍然存在，检查spring的日志，它会打印所有找到的组件的名称，你可以知道服务是否建立。

# c# - 我可以找到最后一次访问 MemoryCache 项目的时间吗？

> ID：12161995
> 
> 赞同：3
> 
> 时间：2012-08-28T14:53:40.573
> 
> 标签：c#, .net, .net-4.0, objectcache

在 .NET 4`MemoryCache`中，有没有办法找到上次访问项目的时间？我确信它在内部被跟踪，因为`CacheItemPolicy`有财产`SlidingExpiration`。但是我一直找不到任何地方可以阅读它。

大局，我正在寻找一种方法来手动从缓存中删除最旧的*n个条目。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T00:55:46.713

似乎无法从 MemoryCache 获取此信息。您将不得不对您的项目使用一个包装器，并在最后访问时间的成员中使用它，并在访问项目时对其进行更新。

# google-chrome - 如何在 Chrome 扩展开发中加载上次访问的网络历史记录？

> ID：12161997
> 
> 赞同：0
> 
> 时间：2012-08-28T14:53:40.870
> 
> 标签：google-chrome, google-chrome-extension

我正在开发一个谷歌浏览器扩展。但是当我添加这个以获得最后访问的网站时，

```
 chrome.history.search({ 'text': '', 'startTime': closedTime, 'maxResults': 1 },
    function (historyItems) {
        //do stuff
    }
    ); 
```

它会导致此错误：

> 未捕获的类型错误：无法调用未定义的方法“搜索”

我的咒语是对的，但我不知道发生了什么？我能做些什么来解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:57:11.920

在使用 API 之前，您必须通过清单文件请求使用它的权限：

```
{
  ...
  "permissions": [
    "history"
  ],
  ...
} 
```

（这也在[的文档中`chrome.history`](http://developer.chrome.com/extensions/history.html#manifest)提到）。

# c++ - Assert() - 它有什么用？

> ID：12161998
> 
> 赞同：4
> 
> 时间：2012-08-28T14:53:54.933
> 
> 标签：c++, assert

我不明白 的目的`assert()`。

我的讲师说 assert 的目的是发现错误。

例如 ：

```
double divide(int a , int b ) 
{
  assert (0 != b);
  return a/b;
} 
```

上述断言是否合理？我认为答案是肯定的，因为如果我的程序不应该使用`0`（数字零），但不知何故零确实找到了进入`b`变量的方式，那么代码有问题。

我对么 ？

你能告诉我一些**合理**的assert() 的例子吗？

问候

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-28T15:04:24.993

`assert`如果程序正确，则用于验证应始终为真的事物。在您的示例中是否`assert`合理取决于以下规范`divide`：如果`b != 0`是前提条件，那么`assert`通常是验证它的首选方式：如果有人在不满足前提条件的情况下调用该函数，则这是一个编程错误，您应该终止程序带着极端的偏见，尽可能少做额外的工作。（通常情况下。有些应用程序不是这种情况，最好抛出异常，然后跌跌撞撞，希望最好。）但是，如果规范`divide`定义了 somw 行为时`b == 0`（例如，返回 +/- Inf)，那么你应该实现这个而不是使用断言。

此外，`assert`如果事实证明它需要太多运行时间，则可以将其关闭。然而，一般来说，这应该只在代码的关键部分进行，并且只有在分析器显示您确实需要它时。

FWIW：与您的问题无关，但您发布的代码将返回`0.0`. `divide( 1, 3 )`不知何故，我不认为这是你想要的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-28T15:55:05.940

断言的另一个方面：
它们也是一种文档。

而不是像这样的评论

```
// ptr is never NULL
// vec has now n elements 
```

写得更好

```
assert(ptr!=0);
assert(vec.size()==n); 
```

评论可能会随着时间的推移而过时，并会引起混乱。但断言始终得到验证。
评论可以忽略。断言不能。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-28T14:56:54.150

`assert`除了您通常在调试阶段使用的事实之外，您对 的评估非常准确`assert`...这是因为您不希望`assert`在生产代码期间触发...处理它们）是生产级代码中运行时错误管理的正确方法。

但一般来说，`assert`用于*测试假设*。如果在调试阶段代码中没有满足假设条件，特别是当您获得超出所需输入的值时，您希望程序在遇到错误时退出，以便您可以修复它。例如，假设您正在调用一个返回指针的函数，并且该函数*永远*不应返回`NULL`指针值。换句话说，返回`NULL`值不仅是错误条件的某种指示，而且意味着您对代码工作方式的*假设是错误的。*这是一个使用的好地方`assert`...您假设您的程序将以一种方式工作，如果不是，那么您不希望该错误传播到其他地方导致一些疯狂的难以找到的错误...您想在它发生时立即修复它发生。

最后，您可以将内置宏与`assert`诸如`__LINE__`和组合在一起，`__FILE__`这将为您提供发生断言的代码中的文件和行号，以帮助您快速识别问题区域。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-28T14:56:20.647

断言的目的是在调试期间发出意外行为的信号（因为它仅在调试版本中可用）。您的示例是断言的合理案例。下一行可能会崩溃，**但是**使用断言，您可以选择在该行被命中之前中断执行，并进行一些调试。

这通常与异常并行完成 - 您断言表示有问题，并抛出异常以优雅地处理案例（甚至退出程序）：

```
double divide(int a , int b ) 
{
  assert (0 != b);
  if ( b )
     return a/b;
  throw division_by_0_exception();
} 
```

在某些情况下，您想继续执行，但仍想发出出现问题的信号。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T14:57:48.357

Assert 用于在调试环境中测试有关您的代码的假设。断言通常对您的最终构建没有影响。

它是否是一个有效的测试完全是另一回事。如果不深入了解您的应用程序，我们将无法回答这个问题。

断言不应该失败。如果您看到断言可能失败的任何可能性，那么您需要一个 if 语句来处理那些条件不正确的情况。断言仅适用于您认为永远不会失败的条件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-28T15:17:55.163

断言用于在代码执行期间检查不变量，这些条件是程序员假设始终保持不变的条件，如果它们与假设不同，则代码中存在错误。

断言也可用于检查前置条件和后置条件，第一个在某些代码块之前检查并验证提供的数据/状态是否正确，第二个检查某些计算的结果是否正确。这有助于缩小问题/错误所在的位置：

```
assert( /*preconditions*/ );
/*here some algorithm - and maybe more asserts checking invariants*/
assert( /*postconditions*/ ); 
```

一些合理断言的例子：

1.  检查函数返回值，例如，如果您调用一些外部 API 函数并且您知道它仅在编程错误的情况下返回一些错误值：

WinAPI Thread32First 函数要求提供的 LPTHREADENTRY32 结构已正确分配 dwSize 字段，以防出错。这个失败应该被断言捕获。

1.  如果函数接受指向某些数据的指针，则在函数开头添加断言以验证它是否为非空。如果这个函数不能在空指针上工作，这是有道理的。

2.  如果您在设置超时的情况下锁定了互斥锁，那么如果此超时结束，那么您可以使用断言来指示可能的竞争条件/死锁

......还有更多

断言的好技巧是在里面添加一些信息，例如：

assert(false && "此断言的原因");

“此断言的原因”将在消息框中显示给您

您可能还想知道我们也有静态断言来指示编译期间的错误。