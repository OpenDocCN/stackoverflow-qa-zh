# StackOverflow 问答 11950000-11950999

# c# - 如果从向上转换的对象调用成员，为什么标识符重用不会生效？

> ID：11950001
> 
> 赞同：1
> 
> 时间：2012-08-14T10:05:48.107
> 
> 标签：c#, oop

```
class Program
{
    static void Main(string[] args)
    {
        Parent p = new Child();
        p.Print();
    }
}
class Parent
{
    public virtual void Print()
    {
        Console.WriteLine("This is parent.");
    }
}
class Kid:Parent
{
    public override void Print()
    {
        Console.WriteLine("This is Kid.");
    }
}
class Child : Kid
{
    public new virtual void Print()
    {
        Console.WriteLine("This is Child.");
    }
} 
```

为什么输出是“This is Kid”，而不是“This is child”？

`Print()`课堂`Child`是虚拟的。
我试图了解正在发生的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:10:35.620

您正在调用`Print`.`Parent`

`new`如果您将该变量键入为 ，则运算符将起作用`Kid`。在这种情况下，`new` **不是覆盖而是标识符重用**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:10:43.720

`p`是类型`Parent`。所以编译器在类中寻找一个`Print`方法。`Parent`由于这个方法是虚拟的，它会在`Kid`类中找到一个被覆盖的方法。因为您没有覆盖而是*替换*中的`Print`方法`Child`，所以编译器不会使用此方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:35:13.427

以下都过度简化并将一种可能的实现视为事实，但应该足以拥有一个有效的心理模型。

当调用代码“知道”一个类时，它知道以下内容：

1.  可以在距对象位置的特定偏移处访问字段。例如，如果一个对象位于地址 120，并且有两个整数字段，那么它可能能够在地址 124 访问它们。如果另一个相同类型的对象位于地址 140，则等效字段将位于 144。

2.  非虚拟方法（和属性可以被认为是一个或两个方法的语法糖）是位于特定地址的函数，它引用您正在调用的对象（`this`从方法内部）和该函数的其他参数。

3.  虚拟方法与上面类似，但它们的地址可以通过查看与类关联的表中的特定偏移量来找到，该表的地址也将是类地址的特定偏移量。

在此，`Kid`有一个方法表，它是`Parent`（它可以添加更多方法）的超集，并且对于那些它没有覆盖的方法具有相同的函数地址（调用`Equals`它使用与调用相同的函数`Equals`在 a 上`Parent`），但它覆盖的地址不同（`Print()`在这种情况下）。

因此，如果你有一个`Kid`then 无论你是通过`Parent`引用还是`Kid`引用，调用`Print()`都会查看同一个表，查找`Print()`方法的位置，然后调用它。

在 的情况下`Child`，`new`使用`Print`方法。这告诉编译器我们特别想要一个不同的表。因此，如果我们`Print()`通过`Child`引用调用，它会查找`Child`特定表，并调用它找到的方法。`Kid`但是，如果我们通过 a or引用调用它`Parent`，那么我们甚至不知道`Child`我们可以使用一个特定的表，我们分别在我们知道`Kid`和`Parent`拥有的表中查找函数，并调用找到的函数（即中定义`Kid`）。

作为一项规则，`new`是要避免的。它的用途有两个地方：

一是向后兼容。例如，如果`Child`有一个`Name`属性，然后后来`Parent`更改了 for 的代码，使其也有一个`Name`属性，我们就会发生冲突。由于`Child`'s`Name`不是一个覆盖，它被视为好像它有`new`但给我们一个警告，因为这是使用旧事物方式的代码和知道新事物的代码可以共存的唯一`Name`方式`Parent`。如果我们回来重新编译`Child`，我们可能应该重构使其没有自己的`Name`（如果 on`Parent`做我们想要的），重构使其成为覆盖，重构为完全不同的东西，或添加`new`以表明这就是我们想要的样子，尽管它并不理想。

另一种是`new`允许基类方法允许的相同行为的更具体形式，但在逻辑上兼容（因此用户不会感到惊讶）。后者应该进入半高级技术框，不要轻易完成。也应该这样评论，因为大多数时候看到`new`意味着你处理的东西充其量是一种妥协，可能应该改进。

`Kid`（旁白：我是唯一一个看到s有`Child`仁就想到小报的人吗？）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T10:18:38.827

来自 MSDN（[http://msdn.microsoft.com/en-us/library/6fawty39](http://msdn.microsoft.com/en-us/library/6fawty39(v=vs.100).aspx) (v=vs.100).aspx ）：

“当在 Derived 的实例上调用 DoWork 时，C# 编译器将首先尝试使调用与最初在 Derived 上声明的 DoWork 版本兼容。覆盖方法不被视为在类上声明，它们是方法的新实现在基类上声明。只有当 C# 编译器无法将方法调用匹配到 Derived 上的原始方法时，它才会尝试匹配对具有相同名称和兼容参数的重写方法的调用。

看起来您在 Kid 中使用了“new”，但将 p 声明为 Parent 意味着 p 无法在 Child 中看到 Print，因为它不是继承层次结构的一部分。

```
static void Main(string[] args)
{
    Parent p = new Child();
    p.Print();

    Child c = (Child) p;
    c.Print();
} 
```

...显然改变了事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T10:11:04.950

好吧，因为您使用了 new 关键字，这意味着您隐藏了继承的方法并提供了新的实现。这通常称为隐藏父成员。

# xslt - 在 XSLT 1.0 中用逗号分割值的问题

> ID：11950003
> 
> 赞同：0
> 
> 时间：2012-08-14T10:05:52.097
> 
> 标签：xslt, xslt-1.0

我正在尝试使用 XSLT1.0 从 xml 中拆分一个值，我有一个类似的 XML

```
<employees>
    <examples>
       <example id="1,2,3">
       </example>
    </examples>

   <emp id="1">
     <name>john</name>
   </emp>
   <emp id="2">
     <name>raj</name>
   </emp>
   <emp id="3">
     <name>sat</name>
   </emp>

</employees> 
```

我需要从示例标签中提取 id 并将其拆分并从`emp`标签中获取值说输出应该是

```
<employees>
    <employee>
        <id>1</id>
        <name>john</name>
    </employee>
    <employee>
        <id>2</id>
        <name>raj</name>
    </employee>
    <employee>
        <id>3</id>
        <name>sat</name>
    </employee>

</employees> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:23:19.393

我认为与其尝试拆分**示例**元素上的@id 属性，这在XSLT1-0 中有点混乱，不如尝试匹配其@id 出现在属性的@id 中的**emp元素**

```
 <xsl:variable name="ids" select="concat(',', examples/example/@id, ',')"/>
 <xsl:apply-templates select="emp[contains($ids, concat(',', @id, ','))]"/> 
```

请注意使用逗号来确保 @id 为 1 的示例不会被 @id 为 11 的示例拾取

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="employees">
      <employees>
         <xsl:variable name="ids" select="concat(',', examples/example/@id, ',')"/>
         <xsl:apply-templates select="emp[contains($ids, concat(',', @id, ','))]"/>
      </employees>
   </xsl:template>

   <xsl:template match="emp">
      <employee>
         <id>
            <xsl:value-of select="@id"/>
         </id>
         <xsl:apply-templates select="node()"/>
      </employee>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<employees>
   <employee>
      <id>1</id>
      <name>john</name>
   </employee>
   <employee>
      <id>2</id>
      <name>raj</name>
   </employee>
   <employee>
      <id>3</id>
      <name>sat</name>
   </employee>
</employees> 
```

# objective-c - NSUserDefaults 中的整数不减少

> ID：11950004
> 
> 赞同：0
> 
> 时间：2012-08-14T10:05:53.267
> 
> 标签：objective-c, nsuserdefaults

我在使用 NSUserDefaults 的整数时遇到了一个奇怪的问题。在我正在开发的应用程序中，可以删除一些照片。当用户删除它们时，NSUserDefaults 中的一个整数会减少（命名为 StorageUsed）。这是用户删除照片时的代码：

```
int size = [[json objectForKey:@"size"] intValue];
NSLog(@"photo size: %i",size);
int storageUsed = [[NSUserDefaults standardUserDefaults] integerForKey:@"StorageUsed"];
storageUsed = storageUsed - size;
NSLog(@"storage used: %i",storageUsed);
[[NSUserDefaults standardUserDefaults] setInteger:storageUsed forKey:@"StorageUsed"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

这是输出：

```
2012-08-14 12:00:18.285 My Albums[32875:707] photo size: 116769
2012-08-14 12:00:18.293 My Albums[32875:707] storage used: 952516
2012-08-14 12:00:18.514 My Albums[32875:707] photo size: 117333
2012-08-14 12:00:18.516 My Albums[32875:707] storage used: 952516
2012-08-14 12:00:18.729 My Albums[32875:707] photo size: 120303
2012-08-14 12:00:18.731 My Albums[32875:707] storage used: 952516
2012-08-14 12:00:18.991 My Albums[32875:707] photo size: 137845
2012-08-14 12:00:18.993 My Albums[32875:707] storage used: 952516
... 
```

如您所见，使用的存储量没有减少，而大小不为零。

谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:16:19.447

你试过用 %d 代替 %i 吗？

此外，integerForKey: 返回一个 NSInteger，而不是一个 int。差异
定义如下

```
#if __LP64__ || TARGET_OS_EMBEDDED || TARGET_OS_IPHONE || TARGET_OS_WIN32 || NS_BUILD_32_LIKE_64
typedef long NSInteger;
#else
typedef int NSInteger;
#endif 
```

# c# - 在 Visual C# 2010 Express 中按 ctrl+F7 时控制台未打开？

> ID：11950012
> 
> 赞同：0
> 
> 时间：2012-08-14T10:06:20.380
> 
> 标签：c#, visual-studio, console

在 Visual C# 2010 Express 中，使用以下代码按 ctr+F7 时，为什么控制台没有打开？我在同一个项目中有几个 .cs 文档，但我只想执行这个。

```
using System;
using System.Collections.Generic;
using System.Text;
using System.IO.Ports;

namespace ConsoleRead
{
    protected class consoleread
    {
        public void GetPortName ()
    {
            string[] sPorts = SerialPort.GetPortNames();
            foreach (string port in sPorts)
            {
                var serialPort = new SerialPort();
                serialPort.PortName = port;
                serialPort.Open();
                serialPort.WriteLine("ATI"); 
                var message = Console.ReadLine(); 
            }
    }
    }
} 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:11:17.870

这是因为 Ctlr + F7 将执行您的应用程序。您已经创建了一个控制台应用程序，并且在启动它时将搜索一个静态`Main`方法，并将在控制台窗口中执行该方法。

按 Ctrl + F7 时不能执行任意代码。

如果要执行此类中的代码，则需要在`Main`方法中添加一些代码（将被执行）以创建此类的实例并执行`GetPortName`.

这是一些[MSDN 文档](http://msdn.microsoft.com/en-us/library/0wc2kk78.aspx)，展示了控制台应用程序的工作原理。

当您查看项目属性时（右键单击项目的解决方案资源管理器并单击属性），您将看到一个项目启动对象。这指向包含应用程序起点的类。Windows 将在该类中查找 Main 方法并从那里开始运行您的程序。

我不建议将您的所有代码移到里面`Main`。这将创建一个执行所有逻辑的大函数。对于一个合理大小的程序，您的`Main`方法会爆炸，维护起来将是一场噩梦。对满足特定目标的对象中的代码进行分区可以帮助您构建更好的可维护程序。研究面向对象开发的基础知识以了解这将如何提供帮助。这是 Wikipedia 的链接，其中包含有关[Object Oriented Programming](http://en.wikipedia.org/wiki/Object-oriented_programming)的一些信息。

您的代码有问题的另一件事是无法保护外部类。您需要更改`protected class consoleread`为`public class ConsoleRead`（大小写是为了便于阅读）。

# shader - 从瓷砖图集纹理重复瓷砖

> ID：11950016
> 
> 赞同：3
> 
> 时间：2012-08-14T10:06:28.217
> 
> 标签：shader, cg

我需要 CG 片段着色器方面的帮助。我有一个可以容纳所有瓷砖的大纹理。我真的不知道从哪里开始。

现在，当四边形/精灵超过一定大小时，我需要重复纹理，因为它是一个单一的纹理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T01:01:20.057

0Matthias Wloka 在 NVIDIA 时就这个话题写过一篇白皮书：

[https://developer.nvidia.com/sites/default/files/akamai/tools/files/Texture_Atlas_Whitepaper.pdf](https://developer.nvidia.com/sites/default/files/akamai/tools/files/Texture_Atlas_Whitepaper.pdf)

它描述了检索方法并包含一些关于过滤/mip 级别的有用警告信息

在最简单的情况下，假设您在地图集中并排有两个纹理。

而不是阅读`tex2D(sampler,UV)`第一个纹理，你会做类似的事情`tex2D(sampler,float2(frac(2.0*UV.x),UV.y))`

# java - 如何禁用 GridView 中的滚动按钮？

> ID：11950017
> 
> 赞同：0
> 
> 时间：2012-08-14T10:06:30.413
> 
> 标签：java, android

我已经在 GridView 中显示了按钮的数量，如果触摸按钮并滚动它，则在移动设备中，按钮正在移动，我想禁用按钮的滚动。但在模拟器中它不滚动。

请给任何想法....

请帮助某人禁用 Gridview 中的按钮滚动.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:41:55.497

为 GridView 使用 setOnTouchListener 已禁用滚动。

gridView.setOnTouchListener(new OnTouchListener(){

```
 @Override
            public boolean onTouch(View v, MotionEvent event) {
                if(event.getAction() == MotionEvent.ACTION_MOVE){
                    return true;
                }
                return false;
            }

        }); 
```

# ruby-on-rails - 使用自动完成时不搜索

> ID：11950018
> 
> 赞同：0
> 
> 时间：2012-08-14T10:06:31.630
> 
> 标签：ruby-on-rails, autocomplete

我遵循了本教程：[http ://railscasts.com/episodes/102-auto-complete-association](http://railscasts.com/episodes/102-auto-complete-association)

*但它没有用。*

我所做的是以下内容：

我使用安装插件

```
rails plugin install git://github.com/rails/auto_complete.git 
```

在我的 message.rb 中，我声明了 user_name

```
 def user_name
    user.username if user
  end

  def user_name= (username)
    self.user = User.find_or_create_by_username(username) unless username.blank?
  end 
```

在我的 application.html.haml 我添加

```
= javascript_include_tag :defaults 
```

在我的个人资料/users/index.js.erb

```
<%= auto_complete_result @users, :username %> 
```

我试着跑步`http://localhost:8080/profile/users.js`

它会输出预期的用户列表。

在我的 users_controller.rb

```
 auto_complete_for :message, :user_name
  def index
    @users = User.find(:all, :conditions => ['username LIKE ?', "%#{params[:search]}%"])
    respond_to do |format|
      format.html # index.html.erb
      format.js # index.js.erb
    end
  end 
```

当我耙路线时，我得到了视图所需的正确输出

```
 profile_users GET    /profile/users(.:format)                                {:action=>"index", :controller=>"profile/users"} 
```

最后在我的个人资料/messages/compose.html.haml

```
= form_for :message, :url => send_message_profile_messages_path do |message|
  %label{:for => "friend"} To:
  %br
  = text_field_with_auto_complete :message,:user_name, {:size => 15} , {:url =>profile_users_path(:format => :js), :method => :get, :param_name => 'search' }
  %br
  %label{:for => "message"} Body:
  %br
  = message.text_area :message
  %br
  = message.file_field :attachment
  %br
  = submit_tag "Send", :confirm => "Are you sure?" 
```

我做错了什么？

# javascript - 处理成功：和错误：在使用 AJAX 的 MVC3 客户端到服务器验证例程中

> ID：11950019
> 
> 赞同：0
> 
> 时间：2012-08-14T10:06:34.003
> 
> 标签：javascript, ajax, asp.net-mvc-3, client-side, server-side

我正在研究一个需要返回服务器的验证例程，执行一些数据库检查，然后返回到客户端以根据结果显示消息。我正在使用 MVC3、Javascript、Ajax。

这是我的客户端：

```
<script type="text/javascript">
$('#usrid').change(function (e) {

    var formData = $("form").serialize();

    $.ajax({
        url: "ValidateOfficers",
        type: "POST",
        data: formData,
        success: function (data) {
            alert(data.reponseText);
        },
        error: function (data) {
            alert(data.reponseText);
        }
    });
}); 
```

这是我的控制器动作：

```
 [HttpPost, ActionName("ValidateOfficers")]
    public ActionResult ValidateOfficers(userRole role)
    {
        int holderid = role.holderid;
        int roleSelected = role.roleid;
        int chosenUser = role.usrid;
        int countRoles = db.userRoles.Where(i => i.roleid == roleSelected && i.holderid == holderid).Count();

        if (countRoles == 0) //success:
        {
            Response.StatusCode = 200;
            Response.Write("ok");
            return View("Create", role);
        }
        if (countRoles > 0) //error:
        {
            Response.StatusCode = 500;
            Response.Write("error");
            return View("Create", role);
        }
        return View();
    } 
```

我想做的事情是执行计数，然后根据计数结果发回状态。所以如果 countRoles = 1 则返回文本“官员存在”，如果 countRoles > 1 则“存在重复记录”。如果 countRoles 为零，那么我可以假设成功并且不提供任何消息。

好的，我被困在如何在服务器端构建此自定义消息以及如何将其发布回客户端。我正在考虑在剃须刀上添加几个标签并根据计数结果显示/隐藏。如您所见，我进行了非常基本的操作，但无济于事。我目前在警报消息中得到“未定义”。

如果我能得到一些关于这方面的建议，我将不胜感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:55:40.330

**行动**

```
public ActionResult ValidateOfficers(userRole role)
{
  string myMessage;
  \\ here goes all of your other code
  \\ set value into myMessage depending on your conditions.

  return Json(new {foo=myMessage});
} 
```

**Javascript**

```
<script type="text/javascript">
$('#usrid').change(function (e) {

    var formData = $("form").serialize();

    $.ajax({
        url: "ValidateOfficers",
        type: "POST",
        data: formData,
        success: function (data) {
            alert(data.foo);

            if(data.foo == "exists")
            { // do something (show/hide msgs)
            }
            else if(data.foo == "duplicate")
            { // do something else (show/hide msgs)
            }
            else
            { // do something else (show/hide msgs)
            }

        },
        error: function (data) {
            alert(data.reponseText);
        }
    });
}); 
```

您还想阅读[这篇文章](http://yassershaikh.com/how-to-call-an-action-from-javascript-or-jquery-in-mvc-3-razor/)，了解如何返回 json 数据。

希望这能解决您的问题。

# wpf - WPF 和列表视图。Shift - 选择多个项目。错误的开始项目

> ID：11950021
> 
> 赞同：10
> 
> 时间：2012-08-14T10:06:42.333
> 
> 标签：wpf, listview, multipleselection

问题解释：

给定一个包含 10 个项目的列表。

1.  我的第一个动作是（鼠标）单击第二个项目。
2.  其次，我有一个按钮，它应该以编程方式选择一个项目。

例如：

```
listView.SelectedIndex = 4; 
//or
listView.SelectedItems.Add(listView.Items[4]); 
```

该项目被正确选择。

1.  如果我现在按 SHIFT 并选择最后一个项目，则选择从单击的项目开始，而不是以编程方式选择的项目。

一种解决方案是模拟鼠标单击事件，该事件有效但有副作用。它也是hacky的方式。

似乎鼠标事件存储了起始项。

有什么我忽略的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T14:10:36.453

我已经在 MSDN 上询问过这个问题。令人惊讶的是，这个问题的原因是 SelectionMode

> 问题可能出在 ListBox 代码中（ListView 派生自 ListBox）：

```
protected override void OnSelectionChanged(SelectionChangedEventArgs e)
{   ...
    if ((this.SelectionMode == SelectionMode.Single) && (base.SelectedItem != null))
    {
       ...
        if (selectedItem != null)
        {
            this.UpdateAnchorAndActionItem(selectedItem);
    }
} 
```

> 如果 SelectionMode 是 Extended，则不会调用 UpdateAnchorAndActionItem(selectedItem)。

因此，在后面的代码中，您必须执行以下操作：

```
list.SelectionMode = SelectionMode.Single;
list.SelectedIndex = 4;
list.SelectionMode = SelectionMode.Extended; 
```

不太了解 MVVM 的情况。

**更新1**

我创建了自定义 ListView。它将在上述逻辑中执行。在这种情况下，即使在 MVVM 中，它也必须按预期工作。我希望它会帮助你。

```
public class MyListView:ListView
{
    protected override void OnSelectionChanged(SelectionChangedEventArgs e)
    {
        //if it is multiselection than execute standard logic
        if(SelectedItems.Count!=1)
        {
            base.OnSelectionChanged(e);
            return;
        }
        var mode = SelectionMode;
        SelectionMode = SelectionMode.Single;
        base.OnSelectionChanged(e);
        SelectionMode=mode;
    }
} 
```

# javascript - JQuery UI 对话框在第一次尝试时不会打开

> ID：11950023
> 
> 赞同：0
> 
> 时间：2012-08-14T10:06:50.537
> 
> 标签：javascript, jquery, html, jquery-ui

我正在尝试打开一个显示有关事件的信息的对话框。可以使用按钮打开另一个对话框，允许编辑事件和删除事件。

问题是，在第一次尝试打开编辑对话框时，什么都没有发生，而删除对话框却运行良好。关闭主对话框并重新打开后，单击按钮时也会显示编辑对话框。

我想它与编辑对话框的视图有​​关，因为删除对话框没有并且可以正确打开。
这不是 ajax 问题（事件是从数据库中获取的），它是在初始化对话之前加载的。

对话在同一元素“eventDialog”中调用，并在关闭主对话框后正确删除。

提前致谢 ：）

继承人的一些代码：

**主对话框**

```
$.Controller('COPD.Controller.PatientHeader.Dialog',
/** @Static */
{   
defaults: {
    patientID: 2,
    eventID: 0,
},

},
/** @Prototype */
{
/*
 * All of this class' work is done in this constructor
 */

init : function(){

    this.element.append('<span id=\"eventDialog\"></span>');
    $('#eventDialog').html('COPD/controller/patient_details/controller/patient_header/views/patientHeaderDialog.ejs', 
            {event: COPD.Models.TreatmentEvent.findOneDebug({behandlungsEventID: this.options.eventID},
            this.proxy(function(success) {
                $("#eventDialog").dialog({
                    show:"fade",
                    hide:"fade",
                    height:"auto",
                    width:500,
                    draggable:false,
                    resizable:false,
                    modal:true,
                    position:"center",
                    title:success[0].behandlungskategorie.name,
                    create: this.proxy(function(){this.initDialogs(success);}),
                    close: this.proxy(function(){this.destroy();}),
                    buttons: [{text:"Bearbeiten", click: this.proxy(function() {this.openEditEvent();})},
                              {text:"Löschen", click: this.proxy(function() {this.openDeleteEvent();})},
                              {text:"Schließen", click: function() {$(this).dialog("close");}},],
                });

            }))});
},

// Standard destroy()-Funktion
destroy : function() {
    $('#eventDialog').copd_patient_header_dialog_edit("destroy");
    $('#eventDialog').copd_patient_header_dialog_delete("destroy");
    $('#eventDialog').remove();
    this._super();
},

initDialogs : function(event) {
    $('#eventDialog').copd_patient_header_dialog_delete({event: event});
    $('#eventDialog').copd_patient_header_dialog_edit({event: event});
},

openEditEvent : function() {
    $('#editEvent').dialog("open");
},

openDeleteEvent : function() {
    $('#deleteEvent').dialog("open");
},

});

}); 
```

**编辑对话框**

```
$.Controller('COPD.Controller.PatientHeader.Dialog.Edit',
/** @Static */
{   
defaults: {
    patientID: 2,
    eventID: 0,
    event: null,
},

},
/** @Prototype */
{
/*
 * All of this class' work is done in this constructor
 */

init : function(){
    console.log("Der Edit-Event-Dialog wird jetzt initialisiert!");
    this.element.append('<span id=\"editEvent\"></span>');
    $("#editEvent").html('COPD/controller/patient_details/controller/patient_header/views/patientHeaderDialogEdit.ejs', {
        behandlungskategorien: COPD.Models.TreatmentCategory.findAll(),
        event: this.options.event[0],
    }, this.proxy(function() {
        $("#editEvent").dialog({
            show:"fade",
            hide:"fade",
            height:"auto",
            width:500,
            draggable:false,
            resizable:false,
            modal:true,
            autoOpen:false,
            title:this.options.event[0].behandlungskategorie.name + " bearbeiten",
            buttons: [{text:"Speichern", click: this.proxy(function(){this.updateEvent();})},
                      {text:"Schließen", click: function(){$(this).dialog("close");}},],

        });
    }));
    console.log("Event:", this.options.event[0]);
},

// Standard destroy()-Funktion
destroy : function() {
    $('#editEvent').remove();
    this._super();
},

updateEvent : function() {
//updates the event
},

});

}); 
```

**删除对话框**

```
$.Controller('COPD.Controller.PatientHeader.Dialog.Delete',
/** @Static */
{   
defaults: {
    patientID: 2,
    eventID: 0,
    event: null,
},

},
/** @Prototype */
{
/*
 * All of this class' work is done in this constructor
 */

init : function(){
    console.log("Der Delete-Event-Dialog wird jetzt initialisiert!");
    this.element.append('<span id=\"deleteEvent\"></span>');
    $("#deleteEvent").html('<br>Wollen Sie wirklich das Behandlungsevent löschen?<br><br>\''+ this.options.event[0].behandlungskategorie.name + '\'<br>' + this.options.event[0].hinweisText);
    $("#deleteEvent").dialog({
        show:"fade",
        hide:"fade",
        height:"auto",
        width:500,
        draggable:false,
        resizable:false,
        modal:true,
        autoOpen:false,
        position:"center",
        title:"Wirklich Löschen?",
        buttons: [{text:"Ja", click:function()    {this.hideEvent(this.options.event);}},
                  {text:"Nein", click:function()    {$(this).dialog("close");}},],
    });
},

// Standard destroy()-Funktion
destroy : function() {
    $('#deleteEvent').remove();
    this._super();
},

hideEvent : function() {

}

 });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:07:10.043

问题解决了，经过大量谷歌搜索并查看 xmlHttpRequests 我意识到这是一个同步问题。甚至在获取数据之前就已经加载了视图，这实际上不应该发生。

使用`$.when(fetchItems()).done(function(itemsFetched) { //doSomething })`jquery.Model 插件提供的功能使视图等待数据加载并随后对其进行初始化。

# silverlight - 在 Silverlight 中允许跨域调用

> ID：11950028
> 
> 赞同：3
> 
> 时间：2012-08-14T10:07:16.027
> 
> 标签：silverlight, silverlight-5.0

正如 Microsoft 在[这篇文章](http://msdn.microsoft.com/en-us/library/cc197955%28v=vs.95%29.aspx)中所述，您需要在从中下载应用程序的 Web 服务上托管一个 xml 配置文件，以允许应用程序进行跨域调用。

有什么解决方法吗？我的silverlight 应用程序可以运行OOB 或可能托管在某个随机Web 服务器上（其中不能放置crossdomain.xml 或clientaccesspolicy.xml）。

我需要从 silverlight 应用程序进行的调用是对各种 json web 服务的调用（使用 ServiceStack 中的[SilverlightServiceClient](https://github.com/ServiceStack/ServiceStack/wiki/SilverlightServiceClient)），但我事先不知道 URL。

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:55:00.560

听起来您实际上并不处于跨域场景中，但不确定您的 JSON 服务位于何处。您引用的文章涉及您希望*在托管 Silverlight 应用程序的服务器之外的服务器上*调用服务的位置。

***如果***JSON 服务在其他机器上，不受您的控制，那么您应该从您的网络服务器而不是您的客户端调用它们。那么就没有跨域问题了。您只需将调用包装在您自己的 Web 服务器上的您自己的 API 中（这也为您提供了额外的分离级别，以防第三方服务消失）。

*我唯一不确定的是OOB模式是否记得它来自哪个服务器（但我认为它确实如此）。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:13:16.473

请参阅此问题，了解如何使用全局（或每个服务）HTTP 标头通过 ServiceStack 启用 CORS：

[servicestack REST API 和 CORS](https://stackoverflow.com/questions/8211930/servicestack-rest-api-and-cors)

# javascript - Javascript数组元素不是通过函数设置的？

> ID：11950029
> 
> 赞同：0
> 
> 时间：2012-08-14T10:07:32.440
> 
> 标签：javascript, arrays, element

我一直在努力解决这个问题很长一段时间，并希望得到任何帮助。

代码如下，可以看这里[http://incoming.comule.com/isnan.html](http://incoming.comule.com/isnan.html)

```
<script>
var price = new Array();

function add(price) {
//alert("function add: is price not a number? = "+isNaN(price));
price[0] = price;
}

function addman() {
price[0] = 0.87;
}

function status() {
alert(price[0]);
}

function num() {
alert("function Number: is price not a number? = "+isNaN(Number(price[0])));
}

function pInt() {
alert("function parseInt: is price not a number? = "+isNaN(parseInt(price[0])));
}

function pFloat() {
alert("function parseFloat: is price not a number? = "+isNaN(parseFloat(price[0])));
}
</script>

<a href="javascript:add('0.45');">Add price 0.45</a> then click ... <a href="javascript:status();">status</a> ,
 <a href="javascript:num();">number</a> , <a href="javascript:pInt();">parseInt</a> , <a href="javascript:pFloat();">parseFloat</a>

<p>

<a href="javascript:addman();">set manually</a> 
```

当我单击添加价格，然后状态时，它显示为未定义，但是当我单击手动设置然后状态时，状态显示值。唯一的区别是它是如何设置的，有谁知道我如何通过函数变量添加它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:10:06.603

问题是您的数组和函数参数共享相同的名称。后者在函数范围内取代了前者，因此您实际上无法访问外部数组。

更改参数名称，您会没事的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:13:41.920

您只需要将您的重命名`Array`为`price`. `add`函数内部`price`指的是函数参数，而不是数组。

# sql-server-2008 - SQL Server 2008：选择更新

> ID：11950031
> 
> 赞同：4
> 
> 时间：2012-08-14T10:07:41.523
> 
> 标签：sql-server-2008, locking

我在这里看到了一个关于这个的问题，但是它很旧，所以如果现在存在解决方案，我会再次询问。

我的问题是这个。我有一个我想从中选择的数据库表，但我想锁定我选择的行。这样做的原因是我可能正在运行另一个进程，它也想选择相同的行，我想阻止这种情况。

想象一下，我有两个进程在做同样的事情。一个执行选择并开始执行数据处理。然后几秒钟后，下一个进程出现并进行选择，但由于行没有被锁定，它也需要相同的记录并开始处理它们。这当然是一个糟糕的情况。在 Oracle 中，您可以使用 SELECT FOR UPDATE 来锁定行以防止它们被第二个进程使用。这在 SQL Server 2008 中如何实现？

我应该补充一点，我只能使用标准的 sql 语句。我无权访问过程、函数等。它必须通过一个简单的语句来完成。这是一个很长的故事和一个设计考虑，已经脱离了我的掌控。解决方案必须能够存储在表中，稍后检索，然后通过 C# 中的 ADO 对象运行，特别是分配给命令对象。

如何将锁应用于此语句？

```
SELECT * 
FROM 
  (SELECT TOP (20) * 
   FROM [TMA_NOT_TO_ENTITY_QUEUE]  
   WHERE [TMA_NOT_TO_ENTITY_QUEUE].[STATE_ID] = 2 
   ORDER BY TMA_NOT_TO_ENTITY_QUEUE.ID) a 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T10:36:32.257

您需要使用所谓的[表格提示](http://msdn.microsoft.com/en-us/library/ms187373.aspx)之一：

**更新锁**阻止其他进程尝试更新或删除有问题的行 - 但它不会阻止读取访问：

```
 SELECT TOP (20) * 
    FROM [TMA_NOT_TO_ENTITY_QUEUE] WITH (UPDLOCK)
    WHERE [TMA_NOT_TO_ENTITY_QUEUE].[STATE_ID] = 2 
    ORDER BY TMA_NOT_TO_ENTITY_QUEUE.ID 
```

还有一个**独占锁**，但基本上，更新锁应该足够了。一旦您选择了带有更新锁的行，这些行就会受到“保护”以防止更新和写入，直到您的事务结束。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T09:37:41.833

通过锁定，您希望第二个过程发生什么？如果您希望它等到第一个完成，您完全可以使用事务隔离级别来做到这一点。

尝试运行这个小测试，你会明白：

在 SSMS 上打开两个新查询（让我们从现在开始将其称为 A 和 B）并在 A 上创建一个简单的表，如下所示：

```
create table transTest(id int)
insert into transTest values(1) 
```

现在，执行以下操作：

做`select * from transTest`他们两个。您将看到值 1

跑步时：

```
set transaction isolation level read committed 
```

在 B 运行：

```
begin transaction
insert into transTest values(2) 
```

跑步时：

```
select * from transTest 
```

您将看到查询不会完成，因为它被 B 上的事务锁定

在 B 运行：

```
commit transaction 
```

回到A，你会看到查询完成了

在 A 上设置事务隔离级别 read uncommitted 重复测试，您将看到查询不会被事务锁定

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T09:24:15.940

您应该将您的流程包装在事务中，并适当地设置事务隔离级别（即：可序列化）

```
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE
BEGIN TRAN
     UPDATE yourtable...
     -- process 1
COMMIT TRAN 
```

和

```
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE
BEGIN TRAN
     UPDATE yourtable...
    -- process 2
COMMIT TRAN 
```

这种行为自古以来就存在于 SQL Server 中。

其他事务隔离级别可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-22T18:17:19.927

SQL Server 和Oracle 的锁定机制完全不同（甚至在行为上相反）。如果您在代码中包含任何事务级别控制元素，它将不会是“与数据库无关的”，但无论如何也不会出现任何合理复杂性的数据库代码“与数据库无关”。在这种情况下，您必须仅使用“纯 SQL”保持在 SQL92 规范内并在应用程序端控制事务，而不使用“链接到 SQL”，但这会限制您编写有效（特定于数据库）解决方案的能力。

# git - 查看文件夹的 git 历史记录

> ID：11950037
> 
> 赞同：166
> 
> 时间：2012-08-14T10:07:58.087
> 
> 标签：git

如何查看文件夹中所有文件的 git log 历史记录？

我找到了几篇关于如何显示特定文件的日志的帖子，但没有找到特定文件夹的帖子。

* * *

## 回答 #1

> 赞同：223
> 
> 时间：2012-08-14T10:18:38.947

您可以使用`foldername`或`foldername/*`。无论哪种方式都应该有效。

```
git log -- path/to/folder
git log -- path/to/folder/* 
```

此方法不会跟踪重命名文件的历史记录。

请注意，这`--`也是可选的。（来自 git log 手册）

```
[--] <path>...

           Show only commits that are enough to explain how the files that match the specified paths came to be. See History Simplification below for
           details and other simplification modes.

           Paths may need to be prefixed with -- to separate them from options or the revision range, when confusion arises. 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2013-11-14T17:33:27.410

如果你想使用图形工具，比如 gitk，它的工作原理是一样的：

```
gitk -- path/to/folder 
```

# vim - 如何从 thunar 用 vim 打开文本？

> ID：11950038
> 
> 赞同：5
> 
> 时间：2012-08-14T10:08:09.213
> 
> 标签：vim, xfce

我使用来自 thunar（文件管理器）的命令“vim”打开文本，就像使用来自 thunar 的命令“feh”打开图片一样，几乎所有应用程序都损坏了。

不想打开 xterm，cd 到那个路径和 vi 那个文件，如果可以双击的话。

有解决办法吗？

拱 + openbox + thunar + xterm

* * *

有一个更简单的解决方案：*右键单击 -> 使用其他应用程序打开 -> 使用自定义命令*并输入“ **xterm -e vim** ”。

这个来自我的一个QQ朋友，其实和evnu的差不多。谢谢@evnu。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T14:01:37.143

您可以按照[ArchLinux Wiki 中的](https://wiki.archlinux.org/index.php/Xdg-open)说明使用 Xdg 来完成此操作。对于 GUI 应用程序，文件类型可以通过使用`left-click -> Properties -> Open With`. 如果你想用一个程序运行一个 xterm，你可以将一个 MimeType 和一个命令关联起来，像这样运行：

去`~/.local/share/applications`。在那里，添加一个描述如何启动应用程序并将其保存为`my-application.desktop`或类似的文件：

```
[Desktop Entry]
Encoding=UTF-8
Type=Application
NoDisplay=true
Name=vim
Exec=/usr/bin/xterm -name vim -e /usr/bin/vim
MimeType=text/plain 
```

现在您必须编辑文件`defaults.list`。在那里，为要与新条目关联的 MimeType 添加一个条目：

```
[Default Applications]
text/plain=`my-application.desktop` 
```

重新启动后，当您单击纯文本文件时，thunar 应该能够使用 vim 启动 xterm。

# html - 调整窗口大小时，父背景 DIV 被截断

> ID：11950041
> 
> 赞同：0
> 
> 时间：2012-08-14T10:08:18.447
> 
> 标签：html, css

我试图弄清楚为什么下面代码中的父 DIV 并不总是完全填满屏幕（100%），特别是当我将浏览器的宽度减小到小于子 DIV 的宽度并滚动到右边（我看到父 DIV 背景被截断）。

为什么会发生这种情况，如何使父 div 填充窗口的整个宽度？

这是html：

```
<!doctype html>
<html>
    <head>
        <link href="teststyle.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <div id="parent">
            <div id="child">
                <p>red background gets truncated when the horizontal scrollbar is present.</p>
            </div>
        </div>
    </body>
</html> 
```

这是我的CSS：

```
* {
    margin:0;
    padding:0;
    border:0;
    }

#parent{
    background:red;
    padding: 20px 0;
}

#child{
    width:600px;
    margin:0px auto;
    background:yellow;
} 
```

![火狐截图](../Images/085075181d77588908a4fbd413b406c9.png)

我正在使用 Windows、Firefox（最新）、Chrome（最新）、IE 9。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:23:02.780

给 min-width: 600px 给 #parent （ minwidthof parent 与 child width 相同）

演示：http: [//jsfiddle.net/ZYLzs/2/](http://jsfiddle.net/ZYLzs/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:12:55.050

你试过给父母100%的宽度吗？

```
#parent{
   background:red;
   padding: 20px 0;
   width:100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:14:21.710

```
#parent{
    background:red;
    padding: 20px 0;
    width: 100%; /* add this */
} 
```

# android - Android如何发出http请求以获取ImageView的图像链接

> ID：11950042
> 
> 赞同：1
> 
> 时间：2012-08-14T10:08:18.790
> 
> 标签：android, http, request, imageview

如何发出 http 请求以获取图像链接： http: [//vec03.maps.yandex.ru/tiles](http://vec03.maps.yandex.ru/tiles?l=map&v=2.20.0&x=19783&y=10320&z=15) ?l=map&v=2.20.0&x=19783&y=10320&z=15 以便能够添加到 ImageView

请帮忙，我不擅长网络开发。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T10:19:05.673

```
String imageUrl= "http://vec03.maps.yandex.ru/tiles?l=map&v=2.20.0&x=19783&y=10320&z=15";
URL url = new URL(imageUrl);
HttpURLConnection connection  = (HttpURLConnection) url.openConnection();

InputStream is = connection.getInputStream();
Bitmap img = BitmapFactory.decodeStream(is);  

imageView.setImageBitmap(img ); 
```

在你用 SO 提出问题之前先谷歌一下，避免重复的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:22:36.360

```
public void setImage()
    {
     ImageView icon=(ImageView)v.findViewById(R.id.icon);

                                   Drawable image = ImageOperations(getapplicationContext(), "yuour url",
                                     "image.jpg");

                                   icon.setImageDrawable(image);
    }
private Drawable ImageOperations(Context ctx, String url,
               String saveFilename) {
              try {
               InputStream is = (InputStream) this.fetch(url);
               Drawable d = Drawable.createFromStream(is, "src");
               return d;
              } catch (MalformedURLException e) {
               e.printStackTrace();
               return null;
              } catch (IOException e) {
               e.printStackTrace();
               return null;
              }
    }
              public Object fetch(String address) throws MalformedURLException,
               IOException {
              URL url = new URL(address);
              Object content = url.getContent();
              return content;
             } 
```

# html - Struts2 从字符串插入 html

> ID：11950045
> 
> 赞同：0
> 
> 时间：2012-08-14T10:08:29.570
> 
> 标签：html, struts2

是否可以通过 Struts 将变量从 java 文件传递​​到 jsp，并且该变量本身包含 html？（如“<p>你好</p>”）。然后我想将此变量的内容粘贴到 jsp 文件中，它应该创建新的 html 内容。你能给我一个建议，因为我是初学者，我不知道如何使用它.. 谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T11:01:03.960

是的，这很有可能，您可以从您的操作类发送一个简单的字符串，并可以在您的 JSP 中检索它，例如

```
public class MyClass extends ActionSupport{

 private String myHTMLCode;
 //getter method
 //setter
  public String execute() throws Exception{
     myHTMLCode=// fill it with your HTML
  }

} 
```

在 JSP 中

```
<s:property value="myHTMLCode" escapeHtml="false"/> 
```

Struts2 标签具有属性，即`escapeHtml`告诉底层框架天气是否转义 HTML，属性标签默认为 true

# php - 禁用文件夹中的文件执行 .htaccess 规则

> ID：11950049
> 
> 赞同：0
> 
> 时间：2012-08-14T10:08:41.427
> 
> 标签：php, .htaccess

我有一个站点，我想仅为该文件夹禁用某些文件执行扩展。

例如：www.yoursite.com/cache/test.php

不应该被执行。

我试过这段代码：

```
<FilesMatch "\.(htaccess|htpasswd|ini|phps|fla|psd|log|sh|zip|exe|pl|jsp|asp|htm|sh|cgi|py|php)$">
  Order Allow,Deny
  Deny from all
</FilesMatch> 
```

但这停止了我的网站功能。

我只想将此规则应用于缓存文件夹中，但我无法将`.htaccess`文件放入其中，因为此文件夹会定期清除。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T10:31:34.293

尝试将此行添加到您的根 .htaccess 文件中：

```
RewriteRule ^cache/.*\.(htaccess|htpasswd|ini|phps?|fla|psd|log|sh|zip|exe|pl|jsp|asp|htm|sh|cgi|py)$ - [F] 
```

该标志将导致显示 403 禁止错误

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T10:09:49.980

您所要做的就是将该`.htaccess`文件放在该特定缓存文件夹中。

> `.htaccess`文件提供了一种基于**每个目录**进行配置更改的方法。

[Apache HTTP 服务器教程：.htaccess 文件](http://httpd.apache.org/docs/2.2/howto/htaccess.html)

将该规则放在`.htaccess`您网站根目录的文件中，将在您的整个网站上启用这些规则。

* * *

如果您希望从该缓存文件夹外部启用此规则，您可能需要在主`.htaccess`文件中尝试此规则 -

```
RewriteEngine On
RewriteRule ^cache/.*\.(htaccess|htpasswd|ini|...)$ /access_denied.php 
```

该规则测试以查看请求的文件是否

*   网址以`cache/`
*   包含列出的任何文件扩展名（用竖线字符分隔）

如果这些条件都满足，它会将调用传递给`access_denied.php`脚本，您可以在其中显示适当的错误消息。

# python - 如何使用 WTForms 和 SQLAlchemy 填充多对多关系？

> ID：11950051
> 
> 赞同：3
> 
> 时间：2012-08-14T10:08:45.547
> 
> 标签：python, sqlalchemy, wtforms

我正在使用 sqlalchemy 和 wtforms 在龙卷风中构建一个应用程序。我有两个模型委员会和成员有多对多的关系。我无法使用 sqlalchemy 模型填充表单。

我的模型看起来像这样

```
class Committee(Base):
    __tablename__ = 'committee'

    id_ = Column(Integer, primary_key=True)
    name = Column(String)

class Member(Base):
    __tablename__ = 'member'

    id_ = Column(Integer, primary_key=True)
    name = Column(String)
    phone = Column(String)
    committee = relationship("Committee",
                  secondary=member_committee_table,
                  backref="members")

#query wrapper used in wtforms
def get_members():
    #return m.Session.query(Member).all()
    return m.Session.query(Member)

class CommitteeForm(BaseForm):
    name = TextField('name', validators=[Required()])
    members = QuerySelectMultipleField(query_factory=get_members()) 
```

这给了我错误，告诉“查询”对象不可调用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T02:14:28.350

摆脱'（）'。它需要一个方法工厂

```
members = QuerySelectMultipleField(query_factory=get_members) 
```

# xml - 实体名称必须紧跟在实体引用中的 "

> ID：11950054
> 
> 赞同：1
> 
> 时间：2012-08-14T10:08:52.393
> 
> 标签：xml, entity, xpages

每次我打开我的一个 xpage 时，我都会看到弹出/对话框（见图）。我在源窗格中查看了试图找到错误但找不到它，并且该问题未在源窗格或问题 Eclipse 视图中列出。

xpage 正在编译并且工作正常，但弹出窗口很烦人。

找出造成这种情况的最佳方法是什么？

实体名称必须紧跟在实体引用中的 "

![错误](../Images/6ffa5be72d6864c48a50733f83477d97.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T16:50:26.707

这一定是自定义控件中使用的自定义可视化中的错误。我试过了

```
if( true && true ){
    return "home"
} 
```

并得到同样的错误。但仅在“在页面加载时计算”时。当我将其更改为“动态计算”时，它运行良好。我猜有些东西不喜欢＆符号&&。

顺便说一句，它也不喜欢||。

2012-08-30 编辑：即使我输入...

```
return "home" 
```

并将其设置为“在页面加载时计算”它会生成错误并且不会在设计视图中正确呈现自定义控件。

我相信在自定义可视化中显示默认内容的 id 或者在这种情况下计算 id 的代码是导致问题的原因。有人需要处理计算页面加载时生成的 $ 以及任何 && 和 || 如果他们真的觉得有必要在代码中显示它，它们就会出现在代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:50:14.343

该错误通常意味着您破坏了 XML。例如 & 代替 & 在一个领域。

尝试从页面中删除元素，看看它是否编译。缩小范围后，发布代码。

如果您的页面的代码设置为从 Web 源读取 XML，但您返回的是网页而不是有效的 XML，也会发生这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T09:37:48.330

我已经追踪到这个错误是由 extlib 中的动态内容控制引起的。使用以下代码可以重现错误（注意：您需要安装 extlib）。放在 computedText 中的相同 ssjs 代码可以工作。

```
 <?xml version="1.0" encoding="UTF-8"?>
 <xp:view xmlns:xp="http://www.ibm.com/xsp/core"    xmlns:xe="http://www.ibm.com/xsp/coreex">
    <xe:dynamicContent id="dynC" useHash="true">
    <xe:this.defaultFacet><![CDATA[#{javascript:if(n.contains("news") && u.contains(userid)){
return "yes"
}
 }]]></xe:this.defaultFacet>
</xe:dynamicContent>
</xp:view> 
```

对此有什么想法吗？

# symfony - Symfony2 DomCrawler 链接

> ID：11950057
> 
> 赞同：4
> 
> 时间：2012-08-14T10:09:00.007
> 
> 标签：symfony, hyperlink, web-crawler

我正在使用 Symfony2 DOMCrawler。我在页面上有一个链接。我想通过链接并在那里抓取一些内容。我该怎么做？让代码是这样的

```
<a href="www.example.com">Go there</a> 
```

我知道`$crawler->selectLink('Go there')->link();`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-05T01:52:55.207

也许您正在寻找类似的东西：

```
$link = $crawler->filter('a[id="fabulous_id"]')->attr('href');
$crawler = $client->request('GET',$link); 
```

查看[DomCrawler Doc](http://symfony.com/doc/2.0/components/dom_crawler.html)获取信息

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T10:25:03.407

你正在寻找`click()`方法。

```
$link = $crawler->selectLink('Go there')->link();
$crawler = $client->click($link); 
```

你应该更仔细地阅读[这个文档章节](http://symfony.com/doc/current/book/testing.html#your-first-functional-test)

# awk - 如何用awk计算序列中的残基总数？

> ID：11950059
> 
> 赞同：0
> 
> 时间：2012-08-14T10:09:05.667
> 
> 标签：awk

我有一个包含蛋白质序列的文本文件。我想得到每个序列中的残基总数。我怎样才能用 awk 做到这一点？

```
>1GS9
PYCPAAVIAPVV
>1LE2
DFEFAKWKN
>1NFN
ADAPPDS 
```

期望的输出

```
1GS9 - 12
1LE2 - 9
1NFN - 7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:16:00.167

```
awk '/^>/ {
   name=substr($0,2);
   getline;
   printf("%s - %d\n", name, length($1))
}' input_file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:14:18.650

你可以这样做：

```
 awk '/^>/ { res=substr($0, 2); } /^[^>]/ { print res " - " length($0); }' < file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:28:03.160

`{ ... }`用和偶数行中的蛋白质自动读取每个奇数行`getline`：

```
awk ' {
    getline prot;
    printf "%s - %d\n", substr( $0, 2 ), length( prot ) 
}' infile 
```

输出：

```
1GS9 - 12
1LE2 - 9
1NFN - 7 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T10:40:33.393

```
awk '{line=substr($0,2);getline;print line,"-",length($0)}' temp 
```

测试如下：

```
> cat temp
>1GS9
PYCPAAVIAPVV
>1LE2
DFEFAKWKN
>1NFN
ADAPPDS
> awk '{line=substr($0,2);getline;print line,"-",length($0)}' temp
1GS9 - 12
1LE2 - 9
1NFN - 7
> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T14:18:14.707

这可能对您有用（GNU awk）：

```
awk -vRS='>' -vOFS=' - ' 'NR>1{print $1,length($2)}' file 
```

# npapi - 如何使用 OpenGL 编写 mac npapi 插件？

> ID：11950061
> 
> 赞同：0
> 
> 时间：2012-08-14T10:09:08.290
> 
> 标签：npapi, browser-plugin, npruntime

我正在查看头文件并看到了 openGL 绘图模型，所以当我在网上看到时，我正忙着从 CoreGraphics 切换插件中的所有内容，显然，openGL 绘图模型实际上并不存在并且永远不会......

你们中的任何人都可以帮助我或将我链接到可以帮助我做到这一点的好教程或资源吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T15:11:54.137

使用带有 Mac NPAPI 插件的 OpenGL 唯一受支持的方法是使用带有 CAOpenGLLayer 的 CoreAnimation 绘图模型。

您可能想阅读Stuart Morgan关于 Mac 绘图模型主题[的博文。](http://www.escapedthoughts.com/weblog/geek/P110308-mac-npapi-plugins.writeback)

请注意，在 Safari 上您将使用[CoreAnimation](https://wiki.mozilla.org/NPAPI%3aCoreAnimationDrawingModel)在其他浏览器上您将使用[InvalidatingCoreAnimation](https://wiki.mozilla.org/NPAPI%3aInvalidatingCoreAnimation)；它将以相同的方式工作，但使用 Invalidating 您需要每次调用[NPN_InvalidateRect 。](https://developer.mozilla.org/en-US/docs/NPN_InvalidateRect)

[FireBreath](http://www.firebreath.org)有一个绘制所有这些模型的示例；它被包含在[BasicMediaPlayer](https://github.com/firebreath/FireBreath/tree/master/examples/BasicMediaPlayer/Mac)示例中。即使您决定不使用 FireBreath，您也可能会发现[代码](https://github.com/firebreath/FireBreath/blob/master/src/PluginAuto/Mac/PluginWindowMacCA.mm)或[文档](http://www.firebreath.org/display/documentation/Event+models+and+drawing+models)具有指导意义。

希望有帮助

# javascript - 如何用json返回简单数据

> ID：11950062
> 
> 赞同：0
> 
> 时间：2012-08-14T10:09:16.093
> 
> 标签：javascript, jquery, ajax, json, jquery-mobile

如何在 succesfull 数组中返回以下 json 数据：

```
 [{"Identifier":1,"Naam":"NOT Given","Adres":"Kopenhagen 9","Postcode":"0000LL","Plaats":"NOT Given","Longitude":"0.00000","Latitude":"0.00000"},
{"Identifier":2,"Naam":"NOT Given","Adres":"NOT Given 1","Postcode":"0000LL","Plaats":"Rotterdam","Longitude":"0.00000","Latitude":"0.00000"},
{"Identifier":3,"Naam":"NOT Given","Adres":"NOT Given 6","Postcode":"0000LL","Plaats":"Rotterdam","Longitude":"0.00000","Latitude":"0.00000"},
{"Identifier":4,"Naam":"NOT Given","Adres":"NOT Given 1","Postcode":"0000LL","Plaats":"Den Haag","Longitude":"0.00000","Latitude":"0.00000"},
{"Identifier":5,"Naam":"NOT Given","Adres":"NOT Given 218","Postcode":"0000LL","Plaats":"Zoetermeer","Longitude":"0.00000","Latitude":"0.00000"}] 
```

我想在一个数组中调用它，例如 data.Naam 其中 id = 2。

如果您使用此代码：

```
$.post( "http://notGiven", {}, function(data) { 
        alert('Aantal elementen in lijst: ' + data.length); 
        $.each(data, function(index, element) {

            });
        }); 
```

那么数据长度给了我一个高于 3000 的数字，为什么。

如果我在循环中尝试 element.Naam，那么它会返回 undefined ......

所以..我如何获得我的 json 返回的数据，就像所有的名字一样？没有显示未定义的错误...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:58:16.343

正如@Utkanos 所说，

解决方案在这里：http: [//jsbin.com/equkaf/6/edit](http://jsbin.com/equkaf/6/edit)

# java - 如何打开带有小部件的新窗口？

> ID：11950069
> 
> 赞同：0
> 
> 时间：2012-08-14T10:09:39.523
> 
> 标签：java, gwt, gxt

我正在使用 GWT/ExtGWT。我有一个小问题......我的网页中有一个超链接，当用户点击这个超链接时，应该打开一个新的浏览器窗口，其中包含一个小部件（我制作的一个小部件，其中包含一个带有文本框、标签、组合框...）。但我不知道我该怎么做。请帮我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:42:54.717

尝试使用文本对象，而不是使用超链接，添加标签/ css 使其看起来和感觉像超链接.. 添加 onClick 事件处理程序，如下所示：

```
 Dialog dialog = new Dialog();
    dialog.add(new NewWidget());
    dialog.show(); 
```

或者，如果您更喜欢另一种外观（但我认为这更复杂）：

```
 Window.open(url, name, features); 
```

# javascript - 继承对象并将变量传递给它，javascript

> ID：11950073
> 
> 赞同：0
> 
> 时间：2012-08-14T10:09:44.810
> 
> 标签：javascript, jquery, function, object

我认为代码比文字解释得更好。基本上，目标是将来只应编辑**可定制**部分（意味着应添加 400、500 等而不干扰**静态**部分中的代码）。

现在我正在尝试传递**screenId**。您可以说我可以将 function() 替换为 function(id) 但这不是我将来要传递的唯一变量，因此如果我可以像我可以在原型之间`inherit`继承这些变量**而不**需要将它们传递为函数的参数。`this.id`

 **您可以在这里找到代码：http: [//jsfiddle.net/J4pK6/](http://jsfiddle.net/J4pK6/)

提前感谢您的时间和支持。

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:26:21.483

这将通过使用`screens[screenId].content.call(this);` 重做的代码来解决

参考：[this](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)和[call](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call) 感谢[Felix Kling](https://stackoverflow.com/users/218196/felix-kling)**

# c# - 当内存数据库刷新到磁盘时指定sqlite文件的位置

> ID：11950079
> 
> 赞同：0
> 
> 时间：2012-08-14T10:09:52.240
> 
> 标签：c#, .net, sqlite

我使用 sqlite 作为数据的临时存储，因为它通过处理系统，理想情况下希望它在内存中，所以我使用：

```
new SQLiteConnection("Data Source = :memory:"); 
```

然而，随着这个数据库变得越来越大，它最终会被刷新到磁盘。这一切都很好，但我的问题是我希望能够指定 sqlite 在需要将其刷新到磁盘时创建此文件的位置。目前它在 %TEMP% 下创建 etilqs_ 文件，我想将其配置为在不同的驱动器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:55:35.180

没有测试，但试试这个：

`new SQLiteConnection("Data Source = :memory:; PRAGMA temp_store_directory = 'yourCustomPathHere'");`

基于[this](http://www.sqlite.org/pragma.html#pragma_temp_store)和[this](https://stackoverflow.com/questions/2286827/using-pragma-s-of-sqlite-in-c-sharp)。

# c# - 清理 BitmapSource 的集合

> ID：11950081
> 
> 赞同：0
> 
> 时间：2012-08-14T10:10:00.120
> 
> 标签：c#, wpf, bitmapsource

我有一个 BitmapSource 的集合，这些集合是通过将其 StreamSource 属性设置为字节数组的 MemoryStream 来创建的。使用它们后如何从内存中删除它们？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:11:51.050

只需清除对它们的引用，垃圾收集器就会负责回收内存。

# php - 如何以 JSON 格式发送图像和日期

> ID：11950084
> 
> 赞同：0
> 
> 时间：2012-08-14T10:10:24.860
> 
> 标签：php, json

我是 JSON 新手，从我读过的内容来看，发送日期似乎非常困难。我需要使用 PHP 发送几个日期。

我还需要发送一张我认为最好使用 base64 编码字符串完成的图像。有没有更好的办法？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:15:05.350

JSON 本身不支持`Date`直接发送对象。但是，您可以将您正在使用的日期的时间戳作为一个数字发送并使用

```
var myDate = new Date( jsonObject.timestamp ); 
```

重新创建一个`Date`对象。请注意，PHP 使用基于秒的时间戳（参见，例如，[here](http://php.net/manual/en/function.time.php)），而 JavaScript 使用毫秒作为基础（参见，例如，[here](https://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CE0QFjAA&url=https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date&ei=2iUqUJTGNYy3hAe22ICgCA&usg=AFQjCNG62A29sndTj8GO6o93wmv9lJpSgQ&cad=rja)）！

对于图像，我同意，如果这些图像是动态创建的或者不应该使用 URL 访问，那么以 Base64 编码形式发送它们是最好的方法。

如果可以使用 URL 访问它们，则发送此 URL 而不是图像当然是更可取的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:14:52.693

你不能。

> 尝试以毫秒为单位发送日期。
> 
> 尝试将 url 发送到图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:18:07.843

JSON 只是一个带有一些格式化规则的字符串。您可以创建日期

```
$arr = array('date' => time());
echo json_encode($arr); 
```

您可以使用 Base64 发送图像，但如果可以，请使用 URL。

# java - 未从 randomAccessFile 中删除 DeleteByName 方法

> ID：11950091
> 
> 赞同：0
> 
> 时间：2012-08-14T10:10:48.443
> 
> 标签：java, hashmap, random-access

嘿，我的 RandomAccessFile 应用程序不适用于我的 deleteByName 方法。基本上我希望这种方法在商店中搜索学生，然后将其从 RandomAccessFile 中删除。搜索位没有问题，但 RandomAccessFile 仍然显示详细信息为空的员工，而不是完全删除学生。任何人都可以帮忙吗？

这是我的代码：

```
//---------------------------------------------------------------------------------------
//          Name:        Case 3: Delete by Name.
//          Description: Choice 3 gives the user an option to delete an employee by name.
//---------------------------------------------------------------------------------------
                    case 3:
                        System.out.println("Delete by Name.");
                        Student studentDelete = MenuMethods.userInputByName();
                        details.searchByName(studentDelete.getStudentName());
                        details.remove(studentDelete.getStudentName());
                        file.write(studentDelete.toString().getBytes());
                        break; 
```

学生商店

```
// ---------------------------------------------------------------------------------------
    // Name: Search by Name.
    // ---------------------------------------------------------------------------------------
    public Student searchByName(String studentName)
    {
        Student student = map.get(studentName);
        System.out.println(student);
        return student;
    }
 public void write(RandomAccessFile file) throws IOException
        {
            for (Student student : map.values())
            {
                byte[] bytes = student.toString().getBytes();
                for(byte byteWrite : bytes)
                {
                    file.writeByte(byteWrite);
                }
            }

        }

        public void readAll(RandomAccessFile file) throws IOException
        {
            /*final int Record_Length = 30;
            int recordNumber = 0;
            file.seek((recordNumber) * Record_Length);

            String code ="";
            for(int i = 0; i < 30; i++)
            {
            code += file.readLine() + "\n";
            }
            System.out.println(code);*/
            file.seek(0);

            String code;
            while((code = file.readLine())!=null)
            System.out.println(code);

        }

    // ---------------------------------------------------------------------------------------
    // Name: Remove.
    // ---------------------------------------------------------------------------------------
    public Student remove(String key) 
    {
        // Remove the Employee by name.
        if (map.containsKey(key))
            return map.remove(key); // if it is there remove and return
        else
            return null; // if its not there return nothing.
    } 
```

菜单方法

```
//---------------------------------------------------------------------------------------
//  Name:           Imports. 
//  Description:    To allow the use of different Java classes.
//---------------------------------------------------------------------------------------
import java.util.Scanner;
//---------------------------------------------------------------------------------------

public class MenuMethods 
{
    private static Scanner keyboard = new Scanner(System.in);
//---------------------------------------------------------------------------------------
//  Methods for the Company Application menu.
//---------------------------------------------------------------------------------------

//---------------------------------------------------------------------------------------
//  Name:           getMenuChoice.
//  Description:    Method for validating the choice.
//---------------------------------------------------------------------------------------
    public static int getMenuChoice(String menuString, int limit,String prompt, String errorMessage) 
    {
        System.out.println(menuString);
        int choice = inputAndValidateInt(1, limit, prompt, errorMessage);
        return choice;
    }

//---------------------------------------------------------------------------------------
//  Name:        inputAndValidateInt.
//  Description: This method is used in the getMenuChoice method.
//---------------------------------------------------------------------------------------
    public static int inputAndValidateInt(int min, int max, String prompt,String errorMessage) 
    {
        int number;
        boolean valid;
        do 
        {
            System.out.print(prompt);
            number = keyboard.nextInt();
            valid = number <= max && number >= min;
            if (!valid) 
            {
                System.out.println(errorMessage);
            }
        } while (!valid);
        return number;
    }

//---------------------------------------------------------------------------------------
//  Name:        userInput
//  Description: This method is used in the MainApp to give the user capability to enter
//               the details when adding details of an employee into the store.
//---------------------------------------------------------------------------------------
    public static Student userInput() 
    {
        String temp = keyboard.nextLine();
        Student s = null;
        System.out.println("Please enter the Student Name:");
        String studentName = keyboard.nextLine();
        System.out.println("Please enter the Student ID:");
        String studentId = keyboard.nextLine();
        System.out.println("Please enter the Student E-mail address:");
        String studentEmail = keyboard.nextLine();
        System.out.println("Please enter the Student telephone number:");
        String studentTelephoneNumber = keyboard.nextLine();
        return s = new Student(studentName, studentId, studentEmail,studentTelephoneNumber);

    }

//---------------------------------------------------------------------------------------
//  Name:        userInputByName.
//  Description: This method is used in the MainApp to give the user capability to search by name.
//---------------------------------------------------------------------------------------
    public static Student userInputByName() 
    {
        // String temp is for some reason needed. If it is not included
        // The code will not execute properly.
        String temp = keyboard.nextLine();
        Student s = null;
        System.out.println("Please enter the Student Name:");
        String studentName = keyboard.nextLine();

        return s = new Student(studentName);

    }

//---------------------------------------------------------------------------------------
//  Name:        userInputByEmail
//  Description: This method is used in the MainApp to give the user capability to search by email.
//---------------------------------------------------------------------------------------
    public static String userInputByEmail() 
    {
        // String temp is for some reason needed. If it is not included
        // The code will not execute properly.
        String temp = keyboard.nextLine();
        Student s = null;
        System.out.println("Please enter the StudentEmail:");
        String studentEmail = keyboard.nextLine();
        // This can use the employeeName's constructor because java accepts the
        // parameters instead
        // of the name's.
        return studentEmail;

    }
//---------------------------------------------------------------------------------------
} 
```

存储是使用哈希图组成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:17:06.197

您似乎在删除时再次写入学生条目。

```
file.write(studentDelete.toString().getBytes()); 
```

也许您需要将这些字节清零，或将它们空白或特殊的东西，这意味着该条目已被删除。

# iphone - 如何在 UITextView 中向上移动文本

> ID：11950094
> 
> 赞同：-5
> 
> 时间：2012-08-14T10:11:06.670
> 
> 标签：iphone, objective-c, ios, xcode

我在我的视图中添加了一个 UITextView，它覆盖了我整个视图的 80% 以上。当我单击文本视图并开始对其进行编辑时，在键盘下隐藏了几行文本后，一旦文本触摸键盘，如何自动向上滚动。

![在此处输入图像描述](../Images/c99ebb89aa5f09c20bf0fad713739631.png)

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:13:31.320

您可以使用下面给出的这些方法...

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidShow:) name:UIKeyboardDidShowNotification object:self.view.window]; 
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidHide:) name:UIKeyboardDidHideNotification object:nil];

 [[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardDidShowNotification object:nil];
[[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardDidHideNotification object:nil]; 
```

还要检查谷歌，你会更容易地得到解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:25:42.833

请参考下面的链接您是否使用 textview 。只需使用 textview 而不是 textfield 。并按照下面的[视频](http://www.youtube.com/watch?v=7LbLrsGKSkY)。

# c++ - 移除对特定类型指针的依赖

> ID：11950099
> 
> 赞同：0
> 
> 时间：2012-08-14T10:11:17.413
> 
> 标签：c++

我正在包装一个具有以下结构的 C api：

```
typedef struct Value
{
    union 
    {
        int i;
        const char* s;
        bool b;
        struct StructureMember_T* firstStructureMember
        double d;
    } value;
} Value_T; 
```

我使用 setter 函数从 C++ 设置此结构中的值。

```
class ValueSetter : public IValueSetter
{
public:
    explicit ValueSetter(Value_T* value) : _value(value)
    {
    }

    void operator()(int8_t v) const
    {
        _value->value.i = v;
    }

    ...

    void operator()(std::string& s) const
    {
        _value->value.s = s.c_str();
    }

    void operator()(Structure& s) const
    {
        _value->value.firstStructureMember = s.getFirstMember();
    }

private:
    Value_T* _value;
}; 
```

为了处理 StructureMember_T*，我添加了以下我不满意的类。例如，它的接口依赖于 c api 中的 StructureMember_T。关于另一种方法的任何建议？稍后我将向 Structure 类添加更多功能。

```
class Structure
{
public:
    explicit Structure(Value_T* firstMember)
        : _firstMember(firstMember)
    {
    }

    StructureMember_T* getFirstMember()
    {
        return _firstMember;
    }

    void setFirstMember(StructureMember_T* firstMember)
    {
        _firstMember = firstMember;
    }

private:
    StructureMember_T* _firstMember;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:51:39.653

鉴于您的目标，我认为在 C++ API 中使用 setter 和 getter 并没有什么问题。

如果你真的想隐藏它，我建议简单地让 Value 成为 Structure 的朋友，并将 get/set 方法设为私有。

# java - 复合组件中的相位侦听器从未被调用过

> ID：11950103
> 
> 赞同：1
> 
> 时间：2012-08-14T10:11:29.383
> 
> 标签：java, jsf, jsf-2, composite-component, phaselistener

我有一个复合组件：

```
<cc:interface componentType="com.example.MyComponent">
    <!-- ... -->
</cc:interface>

<cc:implementation>
    <f:phaseListener binding="#{cc}"/>
    <div id="#{cc.clientId}">
        <!-- ... -->
    </div>
</cc:implementation> 
```

及其类：

```
@FacesComponent("com.example.MyComponent")
public class MyComponent extends UIOutput implements NamingContainer, PhaseListener
{
    @Override
    public String getFamily()
    {
        return "javax.faces.NamingContainer";
    }

    @Override
    public PhaseId getPhaseId()
    {
        return PhaseId.ANY_PHASE;
    }

    @Override
    public void beforePhase(PhaseEvent event)
    {
        // Do something ...
    }

    @Override
    public void afterPhase(PhaseEvent event)
    {
        // Do something ...
    }
} 
```

在任何情况下都不会调用`beforePhase(PhaseEvent)`nor`afterPhase(PhaseEvent)`方法，无论是完整还是部分页面加载。

我在这里注意到这个错误：http: [//java.net/jira/browse/JAVASERVERFACES-1200](http://java.net/jira/browse/JAVASERVERFACES-1200)，但它似乎已经在很久以前修复了。

我在 Java 6u33 x64 上使用 GlassFish 3.1.2.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:36:54.097

`#{cc}`每次实际`beforePhase()`需要`afterPhase()`由. _ 目前在 EL 范围内不可用。它仅在组件的范围内可用。`<f:phaseListener>``UIViewRoot``#{cc}`

如果在复合组件的构造函数中指向至少一个请求范围的变量，则它可以正常工作`binding`，如下所示：

```
public MyComponent() {
    FacesContext.getCurrentInstance().getExternalContext().getRequestMap().put("ccc", this);
} 
```

和

```
<f:phaseListener binding="#{ccc}" /> 
```

当然，只有当您有多个这种类型的复合组件时，此构造才会失败。

您最好寻找另一种方法：完全摆脱`<f:phaseListener>`并仅[`UIViewRoot#addPhaseListener()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIViewRoot.html#addPhaseListener%28javax.faces.event.PhaseListener%29)在复合组件的构造函数中使用：

```
public MyComponent() {
    FacesContext.getCurrentInstance().getViewRoot().addPhaseListener(this);
} 
```

* * *

**与具体问题无关**，最好使用[`UINamingContainer.COMPONENT_FAMILY`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UINamingContainer.html#COMPONENT_FAMILY)constant 而不是 hardcoding `"javax.faces.NamingContainer"`。

# android - 如何为图形 2D 绘图应用程序创建可移动和可调整大小的图形对象？

> ID：11950105
> 
> 赞同：2
> 
> 时间：2012-08-14T10:11:36.983
> 
> 标签：android

美好的一天，我正在学习如何为 Android (API 14) 开发应用程序。我想创建一个应用程序，我可以在其中创建 2D 图形对象（形状或文本）、选择它们、移动、调整大小、旋转或选择和移动它们的节点。相机拍摄的照片应用作背景图像。应用程序应该很快，以便使用起来很舒服。您能否提供一些资源，让我可以了解我应该使用哪些库或类来实现这一目标？许多人提前感谢。沃杰科技

就像在“Smart Diagram Lite”应用程序中可以看到的那样，可以将图形对象拖到另一个地方。

# php - 使用php将android连接到mysql

> ID：11950106
> 
> 赞同：0
> 
> 时间：2012-08-14T10:11:48.867
> 
> 标签：php, android, mysql, json

我是 android 的初学者。我正在尝试将 android 连接到 mysql 。但应用程序已关闭。请解决我的问题：我尝试使用此代码将 php 连接到 mysql。我在布局文件中使用 textview。另外我`internet permission`在我的`manifest`.

我的代码是：

```
 public class AndroidConnectActivity extends Activity 
     {
        private TextView outputStream;
        public void onCreate(Bundle savedInstanceState) 
        {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_android_connect);
        JSONArray jArray;
        String result = null;
        InputStream is = null;
        StringBuilder sb = null;
        outputStream = (TextView)findViewById(R.id.hello_world);
        ArrayList<NameValuePair> namevaluepairs = new ArrayList<NameValuePair>();
        try
        {

            //http post
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://localhost/android/index.php");
            httppost.setEntity(new UrlEncodedFormEntity(namevaluepairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
            if (response.getStatusLine().getStatusCode() != 200) 
            {
                Log.d("MyApp", "Server encountered an error");
            }
        }
        catch(Exception e)
        {
            Toast.makeText(getBaseContext(),e.toString() ,Toast.LENGTH_LONG).show();
        }

        //Convert response to string
        try
        {
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF8"));
            sb = new StringBuilder();
            sb.append(reader.readLine() + "\n");
            String line = null;

            while ((line = reader.readLine()) != null)
            {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();
        }
        catch(Exception e)
        {
              Log.e("log_tag", "Error converting result "+e.toString());
        }
        //END Convert response to string

        try
        {
            jArray = new JSONArray(result);
            JSONObject json_data=null;
            for(int i=0;i<jArray.length();i++)
            {
                json_data = jArray.getJSONObject(i);
                int id=json_data.getInt("id");
                String name=json_data.getString("name");
                outputStream.append(id +"" + name + "\n");
            }
        }
        catch(JSONException e1)
        {
            e1.printStackTrace();           
        } 
        catch (ParseException e1) 
        {
            e1.printStackTrace(); 
        }
    }
}

<?php 
    mysql_connect("localhost","root","");
    mysql_select_db("android");
    $sql=mysql_query("SELECT * FROM table_1 Where name like 'M%' ");
    while($row=mysql_fetch_assoc($sql))
    $output[]=$row;
    print(json_encode($output));
    mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:16:49.907

在中使用 ip 地址而不是 localhost`http://localhost/android/index.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:15:48.990

使用 eclipse android 插件调试您的应用程序。一定会抛出错误或异常，您需要找出它是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:17:00.133

看起来你在这个周围缺少大括号：

```
while($row=mysql_fetch_assoc($sql))
{
    $output[]=$row;
    print(json_encode($output));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T07:51:23.140

最后我确定了我的错误。下面我提到了代码。它工作正常。它从数据库中检索数据。

```
 public class AndroidConnectActivity extends Activity 
    {
    private TextView outputStream;
    public void onCreate(Bundle savedInstanceState) 
    {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_android_connect);
    JSONArray jArray;
    String result = null;
    InputStream is = null;
    StringBuilder sb = null;
    outputStream = (TextView)findViewById(R.id.hello_world);
    ArrayList<NameValuePair> namevaluepairs = new ArrayList<NameValuePair>();
    try
    {

        //http post
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://10.0.2.2/android/index.php");
        httppost.setEntity(new UrlEncodedFormEntity(namevaluepairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
        if (response.getStatusLine().getStatusCode() != 200) 
        {
            Log.d("MyApp", "Server encountered an error");
        }
    }
    catch(Exception e)
    {
        Toast.makeText(getBaseContext(),e.toString() ,Toast.LENGTH_LONG).show();
    }

    //Convert response to string
    try
    {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF8"));
        sb = new StringBuilder();
        sb.append(reader.readLine() + "\n");
        String line = null;

        while ((line = reader.readLine()) != null)
        {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
    }
    catch(Exception e)
    {
          Log.e("log_tag", "Error converting result "+e.toString());
    }
    //END Convert response to string

    try
    {
        jArray = new JSONArray(result);
        JSONObject json_data=null;
        for(int i=0;i<jArray.length();i++)
        {
            json_data = jArray.getJSONObject(i);
            outputStream.append( "\n"+"Id="+json_data.getString("id") +"\t"+"Name=" +                     json_data.getString("name") + "\n");
            result += "\n" + jArray.getJSONObject(i); 
        }
    }
    catch(JSONException e1)
    {
        e1.printStackTrace();           
    } 
    catch (ParseException e1) 
    {
        e1.printStackTrace(); 
    }
} 
```

}

```
Index.php
<?php 
   mysql_connect("localhost","root","");
   mysql_select_db("android");
   $sql=mysql_query("SELECT * FROM table_1 ");
   while($row=mysql_fetch_assoc($sql))
   $output[]=$row;
   print(json_encode($output));
   mysql_close();
?> 
```

在运行应用程序之前。您应该启动本地服务器（xamp）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T10:36:47.483

您可能无法使用“http://localhost/..”从模拟器连接到本地主机，请尝试使用“http://10.0.2.2/..”。还要在您的代码之间放置一些[日志](http://developer.android.com/intl/es/reference/android/util/Log.html)，并尝试发现您在哪一行之后收到错误。

# javascript - 对象中的变量范围

> ID：11950107
> 
> 赞同：0
> 
> 时间：2012-08-14T10:11:50.367
> 
> 标签：javascript, oop

我正在尝试自学一些更好的 JS 开发实践，因此我正在 JavaScript 对象包装器中编写我最新的 VLE 小部件。

```
var TutorGroupPoints = {
    URL: 'http://staff.curriculum.local/frog/rewards.php',
    CurrentUser: UWA.Environment.user.id,
    Groups: { },
    Sorted: [ ],

    init: function() {
        /* retrieve all of the groups from Frog and store them in a variable */
        Frog.API.get('groups.getAll',
        {
            'onSuccess': function (data) { this.Groups = data; },
            'onError': function(err) { alert(err); }
        });         
    },

    yearClick: function(year) {
        alert( this.Groups );

        for (var i = 0; i < this.Groups.length; i++) {

            if (this.Groups[i].name.indexOf(year) == 0 && this.Groups[i].name.indexOf('/Tp') != -1) {
                var arrayToPush = { 'id': this.Groups[i].id, 'name': this.Groups[i].name };
                this.Sorted.push(arrayToPush);
            }
        }
    }

};

widget.onLoad = function(){
    TutorGroupPoints.init();

    $('#nav li a').click(function() {
        TutorGroupPoints.yearClick($(this).attr("id"));
    });
} 
```

该`Frog.API`呼叫从我们的 VLE（虚拟学习环境）中检索有关学生/员工的信息。

我要做的是将此信息（在名为 的变量中检索`data`）存储在类范围变量中，以便与其他函数一起使用。

我以为我已经通过在`Groups`早期声明变量然后使用来做到这一点`data = this.Groups`，但是当我运行该`yearClick`函数时，它`this.Groups`只是显示为`[object Object]`where `data`alerts 作为对象的负载，即`[object Object] [object Object] [object Object] [object Object] [object Object] [object Object] [object Object] [object Object] [object Object]`.

当我更改`Groups`为`[ ]`时，警报完全为空。

因此，我猜这是一个范围问题。如何`data`将`Frog.API`调用存储在可以与其他函数一起使用的变量中？以前我只使用过函数，即，`'onSuccess': function (data) { someOtherFunction(data); },`但我认为这不是一种非常干净或实用的方法吗？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:16:04.067

您的`this`变量在 Frog 回调中是错误的。改用这个：

```
init: function() {
    var self = this;  // reference for use inside closures
    /* retrieve all of the groups from Frog and store them in a variable */
    Frog.API.get('groups.getAll',
    {
        'onSuccess': function (data) { self.Groups = data; },
        'onError': function(err) { alert(err); }
    });         
} 
```

每当调用一个函数时，都会为其提供一个上下文（即`this`）。在您的回调中，您的`this`值可能是全局`window`对象。使用缓存变量可确保`this`在闭包内仍然可以访问原始（外部）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:16:21.683

这是一个常见的错误。作为一个函数，您的成功回调会更改`this`代码执行的上下文。因此，在您的回调中，`this`不再指向该`TutorGroupPoints`对象。

要么缓存`this`对函数外部外部的引用...

```
init: function() {
    var that = this; // <-- caching outer this
    Frog.API.get('groups.getAll', {
        'onSuccess': function (data) { that.Groups = data; },
        'onError': function(err) { alert(err); }
    });         
} 
```

或者绑定一个通过闭包传入的副本，在这种情况下是一个立即执行的函数

```
init: function() {
    Frog.API.get('groups.getAll', {
        'onSuccess': (function(that) {
             return function (data) { that.Groups = data; }
        })(this), // <-- passing reference to outer this
        'onError': function(err) { alert(err); }
    });         
} 
```

# forms - CakePHP 表单的安全级别

> ID：11950111
> 
> 赞同：0
> 
> 时间：2012-08-14T10:12:02.333
> 
> 标签：forms, cakephp

我首先要说的是，该网站的基地不是我的！我已经接管了一个网站的开发，以添加更多内容。

我想我应该说我所有的代码在登录时都可以工作。但是这个页面是一个公共页面，所以要访问它，你必须先登录。

在您提交表单之前，这一切都很好（每个人都可以查看，登录和公开）。这应该会保存您输入到我的数据库表中的详细信息。这样做确实可以正常工作，但仅在您登录时。

对于公众来说，一旦您单击提交，它不会保存数据而是重定向到登录页面。

有没有可以设置的不让每个人都使用表单，除非他们登录？我查看了 core.php 文件，但没有关于表单提交的内容。

欢迎任何帮助。

谢谢

格伦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:56:25.730

是的，您对具有一些用户身份验证的页面是正确的。我所做的是检查另一个公共控制器文件，并在页面顶部找到了一个 beforeFilter() 函数。

代码如下，希望对其他人有帮助

```
 function beforeFilter() {
    parent::beforeFilter();
    $this->Auth->allow('*');

} 
```

格伦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:24:06.220

我认为您应该在处理表单的操作代码中找到答案。我想在此操作中对用户身份验证进行了一些验证。也许不是在这里，而是在父控制器中。

# python - 将 MySQLdb.fetchall() 结果（元组中的字符串）转换为字典

> ID：11950117
> 
> 赞同：0
> 
> 时间：2012-08-14T10:12:34.313
> 
> 标签：python

我有一个这样的 .fetchall() 结果：

`t = (('oranges',), ('apples',), ('pears',))`

我如何把它变成这样的字典：

`d = {'oranges':None, 'apples':None, 'pears':None}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:15:24.087

```
>>> t = (('oranges',), ('apples',), ('pears',)    
>>> dict((item[0], None) for item in t)
{'pears': None, 'apples': None, 'oranges': None} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:20:13.787

在 Python2.7 或更高版本中，最快的方法是使用字典推导：

```
In [12]: {item[0]: None for item in t}
Out[12]: {'apples': None, 'oranges': None, 'pears': None} 
```

对于旧版本的 Python，有 fromkeys 方法：

```
In [6]: dict.fromkeys([row[0] for row in t])
Out[6]: {'apples': None, 'oranges': None, 'pears': None} 
```

* * *

那么如何决定使用哪一个呢？如果所有方法都具有同等可读性，我会选择最快的方法：

在 [17] 中：t = [(str(i),) for i in range(10000)]

```
In [18]: %timeit dict((item[0], None) for item in t)
100 loops, best of 3: 3.36 ms per loop

In [19]: %timeit dict.fromkeys([row[0] for row in t])
100 loops, best of 3: 2.54 ms per loop

In [20]: %timeit {item[0]: None for item in t}
100 loops, best of 3: 2.24 ms per loop 
```

# r - 如何从 R 中的向量中获取前 n 个元素（就频率而言）？

> ID：11950119
> 
> 赞同：8
> 
> 时间：2012-08-14T10:12:41.910
> 
> 标签：r

如何获得R中数组的前n个排名？

可以说我有

`a <- c(67, 2, 100, 2, 100, 23, 2, 100, 67, 89,100)`

我怎样才能得到：

```
rank   number   times
1     100       4
2     2         3
3     67        2
4     23        1
4     89        1 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T10:24:27.730

```
tab <- table(a<-c(67, 2, 100, 2, 100, 23, 2, 100, 67, 89,100))
df <- as.data.frame(tab)
names(df) <- c("number","times")
df$rank <- rank(-df$times,ties.method="min")
df <- df[order(df$rank,decreasing = F),]
df
  number times rank
5    100     4    1
1      2     3    2
3     67     2    3
2     23     1    4
4     89     1    4 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-14T10:25:03.130

`table`与 一起使用`sort`：

```
sort(table(a), decreasing=TRUE)
a
100   2  67  23  89 
  4   3   2   1   1 
```

如果要将结果转换为数据框，只需将所有这些包装成`data.frame()`：

```
data.frame(count=sort(table(a), decreasing=TRUE))
    count
100     4
2       3
67      2
23      1
89      1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T10:21:24.207

你可以尝试这样的事情：

```
a <- c(67, 2, 100, 2, 100, 23, 2, 100, 67, 89,100)
DF <- as.data.frame(table(a))

DF[order(DF[,2], decreasing = TRUE), ]
    a Freq
5 100    4
1   2    3
3  67    2
2  23    1
4  89    1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T10:27:46.417

或者`count`从 plyr 包中使用：

```
require(plyr)
df = count(a)
df[order(df[["freq"]], decreasing = TRUE),] 
    x freq
5 100    4
1   2    3
3  67    2
2  23    1
4  89    1 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-05T03:36:49.377

对此的`dplyr`解决方案可能是：

```
library(dplyr)
df <- tibble(a = c(67, 2, 100, 2, 100, 23, 2, 100, 67, 89,100))
df %>% 
  count(a) %>% 
  mutate(rank = min_rank(-n)) %>%
  arrange(desc(n)) %>% 
  rename(number = a, times = n)
#> # A tibble: 5 x 3
#>   number times  rank
#>    <dbl> <int> <int>
#> 1    100     4     1
#> 2      2     3     2
#> 3     67     2     3
#> 4     23     1     4
#> 5     89     1     4 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-05T03:05:37.337

您可以使用`df[df>0] <- 1`，稍后`rowSums(df)`，最后频率数据列`with(df, df[order(-x, y, z), ]`在哪里`-x`，其他是 ID 列，以及您拥有的补充信息。

# php - Codeigniter 问题 - 配置文件 sites/mydomain.com.php 不存在

> ID：11950125
> 
> 赞同：1
> 
> 时间：2012-08-14T10:13:00.057
> 
> 标签：php, codeigniter, frameworks

我有一个 codeigniter 应用程序，它似乎没有“看到”我的“应用程序”文件夹中的配置文件，每当我尝试在本地加载站点时，我都会收到以下错误：

```
The configuration file sites/mydomain.com.php does not exist. 
```

注意 - mydomain.com 显然已被上述明显原因取代:)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:32:34.773

感谢所有的想法:-)

我发现以前的开发人员创建了一个名为“sites”的额外目录，其中加载了额外的配置文件。

谢谢！

# unit-testing - Nancy.Testing 是否支持嵌套的 Razor 视图？

> ID：11950126
> 
> 赞同：3
> 
> 时间：2012-08-14T10:13:00.303
> 
> 标签：unit-testing, razor, nancy

我有一个单元测试，它尝试使用不正确的凭据登录，并检查生成的响应正文中是否有某些特定的“错误框”html。这工作得很好。

```
[Fact]
public void SignIn__Should_display_error_message_when_error_passed()
{
    var browser = Fake.Browser();
    var response = browser.Get("/signin", with => with.Query("error", "true"));

    response.Body["#errorBox"]
            .ShouldExistOnce()
            .And.ShouldBeOfClass("floatingError")
            .And.ShouldContain("invalid", StringComparison.InvariantCultureIgnoreCase);
} 
```

我的页面变得有点重复，所以我重新组织了一些东西来创建一组简单的嵌套剃刀视图，如下所示：

**登录视图**

```
@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<dynamic>
@{
    Layout = "_Master.cshtml";
}
<h3>Sign In</h3>
<form class="nice" method="POST">
    ... [labels, inputs etc]
</form> 
@if (Model.HasError)
{
  <div id="errorBox" class="floatingError">Invalid UserName or Password</div>
} 
```

**_Master 视图**

```
@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<dynamic>
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>@Model.Title</title>  
        ... [css javascript etc]
        @RenderSection("Head", required: false)      
    </head>

    <body>
        @RenderBody()        
    </body>
</html> 
```

这仍然有效，我的单元测试仍然通过（请耐心等待）。时间过去了，代码变得越来越复杂，所以现在我需要重新组织一下。我在剃刀视图中添加了另一层嵌套。

**_Page 视图**

```
@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<dynamic>
@{
    Layout = "_Master.cshtml";
}
@section Head{
    [... shared javascript, css]
    @RenderSection("Head", required: false)  
}
[.. some shared content]
@RenderBody() 
```

双重嵌套如下所示：

**登录 -> _Page -> _Master**

现在我的单元测试*失败*，因为响应不包含正确的 html。在真实浏览器（chrome）中运行代码并手动提供不正确的凭据会产生正确的响应，只有单元测试失败。

向下钻取以`response.Body.responseDocument.agilityPackDocumentInternal.DocumentNode.InnerHtml`显示此异常：

*错误编译模板：(15, 11) 找不到类型或命名空间名称“XXXX”*

将 SignIn 视图重新指向使用 _Master 作为其布局（切掉中间的 _Page 视图）使单元测试再次通过。

然而 _Page 视图在代码方面没有做任何事情，它只是添加一些`<script>`和`<style>`标签并传递接力棒。为了测试这些标签是否有问题，我将它们转移到 _Master 视图并将嵌套保持在一个级别（SignIn -> _Master）并且测试通过了。

那么，是否`Nancy.Testing`支持两级剃须刀布局嵌套？否则，有人能发现我的错误吗？

谢谢你

**PS**我不知道它是否已连接但我怀疑视图缓存可能是问题（在阅读[测试驾驶南希模块](https://stackoverflow.com/questions/7365306/test-driving-nancy-modules)之后）我检查了值，`Nancy.StaticConfiguration.DisableCaches`果然，它被设置为`false`（尽管我的`DEBUG`符号被打开并运行调试模式下的测试）。我在我的自定义单元测试 BootStrapper 类中将此值设置为 true，但这没有任何区别。

```
protected override void ConfigureApplicationContainer(TinyIoCContainer container)
{
    base.ConfigureApplicationContainer(container);
    Nancy.StaticConfiguration.DisableCaches = true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:01:58.367

这个问题的答案可以在我的后续问题中找到：

[当 @using 语句包含在剃刀布局中时，为什么 Nancy.Testing 会失败？](https://stackoverflow.com/q/12052267/776476)

# asp.net - 显示列表中的数据 在 asp.net 网页上？

> ID：11950127
> 
> 赞同：-2
> 
> 时间：2012-08-14T10:13:02.333
> 
> 标签：asp.net, html

```
 <table id="table1" >
       <% var list=this.GetData(); 
       for (int i=0;i<list.Count();i++)
       { %>
      <tr>
          <td>        
           <% list[i].ToString(); %> //list items are not shown on webpage
          </td>
       </tr>

       <%}
       %>           
    </table>
` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:17:46.040

看看[asp.net 数据控件](http://msdn.microsoft.com/en-us/library/cc295567.aspx)。

在 asp.net 中有更好的方法将数据绑定到您的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:20:57.273

试试这个

只需使用`<%: list[i] %>`而不是`<% list[i].ToString(); %>`

```
<table id="table1">
        <% var list = this.GetData();
           for (int i = 0; i < list.Count(); i++)
           { %>
        <tr>
            <td>
                <%: list[i] %>
                //list items are not shown on webpage
            </td>
        </tr>
        <%}
        %>
</table> 
```

要了解有关 Asp.net 内联标签的更多信息，[请访问此处](http://naspinski.net/post/inline-aspnet-tags-sorting-them-all-out-%283c25242c-3c253d2c-3c252c-3c252c-etc%29.aspx)。

但您应该考虑微软已经为此目的提供的`Repeater`其他服务。`data binding controls`

# android - Android adb shell - ash 还是 ksh？

> ID：11950131
> 
> 赞同：10
> 
> 时间：2012-08-14T10:13:20.770
> 
> 标签：android, adb, ksh, ash

Android 在线文档[Android Debug Bridge](http://developer.android.com/tools/help/adb.html#shellcommands)说“Adb 提供了一个灰壳”。果然，如果我`adb shell`使用 AVD 模拟器，我会得到 ash，它基本上是一个缩减的 Bourne shell。

但是，如果我连接到几个远程设备，一个是 HTC 手机，另一个是 ASUS Transformer Prime 平板电脑，它们都有一个 Korn shell 版本，它提供：`KSH_VERSION='@(#)MIRBSD KSH R39 2010/08/24'`. 尽管 MIRBSD KSH 不是成熟的 AT&T Korn shell，但它仍然比 ash 强大得多。

模拟器正在运行 Jelly Bean，并且两个设备都使用 ICS。做更多的挖掘，看起来灰在姜饼里，但在蜂窝里是 mirbsd ksh。

那么，有人可以确认 Android 在线文档是错误的，并且模拟器正在运行一个过时的 shell 吗？还是供应商正在实施他们自己的？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-09-17T08:19:15.740

我是 mksh（The MirBSD Korn Shell）的作者，并且在已经为 Android 1.5 进行了 mksh 的实验性构建之后，大约在 1.6 时间将其提交到 Android 中。

尽管 Android-x86 很早就使用了它，但它花了很长时间才被接受。起初我们有一个可配置的开关，板配置将决定使用 ash 还是 mksh；谷歌同意在一台设备上只能运送一个。大约在准备 2.4 的时候（从未发布），硬件板配置使用 mksh，而仿真器配置使用 ash，以确保不引入 mksh-specifics 以防他们想要或需要返回灰。2.4 从未发布，我不知道 3.0 系列上使用了什么，但由于 Android 4.0 mksh 是它的标准系统外壳。

mksh 甚至得到了 Geremy Condra 的安全审查，我们（包括 AOSP/Google 人员以及我）定期推送代码更新。*有趣的事实：他们最初根本*不打算在手机上发布外壳，但同意发布 mksh，因为那时他们已经发布了带有外壳的设备，因此它成为已发布 API 的一部分。Android 开发人员在 mksh 中的 #1 功能是 tab 补全。

现在查看在线文档，似乎他们删除了 ash 参考。他们现在只是没有明确说明哪个 shell 可用。（他们确实同意链接到在线文档中的 mksh 主页——我为此提交了一个补丁——以便用户可以 RTFM 并提供错误报告和其他反馈。）

# ios - 在 ios 5.1+ 的后台运行的 air 3.3+ 应用程序？

> ID：11950139
> 
> 赞同：1
> 
> 时间：2012-08-14T10:14:06.370
> 
> 标签：ios, apache-flex, air

我知道这已经在网上被问过很多次了，但是我找不到任何关于更新的 AIR 运行时和更新的 iOS 版本的信息？

我看到 adobe air 3.3 ：

> **AIR iOS 的增强后台行为**——后台支持现在更类似于 iOS 中的本机应用程序。除了已经在 AIR for iOS 中启用的一些基本的多任务处理和后台音频支持之外，应用程序现在可能支持在后台进行位置更新和联网，以及在后台应用程序即将被操作系统暂停时收到通知

[空中链接](http://forums.adobe.com/message/4380335#4380335)

而且我看到 iOS 4+ 提供了对长时间运行的后台应用程序的支持：

> **实现长时间运行的后台任务** 对于需要更多执行时间来实现的任务，您必须请求特定权限才能在后台运行它们而不会被挂起。在 iOS 中，仅允许特定类型的应用程序在后台运行： 在后台向用户播放可听内容的应用程序，例如音乐播放器应用程序 让用户随时了解其位置的应用程序，例如导航应用程序 支持互联网协议语音 (VoIP) 的应用程序 需要下载和处理新内容的报亭应用程序 从外部附件接收定期更新的应用程序

[iOS 链接](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20)

那么谁能告诉我使用 AIR 3.3 的 AIR 应用程序是否可以在 iOS 的后台运行？

我需要一个应用程序，即使不活动，它也会调用 web 服务并更新应用程序使用的 sqlite db。可以完成还是必须走本地路线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:10:25.607

对我来说，它部分起作用，您可以在下一个 url 中找到所有详细信息：

[Air iOS 背景行为](http://blogs.adobe.com/airodynamics/2012/05/04/air-ios-background-behavior/)

请记住，您的应用需要使用 CPU 渲染模式 (!)，并且在后台模式下 FPS 会下降到 4。

# java - 如何在java中获取嵌套xsd模式元素的类型

> ID：11950143
> 
> 赞同：2
> 
> 时间：2012-08-14T10:14:24.220
> 
> 标签：java, xml, xml-parsing, xsd

我的问题如下：我有一堆 Xpath 查询，我希望能够获得这些查询解析到的元素的**类型，但形成底层****xsd 模式**。因此，例如给定架构：

```
...
 <xs:complexType name="ResultType">
    <xs:sequence>
      <xs:element name="BUS" type="m:VectorType" />
      <xs:element name="VM" type="m:VectorType" />
      <xs:element name="VA" type="m:VectorType" />
      <xs:element name="QG" type="m:VectorType" />
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="VectorType">
    <xs:sequence>
      <xs:element name="Value" type="xs:double" minOccurs="1" maxOccurs="unbounded" />
    </xs:sequence>
  </xs:complexType>
... 
```

以及`//BUS/Value`我希望能够以`//BUS/Value`编程方式检查类型的查询（来自Java代码）。我已经使用 ApacheXMLSCHEMA、XSOM 等解析模式，但是一旦我有了解析的模式，这些库似乎都没有为我提供直接获取嵌套元素类型的方法，例如上面的那个。有没有办法做到这一点，或者我是否必须将 xpath 查询分解为 BUS 和 Value，获取 BUS 的类型，然后在该复杂类型中查找 Value 的类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:39:06.277

我认为 Java 库中没有任何东西可以直接做你想做的事。

解释 XPath 表达式将是一项艰巨的工作：您必须解析它们，然后在架构导航中解释/执行它们 - 非常复杂，除非您将自己限制为非常简单的 XPath。

一个可能更简单的解决方案是编写一些代码，从架构开始构建“带注释”的 XML，例如：

```
<BUS myns:type="ResultType">
    <Value myns:type="VectorType">
      . . . 
    </Value>
 <BUS> 
```

where`myns`是单独命名空间的前缀。然后针对这个 XML 执行 XPath，并从`myns:type`结果节点的属性中获取类型。

从模式生成这个示例 XML 应该比直接处理 XPath 更容易——特别是如果您已经有类来解析模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T15:47:39.580

XSOM 支持类似于 XPath 的[模式组件指示符(SCD)，用于搜索模式类型。](http://xsom.java.net/nonav/javadoc/com/sun/xml/xsom/SCD.html)我发现它有点令人困惑并且记录不充分，但它似乎正是您正在寻找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T15:08:18.800

上述两个答案都是有效的解决方案，但是我决定采用的方法是一位同事建议的方法。

对于给定模式的每个 xpath：

1.  生成该模式的完整实例（使用诸如 trang 之类的工具很容易做到）。完整是指所有可选元素/属性都存在。
2.  将实例解析为 dom4j 文档，并使用该实例上的 xpath 来获取节点列表。
3.  对于这些节点中的每一个，获取其绝对路径（从模式实例文档的根目录）。
4.  使用一些模式解析库解析模式（我正在使用 XSOM）
5.  递归遍历解析的模式以从 3 中获取每个节点的类型。（这很容易，因为您拥有每个节点的绝对路径）。

瞧！您已经提取了此 Xpath 可以在模式实例中绑定到的每个节点的类型，但来自模式本身:)

# java - 无法正确设置类路径

> ID：11950145
> 
> 赞同：1
> 
> 时间：2012-08-14T10:14:30.240
> 
> 标签：java, classpath, javac

我正在尝试编译以下代码：

```
package week1;

public class ThreeSum {
    public static int count(int[] a) {
        // count triples that sum to 0
        int count = 0;
        for (int i = 0; i<a.length; i++) {
            for (int j = i+1; j < a.length; j++) {
                for (int k = j+1; k < a.length; k++) {
                    if (a[i] + a[j] + a[k] == 0) {
                        count++;
                    }
                }
            }
        }
        return count;
    }

    public static void main(String[] args) {
        int[] a = In.readInts(args[0]);
        StdOut.println(count(a));
    }
} 
```

此代码位于 week1 文件夹中的 ThreeSum.java 文件中。“In”和“StdOut”两个类都在`./lib`文件夹中的包 stdlib.jar 中。我一直使用 IDE，现在决定使用命令行。所以在我的

```
javac -cp .:lib/stdlib.jar week1/ThreeSum.java 
```

和其他类路径参数变体它返回错误：

```
week1\ThreeSum.java:20: error: cannot find symbol
        int[] a = In.readInts(args[0]);
                  ^
  symbol:   variable In
  location: class ThreeSum

week1\ThreeSum.java:21: error: cannot find symbol
        StdOut.println(count(a));
        ^
  symbol:   variable StdOut
  location: class ThreeSum 
```

在我的情况下，正确的 -cp 选项应该是什么样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:17:05.843

`In`和是什么`StdOut`？JDK 中没有这样的类。您确实有 System.in 和 System.out。请参阅[Java 文档](http://docs.oracle.com/javase/6/docs/api/)。

上没有`readInts()`方法`System.in`。也许您的意思是您自己的一些自定义类。

像这样写，忘记那个 JAR 依赖：

```
package week1;

/**
 * ThreeSum
 * @author mduffy
 * @since 8/14/12 1:53 PM
 * @link http://stackoverflow.com/questions/11950145/cant-correctly-setup-classpath#comment15924351_11950145
 */
public class ThreeSum {
    public static int count(int[] a) {
        // count triples that sum to 0
        int count = 0;
        for (int i = 0; i<a.length; i++) {
            for (int j = i+1; j < a.length; j++) {
                for (int k = j+1; k < a.length; k++) {
                    if (a[i] + a[j] + a[k] == 0) {
                        count++;
                    }
                }
            }
        }
        return count;
    }

    public static void main(String[] args) {
        int[] values = new int[args.length];
        int valuesCount = 0;
        for (String arg : args) {
            int value = Integer.valueOf(arg);
            values[valuesCount++] = value;
        }
        System.out.println(String.format("count: %d", count(values)));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:17:44.053

您不定义或导入`In`和`StdOut`变量。您应该这样做，因为编译器不知道它们在哪里以及它们是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T11:08:59.837

好的，我相信您的目录结构如下所示

```
/src
    -- week1
          -- ThreeSum.java
/lib
    -- stdlib.jar 
```

其中`src`包含类文件。

```
$cd /src 
$javac -cp ".:../lib/stdlib.jar" week1.ThreeSum.java 
```

我想这对你有帮助！

PS：如果您有某种根目录而不是 src，那么在这种情况下，将 src 替换为根目录的名称

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T11:37:13.457

好的，我用 javac -cp .:lib/stdlib.jar:week1 week1/ThreeSum.java 编译了这个

所以 week1 文件夹应该添加到 -cp 选项中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T13:00:27.780

其实我之前也遇到过同样的问题，然后我发现了这个：[Stdlib.jar的问题](https://docs.google.com/document/preview?id=1u5cAEDNsCRhzIPMT-T6lOlJM0cZRTeyb5n6fbhb62kg&pli=1#)

正如那篇文章的作者所说，问题是因为s​​tdlib.jar文件中的类不在包结构中。所以如果你尝试在你的代码中使用它们，你不应该在包结构中组织你的代码。

我正在使用 Eclipse IDE 并将我的代码移到我的包之外（然后代码将放在“默认包”中），然后它就可以工作了。当然，stdlib.jar 应该添加到 .classpath 文件中。

# sql-server - 如何从用户输入日期获取最近 5 周的数据

> ID：11950147
> 
> 赞同：1
> 
> 时间：2012-08-14T10:14:37.120
> 
> 标签：sql-server

我无法按周计算，即 7 天发货的订单为一周，请检查我的查询如下：

```
Declare @CurrentDate nvarchar(50);
SET @CurrentDate='2012-07-25'

BEGIN 

;WITH DateList AS
(
    SELECT  DATEADD(WEEK, 0, CONVERT(DATETIME, @CurrentDate)) AS CreateDateTime, 1 AS Cnter
    UNION ALL
    SELECT  DATEADD(WEEK, -1, CreateDateTime), DateList.Cnter + 1
    FROM DateList
    WHERE DateList.Cnter  < 5
)
SELECT  DateList.CreateDateTime AS ShipWeek, COALESCE(Temp.TotalCount, 0) AS TotalCount
FROM DateList
LEFT JOIN  
(
    SELECT  COUNT(Id) TotalCount
        ,DATEADD(WEEK, DATEDIFF(WEEK, '19000101',CreatedDateTime),'19000101') AS ShipWeek
    FROM ShipmentDetail 
    WHERE CreatedDateTime
    BETWEEN DATEADD(DAY,-30,@CurrentDate) AND @CurrentDate
    GROUP BY  DATEADD(WEEK, DATEDIFF(WEEK, '19000101',CreatedDateTime),'19000101') 
) Temp
    ON CONVERT(VARCHAR(10), DateList.CreateDateTime, 112) = Temp.ShipWeek
END 
```

结果表如下：

```
ShipWeek                TotalCount
2012-07-25 00:00:00.000 0
2012-07-18 00:00:00.000 0
2012-07-11 00:00:00.000 0
2012-07-04 00:00:00.000 0
2012-06-27 00:00:00.000 0 
```

请给我确切的解决方案。

如果我像这样输入当前日期：

```
SET @CurrentDate='2012-07-30' 
```

然后结果表将给出如下数据：

```
ShipWeek                TotalCount
2012-07-30 00:00:00.000 0
2012-07-23 00:00:00.000 1406
2012-07-16 00:00:00.000 0
2012-07-09 00:00:00.000 0
2012-07-02 00:00:00.000 0 
```

如果我输入当前日期，为什么我没有得到`'2012-07-27'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:46:00.367

如果您使用范围而不是将日期截断到想要的精度，它会变得容易得多。我已更改 cte 以生成范围并删除了派生表。现在查询可能会使用索引。哦，我不确定将 CreatedDateTime 缩小到持续 30 天的附加条件 - 第一周将失去一些出货量。

```
Declare @CurrentDate datetime
SET @CurrentDate='2012-07-25'
;WITH DateList AS
(
    SELECT  DATEADD(WEEK, 0, CONVERT(DATETIME, @CurrentDate)) AS StartRange, 
            DATEADD(WEEK, 1, CONVERT(DATETIME, @CurrentDate)) AS EndRange, 
            1 AS Cnter
    UNION ALL
    SELECT  DATEADD(WEEK, -1, StartRange), 
            DATEADD(WEEK, -1, EndRange), 
            DateList.Cnter + 1
    FROM DateList
    WHERE DateList.Cnter  < 5
)
SELECT  DateList.StartRange AS ShipWeek, 
        COALESCE(count(ShipmentDetail.CreatedDateTime), 0) AS TotalCount
FROM DateList
LEFT JOIN ShipmentDetail
    ON DateList.StartRange <= ShipmentDetail.CreatedDateTime
   AND DateList.EndRange > ShipmentDetail.CreatedDateTime
   AND ShipmentDetail.CreatedDateTime 
       BETWEEN DATEADD(DAY,-30,@CurrentDate) 
                   AND @CurrentDate
GROUP BY DateList.StartRange; 
```

[带有示例的 Sql Fiddle 就是这种方式](http://sqlfiddle.com/#!3/0e250/6)。

# c# - C#用户名和密码登录框

> ID：11950148
> 
> 赞同：0
> 
> 时间：2012-08-14T10:14:50.933
> 
> 标签：c#, sql-server, project

我在我的表单中附加了登录模块。我在这方面遇到了问题，因为登录表单必须在另一个主表单之前显示，以便用户可以通过身份验证。我正在使用 VS 2005，我现在有两种形式

1）登录 2）主窗体我只想在主窗体之前显示登录表单，并在身份验证后关闭（不隐藏）登录表单。有什么办法吗？以前我工作过闪屏并用线程解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:21:50.017

这是一个 Windows 窗体应用程序吗？当 MainForm 从 main 方法实例化时，您不能打开 LoginForm 的新实例吗？

然后，您可以使用[DialogResult](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.dialogresult%28v=vs.71%29.aspx)来确定用户是否经过身份验证，然后在 LoginForm 上调用 Dispose()。

```
 public partial class MainForm : Form
    {
        public Form1()
        {
            InitializeComponent();
            DialogResult dr = new DialogResult ();
            LoginForm loginForm = new LoginForm ();
            dr = loginForm.ShowDialog();
            if ( dr == DialogResult.OK )
            {
               //user is authenticated
            }
            else 
            {
               //user isn't
            }
        }
    } 
```

您的登录表单可能如下所示

```
 public LoginForm()
    {
        InitializeComponent();
        if (DoAuthentication)
        {
            this.DialogResult = DialogResult.OK;
        }
        else
        {
            this.DialogResult = DialogResult.None;
        }
        this.Close();
    } 
```

# php - CakePHP 限制关联

> ID：11950152
> 
> 赞同：0
> 
> 时间：2012-08-14T10:15:05.397
> 
> 标签：php, cakephp, associations

我尝试编写一个像 facebook 上的消息系统。我有桌子；

```
USERS
id, name

MESSAGES
user_from, user_to, message 
```

我得到了模型：

```
USER

public $hasMany = array(
      'MessageFrom' => array(
          'className' => 'Message',
          'foreignKey' => 'user_from'
      ),
      'MessageTo' => array(
          'className' => 'Message',
          'foreignKey' => 'user_to'
      )
  );
  var $hasAndBelongsToMany = array(
      'UserMessages' => array(
          'className' => 'User',
          'joinTable' => 'messages',
          'foreignKey' => 'user_from',
          'associationForeignKey' => 'user_to'
      )
  );

MESSAGE

public $belongsTo = array(
      'UserFrom' => array(
          'className' => 'User',
          'foreignKey' => 'user_from'
      ),
      'UserTo' => array(
          'className' => 'User',
          'foreignKey' => 'user_to'
      )
  ); 
```

一切正常，我的意思是发送和接收用户的消息，并阅读它。但我想在用户面板中做聊天列表。

我必须选择只有最后一条消息的所有用户才能创建与用户的聊天列表。

我的数组看起来像：

```
(int) 0 => array(
        'Message' => array(
            'id' => '12',
            'user_from' => '2',
            'user_to' => '1',
            'message' => 'Hello user 1!',
        ),
        'UserFrom' => array(
            'id' => '2',
            'username' => 'user2',
        ),
        'UserTo' => array(
            'id' => '1',
            'username' => 'user1',
        )
),
(int) 1 => array(
        'Message' => array(
            'id' => '12',
            'user_from' => '1',
            'user_to' => '2',
            'message' => 'Oh Hello user 2!',
        ),
        'UserFrom' => array(
            'id' => '1',
            'username' => 'user1',
        ),
        'UserTo' => array(
            'id' => '2',
            'username' => 'user2',
        )
),
    (int) 2 => array(
        'Message' => array(
            'id' => '12',
            'user_from' => '1',
            'user_to' => '5',
            'message' => 'Message to user 5 from user 1',
        ),
        'UserFrom' => array(
            'id' => '1',
            'username' => 'user1',
        ),
        'UserTo' => array(
            'id' => '5',
            'username' => 'user5',
        )
), 
```

现在对于前我登录为用户 id = 1 我想在我的聊天列表中看到

USER 5（最后一条消息：用户 1 给用户 5 的消息） USER 2（最后一条消息：Oh hello user 1）

Simpy：我希望这个数组中的用户只收到最后一条消息...我不需要所有消息的列表...只有一条来自或发给用户的最后一条消息，例如在 GMAIL 框中。现在在数组中我有所有用户和消息关联......

我创建了一个函数...它获取用户的所有消息...如何仅获取一个具有最大 id 的消息？

```
public function getChats($user_id) {
    $this->order = 'Message.date DESC, Message.id DESC';
    $data = $this->find('all', array(
        'conditions' => array(
            'OR' => array(
                array('user_to' => $user_id),
                array('user_from' => $user_id)
            )
        )
    ));
    return $data;
  } 
```

-

```
SELECT `Message`.`id`, `Message`.`user_from`, `Message`.`user_to`, `Message`.`message`, `Message`.`date`, `UserFrom`.`id`, `UserFrom`.`username`, `UserFrom`.`email`, `UserFrom`.`password`, `UserFrom`.`name`, `UserFrom`.`surname`, `UserFrom`.`city`, `UserFrom`.`street`, `UserFrom`.`born_date`, `UserFrom`.`role`, `UserTo`.`id`, `UserTo`.`username`, `UserTo`.`email`, `UserTo`.`password`, `UserTo`.`name`, `UserTo`.`surname`, `UserTo`.`city`, `UserTo`.`street`, `UserTo`.`born_date`, `UserTo`.`role` FROM `gametrade_cake`.`messages` AS `Message` LEFT JOIN `gametrade_cake`.`users` AS `UserFrom` ON (`Message`.`user_from` = `UserFrom`.`id`) LEFT JOIN `gametrade_cake`.`users` AS `UserTo` ON (`Message`.`user_to` = `UserTo`.`id`) WHERE ((`user_to` = 1) OR (`user_from` = 1)) 
GROUP BY UserFrom.id,UserTo.id
ORDER BY `Message`.`id` DESC 
```

此查询选择我的消息，但我不知道为什么不按 message.id DESC 排序...此命令按 message.id ASC...

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:15:08.690

您可以在查询消息时传递一个时间戳，您必须在保存消息时保存时间戳

```
public function getChats($user_id,$timestamp) {
    $this->order = 'Message.date DESC, Message.id DESC';
    $data = $this->find('all', array(
        'conditions' => array(
            'OR' => array(
                array('user_to' => $user_id),
                array('user_from' => $user_id)
            ),
            'created >' => $timestamp 
        )
    ));
    return $data;
  } 
```

# ios - 将音频 .wav 文件从 http 服务器传输到 ios 客户端

> ID：11950153
> 
> 赞同：1
> 
> 时间：2012-08-14T10:15:10.317
> 
> 标签：ios, streaming, wav

我正在一个 http 服务器上工作，其中上传了许多 .wav 格式的音频文件，这些文件不到 1 分钟。我需要为我的 ios 客户端提供流文件而不是下载文件的解决方案。我尝试了以下方法：-

1.  手动创建包含这些 .wav 文件的 .m3u 文件，但它们不能在 ios 上播放，但在 vlc 上可以正常播放
2.  使用 lame 将 .wav 转换为 .mp3 ，然后使用 ffmpeg 将 .mp3 转换为 MPEG-2 流 audio.ts 文件。然后我使用分段器工具将 audio.ts 分成不同的块并创建 .m3u8 文件，该文件可以在 mac 上的 quicktime 上正常播放。

但问题是我找不到用于分段器的 linux 工具。

现在，我担心的是，我是否使用了正确的方法，还是应该使用一些现有的流媒体服务器，如 darwin 服务器？请让我知道不同方法的优缺点，以及在使用其中任何一种方法之前我应该​​寻找哪些参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:24:51.383

你的第二种方法很好。HLS（HTTP Live Streaming）是在 iPhone 上获取流式音频的最佳方式。

HLS 的有趣之处在于它不需要使用特定的服务器。一个普通的 HTTP 服务器可以工作（Apache、lighttpd、nginx 等）。然后你需要一个分段器。一个快速的谷歌揭示了[M3U8 Segmenter](http://m3u8-segmenter.inodes.org/)，这似乎是你想要的（我自己没有使用它）。

# javascript - 根据一个值向表的每个 td 添加一个标题属性

> ID：11950155
> 
> 赞同：1
> 
> 时间：2012-08-14T10:15:15.043
> 
> 标签：javascript, jquery

我有 2 张桌子

```
 <table class="first">
    <thead>
          <th> header1</td>
          <th> header2 </th>
    </thead> 
    <tbody>
           <tr>
                <td>hi</td>
                <td>hello</td>
           </tr>
    </tbody>
 </table>

 <table class="second">
    <thead>
          <th> header1</td>
          <th> header2 </th>
    </thead> 
    <tbody>
           <tr>
                <td>hi</td>
                <td>hello</td>
           </tr>
           <tr>
                <td>hi</td>
                <td>hello</td>
           </tr>
    </tbody>
 </table> 
```

现在我的jQuery部分：

```
 var trainingInstanceIds = ${trainingInstance.id};
  alert(trainingInstanceIds) // which prints say 1,9, 
```

现在我希望第二个表的每个 td 都将标题作为 trainingInstanceIds 中给出的值

基本上我想要这样的东西

```
 <table class="second">
    <thead>
          <th> header1</td>
          <th> header2 </th>
    </thead> 
    <tbody>
           <tr>
                <td title="1">hi</td>
                <td title="9">hello</td>
           </tr>
           <tr>
                <td  title="1">hi</td>
                <td  title="9">hello</td>
           </tr>
    </tbody>
 </table> 
```

trainingInstanceIds 的值和 td 的数量会发生变化。

在这里我想为已经创建的表添加标题

怎么做？

```
 $.each(trainingInstanceIds, function(index, value) { 

   }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:39:49.190

您可以将一个函数传递给 jQuery 的`attr`-method：

```
var trainingInstanceArray = [1, 9]; 
// OR use if it's a string:
var trainingInstanceArray = trainingInstanceIds.split(',')
$('.second td').attr('title', function (index, attr) {
    return trainingInstanceArray[$(this).index()];
});​ 
```

[JSFiddle 的示例](http://jsfiddle.net/wXcfs/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T10:27:10.643

迭代`td`s 而不是 id 可能会产生更好的性能：

```
var trainingInstanceArray = trainingInstanceIds.split(',');

$('.second td').each(function(index, element) {
  var $el = $(this);
  $el.attr('title', trainingInstanceArray[$el.index()]);
}); 
```

**编辑：**我错过了你想要每一行的每个标题。以上更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T10:24:33.080

试试这个，如果 trainingInstanceIds 以数组的形式出现。

```
$.each(trainingInstanceIds, function(index, value) {
    $('.second td:eq('+ index+')').prop('title', value);
}); 
```

或者如果 trainingInstanceIds 以字符串形式出现，则使用

```
$.each(trainingInstanceIds.split(','), function(index, value) {
    $('.second td:eq('+ index+')').prop('title', value);
}); 
```

并检查此**[演示](http://jsfiddle.net/95z6d/3/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T10:28:46.940

```
// I suppose that trainingInstanceIds is a table
$.each( $("table.second tbody tr"), function(){
    var tds = $(this).find("td");
    $.each(trainingInstanceIds, function(index, value) {
       $(tds[index]).attr("title", value);
    });
}); 
```

我想是这样的。但是您假设属性标题不符合 w3c。

# javascript - 用最少的努力打造酷炫的网页风格

> ID：11950169
> 
> 赞同：-1
> 
> 时间：2012-08-14T10:16:24.720
> 
> 标签：javascript, html, css, look-and-feel

我有一个包含几个 html 页面的简单网站。我只使用标准的 html 标签，比如**table (tr, td, th), p, form (input), center, a, img**。但默认情况下，控件看起来很无聊。

我想用最少的努力让它更酷。我已经考虑过在我的页面上包含一些外部 CSS（或完全复制） - 但没有找到任何开箱即用的解决方案。

我想获得一些建议/解决方案，以使我的网站看起来更好，而无需对其进行大量修改。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:22:33.833

你可以尝试简单的 background-color ， box-shadow ， border-radius ， css3 渐变和其他 css3 样式到你的 th 和 td 元素以及你的 p 元素；

例如：

```
table{font-size:11px;margin:auto; color:#fff; border:1px solid #666; background:#4b4b4b url('../images/low_contrast_linen.png') !important; box-shadow:0px 0px 8px 1px #1e1e1e; border-radius:3px; padding:0px;}

table tr:hover{background-color:#666;}

table td{border-top:1px solid #666; padding:10px 5px;}

table th{background-image:-moz-linear-gradient(90deg,#127286, #1a9eba) !important; filter:progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr='#1a9eba', EndColorStr='#127286') !important; background: -webkit-gradient(linear, left top, left bottom, from(#1a9eba), to(#127286)) !important; box-shadow:0 2px 8px #444444; color:#fff; text-shadow:none; background-color:#017AC5;font-weight:normal; padding:8px; font-size:12px; border-right:1px solid #1A9EBA;} 
```

这可以毫不费力地为整个站点的桌子添加漂亮的效果。PS 尝试为桌子使用漂亮的亚麻风格背景图像，它看起来很棒。

这同样适用于其他标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:19:46.653

您可以下载只需要添加文本的模板：

[http://www.oswd.org/](http://www.oswd.org/) http://www.openwebdesign.org/

只是谷歌“免费css”或其他东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:25:38.803

尝试使用[bootstrap](http://twitter.github.com/bootstrap/)，它添加了许多 CSS 样式，让一切看起来都非常漂亮。

（在您的情况下，Bootstrap 可以提供的页面结构内容并不真正需要，但我强烈建议您尝试一下）

# google-earth-plugin - 谷歌地球插件3D模型版权保护

> ID：11950172
> 
> 赞同：1
> 
> 时间：2012-08-14T10:16:36.967
> 
> 标签：google-earth-plugin, copy-protection

我从事在 Google 地球插件中为 3D 模型制作动画的项目；例如： [http ://www.hazelhurst.net/Cook](http://www.hazelhurst.net/Cook)

我想使用 TurboSquid 提供的 3D 模型，但他们的最终用户许可协议要求购买者保护模型不被复制。

我目前使用的方法是将动画 (gx:Tour) 和 <Model> 保存在一个 KML 文件中，该文件是使用 fetchKml 函数在 javascript 中获取的。查看页面源代码的任何人都可以找到 KML 的 URL，并使用该 URL 可以找到并下载模型。

是否有任何选项可以保护模型免受未经授权的复制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:13:19.443

不，如果人们可以访问 kml，那么他们就可以访问模型数据。您可以做的最好的事情是在您的 kml 文件中添加版权声明之类的内容作为覆盖，说明不允许未经授权的复制。

您可以让人们下载数据变得更加困难，但并非不可能。例如，您只能将您的 kml 和 dae 文件提供给 GoogleEarth 用户代理，以便只有 Google 地球桌面和 Google 地球插件可以访问 url，他们下载的数据在其应用程序缓存目录中被加密。

这会在很多人身上停止，但这就像欺骗用户代理通过其他方式访问文件一样微不足道。

在任何情况下，无论你做什么，数据仍然必须通过任何显示它的机器上的 GPU - 所以你无法阻止可以看到它的人通过其他方式访问它。

简而言之，如果人们能看到它，你就无法保护它。

# objective-c - Mountain Lion 中的条件类别

> ID：11950173
> 
> 赞同：5
> 
> 时间：2012-08-14T10:16:39.463
> 
> 标签：objective-c, macos, categories, osx-mountain-lion, nscolor

Mountain Lion 引入了[新的 API](https://developer.apple.com/library/mac/#releasenotes/MacOSX/WhatsNewInOSX/Articles/MacOSX10_8.html)，其中一些我们已在项目中作为类别实现。

例如，我们有一个`NSColor+CGColorAdditions`实现的类别`CGColor`和`colorWithCGColor:`for `NSColor`。这些方法已添加到 Mountain Lion 中。

理想情况下，如果客户端操作系统早于 Mountain Lion，我们希望使用这些类别，如果是 Mountain Lion，则不要使用它们。我们应该怎么做？还是有更好的选择？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T10:26:36.310

```
NSColor *_NSColor_colorWithCGColor_(Class self, SEL cmd, CGColorRef cgColor)
{
    // make an NSColor outta `cgColor` and return it
    return nsColor;
}

// inside some initialization code

if ([[NSColor class] respondsToSelector:@selector(colorWithCGColor:)]) {
    // on ML, don't do anything
} else {
    // older system, add your own category
    class_addMethod(objc_getMetaClass("NSColor"), @selector(colorWithCGColor:), (IMP)_NSColor_colorWithCGColor_, "@@:@");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T13:33:18.743

我认为根据 H2CO3 的回答发布我所做的事情也可能会有所帮助。

`NSColor+CGColorAdditions.m`变成：

```
static CGColorRef _NSColor_CGColor_(Class self, SEL cmd) {
    return nil; // TODO: Do something
}

static NSColor* _NSColor_colorWithCGColor_(Class self, SEL cmd, CGColorRef aColor) {
    return nil; // TODO: Do something    
}

__attribute__((constructor))
static void initialize_NSColor_CGColorAdditions() {
    if (![[NSColor class] respondsToSelector:@selector(colorWithCGColor:)]) {
        class_addMethod(objc_getMetaClass("NSColor"), @selector(colorWithCGColor:), (IMP)_NSColor_colorWithCGColor_, "@@:@");
    }
    if (![[NSColor class] instancesRespondToSelector:@selector(CGColor)]) {
        class_addMethod(objc_getClass("NSColor"), @selector(CGColor), (IMP)_NSColor_CGColor_, "@@:");
    }
} 
```

# paypal - 发送 Mass Pay 呼叫时无法解决错误

> ID：11950174
> 
> 赞同：0
> 
> 时间：2012-08-14T10:16:41.600
> 
> 标签：paypal, masspay

您好，我想使用 Mass Pay API。

我正在使用 RubyOnRails。这是我的代码：

```
 require 'httpclient'
    clnt = HTTPClient.new
    credentials = {
       'USER' => 'payer_1342623102_biz_api1.gmail.com',
       'PWD' => '1342623141',
       'SIGNATURE' => 'Ay2zwWYEoiRoHTTVv365EK8U1lNzAESedJw09MPnj0SEIENMKd6jvnKL'
     }

    data = {  
               "VERSION" => "2.3",
               "METHOD" => "MassPay",
               "RECEIVERTYPE" => "EmailAddress",
               "L_EMAIL0"=> "denmed_1342691273_biz@gmail.com",
               "L_AMT0" => "10",
               "L_EMAIL1"=> "second_1344932945_per@gmail.com",
               "L_AMT1" => "5",
               "currencyCode" => "USD",
               "VERSION" => "51.0"}
    uri = "https://api-aa.sandbox.paypal.com/2.0/"
    res = clnt.post(uri, data)

puts res
puts res.header
puts res.content 
```

我得到错误：

```
 <SOAP-ENV:Fault><faultcode>SOAP-ENV:Client</faultcode><faultstring>Method not implemented</faultstring></SOAP-ENV:Fault></SOAP-ENV:Body></SOAP-ENV:Envel 
```

这很奇怪，因为我在“METHOD”=>“MassPay”行中实现了方法。

我的问题在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:43:27.030

我的问题的原因是糟糕的 PayPal 文档。这是代码，可以工作：

```
 require 'httpclient'
    clnt = HTTPClient.new
    data = {    "METHOD" => "MassPay",
    "VERSION" => "90",
    'USER' => 'payer_1342623102_biz_api1.gmail.com',
    'PWD' => '1342623141',
    'SIGNATURE' => 'Ay2zwWYEoiRoHTTVv365EK8U1lNzAESedJw09MPnj0SEIENMKd6jvnKL',
    "RECEIVERTYPE" => "EmailAddress",
    "CURRENCYCODE" => "USD",
    "L_EMAIL0" => 'propro_1344939908_biz@gmail.com',
    "L_AMT0" => "1",
    "L_EMAIL1" => "denmed_1342691273_biz@gmail.com",
    "L_AMT1" => "1"
               }
    uri = "https://api-3t.sandbox.paypal.com/nvp"
    res = clnt.post(uri, data) 
```

# android - 自动更新谷歌播放

> ID：11950178
> 
> 赞同：11
> 
> 时间：2012-08-14T10:16:50.743
> 
> 标签：android, google-play

几个小时前，我刚刚在 google play 上发布了我的应用程序。我当然不指望它会立即出现在 google play 上。也许我必须等待 24 小时。

问题是我记得我看到了这个但不确定在哪里，因为它不在这里[http://developer.android.com/tools/publishing/versioning.html](http://developer.android.com/tools/publishing/versioning.html)并且不确定它是否属实。每次我通过更改高于以前的版本代码来更新我在 google play 上的应用程序时，google play 是否会通过通知当然通知所有下载我的应用程序的用户？

例如从 versioncode = 1 到 versioncode = 2？谷歌这样做还是我必须以编程方式通知用户是否有更新？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T10:18:41.960

设备上的 Google Play 应用程序会自动检查用户安装的所有应用程序（您的或其他人的）的更新，并通知他们更新。我不确定它检查的频率，但我认为它是一天 5 或 6 次。

# php - 复选框值未出现在电子邮件中

> ID：11950186
> 
> 赞同：0
> 
> 时间：2012-08-14T10:17:07.487
> 
> 标签：php, html, forms, checkbox

我创建了一个通过电子邮件提交详细信息的表单，但由于某种原因，复选框结果没有显示，任何人都可以看到为什么吗？

```
<tr>
  <td valign="top"><p>Contact Method:</p></td>
  <td>&nbsp;</td>
  <td align="left" valign="top"><p>
      <input style="width:20px!IMPORTANT;" type="checkbox" name="CheckboxGroup1[]" value="Phone" id="phone" />
      <label style="margin-right: 25px;">Phone</label>
    </p>
    <p>
      <input style="width:20px!IMPORTANT;" type="checkbox" name="CheckboxGroup1[]" value="Email" id="email" />
      <label style="margin-right: 25px;">Email</label>
    </p>
    <p>
      <input style="width:20px!IMPORTANT;" type="checkbox" name="CheckboxGroup1[]" value="Post" id="post" />
      <label style="margin-right: 25px;">Post</label>
    </p></td>
</tr> 
```

然后我用它来提交：

```
<? if(isset($_POST['submit'])) { 

$to = "rob@domain.com";
$header = 'From: info@domain.com';
$subject = "Website enquiry";
$companyname_field = $_POST['companyname'];
$fullname_field = $_POST['fullname'];
$email_field = $_POST['email'];
$tel_field = $_POST['tel'];
$address_field = $_POST['address'];
$specify_field = $_POST['specify'];
$CheckboxGroup1 = $_POST['CheckboxGroup1'];
$CheckboxGroup2 = $_POST['CheckboxGroup2'];
if( is_array($_SESSION['CheckboxGroup1']) ){
    foreach ($_SESSION['CheckboxGroup1'] as $val) {
        $checkbox1results .= $val.",\n";
    }
}
if( is_array($_SESSION['CheckboxGroup2']) ){
    foreach ($_SESSION['CheckboxGroup2'] as $val) {
        $checkbox2results .= $val.",\n";
    }
}

$body = "Hello,\n\n You have an enquiry from the website, please see the details below:\n\n Name: $fullname_field\n Company Name: $companyname_field\n E-Mail: $email_field\n Tel: $tel_field\n Method of contact: $checkbox1results\n Address: $address_field\n Hear about us?: $checkbox2results\n Specify: $specify_field\n\n Please reply to the enquiry asap.\n\n Kind Regards \n";

mail($to, $subject, $body, $header);

echo "</br><p style=\"color:#e41770!IMPORTANT;\">Thank you for getting in touch, we will contact you shortly.</p>";

} ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:19:31.773

在哪里`$_SESSION['CheckboxGroup1']`声明？看到你的代码这应该是`$_POST['CheckboxGroup1']`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:20:45.307

您从 中获取值`$_POST`，但您检查 中的值`$_SESSION`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:23:16.240

改用该代码

```
if( is_array($CheckboxGroup1) ){
foreach ($CheckboxGroup1 as $val) {
    $checkbox1results .= $val.",\n";
 }
}
if( is_array($CheckboxGroup2) ){
   foreach ($CheckboxGroup2 as $val) {
    $checkbox2results .= $val.",\n";
} 
```

# django - 强制多对多字段的顺序

> ID：11950188
> 
> 赞同：0
> 
> 时间：2012-08-14T10:17:19.383
> 
> 标签：django, django-orm

我为游戏中的每个玩家都有一个记分模型，以及一个使用前一个并在游戏中比较它们的匹配模型。

'p1' 和 'p2' 字段仅作为控制器用于识别我的问题发生的时间和地点。他们在创建时获得硬编码的 board-user 的用户 ID。（并且它们总是按递增顺序创建；p2**总是**p1+1）

问题：有时，很少，似乎完全随机，板的顺序会颠倒。由于一段时间以来我一直试图找到这个问题的根源但没有成功，我想尝试一种不同的方法。

有没有办法强制 m2m-field 中对象的顺序？

代码：

**型号**：

```
class Scoreboard(models.Model):

    user = models.ForeignKey(User)

    score1 = models.IntegerField(default=0) 
```

等等...

* * *

```
 class Match(models.Model):
        pl1 = models.IntegerField(default=0)
        pl2 = models.IntegerField(default=0)
        boards = models.ManyToManyField(Scoreboard)
        active = models.IntegerField(default=0)
        turn = models.IntegerField(default=0) 
```

我在想这样的事情：

**视图.py**

```
results = Match.objects.get(id=matchID)
boards = results.boards.all()
board1 = boards[0]
board2 = boards[1]

boardList.append(board1)
boardList.append(board2)

if boards[0].id>boards[1].id:
    print boardList
    boardList.reverse()
    print boardList

    m=Match(id=matchID, boards=boardList)
    m.save() 
```

但这给了我一个错误：'boards' is an invalid keyword argument for this function

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:43:05.073

您应该能够使用一个`through`类定义排序顺序，该类处理原始问题（未经测试，小心处理）：

```
class ScoreBoard(models.Model):
    pass

class Match(models.Model):
    boards = models.ManyToManyField(ScoreBoard, through="MatchBoard")

class MatchBoard(models.Model):
    match = models.ForeignKey(Match)
    board = models.ForeignKey(ScoreBoard)
    sortorder = models.PositiveIntegerField()

    class Meta:
        ordering = ('sortorder', ) 
```

# c# - 如何处理 ComboBox 的 SelectedIndexChanged 事件？

> ID：11950189
> 
> 赞同：5
> 
> 时间：2012-08-14T10:17:23.900
> 
> 标签：c#, winforms, datagridview, combobox, event-handling

我有`DataGridView`其中包含两`ComboBox`列。第二个`ComboBox`将根据从 first 中选择的值填充数据`ComboBox`。

第一次如何处理`SelectedIndexChanged`事件`ComboBox`。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-24T14:12:49.597

如果我使用`EditingControlShowing`事件然后`cb_SelectedIndexChanged`触发几次，即使用户选择组合框但不更改选择。

这对我有用：

```
private void dataGridView1_CellValueChanged(object sender, DataGridViewCellEventArgs e)
{
    if (e.ColumnIndex == comboboxColumn.Index && e.RowIndex >= 0) //check if combobox column
    {
        object selectedValue = dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value;
    }
}

//changes must be committed as soon as the user changes the drop down box
private void dataGridView1_CurrentCellDirtyStateChanged(object sender, EventArgs e)
{
    if (dataGridView1.IsCurrentCellDirty)
    {
        dataGridView1.CommitEdit(DataGridViewDataErrorContexts.Commit);
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-14T14:54:14.910

DataGridView 问题的一个很好的资源可以在这里找到：

[http://www.windowsclient.net/Samples/Go%20To%20Market/DataGridView/DataGridView%20FAQ.doc](http://www.windowsclient.net/Samples/Go%20To%20Market/DataGridView/DataGridView%20FAQ.doc)

从那里开始如何处理选定的更改事件：

如何处理 SelectedIndexChanged 事件？

有时，了解用户何时选择了 ComboBox 编辑控件中的项目会很有帮助。使用表单上的 ComboBox，您通常会处理 SelectedIndexChanged 事件。使用 DataGridViewComboBox，您可以使用 DataGridView.EditingControlShowing 事件来执行相同的操作。下面的代码示例演示了如何执行此操作。请注意，该示例还演示了如何防止触发多个 SelectedIndexChanged 事件。

```
private void dataGridView1_EditingControlShowing(object sender, 
    DataGridViewEditingControlShowingEventArgs e)
{
    ComboBox cb = e.Control as ComboBox;
    if (cb != null)
    {
        // first remove event handler to keep from attaching multiple:
        cb.SelectedIndexChanged -= new
        EventHandler(cb_SelectedIndexChanged);

        // now attach the event handler
        cb.SelectedIndexChanged += new 
        EventHandler(cb_SelectedIndexChanged);
    }
}

void cb_SelectedIndexChanged(object sender, EventArgs e)
{
    MessageBox.Show("Selected index changed");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:40:07.387

像这样将第二个下拉列表放在更新面板中

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" RenderMode="Inline">
                 <ContentTemplate>
                 <asp:DropDownList ID="ddl2" runat="server" >                  
                </ContentTemplate>
                <Triggers>
                <asp:AsyncPostBackTrigger ControlID="ddl1" EventName="SelectedIndexChanged" />
                </Triggers>
                </asp:UpdatePanel> 
```

像这样为第一个下拉列表设置 AutoPostBack="true" 属性。

```
<asp:DropDownList ID="ddl1" runat="server" AutoPostBack="true"  
                        OnSelectedIndexChanged="ddl1_SelectedIndexChanged"> 
```

# java - 使用 DEVSJAVA 工具（genDevs 包）的网络项目

> ID：11950192
> 
> 赞同：1
> 
> 时间：2012-08-14T10:17:40.557
> 
> 标签：java

我已经使用 DEVSJAVA 工具 (genDevs) 启动了网络项目。我无法运行模拟环境。

# jquery - “myjsFunc”代表什么？

> ID：11950198
> 
> 赞同：0
> 
> 时间：2012-08-14T10:18:20.877
> 
> 标签：jquery

例如， `<href="javascript:void(0)" onclick="myJsFunc();">Link</a>`

我想将`onclick`命令链接到`.click`函数。我该怎么做呢？我试过了`onclick ="click()"`，`onclick ="click(function()"`两个都不行。

HTML：

```
 <area shape="rect" coords="710,44,866,84"  href="javascript:void(0)"   id="se" > 
```

我的 jQuery：（根据 cdoeparadox 更新）

```
$(document).ready(function() {

$('#numb1').hide().delay(800).fadeIn('normal');

});

$('.se').click(function(){
$('#SF').show();

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:20:21.713

### 现在

*   `<a href="javascript:void(0)" onclick="myJsFunc();">Link</a>`意味着，当你`click`在这个锚标签上时，它会调用函数`myJsFunc()`和

*   `javascript:void(0)`停止默认页面加载以单击该锚标记。

* * *

### 你能做什么

你需要使用`class`or`id`属性来指出对应的`<a>`. 例如：

***HTML***

```
<a href="javascript:void(0)" class="someclick">Link</a> 
```

***jQuery***

```
$(document).ready(function() {

    $('#numb1').hide().delay(800).fadeIn('normal');

    $('area').click(function() {
        $('#SF').show();

    });

    $('a.someclick').click(function() {
        // do something
    });
});​ 
```

* * *

### 笔记

将所有代码放入`$(document).ready({ .. })`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:21:12.367

您需要将属性添加到您想要启用`id`的确切属性，如下所示：`<a>`

```
<a id="example_id">Some text</a> 
```

然后您可以添加以下内容：

```
$('#example_id').click(function(){
    // Place the code here
}); 
```

请记住将“example_id”替换为对您的情况有意义的内容。

那应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:23:29.783

只需从 html 中删除 onclick ="xxx" 即可。jQuery

```
$('your-id').click(function(){
}) 
```

将处理点击事件

# c# - 保存用户控件属性并重新加载

> ID：11950205
> 
> 赞同：0
> 
> 时间：2012-08-14T10:18:48.157
> 
> 标签：c#, .net-4.0, .net-3.5, .net-2.0

我创建了一个用户控件，其中包含 Show 属性可以设置为 True 或 False，另一个属性 Color 可以更改我的控件的颜色。但我希望当用户在 Windows 应用程序中使用时，用户应该能够更改这些属性。我怎样才能做到这一点 ？？？

```
public bool Draw1MinuteTicks
    {
        get { return this.bDraw1MinuteTicks; }
        set { this.bDraw1MinuteTicks = value; }
    }
public Color TicksColor
    {
        get { return this.ticksColor; }
        set { this.ticksColor = value; }
    } 
```

我有这些属性。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-14T11:42:35.573

我认为满足您需求的最简单方法是使用数据绑定。那里有一些优秀的文章，例如[Josh Smith 的博客文章](http://www.codeproject.com/Articles/18270/A-Guided-Tour-of-WPF-Part-3-Data-binding)。另请查看有关 MV-VM 模式的文章，例如[Barry Lapthorn 的博客文章](http://www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial)。

问候约尔格

# c# - 带有 process.start 用户名、密码和域的 Windows 服务

> ID：11950208
> 
> 赞同：0
> 
> 时间：2012-08-14T10:18:57.533
> 
> 标签：c#, .net, windows, service, process

我正在尝试创建一个应该在其中启动进程的 Windows 服务。此过程需要登录到另一个帐户。

```
 protected override void OnStart(string[] args)
        {
            _thread.Start();
        }

    private void ThreadFunction()
    {
        var process = new Process
                          {
                                  StartInfo =
                                      {
                                          UserName = "User",
                                          Password = "Pass",
                                          UseShellExecute = false,
                                          FileName = @"C:\Program Files\Default Company Name\ServiceProcessInstaller\ConsoleProcess.exe"
                                      }
                              };
        process.Start();
    } 
```

我认为这很简单，但似乎 process.start 和 windows 服务就像油和水。

当我启动该过程时，没有任何反应，最终我给出了一个异常：Windows 无法在本地计算机上启动“AServiceProcess”服务。错误 1067：进程意外终止。

我真的很感谢我能得到的所有帮助，如果有什么不够清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:15:58.907

我建议您退后一步，查看有关 Windows 服务进程的一些概念信息。服务只是一个在任何登录用户之外启动和运行的进程，在概念上与 Unix 守护进程运行的方式大致相同。您说您的代码代表您想要用来启动另一个进程的服务，但是您上面显示的 Start 方法正在启动一个名为“ServiceProcess.exe”的东西，这看起来非常令人困惑 - 就好像*那是*您打算运行的真正服务一样。

服务进程需要一组凭据，并且提供（或隐式使用）的凭据显示（根据您的信息）没有启动外部进程所需的权限。

除非这里有非常不寻常的要求，否则我建议您考虑 - 如果可能的话 - 在服务流程本身中实施您需要的操作。您可能能够使上述结构正常工作，但我不确定您是否会发现它可以长期维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:57:53.250

我最终通过使用函数“CreateUserAsProcess”解决了这个问题，并设置了 WinNT50 和新凭据。

# c# - 从 FTP 服务器下载大文件（~150MB）挂起

> ID：11950211
> 
> 赞同：7
> 
> 时间：2012-08-14T10:19:03.700
> 
> 标签：c#, ftp

我正在尝试使用以下代码从 ftp 服务器下载文件：

```
using (System.IO.FileStream fileStream = System.IO.File.OpenWrite(filePath))
              {

                byte[] buffer = new byte[4096];

                int bytesRead = responseStream.Read(buffer, 0, 4096);
                while (bytesRead > 0)
                {
                  fileStream.Write(buffer, 0, bytesRead);                      
                  bytesRead = responseStream.Read(buffer, 0, 4096);
                }

              } 
```

responseStream的创建：

```
System.IO.Stream responseStream = GetFileAsStream(url, username, password, false);

public static System.IO.Stream GetFileAsStream(string ftpUrl, string username, string password, bool usePassive)
{
  System.Net.FtpWebRequest request = (System.Net.FtpWebRequest)System.Net.WebRequest.Create(ftpUrl);
  request.KeepAlive = false;
  request.ReadWriteTimeout = 120000;
  request.Timeout = -1;
  request.UsePassive = usePassive;

  request.Credentials = new System.Net.NetworkCredential(username, password);

  request.Method = System.Net.WebRequestMethods.Ftp.DownloadFile;

  System.IO.Stream fileResponseStream;

  System.Net.FtpWebResponse fileResponse = (System.Net.FtpWebResponse)request.GetResponse();

  fileResponseStream = fileResponse.GetResponseStream();

  return fileResponseStream;
} 
```

它适用于较小的文件，但当文件较大（例如 150mb）时，进程会挂起。出于某种原因，程序不理解它已完成下载，它仍然尝试读取更多字节。

我更喜欢不包括使用外部库的答案。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T12:12:51.157

我通过引入请求超时解决了我的问题——如果达到，程序会抛出 WebException。在这种情况下，程序会从它离开的地方继续下载。这是我的代码：

这是一个方法的内部，如果文件被下载，则返回 true，否则返回 false

```
Digitalez.DirectoryUtil.EnsureDirectoryExists(relativePath);

        string filePath = System.IO.Path.Combine(relativePath, fileInfo.Name);
        long length = Digitalez.FtpUtil.GetFileLength(fileInfo.FullPath, userName, password, usePassive);
        long offset = 0;
        int retryCount = 10;
        int? readTimeout = 5 * 60 * 1000; //five minutes

        // if the file exists, do not download it
        if (System.IO.File.Exists(filePath))
        {
          return false;
        }

        while (retryCount > 0)
        {

          using (System.IO.Stream responseStream = Captator.Eifos.Net.FtpUtil.GetFileAsStream(fileInfo.FullPath, userName, password, usePassive, offset, requestTimeout: readTimeout != null ? readTimeout.Value : System.Threading.Timeout.Infinite))
          {

            using (System.IO.FileStream fileStream = new System.IO.FileStream(filePath, System.IO.FileMode.Append))
            {
              byte[] buffer = new byte[4096];
              try
              {
                int bytesRead = responseStream.Read(buffer, 0, buffer.Length);

                while (bytesRead > 0)
                {
                  fileStream.Write(buffer, 0, bytesRead);

                  bytesRead = responseStream.Read(buffer, 0, buffer.Length);
                }

                return true;
              }
              catch (System.Net.WebException)
              {
                // Do nothing - consume this exception to force a new read of the rest of the file
              }
            }

            if (System.IO.File.Exists(filePath))
            {
              offset = new System.IO.FileInfo(filePath).Length;
            }
            else
            {
              offset = 0;
            }

            retryCount--;

            if (offset == length)
            {
              return true;
            }

          }
        } 
```

Digitalez.FtpUtil：

```
public static System.IO.Stream GetFileAsStream(string ftpUrl, string username, string password, bool usePassive, long offset, int requestTimeout)
{
  System.Net.FtpWebRequest request = (System.Net.FtpWebRequest)System.Net.WebRequest.Create(ftpUrl);

  request.KeepAlive = false;
  request.ReadWriteTimeout = requestTimeout;
  request.Timeout = requestTimeout;
  request.ContentOffset = offset;
  request.UsePassive = usePassive;
  request.UseBinary = true;

  request.Credentials = new System.Net.NetworkCredential(username, password);

  request.Method = System.Net.WebRequestMethods.Ftp.DownloadFile;

  System.IO.Stream fileResponseStream;

  System.Net.FtpWebResponse fileResponse = (System.Net.FtpWebResponse)request.GetResponse();

  fileResponseStream = fileResponse.GetResponseStream();

  return fileResponseStream;
}

public static long GetFileLength(string ftpUrl, string username, string password, bool usePassive)
{
  System.Net.FtpWebRequest request = (System.Net.FtpWebRequest)System.Net.WebRequest.Create(ftpUrl);

  request.KeepAlive = false;
  request.UsePassive = usePassive;

  request.Credentials = new System.Net.NetworkCredential(username, password);
  request.Method = System.Net.WebRequestMethods.Ftp.GetFileSize;

  System.Net.FtpWebResponse lengthResponse = (System.Net.FtpWebResponse)request.GetResponse();
  long length = lengthResponse.ContentLength;
  lengthResponse.Close();
  return length;

} 
```

我没有尝试过其他服务器，但这确实可以解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T22:22:22.333

我已经使用您的代码成功下载了几个超过 150MB 的文件。正如其他人所建议的那样，这可能是您的 FTP 服务器的问题。

# asp.net - 无法绑定到超链接

> ID：11950219
> 
> 赞同：1
> 
> 时间：2012-08-14T10:19:25.977
> 
> 标签：asp.net

```
 <asp:HyperLink id=HyperLink1 
         Text='<%# Bind("report.reportId.ToString()") %>'       
         NavigateUrl='<%# Bind("~/manage.aspx") %>' 
         runat="server" /> 
```

我无法运行创建此超链接，因为它给了我一个错误提示“对 Bind 的调用格式不正确。请参阅文档以获取正确的 Bind 参数。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:23:42.083

如果是*简单*的数据绑定（不使用这样的数据控件），那么使用绑定表达式 - `<%# Expression %>`。（我认为`report.reportid`是公开的）

```
 <asp:HyperLink 
         id=HyperLink1 
         Text='<%# report.reportId %>'       
         NavigateUrl="~/manage.aspx" 
         runat="server" /> 
```

并从代码隐藏中调用 DataBind() 方法，

```
public void page_load() { 
  DataBind();
} 
```

# django - 表单发送时数据损坏，=\r\n 每 75 个字符在数据中引入？

> ID：11950220
> 
> 赞同：3
> 
> 时间：2012-08-14T10:19:29.067
> 
> 标签：django, forms, google-app-engine, blobstore, django-nonrel

我正在 Google App Engine 上的 Django nonrel 中开展一个项目，尽管我觉得我的问题与这些直接无关。

我在一个模型中有一个隐藏字段，其定义如下：

```
models.CharField(max_length=400, null=True, blank=True,default="{}") 
```

该字段旨在从我的管理员中的小部件接收 JSON 数据，并且在客户端中其值会正确更改。

*（发送哪些数据与我的问题无关 - 字段值中的任何字符串都已损坏）*

**问题是**- 当我查看传递给 django save 函数的数据时，我看到`=\r\n`数据字符串中每 75 个字符。这有效地破坏了字符串，使我的数据无用。我不知道这是从哪里来的，或者是什么原因造成的。

更有趣的点：

*   管理表单有`enctype='multipart/form-data'`，因为我使用 GAE blobstore 以该表单上传文件
*   我正在使用[django-filetransfers](http://www.allbuttonspressed.com/projects/django-filetransfers)来促进使用 blobstore
*   我检查了浏览器发出的请求，发出的数据是干净的
*   Django 将模型中的数据保存为 UTF8

我在谷歌上没有找到任何与我的问题很接近的东西......

有没有人有办法解决吗？或者也许是从哪里开始寻找的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T15:00:49.647

所以事实证明问题是[谷歌应用引擎中这个错误的结果](http://code.google.com/p/googleappengine/issues/detail?id=2749)

我在这里找到了我的解决方案：[提交多部分/表单数据表单时应用引擎中的编码问题](https://stackoverflow.com/questions/3624226/encoding-problem-in-app-engine-when-submitting-multipart-form-data-forms)

使用该线程中的 Andres Bossard 中间件修复解决了该问题

# html - 标签内的标签仅适用于 IE

> ID：11950224
> 
> 赞同：0
> 
> 时间：2012-08-14T10:19:44.660
> 
> 标签：html, cross-browser, anchor, image

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:22:59.463

你浮动链接吗？如果这样做，它将不会封装整个图像。如果是这种情况，您可能希望在 css 中为您的链接指定宽度和高度。

```
.fleft.block{
  width: "your image width";
  height: "your image height";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:25:51.363

您的代码运行良好。如果您想更改图像上的光标，请在您的 CSS 中尝试此操作；

```
.logo{
  cursor: pointer;
} 
```

# delphi - CreateProcess 程序不工作

> ID：11950227
> 
> 赞同：-1
> 
> 时间：2012-08-14T10:20:01.977
> 
> 标签：delphi, winapi

以下代码不会使应用程序运行。有人可以指出可能是什么问题吗？

```
procedure TTestForm1.DR_DBA_StartAppButtonClick(Sender: TObject);
var
  StartInfo: TStartupInfo;
  ProcInfo: TProcessInformation;
  filename : String;
  sa : TSecurityAttributes;
  sd : TSecurityDescriptor;

begin

  InitializeSecurityDescriptor( @sd, SECURITY_DESCRIPTOR_REVISION );
  SetSecurityDescriptorDacl( @sd, true, nil, false);

  sa.nLength := sizeof( sa );
  sa.lpSecurityDescriptor := @sd;
  sa.bInheritHandle := true;

  // start app process
  ZeroMemory(@StartInfo, SizeOf(TStartupInfo));
  StartInfo.cb := SizeOf(TStartupInfo);

  if not
    CreateProcess (nil, PChar(SF_AppPathBox.Text), @sa, @sa, False,
    PROCESS_VM_WRITE or PROCESS_VM_OPERATION, nil, nil, StartInfo, ProcInfo) then
  begin

    showmessage ('Cannot Start App');
    exit;

  end;

end; 
```

这段代码在具有不同 UI 的旧 alpha 版本中运行得非常好，但现在在实施新的 UI 设计之后，它就不行了。

GetLastError 函数返回错误代码 2，系统找不到指定的文件。

定义的路径是正确的，因为它是从应用程序创建的 installdir 注册表项中提取的。我也尝试过手动包含它，但无济于事。

`'X:\App\PB 0.93\PB.exe'`

我使用 DxScene v4.42 进行 UI 设计，路径是从 TVxTextBox 中提取的。输入恒定路径有效，但不是从文本框中输入，尽管两者都是系统字符串。我通过 CompareStr 将两个字符串相互比较，结果完全匹配。

我正在使用 Windows 7 64/32 位和 Windows XP SP2/3 32 位。

# 发现

DxScene 组件固有地使用与 createprocess 过程不兼容的 unicode 字符串。

所以我首先将所需的路径字符串存储在普通字符串中，然后将它们作为参数传递以创建有效的过程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T10:29:42.800

您似乎在 Unicode 和 Ansi 文本之间存在不匹配。您正在使用使用 Unicode 的 UI 控件，但在 Ansi Delphi 中进行编译。因此，您将一个 16 位字符的数组传递给一个需要 8 位编码文本的函数。这解释了报告的错误代码。

该代码可能适用于原始开发人员，因为他们使用了现代 Unicode Delphi。如果是这种情况，那么您最好的做法是使用最初编译代码的 Delphi 版本来编译代码。

如果您必须使用 Ansi Delphi，那么您可以通过传递来修复您的代码

```
PChar(string(SF_AppPathBox.Text)) 
```

创建进程。这将产生从 Unicode 转换为 Ansi 的效果。

您也可以像这样调用 Unicode 版本的 CreateProcess：

```
CreateProcessW(..., PWideChar(WideString(SF_AppPathBox.Text)), ...) 
```

# c++ - 如何在 C++ 中对接口/抽象类进行编程？

> ID：11950231
> 
> 赞同：1
> 
> 时间：2012-08-14T10:20:05.173
> 
> 标签：c++, interface, abstract-class

请考虑一个像这样的纯虚拟类：

```
class Foo {
    public: virtual int FooBar() = 0;
}; 
```

Java 开发人员会将这样的东西称为“接口”。通常，您然后编程到该接口，例如（不好的例子，对不起）：

```
class Bar {
    public: Foo f;
};

class Child : public Foo {
    public: int FooBar() { return 1; }
};

Bar b;
b.foo = Child(); 
```

这显然在 C++ 中不起作用，因为类 Foo 的实例是在构造时创建的（但这是不可能的，因为 Foo 是一个抽象类）。

在 C++ 中“编程到接口”有什么模式吗？

**编辑：**澄清了这个例子，对不起。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:24:54.940

为了像在 Java 中一样使用多态性，您需要使用指针和引用，就像在 Java 中一样。在 Java 中，一切要么是原始类型，要么是引用：当你用`Foo f;`Java 编写代码时，你会得到一个引用。在 C++ 中，你得到一个*object*。

但是，与 Java 不同，C++ 中的接口不必涉及虚函数和基类。标准库中使用的迭代器接口就是一个很好的例子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T10:23:40.670

如果您需要指向或引用接口（或抽象类）的实现的东西，您可以使用对该接口的引用的指针：

```
class Bar {
public:
    Bar( Foo& af ) : f( af )
    {}
private: 
    Foo& f;
}; 
```

如果你想使用一个引用`Foo& f`，一个指针`Foo* f`或一个引用或指向 const 实现 ( `const Foo& f`of `const Foo* f`) 的指针，甚至是一个指向 const 实现 ( `const Foo* const f`) 的 const 指针，取决于你的要求。

如果可能，请使用引用，用于从外部传递引用实现的组合（如我的示例中）。如果对象更多是聚合并且由包含对象本身构造，则使用指针或智能指针。

**更新：** 到目前为止，没有其他人提到过，如果要动态分配实现接口的对象，则基类必须具有虚拟析构函数，否则即使使用 smart 也会调用未定义的行为指针。请注意，智能指针可能很方便，但它们并不是万能的。您仍然应该牢记一些所有者层次结构，否则您最终会遇到智能指针无法轻松解决的循环。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T10:23:55.977

您的数据成员`f`应声明为指向的指针，`Foo`或者更好的是，声明为指向 的某种形式的智能指针`Foo`，例如`shared_ptr<Foo>`.

您可以使用对 的引用`Foo`，但这会使事情复杂化：您的类将需要一个显式构造函数并且不可复制或可分配，除非您显式实现这两个成员函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-14T10:22:24.137

我认为您需要继承“接口”，而不是使用组合，不是吗？

像这样

```
class Bar: public Foo
{
private: 
    virtual int Bar() { /* ... */ }
}; 
```

这就是我对“程序到界面”的理解。

* * *

**编辑：**啊哈，看看你的编辑，你真的需要在这里指点。这是等效的 C++ 代码：

```
class Foo {
    public: virtual int Bar() = 0;
};

class Bar {
    //.........v
    public: Foo* f;
};

class Child : public Foo {
    public: int Bar() { return 1; }
};

Bar b;
b.f = new Child(); 
```

但是你需要照顾新分配的内存`Child()`。为了避免这种情况并使代码绝对（逻辑上）等效，您需要智能指针，对于这种情况 - a `shared_ptr`( [C++11](http://en.cppreference.com/w/cpp/memory/shared_ptr) , [boost](http://www.boost.org/doc/libs/1_50_0/libs/smart_ptr/shared_ptr.htm) )

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T10:23:09.580

你做的一切都是对的，只有一个例外。您需要从接口派生，而不是将其作为成员包含在内。

```
class myInterface
{
    virtual void foo() = 0;
}

class iHaveAnInterface: public myInterface
{
    void foo();
}

void iHaveAnInterface::foo()
{
    //implement
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T10:40:11.257

C++ 中的接口最好写成**抽象基类**：包含至少一个**纯虚函数**的无状态类。具体类从接口类公开派生，并（可选）添加状态以实现接口。

```
class IFoo
{
public:
    // enable deletion of implementation classes through IFoo*
    virtual ~IFoo() {}

    // interface
    void bar() 
    { 
        // add optional pre-processing here
        do_bar(); 
        // add optional post-processing here
    }

private:
    // to be overridden by implementation classes
    virtual void do_bar() = 0; // pure virtual

    // no state here!
};

class FooImpl
:
    public IFoo
{
public:
    // constructors, assignment etc. to manipulate state

private:
    virtual void do_bar() 
    { 
         // your implementation 
    }

    // add your state here
};

void my_algorithm(IFoo* foo)
{
    foo->bar();
}

int main()
{
    IFoo* f = new FooImpl();
    my_algorithm(f); // resolves to using FooImpl::do_bar()

    return 0;
} 
```

上面的代码是在运行时多态性和显式接口方面的。在 C++ 中有一个使用编译时多态性和隐式接口的替代方案。这是使用模板和 Curiously Recurring Template Pattern 完成的。

请注意，我在这里使用了**非虚拟接口**（NVI）成语：公共接口`IFoo`是非虚拟的，实现是（纯）虚拟的。这为接口的编写者提供了更大的灵活性，例如在`IFoo::bar()`客户不注意的情况下添加日志记录和其他检查等。

# xslt - 如何在工具提示中显示表格：XSL

> ID：11950232
> 
> 赞同：0
> 
> 时间：2012-08-14T10:20:07.250
> 
> 标签：xslt, tooltip, jquery-tooltip

我在 xml 文件中有以下标签：

```
<more_details>
    <source>192.168.1.1</source>
    <destination>10.10.10.10</destination>
    <vlan>192.168.0.0/24</vlan>
    <date>29/3/1391</date>
    <count>24</count>
</more_details> 
```

我想使用xsl在tooltip中设计一个表格；（我希望当鼠标移过页面中的特定链接时，它代表表格中的数据。数据来自xml文件）

我在我的 xsl 文件中编写以下行来实现这个目标：

```
<a href="">
    <xsl:attribute name="title"><table style='color:#efefef; background:none !important;'>
    <tr>
        <td><xsl:value-of select="source"/></xsl:value-of><td>
        <td><xsl:value-of select="destination"/></xsl:value-of></td>
        <td><xsl:value-of select="vlan"/></xsl:value-of></td>
        <td><xsl:value-of select="date"/></xsl:value-of></td>
        <td><xsl:value-of select="count"/></xsl:value-of></td>
    </tr>
    </table></xsl:attribute>
    more details
</a> 
```

它适用于 html 文件，但不适用于 xsl 文件；XSL 会自动删除所有 html 标记。

像这样：

```
<a href="" title="192.168.2.1125.45.24.5192.168.0.0/2429/2/1390 - 12:1424">
  link
</a> 
```

意思是当鼠标经过“more details”字样时，tooltip中显示的结果是：

```
192.168.2.1125.45.24.5192.168.0.0/2429/2/1390 - 12:1424 
```

我想在表格的一列中显示上述每个标签。（要结构化）但是当我运行程序时，它显示的数据不是结构化格式（不在表格中）

我还研究了第二种方式：

```
<a href="">
  <xsl:attribute name="title">&lt;table style='color:#efefef; background:none !important;'>
    <tr>
      <td><xsl:value-of select="source"/>&lt;/td>
      <td><xsl:value-of select="destination"/>&lt;/td>
      <td><xsl:value-of select="vlan"/>&lt;/td>
      <td><xsl:value-of select="date"/>&lt;/td>
      <td><xsl:value-of select="count"/>&lt;/td>
    </tr>
  </table></xsl:attribute>
    more details
</a> 
```

它也不起作用。第二种方式的结果是：

我真的需要你的帮助，任何答案都将不胜感激。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:59:24.280

`title`HTML属性中不能有表格。这是不可能的，停止尝试。

你可以做什么：

1.  使用可用的 JavaScript 库之一来生成自定义工具提示。例如，jQuery 有用于此的插件，但还有很多其他的。这些库可以在鼠标悬停时显示任何类型的 HTML，因此表格不会成为问题。
2.  只需将换行符添加到您的属性。大多数浏览器都支持属性中的换行符`title`并将它们显示在屏幕上。不像桌子那么漂亮，但可能就足够了。

我只会详细介绍第二个选项。第一个超出了这个问题的范围。

```
<a href="">
  <xsl:attribute name="title">
     <xsl:value-of select="concat('Source: ', source, '&#10;')" />
     <xsl:value-of select="concat('Destination: ', destination, '&#10;')" />
     <xsl:value-of select="concat('VLAN: ', source, '&#10;')" />
     <xsl:value-of select="concat('Date: ', date, '&#10;')" />
     <xsl:value-of select="concat('Count: ', count)" />
  </xsl:attribute>
  <xsl:text>more details</xsl:text>
</a> 
```

# ruby-on-rails - 在 Rails 3 中导出文本

> ID：11950236
> 
> 赞同：0
> 
> 时间：2012-08-14T10:20:31.437
> 
> 标签：ruby-on-rails, ruby-on-rails-3, export

我需要将一些数据导出到文本文件中。我搜索了一下，似乎找不到任何有用的和最近的东西。我已经在使用 pdfkit 和 csv 将数据导出到 pdf 和 csv 文件，所以我不知道是否可以使用其中任何一个来制作文本。最近有人遇到这个问题并找到了解决方案吗？

**编辑**

我的问题有点模糊，我会详细说明。我需要做类似 CSV.generate 的事情。为寄存器中属性的每个值添加行。我找到了寄存器，将它存储在一个变量中，然后我需要将每个值“添加”为文本文件中的一行。通过寄存器的属性循环的部分发现我得到了它的工作，我不知道如何复制它。这就是我卡住的部分。

**编辑 2**

我最终传递了一个包含寄存器所有属性的数组并将其保存在一个局部变量中，然后我按照你的建议做了，它工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:26:02.713

快速搜索： [http ://railsforum.com/viewtopic.php?id=37888](http://railsforum.com/viewtopic.php?id=37888)

```
@content = "Hello World"
send_data @content,
  :type => 'text',
  :disposition => "attachment; filename=your_file_name.txt" 
```

另见 [http://api.rubyonrails.org/classes/ActionController/Streaming.html](http://api.rubyonrails.org/classes/ActionController/Streaming.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:08:53.237

为了在文本字段中导出/写入内容。首先，您需要以写入模式打开文本文件，然后需要向其中写入数据。

```
file = File.open("/home/sandip/myfile.txt", "w")
file.write "this is how text file can be written"
file.close

file = File.open("/home/sandip/myfile.txt")
file.read #=> this is how text file can be written 
```

如果您需要将数据库记录导出到 csv 文件，那么使用 csv 库非常简单。[点击这里](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:25:16.413

它类似于其他文件格式 - 导出

像这样试试

```
def download_textfile
  @content = get_content
  send_data @content,:type => 'text',:disposition => "attachment; filename=file_name.txt"
end 
```

# ios - ios - 如何从 UIWebView 中制作的 HTML 链接到另一个控制器？

> ID：11950239
> 
> 赞同：0
> 
> 时间：2012-08-14T10:20:45.983
> 
> 标签：ios, ios5

我的 UIWebView 控制器中有一些 HTML，但我似乎无法找到创建链接的参考以及从链接正确链接到我的应用程序中使用导航控制器的另一个控制器。

为了转到其他控制器，我应该在链接的 href 标记中添加什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:38:32.567

您可以将控制器设置为 UIWebView 的委托并实现方法 (UIWebViewDelegate)

```
- (BOOL)webView:(UIWebView *)aWebView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType; 
```

在您的链接中，您可以设置这样的方案

```
"myscheme:// ... " 
```

在实施方法时，您应该像这样检查您的方案

```
- (BOOL)webView:(UIWebView *)aWebView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
 BOOL shouldLoad = YES;
    if ([request.URL.scheme isEqualToString:@"myscheme"]) {
         shouldLoad = NO;
         MYViewController *myController = [[MYViewController alloc] init];
         [self.navigationController pushViewController:myController ..];
    }
return shouldLoad;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:33:12.713

您需要使用 URL 方案。这并不复杂，但您需要为您的应用注册自定义 URL 方案。

您应该可以使用此链接：http: [//mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)

# php - 如何在 tinyMCE 中使用插件查看表结构？

> ID：11950242
> 
> 赞同：1
> 
> 时间：2012-08-14T10:21:03.323
> 
> 标签：php, html-table, tinymce

我使用的是 tinyMCE 3.5.5 版，我需要在其中插入表格。

我已经浏览了“[表格插件](http://www.tinymce.com/wiki.php/Plugin:table)”文档，并且成功地将表格添加到编辑器中。

但是，在创建表之后，如果查看源，它只显示输入的字符串，但没有`<td><tr>`或其他与表相关的标签。

如果在相同条件下保存，则只有键入的字符串会存储到数据库中。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:50:54.277

我终于得到了部分成功。

```
valid_elements : "-strong/-b[class|style],-u[class|style],#p[id|style|dir|class|align],-ol[class|style],-ul[class|style],-li[class|style],br,-strike[class|style],+a[id|rev|href|lang|dir|lang|tabindex|accesskey|type|name|href|target|title|class|style],-blockquote[dir|style],-font[face|size|style|id|class|dir|color],-span[style|class|align]" 
```

如果我在字符串中保留任何标签`valid_elements`，它不会显示任何表结构。如果我删除它，它正在工作。请让我知道问题到底出在哪里？

谢谢

# javascript - 在javascript中按类获取元素并计算其中元素的数量

> ID：11950253
> 
> 赞同：-1
> 
> 时间：2012-08-14T10:21:53.037
> 
> 标签：javascript

> **可能重复：**
> [如何在 JavaScript 中按类获取元素？](https://stackoverflow.com/questions/3808808/how-to-get-element-by-class-in-javascript)

我有一个带有类名的 div 标签。我想使用类名获取该 div 标签并计算其中元素的数量。我无法使用 ID 进行过滤。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T10:26:10.483

如果你用谷歌搜索它。

```
var arr = document.getElementsByClassName("classname")

arr.length 
```

# node.js - Node.js 的 ORM 映射器

> ID：11950254
> 
> 赞同：3
> 
> 时间：2012-08-14T10:21:56.523
> 
> 标签：node.js

是否有适用于 Node.js 的跨数据库 ORM 映射器，它为跨不同关系数据库（例如 MySQL、MS SQL Server、Postgres、Oracle ..）的数据库访问提供一致的 API。数据库页面显示了用于数据库访问的不同库，但我想使用一个库，它可以让我在生产期间切换到任何数据库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-09T23:14:10.733

可能还想看看[bookshelf.js](http://bookshelfjs.org) (MySql, SQLite, PostgreSQL)

它是仅有的具有事务支持和适当的关系急切加载的之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T13:52:07.577

看看[jugglingdb](https://github.com/1602/jugglingdb/)。[RailwayJS](http://railwayjs.com/)项目使用它。

或[续集](https://github.com/sequelize/sequelize)（MySQL、SQLite 和 PostgreSQL）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T00:03:03.937

大型项目：[http](http://bookshelfjs.org/) ://bookshelfjs.org/ 小型项目：[https ://github.com/knyga/light-orm](https://github.com/knyga/light-orm)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-04-15T11:08:47.833

我刚刚写了自己的 ORM [https://github.com/jbaylina/syncorm](https://github.com/jbaylina/syncorm)

现在mySQL只有一个驱动了，不过应该很容易为不同的数据库写其他的驱动。

与其他 ORM 的主要区别在于，整个数据库都加载到内存中。

您可以将数据库作为常规 javascript 对象同步访问。（一个对象是一个记录）。对象可以以一对多/多对一的关系相互关联。

使用下划线遍历对象非常有用。

要修改对象，您只需写入这些对象并调用 commit() 以在单个事务中保存对数据库的所有更改。

# c# - XAML（Metro 应用程序） - 如何将 FadeInThemeAnimation 延迟一秒

> ID：11950255
> 
> 赞同：2
> 
> 时间：2012-08-14T10:21:57.177
> 
> 标签：c#, xaml, windows-runtime, winrt-xaml

我的 XAML 中有一个包含 ProgressRing 的 Grid，当应用程序执行长时间运行的任务时，它会淡入视图：

```
 <Grid Height="100" Width="100"  >
            <Grid Background="#55000000" />
            <ProgressRing x:Name="mapProgressRing"  Width="50" Height="50" Foreground="White" />    
        </Grid>
        </Border> 
```

但是，我想将动画延迟 1 秒，其想法是如果任务在不到一秒的时间内完成，则永远不会显示 Grid。从而避免在执行非常短的任务时网格不断闪烁。

然而，尽管在上面的 XAML 中设置了 BeginTime，网格总是立即开始淡入视图，即使我在代码中尝试这样做也是如此。这是我的代码：

```
 void dataSou_WillStartFetchingSomething(object sender, EventArgs e)
    {
        // Don't bother fading in spinner unless it takes more than a second
        showSpinner(TimeSpan.FromSeconds(1));
    }
    void Instance_WillEndFetchingSomething(object sender, EventArgs e)
    {
        hideSpinner();
    }

    #region Spinner
    void showSpinner(TimeSpan? delayStartTime)
    {
        // Stop animation in case it's already running
        mapRingFadeOutStoryBoard.Stop();
        // Fade in, delaying the start by the specified time
        mapRingFadeInStoryBoard.BeginTime = delayStartTime;
        mapRingFadeInStoryBoard.Begin();
    }
    void hideSpinner()
    {
        // Stop the 'fade in' animation in case it's still running
        mapRingFadeInStoryBoard.Stop();

        // Fade out
        mapRingFadeOutStoryBoard.Begin();
    }
    #endregion 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:52:28.133

Not sure what's wrong, but you could use async/await instead. Just mark your method as async and then do "await Task.Delay(1000)" to wait for a second before starting the animation.

# html - 如何使用css在标签上设置不显示？

> ID：11950261
> 
> 赞同：1
> 
> 时间：2012-08-14T10:22:20.330
> 
> 标签：html, css, html-lists, zen-cart

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:40:06.473

# iphone - 带有 webview 参数的 xcode 选择器

> ID：11950264
> 
> 赞同：0
> 
> 时间：2012-08-14T10:22:24.393
> 
> 标签：iphone, objective-c, ios, xcode, uiwebview

我正在尝试使用执行选择器的 NSTimer。在这个选择器上，我需要传递一个 webview 参数。我正在尝试像以前那样处理字符串但不工作。如何到达？谢谢你。

```
-(void)setVars:(UIWebView *)webView{

   ...
}

-(void)webViewDidFinishLoad:(UIWebView *)webView {

        [NSTimer scheduledTimerWithTimeInterval:.60 target:self selector:@selector(setVars:) withObject:webView userInfo:nil repeats:NO]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:28:16.613

你为什么不使用**performSelector:withObject:afterDelay**这样的：

```
[self performSelector:@selector(setVars:) withObject:webView afterDelay:1]; 
```

# python - 如何从 Python 中的输入数字中打印最大最小值和平均值？

> ID：11950274
> 
> 赞同：-1
> 
> 时间：2012-08-14T10:22:40.290
> 
> 标签：python, max, min

程序将询问用户的输入： inp = input("Enter numbers")

用户可能输入数字为 4535435439。我的第一个问题是如何将数字存储为列表。例如，如果用户输入为 12、14、15。我希望将每个数字存储为一个列表。有内置功能吗？以及如何从该列表中获取最大值、最小值和平均值？

PS我不需要代码。请指导我的逻辑。告诉我我该怎么做？然后我会把它转换成代码并放在这里。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:25:38.883

如果数字用逗号分隔，那么你很幸运

```
import ast
numbers = ast.literal_eval(inp) 
```

会给你一个数字的元组。将元组转换为列表很容易

```
numbers = list(numbers) 
```

有一些函数`min()`，`max()`你可以用它来找到最小值和最大值，只需传递`numbers`给它们

您可以`min`（或`max`）不使用这样的内置函数

```
min_number = numbers[0]
for n in numbers:
    if n < min_number:
        min_number = n 
```

`max`很相似

要获得平均值，请将数字相加并除以长度

```
total = 0
for n in numbers:
    total += n
average = float(total)/len(numbers) 
```

在 Python2 中，您需要将其中一个数字转换为`float`，否则您将得到一个整数除法。希望您正在使用 Python3，因为我看到您正在使用`input()`而不是`raw_input()`

快捷方式是使用`sum()`函数

```
average = sum(numbers)/len(numbers) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:27:10.250

```
min(int(x) for x in raw_input().split(',')) 
```

会得到用户的输入。如果字符串是逗号分隔的数字，例如`1, 2, 3, 4`，这会将字符串拆分为每个数字，将它们转换为整数，找到该值列表的最小值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:29:51.153

您可以在循环中向用户询问一个数字，并在输入时接受空输入作为结束并跳出循环。在循环中，您只需将输入附加到列表中。

# java - JPQL：多重连接。如何做我的命名查询？

> ID：11950279
> 
> 赞同：2
> 
> 时间：2012-08-14T10:23:01.397
> 
> 标签：java, jpa, jpql

这是我的数据库的快速图表。

[http://img17.imageshack.us/img17/2474/mpd.png](http://img17.imageshack.us/img17/2474/mpd.png)

在这个方案中，我创建了 JPA 实体（对于所有带有红色方块的表）。

我想创建一个 JPQL 查询来获取所有具有引用的飞机，引用由参数给出的引用类型定义。

我试过了 ： `SELECT DISTINCT a FROM Aircraft a JOIN FETCH a.references r WHERE EXISTS (SELECT ref FROM Reference ref WHERE ref = r AND ref.referenceType.id = :id)`

但是我有一个错误，因为 Eclipse 不喜欢别名，`JOIN FETCH a.references *r*`并且请求在 JUnit 测试中不起作用。

这里我的实体没有 getter/setter ：

**飞机**

```
@Entity
@Table(name = "T_R_AIRCRAFT_AIR", uniqueConstraints = @UniqueConstraint(columnNames = "AIR_NAME"))
public class Aircraft implements java.io.Serializable {

    @Id
    @Column(name = "AIR_ID", unique = true, nullable = false)
    @TableGenerator(name="aircraftSeqStore", 
        table="T_S_APP_SEQ_STORE_AST", 
        pkColumnName="AST_SEQ_NAME",
        valueColumnName = "AST_SEQ_VALUE",
        pkColumnValue = "T_R_AIRCRAFT_AIR.AIR_ID", 
        allocationSize=1)
    @GeneratedValue(strategy=GenerationType.TABLE, 
        generator="aircraftSeqStore")       
    private Integer id;

    @Column(name = "AIR_NAME", unique = true, nullable = false, length = 50)
    private String name;

    @ManyToMany(fetch = FetchType.LAZY)
    @JoinTable(name = "T_J_REF_AIR_RFA", 
               joinColumns = { @JoinColumn(name = "RFA_AIR_ID", nullable = false, updatable = false) }, 
               inverseJoinColumns = { @JoinColumn(name = "RFA_REF_ID", nullable = false, updatable = false) })
    private Set<Reference> references = new HashSet<Reference>(0);

    @ManyToMany(fetch = FetchType.LAZY)
    @JoinTable(name = "T_J_MAN_AIR_MNA", 
               joinColumns = { @JoinColumn(name = "MNA_AIR_ID", nullable = false, updatable = false) }, 
               inverseJoinColumns = { @JoinColumn(name = "MNA_MAN_ID", nullable = false, updatable = false) })  
    private Set<Manual> manuals = new HashSet<Manual>(0);

    @OneToMany(fetch = FetchType.LAZY, 
               mappedBy = "aircraft",
               cascade = { CascadeType.REMOVE })
    private Set<UserConfig> userConfigs = new HashSet<UserConfig>(0);
} 
```

** 参考 **

```
@Entity
@Table(name = "T_E_REFERENCE_REF", 
       uniqueConstraints = @UniqueConstraint(columnNames = "REF_IDENTIFIER"))
public class Reference implements java.io.Serializable {

    @Id
    @Column(name = "REF_ID", unique = true, nullable = false)
    @TableGenerator(name="referenceSeqStore", 
        table="T_S_APP_SEQ_STORE_AST", 
        pkColumnName="AST_SEQ_NAME",
        valueColumnName = "AST_SEQ_VALUE",
        pkColumnValue = "T_E_REFERENCE_REF.REF_ID", 
        allocationSize=1)
    @GeneratedValue(strategy=GenerationType.TABLE, generator="referenceSeqStore")                   
    private Integer id;

    @Column(name = "REF_IDENTIFIER", unique = true, nullable = false, length = 50)  
    private String identifier;

    @Column(name = "REF_LINK")  
    private String link;

    @Column(name = "REF_OBSERVATIONS", length = 4000)
    private String observations;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "REF_RFT_ID", nullable = false)  
    private ReferenceType referenceType;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "REF_MAN_ID")    
    private Manual manual;  

    @OneToMany(fetch = FetchType.LAZY, 
               mappedBy = "reference",
               cascade = { CascadeType.REMOVE })
    private Set<Translation> translations = new HashSet<Translation>(0);

    @ManyToMany(fetch = FetchType.LAZY)
    @JoinTable(name = "T_J_REF_AIR_RFA", 
               joinColumns = { @JoinColumn(name = "RFA_REF_ID", nullable = false, updatable = false) },
               inverseJoinColumns = { @JoinColumn(name = "RFA_AIR_ID", nullable = false, updatable = false) })
    private Set<Aircraft> aircrafts = new HashSet<Aircraft>(0);
} 
```

** 参考类型 **

```
@Entity
@Table(name = "T_R_REFERENCE_TYPE_RFT", 
       uniqueConstraints = @UniqueConstraint(columnNames = "RFT_TYPE"))
public class ReferenceType implements java.io.Serializable {

    @Id
    @Column(name = "RFT_ID", unique = true, nullable = false)
    @TableGenerator(name="referenceTypeSeqStore", 
        table="T_S_APP_SEQ_STORE_AST", 
        pkColumnName="AST_SEQ_NAME",
        valueColumnName = "AST_SEQ_VALUE",
        pkColumnValue = "T_R_REFERENCE_TYPE_RFT.RFT_ID", 
        allocationSize=1)
    @GeneratedValue(strategy=GenerationType.TABLE, generator="referenceTypeSeqStore")                   
    private Integer id;

    @Column(name = "RFT_TYPE", unique = true, nullable = false, length = 50)    
    private String type;

    @OneToMany(fetch = FetchType.LAZY, 
               mappedBy = "referenceType", 
               cascade = { CascadeType.REMOVE })    
    private Set<Reference> references = new HashSet<Reference>(0);

    @OneToMany(fetch = FetchType.LAZY, 
               mappedBy = "referenceType",
               cascade = { CascadeType.REMOVE })    
    private Set<UserConfig> userConfigs = new HashSet<UserConfig>(0);
} 
```

PS：我忘了说飞机和参考之间添加了一个表格。这是手动表。但我不认为有影响。

PS2：JPA 实现是由 Hibernate 完成的。

知道如何进行多重连接吗？谢谢 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T10:29:15.870

您可以更轻松地执行查询，如下所示：

```
SELECT DISTINCT a FROM Aircraft a JOIN FETCH a.references r 
LEFT JOIN FETCH a.manuals 
WHERE r.referenceType.id = :id 
```

我已经添加了`join fetch a.manuals`，否则我得到了`LazyInitializationException`. 添加`LEFT`以防止缺少手册影响输出。

# windows-phone-7 - 在 Windows Phone 7 上的 PhoneGap 中包含本地 JavaScript

> ID：11950281
> 
> 赞同：3
> 
> 时间：2012-08-14T10:23:06.333
> 
> 标签：windows-phone-7, jquery-mobile, cordova

我有一个 PhoneGap 应用程序，旨在在多个移动平台上工作。我正在使用 jQuery Mobile 从 Internet 上的外部页面加载动态 HTML 内容。有问题的系统是 Windows Phone 7。

这是我从外部页面得到的，脚本标签的 URL 已经替换为从手机而不是从网络加载以节省带宽：

```
<script type="text/javascript" charset="utf-8" src="x-wmapp1:/app/www/test.js"></script> 
```

*当我将x-wmapp1:*部分替换为相应的对应项（例如，Android 上的 file:///android_asset/www/）时，这在 Android、iPhone 甚至黑莓上都可以正常工作。但是，在 Windows Phone 7 上，它似乎根本不起作用。

当我尝试通过 $.getScript 函数加载相同的 URL 时，它总是返回 404 错误，即使我尝试仅使用相对路径加载它。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T15:47:15.063

尝试在 GapSourceDictionary.xml 中添加您的 js。

GapSourceDictionary.xml XML 文件列出了所有 HTML 应用程序资源。当应用程序启动时，会读取此 XML 文件，并将列表中包含的所有文件添加到隔离存储中，以便 WebBrowser 控件可以为其提供服务。

例如，您的 GapSourceDictionary.xml 应如下所示：

```
 <?xml version="1.0" encoding="utf-8"?>
    <GapSourceDictionary>
        <FilePath Value="www\index.html"/>
        <FilePath Value="www\test.css"/>
        <FilePath Value="www\phonegap-1.3.0.js"/>
        <FilePath Value="www\js\custom.js"/>
    </GapSourceDictionary> 
```

在您的 HTML 文件中使用相对路径来指定外部脚本文件的 URL：

```
 <script type="text/javascript" src="./js/custom.js"></script> 
```

**已编辑**

我成功地使用以下过程动态加载了一个新的本地 JavaScript 文件。在 PhoneGap 2.0 上测试成功。不幸的是，同样的测试在 PhoneGap 1.8.1 上失败了

下面是动态加载 JS 的源代码：

```
function dynamicJSload(url)
{
    var script = document.createElement('script');
    script.type = "text/javascript";
    if (script.readyState)
    {
        script.onreadystatechange = function(){
            if (script.readyState == "complete" || script.readyState == "loaded"){
                script.onreadystatechange = null;
            }
        };
    }
    script.src = url;
    document.getElementsByTagName("head")[0].appendChild(script);
} 
```

在我的页面中，我调用了这样的函数：

```
 dynamicJSload("js\\test.js"); 
```

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T17:53:47.323

请尝试使用 Windows 路径，例如`file:\\\`. 由于文件系统期望`\`目录分离是最有可能的问题。

# c++ - 例外。尝试 - 捕获块

> ID：11950288
> 
> 赞同：2
> 
> 时间：2012-08-14T10:23:30.990
> 
> 标签：c++, exception, exception-handling, try-catch

我得到以下代码：

```
set<Object*>::iterator it;
try
    {
        for (it = SetOfObjects->begin(); it != SetOfObjects->end(); ++it)
        {
            //some actions, not applicable to the question
        }
    }
    catch(...)
    {
        this->m_error_raiser->error_Name = "Station isn`t connected to Object! Use connectToObject method or list of forecast objects is empty";
        this->m_error_raiser->error_Number = 101;
        //throw (this->m_error_raiser);
    } 
```

当未创建 SetOfObjects 实例并且我试图遍历该集合时，我得到了预期的运行时错误。

所以我决定处理这个错误，并通过 try catch 向用户提供有关它的信息。

我的*问题：*虽然我捕获了所有异常，因此它们被视为已处理，但我的程序仍然在运行时终止，这与我期望它的行为相矛盾：它应该继续工作，因为所有生成的异常都已处理。这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:28:51.257

如果 object 是指针且未初始化，则此类对象的用法为`undefined behaviour`. 您无法`exception handling`（按标准）处理此类指针的使用。默认情况下仅初始化为 0 并验证指针不在`null`使用前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T11:24:19.867

在 Windows 环境中，从技术上讲，您可以捕获像这样的低级异常（取消引用空/未初始化的指针） - SEH 异常。这是通过使用 Microsoft 特定的 __try() 和 __except() 语句来完成的。

这可能很有用，如果你有一个写得不太好的外部库，它会崩溃（跟随空指针等）而不是报告错误，即当找不到文件时。

但是，正如评论中已经提到的，在您的代码中使用它是不可移植的。而且它们不能与 C++ 异常互操作。因此，即使您决定使用它们，您最终也会得到 2 种异常处理机制的意大利面……可能是一个糟糕的设计）

但是，如果您的代码依赖于异常处理来报告错误，您始终可以进行空检查并在失败时抛出自定义异常：`if(pointer==NULL) throw something;`

# javascript - 必须对 JavaScript 进行哪些更改才能使其可编译为二进制文件？

> ID：11950299
> 
> 赞同：0
> 
> 时间：2012-08-14T10:23:56.623
> 
> 标签：javascript

必须对 JavaScript 进行哪些更改才能使其可编译。我并不是说要变成仍然依赖解释器的可执行文件——我的意思是让它以 C 编译的方式编译成二进制文件。

我预计原型继承可能是一个问题 - 但我不知道。

另外，我很确定这`eval`是不可能的（或不希望的）。

有什么东西试图做这样的事情吗？

技术上可以实现吗？

JavaScript（经过一些小的修改）可以用来创建高效的程序吗？

* * *

**编辑**

我特别在寻找类似于`RPython`Python 之类的东西 - 但对于 javascript。

对于我想要的编译语言，动态类型似乎也很困难/不可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:29:13.693

我认为原型继承没有任何问题。事实上，`eval`除非有某种 JS-VM 可以即时编译它，否则它可能无法工作。

至于它需要什么真正有用，我认为从 C/C++ 库调用函数的能力是最重要的。没有它，你将无法做任何有用的事情。

# php - 用php将小数四舍五入到最接近的10的倍数

> ID：11950300
> 
> 赞同：1
> 
> 时间：2012-08-14T10:23:57.147
> 
> 标签：php, decimal

假设我在变量 $hours 中有数字“13.57916667”。这是将分钟和秒与小时相结合的计算小时数。

我希望小数四舍五入。例如，我希望 $hours 变为 13.6。即使在stackoverflow上，我似乎也无法在任何地方找到任何解决方案。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:25:16.893

好吧，这个小片段应该可以做到：

```
echo round(13.579, 1); 
```

如果您正在寻找`ceil()`精确的：

```
function ceil_with_precision($value, $precision = 0) {
    return ceil($value * pow(10, $precision)) / pow(10, $precision);
} 
```

对于 1 位小数的固定精度，这将变为：

```
ceil($value * 10 ) / 10; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:27:27.057

$result = round($hours, 1);

见[轮（）](http://php.net/manual/en/function.round.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:27:49.717

试试这个

```
$roundednumber= round($number / 10, 0) * 10; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T10:30:26.303

```
$hours = (float) "13.57916667";
$hours = ceil($hours * 10) / 10; 
```

# java - Android Animation drwable 代码在 2.2 中运行良好，但在 2.3 中无法运行？

> ID：11950301
> 
> 赞同：1
> 
> 时间：2012-08-14T10:24:04.547
> 
> 标签：java, android, xml, android-manifest

我是安卓新手。

我的动画代码在 android 2.2 中运行良好，但在 android 2.3 中无法运行，当我在 android 2.3 中运行动画代码时，其显示错误如下：

```
java.lang.RuntimeException: Canvas: trying to use a recycled bitmap
android.graphics.Bitmap@405795e8 
```

在我的活动中，我有三个按钮和一个图像视图，其中我单击图像视图正在播放一个动画但是当我第一次使用 ball_but 按钮时它会播放一些动画到现在它工作正常但是当我再次单击 ball_but 时在 log cat 中给出这样的强制关闭错误。

我对此一无所知。

我的动画 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"

    android:oneshot="true" >

    <item
        android:drawable="@drawable/cap_animation01"
        android:duration="100"/>

    <item
        android:drawable="@drawable/cap_animation02"
        android:duration="100"/>

    <item
        android:drawable="@drawable/cap_animation03"
        android:duration="100"/>

    <item
        android:drawable="@drawable/cap_animation04"
        android:duration="100"/>

    <item
        android:drawable="@drawable/cap_animation05"
        android:duration="100"/>
    <item
        android:drawable="@drawable/cap_animation01"
        android:duration="100"/>

    <item
        android:drawable="@drawable/cap_animation02"
        android:duration="100"/>

    <item
        android:drawable="@drawable/cap_animation03"
        android:duration="100"/>

    <item
        android:drawable="@drawable/cap_animation04"
        android:duration="100"/>

    <item
        android:drawable="@drawable/cap_animation05"
        android:duration="100"/>
 <item
        android:drawable="@drawable/cap_animation01"
        android:duration="100"/>

    <item
        android:drawable="@drawable/cap_animation02"
        android:duration="100"/>

    <item
        android:drawable="@drawable/cap_animation03"
        android:duration="100"/>

    <item
        android:drawable="@drawable/cap_animation04"
        android:duration="100"/>

    <item
        android:drawable="@drawable/cap_animation05"
        android:duration="100"/>
     <item
        android:drawable="@drawable/cap_animation01"
        android:duration="100"/>

    <item
        android:drawable="@drawable/cap_animation02"
        android:duration="100"/>

    <item
        android:drawable="@drawable/cap_animation03"
        android:duration="100"/>

    <item
        android:drawable="@drawable/cap_animation04"
        android:duration="100"/>

    <item
        android:drawable="@drawable/cap_animation05"
        android:duration="100"/>

    <item
        android:drawable="@drawable/elephant_first"
        android:duration="100"/>
      </animation-list> 
```

我的活动：

```
public class Home extends Activity implements OnClickListener  {
        Button ball_but,drum_but,hat_but,freeapps_but,moreapps_but,start_but;
        MediaPlayer mp;
        int flag = 0;
        ImageView elepahant_img;
        private static Boolean isSoundPlaying=false;
        static SelectTalkTask mytask;
        AnimationDrawable drawable=null;
        AnimationDrawable drawable_one=null;
        AnimationDrawable drawable_two=null;

        public void onCreate(Bundle savedInstanceState) {        
                requestWindowFeature(Window.FEATURE_NO_TITLE);
                getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
                super.onCreate(savedInstanceState);
                setContentView(R.layout.talking_elephant_home);
                elepahant_img=(ImageView)findViewById(R.id.elephant_img);        
                elepahant_img.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                    isSoundPlaying = true;
                    release(drawable);
                    AnimationDrawable drawable = (AnimationDrawable) getResources().getDrawable(R.layout.water);
                    ImageView im = (ImageView) findViewById(R.id.elephant_img);
                    im.setBackgroundDrawable(drawable);
                    im.post(drawable);
                    play_water(); ///play the water
                    checkIfAnimationDone(drawable);
            }

            private void play_water() {
                    if(mp!=null){
                        mp.reset();
                        mp.release();
                    }
                    mp = MediaPlayer.create(Home.this,R.raw.water);
                    mp.start();
                }
        });

                drum_but=(Button)findViewById(R.id.drum_but);
                drum_but.setOnClickListener(this);

                hat_but=(Button)findViewById(R.id.cap_but);
                hat_but.setOnClickListener(this);

                ball_but=(Button)findViewById(R.id.ball_but);
                ball_but.setOnClickListener(this);

        }

      public void onClick(View v) {
        switch (v.getId()) {
        case R.id.ball_but:

            release(drawable);          
             Log.i("TAG", "this is ball_but"+isSoundPlaying);                        
                drawable = (AnimationDrawable) getResources().getDrawable(R.layout.elephant);
                elepahant_img = (ImageView) findViewById(R.id.elephant_img);
                elepahant_img.setBackgroundDrawable(drawable);
                elepahant_img.post(drawable);
                play();
                checkIfAnimationDone(drawable);
                break;                
        case R.id.drum_but:
            isSoundPlaying = true;
            release(drawable);           
             Log.i("TAG", "this is cap_but"+isSoundPlaying);
            drawable = (AnimationDrawable) getResources().getDrawable(R.layout.drum);
            elepahant_img = (ImageView) findViewById(R.id.elephant_img);            
            elepahant_img.setBackgroundDrawable(drawable);
            elepahant_img.post(drawable);
            play_one();
            checkIfAnimationDone(drawable);
            break;
        case R.id.cap_but:
            isSoundPlaying = true;
            release(drawable);           
             Log.i("TAG", "this is cap_but"+isSoundPlaying);
            drawable = (AnimationDrawable) getResources().getDrawable(R.layout.cap);
            elepahant_img = (ImageView) findViewById(R.id.elephant_img);    
            elepahant_img.setBackgroundDrawable(drawable);
            elepahant_img.post(drawable);
            play_two();
            checkIfAnimationDone(drawable);
            break;

        }

    }
      protected void play() {
            if(mp!=null){
                mp.reset();
                mp.release();
            }
            mp = MediaPlayer.create(Home.this,R.raw.ball);
            mp.start();
            }
    private void play_two() {
        if(mp!=null){
            mp.reset();
            mp.release();
        }
        mp = MediaPlayer.create(Home.this,R.raw.cap);
        mp.start();    
    }
    private void play_one() {
        if(mp!=null){
            mp.reset();
            mp.release();
        }
        mp = MediaPlayer.create(Home.this,R.raw.drums);
        mp.start();    
    }

    protected void onPause() {
        super.onPause();
        try{
        mp.stop();
        }catch (NullPointerException e) {
            e.printStackTrace();
        }
     }

     public boolean onKeyDown(int keyCode, KeyEvent event) {
            if (keyCode == KeyEvent.KEYCODE_BACK) {
                this.finish();            
                System.exit(0);
                return true;
            }
            return super.onKeyDown(keyCode, event);
        }     

        public void onDestroy() { 
            super.onDestroy();
            System.out.println("OnDestroy");             

            System.gc();
            Runtime.getRuntime().gc();
            */
            elepahant_img = (ImageView)findViewById(R.id.elephant_img);
            if (elepahant_img != null)
            {
                ((BitmapDrawable)elepahant_img.getDrawable()).getBitmap().recycle();
                elepahant_img.setImageDrawable(null);
            }
            System.gc();

            }

         public void release(AnimationDrawable ad){
             if(ad==null)
                 return;
             ad.stop();
             for (int i = 0; i < ad.getNumberOfFrames(); ++i){
                 Drawable frame = ad.getFrame(i);
                 if (frame instanceof BitmapDrawable) {

                     ((BitmapDrawable)frame).getBitmap().recycle();
                     }
               frame.setCallback(null);
                 frame=null;
             }
             ad.setCallback(null);
              ad=null;

         }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:30:18.233

当您尝试回收已回收的位图时，您可能会收到此错误。在框架的位图上调用回收之前添加一个空测试。

# tcp - 使用 apache camel 和 jetty 进行负载平衡 - 错误

> ID：11950303
> 
> 赞同：0
> 
> 时间：2012-08-14T10:24:07.797
> 
> 标签：tcp, jetty, load-balancing, apache-camel

我是骆驼的新手，并且已经阅读了骆驼在行动中的书。我正在开发一个创建负载均衡器的项目。此负载均衡器将通过端口 8080 上的 SOAP 消息从客户端获取请求。一旦获得请求，它会将这些请求转发到后端服务器。这些后端服务器将侦听端口 8080 的请求。一旦收到请求，它就会被提供服务，并通过负载均衡器将结果返回给客户端。后端服务器使用 apache tomcat。现在我想到了使用 apache camel 来路由这个场景。我下载了 fuseIDE 并使用 camel-archtype-java 创建了一个 maven 项目。并用骆驼写了一条基本路线，如下图：

```
**MainAPP.java**
package Catload.Loadcat;

import org.apache.camel.main.Main;

public class MainApp {

    /**
     * A main() so we can easily run these routing rules in our IDE
     */
    public static void main(String... args) throws Exception {
        Main main = new Main();
        main.enableHangupSupport();
        main.addRouteBuilder(new MyRouteBuilder());
        main.run(args);
    }

}

**MyRoutebuilder.java**

package Catload.Loadcat;

import org.apache.camel.builder.RouteBuilder;

public class MyRouteBuilder extends RouteBuilder {

    public void configure() {

            from("jetty://http://localhost:8080")
            .loadBalance().roundRobin().to("http://172.168.20.119:8080","http://172.168.20.118:8080");
    }

} 
```

现在，当我右键单击 MainApp.java 并在 FuseIDE 中选择作为 java 应用程序运行时，我得到了错误

```
Failed to create route route1: Route[[From[jetty://http://localhost:8080]] -> [LoadBalanceT... because of Failed to resolve endpoint: jetty://http://localhost:8080 due to: No component found with scheme: jetty 
```

当我在命令提示符下运行这个项目时

```
mvn install
mvn exec:java 
```

我收到以下错误消息：

```
[ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.2.1:java (d
efault-cli) on project Loadcat: An exception occured while executing the Java cl
ass. null: InvocationTargetException: Failed to create route route1: Route[[From
[jetty://http://localhost:8080]] -> [LoadBalanceT... because of Failed to resolv
e endpoint: jetty://http://localhost:8080 due to: No component found with scheme
: jetty -> [Help 1] 
```

我的 Pom 文件如下

```
<dependencies>
    <dependency>
      <groupId>org.apache.camel</groupId>
      <artifactId>camel-core</artifactId>
      <version>2.9.0.fuse-7-061</version>
    </dependency>
    <!-- logging -->
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-api</artifactId>
      <version>1.6.1</version>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-log4j12</artifactId>
      <version>1.6.1</version>
    </dependency>
    <dependency>
      <groupId>log4j</groupId>
      <artifactId>log4j</artifactId>
      <version>1.2.16</version>
    </dependency>

    <!-- testing -->
    <dependency>
      <groupId>org.apache.camel</groupId>
      <artifactId>camel-test</artifactId>
      <version>2.9.0.fuse-7-061</version>
      <scope>test</scope>
    </dependency>

    <dependency>  
       <groupId>org.mortbay.jetty</groupId>  
       <artifactId>jetty-maven-plugin</artifactId>    
       <version>8.0.1.v20110908</version>  
     </dependency>  
  </dependencies>

  <build>
    <defaultGoal>install</defaultGoal>

    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>

      <plugin>
             <groupId>org.mortbay.jetty</groupId>
             <artifactId>maven-jetty-plugin</artifactId>
             <version>6.1.7</version>
      </plugin> 

      <!-- allows the route to be ran via 'mvn camel:run' -->
      <plugin>
        <groupId>org.apache.camel</groupId>
        <artifactId>camel-maven-plugin</artifactId>
        <version>2.9.0.fuse-7-061</version>
      </plugin>

      <!-- Allows the example to be run via 'mvn compile exec:java' -->
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>exec-maven-plugin</artifactId>
        <version>1.2.1</version>
        <configuration>
            <mainClass>Catload.Loadcat.MainApp</mainClass>
            <includePluginDependencies>false</includePluginDependencies>
        </configuration>
      </plugin>

    </plugins>
  </build> 
```

使用来自 fuse 源的其他插件库。

我的问题是，

是不是，我在这里做的事情？这条路线行得通吗？如果不是，其他可能性是什么？骆驼可以做什么来支持我的项目需求？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:45:01.677

我通过在 POM 文件中添加以下依赖项来解决它：

```
<dependency>
<groupId>org.apache.camel</groupId>
<artifactId>camel-jetty</artifactId>
<version>2.10.0</version>
</dependency> 
```

希望它是有帮助的。

# javascript - Chrome：刷新页面+ javascript重定向后未呈现背景图像

> ID：11950306
> 
> 赞同：0
> 
> 时间：2012-08-14T10:24:14.230
> 
> 标签：javascript, css, google-chrome

我正在开发一个通过 ajax 加载页面的网站。我使用 #!/url 语法跟踪当前位置。如果在第一次加载页面时，该页面在 url 的哈希部分中已经有一个 url，我使用 javascript 重定向到该页面：

```
document.location = initialPage; 
```

我的内容由一堆具有 position:absolute 的 div 组成，它们以正确的顺序堆叠以进行显示。我的身体背景是一组使用 jQuery 幻灯片定期切换的图像。这适用于所有浏览器，除了（这是问题）在 Chrome 中我有时会丢失我的内容 div 的背景图像。最可靠的复制方法是：

*   转到一个页面：例如[http://epsilon.tabeoka.be/fr/gestiondeprojet](http://epsilon.tabeoka.be/fr/gestiondeprojet)
*   单击指向另一个页面的链接，例如“Offres d'emplois”，网址现在变为[http://epsilon.tabeoka.be/fr/gestiondeprojet#!/fr/offresdemplois](http://epsilon.tabeoka.be/fr/gestiondeprojet#!/fr/offresdemplois)
*   现在使用 Ctrl-F5 刷新
*   答对了！

请注意，如果您现在再次使用 Ctrl-F5 刷新，页面将再次看起来正常。在任何一种情况下，都没有在页面加载时运行的重要 javascript。背景滚动已初始化，但在没有背景的页面（项目页面）上也存在问题。我倾向于这是 Chrome 中的一个错误，但我需要这个工作。任何人都可以提出一些建议吗？

门诺

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:50:07.887

尝试在 CSS 上使用绝对路径作为背景。也许它可以帮助确定问题。

您也可以尝试在页面加载后将背景应用于块

```
$(document).ready{
  $("#content").css("background","url(../Images/Css/bg_content.png)");
} 
```

也可能这会有用。[当我请求像http://epsilon.tabeoka.be/fr/contacts](http://epsilon.tabeoka.be/fr/contacts)这样的示例页面时。浏览器做了 41-42 个请求并上传了所有图像。当我按照您的方式进行时（按下 Ctrl-F5）- 浏览器仅完成 31-33 请求。他不上传图片作为背景。看起来他认为他们已经上传了。

**因此，当我禁用 chrome 上的缓存时 - 错误消失了。**

也许您应该尝试将所有背景属性添加到您的页面而不是 CSS 中，并添加随机值，如下所示：

```
<style>
  #content {
    background:url(../Images/Css/bg_content.png?rnd=123124);
  }
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:00:19.457

如果它真的是一个 Chrome 错误（请参阅我对您的问题的评论），您可以尝试用 rgba 背景颜色替换您的背景图像。它更好，您可以为旧浏览器添加后备。

```
background-color: rgb(16,34,68);
background-color: rgba(16,34,68,.75); 
```

# c# - 无法附加对象，因为它已经在对象上下文中

> ID：11950310
> 
> 赞同：0
> 
> 时间：2012-08-14T10:24:36.553
> 
> 标签：c#, nhibernate

我试图更新数据库中的记录并且它出错，我知道条目在那里

```
 Order od = null;
            od = _session.Single<Order>(x => x.OrderId == OrderId);
            if (od != null)
            {
                od.PricePaid = svm.price;
                _session.Update(od);
                _session.CommitChanges(); 
```

但我得到

> 无法附加该对象，因为它已经在对象上下文中。一个对象只有在它处于未更改状态时才能重新附加。

请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:26:24.313

省略`_session.Update(od)`部分代码，它应该可以工作。

# iphone - 隐藏状态栏时区域被剪裁

> ID：11950311
> 
> 赞同：0
> 
> 时间：2012-08-14T10:24:39.700
> 
> 标签：iphone

我需要全屏显示视图控制器（模态segue）。我只是将状态栏隐藏在顶部。我在 viewcontroller 的 viewdidload 上调用此代码。

```
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationFade]; 
```

现在出现的一个问题是，在屏幕的最底部，区域被剪裁或像切割状态栏的大小一样。我该如何解决这个问题？

注意：我只想在我的应用程序中隐藏一个视图控制器的状态。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:30:15.343

隐藏状态栏的最简单方法（这适用于任何版本）是进入 Info.plist，右键单击添加一行并选择 Status Bar Initially hidden。

或者

```
[application setStatusBarHidden:YES withAnimation:UIStatusBarAnimationNone]; 
```

它对我有用。我也面临同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:50:41.547

![在此处输入图像描述](../Images/b509ed7d796ef5c281fe0e59253e3098.png)

最初在 PList 中隐藏您的状态栏。在 xib 中，单击视图，然后在检查器上将状态栏更改为**none**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:50:07.110

上面说的答案是正确的....但是要知道的是状态栏保留器高度为 20 像素，而 460 像素用于在视图控制器中查看。

检查一下。只需转到其中一个视图控制器。

单击**控制器视图**，其**框架**将为 **(0,0,320,460)**。其中**(0,0,320, 20) 表示状态栏**。请注意，视图大小在**高度**方面是**不可调整**的。如果我们在这里隐藏状态栏。然后查看实体的位置会更改实际预期位置，因为视图将被某些因素拉动。

 **点击选项卡你可以看到它的属性。将状态栏设置为无。现在视图的大小在所有方面都可以**调整****（即原点、宽度、高度）**。现在将视图框架更改为**(0,0,320,480)****

# c# - 如何以编程方式将数据添加到 WPF 数据网格

> ID：11950312
> 
> 赞同：8
> 
> 时间：2012-08-14T10:24:40.483
> 
> 标签：c#, wpf, datagrid

如何`DataGrid`在没有绑定的 WPF 中以编程方式将数据项添加到？有`DataGrid`4 列。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-14T11:32:56.380

不是很清楚，你喜欢做什么。我猜，你已经定义了一些你想放置 DataGrid 的地方。出于说明目的，我创建了一个新的 WPF 项目并使用 chridram 提供的代码，他发布了第一个答案。

在下面的 MainWindow.xaml 中，我将 Grid MainGrid 命名为在后面的代码中访问它：

```
<Window x:Class="WpfExperiments.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid Name="MainGrid"/>
</Window> 
```

DataItem 类不是 WPF 类，而是自己创建的自定义类：

```
public class DataItem
{
    public string Column1 { get; set; }
    public string Column2 { get; set; }
    public string Column3 { get; set; }
    public string Column4 { get; set; }
} 
```

要让 DataGrid 以编程方式显示存储在 DataItem 对象中的数据，您可以执行以下操作：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        // Your programmatically created DataGrid is attached to MainGrid here
        var dg = new DataGrid();
        this.MainGrid.Children.Add(dg);

        // create four columns here with same names as the DataItem's properties
        for (int i = 1; i <= 4; ++i)
        {
            var column = new DataGridTextColumn();
            column.Header = "Column" + i;
            column.Binding = new Binding("Column" + i);
            dg.Columns.Add(column);
        }

        // create and add two lines of fake data to be displayed, here
        dg.Items.Add(new DataItem { Column1 = "a.1", Column2 = "a.2", Column3 = "a.3", Column4 = "a.4" });
        dg.Items.Add(new DataItem { Column1 = "b.1", Column2 = "b.2", Column3 = "b.3", Column4 = "b.4" });
    }
} 
```

我希望这有帮助。

问候约尔格

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-02T07:51:16.343

这是我用来从数据库中检索数据的函数 `string query = "Select * from VWpatientinfo"; DataTable dataTableObject = new DataTable("Table Name");`

```
obj.DataRetrive(query,dataTableObject);
DataGridName.ItemsSource = dataTableObject.DefaultView; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-27T17:38:32.670

[![在此处输入图像描述](../Images/da63ad2cf9978df260386b76a78ec11a.png)](https://i.stack.imgur.com/TUPGW.png)

.xaml：

```
<DataGrid x:Name="dataGrid" Margin="10">
    <DataGrid.Columns>
        <DataGridCheckBoxColumn Binding="{Binding Path=Column1}"/>
        <DataGridTextColumn Binding="{Binding Path=Column2}"/>
    </DataGrid.Columns>
</DataGrid> 
```

。CS：

```
public class DataItem
{
    public bool Column1 { get; set; }
    public string Column2 { get; set; }
}

/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        DataItem item = new DataItem();
        item.Column1 = true;
        item.Column2 = "test";
        dataGrid.Items.Add(item);
    }
} 
```

# java - RabbitMQ 获取通道的消息速率

> ID：11950319
> 
> 赞同：0
> 
> 时间：2012-08-14T10:24:57.217
> 
> 标签：java, rabbitmq

我正在测试当您增加使用的交易所数量时某些因素会如何受到影响。一个很好的统计数据是特定频道上的消息率？以及消息从交换机到队列的传输率（如果可能）。

我知道 RabbitMQ 客户端应用程序有一个输出系统相关信息的状态命令，但我不确定是否有一个实用程序可以在 Web 界面之外查询此类信息。

有任何想法吗？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:51:00.097

管理界面有一个 CLI，它可以让您获得所需的详细信息，您可以在 Web 界面上查看，而无需在浏览器上进行检查。

# php - PHP/Zend：Ajax 分页：如何获取文件的路径，包括给定类对象中的类？还是从缓存中正确加载对象？

> ID：11950322
> 
> 赞同：0
> 
> 时间：2012-08-14T10:25:06.350
> 
> 标签：php, zend-framework, caching

首先，因为我不确定我的意思是否清楚：
我在函数中给出了一个类对象，我需要文件的路径，所以声明了这个类，因为这个对象存储在缓存中并加载它，我需要包含声明该类的文件以对其进行反序列化。

其次，这就是我正在尝试做的事情：
我正在尝试编写分页，模型类的对象，选择对象和限制给构造函数。基本分页已经工作，我现在正在尝试构建一个 ajax 分页，给定的对象和限制被缓存，并且请求应该由 ajax 请求加载以返回所需的数据。问题如上所述：我需要先包含包含文件，但我没有路径。

**问题：**
我如何获得包含课程的这条路径，或者你有什么想法我可以如何以不同的方式解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:19:59.010

**解决**
了我使用 ReflectionClass 来获取完整的文件路径：

```
$reflectionClass = new ReflectionClass($model);
$directory = $reflectionClass->getFileName(); 
```

$目录包含：

```
C:\Program Files (x86)\Zend\Apache2\htdocs\[...]\application\models\DbTable\BdUsers.php 
```

# c# - Sending bulk messages using serial port communication

> ID：11950324
> 
> 赞同：2
> 
> 时间：2012-08-14T10:25:09.857
> 
> 标签：c#, multithreading, sms, serial-port

I can send a message from my application by writing

```
port.WriteLine("AT+CMGS=\"" + m.Groups[2].Value + "\"");
port.Write(txt_msgbox.Text + char.ConvertFromUtf32(26)); 
```

This is fine. But now I want to send bulk messages to a group of numbers. I have this loop to send messages to a group of numbers:

```
foreach (ListViewItem item in bufferedListView1.Items)
{
    string lname = bufferedListView1.Items[i].Text;
    string lno = bufferedListView1.Items[i].SubItems[1].Text;
    string gname = bufferedListView1.Items[i].SubItems[2].Text;
    string line = lname + "@" + lno + "@" + gname;
    if (gname.Contains(sgroup))
    {
        var m = Regex.Match(line, @"([\w]+)@([+\d]+)@([\w]+)");
        if (m.Success)
        {
            port.WriteLine("AT+CMGS=\"" + m.Groups[2].Value + "\"");
            port.Write(txt_msgbox.Text + char.ConvertFromUtf32(26));
            Thread.Sleep(4000);
        }
        sno++;
    }
    i++;
} 
```

This works well too. But the issue is with the UI, becoming irresponsive for quite a good amount of time. Any better ways to do it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:56:46.723

Use a `BackgroundWorker` - they are really easy to use and manage the threading in an encapsulated manner. The benefit of this class is that it supports cancellation if you want to be able to cancel the process and it supports reporting progress, both of which I'll show here. Finally, the nice thing about this class is that when it reports progress it switches threads properly, ensuring you aren't writing to the UX on a separate thread - but the code inside the `DoWork` event handler is still managed correctly on a separate thread.

You would do something like the following.

```
// in this example this is scoped to the class, but just scope it appropriately
private BackgroundWorker worker = new BackgroundWorker();

......

// because I don't really know anything about how your program is structured I'm not sure
// where you want to place all of the definitions OR where you want to place RunWorkerAsync
// but you want the definitions to happen ONCE and the RunWorkerAsync to be where the USER
// initiates it

// this will allow you to consume the ProgressChanged event
worker.WorkerReportsProgress = true;

// this will allow you to set the CancellationPending property
worker.WorkerSupportsCancellation = true;

worker.DoWork += (o, args) =>
{
    foreach (ListViewItem item in bufferedListView1.Items) 
    { 
        string lname = bufferedListView1.Items[i].Text; 
        string lno = bufferedListView1.Items[i].SubItems[1].Text; 
        string gname = bufferedListView1.Items[i].SubItems[2].Text; 
        string line = lname + "@" + lno + "@" + gname; 
        if (gname.Contains(sgroup)) 
        { 
            var m = Regex.Match(line, @"([\w]+)@([+\d]+)@([\w]+)"); 
            if (m.Success) 
            { 
                port.WriteLine("AT+CMGS=\"" + m.Groups[2].Value + "\""); 
                port.Write(txt_msgbox.Text + char.ConvertFromUtf32(26)); 
                Thread.Sleep(4000); 
            } 
            sno++; 
        } 
        i++; 
    }
}

worker.ProgressChanged += (s, args) =>
{
    // set some progress here, the ProgressChangedEventArgs inherently supports an integer
    // progress via the ProgressPercentage property
}

worker.RunWorkerCompleted += (s, args) =>
{
    // with the RunWorkerCompletedEventArgs class you can check for errors via Error, did
    // cancellation occur via Cancelled, and you can even send a complex result via the Result
    // property - whatever you need
}

// this starts the work in the DoWork event handler
worker.RunWorkerAsync(); 
```

Here is a [link](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx) to Microsoft's documentation on this matter.

# javascript - 将样式表链接到 ID

> ID：11950328
> 
> 赞同：1
> 
> 时间：2012-08-14T10:25:26.933
> 
> 标签：javascript, jquery, html, css, stylesheet

我想知道是否有解决方案来实现这样的事情，其中​​样式表只对页面的一部分进行样式设置。

```
<link href="/Content/stylesheet.css" for="OnlyApplyStylesWithinHere" rel="stylesheet" type="text/css" />
<div id="OnlyApplyStylesWithinHere">
</div> 
```

我知道我可以从样式表本身中做到这一点，但这在我的场景中是不可能的。

这种效果可以用 Javascript/Jquery 来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:24:00.637

[如果样式表没有破坏相同的来源策略](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)，我让这个插件可以做你想做的事。

**你可以像这样使用它：**

```
<link rel="stylesheet" href="..." data-wrapper="#mySelector" />

<style data-wrapper="#mySelector">
    .ninja { 
        visibility: hidden;
    }
</style> 
```

**并在初始化后再次：**

```
$("link[rel='stylesheet']").addWrapperToStyle("#mySelector");

$("style").addWrapperToStyle("#mySelector"); 
```

* * *

```
 (function($) {
        var $styleSheet = $("<style type='text/css'/>").appendTo("head");

        function getStyle( $element, callback ) {
            callback($element.text());
        }
        function getLink( $element, callback ) {
            $.get($element.attr("href"), function( style ) {
                callback(style);
            });
        }
        function appendStyle( style ) {
            $styleSheet.text(function(i, text) {
                return text + "\n" + style;
            });
        }

        function wrapStyle( element, selector ) {
            var $element = $(element);

            if ( $element.is("style") ) {
                getStyle( $element, callback );
            } else {
                getLink( $element, callback );
            }

            function callback( style ) {
                if ( style ) {
                    style = ("" + style).replace(/([^}]+){/g, function(match) {
                        var matches = match.split(","),
                            i = 0,
                            len = matches.length;

                        for ( ; i < len; i++ ) {
                            matches[i] = selector + " " + $.trim(matches[i])
                        }

                        match = matches.join(",");

                        return match;
                    });

                    appendStyle(style);

                    $element.remove();
                }
            }
        }

        $(function() {
            $("link[rel='stylesheet'][data-wrapper], style[data-wrapper]").each(function() {
                wrapStyle( this, this.getAttribute("data-wrapper") );
            });
        });
        $.fn.addWrapperToStyle = function( wrapper ) {
            return this.each(function() {
                wrapStyle(this, wrapper);
            });
        } 
    })(jQuery); 
```

**我不确定跨浏览器的兼容性。不过你可以试试...**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:07:52.360

有一个 HTML5 特性，称为[scoped stylesheets](http://updates.html5rocks.com/2012/03/A-New-Experimental-Feature-style-scoped)；它是WHATWG 草案的[一部分](http://www.whatwg.org/specs/web-apps/current-work/multipage/semantics.html#attr-style-scoped)，但不存在浏览器支持（Chrome 通过 支持它`about:flags`，但没有开箱即用的支持）。您可以使用[此 javascript 插件](https://github.com/thingsinjars/jQuery-Scoped-CSS-plugin)使其工作。

或者，如果可以在服务器端重写样式表，您可以使用类似[SASS](http://sass-lang.com/)的东西：

```
#my-section {
    @import "local-copy-of-the-stylesheet.scss";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:30:48.360

检查媒体属性是否对您有帮助。media="handheld" 不会只为苹果定义 css，而是为所有小屏幕设备定义 css。

[http://www.w3schools.com/tags/att_link_media.asp](http://www.w3schools.com/tags/att_link_media.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T10:31:21.760

我们可以通过 3 种方式放置样式，

```
1)Internal 
```

将所有样式放在同一个html页面中，带有样式标签

```
2)External 
```

通过在 html 页面的 head 部分提供样式表的参考

```
3)In-line 
```

这可以使用 html 元素的样式属性来完成，即`<div style="some styles"></div>`

我认为以上任何人都可以解决您的疑问。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T11:23:10.543

我不相信你所要求的是可能的。

然而，一种比较*巧妙*的方法是将此 HTML 标记放入一个单独的文件中，并将样式表链接在 中`head`，然后使用`iframe`.

```
<head>
   <link href="[main stylesheet" />
   <link href="[this page only stylesheet]" />
</head> 
```

就像我说的那样，它很老套，但我认为这是不改变样式表的唯一方法。

# c# - 如何正确使用 Task.WhenAll()

> ID：11950329
> 
> 赞同：9
> 
> 时间：2012-08-14T10:25:30.763
> 
> 标签：c#, .net, asynchronous, .net-4.5, async-await

我正在尝试使用`Task.WhenAll`来等待多个任务的完成。

我的代码如下 - 它应该启动多个异步任务，每个任务都会检索一条公交路线，然后将它们添加到本地数组中。但是，`Task.WhenAll(...)`立即返回，并且本地路由数组的计数为零。这似乎很奇怪，因为我希望每个语句中的各种`await`语句都`Task`意味着流被暂停，并且`Task`直到它完成才返回。

```
List<Task> monitoredTasks = new List<Task>();
foreach (BusRouteIdentifier bri in stop.services)
{
    BusRouteRequest req = new BusRouteRequest(bri.id);

    // Start a new task to fetch the route for each stop
    Task getRouteTask = Task.Factory.StartNew(async () =>
    {
        var route = await BusDataProviderManager.DataProvider.DataBroker.getRoute(req);

            // Add the route to our array (on UI thread as it's observed)
            await dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, delegate
            {
                this.routes.Add(route);
            });
    });

    // Store the task in our monitoring list
    monitoredTasks .Add(getRouteTask);
}

Debug.WriteLine("Awaiting WHENALL");
await Task.WhenAll(monitoredTasks );
Debug.WriteLine(string.Format("WHENALL returned (routes count is {0} ", this.routes.Count));

this.OnWillEndFetchingRoutes(new EventArgs()); 
```

我显然做错了什么-但是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T11:01:52.290

这归结为对 async-await 的真正工作原理缺乏基本了解。

内部任务将流程返回到外部任务，然后在等待返回之前完成。

为了实现我想要的，我需要重构如下：

```
List<Task<BusRoute>> routeRetrievalTasks = new List<Task<BusRoute>>();
foreach (BusRouteIdentifier bri in stop.services)
{
    BusRouteRequest req = new BusRouteRequest(bri.id);
    routeRetrievalTasks.Add(BusDataProviderManager.DataProvider.DataBroker.getRoute(req));
}

foreach (var task in routeRetrievalTasks)
{
    var route = await task;
    this.routes.Add(route); // triggers events
} 
```

感谢[戴夫·斯密茨](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/51114ea5-0070-4285-b16e-231a895a6ad7)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T11:00:26.150

我怀疑问题出在您对`Task.Factory.StartNew()`. 我怀疑您最终会得到 a `Task<Task>`，而您只会发现它何时有效地*启动*了任务。

试试这个：

```
Func<Task> taskFunc = async () =>
{
    var route = await BusDataProviderManager.DataProvider.DataBroker.getRoute(req);

    // Add the route to our array (on UI thread as it's observed)
    await dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, delegate
    {
        this.routes.Add(route);
    });

}

Task getRouteTask = Task.Run(taskFunc); 
```

# java - 将包含的文件输出存储到变量中

> ID：11950336
> 
> 赞同：2
> 
> 时间：2012-08-14T10:25:50.360
> 
> 标签：java, jstl

我目前正在开发一个使用 JSP 的项目，但是我们远离使用 JSTL 并改用 Java。

我知道我们可以使用 JSTL

```
<c:set var="body">
<jsp:include page="...jsp"/>
</c:set>

<c:out value="${body}"/> 
```

然而，我们试图远离这种情况并使用纯 Java 实现。

无论如何我们可以刷新 JspWriter（out），将文件包含在 pageContext 中，然后将包含的内容存储到变量中？

来自 PHP 背景，我知道我们可以使用 ob_start 等，所以希望我们可以在 Java 中做同样的事情吗？

任何想法都会受到欢迎。

非常感谢

加文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:42:20.633

这是一个不寻常的问题。大多数时候，我们都在尝试摆脱 JSP 中的 java 代码。但是，如果你真的不想使用 JSTL，那么你可以试试这段代码。

```
<%@ page import="java.net.*,java.io.*"  %>
<%
   StringBuffer requestURL = request.getRequestURL();
   String servletPath = request.getServletPath();
   String contextURL = requestURL.substring(0, requestURL.indexOf(servletPath) + 1);
   URL url = new URL(contextURL + "otherPage.jsp");
   URLConnection conn = url.openConnection();
   BufferedReader in = new BufferedReader(new   InputStreamReader(conn.getInputStream()));
   String inputLine;
   StringBuilder sb = new StringBuilder();
   while ((inputLine = in.readLine()) != null)sb.append(inputLine);
   in.close();
   pageContext.setAttribute("otherPage", sb);
%>
${otherPage} 
```

# utf-8 - iTextSharp 和特殊字符（斯洛伐克字形）

> ID：11950338
> 
> 赞同：6
> 
> 时间：2012-08-14T10:26:01.537
> 
> 标签：utf-8, itext, pdf-generation, special-characters, encode

我在处理一些特殊的斯洛伐克语字符（例如 č、ň 和 ť）时遇到问题。它们正在 itextsharp 生成的 pdf 中消失。

据我所知，这个问题与我的`BaseFont`. 目前我正在使用这个：

```
BaseFont.CreateFont(BaseFont.HELVETICA, iTextSharp.text.pdf.BaseFont.CP1250, BaseFont.NOT_EMBEDDED) 
```

有人建议这应该有效：

```
BaseFont.CreateFont(BaseFont.HELVETICA, iTextSharp.text.pdf.BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED) 
```

但它抛出了这个异常错误：

```
System.ArgumentException was caught
Message='Identity-H' is not a supported encoding name.
Parameter name: name
ParamName=name
Source=mscorlib 
```

有人知道可能的原因和解决方案吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T18:28:50.067

问题在这里：

```
BaseFont.CreateFont(BaseFont.HELVETICA ... 
```

`BaseFont.HELVETICA`是[标准类型 1 字体](http://en.wikipedia.org/wiki/Portable_Document_Format#Standard_Type_1_Fonts_.28Standard_14_Fonts.29)，不能用于您的斯洛伐克字符。您需要使用具有正确字形的字体：

```
string FONT = "c:/windows/fonts/arialbd.ttf";
using (Document document = new Document()) {
  PdfWriter.GetInstance(document, STREAM);
  document.Open();
  BaseFont bf = BaseFont.CreateFont(
    FONT, BaseFont.IDENTITY_H, BaseFont.EMBEDDED
  );
  document.Add(new Paragraph("č, ň and ť", new Font(bf, 12)));
} 
```

# android - 在android上绘制图表是否需要使用第三方控件？

> ID：11950340
> 
> 赞同：2
> 
> 时间：2012-08-14T10:26:05.483
> 
> 标签：android, android-layout, charts

是否有必要使用任何第三方控件在 android 中创建条形图、饼图、气泡图等。如果是这样，我可以使用什么样的第三方控件？谁能让我知道这个概念至少一个示例程序。

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:32:11.840

1) [AChartEngine](http://code.google.com/p/achartengine/)是 Android 应用程序的图表库。它目前支持以下图表类型：

```
line chart
area chart
scatter chart
time chart
bar chart
pie chart
bubble chart
doughnut chart
range (high-low) bar chart
dial chart / gauge
combined (any combination of line, cubic line, scatter, bar, range bar, bubble) chart
cubic line chart 
```

2）您还可以使用另一个名为[ChartDroid](http://code.google.com/p/chartdroid/)的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:46:54.777

是的，您可以使用第三方库，但这不是必需的。

如果您对 Canvas 绘图感到满意，您可以创建自己的自定义视图来绘制您想要的任何图表类型。

当然，重新发明轮子并不是最好的主意，但有时搜索一个库、正确集成它并自定义图表，可能比你自己动手要花更多的时间。

# ios - 浮点数如何以十六进制表示？

> ID：11950343
> 
> 赞同：1
> 
> 时间：2012-08-14T10:26:09.330
> 
> 标签：ios, floating-point, type-conversion, hex

我正在将数据从 iPhone 传输到从设备，其中传输需要 16 位数据值。现在我有一个需要传输的浮点值，但我怎么知道它有多大，以及它是如何以十六进制表示的？

需要十六进制表示，因为我可能需要切换上下半字节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T02:57:50.850

在 iOS 设备上，浮点数与符号位、有偏指数和编码的有效数一起存储。

对于 32 位浮点数 ( `float`)，指数为 8 位，偏置 127，编码的有效位为 23 位。对于 64 位浮点数 ( `double`)，指数为 11 位，偏置 1023，编码的有效位为 52 位。

下面介绍 32 位浮点数。它来自记忆；我没有仔细检查过。64 位浮点数类似。

`unsigned int E = (union { float f; unsigned int u; }) { F }.u;`考虑一个浮点​​数F。用 定义 E。在 iOS 设备（和许多其他普通计算机）上，E 将包含 F 的编码，即表示它的位。

让我们成为`E>>31`。它是符号位。如果 F 为正（包括 +0）则为 0，如果 F 为负（包括 -0）则为 1。

让 e 成为`E>>23 & 0xff`。那是有偏的指数。无偏（实际）指数是 e-127。

设 f 为`E & 0x7fffff`。那是编码的有效数字。如果 0 < e < 255，则实际有效位为 1\. *f* [2]，其中*f*是 f 的 23 位，以二进制数字形式写入。因此，如果 f 为 0x600000，则 f 在二进制中为 1100000000000000000000 [2]，因此实际有效位为 1.1100000000000000000000 [2]，即 1.11 [2]，即 1+1/2+1/4 = 1.75。

这种编码表示的数字加起来是 (-1) ^s •2 ^(e-127) •1。*f* [2] . 因此，对于编码 0x40600000，s 为 0，e 为 0x100 = 128，f 为 1100000000000000000000 [2]，因此值为 (-1) ⁰ •2 ^(128-127) •1.75 = 1•2•1.75 = 3.5。

有一些特殊情况。如果 e 为 0，则实际有效数字为 0\. *f* [2]而不是 1\. *f* [2]。即隐含的 1 变为 0。注意，如果 f 为零，则表示的值为 0。符号对于浮点零仍然有意义；+0 和 -0 的行为略有不同。

如果 e 为 255 且 f 为 0，则表示的值是无限的，可以是 +infinity 或 -infinity，具体取决于符号。

如果 e 为 255 且 f 不为 0，则该值为 NaN，具有一些实现定义的语义。

要对浮点值进行编码，您需要确定符号，然后计算不大于该值大小的 2 的最大幂。2 的幂为您提供无偏指数。然后将值除以 2 的幂并将其四舍五入以适合有效数字，这就是有效数字。有一些特殊情况，当舍入将有效数推至 2（您必须调整指数）以及当指数大到足以下溢或小到足以下溢到非正规范围（低于偏置指数为 1 或更大）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T03:54:31.097

如果您想了解详细信息，请在网上查找[IEEE 浮点标准](http://en.wikipedia.org/wiki/IEEE_floating_point)。但要以十六进制表示，只需生成数字，获取各个字节，然后生成它们的十六进制表示。您需要知道的两件事是值的长度（例如，`sizeof(double)`）以及它是存储“大端”还是“小端”。iOS 设备总是“小端”，这意味着值的最低有效字节具有最低的内存地址。

获取字节的直接方法是创建一个or的 C`union`和一个适当长度的. 将浮点值存储到联合中，然后检索字节以转换为十六进制。您还可以使用适当指针类型的强制转换来执行此“别名”。`float``double``unsigned char``unsigned char`

```
union {
    float f;
    double d;
    unsigned char c[8];
} foo;

foo.d = 3.14156;
for(int i=0;i<8;i++) printf("%02X",foo.c[i]); 
```

**对于不能使用联合和别名的 Java 用户**，Float 和 Double 上有以下类方法：

```
Float.floatToRawIntBits(floatValue)
Double.doubleToRawLongBits(doubleValue) 
```

和他们的倒数

```
Float.intBitsToDouble(intValue)
Double.longBitsToDouble(longValue) 
```

请注意，它们*不会*进行类似强制转换的转换（例如，4.1 float*不会*转换为 4 int），而是将*位模式*不变地从 float 转换为 integer 格式。

# r - 将 R 包从 32 位安装到 64 位

> ID：11950345
> 
> 赞同：2
> 
> 时间：2012-08-14T10:26:11.130
> 
> 标签：r, ubuntu, 32bit-64bit

我有[这个 R 包](http://perswww.kuleuven.be/~u0043181/software/)（MRwarping_1.0.zip）。它安装在同事的 32 位 Windows PC 上，但无法安装在我的 64 位 ubuntu 上（并给出一个非常奇怪的错误消息）。我想知道是否

*   我可以安装它（在我的 64 位 ubuntu 上）。
*   如果是，那么需要哪些步骤来做到这一点

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T10:35:51.090

MRwarping_1.0.zip 是软件包的 Windows 二进制版本。您需要包源才能将其安装在 Windows 以外的任何设备上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-16T13:23:18.650

除了 Joshua 的回答之外，当我尝试安装一个用于 Linux 的二进制构建包时，这个错误也发生在我身上，但是以`.zip`格式而不是`.tar.gz`格式压缩。

所以，当你为 Linux 安装二进制包时，它必须是一个`.tar.gz`文件。您可以使用 7-zip 等工具解压缩`.zip`文件并将其重新压缩为`.tar.gz`. 或者，使用`unzip ZIPFILE`将 zip 解压缩到文件夹中并将文件夹`tar -czf package.tar.gz FOLDER`重新压缩为`.tar.gz`-file。

# import - org.apache.felix:maven-bundle-plugin 和 Export-Package/Import-Package 的问题

> ID：11950349
> 
> 赞同：0
> 
> 时间：2012-08-14T10:26:37.380
> 
> 标签：import, osgi, package, apache-felix, spring-dm

我正在尝试通过指定通配符来配置**maven-bundle-plugin如何导入/导出包。**`*`下面的配置导致**没有包被导出或导入**......

有人有任何线索吗？

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>osgi.org.springframework.batch</groupId>
    <artifactId>spring-batch-core</artifactId>
    <version>2.1.8.RELEASE</version>
     <packaging>bundle</packaging>
    <dependencies>
        <dependency>
            <groupId>org.springframework.batch</groupId>
            <artifactId>spring-batch-core</artifactId>
            <version>2.1.8.RELEASE</version>
            <scope>compile</scope>
            <optional>true</optional>
        </dependency>
    </dependencies>
    <build>
        <defaultGoal>install</defaultGoal>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-shade-plugin</artifactId>
                <version>1.7.1</version>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>shade</goal>
                        </goals>
                        <configuration>
                            <artifactSet>
                                <includes>
                                    <include>org.springframework.batch:spring-batch-core</include>
                                </includes>
                            </artifactSet>
                            <filters>
                                <filter>
                                    <artifact>org.springframework.batch:spring-batch-core</artifact>
                                    <excludes>
                                        <exclude>**</exclude>
                                    </excludes>
                                </filter>
                            </filters>
                            <promoteTransitiveDependencies>true</promoteTransitiveDependencies>
                            <createDependencyReducedPom>true</createDependencyReducedPom>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-bundle-plugin</artifactId>
                <version>2.3.7</version>
                <extensions>true</extensions>
                <configuration>
                    <instructions>
                        <Bundle-SymbolicName>osgi.org.springframework.batch</Bundle-SymbolicName>
                        <Export-Package>*</Export-Package>
                        <Import-Package>*</Import-Package>
                    </instructions>
                    <unpackBundle>true</unpackBundle>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

编辑：我得到的确切信息是

```
karaf@root> package:import  181
spring-batch-core (181): No active imported packages. 
```

因为捆绑包未激活。

编辑：当我启动捆绑包时，我得到了这个：

```
karaf@root> osgi:start 181
org.osgi.framework.BundleException: Unresolved constraint in bundle osgi.org.springframework.batch [181]: Unable to resolve 181.0: missing requirement
 [181.0] package; (package=bsh) 
```

编辑：如果我只使用弹簧批处理核心，我会在启动时系统地收到此错误：

```
karaf@root> Exception in thread "SpringOsgiExtenderThread-2" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'j
obRepository': Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: com/thoughtworks/xstream/io/HierarchicalStreamDri
ver
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1422)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:518)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:455)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
        at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.access$1600(AbstractDelegatedExecutionApplicationCont
ext.java:69)
        at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext$4.run(AbstractDelegatedExecutionApplicationContext.ja
va:355)
        at org.springframework.osgi.util.internal.PrivilegedUtils.executeWithCustomTCCL(PrivilegedUtils.java:85)
        at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.completeRefresh(AbstractDelegatedExecutionApplication
Context.java:320)
        at org.springframework.osgi.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor$CompleteRefreshTask.run(Dependen
cyWaiterApplicationContextExecutor.java:132)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NoClassDefFoundError: com/thoughtworks/xstream/io/HierarchicalStreamDriver
        at org.springframework.batch.core.repository.dao.JdbcExecutionContextDao.afterPropertiesSet(JdbcExecutionContextDao.java:169)
        at org.springframework.batch.core.repository.support.JobRepositoryFactoryBean.createExecutionContextDao(JobRepositoryFactoryBean.java:206)
        at org.springframework.batch.core.repository.support.AbstractJobRepositoryFactoryBean.getTarget(AbstractJobRepositoryFactoryBean.java:190)
        at org.springframework.batch.core.repository.support.AbstractJobRepositoryFactoryBean.initializeProxy(AbstractJobRepositoryFactoryBean.java:17
9)
        at org.springframework.batch.core.repository.support.AbstractJobRepositoryFactoryBean.afterPropertiesSet(AbstractJobRepositoryFactoryBean.java
:186)
        at org.springframework.batch.core.repository.support.JobRepositoryFactoryBean.afterPropertiesSet(JobRepositoryFactoryBean.java:157)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1479
)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1419)
        ... 14 more
Caused by: java.lang.ClassNotFoundException: com.thoughtworks.xstream.io.HierarchicalStreamDriver not found by org.springframework.batch.core [85]
        at org.apache.felix.framework.ModuleImpl.findClassOrResourceByDelegation(ModuleImpl.java:787)
        at org.apache.felix.framework.ModuleImpl.access$400(ModuleImpl.java:71)
        at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.loadClass(ModuleImpl.java:1768)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        ... 22 more
Exception in thread "SpringOsgiExtenderThread-4" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jobRepository
': Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: com/thoughtworks/xstream/io/HierarchicalStreamDriver
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1422)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:518)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:455)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
        at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.access$1600(AbstractDelegatedExecutionApplicationCont
ext.java:69)
        at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext$4.run(AbstractDelegatedExecutionApplicationContext.ja
va:355)
        at org.springframework.osgi.util.internal.PrivilegedUtils.executeWithCustomTCCL(PrivilegedUtils.java:85)
        at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.completeRefresh(AbstractDelegatedExecutionApplication
Context.java:320)
        at org.springframework.osgi.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor$CompleteRefreshTask.run(Dependen
cyWaiterApplicationContextExecutor.java:132)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NoClassDefFoundError: com/thoughtworks/xstream/io/HierarchicalStreamDriver
        at org.springframework.batch.core.repository.dao.JdbcExecutionContextDao.afterPropertiesSet(JdbcExecutionContextDao.java:169)
        at org.springframework.batch.core.repository.support.JobRepositoryFactoryBean.createExecutionContextDao(JobRepositoryFactoryBean.java:206)
        at org.springframework.batch.core.repository.support.AbstractJobRepositoryFactoryBean.getTarget(AbstractJobRepositoryFactoryBean.java:190)
        at org.springframework.batch.core.repository.support.AbstractJobRepositoryFactoryBean.initializeProxy(AbstractJobRepositoryFactoryBean.java:17
9)
        at org.springframework.batch.core.repository.support.AbstractJobRepositoryFactoryBean.afterPropertiesSet(AbstractJobRepositoryFactoryBean.java
:186)
        at org.springframework.batch.core.repository.support.JobRepositoryFactoryBean.afterPropertiesSet(JobRepositoryFactoryBean.java:157)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1479
)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1419)
        ... 14 more
Caused by: java.lang.ClassNotFoundException: com.thoughtworks.xstream.io.HierarchicalStreamDriver not found by org.springframework.batch.core [85]
        at org.apache.felix.framework.ModuleImpl.findClassOrResourceByDelegation(ModuleImpl.java:787)
        at org.apache.felix.framework.ModuleImpl.access$400(ModuleImpl.java:71)
        at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.loadClass(ModuleImpl.java:1768)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        ... 22 more 
```

编辑：

```
karaf@root> package:export 57
    ID Packages
    57 com.thoughtworks.xstream; version=0.0.0
    57 com.thoughtworks.xstream.alias; version=0.0.0
    57 com.thoughtworks.xstream.annotations; version=0.0.0
    57 com.thoughtworks.xstream.converters; version=0.0.0
    57 com.thoughtworks.xstream.converters.basic; version=0.0.0
    57 com.thoughtworks.xstream.converters.collections; version=0.0.0
    57 com.thoughtworks.xstream.converters.enums; version=0.0.0
    57 com.thoughtworks.xstream.converters.extended; version=0.0.0
    57 com.thoughtworks.xstream.converters.javabean; version=0.0.0
    57 com.thoughtworks.xstream.converters.reflection; version=0.0.0
    57 com.thoughtworks.xstream.core; version=0.0.0
    57 com.thoughtworks.xstream.core.util; version=0.0.0
    57 com.thoughtworks.xstream.io; version=0.0.0
    57 com.thoughtworks.xstream.io.binary; version=0.0.0
    57 com.thoughtworks.xstream.io.copy; version=0.0.0
    57 com.thoughtworks.xstream.io.json; version=0.0.0
    57 com.thoughtworks.xstream.io.path; version=0.0.0
    57 com.thoughtworks.xstream.io.xml; version=0.0.0
    57 com.thoughtworks.xstream.io.xml.xppdom; version=0.0.0
    57 com.thoughtworks.xstream.mapper; version=0.0.0
    57 com.thoughtworks.xstream.persistence; version=0.0.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:35:31.150

为什么你需要这样做？spring-batch-core 已经是一个 OSGi 就绪包，不是吗？检查该 jar 中的 MANIFEST.MF。我刚刚查找了 spring-batch 的 2.0.4.RELEASE 并且从我看到它已经是一个捆绑包。

# c# - Asp.Net Web API 中带有字典参数的方法

> ID：11950351
> 
> 赞同：9
> 
> 时间：2012-08-14T10:26:47.183
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-web-api

我需要向包含 Dictionary 作为参数的方法发出 GET 请求。我浏览但找不到任何关于如何发送 Dictionary 的信息，所以我的请求命中了我的方法。方法签名如下

```
public void AddItems(Dictionary<string,object> Items) 
```

此致，

凯末尔

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-14T10:36:22.617

你读过[ASP.NET Wire Format for Model Binding to Arrays, Lists, Collections, Dictionaries](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T06:56:27.720

我写了一个 ModelBinder 完全符合你的要求：

```
public class DictionaryModelBinder : DefaultModelBinder
{
    private const string _dateTimeFormat = "dd/MM/yyyy HH:mm:ss";

    private enum StateMachine
    {
        NewSection,
        Key,
        Delimiter,
        Value,
        ValueArray
    }

    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var stream = controllerContext.HttpContext.Request.InputStream;
        string text;

        stream.Position = 0;
        using (var reader = new StreamReader(stream))
        {
            text = reader.ReadToEnd();
        }

        int index = 0;
        return Build(text, ref index);
    }

    private static Dictionary<string, object> Build(string text, ref int index)
    {
        var state = StateMachine.NewSection;
        var dictionary = new Dictionary<string, object>();
        var key = string.Empty;
        object value = string.Empty;

        for (; index < text.Length; ++index)
        {
            if (state == StateMachine.NewSection && text[index] == '{')
            {
                dictionary = new Dictionary<string, object>();
                state = StateMachine.NewSection;
            }
            else if (state == StateMachine.NewSection && text[index] == '"')
            {
                key = string.Empty;
                state = StateMachine.Key;
            }
            else if (state == StateMachine.Key && text[index] != '"')
            {
                key += text[index];
            }
            else if (state == StateMachine.Key && text[index] == '"')
            {
                state = StateMachine.Delimiter;
            }
            else if (state == StateMachine.Delimiter && text[index] == ':')
            {
                state = StateMachine.Value;
                value = string.Empty;
            }
            else if (state == StateMachine.Value && text[index] == '[')
            {
                state = StateMachine.ValueArray;
                value = value.ToString() + text[index];
            }
            else if (state == StateMachine.ValueArray && text[index] == ']')
            {
                state = StateMachine.Value;
                value = value.ToString() + text[index];
            }
            else if (state == StateMachine.Value && text[index] == '{')
            {
                value = Build(text, ref index);
            }
            else if (state == StateMachine.Value && text[index] == ',')
            {
                dictionary.Add(key, ConvertValue(value));
                state = StateMachine.NewSection;
            }
            else if (state == StateMachine.Value && text[index] == '}')
            {
                dictionary.Add(key, ConvertValue(value));
                return dictionary;
            }
            else if (state == StateMachine.Value || state == StateMachine.ValueArray)
            {
                value = value.ToString() + text[index];
            }
        }

        return dictionary;
    }

    private static object ConvertValue(object value)
    {
        string valueStr;
        if (value is Dictionary<string, object> || value == null || (valueStr = value.ToString()).Length == 0)
        {
            return value;
        }

        bool boolValue;
        if (bool.TryParse(valueStr, out boolValue))
        {
            return boolValue;
        }

        int intValue;
        if (int.TryParse(valueStr, out intValue))
        {
            return intValue;
        }

        double doubleValue;
        if (double.TryParse(valueStr, out doubleValue))
        {
            return doubleValue;
        }

        valueStr = valueStr.Trim('"');

        DateTime datetimeValue;
        if (DateTime.TryParseExact(valueStr, _dateTimeFormat, CultureInfo.InvariantCulture, DateTimeStyles.None, out datetimeValue))
        {
            return datetimeValue;
        }

        if (valueStr.First() == '[' && valueStr.Last() == ']')
        {
            valueStr = valueStr.Trim('[', ']');
            if (valueStr.Length > 0)
            {
                if (valueStr[0] == '"')
                {
                    return valueStr
                        .Split(new[] { '"' }, StringSplitOptions.RemoveEmptyEntries)
                        .Where(x => x != ",")
                        .ToArray();
                }
                else
                {
                    return valueStr
                        .Split(',')
                        .Select(x => ConvertValue(x.Trim()))
                        .ToArray();
                }
            }
        }

        return valueStr;
    }
} 
```

您可以在我的博客中看到更多解释和完整帖子：

[Json To Dictionary 通用模型绑定器](http://amiryonatan.blogspot.co.il/2013/01/json-to-dictionary-generic-model-binder.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-05T14:23:43.710

如果您在 webApi 控制器中接收 Dictionary 时遇到问题，相对简单的解决方案是将参数切换到 List<"ObjectRepresentingDict"> insetead。它会自动映射。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-02-11T06:33:47.933

您可以通过这种方式使用字典作为参数：

```
protected object DictionaryFunction()
{
    Dictionary<int,YourObjectName> YourDictionaryObjectName=new Dictionary<int,YourObjectName>();
    ...
    ...

    return YourDictionaryObjectName;
}

protected MyFunction()
{
    Dictionary<int,YourObjectName> MyDictionary=(Dictionary<int,YourObjectName>)DictionaryFunction();
} 
```

# php - 在 TWIG 中循环的方法是什么？

> ID：11950352
> 
> 赞同：0
> 
> 时间：2012-08-14T10:26:48.373
> 
> 标签：php, twig

在我看来，我需要对数字进行四舍五入。但是那里使用了树枝。在 TWIG 中循环的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T10:31:27.220

您可以使用[格式](http://twig.sensiolabs.org/doc/filters/format.html)过滤器：

{{ '%.2f' | 格式（10.5555）}}

但请注意，它将舍入到 10.56。

也可以使用[number_filter](http://twig.sensiolabs.org/doc/filters/number_format.html)

# php - CakePHP / PHP Json 解码 URL 响应

> ID：11950355
> 
> 赞同：-3
> 
> 时间：2012-08-14T10:27:04.383
> 
> 标签：php, json, cakephp, twitter

对于一个 URL，我试图通过这个 API 请求来计算它的推文：

```
http://urls.api.twitter.com/1/urls/count.json?url=http://www.bbc.co.uk 
```

这（在浏览器中）返回以下 Json：

```
{"count":216743,"url":"http:\/\/www.bbc.co.uk\/"} 
```

我可以手动解析响应：

```
$tweets = json_decode('{"count":216743,"url":"http:\/\/www.bbc.co.uk\/"}');
$this->set('tweets', $tweets->{'count'}); 
```

当我输入 URL 而不是 Json 时，它不会请求任何数据。我将如何使以下工作？

```
$tweets = json_decode('http://urls.api.twitter.com/1/urls/count.json?url=http://www.bbc.co.uk');
$this->set('tweets', $tweets->{'count'}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T10:30:32.120

`json_decode`期望得到一个 JSON 字符串。`http://urls.api.twitter.com/1/urls/count.json?url=http://www.bbc.co.uk`不是 JSON 字符串，而是 URL。`json_decode`不获取 URL。您需要自己获取 URL，然后将结果传递给`json_decode`：

```
$json = file_get_contents('http://urls.api.twitter.com/1/urls/count.json?url=http://www.bbc.co.uk');
$tweets = json_decode($json); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T10:30:48.627

您不能`json_encode()`直接在 URL 上使用。首先获取页面的内容（例如使用`file_get_contents`- [docu link](http://php.net/manual/en/function.file-get-contents.php)），然后尝试对其进行解码：

```
$content = file_get_contents('http://urls.api.twitter.com/1/urls/count.json?url=http://www.bbc.co.uk');
$tweets = json_decode( $content );

// do your stuff 
```

# android - 当我在单击按钮后尝试显示 HelloWorld 时，Android 应用程序崩溃

> ID：11950363
> 
> 赞同：0
> 
> 时间：2012-08-14T10:27:36.647
> 
> 标签：android

我编写了一个简单的应用程序，它应该显示一个按钮，当单击该按钮时，它将显示文本：'Hello World' - 但是它现在所做的只是崩溃。

XML 是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/hello"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text=""
        tools:context=".GraphicsActivity" />

    <Button xmlns:android="http://schemas.android.com/apk/res/android" 
        android:id="@+id/button_send"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Write Something..."
        android:onClick="writeMsg" />
</RelativeLayout> 
```

安卓源码在这里：

```
public class GraphicsActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_graphics);
    }

    public void WriteMsg() {

        Button button = (Button) findViewById(R.id.button_send);
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                TextView tv = (TextView) findViewById(R.id.hello);
                tv.setText("Hello World");
                setContentView(tv);
            }
        });
    }
} 
```

正如我所说，它所做的只是崩溃。顺便说一句，我在模拟器中运行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:37:29.917

您的代码有几个问题。
a) 首先，如果您决定将点击事件附加到 XML 代码中的 Button，则被调用的方法应该带有一个`View`参数。

签名应该是这样的：

```
public void WriteMsg(View view) {
} 
```

b) 其次，方法的名称应该与 onClick 属性的值相匹配。
实际上你在 XML 中有这个：

```
android:onClick="writeMsg" 
```

这是方法的声明：

```
public void WriteMsg() 
```

注意第一个字母大写。

c) 最后一个，不需要在方法`button_send`内部设置点击监听器`WriteMsg()`。您已经通过声明`onClick`属性附加了一个单击事件侦听器。这可能会导致其他问题。

因此，您要么删除该`onClick`属性，要么删除`button_send`在`WriteMsg`方法中设置侦听器的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:34:29.267

试试这个

```
public class GraphicsActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_graphics);
        Button button = (Button) findViewById(R.id.button_send);
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                TextView tv = (TextView) findViewById(R.id.hello);
                tv.setText("Hello World");
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:34:17.673

例外是在

> android:onClick="writeMsg"

但您的活动具有 onclick 功能，如 `WriteMsg`. 将其更改为小写`writeMsg`。你很可能得到方法未找到异常

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T10:31:23.117

```
public class GraphicsActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_graphics);
        Button button = (Button) findViewById(R.id.button_send);
        WriteMsg();
    }

    public void WriteMsg() {
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                TextView tv = (TextView) findViewById(R.id.hello);
                tv.setText("Hello World");
                setContentView(tv);
            }
        });
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T10:31:50.170

尝试这个

```
 TextView tv = (TextView) findViewById(R.id.hello); 
```

将其写入您的方法中`onCreate()`。`Toast`并在您的按钮的“onClickListener()”中使用。

```
 Toast.makeText(getApplicationContext(), "Discard", 10000).show(); 
```

这将帮助你

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T11:10:56.703

```
public class MainActivity extends Activity {

public TextView tv;
public Button btn_click;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    btn_click = (Button) findViewById(R.id.button1);
    tv = (TextView) findViewById(R.id.textView1);

    btn_click.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            writeText("Text to display");
        }
    });

}

private void writeText(String string) {
    tv.setText(string);
} 
```

}

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-14T10:33:22.540

```
TextView tv = (TextView) findViewById(R.id.hello); 
```

尝试在按钮而不是整个布局中找到您的文本视图（因为方法属于按钮）。你应该这样做：

```
public void WriteMsg() {

    Button button = (Button) findViewById(R.id.button_send);
    final TextView tv = (TextView) findViewById(R.id.hello);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            tv.setText("Hello World");

        }
    });

    } 
```

# php - CSS + jQ 插件阻止 AJAX 调用/事件监听器工作？

> ID：11950370
> 
> 赞同：0
> 
> 时间：2012-08-14T10:27:57.853
> 
> 标签：php, javascript, jquery, html, css

我现在已经让 superfish 工作了，它阻止了 ajax 调用（或者更确切地说是事件侦听器）触发，当我注释掉插件的初始化时，调用了该事件，但是它检索了错误的数据集。jsFiddle：

[http://jsfiddle.net/dFwn7/1/](http://jsfiddle.net/dFwn7/1/)

知道为什么打电话：

```
jQuery(function(){
    jQuery('ul.sf-menu').superfish();
}); 
```

导致事件监听器（表单提交）失败？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:10:31.310

最有可能：这是因为你的鱼在被调用之前没有被定义。

任何未定义的方法实际上都会破坏您的代码，例如：

[http://jsfiddle.net/dFwn7/2/](http://jsfiddle.net/dFwn7/2/)

确保在调用之前添加自定义方法。

或者，插件本身有错误（也有可能）；

# ruby-on-rails - 验证多态关联模型中的范围唯一性

> ID：11950373
> 
> 赞同：15
> 
> 时间：2012-08-14T10:28:05.960
> 
> 标签：ruby-on-rails

对，所以我有一个多态关联，允许收藏不同的对象类型。所以一个人可以喜欢一个产品，一个人，或者其他什么。我想要做的是防止有人使用验证收藏模型中的唯一性来复制收藏。

```
class Favorite < ActiveRecord::Base
 belongs_to :favoritable, :polymorphic => true
 belongs_to :user

 attr_accessible :user

 validates_presence_of :user
 validates :user_id, :uniqueness => { :scope => [:favoritable_type, :favoritable_id] }
end 
```

验证似乎正在工作，但无论出于何种原因，当尝试复制条目时，仍会使用 user_id 创建一个新的收藏行。

![在此处输入图像描述](../Images/e2931adbae91022973d5b6ca0d2216e9.png)

有没有办法停止这个初始保存？

似乎 Rails 正在创建数据库条目，然后使用 favouritable_id 和 favouritable_type 更新它，如下所示：

```
 SQL (28.3ms)  INSERT INTO "favorites" ("created_at", "favoritable_id", "favoritable_type", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Tue, 14 Aug 2012 10:26:31 UTC +00:00], ["favoritable_id", nil], ["favoritable_type", nil], ["updated_at", Tue, 14 Aug 2012 10:26:31 UTC +00:00], ["user_id", 23]]
   (7.8ms)  COMMIT
   (0.1ms)  BEGIN
  Favorite Exists (0.3ms)  SELECT 1 AS one FROM "favorites" WHERE ("favorites"."user_id" = 23 AND "favorites"."id" != 123 AND "favorites"."favoritable_type" = 'Style' AND "favorites"."favoritable_id" = 29) LIMIT 1
   (0.2ms)  UPDATE "favorites" SET "favoritable_id" = 29, "favoritable_type" = 'Style', "updated_at" = '2012-08-14 10:26:31.943937' WHERE "favorites"."id" = 123
   (6.7ms)  COMMIT
   (0.1ms)  BEGIN 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-14T11:06:24.057

如果您仔细观察，您会发现唯一性验证工作正常 :)

```
validates :user_id, :uniqueness => { :scope => [:favoritable_type, :favoritable_id] } 
```

查看您添加的数据图像。在内部图像中，您可以发现第二条记录没有，`favouritable`而第一条记录不同，因此 2 条记录是唯一的，它不是问题，`uniqueness`而是您的逻辑差距。

如果您严格希望避免第二次输入，请保留`favouritable`为必填字段

```
validates :favoritable_type, :favoritable_id, :presence => true 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-07T09:43:47.153

```
class Favorite < ActiveRecord::Base

  belongs_to :user
  belongs_to :favoritable, polymorphic: true

  validates :user_id, :favoritable_id, presence: true,
    numericality: { only_integer: true }

  validates :favoritable_type, presence: true,
    inclusion: { 
      in: %w(FirstModelName SecondModelName),
      message: "%{value} is not a valid" 
    }

  validates :user_id, uniqueness: { scope: [ :favoritable_type, :favoritable_id ] }
end 
```

# python - 将颜色图应用于 mpl_toolkits.mplot3d.Axes3D.bar3d

> ID：11950375
> 
> 赞同：6
> 
> 时间：2012-08-14T10:28:12.393
> 
> 标签：python, plot, matplotlib

Axes3D 的 bar3d 函数有一个“颜色”参数，它可以接受数组来为各个条形着色不同的颜色 - 但是我如何以与 plot_surface 函数相同的方式应用颜色图（即 cmap = cm.jet）？这将使某个高度的条形图成为反映其高度的颜色。

[http://matplotlib.sourceforge.net/examples/mplot3d/hist3d_demo.html](http://matplotlib.sourceforge.net/examples/mplot3d/hist3d_demo.html)

[http://matplotlib.sourceforge.net/mpl_toolkits/mplot3d/api.html](http://matplotlib.sourceforge.net/mpl_toolkits/mplot3d/api.html)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-08-07T15:53:34.077

跟进 Ferguzz 提供的答案，这是一个更完整/最新的解决方案：

```
import matplotlib.colors as colors
import matplotlib.cm as cm

dz = height_values
offset = dz + np.abs(dz.min())
fracs = offset.astype(float)/offset.max()
norm = colors.Normalize(fracs.min(), fracs.max())
color_values = cm.jet(norm(fracs.tolist()))
ax.bar3d(xpos,ypos,zpos,1,1,dz, color=color_values) 
```

请注意以下几点：

*   您应该将所有变量（例如 xpos、ypos）定义为类似于[https://matplotlib.org/examples/pylab_examples/hist_colormapped.html中的代码](https://matplotlib.org/examples/pylab_examples/hist_colormapped.html)

*   normalize() 现在是 Normalize()

*   fracs 是 Series 类型（来自 pandas），必须转换为 list

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T13:26:06.717

这是我的解决方案：

```
offset = dz + np.abs(dz.min())
fracs = offset.astype(float)/offset.max()
norm = colors.normalize(fracs.min(), fracs.max())
colors = cm.jet(norm(fracs))

ax.bar3d(xpos,ypos,zpos,1,1,dz, color=colors) 
```

仅当您的数据变为负数时才需要第一行。

代码改编自这里[http://matplotlib.sourceforge.net/examples/pylab_examples/hist_colormapped.html](http://matplotlib.sourceforge.net/examples/pylab_examples/hist_colormapped.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T12:45:53.680

您可以将颜色数组传递给 facecolors 参数，它可以为表面中的每个色块设置颜色。

```
from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm
from matplotlib.ticker import LinearLocator, FormatStrFormatter
import matplotlib.pyplot as plt
import numpy as np

fig = plt.figure()
ax = fig.gca(projection='3d')
X = np.arange(-5, 5, 0.25)
Y = np.arange(-5, 5, 0.25)
X, Y = np.meshgrid(X, Y)
R = np.sqrt(X**2 + Y**2)
Z = np.sin(R)
colors = np.random.rand(40, 40, 4)
surf = ax.plot_surface(X, Y, Z, rstride=1, cstride=1, facecolors=colors,
        linewidth=0, antialiased=False)
ax.set_zlim(-1.01, 1.01)

ax.zaxis.set_major_locator(LinearLocator(10))
ax.zaxis.set_major_formatter(FormatStrFormatter('%.02f'))

plt.show() 
```

![在此处输入图像描述](../Images/fdadeffc89a163ade460d1688aaae021.png)

# vbscript - 如何重置对象“数据”？

> ID：11950378
> 
> 赞同：0
> 
> 时间：2012-08-14T10:28:17.133
> 
> 标签：vbscript

例如，在字符串变量中`H`，`G`我有 html 内容：

```
Set oHtmlFile = CreateObject("HtmlFile")
oHtmlFile.write H

<do some parsing on oHtmlFile object>

oHtmlFile.write G
... 
```

如果我在上面做现在`oHTMLFile`包含两者`H`和`G`内容。

如何`oHtmlFile`在写入`G`数据之前重置对象，而不创建新对象（`CreateObject("HtmlFile")`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:15:42.477

如果没有有关您现实世界问题的更多详细信息，就很难提出好的/实用的建议。理论上，您可以通过使用 .inner/outerHTLM 和 .innerTEXT 等属性或调用 .create*、.remove* 或 .append* 等函数来操作 oHtmlFile 的文档树。

在代码中：

```
 Dim oDOM  : Set oDOM = CreateObject("HTMLFILE")
  Dim sHTML : sHTML    = "<html><head></head><body></body></html>"
  WScript.Echo "Empty", TypeName(oDOM), "oDOM"
  dumpDoc oDOM

  oDOM.write sHTML
  WScript.Echo "After .write", qq(sHTML)
  dumpDoc oDOM

  sHTML = "<p>G</p><p>H</p>"
  oDOM.childNodes(0).childNodes(1).innerHTML = sHTML
  WScript.Echo "After setting body's .innerHTML to", qq(sHTML)
  dumpDoc oDOM

  sHTML = "pipapo"
  oDOM.childNodes(0).childNodes(1).childNodes(1).innerTEXT = sHTML
  WScript.Echo "After changing second P's .innerTEXT to", qq(sHTML)
  dumpDoc oDOM

  oDOM.childNodes(0).childNodes(1).removeChild oDOM.childNodes(0).childNodes(1).childNodes(0)
  WScript.Echo "After deleting first P"
  dumpDoc oDOM

  Dim oNode : Set oNode = oDOM.createElement("h1")
  oNode.appendChild oDOM.createTextNode("tritratrulala")
  oDOM.childNodes(0).childNodes(1).appendChild oNode
  WScript.Echo "After using DOM to append an H1"
  dumpDoc oDOM

  sHTML = "<span>abracadabra</span>"
  oDOM.childNodes(0).childNodes(1).childNodes(0).outerHTML = sHTML
  WScript.Echo "After overwriting first P's outerHTML", qq(sHTML)
  dumpDoc oDOM

Sub dumpDoc(oDOM)
  If oDOM.documentElement Is Nothing Then
     WScript.Echo "", "oDOM.documentElement Is Nothing"
     WScript.Echo "", "oDOM.childNodes.length", oDOM.childNodes.length
  Else
     WScript.Echo "", "oDOM.documentElement:",  oDOM.documentElement.tagName
     WScript.Echo "", "oDOM.childNodes.length", oDOM.childNodes.length
     dumpTree oDOM.documentElement, 2
  End If
  WScript.Echo "-----------------"
End Sub

Sub dumpTree(oNode, nL)
  Select Case oNode.nodeType
    Case 1
      WScript.Echo Space(nL), oNode.nodeType, oNode.tagName, qq(Replace(oNode.innerHTML, vbCrLf, ""))
      Dim oChild
      For Each oChild In oNode.childNodes
          dumpTree oChild, nL + 1
      Next
    Case 3
      WScript.Echo Space(nL), oNode.nodeType, oNode.nodeName, qq(Replace(oNode.nodeValue, vbCrLf, ""))
  End Select
End Sub 
```

输出：

```
demoHtmlFile - demo HtmlFile
===============================================================================
Empty HTMLDocument oDOM
 oDOM.documentElement Is Nothing
 oDOM.childNodes.length 0
-----------------
After .write "<html><head></head><body></body></html>"
 oDOM.documentElement: HTML
 oDOM.childNodes.length 1
   1 HTML "<HEAD></HEAD><BODY></BODY>"
    1 HEAD ""
     1 TITLE ""
    1 BODY ""
-----------------
After setting body's .innerHTML to "<p>G</p><p>H</p>"
 oDOM.documentElement: HTML
 oDOM.childNodes.length 1
   1 HTML "<HEAD></HEAD><BODY><P>G</P><P>H</P></BODY>"
    1 HEAD ""
     1 TITLE ""
    1 BODY "<P>G</P><P>H</P>"
     1 P "G"
      3 #text "G"
     1 P "H"
      3 #text "H"
-----------------
After changing second P's .innerTEXT to "pipapo"
 oDOM.documentElement: HTML
 oDOM.childNodes.length 1
   1 HTML "<HEAD></HEAD><BODY><P>G</P><P>pipapo</P></BODY>"
    1 HEAD ""
     1 TITLE ""
    1 BODY "<P>G</P><P>pipapo</P>"
     1 P "G"
      3 #text "G"
     1 P "pipapo"
      3 #text "pipapo"
-----------------
After deleting first P
 oDOM.documentElement: HTML
 oDOM.childNodes.length 1
   1 HTML "<HEAD></HEAD><BODY><P>pipapo</P></BODY>"
    1 HEAD ""
     1 TITLE ""
    1 BODY "<P>pipapo</P>"
     1 P "pipapo"
      3 #text "pipapo"
-----------------
After using DOM to append an H1
 oDOM.documentElement: HTML
 oDOM.childNodes.length 1
   1 HTML "<HEAD></HEAD><BODY><P>pipapo</P><H1>tritratrulala</H1></BODY>"
    1 HEAD ""
     1 TITLE ""
    1 BODY "<P>pipapo</P><H1>tritratrulala</H1>"
     1 P "pipapo"
      3 #text "pipapo"
     1 H1 "tritratrulala"
      3 #text "tritratrulala"
-----------------
After overwriting first P's outerHTML "<span>abracadabra</span>"
 oDOM.documentElement: HTML
 oDOM.childNodes.length 1
   1 HTML "<HEAD></HEAD><BODY><SPAN>abracadabra</SPAN><H1>tritratrulala</H1></BODY>"
    1 HEAD ""
     1 TITLE ""
    1 BODY "<SPAN>abracadabra</SPAN><H1>tritratrulala</H1>"
     1 SPAN "abracadabra"
      3 #text "abracadabra"
     1 H1 "tritratrulala"
      3 #text "tritratrulala"
----------------- 
```

(qq()、nodeType 常量，以及避免这些的策略

```
oDOM.childNodes(0).childNodes(1).removeChild oDOM.childNodes(0).childNodes(1).childNodes(0) 
```

讨厌的东西留作练习）

# c# - Html.DropdownList(allsundaysinmonth) 设置默认为刚刚过去的星期日

> ID：11950381
> 
> 赞同：0
> 
> 时间：2012-08-14T10:28:32.883
> 
> 标签：c#, asp.net-mvc, model-view-controller

我不知道如何解决这个问题，但我的下拉列表代码如下所示：

在行动中：

```
 DateTime[] allSundaysInMonth = GetDatesOfSundays(System.DateTime.Now);
  DateTime[] allSundaysInLastMonth = GetDatesOfSundays(System.DateTime.Now.AddDays(-30)); 
  List<SelectListItem> listOfSundays = new List<SelectListItem>();
  foreach (DateTime dt in allSundaysInThisMonth)
  {
    listOfSundays.Add(new SelectListItem
    {
      Text = dt.Name,
      Value = dt.Id.ToString(),
      Selected = dt.CompanyId == Id
    });

    return listOfSundays;
  } 
```

我需要取上个月的最后两个星期天和本月的所有星期天，但不是未来的星期天，并用所有这些星期天建立一个清单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:34:01.233

这是我在过去的项目中所做的

```
public List<SelectListItem> CompanySelectList(List<Company> companyList, int selectedId = 0)
    {
        List<SelectListItem> listToReturn = new List<SelectListItem>();
        foreach (Company c in companyList)
        {
            listToReturn.Add(new SelectListItem
            {
                Text = c.CompanyName,
                Value = c.CompanyId.ToString(),
                Selected = c.CompanyId == selectedId
            });
        }
        return listToReturn;
    } 
```

只需修改您的 T 以便它返回您需要的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:31:24.157

您可以查看当前日期并开始向下循环，如果返回的日期是星期天，则设置要选择的此值。

# php - ZendFramework 2.0.0rc3 形式

> ID：11950387
> 
> 赞同：0
> 
> 时间：2012-08-14T10:29:00.297
> 
> 标签：php, forms, validation, zend-framework2

我尝试使用表单进行验证，但我无法收到错误消息。

//这是我的代码：

```
$form = new TestForm();
$form->setInputFilter(new TestFilter());
$data = array('id'=>'','email'=>'myemail@myemail.com');
$form->setData($data);

if($form->isValid()){
    echo 'ok';
} else {
echo 'not ok <br/>';
$messagesForm = $form->getMessages();
$filter=$form->getInputFilter();
$messagesFilter=$filter->getMessages();
var_dump($messagesForm);
var_dump($messagesFilter);
}

/////////////////
Output
not ok
//messagesForm

    array
     empty
//MessagesFilter
    array
    'id' => 
    array
      'isEmpty' => string 'Value is required and can't be empty' (length=36) 
```

_

怎么可能？过滤器没问题，但我无法从表单中收到错误消息可能是错误或我做错了什么？

完整代码：

测试过滤器：_

```
<?php
namespace mvc\filter;  
use Zend\InputFilter\InputFilter;  
use Zend\InputFilter\Factory as InputFactory;  

class TestFilter extends InputFilter  
{  
        public function __construct()  
        {  
            $factory = new InputFactory();  
            $this->add($factory->createInput(array('name'=>'id','required'=>true)));  
            $this->add($factory->createInput(array('name'=>'email','required'=>true)));  
        }  
}  
?> 
```

_

TestForm _
命名空间 mvc\form;
使用 Zend\InputFilter\Factory；
使用 Zend\Form\Element；
使用 Zend\Form\Form；

```
class TestForm extends Form  
{  
public function prepareElements()  
{  
    $this->add(array(  
        'name' => 'id',  
        'attributes' => array(  
            'type'  => 'text',  
            'label' => 'Your name',  
        ),  
    ));  

        $this->add(array(  
        'name' => 'email',  
        'attributes' => array(  
            'type'  => 'email',  
            'label' => 'Your email address',  
            ),  
        ));  
    }  
}  
?> 
```

_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:16:01.000

您必须指定“验证器”，例如 getInputFilter：

```
use
Zend\InputFilter\InputFilter,
Zend\InputFilter\Factory as InputFactory,
Zend\InputFilter\InputFilterAwareInterface,
Zend\InputFilter\InputFilterInterface;

class User implements InputFilterAwareInterface
{
public function getInputFilter()
{
    if (!$this->inputFilter) {
        $inputFilter = new InputFilter();

        $factory = new InputFactory();

        $inputFilter->add($factory->createInput(array(
            'name'     => 'email',
            'required' => true,
            'filters'  => array(
                array('name' => 'StripTags'),
                array('name' => 'StringTrim'),
            ),
            'validators' => array(
                array(
                    'name'    => 'StringLength',
                    'options' => array(
                        'encoding' => 'UTF-8',
                        'min'      => 1,
                        'max'      => 100,
                    ),
                ),
            ),
        )));
      $this->inputFilter = $inputFilter;        
    }

    return $this->inputFilter;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:22:47.177

我还没有使用过 ZF2，但尝试将[验证器](https://github.com/zendframework/zf2/tree/master/library/Zend/Validator)添加到您的元素中：

```
use  Zend\Validator;
$this->add(array(  
    'name' => 'id',  
    'attributes' => array(  
        'type'  => 'text',  
        'label' => 'Your name',  
    ),
    'validator' => new StringLength(array('max'=>20))
));  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:36:14.200

您可以通过从模型中检索输入过滤器然后将其设置为表单来做到这一点：

```
...
$form = new ItemForm();
$form->setInputFilter($user->getInputFilter());
$form->setData($params);
if ($form->isValid()) {
  ...
}
... 
```

# ruby-on-rails - 在多对多情况下未创建外键 rails3 - 创建“键”而不是“外键”

> ID：11950390
> 
> 赞同：0
> 
> 时间：2012-08-14T10:29:20.287
> 
> 标签：ruby-on-rails, ruby-on-rails-3, database-design, foreign-keys, data-modeling

我想创建外键，但我无法创建它们（teacher_id，course_id 的外键）。

请查看代码 - 我应该更改什么来生成外键？

案例应用=学校

***脚步：***

**安慰：**

```
rails new school
rails g model teacher name:string
rails g model course name:string
rails g model teachercourse teacher_id:integer course_id:integer 
```

**向模型添加代码：**

```
class Course < ActiveRecord::Base
  attr_accessible :name
  has_many :teachers, through: :teachercourse
end

class Teacher < ActiveRecord::Base
  attr_accessible :name
  has_many :courses, through: :teachercourse
end

class Teachercourse < ActiveRecord::Base
  attr_accessible :course_id, :teacher_id
  belongs_to :course
  belongs_to :teacher
end 
```

**向迁移添加代码：**

```
class CreateTeachercourses < ActiveRecord::Migration
  def change
    create_table :teachercourses do |t|
      t.integer :teacher_id
      t.integer :course_id

      t.timestamps
    end
    add_index :teacher_id
    add_index :course_id
  end
end 
```

**安慰：**

```
rake db:migrate
rake db:schema:load 
```

**mysql db innodb 部分转储（teacher_id、course_id 没有外键）：**

```
CREATE TABLE IF NOT EXISTS `courses` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `teachercourses` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `teacher_id` int(11) DEFAULT NULL,
  `course_id` int(11) DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `index_teachercourses_on_course_id` (`course_id`),
  KEY `index_teachercourses_on_teacher_id` (`teacher_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `teachers` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1 ; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T11:03:47.293

只是建议进行一些更改以改进您的代码，但根据这个 SO 问题，@Sandip 的答案是正确的：[为什么 Rails 迁移在应用程序中定义外键而不在数据库中定义外键？](https://stackoverflow.com/questions/928425/why-do-rails-migrations-define-foreign-keys-in-the-application-but-not-in-the-da)

### 楷模

```
class Course < ActiveRecord::Base
  attr_accessible :name
  has_many :teachercourses
  has_many :teachers, through: :teachercourses
end

class Teacher < ActiveRecord::Base
  attr_accessible :name
  has_many :teachercourses
  has_many :courses, through: :teachercourses
end

class Teachercourse < ActiveRecord::Base
  attr_accessible :course_id, :teacher_id
  belongs_to :course
  belongs_to :teacher
end 
```

### 迁移

```
class CreateTeachercourses < ActiveRecord::Migration
  def change
    create_table :teachercourses do |t|
      t.integer :teacher_id
      t.integer :course_id

      t.timestamps
    end
    add_index :teachercourses, :teacher_id
    add_index :teachercourses, :course_id
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T10:50:42.407

默认情况下，rails 不会为任何关联生成外键。如果您认为您应该在 DB 中有 foreign_keys，那么您需要手动添加它们。

# c#-4.0 - 无法使用 iTextSharp 将 HTML (http://www.google.co.in/) 转换为 PDF

> ID：11950394
> 
> 赞同：1
> 
> 时间：2012-08-14T10:29:36.543
> 
> 标签：c#-4.0, itextsharp

我正在使用 iTextSharp 将 HTML（源站点是 google：[http](http://www.google.co.in/) ://www.google.co.in/ ）转换为 PDF。

我的代码：

```
protected void Page_Load(object sender, EventArgs e)
{  
    WebClient wc = new WebClient();
    string HTMLCode = wc.DownloadString("http://www.google.co.in/");
    var result = createPDF(HTMLCode);            
}

private MemoryStream createPDF(string html)
{
    MemoryStream msOutput = new MemoryStream();
    TextReader reader = new StringReader(html);

    // step 1: creation of a document-object
    Document document = new Document(PageSize.A4, 30, 30, 30, 30);

    // step 2:
    // we create a writer that listens to the document
    // and directs a XML-stream to a file
    PdfWriter writer = PdfWriter.GetInstance(document, msOutput);

    // step 3: we create a worker parse the document
    HTMLWorker worker = new HTMLWorker(document);

    // step 4: we open document and start the worker on the document
    document.Open();
    worker.StartDocument();

    // step 5: parse the html into the document
    worker.Parse(reader);

    // step 6: close the document and the worker
    worker.EndDocument();
    worker.Close();
    document.Close();

    return msOutput;           
} 
```

我已经从[这里](https://stackoverflow.com/questions/2822843/itextsharp-html-to-pdf)提到了 createPDF 函数。

但我遇到以下错误

> 无法将“iTextSharp.text.html.simpleparser.CellWrapper”类型的对象转换为“iTextSharp.text.Paragraph”类型。

iTextSharp 库有问题吗？顺便说一句，我正在使用**itextsharp-dll-core-5.3.0**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:03:57.257

没人听！HTMLWorker

*   已过时。
*   不会被维护。
*   它已被 XML-Worker 取代。

# python - 在 gtksource.view 中搜索并突出显示？

> ID：11950395
> 
> 赞同：0
> 
> 时间：2012-08-14T10:29:40.740
> 
> 标签：python, search, gtk3, gtksourceview

Gedit 使用搜索突出显示。我知道 Gedit 使用 gtksourceview，并且想知道该搜索机制是如何实现的。

# android - 获取联系人按数字显示图片

> ID：11950405
> 
> 赞同：0
> 
> 时间：2012-08-14T10:30:29.820
> 
> 标签：android, android-contentprovider

我正在开发一个 Android 应用程序。在我的应用程序中，我必须显示联系人显示名称和显示图片。为了按号码获取联系人显示名，我使用以下代码。

```
 public String getContactDisplayNameByNumber(String number) {
    Uri uri = Uri.withAppendedPath(ContactsContract.PhoneLookup.CONTENT_FILTER_URI, Uri.encode(number));
    String name = " ";

    ContentResolver contentResolver = getContentResolver();
    Cursor contactLookup = contentResolver.query(uri, new String[] {BaseColumns._ID,
            ContactsContract.PhoneLookup.DISPLAY_NAME }, null, null, null);

    try {
        if (contactLookup != null && contactLookup.getCount() > 0) {
            contactLookup.moveToNext();
            name = contactLookup.getString(contactLookup.getColumnIndex(ContactsContract.Data.DISPLAY_NAME));

            //String contactId = contactLookup.getString(contactLookup.getColumnIndex(BaseColumns._ID));
        }
    } finally {
        if (contactLookup != null) {
            contactLookup.close();
        }
    }

    return name;
} 
```

它工作正常。请帮助我获得这样的联系显示图片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:50:01.960

以下代码对我有用。

```
public Drawable getContactDisplaypicByNumber(String number) {
    Uri uri = Uri.withAppendedPath(ContactsContract.PhoneLookup.CONTENT_FILTER_URI, Uri.encode(number));

    String contactId = null;
    InputStream input = null;
    String[] projection = new String[] {
            ContactsContract.PhoneLookup.DISPLAY_NAME,
            ContactsContract.PhoneLookup._ID};
        Drawable d=null;

    ContentResolver contentResolver = getContentResolver();
    Cursor contactLookup = contentResolver.query(uri,projection, null, null, null);

    if (contactLookup.moveToFirst()) {
        contactId = contactLookup.getString(contactLookup.getColumnIndex(ContactsContract.PhoneLookup._ID));

        Uri uri1 = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, Long.parseLong(contactId));
        input = ContactsContract.Contacts.openContactPhotoInputStream(contentResolver, uri1);

    }
    else {

        Log.v("ffnet", "Started uploadcontactphoto: Contact Not Found @ " + number);

        return d; // contact not found

    }

    if (input == null) {
        Log.v("ffnet", "Started uploadcontactphoto: No photo found, id = " + contactId + " name = " + name);
        d=getResources().getDrawable(R.drawable.ic_launcher);
        return d; // no photo
    } else {

        Log.v("ffnet", "Started uploadcontactphoto: Photo found, id = " + contactId + " name = " + name);
        d=Drawable.createFromStream(input, "");
        System.out.println("ddddddddddddddddddddddddddddddddd"+d);
        return d;
    }

} 
```

# xpath - 处理 selenium webdriver 中的重复 ID

> ID：11950408
> 
> 赞同：6
> 
> 时间：2012-08-14T10:30:34.447
> 
> 标签：xpath, html-parsing, webdriver, selenium-webdriver

我正在尝试使用 selenium webdriver 自动化一些测试。我正在与在其 html 中使用重复 ID 的第三方登录提供商 (OAuth) 打交道。结果，我无法正确“找到”输入字段。当我只选择一个 ID 时，我得到了错误的 ID。

这个问题[已经回答了 JQuery](https://stackoverflow.com/questions/482763/jquery-to-check-for-duplicate-ids-in-a-dom)。但我想要一个可以在 Selenium webdriver 中工作的答案（我假设使用 Xpath）。

关于这个问题的其他问题，答案通常说“你不应该在 html 中有重复的 id”。在那里向合唱团讲道。我无法控制相关网页。如果是这样，我会正确使用 class 和 id 并以这种方式解决问题。

因为我不能那样做。我可以使用 xpath 等获得哪些选项？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T12:15:31.517

你可以通过 driver.find_element_by_id 来做到这一点，例如你的重复“duplicate_ID”在“div_ID”里面是唯一的：

```
driver.find_element_by_id("div_ID").find_element_by_id("duplicate_id") 
```

对于另一个 div 下的其他重复 ID：

```
driver.find_element_by_id("div_ID2").find_element_by_id("duplicate_id") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T12:41:29.747

**这个 XPath 表达式**：

```
//div[@id='something'] 
```

选择XML 文档中的*所有* `div`元素，其`id`属性的字符串值为字符串“something”。

**这个 Xpath 表达式**：

```
count(//div[@id='something']) 
```

产生`div`由第一个 XPath 表达式选择的元素的数量。

**而这个 XPath 表达式**：

```
(//div[@id='something'])[3] 
```

`div`选择上面第一个 XPath 表达式选择的第三个（按文档顺序）元素。

**一般**：

```
(//div[@id='something'])[$k] 
```

选择第`$k`-th 个这样的`div`元素（`$k`必须用正整数替换）。

有了这些知识，就可以得到任何属性具有字符串值“某物”的特定`div`对象`id`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T12:09:49.293

您正在研究哪种语言？重复的 id 应该不是问题，因为您几乎可以使用 xpath 获取任何属性，而不仅仅是 id 标记。其他语言的语法会略有不同（如果您想要 Ruby 以外的其他语言，请告诉我），但您可以这样做：

```
driver.find_element(:xpath, "//input[@id='loginid']" 
```

您构建 xpath 定位器的方式如下：从 html 代码中，您可以选择任何属性：

```
<input id="gbqfq" class="gbqfif" type="text" value="" autocomplete="off" name="q"> 
```

例如，假设您想使用**name**属性使用上面的 html 代码（Google 的搜索框）构建您的 xpath。您的 xpath 将是：

```
 driver.find_element(:xpath, "//input[@name='q']" 
```

换句话说，当 id 相同时，只需获取另一个可用属性！

**改进：**

为了避免脆弱的 xpath 定位器，例如 XML 文档中的顺序（可以轻松更改），您可以使用更健壮的东西。两个 xpath 定位器而不是一个。这在处理非常相似的 hmtl 标签时也很有用。您可以通过 2 个属性来定位一个元素，如下所示：

```
driver.find_element(:id, 'amount') and driver.find_element(xpath: "//input[@maxlength='50']") 
```

或者如果您愿意，可以在纯 xpath 一个衬里：

```
//input[@id="amount" and @maxlength='50'] 
```

或者（如果您的 xpath 将只返回一个唯一元素），您可以在抽象级别再上一层；完全省略属性值：

`//input[@id and @maxlength]`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-04T04:48:37.870

[它没有在http://selenium-python.readthedocs.io/locating-elements.html](http://selenium-python.readthedocs.io/locating-elements.html)中列出，但我可以访问一个方法`find_elements_by_id`

这将返回具有重复 ID 的所有元素的列表。

```
links = browser.find_elements_by_id("link")
for link in links:
    print(link.get_attribute("href")) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-27T13:33:51.097

您应该使用 driver.findElement(By.xpath() 但是在使用 firebug 定位元素时，您应该为特定元素选择绝对路径而不是获取相对路径，这就是即使使用重复 ID 也将获取元素的方式

# jquery - 如何以简单的方式从对象中检索数据？

> ID：11950409
> 
> 赞同：0
> 
> 时间：2012-08-14T10:30:35.990
> 
> 标签：jquery

我有一个对象，其中包含 2 个名称参数 - 请参见下面的示例。我知道要到达我需要遍历对象的数据，但我觉得这太烦人了。有没有更好的方法以简单的方式获取数据？

```
var obj = {[[[{name:'one'},{name:'two'}]]]};

$.each(obj,function(i,val){
    var first = [] // i will get first time
    $.each(first, function(i, val){
        var second = [] //i will get second time and third later fourth  // like so?
    })
}) 
```

这是否意味着我应该循环该`each`函数四次以获取`name`值？如果是这样，哪种方法是正确的？有没有办法使用相同的函数来获取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:44:07.747

### 你`obj`的无效。

所以，试试这个：

```
var obj = [[[{
        name: 'one'},
    {
        name: 'two'}]]];

$.each(obj[0][0], function() {
  alert( this.name );
}); 
```

**[演示](http://jsfiddle.net/FnG3Q/1/)**

* * *

## 另一个（适用于任何级别的数组）

```
var obj = [[[{
    name: 'one'},
{
    name: 'two'}]]];

function getObject(obj) {
    if (Object.prototype.toString.call(obj[0]) == '[object Array]') {
        getObject(obj[0]);
    } else {
        $.each(obj, function() {
            alert(this.name);
        });
    }
}

getObject(obj);​ 
```

**[演示](http://jsfiddle.net/FnG3Q/3/)**

* * *

### 笔记

`{}`始终包含`key : value`配对数据。因此，在您的情况下`{ [ .. ] }`是无效的对象格式。一些正确的对象格式可能是：

```
{ key1: value1, key2: value2, .. }

{ data: [{key1: value1}, {key2: value2}] } 
```

## 建议

If you've option then change the format of your `obj` like below:

```
var obj = [
   { name: 'one' },
   { name: 'two' }
]; 
```

And try following code simply:

```
$.each(obj, function() {
  alert( this.name );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:46:11.080

You should search with a recursive function. You can through your object with n tables.

```
var obj = [[[[{name:'one'},{name:'two'}]]]];

function troughTables(table){
    if(table instanceof Array && table.length == 1){
        troughTables(table[0]);
        return;
    }

    console.log("here is a content table");
}

troughTables(obj) 
```

With this you can have much tables but the condition is the length must be 1.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:58:45.267

You can serialize this object to JSON and get data with regexp.

Also you can use to flatten arrays:

```
jQuery.map(obj, function(n){return n}) 
```

And you will get result like:

```
[{name:'one'},{name:'two'}] 
```

# c# - MVC + 将值从一个控制器传递到另一个控制器

> ID：11950410
> 
> 赞同：1
> 
> 时间：2012-08-14T10:30:39.270
> 
> 标签：c#, asp.net-mvc, facebook

我是 MVC 的新手，想在这里获得一些关于如何将变量值从一个控制器传递到另一个控制器的建议。基本上，我想要实现的是执行 Facebook 身份验证，并且在成功身份验证后，我应该获取**AccessToken**值和我想将其传递给另一个控制器的完整路径变量值，以便使用新视图进行进一步处理。我不确定到目前为止我所做的是否有意义：

我有一个 ActionResult 方法（简化以使其更清晰），如下所示：

```
[HttpPost]
public ActionResult Index(string facebookUID, string facebookAccessTok)
{
    string fbUID = facebookUID;
    string fbAcess = facebookAccessTok;
    var fullpath = "";

    string uploadPath = Server.MapPath("~/upload");
    fullpath = uploadPath + "\\ProfilePic.png";

    return null;
} 
```

在我的索引视图中：

```
<script type="text/javascript">
    var uid = 0;
    var accesstoken = '';

    function grantPermission() {
        window.FB.login(function (response) {
            if (response.authResponse) {
                uid = response.authResponse.userID;
                accesstoken = response.authResponse.accessToken;
                var postData = { facebookUID: uid, facebookAccessTok: accesstoken };
                $.ajax({
                    type: 'POST',
                    data: postData,
                    success: function () {
                        // process the results from the controller action
                        window.location.href = "Publish";
                    }
                });
            } else {
                alert('User cancelled login');
            }
        }, { scope: 'publish_stream' });
    }; 
```

在上面的视图中，我重定向到另一个页面调用“**发布**”，它的控制器索引 ActionResult 需要**fbAcess**和**完整路径**变量值以进行进一步处理。请建议我如何传递这些值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:38:29.667

使用重定向：

```
[HttpPost]
public ActionResult Index(string facebookUID, string facebookAccessTok)
{
    string fbUID = facebookUID;
    string fbAcess = facebookAccessTok;
    var fullpath = "";

    string uploadPath = Server.MapPath("~/upload");
    fullpath = uploadPath + "\\ProfilePic.png";

    return RedirectToAction("Publish", "TheOtherController", new { fbAccess = fbAccess, fullpath = fullpath });
}

public class TheOtherController : Controller
{
    public ActionResult Publish(string fbAccess, string fullpath)
    {
        // Do whatever you want
        //
    }
} 
```

如果您使用标准表单将数据提交给该`Index`方法，则此方法有效。如果要保持Ajax发送数据，修改代码如下：

```
[HttpPost]
public ActionResult Index(string facebookUID, string facebookAccessTok)
{
    string fbUID = facebookUID;
    string fbAcess = facebookAccessTok;
    var fullpath = "";

    string uploadPath = Server.MapPath("~/upload");
    fullpath = uploadPath + "\\ProfilePic.png";

    var redirectUrl = new UrlHelper(Request.RequestContext).Action("Publish", new { fbAcess = fbAcess, fullpath = fullpath });
    return Json(new { Url = redirectUrl });
} 
```

在您的客户端代码中：

```
$.ajax({ type: 'POST',
         data: postData,
         dataType: 'json',
         success: function (response) {               
             window.location.href = response.Url;
         }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:38:15.077

验证成功后，调用以下方法

```
return RedirectToAction("ActionName", "Controller", new {variable1 = value1, variable2 = value2/*...etc*/}); 
```

# jquery - 带有 socket.io 的小型多人 POF

> ID：11950411
> 
> 赞同：0
> 
> 时间：2012-08-14T10:30:39.110
> 
> 标签：jquery, node.js, socket.io

我正在尝试使用 socket.io 创建一个小型 POF，其想法是每个连接的玩家都会获得一个球，并且可以将其拖放到浏览器视图中；然后其他连接的人可以看到它在移动，也可以移动他们自己的。

目前，该应用程序只有一个球，每个玩家都可以控制它，代码如下：

```
var express = require('express');
var app = express();

var server = app.listen(80);
var io = require('socket.io').listen(server);

var posx = 10;
var posy = 10;

app.configure(function() {
    app.use(express.static(__dirname + '/public'));
});

io.sockets.on('connection', function (socket) {
    socket.emit('start', {
        x: posx,
        y: posy
    });

    socket.on('newpos', function (data) {
        posx = data["x"];
        posy = data["y"];
        socket.broadcast.emit('move', { x: posx, y: posy });
    });
}); 
```

我将如何获得更多的球并且每个球员都控制自己的球？我在想以下几点：

让 Express 处理存储在 Redis 哈希中的会话，其中包含会话 ID 和球位置的坐标。这适用于当新玩家连接时，放置物品，然后将每个动作广播给所有人（但发送者）。但我确信缺少一些东西。

粗略地说，我应该朝哪个方向看？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:52:42.610

如果您移动`posx`并`posy`在`connection`回调内部，每个玩家（又名新连接）在服务器上都有自己的球坐标。因此，您在`connection`回调中所做的一切仅对连接的播放器有效。这应该会让你朝着正确的方向前进。:)

顺便说一句：什么是*POF*？

# javascript - javascript获取类名

> ID：11950412
> 
> 赞同：0
> 
> 时间：2012-08-14T10:30:41.013
> 
> 标签：javascript

为什么：

```
var isError = document.getElementById('companyName-element').getElementsByTagName('ul');
console.log(isError); 
```

返回`[ul.errors]`萤火虫

然而：

```
var isError = document.getElementById('companyName-element').getElementsByTagName('ul').className;
console.log(isError); 
```

返回`'undefined'.`

为什么不返回`'errors'`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:33:31.150

`getElementsByTagName`返回一个元素列表。

```
var isError = document.getElementById('companyName-element').getElementsByTagName('ul')[0].className; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:34:04.567

我的第一个想法是 getElementsByTagName 的结果是一个数组，所以你需要：

```
....getElementById('companyName-element').getElementsByTagName('ul')[0].className;
console.log(isError); 
```

获取数组中的第一个元素。

然而，这没有被研究或测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:34:38.840

```
 var isError = document.getElementById('companyName-element').getElementsByTagName('ul').className;
    console.log(isError); 
```

这应该替换为

```
var isError = document.getElementById('companyName-element').getElementsByTagName('ul')[0].className;
    console.log(isError); 
```

因为 document.getElementsByTagName("ul") 将给出一个节点列表

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T10:35:13.100

`getElementsByTagName()`返回元素的（节点）列表（[MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/NodeList)），即使只有一个匹配项或没有匹配项。

在您的第一个代码示例中，该列表有一个元素，即 firebug 向您显示的内容。

在第二个示例中，您尝试访问`className`列表的属性（不是元素！），该属性不存在，因此返回`undefined`. 如果要访问该`className`元素，请使用以下命令：

```
var isError = document.getElementById('companyName-element').getElementsByTagName('ul')[0].className;
console.log(isError); 
```

请注意，如果返回多个元素，您可能需要使用循环。

# objective-c - iOS 控制器之间的通信

> ID：11950417
> 
> 赞同：0
> 
> 时间：2012-08-14T10:30:49.357
> 
> 标签：objective-c, ios, uiviewcontroller, communication, delegation

首先，我想向您展示我的故事板：

![在此处输入图像描述](../Images/3d3a94c051be54e40acb35a6a28c2a26.png)

我在 CUVCViewController（左侧的第一个视图）中有一个 Label，在 CUVCViewControllerPageTwo（第二个视图）中有一个 UISlider。当我点击“第 2 页”按钮时，我可以更改 UISlider 的值。我想在标签中显示 UISlider 的值，但我不明白我该怎么做！我尝试过委托，但我不明白如何实现它！

有人能帮我吗？谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T11:23:57.010

好的，所以这个很简单，但我真的不确定你能走多远！我假设您只想知道如何将数据从`UISlider`后面传递到第一个视图控制器。

在第一个视图控制器的类中，需要实现方法

`- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`

这在第二个视图控制器的 segue 之前被调用。然后，您可以将您的第一个视图控制器设置为第二个的委托。因此，您需要`@property`在“第一个视图控制器”类型的第二个视图控制器上设置一个并调用它，比如说，`delegate`（您可以给它任何名称）

在你的`-prepareForSegue:`方法中，这样做

`SecondViewController *secondController = segue.destinationViewController;` `secondController.delegate = self`;

然后从这一点开始，您可以参考您的第一个视图控制器作为`delegate`您的第二个。Prehaps 您可以通过第`UISlider`一个方法调用或通过在第一个上设置属性将数据从

例如`[delegate sliderDidUpdate:sliderValue]`

# stylesheet - 以像素为单位的元素大小，为什么..？

> ID：11950421
> 
> 赞同：2
> 
> 时间：2012-08-14T09:16:38.837
> 
> 标签：stylesheet, screen-size

我是一名网络开发人员...... 12 年了，其中很多是业余爱好，最近 5 年是专业的。但是我仍然无法解决以下问题，这可能是一个非常愚蠢的问题，尤其是来自我的问题，但是：

**为什么我们仍然使用像素来表示尺寸？**

大约两三年前，我看到了新的 HiDPI 屏幕的曙光，比如 iPhone 4。我真的很想知道这将如何影响我们的网页设计和网页开发。我在一家广告公司工作，并且比普通网络开发者更了解印刷品（例如，在纸上或其他实物上印刷）。当我考虑我们下一步要去哪里时，我在考虑印刷品；它们不依赖于像素（或点使用正确的术语）的大小，这绝对是愚蠢的。因为，如果您将文档发送到打印机，则在开始设计文档之前，您需要知道该设备的 DPI。这就是为什么他们使用公制（或英制或其他）尺寸，然后只是预先决定他们最终将支持多高的 DPI。（300 DPI 是一个相当标准的最大值）

所以，我对上述问题的回答（两年前）是：我们可能会为设备使用指标或其他非像素相关的测量系统。因为我们会有很多不同 DPI 的设备。这几乎是我们可以确保设备按应有的方式显示网站的唯一方法。

现在，两年后，我们一直在使用其他一些解决方案。这仍然更像是解决方法，而不是对各种屏幕设置的真正解决方案。

我对度量系统的期望是错误的吗？有什么我忽略的东西会使这个解决方案变得不可能吗？是否已经存在我忽略的真正合乎逻辑的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T10:13:36.143

像素是屏幕的固定格式，如您所知，所有可查看的网络设备都是通过屏幕（显示器、平板电脑、手机等）。正如您所说的那样，DPI 和 PPI 是非常不同的东西，但是由于我们的屏幕不关心点，所以它可以工作。

但是，它不会像（例如对于字体） % 和 "em" 那样缩放。

为了进一步解释 px 和它的固定大小，下面是这个 W3.org 页面的一小段引述：

*要了解 px 的外观，请想象一下 1990 年代的 CRT 计算机显示器：它可以显示的最小点约为 1/100 英寸（0.25 毫米）或更多。px 单位得名于这些屏幕像素。*

*现在有些设备原则上可以显示较小的尖点（尽管您可能需要放大镜才能看到它们）。但是上个世纪在 CSS 中使用 px 的文档看起来还是一样的，不管是什么设备。尤其是打印机，可以显示比 1px 细得多的锐利线条，但即使在打印机上，1px 线条看起来也与在计算机显示器上看起来非常相似。设备发生变化，但 px 始终具有相同的视觉外观。*

现在，关键是它取决于您想要的布局 - 我们有 %、px、pt、em （等），我们可以选择（或不）使用这些工具来完成手头的任务。许多人不会使用根据设备重新缩放的方法（我们对此有自动检测），而对于其他人来说，它非常适合。

对我来说，任何可缩放的问题都很难在整个设计中相对缩放......在更高或更低分辨率的浏览器中，您的文本可能会出现在一行上或需要覆盖多行。如果这是至关重要的，那么使用像素来修复它。

这也是为什么这么多网站都居中的原因（包括这个）。它给人的错觉是整个屏幕都被占用了，但事实并非如此——左右边缘都有空白，这并不重要——内容清晰，设计师可以控制。

我无法计算我的客户要求缩放多少次（违背我的建议）然后遇到布局问题——你可以猜到我对此很感兴趣。

然而，很酷的是将两者一起使用 - 将固定像素尺寸作为包装器并在内部使用 % 或类似内容 - 这再次提供了流动性的错觉而不会失去太多控制。

我认为您的问题不会得到直接答案，因为恐怕这将是非常基于意见的。

# javascript - 按文本查找选择选项

> ID：11950434
> 
> 赞同：10
> 
> 时间：2012-08-14T10:32:02.993
> 
> 标签：javascript, jquery, mootools

谁能告诉我为什么这在旧版本的jQuery（例如1.4.2）中有效，但是如果您切换到更高版本，例如（1.6 +）它会停止工作？

[http://jsfiddle.net/nmvf6/1194/](http://jsfiddle.net/nmvf6/1194/)

```
$(function(){
    $('#my_button').click(function(){
        var unitName = "Unit2";
        $('.assUnit').find('option[text="'+unitName+'"]').remove();
    });

}); 
```

​</p>

我已经在控制台中检查了更高版本的错误输出，并且页面加载时似乎发生了错误，甚至在我加载我的脚本并能够单击按钮之前。

例如，当我将版本更改为 1.8.0 并运行页面时，我的 Opera 脚本控制台中会出现[此错误：](https://postimg.cc/hfKwV35V)

[![](../Images/c8cde2dd859d48f1a4434d30a79964a2.png)](https://i.stack.imgur.com/QWzJ1.png)

这似乎在“mootools”文件中..但我没有选择 mootools，我选择了 jQuery 1.8.0

：/

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-14T10:35:36.287

您正在使用[`Attribute Equals`](http://api.jquery.com/attribute-equals-selector/)选择器，它选择具有指定属性且值完全等于某个值的元素，选项元素没有`text`属性，您可以改用[`:contains`](http://api.jquery.com/contains-selector/)选择器，试试这个：

> 选择包含指定文本的所有元素。

```
$(function(){
    $('#my_button').click(function(){
        var unitName = "Unit2";
        $('.assUnit').find('option:contains('+unitName+')').remove();
    });
}); 
```

[小提琴](http://jsfiddle.net/nmvf6/1198/)

如果要选择仅具有特定值的元素，可以使用以下`filter`方法：

```
$(function(){
    $('#my_button').click(function(){
        var unitName = "Unit2";
        $('.assUnit option').filter(function() {
             return $(this).text() === unitName
        }).remove();
    });
}); 
```

[小提琴](http://jsfiddle.net/nmvf6/1207/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T10:34:58.970

你可能会有更多的运气：

```
$('.assUnit').find('option:contains('+unitName+')').remove(); 
```

参见[：:contains() 选择器](http://api.jquery.com/contains-selector/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T11:11:03.013

试试这个

```
$(function(){
    $('#my_button').click(function(){
       var unitName = "Unit2";
       $(".assUnit option:contains('"+unitName+"')").remove();
   });

}); 
```

# android - 在 ANDROID 的这种特定情况下，使用 XMLParser 解析 CDATA

> ID：11950435
> 
> 赞同：0
> 
> 时间：2012-08-14T10:32:07.607
> 
> 标签：android, xml, xml-parsing, cdata

我已经看过很多关于这个的帖子，但实际上我没有得到任何工作。我正在构建一个简单的电视指南 android 应用程序。我只是使用来自 tvprofil.net 的 RSS 来显示今天电视上的内容。问题是，我不知道如何在 XML 中解析 CDATA。我正在使用一些带有 DOM 的标准解析器……至少我是这么认为的……

这是一点 XML：

```
.
.
.
<item>
<title>RTS1 14.08.2012</title>
<pubDate>Tue, 14 Aug 2012 06:00:00</pubDate>
<content:encoded><![CDATA[06:00 Vesti<br>06:05 Jutarnji program<br>08:00 Dnevnik
<br>8:15 Jutarnji Program<br>09:00 Vesti ... ]]></content:encoded>
</item>
.
.
. 
```

现在，这是我的主要应用程序：

```
public class Main extends ListActivity {

// All static variables
static final String URL = "http://tvprofil.net/rss/feed/channel-group-2.xml";
// XML node keys
static final String KEY_ITEM = "item"; // parent node
static final String KEY_NAME = "title";
static final String KEY_DATE = "pubDate";
static final String KEY_DESC = "content:encoded";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ArrayList<HashMap<String,String>> menuItems = new ArrayList<HashMap<String,String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); //get XML
    Document doc = parser.getDomElement(xml); // get DOM elem.

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    //loop
    for (int i=0; i< nl.getLength(); i++){
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        //add to map
        map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
        map.put(KEY_DATE, parser.getValue(e, KEY_DATE));
        map.put(KEY_DESC, parser.getValue(e, KEY_DESC));

        // hash => list
        menuItems.add(map);
    }

    ListAdapter adapter = new SimpleAdapter(this, menuItems, R.layout.list_item,
            new String[]{KEY_NAME, KEY_DESC, KEY_DATE}, new int[]{
            R.id.name, R.id.description, R.id.date
    });
    setListAdapter(adapter);

    //singleView
    ListView lv = getListView();

    lv.setOnItemClickListener(new OnItemClickListener(){
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id){
            String name = ((TextView)view.findViewById(R.id.name)).getText().toString();
            String date = ((TextView)view.findViewById(R.id.date)).getText().toString();
            String description = ((TextView)view.findViewById(R.id.description)).getText().toString();

            //intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            in.putExtra(KEY_NAME, name);
            in.putExtra(KEY_DATE, date);
            in.putExtra(KEY_DESC, description);
            startActivity(in);
        }
    });

}

} 
```

和解析器类：

```
public class XMLParser {

// constructor
public XMLParser() {

}

/**
 * Getting XML from URL making HTTP request
 * @param url string
 * */
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}

/**
 * Getting XML DOM element
 * @param XML string
 * */

public Document getDomElement(String xml){

    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */
 public final String getElementValue( Node elem ) {

     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if( child.getNodeType() == Node.TEXT_NODE  ){
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "";
 }

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */
 public String getValue(Element item, String str) {     
        NodeList n = item.getElementsByTagName(str);        
        return this.getElementValue(n.item(0));
    }
} 
```

Single menu item 还有一个类..但我认为在这种情况下它是无关紧要的。现在，我只想在解析它并处理 CDATA 之后看不到 HTML 标签……有人知道这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:53:21.170

添加这个

```
 dbf.setCoalescing(true); 
```

dbf 在哪里

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-11T13:22:39.690

1.  先添加这个方法

    ```
    public String getCharacterDataFromElement(Element e, String str) {
    NodeList n = e.getElementsByTagName(str);   
    Element e1=(Element) n.item(0);

    Node child = e1.getFirstChild();
    if (child instanceof CharacterData) {
      CharacterData cd = (CharacterData) child;
      return cd.getData();
    }
    return "";
    } 
    ```

2.  像这样调用上述方法-

    ```
    map.put(KEY_DESC, parser.getCharacterDataFromElement(e, KEY_DESC)); 
    ```

这应该为您提供字符串格式的 CDATA。希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T02:37:49.750

当我需要从一组“描述”xml 元素中的 CDATA 中提取图像 URL 时，zg_spring 的答案对我来说非常有效：

```
//Get the content of all "item" elements    
DocumentBuilder db = DocumentBuilderFactory.newInstance().newDocumentBuilder();
Document doc = db.parse(new InputSource(new StringReader(xml)));
NodeList nlDetails = doc.getElementsByTagName("item");    

//Loop through elements and extract content of "description" elements    
for(int k = 0; k < numDetails; k++) {
    Element nDetails = (Element)nlDetails.item(k);
    NodeList nlCoverURL = nDetails.getElementsByTagName("description");         
    Node nCoverURL = nlCoverURL.item(0);
    String sCoverURL = nCoverURL.getTextContent();

    //Isolate the relevant part of the String and load it into an ArrayList
    String[] descriptionContent = sCoverURL.split("\"");
    String s = descriptionContent[11]
    alImages.add(s);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T02:35:02.423

获取文本内容。此属性返回此节点及其后代的文本内容

getNodeValue() 这个节点的值，取决于它的类型；

通常你应该使用 getTextContent。

# iphone - 如何让两个子视图相互交互？

> ID：11950441
> 
> 赞同：0
> 
> 时间：2012-08-14T10:32:26.497
> 
> 标签：iphone, objective-c, ios, subview

我有一个子视图分层问题，我有一个旋转箭头和一个 UIButton。箭头旋转，UIButton 根据箭头的旋转而变化。问题是我需要 UIButton 可点击。目前箭头旋转但 UIButton 不可触摸。如果我尝试`[self.view sendSubviewToBack:wheelControl];`，箭头会被发送到后面并且不再可见。

感谢您提供有关如何解决此问题的任何帮助。

![在此处输入图像描述](../Images/d027503894da6e7f6c2e2a8a20932899.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:40:59.843

你需要打电话

```
[theView bringSubviewToFront:theButton]; 
```

作为布置子视图时的最后一次调用。

# objective-c - 如何获取 SOAP 响应数据？

> ID：11950445
> 
> 赞同：0
> 
> 时间：2012-08-14T10:32:46.577
> 
> 标签：objective-c, xml, serialization, soap

这是`XML`从 web 服务返回的响应。

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:tns="urn:OrientalServices1">
<SOAP-ENV:Body>
<ns1:Get_CategoryResponse xmlns:ns1="http://schemas.xmlsoap.org/soap/envelope/">
<return xsi:type="SOAP-ENC:Array" SOAP-ENC:arrayType="tns:responseGetCategoryByID[11]">
<item xsi:type="tns:responseGetCategoryByID">
    <id xsi:type="xsd:int">1</id>
    <name xsi:type="xsd:string">國內</name>
</item>
<item xsi:type="tns:responseGetCategoryByID">
    <id xsi:type="xsd:int">2</id>
    <name xsi:type="xsd:string">財經</name>
</item>
<item xsi:type="tns:responseGetCategoryByID">
    <id xsi:type="xsd:int">3</id>
    <name xsi:type="xsd:string">社會</name>
</item>
<item xsi:type="tns:responseGetCategoryByID">
    <id xsi:type="xsd:int">4</id>
    <name xsi:type="xsd:string">國際</name>
</item>
<item xsi:type="tns:responseGetCategoryByID">
    <id xsi:type="xsd:int">10</id>
    <name xsi:type="xsd:string">龍門陣&lt;/name>
</item>
<item xsi:type="tns:responseGetCategoryByID">
    <id xsi:type="xsd:int">11</id>
    <name xsi:type="xsd:string">言論&lt;/name>
</item>
<item xsi:type="tns:responseGetCategoryByID">
    <id xsi:type="xsd:int">6</id>
    <name xsi:type="xsd:string">名家</name>
</item>
<item xsi:type="tns:responseGetCategoryByID">
    <id xsi:type="xsd:int">8</id>
    <name xsi:type="xsd:string">娛樂</name>
</item>
<item xsi:type="tns:responseGetCategoryByID">
    <id xsi:type="xsd:int">5</id>
    <name xsi:type="xsd:string">體育</name>
</item>
<item xsi:type="tns:responseGetCategoryByID">
    <id xsi:type="xsd:int">7</id>
    <name xsi:type="xsd:string">專題</name>
</item>
<item xsi:type="tns:responseGetCategoryByID">
    <id xsi:type="xsd:int">9</id>
    <name xsi:type="xsd:string">特輯</name>
</item>
</return>
</ns1:Get_CategoryResponse>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

在这个`XML`，我在一个数组中有 11 个项目。如何反序列化并一一获取项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:36:08.277

您可以使用 XML 解析器。

Cocoa 中支持几种方法——但既然你问了这样一个笼统的问题，我所能做的就是提供一个笼统的答案。

Apple 开发者网站上有一篇[关于事件驱动 XML 编程的介绍](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/XMLParsing/XMLParsing.html#//apple_ref/doc/uid/10000186i)

# visual-studio - 如何根据版本号在 Visual Studio 中重命名可执行文件？

> ID：11950457
> 
> 赞同：0
> 
> 时间：2012-08-14T10:33:27.047
> 
> 标签：visual-studio, version, build-process, .net-assembly

我有一个软件产品，它包含在我编写的自定义安装程序中。我希望根据它包含的程序集命名该安装程序可执行文件。

有没有办法检索程序集的版本号并在编译时使用它？我在visual studio中列出的宏中看不到任何版本号的提及（例如，类似的东西`$(TargetPath)`）..

# asp.net-mvc - Telerik mvc 网格与 ajax 绑定

> ID：11950461
> 
> 赞同：0
> 
> 时间：2012-08-14T10:33:38.573
> 
> 标签：asp.net-mvc, telerik, telerik-mvc

我有以下问题：我有一个 Telerik mvc 网格的自定义编辑命令。这是网格的代码：

```
Html.Telerik().Grid<Customer>("customers")
                       .Name("Grid")
                       .DataKeys(k => k.Add(o => o.Id))
                       .DataBinding(dataBinding => dataBinding.Ajax().Delete("Delete", "Customer").Select("AjaxIndex", "Customer"))
                       .Scrollable(builder => builder.Height(350))
                       .Filterable()
                       .Sortable(s => s.OrderBy(order => order.Add(o => o.Id).Descending()))
                       .Columns(c =>
                                 {
                                     c.Bound(o => o.Id);
                                     c.Bound(o => o.FirstName);
                                     c.Command(s =>
                                                   {
                                                       s.Custom("editCustomer")
                                                           .Text("Edit")
                                                           .Ajax(true)
                                                           .Action("Edit", "Customer");
                                                            s.Delete().ButtonType(GridButtonType.Image);                                                                                                                }).Width(175);
                                 })
               .ClientEvents(builder => builder.OnComplete("onEditComplete"))
                   .Pageable(p => p.PageSize(5))
                   .Selectable()
                   .Render(); 
```

这是edit命令的回调javascript函数：

```
function onAppraisalPhaseComplete(e)
{
    if (e.name == "editCustomer") {
        $("#dialog-form").html(e.response.PartialViewHtml);
        open($("#dialog-form"), "Edit Customer"); // this will display a modal with the edit view
    }
} 
```

编辑表单是对以下方法的 ajax 调用：

```
 public ActionResult JsonEdit(Customer customer)
    {
        if ((Rules.GetBrokenRules(customer).Count == 0))// there is no validation errors
        {
            Repository.Update(customer);
        }
        else
        {
            ModelState.AddModelErrors(Rules.GetBrokenRules(customer));
            return Json(new
            {
                Success = false,
                PartialViewHtml = RenderPartialViewToString("Insert", appraisalPhaseViewModel)
            });
        }
//if save successful get the customers list and return the partial of the grid in Json
        var customers= Repository.GetAll().ToList();
        ViewData["customers"] = customers;

        return Json(new
        {
            Success = true,
            PartialViewHtml = RenderPartialViewToString("MasterGrid")
        }); 
```

完成时的 ajax 调用如下：

```
 function JsonSave_OnComplete(context) {
        var jsonEdit = context.get_response().get_object();
        if (jsonEdit.Success) { // if the operation is successful reload grid and close the modal dialog
            $("#MasterGridDiv").html(jsonEdit.PartialViewHtml);
            CloseDialog($('#dialog-form'));
        } else { //Redisplay the edit partial view in the modal
            $("#dialog-form").html(jsonEdit.PartialViewHtml);
        }
    } 
```

编辑操作完成后，如果我尝试按下删除按钮，它将调用 JsonEdit 操作而不是删除操作。我不知道我在这里做错了什么？另外，有时删除按钮不起作用，调用ajax绑定而不是删除按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:13:55.167

您没有为按钮提供完整的 javascript 处理程序，只是回调。我应该假设你做对了。但是，您的代码存在明显的问题。您正在尝试通过从服务器端渲染视图注入 html 来手动重新绑定 Telerik 网格。这可能会导致您的客户端事件模型不可预测地蜂巢。代替 ：

```
$("#MasterGridDiv").html(jsonEdit.PartialViewHtml); 
```

尝试使用：

```
 $("#Grid").data("tGrid").rebind(); 
```

# java - 隐藏 从网址

> ID：11950471
> 
> 赞同：1
> 
> 时间：2012-08-14T10:34:22.850
> 
> 标签：java, jsp, struts2

在我的jsp页面中，有如下链接。

```
<s:url var="editReqDetails" action="editReqDetails">
   <s:param name="siteID" value="siteId"/>
</s:url> 
```

当我单击该链接时，浏览器 URL 是

> `http://`localhost:7101/legal/editReqDetails? **站点 ID=99**

如上。（参数显示在 URL 中。）

我想知道如何从 url 中隐藏高亮部分（参数）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:34:30.423

如果你可以使用 javascript 你可以这样做

```
<s:a href="#" onclick="window.location.href='%{editReqDetails}'">Edit Details</s:a> 
```

这样您就可以“隐藏”用户的 url。虽然我不确定最大的问题是什么。如果用户是恶意的，他可以轻松地查看源代码并获取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:43:55.183

不，你不能用这个。您使用 s:url 标记中默认使用的 http GET 方法传递参数，并且您希望获得 http POST 方法的行为。查看[struts url 的用法](http://struts.apache.org/2.0.8/struts2-core/apidocs/org/apache/struts2/components/URL.html)并选择一种 http GET 或 POST 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-15T17:46:26.643

你可以这样做：

```
<form id="edit-form" action="editReqDetails" method="POST">
    <input type="hidden" name="siteID" value="siteId" />
</form> 
```

然后：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#your-link").click(function(e) {
            $("#edit-form").submit();
        });
    }); 
</script> 
```

# database - 用于传感器数据的基于云的 NoSQL 数据库服务

> ID：11950475
> 
> 赞同：0
> 
> 时间：2012-08-14T10:34:39.357
> 
> 标签：database, service, nosql, cloud, sensors

我们是 NoSQL 的新手，现在正在开始一个项目，旨在将来自许多不同传感器的传感器数据记录到基于云的数据库中，每个传感器记录一个时间戳 - 值对。传感器的数量应该可以扩展，因此该解决方案应该能够处理每年数亿甚至数十亿的写入量。

每个传感器都有自己的带有键（时间戳）的表 - 值和传感器元数据位于自己的表中。

系统应支持搜索功能，例如某些传感器类型的最新值（快速数据检索）和某些区域中传感器时间范围的值（来自元数据）。

那么问题是哪种云数据库服务最适合我们的需求？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:14:52.310

[Couchbase](http://www.couchbase.com/)是此类用例的绝佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:41:04.330

试试[Apache Cassandra](http://cassandra.apache.org/)。[DataStax](http://www.datastax.com/)提供易于安装的软件包，其中包括一些有用的附加功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T21:32:41.083

我完全同意@Ben 的观点，这不是一个可以回答的问题；尽管如此，我至少会考虑选择简单的 k/v 类型存储而不是典型的 RBDMS 的原因。听起来这些数据可能会被汇总和计算；RBDMS 通常会通过正确的索引非常快速地回答这些问题。1B 写入/年（甚至 30B/年）真的没有那么高。

# python - 为什么我会为类似的查询得到 2 个不同的结果？

> ID：11950476
> 
> 赞同：0
> 
> 时间：2012-08-14T10:34:39.747
> 
> 标签：python, mongodb, pymongo

我正在尝试将一个文档链接到另一个文档。为此，我试图将一个文档的 ObjectID 存储在另一个文档中。我正在尝试几种不同的方法来产生相同的结果，但它们实际上看起来不同。以下是我正在尝试的方法：

方法一

```
owner['ownedCar'] = db.cars.find_one({ '_id' : ObjectId( $theCarsObjectIDstring ) }, {'_id': 1})
db.owners.save(owner) 
```

在数据库中看起来像这样：

```
{ 
_id {"$oid": "502186421fe3321dfa000001"}
} 
```

和方法二

```
car = db.cars.find_one( { '_id' : ObjectId( $theCarsObjectIDstring ) } )
owner['ownedCar'] = car['_id']
db.owners.save(owner) 
```

看起来像这样：

```
{"$oid": "502186421fe3321dfa000001"} 
```

他们不应该看起来一样吗？链接文档的首选方式是什么？

**编辑**为什么这个问题被否决了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:40:16.757

这两个结果是相同的，不同之处在于您如何挑选结果来填充链接字段。

当您使用的第二个参数`find`返回字段时，即使它只是一个参数，它也将始终返回一个以字段名称作为键、字段值作为值的对象。您使链接字段等于该对象，因此您不只是将 ID 作为链接字段的值返回。所以你的第一个查询的结果是：

```
{ 
_id {"$oid": "502186421fe3321dfa000001"}
} 
```

你让这个领域等于那个。

或者，您在第二个查询中物理选择，`car['_id']`因为链接字段的值只是 id。

这是解释它应该如何返回值的驱动程序和语言差异。

我想说第二种方法是最好的方法，因为第一种方法以额外对象的形式向字段添加了不必要的膨胀。

# java - Java File I/O -ftp busy error 读取文件错误

> ID：11950479
> 
> 赞同：1
> 
> 时间：2012-08-14T10:34:57.937
> 
> 标签：java, file-io

我应该创建多个 ftpproxyclient 对象还是一个就足够了？因为它抛出 ftp busy processing file 错误：

```
ftp = new FtpProxyClient(this.getFTPServername(hrGroupName), this.ftpPort,
                ftpUserName, getFTPPassword(hrGroupName));

ftp.setBinaryMode();

is = ftp.getFile(feedFileName); 
```

//做一些处理并检查剩余文件：

```
for (int i = personHeadDTO.getValueN().intValueExact() + 2; i < sequenceNo.intValueExact(); i++) {

                            fileName = feedFileName
                                    .replace(".", "_" + i + "."); 
```

下面的代码抛出 ftp is busy 错误：

```
 if(ftp.isFileExists(fileName)){
                                body1.append(fileName); 
                            }
                            else{
                                body1.append(fileName+" (Not Available in archive folder).");
                            }

                            body1.append(newline);
                        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:11:05.550

如果我删除这些行：

```
 ftp.changeDirectory("prxdpshr"); 
```

和

```
ftp.getFile(feedFileName); 
```

我没有收到任何错误，当我获取文件然后使用 ftpclient 对象执行一些操作时似乎有问题。

```
 String feedFileName="intusa35a.csv";
        ftp = new FtpProxyClient("server", 21,
                "user", "pass");

        ftp.setBinaryMode();

        ftp.changeDirectory("prxdpshr");

         ftp.getFile(feedFileName);

        ftp.changeDirectory("prxdpshr/archive_bkp");

        is=ftp.isFileExists("intusa35a.csv");

        is1=ftp.isFileExists("HR_Dorf_FeedFile.csv");           

        //lin = new LineNumberReader(new InputStreamReader(is));

        //lin1 = new LineNumberReader(new InputStreamReader(is1));

        String fileName="";
        StringBuffer body1=new StringBuffer();

        for (int i = 4  ; i < 10; i++) {                
            fileName = feedFileName
                    .replace(".", "_" + i + ".");
            if(ftp.isFileExists(fileName)){
                body1.append(fileName); 
            }
            else{
                body1.append(fileName+" (Not Available in archive folder).");
            }

            body1.append("\n");
        }

    } 
```

我使用单独的 ftpclient 来检查是否为空。

# javascript - 使用 JavaScript 的服务器到服务器应用程序的 OAuth 2.0

> ID：11950483
> 
> 赞同：2
> 
> 时间：2012-08-14T10:35:08.530
> 
> 标签：javascript, google-api, google-bigquery

我已经使用 Google-bigquery 和 JavaScript 工作了一段时间，在[这里](https://stackoverflow.com/questions/11448789/google-big-query-with-javascript)得到一些帮助后，我意识到您需要与项目相关联的 Google 登录详细信息来授权并实现您想要做的事情。

**我想要实现的目标：-** 允许用户访问我的页面并查看数据。例如，我可能会根据天气预报显示一些公共数据，因此我不需要任何用户身份验证，

目前，出于研究和开发目的，我正在使用**OAuth 2.0 for Web Server Applications**，我想摆脱这个，因为我们不需要任何用户数据，除了拥有我的项目客户端 ID 电子邮件 ID 等。 .

我已经阅读了**[OAuth 2.0 for Server to Server Applications](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)**，并且似乎没有对 JavaScript 的任何支持，因此最终用户不必参与其中。

是否有任何解决方案或安全的快速修复，我已尝试更改此[示例](https://stackoverflow.com/questions/11448789/google-big-query-with-javascript)中的配置代码以查看会发生什么但没有运气 -

```
var config = {
            'client_id' : 'xxxxxxxxxxx.apps.googleusercontent.com',
            "iss" : "xxxxxxxxxxxxxxxxxxxxxxxxxx@developer.gserviceaccount.com",
            "scope" : "https://www.googleapis.com/auth/bigquery",
            "aud" : "https://accounts.google.com/o/oauth2/token",
            "exp" : 1328554385,
            "iat" : 1328550785
        }; 
```

我在这里错过了什么。

在此先感谢您的帮助和建议，我为此苦苦挣扎了很长时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T16:28:04.557

由于无法在客户端 JavaScript 代码中隐藏客户端密码，因此无法授权客户端 JavaScript 应用程序通过服务器到服务器 OAuth 流使用 BigQuery。

在这种情况下，唯一的解决方案是对来自 JavaScript 应用程序的 API 调用使用服务器端代理。下面是如何通过 AppEngine 代理查询调用的片段（注意：下面的代码对任何用户开放，它会进行任何检查以确保调用正在通过您的特定 JavaScript 客户端运行）。

```
import httplib2

from apiclient.discovery import build
from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app
from oauth2client.appengine import AppAssertionCredentials

# BigQuery API Settings
SCOPE = 'https://www.googleapis.com/auth/bigquery'
PROJECT_ID = 'XXXXXXXXXX' # REPLACE WITH YOUR Project ID

# Create a new API service for interacting with BigQuery
credentials = AppAssertionCredentials(scope=SCOPE)
http = credentials.authorize(httplib2.Http())
bigquery_service = build('bigquery', 'v2', http=http)

class StartQueryHandler(webapp.RequestHandler):
  def post(self):
    query_string = self.request.get('query')
    jobCollection = bigquery_service.jobs()
    jobData = {
      'configuration': {
        'query': {
          'query': query_string,
        }
      }
    }
    try:
      insertResponse = jobCollection.insert(projectId=PROJECT_ID,
                                            body=jobData).execute()
      self.response.headers.add_header('content-type',
                                       'application/json',
                                       charset='utf-8')
      self.response.out.write(insertResponse)
    except:
      self.response.out.write('Error connecting to the BigQuery API')

class CheckQueryHandler(webapp.RequestHandler):
  def get(self, job_id):
    query_job = bigquery_service.jobs()
    try:
      queryReply = query_job.getQueryResults(projectId=PROJECT_ID,
                                             jobId=job_id).execute()
      self.response.headers.add_header('content-type',
                                       'application/json',
                                       charset='utf-8')
      self.response.out.write(queryReply)
    except:
      self.response.out.write('Error connecting to the BigQuery API')

application = webapp.WSGIApplication(
                                     [('/startquery(.*)', StartQueryHandler),
                                     ('/checkquery/(.*)', CheckQueryHandler)],
                                     debug=True)

def main():
  run_wsgi_app(application)

if __name__ == "__main__":
  main() 
```

# ios - Objective c - 标签中的多种颜色

> ID：11950489
> 
> 赞同：3
> 
> 时间：2012-08-14T10:35:47.063
> 
> 标签：ios, objective-c, iphone, uilabel, nsattributedstring

拥有不同颜色标签的最简单方法是什么？

例如，我想显示消息：
“John Johnson 向您发送了一条消息”

但我希望它`John Johnson`是**蓝色**
的，其余的消息是黑色**的**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T10:41:02.177

您需要`NSAttributedString`类（或可变类 - `NSMutableAttributedString`）来设置适用于字符串中单个字符或字符范围的属性（例如，字体和字距调整）*以及*`NSAttributedString`可以像[TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel/)一样可视化的自定义标签控件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T10:41:25.047

在 UILabel 中基本上是不可能的。如果你想这样做，你必须覆盖`drawTextInRect`应该被执行。但我会推荐[OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel/)。这是有一个属性字符串是一个文本颜色，可以设置指定一个范围。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T10:38:52.990

使用`UIWebView`.

```
webView.text = 
  @"<span style:\"color:blue;\">John Johnson</span> sent you a message."; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T11:19:19.213

使用[核心文本](http://www.raywenderlich.com/4147/how-to-create-a-simple-magazine-app-with-core-text)。希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T11:53:42.007

我创建了一个 UILabel 扩展来执行此操作。基本上它所做的是使用 NSAttributedString 来定义某些特定范围的颜色：[https ://github.com/joaoffcosta/UILabel-FormattedText](https://github.com/joaoffcosta/UILabel-FormattedText)

如果您希望自己实现此行为，只需执行以下操作：

```
NSMutableAttributedString *text = [[NSMutableAttributedString alloc] initWithAttributedString: @"John Johnson sent you a message"];
[text addAttribute: NSFontAttributeName
             value: font
             range: range];
[self setAttributedText: text]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-24T10:10:19.193

快速尝试一下（使用以下扩展名执行代码）

```
extension NSMutableAttributedString {

    func setColorForText(textToFind: String, withColor color: UIColor) {
        let range: NSRange = self.mutableString.range(of: textToFind, options: .caseInsensitive)
        self.addAttribute(NSAttributedStringKey.foregroundColor, value: color, range: range)
    }

} 
```

尝试使用 UILabel 进行扩展：

```
let label = UILabel()
label.frame = CGRect(x: 40, y: 100, width: 280, height: 200)
let stringValue = "John Johnson sent you a message"  // or direct assign single string value like "firstsecondthird"
label.textColor = UIColor.lightGray
label.numberOfLines = 0
let attributedString: NSMutableAttributedString = NSMutableAttributedString(string: stringValue)
attributedString.setColorForText(textToFind: "John Johnson", withColor: UIColor.blue)
label.font = UIFont.systemFont(ofSize: 26)
label.attributedText = attributedString
self.view.addSubview(label) 
```

这是结果：

![在此处输入图像描述](../Images/9552f7695836d121149112bb43314675.png)

# php - 为 php `str_len` 获得与 jQuery `.val().length()` 相同的结果

> ID：11950490
> 
> 赞同：8
> 
> 时间：2012-08-14T10:35:49.107
> 
> 标签：php, javascript, jquery, strlen

我使用 jQuery 即时计算 textarea 的值：

```
function count_chars () {
    count_chars=$('#text_textarea').val().length;
} 
```

...然后在提交序列化表单时，通过 ajax 将 textarea 的文本发送到 php 文件，然后在服务器端验证文本。但是，我遇到了换行符和空格的问题。

当然，如果我只是从 textarea 中获取文本“原样”，php 会将每个新行计为两个或四个字符（`\n`，...）。所以我试图用这样的东西替换它们：

```
strlen(str_replace(array("\r", "\n"), ' ', $text))) 
```

或这个：

```
strlen(preg_replace('/\s+/', ' ', trim($text))) 
```

但是，如果我得到例如 10 个段落并且 jQuery 返回 2500 个字符，则 php 将返回 2510 或 2490，这取决于我是用空格替换新行还是完全删除它们。所以相差20，但只有10个新行......？

我错过了什么？如何让 php 返回与 jQuery 相同的结果？问题出在哪里，在 php 中还是在 jQuery 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:41:57.427

这应该有效：

```
strlen(str_replace("\r", '', $text))) 
```

解释：

`strlen(str_replace(array("\r", "\n"), ' ', $text)))`

在这里，您将 \r 和 \n 替换为空格，因此字符数并没有真正改变。

`strlen(preg_replace('/\s+/', ' ', trim($text)))`

在这里，您将连续空白减少为单个`' '`.

# asp.net - 未找到组件“SharedCalendar”

> ID：11950492
> 
> 赞同：0
> 
> 时间：2012-08-14T10:35:52.963
> 
> 标签：asp.net, radscheduler

我在 Telerik 站点[http://demos.telerik.com/aspnet-ajax/scheduler/examples/raddock/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/scheduler/examples/raddock/defaultcs.aspx)使用 radscheduler 的演示之一 在下面的标记中，有一个 ID=SharedCalendar(在底部）。在运行项目时，我收到一个错误，因为“Microsoft JScript 运行时错误：Sys.InvalidOperationException：未找到组件'SharedCalendar'。”。即使我将此日历 ID 重命名为其他名称，然后我也我收到与“未找到组件'SharedCalendar'”相同的错误。无法在这里找出问题。请帮助我。

```
 <asp:Panel runat="server" ID="DockPanel">
        <telerik:RadDock runat="server" ID="RadDock1" Width="650px" Height="530px" Closed="true"
            Style="z-index: 2000;" Title="Edit appointment" OnClientDockPositionChanged="dockMoved">
            <Commands>
                <telerik:DockCloseCommand />
            </Commands>
            <ContentTemplate>
                <div class="editForm">
                    <div class="header">
                        <asp:Label runat="server" ID="StatusLabel"></asp:Label>
                    </div>
                    <div class="content">
                        Description:<br />
                        <asp:TextBox runat="server" ID="DescriptionText" Width="240px"></asp:TextBox>
<asp:RequiredFieldValidator runat="server" ID="DescriptionTextRequiredFieldValidator"
Display="Dynamic" ControlToValidate="DescriptionText" ErrorMessage="Description is required" />
                        <br />
                        <br />
                        Starts at:
                        <telerik:RadDateTimePicker ID="StartTime" runat="server" SharedCalendarID="SharedCalendar"
                            SharedTimeViewID="SharedTimeView">
                        </telerik:RadDateTimePicker>
<asp:RequiredFieldValidator runat="server" ID="StartTimeRequiredFieldValidator" Display="Dynamic"
ControlToValidate="StartTime" ErrorMessage="Start time is required" />
                        <br />
                        <br />
                        Ends at:
                        <telerik:RadDateTimePicker ID="EndTime" runat="server" SharedCalendarID="SharedCalendar"
                            SharedTimeViewID="SharedTimeView">
                        </telerik:RadDateTimePicker>
<asp:RequiredFieldValidator runat="server" ID="EndTimeRequiredFieldValidator" Display="Dynamic"
ControlToValidate="EndTime" ErrorMessage="End time is required" />
                        <br />
                        <br />
                        Assigned to:
<asp:DropDownList runat="server" ID="UserDropDown" DataSourceID="UsersDataSource"
DataTextField="UserName" DataValueField="ID">
                        </asp:DropDownList>
                        <br />
                        <br />
                        <asp:Label runat="server" Text="Reminder" ID="lblReminders"></asp:Label>
                        <telerik:RadComboBox runat="server" ID="ReminderDropDown" Width="120px">
                            <Items>
                                <telerik:RadComboBoxItem Text="None" Value="" />
                                <telerik:RadComboBoxItem Text="0 minutes" Value="0" />
                                <telerik:RadComboBoxItem Text="1 minute" Value="5" />
                                <telerik:RadComboBoxItem Text="2 minutes" Value="10" />
                                <telerik:RadComboBoxItem Text="3 minutes" Value="15" />
                                <telerik:RadComboBoxItem Text="4 minutes" Value="30" />
                                <telerik:RadComboBoxItem Text="1 hour" Value="60" />
                                <telerik:RadComboBoxItem Text="2 hours" Value="120" />
                                <telerik:RadComboBoxItem Text="3 hours" Value="180" />
                                <telerik:RadComboBoxItem Text="4 hours" Value="240" />
                                <telerik:RadComboBoxItem Text="5 hours" Value="300" />
                                <telerik:RadComboBoxItem Text="6 hours" Value="360" />
                                <telerik:RadComboBoxItem Text="7 hours" Value="420" />
                                <telerik:RadComboBoxItem Text="8 hours" Value="480" />
                                <telerik:RadComboBoxItem Text="9 hours" Value="540" />
                                <telerik:RadComboBoxItem Text="10 hours" Value="600" />
                                <telerik:RadComboBoxItem Text="11 hours" Value="660" />
                                <telerik:RadComboBoxItem Text="12 hours" Value="720" />
                                <telerik:RadComboBoxItem Text="18 hours" Value="1080" />
                                <telerik:RadComboBoxItem Text="1 day" Value="1440" />
                                <telerik:RadComboBoxItem Text="2 days" Value="2880" />
                                <telerik:RadComboBoxItem Text="3 days" Value="4320" />
                                <telerik:RadComboBoxItem Text="4 days" Value="5760" />
                                <telerik:RadComboBoxItem Text="1 week" Value="10080" />
                                <telerik:RadComboBoxItem Text="2 weeks" Value="20160" />
                            </Items>
                        </telerik:RadComboBox>
                    </div>
                    <div class="footer">
                        <asp:Button runat="server" ID="SubmitButton" Text="Update" OnClick="SubmitButton_Click" />
                        <button onclick="hideForm();" type="button" style="margin-right: 20px;">
                            Cancel</button>
                    </div>
                    <telerik:RadTimeView ID="SharedTimeView" runat="server">
                    </telerik:RadTimeView>
                    <telerik:RadCalendar ID="SharedCalendar" runat="server" EnableMonthYearFastNavigation="False"
                        EnableMultiSelect="False" UseColumnHeadersAsSelectors="False" UseRowHeadersAsSelectors="False">
                    </telerik:RadCalendar>

                    <asp:HiddenField runat="server" ID="_originalRecurrenceRule" />

                    <telerik:RadSchedulerRecurrenceEditor runat="server" ID="RadSchedulerRecurrenceEditor1" />

                </div>
            </ContentTemplate>
        </telerik:RadDock>
    </asp:Panel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T17:46:24.097

我以前也遇到过同样的问题。但是能够使用 SharedCalendarID 弄清楚。单击[此处](http://www.telerik.com/community/forums/aspnet-ajax/scheduler/update-recurenceeditor-using-ajax.aspx)查看我找到的解决方案。

# c++ - 构建 qt 解决方案时未解决的外部问题和一些警告

> ID：11950493
> 
> 赞同：3
> 
> 时间：2012-08-14T10:35:53.120
> 
> 标签：c++, visual-studio, qt

我有用于 Windows 的 Qt 库 4.8.1（VS 2010 终极版）和 Qt Visual Studio 插件。这是我非常简单的应用程序：

```
#include<qobject.h>
#include<qstring.h>
#include<memory>

class MyClass : public QObject{
Q_OBJECT

public:
MyClass( const QString &text, QObject *parent = 0 ) : m_text(text) {}

public slots:
void setText( const QString &text );

signals:
void textChanged( const QString& );

private:
QString m_text;
};

void MyClass::setText( const QString &text ){
if( m_text == text ) return;
m_text = text;
emit textChanged( m_text );
}

int main(int argc, char *argv[]){
    std::shared_ptr<MyClass> a(new MyClass("foo"));
    std::shared_ptr<MyClass> b(new MyClass("bar"));

QObject::connect( a.get(), SIGNAL(textChanged(const QString&)),
b.get(), SLOT(setText(const QString&)) );
a->setText("changed");
} 
```

> 我得到与未解决的外部相关的错误：错误 6 错误 LNK2001: 未解决的外部符号“public: virtual int __thiscall MyClass::qt_metacall(enum QMetaObject::Call,int,void * *)” (?qt_metacall@MyClass@@UAEHW4Call@QMetaObject @@HPAPAX@Z)
> 
> 错误 4 错误 LNK2001: 无法解析的外部符号“public: virtual struct QMetaObject const * __thiscall MyClass::metaObject(void)const” (?metaObject@MyClass@@UBEPBUQMetaObject@@XZ)
> 
> 错误 5 错误 LNK2001: 无法解析的外部符号 "public: virtual void * __thiscall MyClass::qt_metacast(char const *)" (?qt_metacast@MyClass@@UAEPAXPBD@Z)
> 
> 错误 3 错误 LNK2019：函数“public: void __thiscall MyClass::setText(类 QString const &)" (?setText@MyClass@@QAEXABVQString@@@Z)

和两个警告：

> 警告 1 警告 MSB8017：在执行项目“GeneratedFiles\Debug\main.moc”的自定义构建命令时检测到循环依赖项。这可能会导致增量构建无法正常工作。
> 
> 警告 2 警告：“C:\Users\Anonymous\documents\visual studio 2010\Projects\qtWorld\qtWorld\qtworld.qrc”中没有资源。

**我没有使用任何 qmake / nmake 。当您获得最新的 Qt Visual Studio Add-in 1.1.11（甚至 Intellisense 识别关键字）时，它们不是必需的`slots:` `signals:`，对吧？**

**现在我的问题：**

1.  我听说只需重建整个解决方案即可解决许多错误，这是为什么呢？
2.  请解释为什么我会深入了解这些错误及其可能的解决方案。

ps请善解人意，不要做娼妓

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T08:33:46.857

如果您在 cpp 文件中定义了 QObject 类，那么您还应该包含该文件的 moc。例如，您的 MyClass 在 main.cpp 中定义，那么您应该添加

> ```
> #include "main.moc" 
> ```

到 main.cpp 文件的结尾。

感谢@Tomma 提供无法解释的答案：P

解释为什么上面的代码不起作用：

但是，moc 通常只应用于头文件。由于您的类定义是主程序文件的一部分，IDE 无法识别它。

感谢@koahnig 提供了很好的解释

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:41:43.940

您的类的构造函数未定义，仅声明。方法也一样`textChanged()`。至少这是我从您发布的代码中看到的。定义它们，错误应该消失。

# flash - flex vs cs3 和 swf 文件大小

> ID：11950494
> 
> 赞同：0
> 
> 时间：2012-08-14T10:35:53.947
> 
> 标签：flash, apache-flex, actionscript

我正在尝试减少使用 Flex 编译的 SWF 文件的输出大小，并且还想知道如何删除 gui 依赖项。

使用 CS3，我可以简单地创建一个带有行 trace("hello world") 的 AS 文件，编译它并最终得到一个小于 1k 并立即运行的 swf 文件。

我如何使用 Flex 来做到这一点。首先使用 mxmlc 编译 swf 文件要大得多，并且当我执行 swf 时总是有进度条（我假设它正在加载 gui 控件库等）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:52:32.733

正如 Yoda 大师所拥有的那样：[使用 Flex 框架，或者不使用它，没有剥离依赖项。](http://www.youtube.com/watch?v=q3hn6fFTxeo)

换句话说，如果您几乎只使用了 或相关包中的任何类`mx.*`-`spark.*`您几乎不可能将 SWF 的大小减小到 500K 以下。您可能会欺骗一些东西，例如在外部化一些东西时，使用 RSL 单独加载框架代码，但您只会延迟不可避免的事情。事实上，框架只是一个实体块，只能整体使用，或者一个都不能使用。

# c# - Visual Studio 转换错误

> ID：11950496
> 
> 赞同：0
> 
> 时间：2012-08-14T10:36:06.520
> 
> 标签：c#, visual-studio-2008, installation, repair

> **可能重复：**
> [无法加载程序集](https://stackoverflow.com/questions/1468729/unable-to-load-assembly)

每当我尝试创建一个新项目时。我收到以下错误。

有没有办法在不重新安装的情况下解决这个问题。

> 无法加载文件或程序集“Microsoft.Build.Engine，Version=3.5.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a”或其依赖项之一。该系统找不到指定的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:42:03.740

尝试从 Visual Studio 2008 磁盘重新安装 .net framework 3.5。在 vs2008 express 磁盘中它位于

> 我：\VBExpress\WCU\dotNetFramework\dotNetFx35setup.exe

其中“I”代表 DVD 驱动器号。

# objective-c - 视网膜 iPad 上的非视网膜图像

> ID：11950498
> 
> 赞同：0
> 
> 时间：2012-08-14T10:36:08.893
> 
> 标签：objective-c, ios, xcode, image, ipad

我正在为 iPad 开发 iOS 应用程序，我使用的是普通图像而不是 @2x 图像，所以这可以在新 iPad 中使用吗？还是必须包含@2x 图像？任何帮助都是预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:37:32.893

您可以在视网膜屏幕上使用普通图像，但它们看起来不像高分辨率图像那样清晰。

# c++ - Opencv 2.4 蛇形图像 C++

> ID：11950499
> 
> 赞同：0
> 
> 时间：2012-08-14T10:36:15.910
> 
> 标签：c++, image-processing, opencv

我查看了 opencv 2.4 参考资料，但找不到对应的 snakeImage。因此，我可以实施哪些其他方法来达到相同的结果？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:08:37.377

您可以使用`snake`以前版本的定义（例如`opencv2.0`）。 [蛇 opencv 2.0](http://opencv.willowgarage.com/documentation/motion_analysis_and_object_tracking.html#snakeimage) 它有效地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T09:49:40.180

它被转移到遗产。Python 绑定：cv2.cv.SnakeImage()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:18:38.010

This is one approach: [Active Contour (Snake) with OpenCV](http://blog.danielesser.de/2008/08/06/showcase-active-contour-snake-with-opencv/)

But search on Google, you'll find more interesting results.

# c# - NHibernate 集合获取，重复数据的集合

> ID：11950502
> 
> 赞同：2
> 
> 时间：2012-08-14T10:36:27.923
> 
> 标签：c#, .net, nhibernate

我有一个复杂的情况，我需要用 NHibernate 映射三个不同的类。Class1(Branch.cs) 具有 Class2(Employee.cs) 对象的集合。同时 Class2 也有 Class3(Contacts.cs) 对象的集合。
由于数据非常庞大，我使用 fetch 关键字在单个查询中检索数据。
我将查询用作

**Query1 -“从 Branch b 内部联接获取 b.Employee e 内部联接获取 e.Contacts”** -单个查询但结果重复。
**Query2 - “从分支 b 内部连接获取 b.Employee”** - 多个查询，需要的结果。

我在映射文件中使用了包。查询结果似乎有重复的结果。如何删除重复结果以及在单个查询中检索数据。我包括映射文件以及类。

**联系人.hbm.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="NHibernateSample" namespace="NHibernateSample">
  <class name="Contacts" table="Contacts">
      <id name="EmployeeID"/>
      <property name="EmployeeID"/>
      <property name="Mobile"/>
      <property name="Alternate"/>
  </class>
</hibernate-mapping> 
```

**分支.hbm.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="NHibernateSample" namespace="NHibernateSample">
  <class name="Branch" table="Branch">
      <id name="BranchCode"/>
      <property name="BranchCode"/>
      <property name="BranchName"/>
      <bag name="EmployeeList" cascade="all-delete-orphan" inverse="false" batch-size="10000">
          <key column="BranchCode"/>
          <one-to-many class="Employee" />
      </bag>
  </class>

</hibernate-mapping> 
```

**员工.hbm.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="NHibernateSample" namespace="NHibernateSample">
  <class name="Employee" table="Employee">
      <id name="EmployeeId"/>
      <property name="EmployeeId"/>
      <property name="FirstName"/>
      <property name="LastName"/>
      <property name="BranchCode"/>
      <bag name="Contact" cascade="all-delete-orphan" inverse="false" batch-size="10000">
          <key column="EmployeeID"/>
          <one-to-many class="Contacts" />
      </bag>
  </class>
</hibernate-mapping> 
```

**联系人.cs**

```
using System;
using System.Collections.Generic;
using System.Text;

namespace NHibernateSample
{
    public class Contacts
    {
        String employeeID;
        String mobile;
        String alternate;

        public Contacts()
        { }

        public virtual String EmployeeID
        {
            get { return employeeID; }
            set { employeeID = value; }
        }

        public virtual String Mobile
        {
            get { return mobile; }
            set { mobile = value; }
        }        
        public virtual String Alternate
        {
            get { return alternate; }
            set { alternate = value; }
        }
    }
} 
```

**员工.cs**

```
 using System;
using System.Collections.Generic;
using System.Text;

namespace NHibernateSample
{
    public class Employee
    {
        String employeeId;
        String firstName;
        String lastName;
        String branchCode;
        List<Contacts> contact = new List<Contacts>();

        public virtual List<Contacts> Contact
        {
            get { return contact; }
            set { contact = value; }
        }
        public virtual String EmployeeId
        {
            get { return employeeId; }
            set { employeeId = value; }
        }

        public virtual String FirstName
        {
            get { return firstName; }
            set { firstName = value; }
        }

        public virtual String LastName
        {
            get { return lastName; }
            set { lastName = value; }
        }

        public virtual String BranchCode
        {
            get { return branchCode; }
            set { branchCode = value; }
        }

        public Employee()
        { }
    }
} 
```

**分支.cs**

```
 using System.Collections.Generic; 
using System.Text; 
using System; 

namespace NHibernateSample 
{
    [Serializable]
    public class Branch
    {
        private String branchCode;
        private String branchName;
        private IList<Employee> employeeList = new List<Employee>();

        public virtual IList<Employee> EmployeeList
        {
            get { return employeeList; }
            set { employeeList = value; }
        }
        public virtual String BranchCode
        {
            get { return branchCode; }
            set { branchCode = value; }
        }

        public virtual String BranchName
        {
            get { return branchName; }
            set { branchName = value; }
        }

        public Branch() { }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T10:45:10.270

这是 NHibernate 的一个问题，他们不会解决。

您可以通过应用 DistinctEntityTransformer 在第一级获得正确的结果，这是 NHibernate 中的内置转换器，您应该使用

```
QueryOver.TranformUsing(Tranformers.DistinctEntityTransformer). 
```

在诸如您的问题之类的多层次上，您将需要编写自己的转换器并使用它而不是不同的实体转换器。您可以使用与 NHibernate 提供的不同实体转换器类似的逻辑来修复细节处的复制。

编辑：这是一个实现：

```
public class MultiLevelDistinctEntityTransformer : IResultTransformer
{
    private readonly Dictionary<Type, List<String>> _fetchedCollectionProperties; // used to know which properties are fetched so you don't fetch more details than required

    public MultiLevelDistinctEntityTransformer(Dictionary<Type, List<String>> fetchedCollectionProperties)
    {
        _fetchedCollectionProperties = fetchedCollectionProperties;
    }

    public object TransformTuple(object[] tuple, string[] aliases)
    {
        return tuple.Last();
    }

    public IList TransformList(IList list)
    {
        if (list.Count == 0)
            return list;
        var result = (IList) Activator.CreateInstance(list.GetType());
        var distinctSet = new HashSet<Entity>();
        foreach (object item in list)
        {
            var entity = item as Entity; // Entity is the base class of my nhibernate classes
            if (entity == null)
                continue;
            if (distinctSet.Add(entity))
            {
                result.Add(item);
                HandleItemDetails(item);
            }
        }
        return result;
    }

    private void HandleItemDetails(object item)
    {
        IEnumerable<PropertyInfo> collectionProperties =
            item.GetType().GetProperties().Where(
                prop =>
                prop.IsCollectionProperty()/*extension method which checks if the object inherits from ICollection*/ &&
                _fetchedCollectionProperties.ContainsKey(item.GetType()) &&// get only the fetched details

                _fetchedCollectionProperties[item.GetType()].Contains(prop.Name));
        foreach (PropertyInfo collectionProperty in collectionProperties)
        {
            dynamic detailList = collectionProperty.GetValue(item, null);
            if (detailList != null)
            {
                dynamic uniqueValues =
                    Activator.CreateInstance(
                        typeof (List<>).MakeGenericType(collectionProperty.PropertyType.GetGenericArguments()[0]));
                var distinct = new HashSet<Entity>();
                foreach (var subItem in detailList)
                {
                    var entity = subItem as Entity;
                    if (distinct.Add(entity))
                    {
                        uniqueValues.Add(subItem);
                        HandleItemDetails(subItem);
                    }
                }
                collectionProperty.SetValue(item, uniqueValues, null);
            }
        }
    }
} 
```

# c++ - C ++模拟鼠标左键单击最小化的程序

> ID：11950508
> 
> 赞同：4
> 
> 时间：2012-08-14T10:36:59.873
> 
> 标签：c++, winapi, simulation

我一直在寻找有关我遇到的这个特殊问题的一些信息，我希望能够模拟鼠标左键单击我当前附加到的程序。

现在，我创建了一个线程来检查数据库中的某些值，当这些值返回时（我正在寻找的值），我希望能够在任何 x,y 坐标中发送鼠标左键单击程序（最小化时）。

Windows 7 如何做到这一点？谢谢！

编辑：这是我调用线程的方式......

```
HWND child = GetActiveWindow();
if ( child == NULL )
MessageBox(0,"Couldn't get the child hwnd!","",0);

DWORD ID;
HANDLE thread_check_game = CreateThread ( NULL , 0 , (LPTHREAD_START_ROUTINE) game_check_thread , (LPVOID)child, 0 , &ID ); CloseHandle ( game_check_thread ); 
```

接着 ...

```
DWORD WINAPI game_check_thread(LPVOID lpParam) {

HWND    Window;
Window = (HWND)lpParam;
// ... some other code ...
// ...
WORD mouseX = 398;
WORD mouseY = 398;

SendMessage(Window,WM_LBUTTONDOWN,MK_LBUTTON,MAKELPARAM(mouseX,mouseY));
SendMessage(Window, WM_LBUTTONUP, MK_LBUTTON, MAKELPARAM(mouseX, mouseY));
Write("Sent Left Click\n");

ExitThread(0);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T10:53:53.703

如果您想在应用程序中触发鼠标事件，请使用该`SendMessage`函数，您的消息将出现在带有句柄`hWnd`消息泵的窗口中。

```
SendMessage(hWnd, WM_LBUTTONDOWN, MK_LBUTTON, MAKELPARAM(mousePosX, mousePosY)); 
```

您可能需要通知 for `WM_LBUTTONUP`，具体取决于您的应用程序处理其鼠标事件的方式。

# php - 提交表单时是否可以不跳转到页面顶部？

> ID：11950509
> 
> 赞同：2
> 
> 时间：2012-08-14T10:37:05.223
> 
> 标签：php, html

> 已修复，用锚标签包裹输入标签似乎有效。

这个问题可能听起来有点混乱，让我详细说明一下。

我用 PHP 制作了一个邮件表单。此表单一直位于页面底部。当我点击发送（这是一个输入标签）时，如果有错误，它将显示在表单上方。

但是当您点击发送时，页面将首先返回顶部，您必须一直向下滚动以查看是否有任何错误。

那么是否可以防止页面跳回起点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T10:43:52.893

您可以在表单上有一个页面锚点并在表单操作中指向该锚点，这样的事情应该为您做到这一点。

```
<form  action="someformaction.php#form-anchor" id="form-anchor">
</form> 
```

现在，当提交表单时，它应该将页面向下移动到该锚点所在的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:40:48.957

从它的声音来看，您正在提交一个正常的表单，该表单反过来发送电子邮件。

您可以在页面底部放置一个锚点，并让表单的操作指向它，以便您的用户将在页面的该部分打开，或者您可以通过 ajax 提交，而不会导致页面重新加载。这里有[一堆教程](https://www.google.com/search?q=submit+form+via+ajax&ie=utf-8&oe=utf-8&client=ubuntu&channel=fs)，你可以适应你的代码。

# php - PHP 回复错误 - 需要人的电子邮件，而不是管理员

> ID：11950510
> 
> 赞同：-1
> 
> 时间：2012-08-14T10:37:12.880
> 
> 标签：php

我有下面的 PHP 联系表格，其中包含验证码以确保正确。但是，当我从网站回复电子邮件时，它会随机发送一封电子邮件，我认为这是服务器管理员，但是，我希望它是发送表单的人的电子邮件。下面是代码，你能不能帮我？

```
<?php session_start();
if(isset($_POST['Submit'])) {   if( $_SESSION['chapcha_code'] == $_POST['chapcha_code'] && !empty    ($_SESSION['chapcha_code'] ) ) {
$youremail = 'info@example.com';
$fromsubject = 'www.example.co.uk';
$title = $_POST['title'];
$fname = $_POST['fname'];
$mail = $_POST['mail'];
$phone = $_POST['phone']; 
$subject = $_POST['subject']; 
$message = $_POST['message']; 
$to = $youremail; 
$mailsubject = 'Message from Website'.$fromsubject.' Contact Page';
$body = $fromsubject.'

The person that contacted you is:  '.$fname.'
 Phone Number: '.$phone.'
 E-mail: '.$mail.'
 Subject: '.$subject.'

 Message: 
 '.$message.'

|---------END MESSAGE----------|'; 
echo "Thank you for your message. I will contact you shortly if needed.<br/>Go to <a     href='/index.html'>Home Page</a>"; 
                            mail($to, $subject,     $body);
    unset($_SESSION['chapcha_code']);
} else {
    echo 'Sorry, you have provided an invalid security code';
}
} else { 
echo "You must write a message. </br> Please go to <a href='/contact.html'>Contact Page</a>"; 
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:41:31.827

您将需要一些标题，因此发件人地址是用户邮件。

另请参阅[邮件文档](http://php.net/manual/en/function.mail.php)

尝试这个

```
$headers = "From: $mail\r\n";
$headers .= "Reply-To: $mail\r\n";

mail($to, $subject,$body,$headers); 
```

# php - Htaccess - 将每个请求重定向到单个页面。副作用？

> ID：11950511
> 
> 赞同：1
> 
> 时间：2012-08-14T10:37:13.330
> 
> 标签：php, performance, .htaccess

我正在创建自己的 mvc 框架以在小项目中使用，默认情况下，我正在重写 url，以便每个请求都转到 index.php。index.php只有4-5行，调用应用程序类，然后应用程序类调用对应的控制器等等。

基本上，这是我的 htaccess 文件和 index.php：

```
Options +FollowSymLinks
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?rt=$1 [L,QSA] 
```

索引.php：

```
<?php
include 'config.php';
$app = new Application();
?> 
```

我想了解的是，这种方法在未来在速度和带宽方面是否有或可能有任何负面影响。感谢您的回答和评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:42:50.977

为什么重定向而不是 url 重写？

```
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

例如，许多应用程序/网站都使用它，并且您可以绝对控制访问的 URL。

是的，重定向是对服务器的另一个调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:44:34.563

如果该类只是为了包装您的引导阶段，那么它是没有意义的。只需有一个普通文件，它初始化应用程序、加载配置并完成所有接线。

您还可以希望`index.php`文件仅包含一行：包含文件外的内容`DOCUMENT_ROOT`。这样，如果*PHP*扩展出现问题，您就不会向所有人显示您的数据库密码和有关您的代码的其他敏感详细信息。

至于您当前的*.htaccess*设置 - 不，它不会导致任何额外的带宽使用，但您可能会考虑将浏览器的缓存用于图像和其他资产。

# javascript - 自动调整字体大小以适应容器

> ID：11950513
> 
> 赞同：0
> 
> 时间：2012-08-14T10:37:31.683
> 
> 标签：javascript, html, css, font-size, adjustment

我有一个`div`固定宽度的定义样式，里面的文本`div`可以有不同的长度，就像在[这个例子](http://jsfiddle.net/haynar/3HxgM/1/)中一样。是否有任何方法使用 CSS 和/或 JS 来调整文本大小，使其保持在容器的范围内？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:43:34.323

this may work for you, try this

```
var originalFontSize = 12;

var divWidth = $('.cell').width();

$('.cell span').each(function(){

    var spanWidth = $(this).width();

    var newFontSize = (divWidth/spanWidth) * originalFontSize;

    $(this).css({"font-size" : newFontSize, "line-height" : newFontSize/1.2 + "px"});

});​ 
```

# android - 解析 XML 时出错：未绑定的前缀

> ID：11950515
> 
> 赞同：1
> 
> 时间：2012-08-14T10:37:46.470
> 
> 标签：android, xml, animation

我在运行代码的同时在此页面上遇到错误，如果在这里看到任何错误，请帮助我..

```
 <?xml version="1.0" encoding="utf-8"?>
<set>

    <rotate
        android:duration="2000"
        android:fromDegrees="0"
        android:pivotX="50%"
        android:pivotY="50%"
        android:toDegrees="360" />

    <translate
        android:fromXDelta="10"
        android:toXDelta="" />

    <scale android:fromXScale="" />

    <alpha
        android:duration="2000"
        android:fromAlpha="1.0"
        android:toAlpha="0.5" />

</set> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:45:19.710

尝试：

```
<?xml version="1.0" encoding="utf-8"?>

<set xmlns:android="http://schemas.android.com/apk/res/android"> <!-- XMLNS IMPORTANT-->

    <rotate
        android:duration="2000"
        android:fromDegrees="0"
        android:pivotX="50%"
        android:pivotY="50%"
        android:toDegrees="360" />

    <translate
        android:fromXDelta="10"
        android:toXDelta="" />

    <scale android:fromXScale="" />

    <alpha
        android:duration="2000"
        android:fromAlpha="1.0"
        android:toAlpha="0.5" /> 
```

# php - PHP 命名空间和动态类名

> ID：11950517
> 
> 赞同：3
> 
> 时间：2012-08-14T10:37:55.517
> 
> 标签：php, namespaces, autoload, dynamic-class

在尝试使用 spl_autoload、命名空间和动态类名时，我遇到了一个“奇怪”的事情。我使用 PHP 5.3.2，像这样调用自动加载

```
set_include_path(get_include_path().PATH_SEPARATOR."classes".PATH_SEPARATOR."utils");
spl_autoload_extensions(".class.php");
spl_autoload_register(); 
```

现在到核心。建议以下代码：

```
new \User\Student;
$name="\User\Student";
new $name(); 
```

这工作正常，文件 classes/user/student.class.php 成功加载，两种构造都成功。但是，用法有点不同：

```
$name="\User\Student";
new $name();
new \User\Student; 
```

在“..Class \User\Student 无法加载...”上失败。我建议它应该以某种方式与静态/动态命名空间解析有关。但是，我认为这两者之间应该没有任何区别，除了它们的处理时间（编译与运行时）。

感谢您的任何解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T11:17:39.413

这里的“问题”其实比 SPL 级别低，也可以用`__autoload()`. 这在代码中得到了最好的证明：

```
function __autoload ($class) {
  echo "Loading $class\n";
}

new Test;
// displays "Loading Test"

$var = 'Test';
new $var;
// displays "Loading Test"

// However, when we introduce namespaces...

new \This\Is\A\Test;
// displays "Loading This\Is\A\Test"

$var = '\This\Is\A\Test';
new $var;
// displays "Loading \This\Is\A\Test" 
```

请注意，当引入命名空间时，前导斜杠在静态调用时不会传递给函数，而是在动态调用时传递给函数。

因此，解决方案是做这些相当简单的事情：

*   从动态类名实例化中删除前导斜杠。
*   像这样包装默认`spl_autoload()`函数：

```
set_include_path(get_include_path().PATH_SEPARATOR."classes".PATH_SEPARATOR."utils");
spl_autoload_extensions(".class.php");
spl_autoload_register(function($class) {
  spl_autoload(ltrim($class, '\\'));
}); 
```

当然，如果你这样做，你也可以删除调用`spl_autoload_extensions()`并将`".class.php"`字符串传递给第二个参数`spl_autoload()`

# css - 计算（） 100% + #px

> ID：11950518
> 
> 赞同：14
> 
> 时间：2012-08-14T10:38:10.683
> 
> 标签：css, css-calc

我正在努力实现一些我什至不太确定是否可能在这里实现的目标。

我正在尝试在我的网站的导航下放置一个特定的阴影 PNG 图像。但是，我也想将此功能用于我希望在网站上的任何对象，无论是图像、div 还是按钮。基本上对任何对象使用相同的阴影图像。

使用 css3`calc()`函数我试图做对象的高度@ 100% + 25px（png 的高度）。

我试过造型：

```
height: -webkit-calc(100% + 25px); 
height:    -moz-calc(100% + 25px); 
height:      -o-calc(100% + 25px); 
```

但是从我可以在 Firebug 中收集到的 100% + 25px 是新的 100%，因为这没有任何效果。

我也试过：

```
height: -webkit-calc(100% + 25px); 
height:    -moz-calc(100% + 25px); 
height:      -o-calc(100% + 25px); 
background-position: 0 -moz-calc(100% + 25px); 
```

但这里也没有欢乐。

如果我使用 calc(3em + 25px); 它没有问题，但这不够灵活，无法处理任何对象。

这甚至可能吗？我还有道理吗？！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T11:21:51.573

我不是 100% 确定，但[工作草案](http://www.w3.org/TR/css3-values/#calc)描述了计算两侧的运算符形成一个子表达式（单一类型）。

由于您将相对值 (%) 与绝对值 (px) 相结合，因此可能无法完成计算。

**更新：**我做了一个小测试，它似乎工作得很好。你确定你在 html 中的选择器和位置是正确的吗？检查这个[小提琴](http://jsfiddle.net/snpXz/)。

# python - 设置 maxmemory 限制后，找出 python 中的 redis 内存使用情况

> ID：11950528
> 
> 赞同：3
> 
> 时间：2012-08-14T10:38:34.493
> 
> 标签：python, redis

我正在编写一个 python 脚本，它将定期检查 redis 内存使用情况。现在我知道`used_memory`或者`used_memory_human`从 redis info 会告诉我们 redis 当前使用了多少内存。但我想知道已使用了多少内存百分比。

在 redis 信息中，我们没有得到类似的东西，`max_memory`因为 redis 用尽了系统可用的内存。但是如果设置了`maxmemory`选项`redis.conf`呢？

如果我的系统有 1 GB 的 RAM 但`maxmemory`设置为 100 MB 怎么办？那我们怎么知道内存利用率呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T10:46:35.450

您可以使用`CONFIG`命令获取有关最大内存和内存策略的所需信息。获取配置信息的语法是：

```
config get <option-name> 
```

以下是如何获取 maxmemory 设置的示例：

```
redis 127.0.0.1:6379> config get maxmemory
1) "maxmemory"
2) "0" 
```

以下是如何获取 maxmemory-policy 设置的示例：

```
redis 127.0.0.1:6379> config get maxmemory-policy
1) "maxmemory-policy"
2) "volatile-lru" 
```

maxmemory 管理有不同的策略（您可以从示例 Redis 配置文件中获取它们的描述）：

> MAXMEMORY POLICY：当达到 maxmemory 时，Redis 将如何选择要删除的内容？您可以在五种行为中进行选择：
> 
> 1.  volatile-lru -> 使用 LRU 算法删除设置了过期时间的密钥
> 2.  allkeys-lru -> 根据 LRU 算法删除任何密钥
> 3.  volatile-random -> 删除带有过期设置的随机密钥
> 4.  allkeys->random -> 删除随机键，任意键
> 5.  volatile-ttl -> 删除过期时间最近的密钥（次要 TTL）
> 6.  noeviction -> 根本不会过期，只是在写操作时返回一个错误

下面是 pyredis 如何实现类似结果的示例（假设我们在标准端口上有 localhost 数据库）：

```
>>> import redis
>>> c = redis.Redis()
>>> print c.config_get('maxmemory')
{'maxmemory': '0'} 
```

# java - 无法从属性文件中读取

> ID：11950533
> 
> 赞同：0
> 
> 时间：2012-08-14T10:39:01.727
> 
> 标签：java, unix, properties, jar

我有一个 java 应用程序，它在 eclipse 中运行和直接从 jar 运行时运行良好。

当我的 jar(1.jar) 中的一个类(1.class) 被另一个 jar(2.jar) 中的另一个类(2.class) 访问时，会出现错误“无法从属性文件中读取”，这又被称为从一个shell脚本。我尝试在脚本中显示类路径，并将放置属性文件的路径添加到类路径中。知道为什么吗？

Shell 脚本 --> 2.jar - 2.class --> 1.jar - 1.class

# php - Paypal Express 结帐无价格

> ID：11950534
> 
> 赞同：2
> 
> 时间：2012-08-14T10:39:02.130
> 
> 标签：php, session, scripting, paypal, payment

我使用了贝宝快速结帐沙箱，但是当我点击购买东西时，贝宝中没有显示任何价格或商品名称。 ![在此处输入图像描述](../Images/78bffe38c79ac72ce5a15417206fdccf.png)

在我的页面上，我放了这个表格：

```
<form action='expresscheckout.php' METHOD='POST'>
<input type='image' name='submit' src='https://www.paypal.com/en_US/i/btn/btn_xpressCheckout.gif' border='0' align='top' alt='Check out with PayPal'/>
</form> 
```

我已经将这两个来自贝宝的代码包含到我的脚本中：

[https://www.paypal-labs.com/integrationwizard/ecpaypal/download.php?file=ecfile](https://www.paypal-labs.com/integrationwizard/ecpaypal/download.php?file=ecfile)

[https://www.paypal-labs.com/integrationwizard/ecpaypal/download.php?file=pplibfile](https://www.paypal-labs.com/integrationwizard/ecpaypal/download.php?file=pplibfile)

正如我所说，当我点击支付按钮时，它会将我带到贝宝沙箱，但没有价格或商品名称。我什至用真实的 API 名称尝试过这个并通过但仍然没有价格。

同时，我还在 expressscheckout.php 中手动设置了价格：

**`$paymentAmount = $_SESSION["Payment_Amount"];`**

**至**

**`$paymentAmount = 32;`**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:01:59.037

对于网站支付标准：我在表单标签中添加了以下两个标签：

```
<input type="hidden" name="item_name" value="<?php print $itemName; ?> "/>
<input type="hidden" id="amount" name="amount" value="<?php print $amount; ?>"/> 
```

# function - 方法/函数参数：值然后索引，反之亦然

> ID：11950535
> 
> 赞同：1
> 
> 时间：2012-08-14T10:39:17.157
> 
> 标签：function, methods

你会怎么做：

```
setter(index, value) 
```

或者

```
setter(value, index) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:42:21.293

我会说第一个。我通常将高级参数放在第一位，即索引决定将值放在哪里。

从计算机的角度来看：首先你需要存储的位置，当找到时，可以设置值。

它类似于设置例如汽车元素的属性：

SetWheelDiameter(CarModel model, Part.Wheels, Wheel.Diameter, 19.0) 参数从高到低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:42:03.723

谷歌搜索：

```
"T value int index" 
```

表明它比以下内容更常见：

```
"int index T value" 
```

# frameworks - 实体框架保存子对象

> ID：11950536
> 
> 赞同：0
> 
> 时间：2012-08-14T10:39:17.753
> 
> 标签：frameworks, entity

我对实体框架很陌生，并且在调整时遇到了一些麻烦。就像所有事情一样，一开始我看到它让我的 CRUD 操作变得多么简单，并认为它很棒。然而，随着我的对象模型变得稍微复杂一些，我开始遇到越来越多的问题。

尽管到目前为止，我已经设法通过在这里搜索找到了几乎所有问题的答案，但我目前的问题难倒了我。

我有两个实体，它们通过 1 到 1/0 的关系链接。我还不能发布图片，所以请在下面删除我的狡猾绘图：

```
Person (id, name, address, dob, etc. etc.)
Spouse (id, name, address, dob, etc. etc.) 
```

虽然实际情况更复杂，但我认为这不是我的问题的一部分。

现在，看到这是一个 1 对 0/1 的关系，一个人有 1 个配偶，或者他们有 0 个配偶。如果我通过以下方式构造我的对象：

```
Person person = new Person();
person.Spouse = new Spouse(); 
person.Spouse = spouse; 
```

（包括想象属性设置）

然后保存它。这是一种享受。然后我可以再次加载它，编辑它等等。生活很美好。

我遇到问题的地方是我保存一个人（没有配偶），然后在稍后阶段加载这个人进行编辑并尝试附加一个配偶。当我到达我的 container.Attach(person); 调用时，它会引发以下异常：“具有临时 EntityKey 值的对象不能附加到对象上下文。”

现在，我非常有信心这是由于我添加配偶的方式，即：

```
Person person = LoadPerson(id);
Spouse spouse = new Spouse();
person.Spouse1 = spouse; 
```

我看到的问题是我现在试图关联一个以前没有关联的子实体。我对错误消息进行了很多搜索，但通常它似乎与对象上下文有关。我也找到了解决方法（根据我发现的结果）。如果我使用一对多的关系并做 Person.Spouses.Add(spouse) 它工作正常。但是我很犹豫，因为这种关系不合逻辑（无论如何在这个国家......）。我确定这是一个简单的答案，我显然在我所看到的结果中忽略了它（我非常怀疑我是第一个尝试这样做的人......）但我尝试过的任何事情似乎都不起作用。

任何帮助将不胜感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T00:53:02.870

您可能需要先将配偶添加到上下文中

```
Context.Spouses.Add(spouse); 
```

在将其附加到 Person 之前。

# xcode - 使用 xcode 计时器时出错

> ID：11950537
> 
> 赞同：0
> 
> 时间：2012-08-14T10:39:18.177
> 
> 标签：xcode, timer, skip

我一直在使用 Xcode 来实现计时器并运行计算。然而，计时器每隔一段时间就会跳过一个交互，这会抛出所有的计算。

```
- (void)Time
{

  if (running==false) return;

  NSTimeInterval currentTime = [NSDate timeIntervalSinceReferenceDate];
  NSTimeInterval elapsed = currentTime - startTime;

  int mins = (int) (elapsed / 60.0);

  elapsed -= mins* 60;
  int seconds = (int) (elapsed);
  elapsed -= seconds;
  int fraction = elapsed * 100.0;
  beepTime = [self Dec:seconds+elapsed];

  [self mod];

  label.text= [NSString stringWithFormat:@"%u:%02u.%.01u",mins,seconds,fraction/10];

  [self performSelector:@selector(Time) withObject:nil afterDelay:0.01];

} 
```

这是一些日志的小样本

```
2012-08-14 20:25:04.659  RT 8.470000  BP 50.710000 MT 8.360000
2012-08-14 20:25:04.671  RT 8.470000  BP 50.720000 MT 8.370000
2012-08-14 20:25:04.682  RT 8.470000  BP 50.740000 MT 8.390000 
```

请注意，已跳过 BP 50.730000 和 MT 8.380000。

有什么建议么？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:58:47.393

如果您阅读有关 -performSelector:withObject:afterDelay: 的文档，则不能保证消息在 0.01 秒延迟后准确发送。相反，它说消息在 0.01 秒后被放入事件队列，并在轮到它时触发。

使用 NSTimer 的方法 + scheduleTimerWithTimeInterval:target:selector:userInfo:repeats: 可能会更好。

尽管计时器在当前运行循环中也与 performSelector 类似，但至少它不会在 0.01 + 中执行（执行 -Time 方法体所花费的时间）。

请注意，您只需调用该 NSTimer 方法一次，并使用其返回值使计时器无效。

# html - 从 ExpressionEngine 模板中删除空格

> ID：11950539
> 
> 赞同：0
> 
> 时间：2012-08-14T10:39:32.410
> 
> 标签：html, templates, expressionengine

我想知道是否有办法去除 EE 模板系统创建的额外空白并生成“更漂亮”的标记。

我喜欢让我的模板保持可读性。我经常在多年后重返工作岗位，不得不跟随其他开发人员的工作，或者作为团队的一员工作，当一切都井井有条并嵌套时，这会更容易。

问题是 EE 保留了所有的制表符和换行符，当你有很多条件等时，它会导致丑陋的代码。例如，这个：

```
<div class="
    event {if event_all_day}all_day{/if} 
    {if event_multi_day}multi_day{/if} 
    {if event_first_day}first_day{/if} 
    {if event_last_day}last_day{/if} 
    {if all_day_event_index_difference > 0}index_difference_{all_day_event_index_difference}{/if}
">
    {if event_multi_day} 
        <a href="{path='calendar_main/event'}/{event_id}/">{event_title}</a>
    {if:else}
        <a href="{path='calendar_main/event'}/{if edited_occurrence}{event_parent_id}{if:else}{event_id}{/if}/" title="{event_title}">{event_title}</a>
    {/if}
</div> 
```

渲染成这样：

```
<div class="
                                         event all_day 
                                         multi_day 

                                                                               ">

                                         <a href="http://www.downtownmuncie.org/calendar_main/event/1832/">Minnetrista Glass Show</a>
                                                                       </div> 
```

围绕 EE 标签的每个制表符和换行符都被保留，所以我在`<div>`和之间留了一英里的空白`</div>`。

性能方面，这并不意味着什么。文件大小的增加可能存在争议，但可以忽略不计。在尝试使用 Firebug 浏览代码时，这也是一个障碍。

但最重要的是，它看起来很草率。

一个建议是相应地调整模板，如下所示：

```
<div class="event {if event_all_day}all_day {/if}{if event_multi_day}multi_day {/if}{if event_first_day}first_day {/if}{if event_last_day}last_day {/if}{if all_day_event_index_difference > 0} index_difference_{all_day_event_index_difference}{/if}">
    {if event_multi_day}<a href="{path='calendar_main/event'}/{event_id}/">{event_title}</a>{if:else}<a href="{path='calendar_main/event'}/{if edited_occurrence}{event_parent_id}{if:else}{event_id}{/if}/" title="{event_title}">{event_title}</a>{/if}
</div> 
```

这不是一个真正可行的解决方案。考虑到整洁的模板和整洁的代码之间的选择，我不得不选择前者。

有没有办法两者兼得？

泰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:32:50.443

`tidy_template`假设您有 2.4.0 或更高版本，则在 EE中有使用`template_post_parse`钩子的扩展。

[https://github.com/sjelfull/sf.tidy_template.ee_addon](https://github.com/sjelfull/sf.tidy_template.ee_addon)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:17:42.660

我不确定您是在寻找自动解决方案还是手动解决方案。我不知道任何自动的东西，但我相信更棒的人可以提供帮助。我是手册的粉丝，所以在我的 EE 模板上使用“真正的”编辑器，使用FF 中[的 It's All Text](http://bit.ly/NAbe5R)在这些文本区域和我的编辑器之间建立连接。那时，您可以在模板上施加您的理念所规定的任何空白规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:47:52.363

[Jesse Bunch 的 AutoMin for EE](https://github.com/bunchjesse/AutoMin)具有 HTML 压缩功能。它不会像 HTMLTidy 那样美化您的缩进，但会删除所有空格以减小文件大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T00:47:38.697

这是未经测试的，但在类似的情况下（老实说，不记得它是否是 EE）我已将空格放在服务器端代码中。因此：

```
<div class="event {if
    event_all_day}all_day {/if}{if
    event_multi_day}multi_day {/if}{if
    event_first_day}first_day {/if}{if
    event_last_day }last_day {/if}{if
    all_day_event_index_difference > 0}index_difference_{all_day_event_index_difference{/if}
">
    {if
        event_multi_day}<a href="{path='calendar_main/event'}/{event_id}/">{event_title}</a>
    {if:else
    }<a href="{path='calendar_main/event'}/{if edited_occurrence}{event_parent_id}{if:else
    }     {event_id}{/if}/" title="{event_title}">{event_title}</a>
    {/if}
</div> 
```

# android - android 应用程序中的购物车按钮。

> ID：11950540
> 
> 赞同：1
> 
> 时间：2012-08-14T10:39:34.867
> 
> 标签：android

这是一个普遍的问题。我在 Google 上找不到任何答案，所以在 stackoverflow 上询问。

一些 android 应用程序在活动（操作栏）的顶部有购物车按钮。例如，我附上了亚马逊 android 应用程序的图像。所有产品都将被列出`webview`，当用户在亚马逊下订单时，订单购物车会更新操作栏中的数字从 0 到 1。这种更新发生在 android 中，从`webview`最有可能在 android 中使用的一些小部件。

谁能让我们知道如何实现这一目标或整个活动本身是如何实现的`webview`？我想知道他们正在使用什么小部件以及他们如何更新活动中的购物车。

任何指向示例的指针都会非常有帮助。

附件是亚马逊安卓应用程序屏幕的图像。

![亚马逊 android 应用程序的图像](../Images/33a3a9c2c7727e0fda8ddc0cff82203e.png)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:14:42.387

我不知道标准操作栏项目是否可以在运行时更新。

但是，操作栏支持向其添加**自定义布局**的能力。在这种情况下，我认为在将商品添加到购物车时设置侦听器没有任何困难，并通过更新该自定义布局将其反映在 UI 上。

**更新：**
要从代码中添加自定义布局：

```
ActionBar bar = getActionBar();
bar.setCustomView(R.layout.custom_action_bar); 
```

或从样式：

```
<style name="ActionBar" parent="android:style/Widget.Holo.Light.ActionBar">
  .....
  <item name="android:customNavigationLayout">@layout/custom_action_bar</item>
</style> 
```

现在，在您的`R.layout.custom_action_bar`按钮中，您将看到上面带有数字的按钮，代表购物车中的商品数量。显然，该数字应该是 a `TextView`，每次将商品添加到购物车时都会递增。

为此，您将需要在您的活动中使用一个侦听器，该侦听器将更新该 TextView，例如：

```
@Override
public void onItemAdded(){
   cart.setText(CURRENT_NUMBER_OF_ITEMS_IN_CART);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:20:04.180

这可能会对您有所帮助，这可能不是问题的正确答案。

我认为您可以使用`WebViewClient`and来做到这一点`onPageFinished`。注意特定的 URL 模式。如果模式匹配，您可以执行您需要的操作。

还有一种方法，也考虑一下，

让应用程序向服务器发送请求以更新购物车。该应用程序会经常向服务器发送请求以检查购物车更新。

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:49:55.773

他们使用[操作栏](https://developer.android.com/guide/topics/ui/actionbar.html)，操作栏是显示在顶部栏上的窗口羽毛，有关更多信息和示例，您可以在 [此处查看 google I/O 应用程序的源代码](https://code.google.com/p/iosched/source/checkout)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-14T15:41:23.233

在您的 res/menu/menuitem.xml 中，您可以定义以下选项：

```
android:actionLayout="@layout/yourcustomlayout" 
```

你的自定义布局可能在哪里

```
<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="3dip"
    android:src="@drawable/cart" />

<TextView
    android:visibility="invisible"
    android:id="@+id/tv"
    style="@style/DefaultTextStyle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center|top"
    android:background="@drawable/mybackground" /> 
```

在 onCreateOptionsMenu 中，您可以对 textview 的引用如下：

```
private TextView cartTV;

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.virtual_betting, menu);
    MenuItem item = menu.getItem(0);
    cartTV = (TextView) item.getActionView().findViewById(R.id.pallino);

    return true;
} 
```

并在需要更新时更新

# r - ggplot2：scale_alpha() 的阈值

> ID：11950544
> 
> 赞同：6
> 
> 时间：2012-08-14T10:39:49.013
> 
> 标签：r, colors, ggplot2, alpha

是否可以指定色阶的阈值？

看这个例子：

```
xy <- expand.grid(x=1:20,y=1:20)
xyd <- data.frame(xy,z=runif(400),a=rowSums(xy)/40)
g <- ggplot(xyd, aes(x=x, y=y, fill=z, alpha=a)) + 
       geom_tile() + 
       scale_alpha(range=c(0,1), limits=c(0.5,1))
g 
```

![Scale_alpha 仅适用于给定范围内的值](../Images/78c5c891495205dafcf3b1ccd6425e5f.png)

我想要的是低于 0.5 的值得到 0 的 alpha 值，这样左下半部分将不可见。显然我可以转换原始数据，但这会破坏传说。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-14T16:39:39.457

阈值有效，阈值之外的值设置为`NA`；问题是 an`alpha`被`NA`渲染为完全不透明。设置`na.value`刻度以`0`获得您想要的结果。

```
ggplot(xyd, aes(x=x, y=y, fill=z, alpha=a)) + 
       geom_tile() + 
       scale_alpha(range=c(0,1), limits=c(0.5,1), na.value = 0) 
```

![在此处输入图像描述](../Images/46589f546bb80007af0968ac3908be12.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T11:18:53.000

我尝试使用天平来控制 alpha 的尝试都没有完全成功。我最好的尝试是用来`ifelse`控制 a 的值：

```
ggplot(xyd, aes(x=x, y=y, fill=z)) + 
  geom_tile(aes(alpha=ifelse(a<=0.5, 0, a))) +
  scale_alpha(range=c(0,1)) 
```

![在此处输入图像描述](../Images/58a142c18e8d65c12463cfbc4787de65.png)

* * *

因此，需要一种不同的方法：删除您不想从数据中绘制的值：

```
xyd <- with(xyd, xyd[a>0.5, ])

ggplot(xyd, aes(x=x, y=y, fill=z)) + 
  geom_tile(aes(alpha=a)) 
```

![在此处输入图像描述](../Images/24c381e79c1af00fded249e6291fe158.png)

# javascript-events - 如何使用现有的大写函数对 setTagContents 进行大写？

> ID：11950546
> 
> 赞同：0
> 
> 时间：2012-08-14T10:39:49.743
> 
> 标签：javascript-events

外部文件中的大写脚本：

```
function capitalise(str) {
        if (!str) return;
        var counter = 0;
        var stopWords = ['is','a','an','and','at','but','by','far','from','if','into','in','of','off','on','or','so','the','to','up','with'];
        str = str.replace(/\b\S*[a-z]+\S*\b/ig, function(match) {
            counter++;
            return $.inArray(match, stopWords) == -1 || counter === 1 ? match.substr(0, 1).toUpperCase()+match.substr(1) : match;
        });
        return str;
    } 
```

内联 JavaScript：

```
<ul class="nav-swap-video">
    <li><a id="nav-content1" class="" href="#st-mv1" onclick="changeVideo('../video/video_arriving.mpg');setTagContents('heading', 'Arriving');switchButton('1')" title="Arriving">Arriving
      <div class="video-nav-bottom"></div>
      </a>
    </li><li><a id="nav-content2" href="#st-mv2" onclick="changeVideo('../video/video_in_bag.mpg');setTagContents('heading', 'In the bag');switchButton('2')" title="In the bag" class="">In the bag
      <div class="video-nav-bottom"></div>
      </a>
      </li><li><a id="nav-content3" href="#st-mv3" onclick="changeVideo('../video/video_getting_ready.mpg');setTagContents('heading', 'Getting ready');switchButton('3')" title="Getting ready" class="nav-on-xx">Getting ready
      <div class="video-nav-bottom"></div>
      </a>
    </li><li><a id="nav-content4" href="#st-mv4" onclick="changeVideo('../video/video_after_swim.mpg');setTagContents('heading', 'After a swim');switchButton('4')" title="After a swim" class="">After a swim
      <div class="video-nav-bottom"></div>
      </a>
    </li></ul> 
```

我需要在设置标签内容后将其大写。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:23:58.043

```
$('.nav-swap-video li a').bind('click', function() {
        setTimeout(function() {
        $('#heading').text(capitalise($('#heading').text()));
    }, 0);
    }); 
```

# iphone - 在iphone中解析&到&中的json

> ID：11950549
> 
> 赞同：4
> 
> 时间：2012-08-14T10:40:15.017
> 
> 标签：iphone, ios, xcode, json, ipad

我有以下 json 响应.. 在这里我只显示了它的几行。如何替换`"&amp;"`并`&`存储在数组中。提前致谢。

```
[
    {
        "cat_id": "1",
        "cat_name": "Dining &amp; Nightlife",
        "0": {
            "subcat_id": "2",
            "subcat_name": "Restaurants"
        },
        "1": {
            "subcat_id": "3",
            "subcat_name": "Bar &amp;  Club"
        }
    }
] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T11:50:05.463

您的 JSON 数据未正确编码。除了 JSON 格式，所有的字符串似乎都是 HTML 编码的。这是双重编码，完全没有必要。

我强烈建议您从源头（即在服务器上）修复此问题。然后，您就有了正确的 JSON 数据，许多不同的客户端都可以毫无问题地使用这些数据。

如果您无法在服务器上修复它，那么您必须解码 JSON 响应中的每个字符串属性。在你这样做之前，你最好调查一下是否只有＆符号受到影响（不太可能）或其他特殊字符（例如 < > ä ô）。然后您可以将此添加到您的问题中，我们可能会为您提供帮助。

**更新**：我不太明白您使用哪些类将解析的 JSON 数据保存在内存中。（你提到了*数组*。）但是要修复双编码的＆符号，请在每个字符串上使用以下代码：

```
str = [str stringByReplacingOccurrencesOfString: @"&amp;" withString: @"&"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:28:44.003

尝试这个

```
 NSString *sting=[[NSString alloc]init];
     sting=[[request responseString] stringByReplacingOccurrencesOfString:@"&amp;" withString:@"&"];
      NSDictionary *resDict =[parser objectWithString:sting error:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T11:04:37.510

你必须在采取阵列。并使用 for 循环，您可以将 & 替换为 & 并将该字符串添加到数组中。做新的 araay...

# java - Javafx 机器人无法从 Javafx 2.2 工作

> ID：11950551
> 
> 赞同：2
> 
> 时间：2012-08-14T10:40:24.907
> 
> 标签：java, automation, javafx, javafx-2

看起来 com.sun.glass.ui.Robot 在 Javafx 2.2 中不再工作。

还有其他选择吗？

我已经转向 AWT 机器人，但这似乎不是最好的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T12:04:16.110

Glass (FX) 机器人在 2.2 中为我工作。接下来试试：

```
public void start(Stage stage) {
    Button btn = new Button();
    btn.setText("Button");
    btn.setOnAction(new EventHandler<ActionEvent>() {
        @Override
        public void handle(ActionEvent event) {
            System.out.println("Hello World!");
        }
    });

    Scene scene = new Scene(new Group(btn), 300, 250);

    stage.setTitle(VersionInfo.getRuntimeVersion());
    stage.setScene(scene);
    stage.setX(100);
    stage.setY(100);
    stage.show();

    Robot robot = com.sun.glass.ui.Application.GetApplication().createRobot();
    robot.mouseMove(130, 130);
    robot.mousePress(1);
    robot.mouseRelease(1);
} 
```

如果您希望添加公共 API，您可以投票支持下一期：http: [//javafx-jira.kenai.com/browse/RT-17571](http://javafx-jira.kenai.com/browse/RT-17571)

# google-play - Google Play 设计指南？

> ID：11950553
> 
> 赞同：0
> 
> 时间：2012-08-14T10:40:31.963
> 
> 标签：google-play

是否有任何来自 google 的文档为 google play 网站的图形设计提供指导？

例如，对于 android 图标[http://developer.android.com/guide/practices/ui_guidelines/index.html](http://developer.android.com/guide/practices/ui_guidelines/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:57:04.747

找到了：

[http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=1078870](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=1078870)

资源标题：应用程序的图形资源

# c# - 在列表中查找某个项目的特定关键字

> ID：11950557
> 
> 赞同：1
> 
> 时间：2012-08-14T10:40:45.163
> 
> 标签：c#, .net, windows

比如说我有一个如下列表：

```
List<string> myList = new List<string>(); 
```

其中包含：

```
item1
item 2
testing 123 
```

我怎么能说：

```
"where list item contains the value "123" return that item in full" 
```

因此输出结果将是：

```
testing 123 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:44:23.677

Try this:

```
List<string> myList = new List<string>()
{
    "item1",
    "item 2",
    "testing 123",
};

var contains123 = myList.Where(x => x.Contains("123")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T10:45:06.633

```
string s = myList.Where(p => p.Contains("123")).SingleOrDefault(); 
```

or

```
string s = myList.SingleOrDefault(p => p.Contains("123")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T10:45:59.520

看一看

```
 var list = new List<string>
            {
                "item1",
                "item 2",
                "testing 123"
            };
        var result = list.Find(x => x.Contains("123")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T10:43:56.810

```
string result = myList.Select(item => item.Contains("123")).FirstOrDefault();

if (result != null)
  Console.WriteLine(result); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T10:43:17.730

you can do that by using LINQ.

Example:

```
myList.Single(x => x == "testing 123"); 
```

if that is what you are looking for.

# iphone - 加密和签名创建

> ID：11950558
> 
> 赞同：0
> 
> 时间：2012-08-14T10:40:47.060
> 
> 标签：iphone, objective-c, ios, encryption, md5

我需要经历一个从Objective C中的以下过程创建签名的过程：

1.  ASCII 编码一个 NSString
2.  使用 MD5 对结果进行哈希处理
3.  对结果字节执行按位运算 (&127)
4.  转换为 Base64 字符串

我被困在从哪里开始。我能够在 C# 中完成这项任务，但在 Objective C 甚至 ANSI C 中不知所措。

我已经使用以下方法从初始 NSString 获取 UTF8String：

```
[NSString UTF8String] 
```

希望您能提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:35:32.567

1.  读取[字符串转换](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/CreatingStrings.html)
2.  按 H2CO3 下载NSString [MD5 类别](https://github.com/H2CO3/NSString-MD5)
3.  选择[Base64 编码器](https://stackoverflow.com/questions/392464/any-base64-library-on-iphone-sdk)

您提到您在字符串转换方面遇到问题，这就是您要转换为 ASCII 的内容：

```
NSString* src = @"";
NSData* data = [src dataUsingEncoding: NSASCIIStringEncoding allowLossyConversion: YES];
NSString* ascii = [[NSString alloc] initWithData: data encoding: NSASCIIStringEncoding]; 
```

执行按位运算有点复杂。您将希望在直接 C 中执行此操作，如下所示：

```
NSString* src = <MD5 hashed result>
NSMutableString* dst = [[NSMutableString alloc] initWithCapacity: src.length];
for(NSUInteger i=0;i<src.length;i++) {
    unichar c = [src characterAtIndex: i];
    [dst appendFormat: @"%d", (c & 127)];
}

//Base64 encode dst 
```

如果他们需要，第 3 方应该告诉您如何操作。

# asp.net-mvc - 在绑定到 ENUM 列表的 MVC3 Html.DropDownlListFor() 中预选项目

> ID：11950561
> 
> 赞同：0
> 
> 时间：2012-08-14T10:40:51.990
> 
> 标签：asp.net-mvc, selectlist, html.dropdownlistfor

我正在使用以下帮助方法将 MVC (3) selectList 绑定到枚举

```
public static List<SelectListItem> GetSelectList<T>()
{
    Type enumType = typeof(T);
    if (!enumType.IsEnum)
        throw new ArgumentException("The specified type is not enum");

    List<SelectListItem> enumList = new List<SelectListItem>();

    var values = Enum.GetValues(enumType);

    foreach (var value in values)
    {
        SelectListItem newItem = new SelectListItem();

        newItem.Value = Convert.ToInt32(value).ToString();
        newItem.Text = Regex.Replace(Enum.GetName(enumType, value), "([a-z](?=[A-Z])|[A-Z](?=[A-Z][a-z]))", "$1 ");

        enumList.Add(newItem);
    }
    return enumList;
} 
```

然后在我的控制器中调用该方法，并将第四个参数作为客户类型的预选 id 传递给 selectList 构造函数。

```
 _view.CustomerTypeSelectList = new SelectList(EnumHelper.GetSelectList<CustomerTypeEnum>(), "Value", "Text", _customer.TypeID); 
```

然后在视图中我绑定了 selectList

```
<%=Html.DropDownListFor(x => x.CustomerTypeId, Model.CustomerTypeSelectList )%> 
```

但是我无法让 selectList 预填充。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:06:40.617

您使用字符串-字符串值对填充 enumList，因此在指定所选元素时也应使用字符串（使用 Convert.ToInt32 和 ToString）。在您的 GetSelectList 助手中，您应该像这样返回 SelectList：

```
_view.CustomerTypeSelectList = new SelectList(EnumHelper.GetSelectList<CustomerTypeEnum>(), "Value", "Text", Convert.ToInt32(_customer.TypeID).ToString()); 
```

更好的解决方案是对 value 列使用枚举值并从 GetSelectList 返回 SelectList 对象：

```
 public static SelectList GetSelectList<T>()
    {
        Type enumType = typeof(T);
            if (!enumType.IsEnum)
                throw new ArgumentException("The specified type is not enum");

        var values = Enum.GetValues(enumType);
        var enumList = values.Select(e=>new { Value = e , Text = Regex.Replace(Enum.GetName(enumType, e), "([a-z](?=[A-Z])|[A-Z](?=[A-Z][a-z]))", "$1 ") })
        var selectList = new SelectList(values, "Value", "Text", enumObj);
        return selectList;
} 
```

# c# - 如何从xml中检索属性

> ID：11950562
> 
> 赞同：2
> 
> 时间：2012-08-14T10:40:58.167
> 
> 标签：c#, .net, xml, c#-4.0

我在`XmlDocument`. 我正在尝试从中提取`className`。

```
<Registration className="Eng" type="DirectRegistration" state="Activated"     xmlns="http://xyz/Registration">
  <Fields>
    <Field type="abc" value="123456" />
    <Field type="xyz" value="789" />
  </Fields>
</Registration> 
```

我已经尝试了以下代码，但它没有给我`className`。

```
var xmlNode = xmlDoc.DocumentElement; 
```

任何人都可以帮助我获得价值`className`。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T10:44:54.420

你几乎在那里：

```
var className = xmlDoc.DocumentElement.GetAttribute("className"); 
```

`xmlDoc.DocumentElement`给你*整个*元素；`GetAttribute`从中提取一个单独的命名属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:47:14.887

尝试使用这个：

```
// Trying to parse the given file path to an XML
XmlReader firstXML = XmlReader.Create(XMLPath);
firstXML.ReadToFollowing("Registration");
firstXML.MoveToAttribute("className");
var res = firstXML.Value; 
```

`res`将持有“className”值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T10:51:53.497

您还可以使用 xPath 来检索属性

```
string className = xmlDocument.SelectSingleNode("//Registration/@className").Value; 
```

# tsql - T-SQL - 接收日期值并调整日/月保留年份

> ID：11950569
> 
> 赞同：0
> 
> 时间：2012-08-14T10:41:22.003
> 
> 标签：tsql

我正在尝试对将传递给存储过程的值执行一些日期操作。

示例输入；

```
31/12/2008 
15/11/2007 
21/05/2005 
```

预期产出；

```
31/12/2012
15/11/2012
21/05/2012 
```

提供的答案中的格式化代码；

```
DECLARE @date DATETIME = '31/12/2007'
DECLARE @year INT 
SET @year = DATEPART(YEAR, GETDATE())
SELECT DATEADD(YEAR, @year - DATEPART(YEAR, @date), @date) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T10:44:18.760

You are trying to convert the year component to 2012?

```
-- get the year part
DATEPART(YEAR, [Date])

-- get the number of years to add
2012 - DATEPART(YEAR, [Date])

-- add that many years to the date
DATEADD(YEAR, 2012 - DATEPART(YEAR, [Date]), [Date]) 
```

# ruby-on-rails - 仅在哪里放置控制器的辅助方法？

> ID：11950570
> 
> 赞同：20
> 
> 时间：2012-08-14T10:41:23.300
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在寻找编写某些方法来处理字符串，以及在我的许多控制器中发生的其他任务。我知道在控制器中包含助手是不好的做法，所以我只是想知道，在哪里放置控制器中使用的应用程序范围方法的最佳位置？

我意识到你们中的一些人会说将它们放入模型中，但您必须意识到并非我的所有控制器都有关联的模型。任何和所有输入将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-14T11:07:46.900

我倾向于把它们变成助手。它们自动包含在视图中的事实对我来说不是问题。您还可以将它们放入 app/concerns/ 或 lib/ 之类的位置

我不喜欢将 ApplicationController 与私有方法混为一谈，因为这通常会变得一团糟。

例子：

```
module AuthenticationHelper
  def current_user
    @current_user # ||= ...
  end

  def authenticate!
    redirect_to new_session_url unless current_user.signed_in?
  end
end

module MobileSubdomain
  def self.included(controller)
    controller.before_filter :set_mobile_format
  end

  def set_mobile_format
    request.format = :mobile if request.subdomain == "m"
  end
end

class ApplicationController
  include AuthenticationHelper
  include MobileSubdomain
end 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-14T10:48:23.750

如果您需要在应用程序范围内使用方法，那么我建议您将这些方法保留在应用程序控制器中，以便在视图中使用它们。将它们声明为辅助方法。

例如，

```
class ApplicationController < ActionController::Base
 helper_method :current_user, :some_method

 def current_user
   @user ||= User.find_by_id(session[:user_id])
 end

 def some_method
 end
end 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-14T11:53:46.740

我建议将它们放在`lib`文件夹中。所以例如我有：

```
lib/utils/string_utils

module StringUtils

  def foo
     ...
  end
end

class BarController < ActionController::Base
  include StringUtils
end 
```

这展示了称为**Fat model, Thin controller**的好方法，在这种情况下，我们使用 Mixins 而不是 Models 来分离逻辑，但想法是相同的。您希望您的控制器尽可能简单。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-14T18:12:15.533

这一切都取决于您的需求。我将在这里提供 2 个示例。它们都只是一个自定义库，位于`lib`目录下。

**第一个例子——“自定义字符串处理”**

```
# lib/filters.rb
module Filters

  # Converts value to canonical view
  def self.phone(value)
    # remove all non-digits
    clean_value = value.gsub(/\D/, '')

    country_codes = configus.phone.country_codes
    area_code = configus.phone.defaults.area_code

    case clean_value.length
      when 7
        "#{area_code}#{clean_value}"
      when 11
        # remove country code only if phone starts with the allowed country code
        if country_codes.include?(clean_value[0].to_i)
          clean_value[1..-1]
        else
          clean_value
        end
      else clean_value
    end
  end

# usage
# app/api/phones_controller.rb
class Api::PhonesController < Api::ApplicationController

  def exists
    if params[:q]
      clean_value = Filters.phone(params[:q])
      ...
    end
  end
end 
```

**第二个例子 - flash 消息的助手**

```
# lib/flash_helper.rb
module FlashHelper
  def flash_translate(key, options = {})
    scope = [:flash, :controllers]
    scope += params[:controller].split('/')
    scope << params[:action]

    t(key, {:scope => scope}.merge(options))
  end
end

# app/application_controller.rb
class ApplicationController < ActionController::Base
  include FlashHelper
end

# usage
# app/your_controller.rb
class YourController < ApplicationController

  def create
    @object = Object.new(params[:object])

    if @object.save
      flash[:success] = flash_translate(:success)
      ...
    end
  end
end 
```

注意：不要忘记将`lib`dir 添加到自动加载路径。在`config/application.rb`添加/修改这一行`config.autoload_paths += %W(#{config.root}/lib)`。所以对我来说，答案是`lib`目录。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-10T08:04:56.803

从 Rails 4 开始，它有一个专用文件夹`app/controllers/concerns`。因此，您可以在那里创建一个模块，然后将其包含在特定的控制器中，或者如果您需要它在所有控制器中都可用，则将其包含在 ApplicationController 中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T10:48:58.010

如果这些方法在许多控制器中使用，我会在`application_controller.rb`. 每个控制器都将从它继承，并且能够使用那里定义的任何方法

# ios - 滚动到 UIScrollView 中的特定视图而不进行动画处理

> ID：11950572
> 
> 赞同：1
> 
> 时间：2012-08-14T10:41:25.593
> 
> 标签：ios, animation, uiscrollview, core-animation

我有 UIScrollView 和大约 20 个项目（UIViewControllers）。我在每个页面上都有按钮，可以帮助我在这 20 个项目之间跳转。因此，如果我在第一次查看时，按下按钮将我带到第 18 项，整个滚动视图正在滚动到该视图并动画滚动操作，因此我能够看到第 1 项和第 18 项之间的所有视图。

如果没有这个长动画，是否可以在滚动视图中从第 1 项跳转到第 18 项（我希望看到动画，就像我在两个相邻项之间滚动一样）？

我认为这行代码将帮助我防止这种长滚动动画：

```
[scrollView scrollRectToVisible:rect animated:NO]; 
```

但没有运气。

有什么建议么？

**[编辑 #1]**我在哪里滚动到特定视图的方法如下所示：

```
// I found view controller to which I want to scroll

CGRect rect = selectedViewController.view.frame;

float duration; // I calculate animation duration in some way now

[UIView beginAnimations:@"ScrollRectToVisible" context:nil];
[UIView setAnimationCurve:UIViewAnimationTransitionNone];

[scrollView scrollRectToVisible:rect animated:NO];
[UIView commitAnimations]; 
```

使用此代码，当我在 UIScrollView 中从第一个视图滚动到最后一个视图时，应用程序滚动到最后一个视图，并且该动画持续我计算的持续时间值。我看到存在于第一个和最后一个之间的每一个视图。我的愿望是立即从第一个视图滚动到最后一个视图，而不会看到它们之间的所有视图。

当我将 crollRectToVisible 行更改为：

```
[scrollView scrollRectToVisible:rect animated:YES]; 
```

同样的事情发生了，只是这一次滚动动画的发生速度快了 5 倍，但仍然显示了之间的所有视图。

**当我从方法中删除动画时，过渡立即发生。我的问题是如何实现这个动画到最后一个视图，当滑动到 UIScrollView 中的相邻视图时看起来相同？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:35:55.647

不显示这两者之间所有视图的唯一可能方法是..根本不拥有它们，或者使它们不可见。

但是，可能无法满足您的简单解决方案是将它们之间的所有视图的 alpha 设置为零，然后滚动。问题是它会滚动得非常快，我猜。

另一个更复杂的解决方案是完全删除这些视图，或者再次将它们的 alpha 设置为零，但将目标视图移动到第一个视图旁边——这将为您提供所需的效果。在此滚动之后，您应该将该视图移回它的原点并同时滚动到它的原点（通过更改 contentOffset）——这样用户就不会注意到它，然后将所有视图带回屏幕。

所以它看起来就像某种缩小你的滚动视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:37:43.120

所以你需要做的如下：

*   假设您有 5 个视图，a,b,c,d,e
*   您在 'b' 并且想要为 'e' 设置动画，就好像 'e' 在 'b' 旁边，而不是显示 'c' 或 'd'
*   当用户点击一个表示他们想看到'e'的按钮时，你将首先交换'c'和'e'
*   您可以按照自己的意愿从“b”动画到“e”（现在是它的邻居）
*   当动画停止时（您应该使用带有完成块的块动画），您将执行所有这些操作：
    *   交换'c'和'e'
    *   设置 scrollView 的 contentOffset，使水平值位于 'e' 所在的位置

现在你的数组又恢复了原来的样子，而用户对此一点也不聪明。

# android - 使用 SIPDROID 的 Android P2P 视频聊天

> ID：11950573
> 
> 赞同：3
> 
> 时间：2012-08-14T10:41:28.277
> 
> 标签：android, p2p, sip, voip, stun

我的计划是，为 Android 创建一个即时视频聊天应用程序。我发现 Sipdroid 让我有机会使用 SIP 进行视频和语音通话。

用户只需打开应用程序，就可以立即与池中的另一个陌生人进行视频聊天。

现在的问题是：我只需要设置一个 SIP 服务器并创建一个 SIP 帐户池或按需创建它们。然后我可以使用 Sipdroid 并对其进行修改，所以它符合我的需要。这就是全部吗？这个 STUN-Server 的东西怎么样？我错过了什么吗？

平均根服务器可以连接多少个连接？实际上应该很多，因为流是使用P2P传输的。

创建 P2P 匿名视频聊天应用程序的其他建议？我见过类似的应用程序。但他们使用 FLEX。这不是我想做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:49:08.323

看来你是在好的方向。您将需要在 2 个空闲用户之间进行匹配逻辑，并将该功能合并到 SipDroid 中。由于您会遇到各种极端情况，因此查找空闲用户可能会有些复杂。它在特征上可能与在[IMS](http://en.wikipedia.org/wiki/IP_Multimedia_Subsystem)系统中实现存在相似。

对于 STUN，它是[NAT traversal](http://www.voip-info.org/wiki/view/NAT+and+VOIP)的同义词。您可能需要关心这一点，但这取决于您的网络设置。

对于性能，它会因您使用的服务器实现和硬件而异。您将需要进行自己的基准测试。我猜你不需要担心，除非你有几十个并发用户。

# opensocial - 在 OpenSocial 小工具中设置本地化

> ID：11950578
> 
> 赞同：0
> 
> 时间：2012-08-14T10:41:46.887
> 
> 标签：opensocial, google-gadget

我想使用 OpenSocial 的本地化功能。但我想手动设置使用的语言。我只找到了 prefs.getLang() 来阅读当前语言。是否也可以设置它？

```
<Module>
<ModulePrefs>
    <Require feature="opensocial-0.9"/>
    <Require feature="embedded-experiences"/>
    <Require feature="dynamic-height"/>
    <Require feature="setprefs"/>
    <Locale lang="de" messages=".../locale/de_ALL.xml"/>
    <Locale lang="en" messages=".../locale/en_ALL.xml"/>
</ModulePrefs>
<UserPref ... 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:52:16.597

似乎 opensocial-container 应该自己选择正确的语言环境。发现无法手动进行。

# javascript - 在 javascript [no ajax] 中访问当前页面的页眉

> ID：11950587
> 
> 赞同：9
> 
> 时间：2012-08-14T10:42:25.810
> 
> 标签：javascript, html

如何使用 javascript 查看加载页面的页眉。

有什么我可以执行的

```
e.g. window.pageHeaders['session'] 
```

注意：我不是在谈论 Ajax 页面加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:52:43.173

看看这个[jsfiddle](http://jsfiddle.net/6DFNG/)。

从这个[问题](https://stackoverflow.com/questions/220231/accessing-http-headers-in-javascript)链接。

Raja 的这个答案将获得当前页面的页眉。

```
var req = new XMLHttpRequest();
req.open('GET', document.location, false);
req.send(null);
var headers = req.getAllResponseHeaders().toLowerCase();
alert(headers); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-04-21T01:12:57.193

你在做这样的事情吗？请向我们展示示例实现。

```
 <!--Save Headers-->
   <?php $currentHeaders = json_encode( getallheaders() ); ?>

   <!--Create Output Container-->
   <div id="output"></div>

   <!--Show Headers-->
   <button onclick="showheaders()">show headers</button>

   <!--Javascript Ugliness-->
   <script>
      function showheaders(){
         var headers = <?php echo $currentHeaders; ?>;

         // Collect your goodies here eg: var goodies = headers['proxy-authenticate'];
         console.log("Headers", headers);

         // See the output on screen?
         var output = document.getElementById('output');
            output.innerHTML = JSON.stringify( headers );
      }
   </script> 
```

# entity-framework - EntityFramework 迁移 cascadeDelete 参数

> ID：11950588
> 
> 赞同：9
> 
> 时间：2012-08-14T10:42:31.873
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

我正在使用 EF 4.3 迁移功能来创建数据库迁移脚本。当我运行 Add-Migration 命令时，生成的脚本是这样创建的：

```
 CreateTable(
            "dbo.Recipients",
            c => new
                {
                    RecipientID = c.String(nullable: false, maxLength: 128),
                    SurveyRoundID = c.String(nullable: false, maxLength: 128),
                    LastUpdatedAt = c.DateTime(),
                })
            .PrimaryKey(t => t.RecipientID)
            .ForeignKey("dbo.Employees", t => t.EmployeeID, cascadeDelete: true)
            .ForeignKey("dbo.SurveyRounds", t => t.SurveyRoundID, cascadeDelete: true)
            .Index(t => t.EmployeeID)
            .Index(t => t.SurveyRoundID); 
```

我遇到的问题是，即使实体 Recipient 不是关系的主人，脚手架迁移也会选择 cascadeDelete 为真。

现在我手动将 cascadeDelete 参数更改为 false，但我想知道为什么它默认选择 true。

谢谢你，伊多。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-20T15:14:12.847

感谢您的回答，它帮助了我，因为我注意到并且在尝试更新数据库时有时会出错，因为我的几个类有多个关系，使得级联删除并不理想。

请参阅下面的删除级联删除默认设置：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Conventions.Remove<OneToManyCascadeDeleteConvention>();
} 
```

这进入 Context 类。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-14T12:03:50.663

它按预期工作。它不是关系中的主体实体，因此它定义了外键约束，并且该约束具有级联删除选项。将级联删除设置为 true（EF 代码中的默认设置，除非您删除约定或在流畅映射中更改它）表示如果`Employee`删除记录，级联删除将触发删除`Recipient`（同样适用于`SurveyRounds`）。

这种模型对于级联删除确实不理想，因为实体依赖于多个关系。您应该直接在实体映射中删除级联删除。

# php - 简单的 PHP 模板引擎，允许使用 PHP 表达式来发明自己的语言

> ID：11950589
> 
> 赞同：0
> 
> 时间：2012-08-14T10:42:41.627
> 
> 标签：php, templating, templating-engine

我正在寻找一个简单的 PHP 模板引擎，它允许在替换中使用 PHP 表达式。模板应该只包含简单的变量替换而没有其他任何东西的“MVC 理想”通常会失败，常见的模板系统通过创建“变量过滤器”的语法（例如 Smarty 中管道之后的东西）来承认和响应，本质上是新的编程语言。

当我想在模板中做一些小的变量后处理时，我想写`{strtolower(trim($a))}`而不是`{$a|strip|lower}`，只是因为我不想记住所有东西的两种语法（通常是两个名称）。我知道它可能会被滥用，但我完全有能力自己遵守 MVC，我不需要一种语言来强迫我这样做。这（使用本地语言表达式）是完全常见的事情，例如在 Python 模板引擎中。

另一方面，我对“PHP”的答案不感兴趣。即使使用替代语法 ( `for:...endfor;`) 和`<?=`. 我想要一个用于变量（表达式）替换的漂亮而简单的语法`for`，, `if`, 等。它实际上可能是 PHP 之上的一个非常薄的语法糖层。

是否存在类似于上述描述的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:22:42.713

如果您希望在模板中使用 php 表达式，则可以使用 php 速记语法。如果您想走这条路，我建议您不要选择为您提供一些语法糖的模板系统，因为**您将失去 IDE 提示，例如语法突出显示和 lint**。

例如，如果你想回显一个变量，你可以这样做：

```
<h1><?=$name?></h1>
<h2><?=strtolower($name)?></h2> 
```

对于条件：

```
<?php if(true): ?>
Some markup
<?php endif; ?> 
```

类似的语法也可以用于循环。

快乐黑客！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:55:42.013

这是我写的一个简单的 PHP 模板引擎的链接：http: [//hardcoder.nazuka.net/projects/lint/](http://hardcoder.nazuka.net/projects/lint/)

# php - 将 POST 页面加载到 without having to use javascript

> ID：11950590
> 
> 赞同：2
> 
> 时间：2012-08-14T10:42:42.550
> 
> 标签：php, javascript, html

There is [this question](https://stackoverflow.com/q/10637382/1184247) that addresses "POSTing to an iframe using JavaScript".

> ## My scenario:
> 
> I am not allowed to use JavaScript or any of its libraries. Only thing I can use is PHP and HTML.
> 
> *   **Page1.php:**
>     
>     
>     
>     ```
>      <form action="Page2.php">
>             <input type="....  >
>              .
>              .
>              .
>        </form> 
>     ```
>     
>     
> *   **Page2.php:**
>     
>     
>     
>     ```
>      <iframe src="http://externalsite.com/post-to-this-address-thru-iframe">
>        </iframe> 
>     ```

This is always possible when JavaScript is used. Using PHP's post functions like curl also won't do. Is there really a source of light for me?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-14T13:56:43.063

如果您可以控制**Page2.php**和**http://externalsite.com/**，则可以将表单中发布的所有数据连接为 iframe src 字段中的 GET 请求：

```
<iframe src="http://externalsite.com/post-to-this-address-thru-iframe/?param1=val1&param2=val2">
</iframe> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-14T11:03:46.223

根据我的评论。

1.  将名称属性添加到您的 iframe。
2.  将表单的目标设置为 iframe 的名称。

[http://jsfiddle.net/gRoberts/GZPqM/](http://jsfiddle.net/gRoberts/GZPqM/)

**注意**- 似乎 JSFiddle 不喜欢你在他们的网站上发帖，结果你会得到一些奇怪的 JSON 输出。

# c# - 此消息是否错误？：“操作无法完成”

> ID：11950592
> 
> 赞同：1
> 
> 时间：2012-08-14T10:42:53.137
> 
> 标签：c#, visual-studio-2010

我有一个非常简单的解决方案，其中只有一个项目。该项目只是一个简单的 WinForms、一个连接到 sql-server 的配置文件和 2 个类文件。

我已将 WinForms 发布到生产环境中，并且工作正常。

如果我现在在 VS 中打开解决方案并选择 WinForms 并按 F5，我会收到一条消息“操作无法完成”并且 Winforms 不会出现。

如果我使用“不调试就开始”而不是 F5，那么它看起来没问题。

我应该担心这个消息吗？如果我应该那么我该如何追查其背后的原因？

**编辑** 这里是我可用的调试选项：

![在此处输入图像描述](../Images/3e019cac850af488204e6508e4e3a7b9.png)

![在此处输入图像描述](../Images/d7653eda7abd4682aa5bd3ce97c46b3e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:46:31.490

是的！那是一条错误消息！

在 YourProject 的“调试”选项卡中，有一个“启用 Visual Studio 托管进程”的调试器选项。

有关更多信息，请查看 [http://social.msdn.microsoft.com/Forums/en-US/vbide/thread/40d2d241-a0c0-4137-9da9-e40611972c0e/](http://social.msdn.microsoft.com/Forums/en-US/vbide/thread/40d2d241-a0c0-4137-9da9-e40611972c0e/)

![调试选项卡](../Images/cf2dda9249c352f2a1c7a31d41921397.png)

# javascript - 在 Array.map() 中调用类方法

> ID：11950599
> 
> 赞同：2
> 
> 时间：2012-08-14T10:43:11.880
> 
> 标签：javascript

这就是我想要的：

```
function MyClass() {
   this.some = new Array();
   this.another = new Array();
}

MyClass.prototype.some_method = function(element) {
   // some work with this.some
}

MyClass.prototype.another_method = function() {
   this.another.map(function(el) {
     this.some_method(el);   // error code
   });
} 
```

但我得到它的错误：

```
Uncaught TypeError: Object [object Window] has no method 'empty_cell' 
```

是否可以在匿名函数中调用 MyClass 方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T10:46:00.707

您可以将`this`作用域作为第二个参数传递给[map](https://developer.mozilla.org/docs/JavaScript/Reference/Global_Objects/Array/map)函数，如下所示：

```
MyClass.prototype.another_method = function() {
   this.another.map（函数（el）{
     this.some_method(el);
   }， 这）; // 添加了这个
}

```

# android - JqPlot 有时不在设备上显示图表

> ID：11950602
> 
> 赞同：4
> 
> 时间：2012-08-14T10:43:32.893
> 
> 标签：android, jqplot

我正在为包括标签在内的移动设备开发一个 Web 应用程序。
我正在使用 JqPlot 来显示图形，每件事都可以在我的桌面和模拟器上正常工作，但**有时**
它不会在设备上显示图形。甚至显示图表值但未绘制图表欢迎任何建议和答案..请帮助我们....还想知道是否有任何方法可以在设备浏览器上进行调试

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:07:44.063

确保您已将 DIV id 分配给该函数，并且您需要在调用图表插件之前创建 DOM div 元素，

如果这**适用于模拟器而不是实际设备，则意味着它可能存在内存泄漏**，

如果您正在重新绘制图表确保先前的对象已被处置..我只是提出一些建议，仅此而已**

# html - media="print" 和 .noprint { 显示：无；} 不管用

> ID：11950604
> 
> 赞同：3
> 
> 时间：2012-08-14T10:43:40.630
> 
> 标签：html, css, printing

所以我有

```
.noprint
{
display: none;
} 
```

在样式表 print.css 和

```
<link rel="stylesheet" type="text/css" href="/assets/css/print.css" media="print"/> 
```

在我的网页标题中。

我已将 noprint 类添加到几个 div 和图像中，但它们仍显示在 Google Chrome 的打印预览中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:05:38.733

有一个标记错误，阻止了带有 .noprint 类的 div 从 css 标记文件继承属性。

# bash - 在启动时删除 spotify 文件夹

> ID：11950605
> 
> 赞同：0
> 
> 时间：2012-08-14T10:43:43.497
> 
> 标签：bash, spotify

我已经在我的 ubuntu 12.04 机器上安装了 spotify。当我启动 Spotify 时，它就会关闭。我在某个论坛中找到了一种解决此问题的方法：只需删除文件夹 ~/.cache/spotify 然而，每次我想使用 Spotify 时都必须删除这个文件夹，这很烦人。

我的问题是，有没有办法告诉 Ubuntu 在我启动计算机时它应该删除这个文件夹及其内容？如果是这样，我该怎么做？

我的想法是在 .bashrc 文件中添加如下内容

```
if [ -d ~/.cache/spotify ]; then 
  rmdir ~/.cache/spotify 
fi 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:44:17.990

您可以设置一个简单的别名：

```
alias spotify="rm -rf ~/.cache/spotify && spotify" 
```

将此添加到您的`.bashrc`文件中，每次运行时`spotify`，首先删除缓存目录（如果不存在则忽略）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:46:56.623

如果您需要在 linux 启动时执行一项任务，我建议使用 /etc/rc.local 文件。但是，鉴于这只是一种解决方法，您可以修改 spotfiy 的启动脚本，在程序实际执行之前添加**rm -rf /home/your_username/.cache/spotify 。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:34:34.897

您使用的是什么版本的 Spotify？如果将“首选项”中缓存的最大大小设置为 0，会发生什么情况？

# php - 是否有任何示例显示如何将 InputFilter 应用于 Fieldset？

> ID：11950607
> 
> 赞同：0
> 
> 时间：2012-08-14T10:43:49.627
> 
> 标签：php, zend-framework2

我正在创建一个用于文件上传的模块，它本质上将提供一个 FieldSet 和一个视图助手来显示一个小部件。

我需要一个 Fieldset 有一个单独的 InputFilter，但我正在努力在框架中找到将 InputFilter 与 Fieldset 相关联的任何功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:01:51.167

您必须实施`InputFilterProviderInterface`. 请参阅下面的示例

```
use Zend\InputFilter\InputFilterProviderInterface;

class FooFieldset extends Fieldset implements InputFilterProviderInterface
{
   public function __construct() { // add elements }

   public function getInputFilterSpecification()
   {
       return array(
          'elementName' => array(
              'filters' => array(),
              'validators' => array(),
              'properties' => array(),
              'required' => true
          )
       );
   }
} 
```

尽管您告诉表单实际验证您的字段集，但这绝对是必需的。我个人是这样做的：

```
class BarForm extends Form
{
    public function __construct()
    {
         // other stuff, add elements and fieldset

         $this->setValidationGroup(array(
             'someElement',
             'someFieldset' => array(
                 'fieldSetElement#1',
                 'fieldSetElement#2'
             )
         ));
    }
} 
```

如果这太抽象了，请告诉我，我将使用真实示例对其进行编辑。我猜应该足以让你继续前进；）

# php - Integrating validation with Recaptcha (or required fields)

> ID：11950610
> 
> 赞同：0
> 
> 时间：2012-08-14T10:44:03.500
> 
> 标签：php, html, forms, recaptcha, required

I have a form below that I want to make certain fields required based on different things.

1.  I want the following fields to be a straight forward required field with a popup alert if they're not filled in:

    *   Name
    *   Email
2.  I want the phone field to be required if phone is ticked.

3.  Address to be required if post is ticked.

How can I make the alert's pop up if things are missing but if everything is ok then send the form?

```
<div id="contactform">
 <script type="text/javascript">
 var RecaptchaOptions = {
    theme : 'white'
 };
 </script>
 <form class="form" method="POST" action="<?php the_permalink(); ?>" onsubmit="return validateCaptcha()">
<input type="hidden" name="valid" value="0" />

    <table border="0" style="float:left;" width="490">
        <tbody>
            <tr>
                <td>
                <p>Name:</p>
                </td>
                <td>&nbsp;</td>
                <td colspan="2"><input type="text" name="fullname" id="fullname" /></td>
            </tr>
            <tr>
                <td>
                <p>Organisation:</p>
                </td>
                <td>&nbsp;</td>
                <td colspan="2"><input type="text" name="companyname" id="companyname" /></td>
            </tr>
            <tr>
                <td>
                <p>E-mail:</p>
                </td>
                <td>&nbsp;</td>
                <td colspan="2"><input type="text" name="email" id="email" /></td>
            </tr>
            <tr>
                <td>
                <p>Daytime Tel:</p>
                </td>
                <td>&nbsp;</td>
                <td colspan="2"><input type="text" name="tel" id="tel" /></td>
            </tr>
            <tr>
                <td valign="top">
                    <p>Contact Method:</p>
                </td>
                <td>&nbsp;</td>
                <td align="left" valign="top">
                    <p>
                        <input style="width:20px!IMPORTANT;" type="checkbox" name="CheckboxGroup1[]" value="Phone" id="phone" />
                        <label style="margin-right: 25px;">Phone</label>
                    </p>
                    <p>
                        <input style="width:20px!IMPORTANT;" type="checkbox" name="CheckboxGroup1[]" value="Email" id="email" />
                        <label style="margin-right: 25px;">Email</label>
                    </p>
                    <p>
                        <input style="width:20px!IMPORTANT;" type="checkbox" name="CheckboxGroup1[]" value="Post" id="post" />
                        <label style="margin-right: 25px;">Post</label>
                    </p>
                </td>
            </tr>  
            <tr>
                <td>
                <p>Address (if applicable):</p>
                </td>
                <td>&nbsp;</td>
                <td colspan="2"><input type="text" name="address" id="address" /></td>
            </tr>            
            <tr>
                <td valign="top">
                    <p>Where did you hear about us?:</p>
                </td>
                <td>&nbsp;</td>
                <td align="left" valign="top">
                    <p>
                        <input style="width:20px!IMPORTANT;" type="checkbox" name="CheckboxGroup2[]" value="Search Engine" id="search" />
                        <label style="margin-right: 25px;">Search Engine</label>
                    </p>
                    <p>
                        <input style="width:20px!IMPORTANT;" type="checkbox" name="CheckboxGroup2[]" value="NPA" id="NPA" />
                        <label style="margin-right: 25px;">NPA</label>
                    </p>
                    <p>
                        <input style="width:20px!IMPORTANT;" type="checkbox" name="CheckboxGroup2[]" value="Advertisement" id="advertisement" />
                        <label style="margin-right: 25px;">Advertisement</label>
                    </p>
                    <p>
                        <input style="width:20px!IMPORTANT;" type="checkbox" name="CheckboxGroup2[]" value="Brochure" id="brochure" />
                        <label style="margin-right: 25px;">Brochure</label>
                    </p>
                    <p>
                        <input style="width:20px!IMPORTANT;" type="checkbox" name="CheckboxGroup2[]" value="Show" id="show" />
                        <label style="margin-right: 25px;">Show</label>
                    </p>
                    <p>
                        <input style="width:20px!IMPORTANT;" type="checkbox" name="CheckboxGroup2[]" value="Other" id="other" />
                        <label style="margin-right: 25px;">Other</label>
                    </p>
                </td>
            </tr>            
            <tr>
                <td>
                <p>Please Specify:</p>
                </td>
                <td>&nbsp;</td>
                <td colspan="2"><input type="text" name="specify" id="specify" /></td>
            </tr>
        </tbody>
    </table>

    <table border="0" style="float:left;margin-left:146px;" width="490">
        <tbody>
<tr>
                <td>&nbsp;</td>
                <td>

<script type="text/javascript">
function validateCaptcha()
{
    if ($('input[name="valid"]')) return true;
    if ($('input[name="recaptcha_response_field"]').val() == "")
    {
        alert("Please complete the CAPTCHA field.");
        return false
    }
    $.ajax({
        url: "http://www.medilogicuk.com/wp-content/themes/default/verify.php",
        type: "POST",
        async:"false",
        data: {
            recaptcha_response_field: $('input[name="recaptcha_response_field"]').val(),
            recaptcha_challenge_field: $('input[name="recaptcha_challenge_field"]').val()
        },
        success: function(data){
            if (data == "OK")
            {
                $('input[name="valid"]').val(1);
                $('.form').submit();
            }
            else
            {
                alert(data);
            }
        },
        error: function(){
            alert("An error occured, please try again later");
        }
    });
    return false;
};
</script>

                <?php require_once('recaptchalib.php');
  $publickey = ""; // you got this from the signup page
  echo recaptcha_get_html($publickey);
?>
                </td>
            </tr>
            <tr>
                <td colspan="2"><button type="submit" name="submit" value="Send message">Send message</button></td>
            </tr>
        </tbody>
    </table>        

<? if(isset($_POST['submit'])) { 

$to = "rob@domain.com";
$header = 'From: info@domain.com';
$subject = "Website enquiry";
$companyname_field = $_POST['companyname'];
$fullname_field = $_POST['fullname'];
$email_field = $_POST['email'];
$tel_field = $_POST['tel'];
$address_field = $_POST['address'];
$specify_field = $_POST['specify'];
$CheckboxGroup1 = $_POST['CheckboxGroup1'];
$CheckboxGroup2 = $_POST['CheckboxGroup2'];
if( is_array($_POST['CheckboxGroup1']) ){
    foreach ($_POST['CheckboxGroup1'] as $val) {
        $checkbox1results .= $val.", ";
    }
}
if( is_array($_POST['CheckboxGroup2']) ){
    foreach ($_POST['CheckboxGroup2'] as $val) {
        $checkbox2results .= $val.", ";
    }
}

$body = "Hello,\n\n You have an enquiry from the website, please see the details below:\n\n Name: $fullname_field\n Company Name: $companyname_field\n E-Mail: $email_field\n Tel: $tel_field\n Method of contact: $checkbox1results\n Address: $address_field\n Hear about us?: $checkbox2results\n Specify: $specify_field\n\n Please reply to the enquiry asap.\n\n Kind Regards \n The website";

mail($to, $subject, $body, $header);

echo "</br><p style=\"color:#e41770!IMPORTANT;\">Thank you for getting in touch, we will contact you shortly.</p>";

} ?>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:26:21.483

Okie 给你一个简单的例子：

表格

```
<html>
  <body>
    <form action="#" method="POST">
      <input id="email" type="text" value="" />
        <a id="submit" href="#">Submit Form</a>
    </form>
  </body>
</html> 
```

jQuery部分：

```
$(document).ready(function(){
  $('a#submit').click(function(event){
      event.preventDefault();
      validateEmail();
  })
});

function validateEmail(){
  //declarations
  rule = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;

  //check
  if ($('input#email').val() === '' || !rule.test($('input#email').val())){
      alert ('That is not a Valid Email Address !');
      return false;
  } else {
      alert('validation passed! Submit the form !');
      //submit the form action here
  }
} 
```

你也可以在这里现场试用[http://jsfiddle.net/XMbEK/](http://jsfiddle.net/XMbEK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:50:20.020

您已经在代码中找到了答案：

```
<script type="text/javascript">
function validateCaptcha()
{
    if ($('input[name="valid"]')) return true;
    if ($('input[name="recaptcha_response_field"]').val() == "")
    {
        alert("Please complete the CAPTCHA field.");
        return false
    } 
```

在此之后添加您自己的需求：

```
if ( phone == 'what it needs to be' )
{

  if( email == 'asdasd' ) {
      // all is good
  } else {
    alert( 'need email too' );
  }
  return true;
}
else 
{
  alert('Blah blah wrong phone');
  return false;
} 
```

等等

# java - In apache cxf, how do I know the SOAP request message is gzip compressed?

> ID：11950613
> 
> 赞同：1
> 
> 时间：2012-08-14T10:44:22.237
> 
> 标签：java, web-services, apache, cxf

I'm using Apache CXF to send SOAP message. In specific case, I have to send a SOAP message gzip compressed.

Using log4j, I printed detailed info.

How can I know the message is gzip compressed and transfered to server?

Below is my Java code for gzip and log info.

**java code**

```
Client cxfClient = ClientProxy.getClient(port);
/** Logging Interceptor */
cxfClient.getInInterceptors().add(new GZIPInInterceptor());
cxfClient.getOutInterceptors().add(new GZIPOutInterceptor()); 
```

**log info**

```
20120814 18:56:15,351       DEBUG                   Interceptors contributed by bus: []
20120814 18:56:15,351       DEBUG                   Interceptors contributed by client: [org.apache.cxf.transport.http.gzip.GZIPOutInterceptor@1682a53]
20120814 18:56:15,351       DEBUG                   Interceptors contributed by endpoint: [org.apache.cxf.interceptor.MessageSenderInterceptor@1b2d7df, org.apache.cxf.jaxws.interceptors.SwAOutInterceptor@7a9224, org.apache.cxf.jaxws.interceptors.WrapperClassOutInterceptor@110b640, org.apache.cxf.jaxws.interceptors.HolderOutInterceptor@2d59a3]
20120814 18:56:15,351       DEBUG                   Interceptors contributed by binding: [org.apache.cxf.interceptor.AttachmentOutInterceptor@158015a, org.apache.cxf.interceptor.StaxOutInterceptor@c0c8b5, org.apache.cxf.binding.soap.interceptor.SoapHeaderOutFilterInterceptor@b914b3, org.apache.cxf.interceptor.BareOutInterceptor@fdfc58, org.apache.cxf.binding.soap.interceptor.SoapPreProtocolOutInterceptor@c22a3b, org.apache.cxf.binding.soap.interceptor.SoapOutInterceptor@1629e71]
20120814 18:56:15,351       DEBUG                   Interceptors contributed by databinding: []
20120814 18:56:15,357       DEBUG                   Adding interceptor org.apache.cxf.transport.http.gzip.GZIPOutInterceptor@1682a53 to phase prepare-send
20120814 18:56:15,358       DEBUG                   Adding interceptor org.apache.cxf.interceptor.MessageSenderInterceptor@1b2d7df to phase prepare-send
20120814 18:56:15,358       DEBUG                   Adding interceptor org.apache.cxf.jaxws.interceptors.SwAOutInterceptor@7a9224 to phase pre-logical
20120814 18:56:15,358       DEBUG                   Adding interceptor org.apache.cxf.jaxws.interceptors.WrapperClassOutInterceptor@110b640 to phase pre-logical
20120814 18:56:15,358       DEBUG                   Adding interceptor org.apache.cxf.jaxws.interceptors.HolderOutInterceptor@2d59a3 to phase pre-logical
20120814 18:56:15,358       DEBUG                   Adding interceptor org.apache.cxf.interceptor.AttachmentOutInterceptor@158015a to phase pre-stream
20120814 18:56:15,358       DEBUG                   Adding interceptor org.apache.cxf.interceptor.StaxOutInterceptor@c0c8b5 to phase pre-stream
20120814 18:56:15,358       DEBUG                   Adding interceptor org.apache.cxf.binding.soap.interceptor.SoapHeaderOutFilterInterceptor@b914b3 to phase pre-logical
20120814 18:56:15,358       DEBUG                   Adding interceptor org.apache.cxf.interceptor.BareOutInterceptor@fdfc58 to phase marshal
20120814 18:56:15,358       DEBUG                   Adding interceptor org.apache.cxf.binding.soap.interceptor.SoapPreProtocolOutInterceptor@c22a3b to phase post-logical
20120814 18:56:15,359       DEBUG                   Adding interceptor org.apache.cxf.binding.soap.interceptor.SoapOutInterceptor@1629e71 to phase write
20120814 18:56:15,360       DEBUG                   Chain org.apache.cxf.phase.PhaseInterceptorChain@31688f was created. Current flow:
  pre-logical [HolderOutInterceptor, SwAOutInterceptor, WrapperClassOutInterceptor, SoapHeaderOutFilterInterceptor]
  post-logical [SoapPreProtocolOutInterceptor]
  prepare-send [MessageSenderInterceptor, GZIPOutInterceptor]
  pre-stream [AttachmentOutInterceptor, StaxOutInterceptor]
  write [SoapOutInterceptor]
  marshal [BareOutInterceptor]

20120814 18:56:15,361       DEBUG                   Invoking handleMessage on interceptor org.apache.cxf.jaxws.interceptors.HolderOutInterceptor@2d59a3
20120814 18:56:15,361       DEBUG                   op: [OperationInfo: {https://asp.cyberbooking.co.kr/TopasApiSvc/services}getAirAvail]
20120814 18:56:15,361       DEBUG                   op.hasOutput(): true
20120814 18:56:15,361       DEBUG                   op.getOutput().size(): 2
20120814 18:56:15,361       DEBUG                   Invoking handleMessage on interceptor org.apache.cxf.jaxws.interceptors.SwAOutInterceptor@7a9224
20120814 18:56:15,364       DEBUG                   Invoking handleMessage on interceptor org.apache.cxf.jaxws.interceptors.WrapperClassOutInterceptor@110b640
20120814 18:56:15,364       DEBUG                   Invoking handleMessage on interceptor org.apache.cxf.binding.soap.interceptor.SoapHeaderOutFilterInterceptor@b914b3
20120814 18:56:15,365       DEBUG                   Invoking handleMessage on interceptor org.apache.cxf.binding.soap.interceptor.SoapPreProtocolOutInterceptor@c22a3b
20120814 18:56:15,365       DEBUG                   Invoking handleMessage on interceptor org.apache.cxf.interceptor.MessageSenderInterceptor@1b2d7df
20120814 18:56:15,365       DEBUG                   Adding interceptor org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor@dc9065 to phase prepare-send-ending
20120814 18:56:15,366       DEBUG                   Chain org.apache.cxf.phase.PhaseInterceptorChain@31688f was modified. Current flow:
  pre-logical [HolderOutInterceptor, SwAOutInterceptor, WrapperClassOutInterceptor, SoapHeaderOutFilterInterceptor]
  post-logical [SoapPreProtocolOutInterceptor]
  prepare-send [MessageSenderInterceptor, GZIPOutInterceptor]
  pre-stream [AttachmentOutInterceptor, StaxOutInterceptor]
  write [SoapOutInterceptor]
  marshal [BareOutInterceptor]
  prepare-send-ending [MessageSenderEndingInterceptor]

20120814 18:56:15,366       DEBUG                   Invoking handleMessage on interceptor org.apache.cxf.transport.http.gzip.GZIPOutInterceptor@1682a53
20120814 18:56:15,366       DEBUG                   Requestor role, so gzip enabled
20120814 18:56:15,366       DEBUG                   gzip permitted: YES
20120814 18:56:15,367       DEBUG                   Invoking handleMessage on interceptor org.apache.cxf.interceptor.AttachmentOutInterceptor@158015a
20120814 18:56:15,367       DEBUG                   Invoking handleMessage on interceptor org.apache.cxf.interceptor.StaxOutInterceptor@c0c8b5
20120814 18:56:15,370       DEBUG                   Adding interceptor org.apache.cxf.interceptor.StaxOutInterceptor$StaxOutEndingInterceptor@1f488f1 to phase pre-stream-ending
20120814 18:56:15,370       DEBUG                   Chain org.apache.cxf.phase.PhaseInterceptorChain@31688f was modified. Current flow:
  pre-logical [HolderOutInterceptor, SwAOutInterceptor, WrapperClassOutInterceptor, SoapHeaderOutFilterInterceptor]
  post-logical [SoapPreProtocolOutInterceptor]
  prepare-send [MessageSenderInterceptor, GZIPOutInterceptor]
  pre-stream [AttachmentOutInterceptor, StaxOutInterceptor]
  write [SoapOutInterceptor]
  marshal [BareOutInterceptor]
  pre-stream-ending [StaxOutEndingInterceptor]
  prepare-send-ending [MessageSenderEndingInterceptor]

20120814 18:56:15,370       DEBUG                   Invoking handleMessage on interceptor org.apache.cxf.binding.soap.interceptor.SoapOutInterceptor@1629e71
20120814 18:56:15,383       DEBUG                   Adding interceptor org.apache.cxf.binding.soap.interceptor.SoapOutInterceptor$SoapOutEndingInterceptor@1ce663c to phase write-ending
20120814 18:56:15,384       DEBUG                   Chain org.apache.cxf.phase.PhaseInterceptorChain@31688f was modified. Current flow:
  pre-logical [HolderOutInterceptor, SwAOutInterceptor, WrapperClassOutInterceptor, SoapHeaderOutFilterInterceptor]
  post-logical [SoapPreProtocolOutInterceptor]
  prepare-send [MessageSenderInterceptor, GZIPOutInterceptor]
  pre-stream [AttachmentOutInterceptor, StaxOutInterceptor]
  write [SoapOutInterceptor]
  marshal [BareOutInterceptor]
  write-ending [SoapOutEndingInterceptor]
  pre-stream-ending [StaxOutEndingInterceptor]
  prepare-send-ending [MessageSenderEndingInterceptor]

20120814 18:56:15,384       DEBUG                   Invoking handleMessage on interceptor org.apache.cxf.interceptor.BareOutInterceptor@fdfc58
20120814 18:56:15,387       DEBUG                   Compressing message.
20120814 18:56:15,388       DEBUG                   Sending POST Message with Headers to http://test.co.kr:80/###/###/###Conduit :{https://test.co.kr/###/####}###.http-conduit
Content-Type: text/xml; charset=UTF-8

20120814 18:56:15,388       DEBUG                   SOAPAction: "getAirAvail"
20120814 18:56:15,388       DEBUG                   Accept: */*
20120814 18:56:15,388       DEBUG                   Accept-Encoding: gzip;q=1.0, identity; q=0.5, *;q=0
20120814 18:56:15,388       DEBUG                   Content-Encoding: gzip
20120814 18:56:15,388       DEBUG                   No Trust Decider for Conduit '{https://test.co.kr/###/###}###.http-conduit'. An afirmative Trust Decision is assumed.
20120814 18:56:15,394       DEBUG                   Invoking handleMessage on interceptor org.apache.cxf.binding.soap.interceptor.SoapOutInterceptor$SoapOutEndingInterceptor@1ce663c
20120814 18:56:15,394       DEBUG                   Invoking handleMessage on interceptor org.apache.cxf.interceptor.StaxOutInterceptor$StaxOutEndingInterceptor@1f488f1
20120814 18:56:15,394       DEBUG                   Invoking handleMessage on interceptor org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor@dc9065
20120814 18:56:15,459       DEBUG                   Response Code: 200 Conduit: {https://test.co.kr/###/###}###.http-conduit
20120814 18:56:15,459       DEBUG                   Content length: 11034
20120814 18:56:15,459       DEBUG                   Header fields: 
    null: [HTTP/1.1 200 OK]
    Content-Language: [ko-KR]
    Date: [Tue, 14 Aug 2012 09:56:15 GMT]
    Content-Length: [11034]
    P3P: [CP='CAO PSA CONi OTR OUR DEM ONL']
    Expires: [Thu, 01 Dec 1994 16:00:00 GMT]
    Keep-Alive: [timeout=10, max=100]
    Set-Cookie: [WMONID=mL6rq_Irpa_; Expires=Wed, 14 Aug 2013 09:56:15 GMT; Path=/]
    Connection: [Keep-Alive]
    Content-Type: [text/xml; charset=utf-8]
    Server: [IBM_HTTP_Server]
    Cache-Control: [no-cache="set-cookie, set-cookie2"] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:55:06.897

您可以使用`cxf:features`来查看消息是否以 gzip 格式接收：

```
 <beans>
    ...
        <bean id="compressGZIPFeature" class="org.apache.cxf.transport.http.gzip.GZIPFeature"/> 
        <bean id="loggingFeature" class="org.apache.cxf.feature.LoggingFeature"/> 
        <cxf:bus id="yourCxfBus">
            <cxf:features> 
                <ref bean="compressGZIPFeature"/> 
                <ref bean="loggingFeature"/> 
            </cxf:features> 
        </cxf:bus>
        <cxf:cxfEndpoint id="soapMessageEndpoint"
                ... 
                bus="yourCxfBus"
                ...
                 />
        ...
    </beans> 
```

`logging`拦截器和拦截器都`gzip`在同一阶段运行，因此输出将取决于顺序。我的建议是使用该`Logging`功能，然后使用功能的顺序。

# c++ - 在 cpp 文件中列出外部变量

> ID：11950615
> 
> 赞同：0
> 
> 时间：2012-08-14T10:44:23.870
> 
> 标签：c++, mingw, external, nm

“nm”命令未列出外部变量，因为它们已被声明为 extern，因此在此程序中不会为它们分配内存。有没有其他方法可以列出外部变量？关于外部变量声明的信息存储在哪里？

os windows 7 编译器 mingw 或 vs2010

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:48:23.170

它们会在那里，标记为 U 表示未定义。

```
extern int foo;
int bar() {
  return foo++;
} 
```

给出：

```
g++ -c 测试.cc
纳米测试.o
00000000 T _Z3barv
         你富

```

请注意，`bar`此示例需要它才能工作。如果变量未使用，则不会在输出中生成引用。

# java - getting an error at Instance inst =new Instance(1.0, new double[attrs.size()]); Line

> ID：11950623
> 
> 赞同：2
> 
> 时间：2012-08-14T10:44:44.593
> 
> 标签：java, weka

I am getting an error at the following line :

```
Instance inst =new Instance(1.0, new double[attrs.size()]); 
```

Can any body explain how I can fix this error?

Here is the code:

```
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.HashSet;
import java.util.List;
import java.util.Map;
import java.util.Set;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import weka.core.Attribute;
import weka.core.FastVector;
import weka.core.Instance;
import weka.core.Instances;
import weka.core.converters.ArffSaver;

public class ContextualFeatureExtractor implements FeatureExtractor{
    private static final int NUMBASEATTR = 1;
    private static final int[] HOURCATEGORY = {3,3,3,3,0,0,0,0,0,0,1,1,1,1,1,1,2,2,2,2,2,2,3,3};
    private static final String[] TIMENAME = {"Morning","Afternoon","Evening","Night"};
    private static final int MINEMOTCOUNT = 100;

    private FastVector attrs;
    private Pattern emotpat;
    private ArrayList<String> emotslist;

    public void setupAttributes(List<Tweet> tweets)
    {
        attrs = new FastVector();
        // Determine attributes

        FastVector hourvals = new FastVector();
        hourvals.addElement(TIMENAME[0]); hourvals.addElement(TIMENAME[1]);
        hourvals.addElement(TIMENAME[2]); hourvals.addElement(TIMENAME[3]);
        Attribute timeofday = new Attribute("TimeOfDay", hourvals);
        attrs.addElement(timeofday);

        // Find frequent emoticons
        emotpat = Pattern.compile("\\p{Graph}*\\p{Punct}\\p{Graph}*");
        HashMap<String,Integer> emots = new HashMap<String,Integer>(100);
        for(Tweet t: tweets)
        {
            Matcher emotmat = emotpat.matcher(t.text);
            while (emotmat.find())
            {
                String curemot = emotmat.group();
                if(curemot.length() > 1 && curemot.length() < 5) {
                    if(emots.containsKey(curemot)) {
                        int curcount = emots.get(curemot);
                        curcount++;
                        emots.put(curemot, curcount);
                    }
                    else
                        emots.put(curemot, 1);
                }
            }
        }
        Set<Map.Entry<String,Integer>> emotset = emots.entrySet();
        Set<String> emotrem = new HashSet<String>(100);
        for(Map.Entry<String,Integer> emotmap : emotset)
        {
            if(emotmap.getValue() < MINEMOTCOUNT)
                emotrem.add(emotmap.getKey());
        }
        Set<String> goodemots = emots.keySet();
        goodemots.removeAll(emotrem);
        emotslist = new ArrayList<String>();
        for(String emot : goodemots)
        {
            Attribute attr = new Attribute("confeature:" + emot);
            attrs.addElement(attr);
            emotslist.add(emot);
        }
    }

    public Instances extractFeatures(List<Tweet> tweets)
    {
        if(attrs == null)
            setupAttributes(tweets);
        Instances feats = new Instances("Contextual Features", attrs, tweets.size());
        feats.setClassIndex(0);
        // Record features

        for(Tweet t: tweets)
        {

            Instance inst =new Instance(1.0, new double[attrs.size()]);
            inst.setDataset(feats);

            int hrcat = HOURCATEGORY[t.hour];
            inst.setValue(0, TIMENAME[hrcat]);

            Matcher emotmat = emotpat.matcher(t.text);
            while (emotmat.find())
            {
                String curemot = emotmat.group();
                if(emotslist.contains(curemot))
                {
                    int attrind = emotslist.indexOf(curemot)+NUMBASEATTR;
                    //double val = inst.value(attrind);
                    //val += 1.0;
                    inst.setValue(attrind, 1.0);
                }

            }           

            feats.add(inst);
        }

         ArffSaver saver = new ArffSaver();
         saver.setInstances(feats);
         try {
            saver.setFile(new File("output/contextual.arff"));
            saver.writeBatch();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return feats;
    }

    public static void main(String[] args) {
        ArrayList<Tweet> tweets = TweetFileParser.parseFile("data/train.40000.2009.05.25");
        ContextualFeatureExtractor cfe = new ContextualFeatureExtractor();
        Instances insts = cfe.extractFeatures(tweets);
        System.out.println(insts.toSummaryString());
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T11:49:10.490

从[Javadocs](http://weka.sourceforge.net/doc.dev/weka/core/Instance.html)中可以看出它`Instance`是一个接口——这意味着您不能实例化它，而是必须构造它的一个实现类。（这似乎是`BinarySparseInstance`或`DenseInstance`之一`SparseInstance`。）

然而，我确实看到在其他版本中，[`Instance`是一个具体的类](http://weka.sourceforge.net/doc/weka/core/Instance.html)。如果您正在使用库的另一个版本运行一个版本的示例，这可能会导致您遇到此错误。确保您使用的是您期望的版本，并检查该*版本*的文档以查看您可以调用的内容。

也可以看看：

*   [无法实例化类型...](https://stackoverflow.com/questions/5813694/cannot-instantiate-the-type)
*   [无法实例化类型`List<Product>`](https://stackoverflow.com/questions/7960149/cannot-instantiate-the-type-listproduc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:49:34.727

`weka - LibSVM => libsvm.jar`库不在类路径中。从[这里](http://weka.wikispaces.com/LibSVM)下载。或者，如果您有库，则将其添加到您的类路径中。

# android - How do I display only the cursor but not the standard Android keyboard when i click on EditText?

> ID：11950625
> 
> 赞同：1
> 
> 时间：2012-08-14T10:44:48.213
> 
> 标签：android, android-layout, android-widget

I want to set, in java code, my `EditText` so that, when i click will display only the `Cursor` but not the android standard keyboard. How can I do this? Thanks

I EDITED:

I have an array of EditText:

```
for (i=0;i<N*N;i++) {
    value[i].setOnTouchListener(this);
    value[i].setOnClickListener(this);
    value[i].setOnFocusChangeListener(this);
} 
```

and this method:

```
@Override
public void onClick(View v) {
    for (i =0 ; i < N*N; i++) {

        if(v == value[i]) {
        variable = 1;
        if(jey!=i) {
            jey=i;
            showDialog(CUSTOM_DIALOG);
            }
        }
    }
}

@Override
public void onTouch(View v, MotionEvent event) {
    for (i =0 ; i < N*N; i++) {

        if(v == value[i]) {
        variable = 1;
        if(jey!=i) {
            jey=i;
            showDialog(CUSTOM_DIALOG);
            }
        }
    }
}

@Override
public void onFocusChange(View v, boolean hasFocus) { 
    for (i =0 ; i < N*N; i++){
        if(v == value[i]) {
            variable =1;
            if(jey!=i) {
                jey=i;
                imm = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(value[jey].getWindowToken(), 0);
            }
        }
    }
} 
```

but in this way does not work I still see the standard keyboard

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:54:46.387

或者使用这个：

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN); 
```

**编辑：**

这是我在其他线程上找到的常见解决方案：

```
public class NoImeEditText extends EditText {

     public NoImeEditText(Context context, AttributeSet attrs) { 
          super(context, attrs);     
     }  

     @Override      
     public boolean onCheckIsTextEditor() {   
          return false;     
     }        
} 
```

由于这是我的第三次尝试并且我开始感到愚蠢，所以这次我亲自进行了测试，并且有效。如果您使用一种，请不要忘记更改布局中的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:59:24.300

要将它应用于一个 EditText（而不是 Activity 如何告诉其他答案），只需在 focusChangeListener 中提供隐藏。

```
mEditText.setOnFocusChangeListener(new CustomListener()); 
```

和自定义监听器：

```
protected class CustomListener implements View.OnFocusChangeListener {
    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        InputMethodManager imm = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(v.getWindowToken(), 0);
    }
} 
```

`hasFocus`只有当它是真的时，你才能检查和隐藏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T19:25:17.213

干得好。

```
/**
 * EditText which suppresses IME show up.
 */
public class DigitsEditText extends EditText {
    public DigitsEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
        setInputType(getInputType() | InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS);
    }

    @Override
    protected void onFocusChanged(boolean focused, int direction, Rect previouslyFocusedRect) {
        super.onFocusChanged(focused, direction, previouslyFocusedRect);
        final InputMethodManager imm = ((InputMethodManager) getContext()
                .getSystemService(Context.INPUT_METHOD_SERVICE));
        if (imm != null && imm.isActive(this)) {
            imm.hideSoftInputFromWindow(getApplicationWindowToken(), 0);
        }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        final boolean ret = super.onTouchEvent(event);
        // Must be done after super.onTouchEvent()
        final InputMethodManager imm = ((InputMethodManager) getContext()
                .getSystemService(Context.INPUT_METHOD_SERVICE));
        if (imm != null && imm.isActive(this)) {
            imm.hideSoftInputFromWindow(getApplicationWindowToken(), 0);
        }
        return ret;
    }

    @Override
    public void sendAccessibilityEventUnchecked(AccessibilityEvent event) {
        if (event.getEventType() == AccessibilityEvent.TYPE_VIEW_TEXT_CHANGED) {
            // Since we're replacing the text every time we add or remove a
            // character, only read the difference. (issue 5337550)
            final int added = event.getAddedCount();
            final int removed = event.getRemovedCount();
            final int length = event.getBeforeText().length();
            if (added > removed) {
                event.setRemovedCount(0);
                event.setAddedCount(1);
                event.setFromIndex(length);
            } else if (removed > added) {
                event.setRemovedCount(1);
                event.setAddedCount(0);
                event.setFromIndex(length - 1);
            } else {
                return;
            }
        } else if (event.getEventType() == AccessibilityEvent.TYPE_VIEW_FOCUSED) {
            // The parent EditText class lets tts read "edit box" when this View has a focus, which
            // confuses users on app launch (issue 5275935).
            return;
        }
        super.sendAccessibilityEventUnchecked(event);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-08T08:22:25.497

@Lupsaa 的最佳解决方案在[这里](https://stackoverflow.com/questions/4841476/hiding-the-android-keyboard-for-edittext/10399125#10399125)：

将标志 textIsSelectable 设置为 true 会禁用软键盘。

您可以像这样在 xml 布局中设置它：

```
<EditText
android:id="@+id/editText"
...
android:textIsSelectable="true"/> 
```

或以编程方式，如下所示：

```
EditText editText = (EditText) findViewById(R.id.editText); 
```

editText.setTextIsSelectable(true);

光标仍然存在，您将能够选择/复制/剪切/粘贴，但软键盘永远不会显示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-29T06:18:53.230

```
public void hideSoftKeyboard() {
    if(getCurrentFocus()!=null) {
        InputMethodManager inputMethodManager = (InputMethodManager) getSystemService(INPUT_METHOD_SERVICE);
    inputMethodManager.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(), 0);
    }
}

public void showSoftKeyboard(View view) {
InputMethodManager inputMethodManager = (InputMethodManager) getSystemService(INPUT_METHOD_SERVICE);
view.requestFocus();
inputMethodManager.showSoftInput(view, 0);
} 
```

**当你想显示键盘时，只需调用*`(showSoftKeyboard())`*，当你想隐藏键盘时，只需调用`(hideSoftKeyboard())`。**

**然后，只需在edittext上添加另一个相同大小的布局并在其上单击事件，然后在您无法单击edittext之后。**

> ```
>  <EditText
>                     android:id="@+id/etAnswer"
>                     android:layout_width="match_parent"
>                     android:layout_height="match_parent"
>                     android:background="@android:color/transparent"
>                     android:cursorVisible="false"
>                     android:inputType="number"
>                     android:maxLength="6"
>                     android:maxLines="1"
>                     android:paddingLeft="10dp"
>                     android:singleLine="true"
>                     android:textSize="20sp" />
> 
>                 <LinearLayout
>                     android:layout_width="match_parent"
>                     android:layout_height="match_parent"
>                     android:onClick="onClick" /> 
> ```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-14T10:52:37.457

```
add android:configChanges="keyboardHidden" in manifestfile to the activity 
```

# c# - 数组的 ReaderWriterLock

> ID：11950628
> 
> 赞同：4
> 
> 时间：2012-08-14T10:45:05.637
> 
> 标签：c#, multithreading, locking

我有一个数组，它代表一个库存，有近 50 个元素（项目：一些服装对象），我需要一个 readerwritelock （好吧，我认为一个简单的锁也足够了）。它应该支持引用更改和值更改。

由于读取和写入数组的不同位置是线程安全的（[证明](https://stackoverflow.com/questions/2798899/thread-safety-in-c-sharp-arrays)），我想确保对同一数组位置的多个读/写操作也是线程安全的。

我当然可以创建 50 个 readerwriterlocks，但我不想要那个 ;) 有没有办法存档这个？（我知道 ConcurrentList/Dictionary/etc。但我想要一个数组......）

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T10:57:41.307

如果您要*替换*数组中的引用，那么这已经是安全的，因为引用交换本质上是原子的。所以你可以使用：

```
var val = arr[index];
// now work with val 
```

和

```
var newVal = ...
arr[index] = newVal; 
```

完全安全，至少在避免撕裂参考方面。因此，一种实用的选择是**使对象不可变**，并仅采用上述方法。如果您需要更改该值，请获取本地副本，根据该副本制作新版本，然后交换它们。如果丢失的更新是一个问题，那么`Interlocked.CompareExchange`可以非常成功地使用重新应用循环（即您不断重新应用您的更改，直到您“获胜”）。这避免了*任何*锁定的需要。

但是，如果您正在改变单个对象，那么游戏就会改变。您可以使对象在*内部*成为线程安全的，但这通常并不美观。您可以为所有对象设置一个锁。但是，如果您想要粒度锁定，那么您将需要多个锁。

我的建议：使对象不可变，只需使用原子引用交换技巧。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T10:57:14.867

首先，您可能不需要任何锁。使用 CPU 以原子方式处理每次读取和写入的类型的数组进行读取和写入本身是线程安全的（但您可能需要放入内存屏障以避免过时的读取）。

也就是说，就像`x = 34`整数是线程安全的，但`x++`不是，如果您的写入依赖于当前值（因此是读取和写入），那么这不是线程安全的。

如果您确实需要锁，但不想要多达 50 个，则可以进行条带化。首先设置你的条带锁（我将使用简单的锁而不是`ReaderWriterSlim`较小的示例代码，同样的原则适用）：

```
var lockArray = new object[8];
for(var i =0; i != lockArray.Length; ++i)
  lockArray[i] = new object(); 
```

然后当你去使用它时：

```
lock(lockArray[idx % 8])
{
  //operate on item idx of your array here
} 
```

这是一个锁的简单性和大小与每个元素的一个锁的内存使用之间的平衡。

如果一个元素上的操作依赖于另一个元素的操作，如果您需要调整数组的大小，或者您需要拥有多个锁的任何其他情况，则会出现很大的困难。总是以相同的顺序获取锁可以避免很多死锁情况（因此没有其他需要多个锁的线程会尝试获取您已经拥有的锁而持有您需要的锁），但是您需要非常小心这些案例。

您还想确保，如果您正在处理索引 3 和索引 11，则避免两次锁定对象 3（我想不出这种特定的递归锁定会出错的方法，但为什么不避免它呢？而不是必须证明它是递归锁定是安全的情况之一？）

# jquery - Jquery AJAX 不刷新 ie 中的页面

> ID：11950637
> 
> 赞同：1
> 
> 时间：2012-08-14T10:45:34.420
> 
> 标签：jquery, asp.net, ajax, browser-cache

我有一个 ASP.Net 应用程序，它使用 jQuery 的 AJAX POST 方法来更新 DOM。

1.  用户输入日期
2.  用户单击链接按钮
3.  对数据库的 JQuery ajax post 调用会加载带有请求数据的 div。

一切正常，除非用户在 IE 中手动刷新页面。
如果他们做出更改然后点击浏览器刷新按钮，然后再次执行这三个步骤，即使数据库已正确更新，它也不会显示他们刚刚输入的更新数据。

它显示**原始数据**。

他们必须完全关闭浏览器并重新打开它才能看到更改。

这只发生在 IE 中。
FF 和 Chrome 会在刷新时显示更改。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T11:00:01.410

Internet Explorer 将 AJAX 请求缓存到 URL，并在您对同一 URL 进行另一个 AJAX 调用时简单地返回缓存的响应。值得庆幸的是，`cache`在 jQuery AJAX 调用上设置选项`false`将导致时间戳被附加到 URL，绕过缓存。

要为所有 jQuery AJAX 请求设置该选项，您可以使用如下[`$.ajaxSetup()`](http://api.jquery.com/jQuery.ajaxSetup/)函数：

```
$.ajaxSetup({cache : false}); 
```

将它放在 .js 文件的顶部，以便在任何 AJAX 请求之前执行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:00:31.637

我不明白你真正想要什么，但你是这样的：

1.  创建隐藏的输入，它的值指示页面是第一次加载还是回发。
2.  从 Page_loaded() 事件内部的代码中检查页面是否是第一次加载，并在隐藏的输入中存储一个 bool 值以表明这一点。
3.  在 $(document).ready() 函数内部检查隐藏的输入值，并基于此您可以决定是否进行 Jquery ajax 调用。

# c# - 如何获取大型 XDocument 中节点的值

> ID：11950639
> 
> 赞同：1
> 
> 时间：2012-08-14T10:45:39.910
> 
> 标签：c#, xml, linq, linq-to-xml

与 Google Checkout 合作很多，响应总是大量的 XML 数据。我想要的是从这个瓦砾中解析出名为商人私人数据的节点。

它可能并不总是存在，它可能位于多个位置（具有相同的值）。

我尝试了一种简单的方法，但没有产生任何结果。

从沙盒响应：

```
<?xml version="1.0" encoding="UTF-8"?>
<authorization-amount-notification xmlns="http://checkout.google.com/schema/2" serial-number="123456789">
    <authorization-amount currency="USD">11.65</authorization-amount>
    <authorization-expiration-date>2012-08-21T12:30:16.000Z</authorization-expiration-date>
    <avs-response>Y</avs-response>
    <cvn-response>U</cvn-response>
    ...
    <order-summary>
        ...
        <shopping-cart>
        ...
            <merchant-private-data>
                <MERCHANT_DATA_HIDDEN>50c77071-aeea-40fe-962b-f4d51d1f9b0</MERCHANT_DATA_HIDDEN>
            </merchant-private-data>
        ...
        </shopping-cart>
        ...
    </order-summary>
</authorization-amount-notification> 
```

可能在更多位置，并且可能并不总是在那个位置。

我的想法是这样，但它不起作用（即使我可以在 xml 中看到节点，也会产生 0 个结果）：

```
XDocument input = XDocument.Parse(xmldata);
string privateData = null;
var privateDataNode = (from nodes in input.Descendants("merchant-private-data") select nodes).FirstOrDefault();
if (privateDataNode != null && privateDataNode.HasElements && privateDataNode.Element("MERCHANT_DATA_HIDDEN") != null)
       privateData = privateDataNode.Element("MERCHANT_DATA_HIDDEN").Value; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:53:42.470

你缺少命名空间，试试这样：

```
 XDocument input = XDocument.Parse(xmldata);
        XNamespace ns = input.Root.Name.Namespace;

        string privateData = null;
        var privateDataNode = (from nodes in input.Descendants(ns + "merchant-private-data") select nodes).FirstOrDefault();
        if (privateDataNode != null && privateDataNode.HasElements && privateDataNode.Element(ns + "MERCHANT_DATA_HIDDEN") != null)
            privateData = privateDataNode.Element(ns + "MERCHANT_DATA_HIDDEN").Value; 
```

# sed - 将列添加到制表符分隔文件的中间（sed/awk/whatever）

> ID：11950641
> 
> 赞同：7
> 
> 时间：2012-08-14T10:45:45.047
> 
> 标签：sed, awk

我正在尝试将一列（内容为“0”）添加到预先存在的制表符分隔的文本文件的中间。我想象`sed`或`awk`将做我想做的事。我已经在网上看到了各种解决方案，它们大致可以做到这一点，但它们的解释不够简单，我无法修改！

我目前有这个内容：

```
Affx-11749850   1       555296  CC 
```

我需要这个内容

```
Affx-11749850   1   0   555296  CC 
```

使用命令`awk '{$3=0}1'`文件名会打乱我的格式并用 0 替换第 3 列，而不是用 0 添加第三列。

任何帮助（有解释！），所以我可以解决这个问题，以及未来的类似问题，非常感谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-14T11:10:04.863

使用隐式`{ print }`规则并将 附加`0`到第二列：

```
awk '$2 = $2 FS "0"' file 
```

或使用`sed`，假设单个空格分隔符：

```
sed 's/ / 0 /2' file 
```

或者`perl`：

```
perl -lane '$, = " "; $F[1] .= " 0"; print @F' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:55:58.097

```
awk '{$2=$2" "0; print }' your_file 
```

测试如下：

```
> echo "Affx-11749850 1 555296 CC"|awk '{$2=$2" "0;print}'
Affx-11749850 1 0 555296 CC 
```

# database - 中型数据库中索引字符串列的正常插入时间是多少？

> ID：11950646
> 
> 赞同：0
> 
> 时间：2012-08-14T10:46:03.577
> 
> 标签：database, performance, sqlite

我有一个只有一个表（大约 50,000 行）的 sqlite 数据库，我经常使用 Java 和 sqlitejdbc 对其执行更新 - 否则 - 插入操作（即，如果行存在，我会尝试更新行，否则插入新行）。我的表类似于带有“word”和“frequency”列的词频表，并且没有主键！

问题是我执行了数十万次更新否则插入操作，平均插入或更新操作需要超过 2 毫秒。甚至有时插入操作需要大约 20 毫秒。我还应该提到，该表在我在插入操作中使用“where”子句的列（“word”列）上有一个索引，这自然会使插入操作更加昂贵。

首先，我想确保对具有 50,000 行的索引表进行插入操作的 2 毫秒是否正常，并且我没有遗漏任何内容，之后任何提高性能的建议都非常受欢迎。让我感到震惊的是，在执行大量插入操作之前删除索引并在之后重新创建它是一种很好的做法，但我不能在这里这样做，因为我需要检查是否已经存在具有相同单词的行。

我知道所有关于“它取决于硬件”和“它取决于你的代码的其余部分”等的东西，但我真的认为人们可以知道插入操作在普通电脑上应该花费多少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:24:29.100

我部分解决了我的问题。对于对此问题的答案感兴趣的任何人，[此](https://stackoverflow.com/questions/1711631/how-do-i-improve-the-performance-of-sqlite)链接都会有所帮助。简而言之，关闭 sqlite 中的日志模式（“pragma journal_mode=OFF”）显着提高了插入性能（在我的情况下几乎是以前速度的四倍），但代价是在意外关闭时使代码容易丢失数据。

至于正常的插入速度，它比 2ms/操作快得多。使用正确的 pragma 指令、充分利用事务等，它可以达到每秒数十万次插入操作。

# c++ - 异步完成处理

> ID：11950649
> 
> 赞同：0
> 
> 时间：2012-08-14T10:46:08.847
> 
> 标签：c++, multithreading, asynchronous

我有这种情况：

```
void foo::bar()
{
    RequestsManager->SendRequest(someRequest, this, &foo::someCallback);
} 
```

RequestsManager 以异步方式工作的地方：

*   SendRequest 将请求放入队列并返回给调用者
*   其他线程从队列中获取请求并处理它们
*   当一个请求被处理时，回调被调用

是否可以在与 SendRequest 相同的线程中调用 foo::someCallback？如果没有，我该如何避免遵循“回调限制”：回调不应进行耗时的操作以避免阻塞请求管理器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:59:19.720

否 - 调用/回调不能更改线程上下文 - 您必须发出一些信号才能在线程之间进行通信。

通常，“someCallback”会发出一个事件信号，在该事件上发起“SendRequest”调用的线程正在等待（同步调用），或者将 SendRequest（因此，可能是其处理的结果）推送到队列中发起“SendRequest”调用的线程最终将弹出，（异步）。仅取决于如何向发起者发出信号..

Aynch 示例 - 回调可能 PostMessage/Dispatcher.BeginInvoke 完成的 SendRequest 到 GUI 线程以显示结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:01:46.657

取决于“耗时操作”的定义。

执行此操作的经典方法是：

*   处理请求时，`RequestManager` 应该执行`&foo::someCallback`
*   为避免*阻塞*请求管理器，您可以在此回调中升旗
*   在线程内定期检查该标志，这称为`RequestsManager->SendRequest`
*   这面旗帜将只是一个`volatile bool`内部`class foo`

* * *

如果您想确保调用线程 ( `foo`'s) 将立即理解`request`已处理，您需要额外的同步。

在这些线程之间实现（或使用已经实现的）阻塞管道（或使用信号/事件）。这个想法是：

*   `foo`的线程执行`SendRequest`
*   `foo`开始睡一些[`select`](http://linux.die.net/man/2/select)（例如）
*   `RequestManager`执行请求并且：
    *   来电`&foo::someCallback`
    *   “唤醒”`foo`的线程（通过在该文件描述符中发送一些东西，该文件描述符`foo`（使用`select`）休眠）
*   `foo`被唤醒
*   检查`volatile bool`已处理请求的标志
*   做它需要做的事
*   取消国旗

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T11:04:19.497

我可以看到几种方法来实现它：

**A) 实施类似于信号处理的策略**

当请求处理结束时，`RequestManager`将回调调用放在等待列表中。下一次`SendRequest`被调用，在返回执行之前，它将检查线程是否有任何挂起的回调并执行它们。这是一种相对简单的方法，对客户端的要求最低。如果延迟不是问题，请选择它。`RequestManager`可以公开 API 以强制检查挂起的回调

**B) 挂起回调目标线程并在第三个线程中执行回调**

这将为您提供*真正的*异步解决方案及其所有注意事项。看起来目标线程执行被中断并且执行跳转到中断处理程序。在回调返回之前，需要恢复目标线程。您将无法从回调内部访问线程本地存储或原始线程的堆栈。

# xml - 删除 xml 文档中的所有前导和尾随空格

> ID：11950652
> 
> 赞同：2
> 
> 时间：2012-08-14T10:46:13.657
> 
> 标签：xml, xslt, xslt-1.0

有没有一种方法可以使用 xslt 删除 xml 文档中元素和属性中的所有前导和尾随空格？

```
<Root>
  <a>string    </a>
  <b r="another   ">second    </b>
</Root> 
```

预期产出

```
<Root>
  <a>string</a>
  <b r="another">second</b>
</Root> 
```

注意：这是一个示例 xml，我的源 xml 文档中有许多元素和属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:28:23.997

**如果您使用该`normalize-space()`函数，则结果是删除了所有前导和尾随空白字符的字符串**。

**但是**，它也用单个空格字符替换任何中间空白字符组。

**如果您不想要最后提到的效果，那么一种解决方案是使用`trim`FXSL 1.x 的模板功能**（FXSL 完全用 XSLT 1.0 编写）。

下面是一个使用`trim`模板/函数的小例子：

```
<xsl:stylesheet version="1.0" 
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:import href="trim.xsl"/>

  <!-- to be applied on trim.xml -->

  <xsl:output method="text"/>
  <xsl:template match="/">
    '<xsl:call-template name="trim">
        <xsl:with-param name="pStr" select="string(/*)"/>
    </xsl:call-template>'
  </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<someText>

   This is    some text   

</someText> 
```

**产生了想要的正确结果：**

```
'This is    some text' 
```

# textwriter - 无法写入已关闭的 TextWriter

> ID：11950655
> 
> 赞同：1
> 
> 时间：2012-08-14T10:46:27.603
> 
> 标签：textwriter

我有一个错误，

> “无法写入已关闭的 TextWriter。”

**代码：**

```
public class Logs
{
    static string File_Path= "";
    static public FileStream fs;
    static public StreamWriter sw;
    public static void Initialize(string path)
    {
        File_Path = path;

        fs = new FileStream(File_Path, FileMode.Append, FileAccess.Write);
        sw = new StreamWriter(fs);
    }
    public static void info_log(string msg)
    {                      
        sw.WriteLine("{0} [INFO] : {1}",DateTime.Now.ToString(),msg);
        sw.WriteLine(" ");
        sw.Close();
        sw.Flush();
    }
    public static void error_log(Exception ex)
    {
        sw.WriteLine("{0} [ERROR] : {1}", DateTime.Now.ToString(), ex.Message);
        sw.WriteLine("StackTrace : {0}:", ex.StackTrace);
        sw.WriteLine(" ");
        sw.Close();
        sw.Flush();
    }
    public static void warning_log(string msg)
    {
        sw.WriteLine("{0} [WARNING] : {1}", DateTime.Now.ToString(), msg);
        sw.WriteLine(" ");
        sw.Close();
        sw.Flush();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:05:09.963

好吧，您正在关闭 StreamWriter，然后在每次写入后刷新它。换句话说，您关闭流，然后尝试写入它。

通常，您希望初始化一次，然后使用日志记录方法。那只需要`sw.Flush()`写后。（所以......`sw.Close()`在每种方法中删除它）。

但是，如果您的应用程序仅在极少数情况下记录消息，您将在每次调用之前进行初始化（因为这种情况很少发生）并在刷新后关闭。那将需要重新排序`sw.Flush()`and `sw.Close()`。

# python - AttributeError：“Widget17_Sorter”对象没有属性“get_data_from_database”

> ID：11950659
> 
> 赞同：0
> 
> 时间：2012-08-14T10:46:35.853
> 
> 标签：python, import, module

实际上我看不出我在这里做错了什么，但我想这是一个非常简单和基本的问题：

模块 1 称为 Widget17_Sorter.py：

```
class Widget17_Sorter(object):

    def get_data_from_database(self, database_name, user, password, host ):
        ...do stuff here... 
```

模块 2 称为 Test_Widget17_Sorter.py（实际上是一个单元测试）

```
import Widget17_Sorter

class Test(unittest.TestCase):

    ...do some other stuff here...

    def test_get_data_from_database(self):
        sorter = Widget17_Sorter.Widget17_Sorter()
        raw_data = sorter.get_data_from_database( self.database_name, 
                                    self.user, self.password, self.host ) 
```

执行测试时，我收到以下错误消息：

```
ERROR: test_get_data_from_database (__main__.Test)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "TestWidget17_Sorter.py", line 50, in test_get_data_from_database
    raw_data = sorter.get_data_from_database( self.database_name,
AttributeError: 'Widget17_Sorter' object has no attribute 'get_data_from_database' 
```

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:52:55.537

尝试以这种方式导入：

```
from Widget17_Sorter import Widget17_Sorter
...
my_widget = Widget17_Sorter(...)
my_widget.get_data_from_database(...) 
```

...并将两个脚本放在同一个文件夹中...

# asp.net-mvc - 使用 editorTemplates 在视图中填充列表

> ID：11950662
> 
> 赞同：2
> 
> 时间：2012-08-14T10:46:43.083
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

这是我的模型

```
namespace chPayroll.Models.CustInformations
{
    public class CustContact
    {
        public int cId { get; set; }
        public int cNoType { get; set; }
        public string cNo1 { get; set; }
        public string cNo2 { get; set; }
        public string cNo3 { get; set; }
        public List<CustContact> contact { get; set; }
    }
} 
```

这是我的编辑器模板

```
@model chPayroll.Models.CustInformations.CustContact         

@Html.TextBoxFor(model => model.cNo1)
@Html.TextBoxFor(model => model.cNo2)
@Html.TextBoxFor(model => model.cNo3) 
```

我需要显示三个用于接收电子邮件的文本框，三个用于接收电话号码的文本框。在视图中。如何将项目添加到模型中定义的列表联系人中，使其显示如下

```
email:--textbox1----textbox2----textbox3--
telephone:--textbox1----textbox2----textbox3-- 
```

并将值发送给控制器

实际上我正在尝试将我的数据发送到名为联系人的列表中，即在列表中

```
index 0-email1-email2-email3
index 1-tel1-tel2-tel3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:12:22.900

@Sanjay：您的视图模型中有一个奇怪的构造：

```
public class CustContact
{
   public List<CustContact> contact;
} 
```

即使它编译并且机器可以理解它，我也不会按原样使用它 -*你试图通过拉起你的头发来将自己从地面上抬起来*:)

它应该按照以下方式定义（遵循您的命名约定和逻辑）：

```
public class CustContact // single
{
    public int cId { get; set; }
    public int cNoType { get; set; }
    public string cNo1 { get; set; } // those are actual phones, emails etc data
    public string cNo2 { get; set; }
    public string cNo3 { get; set; }
}

public class CustContacts // plural
{
   public List<CustContact> Contacts;
} 
```

看法：

```
@model CustContacts
@EditorFor(m => Model) 
```

编辑器模板：

```
@model CustContact
@Html.EditorFor(m => m.cNo1)
@Html.EditorFor(m => m.cNo2)
@Html.EditorFor(m => m.cNo3) 
```

为简洁起见，我们在这里不处理注释、装饰、错误处理等。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:01:59.523

根据对问题的评论，我将构建如下模型

```
public class CustContact
{
    public int cId { get; set; }
    public int cNoType { get; set; }
    public string cNo1 { get; set; }
    public string cNo2 { get; set; }
    public string cNo3 { get; set; }
}

public class Customer
{
    public CustContact Email {get; set;}
    public CustContact Telephone {get; set;}
} 
```

然后为该编辑器模板创建一个编辑器模板，`Customer`并在该编辑器模板中具有以下逻辑

```
@Html.EditorFor(model => model.Email)
@Html.EditorFor(model => model.Telephone) 
```

希望这可以帮助

# cuda - GPUDirect RDMA 从 GPU 传输到远程主机

> ID：11950666
> 
> 赞同：10
> 
> 时间：2012-08-14T10:47:06.693
> 
> 标签：cuda, infiniband, rdma, gpudirect

## 设想：

我有两台机器，一个客户端和一个服务器，用 Infiniband 连接。服务器机器有一个 NVIDIA Fermi GPU，但客户端机器没有 GPU。我有一个在 GPU 机器上运行的应用程序，它使用 GPU 进行一些计算。GPU 上的结果数据从不被服务器机器使用，而是直接发送到客户端机器而不进行任何处理。现在我正在做一个`cudaMemcpy`将数据从 GPU 获取到服务器的系统内存，然后通过套接字将其发送到客户端。我正在使用[SDP](http://en.wikipedia.org/wiki/Sockets_Direct_Protocol)为这种通信启用[RDMA](http://en.wikipedia.org/wiki/Remote_Direct_Memory_Access)。

## 问题：

在这种情况下，我是否可以利用 NVIDIA 的 GPUDirect 技术摆脱`cudaMemcpy`呼叫？我相信我已经正确安装了 GPUDirect 驱动程序，但我不知道如何在不先将其复制到主机的情况下启动数据传输。

我的猜测是不可能将 SDP 与 GPUDirect 结合使用，但是是否有其他方法可以启动从服务器机器的 GPU 到客户端机器的 RDMA 数据传输？

**奖励：**如果 somone 有一种简单的方法来测试我是否正确安装了 GPUDirect 依赖项，那也会很有帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T04:27:36.363

是的，支持网络硬件是可能的。请参阅[GPUDirect RDMA 文档](https://docs.nvidia.com/cuda/gpudirect-rdma/index.html)。

# iphone - IB - 无法为视图控制器分配类

> ID：11950667
> 
> 赞同：11
> 
> 时间：2012-08-14T10:47:09.503
> 
> 标签：iphone, ios, xcode, uiviewcontroller, interface-builder

我对IOS开发很陌生，在这里我遇到了一个我以前没有遇到过的问题。这是我所拥有的：

我创建了一个项目，添加了一些附加到他们自己的类的 ViewController。但是现在，我只是在情节提要中添加了一个新的 ViewController。然后我创建了一个新的 Objective-C 类（其中是 UIViewController 的子类）。问题是在 IB 中，我无法将 ViewController 链接到新创建的类，因为我根本没有 IB 提供的列表中的类（见下图）。我的新课程名为`MapShownViewController`，但正如您在图像上看到的那样，它不可用。

![在此处输入图像描述](../Images/13c771f56c031087f9c81b18bb329e69.png)

它适用于我所有其他课程，但不适用于这个课程。

这是 MapShownViewController.h ：

```
#import <UIKit/UIKit.h>

@interface MapShownViewController : UIViewController

@end 
```

和 MapShownViewController.m ：

```
#import "MapShownViewController.h"

@interface MapShownViewController ()

@end

@implementation MapShownViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

有人可以解释一下我做错了什么吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-14T12:19:52.827

我有这个确切的问题，它让我发疯。我是在将 XCode 从 4.1 升级到 4.4 后第一次注意到它。我有一个现有的项目，我一直在使用旧版本的 XCode，我在 4.4 中继续处理它。我完全按照您的做法在故事板中创建了一个新视图，然后创建了子类文件，但是该类在 IB 的“自定义类”下拉列表中不可用。经过多次谷歌搜索和沮丧后，我求助于退出 Xcode（完全退出，而不仅仅是关闭）然后重新启动它。然后就像魔法一样，这一切都开始工作了，新的类在 IB 自定义类下拉列表中立即可用。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-12-10T18:29:19.253

遇到同样的问题，重新启动 XCode 没有帮助。您始终可以右键单击情节提要并选择`Open As > Source Code`. 在 XML 文件中找到您的视图控制器元素并添加一个`customClass`属性：

```
<viewController title="Login" id="TJH-Bg-q4u" customClass="XYZLoginViewController" sceneMemberID="viewController">
   ...
</viewController> 
```

手动覆盖 FTW :)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T11:12:31.460

为此，您必须确保以下几点：

1) 添加到情节提要的元素是**UIViewController**

2) 你定义的类有**UIViewController**作为它的超类

```
@interface MapShownViewController : UIViewController 
```

3）该类正在项目中正确构建。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-14T10:50:59.607

检查您的项目设置。xcode->targets->build phase->compile sources 你的 viewcontroller 的实现文件必须添加到这个列表中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-27T00:43:55.177

我一直遇到这个问题并尝试了此处发布的所有其他解决方案。

对我有用的是在创建自定义类后设置正确的超类。然后您应该能够从类下拉列表中找到并选择它。

例如

```
class LabsViewController: UITableViewController { 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-16T16:20:12.567

我必须设置从 UIViewController 继承并充当 UITableViewController 的表视图控制器的自定义类。我做了一个简单的技巧，只是将我的自定义类继承更改为“：UITableViewController”，然后我可以自由地将这个类设置为控制器。当然，在它设置之后我改变了继承。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-14T10:50:34.513

检查您是否确实在新班级中选择了正确的超级班级。有时你会创建一个由 UITableVIewController 继承的视图控制器。这不能应用于 Storyboard 中的 ViewController 模式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-07T08:07:54.057

只是添加另一个可能的解决方案来帮助解决我的问题，因为其他人没有。

我注意到使用 Command+Shift+O 搜索我的自定义视图控制器文件时找到了它，但是我看不到该文件在哪个文件夹中，所以我注意到由于某种原因我的自定义类从项目中丢失了，但是仍在搜索中找到。

我所要做的就是再次将文件移动到项目中，瞧！

希望这可以帮助将来的人。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-05T15:02:06.353

我在 Mac OSX 应用程序上使用 Xcode 7.1.1 时遇到了同样的问题。我尝试了其他答案中的所有建议——没有成功。

最后我删除了我的视图控制器文件并创建了全新的。
然后它突然起作用了......

# java - 有效的 CMIS 查询

> ID：11950671
> 
> 赞同：0
> 
> 时间：2012-08-14T10:47:21.550
> 
> 标签：java, alfresco, cmis, apache-chemistry

我与 Alfresco 和 OpenCMIS 合作，想要获取文件夹和文档。

询问：

```
SELECT D.cmis:objectId, F.cmis:objectId 
FROM cmis:folder AS F JOIN cmis:document AS D 
WHERE IN_FOLDER('"+ folderId +"') 
AND cmis:name like '%name%'" 
```

但它不起作用。请帮我编写有效的查询。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T11:11:06.520

您不能使用相同的 CMIS 查询来查询文件夹和文档。您必须将其拆分为两个查询。

# javascript - 如何在 JavaScript 中向 struct 添加新项目？

> ID：11950674
> 
> 赞同：2
> 
> 时间：2012-08-14T10:47:30.287
> 
> 标签：javascript, arrays

我在 JavaScript 中有一个结构

```
 settings = {
        "type-1": {
            "setting-1": true,
            "setting-2": 2
         }
        "type-2": {
            "setting-3": "value",
         }
    }; 
```

我可以修改项目：

```
settings["type-1"]["setting-1"] = false; 
```

但是我怎样才能在这个结构中添加一个新项目呢？

试

```
settings["type-new"]["setting-100"] = "new one"; 
```

但是 settings["type-new"] 是未定义的。那么如何添加一个新的呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T10:57:14.040

你可以在一行上做到这一点：

```
settings["type-new"] = {"setting-100": "new one"} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T10:48:27.833

您需要先将 settings["type-new"] 设置为对象。

```
settings["type-new"] = {};
settings["type-new"]["setting-100"] = "new one"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T10:58:25.397

Dogbert 是对的，因为您使用的是对象文字（这就是它们的名称，而不是结构 :P），因此您必须先创建它们，然后才能为它们赋值。做`settings["type-new"]["setting-100"] = "new one";`相当于`undefined["setting-100"] = "new one";`。这就是为什么它不起作用。

另一方面，你最好不要在你的键中使用破折号，我发现编写像你这样的代码更容易：

```
settings.typeNew.setting100 = "new one"; 
```

哪个更直观（在`[""]`属性名称是变量的值的情况下，符号非常有用，并且您 - 正确地 - 不想使用 eval ）。

# media-player - 这种类型的视频播放器怎么称呼？

> ID：11950675
> 
> 赞同：0
> 
> 时间：2012-08-14T10:47:33.090
> 
> 标签：media-player, joomla-extensions

我想制作一个具有这种视频播放器的 joomla 网站。

[https://class.coursera.org/ml/lecture/preview#close](https://class.coursera.org/ml/lecture/preview#close)

我的意思是当您单击视频名称时，会打开视频播放器。我试图用谷歌搜索可以为我启用它的 joomla 扩展程序，但没有成功，因为我不知道要搜索什么。此外，如果有人知道我可以轻松实施的这项任务的一些好的解决方案（我打算用 joomla 制作网站），我将不胜感激。

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:06:12.220

在查看源代码大约 10 分钟后，我发现了一些有趣的东西，这就是你想要的。

[http://mediaelementjs.com/](http://mediaelementjs.com/)

我刚刚看到它是免费的，但与 joomla 无关。但我认为作为独立扩展安装很容易；）

希望能帮到你！:)

# visual-studio-2010 - 如何在 Visual Studio 中安装 Extension 的更新？

> ID：11950678
> 
> 赞同：0
> 
> 时间：2012-08-14T10:47:50.533
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-extensions

我已经创建了扩展`<SystemComponent>true</SystemComponent>`

我已经添加了这个标签，所以它不会显示在 Extension Manager 上。但现在它不允许我安装最新版本，并抛出`SystemComponentException`.

如果我`<SystemComponent>`从清单中删除，它将允许我更新现有的扩展。

反正有没有用这个`<SystemComponent>true</SystemComponent>`标签更新扩展？

清单看起来像这样：

```
<Identifier Id="1053D167-FD56-4EEB-B920-610B0295D0FD">
<Name xml:space="preserve">TEST</Name>
<Author>Ganesh</Author>
<Version>6.1.7</Version>
<Description xml:space="preserve">Test</Description>     
<Locale>1033</Locale>
<InstalledByMsi>false</InstalledByMsi>
...
...
...
<AllUsers>true</AllUsers>
<SystemComponent>true</SystemComponent>
</Identifier> 
```

# msbuild - 使用 msbuild 编译 C++Builder 2010 项目时启用特定定义和设置输出路径

> ID：11950681
> 
> 赞同：2
> 
> 时间：2012-08-14T10:48:06.087
> 
> 标签：msbuild, c++builder, c++builder-2010

您如何使用cmd 中的*msbuild*构建*C++ Builder 2010*项目并指定您希望创建的 exe 以**“../FooBar”**结尾，并且在编译时应设置*定义* **“FOO” ？**我不希望它删除 .cbproj 文件中已经定义的任何其他定义。

我在我的 msbuild 脚本中尝试了各种属性，但似乎没有任何效果。C++ Builder 2010 是否使用旧版本的 msbuild 来支持此功能？

澄清一下，这一切都是在使用任务标签的*msbuild 脚本中完成的*`<msbuild />`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:48:07.387

我通过创建一个新的构建配置并从构建脚本运行该配置来解决我的问题。

# c# - asp mvc c#中的转换错误

> ID：11950682
> 
> 赞同：0
> 
> 时间：2012-08-14T10:48:12.483
> 
> 标签：c#, asp.net-mvc

我正在使用以下代码行：

```
NavItemsDataContext navDB = new NavItemsDataContext();
Nav n = navDB.Navs.Select(row => row.ID == Convert.ToInt32(Request.Form["ID"])); 
```

我正在尝试访问我的数据库中具有与我的表单上隐藏的“ID”匹配的 ID 的任何行。

> 错误 23 无法将类型“System.Linq.IQueryable”隐式转换为“MvcApplication1.Models.Nav”。存在显式转换（您是否缺少演员表？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:50:06.040

您想实际获取对象，直到您使用 FirstOrDefault 如下所示；

```
navDB.Navs.FirstOrDefault(row => row.ID == Convert.ToInt32(Request.Form["ID"])); 
```

可能还值得阅读 Linq 的延迟加载

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:49:41.640

它应该是

```
Nav n = navDB.Navs.Where(row => 
                 row.ID == Convert.ToInt32(Request.Form["ID"])).FirstorDefault(); 
```

**编辑：**与你交谈后（见评论）我来到了这个解决方案

```
Nav n = navDB.Navs.Where(row => 
        {
            int i = 0;

            if (int.TryParse(Request.Form["ID"].ToString(), out i))
            {
                if(row.ID == i)
                 return true;
            }

            return false;
        }).FirstorDefault(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:54:34.497

问题是 LINQ 扩展方法`Select`返回`IQueryable`你映射的任何类型的 a。

你实际上想要一个元素，通过它的 ID。如果它不可能不存在，您应该使用`Single`. 否则，您应该使用`SingleOrDefault`.

使用`Single`（如果找不到则**抛出）：**

```
Nav nav = navDB.Navs.Single(row => row.ID == Convert.ToInt32(Request.Form["ID"])). 
```

使用`SingleOrDefault`（`null`如果没有找到则返回）：

```
Nav nav = navDB.Navs.SingleOrDefault(row => row.ID == Convert.ToInt32(Request.Form["ID"])). 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T10:52:58.643

```
Nav n = navDB.Navs.Where(row => row.ID == Convert.ToInt32(Request.Form["ID"])).FirstOrDefault(); 
```

# javascript - Javascript提示

> ID：11950688
> 
> 赞同：2
> 
> 时间：2012-08-14T10:48:29.317
> 
> 标签：javascript

有没有办法自定义`javascript prompt`盒子？

我想让我只接受`prompt`数字输入......（我想- 具体来说）`bind``keyup event`

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:51:57.193

使用默认的 javascript 提示符是不可能的。但是你可以使用[jQuery UI Dialog](http://jqueryui.com/demos/dialog/#modal-form)例如。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:52:26.750

只需使用许多模态对话框之一[http://www.jquery4u.com/windows/14-jquery-modal-dialog-boxes/#.UCotfJ0gerg](http://www.jquery4u.com/windows/14-jquery-modal-dialog-boxes/#.UCotfJ0gerg)

您可以在这些表单中放入任何内容并绑定任何类型的回调函数。

但是你不能确定标准浏览器的提示或警告框的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:52:55.810

不，你不能，但你可能想研究 Javascript 模态窗口——它们可能是你正在寻找的。或者你可以这样做：

```
do {
  number = parseInt(prompt('Please enter a number'))
}
while (isNaN(number)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-19T17:02:24.017

```
const first = Number(prompt("1st number"))
const second = Number(prompt("2nd number"))

function sum() {
  if (isNaN(first + second)) {
    alert("NaN")
  } else {
    alert(first + second)
  }
}
sum();
```

# symfony - symfony2 login_check 和自定义身份验证提供程序

> ID：11950696
> 
> 赞同：1
> 
> 时间：2012-08-14T10:49:31.983
> 
> 标签：symfony, custom-authentication

我的项目中有以下与自定义身份验证提供程序完全相关的代码文件，并且我可以在身份验证（TokenInterface $token）中拦截请求，我已将回显“它有效”；出口; 在屏幕上打印消息，让我知道它在文件 AuthProvider.php 中输入了 authenticate()。

但是当我尝试将**login_path:/login**更改为**login_path:/user/login**并将**check_path:/login_check 更改**为**check_path:/user/login_check**并修改 routing.yml 以让 UserBundle 具有前缀 /user 时，问题就出现了，那么代码将起作用，但它不会输入**authenticate()**，但它会打印**“提供的密码无效”**而不是**“凭据错误”**，我如何将 login_check 和 check_path 分别更改为 login 和 login_check 以外的其他值和让我的自定义身份验证提供程序使用新设置？

**// app/config/security.yml**

```
security:
    factories:
        - "%kernel.root_dir%/../src/FD/UserBundle/Resources/config/security_factories.yml"

    firewalls:
        checkpoint:
            pattern: ^/
            user: true
            form_login:
                login_path: /login
                check_path: /login_check
            logout:
                path:   /logout
                target: /
            anonymous: ~

    encoders:
        FD\UserBundle\Entity\User: sha512

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    providers:
         user_provider:
             id: user_provider_service

    access_control:
        - { path: ^/_internal, role: IS_AUTHENTICATED_ANONYMOUSLY, ip: 127.0.0.1 }
        - { path: ^/user/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/event/new, roles: ROLE_ADMIN }
        - { path: ^/hello, roles: ROLE_USER } 
```

**// app/config/config.yml**

```
imports:
    - { resource: parameters.ini }
    - { resource: security.yml }
    - { resource: @UserBundle/Resources/config/services.yml }

framework:
    #esi:             ~
    translator:      { fallback: %locale% }
    secret:          %secret%
    charset:         UTF-8
    router:          { resource: "%kernel.root_dir%/config/routing.yml" }
    form:            true
    csrf_protection: false
    validation: { enabled: true }
    #validation:      { enable_annotations: true }
    templating:      { engines: ['twig'] } #assets_version: SomeVersionScheme
    session:
        default_locale: %locale%
        auto_start:     true

# Twig Configuration
twig:
    debug:            %kernel.debug%
    strict_variables: %kernel.debug%

# Assetic Configuration
assetic:
    debug:          %kernel.debug%
    use_controller: false
    # java: /usr/bin/java
    filters:
        cssrewrite: ~
        # closure:
        #     jar: %kernel.root_dir%/java/compiler.jar
        # yui_css:
        #     jar: %kernel.root_dir%/java/yuicompressor-2.4.2.jar

# Doctrine Configuration
doctrine:
    dbal:
        default_connection:    default
        connections:
            default:      
                driver:   %database_driver%
                host:     %database_host%
                port:     %database_port%
                dbname:   %database_name%
                user:     %database_user%
                password: %database_password%
                charset:  UTF8
                mapping_types:
                    enum: string
                    set: string
                    blob: object
    orm:
        auto_generate_proxy_classes: %kernel.debug%    
        default_entity_manager:         default # The first defined is used if not set
        entity_managers:
            default:      
                # The name of a DBAL connection (the one marked as default is used if not set)
                connection: ~
                mappings: # Required
                    FDHelloBundle: ~
                    UserBundle: { type: annotation }

      # mappings:
        #   FDHelloBundle: { type: yml, dir: Resources/config/doctrine/metadata/orm }         

# Swiftmailer Configuration
swiftmailer:
    transport: %mailer_transport%
    host:      %mailer_host%
    username:  %mailer_user%
    password:  %mailer_password%

jms_security_extra:
    secure_controllers:  true
    secure_all_services: false

services:
    fd_hello.twig.extension.debug:
        class:        Twig_Extension_Debug
        tags:
             - { name: 'twig.extension' }

    user_provider_service:
        class: FD\UserBundle\Security\User\UserProvider 
```

**// app/config/routing.yml**

```
FDHelloBundle:
    resource: "@FDHelloBundle/Resources/config/routing.yml"
    prefix:   /

FDUserBundle:
    resource: "@UserBundle/Controller"
    prefix:   /user
    type: annotation 
```

**// src/FD/UserBundle/Controller/LoginController.php**

```
namespace FD\UserBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Symfony\Component\Security\Core\SecurityContext;

class LoginController extends Controller
{
    /**
     * @Route("login", name="login")
     */
    public function loginAction()
    {
        $request = $this->getRequest();
        $session = $request->getSession();

        // get the login error if there is one
        $error = $session->get(SecurityContext::AUTHENTICATION_ERROR);
        $session->remove(SecurityContext::AUTHENTICATION_ERROR);

        return $this->render('UserBundle:Login:login.html.twig', array(
            // last username entered by the user
            'last_username' => $session->get(SecurityContext::LAST_USERNAME),
            'error'         => $error,
        ));
    }

    /**
     * @Route("login_check", name="login_check")
     */
    public function loginCheckAction()
    {

    }

    /**
     * @Route("logout", name="logout")
     */
    public function logoutAction()
    {

    }
} 
```

**// src/FD/UserBundle/DependencyInjection/Security/Factory/UserFactory.php**

```
namespace FD\UserBundle\DependencyInjection\Security\Factory;

use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\DependencyInjection\Reference;
use Symfony\Component\DependencyInjection\DefinitionDecorator;
use Symfony\Component\Config\Definition\Builder\NodeDefinition;
use Symfony\Bundle\SecurityBundle\DependencyInjection\Security\Factory\SecurityFactoryInterface;

class UserFactory implements SecurityFactoryInterface
{
    public function create(ContainerBuilder $container, $id, $config, $userProvider, $defaultEntryPoint)
    {
        $providerId = 'security.authentication.provider.user.'.$id;
        $container
            ->setDefinition($providerId, new DefinitionDecorator('user.security.authentication.provider'))
            ->replaceArgument(0, new Reference($userProvider))
        ;
        $listenerId = 'security.authentication.listener.user.'.$id;
        $listener = $container->setDefinition($listenerId, new DefinitionDecorator('user.security.authentication.listener'));

        return array($providerId, $listenerId, $defaultEntryPoint);
    }

    public function getPosition()
    {
        return 'pre_auth';
    }

    public function getKey()
    {
        return 'user';
    }

    public function addConfiguration(NodeDefinition $node)
    {}
} 
```

**// FD/UserBundle/Resources/config/services.yml**

```
services:
    user.security.authentication.provider:
        class:  FD\UserBundle\Security\Authentication\Provider\AuthProvider
        arguments: ['', %kernel.cache_dir%/security/nonces]

    user.security.authentication.listener:
        class:  FD\UserBundle\Security\Firewall\AuthListener 
```

**// FD/UserBundle/Resources/config/security_factories.yml**

```
services:
    security.authentication.factory.user:
        class:  FD\UserBundle\DependencyInjection\Security\Factory\UserFactory
        tags:
            - { name: security.listener.factory } 
```

**// FD/UserBundle/Security/Authentication/Provider/AuthProvider.php**

```
namespace FD\UserBundle\Security\Authentication\Provider;

use Symfony\Component\Security\Core\Authentication\Provider\AuthenticationProviderInterface;
use Symfony\Component\Security\Core\User\UserProviderInterface;
use Symfony\Component\Security\Core\Exception\AuthenticationException;
use Symfony\Component\Security\Core\Exception\NonceExpiredException;
use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;
use Symfony\Component\Security\Core\Exception\BadCredentialsException;

use FD\UserBundle\Security\Authentication\Token\UserToken;

class AuthProvider implements AuthenticationProviderInterface
{
    private $userProvider;
    private $cacheDir;

    public function __construct(UserProviderInterface $userProvider, $cacheDir)
    {
        $this->userProvider = $userProvider;
        $this->cacheDir     = $cacheDir;
    }

    public function authenticate(TokenInterface $token)
    {
//        $user = $this->userProvider->loadUserByUsername($token->getUsername());
//        $userToken = new UserToken();
//        $userToken->setUser($user);
echo "it worked"; exit;
        $newToken = new UserToken($token->getUser(), $token->getCredentials(), "user", array("ROLE_ADMIN"));
        $username = $newToken->getUser();
        if (empty($username)) {
            throw new BadCredentialsException('Bad credentials :)');
        }
        return $newToken;

//        if ($user && $this->validateDigest($token->digest, $token->nonce, $token->created, $user->getPassword())) {
//            $authenticatedToken = new UserToken($user->getRoles());
//            $authenticatedToken->setUser($user);
//
//            return $authenticatedToken;
//        }
    }

    public function supports(TokenInterface $token)
    {
        return $token instanceof UserToken;
    }
} 
```

**// FD/UserBundle/Security/Authenticaion/Token/UserToken.php**

```
namespace FD\UserBundle\Security\Authentication\Token;

use Symfony\Component\Security\Core\Authentication\Token\AbstractToken;

/**
 * UsernamePasswordToken implements a username and password token.
 *
 */

class UserToken extends AbstractToken
{
    private $credentials;
    private $providerKey;

    /**
     * Constructor.
     *
     * @param string $user        The username (like a nickname, email address, etc.)
     * @param string $credentials This usually is the password of the user
     * @param string $providerKey The provider key
     * @param array  $roles       An array of roles
     *
     * @throws \InvalidArgumentException
     */
    public function __construct($user, $credentials, $providerKey, array $roles = array())
    {
        parent::__construct($roles);

        if (empty($providerKey)) {
            throw new \InvalidArgumentException('$providerKey must not be empty.');
        }

        $this->setUser($user);
        $this->credentials = $credentials;
        $this->providerKey = $providerKey;

        parent::setAuthenticated(count($roles) > 0);
    }

    /**
     * {@inheritdoc}
     */
    public function setAuthenticated($isAuthenticated)
    {
        if ($isAuthenticated) {
            throw new \LogicException('Cannot set this token to trusted after instantiation.');
        }

        parent::setAuthenticated(false);
    }

    public function getCredentials()
    {
        return $this->credentials;
    }

    public function getProviderKey()
    {
        return $this->providerKey;
    }

    /**
     * {@inheritdoc}
     */
    public function eraseCredentials()
    {
        parent::eraseCredentials();

        $this->credentials = null;
    }

    public function serialize()
    {
        return serialize(array($this->credentials, $this->providerKey, parent::serialize()));
    }

    public function unserialize($str)
    {
        list($this->credentials, $this->providerKey, $parentStr) = unserialize($str);
        parent::unserialize($parentStr);
    }
} 
```

**// FD/UserBundle/Security/Firewall/AuthListener.php**

```
namespace FD\UserBundle\Security\Firewall;

use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\HttpKernel\Event\GetResponseEvent;
use Symfony\Component\Security\Http\Firewall\ListenerInterface;
use Symfony\Component\Security\Core\Exception\AuthenticationException;
use Symfony\Component\Security\Core\SecurityContextInterface;
use Symfony\Component\Security\Core\Authentication\AuthenticationManagerInterface;
use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;
use Symfony\Component\Security\Http\Firewall\AbstractAuthenticationListener;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\Security\Http\Session\SessionAuthenticationStrategyInterface;
use Symfony\Component\Security\Http\HttpUtils;

use FD\UserBundle\Security\Authentication\Token\UserToken;

class AuthListener extends AbstractAuthenticationListener
{
    protected $securityContext;
    protected $authenticationManager;
    protected $httpUtils;

    public function __construct(SecurityContextInterface $securityContext, AuthenticationManagerInterface $authenticationManager,
                                SessionAuthenticationStrategyInterface $sessionStrategy, HttpUtils $httpUtils, $options = array())
    {
        parent::__construct($securityContext, $authenticationManager, $sessionStrategy, $httpUtils, "user", array_merge(array(
            'username_parameter' => '_username',
            'password_parameter' => '_password',
            'intention' => 'authenticate',
            'post_only' => true,
        ), $options));
    }

    /**
     * Performs authentication.
     *
     * @param  Request $request A Request instance
     *
     * @return TokenInterface The authenticated token, or null if full authentication is not possible
     *
     * @throws AuthenticationException if the authentication fails
     */
    protected function attemptAuthentication(Request $request)
    {

        $username = trim($request->get($this->options['username_parameter'], null, true));
        $password = $request->get($this->options['password_parameter'], null, true);

        //$request->getSession()->set(SecurityContextInterface::LAST_USERNAME, $username);

        return $this->authenticationManager->authenticate(new UserToken($username, $password, $this->providerKey));

    }

    public function getHttpUtils()
    {
        return $this->httpUtils;
    }

    public function setHttpUtils($httpUtils)
    {
        $this->httpUtils = $httpUtils;
    }
} 
```

**// src/FD/UserBundle/Security/User/UserProvider.php**

```
namespace FD\UserBundle\Security\User;

use Symfony\Component\Security\Core\User\UserProviderInterface;
use Symfony\Component\Security\Core\User\UserInterface;
use Symfony\Component\Security\Core\Exception\UsernameNotFoundException;
use Symfony\Component\Security\Core\Exception\UnsupportedUserException;

use FD\UserBundle\Entity\User;

class UserProvider implements UserProviderInterface
{
    public function loadUserByUsername($username)
    {
        // make a call to your webservice here
        // $userData = ...
        // pretend it returns an array on success, false if there is no user
        $user = new User();
        $user->setUsername($username);
        $user->setPassword("1234");
        $user->setRoles(array("ROLE_ADMIN"));

        return $user;

//        if ($userData) {
//            // $password = '...';
//            // ...
//
//            return new WebserviceUser($username, $password, $salt, $roles)
//        } else {
//            throw new UsernameNotFoundException(sprintf('Username "%s" does not exist.', $username));
//        }
    }

    public function refreshUser(UserInterface $user)
    {
        if (!$user instanceof User) {
            throw new UnsupportedUserException(sprintf('Instances of "%s" are not supported.', get_class($user)));
        }

        return $this->loadUserByUsername($user->getUsername());
    }

    public function supportsClass($class)
    {
        return $class === 'FD\UserBundle\Entity\User';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:57:22.660

好像你做的一切都是正确的。

可能您正在导入错误的资源

```
FDUserBundle:
    resource: "@UserBundle/Controller" 
```

不应该像下面这样吗？

```
FDUserBundle:
    resource: "@FDUserBundle/Controller" 
```

# asp.net - jquery ui进度条不显示在其他元素前面

> ID：11950698
> 
> 赞同：0
> 
> 时间：2012-08-14T10:49:34.513
> 
> 标签：asp.net, visual-studio-2010, jquery-ui, progress-bar

我正在使用 JQuery UI 1.8.20、asp.net 4.0、VS 2010 和

加载数据以填充某些列表时，在所有其他标记元素前面显示进度条时出现问题。

我的 html 标记基本上是这样的（splitDocumentProgressbar 是进度条）：

```
<div id="mainCategorizerContainer">
    <div id="uncategorizedArea" class="uncategorized-area">        
        <ul id="uncategorizedPagesList" class="gallery ui-helper-reset ui-widget ui-helper-clearfix uncategorized-document-pages-list-area uncategorizedPages">                   
        </ul>        
    </div>
    <div id="categorizedArea" class="categorized-area">
        <ul id="documentCategoryList" class="document-category-list-area ui-helper-reset">                                      
        </ul>
        <ul id="categorizedDocumentPagesList" class="categorized-document-pages-list-area ui-helper-reset" >                       
        </ul>
    </div>
    <div id="splitDocumentProgressbar" style="width: 20%;"></div>
    <div id="splitDocumentDialog"><span id="splitDocumentDialogContent"></span></div>
</div> 
```

填充一个列表并更新进度条的 javascript（此代码位于我编写的外部 javascript 文件中，此文件在定义标记的 aspx 中引用）：

```
var initializeUncategorizedPagesList = function (data) {
    var listItems = [];

    var progressBarSteps = data.DocumentPages.length;
    showProgressBar(true);

    $.each(data.DocumentPages, function (index, documentPage) {

        updateProgressBar(progressBarSteps, index);

        var headerClass = $.validator.format('<h5 class="ui-widget-header">{0}</h5>', documentPage.Title);
        var image = $.validator.format('<img src="Handlers/ImageHandler.ashx?docid={0}&variantid={1}" alt="{2}"/>', documentPage.DocumentId, documentPage.ThumbVariantId, documentPage.Title);
        var imageUrl = $.validator.format('<a href="Handlers/ImageHandler.ashx?docid={0}&variantid={1}" title="Forstørr bilde" class="ui-icon ui-icon-zoomin">Forstørr bilde</a>', documentPage.DocumentId, documentPage.HoverVariantId, documentPage.Title);
        var listClass = $.validator.format('<li id="uncategorizedPage{0}" class="ui-widget-content ui-corner-tr">{1} {2} {3}</li>', documentPage.DocumentId, headerClass, image, imageUrl);

        listItems.push(listClass);
    });

    pub.UncategorizedPagesList.append(listItems.join(''));
    showProgressBar(false);
};

var updateProgressBar = function (progressBarStep, index) {

    //If this is true, the progressbar property is not set
    if (pub.Progressbar === "Progressbar") {
        return;
    }

    if (progressBarStep === 0) {
        return;
    }

    var progressBarValue = (100 / progressBarStep) * (index + 1);

    pub.Progressbar.progressbar({
        value: progressBarValue
    });
};

// Show/hide the progress bar and will also reset the progress bar
var showProgressBar = function (show) {

    if (show === true) {
        updateProgressBar(1, -1);
        pub.Progressbar.show();
    }
    else {
        pub.Progressbar.hide();
    }
}; 
```

进度条有效。我知道这一点，因为当我调试我的 javascript 代码时，我可以看到进度条显示并且值增加了。但对我来说，当我在没有调试的情况下运行代码时，进度条似乎隐藏在 UI 的其余部分后面。

你有什么技巧和窍门要和我分享吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:26:39.310

尝试这样放置：

```
 <div id="splitDocumentProgressbar" style="width: 20%;"></div>
    <div id="mainCategorizerContainer">
        <div id="uncategorizedArea" class="uncategorized-area">
            <ul id="uncategorizedPagesList" class="gallery ui-helper-reset ui-widget ui-helper-clearfix uncategorized-document-pages-list-area uncategorizedPages"></ul>
        </div>
        <div id="categorizedArea" class="categorized-area">
            <ul id="documentCategoryList" class="document-category-list-area ui-helper-reset"></ul>
            <ul id="categorizedDocumentPagesList" class="categorized-document-pages-list-area ui-helper-reset" ></ul>
        </div>
        <div id="splitDocumentDialog">
            <span id="splitDocumentDialogContent"></span>
        </div>
    </div> 
```

您的进度条应该出现在您的代码上方，如果它没有在进度条中隔离问题。

# extjs - 网格列标题过滤器插件

> ID：11950700
> 
> 赞同：0
> 
> 时间：2012-08-14T10:49:38.970
> 
> 标签：extjs, filter, grid, stateful

我正在使用 extjs 网格中的插件来过滤数据。这很好用，但我想念的是我所做的选择被存储了。因此，当我刷新浏览器时，设置会丢失。我怎样才能储存这个？

我用这个

```
var filtersFeature = 
{
 ftype : 'filters',
 stateful: true,
 local : true,  // For Server Side Filtering
 encode : true
}; 
```

在列中我使用此选项

```
filterable: true,
filter: {
            type: 'list',
            store: onlineStore
        }, 
```

但这不起作用。如何存储过滤器的设置。我在几列使用过滤器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:13:28.047

每个状态对象也需要一个 stateId。

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ux.grid.FiltersFeature-cfg-stateId](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ux.grid.FiltersFeature-cfg-stateId)

```
var filtersFeature = 
{
 ftype : 'filters',
 stateful: true,
 local : true,  // For Server Side Filtering
 encode : true,
 stateId: 'gridXFilters'
}; 
```

请记住，您需要某种状态管理器。像 cookie 状态管理器或您自己的实现。

在以前的项目中，我每 30 秒将状态存储在数据库中，并且在浏览器关闭之前。

# r - 使用 knitr 在 Markdown 中具有多列表的 HTML

> ID：11950703
> 
> 赞同：21
> 
> 时间：2012-08-14T10:49:43.437
> 
> 标签：r, knitr

我使用了 knitr 和 LaTeX，但我正在考虑更改为 Markdown，因为这似乎与 Word 更兼容（htlatex 和 Pandoc 工作，但它远非舒适）。我目前的问题是在 Hmisc 包中找到 latex() 的替代方法。我发现的唯一选择是 xtable，但它似乎没有创建多列。

这是一个例子：

```
mx <- matrix(1:6, ncol=3) 
rownames(mx) <- LETTERS[1:NROW(mx)] 
colnames(mx) <- sprintf("Col %s", LETTERS[1:NCOL(mx)])
latex(mx, n.rgroup=c(2), rgroup=c("Nice!"),
      n.cgroup=c(2,1), cgroup=c("First", "Second"),
      file="", 
      ctable=TRUE) 
```

生成此表：

![在此处输入图像描述](../Images/2386f2c6208adc4fad8d3d5f4710a4d3.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-14T17:34:49.027

好吧，我自己写的。。。

该软件包的版本为 1.0，称为**htmlTable**，可从 CRAN 和我的博客[gforge.se/packages 获得](http://gforge.se/packages/)。希望对你有帮助。我创建了一些小插曲来帮助所有选项。

# php - 打印数组值

> ID：11950704
> 
> 赞同：-2
> 
> 时间：2012-08-14T10:49:45.417
> 
> 标签：php, arrays, sorting, printing

我有

```
$finalprint[$counting] = $ppn.' '.$ppn2; 
```

通过使用循环，我将一些数据保存到数组中。现在也做了排序。

```
arsort($finalprint); // i think this would arrange the data into descending order by $counting 
```

现在我有数据了

```
$finalprint[426] = "XYZ"
$finalprint[124] = "ABC"
$finalprint[333] = "MNO" 
```

我如何打印这个数组的值，比如`XYZ MNO ABC`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:01:51.447

如果您想按照desc 顺序的**值进行排序**

```
$finalprint[] = "XYZ";
$finalprint[] = "ABC";
$finalprint[] = "MNO";

rsort($finalprint);

foreach ($finalprint as $val) {
    echo  $val."&nbsp;" ;
} 
```

*o/p* XYZ MNO ABC

如果你想按desc 顺序的**键排序**

```
krsort($finalprint);

foreach ($finalprint as $val) {
        echo  $val."&nbsp;" ;
    } 
```

*o/p* MNO ABC XYZ

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:12:35.027

如果您想按请求的顺序打印内容，请尝试对数组值进行排序。`array_reverse`帮助：

```
$finalprint = array();
$finalprint[426] = "XYZ";
$finalprint[124] = "ABC";
$finalprint[333] = "MNO";
//sort by key ascending
asort($finalprint);
//getting the keys and reversinf them
$keys = array_reverse(array_keys($finalprint));
//iterating over the keys
foreach ($keys as $key) {
    echo $key.'=>'.$finalprint[$key].PHP_EOL;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:51:33.077

```
krsort( $finalprint );

echo join( " ", $finalprint ); 
```

但是您是说数组是按`XYZ`, `ABC`, `MNO`order 还是`XYZ`, `MNO`, `ABC`order 排序的？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T10:51:59.317

```
join(' ', array_values($finalprint)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T11:05:29.677

使用[arsort](http://php.net/arsort)以反向顺序对值进行排序，或[使用 krsort](http://php.net/arsort)以反向顺序对键进行排序。（从您的示例中不清楚您想要哪一个）

```
arsort($finalprint);
echo implode(' ', $finalprint); 
```

文档：[内爆](http://php.net/implode)

# magento - 产品图片未显示在我的 magento 愿望清单中

> ID：11950709
> 
> 赞同：0
> 
> 时间：2012-08-14T10:50:08.817
> 
> 标签：magento

在我的愿望清单链接中有一些产品，但没有图像。

```
That means i added products to my wishlist,but the products' images are not displaying in wishlists. 
```

问题是什么？

我该如何解决这个问题？

当我点击添加到愿望清单时，我遇到了一些错误，所以我将愿望清单.xml 和愿望清单文件夹从 base/defualt 复制到我的主题。之后，当我最后添加到我的愿望清单时，我看不到愿望清单中的图像。这是我得到的错误：`

```
There has been an error processing your request

Invalid method Mage_Wishlist_Model_Item::isGrouped(Array
(
)
)

Trace:
#0 /hsphere/local/home/davidson/shop/app/design/frontend/base/default/template/catalog/product/price.phtml(52): Varien_Object->__call('isGrouped', Array)
#1 /hsphere/local/home/davidson/shop/app/design/frontend/base/default/template/catalog/product/price.phtml(52): Mage_Wishlist_Model_Item->isGrouped()
#2 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Block/Template.php(241): include('/hsphere/local/...')
#3 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('frontend/base/d...')
#4 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView()
#5 /hsphere/local/home/davidson/shop/app/code/core/Mage/Catalog/Block/Product/Price.php(154): Mage_Core_Block_Template->_toHtml()
#6 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Catalog_Block_Product_Price->_toHtml()
#7 /hsphere/local/home/davidson/shop/app/code/core/Mage/Wishlist/Block/Abstract.php(383): Mage_Core_Block_Abstract->toHtml()
#8 /hsphere/local/home/davidson/shop/app/design/frontend/base/default/template/wishlist/view.phtml(61): Mage_Wishlist_Block_Abstract->getPriceHtml(Object(Mage_Wishlist_Model_Item))
#9 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Block/Template.php(241): include('/hsphere/local/...')
#10 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('frontend/base/d...')
#11 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView()
#12 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Template->_toHtml()
#13 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Block/Abstract.php(582): Mage_Core_Block_Abstract->toHtml()
#14 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Block/Abstract.php(522): Mage_Core_Block_Abstract->_getChildHtml('customer.wishli...', true)
#15 /hsphere/local/home/davidson/shop/app/code/core/Mage/Page/Block/Html/Wrapper.php(52): Mage_Core_Block_Abstract->getChildHtml('', true, true)
#16 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Page_Block_Html_Wrapper->_toHtml()
#17 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Block/Text/List.php(43): Mage_Core_Block_Abstract->toHtml()
#18 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Text_List->_toHtml()
#19 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Block/Abstract.php(582): Mage_Core_Block_Abstract->toHtml()
#20 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Block/Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml('content', true)
#21 /hsphere/local/home/davidson/shop/app/design/frontend/base/default/template/page/2columns-left.phtml(48): Mage_Core_Block_Abstract->getChildHtml('content')
#22 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Block/Template.php(241): include('/hsphere/local/...')
#23 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('frontend/base/d...')
#24 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView()
#25 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Template->_toHtml()
#26 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Model/Layout.php(555): Mage_Core_Block_Abstract->toHtml()
#27 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Controller/Varien/Action.php(390): Mage_Core_Model_Layout->getOutput()
#28 /hsphere/local/home/davidson/shop/app/code/core/Mage/Wishlist/controllers/IndexController.php(150): Mage_Core_Controller_Varien_Action->renderLayout()
#29 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Mage_Wishlist_IndexController->indexAction()
#30 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('index')
#31 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#32 /hsphere/local/home/davidson/shop/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#33 /hsphere/local/home/davidson/shop/app/Mage.php(687): Mage_Core_Model_App->run(Array)
#34 /hsphere/local/home/davidson/davidsonbros.com/index.php(81): Mage::run('davidsonbros', 'website')
#35 {main}` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:32:57.717

> 当我点击添加到愿望清单时，我遇到了一些错误

错误是什么？

**我的愿望清单**中显示的每一列都可以通过wishlist.xml 进行配置

```
<wishlist_index_index translate="label">
[...]
                <block type="wishlist/customer_wishlist_items" name="customer.wishlist.items" as="items" template="wishlist/item/list.phtml">
                <block type="wishlist/customer_wishlist_item_column_image" name="customer.wishlist.item.image" template="wishlist/item/column/image.phtml" />
[...] 
```

# ios - 选择单元格时更改图像

> ID：11950711
> 
> 赞同：2
> 
> 时间：2012-08-14T10:50:09.970
> 
> 标签：ios, uitableview, uiimageview

在我的应用程序中，左侧有一个 UITableView 作为菜单。当我按下表格的一个单元格时，右侧的视图会发生变化。我的“菜单”表有自定义单元格，我想在选中此单元格时更改单元格的图像。我怎样才能做到这一点？

代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"MenuCell";
    CRMMenuCell *cell = (CRMMenuCell *)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (!cell){

        NSArray * topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CRMMenuCell" owner:nil options:nil];

        for (id currentObjetc in topLevelObjects){

            if ([currentObjetc isKindOfClass:[CRMMenuCell class]]){

                cell = (CRMMenuCell *)currentObjetc;
                break;
            }

        }

    }

    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    if (indexPath.row == 0)
    {
        cell.labelMenu.text = NSLocalizedString(@"calendarioKey", @"");
        cell.imagenMenu.image = [UIImage imageNamed:@"calendario_gris"];

    }

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *cellIdentifier = @"MenuCell";
    CRMMenuCell *cell = (CRMMenuCell *)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (!cell){

        NSArray * topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CRMMenuCell" owner:nil options:nil];

        for (id currentObjetc in topLevelObjects){

            if ([currentObjetc isKindOfClass:[CRMMenuCell class]]){

                cell = (CRMMenuCell *)currentObjetc;
                break;
            }

        }

    }

    if (indexPath.row == 0) 
    {

        cell.imagenMenu.image = [UIImage imageNamed:@"calendario_rojo"];

    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T10:57:17.213

您可以在

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

您的 TableView 的代表。

如何更改图像取决于您的实现，但应该类似于：

```
CRMMenuCell *cell = (CRMMenuCell*)[tableView cellForRowAtIndexPath:indexPath];
cell.myImage = newImage; 
```

编辑：尝试以下：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   CRMMenuCell *cell = (CRMMenuCell*)[tableView cellForRowAtIndexPath:indexPath];
   cell.imagenMenu.image = [UIImage imageNamed:@"calendario_gris"];
} 
```

# sql - 数据透视表顺序

> ID：11950721
> 
> 赞同：-1
> 
> 时间：2012-08-14T10:50:44.170
> 
> 标签：sql, sql-server-2008

我为每月的销售额创建了一个数据透视表，我想按当月对数据进行排序。我想知道是否可以使用 case 语句和 order by；我在下面试过这个（虽然不工作）；

数据库服务器：SQL Server 2008

```
SELECT txt_web_name, 
SUM(CASE WHEN MONTH(dte_pay_paydate) = 1 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS 'January',
SUM(CASE WHEN MONTH(dte_pay_paydate) = 2 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS 'February',
SUM(CASE WHEN MONTH(dte_pay_paydate) = 3 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS 'March',
SUM(CASE WHEN MONTH(dte_pay_paydate) = 4 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS 'April',
SUM(CASE WHEN MONTH(dte_pay_paydate) = 5 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS 'May',
SUM(CASE WHEN MONTH(dte_pay_paydate) = 6 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS 'June',
SUM(CASE WHEN MONTH(dte_pay_paydate) = 7 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS 'July',
SUM(CASE WHEN MONTH(dte_pay_paydate) = 8 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS 'August',
SUM(CASE WHEN MONTH(dte_pay_paydate) = 9 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS 'September',
SUM(CASE WHEN MONTH(dte_pay_paydate) = 10 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS 'October',
SUM(CASE WHEN MONTH(dte_pay_paydate) = 11 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS 'November',
SUM(CASE WHEN MONTH(dte_pay_paydate) = 12 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS 'December'
FROM tbl_payment
INNER JOIN dbo.tbl_orders ON (uid_pay_orderid = uid_orders)
INNER JOIN dbo.tbl_websites ON (uid_order_webid = uid_websites)
WHERE dbo.tbl_payment.bit_pay_paid = 1
GROUP BY txt_web_name
ORDER BY 
        CASE 

         WHEN MONTH(GETDATE()) = 1 THEN 'January'
         WHEN MONTH(GETDATE()) = 2 THEN 'February'
         WHEN MONTH(GETDATE()) = 3 THEN 'March'
         WHEN MONTH(GETDATE()) = 4 THEN 'April'
         WHEN MONTH(GETDATE()) = 5 THEN 'May'
         WHEN MONTH(GETDATE()) = 6 THEN 'June'
         WHEN MONTH(GETDATE()) = 7 THEN 'July'
         WHEN MONTH(GETDATE()) = 8 THEN 'August'
         WHEN MONTH(GETDATE()) = 9 THEN 'September'
         WHEN MONTH(GETDATE()) = 10 THEN 'October'
         WHEN MONTH(GETDATE()) = 11 THEN 'November'
         WHEN MONTH(GETDATE()) = 12 THEN 'December' 

         END  DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:57:32.960

试试这个查询：

```
SELECT txt_web_name, 
SUM(CASE WHEN MONTH(dte_pay_paydate) = 1 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS January,
SUM(CASE WHEN MONTH(dte_pay_paydate) = 2 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS February,
SUM(CASE WHEN MONTH(dte_pay_paydate) = 3 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS March,
SUM(CASE WHEN MONTH(dte_pay_paydate) = 4 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS April,
SUM(CASE WHEN MONTH(dte_pay_paydate) = 5 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS May,
SUM(CASE WHEN MONTH(dte_pay_paydate) = 6 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS June,
SUM(CASE WHEN MONTH(dte_pay_paydate) = 7 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS July,
SUM(CASE WHEN MONTH(dte_pay_paydate) = 8 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS August,
SUM(CASE WHEN MONTH(dte_pay_paydate) = 9 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS September,
SUM(CASE WHEN MONTH(dte_pay_paydate) = 10 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS October,
SUM(CASE WHEN MONTH(dte_pay_paydate) = 11 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS November,
SUM(CASE WHEN MONTH(dte_pay_paydate) = 12 AND txt_pay_type <> 'Credit' THEN mon_pay_amount ELSE 0 END) AS December
FROM tbl_payment
INNER JOIN dbo.tbl_orders ON (uid_pay_orderid = uid_orders)
INNER JOIN dbo.tbl_websites ON (uid_order_webid = uid_websites)
WHERE dbo.tbl_payment.bit_pay_paid = 1
GROUP BY txt_web_name
ORDER BY 
        CASE MONTH(GETDATE()) 
         WHEN 1 THEN January
         WHEN 2 THEN February
         WHEN 3 THEN March
         WHEN 4 THEN April
         WHEN 5 THEN May
         WHEN 6 THEN June
         WHEN 7 THEN July
         WHEN 8 THEN August
         WHEN 9 THEN September
         WHEN 10 THEN October
         WHEN 11 THEN November
         WHEN 12 THEN December 

         END  DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:52:46.400

您当前正在按一个常量值（即月份的名称）进行排序，正如您所发现的那样，它不会产生任何影响。

你需要类似的东西

```
 ORDER BY
     CASE MONTH(GETDATE()) 
     WHEN 1 THEN January
     WHEN 2 THEN February
     ...
     END 
```

PS。你知道SQL Server有一个`PIVOT`命令...

```
select * 
from 
(
    select txt_web_name, mon_pay_amount, datename(month,dte_pay_paydate) as mpd 
    FROM tbl_payment  
    INNER JOIN dbo.tbl_orders ON (uid_pay_orderid = uid_orders)  
    INNER JOIN dbo.tbl_websites ON (uid_order_webid = uid_websites)  
    WHERE dbo.tbl_payment.bit_pay_paid = 1  
    AND txt_pay_type<>'credit'
) t
pivot
(
    sum(mon_pay_amount) for mpd in 
    ([January],[February],[March],[April],[May],[June],[July],[August], .....)
)p
order by
   case MONTH(getdate())
       when 1 then [January]
       when 2 then [February]
        ...
   end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T11:07:02.607

我会改变它来使用一个`PIVOT`函数。这将清理查询以不使用所有`CASE`语句：

```
SELECT *
FROM 
(
  SELECT txt_web_name, 
    txt_pay_type, 
    DATENAME(month, dte_pay_paydate) mth,  -- get the month name instead of the number
    mon_pay_amount
  FROM tbl_payment
  INNER JOIN dbo.tbl_orders 
    ON (uid_pay_orderid = uid_orders)
  INNER JOIN dbo.tbl_websites 
    ON (uid_order_webid = uid_websites)
  WHERE dbo.tbl_payment.bit_pay_paid = 1
    and txt_pay_type <> 'Credit'
) x
PIVOT
(
  sum(mon_pay_amount)
  for mth in([January], [February], [March], [April], [May],
            [June], [July], [August], September, [October], 
            [November], [December])
)p
order by 
  case datename(month, getdate()) 
    when 'January' then January 
    when 'February' then February  
    when 'March' then March  
    when 'April' then April  
    when 'May' then May  
    when 'June' then June  
    when 'July' then July  
    when 'August' then August  
    when 'September' then September  
    when 'October' then October  
    when 'November' then November  
    when 'December' then December  
  END Desc 
```

# javascript - 使用 javascript 从 localhost 服务获取数据

> ID：11950722
> 
> 赞同：1
> 
> 时间：2012-08-14T10:50:46.303
> 
> 标签：javascript, xmlhttprequest, jsonp, cors

我正在开发一个需要访问本地资源的网站，例如 RFID 阅读器和其他一些硬件。我正在考虑编写一个简单的 Web 服务器来返回我需要的数据。

这样该网站将使用 JavaScript 访问这些数据，并进一步处理它。

`XMLHTTPRequest`我知道由于同源策略限制，我不能简单地访问 localhost 。

那么有一个简单的解决方案吗？我不知道如果我`localhost.mysite.com`在本地将其设置为 127.0.0.1 是否可以访问？或者也许是 JSONP？还是 CORS？我不熟悉这些技术，所以我想问你如何解决这个问题，或者最简单的方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:55:38.290

您最好制作[一个打包的 Chrome 应用程序](http://developer.chrome.com/trunk/extensions/apps/about_apps.html)来执行此类操作。然后，您将能够将其作为常规网站体验运行，但通过清单中正确的“权限”设置，它将能够访问任何域，包括 localhost。

它将要求任何使用它的人“安装它”，这只是一键式操作。

或者，如果您可以控制 localhost 服务器，则可以让它们输出 JSONP 或正确的 CORS 标头。基本上，如果您想在常规网络上的任何两个域（包括本地主机）之间进行通信（即不包括特殊的网络应用程序，如 Chrome 的打包应用程序），他们都需要为此提供同意。

# html - 在 HTML 文档中声明 CSS，追加或覆盖？

> ID：11950725
> 
> 赞同：0
> 
> 时间：2012-08-14T10:50:56.947
> 
> 标签：html, css

所以我有一个关于 HTML 和 CSS 的新手问题。我刚开始使用 Twitter 的 Bootstrap 框架，并且在我的 index.html 文件的头部有这段代码：

```
<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/style.css" rel="stylesheet"> <!-- Custom CSS Overwrite-->
<style type="text/css">
    html{overflow-y:scroll;} <!-- Fixes "page shift" issue -->
</style> 
```

bootstrap.css 文件定义了这一点，如下所示：

```
html {
  font-size: 100%;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
} 
```

我在 html 文件中声明的 CSS 是否覆盖或附加`html{}`CSS？我希望它是附加的，因为覆盖可能会把事情搞砸。

我不只是编辑 bootstrap.css 文件的原因是因为我阅读了不编辑 bootstrap.css 文件的好习惯，以便将来的升级尽可能顺利。

顺便说一句，如果有人想知道`overflow-y:scroll`在您的浏览器中始终包含一个垂直滚动条是什么，无论是否有可滚动的材料。修复了可怕的“页面移位”问题，这是迄今为止我能找到的最简单的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:56:17.493

它将附加它。（除非 Bootstrap 改变`overflow-y`了 html 元素的属性。）

这几乎总是发生在 CSS 中。

所以这：

```
.foo {
    background-color: red;
}
.foo {
    color: green;
} 
```

是相同的：

```
.foo {
    background-color: red;
    color: green;
} 
```

唯一不适用的情况是当您更改相同的值时，因为在 CSS 中，属性不能有多个值。

* * *

我不知道 Bootstrap 是否在元素`overflow-y`上添加了属性。`<html>`如果确实如此，您的页面移位问题 css 将覆盖它。如果没有，那么它将被“附加”在上面。

# c# - 无法使用 C# Windows 应用程序在访问中触发更新和插入查询

> ID：11950729
> 
> 赞同：1
> 
> 时间：2012-08-14T10:51:04.727
> 
> 标签：c#, ms-access

我正在尝试使用 MS Access 后端创建一个 Windows 应用程序，但我在插入和更新查询方面遇到了一些问题。

选择语句对我来说很好，但插入和更新不起作用。消息是：`syntax error in "update" and " insert into "`

下面是我连接访问数据库的连接字符串

```
<add key="AppConnection" value="Provider=Microsoft.Jet.OLEDB.4.0;Data Source=GNDb.mdb;
  Jet OLEDB:Database Password=@black123;" ></add> 
```

以及我试图从前端到后端的查询

插入 ：`insert into tblU(UserName, Password) values('ops1', 'ops')`

更新 ：`Update tblU set Password='pqr5' where UserName='pqr'`

这是我的表架构：

```
ID            - AutoNumber
UserName text - text
Password      - text 
```

在前端我使用 Oledb 连接和命令。我正在使用 2003 ms 访问 mdb 文件。我不知道这是哪种语法错误？请建议我更正/答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:17:29.807

密码是一个保留字，应该用方括号括起来。

```
insert into tblU(UserName, [Password]) values('ops1', 'ops') 
```

[Jet](http://support.microsoft.com/kb/248738)和[ACE](http://msdn.microsoft.com/en-us/library/bb208875%28v=office.12%29.aspx)中的保留字

# android - 相机上的 Android 覆盖 4/3 图像

> ID：11950731
> 
> 赞同：0
> 
> 时间：2012-08-14T10:51:15.883
> 
> 标签：android, camera, overlay

我有以下问题：我有一个带有摄像头和顶部的应用程序，并且图像作为叠加层。图像在 4/3 中，我得到了屏幕的最佳尺寸并绘制了图像。问题是我在尝试时看不到所有图像。我在屏幕的顶部和底部剪切了图像。问题是，如果我拍照，我会看到完美的照片

我正在使用 android sdk 8 并且相机处于横向模式。在我的三星 Galaxy S 中，叠加层和表面预览提供相同的尺寸 640:480。

我已经玩了一段时间了，我还没有找到解决方案。

这是代码。

我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/framecamera"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:gravity="center"
    android:padding="0dip"
    android:layout_margin="0dip"
>
<FrameLayout
    android:id="@+id/surface"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="0dip"
    android:layout_margin="0dip"
>
</FrameLayout>
<ImageButton
    android:id="@+id/button_capture"
    android:contentDescription="@string/click"
    android:text="@string/click"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center|right"
    android:background="@drawable/camera"
    android:src="@drawable/camera"
/>
</LinearLayout> 
```

我的代码的重要部分：

```
setContentView(R.layout.camera);

//create an instance of Camera
mcam = getCameraInstance();
Camera.Parameters parameters=mcam.getParameters();
size=getBestPreviewSize(parameters);//gets the 4/3 size

horizontal = Bitmap.createScaledBitmap(horizontal, size.width, size.height, false);

// Create our Preview view and set it as the content of our activity.
mpreview = new CameraPreview(getBaseContext(), mcam);
FrameLayout frame = (FrameLayout) findViewById(R.id.surface);
SurfaceHolder mSurfaceHolder = mpreview.getHolder();
mSurfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

//set our view to 4:3
ViewGroup.LayoutParams params = frame.getLayoutParams();
params.width = size.width;
params.height = size.height;
frame.setLayoutParams(params);

//add the necessary margin to the view
Display display = ((WindowManager) getSystemService(WINDOW_SERVICE)).getDefaultDisplay();
MarginLayoutParams ps=(MarginLayoutParams )frame.getLayoutParams();
ps.topMargin = 0;
ps.bottomMargin = 0;
ps.leftMargin = (display.getWidth()-size.width)/2;//to center the overlay
frame.setLayoutParams(ps);

frame.addView(mpreview);

over = new OverlayPreview(getBaseContext(),horizontal);//inside I draw the canvas
frame.addView(over); 
```

任何想法将不胜感激。我认为问题可能来自填充或 xml，但我不知道如何解决它。非常感谢你。

pd：对不起我的英语，不是我的母语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:17:09.510

行！我终于找到了如何做到这一点！

我改变了这样做的方式，现在我使用和 ImageView 作为框架。

```
// Create our Preview view
mpreview = new CameraPreview(getBaseContext(), mcam);

FrameLayout frame = (FrameLayout) findViewById(R.id.surface);

SurfaceHolder mSurfaceHolder = mpreview.getHolder();
mSurfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

ImageView imageframe = (ImageView) findViewById(R.id.iframe);
imageframe.setImageBitmap(horizontal);

//set our view to 4:3
ViewGroup.LayoutParams params = frame.getLayoutParams();
params.width = size.width;
params.height = size.height;
frame.setLayoutParams(params); 

//add the necessary margin to the view
Display display = ((WindowManager) getSystemService(WINDOW_SERVICE)).getDefaultDisplay();
MarginLayoutParams ps=(MarginLayoutParams)frame.getLayoutParams();
ps.topMargin = 0;
ps.bottomMargin = 0;
ps.leftMargin = (int)((display.getWidth()-size.width)/2) + 50;
ps.rightMargin = (int)((display.getWidth()-size.width)/2) + 50;
frame.setLayoutParams(ps);

frame.addView(mpreview); 
```

我想这不是最好的解决方案，但它至少可以工作。

# android - 想要在 Alarmmanager 事件的火灾中启动一个新的活动，独立于创建 alarmmanager 事件的任务

> ID：11950735
> 
> 赞同：2
> 
> 时间：2012-08-14T10:51:29.473
> 
> 标签：android

我正在使用`AlarmManager`我的应用程序设置提醒。在触发警报事件时，我正在启动一个`Activity`，Alarmdetails。

问题是随着活动的开始，它也提出了应用程序的任务。我尝试了很多东西，包括 put`FLAG_ACTIVITY_MULTIPLE_TASK`和`FLAG_ACTIVITY_NEW_TASK`. 但没有什么能正常工作。

使用这些标志会带来另一个问题。请帮帮我。这是主要代码：

```
Intent i = new Intent(this,AlarmDetails.class);
i.addFlags(Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);

i.putExtra("hr", hr);
i.putExtra("min", min);
i.putExtra("message", label);

PendingIntent displayIntent = PendingIntent.getActivity(this, 0, i, 0);
alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(),
            displayIntent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:43:55.843

我按照您的建议使用解决了这个问题`FLAG_ACTIVITY_NEW_TASK | FLAG_ACTIVITY_MULTIPLE_TASK`，但是从 BroadcastReceiver 类中启动了活动。

设置闹钟：

```
Intent intent = new Intent(MainActivity.this, AlarmReceiver.class);
PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0, intent, 0);
alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent); 
```

和接收器：

```
public class AlarmReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        Intent newIntent = new Intent(context, MyAlarmActivity.class);
        newIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        newIntent.addFlags(Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
        context.startActivity(newIntent);
    }
} 
```

这对我有用。当闹钟响起时，会创建一个带有 MyAlarmActivity 的新任务 - 如果我从那个新活动返回，我最终会回到闹钟响起之前的任何位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T07:42:50.283

我通过使用解决了这个问题

```
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

每件事都像魅力一样起作用。

# php - 在两者之间获取函数输出文本

> ID：11950746
> 
> 赞同：-1
> 
> 时间：2012-08-14T10:52:05.697
> 
> 标签：php

我正在尝试在两者之间获取函数输出文本，如下所示。但它总是在顶部结束。知道如何正确设置吗？应该是 Apple Pie、Ball、Cat、Doll、Elephant，但 Doll 总是排在最前面。

```
function inBetween()
{
echo 'Doll <br>';
}

$testP = 'Apple Pie <br>';
$testP .='Ball <br>';
$testP .='Cat <br>';
inBetween();
$testP .='Elephant';

echo $testP; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T10:53:31.907

该函数在屏幕顶部回显，因为它首先运行。您正在附加到字符串，但直到函数运行后才会显示它 - 它首先输出回显。尝试这样的返回值：

```
function inBetween()
{
    return 'Doll <br>';
}

$testP = 'Apple Pie <br>';
$testP .='Ball <br>';
$testP .='Cat <br>';
$testP .= inBetween();
$testP .='Elephant';

echo $testP; 
```

编辑：您也可以通过引用传递，其工作方式如下：

```
function inBetween(&$input)
{
    $input.= 'Doll <br>';
}

$testP = 'Apple Pie <br>';
$testP .='Ball <br>';
$testP .='Cat <br>';
inBetween($testP);
$testP .='Elephant';

echo $testP; 
```

将变量传递给函数时，会向它发送一个*副本*，在函数声明中使用 an`&`将变量本身发送给它。该函数所做的任何更改都将成为*原始*变量。这将意味着函数附加到变量上，最后输出整个内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:54:14.067

而不是 echo 使用`return 'Doll <br>';`然后`$testP .= inBetween();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:55:08.953

那是因为你跑`inbetween()`在你前面`echo $testP`。

尝试：

```
function inBetween()
{
return 'Doll <br>';
}

$testP = 'Apple Pie <br>';
$testP .='Ball <br>';
$testP .='Cat <br>';
$testP .=inBetween();
$testP .='Elephant';

echo $testP; 
```

# iphone - 如何更改我的键盘区域设置？

> ID：11950747
> 
> 赞同：1
> 
> 时间：2012-08-14T10:52:06.940
> 
> 标签：iphone, ios4

我可以以编程方式更改我的键盘语言环境吗？

我在网上搜索了解决方案，发现我们必须自定义键盘才能更改语言。

任何提示或链接都会帮助我开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:59:32.503

是的，您必须自定义键盘。但是有一个选项可以让您以任何语言更改 iPhone 中的键盘。只需单击设置->常规->键盘->国际键盘->添加新键盘......添加你想要的任何语言......但是在应用程序中当键盘打开时点击地球然后选择任何键盘

# facebook - 共享视频未播放

> ID：11950750
> 
> 赞同：1
> 
> 时间：2012-08-14T10:52:25.377
> 
> 标签：facebook, video, embed, shared, playback

我正在尝试在 Facebook 墙上// 时间轴上分享视频。一切似乎都很好 - 调试器工具没有遇到任何错误

```
 Meta Tag:   <meta property="og:type" content="video" />
    Meta Tag:   <meta property="og:url"  content="http://b2b.splaytv.de/plugins/SocialNet.ashx?videoid=5B8NwUgVj4oT5vH3ec8W_0" />
    Meta Tag:   <meta property="og:title" content="Speed by microsoft" />
    Meta Tag:   <meta property="og:description" content="(material by microsoft)" />
    Meta Tag:   <meta property="og:image" content="http://GDPlayGround.web.splaytv.de/Videos/5B8NwUgVj4oT5vH3ec8W_0.jpg" />
    Meta Tag:   <meta property="og:video" content="http://b2b.splaytv.de/pl.ashx?id=5B8NwUgVj4oT5vH3ec8W_0" />
    Meta Tag:   <meta property="og:video:width" content="420" />
    Meta Tag:   <meta property="og:video:height" content="237" />
    Meta Tag:   <meta property="og:video:type" content="application/x-shockwave-flash" />
    Meta Tag:   <meta property="og:site_name" content="SPlayTV Video Platform" /> 
```

分享此视频时 - 带有描述等的缩略图会张贴在墙上。但是当我尝试播放视频时 - 只有一个空框说“下载文件”......

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:58:58.977

您需要使用 Flash 才能在新闻源中播放视频。目前，您的代码指向该文件，但它不使用播放器播放视频，因此提示用户下载视频。

# java - netbeans：从特殊日期恢复项目更改

> ID：11950754
> 
> 赞同：5
> 
> 时间：2012-08-14T10:52:34.560
> 
> 标签：java, svn, netbeans, repository, history

我正在使用 Netbeans IDE 编写一个 java 程序。前两天（昨天）我对我的项目进行了一些修改。现在我想撤消这些更改。我看到项目文件的所有文件都有一个包含大约 2 天存档的历史记录。我没有使用 SVN 或 GIT。有什么干净的方法可以将我的项目检索到昨天的某个时间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:27:20.437

尝试使用 netbeans 的本地历史来恢复您的代码。阅读[本文](http://jetbrains.dzone.com/news/using-local-history-restore-de)以使用本地历史记录恢复已删除的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:22:34.077

不，您只能使用 Netbean 的本地历史记录逐个文件。使用像 GIT 这样的 SCM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T10:32:38.820

R.单击项目名称，然后单击

```
Subversion -> Revert Modifications 
```

现在您可以检查如下： ![在此处输入图像描述](../Images/1b224d864c248a0482e5cc840a6c518b.png)

在这里，您可以在第一个选项中使用新文件恢复所有本地更改

回到特定提交的第二个选项

返回特定提交的第三个选项响起

希望有帮助

# jquery - 当 flash 不可用时使用 jquery

> ID：11950758
> 
> 赞同：1
> 
> 时间：2012-08-14T10:52:44.043
> 
> 标签：jquery, flash

我有一个内置在 Flash 中的滑块，但是当 Flash 不可用时（例如移动 ipad 等），我想用 jquery 滑块库替换它。实现这一目标的最佳方法是什么？

# php - 如何在线运行python脚本

> ID：11950761
> 
> 赞同：0
> 
> 时间：2012-08-14T10:52:48.647
> 
> 标签：php, python

我想将一些数据从 php 发送到该 python 脚本运行脚本并将结果返回给 php。我该怎么做？我怎么能在没有框架或 python 服务器的情况下在线运行 python。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:54:33.007

尝试使用 exec PHP 函数： http: [//php.net/manual/es/function.exec.php](http://php.net/manual/es/function.exec.php)

此外，如果您使用 Apache Web 服务器，您必须确保您的服务器的“安全模式”已停用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:10:58.220

这取决于您是否可以在服务器上安装 Python。如果是，请使用 mvillaress 建议的 exec 函数调用它（另请参阅[此线程](https://stackoverflow.com/questions/166944/calling-python-in-php)）。如果您没有安装 Python 并且无法安装它，那么您无能为力。有像[Ideone](http://ideone.com/)这样的在线解释器，但我认为以编程方式调用它们可能会被视为滥用。

# java - 洪水填区的固定记忆法中的“右转”和“左转”是什么意思？

> ID：11950768
> 
> 赞同：1
> 
> 时间：2012-08-14T10:53:10.660
> 
> 标签：java, graphics

我正在尝试实现一种算法来填充区域，该特定算法在以下[Wikipedia](http://en.wikipedia.org/wiki/Flood_fill)文档中的“固定内存方法（右手填充方法）”标题下给出。下面给出了发生左转和右转的算法的具体部分......

```
START:
    set count to number of non-diagonally adjacent pixels filled (front/back/left/right ONLY)
    if count is not 4
            do
                    turn right
            while front-pixel is empty
            do
                    turn left
            while front-pixel is filled
    end if 
```

该声明明确指出要向右转或向左转，而不是向右或向左移动。令我困惑的是，（x，y）坐标处的像素如何转向其左侧的右侧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:58:32.317

假设 forward 最初的意思是“向上”。右转改变了前进的意思——现在它意味着“正确”。再次右转，前进是“下”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:03:04.410

您基本上可以将您的“像素”视为虫子/蚂蚁/恐龙/金色独角兽。所以不仅有一个位置，还有一个方向，它所面对的（**方向**）。因此，如果您的像素*向上查找*，则该命令`turn right`将告诉它向右查找。`move forward`然后意味着向右移动一个像素。

如果你告诉你的像素`turn right`4 次，它会看向与以前相同的方向。3x`turn right`与 1x 相同`turn left`。

# android - BroadcastReceiver 在循环中只调用一次服务

> ID：11950769
> 
> 赞同：0
> 
> 时间：2012-08-14T10:53:17.377
> 
> 标签：android

这是我的 tts 服务代码：

```
public class SMSTTSService extends Service implements TextToSpeech.OnInitListener, OnUtteranceCompletedListener {

private TextToSpeech tts;
private String spokenText;

@Override
public void onCreate() {
    tts = new TextToSpeech(this, this);     
}

@Override
public void onInit(int status) {        
    if (status == TextToSpeech.SUCCESS) {
        int result = tts.setLanguage(Locale.ENGLISH);

        // tts.setPitch(5); // set pitch level
        // tts.setSpeechRate(2); // set speech speed rate

        if (result == TextToSpeech.LANG_MISSING_DATA || result == TextToSpeech.LANG_NOT_SUPPORTED) {
            Log.e("TTS", "Language is not supported");
        } else {                
            speakOut(spokenText);
        }

        /*if (result != TextToSpeech.LANG_MISSING_DATA && result != TextToSpeech.LANG_NOT_SUPPORTED) {
            tts.speak(c, TextToSpeech.QUEUE_FLUSH, null);
        }*/
    } else {
        Log.e("TTS", "Initilization Failed");
    }
}

private void speakOut(String text) {
    tts.speak(text, TextToSpeech.QUEUE_FLUSH, null);
}

@Override
public void onUtteranceCompleted(String uttId) {
    stopSelf();
}

@Override
public void onDestroy() {
    if (tts != null) {
        tts.stop();
        tts.shutdown();
    }
    super.onDestroy();
}

@Override
public IBinder onBind(Intent intent) {
    return null;
}       

@Override
public void onStart(Intent intent, int startId) {
    super.onStart(intent, startId);     
    spokenText = intent.getStringExtra("spoken_txt");
} 
```

}

并且从接收器我打电话给服务，比如

```
public class Receiver extends BroadcastReceiver {

    private static final String TAG = "SMSReceiver";

    @Override
    public void onReceive(Context context, Intent intent) {

for(int i=0; i<msgs.length; i++) {
....
 Intent intentTTS = new Intent(context, SMSTTSService.class);
                        intentTTS.putExtra("spoken_txt", msgBody);
                        context.startService(intentTTS);

} 
```

但是即使我有循环，服务也只会执行一次。如何让我在循环中不止一次有声音？我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:59:05.137

我认为您想将 IntentService 类用于多个实例。

参考这个：[Multiple IntentService or one Service](https://stackoverflow.com/questions/6333822/multiple-intentservice-or-one-service)

**编辑：**这是一个快速示例，显示有关 IntentService 的严格必要代码：

```
public class ExampleIntentService extends IntentService {
     private static final String TAG = ExampleIntentService.class.getName();

     public ExampleIntentService() {
          super(TAG);
     }

     @Override
     protected void onHandleIntent(Intent intent) {

          // The code you want to execute
     }
} 
```

为了启动服务，您可以执行以下操作：

```
Intent intent = new Intent(Intent.ACTION_SYNC, null, context, ExampleIntentService.class);
        intent.putExtra(ExampleIntentService.EXTRA_DATA, "some data");
        context.startService(intent); 
```

然后，在清单中添加：

```
<service android:name="your.package.services.ExampleIntentService" /> 
```

现在，如果您想了解更多详细信息并与 BroadcastReceiver 结合使用，我从 google 的第一个结果中找到了这些链接：

*   [http://www.mysamplecode.com/2011/10/android-intentservice-example-using.html](http://www.mysamplecode.com/2011/10/android-intentservice-example-using.html)
*   [http://mobile.tutsplus.com/tutorials/android/android-fundamentals-intentservice-basics/](http://mobile.tutsplus.com/tutorials/android/android-fundamentals-intentservice-basics/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:20:59.110

您的`onStart()`方法被多次调用，但它所做的只是将`spokenText`变量设置为传递的额外值。所有这一切都发生在说出第一个意图的时候。然后你关闭服务。

您可能想要做的是实现一个简单的队列。在`onStart()`方法中提取额外内容并将 speakText 添加到队列中。然后开始处理队列（如果尚未处理）。

处理队列时，删除队列中的第一个元素并开始说话。在该`onUtteranceCompleted()`方法中，删除队列中的第一个元素，如果有，则开始说出那个元素。当队列中没有元素时，停止服务。

应该管用。

# c - 如何将值分配给堆栈内存上的二维数组？

> ID：11950770
> 
> 赞同：1
> 
> 时间：2012-08-14T10:53:16.243
> 
> 标签：c, arrays

如何将值分配给堆栈内存上的二维数组。我尝试了以下方法，这似乎不起作用。当然可以一次分配每个值，但我有兴趣一次性分配值。有任何想法吗？

```
double phi[2][5];
phi[0] = {1, 0, 2, 1, 0};
phi[1] = {1, 0, 2, 1, 0}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:55:17.427

您可以初始化数组：

```
double phi[2][5] = { {1, 0, 2, 1, 0 },
                     {1, 0, 2, 1, 0 } }; 
```

注意省略的元素将默认为零，因此以下将产生相同的结果：

```
double phi[2][5] = { {1, 0, 2, 1 },
                     {1, 0, 2, 1 } }; 
```

* * *

如果编译器支持 C99，那么复合文字可能是一个选项，但类型`phi`需要更改为指向`double[5]`. 例如：

```
double (*phi)[5];

phi = (double[][5]) { { 11, 12, 13, 14, 15 },
                      { 21, 22, 23, 24, 25 } };

phi = (double[][5]) { { 111, 122, 133, 144, 155 },
                      { 211, 222, 233, 244, 255 } }; 
```

但是必须分配所有维度，而不是单个维度（参见演示[http://ideone.com/NxdUO](http://ideone.com/NxdUO)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:55:35.200

```
double phi[2][5] = {{1, 0, 2, 1, 0},{1, 0, 2, 1, 0}}; 
```

# c# - 在 c# 中从另一个类添加 Rect

> ID：11950773
> 
> 赞同：0
> 
> 时间：2012-08-14T10:53:26.410
> 
> 标签：c#, wpf

我想从 c# 中的另一个类中绘制一个矩形到我的 mainWindow

```
<Window x:Class="MyApp.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Name="mainWindow" Height="768" Width="1366" >
</Window> 
```

这是我的类代码片段，我试图在 mainWindow 中绘制一个矩形

```
private UIElement container;

private Rect rect1 = new Rect();

public TestPage(UIElement cont) 
{        
    this.container = cont;
}

private void init()
{
    this.container.Children.Add(rect1);
} 
```

如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:57:23.297

一个窗口只能有一个内容，因此您必须设置`Content`窗口的属性。

# linux - GhostScript：Windows 7 转换成功，而 Linux 失败

> ID：11950775
> 
> 赞同：2
> 
> 时间：2012-08-14T10:53:31.783
> 
> 标签：linux, windows-7, ghostscript

我正在使用`Ghostscript 9.05`从 PDF 生成图像作为应用程序的一部分（在 Java 中作为进程运行）。

我最近遇到了一个问题，其中一些 PDF 到图像的转换在 linux 机器上失败，并出现以下错误：

```
**** This file had errors that were repaired or ignored.
**** The file was produced by:
**** >>>> Acrobat Distiller 8.3.1 (Macintosh) <<<<
**** Please notify the author of the software that produced this
**** file that it does not conform to Adobe's published PDF 
**** specification. 
```

每个页面都抛出与此类似的错误：

```
**** Warning: File has insufficient data for an image.
%%BoundingBox: 77 36 797 1082
%%HiResBoundingBox: 77.760003 36.720001 796.320030 1081.440041
Page 141
warning: ignoring invalid option raw
error: cannot decode code stream
unable to decode JPX image data. 
```

但是，当在 Win7 机器上本地运行相同的转换时，不会发生错误。

我知道它的短而窄是“*发回 PDF 并让他们给你发一份工作*” - 但我很想知道为什么这会在 linux 机器上失败但成功而没有错误（并产生无错误的图像) 在 Windows 机器上？

有任何想法吗？

我现在不愿意打开错误报告，因为我不知道的 Linux 和 WIndows 版本之间可能存在显着差异。

### 更新

在查看了如何在我们的 Linux 机器上构建 Ghostscript（我们正在运行 Ubuntu 12.04 64 位长期支持版本）之后，我收集了以下信息：

对于 jpeg2000 操作，Ghostscript 使用 JasPer JPEG-2000 运行时库版本 1.900.1-13（JPEG-2000 第 1 部分的 ISO 参考实现）。

JasPer 是使用 libjpeg-turbo8 库构建的。

根据[JasPer 网站](http://www.ece.uvic.ca/~frodo/jasper/)

> JasPer 软件已包含在 JPEG-2000 Part-5 标准（即 ISO/IEC 15444-5）中，作为 JPEG-2000 Part-1 编解码器的官方参考实现。

Ghostscript 被列为已知使用 JasPer 的项目之一。看来 Ubuntu 正在使用 JasPer，ISO 参考实现，并且 Ghostscript 的 Ubuntu 包源将 JasPer (libjasper-dev) 列为构建的依赖项，而不是 openJPEG。[[来源]](http://packages.ubuntu.com/source/precise/ghostscript)

目前看来唯一的选择是尝试不同版本的 linux，构建 ghostscript 版本并对其进行测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:43:50.163

一种可能是您正在运行 64 位 Linux 和 32 位 Windows 二进制文件。

然而，最可能的问题是您的 Linux 发行版选择使用“共享库”构建 Ghostscript。Ghostscript 使用的某些第 3 方库（例如，FReeType、Litle CMS 等）可以动态链接而不是静态链接，并在运行时加载。

我注意到图像是 JPX (JPEG 2000)，这些将使用 OpenJPEG 库。*然而*，Ghostscript 附带的 OpenJPEG 源代码不是 1.5 版本，它是 1.5 加上从即将到来的 2.0 中提取的一些位以及我们需要添加的一些修复（并提供给上游，我们相信它们将被合并到 2.0 中）。我们希望在不久的将来发布下一个版本时使用此代码的标准版本。

如果您的 Linux 发行版选择使用 OpenJPEG 作为共享库来构建 Ghostscript，那么您将无法从这些源代码更改中受益，并且 JPX 解码器也无法正常工作。GS 的 Windows 版本没有“开箱即用”的方法来将第 3 方库构建为 DLL，因此（除非您自己做很多工作）它总是使用第 3 方的源代码我们提供的图书馆。

如果您自己从源代码（在 Linux 上）构建 GS，那么您很可能会发现它的表现非常好。我还冒昧地建议 PDF 文件实际上没有任何问题，只是使用的 OpenJPEG 版本。

每次我们提交到 Ghostscript 存储库时，我们都会进行大约 60,000 次测试，但显然我们是针对我们实际发布的代码进行这些测试。至少这意味着如果您使用我们提供的代码，我们对我们发送的内容有合理程度的信心。我们*不*建议使用共享库构建 Ghostscript，但我们所说的任何内容都无法说服各种 Linux 发行商，因此我们必须接受它。

# sql-server - SQL Server 2012 FileTable 无法打开 Outlook 2010 电子邮件

> ID：11950779
> 
> 赞同：2
> 
> 时间：2012-08-14T10:53:50.390
> 
> 标签：sql-server, filestream, sql-server-2012, outlook-2010, filetable

我在 SQL Server 2012 数据库中创建了一个 SQL FileTable。我正在尝试将 Outlook 2010 .msg 文件拖放到 SQL FileTable。我已经尝试对映射到 FileTable 位置以及原始 FileTable 位置的网络驱动器执行此操作，但两次我都收到错误

> *不支持该请求。*

如果我先将文件拖到本地驱动器，然后可以将其复制到 FileTable，但是在尝试打开文件时，我收到以下错误消息：

> *不能打开文件 。该文件可能不存在，您可能没有打开它的权限，或者它可能在另一个程序中打开。右键单击包含该文件的文件夹，然后单击“属性”以检查您对该文件夹的权限。*

如果我将电子邮件从 FileTable 中复制回来，我可以很好地打开它。

我阅读了有关在使用网络驱动器时打开 Outlook 邮件时可能导致问题的其他问题，但我已经对此进行了测试，并且在存储到其他网络位置时这不是问题，并且仅在将其存储到 FileTable 时才会发生。

是否可以将 Outlook 电子邮件存储在 SQL Server 2012 FileTable 中？我一直无法在互联网上找到有关它或其他任何有此问题的信息。

任何有关如何存储 Outlook 消息的帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:55:21.020

Outlook 很可能使用 FileTable 中未实现的某些文件系统功能。

刚刚在[这里](http://www.sqlskills.com/BLOGS/BOBB/post/SQL-Server-2012-FileTables-in-T-SQL-part-2-new-rows.aspx)找到了这一行：

> 但是一旦文件中有数据，尝试使用 Notepad.exe 进行编辑会返回错误，“不支持此请求”。这是因为 Notepad.exe 使用内存映射文件，这是 FileTable 不支持的 win32 功能。

在[MSDN](http://msdn.microsoft.com/en-us/library/ff929144.aspx)上：

> 但是，您可以使用远程计算机上的这些应用程序打开存储在 FileTable 中的文件，因为在这些情况下不使用内存映射功能。

# iphone - 在 NSMutableArray Xcode 中存储经纬度

> ID：11950783
> 
> 赞同：2
> 
> 时间：2012-08-14T10:54:17.867
> 
> 标签：iphone, objective-c, ios, xcode, ipad

如何存储多个点（纬度和经度）`NSMutableArray`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T11:01:27.230

你有几个选择：

*   使用纬度和经度属性创建您自己的对象并将其存储
*   使用[CLLocationCoordinate2D](http://developer.apple.com/library/mac/documentation/CoreLocation/Reference/CoreLocationDataTypesRef/Reference/reference.html#//apple_ref/doc/uid/TP40010238-CH2-SW15)结构并将其包装在[NSValue](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsvalue_Class/Reference/Reference.html)对象中
*   使用[CLLocation](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html)对象

我推荐后者，因为您可能会发现稍后需要 CLLocation 上的额外功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:09:41.623

```
//NSMutable array to store values
NSMutableArray *array =[[NSMutableArray alloc] init];    
//some lat and long values
NSDictionary *latLongDict = @{@"lat" : @(18.25689), @"long":@(48.25689)};

//add the objects to the array
[array addObject:latLongDict]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-07T10:58:01.723

您可以将数据存储在字典对象中：

```
NSMutableArray *locationArray =[[NSMutableArray alloc] init];

//some lat and long values
CGFloat latitude = 18.25689;
CGFloat longitude = 48.25689;

NSDictionary *locationDict = @{ @"latitude" : [NSNumber numberWithFloat:latitude], @"longitude" : [NSNumber numberWithFloat:longitude] };

[locationArray addObject:locationDict]; 
```

并通过以下方式访问它们：

```
NSUInteger anIndex = 0;
NSDictionary *locDict = [locationArray objectAtIndex:anIndex];
NSNumber *latitudeNumber = (NSNumber *)[locDict objectForKey:@"latitude"];
NSNumber *longitudeNumber = (NSNumber *)[locDict objectForKey:@"longitude"]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-14T11:07:23.597

使用 Mapkit 框架，您可以找到当前位置以及附近的位置及其纬度和经度

```
 CLLocationCoordinate2D location;
 location = [mMapView.userLocation coordinate];

 if(iLat && iLng) 
 {

    location.latitude = [iLat floatValue];
    location.longitude = [iLng floatValue];
 } 
```

在数组中存储值

```
NSMutableArray *a= [[NSMutableArray alloc] initWithObjects:location.latitude,location.longitude, nil]; 
```

# javascript - Internet Explorer 在 contentEditable 模式下向对象元素添加重复的参数标签

> ID：11950784
> 
> 赞同：3
> 
> 时间：2012-08-14T10:54:20.473
> 
> 标签：javascript, internet-explorer, contenteditable, object-tag

在 Intenet Explorer (9 版本) 中存在以下问题：浏览器向对象元素添加了额外的参数标签。它在 element.innerHTML 中可见。我的代码保存了生成的 html，并且在下一次渲染时我得到了更大的 html。在所有随后的保存中，它会变得更大，这会导致问题

初始html：

```
<object width="150" height="150" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">
<param value="3968" name="_cx">
...
<embed width="90" height="150" menu="false" loop="false" wmode="transparent" quality="high" src="/flash/helloworld.swf" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash">
</object> 
```

变大是这样的：

```
<object width="150" height="150" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">
...
<param value="3968" name="_cx">
....
<param value="3968" name="_cx">
.....
<param value="3968" name="_cx">
....
<embed width="90" height="150" menu="false" loop="false" wmode="transparent" quality="high" src="/flash/helloworld.swf" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash">
</object> 
```

# visual-studio-2010 - 无法在 Visual Studio Express 2010 中选择 Main Method 作为启动对象？

> ID：11950786
> 
> 赞同：9
> 
> 时间：2012-08-14T10:54:26.057
> 
> 标签：visual-studio-2010

我在我的一个类中编写了一个 Main 方法。我的启动对象说`Not set`。单击它时，下拉菜单中不会显示任何其他内容。为什么我不能选择主要方法作为我的启动对象？我只想通过按 ctrl+F7 来运行我的 Main 方法，但是这样做时，什么也没有发生。下面是我正在使用的非常短的 Main 方法。

```
static void Main(string[] args)
{
    Program c = new Program();
    c.consoleread();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-03T17:31:38.287

将一个类移动到一个新的命名空间后，我遇到了这个麻烦。尝试关闭解决方案并手动编辑 .csproj 文件：

```
<PropertyGroup>
  <StartupObject>MyNamespace.MyClassWithMain</StartupObject>
</PropertyGroup> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T11:17:48.880

您的主要方法必须是`public`, `static`（`Shared`在 VB.NET 中）并具有特定签名：它必须返回`void`或`int`，并且其参数列表必须为空或为`string`.

如果您的方法不符合这些要求，则不能选择它作为启动对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-28T11:27:19.537

重新启动VS使其工作！

背景：这个错误今天发生在我想更改为控制台应用程序的 .net 4.5.1 服务项目中。将输出类型更改为“控制台应用程序”，它仍然没有改变。我还手动编辑了 .csproj。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-03T13:29:52.453

如果是 VB.NET 项目，

> 项目 -> {ProjectName} 属性 -> 应用程序

如果选中 Enable application framework，则不能选择通常的 Main 方法。错误是：

> 选中“启用应用程序框架”时，启动对象必须是表单。

此外，取消选中后，标签将从**Startup form**更改为**Startup object**。

错误对话框：

[![在此处输入图像描述](../Images/7ed9381c1fc578a985cc36853622a401.png)](https://i.stack.imgur.com/qfYfl.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-30T21:04:50.280

如果您想要的类没有显示在下拉列表中，您可以在解决方案资源管理器中双击项目，然后在项目名称后添加类名称。（在代码中显示为“myproject”和“myclass”）

```
<Project Sdk="Microsoft.NET.Sdk">

<PropertyGroup>
<OutputType>Exe</OutputType>
<TargetFramework>netcoreapp3.1</TargetFramework>
<StartupObject>myproject.myclass</StartupObject>
</PropertyGroup>

</Project> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-13T15:19:35.000

从 .net core 3 预览版降级到 2.2 后，我遇到了同样的问题 - 您需要从这里安装最新版本的 SDK：

[https://dotnet.microsoft.com/download/dotnet-core/2.2](https://dotnet.microsoft.com/download/dotnet-core/2.2)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-17T11:43:30.027

如果您的项目使用**“ `Enable application framework`”**选项，那将`Sub Main`是未显示的一种可能性。

来自[https://visualstudiomagazine.com/articles/2007/10/01/enable-the-application-framework-in-vb.aspx](https://visualstudiomagazine.com/articles/2007/10/01/enable-the-application-framework-in-vb.aspx)

> Q 当我在我的 Visual Basic 应用程序中选中“启用应用程序框架”时会发生什么？**为什么我的 Sub Main 会从 Startup Object 下拉列表中消失**...
> 
> Visual Basic 支持“应用程序框架”，可以更轻松地管理应用程序的启动、关闭和异常管理。您可以使用项目属性中的复选框启用或禁用应用程序框架。...
> 
> 无论您是否使用应用程序框架，Visual Basic 都会为您的应用程序生成一个隐藏的 My.Application 类。...
> 
> 您看不到的 My.Application 类部分**包括一个共享的 Sub Main 作为应用程序的入口点。... Sub Main 从启动组合框中消失的原因是 Visual Basic 正在为您提供 Sub Main。**

这只是对这个问题最相关方面的总结，但链接的文章还包括解释应用程序框架的其他一些细节。

# c++ - C++ 套接字服务器架构

> ID：11950787
> 
> 赞同：4
> 
> 时间：2012-08-14T10:54:32.597
> 
> 标签：c++, sockets, unix, websocket, serversocket

我正在为我的实时游戏设计一个 TCP 套接字服务器，我已经采用了两种方法来实现它的架构。他们来了：

1.  我们启动两个线程。一个在无限循环中侦听新连接并将新客户端添加到数组中。第二个顺序扫描数组中的所有客户端套接字并从中读取数据。

2.  我们启动一个线程，它在无限循环中侦听新连接，然后为每个仅从一个套接字读取数据的客户端启动新线程。

我已经对大约 100 个客户端进行了一些测试，但我看不出两种架构的性能差异。所以，我想问问你的意见，哪种方式更好。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T11:10:40.680

这一切都取决于您的游戏实际的*实时性。*

在第一种方法中，您在所有打开的套接字上实现事件的多路分解 - 并且可能使用`select()`or`poll()`来阻止。显然，虽然您只能在阻塞时接收事件通知，并且如果在解除阻塞时传递了多个事件，则您可以有效地序列化每个事件的处理。

在第二种方法中，您有可能并行处理事件（尤其是在多处理器系统上），并且还可以使用线程优先级对连接进行优先级排序。然而，这种方法使用更多的内存，并且调度线程比在第一种方法中迭代事件列表要昂贵得多。

你需要问自己的问题是：

*   你真的需要并行处理事件吗？（无论如何，您是否要在处理中序列化执行？）
*   每个事件的处理量是否明显高于调度线程的成本？
*   线程堆栈的内存消耗会限制可伸缩性吗？
*   您的实时性要求真的那么严格吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T19:32:34.720

If you want to go WebSocket, here is a quick tip: look at [https://github.com/zaphoyd/websocketpp](https://github.com/zaphoyd/websocketpp) and/or ask the author (Peter). WebSocket++ has a very flexible framework regarding what/how you do your WebSocket processing.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T11:12:11.263

在我看来，这取决于你认为什么对你来说更容易。

你用升压吗？如果是，您可以查看他们`asio`用于实现此类服务器架构的示例。这样可以避免在监听连接和处理请求时手动管理线程。

还有[ZeroMQ](http://www.zeromq.org/)，这是一个库，专门用于轻松实现服务器架构。有了它，您可以通过显式控制线程数等来测试更详细的案例。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T22:30:25.847

根据经验，我将为新客户设置一个单独的线程，以便您可以处理登录，并让它等待加入游戏的好时机。我想您并不总是想为新玩家登录而中断游戏。否则，一个主线程可能会变得非常混乱。

您可能还需要线程组中的多个现有游戏线程以实现可扩展性，例如，如果您有 8 个以上可用内核，则每个游戏一个。考虑甚至从新的游戏线程重定向到另一个服务器以获得更大的可扩展性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T10:42:19.577

只需使用[Boost.Asio](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio.html)并快乐！学习一些示例并开始制作真正的游戏，而不是网络基础知识。

# html - 如何将代码保存在一个博客页面中，并且该博客页面的代码中的代码不会更改？

> ID：11950798
> 
> 赞同：0
> 
> 时间：2012-08-14T10:54:48.430
> 
> 标签：html, xml, blogs

```
 @"//div[@id='transcriptText']/div[@class='notranslate']/p/a/@href"];

   @"//div[@id='videoPlayerSWF']/noscript/div/p/a/@href"];

    @"//div[@id='transcriptText']/div/p/a/text()"];

    @"//div[@id='transcriptText']/div/p/a/text()"]; 
```

如何将代码保存在一个博客页面中，并且该博客页面的代码中的代码不会更改？

我通过 4 行代码到我的一个雅虎博客，

但是我分析了这个雅虎博客页面的代码，字符已经改变了。

```
<meta http-equiv="Pragma" content="no-cache" />
<meta property="og:type" content="article" />
<meta property="og:title" content="ted | Blog | wert&#039;s blog" />
<meta property="og:description" content="  @&amp;quot;//div[@id=&amp;#039;transcriptText&amp;#039;]/div[@class=&amp;#039;notranslate&amp;#039;]/p/a/@href&amp;quot;];

   @&amp;quot;//div[@id=&amp;#039;videoPlayerSWF&amp;#039;]/noscript/div/p/a/@href&amp;quot;];

    @&amp;quot;//div[@id=&amp;#039;transcriptText&amp;#039;]/div/p/a/text()&amp;quot;];

    @&amp;quot;//div[@id=&amp;#039;transcriptText&amp;#039;]/div/p/a/text()&amp;quot;];" />
<meta property="og:image" content="http://l.yimg.com/op/images/ico_product_56.png" />
<meta property="og:site_name" content="Yahoo! Blog" /> 
```

怎么办，字符不会变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T03:41:29.777

它是通过这种方式解决的。

```
<pre><code>@"//div[@id='transcriptText']/div[@class='notranslate']/p/a/@href"];

 @"//div[@id='videoPlayerSWF']/noscript/div/p/a/@href"];

 @"//div[@id='transcriptText']/div/p/a/text()"];

 @"//div[@id='transcriptText']/div/p/a/text()"];
</code></pre> 
```

# browser - 在公共场所的屏幕上显示网页的软件？

> ID：11950800
> 
> 赞同：-5
> 
> 时间：2012-08-14T10:54:52.197
> 
> 标签：browser

我想有一个屏幕为电梯中的访客显示一个动态网站。是否有任何开源软件可以做到这一点？诸如欢迎信息、火车时刻表或时钟之类的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T01:37:37.440

你真的需要努力自己解决问题。你没有对这个问题进行任何研究或尝试。

但是，我建议您调查以下解决方案：

[http://www.signage.dtri.com/products/integrated_player_server_appliance/index.html](http://www.signage.dtri.com/products/integrated_player_server_appliance/index.html)

我为我的工作场所管理数字媒体服务器。我们有大约 60 台微型 PC 从中央存储库流式传输内容。

它的设置相当容易，您可以让它与 AD 很好地集成。

# 内容

基本上你所做的是设置区域。在这些区域内，您可以播放/流式传输/显示任何格式的内容。所以我的组织会说：

*   区域 2：时钟
*   区域 3：天气
*   全屏：电视（主要是新闻）或幻灯片
*   RSS：新闻提要

您可以安排内容在一天中的不同时间播放等。

# 示例区域

![在此处输入图像描述](../Images/470210cea8bfc217ceec4885b6747eaf.png)

这绝不是一个程序化的答案，尽管它简单且成本相对较低。如果您有任何问题，请告诉我。但我再次强调在您的问题中提供足够有用信息的重要性，以便其他人在未来受益。

我提供了这个答案而不是代码，因为我没有看到任何编程经验的证据。如果您更喜欢编程解决方案，请提供代码示例和更多上下文。

# c# - exp/imp 命令使用 c# ADO.NET

> ID：11950802
> 
> 赞同：0
> 
> 时间：2012-08-14T10:55:02.543
> 
> 标签：c#, ado.net, oracleclient

我被要求在 c# 中创建代码

1）首先从数据库中删除所有内容。
现在我们使用 SQL plus 执行以下命令：

> RAMNIVAS_CC/RAMNIVAS_CC@orclwex3 设置页面 0 设置行 80 假脱机 c:\delete_objects_cc 选择 'drop '||object_type||' '||对象名||';' 来自用户对象；spool off start c:\delete_objects_cc.lst purge recyclebin; 设置第 100 页从 user_objects 中选择 count(*)；

我可以使用 ADO.net 使用 command.ExecuteNonQuery() 执行该命令吗？? count(*) 用于检查它是否完成或现在。

2）然后我们存储数据库。我有一个保存备份文件（DMP 和文本）的文件夹。
我们转到命令提示符，然后运行以下命令：

imp YOGENDRA_CA/YOGENDRA_CA@ORCLWEX3 file=CA.dmp log=CA.Log buffer=1000000 fromuser=RAMNIVAS_CA touser=YOGENDRA_CA statistics=none grants=n commit=y

我也可以使用与步骤 1 相同的程序进行操作吗？

3)然后使用命令
exp YOGENDRA_CA/YOGENDRA_CA@ORCLWEX3 file=CA.dmp log=CA.log direct=y compress=y buffer=1000000 grants=n statistics=none恢复它

# zend-framework - Wamp 和 Zend - 无法打开输入文件：scripts/load.sqlite.php

> ID：11950806
> 
> 赞同：0
> 
> 时间：2012-08-14T10:55:21.457
> 
> 标签：zend-framework, wamp

我一直在努力完成[http://framework.zend.com/manual/en/learning.quickstart.create-model.html](http://framework.zend.com/manual/en/learning.quickstart.create-model.html)教程，然后又碰了壁。

我正在尝试使用以下内容添加数据库：

```
C:\wamp\www\zendtest\quickstart>php scripts/load.sqlite.php --withdata 
```

提交时出现以下错误：

```
Could not open input file: scripts/load.sqlite.php 
```

有没有人不知道这是为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:03:33.490

因为你是在 Windows 上做的。我无法测试它，但是，试一试！

1.  代替

    C:\wamp\www\zendtest\quickstart>php 脚本/load.sqlite.php --withdata

尝试：

```
C:\wamp\www\zendtest\quickstart>php scripts\load.sqlite.php --withdata 
```

做 ：

```
php -v 
```

给你回应？像php的版本？我想知道环境路径上是否设置了 php。

当你这样做时会发生什么：

```
C:\wamp\www\zendtest\quickstart>cd scripts
C:\wamp\www\zendtest\quickstart\scripts>php load.sqlite.php --withdata 
```

尝试不同的组合，然后回来！

该文件确实存在吗？不是吗？

**需要了解的重要部分：** 您的库是否有 Zend 文件夹？

在您的文档根目录中，检查库文件夹，其中应该有“Zend”文件夹。如果它不存在，请打开您的源代码并复制粘贴“library”文件夹下的整个目录。

# java - Java线程wait（）notify（）在一种方法中

> ID：11950807
> 
> 赞同：0
> 
> 时间：2012-08-14T10:55:24.747
> 
> 标签：java, multithreading, wait, notify

```
public class Signal2NoiseRatio
{
    public ImagePlus SingleSNR(ImagePlus imagePlus) throws InterruptedException
    {

        new Thread()
        { 
          @Override public void run() 
          { 
              for (int i = 0; i <= 1; i++)
              { 
                  System.out.println("in queue"+i);
              }

              synchronized( this ) 
              { 
                  this.notify(); 
              }
            } 
        }.start();

        synchronized (this) 
        {
        this.wait();
        }

        return imagePlusToProcess;
    }
} 
```

`notify()`达不到`wait()`。

这里有什么问题？

对我来说，实现这一种方法中的两种同步方法是很重要的。

主线程执行一个在其中呈现图像的帧。该方法是否有可能`wait()`将框架引导到白色窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:01:00.587

`this`在`SingleSNR`方法和`this`被覆盖的`run`方法中不是同一个对象（里面`run`，`this`指的是匿名子类`Thread`）。您需要确保您通知的对象与您所`wait`针对的对象相同，该对象可用于`Signal2NoiseRatio.this`：

```
 @Override public void run() 
      { 
          for (int i = 0; i <= 1; i++)
          { 
              System.out.println("in queue"+i);
          }

          synchronized( Signal2NoiseRatio.this ) 
          { 
              Signal2NoiseRatio.this.notify(); 
          }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:01:16.527

两个“this”不一样，一个是Signal2NoiseRatio，一个是Thread

# boost - Boost 中的 WaitForMultipleObjects 功能

> ID：11950808
> 
> 赞同：4
> 
> 时间：2012-08-14T10:55:26.037
> 
> 标签：boost

我需要`WaitForMultipleObjects`多平台项目中的功能。
我可以从 Boost 中使用什么来代替它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T15:46:47.213

我找到了这个问题的答案：不存在。

但是我在[http://lists.boost.org/Archives/boost/2004/12/77175.php上找到并回答了](http://lists.boost.org/Archives/boost/2004/12/77175.php)

希望对其他人有所帮助

*乍一看，等待一个条件和等待多个对象并不密切相关。条件不带有状态，而您正在等待的句柄可以。条件只是表示出现了状态变化。特别是受互斥锁保护的某个（组）变量的状态变化。您宁愿需要的是，当操作系统提供的句柄更改状态时，会发出某个条件的信号。我最终创建了一个小类“wfmo”，条件是作为成员发出信号。该类具有添加操作系统句柄的成员函数，并在内部创建一个阻塞 WaitForMultipleObjects 的线程。返回时，它会发出条件信号。*

*这是有效的。但是我认为它确实只是以务实的方式解决了这个问题。（而且我担心在某些情况下，由于额外线程导致的运行时开销可能不可忽略。）要取消额外的线程，您需要修改 condition.wait() 以接受您正在等待的对象的句柄为了。在内部，等待当前使用 WaitForSingleObject。用 WaitForMultipleObjects 替换它们将是一项简单的任务。但是：您需要提供操作系统句柄！这破坏了便携性。真正的问题是：Boost 目前没有低级 IO 概念，定义了自己的 IO 句柄等。尽管该主题已在列表中反复讨论，但仍然没有任何提案（至少是正式的）解决这些问题。是的，有关于网络等的提议，但没有关于一般（低级）IO 的提议。（在此之上，我认为应该建立网络。）*

# jquery - 使用 jQuery contextMenu 插件获取打开上下文菜单的单击元素的 ID

> ID：11950811
> 
> 赞同：11
> 
> 时间：2012-08-14T10:55:31.323
> 
> 标签：jquery, jquery-plugins, contextmenu

我在 SVG 图形中使用来自 Rodney Rehm的[jQuery contextMenu 。](http://medialize.github.com/jQuery-contextMenu/index.html)它适用于基本用途。

但是我需要获取触发上下文菜单的 SVG 元素的 ID（或任何其他属性），以便在上下文菜单的项目列表中使用它来获取动态项目名称。

我使用[Simple Context Menu](http://medialize.github.com/jQuery-contextMenu/demo.html)演示，现在想根据单击的 SVG 元素的 ID 用动态菜单项替换这些静态菜单项。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-14T13:03:37.950

This may help you: [http://medialize.github.com/jQuery-contextMenu/demo/dynamic-create.html](http://medialize.github.com/jQuery-contextMenu/demo/dynamic-create.html)
Here's some sample code:

```
$(function(){
    $.contextMenu({
        selector: 'my-selector-here', 
        build: function($trigger, e) {
            // this callback is executed every time the menu is to be shown
            // its results are destroyed every time the menu is hidden
            // e is the original contextmenu event, containing e.pageX and e.pageY (amongst other data)
            // $trigger is the element that was rightclicked on - get its id here
            var id = $trigger.getTheIDSomehow()
            // build the menu items
            if (id == 1) {
              menuItems = {...}
            else if (id == 2)
              menuItems = {...}
            return {
                callback: function(key, options) {
                    // this is called when one of the contextmenu options is clicked
                },
                items: menuItems
            };
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-12-12T19:01:21.880

当我使用静态菜单时，我得到这样的 id：

```
...
callback: function (key, options) {
    id = options.$trigger.attr("id");
    ...
},
... 
```

也许 $trigger.attr("id") 可以为你工作。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-01-10T06:49:24.327

您只需检查右键单击是在哪个元素上完成的：

```
$.contextMenu({
            selector: 'tr',
            callback: function (key, options) {
                var m = "clicked: " + key;
                if (key == "Clone") 
               {
                    Your_Function($(this).attr('id'));
               }

            },
            items: {
                "Clone": { name: "Clone" },
                }
            }); 
```

# javascript - 在 javascript 中搜索文本并获取其所有开始和结束索引

> ID：11950813
> 
> 赞同：0
> 
> 时间：2012-08-14T10:55:37.697
> 
> 标签：javascript

我有一个内容

> 苹果是玫瑰科（蔷薇科）苹果树的果仁。它是最广泛种植的树果之一，苹果是人类使用的许多苹果属成员中最广为人知的。苹果长在落叶小树上。

我有一个像

```
["apple", " ", "is", " ", "the"]; 
```

使用这个数组如何在javascript中找到单词**apple的开始索引和结束索引？**

我尝试循环内容并使用`indexOf`但我无法获得单词的所有索引

这是我试过的

```
var matchs =[];
var content = "a b c defgh a b csdwda abcdfd";
var arrayWord =["a"," ", "b"];
var w =0;
var pos =0;
var firstIndex = content.indexOf(arrayWord[w],pos);
pos = firstIndex;
while (pos > -1) {
    pos+=arrayWord[w].length;
    w++; 
    pos = content.indexOf(arrayWord[w], pos);
    matchs.push(firstIndex,pos);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:45:11.907

阅读您的评论后，我认为这就是您所追求的。如有必要，您可以添加更多替换语句。

```
var text,
    pos,
    start,
    matches = [],
    charArr,
    charText,
    currentMatch;

text = $("h5").text( );

//white spaces must match length of string being replaced
text = text.replace("\r\n","    ");
charText = text.split("");

charArr = ["apple", " ", "is", " ", "the"].join("").split("");
currentMatch = 0;

// Loop through char array ignoring multiple white spaces
for( pos = 0; pos < text.length; pos += 1 ) {

    if( currentMatch === 0 ) start = pos;

    if( charText[pos] === charArr[currentMatch] ) {
        currentMatch += 1;      
    } else if( charText[pos] !== " " ) {
        currentMatch = 0;
    }

    // matched entire array so push to matches
    if( currentMatch === charArr.length ) {     
        matches.push( [ start, pos] );
        currentMatch = 0;
    }
} 
```

[在这里](http://jsfiddle.net/gFgz2/3/)提琴

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:59:18.830

假设我已经正确理解了您的问题，您可以`join`使用数组并使用`indexOf`字符串的方法来获取起始索引（此示例假设您的字符串存储在其中，`str`并且您的数组存储在 中`arr`）：

```
var start = str.indexOf(arr.join("")); 
```

您也可以摆脱数组中的空格并将空间传递`join`给更小的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T11:03:26.893

```
var text = $("h5").text(); // Get the text from your h5.
var searchText = "apple is the";
var found = []
function findAll(string) {
  var startIdx = string.search(searchText);
  var endIdx = startIdx + searchText.length;
  if(startIdx == -1) {
    return;
  }
  else {
    found.append([startIdx, endIdx]);
    findAll(string.substring(endIdx, string.length));
  }
}
findAll(text); 
```

这将递归搜索字符串，直到`searchText`找到所有实例。

每次出现都存储为开始和结束索引的`[[start, end],[start,end],...]`列表`found`

# ruby-on-rails - Ruby on rails 协会

> ID：11950817
> 
> 赞同：1
> 
> 时间：2012-08-14T10:55:54.290
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, associations, model-associations

我正在做一个复杂的关联，我有以下问题

我有 2 个模型。Custmer_bills 和 Billing_address 都包含 customer_ids。一位客户有一个帐单地址，一位客户有许多客户账单。关联如下所示。

```
 class Customer < ActiveRecord::Base
    has_one :billing_address
    has_many :customer_bills
    end

    class CustomerBill < ActiveRecord::Base
    attr_accessible :customer_id
    belongs_to :billing_address
    belongs_to :customer
    end

    class BillingAddress< ActiveRecord::Base
    attr_accessible :customer_id, :address, :city, :phone_work, :phone_home
    belongs_to :customer
    has_many :customer_bills
    end 
```

现在有了这个协会，我正在尝试账单地址详细信息，如地址、城市、电话号码，并在`show.html`账单创建后显示。

我在帐单地址和 customer_bill 中进行了 belongs_to 更改，即

我试过以下。在`show.html`

```
<% for billing_address in @customer_bill.billing_addresses %>  
    <strong>Billing Address</strong>  
  <%=h billing_address.address%><br/>

    <strong>City</strong>
  <%=h billing_address.city%><br/>
  <% end %> 
```

上面的代码没有错误，但没有显示详细信息。

为此我有 `has_and_belongs_to_many`协会和

```
<%=@bill.address%><br/> 
```

以上给出了控制器中的错误和相应的代码

```
def show
    @customer_bill = CustomerBill.find(params[:id])
    @bill = BillingAddress.find(params[:customer_id])
  end 
```

那么一旦制作了客户账单，我如何才能获得客户的账单地址详细信息？

寻求指导。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:42:43.140

您在视图中使用的关系与您在模型中指定的关系不对应，并使用错误的 id 参数查询数据库。

1.  `CustomerBill`有`:billing_address`，**没有** `:billing_addresses`。不需要循环`show.html.erb`
2.  您错误地`BillingAddress`使用`params[:customer_id]`. `find`for将按列`BillingAddress`搜索`:id`，**而不是**按`customer_id`列搜索。

根据您迄今为止提供的信息，`@bill`以下内容是错误且不必要的。

```
def show
  @customer_bill = CustomerBill.find(params[:id])
  @bill = BillingAddress.find(params[:customer_id])
end 
```

如果`params[:id]`是 a 的 id 值`CustomerBill`，则可以`BillingAddress`从`CustomerBill`实例中获取，而无需直接查询 `BillingAddress.

```
def show
  @customer_bill = CustomerBill.find(params[:id])
end

# in your view
<%= @customer_bill.billing_address.address %> 
```

此外，由于`CustomerBill`只有**一个** `BillingAddress`，因此不需要循环

```
<% for billing_address in @customer_bill.billing_addresses %>  
  <strong>Billing Address</strong>  
  <%=h billing_address.address%><br/>

  <strong>City</strong>
  <%=h billing_address.city%><br/>
<% end %> 
```

可以简单地

```
 <strong>Billing Address</strong>  
  <%=h @customer_bill.billing_address.address%><br/>

  <strong>City</strong>
  <%=h @customer_bill.billing_address.city%><br/> 
```

同样，这一切都基于您提供的信息。您尝试在视图中使用关系的方式并不能反映您的关系在模型中的设置方式，因此我正在对您尝试执行的操作做出一些假设*（例如，因为您从未指定此是一种`show`方法）*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T02:35:17.323

我喜欢上面的答案。如果您坚持将 BillingAddress 作为自己的模型，而不是简单地将帐单地址字段添加到 Customer（这将消除混乱和头痛），那么您可以这样做..（假设上面的控制器代码是 Customer控制器）

客户模型

```
class Customer < ActiveRecord::Base
has_one :billing_address
has_many :customer_bills
delegate :state, :city, :address, :country, :to => :billing_address
delegate :bill_name, :bill_biller, :more_bill_attributes, :to => :customer_bill
end 
```

客户控制器

```
def show
 @customer = Customer.find(params[:id])
end 
```

客户视图

```
<%=@customer.state%>
<%=@customer.city%>
<%=@customer.address%>
<%=@customer.country%>
<%=@customer.bill_name%>
<%=@customer.bill_biller%> 
```

依此类推...因此，在这种情况下，“委托”将允许您将对属性和方法的调用委托给另一个类。

# python - Python数学是错误的

> ID：11950819
> 
> 赞同：6
> 
> 时间：2012-08-14T10:56:04.277
> 
> 标签：python, math, numbers

> **可能重复：**
> [带有浮点数的 Python 舍入错误](https://stackoverflow.com/questions/5997027/python-rounding-error-with-float-numbers)

```
Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:52:43) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "copyright", "credits" or "license()" for more information.
>>> 4.2 - 1.8
2.4000000000000004
>>> 1.20 - 1.18
0.020000000000000018
>>> 5.1 - 4
1.0999999999999996
>>> 5 - 4
1
>>> 5.0 - 4.0
1.0 
```

为什么 Python 的数学会出错？

* * *

## 回答 #1

> 赞同：366
> 
> 时间：2012-08-14T11:04:04.170

你在计算机科学方面已经达到了一个新的水平，你已经成年了。

因此，您现在已为下一步做好准备。我已得到 BDFL*本人*的授权，可以向您透露以下超级机密文件。古人先了解，先破译，现在，你也一样！

# [浮点指南](http://floating-point-gui.de/basic/)

小心对待这份文件！仅与您认识的人分享此信息，得出同样令人费解的结论！

* * *

> **主持人的话**
> 
> 这个答案并不代表 Stack Overflow 上的预期质量标准。然而，它出人意料地发展了自己的生命，现在仅出于历史意义而保存。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-08-14T12:13:22.947

对于浮点运算如何工作的非常严格的指南，有关如何计算答案中的误差有多大的完整说明，您需要：

# [每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

读完之后，你应该去寻找关于 8087 的特别说明，因为它对 IEEE 754 的实现很差，这可能会给你的生活带来新的令人兴奋的问题。

# wpf - 如何将 MouseDoubleClick-Event 绑定到 DataGridTemplateColumn

> ID：11950821
> 
> 赞同：0
> 
> 时间：2012-08-14T10:56:08.000
> 
> 标签：wpf, datagrid, wpf-controls, wpfdatagrid

嗨，我想对我的 DataGridTemplateColumn 使用 MouseDoubleClick 事件，用于 H.Column 下的 Function-和 Processinterface-Row。

但 DataGridTemplateColumn 没有 MouseDoubleClick-Event。谁能帮忙！

这是我的代码：

```
 <DataGridTemplateColumn x:Name="" Header="H." Width="50">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <DataTemplate.Triggers>
                                    <DataTrigger Binding="{Binding Path=ObjectType}" Value="E">
                                        <Setter Property="Visibility" Value="Hidden" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Path=ObjectType}" Value="Function">
                                        <Setter Property="Visibility" Value="Visible" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Path=ObjectType}" Value= "Processinterface">
                                        <Setter Property="Visibility" Value="Visible" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Path=ObjectType}" Value="AND">
                                        <Setter Property="Visibility" Value="Hidden" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Path=ObjectType}" Value="OR">
                                        <Setter Property="Visibility" Value="Hidden" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Path=ObjectType}" Value="XOR">
                                        <Setter Property="Visibility" Value="Hidden" />
                                    </DataTrigger>
                                </DataTemplate.Triggers>
                                <Button Name="btnTable" Visibility="Hidden" Height="20" Width="25" Click="Button_Table_Click">
                                    <Image Height="16" Source="" Stretch="Fill" Width="16"/>
                                </Button>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:27:06.243

像这样写

```
<my:DataGrid 
            AutoGenerateColumns="False" 
            Margin="22,263,0,0" 
            Name="dgAcctSearch"  
            xmlns:my="http://schemas.microsoft.com/wpf/2008/toolkit" 
            IsReadOnly="True" 
            CanUserResizeRows="False" 
            CanUserSortColumns="True" 
            SelectionMode="Extended" 
            SelectionUnit="Cell" 
            HorizontalAlignment="Left" 
            Width="783" 
            Height="331" 
            VerticalAlignment="Top" 
            MouseDoubleClick="dgAcctSearch_MouseDoubleClick" 
            CanUserAddRows="False" 
            CanUserDeleteRows="False"  
            CanUserReorderColumns="False" 
            CanUserResizeColumns="True" 
            AllowDrop="False"
            Background="WhiteSmoke"
            GridLinesVisibility="All"
            /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:31:15.773

then add in code behind file

`private void dgAcctSearch_MouseDoubleClick(object sender, MouseButtonEventArgs e) { //add your logic here }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T10:59:56.903

```
<DataGrid MouseDoubleClick="dataGridLog_MouseDoubleClick" ItemsSource="{Binding}" RowDetailsVisibilityMode="VisibleWhenSelected">
        <DataGrid.Columns>
            <DataGridTemplateColumn x:Name="dateColumn" Header="Date" Width="80" CanUserReorder="True" CanUserSort="False">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock x:Name="dateColumnTextBlock" Text="{Binding Path=DateSent, StringFormat={}{0:dd/MM/yyyy}}" Width="80" />
                        <DataTemplate.Triggers>
                            <DataTrigger Binding="{Binding Path=DateSent, StringFormat={}{0:dd/MM/yyyy}, Converter={x:Reference Name=DateConverter}, ConverterParameter=>3}" Value="True">
                                <Setter TargetName="dateColumnTextBlock" Property="Background" Value="Red" />
                            </DataTrigger>
                        </DataTemplate.Triggers>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>

            <DataGridTemplateColumn x:Name="priorityColumn" Header="Priority" Width="80" CanUserReorder="True" CanUserSort="True">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock x:Name="priorityColumnTextBlock" Text="{Binding Path=Priority}" Width="80" />
                        <DataTemplate.Triggers>
                            <DataTrigger Binding="{Binding Path=Priority}" Value="Urgent">
                                <Setter TargetName="priorityColumnTextBlock" Property="FontWeight" Value="Bold" />
                            </DataTrigger>
                        </DataTemplate.Triggers>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>

            <DataGridTextColumn x:Name="titleColumn" Binding="{Binding Path=Fault}" Header="Title" Width="270" CanUserReorder="True" CanUserSort="True" />
        </DataGrid.Columns>
    </DataGrid> 
```

这本质上是我的 daragrid。我已经展示了这个以证明它确实具有`MouseDoubleClick`. 此外，还展示了如何在模板上使用触发器。

# model - EMF：模型差异作为更改模型/命令

> ID：11950822
> 
> 赞同：0
> 
> 时间：2012-08-14T10:56:10.127
> 
> 标签：model, comparison, diff, eclipse-emf, eclipse-emf-ecore

有 2 个基于相同元模型的模型。我可以使用[EMF 比较](http://www.eclipse.org/emf/compare/)来接收差异模型。就我而言，一种模型是新模型的旧版本。

a) 我如何接收变更模型，描述从旧模型到新模型的变化？

b) 如果这不是默认 EMF 更改模型的实例，是否可以创建一个命令在旧模型上执行这些更改？

由于各种原因，我不想替换 EObject 元素。使用 EMF 比较不是强制性的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:24:37.503

I also answered you on the Eclipse forum, but for stack overflow users that might stumble upon this question, here was my answer :

*   Using EMF Compare 1.3

    You will need to call the diff process programmatically (MatchService.match then DiffService.diff) to retrieve the DiffModel. After that, you can apply all these diffs from within your own command (encapsulate the call to MergeService.merge within a RecordingCommand). From there, you can merge all diffs from a command and retrieve the corresponding ChangeModel if you need it (we have no conversion from DiffModel to ChangeModel). This is cumbersome, but do-able if you are in a context where you can merge (nothing prevents you from undoing the command afterwards if you only needed the ChangeModel). Probably the safest way until we finish cooking EMF Compare 2.0.

*   Using EMF Compare 2

    EMF Compare 2 is currently in its development phase, and though merging is not yet done within commands, it is our goal with this version. However, you can obtain the ChangeModel more easily with this new version. What you need is to create your own IDiffProcessor and use it to instantiate the DefaultDiffEngine. The Diff Processor will be notified whenever we detect a difference on references or attributes. You can then create the corresponding ChangeModel.

# linux-kernel - Linux串口驱动挂起恢复

> ID：11950823
> 
> 赞同：0
> 
> 时间：2012-08-14T10:56:15.327
> 
> 标签：linux-kernel, linux-device-driver

我想在 ttyS2 挂起/恢复方案上打开/关闭一些端口位，但是从驱动程序代码中很难找到代码存根，我可以在其中检查 ttyS2 和设置/取消设置暂停/恢复位。

谁能指出我可以解码端口名称并执行特定操作的特定位置或逻辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:38:30.003

您应该在用户空间中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T05:50:56.207

可以使用设备驱动程序注册的“kobject_name”查找驱动程序名称。对于串行驱动程序，我们获得特定平台上的 tty 实例编号。

# iphone - MKpolyline 标题

> ID：11950827
> 
> 赞同：1
> 
> 时间：2012-08-14T10:56:49.223
> 
> 标签：iphone, google-maps, mkmapview, mkannotationview

我使用以下代码在我的地图中添加了 MKpolyline。但它没有显示折线的标题。请帮我显示标题。提前致谢。

```
self.routeLine = [MKPolyline polylineWithCoordinates:coordinateArray count:2];
self.routeLine.title = @"route1";
[mapView addOverlay:self.routeLine]; 
```

# java - 从xml读取多行

> ID：11950828
> 
> 赞同：2
> 
> 时间：2012-08-14T10:56:48.990
> 
> 标签：java, xml, saxparser

我正在尝试使用 sax 解析器从 java 中的 xml 文件中获取数据。我成功地获得了少量数据，但是当数据变得太大并且多行时，它只提供两行数据，而不是所有行。我正在尝试以下代码-

```
InputStreamReader isr = new InputStreamReader(is);
InputSource source = new InputSource(isr);
SAXParserFactory factory = SAXParserFactory.newInstance();
factory.setNamespaceAware(true);
SAXParser parser = factory.newSAXParser();
XMLReader xr = parser.getXMLReader();
GeofenceParametersXMLHandler handler = new GeofenceParametersXMLHandler();
xr.setContentHandler(handler);
xr.parse(source); 
```

而我的 GeofenceParametersXMLHandler 是-

```
private boolean inTimeZone = false;
private boolean inCoordinate = false;
private boolean outerBoundaryIs = false;
private boolean innerBoundaryIs = false;
private String timeZone;
private List<String> innerCoordinates = new ArrayList<String>();
private String outerCoordinates;

public String getTimeZone() {
    return timeZone;
}

public List<String> getInnerCoordinates() {
    return innerCoordinates;
}

public String getOuterCoordinates() {
    return outerCoordinates;
}

@Override
public void characters(char[] ch, int start, int length) throws SAXException {
    super.characters(ch, start, length);
    if (this.inTimeZone) {
        this.timeZone = new String(ch, start, length);
        this.inTimeZone = false;
    }

    if (this.inCoordinate && this.innerBoundaryIs) {
        this.innerCoordinates.add(new String(ch, start, length));
        this.inCoordinate = false;
        this.innerBoundaryIs = false;
    }

    if (this.inCoordinate && this.outerBoundaryIs) {
        this.outerCoordinates = new String(ch, start, length);
        this.inCoordinate = false;
        this.outerBoundaryIs = false;
    }
}

@Override
public void endElement(String uri, String localName, String name) throws SAXException {
    super.endElement(uri, localName, name);
}

@Override
public void startDocument() throws SAXException {
    super.startDocument();
}

@Override
public void startElement(String uri, String localName, String name, Attributes attributes) throws SAXException {
    super.startElement(uri, localName, name, attributes);

    if (localName.equalsIgnoreCase("timezone")) {
        this.inTimeZone = true;
    }

    if (localName.equalsIgnoreCase("outerBoundaryIs")) {
        this.outerBoundaryIs = true;
    }

    if (localName.equalsIgnoreCase("innerBoundaryIs")) {
        this.innerBoundaryIs = true;
    }

    if (localName.equalsIgnoreCase("coordinates")) {
        this.inCoordinate = true;
    }
} 
```

xml文件是-

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2"
xmlns:gx="http://www.google.com/kml/ext/2.2">

<Placemark>
   <name>gx:altitudeMode Example</name>
   <timezone>EASTERN</timezone>
   <Polygon>
      <extrude>1</extrude>
      <altitudeMode>relativeToGround</altitudeMode>
      <outerBoundaryIs>
      <LinearRing>
         <coordinates>
        -77.05788457660967,38.87253259892824,100 
        -77.05465973756702,38.87291016281703,100 
        -77.05315536854791,38.87053267794386,100 
        -77.05552622493516,38.868757801256,100 
        -77.05844056290393,38.86996206506943,100 
        -77.05788457660967,38.87253259892824,100
      </coordinates>
    </LinearRing>
  </outerBoundaryIs>
</Polygon> 
```

我总是得到两行坐标数据。但是当它们在单行时，我得到了完整的数据。如何在多行中获取完整的数据？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T11:00:04.970

该`characters()`方法不一定会一次性为您提供所有文本数据（这是一个非常常见的误解，顺便说一句）。

正确的方法是将连续调用 characters() 返回的所有数据连接起来（使用 a`StringBuilder`或类似方法）。一旦`endElement()`调用了您的方法，您就可以将该文本缓冲区视为完整的并对其进行处理。

从文档：

> Parser 将调用此方法来报告每个字符数据块。SAX 解析器可以在单个块中返回所有连续的字符数据，也可以将其拆分为多个块

通常你会看到，对于一个小的 XML 文档，一个调用`characters()`就足够了。但是，随着您的 XML 文档的大小增加，您会发现由于缓冲等原因，您将开始收到多个调用。因此，每个单独处理的调用似乎都不完整。

# c# - 使用 MVC3 应用程序进行文档扫描

> ID：11950836
> 
> 赞同：0
> 
> 时间：2012-08-14T10:57:14.883
> 
> 标签：c#

我们需要将文档扫描功能与我们的 MVC3 应用程序集成。Microsoft 是否为此解决方案提供了任何库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:59:25.517

我个人使用了 twain API，我知道它的互操作性，但它并不难。

[http://www.codeproject.com/Articles/1376/NET-TWAIN-image-scanner](http://www.codeproject.com/Articles/1376/NET-TWAIN-image-scanner)

或更现代的东西，例如：

[http://www.gdpicture.com/products/dotnet/document-imaging-sdk.php](http://www.gdpicture.com/products/dotnet/document-imaging-sdk.php)

# javascript - 将键盘输入保存到变量中

> ID：11950841
> 
> 赞同：0
> 
> 时间：2012-08-14T10:57:30.853
> 
> 标签：javascript, firefox-addon, xul

我编写了一个 Firefox 扩展，它从条形码标签扫描仪获取输入，调用页面并将其写入字段。扫描仪被编程为在读取标签后发送击键。我在正在侦听的窗口对象上添加了一个事件`CTRL``K`。我的问题是文本框的焦点，当它丢失时它不起作用。我的问题是：是否可以在不使用文本框元素的情况下获取扫描标签的值？扫描仪输入通过键盘接口输入。

`BrowserOverlay.xul`：

```
<window id="main-window">
<script type="application/x-javascript">

window.addEventListener("keydown", barcodeInit, false);

function sel(){
var textbox = document.getElementById("editIndex");
textbox.focus();
}
</script>
<hbox>
  <spacer flex="1"/>
<textbox id="editIndex" value="" size="1" maxlength="25" oncommand="sel()" />
<statusbar id="status-bar" class="chromeclass-status"> 
<statusbarpanel label="Barcode AddOn" class="statusbarpanel-iconic"
      onclick="openPreferences('barcodePane');" align="left" 
          src="chrome://topas/content/images/icon18.png" />
</statusbar>

</hbox> 
```

当我获得文本框内容时，我正在调用`openURI`在实际窗口中打开页面[并向其发布数据的方法](https://developer.mozilla.org/en-US/docs/Code_snippets/Post_data_to_window)。

`BrowserOverlay.js`：

```
if (event.ctrlKey && pressedKey == prefKey ){
  if(typeof editIndex != "undefined"){
    var dataString = "barcodeValue=" + editIndex;
    immidiate = true;
    document.getElementById("editIndex").value = "";
    window.loadURI(stringURL, null, dataString, false);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T15:45:23.517

`keypress`您可以通过侦听对象上的事件来接收按下的键`window`- 只要浏览器窗口处于焦点状态，无论窗口的哪个元素处于活动状态，您都会得到它们。沿着这些思路：

```
var data = "";
window.addEventListener("keypress", processKeyPress, false);
window.addEventListener("keydown", processKeyDown, false);

function processKeyPress(event)
{
  data += String.fromCharCode(event.charCode);
}

function processKeyDown(event)
{
  if (event.ctrlKey && event.keyCode == prefKey)
  {
    var dataString = "barcodeValue=" + data;
    data = "";
    ...
  }
} 
```

文档：[event.charCode](https://developer.mozilla.org/en-US/docs/DOM/event.charCode)

# windows - 如何启动和停止“自动”进程

> ID：11950844
> 
> 赞同：0
> 
> 时间：2012-08-14T10:57:34.117
> 
> 标签：windows, service, batch-file

我有一个“自动”模式进程说“BPSAuto”。我需要将这个进程关闭一段时间，然后重新启动它。

我使用了 bat 文件并安排了停止和启动的任务。

我用 -->net start BPSAuto --- 来启动

和 --> net stop BPSAuto --- 停止。

现在我的问题是，一旦我停止该过程，它就会再次自动启动。可能是因为它处于“自动”模式。请帮我完全停止。然后重新启动。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:16:32.137

`sc config ServiceName start= <setting string>`

注意 start= 和服务设置之间的空格

设置字符串可以是以下之一：

*   开机
*   系统
*   汽车
*   要求
*   禁用

来自`sc config /?`：

```
修改注册表和服务数据库中的服务条目。
句法：
sc 配置 [服务名称] ...
配置选项：
注意：选项名称包括等号。
 type= <拥有|共享|交互|内核|文件系统|rec|adapt>
 start= <启动|系统|自动|需求|禁用>
 错误= <正常|严重|严重|忽略>
 binPath= <二进制路径名>
 group= <LoadOrderGroup>
 标签= <是|否>
 依赖= <依赖项（由/（正斜杠）分隔）>
 obj= <帐户名|对象名>
 DisplayName= <显示名称>
 密码= <密码>
```

# php - 自动完成扩展器在 PHP 中不起作用

> ID：11950846
> 
> 赞同：0
> 
> 时间：2012-08-14T10:57:46.650
> 
> 标签：php, jquery, jquery-autocomplete

这个自动完成扩展器工作正常，但我不知道它停止工作的原因，没有 javascript 错误即将到来。这是我的代码

```
<script src="scripts/jquery-1.4.1.js" type="text/javascript"></script>

    <script src="scripts/jquery-ui.min.js" type="text/javascript"></script>
    <link href="scripts/jquery-ui.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript">
    $(function() {

    $("#autocomplete").autocomplete({   
      source: "searchEAN.php",
      minLength: 2,//search after two characters
      select: function(event,ui){
       // alert ($value.$id);
       alert (ui.item.value);
      //do something, like search for your hotel detail page
      }  
    });
    });
    </script>
</head>
<body>

<div class="demo">
  <div class="ui-widget">
     <label for="autocomplete">Hotel Name: </label>
     <input id="autocomplete" name="autocomplete"/>
  </div>
</div> 
```

这是`searchEAN.php`页面代码。当我通过将术语作为查询字符串传递来直接运行此页面时，它的返回数据

```
<?php

include_once('config.php');

if (isset($_GET['term'])) {
$term = trim(strip_tags($_GET['term']));//retrieve the search term that autocomplete sends    
$qstring = "SELECT Distinct CONCAT(City,',',StateProvince,',',Country) AS value,EANHotelID AS id FROM ActivePropertyList WHERE City LIKE '%".$term."%' GROUP BY value limit 0,10 ";
echo $qstring;
$result = mysql_query($qstring);//query the database for entries containing the term

while ($row = mysql_fetch_array($result,MYSQL_ASSOC))//loop through the retrieved values
{
     $row['value']=htmlentities(stripslashes($row['value']));
     $row['id']=(int)$row['id'];
     $row_set[] = $row;//build an array
}
echo json_encode($row_set);//format the array into json data
mysql_close();
}

?> 
```

[searchEAN.php](http://sayhotel.com/rahul/searchEAN.php?term=london)可以在这里查看 .live 链接和自动完成不起作用可以在[这里查看](http://sayhotel.com/rahul/index.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:00:54.033

*   你`echo $qstring;`在你的`PHP`脚本中。评论出来！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:00:48.540

抱歉，问题已解决，这是我的错误，我回显查询以检查它但忘记评论它。这就是它不起作用的原因。

我注释掉

```
//echo $qstring; in searchEAN.php file 
```

及其现在的工作

谢谢

# javascript - WCF JSONP 启用服务 - 返回无效标签

> ID：11950847
> 
> 赞同：0
> 
> 时间：2012-08-14T10:57:56.990
> 
> 标签：javascript, wcf, jsonp

我有一个返回自定义对象的 WCF 服务（这在浏览器中有效），但是当我从 Javascript 调用该服务时，我在 FF 中得到了无效标签错误。当我将它`http://localhost/Service1.svc/MethodName/param1/param2`放入浏览器时，我得到了正确的信息，但它看起来与我将其转换为 JSONP 之前的 JSON 响应相同，即。我不确定响应是否有包装器。我正在使用的javascript如下：

```
function CallService() {
$.ajax({
    cache:true,
    type: varType, //GET or POST or PUT or DELETE verb
    url: varUrl, // Location of the service
    data: varData, //Data sent to server
    crossDomain: true,
    contentType: varContentType, // content type sent to server
    dataType: varDataType, //Expected data format from server
    processdata: varProcessData, //True or False
    success: function (msg) {//On Successful service call
        ServiceSucceeded(msg);
    },
    error: ServiceFailed// When Service call fails
});

function SetupTrainList(tiploc) {
    try {
        varType = "GET";
        varUrl = "http://localhost/Service1.svc/MethodName/param1/param2";
        varContentType = "application/javascript";
        varDataType = "jsonp";
        varProcessData = false;
        CallService();
    }
    catch (e) {
        console.log(e.toString());
    }
} 
```

世界足联：

```
<OperationContract()>
    <WebInvoke(BodyStyle:=WebMessageBodyStyle.Bare,
        Method:="GET",
        RequestFormat:=WebMessageFormat.Json,
        ResponseFormat:=WebMessageFormat.Json,
        UriTemplate:="MethodName/{param1}/{param2}")>
    Function MethodName(ByVal param1 As String, ByVal param2 As String) As ComplexType 
```

# regex - 在 Idoc 脚本中使用正则表达式从 html 字符串中提取文件名

> ID：11950848
> 
> 赞同：0
> 
> 时间：2012-08-14T10:57:57.540
> 
> 标签：regex, idocscript

我需要使用 Idoc Script 正则表达式函数从一个 html 字符串中提取图像的文件名。

输入字符串：

```
"<img src="/cs/content./file_name.png" alt="" />" 
```

输出需要：

```
"file_name" 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:04:10.167

试试这个。第一个捕获组应包含结果：

```
<img\s+src\s*=\s*"[^"]*\/([^"]*)\.[^"]*"[^\/]*\/> 
```

# xcode - 如何在 Xcode 4.4.1 的核心数据模型编辑器中完全删除实体描述

> ID：11950850
> 
> 赞同：19
> 
> 时间：2012-08-14T10:58:03.863
> 
> 标签：xcode, core-data

如何在 Xcode 4.4.1 的核心数据模型编辑器中完全删除实体描述？用户界面中只有“添加实体”按钮。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-14T11:00:35.840

1.  突出显示要删除的实体。
2.  按退格（删除）键。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-01-12T19:53:21.533

以防在您尝试删除它时**崩溃。**尝试这个：

1.  右键单击`.xcdatamodel`文件
2.  点击“在取景器中显示”
3.  右键单击并“显示包内容”
4.  打开文件“内容”，它是 XML 并删除您不再需要的实体。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-11-29T08:57:18.567

尝试通过突出显示并按退格键删除实体时发生崩溃。

在我的情况下，解决方案是打开`.xcodeproj`而不是`.xcworkspace`仅针对此操作，并且成功删除了实体。

# asp.net - 切换 asp.net 连接字符串 live/test/dev

> ID：11950862
> 
> 赞同：2
> 
> 时间：2012-08-14T10:58:59.430
> 
> 标签：asp.net, visual-studio-2010, web-config

我们的配置文件中有一组不同的连接字符串，如下所示。

```
<!-- TEST CONNECTION STRING -->
<!--
<add name="fooConnection" connectionString="Data Source=Test_server;Initial Catalog=foo_dbTEST;User ID=foo_user;Password=abc1234;"/>
<add name="barConnection" connectionString="Data Source=Test_server;Initial Catalog=bar_dbTEST;User ID=bar_user;Password=abc1234;"/>
<add name="chewConnection" connectionString="Data Source=Test_server;Initial Catalog=chew_dbTEST;User ID=chew_user;Password=abc1234;"/>
-->

<!-- LIVE CONNECTION STRING -->

<add name="fooConnection" connectionString="Data Source=Live_server;Initial Catalog=foo_dbTest;User ID=fooTest_user;Password=abc1234;"/>
<add name="barConnection" connectionString="Data Source=Live_server;Initial Catalog=bar_Testdb;User ID=barTest_user;Password=abc1234;"/>
<add name="chewConnection" connectionString="Data Source=Live_server;Initial Catalog=chew_Test;User ID=chewTest_user;Password=abc1234;"/>

<!-- Local DEV CONNECTION STRING -->
<!--
<add name="fooConnection" connectionString="Data Source=MyDoombaPC;Initial Catalog=fooDEVdbTest;User ID=foouser;Password=abc1234;"/>
<add name="barConnection" connectionString="Data Source=MyDoombaPC;Initial Catalog=barDEVdb;User ID=barTestuser;Password=abc1234;"/>
<add name="chewConnection" connectionString="Data Source=MyDoombaPC;Initial Catalog=chewDEVdb;User ID=chewuser;Password=abc1234;"/>
--> 
```

例如，当我需要从 live 更改为 test 时，我将 XML 注释从 Test 部分移动到 live 部分。使用 Visual Studio 2010 是否有更优雅的方式来执行此操作？

需要明确的是，一旦应用程序投入生产，这不是应用程序的要求，这是供开发人员在不同的数据库连接字符串集之间切换。

其他人如何处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T11:02:01.837

您可以使用 web.config 转换：[web.config Transformation](http://blogs.msdn.com/b/webdev/archive/2009/05/04/web-deployment-web-config-transformation.aspx)

这将允许您为调试和发布拥有单独的配置文件，并且每个配置文件都有不同的设置。

# r - 选择数组结尾项的最有效方法？

> ID：11950863
> 
> 赞同：7
> 
> 时间：2012-08-14T10:59:03.640
> 
> 标签：r

我正在寻找最有效的方式（即按下较少的键）来索引数组的最后一个元素。

然后像

```
a <- c(1,2,3)
n <- length(a)
b <- a[n] 
```

不应该使用，我只想使用一个命令。

在上面的例子中，我可以使用

```
b <- a[length(a)] 
```

但我想知道是否存在更短的东西。

让我想选择一个数组的一部分，比如

```
a <- seq(from = 1, to = 10, by = 1)
b <- a[3:length(a)] 
```

有更短的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T11:04:22.453

对于第一种情况，您可以使用：

```
> tail(a, 1)
[1] 3 
```

并不是说那真的有资格更短。

对于第二个例子

```
> tail(a, -2)
[1]  3  4  5  6  7  8  9 10 
```

但总的来说；不，没有什么比这更短了。R 没有用于向量或数组末尾的就地运算符或语法糖，从某种意义上说，计算结果是数组的末尾。这就是`length()`可以使用的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T11:02:41.503

用于`tail()`获取对象的尾部：

```
x <- 1:100 
```

默认情况下，`tail()`返回 6 个元素...

```
tail(x)
[1]  95  96  97  98  99 100 
```

...但你可以改变它：

```
tail(x, 10)
 [1]  91  92  93  94  95  96  97  98  99 100 
```

* * *

同样，`head()`要获取第一个元素：

```
head(x, 7)
[1] 1 2 3 4 5 6 7 
```

# ios - 关闭和重新打开应用程序

> ID：11950866
> 
> 赞同：0
> 
> 时间：2012-08-14T10:59:09.897
> 
> 标签：ios, nsuserdefaults

我知道我的问题的标题没有任何意义。所以发生的事情是我曾经运行过我的应用程序。我将当前日期存储在“NSUserDefaults”中。我关闭了应用程序。然后第二天（通过更改系统中的日期）我在模拟器中打开了应用程序，再次执行了相同的操作。并且主要存储在“NSUserDefaults”中的当前日期也更新为今天的值。

相反，如果我通过 Xcode 再次运行该应用程序。它按预期返回值。我只想知道这两种操作的区别。一次又一次地运行应用程序使应用程序正常工作。但是运行一次并重新打开并再次使用它并不能实现它。为什么是这样！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T11:07:36.323

您可能错过了您正在执行的操作`-application:didFinishLaunchingWithOptions`在`AppDelegate`. 当您的应用启动时，将调用此方法。然后，如果您按下主页按钮并重新打开应用程序，则不会调用此方法，因为应用程序处于非活动状态，但`applicationWillEnterForeground`会调用该方法。如果您杀死应用程序（或操作系统杀死它）并再次打开它，`-application:didFinishLaunchingWithOptions`将再次调用它。

# image - 如何仅从我关注的人那里获取包含图像的推文？

> ID：11950868
> 
> 赞同：0
> 
> 时间：2012-08-14T10:59:11.683
> 
> 标签：image, twitter

是否可以仅从我关注的人那里获取包含图像的推文？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:10:50.777

问这个太快了。

在这里找到了一种解决方案。

[http://socialable.co/social-media/search-twitter-like-a-pro-how-to-find-the-latest-images-photos-being-tweeted/](http://sociable.co/social-media/search-twitter-like-a-pro-how-to-find-the-latest-images-photos-being-tweeted/)

# objective-c - 将 NSString 转换为 NSDate 的问题

> ID：11950870
> 
> 赞同：0
> 
> 时间：2012-08-14T10:59:13.260
> 
> 标签：objective-c, ios, cocoa-touch, nsdate, nsdateformatter

我在将 NSString 转换为 NSDate 时遇到了一些问题。

这是我的代码：

```
NSLog(@"Unformatted date: %@", [d objectForKey:@"pubDate"]);

// Set the publication date as an NSDate
static NSDateFormatter *dateFormatter = nil;
if (!dateFormatter) {
    dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"EEE, dd MMM yyyy"];
}
[self setPublicationDate:[dateFormatter dateFromString:[d objectForKey:@"pubDate"]]];

NSLog(@"Date object: %@", [self publicationDate]);
NSLog(@"Date object description: %@", [[self publicationDate] description]); 
```

当它运行时，它会记录这些消息（它运行了几次，我只包含了两组它的日志消息）：

```
2012-08-14 12:47:28.446 (App name removed)[9009:707] Unformatted date: Mon, 02 Apr 2012
2012-08-14 12:47:28.454 (App name removed)[9009:707] Date object: (null)
2012-08-14 12:47:28.460 (App name removed)[9009:707] Date object description: (null)
2012-08-14 12:47:28.467 (App name removed)[9009:707] Unformatted date: Sun, 25 Mar 2012
2012-08-14 12:47:28.474 (App name removed)[9009:707] Date object: (null)
2012-08-14 12:47:28.480 (App name removed)[9009:707] Date object description: (null) 
```

我正在运行 iOS 5.1.1 的 iPad touch 上测试此代码

我能够更改接收日期的格式，它当前是从 PHP 日期函数发送的，`"D, d M Y"`用作格式字符串。

谁能看看我哪里出错了？感谢您的帮助。

更新1：我已经切换并在模拟器上而不是在设备上运行它，并且由于某种原因它可以工作。关于为什么它不能在设备上运行的任何建议？模拟器运行 iOS 5.1，设备运行 iOS 5.1.1

更新2：有人要求提供更多信息，`publicationDate`是综合属性。

在 .h 文件中：

```
@property (nonatomic, strong) NSDate *publicationDate; 
```

在 .m 文件中：

```
@synthesize publicationDate; 
```

我进一步分解了代码：

```
NSLog(@"Unformatted date: %@", [d objectForKey:@"pubDate"]);
NSLog(@"Unformatted date class type: %@", [[d objectForKey:@"pubDate"] class]);

// Set the publication date as an NSDate
static NSDateFormatter *dateFormatter = nil;
if (!dateFormatter) {
    dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"EEE, dd MMM yyyy"];
}
NSString *dateString = [d objectForKey:@"pubDate"];
NSLog(@"dateString: %@", dateString);

NSDate *formattedDate = [dateFormatter dateFromString:dateString];
NSLog(@"formattedDate %@", formattedDate);
[self setPublicationDate:formattedDate];

NSLog(@"Date object: %@", [self publicationDate]);
NSLog(@"Date object description: %@", [[self publicationDate] description]); 
```

它现在记录：

```
2012-08-14 13:45:35.335 (app name removed)[9167:707] Unformatted date: Sun, 25 Mar 2012
2012-08-14 13:45:35.342 (app name removed)[9167:707] Unformatted date class type: __NSCFString
2012-08-14 13:45:35.347 (app name removed)[9167:707] dateString: Sun, 25 Mar 2012
2012-08-14 13:45:35.353 (app name removed)[9167:707] formattedDate (null)
2012-08-14 13:45:35.359 (app name removed)[9167:707] Date object: (null)
2012-08-14 13:45:35.365 (app name removed)[9167:707] Date object description: (null) 
```

更新 3：成功！通过像这样更改日期格式化程序：

```
// Set the publication date as an NSDate
static NSDateFormatter *dateFormatter = nil;
if (!dateFormatter) {
    dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"]];
    [dateFormatter setDateFormat:@"EEE, dd MMM yyyy"];
} 
```

现在可以了。我没想到要提到正在测试的设备设置为荷兰设置（因为这是一家荷兰开发公司）。抱歉，我从来没有想过这可能会影响这里的代码的工作方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:11:09.470

你确定你从下面的代码中得到一个字符串对象吗？

```
[d objectForKey:@"pubDate"] 
```

尝试记录从`d`. 否则代码似乎没问题。

编辑：检查设备中的区域设置：转到设备中的设置、常规、国际。如果区域格式未设置为英语，则必须在 dateformatter 中使用 setLocale 方法检查此问题的已接受答案以获取更多信息：[如何使用 NSDateFormatter 解释日期？](https://stackoverflow.com/questions/1559182/how-do-you-interpret-dates-with-nsdateformatter/1559284#1559284)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:13:34.373

我已经粘贴了您的代码并做了一些小的修改，因为我没有实时数据并且它工作正常。下面是示例代码...

```
NSString *strDate = @"Mon, 02 Apr 2012";
NSLog(@"Unformatted date: %@", strDate);

// Set the publication date as an NSDate
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"EEE, dd MMM yyyy"];
NSDate *publicationDate = [dateFormatter dateFromString:strDate];    
NSLog(@"Date object description: %@", [publicationDate description]); 
```

替换下面的行

```
[self setPublicationDate:[dateFormatter dateFromString:[NSString stringWithFormat:@"%@",[d objectForKey:@"pubDate"]]]]; 
```

使用您现有的代码并检查。

```
[self setPublicationDate:[dateFormatter dateFromString:[d objectForKey:@"pubDate"]]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T11:11:27.577

也许您正在将日期对象传递给 to `dateFromString`。

```
NSDate *rawDate = [d objectForKey:@"pubDate"];
NSString *stringDate = [dateFormatter stringFromDate:rawDate];
NSDate *newDate = [dateFormatter dateFromString:stringDate]; 
```

此外，您应该`dateFromString:`单独检查操作的结果（而不是在分配语句中`publicationDate`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T11:31:55.353

**[d objectForKey:@"pubDate"]**的值不是正确的日期时间格式。

**使用**标准时间格式并得到这个输出..（把它当作例如）

```
NSDateFormatter *dateFormatter = nil;
if (!dateFormatter)  
{  
    dateFormatter = [[NSDateFormatter alloc] init];  
    [dateFormatter setDateFormat: @"EEE, dd MMM yyyy"];  
}

NSLog(@"todays date: %@", [NSDate date]);  
NSLog(@"formated date: %@", [dateFormatter stringFromDate:[NSDate date]]); 
```

**输出：**

```
todays date: 2012-08-14 11:23:37 +0000  
formated date: Tue, 14 Aug 2012 
```

# node.js - 如何修复connect.router？

> ID：11950873
> 
> 赞同：2
> 
> 时间：2012-08-14T10:59:20.883
> 
> 标签：node.js, routing, express, connect

我正在通过[Node 为前端开发](http://books.google.co.uk/books?id=hfmZ2jex894C)人员工作，正如 SO 上的人已经[指出的那样](https://stackoverflow.com/questions/9571239/mac-os-x-nodejs-has-no-method-router-error)，Connect 不再有路由模块。有些人建议使用 Express，但我不确定确切的语法。

我正在处理的示例托管在这里：
**github.com/garann/node-for-frontend-devs/blob/master/03-03.js**

我反过来想完成关于模板的教程：
js：**github.com/garann/node-for-frontend-devs/blob/master/04-02.js**
html：**github.com/garann/node-for-frontend -devs/blob/master/public/parent.html**
并且想知道人们是否认为放弃这些基于 Connect 的教程并学习如何使用 Express 会更好？因为路由很可能需要 Express 无论如何..

由于如此出色的垃圾邮件保护，我不得不删除 github 链接的 https:// 部分。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T11:26:37.750

尝试使用这个：[https ://github.com/baryshev/connect-route](https://github.com/baryshev/connect-route)

**更新**

在您的项目文件夹中执行：

```
npm install connect-route 
```

从您的示例更新代码：

```
var connect = require("connect");
var connectRoute = require("connect-route");

connect(
  connect.static(__dirname + "/public"),
  connectRoute(function(app) {
    app.get("/sayHello/:firstName/:lastName", function(req, res) {
      var userName = req.params.firstName + " " + req.params.lastName,
        html = "<!doctype html>" +
          "<html><head><title>Hello " + userName + "</title></head>" +
          "<body><h1>Hello, " + userName + "!</h1></body></html>";

      res.end(html);
    });
  })
).listen(8000); 
```

将您的浏览器指向：

http://[your_host_here]:8000/sayHello/nick/name

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T16:00:47.263

## 概括

**connect.router**在版本 2.x 中被删除。我从 1.x 中获取代码并将其发布为`connect_router`.

## 安装

```
npm install --save connect_router 
```

## 用法

```
if (!connect.router) {
  connect.router = require('connect_router');
}

function route(rest) {
  rest.get('/api/hello', function (req, res) {
    res.end('hello');
  });
}

app = connect()
  .use(connect.router(route))
  ;

server = app.listen(port, function () {
  console.log('listening on', server.address());
}); 
```

## 在 Github 上

[https://github.com/coolaj86/connect_router](https://github.com/coolaj86/connect_router)取自[Connect 1.x 的路由器](https://github.com/senchalabs/connect/blob/1.x/lib/middleware/router.js)，文档基本上是[测试](https://github.com/senchalabs/connect/blob/1.x/test/router.test.js#L146)

原始文档在……某处。

# entity-framework-4.1 - 实体框架 4.1 SQL 注入

> ID：11950877
> 
> 赞同：0
> 
> 时间：2012-08-14T10:59:37.587
> 
> 标签：entity-framework-4.1, sql-injection

我正在使用 Entity Framework 4.1 开发一个 ASP.Net MVC 3 应用程序。对于其中一个查询，我正在利用**DbSet类上的****SqlQuery**方法，该方法使我能够执行返回实体列表的原始 SQL 查询。

 **我的 Service 类中有一个方法，见下文，我在其中编写原始 sql 并传入两个参数**shiftID**和**shiftDateID**。

```
public IList<User> GetAvailableLocums(int shiftID, int shiftDateID)
{
   var query = @"set language 'British'

   SELECT   *
   FROM     [Shift]
   WHERE    shiftID = @p0
   AND      shiftDateID = @p1";

   return _UoW.User.GetWithRawSql(query, shiftID, shiftDateID).ToList();

} 
```

然后我在我的 Repository 类中调用以下方法，见下文，

```
public IEnumerable<TEntity> GetWithRawSql(string query, params object[] parameters)
{
     return dbSet.SqlQuery(query, parameters).ToList();
} 
```

我担心这可能会受到 SQL 注入攻击。如果是这样，有谁知道我如何参数化我的两个参数？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:14:15.487

你见过这个[http://msdn.microsoft.com/en-us/library/bb738521.aspx](http://msdn.microsoft.com/en-us/library/bb738521.aspx)吗？第二个代码块..**

# php - 登录后PHP中的安全问题（使用codeigniter）

> ID：11950878
> 
> 赞同：0
> 
> 时间：2012-08-14T10:59:37.987
> 
> 标签：php, security, codeigniter

我正在使用 CodeIgniter 构建管理系统。但是我在安全方面遇到了问题。

让我举个例子：一个用户成功登录并被重定向到管理系统的主页。现在用户在他的浏览器中按下“返回”按钮。他现在被发送回登录页面。他现在按下“NEXT”按钮并返回到管理系统的主页。

我不希望用户在登录后进入登录页面后能够返回到管理系统的主页。我该如何实现这一点。

提前致谢，
马克

编辑：
感谢所有的想法，但对我没有用。我的意思是，当有人登录时，他会被重定向到系统的主页。然后他点击浏览器顶部网址栏左侧的“返回”按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:24:19.077

如果缓存存在，PHP 会返回到登录页面，实际上不会从服务器重新加载，所以我们需要在登录页面检查时强制 PHP 从服务器加载它。所以你可以使用，

```
header("Cache-Control: no-cache, must-revalidate");

if(isset($_SESSION['user']))
{
      //Write your redirect code
}
else
{
      //Redirect to login page
} 
```

在您所在的页面中检查登录是否存在。这样 PHP 将每次从服务器重新加载而不从缓存加载。如果会话存在，您将被重定向到相应的页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:04:48.413

首先让您的登录页面通过检查会话来检查用户是否已经登录。

如果用户已登录，请使用 php 重定向，例如`header (“Location: $URL”);`$URL 是您的主页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T11:06:39.597

只需在登录页面上使用会话：

```
if(isset($_SESSION['admin_loggedin'])){
header("location: admin_index.php");
exit();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T11:06:53.083

尝试清除登录页面上的缓存[如何使用 php 清除浏览器缓存？](https://stackoverflow.com/questions/1037249/how-to-clear-browser-cache-with-php)，检查用户是否被授权，如果 $authorized==true 则重定向他。

您可以通过检查 SESSION 或 cookie 来检查授权，或者...

# .net - .NET 中的 BDD - 有异常的小挑战

> ID：11950887
> 
> 赞同：0
> 
> 时间：2012-08-14T11:00:11.103
> 
> 标签：.net, exception, console, tdd, bdd

编辑：为了我自己的理智更新了 21/09/12……我不敢相信这曾经是一个问题（是的学习）。

控制台元素让我有点远离这个气味。如果我只是想检查错误，而不是特别是消息，那么只是断言（期望）异常可能会起作用。记录控制台活动并检查日志会起作用。帖子末尾详细介绍的系统响应想法会奏效。这种事情有很多选择。吨！我的结论？做任何最有意义/最不脆弱的事情。只要您的场景是可靠的并且您正在证明行为，这一切都很好。

* * *

我的 BDD 任务继续使用 .NET 中的一个简单的控制台应用程序（VS2010、SpecFlow 和 NUnit）。

对于这样的场景，我遇到了障碍：

```
Feature: Withdraw Money
Scenario: Insufficient Funds
Given I have a MoneyBox
And my MoneyBox contains £10
When I withdraw £20
Then the system should display an error message
And my MoneyBox should contain £10 
```

定义上下文很好，尝试提取资金很好。所有相关的单元测试都很好。最后保持平衡很好。

我想像这样实现一些 .Withdraw() 方法：

```
//Assume the moneybox only contains £1 coins (hence int is ok)
public void Withdraw(int withdrawlAmount) throws InsufficientFundsException
{
if(this.balance >= withdrawlAmount)
{
this.balance -= withdrawlAmount;
}
else
{
throw new InsufficientFundsException();
}
} 
```

我可以对该代码进行单元测试（通过通过和失败条件测试）。

但是，在控制台应用程序的上下文中，我不太清楚如何断言：

```
Then the system should display an error message 
```

任何想法、提示或参考将不胜感激。

编辑1：

请注意，我的问题仅涉及通过使用 BDD 方法的验收测试来证明错误消息。感觉是语境问题。再次感谢。

编辑2：

一种方法可能是重新考虑场景，或者更确切地说是它的实现。MoneyBox 代码可以按原样编写（经过单元测试，未经验收测试的纯 BO），但它的功能可以包装在某个上下文类中：

超级快速示例：

```
public class MoneyBoxDriver
{
private MoneyBox objMB
private SystemResponse objSR

//Standard stuff e.g. constructor

private void Withdraw(int withdrawAmount)
{
try
{
objMB.Withdraw(withdrawAmount);
}
catch(InsufficientFundsException)
{
this.objSR = new SystemResponse(SystemResponseEnum.FailedInsufficientFunds);
}
} 
```

然后我们可以将 MoneyBoxDriver 设置为上下文，通过 Withdraw 包装器方法对其进行操作，然后通过检查 MoneyBoxDriver 的 SystemResponse 来断言功能。

```
Then the system should display an insufficient funds error message
...
Assert.That(MBDriver.SystemResponse.Type == SystemResponseEnum.FailedInsufficientFunds)
... 
```

如果 SystemResponse 属于给定类型，则在 UI（控制台）中可能有显示错误消息的简单代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:40:10.157

这是任何类型的测试优先方法的乐趣的一部分，它将迫使您以可以测试的方式设计您的对象 - 而且他们会因此而变得更好！

在此示例中，我将考虑执行以下操作：（请注意，以下代码尚未经过测试，也不是“完美”解决方案 - 但它更易于测试并且更接近您想要的位置）。

```
//Assume the moneybox only contains £1 coins (hence int is ok)
public void Withdraw(int withdrawlAmount, Action<InsufficientFundsException> handleException)
{
     if(this.balance >= withdrawlAmount)
     {
          this.balance -= withdrawlAmount;
     }
     else
     {
          handleException(new InsufficientFundsException());
     }
} 
```

然后，您可以在测试代码中为可能的异常设置一个字段或属性，当您调用 Withdraw 方法时，只需指定一个快速操作来执行回调，例如：

```
moneyBox.Withdraw(10, e => this.WithdrawException = e); 
```

然后，您的`Then`语句可以断言 the`WithdrawException`不为空，并对其中的消息进行断言。

您的生产代码（即控制台应用程序）可能会这样做：

```
moneyBox.Withdraw(10, e => Console.WriteLine("Error: {0}", e.Message)); 
```

更完美的解决方案是将 替换为 或类似的`Action<InsufficientFundsException>`东西`Action<MoneyBoxWithdrawResponse>`。其中`MoneyBoxWithdrawResponse`包含有关操作成功的信息，可能还有余额以及任何潜在的错误/异常详细信息。

# android - Android - 覆盖社交分享列表（通过 ACTION_SEND）

> ID：11950889
> 
> 赞同：0
> 
> 时间：2012-08-14T11:00:20.427
> 
> 标签：android, facebook, sdk, share

我刚刚在一个 android 应用程序（使用 Facebook SDK）中实现了墙贴（+登录），现在我想用它来“覆盖”已经出现在社交共享列表中的那个。

这可能吗？我打算用我的墙贴动作创建一个隐含的意图，但我不知道如何/是否可以删除实际的意图。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:09:21.200

> 但我不知道如何/是否可以删除实际的

幸运的是，出于明显的安全和隐私原因，这是不可能的。

欢迎用户卸载他们早期的应用程序（或在 Android 4.0+ 上禁用它）。

# java - 春季交易管理问题？

> ID：11950895
> 
> 赞同：1
> 
> 时间：2012-08-14T11:00:41.043
> 
> 标签：java, spring, hibernate

我正在使用弹簧和休眠。我正在使用 spring 进行事务管理。我有以下课程。

```
@Service
@Transactional(readOnly = true)
public class Sample implements SampleInterface{

@Override
public List<Some> getData(){

//gets data after that it updates something

setStatus(someId);

}

@Override
@Transactional
public void setStatus(Long someId){

//sets status

}

} 
```

如果我不为 getData() 保留@Transactional，那么我会遇到异常。

```
Caused by: org.springframework.dao.InvalidDataAccessApiUsageException: Write operations are not allowed in read-only mode (FlushMode.MANUAL): Turn your Session into FlushMode 
```

如果我为 getData() 保留@Transactional，那么它将正确保存。这里有什么问题？任何我如何为 setStatus() 设置 @Transactional。我仍然需要为 getData() 保留@Transactional，因为它正在调用将设置状态的公共方法？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T11:09:32.657

问题有点复杂，是由调用`setStatus()` *inside* `getData()`引起的。当您`getData()`从外部调用时，您实际上是在调用 Spring 框架为您创建的 Java 代理。此代理应用事务行为（启动只读事务）并委托给您的实际服务类。这工作正常。

但是，当您调用 时`setStatus()`，您将绕过事务代理并直接调用您的服务。换句话说，请求`setStatus()`不会被拦截，并且`@Transactional` **会被忽略**。

没有简单的方法来处理这个问题，[ejb](/questions/tagged/ejb "显示标记为“ejb”的问题")也有同样的问题。在同一个类中调用公共方法时，您必须格外小心。

# 也可以看看

*   [*8.6.1 理解 AOP 代理*](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html#aop-understanding-aop-proxies)- 官方文档
*   [*Spring 的陷阱：代理*](http://nurkiewicz.blogspot.no/2011/10/spring-pitfalls-proxying.html)- 我的博客

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:14:01.033

当您调用 getData（方法上没有 @Transactional）时，Spring 将启动一个只读事务，因为这是您的类的默认设置，当 getData 调用 setStatus 时，Spring 将使用现有的 rad only 事务而不是创建一个新事务。这就是你得到例外的原因。

默认事务传播是 PROPAGATION REQUIRED。[在http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html#tx-propagation](http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html#tx-propagation)阅读有关该主题的更多信息

# oracle - Oracle Spatial - 选择区域内的对象

> ID：11950896
> 
> 赞同：1
> 
> 时间：2012-08-14T11:00:42.757
> 
> 标签：oracle, oracle10g, geospatial, oracle-spatial

这对那些知道的人来说可能很简单（我希望！）

我有一个 Oracle 空间数据库，其几何列包含节点点列表，采用北/东格式（如果相关！）

我需要选择那些落在给定点的给定半径内的对象。

Northings 和 Eastings 相距 1 米，这使得它更容易一些。

理想情况下，这应该包括跨越该区域的对象，即使它们的节点点落在该区域之外。

这是一个简单的查询吗？也许使用 SDO_WITHIN_DISTANCE？

该表如下所示：

```
MyTable
ID NUMBER
NAME VARCHAR2(20)
DESC VARCHAR2(50)
GEOM SDO_GEOMETRY 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-13T18:38:34.447

正确的方法*是*使用 SDO_WITHIN_DISTANCE，这与使用的坐标系无关，即它们是投影的还是测地的：

```
select b.*
from my_table a, my_table b
where a.id = 1
and sdo_within_distance( b.shape, a.shape, 'distance=10 unit=meter' ) = 'TRUE'; 
```

空间谓词的参数顺序很重要：第一个是您正在搜索的点，第二个是“查询窗口”，即您正在搜索的点。请注意，您应该*始终*指定距离的单位 - 这里是 10 米。如果您不这样做，那么它将默认为您搜索的表格的坐标系单位。对于大地测量数据，这将始终是米。对于投影数据，它将是坐标系的单位 - 通常也是米，但并非总是如此。明确指定一个单位会消除所有歧义。

您也可以使用缓冲区方法，但这在这里没有区别，实际上速度更慢。空间谓词的第二个参数是否被索引并不重要：不使用该索引。只有第*一个*参数的索引是必需的和使用的。

要对几何集合执行操作 - 即对于一组点，找到每个点的设定距离内的点，然后考虑使用 SDO_JOIN() 函数代替，像这样查找在其中的所有点10米彼此：

```
SELECT a.id, b.id
  FROM my_table a,
       my_table b,
       TABLE(SDO_JOIN(
             'MY_TABLE', 'SHAPE',
             'MY_TABLE', 'SHAPE',
             'DISTANCE=10 UNIT=METER')
       ) j
WHERE j.rowid1 = a.rowid
  AND j.rowid2 = a.rowid
  AND a.rowid < a.rowid; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:37:30.167

您可以通过以下两种方式之一执行此操作。首先，正如您所提到的，[SDO_WITHIN_DISTANCE](http://docs.oracle.com/shtml/A85337_01/sdo_objq.htm#875674)是一种有效的方法。

```
select 
    *
from center_point a
inner join target_points b
    on a.id = 1
    and sdo_within_distance( b.shape, a.shape, 'distance = 10' ) = 'TRUE'
; 
```

在这种情况下，距离采用由 a 的空间参考定义的线性单位。Oracle 将坐标视为笛卡尔坐标，因此您需要确保在使用此运算符之前拥有一个线性坐标系（与角度纬度/经度单位相反）。由于您使用的是北/东，我认为只要您要比较的点在同一个空间参考中，您就可以了。

这种方法使用内部循环来解决查询，如果您有很多要比较的点，那么效率不是很高。此外，Oracle Spatial 对 SDO 函数中的操作数顺序非常挑剔，因此您可能需要使用参数顺序来找到最佳位置。如果您的查询运行了很长时间，请尝试切换 sdo 运算符的第一个和第二个参数。您还可以使用`/*+ ORDERED */`后缀 after来处理 'from' 和 'inner join' 表的顺序`SELECT`。

另一种方法是[缓冲几何图形](http://docs.oracle.com/html/A88805_01/sdo_objg.htm#852824)并与缓冲区进行比较。

```
select 
    *
from center_point a
inner join target_points b
    on a.id = 1
    and sdo_relate( b.shape, sdo_buffer(a.shape, 0.05 ), 'mask=anyinteract' ) = 'TRUE'
; 
```

请记住，如果您将 SDO_RELATE（称为窗口）的第二个参数（称为窗口）中的任何内容进行转换，就像我们在这里使用缓冲区一样进行转换。

如果您打算对多个点执行此操作，建议构建一个缓冲所有源点的表。然后针对缓冲区域创建一个空间索引，并将其与您的目标点进行比较。

例如：

```
create table point_bufs unrecoverable as
select sdo_buffer (a.shape, b.diminfo, 1.35)
from centerpoint a, user_sdo_geom_metadata b
where table_name='CENTERPOINT'
  and column_name='SHAPE';

select
    a.gif,
    b.gid 
from target_points a, 
     point_bufs b
where sdo_relate(a.shape, b.shape, 'mask=anyinteract querytype=join') = 'TRUE'
; 
```

注意：当点与多边形相交时，您总是希望多边形位于 sdo_relate 的*窗口位置*（这是第二个参数）。这将确保您的空间索引被正确使用。

# .htaccess - 带有购物车的子域 SSL 到域

> ID：11950900
> 
> 赞同：0
> 
> 时间：2012-08-14T11:00:55.390
> 
> 标签：.htaccess, ssl, subdomain, symlink

我有 domain.com 和 secure.domain.com。两者都在不同的专用 IP 上，我有一个用于 secure.domain.com 的 SSL

我想做的是设置一个购物车，使登录、结帐等都通过secure.domain.com，而在domain.com上只进行常规浏览

有没有办法可以将 domain.com 下的文件链接到 secure.domain.com 下，如果是这样：

1) 这是否会被 SE 视为重复内容

2）这样做还有其他缺点吗？

我要解决的是：购物车在 domain.com 上。secure.domain.com 上没有任何内容，会话和 cookie 不会从一个传输到另一个。

而且，除非我能以某种方式将这两者联系起来，否则我确实需要在 domain.com 和 secure.domain.com 上都安装购物车，而且我很确定这对于使用安全的网站通常不会这样做。域名.com

我猜可能需要符号链接或 htaccess 配置或两者都需要？但我对这些东西知之甚少，所以这对我来说是全新的。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:55:57.867

将您的 cookie 域设置为`.domain.com`，会话将通过所有子域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:27:45.990

正如 Clicktrend 和 Echilon 所指出的，设置 cookie 域，并确保它是来自 secure.domain.com 的 cookie 被标记为“安全”（意味着它们只会由客户端通过 https 发送）

此外，请务必禁用 TRACE 方法，因为这可能会用于窃取会话 cookie。有关这方面的更多信息，我发现这很有用[http://deadliestwebattacks.com/category/cross-site-tracing/](http://deadliestwebattacks.com/category/cross-site-tracing/)。禁用 TRACE 方法的最简单方法：

> echo 'TraceEnable off' > /etc/httpd/conf.d/trace-method.conf

`Listen 80`我还建议您在 secure.domain.com 上禁用 http（仅保留 https）（通常在 /etc/httpd/conf/httpd.conf中注释掉该指令就足够了

这些配置至少对于 RHEL 5 和 RHEL 6 上的 Apache httpd 是正确的；其他系统可能需要调整。

# html - OS X 的 IE9 和 FF11 存在间距问题

> ID：11950903
> 
> 赞同：0
> 
> 时间：2012-08-14T11:01:00.473
> 
> 标签：html, css, firefox, xhtml, internet-explorer-9

正在对我编码的设计进行一些测试，它在`FF 13`, `Chrome 21`, `IE 7/8`& `Opera 11.62`for`Windows`和`Safari 5.1`for中运行良好`OS X`。

我只有 WinXP，所以我不得不使用 Adbobe Browserlab 来测试 OS X 和 IE 9。

问题出在导航中，`IE9`并且导航似乎太宽了；但事实并非如此，我已经检查过了。`FF 11``OS X`

网址是： http: [//www.condorstudios.com/stuff/temp/](http://www.condorstudios.com/stuff/temp/)

**刚刚尝试了以下更改，但这些浏览器仍然没有更改..**

```
#header .nav ul {
    width: 992px; // New
    margin: 0px auto; // Changed to 0px margin, but is now centered to get the same effect
}

#header .nav li ul.sub {
    position: absolute;
    display: none;
    width: auto; // Needed to add so it didn't inherit width from above
    /*left: -1px;*/ // Removed
    top: 45px;
    z-index: 1000;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:01:05.957

解决它。似乎那些浏览器似乎不喜欢`text-indent`我在联系按钮上的，所以通过删除..

```
#header .nav li.contact {
    text-indent: 1px;
} 
```

现在可以了！

# jquery - 在 jquery Validate Plugin - 基于下拉值的销售税金额验证

> ID：11950906
> 
> 赞同：0
> 
> 时间：2012-08-14T11:01:08.997
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-validate

有人可以帮忙吗？该错误消息未根据条件显示。如果下拉值为 0 或 2，则销售税金额应为 0，否则应抛出错误。如果下拉值为 1，则销售税金额应大于 0，否则应抛出错误。这些事情应该发生。但这里有些问题。 [http://jsfiddle.net/ssthil/SbR6b/1/](http://jsfiddle.net/ssthil/SbR6b/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:48:52.600

现在检查[http://jsfiddle.net/SbR6b/15/](http://jsfiddle.net/SbR6b/15/) ..根据问题进行修改。

# registry - WSO2 Governance Registry - 如何在 WebLogic 上安装 WSO2 Registry

> ID：11950910
> 
> 赞同：0
> 
> 时间：2012-08-14T11:01:38.857
> 
> 标签：registry, weblogic, wso2

我需要在 WebLogic 应用服务器上安装 WSO2 Governance Registry。[但是，此处](http://docs.wso2.org/wiki/display/Governance411/Governance+Registry+Samples#)的文档链接已禁用。知道如何从 Governance Registry 生成战争文件以便将它们部署到 WebLogic 中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:13:56.600

如果您使用的是 G-Reg 4.1.1，请转到 bin 目录并运行以下 ant 命令。

**蚂蚁创建WAR**

ajithn@ajithn:~/wso2/products/wso2greg-4.1.1/bin$ ant createWAR

构建文件：/home/ajithn/wso2/products/wso2greg-4.1.1/bin/build.xml

createWAR: [copy] 复制 12 个文件到 /home/ajithn/wso2/products/wso2greg-4.1.1/tmp/wso2 [copy] 复制 8 个空目录到 /home/ajithn/wso2/products/wso2greg- 下的 2 个空目录4.1.1/tmp/wso2 [copy] 复制23个文件到/home/ajithn/wso2/products/wso2greg-4.1.1/tmp/wso2/WEB-INF/lib [copy] 复制1个文件到/home/ajithn/ wso2/products/wso2greg-4.1.1/tmp/wso2/WEB-INF/lib [复制] 将 1 个文件复制到 /home/ajithn/wso2/products/wso2greg-4.1.1/tmp/wso2/WEB-INF/classes [echo]
[echo] **WSO2 Carbon webapp 成功创建在 /home/ajithn/wso2/products/wso2greg-4.1.1/tmp/wso2** [echo]

构建成功

# unit-testing - CakePHP 测试夹具使用不同的表名

> ID：11950915
> 
> 赞同：1
> 
> 时间：2012-08-14T11:01:53.937
> 
> 标签：unit-testing, cakephp, cakephp-2.2

我有一个定义为的模型

```
class User extends AppModel{
    public $useTable = 'members';
    ....
    .... 
```

效果很好，现在我想在这个模型上使用一个夹具进行单元测试。

我这样定义夹具

```
App::uses('User', 'Model');

class UserFixture extends CakeTestFixture {
    public $useTable = 'members';

    public $import = array('table' => 'members');
    ....
    .... 
```

但是，它创建的表称为 cake_users 而不是 cake_members - 这会导致测试和控制器以及其他代码失败，因为它找不到 cake_members。

如何将测试数据库的夹具作为 cake_members

这是错误

```
Table cake_members for model User was not found in datasource test. 
```

这是使用蛋糕 2.2.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:40:56.837

改变了

```
$useTable = "members"; 
```

至

```
$table = 'members'; 
```

在夹具中，如建议here

[http://www.pixelastic.com/blog/193:using-a-fixture-with-a-model-using-usetable-in-cakephp](http://www.pixelastic.com/blog/193:using-a-fixture-with-a-model-using-usetable-in-cakephp)

# timer - 使用 CCLabelBMFont 在 Cocos2d 中保持定时器静止？

> ID：11950916
> 
> 赞同：0
> 
> 时间：2012-08-14T11:01:57.000
> 
> 标签：timer, cocos2d-iphone

我有一个计时器在倒计时时不会保持静止 - 因为数字的宽度不同。

我正在为我的计时器使用以下内容：

```
timer = [CCLabelBMFont labelWithString:@"" fntFile:@"myFont.fnt"]; 
```

倒计时时如何保持计时器静止？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T15:56:28.177

当您说“静止”时，您的意思是“左侧不在同一个地方”吗？

`CCNode`类具有`anchorPoint`属性，该属性确定该节点的哪个点“固定”到节点父节点中的点。(0, 0) 的锚点表示左下角，(1, 1) - 右上角，(0.5, 0.5) - 中心。所有定位和转换都围绕锚点进行。

将`anchorPoint`标签的属性设置为当标签的内容大小发生变化时要“固定”的点。例如，如果您希望左上角静止：

```
timer.anchorPoint = ccp(0, 1); 
```

# python - 字符映射，python

> ID：11950917
> 
> 赞同：0
> 
> 时间：2012-08-14T11:01:57.477
> 
> 标签：python, python-3.x

我需要获得一个字符映射：

```
chr:      !   "   #   $   %   &   '   (   )   *   +   ,   -   .   /
asc: 32  33  34  35  36  37  38  39  40  41  42  43  44  45  46  47
chr:  0   1   2   3   4   5   6   7   8   9   :   ;   <   =   >   ?
asc: 48  49  50  51  52  53  54  55  56  57  58  59  60  61  62  63
chr:  @   A   B   C   D   E   F   G   H   I   J   K   L   M   N   O
asc: 64  65  66  67  68  69  70  71  72  73  74  75  76  77  78  79
chr:  P   Q   R   S   T   U   V   W   X   Y   Z   [   \   ]   ^   _
asc: 80  81  82  83  84  85  86  87  88  89  90  91  92  93  94  95
chr:  `   a   b   c   d   e   f   g   h   i   j   k   l   m   n   o
asc: 96  97  98  99  100 101 102 103 104 105 106 107 108 109 110 111
chr:  p   q   r   s   t   u   v   w   x   y   z   {   |   }   ~  
asc: 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 
```

我为这些编写了一个程序，但它没有给我这些面板。我也会发布我的代码：

```
for a in range(32,128):
   b=chr(a)
   print(b)
   print(a) 
```

输出是：

```
32
!
33
"
34
#
35
$
......... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T11:24:31.380

尝试这样的事情：

```
for i in xrange(32, 128, 16):
    print 'chr:\t%s' % '\t'.join(map(chr, [i+j for j in range(16)]))
    print 'asc:\t%s' % '\t'.join(map(str, [i+j for j in range(16)])) 
```

**Python 3 的更新**：

```
for i in range(32, 128, 16):
    print('chr:\t%s' % '\t'.join(map(chr, [i+j for j in range(16)])))
    print('asc:\t%s' % '\t'.join(map(str, [i+j for j in range(16)]))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T11:50:57.010

```
>>> import pprint
>>> a
[1, 2, 3, 4, 5, 5]
>>> c = [a]*3
>>> c
[[1, 2, 3, 4, 5, 5], [1, 2, 3, 4, 5, 5], [1, 2, 3, 4, 5, 5]]
>>> pprint.pprint(c,width=60)
[[1, 2, 3, 4, 5, 5],
 [1, 2, 3, 4, 5, 5],
 [1, 2, 3, 4, 5, 5]]
>>> 
```

[http://docs.python.org/library/pprint.html](http://docs.python.org/library/pprint.html)

# c++ - CodeBlocks 函数参数自动完成快捷方式

> ID：11950921
> 
> 赞同：2
> 
> 时间：2012-08-14T11:02:11.233
> 
> 标签：c++, autocomplete, codeblocks

![截屏](../Images/4bb02b961f213363e4c80c1841a3b975.png)

这是一个非常简单的问题...我尝试了很多快捷方式，我尝试了谷歌搜索，但仍然没有...我如何接受这个建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:59:57.067

在显示自动完成时按 Tab 键应该可以工作。

此链接还提到点击 Tab 以接受建议（参见第 2 节）：

[http://www.cs.odu.edu/~cs333/website-latest/Labs/usingCodeBlocks1/page/usingCodeBlocks1.html](http://www.cs.odu.edu/~cs333/website-latest/Labs/usingCodeBlocks1/page/usingCodeBlocks1.html)

“稍等片刻，注意会弹出一个框，提示此变量名称可能完成。点击 Tab 以接受此建议。”

这是另一个涵盖 Code::Blocks 控件的链接：

[http://wiki.codeblocks.org/index.php?title=Keyboard_Shortcuts](http://wiki.codeblocks.org/index.php?title=Keyboard_Shortcuts)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T17:20:12.800

括号里试试`Ctrl+Shift+Space`。

# php - Symfony2 - 使用 app.php 时 Apache 崩溃

> ID：11950922
> 
> 赞同：1
> 
> 时间：2012-08-14T11:02:11.743
> 
> 标签：php, apache, symfony, segmentation-fault

当我们使用`app_dev.php`页面（开发版）时，没有任何问题，一切正常。

但是当我们尝试访问 app.php 页面时，有些页面往往会导致 Apache 崩溃。

这是我们的配置：

*   Debian 6 x64 内核 3.2.13
*   阿帕奇 2.2.22
*   PHP 5.3.3-7+squeeze13 扩展：pdo / pdo_mysql / pdo_pgsql / pdo_sqlite / intl / apc / gd

核心转储给我们以下结果：

```
#0  0x00007feab144e556 in zend_std_read_property (object=0x3, member=0x7feaa30ab840, type=3) at /tmp/buildd/php5-5.3.3/Zend/zend_object_handlers.c:340
#1  0x00007feab1463604 in zend_fetch_property_address_read_helper_SPEC_VAR_CONST (type=3, execute_data=0x7feab5cf5eb0) at /tmp/buildd/php5-5.3.3/Zend/zend_vm_execute.h:10084
#2  0x00007feab1453570 in execute (op_array=0x7feab5c863d8) at /tmp/buildd/php5-5.3.3/Zend/zend_vm_execute.h:107
#3  0x00007feab1420ef4 in zend_call_function (fci=0x7fff2689bfb0, fci_cache=0x0) at /tmp/buildd/php5-5.3.3/Zend/zend_execute_API.c:963
#4  0x00007feab1442047 in zend_call_method (object_pp=0x7fff2689c0d8, obj_ce=0x7feab63ea400, fn_proxy=0x7fff2689c0e8, function_name=0x7feab181e556 "__destruct", 
    function_name_len=646561136, retval_ptr_ptr=0x0, param_count=-1320891466, arg1=0x7fea00000000, arg2=0x0) at /tmp/buildd/php5-5.3.3/Zend/zend_interfaces.c:97 
```

关于第一帧的更多细节：

```
#0  0x00007feab144e556 in zend_std_read_property (object=0x3, member=0x7feaa30ab840, type=3) at /tmp/buildd/php5-5.3.3/Zend/zend_object_handlers.c:340
340     property_info = zend_get_property_info(zobj->ce, member, (zobj->ce->__get != NULL) TSRMLS_CC); 
```

发送的第一个参数 zobj->ce = 0x3 似乎很可疑，所以我查看了 zobj 的内容：

```
(gdb) p *zobj
$3 = {ce = 0xa5935461f887fe37, properties = 0xa5935461f8e5bbb7, guards = 0x0} 
```

但是包含 zobj->ce 的是什么？

```
(gdb) p *(zobj->ce)
Cannot access memory at address 0xa5935461f887fe37 
```

这个地址似乎导致了无效的内存位置。令人不安的是，这个问题只在使用 Symfony2 应用程序的生产版本时才会出现。这可能表明 APC 或仅使用生产版本加载的另一个模块存在问题，但我们没有发现可能导致此问题的线索。

我们尝试重新安装我们已安装的大多数 PHP 扩展，但在那之前没有任何结果。

编辑：根据需要，这里是 app.php 代码，它是 Symfony2 附带的原始文件。不过，我真的不相信这是问题的原因。

```
header('P3P: CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT');

require_once __DIR__.'/../app/bootstrap.php.cache';
require_once __DIR__.'/../app/AppKernel.php';
//require_once __DIR__.'/../app/AppCache.php';

use Symfony\Component\HttpFoundation\Request;

$kernel = new AppKernel('prod', false);
$kernel->loadClassCache();
//$kernel = new AppCache($kernel);
$kernel->handle(Request::createFromGlobals())->send(); 
```

# r - 重构 data.frame 列值

> ID：11950923
> 
> 赞同：0
> 
> 时间：2012-08-14T11:02:14.727
> 
> 标签：r, dataframe

对不起，如果这是一个菜鸟问题。我需要有关如何遍历我的数据框的帮助。这是一个示例数据。

```
a <- c(10:29);
b <- c(40:59);
e <- rep(1,20);
test <- data.frame(a,b,e) 
```

我需要使用以下“a”列中的值的标准来操作“e”列

对于所有值

"a" <= 15, "e" = 1,

"a" > 15 & < 20, "e" = 2

"a" > 20 & < 25, "e" = 3

"a" > 25 & < 30, "e" = 4 等等看起来像这样

```
result <- cbind(a,b,rep(1:4, each=5)) 
```

我的实际数据框长度超过 100k。如果你能在这里帮我整理一下就好了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T11:11:24.200

```
data.frame(a, b, e=(1:4)[cut(a, c(-Inf, 15, 20, 25, 30))]) 
```

**更新：**

[Greg 的](https://stackoverflow.com/users/430909/greg-snow)评论提供了一个更直接的解决方案，而无需通过从`cut`.

```
data.frame(a, b, e=findInterval(a, c(-Inf, 15, 20, 25, 30))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T11:15:16.053

我会用`cut()`这个：

```
test$e = cut(test$a, 
             breaks = c(0, 15, 20, 25, 30), 
             labels = c(1, 2, 3, 4)) 
```

如果您想“概括”剪切 - 换句话说，您不确切知道需要制作多少组 5（级别） - 您可以使用`c()`and采取两步方法`seq()`：

```
test$e = cut(test$a, 
             breaks = c(0, seq(from = 15, to = max(test$a)+5, by = 5)))
levels(test$e) = 1:length(levels(test$e)) 
```

由于 Backlin 在解决方案方面击败了我，这是另一个选项（在*这种*`cut()`情况下我不喜欢它，但我发布只是为了演示 R 中可用的许多选项）。

 *`recode()`从`car`包装中使用。

```
require(car)    
test$e = recode(test$a, "0:15 = 1; 15:20 = 2; 20:25 = 3; 25:30 = 4") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T11:09:58.653

你不需要循环。您几乎拥有所需的一切：

```
test[test$a > 15 & test$a < 20, "e"] <- 2 
```*

# java - “表达式的类型必须是数组类型，但它解析为双精度”

> ID：11950924
> 
> 赞同：0
> 
> 时间：2012-08-14T11:02:20.520
> 
> 标签：java, android

我对 Android / java 开发很陌生。我有一个问题（可能非常基本），即使在尝试了几种解决方法和互联网研究之后我也无法解决......

```
public double P_N_comp[][] = new double[16][40]; 
```

我使用函数填充 16*40 值

然后我想显示我的数组的最后一个值：

```
Double last_P_N = P_N[15][39]; // This is the line where i get the error
TextView myTextView3 = (TextView) findViewById(R.id.mytextview3);
myTextView3.setText("Last P_N value" + last_P_N); 
```

错误提示“表达式的类型必须是数组类型，但它解析为加倍”

因此，如果我理解，Java 希望在表达式的两侧都有一个数组（有错误的行）。但为什么 ？据我了解 P_N[15][39] 指的是数组的最后一个值，它是一个双精度值（因此，不是一个数组）。而 last_P_N 刚刚被声明为双精度......

预先感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:08:32.410

你确定你不在那里混合任何东西吗？

我看到您的数组已声明：

```
double P_N_comp[][] = new double[16][40]; 
```

但是您正在尝试评估：

```
Double last_P_N = P_N[15][39]; 
```

我相信有一个错字。= **P_N_comp** [15][39] 应该被赋值，而不是**P_N** [15][39]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:06:48.163

这里：

```
 Double last_P_N = P_N[15][39]; 
```

P_N 是什么？您的阵列的名称是 P_N_comp。

# hibernate - 为 Play 框架构建查询优化层的通用方法？

> ID：11950926
> 
> 赞同：2
> 
> 时间：2012-08-14T11:02:37.277
> 
> 标签：hibernate, caching, jpa, playframework, playframework-1.x

我的代码有时会以相当闲聊的方式进行大量数据库查询：

```
// Process all users:
for (User u : users) {
  // multiple queries per single user
  w = Website.find("owner = ?", u.id);
  d = Demo.find("...");
  ...

} 
```

上面的代码只从特殊的管理页面调用，所以它不必非常快，但我想达到合理的性能。有没有一种通用的方法可以在不完全重写的情况下做到这一点？

我想象的是一个播放模块，它可以实现以下功能：

```
// Preprocess - warm cache
Website.findAll();
Demo.findAll();

// After the above code was run, all the data is cached in the scope of this request, so
// the following code should now not do any fetches to the database

// Process all users:
for (User u : users) {
  // multiple queries per single user
  w = Website.find("owner = ?", u.id);
  d = Demo.find("...");
  ...

} 
```

尝试构建这样的优化层是否正确？你会如何处理它？

正如我所看到的，它的优势在于，这使我可以在原型设计阶段“编写愚蠢的代码”，并在需要时轻松地将其优化到一个不错的水平。当然，它不会达到最佳性能，也不适用于非常大的表，但对于某些任务，它可能是有益的。

或者......我应该直接吞下它并从头开始重写代码，而不依赖于“神奇”的缓存层吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:42:31.430

Hibernate 有几个选项可以打开二级缓存，尽管这样做并非易事。如果你必须使用缓存，你应该看看那里。

有关概述，请参见[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-cache和](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-cache)[http://www.ehcache.org/documentation/user-guide/为流行的 Ehcache 选项休眠](http://www.ehcache.org/documentation/user-guide/hibernate)。

当然，这不仅会影响您的管理后端代码，还会影响所有数据库访问。

这就是说，我建议您调整代码而不是实现缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:50:40.760

默认情况下，Play 不启用休眠 2 级缓存。如果需要提高性能，可以直接使用播放缓存。请记住，数据可能不存在于缓存中，您可能需要在未命中时获取它。

还要记住缓存的内存成本。

```
for (User u : users) {
  WebSite www = Cache.get("website-"+u.id, WebSite.class);
  if(www == null){
     // multiple queries per single user
     www = Website.find("owner = ?", u.id);
     Cache.set("website-"+u.id, www, "1d");
  } 
  ...
} 
```

我从未尝试过，但请查看有关启用休眠二级缓存的[线程。](https://groups.google.com/forum/?fromgroups#!topic/play-framework/91lJkebs-co%5B1-25%5D)

您还应该确保在数据库上创建了正确的索引，这会对繁重的查询产生巨大的性能影响。

# mongodb - Mongodb：offset() 是特定于集合还是特定于查询？

> ID：11950931
> 
> 赞同：0
> 
> 时间：2012-08-14T11:03:10.537
> 
> 标签：mongodb, morphia

什么时候在我的 morphia 代码中有这样的代码

> query.offset((pageNo - 1) * pageSize);

它是否跳过查询的“仅”匹配行数或集合的第一**(pageNo - 1)*pageSize**行？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:47:11.667

Morphia 的`offset`和 Mongo 的一样`skip`；无论哪种情况，您都指定在返回结果行之前要跳过查询结果中的行数。因此，就您的问题而言，`offset()`是特定于查询的。

# php - 如何在 codeigniter 中加载 phpseclib

> ID：11950934
> 
> 赞同：1
> 
> 时间：2012-08-14T11:03:20.743
> 
> 标签：php, codeigniter, phpseclib

按照标题，有没有人做到这一点？将此库包含到 codeigniter (v2.1.2) 中的最佳实践是什么？

我知道它可以通过像任何其他 PHP 应用程序一样简单地使用 include/require 语句来完成，但是由于这个项目一旦完成将被移交给多个开发人员，我想确保它使用 CI 开发人员预期的设计模式正确构建。

我在测试控制器中尝试了以下内容

```
public function index(){

    $this->load->library('phpseclib0.3.0/Net/SFTP');

} 
```

但是我受到了欢迎：

> 不存在的类：SFTP

phpseclib 取自[这里](http://phpseclib.sourceforge.net/)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T11:15:12.333

该`$this->load->library`方法适用于 codeigniter 中已经存在的库。

您可以为 PHPSecLib 类创建一个包装器，但是目前最简单的方法可能是简单地包含它。

1.  从 phpseclib 的页面下载源代码。
2.  将其上传到 /application/third_party 文件夹
3.  包括文件。

    `include(APPPATH . '/third_party/phpseclib/Net/SSH2.php');`

4.  创建您想要使用的类的实例。

# c++ - 从 boost::mpl:vector 类型列表定义成员变量

> ID：11950941
> 
> 赞同：0
> 
> 时间：2012-08-14T11:03:37.460
> 
> 标签：c++, templates, boost-mpl, tmp

我是 boost::mpl 和 TMP 的新手。我正在尝试按如下方式构建一个类-

```
template< typename T > 
class Demo
{
public:
    typedef boost::mpl::size<T> NumDimensions;

    template< size_t D >
    struct Dim
    {
        typedef typename boost::mpl::at_c< T, D >::type Type;
    };

    //I want to implement this function
    template< size_t D >
    typename Dim<D>::Type GetElement() 
    {
        if(D == 0)
        {
            return element1_;
        }
        if(D == 1)
        {
            return element2_;
        }
        ....
    }

private:
    typename Dim<0>::Type element1_;
    typename Dim<1>::Type element2_;
    ....
}; 
```

我计划使用这个类如下 -

```
typedef Demo< boost::mpl::vector< int, float, long > > D1;
D1 d;
D1::Dim<0>::Type i = d.GetElement<0>(); 
```

我很想知道是否有更好的方法来声明这些元素，而不是硬编码和重复它们的声明（和返回） - （可能）类似于具有异构类型和更简单访问元素的数组。

注意：- 此代码可能有编译器错误（我没有测试它），但我希望它传达了我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:22:06.493

您应该找到一种从类型列表创建元组的方法。这是一篇文章，似乎描述了如何使用 C++11 功能完成此操作。 [http://www.devx.com/cplus/Article/41533/1954](http://www.devx.com/cplus/Article/41533/1954) Stephen Lavavej 还[发表了关于“Going Native 2012”的演讲。](http://channel9.msdn.com/Events/GoingNative/GoingNative-2012/STL11-Magic-Secrets "讲话")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T23:25:55.877

我最终使用 boost::fusion::vector 如下 -

```
#include <iostream>
#include <tuple>
#include <string>

#include <boost/mpl/vector.hpp>
#include <boost/mpl/size.hpp>
#include <boost/mpl/at.hpp>

#include <boost/fusion/include/mpl.hpp>
#include <boost/fusion/container.hpp>

using namespace boost;
using namespace std;

template< typename T > 
class Demo
{
public:
    typedef boost::mpl::size<T> NumDimensions;

    template< size_t D >
    struct Dim
    {
        typedef typename boost::mpl::at_c< T, D >::type Type;
    };

    template< size_t D >
    typename Dim<D>::Type& GetElement()
    {
        return fusion::at_c<D>(elements_);
    }

private:
    typename fusion::result_of::as_vector< T >::type elements_;
}; 
```

# html - iframe youtube 始终位于移动设备上的其他元素之上

> ID：11950948
> 
> 赞同：2
> 
> 时间：2012-08-14T11:03:47.277
> 
> 标签：html, flash, youtube, html5-video

我正在使用 youtube 嵌入我的视频，并且如果点击某些元素，这些元素应该出现在视频顶部。

这在桌面浏览器上完美运行，但不适用于手机本身。

我试过`?wmode=transparent`无济于事。

有人有其他我可以尝试的技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:16:32.247

请参阅：[HTML5 视频：可以在视频上放置常规 html 内容](https://stackoverflow.com/questions/4626700/html5-video-possible-to-place-regular-html-content-over-video)

您的问题可能类似，即 quicktime player(ios) 劫持浏览器的该区域。上面的链接有一些技巧。

# jquery - 如何在单击按钮时调用 jquery 文件？

> ID：11950949
> 
> 赞同：0
> 
> 时间：2012-08-14T11:03:47.050
> 
> 标签：jquery, asp.net, button

下面是来自`form.js`...的Jquery代码

```
$(document).ready(function() {
    var requiredFlag = ' * ';
    var requiredKey = $('input.required:first').next('span').text();
    requiredKey = requiredFlag + requiredKey.replace(/^\((.+)\)$/,"$1");
    var conditionalFlag = ' ** ';
    var conditionalKey = $('input.conditional:first').next('span').text();
    conditionalKey = conditionalFlag + conditionalKey.replace(/\((.+)\)/,"$1");

    $('form :input').filter('.required')
                    .next('span').text(requiredFlag).end()
                    .prev('label').addClass('req-label');

    $('form :input').filter('.conditional')
                    .next('span').text(conditionalFlag);

    $('<p></p>').addClass('field-keys')
                .append(requiredKey + '<br />')
                .append(conditionalKey)
                .insertBefore('#contact');
}); 
```

我想在按钮单击时调用此文件，该文件位于另一个文件中。我怎样才能做到这一点？

**注意：按钮是使用asp.net按钮控件制作的。**

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:04:55.807

你可以使用***[`.getScript()`](http://docs.jquery.com/action/edit/Getscript)***方法。

```
$(document).ready(function() {
    // within dom ready function
    $('#bton').on('click', function() {
       $.getScript('form.js?' + (new Date()).getTime(), function() {
          // do something after file load
       });
    });
}); 
```

在这里，`(new Date().getTime())`是为了防止缓存问题，`#your_button`应该用适当的按钮`id`或`class`其他选择器替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:36:23.480

如果你使用 asp`Button`那么你需要做 2 个可能性中的 1 个

首先是在`Button` `onClientClick`属性中硬编码你的函数，如下所示： `<asp:Button runat="server" ID="btnExample" onClientClick=" function() { var requiredFlag = ' * ';var requiredKey = 'input.required:first').next('span').text(); requiredKey = requiredFlag + requiredKey.replace(/^\((.+)\)$/,"$1"); var conditionalFlag = ' ** '; var conditionalKey = $('input.conditional:first').next('span').text(); conditionalKey = conditionalFlag + conditionalKey.replace(/\((.+)\)/,"$1"); $('form :input').filter('.required') .next('span').text(requiredFlag).end() .prev('label').addClass('req-label'); $('form :input').filter('.conditional') .next('span').text(conditionalFlag); $('<p></p>').addClass('field-keys').append(requiredKey + '<br />') .append(conditionalKey) .insertBefore('#contact'); }"/>`

或者第二个是写在你的js文件或者`script`标签里面：

```
var myFunctionClientClick = function() {
var requiredFlag = ' * ';
var requiredKey = $('input.required:first').next('span').text();
requiredKey = requiredFlag + requiredKey.replace(/^\((.+)\)$/,"$1");
var conditionalFlag = ' ** ';
var conditionalKey = $('input.conditional:first').next('span').text();
conditionalKey = conditionalFlag + conditionalKey.replace(/\((.+)\)/,"$1");

$('form :input').filter('.required')
                .next('span').text(requiredFlag).end()
                .prev('label').addClass('req-label');

$('form :input').filter('.conditional')
                .next('span').text(conditionalFlag);

$('<p></p>').addClass('field-keys')
            .append(requiredKey + '<br />')
            .append(conditionalKey)
            .insertBefore('#contact');} 
```

然后简单地写`<asp:Button runat="server" ID="btnExample" onClientClick="myFunctionClientClick"/>`

希望能帮助到你：）

# javascript - 将包含 javascript 的文本绑定到模板中的 innerHTML

> ID：11950950
> 
> 赞同：2
> 
> 时间：2012-08-14T11:03:51.447
> 
> 标签：javascript, html, windows-8, windows-runtime

对于 Metro 风格的应用程序，在 Windows 8 中，我有一个我传递给翻转视图控件的文章列表。每篇文章都有一个包含 javascript 的 HTML 描述文本。我知道我们必须使用这个函数将不安全的内容加载到 innerHTML ：

```
 var someElement = document.getElementById('someElementID');
 MSApp.execUnsafeLocalFunction(
 function() { someElement.innerHTML = '<div onclick="console.log(\"hi\");">hi</div>' }
 ); 
```

但是当我的 innerHTML 属性在模板中时，我该如何实现呢？

这是我的模板：

```
 <div id="ItemTemplate" data-win-control="WinJS.Binding.Template">
 <div class="itemDetail fragment">
   <header aria-label="Header content" role="banner">
 <!--       <button class="win-backbutton" aria-label="Back" disabled></button>-->
        <h1 class="titlearea win-type-ellipsis">
            <span class="pagetitle"></span>
        </h1>
    </header>
    <section aria-label="Main content" role="main">
        <article>
            <img class="article-image" src="#" style="width: 300px; height: 200px;" data-win-bind="src:  urlImage; alt: title" />
            <div class="item-content" data-win-bind="innerHTML: description"></div>
        </article>
    </section>
     </div>
  </div> 
```

对于这个翻转视图：

```
 <div id="basicFlipView" 
data-win-control="WinJS.UI.FlipView"
      data-win-options="{itemTemplate:select('#ItemTemplate')}">
 </div> 
```

这是我填写的方法：

```
 var dataControl = document.getElementById("basicFlipView").winControl;
        dataControl.itemDataSource = dataList.dataSource;
        dataControl.currentPage = myState.index; 
```

非常感谢您的帮助

编辑：正如 Dominic Hopton 建议的那样，我使用了 WinJS.Binding.initializer。这是一种非常复杂的绑定方式。我已经这样做了，但它不能正常工作。你有没有发现不对劲：

```
 var toUnsafeHTML = WinJS.Binding.initializer(
     function toUnsafeHTML(source, sourceProperty, dest, destProperty) {

     function setUnsafeHTML() {
         MSApp.execUnsafeLocalFunction(
         function () { dest.innerHTML = source.innerHTML }
         );
     }

     return WinJS.Binding.bind(source, {
         innerHTML : setUnsafeHTML}
     );

 }
 );

//
// Binding initializers have to be public, so publish this out
// via a namespace
//
WinJS.Namespace.define("TemplateControl", {
    toUnsafeHTML: toUnsafeHTML
}); 
```

并在 html 中：

```
 <div id="ItemTemplate" data-win-control="WinJS.Binding.Template">
 <div class="itemDetail fragment">
   <header aria-label="Header content" role="banner">
 <!--       <button class="win-backbutton" aria-label="Back" disabled></button>-->
        <h1 class="titlearea win-type-ellipsis">
            <span class="pagetitle"></span>
        </h1>
    </header>
    <section aria-label="Main content" role="main">
        <article>
            <img class="article-image" src="#" style="width: 300px; height: 200px;" data-win-bind="src:  urlImage; alt: title" />
            <div class="item-content" data-win-bind="innerHTML: TemplateControl.toUnsafeHTML"></div>
        </article>
    </section>
     </div>
  </div> 
```

它永远不会进入 setUnsafeHTML 函数......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:33:09.580

我不确定这是否可能使用数据绑定，至少不使用我测试过的几种技术中的任何一种。

话虽这么说...即使您可以这样做...如果您正在加载的文章来自互联网，这将是一个非常糟糕的主意。

如果您从网络加载脚本，您将暴露于它包含恶意代码的可能性。存在此限制是有原因的，这是为了保护您（更重要的是，使用您的应用程序的人）免受潜在攻击。

如果您还没有，请阅读 execUnsafeLocalFunction 的文档，因为它们详细说明了为什么尝试在本地应用程序上下文中从 Web 注入脚本是一个坏主意：

[http://msdn.microsoft.com/en-us/library/windows/apps/Hh767331.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/Hh767331.aspx)

另请参阅（标题为“动态添加 HTML”的部分）：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh465380.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465380.aspx)

和：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh465388.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465388.aspx)

其中列出了被认为是安全或不安全的标签、属性和 CSS 属性。

希望有帮助！

# file-upload - primefaces handleFileUpload 不会触发

> ID：11950954
> 
> 赞同：0
> 
> 时间：2012-08-14T11:04:11.557
> 
> 标签：file-upload, primefaces

我正在尝试使用 primefaces fileUpload 实现页面，但未触发我的 handleUpload 函数。我的xhtml：

```
<h:form enctype="multipart/form-data">
  <p:panel id="uploadFormPanel" header="File upload">
     <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">  
         <h:outputText value="#{criteriaTranslation.questionaireFile}:" />
         <p:fileUpload update="uploadMessages"   
                       fileUploadListener="#{critereCSVImporter.handleFileUpload}"
                       mode="advanced"
                       allowTypes="/(\.|\/)(csv)$/"/>  
    </h:panelGrid>
    <p:growl id="uploadMessages" showDetail="true"/>
  </p:panel>
</h:form> 
```

我的支持豆：

```
@ManagedBean
@ViewScoped
public class CritereCSVImporter {

@Inject
private CriteriaBL criteriaBL;
private String OCRMODE;

public void handleFileUpload(FileUploadEvent event) {
    System.out.println("handle");
    InputStream inputStream = event.getFile().getInputstream();
} 
```

我的 web.xml：

```
<filter>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <filter-class>
        org.primefaces.webapp.filter.FileUploadFilter
    </filter-class>
</filter>
<filter-mapping>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:08:15.473

将 commons-fileupload 和 commons-io jar 放在你的 lib 文件夹中

[Apache Commons 文件上传](http://commons.apache.org/fileupload)

[Apache Commons IO](http://commons.apache.org/io)

# css - Webkit 转换错误

> ID：11950955
> 
> 赞同：0
> 
> 时间：2012-08-14T11:04:18.783
> 
> 标签：css, css-transforms

我正在研究 CSS3，但此代码出现错误：

```
-webkit-transform: translate3d(0,0,0) !important; 
```

错误是该属性 `translate3d(0,0,0)`无效`-webkit-transform`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:21:11.297

尝试：

```
-webkit-transform: translate3d(0,0,0);/* without !important */ 
```

# java - Apache Karaf 启动脚本。如何设置更多的烫发内存？

> ID：11950957
> 
> 赞同：1
> 
> 时间：2012-08-14T11:04:19.757
> 
> 标签：java, memory, out-of-memory, permgen, apache-karaf

我试图弄清楚如何增加 karaf 的 permgen 记忆。在 karaf 的启动脚本中，我看到有：

```
if not "%JAVA_PERM_MEM%" == "" (
    set DEFAULT_JAVA_OPTS=%DEFAULT_JAVA_OPTS% -XX:PermSize=%JAVA_PERM_MEM%
)
if not "%JAVA_MAX_PERM_MEM%" == "" (
    set DEFAULT_JAVA_OPTS=%DEFAULT_JAVA_OPTS% -XX:MaxPermSize=%JAVA_MAX_PERM_MEM%
) 
```

我知道`JAVA_PERM_MEM`and`JAVA_MAX_PERM_MEM`是变量，但它们没有在启动脚本中的任何地方定义，除了这里。

karaf 正在现场机器上运行，所以我不想对其进行任何实验，我需要确定是否这样做：

```
if not "%JAVA_PERM_MEM%" == "" (
    set DEFAULT_JAVA_OPTS=%DEFAULT_JAVA_OPTS% -XX:PermSize=512M
)
if not "%JAVA_MAX_PERM_MEM%" == "" (
    set DEFAULT_JAVA_OPTS=%DEFAULT_JAVA_OPTS% -XX:MaxPermSize=1024M
) 
```

会增加permgen内存吗？我需要这样做的原因是因为我不断得到：`Caused by: java.lang.OutOfMemoryError: PermGen space`

**编辑：**

karaf 上部署的所有包都与 spring 相关，它们有骆驼路由、cxf 端点、OpenJPA 持久性配置，所有这些都是通过 Spring 管理的。但我不认为有问题，因为据我所知，OutOfMemory PermGen 空间意味着所有部署的应用程序都没有足够的内存。如果有人知道问题可能出在哪里，那将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:09:34.103

这些变量可能会从您的环境中读取，因此只需定义它们。

```
export JAVA_PERM_MEM... 
```

关于 PermGen 异常，你可能会使用 spring DM 吗？或者一些与spring相关的osgi包？有几个问题。

# android - 如何通过代码远程解锁安卓手机

> ID：11950960
> 
> 赞同：45
> 
> 时间：2012-08-14T11:04:22.777
> 
> 标签：android

我写了一个远程锁定安卓手机的应用程序。也就是说，当从服务器发送特殊代码时，应用程序会根据特殊代码锁定手机。这是我正在使用的代码。

```
if (!mDPM.isAdminActive(mDeviceAdminSample)) {
        // try to become active – must happen here in this activity, to get result
        Intent intent = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
        intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN,mDeviceAdminSample);
        intent.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION,"Admin is added to do security operation.");
        startActivityForResult(intent, 0);
        } else {
        // Already is a device administrator, can do security operations now.
        mDPM.lockNow();
        } 
```

上面的代码正在工作，它正在锁定手机。

我可以通过从软键盘输入密码来解锁手机。有没有办法通过密码解锁？

我的问题是如何通过代码解锁手机。（此解锁应按照我解释的锁定方式远程完成）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T23:51:31.293

我相信你不能覆盖内置的屏幕锁定，除非你像三星和 HTC 那样制作自己的设备。但是，通过让您的客户使用您自己的类似屏幕锁定的应用程序，您可能可以实现您想要做的事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T04:40:43.683

我认为您的远程解锁目标无法实现。

Android 的设置方式是，许多应用程序可能具有设备管理员权限，任何设备管理员都可以发出锁定命令，但解锁必须来自用户。

我可以建议您简化这一点：您的应用程序可以尝试删除键锁定密码，然后用户只需在屏幕上滑动手指即可在没有密码的情况下使用设备。

如果您的应用程序不是唯一的设备管理员，那么我的建议有一个问题。在这种情况下，其他一些管理员应用程序可以设置最小密码长度（或其他一些密码限制），这将阻止您的应用程序清除屏幕锁定密码。

如果您的目标是帮助忘记锁屏密码的用户，那么您的服务器可以发明一个新密码，通知用户新密码是什么，并将新密码发送到您的应用，您的应用可以应用密码。然后用户可以解锁手机。别担心，它并不像听起来那么复杂。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-12T21:29:10.977

很抱歉这么写 - 无法通过代码解锁手机。如果您找到任何方法来做到这一点 - 不保证工作。所以没有办法远程解锁、编写自定义锁屏等。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-04T09:29:16.413

您需要使用 mDPM.resetPassword("", 0)

[http://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#resetPassword(java.lang.String](http://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#resetPassword(java.lang.String) , int)

当设置密码字符串为“”时，当前密码被替换为空值，屏幕锁定消失。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-14T12:29:08.247

尝试这个

```
KeyguardManager manager = (KeyguardManager)context.getSystemService(KEYGUARD_SERVICE);
kl = manager.newKeyguardLock("my-remote-app");
kl.disableKeyguard(); 
```

//用于在退出时重新启用键盘保护（如果需要）

```
onDestroy() {
kl.reenableKeyguard();
} 
```

这工作<=ICS。这是一个已弃用的 api，他们建议您使用 WindowManager 中的标志来获得类似的效果。尽管我未能使用 WindowManger 产生类似的效果。

希望这可以帮助，

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-14T12:19:39.827

请注意，我不是 Android 开发人员，但是：

如果您查看[此](http://developer.android.com/reference/android/app/KeyguardManager.html)内容，即使您处于“安全锁定”模式，如果您拥有正确的权限，您似乎也可以要求 WindowManager 解除密钥保护。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-13T12:31:03.600

据我所知，我们无法以编程方式解锁受密码保护的手机。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-14T09:24:57.267

一种解决方案是编写“自定义锁屏”。当然，这不是最简单的方法，但它会起作用，因为您可以使用自己的锁屏做任何您想做的事情。如果您正在考虑该解决方案，请随时与我联系，我会给您一些有用的链接。干杯!

# c# - 在被调用函数或 task.wait() 上使用 try/catch 块？

> ID：11950961
> 
> 赞同：2
> 
> 时间：2012-08-14T11:04:36.510
> 
> 标签：c#, exception, exception-handling, task-parallel-library

在某个任务调用的功能块周围使用 try catch 和在 task.wait() 上调用 try/catch 有什么区别。如果我处理函数中的异常，我还需要担心 task.wait() 可能发生的任何异常吗？

```
var factory = new TaskFactory();
task t1= factory.StartNew(() => funA();
t1.Wait();

void funcA()
{
  try{..}
  .
  .
  catch{..}
} 
```

或者

```
var factory = new TaskFactory();
task t1= factory.StartNew(() => funA();
try
{
  t1.Wait();
}
catch{....}

void funcA()
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:17:42.953

使用您提供的第一个块，您将无法捕获任何可能发生的异常：

> *   `ObjectDisposedException`: 任务已处理。
>     
>     
> *   `ArgumentOutOfRangeException`: timeout 是除-1 毫秒以外的负数，表示无限超时 - 或 - timeout 大于 MaxValue。
>     
>     
> *   `AggregateException`：任务被取消 - 或 - 在任务执行期间抛出异常。

来自[`Task.Wait()`MSDN 上的文档](http://msdn.microsoft.com/en-us/library/dd235606.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T15:17:03.263

我用来处理具有延续性的任务中的异常，更容易 IMO：

```
Task myTask= Task.Factory.StartNew( ... ).ContinueWith(myTaskFinished=> 
{
   if (myTaskFinished.IsCompleted)
   {
       // Hooray
   }

   if (myTaskFinished.IsFaulted)
   {
       foreach (Exception ex in myTaskFinished.Exception.InnerExceptions)
           //Exception handle..
   }

   if(myTaskFinished.IsCanceled)
   { 
        //Cancellation token?
   }
});

myTask.Wait(); 
```

# php - 无法启动并运行 XAMPP、PHP 和 MySQL

> ID：11950964
> 
> 赞同：-2
> 
> 时间：2012-08-14T11:04:45.007
> 
> 标签：php, mysql, xampp

我尝试过使用 Microsoft WebMatrix 和 XAMPP，但无论我做什么或尝试什么解决方法，我都无法让 PHP 和 MySQL 正常工作。

当我安装 XAMPP 时，与端口 80 冲突，因此 Apache 无法启动。然后我将它侦听的端口更改为 9260 并启动。但是在我这样做之后`http://localhost:9260/phpmyadmin/`会给我以下错误并且不允许我访问

> *#* 1045 - 用户'root'@'localhost'的访问被拒绝（使用密码：NO），
> 
> 配置中定义的 controluser 连接失败。
> 
> phpMyAdmin 尝试连接 MySQL 服务器，但服务器拒绝连接。您应该检查配置中的主机、用户名和密码，并确保它们与 MySQL 服务器管理员提供的信息相对应。

几天来我一直在尝试修复它，但我却在拐弯处开车。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:17:54.543

端口 80 问题：
很可能您正在运行 Skype 或其他已经使用端口 80 的软件。解决方案：

1.  打开操作 - 选项
2.  展开高级
3.  单击连接
4.  取消选中“将端口 80 和 443 用作 ....”

拒绝连接：
在大多数情况下 localhost 作为主机是正确的。如果您确定没有为 root 用户设置默认密码，则您的主机不正确 - 请尝试：

*   127.0.0.1
*   mySQL-Server 网络 IP
*   mySQL 服务器名称 (server.mydomain.eg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:05:50.750

伙计，如果您使用的是Skype，则只需启动XAMPP，然后再启动Skype。

记住每个端口的一项服务。Skype 自动切换到另一个端口。

# visual-studio - 用于 Qt 的 Visual Studio 2005 自定义构建

> ID：11950965
> 
> 赞同：0
> 
> 时间：2012-08-14T11:04:46.217
> 
> 标签：visual-studio, qt, visual-c++

我在每个使用 Q_OBJECT 的头文件的自定义构建属性中都有以下内容：

```
Command Line: $(THIRDPARTY_DIR)\qt\4.7.0\win32-vc10\bin\moc.exe $(InputFileName) -o moc\$(ConfigurationName)\moc_$(InputName).cpp
Description: ################### moc'ing $(InputFileName)
Outputs: moc\$(ConfigurationName)\moc_$(InputName).cpp 
```

这会生成必要的 moc 文件。我现在想要求 Visual Studio 也将它们编译并链接到我的其他源文件。目前我正在使用 `#include "moc\{Release OR Debug}\moc_Whatever.cpp"#`任何文件中的语句来强制编译和链接。显然，我必须根据调试或发布版本不断更改我的#include（由于某些原因，我不能在上述 moc 文件生成期间丢弃 $(ConfiguarationName) ）。另外，我不喜欢`#include`仅出于编译和链接的目的而在源文件中编写此内容的想法。

属性中是否有任何构建步骤，我可以提及将来将生成哪些文件并在它们可用时编译和链接它们（`VS2005`）？

（我现在不能使用 QtPlugin）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:06:18.470

您只需将这些文件添加到项目中，我的项目结构通常如下所示（在 Visual Studio 解决方案资源管理器中）：

```
 Solution
    |
    +- Project1
          |
          +- Generated Files
          +- Header Files
          +- Source Files 
```

在 Generated Files 中，我包含了对 Debug 和 Release moc_xxx.cpp 和 qrc_xxx.cpp 文件的引用。对于 Debug 文件，您需要将 Release 引用的“Exclude from Build”设置为 true，反之亦然。

这与插件的作用几乎相同。

# c# - 关于在 web Config 中动态更改和切换 connectionString 的问题

> ID：11950969
> 
> 赞同：4
> 
> 时间：2012-08-14T11:04:52.250
> 
> 标签：c#, asp.net, web-applications, web-config, page-lifecycle

我正在尝试在运行时为 Web 应用程序切换不同的数据库。

**Senario** 我们为不同的客户提供了一个 asp.net Web 应用程序和不同的数据库。我正在尝试从一个公共数据库中切换特定的连接字符串值，在该数据库中我保留了一个连接字符串、特定客户 ID 和密码的映射表。成功后 lo gin 我正在从公共数据库中提取一个连接字符串，并通过在运行时替换选定的连接字符串来编辑 web.config 文件连接字符串部分。我通过将以下代码添加到登录事件来做到这一点

```
 conectionString = cString;
                Configuration openWebConfiguration = WebConfigurationManager.OpenWebConfiguration("~");
                ConnectionStringsSection sections = openWebConfiguration.GetSection("connectionStrings") as ConnectionStringsSection;
                if (sections != null)
                {
                    sections.ConnectionStrings["ConnectionStringName"].ConnectionString = conectionString;
                    ConfigurationManager.RefreshSection("ConnectionStringName");
                    openWebConfiguration.Save();

                } 
```

我正在使用`ConfigurationManager`.problem 读取页面上的上述连接字符串是 Web 配置文件正在更改，但在调用另一个页面后使用`Response.Redirect`将引发异常。异常是“**无法评估表达式，因为代码已优化或本机框架已打开调用堆栈顶部**“我可以意识到这是在跨线程环境中发生的事情。我的问题是

*   上述异常的确切原因是什么？
*   Asp.net 的哪个页面生命周期从 web config 文件中读取设置？
*   我可以实现上述场景的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T20:35:41.700

我想知道为什么这个问题似乎仍然没有答案。好吧，我已经找到了一些答案。这可能是错误的，但它们如何赋予我一些意义。我认为以下内容对于我的知识水平是可以接受的。

1）我不知道确切的原因，但这是因为在应用程序运行时修改了代码

2）基于我的搜索WEB Config文件是在IIS服务器启动时开始被应用程序读取的。所以在WEB Config中要修改的任何值都需要重新启动IIS服务器才能将它们加载到内存中。我们可以修改动态连接字符串，但应用程序仍将在前一个连接字符串上运行。因此我们需要重新启动 IIS 以加载新的连接字符串。

**注意：修改现有连接字符串不同于将新连接字符串添加到 WEB 配置。**

3）我使用了一个通用数据库，其中我有几个数据库的不同连接字符串的身份验证详细信息。Web 配置具有上述主数据库的连接字符串。如果用户提供他的身份验证详细信息，它将选择他的连接字符串并加载它作为新的连接字符串。所以剩下的过程将基于该连接字符串。

上述答案的任何新论点都是非常可观的。我需要其他开发人员的更正，因为我非常渴望学习。

# c# - WebClient SendValues() 方法更改日期时间值

> ID：11950971
> 
> 赞同：0
> 
> 时间：2012-08-14T11:04:58.133
> 
> 标签：c#, asp.net-mvc-3, webclient

我使用 WebClient 类在 mvc 3 项目中发送响应确认消息。消息从一个项目的一个操作方法发送到另一个项目的操作方法。令人惊讶的是，日期参数是 3 小时后，在接收数据时。

例如，如果我的发送日期正在接收数据是“2012-08-14 13:42:50Z”，我会在另一边看到“2012-08-14 16:42:50Z”。这是我案例的简化代码示例；

```
NameValueCollection ack = new NameValueCollection();
ack.Add("RESID", form.RESPONSE.ID.ToString());
ack.Add("A_DateTime", DateTime.Now.ToString("u")); //2012-08-14 13:42:50Z

using (var client = new WebClient())
{
    client.Encoding = System.Text.Encoding.UTF8;
    var result = client.UploadValues("http://localhost:11578/HPM/ResponseAck", ack);
}

//HPM Controller:
ResponseAck(HttpPostResponseAckMessage response)
{
    //Here response.Date vale is 2012-08-14 16:42:50Z  ???
} 
```

在我看来，它是关于偷偷摸摸的小连载怪物因为某些文化特定问题而改变它的原因。但我不知道真正的原因所以解决方案。

编辑：

```
public class HttpPostResponseAckMessage
{
    public int RESID { get; set; }

    public DateTime A_DateTime { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:12:12.227

您应该更改当前线程的文化或以固定格式（例如 UTC）转换和处理所有日期。您可以使用以下代码更改线程的当前区域性：

```
Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("en-EN"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:55:44.780

好的，我认为它是关于期望 mvc 模型绑定器解析格式化的日期时间。

使用“u”格式的模型绑定器认为日期时间是 UTC。

所以我的解决方案是将属性 A_DateTime 的类型更改为字符串并在内部解析它。

希望这可以帮助像我这样的其他人。谢谢大家。

# jquery - jquery tokeninput过滤器查询发送额外参数

> ID：11950973
> 
> 赞同：5
> 
> 时间：2012-08-14T11:05:13.860
> 
> 标签：jquery, jquery-plugins

如何为查询设置额外的参数，例如

```
q=myseed&filter=1,2,34 
```

最好有一个附加的事件，比如

```
onFocus:function(){
  //retrieve extra params
} 
```

这是插件的链接 - [http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-24T07:42:20.003

这是你可以做到的，在下面的示例中，我将两个额外的参数传递给 tokenInput url。

```
this.$("#abcTextbox").tokenInput("url?someParam1=cricket&someParam2=yasser", {
    queryParam: "q"
}); 
```

[资源](http://yassershaikh.com/using-jquery-tokeninput-with-asp-net-mvc-3-razor/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T16:30:24.710

另一种方法是，您可以使用初始 url 来实现这一点。

就像是 ：

```
$("#selector").tokenInput("PATH_TO_SCRIPT&filter=1,2,3", {
  queryParam: "q"
}); 
```

这将按预期处理

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-30T09:41:39.173

这可以通过插件的本机功能（至少在当前版本中）来实现，只是没有写在文档中：代码中有[onSend 回调](https://github.com/loopj/jquery-tokeninput/blob/master/src/jquery.tokeninput.js#L1036)。这是一个简单的例子

```
$(".my-input").tokenInput('autocomplete.php', {
    hintText: false,
    onSend: function(param1) {
        // console.log($(this));
        // console.log(param1);
        param1.data.my_key = 'my_value';
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T11:12:16.727

除了进入实际的插件代码并添加此功能之外，我能看到的唯一另一种方法是将其更改为`queryParam`-

```
filter=1,2,34&q 
```

这样，您的过滤器就会简单地附加到*实际*的查询参数中。它必须是硬编码的，每次你想改变这个额外的过滤器时，你可能都必须重新初始化插件。

例子 -

```
$("#selector").tokenInput("PATH_TO_SCRIPT", {
  queryParam: "filter=1,2,34&q"
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-26T08:45:29.490

我知道这个问题已经很老了，但我遇到了同样的问题并找到了答案。

查看源代码，url 参数可以是在发送 ajax 查询之前评估的函数。所以你可以这样做：

```
this.$("#abcTextbox").tokenInput(function(){
    return "/path/to/script.php?filter="+$("#myFieldId").val()
}, {
    queryParam: "q"
 ...
}); 
```

# c# - Solr - 为单个唯一 ID 存储多个 Word 文档

> ID：11950976
> 
> 赞同：2
> 
> 时间：2012-08-14T11:05:26.327
> 
> 标签：c#, solr, solrnet

我们希望在 Solr 中索引和存储一组 Word 文档，并将它们显示为多值文本字段的元素，每个文本字段的内容都显示为索引中该条目下的一个元素。换句话说，它看起来像这样

*   ID
    *   abcdef [Word_1.docx 的文本]
    *   xyzabc [Word_2.docx 的文本]
    *   efghij [Word_3.docx 的文本]

我们不希望每个被索引的文档都有自己的唯一 ID；一组文档将是特定 ID 的子代。该 ID 可以有任意数量的文档。这个怎么做？

**更新：**这是我的 C# 代码；对于使用 设置的唯一 ID，我如何将多个文档读入其中`(++count).ToString()`？

```
using (FileStream fileStream = File.OpenRead(path))
{

    solr.Extract(
        new ExtractParameters(fileStream, (++_count).ToString())
            {
                ExtractFormat = ExtractFormat.Text,
                ExtractOnly = false,
                Fields = new List<ExtractField>()
                                                 {
                                                     new ExtractField("action", actionTo),
                                                     new ExtractField("actiondate", actionDate),
                                                     new ExtractField("abstract", abstract),
                                                     new ExtractField("docval", docval),
                                                     new ExtractField("documentgeo",documentgeo),
                                                     new ExtractField("filename", filename),
                                                     new ExtractField("isprimary", IsPrimary.ToString())
                                                 },
                                    AutoCommit = true 
            }
        );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T11:27:43.590

在您的 SOLR 模式中定义两个字段 -`id`和`text`. `text`应该是多值的。然后在你的 s 中聚合`SolrInputDocument`id 和 index 的文本数据。

```
<field name="id" type="int" multiValued="false" stored="true" indexed="true" />
<field name="text" type="text" multiValued="true" stored="true" indexed="true" /> 
```

我不知道`c#`API，但是使用 SolrJ 很容易使用`SolrInputDocument.addField("fieldname", "value")`.

**示例更新**

```
SolrInputDocument doc = new SolrInputDocument();
doc.addField("id", 1)
for (String docText : documents){
    doc.addField("text", docText)
} 
```

**.NET 更新示例**

我将通过以下方式定义我的班级：

```
public class Document{
[SolrUniqueKey("id")]
public integer Id { get; set; }

[SolrField("text")]
public ICollection<string> texts { get; set; } 
```

然后我将填充它并使用类似这样的伪 .NET 代码提交：

```
Document doc = new Document();
for (String documentPath : paths) {
    using (FileStream fileStream = File.OpenRead(path)) {
        string id = fileStream.getId();
        if (doc.getId() == id){
            doc.getTexts.add(fileStream.getText())
        }
    }
}
var solr = ServiceLocator.Current.GetInstance<ISolrOperations<Document>>();
solr.Add(doc);
solr.Commit(); 
```

# javascript - 无法从页面获取完整的 dom 内容

> ID：11950979
> 
> 赞同：-5
> 
> 时间：2012-08-14T11:05:35.380
> 
> 标签：javascript, zombie.js

当我尝试从 xvideos 获取完整的 dom 内容时（meaby it 网站不是最好的例子，但我现在找不到更多） browser.html() 仅返回 dom 的最后一个 div 元素。我认为这是页面上最后一个由 javascript 渲染的 div，但我不确定。

```
var zombie = require("zombie");                                                                                                    

zombie.visit("http://www.xvideos.com/", function (err, browser) {
  console.log(browser.html());                        
}) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:29:26.393

`browser.html()`确实返回整个页面。快速测试表明，使用僵尸获取 xvideos.com 会导致一些“存根”页面。

这只是一个理论，但可能 xvideos 上的人使用一些浏览器检测脚本并为任何不同于大多数常见浏览器的浏览器 (UserAgent) 返回存根页面。这可能是一种保护自己免受爬虫攻击的安全措施。

# php - 如何让新帖子显示在地图上？

> ID：11950980
> 
> 赞同：0
> 
> 时间：2012-08-14T11:05:36.837
> 
> 标签：php, wordpress, map

我的地图显示帖子的结果，但只有旧的。为什么没有新的出现？我从印度雇了一个程序员，但他现在躲起来了。（我已经付钱给他了，因为我没有预料到这个错误。）

在地图底部，它显示：总地理编码广告：602。这不是真的。现在有 608 个已发布的帖子。那么为什么没有发现新的呢？

另外，为什么不按 post_date 的顺序显示它们？

```
add_action('wp_ajax_query_total', 'query_total');
add_action('wp_ajax_nopriv_query_total', 'query_total');

if (defined('MULTISITE') && (MULTISITE))
{

    if (!defined('TT'))
        define('TT', plugins_url('/geo-ads/timthumb_wpmu.php'));
}
else
{
    if (!defined('TT'))
        define('TT', plugins_url('/geo-ads/timthumb.php'));
}

function query_total()
{
    global $wpdb;
    $table = $wpdb->prefix.'cp_ad_geocodes';

    $q = "SELECT COUNT(*) FROM $table t LEFT JOIN $wpdb->posts p ON (p.ID = t.post_id) WHERE p.post_status = 'publish'";
    $c = $wpdb->get_var($q);
    echo $c;

    die();

}

function query_geo_ads()
{   
    if ($_GET['range'] == 'true') {
        query_geo_ads_refresh();
    }
    else {
    global $wpdb;   
    $table = $wpdb->prefix.'cp_ad_geocodes';
    $querystr = "SELECT t.post_id, t.category, t.lat, t.lng, p.post_title, p.post_content, m.meta_value as price, CONCAT(wpo_su.option_value, REPLACE( REPLACE( REPLACE( REPLACE(wpo.option_value,'%year%',date_format(p.post_date,'%Y')) ,'%monthnum%',date_format(p.post_date,'%m')) ,'%day%',date_format(p.post_date,'%d')) ,'%postname%',p.post_name ) ) as permalink 
                FROM  $table t LEFT JOIN $wpdb->posts p ON (p.ID = t.post_id)
                INNER JOIN $wpdb->options wpo ON wpo.option_name='permalink_structure'
                INNER JOIN $wpdb->options wpo_su ON wpo_su.option_name='siteurl'
                LEFT JOIN $wpdb->postmeta m ON (m.meta_key = 'cp_price') AND (m.post_id = p.ID)
                WHERE p.post_status = 'publish' 
                    AND p.post_type = 'ad_listing' ";       

    $ads = $wpdb->get_results($querystr);   

    $expires = 50000;
    $cache_time = mktime();

    header("Cache-Control: max-age:" . $expires . ", must-revalidate"); 
    header("Expires: " . gmdate("D, d M Y H:i:s",$cache_time+$expires) . " GMT");

    echo json_encode($ads); 
    die();
    }
}

function get_image_url()
{   $post_id = intval($_POST['id']);
    $attachment = get_posts(array('post_type' => 'attachment','post_status' => 'publish','order' => 'ASC','orderby' => 'post_date','post_mime_type' => 'image','post_parent' => $post_id));
    $height = 100;
    $width = 100;
    $url = TT.'?src='.wp_get_attachment_url($attachment[0]->ID, false).'&h='.$height.'&w='.$width;                      
    if ($attachment)
        echo $url;
    die();
}

function query_geo_ads_refresh() {
?>
<div class="undertab"><span class="big">Classified Ads / <strong><span class="colour">Just Listed</span></strong></span></div>
<?php
    global $wpdb,$wp_query, $post;

    $exclude_categories = $_REQUEST['exclude_categories'];
    $term_id = $_REQUEST['term_id'];
    $term_slug = $_REQUEST['term_slug'];
    $taxonomy_name = $_REQUEST['taxonomy_name'];
    $northeast_lng = $_REQUEST['northeast_lng'];
    $northeast_lat = $_REQUEST['northeast_lat'];
    $southwest_lng = $_REQUEST['southwest_lng'];
    $southwest_lat = $_REQUEST['southwest_lat'];

    if(!empty($exclude_categories)) {
        $exclude_categories = explode(';', $exclude_categories);
    }
    if(!$term_id) // this means root
        //$term_categories = get_terms( 'ad_cat', 'orderby=count&hide_empty=0' );
        $term_categories = get_terms( 'ad_cat', 'order=DESC','orderby=post_date' );
    else {
        $current_term = get_term_by( 'slug', $term_slug, $taxonomy_name );
        $term_categories = get_terms( $taxonomy_name, 'order=DESC','orderby=post_date' );

        if(empty($term_categories))
            $term_categories[] = $current_term;
    }

    foreach ($term_categories as $catinfo_obj)
    {
        $term_id = $catinfo_obj->term_id;
        $arrsrch = array("'");
        $arrrep = array('');
        $name = htmlspecialchars_decode($catinfo_obj->name);
        $name = strtolower(str_replace($arrsrch,$arrrep,$name));
        if(!empty($exclude_categories)) {
            if(in_array(strtolower($name), $exclude_categories))
                continue;
        }
        $subterm_ids = get_term_children( $term_id, 'ad_cat' );
        $subterm_ids[] = $term_id;
        $term_ids = implode(',', $subterm_ids);

        if($term_id)
        {
            $my_post_type = "'ad_listing'";
            $sql = "select * from $wpdb->posts p where p.post_type in ($my_post_type) and p.post_status in ('publish') and p.ID in (select tr.object_id from $wpdb->term_relationships tr join $wpdb->term_taxonomy t on t.term_taxonomy_id=tr.term_taxonomy_id where t.term_id in ($term_ids) )";

            $postinfo = $wpdb->get_results($sql);

            $data_arr = array();
            $geo_codes = array();

            if($postinfo)
            {
                $srcharr = array("'");
                $replarr = array("\'");
                foreach($postinfo as $postinfo_obj)
                {
                    $ID = $postinfo_obj->ID;
                    $title = str_replace($srcharr,$replarr,($postinfo_obj->post_title));
                    $plink = get_permalink($postinfo_obj->ID);

                    $geocode = cp_get_geocode($ID);
                    $lat = $geocode['lat'];
                    $lng = $geocode['lng'];
                    // check current post geo place is within map coord area
                    if($lat > $northeast_lat || $lat < $southwest_lat)
                       continue;
                    if($northeast_lng > $southwest_lng) {
                        if($lng > $northeast_lng || $lng < $southwest_lng)
                            continue;
                    } else {
                        if($lng > 0 && $lng < $southwest_lng)
                            continue;
                        if($lng < 0 && $lng > $northeast_lng)
                            continue;
                    }
                    $address = get_post_meta($ID,'cp_address_line',true);
                    if(!empty($address))
                        $address = str_replace($srcharr,$replarr,(get_post_meta($ID,'cp_address_line',true)));
                    else {
                        $street = get_post_meta($ID,'cp_street',true);
                        $city = get_post_meta($ID,'cp_city',true);
                        $state = get_post_meta($ID,'cp_state',true);
                        $country = get_post_meta($ID,'cp_country',true);
                        if(!empty($street))
                            $address .= $street . ', ';
                        if(!empty($city))
                            $address .= $city . ', ';
                        if(!empty($state))
                            $address .= $state . ', ';
                        if(!empty($country))
                            $address .= $country . ', ';
                        $address = trim($address);
                        $address = substr($address, 0, strlen($address)-1);
                        $address = str_replace($srcharr,$replarr,$address);
                    }

                    $phone = str_replace($srcharr,$replarr,(get_post_meta($ID,'cp_phone',true)));
                    $email = str_replace($srcharr,$replarr,(get_post_meta($ID,'cp_email',true)));
                    $author = get_userdata($postinfo_obj->post_author);
            $category = get_the_category($postinfo_obj->ID);
                    if($postinfo_obj->post_type == 'ad_listing') {
                        $timing = date('M d, Y',strtotime(get_post_meta($ID,'cp_start_date',true))).' to '.date('M d, Y',strtotime(get_post_meta($ID,'cp_end_date',true)));
                    } else {
                        $timing = date('M d, Y',strtotime(get_post_meta($ID,'st_date',true))).' to '.date('M d, Y',strtotime(get_post_meta($ID,'end_date',true))).'<br />'.get_post_meta($ID,'st_time',true).' to '.get_post_meta($ID,'end_time',true);
                    }
                ?>
                    <?php appthemes_before_post(); ?>

        <div class="post-block-out">

            <div class="post-block">

                <div class="post-left">

                    <?php if ( get_option('cp_ad_images') == 'yes' ) cp_ad_loop_thumbnail($ID); ?>

                </div>
                <div class="<?php if ( get_option('cp_ad_images') == 'yes' ) echo 'post-right'; else echo 'post-right-no-img'; ?> <?php echo get_option('cp_ad_right_class'); ?>">

                <!--    <h3><a href="<?php echo $plink; ?>"><?php if ( mb_strlen( $title ) >= 75 ) echo mb_substr( $title, 0, 75 ).'...'; else echo $title; ?></a></h3>

                    <div class="clr"></div>

                    <p class="post-meta">
                    <span class="folder">
                    <a href="/ad-category/<?php echo $catinfo_obj->slug; ?>/">
                    <?php echo $name; ?>
                    </a>
                </span> | 
                <span class="owner">
                    <a href="/author/<?php echo $author->user_nicename; ?>">
                        <?php echo $author->display_name; ?>
                    </a>
                </span> |
                <span class="clock"><span><?php echo $timing; ?></span></span>
                </p>-->

                </div>

                <div class="clr"></div>

            </div><!-- /post-block -->

        </div><!-- /post-block-out -->
     <?php
                }
            }            
        }        
    }

    die();
}
?> 
```

这是 index.php 主页文件。这是主页的显示方式：

```
<?php get_header(); ?> 
```

```
<div class="content_botbg">

    <div class="content_res"> 
```

```
<?php // Comment the default CP Slider
    // if ( file_exists(STYLESHEETPATH . '/featured.php') )
    // include_once(STYLESHEETPATH . '/featured.php');
    // else
    // include_once(TEMPLATEPATH . '/featured.php');
?>

    <!-- left block -->

    <!--<div class="content_left">-->

            <?php if ( get_option('cp_home_layout') == 'directory' ) : ?>

            <div class="shadowblock_out">

                <div class="shadowblock">

                    <h2 class="dotted"><?php _e('Ad Categories','appthemes')?></h2>

                    <div id="directory" class="directory twoCol">

                        <?php echo cp_create_categories_list( 'dir' ); ?>

                        <div class="clr"></div>

                    </div><!--/directory-->

                </div><!-- /shadowblock -->

            </div><!-- /shadowblock_out -->

        <?php endif; ?>

    <div class="tabcontrol">

        <ul class="tabnavig">
          <li><a href="#block1"><span class="big"><?php _e('Just Listed','appthemes')?></span></a></li>
          <li><a href="#block2"><span class="big"><?php _e('Most Popular','appthemes')?></span></a></li>
          <li><a href="#block3"><span class="big"><?php _e('Random','appthemes')?></span></a></li>
        </ul>

    <?php remove_action( 'appthemes_after_endwhile', 'cp_do_pagination' ); ?>
  <?php $post_type_url = get_bloginfo('url').'/'.get_option('cp_post_type_permalink').'/'; ?>

        <!-- tab 1 -->
        <div id="block1">

          <div class="clr"></div>

          <div class="undertab"><span class="big"><?php _e('Classified Ads','appthemes') ?> / <strong><span class="colour"><?php _e('Just Listed','appthemes') ?></span></strong></span></div>

     <?php
                // show all ads but make sure the sticky featured ads don't show up first
                $paged = ( get_query_var('paged') ) ? get_query_var('paged') : 1;
                query_posts( array('post_type' => APP_POST_TYPE, 'ignore_sticky_posts' => 1, 'paged' => $paged) );
        global $wp_query;
        $total_pages = max( 1, absint( $wp_query->max_num_pages ) );
            ?>

            <?php //get_template_part( 'loop', 'ad_listing' ); ?>

    <?php
        if( $total_pages > 1 ){ ?>
        <div class="paging"><a href="<?php echo $post_type_url; ?>page/2/"> <?php _e( 'View More Ads', 'appthemes' ); ?> </a></div>
        <?php } ?>

        </div><!-- /block1 -->

        <!-- tab 2 -->
        <div id="block2">

          <div class="clr"></div>

          <div class="undertab"><span class="big"><?php _e('Classified Ads','appthemes') ?> / <strong><span class="colour"><?php _e('Most Popular','appthemes') ?></span></strong></span></div>

    <?php get_template_part( 'loop', 'featured' ); ?>

    <?php global $cp_has_next_page; ?>
    <?php if($cp_has_next_page){ ?>
        <div class="paging"><a href="<?php echo $post_type_url; ?>page/2/?sort=popular"> <?php _e( 'View More Ads', 'appthemes' ); ?> </a></div>
    <?php } ?>

    <?php wp_reset_query(); ?>

        </div><!-- /block2 -->

        <!-- tab 3 -->
        <div id="block3">

          <div class="clr"></div>

          <div class="undertab"><span class="big"><?php _e('Classified Ads','appthemes') ?> / <strong><span class="colour"><?php _e('Random','appthemes') ?></span></strong></span></div>

            <?php
                // show all random ads but make sure the sticky featured ads don't show up first
                $paged = ( get_query_var('paged') ) ? get_query_var('paged') : 1;
                query_posts( array('post_type' => APP_POST_TYPE, 'ignore_sticky_posts' => 1, 'paged' => $paged, 'orderby' => 'rand') );
        global $wp_query;
        $total_pages = max( 1, absint( $wp_query->max_num_pages ) );
            ?>

            <?php get_template_part( 'loop', 'ad_listing' ); ?>

    <?php
        if( $total_pages > 1 ){ ?>
        <div class="paging"><a href="<?php echo $post_type_url; ?>page/2/?sort=random"> <?php _e( 'View More Ads', 'appthemes' ); ?> </a></div>
        <?php } ?>

        </div><!-- /block3 -->

      </div><!-- /tabcontrol -->

  </div><!-- /content_left -->

        <?php //get_sidebar(); ?>

        <div class="clr"></div>

    </div><!-- /content_res -->

</div><!-- /content_botbg --> 
```

# android - 从 sqlite 数据库中获取数据

> ID：11950984
> 
> 赞同：0
> 
> 时间：2012-08-14T11:06:15.583
> 
> 标签：android, sqlite

我有一个活动，想从我的 sqlite 数据库中获取数据。它有效，但我的活动只检索最后一行而不是整列。我该怎么做才能获得整个专栏？

这是我数据库中的代码：

```
public String getName() {
String[] columns = new String[]{ KEY_ROWID, KEY_NAME };
Cursor c = db.query(NAME_TABLE, columns, null, null, null, null, null);
c.moveToFirst();
while(!c.isAfterLast()) {
String name = c.getString(c.getColumnIndex(KEY_NAME));
c.moveToNext();
}
c.close();
return name;
} 
```

* * *

这是我活动中联系数据库的代码：

```
Database getdata = new Database(this);
getdata.open();
String data = getdata.getName();
getdata.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:10:35.383

下面给出的使用`cursor.moveToFirst()`方法示例

```
if (cursor.moveToFirst()) {
             do {
                 list.add(cursor.getString(0));
                 list.add(cursor.getString(1));
                 list.add(cursor.getString(2));
                 list.add(cursor.getString(3));
                 list.add(cursor.getString(4));
                 list.add(cursor.getString(5));
                 list.add(cursor.getString(6));
               } while (cursor.moveToNext());
          } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:25:02.180

更新您的代码...

```
public String[] getName() {
    String[] columns = new String[]{ KEY_ROWID, KEY_NAME };
    int i=0;
    Cursor c = db.query(NAME_TABLE, columns, null, null, null, null, null);
    c.moveToFirst();
    String[] names = new String[c.getCount()];
    while(!c.isAfterLast()) {
        String name = c.getString(c.getColumnIndex(KEY_NAME));
        names[i]=name;
        c.moveToNext();
        i++;
    }
    c.close();
    return names;
} 
```

* * *

```
Database getdata = new Database(this);
getdata.open();
String[] data = getdata.getName();
getdata.close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T11:25:36.757

看，正如我所说，没有看到代码我很无助..在看到你的代码之后..

您只`String`从该函数返回 single`getName()`而不是 return `String[]`。

**注意：**这只是伪代码..实际可能不同..

```
public String[] getName() {

        int i=0;
        String[] columns = new String[]{ KEY_ROWID, KEY_NAME };
        Cursor c = db.query(NAME_TABLE, columns, null, null, null, null, null);
        String name[] = new String[c.getCount()];
        c.moveToFirst();
          while(!c.isAfterLast()) {
               name[i] = c.getString(c.getColumnIndex(KEY_NAME));
               c.moveToNext();
               i++;
          }
        c.close();
        return name;
} 
```

和这个，

```
Database getdata = new Database(this);
getdata.open();
String data[] = getdata.getName();
getdata.close(); 
```

# java - java.util.NoSuchElementException

> ID：11950991
> 
> 赞同：0
> 
> 时间：2012-08-14T11:06:30.890
> 
> 标签：java, sql, tomcat6

尝试执行我的代码时出现以下错误

```
--- Check the Segment.getVirtualSegmentId.  
--- Check the SQL statement.  
--- Cause: java.util.NoSuchElementException 
```

（但是该方法确实存在并且查询在 SQL Developer 中正确运行），重新部署 tomcat 就可以了，但是过了一段时间又没有更改代码中的任何内容，上述错误已被抛出。

引发错误的代码是

```
<select id="getVirtualSegmentId" resultClass="java.lang.String" >
  select max(substr(attr_value,instr(attr_value, '-')+1))
  from circ_inst inner join circ_attr_settings
     on circ_inst.circ_inst_id=circ_attr_settings.circ_inst_id and val_attr_inst_id=1045
  where REGEXP_LIKE (circ_attr_settings.attr_value, 'LAYER 2 SWITCH-[0-9]+$') or
      REGEXP_LIKE (circ_attr_settings.attr_value, 'IPANEMA-[0-9]+$') or
      REGEXP_LIKE (circ_attr_settings.attr_value, 'FIREWALL-[0-9]+$')
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:58:33.077

我可以通过从查询中删除“+$”来避免异常。谢谢大家的回复

# ubuntu - 如何使用 capifony 中的密钥文件进行身份验证？

> ID：11950992
> 
> 赞同：0
> 
> 时间：2012-08-14T11:06:29.937
> 
> 标签：ubuntu, ssh, capifony

我正在尝试设置 capifony。我正在使用它 `ssh -i keyfile.pem username@servername.com`从控制台在服务器上进行身份验证。我如何为此配置capifony？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:23:06.060

您可以使用以下配置：

```
ssh_options[:user] = "username"
ssh_options[:keys] = ["/path/to/your/keyfile.pem"] 
```