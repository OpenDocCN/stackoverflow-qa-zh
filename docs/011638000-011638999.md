# StackOverflow 问答 11638000-11638999

# ruby-on-rails - 社区站点的良好安全实践是什么？

> ID：11638003
> 
> 赞同：-1
> 
> 时间：2012-07-24T19:32:06.363
> 
> 标签：ruby-on-rails, ruby-on-rails-3, security

我应该如何保护我在 Rails 中创建的社区驱动网站？这个网站包括一个微博服务和我从头开始编写的论坛，而且它（显然）包括用户帐户。像这样的网站有哪些好的安全实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:43:58.063

这也是一个很好的 railscast 检查：

[http://railscasts.com/episodes/178-seven-security-tips/](http://railscasts.com/episodes/178-seven-security-tips/)

帮助我建立我的网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:42:24.710

以下是您应该考虑的简短摘要：

*   关于**对服务器的攻击**

    *   只要您使用带参数的标准活动查询函数，rails 就可以防止[SQL 注入。](https://www.owasp.org/index.php/SQL_Injection)[一切都在这里描述](http://guides.rubyonrails.org/security.html#sql-injection)。
    *   [正如最近](http://www.h-online.com/open/news/item/GitHub-security-incident-highlights-Ruby-on-Rails-problem-1463207.html)提醒的那样，Mass Assignement 漏洞鲜为人知，但在 Rails 中非常重要。批量分配允许从散列创建或更新对象（*Foobar.new(params[:foobar]*或 *Foobar.update_attributes(params[:foobar]*)。在这种情况下，用户将能够修改任何授权为质量的值-assignment. 最佳实践包括默认禁用批量分配（使用最后一个 rails 版本完成）并且不授权敏感参数的批量分配（管理员权限...）
*   关于**对客户端的攻击**

    *   针对[XSS](https://www.owasp.org/index.php/XSS)，在显示用户设置的参数时始终编码（使用 h 函数）。注意不要使用单引号作为分隔符，因为它们不是由 rails 编码的。
    *   针对[CSRF](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29)，始终使用Rails 中实现的[CSRF 令牌](http://guides.rubyonrails.org/security.html#csrf-countermeasures)

你可以在这里找到有用的资源：

*   [Rails 安全指南](http://guides.rubyonrails.org/security.html#header-injection)
*   [OWASP 备忘单](https://www.owasp.org/index.php/Cheat_Sheets)
*   [刹车人](https://github.com/presidentbeef/brakeman/)是一个插件，它审计你的 Rails 代码寻找漏洞
*   [Rails 最佳实践](http://rails-bestpractices.com/)包括一些安全指南
*   [OWASP 测试指南](https://www.owasp.org/index.php/OWASP_Testing_Project)是一个很好的网站测试资源，但请记住，最好由开发人员以外的人进行测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T19:34:56.297

这是最好的起点之一。[http://guides.rubyonrails.org/security.html](http://guides.rubyonrails.org/security.html)

# groovy - 有没有更简单的方法告诉 HTTPBuilder 忽略无效证书？

> ID：11638005
> 
> 赞同：22
> 
> 时间：2012-07-24T19:32:15.817
> 
> 标签：groovy, httpbuilder

根据[文档](http://groovy.codehaus.org/modules/http-builder/doc/ssl.html)，您可以通过一个相当笨重的过程手动从浏览器导出证书并在本地识别它。有什么类似于 curl 的`--insecure`switch 的东西可以使它实用吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-08-01T09:20:28.897

大家好消息！:-) 刚刚发现 HttpBuilder 的新版本（0.7.1）引入了方法：

```
ignoreSSLIssues() 
```

这解决了有关无效 SSL 证书的所有问题（当然您必须知道它也会降低安全性）。

有关此方法的更多信息：[https](https://github.com/jgritman/httpbuilder/wiki/SSL) ://github.com/jgritman/httpbuilder/wiki/SSL （底部部分）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T18:04:07.373

找到了一种不涉及证书导入或 httpbuilder hacks 的方法

```
//== HTTPBUILDER IMPORTS
@Grab(group='org.codehaus.groovy.modules.http-builder', module='http-builder', version='0.5.0-RC2' )
import groovyx.net.http.*
import static groovyx.net.http.ContentType.*
import static groovyx.net.http.Method.*
//== END HTTPBUILDER IMPORTS

import javax.net.ssl.X509TrustManager
import javax.net.ssl.SSLContext
import java.security.cert.X509Certificate
import javax.net.ssl.TrustManager
import java.security.SecureRandom
import org.apache.http.conn.ssl.SSLSocketFactory
import org.apache.http.conn.scheme.Scheme
import org.apache.http.conn.scheme.SchemeRegistry

def http = new HTTPBuilder( "https://your_unsecure_certificate_host" )

    //=== SSL UNSECURE CERTIFICATE ===
   def sslContext = SSLContext.getInstance("SSL")              
   sslContext.init(null, [ new X509TrustManager() {public X509Certificate[]   
   getAcceptedIssuers() {null }
   public void checkClientTrusted(X509Certificate[] certs, String authType) { }
   public void checkServerTrusted(X509Certificate[] certs, String authType) { }
   } ] as TrustManager[], new SecureRandom())
   def sf = new SSLSocketFactory(sslContext, SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER)
   def httpsScheme = new Scheme("https", sf, 443)
   http.client.connectionManager.schemeRegistry.register( httpsScheme )
   //================================

//do your http call with the http object
http.request( .... 
```

# ruby-on-rails - 使用 ruby on rails 登录时在导航栏上显示用户名

> ID：11638009
> 
> 赞同：0
> 
> 时间：2012-07-24T19:32:27.487
> 
> 标签：ruby-on-rails

我希望能够在用户登录时用用户名替换导航栏上的“帐户”选项卡。我将如何去做。我是否必须使用某种嵌入式红宝石，例如 <%= @user.name %>

继承人的html

```
 enter code here

<header class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <%= link_to "sample app", root_path, id: "logo" %> 
      <nav>
        <ul class="nav pull-right">
          <li><%= link_to "Home", root_path %></li> 
          <li><%= link_to "Help", help_path %></li> 
          <% if signed_in? %>
          <li><%= link_to "Users", '#' %></li> 
          <li id="fat-menu" class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
               Account
              <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
              <li><%= link_to "Profile", user_path(current_user) %></li> 
              <li><%= link_to "Settings", '#' %></li>
              <li class="divider"></li>
              <li>
                <%= link_to "Sign out", signout_path, method: 'delete' %> 
              </li>
            </ul> 
          </li>
        <% else %>
          <li><%= link_to "Sign in", signin_path %></li>
        <% end %> 
       </ul>
      </nav>
    </div>
  </div>
</header> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:33:56.150

尝试：

```
<%= current_user.name %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:44:29.570

@RickyAhn，观看此视频[http://railscasts.com/episodes/250-authentication-from-scratch](http://railscasts.com/episodes/250-authentication-from-scratch)

我以做登录页面为例

# scala - 在 Scala 中，Futures.awaitAll 是否会在超时时终止线程？

> ID：11638010
> 
> 赞同：0
> 
> 时间：2012-07-24T19:32:27.813
> 
> 标签：scala, concurrency, jvm, akka

所以我在 scala 中编写了一个迷你超时库，它看起来与这里的代码非常相似：[How do I get hold of exceptions throw in a Scala Future?](https://stackoverflow.com/questions/6229778/how-do-i-get-hold-of-exceptions-thrown-in-a-scala-future)

我执行的函数要么成功完成，要么永远阻塞，所以我需要确保在超时时取消执行线程。

因此我的问题是：**在超时时，awaitAll 是终止底层参与者，还是让它永远运行？**

我正在考虑的一种替代方法是使用 java Future 库来执行此操作，因为可以调用一个显式的 cancel() 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:58:23.110

[免责声明 - 我自己是 Scala 演员的新手] 当我阅读它时，`scala.actors.Futures.awaitAll`等到期货列表全部解决或直到超时。它不会`Future.cancel`,`Thread.interrupt`或以其他方式尝试终止`Future`; 你可以稍后再回来等待。

这`Future.cancel`可能是合适的，但请注意，您的代码可能需要参与影响`cancel`操作 - 它不一定是免费的。 `Future.cancel`取消已安排但尚未开始的任务。它会中断正在运行的线程[设置一个可以检查的标志]......这可能会或可能不会确认中断。审查`Thread.interrupt`和`Thread.isInterrupted()`。您的长时间运行的任务通常会检查它是否被中断（您的代码）并自行终止。各种方法（即`Thread.sleep`和`Object.wait`其他方法）通过 throw 响应中断`InterruptedException`。您需要查看并理解该机制，以确保您的代码在这些限制内满足您的需求。看到[这个](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)。

# javascript - 历史 API、刷新和书签

> ID：11638013
> 
> 赞同：0
> 
> 时间：2012-07-24T19:32:37.530
> 
> 标签：javascript, refresh, history, bookmarks, pushstate

     `pushState`不发出请求，它只是更改 url 并存储新的历史记录条目。考虑这个概念，刷新或书签是不可能的，因为服务器总是会做一个请求。需要一个服务器端解决方案。
     经过几个小时的搜索，我找到了一个解决方案，每个调用都必须重定向`index.php`到让 PHP 处理请求。

```
rewrite ^/(.*)$ /index.php?page=$1 last 
```

     我不确切知道该文件应该如何让网站刷新或为页面添加书签。有人可以帮助我吗？我举了一个例子来帮助澄清。

* * *

**索引.html**

```
<!DOCTYPE html>

<html>
    <head>
        <meta charset = "utf-8">

        <title>History API</title>

        <script>
            function ajax (url, callback) {
                var conection = new XMLHttpRequest ();

                conection.open ("GET", url, true);

                conection.setRequestHeader ("X-Requested-With", "XMLHttpRequest");

                conection.send (null);

                conection.onreadystatechange = function () {
                    if (conection.readyState === 4) {
                        if (conection.status === 200) {
                            callback (conection.responseText);
                        }
                        else if (conection.status === 404) {
                            alert ("Page not found !");
                        }
                        else {
                            alert ("Error !");
                        }
                    }
                }
            }

            window.addEventListener ("popstate", function (event) {
                var state = event.state;

                if (state) {
                    document.getElementById ("content").innerHTML = state["content"];
                }
            });

            document.addEventListener ("DOMContentLoaded", function () {
                var content = document.getElementById ("content");
                var menu = document.getElementById ("menu");

                menu.addEventListener ("click", function (event) {
                    var target = event.target;

                    if (target.nodeName === "A") {
                        ajax (target.href, function (result) {
                            history.pushState ({"content": result}, target.innerHTML, target.href);

                            content.innerHTML = result;
                        });

                        event.preventDefault ();
                    }
                });
            });
        </script>

        <style>
            body {
                width: 400px;
            }

            div {
                border: 1px solid black;
                padding: 10px;
            }
        </style>
    </head>

    <body>
        <div id = "menu">
            <a href = "page1.html">Page 1</a>
            <a href = "page2.html">Page 2</a>
        </div>

        <div id = "content"></div>
    </body>
</html> 
```

**索引.php**

```
<?php
    isset ($_GET["page"]) or exit ("Error !");

    $page = $_GET["page"];

    // Ajax request
    if (isset ($_SERVER["HTTP_X_REQUESTED_WITH"]) && strtolower ($_SERVER["HTTP_X_REQUESTED_WITH"]) === "xmlhttprequest") {
        if (file_exists ($page)) {
            require_once ($page);
        }
        else {
            header ("HTTP/1.1 404 Not Found");
        }
    }
    else {
        require_once ("index.html");
    }
?> 
```

**page1.html**

> 你好，我是Page 1。很高兴认识你。

**page2.html**

> 嗨，兄弟。我是第2页。

* * *

**点击（确定）**

![在此处输入图像描述](../Images/fef3adf3e1d33bb9169c09016059b057.png)

**刷新（失败）**

![在此处输入图像描述](../Images/3d05d971e2279752db8c0e1f45cd2a4e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:53:45.260

首先，您真的不应该使用 GET 参数作为 _require_once_ 的输入。真的。不是。至少使用一个简单的页面允许名称白名单，并且只包含和输出映射文件（或具有这些白名单名称的文件）。

现在到你的历史 API 问题。Pushing things 显然对你有用，所以缺少的可能是一个简单的 ondomready 事件，它读取当前 URL 并通过 AJAX 或从现有历史条目加载内容。应该在那里使用相同的白名单方法。也尽量不要通过使用未经验证的输入（URL）作为您的 javascript 和 DOM 操作的输入而落入 DOMXSS 的陷阱。

# jquery - 如何在 JQuery 和/或 CSS 中创建水平文本滑块？

> ID：11638022
> 
> 赞同：0
> 
> 时间：2012-07-24T19:33:07.330
> 
> 标签：jquery, css

我正在尝试创建一个文本滑块以在 4 个不同的句子之间滑动。我无法让它工作，事实上，我根本无法让代码正常工作。我需要重新开始，但我不知道如何创建一个可以在句子之间切换的句子。

非常感谢任何关于使用 CSS3 或 jQuery 创建一个的帮助，因为我真的没有偏好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:37:10.853

只需为容器设置（在此示例中使用跨度）：

```
<div id="parent_container">
    <span>Sentence once</span>
    <span>Sentence two</span>
    <span>Sentence three</span>
    <span>Sentence four</span>
</div> 
```

现在在您的 CSS 中，将它们设置为并排放置，最好将跨度宽度设置为 parent_container 的宽度。

在 jQuery 中，您现在可以根据需要`hide()`和`show()`每个人`<span>`或[`animate()`](http://api.jquery.com/animate/)跨度之间的过渡。根据您的问题，听起来您想[`animate()`](http://api.jquery.com/animate/)使用幻灯片。

# design-patterns - 是否有管理（可能是多个）异步加载数据项请求的模式？

> ID：11638026
> 
> 赞同：0
> 
> 时间：2012-07-24T19:33:21.780
> 
> 标签：design-patterns, asynchronous, silverlight-5.0

我在存储库中有对象。客户端请求对象中的管理类代表各种模块异步加载。这些模块可能都同时请求一个特定的对象（同一个对象）。是否有一种模式来设计这个，这样管理类不会为每个模块请求提交请求？

我要做的是让管理类在第一次尝试访问数据时向 Web 服务发出一个请求，然后在数据到达时满足所有后续请求。

**编辑**

这些模块不知道彼此或彼此的请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:44:51.033

我过去有几种方法可以做到这一点。但没有什么是“自动化的”。

第一的：

每个异步回调发出对下一个对象的调用（如果需要）并以这种方式级联。如果调用失败，它会在该点停止级联，并且只显示一个错误。这个和下一个的缺点是电话的喋喋不休。

第二：

进行所有异步调用，并使用预期返回的项目设置计数器。每个处理程序都会锁定并更新计数器。当 counter==expectedCount 则返回所有项目。列表框显示返回的项目集合。这样做的缺点是，您在不知道 a) 是否需要和 b) 是否有任何故障应该停止进程（以及调用）的情况下进行所有调用。它也很健谈，错误意味着进行了不必要的呼叫。

第三：

只有在服务器上明确定义了规则时，最愚蠢的过程才有效。您进行异步调用，服务进行级联。仅当所有后续查询都返回第一个查询的子项时，这才最有效。然后可以将结果作为单个对象返回。这绝对不是闲聊。这样做的缺点是返回对象的大小。

# ios - iOS导航栏：隐藏导航栏和平滑过渡

> ID：11638029
> 
> 赞同：2
> 
> 时间：2012-07-24T19:33:36.837
> 
> 标签：ios, uinavigationcontroller

我在导航控制器中有一系列视图控制器，对于根视图控制器，我将导航控制器栏的“隐藏”属性设置为“是”。它的所有子项都将“隐藏”属性设置为 NO。问题是我不知道隐藏栏的最佳位置在哪里，因为当我按下“返回”按钮返回根视图控制器时，我可以看到导航栏如何消失以及根视图控制器视图的大小调整这不是一个好的用户体验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:38:04.377

你把隐藏/取消隐藏电话放在哪里了？最好的地方可能会在 viewWillAppear 中，例如在[这篇](http://blog.kvnd.me/post/9714565498/animating-hiding-showing-of-uinavigationbar)文章中。

就像是：

```
if (![self.navigationController isNavigationBarHidden]) 
{
    [self.navigationController setNavigationBarHidden:YES animated:animated];
} 
```

# jpa - 从 JPA 中未附加的对象获取附加对象

> ID：11638030
> 
> 赞同：1
> 
> 时间：2012-07-24T19:33:36.707
> 
> 标签：jpa, jpa-2.0

假设我在 JPA 应用程序中有几种类型的实体，以及一个执行所有与数据库相关的操作的存储库。

有时它从外部传递未附加的实体，我想获取它们的附加副本（例如，保留包含对此实体的引用的新实体，或访问惰性属性）。

`EntityManager.refresh(entity)`不适用于未连接的对象。`EntityManager.merge(entity)`如我所愿，将复制分离实体的当前状态，而不是从数据库中获取当前值。`EntityManager.find(entity.getId(), entityClass)`有效，这就是我现在所做的，但这取决于实体的类型（尽管现在我认为它`EntityManager.find(entity.getId(), entity.getClass())`更好）。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:44:21.973

您可以合并和刷新： `entityManager.refresh(entityManager.merge(entity));`

`merge`会给你一个托管实体，然后你可以用来`refresh`从数据库中获取值。

此代码应适用于附加实体和分离实体。

# c++ - 需要有关对象/连接池项目的 RAII 设计的建议

> ID：11638032
> 
> 赞同：2
> 
> 时间：2012-07-24T19:33:41.120
> 
> 标签：c++, raii

我会先说我已经研究了几天，试图了解什么是“正确的方法”。在对 RAII/池设计/智能指针进行了大量谷歌搜索之后，并没有得出明确的结论（除了可能没有绝对的“正确方法”），我想也许是时候让更有知识的人为我指出正确的方向了.

我正在构建一个对象池，并且如果需要，我正在尝试确保客户端代码可以使用 RAII。

涉及3个实体：

*   资源。构建成本高，重用成本低（在发布时检查其状态并非易事）。难以复制，因为它包装了一些 C 结构，具有自己分配的内存/资源。
*   包装/手柄。资源的包装器。在 ctor 上获得资源，在 dtor 上释放它。
*   控制器/池。维护资源池并管理客户通过 Wrapper 或由客户自行决定直接使用的资源。

我在下面展示了一个我想出的简化示例。在函数`DoSomethingElse()`中，您可以看到我所追求的 - 我获得了对 Wrapper 的引用，并且在作用域的末尾，它的 dtor 被调用，并且资源被释放回池中。

我的问题与`Factory::GetResource()`. 这里介绍的简化版本只是每次都分配一个新的；我的实际实现检查池中是否存在可用资源（如果没有可用资源，则创建一个），将其标记为正在使用，并返回对它的引用。

我宁愿避免为资源定义正确的复制ctor，因此通过引用而不是按值返回。资源保证比调用者更长寿，并且控制器在应用程序的整个生命周期中保持所有权 - 它们不会交给客户端代码进行生命周期管理。当然，如果客户要求直接引用，即没有 Wrapper，所有的赌注都没有了。

这个设计好听吗？使用 shared_ptr 会更好吗？还是其他一些机制/设计？

谢谢你的时间。

```
#include <iostream>
#include <vector>

using namespace std;

static int seq = 0; // POOR MAN'S SEQUENCE FOR INSTANCE IDs

class Resource
{
public:
    Resource() : id(seq++) { cout << "Resource ctor: " << id << endl; }
    ~Resource() { cout << "Resource dtor: " << id << endl; }
private:
    int id;
};

class Wrapper
{
public:
    // ON ACTUAL IMPLEMENTATION, NOTIFY THE CONTROLLER OF THE RELEASE
    ~Wrapper()
        { cout << "Wrapper dtor: " << id << "Welease Bwian! Ee, I mean, the wesouwce" << endl; }

    explicit Wrapper(Resource& r) : id(seq++), res(r)
      { cout << "Wrapper ctor: " << id << endl; }

    int getID() const { return id; }
private:
    int id;
    Resource& res;
};

class Controller
{
public:
    ~Controller() { for (auto r : allres) delete r; }
    Resource& GetResource();
private:
    // SIMPLIFIED. I'M USING Boost PTR CONTAINER
    vector<Resource *> allres;
};

// SIMPLIFIED. IT WOULD ACTUALLY GET A RESOURCE FROM THE POOL
Resource& Controller::GetResource()
{
    Resource* newres = new Resource();
    allres.push_back(newres);

    return *(newres);
}

// SIMULATE GLOBAL CONTEXT
Controller& GetController()
{
    static Controller f;
    return f;
}

void DoSomething(Wrapper& wr)
{
    cout << "DoSth INI" << endl;
    cout << wr.getID() << endl;
    cout << "DoSth END" << endl;
}

void DoSomethingElse()
{
    cout << "DoSthElse INI" << endl;
    Wrapper w(GetController().GetResource());
    DoSomething(w);
    cout << "DoSthElse END" << endl;
}

int main(int argc, char *argv[])
{
    cout << "main INI" << endl;
    cout << "Calling DoSthElse" << endl;
    DoSomethingElse();
    cout << "Called DoSthElse" << endl;
    cout << "main END" << endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:02:16.293

RAII 真的是关于所有权。谁拥有该对象，一旦他们放弃对它的所有权，他们需要做什么？

您描述的情况是资源真正*归*控制器所有。资源对象的生命周期由控制器管理。

资源的用户实际上只是“锁定”了资源，将其标记为“正在使用”，但他们并不拥有它的所有权。它们不会影响它的寿命。（你可以说他们拥有一把锁，*那*就是他们需要管理的资源）

所以我建议公开类似 a 的东西`std::unique_ptr<Resource>`，它是用自定义删除器创建的。（并且可以通过`controller.getResource()`调用的值返回

用户可以随心所欲地使用`unique_ptr`它：它不可复制，但可以移动，一旦超出范围，它就会调用其自定义删除器，在 Controller 中将其标记为“未使用”，有效地将其返回到池中

这样你就可以按值返回一个对象，这对客户端来说很好而且简单，并且你完全避免暴露“未包装”的资源对象：客户端总是将它们包装在 a`unique_ptr`中，这消除了很多潜在的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:54:54.527

请注意，在您当前的代码中，控制器无法判断调用者何时使用包装器/资源完成。这意味着当您开始实施 Controller::GetResource 时，控制器将无法知道它是否可以返回先前创建的资源。

通常这样的设计包括在 Wrapper 析构函数中调用的 Controller::ReleaseResource。这意味着当 Wrapper 被构建时它会获得一个资源，然后当它被破坏时它会释放该资源。这正是 RAII。

# android - 在安卓上使用 pjsua

> ID：11638040
> 
> 赞同：3
> 
> 时间：2012-07-24T19:34:01.860
> 
> 标签：android, c, android-ndk, pjsip

向大家问好！

我正在尝试使用以下分支编译 pjsua： [http](http://svn.pjsip.org/repos/pjproject/branches/projects/android/) ://svn.pjsip.org/repos/pjproject/branches/projects/android/ 。我尝试对我的 Android-sdk 模拟器进行推送（adb push pjsua /data/local/），但是当我尝试通过 adb shell 执行它时，Android LogCat 给了我以下 SIGFAULT 错误：在哪里我错了吗？提前致谢。

```
F/libc    (  464): Fatal signal 11 (SIGSEGV) at 0x000000f0 (code=1)
I/DEBUG   (   33): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
I/DEBUG   (   33): Build fingerprint:'generic/sdk/generic:4.0.3/MR1/237985:eng/test-keys'
I/DEBUG   (   33): pid: 464, tid: 464  >>> ./pjsua-arm-unknown-linux-androideabi <<<
I/DEBUG   (   33): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 000000f0
I/DEBUG   (   33):  r0 ffffffff  r1 beef7c30  r2 beef7c30  r3 ffffffff
I/DEBUG   (   33):  r4 00000000  r5 00000000  r6 00000000  r7 00000000
I/DEBUG   (   33):  r8 00000000  r9 00000000  10 00000000  fp 00000000
I/DEBUG   (   33):  ip 4003c4b9  sp beef7c60  lr 4003c4b1  pc b000469a cpsr 00000030
I/DEBUG   (   33):  d0  00000000bd6bc8e3  d1  0000000000000000 
I/DEBUG   (   33):  d2  0000000000000000  d3  0000000000000000
I/DEBUG   (   33):  d4  0000000000000000  d5  41c8f0a46e800000
I/DEBUG   (   33):  d6  3f50624dd2f1a9fc  d7  c18af9670cce266f
I/DEBUG   (   33):  d8  0000000000000000  d9  0000000000000000
I/DEBUG   (   33):  d10 0000000000000000  d11 0000000000000000
I/DEBUG   (   33):  d12 0000000000000000  d13 0000000000000000
I/DEBUG   (   33):  d14 0000000000000000  d15 0000000000000000
I/DEBUG   (   33):  scr 00000010
I/DEBUG   (   33):
I/DEBUG   (   33):          #00  pc b000469a  /system/bin/linker
I/DEBUG   (   33):          #01  pc 000264ac  /system/lib/libc.so (__set_errno)
I/DEBUG   (   33):
I/DEBUG   (   33): code around pc:
I/DEBUG   (   33): b0004678 95004840 44784a40 4d414b40 447b447a @H..@JxD@KAMzD{D
I/DEBUG   (   33): b0004688 682d447d f44f9103 95017140 f0009402 }D-h..O.@q......
I/DEBUG   (   33): b0004698 f8d4ff67 b10330f0 f8d44798 b17000e0 g....0...G....p.
I/DEBUG   (   33): b00046a8 10e4f8d4 f7ff2200 2000f9b5 f8d4e007 ....."..... ....
I/DEBUG   (   33): b00046b8 f04f20a8 f04230ff f8c40102 b00710a8 .O..0B......... 
I/DEBUG   (   33):
I/DEBUG   (   33): code around lr:
I/DEBUG   (   33): 4003c490 f240b507 9300736c 33fff04f 466b9301 ..@.ls..O..3..kF
I/DEBUG   (   33): 4003c4a0 fd80f7ff bf00bd0e 4604b510 fe90f7ec ...........F....
I/DEBUG   (   33): 4003c4b0 f04f6004 bd1030ff 0ffff110 db02b510 .`O..0..........
I/DEBUG   (   33): 4003c4c0 f7ff4240 bd10fff1 48214603 4478b5f0 @B.......F!H..xD
I/DEBUG   (   33): 4003c4d0 b0976800 68022150 4620ac01 92154e1d .h..P!.h.. F.N..
I/DEBUG   (   33):
I/DEBUG   (   33): stack:
I/DEBUG   (   33):     beef7c20  00000000
I/DEBUG   (   33):     beef7c24  4003c4c7  /system/lib/libc.so
I/DEBUG   (   33):     beef7c28  00000000
I/DEBUG   (   33):     beef7c2c  4002f477  /system/lib/libc.so
I/DEBUG   (   33):     beef7c30  b00144c4
I/DEBUG   (   33):     beef7c34  00000000
I/DEBUG   (   33):     beef7c38  10000000
I/DEBUG   (   33):     beef7c3c  00000000
I/DEBUG   (   33):     beef7c40  00000000
I/DEBUG   (   33):     beef7c44  4002f49b  /system/lib/libc.so
I/DEBUG   (   33):     beef7c48  00000000
I/DEBUG   (   33):     beef7c4c  0000c090 /data/local/pjsua-arm-unknown-linux-androideabi
I/DEBUG   (   33):     beef7c50  b00144c4
I/DEBUG   (   33):     beef7c54  0000c070 /data/local/pjsua-arm-unknown-linux-androideabi
I/DEBUG   (   33):     beef7c58  df0027ad
I/DEBUG   (   33):     beef7c5c  00000000
I/DEBUG   (   33): #01 beef7c60  00000001
I/DEBUG   (   33):     beef7c64  beef7d47  [stack]
I/DEBUG   (   33):     beef7c68  00000000
I/DEBUG   (   33):     beef7c6c  beef7d6d  [stack]
I/DEBUG   (   33):     beef7c70  beef7d82  [stack]
I/DEBUG   (   33):     beef7c74  beef7d92  [stack]
I/DEBUG   (   33):     beef7c78  beef7dba  [stack]
I/DEBUG   (   33):     beef7c7c  beef7df7  [stack]
I/DEBUG   (   33):     beef7c80  beef7e10  [stack]
I/DEBUG   (   33):     beef7c84  beef7e2a  [stack]
I/DEBUG   (   33):     beef7c88  beef7f55  [stack]
I/DEBUG   (   33):     beef7c8c  beef7f68  [stack]  
I/DEBUG   (   33):     beef7c90  beef7f83  [stack]
I/DEBUG   (   33):     beef7c94  beef7fa0  [stack]
I/DEBUG   (   33):     beef7c98  beef7fb3  [stack]
I/DEBUG   (   33):     beef7c9c  00000000
I/DEBUG   (   33):     beef7ca0  00000010
I/DEBUG   (   33):     beef7ca4  000030d7 
```

**编辑 1**：我必须说我已经知道诸如 csipsimple 之类的解决方案。无论如何，我有兴趣用 Android-ndk 的工具解决我的交叉编译问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:16:10.047

为什么不尝试使用安卓设备呢？我在 android 网站上表示，android 模拟器通常与 sip 堆栈不兼容。

# jquery - 使用 val() 和 prop 在多选中取消选择值

> ID：11638051
> 
> 赞同：4
> 
> 时间：2012-07-24T19:34:59.803
> 
> 标签：jquery

看看这个小提琴：http: [//jsfiddle.net/imparator/XPGa8/1/](http://jsfiddle.net/imparator/XPGa8/1/)

首先，我选择选择列表的值“Volvo”：

```
$("select").val('volvo'); 
```

后来，当我尝试像这样取消选择它时：

```
$("select").val('volvo').prop("selected", false); 
```

正如您从小提琴中看到的那样，值 volvo 仍然保持选中状态。

如何使用 jquery 取消选择多选中的值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T19:36:36.690

采用`$("select option[value='volvo']").prop("selected", false);`

**[jsFiddle 示例](http://jsfiddle.net/j08691/XPGa8/3/)**

此外，您应该像这样将一个选项标记为选中：

```
$("select option[value='volvo']").prop("selected", true);
$("select option[value='audi']").prop("selected", true); 
```

# php - 管理具有不同身份验证级别的 API 请求

> ID：11638052
> 
> 赞同：1
> 
> 时间：2012-07-24T19:35:04.113
> 
> 标签：php, api, codeigniter, rest, oauth

我正在构建一个 RESTful API，试图了解如何使用不同级别的身份验证访问 API。

这些是我的场景：

a) Web 应用程序“A”处理所有帐户和计费。它应该能够调用自己的 API。

b) Web 应用程序“B”（受 Web 应用程序“A”信任，反之亦然）应该能够对 Web 应用程序“A”进行 API 调用，以验证和创建新帐户。“A”管理和存储所有帐户。

c) Web 应用程序“B”有自己的 API，也应该能够调用自己的 API。“B”管理和存储所有用户（与“A”中的帐户相关联）。

d) 第三方应用程序“C”应该能够代表“B”的用户对应用程序“B”进行 API 调用。

所以......这是我的问题：

1.  您如何保护和验证从应用程序对其自身 API 的 API 调用？你会如何调用自己的 API？就像外部应用程序一样？

2.  [以与外部应用程序相同的方式调用 API 方法（比如运行 CURL GET https://api.example.com/accounts](https://api.example.com/accounts) ） ，性能会不会很差？还是应该以不同的方式调用内部 API？（对不起，如果这个问题很愚蠢）

3.  如果“B”信任“A”，反之亦然：我是否需要任何身份验证或授权？由于不涉及用户，只涉及帐户和业务逻辑。应用程序“B”只需要告诉“A”应该对哪个帐户进行操作。但基本上允许为任何帐户执行所有这些任务。可以简单地通过 HTTPS 发送“B”的 client_key 和 client_secret 以及请求参数吗？

4.  我想我真的只需要场景 d) 的 oAuth，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:00:34.787

> 1.  您如何保护和验证从应用程序对其自身 API 的 API 调用？你会如何调用自己的 API？就像外部应用程序一样？

**我不会使用 curl 来访问 API，使用 codeigniter 您可以将 API 创建为库并创建一个调用每个库方法的控制器。这将允许您生成可通过控制器通过 Web 访问的 API，还可以加载库并直接访问方法。**

> 1.  [以与外部应用程序相同的方式调用 API 方法（比如运行 CURL GET https://api.example.com/accounts](https://api.example.com/accounts) ） ，性能会不会很差 ？还是应该以不同的方式调用内部 API？（对不起，如果这个问题很愚蠢）

**是的，就像我在#1 中提到的那样。**

> 1.  如果“B”信任“A”，反之亦然：我是否需要任何身份验证或授权？由于不涉及用户，只涉及帐户和业务逻辑。应用程序“B”只需要告诉“A”应该对哪个帐户进行操作。但基本上允许为任何帐户执行所有这些任务。可以简单地通过 HTTPS 发送“B”的 client_key 和 client_secret 以及请求参数吗？

**如果您通过 http 从外部访问，我建议您使用 API 密钥或某种令牌。如果您正在执行我在 #1 中提到的控制器/库路由。那就不要。**

> 1.  我想我真的只需要场景 d) 的 oAuth，对吗？

**oAuth 或 API 密钥系统，您手动向用户提供密钥。**

# qt4 - 如何使用 QWizard 和 QWizardPage 在切换到特定页面时执行函数

> ID：11638060
> 
> 赞同：1
> 
> 时间：2012-07-24T19:35:23.783
> 
> 标签：qt4, wizard

我正在创建一个向导程序（如可安装程序），现在我想在单击`next`按钮时执行一个功能，假设我在页面`Info`中，下一页是`register`，现在如果我单击`next`按钮，它应该执行一个功能我定义。我怎么能这样做？

# haskell - 无法构造无限类型 - 实现尾递归阶乘计算器

> ID：11638061
> 
> 赞同：2
> 
> 时间：2012-07-24T19:35:29.933
> 
> 标签：haskell, recursion, tail-recursion, factorial

我正在尝试实现阶乘的尾递归版本：

```
let{factorial 0 n = n; factorial x n =  factorial (x-1, n * x)} 
```

我明白了：

```
<interactive>:1:41:
Occurs check: cannot construct the infinite type: t1 = t1 -> t1
In the return type of a call of `factorial'
In the expression: factorial (x - 1, n * x)
In an equation for `factorial':
    factorial x n = factorial (x - 1, n * x)

<interactive>:1:52:
Occurs check: cannot construct the infinite type: t0 = (t0, t1)
In the first argument of `(-)', namely `x'
In the expression: x - 1
In the first argument of `factorial', namely `(x - 1, n * x)'

<interactive>:1:61:
Occurs check: cannot construct the infinite type: t1 = (t0, t1)
In the second argument of `(*)', namely `x'
In the expression: n * x
In the first argument of `factorial', namely `(x - 1, n * x)' 
```

我如何在这里构造一个无限类型？（使用 GHCi 7.0.1）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T19:37:30.570

我不是一个强大的 Haskell 程序员，但我认为你想重写

```
factorial x n =  factorial (x-1, n * x) 
```

作为

```
factorial x n =  factorial (x-1) (n * x) 
```

因为`(x-1, n * x)`是一对类型，这不是你想要的。

希望这可以帮助！

# .net - WCF 5.x DeleteLink 从派生类型导航属性

> ID：11638063
> 
> 赞同：0
> 
> 时间：2012-07-24T19:35:31.903
> 
> 标签：.net, wcf, navigation, odata, derived

我正在使用最新的 WCF DataServices 5.1rc。我知道派生类型导航属性应该是固定和支持的。但是，在尝试为该属性删除链接时，我遇到了以下问题。

我有一个从 CategoryBase 类继承的 Category 类。Category 类有一个名为 Attributes 的属性，我正在尝试从 Category 类中删除其中一个属性并得到一个异常“找不到段 'Attributes' 的资源（基于 DataServiceContext 的 Web 服务公开了“public IQueryable Categories”属性） .

在使用提琴手检查请求后，我发现了以下请求：

```
DELETE http://somesite/DataServices/CatalogDataService.svc/CategoryBases('123')/$links/Attributes('23') 
```

这是不正确的，因为 CategoryBases 不包含属性，它应该是这样的：

```
http://somesite/DataServices/CatalogDataService.svc/CategoryBases('123')/MyNamespace.Data.Catalogs.Category/$links/Attributes('23') 
```

我查看了 WCF 的源代码，发现生成在 EntityDescriptor.cs 类中，无法覆盖。在最新的 WCF 中这仍然是一个问题还是我做错了什么？

我知道我可以将属性移动到 CategoryBase 来解决问题，但宁愿避免这种情况。

我还使用以下方法将对象自己附加到客户端上（当作为查询的结果附加对象时，它工作正常）：

```
client.AttachTo("CategoryBases", category); 
```

查看 DataServiceContext.Entities[0].ServerTypeName 时为空，但是当我从服务 DataServiceContext.Entities[0].ServerTypeName = 'MyNamespace.Data.Catalogs.Category' 接收类别时。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:59:19.567

这是 WCF 5.1rc 中已确认的错误。希望它在最终版本之前得到修复。

# c# - 当我将项目添加到字符串数组时，C# 退出方法

> ID：11638066
> 
> 赞同：0
> 
> 时间：2012-07-24T19:35:41.413
> 
> 标签：c#, winforms, arraylist

我很难理解为什么当我将一个项目添加到我的字符串数组“internalDives”时，该方法退出并且没有显示调试错误。

请问，我在这里做错了什么？

```
private void GridDataConnection()
{
    using (SqlCeConnection conn = new SqlCeConnection(ConnectionString))
    {
        conn.Open();

        using (SqlCeCommand command = new SqlCeCommand("SELECT id,divelocation,divedate,diveduration FROM loggeddives", conn))
        {
            SqlCeDataReader readDiveResult = command.ExecuteReader();

            var diveList = new List<string[]>();

            while (readDiveResult.Read())
            {
                string[] internalDives = new string[4];

                internalDives[0] = readDiveResult.GetString(0);
                internalDives[1] = readDiveResult.GetString(1);
                internalDives[2] = readDiveResult.GetString(2);
                internalDives[3] = readDiveResult.GetString(3);

                diveList.Add(internalDives);

                i++;
            }
        }

        conn.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:46:08.477

您确定所有列类型都是字符串吗？GetString 不进行任何转换，并假设所有列都是字符串类型。我建议您使用 try catch 语句来捕获任何 `InvalidCastException`.

还要检查所有值是否都被实例化。您可以使用 IsDBNull 方法来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:42:16.300

正如 mservidio 在评论中提到的那样，您应该做的第一件事绝对是捕获正在引发的异常。

当您这样做时，您很可能会发现您对 GetString 的调用之一引发了 IndexOutOfBoundsException，因此请准备好仔细检查您的代码并查看读取管道中的内容。它可能不是你想的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:42:59.670

我猜您的数据库中有空值，因此，当您尝试读取其中一列时，您会收到错误消息：“数据为空。无法在空值上调用此方法或属性”。您必须调用 IsDBNull 方法来检查该值是否为空，然后读取该值。

试试这个代码

```
private void GridDataConnection()
{
    using (SqlCeConnection conn = new SqlCeConnection(ConnectionString))
    {
        conn.Open();

        using (SqlCeCommand command = new SqlCeCommand("SELECT id,divelocation,divedate,diveduration FROM loggeddives", conn))
        {
            SqlCeDataReader readDiveResult = command.ExecuteReader();

            var diveList = new List<string[]>();

            while (readDiveResult.Read())
            {
                string[] internalDives = new string[4];

                internalDives[0] = readDiveResult.IsDBNull(0) ? "": readDiveResult.GetString(0);
                internalDives[1] = readDiveResult.IsDBNull(1) ? "": readDiveResult.GetString(1);
                internalDives[2] = readDiveResult.IsDBNull(2) ? "": readDiveResult.GetString(2);
                internalDives[3] = readDiveResult.IsDBNull(3) ? "": readDiveResult.GetString(3);

                diveList.Add(internalDives);

                i++;
            }
        }

        conn.Close();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T19:50:51.657

我通常会先验证从查询返回的信息，然后再尝试将其添加到数组或列表中。快速检查以验证所有值是否都是字符串，甚至可以通过计数来验证是否有 4 个值。正如其他人所提到的，try catch 非常有帮助。您还可以创建快速错误日志以将任何异常转储到临时文件中。

第一个回答要温柔！

# python - python和django：如何在键上打印具有特定规则的字典

> ID：11638071
> 
> 赞同：0
> 
> 时间：2012-07-24T19:36:09.433
> 
> 标签：python, django, sorting, dictionary

我建立了一个这样的数据结构：

```
{ level: [ event1, event2... ] } 
```

`level`是以下之一：C（代表临界）、H（代表高）、M（代表中）、L（代表低）。

我想根据级别在 django 模板中打印所有事件，首先是 C(critical)，然后是 H(high)、M(medium)、L(low)。但是，默认情况下，这就是我所拥有的：

```
{% for level, events in dictionary.items %}
    {% for event in events %}
        do something with level, event
    {% endfor %}
{% endfor %} 
```

我首先打印出 H(high)，然后是 C(critical)，等等。我想问：如何按特定顺序循环字典？还是应该将其转换为其他数据结构？谢谢。

**编辑：** 我认为史蒂夫的方法效果很好。它将字典转换为列表，字典的每个条目变成一个元组：

```
[ (level1: [event1, event2 ...]), (level2: [event3, event4 ...]) ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:39:06.217

字典没有顺序，因此您需要先将它们转换为元组列表：

对它们进行如下排序：

```
level_values = {'C':0, 'H':1, 'M':2, 'L':3}
sorted_dictionary = sorted(dictionary.items(), key=lambda x: level_values[x[0]]) 
```

然后传入你的 sorted_dictionary 变量，并以与以前相同的方式循环它：

```
{% for level, events in sorted_dictionary %}
    {% for event in events %}
        do something with level, event
    {% endfor %}
{% endfor %} 
```

**重要声明的进一步解释：**

```
sorted_dictionary = sorted(dictionary.items(), key=lambda x: level_values[x[0]]) 
```

`dictionary.items()`给你一个元组列表，代表你的原始字典。因此，而不是像这样的字典：

```
{'A':[1,2,3], 'B',[4,5,6]} 
```

if 为字典中的每个键/值对提供元组列表：

```
[('A', [1,2,3]), ('B', [4,5,6])] 
```

您可以将元组视为无法更改的列表（据说它是“不可变的”）。

然后将这个元组列表传递给`sorted`函数。对于列表中的每个元组，`sorted()`调用我们提供的 lambda 表达式来请求排序键。我们的 lambda 表达式只取元组中的第一个元素（即严重性值），然后访问`level_values`字典为其查找排序值。

您可以逐个元组地遍历结果`sorted_dictionary`（这是一个元组列表）：

```
for value in sorted_dictionary:
     print value[0]
     print str(value[1]) 
```

或者 Python 会让您自动将 tuble 拆分为单独的变量：

```
for severity, events in sorted_dictionary:
     print severity
     print str(events) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:42:30.303

您需要将其转换为其他数据结构。最简单的方法是，而不是字典，将一个已经排序的列表列表传递到您的模板中，`[low_levels, medium_levels, high_levels]`或者您喜欢它，然后迭代这些列表。如果可以，您不妨将其用作事件的表示形式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T19:42:35.877

Python`dict`没有顺序。您需要将其转换为列表，然后对其进行排序。

```
converted = [
    ('C', mydict['C']),
    ('H', mydict['H']),
    ('M', mydict['M']),
    ('L', mydict['L']),
] 
```

然后在模板中：

```
{% for level, events in converted %}
    {% for event in events %}
        do something with level, event
    {% endfor %}
{% endfor %} 
```

或者，使用您的原始数据结构，只需遍历每个类别：

```
{% for event in dictionary.C %}
    do something with event, this is for Critical
{% endfor %}
{% for event in dictionary.H %}
    do something with event, this is for High
{% endfor %}
{% for event in dictionary.M %}
    do something with event, this is for Medium
{% endfor %}
{% for event in dictionary.L %}
    do something with event, this is for Low
{% endfor %} 
```

# sql - 更新日期异常

> ID：11638081
> 
> 赞同：1
> 
> 时间：2012-07-24T19:36:51.593
> 
> 标签：sql, vba, ms-access

当我向表单添加一些功能时，它需要我更新一行的日期。我的更新查询被构建为：

```
 "update tblReview set tblreview.[reviewDate] = me.currdate WHERE empID = '"& me.empid & "';" 
```

（基本上）它被打印出来是

```
 "Update tblReview set tblreview.[reviewdate] = 7/24/2012 WHERE empID = '1';" 
```

酷，这就是我想要的。现在让我们看看我的数据

```
 *empId*       *reviewDate*
    1             12/30/1899 
```

什么？！为什么这样做？好的，当然，我可能应该在我的日期周围加上“#”字符来修复它。但是为什么它会更新到这个荒谬的值而不是给我一些错误呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T19:38:41.210

那应该是：

```
"update tblReview set tblreview.[reviewDate] =#" _
& Format( me.currdate,"yyyy/mm/dd") _
& "# WHERE empID = " & me.empid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:39:12.193

您尝试将其设置为 7 除以 24 除以 2012 天。

你需要：

```
"update tblReview set tblreview.[reviewDate] = '" & _
    Format(me.currdate, "yyyy-mm-dd") & "' WHERE empID = " & me.empid & " ;" 
```

# wpf - Snapping a SurfaceListBox

> ID：11638084
> 
> 赞同：3
> 
> 时间：2012-07-24T19:37:02.413
> 
> 标签：wpf, pixelsense

I'm looking to create a scrolling surfacelistbox which automatically snaps into a position after a drag is finished so that the center item on the screen is centered itself in the viewport.

I've gotten the center item, but now as usual the way that WPF deals with sizes, screen positions, and offsets has me perplexed.

At the moment I've chosen to subscribe to the SurfaceScrollViewer's ManipulationCompleted event, as that seems to consistently fire after I've finished a scroll gesture (whereas the ScrollChanged event tends to fire early).

```
void ManipCompleted(object sender, ManipulationCompletedEventArgs e)
{
    FocusTaker.Focus(); //reset focus to a dummy element
    List<FrameworkElement> visibleElements = new List<FrameworkElement>();
    for (int i = 0; i < List.Items.Count; i++)
    {
        SurfaceListBoxItem item = List.ItemContainerGenerator.ContainerFromIndex(i) as SurfaceListBoxItem;
        if (ViewportHelper.IsInViewport(item) && (List.Items[i] as string != "Dummy"))
        {
            FrameworkElement el = item as FrameworkElement;
            visibleElements.Add(el);
        }
    }

    int centerItemIdx = visibleElements.Count / 2;
    FrameworkElement centerItem = visibleElements[centerItemIdx];

    double center = ss.ViewportWidth / 2;

    //ss is the SurfaceScrollViewer
    Point itemPosition = centerItem.TransformToAncestor(ss).Transform(new Point(0, 0));

    double desiredOffset = ss.HorizontalOffset + (center - itemPosition.X);

    ss.ScrollToHorizontalOffset(desiredOffset); 

    centerItem.Focus(); //this also doesn't seem to work, but whatever.
} 
```

The list snaps, but where it snaps seems to be somewhat chaotic. I have a line down the center of the screen, and sometimes it looks right down the middle of the item, but other times it's off to the side or even between items. Can't quite nail it down, but it seems that the first and fourth quartile of the list work well, but the second and third are progressively more off toward the center.

Just looking for some help on how to use positioning in WPF. All of the relativity and the difference between percentage-based coordinates and 'screen-unit' coordinates has me somewhat confused at this point.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T17:45:19.733

After a lot of trial and error I ended up with this:

```
void ManipCompleted(object sender, ManipulationCompletedEventArgs e)
{
    FocusTaker.Focus(); //reset focus
    List<FrameworkElement> visibleElements = new List<FrameworkElement>();
    for (int i = 0; i < List.Items.Count; i++)
    {
        SurfaceListBoxItem item = List.ItemContainerGenerator.ContainerFromIndex(i) as SurfaceListBoxItem;
        if (ViewportHelper.IsInViewport(item))
        {
            FrameworkElement el = item as FrameworkElement;
            visibleElements.Add(el);
        }
    }

    Window window = Window.GetWindow(this);

    double center = ss.ViewportWidth / 2;

    double closestCenterOffset = double.MaxValue;
    FrameworkElement centerItem = visibleElements[0];
    foreach (FrameworkElement el in visibleElements)
    {
        double centerOffset = Math.Abs(el.TransformToAncestor(window).Transform(new Point(0, 0)).X + (el.ActualWidth / 2) - center);
        if (centerOffset < closestCenterOffset)
        {
            closestCenterOffset = centerOffset;
            centerItem = el;
        }
    }                        

    Point itemPosition = centerItem.TransformToAncestor(window).Transform(new Point(0, 0));

    double desiredOffset = ss.HorizontalOffset - (center - itemPosition.X) + (centerItem.ActualWidth / 2);

    ss.ScrollToHorizontalOffset(desiredOffset);

    centerItem.Focus();
} 
```

This block of code effectively determines which visible list element is overlapping the center line of the list and snaps that element to the exact center position. The snapping is a little abrupt, so I'll have to look into some kind of animation, but otherwise I'm fairly happy with it! I'll probably use something from here for animations: [http://blogs.msdn.com/b/delay/archive/2009/08/04/scrolling-so-smooth-like-the-butter-on-a-muffin-how-to-animate-the-horizontal-verticaloffset-properties-of-a-scrollviewer.aspx](http://blogs.msdn.com/b/delay/archive/2009/08/04/scrolling-so-smooth-like-the-butter-on-a-muffin-how-to-animate-the-horizontal-verticaloffset-properties-of-a-scrollviewer.aspx)

Edit: Well that didn't take long. I expanded the ScrollViewerOffsetMediator to include HorizontalOffset and then simply created the animation as suggested in the above post. Works like a charm. Hope this helps someone eventually.

Edit2: Here's the full code for SnapList:

[SnapList.xaml](http://pastebin.com/gqEkt2vJ)

[SnapList.xaml.cs](http://pastebin.com/pgYnk05F)

Note that I got pretty lazy as this project went on an hard-coded some of it. Some discretion will be needed to determine what you do and don't want from this code. Still, I think this should work pretty well as a starting point for anyone who wants this functionality.

The code has also changed from what I pasted above; I found that using Windows.GetWindow gave bad results when the list was housed in a control that could move. I made it so you can assign a control for your movement to be relative to (recommended that be the control just above your list in the hierarchy). I think a few other things changed as well; I've added a lot of customization options including being able to define a custom focal point for the list.

# c# - PHP MD5 与 C# MD5 不匹配

> ID：11638089
> 
> 赞同：1
> 
> 时间：2012-07-24T19:37:25.690
> 
> 标签：c#, php, cryptography

我在 C# 中有一个哈希方法，如下所示：

```
MD5CryptoServiceProvider md5 = new MD5CryptoServiceProvider();

byte[] raw_input  = Encoding.UTF32.GetBytes("hello");
byte[] raw_output = md5.ComputeHash(raw_input);

string output = "";
foreach (byte myByte in raw_output)
    output += myByte.ToString("X2");

return output; 
```

如何在 PHP 中实现它？执行以下操作会产生不同的哈希摘要...

```
$output = hash('md5', 'hello'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T19:40:45.453

您需要找出 PHP 使用哪种编码将您的字符串转换为文本。它*不太*可能使用 UTF-32。它很可能使用平台默认编码，或者可能是 UTF-8。

```
using (MD5 md5 = MD5.Create())
{
    byte[] input = Encoding.UTF8.GetBytes("hello");
    byte[] hash = md5.ComputeHash(input);
    return BitConverter.ToString(hash).Replace("-", "");
} 
```

（这是将字符串视为二进制数据的语言/平台的问题 - 它并不清楚发生了什么。这里*必须*转换为字节，因为 MD5 是为字节定义的，而不是 Unicode字符。在 C# 代码中，您正在显式执行此操作……在 PHP 中，它是隐式的且文档记录不充分。）

编辑：如果你必须改变 PHP，你可以*试试*这个：

```
$text = mb_convert_encoding($text, "UTF-32LE");
$output = md5($text) 
```

这取决于PHP是否支持UTF-32...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T19:41:47.483

**PHP**

此 PHP 代码将执行以下操作：

```
<?php
$str = "admin";
$strUtf32 = mb_convert_encoding($str, "UTF-32LE");
echo md5($strUtf32);
?> 
```

此代码输出“1e3fcd02b1547f847cb7fc3add4484a5”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T19:53:41.280

当您申请`md5`时`Encoding.UTF32.GetBytes("admin");`，与

```
echo hash( "md5","a\0\0\0d\0\0\0m\0\0\0i\0\0\0n\0\0\0");
//1e3fcd02b1547f847cb7fc3add4484a5 
```

在 php.ini 中。

您需要在 PHP 中将字符串转换为 UTF32-LE：

```
echo md5( mb_convert_encoding( "admin", "UTF-32LE" ) );
//1e3fcd02b1547f847cb7fc3add4484a5 
```

# c - 获取浮点数的 IEEE 单精度位

> ID：11638091
> 
> 赞同：2
> 
> 时间：2012-07-24T19:37:27.280
> 
> 标签：c, embedded, xilinx

我需要将 IEEE 单精度浮点数写入特定地址的 32 位硬件寄存器。为此，我需要将浮点类型的变量转换为无符号整数。我可以得到这样的整数表示：

```
float a = 2.39;
unsigned int *target;
printf("a = %f\n",a);
target = &a;
printf("target = %08X\n",*target); 
```

返回：

```
a = 2.390000
target = 4018F5C3 
```

都好。但是，这会导致编译器警告“cast.c:12：警告：来自不兼容指针类型的赋值”

有没有其他方法可以做到这一点不会产生警告？这是针对特定硬件的，我不需要处理不同的字节序等，并且出于性能原因，我不想循环每个字符，因为其他一些问题往往会暗示。似乎您可以在 C++ 中使用 reinterpret_cast 但我使用的是 C。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T19:47:57.103

您可以将类型双关语与联合一起使用，

```
union {
    float f;
    uint32_t u;
} un;
un.f = your_float;
uint32_t target = un.u; 
```

得到位。或者你可以使用`memcpy`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:49:44.457

您可以创建一个`union`包含 float 和 unsigned int 的类型，将值存储到 float 成员中，然后从 int 中读取它，如下所示：

```
union reg_val
{
  float f_val;
  unsigned int i_val;
} myRegister;
myRegister.f_val = 2.39;
printf("target = %08X", myRegister.i_val); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:34:00.107

编辑：联合解决方案在我尝试过的任何地方都有效，但在某处我被指出标准表明它不必工作。请参阅下面的评论中的链接以找到更多关于此的信息（谢谢丹尼尔！）。应该工作或不应该工作我会小心使用它，我想字节序等也会涉及（双打分成字节等）。

另一种解决方案是虚拟 asm 函数。例如在手臂上：

```
.globl echo 
echo:
   bx lr

unsigned int echo ( float );
...
unsigned int ra; float f;
f=1.0;
ra=echo(f); 
```

需要进行一些拆卸，需要在没有 fpu 和/或使用 gprs 携带浮动的系统上。

如前所述，memcpy 是最干净、最可靠和可移植的解决方案（注意字节序）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T20:02:50.200

如果您试图简单地显示存储在内存中的*整数值*，请`float`尝试使用联合：

```
union {
    float a;
    unsigned int target;
} u; 
```

存储浮点值：

```
u.a = 2.39; 
```

打印浮点和整数值：

```
printf ("a = %f\n", u.a);
printf ("target = %08X\n", u.target); /* you could use %u to show decimal */ 
```

没有编译器警告。我在 Linux 上使用 GNU 编译器 (gcc)。请注意，这*不是*`target`指针；这就是工会的美丽（和丑陋）。;-)

# c - c、指针和 printf 的参数列表。使困惑

> ID：11638093
> 
> 赞同：2
> 
> 时间：2012-07-24T19:37:29.217
> 
> 标签：c, pointers, parameters

有人可以解释为什么当我运行下面的短代码片段时变量 test 的值没有改变吗？

```
#include <stdio.h>

int f1(char * foo) {
    *foo = 'a';
    return 0;
}

void main(void) {
    char test = 'n';
    printf("f1(&test)=%d.  test's new value? : %c", f1(&test), test);
} 
```

我知道我可能错过了一些非常简单的东西。我只是不明白为什么 test 在 f1() 中没有更改，因为我正在传递它的地址，对吗？为什么实际的函数调用发生在 printf() 的参数列表中很重要？

如果我像这样从 printf 参数列表中调用 f1() ：

```
#include <stdio.h>

int f1(char * foo) {
    *foo = 'a';
    return 0;
}

void main(void) {
    char test='n';
    int i;
    i = f1(&test);
    printf("f1(&test)=%d.  test's new value? : %c", i, test);
} 
```

事情按预期工作。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T19:39:18.730

评估函数调用的参数的顺序是未指定的。换句话说，您无法确定何时`f1(&test)`会被评估。

因此，在您的示例中，可能是在 :*之后*`f1(&test)`评估的：稍微违反直觉，您看不到该调用的副作用。但是如果您在通话后再次打印，您确实会看到它们。 *`test``test`*

 ** * *

底线，只是要小心有副作用的功能，你应该被设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T19:40:43.553

评估函数参数没有固定的顺序。您依赖于从左到右评估参数的想法，这是无法假设的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:44:23.033

只需更改进行函数调用的位置

```
#include <stdio.h>                  

int f1 (char* foo) {                
        *foo='a';                   
        return 0;                   
}                                   

int main(void)                      
{                                   
        char test='n';              
        f1(&test);                  
        printf("test=%c\n", test);  

        return 0;                   
} 
```*

# ruby-on-rails - 从 GridFS 检索文件并作为常规 IO::File 传递

> ID：11638095
> 
> 赞同：2
> 
> 时间：2012-07-24T19:37:34.533
> 
> 标签：ruby-on-rails, ruby, mongodb, gridfs

我正在使用 GridFs 存储 Excel 文件等。我想使用电子表格 gem 来解析这些。

我试过这个，但它（显然！）没有工作：

```
1.9.3p194 :036 > db = Mongo::Connection.new.db(Mongoid.database.name)
1.9.3p194 :037 > grid = Mongo::GridFileSystem.new(db)
1.9.3p194 :038 > f = grid.open('test1.xls', 'r')
 => #<GridIO _id: 500ef7cdc5ebb515c9000005>
1.9.3p194 :039 > Spreadsheet.open(f)
NoMethodError: undefined method `flush' for #<GridIO _id: 500ef7cdc5ebb515c9000005> 
```

您是否有一个很好的建议，将 GridIO 类“转换”或“包装”成一个类似 IO::File 的实例，以便我可以将 Excel 文件传递​​给电子表格打开方法。

电子表格打开方法采用 IO 实例或指定磁盘路径的字符串（后者在使用 GridFS 时无用）：

```
(Object) open(io_or_path, mode = "rb+", &block) 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T22:02:22.127

看起来这是 ruby​​ 驱动程序的所需功能，但尚不存在。 [https://jira.mongodb.org/browse/RUBY-368](https://jira.mongodb.org/browse/RUBY-368)

您可能可以将一个块传递给 Spreadsheet.open，正如 jira 票证中所建议的那样：

```
db = Mongo::Connection.new.db(Mongoid.database.name)
Spreadsheet.open('filename', 'w') do |f|
   gridfs = Mongo::GridFileSystem.new(db)
   gridfs_file = gridfs.open('test1.xls', 'r')
   f.write(gridfs_file.read()) until gridfs_file.eof?
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:06:46.830

艾米丽的指点很有帮助。暂时，最终使用了一个临时文件：

```
Tempfile.open(["test", ".xls"]) do |fh|
 gridfs = Mongo::GridFileSystem.new(Mongoid.database)
 gridfs_file = gridfs.open('test1.xls', 'r')
 fh.binmode
 fh.write(gridfs_file.read)
 @xls = Excel.new(fh)
 fh.close
end 
```

# java - 单击 JTable Cell 应将 Form 显示到容器中

> ID：11638097
> 
> 赞同：1
> 
> 时间：2012-07-24T19:37:38.933
> 
> 标签：java, swing, jtable, jpanel

我是 Java Swing 的新手，我正在尝试创建一个应用程序。

我有一个 MainApplication.java 文件，它扩展了 SingleFrameApplication，我在其中创建了一个名为 MainPanel 的 JPanel。此 MainPanel 有一个 AnimatingSplitPane，其 VERTICAL_SPLIT 名为 SplitPane。

在 SplitPane 的顶部，我添加了另一个名为 MainContainer 的 JPanel。在 SplitPane 的底部，我添加了一个名为 FormContainer 的 JPanel。MainContainer 加载另一个名为 DataSheetTable 的类（具有 JTable 的 JPanel）。

现在，当用户单击 DataSheetTable 的单元格时，我想将表单加载到 FormContainer 中。我不知道，我怎样才能做到这一点。

例如，DatasheetTable 有 Column1、Column2 和 Column3。当用户单击 Column1 的任何单元格时，我需要将 Form1 显示到 FormContanier 中。如果它点击 Column2 单元格，那么我需要将 Form2 显示到 FormContanier 中。

请用一些示例代码告诉我，我怎样才能实现将表单动态加载到 FormContainer。

！[先感谢您。]

**[问题的图像描述](http://i.stack.imgur.com/BokmS.png)**

这是 App.java 的示例代码

```
public class App extends SingleFrameApplication {
 @Override protected void startup() {
    configureDefaults();

     View view = getMainView();
     view.setComponent(createMainPanel());

    show(view);
 }

protected JComponent createMainPanel() {
    // Create main panel with demo selection on left and demo/source on right
    mainPanel = new JPanel();
    mainPanel.setLayout(new BorderLayout());

    // Create splitpane on right to hold demo and source code
    splitPane = new AnimatingSplitPane(JSplitPane.VERTICAL_SPLIT);
    mainPanel.add(splitPane, BorderLayout.CENTER);

    // Create panel to contain main panel
    mainContainer = new JPanel();
    splitPane.setTopComponent(mainContainer);

    DataSheetTable dataSheetTable = new DataSheetTable();
    mainContainer.add(dataSheetTable, BorderLayout.CENTER);
    dataSheetTable.start();

    formContainer = new JPanel(new BorderLayout());
    splitPane.setBottomComponent(formContainer);
    formContainer.add(new OrganizationForm());

    return mainPanel;
  }
} 
```

这是 DataSheetTable.java 文件的示例代码

```
public class DataSheetTable extends JPanel {

    ........
     controlPanel = createControlPanel();
     add(controlPanel, BorderLayout.NORTH);

    routingTable = new JTable(routingModel);

   .........

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:33:10.240

所以这是你拦截表格单元格点击事件的代码：

```
public class App extends JFrame {
    private DefaultTableModel model = new DefaultTableModel(new Object[][] {
            { "Value1", "Value2", "Value3" }, { "Object1", "Object2", "Object3" } }, new String[] {
            "Column1", "Column2", "Column3" });
    private JTable table = new JTable(model);
    private JPanel bottomPanel;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                App a = new App();
                a.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                a.setLocationRelativeTo(null);
                a.setVisible(true);
            }
        });
    }

    public App() {
        JSplitPane pane = new JSplitPane();
        pane.setOrientation(SwingConstants.HORIZONTAL);
        pane.setLeftComponent(new JScrollPane(table));
        bottomPanel = new JPanel();
        bottomPanel.add(new JLabel("properties for column will be here"));
        pane.setRightComponent(bottomPanel);
        add(pane);

        ListSelectionListener listener = new ListSelectionListener() {
            public void valueChanged(ListSelectionEvent e) {
                int column = table.getSelectedColumn();
                int row = table.getSelectedRow();
                if(row != -1 && column != -1) {
                    bottomPanel.removeAll();
                    //Here you add your components/create appropriate panel
                    //e.g. bottomPanel.add(new PropertiesPanelForValue1(...));
                    bottomPanel.add(new JLabel("User selected column " + column + " and row " + row
                            + " with value: '" + table.getValueAt(row, column) + "'"));
                    bottomPanel.revalidate();
                }
            }
        };
        table.getSelectionModel().addListSelectionListener(listener);
        table.getColumnModel().getSelectionModel().addListSelectionListener(listener);

        pack();

        pane.setDividerLocation(0.3);
        setSize();
    }

    private void setSize() {
        double widthPart = 0.3;
        double heightPart = 0.5;
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        int width = (int) (screenSize.getWidth() * widthPart);
        int height = (int) (screenSize.getHeight() * heightPart);
        setSize(width, height);
        Dimension windowSize = getSize();
        int x = (int) ((screenSize.getWidth() - windowSize.getWidth()) / 2);
        int y = (int) ((screenSize.getHeight() - windowSize.getHeight()) / 2);
        setLocation(x, y);
    }
} 
```

**编辑** 查看您的更新：只需将`DataSheetTable`构造函数引用添加到您的`FormContainer`：

```
formContainer = new JPanel(new BorderLayout());
splitPane.setBottomComponent(formContainer);
formContainer.add(new OrganizationForm());

DataSheetTable dataSheetTable = new DataSheetTable(formContainer);
mainContainer.add(dataSheetTable, BorderLayout.CENTER);
dataSheetTable.start(); 
```

并`DataSheetTable`添加监听器：

```
public class DataSheetTable extends JPanel {

public DataSheetTable(final FormContainer formContainer) {
........
 controlPanel = createControlPanel();
 add(controlPanel, BorderLayout.NORTH);

routingTable = new JTable(routingModel);
ListSelectionListener listener = new ListSelectionListener() {...};
routingTable.getSelectionModel().addListSelectionListener(listener);
              routingTable.getColumnModel().getSelectionModel().addListSelectionListener(listener);

.........
}

} 
```

# apache - Apache htaccess 301 重定向

> ID：11638098
> 
> 赞同：1
> 
> 时间：2012-07-24T19:37:43.077
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

我想将 url 从 article.php?id=123 重写为 article/123

我添加了以下规则，它工作正常

```
 RewriteRule ^article/(.*) /article.php?id=$1 [PT] 
```

我还想添加一个 301 重定向规则，让搜索引擎知道 article.php?id=123 应该移动到 article/123。我添加了以下规则，但似乎不起作用。

```
 RewriteRule ^article.php?id=(.*)$ /article/$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:40:47.107

试试这样：

```
RewriteRule ^article.php?id=(.*)$ /article/$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:49:53.693

您需要匹配*实际请求*而不是 URI，因为 URI 会被其他规则重写：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /article\.php\?id=([^\ ]+)
RewriteRule ^article\.php$ /article/%1? [R=301,L] 
```

如果与实际请求不匹配，则会发生重定向循环：

1.  浏览器请求`/article.php?id=123`
2.  服务器重定向到`/article/123`
3.  浏览器请求`/article/123`
4.  服务器内部重写为`/article.php?id=123`
5.  服务器内部匹配并将浏览器重定向到`/article/123`
6.  浏览器请求`/article/123`
7.  从 4 开始重复。

# r - 根据R中循环中的循环号为数据帧生成变量名称

> ID：11638099
> 
> 赞同：0
> 
> 时间：2012-07-24T19:37:45.140
> 
> 标签：r, loops, dataframe

我正在使用 lm() 函数开发和优化线性模型，随后使用 step() 函数进行优化。我通过使用 0 和 1 的随机生成器（每个 50% 的机会）向我的数据帧添加了一个变量。我使用此变量将数据帧子集化为训练集和验证集如果未将记录分配给训练集，则将其分配给验证集。通过使用这些子集，我能够估计模型的拟合程度（通过对验证集中的记录使用预测函数并将它们与原始值进行比较）。我对优化模型的系数以及预测结果和实际结果分布之间的 KS 检验结果感兴趣。

我所有的代码都运行良好，但是当我想测试我的模型是否对我选择的子集敏感时，我遇到了一些问题。为此，我想创建一个 for (i in 1:10) 循环，每次使用不同的随机子集。这对我来说是一个相当大的挑战（我以前从未在 R 中使用过 for 循环）。

这是问题所在（实际上有很多问题，但这是其中之一）：

我想为循环中的每个运行都有单独的数据框，并具有唯一的名称（例如：Run1、Run2、Run3）。我已经能够使用 paste(("Run",1:10,sep="") 创建一个具有不同字符串的变量，但这只是给你一个字符串列表。如何使用这些字符串作为我的 (子集）数据帧？

我预计会遇到的另一个问题：随后我想为每次运行使用拟合系数并将其导出到 Excel。通过使用 coef(function) 我已经能够检索系数，但是由于优化算法，模型中包含的系数的数量可能会在每次模拟运行时发生变化。这几乎肯定会给我将它们粘贴到同一个数据框中带来一些麻烦，对此有什么想法吗？

谢谢你的协助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T19:50:09.700

对于你的第一个问题：

您可以像以前一样创建字符串，使用

```
df.names <- paste(("Run",1:10,sep="") 
```

然后，创建您的 for 循环并执行以下操作，为数据框指定您想要的名称：

```
for (i in 1:10){
   d.frame <- # create your data frame here
   assign(df.name[i], d.frame)
} 
```

现在您将得到十个具有十个不同名称的数据框。

关于系数的第二个问题：

据我所知，这些并不自然地适合您的数据框结构。您应该考虑使用列表，因为它们允许不同的类 - 换句话说，对于每次运行，创建一个列表，其中包含一个数据框和一个带有系数的数字向量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T19:58:54.187

不要创建名称中带有数字的对象，然后尝试使用 get、paste 和 assign 在循环中访问它们。正确的做法是将元素存储在 R 列表对象中。

# ruby - 我无法在 os x 10.6.8 上构建 couchbase ruby gem

> ID：11638100
> 
> 赞同：0
> 
> 时间：2012-07-24T19:37:53.937
> 
> 标签：ruby, xcode, gcc, osx-snow-leopard, couchbase

我的目标是通过构建本机扩展来安装 couchbase ruby​​ gem，但我的 gem 和 libcouchbase C 库之间的架构不匹配。这里有一些背景：

*   我正在运行 OS X 10.6.8，使用 rvm，以及从源代码构建的 ruby​​ 1.9.2-p320
*   直到昨天我还在运行 OS X 10.6.7 和 Xcode 3.2.5，但我无法本地构建 libcouchbase
*   然后我安装了 brew，它有助于简化 libcouchbase 的安装，brew 告诉我我需要至少升级到 Xcode 3.2.6
*   我为 Snow Leopard 下载了难以捉摸的 Xcode 4.2，因为它比 Xcode 3.2.6 小了 2 gig，我想我会得到最新版本。
*   Xcode 由于证书错误而无法安装，我发现这是系统安装程序中的错误的结果，修复是升级到 OS X 10.6.8，然后应用系统更新
*   几个小时后重新启动，我正在运行安装了 XCode 4.2 的 OS X 10.6.8，并且 libcouchbase 通过 brew 编译，没有任何问题
*   我现在尝试安装 couchbase gem，但构建本机扩展失败。它说即使明确传递库的位置也无法找到 libcouchbase
*   检查 mkmf.log 显示以下内容（**添加了粗体强调，但我可能对问题有误！**

> 19/lib -L/opt/local/lib -L/usr/local/lib -L/Users/emkman/.rvm/rubies/ruby-1.9.2-p320/lib -L/usr/lib -L/Users /emkman/.rvm/usr/lib -L。-arch i386 -arch x86_64 -L/usr/local/lib -arch i386 -arch x86_64 -lruby.1.9.1-static -lpthread -ldl -lobjc “检查程序是：

```
/* begin */
1: #include "ruby.h"
2: 
3: int main() {return 0;}
/* end */ 
```

> “/usr/bin/gcc-4.2 -I/Users/emkman/.rvm/rubies/ruby-1.9.2-p320/include/ruby-1.9.1/universal-darwin10.8.0 -I/Users/emkman/。 rvm/rubies/ruby-1.9.2-p320/include/ruby-1.9.1/ruby/backward -I/Users/emkman/.rvm/rubies/ruby-1.9.2-p320/include/ruby-1.9.1 -I. -I/usr/local/Cellar/libevent/2.0.19/include -I/opt/local/include -I/usr/local/include -I/Users/emkman/.rvm/rubies/ruby-1.9 .2-p320/include -I/usr/include -I/Users/emkman/.rvm/usr/include -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-括号 -Wpointer-arith - Wwrite-strings -Wno-missing-field-initializers -Wshorten-64-to-32 -Wno-long-long -arch i386 -arch x86_64 -fno-common -pipe -std=c99 -Wall -Wextra -arch i386 -arch x86_64 -c conftest.c" 检查的程序是：

```
/* begin */
 1: #include "ruby.h"
 2: 
 3:   #include <stdarg.h>
 4:   int foo(int x, ...) {
 5:     va_list va;
 6:     va_start(va, x);
 7:     va_arg(va, int);
 8:     va_arg(va, char *);
 9:     va_arg(va, double);
10:     return 0;
11:   }
12:   int main() {
13:     return foo(10, "", 3.14);
14:     return 0;
15:   }
/* end */ 
```

> have_library: 检查 -lcouchbase 中的 libcouchbase_server_versions() ... -------------------- 否
> 
> 19/lib -L/opt/local/lib -L/usr/local/lib -L/Users/emkman/.rvm/rubies/ruby-1.9.2-p320/lib -L/usr/lib -L/Users /emkman/.rvm/usr/lib -L。-arch i386 -arch x86_64 -L/usr/local/lib -arch i386 -arch x86_64 -lruby.1.9.1-static -lcouchbase -lpthread -ldl -lobjc " **ld：警告：忽略文件 /usr/local/lib/libcouchbase.dylib，文件是为不受支持的文件格式构建的，该文件格式不是被链接的体系结构 (i386) 体系结构 i386 的未定义符号：“_libcouchbase_server_versions”，引用自：cckhpWpO 中的 _t .o ld：未找到架构 i386** collect2 的符号：ld 返回 1 个退出状态 lipo：无法打开输入文件：/var/folders/AT/ATO2AJa-G3Ogm+J4qma1hE+++TI/-Tmp-/ mkmf_20120724-40695-16d2a4n/ccAGPue9.out（没有这样的文件或目录）检查的程序是：

```
/* begin */
1: #include "ruby.h"
2: 
3: #include <libcouchbase/couchbase.h>
4: 
5: /*top*/
6: int main() {return 0;}
7: int t() { void ((*volatile p)()); p = (void ((*)()))libcouchbase_server_versions; return 0; }
/* end */ 
```

> 19/lib -L/opt/local/lib -L/usr/local/lib -L/Users/emkman/.rvm/rubies/ruby-1.9.2-p320/lib -L/usr/lib -L/Users /emkman/.rvm/usr/lib -L。-arch i386 -arch x86_64 -L/usr/local/lib -arch i386 -arch x86_64 -lruby.1.9.1-static -lcouchbase -lpthread -ldl -lobjc “conftest.c：在函数't'中：conftest.c :7: 错误：函数“libcouchbase_server_versions”conftest.c 的参数太少：在函数“t”中：conftest.c:7：错误：函数“libcouchbase_server_versions”的参数太少 lipo：无法确定架构类型: /var/folders/AT/ATO2AJa-G3Ogm+J4qma1hE+++TI/-Tmp-/mkmf_20120724-40695-cblicr/ccG9E6Cp.out 检查的程序是：

```
/* begin */
1: #include "ruby.h"
2: 
3: #include <libcouchbase/couchbase.h>
4: 
5: /*top*/
6: int main() {return 0;}
7: int t() { libcouchbase_server_versions(); return 0; }
/* end */ 
```

* * *

所以在我看来，问题在于 gcc 正在寻找 /usr/local/lib/libcouchbase.dylib 的 i386 版本并检查我的节目

> /usr/local/lib/libcouchbase.dylib：Mach-O 64 位动态链接共享库 x86_64

所以现在回答我的问题。这是问题还是红鲱鱼？我是否需要将 libcouchbase 构建为 i386 或通用，还是 gem 方面的问题？多年来，我一直在这个系统上构建原生 gem 扩展而没有问题，包括有时令人讨厌的 mysql gem，但现在我有了新版本的 GCC/Xcode。rvm 发行说明说 Xcode 4.2 仅适用于 Ruby 1.9.3 并破坏了许多本机扩展，所以我完全卸载了它，然后从[https://github.com/kennethreitz/osx-gcc-安装了 GCC-10.6.pkg rvm 推荐的安装程序/](https://github.com/kennethreitz/osx-gcc-installer/)，但我仍然有同样的问题。这是我的 brew --env 转储：

> 抄送：/usr/bin/llvm-gcc => /usr/llvm-gcc-4.2/bin/llvm-gcc-4.2
> 
> CXX: /usr/bin/llvm-g++ => /usr/llvm-gcc-4.2/bin/llvm-g++-4.2
> 
> LD：/usr/bin/llvm-gcc => /usr/llvm-gcc-4.2/bin/llvm-gcc-4.2
> 
> CFLAGS：-Os -w -pipe -march=core2 -msse4.1 -mmacosx-version-min=10.6
> 
> CXXFLAGS：-Os -w -pipe -march=core2 -msse4.1 -mmacosx-version-min=10.6
> 
> CPPFLAGS：-isystem /usr/local/include
> 
> LDFLAGS：-L/usr/local/lib
> 
> MACOSX_DEPLOYMENT_TARGET：10.6
> 
> 制造标志：-j2

现在和安装 Xcode 4.2 时，我的 -march 都设置为*core2*。这应该是*原生的*吗？在安装最新的 osx-gcc 工具链后，我通过 rvm/JewelryBox 从源代码重建了 ruby​​ 1.9.2-p320，以确保它使用相同的标志。它是作为universal-darwin 构建的，看起来是正确的：

```
interpreter:  "ruby"
version:      "1.9.2p320"
date:         "2012-04-20"
platform:     "universal.x86_64-darwin10.8.0"
patchlevel:   "2012-04-20 revision 35421"
full_version: "ruby 1.9.2p320 (2012-04-20 revision 35421) [universal.x86_64-darwin10.8.0]" 
```

我知道这是很多信息，但我只想彻底了解细节并表明我已经尝试*了几乎*所有东西。还要提一下，我试过 gem 的开发者预览版结合 libcouchbase 的开发者预览版，报错是一样的。我没有尝试过的两件事：

1.  为 Snow Leopard 安装 XCode 4.1 - Apple 不再提供可供下载的文件，即使它在理论上是受支持的。
2.  为 Snow Leopard 安装 Xcode 3.2.6 - 我试图避免 4gb 下载，但我现在才开始，今晚晚些时候可以试试

非常感谢任何帮助，特别是如果您以前在 OS X 上构建过 couchbase gem。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:49:39.907

我认为这是一个很好的问题，因为我记得自己在尝试构建 gem 时经历了一些类似的痛苦。然而那是前一阵子了，我没有方便的文件等来记住我做了什么，或者我的错误看起来像你的错误。

我知道这不如直接回答好，但我认为您应该能够在此处与 gem 作者取得联系：[https](https://groups.google.com/forum/#!forum/couchbase) : //groups.google.com/forum/#!forum/couchbase 或通过@avsej on推特。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-14T10:39:07.893

尝试以下步骤，这为我解决了问题：

```
brew unlink libcouchbase
brew install libcouchbase@2
brew link --force --overwrite libcouchbase@2
brew update && brew upgrade 
```

然后尝试捆绑安装或 gem 安装。

```
bundle install 
```

# java - 为什么这段代码有错误：NullPointerException？

> ID：11638117
> 
> 赞同：0
> 
> 时间：2012-07-24T19:39:01.370
> 
> 标签：java, exception, pointers, null

此代码是我使用 Java Swing 制作的井字游戏程序的一部分。添加按钮的for语句为什么会返回NullPointerException？

```
import java.awt.*;
import java.awt.event.ActionListener;
import javax.swing.*;

public class TicTacToeGui extends JFrame
{
    public final static int r = 3;
    public final static int c = 3;
    TicTacToeGui()
    {   
         JButton[][] button = new JButton[3][3];
         JPanel panel = new JPanel();
         panel.setLayout(new GridLayout(r, c));
         JLabel label = new JLabel("This is a tic tac toe game.");
         for(int i = 0; i < r; i++)
         {
            for(int j = 0; j < c; j++)
            {
                panel.add(button[i][j]);
            }
         }
         this.add(label);
         this.add(panel);
         this.setSize(400, 400);
         this.setVisible(true);
         this.setDefaultCloseOperation(EXIT_ON_CLOSE);
     }

    public static void main(String [] args)
    {
        new TicTacToeGui();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:42:02.600

因为 button[0][0] 为空。您初始化了数组，但其中没有任何元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T19:42:03.910

您永远不会初始化任何`JButton`. 当你声明

```
JButton[][] button = new JButton[3][3]; 
```

它只是创建一个空的 3x3 数组`null`，您必须手动遍历数组数组中的每个点并使用

```
button[row][col] = new JButton(""); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T19:42:34.770

该行`JButton[][] button = new JButton[3][3];`实际上并没有初始化按钮。您需要创建新按钮并将它们粘贴在此处。

# java - 如何将元素添加到数组并移动索引？

> ID：11638123
> 
> 赞同：18
> 
> 时间：2012-07-24T19:39:22.193
> 
> 标签：java, arrays

我需要向数组添加一个指定位置和值的元素。例如，我有数组

```
int []a = {1, 2, 3, 4, 5, 6}; 
```

应用后`addPos(int 4, int 87)`应该是

```
int []a = {1, 2, 3, 4, 87, 5}; 
```

我知道这里应该是 Array 的索引的转变，但看不到如何在代码中实现它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-24T19:44:24.613

这应该可以解决问题：

```
public static int[] addPos(int[] a, int pos, int num) {
    int[] result = new int[a.length];
    for(int i = 0; i < pos; i++)
        result[i] = a[i];
    result[pos] = num;
    for(int i = pos + 1; i < a.length; i++)
        result[i] = a[i - 1];
    return result;
} 
```

where`a`是原始数组，`pos`是插入的位置，`num`是要插入的编号。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-24T19:41:34.567

最简单的方法是使用 an`ArrayList<Integer>`并使用该`add(int, T)`方法。

```
List<Integer> list = new ArrayList<Integer>();
list.add(1);
list.add(2);
list.add(3);
list.add(4);
list.add(5);
list.add(6);

// Now, we will insert the number
list.add(4, 87); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-09-26T20:35:36.790

Jrad 解决方案很好，但我不喜欢他不使用数组复制。System.arraycopy() 在内部进行本机调用，因此您将获得更快的结果。

```
public static int[] addPos(int[] a, int index, int num) {
    int[] result = new int[a.length];
    System.arraycopy(a, 0, result, 0, index);
    System.arraycopy(a, index, result, index + 1, a.length - index - 1);
    result[index] = num;
    return result;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-07-24T19:43:59.997

您必须创建一个新数组，用于`System.arraycopy`复制前缀和后缀，并将该插槽设置为新值。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-03-12T12:44:11.587

如果您更喜欢使用 Apache Commons 而不是重新发明轮子，那么当前的方法是：

```
a = ArrayUtils.insert(4, a, 87); 
```

它曾经是 ArrayUtils.add(...) 但不久前已被弃用。更多信息在这里：[1](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/ArrayUtils.html#insert-int-int:A-int...-)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-07-24T19:43:33.740

我闻到了作业的味道，所以可能不允许使用 ArrayList（？）

与其寻找“移动索引”的方法，不如构建一个新数组：

```
int[] b = new int[a.length +1]; 
```

然后

1.  复制索引表单数组从*零*计数到插入位置
2.  ...
3.  ...

//编辑：当然是复制值，而不是索引

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-03-12T14:29:16.250

除非我遗漏了什么，否则问题不在于增加数组大小。在示例中，数组大小保持不变。（就像移位一样。）在这种情况下，实际上没有理由创建新数组或复制它。这应该可以解决问题：

```
static void addPos(int[] array, int pos, int value) {
    // initially set to value parameter so the first iteration, the value is replaced by it
    int prevValue = value;

    // Shift all elements to the right, starting at pos
    for (int i = pos; i < array.length; i++) {
        int tmp = prevValue;
        prevValue = array[i];
        array[i] = tmp;
    }
} 
```

```
int[] a = {1, 2, 3, 4, 5, 6};
addPos(a, 4, 87);
// output: {1, 2, 3, 4, 87, 5} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-06-20T13:26:00.397

这是一个 quasi-oneliner 可以做到这一点：

```
String[] prependedArray = new ArrayList<String>() {
  {
    add("newElement");
    addAll(Arrays.asList(originalArray));
  }
}.toArray(new String[0]); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-09-02T14:38:10.373

看看[公地](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/ArrayUtils.html#add(int[],%20int,%20int))。它使用arrayCopy()，但语法更好。对于那些用逐个元素的代码来回答的人：如果这不是家庭作业，那是微不足道的，有趣的答案是促进重用的答案。对于那些提出列表的人：可能读者也知道这一点，应该提到性能问题。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-11-03T06:57:19.993

`org.apache.commons.lang3.ArrayUtils#add(T[], int, T)`在最新的 commons lang3 中已弃用，您可以`org.apache.commons.lang3.ArrayUtils#insert(int, T[], T...)`改用。

> 已弃用此方法已被 insert(int, T[], T...) 取代，并且可能在未来的版本中被删除。请注意，新方法对 null 输入数组的处理有所不同：将 X 插入 null 数组会导致 null 而不是 X

示例代码：

```
 Assert.assertArrayEquals
            (org.apache.commons.lang3.ArrayUtils.insert
            (4, new int[]{1, 2, 3, 4, 5, 6}, 87), new int[]{1, 2, 3, 4, 87, 5, 6}); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-08-15T06:40:35.600

```
int[] b = new int[a.length +1];
System.arraycopy(a,0,b,0,4); 
//System.arraycopy(srcArray, srcPosition, destnArray, destnPosition, length)
b[4]=87;
System.arraycopy(a,4,b,5,2); 
```

b 数组将被创建为 {1, 2, 3, 4, 87, 5,6};

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-11-23T03:24:12.950

`System.arraycopy`由于索引计算，性能更高但很难正确处理。最好坚持 jrad 答案，或者`ArrayList`如果您没有性能要求。

```
public static int[] insert(
    int[] array, int elementToInsert, int index) {
  int[] result = new int[array.length + 1];
  // copies first part of the array from the start up until the index
  System.arraycopy(
      array /* src */,
      0 /* srcPos */,
      result /* dest */,
      0 /* destPos */,
      index /* length */);
  // copies second part from the index up until the end shifting by 1 to the right
  System.arraycopy(
      array /* src */,
      index /* srcPos */,
      result /* dest */,
      index + 1 /* destPos */,
      array.length - index /* length */);
  result[index] = elementToInsert;
  return result;
} 
```

并且 JUnit4 测试以检查它是否按预期工作。

```
@Test
public void shouldInsertCorrectly() {
  Assert.assertArrayEquals(
      new int[]{1, 2, 3}, insert(new int[]{1, 3}, 2, 1));
  Assert.assertArrayEquals(
      new int[]{1}, insert(new int[]{}, 1, 0));
  Assert.assertArrayEquals(
      new int[]{1, 2, 3}, insert(new int[]{2, 3}, 1, 0));
  Assert.assertArrayEquals(
      new int[]{1, 2, 3}, insert(new int[]{1, 2}, 3, 2));
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-06-14T20:21:25.893

尝试这个

```
public static int [] insertArry (int inputArray[], int index, int value){
    for(int i=0; i< inputArray.length-1; i++) {

        if (i == index){

            for (int j = inputArray.length-1; j >= index; j-- ){
                inputArray[j]= inputArray[j-1];
            }

            inputArray[index]=value;
        }

    }
    return inputArray;
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-10-31T11:13:01.287

以下代码将在指定位置插入元素并将现有元素移动到新元素旁边。

```
public class InsertNumInArray {

public static void main(String[] args) {
    int[] inputArray = new int[] { 10, 20, 30, 40 };
    int inputArraylength = inputArray.length;
    int tempArrayLength = inputArraylength + 1;
    int num = 50, position = 2;
    int[] tempArray = new int[tempArrayLength];

    for (int i = 0; i < tempArrayLength; i++) {
        if (i != position && i < position)
            tempArray[i] = inputArray[i];
        else if (i == position)
            tempArray[i] = num;
        else
            tempArray[i] = inputArray[i-1];
    }

      inputArray = tempArray;

    for (int number : inputArray) {
        System.out.println("Number is: " + number);
    }
}
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-08-01T04:35:53.523

```
public class HelloWorld{

     public static void main(String[] args){
        int[] LA = {1,2,4,5};
        int k = 2;
        int item = 3;
        int j = LA.length;
        int[] LA_NEW = new int[LA.length+1];

       while(j >k){
            LA_NEW[j] = LA[j-1];
            j = j-1;
        }
        LA_NEW[k] = item;
        for(int i = 0;i<k;i++){
            LA_NEW[i] = LA[i];
        }
        for(int i : LA_NEW){
            System.out.println(i);
        }
     }
} 
```

# ant - 常春藤：处理需要Jar，但不需要编译

> ID：11638126
> 
> 赞同：1
> 
> 时间：2012-07-24T19:39:33.143
> 
> 标签：ant, ivy

我有一个项目依赖于我们生产的两个罐子。我已经将这两个 jar 放在我们的存储库中，Ivy 下载它们，编译和构建初始 jar 一切都很好。

但是，我们有另一个 jar 是我们需要针对这个 jar 运行的混淆器。这也在我们的存储库中，但编译不需要它。相反，我只是将它作为一个针对新构建的 jar 的程序运行。

我应该如何分类这个混淆 jar 的配置？我不能说它是*编译*的，因为编译不需要它。而且，它也不应该在*运行时*配置中。这给我们留下了*provided*、 _optional、 _master 或*test*。

我可以为构建软件所需的 Jars 创建一个特殊的配置，但在类路径中不需要，但我不想打破我们的标准并创建比基本配置更多的[配置](http://www.symphonious.net/2010/01/25/using-ivy-for-dependency-management/)。

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:46:10.973

如果您仅在构建过程中需要此 jar，则[内联检索](https://ant.apache.org/ivy/history/trunk/use/retrieve.html)将完成这项工作！它将帮助您在不需要常春藤文件的情况下检索工件。
这对于任务所需的 jars 非常有用，您可以执行但与工件本身（findbugs 等）无关。

```
<ivy:retrieve organisation="foo" module="bar" inline="true" pattern="${my.install.dir}/[artifact].[ext]"/> 
```

另一种选择是[内联常春藤缓存路径](https://ant.apache.org/ivy/history/latest-milestone/use/cachepath.html)，其中 jar 直接从缓存中获取，而不是检索到您的项目中。

```
<ivy:cachepath
  organisation="org" module="module" 
  revision="latest.integration" 
  inline="true" pathid="project.compile.sourceprocessing.classpath"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T22:28:46.493

常春藤配置被设计为灵活。当然，对 Maven 范围进行标准化是非常有意义的（尤其是从 Maven 存储库中提取时），但我认为没有理由限制您的构建，尤其是对于仅由您的构建使用的依赖项。

我通常会创建一个名为“build”的额外配置，专门用于下拉诸如 ANT 任务 jar 之类的项目：

```
<configurations>
   <conf name="compile"  description="Compile dependencies"/>
   <conf name="runtime"  description="Runtime dependencies" extends="compile"/>
   <conf name="test"     description="Test dependencies" extends="runtime"/>
   <conf name="provided" description="Dependencies provided by target platform"/>
   <conf name="build"    description="Dependencies used by ANT build process"/>
</configurations> 
```

# c++ - C++ / 'string' 未在此范围内声明/错误

> ID：11638128
> 
> 赞同：0
> 
> 时间：2012-07-24T19:39:47.013
> 
> 标签：c++, string, function, switch-statement

我正在制作一个跟踪高尔夫统计数据的程序，所以我需要制作球员。我做了一个函数叫做

getPlayer(int playerNum);

在里面我有所有这些代码

```
switch(playerNum)
case 1: return(player1);break;
case 2: return(player2);break;
case 3: return(player3);break;
case 4: return(player4);break;
case 5: return(player5);break;
case 6: return(player6);break;
case 7: return(player7);break;
case 8: return(player8);break;
case 9: return(player9);break;
case 10: return(player10);break; 
```

在我的 playermanager.h 中

```
 #ifndef PLAYERMANAGER_H
    #define PLAYERMANAGER_H
    #include <string>

    class playerManager
    {
    public:
        playerManager();
        std::string getPlayer(int playerNum);
    private:
        std::string player1;
        std::string player2;
        std::string player3;
        std::string player4;
        std::string player5;
        std::string player6;
        std::string player7;
        std::string player8;
        std::string player9;
        std::string player10;
    };

    #endif // PLAYERMANAGER_H 
```

现在当我运行这个我得到错误

```
 'player1' was not declared in this scope 
```

我也得到了错误

```
 break statement not within loop or switch 
```

它从播放器 1 一直持续到播放器 10。我通过调用文件读取器函数对字符串进行了智能化。我对 c++ 真的很陌生，我可能做错了一些愚蠢的事情，所以如果有人可以帮忙的话。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T19:41:31.073

省略 codereview 的东西 -

你有没有实施过

```
std::string getPlayer(int playerNum); 
```

代替

```
std::string playerManager::getPlayer(int playerNum); 
```

?

另外 - `switch`：

```
switch(playerNum)
{
case 1: return(player1);break;
case 2: return(player2);break;
case 3: return(player3);break;
case 4: return(player4);break;
case 5: return(player5);break;
case 6: return(player6);break;
case 7: return(player7);break;
case 8: return(player8);break;
case 9: return(player9);break;
case 10: return(player10);break;
} 
```

除此之外 - 糟糕的代码。想象一下，我是你的客户，告诉你我想要 11 个玩家而不是 10 个。然后呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:47:46.773

可能是一些不同的东西，但可能是你想要这个：

```
std::string playerManager::getPlayer(int playerNum) //<- here you need the class name
{
    switch(playerNum)
    { 
    //^- and here you don't show  the { and } in your example, and this could be the
    // reason for the "break statement not within loop or switch" error

        case 1: return(player1);break;
        case 2: return(player2);break;
        case 3: return(player3);break;
        case 4: return(player4);break;
        case 5: return(player5);break;
        case 6: return(player6);break;
        case 7: return(player7);break;
        case 8: return(player8);break;
        case 9: return(player9);break;
        case 10: return(player10);break;
    }
} 
```

也就是说，使用数组（或向量）可能是一个更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:49:43.817

您在`getPlayer()`函数中显示了以下代码：

```
switch(playerNum) 
case 1: return(player1);break; 
case 2: return(player2);break; 
case 3: return(player3);break; 
case 4: return(player4);break; 
case 5: return(player5);break; 
case 6: return(player6);break; 
case 7: return(player7);break; 
case 8: return(player8);break; 
case 9: return(player9);break; 
case 10: return(player10);break; 
```

此代码不在函数内部。我假设您根本没有发布几行来显示它所在的功能。请这样做，以便我们可以进一步帮助您。

此外，由于您使用的是玩家列表，因此您应该考虑学习如何使用 STL 中的数组或容器（例如 std::vector）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T20:29:15.680

不要为不同的玩家使用开关，而是尝试为玩家创建一个动态分配的数组，这样您就可以随时添加或创建一个指针，然后在后台保留一个 int 来告诉有多少玩家在场，或者其他什么。

# debugging - 使用用户模式转储确定 WinDbg 中的线程创建时间

> ID：11638131
> 
> 赞同：2
> 
> 时间：2012-07-24T19:39:57.543
> 
> 标签：debugging, windbg

如何确定在 WinDbg 中使用用户模式转储创建线程的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T21:22:00.217

该`!runaway`命令允许您显示自创建线程以来经过的时间。从文档中：

> !runaway [标志] 参数
> 
> Flags 指定要显示的信息类型。标志可以是以下位的任意组合。默认值为 0x1。
> 
> 位 0 (0x1) 使调试器显示每个线程消耗的用户时间量。
> 
> 位 1 (0x2) 使调试器显示每个线程消耗的内核时间量。
> 
> 位 2 (0x4) 使调试器显示自创建每个线程以来经过的时间量。

# db2 - DB2 v.10.1 RDF 数据删除

> ID：11638134
> 
> 赞同：0
> 
> 时间：2012-07-24T19:40:18.417
> 
> 标签：db2, rdf, sparql, jena

有没有人试图从 DB2 RDF 简单存储（Windows）中删除数据（三元组）？（插入工作正常）

SPARQL DELETE 状态：

```
DELETE { ?document ?property ?value} WHERE{ ?document <http://example.com#begin> 
?begin . 
FILTER(?begin > 200) ?document ?property ?value } 
```

我有以下例外：

```
com.ibm.rdf.store.exception.RdfStoreException: DB255006E ERRORCODE=-4499, SQLSTATE=08001\. SQLSTATE: 08001.
 at  
com.ibm.rdf.store.internal.jena.impl.update.SingleTripleOperations.removeQuad(Unknown Source)
at com.ibm.rdf.store.internal.jena.impl.update.AbstractTripleOperation.removeQuad(Unknown Source)
..... 
```

db2diag.log：

```
RETCODE : ZRC=0x87120007=-2028863481=SQLR_SEVERE_PGM_ERROR
"Severe programming error"
DIA8516C A severe internal processing error has occurred. 
```

我的Java代码：

```
String queryString = "delete ...";
Dataset ds = RdfStoreFactory.connectDataset(storeP, conn);
GraphStore graphStore = GraphStoreFactory.create(ds) ;
UpdateAction.parseExecute(queryString, graphStore); // exception

 //UpdateAction.parseExecute("DROP ALL", graphStore); // works fine 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:46:27.747

通过添加解决的问题

```
 prop.setProperty("enableExtendedIndicators", "2"); 
```

到 DB2 连接。

# python - 亚马逊 AWS - Python 网络框架 - dynamodb

> ID：11638135
> 
> 赞同：1
> 
> 时间：2012-07-24T19:40:22.103
> 
> 标签：python, amazon-ec2, amazon-web-services, web-frameworks

我对 Google App 引擎做了很多研究。我最终选择了 webapp2。现在我们意识到 AWS 在我们的项目中比 GAE 有很多优势。

我觉得有点不知所措，因为关于 AWS 的信息太多了。我最终得到了 nosql dynamoDB 解决方案。

现在我真的很喜欢像 webapp2 这样的轻量级框架，它非常简单易用。它也不会隐藏帖子并从您那里获取。

现在对 AWS 使用 webapp2 有意义吗？Mabye 还有其他更适合我们项目的框架。 *（我们想进入文件托管方向）*

我的意思是实际上有 50 个 python 框架。而且我没有找到带有优缺点的图表。

我研究的最后一个框架是：web2py、pylon（现在是金字塔？）和 tornado。

老实说，我真的很困惑。

因此，如果我想为 AWS 提供一个轻量级框架，你会建议我继续使用 webapp2 吗？

资源：

[适用于 Python 的 Amazon AWS Web 框架](https://stackoverflow.com/questions/4971635/amazon-aws-web-framework-for-python)

**编辑#1**

现在是 tornado 和 webapp2 之间的决定。考虑到我想使用 dynamoDB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:55:48.690

Tornado 本身就是一个快速的非阻塞 Web 服务器。在几分钟内编写简单的应用程序很容易，但它没有像模板、视图等这样的 AFAIK。如果您想提供文件，将龙卷风服务器与 boto (https://github.com/boto/boto) 连接在一起并使用 dynamoDB 或 S3 会非常快。

另一方面，pylons（现在的 pyrmaid）和 we2py 是完整的 Web 应用程序框架，没有 Web 服务器。事实上，它们带有一个轻量级的开发服务器（至少是 pylons），但是如果你想在 AWS 中建立一个站点，你应该使用 nginx (http://nginx.org/)、apache 或其他一些 wsgi 服务器(http://wsgi.readthedocs.org/)。

如果你想使用轻量级框架并使用 python，我会选择 web2py，易于配置和构建应用程序。（一个奇怪的说明：它曾经是一个 .py 文件）你可以在线尝试：[http ://www.web2py.com/demo_admin/default/site](http://www.web2py.com/demo_admin/default/site)

关于 webapp2 我从未使用过它，但我听说它类似于 Appengine web 框架。因此，如果您对它感到满意，请留在那里。

无论哪种方式，boto 都是 AWS 的 python 接口，所以如果你选择 python，你必须检查一下。它被积极维护。

# haskell - 在 Haskell 中代表“物种”的类型类的设计

> ID：11638138
> 
> 赞同：1
> 
> 时间：2012-07-24T19:40:27.310
> 
> 标签：haskell, typeclass

以下简化的数据类型是游戏所有对象的基础：

```
data Object = Object { logic :: Logic, picture :: Picture }
data Logic = Logic { geometry :: Geometry, someAttributes :: SomeAttributes }
data Geometry = Geometry { coords :: Point, size :: Point }
data SomeAttributes = SomeAttributes { life :: Int, hasGravity :: Bool } 
```

对象由函数创建：

```
hero position = Object
    (Logic
        (Geometry position (Point 25 55))
        (SomeAttributes 100 True))
    PictureConstructor1

enemy position = Object
    (Logic
        (Geometry position (Point 25 25))
        (SomeAttributes 3 True))
    PictureConstructor2

bullet position = Object
    (Logic
        (Geometry position (Point 5 5))
        (SomeAttributes 0 False))
    PictureConstructor3

--etc. for blocks and everything else 
```

游戏结构示例：

```
[hero (Point 0 0), enemy (Point 50 0), enemy (Point 100 0), block (Point 0 (negate 30)), block (Point 50 (negate 30)), block (Point 100 (negate 30))] 
```

然后，一个`advance`函数获取这个列表并应用重力，碰撞，......，从而使对象移动，死亡，......这个函数是类型的`[Object] -> [Object]`，但它不会改变所有的字段`Object`：只有`coords`并且`life`被改变，例如，而`size`和始终保持不变，不受影响。`hasGravity`

这个常量数据代表了某种“特定属性”，或者类属性，但是“实例”携带它们，**不安全**，**内存大**，序列化不**实用**。

* * *

我想创建一个类型类，每个实例都会提供它们的“常量”和可以更改的字段的构造函数。我想不出比这更好的了：

```
class Object a where
    size :: Point
    baseLife :: Point
    hasGravity :: Bool
    picture :: Picture

data Hero = Hero { coords :: Point, currentLife :: Int }

instance Object Hero where
    size = Point 25 55
    baseLife = 100
    hasGravity = True
    picture = PictureConstructor1

setHero a@(Hero xy _) = Hero xy (baseLife a) 
```

它更轻、更安全，但相当丑陋，因为它失去了结构（不再有逻辑、几何......）。我想如果它们存在的话我会使用 lambda 类型：p。

请分享您对如何解决这些问题或您可以考虑的替代模型的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:37:02.540

> 问题是所有这些特定于物种的字段都可以通过其他功能进行修改，但在游戏过程中唯一可以更改的是位置和生命值。

由于 haskell 中的所有数据结构都是不可变的，我假设当您说修改时，您的意思是其他函数可以使用数据构造函数构造新的（可能不同的）对象。

如果您想防止这种情况发生，您可以将数据类型与构造它们的函数（`hero`和`enemy`）`bullet`放在一个额外的模块中，该模块仅导出数据类型的类型构造函数以及用于访问字段和构造函数的函数，但不是数据构造函数。

```
module GameData (Object, Logic, Geometry, SomeAttributes, logic, picture, geometry, someAttributes, coords, size, life, hasGravity, hero, enemy, bullet)

data Object = CreateObject { logic :: Logic, picture :: Picture }
data Logic = CreateLogic { geometry :: Geometry, someAttributes :: SomeAttributes }
data Geometry = CreateGeometry { coords :: Point, size :: Point }
data SomeAttributes = CreateSomeAttributes { life :: Int, hasGravity :: Bool }

hero position = ...
enemy position = ...
bullet position = ... 
```

然后您可以选择要公开的数据构造函数。也许将所有“可变”数据放入其自己的数据类型中是有意义的，因此您可以导出该数据类型的数据构造函数，但不能导出其他数据类型的数据构造函数。

一旦你把所有的东西都组织好了，你就可以非常严格地控制你的对象是如何构造的，因为那个模块是唯一可以进行这种构造的东西，其他模块只能访问`hero` `enemy`and`bullet`函数。

# r - 将 --vanilla 与 R CMD 构建一起使用

> ID：11638147
> 
> 赞同：1
> 
> 时间：2012-07-24T19:40:47.077
> 
> 标签：r, packages

根据文档*Writing R Extensions* [ss 1.3](http://cran.r-project.org/doc/manuals/R-exts.html#Checking-and-building-packages) “R CMD check and R CMD build run R with --vanilla, so no user's startup files are read”。

这似乎没有发生在我的安装上。我发现我的 R 版本（Mac 上的 2.15.1）加载了我的包`.Rprofile`- 我对此非常确定，因为我已经设法通过添加`library(hobblegobble)`到我的`.Rprofile`.

这有关系吗？如果是这样，我应该*总是*更喜欢用

```
R --vanilla CMD build 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T21:08:58.570

您可以使用`R --vanilla CMD build myPackage`或者`R --vanilla CMD INSTALL --build myPackage`如果您的 .Rprofile 加载您尝试构建（或安装）的包。

我知道使用的唯一缺点`--vanilla`是终端的完成（即当您点击时为您完成包目录名称`tab`）在您键入包目录的路径时可能无法工作。

但是，更好的解决方案可能是`if (interactive()) {}`在 .Rprofile 中包含您只想在交互式会话中运行的代码。例如`library`或`require`电话。

在你的情况下，如果你的 .Rprofile 有`if (interactive()) library(hobblegobble)`你就不需要使用`--vanilla`.

# ruby - compass -v 在 CentOS 上使用安装了 rvm 的 ruby 1.9.3 失败

> ID：11638148
> 
> 赞同：0
> 
> 时间：2012-07-24T19:40:47.313
> 
> 标签：ruby, centos, rvm, sass, compass-sass

操作系统：Centos 5.8
Ruby 1.9.3 版（通过 RVM 安装）

指南针 -v 的输出

```
/home/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.5/lib/bundler/shared_helpers.rb:22:in `default_gemfile': Could not locate Gemfile (Bundler::GemfileNotFound)
from /home/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.5/lib/bundler.rb:213:in `default_gemfile'
from /home/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.5/lib/bundler.rb:164:in `root'
from /home/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.5/lib/bundler.rb:123:in `load'
from /home/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.5/lib/bundler.rb:114:in `setup'
from /home/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.5/lib/bundler.rb:119:in `require'
from /home/.rvm/gems/ruby-1.9.3-p194/gems/compass-0.13.alpha.0/bin/compass:25:in `<top (required)>'
from /home/.rvm/gems/ruby-1.9.3-p194/bin/compass:19:in `load'
from /home/.rvm/gems/ruby-1.9.3-p194/bin/compass:19:in `<main>'
from /home/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
from /home/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

宝石清单报告

```
bundler (1.1.5)
chunky_png (1.2.5)
compass (0.13.alpha.0)
fssm (0.2.9)
rake (0.9.2.2)
rubygems-bundler (1.0.3)
rvm (1.11.3.5)
sass (3.2.0.alpha.275, 3.1.20) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T23:24:54.880

卸载 ruby​​gems-bundler 并重新安装 compass

# sql - 连接的 SQL 子查询 - 要按最大日期过滤的基于连接的索引

> ID：11638150
> 
> 赞同：0
> 
> 时间：2012-07-24T19:41:22.820
> 
> 标签：sql, oracle

我对 SQL 比较陌生——上周才开始使用它。我在通过基于连接的索引将 2 个表连接在一起时遇到了一些问题（我可以这样做，但它会显示几个日期）然后按最大日期过滤它

请参阅下面的第一个版本，该版本显示了连接在一起的表格。我需要加入两个表。INVENTORY_TRANSACTION_HIST2（作业）inventory_transaction_hist（与项目细节相关的更多细节）

这些表之间没有关联，因此我不得不从几个字段中构建连接的表： `part_no||lot_batch_no||serial_no||location_no` 用于两个表之间的关联。

`order_no||release_no||sequence_no||line_item_no` 仅与第二个表相关并创建过滤日期所需的索引

```
select
to_char(job.dated,'dd/mm/yyyy hh:mm:ss') date_issued,
job.userid,
job.part_no,
job.quantity,
job.lot_batch_no,
job.serial_no,
job.cost,
job.quantity* job.cost total_cost,
job.source note,
hist.dated,
hist.order_no,
hist.release_no,
hist.sequence_no,
hist.line_item_no

from
inventory_transaction_job job
left join inventory_transaction_hist hist
on job.part_no||job.lot_batch_no||job.serial_no||job.location_no = hist.part_no||hist.lot_batch_no||hist.serial_no||hist.location_no
where (job.source like UPPER('%'||'&Job_No'||'%') or job.source like LOWER('%'||'&Job_No'||'%'))
and hist.transaction LIKE '%INM-IN%'
and hist.direction LIKE '+'
order by job.part_no 
```

我需要按历史上最近的日期进一步划分。表（因为某些批次/序列号仅显示为“*”，因此可以针对每个显示多个订单号 - 我只想显示这些订单的最新订单）

我已经尝试了以下和其他一些变化，但我似乎无法让它工作。

```
select
to_char(job.dated,'dd/mm/yyyy hh:mm:ss') date_issued,
job.userid user_id,
job.part_no,
job.quantity,
job.lot_batch_no,
job.serial_no,
job.cost,
job.quantity* job.cost total_cost,
job.source note,
hist.dated,
hist.order_no,
hist.release_no,
hist.sequence_no,
hist.line_item_no

from
inventory_transaction_job job
left join inventory_transaction_hist hist
on job.part_no||job.lot_batch_no||job.serial_no||job.location_no = hist.part_no||hist.lot_batch_no||hist.serial_no||hist.location_no
where (job.source like UPPER('%'||'&Job_No'||'%') or job.source like LOWER('%'||'&Job_No'||'%'))
and hist.transaction LIKE '%INM-IN%'
and hist.direction LIKE '+'
and job.order_no||job.sequence_no||job.line_item_no IN
(SELECT
hist2.order_no||hist2.sequence_no||hist2.line_item_no
FROM inventory_transaction_hist hist2
WHERE job.part_no||job.lot_batch_no||job.serial_no||job.location_no LIKE hist2.part_no||hist2.lot_batch_no||hist2.serial_no||hist2.location_no
ORDER BY hist2.Dated DESC LIMIT 1) 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:24:58.120

First, as mentioned in a comment, you should do joins on the individual columns connected by "ands" rather than trying to concatenate them together. The concatenation is clever, but it makes it much harder for the query optimizer to do its job, for instance.

I got the idea that you want the most recent date from the history table for different groups. I calculate the max date using an analytic function, and then use that for the comparison.

The final query looks like this:

```
select to_char(job.dated,'dd/mm/yyyy hh:mm:ss') date_issued, job.userid user_id, job.part_no,
        job.quantity, job.lot_batch_no, job.serial_no, job.cost, job.quantity* job.cost total_cost,
        job.source note, hist.dated,  hist.order_no, hist.release_no, hist.sequence_no, hist.line_item_no
from inventory_transaction_job job left join
     (select hist.*,
             MAX(dated) over (PARTITION by hist2.part_no, hist2.lot_batch_no, hist2.serial_no, hist2.location_no) as maxdated
      from inventory_transaction_hist hist
     ) hist
     on job.part_no = hist.part_no and
        job.lot_batch_no = hist.lot_batch_no and
        job.serial_no = hist.serial_no and
        job.location_no = hist.location_no join
     (SELECT hist2.order_no, hist2.lot_batch_no, hist2.serial_no, hist2.location_no, hist2.sequence_no, hist2.line_item_no
      FROM inventory_transaction_hist hist2
      ORDER BY hist2.Dated DESC
      LIMIT 1
     )
where (job.source like UPPER('%'||'&Job_No'||'%') or job.source like LOWER('%'||'&Job_No'||'%')) and
      hist.transaction LIKE '%INM-IN%' and
      hist.direction LIKE '+' and
      hist.dated = hist.maxdated 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:40:50.777

非常感谢您的帮助 - 非常感谢！进行了一些调整以使其按我的意愿工作。如果您发现任何可以更改以提高搜索性能的内容，请告诉我！

```
select
to_char(job.dated,'dd/mm/yyyy hh:mm:ss') date_issued,
job.userid user_id,
job.part_no,
job.quantity,
job.lot_batch_no,
job.serial_no,
job.cost,
job.quantity* job.cost total_cost,
job.source note,
to_char(hist.dated,'dd/mm/yyyy hh:mm:ss') date_PO_received,
hist.order_no,
hist.release_no,
hist.sequence_no,
hist.line_item_no

from
INVENTORY_TRANSACTION_job job
left join (select hist.*, MAX(hist.dated) over (PARTITION by hist.transaction, hist.direction, hist.part_no, hist.serial_no, hist.lot_batch_no order by hist.dated desc) as maxdated
from inventory_transaction_hist hist
) hist
on
job.part_no = hist.part_no and
job.lot_batch_no = hist.lot_batch_no and
job.serial_no = hist.serial_no and
hist.dated = hist.maxdated
where (job.source like UPPER('%'||'&Job_No'||'%') or job.source like LOWER('%'||'&Job_No'||'%'))
and hist.transaction LIKE '%INM-IN%'
and hist.direction = '+' 
```

再次感谢杰米

# java - 带有用户和管理员登录的 Java 会话过滤器

> ID：11638155
> 
> 赞同：0
> 
> 时间：2012-07-24T19:41:48.883
> 
> 标签：java, authentication, servlets

在我的网络应用程序上，我有 2 个主要部分

1.  用户
2.  行政

我正在使用 java 会话过滤器来检查用户会话并允许访问网站的特定部分。因此，用户只能访问用户页面部分，而管理员可以访问管理部分。

用户的会话过滤器已经实现并且工作正常。它检查用户（来自数据库的用户名和密码 - mysql）并提供对**受限**子文件夹的访问权限，其中我有 xhtml 页面。

如果我希望过滤器检查管理员部分的身份验证（管理员用户名和密码存储在数据库中）并允许他们根据用户级别进行访问。

我需要再创建 1 个过滤器 - 管理员吗？

目前这是我对用户的实现：

```
package com.shadibandhan.ControllerLayer;

import java.io.IOException;
import java.util.ArrayList;
import java.util.StringTokenizer;
import javax.servlet.*;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import javax.servlet.http.Cookie;

/**
 *
 * @author MUDASSIR
 */
public class SessionFilter implements Filter {

    private ArrayList<String> urlList;
    private String toGoTo = null;
    private boolean userCookieExists = false;

    @Override
    public void init(FilterConfig config) throws ServletException {

        System.out.println("****************************************");
        System.out.println("***Session Filter Servlet initialized***");
        System.out.println("****************************************");
        String urls = config.getInitParameter("avoid-urls");
        System.out.println("The urls to avoid are = " + urls);
        StringTokenizer token = new StringTokenizer(urls, ",");

        urlList = new ArrayList<String>();

        while (token.hasMoreTokens()) {
            urlList.add(token.nextToken());

        }
    }

    @Override
    public void doFilter(ServletRequest req, ServletResponse res,
            FilterChain chain) throws IOException, ServletException {

        System.out.println("This is the doFilter method");

        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) res;
        String contextRelativeURI = null;
        String contextRelativeURIForAdmin = null;

            contextRelativeURI = request.getRequestURI().substring(request.getContextPath().length());

        String contextPath = request.getContextPath();
        String remoteHost = request.getRemoteHost();
        String url = contextPath + contextRelativeURI;
        System.out.println("-----------------> Servlet path is = " + contextRelativeURI);
        System.out.println("-----------------> Context path is " + contextPath);
        System.out.println("-----------------> URL is " + url);
        System.out.println("-----------------> Remote Host is " + remoteHost);
        boolean allowedRequest = false;

        if (urlList.contains(contextRelativeURI)) {
            allowedRequest = true;
        }

        if (!allowedRequest) {
            HttpSession session = request.getSession(false);
            if (null == session) {

                System.out.println("Session is not present");
                response.sendRedirect(contextPath);
                return;

            }
            if (null != session) {

                System.out.println("Session is present");
                System.out.println("\nSession no. is = " + session.getId());

                if (session.getAttribute("logged-in") == "true") {
                    System.out.println("Session logged-in attribute is true, " + session.getAttribute("sessionUsername") + " is logged in.");

                        RequestDispatcher dispatcher = request.getRequestDispatcher(contextRelativeURI);
                        dispatcher.forward(request, response);
                        return;
                } else {
                    System.out.println("Session logged-in attribute is not true");
                    response.sendRedirect(contextPath);
                    return;
                }
            }
        }

        chain.doFilter(req, res);
    }

    @Override
    public void destroy() {
    }
} 
```

这是我的过滤器的 web.xml 映射

```
<filter>
        <filter-name>SessionFilter</filter-name>
        <filter-class>
            com.shadibandhan.ControllerLayer.SessionFilter
        </filter-class>
        <init-param>
            <param-name>avoid-urls</param-name>
            <param-value></param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>SessionFilter</filter-name>
        <url-pattern>/com.shadibandhan.Restricted/*</url-pattern>
    </filter-mapping> 
```

现在，我是否也将管理页面放在受限文件夹中？或者我把它们放在另一个单独的文件夹中？[我还看到了这里](http://www.informit.com/articles/article.aspx?p=24253)提到的 servlet 身份验证方法，它建议在 tomcat-users.xml 文件中进行更改，但我在数据库中有我的用户名和密码。

请建议推荐的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T22:54:41.163

好吧，保护 Web 应用程序的最佳方法是使用**容器管理的身份验证** ，因此您的应用程序不需要处理身份验证和授权机制。该机制在 Java 世界中称为[JAAS 。](http://www.oracle.com/technetwork/java/javase/jaas/index.html)

使用容器管理的身份验证通常需要对 servlet 应用程序进行一些配置 - 除了 Web 应用程序中所需的更改 - 但您会更安全。既然您说您使用的是 Tomcat，那么我将根据该 servlet 容器为您提供最佳答案，其他容器则以不同的方式进行配置。

**1.配置Tomcat领域**

首先，忘记`tomcat-users.xml`（它不安全）并决定如何存储身份验证数据，LDAP 服务器？数据库？哪个数据库？一旦你决定你需要修改Tomcat`server.xml`文件夹下的文件来添加一个新[领域](http://tomcat.apache.org/tomcat-7.0-doc/realm-howto.html)。要创建的领域类型取决于您之前的决定。`conf`

让我们明确一点：将用户添加到存储中。

**2\. 配置网络应用**

您现在需要在 Web 应用程序端配置身份验证方法。这是通过`web.xml`修改`/WEB-INF`.

您可以选择[Basic authentication](http://www.giantflyingsaucer.com/blog/?p=3174)或[Form based authentication](http://onjava.com/onjava/2002/06/12/form.html)。我更喜欢使用后者，因为它允许我向最终用户提供自定义表单。

我在此处提供的一些链接逐步描述了该过程。它们还包括有关如何将应用程序的某些部分的访问权限限制为不同类型的用户的信息，即：

```
<security-constraint>
  <web-resource-collection>
    <web-resource-name>AdminPages</web-resource-name>
    <description> accessible by authorised users </description>
    <url-pattern>/admin/*</url-pattern>
    <http-method>GET</http-method>
  </web-resource-collection>
  <auth-constraint>
    <description>These are the roles who have access</description>
    <role-name>ADMIN</role-name>
  </auth-constraint>
</security-constraint> 
```

**3.了解用户**

在所有这些配置之后，您的应用程序应该能够通过`getRemoteUser()`.`HttpServletRequest`

**编辑：**

我建议对管理员和用户使用同一张表，并使用角色来区分他们。如果您的`admin`实体需要普通用户不应该使用的其他字段，则链接两个表并在返回`admin`时处理一个。`HttpServletRequest.isUserInRole("ADMIN")``true`

# python - 填充数组 - 在“for”语句上出现语法错误

> ID：11638158
> 
> 赞同：0
> 
> 时间：2012-07-24T19:41:53.237
> 
> 标签：python, for-loop, syntax-error

我试图弄清楚为什么在尝试使用该程序时会出现语法错误。当我使用填充列表时，这段代码运行良好，但是，我决定使用数组，因为我可以根据自己的喜好操作数据。

这是代码：

```
#Frame Creation

frames=[]

for n in range (0, (workingframes*archnodes*3)):
    frames.append( )

frames = array(frames)                                    #generates array
frames = reshape(frames, ((archnodes*3),workingframes)    #reshapes array

#Frame Population

for f in range (0, workingframes):

    if f<=(workingframes/2):

        for x in range (0, (archnodes)):
            frames[(archnodes*3)].insert((archnodes*3), (archstartred[x]))
            frames[(archnodes*3)+1].insert(((archnodes*3)+1),(archstartgrn[x]))
            frames[(archnodes*3)+2].insert(((archnodes*3)+2),(archstartblu[x]))

        for y in range (0, nodesperframe):
            archstartred.pop()
            archstartgrn.pop()
            archstartblu.pop()
            archstartred.insert(0, backred)
            archstartgrn.insert(0, backgrn)
            archstartblu.insert(0, backblu)

    else:
        for y in range (0, nodesperframe):
            archstartred.pop(0)
            archstartgrn.pop(0)
            archstartblu.pop(0)
            archstartred.append(backred)
            archstartgrn.append(backgrn)
            archstartblu.append(backblu)

        for x in range (0, (archnodes)):
            frames[(archnodes*3)].insert((archnodes*3), (archstartred[x]))
            frames[(archnodes*3)+1].insert(((archnodes*3)+1),(archstartgrn[x]))
            frames[(archnodes*3)+2].insert(((archnodes*3)+2),(archstartblu[x])) 
```

我不断收到此错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "backandforth3.py", line 99
    for f in range (0, workingframes):
                                     ^
SyntaxError: invalid syntax 
```

我尝试对“f”使用不同的值。我试过删除冒号（这会导致其他语法错误。）我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T19:44:13.843

问题在这里：

```
frames = reshape(frames, ((archnodes*3),workingframes)    #reshapes array 
```

你有三个`(`和两个`)`。Python 认为 reshape() 调用没有在行尾结束，因此它继续向下执行文件，直到遇到`for`and `:`，这在函数调用中没有意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T19:44:06.670

缺少括号：

```
frames = reshape(frames, ((archnodes*3),workingframes) 
```

# wpf - 使用 PRISM4 检测验证错误

> ID：11638159
> 
> 赞同：1
> 
> 时间：2012-07-24T19:41:59.247
> 
> 标签：wpf, prism, prism-4

我正在使用 Prism 4 和 WPF 做一个应用程序，我有一些输入验证，它按预期工作，但是当用户单击一个按钮时，我需要在那一刻知道是否存在验证错误。

Prism4 是否已经实施了一些措施来处理这个问题，或者我必须手动实施它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:00:48.070

处理验证错误不是 Prism 作为库的一部分提供的。prism 确实提供了在实现验证时有用的是[`IConfirmNavigationRequest`界面](http://msdn.microsoft.com/en-us/library/microsoft.practices.prism.regions.iconfirmnavigationrequest_members%28v=pandp.40%29.aspx)，它使您能够在某些情况下停止导航 - 例如当页面未通过验证时。

要在您的应用程序中实现验证，我建议使用该[`IDataErrorInfo`接口](http://codeblitz.wordpress.com/2009/05/08/wpf-validation-made-easy-with-idataerrorinfo/)（或`INotifyDataErrorInfo`在 .NET 4.5/Silverlight 中）。

**编辑**

要知道您的视图是否通过了验证，您需要在视图模型中公开一个`IsValid`将返回此信息的属性。一种方法是检查视图模型并返回此数据；另一种方法是让您`ViewBase`使用 , 注册其错误事件，并在您的视图模型上`Validation.AddErrorHandler`调用`ViewModelBase.AddError()`/ 。`ViewModelBase.RemoveError()`这样，您的视图模型就知道验证错误，并且可以轻松地返回视图是否有效。

# excel - 从两个文件中复制数据并将其输入到比较表中

> ID：11638163
> 
> 赞同：0
> 
> 时间：2012-07-24T19:42:05.580
> 
> 标签：excel, excel-2007, vba

我有两份名为 Old Cal 和 New Cal 的文件。我希望能够从每个单独的文件中获取表格并自动将它们复制到新的比较文件中。唯一的问题是，每次收集数据时，都会不断有新的文档需要输入到新的比较表中。例如，这一次文件被称为 Old Cal 和 New Cal，但在这些比较之后，我将拥有两个名为 Blue 和 Red 的全新文件，其中包含我需要在另一个新页面上比较的全新信息。我需要帮助编写一个宏，该宏可以自动填充我每次需要在两个文档之间制作的比较表，即使每次都会有不同的文件。如果需要更多信息，请告诉我，欢迎提供任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:30:01.090

正如蒂姆威廉姆斯所说，使用`Application.GetOpenFilename()`是一个很好的解决方案。它将打开标准的 excel 打开文件对话框，但实际上不会打开文件，它只是为您提供文件名。

要实际打开工作簿，您可以使用`Application.Workbooks.Open()`. 这是您可以修改以供使用的代码片段。

```
Dim file1 as String
Dim file2 as String
Dim book1 as Workbook
Dim book2 as Workbook
Dim comp as Workbook
Dim targetSheet as Worksheet
Dim copySheet as Worksheet
Dim lastRow as Long
Dim lastCol as Long

Set comp = Application.ActiveWorkbook

file1 = Application.getOpenFilename
file2 = Application.getOpenFilename

If file1 <> "False" AND file2 <> "False" Then
   Set book1 = Application.Workbooks.Open(file1)
   Set book2 = Application.Workbooks.Open(file2)

   'Copy the contents from the first sheet of each of the files to a new sheet in a new sheet
   comp.Worksheets.add After:=comp.Worksheets(comp.Worksheets.count)
   Set targetSheet = comp.Worksheets(comp.Worksheets.count)
   Set copySheet = book1.Worksheets(1)
   lastRow = copySheet.Cells.SpecialCells(xlCellTypeLastCell).Row
   lastCol = copySheet.Cells.SpecialCells(xlCellTypeLastCell).Column
   copySheet.Range(copySheet.Cells(1, 1), copySheet.Cells(lastRow, lastCol)).Copy
   targetSheet.Cells(1, 1).PasteSpecial

   Set copySheet = book2.Worksheets(1)
   lastRow = copySheet.Cells.SpecialCells(xlCellTypeLastCell).Row
   lastCol = copySheet.Cells.SpecialCells(xlCellTypeLastCell).Column
   copySheet.Range(copySheet.Cells(1, 1), copySheet.Cells(lastRow, lastCol)).Copy
   lastRow = targetSheet.Cells.SpecialCells(xlCellTypeLastCell).Row
   targetSheet.Cells(lastRow, 1).PasteSpecial

   book1.Close
   book2.Close
End If 
```

这可能不会完全解决您的问题，但它应该是一个很好的起点。现在，它会将两个工作簿的第一张表（一个在另一个之上）复制到原始工作簿中的新工作表上。

希望这会有所帮助，欢迎来到 SO

# python - 在 LIbre Office Calc 中编写宏需要什么语言？

> ID：11638170
> 
> 赞同：14
> 
> 时间：2012-07-24T19:42:39.713
> 
> 标签：python, macros, libreoffice, calc

我已经为 Excel 中的各种内容编写了一堆 VBA 代码。我正在考虑迁移到 libreOffice。在 Tool->Macros->Organize Macros 下：两个选项是 LibreOffice Basic 和 Python。

我应该学习其中之一，两者，还是其他东西。我完全是在浪费时间吗？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-24T20:03:55.453

Python是要走的路。

从这里开始：[http ://wiki.python.org/moin/BeginnersGuide](http://wiki.python.org/moin/BeginnersGuide)

不，你没有浪费时间。你会回头说，我为什么不早点做。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-05T21:01:19.150

Python 是一项很好的学习技能——我用它来做任何事情。它是几乎所有工具的胶水语言（您甚至可以将它与 .Net 一起使用）。

然而，Python + LibreOffice 的文档目前有点粗略，尽管我对 Calc 没有太多经验。

[在http://documenthacker.wordpress.com](http://documenthacker.wordpress.com)（或很快[www.documenthacker.com](http://www.documenthacker.com)）上有一些工作中的文档。它有使用 Writer 而不是 Calc 的示例，但您可能仍然会发现它很有用。

# ruby-on-rails-3 - 多态form_for

> ID：11638171
> 
> 赞同：0
> 
> 时间：2012-07-24T19:42:41.667
> 
> 标签：ruby-on-rails-3

我正在尝试在页面上创建添加评论表单，但它需要在同一页面上出现多次。

这是我的模型。我正在使用 Mongoid 3.0，但我认为这并不重要。模型工作正常。

```
class Project
  include Mongoid::Document
  ...
  embeds_many :comments, :as => :commentable
  ...
end

class Suggestion
  include Mongoid::Document
  ...
  embeds_many :comments, :as => :commentable
  ...
end

class Comment
  include Mongoid::Document
  embedded_in :commentable, :polymorphic => true
  ...
end 
```

我有这些路线

```
suggestion_comments POST   /suggestions/:suggestion_id/comments(.:format) comments#create
project_comments POST   /projects/:project_id/comments(.:format)       comments#create 
```

我通过以下方式调用表格：

```
= render partial: "comments/new", locals: { :commentable => stream.project }
= render partial: "comments/new", locals: { :commentable => stream.suggestion } 
```

如何创建 form_for？我试过这个，但它不起作用。此外，由于我需要在页面上多次显示此内容，因此在页面上`id`重复的 CSS 会导致此页面上的 JavaScript 出现问题。

```
= form_for commentable.comments, remote: true do |f|
  %fieldset
    .control-group
      .controls
        = f.text_area :content, :required => true, :placeholder => "Add a comment...", :maxlength => "1000"
    .form-actions
      = f.submit "Post" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:54:10.740

经过大量尝试，我终于想通了......原来很简单：

```
= simple_form_for([commentable, Comment.new], :remote => true) do |f| 
```

# jquery - 背景尺寸：封面 - Firefox 问题

> ID：11638173
> 
> 赞同：0
> 
> 时间：2012-07-24T19:42:49.277
> 
> 标签：jquery, html, css

我正在尝试`background-size : cover`在我的页面中使用，它似乎在除 firefox 之外的所有浏览器上都能正常工作（我还没有检查 IE ......但我现在想修复 firefox 问题）。

这是我的[小提琴](http://jsfiddle.net/bdAcX/1/)

知道为什么它不能在 Firefox 中工作吗？通常，`background-size : cover`在 Firefox 中工作。页面中的 jQuery 脚本似乎有问题。但它在 Safari 和 Chrome 中运行良好。

尝试调整浏览器窗口的大小，你会明白我的意思。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:01:05.750

换行

`$(this).css('background','url(' + preloadArr[currImg++%preloadArr.length].src +') top center no-repeat');`

至

`$(this).css('background-image','url(' + preloadArr[currImg++%preloadArr.length].src +')');`

然后相应地设置背景位置和背景重复。

当您设置`background`属性时，FF 会覆盖该`background-size`属性。

[http://jsfiddle.net/bdAcX/2/](http://jsfiddle.net/bdAcX/2/)

# php - PHP/MySQL 循环的问题

> ID：11638175
> 
> 赞同：0
> 
> 时间：2012-07-24T19:42:51.317
> 
> 标签：php, mysql, grid-system

我正在研究网格系统中的一个循环，该循环一次显示 2 个网格行，每行 3 个内联图像（分页）。我一直在尝试调试我的代码以`<div id="clear"></div>`在每 3 个返回的 MySQL 行后显示，但没有成功。

**PHP/HTML**

```
<ul class="clean" style="width:940px; height:465px;">
  <?php
  $result = mysql_query("SELECT * FROM images");
  $i=0;
  //Begin image loop
  while($row = mysql_fetch_array($result)){
  //Start counter
  $i++;
  $n = ($i + 5);
  $class = "";
  $clear = "";

  //Generate classes 
  if (($i % 3) == 1){
      $class = "alpha";
  }
  if (($i % 3) == 0){
      $class = "omega";
  }

  //Generate list items
  if (($n % 6) == 0){?>

  <li class="clearfix"> 
    <?php }if (($i % 4) == 0){?>
    <div id="clear"></div>
    <?php }?>
    <div class="grid_4 <?php echo $class;?>">
      <p><a href="<?php echo $row["src"];?>" alt="<?php echo $row["alt"];?>">
      <img src="<?php echo $row["src"];?>" alt="<?php echo $row["alt"];?>" />
      </a><br />
      <small class="center"><?php echo $row["excerpt"];?></small></p>
    </div>
    <?php if (($i % 6) == 0){?>
  </li> 
  <!-- //slide --> 
  <?php }} //End image loop?>
</ul> 
```

我如何设置网格是，在从左到右的每个网格行中，都有一个`alpha`分配给第一个元素的`omega`类和一个分配给最后一个元素的类。为了在`<div id="clear"></div>`技术上每 3 个返回 MySQL 行后显示，这应该有效：

**生成的列表项**

```
<?php 
if (($n % 6) == 0){?>

<li class="clearfix"> 
<?php }if (($i % 4) == 0){?>
  <div id="clear"></div>
<?php }?> 
```

然而事实并非如此。在等于 18 个总图像的 6 个返回网格行内，它`<div id="clear"></div>`在 MySQL 行 1-3 和 13-15 之后生成良好，但对于 MySQL 行 6-9，`<div id="clear"></div>`显示在 MySQL 行 6 之后，它应该在 9 之后显示。

我希望这是有道理的，任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:26:19.937

See if something like this would work for you.

```
<?php
$i = 1;
$result = mysql_query("SELECT * FROM images");

$max_count = mysql_num_rows($result);

if($max_count > 0)
{
?>
<ul>
<?php
while($row = mysql_fetch_array($result)) {
    if($i % 3 == 1) {
        $class = 'alpha';
    } elseif($i % 3 == 0) {
        $class = 'omega';
    } else {
        $class = ''; //Do NOT carry through the loops
    }

    if($i % 6 == 1 || $i == 1) {
?>
    <li>
<?php
    }
?>
        <div class="grid_4 <?php echo $class ?>">
            <p>
                <a href="<?php echo $row["src"];?>" alt="<?php echo $row["alt"];?>"><img src="<?php echo $row["src"];?>" alt="<?php echo $row["alt"];?>" /></a>
                <br />
                <small class="center"><?php echo $row["excerpt"];?></small>
            </p>
        </div>
<?php
    if($i % 3 == 0) {
?>
        <div class='clear'>&nbsp;</div>
<?php
    }

    if($i % 6 == 0 || $i == $max_count) {
?>
    </li>
<?php
    }

    $i++; //Move Row Count Along
}
?>
</ul>
<?php
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:55:36.727

好的，所以我认为这与您的`if (($i % 4) == 0)`陈述有关。您应该使用 3 的模数，而不是 4。**这将`<div id="clear"></div>`在第一行给出您的 a。**

为了防止这种情况，您可以说：

`if ((($i % 3) == 0) && $i != 0)`

试试看，让我知道它是否适合你！

# php - 用二维数组数据填充 MySQL 表

> ID：11638176
> 
> 赞同：0
> 
> 时间：2012-07-24T19:42:52.103
> 
> 标签：php, mysql

我想用 2-dim 数组数据填充 MySQL 表：

```
 for($i=0; $i<sizeof($arr); $i++)
    {
    $query1="INSERT INTO `fsTest` (`id`,`xxx`,`yyy`,`zzz`)  
        VALUES('$arr[$i][0]','$arr[$i][1]','$arr[$i][2]','$arr[$i][3]');";
    $result1=DatabaseConnector::ExecuteQuery($query1);
    } 
```

当我检查表“fsTest”时，我只能看到 1 行包含以下条目 [0] [1] [2] [3]。如何解决这个问题？

更新：另一件事是我使用 $arr[$i][] = $val; 填充数组。var_dump($arr) 返回 Arrayint(0)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:47:10.177

您需要在变量名周围加上花括号：

```
$query1 = "
    INSERT INTO `fsTest` (`id`,`xxx`,`yyy`,`zzz`)  
        VALUES('{$arr[$i][0]}','{$arr[$i][1]}','{$arr[$i][2]}','{$arr[$i][3]}');
"; 
```

否则，解析器是惰性的，将`$arr[$i]`首先找到并尝试将该值作为字符串插入，而不是`$arr[$i][0]`.

一个简单的示例演示了这种行为：

```
$array = array( array( 'value'));
echo "$array[0][0]"; // Fails, Array to string conversion
echo "{$array[0][0]}"; // Prints value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:49:15.830

```
for($i=0; $i<sizeof($arr); $i++)
{
$query1="INSERT INTO `fsTest` (`id`,`xxx`,`yyy`,`zzz`)  
    VALUES('".$arr[$i][0]."','".$arr[$i][1]."','".$arr[$i][2]."','".$arr[$i][3]."');";
$result1=DatabaseConnector::ExecuteQuery($query1);
} 
```

# sql - TSQL：用于检索多条记录和引用表中的数据的存储过程

> ID：11638181
> 
> 赞同：1
> 
> 时间：2012-07-24T19:43:04.030
> 
> 标签：sql, sql-server-2008, tsql, stored-procedures

我是 SQL 的初学者，尤其是 TSQL 的初学者。我需要为 SQL Server 2008 编写一个 SP，它将读取所有符合某些条件的记录，然后在不同的结果集中读取它们相关的类别、成分、单位等。为了阅读一个元素，我的 SP 是：

```
-- Select the recipe 
SELECT Recipe.*
FROM Recipe
WHERE Recipe.RecipeId = @RecipeId

-- Select the categories themselves
SELECT Category.*
FROM Category
JOIN RecipeCategory ON RecipeCategory.CategoryId = Category.CategoryId
WHERE RecipeCategory.RecipeId = @RecipeId

-- Select the ingredient information for the recipe
SELECT RecipeIngredient.*
FROM RecipeIngredient
JOIN Recipe ON Recipe.RecipeId = RecipeIngredient.RecipeId
WHERE Recipe.RecipeId = @RecipeId

-- Select the ingredients themselves
SELECT Ingredient.* 
FROM Ingredient 
JOIN RecipeIngredient ON RecipeIngredient.IngredientId = Ingredient.IngredientId
JOIN Recipe ON Recipe.RecipeId = RecipeIngredient.RecipeId
WHERE Recipe.RecipeId = @RecipeId  

-- Select the units that are associated with the ingredients    
SELECT Unit.*
FROM Unit
JOIN Ingredient ON Ingredient.UnitId = Unit.UnitId
JOIN RecipeIngredient ON RecipeIngredient.IngredientId = Ingredient.IngredientId
WHERE RecipeIngredient.RecipeId = @RecipeId 
```

我如何将其转换为阅读所有具有`Name like '%..%'`

由于桌子上有数百万种食谱，我想尽可能高效地完成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:21:00.393

要按名称（使用通配符）选择食谱，您可以更改您的 proc 以执行以下操作：

```
-- Get a list of name-matched RecipeIDs
DECLARE @RecipeIDs TABLE (
    RecipeID int not null primary key
)
INSERT INTO @RecipeIDs (RecipeID)
SELECT Recipe.RecipeID
FROM Recipe
-- Change the parameter of the proc from @RecipeId to @Name
WHERE Recipe.Name like '%' + @Name + '%'

-- Select the recipes 
SELECT Recipe.*
FROM Recipe
WHERE Recipe.RecipeId in (select RecipeID from @RecipeIDs)

-- Select the categories themselves
SELECT Category.*
FROM Category
    JOIN RecipeCategory ON RecipeCategory.CategoryId = Category.CategoryId
WHERE RecipeCategory.RecipeId in (select RecipeID from @RecipeIDs)

-- Select the ingredient information for the recipes
SELECT RecipeIngredient.*
FROM RecipeIngredient
    JOIN Recipe ON Recipe.RecipeId = RecipeIngredient.RecipeId
WHERE Recipe.RecipeId in (select RecipeID from @RecipeIDs)

-- Select the ingredients themselves
SELECT Ingredient.* 
FROM Ingredient 
    JOIN RecipeIngredient ON RecipeIngredient.IngredientId = Ingredient.IngredientId
    JOIN Recipe ON Recipe.RecipeId = RecipeIngredient.RecipeId
WHERE Recipe.RecipeId in (select RecipeID from @RecipeIDs)  

-- Select the units that are associated with the ingredients    
SELECT Unit.*
FROM Unit
    JOIN Ingredient ON Ingredient.UnitId = Unit.UnitId
    JOIN RecipeIngredient ON RecipeIngredient.IngredientId = Ingredient.IngredientId
WHERE RecipeIngredient.RecipeId in (select RecipeID from @RecipeIDs) 
```

我首先获取与新 @Name 参数匹配的所有配方 ID，然后使用`IN`而不是获取结果集`=`。

就性能而言，请确保在尝试优化速度之前首先获得正确的结果。但是，如果您遇到性能问题，还有其他一些方法可以编写查询。例如，如果匹配的 ID 列表变得很大，您可能宁愿使用临时表而不是表变量来保留列表，或者只是将名称匹配部分单独嵌入到每个选择中。也许加入 RecipeID 会比`IN`. 当然，在所有这些情况下，SQL 引擎可能会做很多相同的事情（毕竟 SQL 本质上是[声明性](https://en.wikipedia.org/wiki/Declarative_programming)的）。表的索引也可以发挥作用。请让我们知道这对您有何影响。

# mysql - 如何限制列表中的项目，但仍然在 MYSQL 中显示完整的组？

> ID：11638182
> 
> 赞同：1
> 
> 时间：2012-07-24T19:43:03.943
> 
> 标签：mysql, sql, limit

我有以下数据集：

```
update (id, update_time)
1    <a timestamp>
2    <a timestamp>

item_update (update_id, item_id)
1    327
1    328
1    496
2    345
2    477 
```

我想要做的是在页面中按如下方式显示它们：

```
2012 年 3 月 6 日：
327
328
496

2012 年 7 月 7 日：
345
477

```

或多或少。问题是数据集预计会变得非常大。我不能在一个页面中拥有所有这些。但是，如果我只是将它们限制为任意数量，那么这些组会在中间被切断。如果我通过更新来限制它们，那么我可能会在一个页面中得到太少而在另一页面中得到太多。

如何限制结果集，以便在不超过一定数量的项目的情况下获得尽可能多的组（更新）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:14:51.977

以下查询

```
select a.id, floor(ifnull(sum(b.update_count),0) / 50) as start_page
from updte as a
left join
    (select update_id, case when count(1) > 50 then 50 else count(1) end as update_count
     from item_update group by update_id) as b
  on a.id > b.update_id
group by a.id 
```

将为您提供每个组应该开始的页码`update_id`（假设我们希望在页面上显示不超过 50 个项目，除非组中的项目超过 50 个）。知道`start_page`每个`update_id`您只能显示相关`update_id`的`item_update`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:58:31.263

我假设您不想拆分组，那么您可以简单地

```
select update_id, count(*) cnt from item_update group by update_id; 
```

这将为您提供每个 update_id 的计数。然后，只需遍历 update_ids，直到您的累积达到（或超过）您的页面最大值，然后为所有这些 update_ids 触发另一个查询......

可能存在边缘情况，其中一个更新组有 1 个项目，下一个有 1000 个项目......在那里，让您的分页在组上中断可能是有意义的......

```
page1

group1
  item1
  item2
  item3
group2
  item1
  item2

page2

group2
  item3
  item4
  etc... 
```

那么只需将limit子句与排序一起使用......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:01:41.243

您可以使用此解决方案：

```
SELECT     b.update_time, a.item_id           
FROM       item_update a
INNER JOIN updte b ON a.update_id = b.id
LEFT JOIN  item_update c ON a.update_id = c.update_id
      AND  a.item_id <= c.item_id
GROUP BY   a.update_id, a.item_id
HAVING     COUNT(1) <= 2 
```

`2`子句中的`HAVING`是每组要限制的项目数（通过每组最高的*n*`item_id`来限制）。您可以使用演示摆弄此解决方案：

## [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d0a55/39/0)

请注意，如果您将 更改`2`为 a `3`，您将在 3 月 6 日获得更多结果。

* * *

如果您希望结果分层显示，您可以这样做：

```
SELECT a.val
FROM
(
    SELECT     CONCAT('- - - -> ', a.item_id) AS val,
               CONCAT(b.update_time, a.item_id) AS orderfactor
    FROM       item_update a
    INNER JOIN updte b ON a.update_id = b.id
    LEFT JOIN  item_update c ON a.update_id = c.update_id AND a.item_id <= c.item_id
    GROUP BY   a.update_id, a.item_id
    HAVING     COUNT(1) <= 2

    UNION ALL

    SELECT DATE_FORMAT(update_time, 'On %M %e, %Y:'), 
           update_time
    FROM   updte
) a
ORDER BY a.orderfactor 
```

## [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d0a55/16/0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T20:06:54.317

找到了答案，虽然它并不漂亮。

基本上，我要先找到`update_id`item_update中所有的唯一性，如下：

```
(SELECT * FROM 
    (SELECT update_id 
     FROM item_update
     WHERE update_id < :my_last_id_from_previous_page
     ORDER BY update_id DESC
     LIMIT 0, :limit
) as inner_query
GROUP BY update_id) as outer_query 
```

结果表为我提供了所有必须返回的组，因此剩下的就是小菜一碟：

```
SELECT item_id, update.id, update_time FROM outer_query
INNER JOIN item_update ON (item_update.update_id = outer_query.update_id)
INNER JOIN update ON (item_update.update_id = update.id) 
```

# php - 在 PHPUnit 中使用流畅接口时如何启用严格的数据类型检查？

> ID：11638185
> 
> 赞同：1
> 
> 时间：2012-07-24T19:43:11.540
> 
> 标签：php, mocking, phpunit

以下代码在运行时通过了测试。我怎样才能改变它，让它抱怨`123`和之间的区别`'123'`？

```
$obj = $this->getMockBuilder('Namespace\Object')
    ->disableOriginalConstructor()
    ->getMock();
$obj
    ->expects($this->once())
    ->method('do')
    ->with($this->equalTo('123')); // String

$obj->do(123); 
```

如何启用严格的数据类型检查？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T20:36:45.950

该`with`函数需要一个`PHPUnit_Framework_Constraint`.

这些列表可以[**在源代码中找到**](https://github.com/sebastianbergmann/phpunit/blob/3.6/PHPUnit/Framework/Assert.php#L2108)

我认为您正在寻找的是：

```
->with($this->identicalTo('123')); 
```

# google-docs-api - Google Apps 管理员可以使用 Drive SDK 管理用户文件吗？

> ID：11638186
> 
> 赞同：7
> 
> 时间：2012-07-24T19:43:12.297
> 
> 标签：google-docs-api, google-apps, google-drive-api

新`Drive SDK`的对于经过身份验证的用户来说非常好。是否可以`Drive SDK`使用 Google Apps 管理权限来模拟其他域用户？

doclist API 可以做到，但无法使用此工具管理和复制文件（pdf、jpg）。

我在这段代码中使用 Java：

```
credential_origine = new GoogleCredential.Builder().setTransport(HTTP_TRANSPORT)
                    .setJsonFactory(JSON_FACTORY)
                    .setServiceAccountId("[email from console api]")
                    .setServiceAccountScopes(DriveScopes.DRIVE)
                    .setServiceAccountUser("user@domain.com")
                    .setServiceAccountPrivateKeyFromP12File(new File("key.p12")).build(); 
```

但是当我尝试检索 user@domain.com 的数据时出现错误。如果我评论`.setServiceAccountUser("user@domain.com")`该代码对于我用于创建密钥的同一帐户非常有效。

在旧的 DOCList API 中，我们通过请求的 URL 模拟了另一个用户。是不是类似的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T20:52:27.557

您可以使用[服务帐户](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)并在构建断言声明时指定要模拟的用户来执行此操作。

在 API 项目中创建服务帐户密钥后（从[API 控制台](https://code.google.com/apis/console)），您必须将此项目添加到 cPanel 中的授权第三方应用程序列表中。可以在[此处](http://support.google.com/a/bin/answer.py?hl=en&answer=162106)找到有关此的更多信息。您需要使用的“客户 ID”是绑定到服务帐户密钥的，看起来像`<APP_ID>-<OTHER_KEY>.apps.googleusercontent.com`

由于您要管理其他用户文件，因此您必须授权 Drive 范围广泛：`https://www.googleapis.com/auth/drive`.

我们的大多数客户端库都负责为开发人员抽象声明生成。如果您可以指定您计划使用的语言，我可以通过提供代码片段来帮助您入门来更新此答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:53:10.613

升级：

编码：

```
com.google.api.client.googleapis.auth.oauth2.GoogleCredential.Builder credential_origine_builder = new GoogleCredential.Builder().setTransport(HTTP_TRANSPORT)
                    .setJsonFactory(JSON_FACTORY)
                    .setServiceAccountId("[[]]")
                    .setServiceAccountScopes(DriveScopes.DRIVE)
                    .setServiceAccountPrivateKeyFromP12File(new File("cfg/file.p12"));

credential_origine_builder.setServiceAccountUser("user@domain.com"); 
```

工作正常。

如果我们`.setServiceAccountScopes(DriveScopes.DRIVE)`将

```
.setServiceAccountScopes(DriveScopes.DRIVE,Oauth2Scopes.USERINFO_EMAIL,Oauth2Scopes.USERINFO_PROFILE) 
```

用于检索用户的名称和 ID 似乎不兼容 `.setServiceAccountUser("user@domain.com");`

使用 3 个作用域仅适用于密钥的用户“所有者”...继续构建

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-04T15:49:33.760

好的，这里是[Dartlang](https://www.dartlang.org/)中的完整代码，用于列出带有 JSON 键的模拟 USER@YOUR_DOMAIN 用户文件

要运行它，您需要通过[Google Developer Console](https://console.developers.google.com/)生成 JSON 密钥（而不是 P12） （在项目的上下文中：Apis & auth -> credentials） ![生成 JSON 密钥](../Images/b334bfa0426ded10a3eac9863985c497.png)

Dart 项目在 pubspec.yaml 中的依赖项：googleapis googleapis_auth async)

```
import 'package:googleapis/drive/v2.dart';
import 'package:googleapis_auth/auth_io.dart';
import 'package:async/async.dart';

final _credentials = new ServiceAccountCredentials.fromJson(r'''
{
  "private_key_id": "*PRIVATE_KEY_ID*",
  "private_key": "*PRIVATE_KEY_CONTENT*",
  "client_email": "*SOMETHING@developer.gserviceaccount.com*",
  "client_id": "*SOMETHING.apps.googleusercontent.co*m",
  "type": "service_account"
}
''', impersonatedUser: "*USER@YOUR_DOMAIN*");  //here you type user

const _SCOPES = const [DriveApi.DriveScope];

main() async {
  var http_client = await clientViaServiceAccount(_credentials, _SCOPES);
  var drive = new DriveApi(http_client);
  var docs = await drive.files.list(maxResults: 10);

  for (var itm in docs.items) {
    print(itm.title); //list docs titles
  }
} 
```

# javascript - 方法、函数和对象

> ID：11638189
> 
> 赞同：0
> 
> 时间：2012-07-24T19:43:19.780
> 
> 标签：javascript, function, object, methods

过去几周我一直在学习代码学院，目前我正在学习 Javascript 基础知识 (42%) 的对象、函数和方法部分。我真的没有跳过任何内容，因为我真的很想好好学习。但是，我在理解函数、方法和对象的使用方面遇到了一些问题。

我了解一个对象是存储诸如现实世界信息之类的信息：

```
personObj=new Object();     
personObj.firstname="John";
personObj.lastname="Doe";
personObj.age=30;
personObj.eyecolor="blue"; 
```

另外，构造函数到底是什么？.this 是什么意思？

我也学会了创建函数，方法是

```
var whatever = new Function(){
 then whatever here
} 
```

但在代码学院，他们开始编写代码：

```
function whatever(){
Then Whatever
} 
```

有什么不同？我希望有人在“傻瓜的Javascript”类型中进行解释...

再次感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:08:31.883

> 究竟什么是构造函数？

它们是为初始化对象而调用的函数。在 JavaScript 中，它们与[`new`关键字](https://developer.mozilla.org/en/JavaScript/Reference/Operators/new)一起实例化新对象。但是，最好不要使用`new Object();`空对象文字`{}`。

> .this 是什么意思？

[`this`关键字](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)引用当前上下文对象。在“方法”中，这通常是对象本身，但是一旦您独立调用函数，它可能会指向其他地方（最常见的错误 #2）。

> 我也学会了创建函数，方法是`new Function(){ ... }`

我希望你没有。这在语法上是无效的。您可以使用*strings*`Function`的构造函数创建函数，但绝不应该这样做。

 *> 在代码学院，他们开始编写代码：
> 
> `function whatever(){ ... }`

这是声明函数的标准方法。用它。然而，第二种可能性是函数表达式，它通常甚至是匿名的。请参阅[JavaScript 中的函数表达式与声明有什么区别？](https://stackoverflow.com/q/1013385/1048572)，一个简单的例子：

```
function a() {
    ...
}
setTimeout(a, 500);
// or
setTimeout(function  () {
    ...         // ^^ a name could be inserted here if you need
                // to reference the function from inside
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T21:01:18.773

嘿，codecademy 哥们，我也上过同样的课程 :)
看看我能不能回答你的问题！

*   **“我知道一个对象是存储诸如现实世界信息之类的信息”**
    这并不完全准确。当 codecademy 以这种方式描述一个对象时，他们试图向您展示一个可以使用该对象的真实应用程序。
    一个对象实际上很像一个函数，但有一些区别：一个对象是“实例化的”。当一个对象被这样创建`personObj=new Object();`或像这样“构造”（我稍后会谈到）`var newPerson = new Person(parameters);`时，它会创建一个对象的特定实例。就其本身而言，一个对象只是一个想法，但是当您调用或“实例化”一个对象时，您正在创建它的一个特定实例，该实例可以在代码的其他地方引用。请参阅下一个答案以进行澄清！

*   **“另外，构造函数到底是什么？.this 是什么意思？”**
    构造函数就像模板或蓝图。它是将对象视为一个想法，当您创建一个新对象时，构造函数可以通过预先定义一些新对象的特性来为您节省一些时间。它为对象提供“方法”和属性（如`.name`）。一个方法就像一个有家的函数！方法是属于对象的函数，只能在引用对象时调用。函数的属性是特定于对象的变量，或该对象的“公共变量”。.dot 表示法是一种查看对象内部并引用其属性的方式。当您使用时，`this.name`您正在创建一个`name`属于 Person 对象的公共变量。`this`是一个关键字，它引用它在其中声明的函数（您将在即将到来的课程中了解更多关于这一切的信息，以及关于私有变量的信息）。

    这是一个例子：

    ```
    //Defines a constructor for making Person objects
    function Person(name, age){
      //creates a public variable "name" for all new People and assigns the name parameter to it 
      this.name = name;
      //creates a public variable "age" for all new People and assigns the age parameter to it 
      this.age = age;
      //creates a highFive() function that belongs to a Person
      this.highFive = function(){
        console.log("Thanks for the high-five bud!");
      };
    } 
    ```

    这是一个构造函数。它是一个具有 name 和 age 属性的空白 Person，并且是一种让您高五的方法。它还没有被实例化，所以程序中不存在唯一的人。如果您需要结交很多人，它只是节省您时间的工具。
    如果我们想创建一个特定的人，我们可以这样做：
    `var thatGuyJim = new Person("Jim",25);`
    这是一个实例化的 Person 对象。它具有公共变量`name`和`age`，分别设置为 Jim 和 25。`thatGuyJim`当您提到保存对象实例的变量时，程序可以引用它。例如，如果我们想要高五吉姆，我们会这样做：`thatGuyJim.highFive()`
    当我们这样做时，我们正在使用该`highFive()`方法，一个属于 Person 构造函数的函数，并将其应用于我们的新 Person 对象`thatGuyJim`. 这将打印“感谢高五芽！” 到控制台。

*   **`var whatever = new Function(){stuff}`“和有什么区别`function whatever(){stuff}`？”**
    嗯，`var whatever = new Function(){stuff};`是定义函数的正常方式。
    `function whatever(){stuff}`另一方面是对象构造函数。将对象构造函数视为可以制作许多独特副本的复杂函数可能会有所帮助。从这行开始`function`让代码知道您正在声明一个新的对象构造函数而不是定义一个新函数，`whatever()`它是名称和参数，并且`{stuff};`可以保存它的变量和方法，或者只是它可以做的事情。

我希望这可以让您更深入地了解对象的性质，请随时要求我澄清任何事情 - 我会在工作时定期检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T19:48:18.553

将构造函数视为为您设置对象然后返回它们的函数。也就是说，它们指定对象的方法（它们可以做的事情）和属性（描述它们的事情）。

非常不建议使用 Function 原型；创建匿名函数的常用方法是 via `function () { /* stuff */ }`（大小写很重要！）。说到这里，第一种方法将创建一个匿名函数（即内部没有名称——您可以使用`name`属性检查），而第二种方法将创建一个命名函数（因此将设置 name 属性）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T19:53:31.040

**1.**在一般的面向对象编程中，构造函数准备一个对象以供使用。它们在创建类时被调用，并用于实例化类。

在 JavaScript 中，构造函数只是一个常规函数。例如：

```
// constructor with parameter `name`

function cat(name) {
 this.name = name;
 this.talk = function() {
    alert( this.name + " say meeow!" )
 }
} 

cat1 = new cat("nyan")
cat2 = new cat("puss")

cat1.talk() // nyan say meeow!
cat2.talk() // puss say meeow! 
```

**2.**函数声明和函数表达式的主要区别是：

```
//expresssion

whatever(); // results in error
var whatever = new Function(){
 then whatever here
} 
```

-

```
// declaration

whatever(); // doesn't result in error
function whatever(){
Then Whatever
} 
```*

# c# - 有没有办法统一构造函数注入注册类型和具体值

> ID：11638190
> 
> 赞同：2
> 
> 时间：2012-07-24T19:43:21.207
> 
> 标签：c#, unity-container

我相应地定义了 3 个接口和 3 个类。类 A 依赖于接口 B，接口 B 依赖于接口 C 和一个具体类。我的示例代码看起来像

```
public interface IA
{
}

public class A : IA
{
    private IB b;

    public A(IB b)
    {
        this.b = b;
    }
}

public interface IB
{
}

public class B : IB
{
    private IC c;
    private string myValue;

    public B(IC c, string myValue)
    {
        this.c = c;
        this.myValue = myValue;
    }
}

public interface IC
{
}

public class C : IC
{
} 
```

特殊的是 B 类，构造函数需要类型和字符串（具体值）。

```
 using (IUnityContainer container = new UnityContainer())
        {
            container.RegisterType<IB, B>()
                .RegisterType<IA, A>()
                .RegisterType<IC, C>();

            IA a = container.Resolve<IA>();
        } 
```

我应该如何在代码中定义以指示容器将 IC 和字符串值注入 B 类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:48:36.320

[这](http://msdn.microsoft.com/en-us/library/ff660882%28v=pandp.20%29.aspx)提供了将值注入已注册对象的详细信息。它被称为 InjectionConstructor 并提供您正在寻找的方法。一点也不难。您可以使用 Unity 做很多事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:48:17.963

您可以将 InjectionConstructor 传递给您的注册。

```
container.RegisterType<IB, B>(new InjectionConstructor(container.Resolve<IC>(), "myvalue-value")); 
```

# c# - 将“名称”属性添加到 CheckBoxFor

> ID：11638191
> 
> 赞同：12
> 
> 时间：2012-07-24T19:43:22.033
> 
> 标签：c#, asp.net-mvc-3, razor, entity

我正在尝试向我添加“名称”属性，`CheckBoxFor`但无法使其正常工作。

```
@Html.CheckBoxFor(
model => model.ProvidePracticalSuggestions, 
new { @name = "help_practicalSuggestions" 
                }) 
```

知道我在这里做错了什么吗？

呈现的 HTML：

```
<div>
      <input data-val="true" data-val-required="The Provide practical suggestions for implementing change, e.g. step-by-step best practices field is required." id="ProvidePracticalSuggestions" name="ProvidePracticalSuggestions" type="checkbox" value="true" /><input name="ProvidePracticalSuggestions" type="hidden" value="false" />
       <span class="field-validation-valid" data-valmsg-for="ProvidePracticalSuggestions" data-valmsg-replace="true"></span>
       <label for="ProvidePracticalSuggestions">Provide practical suggestions for implementing change, e.g. step-by-step best practices</label>
</div> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-24T20:07:42.413

***于2016* 年 9 月 7 日**编辑****

 *****这行不通**

```
@Html.CheckBoxFor(model => model.ProvidePracticalSuggestions,
                                              new { name = "help_practicalSuggestions"   }) 
```

**但这会起作用**

```
@Html.CheckBoxFor(model => model.ProvidePracticalSuggestions,
                                              new { Name = "help_practicalSuggestions"   }) 
```

`"N"`诀窍是使用大写字母`"Name"`

* * *

**我不认为这是可能的**。使用 HTML Helper 方法时，您不能更改`name`复选框元素的属性。出于好奇，我查看了 MVC 源代码，并在方法内部发现了一些有趣的东西`InputHelper`，该方法被从方法调用的方法`CheckBoxHelper`调用`CheckBoxFor`

![在此处输入图像描述](../Images/48b83c0b82224be8e25ef7754e93df80.png)

`type`它正在为“ ”、“ `name`”和“ ”调用 MergeAttribute 方法`value`。并且此代码仅适用于**Checkbox**元素

编辑：查看 MergeAttribute 方法，这就是它的样子

```
public void MergeAttribute(string key, string value)
{
    bool flag = false;
    this.MergeAttribute(key, value, flag);
} 
```

所以它是类的调用`MergeAttribute`，`TagBuilder`它看起来像这样

```
public void MergeAttribute(string key, string value, bool replaceExisting)
{
    if (!string.IsNullOrEmpty(key))
    {
        if (replaceExisting || !this.Attributes.ContainsKey(key))
        {
            this.Attributes[key] = value;
        }
        return;
    }
    else
    {
        throw new ArgumentException(CommonResources.Argument_Cannot_Be_Null_Or_Empty, "key");
    }
} 
```

第一个`If`条件返回 true 而内部`if`不会返回 true，因为（我猜）集合`name`中存在。`Attributes`所以它只会执行`return`语句。

**解决方案**：您可以使用该方法，而不是使用`Html.CheckBoxFor`辅助`Html.CheckBox`方法。

```
public static MvcHtmlString CheckBox(
    this HtmlHelper htmlHelper,
    string name
) 
```

所以你的代码会变成

```
@Html.CheckBox("help_practicalSuggestions",Model.ProvidePracticalSuggestions) 
```

第一个参数是输入元素的名称。

此外，如[另一个答案](https://stackoverflow.com/a/18368140/40521)之一所述，如果您使用`new { @Name="MyCustomName"}`and 它将生成带有您传递的名称的复选框元素。但**它不会生成具有此名称的隐藏输入字段**。您的隐藏字段仍将与您的模型属性名称相同。`CheckboxFor`helper 方法通常会[生成隐藏字段](https://stackoverflow.com/questions/5462967/razor-viewengine-html-checkbox-method-creates-a-hidden-input-why)以将复选框的选中/未选中值存储在此隐藏字段中。因此，重要的是您应该将两个字段（复选框及其关联的隐藏字段）名称相同。

所以最好的解决方案是使用`Html.CheckBox`辅助方法。这也将为隐藏字段生成正确的名称。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-08-21T21:36:47.113

实际上，您所要做的就是使用“@Name”（带有大写 N），如下所示，一切都应该正常！:)

```
@Html.CheckBoxFor(
model => model.ProvidePracticalSuggestions,
         new { @Name = "help_practicalSuggestions"}) 
```

干杯!

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-07-24T20:06:53.517

不能那样做。的重点`CheckBoxFor`是自动生成`name`. 如果您想要自己的名字，请使用

```
@Html.CheckBox("help_practicalSuggestions", Model.ProvidePracticalSuggestions) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T19:50:47.320

您不需要名称中的 @ 符号

```
@Html.CheckBoxFor(
model => model.ProvidePracticalSuggestions, 
new { name = "help_practicalSuggestions" }) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-06T05:54:04.797

首先将过滤器添加到调用的模型中`DisplayAttribute`

```
[DisplayAttribute(Name = "Some Text")]
public bool IsChecked { get; set; } 
```

您可以使用标签作为模型

```
@Html.LabelFor(model => model.PropertyName) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T20:48:52.097

只需创建一个临时变量并将其传递给 lambda 表达式。

```
@{var help_practicalSuggestions = Model.ProvidePracticalSuggestions; } 
@Html.CheckBoxFor(model => help_practicalSuggestions) 
```

**更新**

Serg Rogovtsev 实际上是对的。'...For' 版本的辅助函数会自动为您提供 name 属性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-31T16:52:10.743

在 CheckBoxFor 帮助器中，我们使用表达式将控件绑定到属性。属性名称用于设置控件的名称属性。

```
@Html.CheckBoxFor(model => model.IsMarried) 
```

当我将模型属性与复选框绑定时，它会为控件的名称属性分配属性名称本身，如下所示：

呈现的 HTML：

```
<input id="IsMarried" name="IsMarried" type="checkbox" value="true" />
<input name="IsMarried" type="hidden" value="false" /> 
```

您可能可以使用 CheckBox 帮助器来提供 name 属性，或者您可以创建自己的自定义帮助器方法，您可以在其中根据需要分配属性。

欲了解更多信息，请访问：

[http://20fingers2brains.blogspot.in/2013/02/html-checkboxfor-helper-in-mvc3-razor.html](http://20fingers2brains.blogspot.in/2013/02/html-checkboxfor-helper-in-mvc3-razor.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-24T19:50:32.203

尝试不使用@：

```
@Html.CheckBoxFor(model => model.ProvidePracticalSuggestions, new { name = "help_practicalSuggestions" }) 
```***

# javascript - 编码快速排序算法 - 输出不太正确

> ID：11638194
> 
> 赞同：2
> 
> 时间：2012-07-24T19:43:31.363
> 
> 标签：javascript, algorithm, sorting, quicksort

不幸的是，我以前从未自己编写过代码。我的实现在基于对“日期”字段进行排序的自定义类上运行。是的，我完全知道我可以使用内置的 Javascript 排序并指定比较器函数，但这不是我感兴趣的。

目前我从一个反向排序的列表开始，然后在调用我的“target_sort”（QuickSort）之后，我得到一个排序不太好的列表。

代码：

```
function target_sort_wrapper(array) {
    target_sort(array, array.length, 0, array.length);
}

//Quicksort to swap around targets based on dates
//"array" is DDATA, where DDATA[i] are targets
function target_sort(array, length, left, right) {
    if (length < 2) {
        return;
    }
    var pivotIndex = choosePivot(array, length); //returns the index    

    partition(array, pivotIndex, left, right);

    target_sort(array, pivotIndex, 0, pivotIndex - 1);
    target_sort(array, pivotIndex, pivotIndex + 1, array.length);

}

function partition(array, pivotIndex, left, right) {
    //first, put the pivot as the first element to make things easier
    array.swap(pivotIndex, 0);
    var pivot = array[0];
    var i = left + 1;
    for (var j = left + 1; j < right; j++) {
        if (dateValue(array[j].date) < dateValue(pivot.date)) {
            //dateValue converts stuff like "Jun18" into 618, to numerically compare
            array.swap(i, j);
            i = i + 1;
        }
    }
    //don't forget to put pivot back where it belongs
    array.swap(left, i - 1);
}

function choosePivot(array, length) {
    return Math.floor(Math.random() * length); //0 (inclusive) to length (exclusive) 
}

    Array.prototype.swap = function (i, j) {
        var temp = this[i];
        this[i] = this[j];
        this[j] = temp;
        return this;
    } 
```

这是输出。首先打印反向排序的列表，然后是我的“target_sort”的结果：

```
Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 
============================================================= 
Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun25 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun19 Jun25 Jun25 Jun25 Jul05 Jun25 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul05 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jun25 Jul06 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jun25 Jul06 Jul06 Jun25 Jul06 Jun25 Jun25 Jun25 Jun25 Jul05 Jun25 Jul05 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul06 Jul05 Jul05 Jul05 Jul06 
```

我觉得它快到了，但还是有什么不对劲。

我已经坚持了几天了，非常感谢您的帮助。

干杯。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T19:55:59.033

递归调用被破坏：

```
target_sort(array, pivotIndex, 0, pivotIndex - 1); 
```

一件显而易见的事情是，您将`pivotIndex`两个分区的长度作为没有任何意义的。

另一个是索引被破坏了。正如您所看到的，左索引是`0`，但如果您在第二个递归级别并且想要获得上级右分区的左分区，那显然不是真的。

还有一件事：枢轴选择器不必知道数组：

```
function choosePivot(length) 
```

*提示：编程不是猜谜游戏，在开始之前，请确定“变量”的确切含义。什么是长，左，右？例如：正确的索引是否包含在内（它是指向分区的一部分还是刚好超出它）。然后挑选一张纸和铅笔，找出合适的索引和长度。相信我，你想得越仔细，你就会越快完成。调试会浪费很多时间。然后，只是为了验证您是否走在正确的轨道上，请使用一个小型玩具数组来实现，并添加一些`console.log`消息以查看发生了什么。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T22:15:43.307

我现在已经创建了一个正确的版本，感谢 Karoly 的提示。概括：

*   不应该做关于长度的事情，而是左右
*   我总是为递归调用选择一个糟糕的支点（再次，必须左右，并且必须落在子数组的正确范围内）

代码：

```
function target_sort_wrapper(array) {
    target_sort(array, 0, array.length);
}

//Quicksort to swap around targets based on dates
//"array" is DDATA, where DDATA[i] are targets
function target_sort(array, left, right) {
    if ((right-left) < 2) {
        return;
    }

    var pivotIndex = choosePivot(left, right); //returns the index  

    pivotIndex = partition(array, pivotIndex, left, right);

    target_sort(array, left, pivotIndex);
    target_sort(array, pivotIndex+1, right);

}

function partition(array, pivotIndex, left, right) {
    //first, put the pivot as the first element to make things easier
    var pivot = array[pivotIndex];
    array.swap(pivotIndex, left);
    var i = left + 1; 
    for(var j = left + 1; j < right; j++) {
        //if (array[j] > pivot) { } //do nothing, satisfies invariant
        if (dateValue(array[j].date) < dateValue(pivot.date)) {
        //if (array[j] < pivot) {
            array.swap(i, j);
            i = i + 1; 
        }
    }
    //don't forget to put pivot back where it belongs
    array.swap(left, i-1);
    return (i-1);
}

function choosePivot(left, right) {
    return (left + Math.floor(Math.random() * (right-left)));

}

Array.prototype.swap = function(i, j) {
    var temp = this[i];
    this[i] = this[j];
    this[j] = temp;
    return this;
} 
```

# sql-server - WCF 数据服务插入多个表

> ID：11638196
> 
> 赞同：0
> 
> 时间：2012-07-24T19:43:41.067
> 
> 标签：sql-server, database, entity-framework, wcf-data-services, odata

所以我已经启动并运行了我的 WCF 数据服务，但我希望能够插入到多个表中 - 用一个简单的例子来解释会更容易：

表：

# tbl_Shop

*   ShopID（主键）
*   地点
*   所有者

# tbl_产品

*   ProductID（主键）
*   店铺编号
*   产品名称
*   产品价格

1 商店有许多产品。1 个产品只能与 1 个商店关联。

我计划使用存储过程来加入并返回 Shop_ID 上的 tbl_Products 和 tbl_Shop

我有一个我想要的场景：

*   步骤 1) 在 tbl_Shop 中创建一个新条目
*   步骤 2) 创建多个产品并将它们与步骤 1 中创建的 Shop 关联

获得此设置的最佳方法是什么？

我最初想在 tbl_Shop 中创建一个条目，返回这个新创建的项目的 ShopID 并在 tbl_Products 中创建时将其插入 - 这似乎是一种混乱/不正确/不可靠的方式。

我还没有在表之间建立关系（不确定是否需要它们？）

谢谢

## 编辑：

我首先创建了数据库，然后从中生成了一个模型。在 Model1.Designer.cs 我有：

```
public partial class MyDBEntities3 : ObjectContext
{
   .... 
```

在 Service.svc 我有：

```
[System.ServiceModel.ServiceBehavior(IncludeExceptionDetailInFaults = true)]
public class Service : DataService< MyDBEntities3>
{

    public static void InitializeService(DataServiceConfiguration config)
    {

        config.SetEntitySetAccessRule("*", EntitySetRights.All);
        config.SetEntitySetPageSize("*", 50);
        config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V2;

        config.SetServiceOperationAccessRule("*", ServiceOperationRights.AllRead); 
        //set to false in production
        config.UseVerboseErrors = true;
    }

    [WebGet]
    public IQueryable<GetRentByDate_Result> GetStoretByID(int ID)
    {
        // Calls a Stored Procedure which returns the store of a given StoreID
         return CurrentDataSource.GetRentByDate(ID).AsQueryable();
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:59:46.927

在这种情况下，外键关系听起来很适合您。你没有说你正在使用什么风格的 SQL，但这样的事情应该可以解决问题：

```
ALTER TABLE tbl_Products
ADD CONSTRAINT [MY_FK] FOREIGN KEY([ShopID]) REFERENCES [dbo].[tbl_Shop]([ShopID]) 
```

整个关系点，以防止可靠性等问题。

* * *

编辑：找出你的新商店的ID......

最简单的方法是创建您的商店表，其中包含`IDENTITY`沿行的某列

```
CREATE TABLE tbl_Shop
(
    ShopID INT IDENTITY(1,1) PRIMARY KEY
    Location VARCHAR(100)
    Owner VARCHAR(100)

) 
```

现在，当您在 tbl_Shop 中插入一行时，您必须执行以下操作：

```
INSERT INTO tbl_Shop (Location, Owner) SELECT 'Mars', 'Martian' 
```

并找出 ShopID

```
DECLARE @SHOP INT = SCOPE_IDENTITY (assuming SQLServer 2008) 
```

然后您可以使用该变量插入到您的 Product 表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:19:50.027

要使用 JavaScript 同时插入多个表，您需要构造一个***深度插入***有效负载并将其发布到服务。[如果您使用data.js 之](http://datajs.codeplex.com/)类的东西作为 OData 服务的客户端，这可能会容易得多。

也就是说，您可以尝试以下一些步骤来演示如何在 JavaScript 中执行此操作：

1.  [使用 Fiddler，对http://services.odata.org/(S(readwrite))/OData/OData.svc/Products](http://services.odata.org/(S(readwrite))/OData/OData.svc/Products)执行 GET 。
2.  将您的会话密钥从响应中复制到该 GET 并在以后的所有 URL 中使用它。
3.  将以下负载发布到 http://services.odata.org/(S([sessionkeythatyoucopied]))OData/OData.svc/Products（您还应该将 Content-Type 和 Accept 标头设置为 application/json）：

    { "_ *metadata":{ "type":"ODataDemo.Product" }, "ID":0, "Description":"玩的开心", "DiscontinuedDate":null, "Name":"Silly Putty", “价格”：“4.25”，“评级”：5，“发布日期”：“/日期（1343765403829）/”，“类别”：{“* _metadata”：{“类型”：“ODataDemo.Category”}，“ID ":0, "名称":"玩具" } }

4.  检查 201 Created 响应

5.  从 Products 和 Categories 实体集中获取以查看新实体。

# android - Android 布局在所有屏幕尺寸上的相对尺寸相同

> ID：11638197
> 
> 赞同：2
> 
> 时间：2012-07-24T19:43:45.860
> 
> 标签：android, layout, size, screen

一个困扰了我好几个星期的问题，尝试了一切，但无济于事。

我想要做的是在每个屏幕尺寸上都有完全相同的布局。让我用一张图来说明：

在 2.7 英寸设备上： ![2.7英寸](../Images/4e1d7c6646c7d835b900cf7cea584953.png)

在 10.1 英寸设备上（出于说明目的，图片经过严重的 photoshop 处理）： ![10.1英寸需要](../Images/92ddba9bd47c1305523e96eca009fae6.png)

但是使用当前的 Android 实现，我在 10.1 英寸设备上得到了这个： ![10.1英寸](../Images/5fda0a589ee8565036e92d06a9c381f2.png)

简而言之，我希望我的应用程序在所有屏幕尺寸上看起来都一样（相对而言），包括按钮大小、文本缩放等。我之前通过重写 View 类，制作自己的 View 并在里面绘制所有内容来做到这一点，但是使用这种方法，添加视图元素变得非常快速，并且具有“onClick”回调功能的优势也消失了（因为我只是以编程方式在覆盖的 View 类中绘制位图以用作按钮）。有没有办法使用 android xml 文件来实现这一点？

这是我的（测试）XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:gravity="center">

    <Button
        android:id="@+id/button_1"
        android:layout_height="fill_parent"
        android:layout_width="0dip"
        android:layout_weight="1"
        android:text="ABCDEF" />
    <Button
        android:id="@+id/button_2"
        android:layout_height="fill_parent"
        android:layout_width="0dip"
        android:layout_weight="1"
        android:text="GHI" />
    <Button
        android:id="@+id/button_3"
        android:layout_height="fill_parent"
        android:layout_width="0dip"
        android:layout_weight="1"
        android:text="JKLM" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:23:20.340

```
if ((getResources().getConfiguration().screenLayout &      Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_LARGE) {     
        Toast.makeText(this, "Large screen",Toast.LENGTH_LONG).show();

    }
    else if ((getResources().getConfiguration().screenLayout &      Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_NORMAL) {     
        Toast.makeText(this, "Normal sized screen" , Toast.LENGTH_LONG).show();

    } 
    else if ((getResources().getConfiguration().screenLayout &      Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_SMALL) {     
        Toast.makeText(this, "Small sized screen" , Toast.LENGTH_LONG).show();
    }
    else {
        Toast.makeText(this, "Screen size is neither large, normal or small" , Toast.LENGTH_LONG).show();
    } 
```

我认为这可以帮助您通过此代码片段使您的应用在所有屏幕分辨率上看起来都相似，您可以根据各自的屏幕尺寸以编程方式缩放控件。

谢谢 ：）

# asp.net-mvc - MVC SiteMapProvider 面包屑将“>”更改为其他内容

> ID：11638198
> 
> 赞同：1
> 
> 时间：2012-07-24T19:43:49.600
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, mvcsitemapprovider

MVC SiteMapProvider 布置面包屑的方式，它们的显示方式如下

首页 > 详情 > 管理项目

如果我想将“>”更改为不同的符号（或者在我的特定情况下是 twitter bootsrap 中的图标），我该怎么办？

目前我正在使用 @Html.MvcSiteMap().SiteMapPath() 调用面包屑

我进入 Views/Shared/DisplayTemplates/SiteMapPathHelperModel 并尝试更改

```
<text> &gt; </text> 
```

至：

```
<text><i class="icon-chevron-right"></i></text> 
```

但更大的符号仍然存在。我没有收到任何错误。

以下是使用面包屑的部分视图中的一些潜在相关代码：

```
@if(Request.IsAuthenticated) 
{

    <div class="breadcrumb trail">
        <i class="icon-home"></i>
        @Html.MvcSiteMap().SiteMapPath()
    </div>            
    <p align ="right">   
    <i class="icon-user"></i> <text>Welcome <strong>@User.Identity.Name</strong>!
        [ @Html.ActionLink("Log Off", "LogOff", "Account") ]</text>
    </p>
}
else
{
    @* display nothing*@
} 
```

这是在 web.config 中声明的站点地图：

```
<siteMap defaultProvider="MvcSiteMapProvider" enabled="true">
  <providers>
    <clear />
    <add name="MvcSiteMapProvider" type="MvcSiteMapProvider.DefaultSiteMapProvider, MvcSiteMapProvider" siteMapFile="~/Mvc.Sitemap" securityTrimmingEnabled="true" cacheDuration="5" enableLocalization="true" scanAssembliesForSiteMapNodes="true" includeAssembliesForScan="" excludeAssembliesForScan="" attributesToIgnore="visibility" nodeKeyGenerator="MvcSiteMapProvider.DefaultNodeKeyGenerator, MvcSiteMapProvider" controllerTypeResolver="MvcSiteMapProvider.DefaultControllerTypeResolver, MvcSiteMapProvider" actionMethodParameterResolver="MvcSiteMapProvider.DefaultActionMethodParameterResolver, MvcSiteMapProvider" aclModule="MvcSiteMapProvider.DefaultAclModule, MvcSiteMapProvider" siteMapNodeUrlResolver="MvcSiteMapProvider.DefaultSiteMapNodeUrlResolver, MvcSiteMapProvider" siteMapNodeVisibilityProvider="MvcSiteMapProvider.DefaultSiteMapNodeVisibilityProvider, MvcSiteMapProvider" siteMapProviderEventHandler="MvcSiteMapProvider.DefaultSiteMapProviderEventHandler, MvcSiteMapProvider" />
  </providers>
</siteMap> 
```

SiteMapPathHelperModel.cshtml 模板中的代码：

```
@model MvcSiteMapProvider.Web.Html.Models.SiteMapPathHelperModel
@using System.Web.Mvc.Html
@using System.Linq
@using MvcSiteMapProvider.Web.Html.Models

@foreach (var node in Model) { 
    @Html.DisplayFor(m => node);

    if (node != Model.Last()) {
       @*Original Symbol*@
       @* <text> &gt; </text> *@
       <text> &rsaquo; </text>
    }
} 
```

我是完全偏离了我正在做这件事的方式，还是我只是错过了什么？

**更新**您可以将模板作为字符串传递给 SiteMapPath 方法。在调用此方法的局部视图中尝试此操作，我将其传递如下：

```
@Html.MvcSiteMap().SiteMapPath("SiteMapPathHelperModel") 
```

我已经从项目中删除了 acsx 文件，以防止它默认出现在此处（我希望它使用 cshmtl 模板）。我已将模板代码更改为使用不同的符号并重新构建、保存所有内容，然后运行该项目。

尽管如此，它仍然使用默认的“>”符号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:53:52.540

尝试将您的 .ascx 文件重命名为其他名称。即使您从项目中删除该文件，它仍然可能会尝试使用它。

# javascript - JSON 数据未使用 MVC3 正确反序列化

> ID：11638201
> 
> 赞同：0
> 
> 时间：2012-07-24T19:44:03.557
> 
> 标签：javascript, .net, asp.net-mvc-3, jquery-mobile

我正在开发一个同时使用 jQuery Mobile 和 MVC3 后端的项目。在其中一个页面上，要求用户从几个下拉菜单中选择选项或将它们保留为默认值。该页面采用选定的选项并将它们放入一个对象中，然后将其发送到服务器以加载下一页数据。我尝试了两种不同的方法，两种方法都给出了相同的错误。主对象正确序列化和反序列化，但内部数组没有。该数组具有正确数量的元素，但其中没有数据。我像这样创建对象：

```
var obj = { };
obj.selections = new Array();
// customArr holds the data from the select lists and populates fine
$.each(customArr, function(key, value)
{
    if(value== undefined)
       return true;

    obj.selections.push({
        type: value.id,
        subtype: value.subtype,
        model: value.model
    });
}

// Selected comes from data that was previously gathered
if(selected != undefined)
{
    obj.mk = selected.mk;
    obj.md = selected.md;
    obj.yr = selected.yr;
}
obj.id = selectionID; 
```

我尝试了两种获取数据的方法。我试图直接移动页面：

```
$.mobile.changePage('/Select/Data/', { data: obj }); 
```

我已经尝试在没有任何数据的情况下加载上述页面（仅使用超链接上的 jQuery Mobile 数据属性），然后使用以下命令对数据进行 ajax 输出：

```
$.ajax({
    url: '/Select/Data/',
    data: obj,
    type: 'POST',
    datatype: 'json',
    error: function() { // Handle error },
    success: function(response) {
        // Load data
    }
}); 
```

如果我在服务器代码中设置断点，我可以查看返回的对象。mk、md 和 yr 属性已填充，且 selections 数组有两个对象，但类型、子类型和模型数据为空。但是，如果我单步执行 JavaScript 代码，它就会完全按照我的预期创建。发送到服务器的 POST 变量甚至看起来是正确的。有什么建议么？

编辑： C# 对象如下所示：

```
public class ObjectModel
{
    public int mk;
    public int md;
    public int yr;
    public List<Mod> selections;
}
public class Mod
{
    public int type;
    public int subtype;
    public string model;
} 
```

控制器方法如下所示：

```
public ActionResult Data(ObjectModel objMod, int id = -1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:52:58.500

查看传递给 MVC 引擎的数据表明该对象正在以 JavaScript 方式序列化。即，对象看起来像`Obj[0]["id"]=5&Obj[0]["name"]="Bob"&Obj[1]["id"]=7&Obj[1]["name"]="Joe"`。MVC 显然很难反序列化这种类型的对象表示法。我的解决方案是创建一个简单的正则表达式字符串替换方法，该方法采用 jQuery 创建的字符串，然后将其替换为 MVC 正在寻找的内容。正则表达式查找`][`模式，因为这只会在每个对象的一个​​地方发生，并将其替换为`.`. 然后它查找`.".+"]`并用空字符串替换最后一个字符。查询字符串最终看起来像`Obj[0].id=5&Obj[0].name="Bob"&Obj[1].id=7&Obj[1].name="Joe"`. MVC 能够正确地解释这个字符串。我不知道这是否是 MVC 的错误或 jQuery 序列化 JS 对象的方式，但这很痛苦。希望有人可以发表更好的回应。

# css - IE 8 中的 HTML5 和 CSS 内联无序列表

> ID：11638204
> 
> 赞同：2
> 
> 时间：2012-07-24T19:44:19.933
> 
> 标签：css, html, internet-explorer-8

总的来说，我对 CSS 还是有点陌生​​，所以要温柔。我正在尝试创建一个列出 div 的基本无序水平列表（稍后将为它们提供背景图像，因为这将用作导航栏）。出于某种原因，我似乎无法让它显示。我正在针对 IE8 进行测试，因为我认为它是否适用于该浏览器，它适用于所有浏览器（我保证，当我接近完成时，我将在其他浏览器中进行测试）。

我在用`<!DOCTYPE html>`

## CSS

```
#nav_list {
list-style-type:none;
margin:0;
padding:0;
margin:auto;}

.list{display:inline;}

.nav_option {margin:auto; border:solid black 1px; width:50px;} 
```

## 的HTML

```
<div id="nav">
<ul id="nav_list">
    <li class="list Home"><div class="nav_option Home">Home </div></li>
    <li class="list Shop"><div class="nav_option Shop"> Shop</div></li>
    <li class="list Game"><div class="nav_option Game">Game </div></li>
    <li class="list Map"><div class="nav_option Map">Map</div></li>
    <li class="list Information"><div class="nav_option Information">Information</div></li>
    </ul>
</div> 
```

出于某种原因，我什至无法让 IE 为其设置边框，但仍将其内联。我在搞砸什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:53:14.167

你需要浮动你的div。

```
.nav_option {margin:auto; border:solid black 1px; width:50px; float:left} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:00:57.567

@Signify，我要做的是浮动 li 元素或“列表”，而不是显示“内联”。或者也许像 Ed Charbeneau 所说的那样浮动 .nav_option 。另外，既然你开始了，你明白当你设置 class="list Home" 你实际上是在为那个 li 项目设置两个类吗？当您使用 class="nav_option Home" 时也是如此。要使用这两个类，在你的 CSS 中使用这两个类，你会使用类似的东西：

li.list.Home

有时这可能很有用，但同样，既然你开始了，我怀疑你需要两者。每个列表项中的 div 也是如此。

所以，我相信你可以简化事情并使用这样的东西：

```
<nav>
    <ul>
        <li class="home">Home</li>
        <li class="shop">Shop</li>
        <li class="game">Game</li>
        <li class="map">Map</li>
        <li class="info">Information</li>
    </ul>
</nav> 
```

并且仅在您确实需要时才添加更多标签和类。请注意，我使用的是 HTML5 标签。有了这些，你已经可以做很多事情了。根据您的布局以及您对旧浏览器的关心程度，有时您甚至不需要所有这些类。您可以使用 li:nth-child(1)、li:nth-child(2) 等“指向”您的 CSS 中的每一个……嗯，还有更多选择……一切都取决于你想要达到的目标。

最后一次：我真的怀疑你是否需要所有这些类（甚至元素）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:49:48.163

第七条是对的。您可能要考虑是否真的需要所有这些额外的元素。

但是，由于问题是在带有内联元素的样式列表上，所以这里有一个 dabblet 来做到这一点：[http](http://dabblet.com/gist/3172553) ://dabblet.com/gist/3172553 对于现代浏览器来说，css 可能更好，但因为 IE8（也许是 IE7）是必需的，我省略了`nth-child`选择器，并为第一个和最后一个元素使用了一个单独的类来添加额外的样式。

```
#nav_list, nav {
    display: block;
}

#nav_list li {
    display: inline-block;
    border: 1px solid black;
    margin-right: -1px;
    width: 100px;
    height: 30px;
    line-height: 30px;
    text-align: center;
}

#nav_list li.last {
    margin: 0;
} 
```

不要忘记，如果你使用内联元素，换行符算作空格并且会被显示。因此，您的列表 html 需要全部在一行中：

```
<nav>
  <ul id="nav_list">
    <li id="home" class="first">Home</li><li id="shop"> Shop</li><li id="game">Game</li><li id="map">Map</li><li id="info" class="last">Information</li>
  </ul>
</nav> 
```

# javascript - 如何计算 HTML 表格中的行数？

> ID：11638206
> 
> 赞同：4
> 
> 时间：2012-07-24T19:44:20.997
> 
> 标签：javascript, jquery, html, primefaces, datatable

我似乎在任何地方都找不到这个。我有一个像[这样](http://www.primefaces.org/showcase/ui/datatableDynamicColumns.jsf)的数据表，我希望能够在 javascript 中计算数据表中的行数。那将如何实现？谢谢！

我在 javascript 中需要它，因为我想遍历数据表并检查是否有任何行包含其中的某些数据。

**示例伪代码**

```
var tableSize = someway to get table size;
for (i = 0; i < tableSize; i++) {
if (dataTable.row(i).value == "someValue") {
    //do something
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-24T19:49:29.667

[使用jQuery](http://jquery.com/)计算行数会更容易：

```
var tableSize = $('#myTable tbody tr').length; 
```

演示：http: [//jsfiddle.net/YLVuK/1/](http://jsfiddle.net/YLVuK/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:46:48.757

使用 jQuery，你可以简单地做

```
var tableSize = $("#myTable").find("tbody").find("td").length; 
```

并使用 ID 为“myTable”命名您的表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:44:58.290

您可以在支持 bean 的服务器端计算数据表中的行数，然后将 java 对象属性设置为等于行数。然后在您看来，您可以使用 el 表达式语言设置 javascript 变量。像这样的东西：

支持豆：

```
public class backer() {
    List<Cars> cars = new ArrayList<Cars>();

    public List<Cars> getCars() {
        return cars;
    }

    public void setCars(List<Cars> cars) {
        this.cars = cars;
    }

    public int numCars() {
        return cars.size();
    }
} 
```

在您的 xhtml 文件中：

```
var tableSize = #{backer.numCars} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T20:15:35.593

如果你的表有一个 id，你可以这样做：

```
var table = document.getElementById("tableId");
for(var i = 0, ceiling = table.rows.length; i < ceiling; i++) {
    var row = table.rows[i]; // this gets you every row
    for(var j = 0, ceiling2 = row.cells[j]; j < ceiling2; j++) {
        var cell = row.cells[j]; // this gets you every cell of the current row in the loop
        var cellContent = cell.innerHTML; // this gets you the content of the current cell in the loop
    }
} 
```

# javascript - 获取可视图像区域的坐标

> ID：11638210
> 
> 赞同：0
> 
> 时间：2012-07-24T19:44:35.903
> 
> 标签：javascript, jquery, css

我在这里解决了这个问题：http: [//jsfiddle.net/thindery/ZHhBR/](http://jsfiddle.net/thindery/ZHhBR/)

我需要能够获取源图像可视区域的坐标并将其显示在跨度中。

这是我通过显示可视区域的坐标来表示的示例：http: [//thindery.com/jsfiddle/crop_move.html](http://thindery.com/jsfiddle/crop_move.html)

在此示例中，放大并平移后，您可以看到四个不同的坐标更新如下： (x,y)(x1,y1)

jQuery 是否提供此功能以便我可以在 jsfiddle 示例中实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:14:56.983

我真的找不到从该插件获取坐标的好方法，所以我只使用了 jQuery 解决方案：

```
$(document).ready(function() {
    var iv2 = $("#viewer2").iviewer({
        src: "http://thindery.com/jsfiddle/butterfly.jpg",
        onDrag: function() {
            var pos = $("img","#viewer2").position();
            $("#status").html('X : '+Math.abs(pos.left)+'<br>Y :'+Math.abs(pos.top));
        }
    });
}); 
```

[小提琴](http://jsfiddle.net/ZHhBR/9/)

# xml - 新的 SimpleXMLElement 法语字符错误

> ID：11638211
> 
> 赞同：0
> 
> 时间：2012-07-24T19:44:45.593
> 
> 标签：xml

我使用新的 SimpleXMLElement 将 xml 字符串转换为 xml，它包含法语字符。转换后，法语字符发生了变化。例如，“Déplacement pour participer à la conférence de”。

代码如下：

```
$xml = new SimpleXMLElement(
$xmlStringContents, 0, false);

... 

foreach($xml->PRODUCTS->PRODUCT as $key => $value){ 
     foreach ($value as $key => $value){
      $sourceArray[$key]=htmlspecialchars((String)$value, ENT_QUOTES);
      debug('value is '. htmlspecialchars((String)$value, ENT_QUOTES));

 } 
```

有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:37:27.823

我的 XML 文件有问题。它应该保存为 UTF-8。

# csv - 将多个值写入 jython 中的不同 csv 列

> ID：11638212
> 
> 赞同：0
> 
> 时间：2012-07-24T19:44:45.353
> 
> 标签：csv, jython

使用 SOAtest，我试图将三个值写入 csv 中的不同列。

SOAtest 当前将所有值写入一列并将它们“堆叠”在一起。

在 SOAtest 中，我在测试工具中使用了 3 个实用程序：

1.  XML 转换工具（它获取 XML 元素值）

2.  一个扩展工具（这允许 jython 脚本组织在 #1 中抓取的值）

3.  写文件工具。（这指向一个文件夹并创建 csv）

在第 2 步中，这里是写入第 3 步的代码。

```
def output(input, context):

return (str(input) + '\n') 
```

是否可以将 2 行代码更改为 3 列？

如果可能的话，我想尝试这样做。

谢谢！DJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T20:43:53.163

如果您的输入是条目列表（在下面的代码中），您可以这样做。

```
import csv

n = 3
lst = [1,2,3,4,5,6,7,8,9]
csvwriter = csv.writer(open('/tmp/split.csv','w'))
for i in range(0, len(lst), n):
    csvwriter.writerow(lst[i:i+n]) 
```

如果它是一个字符串，您可以随时将其拆分以将其转换为列表。

# android - 如何制作一个基本的 Android USB Host 应用程序？

> ID：11638216
> 
> 赞同：8
> 
> 时间：2012-07-24T19:45:13.203
> 
> 标签：android, android-intent, usb, device

我正在尝试开发一个应用程序来检测 USB 设备并在连接时显示一个弹出窗口。我遵循了您可以在 Android 开发者网站 ( [http://developer.android.com/guide/topics/connectivity/usb/host.html](http://developer.android.com/guide/topics/connectivity/usb/host.html) )中找到的基本 USB 教程

这是我的 Android 清单：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="br.com.habeis"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="15"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

            <intent-filter>
                <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />
            </intent-filter>

            <meta-data android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED"
                       android:resource="@xml/device_filter" />

        </activity>
    </application>

</manifest> 
```

还有我的 device_filter.xml 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<resources>
    <usb-device vendor-id="0x1BCF" product-id="0x0007" />
</resources> 
```

我的活动

```
package br.com.habeis;
import java.util.HashMap;
import java.util.Iterator;
import android.hardware.usb.UsbDevice;
import android.hardware.usb.UsbManager;
import android.os.Bundle;
import android.widget.Toast;
import android.app.Activity;
import android.content.Context;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        UsbManager manager = (UsbManager) getSystemService(Context.USB_SERVICE);

        HashMap<String, UsbDevice> deviceList = manager.getDeviceList();
        Iterator<UsbDevice> deviceIterator = deviceList.values().iterator();

        while(deviceIterator.hasNext()){

            UsbDevice device = deviceIterator.next();
            Toast.makeText(this,"Value of device :" +device.getDeviceName(), Toast.LENGTH_LONG).show();

        }
    }        
} 
```

有谁知道我的代码中缺少什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T01:08:55.397

我的猜测是您的供应商 ID 和产品 ID 是十六进制的，它们需要是整数。它没有很好的记录，但结帐[https://stackoverflow.com/a/8328814/1302183](https://stackoverflow.com/a/8328814/1302183)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T15:03:42.927

它应该是整数，将它们转换为整数，然后在设备过滤器文件中使用它

# android - Android：向状态栏添加文本

> ID：11638219
> 
> 赞同：2
> 
> 时间：2012-07-24T19:45:21.990
> 
> 标签：android

我正在研究果冻豆。我想在我的应用程序启动时向状态栏添加一些文本。（此文本与通知无关）。是否可以将纯文本（没有任何通知）添加到状态栏？如果是，如何？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T19:55:04.073

我不这么认为。。

状态栏不是 Java 应用程序，而是 Android OS 的 Framework 类的一部分。这些类以 DEX 格式编译，然后在编译时进行 ODEX 编辑，并且在运行时不可编辑。

除了使用通知子系统之外，没有办法（据我所知）您可以添加文本。

# asp.net-mvc - 控制器从视图中动态添加的对象中获取 null

> ID：11638223
> 
> 赞同：0
> 
> 时间：2012-07-24T19:45:53.923
> 
> 标签：asp.net-mvc, razor

我添加了一个动态添加的对象，例如：

```
@Html.EditorFor(model => model.Province) 
```

我的模型包含省属性，但视图在开始时没有显示对象。我通过 .show() 方法使其可见。

但是，在控制器中，我发现 Province 的值始终为 null。如何使它可以从像这样动态添加的对象中访问？

补充：我的模型看起来像这样：

```
public class Location
{
    [Required]
    public int ID { get; set; }
    [Required]
    public string Name { get; set; }
    public string Description { get; set; }
    public string Street { get; set; }
    public string City { get; set; }
    [Display(Name = "State/Province")]
    public string Province { get; set; }
} 
```

控制器：

```
 [HttpPost]
    public ActionResult Create(Location location)
    {
        if (ModelState.IsValid)
        {
            db.Location.Add(location);
            db.SaveChanges();
            return RedirectToAction("Index");
        }
    } 
```

看法：

```
 <div class="editor-label">
        @Html.LabelFor(model => model.Province)
    </div>
    <div class="editor-field">
    <div id="province_ddl">
        @Html.DropDownListFor(
            x => x.Province,
            Enumerable.Empty<SelectListItem>(),
            "-- Select State/Province --"
            )
    </div>
    <div id="province_tb" style="display: none">
        @Html.EditorFor(model => model.Province)
    </div>
        @Html.ValidationMessageFor(model => model.Province)
    </div> 
```

当我使用下拉列表时，它将具有正确的省属性值。但是，如果我使文本框控件可见，它将没有值，即在控制器中获得空值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:48:28.503

您不能在具有相同名称的相同表单中拥有 2 个输入字段（`Province`在您的情况下）。好吧，实际上你可以但只有第一个的值会被发送到控制器。因此，如果您保留下拉列表，它将是下拉列表的选定值，该值将始终发送到控制器。所以基本上你必须决定。您可以禁用其中一个字段（通过向其中添加`disabled="disabled"`属性，可以动态完成）以仅强制发送另一个字段的值。

# mongodb - Mongo db - 查询嵌套数组和对象

> ID：11638224
> 
> 赞同：27
> 
> 时间：2012-07-24T19:45:56.423
> 
> 标签：mongodb, mongodb-query

我有以下文档结构：

```
{
   "_id":"12345",
   "value":{
      "T":0,
      "v":[
         {
            "name":"JW",
            "cost":100
         }
      ]
   }
} 
```

如何查询名称键？我尝试了点符号但没有运气（我认为它只适用于两个级别）

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-24T21:50:36.073

目前尚不清楚您到底尝试了什么，但这应该可以通过以下方式找到上述文档`name`：

```
db.collection.find({ "value.v.name": "JW" }) 
```

[参考](http://docs.mongodb.org/manual/tutorial/query-documents/#match-a-field-without-specifying-array-index)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-01-26T00:07:31.910

您应该使用`$elemMatch`运算符：

```
db.collection.find({
    'value.v': { 
        $elemMatch: {
            name: 'JW', // "name == 'JW'"
            cost : 100 //if you need "&& cost == 100"
        }
    }
}); 
```

[蒙哥文档](http://docs.mongodb.org/manual/reference/operator/query/elemMatch/#op._S_elemMatch)

# android - 如何在 ActionBar 中添加编辑文本字段和按钮？

> ID：11638226
> 
> 赞同：6
> 
> 时间：2012-07-24T19:45:55.767
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在使用 actionbarsherlock，我想在操作栏中使用编辑文本和按钮。我浏览了许多文件和帖子，但还没有找到解决方案。

如何在 Android 操作栏中添加编辑文本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T20:24:06.463

Putting a regular `Button` in the action bar will look fairly awful, IMHO.

That being said, you can use `android:actionLayout` on your `<item>` element in your menu XML resource. This should point to the name of a layout XML resource. This resource will be inflated into the action bar. You can get the widgets by calling `getActionView()` on the `MenuItem` object corresponding to this `<item>` element.

[Here is a sample project](https://github.com/commonsguy/cw-omnibus/tree/master/ActionBar/ActionBarDemo) demonstrating this. [Here is the documentation](http://developer.android.com/guide/topics/ui/actionbar.html#ActionView) on this technique.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T20:26:21.700

So you should check out the documentation for the action bar sherlock found at the website.

Basically to add something to the action bar sherlock you have to add it in terms of Menu items like as follows :

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
            //inflate with your particular xml
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.child_add_menu, menu);
    return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    //your code here

} 
```

You can also check out the question that is asked at : [ActionBarSherlock with multiple MenuItems?](https://stackoverflow.com/questions/9774815/actionbarsherlock-with-multiple-menuitems)

# java - 如何在 Java 中检测二维多边形碰撞？

> ID：11638227
> 
> 赞同：0
> 
> 时间：2012-07-24T19:45:58.697
> 
> 标签：java, 2d, polygon

假设我正在制作一个简单的小行星游戏。有一艘船是 java.geom rectangle2d，或任何进口。有一颗小行星也是长方形，但颜色不同。当船撞上小行星时，我希望它能够识别它，并能够打印出一些东西或显示一个 JoptionPane。我学会了一种使用区域的方法，但它真的很复杂，我听说有一种更简单的方法可以做到这一点。

任何想法或链接将不胜感激！

另外，我可以用 PNG 做这个吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:55:43.007

使用一些第三方引擎进行物理和碰撞检测。像[Box2D](http://box2d.org)（您将需要[JBox2D](http://www.jbox2d.org)，引擎的 Java 端口）。编写碰撞代码曾经很有趣，但它变得乏味。Box2D 是一个非常棒的引擎。我在所有 2D 平台游戏中都使用它。

Box2D 非常先进，但是如果您遵循一个好的教程，您将能够使其适用于您的情况。

# mongodb - 转储包含 GridFS 引用的 mongo 集合的子集？

> ID：11638228
> 
> 赞同：1
> 
> 时间：2012-07-24T19:46:02.480
> 
> 标签：mongodb, pymongo, gridfs, mongodump

我有一个大型 Mongo 集合，我想从中转储一个子集以复制到登台服务器以进行测试。此集合包括作为 GridFS 文件的 ObjectID 的字段。我可以使用 mongodump 的 --query 标志轻松地获取集合的子集，但我想不出任何简单的方法来仅转储主集合中匹配记录引用的 GridFS 文件和块。实现这一目标的最痛苦的方法是什么？

（如果没有任何直接使用 Mongo 的命令行工具进行导出的方法，我不会感到特别惊讶，所以如果是这种情况，我也会对以编程方式进行导出的方法感兴趣，但产生可以使用 mongorestore 等标准工具*导入*的输出。Python 的 mongo 驱动程序是我最熟悉的驱动程序，但我并不挑剔。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:02:21.163

目前没有内置的东西可以做到这一点，最好的选择是编写一个 python 脚本。

最好不要使用 mongodump。编写 python 脚本以从原始服务器读取并插入到登台服务器。如果您在每个 gridfs 文件的文档级别执行此操作，请先执行块，然后执行文件 doc。如果您使用的是 python gridfs 类，只需从原始服务器读取并保存到登台服务器。

请参阅[PyMongo GridFS 文档](http://api.mongodb.org/python/current/api/gridfs/index.html)。

# haskell - 如何确定 Haskell 函数的类型？

> ID：11638232
> 
> 赞同：17
> 
> 时间：2012-07-24T19:46:12.077
> 
> 标签：haskell, functional-programming

我偶然发现了许多给你一个功能的练习，并要求你推断出每个练习的类型。

我有以下示例。请注意，这不是我需要完成的作业。我有这个具体例子的答案，并在下面提供。也许有人可以帮助我学习如何推理这种练习。

功能：

```
h1 f g x y = f (g x y) x 
```

假定的类型：

```
h1 :: (a -> b -> c) -> (b -> d -> a) -> b -> d -> c 
```

谢谢！

* * *

[我在这里添加了 27 个](http://hpaste.org/72107) **没有解决方案**的练习。

其中一些解决方案包含[在此处](http://hpaste.org/72090)。但是，可以通过使用 GHCi 命令知道类型`:t`

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-24T20:06:58.327

```
h1 f g x y = f (g x y) x 
```

因此，从左到右获取参数列表：

*   `f`是一个应用于两个参数的函数：第一个是结果，`(g x y)`第二个是`x`
    *   我们还不知道第一个参数是什么类型，所以我们称之为`a`
    *   我们也不知道第二种类型，所以我们称之为`b`
    *   我们也不知道结果类型（所以我们称之为`c`），但我们*知道*这一定是返回的类型`h1`
        *   now`f`是一个函数映射`a -> b -> c`
*   `g`是应用于两个参数的函数：第一个是`x`，第二个`y`
    *   我们知道 的第一个参数`g`与 的第二个参数相同`f`，所以它必须是相同的类型：我们已经标记了`b`
    *   `g`is的第二个参数`y`，我们还没有分配占位符类型，所以它会依次获得下一个，`d`
    *   `g`的结果是 的第一个参数`f`，我们已经将其标记为`a`
        *   所以现在`g`是一个函数映射`b -> d -> a`
*   第三个参数是`x`，因为这是 的第二个参数`f`，我们已经标记了它的类型`b`
*   第四个参数是`y`，这是 的第二个参数`g`，所以我们已经标记*了它的*类型`d`
*   的结果`h1`是应用`f`到的结果`(g x y) x`，正如我们之前所说，所以它具有相同的类型，已经标记`c`

* * *

尽管我们按顺序处理了参数列表，但为每个参数标记、推断和统一类型的实际过程是通过*查看*.`h1`

因此，我的第一个项目符号可以详细说明为：

*   `f`是要考虑的第一个参数，所以让我们看看`h1`（之后的所有内容`=`）的主体，看看它是如何使用的
    *   `f (g x y) x`表示`f`应用于`(g x y) x`，因此`f`必须是函数
    *   `(g x y)`在括号中，这意味着正在评估这些括号内的任何内容，并且该评估的*结果*是`f`
    *   `x`只是一个简单的参数`f`，直接从`h1`自己的参数列表传递
    *   所以，`f`是一个有两个参数的函数

如果它有助于阅读`f (g x y) x`，您可以考虑使用类 C 表示法的等效表达式是`f(g(x,y), x)`. 在这里，您可以立即看到`f`和`g`是带有两个参数的函数，`f`第一个参数是`g`返回的值，等等。

* * *

请注意，表达式的左侧`h1 f g x y`仅给出了一条类型信息：它`h1`是一个有四个参数的函数。参数名称本身只是表达式右侧（的主体`h1`）中使用的占位符。这里参数的相对顺序只是告诉我们如何调用`h1`，但*没有*告诉我们如何`h1`在内部使用参数。

同样，这是一个程序样式的等价物（我将使用 Python，因此不必填写任何类型）：

```
def h1(f, g, x, y):
    return f(g(x,y),x) 
```

这*意味着*与

```
h1 f g x y = f (g x y) x 
```

（有一个警告 - 部分应用 - 我怀疑只会在这里进一步混淆问题）。

在这两种情况下，声明（`=`在 Haskell 中的左侧，`:`在 Python 中的之前）只告诉我们函数名称和它需要多少个参数。

在这两种情况下，我们可以从定义（Haskell 中的右侧，Python 中的缩进块）*推断出*和都是两个参数的函数，第一个参数与第二个参数相同，等等。在 Haskell ，编译器为我们做这件事；如果我们使用错误数量的参数调用，Python 只会在运行时抱怨，或者它返回的东西不能用作第一个参数。`:``f``g``g``f``g``f`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-24T20:06:54.880

如果你没有什么可做的，你就从事物的使用方式上一步一步推导出类型，把推导出来的部分统一起来。我们有定义

```
h f g x y = f (g x y) x 
```

所以我们看到它`h`需要四个迄今为止完全未知类型的参数，让我们调用它们`a, b, c, d`，结果类型将被调用`r`。所以 h 的类型必须与

```
a -> b -> c -> d -> r 
```

现在我们必须看看我们可以对参数类型说些什么。为此，我们查看定义的右侧。

```
f (g x y) x 
```

so`f`应用于两个参数，其中第二个是 的第三个参数`h`，因此我们知道它的类型是`c`。`f`我们对的第一个参数的类型一无所知。应用的`f`结果就是应用的结果`h`，所以`f`的结果类型是`r`。

```
f :: u -> c -> r
a = u -> c -> r 
```

`f`右边的第一个参数是`g x y`。因此我们可以推断

```
g :: c -> d -> u
b = c -> d -> u 
```

因为`g`的参数是 的第三个和第四个参数`h`，因此它们的类型是已知的，结果是 的第一个参数`f`。

包起来，

```
f :: u -> c -> r
g :: c -> d -> u
x :: c
y :: d
h :: (u -> c -> r) -> (c -> d -> u) -> c -> d -> r 
```

根据需要重命名类型变量。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-24T20:14:22.847

如果你想以正式的方式来做，你可以遵循类型系统的推理规则。如果您只有应用程序，那么简单类型的 lambda 演算的规则就可以了（请参阅这些关于 lambda 演算的[讲义](http://www21.in.tum.de/teaching/logik/SS12/lambda-en.pdf)的第 2.3 节）。

该算法包括使用类型系统的类型规则构建演绎树，然后通过统一计算术语的最终类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T08:13:17.823

确定函数的类型取决于使用的类型系统。大多数函数式编程语言都基于[Hindley-Milner 类型系统](https://en.wikipedia.org/wiki/Hindley-Milner)，其中有一种[类型推断](https://en.wikipedia.org/wiki/Type_inference)算法（也称为 Hindley-Milner）。对于给定的表达式，该算法派生出所谓的*主体类型*，这基本上是函数可以具有的最通用类型，如果表达式不可类型化，则该类型会失败。这是 GHCi 在您输入时使用的`:t expression`。

Hindley-Milner 类型系统允许多态函数，但所有通用量词都必须在类型之外。（通常在使用类型时您看不到量词；量词被省略，它们只是假定的。）例如，`const`has type `a -> (b -> a)`，可以用量词写成`(∀a)(∀b)(a -> (b -> a))`. 但是，HM 不允许像这样的类型`(∀a)(a -> (((∀b)b) -> a))`

还有更多表达性的类型系统，例如[System F](https://en.wikipedia.org/wiki/System_F)，它允许在任何地方对类型变量使用通用量词，但它的类型推断是不可判定的，并且没有正确的主类型概念。GHC 中有各种语言扩展允许你使用这些类型，但是你失去了类型推断，你必须用类型显式地注释你的函数。

例如：在 HM 中，该函数`xx = \f -> f f`是不可类型化的（在 GHCi 中尝试）。但是在一个允许通用类型量词无处不在的类型系统中，它有一个类型。在具有适当 GHC 扩展的 Haskell 中，您可以编写：

```
{-# LANGUAGE RankNTypes #-}

xx :: (forall a. a -> a) -> (forall b. b -> b)
xx = \f -> f f 
```

（请注意，`RankNTypes`允许您编写此类量化类型，但不能为此类函数提供类型推断 - 您必须自己声明类型。）

Hindley-Milner 类型系统是一个很好的折衷方案：它允许多态函数与类型推断一起使用。

如果你有兴趣，你可以阅读[原论文](http://www.itu.dk/courses/SPLG/E2011/damas-milner.pdf)。但是，它包含一些拼写错误，因此您在阅读时必须保持警惕。

# java - 为什么 Java 的同步集合不使用读/写锁？

> ID：11638233
> 
> 赞同：18
> 
> 时间：2012-07-24T19:46:17.353
> 
> 标签：java, collections, concurrency

在诸如不鼓励之类的事情之后，`Hashtable`以及`Vector`当集合同步包装器出现时，我认为同步会得到更有效的处理。现在我查看了代码，我很惊讶它实际上只是用同步块包装了集合。

为什么`ReadWriteLock`s 不包含在例如 Collections 中的 SynchronizedMap 中？是否存在一些不值得的效率考虑？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-24T19:55:00.633

读写锁是性能优化的一部分，这意味着它可以在**某些情况下**允许更大的并发性。必要条件是，它们应用于**大多数时间读取**但未修改的数据结构。

在其他条件下，它们的性能比独占锁稍差，这是很自然的，因为它们具有更大的复杂性。

如果读写锁的锁通常保持相当长的时间并且只对受保护的资源进行少量修改，则它是最有效的。

因此，读写锁是否优于独占锁取决于用例。最终，您必须通过分析来衡量哪些锁性能更好。

考虑到这一点，选择一个排他锁来`Collections.synchronizedMap`解决一般用例而不是大多数读者的特殊情况似乎是合适的。

**更多链接**

*   [用 ReadWriteLocks 饿死](http://www.javaspecialists.eu/archive/Issue165.html)
*   [重构 Java 程序以实现灵活锁定](http://researcher.watson.ibm.com/researcher/files/us-msridhar/icse11.pdf)

    他们编写了一个工具，可以将 Java 应用程序中的锁自动转换为适当`ReentrantLocks`的`ReadWriteLocks`位置。出于测量目的，他们还提供了一些有趣的基准测试结果：

![在此处输入图像描述](../Images/47f3383cdd4fd9756bd2f96f77c143d3.png)

> [...] 但是，在写入操作更为普遍的配置中，具有同步块的版本比使用 Sun 1.6.0_07 JVM 的基于读写锁的版本快 50%（使用 Sun 1.5 快 14%。 0_15 JVM）。
> 
> 在只有 1 个读取器和 1 个写入器的低争用情况下，性能差异不那么极端，并且三种类型的锁中的每一种都在至少一个机器/VM 配置上产生了最快的版本（例如，请注意 ReentrantLocks 在Sun 1.5.0_15 JVM 的 2 核机器）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-24T20:00:38.033

我不认为使用`ReadWriteLock`（如果这就是你所说的）比使用`synchronized`关键字更快。两种构造都施加了锁，竖立了内存屏障，并“发生在”限制。

您可能正在谈论做一些聪明的事情`Collections.synchronizedMap(...)`和朋友，其中读取方法被读取锁定并且写入方法写入锁定以提高性能。这可能适用于`java.util`集合类，但可能会导致与用户实现的 s 同步问题，`Map`如果`get()`方法被计数或其他东西 - 即“只读”方法实际上对集合进行了更新。是的，这样做将是一个糟糕的主意。

`ConcurrentHashmap`被编写为高性能并`volatile`直接使用字段而不是`synchronized`块。相比而言，这使得代码更加复杂，`Collections.synchronizedMap(...)`但速度也更快。这就是为什么建议在高性能情况下使用它的原因`Collections.synchronizedMap(new HashMap<...>())`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-24T20:44:08.023

除以下内容外，大多数推理都已解决。SynchronizedMap/Set/List 以及 Hashtable 和 Vector 依赖于正在同步的集合实例。因此，许多开发人员使用这种同步来确保原子性。例如。

```
List syncList = Collections.synchronizedList(new ArrayList());

//put if absent
synchronized(syncList){
   if(!syncList.contains(someObject)){
     syncList.add(someObject);
   }
} 
```

这对于所有操作都是线程安全和原子的，因为 synchronizedList 将自行同步（即添加、删除、获取）。这就是为什么 Hashtable 类没有被改造以支持类似于 ConcurrentHashMap 的 lock-striping 的主要原因。

因此，对这些集合使用 ReadWriteLock 将失去原子操作的能力，除非您能够获取锁实例。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-24T19:48:43.333

这是因为这些类早于读/写锁，后者进入 Java 相当晚（Java 5）。无论如何，由于它们硬编码的细粒度锁定，它们很少有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T04:30:45.410

这与效率无关。`synchronized`在中使用没有错`Collections.synchronizedMap`。如果使用 ReadWriteLock 来实现 Map，我想调用它 `Collections.LockedMap` ；）

严肃点，是在出现`Collections.synchronizedMap`前几年写的。`Lock`这是一个在发布后无法更改的 API。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-23T23:40:45.767

要添加到[@JohnVint 的答案](https://stackoverflow.com/a/11639012/1553851)，请考虑迭代问题。该[文档](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#synchronizedList-java.util.List-)明确要求客户端同步：

> 用户在迭代返回的列表时必须手动同步它：
> 
> ```
> List list = Collections.synchronizedList(new ArrayList());
>     ...
> synchronized (list) {
>     Iterator i = list.iterator(); // Must be in synchronized block
>     while (i.hasNext())
>         foo(i.next());
> } 
> ```
> 
> 不遵循此建议可能会导致不确定的行为。

这只是因为客户端可以共享返回的地图上的内在锁。如果要在内部使用读/写锁，则返回的接口必须支持某种方式，至少可以访问读锁以实现安全迭代。这将使 API 变得复杂，从而产生可疑的好处（正如其他人所解释的那样）。

# php - 变量/函数和 PHP 逻辑

> ID：11638239
> 
> 赞同：1
> 
> 时间：2012-07-24T19:46:43.010
> 
> 标签：php

这听起来像是一个愚蠢的问题，但是将变量分配给函数是否意味着它只调用该函数一次，并且可以无限次重复使用而无需对函数进行额外调用，还是仍然多次调用该函数？

**这是：**

```
$variable = function_name();
echo $variable;
echo $variable; 
```

**与此相同：**

```
echo function_name();
echo function_name(); 
```

我知道这两种情况最终都会显示相同的信息，但我很好奇该数据是否被一次获取并重复使用多次，或者是否在每次回显时都被获取。

那么将变量分配给函数是否意味着`function_name();`只工作一次，而变量只是回收数据以供以后使用，还是`function_name();`实际上工作两次？

分配变量或每次需要使用时直接调用函数是更好的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:52:13.060

一个函数应该总是返回一些值，例如，如果你有一个这样的函数。

```
function foo() {
    return 'hello world';
} 
```

如果你调用它并将它分配给一个变量然后

```
/*
* in the below example the function will be called once 
* and the function's return value will be assigned to $a variable
* now $a will contain value 'hello world';
*/
$a = foo(); 
```

如果您尝试打印变量`$a`，它将仅打印它包含的值，而不会再次调用该函数，因为`$a`现在包含“hello world”；

通过多次回显 $a 变量。

```
echo $a;
echo $a;
echo $a; 
```

将简单地打印该值`hello world`3 次而不调用该函数 3 次。

但是，例如，当您多次调用该函数时。

```
$a = foo();
$a = foo(); 
```

现在来回答你的问题。

> 这将导致函数被多次调用。以及被函数调用返回的前一个值覆盖的值。将变量分配给函数意味着 function_name(); 也是如此。只做一次工作，变量只是回收数据以供以后使用，或者 function_name(); 实际工作两次？

我希望我已经详细解释了这一点。

```
Is it better practice to assign variables or just directly call the function each time it needs to be used? 
```

好吧，这取决于上下文以及您要使用的函数，底线是，总是尝试从函数返回一些值，例如。

**a)**如果该函数用于获取一些值并对其进行格式化，则应将其作为数组、字符串或任何数据类型返回。

**b)**如果该函数旨在执行某些操作而不是任何获取，那么您可以返回布尔值，例如`return true|false`指示操作是否成功。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T19:58:18.823

它只会运行一次

```
<?php
function test(){
    return time();
}

$a = test();

echo $a . "\n";
sleep(1);
echo $a . "\n"; 
```

* * *

```
larikov@mb:~# php -f t.php 
1343159819
1343159819 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T19:51:40.517

该函数将在您调用它时运行多次。在第二个示例中，函数将运行两次，如果函数在两种情况下返回完全相同的代码，则效率很低。缓存会有所帮助，但它可能会被抛出缓存，缓存可能已满。最好将它放在第一个示例中的变量中，然后根据需要输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T02:52:22.807

编程语言通常是非常直接的。即使使用像 PHP 这样的高级语言，您也可以命令计算机/处理器执行该操作。

因此，如果您发出命令`echo "day";`，它将打印出字符串*day* - 就像写的一样。就像说的那样：非常直截了当。

那么调用函数呢：

```
printf("%s", 'day'); 
```

也打印出字符串*日*。也确实将字符串格式化`'day'`为`printf`. 所以函数被调用。

> 分配变量或每次需要使用时直接调用函数是更好的做法吗？

这是一个相当哲学的问题。从技术上讲，两者可以相同。如果两者相同，更*明智*的做法是调用一次函数，将返回值分配给一个值并存储起来以备后用。

存储到变量的好处是，通常情况下，无论如何都需要这样做（即使不是显式地存储到变量，而是存储到内存），对于程序员来说，这是最有用的想法：一个变量，便宜。拿着。使您的软件快速运行——即使您认为：呃，至少这是一个额外的变量，它会减慢速度。事实是：变量通常会加快您的开发速度。此外，PHP 具有写时复制功能，这意味着实际上大多数时候都不会复制数据。

# php - 连接 PHP 套接字时出现奇怪的超时

> ID：11638240
> 
> 赞同：1
> 
> 时间：2012-07-24T19:46:46.880
> 
> 标签：php, linux, apache, sockets, networking

## 系统

我为（商业）客户端编写了一个基于 PHP 和 Apache 的简单消息分发系统。数据流的简化版本如下所示：通过 HTTP 将 JSON 消息发送到运行在 Apache 服务器上的 PHP 脚本，该脚本对其进行一些处理，然后再次使用 HTTP 将其分发给多个客户端，大约. 10-20。这些消息以不同的时间间隔出现，每秒最多 5 条消息，但有时每分钟只有一条。

使用的服务器是一台功能强大的 Ubuntu 机器，具有 8gB 内存和位于连接良好的数据仓库中的快速网卡。

由于客户端对响应时间有非常严格的要求（对于等待回复的消息，响应时间必须低于 200 毫秒），我实现了自己的 HttpRequest 类，以允许对各种超时和执行持续时间进行非常细粒度的控制。服务器使用此类将消息转发给其客户端。有趣的部分看起来像这样：

```
class HttpRequest {
    private $host;
    private $port;
    private $path;

    private $connection = null;
    private $headers = array();

    [...]

    const CONTENT_TYPE = 'application/json';
    const ENCODING = 'utf-8';
    const TIMEOUT = 0.2;

    const MAX_RESPONSE_SIZE = 0xFFFF; // 64 kB

    public function __construct($url, $callback = null) {
        if (empty($url)) {
            throw new HttpException("url cannot be empty");
        }

        $url_parts = parse_url($url);

        $this->host = $url_parts['host'];
        $this->port = (empty($url_parts['port']) ? 80 : $url_parts['port']);
        $this->path = $url_parts['path'];

        $this->headers['Host'] = $this->host;
        $this->headers['Connection'] = 'close';
        $this->headers['Cache-Control'] = 'no-cache';
    }

    public function __destruct() {
        try {
            $this->disconnect();
        } catch (Exception $e) {
        }
    }

    private function connect() {
        if ($this->connection != null) {
            // already connected, simply return
            return;
        }

        $errno = '';
        $errstr = '';
        $_timeout = self::TIMEOUT;

        $this->connection = @fsockopen($this->host, $this->port, $errno, $errstr, $_timeout);

        if ($this->connection === false) {
            throw new HttpException("error during connect: $errstr", ($errno == SOCKET_ETIMEDOUT));
        }

        stream_set_timeout($this->connection, (int)(floor($_timeout)), (int)(($_timeout - floor($_timeout)) * 1000000));

        [variable assignments]
    }

    private function disconnect() {
        if ($this->connection == null) {
            // already disconnected, simply return
            return;
        }

        @fclose($this->connection);
        $this->connection = null;
    }

    public function post($data, $fetch_response = true, $path = null) {
        if (empty($data)) {
            throw new HttpException("no data given", false);
        }

        $contenttype = 'application/x-www-form-urlencoded';

        if (is_string($data)) {
            $data = urlencode($data);
        } else if (is_array($data)) {
            $data = http_build_query($data);
        } else if ($data instanceof Message) {
            $data = json_encode($data);

            $contenttype = 'application/json';
        }

        if (!is_string($data)) {
            throw new HttpException("wrong datatype", false);
        }

        $encoding = mb_detect_encoding($data);

        if ($encoding != self::ENCODING) {
            $data = mb_convert_encoding($data, self::ENCODING, $encoding);
        }

        if (empty($path)) {
            $path = $this->path;
        }

        // set header values
        $this->headers['Content-Type'] = $contenttype . '; charset=' . self::ENCODING;
        $this->headers['Content-Length'] = mb_strlen($data);

        // build request
        $request = "POST $path HTTP/1.1\r\n";

        foreach ($this->headers as $header => $value) {
            $request .= "$header: $value\r\n";
        }

        $request .= "\r\n$data";

        // and send it
        $this->sendRequest($request, $fetch_response);

        if ($fetch_response) {
            // fetch and parse response
            $resp = $this->receiveResponse();

            return $resp;
        }
    }

    public function get($path = null) {
        [build and execute http query]
    }

    private function sendRequest($request, $keep_connected = true) {
        // connect the socket
        $this->connect();

        [timer1]

        // write out data
        $result = @fwrite($this->connection, $request);

        [timer2]

        if ($result === false || $result != mb_strlen($request)) {
            $this->disconnect();
            throw new HttpException("write to socket failed", false);
        }

        if (!$keep_connected) {
            $this->disconnect();
        }
    }

    private function receiveResponse() {
        [fetch response using stream_select() and fgets() while strictly observing the timeout]
    }

    private function parseLine($msg) {
        [process http response, used in receiveResponse()]
    }
} 
```

这个类通常是这样使用的：

```
$request = new HttpRequest($url);
$request->post($data); 
```

## 问题

每隔一段时间，一些消息就会过期并记录超过 5 秒的超时。仅从代码来看，这应该是不可能的，因为对 IO 相关函数的每次调用都应该在这段时间之前很久就超时。

分析语句（在代码中表示为 [timer1] 和 [timer2]）显示对 HttpRequest->connect() 的调用是发生延迟的地方。我最好的猜测是 fsockopen() 出于某种原因忽略了交给它的超时。

有趣的是，每当超时超过给定限制时，它们通常只是超过 5 秒，这让我相信在较低层的网络代码中的某处存在 5 秒的延迟（例如，套接字资源耗尽）。可能可以排除与 DNS 相关的问题，因为当使用 IP 地址指定主机时也会发生此行为。

该问题通常发生在将消息分发给多个客户端时，这意味着将快速连续发送多个请求，但是我在仅向一个客户端发送单个消息时也注意到了它。当对 Apache 有多个同时请求时，它似乎通常发生，但并非必然发生。

有没有人遇到过类似的问题？互联网不是很详尽，也没有通过 PHP 源代码工作。有关如何解决此问题的任何指示？

# javascript - 调整具有多种字体大小的div中的文本大小？

> ID：11638242
> 
> 赞同：1
> 
> 时间：2012-07-24T19:46:48.273
> 
> 标签：javascript, jquery, html, css

我在正在显示的 div 中有一些文档，我希望用户能够调整其中的字体大小。像这样的某种代码：

```
$("#fontPlusBtn").click(function (){
    $("#textDiv").css("font-size", "*=1.1");
}): 
```

如何在此 div 中按比例调整所有文本节点（大小不同）的大小？

**更新：（工作版）**

我在这里结合了一些答案，并改变了我之前的答案，所以对于后来遇到这个问题的其他人来说，这就是我所做的：

```
var upFontSize = function($obj) {
    $obj.children().each(function(index){
        if($(this).children().length > 0){
            upFontSize($(this));
        }else {
            $(this).css({
                "font-size": function(index, value) {
                    return parseFloat(value) * 1.1;
                },
            });
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:40:16.277

这是回答您的问题并考虑多种文本大小，并相应地调整它们的大小：

...这是一个工作示例：

[http://jsfiddle.net/Xr2gj/44/](http://jsfiddle.net/Xr2gj/44/)

js：

```
$(document).ready(function (){
    $("#fontPlusBtn").click(function (){
        $(".textDiv, .textDiv > *").each( function(index){
            $(this).css( {
                "font-size": function(index, value) {
                    return parseFloat(value) * 1.1;
              }
            });
        });
    });
}); 
```

CSS：

```
#world{
    font-size: 8pt;
}

#solarSystem{
    font-size: 12pt;
}
#galaxy{
    font-size: 14pt;
}

#universe{
    font-size: 16pt;
} 
```

html:

```
<a id="fontPlusBtn" href="#">
    Click to increase font-size
</a>

<div class="textDiv" id="world">
    Hello World!
</div>

<div class="textDiv" id="solarSystem">
    <p><b>Hello Solar System!</b></p>
</div>

<div class="textDiv" id="galaxy">
    <p>Hello Galaxy!</p>
</div>

<div class="textDiv" id="universe">
    <p><div><b><a href="#">Hello Universe!</a></b></div></p>
</div> 
```

​您可能可以与其他一些答案混合使用，但是这个[http://jsfiddle.net/Xr2gj/44/](http://jsfiddle.net/Xr2gj/44/)显示它就像您指定的那样工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:01:34.473

`"As of jQuery 1.6, .css() accepts relative values similar to .animate(). Relative values are a string starting with += or -= to increment or decrement the current value. For example, if an element's padding-left was 10px, .css( "padding-left", "+=15" ) would result in a total padding-left of 25px."`
[参考](http://api.jquery.com/css/)

因此，您可以使用将返回实际值的函数回调，然后返回新值。
像下面这样。

```
 $("#fontPlusBtn").click(function (){
        $("#textDiv > *").css("font-size", function(i, value) {
            return parseInt(value) * 1.1;
        });
    }); 
```

[**演示**](http://jsfiddle.net/a2FKW/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:55:19.843

这是示例 - [jsFiddle](http://jsfiddle.net/ZD7gm/17/)

这是代码：

```
$("#fontPlusBtn").click(function (){
    var getNr = parseInt($("#textDiv").css("font-size")) * 1.1;
    $(".textDiv").css("font-size", getNr+"px");
});​ 
```

问题是，css 中没有任何除法或乘法条件，只有`+=px`or `-=px`。所以你所做的只是从实际元素中获取解析后的整数`font-size`，然后将其相乘，然后应用它。

# c# - Sharepoint 2010 单选按钮水平显示

> ID：11638244
> 
> 赞同：0
> 
> 时间：2012-07-24T19:46:58.523
> 
> 标签：c#, sharepoint-2010, schema

有没有办法让单选按钮在 Sharepoint 2010 中水平显示？

这是我的架构中的代码，但按钮垂直显示。

```
 <Field Name ="Hardware_Type" DisplayName="Hardware Type" Type="Choice" Format="RadioButtons">
    <CHOICES>
      <CHOICE>Smart Phone</CHOICE>
      <CHOICE>Cellular Phone</CHOICE>
      <CHOICE>Tablet</CHOICE>
      <CHOICE>Air Card</CHOICE>
    </CHOICES>
  </Field> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:13:18.893

我认为这是你需要做的：

每行两个：

```
$().SPServices.SPArrangeChoices({
columnName: "Hardware Type",
perRow: 2
}); 
```

每行七个：

```
$().SPServices.SPArrangeChoices({
columnName: "Hardware Type",
perRow: 7
}); 
```

[这是一个链接](http://spservices.codeplex.com/wikipage?title=%24%28%29.SPServices.SPArrangeChoices&referringTitle=Documentation)，其中包含有关此的更多信息。

# netbeans - 如何在 NetBeans 中禁用切换打开文档？

> ID：11638248
> 
> 赞同：6
> 
> 时间：2012-07-24T19:47:22.970
> 
> 标签：netbeans, ide, keyboard-shortcuts, netbeans-7

NetBeans (7) 非常适合让您自定义键盘快捷键。

就个人而言，我想`ctrl`-`tab`切换到右侧的选项卡`ctrl`- `shift`-`tab`切换到左侧，但目前这些会启动恼人的 Toggle Between Open Documents 弹出窗口：

![上述烦人的弹出窗口](../Images/a5cf9690e5e34fe207baf774cd0678aa.png)

我已经使用[此处](http://forums.netbeans.org/ptopic50242.html)描述的获取选项卡的解决方法将我的键盘快捷键设置为具有“下一个选项卡” ，但是无法从该菜单配置切换打开文档行为并且覆盖了我的快捷方式。

![在此处输入图像描述](../Images/dcc5425057717b8a77317b359e685b77.png)

:(？

*PS：不想将我的整个键绑定切换到另一个配置文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:07:37.267

使用 Netbeans 7.2，我发现在根据屏幕截图配置快捷方式后，短暂按下 CTRL+TAB 切换到右侧的选项卡，按下 CTRL+SHIFT+TAB 短暂切换到左侧的选项卡。只有按住这些按钮，才会出现烦人的弹出窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T21:53:23.530

我声称它无法完成，因为如果可以的话，那么 SO 上的某个人会知道该怎么做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-06T13:21:26.257

看起来这在 Netbeans 7.3.1 中仍然是不可能的。选项卡切换器似乎被硬编码为 Ctrl + Tab。

作为一种解决方法，`Ctrl`+`Pg Dn`或`Ctrl`+`Pg Up`似乎又被硬编码到下一个选项卡和上一个选项卡操作。

# android - Android人像相机可靠性

> ID：11638250
> 
> 赞同：8
> 
> 时间：2012-07-24T19:47:26.603
> 
> 标签：android, android-camera

我正在开发一个面向应用程序的 SDK 8，其中包含使用相机视图的 min SDK 7。

显然，旋转相机拍摄人像的问题已经进行了相当多的讨论。我目前有以下将 SDK 7 和 8+ 分开的修复：

```
if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.FROYO){
    theCamera.setDisplayOrientation(90);
} else {
    parameters.set("orientation", "portrait");
    parameters.set("rotation",90);
} 
```

它适用于我拥有的 2.1update1 设备和 SGS2（运行 ICS）。

我的问题是，这些解决方案在设备之间具有什么样的可靠性？我已经看到了一些针对“pre-froyo”情况的解决方案，所以我怀疑这个解决方案是否适用于所有设备。我还想知道在不同设备上对“setdisplayorientation”的尊重程度如何......

听到其他人对此的经验，我将非常感激。

* * *

所以更多信息：[如何正确设置Android相机方向？](https://stackoverflow.com/questions/4645960/how-to-set-android-camera-orientation-properly) 这解释了这些方法在某些时候有效。那么进一步的问题是从什么时候（SDK版本） setDisplayOrientation 开始工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:48:36.483

一种奇怪的解决方案是，所有设备的方向都不完全相同。它完全依赖于 OEM，可以改变设备（我在许多设备上尝试过）。你不能简单地修复它。在首次启动时显示带有相机预览的 Activity，并询问用户建议的旋转是否是他想要的，如果不是，允许他更改它。根据用户选择，您可以处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:22:38.913

我相信你的方法效果很好。如果您觉得应用程序与设备无关，那么您唯一可以做的就是构建不同版本的 APK。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T12:37:39.573

我认为检查 api 级别不是处理这个问题的正确方法。查看以下代码以锁定方向。

```
public static void lockRotation(final AndroidActivity activity) {
    Display display = ((WindowManager) activity.getSystemService(activity.WINDOW_SERVICE)).getDefaultDisplay();

    // Lock the rotation effect
    // For every 90 degrees we have an other orientation (not only landscape & portrait)
    if (Surface.ROTATION_0 == display.getOrientation()) {
        activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    } else if (Surface.ROTATION_270 == display.getOrientation()) {
        activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    } else if (Surface.ROTATION_90 == display.getOrientation()) {
        activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT);
    } else if (Surface.ROTATION_180 == display.getOrientation()) {
        activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE);
    }
} 
```

# perl - 如何知道必须安装什么库才能运行 perl 或 pm 文件？

> ID：11638251
> 
> 赞同：1
> 
> 时间：2012-07-24T19:47:39.837
> 
> 标签：perl

我有一些 perl 文件和 perl 模块，我需要它运行。

谁能帮我找出需要安装什么库（如 pcap 或 Netpacket）？我想知道任何用于验证的中心位置。

我安装了几乎所有的库，但没有得到预期的输出。当我跑步时

```
$ perl Makefile.PL

Note (probably harmless): No library found for -lwiretap
Writing Makefile for Wtap. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T21:01:40.377

它会告诉您您缺少哪个库：`wiretap`. 谷歌搜索似乎表明它是[Wireshark](http://www.wireshark.org/)的一部分，尽管 Wtap 的文档应该很明显。我怀疑安装 Wireshark 会安装您缺少的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:57:13.337

我不知道 MyWiretap.pm 或 Wtap 是什么。它们似乎是“本土种植的”，在 CPAN 或其他地方不可用。

我的假设是您可能有兴趣使用[Net::Sharktools](https://metacpan.org/module/Net%3a%3aSharktools)来实现您的目的。

# asp.net - 在 ASP.net 中显示当前时间并让它滴答作响

> ID：11638259
> 
> 赞同：2
> 
> 时间：2012-07-24T19:48:24.307
> 
> 标签：asp.net, vb.net, time, timer

我的申请中要求显示日期和时间。我在我的 .net 应用程序中使用 Ajax 来执行此操作。

目前我有这个代码

```
 <asp:ScriptManager ID="ScriptManager1" runat="server" />
                    <asp:Timer ID="UpdateTimer" runat="server" Interval="1000" OnTick="UpdateTimer_Tick" />
                    <asp:UpdatePanel ID="TimedPanel" runat="server" UpdateMode="Conditional">
                        <Triggers>
                            <asp:AsyncPostBackTrigger ControlID="UpdateTimer" EventName="Tick" />
                        </Triggers>
                        <ContentTemplate>
                            <asp:Label runat="server" ID="DateStampLabel" />
                        </ContentTemplate>
                    </asp:UpdatePanel> 
```

刷新页面时除了延迟一秒外，它工作得很好。我的问题是，这是实现这一目标的最佳方法吗？我也许可以不显示秒数而侥幸……这可能不太重要。如果我这样做，我该怎么做？

这是代码隐藏...

```
Protected Sub UpdateTimer_Tick(ByVal sender As Object, ByVal e As System.EventArgs)
    DateStampLabel.Text = DateTime.Now.ToString()
End Sub 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:55:47.467

我不建议您这样做，因为每次您想刷新计时器（每秒）时，您实际上是在访问服务器以显示计时器。显然，这种方法的性能影响是负面的

而且您正在使用*邪恶* `UpdatePanel`，这意味着您每次都在执行整个页面生命周期。

如果您依赖客户端浏览器，您可以完成相同的行为：

```
$('#digital-clock').clock({offset: '0', type: 'digital'});
<ul id="digital-clock" class="digital">
  <li class="hour"></li>
  <li class="min"></li>
  <li class="sec"></li>
  <li class="meridiem"></li>
</ul> 
```

参考：

[http://joaquinnunez.cl/jquery-clock-plugin/](http://joaquinnunez.cl/jquery-clock-plugin/)

# asp.net-mvc-3 - 将 MVC 3 迁移到 MVC 4，ASP.NET 表单登录不适用于旧帐户

> ID：11638262
> 
> 赞同：0
> 
> 时间：2012-07-24T19:48:38.673
> 
> 标签：asp.net-mvc-3, migration, asp.net-membership, asp.net-mvc-4, authentication

我正在将我的 MVC 3 应用程序迁移到 MVC 4，我注意到所有现有用户的密码现在都无效。

我将标准 ASP.NET 成员资格模式与所有普通表（如 table `aspnet_Membership`）一起使用

我有什么办法可以让所有密码都可以正常工作而无需全部重置？

我迁移的方式是创建一个新的 MVC 4 项目并复制所有文件。

### 编辑

所以，我做了更多的挖掘，我发现 MVC4 应用程序没有使用默认的`aspnet_<TableName>`表名。它创建了自己的没有`aspnet_`前缀的表。所以现在我的数据库除了所有标准表之外，还有一个 Applications、Memberships、Profiles、Roles、Users 和 UsersInRoles 表。我从来没有注意到这些表是创建的，因为我在同一个数据库中已经存在类似的表。他们只是混在一起！

我的新问题是，如何将现有表用于应用程序？我已经转换了几个这样的项目，而且我从来不需要指定用于 asp.net 成员跟踪的特定表。

这是我的 Web.config：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="DataContext" connectionString="metadata=res://*/Entities.csdl|res://*/Entities.ssdl|res://*/Entities.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=tcp:database.windows.net,1433;initial catalog=db;persist security info=True;user id=dbguy;password=PPPPassword;multipleactiveresultsets=True;application name=EntityFramework&quot;" providerName="System.Data.EntityClient" />
    <add name="ApplicationServices" connectionString="Server=tcp:database.windows.net,1433;Database=db;User ID=dbguy;Password='PPPassword';Trusted_Connection=False;Encrypt=True;Connection Timeout=30;" />

  </connectionStrings>
  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <profile defaultProvider="DefaultProfileProvider">
      <providers>
        <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="ApplicationServices" applicationName="/" />
      </providers>
    </profile>
    <membership defaultProvider="DefaultMembershipProvider">
      <providers>
        <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="true" requiresUniqueEmail="true" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
      </providers>
    </membership>
    <roleManager defaultProvider="DefaultRoleProvider">
      <providers>
        <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="ApplicationServices" applicationName="/" />
      </providers>
    </roleManager>
    <sessionState mode="InProc" customProvider="DefaultSessionProvider">
      <providers>
        <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="ApplicationServices" />
      </providers>
    </sessionState>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
  </system.web>
  <system.webServer>
    <httpErrors errorMode="Detailed" />
    <asp scriptErrorSentToBrowser="true" />
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T05:10:34.040

你的两个部分`web.config`会影响到这一点。

第一个是`passwordFormat`成员资格配置元素的属性。这可以是`Clear`OR `Encrypted`OR之一`Hashed`。如果您没有设置值，则默认值为`Hashed`. 为了完整起见，我已经列出了这个，但有点期望你已经将它作为明显的配置区域进行了检查。

要查看的第二个配置是`machineKey`元素。如果您碰巧选择了`passwordFormat`加密，那么 ASP.net 成员将使用您`machineKey`来加密/解密它。`machineKey`用于执行密码的加密。要让多个单独的网站共享凭证信息，它们需要具有相同的`machineKey`集合。在您的情况下，您可能`machineKey`在一个或两个网站中都没有定义，并且可能会或可能不会将它们放在单独的物理机器（或者更确切地说是服务器实例）上。

*   [尼斯概述或会员密码格式配置属性](http://www.qualitydata.com/learn/asp-net-membership-provider-password-format "不错的概述或会员配置属性`passwordFormat`")

理想情况下，您将在旧的 MVC3 应用程序 web.config 上指定一个 machineKey，您可以将其复制粘贴到新的 web.config。如果您没有这样做，您将需要跳过一些障碍来尝试恢复自动生成的。我已经包括

*   [使用反射恢复自动生成的 MachineKey](http://aspnetresources.com/blog/how_to_read_auto_generated_machinekey "使用反射恢复自动生成的 MachineKey")

您的最终目标是让新项目使用与旧项目相同的 passwordFormat 和 machineKey（即使 machineKey 是自动生成的，因为您没有在 web.config 中明确指定一个）

## 编辑 - 更多信息

查看您的问题编辑中提供的 web/config，查看`<system.web>`called `<profile>`, `<membership>`, `<roleManager>` *(和可选的`<sessionState>`)*下的设置。这些部分告诉您的 Web 项目要为您的网站使用哪些提供程序。但是，“默认”系列提供商将代表您做出一些决定，以允许网站在 SQL Server、Azure、SQL Server CE 等上运行......在幕后更改其实施。您将需要为其中的每一个设置一个显式提供程序以匹配您的旧 ASP.net 应用程序。如果没有看到您的旧 web.config，我会冒险猜测您正在使用 System.Web.Profile/System.Web.Security 命名空间中的 SqlProviders。

所以尝试这样的事情：（检查您的旧 web.config 以查看*这些配置元素中的每**一个是否有不同的提供程序）`type`*

```
<membership>
  <providers>
    <clear />
    <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" /* Your other settings here */ />
  </providers>
</membership>
<profile>
  <providers>
    <clear />
    <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
  </providers>
</profile>
<roleManager enabled="false">
  <providers>
    <clear />
    <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
  </providers>
</roleManager> 
```

老实说，我从未使用过那些“通用提供程序”，因为我的大部分工作都在使用 Sql Server。因此，如果您想了解更多信息，您可以[从 Scott Hanselman 的这篇介绍性博客文章](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)开始阅读 ASP.net 的通用提供程序。

# javascript - cookie 写入是否受限于 cookie 值的大小？

> ID：11638264
> 
> 赞同：1
> 
> 时间：2012-07-24T19:48:42.683
> 
> 标签：javascript, cookies

我有以下代码，它采用 textarea 的值并将其写入 cookie。

但是，对于较大的值，似乎没有设置 cookie。

```
var xVal = $('div#content-case div#edit-document textarea#feed-edit-box').val();
xVal = xVal.replace(/(\r\n|\n|\r)/gm, "");

var exdate = new Date();
exdate.setDate(exdate.getDate() + 1);
var c_value = xVal + ((1 == null) ? "" : "; expires=" + exdate.toUTCString());
document.cookie = "TempFile=" + c_value; 
```

如果是这样，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:53:27.407

在某些浏览器（IE）中，Cookie 限制为 4096 字节，而不是将您的值保存到 cookie 中使用此[http://www.jstorage.info/](http://www.jstorage.info/)，每次您发出请求时，数据都不会发送到服务器，并且存储大小要大得多。

# hadoop - 数据插入特别是 hbase regionserver

> ID：11638265
> 
> 赞同：0
> 
> 时间：2012-07-24T19:48:45.227
> 
> 标签：hadoop, hbase

我想在特定的datanode\regionserver中插入数据，

为此需要进行哪些配置更改？

假设有 4 个数据节点 A、B、C、D 主机名。和 4 个线程正在运行。一个线程仅在数据节点 A 和 B 上插入记录。另一个线程在数据节点 C 中插入\访问记录。第四个线程在 C 和 D 中插入记录。

我可以为这种类型的插入做任何配置吗？哪个 hbase\hadoop API 将用于编程插入\访问？

还有一件事，我们可以指定在客户端 java 应用程序和 hbase db 和 hadoop 集群中使用的相同字符格式（UTF8）吗？

问候， 拉什米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T01:35:53.543

使用 hbase，您不能真正针对特定的数据节点或区域服务器。我想您可以针对特定区域，如果您确保每个区域服务器只有一个区域，那么它非常接近您正在寻找的区域。我可以说这不是 hbase 的典型使用模式，所以我会确保这确实是你想要的。

要管理区域，您需要通过将 hbase.hregion.max.filesize 设置为 100GB 并手动预拆分表来禁用拆分。您可以使用 HBaseAdmin 类预先拆分表。

就字符格式而言，hbase 没有数据类型或字符集——所有内容都存储为字节——所以使用 utf8 应该没有问题。

如果您使用 java，则可以使用[标准 java API](http://archive.cloudera.com/cdh/3/hbase/apidocs/index.html)。对于其他语言，您可以选择 Thrift、Avro 和 REST 接口，尽管它们都不会像使用 java API 一样快。

# javascript - 如何让我的 ajax 请求更安全？

> ID：11638267
> 
> 赞同：-4
> 
> 时间：2012-07-24T19:49:08.263
> 
> 标签：javascript, jquery, button, twitter

就像你们很多人都知道，javascript函数或方法可以通过浏览器地址栏运行。我想通过我应该使用什么样的概念来防止这种情况发生，当它在地址栏中运行并且不起作用时，用户可能不知道我的函数参数必须进入什么！？

我想使用一个类似于 twitter-follow-button 的概念。但是，如果人们知道特定的事情（id、日期等），他们可以通过获得更多的追随者和东西来破解它。我只希望它在被点击时运行。

使用程序：PHP、jquery、css，所以示例可以基于以上。

任何帮助appriciated。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:57:36.890

> javascript函数或方法可以通过浏览器地址栏运行。我想防止这种情况发生

你不能。

> 我想通过我应该使用什么样的概念来防止这种情况发生，当它在地址栏中运行并且不起作用时，用户可能不知道我的函数参数必须进入什么！？

您可以混淆代码，但这不会阻止它被逆向工程或简单地重写。重要的是 HTTP 请求，而不是产生它们的 JS。

> 我想使用一个类似于 twitter-follow-button 的概念。但是，如果人们知道特定的事情（id、日期等），他们可以通过获得更多的追随者和东西来破解它。

您需要*在服务器*上验证是否允许发出请求的用户发出请求。在该特定情况下，您可以使用当前登录用户的会话数据来确定哪个用户成为关注者。

您还应该实施[CSRF 保护](http://en.wikipedia.org/wiki/Cross-site_request_forgery)，以便其他站点无法将用户转发到您的站点。

您不能轻易阻止 Malory 向 Alice 提供一些 JavaScript 以将其放入将发出请求的地址栏中。那是一种社会工程攻击。不过，浏览器现在正在实施针对它的保护（例如，从地址栏中阻止 javascript: uris 并让人们改用开发人员工具）。

您可以实施速率限制，以便脚本无法让用户在短时间内关注 10 个人。

您可以让请求是一个需要对不同子域的整页请求，并让该子域将确认请求拉回原始服务器。由于用户必须与来自两个主机名的数据进行交互，因此单个粘贴的脚本将无法完成整个过程（因为存在同源策略）。不过，这可能是矫枉过正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:57:32.710

简而言之，按照你描述的方式，这是不可能的。

*   [无法阻止 Javascript 代码注入](http://www.webdeveloper.com/forum/showthread.php?t=187045)
*   Javascript 不能真正对用户隐藏以防止修改。你能做的最好的就是[混淆](https://stackoverflow.com/questions/194397/how-can-i-obfuscate-javascript)它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:53:36.290

我认为您最好的方法是避免将任何变量添加到全局范围。

全局无法访问的内容将无法从页面、地址栏等上的匿名函数访问。如果无法将脚本[注入](http://en.wikipedia.org/wiki/Code_injection#HTML-script_injection_.28cross-site_scripting.29)您的页面，您应该是非常安全的。

除此之外，我不相信有办法*阻止*用户在地址栏上运行脚本。

# c++ - 什么时候按位交换（）是一个坏主意的例子？

> ID：11638271
> 
> 赞同：7
> 
> 时间：2012-07-24T19:49:22.030
> 
> 标签：c++, bit-manipulation, swap

您不应该将对象指针视为指向 OOP 语言（包括 C++）中原始二进制数据的指针。对象“不仅仅是”它们的表示。

因此，例如，`swap`通过交换它们的字节来 ing 两个对象是不正确的：

```
template<class T>
void bad_swap(T &a, T &b)  // Assuming T is the most-derived type of the object
{
    char temp[sizeof(T)];
    memcpy(temp, &a, sizeof(a));
    memcpy(&a, &b, sizeof(b));
    memcpy(&b, temp, sizeof(temp));
} 
```

然而，我可以想象这个快捷方式导致*问题*的唯一情况是当一个对象包含一个指向自身的指针时，我在实践中很少（从来没有？）看到过。但是，可能还有其他情况。

`swap`如果您执行按位交换，有哪些实际（现实世界）示例说明何时正确会中断？
我可以很容易地想出带有自我指针的人为例子，但我想不出任何现实世界的例子。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-24T21:05:56.413

这不是具体的，`swap`而是一个示例，表明低级优化可能不值得麻烦。无论如何，编译器通常都会弄清楚。

当然，这是我最喜欢的例子，编译器非常幸运，但无论如何我们不应该认为编译器是愚蠢的，我们可以通过一些简单的技巧轻松改进生成的代码。

我的测试代码是 - 构造一个 std::string 并复制它。

```
std::string whatever = "abcdefgh";
std::string whatever2 = whatever; 
```

第一个构造函数看起来像这样

```
 basic_string(const value_type* _String,
               const allocator_type& _Allocator = allocator_type() ) : _Parent(_Allocator)
  {
     const size_type _StringSize = traits_type::length(_String);

     if (_MySmallStringCapacity < _StringSize)
     {
        _AllocateAndCopy(_String, _StringSize);
     }
     else
     {
        traits_type::copy(_MySmallString._Buffer, _String, _StringSize);

        _SetSmallStringCapacity();
        _SetSize(_StringSize);
     }
  } 
```

生成的代码是

```
 std::string whatever = "abcdefgh";
000000013FCC30C3  mov         rdx,qword ptr [string "abcdefgh" (13FD07498h)]  
000000013FCC30CA  mov         qword ptr [whatever],rdx  
000000013FCC30D2  mov         byte ptr [rsp+347h],0  
000000013FCC30DA  mov         qword ptr [rsp+348h],8  
000000013FCC30E6  mov         byte ptr [rsp+338h],0 
```

这里`traits_type::copy`包含对 的调用`memcpy`，它被优化为整个字符串的单个寄存器副本（仔细选择以适应）。编译器还将调用`strlen`转换为编译时间`8`。

然后我们将它复制到一个新的字符串中。复制构造函数看起来像这样

```
 basic_string(const basic_string& _String)
     : _Parent(std::allocator_traits<allocator_type>::select_on_container_copy_construction(_String._MyAllocator))
  {
     if (_MySmallStringCapacity < _String.size())
     {
        _AllocateAndCopy(_String);
     }
     else
     {
        traits_type::copy(_MySmallString._Buffer, _String.data(), _String.size());

        _SetSmallStringCapacity();
        _SetSize(_String.size());
     }
  } 
```

结果只有 4 条机器指令：

```
 std::string whatever2 = whatever;
000000013FCC30EE  mov         qword ptr [whatever2],rdx  
000000013FCC30F6  mov         byte ptr [rsp+6CFh],0  
000000013FCC30FE  mov         qword ptr [rsp+6D0h],8  
000000013FCC310A  mov         byte ptr [rsp+6C0h],0 
```

请注意，优化器会记住`char`'s 仍在寄存器`rdx`中，并且字符串长度必须相同，`8`。

正是在看到这样的事情之后，我才喜欢相信我的编译器，并避免尝试用一些小技巧来改进代码。它没有帮助，除非分析发现意外的瓶颈。

*（具有 MSVC 10 和我的 std::string 实现）*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-24T20:18:00.927

我要争辩说，这几乎总是一个*坏*主意，除非在已经完成分析并且更明显和更清晰的实现`swap`有性能问题的特定情况下。即使在那种情况下，我也只会对直接的无继承结构采用这种方法，而不是对任何类型的类。您永远不知道何时添加继承可能会破坏整个事物（也可能以真正阴险的方式）。

如果您想要快速交换实现，也许更好的选择（在适当的情况下）是 pimpl 类，然后只换出实现（同样，这假设没有指向所有者的反向指针，但这很容易包含在类中& impl 而不是外部因素）。

编辑：这种方法可能存在的问题：

*   指向自我的指针（直接或间接）
*   如果该类包含任何直接字节复制无意义的对象（有效地递归此定义）或通常禁用复制的对象
*   如果班级需要任何形式的锁定来复制
*   在这里很*容易*意外传入两种不同的类型（只需要一个中间函数来隐式地使派生类看起来像父类），然后交换 vptrs（哎呀！）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T20:39:00.330

为什么要设计“自指针”？

```
class RingBuffer
{
    // ...
private:
    char buffer[1024];
    char* curr;
}; 
```

这种类型保存一个缓冲区和缓冲区的当前位置。

或者您可能听说过 iostreams：

```
class streambuf
{
  char buffer[64];
  char* put_ptr;
  char* get_ptr;
  // ...
}; 
```

正如其他人提到的，小字符串优化：

```
// untested, probably buggy!
class String {
  union {
    char buf[8];
    char* ptr;
  } data;
  unsigned len;
  unsigned capacity;
  char* str;
public:
  String(const char* s, unsigned n)
  {
    if (n > sizeof(data.buf)-1) {
      str = new char[n+1];
      len = capacity = n;
    }
    else
    {
      str = data.buf;
      len = n;
      capacity = sizeof(data.buf) - 1;
    } 
    memcpy(str, s, n);
    str[n] = '\0';
  }
  ~String()
  {
    if (str != data.buf)
      delete[] str;
  }
  const char* c_str() const { return str; }
  // ...
}; 
```

这也有一个自指针。如果你构造两个小字符串然后交换它们，析构函数都将确定字符串是“非本地的”并尝试删除内存：

```
{
  String s1("foo", 3);
  String s2("bar", 3);
  bad_swap(s1, s2);
}  // BOOM! destructors delete stack memory 
```

Valgrind 说：

```
==30214== Memcheck, a memory error detector
==30214== Copyright (C) 2002-2010, and GNU GPL'd, by Julian Seward et al.
==30214== Using Valgrind-3.6.1 and LibVEX; rerun with -h for copyright info
==30214== Command: ./a.out
==30214== 
==30214== Invalid free() / delete / delete[]
==30214==    at 0x4A05E9C: operator delete[](void*) (vg_replace_malloc.c:409)
==30214==    by 0x40083F: String::~String() (in /dev/shm/a.out)
==30214==    by 0x400737: main (in /dev/shm/a.out)
==30214==  Address 0x7fefffd00 is on thread 1's stack
==30214== 
==30214== Invalid free() / delete / delete[]
==30214==    at 0x4A05E9C: operator delete[](void*) (vg_replace_malloc.c:409)
==30214==    by 0x40083F: String::~String() (in /dev/shm/a.out)
==30214==    by 0x400743: main (in /dev/shm/a.out)
==30214==  Address 0x7fefffce0 is on thread 1's stack 
```

所以这表明它会影响类型`std::streambuf`和`std::string`，几乎没有人为或深奥的例子。

基本上，`bad_swap`这*绝不*是一个好主意，如果类型是可简单复制的，那么默认值`std::swap`将是最佳的（您的编译器不会将其优化为 memcpy 然后获得更好的编译器），如果它们不是可简单复制的，那就太好了认识未定义行为先生和他的朋友严重错误先生的方式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T20:53:53.517

除了其他答案中提到的示例（特别是包含指向自身部分的指针和需要锁定的对象的对象）之外，还可能存在指向由外部数据结构管理的对象的指针的情况，需要相应地更新（请注意该示例有些人为，以免过度（并且可能由于未经过测试而出现错误））：

```
class foo
{
private:
   static std::map<foo*, int> foo_data;
public:
   foo() { foo_data.emplace(this, 0); }
   foo(const foo& f) { foo_data.emplace(this, foo_data[&f]); }
   foo& operator=(const foo& f) { foo_data[this] = foo_data[&f]; return *this}
   ~foo() { foo_data.erase(this); }
   ...
}; 
```

显然，如果对象被`memcpy`. 当然，现实世界的例子通常要复杂一些，但重点应该很清楚。

除了示例之外，我认为复制（或交换）像这样的非平凡可复制对象是标准未定义的行为（稍后可能会检查）。在这种情况下，根本无法保证该代码可以处理更复杂的对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T20:40:24.887

一些尚未提及的：

*   交换可能会产生副作用，例如您可能必须更新外部元素的指针以指向新位置，或者通知侦听对象该对象的内容已更改。
*   交换两个使用相对地址的元素会导致问题

# php - 如何在json中捕获脚本（在客户端服务器上）插件的url参数

> ID：11638288
> 
> 赞同：0
> 
> 时间：2012-07-24T19:50:30.237
> 
> 标签：php, jquery

所以我已经能够在单独的测试中成功捕获 url 参数。但我正在努力将它全部连接起来。

其中参数在第二层。如果我可以将 pubID 放在一个 var 中，那就太好了。

或者，如果有人能指出我正确的方向，那就太好了。谢谢

所以我打算构建 api 小部件，但无法从脚本中获取参数

在客户端服务器上，我将拥有以下脚本

```
<script src="http://api.yoursite.com/js/loader.js?pubID=test123" type="text/javascript"></script>
<div id="myDiv"></div> 
```

然后加载程序脚本将具有以下代码。

以下代码是 loader.js 文件。这段代码是由其他人编写的，对小部件很有用，但是很难完成基础知识哈哈

```
(function() {

// Localize jQuery variable
var jQuery;

/******** Load jQuery if not present *********/
if (window.jQuery === undefined || window.jQuery.fn.jquery !== '1.7.2') {
var script_tag = document.createElement('script');
script_tag.setAttribute("type","text/javascript");
script_tag.setAttribute("src",
    "http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js");
if (script_tag.readyState) {
  script_tag.onreadystatechange = function () { // For old versions of IE
      if (this.readyState == 'complete' || this.readyState == 'loaded') {
          scriptLoadHandler();
      }
  };
} else {
  script_tag.onload = scriptLoadHandler;
}
// Try to find the head, otherwise default to the documentElement
(document.getElementsByTagName("head")[0] || document.documentElement).appendChild(script_tag);
} else {
// The jQuery version on the window is the one we want to use
jQuery = window.jQuery;
main();
}

/******** Called once jQuery has loaded ******/
function scriptLoadHandler() {
// Restore $ and window.jQuery to their previous values and store the
// new jQuery in our local jQuery variable
jQuery = window.jQuery.noConflict(true);
// Call our main function
main(); 
}

/******** Our main function ********/
function main() { 
jQuery(document).ready(function($) { 
    /******* Load CSS *******/
    var css_link = $("<link>", { 
        rel: "stylesheet", 
        type: "text/css", 
        href: "style.css" 
    });
    css_link.appendTo('head'); 

    $.getJSON("http://api.yoursite.com/js/json.php?jsoncallback=?",
function(data){
  $('#myDiv').html(data.name);  
});

});
}

})(); // We call our anonymous function immediately 
```

为了捕捉参数，我使用了以下工作脚本。

```
// Parse URL Queries
function url_query( query ) {
query = query.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
var expr = "[\\?&]"+query+"=([^&#]*)";
var regex = new RegExp( expr );
var results = regex.exec( window.location.href );
if( results !== null ) {
    return results[1];
    return decodeURIComponent(results[1].replace(/\+/g, " "));
} else {
    return false;
}
}

// Example usage - http://www.kevinleary.net/?load=yes
var url_param = url_query('pubID');
if( url_param ) {
alert(url_param); // "yes"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:31:33.730

它称为[查询字符串](http://en.wikipedia.org/wiki/Query_string)。

使用这篇文章中提供的函数：[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)

# ruby - 如何从文件内容创建动态哈希？

> ID：11638293
> 
> 赞同：1
> 
> 时间：2012-07-24T19:50:52.560
> 
> 标签：ruby

目前我对此没有特定的目的，我将使用的示例肯定有更好的解决方案（因为对于如此简单的事情来说这是不必要的），但我仍然想看看如何做到这一点。我想用动态符号 <-> 内容填充散列。假设我有一个文件，其中包含：

```
this = that
that = this
frog = taco
pota = to 
```

我想创建哈希：

```
hash = { :this => 'that', :that => 'this', :frog => 'taco', :pota => 'to' } 
```

如果可能的话，我特别喜欢它是符号，因为我相信我已经看到它用变量完成了。由于 hash{variable => 'this'} 会将变量的内容设置为键。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T19:57:48.437

```
hash = Hash[open("file.txt").lines.map do |line|
  key, value = line.split("=").map(&:strip)
  [key.to_sym, value]
end] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:12:14.703

如果您可以定义自己的文件格式，则可能会有所不同并使用：

```
this: that
that: this
frog: taco
pota: to 
```

这是[YAML](http://yaml.org/)语法。

您可以通过以下方式轻松加载它：

```
require 'yaml'

filename = 'yourdatafile.txt'

p YAML.load(File.read(filename)) 
```

这将创建一个带有字符串的哈希。但是数据文件中的一些修改会给你你想要的符号：

```
:this: that
:that: this
:frog: taco
:pota: to 
```

# installation - 如何从 NSIS 备份 MySQL 数据库

> ID：11638294
> 
> 赞同：0
> 
> 时间：2012-07-24T19:50:55.840
> 
> 标签：installation, command-line-arguments, nsis, mysqldump, database-backups

我需要从 NSIS 安装程序备份 MySQL 数据库。我在尝试的脚本中遗漏了一些琐碎的东西：

```
nsExec::Exec '"$mySqlDirectory\bin\mysqldump.exe" --user=$username --password=$password --routines $dbName --execute="source D:\$dbName.sql"' $0

nsExec::Exec '"$mySqlDirectory\bin\mysqldump.exe" --user=$username --password=$password --routines $dbName --execute="D:\$dbName.sql"' $0

nsExec::Exec '"$mySqlDirectory\bin\mysqldump.exe" --user=$username --password=$password --execute="--user=$username --password=$password --routines $dbName D:\$dbName.sql"' $0

nsExec::Exec '"$mySqlDirectory\bin\mysqldump.exe" --user=$username --password=$password --routines $dbName "D:\$dbName.sql"' $0

nsExec::Exec '"$mySqlDirectory\bin\mysqldump.exe" --user=$username --password=$password /c echo --routines $dbName > "D:\$dbName.sql"' $0

ExecWait '"$1" /C "$mySqlDirectory\bin\mysqldump.exe" --user=$username --password=$password --routines $dbName > "D:\$dbName.sql"' $0

ExecWait '/C "$mySqlDirectory\bin\mysqldump.exe" --user=$username --password=$password --routines $dbName > "D:\$dbName.sql"' $0

StrCpy $BACKUPFILE "D:\ctvi.sql"
StrCpy $1 $BACKUPFILE
ExpandEnvStrings $2 %COMSPEC%
ExecWait '"$2" /C "$mySqlDirectory\bin\mysqldump.exe" --user=$username --password=$password $dbName > $1' $0

ExecWait '/C "$mySqlDirectory\bin\mysqldump.exe" -u$username --password=$password -R $dbName >"D:\$dbName.sql"' $0 
```

他们都没有工作。传递论点不是我的强项:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T22:38:55.397

这对我有用：

```
StrCpy $1 "D:\ctvi.sql"
ExpandEnvStrings $2 %COMSPEC%
ExecDos::exec /NOUNLOAD '"$2" /C "$mySqlDirectory\bin\mysqldump.exe" --user=$username --password=$password $dbName > $1' $0 
```

重要的是不要`"D:\ctvi.sql"`在执行命令中包含这样的路径，也不要引用路径变量。这就是我使用 的原因`$1`，也没有引用。

# c# - 创建具有自定义扩展名的文件，单击时会显示应用程序

> ID：11638295
> 
> 赞同：2
> 
> 时间：2012-07-24T19:51:05.057
> 
> 标签：c#

好的，我真的很努力，并尝试了一些关于不同事物的问题，比如如何调试，但到目前为止我还没有多少运气。基本上，我的应用程序出现了，用户做了一些事情。在某些时候，用户可以将他们的设置保存到扩展名为 .abc（原始文本格式）的输出文件中。此扩展程序已注册并可由应用程序编辑。因此，用户双击该文件，它会将应用程序带到主窗体视图。这一切都很好，花花公子。如果我在记事本中查看 .abc 文件，我可以看到我保存的所有设置。我的问题是，如何让应用程序读取几行文本，并知道程序是从文件中输入的，而不是仅仅选择从程序中运行它？例如，

```
firstname=john
lastname=hancock
address=1234 somewhere road, atlanta, GA  12345 
```

当用户双击文件启动程序时，我希望表单能够识别有启动参数，并在表单上填写适当的内容。所以也许表格会显示“你好约翰汉考克，欢迎回来”或类似的东西。这是一种可能吗？我可以让应用程序强制您选择文件->打开并以这种方式读取文本文件，但首选方法是一次性完成所有操作。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:56:23.457

当你启动程序时，你用来启动它的文件的文件名在

```
args[0] 
```

在你的主要方法中。

您可以做的是检查以确保，`args.Length > 0`然后使用`args[0]`您选择的任何文件解析方法加载具有任何名称的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T19:57:56.723

要让您的程序在单击其扩展之一时运行，请使用 Windows 注册表。如果您创建一个安装项目，可以自动为您注册扩展（它们的图标和程序）。看看[这里](http://www.dreamincode.net/forums/topic/58021-deploying-a-c%23-application-visual-studio-setup-project/)和[这里](http://etutorials.org/Programming/Mastering+visual+studio+.net/Chapter+6.+Setup+and+Deployment/6.8+File+Types+View/)。

正如在`@Sam I am`的回答中，当程序运行时会收到您指定如何处理文件的参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T02:10:15.937

尤里卡！至少在我的环境中，我终于找到了（a）答案。我正在使用 Visual Studio 2010 Express Edition，并且已将文件与扩展名相关联，因此当您双击它时，它会启动应用程序。为了获取该文件的路径，它不是作为参数存储，而是存储在 appdomain 属性中。如果执行此命令：

```
String test = AppDomain.CurrentDomain.SetupInformation.ActivationArguments.ActivationData[0]; 
```

变量测试最终看起来像这样：

“c:\dir/dir2/dir3/test.abc”

From there, I can read the file and get the contents, or anything else I want to do with it.

I would especially like to thank Desolator. Based on his input, I was better able to search the internet with the right keywords to finally find the answer!

Happy coding!

# r - 如何在 R 中将 NUM 转换为 INT？

> ID：11638303
> 
> 赞同：35
> 
> 时间：2012-07-24T19:51:44.840
> 
> 标签：r, int, type-conversion

我正在尝试将数字格式转换为 R 中的整数。这对于我使用 java 代码运行一些模拟（将这个特定数据读取为 int）的项目的一部分至关重要。

我都试过了`round(x$var, 0)`和`trunc(x$var)`。它们都运行成功，但是当我`str(x)`，`x$var`仍然是`num`。x 是一个数据框。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-24T19:53:35.470

使用`as.integer`：

```
set.seed(1)
x <- runif(5, 0, 100)
x
[1] 26.55087 37.21239 57.28534 90.82078 20.16819

as.integer(x)
[1] 26 37 57 90 20 
```

测试类：

```
xx <- as.integer(x)
str(xx)
 int [1:5] 26 37 57 90 20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-05T08:25:56.687

您可以使用`convert`from`hablar`快速更改数据框的列。

```
library(tidyverse)
library(hablar)

x <- tibble(var = c(1.34, 4.45, 6.98))

x %>% 
  convert(int(var)) 
```

给你：

```
# A tibble: 3 x 1
    var
  <int>
1     1
2     4
3     6 
```

# java - 取消我没有写的动态加载的 Callables

> ID：11638306
> 
> 赞同：1
> 
> 时间：2012-07-24T19:51:53.103
> 
> 标签：java, concurrency, classloader, future, callable

我有一些代码可以从目录中的多个 JAR 动态加载类。因为 JAR 中的代码是不受信任的，所以我希望通过“沙箱化”它们来保护主应用程序免受编码不良或恶意动态类的影响。我正在尝试做的一件事是“timebox”不受信任的代码的执行，如果它花费的时间太长，则将其杀死（例如，因为它陷入了无限循环）。我正在尝试使用 Callable 和 Future 来实现这一点，不是因为我想并行运行任务（我不这样做），而是为了利用已完成的工作来提供返回值、捕获异常并取消正在运行的任务。但是，当我在一些测试代码上运行它时，我发现调用 Future.cancel(true) 似乎并没有取消任务。

我在 StackOverflow 上看到了几个关于为什么会发生这种情况的问题（[例如这个](https://stackoverflow.com/questions/11158454/future-task-of-executorservice-not-truly-cancelling)），答案总是一样的：cancel(true) 通过在运行 Callable 的线程上调用 interrupt() 来工作，这需要取消取消生效之前的可中断（）操作（例如 Thread.sleep()）上的任务块。因为我不控制正在执行的代码，所以不能保证它会这样做，所以我不能确定我已经取消了它。

有什么方法可以让我运行动态加载的代码，然后在进行中杀死它并确保它死掉，即使它从不阻塞中断（）可操作的操作？

```
// Assume: ExecutorService pool, Callable<T> task,
//  long timeout, TimeUnit timeUnit
Future<T> future = pool.submit(task);
T result;

try {
    result = future.get(timeout, timeUnit);
    // do something with result
} catch (TimeoutException ex) {
    future.cancel(true);
    // handle timeout
} catch (ExecutionException ex) {
    // handle exeception thrown by task
} catch (InterruptedException ex) {
    // handle InterruptedException
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T19:56:06.047

取消，或者更确切地说是线程中断，机制基本上是协作的，你无法中断恶意任务。你唯一的选择，出于许多原因非常危险，就是对`Thread.stop()`他们来说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:25:58.240

`Thread.stop`在和旁边`Thread.destroy`，您可以使用`Process p = Runtime.getRuntime().exec( cmd );`. 这个过程真的可以被破坏`Process.destroy if necessary.`

要简化流程创建，请使用`ProcessBuilder`. 另外，查看可用的教程（[这个是法语的](http://labs.excilys.com/2012/06/26/runtime-exec-pour-les-nuls-et-processbuilder/)）来执行流程，等到完成（使用`waitFor`），并管理流。

我已经看到它在我们需要将 ps 文档转换为 pdf 的产品中工作。我们正在转储 ps 文件，执行`ps2pdf`，然后读取输出文件。

优点/缺点`Process`：

*   (+) 真正的沙盒进入一个单独的进程
*   (-) JVM之间的通信更难处理
*   (-) 使应用程序的部署复杂化（JVM 的路径、选项、当前目录等）

请注意，不鼓励使用`Thread.stop`and `Thread.destroy`（我不确定它是否已实际实现），因为它们在获取和释放锁方面是不安全的。确保您阅读了[为什么不推荐使用 Thread.stop、Thread.suspend、Thread.resume 和 Runtime.runFinalizersOnExit？](http://docs.oracle.com/javase/1.4.2/docs/guide/misc/threadPrimitiveDeprecation.html)如果在单独的线程中运行的不受信任的模块不会弄乱应用程序的锁，只有在最坏的情况下使用自己的锁，那么`Thread.stop`可能仍然是最好的选择。

的优点/缺点`Thread.stop`

*   (+) 易于使用
*   (+) 受信任代码和不受信任代码之间的通信很容易
*   (-) 已弃用
*   (-) 在某些必须首先评估的非常具体的情况下可能不安全

# dependency-injection - 你可以在持久实体中使用依赖注入吗？

> ID：11638311
> 
> 赞同：2
> 
> 时间：2012-07-24T19:52:12.557
> 
> 标签：dependency-injection, guice, cdi, datanucleus

我想为我的持久实体带来依赖注入，但我不确定如何做到这一点。

我的 GWT 应用程序中的加盐哈希算法需要 Base64 实现。GWT 附带旧版本的 commons-codec。由于名称冲突——我不使用 Maven——我可以弄清楚如何使用旧版本或使用另一种实现，例如 Base64.iharder.net。

在调整了几个备选方案之后，我为每个备选方案创建了一个接口和适配器类。我注入了一个实现。这似乎是一个经典的用例。

创建持久实体后，一切都运行良好。然而，在存储和检索它们之后，先前注入且未持久化的字段被实例化为空值。

这个问题很有意义。我使用 DataNucleus，它添加​​了一个无参数构造函数。DataNucleus 不会再次注入依赖项。

从数据存储中检索对象时，如何要求我的持久性框架重新注入依赖项？

谢谢你。

```
// salted hash for password storage

@PersistenceCapable
public class SaltedHash implements Serializable {

  private static final long serialVersionUID = 1L;

  private String salt;
  private String hash;

  @NotPersistent
  private final Base64Codec base64Codec;
  @NotPersistent
  private final Sha265Hash sha256Hash;
  @NotPersistent
  private final Random random;

  @Inject
  public SaltedHash(Base64Codec b64, Sha256Hash sha256, Random rnd) {
    base64Codec = b64;
    sha256Hash = sha256;
    random = rnd;
  }

  public void setSecret(String secret) {
    salt = base64Codec.encode(generateSalt());
    hash = base64Codec.encode(sha256Hash.hash(salt + secret));
  }

  public boolean matches(String secret) {
    String maybe = base64Codec.encode(sha256Hash.hash(salt + secret));
    return hash.equals(maybe);
  }

  private byte[] generateSalt() {
    // use random to generate a salt
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:55:51.073

持久实体的生命周期通常与托管 bean 的生命周期分离。这就是为什么不鼓励在 JPA 托管实体中使用 DI / CDI 的原因。

> 根据这个定义，JPA 实体是技术上管理的 bean。但是，实体有自己特殊的生命周期、状态和身份模型，通常由 JPA 或使用 new 实例化。因此我们不建议直接注入实体类。我们特别建议不要将 @Dependent 以外的范围分配给实体类，因为 JPA 无法持久化注入的 CDI 代理。

我认为情况类似于DataNucleus。尤其是这...

> 从数据存储中检索对象时，如何要求我的持久性框架重新注入依赖项？

... 可能非常棘手，因为依赖项在某些星座中代理（阅读：范围），但直接注入到其他星座中。

My guess is that it's *much easier* if you redesign your model in a way that entities do not rely on DI.

# windows - Win XP/Win 7/Win 8上IE的区别

> ID：11638312
> 
> 赞同：0
> 
> 时间：2012-07-24T19:52:13.873
> 
> 标签：windows, internet-explorer, internet-explorer-8, ie-developer-tools

我正在测试一个相当复杂的 web 应用程序，因为我在 VMware 中只有 Win 8，所以我使用 IE10 及其开发工具在兼容模式下运行它。但确切的行为（尤其是性能）与在 Win 7 和 Win XP 上运行的“相同浏览器”（IE8/vs IE10 兼容模式打开）不同。

有人对此有解决方案吗？我真的不想在我的驱动器上有大量的虚拟机。

是否在某处描述了这些差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:01:09.477

正如我在评论中所说：是的，IE的真实版本及其相关兼容模式之间存在一些显着差异。最好的解决方案是使用像 IETester 这样的工具，它允许您在同一台机器上安装多个“真实”版本的 IE。

IETester 是第三方程序；它不是 IE 工具的标准部分，也没有使用“兼容模式”；它为每个版本的 IE 使用真正的渲染引擎。

它基本上安装了真正的 IE6/7/8/9 渲染引擎的单独副本，并使用它们来显示站点。它并不完美——它很容易崩溃，而且它没有真正的 IE 副本所具有的开发工具，所以它对于一般调试没有多大好处，但对于检查网站的外观如何每个版本的 IE，没有比这更好的了（除了有一堆你已经排除的虚拟机）。

希望有帮助。

# sql-server - 索引经纬度 SQL Server 2008

> ID：11638314
> 
> 赞同：0
> 
> 时间：2012-07-24T19:52:20.300
> 
> 标签：sql-server, database, algorithm, google-maps, geolocation

嗨，我有数据库表结构，如下表 - ItemLocation

```
ItemId varchar(10)          ItemGeo (geography)
123n13                      POINT (-79.660470500000017 43.5482682)
n4f923                      POINT (-79.7511776 43.6575816) 
```

和更多的行............

我现在使用一个简单的插入来插入数据，但实际上我想按位置插入行，以便靠近的项目将留在数据库中，所以如果尝试插入一个新项目'q3eqwe2'，那就是更多接近 123n13 所以它会在 123n13 旁边并替换 n4f923 索引，所有底部行都将移动到索引 + 1。这可行吗？

```
ItemId varchar(10)          ItemGeo (geography)
    123n13                      POINT (-79.660470500000017 43.5482682)
    q3eqwe2                     POINT (-79.66039911221 43.5479121)
    n4f923                      POINT (-79.7511776 43.6575816) 
```

如果可行，我不想通过检查 ItemGeo 列的所有行来找到新行的完美索引，那么我可以添加新列，该列将根据项目位置进行索引，我可以轻松找到最近的位置匹配插入？希望它有意义:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:59:52.023

我不确定这是否有意义。有效地使用地理类型，您要求将二维索引映射到地球上。如果 A 靠近 B，B 靠近 C，那么 A 可能靠近 C，或者远离 C，那么我们就进入了旅行商问题。您的索引在哪里开始和结束？

您可以在地理类型上创建空间索引。我认为这是最好的选择。

问题的根源是为什么你认为你需要这样做？

# jquery - jQuery 插件或技术来部分模糊文本字段？

> ID：11638318
> 
> 赞同：0
> 
> 时间：2012-07-24T19:52:36.197
> 
> 标签：jquery, html, input

我想做的是尽可能不显眼地隐藏文本字段上的*部分*输入（就好像它是密码字段一样），但允许其余部分保持纯文本。

看起来现有的输入“屏蔽”插件除了确保与提供的数据结构一致之外没有任何作用。

是否有已经存在的插件或有据可查的技术来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:10:57.787

在更改时如何检查以查找字符的字符串定位，并将其替换为您的晦涩字符？然后将实际字符串写入隐藏字段。

或者只是将所有字符替换为一定长度，然后对所有以下字符串运行 substr ？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:37:04.313

我不知道你在追求什么，但也许是这样的：

```
$('#ElementID').on('keydown keyup', function() {
    var res = this.value,
        len = res.length,
        stars = len>0?len>1?len>2?'***':'**':'*':'',
        result = stars+res.substring(3);
    $("#ElementID2").val(result);
});​ 
```

[小提琴](http://jsfiddle.net/xNmCM/1/)

这只是一个快速破解，但应该给你一些想法吗？

# android - 如何从 JNI 写入 AudioTrack？

> ID：11638322
> 
> 赞同：0
> 
> 时间：2012-07-24T19:52:59.407
> 
> 标签：android

在我的本机代码中，我正在接收音频数据包。然后我将它们发送到 Java 以供使用`AudioTrack`。我虽然遇到音频口吃。`AudioTrack`我想知道是否有人可以向我解释一种比我目前更好的播放音频的方法。

所以，我这样做：

1）在Java中分配一个大`byte[]`数组并将其及其大小传递给JNI

2）当在本机代码中准备好音频数据包时，我`memcpy`将它放在该数组的开头

3）然后我通过从 JNI 调用 Java 回调传递音频大小来通知 java

4）然后我`AudioTrack.write`在Java中传递那个大字节数组和3的大小）

可以以某种方式更有效地完成吗？

# python - tweepy 旧推文

> ID：11638332
> 
> 赞同：2
> 
> 时间：2012-07-24T19:53:46.143
> 
> 标签：python, tweets, tweepy

Tweepy 流 api 为我提供了实时推文。那么有什么方法可以在脚本开始运行之前从推文库中获取推文。就像，最后 100 条推文。

我的要求是获得最后 100 条推文，其中包含世界上任何人使用 tweepy 发布的关键字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:16:45.283

如果您不希望获得大量以前的推文，您可以使用：

```
ret = api.user_timeline(screen_name = 'Bob', count = 100, include_rts = True) 
```

获取用户的最后 100 条推文`Bob`。Ret 将是一个`Status`对象列表。

# oop - MyObject.DoSomething() 与 MyService.DoSomething(MyObject)

> ID：11638335
> 
> 赞同：4
> 
> 时间：2012-07-24T19:53:53.390
> 
> 标签：oop, service, domain-driven-design, orchestration

这个比那个好吗？

这甚至是一个有效的问题吗？

最近有人告诉我，这已经`MyObject.DoSomething()`过时了，而且服务方式是首选。是对的吗？

例子：

```
public class Policy : ICancellable
{
    public void Cancel()
    {
        // Code to cancel working with 'this'.
    }
} 
```

对比

```
public class PolicyCancellationService
{
    public void Cancel(Policy policy)
    {
        // Code to cancel working with 'policy'.
    }
} 
```

如果使用服务方式 - 对象可以负责任何功能还是应该只是愚蠢的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T02:15:15.753

> 最近有人告诉我，这已经`MyObject.DoSomething()`过时了，而且服务方式是首选。是对的吗？

两种方式都有效；你应该选择导致*高内聚和低耦合的那个*。

根据经验，您应该首先尝试将其放入类本身，即`MyObject.DoSomething()`.

只有在以下情况下，您才应该使用单独的（服务）类：

*   的功能`DoSomething`与 的职责没有直接关系`MyObject`。如果你把一个不相关的方法放进去`MyObject`，它会导致*低内聚*。
*   `MyObject`没有执行所需的所有信息`DoSomething`。如果你给这个额外的信息`MyObject`，它会导致*高耦合*。

在您的示例中，如果取消是策略的一个重要功能，并且该策略具有执行此操作所需的所有信息，则应将其保留在`Policy`类中。

> 如果使用服务方式 - 对象可以负责任何功能还是应该只是愚蠢的？

恰恰相反：您应该在域对象本身中保留尽可能多的功能。服务应该仅限于协调多个领域对象之间的活动；它们最好不包含任何业务逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:05:00.757

我认为在我看来，您使用的第一种方法是围绕 OOP 的主要原则，如抽象、封装等。

然而，第二种方法侧重于设计变更原则，以便更轻松地重建/重新测试和重新部署应用程序，例如接口隔离、依赖倒置等。

在我看来，没有过时的方法是首选的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:49:26.827

也许调用它的最重要的论点`Service`是进程间通信往往很慢，这通常是使用服务的意思。如果管理不当，可能会导致`chatty interfaces`性能不佳。

因此，最好对这个边界进行明确建模，这将使人们意识到调用外部服务时可能出现的问题，从而更好地决定何时调用该服务。

现在，如果逻辑没有外部依赖项，我可能会将其留在对象中，而不是完全称其为“服务”。

# php - substr 不工作？php

> ID：11638337
> 
> 赞同：1
> 
> 时间：2012-07-24T19:54:00.900
> 
> 标签：php

不幸的是，我不能给你举一个活生生的例子。但是我有一个表单，可以将一堆数据提交到数据库。

我检索“日期”字段

```
genesis_custom_field('date') 
```

并且输出日期是“mm/dd/yyyy”，例如 02/19/2012

所以不应该

```
echo substr(genesis_custom_field('date'), 0, 2) . '<-M<br />' 
```

输出“02”

相反，它输出完整的日期格式“02/19/2012”。

**意图和目的**

出于意图和目的，这里是代码示例。

```
// The Query
$reviews_query = new WP_Query('showposts=1');

// The Loop
while ( $reviews_query->have_posts() ) : $reviews_query->the_post();

echo substr(genesis_custom_field('date'), 0, 2) . '<-M<br />';

endwhile;
// Reset Post Data
wp_reset_postdata(); 
```

与预期的输出

```
02<-M 
```

但我得到

```
02/19/2012<-M 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T20:02:27.020

该函数`genesis_custom_field`实际上是回显该值而不是返回它，这就是为什么`substr`不起作用。你基本上是`substr`在调用一个空值。

`genesis_get_custom_field`如果您希望返回值，请改为使用该函数，以便您可以修改它。

# c# - GetHtmlPage 的正确命名空间

> ID：11638338
> 
> 赞同：0
> 
> 时间：2012-07-24T19:54:05.210
> 
> 标签：c#, asp.net

谁能告诉我 GetHtmlPage 的命名空间？我有：

```
using System.Net;
using System.IO; 
```

根据此处的说明：http: [//www.mikesdotnetting.com/Article/49/How-to-read-a-remote-web-page-with-ASP.NET-2.0](http://www.mikesdotnetting.com/Article/49/How-to-read-a-remote-web-page-with-ASP.NET-2.0)

但是这行代码：

```
string locatorReport = GetHtmlPage(URL); 
```

抛出错误消息：

```
The name 'GetHtmlPage' does not exist in the current context 
```

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T19:56:21.280

代码`GetHtmlPage`在文章中。您需要将它放在项目中的某个位置，并从您的代码中调用它。（话虽如此，这并不是一个很好的代码开始......）

请注意，您需要将它放在一个类中。您可以使用您从中调用它的类，或者将其放在其他地方并使用

```
string locatorReport = Foo.GetHtmlPage(URL); 
```

您可以使用您为包含该方法的类使用的任何名称，而不是`Foo`. 当然，你也想让它成为一种内部方法。

或者，您可以使用[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)它的方法来代替[`DownloadString`](http://msdn.microsoft.com/en-us/library/fhd1f0sw.aspx)...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T19:56:07.733

`GetHtmlPage`是文章中提供的一种方法。它不是 .NET Framework 的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T19:56:25.570

`GetHtmlPage`不是任何 .NET 命名空间的一部分。这是那篇文章的作者写的一个函数。

# html - 主导航下拉菜单：无法正确对齐

> ID：11638339
> 
> 赞同：0
> 
> 时间：2012-07-24T19:54:13.980
> 
> 标签：html, css

[http://cypresshh.cakuun.com/](http://cypresshh.cakuun.com/)

我正在建立这个网站。对于我的生活，我无法弄清楚填充和边距之间如何让下拉导航的浅色背景框与标题的底部正确对齐。我尝试在 LI、LI 上的边距和 UL 本身上进行填充。我想我一直盯着同一个问题太久了，已经碰壁了。

非常感谢任何帮助。谢谢乙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:58:11.643

基于列表的菜单的关键：**永远不要**在列表项上使用填充或边距。在您的 A-tag 上使用`display:block`并将所有格式放在那里。

# facebook - Facebook 开放图分析

> ID：11638343
> 
> 赞同：1
> 
> 时间：2012-07-24T19:54:33.223
> 
> 标签：facebook, facebook-like, facebook-opengraph, analytics

我试图弄清楚有多少喜欢来自 facebook fangate 页面。例如， [http](http://example.com/) ://example.com/有 1000 个赞。

该示例的 fangate 页面有一个指向[http://example.com/的“Like”按钮](http://example.com/)

Facebook 的开放式图形分析是否有工具来显示这些链接来自何处的数据？

有没有办法提取数据来分析这个？说有没有办法让我有数据告诉我

200 个赞来自示例 fangate 页面 300 个赞来自其他网站等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:00:45.433

您有 Facebook 粉丝专页的分析。不适用于 URL。

如果您是页面的管理员。访问此链接[http://www.facebook.com/YOUR_PAGE_HERE/page_insights_likes](http://www.facebook.com/YOUR_PAGE_HERE/page_insights_likes)

你看不到点赞的来源，但可以看到点赞的类型。如果来自页面、点赞按钮、弹出窗口、时间线、手机...

# ruby-on-rails - Rails 无法写入数据库字段

> ID：11638344
> 
> 赞同：0
> 
> 时间：2012-07-24T19:54:36.490
> 
> 标签：ruby-on-rails, activerecord

我正在尝试对没有任何验证的字段进行非常简单的更新。但是，更新总是失败。代码如下所示：

```
# model
class Event < ActiveRecord::Base

  attr_accessible :start_time

  ..

end

# migration
class CreateEvents < ActiveRecord::Migration
  def change
    t.datetime :start_time
  end
end

# console
Event.first.update_attribute(:start_time, "02:00") 
```

在 Rails 日志中运行的查询甚至不包括 start_time 属性！

> (0.2ms) 开始
> 
> (4.5ms) 更新`events`集`updated_at`= '2012-07-24 19:51:33', `repeat_days`= '--- \n- wed\n- sat\n- sun\n', `event_date_list`= '--- []\n \n'在哪里`events`。`id`= 3763
> 
> (5.5ms) 提交

我无法理解这一点。谁能帮我理解这个问题的根本原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:00:49.320

您正在向它传递一个字符串，而不是日期、时间或日期时间对象。

看起来您只想存储时间，而不是附加的日期。但也许你也打算附上一个日期。如果您还想存储日期，请查找 Datetime 类。

如果您只想存储时间（小时、分钟和秒），那么我建议您将`start_time`字段更改为整数，并存储秒：`2.hours`或`2.hours + 4.minutes + 6.seconds`.

您可以再次轻松地将其转换为时间。

# css-float - CSS3 的 box-shadow 问题

> ID：11638345
> 
> 赞同：4
> 
> 时间：2012-07-24T19:54:44.347
> 
> 标签：css-float, css

在开发网页时，我发现使用 box-shadow 功能存在问题。

我想在我的网页的整个包装器中添加一个框阴影，其中包含页眉、导航、内容和页脚。

导航和内容是并排的元素。

问题是，当我将 box-shadow 添加到#wrapper 时，它只出现在标题上，正如我[在这里复制的那样](http://jsfiddle.net/Z6sq5/)

我能够通过将并排元素与显示一起使用来修复它：table-cell propety，但它破坏了页面的其余部分，所以我问我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T19:58:29.777

添加到您的包装器，如此[处](http://jsfiddle.net/Z6sq5/2/)`overflow:hidden`所示。它将强制您的容器包装浮动元素。

[编辑] 无需添加额外的标记...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T19:58:27.717

使用 CSS `clear:both;`，因为您将元素浮动到左侧，请查看：[我的小提琴](http://jsfiddle.net/Z6sq5/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:01:04.440

您可以简单地制作另一个具有相同大小和位置的单独包装，而不是包装器，并给它一个盒子阴影。将高度更改为您想要的任何内容，只需弄清楚您想要被遮蔽的内容的高度即可。

```
<style>
div.shadow {
width: 400px;
height: 100%;   
position:absolute;
z-index:-99;
box-shadow: 3px 3px 20px #999;
-moz-box-shadow: 3px 3px 20px #999;
-webkit-box-shadow: 3px 3px 20px #999; 
}
</style>
<body>
<div class="shadow></div>

<!-- everything else here--> 
```

# c++ - C ++如何将变量char数组从一个函数传递到另一个函数

> ID：11638347
> 
> 赞同：0
> 
> 时间：2012-07-24T19:54:57.503
> 
> 标签：c++, variables, arrays

我有一个关于将一个字符数组的变量从一个函数传递到下一个函数的问题。

以下是涉及的代码示例：

```
int main( int argc, char** argv )
{

int value = 0;

int nCounter = 0;
FILE* fIn = NULL;
char * sLine = new char[MAX_FILENAME_SIZE];
char * sFileName = new char [MAX_FILENAME_SIZE];
char * s = new char [MAX_FILENAME_SIZE];

if ((fIn = fopen(ImgListFileName,"rt"))==NULL)

{
    printf("Failed to open file: %s\n",ImgListFileName);
    return nCounter;
}

while(!feof(fIn)){

//set the variables to 0
memset(sLine,0,MAX_FILENAME_SIZE*sizeof(char));
memset(sFileName,0,MAX_FILENAME_SIZE*sizeof(char));
memset(s,0,MAX_FILENAME_SIZE*sizeof(char));
//read one line (one image filename)
//sLine will contain one line from the text file
fgets(sLine,MAX_FILENAME_SIZE,fIn);
//copy the filename into variable s
strncpy(s, sLine, strlen(sLine)-1);
//put a \0 character at the end of the filename
strcat(sLine,"\0");
//create the filename
strcat(sFileName,s);

nCounter++;

fclose(fIn);
delete sLine;
delete sFileName;
delete s;
    const int size = 60;
    char path[size] = "path";
    strcat(path,sFileName);

    printf (path);
IplImage *img = cvLoadImage(path);
detect_and_draw(img);
cvWaitKey();
cvReleaseImage(&img);
cvDestroyWindow("result");

void detect_and_draw( IplImage* img )
{

More code that isn't involved....

cvSaveImage(sFileName, img); 
```

现在，我尝试了以下方法：

```
void getFilename(char * sFileName)
{
    printf("The filename is %s\n", sFileName);
    return;
} 
```

然后打电话给

```
char * S ="string"
getFilename(S);
cvSaveImage(S,img); 
```

但是“字符串”被放入“文件名是：字符串”。

我该怎么做才能在 cvSaveImage(sFileName, img) 中使用 sFileName、char 数组？

在此先感谢您，如果您需要任何进一步的说明，请询问！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:30:56.333

忽略未定义的行为、不必要的动态分配等，您似乎试图完成的事情归结为以下一般顺序：

```
std::string path;

while (std::getline(fIn, path)) {
    std::cout << "path: " << path;

    IplImage *img = cvLoadImage(path.c_str());

    detect_and_draw(img, path);
    cvWaitKey();
    cvReleaseImage(&img);

    cvDestroyWindow("result");    
}

void detect_and_draw(IpImage *img, std::string const &path) { 
// ...
    cvSaveImage(path.c_str(), img);
} 
```

不过，我想我会做一些不同的事情——可能从一`Image`门课开始，比如：

```
class Image { 
    IpImage *img;
    std::string path;

public:
    Image(std::string const &name) : 
        img(cvLoadImage(name.c_str()), path(name) 
    { }

    ~Image() { cvReleaseImage(&img); }

    void detect_and_draw() { 
         // ...
         cvSaveImage(path);
    }
}; 
```

使用它，您的代码看起来更像这样：

```
while (std::getline(fIn, path)) {
    Image img(path);
    img.detect_and_draw();
    cvWaitKey();
    cvDestroyWindow("result");
} 
```

这并不完全清楚，但`cvDestroyWindow`听起来很像真正属于析构函数的东西，但我不确定这些部分如何组合在一起以确定什么析构函数 - 也许`Image`是，更可能是别的东西。

我注意到这`detect_and_draw`实际上是在尖叫“这段代码忽略了单一责任原则”。它在名称中列出了两个职责，并且似乎至少还有第三个职责（保存文件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:21:33.457

如果我理解正确，那么您所拥有的是范围界定问题。你基本上有：

```
int main(/* */)
{ char sFileName[MAX_FILENAME_SIZE];

  /* code to initialize sFileName to contain a value */

  detect_and_draw(img);
}

void detect_and_draw(IplImage *img)
{ cvSaveImage(sFileName, img);
} 
```

问题是它`sFileName`是本地的`main()`，无法在`detect_and_draw()`. 您可以修改`detect_and_draw()`以采用第二个参数：

```
int main()
{ /* stuff */
  detect_and_draw(img, sFileName);
}
void detect_and_draw(IplImage *img, const char* fn)
{ cvSaveImage(fn, img);
} 
```

或者使 sFileName 成为在范围之外声明/定义的全局变量`main()`- 尽管这通常被认为是一个劣质的解决方案。

# python - 在 Python 中使用多个线程

> ID：11638349
> 
> 赞同：3
> 
> 时间：2012-07-24T19:55:02.043
> 
> 标签：python, multithreading

我正在尝试解决一个问题，我有很多（大约一万个）URL，并且需要从所有这些 URL 中下载内容。到目前为止，我一直在“链接中的链接：”循环中执行此操作，但是现在花费的时间太长了。我认为是时候实现多线程或多处理方法了。我的问题是，最好的方法是什么？

我知道全局解释器锁，但由于我的问题是网络绑定的，而不是 CPU 绑定的，我认为这不会是一个问题。我需要将数据从每个线程/进程传回主线程/进程。我不需要帮助来实现任何方法（[当任何线程完成任务时终止多个线程](https://stackoverflow.com/questions/6286235/multiple-threads-in-python)），我需要关于采用哪种方法的建议。我目前的做法：

```
data_list = get_data(...)
output = []
for datum in data:
    output.append(get_URL_data(datum))
return output 
```

没有其他共享状态。

我认为最好的方法是创建一个包含所有数据的队列，并从输入队列中弹出几个工作线程，获取 URL 数据，然后推送到输出队列。

我对吗？有什么我想念的吗？这是我第一次用任何语言实现多线程代码，我知道这通常是一个难题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T20:03:54.457

对于您的特定任务，我会推荐一个[multiprocessing worker pool](http://docs.python.org/library/multiprocessing.html#module-multiprocessing.pool)。您只需定义一个池并告诉它您想要使用多少个进程（默认情况下每个处理器核心一个）以及您想要在每个工作单元上运行的功能。然后，您准备好列表中的每个*工作单元*（在您的情况下，这将是一个 URL 列表）并将其提供给工作池。

您的输出将是原始数组中每个工作项的工作函数的返回值列表。所有很酷的多处理优点都将在后台发生。当然还有其他使用工作池的方法，但这是我最喜欢的一种。

快乐的多处理！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T20:12:48.607

像这样执行 IO 绑定任务的最快和最有效的方法是异步事件循环。libcurl 可以做到这一点，并且有一个名为 pycurl 的 Python 包装器。使用它的“多”接口，您可以进行高性能的客户端活动。我已经完成了超过 1000 次的同时获取，其速度与一次一样快。

但是，API 非常低级且难以使用。[这里](http://code.google.com/p/pycopia/source/browse/trunk/WWW/pycopia/WWW/client.py)有一个简化的包装器，您可以将其用作示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T20:09:14.610

在您的用例中，我能想到的最佳方法是使用线程池并维护工作队列。线程池中的线程从工作队列中获取工作，完成工作，然后去获得更多的工作。通过这种方式，您可以精细控制处理 URL 的线程数。

因此，创建一个 WorkQueue，在您的情况下，它基本上是一个包含需要下载的 URL 的列表。

创建一个线程池，它创建您指定的线程数，从 WorkQueue 获取工作并将其分配给一个线程。每次线程完成并返回时，您都会检查工作队列是否有更多工作，并相应地再次将工作分配给该线程。您可能还想放置一个钩子，以便每次将工作添加到工作队列时，如果可用，您的线程会将其分配给空闲线程。

# php - PHP FTP fwrite() 到 Windows 服务器不起作用？

> ID：11638351
> 
> 赞同：0
> 
> 时间：2012-07-24T19:55:16.750
> 
> 标签：php, windows, unix, ftp

我试图`fwrite()`通过 FTP 包装器从基于 UNIX 的服务器到使用 PHP 的基于 Windows 的服务器。我连接成功，并且能够（例如）创建目录。但是，我似乎无法将文件写入文件夹！当我使用 FTP 客户端查看目录权限时，我注意到它们都是 0000，并且无法更改。显然，基于 Windows 的服务器不使用相同的 FTP 权限系统。

那么这是什么一回事？你有什么建议吗？我可以使用 FTP 客户端将文件上传到目录，但是当我尝试使用 PHP 写入文件时，什么也没有发生。

我完全不知道为什么会发生这种情况。我已经通过写入基于 UNIX 的服务器确认我的脚本可以正常工作，所以这不是问题。目标服务器没有安装 PHP 的事实有可能吗？我不这么认为，但我现在对任何想法持开放态度！

谢谢！

* * *

**编辑**- 真正让我感动的是我能够创建目录，所以写作不应该工作没有任何意义。在 Windows 服务器上，是否有一些设置会阻止只写入文件，而不是文件夹？

**编辑 2** - 更多研究告诉我，虽然你不能在 Windows 服务器上进行 CHMOD，但 PHP 的 CHMOD 仍然以某种方式对权限进行了处理。但是，这似乎对我不起作用。有没有办法直接使用 PHP 代码更改权限，或者这是否必须直接在服务器上完成，超出我的范围？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:07:52.973

我推荐[file_put_contents](http://www.php.net/manual/en/function.file-put-contents.php)，并确保允许 PHP 在该目录中写入。

# mysql - MySQL 查询不更新数据库

> ID：11638353
> 
> 赞同：1
> 
> 时间：2012-07-24T19:55:23.823
> 
> 标签：mysql

也许我只是一个彻头彻尾的白痴，但我试图将一条记录插入到 MySQL 表中，但它似乎不起作用。当我测试它时（即让脚本回显这些值，以便我可以检查它们是否由表单发布），它们正在发送但查询没有发布到数据库。就像我说的那样，也许我是一个彻头彻尾的白痴，但我觉得也许一双新的眼睛可能会加快我的故障排除速度，因为过去 2 小时我一直在与这个问题作斗争！

这是代码：

```
// Connects to your Database
  mysql_connect("localhost", "dbuser", "dbpword") or die(mysql_error()); 
  mysql_select_db("dbname") or die(mysql_error()); 

// Get Variables
  $sectorid = $_POST['sectorid'];
  $parentid = $_POST['parentid'];
  $sectorname = $_POST['sectorname'];
  $status = $_POST['status'];
  $creon = $_POST['creon'];
  $creby = $_POST['creby'];
  $modon = $_POST['modon'];
  $modby = $_POST['modby'];

//Insert Record
  mysql_query("INSERT INTO cand_emp_sector (sectorid, parentid, sectorname, status, creon, creby, modon, modby)
  VALUES ('$sectorid', '$parentid', '$sectorname', '$status', '$creon', '$creby', '$modon', '$modby)"); 

//On completion, redirect to next page
  header("Location: canddb.new.7i.php"); 
```

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:57:48.393

你最后错过了一个报价

```
, '$modby')");
         ^---------here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:58:24.653

检查结果是否有错误：

```
$result = mysql_query("INSERT INTO cand_emp_sector (sectorid, parentid, sectorname, status, creon, creby, modon, modby)
  VALUES ('$sectorid', '$parentid', '$sectorname', '$status', '$creon', '$creby', '$modon', '$modby)"); 

if($result === false) die('query failed..'); 
```

# javascript - 等待脚本对象加载

> ID：11638354
> 
> 赞同：1
> 
> 时间：2012-07-24T19:55:29.583
> 
> 标签：javascript, jquery

我正在尝试创建一个 jquery 脚本，该脚本将从谷歌浏览器的控制台运行并分析页面。我的问题是当我运行以下代码时：

```
var jq = document.createElement('script');
jq.src = "http://code.jquery.com/jquery-latest.min.js";
document.getElementsByTagName('head')[0].appendChild(jq);
alert($('a')); 
```

我收到一个带有 null 的消息框（错误结果）但是如果我将它分成这样的执行：

步骤1：

```
var jq = document.createElement('script');
jq.src = "http://code.jquery.com/jquery-latest.min.js";
document.getElementsByTagName('head')[0].appendChild(jq); 
```

第2步：

```
alert($('a')); 
```

它效果很好，我得到了 [object] 这是我想要的结果。

问题是我该怎么做才能在一个批次中运行它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:00:12.813

通常，您需要在`script nodes` *onload*事件上附加一个侦听器。jQuery 在完全传输和执行之前将不可用。喜欢

```
var jq   = document.createElement('script'),
    head = document.head || document.getElementsByTagName('head')[0] || document.documentElement;

    jq.src = "http://code.jquery.com/jquery-latest.min.js";
    jq.onload = jq.onreadystatechange = function() {
    if(!jq.readyState || /loaded|complete/.test( jq.readyState ) ) {
        jq.onload = jq.onreadystatechange = null;
        jq = undefined;
    }
}

head.insertBefore(jq, head.firstChild); 
```

上面的代码非常坚如磐石，也可以在 IE6+ 中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:00:55.747

您可以尝试这样的[事情](http://www.ejeliot.com/blog/109)并检查脚本的就绪状态：

```
jq.onreadystatechange = function() {
  if (this.readyState == 'complete') {
     alert($('a'));
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:03:46.597

如果您想要一个可靠的方法并测试完整的脚本负载的侦听器，请尝试第三方库，例如：http: [//yepnopejs.com/](http://yepnopejs.com/)

不推荐从头开始一个脚本加载器，今天也不推荐。

# selenium - 在 Selenium Webdriver 中显式触发页面加载阻塞

> ID：11638361
> 
> 赞同：2
> 
> 时间：2012-07-24T19:55:58.443
> 
> 标签：selenium, webdriver, selenium-webdriver

我了解顶级 webdriver API 不提供对页面加载事件处理程序的访问，但有什么方法（包括通过 REST 接口直接向服务器发送命令）直接调用 selenium 服务器强制页面加载块行为？我知道等待元素黑客，但如果可能的话，我宁愿直接去源头。我遇到的具体问题是一个页面，当单击一个按钮时会在页面上显示一个模式对话框，同时发生一些后端进程，然后在后端工作完成后将浏览器转发到新页面。由于单击操作不会直接触发新页面，因此 selenium 不会阻止事件（无论如何我都不希望它在所有情况下都阻止）。

我已经通过 Command 类查看了任何有希望的命令，但没有看到任何东西。我找到了[http://code.google.com/p/selenium/wiki/JsonWireProtocol](http://code.google.com/p/selenium/wiki/JsonWireProtocol)但它也没有帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:13:24.303

这是一个棘手的问题。

在 selenium/webdriver 中访问 http 状态不是很方便。我会推荐一种务实的方式。IMO 等待元素的方法不是 hack，它是正确的方法。在您的情况下，我会等待 selenium.getLocation() 或 webdriver.getCurrentUrl() 包含预期值。

像这样的东西：

```
webDriverWait.until(new Function<WebDriver, WebElement>() {
    @Override
    public WebElement apply(WebDriver driver) {
        //TODO: pass expected url as parameter
        boolean expectedUrl = driver.getCurrentUrl().contains("your redirect url");
        if (expectedUrl) {
            //If not null is returned, we have found something and waitUntil stops
            return new RemoteWebElement();
        }
        //try again
        return null;
    }
}); 
```

# database - 数据库设计~不知道从哪里开始

> ID：11638375
> 
> 赞同：0
> 
> 时间：2012-07-24T19:56:44.113
> 
> 标签：database, database-design

我有一些完全让我感到困惑的事情，我不知道如何将这么多数据存储在数据库中。下面我将准确解释我认为我需要在数据库中存储什么以及我打算如何使用这些数据（以有效地存储它）。

可以，然后呢。我在一个网格上有大约 40 个点。我称它们为“对象”。它们具有与它们相关的信息，例如坐标 (x,y)、ID、编号、资源，然后是许多其他对象以及在网格上“保护”该点的数量。有超过 100 种不同类型的单位可以防守这一点。这些单位可以由任意数量的玩家拥有。ID 和号码可以很容易地相互导出（因此可能不需要存储两者）。

我需要做的是，在每次扫描这些点时存储所有这些信息。然后，我需要将这些信息从数据库中取出，以创建玩家单位随时间变化的图表，以查看它是增加还是减少。我还想随着时间的推移绘制对象的总防御，以跟踪整体的变化情况。

我扫描这些物体的频率可能会有所不同，甚至最多每分钟一次。我什至无法想象如何将所有这些信息存储在数据库中。

任何帮助表示赞赏！问你需要的任何和所有问题。我知道这是一堵文字墙，但请阅读它！

**编辑：**网格上的对象数量可以随时更改。我们可以得到一个，也可以失去一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:00:16.223

真正的出发点是了解实体关系建模。尽管您的要求对您来说看起来非常独特，但就实体关系模型而言，它们已经过时了。基本上都是关于重要对象之间关系的类型。了解一对一、一对多和多对多关系。实体模型是开始的地方，一些工具甚至可以让你生成表格。一旦您了解给定关系如何转换为关系数据库模型，您就可以开始了。例如，一支球队有许多棒球运动员。所以这是一对多的关系。一旦你明白了这一点，就会更容易理解为什么你需要在表中使用外键，以及每行唯一的 id 等。在构建表时，请记住先对关系建模，然后再对所有属性建模。

另一种方法是首先设计您的对象模型，例如使用 UML。仍然是关于关系、继承、组合等的，这些也将转化为数据库设计。但是如果你想设计关闭数据库，那么实体关系建模是要走的路。

# windows - 插入USB时如何禁用任务栏的出现？

> ID：11638378
> 
> 赞同：2
> 
> 时间：2012-07-24T19:57:21.353
> 
> 标签：windows, usb, taskbar

我正在开发一个应该能够将计算机“锁定”在其中的软件，因此任何用户都没有机会返回 Windows 并使用其他软件，除非他使用密钥关闭软件（我想这是人们要求以信息亭模式操作的内容）。

经过大量研究，我设法使用挂钩和注册表文件禁用了 Ctrl、Windows 键和 Alt，因此我可以消除（我认为）用户从键盘上摆脱软件的所有方式。

但现在我发现，如果有人插入 USB 设备（例如随身碟/数据旅行者），考虑到 W7，任务栏会立即出现在传统对话框旁边，您可以在其中选择要对插入的 USB 设备执行的操作（打开它的内容与资源管理器等），所以有人可以离开键盘以外的软件。

我想知道如何通过代码或注册表来阻止它（代码会更好！），所以如果有人插入笔式驱动器，任务栏不会出现，对话框也不会出现。如果我可以阻止那些已经使用的 USB 输入（通过鼠标和键盘），那也可能会有所帮助。

顺便说一句，如果有人知道摆脱信息亭模式应用程序的任何其他棘手方法，请告诉我！

谢谢，

莫默吉尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:18:44.193

如果您在注册表项的值中替换`explorer.exe`为您自己的应用程序，您的应用程序将被启动*而不是*资源管理器。然后您需要做的就是禁用任务管理器，这可以通过组策略设置来完成。`Shell``Winlogon`

 *`Winlogon`密钥的完整路径是

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:02:26.523

为什么不直接停止**explorer.exe**，禁用**Ctrl+Alt+Delete**和**Ctrl+Shift+Esc**以进入 kiosk 模式？*

# svn - svn 非 LF 行结束问题 svn:ignore on dump load

> ID：11638380
> 
> 赞同：3
> 
> 时间：2012-07-24T19:57:31.153
> 
> 标签：svn, line-endings, svnadmin

我正在尝试使用转储文件将运行 svn 版本 1.2.3 的系统上的存储库（具有完整的历史记录）迁移到运行 1.7.1 的系统上。由于原始存储库是一个早期版本，因此`svnrdump`直接使用不是一种选择。我使用`svnadmin dump`然后将 (8 GB) 转储文件移动到 1.7.1 系统。但是，当我`svnrdump load`从那里使用命令时，经过 231 次修订，我收到以下错误

```
svnrdump: E125005: Cannot accept non-LF line endings in 'svn:ignore' property 
```

我尝试`svn:ignore`从修订版 231 中删除该属性，但无济于事，以及多个第三方应用程序，如 svn2svn（我们使用身份验证，所以没有骰子）。和`svndumptool eolfix`/ `svndumptool copy`（显然仅适用于 .txt 文件）。

最初，我在 'svn:log' revprop 上进行了 11 次修订后遇到了类似的错误，我通过运行`dos2unix`（进一步破坏它）然后使用脚本/手动修复每个`svnadmin dump`失败的文件来修复它。

我对这两个系统（unix，不确定是什么发行版）都拥有 repos/root 访问权限。这是一个旧的，目前被认为是未使用的存储库，我们希望保存它以防万一某些项目再次需要。此外，新存储库的布局`svnadmin load`方式非常复杂。svn:ignore 错误有简单的修复方法吗？或者更简单的方法来移动整个东西？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-15T13:47:42.263

你应该使用： `svndumptool eolfix-prop svn:ignore`

代替： `svndumptool eolfix`

# php - 当威尔逊分数间隔相等时，MYSQL 使用 UploadDate 对下一行进行排序

> ID：11638382
> 
> 赞同：1
> 
> 时间：2012-07-24T19:57:33.433
> 
> 标签：php, mysql, rating, rating-system

我正在处理我的照片库，并且我有一个过滤器可以用威尔逊分数间隔对我的媒体进行排序。这个分数保存在我的表的一个字段中，称为`score`

对于此查询，我使用以下字段：`id`、、`UploadTime``score`

我遇到的问题是，如果多张图片只有一个竖起大拇指，某些分数将完全相同。在这种情况下，我想按 UploadDate 字段对媒体进行排序，使旧图片的相关性降低。

这是我整理我所有照片的脚本（请记住，分数必须高于 0 才能进入列表）

```
SELECT *
FROM photos
WHERE   status = 0 
    AND score > 0 
ORDER BY score DESC, id DESC 
```

然后获取下一张图片（下一张图片是分数较低的图片，或者如果分数相等，则输出最新上传的图片）。而$id是当前图片的唯一id

```
SELECT   *
FROM     photos p
INNER JOIN
    (
    SELECT score, id
    FROM photos
    WHERE id = ".$id."
    ) p2 ON p.score < p2.score

WHERE p.status = 0 AND p.net_votes > 0
ORDER BY p.score DESC, p.UploadTime DESC
LIMIT    1 
```

我已经用尽了所有关于如何做到这一点的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:25:09.753

我不确定（我可能得到了 a`>`而不是`<`某个地方）。希望这会奏效

```
SELECT *
FROM   photos
WHERE  status = 0
       AND net_votes > 0
       AND ( score < (SELECT p1.score
                      FROM   photos p1
                      WHERE  p1.id = :id)
              OR uploadtime < (SELECT p2.uploadtime
                                  FROM   photos p2
                                  WHERE  p2.id = :id) )
ORDER  BY score DESC,
          uploadtime DESC
LIMIT  1 
```

# python - Seting parameter in other thread

> ID：11638387
> 
> 赞同：0
> 
> 时间：2012-07-24T19:57:47.987
> 
> 标签：python, multithreading

So i have a thread:

```
import threading, time, serial, logging

class SerialThread(threading.Thread):

    # SerialThread class construcor
    def __init__(self, sleep):
        self.sleep = sleep
        threading.Thread.__init__(self,name = "SerialThread")
        self.setDaemon(1)

    # SerialThread method
    def run(self):

        # Do forever
        while 1:   

            # Sleep afther every loop
            time.sleep(self.sleep)
            print 'Doing some work!'

    def setSleep(self, sleep):
         self.sleep = sleep 
```

And then in my main thread i do:

```
serialThread = SerialThread(60)
serialThread.start()

def changeSleep():
    serialThread.setSleep(80) 
```

Im am starting this thread from my main code. But now when i want to change the `self.sleep` number what should i do? I have tried this simple and naive solution to just create a method in the thread class, and when its called it sets the sleep time. Apparently this didnt work as i expected. A good example would be welcome.

EDIT: added the code i tried before

EDIT: So it wont work as the `self.sleep` is always 60 as i set it in the beginning, even afther i call the `serialThread.setSleep(80)`

EDIT: Didnt think this is relevant but im creating web service with flask and `serialThread.setSleep(80)` is called by accessing the flask route. So i guess flask runs also on separate thread and because of that `serialThread.setSleep(80)` is not actually called from the main thread...

Code:

```
@app.route('/api/setConf', methods=['POST'])
def setConf():

    serialThread.setSleep(config.interval)

    return 'ok' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:30:07.153

Works for me with the following main body code (and a helpful print in the thread code):

```
serialThread = SerialThread(3)
serialThread.start()

def changeSleep():
    serialThread.setSleep(6)

time.sleep(15)
changeSleep()
time.sleep(15) 
```

Output:

```
sleeping for 3
Doing some work!
sleeping for 3
Doing some work!
sleeping for 3
Doing some work!
sleeping for 3
Doing some work!
sleeping for 3
Doing some work!
sleeping for 6
Doing some work!
sleeping for 6
Doing some work!
sleeping for 6 
```

# javascript - 从 jQuery 数组或元素的对象列表中选择第 N 个项目

> ID：11638392
> 
> 赞同：0
> 
> 时间：2012-07-24T19:57:57.080
> 
> 标签：javascript, jquery, arrays

> **可能重复：**
> [如何获取第 n 个 jQuery 元素](https://stackoverflow.com/questions/1442925/how-to-get-nth-jquery-element)
> [通过 jquery 中的索引获取元素](https://stackoverflow.com/questions/9887534/get-an-element-by-index-in-jquery)

用于从数组中选择第***N 个***项目的方括号**[]索引符号的 jQuery 等效项是什么？**

 *假设您有 10 个段落，并且想要获取第 7 个段落的内容。使用方括号表示法有效，但如果您想继续使用 jQuery，则不行：

```
$("p")[6];        //returns DOM object: [object HTMLParagraphElement]
$("p")[6].html(); //returns error: (Chrome:) Uncaught TypeError: Object #<HTMLParagraphElement> has no method 'html' (Firefox:) TypeError: $("p")[6].html is not a function (IE8+:) TypeError: Object doesn't support this property or method (IE7:) [object Error] 
```

（[jsfiddle示例](http://jsfiddle.net/Xmdgx/)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:57:57.080

方括号 [n] 索引表示法有效，但您获得的是原生 Javascript DOM 对象，而不是 jQuery 可以使用的东西。使用 jQuery 的[`.eq()`方法](http://api.jquery.com/eq/) 或[`:eq()`选择器](http://api.jquery.com/eq-selector/)来获取一个 jQuery 对象。

```
$("p").eq(6).html();
$("p:eq(6)").html(); 
```

（[jsfiddle示例](http://jsfiddle.net/Xmdgx/1/)）*

# eclipse - git使用同一个eclipse工作区修改多个分支上的代码

> ID：11638396
> 
> 赞同：1
> 
> 时间：2012-07-24T19:58:08.497
> 
> 标签：eclipse, git, branch

我觉得我在这里遗漏了一些东西，但这是问题所在。我有一个分支 A。这个分支的工作正在进行中。创建标记 T 标记生产发布版本。现在，必须在此标记中的代码之上进行修复。所以我从标签中创建了一个分支 B。该分支将包含稳定的生产代码。我的 Eclipse 指向分支 A 中的签出代码。

现在，我想更改分支 B 中的代码。如何让我的 Eclipse 意识到有 2 个不同的分支并且代码不同？我是否必须克隆分支 B 并将新的 eclipse 工作区指向它？我不能使用同一个工作区并拥有同一个文件的 2 个不同版本——一个来自分支 A，另一个来自分支 B？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:39:31.240

只需在您的工作区中签出分支 B，进行更改，提交，然后您可以再次签出分支 A 并继续在分支 A 上工作。Eclipse 将自动识别另一个分支的内容
但是，您应该知道，您应该当您签出另一个分支时，您的工作区中没有未提交的更改。在结帐之前提交您的更改或存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:06:37.040

假设您已将 eclipse 与您的 git 系统集成，您可以使用选择您正在处理的项目，然后在上下文菜单中，使用“团队->切换到->新分支...”，然后选择分支 B。

![在此处输入图像描述](../Images/05359dd4b2a479aec50b55a198dea4ec.png)

如果您没有集成它，您可以通过以下 2 个步骤来实现。

使用*git 透视图*，在**Git Repositories**视图中，找到带有 + 的图标以执行*Add an existing local Git Repository to this view*。

![在此处输入图像描述](../Images/b8deee7523fb8047a73a969ce9747f4f.png) 在随后的对话框中，选择存储库的位置。

添加后，返回您的*java 透视图*，然后从那里选择 git 中的项目（您当前在分支 A 中），然后从上下文菜单中选择**Team->Share Project**

![在此处输入图像描述](../Images/d116cc00d7dd9d3689966a0b7696a1c8.png)

# c# - 如何序列化派生数据集的集合

> ID：11638399
> 
> 赞同：0
> 
> 时间：2012-07-24T19:58:18.777
> 
> 标签：c#, serialization, collections, dataset

我是序列化的新手，所以很可能我遗漏了一些明显的东西！

我有一个名为 ResultsCollection 的类，它是一个四维数据结构——从 DataSet 类派生的对象的集合。每个修改后的 DataSet 都包含一个从 DataTable 派生的对象的集合。相关的代码位是：

```
[Serializable]
public class ResultsCollection : CollectionBase, ISerializable
{
  // indexer
  public MyDataSet this[int index] { get { return (MyDataSet)List[index]; } }
}
[Serializable]
public class MyDataSet : DataSet, ISerializable
{
  // member variable that *overrides* the Tables property of the standard DataSet class
  public new TablesCollection Tables;
}
[Serializable]
public class TablesCollection : CollectionBase, ISerializable
{
  // indexer
  public MyDataTable this[int index] { get { return (MyDataTable)List[index]; } }
}
[Serializable]
public class MyDataTable : DataTable, ISerializable
{
  ...
} 
```

我已经通过包含一个公共序列化构造函数和一个公共 GetObjectData 函数来实现 ISerializable 接口，如下所示：

```
// ResultsCollection -- serialize all variables and also the inner list itself
public ResultsCollection(SerializationInfo info, StreamingContext ctxt) : base()
{
  _memberVariable = (bool)info.GetValue("_memberVariable", typeof(bool));
  ArrayList innerList = (ArrayList)info.GetValue("List", typeof(ArrayList));
  InnerList.AddRange(innerList);
}
public void GetObjectData(SerializationInfo info, StreamingContext ctxt)
{
  info.AddValue("_memberVariable", _memberVariable);
  info.AddValue("List", InnerList);
}

// MyDataSet -- call standard base-class (DataSet) serialization functions in addition to serializing members
public MyDataSet(SerializationInfo info, StreamingContext ctxt) : base(info, ctxt)
{
  _memberVariable = (bool)info.GetValue("_memberVariable", typeof(bool));
  Tables = (TablesCollection)info.GetValue("Tables", typeof(TablesCollection));
}
public void GetObjectData(SerializationInfo info, StreamingContext ctxt)
{
  base.GetObjectData(info, ctxt);
  info.AddValue("_memberVariable", _memberVariable);
  info.AddValue("Tables", Tables);
}

// TablesCollection -- serialize all variables and also the inner list itself
public TablesCollection(SerializationInfo info, StreamingContext ctxt) : base()
{
  _memberVariable = (bool)info.GetValue("_memberVariable", typeof(bool));
  ArrayList innerList = (ArrayList)info.GetValue("List", typeof(ArrayList));
  InnerList.AddRange(innerList);
}
public void GetObjectData(SerializationInfo info, StreamingContext ctxt)
{
  info.AddValue("_memberVariable", _memberVariable);
  info.AddValue("List", InnerList);
}

// MyDataTable -- call standard base-class (DataTable) serialization functions in addition to serializing members
public MyDataSet(SerializationInfo info, StreamingContext ctxt) : base(info, ctxt)
{
  _memberVariable = (bool)info.GetValue("_memberVariable", typeof(bool));
}
public void GetObjectData(SerializationInfo info, StreamingContext ctxt)
{
  base.GetObjectData(info, ctxt);
  info.AddValue("_memberVariable", _memberVariable);
} 
```

我有一个 ResultsCollection 对象，我想将它存储在 ViewState 中，以便在下一次回发时检索它（因此所有这些麻烦）。对于最初的请求，事情似乎正在发挥作用：我在序列化函数中设置了断点，并且数据成员确实正在被序列化。但是，在反序列化时，成员变量被正确加载，但 List 对象充满了空成员。当我尝试从 ResultsCollection 中的第一个 MyDataSet 对象检索 DataSetName 属性时，我的代码崩溃了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:37:03.747

事实证明**CollectionBase 和 ISerializable 是不兼容**的，可能是因为 CollectionBase 的 InnerList 属性是只读的。因此，我需要做的是从两个 CollectionBase 派生类中*删除*ISerializable 定义，即：

```
[Serializable]
public class ResultsCollection : CollectionBase
{
  // indexer
  public MyDataSet this[int index] { get { return (MyDataSet)List[index]; } }
}
[Serializable]
public class MyDataSet : DataSet, ISerializable
{
  // member variable that *overrides* the Tables property of the standard DataSet class
  public new TablesCollection Tables;
}
[Serializable]
public class TablesCollection : CollectionBase
{
  // indexer
  public MyDataTable this[int index] { get { return (MyDataTable)List[index]; } }
}
[Serializable]
public class MyDataTable : DataTable, ISerializable
{
  ...
} 
```

# objective-c - 如何保存对象，但不能在 Objective C 中覆盖？

> ID：11638402
> 
> 赞同：1
> 
> 时间：2012-07-24T19:58:24.680
> 
> 标签：objective-c, object, bookmarks, favorite

**你好 ：）**

我如何保存对象，但不能在 Objective C 中覆盖，

我试过 NSUserDefaults 但是当我添加对象时，它会覆盖！

我该如何防止这种情况发生，因为我正在尝试在我的应用程序或书签中创建收藏夹，

但我不知道如何保存我要保存的那些对象。

这是我试图保存的时候。

```
NSUserDefaults *favorite = [NSUserDefaults standardUserDefaults];

[favorite setObject:saveTip forKey:@"saveTipFavorite"];

[favorite synchronize]; 
```

但是每次我在我的应用程序中按下添加到收藏按钮时，我都会覆盖！

而且我不希望它覆盖，而是创建一个新对象并附加它。

我希望你能理解我 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:05:02.747

它是覆盖，因为每个键只能有一个对象，并且您每次都在更改它。您想要做的是存储一个数组而不是单个对象，并将其设置为用户默认值中的键。

初始化：

```
NSMutableArray *objectArray;
NSUserDefaults *currentDefaults = [NSUserDefaults standardUserDefaults];
NSArray *oldSavedArray = [currentDefaults objectForKey:@"savedArray"];
if (oldSavedArray != nil)
   objectArray = [[NSMutableArray alloc] initWithArray:oldSavedArray];
else
   objectArray = [[NSMutableArray alloc] init]; 
```

请注意，我们正在从`NSArray`to转换，`NSMutableArray`因为用户默认值只能存储不可变 ( `NSArray`) 版本。

然后添加一个项目：

```
[objectArray addObject:whatever];
[currentDefaults setObject:objectArray forKey:@"savedArray"]; 
```

如果这是你要做的很多事情（大量数据），你可以考虑使用 Core Data，它会更快。`NSUserDefaults`并不是真正用于存储大量数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:15:17.907

NSUserDefaults is fine for simple stuff, but if you want your App to handle significant amount of data, you will want to start using `CoreData`.

[http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)

Not only will this solve your saving problem, it will also make it easier to manipulate your data.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:04:36.377

您保存的对象可以是一个数组。创建一个数组来保存提示，并将该对象提供给`NSUserDefaults`.

# html - 在父 div 中居中多个 div

> ID：11638411
> 
> 赞同：1
> 
> 时间：2012-07-24T19:58:56.113
> 
> 标签：html, css

我在这方面玩得很开心，在尝试实施我在几十篇文章中读到的内容之后，我仍然对这最后一部分没有任何运气。

我所拥有的是一个父 div，其中包含两行额外的 div。第一行是一个 div，包含一个带有链接的标签。第二行并排包含多个 div。

第一行（标签/链接）居中就好了。我遇到的问题是将第二行 div 居中。它们都是并排的，但它们的显示就好像我在左对齐它们一样。

这是我的CSS：

```
div.parent-container {
    position:absolute;
    background-color:#fff;
    top:32px;
    left:-1px;
    width:418px;
    height:67px;
    border-right:solid 1px #000;
    border-left:solid 1px #000;
    border-bottom:solid 1px gray;
    padding-left:2px;
    text-align:center;
    float:left;
}

div.text-label a {
    position:absolute;
    background-color:#fff;
    font-family:Microsoft Sans Serif,Arial;
    font-weight:bold;
    width:417px;
    height:15px;
    font-size:12px;
    margin-left:auto;
    margin-right:auto;
}

div.sub-container {
    position:relative;
    width:30px;
    height:auto;
    top:20px;
    float:left;
    padding-right:5px;
    margin-left:auto;
    margin-right:auto;
}

span.span-text {
    position:relative;
    font-weight:bold;
    font-family:Microsoft Sans Serif,Arial;
    font-size:11px;
    width:30px;
    height:auto;
}
div.img1 {
    height:26px;
    width:18px;
    background:url(sprite.png) -72px -144px no-repeat;
    margin-left:auto;
    margin-right:auto;
}
 div.img2 {
    height:26px;
    width:18px;
    background:url(sprite.png) -95px -143px no-repeat;
    margin-left:auto;
    margin-right:auto;
}
 div.img3 {
    height:26px;
    width:18px;
    background:url(sprite.png) -117px -143px no-repeat;
    margin-left:auto;
    margin-right:auto;
}
 div.img4 {
    height:26px;
    width:18px;
    background:url(sprite.png) -141px -143px no-repeat;
    margin-left:auto;
    margin-right:auto;
} 
```

还有我的 HTML：

```
<div class="parent-container">
    <div class="text-label"><a href="www.website.com">link to website</a></div>
    <div id='div1' class='sub-container'><span class='span-text'>text1</span>
        <div class='img1'></div>
    </div>
    <div id='div2' class='sub-container'><span class='span-text'>text2</span>
        <div class='img2'></div>
    </div>
    <div id='div3' class='sub-container'><span class='span-text'>text3</span>
        <div class='img3'></div>
    </div>
    <div id='div4' class='sub-container'><span class='span-text'>text4</span>
        <div class='img4'></div>
    </div>
</div> 
```

我尝试创建一个额外的 div 来容纳第二行 div，但这也不起作用。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:19:49.633

**[jsfiddle 示例](http://jsfiddle.net/j08691/j9Bn7/)**

您想`float:left`从子容器 div ( `div.sub-container`) 中删除 并给它们一个宽度（大约 23% 由于填充、边距等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:18:08.150

如果您想在其中将元素/子 div 居中，则将第二行包含在另一个容器中。

这是一个[**演示**](http://jsfiddle.net/H99et/)

另外，如果你想使一个元素居中，你需要`width`在演示中定义它——我给了一个 200px 的宽度。您可以根据自己的喜好进行更改。

容器的 CSS：

```
.textContainer{
  margin: 0 auto;
  width:200px; /* can be in percentage ,say 50% */
  position:relative;
  overflow:hidden;
} 
```

# hibernate - Hibernate：配置三向多对多关系的最佳方式

> ID：11638412
> 
> 赞同：2
> 
> 时间：2012-07-24T19:58:59.543
> 
> 标签：hibernate, hibernate-mapping

我试图找出`@ManyToMany`在 Hibernate 中映射三向关系的最佳方法。以下是我的数据模型：

![在此处输入图像描述](../Images/4941030d0db871c69c06dd15789384da.png)

如您所见，TeamPosition 表只不过是 3 个外键。Hibernate 以两个表之间的多对多映射的形式提供了有用的功能，并且在不需要创建第三个 Hibernate 实体的情况下连接它们的映射表。当然，如果该映射表有额外的数据，例如“StartDate”、“EndDate”，那么无论如何都需要为映射表创建实体。

是否可以在每个实体上为其他两个实体创建两个 ManyToMany 映射，或者如果我创建一个 TeamPosition 实体并与之建立 OneToMany 关系，它会更简单、更不痛苦吗？

我不一定认为有错误的答案，但有些答案可能比其他答案更正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:32:39.260

有趣的问题！

为了清楚起见：这部分数据库是否记录了特定球队在特定赛季所在的联赛组？这里的“联盟组”是什么意思？就像，[英超联赛](http://www.premierleague.com/)vs[冠军](http://www.football-league.co.uk/page/ChampionshipHome/)vs[联赛第一](http://www.football-league.co.uk/page/League1Home/)？在给定的赛季中，给定的联赛组中可以有几支球队吗？

我怀疑制作`TeamPosition`实体将是最不痛苦的事情。这些关系都是一对多的，您可以使用它的外键`Team`来`Season`构造复合主键，这样就无需为表提供冗余代理键。通过表连接的查询必须明确命名，但相当简单。

但是，您也可以尝试将其建模为地图。看起来像：

```
public class Team {
    @ManyToMany
    private Map<Season, LeagueGroup> positions;
} 
```

不保证安全。我以前只做过一次。如果你从上面生成 SQL（在我的例子中使用 Hibernate 的模式生成器），你会得到以下连接表（我给了我的实体整数键）：

```
create table Team_LeagueGroup (
    Team_id integer not null,
    positions_id integer not null,
    positions_KEY integer not null,
    primary key (Team_id, positions_KEY)
); 
```

使用以下外键使其更清晰：

```
alter table Team_LeagueGroup 
    add constraint FKE143A2AEB84635C9 
    foreign key (Team_id) 
    references Team;

alter table Team_LeagueGroup 
    add constraint FKE143A2AEB7412E91 
    foreign key (positions_id) 
    references LeagueGroup;

alter table Team_LeagueGroup 
    add constraint FKE143A2AE8F6AD5C 
    foreign key (positions_KEY) 
    references Season; 
```

这看起来是对的。您可以使用通常的注释来自定义您认为合适的表和列名称。

现在，这避免了为连接表创建实体的需要，但它还有一些不足之处。首先，我不知道用于连接的 JPQL 语法是什么。它会在文档中，但你肯定会得到你的童子军徽章来探索规范的晦涩角落以找到它。其次，我*认为*没有任何方法可以为此设置反向映射。问题在于，尽管球队和赛季的组合唯一地标识了一个联赛组，但对于这三对中的其他组合来说，情况并非如此。一个给定的球队可能在几个赛季都在一个给定的联赛组中，并且在一个给定的赛季中的一个给定的联赛组将包含几支球队。反向关系需要看起来像`class LeagueGroup { Map<Season, Set<Team>> teams; }`，我认为这超出了 JPA 的能力（尽管我可能是错的）。

# javascript - 替换视图后没有触发主干视图事件，然后放回页面

> ID：11638413
> 
> 赞同：1
> 
> 时间：2012-07-24T19:59:01.910
> 
> 标签：javascript, backbone.js, backbone-events, backbone-views, backbone-relational

# 问题：

视图内设置的事件不会在视图被替换为其他内容后触发`$element.html(anotherView)`，然后使用`#element.html(theView)`.

**例子：**

```
var BuggyView = Backbone.View.extend({
    // Event works the at first, but not after the view is replaced, then added back
    //     onto the page
    events:{
        'click #some-element': 'on_click_some_element'
    },
    // This function gets called before the view is replaced by another view, but
    //     not after it is added back into the page the second time
    on_click_some_element:function(event){
        alert('User clicked "some element"');
    }
}); 
```

执行此代码后，事件起作用：

```
// Create the new view:
var buggyView = new BuggyView({});
// Add the view to the page
$element.html(buggyView.el); 
```

当页面上的视图被其他内容替换时，此代码将在稍后发生：

```
$element.html(anotherView.el); 
```

将视图添加回页面后，事件不再起作用：

```
$element.html(buggyView.el); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:01:55.333

在 DOM 中设置视图的元素后运行渲染：

```
$element.html(anotherView.el);
anotherView.render();

$element.html(theView.el);
theView.render(); 
```

可能您的问题是渲染没有再次运行。您只是在切换 DOM 分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:02:10.417

最有可能的是，当您删除视图时，您也会删除视图的绑定事件，您可能需要重新[定义您的事件](http://documentcloud.github.com/backbone/#View-delegateEvents)。或代替使用 (jquery) 。[删除](http://api.jquery.com/remove/)使用[.detach](http://api.jquery.com/detach/)。

# java - 使用 Mockito/PowerMockito 模拟私有最终静态对象

> ID：11638418
> 
> 赞同：1
> 
> 时间：2012-07-24T19:59:33.613
> 
> 标签：java, mocking, mockito, powermock

我目前正在尝试在一个类中模拟一个私有的最终静态对象。我的对象似乎没有被正确地嘲笑。

示例：
代码：在主类中

```
public class Main {

    private final static serviceA obj = new serviceA();

    public somemethod { return true; }

} 
```

嘲笑：在我的测试课上，我有

```
Public class TestMain {

    private Main mainObj;
    private static  serviceA obj;

    @Before
    public void setupBeforeTest() {

        obj = Mockito.mock(serviceA.class);
        PowerMockito.whenNew(serviceA.class).withNoArguments().thenReturn(obj);
        mainObj= Mockito.spy(new Main());
    }
} 
```

但是 obj 不返回我在执行时指定的值

```
Mockito.when(obj.returnsFalseMethod()).thenReturn(false); 
```

并将实际运行`obj.returnsFalseMethod()`.

任何建议都会有所帮助，我也无法更改 Main 类中的任何代码，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:00:48.540

我没有意识到您必须准备创建对象的类。除了实例化对象的类之外，我正在准备每个类。

# ios - iOS：如何使用下一步和后退按钮更改标签 (DetailView)

> ID：11638421
> 
> 赞同：1
> 
> 时间：2012-07-24T19:59:42.523
> 
> 标签：ios, uibutton, tableview, master-detail

我有一个主从应用程序，在我的 DetailView 中有一个“返回”和“下一步”按钮。
按钮应该如何工作：
如果我单击后退/下一个按钮，标签（来自带有 MasterView 的 SearchBar 的 TableView）应该更改为 TableView 的上一个/下一个条目。
我的问题是我不知道该怎么做。
我在这个论坛中搜索并找到了这个主题[iOS: Button to access next Tableview cell](https://stackoverflow.com/questions/6779546/ios-button-to-access-next-tableview-cell)，但我不明白（我是为 iOS 开发的新手）。
你能帮我吗？

编辑：
这是一个 iPhone 应用程序，带有 Storyboard 和从 MasterView 到 DetailView 的 segue。
它是一个动态的 TableView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:13:48.497

基本过程是使可以提供数据的类成为需要它的类的委托。

*   创建一个新协议。

*   使主控制器实现协议。

*   给细节控制器一个引用该协议对象的属性。

*   在`prepareForSeque:`中，将详细信息的委托设置为主控制器。

*   点击按钮后，请致电您的代表以获取新数据。

# c++ - 无法使用 tmpfnam 在 C++ 中的 Windows 上创建临时文件

> ID：11638422
> 
> 赞同：-1
> 
> 时间：2012-07-24T19:59:45.457
> 
> 标签：c++, file, temporary-files

我试图通过调用`tmpfnam`函数来获取临时文件名并使用它来创建用于写入的文件来在我的 C++ 程序中创建一个临时文件，但是我的代码无法创建临时文件。但是，当我使用用户提供的文件名或字符串常量而不是使用来自`tmpfnam`. 这是一个例子：

```
std::tmpnam(fname); //does not work 
std::fstream f(fname,std::ios::out);

char* fname = "myfile.txt"; //works
std::fstream f(fname,std::ios::out); 
```

我检查了案例 2 中的文件是否创建在与源文件相同的目录中，但不是案例 1。我也尝试在管理员权限下运行程序，但仍然没有运气。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:09:32.503

你试过[这样](http://en.cppreference.com/w/cpp/io/c/tmpnam)吗？

```
char fname[L_tmpnam];
if (std::tmpnam(fname)) {
    std::fstream f(fname,std::ios::out);
    // ...
} 
```

希望它有所帮助。

# html - HTML段落格式问题

> ID：11638425
> 
> 赞同：0
> 
> 时间：2012-07-24T19:59:55.147
> 
> 标签：html, css

所以我有这段html：

```
<div id="navigation">
    <img class="navLogo" src="images/navlogo.png" />
    <h3 class="navTalk">Routes and Maps</h3> <br />
    <p class="navtext">Get routes, stop times,and maps</p>
</div>
<div id="fares">
    <img class="navLogo" src="#" />
    <h3 class="navTalk">Fares & Costs</h3>
    <p>Get info on fares and trip costs</p>
</div>
<div id="alerts">
    <img class="navLogo" src="#" />
    <h3 class="navTalk">Service Alerts</h3>
    <p>Find disruptions and delays</p>

</div> 
```

使用这个 CSS：

```
#navigation {
float: left;
border: 1px solid black;
background-color: #d69f0f;
margin-left: 50px;
padding: 2px;
margin-bottom: 10px;
width: 210px;

}
#fares {
float: left;
border: 1px solid black;
background-color: red;
margin-left: 50px;
padding: 2px;
margin-bottom: 10px;
width: 200px;
}
#alerts {
float: left;
border: 1px solid black;
background-color: red;
margin-left: 50px;
padding: 2px;
width: 200px;
}
#navigation h3 {
color: #fff;
}
#navigation p {
font-size: 8pt;
color: #fff;
padding-left: 4px;
}
#fares p {
font-size: 8pt;
color: #fff;
}
#fares h3 {
color: #fff;
}
#alerts p {
font-size: 8pt;
color: #fff;
}
#alerts h3 {
color: #fff;
}
#tripplanner {
float: left;
} 
```

一切看起来都像我期望的那样，除了该段落没有从 h3 标签下面的行开始。相反，该段落在 h3 之后开始并换行到下一行。我似乎也无法让段落接受填充，并且它正推向我正在使用的图标的右侧。我完全不知道为什么会这样。我确信有一个简单的解决方案，但我迷路了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:03:10.617

删除 BREAK 标记：

`<h3 class="navTalk">Routes and Maps</h3> <br />`<--- 这里。

# websphere-7 - WAS7 Fixpack21问题

> ID：11638430
> 
> 赞同：0
> 
> 时间：2012-07-24T20:00:34.483
> 
> 标签：websphere-7

上周我安装了 WAS7 并应用了 fixpack21，从那时起我看到 jax-ws Web 服务 xml 响应包含 xsi:nil="true" 即使元素有值。这发生在十进制字段上。请问有什么想法吗？谢谢

# c# - 如何使用 DesignData 帮助开发 Metro 应用程序？

> ID：11638437
> 
> 赞同：3
> 
> 时间：2012-07-24T20:00:51.207
> 
> 标签：c#, xaml, windows-8, microsoft-metro, expression-blend

我一直在 Windows Phone 应用程序中愉快地使用 DesignData，我希望使用它来帮助在 VS2012/Blend for VS 中可视化 Metro 风格应用程序中的设计。

我已经尝试了希望显而易见的：

```
<common:LayoutAwarePage
x:Name="pageRoot"
x:Class="MyRootNamespace.Views.EventView"
DataContext="{Binding DefaultViewModel, RelativeSource={RelativeSource Self}}"
IsTabStop="false"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:MyRootNamespace.Views"
xmlns:common="using:MyRootNamespace.Common"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
xmlns:bm="using:Bing.Maps"
d:DataContext="{d:DesignData Source=../SampleData/SpecialEventSampleData.xaml}"
mc:Ignorable="d"> 
```

SpecialEventSampleData.xaml 看起来松散地像：

```
<local:SpecialEvent 
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"       
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:MyRootNamespace.ViewModels" 
EventName="Foo Fighters" 
Description="This exclusive April Fools Gig will see Dave Grohl and the rest of the Foo Fighters rock out at this exclusive made up gig" 
VenueName="Village Hall" 
/> 
```

它所引用的类有一个公共的、无参数的构造函数，但 Visual Studio 给出了一个错误：

> 错误无法创建“SpecialEvent”的实例。C:...\MyRootNamespace.Windows\SampleData\SpecialEventSampleData.xaml

此外，我期望必须将构建操作设置为“DesignData”或类似的，但这似乎不是 Visual Studio 2012 中的选项？

我需要做什么才能让[设计时数据](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh758320.aspx#displaying_data_in_the_designer)在 VS2012/Blend 中工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T19:00:18.847

SpecialEvent 是您的 ViewModel 吗？如果是这样，你可以在你的 XAML 中做这样的事情吗（直接在你的 common:LayoutAwarePage 开放声明之后）？

```
<d:Page.DataContext>
    <local:SpecialEvent>
</d:Page.DataContext> 
```

然后从你的 common:LayoutAwarePage 中删除这一行：

```
d:DataContext="{d:DesignData Source=../SampleData/SpecialEventSampleData.xaml}" 
```

我有与此类似的代码正在运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T23:10:10.803

在 Windows Phone（我相信）中，示例数据文件的路径是相对于应用程序根目录的。在 Windows 8 中，示例数据文件的路径与您要在其中使用它的*页面 xaml 文件相关。*

在上面的示例中，*page.xaml*文件需要位于项目的子文件夹中，但位于与**SampleData**不同的文件夹中。

Windows 8 示例数据不会自动为您创建集合实例。因此，如果您有这样的示例数据：

```
<Event>
 <Attendees>
   <Attendee Name="Joe" />
 </Attendees>
</Event> 
```

您需要确保在定义变量时将**参加者**属性的支持字段设置为新的集合实例。如果您使用自动属性（**Attendees { get; set; }**语法），则需要在构造函数中将属性设置为新的集合实例，然后才能在 xaml 中添加项目。

最后，Windows 8 xaml 无法处理泛型类型。因此，如果您的**Attendees**属性是**Collection<Attendee>**类型，您将无法在 xaml 中创建它的实例。

您始终可以创建一个名为**AttendeeCollection**的简单类，该类继承自**Collection<Attendee>**并在您的 xaml 中创建该类的实例。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T07:31:50.153

尝试使用 xaml 文件的完整路径而不是相对路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T19:21:25.167

这有点晦涩难懂，但归结为我`INotifyPropertyChanged`在 View-Model 上的实现。

在我的 Windows Phone 代码中，我必须做一些工作来确保后台工作线程引发的事件在 UI 线程上弹出：

```
protected delegate void OnUIThreadDelegate();
protected void OnUIThread(OnUIThreadDelegate onUIThreadDelegate)
{
    if (Deployment.Current.Dispatcher.CheckAccess())
    {
        onUIThreadDelegate();
    }
    else
    {
        Deployment.Current.Dispatcher.BeginInvoke(onUIThreadDelegate);
    }
} 
```

然后使用它：

```
protected override void OnPropertyChanged(PropertyChangedEventArgs e)
{
    OnUIThread(() =>
    {
        base.OnPropertyChanged(e);
    });
} 
```

似乎在移植该代码时，我没有检查`CoreWindow.GetForCurrentThread()`导致异常在代码的最黑暗深处触发的结果，因为设计人员正在为我的类型设置属性，并且我试图引发事件而是可怕地死去。我的错。

# delphi - DELPHI Indy SSL POST 神秘

> ID：11638446
> 
> 赞同：0
> 
> 时间：2012-07-24T20:01:27.487
> 
> 标签：delphi, post, ssl, indy

我有一个程序，它通过 SSL 将一些表单数据发布到 .asp 脚本。在我和另外两台计算机（2x win7，一台 WinXP）上 - .asp 脚本返回肯定答案，发布的数据被接受。但是来自另外两台计算机（win7、winXP）的 .asp 脚本不接受发布数据，但每个输入都按要求填写。idHTTP 通过 SSL 成功连接，发布数据，脚本获取该数据并解析它，但由于某种原因不接受它。使用 GET 方法时，在所有计算机上一切正常。该问题仅在使用 POST 方法时出现。

# r - 遍历目录中的文件并使用文件名创建变量

> ID：11638448
> 
> 赞同：0
> 
> 时间：2012-07-24T20:01:34.170
> 
> 标签：r

我在一个目录中有几个 txt 文件

> dayton1.txt
> datton2.txt
> ...
> dakton50.txt

我想以文件名作为名称创建变量并读取相应的文件。我怎样才能在 R 中做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T20:10:14.580

您想要`list.files()`，请参阅它的帮助页面`?list.files`。例如：

```
R> getwd()
 [1] "/blah/blah/packages/analogue/analogue/pkg"
R> list.files()
 [1] "data"         "DESCRIPTION"  "DESCRIPTION~" "inst"         "man"         
 [6] "NAMESPACE"    "NAMESPACE~"   "R"            "src"          "tests"       
[11] "vignettes"
R> list.files("./inst")
[1] "ChangeLog"  "ChangeLog~" "CITATION"   "CITATION~"  "COPYING"   
[6] "doc"        "THANKS"     "TODO" 
```

# java - 来自Mysql的自动刷新edittext android

> ID：11638453
> 
> 赞同：0
> 
> 时间：2012-07-24T20:02:00.397
> 
> 标签：java, android, json

我是android新手，我正在eclipse（android）上构建简单的应用程序，我在android中有两个EditText，我在MySql中有一个表，现在我想在MySQl的表中插入数据后进行自动刷新，如何我可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:27:28.083

Your question is a little vague as to what you're trying to do. Are you pulling values from the edittext fields to place into the SQL table?

You can query the database for the most recent row that was entered into the table and then parse your information that way. You can specify something like "DESC _id" and grab the latest row that way.

This may help out with some general SQL questions: [http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android](http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android)

# android - 套接字上的碎片图像字节数组

> ID：11638455
> 
> 赞同：1
> 
> 时间：2012-07-24T20:02:07.627
> 
> 标签：android, image, sockets, bytearray

我试图通过套接字将图像作为字节数组发送到客户端，以便它可以查看图像，并且一切顺利，除了查看图像碎片时，我可以查看图像的前 10 个，但其余部分是灰色和黑色像素，我不知道为什么

这是我的一段服务器代码：

```
 public synchronized void nextFrame(VideoFrame frame) {
        // This method is called when a new frame is ready.
        // Don't forget to recycle it when done dealing with the frame.

        // draw the new frame onto the JLabel
            go = true;
            pic = frame.getBytes();
            go = false;
            label.getGraphics().drawImage(frame.getBufferedImage(), 0, 0, width, height, null);
            frame.recycle();

    }
}

class server extends Thread{
    int port;
    ServerSocket socket;
    Socket temps = null;
    boolean go = true;
    server(int p){
        port = p;
        start();
    }

    public void run(){      

        while(go == true){
            try {
                socket = new ServerSocket(port, 10);
                socket.setSoTimeout(10000);
                temps = socket.accept();
                new connect(temps);
                port += 1;
            } catch (IOException e) {
                if(e.getMessage().toString().equalsIgnoreCase("Accept timed out")){
                    go = false;
                }else{
                    e.printStackTrace();
                }
                break;
            }

        }
        try {
            socket.close();
            System.out.println("Closing socket server(no more connections will be created)");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

class connect extends Thread{
    Socket connection;
    ObjectOutputStream out;
    int port;
    String host;
    GetInput in;
    connect(Socket s){
        try {
            connection = s;
            out = new ObjectOutputStream(connection.getOutputStream());
            host = connection.getInetAddress().getHostName();
            port = connection.getPort();
            System.out.println("Connected to " + host + ":" + port);
            in = new GetInput(connection);
            start();
        } catch (IOException e) {
            e.printStackTrace();
        }   
    }

    public void run(){
        try {
            out.writeInt(Main.pic.length);
        } catch (IOException e1) {
            e1.printStackTrace();
        }
        while(in.isAlive()){
            if(Main.go){    
                try {
                    out.write(Main.pic);
                } catch (IOException e) {
                        e.getMessage().toString();
                }
            }
        }
        try {
            out.close();
            connection.close();
            System.out.println("Closing " + host + ":" + port);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
class GetInput extends Thread{
    ObjectInputStream in;
    GetInput(Socket s){
        try {
            in = new ObjectInputStream(s.getInputStream());
        } catch (IOException e) {
            e.printStackTrace();
        }
        start();
    }
    public void run(){
        try{
            boolean go = in.readBoolean();
            int a = (go?1:0);
            System.out.println(a);
        } catch (IOException e) {
                e.getMessage().toString();
        }
        try {
            in.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

我知道图像采集卡正在正确抓取图像，因为我也在服务器上显示图像并且看起来很好，这意味着字节数组没有通过套接字正确发送，但为什么呢？

编辑：这是我的客户端代码，它是一个 android 应用程序

```
package org.smiley.doom;

import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;

import java.net.InetAddress;
import java.net.Socket;
import java.net.UnknownHostException;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.TextView;

public class ClientActivity extends Activity implements View.OnClickListener{

    Socket s;
    InetAddress inet;
    ObjectOutputStream out;
    ObjectInputStream in;
    TextView log;
    ImageView im;
    Button send;
    EditText tip;
    int rport;
    String ip;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        tip = (EditText) findViewById(R.id.etIP);
        send = (Button) findViewById(R.id.bSEND);
        im = (ImageView) findViewById(R.id.ivPIC);
        log = (TextView) findViewById(R.id.tvLog);

        s = null;
        in = null;
        out = null;

        send.setOnClickListener(this);
    }

    @Override
    public void onClick(View arg0) {
        switch(arg0.getId()){
            case R.id.bSEND:
                final int len;
                    try {
                        inet = InetAddress.getByName("192.168.0.2");
                        s = new Socket(inet, 4321);
                        in = new ObjectInputStream(s.getInputStream());
                        out = new ObjectOutputStream(s.getOutputStream());
                        log.setText("Client opened");
                        len = in.readInt();
                        new Thread(new Runnable(){

                            @Override
                            public void run() {
                                    byte[] b = new byte[len];
                                    try {
                                        in.read(b);
                                        log.setText(""+s.getReceiveBufferSize());
                                    } catch (IOException e1) {
                                        e1.printStackTrace();
                                    }
                                    final byte[] l = b;
                                    im.post(new Runnable(){
                                        @Override
                                        public void run() {
                                            Bitmap bmp = BitmapFactory.decodeByteArray(l, 0, l.length);
                                            im.setImageBitmap(bmp);                             
                                        }
                                    });
                                    try {
                                        out.writeBoolean(true);
                                        out.close();
                                        in.close();
                                        s.close();
                                        //log.setText("Client closed");
                                    } catch (IOException e) {
                                        e.printStackTrace();
                                    }
                            }

                        }).start();;
                    } catch (UnknownHostException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T18:31:49.837

TCP 仅向应用程序提供当前可用的尽可能多的字节。由于底层网络层 (IP) 是基于数据包的，因此您的流在传输过程中会被分块。接收端的网络堆栈从网卡中获取这些块（数据包）并缓冲它们，直到应用程序从给定的套接字读取，此时您可以获得`min`缓冲区大小以及 OS 每个套接字缓冲区中堆积的内容。

因为 TCP 连接代表一个*流*，操作系统对您的应用程序消息一无所知，因此您有责任将所有内容重新组合在一起。

您必须在循环中从套接字读取，直到您知道您拥有所有数据。知道这一点的最简单方法是预先告诉客户端您要发送多少字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:08:12.587

您的数据段（图像）可能比缓冲区大得多。

不知何故，您必须找到一种方法来缓冲输出，以便在溢出写入缓冲区之前刷新它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-28T08:35:45.430

Nikolai Fetissov 的回答帮助我解决了这个问题。这是我如何让它工作的：

1.  将包含预期消息大小和消息类型的 JSON（或任何其他格式）从发送方发送到接收方。确保这是简短而甜蜜的。
2.  立即发送您的数据。它可以是图像/音频/视频或任何东西。

奖励：这也适用于 Android 蓝牙/Wifi 套接字。

代码片段：

```
byte[] fileBuffer = null;
int bytes = 0, expectedFileSize = 0, messageType = Constants.TYPE_IMAGE;
boolean isProcessing = false;
while (isReading) {
    try {
        if (isProcessing) {
            // Fragment arrived
            byte[] buffer = new byte[1024];
            int currentSize = mmInStream.read(buffer);

            // Keep appending to the fileBuffer
            System.arraycopy(buffer, 0, fileBuffer, bytes, currentSize);
            bytes += currentSize;
            if (bytes == expectedFileSize) {
                // Your message is ready. Send it!
                sendIt(fileBuffer, messageType);
                isProcessing = false;
                bytes = 0;
            }
        } else {
            byte[] buffer = new byte[1024];
            bytes = mmInStream.read(buffer);
            try {
                // Message is a JSON. Next set of messages will be audio or image.
                JSONObject json = new JSONObject(new String(buffer, 0, bytes));
                expectedFileSize = json.getInt(Constants.MESSAGE_SIZE);
                messageType = json.getInt(Constants.MESSAGE_TYPE);
                fileBuffer = new byte[expectedFileSize];
                isProcessing = true;
                bytes = 0;
            } catch (JSONException e) {
                // This is a normal message. Send it without processing.
                sendIt(buffer, Constants.TYPE_TEXT);
                isProcessing = false;
                bytes = 0;
            }
        }
    } catch (IOException e) {
      e.printStackTrace();
    }
} 
```

欢迎对代码进行编辑以进一步优化！希望这可以帮助。

# php - 在使用 PHPExcel 通过 getWorksheetIterator() 循环工作表时识别工作表索引

> ID：11638459
> 
> 赞同：3
> 
> 时间：2012-07-24T20:02:20.557
> 
> 标签：php, for-loop, phpexcel, worksheet

我正在使用 PHPExcel 库来读取包含许多工作表的 Excel 文件并对其执行处理。现在我循环遍历每个工作表没有问题。但是，我想提取每个工作表的索引并将其打印出来，但我不知道该怎么做。当然，我可以制作自己的计数器并完成它。但是必须有一个带有 getWorksheetIterator() 方法的内置方法，不是吗？

也就是说，如何提取当前的工作表迭代器？

感谢您的任何帮助。

这是文档的循环示例，供参考，稍作修改，包含 worksheetiterator 方法：

```
<?php
$objReader = PHPExcel_IOFactory::createReader('Excel2007');
$objReader->setReadDataOnly(true);

$objPHPExcel = $objReader->load("test.xlsx");
$objWorksheet = $objPHPExcel->getActiveSheet();

$CurrentWorkSheetIndex = 0; 

foreach ($objPHPExcel->getWorksheetIterator() as $worksheet) {
    echo 'WorkSheet' . $CurrentWorkSheetIndex++ . "\n";
    echo '<table>' . "\n";
    foreach ($objWorksheet->getRowIterator() as $row) {
      echo '<tr>' . "\n";

      $cellIterator = $row->getCellIterator();
      $cellIterator->setIterateOnlyExistingCells(false); // This loops all cells,
                                                         // even if it is not set.
                                                         // By default, only cells
                                                         // that are set will be
                                                         // iterated.
      foreach ($cellIterator as $cell) {
        echo '<td>' . $cell->getValue() . '</td>' . "\n";
      }

      echo '</tr>' . "\n";
    }
    echo '</table>' . "\n";
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:41:59.677

WorksheetIterator 依次循环遍历每个工作表，所以第一个是索引 0，第二个是索引 1，第三个是索引 2，依此类推。

所以要么为迭代器的每个循环增加你的 $CurrentWorkSheetIndex 。

```
$CurrentWorkSheetIndex = 0;   

foreach ($objPHPExcel->getWorksheetIterator() as $worksheet) {
    $index = $CurrentWorkSheetIndex;
    ....
    $CurrentWorkSheetIndex++;
} 
```

或者使用迭代器的 key() 方法。

```
$wsIterator = $objPHPExcelR->getWorksheetIterator();
foreach($wsIterator as $worksheet) {
    $index = $wsIterator->key();
    ....
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T20:42:02.567

我找到了自己问题的答案。

```
foreach ($objPHPExcel->getWorksheetIterator() as $worksheet) {
    echo 'Worksheet number - ', $objPHPExcel->getIndex($worksheet) , PHP_EOL;

    // rest of code above
} 
```

# java - 从 android 相机动态加密视频

> ID：11638463
> 
> 赞同：9
> 
> 时间：2012-07-24T20:02:31.273
> 
> 标签：java, android, encryption, android-camera, file-descriptor

我想对android相机捕获的动态视频进行加密。所以我需要告诉 android`MediaRecorder`将它的视频流写入我的`CipherOutputStream`. 问题是`MediaRecorder.setOutputFile()`方法只接受`FileDescriptor`并且无法从 CipherOutputStream 获取加密文件描述符。

所以我的问题是如何模拟 FileDescriptor 来接收数据写入并手动进行加密，或者以某种方式说服`MediaRecorder`将视频流式传输到`CipherOutputStream`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-24T11:01:05.180

您可以使用 LocalServerSocket 和 LocalSocket 来实现您想要的。

LocalServerSocket，它通过 LocalServerSocket.getFileDescriptor() 提供 FileDescriptor

1.  启动一个 LocalServerSocket。
2.  启动一个 LocalSocket 对象并连接到 LocalServerSocket。
3.  调用 LocalServerSocket.accept() 以接受来自 LocalSocket 的连接。
4.  连接建立后，您可以从 LocalServerSocket 获取 FileDescriptor。
5.  Camera 写入 LocalServerSocket 的每个字节都可以从 LocalSocket.getInputStream() 中检索，您可以使用 for 循环获取字节流并写入 CipherOutputStream。

请记住将所有步骤放入一个新线程中。

我使用这些 API 来创建以 Camera 作为流源的动态流处理器。

我希望这有帮助。

# javascript - 你如何在后台加载图像，然后在完成后显示页面？

> ID：11638466
> 
> 赞同：2
> 
> 时间：2012-07-24T20:02:44.780
> 
> 标签：javascript, html, ajax, jquery-ui

我有一个 ajax Web 应用程序，每 10 秒我从服务器请求内容。服务器发回带有图像链接的 HTML。现在，我将 div 标签的 innerHTML 设置为从服务器返回的 HTML，它会动态更新网页而不重新加载整个页面。

然而，问题是，图像在设置 innerHTML 后单独加载，导致应用程序看起来很时髦而且很慢。

当我拥有所有资源时，如何准备好所有图像然后交换 innerHTML？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:18:51.003

向图像的 DOM 添加一个属性（或数据属性），然后使用 jQuery 监听“loaded”事件，将加载的属性更改为 true。然后验证队列中是否有静止图像，如果没有则执行完整过程的回调。

标记：

```
<img src="img/1.png" class="imgToLoad" loaded="false" />
<img src="img/2.png" class="imgToLoad" loaded="false" />
<img src="img/3.png" class="imgToLoad" loaded="false" />
<img src="img/4.png" class="imgToLoad" loaded="false" /> 
```

伪代码：

```
 function allImagesLoaded(){
      $('#yourmaindiv').show();
      console.log('images loaded!');
    }
    $('img.imgToLoad').load(function(){
      $(this).attr('loaded', 'true');
      if( $('img.imgToLoad[loaded=false]').length === 0 ){
        allImagesLoaded();
      }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T20:06:08.247

对于您的图像：

# JavaScript

```
$(function () {
    preload();

    function preload() {
        var imageObj = new Image(),
            images = [];

        images[0] = 'img/1.png';
        images[1] = 'img/2.png';
        images[2] = 'img/3.png';
        images[3] = 'img/4.png';
        images[4] = 'img/5.png';

        for (var i = 0; i < images.length; i++) {
            imageObj.src = images[i];
        }
    }
}); 
```

# HTML

```
<body>
    ....

    <!--[if IE]>
        <div id="preload">
            <img src="img/1.png" width="1" height="1" alt="" />
            <img src="img/2.png" width="1" height="1" alt="" />
            <img src="img/3.png" width="1" height="1" alt="" />
            <img src="img/4.png" width="1" height="1" alt="" />
            <img src="img/5.png" width="1" height="1" alt="" />
        </div>
    <![endif]-->
</body> 
```

# 用于 IE 的 CSS

```
#preload {
   position: absolute;
   overflow: hidden;
   left: -9999px; 
   top: -9999px;
   height: 1px;
   width: 1px;
} 
```

# vb.net - 使用包含多个树视图节点复选框的单个面板（附加图像和代码）

> ID：11638467
> 
> 赞同：1
> 
> 时间：2012-07-24T20:02:48.087
> 
> 标签：vb.net, treeview, panel

我是 VB.NET 初学者。

我想实现以下目标：

1.  单击 Node1 会打开一个包含复选框的面板。
2.  用户将单击几个复选框。
3.  用户单击 node2 将复选框信息导出到 Excel 工作表列，然后重置面板。
4.  在面板上输入的新信息将导出到步骤 3 中使用的同一 Excel 工作表中的相邻列。
5.  上述过程持续 90 个节点。

如何执行步骤 3、4 和 5 中的第一部分？

这是我的第一次尝试，但不起作用：

```
Dim oXL As Excel.Application
Dim oWB As Excel.Workbook
Dim oSheet As Excel.Worksheet
oWB = oXL.Workbooks.Open("F:\open.xlsx")
oSheet = oWB.Worksheets("Sheet1")

'I am not able to think clearly on following loop

For i = 1 To 3
    For j = 1 To 90
        If CheckBox1.Checked Then
            oSheet.Cells(i, j).value = "1"
        Else : oSheet.Cells(i, j).value = "0"
        End If
        If CheckBox2.Checked Then
            oSheet.Cells(i, j).value = "1"
        Else : oSheet.Cells(i, j).value = "0"
        End If
        If CheckBox3.Checked Then
            oSheet.Cells(i, j).value = "1"
        Else : oSheet.Cells(i, j).value = "0"
        End If
    Next
Next

'Following works

CheckBox1.Checked() = False
CheckBox2.Checked() = False
CheckBox3.Checked() = False
ComboBox1.ResetText() 
```

![在此处输入图像描述](../Images/617cd414c6f3f4a1dad471d197accaea.png) ![在此处输入图像描述](../Images/0eae2beeff73d522b963fe023ede69a5.png)

![在此处输入图像描述](../Images/eadbe2994b02679b0892989b8e6de7f5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:21:21.853

您显然需要一种在将用户选择保存到电子表格*之前将其存储在内存中的方法。*有几种方法可以做到这一点，但鉴于您的经验不足，我建议您考虑最简单的方法，即定义一个基本类来表示用户对单个节点的选择，以及一个[数组](http://msdn.microsoft.com/en-us/library/wak0wfyt.aspx)——其中每个项目都是该类的一个实例– 存储整个用户选择集。

**定义节点选择类**——表示单个节点的选择：

```
Public Class NodeSelection
    Public CheckA As Boolean
    Public PickAIndex As Integer = -1
    Public CheckB As Boolean
    Public PickBIndex As Integer = -1
    Public CheckC As Boolean
    Public PickCIndex As Integer = -1
    Public ItemProcessed As Boolean
End Class 
```

**定义你的变量**——在你的表单类中（而不是在子类中）：

```
Private _userPicks(89) As NodeSelection 'Array of user's selections
Private _previousIndex As Integer = -1  'Used to record the previously selected node 
```

**实例化数组项**——在表单的`Load`事件中：

```
'Instantiate the class for each element of the array 
For i As Integer = 0 To _userPicks.Count - 1
    _userPicks(i) = New NodeSelection
Next 
```

**跟踪用户选择：**

Whenever a new node is selected, you need to update the array item for the *previously* selected node then reset the controls for the current node. 这最好在树视图的`AfterSelect`事件中完成：

```
Private Sub TreeView1_AfterSelect(sender As Object, e As System.Windows.Forms.TreeViewEventArgs) Handles TreeView1.AfterSelect

    'Exit if the click is on the parent node (Node0)
    If e.Node.GetNodeCount(False) > 0 Then Return

    UpdateNodeInfo()

    'If the currently selected node has already been processed, 
    'restore user selection values to the controls,
    'otherwise reset the controls
    With _userPicks(e.Node.Index)
        CheckBox1.Checked = If(.ItemProcessed, .CheckA, False)
        ComboBox1.SelectedIndex = If(.ItemProcessed, .PickAIndex, -1)
        CheckBox2.Checked = If(.ItemProcessed, .checkB, False)
        ComboBox2.SelectedIndex = If(.ItemProcessed, .PickBIndex, -1)
        CheckBox3.Checked = If(.ItemProcessed, .checkC, False)
        ComboBox3.SelectedIndex = If(.ItemProcessed, .PickCIndex, -1)
    End With

    'Color the previous selection so the user can see it's been processed
    If _previousIndex >= 0 Then TreeView1.Nodes(0).Nodes(_previousIndex).BackColor = Color.AntiqueWhite

    'Record this (selected) node's index for updating when the next node is selected
    _previousIndex = e.Node.Index
End Sub

Private Sub UpdateNodeInfo()
    If _previousIndex < 0 Then Return 'No item has been set yet
    With _userPicks(_previousIndex)
        .CheckA = CheckBox1.Checked
        .PickAIndex = If(.CheckA, ComboBox1.SelectedIndex, -1)
        .CheckB = CheckBox2.Checked
        .PickBIndex = If(.CheckB, ComboBox2.SelectedIndex, -1)
        .checkC = CheckBox3.Checked
        .PickCIndex = If(.checkC, ComboBox3.SelectedIndex, -1)
        .ItemProcessed = True 'Record the fact the item has already been processed
    End With
End Sub 
```

### 将值写入电子表格：

请注意，我将数组项更新例程放在一个单独的过程中。这是因为您必须先更新最终选择，然后再将其全部写入电子表格。我想你会有一个按钮来保存他们的选择，所以你只需要`UpdateNodeInfo`在遍历数组并写入值之前从那里调用 sub。以下是您可以如何迭代这些值并更新电子表格：

```
For i As Integer = 0 To _userPicks.Count - 1
    With _userPicks(i)
        oSheet.Cells(3, i + 2) = "Node" & (i + 1).ToString
        oSheet.Cells(9, i + 2) = "Node" & (i + 1).ToString
        oSheet.Cells(4, i + 2) = If(.ItemProcessed AndAlso .CheckA, 1, 0)
        oSheet.Cells(5, i + 2) = If(.ItemProcessed AndAlso .CheckB, 1, 0)
        oSheet.Cells(6, i + 2) = If(.ItemProcessed AndAlso .checkC, 1, 0)
        oSheet.Cells(10, i + 2) = If(.ItemProcessed AndAlso .CheckA, ComboBox1.Items(.PickAIndex).ToString, "")
        oSheet.Cells(11, i + 2) = If(.ItemProcessed AndAlso .CheckB, ComboBox1.Items(.PickBIndex).ToString, "")
        oSheet.Cells(12, i + 2) = If(.ItemProcessed AndAlso .checkC, ComboBox1.Items(.PickCIndex).ToString, "")
    End With
Next 
```

我假设您已经知道如何打开、保存和关闭电子表格，所以我将把它留给您。熟悉此处列出的方法，如果不熟悉，请发布另一个问题。

### 最后

以上是实现您想要做的事情的一种相当简单的方法。如果你认为你可能需要为你的类添加更多功能，你应该考虑用公共成员替换[属性](http://visualbasic.about.com/od/quicktips/qt/PubClsVar.htm)——有些人会说你无论如何都应该这样做——并且你可能想要考虑将完整的用户选择集存储在[List( T)](http://msdn.microsoft.com/en-us/library/4kf43ys3.aspx)对象而不是数组。

# ios - Restkit 自定义映射

> ID：11638472
> 
> 赞同：1
> 
> 时间：2012-07-24T20:03:12.677
> 
> 标签：ios, nsdate, restkit, nsformatter

想知道是否可以将 keyPaths 连接到映射对象中的一个属性。寻找类似的东西

mapKeyPaths @"firstname", @"lastname", nil toAttribute:@"name"

那么名字将是“鲍勃约翰逊”

** 我正在处理的 API 传递日期和 startTime 属性，分别为 2012/02/28 和 16:12，作为字符串。

将 startTime 用作“2012/02/28 16:12”会更容易。

我想我可以通过将日期和 startTime 保留为 NSDate 字段来解决这个问题，所以我尝试按照 Restkits 说明设置 dateFormatter。当我尝试这个想法时，对于 startTime dateFormatter 仅使用“HH:MM”，它将“1970/01/01 16:12”推入 startTime 字段。

除了在映射到核心数据并以编程方式放入字段后手动检查每条记录之外，任何人都有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:47:21.763

我认为您还不能进行此类编程映射。

想到了两种替代解决方案：

1）在 willMapData （或类似的东西）中，您可以在对象映射发生之前手动修改传入的序列化。在那里你可以指定你喜欢的格式。

2) 将这两个属性保存在您的核心数据实体中，并创建第三个瞬态属性，该属性在运行时计算，并在需要时通过 NSDateFormatter 传递这两个值。

# ruby-on-rails - 在 Ruby / Rails 应用程序或内存泄漏检测中创建所有对象的报告

> ID：11638473
> 
> 赞同：0
> 
> 时间：2012-07-24T20:03:13.660
> 
> 标签：ruby-on-rails, ruby, memory

我需要在 ruby​​ / rails 应用程序的生命周期中创建所有 Ruby 对象的报告。

FAIL #1 ruby​​-prof 在我系统上的本地峰值中在本地工作得很好（使用这个 repo： [https](https://github.com/kikuchiyo/vim_game.git) ://github.com/kikuchiyo/vim_game.git ），但后来我在不同的环境和 repo 中设置了它而且我无法`objects`显示报告-它们总是空的。

有谁知道一种可靠的方法来报告 Ruby/Rails 应用程序中的对象数量，或者另一种报告/检测 Ruby/Rails 中的内存泄漏的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:04:50.743

使用类似[Oink](https://github.com/noahd1/oink)的东西，它是一个 ruby​​ 内存分析器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:14:20.850

看着你的问题，我会考虑[memprof](https://github.com/ice799/memprof "内存配置文件")作为第二种方法。但是，如果您可以在本地配置上运行 ruby​​-prof，那么它可能只是您其他环境中的一些配置问题。

# c++ - 面向对象设计 - 将 C 应用程序转换为 C++

> ID：11638477
> 
> 赞同：5
> 
> 时间：2012-07-24T20:03:29.260
> 
> 标签：c++, c, oop, design-patterns

我正在开始学习`C++`和`object oriented design`. 将过程代码转换为面向对象代码的已知/常用技术是什么？哪些设计选择对以下代码有意义？

```
typedef struct
{
    int sector;
    int sectorPos;
}EndPosition;

typedef struct
{
    int rotateAngles;
    double brakingFactor;
}WheelStop;

WheelStop stops[][6] =
{
     /* data removed for brevity */
};

typedef struct
{
    int numImages;      /* Number of images in win amount string */
    int pixWidth;
    int indexes[7];     /* indexes into NumberImages[] */
}WinAmountData;

typedef struct
{
    int xOffset;    /* pixel count offset before next digit */
    std::string fileName;
    //char fileName[20];
    cairo_surface_t *image; 
}ImageInfo;

ImageInfo NumberImages[] =
{
     /* data removed for brevity */
};

enum { DOLLAR = 10, EURO, POUND, YEN };

double DegreesToRadians( double degrees )
{
    return((double)((double)degrees * ( (double)M_PI/(double)180.0 )));
}

int InitImages( void )
{
     /* uses NumberImages */
}

void DestroyNumberImages( void )
{
      /* uses NumberImages */
}

int ParseWinAmountString( char *string, WinAmountData *amtData )
{
        /* uses WinAmountData and enum */
}

gboolean rotate_cb( void *StopPos )
{
      /* uses EndPosition and stops */
}

static gboolean on_expose_event(GtkWidget *widget, GdkEventExpose *event, gpointer data)
{
     /* uses CairoImage class */
}

static void destroy (GtkWidget *window, gpointer data)
{
     /* cleanup GTK stuff */
} 
```

我已经考虑过了，我可能会看到两个类：

*   `CWinAmount`这将包括处理要放置在“纺车”上的货币数量的数据结构和函数。
*   `CWheel`它将封装控制轮子动画机制的轮子数据结构和函数。

但我只是不确定这是否是一个好的设计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:11:46.217

我不会提供有关如何进行此类转换的确切细节（这完全取决于您）。但是，您描述的方法听起来像是一个完全合理的设计。通常，在将代码转换为 OO 时，我会发现最明显的具有共享状态的函数和结构分组并将它们包装在一起。然后我查看保留了哪些函数，并尝试确定它们是否属于现有对象，是否有某种关系可以证明对它们进行分组，或者将它们保留为通用函数（如果我有选择的话）。

一般来说，转换为 OO 风格并不是什么秘密，大多数方法只是尝试将任何/所有共享状态/功能分组到块（对象）中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T20:06:26.093

在您的情况下，我会将数据保留在类本身之外，并更多地查看传递给它的数据值的功能。这使您的设计更具可扩展性，因为它不会将自己绑定到特定的数据集，并且更多地充当数据的函数而不是数据的传递者。

我一直认为 OOP 是一种在不依赖内部数据的情况下接收数据并通过各种过滤器对其进行转换的方式。这样，您可以对数据进行子类化和进一步过滤，并执行更具体的过滤。过滤器不包含数据，它实际上只包含执行过滤的功能。

因此，就像您描述的那样，您将拥有两个类，但它们会接收数据而不是封装数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T20:42:15.137

你必须做的第一件事就是削减那些全局变量。他们正在破坏您的代码的任何可维护性。例如，Init 和 Destroy 方法很容易成为构造函数和析构函数。

# r - 更改 R CMD 构建的目标

> ID：11638478
> 
> 赞同：3
> 
> 时间：2012-07-24T20:03:30.743
> 
> 标签：r, packages

是否可以在`R CMD build ...`命令中设置一个标志来指定文件的目标文件夹`tar.gz`？

我已经非常仔细地看了`R CMD --help`看，但看不到它——但我可能遗漏了一些东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T20:14:59.320

执行此操作的正常方法是到`cd`目标文件夹并`R CMD build foo`从那里运行。例如来源在`~/pkgsrcs/foo`，你想`tar.gz`在`~/pkgbuild/foo`那时：

```
cd ~/pkgbuild/foo
R CMD build ~/pkgsrcs/foo 
```

将导致`foo_version.tar.gz`.`~/pkgsrcs/foo`

# windows - 使用 app.yaml 托管一个小型静态网站

> ID：11638479
> 
> 赞同：0
> 
> 时间：2012-07-24T20:03:37.733
> 
> 标签：windows, google-app-engine, web-hosting

我目前正在尝试在谷歌的应用引擎上托管一个小型静态网站，但在正确配置 app.yaml 时遇到问题。

我的应用程序目录：

> [文件夹] 应用程序名称
> 
> [子文件夹 1] 静态
> 
> ```
> [subfolder2] css //stylesheets
> 
> [subfolder2] js //scripts
> 
> [subfolder2] img //images
> 
> [subfolder2] files //this contains additional html files
> 
> Index.html
> 
> About.html
> 
> Portfolio.html 
> ```
> 
> 应用程序.yaml
> 
> favicon.ico
> 
> 索引.yaml
> 
> 主文件

我的 app.yaml 目前包含以下信息：

> 应用程序：应用程序名称
> 
> 版本：1
> 
> 运行时：蟒蛇
> 
> api_version: 1
> 
> 处理程序：
> 
> -url: /img/(.*) static_files: static/images/\1 上传: static/images/(.*)
> 
> 处理程序：
> 
> -url: /css/(.*) static_files: static/stylesheet/\1 上传: static/stylesheet/(.*)
> 
> 处理程序：
> 
> -url: /js/(.*) static_files: static/javascript/\1 上传: static/javascript/(.*)
> 
> -url: /(.*.html) static_files: static/\1 上传: static/index.html
> 
> -url: /.* 脚本: main.py

当我尝试运行该页面时，我收到以下错误消息：

> 主机：appengine.google.com
> 
> 解析 yaml 文件时出错：
> 
> 重复的属性“处理程序”。
> 
> 在“I:\5 - HTML\kaoartwork\app.yaml”中，第 14 行，第 1 列
> 
> 2012-07-24 13:00:21（进程退出，代码 1）
> 
> 您现在可以关闭此窗口。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:47:08.273

您在 app.yaml 中声明了 3 次处理程序。
在您的处理程序定义之上只需要一个。

```
application: applicationname
version: 1
runtime: python
api_version: 1

handlers:

<your handlers here> 
```

# iphone - 将 UILabel 添加到视图后如何更改它的元素

> ID：11638480
> 
> 赞同：1
> 
> 时间：2012-07-24T20:03:37.650
> 
> 标签：iphone, objective-c

我有一个程序，我正在制作一个瓷砖网格（都是 UILabel），我需要能够在我的代码中动态更改 UILabel 的文本，我的程序当前的功能是它只是不断创建新的 UILabel所以每次我在这个瓷砖地图上移动时，它都会在旧地图上重新打印一张新地图，而不是改变原来的地图。

```
mapLabels[w][h] = [[UILabel alloc] initWithFrame:CGRectMake(cursor.x, cursor.y, tileSize, tileSize)];

mapLabels[w][h].text = [NSString stringWithFormat:@"%d", map[w][h]];

mapLabels[w][h].backgroundColor = [self FindTileColor:map[w][h]];

mapLabels[w][h].textAlignment = UITextAlignmentCenter;

[self.view addSubview:mapLabels[w][h]]; 
```

我在for循环中设置了所有标签及其位置，例如^ this，有人可以告诉我如何更改标签

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:10:56.330

你应该给每个标签一个标签

```
mapLabels[w][h].tag = whatevertag 
```

然后当你想访问一个你可以做

```
[self.view viewWithTag:whatevertag] 
```

该标签将是一个 int，您可以在每次添加新标签时递增。

或者，为什么不能只使用已有的数组？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:45:33.810

您可以`addSubview` 使用`self.view.subviews`属性访问您添加的视图，该属性是您添加的视图的 NSArray。你可以试试：

```
UILabel * labelref = [self.subviews objectAtIndex:1];
labelref.text = @"mytext"; 
```

# ruby-on-rails-3 - Rails 3 - 将值附加到许多记录的字段

> ID：11638483
> 
> 赞同：1
> 
> 时间：2012-07-24T20:03:53.350
> 
> 标签：ruby-on-rails-3, activerecord

假设我有一堆带有字符串字段的记录。我现在想将一个常量字符串附加到该字段的每条记录。例如，我可能有“Wall”和“Page”作为字段值的记录，但如果我希望它们是“WallPost”和“PagePost”怎么办？我知道我可以循环浏览每条记录并单独更新它，但是有没有更好的方法来做到这一点（`update_all`我认为使用 ）。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:24:36.977

Well, if you need to append/prepend something to your string to every value, you will have to iterate through all values. The `update_all` doesn't let you get the `self` scope of each object, so i believe you will have to cycle and update.

# hadoop - Hadoop 找不到示例 jar 文件

> ID：11638487
> 
> 赞同：2
> 
> 时间：2012-07-24T20:04:02.273
> 
> 标签：hadoop

我正在尝试按照 Hadoop In Action 中的说明以伪分布式模式运行它。它在我使用本地/独立模式时运行。

现在它似乎无法找到 jar 文件的路径。

```
cd $HADOOP_HOME

jps
17559 JobTracker
17466 SecondaryNameNode
17791 TaskTracker
16993 NameNode
17942 Jps

bin/hadoop hadoop-examples-1.0.3.jar wordcount

Warning: $HADOOP_HOME is deprecated.

Exception in thread "main" java.lang.NoClassDefFoundError: hadoop-examples-1/0/3/jar
Caused by: java.lang.ClassNotFoundException: hadoop-examples-1.0.3.jar
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: hadoop-examples-1.0.3.jar.  Program will exit. 
```

我的 CLASSPATH 设置为 $HADOOP_HOME

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:26:24.950

Two things that don't look right:

1.  You should also have DataNode process running check the logs to see what happened to it.

2.  The correct command to use is bin/hadoop jar hadoop-examples-1.0.3.jar wordcount

3.  You should also have HADOOP_CONF_DIR set to point to the directory with 'hdfs-site.xml' and 'core-site.xml'

# algorithm - 有没有日晒算法？

> ID：11638497
> 
> 赞同：1
> 
> 时间：2012-07-24T20:04:57.343
> 
> 标签：algorithm, image-manipulation

我正在寻找一种算法来产生图片的[日晒](http://en.wikipedia.org/wiki/Solarisation)效果。有人有链接或算法吗？我也对其他过滤器感兴趣，例如棕褐色或卡通。对于棕褐色，我在[这里](https://stackoverflow.com/questions/1061093/how-is-a-sepia-tone-created)找到了一些代码。在网上我发现关于这些过滤器的实现的信息不多。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:39:31.370

日晒意味着响应曲线不是单调的（“输出”不是简单地增加亮度，而是开始变亮，变暗，然后随着“输入”变亮而再次增加）。实现它的最简单方法（对于一些简单的值）是作为转换像素值的更一般过程的特例。

这是主例程的一些python-ish伪代码：

```
def transform(image, f):
    for pixel in image:
        pixel = f(pixel) 
```

如果我们选择像素为 0 和 1 之间的值（标准化您拥有的任何值，并且如果您有颜色对待 R、G 和 B 相同），那么您可以通过使用修改 gamma（更改对比度）

```
transform(image, f(x): x^gamma) 
```

对于日晒，您需要一个减少然后再次增加的功能。所以像 1-4x+4x^2：

```
transform(image, f(x): 1-4x+4x^2) 
```

如果这有点不透明，这里有一些数字可以让事情更清楚：

*   如果输入图像为 0（黑色），则输出为 1-4*0+4*0^2 = 1（白色）
*   如果输入图像为 0.5（灰色），则输出为 1-4*0.5+4*0.5^​​2 = 1-2+1 = 0（黑色）
*   如果输入图像为 1（白色），则输出为 1-4*1+4*1^2 = 1（白色）

然后您可以通过向曲线添加一些用户可以更改的参数（例如 a + bx + cx^2）来进一步了解它。

（实际上，它可以更通用 - 它可以有多个峰值或在亮点处变黑 - 例如，有一个带有黑色太阳的 ansel adams 图像。想法是一样的，只需使用更高阶多项式，或更改符号上面的参数中-a -ve c 将使明亮的区域变暗。您可以使用样条曲线而不是多项式。基本上，它是从输入到输出的映射，“上下”，其中有很大的灵活性.. .)。

# html - 同一链接中的 GET 和 POST 值

> ID：11638502
> 
> 赞同：0
> 
> 时间：2012-07-24T20:05:15.067
> 
> 标签：html, post, get

我想要这样的东西：

```
<a href="http://localhost/index.php?get=abc&post=cde&post=efg">link</a> 
```

超链接中的 GET 和 2x POST。我怎样才能做到这一点？什么都不想工作

我在 PHP 中有一个 GET 数组，我想生成一个链接，该链接指向正确的 url 以给我这些 GET 变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T20:08:18.417

您不能有 2 个具有相同名称的 GET 变量。您可以将它们排列成一个数组，如下所示：

```
<a href="http://localhost/index.php?get=abc&post[]=cde&post[]=efg">link</a> 
```

只是为了澄清，这仍然是一个**GET**请求，链接通常不能产生一个**POST**请求，你也不应该尝试不正常地实现它。

编辑：回答 OP 的 calrification。

如果你有一个`$_GET`数组，并且你想生成一个链接让你到达那里，你可以使用**[`http_build_query()`](http://il.php.net/manual/en/function.http-build-query.php)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T20:13:33.253

我认为您不了解 GET 和 POST 在 HTTP 世界中的含义。您放在 URL 的查询字符串中的任何项目都是 GET 参数，您不能有 2 个具有相同名称。POST 参数作为请求的一部分发送，而不是 URL 上的查询字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T17:22:17.090

HTTP 标准中没有任何内容表明您不能发送两个具有相同名称的查询字符串参数。但是，您将无法使用 $_GET 来检索这些值；$_GET 将选择最后一个。相反，您必须手动解析 $_SERVER['QUERY_STRING']。这并不难，当 PHP 必须处理由第三方工具生成的 URL 模式时，我已经做过很多次了。如果您真的很喜欢，您可以让您的查询字符串解析例程生成一个 $_GET 成员作为数组，如果遇到该成员的多个实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T20:32:08.253

GET 和 POST 是 http 操作。

使用 ? 发送值 作为 url 中的分隔符是不同但相关的。例如：

```
foo.com/page.php?val1=1&val2=2 
```

这些值称为[查询字符串](http://en.wikipedia.org/wiki/Query_string)值。

对于 GET 操作，值作为查询字符串值发送。对于 POST 操作，值在POST 请求的*正文中发送。*这就是为什么在向服务器发送大量数据时*必须*使用POST 的原因。（查询字符串有最大长度，HTTP 请求没有。）

您**可以**对包含查询字符串值的 url 执行 POST 操作。这在 Ajax 请求中更为常见，但也可以在表单中完成。只需将`action`url设置`index.php?val1=1&val2=2`为表单的（附加）值将作为 http 正文发送。记得`method="post"`在表格中设置。

请注意，在此示例中，您需要自己创建查询字符串，包括正确转义它。

**在查询字符串值中重复值名称**

通常这会导致两个值都被发送，但服务器会覆盖变量并最终只将最后一个值呈现给客户端软件。

因此，如果您使用诸如

```
<a href="http://localhost/index.php?get=abc&post=cde&post=efg"> 
```

// 它将被 php 和大多数服务器端框架解码为

设置*到*abc

将*帖子*设置为 cde

将*帖子*设置为 efg

结果：2个变量，*get*和*post*

# java - Java / ACM：为什么我的对象不动？

> ID：11638503
> 
> 赞同：0
> 
> 时间：2012-07-24T20:05:14.983
> 
> 标签：java, breakout, acm-java-libraries

我目前正在阅读 Eric Robert 的*Art and Science of Java*，它使用了 ACM Java 库。其中一个练习让学生建立一个 Breakout 的克隆。我遇到了对象动画的问题，所以请看一下这段代码，如果可能的话，告诉我为什么球没有移动。

这是我为隔离给我带来麻烦的行为而编写的代码示例，但是在花了整个晚上之后，我想我最好寻求帮助，因为我根本没有取得任何进展。代码应该实现的只是移动对象。（注意：这不是作业问题。）

我在 setup() 中用球设置了画布，并打算让球在 play() 中移动，但没有任何反应。

该代码也已粘贴到： http: [//pastebin.com/vy3rMrZw](http://pastebin.com/vy3rMrZw)

```
 package codeSamples_II;

import acm.program.*;
import acm.graphics.*;

public class PlayBall extends GraphicsProgram {

private static final int DELAY = 50;
private GOval ball;
private static final int BALL_RADIUS = 10;

public void run() {
    setup();
    play();
}

private void setup() {
    GOval ball = new GOval(0,0, BALL_RADIUS*2, BALL_RADIUS*2);
    ball.setFilled(true);
    add(ball);
}

public void play() {
    while (ball.getY() < 200) {
        ball.move(5, 5);
        pause(DELAY);
    }
} 
```

}

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:54:01.390

哦，呸！我不敢相信我没有第一次看到这个...

这是正在发生的事情。

当您的 PlayBall 类实例化时，您的定义 `private GOval ball`. 这将创建一个指向 GOval 对象的空指针（一个没有值的变量）。

在`setup()`中，您创建一个名为 的**新** `GOval`变量`ball`。这与您在全球范围内创建的**不同。**这个名为的新变量`ball`是一个局部变量，并且只存在于`setup()`方法中。它**与**全局变量不同`ball`。因此，`play()`当您尝试移动时`ball`，您是在尝试移动全局变量`ball`，**这与您在其中创建的局部变量不同`setup()`**。事实上，全局变量`ball`从未实例化（从未创建，或为空），因此您实际上无法对其进行操作。这就是您收到空指针错误的原因。

要修复您的代码，您需要确保将全局变量分配给新球，而不是局部变量。它很容易修复，您只需要删除`GOval`之前的标识符`ball = new Goval( ... )`。您的代码将如下所示：

```
package codeSamples_II;

import acm.program.*;
import acm.graphics.*;

public class PlayBall extends GraphicsProgram {

private static final int DELAY = 50;
private GOval ball;
private static final int BALL_RADIUS = 10;

public void run() {
    setup();
    play();
}

private void setup() {
    ball = new GOval(0,0, BALL_RADIUS*2, BALL_RADIUS*2);
    ball.setFilled(true);
    add(ball);
}

public void play() {
    while (ball.getY() < 200) {
        ball.move(5, 5);
        pause(DELAY);
    }
}
} 
```

如果您仍然不明白，您可能需要阅读变量范围，以便更好地了解正在发生的事情。

# c - 想要 printf 的解决方案

> ID：11638504
> 
> 赞同：6
> 
> 时间：2012-07-24T20:05:18.857
> 
> 标签：c, compiler-construction, printf, format-specifiers

> **可能重复：**
> [如何打印 uint64_t？](https://stackoverflow.com/questions/8132399/how-to-printf-uint64-t)

我想`u_int64_t`用 C 打印。我想知道它的格式说明符吗？我是 C 用户，我想做一个`printf()`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T20:06:20.163

```
#include <inttypes.h>
#include <stdio.h>

uint64_t t = 42;
printf("%" PRIu64 "\n", t); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:11:05.173

您可以将`L`修饰符用于 64 位整数，例如：

```
u_in64_t number;
printf("%Lu", number); 
```

# mysql - #1062 - 键 'PRIMARY' 的重复条目

> ID：11638505
> 
> 赞同：24
> 
> 时间：2012-07-24T20:05:20.180
> 
> 标签：mysql, sql, mysql-error-1062

所以我的 MySQL 数据库的行为有点奇怪。这是我的桌子：

```
Name shares id  price   indvprc
cat   2     4   81      0
goog  4     4   20      20
fb    4     9   20      20 
```

当我尝试插入表格时，我收到了这个 #1062 错误。所以我进一步研究它并意识到当我尝试将值插入到表中时，其中名称和份额值相同，它会返回 #1062 错误。例如，如果我插入：

```
fb    4      6     20   20 
```

它会返回一个错误。但是，如果我将股数更改为 6，它会运行良好。是因为我的专栏之一可能是独一无二的，还是只是 mysql 的东西？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-24T20:12:10.507

您需要删除`shares`作为您的`PRIMARY KEY`OR`UNIQUE_KEY`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-24T20:10:19.193

用于`SHOW CREATE TABLE your-table-name`查看哪一列*是*您的主键。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-02-04T02:34:29.660

1.  确保`PRIMARY KEY`被选中`AUTO_INCREMENT`。
2.  只需启用自动增量：
    **`ALTER TABLE [table name] AUTO_INCREMENT = 1`**
3.  当您执行插入命令时，您必须跳过此键。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-09T02:19:02.463

我通过将“锁定”属性从“共享”更改为“独占”来解决它：

```
ALTER TABLE `table` 
CHANGE COLUMN `ID` `ID` INT(11) NOT NULL AUTO_INCREMENT COMMENT '' , LOCK = EXCLUSIVE; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-24T20:11:27.450

确切的错误信息是什么？#1062 表示重复条目违反列的主键约束 - 归结为您不能在列中有两个相同的值。错误消息应该告诉您哪些列受到限制，我猜是“共享”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-15T10:15:57.040

可能这不是最好的解决方案，但执行以下操作将解决问题

第 1 步：使用以下命令进行数据库转储

```
mysqldump -u root -p databaseName > databaseName.db 
```

找到线

```
ENGINE=InnoDB AUTO_INCREMENT="*****" DEFAULT CHARSET=utf8; 
```

第 2 步：更改`*******`为 mysql 表 ID 的最大 ID。保存此值。

第三步：再次使用

```
mysql -u root -p databaseName < databaseName.db 
```

在我的情况下，当我添加一个手动条目用于将数据输入到其他表中时，我得到了这个错误。一些我们必须如何`AUTO_INCREMENT`使用 mysql 命令将值设置为 max id

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-14T20:03:07.157

由您的域提供商 cpanel 修复数据库。

或者看看你是否没有在 phpMyAdmin 中合并一些东西

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-30T09:01:40.960

由于存在自动增量和主键列，我正在导入的数据库在导入过程中发生冲突。

问题是在 .sql 文件中，表被分割成多个“INSERT INTO”，并且在导入期间这些查询一起执行。

**我的解决方案**是取消选择 Navicat 上的“在每次执行中运行多个查询”，它运行良好

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2017-06-03T19:50:32.330

我使用 DataNucleus 和使用 UTF8 创建的数据库从 mySQL 收到此错误 - 错误是由主键的此注释引起的：

```
@PrimaryKey
@Unique
@Persistent(valueStrategy = IdGeneratorStrategy.UUIDSTRING)
protected String id; 
```

删除表并使用此修复它重新生成它。

```
@PrimaryKey
@Unique
@Persistent(valueStrategy = IdGeneratorStrategy.UUIDHEX)
protected String id; 
```

# javascript - chrome 扩展删除脚本标签

> ID：11638509
> 
> 赞同：5
> 
> 时间：2012-07-24T20:05:56.397
> 
> 标签：javascript, jquery, dom, google-chrome-extension

我到处寻找试图找到这个问题的答案。我希望我的扩展程序禁用页面上的所有 javascript，但允许插入有效的脚本。（所以 chrome.contentSettings.javascript 现在不是一个有效的选项）或者我想要一种方法在它们中的任何一个触发之前删除所有脚本标签（这有点相同）

我尝试将内容脚本插入 runat:document_start 但当时 dom 并不完全存在。尝试在加载状态时在 tabs.onUpdate 上添加内容，但为时已晚，以及 document_end 的内容脚本（所有这些都试图删除脚本标签），但仍然为时已晚。在绝望的行为中，我尝试将 element.innerHTML 的 getter 和 setter 的行为更改为。删除标签，但效果不佳

我试图避免向 location.href 发送 xhr 请求并解析和重新设置内容，因为这太密集了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T12:44:33.483

看到您的评论后，我认为这可能适合您的需求。它的工作原理是获取页面的源，将其渲染到 DOM，禁用所有 JS，然后将其放回页面中。不完全是你想要的，但应该很适合你的情况......

**mainfest.json**

```
{
  "name": "Reload and Kill JS - Using a content script",
  "version": "1.0",
  "permissions": [
    "tabs", "<all_urls>" , "storage"
  ],
  "background": {
    "scripts": ["background.js"]
  },
   "content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["injectedCode.js"],
      "run_at" : "document_start"
    }
  ],
  "minimum_chrome_version" : "20",
  "manifest_version" : 2
} 
```

**背景.js**

```
chrome.storage.local.set({"blockhttp://paez.kodingen.com/":true}); 
```

**注入代码.js**

```
reloadAndKillJS = function() {
    document.documentElement.innerHTML = 'Reloading Page...';

    var xhr = new XMLHttpRequest();

    xhr.open('GET', window.location.href, true);

    xhr.onerror = function() {
        document.documentElement.innerHTML = 'Error getting Page';
    }

    xhr.onload = function() {
        var page = document.implementation.createHTMLDocument("");
        page.documentElement.innerHTML = this.responseText;

        var newPage = document.importNode(page.documentElement,true);

        var nodeList = newPage.querySelectorAll('script');
        for (var i = 0; i < nodeList.length; ++i) {
            var node = nodeList[i];
            if (node.src) {
                node.setAttribute('original-src', node.src);
                node.removeAttribute('src');
            }
            node.innerText = '';
        }

        document.replaceChild(newPage, document.documentElement);
        delete page;

        // Do your thing here
    }

    xhr.send();
}

chrome.storage.local.get("block"+window.location.href,function(items) 
{
    if (items["block"+window.location.href]){
        window.stop();
        reloadAndKillJS();  
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:18:31.973

好吧，真正阻止脚本的唯一方法是使用 contentSettings。所以你需要把你的代码放在其他地方，在另一个域中，因为 contentSettings 规则可以应用于特定的 URL。

让您的内容脚本在文档开始时运行。

**内容脚本.js：**

```
window.stop();
document.all[0].innerHTML = "\
<html>\
    <body>\
        <iframe src=\"chrome-extension://ID/inject.html?url="+encodeURIComponent(location.href)+"\"></iframe>\
    </body>\
</html>"; 
```

**注入.html：**

```
<html>
<head>
<script>
    var frame = document.querySelector('iframe');
    frame.src = location.search.replace('?url=', '');
    frame.onload = function() {
        //Your stuff here
    }
</script>
</head>
<body>
    <iframe></iframe>
</body>
<html> 
```

现在您的代码位于父框架和另一个域中，但它可能会导致一些 CORS 问题，您可以稍后尝试找到一些解决方法。试一试，然后告诉我是否有什么要解决的。

# google-api - 开发外部 Google drive sdk 应用程序

> ID：11638510
> 
> 赞同：1
> 
> 时间：2012-07-24T20:05:57.270
> 
> 标签：google-api, google-drive-api

我对开发一般使用 google drive 和 google api 的应用程序很陌生。我想知道是否有可能有一个应用程序公开保存在谷歌驱动器上的文件，而无需用户登录自己的谷歌驱动器帐户。因此，从某种意义上说，该应用程序将拥有一个帐户并列出当前存储在驱动器上的文档，用户将能够单击它们（通过 Google 选择器而不是驱动器 UI）并查看它们。注意：该应用程序是一个外部 ASP.NET MVC Web 应用程序。我查看了 Google 开发网站上所有可用的身份验证示例（DrEdit 等），但现在它们似乎解决了我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:39:08.080

似乎您可以针对自己的云端硬盘帐户手动运行身份验证，然后将初始访问令牌和刷新令牌存储在您的 CredentialStore 实现中，您的应用程序将继续使用它们。

CredentialStore 来自 Java API - 我确信 .NET API 中有等价物。

# c# - excel doc C#上的空引用

> ID：11638513
> 
> 赞同：0
> 
> 时间：2012-07-24T20:06:10.370
> 
> 标签：c#, web-services, excel, nullreferenceexception

嗨，我不断从下面的代码中收到此错误，想知道是否有人可以提供帮助。

```
error processing excel file: cannot perform runtime binding on a null reference 
```

代码：

```
 private void Import_Click(object sender, RoutedEventArgs e)
    {
        Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();

        // Show open file dialog box
        Nullable<bool> result = dlg.ShowDialog();

        // Process open file dialog box results
        if (result == true)
        {
            // Open document
            string filename = dlg.FileName;

            Microsoft.Office.Interop.Excel.Application vExcelObj = new Microsoft.Office.Interop.Excel.Application();
            try
            {
                Microsoft.Office.Interop.Excel.Workbook theWorkbook = vExcelObj.Workbooks.Open(filename, Type.Missing, true);

                Microsoft.Office.Interop.Excel.Worksheet sheet = theWorkbook.Worksheets[1];  

                string vFirstName = "temp";
                string vLastName = "temp";
                int vIndex = 1;

                while (vFirstName != "")
                {
                    // Change the letters of the appropriate columns here!  
                    // In my example, 'A' is first name, 'B' last name
                    vFirstName = sheet.get_Range("A" + vIndex.ToString()).Value.ToString(); // if i take out the exception handling the error is on this line
                    vLastName = sheet.get_Range("B" + vIndex.ToString()).Value.ToString();

                    this.SaveNewCustomer(vFirstName, vLastName); 

                    vIndex++;

                }
            }
            catch (Exception ex)
            {
                MessageBox.Show("Error processing excel file : " + ex.Message);
            }
            finally
            {
                vExcelObj.Quit();
            }
        }
    }

    private void SaveNewCustomer(string firstName, string lastName) 
    {
        string uri = "http://localhost:8002/Service/Customer";
        StringBuilder sb = new StringBuilder();
        sb.Append("<Customers>");
        sb.AppendLine("<FirstName>" + firstName + "</FirstName>");
        sb.AppendLine("<LastName>" + lastName + "</LastName>");
        sb.AppendLine("</Customers>");
        string NewStudent = sb.ToString();
        byte[] arr = Encoding.UTF8.GetBytes(NewStudent);
        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(uri);
        req.Method = "POST";
        req.ContentType = "application/xml";
        req.ContentLength = arr.Length;
        Stream reqStrm = req.GetRequestStream();
        reqStrm.Write(arr, 0, arr.Length);
        reqStrm.Close();
        HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
        reqStrm.Close();
        resp.Close();
    }

} 
```

该代码只需要一个 excel 文档并尝试将数据发送到我的 Web 服务。

所以我尝试使用以下方法，但它冻结了应用程序：S 没有错误只是挂起。 **编辑尝试：**

```
 while (vFirstName != "")
                {
                        var columnACell = sheet.get_Range("A" + vIndex.ToString());
                        var columnBCell = sheet.get_Range("B" + vIndex.ToString());
                        var columnACellValue = columnACell.Value;
                        var columnBCellValue = columnBCell.Value;

                    if (columnACellValue != null && columnBCellValue != null)
                    {
                        vFirstName = columnACellValue.ToString();
                        vLastName = columnBCellValue.ToString();

                        this.SaveNewStaff(vFirstName, vLastName); //, vPassword

                        vIndex++;
                    }
                }
            } 
```

![在此处输入图像描述](../Images/a60cf5fea2cd73ed3da25dbd39794ebf.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:20:23.723

**编辑 2**

只是拿了代码，然后逐步完成。发现了问题。我想我误解了最初发生的事情。

发生的事情是循环`while (vFirstName != "")`将继续进行，直到`vFirstName`是一个空字符串。但这永远不会发生！原因如下：

*   只要 A 列和 B 列有值，一切都会好起来的。代码将按预期运行。
*   当代码到达没有值的 Excel 行时，它会命中一个空单元格，该单元格将`.Value`设置为`null`. 这会导致异常。

所以这里真正的解决方案是让循环继续运行，直到它到达一个有`null`值的单元格，然后退出。有点像这样：

```
while (true) {
    // Split the satements 
    var columnACell = sheet.get_Range("A" + vIndex.ToString());
    var columnBCell = sheet.get_Range("B" + vIndex.ToString());
    var columnACellValue = columnACell.Value;
    var columnBCellValue = columnBCell.Value;

    if (columnACellValue != null && columnBCellValue != null) {
        vFirstName = columnACellValue.ToString();
        vLastName = columnBCellValue.ToString();

    } else {
        break;
    }

    this.SaveNewCustomer(vFirstName, vLastName);

    vIndex++;

}; 
```

刚刚在我身上测试了这个，它似乎有效。

另请注意，确保您完全退出 Excel，因为调用`Excel.Quit()`通常是不够的。打开任务管理器并检查是否有任何额外的 EXCEL.exe 实例浮动。为了防止这些，我通常在完成 Excel 后将其杀死（比正确释放 Excel 的 COM 对象更容易），如[本文](https://stackoverflow.com/a/1893653/602114)所述。

* * *

**原帖**

听起来这里有几个选项：

*   单元格是空的，这意味着`.Value`它将是`null`.
*   `sheet`是`null`，_
*   `get_Range()`返回`null`——这听起来不太可能。

将该行拆分为单独的语句，看看其中哪一个会引发错误。这将告诉你在哪里进一步寻找。

从你在做什么来判断——搜索列直到找到名字——听起来你在单元格中遇到了空值`Value`。为了解决这个问题，我通常会添加一个快速的 if 语句来测试`Value`.`null`

**编辑**

这是一个示例（可能无法编译），有望修复`null`单元格内的值并帮助查明其他`null`相关问题。用这样的东西替换有问题的行：

```
var columnACell = sheet.get_Range("A" + vIndex.ToString());
var columnBCell = sheet.get_Range("B" + vIndex.ToString())
var columnACellValue = columnACell.Value;
var columnBCellValue = columnBCell.Value;

if (columnACellValue != null && columnBCellValue != null) {
    vFirstName = columnACellValue.ToString(); 
    vLastName = columnBCellValue.ToString();
} 
```

请注意，我假设您的 C# 编译器通过[`var`](http://msdn.microsoft.com/en-us/library/bb383973.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:17:45.700

工作表为空。也许只有 1 个工作表？您正在使用 Worksheets[1] 返回第二个，当然.. :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:28:55.210

尝试拆分读取该值的代码并测试它是否为空。

```
object oName = sheet.get_Range("A" + vIndex.ToString()).Value;
vFirstName = (oName == null ? string.Empty : oName.ToString();
object oLast = sheet.get_Range("B" + vIndex.ToString()).Value;
vLastName = (oLast == null ? string.Empty : oLast.ToString());
if(vFirstName.Length > 0 && vLastName.Length > 0)
     this.SaveNewCustomer(vFirstName, vLastName); 
```

并注意到在您的 SaveNewStaff/Customer(....) 中您关闭了 RequestStream 两次。也许第二次关闭会冻结您的代码。

```
 reqStrm.Close();  
    HttpWebResponse resp = (HttpWebResponse)req.GetResponse();  
    reqStrm.Close();  // <= Already closed before? 
```

# joomla - jomsocial 团体和活动整合

> ID：11638514
> 
> 赞同：4
> 
> 时间：2012-07-24T20:06:11.150
> 
> 标签：joomla, joomla-extensions, joomla2.5

我正在尝试将 jomsocial 事件与 jomsocial 团体结合起来。我想要实现的是在创建事件时自动创建一个组。

有人会对此类功能有一些提示吗？我想到的方法是利用来自 jomsocial API 的 onEventCreate($event) 函数来调用组创建机制。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T07:32:34.163

是的，这就是我要采取的方法。

您可以在 groups.php 控制器中找到方法 save()。您已经获得了实现此功能所需的所有代码。

粗略的代码：

```
$my         =& CFactory::getUser();
$config         =& CFactory::getConfig();
$group          =& JTable::getInstance( 'Group' , 'CTable' );

$group->name        = $name;
$group->description = $description;
$group->categoryid  = $categoryId; // Category Id must not be empty and will cause failure on this group if its empty.
$group->website     = $website;
$group->ownerid     = $my->id;
$group->created     = gmdate('Y-m-d H:i:s');
$group->approvals   = 0;

$params         = new CParameter( '' );
// Here you need some code from private _bindParams()

$group->params      = $params->toString();
$group->published   = ( $config->get('moderategroupcreation') ) ? 0 : 1;
$group->store();

// Other useful stuff:
// - store the creator / admin into the groups members table
// - add into activity stream 
```

# jquery - ruby on rails ajax 错误处理

> ID：11638516
> 
> 赞同：0
> 
> 时间：2012-07-24T20:06:14.977
> 
> 标签：jquery, ruby-on-rails, ajax, error-handling

我正在使用 ruby​​ 开始使用 ajax，我的问题是当我通过刷新提交表单时，我无法收到错误消息

控制器

```
class InvitesController < ApplicationController

    def request_invite
        render_404 unless request.xhr?

        @invitation = Invite.new(params[:invite])
        if @invitation.save
            @return = { :error => false, :response => "OK" }
        else
            @return = { :error => true, :response => "BAD" } 
        end
        render :json => ActiveSupport::JSON.encode( @return ) 
    end

end 
```

所以现在我有自定义错误，但我想用表单返回的实际错误替换“BAD”......

模型

```
class Invite < ActiveRecord::Base

    validates :email, :presence => true, :uniqueness => true

    validates_format_of :email, :with => /^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i

end 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:30:46.193

尝试这样的事情：

```
@return = { :error => true, :response => @invitation.errors.full_messages.join(", ") } 
```

# r - R：在彼此范围内匹配向量的分量

> ID：11638517
> 
> 赞同：2
> 
> 时间：2012-07-24T20:06:17.357
> 
> 标签：r

我有两个不同的向量，我从中索引了完美匹配的所有可能组合：

```
starts <- c(54, 54, 18, 20, 22, 22, 33, 33, 33, 37, 42, 44, 44, 51, 11, 17, 19, 19, 19, 19, 22, 23, 23, 24, 24)
ends <- c(22, 14, 14, 14, 14, 14, 14, 14, 14, 24, 24, 25, 25, 25, 25, 26, 26, 29, 30, 31, 32, 33, 33, 33, 33)

which(outer(starts, ends, "=="), arr.ind=TRUE) 
```

现在，我不想尝试找到完全匹配，而是想找到彼此处于一定范围内的组件组合：比如 +/- 5。我已经制定了一个范围 (-5:5) 并尝试引入它作为一个代替“==”的函数，但它并没有真正奏效。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:12:32.973

您可以通过编写一个进行比较的小辅助函数来做到这一点：

```
cmp <- function(x, y, cutoff=5){abs(x-y) <= cutoff}

which(outer(starts, ends, cmp), arr.ind=TRUE)

       row col
  [1,]   3   1
  [2,]   4   1
  [3,]   5   1
  [4,]   6   1
  [5,]  16   1
  [6,]  17   1
  [7,]  18   1
       ... etc. 
```

# model-view-controller - 路线错误

> ID：11638521
> 
> 赞同：0
> 
> 时间：2012-07-24T20:06:28.010
> 
> 标签：model-view-controller, scala, playframework, routes, akka

我是新手，scala 和 akka，使用 sbt 构建它并通过在 Web 浏览器中加载 localhost 来编译它时出现错误。我得到的浏览器错误是：

对路由的编译错误引用不明确；它通过 import controllers._ 和 import models._ 在同一范围内导入两次。

```
In /Users/Louis/Documents/play_actors/app/views/form.scala.html at line 9.
5@main(Html("Calculate Pi")) {
6    
7    <h2>Calculate Pi</h2>
8    
9    @helper.form(action = routes.Pi.submit) { 
10        
11        <fieldset>
12            <legend>Pi Options</legend> 
```

我不确定为什么会收到此错误。我从 Activity.scala 调用 html 文件：

```
package controllers

import play.api._
import play.api.mvc._

import views._

object Application extends Controller {

    def index = Action {
        Ok(html.form(Pi.optionsForm))
    }

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:52:44.543

Play 会生成许多 Scala 文件，包括基于您的`routes`文件和模板的文件。`target/scala.2.9.1/src_managed`如果您在尝试编译应用程序后查看该目录，您应该会找到一个`views.html`包含模板的 Scala 版本的包和一个包含`routes`.

除了许多 Play 自己的包外，Play 模板会自动导入控制器和模型包中的所有内容。这包括从您的路由文件生成的路由类，它允许您以显示的方式引用它们。

我假设您的模型包中必须有一些对象或类共享名称路由，因此会产生编译器无法解决的冲突。

# php - 使用 Ajax 的 Wordpress 自定义登录不适用于 IE

> ID：11638527
> 
> 赞同：0
> 
> 时间：2012-07-24T20:06:48.057
> 
> 标签：php, ajax, wordpress, internet-explorer, login

我正在使用 wp_signon 函数在 wordpress 中进行我自己的自定义登录。每当用户输入他的凭据时，就会使用 ajax 调用另一个页面。在该页面中，我检查用户凭据，并使用 wp_signon 功能登录用户。然后发送确认，当前页面捕获它并显示用户已成功登录。该代码在 Chrome 和 Firefox 中有效，但在 IE 中无效。这是 AJAX 文件中的代码。当前页面收到一条回复说用户已登录，但是当我刷新它时仍然显示用户未登录。:( 纠结了好几天。请帮帮我

```
 $creds = array();
    $creds['user_login'] = $user;
    $creds['user_password'] = $password;
    $creds['remember'] = $remember;
    $user = wp_signon( $creds, true );
    if ( is_wp_error($user) ){
        echo "Invalid Username or Password";
    }
    else {
        $current_user = wp_get_current_user();
        $userid=$current_user->ID;
        mysql_pconnect($dbhost,$dbuser,$dbpass) or die ("Unable to connect to MySQL server");
        $dbquerry= 'select `login` from wp_users where user_login="'.$_GET['user'].'"';

        $result=mysql_db_query($dbname,$dbquerry);
        list($login)=mysql_fetch_array($result);
        if($login==1) {
            echo "change";
        }
        else {
            echo "success";
        }
    } 
```

此代码在 Chrome 和 firefox 中运行良好，在 IE 中运行良好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:34:13.590

终于找到了罪魁祸首并解决了问题:) IE 缓存 AJAX 请求。因此，每当您使用 AJAX 调用来设置登录 cookie 时，您都会在 IE 中遇到麻烦。谨防！！！！！在您的 ajax 调用中，在 URL 中填写一个随机数，这样 IE 就不会捕获

在 Ajax 调用中插入了这个

```
 var d = new Date();
    var n = d.getTime();
    req.open("GET", "something.php?user"+username+"&x="+n); 
```

通过这样做 IE 不会缓存 AJAX 请求

# html - 在 IE7 上导致问题的内联块

> ID：11638532
> 
> 赞同：0
> 
> 时间：2012-07-24T20:06:55.703
> 
> 标签：html, internet-explorer-7, css

几个月前，我为一家小公司做了一个网站。他们对此非常满意，等等。现在，我将为同一家公司做一个小型电子商务，并将其集成到网站库中。但是，我用 ie7 看它，发现了一些可怕的东西。导航栏显示不正确。通常在水平线上列出的链接在垂直线上。如何解决这个问题，这很紧急？

这是导航的CSS：

```
.nav-ul  {
    margin: 0;
    padding: 0;
    position: absolute;
    left: -14px;
    top: 120px;
    background: #000;
    height: 31px;
    z-index:  2;
    width: 104%;
    background-image: nappulat/tyhja.png;
    background-repeat: repeat;
    text-align: center;
}

.nav-ul li {
    display: inline-block;
    padding: 0;
    margin: 0;
    width: 128px;
    height: 31px;
}

.nav-ul li:hover {
    background-color: #b2080b;
}

.nav-ul li a {
    text-decoration: none;
    color: #fff;
    font-size: 14px;
    font-family: Verdana,  Geneva,  sans-serif;
    display: inline-block;
    padding: 0;
    margin: 0;
    width: 128px;
    height: 31px;
} 
```

我知道有条件的评论，他们会给我答案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:14:59.670

IE7（和 IE6）在`inline-block`.

主要错误是它仅适用于具有默认`display`样式的元素`inline`。

`<li>`标签的默认样式为`list-item`，因此`display:inline-block;`在 IE7 中不适用于它们。

有两种解决方案：

1.  在（或代替你的）内添加一个`<span>`或类似的内联标签，并将其样式设置为。这可能会或可能不会对您产生预期的效果，具体取决于您要达到的目标。`<li>``<li>``inline-block`

2.  使用 IE CSS hack。`display:inline;`如果你设置和.你可以让 IE7 做你想做的事`zoom:1;`。这种组合将以应该工作的方式在 IE6 和 IE7 中`inline-block`工作。不过，您需要找到一种方法让这种情况仅在 IE6/7 中发生，因为显然您希望它`inline-block`在其他浏览器中使用。有多种 CSS hack 可以针对这些浏览器，或者您可以使用条件注释。无论哪种方式，它都很混乱，但如果你想支持 IE7，这是唯一真正的解决方案。

（这带来了第三个选项，即在您的站点中放弃对 IE7 的支持......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:11:41.337

根据[http://caniuse.com/inline-block](http://caniuse.com/inline-block)在 IE 7 中不完全支持 （仅适用于默认内联的元素）。它在这里提到了替代方案... [http://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/](http://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/)

如果您的版本在 IE7 中看起来不错，并且在较新的浏览器中看起来更好，那么条件注释会对您有所帮助，因此您可以为不同的浏览器版本使用不同的代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:56:06.077

```
display: inline-block;
zoom:1;
*display: inline; 
```

应该管用。确保您有一个有效的 DOCTYPE 集。[如果还有其他触发hasLayout](http://msdn.microsoft.com/en-us/library/bb250481%28v=vs.85%29.aspx)的东西，您可以删除“zoom:1” 。

# php - 使用 CakePHP 更新用户电子邮件和密码

> ID：11638534
> 
> 赞同：0
> 
> 时间：2012-07-24T20:07:02.817
> 
> 标签：php, cakephp

我有一个带有用户注册的 CakePHP 应用程序。在用户页面上，我希望他们能够更新他们的电子邮件和密码。这是我的`User`模型：

```
<?php

class User extends AppModel {
    public $name = 'User';
    public $validate = array(
        'username' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'A username is required'
            ),
            'range' => array(
                'rule' => array('between', 4, 20),
                'message' => 'Between 4 and 20 characters'
            ),
            'characters' => array(
                'rule' => array('alphaNumeric'),
                'message' => 'Alphanumeric characters only'
            ),
            'unique' => array(
                'rule' => array('isUnique'),
                'message' => 'This username is taken'
            )
        ),
        'email' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'An email is required'
            ),
            'validEmail' => array(
                'rule' => array('email'),
                'message' => 'Please provide a valid email'
            ),
            'range' => array(
                'rule' => array('between', 5, 64),
                'message' => 'Between 5 and 64 characters'
            ),
            'unique' => array(
                'rule' => array('isUnique'),
                'message' => 'This email has already been used'
            )
        ),
        'password' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'A password is required'
            ),
            'range' => array(
                'rule' => array('between', 5, 64),
                'message' => 'Between 5 and 64 characters'
            ),
        )
    );

    public function beforeSave() {
        if (isset($this->data[$this->alias]['password'])) {
            $this->data[$this->alias]['password'] = AuthComponent::password($this->data[$this->alias]['password']);
        }
        return true;
    }

} 
```

我正在使用表单助手来创建表单：

```
<p>Modify your account settings</p>
<?php echo $this->Session->flash(); ?>
<?php
    echo $this->Form->create('User');
    echo $this->Form->input('currentPassword', array('type' => 'password'));
    echo $this->Form->input('username', array('disabled' => 'disabled', 'value' => $username));
    echo $this->Form->input('email');
    echo $this->Form->input('newPassword', array('type' => 'password'));
    echo $this->Form->end('Update');
?> 
```

我将如何检查当前密码是否有效，检查新的电子邮件和密码是否通过验证规则，然后从我的控制器中更新用户表中的用户记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:43:23.407

添加新用户 - UsersController.php：

```
public function add() {
        if ($this->request->is('post')) {
            $this->User->create();
                    if ($this->User->save($this->request->data)) {
                $this->Session->setFlash(__('Registration complete. :)'));
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash(__('Error... Please try again.'));
            }
        }
    } 
```

编辑用户 - UsersController.php：

```
public function edit($id = null) {
    $this->User->id = $id;
    if (!$this->User->exists()) {
        throw new NotFoundException(__('Invalid user'));
    }
    if ($this->request->is('post') || $this->request->is('put')) {
        if($this->Auth->user('password') == AuthComponent::password($this->request->data['User']['password']){
        if ($this->User->save($this->request->data)) {
            $this->Session->setFlash(__('The user has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The user could not be saved. Please, try again.'));
        }
    }}else{
         $this->Session->setFlash(__('Incorrect password.'));
        }
         else {
        $this->request->data = $this->User->read(null, $id);
    }
} 
```

只需注意 {}。:D

如果不起作用，请尝试

```
if($this->Auth->user('password') == $this->request->data['User']['password'])... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-11T13:14:22.347

对于那些想要一些东西而不改变模型并且不显示散列密码的人：[使用或不使用密码更新用户 - CakePHP](https://stackoverflow.com/questions/33628742/updating-user-with-or-without-password-cakephp/33630064#33630064)

TL;博士：

```
// add in your view `app/View/Users/edit.ctp`
// a 'fake' field you'll only use on the controller
echo $this->Form->input('new_password'); 
```

* * *

```
// add in your controller `app/Model/User.php`
// if we have a new password, create key `password` in data
if(!empty($new_password = $this->request->data['User']['new_password']))
  $this->request->data['User']['password'] = $new_password;
else // else, we remove the rules on password
  $this->User->validator()->remove('password'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-03T07:02:43.897

答：

这如何检查用户输入的密码是否与数据库中存储的密码相同？——詹姆斯道森

您可以在模型中添加以下功能。

```
function check_user($check) {
  if(!empty($check["EMail"]) && !empty( $_POST['data']['User']['password'])) 
    {
        $user = $this->find('first',array('conditions'=>array('User.EMail'=>$check["EMail"],'User.IsVerified'=>1)));
      if(empty($user)) {
        return FALSE;
       }
        $Encrypted = md5($_POST['data']['User']['password']);
        if($user['User']['password'] != ($Encrypted)) {
        return FALSE;
        }
    }
        return TRUE;
    } 
```

并验证规则

```
'EMail' => array(
            'email' => array(
                'rule' => array('email'),
                'message' => 'Please enter valid email address..!',
                //'allowEmpty' => false,
                //'required' => false,
                //'last' => false, // Stop validation after this rule
                'on' => 'login', // Limit validation to 'create' or 'update' operations
            ),

            'check_user'=>array(
                'rule'=>'check_user',
                'message'=>'Either your Username or Password is invalid',
                'on' => 'login', // Limit validation to 'create' or 'update' operations
                'last'=>TRUE,

            ),

        ), 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T20:22:29.473

您还应该提供第二个密码字段以进行确认。这通常用于密码更新。为此，如果您想检查当前密码，请参阅此行为以了解如何完成此操作：http: [//www.dereuromark.de/2011/08/25/working-with-passwords-in-cakephp/](http://www.dereuromark.de/2011/08/25/working-with-passwords-in-cakephp/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-05T10:08:47.180

```
protected function _update_password() {

        $password_error = false;

        /**
         * Handle post
         */
        if (($this->request->is('post') || $this->request->is('put')) && isset($this->request->data['User'])) {

            $old_pass_in_db = $this->User->read('password', $this->Session->read('Auth.User.id'));

            $old_pass_in_post = $this->Auth->password($this->request->data['User']['old_password']);

            //assign post data
            $this->User->set($this->request->data);

            //validate
            if (trim($old_pass_in_post) != trim($old_pass_in_db['User']['password'])) {
                $this->User->validationErrors['old_password'] = __("Old password do not match.");
            } else {
                unset($this->User->validationErrors['old_password']);
            }

            if ($this->User->validates(array('fieldList' => array('password', 'password_confirm'))) && ($old_pass_in_post == $old_pass_in_db['User']['password'])) {
                $this->User->id = $this->Session->read('Auth.User.id');
                if ($this->User->save(array('password', $this->Auth->password($this->request->data['User']['password'])), false)) {
                    $this->Session->setFlash(__('Password updated successfully.', true), 'default', array('class' => 'alert alert-success'));
                } //end save
            } else {
                $password_error = true;
            }
        }

        $this->set('password_error', $password_error);
    } 
```

# android - 执行 adb install 后 .apk 文件名更改

> ID：11638542
> 
> 赞同：0
> 
> 时间：2012-07-24T20:07:54.523
> 
> 标签：android, android-manifest, apk, adb

如果我做：

adb install myAppRelease-2012-07-24_14-35-14.apk

当我尝试在安装后引用实际的 .apk 文件时

```
PackageManager pm = this.getPackageManager();
for (ApplicationInfo app : pm.getInstalledApplications(PackageManager.GET_META_DATA)) {
    Log.d("PackageList", "package: " + app.packageName + ", sourceDir: " + app.sourceDir);
    String appName = "myAppRelease"
    if(app.packageName.contains("myApp")){
        if(app.sourceDir.contains(appName)){
            apkVersion = app.sourceDir.substring(app.sourceDir.indexOf(appName), app.sourceDir.indexOf(apk));
        }
    }
} 
```

我看到的是这样的：

```
07-24 14:46:40.190: D/PackageList(7421): package: myApp, sourceDir: /data/app/myApp-1.apk 
```

我期望看到的是：

```
07-24 14:46:40.190: D/PackageList(7421): package: myApp, sourceDir: /data/app/myAppRelease-2012-07-24_14-35-14.apk 
```

看来它使用

```
android:label="myApp"
android:versionCode="1" 
```

从清单文件。

我的问题是，为什么它不保留原始的 .apk 文件名？我依靠 .apk 文件名来显示我的应用程序的版本信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:49:21.733

你不能依赖这个，它绝对不使用'-'后面的数字的版本代码。特别是对于较新的版本，应用程序可以移动到 SD 卡，或向前锁定（又名“应用程序加密”），因此磁盘上的实际文件可能与原始文件有很大不同。

用于`PackageManager`获取版本信息，保证正确且最新。更改您的构建系统以更新版本代码，并可能在“关于”对话框或类似对话框中显示它，以便用户轻松报告它。

# grails - Grails/GORM belongsTo Back 引用命名

> ID：11638549
> 
> 赞同：1
> 
> 时间：2012-07-24T20:08:35.753
> 
> 标签：grails, grails-orm, belongs-to, grails-domain-class

我在 Grails 中创建了域，以专注于我们流程背后的业务逻辑。在某些情况下，这会转化为 GORM 生成的超过 Oracle 限制的反向引用并生成“ORA-00972：标识符太长”错误。我能够使用该`static mapping`块来重新映射长表名，但我不知道如何为生成的反向引用做同样的事情。

在不暴露任何公司机密信息的情况下，以下示例说明了该问题。

```
class UnfortunatelyLongClassName {
    static mapping = {
        table "long_class" // This works great!
    }

    List<Part> parts

    static hasMany = [parts:Part]
}

class Part {
    String name

    // This generates UNFORTUNATELY_LONG_CLASS_NAME_ID and causes the error
    static belongsTo = [UnfortunatelyLongClassName]
} 
```

生成的表的粗略 DDL...

```
LONG_CLASS (
  ID number(19, 0) not null,
  VERSION number(19, 0) not null,
  primary key (id),
);

PART (
  ID number(19, 0) not null,
  VERSION number(19, 0) not null,
  NAME varchar2(255),
  PARTS_IDX number(10, 0),
  UNFORTUNATELY_LONG_CLASS_NAME_ID number(19, 0) not null,
  primary key (id),
  foreign key FK589895C372DB95A (UNFORTUNATELY_LONG_CLASS_NAME_ID) references UNFORTUNATELY_LONG_CLASS_NAME(ID)
); 
```

**是否有任何静态映射命令或其他 Grails/GORM 技巧来创建更短的标识符？**

如果我使用以下...

```
static belongsTo = [unfortunatelyLongClassName:UnfortunatelyLongClassName]

static mapping = {
    unfortunatelyLongClassName column:"ulcn_id"
} 
```

我收到以下错误...

```
| Error 2012-07-24 17:53:49,060 [pool-7-thread-1] ERROR context.ContextLoader  - Context initialization failed
Message: Error creating bean with name 'pluginManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is org.codehaus.groovy.grails.exceptions.InvalidPropertyException: No property found for name [unfortunatelyLongClassName] for class [class mycompany.myproject.mypackage.Part]
   Line | Method
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread

Caused by InvalidPropertyException: No property found for name [unfortunatelyLongClassName] for class [class mycompany.myproject.mypackage.Part]
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread
| Error 2012-07-24 17:53:49,094 [pool-7-thread-1] ERROR context.GrailsContextLoader  - Error executing bootstraps: Error creating bean with name 'pluginManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is org.codehaus.groovy.grails.exceptions.InvalidPropertyException: No property found for name [unfortunatelyLongClassName] for class [class mycompany.myproject.mypackage.Part]
Message: Error creating bean with name 'pluginManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is org.codehaus.groovy.grails.exceptions.InvalidPropertyException: No property found for name [unfortunatelyLongClassName] for class [class mycompany.myproject.mypackage.Part]
   Line | Method
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread

Caused by InvalidPropertyException: No property found for name [unfortunatelyLongClassName] for class [class mycompany.myproject.mypackage.Part]
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:35:13.683

使用 Map 语法`belongsTo`生成反向链接并通过映射重命名它：

```
static belongsTo = [unfortunatelyLongClassName:UnfortunatelyLongClassName]

static mapping = {
    unfortunatelyLongClassName column:"ulcn_id"
} 
```

* * *

`belongsTo`还应该使用您的 Domain 类中的字段，因此您可以这样做：

```
UnfortunatelyLongClassName unfortunatelyLongClassName

static belongsTo = UnfortunatelyLongClassName

static mapping = {
    unfortunatelyLongClassName column:"ulcn_id"
} 
```

* * *

由于以前的版本会抛出缺少属性的异常，您可以尝试使用短名称创建属性并跳过映射块：

```
UnfortunatelyLongClassName ulcn

static belongsTo = UnfortunatelyLongClassName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:42:33.357

如果您尝试重命名 long 类的 id 怎么办？像：

```
static mapping = {
    id name: 'simple_id_name'
} 
```

# java - Android：FastScrolling SectionIndexer getSections() 仅调用一次

> ID：11638551
> 
> 赞同：7
> 
> 时间：2012-07-24T20:08:39.150
> 
> 标签：java, android, listview, scroll

我创建了一个`ListView`正在使用`FastScroll`. （参见图片）当用户单击以下任何按钮（即所有曲目、艺术家、专辑）时，每次调用以下自定义 ArrayAdater

```
ArrayAdapter<String> adapter = new ScrollIndexListAdapter(Listing.this, elements); 
//Code for ScrollIndexListAdapter is below 
```

并且更新了相同的 ListView。

![在此处输入图像描述](../Images/9031241b2b34cd286df3c1596fdb183c.png)

**问题**：根据我在 Android 中的调查，该`getSections()`方法仅被调用一次（即仅在**第**一次调用 ScrollIndexListAdapter 时）。

这一次，这些部分已被填充，并且 fastScrolling 完美运行。

但是当我通过单击 Artists/Album 更新 ListView 时，`getSections()`不会调用该方法。因此使用了较旧的部分，FastScrolling 仍然显示旧字母的预览。

那么，如何在每次更新 ListView 时更新部分？

有一种`setSections()`方法，但我无法找到如何使用它。

ScrollIndexListAdapter 类的代码：

```
public class ScrollIndexListAdapter extends ArrayAdapter implements
        SectionIndexer {

    // Variables for SectionIndexer List Fast Scrolling
    HashMap<String, Integer> alphaIndexer;
    String[] sections;
    private static ArrayList<String> list = new ArrayList<String>();

    public ScrollIndexListAdapter(Context context, ArrayList<String> list) {
        super(context, android.R.layout.simple_list_item_1, android.R.id.text1,
                list);
        this.list.clear();
        this.list.addAll(list);
        /*
         * Setting SectionIndexer
         */
        alphaIndexer = new HashMap<String, Integer>();
        int size = list.size();
        for (int x = 0; x < size; x++) {
            String s = (String) list.get(x);
            // Get the first character of the track
            String ch = s.substring(0, 1);
            // convert to uppercase otherwise lowercase a -z will be sorted
            // after upper A-Z
            ch = ch.toUpperCase();
            if (!alphaIndexer.containsKey(ch)) {
                alphaIndexer.put(ch, x);
            }
        }
        Set<String> sectionLetters = alphaIndexer.keySet();
        // create a list from the set to sort
        ArrayList<String> sectionList = new ArrayList<String>(
                sectionLetters);
        Collections.sort(sectionList);
        sections = new String[sectionList.size()];
        sectionList.toArray(sections);
    }

    /*
     * Methods for AphhabelIndexer for List Fast Scrolling
     */
    @Override
    public int getPositionForSection(int section) {
        String letter = (String) sections[section];
        return alphaIndexer.get(letter);
    }

    @Override
    public int getSectionForPosition(int position) {
        String letter = (String) sections[position];
        return alphaIndexer.get(letter);
    }

    @Override
    public Object[] getSections() {
        return sections;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-17T19:19:51.817

似乎最新的 FastScroll 版本没有这个问题。但是，在你的情况下，有一个转机。将适配器设置为 ListView 时，禁用和启用快速滚动。请看下面的代码：

```
 adapter = new ScrollIndexListAdapter(this, data);
            listView.setFastScrollEnabled(false);
            listView.setAdapter(adapter);
            listView.setFastScrollEnabled(true); 
```

# ruby-on-rails - 在 HATBM 关系中具有相同起始名称的迁移的字母顺序是什么？

> ID：11638552
> 
> 赞同：1
> 
> 时间：2012-07-24T20:08:39.567
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我只是想确保我走在正确的轨道上，但是在为使用相同名称的 HABTM 创建迁移时，例如：

```
class Dog < ActiveRecord::Base
  has_and_belongs_to_many :dog_categories
end

class DogCategory < ActiveRecord::Base
  has_and_belongs_to_many :dogs
end 
```

我在想这个…………

```
rails g migration dogs_dog_categories dog_id:integer dog_category_id:integer 
```

这对我来说看起来很奇怪，但迁移/表应该是这样的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:24:14.573

根据[导轨指南](http://guides.rubyonrails.org/association_basics.html#updating-the-schema)：

> 模型名称之间的优先级是使用字符串的 < 运算符计算的。这意味着如果字符串的长度不同，并且在与最短长度相比时字符串相等，则认为较长的字符串比较短的字符串具有更高的词汇优先级。例如，由于名称“paper_boxes”的长度，我们希望表“paper_boxes”和“papers”生成连接表名称“papers_paper_boxes”，但实际上它生成的连接表名称“paper_boxes_papers”（因为下划线“_”在常用编码中按字典顺序小于“s”）。

所以，我认为应该是`dog_categories_dogs`

# javascript - jQuery插件重新排序块以节省空间？

> ID：11638553
> 
> 赞同：3
> 
> 时间：2012-07-24T20:08:47.217
> 
> 标签：javascript, jquery, html, jquery-plugins

所以问题是我的网站中有一些块（浮动 div），我希望能够重新排序，以减少它们占用的空间。我的每个块的宽度都是 x、2x 或 3x（x 是一个数字）。它们的宽度永远不会改变，但它们的高度可以改变。我知道我可以创建一些 JavaScript 代码来处理这个问题，但是因为我已经在使用 jQuery 并且我知道那里有大量的 jQuery 插件，所以我首先来这里询问是否已经有一个插件可以做到这一点，为了节省一些时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:13:31.333

jquery 的砌体插件[http://masonry.desandro.com/](http://masonry.desandro.com/)甚至更好的同位素[http://isotope.metafizzy.co/](http://isotope.metafizzy.co/)

# dependencies - 带有文件目录的 Gradle 依赖项

> ID：11638555
> 
> 赞同：5
> 
> 时间：2012-07-24T20:08:58.250
> 
> 标签：dependencies, gradle

我正在为 jboss ear 应用程序编写一个 EJB jar 模块。我正在使用 gradle，我不想尝试从 JBoss 声明 jar 在运行时依赖的所有不同依赖项。有没有办法声明对目录树中所有文件的依赖关系。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-24T20:08:58.250

在`build.gradle`文件的依赖项部分，您可以使用[`FileTree`](http://www.gradle.org/docs/current/javadoc/org/gradle/api/file/FileTree.html)参考。例如：

```
dependencies {
    compile fileTree(dir: "${jbossDir}/client", includes: ['*.jar'])
} 
```

这将包括 JBoss/client 目录中的所有 JAR 文件作为编译时依赖项。

# xamarin.ios - 编译单点触控绑定库时遇到问题

> ID：11638558
> 
> 赞同：2
> 
> 时间：2012-07-24T20:09:04.763
> 
> 标签：xamarin.ios, xcode4.3, ld, static-linking, ios5.1

我一直在尝试绑定一个名为[Scandit](http://www.scandit.com/support/getting-started-with-scandit-sdk-for-ios/)的库，用于从图像中扫描条形码。

到目前为止，我一直没有成功。图书馆说它支持 armv6 arm7 和 i386。但我无法建造它。

> lipo -info libscanditsdk-iphone-2.1.17.a
> fat 文件中的架构：libscanditsdk-iphone-2.1.17.a 是：armv6 armv7 i386

这是我的构建输出

[https://gist.github.com/4ee195063b61ae292ea3](https://gist.github.com/4ee195063b61ae292ea3)

这是我的 LinkWith 文件的样子

```
using System;
using MonoTouch.ObjCRuntime;

[assembly: LinkWith ("libmeScanditWrapper.a", LinkTarget.ArmV7 | LinkTarget.ArmV6
                     ,ForceLoad = true, IsCxx=true
                     ,Frameworks="CoreVideo CoreGraphics AudioToolbox AVFoundation CoreMedia QuartzCore SystemConfiguration"
                     ,LinkerFlags="-lz -liconv -lstdc++"
                     )] 
```

我可以使用他们提供的示例项目在我的设备上本地使用该库，但我根本无法编译它。使用 LinkTarget.ArmV6。如果我删除它并离开 LinkTarget.ArmV7 那么它将编译但它不会工作即使在我制作的简单测试库中，任何绑定函数都不会工作。

如果我错了，请纠正我这些意味着我的手机需要 armv6？

这就是为什么我可以让示例库使用 armv6 工作。

如果是这种情况，我需要知道是否有人知道为什么当 lib 支持它时它不会使用 armv6 支持构建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:29:50.687

> 如果我错了，请纠正我这些意味着我的手机需要 armv6？

较新的 iPhone 使用 armv7，但可以执行 armv6 代码。

```
Assertion failed: (_mode == modeFinalAddress), function finalAddress, file /SourceCache/ld64/ld64-127.2/src/ld/ld.hpp, line 588.
0  0x100011c51  __assert_rtn + 81
1  0x10008d45c  ld::tool::OutputFile::addressOf(ld::Internal const&, ld::Fixup const*, ld::Atom const**) + 172
2  0x10008f361  ld::tool::OutputFile::applyFixUps(ld::Internal&, unsigned long long, ld::Atom const*, unsigned char*) + 369
3  0x10008c3b7  ld::tool::OutputFile::writeOutputFile(ld::Internal&) + 807
4  0x100085079  ld::tool::OutputFile::write(ld::Internal&) + 153
5  0x1000121ab  main + 1147
collect2: ld returned 1 exit status 
```

那是Apple提供的链接器崩溃。这是不常见的，很可能意味着它被喂食了一些损坏的东西。

您正在显示`lipo`on的输出，`libscanditsdk-iphone-2.1.17.a`但您正在使用`[LinkWith]`on `libmeScanditWrapper.a`。两人之间发生了什么？

# c++ - 为什么在我的 OpenGL 引擎中没有从 MyGUI 获得任何屏幕输出？

> ID：11638560
> 
> 赞同：1
> 
> 时间：2012-07-24T20:09:13.943
> 
> 标签：c++, user-interface, opengl, opengl-3

我正在尝试将 MyGUI 3.2.0 集成到我的 OpenGL 3 引擎中，但我遇到了一些问题。我的 OpenGL 引擎不使用在 OpenGL 3.3 中弃用/删除的任何 OpenGL 函数。我已经构建并链接了所有内容，并进行了一些处理以确保 FreeType 库最终位于正确的位置，以便 MyGUI 可以找到它们。

我按照快速入门指南进行了调整以使用 OpenGLPlatform，但我跳过了输入部分，以便首先显示它。我编写了图像加载器界面，它可以工作，但如果这有什么不同，我现在将保存功能留空。我没有收到任何编译错误或崩溃。日志文件中没有任何错误。我已经阅读了常见问题解答，我的情况与最后两个条目相同，但是他们提到的函数对于 OpenGLPlatform 不存在，因此它们可能不适用。

有一次，我的随机三角形看起来像是 MyGUI 的纹理从我从引擎中绘制的最后一个网格中伸出来，但我发现它们只是被我之前为网格绑定的着色器所吸引，它们消失了在我解开着色器之后。我检查了 gDEBugger 并且从 MyGUI 代码加载了顶点缓冲区和纹理，所以我很确定它们加载正确。我知道纹理至少可以正确加载，并且顶点缓冲区看起来没有损坏或任何东西。我还单步执行了代码，它似乎在绘制一些东西，但我没有从 MyGUI 的屏幕上得到任何输出。我错过了什么？

在我的 WindowMgr init() 中：

```
if (m_platform == NULL)
{
    m_platform = new MyGUI::OpenGLPlatform();
    m_platform->initialise(&m_imageLoader);
    m_platform->getDataManagerPtr()->addResourceLocation("./data/ui/MyGUI", false);
}
if (m_GUI == NULL && m_platform != NULL)
{
    m_GUI = new MyGUI::Gui();
    m_GUI->initialise();
}

MyGUI::ButtonPtr button = m_GUI->createWidget<MyGUI::Button>("Button", 300, 10, 300, 26, MyGUI::Align::Default, "Main", "test");
button->setCaption("Test"); 
```

在 WindowMgr 渲染（）中：

```
if (m_platform != NULL)
{
    renderGlobals.shaderMgr.unbindAll();
    m_platform->getRenderManagerPtr()->drawOneFrame();
} 
```

在 WindowMgr resizeWindow() 中：

```
if (m_platform != NULL)
{
    m_platform->getRenderManagerPtr()->setViewSize(_width, _height);
} 
```

在 WindowMgr 中关闭（）：

```
if (m_GUI != NULL)
{
    m_GUI->shutdown();
    delete m_GUI;
    m_GUI = NULL;
}
if (m_platform != NULL)
{
    m_platform->shutdown();
    delete m_platform;
    m_platform = NULL;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T05:10:45.237

记住，孩子们，在你让 MyGUI 做这件事之前解开你的顶点数组对象，否则它会以最可怕的方式搞砸一切：看起来它根本没有做任何事情！我是个白痴！

# python - Python 64 位无法在 Windows HPC 上正确启动 (0xc00000cc)

> ID：11638562
> 
> 赞同：4
> 
> 时间：2012-07-24T20:09:23.660
> 
> 标签：python, windows, 64-bit, hpc

我正在尝试将我的应用程序移植到 64 位 Python。在我的 64 位 Windows 7 工作站（使用 E8600 Core 2 Duo）上一切正常，但是当我尝试在 Windows Server 2008 上执行相同的 Python 2.7.2 64 位程序（存储在网络位置）时带有 Xeon X5680 的 HPC 系统，它会立即失败（无论是否传递源文件），并显示如下对话框：

“应用程序无法正确启动（0xc00000cc）。单击确定关闭应用程序。”

我认为这两个处理器都应该支持 x86-64 指令集，所以我很惊讶它不能“正常工作”。[查找微软的错误代码](http://msdn.microsoft.com/en-us/library/cc704588%28v=prot.10%29.aspx)，我发现它的意思是“{Network Name Not Found}在远程服务器上找不到指定的共享名”。它在说什么？我尝试将 Python 64 位安装复制到本地驱动器，但它给出了与网络相关的相同错误。

我怎样才能解决这个问题？我是否缺少一些固有的不兼容性。32 位 Python 在我的工作站和 HPC 节点上都能完美运行。我宁愿不必重新编译 HPC 节点上的所有内容。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-05T19:40:01.350

@partofthething，根据您的评论，我不确定您的范围有多大`xcopy`，但您可能缺少一些 Python DLL。

例如，如果您使用标准 Python 安装程序，并且 Python 已安装`C:\Python27`，则您还应该有`C:\Windows\System32\python27.dll`, 或`C:\Windows\SysWOW64\python27.dll`. 您可以将它们复制到 python 安装的根目录，然后从网络驱动器运行而不会出现任何问题，否则它们会在该`C:\Windows\*`位置被发现。

以上无论如何都应该有效，但我有一些关于可能发生的事情的理论：

*   **您可能选择了一个非标准的安装目录 -** *这没有多大意义*，但它可能以某种方式在您复制到网络的 Python 中表示（即您安装`C:\Python27-64`在高性能计算服务器）。

*   **DLL 完全丢失了——**我怀疑它们丢失了，因为你应该会收到类似以下内容的消息：

    > 程序无法启动，因为您的计算机缺少 python27.dll。尝试重新安装程序以解决此问题。

*   **DLL 是错误的架构 -**我无法（没有足够的耐心）安装 Python 2.7.2，但我能够`STATUS_INVALID_IMAGE_FORMAT`通过强制让 python 2.7.8 失败并出现更明智的错误 0xc000007b ( )它将 32 位 DLL 与 64 位 Python 一起使用。

# fbjs - Fb.ui apprequest 返回空响应

> ID：11638570
> 
> 赞同：1
> 
> 时间：2012-07-24T20:09:54.677
> 
> 标签：fbjs

使用 Javascript SDK 在 FB.ui 中发送 Facebook 应用程序请求后，无论用户是否发送请求，回调函数中返回的响应为“null”。但是，我已经使用多个 Facebook 帐户进行了测试并收到了应用请求。

```
 , sendRequest: function() {
  parent.FB.ui({method: 'apprequests',
    to: this.game.attributes.opponentFbId,
    title: 'My App',
    message: 'I sent you a challenge on My App',
  }, function (response) {
                console.log(response)
        }); 
```

根据[http://fbdevwiki.com/wiki/FB.ui](http://fbdevwiki.com/wiki/FB.ui)，方法'apprequests'应该返回一个request_ids数组（通过response.request_ids），或者response.to。但是当我尝试记录它时'response'返回null在控制台中

我在 FB.ui 中尝试了与方法“feed”类似的方法，并且可以读取响应（和 response.post_id），但不能使用“apprequests”。

# python - 在 Python 中使用 POUND SIGN 作为字符串？

> ID：11638579
> 
> 赞同：2
> 
> 时间：2012-07-24T20:10:24.333
> 
> 标签：python

我想要一个包含 4 磅符号的字符串。我如何在 Python 中完成此操作，而不会因为磅符号而将字符串注释掉？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-24T20:12:21.380

关于什么：

```
x = '####' 
```

如果在引号之间，则不会是评论！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T21:25:03.667

如前所述，单引号可以完成字符串文字的工作。您可能还想查看[Python 文档](http://docs.python.org/release/2.5.2/ref/strings.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T11:04:26.020

如果某些 IDE 将 '####' 解释为半生不熟的字符串加上注释，请更改 IDE！

# android - 在不使用事件的情况下获取微调器值

> ID：11638583
> 
> 赞同：1
> 
> 时间：2012-07-24T20:10:39.900
> 
> 标签：android, spinner

我试图在不使用事件的情况下从微调器（android）获取值，例如从文本框中获取值。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:08:30.670

只需调用 Spinner 上的选定项目即可

```
String Text = mySpinner.getSelectedItem().toString(); 
```

您有来自 Spinner 派生的 AdapterView 类的 getSelectedXXX 方法：

[获取选定项（）](http://developer.android.com/reference/android/widget/AdapterView.html#getSelectedItem%28%29)

[getSelectedItemPosition()](http://developer.android.com/reference/android/widget/AdapterView.html#getSelectedItemPosition%28%29)

[getSelectedItemId()](http://developer.android.com/reference/android/widget/AdapterView.html#getSelectedItemId%28%29)

# android - 具有负偏移量的 RelativeLayout 不起作用

> ID：11638589
> 
> 赞同：0
> 
> 时间：2012-07-24T20:11:09.463
> 
> 标签：android, android-layout

我在 android 视图上有一个 3 x 3 的地图图块（图像）网格。这些图像是动态加载的，然后我想将相对布局移动一定数量（这将始终为负数）。我可以在 HTML 中成功地做到这一点，但是当我在 Android 的 RelativeLayout 上尝试它时它不起作用。

我尝试使用以下方法，但它不起作用：

```
View view = this.findViewById(R.id.mapContrainer);
RelativeLayout.LayoutParams head_params = (RelativeLayout.LayoutParams)view.getLayoutParams();
head_params.setMargins(leftOffset, topOffset, 0, 0);
view.setLayoutParams(head_params); 
```

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout    
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:orientation="vertical"
    >

<TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Location"
        android:paddingBottom="10dp"
        android:textAppearance="?android:attr/textAppearanceLarge" />   

<TextView
        android:id="@+id/address"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="current location"
        android:paddingBottom="10dp"
        android:textAppearance="?android:attr/textAppearanceMedium" />

<ZoomControls
    android:id="@+id/zoomControls1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"        
    android:layout_gravity="center"     
     />

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"

    >
    <ImageView
        android:id="@+id/locationIcon"
        android:layout_width="32dp"
        android:layout_height="32dp"            
        android:scaleType="fitXY"
        android:layout_centerInParent="true"
        android:src="@drawable/ic_map_person"

        />
<RelativeLayout
    android:id="@+id/mapContrainer"
    android:layout_width="768dp"
    android:layout_height="768dp"
    android:layout_marginRight="-400dp"
    android:layout_marginBottom="-400dp"          
    >

    <ImageView
        android:id="@+id/mapImage1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_location_light" />

    <ImageView
        android:id="@+id/mapImage2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/mapImage1"           
        android:src="@drawable/ic_location_light" />

    <ImageView
        android:id="@+id/mapImage3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"        
        android:layout_toRightOf="@+id/mapImage2"
        android:src="@drawable/ic_location_light" />

    <ImageView
        android:id="@+id/mapImage4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_location_light" 
        android:layout_below="@+id/mapImage1"
        android:layout_alignLeft="@+id/mapImage1"
    />
    <ImageView
        android:id="@+id/mapImage5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_location_light" 
        android:layout_below="@+id/mapImage1"           
        android:layout_toRightOf="@+id/mapImage4"
    />
    <ImageView
        android:id="@+id/mapImage6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_location_light" 
        android:layout_below="@+id/mapImage1"
        android:layout_toRightOf="@+id/mapImage5"        
    />

    <ImageView
        android:id="@+id/mapImage7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_location_light"
        android:layout_below="@+id/mapImage4"
        android:layout_alignLeft="@+id/mapImage1"
    />
    <ImageView
        android:id="@+id/mapImage8"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_location_light" 
        android:layout_below="@+id/mapImage4"
        android:layout_toRightOf="@+id/mapImage7"
    />
    <ImageView
        android:id="@+id/mapImage9"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_location_light" 
        android:layout_below="@+id/mapImage4"
        android:layout_toRightOf="@+id/mapImage8"
    />
</RelativeLayout>   
</RelativeLayout>

<include
    android:layout_width="wrap_content"
    android:layout_height="50dp"
    android:layout_gravity="bottom|center_horizontal"
    layout="@layout/menu_layout" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T22:21:48.657

您是否尝试在设置布局参数后放置 requestLayout() ？

# c++ - 如何在 Windows XP 中检索所有事件日志？

> ID：11638590
> 
> 赞同：1
> 
> 时间：2012-07-24T20:11:12.317
> 
> 标签：c++, c, winapi, event-log

众所周知，Windows 事件日志在 Vista 以下（XP 及以下）和 Vista 及以上版本中有所不同，请参见此处[Windows 事件日志](http://msdn.microsoft.com/en-us/library/aa363652.aspx)。在 Vista 上，我能够理解有关如何检索所有事件日志的 API。

在 Windows XP 上，我可以运行这个[示例代码](http://msdn.microsoft.com/en-us/library/bb427356%28v=vs.85%29)。我们需要填写的有两点：

```
#define PROVIDER_NAME           L"MyEventProvider"
#define RESOURCE_DLL            L"<path>\\Provider.dll" 
```

然而，问题是从哪里获取提供者名称及其资源 dll。

我能想到的一种方法是遍历注册表项下的所有子项： HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Eventlog\Application HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Eventlog\System HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Eventlog\安全

从这些子项中，我们可以获得提供者名称及其 EventMessageFile（尽管我发现某些子项没有 EventMessageFile，而是有ParameterMessageFile）。

这是唯一的方法吗？或者还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:04:29.633

据我所知，如果您使用的是 WinAPI，那么遍历注册表是唯一的方法。是的，有些提供商没有 EventMessageFile，这很正常。也许他们只是将插入字符串放入事件日志中而没有任何消息（我不能确切地说）。

但是，如果您可以使用 .Net，那么就有一个很好的[EventLog 类](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.aspx)，它为您提供了一堆非常好的方法。

# python - 处理命令行参数时出现 NameError

> ID：11638591
> 
> 赞同：0
> 
> 时间：2012-07-24T20:11:20.383
> 
> 标签：python

我正在用 sqlite3 尝试一些 python 测试脚本。

这是我写的脚本

```
#!/usr/bin/env python

from sqlite3 import dbapi2 as sqlite
from sys import argv,exit

db_name = "filenames.db"

def define_db():
    try:
        conn = sqlite.connect(db_name)
    except IOError as e:
        print "problem while creating/connecting the db:",e.args[0]
        exit(1)

    return conn

def write_db(conn,cursor,fni):
    conn.execute("CREATE TABLE IF NOT EXISTS file (filenames TEXT UNIQUE)")
    query = "INSERT OR REPLACE INTO file VALUES($filenames)"

    cursor.execute(query,[fni])
    cursor.close()  
    conn.commit()
    conn.close()
    print fni,"should now be in the db" 
    exit(0)

if __name__ == "__main__":
    if len(argv) == 2:
        etag = argv[1]
    else:
        print "no argument given - stopping now"
        exit(1)

    conn = define_db()
    cursor = conn.cursor()
    write_db(conn,cursor,fni) 
```

我不断收到此错误，但无法解决。

```
Traceback (most recent call last):
  File "blah.py", line 37, in <module>
    write_db(conn,cursor,fni)
NameError: name 'fni' is not defined 
```

任何想法是什么问题。

此时我使用python 2.7.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:13:19.990

脚本的最后一行引用了一个`fni`未定义的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:18:56.953

您尚未定义变量“fni”，但您正在使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T21:10:14.133

像这样的静态分析工具`pyflakes`或`pylint`可用于捕获此类愚蠢的错误

如果你在一个函数中编写了大部分代码（所以它不假设`blub`是一个全局变量，这不会让 pyflakes/pylint 抱怨）：

```
def main():
    if len(argv) == 2:
        blub = argv[1]
    else:
        print "no argument given - stopping now"
        exit(1)

    conn = define_db()
    cursor = conn.cursor()
    write_db(conn,cursor,fni)

if __name__ == "__main__":
    main() 
```

...然后你会得到一对错误，它准确地指出了错误是什么（你将参数存储在 中`blub`，但尝试使用 访问它`fni`）：

```
$ pip install pyflakes
$ pyflakes example.py
example.py:30: local variable 'blub' is assigned to but never used
example.py:37: undefined name 'fni' 
```

# javascript - 如何从用户脚本访问 iframe 的 javascript？

> ID：11638595
> 
> 赞同：5
> 
> 时间：2012-07-24T20:11:40.070
> 
> 标签：javascript, google-chrome, iframe, greasemonkey, tampermonkey

我正在尝试使用 Chrome 用户脚本或 Tampermonkey 脚本来修改具有此结构的页面：

```
<body>
content up here

<iframe id="main" src="foo.dat"></iframe>
</body> 
```

iframe 是同源的。

我需要访问`iframe#main`. 我*以为*我可以用`unsafeWindow`它来获得它，但我什么也没得到或`undefined`退回。

我尝试了很多事情：

*   尝试在 中创建一个新的脚本元素`iframe`，但即使使用`$('frame#main').contents().append(script)`or`$('frame#main').contents()[0].createElement('script')`

*   `window.frames["#main"].contentWindow`返回未定义。

我已经尝试了许多其他我现在不记得的事情，但是我已经用尽了所有的想法，并且觉得我在打字比任何重要的东西都多。
我不知道如何使用`unsafeWindow`iFrame。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T08:31:51.500

1.  `unsafeWindow`在 Chrome、Tampermonkey 或 Firefox 上不能很好地处理帧/iframe。
2.  像这样尝试使用 jQuery 访问全局（到框架）JS 是行不通的。
3.  `@include`用户脚本将在满足、`@exclude`和/或`@match`要求的 iframe 上运行。

因此，您需要考虑多个脚本运行，然后您有两种基本方法，具体取决于您要完成的任务。你可以：

(A) 将脚本定制到特定框架，如[本答案所示](https://stackoverflow.com/a/10669321/331508)。

或 (B) 注入您的 JS 并使用特殊`frames`对象来获取您想要的特定功能。

以下脚本演示了两者。在 Tampermonkey ¹（或 Firefox Greasemonkey）中安装它，然后[**在 jsBin 访问这个测试页面**](http://jsbin.com/ugoruz/2)。

```
// ==UserScript==
// @name        _Calling iframe functions
// @namespace   _pc
// @include     http://jsbin.com/ugoruz/*
// @include     http://jsbin.com/okequw/*
// ==/UserScript==

console.log ("Script start...");

/*--- This next function call will work in Firefox or Tampermonkey ONLY,
    not pure Chrome userscript.
*/
console.log ("calling functionOfInterest ()...");
unsafeWindow.functionOfInterest ();

if (window.top === window.self) {
    //--- Code to run when page is the main site...
    console.log ("Userscript is in the MAIN page.");

    //--- The frames object does not play nice with unsafeWindow.
    /*--- These next three work in Firefox, but not Tampermonkey, nor pure Chrome.
    console.log ("1", frames[1].variableOfInterest);                // undefined
    console.log ("2", unsafeWindow.frames[1].variableOfInterest);   // undefined
    console.log ("3", frames[1].unsafeWindow);                      // undefined
    */
    /*--- This next would cause a silent crash, all browsers...
    console.log ("4", unsafeWindow.frames[1].unsafeWindow.variableOfInterest);
    */

    //--- To get at iFramed JS, we must inject our JS.
    withPages_jQuery (demoAccessToFramedJS);
}
else {
    //--- Code to run when page is in an iframe...
    console.log ("Userscript is in the FRAMED page.");
    console.log ("The frame's ID is:", window.self.frameElement.id);
}

function demoAccessToFramedJS ($) {
    $("body").prepend (
          '<button id="gmMain">Run JS on main window</button>'
        + '<button id="gmFrame">Run JS on iframe</button>'
    );

    $("#gmMain, #gmFrame").click ( function () {
        if (this.id === "gmMain") {
            functionOfInterest ();
        }
        else {
            frames[1].functionOfInterest ();
        }
        console.log (this.id + "was clicked.");
    } );
}

function withPages_jQuery (NAMED_FunctionToRun) {
    //--- Use named functions for clarity and debugging...
    var funcText        = NAMED_FunctionToRun.toString ();
    var funcName        = funcText.replace (/^function\s+(\w+)\s*\((.|\n|\r)+$/, "$1");
    var script          = document.createElement ("script");
    script.textContent  = funcText + "\n\n";
    script.textContent += 'jQuery(document).ready(function() {'+funcName+'(jQuery);});';
    document.body.appendChild (script);
};

console.log ("Script end"); 
```

* * *

您将看到脚本从主页和 iframe 运行一个函数。控制台输出（Tampermonkey）将是：

```
Tampermonkey 开始
脚本开始...
调用functionOfInterest()...
用户脚本位于 MAIN 页面中。
脚本结束
Tampermonkey 开始
脚本开始...
调用functionOfInterest()...
用户脚本位于 FRAMED 页面中。
框架的 ID 是：iframe2
脚本结束

```

* * *

¹`unsafeWindow`如果您删除这些行，它也可以作为直接的 Chrome 用户脚本使用。

# gmaps4rails - gmaps4rails 中的测地线路线

> ID：11638598
> 
> 赞同：1
> 
> 时间：2012-07-24T20:11:52.740
> 
> 标签：gmaps4rails

我目前可以在 Rails 中使用 gmaps4rails 绘制折线，但我想将它们绘制为测地线路径。根据谷歌地图文档，这应该就像在选项[（链接）](https://developers.google.com/maps/documentation/javascript/geometry)中添加“geodesic：true”一样简单。下面是我当前的实现，它不起作用，只是在地图上画了一条直线。是否有在 gmaps4rails 中设置此选项的正确方法，或者目前不支持？

在我的控制器中：

```
@json_route = 
[
  [
    {'lng' =>  80.190262, 'lat' => 55.774252 },
    {'lng' => -66.118292, 'lat' => 38.466465 }
  ]
]

@gmaps_options = 
{
  :polylines => { "data" => @json_route.to_json, "options" => { "geodesic" => true }}
} 
```

在我的html页面中：

```
<%= gmaps(@gmaps_options) %> 
```

谢谢！

# android - 一次安装多个apk

> ID：11638599
> 
> 赞同：2
> 
> 时间：2012-07-24T20:12:08.620
> 
> 标签：android, apk

我想一次安装多个 APK，因为我有一个主应用程序可以完成所有操作，而所有其他应用程序都有一项服务和一项活动，必须将其放在设备上才能运行主程序，最好将它们包含在 zip 中我知道会发生这种情况，因为 su.zip 做了类似的事情

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T21:04:53.323

我必须做这样的事情来更新我的多个企业 APK。我从 REST API/ 数据库下载了 APK。然后，一旦我有了文件，我就开始在程序中安装应用程序，方法是调用：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(new File(fileName)), "application/vnd.android.package-archive");
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(intent); 
```

这将启动安装程序并安装 APK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:52:36.893

您可以通过控制台/cmd“adb install com.example”使用 adb。您正在运行哪个操作系统？编写一个小脚本来安装它们。

# mysql - 在 MySQL SELECT 语句中计算重复项并删除它们

> ID：11638602
> 
> 赞同：1
> 
> 时间：2012-07-24T20:12:12.957
> 
> 标签：mysql

我在解决这个问题时遇到了一些麻烦。

I have a *Cars Database* with a *Class* field that when selecting all entries, it will have duplicates of each *Class* value. 我需要做的是计算每个*Class*值的所有重复项，然后删除重复项以仅使用具有计数数量的自定义字段显示每个*Class*值一次。

```
Class  
-----  
A3  
A3  
A3  
A3  
B2  
B2 
```

成为：

```
Class | Count  
------+---------  
A3    | 4  
B2    | 2 
```

我可以想象一些包含该`Count()`方法的东西，但我不知道如何让它只计算重复值并为每个 Class 值分别返回值？

在此先感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:22:37.867

```
SELECT Class,COUNT(1) "Count"
FROM Cars GROUP BY Class
HAVING COUNT(1) > 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T20:23:02.683

我想这就是你要找的。这将只向您显示计数大于一的记录，如果您想要所有记录的列表然后删除`HAVING`子句

```
SELECT class, count(class) CountClass
FROM cars
GROUP BY class
HAVING count(class) > 1 
```

# javascript - 如何创建全局 javascript 命名空间的实例？

> ID：11638606
> 
> 赞同：3
> 
> 时间：2012-07-24T20:12:22.630
> 
> 标签：javascript, instance

我是一名 C++/Java 开发人员，负责一个 javascript 项目，但我似乎无法解决这个问题。

我正在使用一个通过直接分配定义命名空间的 javascript 文件，如此[处所述](http://javascriptweblog.wordpress.com/2010/12/07/namespacing-in-javascript/)

所以这是我对一个过于简化的示例命名空间的尝试

```
// testns.js
var ns = { }
ns.val = -1;

ns.setVal = function(newVal) {
    this.val = newVal;
} 
```

这就是我想做的

```
//myScript.js
function testNamespaceInstances()
{
    var nsInstance1 = ns;
    nsInstance1.setVal(1);

    var nsInstance2 = ns;
    nsInstance2.setVal(2);

    console.log("nsInstance1.val: " + nsInstance1.val);
    console.log("nsInstance2.val: " + nsInstance2.val);
} 
```

该函数将输出

```
nsInstance1.val: 2
nsInstance2.val: 2 
```

如果不修改声明命名空间的 testns.js 文件，我能做些什么，以便函数输出

```
nsInstance1.val: 1
nsInstance2.val: 2 
```

编辑：在示例代码中添加了更多细节。我还想指出我正在尝试简化我正在使用的更复杂的 javascript 文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:15:47.760

只需创建第二个命名空间（实际上是对象）：`nsInstance2 = {};`-- 这里的问题是两者`nsInstance1`和`nsInstance2`都指向同一个对象，所以很自然，如果您更改一个对象的属性，它将反映在另一个对象中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T20:16:57.447

JavaScript 中的复杂数据类型被复制为引用，因此您的`nsInstance1`和`nsInstance2`变量仅指向命名空间对象——它们不会复制或实例化它。

要实例化它，命名空间必须声明为函数，而不是对象字面量，并使用`new`关键字引用。只有函数可以用于 JavaScript 的实例化。

```
function NS() {}
var ns1 = new NS();
var ns2 = new NS(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T20:16:14.500

首先，JavaScript 中没有命名空间。`{}`只是一个对象字面量，与`new Object()`.

其次，您不会通过给它们几个引用来实例化对象。您可以使用以下方法实例化一个对象[`Object.create`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create/)：

```
var nsInstance1 = Object.create(ns);
var nsInstance2 = Object.create(ns); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T20:17:35.000

您可以执行以下操作：

```
var ns = function() {
    return {};
}; 
```

和

```
function testNamespaceInstances() {
    var nsInstance1 = new ns;
    nsInstance1.val = 1;

    var nsInstance2 = new ns;
    nsInstance2.val = 2;

    console.log("nsInstance1.val: " + nsInstance1.val);
    console.log("nsInstance2.val: " + nsInstance2.val);
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/W4rjN/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T20:27:16.520

Since your are taking `ns` at a global scope, you can just directly assign values to it like-

`//testns.js`

 ````
var ns = { }
ns.val = -1;

function testNamespaceInstances()
{
    ns.val1=1;
    ns.val2=2;

    console.log("ns.val1: " + ns.val1);
    console.log("ns.val2: " + ns.val2);
} 
````  `* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-24T20:19:18.433

```
//myScript.js
Object.prototype.clone = function() {
  var newObj = (this instanceof Array) ? [] : {};
  for (var i in this) {
    if (i == 'clone') continue;
    if (this[i] && typeof this[i] == "object") {
      newObj[i] = this[i].clone();
    } else newObj[i] = this[i]
  } return newObj;
};

function testNamespaceInstances()
{
    var nsInstance1 = ns.clone();
    nsInstance1.val = 1;

    var nsInstance2 = ns.clone();
    nsInstance2.val = 2;

    console.log("nsInstance1.val: " + nsInstance1.val);
    console.log("nsInstance2.val: " + nsInstance2.val);
} 
````

# javascript - 使用复杂对象的剔除手动设置选择框的默认值

> ID：11638609
> 
> 赞同：0
> 
> 时间：2012-07-24T20:12:44.113
> 
> 标签：javascript, select, knockout.js

我正在尝试使用敲除更新其中一个选择框中的选定值。但我不能这样做。这是 jsfiddle 链接 - [http://jsfiddle.net/5MauG/1/](http://jsfiddle.net/5MauG/1/)

当我单击 click me span 时，我希望选择框中的选定值应该改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:31:38.170

您的问题是尝试将所选选项设置为新对象是行不通的。即使具有相同的值，新对象与旧对象也不相同。您可以在这个稍作[修改的小提琴](http://jsfiddle.net/tyrsius/5MauG/2/)中看到这一点；它在实际从选项数组中的对象中进行选择时起作用。

使用值数组（如字符串或整数），您可以按值选择。对于对象数组，您需要使用实际对象进行选择。如果您的视图在任何地方都使用绑定，这将更容易，因为绑定*将*代表实际的对象。

# marionette - Backbone.Marionette TemplateHelpers：访问存储在模型之外的数据

> ID：11638613
> 
> 赞同：1
> 
> 时间：2012-07-24T20:13:20.103
> 
> 标签：marionette

# 问题：

我正在尝试制作一个可以在单个表单元素以及表单顶部显示错误消息的表单。

我希望能够将错误存储在模型之外的某个地方。默认情况下，如果我没记错的话，模板中只包含模型属性。所以我正在尝试使用模板助手添加错误。到目前为止，它不起作用并因以下错误而中断：

```
Uncaught ReferenceError: errors is not defined 
```

相关代码如下：

### 风景：

```
var LoginFormView = Marionette.ItemView.extend({
  // some view properties
  ...

  errors: [],
  templateHelpers: function() {
    console.log('LoginFormView.templateHelpers',this, this.errors);
    var output = {};
    if(this.errors.length) {
      output.errors = this.errors;
    }
    return output;
  },

  initialize: function(currentUser, options) {
    // some initialization
    ...

    this.bindTo(this.model, "loadUser:fail", this.onLoadUserFail, this);
  },

  ...

  onLoadUserFail: function() {
    alert('Access Denied!');
    this.errors.push('Your login credentials are invalid. Please try again.');
    this.render();
  }
}); 
```

LoginFormView 对象只是一个模块定义。它稍后会被实例化并注入到 Backbone.Marionette.Region 中。我不确定这是否与我遇到的问题有关，但我想我会提到它以防万一。

### 模板：

```
<script type="text/template" id="login-form-template">
  <form class="form-vertical well well-shadow span4">

    ...

    <% if(errors) { %>
      <fieldset class="alert alert-error">
        <button type="button" class="close" data-dismiss="alert">×</button>
        <legend>Oops!</legend>
        <ul>
          <% _.each(errors, function(error) { %>
            <li><%= error %></li>
          <% }); %>
        </ul>
      </fieldset>
    <% } %>

    ...

  </form>
</script> 
```

似乎错误没有进入模板，因为错误在模板中被抛出：

```
<% if(errors) { %> 
```

查看 Backbone.Marionette 源代码，我的印象是 templateHelpers 方法被执行，并且它的输出与“数据”对象（序列化模型）合并。

如果是这样的话，我怎么能访问我的模型的属性，但“错误”属性是未定义的？

# 解决方案：

[joverson](https://stackoverflow.com/users/60737/jsoverson)很友好地指出了问题所在。我的新 templateHelpers 方法现在如下所示：

```
errors: [],
templateHelpers: function() {
  console.log('LoginFormView.templateHelpers', this, this.errors);
  var output = {};
  output.errors = this.errors;
  return output;
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:49:33.423

当这个视图通过 Marionette Region 显示时，它[几乎](https://github.com/derickbailey/backbone.marionette/blob/master/src/backbone.marionette.region.js#L35)[`show()`](https://github.com/derickbailey/backbone.marionette/blob/master/src/backbone.marionette.region.js#L30)会立即调用`render()`视图上的方法。由于在视图的数组中有项目之前不会填充模板数据的属性，因此将在模板中未定义。`errors``errors``errors`

如果您删除错误检查并只传递一个空数组以便至少定义它，您应该能够在模板中进行存在检查以获得相同的效果。

# java - 在 Spring 中无法连接到 MySQL

> ID：11638614
> 
> 赞同：1
> 
> 时间：2012-07-24T20:13:24.110
> 
> 标签：java, mysql, spring, spring-mvc, jdbc

我无法连接到数据库。我的凭据是正确的。我能够使用 Oracle SQL Developer 进行连接。我收到以下错误。任何帮助将不胜感激。

```
> INFO: Loaded JDBC driver: com.microsoft.sqlserver.jdbc.SQLServerDriver
Jul 24, 2012 2:38:39 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet dispatcher threw exception
java.sql.SQLException: No suitable driver found for jdbc:mysql://XX.1.1.XX:3306/dashboard
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriverManager(DriverManagerDataSource.java:173)
    at org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver(DriverManagerDataSource.java:164)
    at org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnectionFromDriver(AbstractDriverBasedDataSource.java:149)
    at org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnection(AbstractDriverBasedDataSource.java:119)
    at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111)
    at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:381)
    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:455)
    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:463)
    at com.mvc.services.TransactionInfoService.getData(TransactionInfoService.java:39)
    at com.mvc.controllers.MainController.handleRequestInternal(MainController.java:29)
    at org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)
    at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233) 
```

我已经包含了 Java 代码以及错误，任何帮助将不胜感激。非常感谢你。

```
package com.mvc.services;

import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Collection;
import java.util.List;

import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.RowMapper;
import org.springframework.jdbc.datasource.DriverManagerDataSource;

import com.mvc.interfaces.DataInterface;
import com.mvc.objects.TransactionInfo;

public class TransactionInfoService implements DataInterface {
    private String info;
    private JdbcTemplate jdbcTemplate;

    public void connect() {
        // Connect To Database
        DriverManagerDataSource dataSource = new DriverManagerDataSource();
        dataSource.setDriverClassName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
        // dataSource.setUrl("jdbc:mysql://localhost:3306/dashboard");
        dataSource.setUrl("jdbc:mysql://xx.1.1.xx:3306/dashboard");
        // dataSource.setUsername("username");
        // dataSource.setPassword("admin");
        dataSource.setUsername("username");
        dataSource.setPassword("password");
        setDataSource(dataSource);
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T20:21:59.893

您已将驱动程序类名称设置为`com.microsoft.sqlserver.jdbc.SQLServerDriver`但仍在尝试连接到 MySQL 数据库。MySQL 的驱动程序是`com.mysql.jdbc.Driver`.

# jquery - 如何使用jquery获取每一行的数据？

> ID：11638620
> 
> 赞同：0
> 
> 时间：2012-07-24T20:13:45.577
> 
> 标签：jquery

我想获取一行中的所有值..即获取行中的每个单元格，当用户选择具有`class="trSelected"`.

我有类似的东西，但不确定如何获取具有“trSelected”类的行的值

**jQuery**

```
jQuery(app.rootElement).find('table tr').click(function(event){
    jQuery('.trSelected', this).each( function(){
        var  rowval = $(this).attr('') + $(this).attr('') ..
    });
}); 
```

**HTML**

```
 <tr class="erow trSelected" style="background-color: yellow;">
       <td align="left" abbr="SEV">
          <div style="text-align: left; width: 40px;"><a class="severity1-img" href="#" title="Critical" alt="Critical">Critical</a></div>
       </td>
       <td align="left" abbr="Verify">
          <div style="text-align: left; width: 140px;"><span title="No">No</span></div>
       </td>
       <td align="left" abbr="Ins">
          <div style="text-align: left; width: 190px;"><span title="lwqun050">lwqun050</span></div>
       </td>
       <td align="right" abbr="Impact">
          <div style="text-align: right; width: 40px;"><span title="1">1</span></div>
       </td>
       <td align="right" abbr="occurrencecount">
          <div style="text-align: right; width: 40px;"><span title="undefined">undefined</span></div>
       </td>
       <td align="left" abbr="NotificationID">
          <div style="text-align: left; width: 100px;"><span title="Host">Host</span></div>
       </td>
       <td align="left" abbr="Owner">
          <div style="text-align: left; width: 100px;"><span title="SYSTEM">SYSTEM</span></div>
       </td>
       <td align="left" abbr="Name">
          <div style="text-align: left; width: 120px;"><span title="Down">undefined</span></div>
       </td>
       <td align="left" abbr="LastNotifiedAt">
          <div style="text-align: left; width: 130px;"><span title="2012-07-23T13:57:11.000-04:00">2012-07-23T13:57:11.000-04:00</span></div>
       </td>
    </tr>

<tr class="erow trSelected" style="background-color: yellow;">
       <td align="left" abbr="SEV">
          <div style="text-align: left; width: 40px;"><a class="severity1-img" href="#" title="Critical" alt="Critical">Critical</a></div>
       </td>
       <td align="left" abbr="Verify">
          <div style="text-align: left; width: 140px;"><span title="No">No</span></div>
       </td>
       <td align="left" abbr="Ins">
          <div style="text-align: left; width: 190px;"><span title="lwqun050">lwqun050</span></div>
       </td>
       <td align="right" abbr="Impact">
          <div style="text-align: right; width: 40px;"><span title="1">1</span></div>
       </td>
       <td align="right" abbr="occurrencecount">
          <div style="text-align: right; width: 40px;"><span title="undefined">undefined</span></div>
       </td>
       <td align="left" abbr="NotificationID">
          <div style="text-align: left; width: 100px;"><span title="Host">Host</span></div>
       </td>
       <td align="left" abbr="Owner">
          <div style="text-align: left; width: 100px;"><span title="SYSTEM">SYSTEM</span></div>
       </td>
       <td align="left" abbr="Name">
          <div style="text-align: left; width: 120px;"><span title="Down">undefined</span></div>
       </td>
       <td align="left" abbr="LastNotifiedAt">
          <div style="text-align: left; width: 130px;"><span title="2012-07-23T13:57:11.000-04:00">2012-07-23T13:57:11.000-04:00</span></div>
       </td>
    </tr>

<tr class="erow " style="background-color: yellow;">
       <td align="left" abbr="SEV">
          <div style="text-align: left; width: 40px;"><a class="severity1-img" href="#" title="Critical" alt="Critical">Critical</a></div>
       </td>
       <td align="left" abbr="Verify">
          <div style="text-align: left; width: 140px;"><span title="No">No</span></div>
       </td>
       <td align="left" abbr="Ins">
          <div style="text-align: left; width: 190px;"><span title="lwqun050">lwqun050</span></div>
       </td>
       <td align="right" abbr="Impact">
          <div style="text-align: right; width: 40px;"><span title="1">1</span></div>
       </td>
       <td align="right" abbr="occurrencecount">
          <div style="text-align: right; width: 40px;"><span title="undefined">undefined</span></div>
       </td>
       <td align="left" abbr="NotificationID">
          <div style="text-align: left; width: 100px;"><span title="Host">Host</span></div>
       </td>
       <td align="left" abbr="Owner">
          <div style="text-align: left; width: 100px;"><span title="SYSTEM">SYSTEM</span></div>
       </td>
       <td align="left" abbr="Name">
          <div style="text-align: left; width: 120px;"><span title="Down">undefined</span></div>
       </td>
       <td align="left" abbr="LastNotifiedAt">
          <div style="text-align: left; width: 130px;"><span title="2012-07-23T13:57:11.000-04:00">2012-07-23T13:57:11.000-04:00</span></div>
       </td>
    </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:24:26.487

这就是我最终返回所选行的值的方法，这很有效。

它基于 trSelected 捕获事件并在行或行中返回项目及其关联值

谢谢大家

```
jQuery(app.rootElement).find('.flexme1 ').click(function(event){
  console.log(this);
  console.log('Hello Inside  event');
  console.log(event);
      jQuery(this).find('.trSelected').each( function(){
        console.log(this);
          console.log(
              '  Sev: '   + jQuery('td[abbr="Sev"] >div', this).text() +
              '  Ins '   + jQuery('td[abbr="Ins"] >div', this).text() +
              '  Impact: ' + jQuery('td[abbr="Impact"] >div span', this).text()
          );
      });
  }); 
```

# json - 如何为 Fill DropDownList 编写公共函数

> ID：11638621
> 
> 赞同：0
> 
> 时间：2012-07-24T20:13:46.560
> 
> 标签：json, jquery

我想为 Fill DropDownlist 编写公共函数。并且当程序员要填充 DropDownlist 时调用该方法并设置参数。我写这段代码

```
function FillDropDownlist(url,dataPas,selector,indexValue,indexText) {

    $.ajax({
        cache: false,
        contentType: 'application/json; charset=utf-8',
        url: url,
        data:{dataPas},
       success: function (data) {
            var rows = data.rows;
            var drpTransportType = $(selector);
            var strOption = '<option value=0>...Select.....</option>';
            $(selector+" option").remove();
            if (data.rows.length >= 0) {
                for (var i = 0, l = rows.length; i < l; i++) {
                    var ri = rows[i];
                    strOption += '<option value="' + ri.cell[indexValue] + '">' + ri.cell[indexText] + '</option>';
                }
                drpTransportType.append(strOption);
            }
        },
        dataType: 'json'

    });

} 
```

为了打电话，我写了这段代码

```
 FillDropDownlist("JQGridHandler.ashx", "ActionPage:'TransportType',Action:'FillDrop'", "#Select1", 0, 1); 
```

但这段代码不起作用，并得到错误

```
Error: FillDropDownlist is not defined 
```

我认为这条线有错误

```
 data:{dataPas}, 
```

请帮我完成这个功能，谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:24:16.810

有几件事：（1）对 JavaScript 函数名称使用驼峰命名约定。(2) 确保在调用函数之前对其进行评估。因此，如果它位于不同的 js 文件中，请确保将其包含在调用该函数的文件之前。（3）更改`data:{dataPas}`为`data: dataPas`（我认为您拼错了“通过”，但无论如何）。那么你的`dataPas`对象应该是 javascript 对象表示法，比如`dataPas = {foo: "foo", bar: "bar"};`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:52:01.770

如果`dataPas`是原生 JavaScript 对象，则将 dataPas 作为`data:JSON.stringify(dataPas)`

P.S: On an un-related sidenote you can omit `dataType: 'json'` and contentType just needs to be `contentType: 'application/json'` ( [Link here](http://encosia.com/save-yourself-some-typing-when-you-call-asp-net-services/) )

# java - 如何在耶拿对个人进行所有限制

> ID：11638625
> 
> 赞同：1
> 
> 时间：2012-07-24T20:13:53.127
> 
> 标签：java, jena, ontology, owl

我的本体有一个 Road 类和一个 shop 类。

Road 类有一个名为“highstreetroad”的个体，它与 8 个不同的商店个体相关。

我正在尝试打印“Road hasShop Shop”中的所有现有语句。应该有 8 个陈述，但它只给了我一个。我正在使用 Jena 来执行此操作。这是我的代码中的一个示例：

```
ExtendedIterator<Individual> i = model.listIndividuals(RoadCls);
        while (i.hasNext())
        {
          Individual indi = i.next();
          System.out.println( indi.getProperty(hasShopCls) );
        } 
```

我相信原因是由于“getProperty”，因为 javadoc 说只会返回一个，但我想要不止一个：

> “在关联模型中回答一些语句（this, p, O）。如果有多个这样的语句，则可能返回其中任何一个。如果不存在这样的语句，则返回 null - 这与 getRequiredProperty 不同。”

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:33:36.473

在这种情况下，您想要[`OntResource.listPropertyValues`](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/ontology/OntResource.html#listPropertyValues%28com.hp.hpl.jena.rdf.model.Property%29).

# java - 类声明中的成员接口是否隐式公开？

> ID：11638627
> 
> 赞同：10
> 
> 时间：2012-07-24T20:13:57.440
> 
> 标签：java, jls

**代码**

我有以下带有成员接口的类：

```
package com.example.withinterface;

public class SomeClass {

    interface SomeInterface {

        void doSomething();
    }
} 
```

另一个类试图访问它：

```
package com.example.withinterface.main;

import com.example.withinterface.SomeClass;

public class Main {

    public static void main(String[] argss) {
        System.out.println(SomeClass.SomeInterface.class);
    }
} 
```

**错误**

在 Main 我从 javac 收到以下错误：`SomeInterface is not public in SomeClass; cannot be accessed from outside package`.

在 Eclipse 中：`SomeInterface is not public in SomeClass; cannot be accessed from outside package`.

两者都编译为 Java 7。如果我制作 SomeInterface ，一切都编译得很好`public`。

**但规格说**

Java 7的[Java 语言规范是](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.5)这样说的：

> 成员接口是其声明直接包含在另一个类或接口声明中的接口。
> 
> 除非指定访问修饰符，否则类声明中的成员接口是隐式公共的（第 6.6 节）。

Java 5的[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se5.0/html/classes.html#8.5)似乎没有第二句话。

**问题**

那么 SomeInterface 不应该被认为是公共的，不应该 Main 编译吗？

**更新**

正如[Ajay George](https://stackoverflow.com/questions/11638627/is-a-member-interface-in-a-class-declaration-implicitly-public/11639010#11639010)所建议的，这确实[是 Java 语言规范 7 中的一个错误](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7186836)（感谢[JamesB](https://stackoverflow.com/questions/11638627/is-a-member-interface-in-a-class-declaration-implicitly-public/11639010#comment15475534_11639010)）。与此同时，规范被纠正，不正确的句子被删除。[Archive.org 中的最后一个版本，带有不正确的句子](http://web.archive.org/web/20130123161047/http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.5)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:44:06.230

我猜规格是错误的。这是带有您的代码的 javap 输出。

```
E:\workspace>javap com\example\withinterface\SomeClass
Warning: Binary file com\example\withinterface\SomeClass contains com.example.wi
thinterface.SomeClass
Compiled from "SomeClass.java"
public class com.example.withinterface.SomeClass {
  public com.example.withinterface.SomeClass();
}

E:\workspace>javap com\example\withinterface\SomeClass$SomeInterface
Warning: Binary file com\example\withinterface\SomeClass$SomeInterface contains
com.example.withinterface.SomeClass$SomeInterface
Compiled from "SomeClass.java"
interface com.example.withinterface.SomeClass$SomeInterface {
  public abstract void doSomething();
} 
```

我将接口更改为public，然后重新编译它。

```
E:\workspace>javap com\example\withinterface\SomeClass
Warning: Binary file com\example\withinterface\SomeClass contains com.example.wi
thinterface.SomeClass
Compiled from "SomeClass.java"
public class com.example.withinterface.SomeClass {
  public com.example.withinterface.SomeClass();
}

E:\workspace>javap com\example\withinterface\SomeClass$SomeInterface
Warning: Binary file com\example\withinterface\SomeClass$SomeInterface contains
com.example.withinterface.SomeClass$SomeInterface
Compiled from "SomeClass.java"
public interface com.example.withinterface.SomeClass$SomeInterface {
  public abstract void doSomething();
} 
```

注意 Inner 类的区别。

# android - Android Jelly Bean (Google Now) 文本到语音引擎对开发人员不可用？

> ID：11638628
> 
> 赞同：1
> 
> 时间：2012-07-24T20:14:08.933
> 
> 标签：android, voice, text-to-speech, android-4.2-jelly-bean

> **可能重复：**
> [Jelly Bean Google Voice 文字转语音 API？](https://stackoverflow.com/questions/11382621/jelly-bean-google-voice-text-to-speech-api)

我正在尝试使用 google tts api，无论我尝试什么，我都无法让它听起来像在“Google Now”的搜索结果中那样。这个不能用吗？有人知道吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T17:03:24.160

可以*使用*Android TTS API 访问 Google Now 语音。您需要在 TextToSpeech.speak() 调用的“params”参数中使用“KEY_FEATURE_NETWORK_SYNTHESIS”。

看

[http://developer.android.com/reference/android/speech/tts/TextToSpeech.Engine.html#KEY_FEATURE_NETWORK_SYNTHESIS](http://developer.android.com/reference/android/speech/tts/TextToSpeech.Engine.html#KEY_FEATURE_NETWORK_SYNTHESIS)

和

[http://developer.android.com/reference/android/speech/tts/TextToSpeech.html#speak(java.lang.String,int,java.util.HashMap)](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html#speak%28java.lang.String,%20int,%20java.util.HashMap%3Cjava.lang.String,%20java.lang.String%3E%29)

——弗格斯·亨德森

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:16:07.557

不，果冻豆 API 中的任何内容都无法让开发人员使用 Google Now 的“声音”。TTS 将使用设备上可用的任何语音引擎。

# python - 尝试使用带有 MongoDB 的实时热图

> ID：11638630
> 
> 赞同：0
> 
> 时间：2012-07-24T20:14:15.220
> 
> 标签：python, mongodb, twitter, heatmap, tweepy

首先，一点背景。

我的 Python 处于中级水平。我对 MongoDB/Redis/Flask 很陌生。

为了有效地回答这个问题，我认为你必须愿意花时间从博客作者那里了解这个热图是如何工作的。
我正在使用这个博客的代码库： http:
[//blog.comsysto.com/2012/07/10/real-time-twitter-heat-map-with-mongodb/#comment-770](http://blog.comsysto.com/2012/07/10/real-time-twitter-heat-map-with-mongodb/#comment-770)

可在 Git 上的此链接上找到：
[https ://github.com/comsysto/twitter-realtime-heatmap](https://github.com/comsysto/twitter-realtime-heatmap)

我开始了redis。
在 MongoDB 中，我在数据库 tstream 下创建了一个名为 tweets_tail 的封顶集合。tstream.tweets_tail.isCapped() 实际上返回 true。
当我运行 tstream.py 时，我在 StreamListener 类的每个函数中都放置了打印语句。这些函数在执行时都没有被实际调用过。

当我运行 tweet_service.py 时，我得到以下信息：

> > > avon:heatmap kalil$ python tweet_service.py
> > > * 正在运行`http://0.0.0.0:5000/`
> > > * 重新启动，重新加载器
> > > 开始拖尾...
> > > 1
> > > 127.0.0.1 - - [24/Jul/2012 14:57:54] "GET /tweets?callback=loomit HTTP/ 1.1" 200 -

似乎在 tweet_service.py 中，它正在打印它在 pubsub.listen() 函数的第一次迭代中。

但是，除此之外，我没有收到任何新推文，因为对集合的查询：

> > > db.tweets_tail.count()
> > > 0

我怀疑这与 Tweepy 臭名昭著的 Streaming API 损坏有关（正如我实验室中所说的那样），实际上没有任何推文被接收并保存在 MongoDB 中。事实上，我一点头绪都没有。

任何帮助将不胜感激 - 如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T22:36:06.710

我想到了。Tweepy 是罪魁祸首——确保你拥有最新版本，因为新的提交修复了很多流媒体问题。

# android - Android：如何设置 HTTP 连接超时并对其做出反应？

> ID：11638634
> 
> 赞同：2
> 
> 时间：2012-07-24T20:14:32.737
> 
> 标签：android, http

我正在开发一个 Android 应用程序，该应用程序需要在启动时立即从网页中读取一行。我正在使用以下代码执行此操作：

```
try{
        URL url = new URL("http://www.example.com");
        HttpURLConnection con = (HttpURLConnection) url.openConnection();
        BufferedReader reader = new BufferedReader(new InputStreamReader(con.getInputStream()));
        line = reader.readLine();
}
catch(Exception e){
        e.printStackTrace();
} 
```

它工作正常，但有时连接或服务器速度很慢，应用程序冻结或崩溃。

我想设置 5 秒的超时时间，如果超时，我想向用户敬酒，说网络忙，请他稍后再试。

我尝试了 HttpURLConnection setConnectTimeout() 方法，但没有成功。

有什么线索我可以做到这一点吗？谢谢正手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:22:03.787

如果您将ConnectionTimeout 设置为5 秒，可能会是更好的解决方案，捕获SocketTimeoutException 并从那里显示Toast。当您将 ConnectionTimeout 设置为某个值并且连接没有得到响应时，代码将抛出 SocketTimeoutException。在这里，您可以捕获它并调用处理程序以在 UI 中显示吐司。最后会关闭连接并释放内存。

```
class MyHttpClient extends DefaultHttpClient {
    @Override
    protected ClientConnectionManager createClientConnectionManager() {
        registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
        registry.register(new Scheme("https", 
            mSSLSocketFactory != null 
            ? mSSLSocketFactory 
            : SSLSocketFactory.getSocketFactory(), 
            443));

    return new SingleClientConnManager(getParams(), registry);
}

   MyHttpClient httpClient = new MyHttpClient();

    // set http params
    HttpParams params = httpClient.getParams();
    params.setParameter(CoreConnectionPNames.CONNECTION_TIMEOUT, new Integer(30000));
    params.setParameter(CoreConnectionPNames.SO_TIMEOUT, new Integer(30000));
    httpClient.setParams(params);

    ....
    httpClient.execute(httpUriRequest) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:45:12.533

考虑改用`AndroidHttpClient`类，它有很好的预设超时，所以你不必做任何事情。

# 3d - Gnuplot - 在指定空间（例如盒子）内绘制位置（xyz）与时间数据并暂停

> ID：11638636
> 
> 赞同：2
> 
> 时间：2012-07-24T20:14:40.653
> 
> 标签：3d, plot, gnuplot

可以在gnuplot中完成以下操作吗？如果是，如何？

我在以 t,x,y,z 作为标题的表中有时间与位置 (x,y,z) 的数据。

我想知道我是否可以以某种方式绘制粒子在预定义空间内的相同时间与位置，并在每个时间步后暂停；这样我就可以看到粒子位置随时间的演变。我也想知道能不能画一条从前一个位置到当前位置的连续线，这样我才能真正看到它过去的轨迹。

示例数据：

假设预定义的空间是一个 10x10x10 的盒子，我的粒子在 3 秒内具有以下位置。

```
t x y z

0 1 2 3 

1 2 3 4

2 3 4 5

3 4 5 6 
```

我怎么看到粒子的轨迹！我的想法是，如果我可以将每个时间步的情节暂停一点，它看起来就像一个动画，我可以使用屏幕捕捉软件捕捉...

除非，这些数据也可以使用 gnuplot 进行动画处理

如果 gnuplot 不是正确的工具，是否有任何其他软件可以更有效和/或优雅地执行此操作！？

任何帮助，将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T20:56:34.530

创建文件`main.gp`并运行`gnuplot main.gp`或`load "main.gp"`在 gnuplot shell 中运行。输出在 point.gif 中。文档
[http://www.gnuplot.info/documentation.html](http://www.gnuplot.info/documentation.html)
您也可以输入`help`gnuplot shell。

**主.gp**

```
set term gif animate delay 30 size 400, 400
set output "point.gif"
do for [n=1:4] {
    splot [0:7][0:7][0:7] "data" u 2:3:4 every :::::n w lp t sprintf("n=%i", n)
} 
```

**数据**

```
t x y z

0 1 2 3

1 2 3 4

2 3 4 5

3 4 5 6 
```

![在此处输入图像描述](../Images/a4375f27f5528d0dbb260ef0bf27117d.png)

编辑：我按照[@mgilson 的建议](https://stackoverflow.com/questions/11638636/gnuplot-plotting-positionxyz-vs-time-data-inside-a-specified-space-eg-a-box#comment15421794_11639174)切换到迭代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:33:05.037

我想通了..每个代码都应该是 ::::n 而不是 5 个冒号。现在，如果我想有 2 个单独的文件以不同的方式读取和着色，我会怎么做？我有这个，它用红色为 2 个地块着色。如果我想要红色和蓝色怎么办？为 [n=1:46] { splot [0:0.002][0:0.0025][0:0.001] "data3.txt" u 2:3:4 每 ::::nw lp t sprintf("n= %i", n) splot [0:0.002][0:0.0025][0:0.001] "data4.txt" u 2:3:4 每 ::::nw lt 1 lw 1 pt 1 ps 1 lc rgb " blue" sprintf("n=%i", n) } ### second splot throws an error.. 如果两个 splots 使用相同的代码-不会 wrk

# java - SwingWorker 运行创建线程的类。爪哇

> ID：11638638
> 
> 赞同：2
> 
> 时间：2012-07-24T20:14:43.270
> 
> 标签：java, multithreading, user-interface, swingworker

我有“创建者”类，它具有创建线程的匿名内部可运行类。我也有创建 GUI 的 GUI 类，按下按钮执行“创建者”类。但随后我的 GUI 冻结，直到“创建者”创建的所有线程都完成。我发现 SwingWorker 在这种情况下可以帮助我，但我不明白如何在这种特殊情况下创建一个。除了 SwingWorker，还有其他简单的方法吗？

这是我的 Creator 类的代码：

```
public class Creator {

    final ExecutorService es;
    Collection<Future<?>> futures = new LinkedList<>();

    public Creator() {
        es = Executors.newFixedThreadPool(10);
    }

    public void runCreator() {

        for (int i = 0; i < 100; i++) {
            futures.add(es.submit(new Check(i)));
        }

        es.shutdown();

        for (Future<?> future : futures) {
            try {
                future.get();
            } catch (Exception ex) {

            }
        }

    }

    private class Check implements Runnable {

    private int i;

        private Check(int i) {
            this.i = i;

        }

        @Override
        public void run() {

    System.out.println("Number: "+i);

    try {
                Thread.sleep(1000);
            } catch (InterruptedException ex) {

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:24:48.167

The reason why your code is hanging until it completes, is because of the call to your [Future's get method](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html#get%28%29). This will wait until it has completed. Also, you probably do not want to shutdown your pool right after adding all of your threads. It would be better to just add a on close event and shut it down there.

Since all that you are doing is printing a number and sleeping, you do not need to wait for the Future to complete. Just remove the call to get and the delay should stop.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T00:40:24.840

是的，Swing 工作者是要走的路——网上有足够多的例子，但总结一下——`doInBackground()`如果你想报告临时进度，请使用`publish()/process()`并最终将你的数据获取到 Swing EDT 线程在`done()`.

PS。与 SwingWorker 的使用无关，您可能需要考虑使用完成服务，而不是按顺序等待所有期货。

# colors - XNA 如何获得精灵背后的颜色

> ID：11638649
> 
> 赞同：0
> 
> 时间：2012-07-24T20:15:39.587
> 
> 标签：colors, xna, 2d, collision, terrain

我目前正在研究一个在加载的背景上生成随机黑色地形的 2D 项目。我有一个加载和控制的精灵，我试图找出识别精灵背后颜色的最佳方法，以编码一些基于颜色的碰撞。我已经尝试了一堆关于每像素和颜色的教程，但它们似乎都依赖于正在使用的碰撞贴图或两个预加载图像 IE 之间的边界框：精灵和碰撞对象。

如果有人能指出我正确的方向，那将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:40:49.270

查询纹理是一项相对昂贵的操作；我强烈建议您避免实时这样做。既然您是在运行时以程序方式生成地形信息，为什么不将其存储在一个数组中并引用它呢？

如果您需要合成纹理或执行其他渲染操作以创建地形数据，您可以使用以下代码将生成的渲染目标数据复制到系统内存中的数组中：

```
var data = new Color[width * height];
texture.GetData(data); 
```

尽量避免不必要地这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:44:00.833

我认为正确的方向是远离像素完美的碰撞。大多数人认为这是必要的，但事实是，99% 的游戏不使用像素完美碰撞，因为它们速度慢、难以正确实施，并且对于大多数实际游戏来说过于矫枉过正。大多数游戏使用[AABB](http://en.wikipedia.org/wiki/Axis-aligned_bounding_box)、圆圈或球体。它们很容易检测到它们之间的碰撞，并且对于大多数游戏来说“足够好”。我能说出的唯一使用像素完美碰撞的游戏是最初的 Worms。

该视频还很好地涵盖了碰撞检测： http: [//pyvideo.org/video/615/introduction-to-game-development](http://pyvideo.org/video/615/introduction-to-game-development) （碰撞检测@1:13:20）

# javascript - html表单的删除确认

> ID：11638655
> 
> 赞同：3
> 
> 时间：2012-07-24T20:16:12.533
> 
> 标签：javascript, html, forms, confirmation

我想在我的表单按钮中添加删除确认 可能使用的 javascript？

```
<script type="text/javascript"> 
function confirmDelete() { 
return confirm("Are you sure you want to delete?");   
} 
</script> 
```

这目前正在我的表单中工作。

```
<input type="button" onclick="parent.location='<?php echo "delete.php?id=" . $people['id'] ?>'" value='Delete'> 
```

如何将 javascript 集成到 onclick 事件中？使用上述javascript或任何其他可能更好的方式

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T20:19:18.740

这是可能的 ：）

在标签上，使用 onsubmit 属性，如下所示：

```
<form onsubmit="return confirm('Are you sure?');"> 
```

或使用方法

```
<form onsubmit="return myMethod"> 
```

onclick 事件上的按钮也是如此。如果返回false，则不会被点击。

请记住，如果方法返回 false，则不会提交表单

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T20:28:12.417

> 如何将 javascript 集成到 onclick 事件中？

```
<input type="button" onclick="javascript:confirmDelete();" value='Delete'> 
```

和

```
<script type="text/javascript"> 
function confirmDelete() { 
var status = confirm("Are you sure you want to delete?");   
if(status)
{
 parent.location.replace("parent.location='<?php echo "delete.php?id=" . $people['id'] ?>'");
}
} 
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-30T04:37:30.960

我希望这会对你有所帮助

它对我有用

```
<a href="index.php?action=del&id=125" onclick="return confirm('Are you sure you want to delete?')">Delete</a> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-21T07:10:54.427

首先在您的 HTML 中添加一个 onclick 方法，例如：

```
**HTML:**
<a class="btn btn-danger" href="some url" onclick="DeleteItem();"></a>
**JavaScript:**
function DeleteItem() 
{
     return confirm("Are you sure to delete this")
}
// Or you can simply do it like below:
<button onclick="javascript: return confirm('Are you sure to delete?');">Delete</button> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T20:34:52.743

在 javascript 中绑定您的事件处理程序。

```
<input type="button" id="delete" value='Delete' />

document.getElementById('delete').onclick = function () {
    if (confirm('Are you sure?')) {
        parent.location='<?php echo "delete.php?id=" . $people['id'] ?>';
    }
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-06T01:34:15.677

使用 onclick 事件处理程序添加按钮元素，如下所示：

```
<input type="submit" name="delete" value="Delete" onclick="return confirmDelete();"> 
```

和 JavaScript 内容如下：

```
function confirmDelete() { 
    return confirm("Are you sure you want to delete?");   
} 
```

这个对我有用。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-24T20:27:20.687

如果您不喜欢使用 JavaScript，HTML 还支持表单上的重置按钮。你可以有这样的结构：

```
<form>
...
items in your form
...
<input type="reset">
...
</form> 
```

单击重置按钮时，所有表单输入将重置为其默认值。

# jquery - 在 Chrome 中单击带有非常基本 jQuery 的链接时出现 INDEX_SIZE_ERR

> ID：11638657
> 
> 赞同：4
> 
> 时间：2012-07-24T20:16:14.820
> 
> 标签：jquery, google-chrome, hyperlink

通过在 Chrome 版本 20.0.1132.57 中附加一些基本 jQuery 的简单链接多次单击出现以下错误：

```
Error in event handler for 'undefined': INDEX_SIZE_ERR: DOM Exception 1 undefined 
```

这是一个非常基本和简单代码的现场演示，要触发错误，只需在控制台日志打开（开发人员工具）的情况下多次发送垃圾链接：http: [//jsfiddle.net/ZkXDy/](http://jsfiddle.net/ZkXDy/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T13:15:15.720

在评论中发布了解决方案，但认为它作为对任何有相同问题的人的答案会更明显。

尝试一一停用和重新激活我的扩展程序，当快速点击变成双击并触发导致某种错误的扩展时，似乎**谷歌词典（由谷歌）导致了这个问题！**

感谢 MrOBrian 引导我朝着正确的方向前进

# javascript - javascript：如何遍历日期对象

> ID：11638658
> 
> 赞同：0
> 
> 时间：2012-07-24T20:16:15.187
> 
> 标签：javascript, jquery

我不知道怎么问这个，但是有没有办法获取当前的本地全年，然后创建一个循环来获取过去 18 年并将它们打印到屏幕上？

这是我尝试过的...

```
function allYears(){
  var d = new Date();
  var y = d.getFullYear();
  var years = '';
  for(var i=0; i>18; i++){
    years += '<option value="'+y+'">'+y+'</option>';
    y = y-1;
  }
return(years);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:22:11.970

你很接近，但有两个问题：

1）`d.getFullYear`应该是`d.getFullYear()`，否则你没有得到年份，只是参考方法

2）`> 18`应该是`< 18`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T21:19:30.530

摆弄工作示例：http: [//jsfiddle.net/aMFpw/6/](http://jsfiddle.net/aMFpw/6/)

您与原始实施非常接近。

这里的Javascript：

```
 function getYears(num){
    var d  = new Date();
    var y = parseInt(d.getFullYear());

    var years = "";

    //need to add one to our number based on our loop index.
    num++;

    for(var i=0; i<num; i++){
        years += '<option value="' + y + '">' + y + '</option>';
        y--;    
    }

    return years;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:19:19.620

我建议对引用年份的变量执行数学运算，当您通过`for`循环递增（或递减）时，只需将递增变量（`i`在本例中）添加或删除保存年份的变量：

```
function addYears(el, num) {
    if (!el) {
        return false;
    }
    else {
        for (var i=0; i < num; i++) {
            var opt = document.createElement('option'),
                year = new Date().getFullYear() - i;
            opt.value = year;
            opt.textContent = year;
            el.appendChild(opt);
        }
    }
}

addYears(document.getElementById('years'), 18);​ 
```

[JS Fiddle 概念证明](http://jsfiddle.net/davidThomas/r6nED/)。

在您的代码摘录中，我建议将内容修改为：

```
function allYears(){
  var d = new Date();
  var y = d.getFullYear();
  var years = '';
  for(var i=0; i<18; i++){
    years += '<option value="'+ (y - i) +'">'+ (y - i) +'</option>';
  }
return(years);
} 
```

其中，随着循环的进行，应该返回的`option`元素的年份值逐渐早于`y`.

此外，循环中的中间条件是`for`循环必须为真才能继续进行的评估（当它停止为真时是循环退出时），所以它*应该*是`i < 18`（因为`i`开始等于`0`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T20:22:47.257

作为一个函数：

```
function printYearsBefore(date,num) {
   var yr = parseInt(date.getFullYear()), i =0;
   while(++i <= num){
     document.write((yr-i));
   }
}

printYearsBefore(new Date(),18); 
```

# python - 使用for循环时如何防止输出文件中出现重复文本

> ID：11638659
> 
> 赞同：-1
> 
> 时间：2012-07-24T20:16:19.227
> 
> 标签：python, duplicates

我有这段代码，它将一个数字与域范围内的一个数字（我在代码中称为项目）进行比较，以查看它是否已经存在。如果是，则打印到输出文件，如果不是，则仅打印一次。

**问题**如何确保如果数字不在域范围之间，则只打印一次。（我使用了真假语句，但这不起作用，因为当它为假时，它会打印几个重复项-在下面的代码上我不确定如何实现，以便它打印一次不在域范围内的数字多次）

```
for item in lookup[uniprotID]:
    for varain in wholelookup[uniprotID]:
        for names in wholeline[uniprotID]:
            statement=False
    if re.search(r'\d+',varain).group(0)==item and start <= int(item) <= end:
        result = str(int(item) - start + 1)
        if varain in names.split(' '):
            statement = True
            print ">{0} | at position {1} | start= {2}, end= {3} | description: {4} | {5}".format(uniprotID, result, start, end, varain, names)
            if statement == True:
                print(''.join(makeList[start-1:end])) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:25:17.573

存储不在范围内的值。

```
stored_prints = {}

if not ( start <= int( item ) <= end ):
    try:
        stored_prints[item]++
    except:
        stored_prints[item] = 1

print stored_prints 
```

不过，您必须对其进行格式化并使其适合您的需要，但是如果我正确理解了您的问题，这应该可以满足您的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:29:41.490

基于此的某些东西可能对您有用：

```
already_seen = set()
for line in sys.stdin:
   if line not in already_seen:
      already_seen.add(line)
      sys.stdout.write(line) 
```

并不是说如果您的文件很大，您最终可能会为此消耗大量虚拟内存。如果是这样，请查看 anydbm 或布隆过滤器。

# iis-7 - 主机文件 - 错误 404

> ID：11638661
> 
> 赞同：0
> 
> 时间：2012-07-24T20:16:27.790
> 
> 标签：iis-7, http-status-code-404, hosts

我正在尝试在 ASP.NET IIS 配置中运行测试和生产站点。我的 Hosts 文件中有以下条目：

```
172.16.5.178    testsite       ### test site
172.16.170.41   www.mysite.com  ### LIVE WEBSITE 
```

我在这里有两个问题：我无法使用 IP 地址或在浏览器中使用“testsite”导航到我的测试站点。我尝试使用所有组合：`http://testsite, http://mysite:8080, http://mysite:80, 172.16.5.178, 172.16.5.178:80`等等。但它们都不适合我。

但是，如果我使用以下条目，则它可以正常工作：

```
 172.16.5.178   www.mysite.com  ### test site 
```

请注意，我使用了来自 Live Site 的测试服务器 IP 地址和实际名称，并且它有效。

谁能告诉我为什么会这样？我认为无论我使用什么作为名称，写入 Hosts 文件都会导航到相应的 IP 地址。事实上，它会转到该 IP 地址，但显示“未找到”和“HTTP 错误 404。未找到请求的资源”。错误。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:30:52.687

编辑您的主机文件基本上会将您的浏览器发送到该主机/网址的指定 IP 地址。如果有意义的话，目标 IP 地址必须在另一端有一些期望的东西。

如果您在 IIS 上的 172.16.5.178 上设置了一个名为 的站点，`testsite`绑定为`testsite`，那么它可以正常工作，因为它知道如何处理该请求。然后去`http://testsite`会工作。我假设那是您缺少的部分！

我个人在我的主机文件中有很多开发站点指向网络服务器上的 IIS 安装。您只需要确保目标服务器可以解决如何处理`testsite`.

# scala - 在 Play 控制台中选择性地禁用 log4j 调试日志

> ID：11638664
> 
> 赞同：0
> 
> 时间：2012-07-24T20:16:48.477
> 
> 标签：scala, playframework, log4j, playframework-2.0, crawler4j

我有一个 Play 2.0 应用程序，`play console`从命令行运行。在我使用的一个库中的某个地方，它使用`log4j`并开始流式传输调试输出`[crawler4j][1]`，我试图弄清楚如何在播放控制台中选择性地禁用该输出。我尝试更改以下内容`application.conf`但`logger.xml`没有任何运气

```
application.conf
logger.root=ERROR
logger.play=ERROR
logger.application=ERROR

logger.xml
<logger name="org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager" level="ERROR"/> 
```

这是流式调试日志的示例

```
13:10:18.818 [java-sdk-http-connection-reaper] DEBUG o.a.h.i.conn.tsccm.ConnPoolByRoute - Closing connections idle longer than 60 SECONDS
13:10:18.818 [java-sdk-http-connection-reaper] DEBUG o.a.h.i.c.t.ThreadSafeClientConnManager - Closing connections idle longer than 60 SECONDS
13:10:18.818 [java-sdk-http-connection-reaper] DEBUG o.a.h.i.conn.tsccm.ConnPoolByRoute - Closing connections idle longer than 60 SECONDS
13:10:18.818 [java-sdk-http-connection-reaper] DEBUG o.a.h.i.c.t.ThreadSafeClientConnManager - Closing connections idle longer than 60 SECONDS
13:10:18.818 [java-sdk-http-connection-reaper] DEBUG o.a.h.i.conn.tsccm.ConnPoolByRoute - Closing connections idle longer than 60 SECONDS
13:10:18.818 [java-sdk-http-connection-reaper] DEBUG o.a.h.i.c.t.ThreadSafeClientConnManager - Closing connections idle longer than 60 SECONDS
13:10:18.819 [java-sdk-http-connection-reaper] DEBUG o.a.h.i.conn.tsccm.ConnPoolByRoute - Closing connections idle longer than 60 SECONDS
13:11:18.818 [java-sdk-http-connection-reaper] DEBUG o.a.h.i.c.t.ThreadSafeClientConnManager - Closing connections idle longer than 60 SECONDS
13:11:18.818 [java-sdk-http-connection-reaper] DEBUG o.a.h.i.conn.tsccm.ConnPoolByRoute - Closing connections idle longer than 60 SECONDS
13:11:18.819 [java-sdk-http-connection-reaper] DEBUG o.a.h.i.c.t.ThreadSafeClientConnManager - Closing connections idle longer than 60 SECONDS
13:11:18.819 [java-sdk-http-connection-reaper] DEBUG o.a.h.i.conn.tsccm.ConnPoolByRoute - Closing connections idle longer than 60 SECONDS 
```

需要明确的是，当我从命令行运行 Play 应用程序时会强制执行日志设置，而当我从命令行运行它时，**`play console`**不会强制执行设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:54:53.703

我不认为 log4j 实际上在这里使用。Apache HTTP 客户端，它是产生调试的库，通过 apache commons 日志记录。

Play2 使用带有 logback 后端的 SLF4J API。

在您的类路径中有一个名为 jcl-over-slf4j 的库，它会导致日志消息进入 apache commons 日志记录以[通过 SLF4J 桥接](http://www.slf4j.org/legacy.html)，然后改为 logback。（我知道这很复杂，但是试图让 SLF4J 充当所有其他人的门面，并且它的后端是“一个记录器来统治他们”）。

play2[文档](http://www.playframework.org/documentation/2.0.2/SettingsLogger)表明 logger.xml 应该允许您完全自定义日志记录设置，所以我认为当存在 logger.xml 文件时，application.conf 设置无效。

logger.xml 需要是一个完整的[logback 配置文件](http://logback.qos.ch/manual/configuration.html)。我不确定您是发布了 logger.xml 的全部内容还是仅发布了更改。

要抑制显示的输出，您应该能够将 logger.xml 的内容设置为如下所示：

```
<configuration>

  <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
      <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
    </encoder>
  </appender>

  <logger name="org.apache.http.impl.conn.tsccm" level="error" />

  <root level="debug">
    <appender-ref ref="STDOUT" />
  </root>

</configuration> 
```

如果这不起作用，请将顶行更改为：

```
<configuration debug="true"> 
```

这将导致 logback 记录其配置自身的尝试。这可能会提供更多指示。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T00:38:18.687

这对我有用：

```
import org.slf4j.{Logger, LoggerFactory}

LoggerFactory.getLogger(Logger.ROOT_LOGGER_NAME).asInstanceOf[
  ch.qos.logback.classic.Logger].setLevel(ch.qos.logback.classic.Level.INFO) 
```

# android - 这个正则表达式有什么作用？为什么要使用它？

> ID：11638670
> 
> 赞同：0
> 
> 时间：2012-07-24T20:17:59.040
> 
> 标签：android, regex, text, floating-point

我在工作中做一些代码维护，我遇到了这个小片段......

```
public CharSequence filter(CharSequence source, int start,
                int end, Spanned dest, int dstart, int dend) {
            if (end > start) {
                String destTxt = dest.toString();
                String resultingTxt = destTxt.substring(0, dstart) + source.subSequence(start, end) + destTxt.substring(dend);

                try {
                    if (!resultingTxt.matches("[0123456789]*[.]?[0123456789]{0,2}")||
                            Float.parseFloat(resultingTxt)>360f) {
                        if (source instanceof Spanned) {
                            SpannableString sp = new SpannableString("");
                            return sp;
                        } else {
                            return "";
                        }

                    }
                } catch (NumberFormatException nfe) {
                    // doesn't matter.
                }
            }
            return null;
        } 
```

现在我不是 reg ex 专家，但在我看来这是一种非常冗长的方法来检查文本框是否不为空、是否包含 0 到 360 之间的数字、不超过 2 位小数精度，并且不'不包含文本。我错过了什么吗？这来自一个 android EditText。

下一部分 - 为什么以主的名义你会这样做，而不是强制文本仅是数字，并使用 Double.parseDouble() 或类似的东西？正则表达式是否值得快得多？

这段代码是一团糟，所以如果这个人一直在阅读我不会感到惊讶 - [http://freeworld.thc.org/root/phun/unmaintain.html](http://freeworld.thc.org/root/phun/unmaintain.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:28:21.787

您可以在在线工具上测试硬正则表达式，例如这个很酷的网站：

[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:43:42.073

> [0123456789]*

数字。括号告诉我们“其中任何一个都可以”。最后的星表示它可以以任意数量（零或更多）重复。

> [.]？

同样，括号表示“其中任何一个”。它可以被删除（只有一个选项），但是点“。” 如果它发生在括号之外，它在正则表达式中也有含义：它的意思是“任何字符都可以”。要将点用作字符，它应该被转义（可能是“\.?”）。这 ”？” 告诉我们这可能发生一次或零次。在括号内，点不表现为元字符。

> [0123456789]{0,2}

花括号告诉我们可以重复多少次与以前相同的模式。{n,m} 可以理解为“重复至少 n 次但不超过 m 次”。这表示文本可以有从没有额外数字到 2 个额外数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:29:43.527

您假设所有正则表达式所做的都是确认输入是一个数字，不为空，并且小数点后不超过 2 位，这是正确的。

不，没有理由在这个地方使用正则表达式而不是`Double.parseDouble()`. 事实上，在我进行的一次快速测试中，正则表达式的 10,000 次迭代所用的时间（348 毫秒）是`Double.parseDouble()`格式（71 毫秒）的 5 倍。另外，他调用了一个解析号码无论如何，以检查它是否是`> 360f`. 为什么？谁知道。

这里的编码员要么试图快速完成工作，要么不太了解 Java。我的猜测是后者，但我希望是前者。

*PS：那是一个很棒的链接。成就了我的一天。:)*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T20:36:00.240

正则表达式（我可以肯定回答的唯一部分）没有按照作者的意图去做。基本上，它检查字符串是任意位数，然后是*任何*字符的 0 或 1，然后是 0 到 2 个整数位。

有效字符串将包括

```
1234567H12
q2
& 
```

等等如果作者打算匹配一个点，那么正则表达式的那部分应该是：

```
[\.]? 
```

它也匹配空字符串。

# javascript - 在jQuery中创建一个按钮

> ID：11638672
> 
> 赞同：0
> 
> 时间：2012-07-24T20:18:03.360
> 
> 标签：javascript, jquery

如何在 jQuery 中创建一个事件，每次单击“创建”按钮时添加一个“喜欢”按钮？

目前我只有一个“创建”按钮，每次单击它时，我都希望将一个“喜欢”按钮添加到页面中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:21:32.390

jQuery 有一个 .append() 方法。使用它可以将任何文本或标记添加到 HTML 文档中的元素。使用它来添加必要的标记以在您的页面上创建一个新按钮。

[http://api.jquery.com/append/](http://api.jquery.com/append/)

# embedded-linux - 如何控制嵌入式linux gpio？

> ID：11638674
> 
> 赞同：1
> 
> 时间：2012-07-24T20:18:10.107
> 
> 标签：embedded-linux, vala, gpio

以下 shell 命令可以很好地切换 Leopardboard gpio 31：

```
echo 31 > /sys/class/gpio/export
echo out > /sys/class/gpio/gpio31/direction
echo 0 > /sys/class/gpio/gpio31/value
echo 1 > /sys/class/gpio/gpio31/value
echo 0 > /sys/class/gpio/gpio31/value 
```

[这](https://www.ridgerun.com/developer/wiki/index.php/Gpio-int-test.c)用作以下代码的示例。知道为什么以下 .vala 代码不会切换 gpio 31 吗？

```
public void sync () {
    int fd = -1;
    fd = open("/sys/class/gpio/export", O_WRONLY);
    if (fd < 0) {
        GLib.stdout.printf("Error sync export\n");
        return;
    }
    write(fd, "31", 3);
    close(fd);
    fd = open("/sys/class/gpio/gpio31/direction", O_WRONLY);
    if (fd < 0) {
        GLib.stdout.printf("Error sync direction\n");
        return;
    }
    write(fd, "out", 4);
    close(fd);
    fd = open("/sys/class/gpio/gpio31/value", O_WRONLY);
    if (fd < 0) {
        GLib.stdout.printf("Error sync value\n");
        return;
    }
    write(fd, "0", 2);
    write(fd, "1", 2);
    Thread.usleep (1000); /* 1ms */
    write(fd, "0", 2);
    close(fd);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T04:04:35.310

`echo 31`实际上会导致 \x33\x31\x0a，但您的`write`调用将写入 \x33\x31\x00。尝试这样的事情：

```
write(fd, "31\n", 3); 
```

并且您需要对其他调用进行类似的调整`write`。

# elasticsearch - elasticsearch中不区分大小写的搜索

> ID：11638676
> 
> 赞同：3
> 
> 时间：2012-07-24T20:18:49.263
> 
> 标签：elasticsearch, case-insensitive

我尝试在 elasticsearch.yml 文件中创建一个条目，以创建与要点中提到的相同的自定义分析器：[https ://gist.github.com/1403902](https://gist.github.com/1403902)

但我收到以下错误 `{"error":"RemoteTransportException[[Banner, Robert Bruce][inet[/192.168.1.15:9300]][indices/create]]; nested: MapperParsingException[mapping [type1]]; nested: MapperParsingException[Analyzer [string_lowercase] not found for field [field1]];`

我仍然无法弄清楚如何做到这一点。我已经在 stackoverflow 上搜索了相同的内容并得到了类似的回复（如上面提到的要点中所述）

请给我一个例子，我可以测试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T17:08:58.367

由于配置文件在启动时是只读的，为了使更改生效，您需要重新启动 elasticsearch 集群。您可以为此使用[Shutdown API](http://www.elasticsearch.org/guide/reference/api/admin-cluster-nodes-shutdown.html)，或者使用 kill 命令简单地终止 elasticsearch 进程。

# r - 循环包含 NULL 的向量

> ID：11638680
> 
> 赞同：5
> 
> 时间：2012-07-24T20:19:09.600
> 
> 标签：r

我想循环一个向量并将这些值作为参数发送给一个函数。我要发送的值之一是 NULL。这是我一直在尝试的

```
things <- c('M','F',NULL)
for (thing in things){
    doSomething(thing)
} 
```

但是循环忽略了 NULL 值。有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T20:21:43.247

循环不会忽略它。看看，`things`你会发现`NULL`不存在。

你不能在一个向量中混合类型，所以你不能在同一个向量中同时拥有`"character"`和`"NULL"`类型。请改用列表。

```
things <- list('M','F',NULL)
for (thing in things) {
  print(thing)
}
[1] "M"
[1] "F"
NULL 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T20:24:38.683

当你用 构造一个向量时`c()`，NULL 值被忽略：

```
things <- c('M','F',NULL)
things
[1] "M" "F" 
```

但是，如果传递`NULL`下游很重要，您可以使用 a`list`代替：

```
things <- list('M','F',NULL)
for (thing in things){
  print(thing)
}
[1] "M"
[1] "F"
NULL 
```

# asp-classic - 经典 ASP 将字符串转换为 windows-1252

> ID：11638681
> 
> 赞同：1
> 
> 时间：2012-07-24T20:19:11.537
> 
> 标签：asp-classic, utf-8

我正在处理一个以 UTF-8 编码的 POST 请求。此 POST 请求负责在某个文件夹中创建文件。但是，当我查看俄语字符的文件名时，我看到文件名的垃圾值（文件内容正常）。文件名的英文字符是可以的。在我看到的脚本中：

```
Set fsOBJ= Server.CreateObject("Scripting.FileSystemObject")
Set fsOBJ= fsObj.CreateTextFile(fsOBJ.BuildPath(Path, strFileName)) 
```

我相信“strFileName”是我的问题。Windows 似乎不喜欢 UTF-8 文件名。关于如何解决这个问题的任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:21:43.140

VBScript 字符串是严格的 2 字节 unicode，用于存储或传输字符串的任何编码都会在 VBScript 中存在字符串之前转换为 unicode。

我的猜测是您的表单帖子带有文件名，并且帖子被编码为 UTF-8。但是，在解码带有文件名的表单字段时，您的接收页面的 CodePage 设置为 65001（UTF-8 代码页）以外的值。因此，从表单中检索到的字符串已损坏。

添加`<%@ CODEPAGE=65001 %>`到您的页面，包含`Response.CharSet = "UTF-8"`在页面顶部并将其保存为 UTF-8。

现在，当源表单将 UTF-8 编码的表单数据发布到页面时，表单数据将被正确解码为 un​​icode。

# javascript - 使用管几何的直管

> ID：11638686
> 
> 赞同：0
> 
> 时间：2012-07-24T20:19:20.630
> 
> 标签：javascript, three.js

如何使用 TubeGeometry 创建直管？

我只能找到曲线的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:29:34.017

我最终查看了文档，并且有额外的参数允许我将圆柱体设置为开放式或不开放式。

正如 mrdoob 所说，我还将 doubleSided 设置为 true，因此圆柱体内部不会显示为空白。

编辑：抱歉忘记展示我是如何使用参数的。

```
THREE.CylinderGeometry = function ( radiusTop, radiusBottom, height, segmentsRadius, segmentsHeight, openEnded ) 
```

# c++ - 二叉树形成错误

> ID：11638687
> 
> 赞同：0
> 
> 时间：2012-07-24T20:19:23.600
> 
> 标签：c++, binary-tree, nodes, huffman-code

看来我为霍夫曼编码程序创建二叉树的代码有缺陷。我不知道为什么，但是当我在调试器中检查根节点时，左节点指向字母 N，右节点指向父节点。父节点的左节点指向字母N，而右节点指向一个父节点。该父节点的左子节点是字母 N，而...（您知道这是怎么回事）。这是问题所在的代码：

```
huff_sort(nodes); // sort nodes by weight

    //-------BUILDING TREE------
    while(nodes->size() != 1){ //Sorts nodes by weight and then removes two of them and replaces them with one
        int w= (**beg).weight + (**(beg+1)).weight;
        Node* p = new Node;
        p->set_node(w, '*', *nodes->begin(), *(nodes->begin()+1)); //making it the parent node of the two lowest nodes
        nodes->erase(nodes->begin(), nodes->begin()+2);
        unsigned int i = 0;
        while(w > (*nodes)[i]->weight && i <= nodes->size()){ //finds where to insert the parent node based on weight
            i++;
        }
        if(i > nodes->size()) //if it needs to be inserted at the end
            nodes->push_back(p);
        else
            nodes->insert(nodes->begin()+i, p);
        delete p;
    } 
```

从之前的调试中，我知道 huff_sort 函数有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T07:04:58.807

在循环结束时，您执行的操作`delete p`会使指针无效并释放您刚刚插入的节点。

# asp.net-mvc - Ninject DI 导致部署问题

> ID：11638688
> 
> 赞同：2
> 
> 时间：2012-07-24T20:19:35.907
> 
> 标签：asp.net-mvc, deployment, ninject, asp.net-mvc-4

我正在尝试部署一个使用 Ninject for DI 的网站，该网站在我的开发机器上本地运行良好（不是全部！）。部署到我的主机（使用 Visual Studio ftp 发布选项）时，我收到以下错误：

```
Method not found: 'System.Delegate System.Reflection.MethodInfo.CreateDelegate(System.Type)'. 
```

和

```
[InvalidOperationException: An error occurred when trying to create a controller of type 'Website.Controllers.HomeController'. Make sure that the controller has a parameterless public constructor.] 
```

查看堆栈跟踪，似乎**NinjectDependencyResolver.GetService(Type serviceType)**是失败的方法。正如我所说，它在本地运行良好，所以真的不知道在哪里或如何解决这个问题。谷歌搜索没有带来任何有用的东西。

如果相关，我正在使用 Ninject 3.0.1.10。

**编辑：**我已经向家庭控制器添加了无参数构造函数，但它没有任何区别并且存在相同的错误......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T14:30:08.833

我认为您正在针对 .NET 4.5 构建并在 .NET 4.0 上部署，或者您在 .NET 4.0 上为 .NET 4.5 部署 Ninject

# android - Android sp vs dp 文本 - 什么会调整“比例”以及支持的理念是什么

> ID：11638691
> 
> 赞同：28
> 
> 时间：2012-07-24T20:19:51.567
> 
> 标签：android, textview, android-fonts

所以我们从许多其他帖子中知道，我们应该在 Android 中使用 sp 而不是 dp 来表示文本，我们知道这样做的原因是为了尊重“用户的偏好”。

但这些偏好究竟是什么？用户如何更改此设置？

我无法通过手机上的设置找到任何参考（我本来希望在“辅助功能”或“显示”中有一些东西）。那么什么是用户设置？是否只能通过诸如“大字体”之类的应用程序来完成？

假设它是（由类似大字体的东西设置） - 我玩过谷歌文档和其他一些谷歌应用程序，字体设置为 130%。虽然大多数布局都很好，但有些布局被截断并且无法读取（这是在大屏幕 SGS2 上）。那么，使用“sp”开发具有文本大小的应用程序的方法是什么？我们是否确保它适用于 100% 缩放，然后忽略其他设置 - 称其为用户可以担心的特殊情况，或者我们是否竭尽全力确保内容扩展或可滚动，以防文本溢出?

一个论点是我们应该使用“dp”来*保证*用户有机会看到文本（即使他们必须使用放大镜）

想法/评论？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-07-24T20:37:25.503

它显示在某些 Android 设备的设置菜单中（取决于制造商）。它也可能被一些可访问性选项（取决于设备）改变。

通常，您应该始终使用与比例无关的像素，尤其是对于大量文本。

但是，如果您的文本必须适合已知大小的边界框，那么您应该使用与密度无关的像素，以确保文本始终正确适合，并且无论用户的设置如何，所有字符都是可见的。

简而言之：将文本大小增加大约 5sp 会导致文本不可读或破坏您的 UI？如果是这样，请使用与密度无关的像素。如果不是，请使用与比例无关的像素。但是，您通常应该尽可能使用与比例无关的像素，这意味着设计一个可以适应不同文本大小的 UI。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-24T20:31:04.337

建议对文本使用`sp`单位，因为在 ICS 及更高版本中（也可能是 Honeycomb，如果我错了，请纠正我），对用户的字体大小*有*偏好。因此，如果您使用的是 Gingerbread 或更低版本，您将无法找到此设置。

首选项位于设置、显示、字体大小下。在设置、辅助功能、大文本下也有一个选项。

要解决您关于如何使用的问题`sp`，请注意，默认情况下，在不更改任何字体大小首选项的情况下，`1sp`等效于`1dp`（此外，在引入首选项之前它们是等效的）。正如您所指出的，针对用户拥有大量文本的情况进行设计可能会要求您假设内容需要滚动到您可能不希望它们滚动的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-25T23:18:22.243

答案在于从整体上看待这个特定问题。

使用“sp”字体大小的动机在于让开发人员能够在面对用户更改其设备上的字体大小时控制其布局。

例子：

让我们看两个极端情况：

1）用户选择字体大小“小”

这是我的布局的样子：

[http://postimg.org/image/kiyqeo2bh/](http://postimg.org/image/kiyqeo2bh/)

这是布局xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="16dp"
android:paddingLeft="16dp"
android:paddingRight="16dp"
android:paddingTop="16dp"
tools:context=".MainActivity"
android:orientation="vertical">

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_row="0"
    android:layout_column="0"
    android:text="Material-Design ist die Scheiße"
    android:textSize="18sp"
    android:background="#ffff0000" />
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_row="0"
    android:layout_column="0"
    android:text="Material-Design ist die Scheiße"
    android:textSize="25sp"
    android:background="#ffff0000" /> 
```

2）如果用户选择字体大小“巨大”：

这就是我的布局：

[http://postimg.org/image/d7rax9wob/](http://postimg.org/image/d7rax9wob/)

在案例 1) 中，我的布局 xml 与上面相同。

因此，正如您所看到的，顶部的 TextView 在 sp 中具有某种完美的字体大小，因为它不会对整个字体大小范围（从小到大）进行换行。但是在案例 2) 中，底部的 TextView 完全搞砸了你的布局/设计。

因此，作为开发人员，您可以迭代并决定 sp 中的大小适合您的设计，而 android 将为您绘制它。

# java - 在颠覆中合并两个本地文件

> ID：11638693
> 
> 赞同：1
> 
> 时间：2012-07-24T20:20:11.120
> 
> 标签：java, svn

我摧毁了我的颠覆树。（我试图忽略一些文件，破坏了一些东西，现在 svn 说它找不到我的根目录，即使它正确地记录了所述目录中文件之间的差异。）所以，现在我有大约 20 个文件来自我的我想提交但不能提交的当前项目。

我最终完全签出了一棵新树，但现在我不知道如何智能地将我的文件从损坏的树合并到我刚刚签出的新树中。我不想简单地复制文件，因为这会擦除其他人在我更新后所做的更改。（损坏的树不允许我更新。）使用'svn merge'并不意味着在两个本地副本上使用，对吗？我可以使用哪些工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:22:58.973

使用[kdiff3](http://kdiff3.sourceforge.net/)并手动将您的更改合并到存储库中。然后提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:23:33.027

我认为您找不到比[winmerge更好的合并工具](http://sourceforge.net/projects/winmerge/)

顺便说一句 - 我不喜欢 kdiff3 :)

# php - 如何grep目录中的所有文件“$_POST”或“$_GET”和“include”

> ID：11638694
> 
> 赞同：-2
> 
> 时间：2012-07-24T20:20:11.740
> 
> 标签：php, linux, grep

我想要一个 grep，其中包含以下每个组中的一个或多个。

“包括，包括一次，执行”

和

“$_GET, $_POST”

因此，该文件必须具有来自两个组的一个或多个。（检查整个目录的 php 文件）

我正在尝试扫描一些 PHP 文件中的漏洞，但我真的很讨厌 grep :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:03:23.027

我建议从简单的命令开始，例如：

```
grep --color=auto -ER '\$_POST|\$_GET' . 
```

或者

```
grep --color=auto -ER 'include(_once)+|exec\(|require(_once)+' . 
```

上述命令将为输出中找到的模式着色。注意正则表达式（通过 -E 启用）和递归搜索（通过 -R）。正则表达式的特殊字符通过退格符转义（即 $ char 和 exec 的左括号）

要查看找到的事件的上下文，请使用 grep 的 -C *num*参数来查看找到的行周围的*num*行：

```
grep --color=auto -C 2 -ER '\$_POST|\$_GET' . 
```

如果要在找到的模式出现的行之前或之后输出不同数量的行，也可以使用 -A(fter) 和 -B(efore)。您也可以使用 -n 参数来获取找到的事件的行号。如果您想更花哨，可以将 find 命令与 xargs 和 grep 结合使用，或者使用通过管道连接的多个 grep 命令，但在网络上的教程中有更好的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:35:47.127

`grep -l`只会列出匹配的文件；然后，您可以将其输出通过管道传输到另一个 grep：

`grep -l -e "$_POST" -e "$_GET" * | grep -e "include" -e "include_once" -e "exec"`

# python - python中的舍入错误

> ID：11638698
> 
> 赞同：2
> 
> 时间：2012-07-24T20:20:28.840
> 
> 标签：python, rounding, numerical-computing

为什么乘法的顺序会影响结果？考虑以下代码

```
a=47.215419672114173
b=-0.45000000000000007
c=-0.91006620964286644
result1=a*b*c
temp=b*c
result2=a*temp
result1==result2 
```

我们都知道*result1* **应该等于**result2 *，*但是我们得到：

```
result1==result2 #FALSE! 
```

差异很小

```
result1-result2 #3.552713678800501e-15 
```

**但是，对于特定应用程序，此错误可能会放大，因此执行相同**计算的两个程序的输出（一个使用结果 1，另一个使用结果 2）可能完全不同。

为什么会这样？在大量的数值/科学应用中可以做些什么来解决这些问题？

谢谢！

**更新**

很好的答案，但我仍然想念乘法**顺序**很重要的**原因，例如**

 **```
temp2=a*b
result3=temp2*c
result1==result3 #True 
```

因此，编译器/解释器似乎将 a*b*c 视为 (a*b)*c

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T20:23:00.560

在将浮点数从十进制表示转换为二进制表示时，所有编程语言都会丢失精度。这会导致计算不准确（至少从以 10 为底的角度来看，因为数学实际上是在以二进制表示的浮点值上完成的），包括运算顺序改变结果的情况。大多数语言都提供了一种数据结构来保持以 10 为底的精度，但会以性能为代价。`Decimal`在 Python 中查看。

编辑：

在回答您的更新时，不完全是。计算机按顺序做事，因此当您为它们提供一系列操作时，它们会按顺序逐一进行。除了顺序命令处理之外，没有明确的操作顺序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-24T20:26:09.110

When you use floating point numerals in any programming language, you will lose precision. You can either:

Accomodate for the loss of precision, and adjust your equality checks accordingly, as follows:

```
 are_equal = (result1-result2)>0.0001 
```

Where the 0.0001 (epsilon) is a value you set.

Or use the Decimal class provided with python, which is a bit slower.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-24T20:46:07.460

每次乘法都会产生两倍于原始数字的数字（或位），并且需要进行四舍五入，以使其适合为浮点数分配的空间。当您重新排列订单时，这种舍入可能会改变结果。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-24T20:24:39.053

float comparison should always be done (by you) with a small epsilon like 10^-10

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T20:24:48.673

> We all know that result1 should be equal to result2, however we get:

No, we don't all know that. In fact, they should not be equal, which is why they aren't equal.

You seem to believe that you are working with real numbers. You aren't - you are working with IEEE floating point representations. They don't follow the same axioms. They aren't the same thing.

The order of operations matters because python evaluates each expression, which results in a floating point number.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-24T21:16:30.977

Representing numbers in computers is a big research area in computer science. It is not a problem present only in python but any programming language has this property, since by default it would be too expensive to perform ANY calculation arbitrary accurate.

[The numerical stability](http://en.wikipedia.org/wiki/Numerical_stability) of an algorithm reflects some of the limitations while thinking numerical algorithms. As said before, [Decimal](http://speleotrove.com/decimal/) is defined as a standard to perform precise calculations in banking applications or any application that might need it. In python, there's an [implementation](http://docs.python.org/library/decimal.html) of this standard.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-24T20:31:16.960

原因：可能您的机器/Python 无法处理这么多的准确度。请参阅：[http ://en.wikipedia.org/wiki/Machine_epsilon#Approximation_using_Python](http://en.wikipedia.org/wiki/Machine_epsilon#Approximation_using_Python)

怎么办：这应该有帮助：[http ://packages.python.org/bigfloat/](http://packages.python.org/bigfloat/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-16T15:51:05.393

正如在以前的帖子中很好地回答的那样，这是编程语言中常见的浮点算术问题。你应该知道永远不要对`float`类型应用完全相等。

当您进行此类比较时，您可以使用基于给定容差（阈值）进行比较的函数。如果数字足够接近，则应将它们视为数量相等。就像是：

```
def isequal_float(x1,x2, tol=10**(-8)):
    """Returns the results of floating point equality, according to a tolerance."""
    return abs(x1 - x2)<tol 
```

会成功的。如果我没记错的话，确切的公差取决于`float`类型是单精度还是双精度，这取决于您使用的语言。

使用这样的函数可以让您轻松比较计算结果，例如在`numpy`. 让我们以以下示例为例，其中使用两种方法为具有连续变量的数据集计算相关矩阵：`pandas`方法`pd.DataFrame.corr()`和`numpy`函数`np.corrcoef()`：

```
import numpy as np
import seaborn as sns 

iris = sns.load_dataset('iris')
iris.drop('species', axis = 1, inplace=True)

# calculate correlation coefficient matrices using two different methods
cor1 = iris.corr().to_numpy()
cor2 = np.corrcoef(iris.transpose())

print(cor1)
print(cor2) 
```

结果似乎相似：

```
[[ 1\.         -0.11756978  0.87175378  0.81794113]
 [-0.11756978  1\.         -0.4284401  -0.36612593]
 [ 0.87175378 -0.4284401   1\.          0.96286543]
 [ 0.81794113 -0.36612593  0.96286543  1\.        ]]
[[ 1\.         -0.11756978  0.87175378  0.81794113]
 [-0.11756978  1\.         -0.4284401  -0.36612593]
 [ 0.87175378 -0.4284401   1\.          0.96286543]
 [ 0.81794113 -0.36612593  0.96286543  1\.        ]] 
```

但它们完全相等的结果却不是。这些运算符：

```
print(cor1 == cor2)
print(np.equal(cor1, cor2)) 
```

将主要`False`产生元素方面的结果：

```
[[ True False False False]
 [False False False False]
 [False False False False]
 [False False False  True]] 
```

同样，`np.array_equal(cor1, cor2)`也会 yield `False`。但是，定制功能提供了您想要的比较：

```
out = [isequal_float(i,j) for i,j in zip(cor1.reshape(16, ), cor2.reshape(16, ))]
print(out) 
```

`[True, True, True, True, True, True, True, True, True, True, True, True, True, True, True, True]`

**注意：** `numpy`包括`.allclose()`在 numpy 数组中执行浮点逐元素比较的功能。

```
print(np.allclose(cor1, cor2))
>>>True 
```**

# c# - 旋转 2D 对象 C#

> ID：11638704
> 
> 赞同：1
> 
> 时间：2012-07-24T20:21:13.617
> 
> 标签：c#, .net, visual-studio-2010

我使用 Visual Studio 2010 开始使用 C#

该程序有三个文本框和一个按钮来旋转一个二维点我得到这些文本框 coordenadaX、coordenadaY 和角度需要计算和显示新的二维点有以下代码：

```
 private void button1_Click(object sender, EventArgs e)
        {
            float x = float.Parse(textX.Text);
            float Y = float.Parse(textY.Text);
            double angulo = float.Parse(textAng.Text);
            rotate(x, Y, angulo);

        }

        private void rotate(float cordX, float cordY, double angle)
        {

            double s = Math.Sin(angle);
            double c = Math.Cos(angle);

            double newX = cordX * c - cordY * s;
            double newY = cordX * s + cordY * c;

            lblResult.Text = ("" + newX + "   :   " + "" + newY);

        }
    } 
```

例如用户报告：coordenadaX = 10, coordenadaY = 10, Angle = 180 正确答案是新的 2D 点：- 10: -10

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:24:12.930

`Math.Sin` and `Math.Cos` use radians, not degrees. Specify a rotation of `pi` rather than 180 and you'll find that you get the correct answer.

# batch-file - 为什么调用嵌套批处理文件而不在行前添加“调用”退出父批处理文件？

> ID：11638705
> 
> 赞同：36
> 
> 时间：2012-07-24T20:21:18.693
> 
> 标签：batch-file, cmd

我了解如何使用该命令从父文件中调用嵌套的批处理文件`call`，因为有很多资源：

*   *[称呼](http://www.robvanderwoude.com/call.php)*
*   *[呼叫](http://ss64.com/nt/call.html)*(SS64)
*   *[Bat文件终止](https://stackoverflow.com/questions/7393999/bat-file-termination)*

但是，我不明白**为什么**从另一个调用另一个批处理文件会终止父级。

对于一个不太抽象的例子，假设我有一个批处理文件将单独的批处理文件“链接”在一起，并且我**错误地**没有`call`在每一行前面添加：

```
foo.bat
bar.bat 
```

这只会执行 foo.bat 然后退出。要正确执行这两个命令，我必须在每个语句之前添加 call ：

```
call foo.bat
call bar.bat 
```

为什么第一个功能仍然存在？怎么还没改？我注意到它`call`是在 1980 年代后期发布的 MS-DOS 3.3 中引入的，那么这个功能是否仍然存在以实现反向兼容性？

我想不出它的任何（实际）用法，但也许我太习惯于“新”编程技术。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-24T21:08:58.967

DOS使用简单的文本处理（当你`FILES=20`在config.sys中允许*20个*文件句柄时），所以打开文件，读取下一行，关闭文件，然后执行刚刚读取的行。如果该文件调用了另一个文件，则处理将继续处理该文件，因此批处理文件只需要一个文件句柄。

在微软输入`call`命令之前，没有办法恢复到原始文件（不使用诸如将前一个文件的名称作为参数，以及使用临时文件让原始批处理文件知道它已经完成一些处理的技巧，然后可以`GOTO`是文件的下一部分）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-25T08:46:02.310

正如 Sean Cheshire 所写，向后兼容是必要的。

但是不使用从批处理文件启动批处理文件`CALL`不会终止父级！
看起来是这样，因为在第二批退出后，父级通常不会进一步执行。
但是在启动 second.bat 之前使用调用将显示第一批未终止。

**父.bat**

```
echo parent.bat
call :myLabel
echo back in parent.bat main
exit /b

:myLabel
second.bat & echo back in parent.bat
exit /b 
```

**第二个.bat**

```
echo second.bat
exit /b 
```

我在这里使用`secpond.bat & echo back ...`来避免 cmd.exe 的另一个错误/功能。
如果您不使用`second.bat`任何附加功能，它将开始`second.bat` **并**跳转`:myLabel`到`second.bat`!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:40:02.303

`Call`基本上是说“去执行这个其他批处理文件，然后回到这里继续”。它从 DOS 3.3 左右就已经存在，如果现在将其删除，将破坏所有向后兼容性（这就是人们仍在使用批处理脚本的原因）。它也可以用于分支到`:link`位置。

有关使用和语法的信息（供其他人将来参考），您可以查看此[MS TechNet 链接](http://technet.microsoft.com/en-us/library/cc732835.aspx)

如果您需要新功能，请改用 CMD 脚本或 PowerShell 脚本。

# node.js - 在 Web 客户端和 NodeJS 服务器之间共享常量

> ID：11638706
> 
> 赞同：2
> 
> 时间：2012-07-24T20:21:18.863
> 
> 标签：node.js, socket.io

我有一个在客户端和服务器之间具有公共常量的 NodeJS 应用程序。

常量存储在变量中而不是内联。这些变量可以在两个单独的文件中定义，一个用于客户端，一个用于服务器。

**文件 1：**

```
// client_constants.js
MESSAGE_TYPE_A = "a";
MESSAGE_TYPE_B = "b"; 
```

**文件 2：**

```
// server_constants.js
exports.MESSAGE_TYPE_A = "a";
exports.MESSAGE_TYPE_B = "b"; 
```

为避免重复代码，我想将常量存储在单个位置和客户端和服务器的单一格式中。做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T21:06:32.057

你可以这样做：

```
// constants.js
root = exports ? window
root.MESSAGE_TYPE_A = "a";
root.MESSAGE_TYPE_B = "b"; 
```

客户端不存在“exports”，在这种情况下，它将使用默认的“window”对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-15T00:37:09.907

有点像 Hector 的回答，但在我的 Node 版本和我的浏览器中工作，因为它使用与`"undefined"`和的比较`typeof`。

```
var context = (typeof exports != "undefined") ? exports : window;
context.constant_name = "constant_name_string"; 
```

# objective-c - 'pod install' 不会更新现有的 pod

> ID：11638711
> 
> 赞同：42
> 
> 时间：2012-07-24T20:21:44.927
> 
> 标签：objective-c, cocoapods

我正在尝试使用更新我的 pod`pod install`并发现它无法正确更新，***除非我删除原始 pod***。

是否需要一些额外的步骤，或者是否存在导致更新失败的常见错误？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-10-16T03:04:12.243

我不确定从哪个版本开始，但是如果您将 cocoapods 安装更新到最新版本，您会找到两个新命令来帮助解决这个问题。

```
pod outdated 
```

这将列出所有有可用更新的 pod。

```
pod update 
```

这将更新上一个命令中列出的 pod

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-27T13:21:39.927

您可以添加详细标签并查看更新期间是否出现错误。

```
pod install --verbose 
```

使用`--verbose`是找出发生了什么的最好方法。它尝试更新的存储库可能存在问题。很难说。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-07-06T09:24:02.187

我认为这个问题的读者必须了解

> **pod 安装与 pod 更新**

许多从 CocoaPods 开始的人似乎认为`pod install`仅在您第一次使用 CocoaPods 设置项目时使用它，然后`pod update`再使用它。但事实并非如此。

*   用于`pod install`在您的项目中安装新的 pod。即使你已经有一个 Podfile 并且之前运行`pod install`过；因此，即使您只是在已经使用 CocoaPods 的项目中添加/删除 pod。
*   `pod update [PODNAME]`仅在您要将特定 pod 更新到较新版本时使用 。
*   `pod update`仅当您想要将每个 pod 更新到更新的可用版本时使用 。

每次`pod install`运行命令时——并下载和安装新的 Pod——它都会在文件中写入它为每个 Pod 安装的版本`Podfile.lock`。此文件跟踪每个 pod 的已安装版本并锁定这些版本。当您运行时`pod install`，它只会解析`Podfile.lock`. 对于 中列出的 pod `Podfile.lock`，它会下载 中列出的显式版本，而`Podfile.lock`不会尝试检查是否有新版本可用 对于尚未列出的 pod `Podfile.lock`，它会搜索与 Podfile 中描述的版本匹配的版本（如 中`pod 'MyPod', '~>1.2'`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-15T19:04:27.913

如果您的项目[配置正确](https://stackoverflow.com/a/22429384/35690)，您应该可以删除整个`Pods`目录并运行`pod install`。我发现当 pod 安装不正确时，这有时是最好的解决方案。

**注意：**如果您在构建时开始收到此类错误：

```
diff: /../Podfile.lock: No such file or directory
diff: /Manifest.lock: No such file or directory
error: The sandbox is not in sync with the Podfile.lock. Run 'pod install' or update your CocoaPods installation. 
```

...您可能需要[在 Xcode 中关闭并重新打开项目](https://stackoverflow.com/a/22428278/35690)。

**警告：**确保在删除 Pods 目录之前重新创建 Pods 目录中的所有文件。（即确保您没有手动修改或添加文件到 Pods 目录。）

# vba - 一个将连续返回最小值的单元格地址的程序？

> ID：11638712
> 
> 赞同：4
> 
> 时间：2012-07-24T20:21:51.550
> 
> 标签：vba, excel, excel-2010

所以我有一个看起来像这样的图表。假设左上角的值 1 在单元格 A1 中：

```
x=    1    2    3    4    5    6    7    8

      4    3    2    1    2    3    4    5

      9    8    7    6    7    8    9    10

      8    7    6    5    4    3    2    1

Sum= 21   18   15   12   13   14   15    16 
```

有从 1 到 8 的 x 值，以及使用它的方程或低于它的东西产生的三列值。总和是低于其对应 x 值的三个值的总和。

我一直试图找出将通过总和行，找到最小值，然后将其对应的 x 值分配给变量的东西。我还需要将该 x 值左侧和右侧的值分配给其他变量。

对于这个特定的图表，12 是最小的总和，所以我会分配`variable1 = 4`，因为那是该列对应的 x 值。然后我的第二个变量（称为`lowerbound`）将等于 3，因为它位于 x = 4 的左侧，而我的第三个变量（称为`upperbound`）将等于 5，因为它位于 x = 4 的右侧。

如果我可以获得与最小总和相对应的 x 值返回的单元格地址，那么我可以将其分配给一个变量，然后简单地从该单元格偏移以分配其他变量。即使我可以编写一个程序来返回最小和值的单元格，我也可以偏移到 x 行，然后从那里开始。

我该怎么做这样的事情？

**TL:DR：要更清楚地问，因为这有很多词：检测求和行中的最小值并返回该值的单元格地址的程序是什么样的？**

行的长度是未知的，并且变化很大，但列的长度是给定的。它们确实会根据问题而改变，但它们将永远为人所知。所以我总是会知道一列有多少行，但我不会知道一行有多少列。

这是我一生中写过的最令人困惑的措辞，但我希望我已经解释得足够好，以使一些意义。

顺便说一句，你们真的很了不起。到目前为止，我已经在这个程序上取得了进展，这完全是因为你的帮助。老实说，我认为我仍然会在一开始就和你们在一起！你愿意容忍新手不断的提问。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T20:32:02.757

我假设总和在`A4:H4`. 请根据需要更改

您可以使用类似的公式

```
=CELL("address",INDEX(A4:H4,MATCH(MIN(A4:H4),A4:H4,0))) 
```

如果你想使用 VBA，那么你可以使用这个

```
Sub Sample()
    MsgBox Application.Evaluate("=CELL(""address"",INDEX(A4:H4,MATCH(MIN(A4:H4),A4:H4,0)))")
End Sub 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-24T20:36:42.897

使用您的示例，以下公式返回第 1 行中第 5 行中的值最低的单元格地址：

`=ADDRESS(1,MATCH(MIN(A5:H5),A5:H5,0))`

如果您想要该单元格的值，请使用`INDIRECT`. 它将地址作为字符串。

`=INDIRECT(ADDRESS(1,MATCH(MIN(A5:H5),A5:H5,0)))`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T20:48:38.857

如果通过对数组求和来对列求和。这是VBA版本：

```
For j = 1 To 8
     For i = 1 To 3
          sum(j) = sum(j) + Cells(i + 1, j + 1)
    Next i
    Cells(5, j + 1) = sum(j)
Next j 
```

# asp.net-mvc - 为什么模型、视图和控制器之间的交互看起来不一样？

> ID：11638714
> 
> 赞同：1
> 
> 时间：2012-07-24T20:22:00.570
> 
> 标签：asp.net-mvc

我是 ASP.NET MVC 的新手，正在尝试学习基础知识。我现在正在尝试学习模型、视图和控制器之间的关系。

这三者的互动看起来不一样，为什么呢？（看箭头）

来源 1： [MSDN](http://msdn.microsoft.com/en-us/library/dd381412%28v=vs.100%29)

资料来源 2（第 65 页）：[史蒂文·桑德森](http://books.google.se/books?id=M2BLtR7oNcQC&printsec=frontcover&hl=sv&source=gbs_ge_summary_r&cad=0#v=onepage&q&f=false)

如果你能帮我解决我的困惑，我会很高兴

谢谢

编辑：你的意思是 mvc 可以以不同的方式实现？（仍在询问 asp.net mvc - 一般不是 mvc）

我一直在看[mvcmusicstore](http://mvcmusicstore.codeplex.com/) ，它看起来像这样。控制器：

```
public ActionResult Details(int id)
    {
        var album = storeDB.Albums.Find(id);
        return View(album);
    } 
```

模型：

```
public class Album
{
    public int AlbumId { get; set; }
    public int GenreId { get; set; }
    public int ArtistId { get; set; }
    public string Title { get; set; }
    public decimal Price { get; set; }
    public string AlbumArtUrl { get; set; }

    public Genre Genre { get; set; }
    public Artist Artist { get; set; }
} 
```

查看：（必须添加为图像，以正常方式添加代码不起作用） ![风景](../Images/0b852a0b036403dff3a63eb9224cdaf8.png)

这看起来像 MSDN 版本，如何重写以适合 Sandersons 图？也许这会帮助我理解！

再次编辑：

你好，我们又见面了

让我总结一下。如果我错了，请回复。微软希望我们使用 mvc 的方式是我们在上面的 MSDN 链接和 MusicStore 中看到的方式。然后还有 mvc 的其他“版本”，例如 Sandersons（或任何它起源的地方）。所以微软给了我们一个基本的如何使用mvc框架的方法，但是用其他方法也可以。

新手不应该因为看到不同的版本而感到压力，坚持在 MSDN/MusicStore 中看到的版本是完全可以的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:41:57.463

关键的区别是在 Sanderson 的图表中包含了“表示模型”。ASP.NET MVC 实现经常使用模型作为表示模型，即使它们可以不同（我认为它们应该不同，但这是一场圣战，没有必要深入探讨）。

在大多数非常简单的 ASP.NET MVC 应用程序中，模型就是数据实体。无论是 EF 实体还是 Linq2Sql 实体，都没有区别。这是因为大多数应用程序都是简单的表单数据，并且表示可能与持久性是一对一的。

然而，MVC 模式本身并不需要这个。在更纯粹的框架无关形式中，Sanderson 的图表说明了控制器正在与模型交互的事实。从这个意义上说，该模型实际上是“领域核心的门户”。控制器和视图是应用程序的一部分，但模型具有底层业务逻辑，在此之下还有持久层和其他应用程序未知的基础设施信息（当然是适当分离的）。控制器和模型之间的边界是应用程序边界，其他应用程序也可以在该点连接到域核心并与之交互。

表示模型通常只是一个简单的值对象。它不是任何类型的实体，因为它不必像可持久化的业务实体那样展示任何业务行为或维护其生命周期。它只是一个具有某些数据属性的平面对象。

它可以有*一些*行为，但这种行为是针对应用程序的，而不是针对域核心的。例如，也许它有一些视图可以使用的方法或属性。表示模型是应用程序的一部分，因此它是表示层感知的。本质上，它只是保存控制器需要传递给视图的数据（甚至从请求中接收，具体取决于框架）。

在 ASP.NET MVC 中，您会经常看到该模型也用作表示模型。在这些情况下，同一个对象可能扮演两个角色，但这两个角色肯定是不同的。

* * *

**编辑：**刚刚注意到你更新的问题......

在那个例子中，`Album`扮演着领域模型和表示模型的角色。（事实上​​，我认为它根本不是领域模型，因为它太贫乏了。请注意，它没有功能，只有裸数据。）在更丰富的领域模型中，`Album`可能会有更多的功能。对于一个人为的例子，想象一下它不是自动实现的属性，而是在设置时强制执行业务逻辑的属性，并且它具有诸如`AddSong(Song song)`和`Play()`其他此类行为之类的方法。

这种更丰富的模型仍然可以用作表示模型，但该功能在视图范围内可能没有意义。视图确实更适合裸数据元素。控制器将与模型的功能交互。因此，您可能会创建一个在结构上类似于`Album`域模型的表示模型，它看起来就像您的示例中的那个。

展望未来，如果视图还需要其他数据怎么办？也许视图需要了解与`Album`. 修改域模型以适应视图是没有意义的。那是倒退。演示文稿应该围绕领域核心，而不是相反。因此，您可以向表示模型添加属性，这些属性是从控制器内部的其他事物中填充的。

所以你最终可能会得到这样的东西......

领域模型：

```
public class Album
{
    public int ID { get; private set; } // might need to be immutable

    private string _title;
    public string Title
    {
        get { return _title; }
        set
        {
            // don't allow empty titles
            if (string.IsNullOrWhiteSpace(value))
                throw new ArgumentNullException("Title");
            _title = value;
        }
    }

    private Album() { }
    public Album(int id, string title)
    {
        ID = id;
        Title = title;
    }

    public void Play()
    {
        // some implementation
    }

    public void SomeOtherMethod()
    {
        // some implementation
    }
} 
```

随着业务领域的增长和变化，这个模型可能会随之改变。要点是它根据领域核心和业务逻辑的要求进行更改，而*不是*根据 UI 实现的要求进行更改。

使用此域核心的特定网站上的特定“页面”可能需要有关专辑的特定信息，并且可能还需要一些其他信息。您将定制一个演示模型以适应它：

```
public class AlbumViewModel
{
    public int ID { get; set; }
    public string Title { get; set; }
    public string Owner { get; set; }
    public IEnumerable<Listener> Listeners { get; set; }
    public string SomeCompletelyUnrelatedValueNeededByTheView { get; set; }
} 
```

然后控制器将为视图构建这个表示模型：

```
public ActionResult Details(int id)
{
    // TODO: validate and sanitize any inputs

    var album = AlbumRepository.Get(id); // after all, why bind the UI _directly_ to the DB?  that's just silly
    var someOtherObject = SomeOtherRepository.Get(someOtherValueFromSomewhereElse);

    var albumVM = new AlbumViewModel
    {
        ID = album.ID,
        Title = album.Title,
        Owner = somethingElse.SomeValue,
        Listeners = someOtherObject.GetListeners(album),
        SomeCompletelyUnrelatedValueNeededByTheView = "foo"
    };

    return View(albumVM);
} 
```

总体而言，这是一种更加手动的方法。当您有更复杂的域模型、与该域交互的多个复杂应用程序、整个域中的不同技术堆栈等时，它很有用。对于简单的表单数据应用程序，标准的 ASP.NET MVC 实现通常可以正常工作。它的大多数教程都反映了这一点，将多个职责合并到更少的对象中，使用装饰器而不是显式代码（假设全面使用相同的工具堆栈）等。

您正在查看的示例可以让您使用很少的代码非常快速地获得一个工作应用程序。与任何框架一样，如果您按照框架希望您做的方式做事，它就会很好地工作。如果您*需要*跳出框架的界限，您仍然可以以更抽象和与框架无关的方式维护该模式。

* * *

**编辑：**再次为您的更新...

在某种程度上，是的。ASP.NET MVC 是一个从总体上借鉴了 MVC 模式的框架。与所有事情一样，有不止一种方法可以做到这一点。坚持简单的实现和快速的应用程序，由 ASP.NET MVC 框架提供并在其各种教程中解释的功能是完全可以接受的，并且是使用框架的一个很好的例子......使用工具完成工作。

他们以所有最有意义的方式坚持这种模式。然而，与此同时，在框架的真实性质（通常超出模式描述的范围）中，它们试图为您提供使实际开发工作变得非常轻松的工具。如果您没有迫切需要将域模型与表示模型分开，则不必这样做。一个模型可以同时扮演这两个角色。如果您没有迫切需要将数据访问抽象为存储库模式，那么您不必这样做。您可以直接在模型中组合一些快速的实体框架功能并使用它来完成。

最终取决于项目的需求、开发人员的偏好等等。模式更学术，框架更实用。平衡两者是关键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:26:59.287

I guess the distinction is that in asp.net MVC you can have strongly typed views which have 'knowledge' of your model and the entity being passed through to the view. In its purest sense though the View shouldn't (or rather, neednt) have any knowledge of the model. For that reason I say Steven Sandersons example is better.

Fantastic book by he way!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:41:52.940

我不会汗流浃背 - 斯蒂芬桑德森的图表显示的周期更少，但更详细。

我将 MS 文章箭头解释为：

*   控制器填充模型（来自服务等）
*   控制器指示查看
*   视图通过绑定模型填充

尽管在我看来，微软图表并不是那么有用或信息丰富或有用。你同样可以争辩说箭头可以朝不同的方向前进——甚至像桑德森那样朝两个方向前进。例如，控制器还从绑定等接收模型。

桑德森箭头注释很好并且不言自明，这本书很棒。

# css - IE8 过滤器渐变禁用页面滚动

> ID：11638718
> 
> 赞同：5
> 
> 时间：2012-07-24T20:22:18.400
> 
> 标签：css, internet-explorer-8

我正在使用 IE 过滤器使背景具有渐变效果，但只有在 IE8 中才有问题。这些行使背景渐变正确，但页面将不再滚动：

```
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzdkYjllOCIgc3RvcC1vcGFjaXR5PSIwIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMxZTU3OTkiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+) no-repeat fixed;
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#007db9e8', endColorstr='#1e5799',GradientType=0 ) no-repeat fixed; /* IE6-8 */ 
```

我也尝试将高度设置为 100%。怎么了？

[http://asthmaready.org/training-programs/](http://asthmaready.org/training-programs/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:32:29.953

尝试将过滤梯度附加到`div#page`

**更新**：

```
body.cbgc {
    background: -moz-linear-gradient(top,  rgba(125,185,232,0) 0%, rgba(30,87,153,1) 100%) no-repeat fixed;
    ....
} 
```

以某种方式阻止后续`#page`样式声明，因此当您对其应用过滤器时，它会被忽略。尝试删除并对其应用过滤器`#page`，看看这是否有帮助。

另一点是渐变`#page`不会在屏幕边缘结束（就像在其他浏览器中一样），而是会继续到滚动区域。如果这与您相关，您可以添加额外的 div，一个带有 的兄弟`#page`，并将过滤器和位置固定应用于它。所以一切看起来都和非 IE 浏览器一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T07:39:03.607

刚遇到同样的问题！正如 Caligula 回答的那样，不要将过滤器应用于身体，-moz，-webkit，......但是会正常工作。将 应用于`filter:progid`您体内的第一个 div（如果需要，添加一个`div.container {height:100% width:100%}`）

# c# - 在 Asp.net 中显示加载消息

> ID：11638720
> 
> 赞同：3
> 
> 时间：2012-07-24T20:22:30.523
> 
> 标签：c#, asp.net, ajaxcontroltoolkit

我想在我的 gridview 填充数据时在我的 asp.net 网页中显示一个加载指示器

这是我的 aspx 页面的一部分

```
 <script type="text/javascript" src="Scripts/jsUpdateProgress.js"></script>      
    <asp:ScriptManager ID="ScriptManager1" runat="server" />
    <asp:Panel ID="panelUpdateProgress" runat="server" CssClass="updateProgress">
        <asp:UpdateProgress ID="UpdateProg1" DisplayAfter="0" runat="server">
            <ProgressTemplate>
                <div style="position: relative; top: 30%; text-align: center;">
                    <img src="Styles/images/loading.gif" style="vertical-align: middle" alt="Processing" />
                    Loading...
                </div>
            </ProgressTemplate>
        </asp:UpdateProgress>
    </asp:Panel>
    <ajaxToolkit:ModalPopupExtender ID="ModalProgress" runat="server" TargetControlID="panelUpdateProgress"
        BackgroundCssClass="modalBackground" PopupControlID="panelUpdateProgress" /> 
```

（我的代码基于这个示例 weblogs.asp.net/blogs/guillermo/Code/modalExample.zip）

这是我调用我的方法的按钮

```
<asp:UpdatePanel ID="updatePanel" runat="server">
        <ContentTemplate>
            <asp:Button ID="btMonth" runat="server" onclick="btMonth_Click" Text="Ver" />
        </ContentTemplate>
    </asp:UpdatePanel> 
```

这是我的方法 btMonth_Click 的 c# 代码

```
 protected void btMonth_Click(object sender, EventArgs e)
{
    string query = "select * from table";
    SqlDataSource1.SelectCommand = query;
    gInd.DataSourceID = "SqlDataSource1";
} 
```

正如您所看到的，当“加载”指示器出现时，我想填充一个 GridView，但是当我单击按钮时，会调用方法 btMonth_Click，该方法被执行，但我的 gridview 没有被填充。如果我删除我的按钮的 asp:UpdatePanel 我的 gridview 填充得很好

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:26:59.513

您需要将您的`GridVew`内部放置`UpdatePanel`以进行部分渲染

如果出于设计原因您不能将网格放在第*一个* `UpdatePanel`网格内，您可以有几个`UpdatePanel`

欲了解更多信息：

[如何在同一个 .aspx 页面上使用两个更新面板](https://stackoverflow.com/q/11358141/1268570)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:26:58.727

尝试添加：

```
gInd.DataBind(); 
```

在您的 btMonth_Click 中（顺便说一句。更好的命名约定是 btnMonth_Click）

```
 protected void btMonth_Click(object sender, EventArgs e)
{
    string query = "select * from table";
    SqlDataSource1.SelectCommand = query;
    gInd.DataSourceID = "SqlDataSource1";
    gInd.DataBind();
} 
```

# xml - 使用 XSLT 的复杂 XML 到 XML 转换

> ID：11638723
> 
> 赞同：0
> 
> 时间：2012-07-24T20:22:37.350
> 
> 标签：xml, xslt, xslt-1.0

这对你们所有人来说可能并不复杂，但对我来说非常困难。这是我的第二次尝试。我已经改变了我的数据，以包含更多需要更少转换的信息。

基本上，我正在尝试获取由三个假期计划（VA、SS 和 WR）组成的数据，并预测每个计划将在每个工资期累积的时间量，按工人，一整年。我只在我的数据中包含了三个支付期以保持简短（呃）。我需要为每个工人/生效日期组合单独记录。因此，如果一个工人有三个假期计划，并且每两周支付一次（26 次/年），那么该工人可能有 78 条记录。

这是我开始使用的 XML（请记住，在我的示例中，我只使用了前 3 个支付期日期，而不是全部 26 个）：

```
 <?xml version='1.0' encoding='UTF-8'?>
<bb:Report_Data xmlns:bb="urn:com.workday.report/Projected_Balances_Outbound">
   <bb:Report_Entry>
      <bb:projectedBalanceTotal.principalId>1238974569</bb:projectedBalanceTotal.principalId>
      <bb:All_Eligible_Time_Off_Plans_for_Worker>
         <bb:projectedBalanceTotal.planCodeId>SS</bb:projectedBalanceTotal.planCodeId>
         <bb:projectedBalanceTotal.leaveCodeId>SS</bb:projectedBalanceTotal.leaveCodeId>
         <bb:projected_balance_accrual_amount_for_the_pay_period>3.323</bb:projected_balance_accrual_amount_for_the_pay_period>
         <bb:projectedBalanceTotal.effectiveDate1>07112012</bb:projectedBalanceTotal.effectiveDate1>
         <bb:projectedBalanceTotal.effectiveDate2>07252012</bb:projectedBalanceTotal.effectiveDate2>
         <bb:projectedBalanceTotal.effectiveDate3>08082012</bb:projectedBalanceTotal.effectiveDate3>

      </bb:All_Eligible_Time_Off_Plans_for_Worker>
      <bb:All_Eligible_Time_Off_Plans_for_Worker>
         <bb:projectedBalanceTotal.planCodeId>VA</bb:projectedBalanceTotal.planCodeId>
         <bb:projectedBalanceTotal.leaveCodeId>VA</bb:projectedBalanceTotal.leaveCodeId>
         <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
         <bb:projectedBalanceTotal.effectiveDate1>07112012</bb:projectedBalanceTotal.effectiveDate1>
         <bb:projectedBalanceTotal.effectiveDate2>07252012</bb:projectedBalanceTotal.effectiveDate2>
         <bb:projectedBalanceTotal.effectiveDate3>08082012</bb:projectedBalanceTotal.effectiveDate3>

      </bb:All_Eligible_Time_Off_Plans_for_Worker>
      <bb:All_Eligible_Time_Off_Plans_for_Worker>
         <bb:projectedBalanceTotal.planCodeId>WR</bb:projectedBalanceTotal.planCodeId>
         <bb:projectedBalanceTotal.leaveCodeId>WR</bb:projectedBalanceTotal.leaveCodeId>
         <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
         <bb:projectedBalanceTotal.effectiveDate1>07112012</bb:projectedBalanceTotal.effectiveDate1>
         <bb:projectedBalanceTotal.effectiveDate2>07252012</bb:projectedBalanceTotal.effectiveDate2>
         <bb:projectedBalanceTotal.effectiveDate3>08082012</bb:projectedBalanceTotal.effectiveDate3>

      </bb:All_Eligible_Time_Off_Plans_for_Worker>
      <bb:projectedBalanceTotal.employeeid>123454</bb:projectedBalanceTotal.employeeid>
   </bb:Report_Entry>
   <bb:Report_Entry>
      <bb:projectedBalanceTotal.principalId>4545645878</bb:projectedBalanceTotal.principalId>
      <bb:All_Eligible_Time_Off_Plans_for_Worker>
         <bb:projectedBalanceTotal.planCodeId>SS</bb:projectedBalanceTotal.planCodeId>
         <bb:projectedBalanceTotal.leaveCodeId>SS</bb:projectedBalanceTotal.leaveCodeId>
         <bb:projected_balance_accrual_amount_for_the_pay_period>3.692</bb:projected_balance_accrual_amount_for_the_pay_period>
         <bb:projectedBalanceTotal.effectiveDate1>07112012</bb:projectedBalanceTotal.effectiveDate1>
         <bb:projectedBalanceTotal.effectiveDate2>07252012</bb:projectedBalanceTotal.effectiveDate2>
         <bb:projectedBalanceTotal.effectiveDate3>08082012</bb:projectedBalanceTotal.effectiveDate3>

      </bb:All_Eligible_Time_Off_Plans_for_Worker>
      <bb:All_Eligible_Time_Off_Plans_for_Worker>
         <bb:projectedBalanceTotal.planCodeId>VA</bb:projectedBalanceTotal.planCodeId>
         <bb:projectedBalanceTotal.leaveCodeId>VA</bb:projectedBalanceTotal.leaveCodeId>
         <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
         <bb:projectedBalanceTotal.effectiveDate1>07112012</bb:projectedBalanceTotal.effectiveDate1>
         <bb:projectedBalanceTotal.effectiveDate2>07252012</bb:projectedBalanceTotal.effectiveDate2>
         <bb:projectedBalanceTotal.effectiveDate3>08082012</bb:projectedBalanceTotal.effectiveDate3>

      </bb:All_Eligible_Time_Off_Plans_for_Worker>
      <bb:All_Eligible_Time_Off_Plans_for_Worker>
         <bb:projectedBalanceTotal.planCodeId>WR</bb:projectedBalanceTotal.planCodeId>
         <bb:projectedBalanceTotal.leaveCodeId>WR</bb:projectedBalanceTotal.leaveCodeId>
         <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
         <bb:projectedBalanceTotal.effectiveDate1>07112012</bb:projectedBalanceTotal.effectiveDate1>
         <bb:projectedBalanceTotal.effectiveDate2>07252012</bb:projectedBalanceTotal.effectiveDate2>
         <bb:projectedBalanceTotal.effectiveDate3>08082012</bb:projectedBalanceTotal.effectiveDate3>

      </bb:All_Eligible_Time_Off_Plans_for_Worker>
      <bb:projectedBalanceTotal.employeeid>445241</bb:projectedBalanceTotal.employeeid>
   </bb:Report_Entry>
</bb:Report_Data> 
```

这是转换后我需要输出的样子：

```
<?xml version='1.0' encoding='UTF-8'?>
<bb:Report_Data xmlns:bb="urn:com.workday.report/Projected_Balances_Outbound">
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>1238974569</bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>SS</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveCodeId>SS</bb:projectedBalanceTotal.leaveCodeId>
      <bb:projected_balance_accrual_amount_for_the_pay_period>3.323</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate1>07112012</bb:projectedBalanceTotal.effectiveDate1>
      <bb:projectedBalanceTotal.employeeid>123454</bb:projectedBalanceTotal.employeeid>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>1238974569/bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>SS</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveCodeId>SS</bb:projectedBalanceTotal.leaveCodeId>
      <bb:projected_balance_accrual_amount_for_the_pay_period>3.323</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate1>07252012</bb:projectedBalanceTotal.effectiveDate1>
      <bb:projectedBalanceTotal.employeeid>123454</bb:projectedBalanceTotal.employeeid>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>1238974569/bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>SS</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveCodeId>SS</bb:projectedBalanceTotal.leaveCodeId>
      <bb:projected_balance_accrual_amount_for_the_pay_period>3.323</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate1>08082012</bb:projectedBalanceTotal.effectiveDate1>
      <bb:projectedBalanceTotal.employeeid>123454</bb:projectedBalanceTotal.employeeid>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>1238974569/bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>WR</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveCodeId>WR</bb:projectedBalanceTotal.leaveCodeId>
      <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate1>07112012</bb:projectedBalanceTotal.effectiveDate1>
      <bb:projectedBalanceTotal.employeeid>123454</bb:projectedBalanceTotal.employeeid>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>1238974569/bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>WR</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveCodeId>WR</bb:projectedBalanceTotal.leaveCodeId>
      <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate1>07252012</bb:projectedBalanceTotal.effectiveDate1>
      <bb:projectedBalanceTotal.employeeid>123454</bb:projectedBalanceTotal.employeeid>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>1238974569/bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>WR</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveCodeId>WR</bb:projectedBalanceTotal.leaveCodeId>
      <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate1>08082012</bb:projectedBalanceTotal.effectiveDate1>
      <bb:projectedBalanceTotal.employeeid>123454</bb:projectedBalanceTotal.employeeid>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>1238974569/bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>VA</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveCodeId>VA</bb:projectedBalanceTotal.leaveCodeId>
      <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate1>07112012</bb:projectedBalanceTotal.effectiveDate1>
      <bb:projectedBalanceTotal.employeeid>123454</bb:projectedBalanceTotal.employeeid>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>1238974569/bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>VA</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveCodeId>VA</bb:projectedBalanceTotal.leaveCodeId>
      <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate1>07252012</bb:projectedBalanceTotal.effectiveDate1>
      <bb:projectedBalanceTotal.employeeid>123454</bb:projectedBalanceTotal.employeeid>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>1238974569/bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>VA</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveCodeId>VA</bb:projectedBalanceTotal.leaveCodeId>
      <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate1>08082012</bb:projectedBalanceTotal.effectiveDate1>
      <bb:projectedBalanceTotal.employeeid>123454</bb:projectedBalanceTotal.employeeid>
   </projectedBalanceTotal>

   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>4545645878/bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>SS</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveCodeId>SS</bb:projectedBalanceTotal.leaveCodeId>
      <bb:projected_balance_accrual_amount_for_the_pay_period>3.692</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate1>07112012</bb:projectedBalanceTotal.effectiveDate1>
      <bb:projectedBalanceTotal.employeeid>445241</bb:projectedBalanceTotal.employeeid>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>4545645878/bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>SS</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveCodeId>SS</bb:projectedBalanceTotal.leaveCodeId>
      <bb:projected_balance_accrual_amount_for_the_pay_period>3.692</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate1>07252012</bb:projectedBalanceTotal.effectiveDate1>
      <bb:projectedBalanceTotal.employeeid>445241</bb:projectedBalanceTotal.employeeid>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>4545645878/bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>SS</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveCodeId>SS</bb:projectedBalanceTotal.leaveCodeId>
      <bb:projected_balance_accrual_amount_for_the_pay_period>3.692</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate1>08082012</bb:projectedBalanceTotal.effectiveDate1>
      <bb:projectedBalanceTotal.employeeid>445241</bb:projectedBalanceTotal.employeeid>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>4545645878/bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>WR</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveCodeId>WR</bb:projectedBalanceTotal.leaveCodeId>
      <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate1>07112012</bb:projectedBalanceTotal.effectiveDate1>
      <bb:projectedBalanceTotal.employeeid>445241</bb:projectedBalanceTotal.employeeid>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>4545645878/bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>WR</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveCodeId>WR</bb:projectedBalanceTotal.leaveCodeId>
      <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate1>07252012</bb:projectedBalanceTotal.effectiveDate1>
      <bb:projectedBalanceTotal.employeeid>445241</bb:projectedBalanceTotal.employeeid>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>4545645878/bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>WR</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveCodeId>WR</bb:projectedBalanceTotal.leaveCodeId>
      <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate1>08082012</bb:projectedBalanceTotal.effectiveDate1>
      <bb:projectedBalanceTotal.employeeid>445241</bb:projectedBalanceTotal.employeeid>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>4545645878/bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>VA</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveCodeId>VA</bb:projectedBalanceTotal.leaveCodeId>
      <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate1>07112012</bb:projectedBalanceTotal.effectiveDate1>
      <bb:projectedBalanceTotal.employeeid>445241</bb:projectedBalanceTotal.employeeid>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>4545645878/bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>VA</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveCodeId>VA</bb:projectedBalanceTotal.leaveCodeId>
      <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate1>07252012</bb:projectedBalanceTotal.effectiveDate1>
      <bb:projectedBalanceTotal.employeeid>445241</bb:projectedBalanceTotal.employeeid>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>4545645878/bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>VA</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveCodeId>VA</bb:projectedBalanceTotal.leaveCodeId>
      <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate1>08082012</bb:projectedBalanceTotal.effectiveDate1>
      <bb:projectedBalanceTotal.employeeid>445241</bb:projectedBalanceTotal.employeeid>
   </projectedBalanceTotal>
</bb:Report_Data> 
```

还有一些需要注意的事情...除了格式更改之外，我将完全删除元素标签“All_Eligible_Time_Off_Plans_for_Worker”，并将“bb:Report_Entry”替换为“projectedBalanceTotal”。

除了我编写了成功删除“All_Eligible_Time_Off_Plans_for_Worker”并将“bb:Report_Entry”替换为“projectedBalanceTotal”的 XSL 代码外，我几乎没有起点。可以在这里找到：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:wd="urn:com.workday.report/CR-INT486-Kuali_Trojan_Time-Absence_Balances__Hospital_Bi-Weekly_-Outbound" 
    exclude-result-prefixes="wd">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="comment()|processing-instruction()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*">
        <xsl:element name="{local-name()}">
            <xsl:apply-templates select="node()|@*"/>
        </xsl:element>
    </xsl:template>

    <xsl:template match="wd:All_Eligible_Time_Off_Plans_for_Worker">
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="wd:Report_Data">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="wd:Report_Entry">
        <projectedleaveBalanceTotal>
            <xsl:apply-templates select="node()|@*"/>
        </projectedleaveBalanceTotal>
    </xsl:template>

</xsl:stylesheet> 
```

任何帮助都会很棒！提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T04:19:02.887

试试这个 ...

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:bb="urn:com.workday.report/Projected_Balances_Outbound">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="/">
 <bb:Report_Data>
   <xsl:apply-templates select="*/*/*/*[starts-with(local-name(),'projectedBalanceTotal.effectiveDate')]"/>
 </bb:Report_Data>
</xsl:template>

<xsl:template match="*">
<!-- Add predicate [starts-with(local-name(),'projectedBalanceTotal.effectiveDate')]
     to the match pattern if you feel like it. -->
   <projectedBalanceTotal>
     <xsl:copy-of select="
       ../../bb:projectedBalanceTotal.principalId  |
       ../bb:projectedBalanceTotal.planCodeId      |
       ../bb:projectedBalanceTotal.leaveCodeId     |
       ../bb:projected_balance_accrual_amount_for_the_pay_period |
       .                                           |
       ../../bb:projectedBalanceTotal.employeeid"   />
   </projectedBalanceTotal>
</xsl:template>

</xsl:stylesheet> 
```

## 警告

这将输出 <bb:projectedBalanceTotal.effectiveDate\d> 节点，其中“\d”表示某个整数。在您的示例输入中，您有有效日期1、有效日期2 等。但是在您的预期输出中只有有效日期1。我没有费心将所有 EffectiveDate\d 节点重命名为 EffectiveDate1，因为这很可能只是您的笔误。因此，如果您要求将所有有效日期\d 节点精确地称为有效日期 1，则相应地进行调整。

## 学习笔记

如果您想在将来自行解决类似问题，请尝试以下技术：

1.  删除所有命名空间，除非命名空间是要解决的问题的固有部分。
2.  将所有长节点名称替换为短而易记的名称，例如（香蕉、苹果、梨）。
3.  简化和消除节点，直至问题的真正关键。如果您有两种节点类型banana 和apple 处理相同的规则，只需在示例数据中使用banana。
4.  生成与转换规则的复杂性成正比的用例数量，并尝试使用例覆盖边缘条件，并广泛使用。
5.  像对待任何其他编程语言一样对待 XSLT。如果你必须用 Java 编写程序，但你一开始对这种语言的知识为零，你会买一本书或参加培训课程，对吗？就像任何其他语言一样，您不能仅通过查看 SO 上的示例来学习它。

* * *

## 更新

OP 已要求对样式表进行修改，以便有效日期元素是输出，其本地名称中没有嵌入数字。所以这里是变化...

1.  将大 xsl:copy-of 分成 3 个部分。一个点前（.），一个点（.），一个点后（即employeeid）。所以之前的位看起来像这样......

    ```
     <xsl:copy-of select="
       ../../bb:projectedBalanceTotal.principalId  |
       ../bb:projectedBalanceTotal.planCodeId      |
       ../bb:projectedBalanceTotal.leaveCodeId     |
       ../bb:projected_balance_accrual_amount_for_the_pay_period" /> 
    ```

2.  对于中间位（在esse xsl:copy-of select="."），我们不能使用copy-of，因为我们想更改名称。所以我们像这样替换一个文字元素......

    ```
     <bb:projectedBalanceTotal.effectiveDate>
      <xsl:value-of select="." />
     </bb:projectedBalanceTotal.effectiveDate> 
    ```

3.  第三位和最后一位与第一位类似，但仅适用于employeeid 元素。

总而言之，我们得到了我们的模板......

```
<xsl:template match="*">
   <projectedBalanceTotal>
     <xsl:copy-of select="
       ../../bb:projectedBalanceTotal.principalId  |
       ../bb:projectedBalanceTotal.planCodeId      |
       ../bb:projectedBalanceTotal.leaveCodeId     |
       ../bb:projected_balance_accrual_amount_for_the_pay_period" />
     <bb:projectedBalanceTotal.effectiveDate>
      <xsl:value-of select="." />
     </bb:projectedBalanceTotal.effectiveDate>
     <xsl:copy-of select="../../bb:projectedBalanceTotal.employeeid" />
   </projectedBalanceTotal>
</xsl:template> 
```

# matrix - 如何查找某个索引是否位于矩阵的对角线或反对角线上？

> ID：11638729
> 
> 赞同：0
> 
> 时间：2012-07-24T20:23:07.510
> 
> 标签：matrix, mpi, coordinate-systems, cartesian

所以我目前正在研究一个涉及并行网格结构的项目。我遇到的问题与通信方案有关。这个矩阵中每个元素的信息量就是它的处理器等级。这让我可以计算出它在全局方案中的位置。

我将尝试给出一个视觉示例：

该矩阵表示节点编号的全局图。

| 0| 1| 2| 3|

| 4| 5| 6| 7|

| 8| 9|10|11|

|12|13|14|15|

在本地，我可以找到任何（i，j）给定它的处理器等级和 comm 中的处理器总数。

我要解决的问题是如何找到，对于任意大小的方形网格，我如何知道哪个元素在对角线上或蚂蚁对角线上。

下面发布了我正在查看的更好的图片。已经处理了不同的黑白方案，我只需要知道如何在给定其处理器等级和节点坐标的情况下找到对角线和反对角线。

![信息图](../Images/d41f5e5ca9c518b9c6e0308250c543aa.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:32:38.267

我想出了一些办法来解决这个问题。

我做的第一件事是查看每个处理器的坐标系 (i,j)。然后我注意到如果你取 abs(i - j) 你会得到一个奇数或偶数。这很明显，但是当您将其应用于每个细分时，就像原始问题中的图像一样，您可以看到相同的行为，并且它区分了主对角线和反对角线。因此，我使用了 (i,j) 坐标并设置了一个规则来确定所述坐标是否在象限（I 或 III）与（II 或 IV）的任一象限中，并确定标志应该是零还是一。这给了我正在寻找的解决方案。

# heroku - 当我的 CNAME 记录重定向到我的 heroku 应用程序时，它说没有这样的应用程序。

> ID：11638731
> 
> 赞同：23
> 
> 时间：2012-07-24T20:23:20.490
> 
> 标签：heroku, dns, cname

我的应用程序在 tradespring.heroku.com 上运行良好（我想。好吧，无论如何我都能完美地看到它）。因此，我输入了一条 CNAME 记录，该记录将我的域（tradespring.net）与别名 www 重定向到 tradespring.heroku.com。但是当我进入 www.tradespring.net 时，它说找不到 heroku 应用程序。

当我刚进入 tradespring.heroku.com 时，它工作正常。它确实会自动将其更改为[https://tradespring.heroku.com](https://tradespring.heroku.com)。为什么它不能通过 CNAME 工作

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-24T21:02:51.643

`heroku domains:add www.tradespring.net`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T20:34:50.397

这是因为 CNAME 条目正在重定向到 heroku，但从“tradespring.net”请求 heroku。没关系，它应该以这种方式工作。现在我假设您必须配置 heroku 以响应对您的域的请求。

这是heroku自定义域的教程：

[https://devcenter.heroku.com/articles/custom-domains](https://devcenter.heroku.com/articles/custom-domains)

# python - 在 Django 中获取 AuditTrail 数据的方法

> ID：11638735
> 
> 赞同：1
> 
> 时间：2012-07-24T20:23:36.223
> 
> 标签：python, django, audit-trail

我想知道从视图中的 AuditTrail 表中获取数据的最佳方法是什么。我想使用模板和视图显示模型字段的所有版本。我寻找一种在管理区域显示它的方法，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:02:08.783

看看 Django 回归[https://github.com/etianen/django-reversion](https://github.com/etianen/django-reversion)

它应该做你需要的。

# c++ - Visual Studio，.dll 未找到（从未要求）

> ID：11638747
> 
> 赞同：0
> 
> 时间：2012-07-24T20:24:39.333
> 
> 标签：c++, visual-studio, dll

我告诉 Visual Studio 额外的库目录，并将 .lib 写入额外的依赖项中。（是的，.lib，不是 .dll）。然后所有外部符号文件错误都消失了（之前有一些错误），但随后出现了：

实际名称和我对附加依赖项所说的内容是：assimp.lib

但是当我运行程序时，它说：找不到依赖的dll，并且在消息框中，它说Assimp32.dll

而且我从来没有说过要包含一个 dll 名称，尤其是那个名称，所以我很困惑，如果我犯了错误，我已经检查了好几次，但似乎没有。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T20:30:07.237

您已经通过链接 lib 文件告诉您的应用程序使用 DLL。您链接的文件本身不是[静态库](http://en.wikipedia.org/wiki/Static_library)。如，它不包含所有功能。

在这种情况下，它是一个[导入库](http://en.wikipedia.org/wiki/Dynamic-link_library#Import_libraries)(assimp.lib)，其中包含 DLL (assimp32.dll) 的入口点信息。这就是为什么当你运行程序时，它仍然要求一个 DLL。即使您可能认为您没有告诉您的程序这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T20:40:37.463

我下载了该库的 3.0 版，我可能会说 Visual Studio 确实如其所说。`assimp.lib`in的大小`assimp--3.0.1270-sdk\lib\assimp_release-dll_win32`只有 88 KB，因此对于包含 Open Asset Import Library 之类的庞大库的所有代码来说太小了，而`Assimp32.dll`in的大小`assimp--3.0.1270-sdk\bin\assimp_release-dll_win32`则为 6900 KB，因此实际上是大多数好东西所在的位置。

结论：`assimp.lib`确实依赖于`Assimp32.dll`，因此您应该复制到并保存`Assimp32.dll`在程序的 .exe 所在的同一文件夹中。

# notepad++ - Alternative Notepad++ Shortcut Mapper plugin?

> ID：11638749
> 
> 赞同：7
> 
> 时间：2012-07-24T20:24:42.390
> 
> 标签：notepad++

Is there a Shortcut Mapper plugin for Notepad++ that offers the following functionality? (This functionality is currently not present in Shortcut Mapper)

a) Quickly search through all shortcuts/commands to see if there is already a shortcut present for the command - this could be achieved by some 'search' functionality or by being able to sort the shortcuts list by 'command' or by 'shortcuts'

b) Give a warning in case a shortcut entered against a command is already present.

PS. While writing this question, I found a [list of default shortcuts](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=Keyboard_And_Mouse_Shortcuts), which helps somewhat!

# jquery - Spring MVC3 On the fly binding

> ID：11638753
> 
> 赞同：0
> 
> 时间：2012-07-24T20:24:55.980
> 
> 标签：jquery, spring, jsp, spring-mvc

In my view, i have to collect demographics of the customer.Based on a 'yes''no' condition i have to display a address section, which has a button for adding address.So,when the user clicks on that "ADD Address", I have to display the same section again; which contains all the required information to be displayed to the user.So, this button has to generate this section on 'ON-CLICK' and remove when "Clicked remove". My question is how can you bind data with Spring MVC 3 for these on fly creations and removal.I can't do hide and show div operations, as the user can select 'n' address.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:20:35.900

不要完全想象这个问题，但是“我不能隐藏和显示 div 操作”削减了很多选项，因为在我看来，这确实是 jquery 或 javascript 等的一个案例，传递了完整的模型和填充您需要的位（您确实用 jquery 标记了这个？）。

如果您无法使用服务器端，则选项包括：

*   如果他们选择 Y 条件来显示地址，则具有不同的视图并转到带有地址的第二个表单。
*   在模型中使用对象，例如列表和数组，它们可以让您绑定到 n 个对象并将它们发送回控制器，例如 List。请参阅[如何将对象列表绑定到 SpringMvc 控制器？](https://stackoverflow.com/questions/3283920/how-to-bind-a-list-of-object-to-springmvc-controller)或[Spring 3 MVC - 高级数据绑定 - 带有简单对象列表的表单请求](https://stackoverflow.com/questions/3566201/spring-3-mvc-advanced-data-binding-form-request-with-list-of-simple-objects)

# cuda - Nvidia Nsight 2.2 MSVC++ 2010 Profiling - 请参阅时间轴中用户定义的主机函数名称

> ID：11638778
> 
> 赞同：0
> 
> 时间：2012-07-24T20:27:23.253
> 
> 标签：cuda, profiling, nvidia, nsight

请参见下图 Nvidia Nsight 2.2 分析会话（Win7、MSVC++ 10 Pro、CUDA 4.2、GTX 670）。

![Nsight时间线](../Images/b10e47b6263f6af419ac4c8fd5a4be92.png)

在第一个主机线程 (26.8%) 上，我从 CUDA API 获取函数调用名称。是否可以从主机进程中的第二个线程 (13.6%) 正在执行的用户定义函数中获取函数调用名称？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:47:04.810

Paul，默认情况下不支持此功能。

使用 NVIDIA 工具扩展 (NVTX) 库，您可以手动检测您的代码。此库安装在目录 C:\Program Files\NVIDIA GPU Computing Toolkit\nvToolsExt 中，带有 Nsight Visual Studio Edition（所有版本）或 CUDA Toolkit 5.0 RC。5.0 RC 中的 Visual Profiler 支持 NVTX。

该库附带两个示例，向您展示如何使用该库。NvtxMultithread.cpp 示例提供了一个帮助程序库。感兴趣的功能是

```
nvtxRangePushA
nvtxRangePop 
```

或者，如果您使用的是 C++，则帮助程序库具有可用作作用域的帮助程序

```
nvtx::ScopedRange range(__FUNCTION__) 
```

在每个函数的顶部。

可以通过使用 cl.exe 选项 /Gh 和 /GH 来自动执行此操作，但这需要编写程序集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:26:45.973

此演示文稿可能会有所帮助。[Parallel Nsight：分析和优化大规模并行应用程序](http://www.nvidia.com/content/GTC-2010/pdfs/2151_GTC2010.pdf)。

# python - 列表集成作为参数（初学者）

> ID：11638780
> 
> 赞同：0
> 
> 时间：2012-07-24T20:27:24.980
> 
> 标签：python

我正在用 python 编写脚本，但我是初学者（昨天开始）。

基本上，我只是创建了大约 10 张图片填充的块，对齐它们，构建模型并构建纹理。现在我有我的块，我想对齐它们......

从[手册](http://downloads.agisoft.ru/pdf/photoscan_python_api.pdf)：

> `PhotoScan.alignChunks(chunks, reference, method=’points’, accuracy=’high’, preselection=False)`
> 
> 对齐指定的块集。
> 
> **参数**
> 
> *   chunks (list) -- 要对齐的块列表。
> *   reference (Chunk) – 用作参考的块。
> *   method (string) -- ['points', 'markers'] 中的对齐方法。
> *   accuracy (string) -- ['high', 'medium', 'low'] 中的对齐精度。
> *   preselection (boolean) – 启用图像对预选。
> 
> 返回操作成功。
> 
> 返回类型`boolean`

我试图对齐块，但脚本在第 26 行抛出错误：

> TypeError：期望一个块列表作为参数

你知道我怎样才能让它工作吗？

这是我当前的代码：

```
import PhotoScan
doc = PhotoScan.app.document
main_doc = PhotoScan.app.document
chunk = PhotoScan.Chunk()
proj = PhotoScan.GeoProjection()
proj.init("EPSG::32641")
gc = chunk.ground_control
gc.projection = proj
working_path = "x:\\New_agisoft\\ok\\Optical\\"
for i in range (1,3):
    new_chunk = PhotoScan.Chunk()
    new_chunk.label = str(i)
    loop = i*10 
    loo = (i-1)*10
    doc.chunks.add(new_chunk)
    for j in range (loo,loop):
        file_path = working_path + str(j) + ".jpg"
        new_chunk.photos.add(file_path)
    gc = new_chunk.ground_control
    gc.loadExif()
    gc.apply()
    main_doc.active = len(main_doc.chunks) - 1
    doc.activeChunk.alignPhotos(accuracy="low", preselection="ground control")
    doc.activeChunk.buildModel(quality="lowest", object="height field", geometry="smooth", faces=50000)
    doc.activeChunk.buildTexture(mapping="generic", blending="average", width=2048, height=2048)
PhotoScan.alignChunks(,1,method="points",accuracy='low', preselection=True) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:41:48.590

```
PhotoScan.alignChunks(,1,method="points",accuracy='low', preselection=True)
                      ^ 
```

在“，”之前，您需要大块！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:42:43.673

*注意：我从未使用过这个模块。*

您使用`PhotoScan.alignChunks`空的第一个参数进行调用，而文档声明它需要一个块列表。

您可以在循环之前初始化一个空列表：

```
chunks = [] 
```

并从循环内部将完成的块添加到列表中：

```
 # ...
    chunks.append(new_chunk) 
```

然后调用函数：

```
PhotoScan.alignChunks(chunks, chunk[0], ...) 
```

# asp.net-mvc - Telerik MVC Grid 用于 40 个具有 WCF 限制的表

> ID：11638785
> 
> 赞同：0
> 
> 时间：2012-07-24T20:27:55.713
> 
> 标签：asp.net-mvc, wcf, telerik

我需要一些关于如何解决我遇到的问题的建议。我尝试了几种不同的选择，但在限制后遇到了限制。以下是正在发生的事情的简要概述......

我们有 40 个表，其中包含实现 CRUD 操作所需的配置数据。我们必须使用 Telerik MVC Grid 并且最好使用 INLINE 编辑。我们必须管理单个对象的原始状态和更改的属性。该对象稍后将被序列化到数据库中以供以后批准。

而不是制作 40 个模型、40 个视图、120 个 crud 方法（无删除），它们将紧密共享相同的代码，除了字段名称。我正在尝试创建一种方法来使其足够通用，我们可以拥有 40 个模型（也许？）、1 个视图、3 个 crud 方法。

我在各个方面都遇到了限制：

*   WCF 不支持泛型
*   Telerik 网格不支持动态类型
*   WCF 不会保持方法和私有属性完好无损
*   我们也在使用 MEF，所以这是一个插件，在插件内部.. 我知道..
*   不允许向 WCF 层添加方法...

我的想法？我想我会尝试创建一个类来保存状态，称之为 ManagedState。我最初希望表模型从它继承，并且我将它链接到跟踪更改，但这不起作用。

我现在还尝试将 ManagedState 类与配置类分开使用，并严格使用它来通过我们的 WCF 服务来回传递。然后尝试使用该数据创建原始类型并对其进行水合。

真的有这么多已经进入这个我很慌张。我没有要分享的特定代码，因为这是一个整体问题，即我将如何实现它，因为我到处都是砖墙。如果我得到一个很好的回应来尝试另一种方法来实现，我可以在将来发布代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T17:51:44.607

我看到这个问题有很多观点，所以我想我会回答我的问题。

我几乎使用 T4 模板来生成 TelerikGrid HTMLHelper。不幸的是，Telerik 网格代码是为每种类型生成的，但我所要做的就是调用助手并传递我的类型，它使用 case 语句返回正确的网格。

# java - 带有媒体播放器的异步任务未触发 PublishProgress

> ID：11638786
> 
> 赞同：0
> 
> 时间：2012-07-24T20:27:56.690
> 
> 标签：java, android, android-asynctask, media-player, progress

我写了一个AsyncTask：

```
public class AudioTransition extends AsyncTask <Void, Void, MediaPlayer>
{   
    private int goalID;
    private int milliseconds;
    private MediaPlayer tempPlayer;

    AudioTransition(int ID, int Milliseconds)
    {
        goalID = ID;
        milliseconds = (int)(((float)Milliseconds)/100);
    }

    @Override
    protected void onPreExecute()
    {
       tempPlayer = MediaPlayer.create(context, goalID);
       tempPlayer.setVolume(0, 0);
       tempPlayer.setLooping(true);
       tempPlayer.start();
    }

    @Override
    protected MediaPlayer doInBackground(Void... arg0) {

        for (int i = 0; i < 100; i++)
        {
            value = i;

            publishProgress();
            try {
                Thread.sleep(milliseconds);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            if (!player.isPlaying())
                tempPlayer.pause();
        }

        return tempPlayer;
    }

    @Override
    protected void onProgressUpdate(Void... v) {
        super.onProgressUpdate(v);
        player.setVolume(100-value, 100-value);
        tempPlayer.setVolume(value, value);
    }

    @Override
    protected void onPostExecute( MediaPlayer result )  {
          super.onPostExecute(result);
          player.reset();
          player = tempPlayer;
          player.setVolume(100,100);
          transitioning = false;
    }
} 
```

但音量不会消失。它只是启动两个轨道，然后停止。在 doInBackground 完成之前，MediaPlayers 不会更新。 **如何使 MediaPlayers 在这种类型的后台工作人员中得到更新？** 似乎 publishProgress() 东西应该可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:36:27.343

我的天。不要在 AsyncTask 中休眠线程！您完全滥用了 AsyncTask。你想不出另一种方法来做一个计时器类型的事情，所以你抓住了来自 AsyncTask 的 publishprogress 的想法（它甚至不像我认为你认为的那样工作），即使 AsyncTask 应该用于一个只有一件事：在主（UI）线程之外做繁重的工作。

如果您只想淡出音量，请使用以下内容：（这在任何方法之外的某个地方）。

```
 private Runnable VolumeFadeRunnable = new Runnable() {
        @Override
        public void run() {
                volume--;
             player.setVolume(volume, volume);
                 if(volume>0)
               handler.postDelayed(this, 1000);
                 else
                   handler.removeCallbacks(this);
        }
    }; 
```

只需将您的处理程序初始化为 onCreate 内的一个字段或其他任何内容，并确保该和 counter 变量在该可运行文件内可见。

# java - 比较两个大小不等的数组列表并丢弃不匹配的数组列表

> ID：11638787
> 
> 赞同：0
> 
> 时间：2012-07-24T20:27:59.627
> 
> 标签：java

我想丢弃在 Person 数组列表中不匹配的 FormBean 对象。抱歉，如果代码格式不正确。

我有一个这样的数组列表

```
ArrayList persons = new ArrayList(); 
persons.add("Bill"); 
persons.add("Chuck"); 
persons.add("Marry"); 
```

然后我有另一个像这样的数组列表（大小不等）

```
ArrayList objects = new ArrayList()
for (i++; i < 5; i++) {
    objects.add(FormBean);
} 
```

FormBean 类如下所示：

```
class FormBean {
    String person;
    int SSN
    String phoneNumber
} 
```

有没有办法将人员数组列表与来自 FormBean 对象的人员进行比较，并丢弃在 Persons 数组列表中没有匹配项的 FormBean 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:38:54.010

1.  遍历`FormBean`列表
2.  如果人员列表*包含*来自实际 FormBean 的人员姓名，则
3.  将此 FormBean 存储在一个单独的列表中，该列表包含应删除的所有 FormBean。
4.  最后，遍历这个待删除列表，从原来的FormBeans集合中*移除这个列表中的FormBeans*

*选择*

将所有符合您的条件（personslist*包含*人员）的 FormBeans 复制到一个新集合中，然后删除旧集合并使用新集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:43:38.387

您的删除循环应如下所示：

```
for (Iterator<FormBean> iterator = objects.iterator(); iterator.hasNext();) {
    FormBean bean = iterator.next();
    if (!persons.contains(bean.getPerson())) {
        iterator.remove();
    }
} 
```

确保您已`equals`在 FormBean 中实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:41:00.347

使用[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html#contains%28java.lang.Object%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html#contains%28java.lang.Object%29)

确保`FormBean`实现`.equals(Object o)`，以便它返回人名的字符串在`FormBean.person.equals(o)`哪里。`o`

```
class FormBean {
    String person;
    int SSN;
    String phoneNumber;

    public boolean Equals(Object o) {
        if (o instanceof String) {
            return this.person.equals(o); // Case sensitive
        } else if (o instanceof FormBean) {
            return this.equals(((FormBeans)o).person);
        }
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-24T20:37:39.190

首先关。这是什么鬼？

```
ArrayList objects = new ArrayList()
for (i++; i < 5; i++) {
    objects.add(FormBean);
} 
```

我是什么？

只需遍历对象列表，检查每个对象以查看另一个列表中是否有匹配项（请参阅 List.contains()）[http://docs.oracle.com/javase/6/docs/api/java/util /List.html#contains(java.lang.Object](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#contains(java.lang.Object) ) 并删除不匹配的。

# php - PHP - 获取页数

> ID：11638789
> 
> 赞同：3
> 
> 时间：2012-07-24T20:28:17.893
> 
> 标签：php, pagination, page-numbering

如果我知道有项目的总数以及每页显示的项目数，我如何获得页数？例如，我知道我有 11 个项目，每页显示 10 个项目。所以我会有2页。我将如何获得 PHP 中的页数？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-24T20:30:45.663

试试 ceil() 函数。

> $pages = ceil($items/$itemsPerPage);

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T20:31:38.447

我相信天花板功能是您正在寻找的。

```
ceil($items/$items_per_page) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T20:30:57.363

```
$count_pages = ceil($total / $items_per_page); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-24T20:30:58.170

这应该为您解决问题。Ceil 向上舍入数字，始终向上。

```
<?php
$maxNrOfPages = ceil($max/$itemsPerPage);
?> 
```

# ruby-on-rails - 无法在嵌入式 ruby 中导入 css

> ID：11638791
> 
> 赞同：1
> 
> 时间：2012-07-24T20:28:24.560
> 
> 标签：ruby-on-rails

嗨

我试图包含@import "bootstrap"；在样式表中名为 custom.css.scss 的文件中

现在在运行应用程序时，我得到错误：

```
Started GET "/static_pages/about" for 127.0.0.1 at 2012-07-24 13:23:20 -0700
Processing by StaticPagesController#about as HTML
  Rendered static_pages/about.html.erb within layouts/application (0.0ms)
Completed 500 Internal Server Error in 44ms

ActionView::Template::Error (different prefix: "C:/" and "D:/Rails/sample_app/ap
p/assets/stylesheets"
  (in D:/Rails/sample_app/app/assets/stylesheets/custom.css.scss)):
    2: <html>
    3: <head>
    4:   <title><%= full_title(yield(:title)) %></title>
    5:   <%= stylesheet_link_tag    "application", media: "all" %>
    6:   <%= javascript_include_tag "application" %>
    7:   <%= csrf_meta_tags %>
    8: </head>
  app/views/layouts/application.html.erb:5:in `_app_views_layouts_application_ht
ml_erb___106293522_33950052'

  Rendered C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.6
/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.0ms) 
```

请告知如何修复它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:50:54.353

无论您在标题中写的内容是什么意思，但我认为这个问题与您的 WIN 设置有关：[https ://github.com/rails/rails/issues/660](https://github.com/rails/rails/issues/660)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:11:59.140

我将我的应用程序移到了`C:\`安装 Rails 的驱动器以解决此问题。

# ruby-on-rails - 将 Ruby on Rails 博客移植到 Wordpress

> ID：11638792
> 
> 赞同：0
> 
> 时间：2012-07-24T20:28:28.173
> 
> 标签：ruby-on-rails, wordpress, post, import

我有一个不再参与的其他人制作的 Ruby on rails 博客。我想将它移植到一个新的 Wordpress 博客。Textface.com 是 RoR 博客。

我已经启动并运行了 Wordpress 自托管网站。Txtinganddriving.com

在我更改域之前，我需要将所有帖子从 RoR 博客移植到 Wordpress。我不太了解 RoR，所以我不确定如何去做。

我已经尝试移植 RSS 提要，它不包含图像，因为这是一个照片博客。而且它只能追溯到这么远，我希望移植整个站点。

我想包括帖子标题、发布日期和图片。

感谢您的输入！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:31:39.873

您想要网站的 1:1 副本，还是只想要帖子标题、内容和发布日期？

如果您可以访问数据库，只需编写一些 PHP 代码将适当的对象插入到您的 MySQL 数据库中。

如果没有，请编写一个简单的 HTML 刮板并刮掉您需要的任何东西。

# android - 将一条路径的矩阵比例拟合到另一条稍后绘制的路径

> ID：11638793
> 
> 赞同：1
> 
> 时间：2012-07-24T20:28:41.857
> 
> 标签：android, android-layout, graphics

我遇到了以下问题：目前，我在 SurfaceView 中绘制了一张图片。此外，允许用户在此图片上绘图。因此，绘制“图形”被作为路径对象处理。此外，用户可以平移和缩放图像。缩放和平移的处理是通过使用矩阵来完成的。图片以及每个路径对象都有自己的矩阵。

因此，例如，如果用户启动了应用程序，则会显示一张图片。然后，用户可以在另一个之后添加一个路径对象，依此类推。我们为每个对象创建一个新矩阵。例如，如果用户放大，那么路径对象以及图片都会被放大。

现在我的目标是，如果在图片放大或缩小时添加路径对象，则路径对象应添加到触摸位置，但应缩放到其他已绘制对象的比例。换句话说，更简单的话：如果我添加一个路径对象，它应该与已经存在的对象具有相同的比例，但它应该出现在它的新位置：

到目前为止，我尝试了不同的方法来解决问题，但没有任何效果：

首先，我用一个单一的矩阵缩放了画布，而不是单独缩放每个路径对象。但是随后，在放大图片时，添加的路径对象出现在错误的位置。

接下来，我尝试获取当前比例，然后在创建路径对象时对其进行缩放。这也不起作用。对于非方法 preScale、postScale、setScale ... 整个路径是错误的，或者它再次出现在错误的位置。

有谁知道解决方案？

# java - 我想将从串口接收的数据存储在一个字符串变量中，该变量将在另一个类中访问

> ID：11638797
> 
> 赞同：0
> 
> 时间：2012-07-24T20:29:07.237
> 
> 标签：java, rxtx

我想将从串口接收到的数据存储在一个字符串变量中，该变量将在另一个类中访问。我编写了打印从 com 端口接收到的数据的代码，但是当从它返回的方法中访问变量时`null`..请帮帮我..我正在为此使用 RxTx 库。

```
public class ProtocolImpl implements Protocol {  

    byte[] buffer = new byte[1024];  
    int tail = 0;  
    public String message;

    public void onReceive(byte b) {  
        // simple protocol: each message ends with new line  
        if (b=='\n') {  
            onMessage();  
        } else {  
            buffer[tail] = b;  
            tail++;  
        }  
    }  

    public void onStreamClosed() {  
        onMessage();  
    }  

    /* 
     * When message is recognized onMessage is invoked  
     */  
    private void onMessage() {  
        if (tail!=0) 
        {  
            // constructing message  
            message = getMessage(buffer, tail);  
            //rmess = message;
            System.out.println("RECEIVED MESSAGE: " + message);  

            if ("KITM".equalsIgnoreCase(message)) {  
                CommPortSender.send(getMessage("OK"));  
            } 
            tail = 0;  
        }  
    }  

    public String rmess() /*this method is returning null.. please help me out*/
    {
        if (tail!=0) {  
        message = getMessage(buffer, tail); 
        }
        return message;
    }

    // helper methods   
    public byte[] getMessage(String message) {  
        return (message).getBytes();  
    }  

    public String getMessage(byte[] buffer, int len) {  
        return new String(buffer, 0, tail);  
    }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:37:34.717

您正在使用[实例变量](http://en.wikipedia.org/wiki/Instance_variable) `message`。每个`ProtocolImpl`对象都有一个此变量的实例。据推测，被调用的`ProtocolImpl`对象`onMessage`是被调用的不同`ProtocolImpl`对象`rmess`。

简单的解决方法是创建`message`一个[静态变量](http://en.wikipedia.org/wiki/Static_variable)，以便在整个程序中只有该变量的一个实例。但是要小心，这可能会导致一些微妙的问题，例如同步和对象独立性。更好的解决方案是确保您使用相同的`ProtocolImpl`对象同时调用`onMessage`和`rmess`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:55:08.943

您的消息对象未序列化，因此您收到的消息为空。您可以实现 java.io.Serializable

# ruby - 正则表达式匹配除反斜杠以外的任何字符

> ID：11638801
> 
> 赞同：8
> 
> 时间：2012-07-24T20:29:18.953
> 
> 标签：ruby, regex

我怎么能在 Ruby 字符类中说“除反斜杠之外的所有符号”？

```
/'[^\]*'/.match("'some string \ hello'")  => should be nil 
```

带有两个反斜杠的变体不起作用

```
/'[^\\]*'/.match("'some string \ hello'")  => 'some string \ hello' BUT should be nil 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T20:41:05.547

您的问题不在于您的正则表达式；你说对了。您的问题是您的测试字符串**中没有反斜杠**。相反，它有一个逃逸空间。试试这个：

```
str = "'some string \\ hello'"
puts str                 #=> 'some string \ hello'
p /'[^\\]*'/.match(str)  #=> nil 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-24T20:30:55.927

您需要转义反斜杠：

```
[^\\]* 
```

因为反斜杠是正则表达式中的转义字符，因此在这里转义了右括号。

如果要验证整个字符串是否包含非反斜杠字符，则需要锚点：

```
^[^\\]*$ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T20:45:31.053

您的字符串中实际上没有要匹配的反斜杠。试着看看你的输入：

```
"'some string \ hello'".length # => 20 
"a\ b".length # => 3 
```

双引号中的“\”被转义为一个空格：

```
irb(main):014:0> " "[0].to_i # => 32
irb(main):015:0> "\ "[0].to_i # => 32
irb(main):016:0> "\ ".size #=> 1 
```

如果你想不匹配斜线，你需要两个，就像在你的第二个例子中一样，这对我来说看起来不错：

```
 /'[^\\]*'/.match("'some string \\ hello'") # => nil 
```

# playframework-1.x - 播放框架选择字段空值

> ID：11638806
> 
> 赞同：4
> 
> 时间：2012-07-24T20:29:49.453
> 
> 标签：playframework-1.x

如何在播放框架选择字段中添加“无”选项？

到目前为止，我有这个：

```
<select size="1" name="object.id">
    <option value="">&{'crud.none'}</option>
    #{list items:someItems, as:'item'}
        <option value="${item.id}">${item.name}</option>
    #{/list}
</select> 
```

但是当我选择“none”值时，play 会构造一个新对象，并尝试使用对新创建对象的引用来保存父对象，从而导致休眠 org.hibernate.TransientObjectException

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T12:55:04.560

将`none`选项的值设置为 0 并在您的控制器中添加关系，以防万一`if (item.id > 0)`

```
<option value="0">&{'crud.none'}</option> 
```

更重要的是，如果需要此值，您可以使用简单的检查`JavaScript`来确保用户选择了某个选项

# objective-c - 多线程从何而来？

> ID：11638814
> 
> 赞同：1
> 
> 时间：2012-07-24T20:30:42.527
> 
> 标签：objective-c, ios, multithreading, audio

我有一个多线程问题。在我正在排序和修改 NSOrderedSet 的代码位周围放置一个很好的 @synchronized{} 似乎可以解决我正在读回它的部分的问题。我现在的问题是试图弄清楚我的另一个线程来自哪里，以便我可以更好地理解我的代码。这些片段中的任何一个都会导致新线程吗？

```
CADisplayLink* gameTimer;
gameTimer = [CADisplayLink
             displayLinkWithTarget:self
             selector:@selector(updateDisplay:)];

[gameTimer addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode]; 
```

和/或这会启动一个线程吗？

```
 AURenderCallbackStruct callbackStruct;
 callbackStruct.inputProc = PerformThru;
 callbackStruct.inputProcRefCon = &_effectState;

 AudioUnitSetProperty(      _effectState.rioUnit, 
                            kAudioUnitProperty_SetRenderCallback,
                            kAudioUnitScope_Global, 
                            bus0, 
                            &callbackStruct, 
                            sizeof(callbackStruct);
 AudioOutputUnitStart(_effectState.rioUnit); 
```

我猜是后者，因为在 PerformThru 函数中，我开始看到调试消息，例如

```
 Object 0x682ec20 of class __NSOrderedSetM autoreleased with no pool in place - just leaking - break on objc_autoreleaseNoPool() to debug 
```

但是，主要我有@autoreleasepool ..所以我猜有什么导致另一个线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:38:16.047

音频单元渲染回调将在私有（对 Core Audio）后台线程中调用。您可以通过在 PerformThru() 中放置断点并注意调试器停止的堆栈帧不在主线程/队列中来看到这一点。

# php - 使用 xampp 在 localhost 上的 PHP 会话

> ID：11638818
> 
> 赞同：0
> 
> 时间：2012-07-24T20:30:55.810
> 
> 标签：php, session, xampp, localhost

我在本地 windows xp pc 上运行 xampp 1.7.3。phpinfo() 确认会话已启用。

在“login.php”中，我必须遵循以下代码：

```
session_start();
$_SESSION['user'] = "user";
//var_dump($_SESSION);
header("Location: index.php"); 
```

在'index.php'我有这个代码：

```
session_start();
var_dump($_SESSION); 
```

但是，当我到达 index.php 时没有打印任何内容，$_SESSION 信息似乎丢失了（因为它是在我取消注释 login.php 中的 var_dump 时打印的）。在 php.ini 中，我检查了 session.save_path。在这个路径中，我可以找到一个会话文件，其中包含存储在 login.php 中的会话信息。但是为什么会话信息没有传递到index.php？？这是出于某种原因，因为我在本地主机上运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T01:41:00.647

我不相信这会起作用，因为要使 $_SESSION 起作用，需要设置标题。

通过在脚本中间设置 header()，您可以防止 $_SESSION 被完全应用。

所以不要使用 header() 将位置更改为 index.php。您可以在 login.php 上放置一个链接，单击该链接转到 index.php，然后查看您的会话是否已正确配置。

*您也可以在页面加载后使用 JavaScript 来更改页面，只是不要使用 PHP header()。*

# c# - c#.net 4.5 异步/多线程？

> ID：11638821
> 
> 赞同：28
> 
> 时间：2012-07-24T20:30:58.040
> 
> 标签：c#, multithreading, .net-4.5

我正在编写一个从网页中抓取数据的 C# 控制台应用程序。

该应用程序将访问大约 8000 个网页并抓取数据（每个页面上的数据格式相同）。

我现在可以在没有异步方法和多线程的情况下使用它。

但是，我需要它更快。它只使用大约 3%-6% 的 CPU，我认为是因为它花费了等待下载 html 的时间。(WebClient.DownloadString(url))

这是我的程序的基本流程

```
DataSet alldata;

foreach(var url in the8000urls)
{
    // ScrapeData downloads the html from the url with WebClient.DownloadString
    // and scrapes the data into several datatables which it returns as a dataset.
    DataSet dataForOnePage = ScrapeData(url);

    //merge each table in dataForOnePage into allData
}

// PushAllDataToSql(alldata); 
```

我一直在尝试多线程，但不知道如何正确开始。我正在使用.net 4.5，我的理解是异步的，并且在 4.5 中等待是为了使编程更容易，但我还是有点迷茫。

我的想法是继续为这条线创建异步的新线程

```
DataSet dataForOnePage = ScrapeData(url); 
```

然后当每个完成时，运行

```
//merge each table in dataForOnePage into allData 
```

谁能指出我如何在.net 4.5 c#中使该行异步然后让我的合并方法运行完成的正确方向？

谢谢你。

编辑：这是我的 ScrapeData 方法：

```
public static DataSet GetProperyData(CookieAwareWebClient webClient, string pageid)
{
    var dsPageData = new DataSet();

    // DOWNLOAD HTML FOR THE REO PAGE AND LOAD IT INTO AN HTMLDOCUMENT
    string url = @"https://domain.com?&id=" + pageid + @"restofurl";
    string html = webClient.DownloadString(url);
    var doc = new HtmlDocument();
    doc.LoadHtml(html );

    // A BUNCH OF PARSING WITH HTMLAGILITY AND STORING IN dsPageData 
    return dsPageData ;
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-24T21:16:59.930

如果您想使用[`async`](http://msdn.microsoft.com/en-us/library/hh156513%28v=vs.110%29.aspx)and[`await`](http://msdn.microsoft.com/en-us/library/hh156528%28v=vs.110%29.aspx)关键字（虽然您不必这样做，但它们确实使 .NET 4.5 中的事情变得更容易），您首先需要更改您的方法以使用关键字`ScrapeData`返回一个[`Task<T>`实例，如下所示：](http://msdn.microsoft.com/en-us/library/dd321424.aspx)`async`

```
async Task<DataSet> ScrapeDataAsync(Uri url)
{
    // Create the HttpClientHandler which will handle cookies.
    var handler = new HttpClientHandler();

    // Set cookies on handler.

    // Await on an async call to fetch here, convert to a data
    // set and return.
    var client = new HttpClient(handler);

    // Wait for the HttpResponseMessage.
    HttpResponseMessage response = await client.GetAsync(url);

    // Get the content, await on the string content.
    string content = await response.Content.ReadAsStringAsync();

    // Process content variable here into a data set and return.
    DataSet ds = ...;

    // Return the DataSet, it will return Task<DataSet>.
    return ds;
} 
```

请注意，您可能希望远离`WebClient`该类，因为它本身不支持`Task<T>`其异步操作。.NET 4.5 中更好的选择是[`HttpClient`类](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient%28v=vs.110%29.aspx)。我选择使用`HttpClient`上面。此外，请查看[`HttpClientHandler`class](http://msdn.microsoft.com/en-us/library/system.net.http.httpclienthandler%28v=vs.110%29.aspx)，特别是您将用于在每个请求中发送 cookie的[`CookieContainer`属性。](http://msdn.microsoft.com/en-us/library/system.net.http.httpclienthandler.cookiecontainer%28v=vs.110%29.aspx)

但是，这意味着您很可能必须使用`await`关键字来等待*另一个*异步操作，在这种情况下，很可能是页面的下载。您必须定制下载数据的调用以使用异步版本和`await`那些。

一旦完成，你通常会调用`await`它，但在这种情况下你不能这样做，因为你会调用`await`一个变量。在这种情况下，您正在运行一个循环，因此每次迭代都会重置该变量。在这种情况下，最好将 存储`Task<T>`在一个数组中，如下所示：

```
DataSet alldata = ...;

var tasks = new List<Task<DataSet>>();

foreach(var url in the8000urls)
{
    // ScrapeData downloads the html from the url with 
    // WebClient.DownloadString
    // and scrapes the data into several datatables which 
    // it returns as a dataset.
    tasks.Add(ScrapeDataAsync(url));
} 
```

存在将数据合并到`allData`. 为此，您希望在返回的实例上调用该[`ContinueWith`方法](http://msdn.microsoft.com/en-us/library/dd270696.aspx)`Task<T>`并执行将数据添加到的任务`allData`：

```
DataSet alldata = ...;

var tasks = new List<Task<DataSet>>();

foreach(var url in the8000urls)
{
    // ScrapeData downloads the html from the url with 
    // WebClient.DownloadString
    // and scrapes the data into several datatables which 
    // it returns as a dataset.
    tasks.Add(ScrapeDataAsync(url).ContinueWith(t => {
        // Lock access to the data set, since this is
        // async now.
        lock (allData)
        {
             // Add the data.
        }
    });
} 
```

然后，您可以使用[类](http://msdn.microsoft.com/en-us/library/dd235678%28v=vs.110%29)上的[`WhenAll`方法](http://msdn.microsoft.com/en-us/library/hh160384%28v=vs.110%29.aspx)等待所有任务：[`Task`](http://msdn.microsoft.com/en-us/library/dd235678%28v=vs.110%29)`await`

```
// After your loop.
await Task.WhenAll(tasks);

// Process allData 
```

但是，请注意，您有一个`foreach`, 并且`WhenAll`需要一个[`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)实现。这是一个很好的指标，表明它适合使用 LINQ，它是：

```
DataSet alldata;

var tasks = 
    from url in the8000Urls
    select ScrapeDataAsync(url).ContinueWith(t => {
        // Lock access to the data set, since this is
        // async now.
        lock (allData)
        {
             // Add the data.
        }
    });

await Task.WhenAll(tasks);

// Process allData 
```

如果你愿意，你也可以选择不使用查询语法，在这种情况下没关系。

请注意，如果包含方法未标记为`async`（因为您在控制台应用程序中并且必须在应用程序终止之前等待结果），那么您可以在调用时简单地调用返回的[`Wait`方法](http://msdn.microsoft.com/en-us/library/dd235635.aspx)：`Task``WhenAll`

```
// This will block, waiting for all tasks to complete, all
// tasks will run asynchronously and when all are done, then the
// code will continue to execute.
Task.WhenAll(tasks).Wait();

// Process allData. 
```

也就是说，关键是，您希望将`Task`实例收集到一个序列中，然后在处理之前等待整个序列`allData`。

`allData`但是，如果可以的话，我建议在合并之前尝试处理数据；除非数据*处理*需要*整个* *.*`DataSet` _

 *** * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-25T21:23:58.313

您也可以使用[TPL Dataflow](http://msdn.microsoft.com/en-us/devlabs/gg585582.aspx)，它非常适合此类问题。

在这种情况下，您构建一个“数据流网格”，然后您的数据流过它。

这个实际上更像是一个管道而不是一个“网格”。我分三个步骤： 从 URL 下载（字符串）数据；将（字符串）数据解析为 HTML，然后解析为`DataSet`; 并合并`DataSet`到 master`DataSet`中。

首先，我们创建将进入网格的块：

```
DataSet allData;
var downloadData = new TransformBlock<string, string>(
  async pageid =>
  {
    System.Net.WebClient webClient = null;
    var url = "https://domain.com?&id=" + pageid + "restofurl";
    return await webClient.DownloadStringTaskAsync(url);
  },
  new ExecutionDataflowBlockOptions
  {
    MaxDegreeOfParallelism = DataflowBlockOptions.Unbounded,
  });
var parseHtml = new TransformBlock<string, DataSet>(
  html =>
  {
    var dsPageData = new DataSet();
    var doc = new HtmlDocument();
    doc.LoadHtml(html);

    // HTML Agility parsing

    return dsPageData;
  },
  new ExecutionDataflowBlockOptions
  {
    MaxDegreeOfParallelism = DataflowBlockOptions.Unbounded,
  });
var merge = new ActionBlock<DataSet>(
  dataForOnePage =>
  {
    // merge dataForOnePage into allData
  }); 
```

然后我们将三个块链接在一起以创建网格：

```
downloadData.LinkTo(parseHtml);
parseHtml.LinkTo(merge); 
```

接下来，我们开始将数据泵入网格：

```
foreach (var pageid in the8000urls)
  downloadData.Post(pageid); 
```

最后，我们等待网格中的每个步骤完成（这也将干净地传播任何错误）：

```
downloadData.Complete();
await downloadData.Completion;
parseHtml.Complete();
await parseHtml.Completion;
merge.Complete();
await merge.Completion; 
```

TPL Dataflow 的好处是您可以轻松控制每个部分的*并行程度。*目前，我已将下载和解析块都设置为`Unbounded`，但您可能想要限制它们。合并块使用默认的最大并行度 1，因此合并时不需要锁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T20:59:52.087

我建议阅读我对[/的](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)[相当完整的介绍`async``await`](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)。

首先，让一切都异步，从较低级别的东西开始：

```
public static async Task<DataSet> ScrapeDataAsync(string pageid)
{
  CookieAwareWebClient webClient = ...;
  var dsPageData = new DataSet();

  // DOWNLOAD HTML FOR THE REO PAGE AND LOAD IT INTO AN HTMLDOCUMENT
  string url = @"https://domain.com?&id=" + pageid + @"restofurl";
  string html = await webClient.DownloadStringTaskAsync(url).ConfigureAwait(false);
  var doc = new HtmlDocument();
  doc.LoadHtml(html);

  // A BUNCH OF PARSING WITH HTMLAGILITY AND STORING IN dsPageData 
  return dsPageData;
} 
```

然后您可以按如下方式使用它（`async`与 LINQ 一起使用）：

```
DataSet alldata;
var tasks = the8000urls.Select(async url =>
{
  var dataForOnePage = await ScrapeDataAsync(url);

  //merge each table in dataForOnePage into allData

});
await Task.WhenAll(tasks);
PushAllDataToSql(alldata); 
```

并[`AsyncContext`](http://nitoasyncex.codeplex.com/wikipage?title=AsyncContext)从我的 AsyncEx 库中使用，因为这是[一个控制台应用程序](http://nitoprograms.blogspot.com/2012/02/async-console-programs.html)：

```
class Program
{
  static int Main(string[] args)
  {
    try
    {
      return AsyncContext.Run(() => MainAsync(args));
    }
    catch (Exception ex)
    {
      Console.Error.WriteLine(ex);
      return -1;
    }
  }

  static async Task<int> MainAsync(string[] args)
  {
    ...
  }
} 
```

就是这样。不需要锁定或延续或任何其他。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-25T08:51:14.420

我相信你不需要这里`async`的`await`东西。它们可以在需要将工作转移到非 GUI 线程的桌面应用程序中提供帮助。`Parallel.ForEach`在我看来，在你的情况下使用方法会更好。像这样的东西：

```
 DataSet alldata;
    var bag = new ConcurrentBag<DataSet>();

    Parallel.ForEach(the8000urls, url =>
    {
        // ScrapeData downloads the html from the url with WebClient.DownloadString 
        // and scrapes the data into several datatables which it returns as a dataset. 
        DataSet dataForOnePage = ScrapeData(url);
        // Add data for one page to temp bag
        bag.Add(dataForOnePage);
    });

    //merge each table in dataForOnePage into allData from bag

    PushAllDataToSql(alldata); 
```**

# java - Spring Integration - FTP 出站网关 LS 在 *unix 上始终为空

> ID：11638824
> 
> 赞同：1
> 
> 时间：2012-07-24T20:31:13.260
> 
> 标签：java, spring, spring-integration

我为 ls、get、rm 配置了一个简单的 ftp 出站网关

```
 <int-ftp:outbound-gateway id="gatewayLS" 
    cache-sessions="false" 
    session-factory="incomingCachingSessionFactory"
    request-channel="inboundChannel" 
    command="ls" 
    command-options="-1" 
    expression="'${ftp.pull.remote.directory}'"
    reply-channel="toSplitter" />

<channel id="toSplitter">
    <interceptors>
        <wire-tap channel="logger" />
    </interceptors>
</channel>

<logging-channel-adapter id="logger"
    log-full-message="true" level="DEBUG" />

<splitter id="splitter" input-channel="toSplitter"
    output-channel="toGet" />

<int-ftp:outbound-gateway id="gatewayGET"
    cache-sessions="false"
    local-directory="${ftp.pull.local.directory}"
    session-factory="incomingCachingSessionFactory" 
    request-channel="toGet"
    reply-channel="downloadedFileChannel" 
    command="get" 
    command-options="-P"
    expression="headers['file_remoteDirectory'] + '/' + payload" /> 
```

这在我的开发窗口中完美运行，连接到多个不同的 FTP 服务器。

我的日志输出预期

```
DEBUG: org.springframework.integration.ftp.session.DefaultFtpSessionFactory - Connected to server [ftp.domain.com:21]
DEBUG: org.springframework.integration.ftp.gateway.FtpOutboundGateway - handler 'org.springframework.integration.ftp.gateway.FtpOutboundGateway#0' sending reply Message: [Payload=[test_file.zip]][Headers={timestamp=1343143242030, id=56758ef9-57e5-43d6-b8b7-c36539d9fd0d, file_remoteDirectory=/images/}] 
```

“连接到服务器”和“发送回复消息”之间的时间也几乎是瞬时的

但是，一旦部署到 2x Centos 服务器（5.8 和 6.2），LS 的回复通道总是空的，例如

```
DEBUG: org.springframework.integration.ftp.session.DefaultFtpSessionFactory - Connected to server [ftp.domain.com:21]
DEBUG: org.springframework.integration.ftp.gateway.FtpOutboundGateway - handler 'org.springframework.integration.ftp.gateway.FtpOutboundGateway#0' sending reply Message: [Payload=[]][Headers={timestamp=1343143961046, id=31759d6f-201e-4028-8943-0a68ae64db81, file_remoteDirectory=/images/}] 
```

“连接到服务器”和“发送回复消息”之间的时间也异常长。

更多信息：

*   所有 3 台机器都使用 maven 从相同的代码库构建 WAR。

*   2 台 centos 机器位于不同的数据中心

*   我尝试了多个不同的不相关的 FTP 服务器，结果相同

*   ftp 服务器上肯定有文件

*   ftp 服务器可以在 centos 盒子上访问，使用“ncftp”和“ftp”确认

我知道这篇文章很模糊，但它让我发疯。任何想法都非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:36:30.390

我不得不设置`<property name="clientMode" value="2" />`我的`DefaultFtpSessionFactory`

# jquery - jQuery淡入淡出淡入结束时奇怪的闪烁

> ID：11638826
> 
> 赞同：0
> 
> 时间：2012-07-24T20:31:24.113
> 
> 标签：jquery, fadein, fadeout

我有一个图像列表，我希望在用户单击列表中的链接后淡出然后淡入。出于某种原因，当我单击列表中的链接时，该项目将淡入，但就在它完成淡入之前，它会淡出并很快恢复！

```
$(document).ready(function(){
    $('.service-link').click(function(){ return switch_service(this); });
});

function switch_service( link ) {
    var slug = $(link).attr('href');

    $('.active').removeClass('active');
    $(link).addClass('active');

    $('.service-li:visible').fadeOut( 300, function(){
        $(slug).fadeIn( 300 );
    } );
    return false;
} 
```

HTML 看起来像这样：

```
<ul id="services-info">
    <li class="service-li" id="slug-1"><img src="..." /></li>
    <li class="service-li" id="slug-2"><img src="..." /></li>
    <li class="service-li" id="slug-3"><img src="..." /></li>
    <li class="give-height"></li>
</ul>

<ul id="services-list">
    <li><a class="service-link" href="#slug-1">Test 1</a></li>
    <li><a class="service-link" href="#slug-2">Test 2</a></li>
    <li><a class="service-link" href="#slug-3">Test 3</a></li>
</ul> 
```

我不确定有什么不同。我以前做过这种事情，没有问题。有时功能可能会因为项目之间的快速点击而有点不稳定，但这次每次都会发生（在 FF 和 Chrome 中测试）。

编辑：好的，所以我通过添加额外的 ID 和一个带有类的空列表项来使我的示例更忠实于我的页面上运行的内容，以防止我的 ul 隐藏元素折叠。我最初没有发布我的 CSS，因为我没有想到这可能是问题所在，这里是：

```
#services-list,
#services-info {
    margin: 0px;
    padding: 0px;
    display: block;
    width: 465px;
    float: left;
    list-style-type: none;
    font-size: 21px;
    line-height: 40px;
    height: 100%;
    position: relative;
}

#services-list:after,
#services-info:after {
    content: "";
    display: block;
    clear: both;
}

#services-info > li {
    text-align: center;
    position: absolute;
}

#services-list {
    padding-left: 50px;
    color: #cacaca;
}

#services-list a {
    color: #cacaca;
}

#services-list a.active {
    color: #bed545;
}

#services-info .give-height {
    display: block;
    min-height: 30px;
}

#services-info > li {
    display: none;
    text-align:center;
    vertical-align: middle;
    height: 100%;
    position: relative;
} 
```

为了准确显示发生了什么，这是[测试链接](http://bbandm.bbandmhosting.com/services/)，但是一旦回答了这个问题，我就会将其删除（对于将来可能遇到此问题的人感到抱歉，希望我能很好地描述该问题以使其仍然有用)

# php - jQuery UI 和 PHP - 向 PHP 发送 'To' 列

> ID：11638829
> 
> 赞同：0
> 
> 时间：2012-07-24T20:31:36.423
> 
> 标签：php, jquery, jquery-ui-sortable

我正在使用 jQuery UIs Sortable 来允许用户从 4 列中移动项目以及更改每列中项目的顺序。我让后者工作没有问题；将新订单更新到数据库。

但我不确定如何处理从 A 列到 B 列的存储移动。每个无序列表都有一个唯一的 ID，所以我想将这些信息一起发送；我只是不知道如何做到这一点。

```
$("#list1, #list2, #list3, #list4").sortable({ 
    connectWith: ".sort",
    placeholder: "shadow", 
    dropOnEmpty: true,
    opacity: 0.8, 
    cursor: 'move', 
    update: function() {
        var order = $(this).sortable("serialize") + '&update=update';
        $.post("/update.php", order, function(theResponse) {
            $("#alert").html(theResponse);
            $("#alert").slideDown('slow');
            slideout();
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:49:05.927

我找到了我自己问题的答案。答案是以稍微不同的方式将数据传递给 PHP 文件，以允许更健壮的变量数量（而不是仅仅序列化一组信息）。

```
var item   = ui.item;
var new_ul = item.parent();
var order  = [];
container.children('li').each(function(i){
    reorder[i] = $(this).attr('id');
});

$.ajax({
    method:'post',
    url: 'update.php',
    data:{
        'new_ul':container.attr('id'),
        'item':item.attr('id'),
        'order':order
    }
}); 
```

此解决方案的全部功劳归于 CodeIgniter 的用户“Zehee”（我相信他从 37signals 获得了解决方案）[http://codeigniter.com/forums/viewthread/175134/#831756](http://codeigniter.com/forums/viewthread/175134/#831756)

# ember.js - ember-data isValid、isSaving 和 isError

> ID：11638842
> 
> 赞同：6
> 
> 时间：2012-07-24T20:32:14.697
> 
> 标签：ember.js, ember-data

我有一个简单的 ember 数据模型：

```
WZ.Exercise = DS.Model.extend
  name: DS.attr 'string'
  description: DS.attr 'string'
  group: DS.belongsTo 'WZ.Group' 
```

如果已保存新记录或发生错误，我想向用户显示确认消息。错误可能是对象无效并且返回错误 json，如下所示：

```
{"errors":{"description":["can't be blank"]}} 
```

我可以看到每个模型都带有一个 isSaving、isValid 属性和一个 isError 属性。

谁能告诉我如何使用这些属性向用户显示正确的通知？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T19:14:50.087

我无法在验证部分为您提供帮助，但如果您想根据数据状态向用户显示信息，您可以在视图模板中使用这些状态，如下所示：

```
{{#if content.isNew }}
  <button {{ action save }} >Save</button>
{{/if}}
{{#if content.isSaving }}
  <i>Saving record...</i>
{{/if }}
{{#if content.isLoaded }}
  <b>Record created</b>
{{/if }}
{{#unless content.isValid }}
  <error>Error saving data</error>
{{/unless }} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:06:21.050

除了 sly7_7 的第一个链接（将`ObserverSaveOnce`函数添加到`DS.Model`）之外，您可以修补`RESTadapter`以捕获服务器端错误消息。

您可以在此处找到示例实现：[https ://gist.github.com/3981832](https://gist.github.com/3981832)

（我没有在这里粘贴代码，因为我可能会更新新版本的 ember-data 的要点）

# php - 单击时如何突出显示导航中的选定链接

> ID：11638843
> 
> 赞同：1
> 
> 时间：2012-07-24T20:32:16.903
> 
> 标签：php, html, css, navigation

> **可能重复：**
> [如何根据当前页面突出显示链接？](https://stackoverflow.com/questions/180887/how-do-i-highlight-a-link-based-on-the-current-page)

# 语境

我一直在尝试在我的导航菜单中获得一个选定的链接，以便在单击时保持突出显示，但我找不到任何体面的可以理解的教程。

# 问题

*   我该如何解决这个问题？
*   jQuery 或 PHP 会是最好的吗？

# 代码

```
<ul>
    <li><a href="aboutus.php">ABOUT US</a>
        <ul>
            <li><a href="aboutus.php">Company</a></li>
            <li><a href="team.php">Team</a></li>
            <li><a href="careers.php">Careers</a></li>
        </ul>
    </li>

    <li><a href="ourwork.php">OUR WORK</a>
        <ul>
            <li><a href="ourwork.php">Portfolio</a></li>
            <li><a href="upcoming.php">Upcoming</a></li>
        </ul>
    </li>

    <li><a href="whatsnew.php">WHATS NEW</a>
        <ul>
            <li><a href="whatsnew.php">News</a></li>
            <li><a href="blog.php">Blog</a></li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:49:25.903

# 解决方案

`current`清洁器是在服务器端生成页面时为选定的链接添加一个类。

# 例子

根据您提供给我们的代码，我发现这个示例与您当前的架构很接近。

来源：[http ://www.finalwebsites.com/tutorials/css-navigation-bar.php](http://www.finalwebsites.com/tutorials/css-navigation-bar.php)

**PHP**

```
$items = array(
    array('link'=>'scripts.html', 'label'=>'PHP scripts'), 
    array('link'=>'tutorials.html', 'label'=>'Tutorial'), 
    array('link'=>'template.html', 'label'=>'CSS template'), 
    array('link'=>'examples.html', 'label'=>'Code examples')
);

$menu = '<ul>';

foreach ($items as $val) {
    $class = ($_SERVER['SCRIPT_NAME'] == $val['link']) ? ' class="current"' : '';
    $menu .= sprintf('<li><a href="%s">%s</a></li>', $val['link'], $val['label']);
}

$menu .= '</ul>';

echo $menu; 
```

**CSS**

```
ul li a.current { background-color: #40611F; color: #FFFFFF; } 
```

# git - 修复缺失的树

> ID：11638844
> 
> 赞同：4
> 
> 时间：2012-07-24T20:32:19.657
> 
> 标签：git

我的 git repo 已损坏，不幸的是它只存在于本地。

```
$ git fsck --full
Checking object directories: 100% (256/256), done.
broken link from    tree 54b4ff576b2e39831a298e58a38d91890f622b63
              to    tree d564d0bc3dd917926892c55e3706cc116d5b165e
missing tree d564d0bc3dd917926892c55e3706cc116d5b165e 
```

我检查了它是什么`d564d0bc`，它是我`log/`在 rails 项目中的文件夹。此文件夹仅包含`*.log`文件（被忽略）和一个`.gitkeep`文件。

我尝试按照本文中提到的步骤进行[操作](https://stackoverflow.com/questions/7236738/how-can-i-recover-my-git-repository-for-a-missing-tree-error)，但我使用的是 Windows 版 GitHub，而 powershell 在一个空管道上对我大喊大叫。

任何帮助表示赞赏。

更新：我将项目复制到 linux 中，所以我不必担心 powershell 命令。我仍然没有找到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T00:13:07.657

如果您确定丢失的树仅包含 .gitkeep 文件并且您拥有其内容，则可以重新创建丢失的树。

你只需要知道一堆低级的 git 命令吗？你准备好了吗？去！首先。你需要使用`git mktree`.

此命令从标准输入数据中读取并根据此信息创建一个树。它输出新创建的树的 sha1 总和（**不要忘记**检查它是否等于 d564d0bc3dd917926892c55e3706cc116d5b165e）

接下来你需要知道这个输入的格式是什么？！格式如下

```
<mode> SP <type> SP <object> TAB <file> 
```

其中 SP 是空格，TAB 是制表符。

*   是文件模式
*   是一个 git 对象类型（文件的 blob，文件夹的树）
*   是对象的 sha1 哈希
*   是一个文件名

让我举个例子。从该文件夹创建树（some_file 文件为空）

```
drwxrwxr-x 2 aleksandr aleksandr 4096 2012-07-25 03:51 .
drwxrwxr-x 4 aleksandr aleksandr 4096 2012-07-25 03:54 ..
-rw-rw-r-- 1 aleksandr aleksandr    0 2012-07-25 03:51 some_file 
```

你需要跑

```
echo -e "100644 blob e69de29bb2d1d6434b8b29ae775ad8c2e48c5391\tsome_file" | git mktree 
```

但是您是如何找到所需的 sha1 哈希的？！`git hash-object`救援。只是

```
git hash-object log/.gitkeep 
```

来确定它的哈希值。我认为您需要知道的所有内容来修复您的存储库。

# android - 如何在这个 android 应用程序中按类别对项目进行分组？

> ID：11638846
> 
> 赞同：0
> 
> 时间：2012-07-24T20:32:22.613
> 
> 标签：android, android-layout, mapping

我的应用程序允许用户选择一个类别，然后根据该类别输入其他信息。假设他们选择“电子”类别，然后他们可以在其中输入 CD、PS3、iPod 等。我有几个类别，例如爱好，一般，家庭等。

我想在按类别排序的列表视图中显示项目，如下所示：

```
Electronics
 -CD
 -PS3
 -iPod
Books
 -Perl
 -Android is fun
 -C 
```

等等等等……

我正在使用以下方法从数据库中获取所有数据：

```
return mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID,KEY_CATEGORY
                KEY_NAME, KEY_STATUS, KEY_DESCRIPTION}, null, null, null, null, null); 
```

我还尝试使用 rawQuery 和 DISTINCT 标签，但这不起作用，因为它会选择独特的项目。我正在使用 simpleCursorAdapter 来显示数据：

```
SimpleCursorAdapter list =
    new SimpleCursorAdapter(this, R.layout.items, c, mapFrom, mapTo);
setListAdapter(list); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:36:50.020

我猜你想要这个：

```
return mDb.query(DATABASE_TABLE, 
            new String[] {KEY_ROWID, KEY_CATEGORY, KEY_NAME, KEY_STATUS, KEY_DESCRIPTION}, 
            null, null, null, null, 
            KEY_CATEGORY + ", " + KEY_NAME); 
```

使用 Order By 参数，您的查询首先按类别排序，然后按名称排序。这会给你一个类似的结果：

```
Category, Name
--------------
Books, Android is fun
Books, C
Books, Perl
Electronics, CD
Electronics, iPod
Electronics, PS3 
```

如果您只想列出书籍，那么您只需使用：

```
return mDb.query(DATABASE_TABLE, 
            new String[] {KEY_ROWID, KEY_CATEGORY, KEY_NAME, KEY_STATUS, KEY_DESCRIPTION}, 
            KEY_CATEGORY + "=?", 
            new String[] {"Books"}, 
            null, null, 
            KEY_NAME); 
```

当然，如果您只想在 ListView 中显示类别和名称，那么将 SELECT 子句缩短为您需要的内容会更有效：`new String[] {KEY_ROWID, KEY_CATEGORY, KEY_NAME}`.

**从评论添加**

为了得到这样的结果：

```
Books
    Android is fun
    C
    Perl
Electronics
    CD
    iPod
    PS3 
```

您可以使用 ExpandableListView 或自己处理 Cursor`List<String>`并将其传递给 ArrayAdapter。

# linq - LINQ to SQL：具有多个连接条件的两个左外连接

> ID：11638847
> 
> 赞同：0
> 
> 时间：2012-07-24T20:32:25.867
> 
> 标签：linq, sqlite

这是我的 SQL 查询：

```
Select  <a bunch of columns>
from fields f
join Table1 c1 on c1.fieldID = f.ID and c1.year = 2014
join Table2 fRes on f.ID = fRes.fieldID
join Table3 stst on f.ID = stst.fieldID
join Table4 model on c1.ID = model.yearID
left join Table5 fA on f.ID = fA.fieldID and fA.year = 2014 
left join Table6 nA on f.ID = nA.fieldID and nA.year = 2014 
where  fA.sourcename IS NULL and nA.Sourcename IS NULL 
```

LINQ 到 SQL：

```
from f in BasicDataAccess.Data.FieldsList
join c1 in BasicDataAccess.Data.Table1List on f.ID equals c1.fieldID 
join fRes in BasicDataAccess.Data.Table2List on f.ID equals fRes.fieldID
join soilTst in BasicDataAccess.Data.Table3List on f.ID equals soilTst.fieldID
join modelRsNM in BasicDataAccess.Data.Table4List on c1.ID equals modelRsNM.YearID
join fA in BasicDataAccess.Data.Table5List on f.ID equals fA.fieldID into group1
from g1 in group1.Where(fA => fA.Year == reportYear).DefaultIfEmpty()
join nA in BasicDataAccess.Data.Table6List on f.ID equals nA.fieldID into group2
from g2 in group2.Where(nA => nA.Year == reportYear).DefaultIfEmpty()
where g1.sourceName == null && g2.sourceName == null 
```

问题：执行时查询抛出 Nullreference 异常未处理..对象引用未设置为对象错误的实例..

我错过了什么？是否可以在 where 子句中引用左外连接表？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:39:51.373

据我所知，这条线

```
from g1 in group1.Where(fA => fA.Year == reportYear).DefaultIfEmpty() 
```

`null`如果没有行可以生产。在这种情况下，当您尝试对其进行过滤时（`where g1.sourceName == null`），您将获得空引用（因为`g1`is `null`）。

# java - 来自 ejb.jar 问题的 Glassfish 3.1.2 lib/jar 引用

> ID：11638854
> 
> 赞同：1
> 
> 时间：2012-07-24T20:33:22.193
> 
> 标签：java, spring, jakarta-ee, glassfish

我一直致力于使用 Java 7 将我们的代码库迁移到 Glassfish 3.1.2。我对这个问题感到震惊，EAR 的部署失败了。我有一个 EAR，有模块、ejb.jar、几个 war 文件，以及包含要在 EAR 中的其他模块之间共享的 jar 文件的 lib 目录。

问题是 ejb.jar 引用了 lib/abc.jar 文件中的一些 spring bean 定义并且无法找到 spring 文件。结构是这样的：

耳朵

*   ejb.jar（这里的一些 spring 文件是指 lib spring 文件，如 xyz.xml 导入 spring/abc.context.xml）
*   几个战争项目。
*   lib/lot 的 jar 文件（其中一个 jar 包含从 ejb.jar 引用的 spring 文件，请注意该文件位于 jar 内的目录中，例如 spring/abc-context.xml）

但是 ejb jar 无法从 lib/.jar 加载 bean 定义

我曾尝试使用 ejb.jar 中的 Manifest.MF 来引用 lib/abc.jar，但没有运气......

不确定新 GF 3.1.2 是否存在某种问题，为什么它不能尊重 Manifest 文件。任何帮助都感激不尽！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:27:31.233

看起来 JVM 不喜欢手动编辑的清单文件，我的猜测是 Windows 正在添加诸如回车之类的东西。我设法通过使用 ant 生成清单文件来让它工作。

谢谢，希望对某人有所帮助。

# c++ - c++如何解释二进制数

> ID：11638856
> 
> 赞同：0
> 
> 时间：2012-07-24T20:33:33.883
> 
> 标签：c++, binary-data

我有一个关于 C++ 中二进制数的一般性问题。我正在读取 32 位数字的二进制文件，然后将这些数字写入文本文件。我的问题是，当我这样做时

```
long int temp;
temp = ( fileBuf[N * 4 * i + 4 * j + 0] << 24 |
         fileBuf[N * 4 * i + 4 * j + 1] << 16 |
         fileBuf[N * 4 * i + 4 * j + 2] << 8  | 
         fileBuf[N * 4 * i + 4 * j + 3] << 0  );
myfile1 << temp << "\t"; 
```

c++ 是否理解我希望它将二进制重新解释为十进制数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:39:37.257

*C++`int`变量中的*所有数字都是二进制的。*与十进制之间的转换发生在读取或写入数字时，或者编译器将其从常量转换为代码时。*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:39:45.587

如果我将这个问题解释为“这会做我想要的吗？” 那么答案是**肯定**的，只要您希望它从 offset 处的缓冲区（可能是从文件中加载）中读取一个 32 位大端整数`4 * N * i + 4 * j`。

当然假设 fileBuf 被声明为字符或无符号字符类型。例如，如果它是一组短裤，它的行为会有所不同。你最终会得到一个 64 位数量的残缺表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:39:19.240

不。事实上，直到您在最后一行打印出来，数字才会转换为十进制。*

# ios - UISegmentedControl 以编程方式更改段数

> ID：11638861
> 
> 赞同：80
> 
> 时间：2012-07-24T20:33:53.133
> 
> 标签：ios, uikit, uisegmentedcontrol

有没有办法以编程方式更改段数？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-07-24T20:41:37.800

是的，您可以使用

```
removeSegmentAtIndex:(NSUInteger) animated:(BOOL) 
```

和

```
insertSegmentWithTitle:(NSString *) atIndex:(NSUInteger) animated:(BOOL) 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2014-04-20T07:05:16.417

要完全替换段，您可以使用以下函数：

```
- (void)setSegments:(NSArray *)segments
{
    [segmentController removeAllSegments];

    for (NSString *segment in segments) {
        [segmentController insertSegmentWithTitle:segment atIndex:segmentController.numberOfSegments animated:NO];
    }
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2015-12-03T15:44:55.583

这是一个小的 Swift 扩展，用新值数组替换当前的 segmentedControl

### 斯威夫特 3

```
extension UISegmentedControl {
    func replaceSegments(segments: Array<String>) {
        self.removeAllSegments()
        for segment in segments {
            self.insertSegmentWithTitle(segment, atIndex: self.numberOfSegments, animated: false)
        }
    }
} 
```

### 斯威夫特 4

```
extension UISegmentedControl {
    func replaceSegments(segments: Array<String>) {
        self.removeAllSegments()
        for segment in segments {
            self.insertSegment(withTitle: segment, at: self.numberOfSegments, animated: false)
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-04-06T18:20:38.757

这是一个用字符串序列替换段的 Swift 扩展。[它与此处给出的另一个答案](https://stackoverflow.com/a/34070197/7828620)相似，只是它可以与任何序列一起使用，这意味着您也可以传入切片、集合等。

```
extension UISegmentedControl {

    /// Replace the current segments with new ones using a given sequence of string.
    /// - parameter withTitles:     The titles for the new segments.
    public func replaceSegments<T: Sequence>(withTitles: T) where T.Iterator.Element == String {
        removeAllSegments()
        for title in withTitles {
            insertSegment(withTitle: title, at: numberOfSegments, animated: false)
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-11-13T23:07:45.080

为了完整起见（并且因为我最终在这里寻找如何在 xib 中实现相同的功能）这里是如何在 xib 中做到这一点：

![在此处输入图像描述](../Images/56c9a470a290360aad73ad24d567cfe4.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-22T03:40:09.190

为我工作，UIsegmentedControll 包含两个段，我想在索引 2 中添加一个，在 swift 2.2 中使用此代码：

```
SEG_TipoFiltro.insertSegmentWithTitle("Title", atIndex: 2, animated: false) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-19T09:08:00.370

**使用代码在swift4中添加和删除段**

```
class ViewController: UIViewController {

  @IBOutlet weak var segment1: UISegmentedControl!

  override func viewDidLoad() {
    super.viewDidLoad()
    // Do any additional setup after loading the view, typically from a nib.
  }

  @IBAction func insert(_ sender: Any) {  
    segment1.insertSegment(withTitle: "\(segment1.numberOfSegments+1)", at: segment1.numberOfSegments, animated: true)  
  }

  @IBAction func remove(_ sender: Any) {  
    segment1.removeSegment(at: segment1.numberOfSegments-1, animated: true)
  }
} 
```

# pytest - 在 py.test 中，如何缩小 xfail 标记的范围？

> ID：11638867
> 
> 赞同：2
> 
> 时间：2012-07-24T20:34:24.873
> 
> 标签：pytest

我想缩小 pytest xfail 标记的范围。就我目前使用的而言，它标志着整个测试功能，功能出现任何故障都很爽。

我想将其缩小到更小的范围，可能使用类似于“with pytest.raises (module.Error)”的上下文管理器。例如：

```
@pytest.mark.xfail
def test_12345():
    first_step()
    second_step()
    third_step() 
```

如果我在我调用的三种方法中的任何一种中断言，此测试将失败。相反，我希望测试只有在 second_step() 中断言而不是在其他地方断言时才会失败。像这样的东西：

```
def test_12345():
    first_step()
    with pytest.something.xfail:
        second_step()
    third_step() 
```

py.test 有可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:31:14.277

您可以自己定义一个上下文管理器来执行此操作，如下所示：

```
import pytest

class XFailContext:
    def __enter__(self):
        pass
    def __exit__(self, type, val, traceback):
        if type is not None:
            pytest.xfail(str(val))
xfail = XFailContext()

def step1():
    pass

def step2():
    0/0

def step3():
    pass

def test_hello():
    step1()
    with xfail:
        step2()
    step3() 
```

当然你也可以修改上下文管理器来查找特定的异常。唯一需要注意的是，您不能导致“xpass”结果，即（部分）测试意外通过的特殊结果。

# ruby-on-rails - 路由错误没有路由匹配

> ID：11638870
> 
> 赞同：0
> 
> 时间：2012-07-24T20:34:32.213
> 
> 标签：ruby-on-rails, routing, controller

我正在尝试从他的个人资料（user_path）中获取用户可以注册他的车辆（new_user_car_path）。但我收到了这个错误：

```
Routing Error
No route matches {:action=>"new", :controller=>"cars"} 
```

为此我有下一个 routes.rb

```
Estaciones::Application.routes.draw do
root :to => "static_pages#home"
match '/contact', :to=>'static_pages#contact'
match '/about', :to=>'static_pages#about'
devise_for :users
resources :users do
resources :cars, :only => [:new, :create, :edit, :destroy]
end 
```

这是 user_path 的一部分

```
<div class="container">

  <fieldset>
    <h1><%= @user.email %></h1>
    <br>

    <h2>options</h2>
    <p>
    <strong>new car registration</strong>
    <%= link_to "Sign up now!", new_user_car_path, :class => "btn btn-primary" %>

    </p>
    <p>
    <strong>all cars view</strong>

    </p>
  </fieldset>
</div> <!-- /container --> 
```

和我的 CarsController

```
class CarsController < ApplicationController
    def new
      @car = Car.new
    end

    def create
        @car = current_user.cars.build(params[:car])
        if @car.save
            redirect_to current_user, :flash => { :success => "car created!" }
        else
            redirect_to new_user_car_path, :flash => { :success => "sorry try again" }
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:54:09.233

您需要将信息传递给路由，以便它可以确定去哪里。

如果要为用户创建新车，则需要传递用户。否则，rails 将不知道从哪里获取用户...如果您考虑一秒钟以上，这是合乎逻辑的...

```
new_user_car_path(user) 
```

# asp.net-mvc-3 - 具有私有或受保护 Id 设置器的实体在 IDocumentSession.Store(entity) 上创建一个新实体，而不是更新现有实体

> ID：11638871
> 
> 赞同：0
> 
> 时间：2012-07-24T20:34:38.883
> 
> 标签：asp.net-mvc-3, ravendb

我正在使用 MVC3，我的编辑控制器如下所示：

```
[HttpPost]
public ActionResult Edit(Firm firm)
{
    _documentSession.Store(firm); 
    return RedirectToAction("Index");
} 
```

出于某种原因，当我这样设置我的实体 id 时： public string Id {get; 放;}

在点击这个控制器动作并重新加载所有实体后，它会做它应该做的事情，编辑实体。

如果我将实体的 Id 属性设置为私有或受保护

```
public string Id { get; protected set; }
public string Id { get; private set; } 
```

同样的调用在 RavenDB 中创建了一个具有新 ID 的新实体。

是否存在某种类型的设置，RavenDB 可以与私有或受保护的 ID 设置器一起使用？

我不喜欢我的实体的 ID 可以公开设置的想法。

谢谢，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T07:44:13.000

Please open an issue about this [here](http://issues.hibernatingrhinos.com/issues#newissue=yes). See if you can attach a failing test it will be all better. This should work, and will be fixed.

# java - Netbeans 在运行时不加载类

> ID：11638872
> 
> 赞同：2
> 
> 时间：2012-07-24T20:34:41.977
> 
> 标签：java, netbeans-7, dynamic-loading

我正在将 Java 应用程序移动到 Netbeans 平台。其中一个函数使用 Xerces 库中的 SAXBuilder 来解析 XML。

SAXBuilder 声明

```
SAXBuilder builder = new SAXBuilder("org.apache.xerces.parsers.SAXParser", true); 
```

此行会导致 JDOM 异常（我猜是因为它无法加载指定的解析器）：

```
builder.build(xmlFile); 
```

错误信息是：

> 无法加载 org.apache.xerces.parsers.SAXParser：未找到 SAX2 驱动程序类 org.apache.xerces.parsers.SAXParser：不会从 ModuleCL@16c14e7 [org 之一任意加载类 org.apache.xerces.parsers.SAXParser .netbeans.libs.xerces] 和 ModuleCL@17e5fde[czsaw.project] 从 SystemClassLoader[406 modules] 开始；见[http://wiki.netbeans.org/DevFaqModuleCCE](http://wiki.netbeans.org/DevFaqModuleCCE)

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:44:28.523

确保您在项目库中加载的库是 SAXBuilder 的正确包。似乎存在类歧义，不确定要加载哪个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-09T19:46:43.217

查看 Netbeans 的常见问题解答。

如果有多个模块导致歧义，他们将类加载器设计为失败。

[http://wiki.netbeans.org/DevFaqModuleCCE](http://wiki.netbeans.org/DevFaqModuleCCE)

就像文章建议的那样，将此代码放在应该定义要使用的类的模块中：

Thread.currentThread().setContextClassLoader( **YourClass** .class.getClassLoader());

# javascript - 使用 THREE.LineBasicMaterial 的线条粗细

> ID：11638883
> 
> 赞同：45
> 
> 时间：2012-07-24T20:35:15.163
> 
> 标签：javascript, webgl, three.js

我正在使用下面的代码在我的 three.js 场景中创建数百行

```
edgeGeometry[i] = new THREE.Geometry();
edgeGeometry[i].vertices[0] = v(x1,y1,z1);
edgeGeometry[i].vertices[1] = v(x2,y2,z2);
edgesMat[i] = new THREE.LineBasicMaterial({
    color: 0x6699FF, linewidth: 1, fog:true});
edge[i] = new THREE.Line(edgeGeometry[i], edgesMat[i]);
edge[i].type = THREE.Lines;
scene2.add(edge[i]); 
```

它工作得很好，但是当我将“线宽”的值更改为更大或更小的值时，我发现场景没有区别。
我应该如何改变线条的粗细？有任何想法吗？
谢谢， 迪米特里斯

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-09-10T07:07:37.210

## ~~1）使用原生OpenGL~~

您可以通过将浏览器设置为使用原生 OpenGL 而不是 ANGLE 来实现线条粗细的渲染。[您可以在此处阅读如何在 Chrome 上执行此操作](http://www.geeks3d.com/20130611/webgl-how-to-enable-native-opengl-in-your-browser-windows/)。请记住，如果您切换到原生 OpenGL，您将体验到性能差异。

**编辑：**

~~大师 MrDoob 本人[在这里发布了如何为 Chrome 和 Firefox 执行此操作](https://github.com/mrdoob/three.js/wiki/How-to-use-OpenGL-or-ANGLE-rendering-on-Windows)。~~

**注意：** *第一个选项不再是有效的解决方案，因为最新的 OpenGL 版本也不再支持线条粗细。还要检查[@gman 他的答案](https://stackoverflow.com/a/41911520/1697459)。这意味着，如果您想使用线条粗细，第二个选项就是您要走的路。*

* * *

## 2）使用`THREE.MeshLine`类

还有另一种解决方案；[github上的](https://github.com/spite/THREE.MeshLine/blob/master/README.md)[这个`THREE.MeshLine`](https://github.com/spite/THREE.MeshLine/blob/master/README.md)类是一个很好的解决方法。它带有一个特殊的`THREE.MeshLineMaterial`. 根据文档，它很简单：

> *   创建和填充几何
> *   创建`THREE.MeshLine`并分配几何
> *   创建一个`THREE.MeshLineMaterial`
> *   使用`THREE.MeshLine`和`THREE.MeshLineMaterial`创建一个`THREE.Mesh`

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-25T00:05:21.563

你在使用 Windows 吗？
我记得这在 Windows 上不起作用，因为它没有在[ANGLE](http://code.google.com/p/angleproject/)中实现。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-05-23T13:38:14.303

这发生在 Windows Chrome 和 Firefox 中，两者都使用 ANGLE（WebGL 到 DirectX 包装器）。

ANGLE项目仍然没有解决这个问题。您可以在此处为问题加注星标以获得更高的优先级，并在将要实施时收到通知：

[https://code.google.com/p/angleproject/issues/detail?id=119](https://code.google.com/p/angleproject/issues/detail?id=119)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-05-09T13:47:18.073

**我使用 TubeGeometry 在两点之间创建一条粗线：**

参见 Helix 中的绿线

[![在此处输入图像描述](../Images/13ebbf5b13fd869e6b3a677b6aecb038.png)](https://i.stack.imgur.com/jubiG.png)

```
// line material
var lineMaterial = new THREE.LineBasicMaterial({ color: 0x00ff00 });

let startVector = new THREE.Vector3(
    RADI * Math.cos(t),
    RADI * Math.sin(t),
    3 * t
  );
  let endVector = new THREE.Vector3(
    RADI * Math.cos(t + 10),
    RADI * Math.sin(t + 10),
    3 * t
  );

  let linePoints = [];
  linePoints.push(startVector, endVector);

  // Create Tube Geometry
  var tubeGeometry = new THREE.TubeGeometry(
    new THREE.CatmullRomCurve3(linePoints),
    512,// path segments
    0.5,// THICKNESS
    8, //Roundness of Tube
    false //closed
  );

  let line = new THREE.Line(tubeGeometry, lineMaterial);
  scene.add(line); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-01-28T15:30:58.383

这不再只是 ANGLE 中的问题，而是所有平台上的问题。浏览器需要切换到 OpenGL 4+ 核心配置文件以支持 WebGL2，而 OpenGL 4+ 核心配置文件不支持大于 1 的线宽。来自 OpenGL 4.0+ 规范，E.2.1 节

> ## E.2.1 已弃用但仍受支持的功能
> 
> 以下功能已弃用，但仍存在于核心配置文件中。它们可能会从 OpenGL 的未来版本中删除，并在实现核心配置文件的前向兼容上下文中删除。
> 
> *   宽线 - LineWidth 值大于 1.0 将生成 INVALID_VALUE 错误。

要绘制较粗的线条，您需要生成几何图形。对于three.js，有这个库（Wilt 也指出）

[https://github.com/spite/THREE.MeshLine](https://github.com/spite/THREE.MeshLine)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-17T06:18:37.537

您可以使用 CanvasRenderer 代替 Webglrenderer。[在此处](http://threejs.org/examples/#canvas_geometry_shapes)查看官方文档，其中每个形状的边框线宽 = 10；

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-11-09T15:24:13.653

您可以使用为加厚（多段）线[`extrude-polyline`](https://www.npmjs.com/package/extrude-polyline)生成[单纯复形](https://en.wikipedia.org/wiki/Simplicial_complex)[`three-simplicial-complex`](https://www.npmjs.com/package/three-simplicial-complex)并将其转换为 three.js Mesh 来实现相同的效果：

```
const THREE = require('three');
const extrudePolyline = require('extrude-polyline');
const Complex = require('three-simplicial-complex')(THREE);

function thickPolyline(points, lineWidth) {
  const simplicialComplex = extrudePolyline({
    // Adjust to taste!
    thickness: lineWidth,
    cap: 'square',  // or 'butt'
    join: 'bevel',  // or 'miter',
    miterLimit: 10,
  }).build(points);

  // Add a z-coordinate.
  for (const position of simplicialComplex.positions) {
    position[2] = 0;
  }

  return Complex(simplicialComplex);
}

const vertices = [[0, 0], [10, 0], [10, 10], [20, 10], [30, 00]];
const geometry = thickPolyline(vertices, 10);

const material = new THREE.MeshBasicMaterial({
  color: 0x009900,
  side: THREE.DoubleSide
});
const mesh = new THREE.Mesh(geometry, material);
scene.add(mesh); 
```

如果你想对折线进行纹理贴图，事情会变得有点复杂。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-19T22:54:05.177

感谢[Wilt 的回答](https://stackoverflow.com/a/25759280/1599699)，他用[THREE.MeshLine](https://github.com/spite/THREE.MeshLine)为我指明了正确的方向。

然而，这可能比他们想象的要复杂一些......所以这是我非常仔细地遵循他们的文档和他们的[演示](https://www.clicktorelease.com/code/THREE.MeshLine/demo/index.html)代码的解决方案......（假设你已经包含了 Three 和 MeshLine）：

```
 renderer = new THREE.WebGLRenderer({ canvas });

    //...

    function createCircle(resolution) {
        let circleGeometry = new THREE.Geometry();
        for (let rotation = 0; rotation <= Math.PI * 2.0; rotation += Math.PI * 0.1) {
            circleGeometry.vertices.push(
                new THREE.Vector3(Math.cos(rotation), Math.sin(rotation), 0));
        }
        let circleLine = new MeshLine();
        circleLine.setGeometry(circleGeometry);
        //Bonus: parabolic width! (See Z rotation below.)
        //circleLine.setGeometry(circleGeometry, function(point) {
            //return Math.pow(4 * point * (1 - point), 1);
        //});

        //Note: resolution is *required*!
        return new THREE.Mesh(circleLine.geometry,
            new MeshLineMaterial({
                color: 'blue',
                resolution,
                sizeAttenuation: 0,
                lineWidth: 5.0,
                side: THREE.DoubleSide
            }));
    }

    let circle = createCircle(new THREE.Vector2(canvas.width, canvas.height));
    circle.rotation.x = Math.PI * 0.5;
    circle.position.y = 20.0;
    scene.add(circle);

    //In update, to rotate the circle (e.g. if using parabola above):
    world.circle.rotation.z += 0.05; 
```

关闭尺寸衰减并使用`THREE.DoubleSide`，就像我在上面所做的那样，无论你从哪里看它（不是“真正的 3D”），这个圆圈都会看起来像一个漂亮、一致的圆圈。

只需一行，您显然可以轻松适应。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-15T06:51:23.337

为什么不将不透明度设置为 0.1 之类的？注意：这仅在您为某物设置边框时才有效，如果它后面没有任何东西，它将不起作用。

# java - Java 字节码检测的替代方案

> ID：11638884
> 
> 赞同：6
> 
> 时间：2012-07-24T20:35:19.920
> 
> 标签：java, instrumentation

我正在启动一个项目，该项目必须为覆盖目的（变量的定义使用等）检测 java 应用程序。它必须向应用程序添加跟踪语句和一些逻辑，并可能删除语句。

我一直在寻找检测 Java 代码的方法，而我总是找到关于字节码检测的方法。

**我的问题是：这是检测 Java 应用程序的唯一方法吗？还有其他方法可以做到这一点吗？字节码检测与其他检测相比有哪些优势？**

我可能会使用字节码解决方案，但我想知道其他方法（如果有的话）有什么问题来精确决定。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:47:24.340

另一种接近更改字节码的方法是使用 AOP（面向方面​​编程）。主库是[AspectJ](http://www.eclipse.org/aspectj/ "方面j")，它也主要定义了该区域。

第三个可能有趣的选项（因为您刚刚开始使用该程序）是使用[Spring](http://www.springsource.org/ "春天")。这意味着您将必须了解一些有关 IOC（控制反转）的知识，但这基本上意味着您不必自己创建对象，而是让 spring 为您完成它，它有它的优势，因为当 spring 负责创建时，它可以在创建过程中添加各种东西，而无需您自己在 aspectj 中真正声明它。

就复杂性而言，我可能会评价它：

*   春天（最简单）
*   方面j
*   字节码检测（最难）

但在谈论能力（权力）时，情况恰恰相反。例如，只有使用最后一个（我认为）才能执行减法代码之类的操作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T20:41:14.297

你绝对应该看看[AspectJ](http://www.eclipse.org/aspectj/)

根据您的描述，您将能够用它做您想做的事情。

自己进行字节码检测是绝对可能的，但要复杂得多。

我认为您应该首先检查 AsepctJ，然后作为最后的手段自己回去进行字节码检测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:48:34.480

请参阅我[关于使用程序转换引擎构建覆盖工具的论文。](http://www.semdesigns.com/Company/Publications/TestCoverage.pdf) 这种方法的优点是它可以用于任意编程语言。此外，它以程序员的方式查看源代码，而不是编译后的字节码（随着泛型变得更加复杂，并且被磨成更精细的字节码，通过检查字节码来理解源代码变得更加困难）。

可能值得注意的是，程序转换概括了面向方面的编程。

# php - PHP根据特定元素的值组合数组

> ID：11638885
> 
> 赞同：0
> 
> 时间：2012-07-24T20:35:26.497
> 
> 标签：php, arrays

我有一个看起来像这样的数组

```
Array ( 

[0] => Array
        (
            [id] => 123
            [count] => 1
        )

    [1] => Array
        (
            [id] => 123
            [count] => 3
        )

    [2] => Array
        (
            [id] => 513
            [count] => 0
        )
    [3] => Array
        (
             [id] => 561
             [count] => 1
         )
     [4] => Array
         (
              [id] => 613
              [count] => 7
         )

) 
```

我想要做的是创建一个新数组，它总计 id 值相同的计数。例如，新数组如下所示：

```
Array ( 

[0] => Array
        (
            [id] => 123
            [count] => 4
        )

    [1] => Array
        (
            [id] => 513
            [count] => 0
        )
    [2] => Array
        (
             [id] => 561
             [count] => 1
         )
     [3] => Array
         (
              [id] => 613
              [count] => 7
         )

) 
```

有人知道这样做的好方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:51:44.857

简短而简单：

```
$new_array = array();

foreach($data_array as $value) {
    if(array_key_exists($value['id'], $new_array)) {
        $new_array[$value['id']] += $value['count'];
    } else {
        $new_array[$value['id']] = $value['count'];
    }
}

echo print_r($new_array,true); 
```

我做到了，因为当它可以用作数组的键`id => value`时，似乎不需要另一个数组来存储数据。`id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:45:11.410

您不制作关联数组的任何原因`id => count`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:45:59.753

您可以使用以下功能来做到这一点（我没有测试代码，但它应该可以工作）：

```
function get_count_array($arr) {
    $new_array = array(); 

    foreach($arr as $item) {
        $found = false;

        //loop through all the current new items to check if we already have it
        for($i = 0; $i < count($new_array); $i++) {
            //do we have it?
            if($new_array[$i]['id'] == $item['id']) { 
                $new_array[$i]['count'] += 1;
                $found = true;

                break;
            }
        }

        if(!$found) {
            $new_array[] = array('id' => $item['id'], 'count' => 0);
        }
    }

    return $new_array;
} 
```

# java - UrlRewriteFilter outbound 将主机/子域添加到静态资源路径

> ID：11638888
> 
> 赞同：1
> 
> 时间：2012-07-24T20:35:35.883
> 
> 标签：java, url-rewriting, servlet-filters, tuckey-urlrewrite-filter

我需要一个过滤器来将子域路径添加到来自 java 应用程序的图像和静态路径。

例如：`/foo/bar/xyz.jpg`将变为`http://img1.foobar.com/foo/bar/xyz.jpg`，其中协议应对应于请求的协议，并且`img1`源自我们已经用于将资源映射到子域的现有代码。

之所以出现这种情况，是因为我们将静态内容放置在我们的 Web 模板中的无 cookie 域上，但有时 HTML 是从我们的 CMS 中提取的，该 CMS 由第三方维护，在 HTML 中只有相对 URL。

我已经查看了[http://tukey.org/urlrewrite/](http://tuckey.org/urlrewrite/)但这对于我们需要的东西来说似乎有点过头了。另外，我看不到您是否可以在出站规则中附加 URL（而不仅仅是发出重定向 - 我不想要重定向，而是出站 HTML 上的替换功能）。我还需要能够`img1`根据我们现有的代码动态生成，我不确定这是否可以使用 UrlRewriteFilter。我也看过这个[http://code.google.com/p/urlrewritefilter/issues/detail?id=106](http://code.google.com/p/urlrewritefilter/issues/detail?id=106)但它尚未实施。

有人在这里有什么建议吗？

# wpf - 是否有一些您可以使用 Expression Blend 做而无法使用常规 WPF 做的事情？

> ID：11638890
> 
> 赞同：2
> 
> 时间：2012-07-24T20:35:49.637
> 
> 标签：wpf, visual-studio-2010, expression-blend

我知道 Blend 确实让事情变得更容易。但是它是否有任何额外的库可以提供更多功能？或者允许通过 Visual Studio 使用常规 WPF 无法完成的事情？

谢谢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T20:49:13.860

像这样的重要库是`Interactivity`可再分发的，否则在使用 Blend 所做的事情时会遇到很多问题。但由于它们只是库，没有什么能阻止你在没有 Blend 的情况下使用它们。Blend 是一个让事情变得更简单的工具，就像 Visual Studio 一样，你不需要编写应用程序。

这些工具的产品总是代码（也可能是二进制文件），所以从这个意义上说，只有 Blend 可以做任何事情，但那是无关紧要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T20:50:01.803

简而言之，不：Blend 没有什么是您自己做不到的。Blend 基本上只是生成 Xaml 标记，如果您愿意，您可以随时在记事本中手动生成（更不用说 Visual Studio）。

但是，Blend 作为 UI 有很多东西更适合创建/编辑——在我看来，最重要的是动画，与 VS 设计器中的手动输入标记相比，Blend 中的时间轴支持非常漂亮（至少在VS2010，我不确定VS2012）。

为了自己的目的（通常是为了让设计人员表现得更好），Blend 将在您的标记中包含几个 Xml 命名空间。如果您是 Xaml 的手动编辑器，那么这些会很烦人 (IMO)，但如果您想使用它们，您肯定仍然可以使用它们*。*

# python - 使用 .csv 文件在 Python 中存储多个数据系列的聪明方法？

> ID：11638892
> 
> 赞同：0
> 
> 时间：2012-07-24T20:35:55.783
> 
> 标签：python, csv

假设我有一些由我的绘图应用程序生成的数据系列，我想将它们存储并随意在 .csv 中调用它们。

每个数据集有四个特征。一个名称、一组 x 值 ( `xvals`)、一组 y 值 ( `yvals`) 和父级。

我目前正在想象一个 .csv 文件，我会在 Excel 中生成那种文件，我在想：

```
name, DataSet1
xvals, 1,2,3,4,5
yvals, 1,4,9,16,25
parent, None
<linebreak>
name, DataSet2
xvals, 1,2,3,4,5
yvals, 21,23,24,25,26
parent, None
<linebreak> 
```

等等。感觉不是很自然，而且实现看起来有点难看。有没有人有什么建议？

在我的应用程序中，每个 DataSeries 实例已经包含了我需要的所有数据。如果我实际上可以保存实例对象本身（或它们的集合），那么在此期间也可以正常工作（尽管我最终希望能够导出数据以在 Excel 中使用）

我想告诉python：

1.  读取文件中的所有行。每次阅读“空白”行时，插入分隔符。将每组线视为一个数据集。

2.  阅读包装中每一行的第一项。这是该行中其余单元格包含的信息类型。获取该引用，并将所有相邻单元格中的数据作为列表放入相应的对象属性中。

我有办法做到这一点，但它涉及到很多尴尬的对角色和位置的具体调用，这让我想起了“GOTO”语句。我想要一些更有机和 Pythonic 的东西。

目前的做法：

```
class DataSet(object):
    def __init__(self, name, xvals, yvals, parent=None):
        self.name = name
        self.xvals = xvals
        self.yvals = yvals
        self.parent = parent

loaded_data = csv.reader(open('csv_data.csv', 'r'), delimiter=',')

container = []
dict = {}
for row in loaded_data:
    if list(row)[0] == '':
        container.append(dict)
        dict = {}
    else:
        dict[list(row)[0]] = filter(None,list(row)[1:])
container.append(dict) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:42:18.847

将数据集和父级设置为列，因此您的数据如下所示：

```
"Dataset","Parent","XVal","YVal"
DataSet1,None,1,1
DataSet1,None,2,4
...
DataSet2,None,1,21
DataSet2,None,2,23 
```

通常，要将数据转换为表格格式（如 CSV），您需要将其重组为行。如果您的信息不是与一行相关，而是与某组行相关联（例如，“数据集名称”），您应该重铸这是一个其值在相关行中重复的列。当您读入数据时，您可以轻松地过滤此列以获取相关组。

顺便说一句，您可能想查看[pandas](http://pandas.pydata.org/)，这是一个库，它提供了处理表格数据的有用工具（包括读取和写入 CSV 以及按照我描述的方式对列值进行分组）。

编辑：根据您的评论，您似乎没有询问如何使用 CSV 来存储您的数据。您在问如何解析您的临时格式。答案是“自己编写解析器”；你可以看看[pyparsing](http://pyparsing.wikispaces.com/)。CSV 库不会为您解析它，因为您的格式不是真正的 CSV。电子表格不适用于您的格式，因为它不是表格的。如果您想使用预制工具来处理您的数据，您需要更改您的数据以使用预先存在的格式。从长远来看，这将导致更容易处理，并且将数据更改为正确的格式并不困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:54:33.350

您可以使用 json，而不是使用 csv。该`json`模块适用于[序列化](http://en.wikipedia.org/wiki/Serialization)非表格数据。因此，如果您有一个数据集列表，如下所示：

```
data_sets = [{"name": "DataSet1", "xvals": [1,2,3,4,5], 
              "yvals": [1,4,9,16,25], "parent": None},
             {"name": "DataSet2", "xvals": [1,2,3,4,5], 
              "yvals": [21,23,24,25,26], "parent": None}] 
```

您应该可以轻松地使用 json 将该数据导出和导入到文件中。

```
import json

# export to a file
with open("path/to/file.json", "wb") as f:
    f.write(json.dumps(data_sets))

# import from a file
with open("path/to/file.json", "rb") as f:
    loaded_data = json.loads(f.read())

print loaded_data 
```

这不会帮助您将数据加载到 excel 中，但它提供了一种方便的方式将简单的 python 数据结构转储到文件中以供以后使用。

但请注意，当从 json 文件加载时，您最终会得到 unicode 对象而不是 python 的基本`str`对象，这在 python 2 中可能看起来有点奇怪。例如，在您执行了上面的行之后，请注意`u`之前每个键：

```
>>> print loaded_data[0]
{u'xvals': [1, 2, 3, 4, 5], u'yvals': [1, 4, 9, 16, 25], 
u'name': u'DataSet1', u'parent': None} 
```

这只是意味着键现在是 unicode 字符串。这不是一件坏事，并且仍然可以与普通`str`对象进行比较：

```
>>> 'xvals' == u'xvals'
True
>>> print loaded_data[0]['xvals']
[1, 2, 3, 4, 5] 
```

# c++ - solvePnPRansac 如何与双值一起使用？

> ID：11638893
> 
> 赞同：1
> 
> 时间：2012-07-24T20:35:56.933
> 
> 标签：c++, opencv

我正在尝试使用 OpenCV[`solvePnPRansac()`](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#solvepnpransac)从对象的已知 2D 投影中计算 3D 姿势。我的值（相机内在参数、模型点（3D）、图像点（2D））都是双精度值。正常人`solvePnP()`不会抱怨这一点。

但是，当我尝试使用 solvePnPRansac 时，会产生一条错误消息：

> 断言失败 <opoints.depth() == CV_32F >

如何将此函数与双值一起使用？（使用浮点数不会产生预期的结果）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:09:21.663

今天我测试了 SolvePnPRAnsac，对于 ITERATIVE 和 P3P，结果似乎是相同的，但是当我使用这些结果渲染我的对象时，重新渲染的图像与当前帧有很大不同。在 EPnP 选项的情况下，平移向量与迭代和 P3P 结果非常相似，但旋转与其他两个选项非常不同。然而，我从 Epnp 结果得到的渲染图像非常好，似乎 P3P 和 ITERATIVE 在实现算法时存在一些问题。

# php - 从序列化 cookie 中获取关联数组

> ID：11638896
> 
> 赞同：0
> 
> 时间：2012-07-24T20:36:11.473
> 
> 标签：php

阵列内部的细节中的任何细节都不会危及安全性，并且将使用该网站的人将使用最新的网络浏览器，以防你正在考虑就这个问题与我讨论安全性。

我尝试了多种方法来收集使用标准序列化函数序列化的数组，这就是我使用的：

```
 $mooring = serialize($mooring);
        setcookie("mooringdata", $mooring, time()+3600); 
```

我检查了我的 cookie 管理器，它似乎成功地存储了我需要的详细信息，但看起来它已经过 url 编码。我已经尝试了多种从存储的 cookie 中获取原始数组的方法，但它*永远不会*起作用，即使我的代码说它应该！

我已经尝试了以下这些代码块，用换行符分隔以表示另一次尝试：

```
$data = unserialize(urldecode($_COOKIE['mooringdata'])));
print_r($data); 
```

这将返回空白。

```
$data = array(unserialize(urldecode($_COOKIE['mooringdata']))));
print_r($data); 
```

这将返回 "Array ( [0] => )" 并且列表还在继续，如果有另一种方法可以在不使用 GET 或 POST 的情况下将数组从页面传递到页面，我会全力以赴，但如果你认为你有解决方案， 请回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:40:18.323

对于初学者来说，它会在放入之前自动解码 cookie `$_COOKIE`，所以理论上`unserialize($_COOKIE['mooringdata'])`应该可以工作。但是您可能应该使用`$_SESSION`来存储这些数据，这样浏览器就不必无缘无故地不断地来回发送数据。

# list - 如何在 Prolog 中编写函数 cmp-lst/3？

> ID：11638897
> 
> 赞同：0
> 
> 时间：2012-07-24T20:36:19.903
> 
> 标签：list, comparison, prolog

> **可能重复：**
> [如何在 Prolog 中编写 cmp_list/3 函数？](https://stackoverflow.com/questions/11620781/how-to-write-a-cmp-list-3-function-in-prolog)

提供了两个功能代码：第一个如下：

```
atom_integer(Atom, Int) :- atom_chars(Atom, C), number_chars(Int, C). 
```

第二个如下：

```
integer_list([], []).
integer_list([Lst1|RLst1], [Lst2|RLst2]) :-
            atom_integer(Lst1, Lst2),
            integer_list(RLst1, RLst2). 
```

现在，我需要编写 cmp-list/3 函数来获取以下内容：

```
?- cmp_list([2,3,4], [2,3,5], C).
C = lt ;
C = le .

?- cmp_list([1,2,3,4], [1,1,8], C).
C = gt ;
C = ge . 
```

lt 表示小于；le 表示小于或等于；gt 表示大于；ge 表示大于或等于。

第一列表输入和第二列表输入表示软件的版本号，C表示两个版本的比较。此功能应用于检查哪个版本较新。对于两个空输入列表 []，答案可以是 le 和 ge。

提前致谢！

# wordpress - 将分页添加到页面中的自定义帖子循环

> ID：11638909
> 
> 赞同：6
> 
> 时间：2012-07-24T20:37:12.223
> 
> 标签：wordpress, pagination, custom-post-type

我创建了一个自定义页面模板（testimonials-page.php），并在该模板中使用以下循环加载自定义帖子类型“testimonials”：

```
<?php query_posts(array(
'posts_per_page' => 5,
'post_type' => 'testimonials',
    'orderby' => 'post_date',
    'paged' => $paged
 )
 ); ?>

  <?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?>

    <div id="post-<?php the_ID(); ?>" class="quote">
    <?php echo get_the_post_thumbnail($id, array($image_width,$image_height)); ?>
    <?php the_content(); ?>
    </div>
    <?php endwhile; ?>
    <?php wp_reset_query(); ?> 
```

我该如何添加分页呢？我安装了 WP Paging 插件，当我使用以下方法将分页调用到 category.php 时，该插件工作得很好：

```
<p><?php wp_paging(); ?></p> 
```

将相同的内容插入 testimonial-page.php 会导致格式损坏并链接到我的 404。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-24T21:29:14.200

首先，除非您打算修改默认的 Wordpress 循环，否则永远不要使用 query_posts。

相反，切换到[WP Query](http://codex.wordpress.org/Class_Reference/WP_Query)。

这是我为使用所有内置 Wordpress 功能为客户所做的主题所写的内容。到目前为止，它对我来说工作得很好，所以我会尽我所能将它集成到你的代码中：

```
global $paged;
$curpage = $paged ? $paged : 1;
$args = array(
    'post_type' => 'testimonials',
    'orderby' => 'post_date',
    'posts_per_page' => 5,
    'paged' => $paged
);
$query = new WP_Query($args);
if($query->have_posts()) : while ($query->have_posts()) : $query->the_post();
?>
<div id="post-<?php the_ID(); ?>" class="quote">
<?php
echo get_the_post_thumbnail($post->ID, array($image_width,$image_height));
the_content();
?>
</div>
<?php
endwhile;
    echo '
    <div id="wp_pagination">
        <a class="first page button" href="'.get_pagenum_link(1).'">&laquo;</a>
        <a class="previous page button" href="'.get_pagenum_link(($curpage-1 > 0 ? $curpage-1 : 1)).'">&lsaquo;</a>';
        for($i=1;$i<=$query->max_num_pages;$i++)
            echo '<a class="'.($i == $curpage ? 'active ' : '').'page button" href="'.get_pagenum_link($i).'">'.$i.'</a>';
        echo '
        <a class="next page button" href="'.get_pagenum_link(($curpage+1 <= $query->max_num_pages ? $curpage+1 : $query->max_num_pages)).'">&rsaquo;</a>
        <a class="last page button" href="'.get_pagenum_link($query->max_num_pages).'">&raquo;</a>
    </div>
    ';
    wp_reset_postdata();
endif;
?> 
```

## 2018 年 1 月编辑：

还可以考虑使用[paginate_links](https://codex.wordpress.org/Function_Reference/paginate_links)，因为它也内置于 Wordpress 中，并且具有更强大的选项和功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-09T16:45:28.753

尝试使用分页自定义循环的代码：

```
<?php
if ( get_query_var('paged') ) {
    $paged = get_query_var('paged');
} elseif ( get_query_var('page') ) { // 'page' is used instead of 'paged' on Static Front Page
    $paged = get_query_var('page');
} else {
    $paged = 1;
}

$custom_query_args = array(
    'post_type' => 'post', 
    'posts_per_page' => get_option('posts_per_page'),
    'paged' => $paged,
    'post_status' => 'publish',
    'ignore_sticky_posts' => true,
    //'category_name' => 'custom-cat',
    'order' => 'DESC', // 'ASC'
    'orderby' => 'date' // modified | title | name | ID | rand
);
$custom_query = new WP_Query( $custom_query_args );

if ( $custom_query->have_posts() ) :
    while( $custom_query->have_posts() ) : $custom_query->the_post(); ?>

        <article <?php post_class(); ?>>
            <h3><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h3>
            <small><?php the_time('F jS, Y') ?> by <?php the_author_posts_link() ?></small>
            <div><?php the_excerpt(); ?></div>
        </article>

    <?php
    endwhile;
    ?>

    <?php if ($custom_query->max_num_pages > 1) : // custom pagination  ?>
        <?php
        $orig_query = $wp_query; // fix for pagination to work
        $wp_query = $custom_query;
        ?>
        <nav class="prev-next-posts">
            <div class="prev-posts-link">
                <?php echo get_next_posts_link( 'Older Entries', $custom_query->max_num_pages ); ?>
            </div>
            <div class="next-posts-link">
                <?php echo get_previous_posts_link( 'Newer Entries' ); ?>
            </div>
        </nav>
        <?php
        $wp_query = $orig_query; // fix for pagination to work
        ?>
    <?php endif; ?>

<?php
    wp_reset_postdata(); // reset the query 
else:
    echo '<p>'.__('Sorry, no posts matched your criteria.').'</p>';
endif;
?> 
```

资源：

*   [带分页的 WordPress 自定义循环](http://web-profile.com.ua/wordpress/themes/wordpress-custom-loop/)

# iphone - 如何设置多个文件播放器音频单元同时启动？

> ID：11638911
> 
> 赞同：1
> 
> 时间：2012-07-24T20:37:17.350
> 
> 标签：iphone, ios, audio, core-audio, audiounit

现在我有一个循环遍历文件播放器音频单元的数组，并告诉他们在音频文件中的哪个位置开始播放。（这有效）在同一个循环中，我有以下代码来告诉单元何时开始播放（-1 使它们在下一个渲染周期中播放）。问题是它们没有同时开始，因为在我有机会告诉第三首曲目播放之前，第一首曲目开始播放。我想说的是“曲目一，你正好播放 5 个周期，曲目 2 你正好播放 4 个周期，曲目 3 你正好播放 3 个周期……等等。这样他们同时播放。这是正确的方法？如果是这样，你为 startTime.mSampleTime 设置了什么值？我还没有找到任何文档告诉我如何做到这一点。谢谢

```
 // tell the file player AU when to start playing (-1 sample time means next render cycle)
    AudioTimeStamp startTime;
    memset (&startTime, 0, sizeof(startTime));
    startTime.mFlags = kAudioTimeStampSampleTimeValid;
    startTime.mSampleTime = -1;
    AudioUnitSetProperty(fileUnitArray[mycount], kAudioUnitProperty_ScheduleStartTimeStamp, kAudioUnitScope_Global, 0, &startTime, sizeof(startTime)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:22:16.980

我无法找到有关将 mSampleTime 设置为任何其他值然后 -1（即从下一个周期开始）的任何信息，但我能够解决该问题。我没有保持 AUGraph 运行，而是使用 AudioUnitReset 重置文件播放器音频单元，然后使用上面的代码重新启动文件播放器，我存储当前文件播放器播放头位置，完全停止 AUGraph，用当前的重新初始化 AUGraph播放头位置，而不是告诉它从零位置开始，然后重新启动 AUGRAPH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T11:28:21.337

您需要做的是安排从渲染线程播放音频文件。您在不同的线程上加载文件，但您告诉文件在渲染线程的下一个渲染周期中播放。这样，您的所有文件都将同时启动。

# sql-server-2008 - SSIS 数据源中的源表结构更改

> ID：11638913
> 
> 赞同：0
> 
> 时间：2012-07-24T20:37:22.530
> 
> 标签：sql-server-2008, ssis, visual-foxpro

我正在使用 SSIS 将 FoxPro 表导入 SQL Server 2008。源数据是我无法控制的专有数据库。让我们调用我正在导入客户的表。

有时，客户的结构如下所示：

**编号（整数）**

**名称（字符（30））**

**地址 (char(30))**

**城市 (char(20))**

**状态（字符（2））**

**邮编（字符（10））**

**CCNUM（字符（16））**

其他时候，它看起来像这样：

**编号（整数）**

**名称（字符（30））**

**地址 (char(30))**

**城市 (char(20))**

**状态（字符（2））**

**邮编（字符（10））**

**CCPTR (char(100))**

这个专有数据库基本上有 2 个不同版本的数据库。旧版本有一个名为 CCNUM（信用卡号）的字段，它是一个基本的 16 个字符字段。较新的版本用一个名为 CCPTR 的字段替换了该字段，该字段是一个 100 个字符的字段，表示一个卡指针（实际信用卡号的加密值）。

这里的问题是每次我必须在具有这些不同表结构的 2 个数据集之间来回切换时，SSIS 就会崩溃，我必须进入并手动刷新元数据。

我的问题是，无论如何我可以让 SSIS 在运行时动态查找这些字段之一，并根据其中一个字段，将正确的数据加载到 SQL 中正确的表结构中吗？

如果以前有人问过这个问题，请原谅我。我对 SSIS 还是很陌生，我尝试搜索这个答案但无济于事。

谢谢，

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:44:09.577

如果您根据长度 (100) 构建包并在 (16) 上调整它，您应该只会收到警告。你有错误吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:42:06.580

最简洁的答案是不。SSIS 预计其源和目标组件的元数据不会发生重大变化。有一些方法可以通过 .NET 以编程方式影响这一点，但这种方式没有抓住重点。

此问题的一个设计良好的解决方案是创建 2 个单独的数据流，将数据复制到共享暂存表中。使用此临时表作为源来转换您的数据并将其推送到其最终数据结构。

# iphone - 方向问题 - ipad

> ID：11638917
> 
> 赞同：0
> 
> 时间：2012-07-24T20:37:35.587
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我的应用程序有几个 uiViews 并设置为支持两个方向。因为我的 uiViews 框架只是 iPad 整个尺寸的一部分，所以我试图根据 iPad 的保持方式来使我的 uiviews 框架居中。它是在 view controller.m 文件中以这种方式完成的：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    UIInterfaceOrientation des=self.interfaceOrientation;

    if(UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad) //iPad
    {
        CGRect ScreenBounds  = [[UIScreen mainScreen] bounds];

        if(des==UIInterfaceOrientationPortrait||des==UIInterfaceOrientationPortraitUpsideDown)//ipad-portrait
        {

            ipStPosX=(ScreenBounds.size.width -360)/2;
            ipStPosY=100; 
            return YES;
        }
        else//ipad -landscape
        {
            ipStPosX=(ScreenBounds.size.height -360)/2;
            ipStPosY=100; 
            return YES;
        }
    }
    else//iphone
    {
        UIInterfaceOrientation des=self.interfaceOrientation;

        if(des==UIInterfaceOrientationPortrait||des==UIInterfaceOrientationPortraitUpsideDown) //iphone portrait
        {
            return NO;
        }
        else //iphone -landscape
        {
            return YES;
        }
    }
} 
```

启动应用程序并更改方向后，无论我如何握住设备，它都会转到纵向部分 UIInterfaceOrientationPortrait。

我看到一些旧帖子并不真正适合这个问题并且令人困惑或过时，所以这里的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:43:31.020

`shouldAutorotateToInterfaceOrientation:`是为了简单地告诉 iOS 你支持特定的方向。既然你想要除了 iPhone 风景之外的所有东西，你应该返回

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)orientation {
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) //iPad
        return YES;
    return UIInterfaceOrientationIsPortrait(orientation);
} 
```

实际调整您显示的内容，您想要使用`willRotateToInterfaceOrientation:duration:`或`didRotateFromInterfaceOrientation:`实际更改项目。在您的情况下，鉴于您只是根据您所处的方向调整一些 iVar，我认为您将使用后者。

```
- (void)didRotateToInterfaceOrientation:(UIInterfaceOrientation)fromOrientation
    UIInterfaceOrientation des = self.interfaceOrientation;
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) //iPad
    {
        CGRect ScreenBounds  = [[UIScreen mainScreen] bounds];

        if (UIInterfaceOrientationIsPortrait(des))//ipad-portrait
        {
            ipStPosX=(ScreenBounds.size.width -360)/2;
            ipStPosY=100; 
        }
        else //ipad -landscape
        {
            ipStPosX=(ScreenBounds.size.height -360)/2;
            ipStPosY=100; 
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:38:30.247

我认为这里有两个问题：

1.  启用轮换 - 这可以通过实施以下方法来完成。您应该在此方法中放置一个断点以确保它被调用并且您返回 YES。请注意，只有那些被推送到导航栏或标签栏或者是窗口一部分的视图才会调用此方法。对于已使用 addSubView 方法添加到其他视图的视图，不会调用此方法。

    *   (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)方向；
2.  实现上述方法而不实现任何其他方法将旋转您的视图。如果没有，您需要调查我上面概述的要点。一旦您的视图开始旋转，您就需要使用自动调整大小的蒙版来实现您的计划。使用自动调整大小的蒙版应该可以轻松实现视图居中。如果使用 XIB，您可以在 xcode 中查看调整大小的行为。

# hibernate - Grails 休眠事件在集成测试期间不会触发

> ID：11638925
> 
> 赞同：0
> 
> 时间：2012-07-24T20:38:19.620
> 
> 标签：hibernate, grails, integration-testing, grails-orm

在 grails 运行应用程序休眠期间，事件会定期触发而不会出现问题。但是，在每个集成测试用例中，这些相同的事件不会触发。以下是将我的代码精简为最简单形式的精髓。甚至在集成测试期间使用休眠？是否有不同的测试方法可以应用？欢迎提出建议或意见。

集成测试

```
 @Mock ([User])
    class SomeIntegrationTests  {
         @Test
         void testSomething () {
               new User().save(flush: true)
         }

   } 
```

控制器

```
 class Controller implements SaveOrUpdateEventListener {
        public void onSaveOrUpdate(SaveOrUpdateEvent event) throws HibernateException {
            print 'event fired'
        }
    } 
```

资源.groovy

```
 beans = { service(MyService)

        hibernateEventListeners(HibernateEventListeners) {
           listenerMap=['save-update' : service, 'delete' : service]
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:58:26.300

您正在嘲笑您的`User`域类。模拟域类时，不使用休眠。如果你删除`@Mock([User])`了真正的域对象将被使用，包括hibernate。

# javascript - iframe 中的 Google+ 共享

> ID：11638931
> 
> 赞同：0
> 
> 时间：2012-07-24T20:39:14.637
> 
> 标签：javascript, html, css, iframe, google-plus

我正在为 PC/平板电脑/手机开发一个网络应用程序，我想将 Google+ 共享集成到它上面。

但似乎 url [https://plus.google.com/share?url=http%3a%2f%2fstackoverflow.com](https://plus.google.com/share?url=http%3a%2f%2fstackoverflow.com)阻止了 iframe...

证明它不起作用：http: [//jsfiddle.net/6ML4d/](http://jsfiddle.net/6ML4d/)

没有其他方法可以做到这一点吗？

PS 我的应用程序的服务器端是 ASP.NET MVC，客户端是 jQuery Mobile。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:45:30.773

你可以看看这个 chrome 扩展： [https](https://chrome.google.com/webstore/detail/pfphgaimeghgekhncbkfblhdhfaiaipf) ://chrome.google.com/webstore/detail/pfphgaimeghgekhncbkfblhdhfaiaipf 它允许你查看你的 google+ 通知。开发人员以某种方式可以在[https://plus.google.com](https://plus.google.com)上嵌入通常不可能的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:47:51.677

> 拒绝显示文档，因为 X-Frame-Options 禁止显示。

[有关假定的解决方案，请参见此处](https://stackoverflow.com/q/6666423/561731)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T00:17:27.090

我发现谷歌服务器上有一些页面允许 iframe，但它们并不完整。（例如，如果用户没有登录，我们又遇到了另一个问题）

所以，最好的选择是**不使用 iframe！**

# excel - Excel VBA SendKeys 不会导致 IE 9 保存下载

> ID：11638933
> 
> 赞同：5
> 
> 时间：2012-07-24T20:39:22.367
> 
> 标签：excel, vba, automation, browser-automation, office-automation

我正在编写一个宏来从我公司的内部网站下载一个 csv 文件。

由于许多原因，我不能使用任何 xmlhttp 对象。宏将下载文件。问题是 Internet Explorer 9 使用打开、保存和取消按钮提示用户。

在 IE 中，Alt+Shift+S 将保存下载，但我无法从 Excel VBA 中获取 Sendkeys "%+s" 方法。

以下是相关代码：

```
Function followLinkByText(thetext As String) As Boolean
   'clicks the first link that has the specified text
    Dim alink As Variant

    'Loops through every anchor in HTML document until specified text is found
    ' then clicks the link
    For Each alink In ie.document.Links
       If alink.innerHTML = thetext Then
            alink.Click
            'waitForLoad
            Application.Wait Now + TimeValue("00:00:01")
            Application.SendKeys "%+s", True

            followLinkByText = True
            Exit Function
        End If
     Next

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T23:37:08.450

就像我在评论中提到的那样，信息安全栏使与文件下载窗口的交互变得困难。

另一种方法是使用 webbrowser 控件，然后将 URL 传递给它。但是这种方法的主要问题是您不能在同一个 Excel 实例中拥有网络浏览器。一旦文件下载窗口弹出，您的整个 VBA 宏将停止，直到您不将其处理掉。

这是一个替代方案。这是我在 VB6 中创建的一个小 exe，它将绕过 IE 信息安全栏弹出文件下载窗口。一旦弹出“文件下载”窗口，您就可以使用我的[博客](http://www.siddharthrout.com/2012/02/02/vbavb-netvb6click-opensavecancel-button-on-ie-download-window-part-ii/)文章中所示的 API 与之交互。

让我们举个例子来看看我们如何与这个 vb6 exe 文件进行交互。

在 Excel 中创建一个模块并粘贴此代码。

**重要提示**：由于您没有给我任何 URL，我正在使用静态 URL。请用您的链接替换它。现在，根据您指定的链接，您可能会看到这两个下载窗口之一。根据您看到的下载窗口，您必须根据下图所示找到窗口句柄。有关我提供的博客链接的更多详细信息。

![在此处输入图像描述](../Images/257ac1153ebe6c3887e36b79a4bc4b7a.png)

下载附件并保存在 say 中`C:\`。如果您将其保存在任何其他位置，请在下面的 Shell 语句中对其进行修改。

```
Sub Sample()
    Dim sUrl As String

    sUrl = "http://spreadsheetpage.com/downloads/xl/king-james-bible.xlsm"

    Shell "C:\FDL.exe " & sUrl, vbNormalFocus
End Sub 
```

**快照**

![在此处输入图像描述](../Images/87b49015dffe03e818b8556e80111dbd.png)

**文件**：文件可以在[这里](http://sdrv.ms/LM7Kw0)下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-04T14:42:07.037

你可以试试这个，因为它在 IE 11 上对我有用：

1.  将文件`C:\Windows\System32\UIAutomationCore.dll`文件复制到用户文档，即`C:\Users\admin\Documents`添加`UIAutomationClient`对您的宏文件的引用。
2.  将以下代码粘贴到您的模块中：

    ```
     Option Explicit
        Dim ie As InternetExplorer
        Dim h As LongPtr
        Private Declare PtrSafe Function FindWindowEx Lib "user32" Alias "FindWindowExA" (ByVal hWnd1 As LongPtr, ByVal hWnd2 As LongPtr, ByVal lpsz1 As String, ByVal lpsz2 As String) As LongPtr

    Sub Download()
        Dim o As IUIAutomation
        Dim e As IUIAutomationElement
        Set o = New CUIAutomation
        h = ie.Hwnd
        h = FindWindowEx(h, 0, "Frame Notification Bar", vbNullString)
        If h = 0 Then Exit Sub

        Set e = o.ElementFromHandle(ByVal h)
        Dim iCnd As IUIAutomationCondition
        Set iCnd = o.CreatePropertyCondition(UIA_NamePropertyId, "Save")

        Dim Button As IUIAutomationElement
        Set Button = e.FindFirst(TreeScope_Subtree, iCnd)
        Dim InvokePattern As IUIAutomationInvokePattern
        Set InvokePattern = Button.GetCurrentPattern(UIA_InvokePatternId)
        InvokePattern.Invoke
    End Sub 
    ```

在你的最后尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-16T17:33:17.107

我想我想出了一个更简单的解决方案：当下载栏出现在 IE9 中时，只需通过显示“真正的”下载弹出窗口来绕过它。快捷方式是“CTRL+J”。您接下来要做的就是单击“保存”或“打开”。可能有很多方法可以做到这一点，但我只需发送一个按键序列以将焦点移到所需选项上，然后按 Enter。

这是代码：

```
' Wait for download bar to appear
Application.Wait (Now + TimeValue("0:00:04"))

' Sending CTRL+J to open download pop-up
SendKeys "^j"

' Wait for download popup to appear
Application.Wait (Now + TimeValue("0:00:02"))

' Sending keys sequence to click on "Save" button
SendKeys "{RIGHT}{RIGHT}{RIGHT}~" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-12T22:24:50.663

你`Application.Sendkeys`只需要调整一下。以下是我正在使用的代码，因此在 IE11 上进行了测试。这是IE11 中的键盘快捷键，用于`Alt`+`S`没有。`Shift`如果这不起作用，请告诉我，您需要帮助添加`Shift`回。

`Application.SendKeys "%{S}", True`

# javascript - 使用 WCF REST 模板 4.0，如何通过 AJAX 使用 JSON

> ID：11638934
> 
> 赞同：0
> 
> 时间：2012-07-24T20:39:21.807
> 
> 标签：javascript, ajax, wcf, c#-4.0, rest

使用 WCF REST 模板 4，在减少所需配置量的同时，您不再需要 SVC 文件来托管 REST Web 服务。

以前我可以使用 asp:ScriptManager 创建一个 JavaScript 代理，我可以使用它来使用 AJAX 调用我的 WCF Web 服务，我只需要提供我的 SVC 文件的路径。

现在没有 SVC 文件并且服务工厂在 global.asax 文件中被实例化，我不知道如何通过 JavaScript 调用我的操作合同。

有没有办法解决这个问题，或者关于使用 WCF 4 执行此操作的最佳实践？我是否更好地使用旧的 3.5 模型的 svc 文件等？

编辑：或者是我使用 jQuery $Ajax 调用的最佳选择？

感谢任何人的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:55:57.593

你是对的。您最好的选择是使用 jQuery`$.ajax()`调用。

如果您碰巧集成测试您的服务，您可以尝试自行托管它并使用`ChannelFactory<T>()`其中 T 是您的合同类型创建代理。

例如：
var address = new EndpointAddress(@"http://localhost:8080/YourWebService/Section/");
var factory = new ChannelFactory(new WebHttpBinding(), address); // 在这里使用你想要的绑定
factory.Endpoint.Behaviors.Add(new WebHttpBehavior()); // 在此处添加您想要的行为
var wcfProxy = factory.CreateChannel();

# asp.net-mvc - 有趣的 Asp .net mvc 示例

> ID：11638940
> 
> 赞同：1
> 
> 时间：2012-07-24T20:39:45.703
> 
> 标签：asp.net-mvc

我正在尝试下面解释的基本 asp .net mvc 项目配置；

在第一次提交之前，结果在照片中是预期的，在提交后 textbox( `@Html.TextBoxFor(model => model.Name)`) 和 text( `@Model.Name`) 显示不同的值，如在照片中看到的，出乎意料；为什么会这样？尽管它们的模型是独一无二的，但它们显示出不同的值。

![在此处输入图像描述](../Images/598ef33f6ba986a8d9af656e8aa7863a.png)

**模型：**

```
 public class Personnel
{
    public string Name { get; set; }
} 
```

**看法：**

```
@model deneme.Models.Personnel

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

@using (Html.BeginForm("Index", "Home"))
{
    @Html.TextBoxFor(model => model.Name)

    <br/>
    <br/>

    @Model.Name

    <br/>
    <br/>

    <input type="submit" value="submit" />
} 
```

**控制器：**

```
public ActionResult Index(Personnel personnel)
{
     if (string.IsNullOrEmpty(personnel.Name))
     {
         personnel.Name = "Ahmet";
     }
     else
     {
         personnel.Name = personnel.Name + "server";
     }

     return View(personnel);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T00:03:31.033

**编辑：**我之前的回答没有回答你的问题。

如果您添加`ModelState.Clear()`到控制器操作，它将按您的意愿工作。

```
public ActionResult Index(Personnel personnel)
{
     if (string.IsNullOrEmpty(personnel.Name))
     {
         personnel.Name = "Ahmet";
     }
     else
     {
         personnel.Name = personnel.Name + "server";
     }

     ModelState.Clear();
     return View(personnel);
} 
```

# android - 在 Android 中还有什么被认为是繁重的任务？

> ID：11638943
> 
> 赞同：1
> 
> 时间：2012-07-24T20:40:00.773
> 
> 标签：android, multithreading, user-interface, background-process

Android 中的繁重任务应该在后台线程中执行。繁重的任务是：

*   数据库任务
*   处理图像、音频、视频
*   获取和解析互联网数据
*   一些广泛的计算（在大多数应用程序中非常罕见）

还有什么可以被认为是一项繁重的任务，应该在后台线程中执行？

我收到 ANR 错误，我需要知道 Android 将哪些任务解释为繁重的任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:44:16.103

系统不会抛出 ANR，因为它注意到您正在做一些它归类为“重”的事情；它会产生 ANR，因为用户界面没有响应。使用调试语句（即 Log.d()），您需要跟踪应用程序的进度，并在收到错误时弄清楚它在做什么（或试图做什么）。例如，UI 线程上的无限循环会产生 ANR，但（可证明）没有办法将任意循环归类为无限循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T20:47:12.130

> 还有什么可以被认为是一项繁重的任务，应该在后台线程中执行？

如果花费的时间超过几毫秒，则应在后台线程中执行。

感谢 Android 4.1 中的 Project Butter，Android UI 现在以 60fps 的速度更新，这意味着有大约 16 毫秒的时间来完成渲染帧所需的一切。操作系统需要一些时间来进行实际渲染。如果您花费的时间超过几毫秒，您可能会跳过一帧，从而导致“janky”行为。即使在早期版本的 Android 上，也可以看到效果——在 Jelly Bean 上只会更加刺耳，因为其他一切都更加流畅。

# android - 如何使用进度条？

> ID：11638948
> 
> 赞同：2
> 
> 时间：2012-07-24T20:40:08.357
> 
> 标签：android, android-progressbar

我有一个搜索功能（使用 Web 服务），它需要一段时间才能将数据加载到我的膨胀布局中。我想显示`ProgressBar`直到从 Web 服务中获取数据。这是一个很小的时间间隔，因此我不为此使用 a `ProgressDialog`。我浏览了许多帖子和*开发*指南，但我无法找到在我的应用程序中使用它的方法。我的`Spinner`布局中有一个。一旦我从微调器下拉列表中选择了一个项目，我就会将字符串传递给搜索函数，该函数会获取数据并将数据加载到膨胀的布局中。

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        Selection = spinner.getSelectedItem().toString();           

        search(Selection);
    } 
```

*我按照开发*指南中的说明创建了一个 ProgressBar 处理程序。

```
private ProgressBar mProgress =  new ProgressBar(SearchActivity.this, null, android.R.attr.progressBarStyleSmall);
private int mProgressStatus = 0;

private Handler mHandler = new Handler(); 
```

并说这是一个用于显示的新线程`ProgressBar`

```
new Thread(new Runnable() {
         public void run() {
             while (mProgressStatus < 100) {
                 mProgressStatus = doWork();

                 // Update the progress bar
                 mHandler.post(new Runnable() {
                     public void run() {
                         mProgress.setProgress(mProgressStatus);
                     }
                 });
             }
         }
     }).start(); 
```

如何跟踪我的搜索功能的进度以显示`ProgressBar`？

感谢您阅读

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:44:01.267

您应该使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)而不是线程。一个 asyncTask 让你有一个运行在 UI 线程上的 , 和一个`preexecute`在`postexecute`后台运行的。[google](https://www.google.fr/webhp?sourceid=chrome-instant&ie=UTF-8#hl=fr&safe=off&output=search&sclient=psy-ab&q=tuto%20async%20task%20progress%20bar%20download&oq=&gs_l=&pbx=1&fp=ce3444e3f77efdd7&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&biw=1276&bih=683)上有很多 tuts 。`publishprogress``doInBackground`

试试[这个](http://www.androidhive.info/2012/04/android-downloading-file-by-showing-progress-bar/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:44:27.753

使用 an[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)而不是线程。它更易于使用，并提供了一种内置机制来通知进度更新。

查看此问题以获取完整示例：

[使用 Android 下载文件，并在 ProgressDialog 中显示进度](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog)

# ruby-on-rails - Railscast 登录 记住我

> ID：11638953
> 
> 赞同：1
> 
> 时间：2012-07-24T20:40:25.680
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我遵循了修改后的 railcast，然后决定使用记忆功能升级我的代码。几乎可以工作，但是进入登录页面时出现以下错误

```
Couldn't find Customer with auth_token = 
Note I change the table from User to Customer 
```

这是我的代码，也许我犯了一个小错误。我对数据库进行了重置

客户控制器

```
class CustomersController < ApplicationController
  def new
    @customer = Customer.new
  end

  def create
    @customer = Customer.new(params[:customer])
    if @customer.save
    session[:customer_id] = @customer.id
        redirect_to root_url, notice: "Thank you for signing up!"
    else
      render "new"
    end
  end

end 
```

会话控制器

```
class SessionsController < ApplicationController
  def new
  end
  def create
    customer = Customer.find_by_email(params[:email])
      if customer && customer.authenticate(params[:password])
      if params[:remember_me]
         cookies.permanent[:auth_token] = customer.auth_token
      else
        cookies[:auth_token] = customer.auth_token
      end
        redirect_to root_url, :notice => "Logged in!"
    else
      flash.now.alert = "Invalid email or password"
      render "new"
    end
  end

  def destroy
    cookies.delete(:auth_token)
    redirect_to root_url, :notice => "Logged out!"
  end
end 
```

路由.rb

```
 get 'signup', to: 'customers#new', as: 'signup'
  get 'login', to: 'sessions#new', as: 'login'
  get 'logout', to: 'sessions#destroy', as: 'logout'
  resources :sessions
  resources :customers    
  root :to => 'sessions#new' 
```

应用控制器

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  private

    def authorize
        redirect_to login_url, alert: "Not authorized" if current_customer.nil?
    end

    def current_customer
      @current_customer ||= Customer.find_by_auth_token!(cookies[:auth_token]) if cookies[:auth_token]
    end
    helper_method :current_customer
end 
```

感谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T01:45:51.900

我的错误出现在以下代码中

```
def current_customer
      @current_customer ||= Customer.find_by_auth_token!(cookies[:auth_token]) if cookies[:auth_token]
    end 
```

并通过以下方式修复它

```
def current_customer
      @current_customer ||= Customer.find_by_auth_token(cookies[:auth_token]) if cookies[:auth_token]
    end 
```

# c# - 在 Response.Redirect 的正文中删除 Object Moved HTML

> ID：11638958
> 
> 赞同：4
> 
> 时间：2012-07-24T20:40:55.310
> 
> 标签：c#, asp.net, .net, asp.net-mvc

我的代码中有一个简单的重定向：

```
public ActionResult Redirect()
{
    return Redirect("http://url.com");
} 
```

我注意到响应在响应正文中包含以下 html：

```
HTTP/1.1 302 Found
Cache-Control: private
Content-Type: text/html; charset=utf-8
Location: http://url.com
Server: Microsoft-IIS/7.0
Date: Tue, 24 Jul 2012 18:53:52 GMT
Content-Length: 198

<html><head><title>Object moved</title></head><body>
<h2>Object moved to <a href="http://url.com">here</a>.</h2>
</body></html> 
```

有没有办法从响应正文中删除 html？我希望 Content-Length 为零，因为响应正文中没有任何内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T20:48:06.393

你可以通过实现你自己的`ActionResult`而不是使用内置的来做到这一点`RedirectResult`，它将发送该 HTML。

但是，您不应该需要 - 用户永远不会看到该标记，但它主要是为遗留问题提供的。另请注意，某些浏览器可以设置为不遵循重定向 - 没有正文会导致结果非常无用。

如果你仍然想要一个没有正文的重定向，这个结果类会这样做：

```
public sealed class RedirectResultNoBody : ActionResult
{
    private readonly string location;
    public RedirectResultNoBody(string location) 
    {
        this.location = location;
    }
    public override void ExecuteResult(ControllerContext context) 
    {
        var response = context.HttpContext.Response;
        response.StatusCode = 302;
        response.RedirectLocation = location;
        response.End();
    }
} 
```

然后将像这样使用它：

```
public ActionResult Redirect()
{
    return new RedirectResultNoBody("http://url.com");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:43:39.033

如果一切正常，用户将无法看到此屏幕。仅当服务器非常繁忙或客户端计算机资源严重不足时，才能看到这一点。

此外，如果重定向失败，用户可以点击页面。所以我建议不要改变它。

如果您坚持要更改它，我相信为错误 302 提供模板应该可以解决问题，这可以在 ASP.NET 或 IIS 中完成。

# xcode - OSX 上 Apple Sandbox 的代码签名助手应用程序

> ID：11638962
> 
> 赞同：10
> 
> 时间：2012-07-24T20:41:06.733
> 
> 标签：xcode, macos, sandbox, helper, sign

我有一个需要在启动时运行的应用程序，并且我正在转换为沙盒。

我创建了一个帮助应用程序，并且当我不对我的应用程序进行代码签名时工作正常。

要进行协同设计，看起来我必须创建配置文件——一个用于帮助程序，一个用于实际应用程序。

由于这些不匹配，我无法同时匹配，并且无法让帮助应用程序启动主应用程序。

我试图重新签署助手：

codesign -f -vv -s "第 3 方 Mac 开发者应用程序：" -i "com.mydomain.myhelper" --entitlements myhelper/myhelper.entitlements myhelper.app

并得到错误：目标文件格式无法识别、无效或不合适

我从头开始重新创建了助手，但没有结果。

我怎样才能做这个助手应用程序并让它签名？似乎没有关于此过程的文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T18:13:16.750

我昨天提交应用程序时遇到了同样的问题。我想我终于想通了。这是我所做的：

*   正常存档应用程序
*   右键单击管理器中的存档，然后选择**在 Finder 中显示**
*   右键单击存档并显示内容并一直深入到您的`HELPERAPP embedded.provisionprofile`并删除它。

然后像这样从终端代码设计：

> codesign -f -s "3rd Party mac Developer Application:" -i "com.company.YOUR_MAIN_APP " **--entitlements** **YOUR_MAIN_APP_ENTITLEMENTS_PATH_IN_YOUR_PROJECT_FOLDER** **THE_ARCHIVED_HELPER.app_PATH**

这确实通过了验证，让我上传。我正在等待审核，所以我们将看看这是否有效。

# eclipse - 为什么我的 Eclipse 一直没有响应？

> ID：11638964
> 
> 赞同：51
> 
> 时间：2012-07-24T20:41:17.537
> 
> 标签：eclipse

我正在使用 Eclipse，并且在随机时间，它会冻结并停止响应。这在别人身上发生过吗？它通常发生在我单击一行代码时，无论是 Java 还是 XML。关于如何解决它的任何想法？

系统规格：

![在此处输入图像描述](../Images/acc9e6221bc927d9a9da51e3a7133bb8.png)

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-24T20:55:03.663

打开你的`workspace\.metadata\.log`文件。这通常会告诉你出了什么问题。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-02-10T04:58:18.740

试试这个，它对我有用！

如果您碰巧有时 Eclipse 不再响应，原因可能是您坐在 64 位机器上，而 Eclipse 需要更多内存。确保（至少）在 eclipse.ini 中有以下配置（我什至使用更大的 PermSizes 值）：

```
-Xms512m
-Xmx1024m
-XX:PermSize=64m
-XX:MaxPermSize=128m 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-05-13T07:45:11.570

我刚刚以这种方式重新启动了[adb](http://developer.android.com/tools/help/adb.html)（Android 调试桥）：

1.  adb 杀死服务器
2.  adb 启动服务器

它再次起作用！

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-05-04T20:39:44.740

昨晚凌晨 2 点，我关闭了我的 Eclipse (Juno) 就好了。今天早上我打开它，在我的 64 位 Windows 7 机器上除了“没有响应”之外什么也没有。

我看了看`[workspace]\.metadata\.log`，它显示了一个错误`Invalid property category path: ValidationPropertiesPage`

**我骂得很好，然后告诉它谁是老板：**

1.  删除`[workspace]\.metadata`文件夹
2.  删除`[workspace]\[project]\.settings`
3.  打开 Eclipse 到与以前相同的工作区，重新导入您的项目。

这让我想到了另一个话题……Eclipse -> import -> Android -> Existing Android code into workspace……似乎又被打破了。但这是一个不同的话题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-14T20:28:49.597

您的文件系统很可能与您的 Eclipse 不同步...资源与文件系统不同步。使用SVN？如果您在资源管理器中“刷新”所有项目，速度将恢复正常。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-11-06T08:38:02.013

我最近有类似的症状。原来它是由 Subversion 服务器不可用引起的——一旦重新启动，我就可以右键单击。我的环境是带有 Subclipse 的 Eclipse Luna。

因此值得检查任何连接的源控制系统是否正常运行。希望有帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-02-13T02:21:55.257

对我来说，这是因为所有传出文件，即工作空间与 SVN 不同步，由于“目标”文件夹（maven 项目，或在构建 web 项目时），将它们添加到 svn:ignore。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-27T15:50:17.253

每次尝试打开 Eclipse 时，我都会遇到这个问题。我通过从笔记本电脑上拔下我的 android 设备的 USB 来解决它，并且 eclipse 再次工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-12-19T11:48:20.330

我遇到了像你这样的问题。但我是 Windows 8.1 64 位用户。起初我在我的 8.1 上使用 eclipse Kepler。当我工作时，日食经常变得没有响应。在那之后，我决定回到 eclipse Juno，它现在工作正常。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-12-12T11:19:50.067

如果您之前在外部（在**Workspace**之外）导入了一个项目，则可能会导致此问题。如果您可以访问 Eclipse，请尝试将其删除。如果您收到“**启动时无响应**”，请从源头删除文件。

这将解决问题。

* * *

## 回答 #11

> 赞同：-5
> 
> 时间：2015-05-18T08:55:38.747

这可能会有所帮助

在你的日食中，

1）去帮助

2) 点击 Eclipse 市场

3) 搜索 - 优化器

安装“eclipse优化器”

![在此处输入图像描述](../Images/04d656fd57b37b57fa4c3811ef75a348.png)

# ruby-on-rails - 带有 Backbone.js 和 Handlebars 的 Rails

> ID：11638967
> 
> 赞同：1
> 
> 时间：2012-07-24T20:41:29.230
> 
> 标签：ruby-on-rails, backbone.js, handlebars.js, backbone-views

关于我的应用程序：
- 我将 Rails 3.2.6 与主干.js（backbone-on-rails gem）和车把模板引擎一起使用。
- 创建了路线和视图，效果很好。我的观点：

```
 el: $('#lorem'),
  render: function(){
    var js = this.collection.toJSON();
    var template = Handlebars.compile($("#lorem2").html());
    $(this.el).html(template({articles: js}));
    console.log(js);
    return this;
  } 
```

-我创建了一个模板（在资产目录中：资产/模板/人民/索引.hbs）：

```
<script id="lorem2" type="text/x-handlebars-template">
    {{#each articles}}
       {{this.name}}
     {{/each}}
</script> 
```

当我刷新页面时，我收到以下错误消息：

*未捕获的类型错误：无法调用 null 的方法“匹配”*

我认为模板文件可能是错误的：

```
<script src="/assets/templates/people/index.js?body=1" type="text/javascript"></script> 
```

这包含：

```
 (function() {
            this.HandlebarsTemplates || (this.HandlebarsTemplates = {});
            this.HandlebarsTemplates["people/index"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  helpers = helpers || Handlebars.helpers;
  var buffer = "", stack1, foundHelper, self=this, functionType="function", helperMissing=helpers.helperMissing, undef=void 0, escapeExpression=this.escapeExpression;

  buffer += "<div class=\"entry\">\n  <h1>";
  foundHelper = helpers.title;
  stack1 = foundHelper || depth0.title;
  if(typeof stack1 === functionType) { stack1 = stack1.call(depth0, { hash: {} }); }
  else if(stack1=== undef) { stack1 = helperMissing.call(depth0, "title", { hash: {} }); }
  buffer += escapeExpression(stack1) + "</h1>\n  <div class=\"body\">\n    ";
  foundHelper = helpers.body;
  stack1 = foundHelper || depth0.body;
  if(typeof stack1 === functionType) { stack1 = stack1.call(depth0, { hash: {} }); }
  else if(stack1=== undef) { stack1 = helperMissing.call(depth0, "body", { hash: {} }); }
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n  </div>\n</div>\n";
  return buffer;});
            return HandlebarsTemplates["people/index"];
          }).call(this); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:01:17.277

这种混乱`/assets/templates/people/index.js`表明您的 Handlebars 模板在您的 JavaScript 代码看到它们之前已被编译为 JavaScript。

如果你说`$(x).html()`哪里`x`不匹配，你会得到`null`回报。所以你的 DOM 中可能根本没有`#lorem2`，你只在`HandlebarsTemplates["people/index"]`. 这意味着您的这部分`render`：

```
var template = Handlebars.compile($("#lorem2").html()); 
```

将失败并给您`TypeError`例外。尝试将其替换为：

```
var template = HandlebarsTemplates['people/index']; 
```

# php - XMLReader 显示无效 xml，如何获取无效 xml 的原因？

> ID：11638975
> 
> 赞同：-1
> 
> 时间：2012-07-24T20:42:01.487
> 
> 标签：php, xml, xml-parsing, xmlreader

我从 url 获取 xml 数据，但 XMLReader 说 xml 格式无效。我能得到有关 xml 格式问题的任何线索吗？

我不是 XML 标准方面的专家，但数据似乎与标签无关。

```
$url = "http://xyz";
$xml = file_get_contents($url);
$folderReader = new XMLReader();  
$folderReader->XML($xml);          //returns true

var_dump($folderReader->isValid());  //bool(false)

print_r($folderReader);  //XMLReader Object ( ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:51:35.467

我在 php 网站上找到了这个

“isValid() 始终返回 false，除非您通过以下方式启用有效性检查：$reader->setParserProperty(XMLReader::VALIDATE, true);”

# java - 使用gradle在STS中部署war文件

> ID：11638976
> 
> 赞同：1
> 
> 时间：2012-07-24T20:42:10.493
> 
> 标签：java, deployment, war, gradle, sts-springsourcetoolsuite

我在 STS 中有一个 Web 项目，我希望将其部署在 Tomcat 中。项目的构建文件是用 GRADLE 编写的。使用 GRADLE 的构建脚本，会在 build/libs 中生成一个 war 文件。

但 STS 在 workspace/metadata/plugins/org.eclipse.wst.server.core/ 文件夹中查找 war 文件。

现在，如果我手动将生成的 WAR 文件从 build/libs 复制到此工作区/元数据/插件文件夹，然后启动 tomcat，一切正常，但我无法在 STS 中使用断点进行调试。

如何确保 build/libs 中的 war 文件移动到 workspace/metadata/plugins 文件夹？

而且，为什么 STS 会在工作空间/元数据/插件文件夹中寻找战争。由于应用服务器是 tomcat，它不应该在 Tomcat/webapps 文件夹中查找战争吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:02:41.497

我现在不是 eclipse 的粉丝，但是你运行过 eclipse 插件吗？您可以将其添加到 gradle 文件中

```
apply plugin: 'eclipse' 
```

然后就跑

```
gradle eclipse 
```

检查[Eclipse 插件](http://gradle.org/docs/current/userguide/eclipse_plugin.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:03:41.360

我不相信 STS 直接部署/运行您的战争文件。也就是说，如果您选择项目并说“在服务器上运行”，STS/eclipse 将对定义的 wtp.deploy 目录产生爆炸性的战争。您可以通过编辑服务器的“运行配置”来控制/更改它。只需转到“参数”选项卡并更改“-Dwtp.deploy”的设置。

您真的应该只将此 STS 机制用于开发目的 - 因为它对此非常宝贵。要将实际的 warfile 部署到 Tomcat，您有多种选择。您可以在启用管理器 UI 的情况下启动一个 tomcat 实例并从 Tomcat GUI 上传 war 文件，您可以手动将 war 文件放入 Tomcat 的部署区域，或者可能是您的最佳选择 - 扩展您的 gradle 构建脚本以包括部署生成的war 文件到 tomcat 服务器。希望这会有所帮助。

# ios - 通过 HTTP 将 PDF SDK 流式传输到 iOS

> ID：11638987
> 
> 赞同：2
> 
> 时间：2012-07-24T20:43:00.133
> 
> 标签：ios, http, pdf, sdk

iOS 上是否有任何好的 SDK 不仅可以显示 PDF，而且会在从 Web 源下载时显示它？只要它是商业友好的，使用付费图书馆是完全可以的。

澄清一下，无论我提供流还是其他方式，SDK 都必须能够在下载部分文件时显示它们。我想避免使用 CGPDFScannerRef，因为它的级别很低——我也尝试过 FastPdfKit，但它只会在完全下载后显示整个 PDF。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:53:47.290

PDF 是一种结构化格式，由不同类型的数据块组成，例如 TOC、文本、字体、颜色、注释，有关这些数据块的信息保存在文件末尾。`CGPDFDocumentRef`因此，这使得在没有所有可用数据的情况下打开 pdf是不可能的。

但是，您可以通过线性化 PDF 文件来绕过此限制，以便将元数据信息放在文件的开头。我不确定，但我认为您可以`CGDataProviderCreateSequential`结合使用`CGPDFDocumentRef`来解析部分下载的 PDF 文件。

# excel - 将 A 列中的条目与 B 列中的条目匹配

> ID：11638988
> 
> 赞同：-1
> 
> 时间：2012-07-24T20:43:07.010
> 
> 标签：excel

在我的电子表格中，A 列的条目可以在该列的下方重复。

我希望我在 B 列中的条目在匹配的 A 列条目的每个实例中重复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:48:21.440

我现在拥有的是 C 列是在 B 列中的条目完成后自动更新的列。将此公式放入单元格 C1 并将其向下拖动：

```
=IF(VLOOKUP(A1, $A$1:$B$100, 2, FALSE) <> 0, VLOOKUP(A1, $A$1:$B$100, 2, FALSE), "") 
```

编辑：您始终可以通过将 A2:A$100 更改为 A2:A$n 来更改要查找的单元格数量。

# compilation - 无法编译 Arduino CapSense 示例

> ID：11638989
> 
> 赞同：2
> 
> 时间：2012-07-24T20:43:09.637
> 
> 标签：compilation, arduino

我正在尝试使用[Arduino 的 CapSense 库](http://www.arduino.cc/playground/Main/CapSense)。但是，我无法运行包中包含的名为“CapSenseSketch”的示例。当我尝试打开文件并运行它时（我已经尝试过 Arduino 1.0 和 1.0.1），我收到一个编译器错误，上面写着“CapSense 没有命名类型”，而且

```
CapSenseSketch.cpp:1:22: error: CapSense.h: No such file or directory
CapSenseSketch:11: error: 'CapSense' does not name a type
CapSenseSketch:12: error: 'CapSense' does not name a type
CapSenseSketch:13: error: 'CapSense' does not name a type
CapSenseSketch.cpp: In function 'void setup()':
CapSenseSketch:17: error: 'cs_4_2' was not declared in this scope
CapSenseSketch.cpp: In function 'void loop()':
CapSenseSketch:24: error: 'cs_4_2' was not declared in this scope
CapSenseSketch:25: error: 'cs_4_6' was not declared in this scope
CapSenseSketch:26: error: 'cs_4_8' was not declared in this scope 
```

代码顶部有一个包含语句，

```
#include <CapSense.h> 
```

我认为这会是问题所在，所以我将括号改为引号，但仍然出现错误提示“编译错误”并且：

```
CapSenseSketch.cpp.o: In function `__static_initialization_and_destruction_0':
CapSenseSketch.cpp:15: undefined reference to `CapSense::CapSense(unsigned char, unsigned char)'
CapSenseSketch.cpp:16: undefined reference to `CapSense::CapSense(unsigned char, unsigned char)'
CapSenseSketch.cpp:17: undefined reference to `CapSense::CapSense(unsigned char, unsigned char)'
CapSenseSketch.cpp.o: In function `loop':
CapSenseSketch.cpp:28: undefined reference to `CapSense::capSense(unsigned char)'
CapSenseSketch.cpp:29: undefined reference to `CapSense::capSense(unsigned char)'
CapSenseSketch.cpp:30: undefined reference to `CapSense::capSense(unsigned char)'
CapSenseSketch.cpp.o: In function `setup':
CapSenseSketch.cpp:21: undefined reference to `CapSense::set_CS_AutocaL_Millis(unsigned long)' 
```

有任何想法吗？我曾在另一台计算机上使用 CapSense 并将括号更改为引号当时效果很好，但现在它似乎并没有做太多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:55:51.187

显然，包括外部文件在 arduino ide 中的工作方式有点不同。仅仅在代码顶部有一个包含语句是不够的，您必须手动转到草图>为要使用的每个外部文件添加文件。就我而言，我只对我尝试使用的两个文件中的一个进行了此操作。

# sql-server-2008 - VBScript WScript 数据库连接

> ID：11638990
> 
> 赞同：0
> 
> 时间：2012-07-24T20:43:14.457
> 
> 标签：sql-server-2008, vbscript, odbc

在我的 ASP 代码中，当使用 asp 引擎将其作为服务器端脚本运行时，我没有任何问题。但是，当我在 VBS 文件中使用 VB 脚本运行相同的连接时，它永远不会连接到数据库？我有 Windows 2008 和 2008 R2 MSSQL。有任何想法吗？

```
 establish connection 
function DatabaseConnection()

' establish connection if not connected already
if not IsObject(objGlobalConn) then
    if Len(Application("WebConnectionString")) = 0 then
        Set oShell = CreateObject("WScript.Shell")
        Application.Lock
        Application("WebConnectionString") = oShell.RegRead("HKLM\SOFTWARE\TB\ConnectionString3")
        Application.Unlock
    end if
    set objGlobalConn = CreateObject("ADODB.Connection")
    objGlobalConn.ConnectionTimeout = 0
    objGlobalConn.CommandTimeOut = 0
    objGlobalConn.CursorLocation = 3 ' adUseClient
    objGlobalConn.Open Application("WebConnectionString")
end if

' return connection object
set DatabaseConnection = objGlobalConn

end function 
```

我的 VBScript 文件：

```
' get the connection string
Set oShell = CreateObject("WScript.Shell")
sConnectionString  = oShell.RegRead("HKLM\SOFTWARE\TB\ConnectionString3")
Set oShell = Nothing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T22:37:26.250

Application 对象仅在 ASP 下运行 VBScript 时存在。如果 .vbs 文件通过 WScript.exe 或 CScript.exe 在 Windows 脚本宿主 (WSH) 下运行，则 Application 对象不可用。（我猜`On Error Resume Next`某处有一个声明抑制了 WSH 引发的错误消息。）

根据您是否真的需要将连接字符串存储在 Application 对象中，我想到了两种解决方案。假设`Application("WebConnectionString")`不在`DatabaseConnection`函数之外使用，`Application`则可以删除对的引用。然后该函数可以在 ASP 和 WSH 下运行：

```
function DatabaseConnection()
  Dim objGlobalConn, oShell, connectionString

  ' establish connection if not connected already
  if not IsObject(objGlobalConn) then
      Set oShell = CreateObject("WScript.Shell")
      connectionString = oShell.RegRead("HKLM\SOFTWARE\TB\ConnectionString3")
      Set oShell = Nothing

      set objGlobalConn = CreateObject("ADODB.Connection")
      objGlobalConn.ConnectionTimeout = 0
      objGlobalConn.CommandTimeOut = 0
      objGlobalConn.CursorLocation = 3 ' adUseClient
      objGlobalConn.Open connectionString
  end if

  ' return connection object
  set DatabaseConnection = objGlobalConn

end function 
```

但是，如果`Application("WebConnectionString")`在函数之外使用`DatabaseConnection`，则需要更多的代码才能使函数在 ASP 和 WSH 下都能正常工作。引用该`Application`对象的代码的其他部分或任何其他与 ASP 相关的对象，将需要通过调用来类似地保护`IsRunningUnderASP`：

```
function DatabaseConnection()
  Dim objGlobalConn, oShell, connectionString

  ' establish connection if not connected already
  if not IsObject(objGlobalConn) then
      Set oShell = CreateObject("WScript.Shell")
      connectionString = oShell.RegRead("HKLM\SOFTWARE\TB\ConnectionString3")
      Set oShell = Nothing

      If IsRunningUnderASP() And (Len(Application("WebConnectionString")) = 0) then
          Application.Lock
          Application("WebConnectionString") = connectionString
          Application.Unlock
      End If

      set objGlobalConn = CreateObject("ADODB.Connection")
      objGlobalConn.ConnectionTimeout = 0
      objGlobalConn.CommandTimeOut = 0
      objGlobalConn.CursorLocation = 3 ' adUseClient
      objGlobalConn.Open connectionString
  end if

  ' return connection object
  set DatabaseConnection = objGlobalConn

end function

Function IsRunningUnderASP
  IsRunningUnderASP = _
    IsObject(Application) And _
    IsObject(Request) And _
    IsObject(Response)
End Function 
```

# algorithm - 用于通过“对话”/来自时间戳的隐式会话对聊天消息历史进行分组的算法/启发式？

> ID：11638995
> 
> 赞同：6
> 
> 时间：2012-07-24T20:43:31.283
> 
> 标签：algorithm, heuristics

问题：我有一系列聊天消息——两个用户之间——带有时间戳。例如，我可以一次呈现一整天的聊天消息。然而，在一整天中，有多个离散的对话/会话......对于用户来说，将这些分开而不是所有天作为一个连续的流来查看会更有用。

是否有可以从时间戳“推断”隐式会话/对话开始/中断的算法或启发式方法？除了任意的“如果间隔超过 x 分钟，这是一个单独的会话”。如果这是唯一的情况，这个间隔是如何确定的？无论如何，我想避免这种情况。

例如，在 2:00 到 3:00 之间发送了 50 条消息，然后是休息时间，然后在 4:00 到 5:00 之间发送了 20 条消息。中间会插入一个中断...但是如何确定中断？

我确信已经有关于这个主题的文献，但我只是不知道要搜索什么。

我一直在玩边缘检测算法和基于梯度的方法。

（有关更多说明，请参阅评论）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T21:08:02.777

**编辑（更好的主意）：**

您可以将每条消息视为两种类型：

1.  上一次谈话的继续
2.  全新的对话

您可以将这两种类型的消息建模为独立的[Poisson 过程](http://en.wikipedia.org/wiki/Poisson_process)，其中相邻消息之间的时间差[呈指数分布](http://en.wikipedia.org/wiki/Exponential_distribution)。

然后，您可以根据经验手动确定这两种类型的消息的指数参数（考虑到一些初始数据，这不会太难）。现在你有了这两个事件的模型。

最后，当有新消息出现时，您可以计算消息属于类型 1 或类型 2 的概率。如果是类型 2，那么您有一个新的对话。

**澄清：**

考虑到延迟是一段时间，消息是新对话的概率`T`。

```
P(new conversation | delay=T) = P(new conversation AND delay=T)/P(delay=T) 
```

使用贝叶斯法则：

```
= P(delay=T | new conversation)*P(new conversation)/P(delay=T) 
```

同样的计算也适用于`P(old conversation | delay=T)`。

`P(delay=T | new conversation)`来自模型。`P(new conversation)`很容易从用于生成模型的数据中计算出来。`P(delay=T)`您根本不需要计算，因为您要做的就是比较两个概率。

* * *

相邻消息之间时间戳的差异取决于对话的类型和参与的人。因此，您需要一种考虑局部特征的算法，而不是全局阈值参数。

我的提议如下：

1.  获取最后 10 条相邻消息之间的时间差。
2.  计算平均值（或中位数）
3.  如果到下一条消息的延迟超过平均值的 30 倍，则这是一个新对话。

当然，这些数字是我当场得出的。它们必须进行调整以适应您的目的。

# file - JSF 2.0 文件上传 - 演练？

> ID：11638996
> 
> 赞同：0
> 
> 时间：2012-07-24T20:43:32.683
> 
> 标签：file, jsf, upload

我环顾四周寻找完整的指南。我已经使用 JSF 2 天了，我正在尝试制作一个页面，将 pdf 文件上传到服务器，将其文件路径与其他用户输入的文本字段一起放入数据库中。

这是我的表格（到目前为止）

```
<h:form enctype="multipart/form-data">
        <h:outputText value="Name: " />
        <h:inputText id="name" size="40" value="#{resumeBean.name}" required="true"/> <br/>
        <h:outputText value="Position Sought: "/>
        <h:inputText id="position" size="40" value="#{resumeBean.position}" required="true"/> <br/>
        <h:outputText value="Date: " />
        <h:inputText id="date" size="40" value="#{resumeBean.date}" required="true" /> <br/>
        <h:outputText value="File to upload: " />
        <t:inputFileUpload value="#{bean.resume}" /> <br/>
        <h:commandButton value="submit" action="#{bean.submit}" />
        <h:messages />
    </h:form> 
```

这个bean来处理文件

```
 package com.example;

import java.io.IOException;

import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import javax.faces.context.FacesContext;

import org.apache.commons.io.FilenameUtils;
import org.apache.myfaces.custom.fileupload.UploadedFile;

@ManagedBean
@RequestScoped
public class Bean {

    private String name, position, date;
    private String fileName;
    private UploadedFile resume;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getPosition() {
        return position;
    }

    public void setPosition(String position) {
        this.position = position;
    }

    public String getDate() {
        return date;
    }

    public void setDate(String date) {
        this.date = date;
    }

    public void setResume(UploadedFile resume) {
        this.fileName = resume.getName();
        this.resume = resume;
    }

    public UploadedFile getResume() {
        return resume;
    }

    public String getFileName() {
        return fileName;
    }

    public void submit() throws IOException {
        String fileName = FilenameUtils.getName(resume.getName());
        String contentType = resume.getContentType();
        byte[] bytes = resume.getBytes();

        // Now you can save bytes in DB (and also content type?)

        FacesContext.getCurrentInstance().addMessage(null, 
            new FacesMessage(String.format("File '%s' of type '%s' successfully uploaded!", fileName, contentType)));
    }
} 
```

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="timesheet2" version="3.0">
  <display-name></display-name>
  <welcome-file-list>
    <welcome-file>faces/login.xhtml</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
  </servlet-mapping>
  <listener> 
    <listener-class>com.sun.faces.config.ConfigureListener</listener-class> 
  </listener> 
  <filter>
    <filter-name>MyFacesExtensionsFilter</filter-name>
    <filter-class>org.apache.myfaces.webapp.filter.ExtensionsFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>MyFacesExtensionsFilter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
  </filter-mapping>
</web-app> 
```

但从这里我不知道如何继续，请帮忙？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:02:57.100

BalusC通过构建一个自定义标记组件（基于 JSF 2.0 和 2.1 的纯 JSF ）发表了一篇关于[文件上传的博客文章。](http://balusc.blogspot.com/2009/12/uploading-files-with-jsf-20-and-servlet.html)从 JSF 2.2 开始，有一个用于文件上传的 JSF 组件：[`<h:inputFile>`](https://docs.oracle.com/javaee/7/javaserver-faces-2-2/vdldocs-facelets/h/inputFile.html).

此外，您可以查看[PrimeFaces FileUpload](http://www.primefaces.org/showcase/ui/file/upload/basic.xhtml)和[RichFaces FileUpload](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=fileUpload)等其他实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:54:06.767

我可以推荐[PrimeFaces FileUploader](http://www.primefaces.org/showcase/ui/fileUploadSingle.jsf)吗？

# php - PHP分页在其他页面上丢失变量

> ID：11638999
> 
> 赞同：0
> 
> 时间：2012-07-24T20:43:39.130
> 
> 标签：php

我有一个值通过 $_POST 传递到我的搜索结果页面并存储在一个名为 $term 的变量中。然后该变量在 MySQL 查询中，然后运行以显示搜索结果，如果有超过 15 个结果，我有一个分页 php 脚本，它将结果分成几页。

第一页很棒，找到了正确数量的结果，并且提供了正确数量的页面。如果我回显变量，则正确的值将存储在其中。但是，如果我选择查看下一批结果并且页面刷新，则列出表的所有行（好像查询只是 SELECT * 没有参数）并且变量现在为空

这是我的代码（它有点长，抱歉，我打算把它放在另一个页面中，并在它正常工作时包含它）

```
 <?php
$tbl_name="accounts";
$adjacents = 3;

if (isset($_POST['basic_search_submit'])){
$term = $_POST['item'];}

$query = "SELECT COUNT(*) as num FROM accounts LEFT JOIN accounts_cstm ON accounts.id = accounts_cstm.id_c  WHERE accounts.name LIKE '%$term%' ORDER BY accounts.name";
$total_pages = mysql_fetch_array(mysql_query($query));
$total_pages = $total_pages[num];

    $targetpage = "search_results_play.php";    
$limit = 15;                                
$page = $_GET['page'];
if($page) 
    $start = ($page - 1) * $limit;          
else
    $start = 0;                             
    $sql = "SELECT * FROM accounts LEFT JOIN accounts_cstm ON accounts.id = accounts_cstm.id_c WHERE accounts.name LIKE '%$term%' ORDER BY accounts.name LIMIT $start, $limit";
$result = mysql_query($sql);
if ($page == 0) $page = 1;                  
$prev = $page - 1;                          
$next = $page + 1;                          
$lastpage = ceil($total_pages/$limit);      
$lpm1 = $lastpage - 1;                      
$pagination = "";

if($lastpage > 1)
{   
    $pagination .= "<div class=\"pagination\">";
            if ($page > 1) 
        $pagination.= "<a href=\"$targetpage?page=$prev\">&#60; &#60; previous</a>";
    else
        $pagination.= "<span class=\"disabled\">&#60; &#60; previous</span>";   

            if ($lastpage < 7 + ($adjacents * 2))
    {   
        for ($counter = 1; $counter <= $lastpage; $counter++)
        {
            if ($counter == $page)
                $pagination.= "<span class=\"current\">$counter</span>";
            else
                $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
        }
    }
    elseif($lastpage > 5 + ($adjacents * 2))    //enough pages to hide some
    {
                    if($page < 1 + ($adjacents * 2))        
        {
            for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
            $pagination.= "...";
            $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
            $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
        }
                    elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
        {
            $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
            $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
            $pagination.= "...";
            for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
            $pagination.= "...";
            $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
            $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
        }

        else
        {
            $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
            $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
            $pagination.= "...";
            for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
        }
    }

    if ($page < $counter - 1) 
        $pagination.= "<a href=\"$targetpage?page=$next\">next &#62; &#62;</a>";
    else
        $pagination.= "<span class=\"disabled\">next &#62; &#62;</span>";
    $pagination.= "</div>\n";       
}
?>

  <? while ($row = mysql_fetch_array($result)){
 //table displaying results
 }
?>
<?=$pagination?> 
```

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:53:23.360

PHP 中的变量不会跨页面持久存在。当然其中一些除外，但经常性的`$page`还是`$whatever`不会坚持的。您将加载一个页面，其中包含一些变量，然后在页面在浏览器中完全加载后，这些变量将消失。

建议`session_start()`在脚本顶部、所有页面中使用，并用于`$_SESSION['variable']=...`存储变量。这样，它们将跨页面持续存在。

最简单的修复：

```
$page = $_GET['page']; 
```

将该行替换为：

```
$page = isset($_SESSION['page']) && is_numeric($_SESSION['page']) ? $_SESSION['page'] : 0;
$_SESSION['page'] = $page; 
```

并`session_start()`在每个脚本的顶部添加。如果你有一个共同的头包含，或带有 mysql 身份验证数据的 config.php，请将其放在该文件的顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:10:40.047

另一种解决方案是使用`GET`请求进行搜索并通过获取术语`$_GET['term']`并附加到生成的链接`'&term='. $_GET['term']`。这很容易做到。usin 的主要缺点`$_SESSION['term']`是，例如，如果您将页面留给主页，则此变量将保持设置状态直到会话到期，并且可能会在将来出现一些麻烦。