# StackOverflow 问答 10889000-10889999

# javascript - 使用 data-custom="" 绑定到事件

> ID：10889000
> 
> 赞同：0
> 
> 时间：2012-06-04T22:00:52.817
> 
> 标签：javascript, jquery, html, jquery-selectors

我很确定我会因此受到抨击。

我喜欢使用 data-whatever 属性来绑定事件。

它对我来说感觉很干净，并有助于保留我的类属性以用于样式。

我知道这个选择器是最慢的，所以当有很多元素时我不使用它。

很想听到反对这一点的令人信服的论据。

```
$("body").delegate("[data-action]", "click", function(){
var action = $(this).attr("data-action");

//route action to appropriate function

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:04:07.620

```
$("body").delegate("[data-action]", "click", function(){
   ^^^^-------------------------- body is a too high node.
          ^^^^^^^^--------------- on should be used now instead of delegate.
                    ^^^^^^^^^^^^^ attribute selector is a slow selector. 
```

# c - C编程语言图结构

> ID：10889007
> 
> 赞同：1
> 
> 时间：2012-06-04T22:01:11.420
> 
> 标签：c, graph

我在构建图形结构时遇到了一些麻烦。我知道如何建立一个简单的链表，而且也是加倍的。但我想在这个网站（图片输出）[http://www.cs.sunysb.edu/~algorith/files/graph-data-structures.shtml中构建一个图形结构](http://www.cs.sunysb.edu/~algorith/files/graph-data-structures.shtml)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T22:06:48.437

您有三种常见的解决方案：

*   一个邻接矩阵（在其中存储一个矩阵，`N*N`其中 N 是顶点数，`matrix[x][y]`如果`x`有边到`y`，则存储一个值，否则为 0
*   一个边列表，您只需在其中保留一长串边，这样如果这对夫妇`(x,y)`在列表中，则从 x 到 y 有一条边
*   一个邻接列表，其中有一个顶点列表，每个顶点`x`都有一个边列表，指向 x 有边的节点。

每种不同的方法都是好是坏

*   需要空间
*   与特定操作相关的计算复杂度高于其他

因此，根据您需要对图表执行的操作，您可以选择其中任何一个。如果您想了解上述可能实现的具体特征，请查看我对另一个 SO 问题的[回答。](https://stackoverflow.com/a/2656667/121747)

# image - 在哪里可以找到地球的 2d 纹理

> ID：10889010
> 
> 赞同：0
> 
> 时间：2012-06-04T22:01:44.597
> 
> 标签：image, opengl, textures

谷歌图片不好。哪里有一些免费的地球 2d 图像，最好是原始格式，以便更容易读入 open gl 纹理，用于映射到 3d 球体。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T22:03:51.980

[Blue Marble](http://earthobservatory.nasa.gov/Features/BlueMarble/)现在有更新的高分辨率照片（高达 500 m/像素）。但是你需要什么样的分辨率？

# ruby - irb 没有开始

> ID：10889012
> 
> 赞同：1
> 
> 时间：2012-06-04T22:01:51.007
> 
> 标签：ruby, irb

我正在运行带有 rbenv 的 Ruby 1.9.2。我最近将我的用户目录移动到另一个驱动器。Ruby 和 irb 使用`which`.

```
$ which ruby
/Volumes/Pig/Users/arrow/.rbenv/shims/ruby

$ which irb
/Volumes/Pig/Users/arrow/.rbenv/shims/irb 
```

但是，运行 irb 会无限期挂起。

我也一直在当前配置下运行 ruby​​ 文件，但执行`$ ruby -v`也挂起。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T04:59:42.337

`rbenv rehash`可以帮助解决这类问题。每当您修改 Ruby 安装时，您都需要重新运行该命令以让 rbenv 重建其软链接。

从命令行输出：

```
rehash        Rehash rbenv shims (run this after installing binaries) 
```

您可能还需要再次告诉 rbenv 您的二进制文件在哪里，即，`rbenv global 1.9.2...`让它进行调整。

请记住，rbenv 假设您的二进制文件位于不同的卷上，因此它可能会变得混乱并需要您理顺它。

另一个问题可能是 Ruby 在编译时绑定到另一个卷上的文件（因为这是 rbenv 所做的，它会为您编译 Ruby），所以当找不到文件时，应用程序崩溃了。重新安装 rbenv 可以解决这个问题，因为告诉它重新安装特定的 Ruby 应该可以解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T03:41:25.347

我卸载/安装了 rbenv，一切都很好。

# hive - Hive QL 除外子句

> ID：10889029
> 
> 赞同：13
> 
> 时间：2012-06-04T22:03:51.850
> 
> 标签：hive

如何`EXCEPT`在 Hive QL 中执行子句（如 SQL）

我有 2 个表，每个表都是唯一 ID 列。

我想查找仅在表 1 中但不在表 2 中的 id 列表

**表格1**

```
apple
orange
pear 
```

**表 2**

```
apple
orange 
```

在 SQL 中，您可以执行 EXCEPT 子句 ( [http://en.wikipedia.org/wiki/Set_operations_%28SQL%29](http://en.wikipedia.org/wiki/Set_operations_%28SQL%29) )，但在 Hive QL 中不能执行此操作

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-04T22:58:50.980

我不认为有任何内置的方法可以做到这一点，但`LEFT OUTER JOIN`应该做的伎俩。

这会从中选择所有`table1`不*存在*的ID `table2`：

```
SELECT t1.id FROM table1 t1 LEFT OUTER JOIN table2 t2 ON (t1.id=t2.id) WHERE t2.id IS NULL; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-27T10:42:39.650

我们可以在 Hive 中使用**NOT EXISTS子句作为****MINUS**等价物。

```
SELECT t1.id FROM t1 WHERE NOT EXISTS (SELECT 1 from t2 WHERE t2.id = t1.id); 
```

# indexing - postgis 空间查询帮助

> ID：10889037
> 
> 赞同：0
> 
> 时间：2012-06-04T22:04:08.953
> 
> 标签：indexing, postgis, spatial

假设我有三个表：

*   A. 市政当局（MultiPolygon）
*   B. 邮编质心（Point）
*   C. 用户数据（Point）

(C) 中的条目将 (B) 上的条目与 FK（代码）匹配。

我正在寻找一种有效的方法来：

> **使用ST_Contains**计算城市 (A) 中的用户数据 (C) 数量。

**但**

这是问题所在：

> 如果 C 中的条目为 NULL（或匹配另一个条件），则使用如果存在 B 中的匹配条目，则使用 FK !!!

目前我已经尝试了各种模式，虽然空间查询 A & B 和 A & C 都是亚秒级的，但一旦我将它们全部添加到一个查询（目标）中，结果就会超过 4 秒

我尝试过的示例：

这是更糟糕的（60+秒）：

```
SELECT
    A.*,
    (SELECT FROM 
        (SELECT CASE WHEN C.GEOM IS NULL THEN B.GEOM ELSE C.GEOM END
         FROM C LEFT JOIN B ON C.ID=B.ID) AS b 
         WHERE ST_CONTAINS(A.GEOM, b.GEOM)
    ) count
FROM
    A 
```

这是 15 秒：

```
SELECT 
    A.ID, ..., -- other A fields
    COUNT(B.GEOM)
FROM
    A,
    (SELECT CASE WHEN C.GEOM IS NULL THEN B.GEOM ELSE C.GEOM END
     FROM C LEFT JOIN B ON C.ID=B.ID) AS b
WHERE
    ST_Contains(A.GEOM, b.GEOM)
GROUP BY
    A.ID, ... -- other A fields 
```

就像我说的

```
SELECT COUNT(*) FROM A LEFT JOIN B ON ST_Contains(A.GEOM, B.GEOM) 
```

和

```
SELECT COUNT(*) FROM A LEFT JOIN C ON ST_Contains(A.GEOM, C.GEOM) 
```

两者都在一秒钟内返回。

外键的所有索引也都已到位（B.ID = C.ID）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:28:47.620

你为 A.geom 和 B.geom[制作索引了吗？](http://postgis.refractions.net/documentation/manual-2.0/using_postgis_dbmanagement.html#id2812160)

这将是

```
CREATE INDEX idx_A ON A USING GIST ( GEOM );
VACUUM ANALYZE A (GEOM);
CREATE INDEX idx_B ON B USING GIST ( GEOM );
VACUUM ANALYZE B (GEOM); 
```

# javascript - Javascript布尔“切换”

> ID：10889046
> 
> 赞同：0
> 
> 时间：2012-06-04T22:04:53.023
> 
> 标签：javascript, user-interface

我有一个函数可以查看光标 (x, y) 以查看它是否落在几个矩形 ( `a<x<b, c<y<d`) 之一内。但是，我需要根据光标*是否落入*特定矩形来设置布尔值，并且仅在光标落入其他矩形时才重置它。换句话说

1.  如果光标落在矩形 X 内，则 A 为真

2.  如果光标落在矩形 1、2、3 或 4 内，则 A 为假

3.  如果 A 在 Y 或 Z 之外的任何位置，则保留其以前的值

问题是无论我做什么，如果我离开第一个矩形，无论我是否访问其他 2 个矩形，布尔值都会返回 false。我尝试将布尔值设为全局，但这无济于事。

代码;

```
var r
var s
var l
var inCenter = false

function makeRects(a,b)

{       
    r = a-b
    s = (a/2) - (b/2)
    l = (a/2) + (b/2)

    lSide = new Array(4)
    lSide[0] = 0
    lSide[1] = 0
    lSide[2] = a
    lSide[3] = b

    tSide = new Array(4)
    tSide[0] = 0
    tSide[1] = 0
    tSide[2] = b
    tSide[3] = a

    rSide = new Array(4)
    rSide[0] = r
    rSide[1] = 0
    rSide[2] = b
    rSide[3] = b

    bSide = new Array(4)
    bSide[0] = 0
    bSide[1] = r
    bSide[2] = b
    bSide[3] = b

    aSquare = new Array(4)
    aSquare[0] = 0
    aSquare[1] = 0
    aSquare[2] = s
    aSquare[3] = s

    bSquare = new Array(4)
    bSquare[0] = l
    bSquare[1] = 0
    bSquare[2] = b
    bSquare[3] = s

    cSquare = new Array(4)
    cSquare[0] = 0
    cSquare[1] = l
    cSquare[2] = s
    cSquare[3] = r

    dSquare = new Array(4)
    dSquare[0] = l
    dSquare[1] = l
    dSquare[2] = r
    dSquare[3] = r

    lCenter = new Array(4)
    lCenter[0] = 0
    lCenter[1] = s
    lCenter[2] = b
    lCenter[3] = l

    tCenter = new Array(4)
    tCenter[0] = s
    tCenter[1] = 0
    tCenter[2] = l
    tCenter[3] = b

    rCenter = new Array(4)
    rCenter[0] = r
    rCenter[1] = s
    rCenter[2] = a
    rCenter[3] = l

    bCenter = new Array(4)
    bCenter[0] = s
    bCenter[1] = r
    bCenter[2] = l
    bCenter[3] = a

    mCenter = new Array(4)
    mCenter[0] = s
    mCenter[1] = s
    mCenter[2] = l
    mCenter[3] = l
} 

function cursor(a,b) 

{
    var inaSquare = false
    var inbSquare = false
    var incSquare = false
    var indSquare = false
    var inCenter = false

    if ((a>aSquare[0] && a<aSquare[2])&&(b>aSquare[1] && b<aSquare[3]))
    {
    inaSquare = true
    post("aSquare");
    post();
    }

    if ((a>bSquare[0] && a<bSquare[2])&&(b>bSquare[1] && b<bSquare[3]))
    {
    inbSquare = true
    post("bSquare");
    post();
    }

    if ((a>cSquare[0] && a<cSquare[2])&&(b>cSquare[1] && b<cSquare[3]))
    {
    inbSquare = true
    post("cSquare");
    post();
    }

    if ((a>dSquare[0] && a<dSquare[2])&&(b>dSquare[1] && b<dSquare[3]))
    {
    indSquare = true
    post("dSquare");
    post();
    }

    if (inaSquare||inbSquare||incSquare||indSquare)
    {
    inCenter = false
    }

    if ((a>mCenter[0] && a<mCenter[2])&&(b>mCenter[1] && b<mCenter[3]))
    {
    inCenter = true
    inaSquare = false
    inbSquare = false
    incSquare = false
    indSquare = false
    }

    if (((inCenter && a>s) && a<l) && b<lCenter[3])

    {
    outlet (1, 1)
    }

    else if (((inCenter && a>s) && a<l) && b>rCenter[0])

    {
    outlet (1, 2)
    }

    else if (((inCenter && b>s) && b<l) && a<tCenter[3])

    {
    outlet (1, 3)
    }

    else if (((inCenter && b>s) && b<l) && b>bCenter[1])

    {
    outlet (1, 4)
    }

    else

    {
    outlet (1, 0)
    }
    post("inCenter");
    post(inCenter);
    post();
    post("inaSquare");
    post(inaSquare);
    post();
    post("inbSquare");
    post(inbSquare);
    post();
    post("incSquare");
    post(incSquare);
    post();
    post("indSquare");
    post(indSquare);
    post();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T00:10:53.887

很抱歉，这不是一个真正的答案，但我已经编辑了您的代码以使用循环和数组/映射。这样你就可以得到更多的帮助。希望你也能从中学到一些东西:)

因此，您的代码也可能如下所示：

```
var r
var s
var l

function makeRects(a,b)
{  
    r = a-b
    s = (a/2) - (b/2)
    l = (a/2) + (b/2)

    // Place all arrays inside maps, so that we can loop through them later.
    side = {
        l: [0, 0, a, b],
        t: [0, 0, b, a],
        r: [r, 0, b, b],
        b: [0, r, b, b],
    }

    square = {
        a: [0, 0, s, s],
        b: [l, 0, b, s],
        c: [0, l, s, r],
        d: [l, l, r, r]
    }

    center = {
        l: [0, s, b, l],
        t: [s, 0, l, b],
        r: [r, s, a, l],
        b: [s, r, l, a],
        m: [s, s, l, l]
    }
}

function cursor(a,b)
{
    var inside = {
        a: false,
        b: false,
        c: false,
        d: false,
        center: true
    }

    // This loop will run through every key of the map, and x will hold the key
    for (var x in square) {
        if ((a>square[a][x] && a<square[x][2])&&(b>square[x][1] && b<square[x][3]))
        {
            inside[x] = true;
            // Instead of checking if the cursor is inside the center, we assume it
            // is by default, and if it is found inside a square, inside['center'] is set to false
            inside['center'] = false;
            post(x + "Square");
            post();
        }
    }

    // Not sure what you want to do here...
    if (((inside['center'] && a>s) && a<l) && b<center['l'][3])
    {
    outlet (1, 1)
    }

    else if (((inside['center'] && a>s) && a<l) && b>center['r'][0])
    {
    outlet (1, 2)
    }

    else if (((inside['center'] && b>s) && b<l) && a<center['t'][3])
    {
    outlet (1, 3)
    }

    else if (((inside['center'] && b>s) && b<l) && b>center['b'][1])
    {
    outlet (1, 4)
    }

    else
    {
    outlet (1, 0)
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T23:25:38.487

好的，我根据我认为您要完成的工作修改了原始演示，但它仍然不是很清楚，因此您需要更好地描述您要完成的工作，而不是如何根据矩形坐标命中测试切换布尔值。您尝试完成的工作可能会以更简单的方式完成，而无需借助基于坐标的命中测试。

演示：

[http://jsfiddle.net/DaveAlger/cVPpU/5/](http://jsfiddle.net/DaveAlger/cVPpU/5/)

html:

```
<p id="toggle-state">false: center not hit</p>
<p id="mouse-xy"></p>

<canvas id="top" class="box" x="200" y="50" width="100" height="100" c="#933" b="#faa"></canvas>
<canvas id="left" class="box" x="50" y="200" width="100" height="100" c="#993" b="#ffa"></canvas>
<canvas id="right" class="box" x="350" y="200" width="100" height="100" c="#696" b="#dfd"></canvas>
<canvas id="bottom" class="box" x="200" y="350" width="100" height="100" c="#369" b="#adf"></canvas>
<canvas id="center" class="box" x="200" y="200" width="100" height="100" c="#999" b="#ddd"></canvas> 
```

CSS：

```
.box{position: absolute;}
#mouse-xy{float:right;padding:30px;color:#999;font-family:sans-serif;} 
```

js：

```
var isCenterHit = false;
var checkCenterHit = true;

// draw canvas rectangles
$('.box').each(function(i) {
    //alert(i);
    var id = $(this).attr('id')
    var w = $(this).width();
    var h = $(this).height();
    var c = $(this).attr('c');
    var x = $(this).attr('x');
    var y = $(this).attr('y');

    drawRect( document.getElementById( id ).getContext('2d'), w, h, c, id );
    $(this).offset({top: y, left: x});
});

function drawRect( ctx, width, height, color, text ) {
    ctx.fillStyle = color;
    ctx.fillRect(0, 0, width, height);
    ctx.fillStyle = '#fff';
    ctx.font = '30px sans-serif';
    ctx.textBaseline = 'top';
    ctx.fillText(text, 0, 0);
}

// listen for mouse over
$(document).mousemove(function(e){
    var x = e.pageX;
    var y = e.pageY;

    var tX = $(e.target).attr('x');
    var tY = $(e.target).attr('y');
    var tW = $(e.target).width();
    var tH = $(e.target).height();

    // update mouse location
    $('#mouse-xy').html("center hit: " + isCenterHit + "  |  X: " + x + " Y: " + y);

    // rectangle coordinate hit test (this can be done other ways too)
    if ( x > tX && x < tX + tW && y > tY && y < tY + tH ) {

        // toggle the boolean
        if ( checkCenterHit && $(e.target).attr('id') === 'center' ) {
            isCenterHit = !isCenterHit;
            checkCenterHit = false;
        }

        if ( isCenterHit ) {
            // do this when center hit state is 'on'
            $('body').css('background-color',$(e.target).attr('b'));
            $('canvas').css('cursor','pointer');
        } else {
            // do this when center hit state is 'off'
            $('body').css('background-color','');
            $('canvas').css('cursor','');
        }
    }
    else {
        $('body').css('background-color','#ffffff');
        checkCenterHit = true;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T19:05:39.327

可能您的命中测试函数需要一个名为的标志`doTest`最初设置为 true，然后在命中中心矩形后设置为 false

然后你可以`doTest`再次设置为 true 一旦不同的矩形被击中

# xml - 用于在 XML 中查找和替换可变 URL 字符串的正则表达式

> ID：10889049
> 
> 赞同：2
> 
> 时间：2012-06-04T22:05:30.240
> 
> 标签：xml, regex, url, dreamweaver

我很难找出一个正则表达式来剥离特定 XML 标记中的部分字符串并替换它。我有许多带有可变部分的 URL 路径，所以我需要找到某个字符串和 URL 中最后一个斜杠之间的所有内容。例如，我可能有如下所示的标签和 URL：

> `<bpoc:resourceMetadataLoc>http://app01/media/images/I//1951-1960_Embark_Object_Photos/1957.59.jpg</bpoc:resourceMetadataLoc>`

或者

> `<bpoc:resourceMetadataLoc>http://app01/media/images/CONTEMPORARY/1986-2005/1991.2.jpg</bpoc:resourceMetadataLoc>`

输出应该看起来像

> `<bpoc:resourceMetadataLoc>http://app01/media/Previews/1957.59.jpg</bpoc:resourceMetadataLoc>`

这大约是我得到的，但它捕获字符串中的最后一个斜杠，而不是倒数第二个斜杠：

> `(<bpoc:resourceMetadataLoc>http://app01/media/images)+(.*[/])`

该正则表达式将捕获以下内容：

> `<bpoc:resourceMetadataLoc>http://app01/media/images/I//1951-1960_Embark_Object_Photos/1957.59.jpg</`

我需要向正则表达式添加什么以`</bpoc:resourceMetadataLoc>`从查询中排除该位，然后捕获 URL 中最后一个斜杠之前的所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:17:18.137

因为这是 XML，所以不能有（非转义）`<`或`>`URL 本身。您可以利用它来发挥自己的优势：

```
<bpoc:resourceMetadataLoc>http://app01/media/images[^<]*/([^<]*) 
```

这应该捕获 URL 的最后一段（例如“1957.59.jpg”）。它的工作原理是贪婪地匹配直到标签结尾（第一个`[^<]*`）开头的所有内容，然后回溯以匹配最近的（即最后一个）`/`，然后将该斜杠（the）之后的所有内容捕获`([^<]*)`到第 1 组中，以便您可以使用在更换步骤中。

# html - 网站屏幕分辨率自动分辨率

> ID：10889051
> 
> 赞同：0
> 
> 时间：2012-06-04T22:05:39.150
> 
> 标签：html, css

我试图为我的东西建立一个网站，现在我意识到当我尝试通过不同的浏览器时。它看起来的方式完全不同。我使用 Dreamweaver CS5.5 作为创建它的基础。

是否有一些我想添加的元素。

我尝试浏览论坛以获得一些结果。我试过了： [如何使网站适应用户的屏幕分辨率？](https://stackoverflow.com/questions/4779077/how-to-adapt-website-to-users-screen-resolution)

没有甜甜圈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:45:24.737

我会阅读一些关于响应式网页设计的内容：http: [//coding.smashingmagazine.com/2011/01/12/guidelines-for-responsive-web-design/](http://coding.smashingmagazine.com/2011/01/12/guidelines-for-responsive-web-design/)

# java - GSON 泛型序列化

> ID：10889053
> 
> 赞同：3
> 
> 时间：2012-06-04T22:05:49.103
> 
> 标签：java, generics, serialization, types, gson

> **可能重复：**
> [使用 gson 反序列化泛型](https://stackoverflow.com/questions/4364392/deserializing-generics-with-gson)

所以我需要做：

```
Type fluentType = new TypeToken<BruteForceFluentImpl<GtlDigestor.Data>>() {}.getType(); 
```

代替

```
Type fluentType = new TypeToken<Fluent<T>>() {}.getType(); // <-- i want to be able to do something like this.

String json = gson.toJson(fluent, fluentType); 
```

这意味着每次我必须为 Fluent 类指定不同的类型参数时，我都需要更改我的代码以指定它。现在，类型参数是`GtlDigestor.Data`.

我该怎么做呢？（第二行代码不起作用）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T00:57:05.127

您需要在运行时告诉 Gson 实际的参数化类型（例如`BruteForceFluentImpl<GtlDigestor.Data>`，包括实际运行时原始类型和实际类型参数值），因为 Gson 需要保存这些信息。

Using`TypeToken`是获取 的最简单方法`Type`，但要使用它，您必须在源代码中硬编码确切的类型（没有类型参数，如`T`）。如果您想将代码放在将与不同类型一起使用的方法中，那么也许此方法应该接受`Type`调用者需要传入的参数。然后可以在调用者的位置，每个位置大概只使用一个固定类型。

或者，如果您需要`Type`在运行时根据原始类型和类型参数完全动态地生成，请参阅我对问题的[回答](https://stackoverflow.com/questions/9111899/)。

# javascript - javascript字符串长度返回未定义

> ID：10889059
> 
> 赞同：2
> 
> 时间：2012-06-04T22:06:25.460
> 
> 标签：javascript, string, casting, undefined

我似乎无法从表单文本字段中的值获取字符串长度这是我的函数的代码，它传递了文本字段名称的参数

```
 function validate(thing)
  {

  var location = document.getElementById(thing);

  var cardst = location.value;
  window.alert (cardst);
  cardst = String(cardst);
  window.alert (cardst.lenght); 
```

第一个警报有效，它会提醒我在文本字段中输入的任何内容，但第二个始终未定义。如您所见，我确实将其转换为字符串，但我得到了未定义..任何想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-04T22:08:23.023

那是因为你拼错了`length`:-)

改用这个：

```
cardst.length;   // <- 'th', not 'ht' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T22:09:34.923

您有语法错误。它的长度不长

```
 function validate(thing)
  {

  var location = document.getElementById(thing);

  var cardst = location.value;
  window.alert (cardst);
  cardst = String(cardst);
  window.alert (cardst.lenght);
                           ^ /*should read window.alert(cardst.length)*/ 
```

# ios - iOS5 的 NSURLConnection 超时是什么情况？

> ID：10889060
> 
> 赞同：4
> 
> 时间：2012-06-04T22:06:27.970
> 
> 标签：ios, ios5, nsurlconnection

我试图找到一个明确的答案，以确定是否可以设置在 iOS 5 中使用 NSURLConnection 的超时值（我想将其设置为 30 秒）。

我已经搜索过过去的帖子，但信息似乎相互矛盾。比如这个帖子

[NSURLConnection 超时？](https://stackoverflow.com/questions/1424608/nsurlconnection-timeout)

说苹果要求最少 4 分钟的超时时间——尽管我找不到任何苹果文档来支持这一点。

这篇文章说 240 限制来自苹果论坛线程 [NSMutableURLRequest 不遵守我的 timeoutInterval](https://stackoverflow.com/questions/2736967/nsmutableurlrequest-not-obeying-my-timeoutinterval)

他们说此限制仅适用于正文不为空时的 POST。这是否意味着可以将GETS 的超时时间设置为小于4 分钟？

有人在这里评论说 iOS 5 并非如此，但是他们被否决了 [NSMutableURLRequest 不遵守我的 timeoutInterval](https://stackoverflow.com/questions/2736967/nsmutableurlrequest-not-obeying-my-timeoutinterval)

还有其他人在说其他事情，但无论如何，以前关于这个主题的大多数帖子似乎都是几年前 iOS 5 之前的帖子。

如果有 4 分钟的限制，那么如果真的没有 Apple 文档，那么必须依靠传闻才能知道这有点荒谬。

有谁知道 iOS 5 的实际最终情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:02:39.547

根据我的经验，我发现： - 可以为 HTTP GETS 设置任何超时值（即 0.1 秒）。- 操作系统确实对带有正文的 HTTP POSTS 施加了 240 的限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T23:18:07.507

具有关联超时的不是连接，而是请求（通过连接发出）。请参阅 NSURLRequest 的文档。超时间隔以秒为单位（不是分钟，这只是一个线索）。

**返回值** 接收方的超时间隔，以秒为单位。

**讨论** 如果在连接尝试期间请求保持空闲的时间超过超时间隔，则该请求被视为已超时。*

各种 Apple 代码和文档显示超时时间为 60 秒；因此 4 分钟不能是最小值。

# eclipse - Google App Engine Eclipse 插件 - 所有控制台输出为红色

> ID：10889065
> 
> 赞同：1
> 
> 时间：2012-06-04T22:07:09.933
> 
> 标签：eclipse, google-app-engine, logging

我刚刚尝试了第一个在 Windows 上使用 Eclipse Indigo 和 Google 插件的 Google App Engine Java 教程。一切似乎都正常，但我想知道 javaw.exe 控制台输出全部以红色显示，包括 INFO（无法发布图像）：

```
2012-06-04 23:50:42 com.google.appengine.tools.development.DevAppServerImpl start
INFO: The server is running at http://localhost:8888/
2012-06-04 23:50:42 com.google.appengine.tools.development.DevAppServerImpl start
INFO: The admin console is running at http://localhost:8888/_ah/admin 
```

它应该这样工作吗？仅仅是因为 javaw.exe 将所有这些都吐在它的 stderr 上并且 Eclipse 端没有过滤吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T03:40:49.670

是的，Google Plugin for Eclipse 控制台中的红色输出是完全正常的。我不确定它是否是红色的技术原因，或者它是否是一种有意识的风格选择，但就像我曾经使用过的每个 Eclipse + GPE 安装一样。

# c# - 如何根据多个父项的属性删除子元素？

> ID：10889071
> 
> 赞同：3
> 
> 时间：2012-06-04T22:07:30.170
> 
> 标签：c#, xml, linq-to-xml

我有一个类似于以下结构的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<Root Attr1="Foo" Name="MyName" Attr2="Bar" >
    <Parent1 Name="IS">
        <Child1 Name="Kronos1">
            <GrandChild1 Name="Word_1"/>
            <GrandChild2 Name="Word_2"/>
            <GrandChild3 Name="Word_3"/>
            <GrandChild4 Name="Word_4"/>
        </Child1>
        <Child2 Name="Kronos2">
            <GrandChild1 Name="Word_1"/>
            <GrandChild2 Name="Word_2"/>
            <GrandChild3 Name="Word_3"/>
            <GrandChild4 Name="Word_4"/>
        </Child2>
    </Parent1>
</Root> 
```

未定义元素，因为它们可以具有与其他文件不同的值。我所知道的是事先定义的每个元素的“名称”属性。我需要能够根据该名称操作和/或删除选定元素中的数据。例如： `removeElement("MyName.IS.Kronos1.Word_1")`将删除父项 `GrandChild1`下的元素。`Child1`

我的问题是，在使用 LINQ to XML 查询时，我无法正确选择该元素。使用这个：

```
private IEnumerable<XElement> findElements(IEnumerable<XElement> docElements, string[] names)
{
    // the string[] is an array from the desired element to be removed.
    // i.e. My.Name.IS ==> array[ "My, "Name", "IS"]
    IEnumerable<XElement> currentSelection = docElements.Descendants();

    foreach (string name in names)
    {
        currentSelection =
            from el in currentSelection
            where el.Attribute("Name").Value == name
            select el;
    }

    return currentSelection;

} 
```

要找到我需要删除元素的位置会产生以下结果：

```
<?xml version="1.0" encoding="utf-8"?>
<Root Attr1="Foo" Name="MyName" Attr2="Bar" >
    <Parent1 Name="IS">
        <Child1 Name="Kronos1">
            <GrandChild2 Name="Word_2"/>
            <GrandChild3 Name="Word_3"/>
            <GrandChild4 Name="Word_4"/>
        </Child1>
        <Child2 Name="Kronos2">
            <GrandChild2 Name="Word_2"/>
            <GrandChild3 Name="Word_3"/>
            <GrandChild4 Name="Word_4"/>
        </Child2>
    </Parent1>
</Root> 
```

调试后似乎我所做的只是再次搜索同一个文档，但每次都搜索不同的名称。如何根据多个父属性名称搜索和选择特定元素？

应该注意的是，XML 的大小（表示元素的级别）也是可变的。这意味着可以有 2 个级别（父母）或多达 6 个级别（曾祖孙）。但是，我还需要能够查看根节点的`Name`属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T18:12:07.400

如果您采用递归方法，您可以这样做：

```
private XElement findElement(IEnumerable<XElement> docElements, List<string> names)
{

    IEnumerable<XElement> currentElements = docElements;
    XElement returnElem = null;
    // WE HAVE TO DO THIS, otherwise we lose the name when we remove it from the list
    string searchName =  String.Copy(names[0]);

    // look for elements that matchs the first name
    currentElements =
        from el in currentElements
        where el.Attribute("Name").Value == searchName
        select el;

    // as long as there's elements in the List AND there are still names to look for: 
    if (currentElements.Any() && names.Count > 1)
    {
        // remove the name from the list (we found it above) and recursively look for the next
        // element in the XML
        names.Remove(names[0]);
        returnElem = findElement(currentElements.Elements(), names);
    }

    // If we still have elements to look for, AND we're at the last name:
    else if (currentElements.Any() && names.Count == 1)
    {
        // one last search for the final element
        currentElements =
        from el in currentElements
        where el.Attribute("Name").Value == searchName
        select el;

        // we return the the first elements which happens to be the only one (if found) or null if not
        returnElem = currentElements.First();
    }
    else
        // we do this if we don't find the correct elements
        returnElem = null;

    // if we don't find the Element, return null and handle appropriately
    // otherwise we return the result
    return returnElem;
} 
```

请注意，我传递的是列表而不是数组。这很容易通过以下方式完成：

```
List<string> elemNames= new List<string>("This.is.a.test".Split('.')); // or whatever your string is that you need to split 
```

最后，我正在阅读文档，将其拆分为元素，然后调用函数如下：

```
XDocument doc = XDocument.Load(loadLocation);
IEnumerable<XElement> currentSelection = doc.Elements();
XElement foundElement = findElement(currentSelection, elemNames); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T18:19:49.020

这应该有效：

```
if (doc.Root.Attribute("Name").Value != names.First())
    throw new InvalidOperationException("Sequence contains no matching element.");

var selection = doc.Root;

foreach (var next in names.Skip(1))
    selection = selection.Elements().First(x => x.Attribute("Name").Value == next);

return selection; 
```

如果您愿意，可以用以下内容替换最新的行：

```
var selection = names.Skip(1).Aggregate(doc.Root, (current, next) => current.Elements().First(x => x.Attribute("Name").Value == next)); 
```

`.First()`如果在源代码中找不到匹配的元素，该方法将引发异常。

* * *

最干净的方法是添加一个新功能：

```
XElement SelectChildElement(XElement current, string child)
{
    if (current == null)
        return null;        

    var elements = current.Elements();
    return elements.FirstOrDefault(x => x.Attribute("Name").Value == child);
} 
```

这样您就可以简单地使用它，如下所示：

```
if (doc.Root.Attribute("Name").Value != names.First())
    return null;

return names.Skip(1).Aggregate(doc.Root, SelectChildElement); 
```

然后，如果您需要选择一个孩子，您有一个方便的可用`SelectChildElement()`工具。如果你想这样做，你可以从[分机](http://msdn.microsoft.com/en-us/library/bb383977.aspx)`myElement.SelectChild(child)`调用它。

此外，当您在此处使用 FirstOrDefault 时，您不会收到异常，而是会`null`返回。

这样，它就不必跟踪通常成本更高的异常......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T22:14:07.943

您需要在每个新步骤中搜索当前选定元素的后代：

```
private IEnumerable<XElement> findElements(IEnumerable<XElement> docElements, string[] names)
{
    IEnumerable<XElement> currentSelection = docElements;
    IEnumerable<XElement> elements = currentSelection;

    foreach (string name in names)
    {
        currentSelection =
            from el in elements
            where el.Attribute("Name").Value == name
            select el;
        elements = currentSelection.Elements();
    }

    return currentSelection;
} 
```

[我在LinqPad](http://www.linqpad.net/)中测试了以下代码，一切正常。您也可以看到所有中间步骤。顺便说一句，[LinqPad](http://www.linqpad.net/)是测试 linq 查询的好工具。

```
string xml =
"<?xml version=\"1.0\" encoding=\"utf-8\"?>" +
"<Root Attr1=\"Foo\" Name=\"MyName\" Attr2=\"Bar\" >" +
"    <Parent1 Name=\"IS\">" +
"        <Child1 Name=\"Kronos1\">" +
"            <GrandChild1 Name=\"Word_1\"/>" +
"            <GrandChild2 Name=\"Word_2\"/>" +
"            <GrandChild3 Name=\"Word_3\"/>" +
"            <GrandChild4 Name=\"Word_4\"/>" +
"        </Child1>" +
"        <Child2 Name=\"Kronos2\">" +
"            <GrandChild1 Name=\"Word_1\"/>" +
"            <GrandChild2 Name=\"Word_2\"/>" +
"            <GrandChild3 Name=\"Word_3\"/>" +
"            <GrandChild4 Name=\"Word_4\"/>" +
"        </Child2>" +
"    </Parent1>" +
"</Root>";

string search = "MyName.IS.Kronos1.Word_1";
string[] names = search.Split('.');

IEnumerable<XElement> currentSelection = XElement.Parse(xml).AncestorsAndSelf();
IEnumerable<XElement> elements = currentSelection;
currentSelection.Dump();

foreach (string name in names)
{
    currentSelection =
        from el in elements
        where el.Attribute("Name").Value == name
        select el;
    elements = currentSelection.Elements();
    currentSelection.Dump();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T23:11:44.197

使用这个库来使用 XPath：[https ://github.com/ChuckSavage/XmlLib/](https://github.com/ChuckSavage/XmlLib/)

```
string search = "MyName.IS.Kronos1.Word_1";
XElement node, root = node = XElement.Load(file);
// Skip(1) is to skip the root, because we start there and there can only ever be one root
foreach (string name in search.Split('.').Skip(1))
    node = node.XPathElement("*[@Name={0}]", name);
node.Remove();
root.Save(file); 
```

# bash - 将 sudo 与 for 循环一起使用

> ID：10889072
> 
> 赞同：22
> 
> 时间：2012-06-04T22:07:33.803
> 
> 标签：bash, for-loop, sudo

我想用 sudo 运行一个简单的 for 循环命令，但它不起作用：

```
sudo -i -u user for i in /dir; do echo $i; done 
```

我收到以下错误：

```
-bash: syntax error near unexpected token `do' 
```

我可能忽略了一件非常简单的事情。有什么帮助吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-04T22:10:18.997

sudo 想要一个程序（+arguments）作为参数，而不是一段 shell 脚本。不过，您可以这样做：

```
sudo -i -u user sh -c 'for i in /dir; do echo $i; done' 
```

注意单引号。如果您使用双引号，您的 shell 将尝试扩展`$i`之前的 sudo（或者，更确切地说，由它运行的 shell）曾经看到它。

PS。正如评论中指出的（仅六年后），另一个问题是，如果您想遍历目录中的文件，正确的语法是`for i in /dir/*`. `for`接受一个列表，并且`/dir`是一个列表......只有一个项目。由于通配符扩展，扩展`/dir/*`为文件列表。`/dir`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T22:12:50.800

你可以试试 sudo bash -c 'commands here'

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T22:15:10.447

将 sudo 放入循环中：

```
for i in /dir; do
    sudo -u user somecommand $i
done 
```

例如，如果您需要其他用户的权限来为循环生成 glob，那么如果没有额外的步骤，这将无法工作。

# ruby-on-rails - 我无法在 ruby on rails 中创建控制器。我所有的宝石都没有加载？

> ID：10889074
> 
> 赞同：1
> 
> 时间：2012-06-04T22:07:59.133
> 
> 标签：ruby-on-rails, ruby, controller

```
rails g controller welcome index

C:/Program Files/Ruby.../rubygems/dependency.rb:247: amongst [actionmailer
3.2.3,actionpack...(all my rubygems listed here)] (Gem::LoadError) 
    from C:/Program Files/ruby-1.9.3.../rubygems/dependecney.rb:256:in 'to_spec' 
    from C:/Program Files/ruby-1.9.3.../rubygems.rb:1231: in 'gem' 
    from C:/RailsInstasller/Ruby1.9.3/bin/rails:18:in '<main>' 
```

我是 Ruby on Rails 的初学者，正在尝试制作我的第一个项目。
我正在关注[http://railsinstaller.org](http://railsinstaller.org)，现在当我输入第一行时，接下来的 5 行是出现的错误。

我想知道问题是否可能是我似乎拥有的两个不同的 Ruby（在程序文件和 rails 安装程序中？）。
我浏览了其他一些帖子，找不到像这样的东西，我试过`gem install bundler`了，但这没有任何作用。
如果您知道我的问题是什么或如何解决它，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:17:16.880

`$ bundle install`在项目根目录（顶层目录）的命令行中执行。

您对 bundler 的努力表明安装它但实际上并未为您的项目运行它。

# language-agnostic - 为自动完成场景表示语言标记的最佳方式

> ID：10889075
> 
> 赞同：5
> 
> 时间：2012-06-04T22:08:03.360
> 
> 标签：language-agnostic, autocomplete, token

正如你们中的一些人所知，我正在开发自己的 IDE。你可能会想“哦不，再来一个？！” - 别担心，没有人强迫你使用它，我怀疑它无论如何都会被认真发布。

所以，继续讨论主要问题。我正在尝试实现一个自动完成系统。确切的用户界面不是问题。**但是，以灵活的方式存储语言/库标记是我的主要问题。**

假设我们向用户建议 CSS 选择器或属性。我们会有类似的东西：

```
- css/core
  - a                      // anchor tag
  - etc                    // all valid html tags
  - .stuff                 // class name parsed from user project
  - ?etc                   // more stuff parsed from user project (ids, classes...)
- css/properties
  - border                 // regular css properties - we also need to associate
                           // <border-style> and <color> value tokens
  - etc                    // the rest of them
- css/values/border-style  // property value tokens
  - solid
  - dotted
- css/values/color
  - red
  - green
  - fucshia 
```

所以每个令牌都有一个命名空间，这样我们就可以在令牌之间进行跟踪。与 BNF 类似，一些标记值由子标记组成，例如边框和颜色的大小写。

**1.**不要忘记我们需要存储可能与具有奇异语法的语言相关的任何内容。**2.**另外，重要的是要注意，我需要以某种方式将上述信息与上下文相关的信息合并，例如从项目文件中收集的类名列表。这应该是快速有效的，不会导致任何重复的令牌等。

所以，总而言之，这里的事情非常复杂，老实说，我想不出一种方法来获得一个通用和灵活的解决方案。请记住，IDE 应该适合任何类型的语言，这使得这变得更加复杂。

我不确定这个问题是否更适合[程序员](https://softwareengineering.stackexchange.com/)，所以我会留给模组来决定。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T20:41:47.493

我在一个名为[SharpDevelop](http://community.sharpdevelop.net/blogs/martinkonicek/archive/2010/08/01/resharper-for-sharpdevelop-new-features.aspx)的 IDE 上工作。在讨论存储问题之前，让我先进行更一般的讨论。

我认为您无法以通用方式正确解决自动完成问题。大多数 IDE 通过为每种语言提供一个*插件*来支持各种语言，并且完全由插件根据文档中光标的当前位置来确定完成列表的外观。

IDE 仅提供插件实现的简单接口。例如，IDE 中显示自动完成的代码可能如下所示：

```
getAutocompletionList(editor) {
  plugin = editor.languagePlugin;
  plugin.getAutocompletionList(editor.cursorPosition, editor.parsedDocument);
} 
```

A`CSSLanguagePlugin`然后`PHPLanguagePlugin`会有完全独立的实现`getAutocompletionList`- 一个在编辑 CSS 时使用，另一个在编辑 PHP 时使用。

正如其他人指出的那样，光标周围的上下文很重要。例如，在编辑以下 CSS 时：

```
h1 {
    text-align: <cursor> 
```

上下文将是：

```
[cssTopLevelContext] {
    [cssPropertyContext]: [cssPropertyValueContext]
} 
```

CSS 插件的实现将执行以下操作：

```
// CSSLanguageBinding
getAutocompletionList(cursorPosition, document) {
    completionContext = this.getCompletionContext(cursorPosition, document);
    // completionContext is { 
    //     'name': 'cssPropertyValueContext', 
    //     'propertyName': 'text-align' 
    // }
    return this.completionDatabase.getCompletionList(completionContext);
    // returns ['left', 'center', 'right'];
} 
```

现在我们来回答您的问题 -*完成数据库*。同样，它可能（并且可能应该）是针对不同语言插件的不同实现——在 PHP 中，您使用类、方法和变量，并且必须关心可见性（私有、公共、受保护）。在 CSS 中，您使用标签、类和属性。

正如您正确指出的那样，完成数据库应包括：

*   通用令牌
*   当前项目导入的代币
*   当前项目本身中的代币

在 SharpDevelop 中，没有“通用标记”部分，因为任何项目都会导入标准库，因此在打开项目时分析所有导入的库就足够了。

在 PHP 中你可以做同样的事情，你可以为已经看到的库缓存令牌数据库。

现在我们来看看存储格式。要在 PHP 中提供自动完成功能，您需要知道当前类、它的基类和接口层次结构、所有基类和接口中的方法及其可见性、当前上下文中可见的变量及其类型（在 PHP 中并不总是可能）和很快。

出于这个原因，我认为关系数据库不是一个好的选择。您将如何在其中存储所有类、接口和方法并导航继承层次结构？SharpDevelop 将所有这些作为对象模型存储在内存中（类具有基本类型、接口列表、成员列表等）。8000 项并不是一个很大的数字，如果您将 8000 项存储在关系数据库中，那么它会非常小，以至于数据库引擎无论如何都会将它们全部保存在 RAM 中。

SharpDevelop 将所有完成信息保存在内存中，当您在 SharpDevelop 中打开一个 700K 行的项目时，内存消耗仍然很低。我建议您在打开项目时初始化自动完成数据结构并将它们保存在内存中。正如其他人所说，您必须在用户键入时在后台更新它们（引入新方法、重命名字段等）。

这就是PHP。对于 CSS，类似于您在问题中概述的数据结构似乎非常合理。您可以在 IDE 启动/打开项目/打开第一个 CSS 文件时将其从结构化文件加载到内存中。

* * *

作为结束说明，为 CSS 实现良好的自动完成应该不难。对于 PHP，这将更加困难，您可以从简单的事情开始 - 提供标准库中的 8000 个令牌，并提供*用户*在项目其他地方键入的单词。这种方法被 Sublime Text 之类的编辑器使用，并且效果出奇的好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T14:54:23.830

经过一些人的仔细考虑和建议，数据库是存储自动完成信息的唯一合乎逻辑的解决方案。

在这个练习中，我编写了几个脚本来解析代码/规范以生成自动完成代码。

在这里我意识到，例如，PHP 至少有超过 8000 个函数（=> 自动完成项）。

因此，将这些信息存储在 PHP 文件中并在 IDE 启动时加载是很糟糕的。相反，我的数据库将存储这些信息。

任何特定于项目的自动完成都将存储在单独的数据库表中，有助于避免堵塞主文档表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T02:55:39.590

一般来说，困难的部分是收集要提供的标记并将它们与正确的输入上下文匹配。（在部分键入的行的哪个字符中键入以使用什么来激活，以及在语言类型系统中键入。）相比之下，表示和查询选项列表很容易并且无关紧要。天真的方法非常好。

现有 IDE 所做的一件事是，它们会定期获取您的代码并在后台线程中编译它，使用编译器的特殊版本或模式来生成程序中存在的函数/变量/等的列表。该列表交替地称为“标签文件”、“浏览信息”或“程序数据库”。它存储项目中每个函数的名称、路径、类型，有时还存储一些自动提取的文档；并且为了性能，它需要以增量方式工作，也就是说，避免重新编译没有改变的东西，至少在单个文件的粒度上。它还需要比真正的编译器更能容忍错误，因为它对部分类型的代码进行操作。

然后，当您键入时，编译器会知道自动完成程序应该出现的一些上下文：在您键入“。”之后 对于函数，当您键入 CSS 属性名称的一部分时等。这些取决于模式匹配部分键入的代码。这些没有统一的原则；这只是一堆特殊情况，因语言而异。例如，当您在“case SomeEnum.Foo:”中键入空格时，某些 IDE 会找到封闭的 switch 语句，推断其类型，找到该枚举类型的定义，并将其值作为选项提供。

所有这一切的实际后果是，您永远无法获得自动完成器可以提供的东西的统一表示；相反，您混合了特定于语言的上下文识别技巧、各种上下文的列表以及通过解析提取的更多列表。许多上下文会将几个列表合并在一起；例如，CSS 选择器可以具有任何 HTML 标记名称，或提取类名称/ID，并且在键入 HTML 时也使用 HTML 标记名称列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T21:16:17.353

在我以前的工作中，我们在糟糕的网站上出售制成品（我是一名工程师，所以我发誓这种可怕的事情不是我的错）。有一天，上级决定在我们所有的产品上都需要一个“推荐物品”框。

对此的常识性方法是在每个产品与所有其他产品之间建立一个非常酷且有趣的关系，然后为客户提供有关实际相关产品的相关当前信息。不幸的是，我工作中没有人知道如何让我们的预建网站做到这一点。

相反，他们为每个产品附加了一组五个产品 ID。这些产品 ID 是根据经验丰富的销售人员的推荐和常识进行硬编码的，没有花哨的算法。

这个故事的寓意是，您可能希望专注于您的 IDE 的最终用户只会看到大约十个推荐的事实，所以也许您应该想出一些导致“相当不错”的规则十大潜在变量列表：采用一些基本的语法规则，然后根据代码中的接近度、每个变量的频率等等进行预测。然后你可以把它放在床上，专注于你的 IDE 中更重要的部分。

# wordpress - 如何在 WordPress 仪表板/管理员的帖子列表中按 ID 过滤/排除帖子

> ID：10889077
> 
> 赞同：1
> 
> 时间：2012-06-04T22:08:09.867
> 
> 标签：wordpress, list, dashboard, posts

所以，我要做的是按 ID 过滤 WordPress 仪表板中的帖子列表（我的实际上是自定义帖子类型）。

我正在检查另一个区域（自定义小部件）以查看用户是否可以编辑给定的帖子（不是，我故意避开 WordPress 角色等），如果他们不能，我想从列表中过滤/排除该帖子。

我想拿这个清单：

见图片：[https ://lh6.googleusercontent.com/-nQLDUpoHUig/T84sUXwqNDI/AAAAAAAAB1o/fzZvCkSjawI/w678-h533-k/list_of_posts.PNG](https://lh6.googleusercontent.com/-nQLDUpoHUig/T84sUXwqNDI/AAAAAAAAB1o/fzZvCkSjawI/w678-h533-k/list_of_posts.PNG)

...并过滤掉另一个函数返回的帖子 ID

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T18:32:19.193

好的，所以我已经回答了我自己的问题。这是一些关于我是如何做到的代码。

```
function exclude_list_per_function( $query ) {

    global $wpdb;

    //gets all the post ID's, I know this is a bit of a hack
    $querystr = "
        SELECT $wpdb->posts.ID
        FROM $wpdb->posts
    "; $post_ids = $wpdb->get_results($querystr, OBJECT);

        //Go through each post and pass it to a function that returns true if the user_can, and false if the user_can't
        foreach($post_ids as $post_obj){
            if(!can_user_other_function_view_this_post(get_post($post_obj->ID))){
                //if they_can't, add them to the array to be excluded
                $posts_not_in[]=$post_obj->ID;
            }
        }

        //Set those posts to be excluded from the list.
        $query->set( 'post__not_in', $posts_not_in );
}

add_action( 'pre_get_posts', 'exclude_list_per_function'); 
```

# mysql - 在 mySQL 中将十六进制字符串转换为数字

> ID：10889078
> 
> 赞同：3
> 
> 时间：2012-06-04T22:08:16.923
> 
> 标签：mysql, hex, varchar

我有一列，其中包含值“11B3”。我想编写一个 SQL 语句（在 mySQL 中），用 0x1880 与（&）该值并返回结果。我一直无法将字符串列视为十六进制数字。如有任何帮助，我将不胜感激。

这不起作用：

```
select szVersion,  hex(szVersion), concat("0x",szVersion) 
```

这可以根据需要发挥作用（但不会从数据库中提取：

```
select 0x11bx & 0x1880 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-06-18T14:21:13.790

使用**CONV(szVersion,16,10)**。下面是它按预期工作的证明。

您写道，您期望与以下语句的结果相同：

```
SELECT 0x11B3 & 0x1880;
-> 4224 
```

所以我们知道想要的结果是数字 4224。

现在对表中的数据做同样的事情：

```
CREATE TEMPORARY TABLE temp_hex SELECT '11B3' AS szVersion;
SELECT CONV(szVersion,16,10) & 0x1880 FROM temp_hex;
-> 4224 
```

同样的结果。作品:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:13:08.417

您可以使用 UNHEX(str) 将 Hex 更改为 Text，然后将它们连接起来。

# java - 无法在具有大堆大小的 64 位 Windows 7 中运行 64 位 JVM

> ID：10889081
> 
> 赞同：10
> 
> 时间：2012-06-04T22:08:29.060
> 
> 标签：java, windows, memory-management, 64-bit

这是 64 位`Windows 7 Enterprise`和 64 位 Java 7：

```
java version "1.7.0_04"
Java(TM) SE Runtime Environment (build 1.7.0_04-b20)
Java HotSpot(TM) 64-Bit Server VM (build 23.0-b21, mixed mode) 
```

这发生在使用两者的 shell `C:\Windows\SystemWOW64\cmd.exe`（我错误地认为是 64 位版本）**和**with `C:\Windows\System32\cmd.exe`（我刚刚发现，由 Pulsar 提供，是一个 64 位应用程序，尽管有路径名）。

程序本身很简单：

```
public class Trivial
{
    public static void main(String[] args) {
        System.out.println("total = " + toMB(Runtime.getRuntime().totalMemory()));
        System.out.println("max   = " + toMB(Runtime.getRuntime().maxMemory()));
    }

    private static long toMB(long bytes) {
        return bytes / (1024L * 1024L);
    }
} 
```

我只是在玩弄不同`-Xmx`的`-Xms`论点，看看会发生什么。虽然我会在 64 位 Windows 上使用 64 位 Java，但我几乎可以使用任何我想要的最大大小和初始堆，但这不是正在发生的事情。

`java -Xmx16G -Xms2G Trivial`（例如）工作正常。但是，`java -Xmx16G -Xms4G Trivial`给了我：

```
Error occurred during initialization of VM
Could not reserve enough space for object heap 
```

更奇怪（对我来说），`java -Xmx16G -Xms3G Trivial`给出了一个不同的错误：

```
Error occurred during initialization of VM
Unable to allocate tables for parallel garbage collection for the requested heap size.
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit. 
```

试图区分两者之间的差异`2G`并`3G`查看是否存在发生这种情况的特定大小，我尝试过`java -Xmx16G -Xms2900M Trivial`并且它有效。然后我尝试`-Xms2960M`了，它奏效了。随着`-Xms2970m`JVM崩溃：

```
#
# There is insufficient memory for the Java Runtime Environment to continue.
# Native memory allocation (malloc) failed to allocate 1048576 bytes for E in C:\jdk7u2_64p\jdk7u4\hotspot\src\share\vm\utilities/taskqueue.hpp
# An error report file with more information is saved as:
# C:\Users\QuantumMechanic\Temp\hs_err_pid10780.log 
```

这种情况一直持续到`-Xms2995M`它切换回“无法为并行垃圾收集分配表”消息并坚持下去，因为它`-Xms`进一步增加了。

会发生什么？从`cmd.exe`（甚至是 64 位）启动某些东西是否会施加一些进程大小限制？Windows（或 JVM）是​​否需要一个巨大的内存块？（但是为什么会有不同的消息）？还有什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T22:14:02.087

SysWoW64 指的是 32bit `Windows on Windows 64`。简化：在 64 位 Windows 上运行的 32 位 Windows）。

因此，您明确要求在 32 位 cmd shell 中运行。

请参见：

[http://en.wikipedia.org/wiki/WoW64](http://en.wikipedia.org/wiki/WoW64)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T00:27:20.653

在 64 位系统中，您有 2^63Bytes 的用户地址**空间**，但您仍然只能映射您拥有的实际内存量（物理 + 页面文件 + 映射文件）。

当 JVM 创建堆时，它使用 C`malloc()`来请求初始内存块，然后它将**自行**管理该块。即使堆上根本没有任何对象，对于操作系统来说，块正在被使用。

由于您指定`-Xms`了 ，这是内存池的最小值，JVM 将简单地尝试从操作系统中请求该数量的内存，或者因为它不能满足您的命令而失败。

我想如果你想看看 64 位 Java 的优势。也许您可以尝试打开大于 4GB 的文件进行随机访问并将其映射到 MappedByteBuffer。

# php - 贝宝支付成功后编辑数据库

> ID：10889084
> 
> 赞同：1
> 
> 时间：2012-06-04T22:08:41.010
> 
> 标签：php, vb.net, paypal

我已经有一段时间了，我已经尝试过广泛使用谷歌。

我设置了我的应用程序：它是一个 HWID 系统，仅供付费订阅者使用。

我希望买家能够点击“立即购买”按钮，一旦他们成功付款，他们的信息就会自动添加到应用程序使用的数据库中。这样付款后无需等待。

我知道这是可能的，因为我以前看过它 - 我似乎无法找到它是如何工作的？

我希望这也可以在 php 中完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T23:05:46.303

基本上，您将需要使用 Paypal API -

*   [PDT（支付数据传输）](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/howto_html_paymentdatatransfer)
*   [IPN（即时付款通知）](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_admin_IPNIntro)
*   [贝宝代码示例](https://www.x.com/developers/paypal/documentation-tools/paypal-code-samples)

您指定不希望在付款后等待更新记录。根据您的计划，您应该意识到假设付款已处理（在处理之前）的危险。

有人可以通过多种方式欺骗您的系统，使其认为他们已经使用贝宝付款（实际上他们的付款失败或他们试图进行欺诈）。

因此，如果您只是在使用贝宝付款后根据其返回值更新您的记录，这可能会导致您面临问题。所以我个人不会做你指定的操作，除非我知道付款已经顺利完成，你是怎么做到的？

我会使用 paypal 的 IPN（您甚至可以将其与 PDT 结合起来为您的用户获取早期指标/信息），因此步骤：

1.  获取用于测试的贝宝沙盒帐户 -[从这里](https://developer.paypal.com)
2.  决定是否要使用 paypal 的 PDT 以及 IPN / 只是重定向页面方法
3.  创建您的 IPN 代码（可用变量[查看这些） - 从](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_IPNandPDTVariables)[这里](http://www.micahcarrick.com/paypal-ipn-with-php.html)获取想法- 可以找到此课程：[https ://github.com/Quixotix/PHP-PayPal-IPN](https://github.com/Quixotix/PHP-PayPal-IPN)
4.  在您的 IPN 代码中（一旦它经过验证和验证），您就可以安全地在数据库中添加您想要的用户名/其他内容/通过电子邮件发送您的用户付款已成功。

在我的测试中，您通常会在付款后几秒钟内收到 IPN（有时甚至在用户被重定向之前。但是对于 IPN 需要更长时间处理的时间，您需要让您的用户了解付款进度（您可以使用 PDT数据）或仅在贝宝的重定向页面上显示一条消息。

从贝宝的结尾有很多事情要做，但如果你一步一步地去做，那就没有那么痛苦了。

# firefox - 在 Firefox 和 Selenium 测试中自动化 SSL 客户端证书

> ID：10889085
> 
> 赞同：11
> 
> 时间：2012-06-04T22:08:48.157
> 
> 标签：firefox, ssl, selenium, webdriver, ssl-certificate

是否可以使用 Selenium 和任何浏览器测试客户端 SSL 证书？例如，您可以创建一个 Web 驱动程序并为其提供虚拟证书吗？或者使用准备好的 Firefox 配置文件？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-02T23:11:11.763

*为 SSL 客户端证书创建 Selenium Firefox 测试配置文件*

您需要准备 Selenium 的 WebDriver Firefox 配置文件，其中已导入客户端证书。

首先，您在测试代码中使用以下配置启动 WebDriver：

```
# Pre-seeded Firefox profile directory
profile_directory = os.path.join(os.path.dirname(__file__), "..", "..", "certs", "firefox-client-ssl-profile")
self.assertTrue(os.path.exists(profile_directory))

profile = FirefoxProfile(profile_directory)

# Make sure the client side certificate selection does not interrupt the test
# XXX: What happens in other language versions?
profile.set_preference("security.default_personal_cert", "Select Automatically")
self.driver = WebDriver(firefox_profile=profile)

self.selenium_helper = SeleniumHelper(self, self.driver)
self.selenium_helper.driver = self.driver 
```

启动单元测试并将它们驱动到 Zope 测试服务器启动。使用“import pdb ; pdb.set_trace()”停止测试

现在您的屏幕上应该有一个 Selenium 的“WebDriver”Firefox 实例。

导入您的客户端证书。首选项 > 高级 > 加密 > 查看证书。从您的客户端证书供应中导入“client.p12”。

访问在 Webdriver 的 Firefox 中触发客户端证书对话框的 URL::

```
 https://yourservevr/triggers-client-side-certificate-ssl-handshake 
```

这应该会提示您接受针对测试服务器的客户端证书。手动接受一切。

访问菜单帮助 > 故障排除信息 > 应用程序基础 > 在 Finder 中显示。这将打开保存 Webdriver 的活动配置文件的临时目录。

将 Firefox 配置文件复制`cert8.db`到`key3.db`您的单元测试包 WebDriver 的 Firefox 配置文件的种子文件夹中。这是 Selenium 在测试开始时为 Firefox Web 驱动程序挑选种子的文件夹`firefox-client-ssl-profile`。

中断测试。重新开始测试。再次运行直到暂停。在 Webdriver 的 Firefox 中，在设置中看到它现在包含您在上次运行时在首选项 > 高级 > 加密 > 查看证书中批准的证书。

更多信息

*   [https://trac.macports.org/wiki/howto/MAMP](https://trac.macports.org/wiki/howto/MAMP)

*   [https://support.mozilla.org/en-US/questions/824255](https://support.mozilla.org/en-US/questions/824255)

*   [http://wiki.apache.org/httpd/DebuggingSSLProblems#Finding_out_what_caused_a_handshake_to_fail](http://wiki.apache.org/httpd/DebuggingSSLProblems#Finding_out_what_caused_a_handshake_to_fail)

*   [http://www.openssl.org/docs/apps/s_client.html](http://www.openssl.org/docs/apps/s_client.html)

*   [https://omni.tenderapp.com/kb/omni-certificate-authorities/importing-pkcs12-certificates-in-keychain-for-safarichrome-in-mac-os-x](https://omni.tenderapp.com/kb/omni-certificate-authorities/importing-pkcs12-certificates-in-keychain-for-safarichrome-in-mac-os-x)

*   [http://support.mozilla.org/en-US/kb/Recovering%20important%20data%20from%20an%20old%20profile#w_security-certificate-settings](http://support.mozilla.org/en-US/kb/Recovering%20important%20data%20from%20an%20old%20profile#w_security-certificate-settings) """

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:02:45.990

我不知道这是否有帮助，但您可以更改配置文件中的一些首选项。在 Java 中，您可以这样做。

```
ProfilesIni allProfiles = new ProfilesIni();
    FirefoxProfile profile = allProfiles.getProfile("default"); //change profile name. there is a note somewhere on how to change it
    profile.setPreference(uaKey, uaValue);
    profile.setAcceptUntrustedCertificates(acceptUntrustedSsl); 
```

我不确定这是你需要的。

# css - 我可以在没有行包装元素的情况下开始新的 CSS 表格单元格吗？

> ID：10889089
> 
> 赞同：21
> 
> 时间：2012-06-04T22:09:01.213
> 
> 标签：css, css-tables

给定这样的标记：

```
<div class="a">A</div>
<div class="b">B</div>
<div class="a">A</div>
<div class="b">B</div>
<div class="a">A</div>
<div class="b">B</div> 
```

是否可以将此文档的样式设置为如下所示：

```
|-------|---------|
|       |         |
|   A   |    B    |
|       |         |
|-------|---------|
|       |         |
|   A   |    B    |
|       |         |
|-------|---------|
|       |         |
|   A   |    B    |
|       |         |
|-------|---------| 
```

（如果 A 或 B 中的内容较长，则其邻居将增长以匹配其高度）...</p>

没有任何额外的标记？

我知道给予和`.a`价值只会使这一大行。`.b``display``table-cell`

解决方案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T22:29:28.700

**不是没有 flexbox**，它还没有登陆几个主要的浏览器，似乎是共识。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T22:15:43.473

不，我认为“没有任何额外的标记”是不可能的。它需要：

*   `div``display: table-row;`包含 A anb B“单元格”的包装器
*   在 s 上带有侦听器的 JavaScript `div`，它将确定`max`A 和 B 在每对中的高度并将其设置为较小的

* * *

第二个解决方案：

CSS：

```
.a, .b {
    padding: 0.5em;
    float: left;
}
.a:nth-child(n+1) {
    clear: both;
} 
```

jQuery：

```
$(function() {
    var max_width_a = 0, max_width_b = 0;
    $("div.a").each(function() {
        var elem_a = $(this),
            elem_b = elem_a.next("div.b"),
            height_a = elem_a.height(),
            height_b = elem_b.height(),
            pair = [elem_a, elem_b];

        max_width_a = Math.max(max_width_a, elem_a.width());    
        max_width_b = Math.max(max_width_b, elem_b.width());  
        $(pair).height(Math.max(height_a, height_b));
    }).width(max_width_a);
    $("div.b").width(max_width_b);
}); 
```

我已经更新了你的小提琴。准备好文档，如果要确定动态高度变化，则必须对其进行自定义。

如果我必须解释它是如何工作的，请告诉我。当然，您可以在 CSS 中强制'`div.a`和`div.b`' 宽度，并且不要使用 jQuery 检查最大宽度（然后您将不得不仅确定每对中的最大高度）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T13:45:11.570

我写了一个 jQuery 插件来完成这个。它将`float`布局转换为`display:table`布局并为您处理行。单元格宽度*无需*脚本自动处理（快得多）。它也反应灵敏。它叫破坏者！！哈哈哈哈！。

[svachon.com/blog/wrecker-responsive-equal-height-columns-and-rows/](http://www.svachon.com/blog/wrecker-responsive-equal-height-columns-and-rows/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-26T08:41:29.923

你可以在没有 flexbox 的情况下做到这一点，但你需要使用 nth-child()。看看这个答案：[https ://stackoverflow.com/a/12589629/740836](https://stackoverflow.com/a/12589629/740836)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-05T22:18:18.077

我把它放在评论中，但可能应该只是让它成为一个答案。这就是你如何做同样的事情（使用行）也强制 100% 高度

```
.row {
    background-color: #ccc;
    float: left;
    margin: 10px 0;
    padding: 1em;
    width: 50%;
}

#container_a {
    background-color: blue;
    float: left;
    position: relative;
    right: 50%;
    width: 100%;
}
#container_b {
    background-color: red;
    float: left;
    overflow: hidden;
    position: relative;
    right: 0;
    width: 100%;
}
#column_a {
    float: left;
    left: 50%;
    overflow: hidden;
    position: relative;
    width: 46%;
}
#column_b {
    float: left;
    left: 56%;
    overflow: hidden;
    position: relative;
    width: 46%;
} 
```

和html

```
<div class="row">
    <div id="container_b">
        <div id="container_a">
            <div id="column_a">Lorizzle hizzle dolizzle sit amet, brizzle adipiscing elizzle. Nullam i saw beyonces tizzles and my pizzle went crizzle shizzlin dizzle, fo shizzle mah nizzle fo rizzle, mah home g-dizzle sizzle, suscipit quizzle, i saw beyonces tizzles and my pizzle went crizzle vizzle, arcu. Break yo neck, yall shiznit tortor. Sed eros. Ma nizzle izzle you son of a bizzle dapibizzle turpishizzle. Integizzle check out this velit sed fo.</div>
            <div id="column_b">Vivamizzle sagittis.rttitizzle izzle, boom shackalack hizzle, orci. Integizzle hizzle funky fresh lectus. </div>
        </div>
    </div>
</div>
<div class="row">
    <div id="container_b">
        <div id="container_a">
            <div id="column_a">Lorizzle hizzle dolizzle sit amet, brizzle adipiscing elizzle. Nullam i saw beyonces tizzles and my pizzle went crizzle shizzlin dizzle, fo shizzle mah nizzle fo rizzle, mah home g-dizzle sizzle, suscipit quizzle, i saw beyonces tizzles and my pizzle went crizzle vizzle, arcu. Break yo neck, yall shiznit tortor. Sed eros. Ma nizzle izzle you son of a bizzle dapibizzle turpishizzle. Integizzle check out this velit sed fo.</div>
            <div id="column_b">Vivamizzle sagittis.rttitizzle izzle, boom shackalack hizzle, orci. Integizzle hizzle funky fresh lectus. </div>
        </div>
    </div>
</div>
<div class="row">
    <div id="container_b">
        <div id="container_a">
            <div id="column_a">Lorizzle hizzle dolizzle sit amet, brizzle adipiscing elizzle. Nullam i saw beyonces tizzles and my pizzle went crizzle shizzlin dizzle, fo shizzle mah nizzle fo rizzle, mah home g-dizzle sizzle, suscipit quizzle, i saw beyonces tizzles and my pizzle went crizzle vizzle, arcu. Break yo neck, yall shiznit tortor. Sed eros. Ma nizzle izzle you son of a bizzle dapibizzle turpishizzle. Integizzle check out this velit sed fo.</div>
            <div id="column_b">Vivamizzle sagittis.rttitizzle izzle, boom shackalack hizzle, orci. Integizzle hizzle funky fresh lectus. </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-04T23:36:18.380

不，如果不给每一行一个包装器，这是不可能的。

这是一个带有单个包含包装器（每行）的纯 css 解决方案

```
.row { 
    background-color: #ccc;
    float: left;
    margin: 10px 0;
    padding: 1em;
    width: 50%;
    }
.a {
    float: left;
    width: 45%;
    }
.b {
    float: right;
    width: 45%;
    } 
```

和html

```
<div class="row">
    <div class="a">Mofo break yo neck, yaonna chung fizzle, bizzle dizzle dang dolor boom shackalack augue. Fizzle izzle away sit its fo riz</div>
    <div class="b">Lorizzle hizzle dolizzle sit amet, brizzle adipiscing elizzle. Nullam i saw beyonces tizzles and my pizzle went crizzle shizzlin dizzle, fo shizzle mah nizzle fo rizzle, mah home g-dizzle sizzle, suscipit quizzle, i saw beyonces tizzles and my pizzle went crizzle vizzle, arcu. Break yo neck, yall shiznit tortor. Sed eros. Ma nizzle izzle you son of a bizzle dapibizzle turpishizzle. Integizzle check out this velit sed fo.</div>
</div>
<div class="row">
    <div class="a">Sizzle ullamcorpizzle. Shut the shizzle up sagittizzle dizzle a shiznit. Vestibulizzle you son of a bizzle ipsizzle primis izzle faucibus orci pot et ultrices posuere dope Fo shizzle; Crazy vestibulizzle. Fo shizzle my nizzle habitant morbi tristique senectus ma nizzle netizzle izzle tellivizzle famizzle turpis hizzle. Donizzle tempor hendrerit hizzle. Aliquizzle erat volutpat. </div>
    <div class="b">Vivamizzle sagittis.rttitizzle izzle, boom shackalack hizzle, orci. Integizzle hizzle funky fresh lectus. </div>
</div>
<div class="row">
    <div class="a">Donizzle tempor hendrerit hizzle. Aliquizzle erat volutpat. Things crunk fizzle, scelerisque bizzle, daahng dawg the bizzle, crackalackin shiznit, arcu. Daahng dawg elizzle. Crazy fermentizzle, est izzlot purizzle , bibendizzle sizzle amizzle, fo shizzle vehicula, fo shizzle my nizzle malesuada, shizznit. Aenizzle fizzle ipsizzle izzle est ullamcorpizzle tincidunt. Cool quizzle. Mauris ligula urna, tempizzle shut th</div>
    <div class="b">Mofo break yo neck, yall fo shizzle izzle leo bibendum crackalackin. Vivamizzle shit tortor vizzle away. Brizzle malesuada fo magna. Dang commodo, nisl nizzle go to hizzle egestizzle, magna dolor w</div>
</div> 
```

如果您希望 a 和 b 具有不同的背景颜色，则必须使用 height:100%

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-26T19:54:03.150

我想不出没有行包装器的方法，但是如果您知道外部 div 的确切宽度永远不会改变，则可以实现。我的解决方法是依靠包装器大小将 a 和 b 放在同一行上，然后下一个 a 和 b 将自动被推送，以便它环绕到下一行。但是，如果包装器的宽度缩小，a 和 b 就不会在同一行。

```
<div id="wrapper">
  <div class="a">A</div>
  <div class="b">B</div>
  <div class="a">A</div>
  <div class="b">B</div>
</div>

<style>
#wrapper { width: 500px;}
.a { background-color:green; float:left; width:50%;}
 .b {background-color:red;float:left;width:50%;}
</style> 
```

[http://jsfiddle.net/Lf0arzkn/1/](http://jsfiddle.net/Lf0arzkn/1/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-27T02:34:43.293

是的，`display: contents`如果您在休息之前（或者如果您相应地调整我的解决方案之后）将自己限制在单元格中的一个子项（如文本节点或元素，但实际上是 CSS 框术语），这是可能的。

```
<style>
#d1::after {
    content: "";
    display: table-row;
}
</style>
<div style="display: table">
<div id="d1" style="display: contents">aaaaaaaaaa</div>
<div style="display: table-cell">bbbbbbbbb</div>
</div> 
```

# c# - 有没有办法自动确定语句可能抛出的异常？

> ID：10889099
> 
> 赞同：2
> 
> 时间：2012-06-04T22:09:53.113
> 
> 标签：c#, winforms, visual-studio-2010, exception, intel

是否有一种方法——如果有，它是什么——用于找出特定语句可能引发的异常？

例如，给定以下代码：

```
String substr = SelectedFileName.Substring(DATE_BEGIN_POS, DATE_LENGTH);
return DateTime.Parse(substr); 
```

...我怎么知道第二行可能引发什么异常？您会认为可以突出显示该行，然后从上下文菜单中选择一些内容来提供这个/这些......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T22:15:04.107

据我所知，除了查看 MSDN 之外，没有其他方法可以找到它：http: [//msdn.microsoft.com/en-us/library/1k1skd40.aspx](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)

执行此操作的简单/懒惰/C# 方法只是“捕获（异常 e）”并将其作为通用异常类型处理。无论如何，对于大多数例外情况，您都拥有该类型所需的所有信息。异常处理应该只用于记录/提升，所以恕我直言，知道你的 DateTime.Parse 可以抛出 FormatException 或 ArguementNullException 是没有意义的（对我来说）。

# c# - 无法在 C# 中初始化 XML 序列化程序

> ID：10889104
> 
> 赞同：0
> 
> 时间：2012-06-04T22:10:14.717
> 
> 标签：c#, visual-studio-2010, .net-4.0, xml-serialization

```
[Serializable]
public class appData
{
    public string DataFile { get; set; }
    public string LogFile { get; set; }
    public string UploadURL { get; set; }
    public string RssURL { get; set; }
    public ICollection<Rss.Items> RssFeed = new Collection<Rss.Items>();
}
public class Rss
{
    [Serializable]
    public struct Items
    {
        public string GUID;
        public DateTime Date;
        public string Title;
        public string Description;
        public string Link;
    }
}

internal static appData appData;
private static XmlSerializer xml;
static void Main()
{
    xml = new XmlSerializer(typeof(appData));
} 
```

当我在 VS 2010 调试器中运行它时，它会抛出错误`There was an error reflecting type 'FOL.appData'.`，是的，我的代码确实有更多，但这是基本部分。这些都在同一个程序集中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T22:16:04.277

接口不能被序列化——你需要改变它：

```
public ICollection<Rss.Items> RssFeed = new Collection<Rss.Items>(); 
```

对此：

```
public Collection<Rss.Items> RssFeed = new Collection<Rss.Items>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T22:12:58.367

看看你得到的内部异常。它会告诉您在序列化时遇到问题的字段/属性。

**您可以通过使用[XmlIgnore()]**属性装饰它们来从 xml 序列化中排除字段/属性。

我不认为 XmlSerializer 使用**[Serializable]**属性，所以我怀疑这是问题所在。

**注意：**
所有要序列化的类都必须有一个无参数的构造函数，因此接口不能被序列化。

# spring - Spring Hibernate JSP插入错误

> ID：10889108
> 
> 赞同：0
> 
> 时间：2012-06-04T22:10:40.690
> 
> 标签：spring, hibernate, jsp

我正在尝试插入我使用休眠/Spring设置的数据库表中，但出现以下错误

“布局”类没有“主题名称”属性

错误来自线路

输入类型="text" name="SubjectName" size="50" value="${fn:escapeXml(layout.SubjectName)}"

但我清楚地在我的“布局”模型文件中将 SubjectName 定义为字符串，在我的 hbm.xml 文件中定义为

属性名称=“主题名称”类型=“字符串”列=“主题”/

我也无法从数据库中选择，尽管它没有给出错误。我觉得它来自同一个根本问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:17:34.243

由于 Hibernate 非常依赖约定，我会检查以确保属性名称是“subjectName”，而不是“SubjectName”。

Java 的编码约定和 Java Bean 标准规定成员名称应以小写字符开头并提供 getter/setter 访问。所以私有数据成员“foo”会有“getFoo”和“setFoo”方法。

您使用的是 Hibernate 字段还是属性访问？我建议现场访问。

# c++ - C++：二维数组，如何找到它们的列中差异最大的行？

> ID：10889111
> 
> 赞同：1
> 
> 时间：2012-06-04T22:11:05.357
> 
> 标签：c++, multidimensional-array

我有一个具有可变行数和两列的二维数组，我应该找到其列中差异最大的行。更清楚地说：我得到了 n 天的最低和最高温度，我应该找到温度差异最大的那一天（如果两天有同样的差异，那么我应该给出只有第一个）。但是，我从来没有使用过多维数组，所以我不确定我是否可以这样做：a[i][1]-a[i][0]？（a[i] 为当天的指数，a[1] 为当天最高温度，a[0] 为最低）

我的这部分代码如下所示：

```
int difference (int n, float a[maxn][2]) {
    float difference=a[0][1]-a[0][0];
    int index=0;
    for (int i=0; i<n; i++) {
        if (a[i][1]-a[i][0]>difference) {
            index=i;
            a[i][1]-a[i][0]=difference; //HERE I get the error message: lvalue required as left operand of assignment
        }
    }
    return index+1; //to get the day with the largest difference 
```

如果我不把它作为一个作业来做，但是我用 == 使值等于差异，那么它说“语句没有效果”，所以我在想也许我不允许做我正在尝试的事情去做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T22:15:20.753

1.  您正在隐藏您的函数名称 - 您可能希望其中之一`difference`成为其他名称。
2.  `=`仅适用于您尝试分配给左侧的变量。尝试：

    ```
    difference = a[i][1] - a[i][0]; 
    ```

# perl - 我如何使用 Hypnotoad 作为 http 服务器

> ID：10889114
> 
> 赞同：2
> 
> 时间：2012-06-04T22:11:16.967
> 
> 标签：perl, web, mojolicious

我正在尝试使用 hypnotoad 服务器来提供一些静态 html 页面。我需要做什么配置，或者我应该将我的静态 html 文件保存在哪里，以便 hypnotoad 选择它们。

谢谢！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T23:29:50.817

IIRC [Mojolicious](http://mojolicio.us)提供的服务器（其中 Hypnotoad 就是其中之一）从名为`public`. 您所需要的只是启动服务器的最基本的应用程序。我这应该足够简单使用，

```
#!/usr/bin/env perl
use Mojolicious::Lite;

# needed to setup the usual index.html landing
any '/' => sub {
  shift->render_static('index.html');
};

app->start; 
```

并运行`hypnotoad myapp.pl`（假设此脚本保存为文件夹`myapp.pl`并位于与文件夹相同的位置`public`）。

# wordpress - Wordpress Mobile - 更改部分 URL 而不是重定向到首页？

> ID：10889115
> 
> 赞同：2
> 
> 时间：2012-06-04T22:11:16.917
> 
> 标签：wordpress, redirect, mobile

我被要求在我没有帮助建立的客户站点上进行一些维护工作。该网站是使用 Wordpress 构建的，移动设备上的任何用户都将被重定向到更适合移动设备的网站版本。问题是，如果移动用户点击任何指向原始站点的链接（主页、内页等），无论是什么链接，他们总是会被重定向到移动站点的首页。我要做的是将当前 URL 的一部分从 .ca 替换为 .mobi，以便移动用户直接重定向到原始页面的移动版本，而不是移动主页。

我看了[如何用 JavaScript 替换部分 URL？](https://stackoverflow.com/questions/4664707/how-to-replace-part-of-the-url-with-javascript)并尝试了马特和胡安的建议，但他们都没有奏效，反而导致错误。我希望有人可以在这里帮助我。

目前，这是 header.php 中的代码，用于检测用户是否在移动设备上，

```
 /* --- DETECT MOBILE BROWSER ---*/

$useragent=$_SERVER['HTTP_USER_AGENT'];
if(preg_match('/android|avantgo|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i',$useragent)||preg_match('/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i',substr($useragent,0,4))){
    header('Location: http://sitenamehere.mobi');
}
/* --- END DETECT MOBILE BROWSER ---*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:22:22.880

位置标头需要包含完整的 URL - 目前它只包含主页的 URL。因此，您需要获取当前 URL 并将 .ca 替换为 .mobi，然后将 location 标头更改为此。这应该是正确的：

```
header('Location: ' . str_replace('.ca', '.mobi', $_SERVER["SERVER_NAME"] . $_SERVER["REQUEST_URI"])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T19:15:02.963

感谢 Eliot 的帮助，我能够找到一种方法来获得所需的内容并解决 414 请求 URI 错误。

```
$cope_link = ($_SERVER["HTTP_HOST"] . $_SERVER["REQUEST_URI"]); //get the current link
$cope_new = substr($cope_link, 15); //grab only what is after ".ca/", found length through trial and error
header('Location: http://sitenamehere.mobi/'.$cope_new); //send in the new URL 
```

我在 browserstack 上对其进行了测试，它似乎可以正常工作。再次感谢艾略特为我指明了正确的方向。

# http - Youtube gdata 播放列表 httprequest

> ID：10889117
> 
> 赞同：0
> 
> 时间：2012-06-04T22:11:18.100
> 
> 标签：http, request, gdata

嘿，我有一个程序向 YouTube 执行一个 JSON 视频列表的 GET 请求。

工作原理：对 YouTube 执行 GET 请求，获取特定用户的所有视频的 JSON 列表。我正在使用的当前示例网址是：

用户名是我设置的变量。

```
 HttpUriRequest request = new HttpGet("http://gdata.youtube.com/feeds/api/videos?orderby=published&author="+username+"&v=2&alt=jsonc"); 
```

什么不起作用：对 YouTube 执行 GET 请求，以获取特定播放列表中所有视频的 JSON 列表。

```
 HttpUriRequest request = new HttpGet("http://gdata.youtube.com/feeds/api/playlist/PL827BC9167705BBAB?alt=jsonc&v=2"); 
```

播放列表请求有什么问题？

# android - android：如何检测水平和垂直手势线

> ID：10889118
> 
> 赞同：5
> 
> 时间：2012-06-04T22:11:28.157
> 
> 标签：android, gesture, android-gesture

我有一些我想用线条连接的对象。用户应该能够通过简单的线条手势来做到这一点。我使用 GestureOverlayView 并阅读了那篇文章[http://developer.android.com/resources/articles/gestures.html](http://developer.android.com/resources/articles/gestures.html)，其中说如下

> 方向：指示下方视图的滚动方向。在这种情况下，列表垂直滚动，这意味着任何水平手势（如 action_delete）都可以立即被识别为手势。以垂直笔划开头的手势必须包含至少一个要识别的水平分量。换句话说，简单的垂直线不能被识别为手势，因为它会与列表的滚动冲突。

这就是我的问题 - 我想画水平线和垂直线

现在我有一个 OnGesturePerfomedListener，它可以进行正常的手势识别，另外还有一个 GestureOverlayView.OnGestureListener，我可以在其中检测线条。但现在我想画一条虚线——也是垂直和水平的。如果我能像在 OnGesturePerformedListener 中那样获得完整的手势，而不是像在 onGestureListener 中那样获得虚线的每一个笔划，那就容易多了。

有什么想法可以轻松解决这个问题吗？是否有一种方法可以在手势完成时调用，即使它未被识别？我还尝试使用 GestureDetector.OnGestureListener，我现在用它来检测 longPress，但它对解决这个问题没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-15T20:01:48.477

在其他线程中找到了一个类似的解决方案，这可能对您（以及可能遇到此问题的任何其他人）有用。这很可能需要认真修改以适应您的目的，但我认为它会让您接近：

```
//Swipe direction detection constants
private static final int SWIPE_MIN_DISTANCE = 120;
private static final int SWIPE_MAX_OFF_PATH = 250;
private static final int SWIPE_THRESHOLD_VELOCITY = 200;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_main);

    //Gesture detection
    this.gestureDetector = new GestureDetectorCompat(this,this);
    gestureDetector.setOnDoubleTapListener(this);
}

//On gesture...
@Override
public boolean onSingleTapConfirmed(MotionEvent e) {
    return true;
}

@Override
public boolean onDoubleTap(MotionEvent e) {
    return true;
}

@Override
public boolean onDoubleTapEvent(MotionEvent e) {
    return true;
}

@Override
public boolean onDown(MotionEvent e) {
    return true;
}

@Override
public void onShowPress(MotionEvent e) {

}

@Override
public boolean onSingleTapUp(MotionEvent e) {
    return true;
}

@Override
public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
    return true;
}

@Override
public void onLongPress(MotionEvent e) {

}

@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {

    try {
        // right to left swipe
        if (e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE
                && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
            //DO SOMETHING...
        }
        // left to right swipe
        else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE
                && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
            //DO SOMETHING...
        }
        // top to bottom swipe
        if (e1.getY() - e2.getY() > SWIPE_MIN_DISTANCE
                && Math.abs(velocityY) > SWIPE_THRESHOLD_VELOCITY) {
            //DO SOMETHING...
        }
        // bottom to top swipe
        else if (e2.getY() - e1.getY() > SWIPE_MIN_DISTANCE
                && Math.abs(velocityY) > SWIPE_THRESHOLD_VELOCITY) {
            //DO SOMETHING...
        }
    } catch (Exception e) {
        return false;
    }

    return true;

}

@Override
public boolean onTouchEvent(MotionEvent event) {
    this.gestureDetector.onTouchEvent(event);
    return super.onTouchEvent(event);
} 
```

# ruby - PHP 的 .= 的 Ruby 等价物是什么？

> ID：10889120
> 
> 赞同：0
> 
> 时间：2012-06-04T22:11:39.193
> 
> 标签：ruby, string

> **可能重复：**
> [Ruby 等效于 PHP 的“.=”（点等于）运算符](https://stackoverflow.com/questions/9706903/ruby-equivalent-of-phps-dot-equals-operator)

我想创建一个变量`include_items`并继续向它添加字符串。

在 PHP 中它将是...

```
$include_items  = "<td>first item</td>";
$include_items .= "<td>second item</td>";
$include_items .= "<td>third item</td>"; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T22:13:17.853

尝试[`<<`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-3C-3C)看看它是如何工作的。您也可以使用`+=`, 但这会不必要地创建额外的对象。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T22:12:46.090

[`+`](http://ruby-doc.org/core-1.9.3/String.html#method-i-2B)是Ruby的[连接运算符](http://ruby-doc.org/core-1.9.3/String.html#method-i-2B)`String`，因此：**`+=`**

```
irb(main):001:0> foo = "asdf"
=> "asdf"
irb(main):002:0> foo += " and stuff"
=> "asdf and stuff" 
```

# android - Android：网络连接不工作时应用程序崩溃

> ID：10889121
> 
> 赞同：0
> 
> 时间：2012-06-04T22:11:41.440
> 
> 标签：android

我的 Android 游戏需要从我的服务器获取有关玩家的一些信息。我通过一个简单的 HTTP GET 请求来执行此操作，该请求放在一个线程中。

我正在使用的代码如下。当我的服务器启动并运行应用程序时，它工作正常。但是，当我的服务器没有响应（因为它很忙或关闭）时，应用程序就会崩溃。

我不想让应用程序崩溃，而是向用户显示“网络繁忙”消息并将他送回主要活动，但不知道该怎么做。

我试图在 Catch 部分中创建一个对话框，认为这会显示我的服务器是否已关闭，但它没有显示并且应用程序崩溃。

有什么想法可以解决这个问题吗？

```
public void run(){      
        String urlstring = "http://www.mydomain.com/?param=test"; 
        try{                        
                URL url = new URL(urlstring);
                HttpURLConnection con = (HttpURLConnection) url.openConnection();
                BufferedReader reader = new BufferedReader(new InputStreamReader(con.getInputStream()));
                line = reader.readLine();   
        }
        catch(Exception e){
            Dialog d2 = new Dialog(context);
            d2.setContentView(R.layout.dialog2);
            d2.show();
        } 
} 
```

**更新**：我想我在查看 logcat 时发现了问题。即使服务器关闭，我的 BufferedReader 也返回一个空字符串，我试图在以后使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T22:48:22.857

所以首先，你应该检查你的反应。这是最好的方法

```
if (urlConntection.getResponseCode() == HttpURLConnection.HTTP_OK) {
  // method body
}
else {
   /// get some info for example with Toast or Dialog
} 
```

您应该决定`runOnUiThread`在要更新时`UI`使用`Non-UI thead`

```
YourActivity.this.runOnUiThread(new Runnable() {
            @Override
            public void run() {

            }
        }); 
```

或使用`Handler`或`AsyncTask`

当您决定使用`AsyncTask`时，您可以简单地显示几乎所有内容

```
protected void onProgressUpdate(String... data) {
  if(data[0].equals("error")) {
    Toast.makeText(Activity.this, "Connection is busy!", Toast.LENGTH_SHORT).show(); 
} 
```

也简单地显示`Dialog`。由你决定。

# php - WordPress 编辑 php get_template_part() 和 get_post_format() 函数

> ID：10889132
> 
> 赞同：4
> 
> 时间：2012-06-04T22:13:15.480
> 
> 标签：php, wordpress

我只想加载没有标题、日期、评论等信息的帖子内容。有没有办法只抢帖子？

```
<?php if ( have_posts() ) : ?>
   <?php while ( have_posts() ) : the_post(); ?>
   <?php get_template_part( 'content', get_post_format() ); ?>
   <?php endwhile; ?>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T23:36:23.497

只需更换：

```
 <?php get_template_part( 'content', get_post_format() ); ?> 
```

和：

```
 <?php the_content(); ?> 
```

前者正在寻找诸如**content-status.php**或**content-aside.php 之**类的东西，或者最有可能的是，如果是普通的旧“帖子”，则在主题根目录中寻找**content.php 。**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-27T15:33:16.777

你可以更换

```
 <?php get_template_part( 'content', get_post_format() ); ?> 
```

和

```
 <?php get_template_part( 'content', 'myformat' ); ?> 
```

`content-page.php`并编辑带有名称的副本`content-myformat.php`，您可以在其中删除`the_title()`行。

# c# - 如何在 C# 的 sql 命令中传递两个变量？

> ID：10889138
> 
> 赞同：0
> 
> 时间：2012-06-04T22:14:01.283
> 
> 标签：c#, sql, ssis

真的是一个简单的问题，我有两个变量“one_hour_ago”和“current_time”，我需要在我的sql命令中传递这两个变量，例如：

```
string commandString = "SELECT * from myTable where time between one_hour_ago and current_time"; 
```

这是我所拥有的，但出现语法错误

```
string commandString = "SELECT * from myTable where TS between ' and /" + one_hour_ago + "'" + current_time + "/"; 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T22:29:26.313

```
string sqlString = "SELECT * FROM myTable WHERE time BETWEEN  @before AND @current_time"; 
SqlCommand oCmd = new SqlCommand(sqlString , connString);
oCmd.Parameters.AddWithValue("@before", date_before);
oCmd.Parameters.AddWithValue("@current_time", currentTime); 
```

where`date_before`和`currentTime`是您传递给方法的参数。

这应该处理sql注入的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:50:46.100

```
create procedure Proc_name (@param1 varchar(100), 
@param2 varchar(100), 
@param3 varchar(100), 
@param4 varchar(100)) 
as 
insert into table1 values(@param1, @param2, @param3, @param4) 
```

然后从您的代码中（使用 ADO.NET 给出 ac# 示例）

```
using (SqlConnection connection = new SqlConnection(connectionString))
{
// Create the command and set its properties.
SqlCommand command = new SqlCommand();
SqlCommand command = new SqlCommand 
   ("Proc_name", connection); 

command.CommandType = CommandType.StoredProcedure;

// Add the input parameters and set the properties.
SqlParameter parameter1 = new SqlParameter();
parameter.ParameterName = "@Param1";
parameter.SqlDbType = SqlDbType.NVarChar;
parameter.Direction = ParameterDirection.Input;
parameter.Value = param1;

SqlParameter parameter2 = new SqlParameter();
parameter.ParameterName = "@Param2";
parameter.SqlDbType = SqlDbType.NVarChar;
parameter.Direction = ParameterDirection.Input;
parameter.Value = param2;

// Add the parameter to the Parameters collection. 
command.Parameters.Add(parameter1);
command.Parameters.Add(parameter2);

// Open the connection and execute the reader.
connection.Open();
SqlDataReader reader = command.ExecuteNonQuery();

reader.Close();
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-04T22:20:29.297

```
string commandString = "SELECT * FROM myTable WHERE time BETWEEN '" + one_hour_ago + "' AND '" + current_time + "'"; 
```

**编辑：**这正是 OP**明确**要求的，要获得更好（正确）的答案，请查看 Jane Doe 的...

**编辑 2：**对于那些对我投反对票的无知者，“one_hour_ago”和“current_time”显然不是用户输入的字符串（而是他自己的`DateTime`变量），并且在任何情况下都可以在使用它们之前简单地做到完全万无一失`TryParse`（而且sql参数在这方面也做了**所有**的事情，没有额外的魔力）。现在，字符串连接 sql cmd**是**错误的，但我没有**建议**，我只是纠正**了他自己的**方法。而且我本**可以**警告他有关 sql 注入的问题，但是看到他在简单的字符串操作方面遇到了问题，我只是判断它是**最少的**他的问题（现在），并认为这只会让他更加困惑。

# php - PHP图像水印仅在页面上显示图像

> ID：10889142
> 
> 赞同：0
> 
> 时间：2012-06-04T22:14:11.783
> 
> 标签：php, watermark

我正在测试一个脚本，在我的网页中为图像添加水印。

该脚本工作正常，图像是水印，但我的问题是页面上只显示图像。

一旦我将脚本添加到我的页面，就像网页被转换为我正在添加水印的图像一样。

我认为这是因为 header("content-type: image/jpeg"); 从代码。

我需要在我的网页上为图像添加水印，但我也需要显示网页的其余部分。

这是怎么做到的？我很困惑这是如何工作的。

我正在使用的脚本来自[这里](http://www.cafewebmaster.com/image-watermark-php)

这是我正在使用的代码：

```
<?php  

$main_img       = "Porsche_911_996_Carrera_4S.jpg"; // main big photo / picture
$watermark_img  = "watermark.gif"; // use GIF or PNG, JPEG has no tranparency support
$padding        = 3; // distance to border in pixels for watermark image
$opacity        = 100;  // image opacity for transparent watermark

$watermark  = imagecreatefromgif($watermark_img); // create watermark
$image      = imagecreatefromjpeg($main_img); // create main graphic

if(!$image || !$watermark) die("Error: main image or watermark could not be loaded!");

$watermark_size     = getimagesize($watermark_img);
$watermark_width    = $watermark_size[0];  
$watermark_height   = $watermark_size[1];  

$image_size     = getimagesize($main_img);  
$dest_x         = $image_size[0] - $watermark_width - $padding;  
$dest_y         = $image_size[1] - $watermark_height - $padding;

// copy watermark on main image
imagecopymerge($image, $watermark, $dest_x, $dest_y, 0, 0, $watermark_width, $watermark_height, $opacity);

// print image to screen
header("content-type: image/jpeg");   
imagejpeg($image);  
imagedestroy($image);  
imagedestroy($watermark);  

?> 
```

**注意**：我从数据库中获取图像路径，因此我无法对图像文件名进行硬编码，因为它是动态的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T22:18:41.990

如果你是第一次这样做，这有点令人难以置信，但是一旦你看到它是如何工作的，它就真的很简单。;)

您需要一个生成图像的脚本（例如 image.php），然后您的主脚本会引用该图像（例如`<img src="image.php">`）。一个请求/脚本不可能同时返回文档和图像。

（PS。这实际上是可能的，但它涉及将图像编码为一种非常奇怪的`src`属性。你不想这样做，相信我。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T22:18:42.273

我相信您对它的工作原理感到困惑：上面的水印生成代码并不意味着包含在页面生成脚本/逻辑中。相反，它需要在它自己的 URL 后面可以访问，然后通过链接`<img src="./path/to/script"/>`到您想要包含该图像的站点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T22:18:58.363

将此脚本与您的“主网站”脚本完全分开。在您的网站上，使用`<img>`以该水印脚本作为来源的标签。

你不能`content-types`像你看起来做的那样结合两个不同的。如果您希望出现“网页”，则`content-type`需要`text/html`. 如果您只想显示图像，则`content-type`需要`image/*`.

# expressionengine - 带有 Playa 字段的 EE2 嵌入式模板

> ID：10889147
> 
> 赞同：1
> 
> 时间：2012-06-04T22:14:33.410
> 
> 标签：expressionengine

希望这是一个简单的解决方案。我很确定我很接近。所以这里...

先上代码。

```
{exp:channel:entries channel="client" url_title="{embed:client_name}"}              
    <tr>
    {exp:playa:parents channel="project"}
    <td>
        {proj_name}
    </td>
    <td>
    {proj_job_number} 
        {job_number}
    {/proj_job_number}
    </td>
    <td>
        {entry_date format="%m/%d/%Y"}
    </td>   
    <td>
    {proj_producer} 
        {producer_name}
    {/proj_producer}
    </td>
    <td>
    {proj_vendor}
        {vendor_name}
    {/proj_vendor}
    </td>
    <td>
        <a href="{proj_folder_zip}"><i class="icon-download"></i></a>
    </td>
    {/exp:playa:parents}
    </tr>
{/exp:channel:entries} 
```

这是我正在使用的嵌入式模板的代码。我正在尝试从项目通道条目中返回每个项目通道条目以及其他 playa 字段值。我能够正确返回结果，但是我正在尝试将返回的值格式化为 html 表。所以最后我的问题是......就标记/标记/条件而言，我需要做什么，这样我就可以在每个 html 表格行中显示一个项目频道条目。现在，playa 字段的所有条目都显示在一个表格单元格中，最后一行包含所有表格单元格。如果需要，我可以发布更多代码，或者澄清我遗漏的任何内容。非常感谢您对此问题的任何帮助。

干杯!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T13:11:51.733

您需要将标签`<tr>`放在*标签*`{exp:playa:parents}`对内。

# maven - 将 WAR 文件从一个 Maven 项目传递到另一个项目以与 Embedded Jetty 一起使用的最佳方式？

> ID：10889149
> 
> 赞同：1
> 
> 时间：2012-06-04T22:14:56.993
> 
> 标签：maven, maven-2, solr, jetty

我认为这很简单，但有问题：

*   Project1 是战争类型。它创建了一个完整的 webapp .war 文件，包括一些 Apache 模块（solr/lucene）和我们的一些自定义代码。
*   Project2 是一个现有的应用程序。它需要启动嵌入式 Jetty 来对 Project1 的 war 文件进行查询。（见下面的代码）

主要问题：

*   Project2在实例化Jetty时，需要传入WAR文件的完整路径，但是每次都会改变。Maven 将版本号添加到 Project1 的 war 文件中。

集会救援？

*   我能够让自定义程序集工作，但无法摆脱 Project1 的版本控制标记。

但我总是以 Project1-1.4.1-20120530.233546-2.war 结束。它在一个更方便的地方，但名字仍然很奇怪。

Project2中的码头代码：

```
 // Context
    WebAppContext webapp = new WebAppContext();
    webapp.setContextPath("/");
    String jettyHome = System.getProperty( "jetty.home", ".." );
    String fullWarName = ...;    // Project1's WAR file. This path always changes
    webapp.setWar( fullWarName );
    // Server
    Server server = new Server( kPort ); // TODO: get from config
    server.setHandler(webapp);
    server.start();
    server.join(); 
```

其他注意事项：

*   我意识到有一个 maven-jetty 插件，但我认为这在这里不合适。它似乎是针对单元测试的，而且我们的应用程序堆栈在运行时不使用 maven 来启动服务。
*   我也知道 Solr 有一个完全嵌入式的版本，不需要 Web 容器，但它已经被弃用了一段时间，使用起来不是一个好主意。

有没有更好的方法来重构这个项目？也许这不是“行家之道”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:52:36.430

事实证明我不需要一个程序集（我在内部得到的建议），而是在主 pom.xml 中有一些更简单的东西。此外，在这里解开战争的包装被证明是一个好主意。

在 Project1 的 pom.xml 的顶部，我有：

```
 <groupId>com.my.group</groupId>
 <artifactId>project-one</artifactId>
 <version>1.2.3-SNAPSHOT</version>
 <packaging>war</packaging> 
```

这靠近 Project2 的 pom.xml 的底部

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-dependency-plugin</artifactId>
  <executions>
    <execution>
      <id>unpack-webapp</id>
      <phase>package</phase>
      <goals>
        <goal>unpack</goal>
      </goals>
      <configuration>
          <artifactItems>
           <artifactItem>
            <groupId>com.my.group</groupId>
            <artifactId>project-one</artifactId>
            <version>1.2.3-SNAPSHOT</version>
            <type>war</type>
            <overWrite>true</overWrite>
            <outputDirectory>${project.build.directory}/webapps/project-one</outputDirectory>
           </artifactItem>
         </artifactItems>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

然后在启动 Jetty 时，我有：

```
webapp.setWar( "target/webapps/project-one" ); 
```

我仍然认为某些 Jetty 设置可能存在问题，但我认为这是正确的方向。

# hadoop - Hadoop MapReduce 中 Mapper/Reducer 的设置和清理方法

> ID：10889152
> 
> 赞同：21
> 
> 时间：2012-06-04T22:15:12.117
> 
> 标签：hadoop, mapreduce

每个 mapper 和 reducer 任务中是否分别调用了 setup 和 cleanup 方法？还是在整个映射器和减速器作业开始时只调用一次？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-05T01:01:29.580

每个任务都会调用它们，因此如果您有 20 个映射器正在运行，则将为每个任务调用 setup/cleanup。

~~一个问题是 Mapper 和 Reducer 的标准 run 方法不会捕获 map / reduce 方法周围的异常 - 因此，如果在这些方法中抛出异常，则不会调用 clean up 方法。~~

**2020 年编辑**：如评论中所述，2012 年（Hadoop 0.20）的此声明不再正确，清理被称为 finally 块的一部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-06T01:39:43.683

一个澄清是有帮助的。setup/cleanup 方法用于在任务级别进行初始化和清理。在一个任务中，首先通过调用 setup() 方法进行初始化，然后对 map() [或 reduce()] 函数的所有调用都将完成。之后，将在退出任务之前对 cleanup() 方法进行另一次调用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-15T14:59:12.953

它被每个 Mapper 任务或 Reducer 任务调用。这是hadoop代码。

```
public void run(Context context) throws IOException, InterruptedException {
    setup(context);
    try {
      while (context.nextKey()) {
        reduce(context.getCurrentKey(), context.getValues(), context);
      }
    } finally {
      cleanup(context);
    }
  } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-19T07:47:32.867

根据[mapreduce 文档](https://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapreduce/Reducer.html) ，每个 Mapper 和 Reducer 任务都会调用 setup 和 cleanup。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-21T23:22:30.957

在减速器上，您可以在工作中执行 job.setNumReduceTasks(1); 这样减速器的设置和清理将只运行一次。

# sql-server - 将数据存储在文本文件中，而不是 SQL Server

> ID：10889159
> 
> 赞同：2
> 
> 时间：2012-06-04T22:15:45.533
> 
> 标签：sql-server, database, text-files

我打算同时使用 SQL Server 和简单的文本文件来保存我的数据。

诸如`Users data`将存储在 SQL Server 中的信息，每个用户的 RSS 馈送将存储在以用户 ID 作为标题的文件夹中，在这个文件夹中，我可以放置要存储数据的文件，每个文件都可以只取 20 行，如果超过 20 行，我会创建一个新文件。

当我需要重新读取这些数据时，我只需调用用户文件夹中的最后一个文件。

我需要知道使用这种方法的优点和缺点是什么？

谢谢

# php - 使用 template.php 主题覆盖 Drupal 7 中的文章输出

> ID：10889164
> 
> 赞同：0
> 
> 时间：2012-06-04T22:16:11.843
> 
> 标签：php, html, drupal

我基本上想修改我的文章的输出，通过放置一个

* * *

在我的页面上列出的每篇文章之间。

我已经覆盖了我的主题 template.php 中的其他函数，如下所示

```
function mytheme_preprocess_html(&$variables) {
    drupal_add_css('http://fonts.googleapis.com/css?family=Gudea', array('type' => 'external'));
} 
```

我正在为文章寻找类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:48:32.940

将您的主题复制`node.tpl.php`到一个名为的文件中，并在文件底部`node--article.tpl.php`添加一个。`&lt;hr&gt;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T22:18:02.527

你看过视图模块吗？查看[http://drupal.org/project/views](http://drupal.org/project/views)并使用它为您列出内容。视图可以为此内容创建页面显示。然后，您可以将样式应用于 Views 生成的 HTML，这将允许您在列出的节点之间放置分隔边界。Views 还提供了“first”和“last”类，因此您不会对最后一个元素应用边框。

# php - 如果生日在 MySQL 中存储为“日期”类型，您将如何确定它是否是 PHP 中用户今天的生日？

> ID：10889169
> 
> 赞同：2
> 
> 时间：2012-06-04T22:16:40.430
> 
> 标签：php, mysql, sql, date

如果生日在 MySQL 中存储为“日期”类型，您将如何确定它是否是 PHP 中特定用户今天的生日？

是否只是获取生日列值，在 上进行爆炸`-`，然后检查日期和月份是否与 PHP 中的当前日期和月份匹配？或者有没有更简单、不那么粗暴的方法呢？

另外，对于今天生日的`SELECT` **所有**用户，您会使用什么查询？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-04T22:22:52.040

由于您需要排除年份，您可以使用`MONTH`和`DAY`SQL 函数，如下所示：

```
SELECT * FROM table WHERE MONTH(birthday) = MONTH(NOW()) AND DAY(birthday) = DAY(NOW()); 
```

不要忘记在此列上添加索引，否则会随着数据的增长而严重降低性能。

在 PHP 中，您可以只使用[date](http://us2.php.net/manual/en/function.date.php)函数：

```
if (date('m-d', strtotime($row['date'])) == date('m-d'))
    //-- Today is my birthday! Hooray! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T22:25:02.813

使用 MySQL 的[日期函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)从用户的出生日期中提取月份和日期，并将它们与从当前日期中提取的相同值进行比较：

```
SELECT * FROM table WHERE
    DAY(birthday) = DAY(CURDATE()) AND
    MONTH(birthday) = MONTH(CURDATE()); 
```

这样可以确保重要的值 - 月份和日期 - 匹配，无论年份如何。希望有帮助！

PS：您可能很想将其`DAYOFYEAR`用作更简单的版本。不。闰年会把你搞砸的。

**编辑：**看起来在你的 where 子句中使用日期函数[真的会减慢你的速度](http://netfactory.dk/2004/12/13/mysql-date-functions-and-indexes/)，尤其是在大表中。请参阅下面我的最后一条评论，以了解更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T22:21:40.117

您还可以在查询中添加一个值，`1`如果今天是他们的生日。这使它变得更容易，因此在您的 PHP 中您不必进行比较。

```
SELECT
    user_table.*,
    (MONTH(user_table.birth_date_column) = MONTH(now()) 
        AND DAY(user_table.birth_date_column) = DAY(now())) as birthday_today
FROM user_table 
```

其他答案显示查询以获取今天生日的用户

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T22:26:21.347

查找生日与当前日期的月份和日期相同的人：

```
SELECT * from people 
WHERE month(birthDate) = month(curdate()) 
AND dayofmonth(birthDate) = dayofmonth(curdate()) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T22:25:55.933

```
select * from table
where month(BirthDate) = month(curdate())
and day(BirthDate) = day(curdate()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-02T10:55:48.673

```
For Get User list whose birthday is today in mysql field datatype must be date 

$Toaday = '%'.date('m-d').'%';

$query = " select client_id,name,mobile_no from client where is_visible = 1 AND birth_date LIKE '$Toaday' "; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-04-05T05:52:36.190

查找员工今天的生日。我们可以用这个

SELECT * FROM crm_employee WHERE MONTH( dob ) = MONTH( CURDATE( ) ) 和 DAYOFMONTH( dob ) = DAYOFMONTH( CURDATE( ) )

# cocos2d-iphone - Cocos2d 2.0 - 忽略对图层/精灵透明区域的触摸

> ID：10889170
> 
> 赞同：16
> 
> 时间：2012-06-04T22:16:44.650
> 
> 标签：cocos2d-iphone

我有一个应用程序，其中有几个由具有透明度的 PNG 图像创建的图层。这些图层都在屏幕上彼此重叠。当用户点击图层的非透明区域时，我需要能够忽略对图层透明区域的触摸，并且能够检测为触摸......参见图片......

![在此处输入图像描述](../Images/30fd62136db667488f18aad4452a8715.png)

我怎么做？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T08:09:01.657

在这里，您有一个可能的解决方案。

在 CCLayer 上实现一个扩展并提供这个方法：

```
- (BOOL)isPixelTransparentAtLocation:(CGPoint)loc 
{   
    //Convert the location to the node space
    CGPoint location = [self convertToNodeSpace:loc];

    //This is the pixel we will read and test
    UInt8 pixel[4];

    //Prepare a render texture to draw the receiver on, so you are able to read the required pixel and test it    
    CGSize screenSize = [[CCDirector sharedDirector] winSize];
    CCRenderTexture* renderTexture = [[CCRenderTexture alloc] initWithWidth:screenSize.width
                                                                     height:screenSize.height
                                                                pixelFormat:kCCTexture2DPixelFormat_RGBA8888];

    [renderTexture begin];

    //Draw the layer
    [self draw];    

    //Read the pixel
    glReadPixels((GLint)location.x,(GLint)location.y, kHITTEST_WIDTH, kHITTEST_HEIGHT, GL_RGBA, GL_UNSIGNED_BYTE, pixel);

    //Cleanup
    [renderTexture end];
    [renderTexture release];

    //Test if the pixel's alpha byte is transparent
    return (pixel[3] == 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:33:41.193

如果 Lio 的解决方案不起作用，您可以添加透明精灵作为您的孩子，将其放置在您的非透明区域下方，大小与此非透明区域相同，并通过这个新的透明精灵恢复所有触摸，但不能通过原始精灵。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-06T16:58:27.223

这是我对您要求的解决方案，让我知道它是否有效

在 CCMenu 上创建一个名为透明文件 CCMenu+Tranparent.h 的类别

```
#import "CCMenu.h"

@interface CCMenu (Transparent)
@end 
```

文件 CCMenu+Tranparent.m

```
#import "CCMenu+Transparent.h"
#import "cocos2d.h"
@implementation CCMenu (Transparent)
-(CCMenuItem *) itemForTouch: (UITouch *) touch{
    CGPoint touchLocation = [touch locationInView: [touch view]];
    touchLocation = [[CCDirector sharedDirector] convertToGL: touchLocation];

    CCMenuItem* item;
    CCARRAY_FOREACH(children_, item){
        UInt8 data[4];

        // ignore invisible and disabled items: issue #779, #866
        if ( [item visible] && [item isEnabled] ) {
            CGPoint local = [item convertToNodeSpace:touchLocation];
            /*
             TRANSPARENCY LOGIC
             */
            //PIXEL READING 1 PIXEL AT LOCATION

            CGRect r = [item rect];
            r.origin = CGPointZero;

            if( CGRectContainsPoint( r, local ) ){
                if([NSStringFromClass(item.class) isEqualToString:NSStringFromClass([CCMenuItemImage class])]){
                    CCRenderTexture* renderTexture = [[CCRenderTexture alloc] initWithWidth:item.boundingBox.size.width * CC_CONTENT_SCALE_FACTOR()
                                                                                     height:item.boundingBox.size.height * CC_CONTENT_SCALE_FACTOR()
                                                                                pixelFormat:kCCTexture2DPixelFormat_RGBA8888];

                    [renderTexture begin];
                    [[(CCMenuItemImage *)item normalImage] draw];

                    data[3] = 1;
                    glReadPixels((GLint)local.x,(GLint)local.y, 1, 1, GL_RGBA, GL_UNSIGNED_BYTE, data);

                    [renderTexture end];
                    [renderTexture release];
                    if(data[3] == 0){
                        continue;
                    }

                }
                free(data);
                return item;
            }

        }
    }
    return nil;
}

@end 
```

这将检查像素以返回 CCMenuItem。它在这里工作正常..如果您遇到任何问题，请告诉我

-Paresh Rathod Cocos2d 情人

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-09-10T10:33:18.610

对我有用的解决方案是使用 Sprite 表。我使用 TexturePacker 创建精灵表。使用 TexturePacker 创建精灵表的步骤： 1\. 将所有图像 (.png) 文件加载到 TexturePacker。2\. 数据格式选择coco2d，纹理格式选择PVR。3\. 将精灵表加载到您的代码中并从精灵表中提取图像。

详细描述可以在[这里](http://www.cocos2d-x.org/wiki/TexturePacker)找到。

# asp.net - ASP.NET 表单身份验证

> ID：10889171
> 
> 赞同：1
> 
> 时间：2012-06-04T22:17:07.573
> 
> 标签：asp.net

我已经创建了 ASP.NET 项目并将其连接到数据库。在我刚刚添加了登录和注册控件之后。就像是：

```
 <asp:Login ID="Login1" runat="server" 
        DestinationPageUrl="~/Users/UserAccount.aspx">
    </asp:Login> 
```

实际上它有效！它进行注册和登录操作。但是如何？代码在哪里，SQL语句在哪里？我没有看到任何与此相关的内容。你能解释一下它是如何工作的吗？如果我需要额外的信息，我该如何修改注册控制。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:42:11.253

这些内置控件已经是框架的一部分。如果您想让它更像一个自定义注册过程，请查看此链接。

[http://msdn.microsoft.com/en-us/library/aa478962.aspx](http://msdn.microsoft.com/en-us/library/aa478962.aspx)

它还可以帮助您了解正在发生的事情。

# facebook - Facebook 图形 API 不会返回朋友的工作历史

> ID：10889175
> 
> 赞同：1
> 
> 时间：2012-06-04T22:17:18.170
> 
> 标签：facebook, facebook-graph-api

让我们排除明显的...

**我的 Facebook 应用程序请求以下权限**：`user_work_history, friends_work_history`

...所以通常的嫌疑人（权限不足）*不是*我问题的根源。

**问题：**

以下图形 api 调用完美运行：`/me/friends?fields=name,work`

我得到了姓名、身份证、工作经历等。就像你期望的那样。

**但**

当我用我`/me`的一个应用程序用户（已经授权该应用程序）的用户 ID 替换时，我只能看到名称和 ID（没有工作或教育领域）。

为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:25:52.947

原因是您使用的访问令牌不是属于您要查看的用户的访问令牌。在 linter 工具 (https://developers.facebook.com/tools/lint) 中查看您的令牌并查看它属于谁。

当您确实获得该个人的用户访问令牌时，您可以使用它来获取他们的朋友。您不需要指定`/{userid}/friends?fields=name,work`（尽管您可以），`/me/friends?fields=name,work`因为访问令牌属于该用户 ID。

# c# - C#：从 Excel 工作表复制单元格范围并粘贴到 HTML 电子邮件正文中

> ID：10889178
> 
> 赞同：0
> 
> 时间：2012-06-04T22:17:33.143
> 
> 标签：c#, .net, visual-studio-2010, excel, copy-paste

我有一张 Excel 表格。数据在几列和几行中非常简单。对单元格进行了一些格式化（例如..颜色、粗体等）。我正在使用 c# 发送电子邮件。我希望基本上复制 Excel 工作表的内容并将其粘贴到电子邮件正文中，并保持格式不变。

这甚至可能吗？我说的是BS吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:24:39.277

这不是一件容易的事。我的意思是你必须检查每个单元格中每个字符的样式！发送excel表格不是更容易吗？如果您提供更多关于为什么要这样做的信息，我们可能会建议一些不会那么耗时的替代方案！

编辑：

最简单的就是使用`Workbook.SendMail()`方法。

编码：

```
Excel.Workbook myWorkbook = xlApp.Workbooks["Book1.xls"];`
string recipients = "ElvisPresley@gmail.com";
string subject = "No need to open the attachment, you lazy ****";
bool returnReceipt = false;    
myWorkbook.SendMail(recipients, subject, returnReceipt); 
```

请注意，收件人参数实际上是作为 System.Object 键入的，因此如果您有多个收件人，则传入的参数可以是 string[]。

# javascript - jquery 自动完成。跟踪值而不是标签

> ID：10889183
> 
> 赞同：0
> 
> 时间：2012-06-04T22:18:09.057
> 
> 标签：javascript, jquery, jquery-ui, jquery-autocomplete

我有一个 jquery 自动完成字段，我想在同一个输入字段中添加多个值。在我在这里看到的示例中，[http://jqueryui.com/demos/autocomplete/#multiple](http://jqueryui.com/demos/autocomplete/#multiple)值和标签是相同的，因此在选择事件中的内容可以正常工作。但是，就我而言，当用户选择名称时，我希望输入框显示标签，但我想在提交表单时发布值。为了解决这个问题，我在表单中添加了一个隐藏字段，并有一个单独的数组来获取该值，但我的问题是当用户退格退出该值时。它仍然在我的阵列中。任何想法如何解决这个问题？或者也许是更好的解决方案？

```
var friend_data = [{"label":"JOhn Doe","value":"12345"},{"label":"Jane Doe","value":"123456"}];

$( "#friends" )
    // don't navigate away from the field on tab when selecting an item
    .bind( "keydown", function( event ) {
        if ( event.keyCode === $.ui.keyCode.TAB && $( this ).data( "autocomplete" ).menu.active ) {
            event.preventDefault();
        }
    }).autocomplete({
        minLength: 0,
        //source: friend_data,
        source: function( request, response ) {
            // delegate back to autocomplete, but extract the last term
            response( $.ui.autocomplete.filter(
                friend_data, extractLast( request.term ) ) );
        },
        delay: 0,
        autofocus: true,
        focus: function(event, ui) {
            return false;
        },
        select: function( event, ui ) {
            var terms = split( this.value );

            // remove the current input
            terms.pop();
            // add the selected item
            terms.push( ui.item.label );
            friend_id_list.push( ui.item.value );
            console.log(friend_id_list);
            // add placeholder to get the comma-and-space at the end
            terms.push( "" );
            this.value = terms.join( ", " );
            console.log(this.value);
            return false;
        }   
    })
    .data( "autocomplete")._renderItem = function( ul, item ) {
        var fb_pic_path = '<img src="http://graph.facebook.com/' + item.value + '/picture?type=square">' ;

        return $( "<li></li>" )
        .data( "item.autocomplete", item )
        .append( "<a>" + fb_pic_path + item.label + "</a>" )
        .appendTo( ul );
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T00:35:32.533

有点不愿意发布这个，b / c我是javascript / jquery的新手，这可能不是最好的方法，但如果你和我一样新手并且只是在寻找有用的东西，这是我现在使用什么来保持同步。

```
$("#friends").keyup(function(event) {    
    var friend_label_count = this.value.split(",").length - 1;
    var friend_value_count = friend_id_list.length;
    if (friend_label_count < friend_value_count) {
        friend_id_list.pop();
        }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T02:04:33.427

我倾向于在指向匹配值的标签上创建另一个键控数组，并从自动完成`select`功能中填充它。

我不会使用每个选择填充数据，而是通过拆分条目并与该索引的内容（哈希）进行比较，`friend_id_list`创建要作为提交或模糊的一部分传递回服务器的值列表。`#friends`

例如：*（NB未经测试）*

```
var selections = {}; //instantiated earlier
var friend_id_list = [];
<snip>
select: ...
        selections[ui.item.label] = ui.item.value;
        ...

$('#friends').blur( function(){
    var entries = $(this).val().split(', *'); // in case space character removed..
    var friend_id_list = [];
    for(entry in entries){
        if(selections[entry]) friend_id_list.push(entry);
    }
    $('#myhiddenfield').val(friend_id_list.join(','));
}); 
```

任何与先前自动完成的值不匹配的内容都将被删除。

# guid - 如何跨多个服务器生成唯一和 [伪] 顺序 GUID？

> ID：10889185
> 
> 赞同：0
> 
> 时间：2012-06-04T22:18:16.477
> 
> 标签：guid, uniqueidentifier

我们正在寻找根据这个问题的标题生成 ID 的解决方案。

为了澄清：

*   我们正在使用几个不同的 SQL Server 和应用程序服务器，其中任何一个都可以生成 id
*   我们不想使用中央 ID 生成服务/机器
*   我们不想使用按位转换为 Guids 的 DateTimes，因为有这么多机器可能会发生冲突。

一种可能的解决方案是为每台机器分配一个起始位置、跳过和偏移量，就像这个答案：[https ://stackoverflow.com/a/7916720/175127](https://stackoverflow.com/a/7916720/175127)

这很容易成为我们的解决方案，但我希望你们中的某个人可能有一个更优雅的解决方案，可以更好地解决以下一些问题：

*   一台机器最终可能会分配更多的 ID 并远远领先于其他机器。我们可能会每天重新同步所有机器以拥有一个新的起始位置，以帮助它们保持同步，但这可能会导致大量空的、未使用的 ID。我们希望尽量减少这种情况。

*   我们希望看看是否有可能减少每台机器的外部依赖。在开始时，他们每个人都必须找出有多少台机器，起点是什么，并且他们必须决定唯一的偏移量。我认为有某种形式的中央控制来管理这些事情可能是不可避免的。

到目前为止，我能想到的最好的方法是拥有一台中央机器，一次分发一系列 Id。其他机器根据需要抓取范围块。如果中央机器出现故障，那么我们使用 start-skip-offset 系统作为后备。

有什么很酷的想法吗？

# java - 从 Java 中编译外部 .java 文件

> ID：10889186
> 
> 赞同：12
> 
> 时间：2012-06-04T22:18:19.307
> 
> 标签：java, file, class, compilation

我正在制作一个可以编写 .java 文件的工具，然后（希望）将这些文件编译为 .class 文件。在一个过程中，用户选择一个文件目录，其中写入了多个 .java 文件。现在我想让程序编译这些 Java 文件。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-04T22:20:27.030

`JavaCompiler`是你的朋友。[在此处](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)查看文档

这里有一个关于如何使用编译器 API 的示例

```
JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
DiagnosticCollector<JavaFileObject> diagnostics = new DiagnosticCollector<>();
StandardJavaFileManager fileManager = compiler.getStandardFileManager(diagnostics, null, null);
Iterable<? extends JavaFileObject> compilationUnits = fileManager.getJavaFileObjectsFromStrings(Arrays.asList("YouFileToCompile.java"));
JavaCompiler.CompilationTask task = compiler.getTask(null, fileManager, diagnostics, null,
        null, compilationUnits);
boolean success = task.call();
fileManager.close(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-05T01:26:22.720

如果代码是从 JRE 运行的，则将`JavaCompiler`是。`null`它需要一个 JDK，其中包括`tools.jar`.

# android - 在 Web/移动应用程序中使用 OAuth/OpenID

> ID：10889188
> 
> 赞同：3
> 
> 时间：2012-06-04T22:18:32.163
> 
> 标签：android, openid, google-api, oauth-2.0, web.py

我目前正在设计一项服务，该服务将是一半 Web 应用程序，一半是 android 应用程序。每个用户都需要能够使用 openID 帐户从 Android 应用程序或 Web 应用程序登录。我希望首先以 Google 为目标，以便与 Android 轻松集成，但稍后我还需要一些 OAuth 东西，以便与 Google 联系人集成。

我遇到的问题是如何对用户进行身份验证。我计划的结构是服务器（可能使用 web.py，虽然现在很灵活）以 JSON 格式为客户端提供数据，无论客户端是 javascript 浏览器客户端还是 android 客户端。但是，每次调用都需要确保允许客户端访问该数据。

*   跨平台标准化的最简单方法是什么？
*   我应该在登录后使用会话系统进行身份验证吗？可以在 Android 应用程序中使用吗？否则，我是否应该为每个请求简单地向谷歌进行身份验证？
*   从应用程序进行身份验证时，应该在哪里进行身份验证，通过服务器还是直接从应用程序？在这种情况下，身份验证令牌应该存储在哪里？（我假设对于一个直接的 webapp，令牌应该只存储在用户数据库的表中？）

很抱歉出现了这么多问题，但我还没有真正在网上找到任何可以很好地阐明这些问题的资源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T03:00:44.003

只要您使用 HTTP，平台就无关紧要。您可以使用相同形式的身份验证和/或会话。唯一的区别是，在 Andorid 上，您可以使用平台的 AccountManager 获取身份验证令牌，而无需在 Google 的登录页面中输入用户名和密码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T14:29:28.387

授权 (OAuth) 和身份验证 (OpenId) 之间存在细微差别。确保你知道你在做什么。

# vim - Vim tabularize 插件可以匹配每列的多个表达式吗？

> ID：10889191
> 
> 赞同：2
> 
> 时间：2012-06-04T22:18:50.483
> 
> 标签：vim, plugins, alignment

我想使用 vim tabularize 插件来对齐以下类型的代码：

```
buy <- blabla   
buy[,cash := blablabla]
pr.tmp <- matrix(blaaaaaaaaa) 
```

如下：

```
buy       <- blabla 
buy[,cash := blablabla]
pr.tmp    <- matrix(blaaaaaaaaa) 
```

我的问题是 tabularize 是否可以匹配同一列中的“<-”和“:=”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T23:00:40.120

使用分支：

```
:Tabularize /<-\|:=/ 
```

看`:help \|`

# java - 用Java控制Windows Media Player

> ID：10889194
> 
> 赞同：3
> 
> 时间：2012-06-04T22:19:00.423
> 
> 标签：java, android, wmp

我见过一些可以使用 Android 设备或类似设备控制 WMP 的 Java 服务器。但是如何制作控制 WMP 的服务器呢？你需要什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:11:26.767

Windows Media Player 支持[UPnP](http://en.wikipedia.org/wiki/Universal_Plug_and_Play)用于服务器发现和[DLNA](http://en.wikipedia.org/wiki/Digital_Living_Network_Alliance)用于远程控制。

假设您想创建一个客户端应用程序（Android 或任何使用 Java 的应用程序）来远程控制 Windows Media Player：

*   使用 UPnP 以[零配置](http://en.wikipedia.org/wiki/Zero_configuration_networking)发现网络上可用的 WMP 服务器。

*   使用DLNA远程控制网络上可用的WMP服务器，例如显示播放列表、控制音量等。

Java 库实现 UPnP/DLNA：[Cling](http://4thline.org/projects/cling)

希望这是有道理的。

# gwt - gwt-rpc 延迟窗口刷新

> ID：10889195
> 
> 赞同：0
> 
> 时间：2012-06-04T22:19:09.850
> 
> 标签：gwt, window, refresh, gwt-rpc

我的应用程序的 onModuleLoad() 中有以下代码：

```
 Window.addWindowClosingHandler(new ClosingHandler() {
        @Override
        public void onWindowClosing(ClosingEvent event) {
            event.setMessage("If you choose to close, application will sign out");
        }   
    });

    //sign out on close
    Window.addCloseHandler(new CloseHandler<Window>() {
        @Override
        public void onClose(CloseEvent<Window> event) {
            sendLogout();
        }
    }); 
```

sendLogout() 函数如下所示：

```
// Set up the callback object.
    AsyncCallback<String> callback = new LogoutCallback(this);
    // Make the call to the survey service.

    SurveySystemService.Util.getInstance().logout(details, callback); 
```

“细节”是一些对象。

关闭窗口时它工作得很好，但是如果我尝试刷新页面，它不会注销。我的想法是，由于调用是异步的，因此在重新启动模块之前它没有完成将消息发送到服务器。

我尝试过： 1\. 在 onClose 方法中创建和调用回调。2\. 使用计时器检查是否拨打了电话。3\. Endless loos 检查与上述相同（我绝望了）。

在所有这些解决方案中，程序都会到达回调创建，但服务器从未收到任何东西。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T23:49:18.633

您可以在页面首次加载时随时调用注销。由于 Web 的无状态特性，GWT 应用程序不会知道有人点击刷新或只是导航到页面之间的区别。

您可以将 ID 变量存储在会话存储中，该变量应一直保留到浏览器窗口或选项卡关闭为止。如果在应用程序启动时 ID 变量存在于会话存储中，您可以使用它来触发注销。

# google-apps-script - 在 Google Docs 文档（不是电子表格）中安装/运行脚本？

> ID：10889196
> 
> 赞同：2
> 
> 时间：2012-06-04T22:19:10.790
> 
> 标签：google-apps-script, google-docs

API 文档状态

> 如果有一个文档，则使用 DocumentApp.getActiveDocument() 访问用户当前打开的文档（否则返回 null）。当（且仅当）当前脚本已安装（或以其他方式保存）在现有文档的范围内时，活动文档才可用。

到目前为止，我能够在电子表格中安装脚本并使用它来操作任何文档，但我想知道是否可以直接在文档中安装脚本。这将具有将脚本菜单放在需要的地方的优势。电子表格解决方案对我来说似乎是一个奇怪的解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:25:40.370

在此处添加问题/功能请求：

[http://code.google.com/p/google-apps-script-issues/issues/list](http://code.google.com/p/google-apps-script-issues/issues/list)

DocumentApp.getActiveDocument() 看起来像建议框问题，即文档存在但该功能不可用。是检查某个功能是否存在需求的好方法。

# c# - 当使用 IEnumerable.ToDictionary() 时，对于字典来说什么太大了？

> ID：10889197
> 
> 赞同：2
> 
> 时间：2012-06-04T22:19:14.883
> 
> 标签：c#, performance, design-patterns, dictionary, ienumerable

说，在我的方法中，我传入了几个 IEnumerables（可能是因为我要从数据库或其他东西中获取一堆对象）。

然后对于objects1中的每个对象，我想从objects2中提取一个具有相同object.iD的diffobject。

我不想要多个枚举（根据 resharper），所以我可以将 objects2 变成一个以 object.iD 为键的字典。然后我只为每个枚举一次。（第二个问题）这是一个好的模式吗？

（主要问题）什么太大了？这在什么时候会是一个可怕的模式？多少个对象对于字典来说是太多对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T22:31:25.293

在内部，它将被阻止拥有超过 20 亿件物品。由于事物在字典中的定位方式相当复杂，如果我要处理十亿个项目（例如，如果是 16 位值，则为 2GB），我希望将它们存储在数据库中并使用数据访问代码检索它们。

我不得不问，Objects1 和 Objects2 来自哪里？听起来好像您可以在数据库级别执行此操作，并且比在 C# 中执行此操作要高效得多！

您可能还想考虑使用 KeyValuePair[]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:34:36.583

字典存储 KeyValuePair 的实例

如果您想要做的只是在给定它们的字典中查找值`Key`，那么是的，Dictionary 是要走的路 - 他们很快就能做到这一点。`Value`但是，如果您想使用它的or 属性对项目进行排序或搜索，最好[使用 else](https://stackoverflow.com/questions/2744767/c-sharp-dictionary-performance)。

就大小而言，它们会随着变大而变慢，值得做一些基准测试以了解它如何影响您的需求，但您始终可以根据它们的类型或范围将值拆分到多个字典中。[http://www.dotnetperls.com/dictionary-size](http://www.dotnetperls.com/dictionary-size)

值得注意的是，当您说“然后我只为每个枚举一次”时，这有点不正确。`objects1`将被完全枚举，但字典`objects2`不会被枚举。只要您使用`Key`来检索值，它就会散列键并使用结果来计算存储值的位置，因此字典可以很快得到您要求的值。理想情况下使用 int ，`Key`因为它可以直接将其用作散列。您可以枚举它们，但最好使用`objects2Dictionary[key]`.

# command-line - 使用 ROBOCOPY 或批处理脚本从不同的子目录复制 .doc 文件

> ID：10889200
> 
> 赞同：0
> 
> 时间：2012-06-04T22:19:27.887
> 
> 标签：command-line, cmd, command-prompt, robocopy

我目前有这个文件夹结构：

```
C:\Quarter1\Folder100\Q1Review100.doc
C:\Quarter1\Folder101\Q1Review101.doc 
  ...
C:\Quarter1\Folder120\Q1Review120.doc 
```

除了没有 .doc 文件外，我还有另一个目录遵循相同的结构：

```
C:\Quarter2\Folder100\
C:\Quarter2\Folder101\
…
C:\Quarter2\Folder120\ 
```

我的问题是，如何编写批处理脚本或使用 ROBOCOPY 以便可以从以下位置复制所有 .doc 文件：

```
C:\Quarter1\Folder100\*.doc
C:\Quarter1\Folder101\*.doc
…
C:\Quarter1\Folder120\*.doc 
```

到目录：

```
C:\Quarter2\Folder100\
C:\Quarter2\Folder101\
…
C:\Quarter2\Folder120\ 
```

但不是 Q1Review100.doc 作为名称，而是我想重命名`Q1`为`Q2`，因此应将文件复制并重命名为 Q2Review100.doc。

如果我需要进一步澄清这一点，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:26:49.453

您可以发出两个命令：

1.  复制所有文件：
    `robocopy C:\Quarter1 C:\Quarter2 /S`
2.  将所有文件名中的 Q1 替换为 Q2：
    `for /f "tokens=* delims= " %i in ('dir /b /s "c:\Quarter2\*.doc"') do Set LIST=%i& set LIST | ren "%~fi" "%LIST:Q1=Q2%"`

注意：如果您将其写入批处理文件，请将 %i 替换为 %%i

# file - 在 Sencha Touch 2 中使用外部 XTemplate

> ID：10889202
> 
> 赞同：2
> 
> 时间：2012-06-04T22:19:32.987
> 
> 标签：file, external, sencha-touch-2

我需要使用包含 XTemplate 内容的外部文件。

基本上，我想使用没有“奇怪”解决方案的外部文件，例如使用“XTemplate.from”，或者将 XTemplate 对象放入变量中。像这样的东西：

列表.html

```
<div>Name: #{object.name} </div> 
```

文件.js

```
...
content = Ext.create('Ext.panel.Panel', {
    fullscreen: true,
    scroll: 'vertical',
    data : planetEarth,
    tpl: "index.html"
});
... 
```

基本上，一旦我为 tpl 定义了一个文件，它应该会自动编译。

任何想法？谢谢！

# .htaccess - 和

> ID：10889207
> 
> 赞同：3
> 
> 时间：2012-06-04T22:20:19.310
> 
> 标签：.htaccess, mod-rewrite

没什么好说的，因为我想试着简单地解释一下。

有没有办法创建一个 .htaccess 来做这些事情：

> example.com > **http://www。**例子.com
> 
> *http://example.com > http:// *www* **。**例子.com*
> 
>  **https://example.com* > https:// **www。**例子.com*

 *我的意思是这样的：

1.  如果它的http，它去`http + www`
2.  如果它的 https 它转到`https + www`
3.  如果域前面**没有任何**内容，则转到`http + www`

我试图让它与另一个代码一起工作：

```
RewriteCond %{HTTP_HOST} ^[^.]+\.[^.]+$
RewriteRule ^(.*) http://www.%{HTTP_HOST}/$1 [R=301] 
```

该代码几乎可以正常工作，唯一**错误**的是，当它的**https://example.com**重定向到**http://** *www。*例子.com

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T23:02:14.940

将您的代码替换为：

```
RewriteCond %{HTTPS}s on(s)|
RewriteCond %{HTTP_HOST} ^[^.]+\.[^.]+$
RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T02:34:27.100

如果这不起作用，您可以为 https 和 http 编写单独的规则：

```
RewriteCond %{HTTPS} !on
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ http://www.xplayrs.com/$1  [L]

RewriteCond %{HTTPS} on
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ https://www.xplayrs.com/$1  [L] 
```*

# iphone - _property 和 self.property 之间的区别

> ID：10889216
> 
> 赞同：3
> 
> 时间：2012-06-04T22:20:50.670
> 
> 标签：iphone, objective-c, xcode, ipad, properties

在处理属性时，我对正确的约定有点困惑。我将通过一个例子来说明我的问题。因此，从下面的示例中，我知道功能上“self.loan = self.loan + 250.00;” 与“_loan = _loan + 250.00;”相同 或者不是吗？我在网上看到了许多教程，它们可能使用也可能不使用这两种方法来访问属性。那么使用_loan和self.loan到底有什么区别（我知道self.loan和[self setLoan:]是一样的）

```
//ClassA.h
@interface ClassA: UIViewController
@property double loan;
@end

//ClassA.m
@implementation ClassA
@synthesize loan = _loan;

-(void)doSomething{
  self.loan = self.loan + 250.00; //Exhibit A
  _loan = _loan + 250.00; // Exhibit B 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T22:28:59.950

`_loan`是一个变量，给它赋值并没有特别的副作用。

`self.loan = self.loan + 250.00`本质上与编写`[self setLoan:[self loan] + 250.00]`方法相同，调用的方法可能会做其他事情，而不是简单地设置或获取变量的值。这些方法所做的额外事情取决于您是编写它们的自定义版本（setter 和 getter）还是使用`@synthesize`它们来创建它们，如果您使用，则取决于您在声明`@synthesize`中应用的属性。`@property`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:30:31.527

当你写出@synthesize 贷款 = _loan; 它基本上是简写，说你正在合成的是一个私人成员，它类似于下面的详细编码方式：

```
//ClassA.h
@interface ClassA: UIViewController {
    double _loan;
}

@property double loan;
@end

//ClassA.m
@implementation ClassA
@synthesize loan = _loan; 
```

以这种方式写出它是一种很好的做法，这样您就可以在类代码中清楚地使用“_”来表示您的私有成员，但是在将其作为属性公开给不应显示的其他类时。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-05T01:54:31.723

访问属性时，永远不要使用对变量的直接引用。始终在代码中使用 self.property。

如果您使用 _property，则不会使用您的 getter 和 setter。在这种情况下，您只是在浪费 @synthesize 使用。

self.loan = self.loan + 250.00; //展览A

这应该是正确的做法。

# google-docs-api - 如何获取 google docs 演示文稿的嵌入 url？

> ID：10889218
> 
> 赞同：0
> 
> 时间：2012-06-04T22:21:22.143
> 
> 标签：google-docs-api

看起来最近嵌入已发布的谷歌文档演示文稿发生了细微的变化。

iframe 嵌入的 url 更改为：

```
https://docs.google.com/present/embed?id=[doc_id] 
```

到：

```
https://docs.google.com/presentation/embed?id=[doc_id] 
```

看起来有些旧文档仍然需要旧的嵌入 url，而新文档需要新的 url。所以给定一个 doc_id 有没有办法（使用 API）来获取你应该使用的嵌入 url？

**更新**：

浏览了一下，从修订版来看，旧文档的链接标签带有`rel=http://schemas.google.com/docs/2007#publish`，其中包含`https://docs.google.com/present/embed?id=[doc_id]`，但在新文档上，该值是`https://docs.google.com/feeds?xoauth_requestor_id=[user_email]`。

所以问题是我可以假设如果`rel=http://schemas.google.com/docs/2007#publish`包含的链接`https://docs.google.com/feeds?xoauth_requestor_id=[user_email]`那么我需要使用这个 url`https://docs.google.com/presentation/embed?id=[doc_id]`吗？

还是只是 API 没有在修订版中包含正确的值？（因为我认为这只是最近才发生的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:24:05.740

嵌入链接具有`rel="http://schemas.google.com/docs/2007#embed"`并且 URL 可能看起来像`https://docs.google.com/presentation/d/PRESENTATION_ID/preview`. 但是，您不应手动构建这些 URL，而应使用`rel="http://schemas.google.com/docs/2007#embed"`.

该`xoauth_requestor_id`参数不会包含在嵌入链接中，因为仅在使用 2-legged OAuth 并模拟其他用户时才需要该参数。如果这是您选择的授权机制，您必须在添加身份验证令牌时自己添加这些参数。

# javascript - 设置/获取 textNode 值的方法

> ID：10889223
> 
> 赞同：3
> 
> 时间：2012-06-04T22:21:45.053
> 
> 标签：javascript, dom, textnode

有很多方法可以检索/更改文本节点的值：

*   *不是* [`textnode.value`](https://developer.mozilla.org/en/XUL/Attribute/textnode.value)，只有[XUL](https://developer.mozilla.org/en/XUL)的东西
*   [`textContent`](http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-textContent)^([ [mdn](https://developer.mozilla.org/en/DOM/Node.textContent) ])在 IE9 之前不支持
*   [`data`](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-72AB8359), 继承`Text`自`CharacterData`接口
*   [`nodeValue`](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-F68D080)^([ [mdn](https://developer.mozilla.org/en/DOM/Node.nodeValue) ])从`Node`界面

我倾向于使用`.data`. 推荐它们中的哪一个 - 它们都返回相同的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:33:36.973

如果您有 TEXT_NODE [type 3] textContent 将返回 nodeValue ( [MDN](https://developer.mozilla.org/en/DOM/Node.textContent#Description) )：

> 如果节点是 CDATA 节、注释、处理指令或文本节点，则 textContent 返回此节点内的文本（nodeValue）。

[CharacterData 与文本节点 ( MDN](https://developer.mozilla.org/En/DOM/CharacterData) )的 nodeValue 相同。

> Text、Comment 和 CDATASection 都实现了 CharacterData，而 CharacterData 又实现了 Node。

对于文本节点，它们是相同的。

jQuery (Sizzle) 使用 nodeValue：

```
/**
 * Utility function for retreiving the text value of an array of DOM nodes
 * @param {Array|Element} elem
 */
var getText = Sizzle.getText = function( elem ) {
    ...
    if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {
        // Use textContent || innerText for elements
        if ( typeof elem.textContent === 'string' ) {
            return elem.textContent;
        } else if ( typeof elem.innerText === 'string' ) {
            // Replace IE's carriage returns
            return elem.innerText.replace( rReturn, '' );
        }
        ...
    // TEXT_NODE
    } else if ( nodeType === 3 || nodeType === 4 ) {
        return elem.nodeValue;
    }
    return ret;
}; 
```

所以使用数据很好，但 textContent 仅是 IE9+ 并且有点慢。

# objective-c - NSInputStream 不调用 Delegate (stream:handleEvent:)

> ID：10889230
> 
> 赞同：5
> 
> 时间：2012-06-04T22:22:33.033
> 
> 标签：objective-c, ios, sockets, nsstream

我在网上搜索了很长时间......我没有找到我的问题的答案，所以我决定在这里发布。我尝试使用 NSStream 建立与 NNTP 服务器的连接。

在测试程序中，我打开流并发送消息。委托方法 ( `stream:handleEvent:`) 为输出流 ( `NSStreamEventOpenCompleted`, `NSStreamEventHasSpaceAvailable`) 调用了两次，但从**不**为输入流调用！

为什么输入流从不调用委托？有任何想法吗？

基本上，代码如下所示：

初始化和打开流：

```
CFReadStreamRef tmpiStream;
CFWriteStreamRef tmpoStream;

CFStreamCreatePairWithSocketToHost(NULL, (__bridge CFStringRef)SERVER, PORT, &tmpiStream, &tmpoStream);

iStream = (__bridge NSInputStream *) tmpiStream;
oStream = (__bridge NSOutputStream *)tmpoStream;

[iStream setDelegate:self];
[oStream setDelegate:self];

[iStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[oStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

[iStream open];
[oStream open]; 
```

发信息：

```
NSData *data = [[NSData alloc] initWithData:[messageString dataUsingEncoding:NSASCIIStringEncoding]];
[oStream write:[data bytes] maxLength:[data length]]; 
```

接收消息：

```
-(void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode
{
    NSLog(@"EventCode: %i", eventCode);
    //switch-case-statement...(using constants - NSStreamEventOpenCompleted...)
} 
```

包含该代码的类继承自 NSObjects 并实现`NSStreamDelegate`。（带有 ARC 的 iOS5）

感谢您的帮助！

编辑：我只是在打开这样的流后尝试“轮询” - 它正在工作：

```
while (![iStream hasBytesAvailable])
{}
uint8_t buffer[1024];
int len;
NSString *str = @"";

while ([iStream hasBytesAvailable]) 
{
    len = [iStream read:buffer maxLength:sizeof(buffer)];
    if (len > 0) 
    {
        NSString *output = [[NSString alloc] initWithBytes:buffer length:len encoding:NSISOLatin1StringEncoding];

        if (output != nil) 
        {
            str = [str stringByAppendingString:output];
        }
    }
}
NSLog(@"Response: %@", str); 
```

但是，可以肯定的是，我仍然需要一个更好的（异步）解决方案；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-04T20:29:33.253

我在这里找到了你的答案，我也有同样的问题。你的回答对我有用，但我认为这更好：

[如何在 NSStream 中使用委托？](https://stackoverflow.com/questions/12238828/how-to-use-delegate-in-nsstream)

引用他的话：

> 运行循环运行的时间不够长，无法调用委托方法。
> 
> 添加：
> 
> ```
> [[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:2.0]]; 
> ```
> 
> 在您打开流之后。这仅在没有 GUI 的程序中是必需的——否则将为您旋转运行循环。

所以我的看起来像这样：

```
[self.inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[self.inputStream open];
[[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:30.0]]; 
```

编辑：然后当你有数据时，例如当委托方法流中发生 NSStreamEventEndEncountered 时我的所有数据都完成了：handleEvent 我把这个：

```
[theStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
CFRunLoopStop(CFRunLoopGetCurrent());
[theStream close]; 
```

这会在 30.0 秒之前关闭运行循环，或者无论您设置多久。如果您的代码在 NSStreamHasBytesAvailable 中，那么您的答案将是相同的。

这允许我仍然使用委托方法并保持运行循环打开直到下载完成，而无需一起跳过委托方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T05:23:44.507

我遇到了同样的问题，然后我意识到我不小心打了电话

```
[iStream setDelegate:self] 
```

在我创建 iStream 之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T23:00:53.880

您是否让运行循环以默认模式运行？

尝试检查输入流状态 ( `-streamStatus`)。

是否有任何内容记录到控制台？

您声称为输出流调用了委托方法，但您的`NSLog()`调用不会记录流。你确定吗？

`__bridge_transfer`最后，这是不相关的，但如果您打算将拥有的 Core Foundation 流对象的所有权转移到 ARC，则应该使用强制转换。更好的是，使用`CFBridgingRelease()`它与函数名称中的 Create 具有明显的对称性。除非有`CFRelease()`您没有显示的调用，否则现有代码会泄漏这些流。

# php - 将变量从 PHP 传递到 JavaScript 的有效方法

> ID：10889233
> 
> 赞同：23
> 
> 时间：2012-06-04T22:22:51.820
> 
> 标签：php, javascript, cakephp, cakephp-2.0

有时我必须将一些变量从 PHP 传递到 JS 脚本。现在我这样做了：

```
var js-variable = "<?php echo $php-variable; ?>"; 
```

但这非常难看，我无法将我的 JS 脚本隐藏在 .js 文件中，因为它必须由 PHP 解析。处理此问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-04T22:32:18.033

如果您不想使用 PHP 生成 javascript（并且不介意额外调用您的网络服务器），请使用 AJAX 获取数据。

如果您确实想使用 PHP，请始终在输出前使用 json_encode 进行编码。

```
<script>
    var myvar = <?php echo json_encode($myVarValue); ?>;
</script> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-04T22:36:30.850

请使用 rest/rpc api 并将 json 传递给您的 js。如果您使用 jquery，可以通过以下方式完成：

休息.php

```
<?php echo "{name:biplav}" ?> 
```

然后从你的 js 中进行如下调用：

```
var js_var;
$.get("rest.php", function(data) {
         js_var=data;
}); 
```

这是我能想到的最简单的例子。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-04T22:32:09.463

```
<?php
// filename: output-json.php
header('content-type:application/json;charset=utf-8');
printf('var foo = %s;', json_encode($foo, JSON_PRETTY_PRINT)); 
```

`json_encode`是一个强大的函数，可确保输出被编码和格式化为有效的 javascript / json。content-type 标头告诉浏览器如何解释响应。

如果您的响应是真正的 JSON，例如：

```
{"foo": 5} 
```

然后将其声明为`content-type:application/json;charset=utf-8`. JSON 解析速度更快，与 javascript 相比，被 xss 攻击的可能性要小得多。但是，如果您需要在响应中使用真正的 javascript，例如：

```
var obj = {foo: 5}; 
```

然后将其声明为`content-type:text/javascript;charset=utf-8`

您可以像文件一样链接到它：

```
<script src="output-json.php"></script> 
```

或者，可以方便地将值直接嵌入到您的 html 中，而不是发出单独的 http 请求。这样做：

```
<script>
    <?php printf('var foo = %s;', json_encode($foo, JSON_HEX_TAG | JSON_PRETTY_PRINT)) ?>
</script> 
```

**`JSON_HEX_TAG`如果通过 <script> 标签嵌入到您的 html 中，请务必使用**，否则您将面临 xss 注入攻击的风险。您可能还需要使用其他标志来提高安全性，具体取决于您在其中使用它的上下文：`JSON_HEX_AMP, JSON_HEX_QUOT, JSON_HEX_APOS`. 这些标志使响应的可读性降低，但通常有利于安全性和兼容性，因此您可能应该只使用它们。

我真的想强调声明内容类型和可能使用`JSON_HEX_TAG`标志的重要性，因为它们都可以帮助减轻 xss 注入。

除非您想引诱 xss 攻击，否则**不**要这样做：

```
<script>
    var myvar = <?php echo json_encode($myVarValue); ?>;
</script> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-05T10:04:52.017

在我看来，如果你需要直接在你的 JS 中传递一个变量，可能你的 web 应用程序设计得不好。

所以，我有两个提示： * 使用 JSON 文件进行一般配置，比如`/js/conf/userprefs.json`

```
{
    "avatar": "/img/users/123/avatar.jpg",
    "preferred_color": "blue"
    // ...
} 
```

*   或者（更好的方法）您可以通过 AJAX 调用检索您的 json 配置文件。

使用 Symfony2 等 PHP 框架，您可以决定路由配置中的格式，将变量的输出留给模板引擎（如 Twig）。

我为 Symfony2 用户做了一个例子，但这可以被任何程序员使用：

路由.yml

```
userprefs:
    pattern: /js/confs/userprefs.{_format}
    defaults: { _controller: CoreBundle:JsonPrefs:User, _format: json }
    requirements:
        _format: json
        _method: GET 
```

在控制器内部，您可以执行检索变量所需的所有查询，并将这些变量放在视图中：

资源/视图/JsonPrefs/User.json

```
{
    "avatar": "{{ user.avatar }}",
    "preferred_color": "{{ user.preferred_color }}"
    // ...
} 
```

现在，在您的 JS 中，您将能够通过简单的 AJAX 调用来检索 JSON。出于性能目的，您可以使用 Varnish 缓存 JSON（例如）。这样，您的服务器就不需要在每次读取用户首选项时进行查询。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-04T22:27:43.600

如果您修改 .htaccess 文件以包含

```
 AddType application/x-httpd-php .js 
```

您可以使用 .js 文件，它将由 PHP 处理，这是您需要的一半。

就该解决方案的丑陋程度而言，我会说这是最不丑陋的机制。您可以尝试通过 PHP 脚本将整个 JS 脚本作为字符串传递，并搜索和替换您需要插入的变量，但我认为您会同意这比您当前使用的解决方案更丑陋。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-04T22:35:26.060

将所有 .js 文件放在一个文件夹中，并配置您的 HTTP 服务器以将所有对这些文件的请求重定向到一个 PHP 文件，该文件加载文件并输出它们。

假设您有 Apache 并且您的 .js 文件在 /js 中：

```
RewriteRule /js   /getjs.php 
```

获取js.php：

```
<?php
header('Content-Type: text/javascript');
include_once($_SERVER['SCRIPT_NAME']);
?> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-04T22:30:42.323

至于避免通过 PHP 解析器运行 .js 文件，除了可能`js-variable`通过 AJAX 调用获取 的值外，您几乎无能为力。

您也可以考虑像这样输出值：

```
var js_variable = <?php echo json_encode ($php_variable); ?> 
```

逃避所有会破坏你的javascript的事情。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-11T16:37:53.017

至少，您可以使用 PHP 短代码使您的“丑陋”解决方案更简洁：

```
var js-variable = "<?= $php-variable ?>"; 
```

# php - MySQL LIMIT 1 但查询 15 行？

> ID：10889235
> 
> 赞同：1
> 
> 时间：2012-06-04T22:22:52.300
> 
> 标签：php, mysql, limit

基本上我要做的是将行的 ID 与 MySQL 中的 15 个结果进行比较，消除除 1 之外的所有结果（使用`NOT IN`），然后提取该结果。

现在通常这本身就可以了，但是我正在执行 SQL 查询的 15 行的顺序会根据排名不断变化，因此在排名更新和 ajax 请求之间有可能（我提交的 ID 为`NOT IN`）不止一个 ID 发生了变化，这当然会带回不止一行我不想要的。

简而言之，有没有一种方法可以查询 15 行，但只返回一个？无需运行两个单独的查询。

## 例子

假设我的数据库中有 7 个项目，我在页面上向用户显示 5 个。

这些是向用户显示的内容：

```
Apple
Orange
Kiwi
Banana
Grape 
```

但在数据库中我也有

```
Peach
Blackberry 
```

现在我想做的是，如果用户从他们的列表中删除一个项目，它将添加另一个项目（基于他们拥有的排名）

现在的问题是，为了知道他们现在的清单上有什么，我将剩余的项目发送到数据库（假设他们删除了 Kiwi，我会发送 Apple、Orange、Banana 和 Grape）

所以现在我从剩下的六个项目中选择排名最高的 5 个项目，确保它们不是页面上已经显示的项目，然后将新的项目添加到列表中（Peach 或 Blackberry）

一切都很好，除了如果桃子和黑莓现在都超过葡萄，那么我将返回两个结果而不是一个。因为它会询问...

```
Apple
Orange
Banana
Peach
Blackberry 
```

并排除...

```
Apple
Orange
Banana
Grape 
```

这给我们留下了桃子和黑莓，而不仅仅是桃子或黑莓。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:26:39.223

根据您要执行的操作（最好看一个示例），它可以通过嵌套查询来完成。看这篇[文章解释如何](https://stackoverflow.com/a/9559270/667608)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T23:16:54.597

我不确定我是否完全理解这些要求，但我会试一试。以下示例基于我的理解，并假设您只想显示前**五行**。

```
SELECT
  UL.ItemName
FROM
  UserList UL
WHERE
  (UL.Deleted = 0) -- Take only items that are NOT deleted

UNION -- UNION clause discards duplicate entries, unlike UNION ALL

SELECT
  I.ItemName
FROM
  (SELECT
    IL.ItemName
  FROM
    ItemList IL -- This is the table containing ALL Items
  ORDER BY
    IL.Ranking ASC -- Most important Items first, supposing that a lower number in Ranking means higher priority
  ) AS I
LIMIT 5 -- Display only top five entries 
```

**注意**：此查询未经测试，并且很有可能它不会总是以正确的顺序返回项目，因为它缺少 ORDER BY 子句。因此，它应该被视为一个建议，而不是一个完整的解决方案。

# python - Python webapp2：重定向回来

> ID：10889236
> 
> 赞同：3
> 
> 时间：2012-06-04T22:22:55.763
> 
> 标签：python, google-app-engine, redirect, webapp2

我正在将谷歌应用引擎用于基本应用程序。

场景很简单：我单击注销，我希望我的注销处理程序将我重定向回我来自的页面。

我如何实现这一目标？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T22:38:05.727

创建[注销 url](https://developers.google.com/appengine/docs/python/users/functions)时，您可以传入您希望用户重定向到的 url，在您的情况下是他的当前 url。像这样的东西（我不是 Python 开发人员，所以......）：

```
users.create_logout_url(self.request.url) 
```

# javascript - 如何在我们的 mvc3 Web 应用程序的 prod 构建中删除 JS 日志记录调用？

> ID：10889237
> 
> 赞同：1
> 
> 时间：2012-06-04T22:23:17.713
> 
> 标签：javascript, asp.net-mvc-3, bundling-and-minification

在我们的 MVC3 Web 应用程序的整个 JS 中，我们有很多对我们的日志记录方法（只是包装 console.log）的调用，我想在我们构建测试和生产构建时从 JavaScript 中删除它们。

目前我们正在使用[捆绑和缩小 nuget 包](http://nuget.org/packages/Microsoft.Web.Optimization/0.1)将我们的 JS 捆绑和缩小到一个大的缩小文件中，但我希望它也能删除对日志记录方法的调用。

我们确实有一种机制可以用空函数替换日志记录方法，因此它们在生产中不会做任何工作，但它们仍然被调用并传入各种参数。除此之外，还有“大”字符串已通过并且可以删除那些，从而减小文件大小。

在我看来，理想的解决方案是以某种方式解析 JavaScript 并检测/删除对这些方法的调用。最好在某种 JavaScript 引擎中，而不仅仅是正则表达式。

无论哪种方式，我只希望在生产中提供的最终 JavaScript 中删除对日志记录方法的调用。有谁知道我将如何完成这个额外的缩小？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T22:58:06.817

是的，该`IBundleTransform`界面是为这种情况设计的。在 RC 位中，这是我们所设想的：

```
new Bundle("~/bundles/js", new LogRemoverTransform(), new JsMinify()); 
```

基本上，您构建一个捆绑包并链接两个转换，首先剥离您的日志方法，然后运行正常的缩小。在 RC 之前，您必须在`IBundleTransform`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:23:59.397

您可以编写自己的[IBundleTransform](http://msdn.microsoft.com/en-us/library/system.web.optimization.ibundletransform_methods%28v=vs.110%29.aspx)实现，首先通过正则表达式删除对日志记录方法的调用，然后调用默认的捆绑和缩小功能。只要您的电话相当简单，就应该不难想出。不过，这*可能*会变得很棘手，具体取决于您如何调用日志记录代码。

例如，构建一个能够捕获整个日志调用的正则表达式（对我来说）是相当困难的，如下所示：

`NS.log(function () { return "this is going to be hard to parse"; }());`

但是，只要您不那样记录，编写正则表达式应该不难。

# linux - 如果调用了另一个实例，则重新运行 bash 脚本

> ID：10889250
> 
> 赞同：2
> 
> 时间：2012-06-04T22:24:48.187
> 
> 标签：linux, bash, unix

我有一个可以同时调用多次的 bash 脚本。为了保护脚本访问的状态信息（保存在`/tmp`文件中），我使用这样的文件锁定：

```
do_something()
{
...
}

// Check if there are any other instances of the script; if so exit
exec 8>$LOCK
if ! flock -n -x 8; then
        exit 1
fi

// script does something...
do_something 
```

现在，在此脚本运行时调用的任何其他实例都将退出。如果有 n 个同时调用，而不是 n 次，我希望脚本只运行一次额外的时间，如下所示：

```
do_something()
{
...
}

// Check if there are any other instances of the script; if so exit
    exec 8>$LOCK
    if ! flock -n -x 8; then
        exit 1
    fi

// script does something...
do_something

// check if another instance was invoked, if so re-run do_something again
    if [ condition ]; then
       do_something
    fi 
```

我该怎么做呢？在退出之前触摸羊群中的一个文件并将该文件作为第二个 if 的条件似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T22:41:08.530

有一个标志（锁文件）来表示需要做的事情，并始终设置它。有一个由执行部分取消设置的单独标志。

```
REQUEST_FILE=/tmp/please_do_something
LOCK_FILE=/tmp/doing_something

# request running
touch $REQUEST_FILE

# lock and run
if ln -s /proc/$$ $LOCK_FILE 2>/dev/null ; then
    while [ -e $REQUEST_FILE ]; do
        do_something
        rm $REQUEST_FILE
    done
    rm $LOCK_FILE
fi 
```

如果您想确保每次运行整个脚本时只运行一次“do_something”，那么您需要创建某种队列。整体结构类似。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T05:20:37.797

它们不是所有人的最爱，但我一直是制作锁文件的符号链接的粉丝，因为它们是原子的。例如：

```
lockfile=/var/run/`basename $0`.lock
if ! ln -s "pid=$$ when=`date '+%s'` status=$something" "$lockfile"; then
  echo "Can't set lock." >&2
  exit 1
fi 
```

通过将有用的信息直接编码到链接目标中，您可以消除写入文件引入的竞争条件。

也就是说，丹尼斯发布的链接提供了更多有用的信息，您可能应该在编写更多脚本之前尝试理解这些信息。[我上面的示例与BashFAQ/045](http://mywiki.wooledge.org/BashFAQ/045)有点相关，它建议使用`mkdir`.

如果我正确理解了您的问题，那么通过使用两个锁定文件可能会（稍微不可靠）实现您想要做的事情。如果设置第一个锁失败，我们尝试第二个锁。如果设置第二个锁失败，我们退出。如果第一个锁在我们检查它之后但在检查第二个存在锁之前被删除，则存在错误。如果您可以接受这种级别的错误，那就太好了。

这是未经测试的；但对我来说这看起来很合理。

```
#!/usr/local/bin/bash

lockbase="/tmp/test.lock"

setlock() {
  if ln -s "pid=$$" "$lockbase".$1 2>/dev/null; then
    trap "rm \"$lockbase\".$1" 0 1 2 5 15
  else
    return 1
  fi
}

if setlock 1 || setlock 2; then
  echo "I'm in!"
  do_something_amazing
else
  echo "No lock - aborting."
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T22:30:54.810

请参阅[流程管理](http://mywiki.wooledge.org/ProcessManagement)。

# database - 如何防止 Datalog 规则修剪空值？

> ID：10889254
> 
> 赞同：3
> 
> 时间：2012-06-04T22:25:13.507
> 
> 标签：database, prolog, logic, datalog

我有以下事实和规则：

```
% frequents(D,P) % D=drinker, P=pub
% serves(P,B) % B=beer
% likes(D,B)

frequents(janus, godthaab).
frequents(janus, goldenekrone).
frequents(yanai, goldenekrone).
frequents(dimi,  schlosskeller).

serves(godthaab, tuborg).
serves(godthaab, carlsberg).
serves(goldenekrone, pfungstaedter).
serves(schlosskeller, fix).

likes(janus, tuborg).
likes(janus, carlsberg).

count_good_beers_for_at(D,P,F) :- group_by((frequents(D,P), serves(P,B), likes(D,B)),[D,P],(F = count)).
possible_beers_served_for_at(D,P,B) :- lj(serves(P,B), frequents(D,R), P=R). 
```

现在，我想构建一个规则，当“饮酒者”“频率”大于 0 的每个酒吧中可用的“喜欢”啤酒的数量时，该规则应该像返回“真”的谓词一样工作。

当规则不返回元组时，我会认为谓词为真。如果谓词为假，我打算让它返回没有单一“喜欢”啤酒的酒吧。

正如你所看到的，我已经有一个规则来计算给定酒吧中给定饮酒者的好啤酒。我还有一条规则，告诉我可供应啤酒的数量。

```
DES> count_good_beers_for_at(A,B,C)

{                                           
  count_good_beers_for_at(janus,godthaab,2)
}
Info: 1 tuple computed. 
```

如您所见，柜台不会返回经常光顾的酒吧，但有 0 个喜欢的啤酒。我打算通过使用左外连接来解决这个问题。

```
DES> is_happy_at(D,P,Z) :- lj(serves(P,B), count_good_beers_for_at(D,Y,Z), (Y=P))

Info: Processing:
  is_happy_at(D,P,Z) :-
    lj(serves(P,B),count_good_beers_for_at(D,Y,Z),Y = P).
{                                           
  is_happy_at(janus,godthaab,2),
  is_happy_at(null,goldenekrone,null),
  is_happy_at(null,schlosskeller,null)
}
Info: 3 tuples computed. 
```

这几乎是对的，除了它也给了我不常去的酒吧。我尝试添加一个额外的条件：

```
DES> is_happy_at(D,P,Z) :- lj(serves(P,B), count_good_beers_for_at(D,Y,Z), (Y=P)), frequents(D,P)

Info: Processing:
  is_happy_at(D,P,Z) :-
    lj(serves(P,B),count_good_beers_for_at(D,Y,Z),Y = P),
    frequents(D,P).
{                                           
  is_happy_at(janus,godthaab,2)
}
Info: 1 tuple computed. 
```

现在我以某种方式过滤掉了所有包含空值的东西！我怀疑这是由于 DES 中的空值逻辑造成的。

我认识到我可能以错误的方式处理整个问题。任何帮助表示赞赏。

编辑：作业是“very_happy(D) ist wahr, genau dann wenn jede Bar, die Trinker D besucht, wenigstens ein Bier ausschenkt, das er mag。” 转换为“ **very_happy(D) 是真的，如果每个酒吧饮酒者 D 访问，至少提供 1 杯他喜欢的啤酒**”。由于这个作业是关于 Datalog 的，我认为不使用 Prolog 绝对可以解决。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T19:17:16.420

我认为对于您的分配，您应该使用基本的 Datalog，而不要滥用聚合。问题的关键是*如何表达普遍量化的条件*。我搜索了“通用量化数据日志”，在第一个位置我发现[deductnotes.pdf](http://www.google.com/url?sa=t&rct=j&q=universal%20quantification%20datalog&source=web&cd=1&ved=0CFwQFjAA&url=http://cs.ulb.ac.be/public/_media/teaching/infoh415/deductnotes.pdf&ei=_9nQT67_HYn04QSt87jKDA&usg=AFQjCNERyBcWzL08RxbsdhqeYCOs-nm7Rw&cad=rja)断言：

> 一个普遍量化的条件只能用存在量化和否定的等价条件来表示。

在该 PDF 中，您还会发现一个有用的示例（第 9 和第 10 页）。

因此，我们必须重新表述我们的问题。我最终得到了这段代码：

```
not_happy(D) :-
  frequents(D, P),
  likes(D, B),
  not(serves(P, B)).

very_happy(D) :-
  likes(D, _),
  not(not_happy(D)). 
```

这似乎是需要的：

```
DES> very_happy(D)

{                                           
}
Info: 0 tuple computed. 
```

请注意`likes(D, _)`，这是避免 yanai 和 dimi 被列为very_happy 所必需的，而没有明确断言他们喜欢什么（抱歉，我的英语真的很烂......）

**编辑**：对不起，但上述解决方案不起作用。我用这种方式重写了它：

```
likes_pub(D, P) :-
  likes(D, B),
  serves(P, B).

unhappy(D) :-
  frequents(D, P),
  not(likes_pub(D, P)).

very_happy(D) :-
  likes(D, _),
  not(unhappy(D)). 
```

测试：

```
DES> unhappy(D)

{                                           
  unhappy(dimi),
  unhappy(janus),
  unhappy(yanai)
}
Info: 3 tuples computed.          

DES> very_happy(D)

{                                           
}
Info: 0 tuples computed. 
```

现在我们添加一个事实：

```
serves(goldenekrone, tuborg). 
```

我们可以看到更正后的代码结果：

```
DES> unhappy(D)

{                                           
  unhappy(dimi),
  unhappy(yanai)
}
Info: 2 tuples computed.          

DES> very_happy(D)

{                                           
  very_happy(janus)
}
Info: 1 tuple computed. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T09:20:37.977

也许不是您期望的答案。但是您可以使用普通的 Prolog 并使用 bagof/3 或 setof/3 内置谓词轻松地进行分组查询。

```
?- bagof(B,(frequents(D,P), serves(P,B), likes(D,B)),L), length(L,N).
D = janus,
P = godthaab,
L = [tuborg,carlsberg],
N = 2 
```

bagof/3 的语义使得它不会为给定的查询计算外连接。查询通常由 Prolog 执行。结果首先被累加和键排序。最后通过回溯返回结果。如果您的数据记录不能没有空值，那么是的，您必须进行过滤。

但是当您只想知道喜欢的啤酒的存在时，您不需要进行聚合。您可以通过查询直接执行此操作，无需任何聚合：

```
is_happy_at(D,P) :- frequents(D,P), once((serves(P,B), likes(D,B))).
?- is_happy_at(D,P).
D = janus,
P = godthaab ;
Nein 
```

once/1 防止不必要的回溯。当 Datalog 在 is_happy_at/2 中看到投影时，Datalog 可能会自动不进行不必要的回溯，即 B 被投影掉。或者您可能需要显式使用与 SQL DISTINCT 对应的内容。或者最终，您的数据日志为您提供了与 SQL EXISTS 最接近的对应于一次/1 的内容。

再见

# node.js - node+now.js+connect 给我一个错误

> ID：10889256
> 
> 赞同：1
> 
> 时间：2012-06-04T22:25:34.537
> 
> 标签：node.js, connect, nowjs-sockets

我安装了 node_module 连接以使用静态方法。这是我的代码：

```
var http = require('http');
var connect = require('connect');
var nowjs = require("now");
var app = connect();

app.use(connect.static('/var/www/www.domain.com/htdocs'));

app.use(function(req, res){
    res.end();
});

http.createServer(app).listen(8001);

var everyone = nowjs.initialize(http); 
```

但我收到一个错误：

```
[TypeError: Object #<Object> has no method 'listeners'] TypeError: Object #<Object> has no method 'listeners'
    at Object.wrapServer (/home/chris/nowjs/node_modules/now/lib/fileServer.js:23:29)
    at [object Object].initialize (/home/chris/nowjs/node_modules/now/lib/now.js:181:14)
    at Object.<anonymous> (/home/chris/nowjs/multiroomchat_server.js:15:22)
    at Module._compile (module.js:446:26)
    at Object..js (module.js:464:10)
    at Module.load (module.js:353:31)
    at Function._load (module.js:311:12)
    at Array.0 (module.js:484:10)
    at EventEmitter._tickCallback (node.js:190:38) 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T00:12:38.233

该`http`变量是对 http 模块的引用，而不是创建的 http 服务。您需要获取从 the 传回的变量`createServer()`并将其传递给 Now.js。谢天谢地`listen()`，您不必中断线路。

```
var server = http.createServer(app).listen(8001);
var everyone = nowjs.initialize(server); 
```

# ruby-on-rails - 轨道可以吗？

> ID：10889258
> 
> 赞同：-2
> 
> 时间：2012-06-04T22:25:44.987
> 
> 标签：ruby-on-rails, ruby-on-rails-3

是否有可能在控制器的实例变量中执行 ruby​​ 代码？

例子：

```
def something
@code = "redirect_to 'https://www.google.com/'"
exec(@code) // And then it would redirect.
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:06:46.793

不要这样做。Rails 是红宝石。在 Ruby 中，您可以使用 eval 方法在字符串中执行任何命令。当你开始真正进入它时，就会有 class_eval。

```
@myvar = "puts 'SHOULD NOT HAVE DONE THIS!!'"

eval(@myvar)  # SHOULD NOT HAVE DONE THIS!! 
```

注意安全。

# sql-server - SQL - “重复”记录但日期不同且在同一天内

> ID：10889261
> 
> 赞同：3
> 
> 时间：2012-06-04T22:26:03.257
> 
> 标签：sql-server

我们遇到了在线支付网关系统的问题，有时会在几分钟内重复交易条目。

我们想要创建这些交易的记录，以便我们可以分析和更正它们。

单表，如下。这仅显示一个卡号的结果。我们宁愿只返回同一天发生的交易，最好是在 5 秒之内，就像最后两行一样。

```
txn_authcode   card_number   cardtype   txn_status   txn_value   entryTimeStamp
-------------------------------------------------------------------------------
1491109220     ....0279      Visa       FAILED       20.00       2011-06-24 19:49:00
1491109219     ....0279      Visa       FAILED       20.00       2012-05-28 22:47:57
1491109218     ....0279      Visa       FAILED       20.00       2012-05-28 22:46:39
1491109217     ....0279      Visa       FAILED       20.00       2012-05-28 22:46:35 
```

到目前为止，我有以下内容，它获取给定卡号的重复记录，但我不确定如何进一步细化此记录，以便在同一天获取记录，最好在 5 秒内获取记录。

```
 select * from(
            select  t1.txn_authcode,t1.txn_status,t1.txn_value,t1.entryTimeStamp
                from    transactions t1
                where 1=1
                and exists
                (select null
                 from   transactions t2
                 where  t1.card_number = t2.card_number
                 and t1.entryTimeStamp <> t2.entryTimeStamp
                 and t2.entryTimeStamp >= '2012-05-01'
                 and t2.entryTimeStamp <= '2012-06-01'
                 --*** AND DATEDIFF ( day , t1.entryTimeStamp , t2.entryTimeStamp ) < 1 
    --(datediff above doesn't work as it can return a single record for a given card, 
--but we only want records that have at least one other transaction record on the same 
--day for the same card)

                 )
                 and t1.entryTimeStamp >= '2012-05-01'
                 and t1.entryTimeStamp <= '2012-06-01'
             )x
        order by card_number,entryTimeStamp desc 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T22:30:10.977

```
...
AND DATEDIFF ( day , t1.entryTimeStamp , t2.entryTimeStamp ) < 1
AND t1.txn_authcode < t2.txn_authcode
... 
```

用上面的语句替换查询的注释部分，你应该得到你需要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T22:45:27.383

如果您需要间隔几秒钟，请使用

```
AND DATEDIFF ( ss, t1.entryTimeStamp , t2.entryTimeStamp ) < 5 
```

如果您只需要同一天，请使用

SQL Server 2008 或更高版本

```
AND CONVERT(date,t1.entryTimeStamp) = convert(date,t2.entryTimeStamp) 
```

SQL Server 2005 或更早版本

```
and convert(char(10),t1.entryTimeStamp,101) = convert(char(10),t2.entryTimeStamp,101) 
```

如果两者都需要，请使用组合。

# php - PHP/或 mysql 弄乱了我的插入

> ID：10889262
> 
> 赞同：0
> 
> 时间：2012-06-04T22:26:13.457
> 
> 标签：php, mysql

> **可能重复：**
> [mysql 的字符集问题](https://stackoverflow.com/questions/6972181/charset-issue-with-mysql)

所以我有 mysql 字符串，其中有一些字符：

, ? “一般般' ： ; ！@#$​​%^&*(){}[]\<>. / ` ~ ¨ ° ¯ ¡ ¢ £ § ¸ ´

当它通过 php 命令插入我的数据库时，`mysql_query`一些字符显示不正确。例如，“so”变为“so” 但是，当我打印出查询并在 phpmyadmin 中手动运行它时，它可以正常工作。将这些字符插入数据库以使它们不会全部损坏的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T22:28:40.567

在运行插入查询之前使用此命令：

```
mysql_query('SET NAMES utf8'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:33:02.997

在将这些字符发送到 MySQL 之前，您需要确保在 PHP 中对所有这些字符进行了转义。看到这个[mysql-escape-string](http://php.net/manual/en/function.mysql-real-escape-string.php)

这只是执行此操作的功能的一个示例。我敢肯定还有其他的。

# c# - 如何重定向所有错误，包括 404

> ID：10889266
> 
> 赞同：3
> 
> 时间：2012-06-04T22:26:40.183
> 
> 标签：c#, asp.net, asp.net-mvc, c#-4.0

我希望所有错误都转到同一个错误页面。我最初确实尝试了带有状态码的错误标签。这很好，但我宁愿不必指定任何状态代码，并且仍然让每个错误都转到一页。问题是如果我删除状态码条目，404 会转到服务器的 404 页面，而不是我的错误页面。

有没有办法将所有错误配置到同一页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T22:29:22.493

您应该更改 web.config 并添加 customErrors 元素。然后，您可以将默认重定向设置为signle页面

例如

```
<customErrors mode="On" defaultRedirect="Error.aspx">

</customErrors> 
```

可以参考 MSDN 文章 [http://msdn.microsoft.com/en-us/library/h0hfz6fc.aspx](http://msdn.microsoft.com/en-us/library/h0hfz6fc.aspx)

在 IIS7 上，您可以使用新的 httpErrors 部分

```
<system.webServer>
    <httpErrors defaultPath="Error.aspx" defaultResponseMode="Redirect">
    </httpErrors>
</system.webServer> 
```

更多信息 [http://www.iis.net/ConfigReference/system.webServer/httpErrors](http://www.iis.net/ConfigReference/system.webServer/httpErrors)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T22:48:34.060

如果我理解得很好，您需要将所有错误发送到您的自定义错误页面，以及 iis7 给出的错误（不仅是您的程序）

这是你需要在 II7 上设置的东西，但你也可以从 web.config 设置它（但实际上是给 ii7 说明） 这是一个例子

```
<configuration>
   <system.webServer>
      <httpErrors errorMode="DetailedLocalOnly" defaultResponseMode="File" >
         <remove statusCode="500" />
         <error statusCode="500"
            prefixLanguageFilePath="C:\Contoso\Content\errors"
            path="500.htm" />
       </httpErrors>
   </system.webServer>
</configuration> 
```

参考：[http ://www.iis.net/ConfigReference/system.webServer/httpErrors](http://www.iis.net/ConfigReference/system.webServer/httpErrors)

# android - onTap on map-marker 给我 NullPointerException

> ID：10889267
> 
> 赞同：0
> 
> 时间：2012-06-04T22:26:40.310
> 
> 标签：android, google-maps

在谷歌地图中的标记上的 onTap 有问题。

这是错误

```
05-31 21:46:21.420: E/AndroidRuntime(5541): java.lang.NullPointerException
05-31 21:46:21.420: E/AndroidRuntime(5541): at com.android.internal.app.AlertController$AlertParams.(AlertController.java:753)
05-31 21:46:21.420: E/AndroidRuntime(5541): 在 android.app.AlertDialog$Builder.(AlertDialog.java:273)
05-31 21:46:21.420: E/AndroidRuntime(5541): 在 my.class.HelloMapView$LocationOverlay.onTap(HelloMapView.java:1361)

```

这是 my.class.HelloMapView$LocationOverlay.onTap(HelloMapView.java:1361) 的错误代码

```
 public class LocationOverlay extends ItemizedOverlay<OverlayItem>  {
    //public class LocationOverlay extends ItemizedOverlay{
        private ArrayList<OverlayItem> overLayList = new ArrayList<OverlayItem>();
        private MapView mapView;
        public String pickedlat;
        public String pickedlng;
        private Context mContext;

        public LocationOverlay(MapView mapView, Drawable defaultMarker, Context context) {
            //super(null);
             super(boundCenterBottom(defaultMarker));
             mContext = context;
            this.mapView = mapView; // need it for onTap
            populate();

        }

        @Override
        protected OverlayItem createItem(int i) {
             return overLayList.get(i);
        }

        @Override
        public int size() {
             return overLayList.size();
        }

        public void addOverlayItem(OverlayItem overlayItem) {
             if(!overLayList.contains(overlayItem)){
                  overLayList.add(overlayItem);
                  setLastFocusedIndex(-1);
                  populate();     
             }

           //  populate();
        }

        @Override 
        protected boolean onTap(int pIndex) 
        { 
          OverlayItem item = overLayList.get(pIndex); 
          AlertDialog.Builder dialog = new AlertDialog.Builder(mContext); 
          dialog.setTitle(item.getTitle()); 
          dialog.setMessage(item.getSnippet()); 
          dialog.show(); 
          return true; 
        } 
```

错误日志中引用的行是这个

**AlertDialog.Builder 对话框 = new AlertDialog.Builder(mContext);**

我可以从我的谷歌搜索中猜到，它可能是 mContext 没有传递......但我无法正确理解......

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T01:21:15.813

检查您对构造函数的调用，可能会在其中传递空值。您可以使用`this`关键字，因为`Activity`它是`Contex`t 的子类，就像这样

```
LocationOverlay locationOverlay = new LocationOverlay(mapView, getResources().getDrawable(R.drawable.polis), this); 
```

或者，如果您从 Fragment 调用，请使用 getActivity() 方法

```
LocationOverlay locationOverlay = new LocationOverlay(mapView, getResources().getDrawable(R.drawable.polis), this.getActivity()); 
```

# java - EJB Glassfish v3.1.2 客户端向会话 bean 传递的数据始终为空

> ID：10889268
> 
> 赞同：3
> 
> 时间：2012-06-04T22:26:40.783
> 
> 标签：java, glassfish, ejb, ejb-3.0, eclipselink

调用从客户端传递方法参数的会话 bean 方法时遇到问题

应用程序中，数据到达方法调用时始终为空或设置为默认值。

而该方法的过程与对象很好地配合

例如：

- 我们有方法来持久化一个对象实体 addStudent(Student student); - 从客户端我们创建学生对象设置学生字段，如学生姓名等，调用方法 addStudent(ourStudent); 这个 ourStudent 到达方法的字段为 null 或默认值。学生被添加到这些空字段中。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T10:18:57.553

您将 EclipseLink 与编织一起使用，但它不起作用。你应该尝试不编织。可能通过编辑你的`persistence.xml`（s）

```
<persistence-unit name="XXX" transaction-type="XXX">
    <jta-data-source>XXX</jta-data-source>
    <jar-file>Or List of Classes or something else</jar-file>
    <properties>
      [other properties]
      <property name="eclipselink.weaving" value="false"/>
    </properties>
  </persistence-unit> 
```

更新：JPA 实现可以通过多种替代方式处理实体，这是一个不厌其烦的列表：

*   扩展（这是 JPA 规范要求实体的非私有默认构造函数的方式）
*   包装
*   类的字节码操作（使其符合 EclipseLink “想要”的方式）
*   ThreadLocal 代理事物
*   使用属性的基本反射
*   使用 getter setter 的基本反射（如果有的话）

EclipseLink 调用字节码注入“编织”（[什么是 Java 字节码注入？](https://stackoverflow.com/questions/3470949/what-is-java-bytecode-injection)）动态编织是在“运行时”进行编织 - 基本上是当类由类加载器加载时。静态编织是在部署之前进行编织，但在编译之后。对于 EclipseLink weaving 是最快的方法性能明智，它也是其他原因的首选方法。不幸的是，让编织工作通常有点棘手。完全有可能这对您的项目无关紧要，对于很多典型项目来说都无关紧要。

如果有客户端通过远程接口访问 bean，并且有实体作为参数传递或通过该连接返回值，则动态编织将不起作用。在大多数生产场景中，特别是如果应用程序/产品不是非常小，静态编织比动态编织更受欢迎......要阅读更多关于静态与动态编织以及如何配置它的信息，我还没有真正找到任何优秀的资源，但这至少是半官方的： [Using_EclipseLink_JPA_Weaving](http://wiki.eclipse.org/Using_EclipseLink_JPA_Extensions_%28ELUG%29#Using_EclipseLink_JPA_Weaving)

发生在你身上的是实体是在一端编织而不是在另一端编织 -> 绝对不能工作。

好消息是，您可能根本不必关心这些编织物，或者您可能会。当您禁用编织时，EclipseLink 会退回到另一种处理 JPA 实体的方法。EclipseLink 仅在启用编织时才支持某些功能（尽管不需要 JPA）。

来自：[What_You_May_Need_to_Know_About_Weaving_JPA_Entities](http://wiki.eclipse.org/Using_EclipseLink_JPA_Extensions_%28ELUG%29#What_You_May_Need_to_Know_About_Weaving_JPA_Entities) 列出了 EclipseLink 明确使用编织的内容：

*   延迟加载（间接）
*   变更跟踪
*   获取组
*   内部优化

（对于其中一些方法，如果禁用编织，则可以回退到其他方法，我猜除了“内部优化”之外的所有方法）

# asp.net-mvc - MVC 与 ASPX 动态页面渲染

> ID：10889269
> 
> 赞同：2
> 
> 时间：2012-06-04T22:27:04.310
> 
> 标签：asp.net-mvc, dynamic, content-management-system, seo, webforms

我有一个用 aspx 2.0 编写的 CMS 网站，它允许用户通过在页面上放置控件并设置属性（服务器端的反射）和事件（客户端 js）来构建页面。渲染引擎知道在每个控件上调用什么属性以找出要保存到数据库中的内容。我经历了控制再水化的所有陷阱和控件上缺乏适当的 ID，并且真的很难使解决方案 SEO 友好，目前充其量是部分的。还受到视图状态变大的困扰，因此我开始将 MVC 视为下一个版本的更好前进方式。页面的最终设计仅在用户决定进行现场推广时确定，并且每天可能会进行许多更改。

一个典型的页面可能有许多文本框控件、单选按钮组、复选框组、下拉列表和图像。此外，我们还有一些我们自己的控件，我们在运行时反映到解决方案中。

从我对 MVC 的初步研究来看，这似乎是为了避免这些类型的问题而编写的，而不是试图隐藏看起来非常有前途的 html 以及提供对跨浏览器更友好的最终标记。

现在的问题 - 由于要求是生成带有动态 html 控件的动态页面，这对于 MVC 来说是否太过分了，我应该坚持使用 ASPX，或者有没有办法生成适合非技术人员的动态内容人能做什么？

在我双脚跳入之前，非常感谢任何指导:)

谢谢

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:33:58.850

我假设*aspx 2.0*你的意思是 WebForms？这真的不是 MVC 是否有能力做你需要的事情的问题——它有能力，而且在我看来它*更有*能力。但是，WebForms 和 MVC 之间存在一些主要区别，请查看这篇文章以了解有关该主题的更多信息：[MVC 与 WebForms](https://stackoverflow.com/questions/837831/mvc-versus-webforms)。

我希望这有帮助。如果没有更多关于你想要完成什么的信息，我就无能为力了。考虑通过一些代码示例提出更具体的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T01:32:49.337

MVC 的一些主要优点：干净的 HTML，页面上没有编写 ViewState，更容易支持 html5，因此也支持 SEO。

对我来说，自从我 3 年前使用 MVC 以来，这些天我什至不想接触 WebForms。

顺便说一句，如果你想要 CMS + MVC，为什么不使用 Orchard 而不是自己构建呢？

[http://paulmason.biz/?p=118](http://paulmason.biz/?p=118)

# c# - 如何从 typeName 字符串转换为泛型？

> ID：10889273
> 
> 赞同：2
> 
> 时间：2012-06-04T22:27:08.157
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, generics

这个问题的上下文是一个 MVC 应用程序，它接受字符串并希望将它们转换为类型并将它们传递给通用代​​码。

*   我有一个输入类型的字符串表示形式。
*   我似乎永远无法在泛型方法 中放入`Type`变量。`<>`
*   这是否意味着我必须手动拼出所有可能的情况和通用方法调用？这是正确的方法吗？
*   如果 a`ModelBinder`能以某种方式找出我可以为 Action Method 提供泛型类型参数的类型，那就太酷了`public ActionResult Something<T>()`。但我不知道这是否可能。

例子

```
public ActionResult DoSomething(string typeName, int? id)
{
    var type = Type.GetType(typeName);
    if (type == typeof(Apple)) DoSomethingElse<Apple>(id);
    if (type == typeof(Orange)) DoSomethingElse<Orange>(id);
    //if etc ... to infinity
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:44:26.687

如果你只有类型，那么你必须通过反射来处理它。假设“DoSomethingElse”是当前类中的一个方法：

```
public ActionResult DoSomething(string typeName, int? id)
{
    Type thisType = this.GetType(); // Get your current class type
    var type = Type.GetType(typeName);
    MethodInfo doSomethingElseInfo = thisType.GetMethod("DoSomethingElse");
    MethodInfo concreteDoSomethingElse = doSomethingElseInfo.MakeGenericMethod(type);
    concreteDoSomething.Invoke(this, null);
} 
```

这应该对你有用，虽然你应该注意，它不会很漂亮！;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T22:54:31.843

由于您不是实际调用的人`DoSomething`，因为它是一种控制器方法，因此无法将类型分配给该方法，例如：

```
public ActionResult DoSomething<T>(int? id) 
```

由于调用该方法的是 IIS，因此您没有任何方式来分配此类型。现在我对路由一无所知，所以路由可能是可能的，但对我来说似乎不太可能。看起来你正在使用枚举，所以也许你可以使用 enum.Parse 来实例化或创建一个扩展方法到 int ，它能够根据类型确定它。

# azure - WCF 5.0 和 oData 3.0 API 不适用于 azure 表存储

> ID：10889274
> 
> 赞同：6
> 
> 时间：2012-06-04T22:27:11.703
> 
> 标签：azure, odata

在我迁移我的 WCF5.0 应用程序以与 azure 集成后，我无法将 oData 3 api 与 azure 表存储一起使用。我得到了这个错误-

> 'System.Data.Services.Client.DataServiceResponse' 类型在未引用的程序集中定义。您必须添加对程序集“System.Data.Services.Client, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”的引用。
> 
> 'System.Data.Services.Client.DataServiceContext' 类型在未引用的程序集中定义。您必须添加对程序集“System.Data.Services.Client, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”的引用。

在我的项目中添加后`System.Data.Services.Client.dll`，问题就消失了，但我不能使用 oData 3.0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T22:41:52.820

这是最近第二次问这个问题。Microsoft.WindowsAzure.StorageClient.Dll 对 System.Data.Service.Client.Dll 具有直接引用依赖关系，如下所示，因此如果要使用 Azure 存储客户端 API，则必须引用 System.Data.Service.Client.Dll在您的应用程序中，并确保您不能使用 WCF 5.0 SDK 提供的 oData 3.0。

![在此处输入图像描述](../Images/6aaa0a9bb4d49694043e559c70badb16.png)

如果您可以直接创建基于 RESTful 接口到 Azure 存储的 Web 请求，那么您可以直接在代码中使用 oData 3.0 + WCF 5.0，但这是您可能需要做的后续工作。

# javascript - 通过 Jquery/JS 加载 Youtube 视频

> ID：10889275
> 
> 赞同：0
> 
> 时间：2012-06-04T22:27:12.927
> 
> 标签：javascript, jquery, javascript-events

我的目标是通过 javascript 函数显示 youtube 视频，该函数将读取嵌入的代码并在分配的 div 中自动加载视频。但是我没有在为视频分配的 div 中显示任何内容。是因为它必须由按钮点击触发吗？

```
<script type="text/javascript">
                            var last_cnad_text_1 = '';
                            var options_cnad_text_1 = {
                            embedMethod:'fill',
                            maxWidth:320,
                            maxHeight: 320
                            };
                            function loadVideo()
                            {
                            val = $('#cnad_text_1').val();
                            if ( val != '' && val != last_cnad_text_1 )
                            {
                            last_cnad_text_1 = val;
                            $("#embed_cnad_text_1").oembed(val,options_cnad_text_1);
                            }
                            }
                            $(function(){
                            $('#cnad_text_1').keydown(loadVideo());
                            $('#cnad_text_1').click(loadVideo());
                            $('#cnad_text_1').change(loadVideo());
                            }); 
                        </script>  
<body>

                <input id="cnad_text_1" type="text" value="" size="60" name="cnad[text_1]">
                <div id="embed_cnad_text_1"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:36:15.163

YouTube 在 API 中提供了一个自动播放选项：

[https://developers.google.com/youtube/player_parameters#autoplay](https://developers.google.com/youtube/player_parameters#autoplay)

只需`autoplay=1`在您的 API 请求中设置。

这是一个自动播放的简单示例：http: [//jsfiddle.net/tnuJt/](http://jsfiddle.net/tnuJt/)

# ruby-on-rails - pg_search 使用一个文本字段和一个类别选择类型字段

> ID：10889276
> 
> 赞同：2
> 
> 时间：2012-06-04T22:27:23.503
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, pg-search

Ruby on Rails 新手。我正在*尝试*使用 pg_search gem，但遇到了一些困难（是的，我正在查看文档）。我想要一个同时具有文本字段和选择字段（类别）的搜索表单。这是我到目前为止的代码：

**联系信息.rb**

```
class ContactInfo < ActiveRecord::Base
...
include PgSearch
  pg_search_scope :search_by_category, (lambda do |category, query|
  raise ArgumentError unless [:prev, :cat].include?(category)
  {
      :against => category,
      :query => query
  }
  end
end 
```

**home_controller.rb**

```
class HomeController < ApplicationController
  def index
    @contact_infos = ContactInfo.search_by_category(params[:query])
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @contact_infos }
    end
end 
```

**主页\index.html.erb**

```
<%= form_for :search_by_category, :url => {:controller => 'home', :action => 'index'},
  :html => {:method => 'get'} do |f| %>

  <%= text_field_tag :query %>
  <%= f.label :category_id, "Category" %>
  <%= f.collection_select :category_id, Category.all,
                        :id, :name,
                        {:prompt => 'All'} %>
  <br/>
  <%= f.submit "Search" %>
<% end %> 
```

我收到此错误：

`ArgumentError in HomeController#index wrong number of arguments (1 for 2)`

...

要求

参数：

```
{"utf8"=>"✓","query"=>"test","search_by_category"=>{"category_id"=>"2"},"commit"=>"Search"} 
```

我知道问题出在这一行：

```
@contact_infos = ContactInfo.search_by_category(params[:query]) 
```

但我不确定如何从视图（home\index.html.erb）中传递这两个变量。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T06:35:58.050

好的 - 我想通了。如果它对某人有帮助....

在模型contact_info.rb

```
class ContactInfo < ActiveRecord::Base
  include PgSearch

 ...
  pg_search_scope :search_by_category, :against => :previous_value
  scope :in_category, lambda { |category_id|
    where(:category_id => category_id)
  }
end 
```

在控制器 home_controller.rb

```
class HomeController < ApplicationController
  def index

  if params[:search_by_category].nil?
    @contact_infos = ContactInfo.search(params[:query])
  else
    tmp = params[:search_by_category]
    @contact_infos = ContactInfo.search_by_category(params[:query]).in_category(tmp[:category_id])
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @contact_infos }
    end
  end
 end
end 
```

在视图 home\index.html.erb

```
...
    <%= form_for :search_by_category, :url => {:controller => 'home', :action => 'index'}, :html => {:method => 'get'} do |f| %>
    <%= text_field_tag :query %>
    <%= f.label :category_id, "Category" %>
    <%= f.collection_select :category_id, Category.all,
                            :id, :name,
                            {:prompt => 'All'} %>
    <br/>
    <%= f.submit "Search" %>
<% end %>
... 
```

# android - 使用 PhoneGap，无法仅在 Android 上使用 Ajax 加载本地 .html 文件

> ID：10889278
> 
> 赞同：3
> 
> 时间：2012-06-04T22:27:35.527
> 
> 标签：android, jquery, cordova

我正在使用PhoneGap（最新），Jquery 1.7。我无法通过 AJAX 将一些 html 加载到 div 中。我的问题很简单，我在 www/ 目录中有一个 index.html 文件。还有一个执行此操作的 js 文件：

```
$.ajax({
 type:"GET",
 timeout:10000,
 dataType: "html",
 async: false,
 cache: false,
 url: "file:///android_asset/www/_liqui-cult.html",
 success: function(data) {
  $('#data_details .description').html(data); // never runs
 },
 error: function(xhr,msg){
   alert(xhr.status + ", " + msg);
   if(xhr.status == 0 || xhr.status == "0"){
    alert(xhr.responseText); // always blank, if runs
   }
 }
}); 
```

花了一天的时间谷歌搜索这个错误，我尝试了很多东西，但 AJAX 调用从未成功。我尝试将 url 更改为简单的`_liqui-cult.html`（没有基于 file:// 的 url）。我也试过了`/_liqui-cult.html`。

我开始尝试使用 JQuery `$.load`，但它不起作用，所以我切换到更详细的`$.ajax`调用。

无论我做什么，我要么得到 404 作为状态，要么，如果我将 url 更改为`http://_liqui-cult.html`，我得到的状态为 0，但 responseText 中没有任何内容。

因此，我将 JQuery 排除在外，并尝试了一个简单的 XMLHttpRequest，如下所示：

```
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange=function()
{
  if (xmlhttp.readyState==4 && (xmlhttp.status==200 || xmlhttp.status==0))
  {
    $('#data_details .description').html(xmlhttp.responseText);
    $.mobile.changePage('#screen_detail');
  }
}
xmlhttp.open("GET","_liqui-cult.html", true);
xmlhttp.send(null); 
```

同样，我已经尝试了所有可以想到的 url 模式来映射到 html 文件。而且，我能得到的最好的结果是 xmlhttp.responseText 是空白的。

那么跨域问题呢？这是我尝试过的： `<access origin=".*"/>` `<access origin="file://*"/>` `<access origin="*"/>`

同样，我尝试了所有映射到 html 文件的方法，使用这些不同的访问源设置，但我仍然无法加载 html 文件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T16:59:47.490

将通过 AJAX 加载的 html 文件的名称从“_liqui-cult.html”更改为不带下划线“liqui-cult.html”的相同名称解决了该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:00:49.710

似乎您的项目中还有其他问题。以下要点包含我的测试应用程序中的一些文件，它在 Android 中没有任何问题。

[https://gist.github.com/2873186](https://gist.github.com/2873186)

# c# - C#：在 QuickWatch 窗口中枚举 SessionState 键

> ID：10889279
> 
> 赞同：1
> 
> 时间：2012-06-04T22:27:40.003
> 
> 标签：c#, debugging, session

在 Visual Studio 2010 中调试时，有没有办法在 QuickWatch 窗口中查看 HttpSessionState 的键？

必须有更好的方法，然后退出调试会话，在 Session.Contents.Keys 对象上编写循环，设置断点，然后单步执行循环 - 只是为了查看定义了哪些键。

我怀疑我正在以完全不正确的方式处理这个问题。提示或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:36:44.587

`HttpSessionState` is an `IEnumerable`, so as long as System.Core DLL is loaded in the process you're debugging, you can just evaluate `System.Linq.Enumerable.ToArray(System.Linq.Enumerable.Cast<object>(myHttpSessionState))` in the QuickWatch window. If the current code file has a `using System.Linq` statement, you can write a shorter expression: `myHttpSessionState.Cast<object>().ToArray()`

If you're having to look at HttpSessionState objects often, you may want to try [BugAid](http://www.bugaidsoftware.com), and define the above expression as a [Custom Expression](http://www.bugaidsoftware.com/features/#custom) on the HttpSessionState class, so you won't be forced to type in the long expression each and every time.

**Full Disclosure:** I'm the co-creator of BugAid.

# c++ - 用 C++ 实现自然动态矩阵

> ID：10889283
> 
> 赞同：1
> 
> 时间：2012-06-04T22:27:52.703
> 
> 标签：c++, dynamic, operator-overloading, overriding

我实际上对同一个想法有两个问题：

我想创建一个 TruthMatrix 类，我该如何：

1.  分配一个动态的 nXn 布尔矩阵，这样做的唯一方法如下？：

> 类真理矩阵 {

```
 bool **mat;
    public:
        TruthMatrix(int n) {
            mat=new bool*[n];
            for (int i=0;i<n;i++) {
                mat[i]=new bool[n];
            }
        }
    }; 
```

1.  覆盖 [][] 运算符以快速访问 mat[i][j] 中的矩阵元素

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T22:33:10.447

1.  不，这不是唯一的方法。你可以用一个大数组模拟一个矩阵，你可以使用 STL 容器来简化内存管理（对于一个）。（或使用`dynamic_bitset`或类似）。

2.  这可能不值得。矩阵类下标很常见，`operator()`因为它*更*容易实现。要使用几个方括号（类似于数组的数组），您需要一个合适的代理对象从您的返回`operator[]`（请注意，没有这样的东西`operator[][]`）。

例子：

```
class TruthMatrix {
    /* ... */
    bool& operator()(int row, int column); // usage: matrixobj(1, 2)
};
// or
class TruthMatrix {
     /* ... */
     class Proxy {
         /* ... */
         bool& operator[](int column);
     };
     Proxy operator[](int row); // usage: matrixobj[1][2]
 }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:35:52.107

一种方法如下：

```
vector<vector<bool>> tm(n, vector<bool>(n));

tm[i][j] = true; 
```

# mysql - mysql：神秘的横向单引号并且不为空

> ID：10889285
> 
> 赞同：2
> 
> 时间：2012-06-04T22:28:13.477
> 
> 标签：mysql

我有 2 个可以运行的查询，并且会得到 2 个完全不同的结果，这仅仅是因为我使用了“横向单引号”而不是单引号。见下文：

```
SELECT * FROM items WHERE 'natural' IS NOT NULL 
```

无论“自然”列是否设置为 NULL，都将返回每条记录

```
SELECT * FROM items WHERE `natural` IS NOT NULL 
```

只会**正确**返回为“自然”列设置值的记录

那是不对的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T22:29:32.947

您的第一个示例`'natural' IS NOT NULL`测试字符串文字`'natural'`是否不为空。由于字符串文字始终不为空，因此此条件将始终为真。

第二个示例测试 name 列的值`natural`。这就是你想要的。

**有关的**

[字符串文字](http://dev.mysql.com/doc/refman/5.6/en/string-literals.html)

> 字符串是由单引号 ( `'`) 或双引号 ( `"`) 字符括起来的字节或字符序列。

[架构对象名称](http://dev.mysql.com/doc/refman/5.6/en/identifiers.html)

> 标识符引号字符是反引号 ( ` )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:29:35.323

是的，它的行为正确。 `'natural'`是一个字符串值，因此`'natural' IS NOT NULL`将始终评估为真。

# oracle-adf - 在 Oracle ADF 中，我想在每次击键时进行 af:query 组件提交搜索

> ID：10889287
> 
> 赞同：0
> 
> 时间：2012-06-04T22:28:41.127
> 
> 标签：oracle-adf

我有一个 af:query 组件，当我输入值并点击搜索按钮时，它会正确查询表。

只要光标位于某个查询字段中，我想在按下某个键时自动搜索。例如，在值列表中表现得像自动完成。

关于如何做到这一点的任何建议？

我正在尝试使用 af:clientlistener，但这没有 af:query 组件中的按键可见性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T22:03:21.550

我怀疑这是否会带来不错的性能 - 并且实际上可能会让最终用户在每次击键时以填充的形式获取查询。无论如何，我认为您不能使用查询组件来执行此操作 - 也许您应该为此构建自己的搜索屏幕。如果您对查询字段的 LOV 感兴趣，这可能会有所帮助： [https](https://blogs.oracle.com/shay/entry/dependent_lovs_in_an_afquery_c) ://blogs.oracle.com/shay/entry/dependent_lovs_in_an_afquery_c https://blogs.oracle.com/shay/entry/adf_query_with_parameters_and_1

# html - 网站的元素在 IE 中不起作用

> ID：10889292
> 
> 赞同：0
> 
> 时间：2012-06-04T22:28:54.840
> 
> 标签：html, internet-explorer, css, web

在我为高中篮球队工作的网站上，某些元素在 Internet Explorer 中不起作用。该网站是 hermantownbasketball.com。男孩篮球侧边栏应该有嵌套的下拉菜单，当您将鼠标悬停在球队上时会出现一个，例如“高中”，然后当您将鼠标悬停在球队下的年级上时会出现另一个，例如 9 年级。这在 chrome 中工作得非常好，但是，我无法让它在任何版本的 Internet Explorer 中工作。下面是我正在使用的 html 和相应的 css 的一部分。

不幸的是，我不知道足够多的 CSS 来知道我的代码 IE 不喜欢哪一部分或如何修复它。

任何帮助是极大的赞赏！

### HTML

```
 <span class = "boyItem">
    <h3>High School</h3>

    <li class="group">
    <h4>9th Grade</h4>
    <div class = "nested">Schedule</div>
    <div class = "nested">Events</div>
    <div class ="nested">Forms</div>
    <div class ="nested">Calendar</div>
    </li>
    <li class="group">
    <h4>JV/Varsity</h4>
    <div class = "nested">Schedule</div>
    <div class = "nested">Events</div>
    <div class = "nested">Forms</div>
    <div class = "nested">Calendar</div>
    </li>

    </span>

    /* Creates the box around the title for each boy section. */
    .boyItem h3 { background:#1C23E8; 
    color:#EFFA20; 
    padding-right:2px; padding:10px; 
    font-size:18px; 
    margin-left:-30px; 
    margin-top:-10px;
    }

###CSS

    .boyItem h3:hover { background:#2A8FF5; }

    /* Prevents the boy sub-sections from being visable */
    .boyItem li h4 { position: absolute; left:-9999px; font-size:15px; list-style-type:none;} 

    /* Shows the boy sub-sections when user mouses over the section title. */
    .boyItem:hover li h4 { 
    position:relative; 
    left:10px; 
    background:#1C23E8; 
    color:#EFFA20;  
    padding-left:20px; 
    padding:5px;
    }

    .boyItem:hover li h4:hover { background:#2A8FF5;}

    .nested { position:absolute; 
    left:-9999px; 
    background:#352EFF; 
    color:#EFFA20; 
    padding-right:2px; 
    padding:4px; 
    font-size:14px; 
    margin:2px; 
    margin-left:30px; 
    margin-top:0px; 
    margin-right:0px; 
    margin-bottom:-2px;} 

    .group:hover .nested {position:relative; left:0px; } 
    .group:hover .nested:hover { background:#2A8FF5} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:37:39.227

Internet Explorer 以对（真实和事实上的）标准使用独特的方法而闻名。

试试[这个图书馆](http://code.google.com/p/ie7-js/)。不能保证它会解决任何问题，但绝对值得一试。

# sql-server - 什么是 TDS 协议 8.0 版，我为什么要使用它？

> ID：10889294
> 
> 赞同：12
> 
> 时间：2012-06-04T22:28:58.183
> 
> 标签：sql-server, freetds

一段时间以来，我一直在使用带有 8.0 协议的 FreeTDS 连接到 MSSQL 数据库，并且效果很好。但是，最近，事情开始变得不太好。我会省略细节。

所以我们决定我们需要知道更多，我对以下内容有点困惑：

[FreeTDS 是否支持 Microsoft 服务器？](http://www.freetds.org/faq.html#Does.FreeTDS.support.Microsoft.servers)

> 是的。Microsoft 服务器通常不接受 TDS 5.0 连接。使用协议的 4.2、7.0 或 8.0 版本之一。有关详细信息，请参阅[用户指南](http://www.freetds.org/userguide/choosingtdsprotocol.htm) 。

[用户指南](http://www.freetds.org/userguide/choosingtdsprotocol.htm)

```
[No mention of 8.0 anywhere on the page.] 
```

那么，什么是 TDS 协议 8.0 版，我为什么要使用它？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-05T00:39:14.213

FreeTDS“版本 8”实际上是版本 7.1。不幸的是，您必须查看“ [TDS 版本历史](http://www.freetds.org/userguide/tdshistory.html)”页面才能弄清楚这一点，但以下是那里的解释：

> 早期的 FreeTDS 文档提到了版本 7、8 和 9。微软随后发布了一份协议规范文档，表示 7.1 和 7.2，并且在其他地方也发现了使用该方案的零散参考。出于这个原因，FreeTDS 改用了微软的命名法。

# matlab - BNT gaussian_CPD 的简单示例/用例？

> ID：10889298
> 
> 赞同：1
> 
> 时间：2012-06-04T22:29:06.290
> 
> 标签：matlab, machine-learning, classification, bayesian-networks

我正在尝试使用 BNT 和 MATLAB 实现朴素贝叶斯分类器。到目前为止，我一直坚持使用简单的`tabular_CPD`变量和变量的“猜测”概率。到目前为止，我的原型网络包括以下内容：

```
DAG = false(5);
DAG(1, 2:5) = true;
bnet = mk_bnet(DAG, [2 3 4 3 3]);
bnet.CPD{1} = tabular_CPD(bnet, 1, [.5  .5]);
bnet.CPD{2} = tabular_CPD(bnet, 2, [.1  .345   .45 .355   .45 .3]);
bnet.CPD{3} = tabular_CPD(bnet, 3, [.2  .02    .59 .2     .2  .39    .01 .39]);
bnet.CPD{4} = tabular_CPD(bnet, 4, [.4  .33333 .5  .33333 .1  .33333]);
bnet.CPD{5} = tabular_CPD(bnet, 5, [.5  .33333 .4  .33333 .1  .33333]);
engine = jtree_inf_engine(bnet); 
```

这里变量 1 是我想要的输出变量，设置为最初为任一输出类分配 0.5 的概率。

变量 2-5 定义了我测量的特征的 CPD：

*   2 是一个簇大小，范围从 1 到十几个或更多
*   3 是一个实际值 >= 1 的比率
*   4 和 5 是标准偏差（实际）值（X 和 Y 散点图）

为了对候选集群进行分类，我将所有特征测量值分成 3-4 个范围括号，如下所示：

```
...
    evidence = cell(1, 5);
    evidence{2} = sum(M > [0 2 6]);
    evidence{3} = sum(O > [0 1.57 2 3]);
    evidence{4} = sum(S(1) > [-Inf 1 2]);
    evidence{5} = sum(S(2) > [-Inf 0.4 0.8]);
    eng = enter_evidence(engine, evidence);
    marginals = marginal_nodes(eng, 1);
    e = marginals.T(1);
... 
```

考虑到我只是在猜测范围括号和概率值，这实际上效果很好。但我相信我*应该*在这里使用的是`gaussian_CPD`. 我*认为*a`gaussian_CPD`可以学习最优括号和概率（作为均值和协方差矩阵和权重）。

我的问题是，我没有找到任何关于如何使用 BNT类的*简单示例。*`gaussian_CPD`例如，我将如何将 a 初始化为与上述变量`gaussian_CPD`之一大致相同的行为？`tabular_CPD`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:22:06.050

我最终通过在 MATLAB 命令提示符下尝试[BNT来解决这个问题。](http://code.google.com/p/bnt/)这是我使用`gaussian_CPD`节点定义分类器网络的方式：

```
DAG = false(5); DAG(1, 2:5) = true
bnet = mk_bnet(DAG, [2 1 1 2 1], 'discrete', 1);
bnet.CPD{1} = tabular_CPD(bnet, 1, 'prior_type', 'dirichlet');
for node = 2:5
   bnet.CPD{node} = gaussian_CPD(bnet, node);
end
bnet

DAG =

     0     1     1     1     1
     0     0     0     0     0
     0     0     0     0     0
     0     0     0     0     0
     0     0     0     0     0

bnet = 

               equiv_class: [1 2 3 4 5]
                    dnodes: 1
                  observed: []
                     names: {}
                    hidden: [1 2 3 4 5]
               hidden_bitv: [1 1 1 1 1]
                       dag: [5x5 logical]
                node_sizes: [2 1 1 2 1]
                    cnodes: [2 3 4 5]
                   parents: {[1x0 double]  [1]  [1]  [1]  [1]}
    members_of_equiv_class: {[1]  [2]  [3]  [4]  [5]}
                       CPD: {[1x1 tabular_CPD]  [1x1 gaussian_CPD]  [1x1 gaussian_CPD]  [1x1 gaussian_CPD]  [1x1 gaussian_CPD]}
             rep_of_eclass: [1 2 3 4 5]
                     order: [1 5 4 3 2] 
```

为了训练它，我使用我原来的分类器来帮助我标记一组 300 个样本，然后简单地通过训练算法运行其中的 2/3。

```
bnet = learn_params(bnet, lsamples);
CPD = struct(bnet.CPD{1}); % Peek inside CPD{1}
dispcpt(CPD.CPT);

1 : 0.6045 
2 : 0.3955 
```

的输出`dispcpt`粗略地了解了训练集中标记样本中的类别分配之间的细分。

为了测试新分类器，我通过原始贝叶斯网络和新贝叶斯网络运行了最后 1/3 的结果。这是我用于新网络的代码：

```
engine = jtree_inf_engine(bnet);
evidence = cell(1, 5);
tresults = cell(3, length(tsamples));
tresults(3, :) = tsamples(1, :);
for i = 1:length(tsamples)
    evidence(2:5) = tsamples(2:5, i);
    marginal = marginal_nodes(enter_evidence(engine, evidence), 1);
    tresults{1, i} = find(marginal.T == max(marginal.T)); % Generic decision point
    tresults{2, i} = marginal.T(1);
end
tresults(:, 1:8)

ans = 

    [         2]    [     1]    [         2]    [         2]    [         2]    [     1]    [     1]    [     1]
    [1.8437e-10]    [0.9982]    [3.3710e-05]    [3.8349e-04]    [2.2995e-11]    [0.9997]    [0.9987]    [0.5116]
    [         2]    [     1]    [         2]    [         2]    [         2]    [     1]    [     1]    [     2] 
```

然后为了弄清楚是否有任何改进，我绘制了重叠的 ROC 图。事实证明，我原来的网络做得很好，很难确定使用高斯 CPD 训练的网络是否做得更好。打印 ROC 曲线下的区域可以清楚地表明，新网络的性能确实略好一些。（`base area`是原网，`area`是新网。）

```
conf = cell2mat(tresults(2,:));
hit = cell2mat(tresults(3,:)) == 1;
[~, ~, basearea] = plotROC(baseconf, basehit, 'r')
hold all;
[~, ~, area] = plotROC(conf, hit, 'b')
hold off;

basearea =

    0.9371

area =

    0.9555 
```

![ROC 图](../Images/60979bc5a6d8ad1a897c548e64dcd4cb.png)

我在这里发布这个，以便下次我需要这样做时，我将能够找到答案......希望其他人也能发现它也很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:56:03.943

我在下面提供了一个完整的示例，该示例说明了如何使用 BNT 工具箱构建一个朴素的贝叶斯网络。我正在使用[汽车数据集的一个子集](http://archive.ics.uci.edu/ml/datasets/Auto+MPG)。它包含离散和连续属性。

为方便起见，我使用了几个需要统计工具箱的函数。

我们首先准备数据集：

```
%# load dataset
D = load('carsmall');

%# keep only features of interest
D = rmfield(D, {'Mfg','Horsepower','Displacement','Model'});

%# filter the rows to keep only two classes
idx = ismember(D.Origin, {'USA' 'Japan'});
D = structfun(@(x)x(idx,:), D, 'UniformOutput',false);
numInst = sum(idx);

%# replace missing values with mean
D.MPG(isnan(D.MPG)) = nanmean(D.MPG);

%# convert discrete attributes to numeric indices 1:mx
[D.Origin,~,gnOrigin] = grp2idx( cellstr(D.Origin) );
[D.Cylinders,~,gnCylinders] = grp2idx( D.Cylinders );
[D.Model_Year,~,gnModel_Year] = grp2idx( D.Model_Year ); 
```

接下来我们建立我们的图形模型：

```
%# info about the nodes
nodeNames = fieldnames(D);
numNodes = numel(nodeNames);
node = [nodeNames num2cell((1:numNodes)')]';
node = struct(node{:});
dNodes = [node.Origin node.Cylinders node.Model_Year];
cNodes = [node.MPG node.Weight node.Acceleration];
depNodes = [node.MPG node.Cylinders node.Weight ...
            node.Acceleration node.Model_Year];

vals = cell(1,numNodes);
vals(dNodes) = cellfun(@(f) unique(D.(f)), nodeNames(dNodes), 'Uniform',false);
nodeSize = ones(1,numNodes);
nodeSize(dNodes) = cellfun(@numel, vals(dNodes));

%# DAG
dag = false(numNodes);
dag(node.Origin, depNodes) = true;

%# create naive bayes net
bnet = mk_bnet(dag, nodeSize, 'discrete',dNodes, 'names',nodeNames, ...
    'observed',depNodes);
for i=1:numel(dNodes)
    name = nodeNames{dNodes(i)};
    bnet.CPD{dNodes(i)} = tabular_CPD(bnet, node.(name), ...
        'prior_type','dirichlet');
end
for i=1:numel(cNodes)
    name = nodeNames{cNodes(i)};
    bnet.CPD{cNodes(i)} = gaussian_CPD(bnet, node.(name));
end

%# visualize the graph
[~,~,h] = draw_graph(bnet.dag, nodeNames);
hTxt = h(:,1); hNodes = h(:,2);
set(hTxt(node.Origin), 'FontWeight','bold', 'Interpreter','none')
set(hNodes(node.Origin), 'FaceColor','g')
set(hTxt(depNodes), 'Color','k', 'Interpreter','none')
set(hNodes(depNodes), 'FaceColor','y') 
```

现在我们将数据分成训练/测试：

```
%# build samples as cellarray
data = num2cell(cell2mat(struct2cell(D)')');

%# split train/test: 1/3 for testing, 2/3 for training
cv = cvpartition(D.Origin, 'HoldOut',1/3);
trainData = data(:,cv.training);
testData = data(:,cv.test);
testData(1,:) = {[]};    %# remove class 
```

最后我们从训练集中学习参数，并预测测试数据的类别：

```
%# training
bnet = learn_params(bnet, trainData);

%# testing
prob = zeros(nodeSize(node.Origin), sum(cv.test));
engine = jtree_inf_engine(bnet);         %# Inference engine
for i=1:size(testData,2)
    [engine,loglik] = enter_evidence(engine, testData(:,i));
    marg = marginal_nodes(engine, node.Origin);
    prob(:,i) = marg.T;

end
[~,pred] = max(prob);
actual = D.Origin(cv.test)';

%# confusion matrix
predInd = full(sparse(1:numel(pred),pred,1));
actualInd = full(sparse(1:numel(actual),actual,1));
conffig(predInd, actualInd);             %# confmat

%# ROC plot and AUC
figure
[~,~,auc] = plotROC(max(prob), pred==actual, 'b')
title(sprintf('Area Under the Curve = %g',auc))
set(findobj(gca, 'type','line'), 'LineWidth',2) 
```

结果：

![朴素贝叶斯网](../Images/3e05f317d2598025fca89412984371f2.png) ![混淆矩阵](../Images/733175e84d4bbd06f7da97bd277802b7.png) ![ROC 图](../Images/2376e247896ecc75ee746ce18ad148c8.png)

我们可以提取每个节点的 CPT 和均值/西格玛：

```
cellfun(@(x)dispcpt(struct(x).CPT), bnet.CPD(dNodes), 'Uniform',false)
celldisp(cellfun(@(x)struct(x).mean, bnet.CPD(cNodes), 'Uniform',false))
celldisp(cellfun(@(x)struct(x).cov, bnet.CPD(cNodes), 'Uniform',false)) 
```

# sesame - 芝麻并发连接

> ID：10889300
> 
> 赞同：1
> 
> 时间：2012-06-04T22:29:26.103
> 
> 标签：sesame

我正在使用芝麻 RDFStore。我想知道芝麻可以支持多少传入的并发请求（连接）。

是否有任何 Jetty/Sesame 配置可以更改以支持更多？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T01:32:23.900

与 webapp 的并发连接数由 Jetty 决定，而不是 Sesame。Sesame 本身在其大多数后端支持多线程访问，因此您实际上只受每个线程消耗的资源数量的限制（例如，如果您必须同时序列化 X 个大型查询结果，您可能会耗尽内存）。

# c# - 在 Canvas 和 XAML 上处理 DocPanel

> ID：10889306
> 
> 赞同：1
> 
> 时间：2012-06-04T22:30:01.127
> 
> 标签：c#, wpf, xaml

我需要使用 XAML 在窗口左侧创建 3 列（可停靠）。这个窗口曾经是一个 Grid 基础，现在它应该是 Canvas，所以下面的代码将不再起作用：

```
 <StackPanel Grid.Column="0" Margin="1,1,7,0">
        </StackPanel>
        <Expander Header="one"  IsExpanded="True"/>
        <Expander Header="two" IsExpanded="True"/>
        <Expander Header="three"  IsExpanded="True"/>
    </StackPanel> 
```

所以我现在改为使用容器。但是，**One**，**Two**和**Three**显示在 line line 但是，我需要垂直显示它们。

```
<DockPanel HorizontalAlignment="Stretch" Margin="0,0,0,0" Width="Auto">
    <Expander Header="One" IsExpanded="True"/>
    <Expander Header="Two" IsExpanded="True"/>
    <Expander Header="Three" IsEnabled="True"/> 
```

我的目标是在窗口左侧创建工具栏，这样这些工具栏就会显示一些用户可以拖放到 Canvas 上的控件。如果各位专家也能给我一些关于这个问题的提示，我将不胜感激。

问候， 阿米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:58:25.897

假设我正确理解了您想要的内容，您需要将 'DockPanel.Dock="Top"' 添加到除最后一个之外的所有扩展器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T10:53:19.317

您是否正在寻找类似对接系统的 Visual Studio。试试阿瓦隆码头

[http://avalondock.codeplex.com/](http://avalondock.codeplex.com/)

![在此处输入图像描述](../Images/e8def87b6ea2c80ff853ce5dbb95a461.png)

# xna - XNA/DirectX 10/11 - 可以重复使用 VertexBuffer 吗？

> ID：10889310
> 
> 赞同：1
> 
> 时间：2012-06-04T22:30:20.520
> 
> 标签：xna, directx, xna-4.0

我在 XNA 中使用 VertexBuffers。我的问题是它们可以重复使用吗？我的意思是： 1\. 我将一些数据放入 VertexBuffer 2\. 一段时间后数据变得过时 3\. 我将新数据放入 sam VertexBuffer （不处理）

在代码中它看起来像这样

```
var verts = new ...
VertexBuffer vb = new ...
vb.SetData(verts);
...SOME TIME PASSES vb BECOMES OBSOLETE...
var verts2 = new ...
vb.SetData(verts2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T23:23:54.063

是的...尽管您希望将顶点缓冲区声明为 DynamicVertexBuffer 类型（而不仅仅是普通的旧 VertexBuffer）并订阅 ContentLost 事件以在缓冲区丢失时重新填充缓冲区（例如，由于显卡上的内存压力） ）。

# delphi - if else 语句没有正确执行

> ID：10889313
> 
> 赞同：1
> 
> 时间：2012-06-04T22:30:38.227
> 
> 标签：delphi, delphi-7, delphi-xe2, delphi-xe

我的 if else 语句有一个非常有趣的行为。开始时，备忘录是空的，尝试删除会触发消息。然后，如果我在备忘录中写了一些东西并尝试删除，则会再次出现正确的消息。但是，在最后一次删除之后（备忘录现在是空的），如果我再次单击删除，我会收到第二条消息而不是第一条消息（没有什么可删除的。我是否弄乱了 if else 语句？？这里的正确方法是什么？

```
procedure TForm1.AdvGlowButton2Click(Sender: TObject);
begin
   if advmemo1.IsEmpty then
      ShowMessage('Nothing to delete !')
   else  
   begin
     if MessageDlg('Delete everything?',
                     mtConfirmation, [mbYes, mbNo], 0) = mrYes then begin
       advmemo1.Lines.Clear;
       advmemo1.Lines.SaveToFile(ExtractFilePath(Application.ExeName)+ '\memo.txt');
     end;
   end;
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T23:23:47.363

您显示的代码没有任何问题，因此显然`IsEmpty`必须在最后一次删除后返回 False 而不是返回 True，这表明 1）并非所有内容都像您想象的那样实际删除，或者 2）`IsEmpty`有问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T00:31:30.887

保存后你必须打电话

```
advmemo1.RefreshMemo; 
```

# specs - 如何找到 PlayStation 存储卡规格？

> ID：10889316
> 
> 赞同：1
> 
> 时间：2012-06-04T22:30:42.757
> 
> 标签：specs, playstation

很久以前，我试图在互联网上找到 Play Station（1 和 2）内存卡的规格保存游戏的规格，但没有结果

今天我再次搜索，但找不到它们。据我所知，存储卡中的每个存档游戏都有一些共同的标题：图像（我不知道他们使用的图像格式），存档游戏的文本，可能还有它的大小。您可以通过使用 playstation（1 或 2）浏览存储卡并获得保存游戏列表来查看它。

任何人都可以指出我在哪里看的正确方向？

PS这是一个我想编写代码来处理它的库，任何重要的东西，但我很好奇。谢谢

# javascript - 是否有工作的 dojo tabContainer 可以成功地重新加载到 contentPane 中？

> ID：10889319
> 
> 赞同：0
> 
> 时间：2012-06-04T22:31:03.560
> 
> 标签：javascript, dom, dojo

我并不懒惰，但尝试了很多方法尝试重新加载包含 dojo TabContainer(id=dojoTabbedPane) 的 div(id=refreshable)。每次重新加载页面后，每个选项卡中的所有内容都会显示一个堆栈（缺少选项卡）。

我做了一些研究，提出问题，并`dijit.byId("dojoTabbedPane").destroyRecursive();`在 jQuery 加载之前使用，然后`dojo.parser.parse(dojo.byId("dojoTabbedPane"));`在重新加载后调用，但从来没有用过。

所以，拜托，任何人都可以分享一个简单的片段，实际上可以告诉我 tabContainer 看起来不错，它的容器被刷新了吗？我发誓我尝试了很多理论上的方法，它应该可以工作，但是谁能给我一个非常简单的代码让我看到它有效吗？

我不知道如何在这里粘贴大块代码，否则我将给出一个基本示例，所以有兴趣的人可以帮助修改，这里我准备了一个来自 Dojo 网站的 tabContainer，请帮助我解决它。谢谢 ！！

```
<script type="text/javascript" 
src="dojo/dojo/dojo.js"  
djConfig="parseOnLoad: true"></script> 

<script type="text/javascript" >
function refresh_data(url, id) {
j('#'+id).load(url+' #'+id+' > *', function (response) {
      dojo.parser.parse(dojo.byId("dojoTabbedPane"));
});
}
</script>
<script type="text/javascript">
    var login_url = '<spring:url value="/login" />';

    j(function() {
        setInterval('refresh_data("file:///D:/Dojo/dojo.tabbed.pane_very_good.html?hash="+Math.random(), "refreshable");', 9000); 
    });
    // this disables errors in IE7
    function noError(){return true;}
    window.onerror = noError;
</script>
<style type="text/css"> 
@import "dojo/dijit/themes/tundra/tundra.css"; 
</style>
<script type="text/javascript">
dojo.require("dojo.parser");
dojo.require("dijit.layout.TabContainer");
dojo.require("dijit.layout.ContentPane");
</script>
</head>
<body class="tundra">
    <!-- this div is only for documentation purpose, in real development environments, just take it out -->
<div style="width: 350px; height: 300px">
<div data-dojo-type="dijit.layout.TabContainer" style="width: 100%; height: 100%;">
    <div data-dojo-type="dijit.layout.ContentPane" title="My first tab" selected="false">
        Lorem ipsum and all around...
    </div>
    <div data-dojo-type="dijit.layout.ContentPane" title="My second tab"  selected="true">
        Lorem ipsum and all around - second...
    </div>
    <div data-dojo-type="dijit.layout.ContentPane" title="My last tab" closable="true">
        Lorem ipsum and all around - last...
</div>
</div>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:11:32.960

这是一个关于 jQuery 的问题，在完整的回调运行时 load 是否已经设置了 #replaceable 的 innerHTML。但只需将超时行取消注释为“unhook”并让加载机制在调用解析器之前完成。所以试试这个：

```
<div id="replaceable">

</div>

<script>
function refresh_data(url, id) {

  var w = dijit.byId("dojoTabbedPane"),
      domNode = dojo.byId(id);
  if(w)  w.destroyRecursive();

  j(domNode).load(url+' #'+id+' > *', function (response) {
      // setTimeout(function() {
         dojo.parser.parse(domNode);
         w = dijit.byId("dojoTabbedPane");
         w.resize(dojo.getMarginBox(domNode));
      // }, 200);

  });
}

dojo.addOnLoad(function() {
    var login_url = '<spring:url value="/login" />';
    setInterval('refresh_data("file:///D:/Dojo/dojo.tabbed.pane_very_good.html?hash="+Math.random(), "refreshable");', 9000); 
});
</script> 
```

# matlab - 多于一维的逻辑数组

> ID：10889323
> 
> 赞同：1
> 
> 时间：2012-06-04T22:31:37.130
> 
> 标签：matlab, matrix, nan

```
 adc.nv is 789 X 2 array

        in = ~isnan(adc.nv);

        nv = adc.nv(in); 
```

在我这样做之后，我得到 1576 X 1 数组而不是 788 X 2 数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T00:21:23.663

这种行为在这里解释：http: [//www.mathworks.nl/help/techdoc/math/f1-85462.html#bq7egb6-1](http://www.mathworks.nl/help/techdoc/math/f1-85462.html#bq7egb6-1)

因为

```
in = ~isnan(adc.nv); 
```

`in`每行和/或列中可以有不同数量的真/假元素，结果矩阵可能`adc.nv(in)`每行/列有不同数量的元素，因此不能构造为*矩阵*所以Matlab将它们全部放在一起一个向量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T00:18:15.253

也许您打算消除包含 NaN 值的行。例子：

```
>> x = rand(6,2);
>> x(3,1) = nan; x(5,2) = nan;
>> x
x =
      0.81472       0.2785
      0.90579      0.54688
          NaN      0.95751
      0.91338      0.96489
      0.63236          NaN
      0.09754      0.97059 
```

现在：

```
>> newX = x(~any(isnan(x),2),:)
newX =
      0.81472       0.2785
      0.90579      0.54688
      0.91338      0.96489
      0.09754      0.97059 
```

# php - 登录重定向无限循环

> ID：10889324
> 
> 赞同：1
> 
> 时间：2012-06-04T22:31:40.283
> 
> 标签：php, redirect, login, infinite-loop

我有一个通常对我有用的登录脚本，但在检查存储用于登录的 cookie 后，偶尔会在重定向时进入无限循环。浏览器将报告类似以下内容：“Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。” 其他人也报告了这个问题。以下是登录过程的关键要素。我想知道是否有人可以看到这个过程/脚本有什么问题。

谢谢，

缺口

首先在**每个受保护页面的顶部**：

```
<?php
session_start();

$_SESSION['url'] = $_SERVER['REQUEST_URI'];

require('login/config.php');
require('login/functions.php'); 

if (allow_access(Users) != "yes")
{ 
include ('login/check_login.php'); 
exit;
}
?> 
```

然后在**check_login.php**：

```
<?
session_start();

//check to see if the user already has an open session
if (($_SESSION[user_name] != "") && ($_SESSION[password] != ""))
{

    header("Location:$_SESSION[redirect]");
    exit;
}

$lr_user = $_COOKIE['lr_user'];
$lr_pass = $_COOKIE['lr_pass'];

//check to see if cookies have been set previously
if(($lr_user != "") && ($lr_pass != ""))
{
    header("Location:/login/redirect.php");
    exit;
}

//if neither is true, redirect to login
    header("Location:/login/login.php");

?> 
```

然后，在**redirect.php 中：**

```
<?
session_start();

//require the functions file
require ("config.php");
require ("functions.php");

$lr_user = $_COOKIE['lr_user'];
$lr_pass = $_COOKIE['lr_pass'];

//check to see if cookies are already set, remember me
if ((!$lr_user) || (!$lr_pass))
{

$username = $_POST[username];
$password = $_POST[password];

}else{

$username = $lr_user;
$password = $lr_pass;

}

//sets cookies to remember this computer if the user asks to
if ($_POST[remember] == "Yes")
{
setcookie("lr_user", $username, $duration, "/", $domain);
setcookie("lr_pass", $password, $duration, "/", $domain);
}

//sets session variables
sess_vars($base_dir, $server, $dbusername, $dbpassword, $db_name, $table_name, $username, $password);

if(isset($_SESSION['url']))
  $_SESSION[redirect] = $_SESSION['url']; // holds url for last page visited.
else 
   $_SESSION[redirect] = "/index.php"; // default page for

//redirects the user    
header("Location:$_SESSION[redirect]");
?> 
```

**函数.php**

```
<?php

//function to get the date
function last_login()
{
    $date = gmdate("Y-m-d");
    return $date;
}

//function that sets the session variable
function sess_vars($base_dir, $server, $dbusername, $dbpassword, $db_name, $table_name, $username, $password)
{

    //make connection to dbase
    $connection = @mysql_connect($server, $dbusername, $dbpassword)
                or die(mysql_error());

    $db = @mysql_select_db($db_name,$connection)
                or die(mysql_error());

    $sql = "SELECT * FROM $table_name WHERE username = '$username' and password = password('$password')";

    $result = @mysql_query($sql, $connection) or die(mysql_error());

    //get the number of rows in the result set
    $num = mysql_num_rows($result);

    //set session variables if there is a match
    if ($num != 0) 
    {
        while ($sql = mysql_fetch_object($result)) 
        {
            $_SESSION[first_name]   = $sql -> firstname;
            $_SESSION[last_name]    = $sql -> lastname; 
            $_SESSION[user_name]    = $sql -> username;       
            $_SESSION[password]     = $sql -> password;
            $_SESSION[group1]       = $sql -> group1;
            $_SESSION[group2]       = $sql -> group2;
            $_SESSION[group3]       = $sql -> group3;
            $_SESSION[pchange]      = $sql -> pchange;  
            $_SESSION[email]        = $sql -> email;
            $_SESSION[redirect]     = $sql -> redirect;
            $_SESSION[verified]     = $sql -> verified;
            $_SESSION[last_login]   = $sql -> last_login;
        }
    }else{
        $_SESSION[redirect] = "$base_dir/errorlogin.php";
    }
}

//functions that will determine if access is allowed
function allow_access($group)
{
    if ($_SESSION[group1] == "$group" || $_SESSION[group2] == "$group" || $_SESSION[group3] == "$group" ||
        $_SESSION[group1] == "Administrators" || $_SESSION[group2] == "Administrators" || $_SESSION[group3] == "Administrators" ||
        $_SESSION[user_name] == "$group")
        {
            $allowed = "yes";
        }else{
            $allowed = "no";
        }
    return $allowed;
}

//function to check the length of the requested password
function password_check($min_pass, $max_pass, $pass)
{

    $valid = "yes";
    if ($min_pass > strlen($pass) || $max_pass < strlen($pass))
    {
        $valid = "no";
    }

    return $valid;
}

?> 
```

**配置文件**

```
<?

//set up the names of the database and table
$db_name ="";
$table_name ="authorize";

//connect to the server and select the database
$server = "localhost";
$dbusername = "";
$dbpassword = "*";

//domain information
$domain = "";

//Change to "0" to turn off the login log
$log_login = "1";

//base_dir is the location of the files, ie http://www.yourdomain/login
$base_dir = "";

//length of time the cookie is good for - 7 is the days and 24 is the hours
//if you would like the time to be short, say 1 hour, change to 60*60*1
$duration = time()+60*60*24*365*10;

//the site administrator\'s email address
$adminemail = "";

//sets the time to EST
$zone=3600*00;

//do you want the verify the new user through email if the user registers themselves?
//yes = "0" :  no = "1"
$verify = "0";

//default redirect, this is the URL that all self-registered users will be redirected to
$default_url = "";

//minimum and maximum password lengths
$min_pass = 8;
$max_pass = 15;

$num_groups = 0+2;
$group_array = array("Users","Administrators");

?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T00:29:14.107

**编辑 - 试试这个：**

我认为问题在于我假设您正在尝试保护还包括 index.php 的“所有”页面。但是，您已将 index.php 作为页面包含在 $_SESSION[redirect] 变量中。你应该按照以下思路思考：

1.  用户尝试访问页面
2.  你应该检查他们是否被允许
3.  如果允许，就让他们不间断地查看页面
4.  如果他们不是（即未登录） - 将他们重定向到您的登录页面

即使允许他们查看页面（这会导致循环问题），您的脚本仍在尝试重定向它们。

这是一个微妙的区别，但很重要（尤其是当您保护所有页面时）。

## 我会试试这个：

在受保护页面的顶部，将底部代码段更改为：

```
if (allow_access(Users) != "yes")
{ 
    include ('login/check_login.php'); 
    check_redirect();
} 
```

**在你的 check_login.php 试试这个：**

```
<?
session_start();

function check_redirect()
{

    //check to see if the user already has an open session
    if (($_SESSION[user_name] != "") && ($_SESSION[password] != ""))
    {
       // just return if they are a valid user (no need to redirect them)
       return;
    }

    $lr_user = $_COOKIE['lr_user'];
    $lr_pass = $_COOKIE['lr_pass'];

    //check to see if cookies have been set previously
    if(($lr_user != "") && ($lr_pass != ""))
    {
       // just return if they are a valid user (no need to redirect them)
       return;
    }

    //if neither is true, redirect to login
    header("Location:/login/login.php");
    die();

}  
?> 
```

您的 redirect.php 不需要单独保护您的页面，我假设您将其与实际的 login.php 脚本一起使用，因此：

```
$_SESSION['url'] 
```

将存储他们试图访问的页面，并且您的 redirect.php / login.php 脚本应该在成功登录后使用它来将它们重定向回那里。

最后，上面是未经测试的代码，但应该比你拥有的更好，让我知道你的进展情况。

* * *

老实说，很难确定您的代码到底出了什么问题，因为仍然有一些未知变量，例如配置和函数文件以及函数：

```
if (allow_access(Users) != "yes") 
```

我假设用户应该是“用户”，同样，除非它只是为这个问题松散地输入了所有你拥有的变量，比如 $_SESSION[user_name] 你必须确保你正确地添加了撇号，否则你会在整个地方收到通知（未定义的变量，假设...等）更不用说这可能会弄乱您的会话数据。

也许如果我对您当前的代码提供了一些建议，您也许可以尝试一些可以修复您的代码的方法。

## 多个重定向/脚本

我会首先重写你的 check_login.php 和 redirect.php 脚本——事实上你有两个单独的脚本（可以组合）总是会在某个阶段给你带来问题，因为本质上你正在重定向到一个重定向（这不是从逻辑上讲，当你大声说出来时）。因此，首先将您的脚本重写为一个“auth.php”脚本。并且还简化了需要身份验证的页面的包含，例如：

```
<?php
    session_start();

    // use require_once for your login scripts, not 'include' as you want an error to 
    // occur to halt the page processing if the file is not found, include will just
    // give a warning but still continue with the page processing (which you're trying
    // to protect). Lastly '_once' so you don't get multiple inclusions of the same
    // script by accident (which is always import for login / redirect scripts). 
    require_once('login/auth.php');

    // just create one function which will proxy all the other functions / includes
    // you could exclude this function and just use the require_once file for direct 
    // access - but I would say including a function will make it easier to understand.
    check_login();
?> 
```

**现在 auth.php 文件：**

```
<?php
    session_start();

    // if these are required use the _once. I would guess some of these 'functions'
    // may be able to be included within this 'auth.php' file directly?
    require_once('login/config.php');
    require_once('login/functions.php'); 

    // set your variables here
    $_SESSION['url'] = $_SERVER['REQUEST_URI'];

    // the main check login function
    function check_login() 
    {

        // Check if your user is logged in / needs to be logged in
        // perhaps something from your allow_access() function?

        // Do all the checks for session / cookie you should resolve the checks to
        // a simple bool variable (i.e. if the user is valid or not)
        $userIsValid = true || false; // get this from above code

        // Then use the redirect function and pass in the $userIsValid variable
        // which will tell the redirect() function where to redirect to.
        redirect($userIsValid);

    }

    // use a separate function for the redirect to keep it cleaner 
    // not too sure on all the Url's you have floating around in your code as I
    // would think you either want to let them to proceed to the page they were
    // trying to view (if validated) or you want them to login?      
    function redirect($validUser = false)
    {
        // if the user is valid, just return as you don't have to redirect them
        if ( $validUser ) {
            return true;
        }
        // otherwise just redirect them to the login page
        header("Location:/login/login.php");
        die();
    }

?> 
```

# 安全

您不需要（也不应该！）将实际密码存储在会话中，我当然也建议不要使用 cookie。但是，如果您必须将密码/用户名存储在 cookie 中，至少您必须使用 md5() 和盐等对其进行加密。所以简而言之，而不是检查 $_SESSION['user_name'] 和 $_SESSION['密码'] 它可能只是这样的：

```
// if the user has no valid session do something:
if ( !isset($_SESSION['id']) ) {

} 
```

## 关注点分离

我不确定你为什么有：

```
$username = $_POST[username];
$password = $_POST[password]; 
```

在您的 redirect.php 文件中，您是否也在用户登录时使用此脚本？如果您是，我认为这不是一个好主意（这可能是问题所在）。您应该有一个单独的脚本来处理所有实际的登录功能（包括登录后的重定向）。以上内容应该只关注a）检查用户是否有效/登录b）如果不是则重定向它们 - 本质上保护您的网页。

**您的代码：**

```
//check to see if the user already has an open session
if (($_SESSION[user_name] != "") && ($_SESSION[password] != ""))
{

    header("Location:$_SESSION[redirect]");
    exit;
} 
```

我不确定我是否在上下文中得到了这一点，因为如果他们有一个有效的会话，你基本上会重定向他们？从头开始，我并不真正了解整个 check_login.php 脚本，因为事情有点倒退（尤其是与您的 redirect.php 脚本结合使用时）。您正在再次检查相同的变量 ($lr_user) || (!$lr_pass) 在您的重定向脚本中，并引用甚至尚未在您的 check_login.php 脚本中设置的内容。

**编辑：可以解决吗？** 除非我看过上面的代码块引用了 $_SESSION['redirect'] 的东西，否则我认为应该是 $_SESSION['url'] 或者只是不重定向它们。$_SESSION['redirect'] 直到 redirect.php 脚本（如果会话存在，可能不会被调用）才被设置。

## 最后的想法：

抱歉，如果这并不能真正回答您希望的问题，但我真的认为这将是一个很好的机会来仔细查看您的脚本并清理/简化它们。理想情况下，您应该使用 OOP 方法来看待这个问题，即创建会话、重定向、登录类。但是，如果坚持使用普通函数（程序），请确保为每个脚本创建一个干净的分隔。简而言之：

*   不要重复自己，例如为什么 $_SESSION['redirect'] 和 $_SESSION['url'] 这些是相同的值？
*   不要重定向到重定向（一个脚本应该处理这个）
*   分离您的顾虑 - 让登录脚本执行登录过程，并使用身份验证/acl 脚本保护您的实际页面（不要将两者结合起来）。

希望以上是有道理的，但如果没有，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:56:54.917

如果您真的想使用此代码，我认为这是答案：

对于禁用 cookie（隐私浏览）的用户，您的所有用户都会因为**check_login.php**中的行而卡住。因为这些值永远不会被设置，并且会陷入**check_login.php** -> **login.php** -> **check_login.php**的循环：

```
$lr_user = $_COOKIE['lr_user']; 
$lr_pass = $_COOKIE['lr_pass']; 

//check to see if cookies have been set previously 
if(($lr_user != "") && ($lr_pass != "")) 
{     
header("Location:/login/redirect.php");     
exit; 
}

//if neither is true, redirect to login        
header("Location:/login/login.php"); 
```

Bur 我真的建议您使用一些[现成的](http://codeigniter.com/wiki/EckoSession/revision/9386)会话管理片段。

我快速浏览了一下发现的问题：

a) 正如史蒂夫所说，您永远不能将用户名和密码保存在 cookie 中。您只保存一个随机会话 id 值。

```
setcookie("lr_user", $username, $duration, "/", $domain); 
setcookie("lr_pass", $password, $duration, "/", $domain); 
```

b) 您的**functions.php**受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的影响。

```
$sql = "SELECT * FROM $table_name WHERE username = '$username' and 
password = password('$password')"; 
```

c) 用户输入永远不会被转义。

```
$username = $_POST[username];                 
$password = $_POST[password]; 
```

d) 您在整个代码中拆分了会话管理检查。

# nagios - Nagios 电子邮件不起作用

> ID：10889327
> 
> 赞同：-1
> 
> 时间：2012-06-04T22:31:55.750
> 
> 标签：nagios

我试图弄清楚这一点，但我因此失败了，或者我可能忽略了一些东西。我已经设置了 nagios 服务器和客户端。我遇到的问题是服务器没有向联系人或联系人组发送电子邮件。相反，我在 /var/log/syslog （ubuntu 服务器）中看到了所有通知。

Postfix 安装得很好，我已经使用 mail 和 mailx 发送了许多测试（在某个地方阅读了 nagios3 首选 mailx 的地方）。

我还应该提到，在同一主机上运行的 Icinga 也发生了同样的问题。

任何帮助将不胜感激。

谢谢，

帕特里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T02:51:47.803

你的配置文件`command.cfg`应该有类似的东西：

```
define command{
  command_name    notify-host-by-email
  command_line    /usr/bin/printf "%b" "***** Nagios *****\n\nNotification Type: $NOTIFICATIONTYPE$\nHost: $HOSTNAME$\nState: $HOSTSTATE$\nAddress: $HOSTADDRESS$\nInfo: $HOSTOUTPUT$\n\nDate/Time: $LONGDATETIME$\n" | /usr/bin/mail -s "** $NOTIFICATIONTYPE$ Host Alert: $HOSTNAME$ is $HOSTSTATE$ **" $CONTACTEMAIL$
}

define command{
 command_name    notify-service-by-email
 command_line    /usr/bin/printf "%b" "***** Nagios *****\n\nNotification Type: $NOTIFICATIONTYPE$\n\nService: $SERVICEDESC$\nHost: $HOSTALIAS$\nAddress: $HOSTADDRESS$\nState: $SERVICESTATE$\n\nDate/Time: $LONGDATETIME$\n\nAdditional Info:\n\n$SERVICEOUTPUT$" | /usr/bin/mail -s "** $NOTIFICATIONTYPE$ Service Alert: $HOSTALIAS$/$SERVICEDESC$ is $SERVICESTATE$ **" $CONTACTEMAIL$
} 
```

并编辑文件`contact.cfg`，使其看起来像这样：

```
define contact{
        contact_name                    nagiosadmin             ; Short name of user
        use                             generic-contact         ; Inherit default 
        alias                           Nagios Admin            ; Full name of user

       email                           tandn@eposi.vn  ; <<***** CHANGE THIS TO Email
        } 
```

之后，检查 nagios 然后重新启动它：

```
sudo /usr/local/nagios/bin/nagios -v /etc/nagios/nagios.cfg
sudo /etc/init.d/nagios restart 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T07:08:57.127

停止 postfix 并尝试使用 Sendmail，它会工作

# user-interface - 如何创建这个 Java Swing 分隔符 UI 组件？

> ID：10889330
> 
> 赞同：0
> 
> 时间：2012-06-04T22:32:05.470
> 
> 标签：user-interface, jtable, toggle, separator

我正在 Swing 中创建一个 UI，它可以切换显示不同数据的各种 JTable，就像下面附加的示例图像一样。

有谁知道如何创建在红色框中突出显示的分隔 UI 组件，以切换其各自的 UI 组件？

我已经完成了使用 JButtons 切换 JPanel 的意图，但是与附加示例相比，我的 UI 布局并不干净。

蒂亚！

（对不起...新用户不能发布图片）

[示例 Swing UI](http://db.tt/cTARn0WK)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:15:32.650

答：我使用了一个 JButton，里面画了一个分隔图形来创建可点击的分隔图形。

# c# - 压缩小字符串，用什么来创建外部字典？

> ID：10889335
> 
> 赞同：6
> 
> 时间：2012-06-04T22:32:23.583
> 
> 标签：c#, .net, compression

我想压缩很多小字符串（大约 75-100 长度的 c# 字符串）。在创建字典时，我已经知道所有短字符串（近一万亿）。将来不会有额外的短字符串。我需要额外的一个字符串而不解压缩其他字符串。

现在我正在寻找一个库或执行以下操作的最佳方法：

1.  使用我拥有的所有字符串创建字典
2.  使用此字典压缩每个字符串
3.  一种使用 1 中的字典压缩一个字符串的方法。

我找到了一个[很好的相关问题](https://stackoverflow.com/questions/479218/how-to-compress-small-strings)，但这不是 c# 特定的。也许有一些我不知道的 c# 的东西，或者一个花哨的库或者有人已经这样做了。这就是我问这个问题的原因。

编辑：

用字典我说的是这样的事情：[http](http://en.wikipedia.org/wiki/Dictionary_coder) ://en.wikipedia.org/wiki/Dictionary_coder 但一切都有助于缩短字符串。这些字符串是各种语言和 URL (30%/70%) 的短文本消息。压缩字符串不需要是人类可读的。它将存储在二进制文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T22:42:58.717

我没有使用它，但[Smaz](https://github.com/antirez/smaz)听起来很有希望......

> Smaz 是一个简单的压缩库，适用于压缩非常短的字符串。通用压缩库将构建动态压缩数据所需的状态，以便能够压缩各种数据。这是一个非常好的主意，但不适用于特定问题：压缩小字符串不起作用。
> 
> 相反，Smaz 不适合压缩通用数据，但在平均情况下可以将文本压缩 40-50%（对英语效果更好），并且还能够对 HTML 和 url 执行一些压缩。重要的一点是，Smaz 甚至能够压缩两个或三个字节的字符串！
> 
> 例如，字符串“the”被压缩成一个字节。

由于它是用 C 编写的，请查看[Bart De Smet 的示例，以通过 C# 与 C 进行互操作](http://bartdesmet.net/blogs/bart/archive/2006/01/24/3799.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T05:07:33.397

如果有一万亿个字符串并且没有更多，那么每个字符串都可以用 40 位（5 个字节）表示。您所需要的只是一种将 5 字节用作万亿字符串的索引的方法。

你怎么知道所有万亿字符串？如果压缩器和解压缩器都可以访问所有万亿字符串，或者如果有办法对字符串进行排序和重新创建，那么您只需要索引即可。

如果您找不到索引字符串的方法，那么您可以获取字符串的子集并将它们用作压缩器的字典。只需选取最具代表性的样本（您需要弄清楚是什么可能使某些字符串比其他字符串更常见或更能代表其他字符串）并将它们连接到 32K 字典中。大约 400 万亿个字符串。然后zlib在压缩端的deflateSetDictionary和在解压端的inflateSetDictionary，都使用完全相同的32K字典。这将为短字符串提供良好的压缩。

# r - R ggplot geom_tile 没有填充颜色

> ID：10889338
> 
> 赞同：6
> 
> 时间：2012-06-04T22:32:49.233
> 
> 标签：r, ggplot2

我正在尝试将 geom_tile 图层添加到没有填充颜色（只是轮廓）的绘图中。有没有办法获得只有边界可见的透明瓷砖？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-04T23:03:18.077

我*认为*你在`alpha`参数之后。最小的例子：

1.  使用您设置的虚拟数据`color`（对于“边界”）和 no创建一个绘图`fill`：

    ```
    p <- ggplot(pp(20)[sample(20*20, size=200), ], aes(x = x, y = y, color = z)) 
    ```

2.  添加`geom_tile()`设置`alpha`为`zero`：

    ```
    p <- geom_tile(alpha=0) 
    ```

3.  添加`theme_bw()`为带有深灰色背景的透明瓷砖看起来很蹩脚:)

    ```
    p + theme_bw() 
    ```

![在此处输入图像描述](../Images/6654ffb485d79b1b32bb1b17649d1cd2.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T23:50:08.147

如果您只想将轮廓设置为单一颜色，则可以设置`fill = NA`，然后`na.value`将`NA`

```
.data <- cbind( 
           expand.grid(x = 1:10, y = 1:10), z = runif(100))[sample(1:100,75), ]

ggplot(.data, aes(x = x, y = y)) + theme_bw() + 
   geom_tile(fill = NA, color = 'black', na.value = NA) 
```

# objective-c - 只有方法执行中的最后一行（Objective-C）

> ID：10889349
> 
> 赞同：1
> 
> 时间：2012-06-04T22:35:28.003
> 
> 标签：objective-c, ios, xcode, xcode4.3

首先，我想为我缺乏一般编程知识而道歉。我正在学习，发现这个网站对我来说是一个巨大的赞美。

我创建了一个包含三个 UITextField(thePlace,theVerb,theOutput) 和两个 UITextView 的程序，其中一个 textviews(theOutput) 从另一个 textview(theTemplate) 获取文本并用在文本字段中输入的文本替换一些字符串。

当我单击一个按钮时，它会触发下面列出的方法 createStory。除了一个例外，这很好用。输出中的文本仅将字符串“数字”更改为文本字段中的文本。但是，如果我更改方法中的顺序以替换 'place'、'number'、'verb' 仅更改动词，而不更改数字。

我确定这是某种简单的解决方法，但我找不到。你们中的一些人可以帮助我解决问题吗？

```
- (IBAction)createStory:(id)sender {
    theOutput.text=[theTemplate.text stringByReplacingOccurrencesOfString:@"<place>" withString:thePlace.text];
    theOutput.text=[theTemplate.text stringByReplacingOccurrencesOfString:@"<verb>" withString:theVerb.text];
    theOutput.text=[theTemplate.text stringByReplacingOccurrencesOfString:@"<number>" withString:theNumber.text];
} 
```

非常感谢//埃米尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T22:42:57.657

问题是您要覆盖`theOutput.text`每一行的内容；`var1 = var2;`覆盖其中的数据`var1`并将其替换为`var2`.

尝试这个：

```
- (IBAction)createStory:(id)sender 
{
   NSString* tempStr = [theTemplate.text stringByReplacingOccurrencesOfString:@"<place>" withString:thePlace.text];
   tempStr = [tempStr stringByReplacingOccurrencesOfString:@"<verb>" withString:theVerb.text];
   theOutput.text = [tempStr stringByReplacingOccurrencesOfString:@"<number>" withString:theNumber.text];
} 
```

这有意义吗？:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:38:54.163

```
- (IBAction)createStory:(id)sender {
    theOutput.text=[theTemplate.text stringByReplacingOccurrencesOfString:@"<place>" withString:thePlace.text];
    theTemplate.text=[theTemplate.text stringByReplacingOccurrencesOfString:@"<verb>" withString:theVerb.text];
    theTemplate.text=[theTemplate.text stringByReplacingOccurrencesOfString:@"<number>" withString:theNumber.text];
} 
```

这行得通吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T22:40:34.833

首先，确保`thePlace.text`并且`theVerb.text`没有返回空值？但这不是你的问题。

```
NSLog(@"thePlace: %@",thePlace.text);
NSLog(@"theVerb: %@",theVerb.text); 
```

您的代码应该是：

```
- (IBAction)createStory:(id)sender {

    NSString * output = theTemplate.text;

    output = [output stringByReplacingOccurrencesOfString:@"<place>" withString:thePlace.text];
    output = [output stringByReplacingOccurrencesOfString:@"<verb>" withString:theVerb.text];
    output = [output stringByReplacingOccurrencesOfString:@"<number>" withString:theNumber.text];

    theOutput.text = output;
} 
```

# javascript - 在视频期间暂停 Javascript 循环

> ID：10889350
> 
> 赞同：0
> 
> 时间：2012-06-04T22:35:33.260
> 
> 标签：javascript, for-loop, while-loop, html5-video

给定 HTML5 视频，是否可以创建一个 for 或 while 循环，在其中的视频结束之前不会继续？例如，下面的代码应该按顺序播放三个视频，而不是同时播放。

```
<video id="video0">
    <source src="video0.mp4">
</video>
<video id="video1">
    <source src="video1.mp4">
</video>
<video id="video2">
    <source src="video2.mp4">
</video> 
```

.

```
var i=0;
while (i<3) {
    document.getElementById('video'+i).play();
    i++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:58:50.880

循环在这里无法满足您的需求，您最好监听事件。

可以在[W3C 页面上找到与 Media-Elements 相关的所有事件的列表](http://www.w3.org/TR/html5/media-elements.html#mediaevents "W3C 页面")

因此，在您的具体情况下，这样的事情应该可以帮助您：

```
var playVideo = function(videoID){
    var video = document.getElementById('video'+videoID);

    if(video){    

        video.play();
        //binding the eventHandler for the event firing at the end of the video
        video.onended = function(e){
            playVideo(videoID++);
        }

        /* 
        Another way of binding the event-listener:
        video.addEventListener('ended',function(){
            playVideo(videoID++);
        });
        */
    }
}

playVideo(0); 
```

# azure - Windows Azure - 从单独的工作角色访问 webrole 本地存储

> ID：10889356
> 
> 赞同：1
> 
> 时间：2012-06-04T22:36:16.460
> 
> 标签：azure, azure-worker-roles, azure-web-roles

我在 Windows azure 上运行应用程序，MVC 视图需要是动态的，我首先将它们作为记录存储在数据库中，但我非常热衷于将它们移动到物理位置。

我的概念是通过代码创建物理文件……效果很好，并显着加快了页面加载速度。这当然是在我意识到文件仅在角色期间可用之前

接下来，我查看了在角色启动时创建文件的启动任务 - 但是我随后意识到，除非我监视数据库的更改，否则任何单独的实例都不会同步。

所以我从一个启动任务转移到角色的 run 方法中的一个函数，该函数每 10 分钟检查一次数据库以查看是否发生了更改。问题是这似乎阻塞了应用程序（至少在热身阶段）。

理想情况下，我想将 run 函数移至它自己的工作角色，该角色可以坐在那里并将文件推送到 Web 角色实例，但我不确定如何从工作角色访问 Web 角色本地存储。谁能告诉我这是否真的可行？并希望为我指明正确的方向来实现这一目标？

只是为了澄清我想要实现的目标

- 视图在运行于 Web 角色的用户界面中创建并存储在数据库中 - 单独的 Web 角色（前端）具有客户端应用程序，其中虚拟路径提供程序将视图请求指向本地存储（本地资源） - 单独的工作角色以创建视图结构并将其加载到客户端 Web 角色本地存储

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T23:04:32.210

我相信您拥有与使用单独的 Windows Server 2008 R2 实例完全相同的可能性。

我最好的猜测是创建一个 Web 服务或任何可以从外部位置调用的标准应用程序，该位置在本地磁盘上创建实际文件（从传递给它的参数）并从工作角色调用此 Web 服务定期。

当然还有许多其他解决方法，但我认为没有任何标准化的方法可以从 Azure 中的单独角色访问本地存储。

# security - Internet Explorer 阻止此网站显示存在安全证书错误的内容

> ID：10889357
> 
> 赞同：6
> 
> 时间：2012-06-04T22:36:29.267
> 
> 标签：security, internet-explorer, ssl

我有一个由 CDN 提供商托管的安全证书。该网站是https：www.connect4fitness.com

在 IE 中导航到该站点会出现以下错误：

```
"Internet Explorer blocked this website from displaying content with security certificate errors." 
```

当我在 Firefox 或 chrome 中启动该站点时，一切正常。但是当我探测证书详细信息时，我确实看到了关于“混合内容”和“部分加密内容”的警告。

网站上的所有出站链接都是https。触发消息的可能是 CDN 注入的一些内容。但是我如何查明网页中未加密的确切部分？我需要这些信息来与 CDN 公司的技术支持合作，因为他们声称一切都很好。

是否有任何工具或技术可用于找出浏览器接收到的渲染页面的哪一部分未加密？

**附加信息：**

清除 CDN 缓存解决了 Firefox 和 Chrome 的错误消息。尽管我在“网络”选项卡上没有看到任何“http”请求，但 IE 仍然抱怨混合内容。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T16:04:09.083

在 IE 上触发混合内容错误的实际问题是包含的托管 javascript 文件的链接断开。该调用是 https，但它没有导致 200 响应，并且不知何故使 IE 在尝试加载页面时停止发出进一步的调用。我删除了这个调用，然后 IE 加载了整个页面，没有任何警告或错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T23:22:25.400

我终于找到了问题。

我有用于客户端异常日志记录（exceptionhub）的javascript插件。此插件插入运行时 JS 以对其服务器进行 https 调用以进行日志记录，并收到证书错误。显然只有 IE 认为这令人反感，因为其他浏览器没有抱怨。

最后，我只是摆脱了该插件，因为根据他们的网站，他们在上次使用该插件时解决了该问题（[请参见此处](http://help.exceptionhub.com/discussions/problems/16-ssl-error-in-ie6)）。我认为它可能会再次发生，我不打算尝试它，因为它是一个不错的插件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T14:15:02.590

永远不要在提供的页面中使用`http://`链接`https://`。事实上，它不会影响 Firefox 中的用户体验，这更像是一个 Firefox 漏洞。理想情况下，它应该。（Firefox 的另一个问题是，除非它最近发生了变化，否则它只会在发送请求后才显示警告。）

使用 Chrome 的开发者工具或 Firebug（网络选项卡）找出哪些资源是使用纯 HTTP 加载的，并改用`https://`URI。（您可能需要使用支持 HTTPS 的 CDN。）

# javascript - 如何从“构造函数返回另一个对象”对象继承

> ID：10889360
> 
> 赞同：1
> 
> 时间：2012-06-04T22:36:46.363
> 
> 标签：javascript, node.js, prototype

[node-binary](https://github.com/substack/node-binary)二进制解析器使用以下模式构建其对象：

```
exports.parse = function parse (buffer) {
    var self = {...}
    self.tap = function (cb) {...};
    self.into = function (key, cb) {...};
    ...
    return self;
}; 
```

**我如何继承我自己的、开明的解析器？**这种模式是故意设计的让继承变得尴尬吗？

迄今为止，我唯一成功尝试继承的所有方法`binary.parse(<something>)`是`_.extend`用作：

```
var clever_parser = function(buffer) {
    if (this instanceof clever_parser) {
        this.parser = binary.parse(buffer);  // I guess this is super.constructor(...)
        _.extend(this.parser, this);         // Really?
        return this.parser;
    } else {
        return new clever_parser(buffer);
    }
} 
```

这没有通过我的嗅觉测试，以及其他人的嗅觉测试。这有什么让人觉得很危险的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:53:31.310

怎么样：

```
var clever_parser = function ( buffer ) {
    var parser = binary.parse( buffer );
    _.extend( parser, clever_parser.methods );
    return parser;
}

clever_parser.methods = {
    foo: function () { ... },
    bar: function () { ... }
}; 
```

该`binary.parse`函数返回一个普通对象（继承自 的对象`Object.prototype`），并且随后无法重定向其原型链接（除非使用`__proto__`，但这是非标准且已弃用）。

所以，我们唯一能做的就是用我们的方法手动扩展那个对象......

顺便说一句，该`clever_parser`功能可以作为工厂功能正常工作。您不必为构造函数和`new`运算符而烦恼。

* * *

此外，您可以采取相反的方法：首先，创建继承您的方法的对象，然后使用在`binary.parse`函数中分配的属性对其进行扩展：

```
var clever_parser = function ( buffer ) {
    var parser = Object.create( clever_parser.methods );
    _.extend( parser, binary.parse( buffer ) );
    return parser;
} 
```

如果这种方法有效，它肯定比我上面的原始解决方案更好，因为这里生成的对象继承了您的方法（与上面相反，其中每个实例都包含方法作为自己的属性）。

# c++ - 从文件中正确读取数据后丢失数据

> ID：10889361
> 
> 赞同：0
> 
> 时间：2012-06-04T22:36:46.467
> 
> 标签：c++, linked-list

我有一个闲置的对象类和一个我在主要组合中使用的数据结构类。ADT（抽象数据类型）是一个链表。在我从文件中读取输入数据并创建和打印后打印后看起来很好的对象之后。在我之后`push_back()`，第三个 int 变量被初始化为 0。所以示例和代码：

例如：

```
1 7 31
2 2 2
3 3 3 
```

现在我从每一行创建对象，它们在打印时看起来像他们想象的那样，但是在 push_back() 之后：

```
1 7 0
2 2 0
3 3 0 
```

类.h：

```
class RAngle
{
private:
    int x, y, l, b;
public:
    int solution,prec;
    RAngle(){
        x = y = solution = prec = b = l =0;
    }

    RAngle(int i,int j,int k){
        x = i;
        y = j;
        l = k;
        solution = 0; prec=0; b=0;
    }
    friend ostream& operator << (ostream& out, const RAngle& ra){
        out << ra.x << " " << ra.y << " " << ra.l <<endl;
        return out;
    }

    friend istream& operator >>( istream& is, RAngle& ra){
        is >> ra.x;
        is >> ra.y;
        is >> ra.l;
        return is ;
    }
}; 
```

ADT.h：

```
template <class T>
class List
{
private:
    struct Elem
    {
        T data;
        Elem* next;
    };

    Elem* first;

    T pop_front(){
        if (first!=NULL)
        {
            T aux = first->data;
            first = first->next;
            return aux;
        }

        T a;
        return a;
    }

    void push_back(T data){
        Elem *n = new Elem;
        n->data = data;
        n->next = NULL;
        if (first == NULL)
        {
            first = n;
            return ;
        }
        Elem *current;
        for(current=first;current->next != NULL;current=current->next);
        current->next = n;
    } 
```

Main.cpp（在我在 main 中调用此函数后，它将打印对象，因为它们假设是 x var（来自 RANgle 类）在所有情况下都更改为 0。）

```
void readData(List <RAngle> &l){
    RAngle r;
    ifstream f_in;
    f_in.open("ex.in",ios::in);

    for(int i=0;i<10;++i){
        f_in >> r;
        cout << r;
        l.push_back(r);
    } 
```

# php - PHP无法验证目录是否存在

> ID：10889362
> 
> 赞同：2
> 
> 时间：2012-06-04T22:36:48.860
> 
> 标签：php

我要疯了

我有这个文件夹和文件结构

*   /
    *   /项目
        *   /我的测试
            *   /安装
                *   /index.php
            *   /产品
    *   /资源

因此，在我的 install/index.php 文件中，我试图验证 /product 文件夹是否存在。我知道该文件夹存在，但看起来 PHP 不存在。我的代码：

```
if(file_exists('../../mytest/product') && is_dir('../../mytest/product')) {
    echo 'Folder exists!';
} else {
    echo 'PHP is blind or something!';
} 
```

也许我很累，但我就是不知道哪里出了问题。在这里休息的一些头脑可能会看到问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:02:06.267

**使用您当前的目录结构：**

```
/
    /projects
        /mytest
            /install
                /index.php
            /product
    /resources 
```

**以下代码可以正常工作：**

```
<?php
if(file_exists('../product') && is_dir('../product')) {
    echo 'Folder exists!';
} else {
    echo 'PHP is blind or something!';
}
?> 
```

**与您当前的代码一样：**

```
<?php
if(file_exists('../../mytest/product') && is_dir('../../mytest/product')) {
    echo 'Folder exists!';
} else {
    echo 'PHP is blind or something!';
}
?> 
```

两种解决方案都输出“**文件夹存在！** ”，因此问题与文件夹权限有关。

* * *

**您需要确认：**

*   该文件夹的所有者

*请记住，目录的所有者必须与脚本用户相同，否则当 PHP 在安全模式下运行时，此函数将始终返回* [false](http://php.net/manual/en/features.safe-mode.php) ..

*   [open_basedir](http://www.php.net/manual/en/ini.core.php#ini.open-basedir)

*限制PHP可以打开的文件到指定的目录树..*

# jquery - 是否有类似 Google Shopping 上的 jquery 插件？- 2012 年 6 月 4 日

> ID：10889364
> 
> 赞同：-1
> 
> 时间：2012-06-04T22:37:22.083
> 
> 标签：jquery, themes, wordpress

[谷歌购物](http://www.google.com/shopping)

希望实现相同的轮播效果....过渡很流畅！

任何 wordpress 主题或插件也可以使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:50:45.510

有许多轮播可以做类似的效果。看一下jquery循环。您只需要按照您想要的方式设置寻呼机的样式：

演示：http: [//jsfiddle.net/lucuma/3tz9V/](http://jsfiddle.net/lucuma/3tz9V/)

[http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

# c++ - 如何在 C++ 中声明带有填充信息的指针？

> ID：10889370
> 
> 赞同：2
> 
> 时间：2012-06-04T22:38:32.387
> 
> 标签：c++

```
 extern "C" {
    typedef struct Pair_s {
        char *first;
        char *second;
    } Pair;

    typedef struct PairOfPairs_s {
        Pair *first;
        Pair *second;
    } PairOfPairs;
}

Pair pairs[] = {
    {"foo", "bar"}, //this is fine
    {"bar", "baz"}
}; 

PairOfPairs pops[] = {
    {{"foo", "bar"}, {"bar", "baz"}}, //How can i create an equivalent of this NEATLY
    {&pairs[0], &pairs[1]} //this is not considered neat (imagine trying to read a list of 30 of these)
}; 
```

如何实现上述样式声明语义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T23:14:39.990

在 C++11 中，您可以编写：

```
PairOfPairs pops[] = {
    { new Pair{"a", "A"}, new Pair{"b", "B"} },
    { new Pair{"c", "C"}, new Pair{"d", "D"} },
    // the grouping braces are optional
}; 
```

请注意使用免费存储的含义：在程序执行结束时（如静态对象）或其他任何时间（没有相应的`delete`），分配在那里的对象都不会被破坏。如果 Pair 是一个 C 结构并且不管理资源（并且您总是希望您的程序在退出之前使用该内存），则托管实现中可能不需要担心。

编辑：如果你不能使用 C++11 特性，你总是可以创建一个辅助函数。例子：

```
static Pair* new_pair(const char* first, const char* second)
{
    Pair* pair = new Pair;
    pair->first = first;
    pair->second = second;
    return pair;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T23:30:13.803

在这种情况下，我认为宏会增加代码的可读性。您可以创建一个无人看管的包含文件：

```
/* file: pairs.def */
PAIR_DEF(foo, bar)
PAIR_DEF(bar, baz)
//... 
```

当你初始化你的`pairs`数组时，你会使用这个文件：

```
Pair pairs[] = {
#define PAIR_DEF(x, y) { #x, #y },
#include "pairs.def"
#undef PAIR_DEF
}; 
```

您可以创建相应的枚举常量：

```
enum PairEnum {
#define PAIR_DEF(x, y) PAIR_ ## x ## _ ## y,
#include "pairs.def"
#undef PAIR_DEF
}; 
```

然后创建一个辅助宏来帮助您初始化`pops`数组。

```
#define PAIR(x, y) &pairs[PAIR_ ## x ## _ ## y]
PairOfPairs pops[] = {
    { PAIR(foo, bar), PAIR(bar, baz) },
    //...
}; 
```

这类似于我用来将`enum`值与字符串相关联的技术，在我对[这个问题](https://stackoverflow.com/questions/3342726/c-print-out-enum-value-as-text)的回答中进行了描述。

# machine-learning - 赫比学习

> ID：10889371
> 
> 赞同：1
> 
> 时间：2012-06-04T22:38:43.610
> 
> 标签：machine-learning, artificial-intelligence, logic, neural-network

我之前问过另一个关于 Hebbian 学习的[问题](https://stackoverflow.com/questions/10640755/how-to-utilize-hebbian-learning)，我想我得到了一个很好的答案，我接受了，但是，问题是我现在意识到我完全误解了 Hebbian 学习，而且我有点困惑。

那么，您能否解释一下它的用途以及用途？因为维基百科和其他一些页面描述它的方式 - 它没有意义！如果一起开火，为什么我们要不断增加输入和输出神经元之间的权重？它可以用来解决什么样的问题，因为当我在脑海中模拟它时，它肯定无法进行基本的 AND、OR 和其他操作（比如你将权重初始化为零，输出神经元永远不会触发，并且重量永远不会增加！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:30:30.283

你的问题似乎与理论有关，我不确定它是否属于 SO，但由于它直接连接到神经网络，我会尝试回答。

如果它们一起触发，我们会增加输入和输出神经元之间的权重，因为一起触发意味着它们以某种方式相关。

让我们以逻辑函数为例。在一个`AND`函数中，您将有两个输入神经元。如果您的输入数据是`(0, 0)`，则意味着输入神经元都不会触发，输出也不会触发。所以在这种情况下你不需要强大的连接。

现在接受输入`(1, 1)`。两个输入神经元都会触发，输出也会触发。为了学习这种对应关系，网络应该增加连接输入和输出的权重（记住，这基本上是对输入和偏置神经元求和的问题）。

最后，当输出为`(1, 0)`或时`(0, 1)`，由于输出为`0`，它告诉网络两个连接都不应该足够强大以自行激活输出神经元。

我希望这是有道理的。

# vba - 如何使用用户窗体按钮控件将时间戳链接到单元格？

> ID：10889374
> 
> 赞同：0
> 
> 时间：2012-06-04T22:21:51.170
> 
> 标签：vba, excel, timer, stopwatch

您好 VB 开发人员/用户/爱好者。你好吗？

我有一个有两个按钮的用户窗体：

1.  开始
2.  停止

当我按下 时`Start`，我希望它以`dd/mm/yy hh:nn:ss`特定列中的格式记录当前时间。

然后，当我按下`Stop`按钮时，我希望它在旁边的单元格中再次记录时间。

然后，如果我`Start`再次按下，我希望它记录在第一个单元格的当前记录下方。基本上，我正在构建一个计时器来记录数据，以查看某些任务需要多长时间。

我将发布 excel 文件并在必要时提供更多信息。

感谢您提供的任何帮助。

**当前代码**

```
Public runTimer As Double
Public startTime As Date
Dim counter As Date

Sub setStart()
    counter = 0
    startTime = Now
    runTimer = Now + TimeSerial(0, 0, 1)

    Application.OnTime runTimer, "setStart", , True

    Set myTime = Sheet4.Range("F1")
    Set timeRng = Sheet4.Range("C8:C100")
    i = WorksheetFunction.CountA(timeRng)
    i = i + 1

    Cells(i, "C") = myTime
    Sheet4.Cells(i, "C").NumberFormat = "yyyy/mm/dd HH:mm:ss"

    If i >= 2 Then
        Cells(i, "D8") = Cells(i, "C8") - Cells(i - 1, "C8")
        Sheet4.Cells(i, "C").NumberFormat = "yyyy/mm/dd HH:mm:ss"
    End If
    Application.EnableEvents = False
End Sub

Sub setStop()
    Application.OnTime runTimer, "setStop", , True

    Set myTime = Sheet4.Range("F1")
    Set timeRng = Sheet4.Range("D8:D100")
    i = WorksheetFunction.CountA(timeRng)
    i = i + 1

    Application.EnableEvents = False
    Cells(i, "D") = myTime
    Sheet4.Cells(i, "D").NumberFormat = "yyyy/mm/dd HH:mm:ss"
End Sub 
```

* * *

感谢您的反馈和建议。

这两个都很好用。我仍然无法在代码中的特定工作表中记录数据。我不想使用当前的工作表。我希望它是 sheet1 并在单元格“A8”而不是单元格“A2”中开始录制

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:47:45.880

我做了类似的事情来跟踪从 Excel 应用程序运行 SQL 和 MDX 查询需要多长时间。用户对某件事需要多长时间（花了 5 分钟！）和实际发生的事情的感觉并不总是一致的。我需要知道某些事情需要多长时间来保护应用程序或了解我需要优化什么。

我设置了一张表来模仿你的例子。第 1 行中的标题：

```
Start Time     Stop Time     Elapsed Time 
```

我还有一个开始按钮和一个停止按钮。我分配`setStart`给开始按钮和`setStop`停止按钮。

**编码：**

```
Option Explicit

Sub setStart()
    Dim NextRow As Long
    NextRow = GetLastRow("A") + 1

    With Range("a" & NextRow)
        .Value = Now
        .NumberFormat = "yyyy/mm/dd HH:mm:ss"
    End With
End Sub

Sub setStop()
    Dim NextRow As Long
    NextRow = GetLastRow("B") + 1

    With Range("b" & NextRow)
        .Value = Now
        .NumberFormat = "yyyy/mm/dd HH:mm:ss"
    End With
    calcElapsedTime (NextRow)
End Sub

Sub calcElapsedTime(NextRow As Long)
    With Range("c" & NextRow)
        .Formula = "=B" & NextRow & "-A" & NextRow
        .NumberFormat = "HH:mm:ss"
    End With
End Sub

Function GetLastRow(ColumnLetter As String) As Long
    GetLastRow = Range(ColumnLetter & ActiveSheet.Rows.Count).End(xlUp).Row
End Function 
```

请注意，我不是在检查启动和停止是否以正确的顺序完成。如果按 start 3 次，它将继续在 start 列中添加没有匹配停止时间的值，这显然会弄乱经过的时间。如果我提供的代码是您所追求的，那么您需要将这种逻辑添加到您的应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T19:49:17.900

我喜欢@Head of Catering 的简单回答。您可以将其稍微更改为单个按钮，以便您只能根据需要进行启动或停止。

您可以设置按钮文本的颜色格式以及视觉提醒。

只需添加几个并在 CommandButton1 上运行 startTimer

```
 Option Explicit
Sub startTimer()
If ActiveSheet.CommandButton1.Caption = "START" Then
        setStart
    Else
        setStop
    End If
End Sub
Sub setStart()
    Dim NextRow As Long
    NextRow = GetLastRow("A") + 1

    With Range("a" & NextRow)
        .Value = Now
        .NumberFormat = "yyyy/mm/dd HH:mm:ss"
    End With
   ActiveSheet.CommandButton1.Caption = "STOP"
End Sub

Sub setStop()
    Dim NextRow As Long
    NextRow = GetLastRow("B") + 1

    With Range("b" & NextRow)
        .Value = Now
        .NumberFormat = "yyyy/mm/dd HH:mm:ss"
    End With
    calcElapsedTime (NextRow)
    ActiveSheet.CommandButton1.Caption = "START"
End Sub

Sub calcElapsedTime(NextRow As Long)
    With Range("c" & NextRow)
        .Formula = "=B" & NextRow & "-A" & NextRow
        .NumberFormat = "HH:mm:ss"
    End With
End Sub

Function GetLastRow(ColumnLetter As String) As Long
    GetLastRow = Range(ColumnLetter & ActiveSheet.Rows.Count).End(xlUp).Row
End Function 
```

# iphone - 如何获取 iOS 版 Facebook 相册？

> ID：10889375
> 
> 赞同：5
> 
> 时间：2012-06-04T22:39:32.730
> 
> 标签：iphone, ios, facebook, facebook-graph-api

我正在向 Facebook 提出以下简单请求。我的目标是获取所有用户相册的名称：

```
[[AppDelegate sharedDelegate].facebook requestWithGraphPath:@"me/albums" andDelegate:[AppDelegate sharedDelegate]]; 
```

然后，我从服务器收到 JSON 响应，如下所示：

```
data =     (
            {
        "can_upload" = 1;
        count = 4;
        "cover_photo" = 321491374598618;
        "created_time" = "2012-06-04T21:46:23+0000";
        from =             {
            id = 100002132746588;
            name = "Owner....";
        };
        id = 321491371265285;
        link = "http://www.facebook.com/album.php?fbid=321491371265285&id=100002132746588&aid=73680";
        name = "Photos";
        privacy = custom;
        type = normal;
        "updated_time" = "2012-06-04T22:08:39+0000";
    },
            {
        "can_upload" = 0;
        count = 1;
        "cover_photo" = 318401854907570;
        "created_time" = "2012-05-31T00:00:35+0000";
        description = "Which Friend Stalks You the Most?";
        from =             {
            id = 100002132746588;
            name = "Owner....";
        };
        id = 318401848240904;
        link = "http://www.facebook.com/album.php?fbid=318401848240904&id=100002132746588&aid=73163";
        name = "Which Friend Stalks You the Most?";
        privacy = friends;
        type = normal;
        "updated_time" = "2012-05-31T00:00:36+0000";
    }, 
```

等等。问题是，当我尝试解析数据时：

```
NSLog(@"%@", [result objectForKey:@"name"]); 
```

我明白了`null`。我认为这种情况正在发生，因为`NSDictionary`返回的数据不知道`name`要关注哪个条目。如何解析数据以获取**所有**专辑的名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T23:17:26.027

“结果”实际上是一个字典数组，因此遍历数组，然后从数组中的每个元素中获取名称。

```
for (NSDictionary *anAlbum in [result objectForKey:@"data"]) {
    NSLog(@"%@", [anAlbum objectForKey:@"name"]);
} 
```

# php - ajax 不返回 JSON 对象

> ID：10889376
> 
> 赞同：0
> 
> 时间：2012-06-04T22:39:36.020
> 
> 标签：php, jquery, ajax, json

我开始使用 JSON，但我一直遇到谷歌和 SO 都没有帮助我的麻烦。我有一个非常简单的 PHP 脚本：

```
<?php

$email = $_REQUEST['email'];

if ( strpos($email,'@') !== false ) {
    $data = array('status' => 1 , 'msg' => 'Sent') ;
    echo json_encode( $data ) ;
} 

else {
    $data = array('status' => 0 , 'msg' => 'Failed to send') ;
    echo json_encode( $data ) ; 
}

?> 
```

我有以下ajax调用：

```
$('.submit').click(function() {
    $('div.load').html('<img src="images/load.gif" alt="Loading..." id="loading" />'); //EDIT

    //creation of variables to send
    var name = $('#name').val();
        email = $('#email').val();
        phone = $('#phone').val();

    $.ajax({
        type: "POST",
        dataType: "jason",

        data: {
            name: name,
            email: email,
            phone: phone
        },

        url: "test.php",

        success: function( data ) {

            $('.contact').append( data )

        }
    });

    return false; 

}); 
```

如果在没有 JS 的情况下调用 php（并且表单不包含正确的电子邮件地址），那么我会得到以下对象（这就是我想要的！）： {"status":0,"msg":"Failed to发送”}

但是，如果使用 JS (ajax) 提交，则永远不会收到 JSON 对象。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T22:41:54.493

```
dataType: "jason", 
```

读：

```
dataType: "json", 
```

;-)

此外，您还有一些分号，其中应该有逗号：

```
var name = $('#name').val(),    // These two lines should be comma-terminated to
    email = $('#email').val(),  // make this a correct var declaration
    phone = $('#phone').val(); 
```

# python - Python 是静态类型的吗？

> ID：10889378
> 
> 赞同：1
> 
> 时间：2012-06-04T22:39:41.560
> 
> 标签：python

我知道 Python 是动态类型的、鸭子类型的，而且很强大。在某些情况下，我们必须确保它事先声明为列表或字典才能使用它们......所以我可以说 Python 也是静态类型语言吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T22:45:08.467

不，Python 不是静态类型的。

在静态类型中，名称绑定到类型和对象（或值），在 Python 中，名称仅绑定到对象。您可以随时将名称重新分配给不同类型的对象，而这在静态类型语言中是无法做到的。

我不确定您需要事先声明变量是什么意思，但我的猜测是您实际上只是创建一个空列表或字典并将其分配给一个名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T23:03:52.677

考虑这行代码：

```
x = [] # (or {}) 
```

在使用它之前，您不是“将变量声明为列表（或字典）”。您正在创建一个列表 ( `[]`) （或 dict `{}`），然后将其分配为变量 ( `x`) 的值。这并不意味着`x`现在有一个类型。您可以稍后将字符串分配给`x`：

```
x = 'a string' 
```

Python 对此没有任何问题。

我想知道您是否对另一种语言的功能感到困惑，例如 Perl 的自动激活功能，它让您将未初始化的标量变量视为对列表或哈希的引用。您是否认为 Python 缺乏这样的功能，所以它的“动态性”较低？如果您真的在寻找这样的东西，请查看集合模块中的 defaultdict 类。

# ruby - 在 Ruby 中生成唯一的排序分区

> ID：10889379
> 
> 赞同：4
> 
> 时间：2012-06-04T22:39:49.843
> 
> 标签：ruby, recursion, data-partitioning

我正在尝试生成如下所示的序列集，不是以任何特别的顺序，但这里显示为降序。请注意，每个序列也会下降，因为我对组合感兴趣，而不是排列。我想将每个序列存储为一个数组..或者将序列集存储为一个数组数组更可取，但首先要做的是。

```
6                   
5   1               
4   2               
4   1   1           
3   3               
3   2   1           
3   1   1   1       
2   2   2           
2   2   1   1       
2   1   1   1   1   
1   1   1   1   1   1 
```

现在我只是专注于生成这些集合，并且我正在尝试以递归方式进行。本质上..这些都是数字序列，当组合将给出一些总数时..在这种情况下为 6。但请注意，当第一个数字为 3 时，随后的数字集只是给出总数的序列集3\. 换句话说，6（目标总数）- 3（第一个数字）= 3（总共为 3 的序列集）。因此，应该能够递归地做到这一点。

我尝试编写如下代码（是的，这是我的第一语言，是的，我只学习了大约一个星期，所以我确信这一切都搞砸了）但到目前为止还没有运气。我想如果我可以让递归的核心工作并将所有对象的值放到屏幕上以便我可以逐行跟踪它，我想我可以继续前进，但是在逻辑和语法之间，我'我处于静止状态。

我的逻辑是：

*   定义一个传递代表目标总数的“计数”的方法。
*   创建一个数组，该数组将保存给定的值序列
*   创建一个表示数组中位置的索引（忽略零位置）。
*   定义'delta'并将其初始化为'count'的值，并让它代表数组其余部分的剩余目标总和。（由于最初数组中没有任何内容，因此增量与计数相同。）

然后，循环遍历序列的下一个（第一个）值的可能性，从 1 开始，显然以最大值结束，即“count”本身的值。确定循环中每个值的新增量。

如果 delta 为 0，那么您就完成了，否则确定这个新序列将给出这个新的 delta。可能还需要将新序列附加到当前序列。

```
i=0

    def seq(count)
        cvc=Array.new  # array to hold the number values
        i=i+1  # position index for the array
        puts 'i is ' + i.to_s
        delta=count 
        puts ' delta is ' + delta.to_s

        for value in 1..delta do  # value represents the number value
                cvc[i]=value
                puts 'cvc[i] is ' + cvc[i].to_s
                delta = delta-cvc.sum
                puts 'new delta is '+ delta.to_s
            if delta >1  then count=delta
                    seq(count)
            end
        end
    end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T23:43:33.217

这是一个解决方案：

```
def expand(n, max = n)
  return [[]] if n == 0
  [max, n].min.downto(1).flat_map do |i|
    expand(n-i, i).map{|rest| [i, *rest]}
  end
end

expand(6) # => [[6], [5, 1], [4, 2], [4, 1, 1], [3, 3], [3, 2, 1], [3, 1, 1, 1], [2, 2, 2], [2, 2, 1, 1], [2, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1]] 
```

# c++ - C++ 中的 PlaySound() 不起作用

> ID：10889380
> 
> 赞同：1
> 
> 时间：2012-06-04T22:40:08.190
> 
> 标签：c++, winapi

我一直试图弄清楚这一点，但我似乎无法做到。

当您在顶部包含 window.h 时，其中应该有一个 PlaySound() 函数。

我添加了 window.h 但我不断收到“PlaySound 未在此范围内声明”错误。

我尝试进入项目的构建选项并将“-lwinmm”添加到链接器设置中，但它*仍然*不起作用。

我正在使用代码::块。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T22:48:59.630

您需要按顺序执行 和`#include`。这在文档的社区部分中[有说明](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743680%28v=vs.85%29.aspx)。`windows.h``mmsystem.h`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-04T22:49:35.430

我假设您正在 Windows 上进行编码，并且您实际上想要名为“Windows.h”的接口文件。还要确保您使用的是正确的命名空间，我不是 Windows 程序员，但这是一个开始。我也不知道您是如何加载文件的，或者您是否使用的是 win32 或 .net 框架。但从它的声音来看，你可能也不会。

如果您尝试使用 .net，您可以从这里开始

[http://msdn.microsoft.com/en-us/library/system.media.soundplayer](http://msdn.microsoft.com/en-us/library/system.media.soundplayer)

赢 32 从这里开始

[http://msdn.microsoft.com/en-us/library/ff818516(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ff818516(v=vs.85).aspx)

啊这里是winCE音频API

[http://msdn.microsoft.com/en-us/library/aa909766.aspx](http://msdn.microsoft.com/en-us/library/aa909766.aspx)

# c++ - OpenCV 的多项朴素贝叶斯

> ID：10889382
> 
> 赞同：0
> 
> 时间：2012-06-04T22:40:26.253
> 
> 标签：c++, opencv, naivebayes, pattern-recognition

我正在寻找一个用**C/C++**编写的**多项式朴素贝叶斯分类器**，用于**OpenCV**。

 ****我正在寻找**算法**（或现成的实现），因为它会更有帮助，因为我试图了解它是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T04:07:01.480

朴素贝叶斯分类器是一种著名的分类算法。尤其是在文本分类领域，我就拿来解释一下。

假设我们有一些训练文档`{d1 , d2 , d3 , ... , dm}`，其中每个文档都可以由一组单词表示，`{w1,w2,w3, ... , wn}` 并且每个文档属于某个预定义的类集（`(c_0,c_1)`此处采用二进制案例），我们的任务是将一些新的输入文档 d 分类为 class`c_0`或 class `c_1`。

一种直观的方法是采用最大似然估计：即

```
output c_0 if P(d | c_0) > P(d | c_1) and vice versa. 
```

所以根据我们对 d 的定义，我们可以将标准写为

```
P(d | c_0) = P( {w1,w2,w3...,wn}  | c_0) 
```

因为计算这个给定类的联合概率是如此复杂。所以我们做了一个强有力的假设，即单词是相互独立的，取决于类。所以这导致我们

```
P(d | c_0) = P({w1,w2,w3...,wn} | c_0) = P(w1|c_0)*P(w2|c_0)*P(w2|c_0)...*P(wn|c_0) 
```

其中每个`P(w | c)`都可以很容易地计算为 c 类中单词 w 的频率计数。

这个强大的假设是“Naive”这个名字的原因，因为我们只是天真地对每个单词进行级数乘法。

finally take`answer = argmax P(d | c_0) , P(d | c_1)` 会结束这个算法

我猜在您的领域中，您正在寻找的内容类似于文本分类，只是您需要提取的特征不同。****

# c++ - QWidget 转换

> ID：10889383
> 
> 赞同：1
> 
> 时间：2012-06-04T22:40:26.130
> 
> 标签：c++, qt

我正在使用 Qt 编写一个应用程序，并希望有一个“Metro Style”界面。一切都完成了，除了我不知道如何让小部件出现和消失。例如，在 WPF 中，您可以为*(UIElement.RenderTransform).(TranslateTransform.Y)*设置动画，使 Y 变为零或负数。如何在 QGridLayout 中移动 QWidget 以便它可以隐藏？

例子： ![在此处输入图像描述](../Images/58208bacd2716ddf50cf4f4597c30c18.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:38:57.720

在做了一些研究之后，我想出了一种方法来做到这一点。我没有让 Qt 进行布局，而是通过移动和设置宽度/高度函数自己处理它。覆盖 resizeEvent 使我可以在调整窗口大小的情况下更新值。此外，我使用 setMask 来确保小部件不会泄漏到 UI 中不需要的位置。

# javascript - 如何将 Obj-C 中的 UITouch 对象与 WebKit JavaScript 中的相应触摸对象匹配？

> ID：10889384
> 
> 赞同：2
> 
> 时间：2012-06-04T22:40:26.423
> 
> 标签：javascript, objective-c, ios, webkit, uitouch

我想不出一种将 UIKit 中的 UITouch 对象与 JavaScript 中相应的触摸对象相匹配的好方法。

对于 UITouch，通常使用`hash`消息返回的值来识别跨触摸阶段的 UITouch 实例。在 HTML / JavaScript 中，`touch.identifier`使用并保证在多次触摸中是唯一的数字。

但是， 和 返回的数字`[aUITouch hash]`不`aTouch.identifier`相关。关于如何将 JavaScript 通知中收到的触摸对象与 Obj-C 中收到的 UITouch 对象相匹配的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:35:14.910

我想出的解决方案是使用从它们的位置派生的键将 UITouch 对象存储在字典中。因此，使用键“120:200”存储在 x 120 y 200 处发生的触摸。这一切都发生在覆盖主窗口类的 sendEvent 方法时。

我向这些触摸添加信息（在本例中为触摸区域的半径），然后使用类似的方案将它们推送到 JavaScript 运行时中的字典中。一般来说，WebKit 报告的位置与我的窗口类报告的位置相匹配，因此 JavaScript 运行时能够使用触摸的当前位置作为哈希来查找触摸半径。

# ruby-on-rails - 如何通过 ajax 调用将叠加层添加到 Google 地图

> ID：10889385
> 
> 赞同：0
> 
> 时间：2012-06-04T22:40:28.197
> 
> 标签：ruby-on-rails, gmaps4rails

使用 gmaps4rails 和 Rails 3.2 并尝试在用户单击“显示半径”复选框时在 Google 地图上添加叠加层，然后地图上会显示一个圆圈，并在用户位置周围具有一定的半径。

我知道如何创建与通过 gmaps4rails 创建的 Google 地图相关联的 JS 回调，但是如何从 rails 控制器本身的 DOM 中检索地图？

大概，我想在 .js.erb 模板或类似的东西中调用一些“showCircle”函数。

# java - 合并现有 Hibernate 模型对象时出现 UnsupportedOperationException？

> ID：10889386
> 
> 赞同：11
> 
> 时间：2012-06-04T22:40:30.863
> 
> 标签：java, hibernate, list, h2

在从 Hibernate 3 升级到 4 之后，我们正在解决沿途出现的一些问题。让我们特别难过的是 UnsupportedOperationException，其中现有对象从数据库中提取、调整和合并。

*问题*是 Hibernate 似乎正在将一个对象添加到`AbstractList`

当保存在我们的 DAO 中时，这似乎只发生在一种特定的对象类型上，但尽我们所能：

1.  我们没有使用任何会导致创建不可变实例的 sublist() 或 asList() 方法。
2.  检查正在保存的对象（它很大并且有很多子项）我*认为*它的任何子项都不是`AbstractList`类型。

以下是堆栈点周围的代码片段：

**HibernateDao.save():**

```
@Transactional
public void save(T item) {
    try {
        getSessionFactory().getCurrentSession().merge(item);
    } catch (Exception ex) {
        LOGGER.debug("Unable to merge", ex);
        LOGGER.warn("Unable to merge item, saving instead. (Of type " + item.getClass() + ")");
        getSessionFactory().getCurrentSession().saveOrUpdate(item);
    }
} 
```

我们正在保存的**User**项目有许多子项目，定义如下：

```
@OneToMany(cascade = CascadeType.ALL)
@LazyCollection(LazyCollectionOption.FALSE)
private Map<String, Project> associatedProjects = new HashMap<String, Project>(); 
```

该类`Project`还有其他类似注释的子级，但所有内容都有`CascadeType.ALL`, 并已`LazyCollectionOption.FALSE`定义。

这是（相当高的）堆栈跟踪：

*请注意，我们的代码以`com.company.application`*

```
06/04 18:15:45 DEBUG [Thread-19258] hibernate.HibernateDao.save- Unable to merge
java.lang.UnsupportedOperationException
        at java.util.AbstractList.add(AbstractList.java:148)
        at java.util.AbstractList.add(AbstractList.java:108)
        at org.hibernate.collection.internal.PersistentBag.add(PersistentBag.java:292)
        at org.hibernate.type.CollectionType.replaceElements(CollectionType.java:496)
        at org.hibernate.type.CollectionType.replace(CollectionType.java:563)
        at org.hibernate.type.AbstractType.replace(AbstractType.java:178)
        at org.hibernate.type.TypeHelper.replaceAssociations(TypeHelper.java:261)
        at org.hibernate.event.internal.DefaultMergeEventListener.copyValues(DefaultMergeEventListener.java:398)
        at org.hibernate.event.internal.DefaultMergeEventListener.entityIsTransient(DefaultMergeEventListener.java:221)
        at org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:282)
        at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:151)
        at org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:914)
        at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:896)
        at org.hibernate.engine.spi.CascadingAction$6.cascade(CascadingAction.java:288)
        at org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:380)
        at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:323)
        at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:208)
        at org.hibernate.engine.internal.Cascade.cascadeCollectionElements(Cascade.java:409)
        at org.hibernate.engine.internal.Cascade.cascadeCollection(Cascade.java:350)
        at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:326)
        at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:208)
        at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:165)
        at org.hibernate.event.internal.DefaultMergeEventListener.cascadeOnMerge(DefaultMergeEventListener.java:439)
        at org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:308)
        at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:151)
        at org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:914)
        at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:896)
        at org.hibernate.engine.spi.CascadingAction$6.cascade(CascadingAction.java:288)
        at org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:380)
        at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:323)
        at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:208)
        at org.hibernate.engine.internal.Cascade.cascadeCollectionElements(Cascade.java:409)
        at org.hibernate.engine.internal.Cascade.cascadeCollection(Cascade.java:350)
        at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:326)
        at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:208)
        at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:165)
        at org.hibernate.event.internal.DefaultMergeEventListener.cascadeOnMerge(DefaultMergeEventListener.java:439)
        at org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:308)
        at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:151)
        at org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:914)
        at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:896)
        at org.hibernate.engine.spi.CascadingAction$6.cascade(CascadingAction.java:288)
        at org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:380)
        at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:323)
        at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:208)
        at org.hibernate.engine.internal.Cascade.cascadeCollectionElements(Cascade.java:409)
        at org.hibernate.engine.internal.Cascade.cascadeCollection(Cascade.java:350)
        at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:326)
        at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:208)
        at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:165)
        at org.hibernate.event.internal.DefaultMergeEventListener.cascadeOnMerge(DefaultMergeEventListener.java:439)
        at org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:308)
        at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:151)
        at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:76)
        at org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:904)
        at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:888)
        at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:892)
        at com.company.hibernate.HibernateDao.save(HibernateDao.java:129)
        at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
        at $Proxy53.save(Unknown Source)
        at com.company.application.UserManager.save(UserManager.java:46)
        at sun.reflect.GeneratedMethodAccessor67.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
        at $Proxy66.save(Unknown Source)
        at com.company.application.UserOperationController.saveUser(UserOperationController.java:533) 
```

**我们不确定 AbstractList 来自哪里，**或者我们如何负责。使用 Hibernate 4 时是否有任何潜在的陷阱（这个问题是升级后的新问题），可能导致部分不可修改的对象？或者这会导致 Hibernate 的行为方式导致它试图创建不可修改的对象实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T09:17:41.927

在这段代码中：

```
@OneToMany(cascade = CascadeType.ALL)
@LazyCollection(LazyCollectionOption.FALSE)
private Map<String, Project> associatedProjects = new HashMap<String, Project>(); 
```

如何添加这个。

```
@OneToMany(cascade = CascadeType.ALL)

*****@JoinColumn(name="")***** 

@LazyCollection(LazyCollectionOption.FALSE)
private Map<String, Project> associatedProjects = new HashMap<String, Project>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-28T15:33:39.573

我遇到了同样的问题（与`Sets`not `Lists`），似乎 Hibernate 的 Persistent 有问题的集合变体试图委托给不实现该`add`方法的抽象基类。我找到的解决方案是将数据成员设置为空，`merge`然后将数据成员设置回我希望它包含的新列表。相当明显的缺点是即使我只想添加或删除一个记录，我也会删除所有记录。好处是它确实有效......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-29T07:55:43.370

使用此交易类型：

```
@javax.transaction.Transactional(Transactional.TxType.REQUIRES_NEW) 
```

# python - 我可以使 Django 数据库路径（对于 sqlite3）“跨平台”吗？

> ID：10889388
> 
> 赞同：9
> 
> 时间：2012-06-04T22:40:41.083
> 
> 标签：python, windows, django, linux, macos

我正在学习 Django 和 Python（以及一般的编程）。为了简单起见，我使用 sqlite3 作为我的数据库，同时我正在阅读 Django 等教程。

我是一个多平台用户（Mac OS、Windows、Linux），具体取决于我当时所处的位置。所以，我所做的就是将我的编程项目放在我的 Dropbox 中，这样我就可以在任何地方处理相同的代码。

问题是，在特定项目的 settings.py 文件中，我指定了数据库路径，如下所示：

```
DATABASES = {
    'default': {
    'ENGINE': 'django.db.backends.sqlite3',                             # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
    'NAME': 'C:/Users/David/Dropbox/programming/mysite/database',       # Or path to database file if using sqlite3. 
```

...但是当我使用 MacOS 或 Linux 时，显然 C:/ 会阻塞。我想知道是否有人建议对此进行简单的补救。当然，我可以做到的一种方法是通过 MySQL 或其他方式在我的网络服务器上远程设置我的数据库，但我认为可能有一种简单的方法来做到这一点，例如使用“if”语句。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-04T23:04:19.090

在 settings.py 中使用[相对路径](http://agiliq.com/books/djangodesignpatterns/misc.html#use-relative-path-in-settings-py)是很常见的，被许多人认为是最佳实践。这样的事情可能会有所帮助。

```
from os.path import dirname, join

PROJECT_DIR = dirname(__file__)

DATABASES = {
    # ...
    'NAME': join(PROJECT_DIR, 'your_db_name.db'),
    # ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T23:13:54.693

我在适当的情况下使用上述两种方法。我的所有项目中都有相对路径，但有些需要平台检测。

第三种方法是将版本控制之外的 local_settings 文件导入到主设置文件中。`from local_settings import *`- 对于每个环境，此本地设置文件可能不同。如果你想变得花哨，你可以放入某种适合你的环境检测，并导入相应的 windows、osx 或 linux 文件。

如果您有三个环境，则此方法很干净并且可能更可取，因为它不会使您的 settings.py 与所有环境设置混淆。

[Django 本地设置](https://stackoverflow.com/questions/4909958/django-local-setting)

我个人对每个环境都有更精细的设置文件，例如用于数据库选择的文件（有时，我希望一个空白的 sqlite db 可以轻松重置）、启用 S3、调试工具栏、本地开发（模板调试、缩略图调试等），开/关缓存，以便我可以混合和匹配生产、登台、不同级别的登台调试和本地开发所需的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T22:57:32.737

不是一个很好的解决方案，但您可以测试您正在运行的平台，例如：

```
import platform
'NAME': 'C:/Users/David/Dropbox/programming/mysite/database' if platform.system() == 'Windows' else '<Linux path to sqlite>' 
```

# web-services - xception lors de l'envoi de l'évènement contexte initialisé（上下文初始化）

> ID：10889389
> 
> 赞同：2
> 
> 时间：2012-06-04T22:40:41.457
> 
> 标签：web-services, spring, spring-mvc, spring-webflow

我在 Eclipse 中使用 Spring 2.5 开发 Web 服务应用程序，在服务器上部署应用程序时出现以下错误：

```
 INFO: Initializing Spring root WebApplicationContext
log4j:WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader).
log4j:WARN Please initialize the log4j system properly.
4 juin 2012 17:06:06 org.apache.catalina.core.StandardContext listenerStart
GRAVE: Exception lors de l'envoi de l'évènement contexte initialisé (context initialized) à l'instance de classe d'écoute (listener) org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'MeteoPrevisionEndpoint' defined in class path resource [applicationContext-ws.xml]: Cannot resolve reference to bean 'MeteoServiceImpl' while setting constructor argument; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'MeteoServiceImpl' is defined
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:275)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:104)
    at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:495)
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:162)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:925)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:835)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:440)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:429)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:728)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:380)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'MeteoServiceImpl' is defined
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:387)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:971)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:246)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:269)
    ... 35 more
4 juin 2012 17:06:06 org.apache.catalina.core.StandardContext start
GRAVE: Error listenerStart
4 juin 2012 17:06:06 org.apache.catalina.core.StandardContext start
GRAVE: Erreur de démarrage du contexte [/Contenu20] suite aux erreurs précédentes
4 juin 2012 17:06:06 org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext
4 juin 2012 17:06:06 org.apache.coyote.http11.Http11Protocol start
INFO: Démarrage de Coyote HTTP/1.1 sur http-8080
4 juin 2012 17:06:07 org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:8009
4 juin 2012 17:06:07 org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/188  config=null
4 juin 2012 17:06:07 org.apache.catalina.startup.Catalina start
INFO: Server startup in 10287 ms 
```

我认为问题出在注释中，但我无法解决。这是代码：applicationContext-ws.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"

    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:oxm="http://www.springframework.org/schema/oxm"

    xmlns:sws="http://www.springframework.org/schema/web-services"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd

       http://www.springframework.org/schema/oxm http://www.springframework.org/schema/oxm/spring-oxm-1.5.xsd
       http://www.springframework.org/schema/context 
       http://www.springframework.org/schema/context/spring-context-2.5.xsd
       http://www.springframework.org/schema/web-services
        http://www.springframework.org/schema/web-services/web-services-1.5.xsd">

<context:component-scan base-package="com.sample.services" /> 

    <!--
        ===================== SOAP =====================================
    -->

    <bean id="messageFactory" class="org.springframework.ws.soap.saaj.SaajSoapMessageFactory" />

    <bean id="messageReceiver"

        class="org.springframework.ws.soap.server.SoapMessageDispatcher" />

<!--
        ===================== ENDPOINTS =====================================
    -->

    <bean id="MeteoPrevisionEndpoint" class="com.sample.ws.MeteoPrevisionEndpoint">

        <constructor-arg ref="MeteoServiceImpl" />

        <constructor-arg ref="marshaller" />
    </bean>

    <oxm:jaxb2-marshaller id="marshaller" contextPath="com.sample.schema" />    

    </beans> 
```

MeteoService.java

```
public interface MeteoService {     
    List<Meteo> getMeteoPrevision(String date_jour,VilleClass ville);
} 
```

MeteoServiceImpl.java

```
@Service("MeteoServiceImpl")
@Transactional
public class MeteoServiceImpl implements MeteoService {

    @Override
    @Transactional(readOnly = true)
    public List<Meteo> getMeteoPrevision(String date_jour,VilleClass ville) {
        List<Meteo> previsions = new ArrayList<Meteo>();
        Meteo meteoprevision=new Meteo();
        meteoprevision.setVille(ville); 
        meteoprevision.setTemp("20°");          
        previsions.add(meteoprevision);
        return previsions;
    }    

} 
```

MeteoPrevisionEndpoint.java

```
@Endpoint
public class MeteoPrevisionEndpoint {   

    private static final Log logger = LogFactory.getLog(MeteoPrevisionEndpoint.class);
    private ObjectFactory objectFactory = new ObjectFactory();
    **private MeteoService meteoService;**
    private Marshaller marshaller;

    public MeteoPrevisionEndpoint(MeteoService meteoService, Marshaller marshaller) 
       {
        this.meteoService = meteoService;
        this.marshaller = marshaller; 
        }

    .....
} 
```

如果我在 applicationContext-ws.xml 中使用服务“MeteoService”的显式定义，如下所示：

```
 <bean id="MeteoServiceImpl"
 class="com.sample.service.Impl.MeteoServiceImpl"> </bean> 
```

我没有问题，但我想使用注释:((有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:47:56.093

我发现了问题：D，包名称是“com.sample.service”而不是“com.sample.services”。非常感谢 JB Nizet :)

# javascript - 正则表达式 - 获取特定字符串后的数字

> ID：10889391
> 
> 赞同：12
> 
> 时间：2012-06-04T22:40:46.330
> 
> 标签：javascript, regex

我有一个文本字符串，它可以是任意数量的字符，我想在末尾附加一个订单号。然后当我需要再次使用它时，我可以将订单号拔掉。由于数字可能是可变长度的，我想做一个正则表达式来捕获`=`字符串中符号之后的所有内容`?order_num=`

所以整个字符串将是

```
"aijfoi aodsifj adofija afdoiajd?order_num=3216545" 
```

我尝试使用在线正则表达式生成器，但没有运气。有人可以帮我提取最后的数字并将它们放入一个变量中，然后将之前的内容`?order_num=203823`放入它自己的变量中。

我会发布一些我自己的尝试，但我预见到失败和混乱。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-04T22:44:03.420

```
var s = "aijfoi aodsifj adofija afdoiajd?order_num=3216545";

var m = s.match(/([^\?]*)\?order_num=(\d*)/);
var num = m[2], rest = m[1]; 
```

但请记住，正则表达式很*慢*。尽可能使用`indexOf`和`substring`/ `slice`。例如：

```
var p = s.indexOf("?");
var num = s.substring(p + "?order_num=".length), rest = s.substring(0, p); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-04T22:44:47.180

我认为不需要正则表达式：

```
var str="aijfoi aodsifj adofija afdoiajd?order_num=3216545";
var n=str.split("?"); 
```

`n`然后将是一个数组，其中索引 0 在？和索引 1 之后。

另一个例子：

```
var str="aijfoi aodsifj adofija afdoiajd?order_num=3216545";
var n=str.split("?order_num="); 
```

会给你结果： `n[0]`=`aijfoi aodsifj adofija afdoiajd`和 `n[1]`=`3216545`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-04T23:06:51.293

您可以从第一个实例开始子字符串`?`，然后使用正则表达式来摆脱表达式中的大部分复杂性，并提高性能（这可能无论如何都可以忽略不计，除非您在数千次迭代中这样做，否则无需担心） . 此外，这将匹配`order_num=`查询字符串中的任何点，不一定只是在查询字符串的最后。

```
var match = s.substr(s.indexOf('?')).match(/order_num=(\d+)/);
if (match) {
  alert(match[1]);
} 
```

# pdf - Updating a PDF Barcode Field

> ID：10889393
> 
> 赞同：0
> 
> 时间：2012-06-04T22:41:06.323
> 
> 标签：pdf, adobe, barcode

I have an existing PDF template that I have to edit. I know pretty much nothing about messing with PDFs (fair warning). There is a standard barcode that the customer wants changed to a Data Matrix barcode.

What is in the PDF template right now:

![Current Barcode](../Images/bd09782c6220a0014cc9fc3411fc30fc.png)

So far, I have the following:

1.  Open the PDF template (opens in Adobe Acrobat Pro)
2.  Go to Tools > Forms > Edit in Designer. This opens the PDF in LiveCycle Designer.
3.  Right click on the on the barcode and go to Palettes > Object. This opens an object tab for the barcode.

Now, it looks like there is a drop down to edit the barcode type. But it's disabled, and I don't know why.

![Disabled Dropdown](../Images/cd155fdf260e6db1ce07be67a6ab681c.png)

The option to right click on the barcode and select Change Object Type is also disabled.

Does anyone know how to edit the barcode type to be a Data Matrix?

*UPDATE* I do not want to have to re-create the barcode. I just want to edit what is there. Not add and remove.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:01:37.960

Ok, I managed to find a solution. At the top of LiveCycle, I originally had two tabs.

![Original Tabs](../Images/315296a85404848ccac46195854aeebb.png)

If you right click on the gray space next to the tabs, you can choose "XML Source", which makes a new tab appear.

![New Tabs](../Images/8d8906ea21f50c34c9b1d92e0901e895.png)

In the "Design View" tab, I clicked on the bar code I wanted to change (so that it was selected). I then clicked on the "XML Source" tab. It takes you directly to the bar code code, which looked like the following (note that I removed some attributes and tags and replaced them with ...)

```
<field ...>
    <ul>
        <barcode type="code128" ... />
    </ul>
    ...
</field> 
```

That `type` attribute on the `barcode` tag just needed to be changed to `dataMatrix`, and the barcode was updated to the correct type.

Note: I also had to modify the heights of the fields, etc. But this is pretty self explanatory.

# php - 获取 symfony2 控制器中选择标签的选定选项的 id

> ID：10889395
> 
> 赞同：0
> 
> 时间：2012-06-04T22:41:34.150
> 
> 标签：php, symfony

我有一个只有一个选择标签的表单。当用户提交表单时，我想在我的控制器中获取所选选项标签的 id。我的表格是

```
 <div class="one_third">
        <form name="portfolios" action="{{ path('MunichInnovationGroupBundle_portfolio') }}" method="post" >
            <h2>Select your portfolio</h2>
            <p>Change the portfolio to be managed:<br />
                <select name="portfolio" style="width: 265px; height:28px;">
                    <option selected="selected" value="default">Switch Your Portfolio</option>
                    {% for portfolio in portfolios %}
                        <option id={{ portfolio.id }}>{{ portfolio.portfolioName }}</option>
                        {% endfor %}
                </select>
            </p>
            <p>
                <input style="margin-left:100px; height:26px; cursor:pointer; background-color: #2D9AD3 !important; border: 1px solid #067EBD; color: #FFFFFF; text-shadow: 0 -1px 0 #067EBD;" type="submit"class="button2 tooltip" value="Switch">
            </p> 
        </form>
    </div> 
```

在我的控制器中

```
if($request->getMethod() == 'POST'){
        $data = $request->request->all();
        //$portfolio_id = $data['portfolio_id'];
        var_dump($data);
        echo $data;
        exit();
    } 
```

var_dump($data) 给了我这样的东西

```
array
 'portfolio' => string 'Umair Portfolio 1' (length=17)

Array 
```

我怎样才能得到身份证？

有什么建议么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:47:31.313

您必须将属性 id 更改为值

```
<option value={{ portfolio.id }}>{{ portfolio.portfolioName }}</option> 
```

# java - Oracle 列名问题

> ID：10889399
> 
> 赞同：0
> 
> 时间：2012-06-04T22:41:56.523
> 
> 标签：java, oracle, hibernate

我在休眠中有父子映射，其中实体通过表连接。

问题是这个表中由hibernate自动创建的列被称为like `"_actions_id"`。但我使用 Oracle，它说列名`"_actions_id"`无效。

当我用 包装名称`""`并手动执行脚本时，它工作正常，但是有没有办法让休眠状态用 包装所有列`""`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T00:40:35.947

在您的示例中，您指定了一个连接表，用于这样的场景

```
People table:
PID | Name
1   | Albert
2   | Bob

TelephoneNumbers table:
TID | Tel
1   | 123-456
2   | 456-789
3   | 789-012

Join table:
PID | TID
1   | 1
1   | 2
2   | 3 
```

即，将当前实体连接到集合中的实体的列既不在当前表中，也不在集合实体的表中。这对于多对多映射更有用，但如果您无法控制`TelephoneNumbers`表，也可以将其用于 OneToMany。否则你应该只使用 plain `@JoinColumn`。

`@JoinTable`许多网站已经多次解释了的用法。请参阅[JavaDoc](http://docs.oracle.com/javaee/6/api/javax/persistence/JoinTable.html)和[这个问题](https://stackoverflow.com/questions/5478328/jpa-jointable-annotation)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T23:09:51.043

我认为您想要一个自定义[NamingStrategy](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/cfg/NamingStrategy.html#collectionTableName%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)。我明白[了](https://forum.hibernate.org/viewtopic.php?f=1&t=996067)。在你的情况下，它会是这样的：

```
public class MyNamingStrategy extends DefaultNamingStrategy {
    public String logicalCollectionColumnName(String columnName, String propertyName, String referencedColumn) {
        return "`" + super.logicalCollectionColumnName(columnName, propertyName, referencedColumn + "`";
    }
} 
```

# c++ - 将值快速插入到以递增整数为键的映射中？

> ID：10889402
> 
> 赞同：7
> 
> 时间：2012-06-04T22:42:12.980
> 
> 标签：c++, map

`map::insert(iterator position, const value& k)`通过在参数位置提供适当的值，可以显着提高效率。

如果我使用整数作为键，并且每次插入都使用比所有先前插入的键都大的数字来完成，我可以在给出映射的迭代器`::insert`时加快操作吗？`::end()`

就像是：

```
myMap.insert( myMap.end() , make_pair( next_number , myValue ) ); 
```

其中`myMap`是类型`map<uint64_t,MyType>`并且`next_number`是每递增的大整数。

编辑：

这个问题的答案可能会有所不同，具体取决于存储在其中的数据是否`map`密集（参见下面的讨论）。所以，让我们从两个方面来问这个问题：一旦它稠密，一旦它不稠密。还是很好奇。也许测量会回答这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T23:33:14.123

为了直接回答所提出的问题，C++ 规范说：

*   在 C++03 中*，*`a.insert(p,t)`如果`t`在. *`p`*
**   在 C++11 中*，*`a.insert(p,t)`如果`t`在. *`p`**

 **在这两种情况下都不`p`需要可取消引用。因此，在您的情况下，`a.end()`可能是 C++11 中的最佳提示，但不是 C++03 中的最佳提示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T07:15:45.393

我建议两件事：

*   在这种情况下更喜欢`std::unordered_map`，总是在一端插入是红黑树的最坏情况
*   如果被证明很麻烦，请使用自定义分配器`new`，从您所说的可以使用池分配策略

请注意，C++11 允许使用有状态分配器，因此提供适合并嵌入其中的分配器`std::vector<T>`并将其用作堆栈应该很容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T22:52:22.927

任何建议都只是一个建议，是要尝试和衡量的东西。我们无法真正告诉您执行插入的最高效方式，您应该针对自己的特定用例进行衡量，看看什么是最好的。

如果您的地图紧凑且密集（从 0 到最大键的几乎所有项目都被真实数据占用）并且最大键足够低以成为合理的数组索引，您可以切换到使用 a`std::vector<value>`并始终插入到末尾。由于它不断增长，您有时需要重新分配向量（通常是当向量加倍时）。这可能很昂贵，但通常插入会非常便宜。您不必处理二叉树的潜在重新平衡，并且向量对于其他目的非常缓存友好。

如果您的地图的键空间不紧凑/密集，并且最大键太大以至于它不是一个可以想象的内存索引，那么带有提示的插入将是您最好的选择。

如果顺序无关紧要，您可以尝试[std::unordered_map](http://en.cppreference.com/w/cpp/container/unordered_map)。这是一个哈希表实现。所以插入成本将与散列的质量和速度有关。获取 64 位密钥并将其转换为 size_t 散列（size_t 甚至可能是 64 位）应该是微不足道和快速的。

但不必相信我的话，测量它，然后自己看看......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-27T17:26:38.277

自从我最近遇到这个问题以来，我做了一些测量。

我有一张大地图，有很多数据，很少插入数据，99% 的时间只是使用引用就地访问和修改。但是，这些数据最终必须保存到磁盘并重新加载。像“使用无序地图”这样的解决方案似乎是一种廉价的快速错误方法，有序地图对我来说是正确的方法，因为数据是有序的。唯一的问题是从文件加载。

我想知道这个操作的真正成本是多少以及如何加快它，所以我测量了：

```
// Example program
#include <iostream>
#include <string>
#include <map>
#include <vector>
#include <time.h>

std::vector<int> amount = {100, 1000, 10000, 100000, 1000000, 5000000};

int main()
{
  for(int j=0; j<amount.size(); j++) 
  {
    clock_t tStart = clock();

    std::map<int,int> mymap;
    for(int i=0; i<amount[j]; i++){
      mymap[i] = i;
    }

    printf("Time taken []: %.2fs\n", (double)(clock() - tStart));
  }
  for(int j=0; j<amount.size(); j++) 
  {
    clock_t tStart = clock();

    std::map<int,int> mymap;
    mymap[0] = 0;
    auto it = mymap.begin();
    for(int i=1; i<amount[j]; i++){
      it = mymap.insert(it, std::pair<int,int>(i,i));
    }

    printf("Time taken insert end()-1: %.2fns\n", (double)(clock() - tStart));
  }
  for(int j=0; j<amount.size(); j++) 
  {
    clock_t tStart = clock();

    std::map<int,int> mymap;
    for(int i=1; i<amount[j]; i++){
      mymap.insert(mymap.end(), std::pair<int,int>(i,i));
    }

    printf("Time taken insert end(): %.2fns\n", (double)(clock() - tStart));
  }
  for(int j=0; j<amount.size(); j++) 
  {
    clock_t tStart = clock();

    std::map<int,int> mymap;
    for(int i=0; i<amount[j]; i++){
      mymap.insert(mymap.begin(), std::pair<int,int>(i,i));
    }

    printf("Time taken insert begin(): %.2fs\n", (double)(clock() - tStart));
  }
  return 0;
} 
```

结果：

```
Time in ns
N       end()-1 end()   begin() []
100     12      8       22      12
1000    77      54      188     97
10000   763     532     2550    1174
100000  7609    6042    23612   17164
1000000 75561   62048   270476  272099
5000000 362463  306412  1827807 1687904 
```

[![在此处输入图像描述](../Images/79e37d1ad6588af159adfc2085d2f516.png)](https://i.stack.imgur.com/WCxru.png) [![在此处输入图像描述](../Images/8ecefbff782378f30ba45460e3f00601.png)](https://i.stack.imgur.com/EZyjJ.png)

**概括：**

*   是的，有收获，巨大的收获，没有任何真正的缺点。对数据进行排序时，比无序地图要好得多，对于将地图保存到文件并重新创建它的情况非常有用。

*   无论元素数量如何，如果提示正确，插入时间都是相同的。因此，无需重复使用散列无序映射来获得恒定时间。

*   最坏的情况是，如果您的提示是最坏的提示，您可能会丢失一些提示。我认为在没有提示的情况下进行插入没有任何意义，特别是如果您知道数据将插入的位置。大多数时候你都会这样做。**

# asp.net-mvc - ASP.NET MVC：在一个视图中显示多个模型（一对多关系）

> ID：10889405
> 
> 赞同：3
> 
> 时间：2012-06-04T22:42:18.690
> 
> 标签：asp.net-mvc, asp.net-mvc-scaffolding

我正在尝试使用 MVCScaffolding 和 ASP.NET 组合（我认为是）一个简单的 ASP.NET Web 应用程序。SQL 中有一个基本的数据表层次结构：dbo.Albums、dbo.Tracks。

模型很简单。对于专辑：

```
public class Albums {
public int ID { get; set; }
public string Artist { get; set; }
    public string AlbumTitle { get; set; }
public string Notes { get; set; } 
}

public class Tracks {
public int ID { get; set; }
public int AlbumID { get; set; }
public string TrackTitle { get; set; }
public string Notes { get; set; }
} 
```

基本的 CRUD 视图已构建并且工作正常。但是，我正在尝试构建一个视图，该视图显示`Album`模型数据，后跟一个表，其中一行用于给定 AlbumId 的每个跟踪记录。本质上，这是MVCScaffolding 模板中的`Details`视图后跟的视图，但它使用两个模型并有一个参数（来自表）。`Index``ID``Albums`

我试图将模型添加在一起以从那里访问数据，但我不知道如何迭代列表（索引视图使用`@model IEnumerable<Music.Models.Tracks>`）。这是组合模型：

```
public class AlbumsExtended
{
    public Albums Albums { get; set; }
    public Tracks Tracks { get; set; }
} 
```

我正在尝试在 AlbumsExt.cshtml 中使用`@model Music.Models.AlbumsExtended`. 控制器如下所示：

```
public ViewResult AlbumExt(int id)
    {
        return View(tracksRepository.All.Where(tracks => tracks.AlbumId == id));
    } 
```

但显然这是不正确的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T23:04:13.580

鉴于您的专辑和曲目的结构，最好在专辑和曲目之间建立直接的一对多关系，以便 1 个专辑可以包含许多曲目。无论一首曲目可能出现在多少张专辑中，您的模型都可能如下所示：

```
public class Albums {
    public int ID { get; set; }
    public string Artist { get; set; }
    public string AlbumTitle { get; set; }
    public string Notes { get; set; } 
    public IQueryable<Track> Tracks { get; set; }
}

public class Track {
    public int ID { get; set; }
    public int AlbumID { get; set; }    // This may be unnecessary 
    public string TrackTitle { get; set; }
    public string Notes { get; set; }
} 
```

这将允许您的数据层填充属于特定专辑的所有曲目，但如果您不需要知道曲目，它可以保持为空。但是您的数据层只需要获取专辑，然后使用 IQueryable 对象填充 Tracks 属性。

```
public ViewResult AlbumExt(int id)
{
    Album album = albumRepository.All.Where(a => a.ID == id);
    album.Tracks = tracksRepository.All.Where(t => t.AlbumId == id);
    return View(album);
} 
```

这将为您提供一个模型，但仍然可以通过视图中的 Model.Tracks 属性访问所有相关轨道：

```
@model MyNameSpace.Album

@{
    foreach (var track in Model.Tracks)
    {
        <text>
            <h1>@track.TrackTitle</h1><br />
        </text>
    }    
} 
```

# java - 使用 zipfileset 将 ant 文件中的 JAR 打包错误

> ID：10889407
> 
> 赞同：1
> 
> 时间：2012-06-04T22:42:37.827
> 
> 标签：java, ant, jar

我在用于构建 Java 应用程序的 ANT 文件中遇到了一个奇怪的问题。生成 jar 文件时，最终我使用 zipfileset 在 JAR 中包含资源文件（图像、字体和配置文件），如下所示：

```
 <zipfileset dir="src/res" prefix="res"/>
                <zipfileset dir="src/res/images" prefix="res/images" />
                <zipfileset dir="src/res/images/Bubbles" prefix="res/images/Bubbles"/>
                <zipfileset dir="src/res/images/Clocks" prefix="res/images/Clocks"/>
                <zipfileset dir="src/config" prefix="res/config"/>
                <zipfileset dir="src/ontology" prefix="res/ontology"/> 
```

为了保持原始结构，看起来像这样：

```
res
 |-images
 |   |-Bubbles
 |   |-Clocks
 |-fonts
 |-config
 |-ontology 
```

所以在 JAR 中复制，我在 zipfileset 中使用前缀参数。问题是我在任何 res/images/Bubbles 和 res/images/Clocks 文件夹中的 res/images 和三重图像（同一图像的 3 个副本）中都得到了重复的图像，另一方面，它们是分别为 2 和 3 个深度级别。res/config 和 res/ontology 是正确的，那里没有重复的文件……截图看看我的意思：

![在此处输入图像描述](../Images/809ba40165235d922bba48866c6e14df.png)

我忘了提，但很明显，每个文件夹中每个图像只有一个实例。任何想法是什么导致了这种行为？

问候，亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T22:58:21.090

`ant`实际上完全按照你告诉它的做。你告诉他：

*   将所有文件打包`src/res`并映射到`res`.
*   打包所有文件`src/res/images`并将它们映射到`res/images`
*   将所有文件打包`src/res/images/Bubbles`到它们下面`res/images/Bubbles`

现在让我们假设您有一个`src/res/images/Bubbles/activity_bubble_orange.png`文件。该文件包含在第一个 zipfileset、第二个 zipfileset 和第三个 zipfileset 中。因此，它将被包装三遍。

要做你想做的事，你需要做一个`<zipfileset dir="src/res" prefix="res" />`，但使用包含/排除过滤器过滤内容。

请参阅此处：[http](http://ant.apache.org/manual/Types/zipfileset.html) ://ant.apache.org/manual/Types/zipfileset.html ，它说这是一种文件集。并在这里：[http](http://ant.apache.org/manual/Types/fileset.html) ://ant.apache.org/manual/Types/fileset.html查看如何为文件集指定包含/排除过滤器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T00:04:08.350

您可以使用以下属性来包含整个路径，而无需对每个子目录进行硬编码。

包括="* */* .*"

`<zipfileset src="examples.zip" includes="**/*.html" prefix="docs/examples"/>`

在上面的示例中，我递归地包含 *.html。

Sukhbir Dhillon Addteq

# jquery - 单击复选框时更改div的背景颜色

> ID：10889408
> 
> 赞同：6
> 
> 时间：2012-06-04T22:42:37.843
> 
> 标签：jquery, css, forms, checkbox

我有一个带有多个复选框的表单，如下所示：

```
<div><input type='checkbox' name='groupid' value='1'>1</div>
<div><input type='checkbox' name='groupid' value='2'>2</div>
<div><input type='checkbox' name='groupid' value='3'>3</div> 
```

我想要做的是当复选框被选中时，更改 div 的背景颜色，当它未被选中时，删除背景颜色。我怎样才能使用 jquery 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-04T22:45:33.177

jQuery：

```
$("input[type='checkbox']").change(function(){
    if($(this).is(":checked")){
        $(this).parent().addClass("redBackground"); 
    }else{
        $(this).parent().removeClass("redBackground");  
    }
}); 
```

CSS：

```
.redBackground{
    background-color: red;  
} 
```

我建议使用添加/删除类，而不是直接更改父级的 CSS `div`。

演示：http: [//jsfiddle.net/uJcB7/](http://jsfiddle.net/uJcB7/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T22:45:43.850

一种直接更改 CSS 属性的解决方案：

```
$(":checkbox").on("change", function() {
    var that = this;
    $(this).parent().css("background-color", function() {
        return that.checked ? "#ff0000" : "";
    });
});​ 
```

**演示：http:** [//jsfiddle.net/YQD7c/](http://jsfiddle.net/YQD7c/)

* * *

另一种解决方案使用`toggleClass`：

```
$(":checkbox").on("change", function() {
    $(this).parent().toggleClass("checked", this.checked);
});​ 
```

在 CSS 中定义类`checked`的位置如下：

```
.checked {
    background-color: #ff0000;
}​ 
```

**演示：http:** [//jsfiddle.net/YQD7c/1/](http://jsfiddle.net/YQD7c/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-19T18:34:14.133

我知道这是一个旧线程，但我来搜索并且这个答案让我大部分时间。（需要对 WordPress 进行一些调整）因此，如果其他人登陆使用 WordPress 的同一页面，请试一试，对我来说非常有用。

剧本

```
jQuery("input[type='checkbox']").change(function(){
if(jQuery(this).is(":checked")){
    jQuery(this).parent().addClass("greenBackground"); 
}
else{
    jQuery(this).parent().removeClass("greenBackground");  
} }); 
```

CSS

```
.greenBackground{
background-color: #06530e;  
color: #ffffff;} 
```

# android - Android 中的 7 英寸平板电脑 - 屏幕尺寸限定符

> ID：10889409
> 
> 赞同：1
> 
> 时间：2012-06-04T22:42:53.173
> 
> 标签：android, blackberry-playbook, kindle-fire

当我开始在一些 7 英寸的 Android 机型上测试我的应用程序时，我遇到了一个奇怪的行为，我想知道其他人是否发现了同样的问题，以及人们推荐的修复方法。

以下是详细信息：

该应用程序具有完整的平板电脑支持，这是由布局的限定符触发的。xlarge 设备获得平板模式，屏幕上显示多个片段。

对于较新的 Android 版本，还有一些值设置变量，这些变量使用 sw600dp 限定符和 xlarge 限定符更改流上的 UI。

问题：

我现在正在 Kindle Fire 和 RIM BlackBerry Playbook 上进行测试，并且还想支持即将推出的 Google Nexus 平板电脑（或其他任何名称）和其他 7 英寸外形设备。

playbook 和 fire 都有 7 英寸的屏幕和 1024x600 的屏幕分辨率。

然而，剧本似乎诱使 Android 认为它是一个 xlarge 设备，而 fire 并没有这样做。

平板电脑和标准用户界面都可以正常工作，但恕我直言，平板电脑模式更好，可以在 7 英寸设备上使用。但是，如果我将布局推入大型限定符以使平板电脑模式也火起来，我也会在例如 Note 或其他相当小的设备上得到它。

使用 Android 4x 我可以使用 sw600dp 和其他限定符，但旧版本呢？我假设一个 7 英寸的设备应该表现得像一个平板电脑，但例如 Note..

这种情况的最佳实践是什么？我对报告 xlarge 的剧本的观察是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T23:22:43.507

> 然而，剧本似乎诱使 Android 认为它是一个 xlarge 设备，而 fire 并没有这样做。

设备制造商根据尺寸和密度选择设备放入的存储桶。对于像 RIM 和亚马逊这样不想要 Play 商店的制造商来说，这会翻倍，因此不必遵守 Play 商店规定的任何特定兼容性要求，因此欢迎他们对 Google 的指导嗤之以鼻。

> 这种情况的最佳实践是什么？

我不能告诉你“最好的”。

但是，如果您希望针对特定设备覆盖某些布局以使用特定大小，那么我会尝试以下方法（假设您将用于正常情况的布局称为`R.layout.main`）：

步骤#1：创建`res/layout/main_funky.xml`为符号链接或硬链接`res/layout-xlarge/main.xml`（同样适用于`-land`等）。

第 2 步：在您的 Java 代码中，无论您指的是什么`R.layout.main`（例如`onCreateView()`a `Fragment`），决定是加载`R.layout.main`还是`R.layout.main_funky`根据`android.os.Build`数据来按型号检测这些古怪的设备。由于`R.layout.main_funky`是您的常规`main`布局之一，所有依赖于小部件的代码都应该不受此选择的影响。

第 3 步：在您的特定情况下，将 MMPD（魔法 Maven 精灵尘埃）添加到第 1 步和第 2 步... :-)

> 我对报告 xlarge 的剧本的观察是否正确？

我买了一本 Playbook，确定 RIM 的分发模式……令人不快，并尽了最低限度的准备，在上面写了一本书的章节。我还没有尝试查看它是`-large`,`-xlarge`还是其他东西。

话虽这么说，NOOK Tablet IIRC 受此困扰（声称是，`-xlarge`而不是`-large`）。

我希望谷歌 Nexus 平板电脑，如果这样的事情实现，能够正确地支持大小桶，再加上运行一个足够新的 Android 版本，`-sw600dp`并且 kin 可以工作。

# javascript - jquery菜单幻灯片悬停功能加载太快

> ID：10889413
> 
> 赞同：0
> 
> 时间：2012-06-04T22:43:00.120
> 
> 标签：javascript, jquery, menu

我目前正在制作一个包含菜单导航的网站，该菜单导航与在[fotopunch.com](http://www.fotopunch.com)上找到的几乎相同，而不是向下指向它。无论如何，我使用 jquery/javascript 为菜单编写了代码并且它可以工作，但**我想知道是否有一种方法可以使悬停功能在指定的时间内不生效。**这样，当您快速将鼠标悬停在某个项目上时，它不会导致页面不必要地加载。如果有人有任何建议，我将不胜感激。

下面是我创建菜单导航的部分代码的副本。我遇到的另一个问题是，如果您连续悬停在太多导航项上，箭头就会落后。我希望通过在悬停功能生效之前创建一个等待时间来解决这个问题。

```
$("div#menu .reps").hover(function() {

if(current_slide != "reps"){
    $(".arrow").animate({"left":"135px"});//move the arrow
    if(current_slide == "clients"){
        $(".clients_display").stop(true, true).fadeOut().hide();
        $(".reps_display").fadeIn().show();
        current_slide = "reps";
    }
    else if(current_slide == "services"){
        $(".services_display").stop(true, true).fadeOut().hide();
        $(".reps_display").fadeIn().show();
        current_slide = "reps";
    }
    else{
        $(".training_display").stop(true, true).fadeOut().hide();
        $(".reps_display").fadeIn().show();
        current_slide = "reps";
    }
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:47:19.317

您可以`delay`在某些呼叫中使用，例如：

`$(".reps_display").delay(100).fadeIn().show();`

或者你可以制作一些`show`并且`hide`有更长的持续时间： `show(2000)`例如。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:53:24.093

我认为你可以做的事情，虽然可能有更好的方法是：

声明一个函数，在其中放置所有带有条件的代码：

```
function hoverFunc(option)
{
    if($(option).is(':hover'))
    {
      all the code to show the menu
    }
} 
```

在你做的 over 功能上：

```
$("div#menu .reps").hover(function() {
   setTimeout("hoverFunc('"+getOptionName+"')",milliseconds);
}); 
```

想法是：当结束时，设置一个超时，当超时时，检查鼠标是否结束然后做任何你想做的事，最难的一点是传递对函数的引用，但你可以传递函数的名称item 只是从 html 或 rel 属性中获取它。

但是，如果您不需要引用，这真的很容易，只需调用函数并检查元素即可。

* * *

还有另一种可能对您来说更有趣的选择。您可以为所有效果添加延迟并在之前添加一个 stop(true)，这样，如果用户快速更改标签，事件将被取消，但如果用户快速通过选项并继续，它会更改菜单外。

# django-syncdb - Django syncdb 不创建数据库表

> ID：10889414
> 
> 赞同：0
> 
> 时间：2012-06-04T22:43:03.777
> 
> 标签：django-syncdb

我一直在解决这个错误，但没有运气。

/signup/ 处的 TemplateSyntaxError

渲染时捕获DatabaseError：关系“signup_product”不存在第1行：...“duration”，“signup_product”。“duration_type” FROM“signup_pr ...

我发现当我运行 manage.py syncdb 时，它并没有在我的数据库中创建任何表。这是一个空数据库，它解释了上述错误。

我运行了 manage.py sqlall myapp 并显示了 myapp.models 中的所有模型

我可以启动 shell 并导入 myapp 就好了。

那么为什么 manage.py syncdb 不创建我的表呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T09:53:26.653

这是在我了解南方之前。我没有使用 migrate，所以 syncdb 没有添加我的新模型。

# android - 将颜色过滤器添加到 Drawable 会更改使用相同 Drawable 的所有 Button

> ID：10889415
> 
> 赞同：31
> 
> 时间：2012-06-04T22:43:15.330
> 
> 标签：android

我有一个屏幕，其中多个按钮使用相同的背景 Drawable。我在各种项目中使用了可重用的代码来添加一个 OnTouch 侦听器，该侦听器在触摸按钮时添加灰色滤光片。这通常可以正常工作，但在这种情况下，当按下任何按钮时，所有按钮都会着色。

[我在http://developer.android.com/guide/topics/graphics/2d-graphics.html](http://developer.android.com/guide/topics/graphics/2d-graphics.html)中看到了解释：

> 注意：项目中的每个唯一资源只能保持一种状态，无论您可以为其实例化多少不同的对象。例如，如果您从同一个图像资源中实例化两个 Drawable 对象，然后更改其中一个 Drawable 的属性（例如 alpha），那么它也会影响另一个。

建议的解决方案是使用 TweenAnimation，它似乎不适用于滤色器。

我还看到了[Android: Cloning a drawable in order to make a StateListDrawable with filters](https://stackoverflow.com/questions/7979440/android-cloning-a-drawable-in-order-to-make-a-statelistdrawable-with-filters)，建议使用 drawable.getConstantState().newDrawable()。这似乎没有什么不同。我猜只要使用相同的物理图像文件，所有 Drawable 都会受到使用相同资源更改任何其他 Drawable 的影响。

除了创建第二个背景图像来显示按下状态之外，还有什么解决方案？如果有一个简单的编程解决方案可以添加到我的代码中并在每个项目中使用，那就太好了。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-08-01T15:15:01.940

应该适合您的示例：

```
Drawable buttonBackground = context.getResources().getDrawable(R.drawable.bg);
buttonBackground = buttonBackground.mutate();

//Set your filter here 
```

# c# - 使用 DrawString 左右对齐文本

> ID：10889417
> 
> 赞同：0
> 
> 时间：2012-06-04T22:43:20.687
> 
> 标签：c#, winforms, gdi+, gdi, drawstring

假设我有 200 像素的空间，我想在其中绘制两个字符串： - 第一个字符串应该左对齐 - 右第二个字符串应该右对齐 - 但如果它们都不适合，则不要重叠（然后做任何我的字符串.修剪选项说）

我是否必须测量每个并手动绘制它，或者 DrawString 是否有某种方式来支持我正在尝试做的事情而无需重新发明轮子？

想象一下 \l 和 \r 是这样做的转义，那么我可以说

```
graphics.Drawstring("\lfirst\rsecond", ...); 
```

我会得到类似的东西

```
"first              second" 
```

至少那是我希望发生的事情（我知道 \l 和 \r 不存在）。有办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T22:48:02.800

我忽略了您的标志，而是（大致）向您展示如何对齐文本。很容易挑选出您的文本，将其拆分并绘制为两个单独的字符串！

```
string text2 = "Use TextFormatFlags and Rectangle objects to"
 + " align text in a rectangle.";

using (Font font2 = new Font("Arial", 12, FontStyle.Bold, GraphicsUnit.Point))
{
    Rectangle rect2 = new Rectangle(150, 10, 130, 140);

    // Create a TextFormatFlags with word wrapping, horizontal center and
    // vertical center specified.
    TextFormatFlags flags = TextFormatFlags.HorizontalLeft |
        TextFormatFlags.VerticalCenter | TextFormatFlags.WordBreak;

    // Draw the text and the surrounding rectangle.
    TextRenderer.DrawText(e.Graphics, text2, font2, rect2, Color.Blue, flags);
    e.Graphics.DrawRectangle(Pens.Black, rect2);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T19:56:20.737

从长远来看，这就是我最终要做的事情：

1.  在左字符串上调用 MeasureString
2.  在正确的字符串上调用 MeasureString
3.  绘制左字符串，左对齐
4.  如果两个字符串的宽度之和小于可用空间的宽度，则绘制右对齐的字符串。

非常简单，尽管我希望框架中有一些东西可以为我完成这项工作。

# c# - C# WebRequest (Http POST over SSL) 在 GetResponse() 处挂起，但不同的 URL 有效。请求中的 POST 参数也错误

> ID：10889420
> 
> 赞同：2
> 
> 时间：2012-06-04T22:43:28.617
> 
> 标签：c#, post, ssl, timeout, httprequest

我发现这段代码按预期工作：

```
var url = "https://limal.info/efulfilment.php";
ServicePointManager.ServerCertificateValidationCallback = delegate { return true; };
var alternativeAnswer = Encoding.UTF8.GetString(new WebClient().UploadValues(url, new NameValueCollection() { { "xml", "test" } })); 
```

然而，下面的代码让我很头疼：

```
var url = "https://limal.info/efulfilment.php";
ServicePointManager.ServerCertificateValidationCallback = delegate { return true; };

var request = (HttpWebRequest)WebRequest.Create(url);
request.ContentType = "application/x-www-form-urlencoded";
request.Method = "POST";
request.Timeout = 5000; // I added this for you, so you only need to wait 5 sec...

using (var requestStream = request.GetRequestStream())
{
    var writer = new StreamWriter(requestStream);
    writer.Write("xml=test");
}
using (var response = request.GetResponse())
{
    using (var responseStream = response.GetResponseStream())
    {
        var reader = new StreamReader(responseStream);
        var answer = reader.ReadToEnd();
    }
} 
```

不知何故，帖子参数没有被识别，我得到了回应：

```
"limal.info bridge error: Missing 'xml' variable in post request." 
```

（正确的答案是 XML 数据格式错误，因为*测试*是无效的 XML...）

**现在到下一个问题：**

当我使用不同的 url 时，会发生超时异常。它挂在以下代码中的*UploadValues处。*（使用*HttpWebRequest*的另一个示例挂在*GetResponse*，我也尝试过。）

```
var url = "https://sys.efulfilment.de/rt/";
ServicePointManager.ServerCertificateValidationCallback = delegate { return true; };
var alternativeAnswer = Encoding.UTF8.GetString(new WebClient().UploadValues(url, new NameValueCollection() { { "xml", "test" } })); 
```

[我在这里](https://stackoverflow.com/questions/2063937/httpwebrequest-getresponse-hangs-the-second-time-it-is-called)和其他网站上读到了类似的问题。似乎在 .NET 中使用带有 SSL 的 Http POST 是一个问题。

为什么？？:(

# c# - Web 应用程序项目 [...] 配置为使用 IIS。找不到 Web 服务器 [...]。

> ID：10889421
> 
> 赞同：309
> 
> 时间：2012-06-04T22:43:49.917
> 
> 标签：c#, asp.net, iis

当我打开解决方案时，我的解决方案文件中有一个“不可用”的 Web 项目。当我右键单击 web 项目并重新加载项目时，我收到以下错误：

`The Web Application Project mycompany.myapp.mywebproject is configured to use IIS. The Web Server 'http://localhost/MyWebApp could not be found.`

我还没有为此 Web 应用程序手动设置虚拟目录。

每个同事，Visual Studio 应该提示我创建虚拟目录，但我没有收到提示。

在我的开发机器上安装 IIS 之前，我安装了 VS2010。

这是我的开发机器设置：

*   Windows 7 企业版
*   服务包 1
*   64位操作系统
*   Visual Studio 2010 企业服务包 1
*   IIS 7.5 版

* * *

## 回答 #1

> 赞同：560
> 
> 时间：2012-10-17T08:28:51.327

由于接受的答案需要 IIS 管理器，而 IIS Express 没有 IIS 管理器或任何 UI，因此这是适用于 IIS Express 用户的解决方案（也应该适用于其他所有人）：

当您打开 Visual Studio 并收到错误消息时，右键单击项目解决方案资源管理器并选择“编辑 {ProjectName}.csproj”

在项目文件中，更改以下行：
`<UseIIS>True</UseIIS>`
以
`<UseIIS>False</UseIIS>`
保存文件。

现在重新加载您的项目。
完毕。

然后您就可以打开您的项目了。如果此时您想使用 IIS，只需转到您的项目属性，单击“Web”选项卡，然后选择使用 IIS 的选项。那里有“创建虚拟目录”的按钮。它可能会告诉您需要以管理员身份运行 Visual Studio 才能创建该目录，因此如果需要，请执行此操作。

* * *

## 回答 #2

> 赞同：248
> 
> 时间：2014-03-06T14:48:00.190

打开项目文件夹并删除**{Project}.csproj.user**，然后在 Visual Studio 上重新加载项目。

* * *

## 回答 #3

> 赞同：87
> 
> 时间：2012-06-04T22:53:43.903

发生这种情况时，最简单的解决方案是手动创建虚拟目录。

首先，您需要确保安装了正确版本的 ASP.Net 并安装了 IIS 扩展。

为此，请转到 C:\(Windows)\Microsoft.NET\Framework\(dotnetver)\ 中相关 .net 版本的文件夹（将括号中的文件夹替换为 PC 上的正确文件夹）并运行此命令

```
aspnet_regiis.exe -i 
```

下一次运行并完成，有时运行

```
iisreset 
```

从命令行帮助，有时你不需要。

接下来，转到您的 IIS 管理器并找到您的 localhost 网站并选择添加文件夹。浏览到项目中包含实际 ASP.Net 项目的文件夹并添加它。

最后，右键单击您添加的文件夹，您应该有一个选项，上面写着“转换为应用程序”或“创建虚拟目录”或类似的东西。

**!!确保虚拟目录的名称为“MyWebApp”！！**

重新加载您的解决方案，它应该可以工作。

请小心；这不是一个编程问题（实际上不应该在此处发布），但我发布了此指南，因为这是一个常见问题，但我发布的建议是通用的；我列出的命令是正确的，但是您需要在 IIS 中执行的步骤可能会有所不同，这取决于您的版本和您的帐户权限。

祝你好运！

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2015-07-31T13:32:03.073

该解决方案对我有用：右键单击项目并选择编辑并找到以下代码，如下图所示。

> `change the <UseIIS>True</UseIIS> to <UseIIS>False</UseIIS>`

或者

> `change the <IISUrl>http://example.com/</IISUrl> to <IISUrl>http://localhost/</IISUrl>`

[![csproj 截图](../Images/c9df73279c1b73a76b1aa9c5313c80b3.png)](https://i.stack.imgur.com/rSEag.png)

* * *

## 回答 #5

> 赞同：36
> 
> 时间：2017-01-22T15:05:53.813

对于我的项目，我必须从 .csproj 文件中删除这两行

```
<ProjectGuid>{3AA499DF-4A65-43B7-8965-D08A4C811834}</ProjectGuid>
<ProjectTypeGuids>{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids> 
```

我尝试只删除第一个，但这还不够。

编辑：正如许多用户指出的那样，这可能会改变您的项目类型或弄乱您的源代码控制程序。我无法调查这些问题，因为这是我不再有的学校项目。尝试此操作时请小心。至少复制您删除的内容。

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2013-10-26T19:20:55.253

编辑 .csproj 或 vbproj 文件。查找并替换这些条目

```
<UseIIS>true</UseIIS> by <UseIIS>false</UseIIS>
<UseIISExpress>true</UseIISExpress> by <UseIISExpress>false</UseIISExpress> 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2012-11-14T15:06:18.963

就我而言，这个问题是由损坏的 IIS 绑定引起的。具体来说，我的“http”绑定已被删除。重新创建它解决了这个问题。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2020-12-08T20:43:51.040

**原因**：项目设置中没有正确反映`IISURL`内部，并且没有创建。`project.csproj``virtual directory`

**解决方案**：将 更改`Project URL`为更正`PORT`并创建`Virtual Directory`以使缺少的`PORT`可用。

**请按照以下步骤操作**：

**步骤1**：右键单击项目文件到`Edit the project.csproj`文件。 [![在此处输入图像描述](../Images/e275b0541e5413405b18ed9621e61436.png)](https://i.stack.imgur.com/rF42x.png)

**第 2 步**：搜索`IIS`并修改 from`<UseIIS>True</UseIIS>`到`<UseIIS>False</UseIIS>` [![在此处输入图像描述](../Images/f2679dfc79f27aa4f7e6a7696bbec8db.png)](https://i.stack.imgur.com/e9zDK.png)

**第 3 步**：右键单击 Project to `Reload the Project`。重新加载成功后，右键单击项目并选择**`Properties`**。 [![在此处输入图像描述](../Images/111a7833aeffa3199bfae83049ec3404.png)](https://i.stack.imgur.com/N6tKg.png)

**第 4 步：在****Properties** => **Web**下找到**Project URL**选项 ****[![在此处输入图像描述](../Images/14921c47132b5d11db08a665e54841f8.png)](https://i.stack.imgur.com/3RMS4.png)****

 ******第 5 步**：将**项目 URL**更改为**错误消息**和源文件中指示的**IIS URL 。**然后单击**创建虚拟目录**。**保存全部******`<IISURL>http://localhost:8086 </IISURL>`**`project.csproj` ****[![在此处输入图像描述](../Images/0e2028b580b03f1d4734ba65728495b8.png)](https://i.stack.imgur.com/ncfBY.png) [![在此处输入图像描述](../Images/047dbb685ccdb12480ea3d4aa334b3df.png)](https://i.stack.imgur.com/ITLyK.png)******

 ********第 6 步**：重做**第 2 步**，以免影响远程代码库和服务器部署设置。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2016-12-20T10:09:45.020

这对我有用：-
**让你所有的 IIS 网站只指向 localhost(All Unassigned)**

[![在此处输入图像描述](../Images/2743e0bdfde23cbfb85918b93c8b8ba5.png)](https://i.stack.imgur.com/sMME0.png)

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2014-03-06T03:58:38.743

尝试使用管理员权限打开 Visual Studio。就我而言，它允许访问 IIS 站点并使此错误消失。然后我可以将项目切换为使用似乎不需要管理员权限的 IIS Express。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2017-04-13T03:18:10.917

如果您通过 TFS 连接，请打开您的 project.csproj.user 文件并检查

```
<UseIISExpress>false</UseIISExpress> 
```

并将其更改为 true。

```
<UseIISExpress>true</UseIISExpress> 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2016-10-25T08:38:42.863

你不会相信， `start`Visual Studio 作为**管理员**

从消息中显而易见

> 找不到Web 服务器“ [http://localhost/MyWebApp ”。](http://localhost/MyWebApp)

找不到，因为可能`it has no privileges to see it`

所以只需`restart`将视觉工作室作为**管理员**

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2016-09-06T10:27:13.387

您可以在不将属性 UseIIS 的值设置为 true 的情况下加载项目。只需按照以下步骤操作：

在 mywebproject.csproj 文件中——

删除标签 <IISUrl> [http://localhost/MyWebApp/](http://localhost/MyWebApp/) </IISUrl> 并保存文件。应用程序将自动为其分配默认端口。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2015-03-30T15:44:55.063

就我而言，我想从 http 切换到 https，所以我从 IIS 中删除了 http。在我的 .csproj.user 文件中发现我仍然有：

```
<IISUrl>http://localhost/</IISUrl> 
```

所以我把它改成：

```
<IISUrl>https://localhost/</IISUrl> 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2013-12-23T19:49:41.260

对于那里的 Win8 用户，如果您按照已接受答案中的步骤操作，控制台会向您吐出一条消息，说“您不应使用命令行来执行此命令”（释义）。相反，通过控制面板（或 Windows + R > appwiz.cpl）访问程序和功能，单击“打开或关闭 Windows 功能”，并确保您已安装以下内容：

```
Internet Information Services
  > World Wide Web Services
    > Application Development Features
      > ASP.NET 4.5 
```

这还将检查许多其他选项。一旦我安装了这些功能，并以提升的权限运行 VS2012，我就能够成功启动我的应用程序。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2012-12-13T12:27:05.277

就我而言，我只需运行以下命令就可以在离线模式下打开解决方案：

```
iisreset 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2016-06-13T11:24:35.220

当我尝试从 .csproj 文件打开项目时，会发生这种情况，但我通过从 VS 打开项目来克服它：

**文件> 打开> 网站**

并选择包含我的项目的目录。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2013-10-09T09:14:58.037

我也有这个错误。我认为一切都设置正确，但我发现缺少一件事：*我用于项目的主机名（还）无法解析。*

由于我的应用程序根据主机名确定当前客户端的名称，因此我使用了用于开发的主机名`clientname.mysuperapp.local`。当我将开发主机名添加到我的`hosts`文件中时，该项目又可以加载了。显然，无论如何我都必须这样做，但我没有想到 VS 在加载项目之前会检查主机名。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2014-03-27T15:33:16.740

检查是否安装了 IIS Express。如果缺少 IIS Express，Visual Studio 可能会放弃该设置`<UseIISExpress>false</UseIISExpress>`并仍然查找该 express。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2014-06-05T23:45:08.280

就我而言，请确保您有一个“默认”网站

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2016-12-06T06:38:41.883

在我的例子中，IIS 中的“默认网站”在端口 80 上没有 localhost 的绑定。无论 .csproj 文件中的值是什么，您都应该有一个绑定。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2021-07-12T09:26:26.517

原来我的 IIS 正在 localhost:8181 上工作。必须配置 {Project}.csproj 文件。

```
 <ProjectExtensions>
    <VisualStudio>
      <FlavorProperties GUID="{349c5851-65df-11da-9384-00065b846f21}">
        <WebProjectProperties>
          <UseIIS>True</UseIIS>
          <AutoAssignPort>True</AutoAssignPort>
          <DevelopmentServerPort>7386</DevelopmentServerPort>
          <DevelopmentServerVPath>/</DevelopmentServerVPath>
          <IISUrl>**http://localhost:8181/ProjectName**</IISUrl>
          <NTLMAuthentication>False</NTLMAuthentication>
          <UseCustomServer>False</UseCustomServer>
          <CustomServerUrl>
          </CustomServerUrl>
          <SaveServerSettingsInUserFile>False</SaveServerSettingsInUserFile><EnableWcfTestClientForSVCDefaultValue>True</EnableWcfTestClientForSVCDefaultValue>
        </WebProjectProperties>
      </FlavorProperties>
    </VisualStudio>
  </ProjectExtensions> 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2017-09-14T03:25:18.583

我通过从以下链接下载后重新安装 IIS Express 来解决此问题：

[https://www.microsoft.com/en-us/download/confirmation.aspx?id=48264](https://www.microsoft.com/en-us/download/confirmation.aspx?id=48264)

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2014-11-27T12:02:22.893

就我而言，*csproj*文件中引用的 url 不正确。

它需要以*www 为前缀。*

我进行了更改，保存了文件并且项目加载正常。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2016-08-22T15:22:56.847

对于 DNN 用户，我的问题是我需要在 80 端口绑定 dnndev.me。我有多个在不同端口上运行的安装，并且 VS 要求该特定 Url 存在于端口 80（而不是像我的 86 那样）。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2016-03-29T16:58:35.870

`<ProjectTypeGuids>`当.csproj 文件中的元素包含单元测试项目 GUID:时，我遇到了这个问题`{3AC096D0-A1C2-E12C-1390-A8335801FDAB}`。

删除它使项目加载没有问题。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2020-11-15T13:13:15.560

这可能对 2020 年的一些人有所帮助。主要问题是 CSPROJ 文件中的 IIS 设置与机器的配置不匹配。例如，如果您的 Web 应用程序项目指向 localhost:12345，并且未在该端口上的计算机上设置虚拟目录，您将收到此错误。

使用 VS2019，我遇到了同样的问题，并且 CSProj 文件中的 IIS 设置被忽略了。原因是 CSProj 文件中有一个名为“SaveServerSettingsInUserFile”的新属性：

```
<ProjectExtensions>
    <VisualStudio>
      <FlavorProperties GUID="{349c5851-65df-11da-9384-00065b846f21}">
        <WebProjectProperties>
          <SaveServerSettingsInUserFile>True</SaveServerSettingsInUserFile>
        </WebProjectProperties>
      </FlavorProperties>
      <UserProperties UseAjaxifiedTemplates="True" UseJQuerySupport="True" />
    </VisualStudio>
  </ProjectExtensions> 
```

当它设置为 TRUE 时，IIS/Web 服务器属性位于

.CSPROJ.User 相同项​​目名称的文件。

这允许项目的各个用户拥有自己的 IIS 设置，前提是该文件未检入源代码管理。

您可以使用 Visual Studio GUI 在“Web”下的项目属性中控制设置的存储位置，“将服务器设置应用于所有用户”

[![网络项目设置](../Images/8637ea1b9fe08e9c3b753b623977a1ec.png)](https://i.stack.imgur.com/d8xOW.png)

开启时，IIS 设置存储在 CSPROJ 中，关闭时，它们存储在 CSPROJ.User 中

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-06-23T03:04:12.093

一步一步地按照这个完成的解决方案。它在 VS 2017 中对我有用。

1.  在管理员模式下打开命令提示符

2.  打开文件资源管理器并进入 .NET Framework 文件夹

    ```
     Eg:C:\Windows\Microsoft.NET\Framework\v4.0.30319 
    ```

    **v4.0.30319**这是我的 .NET 文件夹。你想选择你的相关文件夹。

3.  在 CMD 中 - 转到 .NET 文件夹路径

    ```
    cd C:\Windows\Microsoft.NET\Framework\v4.0.30319 
    ```

4.  在 CMD 中执行以下命令

    ```
    aspnet_regiis.exe -i 
    ```

    您终于可以看到这条消息 -**完成安装 ASP.NET (4.0.30319.0)**

    ```
    iisreset 
    ```

    终于可以看到这条信息了——**互联网服务成功重启**

5.  在您的计算机中打开 IIS（如果没有配置，请[按照此](https://www.dnnsoftware.com/docs/administrators/setup/set-up-iis.html)操作）

    1.  转到站点并右键单击

    2.  添加网站

    3.  填写 -**站点名称**并选择**物理路径**

    4.  然后输入端口号（您可以在 .csproj 文件中找到端口号，并且端口号必须等于 (IISUrl)

    ```
    EG : <IISUrl>http://localhost:15724/</IISUrl> my port is 15724 
    ```

    **注意**：您不能创建端口**80**号码。因为它使用了**默认的 IIS 页面**

    5.  点击确定
6.  **以管理员**权限打开 Visual Studio

7.  然后右键单击并**重新加载**您的项目

您的问题可能会得到解决。**********

# java - 异步套接字客户端

> ID：10889424
> 
> 赞同：-2
> 
> 时间：2012-06-04T22:44:22.330
> 
> 标签：java, android, sockets, asynchronous

我正在开发一个基于线程的异步套接字客户端。当程序调用`readLine()`时，它会无限期地阻塞并且永远不会返回。

```
public class ADNClient {

  Socket socket = null;
  DataOutputStream dataOutputStream = null;
  DataInputStream dataInputStream = null;

  Thread listener = new Thread(new Runnable() {
    @Override
    public void run() {
      String line;
      try {
        // Stop here and doesn't progress
        while ((line = dataInputStream.readLine()) != null) {
          //DO something
        }
      } 
      catch (IOException e) {}
    });

    public ADNClient() {
    try {
      socket = new Socket("192.168.1.5", 5000);
      dataOutputStream = new DataOutputStream(socket.getOutputStream());
      dataInputStream = new DataInputStream(socket.getInputStream());
      listener.start();
      //sender.start();
    } catch (Exception e) {
      Log.e("ADN", e.getMessage());
    }
  }

  public void close() {
    listener.stop();
    try {
      socket.close();
    } catch (IOException e) {
      Log.e("ADN", e.getMessage());
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T10:29:34.880

好的...我是输入/输出流的菜鸟...我没有发送换行符，接收信息的正确方法是使用

```
readUTF() 
```

代替

```
readLine() 
```

谢谢格雷格·科普夫！

# java - 如果您的输入文件包含一些不受支持的字符会怎样？

> ID：10889426
> 
> 赞同：-1
> 
> 时间：2012-06-04T22:44:34.737
> 
> 标签：java, character-encoding, latin1

我有这个文本文件，它可能在 Latin1 字符集中包含一些不受支持的字符，这是我的 JVM 的默认字符集。

当我的 java 程序尝试从文件中读取时，这些字符会变成什么？具体来说，假设我在文件中有一个 2 字节长的字符，它是否会被读取为一个字节字符（因为 Latin1 中的每个字符只有 1 字节长）？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T23:02:24.777

> 我不能使用 InputStreaReader 选项，因为必须使用 Latin1 读取文件。

和

> 我有这个文本文件，其中可能包含 Latin1 字符集中一些不受支持的字符...

你在这里有矛盾的要求。

该文件要么是 LATIN-1（并且没有“不支持的字符”），要么不是 LATIN-1。如果它不是 LATIN-1，您应该尝试找出它真正的字符集/编码，并使用那个而不是 LATIN-1 来读取文件。

正如其他答案/评论所解释的那样，您可以更改 JVM 的默认字符集，也可以在打开`Reader`.

> 我无法设置 JVM 的默认字符集。

请解释您正在尝试什么以及遇到什么问题。

> （而且有点害怕搞砸！）

懦夫！:-)

* * *

FWIW - 如果您尝试读取（例如）LATIN-1 中的数据流，而数据流实际上不在 LATIN-1 中，那么您可以预期以下内容：

*   在 LATIN-1 和实际字符集中编码相同的字符将被完好无损地传递。
*   编码不同的字符将被替换为表示“未知字符”（例如问号）的字符，或者会出现乱码。发生哪种情况取决于该字节或字节序列是否编码有效（但错误）字符，或者根本没有字符。

最终结果将是部分乱码文本。乱码可能是可逆的，也可能不是可逆的，具体取决于真正的字符集和字符是什么。但最好避免“去那里”……首先使用 RIGHT 字符集进行解码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T22:48:17.717

首先，您可以指定读取文件时要使用的字符集。参见例如：[java.io.InputStreamReader](http://docs.oracle.com/javase/7/docs/api/java/io/InputStreamReader.html)

第二。是的，如果使用 1 字节字符集读取，则每个字节将用于映射到一个字符。

第三：测试它，你将毫无疑问地看到实际发生了什么！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T02:45:42.560

如果您不知道字符集，您将不得不猜测它。这是棘手且容易出错的。

这是一个关于这个问题的问题： [如何检测文本文件的编码/代码页](https://stackoverflow.com/questions/90838/how-can-i-detect-the-encoding-codepage-of-a-text-file)

看看如何欺骗记事本猜错。

# c - fwrite 和 fgets 处理有问题

> ID：10889430
> 
> 赞同：0
> 
> 时间：2012-06-04T22:45:01.453
> 
> 标签：c

```
 char string[50], s[50];
 File *f = tmpfile();
 count = 1;

 while (fgets(string, 50, stdin)) {
    if (string[0] == '!') {
        rewind(f);
    } else {
        fwrite(string, 50, 1, f);
    }

    if (strcmp("history\n", string) == 0) {
        rewind(f);
        while(fgets(s, 50, f)) {
            printf("\t%d  %s", count, s);
            count++;
        }
        count = 1;
    }
 } 
```

这段代码的上下文不是很重要。问题是假设`fgets`接受“ls”、“date”和“history”。结果输出是：

```
1  ls
2   3  te
4   5  ory
6 
```

它应该是：

```
1  ls
2  date
3  history 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T13:00:20.783

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

看起来你的缓冲区中有一些 '\r's。你可能应该只 fwrite strlen(string) 个字节。——丹尼尔·费舍尔

# android - TextView 和 RelativeLayout onMeasure 调用了很多

> ID：10889431
> 
> 赞同：2
> 
> 时间：2012-06-04T22:45:02.080
> 
> 标签：android, android-layout, android-widget

我正在使用 traceview 尝试优化我的代码。我注意到 TextView.onMeasure() 和 RelativeLayout.onMeasure() 被调用了很多，我试图看看是否有任何方法可以优化它。在我的 ListAdapter 中，我已经在使用 ViewHolders，检查 currentView 是否为空，正如各种 googletalks/Romain Guy 所建议的那样。[这是我在 traceview 中昂贵的功能的屏幕截图。](http://i.imgur.com/YlMJK.png)

下面是我在列表中的布局的代码，以证明它并不复杂。

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="178dp"
    android:background="@color/Transparent"
    android:clickable="true" >
    <RelativeLayout
        android:id="@+id/Holder"
        android:layout_width="147dp"
        android:layout_height="178dp"
        android:layout_centerInParent="true"
        android:background="@color/Transparent" >
        <ImageView 
            android:id="@+id/userIcon"
            android:layout_width="141dp"
            android:layout_height="141dp"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="1dp"
            android:background="@color/Transparent" />
        <RelativeLayout
            android:id="@+id/userInfoSection"
            android:layout_width="143dp"
            android:layout_height="35dp"
            android:layout_below="@id/userIcon"
            android:layout_centerHorizontal="true"
            android:background="@color/Black" >
            <Button
                android:id="@+id/MenuButton"
                android:layout_width="31dp"
                android:layout_height="25dp"
                android:layout_alignParentRight="true"
                android:scaleType="fitCenter"
                android:src="@drawable/btn_menu" />
            <TextView
                android:id="@+id/Name"
                android:layout_width="100dp"
                android:layout_height="17dp"
                android:layout_alignParentTop="true"
                android:layout_alignParentLeft="true"
                android:layout_marginLeft="3dp"
                android:layout_toLeftOf="@id/MenuButton"
                android:singleLine="true"
                android:ellipsize="end"/>
            <TextView
                android:id="@+id/Age"
                android:layout_width="39dp"
                android:layout_height="14dp"
                android:layout_below="@id/Name"
                android:layout_marginRight="20dp"
                android:layout_toLeftOf="@id/MenuButton"
                android:singleLine="true"
                android:ellipsize="end"
                style="@style/Text.Default" />
            <TextView
                android:id="@+id/Location"
                android:layout_width="30dp"
                android:layout_height="14dp"
                android:layout_below="@id/Name"
                android:layout_alignParentLeft="true"
                android:layout_marginLeft="3dp"
                android:layout_toLeftOf="@id/Price"
                android:singleLine="true"
                android:ellipsize="end"
                style="@style/Text.Default" />
        </RelativeLayout>
    </RelativeLayout>
    <ImageView
        android:id="@+id/loading_indicator"
        android:contentDescription="@string/imageView_caption_loading"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="115dp"
        android:layout_marginTop="5dp"
        android:src="@drawable/loading_indicator"
        android:visibility="gone" />
</RelativeLayout> 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T09:58:07.643

尝试使用线性布局或框架布局，它们比相对布局更有效。同时，我也对 TextView 感到疑惑

# lvm - LVM2：无法 pvcreate 块设备

> ID：10889433
> 
> 赞同：8
> 
> 时间：2012-06-04T22:45:14.217
> 
> 标签：lvm

我正在尝试利用 linux (Centos6.0) 中的*LVM2*功能。在尝试在特定块设备上定义 PV 的第一步时，我收到以下错误消息：

```
[root@localhost /] pvcreate /dev/sdb 
```

**无法独占打开 /dev/sdb。挂载的文件系统？**

*/dev/sdb*未挂载，其分区表已删除。我还应该提到*/dev/sdb*曾经代表一个更大的块设备（大约 4 倍大），并且通过硬件 raid 的配置而减少（我在 raid 控制器中将 hd 拆分为 4 个）。

有没有人曾经遇到过这个错误并且知道如何从这里得到它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-13T19:24:26.303

Maybe device-mapper is 'stealing' this device. Try this:

```
[root@host ~]# dmsetup ls
sdb     (253, 2)
VolGroup00-LogVol01     (253, 1)
VolGroup00-LogVol00     (253, 0) 
```

If you find sdb device listed as above example, remove it using dmsetup and create the physical volume:

```
[root@host ~]# dmsetup remove sdb

[root@host ~]# pvcreate /dev/sdb
Physical volume "/dev/sdb" successfully created 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T04:55:16.450

`[root@localhost /]` `pvcreate -vvvvv /dev/sdb`

可以输出更多细节。您可以使用*lsof -L*检查块设备是否被其他进程打开。

# sql - VB 表单和 MS Access SQL 通配符搜索

> ID：10889435
> 
> 赞同：2
> 
> 时间：2012-06-04T22:45:23.170
> 
> 标签：sql, vba, wildcard, ms-access-2010

我的表**table1**有 3 个字段：**`FName`**, **`LName`**, **`Phone`**. 我正在使用 Microsoft Access 2010 运行 SQL 查询。有些行有空/空电话值。

我有一个接受搜索参数的 VB 表单。用户可以输入**`(FName and LName)`**或**`(Phone)`**，但不能同时输入两者。

当我尝试：

`SELECT table1.LName, table1.FName, table1.Phone FROM table1 WHERE table1.LName Like ('*' & Forms!frmSearchMain!LName & '*') AND table1.FName Like ('*' & Forms!frmSearchMain!FName & '*') ORDER BY table1.LName, table1.FName;`

它给了我一个匹配给定 (`FName`和`LName`) 参数的用户列表。它工作正常。

同样，当我尝试：

`SELECT table1.LName, table1.FName, table1.Phone FROM table1 WHERE table1.Phone Like ('*' & Forms!frmSearchMain!Phone & '*') ORDER BY table1.LName, table1.FName;`

它给了我一个匹配给定 ( `Phone`) 参数的用户列表。它也很好用。

但是，当我结合这两个查询时：

`SELECT table1.LName, table1.FName, table1.Phone FROM table1 WHERE table1.Phone Like ('*' & Forms!frmSearchMain!Phone & '*') AND table1.LName Like ('*' & Forms!frmSearchMain!LName & '*') AND table1.FName Like ('*' & Forms!frmSearchMain!FName & '*') ORDER BY table1.LName, table1.FName;`

它没有给我预期的结果。

我什至尝试`OR`了 (`FName`和`LName`) 和 ( `Phone`) 搜索参数之间的条件。它不起作用。我已经尝试`nz(frmSearchMain!Phone,"")`了所有搜索参数，`%`而不是`*`，但到目前为止还没有运气。

我是 MS Access SQL 查询格式的新手。我在 MySQL 中多次使用这种类型的查询。但我无法从这个中得到预期的结果。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T23:14:50.230

在您的示例中，此查询给出匹配所有 3 个条件的记录的结果：

```
SELECT table1.LName, table1.FName, table1.Phone FROM table1 WHERE table1.Phone Like ('*' & Forms!frmSearchMain!Phone & '*') AND table1.LName Like ('*' & Forms!frmSearchMain!LName & '*') AND table1.FName Like ('*' & Forms!frmSearchMain!FName & '*') ORDER BY table1.LName, table1.FName; 
```

如果您想返回匹配 (Phone) OR (FName AND LName) 的记录，您必须这样做：

```
SELECT table1.LName, table1.FName, table1.Phone FROM table1
WHERE  (table1.Phone Like ('*' & Forms!frmSearchMain!Phone & '*'))
OR (table1.LName Like ('*' & Forms!frmSearchMain!LName & '*') AND table1.FName Like ('*' & Forms!frmSearchMain!FName & '*'))
ORDER BY table1.LName, table1.FName; 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:18:13.787

```
sql = "SELECT LName, FName, Phone" & _
      "FROM table1" & _
      "WHERE (" & _
      "Phone LIKE ('%" & Forms!frmSearchMain!Phone & "%' )" & _
      "OR ( FName LIKE ('%" & Forms!frmSearchMain!FName & "%' )" & _
            "AND LName LIKE ('%" & Forms!frmSearchMain!LName & "%' ) )" & _
      "ORDER BY LName, FName" 
```

运行该查询应返回具有正确名字和姓氏或正确电话（或两者）的所有 LName、FName、Phone。

注意：解释一下，老实说，我不知道如何正确连接那些多行 VBA 字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T18:55:37.597

我认为如果我们简化它应该更容易解决这个问题。所以我武断地决定暂时忽略`LName`，只根据`FName`or进行搜索`Phone`。

在我的版本中`frmSearchMain`，我将保存搜索目标值的文本框命名为`FName`as，`txtSearchFName`因为我更喜欢以不同于记录源字段的方式命名控件。同样，我选择`txtSearchPhone`了`Phone`搜索目标文本框。

由于我已经有一个名为 的表`Table1`，所以我`tblKeerthiram`改为调用我的表。

通过这些更改，此查询为我提供了匹配`txtSearchFName`或的行`txtSearchPhone`。如果两者`txtSearchFName`都`txtSearchPhone`为空，则查询将返回表中的所有行......这就是我希望你想要的。

```
SELECT
    t1.id,
    t1.FName,
    t1.Phone
FROM tblKeerthiram AS t1
WHERE
           (t1.FName Like "*"
               & [Forms]![frmSearchMain]![txtSearchFName]
               & "*"
        OR [Forms]![frmSearchMain]![txtSearchFName] Is Null)
    AND
           (t1.Phone Like "*"
               & [Forms]![frmSearchMain]![txtSearchPhone]
               & "*"
        OR [Forms]![frmSearchMain]![txtSearchPhone] Is Null)
ORDER BY t1.FName; 
```

这种方法的结果是，如果两者`txtSearchFName`和`txtSearchPhone`都是非空的，则查询将只返回与两者都匹配的行。据我了解您的描述，这不是您想要的。您只想搜索一个或另一个，而不是同时搜索。

在这种情况下，我建议您使用两个搜索文本框的更新后事件来设置另一个 Null，当其中一个输入非 Null 值时。我不确定那句话有多清晰，所以只需将此代码添加到表单的模块中即可。它将确保两个文本框中只有一个包含非 Null 值。

```
Option Compare Database
Option Explicit

Private Sub txtSearchFName_AfterUpdate()
    If Not IsNull(Me.txtSearchFName) Then
        Me.txtSearchPhone = Null
    End If
End Sub

Private Sub txtSearchPhone_AfterUpdate()
    If Not IsNull(Me.txtSearchPhone) Then
        Me.txtSearchFName = Null
    End If
End Sub 
```

最后，如果一切正常，那么你只需要修改它来处理`LName`. 希望这部分不会太令人生畏。祝你好运。

# git - 如何安全地更改 github 帐户名？

> ID：10889436
> 
> 赞同：19
> 
> 时间：2012-06-04T22:45:23.763
> 
> 标签：git, github, rename, account

我想更改我的 github 帐户名称，我在**GitHub**帐户设置中找到了一个选项。

但是，考虑到我自己的一些项目与此帐户相关联，我担心后果并想知道更改名称的最佳策略是什么。

**到目前为止，我想出了这个计划：**

1.  **在 GitHub 设置中更改帐户名称**
2.  **对于“.git / config”文件中每个项目的本地文件夹，将*远程“origin”* url 更新为新的**

这行得通吗？保存项目源的计算机上是否应该有任何进一步的步骤？更改名称会对那些在 GitHub 上克隆或分叉我的项目的人产生什么影响？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-10T07:44:00.503

1.) 您必须更改所有项目的远程地址。您可以通过以下方式查看它们：

```
git remote -v 
```

之后删除旧的远程地址：

```
git remote rm git@github.com:old_account/foo.git 
```

最后添加您的新远程地址：

```
git remote add origin git@github.com:new_account/foo.git 
```

2.) 你所有克隆的 repos 都会**中断**。没有 URL 重定向或类似的东西。您可以更改本地克隆的存储库，但其他人必须指向新的存储库地址（如步骤 1）

注意：Github forked repos 可以正常工作。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-11-03T23:00:20.787

GitHub 最近更改了他们的用户名重命名系统，现在为您设置了重定向。

从[我更改用户名时会发生什么？](https://help.github.com/articles/what-happens-when-i-change-my-username)在 GitHub 帮助上：

> 在 GitHub 方面，一切都会表现得好像你的新用户名一直是你的名字。您的所有存储库现在都将属于该新名称，并且旧用户名基本上将不再存在。启动更改后，这可能需要几分钟才能完成。
> 
> 指向您之前的个人资料页面的链接，例如 [https://github.com/previoususername](https://github.com/previoususername)，会返回 404 错误。对于@mentions 等引用，我们无法设置从旧用户名到新用户名的重定向。
> 
> 但是，为您的所有存储库设置了重定向。对旧位置的 web 和 git 访问继续起作用，并重定向到新用户名。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-10T11:11:01.570

我在 ~/bin 中留下了一个名为 git-remote 的脚本，其中包含以下内容：

```
 #!/bin/sh
old=richoH
new=richo
git remote -v | grep $old | while read name url type; do
    newurl=`echo $url | sed -e "s/$old/$new/"`
    git remote set-url $name $newurl
done 
```

这有点像黑客，但它工作得很好，只需 cd 进入 git repo 并调用`git reremote`（在确保它在你的`$PATH`并且你已经修复了旧变量和新变量之后。

# c - 这足以检测竞争条件吗？

> ID：10889444
> 
> 赞同：1
> 
> 时间：2012-06-04T22:45:45.243
> 
> 标签：c, linux, gcc

假设我有一个多线程应用程序并使用**相同的输入**运行它。检测每个负载和存储是否足以检测写入和写入数据竞争？我的意思是从记录的加载和存储地址中，如果我们可以看到哪个线程执行了哪个加载以及哪个线程执行了哪个存储，我们可以通过注意重叠的地址来检测写入-读取和写入-写入数据竞争。还是我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T00:31:25.930

> 还是我错过了什么？

你错过了很多*。*正如 Pubby 所说，如果您看到 read，然后在 T1 中写入，然后在 T2 中读取，然后再写入，您就不能说*没有*种族。您需要了解所涉及的锁。

您可能想要使用一种工具，例如 Google 的[ThreadSanitizer](http://code.google.com/p/data-race-test/wiki/ThreadSanitizer)。

更新：

> 但我的方法会涵盖所有比赛还是至少部分比赛？

您在此处和其他答案上的评论似乎表明您不了解比赛是什么。

你的方法*可能会*暴露*一些*种族，是的。保证*不会*覆盖其中的大部分（这将使练习徒劳无功）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T10:49:06.643

这是一个来自维基百科的简单示例，我稍作修改：

> 作为一个简单的例子，让我们假设两个线程 T1 和 T2 每个都想对全局整数的值执行加一的算术运算。理想情况下，会发生以下操作序列：
> 
> 1.  整数 i = 0; （记忆）
> 2.  T1 将 i 的值从内存中读入 register1: 0
> 3.  T1 增加寄存器 1 中 i 的值：（寄存器 1 内容）+ 1 = 1
> 4.  T1 将寄存器 1 的值存储在内存中：1
> 5.  T2 将 i 的值从内存中读入 register2: 1
> 6.  T2 乘以寄存器 2 中 i 的值：（寄存器 2 内容）* 2 = 2
> 7.  T2 将寄存器 2 的值存储在内存中：2
> 8.  整数 i = 2; （记忆）
> 
> 在上面显示的情况下，i 的最终值为 2，正如预期的那样。但是，如果两个线程同时运行而没有锁定或同步，则操作的结果可能是错误的。下面的替代操作序列演示了这种情况：
> 
> 1.  整数 i = 0; （记忆）
> 2.  T1 将 i 的值从内存中读入 register1: 0
> 3.  T2 将 i 的值从内存中读入 register2: 0
> 4.  T1 增加寄存器 1 中 i 的值：（寄存器 1 内容）+ 1 = 1
> 5.  T2 乘以寄存器 2 中 i 的值：（寄存器 2 内容）* 2 = 0
> 6.  T1 将寄存器 1 的值存储在内存中：1
> 7.  T2 将寄存器 2 的值存储在内存中：0
> 8.  整数 i = 0; （记忆）
> 
> i 的最终值是 0，而不是预期的结果 2。这是因为第二种情况的递增操作不是互斥的。互斥操作是在访问某些资源（例如内存位置）时不能中断的操作。在第一种情况下，T1 在访问变量 i 时没有被中断，所以它的操作是互斥的。

所有这些操作都是原子的。出现竞争条件是因为这个特定的顺序与第一个顺序不具有相同的语义。你如何证明语义与第一个不同？好吧，您知道在这种情况下它们是不同的，但是您需要证明每个可能的顺序以确定您没有竞争条件。这是一件非常困难的事情，并且具有巨大的复杂性（可能是 NP-hard 或需要 AI-complete），因此无法可靠地检查。

如果某个订单永远不会停止会发生什么？你怎么知道它一开始就永远不会停止？你基本上只剩下解决停机问题了，这是一项不可能完成的任务。

如果您正在谈论使用连续读取或写入来确定比赛，请注意以下事项：

> 1.  整数 i = 0; （记忆）
> 2.  T2 将 i 的值从内存中读入 register2: 0
> 3.  T2 乘以寄存器 2 中 i 的值：（寄存器 2 内容）* 2 = 0
> 4.  T2 将寄存器 2 的值存储在内存中：0
> 5.  T1 将 i 的值从内存中读入 register1: 0
> 6.  T1 增加寄存器 1 中 i 的值：（寄存器 1 内容）+ 1 = 1
> 7.  T1 将寄存器 1 的值存储在内存中：1
> 8.  整数 i = 1; （记忆）

这与第一个具有相同的读取/存储模式，但给出不同的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T07:52:40.350

您将学到的最明显的事情是有多个线程使用相同的内存。这本身并不一定是坏事。

好的用途包括通过信号量、原子访问和 RCU 或双缓冲等机制进行保护。

不良用途包括竞争条件、真假共享：

*   竞争条件主要源于排序问题 - 如果某个任务 A 在其执行结束时写入某些内容，而任务 B 在其开始时需要该值，则最好确保仅在 A 完成后读取 B。信号量、信号或类似的东西是一个很好的解决方案。或者当然在同一个线程中运行它。
*   真正的共享意味着两个或多个内核积极地读写同一个内存地址。这会减慢处理器的速度，因为它必须不断地将任何更改发送到其他内核的缓存（当然还有内存）。你的方法可以捕捉到这一点，但可能不会突出它。
*   虚假共享甚至比真实共享更复杂：处理器缓存不是在单个字节上工作，而是在“缓存行”上工作——它保存多个值。如果核心 A 一直在敲击一行的字节 0，而核心 B 一直在写入字节 4，则缓存更新仍将停止整个处理器。

# java - Maven：mvn --version java.lang.ClassNotFoundException

> ID：10889445
> 
> 赞同：2
> 
> 时间：2012-06-04T22:45:48.163
> 
> 标签：java, linux, maven, classnotfoundexception

我刚刚将新的 Maven 安装到我的新 Fedora 17 64 位。

细节：

java版本

```
java version "1.6.0_32"
Java(TM) SE Runtime Environment (build 1.6.0_32-b05)
Java HotSpot(TM) 64-Bit Server VM (build 20.7-b02, mixed mode) 
```

javac-版本

```
javac 1.6.0_32 
```

回声 $JAVA_HOME

```
/usr/java/jdk1.6.0_32 
```

回声 $JRE_HOME

```
/usr/java/jdk1.6.0_32/jre 
```

回声 $M2_HOME

```
/usr/local/maven/apache-maven-3.0.4 
```

回声 $M2

```
/usr/local/maven/apache-maven-3.0.4/bin 
```

回声 $PATH

```
/usr/local/maven/apache-maven-3.0.4/bin:/usr/local/bin:/usr/bin:/bin:/usr/games:/usr/local/sbin:/usr/sbin:/usr/java/jdk1.6.0_32/bin:/home/bujaka/.local/bin:/home/bujaka/bin 
```

哪个MVN

```
/usr/local/maven/apache-maven-3.0.4/bin/mvn 
```

但是 mvn -version 抛出 java.lang.ClassNotFoundException。

```
java.lang.ClassNotFoundException: org.apache.maven.cli.MavenCli
    at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(SelfFirstStrategy.java:50)
    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:244)
    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.getMainClass(Launcher.java:145)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:267)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)                                                    
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)                                          
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352) 
```

PS我从apache站点安装了maven（不是从fedora repos）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:36:09.123

谢谢`user1436170`，您的最后一条评论也为我完成了这项工作：

```
/lib catalog was empty in maven.tar.gz archive. 
```

通过 krusader 打开时，tar.gz 文件中的 lib 文件夹为空，但通过 ark 打开时包含 jars。

无论如何 zip 工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-01T21:54:25.327

我刚刚遇到了同样的问题。Bujaka 的评论和 Peter Butkovic 的回答解决了这个问题，但为了记录，这是我对它的看法和我使用的解决方案。

我不知道是什么原因造成的，但有时 maven 安装目录中 /lib 文件夹的全部内容可能会变空。当您收到此错误时，可能就是这种情况。

如果您检查您的 /lib 文件夹并发现它不是空的，那么仍然有可能（尽管不太可能）某个关键文件以某种方式被删除。

如果您的 maven 安装使用 find 并且最近才开始起作用，那么您使用的压缩存档可能没问题。这是做什么：

1.  重命名你的安装目录（或者如果你很勇敢，就删除它）。
2.  获取原始压缩存档。（如果你像我一样，它仍然在你日益混乱的下载文件夹中。如果不是，你将不得不重新下载它。）
3.  将所述存档解压缩到原始安装目录的位置（您可以重命名或删除）。

您的 Maven 安装现在应该可以再次工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T23:32:38.623

MavenCli 类在 maven-embedder 中。你在代理后面吗？

```
 <settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                      http://maven.apache.org/xsd/settings-1.0.0.xsd">
  ...
  <proxies>
    <proxy>
      <id>myproxy</id>
      <active>true</active>
      <protocol>http</protocol>
      <host>proxy.somewhere.com</host>
      <port>8080</port>
      <username>proxyuser</username>
      <password>somepassword</password>
      <nonProxyHosts>*.google.com|ibiblio.org</nonProxyHosts>
    </proxy>
  </proxies>
  ...
</settings> 
```

@See [Maven 代理设置](http://maven.apache.org/settings.html#Proxies)

# android - 从活动开始服务并等待它准备好

> ID：10889446
> 
> 赞同：2
> 
> 时间：2012-06-04T22:45:55.983
> 
> 标签：android, service, asynchronous, android-activity

我想从 Activity 启动服务。

首先，我使用 LocalBinder 进行了尝试。这可行，但服务绑定到活动。当活动消失时，我不想停止服务。我发现 LocalBinder 没有解决方案，所以我删除了它并尝试了这个：

在服务中使用单例实例在新线程中调用 startService 方法并等待实例可用：

```
final Intent recordService = new Intent(RecordActivity.this, RecordService.class);
    Runnable r = new Runnable() {
        @Override
        public void run() {
            startService(recordService);
        }
    };
    new Thread(r).start();

    Log.i(MMLF.T, "service instance: "+serviceInstance);
    final ProgressDialog mProgressDialog = ProgressDialog.show(
            RecordActivity.this, "Waiting", "wait until record service is loaded",
            true);
    while (serviceInstance == null) {
        serviceInstance = RecordService.get();
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            Log.e(MMLF.T, "could not sleep", e);
        }
    }
    mProgressDialog.dismiss(); 
```

但这也行不通。它卡在等待循环中。如果我删除这些等待的东西并且新`new Thread(r).start()`行是最后一行，则活动和服务开始正常。

如何独立于活动启动服务？我也让他们互相交流。活动应该调用两种方法（开始和停止记录）并且服务应该发送消息。第二个我可以使用 LocalBroadcast。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T01:06:24.077

您的问题有点令人困惑，因为服务已经独立于活动而存在。但是请注意，服务默认在主线程中运行。如果你想在不同的线程中运行服务（在这种情况下看起来就像你做的那样），你必须设置一个 Messenger 对象并在你的工作线程和你的 UI 线程之间发送消息。您还可以考虑使用 AIDL（无论如何，Messenger 都是在此之上构建的）。如果您不使用 Messenger，您的交流可能会使用意图。如果是这种情况，您应该查看[IntentService](http://developer.android.com/reference/android/app/IntentService.html)。但是，这仅在您向服务发送消息时*有效*，而不是来回发送。如果您想要来回通信，则必须使用某种 Messenger 或类似模式。

顺便说一句，将 IntentService 用于“停止”和“开始”之类的事情是很常见的。通常还有一个后台线程，它使用 Messenger 或类似的东西与 Service 通信，然后发送/接收消息以指示工作线程应该做什么。

您可能还会研究 AsyncTask，因为它使这种事情变得更加简单。

# android - 对多个对象使用通用类（actionBar 选项卡）

> ID：10889447
> 
> 赞同：6
> 
> 时间：2012-06-04T22:46:09.300
> 
> 标签：android, android-layout, tabs, android-actionbar, actionbarsherlock

目前，我使用 ABS、ActionBar 选项卡和 TabsAdapter/ViewPager 为我的应用程序制作一个不错的选项卡布局。我有 5 个以上的类别选项卡 - 最终用户也可以添加新类别（我稍后会设置）。所以，目前，我有一个`SherlockFragmentActivity`包含许多`SherlockFragment`类别文件的主目录。在主 SFA 的 onCreate 中，我构建了 actionBar 并添加了它的所有选项卡，如下所示：

```
mTabsAdapter.addTab(bar.newTab().setText(R.string.login),
            LoginFragment.class, null);
    mTabsAdapter.addTab(bar.newTab().setText("Geographics"),
            GeoFragment.class, null);
    mTabsAdapter.addTab(bar.newTab().setText(R.string.economics),
            EconFragment.class, null);
    mTabsAdapter.addTab(bar.newTab().setText(R.string.elections),
            ElectionsFragment.class, null); 
```

相反，我想做的是创建一个新的解决方案，`CategoryFragment`而不是使用所有特定的选举、地理、经济等。谁能想象一个解决方案？**理想情况下，我只想将一个字符串传递给添加的选项卡，以便 CategoryFragment 可以根据该字符串膨胀。**我想要这个解决方案，因为代码在多个类中非常冗余，当所有类真正做的是从 SQL dB 在线加载东西时，只获取其自己类别的数据。

这是我的 TabsAdapter 类：

```
public class TabsAdapter extends FragmentPagerAdapter
implements ActionBar.TabListener, ViewPager.OnPageChangeListener {
    private final Context mContext;
    private Polling activity;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    final class TabInfo {
        private final Class<?> clss;
        private final Bundle args;
        //private final String title;
                    //This string is implemented only as part of my attempt!

        TabInfo(Class<?> _class, Bundle _args, String _title) {
            clss = _class;
            args = _args;
            title = _title;
        }
    }
    /*Constructor method that adds a TabsAdapter to each tab that is created.
     * It also adds the ViewPager to each tab so that the user can swipe to change tabs.
     */
    public TabsAdapter(SherlockFragmentActivity activity, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        this.activity = (Polling) activity;
        mActionBar = activity.getSupportActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    /*This is the method I've been trying to use to solve the problem, but it's not really cutting it!*/

    public void buildTabs() throws ClassNotFoundException { 
        String [] tabs = {"Econ", "Elections", "Geo", "Politics", "Science", "Finance", "Religion", 
                "Military", "International" };
        final String resource = "R.string.";            
        mTabsAdapter.addTab(bar.newTab().setText("Login"),
                LoginFragment.class, null, "Login");
        for (int j = 0; j < tabs.length; j++) {
            String res = resource + tabs[j];
            String clas = tabs[j] + "Fragment";
            String total = "com.davekelley.polling." + clas;
        mTabsAdapter.addTab(bar.newTab().setText(tabs[j]),
                CategoryFragment.class, null, tabs[j]);
        }           
    }

    /*A fairly simple method that sets the TabInfo for each tab so that the TabsAdapter
     * knows which class the tab that is being added actually belonds to. It also updates
     * the UI interface when each tab is added. 
     */

    public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args, String title) {
        TabInfo info = new TabInfo(clss, args, title);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mActionBar.addTab(tab);
        notifyDataSetChanged();
    }   

    public int getCount() {
        return mTabs.size();
    }
    /*A method that is used in other classes to allow each tab Fragment to 
     * access its inherited methods from a mother-class, in this case, SherlockFragment
     */

    public int getPosition(SherlockFragment fragment) {
        for (int j = 1; j < mTabs.size(); j++) {
            TabInfo info = (TabInfo) mActionBar.getTabAt(j).getTag();
            if (info.title.matches(mTabs.get(j).title)) {
                return j;
            }
        }
        return -1;

    }
    public SherlockFragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return (SherlockFragment)Fragment.instantiate(mContext, info.clss.getName(), info.args);
    }
    /*This method reads the user's selection for a new tab and sets that tab as
     * the new current focus.*/
    public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);
        selectInSpinnerIfPresent(position, true);
    }

    private void selectInSpinnerIfPresent(int position, boolean animate) {
        try {
            View actionBarView = findViewById(R.id.abs__action_bar);
            if (actionBarView == null) {
                int id = getResources().getIdentifier("action_bar", "id", "android");
                actionBarView = findViewById(id);
            }

            Class<?> actionBarViewClass = actionBarView.getClass();
            Field mTabScrollViewField = actionBarViewClass.getDeclaredField("mTabScrollView");
            mTabScrollViewField.setAccessible(true);

            Object mTabScrollView = mTabScrollViewField.get(actionBarView);
            if (mTabScrollView == null) {
                return;
            }

            Field mTabSpinnerField = mTabScrollView.getClass().getDeclaredField("mTabSpinner");
            mTabSpinnerField.setAccessible(true);

            Object mTabSpinner = mTabSpinnerField.get(mTabScrollView);
            if (mTabSpinner == null) {
                return;
            }

            Method setSelectionMethod = mTabSpinner.getClass().getSuperclass().getDeclaredMethod("setSelection", Integer.TYPE, Boolean.TYPE);
            setSelectionMethod.invoke(mTabSpinner, position, animate);

        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        } catch (NoSuchFieldException e) {
            e.printStackTrace();
        } catch (NoSuchMethodException e) {
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            e.printStackTrace();
        }
    }

    public void onPageScrollStateChanged(int state) {}
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {}
    /* This is the method that actually draws the newest tab onto the screen when
     * it is selected.*/
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        mViewPager.setCurrentItem(tab.getPosition());

        sp = getSharedPreferences("prefs", MODE_PRIVATE);
        SharedPreferences.Editor preferencesEditor = sp.edit();
        preferencesEditor.putInt("lastPosition", mViewPager.getCurrentItem());
        preferencesEditor.commit();
    }
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {}
    public void onTabReselected(Tab tab, FragmentTransaction ft) {}
    public void onTabReselected(Tab tab, android.app.FragmentTransaction ft) {}
    public void onTabUnselected(Tab tab, android.app.FragmentTransaction ft) {}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T11:05:13.880

好吧，你想使用一个 Fragment 类，比如**BaseFragment**，而不是多个类；通过为这个新片段传递一个字符串（标识符）来做到这一点。您还可以在所有这些片段中运行一些代码，因此最好使用新方法。

但是，将标识符传递给此**BaseFragment**只会导致其代码混乱，您将不得不处理所有这些`if...else`，当它确实与此标识符相关并且您的代码实际上仍然相同，因为您必须移动代码将特定片段放入此 BaseFragment 中。因此，这种方法没有附加价值。您可以保留所有片段，并在添加选项卡时实际使用此“标识符”来选择要添加的正确片段。

* * *

至于在您的许多片段中运行的代码。这是一个非常基本的方法：

创建一个扩展 Fragment 的类 BaseFragment。（*我在这里很天真*）添加一个`common()`可以做这个常见事情的函数。最后让你所有的 Fragment 扩展这个 BaseFragment 而不是 Fragment。现在，您可以调用`common()`. （*同样，您可能需要`common1()`, `common2()`,`...`*）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T14:01:34.537

对于您的课程，您需要使用反射；仅有字符串名称是不够的；所以可能你将不得不写类似的东西：

```
String clas = tabs[j] + "Fragment";
String total = "com.davekelley.polling." + clas;
Class<?> theClass = Class.forName (total); 
```

对于资源，您不能简单地编写类似的东西`String res = "R.string" + tabs[j];`，您需要使用函数`getIdentifier()`；有关示例，请参见[动态资源加载 Android 。](https://stackoverflow.com/questions/3648942/dynamic-resource-loading-android)

# windows - 对名为 guid 的目录进行排序

> ID：10889449
> 
> 赞同：12
> 
> 时间：2012-06-04T22:46:34.893
> 
> 标签：windows, sorting, filenames, guid

因此，在 Windows 中，如果您有一堆由 GUID 命名的目录并且您按名称排序，它不会按字母顺序排序。我认为这适用于 7 和 vista。我也没有找到任何模式。Windows是否认为它们是别的东西？从编码的角度来看，我们有一些将资产存储在 GUID 文件夹中的遗留项目，如果不进行排序，可能很难快速验证数据。

一世

![在此处输入图像描述](../Images/235b5918eb915fdd4ca799cdc39baef2.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T23:39:46.240

Mark Ransom 似乎对 Windows 的排序方式是正确的。W7 似乎做自然排序。可以使用以下说明禁用此“功能”。然而，这是一个愚蠢的耻辱：您不能在 Windows 7 家庭高级版上进行这些编辑。

[http://www.alliancegroup.co.uk/windows7-explorer-sort-order.htm](http://www.alliancegroup.co.uk/windows7-explorer-sort-order.htm)

除非您可以尝试：

1) 在开始菜单的搜索框中键入 gpedit.msc，然后按 Enter。2) 导航到用户配置>管理模板>Windows 组件，然后在组策略编辑器的左栏中选择 Windows 资源管理器。3) 在组策略编辑器的设置部分禁用 Windows 资源管理器中的数字排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T22:53:19.880

它应用了所谓的“自然排序”——数字和字母序列被分开并分别排序。您的示例的第一部分是数字，因此排序：1、3、5、07、7、9、19、57、214 等，然后是以 alpha 开头的部分。

我不认为有什么办法可以改变它。

# apache2 - Apache2（HTTPD）位置标记是通配符匹配吗？

> ID：10889454
> 
> 赞同：4
> 
> 时间：2012-06-04T22:47:14.563
> 
> 标签：apache2, apache

好消息是我已经解决了我的问题，坏消息是我不明白这个问题！

```
URL: http://host:port/a/b 
```

httpd.conf

```
<Location /a>
 ProxyPass to Server....
</Location>

<Location /b>
 ProxyPass to some other Server
</Location> 
```

在此设置中，我的请求`http://.../a/b`将我带到“其他服务器”而不是预期的“服务器”

通过强制执行更多“正则表达式-y”行为并使用以表达式开头（又名：

```
<Location ~ "^/a">
 ProxyPass to Server....
</Location> 
```

如果我必须这样做，那很好。但是对于这种情况，文档似乎不太清楚。

文档来源：位置标签上的 Httpd 文档[http://httpd.apache.org/docs/2.0/mod/core.html#location](http://httpd.apache.org/docs/2.0/mod/core.html#location)似乎暗示以非正则表达式方式匹配位置（又名，不〜）确实不要使用通配符（这就是为什么他们有一节解释如何使用通配符和正则表达式）。最后的斜线讨论也不意味着它使用通配符。

所以，我只能假设我在我的 Apache 版本中发现了一些错误。或者我只是使用了太相似的 URL 结构并且无法理解 Apache 文档。帮助我，StackOverflow！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T16:36:51.827

如果您参考[Apache docs](https://httpd.apache.org/docs/2.2/mod/core.html#location)，它清楚地指出

> 也可以使用正则表达式，添加 ~ 字符。例如：
> 
> `<Location ~ "/(extra|special)/data">`
> 
> 将匹配包含子字符串 /extra/data 或 /special/data 的 URL。

# android - 更新后：“SQLiteException：无法打开数据库文件”

> ID：10889456
> 
> 赞同：1
> 
> 时间：2012-06-04T22:47:27.867
> 
> 标签：android

为什么应用程序更新到新版本后不存在 SQLite 数据库？即使数据库之前确实存在，它怎么可能不再存在。

（使用安卓 2.3.3）

**错误日志** 为什么 SQLiteOpenHelper.getWritableDatabase() 会导致此异常？当然，意识到“哦，数据库不存在，让我们创建它！

请注意，`new SQLiteOpenHelper(context)`据我所知，工作正常。但是，我不知道是否`onCreate()`被`onUpgrade()`触发。

```
06-04 18:21:01.706 D/AndroidRuntime( 1280): Shutting down VM
06-04 18:21:01.706 W/dalvikvm( 1280): threadid=1: thread exiting with uncaught exception (group=0x40015560)
06-04 18:21:01.745 E/AndroidRuntime( 1280): FATAL EXCEPTION: main
06-04 18:21:01.745 E/AndroidRuntime( 1280): java.lang.ExceptionInInitializerError
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at myapp.com.MyActivity.onCreate(MyActivity.java:131)
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at android.os.Looper.loop(Looper.java:130)
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at android.app.ActivityThread.main(ActivityThread.java:3683)
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at java.lang.reflect.Method.invokeNative(Native Method)
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at java.lang.reflect.Method.invoke(Method.java:507)
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at dalvik.system.NativeStart.main(Native Method)
06-04 18:21:01.745 E/AndroidRuntime( 1280): Caused by: android.database.sqlite.SQLiteException: unable to open database file
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1849)
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:820)
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:854)
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:847)
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:547)
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:118)
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at myapp.com.storage.SQLiteStorage.<init>(SQLiteStorage.java:61)
06-04 18:21:01.745 E/AndroidRuntime( 1280):     at myapp.com.storage.SQLiteStorage.<clinit>(SQLiteStorage.java:58)
06-04 18:21:01.745 E/AndroidRuntime( 1280):     ... 14 more
06-04 18:21:01.776 W/ActivityManager( 1002):   Force finishing activity myapp.com/.MyActivity 
```

在我捕获异常“SQLiteException：无法打开数据库文件”之后，应用程序是否应该简单地尝试实例化另一个 SQLiteOpenHelper ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:45:12.610

我已经让它可靠地工作了（测试用例是强制关闭应用程序，删除它创建的 .db 文件，然后重新启动应用程序 - 这需要有根手机来测试）。

**解决方案：**

SQLiteOpenHelper 对象（我的 SQLiteStorage 单例类中的嵌套类）需要从 Application.onCreate() 实例化，以便在服务和启动器活动调用它们的 onCreate() 时准备好表

**解释：**

发生的事情是启动器活动通过一个意图（也使用 SQLite DB 进行存储）启动了服务，并且启动器活动还启动了 SQLiteOpenHelper.onCreate()。但是，由于需要创建大量表，因此存在竞争条件，有时数据库在服务需要时还没有准备好。

# python - 在 python 中调用一个模块来处理同一个文件。它适用于一种情况，但不适用于另一种情况，我不知道有什么不同

> ID：10889460
> 
> 赞同：0
> 
> 时间：2012-06-04T22:47:53.730
> 
> 标签：python, file-io

![在此处输入图像描述](../Images/d2477ab893a28a4d712b3de5de17db30.png)

从上图可以看出，我`txt_to_csv_space_split_version()`在左上角的脚本和右下角的脚本中调用了模块。在左上角，由于某种原因没有读取文本文件（右上角的输出），但在右下角，它是（左下角的输出）。

我希望这是有道理的——请随时要求澄清！非常感谢！！

编辑：绿色圆圈指向在每个脚本中调用模块的位置。绿色矩形突出显示模块定义。红色圆圈表示两个脚本正在读取相同的文本文件（由相同的模块）。然而，不知何故，对于左上角的脚本，该模块似乎无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T01:08:10.543

您在左上角的脚本中以 'w' 模式打开文件，这将清除它的内容。

```
output_file=open("/Users/markfisher/Desktop/"+filenames[index]+'_output.txt','w') 
```

然后你调用一个打开该文件的函数来读取它的内容：

```
name_to_be_split="/Users/markfisher/Desktop/"+filenames[index]+'_output.txt'
#print something
transpose.txt_to_csv_space_split_version(name_to_be_split) 
```

`index`在脚本期间不会更改，因此文件名是相同的。

此时文件内容已被清除，因此没有什么可读取的。至少这是我可以从你放在那张照片中的多个东西中收集到的:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:59:08.760

啊哈哈！我找到了！在将 output_file.close() 传递给模块之前，我忘记了它！我不太明白为什么它会起作用，但确实如此！非常感谢@Amr 你的回答让我走上了正确的道路！

# android - Android USB Host API：批量传输缓冲区大小

> ID：10889461
> 
> 赞同：13
> 
> 时间：2012-06-04T22:48:00.507
> 
> 标签：android, usb, host

我正在编写软件以**在平板电脑**（Android 版本 4.0.3 和内核版本 2.6.39.4 的摩托罗拉 Xoom）**和使用 Android 提供的 USB Host API 的外围设备**之间进行通信。我只使用两种类型的通信：

*   **控制**：`controlTransfer(int requestType, int request, int value, int index, byte[] buffer, int length, int timeout)`
*   **散装**：`bulkTransfer(UsbEndpoint endpoint, byte[] buffer, int length, int timeout)`

控制转移工作正常，但**批量转移有问题。我只能使用 32768 作为 bulkTransfer 函数的缓冲区大小。不可能使用更少或更多。我知道由于缓冲区管道的限制（大小：32769 字节），我不能使用更多。**

此外围设备流式传输 bulkTranfer 函数未正确读取的数据。我想有些数据丢失了。

我发现这一点：[*在 Linux 中，如果一个进程试图从一个空管道（缓冲区）中读取，那么 read(2) 将阻塞，直到数据可用。如果一个进程尝试写入一个完整的管道，那么 write(2) 会阻塞，直到从管道中读取了足够的数据以允许写入完成。*](http://www.kernel.org/doc/man-pages/online/pages/man7/pipe.7.html)

基于此，我对问题的解释是，由于 write(2) 函数产生的阻塞标志，一些数据没有写入管道（缓冲区）。我对么？如果这是真的，我可以更改管道缓冲区。

1.  我对这个问题的第一个解决方案是更大的缓冲区。[对于内核> = 2.6.35，您可以更改管道的大小，`fcntl(fd, F_SETPIPE_SZ, size)`](https://stackoverflow.com/questions/4739348/is-it-possible-to-change-the-size-of-a-named-pipe-on-linux)但如何找到`fd`USB管道的（文件描述符）？
2.  第二种选择是使用`ulimit -p SIZE`，但`p`我的内核的参数不是管道而是进程。

有没有人遇到过同样的问题，有解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T22:01:37.983

你应该得到一个 USB 数据分析仪，我正在使用这个：[http ://www.ellisys.com/products/usbex200/index.php](http://www.ellisys.com/products/usbex200/index.php)

当我做同样类型的事情时，使用这样的东西真的帮助了我，我发现你必须做某种类型的 while 循环。

对于我的设备，我收到了 64 个字节的数据包，该数据包将是两个控制字节和 62 个数据，因此对于我的传输，我必须执行类似的操作

```
StringBuilder sb = new StringBuilder();
while(bulkTransfer(UsbEndpoint endpoint, byte[] buffer, int length, int timeout) > 2){
    for(int i = 2; i < buffer.length(); i++){
        sb.append((char) buffer[i]);
    }
} 
```

这些行很长的东西对我很有用，我遇到了完全相同的问题，这就是我修复它的方法。如果您需要，我有更多信息。只是评论:)。我知道这对我来说真的很令人沮丧。我正在使用带有 Android 4.0.3 的 Acer Iconia A500

* * *

[传输大量数据 USB](https://stackoverflow.com/questions/10931558/transferring-larger-amounts-of-data-usb)

[传输数据 USB](https://stackoverflow.com/questions/10429615/transferring-data-usb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-31T06:30:58.273

Android SDK 的**UsbEndpoint**对象提供了一个**getMaxPacketSize()**方法，允许您检查适合您设备的内容。通常，USB“全速”设备的最大允许数据包大小为 64 字节，“高速”设备为 512 字节 - 远小于您尝试的 32,768 个字节。您是否可能将底层 USB 数据包大小与某些更高级别协议的大小混淆了？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T21:36:04.180

根据相同的 .pdf gfour 发布，我在那里找到了这段：

“数据包的大小会影响性能并取决于数据速率。对于非常高的速度，需要最大的数据包大小。例如，对于以 115200 波特传输音频数据的“实时”应用程序，最小的可能的数据包是可取的，否则设备将一次保存 4k 数据。如果 USB 请求大小太大且数据速率太低（相对），这可能会产生“急速”数据传输的效果。”

我遇到了类似于带有 FTDI 串行设备的 SmartLemon 的情况，所以我最近一直在寻找缓解它的方法。这将需要我从头开始编写自己的函数，而之前我使用的是库。

但是，在您的情况下，您似乎可以尝试使用 bulkTransfer 的最低缓冲区大小，而不是使用最大的缓冲区。您可能已经尝试过，但可能还没有。我看到你说 32768 是唯一的大小，但也许你只是指最大值。它只允许一种特定的尺寸似乎很奇怪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T15:32:08.177

根据[AN232B-04_DataLatencyFlow.pdf](http://www.ftdichip.com/Support/Documents/AppNotes/AN232B-04_DataLatencyFlow.pdf)，高数据速率需要流量控制：

> 强烈建议使用流控制，因为无法确保始终调度 FTDI 驱动程序。

您是否尝试过使用流控制选项之一（RTS/CTS、DTR/DSR、XON/XOFF）来同步您的数据？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-11T06:43:56.083

你可以试试这个批量转移问题

```
byte[] buffer = new byte[4096];

            StringBuilder strIN = new StringBuilder();

            if (conn.bulkTransfer(epIN, buffer, 4096, 500) >= 0) {
                for (int i = 2; i < 4096; i++) {
                    if (buffer[i] != 0) {
                        strIN.append((char) buffer[i]);

                        textReceiveDataInfo.append(strIN + "\n");
                    } else {
                        l(strIN);
                        break;
                    }
                }

            } 
```

# html - 如何设置链接的背景颜色？

> ID：10889476
> 
> 赞同：1
> 
> 时间：2012-06-04T22:50:21.223
> 
> 标签：html, css

我一直在试图弄清楚如何将我所在的当前页面设置为与其他链接不同的背景颜色，但无济于事。

**HTML**

```
<div id="navigation">
    <ul>
        <li><a href="<?php echo base_url() ?>index.php/home">Home</a></li>
        <li><a href="<?php echo base_url() ?>index.php/portfolio">Portfolio</a></li>
        <li><a href="<?php echo base_url() ?>index.php/about">About</a></li>
        <li><a href="<?php echo base_url() ?>index.php/gallery">Gallery</a></li>
        <li><a href="<?php echo base_url() ?>index.php/blog">Blog</a></li>
    </ul>
</div> 
```

我想要的是将当前活动链接设置为黑色，将其他四个链接设置为灰色。这样，如果我访问*Portfolio*，例如，该链接是黑色的，其余的都是灰色的。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T23:14:08.477

值得庆幸的是，没有涉及 Javascript。HTML 和 CSS 可以很好地完成这项任务。首先，让我们创建您的 HTML。你显然知道你在哪个页面，所以我们要给当前页面的链接添加一个类。因此，例如，如果我们在`/index.php/home`我们的标记上可能看起来与此类似。

```
<div id="navigation">
    <ul>
        <li><a class="current" href="<?php echo base_url() ?>index.php/home">Home</a></li>
        <li><a href="<?php echo base_url() ?>index.php/portfolio">Portfolio</a></li>
        <li><a href="<?php echo base_url() ?>index.php/about">About</a></li>
        <li><a href="<?php echo base_url() ?>index.php/gallery">Gallery</a></li>
        <li><a href="<?php echo base_url() ?>index.php/blog">Blog</a></li>
    </ul>
</div> 
```

现在，在我们为*当前*链接着色之前，我们将为其余链接着色。我们可以像这样通过 CSS 选择其余的链接。

```
#navigation a {
} 
```

下面的 CSS 将选择`<a>`元素的所有子`navigation`元素。所以现在我们需要设置它的背景颜色。用于设置背景颜色的 CSS 属性是`background-color: xxx`. `xxx`十六进制代码、rgb 值或颜色名称在哪里。因此，我们将执行以下操作以使所有链接变为灰色。

```
#navigation a {
    background-color: #333; /* or whatever grey you want. */
} 
```

这会将每个链接设置为灰色。现在，我们需要将*当前*链接设置为黑色。

如果您注意到，我们添加`class="current"`到当前链接，在这种情况下为*主页链接。*接下来我们需要为此创建适当的样式。我们的 CSS 声明将与此类似。

```
#navigation .current {
} 
```

上面的声明适用于类`current`是 element 子级的所有元素`navigation`。所以现在我们像这样设置背景颜色。

```
#navigation .current {
    background-color: #000;
} 
```

所以，我们最终的 CSS 应该是这样的。

```
#navigation a {
    background-color: #333;
}

#navigation .current {
    background-color: #000;
} 
```

注意**顺序很重要！**如果我们将第二个声明放在首位，它将被更一般的链接声明覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T23:19:21.913

你有两个选择，你可以使用 PHP 和 CSS，这更好，因为这是客户端独立的。第二种选择是使用 Javascript 和 CSS

**PHP & CSS**
我更喜欢这种方式！如果当前页面等于每个菜单链接，您需要检查每个站点。这是我的解决方案的一些片段。它适用于我的网站。我不知道它是否适合您的链接方式：`index.php/home`. 认为你必须适应它。因为我使用的是 home.php 和 blog.php 之类的真实文件

这是 menu.php，我将它包含在每个站点中：

```
 <div id="menu">
        <div class="innertube">
        <ul>
<?
markIfCurrent("Willkommen", "willkommen");
markIfCurrent("Salzgrotte", "salzgrotte-am-fehn");
markIfCurrent("Heilwirkung", "heilwirkung-des-salzes");
markIfCurrent("Farbtherapie", "farblichttherapie");
markIfCurrent("Salzshop", "salzshop");
markIfCurrent("Erfahrungs-<br/>berichte", "erfahrungsberichte");
markIfCurrent("Fragen und Antworten", "fragen-und-antworten");
markIfCurrent("Preise", "preise");
markIfCurrent("Galerie", "galerie");
markIfCurrent("Presse", "presse");
markIfCurrent("Praxis", "praxis");
markIfCurrent("Anfahrt", "anfahrt");
?>
        </ul>
        </div>
    </div> 
```

现在php函数：

```
/* filter selected menu items */
function markIfCurrent ($name, $link) {
    $should_mark = isCurrent($link);
    if ($should_mark) {
        $first = strtoupper(substr($name, 0, 1));
        $rest = substr($name, 1);
        echo "<li><span class='current'>".$name."</span></li>\n";
    } else {
        echo "<li><a class='lower' href='".$link."'>".$name."</a></li>\n";
    }
}

/* check if $pageis current page */
function isCurrent ($page) {
    /* reverse mapping */
    if ($page == "willkommen") {
        $page = "index";
    }
    $isCurrent = $page.".php" == getCurrentPage();
    return $isCurrent;
}

function getCurrentPage() {
    $path = $_SERVER['PHP_SELF'];
    $a = explode("/", $path);
    $site_name = $a[sizeof($a)-1];
    return $site_name; 
} 
```

至少CSS：

```
li span.current a {
    background-color: black; /* or #000000 */
}
li span a {
    background-color: gray; /* or #cccccc*/
} 
```

* * *

**JavaScript & CSS**
这是更多的伪代码，但它与 PHP 版本的逻辑相同

在这种情况下，您还需要检查当前 url 并`window.location.pathname`获取 url / 路径名。在斜杠上拆分并提取文件。然后您可以使用 jQuery 遍历导航的元素，`$("#navigation").find("a")`然后您可以为 a 元素设置 css 样式`a.css("background-color", "black")`

# javascript - Firefox setTimeout + jQuery 淡入淡出循环不一致，提前停止，不会循环

> ID：10889478
> 
> 赞同：0
> 
> 时间：2012-06-04T22:50:24.733
> 
> 标签：javascript, jquery, firefox

[http://jsfiddle.net/x6PCD/11/](http://jsfiddle.net/x6PCD/11/)

我正在尝试制作一个在几个绝对定位的 div 之间渐变的幻灯片。在 Chrome、IE9、Opera 上，下面的代码可以正常工作。但在 Firefox 上，超时会发生一两次，然后停止。如果您删除下面标记的 JS 部分，它会正确循环。

```
<style>
.slide {position:absolute; top:0; left:0; width:300px; height:200px}
</style>
<div id="slides" class="slides">
<div class="slide slide1" style="background:#c66">
  <div class="swap_links">
    <a href="javascript:" class="active">1</a>
    <a href="javascript:">2</a>
    <a href="javascript:">3</a>
  </div>
</div>
<div class="slide slide2" style="background:#6c6">
  <div class="swap_links">
    <a href="javascript:">1</a>
    <a href="javascript:" class="active">2</a>
    <a href="javascript:">3</a>
  </div>
</div>
<div class="slide slide3" style="background:#36c">
  <div class="swap_links">
    <a href="javascript:">1</a>
    <a href="javascript:">2</a>
    <a href="javascript:" class="active">3</a>
  </div>
</div>
</div>
<script type="text/javascript">
$(function() {

    var fp = '#slides .slide';
    var fs = 300;

    var t = window.setTimeout(swap, 1000);

    $(fp).slice(1).hide();

    function swap(to) {

        //removing this section, loop plays in FF
        if (to) {
            $(fp + to).fadeIn(fs);
            $(fp).not('.slide' + to).fadeOut(fs);
            window.clearTimeout(t);
            return;
        }

        $(fp).eq(1).fadeIn(fs);
        $(fp).eq(0).fadeOut(fs, function() {
            $(this).appendTo('#slides');
            t = window.setTimeout(swap, 1000);
        });

    }

    $('#slides .swap_links a').click(function() {
        swap($(this).html());
    });

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T00:01:40.773

如果传递的值不是 0，FireFox 似乎一直在将任意数值传递给`to`函数中的变量，从而导致语句执行。`if(to){...}`

要解决此`swap()`问题，请在 setTimeout() 中执行不带参数的函数，如下所示：

```
var t = window.setTimeout(function(){ swap(); }, 1000); 
```

这是更新的演示：http: [//jsfiddle.net/x6PCD/14/](http://jsfiddle.net/x6PCD/14/)

我希望这有帮助！

# c# - 查找已排序整数数组的交集

> ID：10889479
> 
> 赞同：1
> 
> 时间：2012-06-04T22:50:27.740
> 
> 标签：c#, performance, algorithm

让我们有一些整数短排序数组，我们需要找到等于或大于预定义常量的交集。这是代码，它演示了我想要做得更好然后我可以用文字解释它。问题是速度。我的代码运行速度很慢。2000 个元素数组（在我的慢速机器上）大约需要 15 秒。当然，我可以实现自己的交集方法和并行代码，但它的改进非常有限。执行时间增长为 N^2 或其他东西，并且已经为 500k 数组需要非常长的时间。那么如何重写算法以获得更好的性能呢？我不受 C# 语言限制，也许 CPU 或 GPU 对此类工作有很好的特殊说明。

```
Example:

Input:
1,3,7,8
2,3,8,10
3,10,11,12,13,14

minSupport = 1

Output:

1 and 2: 2, 8
1 and 3: 3
2 and 3: 3, 10 
```

* * *

```
 var minSupport = 2;
    var random = new Random(DateTime.Now.Millisecond);

    // Numbers is each array are unique
    var sortedArrays = Enumerable.Range(0,2000)
    .Select(x => Enumerable.Range(0,30).Select(t => random.Next(1000)).Distinct()
    .ToList()).ToList();
    var result = new List<int[]>();
    var resultIntersection = new List<List<int>>();

    foreach (var array in sortedArrays)
    {
        array.Sort();
    }

    var sw = Stopwatch.StartNew();

    //****MAIN PART*****//

    for (int i = 0; i < sortedArrays.Count-1; i++)
    {
        for (int j = i+1; j < sortedArrays.Count; j++)
        {
            var intersect = sortedArrays[i].Intersect(sortedArrays[j]).ToList();
            if(intersect.Count()>=minSupport)
            {
                result.Add( new []{i,j});
                resultIntersection.Add(intersect);
            }
        }
    }

    //*****************//

    sw.Stop();

    Console.WriteLine(sw.Elapsed); 
```

编辑：

现在，在 2000 个元素上使用旧算法大约需要 9 秒与 15 秒。嗯......当然它还不够快。

```
//****MAIN PART*****//

    // This number(max value which array can contains) is known
    var maxValue = 1000;

    var reverseIndexDict = new Dictionary<int,List<int>>();

    for (int i = 0; i < maxValue; i++)
    {
        reverseIndexDict[i] = new List<int>();
    }

    for (int i = 0; i < sortedArrays.Count; i++)
    {
        for (int j = 0; j < sortedArrays[i].Count; j++)
        {
            reverseIndexDict[sortedArrays[i][j]].Add(i);
        }
    }

    var tempArr = new List<int>();
    for (int i = 0; i < sortedArrays.Count; i++)
    {
        tempArr.Clear();
        for (int j = 0; j < sortedArrays[i].Count; j++)
        {
            tempArr.AddRange(reverseIndexDict[j]);
        }

        result.AddRange(tempArr.GroupBy(x => x).Where(x => x.Count()>=minSupport).Select(x => new[]{i,x.Key}).ToList());

    }

    result = result.Where(x => x[0]!=x[1]).ToList();

    for (int i = 0; i < result.Count; i++)
    {
        resultIntersection.Add(sortedArrays[result[i][0]].Intersect(sortedArrays[result[i][1]]).ToList());
    }

    //*****************// 
```

编辑：

一些改进。

```
//****MAIN PART*****//

    // This number(max value which array can contains) is known
    var maxValue = 1000;

    var reverseIndexDict = new List<int>[maxValue];

    for (int i = 0; i < maxValue; i++)
    {
        reverseIndexDict[i] = new List<int>();
    }

    for (int i = 0; i < sortedArrays.Count; i++)
    {
        for (int j = 0; j < sortedArrays[i].Count; j++)
        {
            reverseIndexDict[sortedArrays[i][j]].Add(i);
        }
    }

    for (int i = 0; i < sortedArrays.Count; i++)
    {
        var tempArr = new Dictionary<int, List<int>>();

        for (int j = 0; j < sortedArrays[i].Count; j++)
        {
            var sortedArraysij = sortedArrays[i][j];

            for (int k = 0; k < reverseIndexDict[sortedArraysij].Count; k++)
            {
                if(!tempArr.ContainsKey(reverseIndexDict[sortedArraysij][k]))
                {
                    tempArr[reverseIndexDict[sortedArraysij][k]] = new[]{sortedArraysij}.ToList();
                }
                else
                {
                   tempArr[reverseIndexDict[sortedArraysij][k]].Add(sortedArrays[i][j]);
                }

            }
        }

        for (int j = 0; j < reverseIndexDict.Length; j++)
        {
            if(reverseIndexDict[j].Count>=minSupport)
            {
                result.Add(new[]{i,j});
                resultIntersection.Add(reverseIndexDict[j]);
            }
        }

    }

    // and here we are filtering collections

    //*****************// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:23:32.953

有两种解决方案：

1.  让我们假设您有 3 个已排序的数组，并且您必须找到它们之间的交集。遍历第一个数组并对两个数组的其余部分运行二进制搜索，以查找第一个数组中的元素。如果两个列表上的相应二分搜索给出肯定的，则增加交集计数器。

    ```
    result = List
    for element in Array1:
        status1 = binarySearch(element, Array2)
        status2 = binarySearch(element, Array2)
        status = status & status
        if status == True:
            count++
            if count == MAX_INTERSECTION:
                result.append(element)
                break 
    ```

    时间复杂度：N * M * Log(N)，
    其中，
    N = 数组中的元素
    数 M = 数组数

2.  此解决方案仅在数组中的数字为正整数时才有效。计算所有排序数组中总元素的最大值和最小值。当它被排序时，我们可以通过调查给定的排序数组的开始和结束元素来确定它。设最大数为最大值，最小数为最小值。创建一个大小为 max - min 的数组并用零填充。让我们假设您有 3 个数组，现在开始遍历第一个数组，然后转到相应的索引并增加先前创建的数组中的值。如下所述：

    ```
    element is 5 in Array 1, the New_array[5]+=1 
    ```

    遍历所有三个排序列表并执行上述操作。最后遍历new_array并寻找等于3的值，这些索引是交集的结果。

    时间复杂度：O(N) + O(N) + .. = O(N)
    空间复杂度：O(maximum_element - minimum_element)
    其中，
    N = 数组中的元素数。

# php - 用引号编写字符串的替代方法

> ID：10889482
> 
> 赞同：0
> 
> 时间：2012-06-04T22:51:02.160
> 
> 标签：php, string

我将如何在 PHP 中完成这项工作：

```
$string = "<div id="widget14" class="widget widget-124">
     <a href="http://website.com/page.php?id={$pageurl}"><p><span class="hotspot" onmouseover="tooltip.show('<strong>About Us</strong><br/>Learn about us!');" onmouseout="tooltip.hide();"><img class="images_button" alt="About Image" src="{$image_url}" width="172px"/><br/>About Us</span></p></a>
    </div>"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T22:52:07.123

无需 PHP：

```
<div id="widget14" class="widget widget-124">
   <a href="http://website.com/cgames/"><p><span class="hotspot" onmouseover="tooltip.show('<strong>About Us</strong><br/>Learn about us!');" onmouseout="tooltip.hide();"><img class="images_button" alt="About Image" src="http://www.website.com/images/logo.png" width="172px"/><br/>About Us</span></p></a>
</div> 
```

如果它绝对必须是一个变量：

```
$string = <<<HTML
    <div id="widget14" class="widget widget-124">
       <a href="http://website.com/cgames/"><p><span class="hotspot" onmouseover="tooltip.show('<strong>About Us</strong><br/>Learn about us!');" onmouseout="tooltip.hide();"><img class="images_button" alt="About Image" src="http://www.website.com/images/logo.png" width="172px"/><br/>About Us</span></p></a>
    </div>
HTML; 
```

[Heredoc语法](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

否则你会用反斜杠卡住转义引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:59:37.283

```
$string = "<div id=\"widget14\" class=\"widget widget-124\">
     <a href=\"http://website.com/cgames/\"><p><span class=\"hotspot\" onmouseover=\"tooltip.show('<strong>About Us</strong><br/>Learn about us!');\" onmouseout=\"tooltip.hide();\"><img class=\"images_button\" alt=\"About Image\" src=\"http://www.website.com/images/logo.png\" width=\"172px\"/><br/>About Us</span></p></a>
    </div>\"; 
```

以上应该可以正常工作。

# xsd - 如何创建将数据保存在两个元素中的 XBL 控件？

> ID：10889484
> 
> 赞同：0
> 
> 时间：2012-06-04T22:51:07.980
> 
> 标签：xsd, orbeon, xforms, xbl

我试图告诉 Orbeon 将 2 个字段组合在一起，以便捕获 2 个值，如：磅和盎司。

```
<xs:complexType name="rpm-weight">
    <xs:sequence>
        <xs:element name="weight-lbs" type="rpm-weight-lbs" minOccurs="1" maxOccurs="1"/>
        <xs:element name="weight-oz" type="rpm-weight-oz"   minOccurs="1" maxOccurs="1">
    </xs:sequence>
</xs:complexType> 
```

我如何告诉 Orbeon 在选择 rpm-weight 时会生成 2 个文本框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T01:46:14.017

创建 XBL 组件是可行的方法，如果这是您第一次这样做，这可能会很棘手。几点建议：

*   因此，您可以在 Form Builder 中使用它，您的组件需要绑定到一个元素（使用`ref`）。元素的名称将是表单作者为表单生成器中的控件提供的名称（假设他们没有使用自定义实例）。
*   Form Builder 将在控件的实例中创建一个元素。由于您的控件需要有子元素，因此您需要告诉 Form Builder 那些。您可以使用`fb:metadata/fb:template/fb:instance`. 例如，看看这是如何在[`autocomplete.xbl`](https://github.com/orbeon/orbeon-forms/blob/master/src/resources-packaged/xbl/orbeon/autocomplete/autocomplete.xbl). 例如，元数据的那部分将如下所示。

XBL 的表单生成器元数据示例：

```
<fb:metadata xmlns:fb="http://orbeon.org/oxf/xml/form-builder">
    ...
    <fb:templates>
        <fb:instance>
            <weight-lbs/>
            <weight-oz/>
        </fb:instance>
        <fb:view>
            ...
       </fb:view>
    </fb:templates>
</fb:metadata> 
```

# file-upload - 在 Webdynpro ABAP 中上传文件

> ID：10889485
> 
> 赞同：1
> 
> 时间：2012-06-04T22:51:15.167
> 
> 标签：file-upload, abap, webdynpro

我正在寻找一种将 xstring 文件上传到 BDS（业务文档服务）的 Webdynpro 方式，大多数文件都是二进制或 ZIP 格式。我使用 Webdynpro 的文件上传功能。

我尝试使用 BDS 功能插入文件，`CREATE_WITH_AS_TABLE`但只有垃圾存储在 BDS 中。

有人可以帮我解决这个小问题吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T08:08:44.777

您好，感谢您的回答。

我找到了这个小问题的解决方案。我忘记将 xsting 转换为二进制格式以将文件插入 bds 系统。不幸的是，很多人都有同样的问题，但没有人发布一个片段。

**重要的代码是：**

```
CALL FUNCTION 'SCMS_XSTRING_TO_BINARY'
EXPORTING
  buffer        = im_xstr
IMPORTING
  output_length = lv_size
TABLES
  binary_tab    = lt_data. 
```

**我的完整课程：**

```
method WD_SAVE_NEW_FILE.

DATA: i_files TYPE sbdst_files,
      wa_files LIKE LINE OF i_files,
      i_signature TYPE sbdst_signature,
      wa_signature LIKE LINE OF i_signature.

* prepare data for FM - COMPONENTS
  DATA: i_components TYPE sbdst_components,
        wa_components LIKE LINE OF i_components .

  wa_components-doc_count  = 1.
  wa_components-comp_count = 1.
  wa_components-comp_id    = IM_FILE_NAME.
  wa_components-mimetype   = IM_FILE_MIME.
  APPEND wa_components to i_components.

* set signature to intial = 1
    wa_signature-doc_count  = 1.
    wa_signature-doc_ver_no = 1.
    wa_signature-doc_var_id = 1.
    wa_signature-doc_var_tg = ''.
    wa_signature-comp_count = 1.
    wa_signature-prop_name  =  'BDS_DOCUMENTCLASS'.
    wa_signature-prop_value = ''.
    APPEND  wa_signature TO i_signature.
    CLEAR wa_signature.

    wa_signature-doc_count  = 1.
    wa_signature-doc_ver_no = 1.
    wa_signature-doc_var_id = 1.
    wa_signature-doc_var_tg = ''.
    wa_signature-comp_count = 1.
    wa_signature-prop_name  =  'DESCRIPTION'.
    wa_signature-prop_value = im_file_comment.
    APPEND  wa_signature TO i_signature.
    CLEAR wa_signature.

DATA lt_data TYPE sbdst_content.
  DATA lv_size TYPE i.
  DATA ls_xstring TYPE XSTRINGVAL.
* Fill ls_xstring

  CALL FUNCTION 'SCMS_XSTRING_TO_BINARY'
    EXPORTING
      buffer        = im_xstr
    IMPORTING
      output_length = lv_size
    TABLES
      binary_tab    = lt_data.

CALL METHOD me->o_document_set->create_with_table
      EXPORTING
        classname       = me->i_classname
        classtype       = me->i_classtype
        content         = lt_data
        components      = i_components
      CHANGING
        object_key      = me->i_object_key
        signature       = i_signature
      EXCEPTIONS
        nothing_found   = 1
        parameter_error = 2
        not_allowed     = 3
        error_kpro      = 4
        internal_error  = 5
        not_authorized  = 6
        OTHERS          = 7.

    CASE sy-subrc.
      WHEN 0.
*       
      WHEN 1.
        MESSAGE ID sy-msgid TYPE sy-msgty NUMBER sy-msgno
        WITH sy-msgv1 sy-msgv2 sy-msgv3 sy-msgv4.
      WHEN 2.
        MESSAGE ID sy-msgid TYPE sy-msgty NUMBER sy-msgno
        WITH sy-msgv1 sy-msgv2 sy-msgv3 sy-msgv4.
      WHEN 3.
        MESSAGE ID sy-msgid TYPE sy-msgty NUMBER sy-msgno
        WITH sy-msgv1 sy-msgv2 sy-msgv3 sy-msgv4.
      WHEN 4.
        MESSAGE ID sy-msgid TYPE sy-msgty NUMBER sy-msgno
        WITH sy-msgv1 sy-msgv2 sy-msgv3 sy-msgv4.
      WHEN 5.
        MESSAGE ID sy-msgid TYPE sy-msgty NUMBER sy-msgno
        WITH sy-msgv1 sy-msgv2 sy-msgv3 sy-msgv4.
      WHEN 6.
        MESSAGE ID sy-msgid TYPE sy-msgty NUMBER sy-msgno
        WITH sy-msgv1 sy-msgv2 sy-msgv3 sy-msgv4.
      WHEN OTHERS.
        MESSAGE ID sy-msgid TYPE sy-msgty NUMBER sy-msgno
        WITH sy-msgv1 sy-msgv2 sy-msgv3 sy-msgv4.

    ENDCASE.

*return values

endmethod. 
```

我希望代码能帮助其他 Web Dynpro 新手。

干杯海因里希

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:25:04.560

你试过这个功能吗？

```
-BDS_BUSINESSDOCUMENT_CREATEF 
```

还要将该文件存储在 BDS 中，您必须使用

```
-CL_BDS_DOCUMENT_SET=>CREATE_WITH_TABLE 
```

希望它有帮助。

# php - PHP将日期分解为值并使用if语句抛出500个错误

> ID：10889486
> 
> 赞同：0
> 
> 时间：2012-06-04T22:51:22.967
> 
> 标签：php

这是我的代码。我知道 500 错误通常是编码错误，但我找不到。谢谢你的时间。

```
$today = "1234";
$appt = "1235";
$date = explode("/", $data[1]); // EXAMPLE DATE IS 06/01/2012
$m = date("m",mktime(0, 0, 0, $date["0"], $date["1"], $date["2"]));
$d = date("d",mktime(0, 0, 0, $date["0"], $date["1"], $date["2"]));
$y = date("Y",mktime(0, 0, 0, $date["0"], $date["1"], $date["2"]));
$appt  = date(mktime(0, 0, 0, "$m", "$d", "$y"));
$today = strtotime("today");

if ($today > $appt) {

} else {
$appt[] = array($data[8],$data[1],$data[2],$data[4],$data[3],$data[7],$data[9],$data[5],$data[15],$data[6],$data[10],$data[12],$data[13],$data[14]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T23:53:47.860

您的错误来自您的参考`$date`：

```
$m = date("m",mktime(0, 0, 0, $date["0"], $date["1"], $date["2"]));
$d = date("d",mktime(0, 0, 0, $date["0"], $date["1"], $date["2"]));
$y = date("Y",mktime(0, 0, 0, $date["0"], $date["1"], $date["2"])); 
```

您正在使用`"0"`、`"1"`和`"2"`。[explode(...)](http://php.net/manual/en/function.explode.php)返回一个基于 int 的数组，而不是字符串。你应该使用

```
$m = date("m",mktime(0, 0, 0, $date[0], $date[1], $date[2]));
$d = date("d",mktime(0, 0, 0, $date[0], $date[1], $date[2]));
$y = date("Y",mktime(0, 0, 0, $date[0], $date[1], $date[2])); 
```

我想提出的建议是保存[mktime(...)](http://php.net/manual/en/function.mktime.php)返回的内容以加快处理时间：

```
$mktime = mktime(0, 0, 0, $date[0], $date[1], $date[2]);
$m = date("m", $mktime);
$d = date("d", $mktime);
$y = date("Y", $mktime);
unset($mktime); // http://php.net/manual/en/function.unset.php 
```

* * *

与原始问题无关，但您为什么使用：

```
$appt  = date(mktime(0, 0, 0, "$m", "$d", "$y")); 
```

当你应该使用：

```
$appt  = date(mktime(0, 0, 0, $m, $d, $y)); 
```

* * *

在过去的两个代码块的基础上，您可以使用它：

```
$mktime = mktime(0, 0, 0, $date[0], $date[1], $date[2]);
$appt  = date(mktime(
    0, // $hour
    0, // $minute
    0, // $second
    date("m", $mktime), // $month
    date("d", $mktime), // $day
    date("Y", $mktime))); // $year
unset($mktime); // http://php.net/manual/en/function.unset.php 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-04T23:35:56.570

首先，您的代码似乎有点过于复杂。尝试这个：

```
$today=strtotime(date("m/d/Y"));
$appt=strtotime($data[1]);
if($today > $appt) {

} else {
    $appt[] = array($data[8],$data[1],$data[2],$data[4],$data[3],$data[7],$data[9],$data[5],$data[15],$data[6],$data[10],$data[12],$data[13],$data[14]);
} 
```

如果仍然收到 500 错误，请进行一些错误检查：

```
print_r($data); 
```

希望这至少能让你朝着正确的方向前进。

# rsa - 个人私钥的最佳实践

> ID：10889491
> 
> 赞同：5
> 
> 时间：2012-06-04T22:52:06.977
> 
> 标签：rsa, public-key-encryption

我刚开始在日常工作中使用 RSA 密钥，我对使用它们的最佳方式有一些疑问。

最大的问题围绕着多个客户端和多个服务器的想法。这是一个场景：

我有两台客户端计算机：

1.  桌面
2.  笔记本电脑

我将验证两台服务器：

1.  我自己的本地服务器
2.  远程服务（例如 Github）

那么，一般来说，在这种情况下，您会推荐多少个密钥对？

*   一对密钥：这把钥匙是“我”，我到处都用它。
*   每个客户端一个：这个键是“这个客户端”，我把它放在我想从那个客户端连接到的每台服务器上。
*   每个服务器一个密钥对：这是“此服务”的密钥，我将私钥带到我想连接到它的每个客户端。
*   每个组合一个：每个唯一的客户端-服务器配对都有自己的密钥对。

如果这些都没有**明显优于或差**于任何其他，您能否概述每种方法的优缺点，以便人们可以自己选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T23:00:01.097

在您的四个选项中，我喜欢的两个是：

*   每个客户端一个：这个键是“这个客户端”，我把它放在我想从那个客户端连接到的每台服务器上。

    这使您可以轻松地在特定客户端遭到破坏时撤销其所有密钥——删除每个服务上的一个密钥。它也只在客户端数量上线性扩展，这可能会使密钥管理更容易。它甚至与 OpenSSH 密钥模型完美契合，即为每个客户端提供一个可在多个服务器上使用的密钥。（你*可以*用 OpenSSH 做其他模型，这很好。但这是最容易做的事情，因为它发生时不需要你做任何努力。）

*   每个组合一个：每个唯一的客户端-服务器配对都有自己的密钥对。

    当单个客户端受到威胁时，这会迫使您撤销多个密钥，但无论如何这将是每个服务的一个密钥，因此它不会变得更糟。更好的好处是，一项服务作为您和另一项服务之间的中间人将变得更加困难。大多数时候这不是一个真正的问题，但是如果您的 (Laptop,Server,SMTP) 密钥突然被用于 (Laptop,Server,SSH)，您将有机会注意到这一奇怪之处。我不确定这种能力是否值得二次增加要管理的密钥。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T22:58:05.230

执行此操作的常用方法是您的“每个客户一个”选项。这样，如果客户端密钥被泄露，您可以只从允许的服务器中撤销*该密钥。*如果你想要额外的工作，你可以做“每个组合一个”。

上述选项避免在主机之间复制私钥数据。

# python - 在 python 中从 MySQL BLOB 对象重构一个充满数据的类

> ID：10889497
> 
> 赞同：0
> 
> 时间：2012-06-04T22:52:51.317
> 
> 标签：python, mysql, class, blob, cherrypy

我正在使用 CherryPy，它在从服务器上存储的文件中检索数据时似乎表现不佳。（我寻求帮助，没有人回答，所以我开始计划 B 或 C ......）现在我已经存储了一个包含一堆数据结构（3 个字典和两个列表都相关的列表）的类一个 MySQL 表，令人惊讶的是，插入二进制对象 (longblob) 比我想象的要容易。我把它变成了一个泡菜文件并插入它。

但是，我现在不知道如何重构泡菜并从中重建充满数据的类。数据库返回一个看起来像泡菜的巨大字符串，但是如何将一个字符串变成一个类似文件的对象，以便 pickle.load(data) 可以工作？

替代解决方案：如何将类保存为数据库中的 BLOB，或者关于为什么我可以保存这个类的泡菜但是当我稍后去加载它时，这个类似乎丢失了的一些想法。但是在 SSH / 本地，它可以工作 - 只有当从 cherrypy 调用 pickle.load(xxx) 时，我才会收到错误。

我准备好计划 D - 如果有更好的方法来存储结构化数据集合以便快速检索而无需泡菜或 MYSQL blob...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:29:36.793

[您可以使用(c)StringIO](http://docs.python.org/library/stringio.html)创建类似文件的内存对象：

```
>>> from cStringIO import StringIO
>>> fobj = StringIO('file\ncontent')
>>> for line in fobj:
...   print line
...
file

content 
```

但是对于泡菜的使用，您可以直接加载并转储到字符串（查看函数名称中的**s ）：**

```
>>> import pickle
>>> obj = 1
>>> serialized = pickle.dumps(obj)
>>> serialized
'I1\n.'
>>> pickle.loads(serialized)
1 
```

但是对于存储在数据库中的结构化数据，我一般建议您使用

*   一个表，最好使用像[sqlalchemy](http://www.sqlalchemy.org/)这样的 ORM，因此它直接映射到一个类 *或*
*   一个字典，可以用*JSON轻松（反）序列化*

并且根本不使用泡菜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T16:28:06.093

我自己也为此苦苦挣扎。

使用 UTF-8 字符集转换为字节并尝试将数据加载到您的对象中。

```
CurrentShoppingCart.SetCartItems(pickle.loads(bytes(DBCart[0]['Cart'], 'UTF-8'))) 
```

安德鲁

# android - Android 试图为 Activity 类和应用程序崩溃创建一个基类

> ID：10889499
> 
> 赞同：0
> 
> 时间：2012-06-04T22:53:02.893
> 
> 标签：android

我认为如果我在 android 上的所有屏幕都有一个基类，那将是必要的。然后我不必重新输入相同的内容，....但是当我用 cBase（我的基类）替换 Activty 时它崩溃了

基类

```
public class cBase extends Activity{

  public void onCreate(Bundle savedInstanceState) {

  }

} 
```

我的课崩溃了

```
public class TellaFortuneActivity extends cBase implements OnClickListener {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // add the add
    // Create the adView
    AdView adView;
    adView = new AdView(this, AdSize.BANNER, "a14e10cb6b18825");

    // Lookup your LinearLayout assuming it’s been given
    // the attribute android:id="@+id/mainLayout"
    LinearLayout layout = (LinearLayout)findViewById(R.id.mainLayout);

    // Add the adView to it
    layout.addView(adView);

    // Initiate a generic request to load it with an ad
    adView.loadAd(new AdRequest());

    // add listeners
    View mAbout = findViewById(R.id.bio);
    mAbout.setOnClickListener(this);

    View mHistory = findViewById(R.id.history);
    mHistory.setOnClickListener(this);

    View mYesNo = findViewById(R.id.butyesno);
    mYesNo.setOnClickListener(this);

    View mSocial = findViewById(R.id.socialgame);
    mSocial.setOnClickListener(this);

    View mWheel = findViewById(R.id.wheelgame);
    mWheel.setOnClickListener(this);

    View mChat = findViewById(R.id.chat);
    mChat.setOnClickListener(this);

    View mTest = findViewById(R.id.test);
    mTest.setOnClickListener(this);       

}

public void onClick(View v) {
    Intent i;
    switch(v.getId())
    {

    case R.id.bio:
        // check data first

            i = new Intent(this, cBio2.class);
            startActivity(i);

        break;

    case R.id.history:
            i = new Intent(this, cHistory.class);
            startActivity(i);
        break;

    case R.id.chat: 
        i = new Intent(this, cChat.class);
        startActivity(i);
        break;      

    case R.id.wheelgame:    
        i = new Intent(this,cYesNoCardDeck.class);
        startActivity(i);           
        break;                  

    case R.id.socialgame:   
        i = new Intent(this,cSocialGame.class);
        startActivity(i); 
        break;              

    case R.id.butyesno: 
        i = new Intent(this, cYesNoDirections.class);
        startActivity(i); 
        break;     

    case R.id.test:
        i = new Intent(this, cYesNoShuffle.class);
        startActivity(i); 
        break;  

       } // end else

   } // end function
} // end class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T22:58:19.937

`cBase`您应该使用`@Override`该方法，并且`onCreate(Bundle savedInstanceState)`它还必须调用`super.onCreate(Bundle savedInstanceState)`

# python - 不同“深度”的不同json编码器

> ID：10889506
> 
> 赞同：1
> 
> 时间：2012-06-04T22:53:39.633
> 
> 标签：python, json

我想编写一个 json 编码器，它知道何时扩展对象，或将其保留为缩写形式。

我拥有的对象有很多属性，其中一些是其他对象的集合（这些对象又具有自己的属性，可能是集合，无穷无尽）。`json.dumps`如果递归遍历所有对象，该方法可能会返回非常大的字符串。

是否可以设置“深度”，以便在该深度之后找到的任何对象都不会进一步扩展？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T00:46:05.360

首先，你应该弄清楚你是否真的在这里节省了硬盘。不要考虑百分比差异，而是考虑运行程序的人的磁盘空间美元成本。

其次，我想出了一个 hacky 方法：

将文件夹 /Lib/json/ 复制到 python 安装之外的文件夹中。将文件夹命名为，例如，`jsondepth`

转到 encoder.py 并进行 3 处更改（行号来自 Python 2.7）：

411行，更改

```
def _iterencode(o, _current_indent_level):
    if isinstance(o, basestring):
        yield _encoder(o) 
```

至

```
def _iterencode(o, _current_indent_level):
    if(_current_indent_level > SKIP_INDENT_LEVEL):
        yield 'null'
        return
    if isinstance(o, basestring):
        yield _encoder(o) 
```

第 335 行，更改

```
def _iterencode_dict(dct, _current_indent_level):
    if not dct:
        yield '{}' 
```

至

```
def _iterencode_dict(dct, _current_indent_level):
    if(_current_indent_level > SKIP_INDENT_LEVEL):
        yield 'null'
        return
    if not dct:
        yield '{}' 
```

第 282 行，更改

```
def _iterencode_list(lst, _current_indent_level):
    if not lst:
        yield '[]' 
```

至

```
def _iterencode_list(lst, _current_indent_level):
    if(_current_indent_level > SKIP_INDENT_LEVEL):
        yield 'null'
        return
    if not lst:
        yield '[]' 
```

第 5 行，更改

```
try:
    from _json import encode_basestring_ascii as c_encode_basestring_ascii
except ImportError:
    c_encode_basestring_ascii = None
try:
    from _json import make_encoder as c_make_encoder
except ImportError:
    c_make_encoder = None 
```

至

```
c_encode_basestring_ascii = None
c_make_encoder = None 
```

在文件顶部的某处，（比如第 13 行）

```
SKIP_INDENT_LEVEL = 4 # or whatever recursion depth you want. 
```

请注意，必须启用缩进，否则这将完全崩溃。另请注意，我没有对此进行测试。没有明示或暗示的保证:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T01:37:26.887

我认为最简单的方法就是复制您的 dict，根据需要编辑副本，然后使用 JSON 库对您的副本进行 JSON 编码。

复制字典并在给定级别停止是一个非常简单的问题，使用如下递归函数：

```
def is_dict(x):
    return hasattr(x, "has_key")

def dict_copy_n(d_to_copy, max_levels):
    assert max_levels >= 0
    d = {}
    for k, v in d_to_copy.items():
        if is_dict(v):
            if max_levels > 0:
                d[k] = dict_copy_n(v, max_levels - 1)
            else:
                # set key to None; or, delete the else: case to just ignore
                d[k] = None
        else:
            d[k] = v
    return d 
```

上面的代码复制所有内容不变，直到`max_levels`倒计时到 0，此时任何值为 a 的键都在复制字典中`dict`简单地设置为。`None`您可以轻松地编辑上述代码以将密钥设置为其他值，或者干脆不复制该密钥。

因此，使用上述函数制作原始的部分副本，然后对副本进行 JSON 编码。

# jquery - 带有jquery的粘性标题

> ID：10889509
> 
> 赞同：8
> 
> 时间：2012-06-04T22:53:57.020
> 
> 标签：jquery, header, sticky

我想创建多个两个粘性标题，就像在该网站中一样： [http](http://www.trendyol.com/Kappa/ButikDetay/8690) ://www.trendyol.com/Kappa/ButikDetay/8690 当您向下滚动时，第一个标题与第二个粘性元素结合在一起。之后，两人一起向下移动。我该怎么做？感谢提前支持！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T22:59:24.857

实现这一点的方式非常简单。您检查滚动位置，如果它低于某个数字，则在顶部显示一个固定位置元素（并在滚动位置备份时隐藏）。

话虽如此，有一个很棒的插件可以提供帮助： [https ://github.com/imakewebthings/jquery-waypoints](https://github.com/imakewebthings/jquery-waypoints)

演示正是您想要的：http: [//imakewebthings.com/jquery-waypoints/sticky-elements/](http://imakewebthings.com/jquery-waypoints/sticky-elements/)

作为评论之一的更新，[http://stickyjs.com](http://stickyjs.com)可能是一个更受支持的库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T10:47:48.027

用来`position:sticky`做粘性。

这里是[文章解释](http://updates.html5rocks.com/2012/08/Stick-your-landings-position-sticky-lands-in-WebKit)。

# delphi - 如何使用 http post 上传文件？德尔福 2009

> ID：10889511
> 
> 赞同：8
> 
> 时间：2012-06-04T22:53:59.367
> 
> 标签：delphi, file-upload, http-post, delphi-2009, indy

我的目标是通过我使用 Delphi 2009 的 HTTP 帖子上传文本文件。

比如说下面的 URL

[https://www.example.com/ex/exampleAPI.asmx/Process](https://www.example.com/ex/exampleAPI.asmx/Process)

我知道可以通过使用 TIdHttp 组件来完成。和下面的电话

```
IdHttp1.Post(); 
```

但我不知道如何设置所有内容，即指定 url 并包括要发布的文件。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T23:24:58.660

`TIdHTTP`有两个`Post()`以文件名作为输入的重载版本：

```
var
  Response: String;

Response := IdHTTP1.Post('https://www.example.com/ex/exampleAPI.asmx/Process', 'c:\filename.txt'); 
```

.

```
var
  Response: TStream;

Response := TMemoryStream.Create;
IdHTTP1.Post('https://www.example.com/ex/exampleAPI.asmx/Process', 'c:\filename.txt', Response);
...
Response.Free; 
```

请注意，您正在发布到一个URL，因此您需要首先为该属性`HTTPS`分配一个启用 SSL 的 IOHandler，例如。`TIdSSLIOHandlerSocketOpenSSL``TIdHTTP.IOHandler`

# php - PHP分页问题

> ID：10889516
> 
> 赞同：1
> 
> 时间：2012-06-04T22:54:32.893
> 
> 标签：php, mysql

我有一个搜索，我正在尝试进行分页。[我在 PHPEasyStep](http://www.phpeasystep.com/phptu/29.html)找到了一个很酷的 php 脚本（是的，我是 PHP 和编程新手。）我实现了它，它可以显示分页和前进一页（从第 1 页到第 2 页），但是当您从第 2 页返回到第 1 页，搜索查询消失了，然后显示每个数据库条目（但分页）。搜索查询一定在某处迷路了？

![发生了什么？](../Images/24298a20f99b8f73c8360362684e5acb.png)

代码（当我粘贴时，它已被压缩，所以我已尽力缩进，但如果仍然难以阅读，我感到非常抱歉。如果它太难阅读，主要是在网站上，我从更好的缩进...上面有一个链接！）

```
<?php
     $q = mysql_real_escape_string(ucfirst(trim($_GET['searchquery'])));
?>
 <?php

  REQUIRE('config.php');

  $tbl_name="companies";

  $adjacents = 3;

  $query = "SELECT COUNT(*) as num FROM $tbl_name WHERE company_name LIKE '%$q%' OR      company_description LIKE '%$q%' OR cat1 LIKE '%$q' OR cat2 LIKE '%$q' OR cat3 LIKE '%$q' OR company_phone LIKE '%$q'";

  $total_pages = mysql_fetch_array(mysql_query($query));
  $total_pages = $total_pages[num];

  $targetpage = "search.php";
  $limit = 10;                              
  $page = $_GET['page'];
  if($page){
    $start = ($page - 1) * $limit; 
  }         
  else{
    $start = 0;                             
  }

  $sql = "SELECT * FROM $tbl_name WHERE company_name LIKE '%$q%' OR company_description LIKE '%$q%' OR cat1 LIKE '%$q' OR cat2 LIKE '%$q' OR cat3 LIKE '%$q' OR company_phone LIKE '%$q' ORDER by company_name LIMIT $start, $limit";

  $result = mysql_query($sql);

  if ($page == 0) $page = 1;                    
  $prev = $page - 1;                            
  $next = $page + 1;                            
  $lastpage = ceil($total_pages/$limit);        
  $lpm1 = $lastpage - 1;                        

  $pagination = "";
  if($lastpage > 1)
  { 
    $pagination .= "<div class=\"pagination\">";
    //previous button
    if ($page > 1) 
        $pagination.= "<a href=\"$targetpage?page=$prev+searchquery=$q\">� previous</a>";
    else
        $pagination.= "<span class=\"disabled\">� previous</span>"; 

    //pages 
    if ($lastpage < 7 + ($adjacents * 2))   //not enough pages to bother breaking it up
    {   
        for ($counter = 1; $counter <= $lastpage; $counter++)
        {
            if ($counter == $page)
                $pagination.= "<span class=\"current\">$counter</span>";
            else
                $pagination.= "<a href=\"$targetpage?page=$counter+searchquery=$q\">$counter</a>";                  
        }
    }
    elseif($lastpage > 5 + ($adjacents * 2))    //enough pages to hide some
    {
        //close to beginning; only hide later pages
        if($page < 1 + ($adjacents * 2))        
        {
            for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter+searchquery=$q\">$counter</a>";                  
            }
            $pagination.= "...";
            $pagination.= "<a href=\"$targetpage?page=$lpm1+searchquery=$q\">$lpm1</a>";
            $pagination.= "<a href=\"$targetpage?page=$lastpage+searchquery=$q\">$lastpage</a>";        
        }
        //in middle; hide some front and some back
        elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
        {
            $pagination.= "<a href=\"$targetpage?page=1+searchquery=$q\">1</a>";
            $pagination.= "<a href=\"$targetpage?page=2+searchquery=$q\">2</a>";
            $pagination.= "...";
            for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter+searchquery=$q\">$counter</a>";                  
            }
            $pagination.= "...";
            $pagination.= "<a href=\"$targetpage?page=$lpm1+searchquery=$q\">$lpm1</a>";
            $pagination.= "<a href=\"$targetpage?page=$lastpage+searchquery=$q\">$lastpage</a>";        
        }
        //close to end; only hide early pages
        else
        {
            $pagination.= "<a href=\"$targetpage?page=1+searchquery=$q\">1</a>";
            $pagination.= "<a href=\"$targetpage?page=2+searchquery=$q\">2</a>";
            $pagination.= "...";
            for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter+searchquery=$q\">$counter</a>";                  
            }
        }
    }

    //next button
    if ($page < $counter - 1) 
        $pagination.= "<a href=\"$targetpage?page=$next+searchquery=$q\">next �&lt;/a>";
    else
        $pagination.= "<span class=\"disabled\">next �&lt;/span>";
    $pagination.= "</div>\n";       
}
?> 
```

如果您需要更多代码，我可以快速提供！感谢您的任何帮助！

哦，我忘了说我试图通过在所有分页 URL 的末尾添加 +searchquery=$q 来解决这个问题，所以这就是为什么存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:12:46.323

该行：

```
if ($page > 1) 
        $pagination.= "<a href=\"$targetpage?page=$prev+searchquery=$q\">� previous</a>"; 
```

应该：

```
if ($page > 1) 
        $pagination.= "<a href=\"$targetpage?page=$prev&searchquery=$q\">� previous</a>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T23:21:15.277

尝试替换`+searchquery=$q`为`&searchquery=$q`

# heroku - 监控 heroku 实例的工作负载

> ID：10889517
> 
> 赞同：0
> 
> 时间：2012-06-04T22:54:57.097
> 
> 标签：heroku

监控 heroku 实例工作负载的最佳方法是什么（除了`top`），以便您知道何时进行扩展？我宁愿不使用自动缩放程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:13:21.637

跟踪heroku日志（可能使用Papertrail或Loggly等日志插件之一）和New Relic的组合。

# python - 如何使用python将itk图像文件转换为vtk？

> ID：10889519
> 
> 赞同：1
> 
> 时间：2012-06-04T22:55:55.227
> 
> 标签：python, itk

我正在尝试通过 itk 读取一个 nrrd 文件并通过 vtk 显示它。但是我在将itk转换为vtk时遇到了一些麻烦。

```
import itk

file_name = '/home/yao/workspace/test/1.nrrd'
image_type = itk.Image[itk.UC, 2]
reader = itk.ImageFileReader[image_type].New()
reader.SetFileName( file_name )
reader.Update()

itk_vtk_converter = itk.ImageToVTKImageFilter[image_type].New()
itk_vtk_converter.SetInput(reader.GetOutput())
itk_vtk_converter.Update() 
```

我收到了消息

```
Traceback (most recent call last):   File "ex1.py", line 11, in <module>
    itk_vtk_converter = itk.ImageToVTKImageFilter[image_type].New()   File "/usr/lib/InsightToolkit/WrapITK/Python/itkLazy.py", line 14, in
__getattribute__
    value = types.ModuleType.__getattribute__(self, attr) AttributeError: 'LazyITKModule' object has no attribute 'ImageToVTKImageFilter' 
```

我正在使用itk3.20，python2.7。我该如何解决？

问候。

姚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:39:40.073

C++ 过滤器 itk::ImageToVTKImageFilter 未包装，但您可以使用 itk.VTKImageImport 代替。您可以在[http://www.vtk.org/Wiki/VTK/Examples/Python/vtkWithNumpy](http://www.vtk.org/Wiki/VTK/Examples/Python/vtkWithNumpy) VTKImageImport 中查看。您可以使用 itkPyBuffer 将您的 itkImage 转换为 numpy 数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-23T04:12:11.513

使用最新版本的 ITK 4，其中包含这些类的包装器（您必须在 CMake 配置中启用 ITKVtkGlue 模块）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T09:39:18.583

你的代码是正确的。我认为您可能无法在 Python 中正确构建 itk。在我看来，在 Python 中使用 ITK/VTK 最简单的方法是使用 Pythonxy。你可以试试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-06T16:18:33.110

我不知道为什么它不起作用，因为我没有尝试直接从 ITK 到 VTk，但您可以尝试使用此代码。

```
def itkImageToVtk(image):
    arrayData = sitk.GetArrayFromImage(image)
    print arrayData.flags
    arrayDataC = np.array(arrayData[:,:,1], order='C')
    print arrayDataC.flags
    ArrayDicom = numpy_support.numpy_to_vtk(arrayDataC) 
```

它将 2D ITK 图像转换为 2D VTK

# xml - Magento XML $this->getChildHtml() 有必要吗？

> ID：10889523
> 
> 赞同：2
> 
> 时间：2012-06-04T22:56:12.010
> 
> 标签：xml, magento, php

我编辑了以下文件，将时事通讯移动到页脚而不是侧边栏

```
app/design/frontend/base/default/layout/newsletter.xml 
```

我更改了以下代码：

```
<reference name="left">
        <block type="newsletter/subscribe" name="left.newsletter" template="newsletter/subscribe.phtml"/>
    </reference> 
```

至：

```
<reference name="footer"> 
```

为什么我不需要添加

```
$this->getChildHtml('newsletter') 
```

或类似于footer.phtml？我不确定何时使用 getChildHtml() 何时不使用。[本文](http://www.magentocommerce.com/design_guide/articles/intro-to-layouts)练习#2 中的所有步骤都是必需的吗？
谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T01:17:24.207

如果你看一下`page/html/footer.phtml`，这是页脚块的模板

```
<div class="footer-container">
    <div class="footer">
        <?php echo $this->getChildHtml() ?>
        <p class="bugs"><?php echo $this->__('Help Us to Keep Magento Healthy') ?> - <a href="http://www.magentocommerce.com/bug-tracking" onclick="this.target='_blank'"><strong><?php echo $this->__('Report All Bugs') ?></strong></a> <?php echo $this->__('(ver. %s)', Mage::getVersion()) ?></p>
        <address><?php echo $this->getCopyright() ?></address>
    </div>
</div> 
```

您可以看到他们使用以下 PHP 来输出子块

```
<?php echo $this->getChildHtml() ?> 
```

当`getChildHtml`不带参数调用时，它将输出已添加的**任何块。**这就是为什么您不需要包含自己的调用`$this->getChildHtml('newsletter')`

# r - 根据行中的 NA 在数据框中选择列

> ID：10889524
> 
> 赞同：2
> 
> 时间：2012-06-04T22:56:13.483
> 
> 标签：r, hierarchy, na

假设我有一个 7 列的数据框，其中一些行有 7 个值，而另一些行的 NA 超过了某个点。我想获取不是 NA 的最后一个值（从左到右），然后直接获取左侧的值。它是分层数据，但有些组比其他组更深入。我想要新数据框中两列中最深和第二深的组。

这段代码有效，但会最大限度地利用我对 46K 观察数据帧的记忆。有没有我没有想到的更有效的方法？

```
df <- data.frame(LEVEL1 = c('animal', 'vegetable', 'mineral'),
                 LEVEL2 = c('mammal', 'pepper', 'rock'),
                 LEVEL3 = c('dog', 'jalepeno', NA),
                 LEVEL4 = c('westie', NA, NA))

deepest <- apply(df, 1, 
                  function(x) length(which(!is.na(x))))
one.up <- apply(df, 1, 
                    function(x) length(which(!is.na(x)))-1)
len <- nrow(df)
output <- data.frame(one.up = unlist(sapply(1:len, 
                            function(x) df[x, one.up[x]])),
                     deepest= unlist(sapply(1:len, 
                                            function(x) df[x, deepest[x]]))) 
```

第一次发帖。通常我可以从这个站点拼凑出我需要的东西。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T23:11:13.750

`apply`我认为您可以通过一个简单的调用来保存两次运行该循环，例如：

```
> apply(df, 1, function(x) {
+     n <- max(which(!is.na(x)))
+     x[(n-1):n]
+ })
     [,1]     [,2]       [,3]     
[1,] "dog"    "pepper"   "mineral"
[2,] "westie" "jalepeno" "rock" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T23:15:57.797

如果 NA 可能散布在行的长度中（尽管您说这不应该发生），我不确定您的代码是否会提供您认为应该的内容。此代码将在第一个 NA 之前停止并返回两个先前的值。

```
> output.m <- apply(df,1,function(x) { leng.na <-rle(is.na(x))$lengths[1]
                                       tail(x[1:leng.na],2) }  )
> output.d <- as.data.frame(t(output.m))
> output.d
       V1       V2
1     dog   westie
2  pepper jalepeno
3 mineral     rock 
```

# mysql - 有效地将 csv 文件加载到 MySQL 表中

> ID：10889525
> 
> 赞同：2
> 
> 时间：2012-06-04T22:56:15.803
> 
> 标签：mysql

我加载文件的当前方式是：

```
 load data local infile 'file_name' into table tableA  
fields terminated by ',' enclosed by '"' lines terminated by '\n'; 
```

是在 unix 机器中加载表的最佳方式。它是否创建了最佳的表大小？我想要一张占用空间最小的桌子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T23:02:54.653

# MyISAM

如果表是 MyISAM，您应该执行以下操作：

```
set bulk_insert_buffer_size = 1024 * 1024 * 256;
alter table tableA disable keys;
load data local infile 'file_name' into table tableA  
fields terminated by ',' enclosed by '"' lines terminated by '\n';
alter table tableA enable keys; 
```

# InnoDB

如果表是 InnoDB，您应该执行以下操作：

```
set bulk_insert_buffer_size = 1024 * 1024 * 256;
load data local infile 'file_name' into table tableA  
fields terminated by ',' enclosed by '"' lines terminated by '\n'; 
```

这不仅会占用最少的空间（加载一个空表），而且这些行将根据[**bulk_insert_buffer_size**](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_bulk_insert_buffer_size)缓存在内存中的树状结构中，以便在重新加载期间更快地缓存数据。

如果您担心 ibdata1 爆炸，则需要将所有 InnoDB 表转换为使用[**innodb_file_per_table**](http://dev.mysql.com/doc/refman/5.5/en/innodb-parameters.html#sysvar_innodb_file_per_table)。请使用我的 InnoDB 清理步骤：[Howto: Clean a mysql InnoDB storage engine?](https://stackoverflow.com/questions/3927690/howto-clean-a-mysql-innodb-storage-engine/4056261#4056261)

# .htaccess - 在子目录中复制的 Codeigniter 站点不显示单个页面

> ID：10889532
> 
> 赞同：0
> 
> 时间：2012-06-04T22:57:46.783
> 
> 标签：.htaccess, codeigniter, url, redirect, subdirectory

我们刚刚将 Codeigniter 网站（从我们的根域）复制到同一根域的子目录中（所有 config.php 更改和一个新数据库等）。但是，页面链接不会显示单个页面，但浏览器只是重新加载 index.php 页面内容（就像它正在加载新页面一样）并将浏览器窗口中的 URL 更改为正确的页面。

这真的很奇怪，我已经花了好几个小时来研究它，所以我希望这里的某个人可以给我一个起始搜索点。

供您参考，子目录中的 .htaccess 是：

`RewriteEngine on
RewriteRule ^test.php$ mod_rewrite.php
RewriteCond $1 !^(index\.php|resources|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:28:13.793

如果现在在以前位于根目录的子目录中安装了新的 codeigniter，则需要在 htaccess 的 index.php 部分前面包含子目录的名称

像这样（更改在最后一行）：

```
RewriteEngine on

RewriteRule ^$ /dev/index.php [L]
RewriteCond $1 !^(index\.php|images|css|js|robots\.txt|favicon\.ico|zip\.php|resources)
RewriteRule ^(.*)$ /dev/index.php?/$1 [L] 
```

dev 应更改为您的子目录的名称。另外，如果这些都不起作用，并且您的根目录上有一个 htaccess，它可能会影响这个子目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:05:20.733

经过许多不同的尝试后，现在对它进行了排序！

**root -> application -> config**`config.php` （第 46 行）中的文件最初是： **`$config['uri_protocol'] = ($_SERVER['SERVER_ADDR'] == '127.0.0.1') ? 'AUTO' : 'ORIG_PATH_INFO';`**

 **它应该是：
`$config['uri_protocol'] = ($_SERVER['SERVER_ADDR'] == '127.0.0.1') ? 'AUTO' : 'PATH_INFO';`

现在一切正常。**

# iphone - iOS 模拟器应用程序的进程名称

> ID：10889540
> 
> 赞同：2
> 
> 时间：2012-06-04T22:58:30.003
> 
> 标签：iphone, ios, xcode, memory-management, ios-simulator

我想看看一些标准 iPhone 应用程序在 iOS 模拟器中运行时的内存占用情况（用于比较目的）。

有谁知道这些过程在活动监视器中显示的内容是什么？我说的是设置应用程序、联系人应用程序、照片应用程序等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:19:27.593

模拟器应用程序不会在活动监视器中显示为进程。您应该看到的唯一进程是**iOS Simulator**。

![在此处输入图像描述](../Images/c57a0c9a6df493b70ccee0d1309f4f53.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T23:15:16.527

通常进程名称是您的应用程序的名称

# ios - 获取视图控制器的类名作为字符串

> ID：10889543
> 
> 赞同：27
> 
> 时间：2012-06-04T22:58:50.177
> 
> 标签：ios, objective-c, cocoa-touch, introspection

如果我有一个`UIViewController`子类，我怎样才能得到类名作为字符串？我试过做`[vc class]`，但这会返回一个`Class`对象，而不是`NSString`.

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-04T23:09:57.057

> # [NSStringFromClass](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Functions/index.html#//apple_ref/c/func/NSStringFromClass)
> 
> 以字符串形式返回类的名称。
> 
> ```
> NSString * NSStringFromClass (  
>     Class aClass  
> ); 
> ```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-01-06T06:35:27.870

你可以做这样的事情

```
NSString *strClass = NSStringFromClass([viewController class]); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-05T00:53:03.347

实例化对象时，您可以执行以下操作：

```
[[NSClassFromString(@"className1") alloc] init]; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-04T23:06:29.963

使用功能：

```
const char * class_getName(Class cls) 
```

作为

```
class_getName ([vc class]); 
```

# php - Google Checkout 访问商家计算回调

> ID：10889551
> 
> 赞同：0
> 
> 时间：2012-06-04T22:59:31.433
> 
> 标签：php, xml, google-checkout

我正在使用 XML api 将 Google Checkout 服务实施到我的网络服务中。我有购物车请求和所有这些设置，并且正在使用 Merchant Calculations api 进行运输（我的服务进行运输计算）

我很难弄清楚如何访问发送到我的服务器的响应以及订单的买家地址/其他个人数据并确定他们的运输请求。

是在标头中发送吗？作为 POSTS 值？得到？我如何访问它。

我正在使用 PHP 进行开发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T22:08:17.613

商家计算请求在 HTTP POST 的正文中采用 XML 格式。

以下一些有用的链接：

商家计算请求/响应的格式： [https ://developers.google.com/checkout/developer/Google_Checkout_XML_API#merchant_calculations_api](https://developers.google.com/checkout/developer/Google_Checkout_XML_API#merchant_calculations_api)

[https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Merchant_Calculations_API#Handling_Merchant_Calculation_Callbacks](https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Merchant_Calculations_API#Handling_Merchant_Calculation_Callbacks)

如何配置 Web 服务以响应回调： http: [//support.google.com/checkout/sell/bin/answer.py ?hl=en-GB&answer=70647](http://support.google.com/checkout/sell/bin/answer.py?hl=en-GB&answer=70647)

PHP 库 - 查看[responsehandlerdemo.php](http://code.google.com/p/google-checkout-php-sample-code/source/browse/trunk/demo/responsehandlerdemo.php)，它显示了如何解析和响应商家计算请求：

[http://code.google.com/p/google-checkout-php-sample-code/](http://code.google.com/p/google-checkout-php-sample-code/)

# android - Android eclipse - 使框随着文本的大小增加

> ID：10889554
> 
> 赞同：0
> 
> 时间：2012-06-04T22:59:59.537
> 
> 标签：android, android-layout

我在 Eclipse 代码中显示以下规则。这条规则主要适用于所有类型的手机。但我的问题是，如果文本更大，就像在这种情况下，它会环绕在框内。有什么方法可以随着文本的增加自动使框变大？

```
TextView rule1

   //Add Rule 1
            rule1=new ImageView(this);      
            rule1.setBackgroundResource(R.drawable.rules);
            if(w<340)
             {
                layout_params=new RelativeLayout.LayoutParams(width(310), height(44));
                layout_params.leftMargin=width(5);
                layout_params.topMargin=height(30);         
             }else if(w<=500)
             {          
                layout_params=new RelativeLayout.LayoutParams(width(469), height(64));              
                layout_params.topMargin=height(40); 
                layout_params.leftMargin=width(6); 
             }else
             {
                layout_params=new RelativeLayout.LayoutParams(width(774), height(92));
                layout_params.leftMargin=width(13); 
                layout_params.topMargin=height(60);
             }  
            list_layout.addView(rule1, layout_params);

            icon6=new ImageView(this);      
         icon6.setBackgroundResource(R.drawable.leader);
            if(w<340)
             {
                layout_params=new RelativeLayout.LayoutParams(width(31), height(33));
                layout_params.leftMargin=width(12);
                layout_params.topMargin=height(39);         
             }else if(w<=500)
             {          
                layout_params=new RelativeLayout.LayoutParams(width(43), height(44));           
                layout_params.topMargin=height(52); 
                layout_params.leftMargin=width(18); 
             }else
             {
                layout_params=new RelativeLayout.LayoutParams(width(57), height(60));
                layout_params.leftMargin=width(30); 
                layout_params.topMargin=height(78);
             }  
            list_layout.addView(icon6, layout_params);

            rule1 = new TextView(this);
                rule1.setText("AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA");
            rule1.setTextColor(Color.WHITE);
            rule1.setTextSize(18);      
            rule1.setGravity(Gravity.LEFT);
            typeFace=Typeface.createFromAsset(getAssets(), "fonts/HelveticaLTStd-Bold.otf");
            rule1.setTypeface(typeFace);
            if(w<340)
            {
                rule1.setTextSize(16);  
                layout_params=new RelativeLayout.LayoutParams(width(252), height(30));
                layout_params.leftMargin=width(40);
                layout_params.topMargin=height(39);         
            }else if(w<=500)
            {           
                layout_params=new RelativeLayout.LayoutParams(width(378), height(40));
                layout_params.leftMargin=width(72);
                layout_params.topMargin=height(52);             
            }else
            {
                layout_params=new RelativeLayout.LayoutParams(width(630), height(60));
                layout_params.leftMargin=width(120);
                layout_params.topMargin=height(78);                         
            }   
            rule1.setLayoutParams(layout_params);
            list_layout.addView(rule1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T00:16:53.960

我想你想要的就`WRAP_CONTENT`在你的身上

```
RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, 150); 
```

如果您愿意，也可以设置`TextView`为`singleLine`：

```
TextView.setSingleLine(true); 
```

# c++ - 父级恢复时 Qt::Tool 出现太快

> ID：10889556
> 
> 赞同：0
> 
> 时间：2012-06-04T23:00:05.940
> 
> 标签：c++, windows, qt, user-interface

我有一个 qt 应用程序，带有几个子小部件的窗口是 Qt::Tool 窗口。

当我最小化窗口然后在 Windows 7 上恢复时，子小部件会立即出现，但父窗口不是因为动画。

有什么办法可以防止这种行为并使子窗口出现在主窗口之后？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:22:28.870

为什么不在主窗口恢复时隐藏工具窗口？您可以使用这段代码并使其适应您的需求：

```
void MainWindow::changeEvent( QEvent* e )
{
  if ( e->type() == QEvent::WindowStateChange )
  {
    QWindowStateChangeEvent* event = 
        static_cast< QWindowStateChangeEvent* >( e );
    if ( event->oldState() & Qt::WindowMinimized ) {
      qDebug() << "The Window has been restored!";
    }
    else if ( (event->oldState() == Qt::WindowNoState) && 
              (this->windowState() == Qt::WindowMaximized) ) {
      qDebug() << "the window has been Maximized!";
    }
  }
} 
```

例如，您可以启动一个计时器一段时间，并将插槽连接到您的子工具窗口，使它们按您的意愿显示。

您还可以在子工具窗口中使用透明度，并模拟主窗口效果。

我记得，这样的事情会做：

```
setStyleSheet("background:transparent;");
setAttribute(Qt::WA_TranslucentBackground);
setWindowFlags(Qt::FramelessWindowHint); 
```

希望有帮助！

# python - 在芹菜中如何获得队列中的任务位置？

> ID：10889557
> 
> 赞同：1
> 
> 时间：2012-06-04T23:00:11.003
> 
> 标签：python, redis, celery, django-celery, djcelery

我使用 Celery 和 Redis 作为代理，我可以看到队列实际上是一个以序列化任务作为项目的 redis 列表。

我的问题是，如果我有一个 AsyncResult 对象作为调用的结果`<task>.delay()`，有没有办法确定该项目在队列中的位置？

**更新：**

我终于能够使用以下方法获得该职位：

```
from celery.task.control import inspect
i = inspect()
i.reserved() 
```

但它有点慢，因为它需要与所有工人沟通。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-05T10:17:54.243

您提到的`inspect.reserved()/scheduled()`可能有效，但并不总是准确的，因为它只考虑了工作人员预取的任务。

Celery 不允许对队列进行带外操作，例如从队列中删除消息或重新排序它们，因为它不会在分布式系统中扩展。消息可能还没有到达队列，这可能导致竞争条件，实际上它不是具有事务操作的顺序队列，而是来自多个位置的消息流。也就是说，Celery API 基于严格的消息传递语义。

可以直接在 Celery 支持的一些代理（如 Redis 或数据库）上访问队列，但这不是公共 API 的一部分，不鼓励您这样做，但当然如果您不打算支持大规模操作你应该做任何对你来说最方便的事情，并放弃我的建议。

如果这只是为了让用户知道他的工作何时完成，那么我相信你可以想出一个算法来预测何时执行任务，如果你只有队列的长度和时间插入每个任务的位置。

第一个只是 a `redis.len("celery")`，而后者您可以通过收听`task_sent`信号来添加自己：

```
from celery.signals import task_sent

@task_sent.connect
def record_insertion_time(id, **kwargs):
   redis.zadd("celery.insertion_times", id) 
```

在此处使用排序集：[http ://redis.io/commands/zadd](http://redis.io/commands/zadd)

对于纯消息传递解决方案，您可以使用专用监视器来使用 Celery 事件流并预测任务何时完成。 [http://docs.celeryproject.org/en/latest/userguide/monitoring.html#event-reference](http://docs.celeryproject.org/en/latest/userguide/monitoring.html#event-reference)

（刚刚注意到发送的任务缺少文档中的时间戳字段，但时间戳随该事件一起发送，因此我将修复它）。

事件还包含一个“时钟”字段，它是一个逻辑时钟（参见[http://en.wikipedia.org/wiki/Lamport_timestamps](http://en.wikipedia.org/wiki/Lamport_timestamps)），这可用于检测分布式系统中事件的顺序，而不依赖于系统每台机器上的时间同步（这是不可能实现的）。

# php - 如何与没有安装应用程序的测试用户成为朋友？

> ID：10889562
> 
> 赞同：0
> 
> 时间：2012-06-04T23:00:55.713
> 
> 标签：php, facebook

使用 Facebook 开发人员网站编辑测试用户的角色，我可以使用两个测试用户交朋友，一个安装了应用程序，一个没有安装应用程序。

我使用图形 API 创建了两个 Facebook 测试用户。如果两个用户都安装了应用程序，我可以使用图形 API 和用户的访问令牌在他们之间建立朋友联系。如果我创建一个安装了应用程序的测试用户和一个没有安装应用程序的测试用户，那么没有安装应用程序的用户没有用户访问令牌。如果这两个用户都没有访问令牌，我如何以编程方式与他们交朋友？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T23:07:04.220

要使 API 正常工作，您需要为每个测试用户提供一个访问令牌。

请参阅[http://developers.facebook.com/docs/test_users/](http://developers.facebook.com/docs/test_users/)

> **建立朋友联系**
> 
> 您可以使用 API 为测试用户与该应用的其他测试用户建立朋友联系。我们提供了用于创建好友请求以及接受好友请求的 API。这使开发人员能够通过 API 本身在测试用户之间创建多个朋友连接，而无需以测试用户身份登录来接受请求。
> 
> **API**
> 
> [https://graph.facebook.com/TEST_USER_1_ID/friends/TEST_USER_2_ID](https://graph.facebook.com/TEST_USER_1_ID/friends/TEST_USER_2_ID)？
> 方法=发布 &access_token=TEST_USER_1_ACCESS_TOKEN
> 
> [https://graph.facebook.com/TEST_USER_2_ID/friends/TEST_USER_1_ID](https://graph.facebook.com/TEST_USER_2_ID/friends/TEST_USER_1_ID)？
> 方法=发布 &access_token=TEST_USER_2_ACCESS_TOKEN
> 
> ```
> The first call should be made with access token of TEST_USER_1_ID. This will creates a friend request from TEST_USER_1_ID to 
> ```
> 
> TEST_USER_2_ID。第二次调用应使用 TEST_USER_2_ID 的访问令牌进行，并将确认请求。
> 
> 响应：成功为真，否则为假

# java - EJB 3.1 @LocalBean 与无注释

> ID：10889563
> 
> 赞同：78
> 
> 时间：2012-06-04T23:00:56.137
> 
> 标签：java, jakarta-ee, ejb

我了解本地视图、远程视图和无界面视图之间的区别。我只是不明白“无视图”（无注释）和无界面视图有什么区别。还有为什么我应该用 注释我的界面`@Local`？如果我根本不注释界面怎么办，有什么区别吗？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-06-05T11:22:45.507

规则是（根据记忆）：

1.  Bean 有一个`@LocalBean`注解 -> bean 有一个无接口视图
2.  Bean 有一个`@Local`注解 -> bean 有一个本地视图
3.  Bean 有一个`@Remote`注解 -> bean 有一个远程视图
4.  Bean没有视图注解，而是直接实现了一个带有@Local注解的接口-> bean有一个本地视图
5.  Bean没有视图注解，但是直接实现了一个带有@Remote注解的接口-> bean有一个远程视图
6.  Bean没有视图注解，而是直接实现了一个没有视图注解的接口-> bean有本地视图
7.  Bean 没有视图注解，并且没有实现接口 -> bean 没有接口视图

因此，使用`@LocalBean`和不使用注释都是获得无界面视图的两种方式。如果你只是想要一个无界面的视图，那么最简单的事情就是不要注释。前提是您还没有实现任何接口。

部分原因`@LocalBean`是将无接口视图添加到也具有接口视图的 bean 中。我想在规范作者的脑海中最重要的场景是你有一个像这样的bean：

```
@Stateless
public class UserPreferences {
    public String getPreference(String preferenceName);
    public Map<String, String> getPreferences();
} 
```

`getPreferences()`您希望在本地公开这两种方法，但只在远程公开粗粒度的方法。您可以通过仅使用该方法声明一个远程接口来做到这一点，然后只需`@LocalBean`对 bean 类进行操作即可。没有它，您必须编写一个毫无意义的本地接口才能在本地公开这两种方法。

或者，以另一种方式看待它，`@LocalBean`因为存在诸如无界面视图之类的东西，并且无注释选项作为一种方便的快捷方式而存在。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-04T23:12:55.700

*   远程 EJB：可以从远程客户端访问（运行在不同 JVM 上的客户端，例如在用户机器上运行的 Swing 或 JavaFX 客户端）
*   本地 EJB：只能从运行在同一 JVM 上的其他“组件”访问，例如 Web 前端、其他 EJB
*   无接口视图：与本地相同，但不指定业务接口
*   没有注释：一个简单的 POJO 但不是 EJB

本地/无接口视图比远程 EJB 更有效，因为可以传递对象引用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-05T10:34:03.273

我认为您/我们感到的困惑是历史/向后兼容性（可以这么说）的结果。我无法区分任何区别（除了规范需要实现来创建接口，如果我们使用本地视图）

> 无接口视图具有与 EJB 3.0 本地视图相同的行为，例如，它支持传递引用调用语义以及事务和安全传播等特性。但是，无接口视图不需要单独的接口，即 bean 类的所有公共方法都会自动暴露给调用者。默认情况下，任何具有空 implements 子句且未定义任何其他本地或远程客户端视图的会话 bean 都会公开无接口客户端视图。

[发布 EJB 3.1 之前的 Oracle 博客](https://blogs.oracle.com/enterprisetechtips/entry/a_sampling_of_ejb_3)

# python - 使用一组匹配多个子字符串的正则表达式？

> ID：10889564
> 
> 赞同：3
> 
> 时间：2012-06-04T23:01:04.770
> 
> 标签：python, regex

我正在尝试使用 Python 中的 RegEx 解析具有未知数量元素的字符串。这是示例：

```
>>>> import re
>>>> re.match("\=( A([0-9]+))*", "= A1 A2 A3 A4").groups()[1::2]
('4',) 
```

我希望有：

```
('1', '2', '3', '4',) 
```

我怎样才能得到预期的结果？

**编辑：**

`re.findall`对我不起作用。让我举一个更好的例子：

我想匹配以下字符串：

```
_func(cmd, param1, param2, param3, param4)_ 
```

我事先不知道参数的数量。我希望使用以下代码解决它：

```
>>> re.match("(\w+)\(cmd(, (\w+))*\)", "func(cmd, param1, param2, param3, param4)") 
```

但这不起作用，因为组`()*`没有扩展到许多项目，而只使用了最后一个。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T23:06:38.247

```
pat = re.compile(r' A(\d+)')
lst = re.findall(pat, "= A1 A2 A3 A4") 
```

这将返回一个列表，在您的示例中，您显示了一个元组。我想一个列表对你有用，但当然你总是可以这样做：

```
t = tuple(lst) 
```

我刚刚给出的答案实际上并没有检查`=`输入字符串中的 。如果你需要这样做，你总是可以使用两种模式和两个步骤：

```
pat0 = re.compile(r'=(?: A\d+)+')
pat1 = re.compile(r' A(\d+)')

m = pat0.search("= A1 A2 A3 A4")
if not m:
    print("input string not what was expected")
else:
    s = m.group(0)
    lst = re.findall(pat, s) 
```

编辑：处理您的`func()`示例的代码：

```
s_code = "func(cmd, param1, param2, param3, param4)"
pat_recognize_args = re.compile(r'func\(cmd([^)]*)\)')
pat_parse_args = re.compile(r'[, ]+([^, ]+)')

m = pat_recognize_args.search(s_code)
if m:
    s = m.group(1)
    lst = re.findall(pat_parse_args, s) 
```

当我运行上面的代码时，`lst`设置为：`['param1', 'param2', 'param3', 'param4']`

`pat_recognize_args`查找`func`带有文字的文字字符串`(`（在模式中以反斜杠转义，因此`re`不会尝试使用它来启动匹配组），然后是文字 string `cmd`，然后是匹配任何文字`)`字符的匹配组; 然后匹配组用 a 关闭，`)`并且有一个文字`)`来匹配`)`完成函数调用的实际值。在此模式匹配后，匹配对象将组 1 设置为仅来自函数调用的有趣参数。

所以接下来我们设置`s = m.group(1)`然后`re.findall()`为我们提取参数。

# sqlite - SQLite 中的嵌套更新查询

> ID：10889565
> 
> 赞同：0
> 
> 时间：2012-06-04T23:01:05.667
> 
> 标签：sqlite

我正在尝试使用应用程序 SQLiteman 基于 SQLite3 中同一表上的连接更新一系列记录，我似乎无法获得正确的语法，并且我尝试了多种方法。更新查询的最新迭代如下

```
Update
 workcodes wc2
Set
 wc2.SubCodeOf = wc1.ID
From
 workcodes wc1
 inner join
 workcodes wc2 on
 wc1.JemenaWC=wc2.WorkCode 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:33:43.603

我想你想尝试类似子选择的东西：

```
UPDATE
    workcodes wc2
SET
    wc2.SubCodeOf = ( 
        SELECT wc1.ID 
        FROM workcodes wc1 
        WHERE wc1.JemenaWC = wc2.WorkCode ) 
```

# ios - 仅两行 UITableView

> ID：10889567
> 
> 赞同：2
> 
> 时间：2012-06-04T23:01:25.987
> 
> 标签：ios, uitableview

我在带有一个部分的 Nib 上使用 UITableView 控件，并将委托/数据源设置为我的控制器，其中“表数据”数组仅初始化为 2 个项目。**但是，在模拟器中运行时，我看到表视图中呈现了额外的空行。**如何让 UITableView 只呈现两行？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:30:42.683

我遇到了类似的问题，如何仅显示包含数据的单元格的分隔符。tableView 呈现尽可能多的行，以适应分配给它的区域（宽度和高度）。您指定的号码`numberOfRowsInSection`仅用于确定它应该调用多少次`cellForRowAtIndexPath`。

为了克服空单元格分隔线的渲染，我执行了以下操作：

1.  禁用整个 tableView 的分隔符。您可以在 Interface builder 中的 tableview 的检查器中执行此操作，或者通过调用`[yourTableView setSeparatorStyle:UITableViewCellSeparatorStyleNone];`.

2.  在您`cellForRowAtIndexPath`使用单元格填充表格视图的地方创建一个新的`UIView`并将其设置为单元格的子视图。使此视图的背景为浅灰色且略微透明。您可以通过以下方式做到这一点：

    ```
    UIView *separatorView = [[UIView alloc] initWithFrame:CGRectMake:
                                    (0, cell.frame.size.height-1, 
                                       cell.frame.size.width, 1)];
    [separatorView setBackgroundColor:[UIColor lightGrayColor]];
    [separatorView setAlpha:0.8f];
    [cell addSubView:separatorView]; 
    ```

    此视图的宽度为 1 像素，与默认分隔符相同，它在底部运行单元格的长度。

由于 cellForRowAtIndexPath 只在 numberOfRowsInSection 中指定的频率被调用，这些子视图只会为拥有数据并应该有分隔符的单元格创建。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T23:04:01.770

您需要确保您使用的数组算作该部分中的单元格数。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [myArray count];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T08:55:38.700

放

```
urtableview.frame=(x,y,width,[rowheight * num of rows]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-26T07:51:26.133

添加一个空的uiview作为tableview的底视图

`tabelview.tableFooterView = UIView()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-17T12:37:28.140

如果您不需要节或页脚，请给表格一个空页脚。

在 viewDidLoad 添加

```
tableView.tableFooterView = [[UIView alloc] initWithFrame:CGRectZero]; 
```

请参阅[如何删除 UITableView 中的空单元格？](https://stackoverflow.com/questions/14520185/how-to-remove-empty-cells-in-uitableview)

另一种方法是返回一个空的页脚视图。如果您需要上一节的页脚，这将特别有用。

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section {
    return [[UIView alloc] initWithFrame:CGRectZero];
} 
```

最后，这是另一个链接，其中包含实现此目的的其他方法。

[消除 UITableView 下面多余的分隔符](https://stackoverflow.com/questions/1369831/eliminate-extra-separators-below-uitableview-in-iphone-sdk)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-04T23:45:19.087

您可以将表格视图框架的大小减小为 2*cellHeight。

或者任何必要的高度。所以说每个单元格的高度是 44 像素，而你只有一个部分，所以没有部分标题，你会这样做：

```
self.tableView = [[UITableView alloc] 
  initWithFrame:CGRectMake(x-coord, y-coord, width, 88) 
  style:UITableViewStylePlain]; 
```

这应该只显示 2 个单元格，假设每个单元格的高度为 44 像素。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-04T23:50:32.397

您可以从 viewDidLoad 调用此方法：

```
- (void) addFooter
{
 UIView *v = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 10)];
 v.backgroundColor = [UIColor clearColor];
 [self.tableView setTableFooterView:v];
} 
```

# javascript - 没有结果怎么清除

> ID：10889572
> 
> 赞同：0
> 
> 时间：2012-06-04T23:02:45.463
> 
> 标签：javascript, jquery

我有一张地图。每当我点击声明时，它就会拉起分销商并出现。但是，如果数据库中没有结果，则会将前一个结果留在页面上。我想要的是，如果该特定状态没有结果，我希望它使容器为空。我该怎么做？

```
$(document).ready(function() {
    $("#SC").click(function() {
        if ($("div.SC_info").is(":hidden")) {
            $("#repinfo_container div.info_cont").removeClass("active");
            $("#repinfo_container div.info_cont").addClass("inactive");
            $("div.SC_info").slideDown("fast");
            $("div.SC_info").removeClass("inactive");
            $("div.SC_info").addClass("active");
            $("div.inactive").slideUp("fast");
        } else {}
    });
});​ 
```

更多细节看这张照片。[http://i.imgur.com/vozKp.png](http://i.imgur.com/vozKp.png)这是一个交互式分布图。问题是例如在我有 CA（加利福尼亚）的结果（分销商）的数据库中。当我单击它时，它会拉起并显示在底部。但是，如果我单击 LA(state)，因为没有结果，它会显示先前单击状态的结果。我想要的是，如果我对此状态没有任何结果，我希望它显示该容器而不是显示先前的结果。我希望现在它更有意义。

这是整个页面的源代码

pastebin.com/mxyDpZCx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:05:06.390

> 我想要的是，如果该特定状态没有结果，我希望它使容器为空。

```
$("#repinfo_container").empty(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T23:05:51.897

你可以做：

```
$(selector).html(''); 
```

小费：

您应该缓存您的选择以获得更好的性能，例如，而不是这样：

```
$("div.SC_info").slideDown("fast");
$("div.SC_info").removeClass("inactive");       
$("div.SC_info").addClass("active"); 
```

你可以有这个：

```
var selection = $("div.SC_info");
selection.slideDown("fast");
selection.removeClass("inactive");       
selection.addClass("active"); 
```

这样，您选择元素一次并在选择上进行操作，而不是选择它们三次。

# iphone - 带有 $ 符号的自定义数字键盘

> ID：10889578
> 
> 赞同：2
> 
> 时间：2012-06-04T23:03:19.057
> 
> 标签：iphone, xcode, xcode4

好的，所以我有一个自定义数字键盘，它可以在标签（numberField）中显示数字为 0.00，现在我需要它显示 0.00 美元。

```
NSString *digit = sender.currentTitle;
numberField.text = [numberField.text stringByAppendingString:digit];

NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
[numberFormatter setGroupingSeparator:@""];
[numberFormatter setMaximumIntegerDigits:4];
[numberFormatter setMaximumFractionDigits:2];
[numberFormatter setMaximumFractionDigits:2];

numberField.text = [numberField.text stringByReplacingOccurrencesOfString:@"." withString:@""];
NSDecimalNumber *currency = [[NSDecimalNumber decimalNumberWithString:numberField.text] decimalNumberByDividingBy: [NSDecimalNumber decimalNumberWithString:@"100"]];
NSString *numberFieldFormat = [numberFormatter stringFromNumber:currency];
numberField.text = numberFieldFormat; 
```

我尝试了 $%1.2f 但它崩溃了，因为它无法将 $ 符号识别为数字。有人可以帮我吗？或者有更好的方法来制作带有 $ 符号的自定义垫？

**编辑我正在考虑将 numberField 设置为隐藏标签（alpha 0）并将副本（numberField2）直接放在顶部并通过 stringWithFormat 运行它。它有效，但我认为可能有一种更清洁的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T23:40:33.247

你不希望它显示`$0.00`。如果我在英国怎么办？那我不希望它显示`£0.00`吗？

看起来你错误地使用了`NSNumberFormatter`. 以下是您为货币设置数字格式的方法：

```
NSNumberFormatter *f = [[NSNumberFormatter alloc] init];
[f setNumberStyle:NSNumberFormatterCurrencyStyle];
NSString *string = [f stringFromNumber:[NSNumber numberWithFloat:1234.56]];
[f release]; 
```

无论您的语言环境如何，这都会正确格式化。它将使用正确的货币符号、正确的千位分隔符和正确的小数分隔符。尝试自己重新创建此功能是一个 Bad Idea™。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T23:09:11.100

试试这个：

```
NSString *digit = sender.currentTitle;
numberField.text = [numberField.text stringByAppendingString:digit];

NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
[numberFormatter setGrouping Separator:@""];
[numberFormatter setMaximumIntegerDigits:4];
[numberFormatter setMaximumFractionDigits:2];
[numberFormatter setMaximumFractionDigits:2];

numberField.text = [numberField.text stringByReplacingOccurrencesOfString:@"." withString:@""];
numberField.text = [numberField.text stringByReplacingOccurrencesOfString:@"$" withString:@""];
NSDecimalNumber *currency = [[NSDecimalNumber decimalNumberWithString:numberField.text] decimalNumberByDividingBy: [NSDecimalNumber decimalNumberWithString:@"100"]];
NSString *numberFieldFormat = [numberFormatter stringFromNumber:currency];
numberField.text = [NSString stringWithFormat:@"$%@", numberFieldFormat]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T23:31:55.490

据我了解，您只想将 $ 附加到您的字符串中。你可以做这样的事情..

```
....

NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
[numberFormatter setGrouping Separator:@""];
[numberFormatter setMaximumIntegerDigits:4];
[numberFormatter setMaximumFractionDigits:2];
[numberFormatter setMaximumFractionDigits:2];

NSDecimalNumber *currency = [[NSDecimalNumber decimalNumberWithString:numberField.text]      decimalNumberByDividingBy: [NSDecimalNumber decimalNumberWithString:@"100"]];

NSString *formatted = [[currency stringValue] stringByReplacingOccurrencesOfString:[currency stringValue] withString:[NSString stringWithFormat:@"$%@",[currency stringValue]]];

  NSLog(@"%@", formatted); // Prints $0.00 
```

还是我误解了你的问题？

# php - 在javascript中修复不正确转义的字符串

> ID：10889581
> 
> 赞同：1
> 
> 时间：2012-06-04T23:03:57.997
> 
> 标签：php, android, ios, json, mootools

我正在连接到以 JSON 格式返回图像 URL 的 PHP Web 服务（使用 PHP`json_encode`函数）。

我在 mootools 1.2.5 系统中工作，该系统也需要在手机上工作。

数据中返回的图像节点的格式是这样的：

```
"thumb": "<img src=\"http://photos.imgserv.com/201107222000000.jpg\"  />" 
```

出于某种原因，当我将 response.JSON 传递给它们时，iphone 和 android 会看到一个 NULL 值。我可以毫无问题地将 response.text 对象传递给他们，但是 JSON.decode 失败，因为双引号没有正确转义。如果我像这样在图像标签上手动添加双反斜杠：

```
"thumb": "<img src=\\"http://photos.imgserv.com/201107222000000.jpg\\"  />" 
```

这一切都按设计工作。但是，我很难找到正确的正则表达式来替换`\"`原始 response.text 中的`\\"`.

是否有一种“正确”的方式来处理手机的 response.JSON，或者如何正确编写 string.replace() 正则表达式来处理这些转义字符？

谢谢！

编辑添加：

这是两个带有单反斜杠和双反斜杠的 jsfiddles 来显示问题：

单反斜杠（不正确解码/解析）-- [http://jsfiddle.net/Qde6F/](http://jsfiddle.net/Qde6F/) 双反斜杠（正确解码/解析）-- [http://jsfiddle.net/Qde6F/1/](http://jsfiddle.net/Qde6F/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T00:04:36.810

你有没有尝试过这样的事情......

```
var src = "\"thumb\": \"<img src=\\\"http://photos.imgserv.com/201107222000000.jpg\\\"  />\"";
alert(src);
var dest = src.replace("\\\"","\\\\\"");
alert(dest); 
```

即，替换表达式是`replace("\\\"","\\\\\"")`，替换`\"`为`\\"`

好的，这在 jsfiddler 中对我有用

```
var text = '[{"thumb": "<img src=\"http://photos.imgserv.com/201107222000000.jpg\"  />" }]';

console.dir(text);
var dest = text.replace(/(src=)(\")([^"]+)(\")/g,"$1\\\"$3\\\"");
console.dir(dest);

console.dir(JSON.decode(dest));​ 
```

基本上，正则表达式重写了`src="url"`to `src=\"url\"`。

# javascript - Three.js：平面只有一半时间可见

> ID：10889583
> 
> 赞同：31
> 
> 时间：2012-06-04T23:04:06.990
> 
> 标签：javascript, three.js

我创建了一个平面，我使用 Three.js 旋转它。出于某种原因，飞机没有显示一半的时间。我在这里创建了一个小提琴[来](http://jsfiddle.net/VsWb9/5/)显示行为。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-21T15:27:48.163

请注意，这在 Three.js 版本 r50 中略有改变。可以通过Material上的属性来渲染一个平面的两侧`side`，即

```
plane.material.side = THREE.DoubleSide; 
```

[在这里](https://github.com/mrdoob/three.js/wiki/Migration)查看更多详细信息。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-04T23:20:01.650

它不可见，因为飞机的背面没有被渲染（或者更好地说，飞机默认情况下没有背面。在旁注中，请查看有关此的[背面剔除](http://en.wikipedia.org/wiki/Back-face_culling)。虽然这不是问题情况下，它可能会让您对渲染有一些了解）。

Three.js 确实为您提供了一种非常简单的方式来渲染背面。

在 Three.js - **r49 及以下**：

您需要做的就是将`doubleSided`平面对象的 - 属性设置为 true。

```
plane.doubleSided = true; 
```

对于较新的版本 - **r50 及更高版本**

在较新的修订版中，正如 donnyB 在他的回答中已经正确指出的那样，该属性已从`Object3D`- 对象移动到`Material`- 对象，因此您需要对其进行一些不同的设置，如下所示：

```
plane.material.side = THREE.DoubleSide; 
```

还编辑了你的小提琴给你看：http: [//jsfiddle.net/VsWb9/1084/](http://jsfiddle.net/VsWb9/1084/)

它使用的是 Three.js - 比 r50 更新的版本，属性设置在第 35 行

# java - Bukkit 不会加载插件：名称未定义

> ID：10889587
> 
> 赞同：0
> 
> 时间：2012-06-04T23:04:43.957
> 
> 标签：java, bukkit

这是我的代码：

```
package me.chimericalhobo.BlockChanger;

import java.util.ArrayList;
import java.util.logging.Logger;

import org.bukkit.ChatColor;
import org.bukkit.command.Command;
import org.bukkit.command.CommandSender;
import org.bukkit.entity.Player;
import org.bukkit.plugin.PluginManager;
import org.bukkit.plugin.java.JavaPlugin;

public class BlockChanger extends JavaPlugin
{

private static final Logger log = Logger.getLogger("Minecraft");
private final BlockChangerListener blockListener = new BlockChangerListener(this);
public final ArrayList<Player> BlockChangerUsers = new ArrayList<Player>();

@Override
public void onEnable()
{
    log.info("[BlockChanger] has been enabled!");
    PluginManager pm = getServer().getPluginManager();
    pm.registerEvents(this.blockListener, this);
}

@Override
public void onDisable()
{
    log.info("[BlockChanger] has been disabled!");
}

@Override
public boolean onCommand(CommandSender sender, Command cmd, String commandLabel, String[] args)
{
    if(commandLabel.equalsIgnoreCase("BlockChanger"))
        toggleBlockChanger(sender);

    return true;

}

private void toggleBlockChanger(CommandSender sender)
{
    if(!enabled((Player) sender)){
        BlockChangerUsers.add((Player) sender);
        ((Player) sender).sendMessage(ChatColor.BLUE + "BlockChanger has been enabled!");

    }
    else
    {
        BlockChangerUsers.remove((Player) sender);
        ((Player) sender).sendMessage(ChatColor.RED + "BlockChanger has been disabled!");
    }

}

public boolean enabled(Player player)
{
    return BlockChangerUsers.contains(player);
}

} 
```

每次我尝试加载它时，命令提示符都会显示：

```
15:53:08 [SEVERE] Could not load 'plugins\BlockChanger.jar' in folder 'plugins'
org.bukkit.plugin.InvalidDescriptionException: name is not defined 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-27T01:04:05.347

在*plugin.yml 中*添加：

```
name: (Plugin Name)
main: (Package.name.name(or whatever).(MainClass Ex: .Main)) Ex: me.name.plugin.Main
version: (Version number) 
```

您可以选择添加诸如`author: (author name)`.

查看[http://wiki.bukkit.org/Plugin_YAML](http://wiki.bukkit.org/Plugin_YAML)了解更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T23:23:26.460

检查您的*plugin.yml*。你确定你在里面设置了一个`name: <plugin name>`字段吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-29T20:52:34.303

插件需要包含一个名称。

在*plugin.yml 中*，您将看到一个字段：

```
name: 
```

您必须在此处插入插件的名称。

*plugin.yml*的完整示例如下所示：

```
name: Velocity Jump
main: com.weebly.foxgenesis.Main
version: 1.0

commands:
   vjump:
      description: make a player velocity jump to you
      usage: /vjump <player> [toPlayer] [time]
      default: op 
```

有关更多信息，请单击此链接：[http ://wiki.bukkit.org/Plugin_YAML](http://wiki.bukkit.org/Plugin_YAML)

# objective-c - Objective-C，如何显示确定的进度条？

> ID：10889588
> 
> 赞同：4
> 
> 时间：2012-06-04T23:04:46.773
> 
> 标签：objective-c, methods, progress-bar

我想将我的应用程序中的进度条显示为确定的而不是不确定的。但是在将其设置为确定时它不起作用（对于不确定的工作就很好）。我已经[阅读](https://stackoverflow.com/questions/4089555/animated-progress-bar-in-nsmenuitem)了[其他一些](https://stackoverflow.com/questions/3784230/displaying-file-copy-progress-using-fscopyobjectasync)答案，尽管它们没有奏效。任何帮助将不胜感激 - 谢谢！

```
@interface AppDelegate : NSObject <NSApplicationDelegate> {

    IBOutlet NSProgressIndicator *showProgress;

}

- (IBAction)someMethod:(id)sender {

    [showProgress setUsesThreadedAnimation:YES];   // This works
    [showProgress startAnimation:self];            // This works
    [showProgress setDoubleValue:(0.1)];           // This does not work
    [showProgress setIndeterminate:NO];            // This does not work

    [self doSomething];
    [self doSomethingElse];
    [self doSomethingMore];
    ....

    [barProgress setDoubleValue:(1.0)];            // This does not work
    [barProgress stopAnimation:self];              // This works

} 
```

* * *

更新的代码[工作]：

```
- (IBAction)someMethod:(id)sender {

    [showProgress setUsesThreadedAnimation:YES];
    [showProgress startAnimation:self];
    [showProgress setIndeterminate:NO];

    [showProgress setDoubleValue:(0.1)];
    [showProgress startAnimation:nil];

    dispatch_queue_t backgroundQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_async(backgroundQueue, ^{

        for (NSUInteger i = 0; i < 1; i++) {

            dispatch_async(dispatch_get_main_queue(), ^{
                [barProgress incrementBy:10.0];
            });
        }

    [self doSomething];

            [showProgress incrementBy:...];

        dispatch_async(dispatch_get_main_queue(), ^{

            [showProgress stopAnimation:nil];

        });
    });

    [showProgress setDoubleValue:(1.0)];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T23:19:08.967

您的`doSomething`方法阻塞了主线程，这导致运行循环不循环，进而导致 UI 重绘被阻塞。解决方法是在`doSomething`后台队列中执行长时间运行的工作，并定期回调主队列以更新进度条。

我不知道你的`doSomething`方法是做什么的，但为了解释起见，我们假设它运行一个包含 100 步的 for 循环。你会像这样实现它：

```
- (void)doSomething
{
    [showProgress startAnimation:nil];
    dispatch_queue_t backgroundQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_async(backgroundQueue, ^{
        for (NSUInteger i = 0; i < 100; i++) {
            // Do whatever it is you need to do

            dispatch_async(dispatch_get_main_queue(), ^{
                [showProgress incrementBy:1.0];
            });
        }
        // Done with long running task
        dispatch_async(dispatch_get_main_queue(), ^{
            [showProgress stopAnimation:nil];
        });
    });
} 
```

请记住，您仍然需要将进度指示器设置为确定，初始化其值并设置适当的 minValue 和 maxValue。

如果您必须在`doSomething`主线程上完成工作，则可以安排在每个运行循环周期中完成该工作的一小部分，或者在您进行工作时定期手动旋转运行循环，但是 Grand Central Dispatch (GCD) 如果您可以使用它，那将是我的首选。

# c# - C#中的命令行参数

> ID：10889589
> 
> 赞同：1
> 
> 时间：2012-06-04T23:04:51.103
> 
> 标签：c#, command-line-arguments

我对 c# 很陌生。命令行参数有问题。我想要做的是利用第三个 cmd 行参数并写入它。我已经指定了要写入的文件的路径和其他内容。但这里的问题是我可以从用户定义的函数访问命令行参数（例如；args [3]）吗？我们怎么做？下面是我的代码。

```
public class Nodes
{
public bool isVisited;
public string parent;
public string[] neighbour;
public int nodeValue;

public Nodes(string[] arr, int nodeValue)
{
    this.neighbour = new string[arr.Length];
    for (int x = 0; x < arr.Length; x++)
        this.neighbour[x] = arr[x];//hi...works??
    this.isVisited = false;
    this.nodeValue = nodeValue;
}

}

public class DFS
{
static List<string> traversedList = new List<string>();

static List<string> parentList = new List<string>();
static BufferBlock<Object> buffer = new BufferBlock<object>();
static BufferBlock<Object> buffer1 = new BufferBlock<object>();
static BufferBlock<Object> buffer3 = new BufferBlock<object>();
static BufferBlock<Object> buffer2 = new BufferBlock<object>();

public static void Main(string[] args)
{

    int N = 100;
    int M = N * 4;
    int P = N * 16;

    Stopwatch stopwatch = new Stopwatch();
    stopwatch.Start();

    List<string> global_list = new List<string>();

    StreamReader file = new StreamReader(args[2]);

    string text = file.ReadToEnd();

    string[] lines = text.Split('\n');

    string[][] array1 = new string[lines.Length][];
    Nodes[] dfsNodes = new Nodes[lines.Length];

    for (int i = 0; i < lines.Length; i++)
    {
        lines[i] = lines[i].Trim();
        string[] words = lines[i].Split(' ');

        array1[i] = new string[words.Length];
        dfsNodes[i] = new Nodes(words, i);
        for (int j = 0; j < words.Length; j++)
        {
            array1[i][j] = words[j];
        }
    }
    StreamWriter sr = new StreamWriter(args[4]);

    int startNode = int.Parse(args[3]);

    if (args[1].Equals("a1"))
    {
        Console.WriteLine("algo 0");
        buffer.Post(1);
        dfs(dfsNodes, startNode, "root");
    }
    else if (args[1].Equals("a2"))
    {
        Console.WriteLine("algo 1");
        buffer1.Post(1);
        dfs1(dfsNodes, startNode, "root",sr);
    }
    else if (args[1].Equals("a3"))
    {
        buffer3.Post(1);
        List<string> visitedtList = new List<string>();
        Console.WriteLine("algo 2");
        dfs2(dfsNodes, startNode, "root", visitedtList,sr);
    }

    stopwatch.Stop();

    Console.WriteLine(stopwatch.Elapsed);
    Console.ReadLine();
}

public static void dfs(Nodes[] node, int value, string parent,StreamWriter sr1)
{
    int id = (int)buffer.Receive();
    sr1=new StreamWriter(arg
    Console.WriteLine("Node:" + value + " Parent:" + parent + " Id:" + id);
    sr1.Write("Node:" + value + " Parent:" + parent + " Id:" + id);
    id++;
    traversedList.Add(value.ToString());
    buffer.Post(id);
    for (int z = 1; z < node[value].neighbour.Length; z++)
    {
        if (!traversedList.Contains(node[value].neighbour[z]))
        {
            dfs(node, int.Parse(node[value].neighbour[z]), value.ToString(),sr1);
        }

    }
    return;

}

public static void dfs1(Nodes[] node, int value, string parent, StreamWriter sr)
{
    int id = (int)buffer1.Receive();
    sr.Write("Node:" + value + " Parent:" + parent + " Id:" + id);
    node[value].isVisited = true;
    node[value].parent = parent;
    id++;
    buffer1.Post(id);
    for (int z = 1; z < node[value].neighbour.Length; z++)
    {
        buffer2.Post(node[int.Parse(node[value].neighbour[z])]);
        if (!isVisited())
        {
            dfs1(node, int.Parse(node[value].neighbour[z]), value.ToString(),sr);
        }

    }
    return;

}

public static void dfs2(Nodes[] node, int value, string parent, List<string> visitedtList, StreamWriter sr)
{
    int id = (int)buffer3.Receive();
    sr.Write("Node:" + value + " Parent:" + parent + " Id:" + id);
    id++;
    visitedtList.Add(value.ToString());
    buffer3.Post(id);
    for (int z = 1; z < node[value].neighbour.Length; z++)
    {
        buffer2.Post(node[int.Parse(node[value].neighbour[z])]);
        if (!visitedtList.Contains(node[value].neighbour[z]))
            dfs2(node, int.Parse(node[value].neighbour[z]), value.ToString(), visitedtList,sr);

    }
    return;

}

public static bool isVisited()
{
    Nodes node = (Nodes)buffer2.Receive();
    return node.isVisited;
}

} 
```

所以问题是我想将每个 dfs 的输出写入指定为命令行参数的文件。那么我可以访问 dfs、dfs1 方法中的 args 吗？？？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T23:07:00.540

您可以保留一个静态字段来保存它，或者只使用[`Environment.GetCommandLineArgs()`](http://msdn.microsoft.com/en-us/library/system.environment.getcommandlineargs.aspx).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T23:09:38.713

好吧，以最简单的形式，只需将其保存以备后用

```
class Program
{
    static string _fpath;
    static void Main(string[] args)
    {
        // ...stuff
        _fpath = args[3];
    }

    static void WriteFile()
    {
        using(var stream = File.Open(_fpath, ...))
        {
            // write to file
        }
    }
} 
```

不一定完全是我会怎么做，但你明白了。

另外，关于这段代码......

```
this.neighbour = new string[arr.Length];
for (int x = 0; x < arr.Length; x++)
    this.neighbour[x] = arr[x];//hi...works?? 
```

你可以简单地写

```
this.neighbour = arr; 
```

啊，托管代码的奇迹：D。无需将元素复制到第二个数组。当然，您需要考虑这样一个事实，即参数数组 ( `arr`) 中元素的更改现在将反映在您的内部数组中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T23:17:49.257

最好将参数传递给函数，而不是依靠某种“隐藏”的方式来传递它们。

静态变量和 GetCommandLineArgs 都有助于以隐藏的方式传递它们（如其他答案中所指出的）。缺点更难测试（因为需要设置静态共享依赖项），并且对于未来的读者来说，存在这种隐藏的依赖项不太清楚。

# android - 如何在 Java 代码中管理 UI？

> ID：10889590
> 
> 赞同：1
> 
> 时间：2012-06-04T23:04:52.497
> 
> 标签：android, android-activity

将 contentView 设置为布局后，如何通过 java 管理 UI？另外，如果我开始一项新活动，是否要重置 contentView？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T23:09:20.663

ContentView 只会在一个活动中。

假设您在扩展`Activity`您所要做的一切，在设置内容视图之后，就是访问您的视图。假设您的布局中有一个按钮：

```
Button homeButton = (Button) findViewById(R.id.homeButton);
homeButton.setText(); homeButton.setOnClickListener() etc 
```

如果您在对话框中，或者需要在特定情况下访问某些视图，或者您有意图并需要访问主要活动布局中的内容：

```
Button secondButton = (Button) getActivity().findViewById(R.id.secondButton);
//other methods on the button 
```

编辑——

那么图像，你只需在布局中添加一个 ImageView ：

```
<ImageView android:id="@+id/logoImageView"
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:src="@drawable/logo" android:contentDescription="@string/app_name" 
        android:layout_gravity="center_horizontal"/> 
```

您不需要专门对代码做任何事情，它应该只是显示出来。

也可以通过 XML 添加按钮和其他视图。您也可以以编程方式添加内容，尽管它并不常见。

如果我没记错的话，在 Java 中创建一个不在您的 XML 文件中的按钮的构造函数，它将是`Button aNewButton = new Button(getApplicationContext()); aNewButton.setText("whatever");`

# xaml - WinRT 中 XAML 中的声明性 GridView

> ID：10889591
> 
> 赞同：2
> 
> 时间：2012-06-04T23:04:56.350
> 
> 标签：xaml, windows-runtime

有没有办法在 XAML 中纯粹以声明方式定义 GridView？我看到的每个示例都在后面的代码中定义了类别/组名称值，然后每个项目都有一个标题/副标题。我真的很想找到一种方法来执行以下操作：

```
<GridView
  x:Name="itemGridView"
  AutomationProperties.AutomationId="ItemGridView"
  AutomationProperties.Name="Grouped Items"
  Grid.Row="1"
  Margin="0,-3,0,0"
  Padding="116,0,40,46"
  ItemTemplate="{StaticResource Standard250x250ItemTemplate}">

  <GridView.ItemsPanel>
    <ItemsPanelTemplate>                        
      <VirtualizingStackPanel Orientation="Horizontal"/>
    </ItemsPanelTemplate>
  </GridView.ItemsPanel>

  <GridView.GroupStyle>
    <GroupStyle>
      <GroupStyle.HeaderTemplate>
        <DataTemplate>
          <Grid Margin="1,0,0,6">
            <Button
              AutomationProperties.Name="Group Title"
              Content="{Binding Tag}"
              Style="{StaticResource TextButtonStyle}"/>
          </Grid>
        </DataTemplate>
      </GroupStyle.HeaderTemplate>

      <GroupStyle.Panel>
        <ItemsPanelTemplate>
          <VariableSizedWrapGrid Orientation="Vertical" Margin="0,0,80,0"/>
        </ItemsPanelTemplate>
      </GroupStyle.Panel>
    </GroupStyle>
  </GridView.GroupStyle>

  <GridView.Items>
    <Grid x:Name="tab1" Tag="Tab 1" AutomationProperties.Name="Group Title"    HorizontalAlignment="Left" Width="250" Height="250">
      <!-- Tab COntent -->
    </Grid>

    <Grid x:Name="tab2" Tag="Tab 2" AutomationProperties.Name="Tab 2" HorizontalAlignment="Left" Width="250" Height="250">
      <!-- Tab Content -->
    </Grid>
  </GridView.Items>
</GridView> 
```

不幸的是，这个例子不起作用。我似乎无法弄清楚如何以声明方式设置组名称。感谢您的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T12:13:10.407

我认为以下方法是自定义任何 Gridview 的好方法。

*如果您想在网格中实现多组样式，请执行以下操作：

步骤 1\. 创建一个 GroupSelector 类并覆盖 SelectStyleCore 函数：

```
 public class GroupStyleSelector : StyleSelector
    {
    public Style GroupStyle1 { get; set; }
    public Style GroupStyle2 { get; set; }

    protected override Windows.UI.Xaml.Style SelectStyleCore(object item, Windows.UI.Xaml.DependencyObject container)
    {

        var viewGroup = item as ICollectionViewGroup;
        if (viewGroup != null)
        {
            //var groupModel = viewGroup.Group as YourGroupModel;
            if (condition1)
            {
                return GroupStyle1;
            }
            else if (condition2)
            {
                return GroupStyle2;
            }
        }
    }
} 
```

步骤 2\. 在 XAML 资源中，添加以下代码：

```
<Style x:Key="YourGroupStyle1" TargetType="GroupItem">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="GroupItem">
               <!-- Add your custom layout here for Group style 1 -->
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>
    <Style x:Key="YourGroupStyle2" TargetType="GroupItem">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="GroupItem">
               <!-- Add your custom layout here for Group style 1 -->
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<customstyle:GroupStyleSelector x:Key="GroupStyleSelector"
                              GroupStyle1="{StaticResource GroupStyle1}"
                              GroupStyle2="{StaticResource GroupStyle2}"/> 
```

customstyle 链接到存储 GroupStyleSelector 类的命名空间。

步骤 3\. 为 GridView 控件应用样式选择器

如果您想自定义 HeaderTemplate，请告诉我，如果不是 Microsoft GridApp 示例的当前用户。

如果您想自定义组中的每个项目布局，您也可以与 GroupStyleSelector 类似：创建 DataTemplateSeletor（从 TemplateSelector 继承）然后将其分配给 GridView 控件

```
<GridView ItemTemplateSelector="{StaticResource ItemTemplateSelector}">
    <GridView.GroupStyle>
        <GroupStyle ContainerStyleSelector="{StaticResource GroupStyleSelector}">
            <GroupStyle.HeaderTemplate .../>
    </GridView.GroupStyle> 
```

希望我的指南对您来说很清楚。如果有任何问题，请讨论。

# windows-installer - MSI 文件是否支持 Windows 上的 CRC 检查？

> ID：10889596
> 
> 赞同：2
> 
> 时间：2012-06-04T23:05:48.527
> 
> 标签：windows-installer, crc, crc32

我很好奇是否可以判断 MSI 文件自构建以来是否被修改过？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T00:08:03.357

可能不是您所期望的方式，但如果您总是对您的 MSI 文件进行签名，则在签名后进行的任何修改都会使数字签名无效。

对 MSI 进行签名始终是一个好主意，因为未签名 MSI 的 UAC 提示不同于具有有效数字签名的 MSI。

有关详细信息，请参阅 MSDN -[如何：使用 SignTool.exe（Windows 安装程序）签署安装文件](http://msdn.microsoft.com/en-us/library/ee290833.aspx)

# html - 表格行中带有“nowrap”的元素可防止整行在 IE8 中换行

> ID：10889601
> 
> 赞同：2
> 
> 时间：2012-06-04T23:06:06.203
> 
> 标签：html, css

我被迫做一些与 IE8 兼容的开发。

从这段代码开始，我们看到随着窗口的缩小，表格以一种将文本与其单选按钮分开的方式包裹了文本：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html><body>
<table style="border-collapse:collapse; border:1px solid black"><tr>    

<td style="border-collapse:collapse; border:1px solid black">
    Foo
</td>

<td style="border-collapse:collapse; border:1px solid black">
    <label style="white-space:normal"><input type="radio" />
        Bar Bar Bar Bar Bar Bar Bar
    </label>
    <label style="white-space:normal"><input type="radio" />
        Bar Bar Bar Bar Bar Bar Bar
    </label>
    <label style="white-space:normal"><input type="radio" />
        Bar Bar Bar Bar Bar Bar Bar
    </label>
</td>

</tr></table>
</body></html> 
```

![dfd](../Images/bb29046c8367d276f7a1d5943d52ff26.png)

因此，将`white-space`第三个元素的样式更改为`nowrap`似乎可以解决问题。现在它将强制单选按钮和所有文本环绕在一起。

```
<td style="border-collapse:collapse; border:1px solid black">
    <label style="white-space:normal"><input type="radio" />
        Bar Bar Bar Bar Bar Bar Bar
    </label>
    <label style="white-space:normal"><input type="radio" />
        Bar Bar Bar Bar Bar Bar Bar
    </label>
    <label style="white-space:nowrap"><input type="radio" />
        Bar Bar Bar Bar Bar Bar Bar
    </label>
</td> 
```

![fd](../Images/04e5491c383d1df6cc2bf1be6f8e0b5f.png)

但是，如果进一步缩小窗口，其他元素的问题仍然存在，因此我们也将前两个元素更改为`nowrap`：

```
<td style="border-collapse:collapse; border:1px solid black">
    <label style="white-space:nowrap"><input type="radio" />
        Bar Bar Bar Bar Bar Bar Bar
    </label>
    <label style="white-space:nowrap"><input type="radio" />
        Bar Bar Bar Bar Bar Bar Bar
    </label>
    <label style="white-space:nowrap"><input type="radio" />
        Bar Bar Bar Bar Bar Bar Bar
    </label>
</td> 
```

![在此处输入图像描述](../Images/91bf05c86de5ca6d5fc5aca3cbafd4c3.png)

现在整个表格单元格不再换行！

它在 Firefox 中正常工作，但在 IE8 中不能正常工作。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T23:23:01.600

您可以使用`float`来解决该问题：

```
<td style="border-collapse:collapse; border:1px solid black;">
  <label style="float:left;"><input type="radio" />
    Bar Bar Bar Bar Bar Bar Bar
  </label>
  <label style="float:left;"><input type="radio" />
    Bar Bar Bar Bar Bar Bar Bar
  </label>
  <label style="float:left;"><input type="radio" />
    Bar Bar Bar Bar Bar Bar Bar
  </label>
</td> 
```

请参阅此[工作示例](http://dl.dropbox.com/u/76169930/stackoverflow/question/10889601/index.html)！

这样就不会发生换行，如果窗口变得非常小，换行仍然很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T04:02:06.457

而不是`white-space: nowrap`, 设置

```
label { display: inline-block; } 
```

[支持`display: inline-block`](http://caniuse.com/#cats=CSS)现在相当普遍（在这种情况下，元素`display: inline`默认具有）。

PS`white-space: nowrap`问题中描述的错误仍然存​​在于IE 9中。

PS 2\. 出于可用性和可访问性的原因，应避免在一行中使用多个单选按钮。应用这个原则，情况不会出现。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-04T23:14:45.227

试试这个 - 因为标签末尾已经有一个尾随空格（换行符被视为空格），所以所有其他空格都被忽略（折叠到其中），但是那个是不可包装的（所以只是砍掉它）：

```
<td style="border-collapse:collapse; border:1px solid black">
    <label style="white-space:nowrap"><input type="radio" />
        Bar Bar Bar Bar Bar Bar Bar</label>
    <label style="white-space:nowrap"><input type="radio" />
        Bar Bar Bar Bar Bar Bar Bar</label>
    <label style="white-space:nowrap"><input type="radio" />
        Bar Bar Bar Bar Bar Bar Bar</label>
</td> 
```

# c# - 将 double[][] 类型转换为 float

> ID：10889604
> 
> 赞同：5
> 
> 时间：2012-06-04T23:06:19.050
> 
> 标签：c#, asp.net, .net

我有一个函数签名，如：

```
static public double[][] G2Sweep(int row1, int row2, double[][] mtx)
{
    mtx = (float) mtx;
} 
```

但我需要将 double[][] 矩阵转换为浮点值。这是如何完成的，因为代码无法显式转换它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T23:17:43.787

```
public static float[][] Convert(double[][] mtx)
{
    var floatMtx = new float[mtx.Length][];
    for (int i = 0; i < mtx.Length; i++)
    {
        floatMtx[i] = new float[mtx[i].Length];
        for (int j = 0; j < mtx[i].Length; j++)
            floatMtx[i][j] = (float)mtx[i][j];
    }
    return floatMtx;
} 
```

或者：

```
public static float[][] Convert(double[][] mtx)
{
    return mtx.Select(i => i.Select(j => (float)j).ToArray()).ToArray();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T23:13:07.823

不，您不能将双精度转换为浮点数，尤其是对于数组。您需要创建具有正确类型的副本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-21T06:16:30.710

Another way you can do this by is using the Array.ConvertAll method:

```
Array.ConvertAll<double, float>(doubles, d => (float)d); 
```

Does the same looping and explicit converting, but looks better.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T23:14:33.800

> 是的，所有值都浮动，但我宁愿不必做一个 for 循环来遍历这一切

好吧，对不起，但你不能。将数组转换为`float`(or `int`, or `String`, or `MonkeyPoo`, or anything) 之类的类型是没有意义的。如果您需要查看数组中的每个值，那么您需要一个循环。无法回避这个事实。

Lamdas 之类的也都归结为一个循环。您只需要咬紧牙关，然后 A) 在循环中转换（或使用类似的东西`.Cast<float>`），或者使用正确的类型开始。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-04T23:20:12.913

确实，您*无法*就地转换，并且必须循环遍历这些值。

但是，现在可以说内存很*便宜*。

在创建你的 double[][] 变量时；为什么不简单地同时创建一个 float[][] ，这样转换就完成了。

这样，在您生命周期的剩余时间里，您可以只使用 write 数组来执行 write 任务。

也就是说，你能澄清为什么你需要一个不同的 float 和 double 数组吗？

*Fair but not necessarily acceptable; if it's a webapp hosted on its own box or virtual image; then it's fine. If this is a standalone app that might have to work on a netbook or in Silverlight somewhere, it is not fair or fine.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-04T23:19:13.153

如果您使用 Linq，则可以避免手动编写循环。

```
float[][] floats = mtx.Select(r=>r.Select(Convert.ToSingle).ToArray()).ToArray(); 
```

编辑：固定。

# python - 我可以为集成应用程序的每种服务制作测试假人吗？

> ID：10889615
> 
> 赞同：2
> 
> 时间：2012-06-04T23:07:30.063
> 
> 标签：python, testing, mongodb, redis

我有一个相当复杂的应用程序，它使用 celery、mongo、redis 和 pyramid。我用鼻子进行测试。我没有做 TDD（至少不是测试优先），但我正在努力获得相当大的覆盖率。我被困在与上述某些服务集成的部分中。比如我用redis做celery任务之间的共享内存，但是我希望能够切换到memcache而不用太麻烦，所以我抽象出了以下函数：

```
import settings
db = StrictRedis(host=settings.db_uri, db=settings.db_name)

def has_task(correlation_id):
    """Return True if a task exists in db."""
    return db.exists(str(correlation_id))

def pop_task(correlation_id):
    """Get a task from db by correlation_id."""
    correlation_id = str(correlation_id) # no unicode allowed
    task_pickle = db.get(correlation_id)
    task = loads(task_pickle)
    if task:
        db.delete(correlation_id)
    return task

def add_task(correlation_id, task_id, model):
    """Add a task to db"""
    return db.set(str(correlation_id), dumps((task_id, model))) 
```

我也在做类似的事情来抽象 Mongo，我用它来进行持久存储。

我见过用于运行虚拟 http 服务器、创建虚拟请求甚至虚拟数据库的集成 Web 应用程序的测试套件。我对 celery 和 pyramid没问题，但是我找不到 mongo 和 redis 的假人，所以我只能在这些服务实际运行时运行上述测试。有没有办法为上述提供虚拟服务所以我**没有**：

1.  安装并运行外部服务，以及
2.  手动创建和销毁整个数据库（可以指望内存中的假人自行清理）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:38:11.947

我建议您将[模拟库](http://www.voidspace.org.uk/python/mock/)用于此类任务。这允许您用一些伪对象替换您的生产对象（例如数据库连接），这些伪对象可以提供一些测试所需的功能。

例子：

```
>>> from mock import Mock
>>> db = Mock()
>>> db.exists.return_value = True
>>> db.exists()
True 
```

您可以断言您的代码如何与模拟交互，例如：

```
>>> db.delete(1)
<Mock name='mock.delete()' id='37588880'>
>>> db.delete.assert_called_with(1)
>>> db.delete.assert_called_with(2)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python27\lib\site-packages\mock.py", line 863, in assert_called_with
    raise AssertionError(msg)
AssertionError: Expected call: delete(2)
Actual call: delete(1) 
```

# visual-studio-2010 - 使用 Visual Studio 构建具有运行 .bat 文件的自定义操作的 .msi 文件

> ID：10889616
> 
> 赞同：1
> 
> 时间：2012-06-04T23:07:53.673
> 
> 标签：visual-studio-2010, windows-installer, uninstallation, cmd

我需要使用 Visual Studio 构建一个 .msi 文件，该文件将执行一些我在 .bat 中具有自定义操作的命令。我知道我可以通过进入 .msi 并更改表格来实现这一点，我已经让它工作了，但这只是一个简短的修复，我需要让它工作。特别是我想在卸载时执行我的自定义操作。

我尝试的第一件事是编写一个名为.bat 的.exe。它可以独立工作，但是每当我将文件放入文件系统并让自定义操作运行 .exe 时，它​​就无法正常工作。谁知道为什么。。

我做的另一件事是让自定义操作使用 cmd.exe 和我的 .bat 作为参数。我在卸载过程中遇到错误，事件查看器使用 /c "[TARGETDIR]batfile.bat 将其缩小到 cmd.exe，与[https://stackoverflow.com/a/6286046/1427105](https://stackoverflow.com/a/6286046/1427105)非常相似。

有什么想法可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T00:33:48.497

这样的事情呢？

```
protected override void OnBeforeUninstall(IDictionary savedState)
{
    base.OnBeforeUninstall(savedState);

    string assemblyPath = Context.Parameters["assemblypath"];
    string parentDirectory = Directory.GetParent(assemblyPath).FullName;
    string batch = Path.Combine(parentDirectory, "batfile.bat");
    Process p = Process.Start(batch);

    while (!p.HasExited)
        Thread.Sleep(1000);
} 
```

# android - 将画布坐标系转换为 OpenGLES 2.0 坐标

> ID：10889618
> 
> 赞同：1
> 
> 时间：2012-06-04T23:08:14.983
> 
> 标签：android, opengl-es, android-canvas, coordinate-transformation

我开始使用 Path 对象在画布上绘制六边形网格。我根据六边形的大小计算了特定显示器上有多少个六边形。

我根据画布计算了所有六边形坐标。但是现在，我遇到了严重的性能问题，必须将其移植到 OpenGL。

因为该算法适用于画布，所以我尝试使用 GLU.gluUnProject 将那些“画布”六边形坐标转换为 OpenGL 坐标系。

“for循环”

```
float near[] = { 0.0f, 0.0f, 0.0f, 0.0f };
            GLU.gluUnProject(b.hexes[ii][jj].points[ii].x,
                    b.hexes[ii][jj].points[ii].y, 0, mg.mModelView, 0,
                    mg.mProjection, 0, viewport, 0, near, 0);
vertices[zz] = (float) ((near[0])/near[3]);
            zz++;
            vertices[zz] = (float) ((near[1])/near[3]);
            zz++;
            vertices[zz] = 0; 
```

因为我缺乏opengl知识，我不知道如何将glViewport、gluPerspective、glTranslatef设置为与画布“相同”的2D世界。

所以我的问题是：

如何设置我的第一个六边形（**在画布上，第一个在左上角**）在openGL绘图表面世界上相等的那三件事？

**更新**

谢谢大家有兴趣帮助解决我的问题。但：

我现在将我的 18 个浮点顶点数组设置如下：[20.0, 0.0, 0.0, 60.0, 0.0, 0.0, 80.0, 34.641018, 0.0, 60.0, 69.282036, 0.0, 20.0, 69.282036, 0.0, 018,0, 34.641] **Z始终为 0。**

```
ByteBuffer vertexByteBuffer = ByteBuffer
                .allocateDirect(vertices.length * 4);
vertexByteBuffer.order(ByteOrder.nativeOrder());
vertexBuffer = vertexByteBuffer.asFloatBuffer();
vertexBuffer.put(vertices);
vertexBuffer.position(0); 
```

**并绘制：**

```
gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
gl.glColor4f(0.0f, 1.0f, 0.0f, 0.5f);
gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
gl.glDrawArrays(GL10.GL_TRIANGLE_FAN, 0, vertices.length/3);
gl.glDisableClientState(GL10.GL_VERTEX_ARRAY); 
```

**在绘制之前我设置：onDrawFrame()**

```
gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
        gl.glLoadIdentity();
gl.glTranslatef(0.0f, 0.0f, -5.0f); 
```

**onSurfaceChanged()**

```
gl.glViewport(0, 0, width, height);
gl.glMatrixMode(GL10.GL_PROJECTION);
gl.glLoadIdentity();
gl.glOrthof(0, width, height, 0, -1, 1); 
gl.glMatrixMode(GL10.GL_MODELVIEW);
gl.glLoadIdentity(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:20:22.753

您无需自己转换顶点坐标。您所要做的就是向 OpenGL 提供正确的投影矩阵。

基本上，这将类似于：

```
glViewport(0, 0, canvasWidth, canvasHeight);
glMatrixMode(GL_PROJECTION);                     // or some matrix uniform if using shaders
glLoadIdentity();
glOrtho(0, canvasWidth, canvasHeight, 0, -1, 1); // this will allow to pass vertices in 'canvas pixel' coordinates
glMatrixMode(GL_MODELVIEW);
glLoadIdentity(); 
```

根据您传递顶点的顺序，您可能希望禁用剔除。

# android - 回到主要活动后专注于同一个按钮

> ID：10889620
> 
> 赞同：0
> 
> 时间：2012-06-04T23:08:31.327
> 
> 标签：android, button, android-activity

我正在尝试在我的应用程序中做一件简单的事情。

有三个按钮将用户带到三个不同的屏幕。一旦用户单击按钮并返回到活动，我希望焦点停留在用户之前离开的按钮上。

我尝试了保存的实例状态，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:32:50.290

我在我的一个应用程序中做了同样的事情。

`btn1`, `btn2`,`btn3`是主要活动中的 3 个按钮。单击它们，我将导航到不同的活动。

`btnenable`（红色）和`btndisable`（灰色）是用于显示突出显示按钮的两个图像。

* * *

这是快照： ![快照](../Images/095cc5ce1b11658e00ffeb15f18067b6.png)

* * *

```
btn1.setOnClickListener(new Button.OnClickListener() {
@Override
public void onClick(View v) {
    btn1.setBackgroundResource(R.drawable.btnenable);
    btn2.setBackgroundResource(R.drawable.btndisable);
    btn3.setBackgroundResource(R.drawable.btndisable);
}
});

btn2.setOnClickListener(new Button.OnClickListener() {
@Override
public void onClick(View v) {
    btn2.setBackgroundResource(R.drawable.btnenable);
    btn3.setBackgroundResource(R.drawable.btndisable);
    btn1.setBackgroundResource(R.drawable.btndisable);
}
});

btn3.setOnClickListener(new Button.OnClickListener() {
@Override
public void onClick(View v) {
    btn3.setBackgroundResource(R.drawable.btnenable);
    btn2.setBackgroundResource(R.drawable.btndisable);
    btn1.setBackgroundResource(R.drawable.btndisable);
}
}); 
```

希望它有帮助！
随时询问您的问题！

# ruby-on-rails - 在 capistrano 任务中启动后台进程

> ID：10889621
> 
> 赞同：11
> 
> 时间：2012-06-04T23:08:57.307
> 
> 标签：ruby-on-rails, linux, shell, capistrano, background-process

capistrano任务

```
namespace :service do
  desc "start daemontools (svscan/supervise/svscanboot)"
  task :start, :roles => :app do
    sudo "svscanboot&"
  end
end 
```

现在这不起作用：svscanboot 进程根本不运行。这帮助我找到`sleep`：[https](https://github.com/defunkt/resque/issues/284) ://github.com/defunkt/resque/issues/284 其他来源指出我指向`nohup`、`redirection`和`pty => true`，所以我尝试了所有这些。

```
run "nohup svscanboot >/tmp/svscanboot.log 2>&1 &"   # NO
run "(svscanboot&) && sleep 1"                       # NO
run "(nohup svscanboot&) && sleep 1"                 # YES! 
```

现在，谁能向我解释为什么我需要睡眠声明以及 nohup 有什么不同？作为记录，如果从用户 shell 运行，上述所有运行同样良好，问题仅在 capistrano 的上下文中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:54:37.327

尝试按照此处的说明分叉该进程： [Spawn a background process in Ruby](https://stackoverflow.com/questions/2504445/spawn-a-background-process-in-ruby)

你应该能够做这样的事情：

```
job1 = fork do
  run "svscanboot"
end

Process.detach(job1) 
```

同样，请查看： [使用 Capistrano 启动后台任务](https://stackoverflow.com/questions/1109274/starting-background-tasks-with-capistrano)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-09T18:26:28.247

我的简单解决方案是使用您要运行的任何代码在远程服务器上创建 svscanboot.sh 文件。在你的情况下

```
svscanboot >/tmp/svscanboot.log 2>&1 
```

在 cap rake 任务中添加这个

```
run "sh +x somefile.sh &" 
```

这对我很有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-16T08:06:28.000

我认为`nohup`只需在后台启动该过程，因此您无需显式设置最后一个 &。

你试过了吗

`run "nohup svscanboot >/tmp/svscanboot.log 2>&1"`

（没有结尾 & 将其发送到后台）。

当您当前的 capistrano 会话关闭时，这应该可以工作并保持运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-14T13:10:30.420

尝试这个

```
run "nohup svscanboot >/tmp/svscanboot.log 2>&1 & sleep 5", pty: false 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-05T22:23:55.813

我想分享我的解决方案，它在执行多个命令时也有效。我尝试了许多其他在网上找到的变体，包括“sleep N”hack。

```
run("nohup sh -c 'cd #{release_path} && bundle exec rake task_namespace:task_name RAILS_ENV=production > ~/shared/log/<rakelog>.log &' > /dev/null 2>&1", :pty => true) 
```

# c++ - 在 NeatBeans 使用 Armadillo 库编译 c++

> ID：10889629
> 
> 赞同：3
> 
> 时间：2012-06-04T23:09:20.053
> 
> 标签：c++, netbeans, armadillo

我将编译包含 Armadillo 库的 C++ 程序。这个问题可以通过命令行使用这个命令来解决：

```
g++ '/arm.cpp' -o example -O1 -larmadillo 
```

但是，当我将 -O1 -larmadillo 添加到我的 NetBeans 项目的编译选项时，我得到了相当多的错误。

我得到了这些错误：

```
"/usr/bin/make" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf
make[1]: Entering directory `/home/atx/NetBeansProjects/armadillo'
"/usr/bin/make"  -f nbproject/Makefile-Debug.mk dist/Debug/GNU-Linux-x86/armadillo
make[2]: Entering directory `/home/atx/NetBeansProjects/armadillo'
mkdir -p dist/Debug/GNU-Linux-x86
g++ -O3    -o dist/Debug/GNU-Linux-x86/armadillo build/Debug/GNU-Linux-x86/main.o  
build/Debug/GNU-Linux-x86/main.o: In function `gemv<double>':
/usr/include/armadillo_bits/blas_wrapper.hpp:79: undefined reference to `wrapper_dgemv_'
/usr/include/armadillo_bits/blas_wrapper.hpp:79: undefined reference to `wrapper_dgemv_'
/usr/include/armadillo_bits/blas_wrapper.hpp:79: undefined reference to `wrapper_dgemv_'
/usr/include/armadillo_bits/blas_wrapper.hpp:79: undefined reference to `wrapper_dgemv_'
build/Debug/GNU-Linux-x86/main.o: In function `gemm<double>':
/usr/include/armadillo_bits/blas_wrapper.hpp:114: undefined reference to `wrapper_dgemm_'
/usr/include/armadillo_bits/blas_wrapper.hpp:114: undefined reference to `wrapper_dgemm_'
/usr/include/armadillo_bits/blas_wrapper.hpp:114: undefined reference to `wrapper_dgemm_'
/usr/include/armadillo_bits/blas_wrapper.hpp:114: undefined reference to `wrapper_dgemm_'
collect2: ld returned 1 exit status
make[2]: *** [dist/Debug/GNU-Linux-x86/armadillo] Error 1
make[2]: Leaving directory `/home/atx/NetBeansProjects/armadillo'
make[1]: *** [.build-conf] Error 2
make[1]: Leaving directory `/home/atx/NetBeansProjects/armadillo'
make: *** [.build-impl] Error 2

BUILD FAILED (exit value 2, total time: 136ms) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T04:26:43.650

看起来您的犰狳安装不完整，或者您安装了两个版本的犰狳。我建议您手动卸载任何以前版本的犰狳（包括包含和运行时库），然后使用新下载的犰狳 .tar.gz 包进行全新安装：http: [//arma.sourceforge.net/下载.html](http://arma.sourceforge.net/download.html)

或者，您可以解决您遇到的问题。编辑“include/armadillo_bits/config.hpp”并用 ARMA_USE_WRAPPER 注释掉该行。然后，不是与 -larmadillo 链接，而是与 -lblas -llapack 链接

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-10T13:46:32.590

我知道这是一个老问题，但我最近遇到了麻烦，所以如果其他人遇到与我相同的问题，我想提供帮助。这是在 64 位 Windows 7 上使用 NetBeans C++ 设置 Armadillo 库的方法。

1.  [从http://arma.sourceforge.net/download.html](http://arma.sourceforge.net/download.html)下载最新版本的犰狳

2.  将其解压缩到某个目录中，无论您想要什么。

3.  转到 Netbeans -> 项目属性 -> C++ 编译器

    3.1 包含目录 -> 找到您的 Armadillo 目录并选择文件夹“include”。

    3.2 预处理器定义 -> ARMA_USE_LAPACK ARMA_USE_BLAS

4.  转到 Netbeans -> 项目属性 -> 链接器

    4.1 附加库目录 -> 找到您的 Armadillo 目录并选择文件夹“examples/lib_win64”。

    4.2 附加依赖 -> lapack_win64_MT.lib blas_win64_MT.lib

5.  转到您的项目文件夹并从 Armadillo/examples/lib_win64 添加文件。应添加 4 个文件 -> blas_win64_MT.dll、blas_win64_MT.lib、lapack_win64_MT.dll 和 lapack_win64_MT.lib。

这应该是它。现在您可以在 C++ 中使用 Armadillo 库，只需添加您的 cpp #include 并且如果您想使用命名空间 arma；

我希望这可以帮到你！干杯!

# singleton - 当用户在应用程序中重新生成数据结构时，如何拥有多个单例实例？

> ID：10889637
> 
> 赞同：1
> 
> 时间：2012-06-04T23:10:07.190
> 
> 标签：singleton, backgroundworker

我有一个使用后台工作者（bw）和任务的应用程序。

我在这个应用程序中有一个单例实例......它包含有关该应用程序实例的大部分常见信息。我的应用程序中列出了不同的**代理**..如果我切换到不同的代理，**我必须构建整个数据结构**（模型/视图模型/DTO）

可以说，对于代理“a”，产生了一个 bw……它使用了上面提到的单例实例……

很快我切换到代理“b”......所以在我的应用程序中，我为 aganet“b”创建了新的数据结构。但使用相同的单例实例。

如果我更改此单例实例中的任何属性...新值将有可能被生成代理“a”的 bw 使用。

有人可以帮我克服这种情况吗？

我可以为不同的代理提供不同的单例实例吗？

任何帮助，将不胜感激。谢谢

**编辑：如果你能告诉我任何不同的方法都会很棒。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T23:14:23.303

根据定义，单例只能存在一次。如果您希望为每个用户提供不同的设置，则需要使用不同的架构。有关单例的更多信息，请参阅[http://sourcemaking.com/design_patterns/singleton](http://sourcemaking.com/design_patterns/singleton)。

# java - Java中的匹配点

> ID：10889638
> 
> 赞同：0
> 
> 时间：2012-06-04T23:10:24.237
> 
> 标签：java, algorithm, robot

我正在为救援比赛开发一个新机器人，我们想使用 SLAM 进行映射和定位。主要问题之一是将点列表与另一个点列表匹配。我们正在使用自制应用程序在 Android 2.4Ghz 上运行机器人。有谁知道任何用于 ICP（迭代最近点）或 PSM（极坐标扫描匹配）算法的 Java 库？如果没有，您知道如何在 Java 中实现它吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:21:46.857

这是一个非常模糊的答案，但您可以使用 MITK（医学成像工具包）框架试试运气。那里的一些过滤器采用 ICP 算法。由于整个东西都是开源的，你应该能够在那里找到你需要的东西。不过，这一切都是用 C++ 编写的。优点：他们正在研究改进的版本，即各向异性 ICP。还要检查来自 MITK 3m3 分支的基于点的注册模块：[基于点的注册模块](http://mint-medical.de/wp-content/mitk3m3_documentation/org.pointbased.reg.html)

# python - Python/Tkinter 强制等待按钮单击

> ID：10889646
> 
> 赞同：0
> 
> 时间：2012-06-04T23:11:44.547
> 
> 标签：python, button, tkinter

又经过 30 分钟的搜索后返回，要么无法理解结果，要么无法找到结果……

我想强制我的应用程序在继续之前等待按钮单击，并以以下代码片段为例：

```
... 

def crack(self, Filenamelist, forceclick):

        forceclick += 1

        self.crackButton.configure(state='active')

        if forceclick != 2:

            self.crackButton.bind('<ButtonRelease-1>', self.crack(Filenamelist, forceclick))

        self.outputBox.insert(END, '\n' + 'Parsing answer numerator...' + '\n')

... 
```

我基本上希望它加载函数crack()，递增1到forceclick（之前设置为0），将'crack button'更改为活动状态，然后在等待用户触发绑定时绑定按钮. 触发绑定后，该函数重新加载，递增 1 以强制单击，然后跳过 if 语句。

但是，当我运行程序时，它只是将密钥绑定到破解按钮并自动重新加载该函数以绕过 if 语句……我之前尝试了一个 while 循环，但结果并不好……

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T23:18:20.293

您需要将绑定函数设为 lambda：

```
self.crackButton.bind('<ButtonRelease-1>', lambda e: self.crack(Filenamelist, forceclick)) 
```

目前它正在调用该函数。

尽管可能有更好的方法来完成您要完成的工作，但这应该可以解决您的直接问题。

# r - 将二维数组读入 R

> ID：10889652
> 
> 赞同：0
> 
> 时间：2012-06-04T23:13:30.463
> 
> 标签：r

我的数据存储在一个文本文件中，如下所示：

```
1, { {0, 1}, {1, 0}, {2, 6} }

2, { {0, 3}, {2, 2}, {0, 1} }
... 
```

第一个元素是整数，第二个元素是二维数组。是否有将其读入 R 的函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T23:26:24.890

```
 data.frame( lapply( read.csv(text=
"1, { {0, 1}, {1, 0}, {2, 6} } # will read the line as mostly character columns 
 2, { {0, 3}, {2, 2}, {0, 1} } # with '{' and '}' just as non-syntactic characters
", header=FALSE              ), 
     function(x) as.numeric( gsub("[^[:digit:]]", "", x) ) 
           )        )
#----------------------
  V1 V2 V3 V4 V5 V6 V7
1  1  0  1  1  0  2  6
2  2  0  3  2  2  0  1 
```

# ruby-on-rails - 错误验证未显示在 Rails 中

> ID：10889654
> 
> 赞同：1
> 
> 时间：2012-06-04T23:13:35.363
> 
> 标签：ruby-on-rails, redirect, render

我在显示错误消息时碰壁了。错误验证消息不显示。

在我的用户显示模板上：

```
<%= form_for([current_user, @pub_message])  do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
    <%= f.hidden_field :to_id, :value => @user.id %>
  <div class="micropost_message_field">
    <%= f.text_area :content, placeholder: "Any thoughts? Questions? Comments?", :id => 'public_message_text' %>
  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %> 
```

转到我的 pub_messages#create

```
def create
    @pub_message = current_user.pub_messages.build
    @pub_message.to_id = params[:pub_message][:to_id]
    @pub_message.user_id = current_user.id
    @pub_message.content = params[:pub_message][:content]
    if @pub_message.save
        flash[:success ] = "Your post has been sent"
        unless params[:pub_message][:slug].nil?
            redirect_to lesson_path(params[:pub_message][:slug])
        else
            redirect_to user_path(params[:pub_message][:to_id])
        end
    else
        #redirect_to :controller => :users, :action => :show, :id => params[:pub_message][:to_id]
        #redirect_to user_path(params[:pub_message][:to_id])
        render 'users/show'
    end
end 
```

但是它不会显示错误消息。我从许多其他stackoverflow帖子中读到error_messages将无法在redirect_to中存活，所以我有一个渲染。然而，由于渲染只显示视图，我错过了所有的变量。我之前尝试从我的 user#show 操作中复制和粘贴所有内容，但这似乎是一种不好的做法。如果我这样做了，我也会遇到我的所有模板都丢失的问题。似乎我必须将所有模板移动到共享文件夹才能使其正常工作，但这似乎是错误的，因为有些事情只针对用户。

我的错误消息在其他地方正确显示，但我无法弄清楚我的 pub_messages 有什么问题。

我有一个非常相似的东西，叫做 microposts，它可以工作。

```
def create
    @user = current_user
    @micropost = current_user.microposts.build(params[:micropost])
    if @micropost.save
        flash[:success] = "Micropost created!"
        redirect_to root_path
    else
        @feed_items = current_user.feed.paginate(page: params[:page], per_page: 20)
        render 'static_pages/home'
    end
end 
```

我认为唯一的区别是它进行渲染，但在共享文件夹中也有它需要的所有模板。这是唯一可行的方法吗？

# linker - 使用 icc 链接到 gsl 时出现 intel_sse2 问题

> ID：10889655
> 
> 赞同：2
> 
> 时间：2012-06-04T23:13:46.340
> 
> 标签：linker, shared-libraries, gsl, icc

我的程序链接到 PETSc 和 gsl，两个库都是用 icc 编译的。这是链接命令：

```
/usr/local/mpich2/bin/mpicc -Wall -Wwrite-strings -Wno-strict-aliasing -Wno-unknown-pragmas -g3 -I/usr/local/gsl-icc-1.15/include/ -I/usr/local/gsl-icc-1.15/include/ -L/usr/local/gsl-icc-1.15/lib/ -lgsl -lgslcblas prog_name.o -L/usr/local/petsc-3.2-p6/lib  -lpetsc -lX11 -lpthread -llapack -lblas -L/central/intel/Compiler-11.1.072/mkl/lib/em64t -L/central/intel/Compiler-11.1.072/lib/intel64 -L/central/intel/Compiler-11.1.072/tbb/intel64/cc3.4.3_libc2.3.4_kernel2.6.9/lib -L/usr/lib/gcc/x86_64-redhat-linux/4.1.2 -ldl -lgcc_s -lifport -lifcore -limf -lsvml -lm -lipgo -lirc -lpthread -lirc_s -lm -lstdc++ -lstdc++ -ldl -lgcc_s -ldl  -o prog_name 
```

`MPICH_CC`设置为 icc，因此`mpicc`调用 intel 编译器。

当我尝试链接到 gsl`.so`文件时，出现以下错误：

```
gsl-icc-1.15/lib/libgsl.so: undefined reference to `__intel_sse2_strcpy'
gsl-icc-1.15/lib/libgsl.so: undefined reference to `__intel_sse2_strchr'
gsl-icc-1.15/lib/libgsl.so: undefined reference to `__intel_sse2_strncpy' 
```

此错误的原因可能是什么？gsl 与 intel 编译器不兼容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:53:20.523

> 此错误的原因可能是什么？

您没有向我们展示您的链接命令，但我的水晶球告诉我您正在尝试`libgsl.so`与`ld`（或可能与`gcc`）链接，而不是`icc`.

一般来说，永远不应该`ld`在 UNIX 上直接链接任何东西。始终使用适当的编译器驱动程序（`icc`在这种情况下）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:52:45.690

在将某些代码与 gcc 链接到使用 icc 编译的 PETSc 版本时，我也会收到相同的错误消息。更重要的是，当最终代码使用最新的 Intel 12.x 编译器时，使用 Intel 11.x 编译 PETSc 会导致与 Intel 12.x 使用 11.x 相同的错误消息。

所以检查一下，那个 mpicc 真的使用 Intel 11.1.072 编译器。检查`mpic++ -show`和`which icc`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-21T08:53:14.877

也许英特尔环境没有设置。尝试以下环境设置：

```
source /etc/Intel_Compiler/10.0/XXXX/iccvars_intel64.sh
source /etc/Intel_Compiler/10.0/XXXX/ifortvars_intel64.sh 
```

将该文件夹添加到您的英特尔编译器文件夹中。有些版本的环境设置不同，你也可以试试：

```
source /etc/Intel_Compiler/10.0/XXXX/iccvars.sh intel64
source /etc/Intel_Compiler/10.0/XXXX/ifortvars.sh intel64 
```

希望有所帮助。

# c# - 了解一些单元测试实践

> ID：10889665
> 
> 赞同：2
> 
> 时间：2012-06-04T23:14:45.497
> 
> 标签：c#, unit-testing, nunit

我是单元测试的新手——我只使用 Testmethods 完成了基本的断言测试（我的最后一个模块，我创建了大约 50 个）。

我目前正在阅读一本关于单元测试的书，书中的众多示例之一让我为每个单独的测试创建一个新类。下面是仅为一个测试用例创建的示例对象之一。我的问题是有必要这样做吗？或者什么时候应该应用这种方法，什么时候不需要？

```
 public class and_saving_an_invalid_item_type : when_working_with_the_item_type_repository
    {
        private Exception _result;

        protected override void Establish_context()
        {
            base.Establish_context();

            _session.Setup(s => s.Save(null)).Throws(new ArgumentNullException());
        }

        protected override void Because_of()
        {
            try
            {
                _itemTypeRepository.Save(null);
            }
            catch (Exception exception)
            {
                _result = exception;
            }
        }

        [Test]
        public void then_an_argument_null_exception_should_be_raised()
        {
            _result.ShouldBeInstanceOfType(typeof(ArgumentNullException));
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T23:27:11.920

您是否需要为每个单独的测试创建一个新类？我会说不，你当然不会。我不知道这本书为什么这么说，或者他们是否只是为了帮助说明他们的例子。

为了回答你的问题，我建议为每组测试使用一个类*......*但它实际上比这更复杂一些，因为你如何定义“组”是不同的，并且取决于你当时在做什么.

以我的经验，一组测试在逻辑上确实像文档一样结构化，它可以包含一组或多组测试，按某些共同方面分组（有时嵌套）在一起。测试面向对象代码的自然分组是按类分组，然后按方法分组。

这是一个例子

*   1级测试
    *   测试方法 1
        *   方法 1 的主要行为
        *   方法 1 的替代行为
    *   测试方法 2
        *   方法 2 的主要行为
        *   方法 2 的替代行为

不幸的是，在 C# 或 java（或类似语言）中，您只有两个级别的结构可以使用（而不是您真正想要的 3 或 4 个），因此您必须修改一些东西以适应。

这样做的常用方法是使用一个类将一组测试组合在一起，并且不要在方法级别对任何东西进行分组，如下所示：

```
class TestsForClass1 {
  void Test_method1_primary()
  void Test_method1_alternate()

  void Test_method2_primary()
  void Test_method2_alternate()
} 
```

如果您的方法 1 和方法 2 都具有相同的设置/拆卸，那么这很好，但有时它们没有，导致这种故障：

```
class TestsForClass1_method1 {
  void Test_primary()
  void Test_alternate()
}

class TestsForClass1_method2 {
  void Test_primary()
  void Test_alternate()
} 
```

如果您有更复杂的需求（假设您对 method_1 进行了 10 个测试，前 5 个具有设置要求 X，接下来的 5 个具有不同的设置要求），那么人们通常最终会制作越来越多的类名，如下所示：

```
class TestsForClass1_method1_withRequirementX {  ... }
class TestsForClass1_method1_withRequirementY {  ... } 
```

这很糟糕，但是嘿 - 方钉，圆孔等。

就个人而言，我喜欢在方法中使用 lambda 函数来为您提供第三级分组。[NSpec](http://nspec.org/)展示了一种可以做到这一点的方法......我们有一个稍微不同的内部测试框架，它看起来有点像这样：

```
class TestsForClass1 {
   void TestsForMethod1() {
      It.Should("perform it's primary function", () => {
         // ....
      });

      It.Should("perform it's alternate function", () => {
         // ....
      });
   }
} 
```

这有一些缺点（如果第一个 It 语句失败，其他语句不会运行），但我认为这种权衡是值得的。）

* * *

- 最初的问题是：“真的有必要为我想要执行的每个测试创建一个对象吗？”。根据这个解释，答案是（大部分）是的。

通常，单元测试涉及两个部分的交互

*   被测对象。通常这是您编写的类或函数的实例
*   环境。通常这是您传递给函数的任何参数，以及对象可能引用的任何其他依赖项。

为了使单元测试可靠，这两个部分对于每个测试都需要“新鲜”，以确保系统的状态是健全和可靠的。

*   如果每次测试都没有刷新被测事物，那么一个函数可能会改变对象的内部状态，并导致下一次测试错误地失败

*   如果每次测试都没有刷新环境，那么一个函数可能会改变环境（例如：在外部数据库中设置一些变量或其他东西），这可能会导致下一次测试错误地失败。

显然有很多情况并非如此 - 例如，您可能有一个纯数学函数，它只将整数作为参数并且不涉及任何外部状态，然后您可能不想费心重新创建对象测试或测试环境......但一般来说，任何面向对象系统中的大多数东西都需要刷新，所以这就是为什么这样做是“标准做法”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T23:27:19.660

我不太能效仿你的例子，但理想情况下，任何测试用例都应该能够独立于其他任何东西运行 - 真的独立于*其他任何*东西。

# c - 来自 gtk_file_chooser_dialog_new () 的 g_slice_alloc () 分段错误

> ID：10889675
> 
> 赞同：0
> 
> 时间：2012-06-04T23:16:09.963
> 
> 标签：c, gdb, gtk, segmentation-fault

我正在用 gtk+ 2.0 和 gtksourceview 2.0 编写一个文本编辑器作为学习 C 的方式。当我尝试打开一个恰好位于 sshfs 上的文件时，我遇到了段错误。这并不总是一个问题，所以我不知道 sshfs 是否与它有关。

这是我的 open 函数中的一段代码：

```
 printf("\nentered open_activated\n");

  GtkSourceLanguage *lang;
  GtkSourceLanguageManager *lm;
  GtkWidget *dialog;
  GtkWidget *tablabel;
  GtkTextBuffer *tbuffer;
  int openTabs = 0;
  const gchar *folder;
  int page = 0;
  char *path,*string;

  page = gtk_notebook_get_current_page(GTK_NOTEBOOK(notebook));
  path  = paths[notebookPages[page]];
  folder = folderFromPath(path);
  printf("folder: %s\n\n",folder);

  dialog = gtk_file_chooser_dialog_new("Open File", parent, GTK_FILE_CHOOSER_ACTION_OPEN,GTK_STOCK_CANCEL,GTK_RESPONSE_CANCEL,GTK_STOCK_OPEN,GTK_RESPONSE_ACCEPT,NULL);
  gtk_file_chooser_set_current_folder (GTK_FILE_CHOOSER(dialog), folder); 
```

**附加信息**

notebookPages 是一个全局整数数组：

```
#define NUM_TABS 100
int notebookPages[NUM_TABS]; 
```

路径是一个全局字符数组：

```
char paths[NUM_TABS][200]; 
```

这是函数folderFromPath：

```
char * folderFromPath(char *path)
{
  printf("\nentered folderFromPath\n");

  char *token[80];
  int i = 0;  
  char str[80];
  strcpy(str,path);

    printf("path: %s\n", path);

  token[0] = strtok(str, "/");

  while (token[i]!= NULL)
  {
    i++;
    token[i] = strtok (NULL, "/");
  }

//   char folder[128];
    char *folder;
    folder = malloc(sizeof(path));

  if (folder != NULL)
  {
      int j = 0;
      strcpy(folder,"/");
      while (j < (i-1))
      {
              strcat(folder,token[j]);
              strcat(folder,"/");
          j++;
      }

      printf("folder: %s\n", folder);

    return folder;
      free(folder);
  }
  else
  {
    return "/";
  }
} 
```

这是来自 gdb 的回溯：

```
#0  0xb6e1d257 in g_slice_alloc () from /usr/lib/libglib-2.0.so.0
#1  0xb6e1e42e in g_slist_prepend () from /usr/lib/libglib-2.0.so.0
#2  0xb6e27c74 in g_once_init_enter_impl () from /usr/lib/libglib-2.0.so.0
#3  0xb739e24e in gtk_dialog_get_type () from /usr/lib/libgtk-x11-2.0.so.0
#4  0xb73d1527 in gtk_file_chooser_dialog_get_type () from /usr/lib/libgtk-x11-2.0.so.0
#5  0xb73d15d6 in ?? () from /usr/lib/libgtk-x11-2.0.so.0
#6  0xb73d1735 in gtk_file_chooser_dialog_new () from /usr/lib/libgtk-x11-2.0.so.0
#7  0x08050506 in open_activated (widget=0x8266878, parent=0x8083a60) at ledit.c:1715
#8  0xb6eea3dc in g_cclosure_marshal_VOID__VOID () from /usr/lib/libgobject-2.0.so.0
#9  0xb6ee8f5a in g_closure_invoke () from /usr/lib/libgobject-2.0.so.0
#10 0xb6efc816 in ?? () from /usr/lib/libgobject-2.0.so.0
#11 0xb6f05168 in g_signal_emit_valist () from /usr/lib/libgobject-2.0.so.0
#12 0xb6f05302 in g_signal_emit () from /usr/lib/libgobject-2.0.so.0
#13 0xb755a3af in ?? () from /usr/lib/libgtk-x11-2.0.so.0
#14 0xb6ee8f5a in g_closure_invoke () from /usr/lib/libgobject-2.0.so.0
#15 0xb6efc816 in ?? () from /usr/lib/libgobject-2.0.so.0
#16 0xb6f04f13 in g_signal_emit_valist () from /usr/lib/libgobject-2.0.so.0
#17 0xb6f05302 in g_signal_emit () from /usr/lib/libgobject-2.0.so.0
#18 0xb734aaa1 in gtk_accel_group_activate () from /usr/lib/libgtk-x11-2.0.so.0
#19 0xb734bf22 in gtk_accel_groups_activate () from /usr/lib/libgtk-x11-2.0.so.0
#20 0xb7575e7d in gtk_window_activate_key () from /usr/lib/libgtk-x11-2.0.so.0
#21 0xb7575eec in ?? () from /usr/lib/libgtk-x11-2.0.so.0
#22 0xb7427b44 in ?? () from /usr/lib/libgtk-x11-2.0.so.0
#23 0xb6ee7a37 in ?? () from /usr/lib/libgobject-2.0.so.0
#24 0xb6ee8f5a in g_closure_invoke () from /usr/lib/libgobject-2.0.so.0
#25 0xb6efc62c in ?? () from /usr/lib/libgobject-2.0.so.0
#26 0xb6f04f13 in g_signal_emit_valist () from /usr/lib/libgobject-2.0.so.0
#27 0xb6f05302 in g_signal_emit () from /usr/lib/libgobject-2.0.so.0
#28 0xb755bbc6 in ?? () from /usr/lib/libgtk-x11-2.0.so.0
#29 0xb7425d63 in gtk_propagate_event () from /usr/lib/libgtk-x11-2.0.so.0
#30 0xb742608f in gtk_main_do_event () from /usr/lib/libgtk-x11-2.0.so.0
#31 0xb72aa42a in ?? () from /usr/lib/libgdk-x11-2.0.so.0
#32 0xb6dfed42 in g_main_context_dispatch () from /usr/lib/libglib-2.0.so.0
#33 0xb6dff508 in ?? () from /usr/lib/libglib-2.0.so.0
#34 0xb6dffabb in g_main_loop_run () from /usr/lib/libglib-2.0.so.0
#35 0xb7424d59 in gtk_main () from /usr/lib/libgtk-x11-2.0.so.0
#36 0x0804d636 in main (argc=1, argv=0xbfad3774) at ledit.c:492 
```

我正处于学习阶段，我知道我真的需要了解更好的内存管理和指针。关于可能导致此段错误的任何想法？或者关于如何进一步排除故障的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:50:55.153

这一行非常危险：strcpy(str,path);

如果 path 的长度大于 str[] 的长度，可能会导致写入数组边界和其他不需要的结果。

请使用 strncpy 而不是 strcpy 或确保源字符串小于或等于目标字符串。

# haskell - 如何将多态函数应用于动态值

> ID：10889682
> 
> 赞同：19
> 
> 时间：2012-06-04T23:18:06.157
> 
> 标签：haskell, types, dynamic-typing

有没有一种理智的方法可以将多态函数应用于 type 的值`Dynamic`？

例如，我有一个类型的值，我`Dynamic`想将其应用于. 因此，如果该值是由我构建的，我希望结果是. 内部可以出现的不同类型的数量是没有限制的。`Just``Dynamic``toDyn True``toDyn (Just True)``Dynamic`

（当涉及的类型来自封闭的宇宙时，我有一个解决方案，但这很不愉快。）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-05T01:16:42.850

这可能不是最明智的方法，但我们可以滥用我的`reflection`包来对 TypeRep 撒谎。

```
{-# LANGUAGE Rank2Types, FlexibleContexts, ScopedTypeVariables #-}
import Data.Dynamic
import Data.Proxy
import Data.Reflection
import GHC.Prim (Any)
import Unsafe.Coerce

newtype WithRep s a = WithRep { withRep :: a }

instance Reifies s TypeRep => Typeable (WithRep s a) where
  typeOf s = reflect (Proxy :: Proxy s) 
```

鉴于我们现在可以查看`TypeRep`我们的`Dynamic`参数并适当地实例化我们的`Dynamic`函数。

```
apD :: forall f. Typeable1 f => (forall a. a -> f a) -> Dynamic -> Dynamic
apD f a = dynApp df a
  where t = dynTypeRep a
        df = reify (mkFunTy t (typeOf1 (undefined :: f ()) `mkAppTy` t)) $ 
                  \(_ :: Proxy s) -> toDyn (WithRep f :: WithRep s (() -> f ())) 
```

如果`base`只是`apD`为我们提供类似的东西可能会容易得多，但这需要 2 级类型，并且`Typeable`/`Dynamic`设法避免它们，即使`Data`没有。

另一种方法是仅利用以下实现`Dynamic`：

```
data Dynamic = Dynamic TypeRep Any 
```

`unsafeCoerce`对于你自己的数据类型，在内部`Dynamic'`做你需要做的事情，`TypeRep`在应用你的函数之后，`unsafeCoerce`一切都回来了。

# mysql - 使 MySQL 客户端程序线程安全？

> ID：10889686
> 
> 赞同：2
> 
> 时间：2012-06-04T23:18:52.350
> 
> 标签：mysql, c, multithreading, thread-safety, d

在运行使用 MySQL C API 的 D 编程时，我遇到了一个有趣的线程问题。我收到错误 2013“在查询期间丢失与 MySQL 服务器的连接”。当足够多的线程淹没网络接口缓冲区时，似乎会出现此问题，但服务器仍有更多要传输的内容。这是我基于一些研究并在两台不同的计算机上运行程序的最佳猜测。一台计算机与服务器具有 100Mb 连接，另一台具有 1Gb 连接。具有 100Mb 连接的计算机会引发错误，而 1Gb 计算机则不会。我想知道我是否遇到了 MySQL 文档中[如何编写线程客户端](http://dev.mysql.com/doc/refman/5.5/en/threaded-clients.html)的第一段中描述的内容。如果是，我需要用 SIGPIPE 做什么，我该怎么做？

对于那些感兴趣的人，我会在调用任何库之前调用 mysql_library_init，并且我正在使用 mysql_init 和 mysql_real_connect 为每个线程创建一个新的 MYSQL*。另外值得注意的是，我正在执行的查询是小型 SELECT，每个查询仅返回几千条记录，并且所有查询都是从同一个表中执行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:05:47.037

请在 mysql_real_connect 之前试试这个：

```
my_bool myb = 1;
mysql_options(conn, mysql_option.MYSQL_OPT_RECONNECT, &myb); 
```

也请检查这个mysql故障排除页面： [http ://dev.mysql.com/doc/refman/5.5/en/gone-away.html](http://dev.mysql.com/doc/refman/5.5/en/gone-away.html)

# maven - Maven 3插件单元测试中的RepositorySystemSession Null

> ID：10889693
> 
> 赞同：2
> 
> 时间：2012-06-04T23:19:53.483
> 
> 标签：maven, maven-plugin, maven-3, sonatype

我正在尝试使用 Maven 插件测试工具为依赖于 Aether 的 Maven 3 插件编写单元测试。**尽管RepositorySystemSession**为空，但在执行我的测试时，经过广泛的搜索，我无法弄清楚如何将会话注入单元测试插件工具。

我正在使用 Maven 3.0.3 核心 API、Maven 插件测试工具 2.0 和 Aether 1.12。我尝试了其他各种组合，但似乎在某个地方缺少一个关键组件。

该示例的代码库可以在这里找到：http: [//www.sonatype.com/people/2011/01/how-to-use-aether-in-maven-plugins/](http://www.sonatype.com/people/2011/01/how-to-use-aether-in-maven-plugins/)。

插件工具的文档可以在这里找到：[http](http://maven.apache.org/plugin-testing/maven-plugin-testing-harness/getting-started/index.html) ://maven.apache.org/plugin-testing/maven-plugin-testing-harness/getting-started/index.html 。

我的示例代码可以在这里看到：

[MyAetherMojo](https://gist.github.com/2871378 "MyAetherMojo")

[MyAetherMojoTest](https://gist.github.com/2871383 "MyAetherMojoTest")

关于如何将 RepositorySystemSession 注入容器以进行单元测试的任何想法？

TIA，斯科特 ES

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:48:57.370

插件测试工具不支持 Aether 测试。您必须使用 Maven Invoker 插件，如 How To Use Aether in Maven Plugins 演示代码中所示。

# c# - 如何在 Monotouch 中获取 iOS 设备和版本

> ID：10889695
> 
> 赞同：5
> 
> 时间：2012-06-04T23:20:08.637
> 
> 标签：c#, ios, xamarin.ios

如何确定正在使用我的应用程序的 iPhone、iPod、iPad 型号？我想得到如下输出：iPhone、iPhone 3G、iPhone 3GS 等

就像对简单目标 C 的回答一样：[在目标 C 中回答我的问题](https://gist.github.com/1323251)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T00:01:27.947

截至太平洋标准时间 3 月 24 日下午 3 点，使用此[示例](http://bscheiman.org/?p=199)并将其更新为当前的 iOS 设备和模拟器列表。享受。

```
using System;
using System.Runtime.InteropServices;
using MonoTouch.Foundation;
using MonoTouch.UIKit;

namespace YourNamespace
{
public class IOSDeviceHardware
{
    public const string HardwareProperty = "hw.machine";

    public enum IOSHardware {
        iPhone,
        iPhone3G,
        iPhone3GS,
        iPhone4,
        iPhone4RevA,
        iPhone4CDMA,
        iPhone4S,
        iPhone5GSM,
        iPhone5CDMAGSM,
        iPodTouch1G,
        iPodTouch2G,
        iPodTouch3G,
        iPodTouch4G,
        iPodTouch5G,
        iPad,
        iPad3G,
        iPad2,
        iPad2GSM,
        iPad2CDMA,
        iPad2RevA,
        iPadMini,
        iPadMiniGSM,
        iPadMiniCDMAGSM,
        iPad3,
        iPad3CDMA,
        iPad3GSM,
        iPad4,
        iPad4GSM,
        iPad4CDMAGSM,
        iPhoneSimulator,
        iPhoneRetinaSimulator,
        iPadSimulator,
        iPadRetinaSimulator,
        Unknown
    }

    [DllImport(MonoTouch.Constants.SystemLibrary)]
    static internal extern int sysctlbyname([MarshalAs(UnmanagedType.LPStr)] string property, IntPtr output, IntPtr oldLen, IntPtr newp, uint newlen);

    public static IOSHardware Version {
        get {
            var pLen = Marshal.AllocHGlobal(sizeof(int));
            sysctlbyname(IOSDeviceHardware.HardwareProperty, IntPtr.Zero, pLen, IntPtr.Zero, 0);

            var length = Marshal.ReadInt32(pLen);

            if (length == 0) {
                Marshal.FreeHGlobal(pLen);

                return IOSHardware.Unknown;
            }

            var pStr = Marshal.AllocHGlobal(length);
            sysctlbyname(IOSDeviceHardware.HardwareProperty, pStr, pLen, IntPtr.Zero, 0);

            var hardwareStr = Marshal.PtrToStringAnsi(pStr);

            Marshal.FreeHGlobal(pLen);
            Marshal.FreeHGlobal(pStr);

            if (hardwareStr == "iPhone1,1") return IOSHardware.iPhone;
            if (hardwareStr == "iPhone1,2") return IOSHardware.iPhone3G;
            if (hardwareStr == "iPhone2,1") return IOSHardware.iPhone3GS;
            if (hardwareStr == "iPhone3,1") return IOSHardware.iPhone4;
            if (hardwareStr == "iPhone3,2") return IOSHardware.iPhone4RevA;
            if (hardwareStr == "iPhone3,3") return IOSHardware.iPhone4CDMA;
            if (hardwareStr == "iPhone4,1") return IOSHardware.iPhone4S;
            if (hardwareStr == "iPhone5,1") return IOSHardware.iPhone5GSM;
            if (hardwareStr == "iPhone5,2") return IOSHardware.iPhone5CDMAGSM;

            if (hardwareStr == "iPad1,1") return IOSHardware.iPad;
            if (hardwareStr == "iPad1,2") return IOSHardware.iPad3G;
            if (hardwareStr == "iPad2,1") return IOSHardware.iPad2;
            if (hardwareStr == "iPad2,2") return IOSHardware.iPad2GSM;
            if (hardwareStr == "iPad2,3") return IOSHardware.iPad2CDMA;
            if (hardwareStr == "iPad2,4") return IOSHardware.iPad2RevA;
            if (hardwareStr == "iPad2,5") return IOSHardware.iPadMini;
            if (hardwareStr == "iPad2,6") return IOSHardware.iPadMiniGSM;
            if (hardwareStr == "iPad2,7") return IOSHardware.iPadMiniCDMAGSM;
            if (hardwareStr == "iPad3,1") return IOSHardware.iPad3;
            if (hardwareStr == "iPad3,2") return IOSHardware.iPad3CDMA;
            if (hardwareStr == "iPad3,3") return IOSHardware.iPad3GSM;
            if (hardwareStr == "iPad3,4") return IOSHardware.iPad4;
            if (hardwareStr == "iPad3,5") return IOSHardware.iPad4GSM;
            if (hardwareStr == "iPad3,6") return IOSHardware.iPad4CDMAGSM;

            if (hardwareStr == "iPod1,1") return IOSHardware.iPodTouch1G;
            if (hardwareStr == "iPod2,1") return IOSHardware.iPodTouch2G;
            if (hardwareStr == "iPod3,1") return IOSHardware.iPodTouch3G;
            if (hardwareStr == "iPod4,1") return IOSHardware.iPodTouch4G;
            if (hardwareStr == "iPod5,1") return IOSHardware.iPodTouch5G;

            if (hardwareStr == "i386" || hardwareStr=="x86_64")
            {
                if (UIDevice.CurrentDevice.Model.Contains("iPhone"))
                {
                    if(UIScreen.MainScreen.Scale > 1.5f)
                        return IOSHardware.iPhoneRetinaSimulator;
                    else
                        return IOSHardware.iPhoneSimulator;
                }
                else
                {
                    if(UIScreen.MainScreen.Scale > 1.5f)
                        return IOSHardware.iPadRetinaSimulator;
                else
                    return IOSHardware.iPadSimulator;
                }
            }

            return IOSHardware.Unknown;
        }
    }
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-05T10:49:58.640

在统一 api 中，您必须更新 dll 导入。

替换如下：

```
[DllImport ("libc", CallingConvention = CallingConvention.Cdecl)]
internal static extern int sysctlbyname([MarshalAs(UnmanagedType.LPStr)] string property, // name of the property
                                            IntPtr output, // output
                                            IntPtr oldLen, // IntPtr.Zero
                                            IntPtr newp, // IntPtr.Zero
                                            uint newlen // 0
    ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T10:32:00.137

截至 2013 年 3 月 24 日的此代码的新版本：

```
using System;
using System.Runtime.InteropServices;
using MonoTouch.Foundation;
using MonoTouch.UIKit;

namespace YourNamespace
{
    public class IOSDeviceHardware
    {
        public const string HardwareProperty = "hw.machine";

        public enum IOSHardware {
            iPhone,
            iPhone3G,
            iPhone3GS,
            iPhone4,
            iPhone4RevA,
            iPhone4CDMA,
            iPhone4S,
            iPhone5GSM,
            iPhone5CDMAGSM,
            iPodTouch1G,
            iPodTouch2G,
            iPodTouch3G,
            iPodTouch4G,
            iPodTouch5G,
            iPad,
            iPad3G,
            iPad2,
            iPad2GSM,
            iPad2CDMA,
            iPad2RevA,
            iPadMini,
            iPadMiniGSM,
            iPadMiniCDMAGSM,
            iPad3,
            iPad3CDMA,
            iPad3GSM,
            iPad4,
            iPad4GSM,
            iPad4CDMAGSM,
            iPhoneSimulator,
            iPhoneRetinaSimulator,
            iPadSimulator,
            iPadRetinaSimulator,
            Unknown
        }

        [DllImport(MonoTouch.Constants.SystemLibrary)]
        static internal extern int sysctlbyname([MarshalAs(UnmanagedType.LPStr)] string property, IntPtr output, IntPtr oldLen, IntPtr newp, uint newlen);

        public static IOSHardware Version {
            get {
                var pLen = Marshal.AllocHGlobal(sizeof(int));
                sysctlbyname(IOSDeviceHardware.HardwareProperty, IntPtr.Zero, pLen, IntPtr.Zero, 0);

                var length = Marshal.ReadInt32(pLen);

                if (length == 0) {
                    Marshal.FreeHGlobal(pLen);

                    return IOSHardware.Unknown;
                }

                var pStr = Marshal.AllocHGlobal(length);
                sysctlbyname(IOSDeviceHardware.HardwareProperty, pStr, pLen, IntPtr.Zero, 0);

                var hardwareStr = Marshal.PtrToStringAnsi(pStr);

                Marshal.FreeHGlobal(pLen);
                Marshal.FreeHGlobal(pStr);

                if (hardwareStr == "iPhone1,1") return IOSHardware.iPhone;
                if (hardwareStr == "iPhone1,2") return IOSHardware.iPhone3G;
                if (hardwareStr == "iPhone2,1") return IOSHardware.iPhone3GS;
                if (hardwareStr == "iPhone3,1") return IOSHardware.iPhone4;
                if (hardwareStr == "iPhone3,2") return IOSHardware.iPhone4RevA;
                if (hardwareStr == "iPhone3,3") return IOSHardware.iPhone4CDMA;
                if (hardwareStr == "iPhone4,1") return IOSHardware.iPhone4S;
                if (hardwareStr == "iPhone5,1") return IOSHardware.iPhone5GSM;
                if (hardwareStr == "iPhone5,2") return IOSHardware.iPhone5CDMAGSM;

                if (hardwareStr == "iPad1,1") return IOSHardware.iPad;
                if (hardwareStr == "iPad1,2") return IOSHardware.iPad3G;
                if (hardwareStr == "iPad2,1") return IOSHardware.iPad2;
                if (hardwareStr == "iPad2,2") return IOSHardware.iPad2GSM;
                if (hardwareStr == "iPad2,3") return IOSHardware.iPad2CDMA;
                if (hardwareStr == "iPad2,4") return IOSHardware.iPad2RevA;
                if (hardwareStr == "iPad2,5") return IOSHardware.iPadMini;
                if (hardwareStr == "iPad2,6") return IOSHardware.iPadMiniGSM;
                if (hardwareStr == "iPad2,7") return IOSHardware.iPadMiniCDMAGSM;
                if (hardwareStr == "iPad3,1") return IOSHardware.iPad3;
                if (hardwareStr == "iPad3,2") return IOSHardware.iPad3CDMA;
                if (hardwareStr == "iPad3,3") return IOSHardware.iPad3GSM;
                if (hardwareStr == "iPad3,4") return IOSHardware.iPad4;
                if (hardwareStr == "iPad3,5") return IOSHardware.iPad4GSM;
                if (hardwareStr == "iPad3,6") return IOSHardware.iPad4CDMAGSM;

                if (hardwareStr == "iPod1,1") return IOSHardware.iPodTouch1G;
                if (hardwareStr == "iPod2,1") return IOSHardware.iPodTouch2G;
                if (hardwareStr == "iPod3,1") return IOSHardware.iPodTouch3G;
                if (hardwareStr == "iPod4,1") return IOSHardware.iPodTouch4G;
                if (hardwareStr == "iPod5,1") return IOSHardware.iPodTouch5G;

                if (hardwareStr == "i386" || hardwareStr=="x86_64")
                {
                    if (UIDevice.CurrentDevice.Model.Contains("iPhone"))
                    {
                        if(UIScreen.MainScreen.Scale > 1.5f)
                            return IOSHardware.iPhoneRetinaSimulator;
                        else
                            return IOSHardware.iPhoneSimulator;
                    }
                    else
                    {
                        if(UIScreen.MainScreen.Scale > 1.5f)
                            return IOSHardware.iPadRetinaSimulator;
                    else
                        return IOSHardware.iPadSimulator;
                    }
                }

                return IOSHardware.Unknown;
            }
        }
    }
} 
```

# c++ - Clang 3.1 和用户定义的文字

> ID：10889697
> 
> 赞同：5
> 
> 时间：2012-06-04T23:20:13.880
> 
> 标签：c++, xcode4, c++11, clang

Clang 3.1 声称支持用户定义的文字。我可以这样定义：

```
int operator"" _tryit(long double n) { return int(n); } 
```

但是当我尝试使用它时出现错误：

```
int m = 5_tryit; 
```

> `'_tryit'`整数常量的后缀无效

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T23:38:29.550

`5`在您的情况下，不能隐式转换为 a `long double`。您需要对其进行更改`5.0`以使其成为 long double 或自己显式调用该函数以使隐式转换起作用：

```
int m = 5.0_tryit; 
```

或者

```
int n = operator"" _tryit(5); 
```

（用 测试过`clang version 3.1 (trunk) (llvm/trunk 155821)`）

[这个 SO question](https://stackoverflow.com/questions/4385297/overloading-rules-for-user-defined-literals-in-c0x)对规则有很好的解释。

（另外，正如 abarnert 提到的，确保`-std=c++11`在编译时将标志传递给编译器）。

# actionscript-3 - 为什么我的 EVENT.ACTIVE 触发两次？

> ID：10889698
> 
> 赞同：5
> 
> 时间：2012-06-04T23:20:14.963
> 
> 标签：actionscript-3

当我`EVENT.ACTIVATE`向我的项目添加一个监听器，然后 alt-tab 离开并返回我的项目时，它会触发两次。

**编辑： shaunhusain 和我似乎找到了问题的原因，尽管没有解决方案。运行独立播放器版本 11+ 时，事件触发 2x。当运行独立播放器版本 <11 或浏览器中的任何版本时，它会触发 1x。因此，最近版本的 Flash Player 投影仪似乎存在错误。我将确定确切的版本并将其报告给 adobe，看看会发生什么。感谢任何阅读本文并试图提供帮助的人！！**

我希望每次改变焦点时它都会触发，我只是不希望每次改变焦点时它都会触发*两次。*

为什么是这样？难道我做错了什么？防止这种行为的最佳方法是什么？

这似乎是一个常见的问题，但谷歌什么也没找到。

代码：

```
package 
{
    import flash.display.Sprite;
    import flash.events.Event;

    public class Main extends Sprite 
    {

        public function Main():void 
        {
            if (stage) init();
            else addEventListener(Event.ADDED_TO_STAGE, init);
        }

        private function init(e:Event = null):void 
        {
            removeEventListener(Event.ADDED_TO_STAGE, init);
            // entry point
            stage.addEventListener(Event.ACTIVATE, test);
        }

        private function test(e:Event):void
        {
            trace(e.target);
        }

    }

} 
```

实际结果：

```
[object Stage]
[object Stage] 
```

期望的结果：

```
[object Stage] 
```

是否将侦听器添加到舞台或其他任何东西似乎都没有区别，行为是相同的。

EVENT.DEACTIVATE 也会发生同样的事情。其他的，如鼠标向上工作正常。

我的目标是暂停游戏`EVENT.DEACTIVATE`并取消暂停`EVENT.ACTIVATE`。问题是当事件触发两次时，它会调用 unpause 函数两次，这会产生不必要的后果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:55:29.837

[Adobe® Flash® 平台的 ActionScript® 3.0 参考对这一事件进行了说明：](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/EventDispatcher.html)

> 当 Flash Player 或 AIR 应用程序获得操作系统焦点并变为活动状态时调度。此事件是一个广播事件，这意味着它由所有具有为此事件注册的侦听器的 EventDispatcher 对象调度。有关广播事件的详细信息，请参阅 DisplayObject 类。

对我来说，您似乎想阻止其设计行为？我想它的设计目的是在您每次改变焦点时触发，还是我错了？你想要完成什么？但是，这是一个答案，因此根据您所写的内容-您可以通过在他触发一次后删除侦听器来解决此问题：

```
 private function test(e:Event):void
    {
        stage.removeEventListener(Event.ACTIVATE, test);

        trace(e.target);
    } 
```

但是我建议你写更多关于你为什么使用它以及如果这不令人满意的话想要完成的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T18:52:21.767

我在我的 AIR 移动应用程序中遇到了同样的问题。

为了更正此问题，我存储了为激活/停用事件触发的最后一个事件名称。如果连续尝试两次，它只会被跳过`return;`

```
private static function onAppStateChanged(e:Event):void {
    if (_STATE == e.type) {
        return;
    }

    _STATE =    e.type;
    switch(_STATE) {
        case Event.ACTIVATE: whenActivated.dispatch(); break;
        case Event.DEACTIVATE: whenDeactivated.dispatch(); break;
    }
} 
```

起初， _STATE 的值以**null**开头，因此应该允许它第一次通过。

我在我的应用程序的初始化方法**中将 Event.ACTIVATE**和**Event.DEACTIVATE**绑定到同一个侦听器，如下所示：`onAppStateChanged`

```
_STAGE.addEventListener(Event.ACTIVATE, onAppStateChanged);
_STAGE.addEventListener(Event.DEACTIVATE, onAppStateChanged); 
```

您可以随意替换**Switch-Statement**，我个人更喜欢使用**Robert Penner 的 AS3Signals** ( [GitHub](https://github.com/robertpenner/as3-signals) ) 在整个应用程序中广播恢复/暂停信号。

# c# - 当我的 BackgroundWorker 抛出错误时，如何防止 Visual Studio 弹出

> ID：10889699
> 
> 赞同：5
> 
> 时间：2012-06-04T23:20:15.517
> 
> 标签：c#, exception-handling, backgroundworker

在调试我的应用程序时，我总是看到这样的消息：

> xxxxx.exe 中发生了“xxxx.xxxxx”类型的异常，但未在用户代码中处理。

问题是我有 BackgroundWorkers 在他们的 DoWork 中抛出异常，然后通过检查 RunWorkerCompletedEventArgs.Error 事件中的 RunWorkerCompletedEventArgs.Error 来处理这些异常 - 它在运行时工作得很好。

有什么办法可以防止视觉工作室将这些显示为“未处理”？

这不是将错误从 DoWork 返回到 UI 的正确方法吗？

我尝试让我的异常扩展 ApplicationException 并在异常对话框中取消选中 ApplicationException 旁边的框，但它仍然出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T23:26:44.887

您需要在 DoWork 方法调用的方法中捕获和处理异常。我的建议是捕获异常，然后使用 ReportProgress 事件将其报告回界面以便顺利处理/通知。您永远不想“吞下”异常，但此报告将允许您优雅地记录异常或以较少干扰的方式通知用户。

请记住，您需要使用[允许使用自定义 userState 的 ReportProgress](http://msdn.microsoft.com/en-us/library/a3zbdb1t.aspx)的重载，以便您可以报告正确的进度或附加完整的异常。

# jquery - 页面中的jquery移动锚链接

> ID：10889702
> 
> 赞同：1
> 
> 时间：2012-06-04T23:20:49.083
> 
> 标签：jquery, mobile, hyperlink, anchor, internal

我想通过在 jQuery 移动框架中使用锚标记和 id 来链接 html 页面的不同部分。但它似乎不像通常的 html 标签那样工作。这是我尝试过的代码。任何提示将不胜感激！

```
<div data-role="page">
...
<p> text continues..... 
<id="1"> more text continues..... 
<id="2"> more text continues..... 
<id="3"> more text continues..... 
<id="4"> more text continues..... 
</p>
...
<a href="#1" data-ajax="false">find #1</a>
<a href="#2" data-ajax="false">find #2</a>
<a href="#3" data-ajax="false">find #3</a>
<a href="#4" data-ajax="false">find #4</a>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T23:23:18.150

`<id>`不是有效的 html 标记。

你应该使用`<a name="one">`你的锚，然后`<a href="#one">`作为你的链接。

# sql - 是否可以在 Firebird 中创建私有存储过程？

> ID：10889704
> 
> 赞同：2
> 
> 时间：2012-06-04T23:21:02.513
> 
> 标签：sql, firebird, encapsulation

我知道我可以设置存储过程的权限，以便只有某些用户可以调用它们。但是有没有办法将一个过程标记为“私有”（在封装意义上），这样用户就不能直接调用它，但它仍然可以被用户调用的其他过程调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T01:21:23.400

在 Firebird 3（开发中）中，您可以拥有打包的私有过程和函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T08:01:38.407

您可以使用访问权限。只允许通过指定的过程、用户或角色执行“私有”过程。

# android - Android 布局 nullpointerException

> ID：10889705
> 
> 赞同：2
> 
> 时间：2012-06-04T23:21:03.480
> 
> 标签：android, android-layout, nullpointerexception

我有一个非常奇怪的例外！首先我引用一个相对布局，然后我尝试获取它的可见性状态，但是活动崩溃并在**getVisibilty()处抛出****NullPointerException**；我不知道为什么！，我花了很多时间试图找出问题，但我不能！，这是我的活动代码：

 **```
 setContentView(R.layout.main3d_activity);
    RelativeLayout optionLayout;
    optionLayout = (RelativeLayout) findViewById(R.id.main_optionLayout);
    int vis= optionLayout.getVisibility(); 
```

main3d_activity 代码：

```
 <?xml version="1.0" encoding="utf-8"?> 
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/MainLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <include
        android:id="@+id/include_headerbar"
        android:layout_width="fill_parent"
        android:layout_height="60dp"
        layout="@layout/headerbar_layout" />
    <include
        android:id="@+id/include_footerbar"
        android:layout_width="fill_parent"
        android:layout_height="60dp"
        android:layout_alignParentBottom="true"
        layout="@layout/footerbar_layout" />

    <ViewFlipper
        android:id="@+id/vf"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_above="@+id/include_footerbar"
        android:layout_below="@+id/include_headerbar" >

        <include
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            layout="@layout/container_mainlayout" />

        <include
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            layout="@layout/living_layout" />

        <include
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            layout="@layout/bedroom_layout" />

        <include
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            layout="@layout/childrenbedroom_layout" />

        <include
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            layout="@layout/kitchen_layout" />

        <include
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            layout="@layout/dinningroom_layout" />

        <include
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            layout="@layout/corridor_layout" />

        <include
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            layout="@layout/roof_layout" />

        <include
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            layout="@layout/garden_layout" />

        <include
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            layout="@layout/garage_layout" />

        <include
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            layout="@layout/container_mainlayout" />
    </ViewFlipper>

    <include
        android:layout_width="300dp"
        android:layout_height="match_parent"
        android:layout_above="@+id/include_footerbar"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/include_headerbar"
        layout="@layout/slidingdrawer_infolayout" />

    <include
        android:layout_width="300dp"
        android:layout_height="400dp"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        layout="@layout/slidingdrawer_roomslistlayout" />

    <include
        android:layout_width="350dp"
        android:layout_height="300dp"
        android:layout_above="@+id/include_footerbar"
        android:layout_alignParentRight="true"
        layout="@layout/logger_layout" />

    <include
        android:id="@+id/include_relativeMenu"
        android:layout_width="200dp"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/include_headerbar"
        layout="@layout/options_menulayout" />

</RelativeLayout> 
```

options_menuLayout xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/main_optionLayout"
android:layout_width="200dp"
android:layout_height="wrap_content"
android:layout_alignParentRight="true"
android:background="@drawable/main_headerbackground"
android:orientation="vertical"
android:visibility="invisible" >

<Button
    android:id="@+id/relativeMenuAllSensorsButton"
    android:layout_width="200dp"
    android:layout_height="50dp"
    android:layout_alignParentTop="true"
    android:background="@drawable/main_headerbackground"
    android:gravity="center_vertical|center_horizontal"
    android:text="Activation List"
    android:textColor="@android:color/white"
    android:textSize="18sp" />

<Button
    android:id="@+id/relativeMenuUsersButton"
    android:layout_width="200dp"
    android:layout_height="50dp"
    android:layout_below="@+id/relativeMenuAllSensorsButton"
    android:background="@drawable/main_headerbackground"
    android:gravity="center_vertical|center_horizontal"
    android:text="Users"
    android:textColor="@android:color/white"
    android:textSize="18sp" />

<Button
    android:id="@+id/relativeMenuPreferencesButton"
    android:layout_width="200dp"
    android:layout_height="50dp"
    android:layout_below="@+id/relativeMenuUsersButton"
    android:background="@drawable/main_headerbackground"
    android:gravity="center_vertical|center_horizontal"
    android:text="Settings"
    android:textColor="@android:color/white"
    android:textSize="18sp" /> 
```

我尝试清理项目，重建工作区，甚至使用不同的模拟器，但同样的问题仍然存在！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T23:46:53.087

在`main3d_activity.xml`你有：

```
<include
    android:id="@+id/include_relativeMenu"
    android:layout_width="200dp"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
     android:layout_below="@+id/include_headerbar"
    layout="@layout/options_menulayout" /> 
```

然后`options_menulayout.xml`你有：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/main_optionLayout" 
```

所以看起来你在包含它时覆盖了它。消除

```
 android:id="@+id/include_relativeMenu" 
```

从包含，或搜索该 ID 而不是另一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T23:45:15.863

如果您调用的视图位于另一个 .xml 文件中，而不是您在 etContentView 中设置的那个，那么不幸的是，您会得到一个由**findViewById()**返回的空值。那是你的情况：

**main3d_activity.xml**，其中不包含**R.id.main_optionLayout**

你必须使用 LayoutInflator

```
<include
    android:id="@+id/include_relativeMenu"
    android:layout_width="200dp"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/include_headerbar"
    layout="@layout/options_menulayout" /> 
```

编辑：

我注意到您正在使用 include 标签调用 options_menulayout，但使用

```
android:id="@+id/include_relativeMenu" 
```

您已将 *options_menulayout* 的 id 覆盖为 *include_relativeMenu*

你有两个选择：

1）删除分配给包含布局的新ID

```
android:id="@+id/include_relativeMenu" 
```

所以你的xml变成：

```
<include
    android:layout_width="200dp"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/include_headerbar"
    layout="@layout/options_menulayout" /> 
```

2) 通过调用获取对新分配的 id 的引用

> optionLayout = (RelativeLayout) findViewById(R.id.include_relativeMenu);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T23:39:47.973

您将ContentView 设置为main3d_activity，它不包含`R.id.main_optionLayout`哪个不是问题，直到您尝试在下一个方法中访问它的可见性。它为空，因为该视图 (main_optionLayout) 永远不会膨胀。

编辑~我在你的 main3d_activity 布局中看到了这段代码：

```
<include
    android:id="@+id/include_relativeMenu"
    android:layout_width="200dp"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/include_headerbar"
    layout="@layout/options_menulayout" /> 
```

老实说，我对 XML 中的包含还不够熟悉，无法真正说出这样做是否有问题，但我仍然认为您得到了空指针，因为您尝试访问的相对布局永远不会直接膨胀。**

# wpf - WPF/SL 动画时间缩放

> ID：10889706
> 
> 赞同：4
> 
> 时间：2012-06-04T23:21:07.673
> 
> 标签：wpf, silverlight, animation

我找了这个特别的东西，因为我觉得它很重要而且很令人费解，但是我没有找到任何关于这件事的东西。我正在考虑的是 WPF 和 Silverlight 动画中的时间缩放。

假设我们有一个持续 4 秒的 DoubleAnimation 并在 0 到 100 之间设置一个属性的动画。它是自动反转的，或者有一个互补动画可以反转它的效果，这并不重要。假设触发这个动画的事件是一个简单的 MouseOver。

这就是问题所在：我将光标悬停在一个元素上。该属性在 4 秒内从 0 变为 100。我将光标移开 1 秒，属性从 100 变为 75，然后我将鼠标悬停回来。现在该属性在 4 秒内从 75 变为 100。对用户来说很明显，动画运行速度慢了 4 倍。有没有办法缩放动画的时间？如果我想让这个动画在 1 秒内从 75 运行到 100，我会怎么做？我自己可能正在考虑一个转换器，它需要四个参数（绝对开始和结束、实际开始和整个间隔的时间跨度），然后吐出适当的时间。有没有更优雅的方式？

我注意到当动画很快时这通常不是问题。当动画运行在 0.2s 或 0.1s 时，人类并没有真正观察到速度上的差异，也许所有的动画都应该尽可能快，以免恶化体验。但是请从理论上处理这个问题（因此没有代码示例）。我只是好奇是否有任何适当的方法来缩放动画时间。

如果在网络上的某个地方有我的问题的答案，请直接把我带到那里。

帕维尔

PS不要介意我的英语，我不是母语人士;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:18:35.253

在让动画以您描述的方式线性表现时，我遇到了同样的问题。我找不到在 XAML 中使用 WPF 触发器而无需编写代码隐藏的解决方案。

然后我开始使用**VisualStateManager**而不是触发器（在 WPF 4 和 Silverlight 中受支持）。所有动画的表现都与您期望的一样！

我建议使用 Expression Blend 4 来使用 VisualStateManager，因为使用 UI 配置对象的各种状态只需要几秒钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:15:06.160

我做了更多的研究。看来，缩放动画时间的唯一好方法是使用 MultiConverter，它接受边界值（例如我之前示例中的 0 和 100）、动画属性的当前值以及完整动画的运行时间（例如我的例子中的4s）。然后它应该计算应该做多少百分比的动画（所以如果当前值是75，并且全范围是0-100，那么剩下25%的动画），返回值应该是前面提到的百分比原始时间跨度（4s 的 25% 是 1s）。也许这不是实现目标的最优雅的方式，但它似乎应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T07:28:53.083

我知道这不是您确切问题的答案，但解决此问题的一种方法是捕获`MouseEnter`and `MouseLeave`，检查当前动画状态并暂停或恢复它：

```
<UserControl
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Class="AnimationTest.MainPage"
    Width="640" Height="480">
    <UserControl.Resources>
        <Storyboard x:Name="Rotate" AutoReverse="True">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)" Storyboard.TargetName="textBlock">
                <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:4" Value="100"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
    </UserControl.Resources>

    <Grid x:Name="LayoutRoot" Background="White">
        <TextBlock x:Name="textBlock" Margin="197,216,200,215" TextWrapping="Wrap" Text="My Funky Text" FontSize="32" RenderTransformOrigin="0.5,0.5" MouseEnter="textBlock_MouseEnter" MouseLeave="textBlock_MouseLeave">
            <TextBlock.RenderTransform>
                <CompositeTransform/>
            </TextBlock.RenderTransform>
        </TextBlock>
    </Grid>
</UserControl> 
```

代码：

```
private void textBlock_MouseEnter(object sender, MouseEventArgs e)
{
    var state = Rotate.GetCurrentState();
    if (state == ClockState.Stopped || state == ClockState.Filling) { Rotate.Begin(); } else Rotate.Resume();
}

private void textBlock_MouseLeave(object sender, MouseEventArgs e)
{
    Rotate.Pause();
} 
```

# android - Android 的 Activity 注释

> ID：10889707
> 
> 赞同：0
> 
> 时间：2012-06-04T23:21:10.273
> 
> 标签：android, android-activity

Android Java SDK没有类似 MonoDroid [[Acitvity()]属性/注释的东西吗？](https://github.com/xamarin/monodroid-samples/blob/master/HelloWorld/HelloWorld.cs)虽然在 Java 中这并不奇怪（例如[WebServlet](http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/WebServlet.html)注释），但在 Android Java SDK 中不可能有类似的东西吗？

事实上，我已经厌倦了编辑 AndroidManifest.xml！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T01:01:07.997

事实上，您的所有活动都必须在清单中声明。到目前为止，我还没有看到任何解决此问题的方法。当然，您可以想象某种工具对您的应用程序进行后处理（通过 Eclipse 或类似的工具）并为您生成清单。但是，我没有见过这样的事情，并且怀疑这样的事情是否存在。相反，人们通常只是在清单中声明它们（最多需要几秒钟），或者在 Eclipse 中创建它们并让它完成“肮脏的工作”。

# jquery - Magento Homepage HTML 布局问题与 Jquery Slider - 代码/图片内

> ID：10889709
> 
> 赞同：0
> 
> 时间：2012-06-04T23:21:25.593
> 
> 标签：jquery, html, css, magento, layout

感谢您抽出时间来阅读。描述问题的最简单方法是查看它[http://foscam-uk.com/index.php](http://foscam-uk.com/index.php) （请注意，这是运行正确的 styles.css 而不是theme316，如本文后面所述）

如您所见，特色产品和畅销书块已移动到页面的最右侧，此时它们应该看起来像上面带有 jQ​​uery 滑块的图像：http: [//i.imgur.com/cl9fc.jpg](http://i.imgur.com/cl9fc.jpg)

我相信 style.css 中有一些东西可以在这里找到[http://foscam-uk.com/skin/frontend/default/mt_segina/css/styles.css](http://foscam-uk.com/skin/frontend/default/mt_segina/css/styles.css)因为我必须从以前的样式 css 中复制部分来自这里[http://foscam-uk.com/skin/frontend/default/theme316/css/styles.css](http://foscam-uk.com/skin/frontend/default/theme316/css/styles.css)

jQuery 的代码也可以在这里找到：http: [//foscam-uk.com/widget](http://foscam-uk.com/widget) （注意这是从原始的theme316 css 文件运行的）。

我知道这篇文章有点长，非常感谢所有花时间看这篇文章的人。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T02:33:57.763

我是否正确假设您的意思是块已移动到页面的最*左侧*？

我可以看到发生的是你有一个导致它粘在左边的东西`float:left`。`div.col-main`此外，您为此 div *680px*设置的宽度对于畅销商品和特色产品来说都太小了。尝试增加宽度以匹配其上方的 jQuery 滑块，并设置自动边距以使其水平居中。例如：

```
.col-main {
    width: 954px;
    padding: 0 0 1px;
    margin: 0 auto;
} 
```

或者你可以让它`div.col-main`嵌套在里面，`div.wrapper`而不用费心添加自定义宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:04:50.990

看起来 jQuery 和 Prototype 之间存在冲突。你是如何在你的网站中调用 jQuery 的？请参阅此博客了解更多信息： [http ://www.fontis.com.au/blog/magento/using-jquery-magento](http://www.fontis.com.au/blog/magento/using-jquery-magento)

或 [http://css-tricks.com/using-jquery-in-magneto/](http://css-tricks.com/using-jquery-in-magneto/)

有很多关于在 magento 中使用 jQuery 的文章。

# jquery - 如何根据相似内容对动态生成的内容进行分组

> ID：10889711
> 
> 赞同：1
> 
> 时间：2012-06-04T23:22:01.273
> 
> 标签：jquery

我有一个动态生成的页面，其中包含不同数量的项目（div.item）。每个项目都有一个带有“日期”类的内部 div。这些项目根据日期值从数据库中按升序排列。由于此页面内容取自数据库，可能有 10 个项目具有相同的日期，那么接下来的 3 个将共享一个日期，然后下一个 X 可能会共享另一个日期，以此类推。

根据 div.date 的内容，我想将所有具有相似日期的项目包装在 div.group 中。我更喜欢直接在 PHP 代码上执行此操作，但我继承了一个没有文档的大型凌乱项目，并且此选项只是临时的。目前的简化结构如下：

```
<div class="item">
  <div class="date">04-06-2012</div>
  <div class="other-content">Other Content</div>
</div>
<div class="item"> // To be grouped with above
  <div class="date">04-06-2012</div> 
  <div class="other-content">Other Content</div>
</div>
...
<div class="item"> // In it's own group
  <div class="date">08-06-2012</div>
  <div class="other-content">Other Content</div> 
</div>
... 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T23:35:32.823

这将按日期对所有项目进行分组，并将`div.group`元素附加到`body`.

```
var groups={}
$('div.item').each(function() {
    var dt = $(this).find ( '.date' ).text() 
    groups[dt] = groups[dt] || []
    groups[dt].push (this)
});
$.each (groups, function(k, v) {
    var group = $('<div/>').addClass('group')
    $.each (v, function(k, item) {
        $(item).detach().appendTo (group)
    });
    group.appendTo ( 'body' )  //or wherever you need to append it
}); 
```

# java - 比较字符串与等号

> ID：10889718
> 
> 赞同：-3
> 
> 时间：2012-06-04T23:23:23.680
> 
> 标签：java, string

```
String site_inclusion = "0;100";

for (String inc: site_inclusion.split(";")) {
   if(!inc.equals(String.valueOf(record.getAttrs().get(new PdsxAttrKey("SiteId")).getValue()))) {
      continue;         
   }
} 
```

并`record.getAttrs().get(new PdsxAttrKey("SiteId")).getValue()`返回`77`

所以从我的代码来看，它应该会`continue`阻塞吗？但它不会继续吗？

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:33:46.323

我建议您简化代码以测试发生了什么。您可能在尝试构建示例时犯了错误。

```
String site_inclusion = "0;100";

for (String inc: site_inclusion.split(";")) {
    String temp = String.valueOf(record.getAttrs().get(new PdsxAttrKey("SiteId")).getValue());
    if(!inc.equals(temp)) {
        System.out.println(inc + " != " + temp);
        continue;
    }
    System.out.println(inc + " == " + temp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T23:35:09.830

最好检查一下变量是什么（System.out.println/debugging）。它没有按照您认为的方式进行的原因肯定是`if`语句中的条件。

尝试将您的代码分成更小的部分。

```
String site_inclusion = "0;100";
            for(String inc : site_inclusion.split(";")) {
                int value = record.getAttrs().get(new PdsxAttrKey("SiteId")).getValue();
                System.out.println("Inc = " + inc + " and value = " + value);
                if(!inc.equals(String.valueOf(value))) {
                    System.out.println("continue");
                    continue;
                }
                System.out.println(inc + " equals " + value);
            } 
```

# javascript - javascript试图删除带有特定标签的所有东西

> ID：10889720
> 
> 赞同：2
> 
> 时间：2012-06-04T23:23:27.590
> 
> 标签：javascript, tags

我正在尝试使用javascript从页面中删除带有按钮或输入标签的所有内容......到目前为止，我的代码删除了其中一些，我不知道为什么。它只删除了许多复选框中的一个，以及 2 个按钮（有 3 个按钮）

```
var buttons = document.getElementsByTagName("button");
for (var j = 0; j < buttons.length ; j++)
{
    buttons[j].parentNode.removeChild(buttons[j]);
}

var checkboxes = document.getElementsByTagName("input");
for (var j = 0; j < buttons.length ; j++)
{
    checkboxes[j].parentNode.removeChild(checkboxes[j]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T23:26:54.557

```
var checkboxes = document.getElementsByTagName("input");
for (var j = 0; j < buttons.length ; j++) // You use the wrong variable here
{
    checkboxes[j].parentNode.removeChild(checkboxes[j]);
} 
```

应该;

```
for (var j = 0; j < checkboxes.length ; j++) 
```

关于未删除的按钮，也许是因为它是一个`input type="button"`而不是一个`<button>`？

请注意，`document.getElementsByTagName("input");`稍后将获取和删除所有输入，而不仅仅是复选框！

* * *

我可以建议您使用像 jQuery 这样的 javascript 库吗？你可以做到这一点，一行代码没有问题：

```
$('input[type="button"], input[type="checkbox"], button').remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T00:09:01.073

[`document.getElementsByTagName`](https://developer.mozilla.org/en/DOM/document.getElementsByTagName)返回一个*活动的* [NodeList](https://developer.mozilla.org/en/DOM/NodeList)。这意味着，当您删除第一个元素时，a) 长度会减小并且 b) 列表的（第一个）项目会移动。

有两种解决方法：

*   总是删除最后一个元素。NodeList 按文档顺序排列，因此可以：

    ```
    for (var i=buttons.length-1; i>=0; i--) // var i=buttons.length; while(i--)
        buttons[i].parentNode.removeChild(buttons[i]); 
    ```

*   始终删除第一个元素，并且在以下之前不要运行索引`length`：

    ```
    while (buttons.length) // > 0
        buttons[0].parentNode.removeChild(buttons[0]); 
    ```

它也适用于 jQuery 和 co，因为它们将 NodeList 项复制到静态数组中。你也可以自己做：

```
var staticButtons = Array.prototype.slice.call(buttons);
for (var i=0; i<staticButtons.length; i++)
    staticButtons[i].parentNode.removeChild(staticButtons[i]); 
```

或者您使用立即返回静态 NodeList 的文档选择方法，例如`querySelector`：

```
var staticList = document.querySelectorAll("button, input"); 
```

# iphone - 仅允许在 UITabViewController 中将一个选项卡的方向更改为横向

> ID：10889728
> 
> 赞同：2
> 
> 时间：2012-06-04T23:24:20.350
> 
> 标签：iphone, ios, objective-c, device-orientation, uitabview

这可能吗？我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T23:29:04.070

根据 Apple Docs 不可能。所有 UIViewControllers 都必须支持相同的方向才能旋转。

请参阅本文档（向下滚动到标题为“标签栏控制器和旋转”的部分：http: [//developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/TabBarControllers.html#//apple_ref /doc/uid/TP40011313-CH3-SW1](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/TabBarControllers.html#//apple_ref/doc/uid/TP40011313-CH3-SW1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T01:24:29.457

> 根据 Apple Docs 不可能。

可能这个词*可能*需要一个星号。看起来 Apple 并没有设想（或想要）你这样做。但是，根据您的要求，可能会有一种解决方法。

**免责声明：**这是一种黑客行为。我并不是说这是一个好的 UI，只是想向 Eli 展示什么是可能的。

我构建了一个示例，从用于构建**选项卡式应用程序**的 Xcode 模板开始。它有两个视图控制器：`FirstViewController`和`SecondViewController`. 我决定只制作`FirstViewController`风景视图。在 Interface Builder（Xcode UI 设计模式）中，我将 FirstViewController 视图的方向设置为横向，并将其大小设置为 480 宽 x 251 高（我在这里假设 iPhone/iPod）。

## 解决方案

现在，似乎有必要让所有标签栏的视图控制器**声称**支持自动旋转到纵向和横向。例如：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} 
```

所以，我的两个视图控制器都有相同的代码。但是，我所做的`FirstViewController`是也覆盖`willAnimateToInterfaceOrientation:duration:`并从根本上*撤消*基础设施所做的事情`UIViewController`，仅针对这个仅限横向的视图控制器。

FirstViewController.m:

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration {
    [super willAnimateRotationToInterfaceOrientation:interfaceOrientation duration:duration];

    CGAffineTransform viewRotation;
    CGRect frame;

    if (UIInterfaceOrientationIsLandscape(interfaceOrientation)) {
        viewRotation = CGAffineTransformIdentity;
        // TODO: change to dynamically account for status bar and tab bar height
        frame = CGRectMake(0, 0, 480, 320 - 20 - 49);        
    } else {
        viewRotation = CGAffineTransformMakeRotation(M_PI_2);
        // TODO: change to dynamically account for status bar and tab bar height
        frame = CGRectMake(0, 0, 320, 480 - 20 - 49);        
    }

    // undo the rotation that UIViewController wants to do, for this view heirarchy
    [UIView beginAnimations:@"unrotation" context: NULL];
    [UIView setAnimationDuration: duration];

    self.view.transform = viewRotation;
    self.view.frame = frame;

    [UIView commitAnimations];
} 
```

你得到的是标签栏将始终随设备旋转。这可能是一个要求，让您的双方向视图（例如`SecondViewController`）进行自动旋转。但是，`FirstViewController`现在的实际视图内容不会旋转。无论用户如何转动设备，它都会保持横向。那么，也许这对你来说已经足够了？

另外值得注意的是：

**1）**我更改了应用程序的信息 plist 文件以将**初始**方向设置为横向（因为我`FirstViewController`是横向的）：

```
<key>UISupportedInterfaceOrientations</key>
<array>
    <string>UIInterfaceOrientationPortrait</string>
    <string>UIInterfaceOrientationLandscapeLeft</string>        
    <string>UIInterfaceOrientationLandscapeRight</string>
</array>
<key>UIInterfaceOrientation</key>
<string>UIInterfaceOrientationLandscapeRight</string> 
```

**2)**在 FirstViewController.xib 中，我将 main/parent 设置`UIView`为**不 Autoresize Subviews**。根据您的视图层次结构，您可能也希望在其他子视图中更改此属性。您可以尝试该设置。

现在，随着状态栏和标签栏的旋转，横向视图的可用大小确实会发生一些变化。因此，您可能需要稍微调整布局。但是，基本上，无论用户如何握住他们的设备，您仍然可以看到显示横向内容的*广阔视野。*

## 结果

[观看运行应用程序的 Youtube 演示](http://www.youtube.com/watch?v=rB_8mAMB2k8)

# javascript - 有没有办法使用 javascript 在 iPad 上重定向页面而不会收到弹出警告

> ID：10889729
> 
> 赞同：0
> 
> 时间：2012-06-04T23:24:24.517
> 
> 标签：javascript, jquery, ipad, triggers

如果在 iPad 上查看网站，我需要将文件重定向到新选项卡。所以我有以下代码......

```
if(isMobile.any()) {
    window.open(_fileName);

} else {
    //code to display the file in the current window or tab on a computer

} 
```

这工作正常，但 iPad 将其视为弹出窗口并阻止它或抛出我的客户无法接受的警告对话框。据我了解，使用 window.open 无法避免此问题。

另一方面，如果用户单击在新选项卡中打开文件的链接，则 iPad 不会将其视为弹出窗口，因此不会阻止或警告。所以我想我可以做到这一点...

```
if(isMobile.any()) {
    var markup = "<a class='clickme' href="+_fileName+" target='_blank'>click me</a>";
    $('.myviewer').append(markup);
    $('.clickme').click();

} else {
    //code to display the file in the current window or tab

} 
```

虽然这适用于计算机，但它不适用于 iPad。在另一个线程中，有人告诉我它不应该在计算机上工作，但确实可以。

如果有某种方式可以触发 ipad 上的事件，我可以避免弹出窗口阻止程序的愤怒。

# css - 仅使用 CSS 控制（隐藏）图像的内容

> ID：10889731
> 
> 赞同：2
> 
> 时间：2012-06-04T23:24:45.093
> 
> 标签：css

是否有 CSS hack/技术来获取`<img>`元素（没有其他标记）并隐藏图像的像素内容，同时仍将其显示为具有背景颜色和描边的元素？

例如，`<img src="foo.jpg">`在页面上取一个 32x32 纯色徽章。

*虽然我对特定于浏览器的 hack（Webkit 是否具有填充效果？）或 CSS3 Awesomesauce（有`image-content-opacity:0.0`吗？）感兴趣，但我需要一个适用于 IE8+、FF4+ 等的解决方案。*

如果您对此问题的动机感兴趣，请参阅此页面的编辑历史记录。它已被删除，因为它分散了用户的注意力，让他们试图找到解决该问题的解决方法，而不是回答这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:49:45.223

这是我上面的评论和notme的解决方案的摘录：

[http://jsfiddle.net/ZUvHN/7/](http://jsfiddle.net/ZUvHN/7/)

我所做的是`display:table-cell`从 中删除`a`，然后将其设置为`display: block`

然后我设置`img`为`display: none`

这使您可以将边框和背景样式应用于`a`标签而不是`img`标签。您可能需要稍微调整边距和间距。

我不知道您是否可以选择，但通过 JavaScript 稍微调整 HTML 可能会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T00:09:18.330

隐藏图像并使用填充纯色的背景。
这里的例子[http://jsfiddle.net/notme/ZUvHN/6/](http://jsfiddle.net/notme/ZUvHN/6/)

# android - 在不使用 smoothScrollToPosition 的情况下转到 Listview 中的项目

> ID：10889732
> 
> 赞同：2
> 
> 时间：2012-06-04T23:24:50.397
> 
> 标签：android, list, listview, scroll, selection

我想在我的列表视图中转到（显示）特定项目但不滚动。我不想要任何动画，但我想立即传送到所需的项目。

我正在使用可检查的列表视图：`mylistview.setChoiceMode(1)`。

我知道这`mylistview.setSelection(position)`是解决方案，但是当我使用它时，什么也没有发生（可能是因为它是一个可检查的列表视图？）。

当我使用`mylistview.smoothScrollToPosition(position)`时，它运行良好，但我显然有这个我不想要的滚动动画。

我能做什么 ？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T23:51:56.033

试试这个：

```
 myListView.post(new Runnable() 
    {
        @Override
        public void run() 
        {
            myListView.setSelection(pos);
            View v = myListView.getChildAt(pos);
            if (v != null) 
            {
                v.requestFocus();
            }
        }
    }); 
```

来自 Romain Guy [Link的这个 Google Developer list 答案](http://code.google.com/p/android/issues/detail?id=6741)

# javascript - 如果编辑器的宽度太小，有没有办法将工具栏按钮包装到 TinyMCE 的下一行？

> ID：10889735
> 
> 赞同：8
> 
> 时间：2012-06-04T23:25:20.200
> 
> 标签：javascript, jquery, tinymce

我在高级主题中使用 TinyMCE。今天我必须提前指定每个工具栏行中的按钮：theme_advanced_buttons1、theme_advanced_buttons2 和theme_advanced_buttons3。

如果编辑器的宽度太小而无法将它们全部包含在一行中，有没有办法只指定一个按钮列表并让按钮换行到下一行？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-02-22T14:05:50.223

它自己不会这样做，但在 tinyMCE 4.X 中，您可以添加多个工具栏，如下所示

```
tinymce.init({
        selector: ".tinymce-textarea",
        theme: "modern",
        plugins: [
            "advlist autolink lists link image charmap print preview anchor",
            "searchreplace visualblocks code fullscreen textcolor emoticons",
            "insertdatetime media table contextmenu paste jbimages"//moxiemanager
        ],
        file_browser_callback: false,
        toolbar1: " bold italic | alignleft aligncenter alignright alignjustify | bullist numlist | outdent indent | link image media preview ",
        toolbar2: "forecolor backcolor emoticons | jbimages ",
        relative_urls : false

    }); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-05-01T23:30:30.393

我很惊讶这不是答案，但我只是使用了：

```
.mce-btn-group .mce-btn {
    float: left;
} 
```

我只有一个工具栏，在较小的屏幕上它只是根据需要包装。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T09:17:08.853

不，不幸的是，这是不可能的（使用 Tinymce3）。对于 Tinymce4，这是另一个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T12:42:46.370

你可以反过来做：[TinyMCE：如何在一行中显示所有工具栏？](https://stackoverflow.com/questions/11394608/tinymce-how-to-display-all-toolbars-on-a-single-row)

它不会单独包装每个按钮，但我认为你可以这样做更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-03T21:57:29.070

使用内联模式时是不可能的。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-06-01T16:42:29.587

适用于 TinyMCE 3.x

```
.mceToolbar td {float: left;} 
```

# javascript - 获取应用访问令牌的 Facebook 图形 api 调用返回“未知错误”

> ID：10889736
> 
> 赞同：2
> 
> 时间：2012-06-04T23:25:24.947
> 
> 标签：javascript, facebook, facebook-graph-api, oauth

我正在构建一个与 Facebook 集成的网络应用程序。我已经在 Facebook 上有一个应用程序 ID 和应用程序密码。

我想使用 javascript 来检索我的应用程序的访问令牌，以进一步发出应用程序对用户的应用程序请求。我正在按照[此处的说明进行操作](https://developers.facebook.com/docs/authentication/applications/)

但是，我无法使我的 FB.api 调用正常工作。我试过了

```
FB.api('https://graph.facebook.com/oauth/access_token','get',
    {client_id:'XXXXX', client_secret:'XXXXX',grant_type:'client_credentials'},
    function(response) {
        alert(JSON.stringify(response));
    }); 
```

和

```
FB.api("/oauth/access_token?client_id=XXXXXX" +                                                                   
    "&client_secret=XXXXXXXX&grant_type=client_credentials",                                    
    function(response) {                                                                                                
        alert(JSON.stringify(response));                                                                                
    }); 
```

但只是为了得到`{"error":{"type":"http","message":"unknown error"}}`

我是否错误地使用了 FB.api？目前，我找不到进一步的文档来说明我做错了什么。

另一方面，我可以使用以下网址从浏览器手动请求它： `https://graph.facebook.com/oauth/access_token?client_id=XXXXX&client_secret=XXXXXX&grant_type=client_credentials`

那么，我的代码中缺少什么？非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:48:19.133

您不需要公开您的应用程序机密。相反，您可以直接在调用中使用应用令牌（应用令牌在您重置密钥之前不会过期）。

Facebook 文档参考链接[访问令牌和类型](https://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)

玩得开心！！！

问候， hbk

# cocos2d-iphone - Cocos2d 2.0 - 左下角3个数字

> ID：10889743
> 
> 赞同：13
> 
> 时间：2012-06-04T23:26:39.907
> 
> 标签：cocos2d-iphone

我的 Cocos2D 2.0 项目的屏幕左下角有 3 个数字：

```
82
0.016
60.0 
```

60 可能是 FPS，其他两个呢？我记得，以前的 Cocos 版本只有 FPS 数字。

有什么线索吗？谢谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-07T13:48:26.143

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T00:09:03.270

上面的数字是 CCLayer 中精灵的数量等。

中间是 FPS 的毫秒数。

底部当然是你的FPS！:)

# php - magento - 静态块中的类别名称和图像？

> ID：10889747
> 
> 赞同：2
> 
> 时间：2012-06-04T23:27:07.823
> 
> 标签：php, magento

如何通过magento后端从magento中的静态块引用类别名称和图像？我正在运行1.7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T08:34:38.693

我不知道有一种方法可以轻松地从静态块中引用这些值。

相反，我建议您创建和使用一个小部件（在我看来，这是 Magento 最未充分利用的功能之一），它将提供一种更清洁、更可扩展的方式来实现这一点——尽管它确实需要更多的前期工作:)

请参阅下面的代码以获取 Magento 小部件的完整（简化）示例，它完全按照您从静态块中提出的要求：

应用程序/etc/modules/YourCompany_Categorywidget.xml

```
<config>
    <modules>
        <MyCompany_Categorywidget>
            <active>true</active>
            <codePool>community</codePool>
        </MyCompany_Categorywidget>
    </modules>
</config> 
```

应用程序/代码/社区/MyCompany/Categorywidget/etc/config.xml

```
<?xml version="1.0"?>

<config>
    <modules>
        <MyCompany_Categorywidget>
            <version>1.0.0</version>
        </MyCompany_Categorywidget>
    </modules>
    <global>
        <blocks>
            <categorywidget>
                <class>MyCompany_Categorywidget_Block</class>
            </categorywidget>
        </blocks>
        <helpers>
            <categorywidget>
                <class>MyCompany_Categorywidget_Helper</class>
            </categorywidget>
        </helpers>
    </global>
</config> 
```

应用程序/代码/社区/MyCompany/Categorywidget/etc/widget.xml

```
<?xml version="1.0"?>

<widgets>
    <category_widget type="categorywidget/catalog_category_widget_info" translate="name description" module="categorywidget">
        <name>Category Info Block</name>
        <description>Category Info Block showing name, image etc</description>
        <parameters>
            <block_title translate="label">
                <required>1</required>
                <visible>1</visible>
                <label>Block Title</label>
                <type>text</type>
            </block_title>
            <template>
                <required>1</required>
                <visible>1</visible>
                <label>Template</label>
                <type>select</type>
                <value>categorywidget/info.phtml</value>
                <values>
                    <default translate="label">
                        <value>categorywidget/info.phtml</value>
                        <label>Category Widget Info Block - Default Template</label>
                    </default>
                    <!-- Add different temmplates here for different block positions -->
                </values>
            </template>
            <category translate="label">
                <visible>1</visible>
                <required>1</required>
                <label>Category</label>
                <type>label</type>
                <helper_block>
                    <type>adminhtml/catalog_category_widget_chooser</type>
                    <data>
                        <button translate="open">
                            <open>Select Category...</open>
                        </button>
                    </data>
                </helper_block>
                <sort_order>10</sort_order>
            </category>
        </parameters>
    </category_widget>
</widgets> 
```

应用程序/代码/社区/MyCompany/Categorywidget/Helper/Data.php

```
<?php

class MyCompany_Categorywidget_Helper_Data extends Mage_Core_Helper_Abstract
{} 
```

app/code/community/MyCompany/Categorywidget/Block/Catalog/Category/Widget/Info.php

```
<?php

class MyCompany_Categorywidget_Block_Catalog_Category_Widget_Info
    extends MyCompany_Categorywidget_Block_Catalog_Category_Info
        implements Mage_Widget_Block_Interface
{
    protected function _prepareCategory()
    {
        $this->_validateCategory();

        $category = $this->_getData('category');
        if (false !== strpos($category, '/')) {
            $category = explode('/', $category);
            $this->setData('category', (int)end($category));
        }
        return parent::_prepareCategory();
    }
} 
```

app/code/community/MyCompany/Categorywidget/Block/Catalog/Category/Info.php

```
<?php

class MyCompany_Categorywidget_Block_Catalog_Category_Info extends Mage_Core_Block_Template
{
    protected $_category;

    protected function _beforeToHtml()
    {
        $this->_category = $this->_prepareCategory();
        return parent::_beforeToHtml();
    }

    protected function _prepareCategory()
    {
        $this->_validateCategory();
        return Mage::getModel('catalog/category')->load($this->_getData('category'));
    }

    protected function _validateCategory()
    {
        if (! $this->hasData('category')) {
            throw new Exception('Category must be set for info block');
        }
    }

    public function getCategoryName()
    {
        return $this->_category->getName();
    }

    public function getCategoryImage()
    {
        return $this->_category->getImageUrl();
    }
} 
```

app/design/frontend/base/default/template/categorywidget/info.phtml

```
<?php
    $_categoryName = $this->getCategoryName();
    $_categoryImage = $this->getCategoryImage();
 ?>

 <div class="categoryinfo_block block">
    <p><strong><?php echo $_categoryName ?></strong></p>
    <img src="<?php echo $_categoryImage ?>" alt="<?php echo $_categoryName  ?>" />
 </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T19:25:10.707

我希望图像也链接到类别，所以我添加了...

app/code/community/MyCompany/Categorywidget/Block/Catalog/Category/Info.php

```
public function getCategoryUrl()
{
    return $this->_category->getUrl();
} 
```

app/design/frontend/base/default/template/categorywidget/info.phtml

```
<?php
$_categoryName = $this->getCategoryName();
$_categoryImage = $this->getCategoryImage();
$_categoryUrl = $this->getCategoryUrl();
?>

<div class="categoryinfo_block block">
    <p><strong><?php echo $_categoryName ?></strong></p>    
    <a href="<?php echo $_categoryUrl ?>" title="<?php echo $_categoryName ?>" alt="<?php echo $_categoryName ?>">
        <img src="<?php echo $_categoryImage ?>" alt="<?php echo $_categoryName  ?>" />
    </a>
</div> 
```

如果这对其他人有帮助？

# php - PHP：gethostbyname() 和 checkdnsrr() 的结果不一致

> ID：10889753
> 
> 赞同：1
> 
> 时间：2012-06-04T23:28:17.777
> 
> 标签：php, gethostbyname

我正在编写一个简单的表单来检查 .com 域是否可用。我正在使用下面的代码为一堆测试域名评估 3 种方法（@dns_get_record、gethostbyname() 和 checkdnsrr()），但是我得到了 gethostbyname() 和 checkdnsrr() 的所有不可用条目，你可以如果您刷新几次，请参阅@http [: //suggestmyname.com/nonwp/arraypush.php。](http://suggestmyname.com/nonwp/arraypush.php)我在本地测试服务器上运行时没有遇到这个问题，有人知道为什么不一致吗？此外，并非所有域都在我的远程服务器上进行检查，而是在我的本地测试服务器上。

```
$sdomains = array();
array_push($sdomains, 'etc.com');

function domainAvailable1($domain){
$results = @dns_get_record($domain, DNS_ANY);
return empty($results);
}
function domainAvailable2($domain){
return gethostbyname($domain) == $domain;
}
function domainAvailable3($domain){
return !checkdnsrr($domain, 'ANY');
}

echo '<table><tr><td>@dns_get_record</td><td>gethostbyname</td><td>checkdnsrr</td></tr>';       

foreach($sdomains as $sdomain){
if (domainAvailable1($sdomain) == true){                    
            echo '<tr><td bgcolor=green>' . $sdomain . ' is available!</td>';
            } else {
            echo '<tr><td bgcolor=red>' . $sdomain . ' is NOT available.</td>';
            }
if (domainAvailable2($sdomain) == true){                    
            echo '<td bgcolor=green>' . $sdomain . ' is available!</td>';
            } else {
            echo '<td bgcolor=red>' . $sdomain . ' is NOT available.</td>';
            }
if (domainAvailable3($sdomain) == true){                    
            echo '<td bgcolor=green>' . $sdomain . ' is available!</td></tr>';
            } else {
            echo '<td bgcolor=red>' . $sdomain . ' is NOT available.</td></tr>';
            }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:56:31.217

我不确定使用这些功能中的任何一个（基本上通常使用 DNS）是确定域是否可用的可靠方法。

我有很多注册的域完全没有 DNS 记录，因此无法通过任何方式解析它们，但这些域当然被占用了。

虽然大多数域都会有一些 DNS 记录，但也会有没有任何 DNS 记录的情况。例如`mymoney.com`，您的脚本中的域表明它可以通过所有 3 次检查，但该域已注册。

最好的办法是使用[WHOIS](http://en.wikipedia.org/wiki/Whois)查询给定 TLD 的相应注册商，并使用 WHOIS 确定可用性。我认为如果您尝试使用 DNS，将会遇到误报或其他问题。

# node.js - connect.static() 用 node.js 解释 PHP 文件并连接

> ID：10889756
> 
> 赞同：0
> 
> 时间：2012-06-04T23:29:06.380
> 
> 标签：node.js, connect, nowjs-sockets

我使用 connect 和 nowjs 成功配置了节点。调用 localhost:8001/test.html 和 localhost:8001/chat.html 没有任何问题。但是当调用 PHP 文件 localhost:8001/test.php 时，我的浏览器希望我下载该文件。显然 connect.static 不会解释 PHP 文件。是否有其他可能让它适用于 html 和 php 文件？谢谢

```
 var http = require('http');
    var connect = require('connect');
    var nowjs = require("now");
    var app = connect();

    app.use(connect.static('/var/www/www.domain.com/htdocs'));
    app.use(function(req, res){
        res.end();
    });

    var server = http.createServer(app).listen(8001); 
    var everyone = nowjs.initialize(server); 
```

# svn - SVN 从当前提交中排除文件

> ID：10889762
> 
> 赞同：0
> 
> 时间：2012-06-04T23:31:04.090
> 
> 标签：svn, commit

我有一些文件我不想在这一次提交期间提交到我的 SVN，而将其余文件提交到存储库。是否有任何 SVN 命令我可以在某种意义上忽略我想要提交的指定文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:16:01.377

好吧，评论中指出的链接在一定程度上很有帮助，但是我最终要做的只是专门提交文件/文件夹，解决我不想提交的文件/文件夹

```
svn ci -m 'Message' folder/file 
```

可能不是最优雅的方法，但它奏效了，并且教会了我一个宝贵的教训，即在继续下一个之前确保经常提交每个移动的部分/部分。

# c# - 为什么我的伪对话框隐藏了它的“魅力”而忽略了它自己的属性？

> ID：10889763
> 
> 赞同：0
> 
> 时间：2012-06-04T23:31:05.897
> 
> 标签：c#, winforms, dialog

我创建了一个伪对话框（FormBorderStyle 属性设置为 FixedDialog 的表单），其中包含一个标签、一个 DatetimePicker 和一个 OK 按钮。OK 按钮的 DialogResult 属性为“OK”

改编自这篇文章：[How to return a value from a Form in C#?](https://stackoverflow.com/questions/5233502/c-sharp-return-value-from-form) ，我正在尝试创建一种方法来提示用户选择一个日期，当我的应用程序无法通过文件名确定日期时（有时可以，有时不能，具体取决于文件名是否“格式良好。”

代码如下。

问题是窗体在调用时不显示其控件；并且，它不会显示在屏幕中央，尽管它的 StartPosition = CenterScreen ...???

```
public partial class ReturnDate : Form {

public DateTime ReturnVal { get; set; }
private String _lblCaption;

public ReturnDate() {
    InitializeComponent();
}

public ReturnDate(String lblCaption) {
    _lblCaption = lblCaption; // "Object not set to an instance of an object" if I try to set the Label here directly
}

private void buttonOK_Click(object sender, EventArgs e)
{
    this.ReturnVal = dateTimePicker1.Value.Date;
    this.Close(); 
}

private void ReturnDate_Shown(object sender, EventArgs e) {
    labelCaption.Text = _lblCaption;
} 
```

}

...我有条件地像这样调用它：

```
public static DateTime getDateTimeFromFileName(String SelectedFileName) {
    // Expecting selected files to be valid pilsner files, which are expected
    // to be of the format "duckbilledPlatypus.YYYY-MM-DD.pil" such as:
    // "duckbilledPlatypus.2011-06-11.pil"
    const int DATE_BEGIN_POS = 19;
    const int DATE_LENGTH = 10;

String substr = string.Empty;
if (SelectedFileName.Length >= DATE_BEGIN_POS + DATE_LENGTH) {
    substr = SelectedFileName.Substring(DATE_BEGIN_POS, DATE_LENGTH);
}
DateTime dt = DateTime.Now;
if (!(DateTime.TryParse(substr, out dt))) {
    using (var dtpDlgForm = new ReturnDate("Please select the Date that the file was created:")) {
        DialogResult dr = dtpDlgForm.ShowDialog();
        if (dr == DialogResult.OK) {
            dt = dtpDlgForm.ReturnVal;
        } 
    }
}
return dt; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T00:04:55.590

如果将新的构造函数重载添加到 Form（或任何派生控件），则需要确保`InitializeComponent()`调用设计器生成的代码。

使您的新构造函数首先通过以下方式调用默认构造函数`: this()`：

```
public ReturnDate(String lblCaption) : this()
{
    _lblCaption = lblCaption; 
} 
```

# c# - 如何将位图转换为 Base64 字符串？

> ID：10889764
> 
> 赞同：53
> 
> 时间：2012-06-04T23:31:14.540
> 
> 标签：c#, image, base64

我正在尝试捕获屏幕，然后将其转换为 Base64 字符串。这是我的代码：

```
Rectangle bounds = Screen.GetBounds(Point.Empty);
Bitmap bitmap = new Bitmap(bounds.Width, bounds.Height);

using (Graphics g = Graphics.FromImage(bitmap))
{
   g.CopyFromScreen(Point.Empty, Point.Empty, bounds.Size);
}

// Convert the image to byte[]
System.IO.MemoryStream stream = new System.IO.MemoryStream();
bitmap.Save(stream, System.Drawing.Imaging.ImageFormat.Bmp);
byte[] imageBytes = stream.ToArray();

// Write the bytes (as a string) to the textbox
richTextBox1.Text = System.Text.Encoding.UTF8.GetString(imageBytes);

// Convert byte[] to Base64 String
string base64String = Convert.ToBase64String(imageBytes); 
```

使用richTextBox 进行调试，它显示：

> BM6�~

因此，由于某种原因，字节不正确，导致 base64String 变为空。知道我做错了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2015-05-05T08:19:00.320

我为我的问题找到了解决方案：

```
Bitmap bImage = newImage;  // Your Bitmap Image
System.IO.MemoryStream ms = new MemoryStream();
bImage.Save(ms, ImageFormat.Jpeg);
byte[] byteImage = ms.ToArray();
var SigBase64= Convert.ToBase64String(byteImage); // Get Base64 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-06-04T23:38:19.283

你得到的字符`System.Text.Encoding.UTF8.GetString(imageBytes)`将（几乎可以肯定）包含不可打印的字符。这可能会导致您只能看到那几个字符。如果您首先将其转换为 base64 字符串，则它将仅包含可打印字符并且可以显示在文本框中：

```
// Convert byte[] to Base64 String
string base64String = Convert.ToBase64String(imageBytes);

// Write the bytes (as a Base64 string) to the textbox
richTextBox1.Text = base64String; 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-01-10T20:47:27.960

不需要`byte[]`......只需直接转换流（使用构造）

```
using (var ms = new MemoryStream())
{    
  using (var bitmap = new Bitmap(newImage))
  {
    bitmap.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);
    var SigBase64= Convert.ToBase64String(ms.GetBuffer()); //Get Base64
  }
} 
```

# c# - C# - 从 excel 工作表中读取并将变量传递给函数

> ID：10889768
> 
> 赞同：0
> 
> 时间：2012-06-04T23:31:32.573
> 
> 标签：c#, asp.net, excel

我基本上是在寻找一些关于构建代码以读取 excel 文件和创建用户帐户的最佳方式的想法。

我已经有了读取 excel 文件和创建帐户的代码，但是我不确定将数据从 excel 表传递到“CreateUser”函​​数的最佳方法。

任何帮助表示赞赏。

干杯。

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.Data.OleDb;
using System.Data.SqlClient;
using System.IO;

namespace INB201_SAMS.Admin
{
    public partial class UploadList : System.Web.UI.Page
    {
        protected void UploadButton_Click(object sender, EventArgs e)
        {
            var upload = Path.Combine(Server.MapPath("~/upload"), "myfilename.xlsx");
            CSVUpload.SaveAs(upload);

            var excelConString = string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=Excel 12.0", upload);

            using (OleDbConnection con = new OleDbConnection(excelConString))
            {
                con.Open();

                OleDbCommand com = new OleDbCommand("Select * from [UserUpload$]", con);

                OleDbDataReader dr = com.ExecuteReader();

            }

            File.Delete(upload);

            Response.Write("Upload Successfull!");

        }

        protected bool CreateUser(string UsersUsername, string UsersPassword)
        {

            try
            {
                MembershipUser newUser = System.Web.Security.Membership.CreateUser(UsersUsername, UsersPassword);
                Roles.AddUserToRole(UsersUsername, "student");
                return true;
            }

            catch (Exception ex)
            {
                MessageYo.Text = ex.ToString();
                return false;
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T04:10:15.053

这是非常简单的事情：

```
while(dr.Read()) {
    string user = dr[0].ToString();
    string pass = dr[1].ToString();
    if(!String.IsNullOrWhiteSpace(user) && !String.IsNullOrWhiteSpace(pass)) 
       CreateUser(user, pass)
}
dr.Close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T04:46:21.450

我假设您的用户名和用户密码在两列中。在这种情况下。您可以通过特定标题读取 Excel 的特定列。这是对此的讨论：[http](http://social.msdn.microsoft.com/Forums/en-US/exceldev/thread/6506b0b1-be8c-40f9-879f-21715bd2792e) ://social.msdn.microsoft.com/Forums/en-US/exceldev/thread/6506b0b1-be8c-40f9-879f-21715bd2792e 。然后你可以将值传递给函数。

一种解决方法：[通过 XML 文件](http://www.codeproject.com/Tips/371595/Generate-Excel-from-XML-and-Generate-XML-from-Exce)，这意味着将 Excel 转换为 XML，然后从 xml 获取数据以运行。

# c++ - 翘曲透视

> ID：10889770
> 
> 赞同：1
> 
> 时间：2012-06-04T23:32:09.520
> 
> 标签：c++, image-processing, opencv

**我尝试使用以下代码获取逆透视以实时捕获到相机平面的帧：**

```
Mat dst;
    dst=dst.zeros(frame.cols,frame.rows,frame.type());  

    if(Found){

     Mat mmat;
     mmat.create(3,3,CV_32FC1);
     mmat=getPerspectiveTransform(templPoints,imgPoints);
     cout<< mmat<<endl<<endl;
     warpPerspective(frame,dst,Homo,dst.size(),INTER_LINEAR );
     imshow("out",dst);
    } 
```

**问题是 dst 图像完全是黑色的，我的代码有什么问题？**

![在此处输入图像描述](../Images/4791f134b4058feb957777bdc54169b9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T06:50:44.213

您看到的图像通常是`getPerspectiveTransform`按错误顺序发送源点的结果。这意味着这些点相互交叉，将出现三角形。检查点的顺序并确保它们与目标点的顺序相匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T20:13:17.293

您需要提供更多详细信息。为什么你同时调用 findHomography 和 getPerspectiveTransform？由于您同时调用两者，我假设 templPoints 和 imgPoints 的大小均为 4，在这种情况下，对 findHomography 的调用是多余的（并且 RANSAC 对您根本没有任何作用）。

您是否查看过 mmat * templPoints 的值（例如使用 matlab 或 octave，或手动）？它们应该等于 imgPoints，并且都在 [0, dst.width] x [0, dst.height] 内

# c# - Telerik_Web_UI_WebResource_axd 的问题

> ID：10889771
> 
> 赞同：3
> 
> 时间：2012-06-04T23:32:10.957
> 
> 标签：c#, asp.net, web-config, telerik, iis-7.5

当我运行我的网站时，我收到以下错误消息

**无法添加类型为“add”且唯一键属性“name”设置为“Telerik_Web_UI_WebResource_axd”的重复集合条目**

以下是 web.config 的内容...

```
 <httpHandlers>
      <add path="Telerik.Web.UI.WebResource.axd" type="Telerik.Web.UI.WebResource" verb="*" validate="false"/>
    </httpHandlers>

  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <validation validateIntegratedModeConfiguration="false"/>
    <handlers>
      <add name="Telerik_Web_UI_WebResource_axd" verb="*" preCondition="integratedMode" path="Telerik.Web.UI.WebResource.axd" type="Telerik.Web.UI.WebResource"/>
    </handlers>
  </system.webServer> 
```

如果我注释掉处理程序条目..我收到以下错误消息...

**web.config 中缺少“~/Telerik.Web.UI.WebResource.axd”。RadScriptManager 需要在 web.config 中注册一个 HttpHandler。请使用控件 Smart Tag 自动添加处理程序，或查看帮助以获取更多信息：控件 > RadScriptManager**

我完全不知道如何解决这个问题。我不知道如何使用智能标签。我用谷歌搜索，查看 SO，查看 Telerik 网站，但在任何地方都找不到解决方案。不知道问题出在我的web.config、虚拟目录还是哪里？？？我的同事有相同的代码库和 web.config，它适用于他们。

**编辑** 这是我的开发机器设置...

Windows 7 企业服务包 1 64 位操作系统

Visual Studio 2010 企业服务包 1 IIS 版本 7.5

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T23:40:46.773

问题*不会*出现在 IIS 配置中；因为错误消息专门指的是 Web.config 文件，所以它将在 .Net 中

如果您注释掉 httpHandlers 条目而不是 handlers 会发生什么？

编辑：查看您的 web.config 文件后，我唯一可以建议的是更改 system.webServer.handlers.add 部分的格式

```
<add name="Telerik_Web_UI_WebResource_axd" verb="*" preCondition="integratedMode" path="Telerik.Web.UI.WebResource.axd" type="Telerik.Web.UI.WebResource"/> 
```

至：

```
<add name="Telerik.Web.UI.WebResource"  path="Telerik.Web.UI.WebResource.axd" verb="*" type="Telerik.Web.UI.WebResource, Telerik.Web.UI" /> 
```

那是因为这就是 Telerik 建议的最佳实践；如果这不起作用，那么我很抱歉，但我今晚没有想法，但请留下这个问题，也许有更好想法的人会在早上看到它。

# compiler-construction - ANTLR 返回一组词法规则？

> ID：10889773
> 
> 赞同：1
> 
> 时间：2012-06-04T23:32:49.640
> 
> 标签：compiler-construction, antlr, interpreter, rules, antlr3

我可以用3 **INDENT**组替换以下语法中的**indent_loop[3]**吗？其中 INDENT 是缩进的词法规则。

 **我只想根据数字写出**INDENT**的数量。

```
match_node
        :   match_node_name (tree_operator) (NEW_LINE (indent_loop[3]) ( moduleCall | literals ))*
            { match_node_list.push($match_node_name.text); }
        |   SINGLE_QUOTE POINTE SINGLE_QUOTE 
        ;

    match_node_name
        :   IDENT_SMALL_LETTERS
        ;

    indent_loop[int scope]
        :   {scope == 3}? INDENT INDENT INDENT  
        |   {scope == 4}? INDENT INDENT INDENT INDENT   
        ;

    INDENT :  '\t'; 
```

当我这样做时，我无法回到我的调用规则并且无法返回这组缩进？意思是， ( moduleCall | literals ))* 没有被调用。

我哪里错了？我才刚刚开始。

或者有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:59:12.577

您可以通过使用语义谓词¹来做到这一点：

```
grammar T;

parse
 : digit[1] digit[2] digit[3] EOF
 ;

digit[int amount]
 : ({amount > 0}?=> DIGIT {amount--;})*
 ;

DIGIT
 : '0'..'9'
 ; 
```

`"456789"`使用从上述语法生成的解析器进行解析，将产生以下解析：

![在此处输入图像描述](../Images/957a0ab8b934a2847e5fc64c1f088ce9.png)

请注意，在您的情况下，您只是匹配一个制表符，不一定是缩进（即从行首开始的一个或多个制表符）。如果您只想从行首匹配缩进，（恕我直言）最简单的方法是在词法分析器²中处理它们。

* * *

¹ [ANTLR 中的“语义谓词”是什么？](https://stackoverflow.com/questions/3056441/what-is-a-semantic-predicate-in-antlr)
² [ANTLR 像缩进依赖语法那样实现python的最简单方法是什么？](https://stackoverflow.com/questions/8642154/antlr-what-is-simpliest-way-to-realize-python-like-indent-depending-grammar)**

# git - Git：生成在“功能”分支上所做的所有提交的补丁，而不参考提交 ID

> ID：10889774
> 
> 赞同：3
> 
> 时间：2012-06-04T23:32:53.460
> 
> 标签：git, branch, patch, format-patch

我们在两个分支中维护我们应用程序的两个版本：`free`和`master`（`master`是我们应用程序的高级版本）。这些分支非常相似，但是该`master`分支有一些`free`版本没有的额外应用程序功能，因此我们需要保持这两个分支持续运行。

定期我们需要修复错误或向`free`分支添加功能，我们需要在完成后将其应用到`master`分支。当我有这样的工作要做时，我会开始一个基于`free`调用的新分支，例如`newfeature`. 当我完成这个功能时，`newfeature`有 X 个新的提交。

在我`newfeature`重新合并之前，`free`我想知道我可以使用什么命令从`newfeature`现在需要应用到的所有提交中生成补丁`master`。目前，我只是这样做：

```
git format-patch aa99f9..e94904 
```

据我所知，我必须实际查找分支时的具体提交 ID `newfeature`，以及最后一次提交`newfeature`，这是一个拖累。我对提交 ID 不感兴趣，我不想输入它们。

我希望有一个我可以持续使用的命令，*git 将找出我正在谈论的提交*。每次都是相同的模式：给定分支`newfeature`，我想生成一个从**共同祖先`newfeature`到`free`****最新提交`newfeature`**的提交补丁。

是否有一些变更集表达式可以避免手动查找提交 ID 的需要？

PS：AFAIK，我不能`git rebase`用来执行此任务，因为这会将整个`free`分支合并到`master`. 我只想将`newfeature`分支独有的提交合并到`master`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:21:57.223

具体来说，您要的是：

```
git format-patch `git merge-base newfeature free`..newfeature
```

这样做可能会节省一些时间：

```
git checkout master
git cherry-pick `git merge-base newfeature free`..newfeature
```

根据您的工作流程，您可能只需要在合并功能之前创建补丁。IE：

```
git checkout newfeature
git rebase free
git format-patch free
```

听起来确实如此，但您的工作流程可以通过简单地将免费功能基于免费并将免费功能合并到高级分支来改进。

# javascript - 如何找到与 DOM 元素关联的 ASP.NET AJAX 事件处理程序？

> ID：10889779
> 
> 赞同：3
> 
> 时间：2012-06-04T23:33:28.207
> 
> 标签：javascript, asp.net, dom-events, asp.net-ajax

我正在自定义无法将源代码修改为的现有 ASP.NET 3.5 AJAX Web 应用程序（它是 SharePoint 2010）。

我需要添加一个单击事件处理程序作为关闭按钮上的第一个事件。但是，我想先检查一下已经在此按钮上注册的现有事件处理程序会做什么，所以我不会搞砸任何事情。

我仍在学习 ASP.NET AJAX，可以看到[Sys.UI.DomEvent 类](http://msdn.microsoft.com/en-us/library/bb311047%28v=vs.90%29)具有添加和删除事件处理程序的方法，但不能枚举它们。我了解 jQuery，并且熟悉 Chrome 中的 JavaScript 调试。

如何查看**注册了哪些事件**并在特定位置**插入自定义事件处理程序？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:00:33.067

There is a technique that will at least allow you to be the first in line (unless another script employs the same trick - unlikely).

What you have to do is hijack the click event. This related question demonstrates the technique: [Hijacking onchange event without interfering with original function](https://stackoverflow.com/questions/7744574/hijacking-onchange-event-without-interfering-with-original-function)

All we do is redefine the `click` function to be one of our own choosing, e.g.

```
var myButton = document.getElementById('button1')
var oldClick = myButton.click;

myButton.click = function(evt) {
  //do whatever you want.  When done, call the default click function:
  if (oldClick) oldClick(evt);
} 
```

(the syntax in the linked question is superior, but the above code is easier to read).

# jquery-ui-datepicker - jQuery DatePicker 日历没有返回正确的月份

> ID：10889780
> 
> 赞同：0
> 
> 时间：2012-06-04T23:33:34.067
> 
> 标签：jquery-ui-datepicker

我在这里太近了。我希望大师可以帮助我完成最后的工作。我正在使用来自 RSS 提要的 XML 填充 jQuery DatePicker 日历。单击有事件的突出显示日期后，我正在创建一个带有查询字符串的 URL，以便我可以显示单击日期的所有事件。一切正常...直到我通过单击上个月或下个月更改月份。我的脚本将返回正确的日期，但只返回当前月份。例如，我导航到 May 并单击 5th，我的 URL 将是 events.htm?month=june&day=5。关于为什么它不会返回我选择的月份的任何想法？这是我的代码：

```
var data = $.ajax({
  url: "news.xml",
  type: "GET",
  dataType: "xml",
  async:false,
  success: function(xml){
     return xml;
  }
} ).responseText;

$(document).ready(function() {

    var events = getSelectedDates();

    $("div.datepicker").datepicker({
        beforeShowDay: function(date) {
            var result = [true, '', null];
            var matching = $.grep(events, function(event) {
                    return event.published.getDate() === date.getDate() && event.published.getMonth() === date.getMonth() && event.published.getFullYear() === date.getFullYear();
            });

            if (matching.length) {
                result = [true, 'highlight', null];
            }
            return result;
        },
        onSelect: function(dateText) {
            var date, selectedDate = new Date(dateText),
                i = 0,
                event = null;

            while (i < events.length && !event) {
                date = events[i].published;

                if (selectedDate.getFullYear() === date.getFullYear() && 
                    selectedDate.getMonth() === date.getMonth() && 
                    selectedDate.getDate() === date.getDate()) {

                    event = events[i];
                }
                i++;
            }
            if (event) {
                var eMonNum = event.published.getMonth();
                var d = new Date();
                var eMonNum = new Array();
                eMonNum[0] = "january";
                eMonNum[1] = "february";
                eMonNum[2] = "march";
                eMonNum[3] = "april";
                eMonNum[4] = "may";
                eMonNum[5] = "june";
                eMonNum[6] = "july";
                eMonNum[7] = "august";
                eMonNum[8] = "september";
                eMonNum[9] = "october";
                eMonNum[10] = "november";
                eMonNum[11] = "december";
                var eMon = eMonNum[d.getMonth()];
                var eDay = event.published.getDate();
                window.location = "events.htm?month="+eMon+"&day="+eDay;
            }
        }
    });
});

function getSelectedDates() {
    return $(data).find('entry').map(function() {
        return {
            title: $('title', this).text(),
            published: new Date($('published', this).text())
        };
    }).get();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:47:39.403

发现问题，当您从资源中复制此列表时，您忘记替换变量。

更改（在月末列表中）

```
var eMon = eMonNum[d.getMonth()]; 
```

至：

```
var eMon = eMonNum[event.published.getMonth()]; 
```

我所做的只是摆脱了坏变量并将您的月份变量重新分配给您当天使用的变量。您也可以删除 d 变量的声明，因为您不需要它。

祝你好运！

# mysql - 将多个mysql脚本转换为sql server

> ID：10889781
> 
> 赞同：2
> 
> 时间：2012-06-04T23:33:34.800
> 
> 标签：mysql, sql-server

> **可能重复：**
> [将 MySQL 脚本转换为 MSSQL](https://stackoverflow.com/questions/1770795/convert-mysql-script-to-mssql)

我正在寻找一个（最好是免费的\ GPL）工具来将mysql脚本转换为mssql（2005/08）。

我知道网上有许多免费\付费工具可以将 mysql 数据库转换为 mssql 转储脚本，但这不是我需要的解决方案，因为我有一组 30 多个用于升级 mysql 数据库的 mysql 脚本（ALTER， CREATE TABLEs 等）需要转换为它们的 mssql 等效项。

因此，db -> script 解决方案不适合，因为我需要 script -> script 解决方案。

这样的工具存在吗？

# javascript - clearTimeout 在嵌套函数中不起作用

> ID：10889785
> 
> 赞同：1
> 
> 时间：2012-06-04T23:34:14.323
> 
> 标签：javascript, jquery, nested, settimeout

我认为这与嵌套函数有关，但它们需要这样。为什么它不起作用？我在做傻事吗？这是一个孤立的例子，我必须使用`$(this)`，所以看来我必须嵌套函数？

*HTML：*

```
<div class="box"></div>
<ul>
<li>Hover box, it turns blue. Leave box, it turns red after 2 secs.</li>
    <li>If you hover back onto box before 2 secs is up, it's supposed to clear timer and keep box blue.</li>
    <li>It doesn't clear timer and after 2 secs the box still turns red. Why?</li>
</ul> 
```

*JavaScript：*

```
var t;

$('.box').on('mouseenter', function() {

    $thisBox = $(this);

    clearTimeout(t);

    $thisBox.addClass('blue');

    $thisBox.on('mouseleave', function() {

        t = setTimeout(function() { $thisBox.removeClass('blue'); }, 2000);

     })

}); 
```

*​JSFiddle：http:* [//jsfiddle.net/ddbtZ/7/](http://jsfiddle.net/ddbtZ/7/)

谢谢你看:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T23:36:33.527

[http://jsfiddle.net/ddbtZ/3/](http://jsfiddle.net/ddbtZ/3/)

你`.on()`不应该嵌套。实际上，每次将鼠标悬停在元素上时都会附加一个新的处理程序。

编辑：根据问题说明。

使用`.one()`代替`.on()`

[http://jsfiddle.net/ddbtZ/8/](http://jsfiddle.net/ddbtZ/8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T23:37:37.927

将您`mouseleave`的`mouseenter`活动移出，它将起作用。

```
var t;

$('.box').on('mouseenter', function() {
    clearTimeout(t);
    $('.box').addClass('blue');
});

$('.box').on('mouseleave', function() {
    t = setTimeout(function() {
        $('.box').removeClass('blue');
    }, 2000);
})​; 
```

**演示：http:** [//jsfiddle.net/ddbtZ/4/](http://jsfiddle.net/ddbtZ/4/)

# google-bigquery - 直到昨天，Google BigQuery 才为我工作，无需计费。到目前为止我是幸运的吗？

> ID：10889790
> 
> 赞同：1
> 
> 时间：2012-06-04T23:35:12.560
> 
> 标签：google-bigquery

在过去的 3 周内（直到澳大利亚时间 6 月 4 日），我一直在使用 Google BigQuery，但没有启用计费功能。但是今天它给了我错误，指出“您必须启用计费”。

我的问题是：

到目前为止我是幸运的吗？或者最近发生了什么变化？

我开始使用带有公共数据的浏览器工具，然后我创建了几个表，一切正常，然后昨天开始使用命令行工具，今天它给了我错误。

有人遇到过类似的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T04:50:20.070

Google BigQuery 是一项高级服务，我们于 2012 年 6 月 1 日开始计费。我们在我们的[bigquery-announce](https://groups.google.com/d/topic/bigquery-announce/cIXAxYIKCHs/discussion)邮件列表（这是订阅新功能公告的列表）上发送了一个提醒，但这里的信息相同：

*   BigQuery API 允许最多 100GB/月的免费查询处理。

*   超过查询处理的免费层级后，您的项目必须注册计费。有关更多详细信息，请参阅我们的定价页面。这也是能够将数据加载到系统中所必需的。

*   如果您尚未为您的项目启用结算功能并且超出了免费配额，BigQuery API 将返回 403“billingNotEnabled”错误并显示以下消息：“尚未为此项目启用结算功能。”

*   要为您的项目启用结算功能，您必须使用 Google Checkout 注册信用卡。

*   有关更多信息，请参阅此链接以了解 Google API 控制台的概述。然后查看此页面以了解启用计费的步骤。

*   您的第一份帐单将于 2012 年 6 月末送达。

谢谢，迈克尔

# hadoop - 映射器类实例的生命周期

> ID：10889791
> 
> 赞同：0
> 
> 时间：2012-06-04T23:35:13.357
> 
> 标签：hadoop, mapreduce

将创建一个映射器类实例并将其用于一个 InputSplit（或映射器任务）？或者多个映射器类实例可以处理一个 InputSplit（或一个映射器任务）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T01:06:52.650

每个输入拆分都交给一个映射器，一个映射器只会处理一个输入拆分。

但是，如果您打开了映射器推测执行，则输入拆分可以由不同节点上的两个映射器并行运行（某些条件会触发推测执行，您应该能够搜索它们）。

此外，如果映射任务失败，则输入拆分将被安排在另一个集群节点上作为另一个映射任务运行。

# java - 通过 ObjectStream 序列化问题发送/接收

> ID：10889793
> 
> 赞同：0
> 
> 时间：2012-06-04T23:35:36.163
> 
> 标签：java, object, serialization, stream

所以这是我的问题。

我有一个客户端和一个服务器 java 程序。每个人都与另一个人建立和管理一个ObjectInputStream/ObjectOutputStream。

我希望能够发送对象（鉴于发送的所有对象都将扩展我制作的 Packet 类）。问题是，即使客户端和服务器可能具有完全相同的数据包类代码，我也会收到错误消息：

```
java.lang.ClassNotFoundException: shared.Packet0Connect
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at java.io.ObjectInputStream.resolveClass(Unknown Source)
    at java.io.ObjectInputStream.readNonProxyDesc(Unknown Source)
    at java.io.ObjectInputStream.readClassDesc(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at com.mooman219.gmail.server.ReceivePacketThread.run(ReceivePacketThread.java:19) 
```

看来java认为服务器上的Packet类是客户端上的不同类。

有没有办法解决这个问题（除了在客户端和服务器上具有相同的包名称）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T23:40:32.350

数据传输对象类必须是同一个类——它们必须具有相同的完全限定的类名（即相同的包名和相同的类名），而不仅仅是相同的内容。

序列化过程发出的字节流包括对象的完全限定类名（以及超类的 FQCN）。然后，它还包括非瞬态、非静态字段的序列化版本（除非您使用一种挂钩方法自定义了序列化过程）。

这是[字节流的示例](http://docs.oracle.com/javase/6/docs/platform/serialization/spec/protocol.html#10128)。请注意，在示例中，该类位于默认（空）包中，这使得我们正在讨论的内容的说明不太清楚。

# javascript - 如何在css/html/js中排列半圆的元素

> ID：10889796
> 
> 赞同：6
> 
> 时间：2012-06-04T23:35:58.450
> 
> 标签：javascript, css, html

我似乎不知道如何以半圆形形式标记短语列表（在附图中名为 title1、title2、title3 等）。也许有简单的 css 跨浏览器解决方案（不，不，没有 IE6，哈哈），或者我需要使用 javascript？我不能将它作为图像插入，因为我要求页面上的所有文本都应该是真实文本。

或者也许有一些 Jquery 插件可以解决这样的问题..

![例子](../Images/7660e8e9d12a6b2be99beff4ad2b084d.png)

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-04T23:48:41.123

我会使用 JavaScript 和一些简单的数学来计算每个标题的位置。圆上 x 和 y 位置的公式如下：

```
x = radius * cos( angle )
y = radius * sin( angle ) 
```

所以使用这个，你可以计算每个标题的位置：

```
elem.style.left = radius * Math.cos( angle ) + "px"; // angle in radians
elem.style.top = radius * Math.sin( angle ) + "px"; 
```

我做了一个演示小提琴显示这个：http: [//jsfiddle.net/eGhPg/](http://jsfiddle.net/eGhPg/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-04T23:55:13.053

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-05T15:52:47.203

Just for fun, another answer, probably heavier but i was already in the middle of it:

[http://jsfiddle.net/vecalciskay/Rah3D/2/](http://jsfiddle.net/vecalciskay/Rah3D/2/)

hope it helps

# django - django-axes 未捕获失败的登录尝试，但捕获管理员失败的尝试很好

> ID：10889799
> 
> 赞同：1
> 
> 时间：2012-06-04T23:36:21.250
> 
> 标签：django, authentication

我正在使用 Django-axes，并使用与 github 上的自述文件中描述的完全相同的步骤。我可以通过 django 视图很好地登录和注销，但是如果通过主网站，则不会捕获任何失败的登录尝试。尽管如此，来自管理站点的失败登录尝试被很好地捕获。我正在使用 FailedLoginMiddleware，并没有特定于管理员。我已经仔细检查了所有设置和配置，但我仍然无法找到问题的根源。请帮忙。

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'axes.middleware.FailedLoginMiddleware',
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'axes',
    'django.contrib.admin',
) 
```

这是项目 urls.py：

```
from django.conf.urls.defaults import patterns, include, url
from django.contrib.auth.views import login, logout, password_change 

from qs.forms import ValidatingPasswordChangeForm

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    (r'^login/$', login, {'template_name': 'auth/login.html'}),
    (r'^logout/$', logout, {'redirect_field_name': '/login', 
                            'template_name': 'auth/logged_out.html'}),
    (r'^passw_change/$', password_change, 
                           {'post_change_redirect': '/rage', 
                            'template_name': 'auth/password_change.html',
                            'password_change_form': ValidatingPasswordChangeForm}),

    (r'^passw_reset/$', 'views.rage_password_reset'),
    (r'^passw_reset/done/', 'views.rage_password_reset_done'),
    (r'^passw_reset/(?P<uidb36>[0-9A-Za-z]+)-(?P<token>.+)/$', 'views.rage_password_reset_confirm'),
    (r'^passw_reset/complete/$', 'views.rage_password_reset_complete'),

    url(r'^$', 'be.views.main.index'),
    url(r'^admin/', include(admin.site.urls)),
) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T18:40:48.943

我想不出您的配置不起作用的任何原因-我使用 django-axes 并且我的设置与您的完全相同，并且可以正常工作。但是，您可以通过执行以下操作强制轴记录所有内容：

1.  在你`axes.middleware.FailedLoginMiddleware`的. （显然不适合你，所以不要使用它。）`axes.middleware.FailedAdminLoginMiddleware``settings.py``FailedAuthLoginMiddleware`

2.  编辑您的`urls.conf`：

    ```
    ...
    from django.contrib.auth.views import login, logout, password_change
    from axes.decorators import watch_login
    ...
    urlpatterns = patterns('',
        (r'^login/$', watch_login(login), {'template_name': 'auth/login.html'}),
    ... 
    ```

这应该迫使轴记录尝试 - 这样做也可以揭示最初的问题是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T04:19:44.900

我有同样的问题，userena 正在捕获登录。如上所述将“watch_login”添加到用户名中的登录 URL 可以解决问题。

# windows - 使用 NamedPipe 时，有什么方法可以检测客户端管道的句柄是否关闭？

> ID：10889805
> 
> 赞同：2
> 
> 时间：2012-06-04T23:36:55.087
> 
> 标签：windows, winapi, pipe

我想知道是否有一种方法可以在 Windows 平台上从服务器端检测客户端管道句柄的状态。

即使客户端使用`CloseHandle()`功能关闭了管道（断开连接），似乎也无法从服务器端检测到它。

与句柄对象一起使用会`WaitForSingleObject()`返回`WAIT_OBJECT_0`，无论客户端句柄的状态如何。那么，从服务器端检测客户端管道的句柄是否以较低的成本关闭的好解决方案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T04:01:07.867

如果您正在从管道 (`PIPE_ACCESS_INBOUND`或`PIPE_ACCESS_DUPLEX`) 读取数据，您将`ERROR_BROKEN_PIPE`在客户端关闭管道末端时得到。即使您还没有准备好处理来自管道的数据，您也可以提前开始读取它（使用异步 I/O），以便检测管道何时损坏。

请注意，如果管道的客户端有多个句柄，则只有在关闭它的最后一个句柄时才会认为它已关闭。这可能是一个问题，例如，如果客户端无意中导致子进程继承句柄的副本。

我不知道有什么方法可以检测到客户端关闭了仅出站管道而不向其写入数据。最好的选择可能是使用`PIPE_ACCESS_DUPLEX`即使管道的入口侧仅用于检测管道何时破裂。

为了将来参考，虽然句柄可以用作同步对象，但不建议这样做，据我所知，唯一支持的用途是检测未指定事件对象的异步 I/O 操作的完成。

# ruby-on-rails - Rails 使用了不正确的 ruby 版本

> ID：10889809
> 
> 赞同：0
> 
> 时间：2012-06-04T23:37:49.143
> 
> 标签：ruby-on-rails, ruby

当我运行 rails 应用程序时，我运行的是旧版本的 ruby​​：

```
[2012-06-04 16:34:29] INFO  ruby 1.8.7 (2010-08-16) [x86_64-linux] 
```

我想运行 ruby​​ 1.9.2。我安装了 rvm 并选择了该 ruby​​ 版本。这是 rvm 列表的输出：

```
rvm rubies

=* ruby-1.9.2-p318 [ x86_64 ]
   ruby-1.9.3-p125 [ x86_64 ] 
```

但是，它不起作用。这是我的路径：

```
/usr/local/bin:/usr/bin:/bin:/home/charlie/.rvm/bin:/var/lib/gems/1.8/bin/:/usr/local/bin/:/usr/local/rvm/lib/:/vendor/bundle/ 
```

这是我的.bashrc：

```
PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting
PATH="${PATH}:/var/lib/gems/1.8/bin/"
PATH="${PATH}:/usr/local/bin/"
PATH="${PATH}:/usr/local/rvm/lib/"
PATH="${PATH}:/vendor/bundle/" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T02:15:04.260

我假设您正在尝试运行开发服务器，对吗？您可以`.rvmrc`在 Rails 应用程序根文件夹中创建一个：

```
rvm use 1.9.2-p318 
```

这样，每次`cd`进入 Rails 应用程序时，都会加载正确的环境。您也可以考虑为项目创建 gemset。

# c# - 如何让 Moq 忽略 ref 或 out 的参数

> ID：10889810
> 
> 赞同：24
> 
> 时间：2012-06-04T23:38:06.890
> 
> 标签：c#, moq

在 RhinoMocks 中，您可以将您的模拟作为一个笼统的声明告诉 IgnoreArguments。在 Moq 中，您似乎必须为每个参数指定 It.IsAny()。但是，这不适用于 ref 和 out 参数。在我需要 Moq 内部服务调用以返回特定结果的情况下，如何测试以下方法：

```
public void MyMethod() {
    // DoStuff

    IList<SomeObject> errors = new List<SomeObject>();
    var result = _service.DoSomething(ref errors, ref param1, param2);

    // Do more stuff
} 
```

测试方法：

```
public void TestOfMyMethod() {
    // Setup
    var moqService = new Mock<IMyService>();
    IList<String> errors;
    var model = new MyModel();

    // This returns null, presumably becuase "errors" 
    // here does not refer to the same object as "errors" in MyMethod
    moqService.Setup(t => t.DoSomething(ref errors, ref model, It.IsAny<SomeType>()).
        Returns(new OtherType()));  
} 
```

更新：因此，将错误从“ref”更改为“out”是可行的。所以看起来真正的问题是有一个你不能注入的 ref 参数。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-06T04:52:58.877

正如您已经发现问题在于您的`ref`论点。

Moq 目前仅支持`ref`参数的精确匹配，这意味着调用仅在您传递您在`Setup`. 所以没有一般​​匹配，所以`It.IsAny()`不会起作用。

请参阅最小起订量[快速入门](http://code.google.com/p/moq/wiki/QuickStart)

```
// ref arguments
var instance = new Bar();
// Only matches if the ref argument to the invocation is the same instance
mock.Setup(foo => foo.Submit(ref instance)).Returns(true); 
```

起订量[讨论组](https://groups.google.com/group/moqdisc/browse_thread/thread/a8a8f4dc68d852ab)：

> Ref 匹配意味着只有在使用同一个实例调用方法时才匹配设置。It.IsAny 返回 null，因此可能不是您要查找的内容。
> 
> 在设置中使用与实际调用中相同的实例，设置将匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-09T23:43:54.410

正如@nemesv 前面提到的， It.IsAny 返回 null 因此您不能将其用作 ref 参数。为了使调用起作用，需要将一个实际对象传递给它。

当您无权访问要通过 ref 传递的对象的创建时，就会出现问题。如果您确实可以访问真实对象，则可以简单地在测试中使用它，而完全忘记尝试模拟它。

这是使用提取和覆盖技术的解决方法，它可以让您做到这一点。顾名思义，您将有问题的代码提取到它自己的方法中。然后，在从被测类继承的测试类中重写该方法。最后，您设置您的真实对象，将其传递给您新创建的测试类，并根据需要测试您的引用调用。

这是一段很长的（人为的）代码，但它显示了之前和之后，最后通过了测试。

```
using System;
using System.Collections.Generic;
using Moq;
using MoqRefProblem;
using NUnit.Framework;

namespace MoqRefProblem
{
    //This class is the one we want to have passed by ref.
    public class FileContext
    {
        public int LinesProcessed { get; set; }
        public decimal AmountProcessed { get; set; }
    }

    public interface IRecordParser
    {
        //The ref parameter below is what's creating the testing problem.
        void ParseLine(decimal amount, ref FileContext context);
    }

    //This is problematic because we don't have a 
    //seam that allows us to set the FileContext.
    public class OriginalFileParser
    {
        private readonly IRecordParser _recordParser;

        public OriginalFileParser(IRecordParser recordParser)
        {
            _recordParser = recordParser;
        }

        public void ParseFile(IEnumerable<decimal> items)
        {
            //This is the problem
            var context = new FileContext();
            ParseItems(items, ref context);
        }

        private void ParseItems(IEnumerable<decimal> items, ref FileContext context)
        {
            foreach (var item in items)
            {
                _recordParser.ParseLine(item, ref context);
            }
        }
    }

    }

    //This class has had the creation of the FileContext extracted into a virtual 
    //method. 
    public class FileParser
    {
        private readonly IRecordParser _recordParser;

        public FileParser(IRecordParser recordParser)
        {
            _recordParser = recordParser;
        }

        public void ParseFile(IEnumerable<decimal> items)
        {
            //Instead of newing up a context, we'll get it from a virtual method 
            //that we'll override in a test class.
            var context = GetFileContext();
            ParseItems(items, ref context);
        }

        //This is our extensibility point
        protected virtual FileContext GetFileContext()
        {
            var context = new FileContext();
            return context;
        }

        private void ParseItems(IEnumerable<decimal> items, ref FileContext context)
        {
            foreach (var item in items)
            {
                _recordParser.ParseLine(item, ref context);
            }
        }
    }

    //Create a test class that inherits from the Class under Test    
    //We will set the FileContext object to the value we want to
    //use.  Then we override the GetContext call in the base class 
    //to return the fileContext object we just set up.
    public class MakeTestableParser : FileParser
    {
        public MakeTestableParser(IRecordParser recordParser)
            : base(recordParser)
        {
        }

        private FileContext _context;

        public void SetFileContext(FileContext context)
        {
            _context = context;
        }

        protected override FileContext GetFileContext()
        {
            if (_context == null)
            {
                throw new Exception("You must set the context before it can be used.");
            }

            return _context;
        }
    }

[TestFixture]
public class WorkingFileParserTest
{
    [Test]
    public void ThisWillWork()
    {
        //Arrange
        var recordParser = new Mock<IRecordParser>();

        //Note that we are an instance of the TestableParser and not the original one.
        var sut = new MakeTestableParser(recordParser.Object);
        var context = new FileContext();
        sut.SetFileContext(context);

        var items = new List<decimal>()
            {
                10.00m,
                11.50m,
                12.25m,
                14.00m
            };

        //Act
        sut.ParseFile(items);

        //Assert
        recordParser.Verify(x => x.ParseLine(It.IsAny<decimal>(), ref context), Times.Exactly(items.Count));
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-09T12:18:54.697

回答于：[设置最小起订量以忽略虚拟方法](https://stackoverflow.com/questions/2375997/setting-up-moq-to-ignore-a-virtual-method) 我相信在模拟上设置“CallBase = true”会起作用。请参阅快速入门的“自定义模拟行为”部分

# symfony - Symfony2 获取在服务中调用服务的控制器

> ID：10889813
> 
> 赞同：0
> 
> 时间：2012-06-04T23:38:29.730
> 
> 标签：symfony

我创建了一些自定义记录器来帮助开发。但是，我想知道是否有任何方法可以查看哪个控制器调用了生成日志条目的相关函数？

我听说 kernel.request 包含相关信息，但我不知道如何获取它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:53:40.650

`getTrace`您可以使用或(http://uk3.php.net/manual/en/exception.gettraceasstring.php)从 Exception 对象获取堆栈跟踪，`getTraceAsString`它应该为您提供调用服务的控制器。

# javascript - jQuery - 引用附近的元素

> ID：10889817
> 
> 赞同：0
> 
> 时间：2012-06-04T23:39:13.043
> 
> 标签：javascript, jquery, html, jquery-selectors

当“产品输入”的值发生变化时，我希望“产品总计”更新。我有活动，但我似乎无法提及“产品总数”。

这是HTML：

```
<div class='product'>
    <h2>Photo Prints up to 5” x 7”&lt;/h2>
    <div class='product-total'></div>
        <div class='choices'>
        <input type='text' class='raw standard product-input'  />
    </div> <!-- END Choices -->

    Standard: <input type='radio' class='quality standard' value='standard' />
    Full: <input type='radio' class='quality full' value='full' />

</div> <!-- END Product --> 
```

和 jQuery：

```
jQuery('input.product-input').change(function() {
        jQuery('div.product-total', jQuery(this).parent('div.product')).html(total);

    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T23:41:27.060

代替：

```
jQuery(this).parent('div.product') 
```

和：

```
jQuery(this).closest('div.product') 
```

*   `parent`只升一级。
*   `closest`向上直到找到第一个匹配项。

完整代码：

```
jQuery(this).closest('div.product').find('div.product-total').html(total); 
```

`find`比上下文选择器更好，因为实际上`find`是上下文选择器使用的，所以你可以在第一时间使用它并保存那次旅行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T23:45:07.197

我将其发布为答案，以便更清楚。尝试这个：

```
 jQuery('input.product-input').change(function() {
     jQuery('div.product-total').html(total);
  }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T23:50:56.397

在你的 jquery 中尝试改变这个

jQuery('div.product-total', jQuery(this).parent('div.product')).html(total);

为此（我使用了 $ 语法，但它的使用与功能无关）

 $(this).closest('div.product').find('product-total').html(total);

...并确保填充总数。

# php - 带有 PHP 的水印

> ID：10889826
> 
> 赞同：0
> 
> 时间：2012-06-04T23:40:57.480
> 
> 标签：php, gd, watermark

> **可能重复：**
> [如何将图像添加到 PHP 中的图像上，如水印](https://stackoverflow.com/questions/1217820/how-can-i-add-an-image-onto-an-image-in-php-like-a-watermark)

我正在使用 PHP，我想在一些照片中添加水印。

像这样的东西：![水印](../Images/83a4c5f546a946edb95042081bbbd64f.png)

[注意 9GAG.COM/GAG/4203228；像页脚]

我知道用GD库可以加水印，但是不知道怎么加。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T23:43:51.860

我猜[imagecopymerge](http://www.php.net/manual/en/function.imagecopymerge.php)是您正在寻找的 GD 功能。

# c - 尝试在 Mac 终端中编译 hello world C 程序时出现 Permission Denied 错误

> ID：10889827
> 
> 赞同：1
> 
> 时间：2012-06-04T23:41:11.960
> 
> 标签：c, macos, terminal, permission-denied

我正在尝试在 mac 终端中编译一个 hello world c 程序，我正在生成这些错误：

```
mysource.c:1:19: error: /usr/local/include/stdio.h: Permission denied
mysource.c: In function ‘main’:
mysource.c:3: warning: incompatible implicit declaration of built-in function ‘printf’ 
```

这是我在终端中输入的内容（mysource 是 .c 文件的名称）：

```
MacBook-Pro:~ drummer0014$ gcc mysource.c -o mysource 
```

我安装了 xcode 3 并产生了同样的错误，所以我今天刚刚安装了 xcode 4.2 并且遇到了同样的错误。我在运行雪豹的macbook上。我还尝试输入 gcc 然后将文件拖到终端中，以便它具有完整路径，但我得到了同样的错误。任何帮助将不胜感激。

当我输入 gcc --verbose mysource.c -o mysource 这是我收到的内容：

```
 Using built-in specs.
    Target: i686-apple-darwin10
    Configured with: /private/var/tmp/llvmgcc42/llvmgcc42-2336.1~3/src/configure --disable-         checking --enable-werror --prefix=/Developer/usr/llvm-gcc-4.2 --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-prefix=llvm- --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin10 --enable-         llvm=/private/var/tmp/llvmgcc42/llvmgcc42-2336.1~3/dst-llvmCore/Developer/usr/local --program-prefix=i686-apple-darwin10- --host=x86_64-apple-darwin10 --target=i686-apple-darwin10 --with-gxx-include-dir=/usr/include/c++/4.2.1
Thread model: posix
    gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.1.00)
     /usr/llvm-gcc-4.2/bin/../libexec/gcc/i686-apple-darwin10/4.2.1/cc1 -quiet -v -imultilib    x86_64 -iprefix /usr/llvm-gcc-4.2/bin/../lib/gcc/i686-apple-darwin10/4.2.1/ -D__DYNAMIC__ mysource.c -fPIC -quiet -dumpbase mysource.c -mmacosx-version-min=10.6.8 -m64 -mtune=core2 -auxbase mysource -version -o /var/folders/7r/7rMZhHx3F0WhnoyEK1zUgE+++TI/-Tmp-//ccaqeJkd.s
ignoring nonexistent directory "/usr/llvm-gcc-4.2/bin/../lib/gcc/i686-apple-darwin10/4.2.1/../../../../i686-apple-darwin10/include"
ignoring nonexistent directory "/Developer/usr/llvm-gcc-4.2/lib/gcc/i686-apple-darwin10/4.2.1/../../../../i686-apple-darwin10/include"
    #include "..." search starts here:
    #include <...> search starts here:
     /usr/llvm-gcc-4.2/bin/../lib/gcc/i686-apple-darwin10/4.2.1/include
     /usr/local/include
     /Developer/usr/llvm-gcc-4.2/lib/gcc/i686-apple-darwin10/4.2.1/include
     /usr/include
     /System/Library/Frameworks (framework directory)
     /Library/Frameworks (framework directory)
    End of search list.
    GNU C version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.1.00) (i686-apple-    darwin10)
    compiled by GNU C version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.1.00).
    GGC heuristics: --param ggc-min-expand=150 --param ggc-min-heapsize=131072
    Compiler executable checksum: e787fa4ffdc9e78ad5e913828c220d85
    mysource.c:1:19: error: /usr/local/include/stdio.h: Permission denied
    mysource.c: In function ‘main’:
    mysource.c:3: warning: incompatible implicit declaration of built-in function ‘printf’ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T00:04:36.853

STATUS_ACCESS_DENIED 是正确的，但我暂时不会更改权限`/usr/local`。在典型的 Mac OS X 安装中，`/usr/local`不用于任何用途。如果有任何东西，那就是第三方软件。

所以，真正的问题是为什么 GCC 在那里寻找（和寻找）头文件。我怀疑这是因为您没有从 Xcode 运行 GCC，而是您在 /usr/local 中有第三方版本的 GCC。

报告什么`which gcc`？显示什么`echo $PATH`？

安装 Xcode 时，是否安装了 UNIX Development 组件？如果没有，那么您必须显式访问 /Developer/usr/bin 中的工具，或者通过在 PATH 的早期添加该目录来访问。如果您确实安装了该组件，请确保`/usr/bin`and`/usr/sbin`在您的 PATH 中早于`/usr/local/bin`or `/usr/local/sbin`。

* * *

更新：

`gcc --verbose`嗯，您的输出中有趣的部分是：

```
#include "..." search starts here:
#include <...> search starts here:
 /usr/llvm-gcc-4.2/bin/../lib/gcc/i686-apple-darwin10/4.2.1/include
 /usr/local/include
 /Developer/usr/llvm-gcc-4.2/lib/gcc/i686-apple-darwin10/4.2.1/include
 /usr/include
 /System/Library/Frameworks (framework directory)
 /Library/Frameworks (framework directory)
End of search list. 
```

我刚刚检查了我的系统，并且`llvm-gcc-4.2`（实际使用的编译器）在这里生成了相同的搜索列表。所以，我想编译器会寻找`/usr/local/include`头文件是正常的——然后再看那里`/usr/include`——那里有任何头文件是不正常的。

我的建议是你移到一边`/usr/local`：

```
sudo mv /usr/local /usr/local.bak 
```

或至少`/usr/local/include`和`/usr/local/lib`：

```
sudo mv /usr/local/include /usr/local/include.bak
sudo mv /usr/local/lib /usr/local/lib.bak 
```

无论最初安装的第三方软件是什么，这些东西都可能会损坏，但至少你会知道它是什么。更有可能的是，您将永远不会注意到这样做的任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T23:45:07.657

你的`mysource.c`样子是这样的吗？

```
#include <stdio.h>

int main()
{
    printf("hello, world\n");
    return 0;
} 
```

如果没有，你能列出`mysource.c`来让我们看看吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T23:45:10.473

[**mlp**](https://stackoverflow.com/users/99124)指出了一个非常相关的事实。如果您使用`#include "stdio.h"`而不是`#include <stdio.h>`搜索（订单等）的标题会有所不同。由于这是标准头文件，请先尝试使用`#include <stdio.h>`重新编译。如果这没有帮助，我认为我们必须假设这是一个权限问题。

* * *

很明显，您的用户无法访问标题`gcc`所在的位置，`/usr/local/include/stdio.h`尤其是。确保`sudo chmod o+rX /usr/local/include`授予任何人对该位置的读取权限（您需要超级用户权限才能执行此操作！），然后再次尝试编译。

现在的原因是：

```
mysource.c:3: warning: incompatible implicit declaration of built-in function ‘printf’ 
```

那时也很明显。如果由于权限问题而无法读取头文件，则不能包含它，并且 C 默认为标准行为，假设函数返回`int`和任意数量的参数。

* * *

现在我不是 100% 了解这里的权限语义，但可能层次结构中较高的一些文件夹也需要修复，即`/usr/local`和`/usr`. 但通常情况下，至少对于像`include`.

# regex - 用于部分匹配 ip 或 mac 地址的 Perl 正则表达式

> ID：10889830
> 
> 赞同：2
> 
> 时间：2012-06-04T23:41:32.193
> 
> 标签：regex, perl

我正在编写一个优化程序，您正在搜索我的应用程序，如果字符串看起来像一个 IP 地址，那么不要费心搜索 MAC 地址。如果搜索看起来像 MAC 地址，请不要费心查看 IP 地址 db 列。

我见过完全匹配 ips 和 mac 地址的表达式，但很难找到一个匹配部分字符串和相当有趣的脑筋急转弯的表达式，我想我会得到其他人的意见。现在我有一个没有正则表达式的解决方案。

```
use List::Util qw(first);

sub query_is_a_possible_mac_address {
  my ($class, $possible_mac) = @_;
  return 1 unless $possible_mac;

  my @octets = split /:/, $possible_mac, -1;
  return 0 if scalar @octets > 6; # fail long MACS
  return 0 if (first { $_ !~ m/[^[:xdigit:]]$/ } @octets; # fail any non-hex characters
  return not first { hex  $_ > 2 ** 8 }; # fail if the number is too big
}

# valid tests
'12:34:56:78:90:12'
'88:11:'
'88:88:F0:0A:2B:BF'
'88'
':81'
':'
'12:34'
'12:34:'
'a'
''

# invalid tests
'88:88:F0:0A:2B:BF:00'
'88z'
'8888F00A2BBF00'
':81a'
'881'
' 88:1B'
'Z'
'z'
'a12:34'
' '
'::88:' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T00:06:53.100

鉴于（新）测试，这有效：

```
/^[0-9A-Fa-f]{0,2}(:[0-9A-Fa-f]{2}){0,5}:?$/ 
```

以下是根据上述测试匹配的行（请注意，像“a”和“A”这样的单个十六进制字符是正确匹配的：

```
12:34:56:78:90:12
88:11:
88:88:F0:0A:2B:BF
88
:81
:
12:34
12:34:
a
'' (<-- empty space) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T16:09:35.437

我发现做到这一点的最好方法是尝试让可能的匹配成为你想要匹配的。例如，如果你有一个字符串：1.2，试着让它看起来像一个 IP 地址：1.2.1.1。然后应用正则表达式

```
sub contains_ip {
    my ($possible_ip) = @_;

    my @splits = split /\./, $possible_ip;

    return 0 if @splits > 4;
    while (@splits < 4) {
        push @splits, '1';
    }

    $possible_ip = join '.', @splits;

    my ($match) = $possible_ip =~ m/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/;
    return defined $match ? 1 : 0;
}

warn contains_ip('1.2'); # 1
warn contains_ip('127.0.0.1'); # 1
warn contains_ip('1.2asd'); # 0
warn contains_ip('1.2.3.4.5'); # 0 
```

同样的事情也适用于 mac 地址：如果你有 11:22，试着让它看起来像一个完全限定的 mac 地址 11:22:00:00:00:00，然后应用 mac 地址正则表达式。

# python - 识别列表列表之间的一个数字

> ID：10889837
> 
> 赞同：0
> 
> 时间：2012-06-04T23:42:51.473
> 
> 标签：python, list

我有一个这样的列表：

```
A = [[2, 3], 5, 7, 8, [2, 3], 1, [9, 2]] 
```

我想比较嵌套列表中的所有值 ([2, 3], ..., [2, 3], ..., [9, 2]) 并提取出现一次的数字，在本例中为 9 ，如果您发现一个仅出现在列表中的一个列表中的数字。这就是该块的答案，即：

```
A = [[2, 3], 5, 7, 8, [2, 3], 1, [9]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T01:03:57.167

凌乱，难以阅读列表理解，但其他答案**太长了**！

如果列表成员是一个整数，或者它是一个仅包含在所有子列表的组合列表中多次出现的成员的子列表，则包括一个列表成员。否则，也就是说，如果它是一个子列表，其成员在所有子列表中都是唯一的，则仅包含该子列表的唯一成员。

```
>>> A = [[2, 3], 5, 7, 8, [2, 3], 1, [9, 2]]
>>> L = [y for x in A if type(x) == list for y in x]
>>>> [x if (type(x) == int) else x if all([L.count(y) > 1 for y in x]) \
      else [y for y in x if L.count(y) == 1] for x in A]

[[2, 3], 5, 7, 8, [2, 3], 1, [9]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T00:22:23.437

如果您想提取仅出现在一个子列表中的值，无论它们在该子列表中出现多少次，您都可以这样做：

```
from collections import Counter

def get_answer(x):
    my_list = []

    for ele in x:
        if isinstance(ele, list):
            my_list.extend(list(set(ele)))

    countz = Counter(my_list)
    return [k for k,v in countz.iteritems() if v == 1] 
```

结果：

```
>>> get_answer([[2, 3], 5, 7, 8, [2, 3], 1, [9, 9]])
[9]
>>> get_answer([[2, 3], 5, 7, 8, [2, 3], 1, [9, 2]])
[9] 
```

如果您想提取一个仅出现在一个子列表中且仅在该子列表中出现一次的数字，即它仅在所有子列表的所有元素中出现一次，您可以更改此行：

```
my_list.extend(list(set(ele))) 
```

到

```
my_list.extend(ele) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T00:28:09.703

这是你想要的吗？

```
import collections

A = [[2, 3], 5, 7, 8, [2, 3], 1, [9, 2]]
B = []
occurences = collections.defaultdict(lambda: 0)
for element in A:
    if type(element) is list:
        B.append(element)
for sublist in B:
    for number in sublist:
        occurences[number] += 1
for sublist in B:
    for number in sublist:
        if occurences[number] == 1:
            del sublist[:]
            sublist.append(number)
print(A) 
```

结果：

```
[[2, 3], 5, 7, 8, [2, 3], 1, [9]] 
```

# sql - CakePHP 2.0 中的 SQL 注入

> ID：10889839
> 
> 赞同：0
> 
> 时间：2012-06-04T23:43:28.230
> 
> 标签：sql, cakephp, sql-injection, cakephp-2.0, code-injection

当有人在我的网站上执行此 url 时，“post”表中的数据被删除：

[http://mysite.com/posts/getPosts/29;SET](http://mysite.com/posts/getPosts/29;SET) FOREIGN_KEY_CHECKS = 0;从帖子中删除；

或者

[http://mysite.com/posts/getPosts/29](http://mysite.com/posts/getPosts/29;set)；设置foreign_key_checks = 0；

目前 PostController 的功能是这样的：

```
public function getPosts($idUser, $return = true){
    $idUser = Sanitize::clean($idUser);     

    //calling Post Model...
    $posts = $this->Post->getPosts($idUser); 
```

}

是的......我很抱歉，但我在 Post Model 有一个名为“getPosts”的 SQL 语句。（但我现在不能改变它......）

我认为使用 Sanitize 就足够了……我该如何解决？当我使用自己的 SQL 函数时，CakePHP 中是否有任何与 mysql_real_escape_string 等效的东西？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-06T12:04:22.287

只要您使用内置的查询构建器，例如`find`和 ， CakePHP 2.x 就会防止 SQL 注入`save`。

如果您的表 ID 是整数，那么有一个快速简单的 hack 可以提高安全性。在参数上使用 PHP 的整数类型转换器。它将转换为正确的 ID 值或零。无需清理整数值。

```
public function getPosts($idUser, $return = true)
{
    $posts = $this->Post->getPosts((int)$idUser);
} 
```

我一直在我的模型中这样做，这是一个养成的好习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T00:04:22.370

你在那里做的事情非常错误，与sql注入无关。您在这里惊慌失措并吠叫错误的树。

a) 你不需要 utf8_decode() - 始终使用 utf8

b) 你不需要 strip_tags() - 在视图中使用 h()

c) 你不需要消毒 - 像 strip_tags 一样不必要

d) 你的代码对 SQL 注入是安全的，因为你使用了 save()。

但

您的代码可能对表单回火不安全。

所以你应该强制白名单或其他一些基本的安全措施，比如至少使用安全组件。

有关如何真正发挥作用的更多详细信息：http: [//www.dereuromark.de/2010/09/21/saving-model-data-and-security/](http://www.dereuromark.de/2010/09/21/saving-model-data-and-security/)

# ios - iOS 应用内购买 - 商店积分

> ID：10889841
> 
> 赞同：0
> 
> 时间：2012-06-04T23:43:38.090
> 
> 标签：ios, in-app-purchase

我正在一个允许您下载和阅读文章的应用程序中实现应用程序内购买。与其让每篇文章都有一个产品标识符，我更愿意出售“信用”，即选择任何 5 篇文章或任何 10 篇等的信用。

苹果的指导方针指出：

**11.4**使用 IAP 购买积分或其他货币的应用程序必须在应用程序内消耗这些积分

**11.5**使用IAP购买积分或其他币种过期的应用将被拒绝

我不确定如何解释 11.4。我的应用程序确实会消耗积分进行购买，但实际上它们会被服务器跟踪。有谁知道是否允许这种类型的系统？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T23:57:45.407

是的，你想做什么都是允许的。11.4 意味着您不能执行以下操作：

1) 以 0.99 美元的价格出售 100 个积分。

2）将用户拥有这100个积分的信息保存到您的服务器，然后

3) 让用户在您的网站或您的 iOS 应用程序以外的其他应用程序上使用这些积分来购买东西。

那有意义吗？:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T00:02:18.983

我认为你如何跟踪它们并不重要。我的解释是，这些积分不应兑换为任何不在应用程序内消费的商品。因此，例如，用户不能购买积分然后在杂货店为他们购买胡萝卜。

我认为这是通过服务器跟踪信用的首选方法，因为它更安全。如果您以 MyTown（无从属关系）等“farmvillish”在线游戏为例，您可以确定它们会在服务器上集中跟踪您购买的积分、“bucks”或其他内容。鉴于这个例子，我认为你很安全，但我不是苹果。

# c# - 如何在 C# 中将 TIFF 图像添加到另一个图像的底部？

> ID：10889846
> 
> 赞同：0
> 
> 时间：2012-06-04T23:44:08.510
> 
> 标签：c#, tiff, twain

我用 TWAIN 扫描了一张双面图像，它得到了一组图片，我可以单独保存它们。我需要将这两个图像并排组合并将其保存为单个 TIFF 文件。

你能告诉我如何打开 TIFF 图像并将它们保存为一个文件，并排包含它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T03:14:31.960

您是否正在根据 TWAIN 规范编写自己的应用程序？如果是，您可以使用 TWFF_TIFFMULTI 获取多页 TIFF 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T15:41:35.767

```
var tmpFolder = _configManager.TmpFolder;
bool isUnHandleException;
//tranfer each image that's scann0ed and insert him to array,also dialogbox for a progress bar Indication  
ArrayList pics = tw.TransferPictures(out isUnHandleException);
EndingScan(); tw.CloseSrc();
if (isUnHandleException)   ShowException(Consts.RestartWIA);

string strFileName = "";
// join all the images that's scanned  to one image tiff file
var encoder = new TiffBitmapEncoder();
BitmapFrame frame=null;
Bitmap bp = null;
IntPtr bmpptr,pixptr;
if (!(pics != null && pics.Count != 0))
{
    ShowException("No Has Any pages");
    return;
}
// create temp folder 
CreateDirectory(tmpFolder);
int picsCount = pics.Count;
for (int i = 0; i < pics.Count; i++)
{
    IntPtr img = (IntPtr)pics[i];
    //Locks a global memory object and returns a pointer to the first byte of the object's memory block 
    bmpptr = Twain.GlobalLock(img);
    //Get Pixel Info by handle
    pixptr = GdiWin32.GetPixelInfo(bmpptr);
    // create bitmap type
    bp = GdiWin32.BitmapFromDIB(bmpptr, pixptr);

    // get bitmap frame for insert him TiffBitmapEncoder
    frame = Imaging.GetBitmapFrame(bp);
    if (frame != null)
        encoder.Frames.Add(frame);
    //decease pointer reference so the gc will see there is no refernce to this obj and realse him from memory
    Twain.GlobalUnlock(img);
    // Get the last error and display it.
    //int error = Marshal.GetLastWin32Error();

    GC.Collect();
    GC.WaitForPendingFinalizers();
}
// genrate file name to temp folder 
strFileName = GenerateFileTemp(tmpFolder);
string strNewFileName = strFileName;
_output = new FileStream(strNewFileName, FileMode.OpenOrCreate);
encoder.Save(_output); 
```

# python - 如何使用 Python API 创建一个新的 Perforce 用户？

> ID：10889851
> 
> 赞同：1
> 
> 时间：2012-06-04T23:44:38.867
> 
> 标签：python, perforce

我正在为返回提交者列表的 Python 脚本编写测试。

以下：

```
 new_user = self.p4.fetch_user('existing-user')
    new_user['User'] = 'new-user'
    self.p4.save_user(new_user) 
```

发出：

```
P4Exception: [P4#run] Errors during command execution( "p4 user -i" )

[Error]: "Error in user specification.\nUser name can't be changed from 'existing-user'." 
```

创建新用户的 Python API 调用是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T00:59:41.813

新用户是自动创建的：

```
self.p4 = p4python.P4.P4(user='new-user') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-26T23:16:36.813

这是使用 P4Python 的更明确的代码片段：

```
from P4 import P4

p4 = P4()
p4.connect()
newuser = {
    'User': 'newuser',
    'Email': 'newuser@domain.com',
    'FullName': 'New User'
}
p4.save_user(newuser,"-f") 
```

# javascript - 用于数字和字母数字字符串的 JavaScript 数组排序函数

> ID：10889857
> 
> 赞同：0
> 
> 时间：2012-06-04T23:45:15.013
> 
> 标签：javascript, arrays, string, sorting

我需要对一个看起来像这样的数组进行排序：

```
var array = new Array();<br />
array[0]="201206031245 firstitem";<br />
array[1]="201206020800 seconditem";<br />
array[2]="201206040604 itemthree";<br />
array[3]="201206031345 lastitem";<br /> 
```

我将如何按数字和降序对其进行排序？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T23:48:35.497

只需使用[`array.sort()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort). 它会按字母顺序排序，但只要您的数字具有相同的位数就可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T00:38:53.700

尽管`.sort()`默认情况下会进行字母数字排序，但对于您的数据，它将以数字方式工作，因为您的数组元素都以数字开头，这些数字遵循具有相同位数的严格日期/时间格式。`.sort()`会*升序*排序。您可以提供自己的比较函数来*降序*排序，或者您可以反转结果：

```
array.sort().reverse() 
```

有关如何`.sort()`工作的更多信息，例如，提供您自己的比较功能，请查看[文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T23:48:52.907

您只需要在您的数组上调用[sort ：](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)

```
array.sort(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T02:21:43.560

```
var arr = array.sort(function(a,b){ return a.split(' ')[0] < b.split(' ')[0]}) 
```

# json - Jackson vs Json 的特殊性或“为什么这是一个好的答复？”

> ID：10889861
> 
> 赞同：0
> 
> 时间：2012-06-04T23:45:53.920
> 
> 标签：json, jackson

我对 Jackson & Json 很陌生，但我已经使用过它，主要使用对象映射器，总是定义我自己的类并且非常面向对象工作。最近，我决定自学一些 Android 编程，并在此过程中从使用 JSON 编码作为回复的第 3 方 Web 服务查询数据。其中一个回答让我感到困惑。

我查询了许多对象，并得到如下信息：

```
JSON: 
[
  {"num":"2","total":"2"},
  {"id":"1234", ...more fields...},
  {"id":"1235", ...more fields...}
] 
```

这在我的标准杰克逊方法中不能很好地解析，因为从我阅读它的方式来看，这表明数组的开始，其中第一个元素的类型与以下元素的类型不同。我目前无法将其建模为 POJO 以允许标准杰克逊映射。（老实说，我不认为这是正确的语法）我仍然可以通过一些基本的字符串编辑轻松解决这个问题，但我想我一定误解了一些东西。如果这是一个愚蠢的问题，请原谅我。感谢您的帮助，我非常期待您的回复。

编辑1：感谢[Hot Licks](https://stackoverflow.com/users/581994/hot-licks)，他证实了我的自我怀疑=）。有人可以建议一种在杰克逊中建模的正确方法，或者这真的是杰克逊比 JSON 更具体的情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:14:12.990

这有两个部分：

1.  是否合法 JSON
2.  它是一种合理的数据表示吗

第一个问题的答案是“是”；第二个是主观的。我会说“不”，因为除了非常通用的“地图列表”之外，Java（或 Javascript）中没有真正的类型化结构；所以它不是真正的对象模型，只是 JSON 的奇怪数据模型。

因此，虽然您显然可以使用 Jackson 将其绑定到以下内容：

```
List<Map<String,Object>> list = (List<Map<String,Object>>) mapper.readValue(jsonSource, List.class); 
```

使用起来会有点麻烦。

然而。您可以使用两步处理：首先进入上述“无类型”列表；然后将地图转换为您想要的实际对象，例如：

```
Iterator<Map<String,Object>> it = list.iterator();
HeaderOb header = mapper.convertValue(it.next(), HeaderOb.class); // has 'num' and 'total'
while (it.hasNext()) {
  ValueOb value = mapper.convertValue(it.next(), ValueOb.class); // has 'id', others
} 
```

没有单阶段方法的原因是，上面描述的 JSON 结构没有自然的对象映射。设计它的人并没有考虑选择这种结构的含义，或者可能不是很擅长 OO。

对于它的价值，用于 JSON 样本包含的内容的更常见模型将类似于：

```
{
  "num" : 2,
  "total" : 2,
  "entries" : [
     { "id": ... },
     ...
  ]
} 
```

这也很容易映射到 Java 对象。

# asp.net - ASP.NET 发布错误

> ID：10889863
> 
> 赞同：0
> 
> 时间：2012-06-04T23:46:49.287
> 
> 标签：asp.net, visual-studio-2010, ftp

我正在尝试将我的项目发布到给定的主机。我只能从 Visual Studio 进行 ftp 访问和发布。它说成功发布。但是当我尝试访问它时说

找不到页面

您要查找的页面可能已被删除、名称已更改或暂时不可用。

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:38:34.123

它可能是由几个原因引起的。

1.  发布可能不成功。
2.  您的请求文件已从项目中排除，因此不会与其他文件一起复制。
3.  您的请求网址不正确。
4.  处理您的请求的逻辑可能会返回由开发人员定义的 404 响应。

您最好检查已发布服务器上的文件状态以确定原因。或者您可以通过您发布的网站的浏览器访问其他页面吗？

# ubuntu - 以其他用户身份挂载共享文件夹（vbox）

> ID：10889867
> 
> 赞同：13
> 
> 时间：2012-06-04T23:47:40.957
> 
> 标签：ubuntu, virtualbox, ubuntu-10.04, mount

很抱歉在这里问这个问题，但我尝试了 serverfault 并且 4 天没有得到任何答案。

那里的相关问题：[https ://serverfault.com/questions/394197/mount-shared-folder-vbox-as-another-user](https://serverfault.com/questions/394197/mount-shared-folder-vbox-as-another-user)

* * *

**问题：**

每次我的 ubuntu (10.04) 启动时，我都会尝试挂载我的 vbox 共享文件夹。

所以，我在 /etc/init 上添加了一个条目：

```
description     "mount vboxsf Desktop"

start on startup

task
exec mount -t vboxsf Desktop /var/www/shared 
```

似乎可以工作，除了所有文件都归“root”所有，而且我无权在文件夹上写入（chmod 和 chown 似乎都不起作用）。

那么，我怎样才能使这个共享文件夹下的所有文件都归 www-data 用户/组所有？

* * *

ps.：我拥有一个自动共享文件夹的主要原因是我可以在 GUEST www 文件夹上创建/编辑来自 HOST 的文件。

如果您对此有更好的想法，而不是共享文件夹，请随意说。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-06T10:52:58.893

好吧，当我遇到与共享文件夹相关的另一个问题时，我最终遇到了这个 stackoverflow 问题：[VirtualBox for Apache 中的共享文件夹](https://stackoverflow.com/questions/6298933/shared-folder-in-virtualbox-for-apache)

它以两种方式帮助了我，似乎我需要的是那些 uid 和 gid 选项。

因此，要将共享文件夹挂载为另一个用户，我将运行：

```
mount -t vboxsf SHARE_NAME /some/dir -o uid=48,gid=48 
```

此外，要查看您的*www-data*的*gid*和*uid*是什么，只需运行`id www-data`.

如果您还需要更改挂载文件的权限，只需将“dmode”添加到选项中，如下所示：

```
sudo mount -t vboxsf SHARE_NAME-o rw,dmode=777,gid=GROUP_ID,uid=USER_ID /path/on/guest 
```

可用的选项是（来自`mount`的帮助）：

```
rw         mount read write (default)
ro         mount read only
uid       =<arg> default file owner user id
gid       =<arg> default file owner group id
ttl       =<arg> time to live for dentry
iocharset =<arg> i/o charset (default utf8)
convertcp =<arg> convert share name from given charset to utf8
dmode     =<arg> mode of all directories
fmode     =<arg> mode of all regular files
umask     =<arg> umask of directories and regular files
dmask     =<arg> umask of directories
fmask     =<arg> umask of regular files 
```

如果您需要它在系统初始化期间运行，只需在 /etc/init/SOMETHING.conf 上创建一个文件，如下所示：

```
description     "SOME DESCRIPTION"

start on startup

task
exec mount -t vboxsf YOUR_SHARE_NAME /path/on/guest -o uid=1000,gid=33 
```

# asp.net - 使用 HTTPRequest 记录桌面应用程序的使用情况

> ID：10889870
> 
> 赞同：1
> 
> 时间：2012-06-04T23:48:15.887
> 
> 标签：asp.net, c#-4.0, webforms, ashx

我正在尝试跟踪安装在用户设备上的 winforms 应用程序（用户名和启动时间）的使用情况。我知道 IIS 具有强大的日志记录功能，但我真正想要的是使用该应用程序的特定用户的名称（Windows 登录）。

到目前为止，我已经设置了一个 .ashx Web 处理程序，应用程序向它发出请求（每次在客户端设备上启动时），并将用户名作为查询字符串参数附加（使用 Environment.UserName）。ashx 处理程序获取请求并将带有时间戳的用户名记录到数据库中。一切都很好，但我不禁想知道这是“正确”还是“最佳实践”的做事方式。

我不是那种说“嗯，它工作得很好”的人之一......如果我对我们的实施没有 100% 的好感，我将根本无法入睡。有没有更合法的方式来做到这一点？例如，WCF？

谢谢！

**编辑**

我刚刚重新阅读了我的帖子，觉得我应该澄清这是我们员工使用的内部工具。

# hadoop - Amazon Hadoop EMR 和自定义输入文件格式

> ID：10889871
> 
> 赞同：0
> 
> 时间：2012-06-04T23:48:18.087
> 
> 标签：hadoop, amazon-web-services, emr

我在让 Amazon EMR 接受自定义 InputFileFormat 时遇到了一些麻烦：

```
public class Main extends Configured implements Tool {

    public static void main(String[] args) throws Exception {
        int res = ToolRunner.run(new JobConf(), new Main(), args);
        System.exit(res);
    }

    public int run(String[] args) throws Exception {

        Path inputPath = new Path(args[0]);
        Path outputPath = new Path(args[1]);

        System.out.println("Input  path: "+inputPath+"\n");
        System.out.println("Output path: "+outputPath+"\n");

        Configuration conf = getConf();
        Job job = new Job(conf, "ProcessDocs");

        job.setJarByClass(Main.class);

        job.setMapperClass(Map.class);
        job.setReducerClass(Reducer.class);

        job.setMapOutputKeyClass(Text.class);
        job.setMapOutputValueClass(Text.class);

        job.setInputFormatClass(XmlInputFormat.class);

        TextInputFormat.setInputPaths(job, inputPath);
        TextOutputFormat.setOutputPath(job, outputPath);

        job.waitForCompletion(true);

        return 0;
    }   
} 
```

查看日志文件：

```
2012-06-04 23:35:20,053 INFO org.apache.hadoop.mapred.JobClient (main): Default number of map tasks: null
2012-06-04 23:35:20,054 INFO org.apache.hadoop.mapred.JobClient (main): Setting default number of map tasks based on cluster size to : 6
2012-06-04 23:35:20,054 INFO org.apache.hadoop.mapred.JobClient (main): Default number of reduce tasks: 1
2012-06-04 23:35:20,767 INFO org.apache.hadoop.mapreduce.lib.input.FileInputFormat (main): Total input paths to process : 1
2012-06-04 23:35:20,813 INFO com.hadoop.compression.lzo.GPLNativeCodeLoader (main): Loaded native gpl library
2012-06-04 23:35:20,886 WARN com.hadoop.compression.lzo.LzoCodec (main): Could not find build properties file with revision hash
2012-06-04 23:35:20,886 INFO com.hadoop.compression.lzo.LzoCodec (main): Successfully loaded & initialized native-lzo library [hadoop-lzo rev UNKNOWN]
2012-06-04 23:35:20,906 WARN org.apache.hadoop.io.compress.snappy.LoadSnappy (main): Snappy native library is available
2012-06-04 23:35:20,906 INFO org.apache.hadoop.io.compress.snappy.LoadSnappy (main): Snappy native library loaded
2012-06-04 23:35:22,240 INFO org.apache.hadoop.mapred.JobClient (main): Running job: job_201206042333_0001 
```

似乎 EMR 上的 Hadoop 假定默认`InputFileFormat`阅读器......我做错了什么？

*注意：*我没有从 Hadoop 收到关于`XmlInputClass`. *注2：*我进入`<property><name>mapreduce.inputformat.class</name><value>com.xyz.XmlInputFormat</value></property>`文件`jobs/some_job_id.conf.xml`。

**更新：**

```
public class XmlInputFormat extends TextInputFormat {

  public static final String START_TAG_KEY = "xmlinput.start";
  public static final String END_TAG_KEY = "xmlinput.end";

  public RecordReader<LongWritable,Text> createRecordReader(InputSplit split, TaskAttemptContext context) throws IOException {

      System.out.println("Creating a new 'XmlRecordReader'");

      return new XmlRecordReader((FileSplit) split, context.getJobConf());
  }

  /*
  @Override
  public RecordReader<LongWritable,Text> getRecordReader(InputSplit inputSplit,
                                                         JobConf jobConf,
                                                         Reporter reporter) throws IOException {
    return new XmlRecordReader((FileSplit) inputSplit, jobConf);
  }
  */

  /**
   * XMLRecordReader class to read through a given xml document to output xml
   * blocks as records as specified by the start tag and end tag
   * 
   */
  public static class XmlRecordReader implements RecordReader<LongWritable,Text> {
    private final byte[] startTag;
    private final byte[] endTag;
    private final long start;
    private final long end;
    private final FSDataInputStream fsin;
    private final DataOutputBuffer buffer = new DataOutputBuffer();

    public XmlRecordReader(FileSplit split, JobConf jobConf) throws IOException {
      startTag = jobConf.get(START_TAG_KEY).getBytes("utf-8");
      endTag = jobConf.get(END_TAG_KEY).getBytes("utf-8");

      System.out.println("XmlInputFormat: Start Tag: "+startTag);
      System.out.println("XmlInputFormat: End Tag  : "+endTag);

      // open the file and seek to the start of the split
      start = split.getStart();
      end = start + split.getLength();
      Path file = split.getPath();
      FileSystem fs = file.getFileSystem(jobConf);
      fsin = fs.open(split.getPath());
      fsin.seek(start);
    }
    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T00:50:30.397

如果`XmlInputFormat`不是包含 的同一个 jar 的一部分`main()`，您可能需要将其构建到主 jar 的名为“lib”的“子文件夹”中，或者创建一个引导操作，将包含的额外 jar`XmlInputFormat`从 S3 复制到魔术文件夹`/home/hadoop/lib`，默认情况下是 EMR 上 Hadoop 类路径的一部分。

当然不是假设 FileInputFormat 是抽象的。

根据您的编辑，我认为您的问题的前提是错误的。我怀疑确实找到并使用了输入格式。来自任务尝试的 System.out.println 不会出现在作业的系统日志中，尽管它可能会出现在标准输出摘要中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T02:26:17.443

这是我发现在 EMR 或 Hadoop 上运行此自定义 jar 文件的另一种简单方法 [http://www.applams.com/2014/05/using-custom-streaming-jar-using-custom.html](http://www.applams.com/2014/05/using-custom-streaming-jar-using-custom.html)

# java - 每次单击 JEditorPane 中的超链接时，hyperlinkUpdate() 都会给我 NullPointerException？

> ID：10889875
> 
> 赞同：1
> 
> 时间：2012-06-04T23:48:37.977
> 
> 标签：java, html, swing, hyperlink, jeditorpane

我只想补充一点，加载的初始文件是一个包含所有类名称的 javadoc，当我在控制台中打印时，我希望它在单击带有其名称的超链接时显示每个类的相应页面我没有发现收集相应的 url 有任何问题，但是每次尝试将其添加到 JEditorPane 时都会收到 NullPointerException。

这是我的程序：

```
import javax.swing.*;
import javax.swing.event.*;
import java.awt.*;
import java.awt.event.*;
import java.net.*;
import java.io.*;

public class Help implements HyperlinkListener
 {

     JEditorPane htmlPane;
       String url = "file:///F:/java%2012/Isp/help%20file%20try/doc%202/allclasses-frame.html";
    public void hyperlinkUpdate(HyperlinkEvent event) {
    if (event.getEventType() == HyperlinkEvent.EventType.ACTIVATED) {
      try {

        htmlPane.setPage(event.getURL());
         //url.setText(event.getURL().toExternalForm());
        //System.out.println(event.getURL().toString());

      } 
      catch(IOException ioe) {
       // System.out.print("err");
        // Some warning to user
      }
    }
  }
    public void frame()
    {
       JFrame frame = new JFrame("asdd");
     JLabel l = new JLabel("asdsada");

     try 
         {

  JEditorPane htmlPane = new JEditorPane(url);
  htmlPane.addHyperlinkListener(this);
       htmlPane.setEditable(false);
       frame.add(new JScrollPane(htmlPane));

         } 
catch(IOException ioe) {
  System.err.println("Error displaying " + url);
  } 
frame.setSize(1200,800);
       frame.setVisible(true);

    }

   public static void main(String[] args)
   {
     Help h =new Help();
    h.frame();
   }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T23:59:59.663

但是你从哪里得到这个`NullPointerException`？

我运行您的示例代码，然后`NullPointerException`继续：

```
htmlPane.setPage(event.getURL()); 
```

所以`htmlPage`场是`null`。

添加行时：

```
this.htmlPane = htmlPane; 
```

在：

```
public void frame() {
    JFrame frame = new JFrame("asdd");
    JLabel l = new JLabel("asdsada");
    try {
        JEditorPane htmlPane = new JEditorPane(url);
        this.htmlPane = htmlPane; 
```

我现在可以点击任何链接（在我的例子中是“http://www.google.com/”）

# regex - 正则表达式 ANDY X - XXXXX - XXXXX

> ID：10889879
> 
> 赞同：-3
> 
> 时间：2012-06-04T23:48:54.327
> 
> 标签：regex

我正在尝试为这种格式创建一个正则表达式。

X 是整数，N 是 1 或更多[1 到无穷大]。ANDY 可以是小写或大写

```
ANDY N: XXXXX - XXXXX

/^[\iANDY]\s[\d]{1,}\s[0-9]{4}\s-\s[0-9]{4}$/ 
```

我可以知道如何使这个正则表达式的 N 大于 0 吗？有什么可以改进的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T23:53:02.653

如果你想确保它不仅仅是`0`使用这个：

```
[1-9]\d* 
```

就像在 1 和 9 之间的 1 位数字，后跟 0 和 1 之间的任意数字一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T23:55:37.537

你是说，`N != 0`？只需让它不以`0`but开头`[1-9]`，然后是任意位数。此外，您可以只使用`\d`而不是`[0-9]`. 而且我猜“ANDY”不应该是一个字符类。而且我不确定您使用哪个引擎，但通常的转义字符和特殊字符是*反斜杠*。

```
/^ANDY\s[1-9]\d*\s\d{4}\s-\s\d{4}$/i 
```

# io - 读取的字节数和无符号数

> ID：10889880
> 
> 赞同：4
> 
> 时间：2012-06-04T23:48:57.587
> 
> 标签：io, range, go, unsigned

作为澄清我的问题的示例，在 Google Go 1.0 中，[“io”包](http://golang.org/pkg/io/#Reader)中定义了以下接口：

```
type Reader interface {
    Read(p []byte) (n int, err error)
} 
```

尤其是结果参数列表`(n int, err error)`让我很感兴趣。根据接口的文档，本质上字节数不能为负数：

> 它返回读取的字节数 (0 <= n <= len(p))[...]

在 C 中，使用的原因`int`是带内值`-1`表示错误条件（请参阅[有效 Go：多个返回值](http://golang.org/doc/effective_go.html#multiple-returns)）。由于有多个返回值，因此不需要特殊的带内值。

Go 1.0 中存在[类型`uint`](http://golang.org/ref/spec#Numeric_types)。

在仅使用正范围 [0,∞) 而无需具有特殊带内值的值的情况下，使用`int`vs的具体原因是什么？`uint`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T00:56:43.513

整数的实际数字类型是 int。这部分是因为 signed int 以更明显的方式溢出。uint 的小溢出最终看起来像一个有效值，但是有符号 int 的小溢出将是负数，并且在需要正整数的地方出现恐慌，例如。切片。

这很重要，因为您通常会从 Read() 中获取“n”并将“p”切片到该长度。

例如。

```
n, err := a.Read(p)
p = p[:n]
processReadData(p) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T23:59:28.587

大多数情况下，整数的实际数字类型是`int`. 例如，`len(x)`并`cap(x)`返回`int`值，即使它们也不能是负数。在大多数情况下，返回一个 int 有助于避免不同数字类型之间的类型转换。

所以是的，本`Read()`可以返回 a `uint`，但这会使使用起来更加笨拙。

# ruby-on-rails - 在rails 3中查询相关的has_many模型

> ID：10889886
> 
> 赞同：0
> 
> 时间：2012-06-04T23:49:20.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有两个模型`User`和`Service`。`User`has_and_belongs_to_many`Services`同样适用于`Services`：

```
class User < ActiveRecord::Base
  has_and_belongs_to_many :services
end

class Service < ActiveRecord::Base
  has_and_belongs_to_many :users
end 
```

我需要找到所有提供选定服务的用户。就像是：

> @users = User.where(:services_ids => [2,3,4])

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:01:11.230

这应该有效：

```
User.join(:services).where(:services.id => [2,3,4]).uniq 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T23:54:25.707

尝试这个：

```
@users = Service.where(:id => [2,3,4])).map{|svc| svc.users}.uniq.flatten 
```

或者

```
@users = User.all(:include => :services, :conditions => ["services.id in ?", (2,3,4)]) 
```

# dependencies - 让 GNU Make 找到正确的库依赖

> ID：10889889
> 
> 赞同：2
> 
> 时间：2012-06-04T23:49:58.997
> 
> 标签：dependencies, makefile, gnu

我有一个简单的 Makefile，其中一个目标依赖于一个库：

```
test49: test49.c -lpthread 
```

该二进制文件是使用将 .c 文件转换为可执行文件的隐式规则构建的。

问题是，我正在尝试交叉编译，但 make 被解释`-lpthread`为指向`/usr/lib/libpthread.so`，这是非常不正确的。我已经使用 定义了交叉编译器的路径`CC=/path/to/bin/gcc`，所以我假设它可以确定`-lpthread`应该在 中的某个位置`/path/to/lib`，但事实并非如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:56:27.417

你可以更换

```
test49: test49.c -lpthread 
```

和

```
test49: test49.c /path/to/lib/lpthread.so 
```

# sql - 通过指定日期列选择行

> ID：10889892
> 
> 赞同：0
> 
> 时间：2012-06-04T23:50:50.770
> 
> 标签：sql, sql-server, date, select, sql-server-ce

我的桌子上有这个记录

```
Name   UserName     Password     DateAdded
skype  someusername somepassword 05/06/2012 01:18:50 
```

我正在尝试执行此语句，但它总是失败。

一些尝试：（全部失败）

```
Select * from Passwords where DateAdded = '05/06/2012 01:18:50'
Select * from Passwords where DateAdded = #05/06/2012 01:18:50#
Select * from Passwords where DateAdded = '06/05/2012 01:18:50'
Select * from Passwords where DateAdded = '2012/06/05 01:18:50'
Select * from Passwords where DateAdded = '2012/05/06 01:18:50'
Select * from Passwords where DateAdded like '2012/06/05 01:18:50' 
```

我数据库中的列`DateAdded`是 type`datetime`而不是`nvchar`.

我是 SQL 新手，这个查询有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T00:04:18.053

您能否存储小数秒？尝试这个：

```
SELECT * FROM Passwords
    WHERE DateAdded BETWEEN '2012-05-06 01:18:50' AND '2012-05-06 01:18:51'; 
```

（我更喜欢 datetime 文字的格式，因为它是明确的，但你的应该也可以工作。Tsql[几乎可以接受你扔给它的任何东西](http://msdn.microsoft.com/en-us/library/ms187819.aspx)。

# java - 从 Jasper 报告生成 XML 输出

> ID：10889904
> 
> 赞同：2
> 
> 时间：2012-06-04T23:53:21.413
> 
> 标签：java, xml, jakarta-ee, jasper-reports, report

我们的团队已将 Jasper 报告集成到 Spring MVC 项目中以生成 pdf/csv/html 报告。我们还需要从我们的数据库中生成 XML 输出，以便输入其他一些系统。我想知道是否也可以为此目的使用 Jasper 报告引擎（即生成一个 XML 输出文件，就好像它只是另一种报告格式 - 为我们的目标模式定制的标签等），以及是否有可能，使用 Jasper 报告引擎是否明智？

感谢您的回复

# java - 回到 Java（IntelliJ IDEA 或 Eclipse）

> ID：10889908
> 
> 赞同：1
> 
> 时间：2012-06-04T23:53:57.180
> 
> 标签：java, eclipse, intellij-idea

我之前有过使用 Java 的经验，目前在 Java 开发中时断时续。但我很快就会涉及复杂的项目。我正在寻找有关 IDE 的建议。我对 Eclipse，Intellij Idea 相当陌生。最好从 IntelliJIDEA 开始还是 eclipse 就足够了？

你们是否认为 IntelliJIDEA 上手会更顺畅，因为我不必通过 Eclipse 进行几个插件和自定义配置？我几乎会使用 Web 服务、Spring 框架（没有 UI 开发）和一点点 JSP。

IntelliJ IDEA 社区版是否支持 Spring 框架和 Web 服务？

开发。环境：Windows 7、JBoss、Weblogic 应用服务器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T23:58:58.137

IntelliJ 的付费版本是更好的 Java 开发环境。免费版本很适合做，但不适用于真正的商业 IDE，IMO。太多的好东西不见了。

Eclipse 没问题，你可以做得更糟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:52:56.087

与 intelliJ 和 eclipse 相比，intellij 包含许多附加插件，并且与 eclipse 相比更快更容易。您可以从网址[http://www.jetbrains.com/idea/download/下载](http://www.jetbrains.com/idea/download/)

# css - DIV :after - 在 DIV 之后添加内容

> ID：10889909
> 
> 赞同：32
> 
> 时间：2012-06-04T23:54:13.420
> 
> 标签：css, html

[![网站布局](../Images/7dd748779d8e00de32599f1fa1f99db5.png)](https://i.stack.imgur.com/ngSMr.png)

我正在设计一个简单的网站，我有一个问题。我希望所有`<div>`标签`class="A"`都在底部有一个图像分隔符，就在`<div>`（参考图像，红色部分）之后。我正在使用 CSS 运算符`:after`来创建内容：

```
.A:after {
    content: "";
    display: block;
    background: url(separador.png) center center no-repeat;
    height: 29px;
} 
```

问题是图像分隔符没有显示在 之后`<div>`，而是在 的内容之后`<div>`，在我的情况下，我有一个段落`<p>`。`<div class="A">`无论 div A 的高度和内容如何，​​我如何对此进行编码，以便图像分隔符出现在 AFTER 之后？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-04T23:57:23.953

将你的`<div>`绝对定位在底部，不要忘记`div.A`给`position: relative`- [http://jsfiddle.net/TTaMx/](http://jsfiddle.net/TTaMx/)

```
 .A {
        position: relative;
        margin: 40px 0;
        height: 40px;
        width: 200px;
        background: #eee;
    }

    .A:after {
        content: " ";
        display: block;
        background: #c00;
        height: 29px;
        width: 100%;

        position: absolute;
        bottom: -29px;
    }​ 
```

# python - Google App Engine 上用户定义的 http 状态码

> ID：10889911
> 
> 赞同：1
> 
> 时间：2012-06-04T23:54:27.100
> 
> 标签：python, unit-testing, google-app-engine, http-status-codes

我有以下处理程序从收到的请求中获取内容：

```
class DummyHandler(webapp2.RequestHandler):
    def get(self):
        try:
             msg = cgi.escape(self.request.get('content'))
             if msg is None:
                raise IllegalContent
        except IllegalContent as ex:
            logging.error("Illegal content received")
            self.error(RequestErrorCodes.ILLEGAL_CONTENT)
        except Exception as ex:
            logging.error(ex) 
            self.error(RequestErrorCodes.UNEXPECTED_ERROR) 
```

当我运行单元测试时，我收到以下错误：

```
 self.error(RequestErrorCodes.UNEXPECTED_ERROR)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 582, in error
    self.response.status = code
AttributeError: can't set attribute 
```

我需要在 http 响应中定义用户特定的错误代码，以供我的客户处理。Google App Engine 是否支持此功能？

# php - php \r\n 电子邮件中的输出问题

> ID：10889912
> 
> 赞同：0
> 
> 时间：2012-06-04T23:54:31.117
> 
> 标签：php, email, escaping

我知道这可能是一个非常简单的问题，我已经通过谷歌在这里和其他地方搜索了答案，但似乎仍然无法让它工作。这就是问题所在。我有以下代码：

```
$name = $_POST['Name'];
$phone = filter_var($_POST['Phone'], FILTER_SANITIZE_NUMBER_INT);
$address = $_POST['Address'];
$city = $_POST['City'];
$contact_time = $_POST['Call-Time'];
$job_descr = $_POST['Job-Description'];
$subject= $name. ' requested a quote';
$text = $name. " just requested a quote.\r\n";

foreach($_POST as $item => $key)// Get all of the variables sent and put them in a list
to be emailed
{   
    if(!empty($key) and $item != 'submit')
        $textappend .= "$item: $key\r\n";
}

$text .= "Information:\r\n$textappend"; 
```

电子邮件收集所有变量并发送它们。唯一的问题是它不会输出代码中 \r\n 所在的新行。它只是在一行中显示所有内容。我没有使用带双引号的正确引号吗？任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:58:51.600

```
$headers .= "\n--$boundary\n"; // beginning \n added to separate previous content
$headers .= "Content-type: text/plain; charset=iso-8859-1\r\n"; 
```

将**$headers**变量传递给 mail 函数，让我知道它是否有效

# hadoop - 从 Windows 将文件传入和传出 HDFS

> ID：10889914
> 
> 赞同：2
> 
> 时间：2012-06-04T23:54:38.123
> 
> 标签：hadoop, hdfs

我需要一种从不属于集群的节点将文件传入和传出 HDFS 的方法。是否存在带有浏览按钮的 UI 来执行此操作？我正在使用需要从其中传输到 HDFS 的 Windows 机器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T01:10:32.040

如果您可以从 Windows 机器访问集群节点（网络、dns、防火墙），那么您可以使用[Eclipse Hadoop 插件](http://wiki.apache.org/hadoop/EclipsePlugIn)查看 HDFS 并与之交互（但同样，它确实需要您能够联系集群中的数据节点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T00:25:20.503

我认为箍可以帮助你。
[https://github.com/cloudera/hoop](https://github.com/cloudera/hoop)

> Hoop, Hadoop HDFS over HTTP
> 
> Hoop 是一个为 HDFS 提供 REST HTTP 网关的服务器，具有完整的读写能力。
> 
> Hoop 在 Apache 许可证 2.0 下分发。
> 
> Hoop 已被贡献给 Apache Hadoop，它作为 Hadoop 0.23.x 版本的一部分提供。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-10-22T07:19:35.297

您可以尝试使用 HadoopDrive shell 扩展：[http ://hadoopdrive.effisoft.eu](http://hadoopdrive.effisoft.eu)

# cakephp - Cakephp hasAndBelongsToMany 与计数器缓存？

> ID：10889915
> 
> 赞同：2
> 
> 时间：2012-06-04T23:54:39.800
> 
> 标签：cakephp, has-and-belongs-to-many, counter-cache

任何人都知道如何让countercache在HABTM设置上工作？

```
- categories
;id, name, test_count

- tests
; id, name

- test_to_categories
; test_id, category_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:29:39.727

通过 belongsTo 关联在连接模型 (test_to_categories) 中使用计数器缓存。

如果这对您不起作用，那么您将必须实现一个自定义计数器方法并在模型的 afterSave() 中调用它，以更新计数。

顺便说一句，“test_to_categories”没有遵循约定。它应该是 category_tests。约定的存在是有原因的。;)

# c - C 编程：如何一次读取输入字节并仅输出整数作为标记？

> ID：10889923
> 
> 赞同：2
> 
> 时间：2012-06-04T23:55:38.747
> 
> 标签：c

我是 C 编程的新手，我必须编写一个程序，它只从标准输入中提取整数并将它们作为标记输出。其他任何内容都应输出为“非法”。我**不允许**使用任何数组或 malloc，我只能声明整数或长整数。我**必须使用 getchar() 输入和 printf() 输出**，仅此而已。我的问题是，我如何一次读取输入字节，将它们转换为令牌并检查它们是否是整数？

例如：如果输入是：

```
Hello 45 World Thank 67 you 
```

它应该输出：

```
illegal
45
illegal
illegal
67
illegal 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T00:08:59.860

因为这是家庭作业（感谢您清楚地标记它），我将用伪代码给出一个草图，希望能让您走上正确的轨道。

因此，您的程序实际上并不*关心*标记化；它只需要为给定的输入打印正确的输出。

所以，像这样：

```
int ch; /* note _int_, not _char_ -- this will save you time debugging */

while ((ch = getchar()) != EOF)  /* idiomatic read-a-char loop */
    if ch == '0' or ch == '1' or ..
        print ch
        already_seen_invalid = 0
    else
        if already_seen_invalid == 0
            already_seen_invalid = 1
            print invalid 
```

无论有多少字节无效，`already_seen_invalid`切换只会给你一个输出。`invalid`

不要担心尝试将字节转换`'4'`为`'5'`整数`45`。你的程序不关心，它也不会帮助你关心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T00:58:54.347

```
#include <stdio.h>
#include <ctype.h>
#include <limits.h>

int main() {
    int ch;
    int n;
    int takeNum, sign;
    long long int wk;//long long int as int64

    wk=0LL;
    takeNum = 0;//flag
    sign = 1;//minus:-1, other:1
    while(EOF!=(ch=getchar())){
        if(ch == '-'){
            sign = -1;
            continue;
        }
        if(ch >= '0' && ch <= '9'){
            if(takeNum >= 0)
                takeNum = 1;
            else
                continue;
            wk = wk * 10 + (ch - '0')*sign;
            if(INT_MAX < wk || INT_MIN > wk){//overflow
                takeNum = -1;//for skip
            }
            continue;
        }
        //space character continuing is "illegal"
        if(ch == ' ' || ch == '\t' || ch == '\n'){
            if(takeNum <= 0)
                printf("illegal\n");
            else
                printf("%d\n", n=wk);
            wk=0LL; takeNum=0; sign=1;//reset
        }
    }
    return 0;
} 
```

# math - 给定两个旋转角，我如何计算轨道位置？

> ID：10889924
> 
> 赞同：1
> 
> 时间：2012-06-04T23:56:25.203
> 
> 标签：math, language-agnostic, 3d

我通过调整两个旋转角度——围绕被跟踪对象的 X 轴和 Y 轴旋转，在 3D 空间中围绕另一个对象移动卫星。给定这些角度和半径，如何计算对象的最终位置？

这仅适用于 y 轴旋转：

```
position.x = otherObject.position.x + Math.cos(yRotation) * radius;
position.y = otherObject.position.y;
position.z = otherObject.position.z + Math.sin(yRotation) * radius; 
```

但是一旦我尝试合并 x 轴旋转，事情就会变得很奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T02:40:07.830

您可以使用这些方程式在 2D 中旋转某些东西（请参阅[Wikipedia](http://en.wikipedia.org/wiki/Rotation_%28mathematics%29)）：

```
x' = x * cos(angle) - y * sin(angle)
y' = x * sin(angle) + y * cos(angle) 
```

您可以使用基本相同的方程来绕 3D 中的 x/y/z 轴旋转，例如绕 y 轴旋转：

```
x' = x * cos(angle) - z * sin(angle)
y' = y
z' = x * sin(angle) + z * cos(angle) 
```

我想你想做的是：

*   绕 y 轴旋转 yRotation
*   然后绕x轴旋转xRotation

您已经完成了 y 轴旋转。所以从 (x, y, z) = (radius, 0, 0) 开始，你已经完成了：

```
x' = x * cos(angley) - z * sin(angley) = radius * cos(angley)
y' = y = 0
z' = x * sin(angley) + z * cos(angley) = radius * sin(angley) 
```

我们只需要再次应用方程来绕 x 轴旋转：

```
x'' = x' = radius * cos(angley)
y'' = y' * cos(anglex) - z' * sin(anglex) = -radius * sin(angley) * sin(anglex)
z'' = y' * sin(anglex) + z' * cos(anglex) = radius * sin(angley) * cos(anglex) 
```

请注意，调整“y 轴”旋转不一定会使卫星绕 y 轴旋转（例如，如果您的 x 旋转为 90 度，那么调整 y 旋转实际上会绕 z 轴旋转）。如果您不喜欢这种行为，我建议您只存储卫星 (x, y, z)（相对于被跟踪对象）并直接调整它（您可能希望在每次调整后重新归一化以确保浮动点不准确不会使您的卫星漂移）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T11:12:26.953

我的解决方案最终使用了根据旋转角度计算的变换矩阵，如下所示：

```
var mtx = new THREE.Matrix4();
mtx.rotateY(yRotation);
mtx.rotateX(xRotation);
var v = new THREE.Vector3(mtx.elements[8], mtx.elements[9], mtx.elements[10]);
v.multiplyScalar(radius); 
```

# javascript - IE8换行问题中的Textarea

> ID：10889927
> 
> 赞同：4
> 
> 时间：2012-06-04T23:56:38.137
> 
> 标签：javascript, jquery, internet-explorer-8, textarea, newline

我正在制作一个需要 textarea 的跨浏览器表单。此文本区域通过两种方式接收数据： - 向服务器发送 Ajax 调用并返回数据 - 用户输入的数据

[http://jsfiddle.net/garrettwong/x3KSP/](http://jsfiddle.net/garrettwong/x3KSP/)

我在 IE8 上遇到问题，其中 textarea 文本未格式化（未读取换行符），而在 Chrome 中，相同的代码可以很好地格式化 textarea。如果可能的话，我希望使用一个单独的 JavaScript 解决方案，但我不确定从这里去哪里。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T00:01:00.263

你为什么用`text()`？使用 设置值[`val()`](http://api.jquery.com/val/)。

新线路正常`\n\r`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-05T00:03:00.653

执行替换操作以确保`\r`在 every 之前有一个`\n`：

```
str = str.replace(/\r?\n/g, "\r\n"); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/x3KSP/8/)

浏览器使用`\r\n`换行符，但现代浏览器（如 Chrome 和 Firefox）也可以处理 Unix 样式的`\n`换行符。IE8 需要适当的`\r\n`换行符，这也适用于所有其他浏览器。

正如@epascarello 所指出的，用于`.val()`操纵文本区域的`value`属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T00:01:29.053

只需使用 "\r\n" 换行即可。

# python - Fabric：以特定用户的身份做所有事情

> ID：10889930
> 
> 赞同：4
> 
> 时间：2012-06-04T23:57:05.857
> 
> 标签：python, deployment, build, fabric

我的构建和生产部署使用一个用户特定用户的密钥连接，该密钥在部署之间共享，并且在机器启动期间复制密钥。

此用户**deploy**具有共享的 ssh 密钥，允许 ssh 到任何产品机器以及它们之间。

现在我的结构构建作为用户**Jenkins**运行。

如何指示fabric 以特定用户身份执行所有操作（在本例中为**部署**）？相当于`sudo su deploy`

我不想在每项任务中都做一个`prefix`或。`with`而是设置一个全局变量。

詹金斯在轮组中并且有 sudo perms

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T05:27:10.070

如果我正确理解您的问题，您希望在不使用前缀或 with 的情况下以其他用户身份执行命令。

如果您愿意，sudo 函数接受可以是全局变量的用户。

从文档：

```
fabric.operations.sudo(command, shell=True, pty=True, 
                       combine_stderr=True, user=None, 
                       quiet=False, stdout=None, stderr=None) 
```

你可以简单地调用你的任务

```
sudo(command, user=sudouser) 
```

并将 sudouser 设置为在其他地方“部署”。

实际上，这与使用上下文没有什么不同：

```
with settings(sudo_user=sudouser):
      sudo(command) 
```

在这两种情况下，您都应该能够全局更改此 sudo_user。

# android - SpeechRecognizer 的 EXTRA_LANGUAGE_PREFERENCE？

> ID：10889933
> 
> 赞同：0
> 
> 时间：2012-06-04T23:57:34.767
> 
> 标签：android, speech-recognition

如[本答案](https://stackoverflow.com/a/10548680/679180)中所述，为 RecognizerIntent 强制使用特定语言很简单。

```
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_PREFERENCE, "en-US"); 
```

但这仅在`intent`实例化的类型为[RecognizerIntent](http://developer.android.com/reference/android/speech/RecognizerIntent.html)时才有效。

在我的应用程序中，我使用较低级别的`SpeechRecognizer`，即：

```
 Intent intent = new Intent(SpeechRecognizer.RESULTS_RECOGNITION); 
```

并且试图强制使用上述语言根本行不通。

以编程方式设置[SpeechRecognizer](http://developer.android.com/reference/android/speech/SpeechRecognizer.html)语言首选项的正确方法是什么？

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:35:07.507

语言偏好应该有效。

请发布更多代码。

你仍然应该创建一个`Intent`这样的：

```
Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH); 
```

不像这样：

```
 Intent intent = new Intent(SpeechRecognizer.RESULTS_RECOGNITION); 
```

然后你必须`SpeechRecognizer`直接调用类。

你这样做吗？

作为参考，请参阅此[代码](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/speech/SpeechRecognizingActivity.java)的`recognizeSpeechDirectly()`方法。

# java - EL中整数除法的字符串表示（未截断）？

> ID：10889936
> 
> 赞同：1
> 
> 时间：2012-06-04T23:58:01.880
> 
> 标签：java, jsf, integer, el, division

我认为这将是一个自动的：

```
<rich:tooltip value="Download (#{doc.size div 1024 + 1} KB)" /> 
```

我需要计算一个文件用于下载的 KB 数（大小是整数）。在常规 Java 代码中，相同的计算会**截断**小数部分并返回剩余的整数。然而，在 JSF EL 中，没有截断除法，所以除法返回一个浮点数。

无论如何，它是如何在 EL 中完成的——即**没有**引入完成这项工作的 bean 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T00:17:11.770

你可以[`fn:split()`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/fn/split.fn.html)用来摆脱分数。

```
<ui:param name="size" value="#{fn:split(doc.size / 1024, '.')[0]}" />
<rich:tooltip value="Download (#{size + 1} KB)" /> 
```

小心：它取决于语言环境。在某些语言环境中，它是一个逗号`,`。我宁愿为这项工作创建/使用 EL 函数，就像[OmniFaces`of:formatBytes()`](http://showcase.omnifaces.org/functions/Converters)所做的那样。

```
<rich:tooltip value="Download (#{of:formatBytes(doc.size)})" /> 
```

# php - 仅在 PHP DOM 中选择没有命名空间/前缀的节点？

> ID：10889941
> 
> 赞同：0
> 
> 时间：2012-06-04T23:58:32.403
> 
> 标签：php, xml, dom, namespaces

我正在尝试使用 PHP 中的 DOM 读取一些 RSS 提要，如下所示：

```
 <channel>
        <atom:link href='' rel='self' type='application/rss+xml' />
        <title>TechStuff</title>
        <link>http://www.howstuffworks.com</link> 
```

要获取链接 ( `<link></link>`)，我使用以下代码：

```
 $doc->getElementsByTagName('link')->item(0); 
```

它适用于我尝试过的所有其他 RSS 提要。但是这个已经放在`<atom:link>`了之前`<link>`，这意味着它会抓取`<atom:link>`。

那么如何只选择没有命名空间的节点呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:36:13.340

设法通过使用[DOMXPath](http://www.php.net/manual/en/class.domxpath.php)和[XPath 语法](http://www.w3schools.com/xpath/xpath_syntax.asp)来解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-10T16:44:39.703

这是 DOMXPath 示例：

```
$xpath = new DOMXpath($doc);
$linkPath = $xpath->query("/rss/channel/link");
$link = $linkPath->item(0)->nodeValue; 
```

在类似的 XML 层次结构上，它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:57:25.990

`->prefix`您可以通过检查或来判断节点是否具有命名空间`->namespaceURI`：

```
foreach ($doc->getElementsByTagName('link') as $link) {
    if (strlen($link->prefix)) {
        continue;
    }
    // $link does not have prefix
} 
```

# iphone - 在比 SDK 更新的 iOS 上测试 iPhone IOS 设备

> ID：10889942
> 
> 赞同：1
> 
> 时间：2012-06-04T23:58:44.267
> 
> 标签：iphone, ios, xcode, provisioning

在进行初步研究时，IOS 开发的最低要求仅限于带有 Snow Leopard 的基于 Intel 的 Mac。从那时起，我购买了我的新（旧）Mac，安装了 SDK（4.3），并编写了我的第一个应用程序。不幸的是，这台 Mac 将运行的最高 SDK 是 iOS 4.3。我要测试的 iPhone 是 iOS 5.x。我无法弄清楚如何设置配置以允许我在我的 iPhone 上安装我的应用程序。我已经支付了费用，通过了简短的（针对后来的 SDK）帮助程序，但我的 XCode 想要我在手机上安装一个较旧的 iOS 来连接。有谁知道解决这个问题的方法？

提前致谢，

萨根

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T00:07:06.097

创建一个临时构建，并通过 iTunes 或 url 将生成的 .ipa 文件加载到设备上。Ad hoc 构建将允许您在单个打包文件中创建应用程序的构建副本，该文件可能会加载到您的设备上。

网上有很多关于如何做到这一点的参考资料，这是 XCode 4 的一个指南：

[http://benscheirman.com/2011/06/creating-proper-ipa-files-in-xcode-4](http://benscheirman.com/2011/06/creating-proper-ipa-files-in-xcode-4)

这是 XCode 3 的指南： [http ://www.springtiger.co.uk/2010/12/06/creating-a-ipa-file-for-your-application/](http://www.springtiger.co.uk/2010/12/06/creating-a-ipa-file-for-your-application/)

# debugging - LLDB 的快速参考？

> ID：10889943
> 
> 赞同：0
> 
> 时间：2012-06-04T23:58:48.090
> 
> 标签：debugging, lldb

我熟悉 GDB 的单页和双页快速参考“卡片”，并且发现它们非常有用。

现在我们的项目正在使用 LLDB，我想为该工具找到一个等效的工具，但我没有像我预期的那样快速找到一个。

一个存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:15:02.063

也许是[LLDB 到 GDB 命令映射](http://lldb.llvm.org/lldb-gdb.html)？如果您希望它采用参考卡片样式布局，则需要重新格式化，但它已经像一个一样写了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-19T14:37:38.447

我刚开始学习lldb。至今：

```
 $lldb a.out [args]  
    (lldb)r    -->run  
    (lldb)b 22 -->breakpoint at linenumber 22 )  
    (lldb)l    -->list your code  
    (lldb)n    -->next step  
    (lldb)s    -->step 
```

# javascript - 即使我之前使用它，javascript 也没有定义？

> ID：10889953
> 
> 赞同：0
> 
> 时间：2012-06-04T23:59:36.270
> 
> 标签：javascript

```
console.debug("slide number");
console.debug(slideNumber)

console.debug("divs");
console.debug(imageIDDivs);
var singleimageidDiv = imageIdDivs[slideNumber]; 
```

这是我的 javascript 的一部分。在萤火虫中，这是输出。

```
slide number
Inspec...0001647 (line 49)
1
Inspec...0001647 (line 50)
divs
Inspec...0001647 (line 52)
[div#75bf9997-f111-4cbe-bee7-0765ba3bb8ca.slideshowImage, div#68c33349-cae6-4c2d-a9ed-1f87b12f06a2.slideshowImage, div#9e068363-6613-4346-b1e3-2ff4a3e2223b.slideshowImage, div#963a1d6a-a744-4a81-8608-5475b8fb21b1.slideshowImage, div#bd3f116d-9af9-4ca0-a45c-a366fd166ed0.slideshowImage, div#8ad2a764-14ab-466f-a614-a3676cca2127.slideshowImage, div#e99b579a-8e09-42e5-8951-b00613bc333a.slideshowImage, div#843ccfe7-5708-4794-b0dd-b10350277c64.slideshowImage, div#1e24f5f4-de3a-4b4f-b23d-b6ef9b513dad.slideshowImage, div#e862c867-5b93-4a3b-a235-b7bc0ac9cf37.slideshowImage, div#d99ca360-952d-46ff-9bda-bc87e13ef0a2.slideshowImage]
Inspec...0001647 (line 53)
imageIdDivs is not defined 
```

它说 imageIdDivs 没有定义。然而，在它正上方的那一行，我输出它就好了，它里面有很多 div。而之前输出的 slideNumber 只是数字 1。这怎么可能？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T00:01:24.740

`imageIDDivs`!==`imageIdDivs`

**javascript区分大小写！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T00:02:15.600

Javascript 区分大小写。这意味着不**完全相同**的两个变量将被视为不同的变量。

在您的脚本中，您正在引用变量`imageIDDivs`和`imageIdDivs`. 解决方案是将`imageIdDivs`第 53 行更改为`imageIDDivs`.

# image - Leaflet（Cloudmade）弹出窗口中的图像大小似乎不计算以确定弹出窗口的大小

> ID：10889954
> 
> 赞同：4
> 
> 时间：2012-06-04T23:59:39.820
> 
> 标签：image, map, popup, size, leaflet

我很难解决在 Mapbox 地图上使用 Leaflet 库时遇到的问题。具体来说，我编写了代码，以便将弹出窗口绑定到地图上的每个图标/标记。在每个弹出窗口中都有一个链接到不同网站的图像。不幸的是，该图像的大小似乎不计入实际弹出窗口大小的计算中，具有以下后果：

*   图像比弹出窗口大得多（[http://postimage.org/image/c7u0n5sx3/](http://postimage.org/image/c7u0n5sx3/)）
*   自动平移选项不起作用

我的代码如下：

```
 <?php  
    // Retrieves info from all correct rows in database to further input in javascript
    while ($row = mysql_fetch_assoc($get_info)){
    $name = $row ['nombre'];
    $lat = $row ['lat'];
    $long = $row ['long'];

    echo
        "<script type=\"text/javascript\">
        var latlng = new L.LatLng(".$row ['lat'].", ".$row ['long']."); 
        var flyer = \"<a href='boliches/pdnws/".$row ['nombre'].".php'><img src='boliches/flyers/".$day."/".$row ['nombre'].".jpg'/></a>\";
        var MyIcon = L.Icon.extend({
                iconUrl: 'boliches/icons/".$row ['nombre'].".png',
        shadowUrl: null, iconSize: new L.Point(50, 50),
        shadowSize: null,
        iconAnchor: new L.Point(25, 25),
        popupAnchor: new L.Point(1, 1)
        }); 
        var icon = new MyIcon();    
        var marker = new L.Marker(latlng, {icon: icon});
        map.addLayer(marker);   
        marker.bindPopup(flyer, {maxWidth:800, autoPan:true});
        </script>"; 
    }
    ?> 
```

你能想出一个可能的解决方案吗？恐怕我在编程方面还是个初学者，但是已经有太多天无法破解这个了。我真的很感谢你的帮助！太感谢了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-22T21:18:39.467

这对我来说似乎真的很重要

```
.leaflet-popup-content {
    width:auto !important;
} 
```

在[此链接中找到](https://github.com/Leaflet/Leaflet/issues/724)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T14:01:39.730

`bindPopup()`当我遇到问题时，通过 Dom 创建一个新元素并将其用作弹出窗口的内容对我有用。

虽然没有记录，但查看源代码会发现此方法可以将 Dom 节点作为内容，而不是包含标记的字符串。

使用此方法会导致单击时弹出窗口的大小正确。

例子：

```
var divNode = document.createElement('DIV');
divNode.innerHTML = '<p>My custom HTML <img src="..." /></p>';
marker.bindPopup(divNode); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T21:38:06.973

我是传单作者。问题是 Popup 代码在计算所需大小时并不知道其内容的图像大小。`<img width="100" ... />`最好的解决方案是手动指定弹出窗口中每个图像的宽度和高度（

```
function onPopupImageLoad() {
    marker._popup._update();
}

var images = marker._popup._contentNode.getElementsByTagName('img');

for (var i = 0, len = images.length; i < len; i++) {
    images[i].onload = onPopupImageLoad;
} 
```

# c++ - 是否可以在 C++ 中动态填充 char* 数组

> ID：10889955
> 
> 赞同：0
> 
> 时间：2012-06-04T23:59:45.513
> 
> 标签：c++, dynamic, character-arrays

我有这样的情况。

```
declare array of char*;
switch(id)
{
case 1:
    add 4 words in array
case 2:
    add 2 words in array
default:
    add 1 word in array
}

use array here; 
```

是否有可能在 C++ 中做这样的事情。我试过这样做，但它不适合我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T00:02:41.053

是的。对于干净、易于理解、正确、异常安全的代码，请使用`vector`and `string`：

```
std::vector<std::string> v;

switch (id)
{
case 1:
    v.push_back("a");
    v.push_back("b");
    v.push_back("c");
    v.push_back("d");
    break;

case 2:
    v.push_back("a");
    v.push_back("b");
    break;

default:
    v.push_back("a");
}

// Use the strings in v; for example, using a C++11 lambda expression:
std::for_each(begin(v), end(v), [](std::string const& s)
{
    std::cout << s << std::endl;
});

// Or using a for loop:
for (std::vector<std::string>::const_iterator it(v.begin()); it != v.end(); ++it)
{
    std::cout << *it << std::endl;
} 
```

当然，您可以使用手动动态分配和清理数组和 C 字符串来完成类似的结果，但要这样做并确保代码正确和异常安全更加困难，并且需要更多的代码。

# linux - 用于更改符号链接指向的位置的脚本

> ID：10889961
> 
> 赞同：1
> 
> 时间：2012-06-05T00:00:32.690
> 
> 标签：linux, bash

我有几百个符号链接要转移位置。现在例如：

```
randomfile -> /home/me/randomfile
randomfile2 -> /home/me2/randomfile2 
```

有很多这样的文件。假设我想将符号链接全部转换为链接

```
randomfile -> ../me/randomfile
randomfile2 -> ../me2/randomfile2 
```

批处理这个最快的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T00:20:27.820

```
for f in *; do
  ## if not a symlink, ignore this file
  [[ -L "$f" ]] || continue
  ## determine where it points
  tgt=$(readlink "$f")
  ## if not pointing to /home/*, ignore this file
  [[ $tgt = /home/* ]] || continue
  ## calculate the new target
  new_tgt=../${tgt#/home/}
  ## actually create the new link
  ln -T -sf "$new_tgt" "$f"
done 
```

这使用 bash（在模式下不起作用`/bin/sh`）和 GNU ln - 对于其他实现，在`ln -T`不可用的情况下，当目标是目录时可能需要额外的逻辑。

# visual-c++ - LoadLibrary() 失败并出现错误 1114：用户的“DLL 初始化例程失败”

> ID：10889962
> 
> 赞同：0
> 
> 时间：2012-06-05T00:00:46.980
> 
> 标签：visual-c++, loadlibrary

我遇到 LoadLibrary() 失败并出现错误 1114 的情况，但仅当登录的用户是“用户”组的一部分时才会失败。适用于“管理员”和“高级用户”。如果我以“运行身份”管理员或高级用户身份启动应用程序，我也可以正常运行

我可以单步执行一些代码，但不能对其进行任何更改（至少不能对现场进行任何更改），因此不幸的是，解决方案必须在应用程序之外。

到目前为止，我试图完全访问所有 exes 和 dll 到用户组的目录（和包含文件）但没有成功。接下来我开始研究组策略，但在我修改一堆东西之前，我以为我是由这个社区运行的。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:26:45.990

DLL 初始化例程失败意味着库的 DllMain 返回了一些异常状态，因此必须需要管理员才能运行。如果您指定要加载的库，我们可以提供更好的答案。

# ruby - RegEx，如何获取所有匹配项和组？红宝石 1.9.3p125

> ID：10889964
> 
> 赞同：0
> 
> 时间：2012-06-05T00:01:00.973
> 
> 标签：ruby, regex, ruby-1.9.3

假设我有以下字符串：

```
google-com, Awesome-net(Ooops), facebook-com / rocket-yet 
```

我想提取所有以结尾的单词，`-com`但将它们分组。

目前，我已经尝试过：

```
^\w+[-]com 
```

这工作正常，但只赶上第一场比赛。如何获得所有其他人？也许使用括号的东西，但我不知道如何..

将所有匹配的字符串放入一个`MatchData`对象（Ruby）中，我可以像`Array`.

我正在使用红宝石 1.9.3p125

```
1.9.3p125 :124 > original
 => "google-com, Awesome-net(Ooops), facebook-com / rocket-yet" 
1.9.3p125 :125 > results = original.match(/(\w+-com)/)
 => #<MatchData "google-com" 1:"google-com"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T00:13:50.477

只需使用 findall 选项，这将起作用：

`\w+-com`

我在[http://rubular.com/中对其进行了测试](http://rubular.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T00:04:29.583

编辑：发现问题，您的正则表达式在开头有一个插入符号，表示只有字符串开头的 this 实例才会匹配。删除它应该允许您匹配字符串中的所有组：

```
(\w+[-]com) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T02:31:46.673

似乎这`match`不是正确的方法。

改用 Ben Roux 和Epic_orange`scan`建议的正则表达式使其工作。

# c# - NHibernate多对多，无法删除一行

> ID：10889970
> 
> 赞同：0
> 
> 时间：2012-06-05T00:01:49.437
> 
> 标签：c#, .net, nhibernate, orm

我有以下实体：项目、项目映射和用户，它是多对多这里是映射：

```
public ProjectMembershipMapping()
{
    Property(pm => pm.IsAccepted, prop => prop.NotNullable(true));
    Property(pm => pm.Permission, prop => prop.NotNullable(true));
    ManyToOne(pm => pm.Member, mapping =>
                                   {
                                       mapping.Lazy(LazyRelation.NoLazy);
                                       mapping.Cascade(Cascade.All);
                                   });
    ManyToOne(pm => pm.Project, mapping =>
                                    {
                                        mapping.Lazy(LazyRelation.NoLazy);
                                        mapping.Cascade(Cascade.All);
                                    }); 

    ComposedId(pm =>                                          
                   {
                       pm.ManyToOne(prop => prop.Member);
                       pm.ManyToOne(prop => prop.Project);
                   });
}

public ProjectMapping()
{   
    Set(proj => proj.Members,
            mapping =>
            {
                mapping.Lazy(CollectionLazy.NoLazy);
                mapping.Inverse(false);
                mapping.Cascade(Cascade.All);
                mapping.Table("ProjectMembership");
                mapping.Key(k => k.Column("Project"));
            },
            action => action.OneToMany()
        );      
}

public class DevcoopUserMapping : ClassMapping<DevcoopUser>
{
        Bag(user => user.ProjectMemberships, 
            mapping =>
                {
                    mapping.Lazy(CollectionLazy.NoLazy);
                    mapping.Inverse(false);
                    mapping.Cascade(Cascade.All);
                    mapping.Table("ProjectMembership");
                    mapping.Key(k => k.Column("Member"));
                },
            action => action.OneToMany());
} 
```

用户可以是许多项目的成员。现在假设我要取消他对项目的订阅。只需通过 ISession 对象删除 ProjectMembership 对象就会抛出我：

```
deleted object would be re-saved by cascade (remove deleted object from associations)[devcoop.Daos.ProjectMembership#devcoop.Daos.ProjectMembership] 
```

另一方面，当我第一次尝试从 Project 和 User 中删除这个 ProjectMembership 实例时（我按照建议从关联中删除它），我得到了异常：

```
could not delete collection: [devcoop.Daos.Project.Members#1][SQL: UPDATE ProjectMembership SET Project = null WHERE Project = @p0] 
```

任何人都可以帮忙吗？据说我在映射周围搞砸了一些东西，但我不知道这是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:51:58.500

在删除 ProjectMembership 实例之前，请将其从 DevcoopUser.ProjectMemberships- 和 Project.Members-collections 中删除。

我相信这应该有效：

```
 membership.Member.ProjectMemberships.Remove(membership);
  membership.Project.Members.remove(membership);
  session.Delete(membership); 
```

而且我认为您应该从 ProjectMembership 映射中删除 CascadeAll 。我不完全确定，但我认为它会将删除级联到使用 CascadeAll 映射的集合中的所有成员和项目，您可能不希望发生这种情况。

# git - 在没有 Git 本身的情况下安装 Git-TFS

> ID：10889971
> 
> 赞同：8
> 
> 时间：2012-06-05T00:01:54.783
> 
> 标签：git, windows-7, git-tfs, chocolatey

目前，安装 Git-TFS 桥的唯一方法是[通过 Chocolatey](https://github.com/git-tfs/git-tfs#installing)。然而，当我尝试它时，它似乎安装了 Git（适用于 Windows）以及实际的 Git-TFS 包。我已经在我的工作机器上安装了 Git，所以我不需要它来修改/删除已经存在的内容。

有没有办法强制 Chocolatey 不修改我当前的 Git 安装而只放入 Git-TFS 包？如果有，我如何配置它以与我当前的 Git 安装一起使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T14:23:59.697

我不能代表其他 git 客户端，但如果您使用的是 git-bash shell，您可以从 github 下载 git-tfs 的源代码，编译它，然后将其放在系统上的任何位置，然后将该位置添加到您的路径环境变量。shell 会找到 git-tfs 并将其挂入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T07:08:12.660

最简单的方法是让 bridge 安装 Git，同时将 Git 安装保存在自定义目录中，您可以使用[适用于 Windows 的官方 Git 的便携式应用程序](http://code.google.com/p/msysgit/downloads/list)轻松完成此操作（即，您可以在任何您喜欢的地方简单地解压缩）。

从那里开始，使用您的 git 安装主要是为了捕获您的全局配置设置，这些设置位于`%HOME%/.gitconfig`. 因此，请确保您已`HOME`定义，并且 bot git（您的和桥安装的那个）将使用这些。

* * *

现在，如果您不需要便携式安装（或像[edwinf](https://stackoverflow.com/users/1440011/edwinf)在[他的回答](https://stackoverflow.com/a/10916204/6309)中建议的完全重新编译），那么[ferventcoder](https://stackoverflow.com/users/18475/ferventcoder)（[巧克力组织](https://github.com/chocolatey)的成员）建议在评论中查看/评论[问题 131](https://github.com/chocolatey/chocolatey/issues/131)：

> 添加一个忽略安装依赖的开关（类似`-ignoredependencies`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T13:07:30.840

你可以[下载 git-tfs](https://github.com/git-tfs/git-tfs/releases)。

无需使用巧克力！（但巧克力是一个非常好的工具；））

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T20:07:12.573

只需下载并解压缩最新版本，然后将该目录放在您的 PATH 中。

# regex - 正则表达式：分组仅返回最后一个匹配项

> ID：10889972
> 
> 赞同：2
> 
> 时间：2012-06-05T00:02:05.997
> 
> 标签：regex, pattern-matching

我有一组这种形式的字符串：

```
NOOO (2), { AAA (1), BBB (2), CCC-CC (3), DDD (4) } 
```

（括号内的元素可以多于四个）

我需要匹配括号内的内容并仅提取（使用组）'AAA'、'BBB'、...子字符串。所以这个例子的结果将是

```
group1 : AAA
group2 : BBB
group3 : CCC-CC
group4 : DDD 
```

我试过这个表达式：

```
\{ (?:(\S+) \(\d+\),?\s?)+ \} 
```

但它只返回最后一个匹配的组（因此，在这种情况下，只返回“DDD”）。我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:58:08.670

如果您使用的是 .NET 正则表达式，那么您的表达式将起作用，因为捕获组将捕获其所有值。否则，您必须使用更棘手的正则表达式或分两步进行匹配，首先匹配`{ ... }`组，然后匹配其中的元素。

棘手的正则表达式看起来像：

```
(?:{|\G(?!^),)   # match a { or where the previous match ended followed by a ,
\s+              # space between elements
(\S+)\s+\(\d+\)  # an element
(?=[^{]*})       # make sure it's eventually followed by a } 
```

You can use that expression as it's written if you use the `/x` flag (can also be set by adding `(?x)` in the beginning of the expression).

The regex without the comments:

```
(?:{|\G(?!^),)\s+(\S+)\s+\(\d+\)(?=[^{]*}) 
```

This expression uses `\G` which your regex flavor has to support. Most modern regex flavors have it, including: Perl, PCRE (PHP/etc), .NET.

Note that such an expression isn't perfect. It would capture `AAA` and `BBB` in the following string for example:

```
{ AAA (1), BBB (23), CCC, something invalid here #¤% ))),,,,!! } 
```

Altho that can be fixed if required (except for the counter).

# android - 您如何在移动 Android 项目上进行测试驱动开发？

> ID：10889978
> 
> 赞同：3
> 
> 时间：2012-06-05T00:03:02.330
> 
> 标签：android, agile

TDD 需要自动化测试，所以我想听听其他人如何在 Android 项目中应用 TDD？什么对您的团队有效/无效？你是如何自动化视觉测试的？我可以看到服务层和模型的 TDD，但是 TDD 和活动、布局的视觉变化等呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T00:14:35.443

Monkey 工具，也称为 UI/ApplicationExtracter Monkey，在识别 UI 错误和错误方面非常有用。在发布任何 android 应用程序之前针对 apk 运行它是一个好习惯。

**这个怎么运作**

Monkey 是一个命令行工具，您可以在任何模拟器实例或设备上运行。它将用户事件的伪随机流发送到系统中，作为对您正在开发的应用软件的压力测试。要控制它，您有一个选项列表。

这些选项使您可以控制：

1.  基本配置：事件数
2.  约束：对包的限制
3.  事件类型和频率
4.  调试选项

**这是运行猴子的通用命令：**

```
adb shell monkey [options] 

//example
adb shell monkey -p your.package.name -v 500 
```

有关更多信息，请参阅官方 android 开发者网站上的此[链接](http://developer.android.com/guide/developing/tools/monkey.html)

**单元测试 Android 应用的最佳实践：**

在 *ApiDemos*示例应用中，您可以找到*ActivityUnitTestCase*和*ActivityInstrumentationTestCase*类。

这些是用于测试 android 程序的实用程序类。

以下是参考的链接： [ActivityInstrumentationTestCase](http://developer.android.com/reference/android/test/ActivityInstrumentationTestCase.html) 和 [ActivityUnitTestCase](http://developer.android.com/reference/android/test/ActivityUnitTestCase.html)

*android.jar*包含一个用于普通旧单元测试的**JUnit**测试框架子集。查看*ApiDemos*示例，了解如何编写和运行它。

你也可以试试[Robotium！](http://code.google.com/p/robotium/)和[Robolectric](http://pivotal.github.com/robolectric/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T02:18:33.950

查看 SDK 文档中的 Spinner/SpinnerTest 示例应用，以及记事本示例应用的测试项目。还有一个你好，测试教程。

使用 ActivityInstrumentationTestCase2，而不是 ActivityInstrumentationTestCase。

ActivityUnitTestCase 的价值有限。它在与真正的 Android 系统不太一样的测试工具中运行。AndroidInstrumentationTestCase2 为您提供更多工作。

android.test 中的所有测试用例类都是基于 Junit3，而不是 Junit4。您可以在线找到有关 Junit3 的大量文档。

android.test 测试用例类模仿“单元测试”。对于某些组件（例如 Activity），在 Android 中无法使用 Junit3 进行真正的单元测试，因为仅使用反射无法正确实例化组件类。诸如 ActivityInstrumentationTestCase2 之类的类用一些“魔法”克服了这个问题。我认为它们是与 Junit3 的 TestCase 非常相似的单元测试类。它们被称为“功能测试”，因为单元测试不应该具有外部依赖项，并且 Android 活动（例如）需要 Android 系统。我认为这是吹毛求疵，但无论如何...

步骤：首先在 POJO（Plain Ol' J--- Objects）中定义尽可能多的内容。在单元测试中测试那些。测试它们与功能测试框架（如 Robotium）的交互。对任何不是 Android 对象的东西使用模拟。

从那里，使用来自 android.test.mock 的存根 Android 对象和您自己的存根来测试 Android 对象。最后，当一切都设置好后，使用 Android 测试用例来测试“框架”。

模拟 Android 对象不容易实现，这就是为什么 android.test 和 android.test.mock 中的“模拟”实际上是存根。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-09T05:19:44.450

应用TDD for android， [Android Testing Codelab](https://codelabs.developers.google.com/codelabs/android-testing/#0)对你很有帮助。在进行 TDD 之前，您需要应用良好的架构模式，例如 MVP、MVVP。因此，您将能够从您的活动和片段中提取更多代码。对于活动、布局的视觉更改等，您可以在代码实验室中查看[第七点。](https://codelabs.developers.google.com/codelabs/android-testing/#6)他们使用 Espresso 为 Activity 和视觉布局测试做 TDD。我试过了，对我很有帮助。

奖励：检查[清洁架构](http://fernandocejas.com/2014/09/03/architecting-android-the-clean-way/)

# facebook - 如何创建重定向到粉丝专页相册的 Facebook 应用

> ID：10889979
> 
> 赞同：1
> 
> 时间：2012-06-05T00:03:09.577
> 
> 标签：facebook, photo

我正在尝试将重定向 facebook 应用程序设置为我的 facebook 粉丝页面上的四个自定义选项卡之一。我希望它重定向到我在 Facebook 上我的粉丝页面的照片中的一组专辑。

例如：专辑名称：What's On Sale。里面是目前在商店位置出售的商品的图像。

我已经按照各种教程介绍了如何在 facebook 上创建应用程序，但没有取得任何成功。有没有一些非常简单的方法可以做到这一点？

我觉得应该有，考虑到我只是在 facebook 内链接，而不是在外部链接。

谢谢，杰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T01:32:48.693

我假设您知道如何在页面顶部添加一些 javascript...

首先，获取您要重定向到的相册的完整 URL，然后您可以使用以下...

```
<script type="text/javascript">
    top.location.href = 'ALBUM_URL_IN_HERE';
</script> 
```

这将导致页面立即重定向到该 URL。只需确保将其放在页面头部的顶部即可。

我猜当您打开应用程序的选项卡时，您可能还会遇到从服务器加载哪个页面的问题？目前有点难以猜测，我认为您可能需要在问题中提供更多信息！:-)

# javascript - jQuery scrollTo - 垂直居中窗口中的 Div

> ID：10889983
> 
> 赞同：2
> 
> 时间：2012-06-05T00:03:31.423
> 
> 标签：javascript, jquery, html, scroll, center

我有一个在页面顶部使用固定菜单的网站。

单击链接时，它应该垂直滚动，以便该目标 div 的中心与窗口的垂直中心对齐，偏移标题的高度。- 这非常重要，这样无论显示器的分辨率如何，div 都居中

我正在使用 jQuery 和 scrollTo，但无法弄清楚所需的数学运算。

这是我的尝试：

```
function scrollTo(target) {
var offset;
var scrollSpeed = 600;

if (viewport()["width"] > 767 && !jQuery.browser.mobile) {
    // Offset anchor location and offset navigation bar if navigation is fixed
    offset = $(target).offset().top - document.getElementById('navigation').clientHeight;
} else {
    // Offset anchor location only since navigation bar is now static
    offset = $(target).offset().top;
}

    $('html, body').animate({scrollTop:offset}, scrollSpeed);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:10:32.237

最终想通了。只是在数学上很愚蠢。固定页眉和页脚的偏移量也适用于所有分辨率。

```
 // scrollTo: Smooth scrolls to target id
function scrollTo(target) {
    var offset;
    var scrollSpeed = 600;
        var wheight = $(window).height();
        //var targetname = target;
        //var windowheight = $(window).height();
        //var pagecenterH = windowheight/2;
        //var targetheight = document.getElementById(targetname).offsetHeight;

    if (viewport()["width"] > 767 && !jQuery.browser.mobile) {
        // Offset anchor location and offset navigation bar if navigation is fixed
        //offset = $(target).offset().top - document.getElementById('navigation').clientHeight;
                offset = $(target).offset().top - $(window).height() / 2 + document.getElementById('navigation').clientHeight + document.getElementById('footer').clientHeight;
    } else {
        // Offset anchor location only since navigation bar is now static
        offset = $(target).offset().top;
    }

    $('html, body').animate({scrollTop:offset}, scrollSpeed);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T00:33:48.383

我做了一个简单的jquery。我认为这可能有助于你正在寻找什么。

请看[演示](http://jsfiddle.net/JeTHp/)

目标`div`保持垂直居中偏移标题。

# javascript - 将参数从控制器传递给 JS.ERB 文件？[导轨 3]

> ID：10889995
> 
> 赞同：0
> 
> 时间：2012-06-05T00:05:04.997
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, forms, parameters

我试图允许用户将保存的任务“导入”到教学大纲帖子中。教学大纲有许多任务，教学大纲表单是一个嵌套表单，用户可以在其中“添加任务”，这将附加一个新的任务文本框。

当我“导入”任务时，我希望 javascript
1\. 单击“添加任务”链接（添加嵌套表单）
2\. 将“导入任务”的值输入到 ckeditor 文本框中。

_IMPORT_FORM.HTML.ERB

```
 <%= form_tag(import_missions_path, :method => :post, :id => "import-js" )  do |f| %>
  <ul>
  <% current_user.folders.find_by_order(1).missions.each do |mission| %>
<li> <%= check_box_tag "mission_ids[]", mission.id %>
  <%= mission.id.to_s + ". " + mission.title %> </li>
  <% end %>
  </ul>
  <%= submit_tag "Import ", :class => 'btn btn-primary' %>
<% end %> 
```

然后转到 SYLLABUSES#IMPORT

```
def import
@missions_hash = []
    #loop through each mission id from :missions_id
params[:mission_ids].each do |id|
 @missions_hash << Mission.find(id)
end
respond_to do |format|
  format.html { redirect_to edit_syllabus_path(@syllabus), notice: "imported" }
  format.js { render 'folders/import.js' }
end
end 
```

然后我想渲染 IMPORT.JS.ERB 文件，并传入@missions_hash。下面的代码可能是错误的，这是我需要帮助修复它的地方。

IMPORT.JS.ERB

```
//loop for each mission passed in 
<% @mission_hash.each do |mission| %>
  //click add missions
  $('#add-missions-button').trigger('click');
  //pass in mission.title & mission.content to form textbox value
<% end %> 
```

将 Ruby 参数传递到这个 Javascript.erb 文件的正确语法是什么？另外，我想将导入的任务的“标题”和“内容”复制到新添加的任务表单框中：

```
 <%= f.text_field :title, :class =>'row span6' %>
  <%= f.cktext_area :content, :toolbar => 'MyToolbar', :class => 'row span6', :rows => '5', :placeholder => "What is the first step a learner should do? (e.g. Watch an intro video, read certain article)" %> 
```

我如何将它复制到这些文本框的值中，以便用户在导入后可以编辑它？

我意识到这个问题组织得很糟糕，但我试图在不解释整个背景的情况下让它尽可能简单。我还是初学者，请谅解。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T02:16:49.500

好的，IMPORT.JS.ERB 是将被发送回浏览器的 javascript，但是由于 .ERB 扩展名，它会在控制器的上下文中首先由嵌入式 ruby​​ 处理，然后再发送到浏览器，所以您可以使用标准 ERB 语法，

```
 <%= @something %> 
```

在你的 javascript 中的任何地方来操作被发回的 javascript，所以你可以这样做：

导入.js.erb：

```
$('#somediv').html('<%= escape_javascript(@missions_hash.inspect) %>'); 
```

如果您的页面上有一个 id = 'someday' 的 div，它的内容应该设置为missions_hash 的转储。这也假设您正在使用 AJAX，即：

```
<%= form_tag(import_missions_path, 
  :method => :post, 
  :id => "import-js" , 
  :remote=>true)  do |f| %> 
```

但是，您需要告诉 rails 使用嵌入的 ruby​​ 预处理 javascript 文件，因此您必须更改：

```
render 'folders/import.js' 
```

至

```
render 'folders/import.js.erb' 
```

有更简洁的方法来完成你想要的整体，但我认为你现在只需要弄清楚我们嵌入的 ruby​​ 和 javascript 组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T07:16:20.103

我认为你不应该这样做，因为你会在 sprocket 编译时遇到问题。文件更改时会在第一时间编译。如果您想将变量传递给 js，您可以尝试使用 gem[客户端变量](https://github.com/coffa/client_variable)