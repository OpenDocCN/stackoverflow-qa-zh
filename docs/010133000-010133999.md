# StackOverflow 问答 10133000-10133999

# tcl - 在 tcl 中一一打印值

> ID：10133000
> 
> 赞同：1
> 
> 时间：2012-04-12T22:52:52.010
> 
> 标签：tcl, informix

我在 tcl 中有以下代码..

```
proc GetPPVSummary {} {
    global LIBRARY DB_MACHINE ALT_MACHINE

    set query "SELECT first 2 * from test ORDER by ppv_id DESC"
    set result [mtlrequest $LIBRARY DbSelect "test@$ALT_MACHINE|$query"]

    return $result
}

set return_data [GetPPVSummary]
puts $return_data 
```

以上返回的是这样的：

> {{753 38 {2000-04-10 00:00:00} {2000-04-11 00:00:00} 3 HQAWR 56897 PPV B Event_04292012_teaser {} Event_04292012_teaser The_World_Doesnt_Care {$99.00} {$0.01}}

如何在 tcl 中一一打印值？

好的，所以我现在尝试了以下操作：

```
foreach record $return_data {
    set event_date [lindex $record 1]
    set attempts_cnt [lindex $record 2]
    set success_cnt [lindex $record 3]
    set fail_cnt [lindex $record 4]
}

puts $event_date 
```

现在，我得到整行而不是第一个或第二个值..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T00:09:45.013

假设 $return_data 是一个列表列表，你想要

```
foreach record $return_data {
    foreach item $record {
        puts $item
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T23:06:59.833

最有可能`mtlrequest`返回一个列表，所以如果通过“如何在 tcl 中只打印值？” 你想问“我如何从这个值中提取成员”，有几个可能的答案：

*   [`lindex`](http://www.tcl.tk/man/tcl8.5/TclCmd/lindex.htm)可用于通过其数字索引提取列表的成员，例如`set x [lindex $return_data 5]`将变量“x”设置为 value `HQAWR`。
*   [`lassign`](http://www.tcl.tk/man/tcl8.5/TclCmd/lassign.htm)(Tcl 8.5+) 可用于将列表值的元素分配给一组变量，例如`lassign $return_data a b c d ...`

请注意，这些`{`s 和`}`没有特殊含义 — 它们是 Tcl 将列表值转换为字符串的结果（您使用 要求它这样做`puts`）：请参阅[本](http://www.tcl.tk/man/tcl8.5/tutorial/Tcl4.html)[教程](http://www.tcl.tk/man/tcl8.5/tutorial/tcltutorial.html)的本部分和[本](http://www.tcl.tk/man/tcl8.5/tutorial/Tcl14.html)部分以获取解释。

强烈建议您自己完成整个教程，否则您将遇到每一个小问题。Tcl 比乍看起来要简单得多，所以花点时间掌握它的基础知识。

# django - Django 自定义 validate_unique 方法适用于在管理站点中保存新对象，但不适用于视图和模板（`self` 尚不存在）

> ID：10133003
> 
> 赞同：2
> 
> 时间：2012-04-12T22:53:25.337
> 
> 标签：django, validation, django-models, django-forms, django-admin

我有几个具有类似 validate_unique 覆盖的模型，如在[这个问题](https://stackoverflow.com/questions/8245430/django-conditional-unique-together)中。这是在models.py中：

```
class TeachingGroup(models.Model):
    cohort = models.ForeignKey(Cohort)
    name = models.CharField(max_length=26)
    slug = models.CharField(max_length=30, editable=False)

    class Meta:
        unique_together = ('cohort', 'name')

    def validate_unique(self, exclude = None):
        from django.core.exceptions import ValidationError, NON_FIELD_ERRORS
        slugfodder = u'%s %s' % (self.cohort.year_group.shortname, self.name)
        self.slug = slugify(slugfodder)
        options = dict(slug = self.slug, cohort__year_group__school = self.cohort.year_group.school)
        hits = TeachingGroup.objects.exclude(pk=self.pk).filter(**options)
        if hits.exists():
            template = """The name is used for database lookups,
                and '{0}' is too similar to '{1}', as both become
                '{2}' in your web browser's address bar."""
            message = template.format(self.name, hits[0].name, self.slug)
            raise ValidationError({NON_FIELD_ERRORS: [message]})
        super(TeachingGroup, self).validate_unique(exclude=exclude) 
```

我没有足够的声誉[在那里](https://stackoverflow.com/questions/8245430/django-conditional-unique-together)发表评论，但似乎通过`super`在末尾添加该行我并没有绕过模型的`Meta: unique_together`验证。

为简洁起见，我没有包含我的模型结构，但所有上述验证在管理站点中都可以正常工作，用于更改现有对象（当我将名称设置为足够相似以使 slug 相同时会显示错误）以及添加新对象。

在呈现的网页中，我在更改现有记录时按预期收到错误消息，但奇怪的是从表单添加新对象（没有实例）时没有。相反，我得到了一系列错误，最终导致：

```
File "models.py" in validate_unique
  125\.         slugfodder = u'%s %s' % (self.cohort.year_group.shortname, self.name)
File "/usr/local/lib/python2.6/dist-packages/django/db/models/fields/related.py" in __get__
  301\.                 raise self.field.rel.to.DoesNotExist 
```

在 pdb 中：

```
-> slugfodder = u'%s %s' % (self.cohort.year_group.shortname, self.name)
(Pdb) self
*** DoesNotExist: 
```

那么管理站点如何管理验证“自我”？我的验证需要做类似的事情`save(commit = False)`吗？

我当然可以添加更多细节，但我认为相关的是这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:30:01.680

好吧，这里没有功劳：我有一些愚蠢的视图函数，我知道它们不是很干，而且如前所述，结果是愚蠢的。

我迄今为止的标准views.py条目：

```
def edit_object(request, slug=None):
    try:
        obj = MyModel.objects.get(name=slug)
        if request.method == 'POST':
            if request.POST.get('delete'):
                obj.delete()
                return redirect(list_objects)
            form = MyModelForm(request.POST, request=request, instance=obj)
            if form.is_valid():
                form.save()
                return redirect(list_objects)
        else:
            form = MyModelForm(request=request, instance=obj)
    except MyModel.DoesNotExist:
        if request.method == 'POST':
            form = MyModelForm(request.POST, request=request)
            if form.is_valid():
                form.save()
                return redirect(list_objects)
        else:
            form = MyModelForm(request=request)
    return render_to_response('edit_objects.html', locals(), context_instance=RequestContext(request)) 
```

我的新观点.py

```
def edit_object(request, slug=None):
    if slug:
        options = dict(name = slug)
        obj = get_object_or_404(MyModel, **options)
    else:
        obj = MyModel()
    if request.method == 'POST':
        if request.POST.get('delete'):
            obj.delete()
            return redirect(list_objects)
        form = MyModelForm(request.POST, request=request, instance=obj)
        if form.is_valid():
            form.save()
            return redirect(list_objects)
    else:
        form = MyModelForm(instance=obj, request=request)
    return render_to_response('edit_objects.html', locals(), context_instance=RequestContext(request)) 
```

我仍然有一个问题，其中行：

```
obj = MyModel() 
```

使用 validate_unique 创建错误，但我越来越近了。我用过：

```
obj = Cohort(year_group = theschool.yeargroup_set.all()[:1].get()) 
```

这很丑陋，当没有这样的队列时会抛出异常。

# java - 如何在 Oracle 数据库中存储 Java 字节数组？

> ID：10133006
> 
> 赞同：5
> 
> 时间：2012-04-12T22:53:42.863
> 
> 标签：java, oracle, bytearray, byte

我有一个 AES 密码的密码密钥，我需要将它存储在 Oracle 数据库列中。密码在 Java 中生成为字节数组，因此我需要找出将其转换为 Oracle 理解的数据类型的最佳方法，反之亦然。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T22:58:37.177

假设 Java 中的字节数组的元素少于 4000 个，您可以将其存储`RAW`在 Oracle 中的列中。这告诉 Oracle 数据是二进制的，因此它永远不会尝试进行字符集转换。它是最少的开销（无论是在存储方面还是在处理数据的复杂性方面）。

如果字节数组可能包含超过 4000 个元素，则可以将其存储在`BLOB`列中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-12T22:59:32.863

使用 BLOB 列和 PreparedStatement：

```
CREATE TABLE pwd_table (id integer primary key, pwd blob); 
```

然后在您的 Java 代码中：

```
byte[] data = ... // obtain the byte array
PreparedStatement pstmt = connection.prepareStatement(
   "insert into pwd_table (id, pwd) values (?, ?)");
pstmt.setInt(1, 42);
pstmt.setBytes(2, data);
pstmt.executeUpdate();
connection.commit(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T22:56:30.510

定义理解。

如果您将密码密钥存储在数据库中，您可能需要重新考虑这一点。但是，您有几个直接的选择。

1.  将字节数组转换为 UU 编码的 ASCII 字符串，然后将其存储在 VARCHAR 字段中。
2.  将字节数组存储到 CLOB 或 BLOB 中。

# java - 如果在一个文件中使用多个类，如何重载构造函数

> ID：10133011
> 
> 赞同：0
> 
> 时间：2012-04-12T22:55:03.480
> 
> 标签：java

当我尝试编译它时，它说“找不到符号构造函数 Armor(int,int,int,java.lang.String)”。但是，当我将 Armor(blunt, pierce, cut, name) 更改为 Armor() 时，它工作得非常好。如果我在一个文件中使用多个类，我是否不允许重载构造函数（这里我在一个文件中有类抗性和 Armor 类）。我绝对有必要将它们放在同一个文件中，因为我正在为一个你不能提交超过 1 个文件的比赛练习这个。

```
public class resistance
{
    public static void main (String [] args)
    {
        int blunt=4;
        int pierce=2;
        int cut=7;
        String name="Helmet";
        Armor item = new Armor(blunt, pierce, cut, name);
    }
}

class Armor
{
int blunt;
int pierce;
int cut;
String name;

void Armor()
{
    blunt=0;
    pierce=0;
    cut=0;
    name="";
}

void Armor(int a, int b, int c, String d)
{
    blunt=a;
    pierce=b;
    cut=c;
    name=d;
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T22:56:34.000

`void Armor(...)`是一个与类同名的方法。
`Armor(...)`是一个构造函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T22:57:55.037

如果你想“重载”它，你必须明确定义这个构造函数：

```
public Armor(int a,int b,int c,String d){
} 
```

在你的盔甲课上。如果你声明一个带有返回类型的方法，比如`void`，那么它就不再是构造函数，而是一个方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T22:57:29.327

这些不是构造函数。它们有一个返回类型，所以它们是方法。摆脱`void`.

如果您使用的是 IDE，请注意它给您的警告。例如 eclipse 告诉你“这个方法有一个构造函数名称”，它可以立即帮助你意识到错误。

# php - 从 PHP 中的字符串替换此十六进制字符

> ID：10133015
> 
> 赞同：6
> 
> 时间：2012-04-12T22:55:41.417
> 
> 标签：php, character-encoding, replace, preg-replace, hex

我正在从来自数据库（和一些 JSON 提要）的数据生成 XML。

我遇到了一些包含一些破坏我的 XML 的十六进制字符的文本的问题。

例如，查看我从 Chrome 获得的错误截图： ![XML 错误](../Images/cc5ad191af966c692c8f415a5a690956.png)

我确定了给我带来问题的十六进制字符（我相信它们被称为控制字符）。这些是：

```
0x03
0x05
0x16
0x0E 
```

在将这些字符打印到我的 XML 输出之前，如何用 PHP 替换这些字符？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-12T22:59:53.790

不仅仅是那些角色会破坏它......

```
preg_replace('/[\x00-\x1f]/', '?', $s); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T23:24:39.670

您列出的字符确实是控制字符，都放在[C0 集中](http://en.wikipedia.org/wiki/C0_and_C1_control_codes)：

```
0x03 - ETX  End of Text
0x05 - ENQ  Enquiry
0x0E - SO   Shift Out
0x16 - SYN  Synchronous Idle 
```

您应该验证这些字符是如何进入字符串的。我真的不建议删除它们（如果您打算删除它们，请至少使用一个替换字符，不要只删除它们），但在这里要保守一些，因为它们不是无效的 unicode，只需将它们转换为数字实体（[这也已成功完成](https://stackoverflow.com/q/10095728/367456)）：

```
$pairs = array(
    "\x03" => "&#x03;",
    "\x05" => "&#x05;",
    "\x0E" => "&#x0E;",
    "\x16" => "&#x16;",
);
$xml = strtr($xml, $pairs); 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T23:21:41.673

如果输入承诺是某个字符集，您可能可以使用其中一个字符集编码函数来保留尽可能多的数据（没有令人讨厌的缺失字符；没有它们，文本看起来会很混乱！）。utf8_encode 可能会对您有所帮助，但前提是您知道文本是 ISO-8859-1。否则，假设你已经安装了 iconv，你可能会更幸运。

在我看来，iconv 的最佳之处在于，如果您要从 UTF 向下转换为功能较弱的字符集，则能够使用音译。但是，如果您要编码为 UTF-8，您可能想要这样的东西：

```
$resultText = iconv("ISO-8859-1", "UTF-8//IGNORE", $inputText ); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-12T23:00:34.757

```
preg_replace("/[[^0]\x03-[^0]\x05\-[^0]\x16-[^0]\x0E]/", '', $string); 
```

# c++ - 停止使用 libpcap 捕获数据并将其保存在文件中

> ID：10133017
> 
> 赞同：1
> 
> 时间：2012-04-12T22:56:07.060
> 
> 标签：c++, c, libpcap

我正在使用带有 c++ 的 libpcap。我想将捕获保存到文件中，我使用它：

```
 if ((pcount = pcap_loop (p, -1, &pcap_dump, (char *) pd)) < 0)
    {
      pcap_perror (p, prestr);
   } 
```

如何在需要时停止捕获并保存数据？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T09:25:13.023

您的问题分为两个部分：如何停止和如何保存。让我们依次处理。

1.  如何“停止”捕获

    简而言之：您不会“停止”捕获 - 您捕获的数量有限，并检查是否足够。

    [`pcap`文档](http://www.tcpdump.org/pcap.html)表明第二个参数是要捕获的数据包数。通过指定`-1`，您是在告诉系统捕获直到出错。

    如果您要检查其他一些条件（例如，由系统的其他部分设置的变量），可能`pcap_loop`带有参数 of`-1`是不合适的。`pcap`文档中的其他选项看起来更合适：

    *   `pcap_next`只会抓取下一个数据包，因此您可以在每个数据包之后检查，或者

    *   `pcap_dispatch`将处理一批数据包

    鉴于您正在尝试保存输出，`pcap_dispatch`这可能是更好的选择。所以像：

    ```
    while (something_tells_me_to_keep_going) {
        // process one buffer-full (error handling removed for brevity)
        pcap_dispatch(p, -1, &pcap_dump, (char*) pd);
        // possibly update something_tells_me_to_keep_going, based on time or whatever
    } 
    ```

2.  如何保存数据

    您已经指定了回调处理程序`pcap_dump`，该处理程序旨在将数据包数据转储到先前使用`pcap_dump_open`. 因此，在您致电`pcap_loop`（或`pcap_dispatch`）之前，您可能已经（或将需要）这样的东西：

    ```
     pcap_dumper_t *pd = pcap_dump_open(p, "my_save_file.pcap"); 
    ```

    ...您使用等创建`p`的`pcap_t*`流在哪里？`pcap_open_live`

    （请参阅libcap 作者的注释，阐明此功能的使用）[。](http://permalink.gmane.org/gmane.network.tcpdump.devel/3869)

    最后，完成后，使用以下命令关闭文件：

    ```
    pcap_dump_close(pd); 
    ```

参考：

*   [http://permalink.gmane.org/gmane.network.tcpdump.devel/3869](http://permalink.gmane.org/gmane.network.tcpdump.devel/3869)
*   [http://www.manpagez.com/man/3/pcap_dump_open/](http://www.manpagez.com/man/3/pcap_dump_open/)
*   [http://www.manpagez.com/man/3/pcap_loop/](http://www.manpagez.com/man/3/pcap_loop/)

# c++ - 将一维矩阵数组转换为一维主矩阵的有趣算法挑战，需要有效的解决方案

> ID：10133018
> 
> 赞同：2
> 
> 时间：2012-04-12T22:56:25.817
> 
> 标签：c++, algorithm

两个 typedef

```
std::vector<double> Matrix;
std::vector<Matrix> MatrixBlocks; 
```

Matrix 由一维向量表示，MatrixBlocks 表示矩阵的向量。

问题是，鉴于矩阵块包含来自具有特定排序的较大矩阵的子矩阵，我需要用矩阵块重建大矩阵。所以例如

假设大矩阵（存储为`std::vector<double>`）具有以下数据：

```
 1  2  3  4 
 5  6  7  8
 9  10 11 12
 13 14 15 16 
```

并且下面包含上述矩阵的子矩阵的 MatrixBlocks 具有以下数据：

索引 0：

```
1 2
5 6 
```

索引 1：

```
3 4 
7 8 
```

索引 2：

```
9 10 
13 14 
```

索引 3：

```
11 12 
15 16 
```

因此，鉴于 MatrixBlock 我需要重建 double 的原始向量；一维矩阵。有人有任何通用解决方案吗？

你可以假设如果大矩阵总是一个正方形大小的矩阵。

编辑：

对于 NxN 矩阵，它被分解为 K mxm 矩阵，其中 N 可被 m 整除，您可以假设 MatrixBlock 的排序如下：

索引 0：将包含从 [0,0] 到 (m,m) 的矩阵

索引 1：将包含从 [0,m] 到 (m, m + m) 的矩阵

索引 2：将包含从 [0,m+m] 到 (m, m + m + m) 的矩阵

...

直到最后一个索引包含从 [m*i - m,m*i - m] 到 [m,m] 的矩阵

例如，如果主矩阵是 512x512

```
1 2 3 4 ... 512
513 ...   1014
 ... 
```

261632(512*512-512) ... 262144(512*512)

我们想拆分 512x512 矩阵 int 256 32x32 块，32 由用户选择，然后 MatrixBlock 将包含类似

index 0: 1 2 3 ... 32 513 ... 513 + 32 //..直到前 32 行的列长度为 32

索引 1: 33 34 ... (33+32) (513+32+1) ... (513 + 32 + 1 + 32) //... 同上

所以你可以看到它从索引（0,0）开始，从（0,0）到（31,31）提取第一个32x32元素；那是索引0。然后对于索引1，起始位置是（0,32），它从矩形（0,32），（0,63），（31,32），（31,63）中提取数据

希望这很清楚。因此，对于上面的 4x4 矩阵观察到的模式基本相同，对于任何矩阵大小都将是相同的模式，唯一的区别是主矩阵的大小并不总是 4x4，我们将其分割成的块大小也不总是 2x2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T23:58:39.203

这基本上归结为正确索引。

```
#include <cmath>
#include <iostream>
#include <vector>

int main()
{
  std::vector<double> v(16);
  std::vector<std::vector<double> > m;
  std::vector<double> m1 {1,2,5,6};
  m.push_back(m1);
  std::vector<double> m2 {3,4,7,8};
  m.push_back(m2);
  std::vector<double> m3 {9,10,13,14};
  m.push_back(m3);
  std::vector<double> m4 {11,12,15,16};
  m.push_back(m4);

  size_t idx = 0;
  for (size_t big_row = 0; big_row < std::sqrt(m.size()); ++big_row)
  for (size_t small_row = 0; small_row < std::sqrt(m1.size()); ++small_row)
  for (size_t big_col = 0; big_col < std::sqrt(m.size()); ++big_col)
  for (size_t small_col = 0; small_col < std::sqrt(m1.size()); ++small_col)
  {
    v[idx] = m[big_col + std::sqrt(m.size()) * big_row][small_col + std::sqrt(m1.size()) * small_row];
    ++idx;
  }

  for (unsigned i = 0; i < 16; ++i)
    std::cout << v[i] << std::endl;
} 
```

输出：

```
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T01:56:52.783

假设原矩阵为大NxN，每个子矩阵为nxn。那么边的子矩阵的数量是（N / n）；让我们称之为k。

我们可以将大矩阵想象成一个长的、n*k*n*k 长度的列表。

我们可以将大矩阵索引映射到子矩阵编号和索引，反之亦然。前向映射看起来非常复杂，我只是先写出我想要的子矩阵索引作为一个系列，然后编写一个函数来生成该系列（以及时间测试的试错法，当然）。

一些演示第一种方法的代码（请原谅灰尘）：

```
#include <iostream>
#include <vector>

int main() {
  // Initialize the Vector and Set up the Matrices
  std::vector<double> v(36);
  std::vector<std::vector<double> > m;
  std::vector<double> m1 {1,2,7,8};
  m.push_back(m1);
  std::vector<double> m2 {3,4,9,10};
  m.push_back(m2);
  std::vector<double> m3 {5,6,11,12};
  m.push_back(m3);
  std::vector<double> m4 {13,14,19,20};
  m.push_back(m4);
  std::vector<double> m5 {15,16,21,22};
  m.push_back(m5);
  std::vector<double> m6 {17,18,23,24};
  m.push_back(m6);
  std::vector<double> m7 {25,26,31,32};
  m.push_back(m7);
  std::vector<double> m8 {27,28,33,34};
  m.push_back(m8);
  std::vector<double> m9 {29,30,35,36};
  m.push_back(m9);

  // These variables (see explanation above) take on these values for this example
  unsigned N = 6;
  unsigned n = 2;
  unsigned k = N/n;

  // Constructing the Big Matrix    
  for (unsigned i = 0; i < N*N; ++i) {
    int a = (i / (n * k * n)) * k + ((i / n) % k);
    int b = (i % (n * k * n)) % n + ((i % (n * k * n)) / (n * k) * n);
    v[i] = m[a][b];
    std::cout << a << "\t" << b << "\t" << v[i] << std::endl;
  }
} 
```

我们还可以通过遍历子矩阵列表并将每个索引映射回大矩阵来使用反向映射。我还没有编码，但你明白了。

无论哪种方式，算法在所有情况下都应该花费 O(N^2) 时间（N 是大矩阵的一侧）。如果你让 N 是矩阵的大小，那么它就是线性时间。

这对您的应用程序是否足够有效？

# python - 具有非唯一数据的 Pandas 数组中的多索引

> ID：10133021
> 
> 赞同：4
> 
> 时间：2012-04-12T22:56:34.190
> 
> 标签：python, pandas

我有以下数据框

```
In[45]: data[:10]  
Out[45]:
   Z    A    beta2    M      shell
0  100  200  0.3112   197.2 -4.213
1  100  200 -0.4197   202   -1.143
2  100  200  0.03205  203    0    
3  100  201  0.2967   191   -4.434
4  100  201 -0.4893   196.1 -4.691
5  100  202  0.3084   183.4 -4.134
6  100  202 -0.4873   188.2 -4.75 
7  100  202 -0.2483   188.4 -1.106
8  100  203  0.3069   177.1 -4.355
9  101  203 -0.4956   182.5 -5.217 
```

我的问题是，考虑到数据不是唯一的，我如何以将（Z，A）作为索引（或 MultiIndexes）的 MultiIndex 的方式对数据进行分组/转换？为了明确我的目标，这是我期望实现的：

```
 beta2[1] beta2[2]  beta2[3]   M[1]   M[2]   M[3]   shell[1]   shell[2]  shell[3]
   Z    A 
0  100  200  0.3112   -0.4197   0.03205    197.2  202    203    -4.213     -1.143    0
1  100  201  0.2967   0.4893    NaN        191    196.1  NaN    -4.434     -4.691    NaN
2  100  202  0.3084   -0.4873   NaN        183.4  188.2  NaN    -4.134     -4.75     NaN
3  100  203  0.3069   NaN       NaN        177.1  NaN    NaN    -4.355     NaN       NaN 
4  101  203  -0.4956  NaN       NaN        182.5  NaN    NaN    -5.217     NaN       NaN 
```

我知道这至少涉及两个步骤，一个用于唯一性，一个用于 Z,A 中的索引，因此对其中一个步骤的任何帮助表示赞赏，此外，是否有一些数据结构可能更适合这个问题？

编辑：我发现该行：

> data=data.set_index(('Z','A'))

解决了 Z,A 中的索引问题。不幸的是，这只适用于 (Z,A) 对是唯一的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T22:40:25.460

我有一个未解决的问题来解决这些问题：

[https://github.com/pydata/pandas/issues/388](https://github.com/pydata/pandas/issues/388)

这是一个解决方案。首先是一个简单（但不是很有效）的函数来获取组序数：

```
def group_position(*args):
    """
    Get group position
    """
    from collections import defaultdict
    table = defaultdict(int)

    result = []
    for tup in zip(*args):
        result.append(table[tup])
        table[tup] += 1

    return np.array(result) 
```

IE

```
In [49]: group_position(df['Z'], df['A'])
Out[49]: array([0, 1, 2, 0, 1, 0, 1, 2, 0, 0]) 
```

现在将其用作辅助索引变量并取消堆栈：

```
In [52]: df
Out[52]: 
     Z    A    beta2      M  shell
0  100  200  0.31120  197.2 -4.213
1  100  200 -0.41970  202.0 -1.143
2  100  200  0.03205  203.0  0.000
3  100  201  0.29670  191.0 -4.434
4  100  201 -0.48930  196.1 -4.691
5  100  202  0.30840  183.4 -4.134
6  100  202 -0.48730  188.2 -4.750
7  100  202 -0.24830  188.4 -1.106
8  100  203  0.30690  177.1 -4.355
9  101  203 -0.49560  182.5 -5.217

In [53]: df['pos'] = group_position(df['Z'], df['A'])

In [54]: df.set_index(['Z', 'A', 'pos']).unstack('pos')
Out[54]: 
          beta2                       M                shell              
pos           0       1        2      0      1      2      0      1      2
Z   A                                                                     
100 200  0.3112 -0.4197  0.03205  197.2  202.0  203.0 -4.213 -1.143  0.000
    201  0.2967 -0.4893      NaN  191.0  196.1    NaN -4.434 -4.691    NaN
    202  0.3084 -0.4873 -0.24830  183.4  188.2  188.4 -4.134 -4.750 -1.106
    203  0.3069     NaN      NaN  177.1    NaN    NaN -4.355    NaN    NaN
101 203 -0.4956     NaN      NaN  182.5    NaN    NaN -5.217    NaN    NaN 
```

最终得到它就像你展示的那样：

```
In [61]: result = df.set_index(['Z', 'A', 'pos']).unstack('pos')

In [62]: result.rename(columns=lambda x: '%s[%d]' % (x[0], x[1]+1)).reset_index()
Out[62]: 
     Z    A  beta2[1]  beta2[2]  beta2[3]   M[1]   M[2]   M[3]  shell[1]  shell[2]  shell[3]
0  100  200    0.3112   -0.4197   0.03205  197.2  202.0  203.0    -4.213    -1.143     0.000
1  100  201    0.2967   -0.4893       NaN  191.0  196.1    NaN    -4.434    -4.691       NaN
2  100  202    0.3084   -0.4873  -0.24830  183.4  188.2  188.4    -4.134    -4.750    -1.106
3  100  203    0.3069       NaN       NaN  177.1    NaN    NaN    -4.355       NaN       NaN
4  101  203   -0.4956       NaN       NaN  182.5    NaN    NaN    -5.217       NaN       NaN 
```

# javascript - 一次提交多个表单提交

> ID：10133022
> 
> 赞同：0
> 
> 时间：2012-04-12T22:56:43.073
> 
> 标签：javascript, jquery, forms, html

我一直在努力思考这个问题，并弄清楚它是否可能。我正在使用 zen-cart 作为购物车软件，但我想做的是硬编码一个基本上是 7-9 个产品列表的页面，每个产品旁边是一个复选框，所以我想要找出一种方法，通过 html、javascript 或 jquery 将检查到的任何表单（产品）提交到购物车。一个产品的典型表单提交看起来像这样（有时可能有一个或两个额外的隐藏字段）：

```
<form name="cart_quantity" action="index.php?action=add_product" method="post"      enctype="multipart/form-data">
    <input type="hidden" name="cart_quantity" value="1">
    <input type="hidden" name="products_id" value="7">
    <input type="hidden" name="id[6]" value="9" id="attrib-6-9"> 
    <input type="image" src="buy_button.png" alt="Add to Cart" title="Instructional Video Part 1: Add to Cart">
</form> 
```

页面上会有 7-9 个，每个都有一个复选框，所以我假设一个脚本需要找出哪些被选中并通过表单操作提交它们？也许有一个更好的方法来解决这个问题，我没有想到，因为a）它在我的头上或b）只是还没有弄清楚。无论如何，这样的事情可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:53:33.170

为每个表单添加某种复选框，并带有一个类：

```
<form name="cart_quantity" action="index.php?action=add_product" method="post"      enctype="multipart/form-data">
    <input type="checkbox" class="IsCheck" />
    <input type="hidden" name="cart_quantity" value="1">
    <input type="hidden" name="products_id" value="7">
    <input type="hidden" name="id[6]" value="9" id="attrib-6-9"> 
    <input type="image" src="buy_button.png" alt="Add to Cart" title="Instructional Video Part 1: Add to Cart">
</form> 
```

在所有表单下方添加一个按钮，根本不必在表单内：

```
<input type="button" value="Submit Selected" id="submit_btn" /> 
```

jQuery：

```
$('#submit_btn').on('click', function() {
    $('.IsCheck').is(':checked').each(function() { 
        $(this.form).submit(); 
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T23:33:54.937

你可以这样做，因为这

```
$("#yourcommonbuton").click(function() {
    if($("#checkbox1").prop('checked') == true) $("#form1").submit();
    if($("#checkbox2").prop('checked') == true) $("#form2").submit();
    if($("#checkbox3").prop('checked') == true) $("#form3").submit();
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T23:05:12.517

为什么不让它们都以相同的形式出现？是否有任何具体原因为每个人提供单独的表格？

将它们全部放在同一个表单中，并在提交页面（逻辑所在的位置）上为所有复选框运行一个循环，并且仅选中那些复选框，将它们添加到购物车中

复选框可以将值作为相应的产品 ID....

或类似 html 页面中的内容

```
Product1 <input typ='checkbox' name='checkbox[1]'>
Product2 <input typ='checkbox' name='checkbox[2]'>
Product3 <input typ='checkbox' name='checkbox[3]'> 
```

在逻辑页面

```
foreach($_POST[checkbox] as $k=>$v){
    if($v=='checked')
         //add to cart  like $_POST[product[$k]]  $_POST[amount[$k]] if there are such elements on the html page
} 
```

# javascript - 在 Mobile Safari / Android 浏览器中使用 -webkit-transform 进行奇怪的 SVG 缩放

> ID：10133023
> 
> 赞同：1
> 
> 时间：2012-04-12T22:56:48.563
> 
> 标签：javascript, ios, html, mobile, webkit

我正在尝试缩放一个嵌入的 SVG，它包含在一个宽度为 100px 的 div 中，并且这个 SVG 是通过`-webkit-transform: scale(2)`在该 div 上应用来缩放的。在桌面上，在 Chrome 和 Safari 中，SVG 被正确地缩放到其原始大小的两倍（即 200 像素）。但是，在 iPad（Mobile Safari）和 Android 默认浏览器上，SVG 被错误地缩放到其原始大小的四倍（即 400 像素）。

类似地，使用 scale(0.5)，桌面浏览器可以正确地将 SVG 缩放到其原始大小的一半（即 50 像素），但上述移动浏览器会将 SVG 缩放到其原始大小的四分之一（即 25 像素）。

我试过设置视口（通过`<meta name="viewport" content="...">`），但它没有纠正这种行为。同样，SVG 的`viewbox`属性设置正确，不会影响它。

然而，特别值得注意的是，通过 、 和 标签嵌入 SVG 会`<embed src=>`导致`<iframe src=>`在`<object data=>`移动设备上出现这种不需要的行为，但`<img src=>`在移动设备上可以完美缩放——但是，`<img src=>`它会带来一系列问题，所以我想避免那。

有没有人经历过这样的事情？这是一个奇怪且可能是小众的问题，但我认为那里的某个人一定曾经遇到过这个问题。

# ios - 从标签栏控制器中的委托创建 UIImageView

> ID：10133024
> 
> 赞同：0
> 
> 时间：2012-04-12T22:56:51.693
> 
> 标签：ios, object, delegates, uitabbarcontroller

在我的项目中，我想直接从 AppDelegate.m 动态创建 UIImageView 到我拥有的所有 4 个选项卡栏视图。

有没有办法做到这一点？我对此一无所知……目标是使“可达性”Apple 示例与我的 Tab Bar Controller 一起工作（而不是 Apple 示例中的简单视图）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:08:31.780

常规 TabBarController 的 API 不支持使用图像定义单个项目，正如我想你想做的那样。您将“必须”做的是创建您自己的支持此功能的 TabBarController 版本。我写“必须”是因为幸运的是，这当然是很常见的，因此以前已经做过。

最近 Jin Budelmann 发布了他的版本，我已经在一个项目中使用过，它绝对出色且易于使用。

在这里查看： [https](https://github.com/jinthagerman/JBTabBarController) ://github.com/jinthagerman/JBTabBarController （固定网址）

希望这可以帮助你:)

# node.js - 使用 node-solr 进行分面搜索

> ID：10133025
> 
> 赞同：5
> 
> 时间：2012-04-12T22:57:08.940
> 
> 标签：node.js, solr

我正在尝试确认是否可以通过 node-solr 进行分面搜索。有没有人在 nodejs 中使用过 Solr 功能，如果有，您能否指出显示该功能的在线资源/共享示例代码。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-08T06:47:01.900

即使我在他们的官方文档中找不到它——这对我有用。

```
var client = sails.solr;
var query = client.createQuery().q({
  'city_id': options.city_id,
  'content_auto': options.term,
})
.fl('sku')
.start(0)
.rows(2000)
.facet({'field':'brand'})
.facet({'field':'price'})
.facet({'field':'discount_percentage'})
.facet({'field':'pack_size'})
.facet({'field':'categories'})
var defer = sails.Q.defer();
client.search(query, function(err, obj){
    if(err) {
        console.log('Error getting data from solr. Error: ' + err);
        return defer.reject(err);
    }
    return defer.resolve(obj);
});
return defer.promise; 
```

显然-通过良好的反复试验偶然发现它！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-07T21:59:13.103

是的，node.js 根本没有太多关于此的文档。您可以找到大量使用 java、python 或 php 的 solr 示例和教程，但在节点/端到端 js 培训上的博主们似乎很安静。我推荐[solr-client](https://github.com/lbdremy/solr-node-client)。也按照自述文件上的链接，这个家伙有大约十几个简单的使用示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T10:53:10.777

你见过 solr-node-client:[solr-node-client][1] 吗？

# c# - 我怎样才能在 ErrorProvider 组件上放一个枪口？

> ID：10133028
> 
> 赞同：1
> 
> 时间：2012-04-12T22:57:51.760
> 
> 标签：c#, winforms, errorprovider

我正在尝试使用 ErrorProvider 组件。

我在表格上有一个关闭按钮，当然它在表格的东北角也有“X”关闭的东西。

但是，一旦“引发”错误，单击“关闭”按钮或“关闭”框（或称为 doohicky 的任何内容）将无响应/不起作用。

当表单上有错误时，我必须怎么做才能让用户关闭表单？

更新：

这是我现在在“关闭”按钮的 OnClick() 处理程序中尝试的代码 - 它仍然拒绝关闭：

```
private void buttonCancel_Click(object sender, EventArgs e) {
  formValidation.SetError(this, String.Empty);
  Close();
} 
```

再次更新：只是为了做鬼脸，我尝试在“关闭”按钮上将“DialogResult”属性从 Canceled 更改为 None，但这并没有帮助（没想到它会 - 抓住稻草）

也没有将按钮的“原因验证”属性从 True 更改为 False ......

再次更新：

以下是所有可能适合发布或不适合发布的相关内容：

```
 . . .
              const int MINIMUM_PASSWORD_LENGTH = 5;

        private string originalPassword {
            get { return textCurrentPassword.Text; }
        }

        private string newCandidatePassword1 {
            get { return textNewPassword.Text; }
        }

        private string newCandidatePassword2 {
            get { return textNewPasswordRepeated.Text; }
        }

        public ChangePassword() {
            InitializeComponent();
        }

        private void textCurrentPassword_Validating(object sender, CancelEventArgs e) {
            string error = null;

            if (originalPassword.Equals(String.Empty)) {
                error = currentPasswordInvalid;
                e.Cancel = true;
                //textCurrentPassword.Focus(); probably unnecessary because of .SetError() below
            };

            // TODO: Replace 1==2 with call that compares password with the current user's confirmed password
            if (1 == 2) {
                error = currentPasswordDoesNotMatchCurrentUser;
                e.Cancel = true;
            }

            formValidation.SetError((Control)sender, error);
            if (null != error) {
                ;
            }
        }

        private void textNewPassword_Validating(object sender, CancelEventArgs e) {
            string error = null;

            if (newCandidatePassword1.Length < 5) {
                error = newPasswordInvalid;
                e.Cancel = true;
            }

            formValidation.SetError((Control)sender, error);
            if (null != error) {
                ;
            }
        }

        private void textNewPasswordRepeated_Validating(object sender, CancelEventArgs e) {
            string error = null;

            // Long enough?
            if (newCandidatePassword2.Length < MINIMUM_PASSWORD_LENGTH) {
                error = newPasswordInvalid;
                e.Cancel = true;
            }

            // New passwords match?
            if (!newCandidatePassword2.Equals(newCandidatePassword1)) {
                error = newPasswordsDoNotMatch;
                e.Cancel = true;
            }

            // They match, but all three match (undesirable)
            if (!originalPassword.Equals(newCandidatePassword1)) {
                error = newPasswordSameAsOld;
                e.Cancel = true;
            }

            // Unique across the user base?
            // TODO: Replace 1==2 with call that verifies this password is unique 
            if (1 == 2) {
                error = newPasswordNotUnique;
                e.Cancel = true;
            }

            formValidation.SetError((Control)sender, error);
            if (null != error) {
                ;
            }
        }

        private void buttonCancel_Click(object sender, EventArgs e) {
            foreach (Control ctrl in this.Controls) { 
                formValidation.SetError(ctrl, string.Empty); 
            } 
            Close(); 
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T23:05:23.593

您可以尝试在关闭按钮处理程序中清除 SetError：

```
private void buttonCancel_Click(object sender, EventArgs e)
{
    foreach (Control ctrl in this.Controls)
    {
        formValidation.SetError(ctrl, string.Empty);
    }
    Close();
} 
```

还要仔细检查您的 buttonCancel 是否确实连接到此处理程序。放置一个断点并确保您至少进入了这个函数。

# java - 共享 GAE 数据存储，Go <-> Java，regexp.FindStringIndex 索引移位（字节索引与 utf-8-char-index）

> ID：10133044
> 
> 赞同：2
> 
> 时间：2012-04-12T22:59:36.077
> 
> 标签：java, google-app-engine, utf-8, character-encoding, go

***短版：*** 这会打印 3，这是有道理的，因为在 Go 中字符串基本上是一个字节切片，并且需要三个字节来表示这个字符。我怎样才能让 len 和 regexp 函数根据字符而不是字节来工作。

```
package main
import "fmt"
func main() {
    fmt.Println(len("ウ"))//returns 3
    fmt.Println(utf8.RuneCountInString("ウ"))//returns 1
} 
```

***背景：***

我正在使用 JDO (Java) 将文本保存到 GAE 数据存储中。

然后我使用 Go 处理文本，特别是我使用 regexp.FindStringIndex 并将索引保​​存到数据存储区。

然后回到 Java 领域，我发送未修改的文本，并通过 json 将索引发送到 GWT 客户端。

在某个地方，索引正在“移动”，所以当它在客户端上时，它们已经关闭。

似乎问题与字符编码有关，我假设 Java/Go 以不同的方式解释文本（索引） utf-8 char/byte?。我在 regexp 包中看到了对符文的引用。

我想我可以让 regexp.FindStringIndex 在 go 中返回字节索引，或者让 GWT 客户端理解 utf-8 索引。

有什么建议么？我应该使用 UTF-8 以防将来需要将应用程序国际化，对吗？

谢谢

编辑：

此外，当我在服务器上使用 Java 查找索引时，一切正常。

在客户端（GWT）上，我正在使用 text.substring(start,end)

测试：

```
package main

import "regexp"
import "fmt"

func main() {
    fmt.Print(regexp.MustCompile(`a`).FindStringIndex("ウィキa")[1])
} 
```

代码输出 10，而不是 4。

**计划是让 FindStringIndex 返回 4，有什么想法吗？**

***更新 2：位置转换***

```
func main() {
    s:="ab日aba本語ba";
    byteIndex:=regexp.MustCompile(`a`).FindAllStringIndex(s,-1)
    fmt.Println(byteIndex)//[[0 1] [5 6] [7 8] [15 16]]

    offset :=0
    posMap := make([]int,len(s))//maps byte-positions to char-positions
    for pos, char := range s {
        fmt.Printf("character %c starts at byte position %d, has an offset of %d, and a char position of %d.\n", char, pos,offset,pos-offset)
        posMap[pos]=offset
        offset += utf8.RuneLen(char)-1
    }
    fmt.Println("posMap =",posMap)
    for pos ,value:= range byteIndex{
        fmt.Printf("pos:%d value:%d subtract %d\n",pos,value,posMap[value[0]])
        value[1]-=posMap[value[0]]
        value[0]-=posMap[value[0]]
    }
    fmt.Println(byteIndex)//[[0 1] [3 4] [5 6] [9 10]]

} 
```

*** 更新 2 ***

```
 lastPos:=-1
    for pos, char := range s {
        offset +=pos-lastPos-1
        fmt.Printf("character %c starts at byte position %d, has an offset of %d, and a char position of %d.\n", char, pos,offset,pos-offset)
        posMap[pos]=offset
        lastPos=pos
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T01:14:30.407

正如您可能已经收集到的，Go 和 Java 对待字符串的方式不同。在 Java 中，字符串是一系列代码点（字符）；在 Go 中，字符串是一系列字节。Go 中的文本操作函数在必要时理解 UTF-8 代码点，但由于字符串表示为字节，因此它们返回和使用的索引是字节索引，而不是字符索引。

正如您在评论中观察到的，您可以使用`RuneReader`and`FindReaderIndex`来获取字符而不是字节的索引。[strings.Reader](http://golang.org/pkg/strings/#Reader)提供了 的实现`RuneReader`，因此您可以使用`strings.NewReader`将字符串包装在`RuneReader`.

另一种选择是获取您想要 in 字符长度的子字符串并将其传递给[utf8.RuneLen](http://golang.org/pkg/unicode/utf8/#RuneLen)，它返回 UTF-8 字符串中的字符数。但是，使用 a`RuneReader`可能更有效。

# javascript - 如何将 html 文件加载到 XPages 中的 Dojo 对话框中

> ID：10133047
> 
> 赞同：3
> 
> 时间：2012-04-12T22:59:46.737
> 
> 标签：javascript, dojo, xpages

我目前正在使用 ExtLib 的 autoLoad 函数与 Ext.Window 和 Ext.tabPanel 结合将网页打开到弹出对话框中。如何在 XPages 中使用 dojo 实现这一点？

这是我想要实现的目标：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" xmlns:xe="http://www.ibm.com/xsp/coreex">
    <xp:button value="Label" id="button1">
        <xp:eventHandler event="onclick" submit="true"
            refreshMode="partial" refreshId="dialog1" execMode="partial">
            <xp:this.action><![CDATA[#{javascript:getComponent("dialog1").show();}]]></xp:this.action>
        </xp:eventHandler>
    </xp:button>
    <xe:dialog id="dialog1" href="http://www.google.com" style="width: 400px; height: 400px;">
    </xe:dialog>
</xp:view> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T23:54:02.297

Dojo 对话框有一个 href 属性，您将其设置为要加载的页面的 url。该[文档在标题“](http://dojotoolkit.org/reference-guide/1.7/dijit/Dialog.html)[使用 HREF 属性的外部对话内容](http://dojotoolkit.org/reference-guide/1.7/dijit/Dialog.html#external-dialog-content-using-href-attribute)”下解释了这一点。

前[3 个点击](https://www.google.com/search?sourceid=chrome&ie=UTF-8&q=Dojo+dialog)链接到您需要的所有内容。

# c# - Lambda 表达式和连接

> ID：10133051
> 
> 赞同：0
> 
> 时间：2012-04-12T23:00:33.363
> 
> 标签：c#, linq

我正在使用以下 linq 表达式来过滤列表：

```
var query =
   follows
      .Where(i => i.EUser.EProviders != null)
      .Join(
         ids,
         i => i.EUser.EProviders.Where(j => j.ProviderType == EProvider.EnumProviderType.Facebook).First().Ip,
         j => j.Ip,
         (i, j) => i); 
```

查询正在运行，但我在 First() 关键字中遇到问题，因为当我需要比较任何类型的 facebook 提供程序时，我只比较第一个元素。我试图让所有关注者至少有一个 facebook 类型的提供者，并且提供者 ID 包含在 ID 中。

我认为这是可行的，但我对查询不满意。在我看来不对。

```
follows
.Where(i => i.EUser.EProviders != null)
.Where(i => i.EUser.EProviders.Where(j => j.ProviderType == EProvider.EnumProviderType.Facebook && ids.Select(k => k.Ip).Contains(j.Ip)).Count() > 0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:07:46.127

不清楚你想要什么，但你可能想使用......

```
follows.SelectMany(f=>f.EUser.EProviders.Where(j => j.ProviderType == EProvider.EnumProviderType.Facebook)) 
```

或类似的东西。

如果您不想只使用“First”，那么您使用了错误的运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:42:45.390

也不是很清楚，但似乎您希望在给定的 ip 列表中包含特定提供商类型的关注者列表。

```
var ids = ids.Select(m => m.Ip).ToList();

var query = follows.Where(i => i.EUser.EProviders.Any(m => m.ProviderType ==EProvider.EnumProviderType.Facebook && ids.Contains(m.Ip))); 
```

# java - 使用 insertSort 进行快速排序修改

> ID：10133053
> 
> 赞同：0
> 
> 时间：2012-04-12T23:00:37.503
> 
> 标签：java, quicksort

所以我不得不使用枢轴作为数组的中间元素来制作一个快速排序算法。我做得很好。但现在它要求我修改快速排序算法，以便当任何子列表减少到小于 20 时，我使用插入排序对子列表进行排序。

我似乎已经让它工作了。它完美地编译和排序数组，但是我不确定我是否做得对，因为修改后的快速排序和普通快速排序之间的 CPU 时间差异并没有那么不同。我的不确定性在于递归方法 recQuickSortC 我有 ">= 20" 语句。我不确定这是否是实施修改的正确方法，它可能是完全错误的，我所知道的是它正确排序。任何帮助都会很好，谢谢。

这是我修改后的快速排序算法：

```
public void quickSortC(T[] list, int length)
{
    recQuickSortC(list, 0, length - 1);
}//end quickSort

private void recQuickSortC(T[] list, int first, int last)
{
  if (first < last)
  {
      int pivotLocation = partitionA(list, first, last);
      if ((pivotLocation - 1) >= 20)
          recQuickSortC(list, first, pivotLocation - 1);
      else
          insertionSort(list,pivotLocation -1);

      if ((pivotLocation - 1) >= 20)
          recQuickSortC(list, pivotLocation + 1, last);
      else
          insertionSort(list, pivotLocation + 1);
  }
}//end recQuickSort

private int partitionA(T[] list, int first, int last)
{
    T pivot;

    int smallIndex;

    swap(list, first, (first + last) / 2);

    pivot = list[first];
    smallIndex = first;

    for (int index = first + 1; index <= last; index++)
    {
        if (list[index].compareTo(pivot) < 0)
        {
            smallIndex++;
            swap(list, smallIndex, index);
        }
    }

    swap(list, first, smallIndex);

    return smallIndex;
}//end partition

    public void insertionSort(T[] list, int length)
{
    for (int unsortedIndex = 1; unsortedIndex < length;
                                unsortedIndex++)
    {
        Comparable<T> compElem =
                  (Comparable<T>) list[unsortedIndex];

        if (compElem.compareTo(list[unsortedIndex - 1]) < 0)
        {
            T temp = list[unsortedIndex];

            int location = unsortedIndex;

            do
            {
                list[location] = list[location - 1];
                location--;
            }
            while (location > 0 &&
                   temp.compareTo(list[location - 1]) < 0);

            list[location] = (T) temp;
        }
    }
}//end insertionSort 
```

如果您注意到方法旁边有一堆 A、B 和 C，因为我必须做很多不同的快速排序算法。我输入了算法中使用的所有代码。让我知道你是否需要更多谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T23:03:12.590

这对我来说看起来非常好，尽管我不会测试枢轴距离是否最多为 20，而是将快速排序方法重写为`if (last - first <= 20) { do insertion sort} else { do normal quicksort}`. 这样，您只需编写一次检查，而不是为递归的每个“边”编写一次。

也就是说，您的基准测试很可能实际上并没有为您提供良好的时间估计——也就是说，您的代码实际上可能比您想象的要快——只是因为在 Java 中获得准确的基准测试并不是微不足道或显而易见的。

# javascript - 使用 d3 在图表中有两个刻度

> ID：10133058
> 
> 赞同：1
> 
> 时间：2012-04-12T23:01:43.530
> 
> 标签：javascript, d3.js

我正在使用 d3 创建一个图表，在 y 轴上有两个刻度，一个向左，另一个向图表右侧。

在左侧 Y 轴上，我试图绘制收入与日期，在右侧我试图绘制点击次数与日期。

收入的最大值是 1800 美元，点击次数是 4000。蓝线是收入线，橙色线是点击次数。

有人可以帮助我如何让橙色线适合同一个 y 域吗？

我用于收入的代码是：

```
var y = d3.scale.linear()
    .domain([min_y_value, max_y_value])
    .range([height - margin, margin]);

var x = d3.time.scale()
    .domain([start_date, end_date])
    .range([0 + margin, width - margin]);

var color = d3.scale.category10().range();

var vis = d3.select("#chart")
    .append("svg:svg")
    .attr("width", width)
    .attr("height", height);

var g = vis.append("svg:g")
    .attr("transform", "translate("+margin+",0)");

var line = d3.svg.line()
    .x(function(d,i) {
        return x(get_date(d.date));
    })
    .y(function(d) {
        return y(d[trend]);
    });

for(var i = 0; i < report.length; i++) {
    g.append("svg:path")
        .attr("d", line(report[i]))
        .attr("fill", "none")
        .attr("stroke", color[i % 10])
        .attr("id", "line-"+report[i][0]['offer_name'])
        .attr("stroke-width", 2);
} 
```

我用于点击的代码是

```
var trend1 = 'clicks';
var max_y1_value = max_min['max_'+trend1];
var min_y1_value = max_min['min_'+trend1];
var y1_range = max_y1_value - min_y1_value;
var y1_interval_value = Math.floor(y1_range/yticks);

max_y1_value = max_y_value + y_interval_value;
min_y1_value = (min_y_value - y_interval_value > 0)?(min_y_value - y_interval_value) : 0;

var y1 = d3.scale.linear().domain([min_y1_value, max_y1_value]).range([height - margin, margin]);
var x1 = d3.time.scale().domain([start_date, end_date]).range([0 + margin, width - margin]);
console.log('max_y_value : '+max_y_value+'  min_y_value : '+min_y_value+'    max_y1_value : '+max_y1_value+'  min_y1_value : '+min_y1_value+'   trend1: '+trend1);
var line1 = d3.svg.line()
    .x(function(d,i) {
        return x1(get_date(d.date));
    })
    .y(function(d) {
        console.log(d[trend1]+'    '+y1(d[trend1]));
        return y1(d[trend1]);
    });

for(var i = 0; i < report.length; i++) {
    g.append("svg:path")
        .attr("d", line1(report[i]))
        .attr("fill", "none")
        .attr("stroke", color[i + report.length % 10])
        .attr("id", "line1-"+report[i][0]['offer_name'])
        .attr("stroke-width", 2);
} 
```

[图表图像](http://tinypic.com/r/fa3cp5/5)

**有人可以帮助我如何让橙色线适合同一个 y 域吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T02:40:49.323

看起来您正在用其他系列的值覆盖您的`max_y1_value`和。`min_y1_value`例如，您首先定义`max_y1_value`：

```
var max_y1_value = max_min['max_'+trend1]; 
```

然后你用另一个值替换：

```
max_y1_value = max_y_value + y_interval_value; 
```

我建议使用[d3.extent](https://github.com/mbostock/d3/wiki/Arrays#wiki-d3_extent)从数据中计算域。

# ios - 导航上的自定义按钮

> ID：10133059
> 
> 赞同：0
> 
> 时间：2012-04-12T23:01:49.630
> 
> 标签：ios, rightbarbuttonitem, navigationitem

我在 rightBarBuuttonItem 创建了一个自定义按钮作为 NavigationItem。它工作得很好，但是当我在按钮外部单击时，例如按钮向下一点，它仍然有效。这是我的代码

```
fetchButton = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 30, 30)];
[fetchButton setImage:[UIImage imageNamed:@"quanse.png"] forState:UIControlStateNormal];
[fetchButton addTarget:self action:@selector(searchDataByColor) forControlEvents:UIControlEventTouchUpInside];
self.navigationItem.rightBarButtonItem =[[UIBarButtonItem alloc] initWithCustomView:fetchButton]; 
```

谁能告诉我，我能做些什么来修复这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T00:08:50.667

您所描述的实际上是 UIButton 的正常行为。实际的可触摸区域超出了按钮的可见边界。您可以在 Apple 自己的应用程序中看到这种行为。

通常这对用户来说是一种方便，但如果您发现它在您的应用程序中不受欢迎，那么在前面的问题中有一个可能的解决方法：

[UINavigationItem 后退按钮触摸区域太大](https://stackoverflow.com/questions/3912831/uinavigationitem-back-button-touch-area-too-large)

# django - 将对象标签作为列表返回

> ID：10133064
> 
> 赞同：4
> 
> 时间：2012-04-12T23:02:22.903
> 
> 标签：django, tagging, django-taggit

使用 django-tagging，对于分配了多个标签的对象，我如何返回一个简单的标签名称列表？

object.tags() 返回一个不容易翻译成 json 的对象，TaggableManager 是不可迭代的。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T17:06:06.327

TaggableManager 中有一个未记录的函数，称为“get_query_set”，从中很容易获取列表：

```
tagsList = []
for tag in foobar.tags.get_query_set():
  tagsList.append(tag.name) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T23:26:42.420

第一个变体

```
class MyClass(models.Model)
    ...
    def get_tag_names(self):
        return [tag.name for tag in Tag.objects.get_for_object(self)] 
```

第二种变体：

```
class MyClass(models.Model)
    ...
    def get_tag_names(self):
        return Tag.objects.get_for_object(self).values_list('name', flat=True) 
```

我认为两者都应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-05T08:53:48.317

```
tags_list = []
for tag in foobar.tags.all():
  tags_list.append(tag.name) 
```

# macos - 什么是 iOS 的 CALayer“willMoveToSuperview”的 Mac 等价物？

> ID：10133066
> 
> 赞同：0
> 
> 时间：2012-04-12T23:02:30.877
> 
> 标签：macos, uikit, core-animation, calayer, appkit

我在 iOS 上一直看到这叫做 ALL THE TIME，这使得将一些很酷的 Core Abimation 的东西移植到 Mac 上变得非常困难，因为我不知道下面的内容是什么......

```
-(void)willMoveToSuperview:(UIView *)newSuperview { 
```

`TUIView`TwUI（Twitter 的 Mac GUI 框架）在他们的类中有一个类似/相同的方法`- (void)willMoveToSuperview:(TUIView *)newSuperview {}`，这是一个创建`@interface TUIView : TUIResponder`子类的新实例的方法。这让我相信这是创建 ? 的新实例的一般调用，我承认这是我*最*`NSResponder`不了解的 Cocoa 模式之一……我有点认为这可能只是为了卸载视图或加载一个新的观点，或者改变观点的层次结构。但同样，不确定。

 *无论如何……由于 AppKit/UIKit 之间的 View Controller 结构的根本差异，在 Mac 端是否有一个直接/等效的调用，或者这是一个不同的野兽？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T00:36:15.663

您可以`-[NSView viewWillMoveToSuperview:]`在自定义 NSView 子类中覆盖。这只是一种在视图层次结构中的位置即将更改时通知您的类的方法。除了其名称所暗示的含义之外，它没有其他更深层次的含义，但是您当然可以利用它来服务于各种目的。它不是委托或视图控制器上的方法，但如果您愿意，您可以自己实现此类委托。

此外，如果您的代码在视图层次结构中移动视图，它可以直接提前立即执行任何操作，这也是调用此类方法的大致时间。*

# ruby-on-rails-3.1 - RAils 3.1 为什么此查询在开发中有效，但在生产中无效？

> ID：10133067
> 
> 赞同：0
> 
> 时间：2012-04-12T23:02:33.813
> 
> 标签：ruby-on-rails-3.1, sqlite

注意：finishDate 是 Events 表中的一个字段

此查询在开发中运行良好

```
def reminders
  @events = @user.events.find(:all, :conditions=> ['finishDate >= ?', Time.now])
end 
```

但在生产中抛出此错误

```
ActiveRecord::StatementInvalid (PG::Error: ERROR:  column "finishdate" does not exist
LINE 1: ...vent_id" WHERE "events_users"."user_id" = 13 AND (finishDate...
                                                             ^ 
```

英雄控制台

```
>> Event.last.finishDate
=> Tue, 10 Apr 2012 19:05:00 UTC +00:00 
```

我错过了什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:15:53.147

您的表格似乎没有“finishDate”这样的列。你确定两个表（如果有的话）是相同的吗？也许您手动进行了一些更改，并且没有被引入到一系列生产中。

此外，更有用的是显示在所选错误摘要旁边的完整 SQL 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:34:49.910

我将表格列重命名为

```
finishDate 
```

至

```
finish_date 
```

并且工作完美！

# mysql - MySQL 将论坛及其子论坛分组到同一组中，然后再进行每个组的最大 n

> ID：10133068
> 
> 赞同：0
> 
> 时间：2012-04-12T23:02:38.247
> 
> 标签：mysql, greatest-n-per-group, categories

在网页上，我想显示论坛列表（parent_id = 0），并且对于每个论坛，显示该论坛及其子论坛组中的最新（最新）3 个主题

```
APPLE (Forum)
 iPad3        Apr 12   (Topic from subForum "Tablets")
 Genius Bar   Apr 11   (Topic from Forum "APPLE")
 iPodNano     Apr 10   (Topic from subForum "Portables")
repeat with next forum 
```

MySQL 5.5 结构

```
table FORUMS (contains Forums and subForums, 2 level hierarchy max)
 id (autoinc)
 parent_id (0 if Forum, link to other rows id if subForum)
 name

table TOPICS (a Topic is a child of Forums or subForums)
 id (autoinc)
 forum_id (linked to FORUMS table
 name
 date_added (datetime) 
```

我可以从一个简单的查询中获取论坛的结果集，并将其放入 PHP 中的一个数组中并通过它循环。

我被困在如何创建显示前 3 个主题的第二个结果集上。

我已阅读有关 Greatest-N-Per-Group 的帖子，并尝试过它们，但我认为我的想法增加了一定程度的复杂性。我的大脑在这一点上是糊状的，所以我正在寻求帮助。

我是否创建一个 mysql 变量来保存论坛 id 及其子论坛的逗号分隔的 id 列表，然后将其用于 IN (1, 4, 6) 语句的值？

或者这是一个糟糕的设计/想法并且执行起来太昂贵？

我已经阅读了许多关于 SO 的相关帖子，但是您也可以指出我的任何链接，我也会阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T00:36:25.170

由于您的问题不够清晰，我不得不做出一些假设，但您应该能够修改它以适合您的表/字段名称。我在最里面的查询中包含了一个基于日期的过滤器，以尝试减少开销。您可能需要修改`topics.date_added > (CURRENT_DATE - INTERVAL 1 MONTH)`标准以确保每个论坛组始终有 3 个条目 -

```
SELECT *
FROM (
    SELECT
        tmp.*,
        @rank := IF(@forum=forum_id, @rank + 1, 1) rank, 
        @forum := forum_id
    FROM (
        SELECT
            forums.id AS forum_id,
            forums.name AS forum_name,
            NULL AS subforum_id,
            NULL AS subforum_name,
            topics.name AS topic_name,
            topics.date_added
        FROM forums
        INNER JOIN topics
            ON (forums.id = topics.forum_id)
        WHERE topics.date_added > (CURRENT_DATE - INTERVAL 1 MONTH)
        AND forums.parent_id = 0
        UNION ALL
        SELECT
            forums.id AS forum_id,
            forums.name AS forum_name,
            subforums.id AS subforum_id,
            subforums.id AS subforum_name,
            topics.name AS topic_name,
            topics.date_added
        FROM forums
        INNER JOIN forums subforums
            ON forums.id = subforums.parent_id
        INNER JOIN topics
            ON subforums.id = topics.forum_id
        WHERE topics.date_added > (CURRENT_DATE - INTERVAL 1 MONTH)
        AND forums.parent_id = 0
        ORDER BY forum_id ASC, date_added DESC
    ) tmp, (SELECT @forum:=NULL, @rank:=NULL) initvars
) tmp2
WHERE rank <= 3 
```

注意：我没有尝试过，因此可能存在语法错误。

# flash - 如何编译到 Flash Player 11.2 以使用 Stage3D 等新功能？

> ID：10133072
> 
> 赞同：1
> 
> 时间：2012-04-12T23:03:44.360
> 
> 标签：flash

因此，Flash Player 11.2 支持了很多很棒的新功能，特别是对于游戏开发，这对我来说是个好消息。

*   [一些在这里阅读。](http://blogs.adobe.com/flashplayer/2012/03/gameon.html)
    强调：
    1.  现在（最终）启用了右键单击。
    2.  *更好的*渲染性能。

这一切都很棒而且很神奇，但是我不知道如何编译到 Flash Player 11.2，也找不到太多关于它的信息。

在发布设置中，这就是我得到的全部：

![在此处输入图像描述](../Images/a1f834c7cc8ef8c0dac8f9b3960febfd.png)

使用 Flash CS5.5 版本 11.5.1.349（最新）。

我需要等待 CS6 还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:58:02.680

我在下面找到了执行此操作的说明：

*   [为 Flash Pro CS5 和 CS5.5 添加 FP11 支持](http://blogs.adobe.com/rgalvan/2011/11/adding-fp11-support-to-flash-pro-cs5-and-cs5-5.html)

一旦您安装了位于那里的 .mxp，您就可以发布为 FP11：

![在此处输入图像描述](../Images/75a2b026bb0968797c748123ea6a0746.png)

最后能够使用像[Starling](http://gamua.com/starling/)这样令人印象深刻的库。

# facebook - 如何使facebook之类的按钮在盒子计数中显示最小计数为0？

> ID：10133075
> 
> 赞同：2
> 
> 时间：2012-04-12T23:04:07.207
> 
> 标签：facebook, count, facebook-like, minimum

即使没有赞，如何强行显示盒子数？如果没有喜欢，它应该显示最小计数 0。这将删除类似按钮和放置在它旁边的按钮之间的空间。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T21:27:43.137

这是我使用过的设计技巧： [http ://revisedagain.com/2012/design-hack-facebook-like-button_count-0-count/](http://revisedagain.com/2012/design-hack-facebook-like-button_count-0-count/)

# java - 为 Eclipse 设置 Android 支持包 v7 - GridLayout

> ID：10133078
> 
> 赞同：34
> 
> 时间：2012-04-12T23:05:11.077
> 
> 标签：java, android, eclipse, android-layout

我整个晚上都在尝试这个，但无济于事，所以我将从头开始列出我的确切步骤。

*   我已经通过 SDK 管理器安装了支持包。
*   我创建了一个新的 android 项目，我称之为“testinggridlayout”。
*   我选择的构建目标是 Android 2.1 API 7。
*   项目清单

这将是我希望能够在其上创建网格布局的项目。

* * *

要设置支持包，这些是我的步骤：

*   右键单击我刚刚创建的项目并选择 - 新建 - Android 项目
*   将其命名为 GridLayout 并选择从现有源中创建项目并浏览至：

> android-sdks\extras\android\support\v7\gridlayout

*   右键单击我的`testinggridlayout`项目，然后单击属性：
*   在 Java Build Path 下 - 选择 Projects 选项卡，然后选择 Add。
*   选择我的项目“GridLayout”并单击“确定”，然后单击“确定”。

在此刻

如果我手动进入 main.xml 布局，请插入以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<GridLayout
    android:background="#FFFFFF"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:columnCount="8"
    android:rowCount="5" >

</GridLayout>

</LinearLayout> 
```

我得到错误：

> 找不到以下类： - GridLayout（修复构建路径，编辑 XML）。

如果我改变

`<GridLayout> & </GridLayout>`
至
`<android.support.v7.widget.GridLayout> & </android.support.v7.widget.Gridlayout>`

我收到同样的错误：

> 找不到以下类： - android.support.v7.widget.GridLayout（修复构建路径，编辑 XML）。

那时我在我的项目中创建了一个名为“libs”的文件夹。

然后我将GridLayout项目中libs下的android-support-v7-GridLayout.jar文件复制到了这个文件夹中。

我在“testinggridlayout”中的“libs”文件夹中右键单击此文件，然后选择“添加到构建路径”。

然后我的错误变为：

> 无法实例化以下类： - android.support.v7.widget.GridLayout（打开类，显示错误日志）

我错过了/不应该做哪些事情？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-19T19:10:29.883

我使用 intellij idea，所以这不完全是你的情况，但也许它会有所帮助。我整天都在努力设置它，然后它突然起作用了。我将描述我的设置，以便您进行比较：

1.  将 GridLayout 项目设置为库项目。设置示例可以在[此处的 android 开发者网站上找到](http://developer.android.com/guide/developing/projects/projects-eclipse.html)
2.  像往常一样设置你的**主**项目，参考上面链接中描述的库项目。
3.  将库添加到您的主项目。我使用了最新`android-support-v13.jar` **的和** `android-support-v7-gridlayout.jar`. *注意：我在***主**项目中使用了 v7 支持库，而不是库项目。事实上，现在检查它 - 在库项目中我*没有引用*v7 支持。
4.  在布局文件中使用完整的包名：`<android.support.v7.widget.GridLayout />`而不是`<GridLayout />`
5.  使用自定义命名空间，如下所示：`xmlns:grid="http://schemas.android.com/apk/res-auto"`在您的布局文件中使用标签中库项目中定义的自定义属性，例如`grid:columnCount`

希望这可以帮助。我目前正在尝试，甚至不确定这是我需要的东西:)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-06T15:53:55.337

如果有人遇到同样的问题，这里有一个对我有用的解决方案：

将项目导入工作区后，您需要使用 Android 选项卡而不是 Java 构建路径将其添加为依赖项

项目 -> 属性 -> Android -> 库 -> [添加...]

我还勾选了是图书馆。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-30T08:48:09.517

从文件夹Android_SDK_folder **\extras\android\support\v7\gridlayout\libs**复制**android-support-v7-gridlayout.jar**。然后，将其粘贴到您的项目**MyAndroidProject\libs**文件夹中。

 ***** * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-01T18:52:18.897

support-v7-gridlayout.jar 修订版 7 存在一些问题。现在它已更新到修订版 8，[请参阅兼容性库](http://developer.android.com/sdk/compatibility-library.html)，只需更新它，它就会工作。不要忘记更改所有库和依赖项的支持包，否则会出现不匹配错误。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-10T06:52:49.190

像这样编辑您的项目（和库项目）的 .classpath 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry exported="true" kind="con" path="com.android.ide.eclipse.adt.ANDROID_FRAMEWORK"/>
    <classpathentry exported="true" kind="con" path="com.android.ide.eclipse.adt.DEPENDENCIES"/>
    <classpathentry exported="true" kind="con" path="com.android.ide.eclipse.adt.LIBRARIES"/>
    <classpathentry kind="src" path="src"/>
    <classpathentry kind="src" path="gen"/>
    <classpathentry kind="output" path="bin/classes"/>
</classpath> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-11T02:04:49.887

除了上面列出的建议之外，我还必须做一件事才能在 Eclipse 中预览网格布局：

1.  右键单击项目 android-support-v7-gridlayout。
2.  转到属性 > Java 构建路径 > 库
3.  将 libs/android-support-v7-gridlayout.jar 添加到库中。
4.  转到 Order and Export 并检查上一步中添加的 jar。

希望能帮助到你！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-14T11:51:38.167

要使 7v 示例 (/extras/android/support/samples/Support7Demos/) 工作，请执行以下操作：

1.  从这里导入所有项目 /extras/android/support/v7
2.  为 Support7Demos 项目创建 /libs 目录
3.  将所有 *.jar 文件放在这些项目的 /libs 目录中，并将它们添加到 Support7Demos/libs****

# jquery - 转义 jquery ajax 发送的字符串中的所有特殊字符

> ID：10133082
> 
> 赞同：20
> 
> 时间：2012-04-12T23:05:43.840
> 
> 标签：jquery, text

我正在尝试以键值对形式发送文本，同时将 `contentType: "application/json; charset=utf-8",`ajax 发布到 Web 服务。我面临的问题是，如果其中一个参数（接受来自用户的文本）有引号（“）它会破坏代码 [错误消息：传入的对象无效]。到目前为止，我已经尝试了这些但没有成功

```
var text = $("#txtBody").val(); 
var output1 = JSON.stringify(text); 
var output2 = text.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&"); 
```

关于如何为 jquery ajax 帖子转义特殊字符的任何想法？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-12T23:14:28.877

为什么不使用`escape`？

```
escape(text); 
```

[https://developer.mozilla.org/en/DOM/window.escape](https://developer.mozilla.org/en/DOM/window.escape)

**编辑！！！！**

正如评论中提到的，这已被弃用。

> 不推荐使用的 escape() 方法计算一个新字符串，其中某些字符已被十六进制转义序列替换。请改用 encodeURI 或 encodeURIComponent。

而是使用以下方法之一：

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURI](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURI)

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-01-20T15:05:06.070

对于那些会发现这个问题的人： **不要使用已从 Web 中删除的转义方法，**或者`encodeURIComponent()`使用 encodeURIComponent [()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent) [encodeURI()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURI)`encodeURI()`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-25T14:36:05.987

我遇到了同样的问题，为了解决它，我改变了进行 ajax 调用的方式。

我有类似的东西

```
var datatosend = "Hello+World";

$.ajax({
    "type": "POST", 
    "data": "info=" + datatosend 
```

它发送信息=Hello World，用空格替换字符+。

所以我把它改成正确的json字符串

```
$.ajax({
    "type": "POST", 
    "data": {"info":datatosend}, 
```

现在它可以工作了。信息=你好+世界

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-12T23:14:10.437

### 2020 更新

使用[encodeURIComponent](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent)，一个来自 MDN 的示例。

```
// encodes characters such as ?,=,/,&,:
console.log(encodeURIComponent('?x=шеллы'));
// expected output: "%3Fx%3D%D1%88%D0%B5%D0%BB%D0%BB%D1%8B"

console.log(encodeURIComponent('?x=test'));
// expected output: "%3Fx%3Dtest" 
```

期望*完整 URI的*[encodeURI](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURI)也值得一看。

我之前的建议是使用`escape()`方法，但现在它已被弃用，很快也将被删除。

> 程序员在编写新的 ECMAScript 代码时不应使用或假设存在这些特性和行为
> 
> 更多：[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/escape](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/escape)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-17T19:58:25.120

1.  ***不要使用`escape()`***. 资料来源： [**MDN`escape()`文档**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/escape)...

> 程序员不应使用或假设这些功能和行为的存在......

2.  ***不要使用`encodeURI()`***. *（下面列出了替代方案。）* 来源： [**MDN`encodeURI()`文档**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURI)...

> 如果希望遵循更新的 RFC3986 的 URL ...以下代码片段可能会有所帮助：
> 
> `function fixedEncodeURI(str) { return encodeURI(str).replace(/%5B/g, '[').replace(/%5D/g, ']'); }`

3.  ***不要使用`encodeURIComponent()`.*** *（下面列出了替代方案。）* 来源： [**MDN encodeURIComponent() 文档**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent)...

> 为了更加严格地遵守 RFC 3986（保留 !、'、(、) 和 *），即使这些字符没有正式的 URI 分隔用途，也可以安全地使用以下内容：
> 
> `function fixedEncodeURIComponent(str) { return encodeURIComponent(str).replace(/[!'()*]/g, function(c) { return '%' + c.charCodeAt(0).toString(16); }); }`

因此，如果您想对除这些运算符之外的所有数据进行编码：`+@?=:#;,$&`，请使用`fixedEncodeURI()`. 如果要包含这些字符（用于定义`GET`参数和其他用途），请使用`fixedEncodeURIComponent()`.

# mvvm-light - 如何将消息发送到多个视图中的一个视图

> ID：10133083
> 
> 赞同：3
> 
> 时间：2012-04-12T23:05:48.860
> 
> 标签：mvvm-light

我有一个应用程序，它基于相同的视图和视图模型呈现许多视图-视图模型对。（即有很多视图-> viewModel 实例对）

我可以使用 Messenger 将消息从 viewModel 发送/注册到视图，当我从视图发送消息时，它会被所有视图处理（它们都注册消息）。

我将如何使用 Messenger 将消息从 viewModel 发送到创建 viewModel 的特定视图？（所有视图都注册了消息，但我只希望其中一个视图处理消息）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:26:07.640

You can use the Token while sending and registering Messaging.

Suppose You have to pass Message From ViewModel to ABCView then you can use Messenging like this..

For Ex, if you have to pass boolean value then use:

```
Messenger.Defalut.Send<bool>(true,"ForAbcView"); 
```

And in ABCView you can register like this:

```
Messenger.Default.Register<bool>(this,"ForAbcView",(b)=>{ //Some Code }); 
```

With using Token the Messenger Sender will only looks for the Register which will have same token. It only calls the method which will have same tocken.

# android - 更正android上的视图展示

> ID：10133085
> 
> 赞同：0
> 
> 时间：2012-04-12T23:05:56.020
> 
> 标签：android, listview

我正在开发一个简单的列表视图，但我收到了错误的信息，而不是正确的数据表单 db。

```
List<Category> values = cdao.listAllItems();
ArrayAdapter<Category> adapter = new ArrayAdapter<Category>(this,
   R.layout.row, values);
setListAdapter(adapter);

public List<Category> listAllItems() {
    List<Category> list = new ArrayList<Category>();

    Cursor cursor = db.rawQuery("SELECT _id, category " +
            " FROM category", null);

    while (cursor.moveToNext()) {
        Category c = new Category();
        c.setId(cursor.getInt(cursor.getColumnIndex("_id")));
        c.setCategory(cursor.getString(cursor.getColumnIndex("category")));
        list.add(c);
        Log.d(wallet.utils.Constants.TAG, c.getCategory());
    }
    return list;
}

<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="16sp" >
</TextView> 
```

结果是：wallet.entity.Category@44dbe038，正确的值必须是单词“General”。

怎么了？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:38:34.637

试试这个

```
if(cursor.getCount > 0) {
   cursor.moveToFirst();
   for(int i =0;i<cursor.getCount();i++) {
       Category c = new Category();
       c.setId(cursor.getInt(cursor.getColumnIndex("_id")));
       c.setCategory(cursor.getString(cursor.getColumnIndex("category")));
       list.add(c);
       Log.d(wallet.utils.Constants.TAG, c.getCategory());
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:04:06.713

我发现出了什么问题。我忘了在我的班级上覆盖 toString 。

```
@Override
public String toString() {
    return category;
} 
```

我希望它可以帮助其他人。

# java - 我可以在 Jogl 中嵌入 Swing 组件吗？

> ID：10133086
> 
> 赞同：1
> 
> 时间：2012-04-12T23:06:02.773
> 
> 标签：java, swing, swt, jogl

我需要为 Eclipse 构建一个复杂的图形编辑器。我不喜欢draw2d，与java2d相比，我发现它对我的要求很弱。

我可以在 SWT 上使用 Swing，所以我可能会使用 Swing 来构建我的编辑器。但是，我热衷于实现一些需要将贝塞尔曲线、形状等与 Swing 组件混合的花哨的东西。例如，假设一个秋千台使用贝塞尔样条连接到另一个秋千组件。我想创建相对于现有控件定位的悬停控件：想象一个自定义摆动组件出现在鼠标悬停时，当鼠标在我提到的桌子上时。选择文本时出现的 Visual Studio 的悬停调试窗口或 Word 2010 的文本属性小部件将是类似于我想要的示例。

最重要的是，我想对内置的摆动小部件和自定义组件（例如曲线等）进行动画处理、淡入淡出。

JavaFX 允许在其版本 1.X 中使用 Swing 组件，这几乎可以满足我的所有需求，但他们在 2.x 中放弃了此功能。您现在只能将 JavaFX 嵌入到 swing 或 swt 中，而不是相反。

搜索选项后，我遇到了 Jogl，它声称与 AWT 和 Swing 小部件集成，但我无法真正理解这意味着什么。我可以在 GLJpanel 上绘制我所有的曲线、小部件等，用 openGL 为它们设置动画，并添加实现我上面描述的那种功能吗？这一切都应该发生在 Eclipse 中，所以我应该将它嵌入到 SWT 中。

我是在这里找麻烦，还是有可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T00:22:49.733

我会为所有动画（淡入等）使用时间框架（http://java.net/projects/timingframework）。对于酷炫的弹出控件，您可以使用 JXLayer / JLayer（http://java.net/projects /jxlayer/ 用于 JDK 6 支持）

# python - 在nose中使用yield生成器时如何让TeamCity识别真正新的失败测试用例

> ID：10133093
> 
> 赞同：2
> 
> 时间：2012-04-12T23:06:55.260
> 
> 标签：python, teamcity, yield, nose

我希望有人知道如何处理这种情况......给定一个场景，当一个人通过python中的nose通过yield生成器模式运行测试时，我怎样才能让Teamcity识别运行之间的测试，这样每次发生的故障Teamcity 中的两次跑步之间并不总是标记为“新”？

我正在运行的 python 上下文安装了 TeamCity-nose，以及所有其他必要的依赖项。

例如，想象一下将其作为测试用例生成器运行：

```
case_data = [1,2,3]

class CheckValue():
    def __init__(self, value):
        self.value = value
        self.description = 'test_%s' % value
    def __call__(self):
        assertEqual(self.value, 1)

def test_cases():
    for case in case_data:
        yield check_value, case 
```

在命令行上通过鼻子运行这些报告 2 失败的测试，预期的结果。在 TeamCity 中运行它时，会看到相同的结果，名为“test_2”和“test_3”的测试失败。然而，多次运行测试，这些相同命名的测试每次都报告为新的失败。

我明白为什么，每次都是一个新的函数引用。但是，我可以以某种方式解决这个问题，并让 TeamCity 专门将测试用例故障显示为新的，*只有*当它们真的是新的时？

提前致谢。

# arrays - Clojure：为什么 get 这么慢？

> ID：10133094
> 
> 赞同：4
> 
> 时间：2012-04-12T23:06:59.487
> 
> 标签：arrays, performance, clojure

在我看来，与 java 数组相比，clojure 向量的性能略有下降。结果，我认为“传统智慧”是对于代码中对性能至关重要的部分，最好使用 java 数组。

然而，我的测试表明这不是真的：

```
Clojure 1.3.0
user=> (def x (vec (range 100000)))
#'user/x
user=> (def xa (int-array x))
#'user/xa
user=> (time  (loop [i 0 s 0] (if (< i 100000) (recur (inc i) (+ s (nth x i))) s)))
"Elapsed time: 16.551 msecs"
4999950000
user=> (time  (loop [i 0 s 0] (if (< i 100000) (recur (inc i) (+ s (aget xa i))) s)))
"Elapsed time: 1271.804 msecs"
4999950000 
```

如您所见，get 增加了大约 800% 的时间。不过，这两种方法仍然比本机 java 慢得多：

```
public class Test {                                                                                                                                                                                                                                                                                                           
    public static void main (String[] args) {                                                                                                                                                                                                                                                                                 
        int[] x = new int[100000];                                                                                                                                                                                                                                                                                            
        for (int i=0;i<100000;i++) {                                                                                                                                                                                                                                                                                          
            x[i]=i;                                                                                                                                                                                                                                                                                                           
        }                                                                                                                                                                                                                                                                                                                     
        long s=0;                                                                                                                                                                                                                                                                                                             
        long end, start = System.nanoTime();                                                                                                                                                                                                                                                                                  
        for (int i=0;i<100000;i++) {                                                                                                                                                                                                                                                                                          
            s+= x[i];                                                                                                                                                                                                                                                                                                         
        }                                                                                                                                                                                                                                                                                                                     
        end = System.nanoTime();                                                                                                                                                                                                                                                                                              
        System.out.println((end-start)/1000000.0+" ms");                                                                                                                                                                                                                                                                      
        System.out.println(s);                                                                                                                                                                                                                                                                                                
    }                                                                                                                                                                                                                                                                                                                         
}                              

> java Test
1.884 ms
4999950000 
```

那么，我的结论是否应该是 get 比 nth 慢 80 倍，比 java 中的 []-access 慢大约 800 倍？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T23:35:33.077

我怀疑这归因于 get 函数对原始类型的反射和自动装箱....

幸运的是，aget/aset 为原始数组提供了高性能的重载，避免了反射，只做一个直接的 array[i] 访问（参见[这里](http://clojure.org/java_interop#Java%20Interop-Support%20for%20Java%20Primitives)和[这里](https://github.com/clojure/clojure/blob/clojure-1.3.0/src/jvm/clojure/lang/RT.java#L2067)）。

你只需要传递一个类型提示来选择正确的函数。

```
(type xa)
[I    ; indicates array of primitive ints

; with type hint on array
;
(time (loop [i 0 s 0] 
        (if (< i 100000) (recur (inc i) 
          (+ s (aget ^ints xa i))) s))) 
"Elapsed time: 6.79 msecs"
4999950000

; without type hinting
;
(time (loop [i 0 s 0] 
        (if (< i 100000) (recur (inc i) 
          (+ s (aget xa i))) s)))
"Elapsed time: 1135.097 msecs"
4999950000 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T23:35:02.720

看起来反射正在消除您所有测试的准确性：

```
user> (set! *warn-on-reflection* true)
true
user> (def x (vec (range 100000)))
#'user/x
user>  (def xa (int-array x))
#'user/xa
user>  (time  (loop [i 0 s 0] (if (< i 100000) (recur (inc i) (+ s (nth x i))) s)))
NO_SOURCE_FILE:1 recur arg for primitive local: s is not matching primitive, had: Object, needed: long
Auto-boxing loop arg: s
"Elapsed time: 12.11893 msecs"
4999950000
user> (time  (loop [i 0 s 0] (if (< i 100000) (recur (inc i) (+ s (aget xa i))) s)))
Reflection warning, NO_SOURCE_FILE:1 - call to aget can't be resolved.
NO_SOURCE_FILE:1 recur arg for primitive local: s is not matching primitive, had: Object, needed: long
Auto-boxing loop arg: s
Reflection warning, NO_SOURCE_FILE:1 - call to aget can't be resolved.
"Elapsed time: 2689.865468 msecs"
4999950000
user> 
```

第二个恰好有更多的反思。

运行这种基准测试时，一定要运行多次以使 hotSpot 编译器预热

```
user> (time  (loop [i 0 s 0] (if (< i 100000) (recur (inc i) (+ s (aget xa i))) (long s))))
"Elapsed time: 3135.651399 msecs"
4999950000
user> (time  (loop [i 0 s 0] (if (< i 100000) (recur (inc i) (+ (long s) (aget xa i))) (long s))))
"Elapsed time: 1014.218461 msecs"
4999950000
user> (time  (loop [i 0 s 0] (if (< i 100000) (recur (inc i) (+ (long s) (aget xa i))) (long s))))
"Elapsed time: 998.280869 msecs"
4999950000
user> (time  (loop [i 0 s 0] (if (< i 100000) (recur (inc i) (+ (long s) (aget xa i))) (long s))))
"Elapsed time: 970.17736 msecs"
4999950000 
```

在这种情况下，几次运行将其降低到原始时间的 1/3（尽管反射仍然是这里的主要问题）

如果我用 dotimes 对它们进行热身，结果会大大改善：

```
(dotimes [_ 1000]  (time  (loop [i 0 s 0] (if (< i 100000) (recur (inc i) (+ s (nth x  i))) s))))
"Elapsed time: 3.704714 msecs"

(dotimes [_ 1000] (time  (loop [i 0 s 0] (if (< i 100000) (recur (inc i) (+ (long s) (aget xa i))) (long s)))))
"Elapsed time: 936.03987 msecs" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-13T09:39:06.620

似乎根本不需要类型提示，Clojure 开箱即用地进行了很好的优化。

当需要对集合执行多头函数时，只需使用 apply 和函数。当您需要将函数应用于集合中的元素并将结果存储在累加器中时，请使用 reduce。在这种情况下，两者都适用。

```
=> (def xa (into-array (range 100000)))
#'user/xa

=> (time (apply + xa))
"Elapsed time: 12.264753 msecs"
4999950000

=>(time (reduce + xa))
"Elapsed time: 2.735339 msecs"
4999950000 
```

甚至更简单也可以消除这些差异，尽管比上述最佳情况稍慢：

```
=> (def xa (range 100000))
#'user/xa

=> (time (apply + xa))
"Elapsed time: 4.547634 msecs"
4999950000

=> (time (reduce + xa))
"Elapsed time: 4.506572 msecs" 
```

只需尝试编写尽可能简单的代码，并且仅在不够快的情况下进行优化。

# javascript - Javascript：变量作用域和全局变量的弊端

> ID：10133100
> 
> 赞同：2
> 
> 时间：2012-04-12T23:07:35.813
> 
> 标签：javascript, ajax, variables, global

我正在努力变得好，我真的是，但我不知道该怎么做:)

任何关于如何在此处不使用全局变量的建议将不胜感激。我们称其为全局 G。

```
Function A 
  Builds G by AJAX

Function B
  Uses G

Function C
  Calls B
  Called by numerous event handlers attached to DOM elements (type 1)

Function D
  Calls B
  Called by numerous event handlers attached to DOM elements (type 2) 
```

我看不出如何在这里使用全局变量。DOM 元素（类型 1 和 2）是在与 A 无关的其他函数 (E&F) 中创建的。我不想将 G 添加到每个事件处理程序中（因为它很大并且有很多这些事件处理程序），并且做所以需要与我在这里寻求的相同类型的解决方案（即，让 G 到 E&F）。

全局 G，顺便说一句，是构建其他元素所必需的数组，因为它们又是由 AJAX 构建的。

我也不相信单例是真正的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T23:12:04.827

当然，将所有内容都放在一个立即执行的大型函数中！

```
(function() {
    // Your code goes here
})(); // Called right away 
```

你可以把任何东西放在那里，它可以被更窄范围内的任何东西访问，但它们仍然不是全局的。

另外，如果您的文件是唯一的文件，请停止避免使用全局变量，因为除非您正在制作某种可重用的组件，否则这真的没有害处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T23:11:56.803

我不知道这是否是一个选项？

```
Function Everything() {
  var G

  Function A 
    Builds G by AJAX

  Function B
    Uses G

  Function C
    Calls B
    Called by numerous event handlers attached to DOM elements (type 1)

  Function D
    Calls B
    Called by numerous event handlers attached to DOM elements (type 2)
}(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T23:25:20.147

不用担心在事件中传递 G。它只是对实际对象的引用，而不是副本，因此不会导致内存问题。函数、对象和数组作为引用传递。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T23:16:19.927

如果在您收到 AJAX 响应之前触发了一个事件处理程序（依赖于 G），会发生什么情况？要解决这个问题，并通过闭包将 G 绑定到 B，您可以尝试在 AJAX 回调中装配事件处理程序：

```
function A() {
    ajaxLoad(function(G) {
        attachEvents1(C);
        attachEvents2(D);

        function B() {
            G.use();
        }

        function C() {
            B();
        }

        function D() {
            B();
        }
    });
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T23:52:41.067

您没有向我们提供很多信息来了解最佳替代方案是什么，但这里有一些一般类型的选项：

## Ajax 结果作为函数参数传递

```
Function A() { 
  Builds G by AJAX
  B(G)
}

Function B(g) {
  Uses g
} 
```

因为，G 的时间是这样的，直到 A 中的成功处理程序被调用，所以也许你只是将​​它作为参数传递给 B 并且不需要它作为全局。

## 按需检索的 DOM 元素

对于 DOM 元素，通常不需要将 DOM 元素引用存储在 javascript 变量中。如果您给他们适当的 ID，那么您可以在需要时使用`document.getElementById("idName")`.

如果您确实需要在众多事件和函数中可用的持久变量，那么您有两种选择：

## 无需全局变量即可共享持久数据的自执行函数闭包

您可以将它们存储在自执行函数闭包中：

```
(function() {

var G = [];

Function A 
  Builds G by AJAX

Function B
  Uses G

})(); 
```

## 单个全局对象

创建一个真正的全局，然后将其他数据存储为属性：

```
var myMainGlobal = {};

myMainGlobal.G = [];
myMainGlobal.A = function() {
  Builds myMainGlobal.G by AJAX
}

myMainGlobal.B = function() {
  Uses myMainGlobal.G
} 
```

这至少只创建了一个实际的顶级全局符号，同时让您拥有所需的尽可能多的全局数据。

# php - 电子商务网站，php，mysql，数据库。有什么想法吗？

> ID：10133101
> 
> 赞同：2
> 
> 时间：2012-04-12T23:07:35.847
> 
> 标签：php, mysql, database, e-commerce

我正在尝试为我的学校项目创建一个电子商务网站，但我对何时更新数据库中的数量感到困惑。我何时将产品添加到购物车或何时完成订单？如果我在何时减少数量我将产品添加到购物车并且客户没有完成订单，那么我必须再次增加数量。所以唯一的方法是在客户完成订单时更新数量，如果 2 个客户一起进入最后一页然后输入 if 语句来检查数量以完成订单，如果 2 位客户中的一个拿走了最后一个产品，那么另一个会收到一条消息，例如“我们非常抱歉，最后一个产品在 2 分钟前售出” . 这是正确的思维方式吗？还有其他想法吗？（对不起我的英语。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:14:07.197

您基本上有两个选项，它们都是有效的：

1）如果您销售的产品需求量很大（您的数量有限，并且预计会有很多用户购买它，例如音乐会门票或航班机票），您可以在用户购买时“预订”产品选择它（这就是ticketmaster 处理它的方式）。这总是通过与预订相关联的计时器来完成，因此如果用户没有完成购买，该项目将再次可用，并且其他用户可以购买它

2）如果你有大量库存并且认为很多用户不会对某个特定项目感兴趣，你可以只存储用户在会话中选择的项目，一旦一切都好，减少项目的数量分贝。在这里，您还应该考虑何时对信用卡收费...如果您收费然后减少，您可能不得不将其作废（您需要支付费用）。因此，如果您没有用完用户订购的东西，那么在这种情况下，理想的做法是减少库存并向数据库收费。如果你这样做了，你应该向用户解释情况，让他找到“类似的物品”或做任何你认为最好的事情......但是，我不建议仍然处理剩余物品的发票，它可能不会对用户有感觉（即，购买一台电脑和一个背包，电脑不可用......

无论如何，希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T23:10:47.367

这就是所谓的竞争条件。

在这种情况下，您需要为第一个客户更新库存以完成他们的交易并通知其他客户库存已消失，或者使用您的第一个想法并减少库存，但如果客户取消重新增加。两者都应该与计划一起工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T23:15:07.260

嗯，这个问题的答案与这家特定商店的政策密切相关。这里有几种可能性：

*   完全防止缺货（正如你所建议的那样；有点“打盹，你输了”的态度）
*   将订单分成两部分——一个可以立即完成，另一个不能（您甚至可以预先验证延期交货的部分，并在发货时进行后验证）
*   警告客户，让他们选择做什么

还有一些，但这是您需要评估的“政策决定”路线。

如果它们是独特的或已停产的商品，那么您需要相应地进行调整（显然客户不能等到他们返回库存）。

我也这样做了，客户可以要求在商品返回库存时得到通知。

我会建议做任何事情来最大化你的转化率，并限制你的客户的挫败感。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T02:18:08.720

当我尝试建立我的第一家电子商务商店时，我曾经遇到过类似的问题。我做的一件事是在数据库中提供一个临时存储这样的 current_stock 并将其用作伪库存。当一位客户将该商品放入购物车时，该数量将从伪存储中扣除，并在订购时扣除实际库存。伪股票成为浏览网站的用户可见的股票。

希望能帮助到你！

# sql - Rails，ActiveRecord - 如何获得相关的计数行：belons_to？

> ID：10133108
> 
> 赞同：0
> 
> 时间：2012-04-12T23:07:59.897
> 
> 标签：sql, ruby-on-rails-3, activerecord, select, count

我有模型

```
class Article < ActiveRecord::Base
  belongs_to :category
end

class Category < ActiveRecord::Base
  has_one :article
end 
```

在控制器中，我正在获取所有类别名称

```
@categories = Category.order('name') 
```

我如何获取所有类别并按最常用的计数对其进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T00:01:15.397

我认为您应该更改`has_one :article`为`has_many :articles`.

所以我的版本：

```
Category.joins(:articles)
        .select("categories.*, count(articles.id) as counter")
        .order("counter") 
```

# iphone - 在 iOS 上做阴影的最快方法是什么？

> ID：10133109
> 
> 赞同：37
> 
> 时间：2012-04-12T23:08:16.423
> 
> 标签：iphone, objective-c, ios, core-animation, shadow

QuartzCore .layer.shadow 吸收了性能。每次发生变化时，它们似乎都需要重新渲染，从而导致一切滞后。

Coregraphics 渐变（用于 1 向阴影）- 看起来不正确。如果您的渐变从 0.3 alpha 变为 0，它会产生一些奇怪的效果，您可以“看到”它停止。就是不好看，也不自然。也许它没有抖动，但我确信我听说核心图形渐变是。很奇怪，我不知道。

Coregraphics 阴影 - 设置它们时需要一些时间来渲染，但除此之外性能非常好。就在您等待视图出现的那一刻，因为它必须首先渲染它的阴影，这就是问题所在。

所以我一定错过了什么。是否有另一种看起来正确的方法，并且在渲染时间和性能方面都很快？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-04-12T23:17:41.920

添加 shadowPath 应该会给您带来巨大的性能提升。以下示例假设您只想要视图两侧的阴影

```
CGPathRef path = [UIBezierPath bezierPathWithRect:view.bounds].CGPath;
[view.layer setShadowPath:path]; 
```

**编辑：** 默认情况下，CALayer 在动画期间绘制阴影，以下代码允许您将阴影缓存为位图并重用它而不是重绘它：

```
self.view.layer.shouldRasterize = YES;
// Don't forget the rasterization scale
// I spent days trying to figure out why retina display assets weren't working as expected
self.view.layer.rasterizationScale = [UIScreen mainScreen].scale; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-08-21T09:54:12.443

我经常看到人们使用**巨大**的性能影响视图的图层来创建圆角或阴影。像这样的东西：

```
[v.layer setCornerRadius:30.0f];
[v.layer setBorderColor:[UIColor lightGrayColor].CGColor];
[v.layer setBorderWidth:1.5f];
[v.layer setShadowColor:[UIColor blackColor].CGColor];
[v.layer setShadowOpacity:0.8];
[v.layer setShadowRadius:3.0];
[v.layer setShadowOffset:CGSizeMake(2.0, 2.0)];
..... 
```

这对性能有**巨大**的影响，尤其是阴影。将这样的视图放在 UITableView 中（或者事实上任何移动的东西）会创建一个 android-ish 滚动体验，你不希望这样。如果您需要动画或移动视图，请避免以任何方式创建圆角或阴影！

**认识 Core Graphics**
我创建了一个简单的 UIView 子类来向您展示如何以稍微不同的方式实现相同的结果。它使用 Core Graphics 来绘制视图，与上面的代码相比，它不会影响性能。

这是绘图代码：

```
- (void)drawRect:(CGRect)rect
{
   CGContextRef ref = UIGraphicsGetCurrentContext();

  /* We can only draw inside our view, so we need to inset the actual 'rounded content' */
  CGRect contentRect = CGRectInset(rect, _shadowRadius, _shadowRadius);

  /* Create the rounded path and fill it */
  UIBezierPath *roundedPath = [UIBezierPath bezierPathWithRoundedRect:contentRect cornerRadius:_cornerRadius];
  CGContextSetFillColorWithColor(ref, _fillColor.CGColor);
  CGContextSetShadowWithColor(ref, CGSizeMake(0.0, 0.0), _shadowRadius, _shadowColor.CGColor);
  [roundedPath fill];

  /* Draw a subtle white line at the top of the view */
  [roundedPath addClip];
  CGContextSetStrokeColorWithColor(ref, [UIColor colorWithWhite:1.0 alpha:0.6].CGColor);
  CGContextSetBlendMode(ref, kCGBlendModeOverlay);

  CGContextMoveToPoint(ref, CGRectGetMinX(contentRect), CGRectGetMinY(contentRect)+0.5);
  CGContextAddLineToPoint(ref, CGRectGetMaxX(contentRect),   CGRectGetMinY(contentRect)+0.5);
  CGContextStrokePath(ref);
 } 
```

请参阅此博客： [http ://damir.me/rounded-uiview-with-shadow-the-right-way](http://damir.me/rounded-uiview-with-shadow-the-right-way)

# google-geocoder - 带有 api-key 的 Google Geocoding API V3

> ID：10133110
> 
> 赞同：0
> 
> 时间：2012-04-12T23:08:17.867
> 
> 标签：google-geocoder

我想使用 geocoding.net 将我们对谷歌地理编码 api 的使用从 v2 升级[到](https://github.com/chadly/Geocoding.net)v3，以类似于[此处描述的方法从 C# 调用它](http://blog-of-darius.blogspot.com.au/2011/07/geocoding-with-c-and-google-geocoding_28.html)

我们的客户目前使用非业务 API 密钥，因为他们不需要超过 25000 个地理编码，但有时他们可能需要超过每天 2500 个匿名限制。

根据我在[https://code.google.com/apis/console](https://code.google.com/apis/console)上的 google api 控制台，我的 V2 和 V3 密钥每天都有 25000 个请求的限制，但是，尽管 Google Geocoding V3 API 似乎有据可查，但我可以找到无法将 API 密钥传递给它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:20:02.100

查看这篇[文章](http://blog.programmableweb.com/2010/03/10/google-says-goodbye-to-api-keys-with-new-geocoding-api/)，版本 3 没有 API 密钥。

# c# - 在运行时更改 topMost

> ID：10133114
> 
> 赞同：-1
> 
> 时间：2012-04-12T23:08:37.243
> 
> 标签：c#, topmost

我正在使用此代码.. 现在默认情况下我的应用程序是 topMost = true

但是当我尝试让一个按钮在下面执行这个功能时，我遇到了一个问题，它会禁用它一次。然后第二次点击不再。

```
public void setTop()
{
    if (this.TopMost == false)
    {
        this.TopMost = true;
    }
    if (this.TopMost == true)
    {
        this.TopMost = false;
    } 
```

任何想法为什么？过去通过菜单设置热键也发生过这种情况，我能够做到一次，然后就没有工作了:(

编辑：我发现了如何做到这一点，但无法从另一个表格中做到这一点。

```
private void button1_Click(object sender, EventArgs e)
{
    pwn4g3 mainForm = new pwn4g3();
    mainForm.TopMost = true();
    mainForm.Update();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:30:44.657

```
public void setTop()
{
    if (this.TopMost == false)
    {
        this.TopMost = true;
    }
    else // change this to else. 
    {
        this.TopMost = false;
    }
} 
```

在您的版本中，当 true 分配给 this.topmost 时，第二个`if`条件满足。这就是问题的原因。

**假设代码执行以 false 开始，然后第一个 if 条件满足，更改为 true，检查第二个 if 条件，它也满足，再次更改为 false。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T00:58:57.147

您没有在第二个示例中[显示](http://msdn.microsoft.com/en-us/library/szcefbbd.aspx)您`Form`的尝试：

```
private void button1_Click(object sender, EventArgs e)
{
    pwn4g3 mainForm = new pwn4g3();
    mainForm.Show();
    mainForm.TopMost = true;
    mainForm.Update();
} 
```

此外，如果您使用`mainForm.Show(this);`第二个表格，则将归您所有`Parent Form`，并将自动位于顶部。

```
private void button1_Click(object sender, EventArgs e)
{
    pwn4g3 mainForm = new pwn4g3();
    mainForm.Show(this);
} 
```

但就个人而言，如果我想切换 Topmost 属性，我会将我的 Form 变量作为类级别变量并执行类似的操作。

```
public partial class Form1 : Form
{
    pwn4g3 mainForm = new pwn4g3();
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if(mainForm.IsDisposed )   //Check that Form hasn't been destroyed
           mainForm = new pwn4g3();
        if(!mainForm.Visible)  //Make sure it is visible
            mainForm.Show();

        mainForm.TopMost = !mainForm.TopMost;
        this.BringToFront(); //To verify zorder of created form
    }
} 
```

# objective-c - 如何在特定标签栏上打开应用程序？iOS 目标-C

> ID：10133115
> 
> 赞同：1
> 
> 时间：2012-04-12T23:08:52.293
> 
> 标签：objective-c, ios, xcode4

我试图在第三个标签栏上打开应用程序，而不是第一个。无论我将应用程序放在标签栏上的顺序如何，左侧的第一个总是首先打开。任何人都可以帮忙吗？下面是标签条码。

```
 self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.

UIViewController *viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];

UIViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

UIViewController *viewController3 = [[ThirdViewController alloc] initWithNibName:@"ThirdViewController" bundle:nil];

UIViewController *viewController4 = [[FourthViewController alloc] initWithNibName:@"FourthViewController" bundle:nil];

UITableViewController *viewController5 = [[FifthViewController alloc] initWithNibName:@"FifthViewController" bundle:nil];

self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController3, viewController4, viewController1, viewController2,  nil];
self.window.rootViewController = self.tabBarController; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T23:12:46.273

你试过了吗

```
[self.tabBarController setSelectedIndex:2]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T23:13:51.233

只需添加`[self.tabBarController setSelectedIndex:2];`

2、因为数组从0开始；

# macos - 在全屏程序中运行脚本 (Powerpoint Office:Mac 2011)

> ID：10133123
> 
> 赞同：0
> 
> 时间：2012-04-12T23:10:37.753
> 
> 标签：macos, osx-lion, ms-office, powerpoint, screen-capture

我有一个applescript，它可以将特定监视器（在双监视器配置中）的屏幕捕获到用户定义的文件夹中。我希望在演示文稿期间使用快捷键命令运行它。

但是，似乎 Office:Mac 上的演示模式（使用演示者视图和演示视图）不允许我在后台运行程序。发生的情况是，当脚本运行时，powerpoint 最小化，然后在脚本结束时恢复，所以我最终拍摄了桌面/空白屏幕的照片。

在截屏之前，我尝试将 Powerpoint 恢复为活动窗口，这给了我幻灯片的截屏（是的！），但这不是一个完整的解决方案。此解决方案不起作用，因为我们试图在幻灯片上获取屏幕注释图像（使用 Omnidazzle 的 Scribble），这会擦除注释。

我有哪些选择？可以在演示模式下同时运行 powerpoint 宏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T00:44:13.550

你是如何设置键盘快捷键的？

我怀疑发生的事情是您的脚本作为应用程序启动，这使 Powerpoint 失去“活动”状态，因此它最小化。如果您可以在后台运行脚本，则可能会避免该问题。您是否可以这样做取决于您使用什么来启动它。

另一种方法可能是设置“服务”。您可以使用 Automator 从您的脚本中创建一个。然后，您可以为其设置键盘快捷键。这不应该从 Powerpoint 中带走活动状态。

# android-layout - Android setTextSize TextView 移动基线并切断文本高度

> ID：10133127
> 
> 赞同：3
> 
> 时间：2012-04-12T23:11:07.960
> 
> 标签：android-layout

我正在尝试使用背景图像调整 TextView 的大小。我有一个扩展 TextView 类的类，并且正在添加：

```
 MyCustomTextView tv2 = new MyCustomTextView(this);
    RelativeLayout.LayoutParams lparams = new          
                 RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,  
                                             LayoutParams.WRAP_CONTENT);
    lparams.addRule(RelativeLayout.ALIGN_PARENT_TOP);
    tv2.setLayoutParams(lparams);
    myLayout.addView(v); 
```

我在我的自定义 TextView 类中像这样缩放：

```
 public float getScaledTextHeight()
    {
        float textHeightDPI = initial_size/windowHeight_inDPI;
        float textOnScreenHeight = textHeightDPI * windowHeight_inDPI;
        float scaledText = textOnScreenHeight * mZoom;
        return scaledText;
    }
    public void setZoomTextHeight(float zoom)
    {
        mZoom = zoom;
        image_size = getScaledTextHeight();

        float mX = ((offset_x + img_offset_x) * mZoom);
        float mY = ((offset_y + img_offset_y) * mZoom);
        RelativeLayout.LayoutParams position1 =
                (android.widget.RelativeLayout.LayoutParams)this.getLayoutParams();

        position1.leftMargin = (int)mX;
        position1.topMargin  = (int)mY;
        position1.bottomMargin  = (int)(window_height - (position1.topMargin + 
                                   image_size + 16));
        this.setLayoutParams(position1);

        setTextSize(TypedValue.COMPLEX_UNIT_PX , image_size);

        invalidate();
    } 
```

最终发生的是，使文本变大将正确调整 TextView 的大小，但使文本变小将保持与大时相同的基线。它开始从下往上剪掉我的文字。

我的问题是，如何移动基线，以便在调整大小时不会切断底部。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T15:12:49.097

我的（非）移动基线问题通过将缓冲区类型设置为可扩展来解决。这可以通过两种方式完成。在 xml 中设置缓冲区类型：

```
android:bufferType="spannable" 
```

或在代码中使用适当的缓冲区类型调用 set text：

```
setText(getText(),BufferType.SPANNABLE); 
```

通过将 BufferType 设置为 spannable，TextView 将相应地自动重置基线。这将带来非常小的性能成本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T22:58:54.003

通过添加构造函数来修复它。设置垂直滚动条效果很好。

```
 this.setVerticalScrollBarEnabled(true);
    this.setMovementMethod(new ScrollingMovementMethod()); 
```

# android - 限制 sqlite 数据库条目

> ID：10133128
> 
> 赞同：-2
> 
> 时间：2012-04-12T23:11:47.677
> 
> 标签：android, sqlite

我的 sqlite 数据库中有一个名为“catory”的表，其中包含一些预定义的类别：我如何限制这些预定义条目的条目数（有 8 个类别，所以我必须将其限制为 8 个）

有谁知道如何使用 sqlite :s 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T00:11:01.133

将表格放在数据输入页面的微调器中，然后用户所能做的就是选择其中之一。

# backbone.js - Zombie.js 不能很好地处理 Backbone 表单提交

> ID：10133129
> 
> 赞同：1
> 
> 时间：2012-04-12T23:11:47.987
> 
> 标签：backbone.js, bdd, zombie.js

不确定它是在我端还是在zombie.js 端，但我似乎无法让这个非常简单的zombie.js 脚本在我的Backbone 应用程序上工作。这完全是我的问题，还是zombie.js不能很好地与Backbone应用程序一起使用的一个已知问题？我还使用 Pow (http://pow.cx/) 通过 myapp.dev 连接到应用程序，以防万一。

任何带有主干的建议或zombie.js 示例都会非常有帮助！

```
Browser = require "zombie"
assert = require "assert"

browser = new Browser()
browser.visit "http://myapp.dev/", ->
  browser.clickLink ".sign-in a.route", ->

    browser.fill "email", "me@example.com" 
    browser.fill "password", "mypassword"

    browser.pressButton "input[type=submit]", ->
      #the html that is outputted is the exact same as before
      #the link is clicked, doesn't seem to be following through
      console.log browser.html(".sign-out a.route") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:41:34.057

Zombie.js、Backbone.js 和/或 Pow 协同工作没有已知问题。这很可能是您的错误。一步一步地看看什么是失败的第一件事会有所帮助。例如，当你这样做时会发生什么：

```
Browser = require("zombie");
assert = require("assert"); 

browser = new Browser();
browser.visit("http://myapp.dev/", function() { console.log(browser.html()); }); 
```

这应该有助于查明问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:42:52.780

尝试在调用后检查您是否没有任何错误`pressButton`：`console.log(browser.errors)`

# c - 子程序中的 fprintf()

> ID：10133135
> 
> 赞同：0
> 
> 时间：2012-04-12T23:12:23.893
> 
> 标签：c, function, file-io

我试图在我的子程序中写入我的文件时卡住了。

```
void new_page(float *a, float *b, float *c, int *d){
    fprintf(results,"\nPage Totals: %f\t%f\t%f\t%d", *a,*b,*c,*d);
} 
```

我收到警告说

```
Warning: incompatible implicit declaration of built-in function 'fprinf' [enabled by default] 
```

> “错误：‘结果’未声明（在此函数中首次使用）”

在 main fprintf 中工作正常，只是在涉及子程序/功能时它不起作用。据我了解，它认为结果未声明，所以我是否必须传递文件的名称或位置才能使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:25:44.253

除非`results`是全局的，否则它是未定义的。

从它的外观上看，您已经打开了一个文件（流），就像`results`在 main 中一样。如果是这样，它只存在于 main 的范围内。

将其传递给函数。不建议将其设为全局。

* * *

它看起来像：

```
void new_page(FILE *results,  float *a, float *b, float *c, int *d){
    fprintf(results,"\nPage Totals: %f\t%f\t%f\t%d", *a,*b,*c,*d);
} 
```

* * *

还; 如果您在单独的文件中有此功能，那么`main()`，正如您所说的那样`fprintf`有效-您也必须包含`stdio.h`在该文件中。

* * *

编辑：听起来你在函数签名和原型等方面做错了。

作为一个简单的例子（不需要检查 fopen 等）：

```
#include <stdio.h>

void foo(FILE * fp)
{
    fprintf(fp, "HELLO\n");
}

int main(void)
{
    FILE *fp;

    fp = fopen("blabla", "w");
    foo(fp);
    fclose(fp);

    return 0;
} 
```

还; 你说你的编译器没有抱怨。您是否使用了广泛的警告？如果不是，你应该。即海合会：

> $ gcc -Wall -Wextra -pedantic -o my_prog my_source.c

我通常还会添加`-std=c89`，或者如果需要，`-std=c99`。

然后用 valgrind 运行它：

> $ valgrind ./my_prog

这两个步骤将为您提供很多提示和线索，以找出可能出错的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T23:27:56.387

要解决`fprintf`警告，您需要添加

```
#include <stdio.h> 
```

靠近源文件的顶部。

`results`错误不同；您可以将其设为全局或将其作为参数传递给您的`new_page`函数。

使变量成为全局变量（即，在任何函数之外定义，包括`main`）通常`results`是一种糟糕的风格，但如果`FILE*`您将在整个程序中使用它，那么将其设为全局变量并非不合理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T23:17:59.053

这里有不止一种解决方案。

1.  您可以将文件处理程序传递给函数。
2.  您可以使用 printf 写入文件。但是，如果您这样做，您将无法再次写入屏幕。免费搜索

# javascript - 如果对 JSONP 请求的服务器响应没有正确地将响应包装在函数中，有没有办法覆盖“无效标签”错误？

> ID：10133150
> 
> 赞同：1
> 
> 时间：2012-04-12T23:14:07.957
> 
> 标签：javascript, jquery, jsonp

所以我正在尝试使用 $.JSON 来获取和访问来自这个 url 的数据以用于一个辅助项目：[https](https://api.pinterest.com/v2/users/cssquirrel/) ://api.pinterest.com/v2/users/cssquirrel/ 。从访问它可以看出，它是一个有效的 JSON 对象。

所以我使用 jQuery 执行以下 JSONP 请求。

```
$.getJSON('https://api.pinterest.com/v2/users/cssquirrel/?callback=?', function(data) { callback(data); });` 
```

当我运行它时，我收到错误“无效标签”，因为虽然我收到了包含所有 JSON 信息的响应，但它没有将其包装在回调函数中，这会导致一切都失败。

这是回应：

```
{"status": "success", "user": {"username": "cssquirrel", "website": "", "about": "", "twitter_link": "", "publish_timeline": false, "is_following": false, "facebook_link": "http://www.facebook.com/cssquirrel", "image_url": "http://media-cache.pinterest.com/avatars/cssquirrel_1332472797.jpg", "location": "", "full_name": "Kyle Weems", "stats": {"followers_count": 10, "likes_count": 13, "pins_count": 259, "following_count": 24, "boards_count": 2}, "id": "123778827166945150", "image_large_url": "http://media-cache.pinterest.com/avatars/cssquirrel_1332472797_o.jpg"}, "boards": [{"category": "home", "is_collaborator": false, "user_id": "187251434415197561", "description": "This board is specifically for things we want to buy or am going to buy for redecorating our apartment in the next year or so (one can hope).", "url": "/jnaepalm/my-apartment-redecoration/", "is_following": false, "thumbnails": ["/uploads/cover_187251365695749104_187251296976783278_8e1oaKi9_1333652274.jpg", "http://media-cache.pinterest.com/upload/187251296976877180_C8VMZpRi_t.jpg", "http://media-cache.pinterest.com/upload/187251296976832689_ripauAtd_t.jpg", "http://media-cache.pinterest.com/upload/187251296976832240_fUHOQFUL_t.jpg", "http://media-cache.pinterest.com/upload/89509111314068749_b8HECGS4_t.jpg", "http://media-cache.pinterest.com/upload/187251296976813631_mqrILJ7L_t.jpg"], "stats": {"followers_count": 53, "pins_count": 11}, "id": "187251365695749104", "name": "My Apartment Redecoration"}, {"category": "architecture", "is_collaborator": false, "user_id": "123778827166945150", "description": "", "url": "/cssquirrel/dawww/", "is_following": false, "thumbnails": ["http://media-cache.pinterest.com/upload/125960120798214086_Q7SKFTww_222.jpg", "http://media-cache.pinterest.com/upload/211950726183236720_7Kod2qbJ_t.jpg", "http://media-cache.pinterest.com/upload/125045327123930771_LuvhIu65_t.jpg", "http://media-cache.pinterest.com/upload/87186942756265435_zkDGofnk_t.jpg", "http://media-cache.pinterest.com/upload/226165212507107947_FmCa7hLT_t.jpg"], "stats": {"followers_count": 17, "pins_count": 20}, "id": "123778758447498751", "name": "Dawww"}, {"category": "food_drink", "is_collaborator": false, "user_id": "123778827166945150", "description": "", "url": "/cssquirrel/nom-nom-nomophilia/", "is_following": false, "thumbnails": ["http://media-cache.pinterest.com/upload/236931630366384673_cIr5IfF1_222.jpg", "http://media-cache.pinterest.com/upload/280419514268240404_2ysv68TW_t.jpg", "http://media-cache.pinterest.com/upload/192388215301900735_YjfHY9zf_t.jpg", "http://media-cache.pinterest.com/upload/157414949445677782_ETiqDlZ4_t.jpg", "http://media-cache.pinterest.com/upload/284712007662990043_kKnxN3jz_t.jpg"], "stats": {"followers_count": 20, "pins_count": 80}, "id": "123778758447497411", "name": "Nom-nom-nomophilia"}, {"category": "men_apparel", "is_collaborator": false, "user_id": "123778827166945150", "description": "", "url": "/cssquirrel/project-sexypants/", "is_following": false, "thumbnails": ["http://media-cache.pinterest.com/upload/252201647852822759_uwlKOI1e_222.jpg", "http://media-cache.pinterest.com/upload/262264378270304794_88rVBmtm_t.jpg", "http://media-cache.pinterest.com/upload/198439927301238104_ZOX7SIcE_t.jpg", "http://media-cache.pinterest.com/upload/90775748709356579_2Zdk8if8_t.jpg", "http://media-cache.pinterest.com/upload/245657354644409113_GrKBq62Q_t.jpg"], "stats": {"followers_count": 20, "pins_count": 33}, "id": "123778758447497410", "name": "Project Sexypants"}, {"category": "cars_motorcycles", "is_collaborator": false, "user_id": "123778827166945150", "description": "", "url": "/cssquirrel/cars-to-overcompensate-with/", "is_following": false, "thumbnails": ["http://media-cache.pinterest.com/upload/216946907019857635_qiGKPgTa_222.jpg", "http://media-cache.pinterest.com/upload/30258628716631205_PAfHj9Ds_t.jpg", "http://media-cache.pinterest.com/upload/285486063848979846_cZABTXYA_t.jpg", "http://media-cache.pinterest.com/upload/193936327673799615_3wdGZJ7U_t.jpg", "http://media-cache.pinterest.com/upload/253749760224841585_f5N7CY4h_t.jpg"], "stats": {"followers_count": 20, "pins_count": 44}, "id": "123778758447497409", "name": "Cars To Overcompensate With"}, {"category": "geek", "is_collaborator": false, "user_id": "123778827166945150", "description": "", "url": "/cssquirrel/geeeeeek/", "is_following": false, "thumbnails": ["http://media-cache.pinterest.com/upload/123778689728702748_OuOah7Ki_222.jpg", "http://media-cache.pinterest.com/upload/123778689728702742_2MXhVgEb_t.jpg", "http://media-cache.pinterest.com/upload/152418768608872302_FTHuHi9M_t.jpg", "http://media-cache.pinterest.com/upload/160792649165450534_EAB8aKAI_t.jpg", "http://media-cache.pinterest.com/upload/169307267210994707_D0Ht2JrH_t.jpg"], "stats": {"followers_count": 20, "pins_count": 48}, "id": "123778758447497408", "name": "Geeeeeek"}, {"category": "food_drink", "is_collaborator": false, "user_id": "123778827166945150", "description": "", "url": "/cssquirrel/brew/", "is_following": false, "thumbnails": ["http://media-cache.pinterest.com/upload/135389532518003791_9awFAkAM_222.jpg", "http://media-cache.pinterest.com/upload/87116574011433685_49ZFZZUy_t.jpg", "http://media-cache.pinterest.com/upload/44050902575271742_HOZYAXOW_t.jpg", "http://media-cache.pinterest.com/upload/219620919298640329_yQlav4EP_t.jpg", "http://media-cache.pinterest.com/upload/123778689728668385_W9OfOjAj_t.jpg"], "stats": {"followers_count": 20, "pins_count": 34}, "id": "123778758447497407", "name": "Brew"}]} 
```

尽管出现“无效标签”错误，我有什么方法可以处理这个 JSON 对象吗？（不更改我无权访问的服务器端代码）。显然我想要的数据正在被发送，它只是缺少 JSONP 通常期望的函数包装器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:19:15.013

如果服务器只使用 JSON 响应并且不期望 JSONP 请求，并且您无权访问服务器，那么就无法完成这项工作。（如果你能让它工作，那么任何在正常操作中返回 JSON 的站点都将是一个很大的安全漏洞，因为这将允许跨站点数据窃取。）

因此，除非服务器想要通过启用 CORS 或通过执行 JSONP 来执行此操作，否则您无法以这种方式获取数据。

# ruby-on-rails - 如何根据另一个表向我的用户模型添加计数器总计？

> ID：10133156
> 
> 赞同：0
> 
> 时间：2012-04-12T23:14:34.917
> 
> 标签：ruby-on-rails, activerecord

我有很多积分的用户，积分属于用户。

点数可以是任意数量。

我想通过向我的用户模型添加总积分缓存来善待我的数据库，这样我就可以轻松地做 user.total_points

我该如何实施呢？

编辑：PS我是第一次加分，所以没有必要回去计算用户可能已经获得的积分......只需要它继续前进

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:30:18.887

如果表中的行构成一个点，您可以使用该`counter_cache`技术。`points`否则，您可以使用简单的`after_save`过滤器来实现它。

```
class User
  # add a column called total_points and set the default to 0    
  has_many :points    
end

class Point

  # assuming `amount` column stores the points.    
  belongs_to :user

  after_create { |p| p.update_user_points(:create) }
  after_update { |p| p.update_user_points(:update) if p.amount_changed? }
  after_destroy{ |p| p.update_user_points(:destroy)}

  def update_user_points(type)
    delta = (type == :create) ? amount :
               (type == :update) ? (amount - amount_was) :
                 -amount
    User.update_counters(user, :total_points => delta) 
  end

end 
```

# php - SimpleXML 中的美化/格式化输出

> ID：10133157
> 
> 赞同：3
> 
> 时间：2012-04-12T23:14:42.270
> 
> 标签：php, formatting, simplexml

我有这个 simplexml 脚本，用于发布从表单输入的数据。

```
$xml = simplexml_load_file("links.xml");

$sxe = new SimpleXMLElement($xml->asXML()); 

$person = $sxe->addChild("link");
$person->addChild("title", "Q: ".$x_title);
$person->addChild("url", "questions_layout.php#Question$id");

$sxe->asXML("links.xml"); 
```

当它出现时，它在一行中看起来像这样：

```
<link><title>Alabama State</title><url>questions_layout.php#Question37</url></link><link><title>Michigan State</title><url>questions_layout.php#Question37</url></link></pages> 
```

但是我已经尝试过在[**此处**](https://stackoverflow.com/questions/1840148/php-simplexml-new-line)找到的方法，但[**在行**](https://stackoverflow.com/questions/798967/php-simplexml-how-to-save-the-file-in-a-formatted-way)中都没有正确格式化 XML，因为它们应该像

```
<link>
<title></title>
<url></url>
</link> 
```

在第一个参考链接中，我什至更改`loadXML`为`load`，因为`loadXML`需要一个字符串作为 XML。有人可以帮我找到解决方案吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T23:21:10.700

AFAIK simpleXML 无法自行完成。

但是，DOMDocument 可以。

```
$dom = dom_import_simplexml($sxe)->ownerDocument;
$dom->formatOutput = TRUE;
$formatted = $dom->saveXML(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-05T11:48:23.047

我认为上述来自stackoverflow权威的接受答案并没有解决上述问题。参考：[我试过你的答案，我收到一个致命错误：调用未定义的方法 DOMElement::saveXML()`$formatted = $dom->saveXML();`

```
$simplexml = simplexml_load_file("links.xml");
$dom = new DOMDocument('1.0');
$dom->preserveWhiteSpace = false;
$dom->formatOutput = true;
$dom->loadXML($simplexml->asXML());
$xml = new SimpleXMLElement($dom->saveXML());

$person = $xml->addChild("link");
$person->addChild("title", "Q: ".$x_title);
$person->addChild("url", "questions_layout.php#Question$id");
$xml->saveXML("links.xml"); 
```

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-13T15:50:13.260

这段代码对我有用，而且也很干净：

```
header('Content-type: text/xml');

echo $xml->asXML(); 
```

其中 $xml 是 SimpleXMLElement - 此代码将按以下方式打印 XML

```
<Attribute>
   <ChildAttribute>Value</ChildAttribute>
</Attribute> 
```

这取自[官方 PHP 文档 SimpleXMLElement::asXML](https://www.php.net/manual/en/simplexmlelement.asxml.php)

希望对你有帮助！

# bash - $@ 在 bash 脚本中是什么意思？

> ID：10133158
> 
> 赞同：0
> 
> 时间：2012-04-12T23:14:50.863
> 
> 标签：bash

我正在阅读我的 .bashrc 并注意到以下内容

```
cd "$@" && some_other_function 
```

$@ 到底是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T23:18:25.647

`"$@"`展开为引用的命令行参数列表。它与`"$*"`: given

```
set "a b" c d 
```

`"$*"`扩展到

```
"a b c d" 
```

而`"$@"`扩展为

```
"a b" c d 
```

和`$*`（或`$@`）展开为

```
a b c d 
```

也就是说， "`$*"`生成单个字符串但`"$@"`复制原始引​​用，`$*`丢失引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T23:18:13.467

它是所有位置参数，每个都用双引号引起来。[http://tldp.org/LDP/abs/html/internalvariables.html#APPREF](http://tldp.org/LDP/abs/html/internalvariables.html#APPREF)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T23:17:59.483

来自`man bash`：

> @
> 展开为位置参数，从一开始。当扩展出现在双引号内时，每个参数都扩展为一个单独的单词。即 "$@" 等价于 "$1" "$2" ... 如果双引号展开出现在一个单词中，则第一个参数的展开与原词的开头部分连接，展开的最后一个参数与原始单词的最后一部分连接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T23:18:34.763

$@ 表示传递给脚本的所有参数。

如果您像这样调用名为 foo.sh 的脚本：

```
$>  foo.sh boo goo loo 
```

*$@*的输出将是这样的：

```
 > boo goo loo 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-07T07:10:09.900

当`$@`为空时，`$@`不展开为空字符串；它被完全删除。所以你的测试不是：

```
[ -n "" ] 
```

反而：

```
[ -n ] 
```

Now`-n`不是一个运算符，而只是一个非空字符串，它总是测试为真。

# android - LinearLayout 渐变效果内容

> ID：10133160
> 
> 赞同：0
> 
> 时间：2012-04-12T23:15:01.407
> 
> 标签：android, views, effect, fading

所以，在我当前的项目中，我有一个方向设置为垂直的 LinearLayout。在运行时，视图将以编程方式添加到布局中。我希望布局的内容在底部淡出（拖尾）而不是仅仅被切断。我研究了 fadingEdge 但无论我如何更改 fadingEdge 和 fadingEdgeLength 的设置，视图的外观似乎都没有变化。

信息：

*   在 Eclipse 布局编辑器中工作
*   使用自定义主题 (HoloEverywhere)
*   目标是 4.0.3 但 minSdkVersion 是 8（我使用 android 兼容性和 sherlockactivitybar）

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T01:01:22.420

似乎该方法在 ICS 发布时已被弃用，现在已被忽略（至少文档是这么说的）......

# ruby - 将具有共同值/键的数组转换为哈希

> ID：10133163
> 
> 赞同：2
> 
> 时间：2012-04-12T23:15:31.357
> 
> 标签：ruby, arrays, hash

我有一个这样的数组数组：

```
[[1,"A"], [1,"B"], [2,"C"], [2,"D"]] 
```

我想把结果变成这样的哈希：

```
1 => {results => ["A","B"]}, 2 => {results => ["C","D"]} 
```

我尝试使用“group_by”方法，但无法将其放入此表单。最有效的方法是什么？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T23:25:01.527

这是你想要的吗？

```
irb(main):001:0> a=[[1,"A"], [1,"B"], [2,"C"], [2,"D"]]
=> [[1, "A"], [1, "B"], [2, "C"], [2, "D"]]

irb(main):002:0> h={}
=> {}

irb(main):003:0> a.each { |k,v| h[k] ||= []; h[k] << v }
=> [[1, "A"], [1, "B"], [2, "C"], [2, "D"]]

irb(main):004:0> h
=> {1=>["A", "B"], 2=>["C", "D"]} 
```

或者，如果你真的想要一个带有“结果”键的散列表：

```
irb(main):003:0> a.each { |k,v| h[k] ||= {}; h[k]['result'] ||= []; h[k]['result'] << v }
=> [[1, "A"], [1, "B"], [2, "C"], [2, "D"]]
irb(main):004:0> h
=> {1=>{"result"=>["A", "B"]}, 2=>{"result"=>["C", "D"]}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T23:49:20.867

对于单线恋人：

```
a = [[1,"A"], [1,"B"], [2,"C"], [2,"D"]]
a.inject(Hash.new { |h, k| h[k] = {"results" => []} }) { |h, e| h[e.first]["results"] << e.last; h } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T23:28:37.723

我不确定你为什么想要那个内在的“结果”词，但这里是如何得到你想要的：

```
the_list = [[1,"A"], [1,"B"], [2,"C"], [2,"D"]]
#=> [[1, "A"], [1, "B"], [2, "C"], [2, "D"]]

by_key = the_list.group_by(&:first)
#=> {1=>[[1, "A"], [1, "B"]], 2=>[[2, "C"], [2, "D"]]}

as_result_hash = by_key.map do |key, matches|
  [key, {'results'=>matches.map(&:last) }]
end
#=> [[1, {"results"=>["A", "B"]}], [2, {"results"=>["C", "D"]}]]

final = Hash[*as_result_hash.flatten(1)]
#=> {1=>{"results"=>["A", "B"]}, 2=>{"results"=>["C", "D"]}} 
```

听起来您已经弄清楚了 group_by 的基本用法 - 您可以获得一组按某个键分组的结果。

下一步是将这些结果映射到您想要的格式。为此，我们只需映射 by_key 字典，返回原始键和映射结果。

这将返回一个数组，因此我们使用`Hash[*array.flatten(1)]`它来将其转换回字典。

* * *

如果你不需要内在的“结果”，你可以这样做：

```
as_result_hash = by_key.map do |key, matches|
  [key, matches.map(&:last)]
end
#=>  [[1, ["A", "B"]], [2, ["C", "D"]]] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T14:19:04.883

```
a = [[1,"A"], [1,"B"], [2,"C"], [2,"D"]]
Hash[a.group_by(&:first).map{ |k, v| [k, {"results" => v.map(&:last)}]}] 
```

# javascript - 如何在 chrome 扩展中使用 chrome.tabs.executeScript？

> ID：10133165
> 
> 赞同：0
> 
> 时间：2012-04-12T23:15:50.397
> 
> 标签：javascript, google-chrome-extension

我在搞乱 chrome 扩展，我试图在页面中注入一些 JS。（例如，我想让主页弹出一个框，说些什么）。这是我的 JS 文件：

```
//Function to be called:
function setText() {
  var text = document.getElementById("titleinput").value;
  var myCode="alert('Test');";
  chrome.tabs.executeScript(null, {code:myCode});
}

//Makes it run above code when a button is pressed:
document.addEventListener('DOMContentLoaded', function () {
  document.querySelector('button').addEventListener('click', setText);
}); 
```

这是我的清单文件：

```
{
  "name": "Tester",
  "version": "1.0",
  "manifest_version": 2,
  "description": "description",
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  },
  "permissions": [
    "tabs", "http://*/*", "https://*/*"
  ]
} 
```

我知道`setText()`正在调用（我尝试直接在其中放置警报），但由于某种原因，主页并没有像它应该那样弹出一个说“测试”的弹出窗口。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T02:25:59.510

确保您在网站上运行它而不是`chrome://extensions`. 您不能将脚本注入`chrome://*`页面。如果它仍然不起作用，请使用[弹出调试器](https://code.google.com/chrome/extensions/tut_debugging.html#inspect-popup)查找错误。

# meteor - 为什么在 Meteor 模板中插入 #if 空格键标签会导致呈现空白页面？

> ID：10133166
> 
> 赞同：0
> 
> 时间：2012-04-12T23:16:00.220
> 
> 标签：meteor, coffeescript, spacebars

我正在玩有前途的[流星](http://www.meteor.com)框架并碰壁。在我的模板中插入`{{#if something}}{{/if}}`任何地方都会导致呈现一个空页面。考虑这个模板：

```
<head>
    <title>MUse - XUse on Meteor</title>
</head>

<body>
    {{> menu}} {{> login }}
    {{> hello}}
</body>

<template name="hello">
    <div class="hello">
      <h1>This is Xuse on Meteor a.k.a. <em>MUse</em></h1>
    </div>
</template>

<template name="login">
    <div class="login">
      <label for="username">Login:</label>
      <input type="text" id="username" value="" placeholder="Login"/>
      <label>Password:</label>
      <input type="password" id="password" value="" placeholder="Password"/>
      <input type="button" id="signin" name="signin" value="Sign in" />
    </div>
</template>

<template name="dashboard">
    <div class="dashboard">
      Hi, {{login_name}}.
    </div>
</template>

<template name="menu">
    <nav>
      <a href="/#dashboard">Dashboard</a> |
      <a href="/#logout">Log out</a> |
      {{#if login_name}}
      <a href="/#{{login_name}}">{{login_name}}</a>
      {{/if}}
    </nav>
</template> 
```

以防万一`coffeescript`代码：

```
if Meteor.is_client
  Template.hello.greeting =  ->  "Welcome to muse."

  Template.login.events =
    'click #signin' :  ->
        console.log "You pressed the 'sign in' button" if console?
        login_name = $('#username').val()
        password = $('#password').val()
        console.log "Credentials: #{login_name} -> #{password}" if console?

  Template.menu.events =
    'click a[href*="dashboard"]' : ->
        console.log "Menu -> Dashboard invoked" if console?
    'click a[href*="logout"]' : ->
        console.log "Menu -> Log out invoked" if console?

if Meteor.is_server
  Meteor.startup ->
    time = new Date
    console.log "#{time} Hi. This is server" if console? 
```

仅此而已——仅此而已。删除`{{#if...}}`序列会导致正确呈现，而将其留在原处或放置在任何有意义的地方都会呈现空白页面。有什么线索吗？

我确实尝试了 todos 示例，它在同一台机器上工作，所以这不是安装问题。顺便说一句，这台机器是一台装有 Ubuntu 12.04 的旧笔记本电脑 Asus A6Rp。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:51:12.387

您还需要在正确的模板上定义咖啡脚本中的 login_name，这是 javascript 中的示例：

```
Template.menu.login_name = function () {
  return $('#username').val();
}; 
```

不是 100% 使用咖啡脚本，但我相信你明白了：

```
Template.menu.login_name = -> $('#username').val() 
```

# ruby-on-rails - Ruby on Rails - 处理请求时在哪里编写业务逻辑？（新手）

> ID：10133168
> 
> 赞同：0
> 
> 时间：2012-04-12T23:16:18.367
> 
> 标签：ruby-on-rails, ruby

我正在学习 Ruby on Rails。我做了一个这样的简单链接：

```
<%= link_to "Alex Link", alexes_path(@alex) %> 
```

然后我像这样在 routes.rb 中路由它：

```
 resources :alexes

  get "home/index" 
```

然后我有点不清楚，但我认为它是控制器的这一部分：

```
 def index
    #@alexes = Alex.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @alexes }
    end
  end 
```

我对它进入控制器的这一部分是否正确？

`index.html.rb`然后什么都没有发生，它进入下一页`views\alexes`

所以我想知道的是 - 如果我需要做一些业务逻辑，我会在控制器片段中写吗？片段在哪里？一个例子会很好看。

另外，我想连接到 MongoDb 数据库。我还要在控制器中间写吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:25:30.767

是的，控制器用于业务逻辑。模型代表数据，视图代表显示（通常是网页），而控制器正是业务逻辑所在。

检查此站点以获得出色的教程：[http ://ruby.railstutorial.org/](http://ruby.railstutorial.org/)

# ipad - UIBarButtonItem 自定义在透明图标上使用 20x20 和 40x40 白色而不使用视网膜 @2x

> ID：10133170
> 
> 赞同：2
> 
> 时间：2012-04-12T23:16:25.543
> 
> 标签：ipad, uibarbuttonitem, retina-display

我在我的应用程序中有自定义 UIBarButtonItems 并且图像没有加载新 iPad 3 上的 @2x。当在一个简单的工具栏中时，它们似乎可以在 iPhone 视网膜上工作，但我有一些自定义代码需要其中一些是工具栏设置为导航栏的右侧或左侧栏按钮项。

导航栏中的 UIBarButtonItem 自定义看起来不错

UIToolbar 中的 UIBarButtonItem 自定义看起来不错

UIBarButtonItem 中的 UIToolbar 中自定义的 UIBarButtonItem 的分辨率搞砸了。

这似乎适用于我使用带有 iOS 5.1 SDK 的 Xcode 4.3 的本地构建这不适用于带有 iOS 5.0 SDK 的带有 Xcode 4.2 的构建框（什么！？）

我是否需要复制图像并指定 ~ipad 才能让它知道我的真正意思是在 ipad 视网膜上使用@2x？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:21:53.687

你在使用 Xcode 3 吗？如果是这样，那可能就是这里的问题。

请参阅以下相关问题： [iPad 3 Retina Display, @2x images, and apps already in the store](https://stackoverflow.com/questions/9371780/ipad-3-retina-display-2x-images-and-apps-already-in-the-store)

# ruby-on-rails - Rails：设置器中的Attr访问器未定义方法

> ID：10133172
> 
> 赞同：4
> 
> 时间：2012-04-12T23:16:39.973
> 
> 标签：ruby-on-rails, ruby, setter, attr-accessor

我在用户模型中有这行代码：

```
attr_accessor :birthdate 
```

在同一个模型中，我有一个方法试图通过这样做来设置生日：

```
self.birthdate = mydate 
```

其中 mydate 是一个 Date 对象。

我收到此错误：`undefined method birthdate='`

为什么会这样？attr_accessor 不是创建了一个 setter 和一个 getter 吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-12T23:23:54.740

让我猜猜，你是从一个类方法调用那个setter，对吧？

```
class Foo
  attr_accessor :bar

  def set_bar val
    self.bar = val # `self` is an instance of Foo, it has `bar=` method
    bar
  end

  def self.set_bar val
    self.bar = val # here `self` is Foo class object, it does NOT have `bar=`
    bar
  end
end

f = Foo.new
f.set_bar 1 # => 1
Foo.set_bar 2 # => 
# ~> -:10:in `set_bar': undefined method `bar=' for Foo:Class (NoMethodError) 
```

# windows - 在 Windows 上更改 Git 提示符

> ID：10133173
> 
> 赞同：26
> 
> 时间：2012-04-12T23:16:40.263
> 
> 标签：windows, git, bash, command-prompt, msysgit

我在 Windows 上使用 Git，通过带有 MSysGit（最新）的 GitExtensions 安装，在安装过程中选择了“不要修改我的 Windows 提示符”。

现在，我希望能够修改默认提示（默认情况下只显示分支名称，以显示自上次推送以来有多少时间，以及多少本地提交`origin`（或者具体来说`origin/master`，以更容易的为准）。

所以说而不是：`me@myPC /c/myRepo (master)`

我会看到以下内容：`me@myPC /c/myRepo (master) 5 | 10:20`

这意味着我最后一次推送是在 10 小时 20 分钟前，从那以后我已经进行了 5 次本地提交。

在你提到它之前，我知道有一些方法可以使用 PowerShell，但我不想使用它。我想要我们都知道和喜爱的标准 git bash。

我找到了一些解决方案，通过修改文件中的`PS1`变量`.bashrc`，但是（请原谅我可怜的 Unix 知识）它们似乎不起作用，（例如接受[这个](https://stackoverflow.com/questions/6883760/git-for-windows-bashrc-or-equivalent-config-files-for-git-bash-shell)问题的答案）。

所以你有它。这可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T00:11:11.843

默认的 git-completion 脚本支持您所追求的部分内容。如果您在 /etc/profile 文件中设置 GIT_PS1_SHOWUPSTREAM="verbose git" ，那么它将在您的上游分支之前添加提交数到提示符中。您可能需要如下设置提示以`(%s)`在 git 特定部分中包含 a：

```
export PS1='\[\033]0;$MSYSTEM:\w\007
\033[32m\]\u@\h \[\033[33m\w$(__git_ps1 " (%s)")\033[0m\]
\$ ' 
```

对于时间部分 - 这对我来说是新的。但是 git-bash 应该可以处理您可能找到的任何 unix 版本。只需以管理员身份编辑 /etc/profile （实际上是`%PROGRAMFILES%\Git\etc\profile`或创建一个包含以下内容的 ~/.profile 文件：

```
GIT_PS1_SHOWDIRTYSTATE=1
GIT_PS1_SHOWUPSTREAM='verbose git'
export GIT_PS1_SHOWDIRTYSTATE GIT_PS1_SHOWUPSTREAM 
```

设置了这些环境变量后，如果您有一个在源之前提交 1 次的脏树，则默认的 msysGit 提示符如下所示：

```
pat@FROG /c/src/msysgit (devel * u+1)
$ git status --short --branch
## devel...origin/devel [ahead 1]
 M doc/git/html
 M etc/inputrc 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-09T02:51:24.720

步骤 1\. 将这两个文件复制到您的主文件夹，您可以在 %PROGRAMFILES%\Git\etc\ 下找到它们；

```
git-completion.bash
git-prompt.sh 
```

步骤 2\. 在您的 bash 配置文件中配置您的 PS1 `.bashrc`，例如：

```
. git-completion.bash
. git-prompt.sh
GIT_PS1_SHOWDIRTYSTATE=true
PS1='\w\[\033[01;32m\]$(__git_ps1)\[\033[00m\]\$ ' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-13T07:15:33.690

该`__git_ps1`函数是`/git/config/completion/git-completion.bash`在 mingw bash 中定义的。您应该能够将此函数复制到您自己的 .bashrc 并根据您的选择进行编辑。

FWIW 我选择跳过 __git_ps1 并选择我自己的颜色。这是我的 .bashrc 中的提示代码：

```
DEFAULT_COLOR='\[\e[0m\]'
BLACK='\[\e[0;30m\]'
LTBLUE='\[\e[1;34m\]'
LTRED='\[\e[1;31m\]'

USER_COLOR=$LTBLUE
GIT_CHANGE_COLOR=$LTRED
GIT_NO_CHANGE_COLOR="$BLACK"

gitPrompt() {
  local gitPrompt=$(__git_ps1)
  local gitColor="$GIT_NO_CHANGE_COLOR"
  if [ -n "$gitPrompt" ]; then
    branch=$(git symbolic-ref HEAD 2>/dev/null)
    if [ "$gitPrompt" != " (${branch##refs/heads/})" ]; then
      gitColor="$GIT_CHANGE_COLOR"
    fi
  fi
  echo "$USER_COLOR\u@\h:\W$gitColor$gitPrompt$DEFAULT_COLOR$ "
}

PROMPT_COMMAND='PS1="$(gitPrompt)"' 
```

每次打印提示时都会评估 PROMPT_COMMAND 中的表达式。

为了做你想做的事，你可能不得不用 awk 或 perl 之类的东西来解析 reflog 并将其附加在分支名称之后。我通常依靠 gitk 来可视化您正在寻找的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-01T08:24:43.657

如果你在 Windows 上运行 GitPortable，你可能想要从[这个站点获取这个技巧](http://markb.co.uk/portable-git-windows-setting-home-environment-variable.html)

`$ nano ~/.bashrc`在 gitportable 控制台中写入。完成编辑后写入`$ source ~/.bashrc`以重新加载设置。我的安装将文件保存在*C:\apps\GitPortable\Data\home*文件夹中。

```
# Git-friendly prompt showing dirty state
# http://stackoverflow.com/questions/10133173/alter-git-prompt-on-windows

shopt -s promptvars
export GIT_PS1_SHOWDIRTYSTATE=1
export GIT_PS1_SHOWUPSTREAM='verbose git'
export PS1='\[\033[1;36m\]\[\033[0m\]\[\033[1;34m\]\w\[\033[0m\] 
\[\033[1;32m\]$(__git_ps1)\[\033[0m\]\$ '

# Enable color support of ls
alias ls='ls --color=auto -alhX' 
```

# parsing - 带有重复“元标记”的解析器描述

> ID：10133174
> 
> 赞同：0
> 
> 时间：2012-04-12T23:16:58.660
> 
> 标签：parsing, bnf

是否有一种著名的解析器描述语言（如 Backus-Naur）允许从令牌流中提取重复次数的重复？对于奖励积分，是否有任何支持此语法的 C++ 库？

例子：

让我们称之为“元令牌”#，然后我正在寻找一种描述语言，它将处理以下形式的生产规则：

```
RULE = # EXPRESSION 
```

作为：

```
RULE = '1' EXPRESSION
     | '2' EXPRESSION EXPRESSION
     | '3' EXPRESSION EXPRESSION EXPRESSION
     | '4' EXPRESSION EXPRESSION EXPRESSION EXPRESSION
     | ... 
```

请注意，计数是实际的字符文字。这与[增强的 Backus-Naur 形式形成](http://en.wikipedia.org/wiki/Augmented_Backus%E2%80%93Naur_Form)对比，我们可以有以下形式的规则：

```
RULE = 2*3EXPRESSION 
```

相当于：

```
RULE = EXPRESSION EXPRESSION
     | EXPRESSION EXPRESSION EXPRESSION 
```

对 dgarant 的回应：

我不确定这就是我想要的。我正在考虑以下几点：

```
int i;

bool r = phrase_parse(first, last,
     (
       int_[ phoenix::ref(i) = _1] >> repeat(i)[/*EXPRESSION*/]
     )
     space ); 
```

更重要的是，虽然我希望有一些可以描述这个想法的正式模式。在一个侧面节点上，Spirit 确实需要一些时间来适应，但非常棒。我是一个粉丝。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:56:13.277

我想不出一种允许`rule = # EXPRESSION`指定重复在哪里`#`是字符文字的正式语言。在我看来，只要您发表评论以澄清您的意思，滥用正式语言规范应该不是问题。如果您真的想坚持标准，您可以在 ABNF 中执行以下操作：

```
rule = '3' 3EXPRESSION
     | '4' 4EXPRESSION
     | '5' 5EXPRESSION 
```

它看起来与您想要的不完全一样，但它可以完成工作。

我相信[boost::spirit::qi](http://boost-spirit.com/home/)可以满足您的解析需求。看看[重复指令](http://www.boost.org/doc/libs/1_45_0/libs/spirit/doc/html/spirit/qi/reference/directive/repeat.html)。

Spirit 将允许您编写规则，例如

```
rule = char_("'") >> int_[qi::_a = qi::_1] >> char_("'") >> repeat(qi::_a)[EXPRESSION] 
```

如果您对确定解析的重复次数感兴趣，可以将另一个操作附加到规则：`[phoenix::ref(pCt) = qi::_a]`

```
std::vector<double>& v;
int pCt;

bool r = phrase_parse(first, last,
         (
           // to parse a collection of double expressions
           char_("'") >> int_[qi::_a = qi::_1] >> char_("'") >> repeat(qi::_a)[double_[push_back(phoenix::ref(v), _1)]]
           [phoenix::ref(pCt) = qi::_a]
         )
         space);
// assuming the parse was successful
std::cout << "Parsed " << pCt << " elements" << std::endl; 
```

Spirit::Qi 解析器的风格需要一段时间来适应，但它们非常强大，因为您可以将它们直接集成到您的代码中。

# jquery - 使用 JQuery Datepick 在选择时发布表单

> ID：10133175
> 
> 赞同：1
> 
> 时间：2012-04-12T23:17:00.673
> 
> 标签：jquery, datepicker

我有一个日历，我只显示某些日期可用，其余日期禁用。我得到了我所有的日期并制作了我的日历，它显示没有问题

```
<script type="text/javascript">
    $(function() {
        $.post('/jreqlib', 
            { Action: 'GetDates',
            }, function(data) {

                var myNewDates = new Array;
                for (var x = 0; x < data['validPubDates'].length; x++) {
                    myNewDates.push(data['validPubDates'][x]);
                }
                var myValidDates = new Array;
                for (var x = 0; x<data['validPubDates'].length; x++) {
                    var theDate = data['validPubDates'][x];
                    myValidDates.push(theDate);
                }               
                $('#inlineDatepicker').datepick({
                    multiSelect: 999,
                    minDate : '-14d',
                    maxDate : '+2y',                        
                    onSelect : function (dateText, inst) {
                        //alert("Clicked');
                        //$("#FormId").click();
                        $(this).parent('form').submit();
                    },
                    onDate : getAllowed(myValidDates),
                }).datepick('setDate',myNewDates);
            }, 
        'json');            
    }); 
</script> 
```

问题是我想在单击日期时提交表单（而不是通过 ajax）。我找到了一堆帖子，但似乎没有一个有效。如果我取消注释该**“警报”** ，那么我会看到**“点击”**消息，但我发现提交表单的其他方法或 2 或 3 都没有`$("#FormId").click(); (yes the form has a id="FormId" in it)`。`$(this).parent('form').submit();`

我点击到那里，如果未注释，警报将触发，为什么表单不会提交？

（顺便说一句 - 我没有发布 getAllowed 函数，因为我认为它不相关，但如果需要我会发布）

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T23:23:34.680

尝试给表单一个 id，然后通过 jquery id 选择器调用提交：

```
<form id="myFormID">
...
$('#inlineDatepicker').datepick({
    multiSelect: 999,
    minDate : '-14d',
    maxDate : '+2y',                        
    onSelect : function (dateText, inst) {
        $('#myFormID').submit(); // <-- SUBMIT LIKE THIS
    },
    onDate : getAllowed(myValidDates),
}).datepick('setDate',myNewDates); 
```

# javascript - JS：调用一个函数需要多长时间？

> ID：10133176
> 
> 赞同：11
> 
> 时间：2012-04-12T23:17:13.000
> 
> 标签：javascript, performance, function, math, callstack

所以，我正在编写一个 2d Javascript 物理模拟。性能很好，但我正在进行优化以使其更好。因此，由于该程序适用于大量物理几何，因此我在程序中进行了几次勾股定理计算。总共大约有五次计算；它们一起运行大约每秒一百万次。所以，我认为如果我将那个简单的勾股定理代码放入一个新函数并调用它，它会提高性能；毕竟，这样浏览器的编译工作就更少了。所以，我在 Firefox 中运行代码并得到......该计算的执行时间*增加了 4000000%。*

如何？这是相同的代码：Math.sqrt(x*x+y*y)，那么将它作为一个函数添加是如何减慢它的呢？我认为原因是一个函数需要时间才能被调用，而不执行代码，并且每秒增加一百万个这样的延迟会减慢它的速度？

这对我来说似乎相当令人震惊。这也适用于预定义的 js 函数吗？这似乎不太可能，如果是这样，他们如何避免呢？

过去的代码是这样的：

```
function x()
{
    dx=nx-mx;
    dy=ny-my;
    d=Math.sqrt(dx*dx+dy*dy);
    doStuff(...
} 
```

我尝试的是这样的：

```
function x()
{
    dx=nx-mx;
    dy=ny-my;
    d=hypo(dx,dy);
    doStuff(...
}
function hypo(x,y)
{
    return Math.sqrt(x*x+y*y);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T00:19:44.530

函数调用可以忽略不计，甚至可以在 JS 从未有过的预编译语言中进行优化。除此之外，很大程度上取决于浏览器。

它们是 JS 直到最近才主要出现的解释语言中所有性能的死亡。大多数现代浏览器都有 JIT（及时）编译器，这是对过去 JS 解释器的巨大升级，但我相信对另一个范围的函数调用仍然需要一些开销，因为 JS 的调用对象必须确定实际调用的内容，这意味着在各种范围链上上下移动。

因此，作为一般规则：如果您关心 IE8 以及较低和较旧版本的 Chrome 和 Firefox，请避免函数调用期。尤其是内循环。对于 JIT 浏览器，我希望在另一个函数中定义的函数通常是有益的（但我仍然会测试，因为这对于 IE9 来说是全新的技术，对于其他所有人来说都是相对较新的技术）。

另一件需要警惕的事情。如果一个功能特别复杂，JIT 可能不会做任何事情来优化它们。

[https://groups.google.com/forum/#!msg/closure-compiler-discuss/4B4IcUJ4SUA/OqYWpSklTE4J](https://groups.google.com/forum/#!msg/closure-compiler-discuss/4B4IcUJ4SUA/OqYWpSklTE4J)

但是要理解的重要一点是，当某些东西被锁定并且仅在上下文中调用时，例如函数中的函数，JIT 应该很容易优化。在函数之外定义，它必须确定准确调用该函数的哪个定义。它可能在外部函数中。它可能是全球性的。它可能是窗口对象的构造函数原型的属性，等等......在函数是第一类的语言中，这意味着它们的引用可以像传递数据一样作为参数传递，你不能真正避免这一步在您当前的上下文之外。

所以尝试在 X 中定义 hypo 看看会发生什么。

来自解释时代的另外几个在 JIT 中可能仍然有价值的一般提示：

*   这 '。' 中的运算符`someObject.property`，是一个值得缓存的过程。它会产生开销，因为每次使用它时都会有一个关联的调用对象查找过程。我想 Chrome 不会保留这个过程的结果，因为对父对象或原型的更改可能会改变它在给定上下文之外实际引用的内容。在您的示例中，如果 x 正在被循环使用（如果 x 在与 JIT 中的循环相同的函数中定义 - 在解释器中谋杀），则可能没问题甚至有帮助，我会尝试在使用之前将 Math.sqrt 分配给 var在低。对当前函数上下文之外的东西的引用过多可能会导致一些 JIT 认为不值得麻烦优化，但这纯粹是我的猜测。

*   以下可能是循环数组的最快方法：

> ```
> //assume a giant array called someArray
> var i = someArray.length; //note the property lookup process being cached here
> //'someArray.reverse()' if original order isimportant
> while(i--){
>   //now do stuff with someArray[i];
> } 
> ```

注意：代码块由于某种原因在这里不起作用。

这样做会很有帮助，因为它基本上将递增/递减步骤和逻辑比较变成了递减，完全消除了对左/右比较运算符的需要。请注意，在 JS 中，右侧递减运算符意味着 i 被传递以进行评估，然后在块内使用之前递减。`while(0)`评估为假。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T08:44:18.333

令我惊讶的是，按照 Erik 的建议缓存查找对提高我的浏览器（Chromium、Linux）的性能没有太大帮助，但似乎反而会损害性能：http: [//jsperf.com/inline-metric-distance](http://jsperf.com/inline-metric-distance)

```
var optimizedDistance = (function () { 
    var sqrt = Math.sqrt;
    return function (x, y) { return sqrt(x * x + y * y); }
})(); 
```

比*_* _

```
var unoptimizedDistance = function(x, y) {
    return Math.sqrt(x * x + y * y);
} 
```

即使调用别名也更慢

```
var _sqrt = Math.sqrt; // _sqrt is slower than Math.sqrt! 
```

但话又说回来，这不是一门精确的科学，现实生活中的测量仍然会有所不同。

尽管如此，我还是会使用`Math.sqrt`.

# export - 将 freemind 地图集成到 Web 应用程序中

> ID：10133177
> 
> 赞同：2
> 
> 时间：2012-04-12T23:17:14.933
> 
> 标签：export, freemind

我使用该工具创建了一个思维导图，现在我想将地图嵌入到我的 Web 应用程序中。我尝试导出为 html 并将地图转换为列表。我希望能够在浏览器中查看地图，即可点击的椭圆。

除此之外，我希望能够将变量传递给将在节点文本中使用的思维导图（如用户名）。

我如何实现这些？

在此先感谢普里扬克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:27:35.523

我经常使用 freemind 退出但从未尝试过导出选项......但是如果你去帮助 - >文档......有一些有用的信息......下面的截图

![FreeMind 文档截图](../Images/bf230e976603df78ad7967ec96e78d1a.png)

# ruby - 树顶中的 SyntaxNode+[Node] 是什么意思？（红宝石）

> ID：10133178
> 
> 赞同：0
> 
> 时间：2012-04-12T23:17:20.703
> 
> 标签：ruby, treetop

我已经使用树顶定义了一种语法，并且大多数值都可以很好地解析，但有些看起来像

```
Response+Isupport1 offset=0, "...orted by this server" (host,space1,space2,nickname,space3): 
```

... 和 ...

```
...
SyntaxNode+Isupport0 offset=52, "WATCH=128 " (token,space):
    SyntaxNode+Token0 offset=52, "WATCH=128" (parameter,equals,value):
    ... 
```

SyntaxNode+[Node] 是什么意思？如何修复它以使其正常工作？因为现在，这些节点具有 SyntaxNode 类，而不是 Token 类（这使它们成为通用的并且不符合我的需要）。

据我所知，定义`(token space)+`是造成这种情况的原因（不知道为什么）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T00:41:44.147

您的问题非常不完整，这可能是它没有得到回答的原因，但是作为编写产生上述显示的检查实现的人，我可能会有所启发。Treetop 创建 SyntaxNodes（或不同类的实例，如果您要求），然后使用包含您的代码的 mixin 模块来扩充它们。您可以将多个模块混合到单个节点中，因为仅调用一个子规则的规则可以将新模块添加到该子规则返回的节点。每种类型都包含一个以 { 开头的代码块，您将获得一个新模块。每条检查行末尾带括号的有趣方法列表来自这些 mixin。

但是，至于为什么您的语法不起作用，您必须向我们展示您的输入和预期的解析结果才能得到答案。

# android - 返回蓝牙设备的 RSSI 值时出现问题

> ID：10133187
> 
> 赞同：0
> 
> 时间：2012-04-12T23:18:19.017
> 
> 标签：android, bluetooth

我正在使用 Eclipse 开发一个 Android 应用程序来返回蓝牙设备的 RSSI 值。我已经修改了 Android 蓝牙聊天示例以满足我的需要，但是我在返回 RSSI 值时遇到了问题。点击`Scan`按钮以发现附近的设备后，它返回设备名称、设备地址，并且还假设返回 RSSI 值，但它`null`显示的是 RSSI。

```
private final BroadcastReceiver mReceiver = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        // When discovery finds a device
        if (BluetoothDevice.ACTION_FOUND.equals(action)) {
            // Get the BluetoothDevice object from the Intent
            BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
           // Get the Bluetooth RSSI
            short Rssi = intent.getShortExtra(BluetoothDevice.EXTRA_RSSI,Short.MIN_VALUE);
            // If it's already paired, skip it, because it's been listed already
            // Added getRssi()
            if (device.getBondState() != BluetoothDevice.BOND_BONDED) {
                mNewDevicesArrayAdapter.add(device.getName() + "\n" + device.getAddress() + getRssi());
            }
        // When discovery is finished, change the Activity title
        } else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)) {
            setProgressBarIndeterminateVisibility(false);
            setTitle(R.string.select_device);
            if (mNewDevicesArrayAdapter.getCount() == 0) {
                String noDevices = getResources().getText(R.string.none_found).toString();
                mNewDevicesArrayAdapter.add(noDevices);
            }
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:15:15.917

我意识到这已经很晚了，但是，在这条线上， `mNewDevicesArrayAdapter.add(device.getName() + "\n" + device.getAddress() + getRssi());` 你不应该说`getRssi();` It should be your variable `Rssi`。无论如何，这就是我获得RSSI值的方式..

# mysql - mysql bug 数据库错误

> ID：10133190
> 
> 赞同：0
> 
> 时间：2012-04-12T23:18:44.153
> 
> 标签：mysql

为什么当我在数据库中搜索一行时，结果为 0？事实上，当我手动查看时，有些行符合我的搜索条件，但搜索按钮无法正常工作。就是这样

![在此处输入图像描述](../Images/c733769032e4519ba2a92774933828b5.png)

您可以看到其中包含“0000-00-00 00:00:00”的行，但是当我使用搜索功能时，结果如下：

![在此处输入图像描述](../Images/3981d1713ab17c2c8cd38acef19cc1bb.png)

请注意，我在“AcctStopTime”的正确字段中输入它。

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T23:22:06.960

您正在搜索`LIMIT 30 , 30`.

如果总共少于 30 个结果，这将导致没有结果。试试`LIMIT 0 , 30`吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T23:25:30.307

如果你分析你的查询，你可以看到`LIMIT 30, 30`。

它说的是，从第 30 个位置提取 30 行。因此，如果您没有超过 30 条记录，那么您的查询将返回一个空集。

您可能要检查的下一件事是`WHERE`条件

如果给定的值不匹配任何字段，它也不会返回任何记录。

# asp.net-mvc - 更新操作问题

> ID：10133192
> 
> 赞同：0
> 
> 时间：2012-04-12T23:19:48.973
> 
> 标签：asp.net-mvc, entity-framework

这是我的更新操作：

```
 public void etat(string id)
    {

            Models.J2VEntities entity = new Models.J2VEntities();

            Models.user model = (from p in entity.user
                                 where p.iduser == id
                                 select p).SingleOrDefault();

            model.IsActive = !(model.IsActive);
            entity.user.AddObject(model);
            entity.ObjectStateManager.ChangeObjectState(model, System.Data.EntityState.Modified);
            entity.SaveChanges();
            RedirectToAction("Index", "Admin");
    } 
```

当我执行时，我得到了这个错误：

> System.InvalidOperationException：ObjectStateManager 中已存在具有相同键的对象。现有对象处于已修改状态。如果在状态中添加对象，则可以将其添加回 ObjectStateManager。

在这一行：`entity.user.AddObject(model);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:24:07.600

试试这个：

```
public void etat(string id){
 using( var entity = new Models.J2VEntities()){
    Models.user model = (from p in entity.user
                             where p.iduser == id
                             select p).SingleOrDefault();
    model.IsActive = !(model.IsActive);
    entity.user.Attach(model);
    entity.Entry(model).State = EntityState.Modified;
    entity.SaveChanges();
 }
} 
```

这`using`将确保您的连接被正确处理和关闭，以确保您没有内存泄漏或不需要的打开连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T22:17:36.547

以这种方式爱戴：

```
using (var entity = new Models.J2VEntities())
            {
                Models.user model = (from p in entity.user
                                     where p.iduser == id
                                     select p).SingleOrDefault();
                model.IsActive = !(model.IsActive);
                entity.user.ApplyCurrentValues(model);
                entity.SaveChanges();
            } 
```

# php - php没有重定向

> ID：10133193
> 
> 赞同：0
> 
> 时间：2012-04-12T23:19:58.987
> 
> 标签：php, javascript, ajax

我正在尝试编写网站的注销。当我这样做时，我希望页面重定向到登录页面。我认为我以正确的方式进行操作，但无法获得正确的结果。你们能指出我正确的方向吗？

相关代码：

```
<button onclick="logout()">Logout</button>

function logout()
{
var xmlhttp;
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
document.location=xmlhttp.responseText;
}
}
xmlhttp.open("GET","logout.php",true);
xmlhttp.send();
}

<?php
session_destroy();

header("Location:http://localhost:8888/loginns.html");

mysql_close($con);
?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:23:09.153

您正在向页面发送 ajax 请求。**但是**你在 PHP 脚本中重定向。那将没有**任何效果**。

您应该在 ajax 请求之后在 JavaScript 中重定向，例如

```
window.location = 'http://localhost:8888/loginns.html'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T23:23:13.183

不要进行 AJAX 调用。您正在对注销页面进行 AJAX 调用。PHP 将返回字符串作为响应。对 logout.php 进行标准调用，您的代码将正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T23:25:23.127

好吧，您那里没有重定向代码，例如：

```
window.location.replace("/login"); 
```

如果您打算做更多的 Ajax，也可能想要使用 MooTools 或 jQuery 等库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T23:39:23.730

这给了我一个借口来发布我最喜欢的 PHP 脚本，永远。它的内心是超级恶魔……但它是一个有着金子般心的妓女，真的……</p>

```
<?php   
    $cloaked = 'http://whereYouWantThemToGo.com';
    $real[] = 'http://whereTheyveBeenGoing.com';
    $location = $cloaked;
    header('Location: '.$location); 
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T23:49:41.590

为什么不直接将用户带到 logout.php `<a href="logout.php">Logout</a>`

```
#logout.php
session_unset();
session_destroy();
header('Location: login.php'); 
```

# reverse - 反模算子

> ID：10133194
> 
> 赞同：42
> 
> 时间：2012-04-12T23:20:00.933
> 
> 标签：reverse, modulus

**在提出问题 3 年后，我找到了解决方案。我已将其作为[答案](https://stackoverflow.com/a/31735393)。**

我有一个带有模数的表达式，需要用 x 表示。

(a + x) 模 m = b

我不知道如何处理模数。有没有办法自己得到 x，或者我在这个上不走运？

**编辑**：我意识到我可以得到多个答案，但我正在寻找一个在 m 范围内的答案。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-07-30T22:52:00.623

我正在重新审视这个问题，并意识到这可能基于@Gorcha 给出的答案。

```
(a + x) mod m = b  
a + x = nm + b  
x = nm + b - a for some integer n 
```

我不知道为什么我之前没有意识到，但是可以通过将 n 设置为 0 来得出解决方案。

然后我的问题的答案似乎是`x = b - a`，尽管在示例`(26 + x) mod 29 = 3`中结果是 -23，它小于 m。用 29 将 -23 恢复到预期范围内，得到 6。虽然问题中没有指定，但它给出了一个介于 0 和 m 之间的值。

那么最终的解决方案就变成了：`x = (b - a) mod m`

IE

```
(26 + x) mod 29 = 3
x = (3 - 26) mod 29
x = -23 mod 29
x = 6 
```

这使 x 在 0 到 m 的范围内。检查将显示`(26 + 6) mod 29 = 3`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-18T04:48:21.490

您无法确定 x，但我们可以进一步了解运算符的定义。

```
x mod y = z if x = ny + z for some integer n, where 0 <= z < y 
```

所以在你的情况下：

```
(a + x) mod m = b
a + x = nm + b
x = nm + b - a for some integer n 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-12T23:24:30.713

是的。你完蛋了。

例子：

```
5 mod 3 = 2
8 mod 3 = 2 
```

那么逆模2是什么？8个还是5个？还是 11？还是无数其他数字？

Inverse mod 是一种关系，如果你试图追求这个，你就会开始接触更棘手的数学。如果你在 haskell 中，你可以很容易地用非确定性建模它（可能答案的无限列表）

此外，这不是一个真正的编程问题。查看数学交流。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-07T20:24:36.830

如果我们有，我有这个方程来反转模数

```
(var1 +var2) mod num=Res 
```

然后得到

```
var1= num-((Res-var2)*-1) 
```

例如`25+5mod26=4`

```
var1=26-((4-5)*-1)
var1=26-1
var1=5 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T23:25:16.873

这个方程的棘手之处在于，即使你知道 a、m 和 b，你也无法最终算出 x。

例如，假设您的方程式是：

```
(2 + x) % 4 = 3 
```

x 可以是 1、5、9、13 等。

这意味着你运气不好，没有办法自己得到 x。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-26T18:04:48.973

使用`@Subhi Anyman`答案作为参考（稍作修改），如果我们有这个方程来反转模运算

```
 (var1 + var2) mod num = Res 
```

然后要获得`var1`，我们使用以下

```
var1 = num - ((Res - var2) * -1)
if (var1 > num) {
   var1 = var % num;          // making sure var1 is in range of 'num'
} 
```

# c - 将文本文件输出到屏幕

> ID：10133201
> 
> 赞同：-2
> 
> 时间：2012-04-12T23:20:54.917
> 
> 标签：c

我需要制作一个“搜索和替换”程序。它不必在输入文件中进行更改，而只需对屏幕进行更改。

例子：

```
file: foo pap ran bar foo. Nam foo!

replace:  foo >with> bar

output to screen: bar pap ran bar bar. Nam bar!` 
```

有谁知道我该怎么做？我是C的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:44:13.023

首先编写一个程序，该程序读取一行文本（假设该行剩余的字符数超过 1000 个字符，这很容易）并将其写回。

一旦你有这个工作，在该行中寻找一个文本字符串（例如“foo”），并用相似数量的容易看到的字符替换它（例如用XXX替换foo）。

然后从他们那里拿走。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:57:11.097

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

long GetFileSize(FILE *fp){
    long fsize = 0;

    fseek(fp,0,SEEK_END);
    fsize = ftell(fp); 
    fseek(fp,0,SEEK_SET);//reset stream position!!

    return fsize;
}

int main(int argc, char **argv){
    char *file, *sword, *rword, *buff, *wp,*bp;
    int len;
    long fsize;
    FILE *inpFile;

    if(argc != 4){
        fprintf(stderr, "Usage:rep filePath originalWord replaceWord\n");
        exit(EXIT_FAILURE);
    }
    file  = argv[1];
    sword = argv[2];
    rword = argv[3];
    if(NULL==(inpFile=fopen(file, "rb"))){
        perror("Can't open file");
        exit(EXIT_FAILURE);
    }
    fsize = GetFileSize(inpFile);
    buff=(char*)malloc(sizeof(char)*fsize+1);
    fread(buff, sizeof(char), fsize, inpFile);//file all read into buff
    fclose(inpFile);
    buff[fsize]='\0';
    bp=buff;
    len = strlen(sword);
    while(NULL!=(wp=strstr(bp, sword))){
        while(bp != wp)
            putchar(*bp++);
        printf("%s",rword);
        bp+=len;
    }
    if(bp) printf("%s", bp);
    free(buff);
    return 0;
} 
```

# iphone - 应用程序重新启动时取消由 applicationDidEnterBackground 启动的任务

> ID：10133204
> 
> 赞同：1
> 
> 时间：2012-04-12T23:21:06.533
> 
> 标签：iphone, ios

当我关闭我的应用程序时，我会在 applicationDidEnterBackground 中触发从服务器下载一些数据的代码。在某些情况下，这可能需要一分钟。如果用户在此期间重新打开应用程序，它将停留在初始屏幕上，直到下载完成。重新打开应用程序时有没有办法取消下载？

我尝试使用 applicationDidEnterBackground 中的 performSelectorInBackground 在后台运行下载代码，但在重新打开应用程序之前它不会开始运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T00:00:51.170

重新打开应用程序时有没有办法取消下载？

如果您正在使用 NSConnection 进行异步下载，您可以向连接对象发送取消消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T23:33:03.347

在应用程序进入后台后，您不允许长时间运行昂贵的任务，但您正在寻找的是：

[http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/beginBackgroundTaskWithExpirationHandler](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/beginBackgroundTaskWithExpirationHandler)：

# java - Uri字符串在android中没有缓存

> ID：10133208
> 
> 赞同：1
> 
> 时间：2012-04-12T23:21:13.400
> 
> 标签：java, android, eclipse

大家好，

我正在使用以下代码。

```
 String fileName = "image" + "_" + title.getText().toString()+"_" + val.toString(); 
                photo = this.createFile(fileName, ".jpg");
                intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
                uriOfPhoto = Uri.fromFile(photo);
                startActivityForResult(intent, RESULT_CAMERA_SELECT);
            }
        }
        catch(Exception e)
        {
            Log.v("Error", "Can't create file to take picture!");
            displayAlert("Can't create file to take picture!","SDCard Error!");
        }
    }

    private File createFile(String part, String ext) throws Exception
    {
        File tempDir = new File (Environment.getExternalStorageDirectory() + "/MyFolder/Images");
        if(!tempDir.exists())
        {
            tempDir.mkdir();
        }
        tempDir.canWrite();
        return new File(tempDir, part+ext);
    }
}); 
```

这`UriOfPhoto`让我`uriString`在调试中没有受到影响。它没有存储文件的uri。我该如何解决这个问题。

```
authority   Uri$Part$EmptyPart  (id=830004244032)   
fragment    Uri$Part$EmptyPart  (id=830004245408)   
host    "NOT CACHED" (id=830003914304)  
path    Uri$PathPart  (id=830067926736) 
port    -2  
query   Uri$Part$EmptyPart  (id=830004245408)   
scheme  "file" (id=830002660688)    
ssp null    
uriString   "NOT CACHED" (id=830003914304)  
userInfo    null 
```

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T00:07:26.680

这还不够信息。你对你发送的意图采取了什么行动？您确定 createFile 实际上创建了一个文件吗？

您提供的错误列表不是很有用。它是调试变量值列表的一部分吗？如果是这样，当您查看这些值时，您在代码中的什么位置？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T02:35:42.987

```
String fileName = Environment.getExternalStorageDirectory() + "/MyFolder/Images" + fileName + ".jpg";
UriOfPhoto = Uri.parse(fileName);
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.putExtra(MediaStore.EXTRA_OUTPUT,  UriOfPhoto);
startActivityForResult(intent, RESULT_CAMERA_SELECT); 
```

也不需要为存储照片创建文件，您只需传递照片必须在上面的 uri，Android 操作系统就像您尝试做的那样创建一个文件，并将捕获的图像存储在该 uri 中。

# html - 如何处理 HTML5 Canvas 在平板电脑上使用捏合缩放？

> ID：10133213
> 
> 赞同：6
> 
> 时间：2012-04-12T23:21:42.513
> 
> 标签：html, canvas, touch, tablet

我一直在做一些研究并阅读以下场景：

设想：

*   用户以捏合放大画布元素的方式触摸屏幕。
*   画布元素现在在缩放后占据视口宽度和高度的 100%。
*   用户现在无法在不点击后退按钮的情况下取消缩放或将自己从该状态中移除。画布使用捏合缩放。

我们的 Web 应用程序的设计规范需要能够在包含画布的页面上进行捏合缩放。因此，[在平板电脑上禁用用户可扩展性的建议最佳实践](http://www.html5rocks.com/en/mobile/touch/#toc-foo)不适用于我的场景。

*   在概念上是否可以将多点触控“捏合缩放”事件从画布元素冒泡到浏览器/平板电脑？
*   除了：
    *   画布上不可见的 div 覆盖。禁用所有用户交互，但支持双指缩放。
    *   不知何故，提供了一种不涉及手势的取消缩放方式，以便用户可以摆脱上述场景。

# android - 我想创建一个仅将其内容复制到 SD 卡的简单 APK

> ID：10133216
> 
> 赞同：0
> 
> 时间：2012-04-12T23:21:54.430
> 
> 标签：android, zip, apk, sd-card

我想获取一些 zip 文件 - file1.zip file2.zip file3.zip 等并创建一个包含它们的 APK 文件，安装后只需将它们复制到手机 sd 卡上的指定目录。

这可以在几行代码中完成吗？我真的很感激任何意见。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T00:03:42.357

您在 res/raw 中放置的任何内容都可以作为您在安装应用程序后使用的资源。我很好奇为什么你想将 zip 文件移动到设备上而不需要一个“真正的”应用程序来配合它们。

# actionscript-3 - 在 AIR 中加载本地 SWF

> ID：10133219
> 
> 赞同：1
> 
> 时间：2012-04-12T23:22:10.343
> 
> 标签：actionscript-3, apache-flex, actionscript, air, flex3

我希望能够在 AIR 桌面应用程序中加载本地 SWF。SWF 文件位于用户硬盘驱动器上的应用程序本身之外。

我正在使用的代码如下：

```
var loader:Loader = new Loader();
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onCompleteHandler);
loader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, onProgressHandler);
loader.load(new URLRequest("/Users/Oliver/Documents/sample.swf")); 
```

该文件确实存在。我可以在 Unix 中使用以下命令测试它的存在：

`$ ls /Users/Oliver/Documents/sample.swf`

但是，应用程序抛出错误：

`Error #2044: Unhandled IOErrorEvent:. text=Error #2035: URL Not Found.`

如果我尝试从 Web 位置（例如`http://127.0.0.1/sample.swf`）加载相同的文件，则加载成功。

我知道 AIR 可以加载本地和远程文件。不是这样吗？具有讽刺意味的是，在我的应用程序的其他地方，我正在从本地文件系统读取、写入和删除任意文件而没有问题。但我无法加载它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T23:30:34.867

我相信问题出在你的道路上。尝试使用 File 类来获取您的 swf 的路径。

```
var f:File = File.documentsDirectory
f = f.resolvePath("sample.swf");
/* ----- */

loader.load(new URLRequest(f.url)); 
```

# javascript - JavaScript - 遍历所有标签，为每个标签添加一个 onclick

> ID：10133222
> 
> 赞同：3
> 
> 时间：2012-04-12T23:22:44.123
> 
> 标签：javascript

我有一个指向图像的链接列表，以及一个 js 函数，它接受一个（图像的）URL，并在调用该函数时将该图像放在页面上。

我最初是为每个 a 添加一个内联 onlick="showPic(this.getAttribute('href'))" ，但我想分离出内联 js。这是我在页面加载时为每个标签添加 onclick 的函数：

```
function prepareLinks(){
var links = document.getElementsByTagName('a');
for(var i=0; i<links.length; i++){
    var thisLink = links[i];
    var source = thisLink.getAttribute('href'); 
    if(thisLink.getAttribute('class') == 'imgLink'){
        thisLink.onclick = function(){
            showPic(source);
            return false;
        }
    }
}
}

function showPic(source){
var placeholder = document.getElementById('placeholder');
placeholder.setAttribute('src',source);
}

window.onload = prepareLinks(); 
```

...但每次调用 showPic 时，源变量都是最后一张图像的 href。我怎样才能让每个链接都有正确的点击？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T23:25:10.580

JavaScript 没有块作用域，因此封闭变量最终是最后分配给它的任何内容。您可以通过将其包装在另一个闭包中来解决此问题：

```
function prepareLinks() {
    var links = document.getElementsByTagName('a');
    for(var i = 0; i < links.length; i++) {
        var thisLink = links[i];
        var source = thisLink.getAttribute('href'); 
        if(thisLink.getAttribute('class') == 'imgLink') {
            thisLink.onclick = (function(source) {
                return function() {
                    showPic(source);
                    return false;
                };
            })(source);
        }
    }
} 
```

当然，您可以使这个更简单并使用`this`：

```
function prepareLinks() {
    var links = document.getElementsByTagName('a');

    for(var i = 0; i < links.length; i++) {
        var thisLink = links[i];

        if(thisLink.getAttribute('class') == 'imgLink') {
            thisLink.onclick = function() {
                showPic(this.href);
                return false;
            };
        }
    }
} 
```

我相信这会破坏与 IE5 或 IE6 的兼容性，但希望你不关心其中任何一个 =)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T23:31:49.710

Minitech 的答案应该可以解决您的问题，即该`source`变量由您的所有 onclick 处理程序共享

您这样做的方式非常浪费，无需为每个链接设置单独的处理程序。此外，如果动态添加任何链接，它将不起作用。事件委托是要走的路。

```
function interceptLinks() {
   // Bad way to set onclick (use a library)
   document.onclick = function() {
     if (this.tagName.toUpperCase() != 'A' ) {
       return;
     }
     // Bad way to check if it contains a class (use a library)
     if (this.getAttribute('class') == 'imgLink') {
       showPic(this.getAttribute('href'));
       return false;
     }
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T13:40:32.213

Thanks for all the replies. Turns out I had diagnosed the problem incorrectly, sorry. Actually using a new var and annon. function to add an onclick on each loop iteration works (the passed href is correct). It was not working because I was getting at the a-tags by the "imgLink" class which I had removed from the HTML when I removed the inline onclick handlers (I get them with an ID on a parent now). Also I needed to use "return !showPic(this.href);" to stop the link being followed normally when clicked.

Working code:

```
function showPic(source){
var placeholder = document.getElementById('placeholder');
placeholder.setAttribute('src',source);
return true;
}

function prepareLinks() {
if(!document.getElementById('imgLinks')){ return false; };
var galLinks = document.getElementById('imgLinks');
var links = galLinks.getElementsByTagName('a');
for(var i=0; i<links.length; i++) {
    var thisLink = links[i];
    thisLink.onclick = function() {
        return !showPic(this.href);
    };
}
}

window.onload = function(){
prepareLinks();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T23:27:09.387

这是访问外部变量的循环内部的事件处理程序的古老问题。

您的`source`变量在事件发生时从范围链中拉出，到那时，由于迭代已完成`click`，它已被设置为最后一个属性。`href`

您需要通过做两件事之一来打破封闭。

最简单但不受许多浏览器支持的是使用`let`它可以让您使用块范围。

```
let source = thisLink.getAttribute('href'); 
```

[js小提琴](http://jsfiddle.net/zcvd2/)。它适用于 Firefox，但不适用于 Chrome。

在 2038 年，当我们处理[2038 年问题](http://en.wikipedia.org/wiki/Year_2038_problem)并且所有浏览器都实现了 ES6 时，这将是*解决*这个问题的标准方法。

一个更难理解和实现兼容所有浏览器的方法是用一种模式打破闭包，例如......

```
thisLink.onclick = (function(src) {
  return function(){
            showPic(src);
            return false;
        }
})(source); 
```

[js小提琴](http://jsfiddle.net/H6LYj/)。

# php - 数组内部的PHP函数？

> ID：10133230
> 
> 赞同：1
> 
> 时间：2012-04-12T23:23:50.123
> 
> 标签：php, arrays, function

这是我到目前为止所拥有的：

```
$arrayPrices = array(
    translate($lang_type, "A/C System Evaluation") => "19.95",
    translate($lang_type, "A/C Evaluation & Recharge") => "99.00"
); 
```

我的**翻译功能**是：

```
function translate($to_lan, $text) {
if($to_lan == "en") {

    return $text;

} else {

    $translate_feed = @file_get_contents('http://api.microsofttranslator.com/v2/Http.svc/Translate?appId=' . BING_APPID . '&text=' . urlencode($text) . '&from=en&to=' . $to_lan . '');
    $translate = simplexml_load_string($translate_feed);

    return ($translate_feed === false) ? $text : $translate[0];
   }
 } 
```

出于某种原因，我无法在我的 PHP 数组中显示该翻译功能。

如果我输入`echo translate($lang_type, "A/C System Evaluation");` 它就可以正常工作并翻译。但是当在该数组中使用时，它只会返回空白。

有谁知道我能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T23:28:49.617

来自[PHP 数组文档](http://php.net/manual/en/language.types.array.php)：

> 键可以是整数或字符串。该值可以是任何类型。

首先将您的密钥放入字符串变量中，例如：

```
$var1 = translate($lang_type, "A/C System Evaluation");
$var2 = translate($lang_type, "A/C Evaluation & Recharge");

$arrayPrices = array(
    "$var1" => 19.95
    "$var2" => 29.95
); 
```

那应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T23:29:24.290

这个工作：

```
$arrayPrices[translate($lang_type, "A/C System Evaluation")]= "19.95";
$arrayPrices[translate($lang_type, "A/C Evaluation & Recharge")] = "99.00"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T23:46:27.510

我认为您希望能够广泛地添加到该产品列表中，而不必大量使用临时变量。这是我在阵列上进行后处理运行的情况之一，如下所示：

```
$arrayPrices = array(
    "A/C System Evaluation" => "19.95",
    "A/C Evaluation & Recharge" => "99.00",
    // ... etcetera ...
);

$keys = array_keys( $arrayPrices );    
foreach( $keys as $keyText )
{
    $translatedKeyText = translate($lang_type, $keyText);
    if ( $translatedKey != $keyText )
    {
        $arrayPrices[$translatedKeyText] = $arrayPrices[$keyText];
        unset( $arrayPrices[$keyText] );
    }
} 
```

如果您使用临时变量，则必须为原始数组的每个新条目添加逻辑。这对我来说听起来像是一个维护麻烦。

# wpf - 视图模型中的参数化构造函数不起作用

> ID：10133231
> 
> 赞同：0
> 
> 时间：2012-04-12T23:23:51.620
> 
> 标签：wpf

我有一个小问题。在我看来，模型参数化构造函数不起作用。在调试时，我观察到默认构造函数被命中，但它从未触发我的参数化构造函数。我怎样才能让我的参数化构造函数工作？

```
public EmployeeRequestViewModel(IEventAggregator eventAggregator, IContextManager contextmanager):this()
    {
        _contextmanager = contextmanager;
        _eventAgg = eventAggregator;
        _eventAgg.GetEvent<EmployeeEvent>().Subscribe(EventTask);
    }

    public EmployeeRequestViewModel()
    {
        LoadEmpRequest();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:26:19.583

如果您没有使用参数化构造函数的代码，它当然不会被命中。或者，如果执行的代码从未自行执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T00:28:11.617

因为您正在传递一个事件聚合器，所以我假设您正在使用 Prism。

Prism 的 Unity 是贪婪的。当您解析依赖项时，Unity 会找到它可以解析的最大构造函数，然后使用它创建对象。如果您只使用默认构造函数，那么我会检查您是否已`IContextManager`在 UnityContainer 中注册了该类型。

# jquery - 如何使此 JQuery 代码更高效

> ID：10133234
> 
> 赞同：0
> 
> 时间：2012-04-12T23:24:14.863
> 
> 标签：jquery

（JQuery 新手）我有一个列表，其中包含大约 20 个在页面加载时需要禁用的元素。元素列表包含所有 HTML <input> 元素，每个元素都有不同的 ID，遵循一般命名约定。

```
 $('#rmX\\.val').prop("disabled",true);
        $('#rmX\\.unit').prop("disabled",true);
        $('#rmX\\.ba').prop("disabled",true);
        $('#rmX\\.sms\\.opt').prop("disabled",true);
        $('#rmX\\.sms\\.val').prop("disabled",true);
        $('#rmX\\.sms\\.car').prop("disabled",true);
        $('#rmX\\.em\\.opt').prop("disabled",true);
        $('#rmX\\.em\\.val').prop("disabled",true);
        $('#rmX\\.off\\.opt1').prop("disabled",true);
        $('#rmX\\.off\\.opt2').prop("disabled",true);
        $('#rmX\\.off\\.val').prop("disabled",true);
        $('#rmZ\\.end\\.vald').prop("disabled",true);
        $('#rmZ\\.end\\.valw').prop("disabled",true);
        $('#rmZ\\.end\\.valm').prop("disabled",true);
        $('#rmZ\\.end\\.valy').prop("disabled",true);
        $('#rmZ\\.date').prop("disabled",true);
        $('#rmZ\\.time').prop("disabled",true);
        $('#rmZ\\.ap').prop("disabled",true);
        $('#evt\\.sec\\.opt2').prop("disabled",true);
        $('#evt\\.sec\\.val21').prop("disabled",true);
        $('#evt\\.sec\\.val22').prop("disabled",true); 
```

有没有办法让这个列表更有效率，或者这就是你要做的方式。

（PS。很惊讶没有可用的“最佳实践”标签。）

编辑：将“隐藏”从原始问题更改为“禁用”，如我的代码中所示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T23:28:10.590

为什么不给你想要禁用`canBeDisabled`的所有元素添加一个类？`#evt`

```
$("#evt .canBeDisabled").prop("disabled", true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T23:41:56.520

另一种方法是，如果将字段分组在一起，您可以使用父对象，例如 div 或更好的字段集。

有关快速而肮脏的示例，请参见此[小提琴](http://fiddle.jshell.net/BpC6w/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T23:34:14.267

您可以将这些字符串存储在数组中：

```
var arr = [ '#rmX\\.val', '#rmX\\.unit', ... ]; 
```

接着：

```
$.each( arr, function ( i, val ) {
    $( val ).prop( 'disabled', true );
}); 
```

这不会提高效率，但它消除了代码重复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T23:30:58.387

添加一个类，然后这样做：

```
$('.hideClass').hide(); 
```

（或者）

```
$("#rmX\\.val, #rmX\\.unit, #rmX\\.ba, #rmX\\.ba").hide(); 
```

# jquery - JQuery DataTables 链接项

> ID：10133238
> 
> 赞同：1
> 
> 时间：2012-04-12T23:24:49.530
> 
> 标签：jquery, jquery-datatables

我正在尝试链接特定列中的项目，但每个项目都将链接`id`到与 json 字符串不同的位置。不幸的是，我找不到使用 API 的方法（我知道有很多方法可以在不使用 API 的情况下做到这一点），但我正在寻找一种方法来链接列中的项目（每个带有特定链接`id`）。

所以这是我的代码，我用来`getJSON`从服务器获取 JSON，并将数据从这个 JSON 加载到表中，如下所示：

```
$.getJSON("http://url.from/method?parameter=foo&callback=?", function(data)
    {
        var total = 0;
        $("#table_body").empty();
        var oTable = $('#mytable').dataTable(
            {
                "sPaginationType" : "full_numbers",
                "aaSorting": [[ 0, "asc" ]]
            }); 

        oTable.fnClearTable();

        $.each(data, function(i, item) 
        {
            oTable.fnAddData(
                [
                    item.contact_name,
                    item.contact_email
                ]
            );
        });
    }); 
```

我想要做的是，对于每一行，将 链接`contact_name`到它的`id`，它也在 JSON 中，并且可以在这个`$.each`循环中使用`item.contact_id`.

有没有办法使用 DataTables API 来做到这一点，如果是的话，你能解释一下并提供一个很好的资源来帮助我吗？

**OBS：我正在使用 JSONP**

谢谢。

* * *

**用我的新代码更新：**

现在的错误是，当我点击时我得到了 id，但由于我正在处理`$.each`循环内的行，对于我点击的任何行，它总是会得到`id`最后处理的行。

```
var options = 
        {
            "sPaginationType" : "full_numbers",
            "aaSorting": [[ 0, "asc" ]],
            "aoColumns": [{
                "sTitle": 'Name',
                "sClass": "dtName",
            }, {
                "sTitle": 'Email',
                "sClass": "dtEmail",
            }, {
                "bVisible": false
            }],
        }

        var oTable = $('#table').dataTable(options); // Creates a new instance of the DataTable

        oTable.fnClearTable();

        $.each(data, function(i, item) 
        {

            oTable.fnAddData(
                [
                    item.contact_name , 
                    item.contact_email,
                    item.contact_id
                ]
            );

            var rowData = oTable.fnGetData(i); // fetch all the ids into this array
            $('#table tbody tr').click( function() 
            {
                window.location.href = "/panel/contacts/"+rowData[2];
            });
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T23:51:13.867

试试看：

```
var options = {
    "sPaginationType" : "full_numbers",
    "aaSorting": [[ 0, "asc" ]],
    "aoColumns": [{
        "sTitle": 'Name',
        "sClass": "dtName",
    }, {
        "sTitle": 'Email',
        "sClass": "dtEmail",
    }, {
        "bVisible": false
    }],
}
var oTable = $('#mytable').dataTable(options); 
```

此表**不会显示 id 列**，**但您可以**像以下代码一样获取它：

```
var rowData = oTable.fnGetData(rowNode); 
```

**或者**

```
var rowData = oTable.fnGetData(0); // for the first one

console.log(rowData[0]); 
```

您无法通过 jQuery 获取它，因为它没有显示出来。

**编辑：**对不起，我忘了一件事，当您使用 AddData 时，将 item.contact_id 放在第三位：

```
oTable.fnAddData([
    item.contact_name,
    item.contact_email,
    item.contact_id
]); 
```

如果你想在点击事件上获取 id，请执行以下操作：

```
jQuery('#mytable tbody tr').live('click', function() {
    var selectedRow = oTable.fnGetData(this),
        url = "/yourUrl/" + selectedRow[2];

    window.location.replace(url);
}); 
```

# php - Loader 没有从 php 中引入变量

> ID：10133240
> 
> 赞同：-3
> 
> 时间：2012-04-12T23:24:56.980
> 
> 标签：php, actionscript-3, variables, classloader

我遇到了将变量从 php 传递到 flash 文件的问题。它在 Flash 环境中运行良好，但是当我将文件移动到服务器上的实际页面时，加载程序似乎没有返回任何值。任何建议可能会导致什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T00:32:06.640

你没有提供任何代码，所以这些是我的猜测：

*   您尚未向要从中请求信息的服务器添加[跨域策略。](http://www.adobe.com/devnet/articles/crossdomain_policy_file_spec.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T08:38:56.610

我没有发布代码的原因是它有点多......

谢谢你们的帮助

在主文档中：

```
function enterLogin(e:MouseEvent):void{
        if(myLogin.inpt_userName.text==""||myLogin.inpt_password.text==""){
        dtf_messenger.text="Please input your username and password.";
        }else{
            dispatchData(myLogin.inpt_userName.text,myLogin.inpt_password.text);
        dtf_messenger.text="First login stage completed.";
        }
}

function dispatchData(userName:String, userPass:String){
        mySendVars.username=userName;
        mySendVars.userpassword=userPass;
        myPostman = new postman(myScriptURL, myDataType, mySendVars);
        myPostman.addEventListener(Event.COMPLETE, showFeedback);
        dtf_messenger.text="Second login stage completed.";
}

function showFeedback(e:Event):void{
dtf_messenger.text="Third login stage completed";
        myGift=e.target.delivery;

} 
```

我的邮递员班：

包裹 {

```
import flash.display.MovieClip;
import flash.events.*;
import fl.data.DataProvider;

// classes for server script connection
import flash.net.URLVariables;
import flash.net.URLRequest;
import flash.net.URLRequestMethod;
import flash.net.URLLoader;
import flash.net.URLLoaderDataFormat;
import flash.events.IOErrorEvent;

public class postman extends MovieClip{

    public static const VARIABLES:String = "variables";
    public static const TEXT:String = "text";
    public static const BINARY:String = "binary";
    public static const XML_DATA:String = "XML";

    private var myRequest:URLRequest;
    private var myVars:URLVariables;
    public var phpVars:URLVariables;
    private var myLoader:URLLoader;
    private var labelDataType:String;

    public var delivery:Object;
    public var error:Boolean;
    public var boxContent:DataProvider = new DataProvider();

    public function postman(theURL:String, theDataType:String="delivery.VARIABLES", theSendObject:Object=null) {

        myVars = new URLVariables(); // this holds variables to send (as dynamic properties)
        if (theSendObject) {
            for (var i in theSendObject) {
                myVars[i] = theSendObject[i];
            }
        }

        myRequest = new URLRequest();// this prepares the request for the loader
        myRequest.url=theURL;
        myRequest.method=URLRequestMethod.GET;
        myRequest.data=myVars;

        myLoader=new URLLoader();
        myLoader.dataFormat = URLLoaderDataFormat.VARIABLES;
        myLoader.addEventListener(Event.COMPLETE, dataDispatched);
        myLoader.load(myRequest);

    }

    public function dataDispatched(e:Event){

            delivery=new URLVariables(e.target.data);
            dispatchEvent(new Event(Event.COMPLETE));

    }
} 
```

}

和我的 php：

require_once('includes/config.inc.php'); mysql_select_db("一些数据库");

```
$userName = $_GET['username'];
$userPassword = sha1($_GET['userpassword']);

$loginQuery="SELECT id, userName, active FROM users WHERE userName='".$userName."' AND pass='".$userPassword."'";
$loginResult=mysql_query($loginQuery, $db);

if(mysql_num_rows($loginResult)==1){
    $row=mysql_fetch_array($loginResult,MYSQL_ASSOC);
    $user_id=$row['id'];
    $user_name=$row['userName'];
    $active=$row['active'];

    if($active==0){

        echo "var0=0&var1=This account hasn't yet been activated.";

    }else{

            setcookie("user_id",$user_id,0,'/','',0);
            setcookie("user_name",$user_name,0,'/','',0);
            echo "var0=1&var1=Welcome ".$userName."!\nYou have been logged in.";
    }

}else{
    echo "var0=0&var1=Incorrect username or password.\nPlease try again.";  

}

mysql_close($db); 
```

因此，当我在 Flash 中运行所有这些时，它运行良好。当我在与我的 php 相同的服务器上上传 swf 文件时，它只会进入第一阶段：dtf_messnger.text="first login stage completed"...

# javascript - 什么更快，更高效，加载带有数组的 js 文件或从表中填充数组

> ID：10133254
> 
> 赞同：0
> 
> 时间：2012-04-12T23:25:46.783
> 
> 标签：javascript, jquery, mysql, ajax

我正在重建一个电子商务网站，其中产品数据存储在一个多维 JS 数组中，该数组在页面加载时加载。由于网站的性质，JS 会不断访问这些数据，以根据用户选择更新价格。有许多选择会影响最终价格。

从编程的角度来看，DB 表比 JS 数组更容易维护和更新，并且由于我将站点移植到 PHP 和 MYSQL，我一直在考虑将这些数组移动到表中。

那么，在加载时从数据库中填充一个数组以便定价数据始终可供 JS 使用，还是保留硬编码的 JS 文件会更好吗？我考虑过根据需要通过 ajax 获取数据，但由于该站点必须通过用户交互不断更新定价，所以我几乎排除了这种可能性。

你会怎么处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:28:41.977

### 不

我认为将数据库填充为数组是一个坏主意。如果您不从数据库中过滤您需要的数据，这可能是危险的。更不用说它要占用的内存量了。

在需要数据时发送正确的 ajax 请求是正确的方法。

> 看看 Stackoverflow，数据是非常重要的部分，所以所有必要的字段都会在需要时自动更新。它不会导入所有数据库并将其存储在数组中。它可能会发送 ajax 请求来检查是否有更新。

# objective-c - 为什么我不断得到相同的随机值？

> ID：10133255
> 
> 赞同：0
> 
> 时间：2012-04-12T23:25:52.180
> 
> 标签：objective-c, c, random

> **可能重复：**
> [为什么我总是用 rand() 得到相同的随机数序列？](https://stackoverflow.com/questions/1108780/why-do-i-always-get-the-same-sequence-of-random-numbers-with-rand)

我感到困惑的是，即使使用*不同的程序*（在同一台机器上）来运行/编译，并且在取消函数（之前和之后）函数之后..没关系..我会继续得到相同的“随机”数字……每次我运行它。我*发誓*这不是它应该如何工作的......我将尽可能简单地说明......</p>

```
#import <Foundation/Foundation.h>
int main(int argc, char *argv[]) {

    int rPrimitive = 0;  rPrimitive = 1 + rand() % 50;
    NSNumber *rObject = nil; rObject = [NSNumber numberWithInt:rand() % 10];
    NSLog(@"%i  %@", rPrimitive, rObject);

    rPrimitive = 0;   rObject = nil;
    NSLog(@"%i  %@", rPrimitive, rObject);
    return 0;           
} 
```

在 TextMate 中运行它：

```
i686-apple-darwin11-llvm-gcc-4.2
8  9
0  (null) 
```

在 CodeRunner 中运行它：

```
i686-apple-darwin11-llvm-gcc-4.2
8  9
0  (null) 
```

如果你愿意，可以运行一百万次。你可以猜到它永远是什么。为什么会这样？为什么哦为什么这是“它是这样的”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T23:29:32.567

这就是为什么（来自`rand`手册页）：

```
 If no seed value is provided,  the  rand()  function  is  automatically
   seeded with a value of 1. 
```

因为它总是以相同的数字作为种子，所以它总是会产生相同的数字序列。要让它在每次运行时产生不同的序列，您需要在每次运行时使用不同的种子。您可以使用`srand()`设置种子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T23:30:21.527

因为数字不是随机的，所以它们是[伪随机](http://en.wikipedia.org/wiki/Pseudorandom)的。它们是根据一种算法生成的，在给定相同的初始种子的情况下，该算法将始终产生相同的输出。您没有播种 PRNG，因此它使用默认的常量种子。

如果您使用不太可预测的东西（例如当前时间和/或 PID）为 PRNG 播种，则每次都会得到不同的结果。在 的情况下[`rand(3)`](http://linux.die.net/man/3/rand)，您需要使用[`srand(3)`](http://linux.die.net/man/3/rand).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T23:35:36.980

之所以这样，是因为它`rand`是一个伪随机数生成器，这意味着它不会生成真正的随机数（这实际上是一件*非常*困难的事情）。它使用“种子”生成序列中的下一个数字，并且在执行开始时，种子总是设置为相同的值（1 左右），所以如果你不改变种子，你总是会得到相同的随机数序列。您可以使用诸如`srand(time(NULL));`根据时间播种随机数生成器之类的东西，或者您可以使用被认为足以用于加密目的的随机数生成器，[`arc4random`](http://developer.apple.com/library/ios/#DOCUMENTATION/System/Conceptual/ManPages_iPhoneOS/man3/arc4random.3.html).

您可能会想“为什么会这样？”，但在某些情况下，您希望多次生成相同系列的“随机数”。

# localization - 本地化单个 ascii 字符是否合适

> ID：10133256
> 
> 赞同：0
> 
> 时间：2012-04-12T23:26:07.937
> 
> 标签：localization, internationalization, ascii

什么时候适合本地化单个 ascii 字符？例如 /，或 | ?

是否有必要将这些“字符串”添加到本地化工作中？

只是想给一些人怀疑的好处，并确保没有我没有想到的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T23:28:41.210

通常，除了作为图形元素之外，*使用*类似的东西是不合适的（当然首先不会是 I18N'd，更不用说 L10N'd）。如果你试图用它来表示一个比率，那么你应该有类似“%d / %d”的东西，并本地化整个事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T00:05:38.523

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T08:33:01.837

In Greek, questions end with a semicolon rather than ?, so essentially the `?` is replaced with `;` ... however, you should aim to always translate the question as a complete string including question mark anyway.

# database - Redis SET 命令

> ID：10133268
> 
> 赞同：0
> 
> 时间：2012-04-12T23:28:15.880
> 
> 标签：database, parameters, set, redis

我第一次使用 Redis 数据库（只是使用简单的命令开始）并遇到了 SET 方法的早期问题。在我看的任何地方，文档都说 SET 可以接受一个字符串，但是每当我尝试设置一个带空格的字符串时，它都会给我错误

“-ERR 'set' 命令的参数的参数数量错误”

比如我输入的命令是：

SET var1“你好世界”

我在上面得到了那个错误。有任何想法吗？

# android - 如何在 Android SHELL 中运行 C++ 应用程序

> ID：10133274
> 
> 赞同：10
> 
> 时间：2012-04-12T23:29:01.583
> 
> 标签：android, shell, android-ndk, g++

我想`hello world`在 C++ 上运行并用 编译`Android toolchain 9`，但我遇到了问题：默认情况下，我没有启动它的权限，也无法使用 chmod` 更改权限。

我用了`Android 2.3.3 - Api Level 10`

应用程序由交叉编译器编译为`API level 9`

程序：

编译应用程序：

> ~/toolchain_andr9/bin/arm-linux-androideabi-g++ helloworld.cpp

然后将应用程序发送到模拟器上的 SDCARD：

```
>adb push a.out /mnt/sdcard 
```

然后去 SHELL 并尝试运行`a.out`：

```
>adb shell
> 
>/mnt/sdcard/a.out 
```

结果是：

```
>`/mnt/sdcard/a.out: permission denied` 
```

命令`ls -l`显示以下权限`a.out`：

```
>`----rwxr-x system   sdcard_rw   863656 2012-04-12 22:42 a.out` 
```

我试图更改权限：

```
>chmod 777 /mnt/sdcard/a.out 
```

但权利不会改变：

```
>`----rwxr-x system   sdcard_rw   863656 2012-04-12 22:42 a.out` 
```

我想我已经使用 android 留下了一些重要的东西。

任何人都可以帮助我并给我一种如何在“Android SHELL”中运行应用程序的方法吗？

非常感谢。

PS对不起我的英语=）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-24T11:48:24.927

默认情况下，SD卡挂载选项`noexec`，不允许执行卡上的任何文件，无论它是什么权限（甚至`-rwxrwxrwx`），所以你需要将文件移动到另一个位置然后执行它。

最简单的方法是将文件移动到`/data/local/tmp/`并使用完整路径（通常的 POSIX PATH 语义）执行它。

```
> adb push a.out /data/local/tmp/a.out
> adb shell
> chmod 755 /data/local/tmp/a.out
> /data/local/tmp/a.out 
```

这**不需要**root*访问权限*并且可以在*重新启动***后继续存在** 。

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T12:59:00.447

如果您已将手机植根，则可以执行 a`mount -o remount,rw /mnt/sdcard`并且它应该可以运行。

我已经在我的安卓上试过了。*

# java - 在 Android 应用中接收电子邮件通知

> ID：10133275
> 
> 赞同：2
> 
> 时间：2012-04-12T23:29:05.453
> 
> 标签：java, android, email, jakarta-mail

我正在尝试制作一个简单的应用程序（只是为了学习），它将能够从我自己的服务器发送和接收电子邮件。我从我的应用程序发送电子邮件没有问题，我的问题是：

1.  您如何从电子邮件服务器接收推送通知
2.  让应用检查收件箱，刷新收件箱列表

我试过搜索这个，但什么也没找到。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T00:02:20.407

C2DM 会推送通知，具体取决于您的服务器。在 stackoverflow 中搜索它。

该应用程序可以使用任何可用的 API 检查收件箱以获取服务器的状态。甚至 HTTP 也是可能的。

SampleSyncAdapter 示例应用程序是使用同步适配器定期在服务器和设备之间同步数据的示例，但您可以将相同的想法用于仅下载。

# django - django - 如何在 urls.py 中注入消息

> ID：10133276
> 
> 赞同：0
> 
> 时间：2012-04-12T23:29:09.953
> 
> 标签：django, django-templates, messaging

我有一个需要模板的第三方应用程序。

我想在 urls.py 中注入一条消息，以便消息显示在模板中，因为我无权访问 3rd 方应用程序的视图。

如何通过 DRY 方式实现这一点？

**更新**：试图提供有关此问题的更多信息。

我的网站[(outsourcefactor.com)](http://outsourcefactor.com)上有 django-registration ，任何以“/signup/”开头的请求都会重定向到我无法控制的 django-registration。我本来想在 django 的消息框架中插入一条消息，这样我就可以在我控制的注册模板中打印消息。

我认为我可以插入消息的唯一位置是在 urls.py 中，即在将控件释放到 django-registration 之前，然后在注册模板中捕获消息并显示它。

我正在为我的事件驱动消息使用 django-messaging，并且不想通过上下文处理器或 ..etc 传递消息。

我试图避免分叉和修改 django-registration。希望这现在更清楚了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:46:24.453

您可以使用自定义模板覆盖任何 django-registration [url](https://bitbucket.org/ubernostrum/django-registration/src/27bccd108cde/registration/backends/default/urls.py)。

# javascript - javascript相当于c中的联合

> ID：10133280
> 
> 赞同：2
> 
> 时间：2012-04-12T23:29:52.090
> 
> 标签：javascript

我想知道 Javascript 中是否有等效的 c/++ union？我需要将它用作我用于 Html5 游戏的库，我需要为传递给该库函数的对象提供一些固定的变量名称，但是将数据保存在数组中以便于计算要容易得多。举个例子，假设库中有一个函数“F”，它将转换矩阵作为参数。参数必须有变量名 'a', 'b', ... 'f' 对应矩阵元素(m[0][0], m[0][1] ...) 连续。我有自己的矩阵类用于使用数组的计算。我知道输入参数'on the fly'，如下所示，可以解决我的问题，但是我不想每次调用函数时都这样做，也不想编写代理函数。

```
F({a:m[0][0], b:m[0][1], c:[0][2], d:m[1][0], e:m[1][1], f:[1][2]}); 
```

有没有办法解决这个问题，比如工会？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T23:31:46.493

不，没有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T23:32:17.347

没有联合的概念，但是由于该语言是松散类型的，因此您永远不需要这种类型的任何东西。

您可以动态更改变量中的类型（当然，您可以使用具有松散类型属性的对象）。

# sip - 如何通过 Wireshark 或类似工具查看 tshark -V 的输出？

> ID：10133282
> 
> 赞同：1
> 
> 时间：2012-04-12T23:30:09.260
> 
> 标签：sip, wireshark, rtp, hexdump, tshark

最近在服务器上更新了我的 Wireshark，并且失去了从 CLI 使用 -R 和 -w 的能力。由于我正在跟踪 SIP 和 RTP 呼叫，因此我需要使用 -R 而不是 -f。

我发现使用 -V 非常有用（在屏幕上显示数据包树），然后我可以将输出重定向到文件。不幸的是，我无法通过 Wireshark 打开该文件以正确查看（包含太多文本，无法轻松滚动）。

我尝试使用 -xt 添加十六进制转储（删除 -V），但在将文本文件复制到我的 PC 时，仍然无法通过 Wireshark 打开。

有什么想法可以使用 -R（带或不带 -V）进行跟踪，将文件复制到我的 PC 并且仍然能够通过 Wireshark 读取它吗？我没有将文件转换为可读格式的问题.. 只需要任何东西来查看文件并共享它们:)

谢谢大家，

//M

# ios - 将二进制文件上传到 iTunes Connect 时无法更改 Prerendered Icon Flag

> ID：10133290
> 
> 赞同：2
> 
> 时间：2012-04-12T23:31:03.173
> 
> 标签：ios, xcode, xcode4, xcode4.2, app-store-connect

所以问题是在Xcode（v4.2.1）中我已经设置了`Icon Already Includes Gloss Effects to YES`，但每次我尝试上传我的二进制文件并检查它说的二进制细节`Prerendered Icon Flag is FALSE`。

我之前上传的这个应用程序没有问题。唯一的区别是我更改了图标。因此，新图标在上传后显示良好，但添加了光泽效果，这是以前的版本所没有的。

我在构建之前先尝试清理，尝试将图标已经包含光泽效果设置为 NO，保存，关闭 xcode，重新打开，然后将图标已经包含光泽效果更改回 YES，但上传的二进制文件始终显示 Prerendered Icon Flag 为 FALSE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T00:54:03.857

好的，所以不知道为什么我会遇到这个问题，但为了解决这个问题，我必须关闭 Xcode 并找到 info.plist 文件并手动将 Prerendered Icon Flag 更改为 TRUE，现在它工作得很好。

# django - Django 中的随机预告片应用程序

> ID：10133292
> 
> 赞同：0
> 
> 时间：2012-04-12T23:31:13.050
> 
> 标签：django, youtube

我对 Django 很陌生，正在尝试构建我的第一个好应用程序。我决定尝试重建一个低复杂度的网站，并选择：[http ://trailertrack.me/](http://trailertrack.me/)

我想知道你能否告诉我要采取哪些步骤。

现在，我的 views.py 文件看起来像这样（我现在只尝试显示一个特定的视频）：

```
from django.http import HttpResponse
from django.shortcuts import render_to_response
import gdata.youtube
import gdata.youtube.service

yt_service = gdata.youtube.service.YouTubeService()
yt_service.ssl = True

def index(request):
    message = "Welcome, and enjoy the show!"
    context = {
            'message': message,
    }
    return render_to_response('index.html', context)

def video(request):
    t = loader.get_template('index.html')
    specificentry = yt_service.GetYouTubeVideoEntry(video_id='1g4PLj0PlOM')
    return HttpResponse(t.render(specificentry)) 
```

谢谢你的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:56:33.903

好的，这是我将如何进行此操作的大致轮廓。顺序无关紧要；它们之间显然存在一些依赖关系，但请按照您想要解决它们的顺序执行它们。

另外，如果您是新手，我强烈建议您使用[git](http://git-scm.com/)，或者，如果您已经熟悉它，则使用[mercurial](http://mercurial.selenic.com/)进行版本控制，使用[virtualenv](http://pypi.python.org/pypi/virtualenv)来跟踪依赖项。

1.  让您当前的视图正常工作，这样您就可以看到具有合理模板的特定视频等等。
2.  添加一种显示多个视频的方式。一种直接的方法是为视频创建一个简单的 Django 模型，基本上只有一个 youtube ID，然后打开管理站点，以便您可以手动添加视频。
3.  使视图在每次加载时显示随机视频。
4.  添加一个“下一步”按钮来重新加载页面。您可以使用 django 会话变量 / GET 变量来避免再次显示相同的视频，或者只是假设如果您有很多视频，它不会经常发生而成为问题。
5.  添加一种从 Youtube（半）自动获取新视频的方法。一种方法：
    *   在您的视频模型中添加“已发布”字段，并让面向用户的网站仅显示已发布的视频。
    *   制作一个管理命令，在 Youtube 上搜索“预告片”或其他内容，并将新视频（未发布）添加到数据库中。（至少检查重复的 ID。）每隔几个小时或几天或其他任何时间在 cron 中自动运行一次。
    *   定期进入管理员并添加新视频。如果需要，您可以创建一个自定义管理视图，在页面上显示一堆待处理的视频，包括它们的元数据、实际视频以便您观看，以及系统中可能重复的任何其他视频，以及 AJAX发布和删除按钮。（重复的事情有点困难！您可能只需对元数据进行[tf-idf 加权](http://en.wikipedia.org/wiki/Tf-idf)即可找到类似的视频。
6.  为用户添加一种登录方式（默认的 Django 用户系统、Facebook/Twitter 集成等）和喜欢/赞成/可能反对视频。记住这些。使用某种形式的[协同过滤](http://en.wikipedia.org/wiki/Collaborative_filtering)添加视频推荐。
7.  您现在拥有比原始网站更多的功能！想想其他一些很酷的方法并实施它们。:)

# python - 多次执行python脚本

> ID：10133294
> 
> 赞同：6
> 
> 时间：2012-04-12T23:31:45.657
> 
> 标签：python, python-2.7

我不确定执行此操作的最佳方法，但我有一个保存为 .py 的 python 脚本。该脚本的最终输出是两个文件 x1.txt 和 y1.txt。

基本上我想运行这个脚本说 1000 次，每次运行都用新名称写入我的两个文本文件，即 x1.txt + y1.txt 然后第二次运行 x2.txt 和 y2.txt。

考虑到这一点，似乎最好用类似的东西开始整个脚本

```
runs=xrange(:999)
for i in runs:

##run the script 
```

然后完成一些事情

```
 for i in runs:
        filnameA=prefix += "a"+i

open("filnamea.txt", "w").write('\n'.join('\t'.join(x for x in g if x) for g in grouper(7, values)))

    for i in runs:
        filnameB=prefix += "a"+i

open("filnameB.txt", "w").write('\n'.join('\t'.join(x for x in g if x) for g in grouper(7, values))) 
```

这真的是最好的方法吗？我敢打赌它不是..更好的主意？

我知道您可以`import time`编写一个计算时间的文件名，但这对于以后的处理会很烦人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T23:43:25.837

如果您的计算机具有并行运行这些资源的资源，则可以使用`multiprocessing`它来执行此操作。否则使用循环顺序执行它们。

您的问题对于您坚持的部分并不十分明确。您是否只需要关于是否应该使用循环的建议？如果是，我的答案在上面。或者您还需要帮助来形成文件名吗？你可以这样做：

```
import sys

def myscript(iteration_number):
    xfile_name = "x%d.txt" % iteration_number
    yfile_name = "y%d.txt" % iteration_number
    with open(xfile_name, "w") as xf:
        with open(yfile_name, "w") as yf:
            ... whatever your script does goes here

def main(unused_command_line_args):
    for i in xrange(1000):
        myscript(i)
    return 0

if __name__ == '__main__':
    sys.exit(main(sys.argv)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-10T16:15:00.150

```
import subprocess
import sys

script_name = 'dummy_file.py'
output_prefix = 'out'
n_iter = 5

for i in range(n_iter):
    output_file = output_prefix + '_' + str(i) + '.txt'
    sys.stdout = open(output_file, 'w')
    subprocess.call(['python', script_name], stdout=sys.stdout, stderr=subprocess.STDOUT) 
```

运行此程序时，您将获得 5 个输出文本文件（out_0.txt、...、out_4.txt）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-08T19:37:32.187

我不确定，但也许它会有所帮助：假设，我想打印 'hello' 10 次，而不是手动写 10 次。为此，我可以定义一个函数：

```
 #Function for printing hello 10 times:
    def func(x):
       x="hello"
       i=1
       while i<10 :
           print(x)
           i += 1
       else :
           print(x)

    print(func(1)) 
```

# android - 问题Android Web 浏览器上的标签 我对某些 Android 设备有疑问。当我尝试点击某些标签时，它什么也没做。奇怪的是，我在另一个屏幕上有一些选择，而且效果很好。他们唯一的区别是不工作的标签有 float:right; 但我删除了它，错误仍然存 在。我不知道会是什么。这是我的标记：

<select class="right" id="y" tabindex="31"><option>Year ID：10133297 赞同：0 时间：2012-04-12T23:31:51.043 标签：android, html, css, webkit, mobile-website 回答 #1 赞同：1 时间：2012-05-16T09:50:31.467 你overflow: hidden在这个元素上加入你的 CSS 了吗？删除它为我解决了这个问题</option></select>

# c# - 在资源方面更方便的是：在运行时生成值或将生成的值保存到数据库中？

> ID：10133299
> 
> 赞同：-1
> 
> 时间：2012-04-12T23:32:13.993
> 
> 标签：c#, sql-server, asp.net-mvc-3, entity-framework

所以我有一个设计决定要做。我正在建立一个网站，所以速度是最重要的。我的价值观依赖于其他价值观。我有两个选择：

1- 从数据库中检索我的对象，然后生成依赖值/对象。

2- 检索具有已存储在数据库中的相关值的对象。

我将 ASP.NET MVC 与实体框架一起使用。

在做出这样的选择时我应该考虑哪些因素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T23:38:22.860

您几乎肯定会发现存储派生值不会带来任何性能优势。显然，如果依赖项非常复杂或依赖于大量数据，这可能会发生变化，但是您没有提及有关数据的任何具体内容，所以我只能笼统地说。

换句话说，不要存储完全派生的值，因为它们会引入更新异常（换句话说，在更新数据时，必须有人了解这些依赖关系*并*为其编写代码，而不是像可能的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T23:45:31.230

问自己这个问题：

> 依赖值是否基于业务规则？

如果是这样，那么不要将它们存储在数据库中 - 不是因为您*不能*或*不应该*，而是因为这是一种好的做法 - 如果这是最好的或唯一的地方，您应该只在数据库中拥有业务规则它，不仅仅是因为你*可以*。

将对象序列化到数据库通常比在普通编译代码中创建对象要慢。数据库访问通常很快，但序列化的行为很慢。但是，如果您有一个耗时的复杂对象创建过程，那么序列化可能会更快结束，特别是如果您使用自定义序列化方法。

Sooooo ....如果您的“对象”是具有一些计算/派生值的相对正常的数据对象，那么我建议您将“对象”的值存储在数据库中，从数据库中读取这些值并将它们映射到数据在编译的代码中创建的对象*，然后计算您的依赖值。

*请注意，这是标准数据检索 - 有些人使用 ORM，有些人手动将值映射到对象。

# facebook - Facebook 无法识别 OG 元数据并无法遵循返回重定向

> ID：10133301
> 
> 赞同：1
> 
> 时间：2012-04-12T23:32:26.513
> 
> 标签：facebook, wordpress, facebook-opengraph, meta

我有一个适合我的网站，我已经尝试了我能想到的一切。问题是当您在 Facebook 帖子中输入该网站的网址时，它不会显示缩略图选项。我有一个提供正确 og 元数据的插件，但 Facebook 无法识别它。我尝试了 Facebook 调试器，它告诉我 URL 请求了 HTTP 重定向，但无法遵循。我不知道这个网站发生了什么，我的客户非常依赖 Facebook 产生的流量。谁能告诉我发生了什么事，好吗？网站上的任何帖子网址都会导致同样的问题。

网站是 birminghammommy.com

无效的网址之一是[http://www.birminghammommy.com/2012/04/paint-the-town-red-birmingham/](http://www.birminghammommy.com/2012/04/paint-the-town-red-birmingham/)

你们能够提供的任何帮助将不胜感激。

基思 khcreativemedia.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:47:02.837

Open Graph 标签必须是这样的：

```
<meta property="og:title" content="The Rock" /> 
```

但是如果您查看您的网站，您会发现您的标签是错误的

```
<meta name='og:title' content='Paint the Town Red, Birmingham!' /> 
```

尝试修复它们。

# android - 安卓动态壁纸动画

> ID：10133306
> 
> 赞同：1
> 
> 时间：2012-04-12T23:32:55.937
> 
> 标签：android, live-wallpaper

将动画显示为动态壁纸的最佳方式是什么？现在我有一个 gif 分成 11 个 png（每帧一个），然后我只是在做

```
public Bitmap frame0;
ArrayList<Bitmap> frameArray = new ArrayList<Bitmap>();
frame0 = BitmapFactory.decodeResource(getResources(), R.drawable.nyancat0);
frame0 = Bitmap.createScaledBitmap(frame0, minWidth, minHeight, true);
frameArray.add(frame0); 
```

然后我只使用 For 循环遍历帧并将它们绘制在画布上

```
canvas.drawBitmap(frameArray.get(indexnumber), 0, 0, mPaint); 
```

然后我只是更改我的 indexnumber++，除非它是 11，然后我回到 1。这行得通，但是当然，存储这么多位图的内存效率非常低。这使我无法在没有滞后和电池消耗的情况下进行多层或其他很酷的效果。有没有更好的方法在 Android 动态壁纸上显示动画？我尝试使用电影来显示整个 GIF，但动态壁纸不支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:58:54.163

加载图像需要多长时间？如果它可以忽略不计，那么为什么不在显示之前加载每个图像，丢弃旧的呢？这样，您在任何一个阶段都只有一张图像在内存中。

或者做一些类似于使用后台缓冲区的事情，在内存中有两个空间，一个用于现在显示的图像，另一个用于加载下一个图像。当需要更改时，使新加载的位图可见，卸载另一个，然后将下一帧加载到其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T21:07:32.640

不管人们怎么说，你实际上可以在你的动态壁纸中有很多图像。唯一棘手的是内存限制。我的应用程序中加载了多达 40 个 .png，我每分钟重新加载一次。

但是当您在应用程序中处理这么多图像时，您必须以一种智能的方式加载它们：

```
public BitmapResult decodeResource(int file, int scale){
        //Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inPurgeable = true;
        o.inInputShareable = true;
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeResource(resources, file, o);

        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inPreferredConfig = Bitmap.Config.ARGB_8888;
        o2.inSampleSize=scale;
        return new BitmapResult(BitmapFactory.decodeResource(resources, file, o2),o2.outWidth,o2.outHeight);
} 
```

你看到那个比例变量了吗？它应该是 2 的幂，它会缩小位图。

如果出现问题，请清理位图并重新加载质量较低的位图：

```
void init()
{
    try
    {
         loadFirstBitmap();
         loadSecondBitmap();
    }
    catch(java.lang.OutOfMemoryError error)
    {
         /*some infinite loop breaker*/
         scale *= 2;
         cleanup();
         init();
    }
} 
```

此外，系统不会为您删除位图，您必须自己清理它们，然后可能会调用垃圾收集器：

```
bitmap1.recycle();
bitmap2.recycle();
System.gc(); 
```

将位图调整为所需的大小也是一个好主意，否则系统可能会在您每次尝试绘制它时调用 createScaledBitmap，这将需要额外的内存。

我从来没有想过这类应用程序的内存上限是多少，内存堆限制通常等于 24 MB，但我可以告诉你，我的应用程序占用了 13 MB 内存，而且没有人报告过崩溃在 Android 设备上 >= 2.2。

因此，如果您遵循一些优化规则，您可以根据需要在应用程序中加载尽可能多的位图。

# java - 删除 ArrayList 的元素

> ID：10133309
> 
> 赞同：-1
> 
> 时间：2012-04-12T23:33:29.397
> 
> 标签：java, methods, for-loop, arraylist

我是`ArrayList`在 java 中使用 's 的新手。我有几个列表，想写一个方法来删除列表及其元素。这是我到目前为止所拥有的：

```
public void delete(double value){
    list.remove(value);
} 
```

之后我想得到输出：

```
public ArrayList<Double> getlist(){
    return list;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T00:04:05.013

从列表界面：

从此列表中删除包含在指定集合中的所有元素（可选操作）。

```
boolean removeAll(Collection<?> c); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T03:02:52.637

所以让我们假设你有一些`ArrayLists`这样的......

```
ArrayList list1;
ArrayList list2;
ArrayList list3; 
```

你是说，根据给定的值，你想删除这些列表之一吗？所以像这样的事情......

```
public void deleteList(ArrayList listToRemove){
    listToRemove = null;
}

public void chooseListToRemove(int listNumber){
    if (listNumber == 1){
        deleteList(list1);
    }
    else if (listNumber == 2){
        deleteList(list2);
    }
    else if (listNumber == 3){
        deleteList(list3);
    }
} 
```

这是你想要做的吗？

否则，您是说您有一个`ArrayList`包含许多其他列表的单曲...

```
ArrayList allLists;
allLists.add(new ArrayList());
allLists.add(new ArrayList());
allLists.add(new ArrayList()); 
```

你想像这样删除这些列表之一......

```
public void deleteList(int listNumber){
    allLists.remove(listNumber);
} 
```

因此，如果您从 3 个列表开始，`allLists`然后删除其中 1 个，您可能会问`allLists.size()`，它会告诉您只剩下 2 个列表？

如果两者都不是，您真的需要更好地解释您的问题，以便我们为您提供帮助。

# sonarqube - 声纳在数据库中创建的表

> ID：10133310
> 
> 赞同：2
> 
> 时间：2012-04-12T23:33:29.717
> 
> 标签：sonarqube

> **可能重复：**
> [声纳数据库结构是什么？](https://stackoverflow.com/questions/9193749/what-is-the-sonar-database-structure)

只想问声纳连接数据库后会创建哪些表？还有用于存储“代码行”“类”“评论”等信息的表格。有人能给我一些关于这些的文档吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T06:28:49.227

如果您有一个没有表的干净数据库，那么 Sonar 将在您第一次启动它时创建所有必需的表。

要了解有关这些表的更多信息，您可以查看我们用于测试的这个 DDL 文件：

[https://github.com/SonarSource/sonarqube/tree/master/server/sonar-db-core/src/main/resources/org/sonar/db/version/schema-h2.ddl](https://github.com/SonarSource/sonarqube/tree/master/server/sonar-db-core/src/main/resources/org/sonar/db/version/schema-h2.ddl)

项目拆分，但答案中最初链接的 DDL 的 4.5.5 版本可以在此处找到：

[https://github.com/SonarSource/sonarqube/blob/4.5.5/sonar-core/src/main/resources/org/sonar/core/persistence/schema-h2.ddl](https://github.com/SonarSource/sonarqube/blob/4.5.5/sonar-core/src/main/resources/org/sonar/core/persistence/schema-h2.ddl)

# knockout.js - 使用 knockoutjs 推迟分页列表中的计算

> ID：10133315
> 
> 赞同：2
> 
> 时间：2012-04-12T23:34:10.590
> 
> 标签：knockout.js

我正在使用带有延迟更新插件的 knockoutjs 2.0。我有一个旨在对列表进行分页的视图，如下所示：

```
function PaginatedView(label, items, size) {
    var self = this;

    this.label = ko.observable(label);

    // List of all items to display
    this.list = ko.observableArray(items);

    // List that contains the items on the current page
    this.rows = ko.observableArray([]);

    this.pageSize = ko.observable(size || 5);
    this.pageIndex = ko.observable(0);

    function populateList() {
        var size = self.pageSize();
        var start = self.pageIndex() * size;
        self.rows( self.list.slice(start, start + size) );
        console.log(self.label() + ": Set rows to range", start, start + size - 1);
    }

    // if the deferEvaluation value is true, no items are ever displayed
    ko.computed(populateList, null, {deferEvaluation: false});    

    this.maxPageIndex = ko.computed(function() {
        return Math.ceil(this.list().length / this.pageSize()) - 1;
    }, this);

    this.pageList = ko.computed(function() {
        var pages = [];
        for (var p = 0; p <= self.maxPageIndex(); p++)
            pages.push(p+1);

        return pages;
    });

    this.goToPage = function(p) {
        p--;
        if (p>=0 && p<=self.maxPageIndex())
            self.pageIndex(p);
    }
}; 
```

在我的应用程序中，我创建了多个视图，这些视图通过不同的对象列表进行分页。为了跟踪人们实际看到的项目，我想推迟分页的计算（在上面的`populateList()`函数中），直到视图真正准备好显示。

`deferEvaluation`我想我可以通过将选项设置为 false 来使用 deferred-updates 插件来实现这一点。但如果我这样做，我根本看不到任何输出。我用 jsfiddle构建了一个小[测试用例来说明问题。](http://jsfiddle.net/gene/ruBwu/)将该值设置为 false 时，控制台将在选择任何列表之前显示两行输出；将值设置为 true 时，不会显示任何列表元素。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T15:13:05.970

该行：

```
ko.computed(populateList, null, {deferEvaluation: false}); 
```

创建一个匿名计算的 observable（因为它没有分配给任何东西）。因为它从未被分配过，所以它不会在任何地方被读取。如果 deferEvaluation 为真，内部函数 (populateList) 不会运行，直到有东西尝试读取计算出的 observable，这当然不会发生！

如果您不使用 deferEvaluation，您仍然会丢弃引用，但是当您定义计算的 observable 时，populateList 会立即被调用。在这种情况下，淘汰依赖跟踪将意识到您的匿名计算 observable 依赖于诸如“pageSize”之类的东西，它还将意识到计算的 observable 更新了“rows”变量，即“rows”依赖于计算的 observable。然后设置足够它可以工作，但这并不理想。

我认为我修复它的方法是：

首先，更改 populateList 函数以返回一个数组：

```
function populateList() {
    var size = self.pageSize();
    var start = self.pageIndex() * size;
    var result = self.list.slice(start, start + size);
    console.log(self.label() + ": Set rows to range", start, start + size - 1);
    return result;
} 
```

然后调用计算的可观察行：

```
this.rows = ko.computed(populateList, null, {deferEvaluation: false}); 
```

# javascript - 对象没有方法'indexOf'

> ID：10133318
> 
> 赞同：3
> 
> 时间：2012-04-12T23:34:26.543
> 
> 标签：javascript, indexof

我有以下函数（取自[Elevation Service @ Google Maps API](https://developers.google.com/maps/documentation/javascript/elevation)），例如`63.00425720214844`，当我单击使用[Google Maps JavaScript API v3](https://developers.google.com/maps/documentation/javascript/tutorial)创建的地图上的某个位置时，该函数会输出：

```
function getElevation(event) {
    var locations = [];
    var clickedLocation = event.latLng;
    locations.push(clickedLocation);

    var positionalRequest = {
        'locations': locations
    }

    elevator.getElevationForLocations(positionalRequest, function(results, status) {
        if(status == google.maps.ElevationStatus.OK) {
            var s = results[0].elevation
            if(results[0]) {
                alert(s.substring(0, s.indexOf('.') - 1));
            } else {
                alert('Inget resultat hittades');
            }
        } else {
            alert('Det gick inte att hitta höjdskillnaden på grund av följande: ' + status);
        }
    });
} 
```

我想删除点之后的所有内容，包括点，例如 remove `.00425720214844`from`63.00425720214844`但是当我单击地图上的某个位置时，我在控制台中收到此错误消息：`Uncaught TypeError: Object 63.00425720214844 has no method 'indexOf'`.

我做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T23:38:20.090

该变量`s`不包含字符串。

您可以使用以下方法将其转换为字符串：

```
s = s.toString(); 
```

如果它是一个数字，您可以只使用数字函数：

```
alert(Math.floor(s)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T23:36:53.613

只需执行 javascript`parseInt(63.00425720214844)`即可获得 63。

# c# - 从字符串中删除 unicode 代码的最快方法

> ID：10133319
> 
> 赞同：3
> 
> 时间：2012-04-12T23:34:38.273
> 
> 标签：c#, .net, regex, html-parsing, google-feed-api

您好我正在尝试找出一种从 Google Feed API 返回的结果中删除标签的方法。具体来说，他们在标题和描述内放置了粗体标签。

正在插入的代码如下：

```
\u003cb
\u003e
\u003c/b\u003e 
```

由于它的数量是固定的，我确实尝试为每个字符串的每个代码执行 String.Replace() ，但这并不奇怪导致性能不佳。我不确定 RegEx 是否会更好（或更糟）。有谁知道如何删除这些？Google 不提供从结果中删除标签的选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T23:51:32.410

您可以使用这样的正则表达式删除 unicode 代码：

```
\\u[\d\w]{4}

var subject = @"\u003cb\u003e\u003c/b\u003e";
var result = Regex.Replace(subject, @"\\u[\d\w]{4}", String.Empty); 
```

至于性能，[这篇文章](http://blogs.msdn.com/b/debuggingtoolbox/archive/2008/04/02/comparing-regex-replace-string-replace-and-stringbuilder-replace-which-has-better-performance.aspx)似乎表明正则表达式要慢得多，但我会用你自己的数据运行你自己的测试，因为它可能会有很大的不同。正则表达式本身将在性能中发挥重要作用，我认为该文章没有说明正则表达式正在使用什么，因此无法进行比较。数据的大小和类型也将发挥重要作用，因此如果不了解您的数据，很难说哪个更好。

此外，您应该尝试使用标志[编译正则表达式](http://www.codinghorror.com/blog/2005/03/to-compile-or-not-to-compile.html)`RegexOptions.Compiled`，看看这是否会提高性能。

# jtable - 选项卡式页面中的 JScrollPanes 中的 MigLayout 和 JTables

> ID：10133320
> 
> 赞同：3
> 
> 时间：2012-04-12T23:34:53.987
> 
> 标签：jtable, miglayout, jscrollbar

我本着回馈的精神提交了以下实施的组件。该组件满足了我客户的要求，所以我本身并不是在寻求帮助。但是该组件提供了可能对其他人有用的有趣功能。

此外，它提出了一些关于明显必要的黑客攻击的问题，而且我的实现可能比必要的复杂得多。任何建议的替代解决方案也可能对其他人有用。

简而言之，一个大型数据表被拆分为多个 JTable，每个页面中都有一个多选项卡 JTabPane。

如果您运行该程序并以各种方式调整它的大小，您将看到该组件的行为方式。明确地，要求是：

1.  将显示具有不同数量记录（1 到 500）的表格数据集。

2.  JTabbedPane 包含一个或多个选项卡，每个选项卡仅包含一个 JScrollPane。

3.  JScrollPanes 不能有垂直滚动条，可能有水平滚动条。

4.  每个 JScrollPane 都包含一个 JTable。

5.  JTabbedPane 中总是有足够的选项卡来共同包含其 JTable 中的所有数据行。

6.  JTabbedPane 大小随应用程序 JFrame 大小而变化。

7.  应用程序可以通过鼠标拖动自由调整大小。

8.  在初始化时，无论何时调整应用程序的大小，JTabbedPane 都会重新构建，并使用足够的选项卡页来保存所有记录。例如，对于 100 条记录，如果在特定的面板大小下，选项卡的表格可以容纳 8 条记录，则创建 13 个选项卡。

9.  如果 JTabbedPane 的大小减小到太小而无法容纳容纳所有数据行所需的选项卡数量，则不会显示任何内容（或仅显示警告）。

对 Java、MigLayout 及其交互有学术兴趣的人可能需要考虑四点：

1.  在源代码中的某个点是以下函数调用：

    tb = tabbedPane.getBoundsAt(0);

这是一个黑客。我看不出这个呼召在世上有什么需要；然而它（或其他东西）是必要的。

1.  从理论上讲， ScrollPane.getViewportBorderBounds() 应该给我计算标签页表格大小的信息，但我不得不破解一个值。我错了，还是在我使用它的地方返回了不正确的信息？

2.  有一组令人眼花缭乱的函数——paint()、repaint()、validate()、invalidate()、revalidate()、update()。我发现需要在正确的时间调用特定的函数。调用顺序通常（尽管并非总是很明显）非常重要。这组函数确实可以使用严格但清晰的文档来记录它们与 AWT、Swing 以及彼此之间的交互。他们与布局管理器的交互，特别是与 MigLayout 的交互也可以使用解释。

3.  有没有使用比我使用的方法简单得多的通用 Java 来解决需求？我重新发明轮子只是为了得到拖拉机的胎面吗？

制作：javac -classpath ScrollTableTest.java

用法：java -classpath ScrollTableTest [总数据行数]

```
import java.awt.*;
import java.awt.event.*;
import java.net.*;
import java.util.*;
import java.io.*;
import java.text.*;
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.filechooser.*;
import javax.swing.table.*;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.TableModel;
import javax.swing.table.TableColumn;
import net.miginfocom.swing.MigLayout;

public class ScrollTableTest
  extends    JFrame
{
  public final static int APPWIDTH = 500; 
  public final static int APPHEIGHT = 300;
  public final static String[] CLIENT_COL_NAMES = { "Col 1", "Col 2", "Col 3", "Col 4" };
  public final static int COLS = CLIENT_COL_NAMES.length; 
  public final static int MAXTABS = 50; // arbitrary limit
  public final static int arbitraryTweek1 = 20;    

  String migDebugString = "";

  int[] dataRowsPerTabCount = new int [MAXTABS];
  JPanel topPane = null;
  DefaultTableModel clientsTableModel;
  String[][] clientData;
  JScrollPane scrollPane;
  Rectangle viewportBounds;
  JTable clientsTable;
  JTabbedPane tabbedPane;
  int dataRows, maxVisibleRow = -1;
  int rowsToShow = 1;
  int dataRowHeight;

  void printBasics()
  {
    if (scrollPane == null)
      return;
    System.out.println("");
    System.out.println("clientsTable height " + clientsTable.getHeight());
    System.out.println("topPane height:  " + topPane.getHeight());
    System.out.println("tabbedPane height " + tabbedPane.getHeight());
    System.out.println("scrollPane height:  " + scrollPane.getHeight());
    System.out.println("viewport bounds:  y " + viewportBounds.getY() +
          " height " + (int)viewportBounds.getHeight());
  }
  void printDims()
  {
    printBasics();
    double diff = viewportBounds.getHeight() - clientsTable.getHeight();
    System.out.println("dataRowHeight: " + dataRowHeight);
    System.out.println("differential:  " + diff);
  }
  void getGuiMetrics()
  {
    double diff;
    Rectangle tb;
    int clientRows = 20;
    int viewable = 0;
    int bottom;
    int computedSpHeight;
    int tabIx;
    boolean scrollbarHeightSet = false;
    int scrollbarHeight = 0;
    String title;
    topPane = new JPanel(new MigLayout("fill" + migDebugString, "[100%]", "[100%]"));
    setContentPane(topPane);
    validate();

    tabbedPane = new JTabbedPane();
    topPane.add(tabbedPane, "cell 0 0, grow");

    // create a temporary table of nominal size to use for table metrics
    clientData = new String[clientRows][COLS];
    clientsTableModel = new DefaultTableModel(clientData, CLIENT_COL_NAMES);
    clientsTable = new JTable(clientRows, COLS);
    clientsTable.setModel(clientsTableModel);
    clientsTable.setPreferredScrollableViewportSize(null);
    clientsTable.getTableHeader().setReorderingAllowed(false);
    clientsTable.getSelectionModel().setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    clientsTable.getSelectionModel().setSelectionInterval(0, 0);

    // created scroll pane containing table, and contained in tabbed pane
    scrollPane = new JScrollPane(clientsTable);
    scrollPane.setVerticalScrollBarPolicy(scrollPane.VERTICAL_SCROLLBAR_NEVER);
    scrollPane.setHorizontalScrollBarPolicy(scrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
    tabbedPane.setMaximumSize(new Dimension(topPane.getWidth(),  topPane.getHeight() - arbitraryTweek1));

    // For the entire allowed range of tabbed pages, calculate the area
    // within the tabbed pane available to hold a table.
    for (tabIx = 0; tabIx < MAXTABS; ++tabIx)
    {
      JPanel panel = new JPanel(new MigLayout("fill" + migDebugString, "[100%]", "[100%]"));
      title = "Page " + (tabIx +1);
      tabbedPane.addTab(title, panel);
      panel.add(scrollPane, "cell 0 0, grow");
      if (tabIx == 0)
      {
        validate();
        dataRowHeight = clientsTable.getHeight() / clientRows;
      }
      else
        tabbedPane.revalidate();

      // we need to know how high the hz scrollbar is 
      if (!scrollbarHeightSet)
      {
        JScrollBar hzScrollBar = scrollPane.getHorizontalScrollBar();
        if (hzScrollBar != null)
          scrollbarHeight = hzScrollBar.getHeight();
        else
          scrollbarHeight = 0;
        scrollbarHeightSet = true;
      }
      // pick one
      boolean useViewport = false;
      boolean compViewport = false;
      boolean compViewport2 = true; // this one works best.

      // this presumptively correct method barely works
      if (useViewport)
      {
        viewportBounds = scrollPane.getViewportBorderBounds();
        viewable = ((int)viewportBounds.getHeight()) / dataRowHeight;
      }
      // this hack works better
      if (compViewport) 
      {
        tb = tabbedPane.getBoundsAt(0);
        bottom = (int)(tb.getY() + tb.getHeight());
        computedSpHeight = tabbedPane.getHeight() - (dataRowHeight + bottom);
        viewable = (computedSpHeight - scrollbarHeight) / dataRowHeight;
      }
      // this works well.  But what does JTabbedPane.getBoundsAt() have to do with it?
      if (compViewport2)
      {
        tb = tabbedPane.getBoundsAt(0); // !!! Worse Than Failure - this must be here!
        viewable = (scrollPane.getHeight() - scrollbarHeight) / dataRowHeight;
      }
      if (viewable > 0)
        viewable -= 1; // take out the title row

      dataRowsPerTabCount[tabIx] = viewable;
    }      
  } // getGuiMetrics

  void updateTable()
  {
    int tabIx, numTabs, rowsPerTab = 0, maxDisplayableRows = 0, rowsAdded, rowsThisTime;
    boolean accepted = false;

    getGuiMetrics();

    topPane = new JPanel(new MigLayout("fill" + migDebugString, "[100%]", "[100%]"));
    setContentPane(topPane);

    // how many tabs are needed to display all the data rows?
    for (tabIx = 0; !accepted && tabIx < MAXTABS; ++tabIx)
    {
      rowsPerTab = dataRowsPerTabCount[tabIx];
      maxDisplayableRows = rowsPerTab * (tabIx +1);
      if (maxDisplayableRows >= dataRows)
      {
        accepted = true;
        numTabs = tabIx +1;
      }
    }
    // did we find a best fit solution?
    if (!accepted)
    {
      topPane.add(new JLabel("Not enough space for all data rows"));
      return;
    }
    tabbedPane = new JTabbedPane();
    validate();
    tabbedPane.setMaximumSize(new Dimension(topPane.getWidth(),  topPane.getHeight() - arbitraryTweek1));
    topPane.add(tabbedPane, "cell 0 0, grow");

    // create and fill the tab pages
    for (tabIx = 0, rowsAdded = 0; rowsAdded < dataRows; ++tabIx)
    {
      if (rowsAdded + rowsPerTab > dataRows)
        rowsThisTime = dataRows - rowsAdded;
      else
        rowsThisTime = rowsPerTab;

      // create the table for the page
      clientData = new String[rowsThisTime][COLS];
      clientsTableModel = new DefaultTableModel(clientData, CLIENT_COL_NAMES);
      clientsTable = new JTable(rowsThisTime, COLS);
      clientsTable.setModel(clientsTableModel);
      clientsTable.setPreferredScrollableViewportSize(null);
      clientsTable.getTableHeader().setReorderingAllowed(false);
      clientsTable.getSelectionModel().setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
      clientsTable.getSelectionModel().setSelectionInterval(0, 0);

      // fill the table with test data
      for (int row = 0; row < rowsThisTime; ++row)
      {
        for (int col = 0; col < COLS; ++col)
        {
          String cellVal = "tab " + (tabIx +1) + " cell row " + (row+1) + " col " + (col+1);
          clientsTableModel.setValueAt(cellVal, row, col);
        }
      }
      // create scroll pane holding table
      scrollPane = new JScrollPane(clientsTable);
      scrollPane.setVerticalScrollBarPolicy(scrollPane.VERTICAL_SCROLLBAR_NEVER);
      scrollPane.setHorizontalScrollBarPolicy(scrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);

      // create tab panel holding the scroll pane
      JPanel panel = new JPanel(new MigLayout("fill" + migDebugString, "[100%]", "[100%]"));
      String title = "Page " + (tabIx +1);
      tabbedPane.addTab(title, panel);
      panel.add(scrollPane, "cell 0 0, grow");

      rowsAdded += rowsPerTab;
    }
    tabbedPane.revalidate();
  } // updateTable

  void init(String[] args)
  {
    //  uncomment this to see the migLayout component border highlighting
    //  migDebugString = ", debug";

    // total of how many data rows?
    if (args.length < 1)
    {
      dataRows = 20;
    } 
    else
    {
      dataRows = Integer.valueOf(args[0]);
      if (dataRows <= 0)
      {
        System.out.println("bad arg");
        System.exit(0);
      } 
    }
    setSize(APPWIDTH, APPHEIGHT);
    addComponentListener(new ComponentAdapter()
    {
      public void componentShown(ComponentEvent evt)
      {
      }
      public void componentHidden(ComponentEvent evt)
      {
      }
      public void componentResized(ComponentEvent evt)
      {
        updateTable();
      } // componentResized()
    }); // addComponentListener

    topPane = new JPanel(new MigLayout("fill" + migDebugString, "[100%]", "[100%]"));
    setContentPane(topPane);

    // center app window
    GraphicsConfiguration gc = getGraphicsConfiguration();
    Rectangle bounds = gc.getBounds();
    setLocation((int)((bounds.width-APPWIDTH) /2),
                           (int)((bounds.height - APPHEIGHT) /2));
    setVisible(true);
  }
  public static void main(String[] args)
  {
    try
    {
      ScrollTableTest thisTest = new ScrollTableTest();
      thisTest.init(args);
    }
    catch (Exception e)
    {
      System.out.println("runTest caught exception:  " + e.getMessage());
      e.printStackTrace();
    }
  }
} // class test 
```

# algorithm - 二叉树的第一个共同祖先

> ID：10133332
> 
> 赞同：3
> 
> 时间：2012-04-12T23:37:15.380
> 
> 标签：algorithm, data-structures, tree, binary-tree, binary-search-tree

如果我有这样的二叉搜索树，那么节点 6 和 1 的最低共同祖先是什么？

![二叉搜索树](../Images/df8fb43ef495d0cb5a3af3c3594e58e3.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T00:44:10.060

根据维基百科对[最低共同祖先](http://en.wikipedia.org/wiki/Lowest_common_ancestor)的定义，我更正了自己：

> 最低共同祖先（LCA）是图论和计算机科学中的一个概念。令 T 为具有 n 个节点的有根树。最低共同祖先定义在两个节点 v 和 w 之间，作为 T 中同时具有 v 和 w 作为后代的最低节点（**我们允许一个节点成为其自身的后代**）。

所以是的，按照这个定义，正确的答案是`6`。如果这是一个面试问题，最好提前与面试官澄清。

# algorithm - 销售点扫描 API

> ID：10133334
> 
> 赞同：-1
> 
> 时间：2012-04-12T23:37:24.363
> 
> 标签：algorithm, data-structures

> 考虑一个商店，其中的商品有单位价格，但也有数量价格。例如，苹果可能每个 1.00 美元或 4 个苹果 3.00 美元。
> 
> 实施一个销售点扫描 API，该 API 接受任意的产品订购（类似于在结帐行发生的情况），然后根据单价或批量价格返回整个购物车的正确总价适用的。
> 
> 以下是按代码列出的产品和要使用的价格（没有销售税）：
> 
> 产品编号 | 价格
> 
> 一个 | 每个 2.00 美元或 7.00 美元 4 个
> 
> 乙| 12.00 美元
> 
> C | 六包 1.25 美元或 6 美元
> 
> D | 0.15 美元
> 
> 应该有一个类似于以下伪代码的顶级销售点终端服务对象。您可以随意设计和实现其余代码，包括如何在系统中指定价格：
> 
> terminal.setPricing(...) terminal.scan("A") terminal.scan("C") ... 等等 result = terminal.total
> 
> 以下是您应该用于测试用例的最少输入。必须证明这些测试用例可以在您的程序中工作：
> 
> 按此顺序扫描这些项目：ABCDABAA；确认总价为 32.40 美元。按此顺序扫描这些项目：CCCCCCC；确认总价为 7.25 美元。按以下顺序扫描这些项目：ABCD；确认总价为 15.40 美元。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T23:47:24.093

1) 为每个项目存储单价、组价和每组单位。

2) 在扫描阶段，只需跟踪每个项目的单位数。

3) 对于每个项目，将成本增加：

```
(number units) / (units per group for item) * group price +
(number units) % (units per group for item) * unit price 
```

线性空间量按项目数量使用，线性空间量用于跟踪扫描项目的计数。运行时也是线性的。

> 您可以在 PHP 中实现：test.php

```
<?php 
   echo "Please input the product code string:";
    $handle = fopen ("php://stdin","r");
    $line = fgets($handle);
    echo 'input : ' .$line. "n";
    $inputProducts = rtrim($line);

    $total = 0;

    $inputArray = str_split($inputProducts, 1);

    $counts = array_count_values($inputArray);

    $productsprice = array('A'=>array('1'=>2.00, '4'=>7.00), 'B'=>array('1'=>12.00), 'C'=>array('1'=>1.25, '6'=>6.00), 'D'=>array('1'=>0.15));
    foreach($counts as $code=>$amount) {
        echo "Code : " . $code . "n";
        if(isset($productsprice[$code]) && count($productsprice[$code]) > 1) {
            $groupUnit = max(array_keys($productsprice[$code]));
            $subtotal = intval($amount / $groupUnit) * $productsprice[$code][$groupUnit] + fmod($amount, $groupUnit) * $productsprice[$code]['1'];
            $total += $subtotal; 
        }
        elseif (isset($productsprice[$code])) {
            $subtotal = $amount * $productsprice[$code]['1'];
            $total += $subtotal;
        }
        echo "Subtotal: " . $subtotal . "n";
    }
    echo 'Final Total: $' . number_format($total, 2). "n"; 
    ?> 
```

执行 CLI：php test.php

# c++ - QSpinBox 输入 NaN 作为有效值

> ID：10133336
> 
> 赞同：3
> 
> 时间：2012-04-12T23:37:33.787
> 
> 标签：c++, qt, qspinbox

我正在尝试扩展 QSpinBox 以便能够输入“NaN”或“nan”作为有效值。根据文档，我应该使用 textFromValue、valueFromText 和 validate 函数来完成此操作，但我无法让它工作，因为它仍然不允许我输入除数字之外的任何文本。这是我的 .h 和 .cpp 文件中的内容：

CPP 文件：

```
#include "CustomIntSpinBox.h"

CustomIntSpinBox::CustomIntSpinBox(QWidget *parent) : QSpinBox(parent)
{
    this->setRange(-32767,32767);
}

QString CustomIntSpinBox::textFromValue(int value) const
{
    if (value == NAN_VALUE)
    {
        return QString::fromStdString("nan");
    }
    else
    {
        return QString::number(value);
    }
}

int CustomIntSpinBox::valueFromText(const QString &text) const
{
    if (text.toLower() == QString::fromStdString("nan"))
    {
        return NAN_VALUE;
    }
    else
    {
        return text.toInt();
    }
}

QValidator::State validate(QString &input, int pos)
{
    return QValidator::Acceptable;
} 
```

H 文件：

```
#ifndef CUSTOMINTSPINBOX_H
#define CUSTOMINTSPINBOX_H

#include <QSpinBox>
#include <QWidget>
#include <QtGui>
#include <iostream>

using namespace std;

#define NAN_VALUE 32767

class CustomIntSpinBox : public QSpinBox
{
    Q_OBJECT

public:
    CustomIntSpinBox(QWidget *parent = 0);
    virtual ~CustomIntSpinBox() throw() {}

    int valueFromText(const QString &text) const;
    QString textFromValue(int value) const;
    QValidator::State validate(QString &input, int pos);
};

#endif // CUSTOMINTSPINBOX_H 
```

我有什么遗漏吗？还是做错了？如果有更简单的方法来做到这一点，那就太好了……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T07:33:19.880

的签名`QAbstractSpinBox::validate()`是：

```
QValidator::State QAbstractSpinBox::validate ( QString & input, int & pos ) const 
```

所以你的`validate()`方法的签名有两种不同：它不是`const`，你有`int pos`而不是`int& pos`。因此它不会覆盖`QAbstractSpinBox::validate`，也不会被`QAbstractSpinBox`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T12:45:17.163

如果您可以将范围的下限扩展 -1 并使用普通的`QSpinBox`or`QDoubleSpinBox`和调用`spinbox->specialValueText("nan")`，这将显示字符串`nan`when `value() == minimum()`。用户将无法手动输入字符串“nan”，但您始终可以在 spinbox 旁边添加一个执行按钮`spinbox->setValue(spinbox->minimum())`。这是一个可编译的示例：

```
// main.cpp
#include <QSpinBox>
#include <QDoubleSpinBox>
#include <QDialog>
#include <QApplication>
#include <QVBoxLayout>

#include <limits>

class Tester : public QDialog {
    Q_OBJECT
public:
    static const int NanValue = -32767-1;
    explicit Tester(QWidget * parent=0)
        : QDialog(parent),
          m_spinBox(new QSpinBox(this)),
          m_doubleSpinBox(new QDoubleSpinBox(this))
    {
        QVBoxLayout * vlay = new QVBoxLayout(this);
        vlay->addWidget(m_spinBox);
        vlay->addWidget(m_doubleSpinBox);

        m_spinBox->setRange(NanValue,32767);
        m_doubleSpinBox->setRange(NanValue,32767);

        m_spinBox->setValue(NanValue);
        m_doubleSpinBox->setValue(NanValue);

        updateSpecialValueText();
    }

protected:
    void changeEvent(QEvent *e) {
        QDialog::changeEvent(e);
        if (e->type() == QEvent::LocaleChange)
            updateSpecialValueText();
    }

private:
    void updateSpecialValueText() {
        static const double NaN = std::numeric_limits<double>::quiet_NaN();
        m_spinBox->setSpecialValueText(locale().toString(NaN));
        m_doubleSpinBox->setSpecialValueText(locale().toString(NaN));
    }

private:
    QSpinBox * m_spinBox;
    QDoubleSpinBox * m_doubleSpinBox;
};

int main(int argc, char * argv[]) {
    QApplication app(argc, argv);

    Tester t;
    return t.exec();
}

#include "main.moc" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T00:27:04.137

也许 QSpinBox 设置了一个 lineEdit，它有一个 QIntValidator 作为 QValidator。至少 QAbstractSpinBox::setLineEdit 的文档建议 lineEdit 的验证器优先于 QAbstractSpinBox::validate 函数。

# c# - “Google 服务”的 OAuth2 身份验证返回“invalid_request”

> ID：10133337
> 
> 赞同：1
> 
> 时间：2012-04-12T23:37:36.420
> 
> 标签：c#, .net, google-api, oauth-2.0, jwt

我正在尝试形成一个 json 请求，以使用 oath2 规范进行身份验证以进行 Google 的“服务帐户”身份验证。我在[这里](https://developers.google.com/accounts/docs/OAuth2ServiceAccount#libraries)使用谷歌的文档。它正在使用 JWT。似乎没有太多关于如何使用 C# 执行此操作的信息。这是我正在使用的 RAW json 请求，但我能从谷歌得到的唯一响应是“invalid_request”。

```
POST https://accounts.google.com/o/oauth2/token HTTP/1.1
Content-Type: application/x-www-form-urlencoded
Host: accounts.google.com
Content-Length: 457
Expect: 100-continue
Connection: Keep-Alive

{
  "grant_type": "assertion",
  "assertion_type": "http://oauth.net/grant_type/jwt/1.0/bearer",
  "assertion": "JWT (including signature)"
} 
```

关于可能发生的事情有什么想法吗？我正在尝试创建一个 Windows 服务，以设定的时间间隔 ping 谷歌纬度位置？是否有另一种方法可以在不跳过这个环节的情况下访问该 API？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T00:49:58.597

文档相对清楚，您应该发布一个 urlencoded 字符串。与其尝试发布 json，不如发布 application/x-www-form-urlencoded 数据：

```
var invariantPart = "grant_type=assertion&" + 
   "assertion_type=http%3A%2F%2Foauth.net%2Fgrant_type%2Fjwt%2F1.0%2Fbearer&" +
   "assertion=";
var fullPostData = invariantPart + Uri.EscapeDataString(myCalculatedAssertion);
//POST fullPostData to google 
```

# matlab - 可以通过编程方式打开/关闭 Matlab PARFOR 循环吗？

> ID：10133340
> 
> 赞同：10
> 
> 时间：2012-04-12T23:37:42.763
> 
> 标签：matlab, parfor

有一个关于 MATLAB 中 parfor 的简单问题。我想在我的程序中设置一个标志，以在 parfor 和常规 for 循环之间进行切换。基本上，我需要这个功能，以便我的代码的某些部分可以在“调试”模式下更新图形，然后当标志关闭时，使用 parfor 而不进行图形更新以提高速度。

所以，我正在寻找具有此功能的简单东西：

```
if (flag)
  for i = 1:n
else
  parfor i = 1:n
end

  % Do loop tasks.

  end 
```

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T01:28:39.607

不，这是不可能的。但是，如果你可以将循环体包装在一个单独的函数中，你可以让一个`parfor`或一个`for`循环调用循环体，即

```
if (flag)
   parfor i=1:n
      out(i) = loopBody(i)
   end
else
   for i=1:n
      out(i) = loopBody(i)
   end
end 
```

或者，您可以编辑代码，以便在循环之前`parfor`或`for`在循环之前，这是我经常做的事情。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-07T15:58:47.623

另一种选择 - 使用[PARFOR的可选参数](http://www.mathworks.co.uk/help/distcomp/parfor.html)

```
if flag
  arg = Inf;
else
  arg = 0;
end
parfor (idx = 1:n, arg)
   ...
end 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-26T23:07:27.297

当您关闭池时`matlabpool close`，`parfor`行为就像 a`for`并允许所有图形处理。所以你只需要在调试时关闭池。

# clojure - clojure：未调用 for 循环内容

> ID：10133341
> 
> 赞同：1
> 
> 时间：2012-04-12T23:37:44.713
> 
> 标签：clojure

我正在尝试使用 Clojure 的 BaseX 的内部数据类型构建 XML 结构。

```
(defn basex-elem [token-name dict]
  (let [elem (org.basex.query.item.FElem.
                (org.basex.query.item.QNm. token-name))]
    (for [[k v] dict]
      (do
        (println "THIS IS REACHED")
        (let [k-name (org.basex.query.item.QNm. (.getName k))
              k-attr (org.basex.query.item.FAttr.
                        k-name 
                        org.basex.util.Token/token v))]
          (.add elem k-attr))))
    elem)) 
```

当使用它来创建元素时，永远不会打印“THIS IS REACHED”：

```
(def test-elem (basex-elem "element-name" {:key1 "value1", :key2 "value2"}))
; => #'user/test-elem 
```

因此该值在没有任何属性的情况下返回：

```
test-elem
; => #<FElem <element-name/>> 
```

但是添加属性会起作用。

```
(.add test-elem
      (org.basex.query.item.FAttr.
        (org.basex.query.item.QNm. "foo")
        (org.basex.util.Token/token "bar")))
; => #<FElem <element-name foo="bar"/>> 
```

因此，大概我在循环中做错了什么。任何指针？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T23:41:56.103

`for`不是 clojure 中的循环构造，而是列表理解并产生惰性序列。

`doseq`当有副作用时使用。

# java - Java如何防止用户在FileChooser OpenFileDialog中编辑文件名

> ID：10133345
> 
> 赞同：1
> 
> 时间：2012-04-12T23:38:22.853
> 
> 标签：java, swing, jfilechooser

我需要一个打开对话框文件选择器，它可以打开只读文件。我希望用户只能单击文件名来选择它，而没有编辑名称的选项。不过，用户应该能够浏览到其他文件夹。

我在 Ubuntu 10.11 上使用最新的 Java（截至 1 月）。

TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:09:03.377

这个[例子](https://stackoverflow.com/a/4054307/230513)表明可编辑的文件名是[`FileChooserUI`](http://docs.oracle.com/javase/6/docs/api/javax/swing/plaf/FileChooserUI.html)实现的一个特性。例如，*没有*`com.apple.laf.AquaFileChooserUI`这个能力。本[教程](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html)没有建议可以更改的任何方式，但这可能会建议自定义替代方案。*[`FileBrowser`](https://codereview.stackexchange.com/q/4446/6692)*

# c# - 将数据从桌面传输到安卓设备

> ID：10133350
> 
> 赞同：1
> 
> 时间：2012-04-12T23:38:54.347
> 
> 标签：c#, android

几天前我开始在Android平台上工作。我想将数据从台式计算机传输到 android 设备 (ICONIA TAB)。我在台式计算机中使用 C#，并希望使用无线网络传输数据。

例如，如果我在 C# 表单中移动光标，它会将相应的坐标值传递给平板电脑。

任何解决问题的链接/示例代码将不胜感激

# objective-c - 如何从 iOS 的 javascript 页面中抓取数据？

> ID：10133355
> 
> 赞同：3
> 
> 时间：2012-04-12T23:39:26.303
> 
> 标签：objective-c, ios5, web-scraping

我正在为一个[网站](http://www.rainlog.org/)开发一个移动应用程序（兼容 iOS 5.0 及更高版本） ，用户可以直接从他们的登录页面查看某些数据。用户可以通过选择特定选项（即位置和/或日期）来细化结果。他们不提供任何网络服务调用，也不允许我们访问他们的数据库。所以我收集数据的唯一方法是直接“抓取”网站。

我的问题是我不知道如何通过手机的 http 请求对用户在网站上进行的更改。例如下面的网站：

![在此处输入图像描述](../Images/52f0a29f6214d12f9a1582797614b2cf.png)

可以从站点中提取并使用以下命令保存为字符串

```
NSString *html = [NSString stringWithContentsOfURL:urlrequest encoding:NSUTF8StringEncoding error:&err]; 
```

我能够分离相关数据：

```
// I decided to add the script function name in case anyone wanted to look for themselves
<script type="text/javascript" language="Javascript">
//<![CDATA[
function loadData(){

var winMsgTitle = "Date: 04/11/2012";

// this is the actual data I'm concerned with:
gLatLong = new GLatLng(31.59019444444444, -110.50655555555555);
tmpMapIcon = new MapIcon("0_0", 21, 15);
marker = createMarker(gLatLong, 0.0, createInfoWinMsg(winMsgTitle, ".00", ".84", "5711", "2012", "", "07:00"), tmpMapIcon);
map.addOverlay(marker);
point = null;marker = null;
gLatLong = new GLatLng(32.2938260182, -110.7896411419);
tmpMapIcon = new MapIcon("0_0", 21, 15);
marker = createMarker(gLatLong, 0.0, createInfoWinMsg(winMsgTitle, ".00", "1.00", "1254", "2012", "", "07:00"), tmpMapIcon);
map.addOverlay(marker);
point = null;marker = null;
gLatLong = new GLatLng(33.5966853633, -112.1744066477);
tmpMapIcon = new MapIcon("0_0", 21, 15);
marker = createMarker(gLatLong, 0.0, createInfoWinMsg(winMsgTitle, ".00", ".70", "256", "2012", "", "07:00"), tmpMapIcon);
map.addOverlay(marker);
point = null;marker = null; 
```

*注：明显有更多的点，这只是剪掉它*

为了获得另一个位置或日期，我必须通过站点手动选择并选择右侧窗格中的选项。我的问题是，如何通过objective-c 以编程方式进行这些更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T00:05:20.150

我想您使用 UIWebView 来加载该页面。

一种可能的解决方案是编写 JavaScript 函数来模拟右侧窗格上的正常用户操作（例如，使用 jQuery 的触发函数来选择下拉列表、选择“日期范围”等）。

这些 javascript 函数可以在您的应用程序代码中编码为字符串。

然后，调用`stringByEvaluatingJavaScriptFromString:`webview 来运行这些 javascript 函数：

```
[webView stringByEvaluatingJavaScriptFromString:javascript] 
```

这里的 javascript 参数是您构造的调用您的 javascript 函数的字符串。例如：

```
NSString *javascript = [NSString stringWithFormat:@"selectRegion(%@)", targetRegion]; 
```

这样做时，我建议您编写这些 javascript 并使用浏览器的调试工具（Safari 的 Web Inspector、Firefox 的 FireBug 插件...）对其进行测试，以确保它们首先按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T00:15:11.377

如果我理解正确，您想在不向用户显示网站的情况下提取数据吗？

如果是的话，我目前能想到的唯一解决方案是屏幕外 UIWebView，您可以在其中执行一些 JavaScript 魔术来模拟用户输入，然后将数据取出。

然而，这是一种非常骇人听闻的方法，我不建议您在运输应用程序中使用它。
事实上，我建议根本不要进行任何网络抓取，因为如果他们更改网站结构，您的应用程序将无法运行。

如果您真的是“为他们”开发应用程序，那么请告诉他们您需要一个 Web 服务来编写一个好的应用程序。

如果您不是“为他们”工作，而只是尝试编写一个使用他们的服务获取数据的应用程序，那么您所做的不仅复杂，而且很可能还违反了他们的 EULA，因此您不应该这样做一点也不。考虑与他们联系，看看在这种情况下是否可以让他们与您合作。

# mysql - INNER JOIN 之前的 WHERE 子句

> ID：10133356
> 
> 赞同：40
> 
> 时间：2012-04-12T23:39:35.260
> 
> 标签：mysql, join, optimization, where

如果我有

```
SELECT * FROM Table1 t1 
LEFT JOIN Table2 t2 ON t1.id = t2.id 
WHERE t1.user='bob'; 
```

该子句是否`WHERE`在两个表之后运行`JOINED`？

如何使它在 JOIN 之前运行？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-04-12T23:50:19.070

该`where`子句将在 the 之前执行，`join`这样它就不会加入不必要的记录。所以你的代码很好。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-04-12T23:41:52.840

更改`WHERE`为另一个`JOIN`条件

`LEFT JOIN Table2 t2 on t1.id = t2.id AND t1.user='bob'`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T17:00:22.513

根据我在左连接的经验，您不能在 ON 语句中排除“左”（t1）表中的记录，因为 - 根据定义 - 所有 t1 记录都将被包括在内。where 语句确实有效，因为它将在之后应用于连接的结果。

我不完全知道您想要实现什么，但很可能内部连接也适合您的需求，然后您*可以*将 t1.user='bob' 条件添加到 ON 语句中。

但是，如果 Mosty Mostacho 是正确的，则条件的位置（WHERE 与 ON）与执行速度无关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-14T08:05:56.410

您应该在其他条件之前将`t1.user='bob'`条件添加到`ON`子句，它将首先被评估：

```
SELECT * FROM Table1 t1 
LEFT JOIN Table2 t2
ON t1.user='bob' AND t1.id = t2.id; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-19T10:14:12.813

您可以使用 FROM 之后的表表达式，如下所示：

```
SELECT *
FROM (SELECT
        id
    FROM Table1
    WHERE user = 'bob') AS t1
LEFT JOIN Table2 t2
    ON t1.id = t2.id 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T23:42:32.407

你可以做

```
SELECT * 
    FROM Table1 t1 
    LEFT JOIN Table2 t2
        ON t1.id=t2.id AND t1.user='bob'; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-08T02:59:26.113

RIGHT JOIN 是解决方案：

```
SELECT cars.manufacturer, cars.year FROM cars 
RIGHT JOIN (SELECT m.manufacturer FROM cars AS m ORDER BY m.year DESC LIMIT 3) subq 
ON cars.manufacturer=subq.manufacturer 
```

还没有经过严格的考验，但似乎有效。

# jquery - JQuery Cycle Prev/Next 不起作用

> ID：10133358
> 
> 赞同：0
> 
> 时间：2012-04-12T23:39:45.507
> 
> 标签：jquery, jquery-cycle

我想使用 JQuery 循环创建幻灯片，观众可以通过单击图像按钮查看上一张或下一张幻灯片。

我使用从这里下载的javascript：http: [//jquery.malsup.com/cycle/int2.html](http://jquery.malsup.com/cycle/int2.html)

这是我的 HTML 的样子：

```
<script type="text/javascript" src="js/jquery.cycle.all.js"></script>

<script type="text/javascript">
$(document).ready(function()
{
$('#slide').cycle({ 
fx:     'fade', 
speed:  'fast', 
timeout: 0, 
next:   '#next', 
prev:   '#prev' 
});
</script> 
```

并与幻灯片分开：

```
 <div id="slideshow-wrapper">
        <div id="slideshow-control">
            <a id="prev" href="#"><img src="images/prev.png" alt="Previous" /></a>
            <a id="next" href="#"><img src="images/next.png" alt="Next" /></a>
        </div>

        <div id="slide">
            <img src="images/banner/banner01.jpg" alt=" " />
            <img src="images/banner/banner02.jpg" alt=" " />
            <img src="images/banner/banner03.jpg" alt=" " />
        </div>
    </div><!--#slideshow-wrapper end--> 
```

我看到了有关此问题的其他帖子，我尝试了建议的解决方案；但是我仍然无法让幻灯片正常工作。:-/ 因为我对 JavaScript 了解不多，所以我很确定我只是遗漏了一些东西和/或复制了一些错误的东西。

如果有人可以看看这里出了什么问题，我将不胜感激。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:44:14.957

你没有用正确数量的大括号/括号来结束你的脚本：

```
$(document).ready(function()
{
  $('#slide').cycle({ 
                      fx:     'fade', 
                      speed:  'fast', 
                      timeout: 0, 
                      next:   '#next', 
                      prev:   '#prev' 
                    }
                   ); //end of #slide.cycle
}); //end of doc-ready 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T19:14:35.390

此外，请确保您的下一个和上一个 ID 不再出现。

在开发人员工具的“元素”选项卡中按 Ctr+F 并搜索“上一个”或“下一个”。

# java - 继承和方法

> ID：10133359
> 
> 赞同：0
> 
> 时间：2012-04-12T23:39:46.100
> 
> 标签：java, inheritance, methods, constructor

我对类和子类的构造函数（扩展第一个类）有问题

这是基本类的构造函数：

```
 public Airplane(int x, int y, int width)
    {
        this.x = x;
        this.y = y;
        this.width = width;
        createSeats();
    } 
```

这是另一个类的构造函数，它扩展了基本类

```
public Boeing(int x, int y, int width)
{
    super(x,y,width);
    createSeats();
} 
```

问题是这`createSeats()`是两个类中的另一种方法，但`Boeing`必须覆盖主要方法。我怎样才能使它能够在不采取该`createSeats()`方法的情况下工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:51:06.347

如果您知道您希望所有子类在构造`Airplane`时调用`createSeats()`，那么您可以将调用留在`Airplane`构造函数中并从`Boeing`.

如果您只想要特定的子类，例如`Boeing`调用`createSeats()`构造，那么您可以将调用留在`Boeing`构造函数中并从`Airplane`.

您**不需要**在两个构造函数中进行调用，将它们留在那里将导致`createSeats()`每次`Boeing`初始化都会被调用两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T23:51:45.460

对超级构造函数的调用已经包含对 createSeats() 方法的调用，因此您不必在波音构造函数中重新包含它。

如果您只想更改创建座位的行为，只需覆盖该方法即可。

```
class Airplane {
  public Airplane(int x, int y, int width)
  {
    this.x = x;
    this.y = y;
    this.width = width;
    createSeats();
  }

  void createSeats() { /* create them */ }
}
class Boeing {
  public Boeing(int x, int y, int width)
  {
    super(x,y,width); // same steps as super class
  }

  @Override
  void createSeats()
  {
    // do something else entirely
    // possibly call super.createSeats()
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T23:53:56.643

通常在超类中提供方法的默认实现，它允许您通过覆盖子类中的方法来自定义子类中的行为。例如，**飞机是否知道如何在****波音**上创建座位？可能不会，因此您将**覆盖**子类中的**createSeats** () 以提供适用于您特定类型**Airplane**的特定实现。

**从超类的构造函数内部调用createSeats** () 方法这一事实保证了在构造对象时始终会调用所讨论的方法。这是一种常见的设计模式。它被称为模板方法。基本上，您有一个方法可以按特定顺序封装许多方法的执行以产生结果。在您的情况下，有一种方法，即**createSeats** ()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T23:57:05.783

我同意@milkplusvellocet 的回答，但是您也说“问题是 createSeats() 是两个类中的另一种方法，但波音必须覆盖主要方法。” 如果您需要调用超类的方法而不是您自己的方法，您可以随时调用`super.createSeats()`. 这样，您始终可以区分超类中的方法和您自己的方法。

但是，也就是说，这几乎总是在您覆盖的方法中使用。例如，

```
@Override
public void createSeats() {
  doSomethingSpecial();
  super.createSeats();
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-12T23:53:56.253

@覆盖

在您要覆盖的方法应该完成工作之前

# r - 子集矩阵

> ID：10133360
> 
> 赞同：2
> 
> 时间：2012-04-12T23:40:01.310
> 
> 标签：r

考虑跟随向量资源和矩阵团队。向量 res 表示索引，我只需要提取那些索引号在向量 res 中且性别 =“F”的名称。

我需要在 R 中执行此操作，因为我是 R 的新手，无法解决此问题。

```
res
[1]  2 12 16  5  6 19 17 14  9  4
team
names       genders
[1,] "aa"           "M"       
[2,] "ab"            "M"       
[3,] "al"            "M"       
[4,] "alp"           "M"       
[5,] "amr"           "F"       
[6,] "and"           "M"       
[7,] "an"            "M"       
[8,] "anv"           "F"       
[9,] "as"            "M"       
[10,] "ed"            "M"       
[11,] "neh"           "F"       
[12,] "pan"           "M"       
[13,] "poo"           "F"       
[14,] "ra"            "M"       
[15,] "roh"           "M"       
[16,] "shr"           "F"       
[17,] "sub"           "M"       
[18,] "val"           "M"       
[19,] "xi"            "M" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T00:01:40.077

如果您`team`是 a`matrix`或 a ，这应该有效`data.frame`：

```
# emulate your data
team <- data.frame(names=LETTERS, genders=rep(c("M","F"), 13))
res <- 10:26

team[intersect(res, which(team[,"genders"]=="F")), "names"]
#[1] J L N P R T V X Z
#Levels: A B C D E F G H I J K L M N O P Q R S T U V W X Y Z

# Try with a matrix instead of data.frame
team <- as.matrix(team)
team[intersect(res, which(team[,"genders"]=="F")), "names"]
#[1] "J" "L" "N" "P" "R" "T" "V" "X" "Z" 
```

基本思想是获取“F”性别行的索引（使用`which`），然后使用集合操作`intersect`将其与您的`res`索引进行“与”。还有一些`union`变`setdiff`体有时会很有用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-13T00:04:55.860

有很多方法可以做到这一点。

您可以先选择哪些行在`res`：

```
team$names[res] 
```

然后你可以选择哪些`gender`是`"F"`：

```
team$names[res][  team$genders[res]=="F"   ] 
```

请注意，`team$genders[res]`挑选出与 中的行相对应的性别`res`，然后过滤以仅接受那些是女性的。

* * *

如果你喜欢，你可以反过来做：

```
team$names[  team$genders=="F" & (1:nrow(team) %in% res) ] 
```

这`team$genders=="F"`是一个长度的逻辑向量`nrow(team)`，`TRUE`只要性别是“F”，`FALSE`否则。

`1:nrow(team)`生成行号，如果`1:nrow(team) %in% res`行`TRUE`号在`res`.

上面写着“`&`确保性别是“F”并且行号在`res`“。

* * *

您甚至可以执行`which(team$genders=="F")`返回女性行号向量的操作，然后执行以下操作：

```
team$names[ intersect(  which(team$genders=="F") , res ) ] 
```

其中，女性和女性中都存在的*选择*`intersect`行号。 *`res`*

 ** * *

而且我相信人们会想到更多的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T04:04:36.847

```
team <- structure(c("aa", "ab", "al", "alp", "amr", "and", "an", "anv", 
"as", "ed", "neh", "pan", "poo", "ra", "roh", "shr", "sub", "val", 
"xi", "M", "M", "M", "M", "F", "M", "M", "F", "M", "M", "F", 
"M", "F", "M", "M", "F", "M", "M", "M"), .Dim = c(19L, 2L), .Dimnames = list(
    NULL, c("names", "genders")))

 team[,"names"][ intersect(  which(team[,"genders"]=="F") , res ) ]
#[1] "amr" "shr"
 team[,"names"][ team[,"genders"]=="F" & 1:NROW(team) %in% res  ]
#[1] "amr" "shr" 
```*

# haskell - Haskell替换列表中的元素

> ID：10133361
> 
> 赞同：22
> 
> 时间：2012-04-12T23:40:05.340
> 
> 标签：haskell, built-in

是否有任何内置函数可以替换haskell中给定索引处的元素？

例子：

`replaceAtIndex(2,"foo",["bar","bar","bar"])`

应该给：

```
["bar", "bar", "foo"] 
```

我知道我可以制作自己的功能，但它似乎应该是内置的。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-13T00:30:51.443

如果您需要更新特定索引处的元素，列表并不是最有效的数据结构。您可能要考虑改用`Seq`from [`Data.Sequence`](https://hackage.haskell.org/package/containers-0.5.6.3/docs/Data-Sequence.html)，在这种情况下，您要查找的函数是[`update :: Int -> a -> Seq a -> Seq a`](https://hackage.haskell.org/package/containers-0.5.6.3/docs/Data-Sequence.html#v:update).

```
> import Data.Sequence
> update 2 "foo" $ fromList ["bar", "bar", "bar"]
fromList ["bar","bar","foo"] 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-12T23:48:48.057

据我所知（并且可以找到）它默认不存在。但是，存在`splitAt`于`Data.List`：

```
replaceAtIndex n item ls = a ++ (item:b) where (a, (_:b)) = splitAt n ls 
```

虽然这是 O(N)。如果您发现自己经常这样做，请查看另一种数据类型，例如数组。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-12T23:47:01.530

有实际的数组，但列表实际上是单链表，替换元素的概念并不那么明显（并且访问给定索引处的元素可能表明您不应该使用列表，因此可能会鼓励的操作它被避免）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-27T08:32:09.527

试试这个解决方案：

```
import Data.List

replaceAtIndex :: Int -> a -> [a] -> [a]    
replaceAtIndex i x xs = take i xs ++ [x] ++ drop (i+1) xs 
```

它的工作原理如下：

获取前 i 个项目，添加值“x”，添加其余 i+1 个项目

# locking - 计算密码锁距离的有效方法

> ID：10133363
> 
> 赞同：2
> 
> 时间：2012-04-12T23:40:26.383
> 
> 标签：locking, combinations, formula

我有一个问题，我必须找到从锁上的一个位置到另一个位置的距离或刻度。例如，假设一个数字为 0 - 39 的密码锁，我想从 38 移动到 10，并得到 12，这是从 38 到 10 所需的刻度数。这可以设置为 (38 + x) mod 40 = 10，除了由于模运算而没有任何方法可以隔离 x。谁能想到一种方法来创建一个简单的公式来找到 38 到 10 之间有 12 个刻度。我知道如何使用条件分支来做到这一点，但如果可能的话，我更喜欢使用公式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T00:13:49.193

有两种情况。

1.  “范围内”的距离
2.  距离“溢出”

您需要计算两者并选择最小值。

```
min((to-from) mod 40, (from-to) mod 40) 
```

更新：以前的版本并非在所有情况下都有效（例如从 1 到 25）。当前版本总是返回最便宜的刻度，但没有方向（无符号）。

# php - 将 facebook 登录添加到现有的登录系统

> ID：10133364
> 
> 赞同：6
> 
> 时间：2012-04-12T23:40:33.057
> 
> 标签：php, facebook

我想将 facebook 登录添加到我现有的登录系统中，记住我，我知道它应该如何工作：

## 精简版

检查用户是否登录到 facebook，如果用户是我们检索用户 ID 并检查它是否连接到任何帐户。如果是，我们会获取一些数据并存储会话变量，并且用户已登录。

## 长版

**如何注册**

1.  用户点击注册，用户来到一个页面，有两个选项注册和使用 facebook 注册。

2.  如果用户选择用 facebook 注册，那么一些信息将被自动填充（如电子邮件），然后用户需要填写密码和昵称。然后我们验证信息，如果它有效，我们存储用户 + facebook 用户 ID。如果用户选择注册，我们不会自动填充，当然也不会存储 facebook 用户 ID。

**如何检查用户是否登录：**

1.  检查是否设置了会话变量，如果是用户已登录。如果没有，则继续执行步骤 2。

2.  检查是否存在带有记住我代码的 cookie。如果存在，我们检查代码是否有效，如果是，则用户正在登录。如果 cookie 不存在，则继续执行步骤 3。

3.  检查用户是否在 facebook 登录如果用户是我们检索用户 ID 并查看它是否与 db 中的行匹配如果它存储会话变量并且用户已登录。如果没有，那么我们显示登录形式。

**要检索 facebook 用户 ID，我使用以下代码：**

```
<?php
require_once("facebook.php");

$config = array();
$config['appId'] = 'app id';
$config['secret'] = 'secret app id';
$facebook = new Facebook($config);

$uid = $facebook->getUser();
?> 
```

**问题**

1.  这是正确且安全的方法吗？
2.  如果没有，你能指出我正确的方向吗？
3.  在我获得用户 ID 之前，用户需要允许我的应用程序，对吗？
4.  上面的代码适用于 localhost 但不适用于我的服务器，它每次都返回 0。解决方案？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T01:53:36.110

答案： 1\. 我认为你是在正确的轨道上。您还可以确保登录的 [本地用户] 可以访问注册页面并将 FB 帐户加入推送到用户个人资料页面或类似的东西。

3.  您可以轻松获取用户 ID，因为它是 facebook 为所有注册帐户提供的公共信息。但是该用户需要允许您的应用程序才能从 Facebook 个人资料中获取他们的信息。但好消息是，几乎所有工作都由 facebook 为您完成，您只需将用户指向正确的 url。还有一个社交插件，您可以使用[Facebook 注册社交插件在您的网站/应用上注册用户](https://developers.facebook.com/docs/plugins/registration/)

如 facebook api 文档中所述，`$uid`将包含当前用户 [browsing your site] 的 facebook 用户 ID，或在调用`$uid = $facebook->getUser();`

因此，首先，您可以检查 $uid 是否有效 [不是 null 或零]。然后，如果它通过了该测试，您可以尝试通过发出`$user = $facebook->api('/me')`. 如果您已经登录到 Facebook，那应该会为您提供用户个人资料。如果没有，那么用户可能有一个 facebook 帐户但没有登录。

> 请注意，如果未传递正确的令牌，则 api('/me') 可能会引发异常，因此您应该将其包装在 try-catch 块中并根据您的应用程序处理异常。[也许假设用户不是登录。如果你确定你的 app_id 和 secret id 是有效的]

`$loginUrl = $facebook->getLoginUrl()`如果 $user 为空，那么您可以通过调用和重定向用户或提供指向 URL 的可点击链接来获取将用户重定向到 [for facebook login] 的url。

所有这些都记录在[facebook api 文档中](https://developers.facebook.com/docs/reference/php/)

示例代码：

```
<?php
require_once("facebook.php");

$config = array();
$config['appId'] = 'app id';
$config['secret'] = 'secret app id';
$facebook = new Facebook($config);

$uid = $facebook->getUser();

if( ! $uid){ // we have an id

    try{
        $user = $facebook->api('/me'); //get the current user's FB public profile
        if($user){ // we have a valid user who is logged in to his facebook account
            $logoutURL = $facebook->getLogoutUrl(); // user 
         }
    }catch(FacebookApiException $e){
        $user = null;
        $loginURL = $facebook->getLoginUrl();
    }
} 
```

同样，所有这些都记录在 facebook PHP 客户端中，因此它是您开始的最佳选择。Facebook 在没有太多通知的情况下更改其 api，因此您应该访问他们的开发人员页面，以防您的代码开始出现异常行为。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T02:12:16.733

答案 1：这是正确的方法，答案 2：使用 php sdk ，它已经拥有一切来保护您的 fb 登录。答案 3：是的，用户需要先允许您的应用，然后才能使用用户 ID。答案 4：可能是因为您尚未在 facebook 上创建应用程序并使用演示文件中的代码。演示文件链接到一个应用程序，该应用程序的站点 url 为`localhost`. 因此，要解决此问题，请在 facebook 上创建一个应用程序，提供一个站点 url（您的服务器的 url）。然后它应该工作:)

欢迎更多问题:)

# java - 鼠标单击 JTextField 时如何清除 JTextField

> ID：10133366
> 
> 赞同：12
> 
> 时间：2012-04-12T23:40:36.517
> 
> 标签：java, swing, jtextfield, mouselistener

当鼠标单击该文本字段时，我需要使该程序清除该文本字段中的文本。我尝试了一些事情，但没有一个对我有用。

这是完整的代码：

```
public class TimerClassPanel extends JFrame implements MouseListener{

    public TimerClassPanel(){
        setTitle("Timer Class");
        setSize(WIDTH, HEIGHT);

        timer = new Timer(DELAY, new TimerEventHandler());

        pane = getContentPane();
        pane.setLayout(null);

        int r = (int)(9.0 * Math.random()) + 1;
        String str2 = Integer.toString(r);

        label = new JLabel(str2, SwingConstants.CENTER);
        label.setSize(150,30);
        label.setLocation(0,0);

        textField = new JTextField();
        textField.setSize(150,30);
        textField.setLocation(150,0);

        startB = new JButton("Start");
        startbh = new StartButtonHandler();
        startB.addActionListener(startbh);
        startB.setSize(100,30);
        startB.setLocation(0,30);

        stopB = new JButton("Stop");
        stopbh = new StopButtonHandler();
        stopB.addActionListener(stopbh);
        stopB.setSize(100,30);
        stopB.setLocation(100,30);

        exitB = new JButton("Exit");
        ebHandler = new ExitButtonHandler();
        exitB.addActionListener(ebHandler);
        exitB.setSize(100,30);
        exitB.setLocation(200,30);      

        pane.add(label);

        pane.add(textField);
        pane.add(startB);
        pane.add(stopB);
        pane.add(exitB);

        timer = new Timer(DELAY, new TimerEventHandler());

        setVisible(true);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
    }

    private class TimerEventHandler implements ActionListener{
        public void actionPerformed(ActionEvent e){
            int r = (int)(9.0 * Math.random()) + 1;
            String str = Integer.toString(r);
            currentNum = "";
            currentNum = str;
            label.setText(str);
            repaint();
        }
    }

    public class StartButtonHandler implements ActionListener{
        public void actionPerformed(ActionEvent e){
            timer.start();
        }
    }

    public class StopButtonHandler implements ActionListener{
        public void actionPerformed(ActionEvent e){
            timer.stop();
        }
    }

    private class ExitButtonHandler implements ActionListener{
        public void actionPerformed(ActionEvent e){
            System.exit(0);
        }
    }

    public static void main(String[] args){
        TimerClassPanel timerPanel = new TimerClassPanel();
        JOptionPane.showMessageDialog(null, "Type your guess (int between 1-9)" +
                " in the field then press 'ENTER'");
    }

    @Override
    public void mouseClicked(MouseEvent e) {
        if( e.getX() > 150 && e.getX() < 300 && e.getY() > 0 && e.getY() < 30)
        {   
            textField.setText("");
            repaint();
        }
    }

    @Override
    public void mouseEntered(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseExited(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mousePressed(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseReleased(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-13T00:03:24.380

TL;博士

无论如何，注册`MouseAdapter`和覆盖`mouseClicked`对我有用，

```
import java.awt.FlowLayout;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class ClickAndClearDemo {
    private static void createAndShowGUI(){
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new FlowLayout(FlowLayout.CENTER, 20, 20));

        final JTextField textField = new JTextField("Enter text here...");
        textField.addMouseListener(new MouseAdapter(){
            @Override
            public void mouseClicked(MouseEvent e){
                textField.setText("");
            }
        });

        frame.add(textField);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable(){
            @Override
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

我希望这个例子能让你朝着正确的方向开始！

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-13T00:11:41.930

您可以简单地将 a 添加`FocusListener`到文本字段。

```
 final JTextField textField = new JTextField("Enter text here...");
    textField.addFocusListener(new FocusListener(){
        @Override
        public void focusGained(FocusEvent e){
            textField.setText("");
        }
    }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T00:09:12.343

这对我有用。当然，点击的时候文字会被清空，你可以输入新的文字。要通过单击再次清除文本，文本字段必须失去焦点，然后从鼠标重新获得焦点。我不完全确定您在这里寻找什么。

```
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

import javax.swing.JFrame;
import javax.swing.JTextField;

public class ClickTextField extends JTextField implements MouseListener{

public static void main(String[] args) {
    new ClickTextField();
}

public ClickTextField() {
    addMouseListener(this);

    JFrame J = new JFrame();
    J.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    J.setSize(100,100);
    J.getContentPane().add(this);
    setText("Texty text...");
    J.show();
}

@Override
public void mouseClicked(MouseEvent e) {

    setText("");

}

@Override
public void mousePressed(MouseEvent e) {
    // TODO Auto-generated method stub

}

@Override
public void mouseReleased(MouseEvent e) {
    // TODO Auto-generated method stub

}

@Override
public void mouseEntered(MouseEvent e) {
    // TODO Auto-generated method stub

}

@Override
public void mouseExited(MouseEvent e) {
    // TODO Auto-generated method stub

}

} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-29T17:39:15.707

是清除“提示”文本吗？

我想这就是你想要做的......

```
textField.addMouseListener(new MouseAdapter())
    {
        public void mouseClicked(MouseEvent e)
        {
            if(textField.getText().equals("Default Text"))
            {
                textField.setText("");
                repaint();
                revalidate();
            }           
        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-05T15:15:15.107

我也必须这样做。我所做的只是制作一个定制的`JTextField`. 就像是：

```
import javax.swing.JMenuItem;
import javax.swing.JPopupMenu;
import javax.swing.JTextField;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

@SuppressWarnings("serial")
public class InputField extends JTextField implements MouseListener,ActionListener
{
public InputField(String text) 
{
    super(text);
    super.setHorizontalAlignment(RIGHT);
    super.addMouseListener(this);
}

@Override
public void mouseClicked(MouseEvent e) 
{
    // TODO Auto-generated method stub
    if (getText().equals("0.0"))
    {
        setText("");
    }
}

@Override
public void mouseEntered(MouseEvent e) 
{

}

@Override
public void mouseExited(MouseEvent e)
{

}

@Override
public void mousePressed(MouseEvent e) {
    maybeShowPopup(e);
    // if the mouse is pressed and "0.0" is the text, we erase the text
    if (getText().equals("0.0"))
    {
        setText("");
    }
}

@Override
public void mouseReleased(MouseEvent e) 
{
    maybeShowPopup(e);
}

private void maybeShowPopup(MouseEvent event)
{
    //if the user clicked the right mouse button
    if (javax.swing.SwingUtilities.isRightMouseButton(event))
    {
        //create (and show) the popup
        createPopup().show(event.getComponent(), event.getX(), event.getY());
    }
}

private JPopupMenu createPopup()
{
    JPopupMenu popupMenu = new JPopupMenu();
    //add the clearTextOption to the JPopupMenu
    JMenuItem clearTextOption = new JMenuItem("Clear text");
    clearTextOption.addActionListener(this);
    popupMenu.add(clearTextOption);
    return popupMenu;
}

@Override
public void actionPerformed(ActionEvent arg0) {
    //clear the TextField
    setText("");
}

} //end custom TextField 
```

在这个自定义的 TextField 中，我只是使用了`MouseListener`. 定制一个的优点是：

1.  我可以让它直接实现 MouseListener （而不必使用一些令人困惑的匿名内部类）
2.  我可以进行大量自定义（包括用户右键单击 TextField 并从 PopupMenu 中选择项目的选项。//我目前正在研究用户复制、粘贴和拖放的选项。
3.  我可以做到这一切，而不用在主`.java`文件中塞满额外的代码，这些额外的代码会在以后挖掘更多的东西。虽然`MikeWarren.getAnswer(this) extends richard.getAnswer(this)`，我想我会更详细一点，并展示一些我在我的一个程序中实际使用的代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-20T03:15:09.467

公共 JTextField 用户输入；

在执行文本之后：

userInput.setText(""); // 空的

这应该做。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-22T14:53:06.557

```
 jTextField2.addMouseListener(new MouseListener() {
            @Override
            public void mouseClicked(MouseEvent e) {
                if (e.getButton()==1) {
                    jTextField2.setText("");
                }//3 = for right click 
                //2 for middlemouse
            }

            @Override
            public void mousePressed(MouseEvent e) {

            }

            @Override
            public void mouseReleased(MouseEvent e) {

            }

            @Override
            public void mouseEntered(MouseEvent e) {

            }

            @Override
            public void mouseExited(MouseEvent e) {

            }
        }); 
```

您也可以尝试使用这种方法。

# c# - 通过套接字发送 inkcanvas 笔划

> ID：10133368
> 
> 赞同：1
> 
> 时间：2012-04-12T23:40:43.653
> 
> 标签：c#, wpf, sockets, stroke, inkcanvas

所以我试图通过使用套接字创建一个类似同步绘画程序的东西。我有一个服务器端..和一个客户端，我试图将inkCollection从服务器发送到客户端。这适用于简单的文本，但我似乎无法发送inkCollection。或者，如果你能帮我发送最后一笔，这样数据传输得更快，那就更酷了。这是我一直在尝试的一些代码：

发送笔画：

```
 byte[] data;
        using (MemoryStream ms = new MemoryStream())
        {
            inkcanvas.Strokes.Save(ms);
            data = ms.ToArray();
        }

        svr.SendToAll("u getting some strokes");
        svr.SendStrokes(data); 
```

svr.SendStrokes（字节 [] 数据）：

```
 public void SendStrokes(byte[] data)
    {
        for (int i = 0; i < no; i++)
        {
            byte[] dt = data;
            accepted[i].Send(dt);
        }

            MessageBox.Show("dONE");
    } 
```

这是在客户端：

```
 byte[] buffer=new byte[1024];
                MessageBox.Show("receiving strokes");
                int rec = conn.Receive(buffer, 0, buffer.Length, 0);
                if (rec <= 0)
                    throw new SocketException();
                MessageBox.Show("strokes received");
                //Array.Resize(ref buffer, rec);
                using (MemoryStream ms = new MemoryStream(buffer))
                {
                    inkcanvas.Strokes = new System.Windows.Ink.StrokeCollection(ms);
                    ms.Close();
                }
                MessageBox.Show("strokes added"); 
```

这些完全相同的方法非常适用于字符串，但是当我尝试使用 strokeCollection 进行操作时，它失败了。客户端上没有显示任何内容，并且我在服务器端收到以下 SocketException：现有连接被远程主机强行关闭。

但是，如果你们有更好的方法来做到这一点，那就太好了……这是我想念的吗？我的意思是..如果它适用于转换为字节数组的文本...为什么它适用于这个笔画集合？

谢谢！

编辑：你认为你可以用一些示例代码帮助我吗？我似乎真的无法实现它；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T23:46:58.743

您忘记了设计或实现协议！您不能只通过 TCP 发送一堆字节并假设接收者能够理解它。

您有一条应用程序消息，其中包含您尝试通过 TCP 发送的一堆笔划。但是 TCP 是字节流服务，而不是应用消息服务。因此，您需要某种应用程序消息协议来打包消息以进行传输并在收到时将其解包。但是您还没有编写任何这样的代码。所以你基本上期待它通过魔法工作。

定义协议。例如，它可能会说：

> 画布笔划应由表示画布笔划的“1”字节发送，后跟 4 个字节，表示按网络字节顺序排列的笔画对象中的字节数，然后是笔画数据。接收器将读取第一个字节并识别它是一个画布描边对象。然后接收器将读取接下来的四个字节以确定长度。接收器应累积该字节数（必要时使用多次读取），然后处理重建的画布笔划对象。

**不要跳过创建书面协议定义的步骤。**

然后，当您遇到问题时，请遵循此方便的故障排除指南：

1.  发件人是否遵循规范？如果没有，请停止，发件人已损坏。

2.  接收器是否遵循规范？如果没有，停止，接收器坏了。

3.  别了，规范坏了。

如果你想要简单，你可以将数据转换为base64，并将每条消息编码为一行文本。这将允许您使用一个`ReadLine`函数来抓取一条消息。然后，您可以只使用像“S”（表示“笔划”）这样的消息格式，后跟 base64 格式的数据。使用`WriteLine`函数发送文本消息，后跟换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-03T02:15:35.340

我想你忘了设置内存流位置。您应该在发送流之前将内存流位置设置为 0，因为在 strokes.save 之后，流的位置在末尾。

# java - Struts 2：“请求的资源不可用”

> ID：10133376
> 
> 赞同：0
> 
> 时间：2012-04-12T23:42:06.337
> 
> 标签：java, struts2, web

我用 struts 2 实现了一个简单的例子。

但是单击操作时出现此错误：

“请求的资源不可用”

似乎apache服务器找不到jsp文件。

这是法语的错误。

```
 Etat HTTP 404 - /StrutsTraining/classes/Hello.jsp

type Rapport d''état

message /StrutsTraining/classes/Hello.jsp

description La ressource demandée (/StrutsTraining/classes/Hello.jsp) n'est pas disponible. 
```

我的 struts.xml ：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
    <constant name="struts.enable.DynamicMethodInvocation" value="false" />
    <constant name="struts.devMode" value="true" />
    <package name="default" namespace="/" extends="struts-default">
        <action name="action1" class="org.training.Hello">
            <result name="Hello">classes/Hello.jsp</result>
            <result name="goodBy">classes/GoodBy.jsp</result>
        </action>
    </package>
</struts> 
```

我的 Web.xml ：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">
    <display-name>StrutsTraining</display-name>

    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>
</web-app> 
```

Jsp 文件位于：

```
/StrutsTraining/WebContent/WEB-INF/classes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T02:00:53.897

将 jsp 放在 classes 文件夹中不是一个好主意，在 WEB-INF 文件夹中创建一个 jsp 文件夹并保留您的 jsp 文件。

```
 <action name="action1" class="org.training.Hello">
            <result name="Hello">/WEB-INF/jsp/Hello.jsp</result>
            <result name="goodBy">/WEB-INF/jsp/GoodBy.jsp</result>
        </action> 
```

# jquery - 同时将文本从一个 Textarea 写入另一个 Textarea

> ID：10133378
> 
> 赞同：4
> 
> 时间：2012-04-12T23:42:23.037
> 
> 标签：jquery, ajax

假设我有两个文本区域......

**文本区 1**

```
<textarea class="one"></textarea> 
```

**文本区域 2**

```
<textarea class="two">Hi There.</textarea> 
```

我希望能够在 textarea 2 中的文本之后添加我在 textarea 1 中输入的文本。例如：如果我写“我的名字是乔”。在 textarea 一中，它会同时复制并写下“我的名字是乔”。在现有的“Hi There”之后的文本区域二中。文本。

**结果会...**

```
<textarea class="2">Hi There. My name is Joe.</textarea> 
```

我可以用 jQuery 做到这一点，还是需要用 AJAX 做到这一点？我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T23:44:05.087

不需要ajax。

```
$('.one').on('keyup', function(){
    $('.two').html( $(this).val() );
}); 
```

演示：http: [//jsfiddle.net/agz9Y/](http://jsfiddle.net/agz9Y/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T23:49:03.843

绑定到`keyup`事件时，您会注意到延迟。当您通常绑定到`keydown`事件时，文本区域的值尚未更改，因此在确定`keydown`事件期间按下的键之前，您无法更新第二个文本区域的值。幸运的是，我们可以使用`String.fromCharCode()`将新按下的键附加到第二个文本区域。这一切都是为了使第二个文本区域快速更新而没有任何延迟：

```
$('.one').on('keydown', function(event){
    var key = String.fromCharCode(event.which);
    if (!event.shiftKey) {
        key = key.toLowerCase();
    }
    $('.two').val( $(this).val() + key );
});​ 
```

这是一个演示：http: [//jsfiddle.net/agz9Y/2/](http://jsfiddle.net/agz9Y/2/)

这将使第二个文本区域与第一个具有相同的内容，如果您想将第一个文本区域的内容附加到第二个文本区域，您只需将第一个文本区域的值添加到第二个文本区域而不是覆盖：

```
$('.one').on('keydown', function(event){
    var key = String.fromCharCode(event.which);
    if (!event.shiftKey) {
        key = key.toLowerCase();
    }
    $('.two').val( $('.two').val() + $(this).val() + key );
});​ 
```

这是一个演示：http: [//jsfiddle.net/agz9Y/3/](http://jsfiddle.net/agz9Y/3/)

# 更新

您可以稍微更改一下，以便`.two`元素记住自己的值：

```
$('.one').on('keydown', function(event){
    var key = String.fromCharCode(event.which);
    if (!event.shiftKey) {
        key = key.toLowerCase();
    }

    //notice the value for the second textarea starts with it's data attribute
    $('.two').val( $('.two').data('val') + ' -- ' + $(this).val() + key );
});

//set the `data-val` attribute for the second textarea
$('.two').data('val', '').on('focus', function () {

    //when this textarea is focused, return its value to the remembered data-attribute
    this.value = $(this).data('val');
}).on('change', function () {

    //when this textarea's value is changed, set it's data-attribute to save the new value
    //and update the textarea with the value of the first one
    $(this).data('val', this.value);
    this.value = this.value + ' -- ' + $('.one').val();
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T23:45:55.890

```
​$(function(){
    $('textarea.one').on('keyup', function(e){
        $('textarea.two').val($(this).val());
    });
});​ 
```

[**例子**](http://jsfiddle.net/heera/Jda2p/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T23:47:24.117

[**演示**](http://jsfiddle.net/HUFGD/3/)

```
$('#TextBox1').keydown(function(){
        $('#TextBox2').val($(this).val())
    })
$('#TextBox2').keydown(function(){
        $('#TextBox1').val($(this).val())
    }) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-17T09:54:37.857

如果有人需要香草 JS

```
var __one = document.querySelector('.one'),
    __two = document.querySelector('.two'),
    __handler = null;

__handler = function(e)
{

    e.preventDefault();

    __two.innerHTML = this.value;

}

__one.addEventListener('keyup', __handler); 
```

[演示 jsfiddle](http://jsfiddle.net/slawe/p7hzv/)

# duplicate-data - 检测重复客户

> ID：10133380
> 
> 赞同：2
> 
> 时间：2012-04-12T23:42:49.513
> 
> 标签：duplicate-data, deduplication

我有一堆客户数据被规范化为多个表。我想确定最好的标准来做出最好的猜测，即客户可能是相同的。需要在最小化重复数量和最小化误报之间取得平衡，从而打断用户询问潜在的欺骗行为。

我正在查看名字/姓氏+电话号码的某种组合|| 电子邮件地址。

第一个问题是，确定一个客户*是否可能*与另一个客户相同的一套好的标准是什么。

第二个问题是，对于这个特定的应用程序，我只想检测在过去 2 个月左右注册的客户的重复项。这会改变检测标准吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:46:23.367

您将如何询问客户是否是重复帐户的所有者？

“嘿 Sam Jones，还有一个 Sam Jones 在你当地有一个 ip，他的电子邮件是 sam.jones@abc.com，而你最近注册的电子邮件是 sam.jones@apple.com，你是同一个人吗？ /女孩？”

如果上述情况甚至接近您的情况，那么您将泄露私人信息。即另一个 Sam Jone 的电子邮件地址。

通常，您不允许客户使用相同的电子邮件地址进行注册，其次您要验证他们注册时使用的电子邮件地址是否有效。这样，如果他们在电子邮件中输入错误再次注册，他们将无法验证它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T00:06:22.753

重要的是选择不太可能改变的属性。如果您使用电话号码或电子邮件地址之类的信息，则在任何时候有人更改 ISP 或移动电话提供商时，您都有重复的风险。

如果这些客户是过去购买过的客户，您可以存储他们信用卡号的哈希值和账单地址的哈希值。每当他们再次购买时，散列他们的付款信息并将其与您的数据库进行比较。（注意我说要存储哈希，而*不是*他们的实际付款信息）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T22:07:51.580

如果您仍然对这个问题感兴趣，请查看此工具[https://sourceforge.net/projects/deduper/](https://sourceforge.net/projects/deduper/)

我写这个工具主要是为了你在这个问题中提到的目的

# c - 从共享库切换到 dll，现在出现找不到 pow() 的错误

> ID：10133381
> 
> 赞同：0
> 
> 时间：2012-04-12T23:42:56.690
> 
> 标签：c, math, undefined, symbols, pow

这是错误：

```
symbol lookup error: ./src/libprog3.so: undefined symbol: pow 
```

库中的其他所有内容都可以正常工作，即使是使用 math.h 的函数，但是当我调用需要 pow() 的函数时，它会崩溃。当它是一个共享库时，它工作得非常好。我正在使用 gcc 和 makefile 进行编译。我对 makefile 所做的唯一更改是为库添加 -ldl。我还有 -lm 在里面。我更改了驱动程序以支持更改为 dll 而不是共享库，但导致错误的函数没有更改。

我需要更改的makefile还有更多内容吗？这是生成文件：

```
testlib: src/driver.o src/prog3.o
    gcc -fPIC -Wall -c src/prog3.c -o src/prog3.o
    gcc -Wall -shared -o src/libprog3.so src/prog3.o
    gcc -Wall -o $@ src/driver.c -ldl -lm -Lsrc -lprog3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T04:24:22.940

你需要做：

```
gcc -Wall -shared -o src/libprog3.so src/prog3.o -lm 
```

也就是说，必须使用它们的依赖项来构建共享库。如果省略`-lm`，则表示您告诉链接器未解析`libprog3.so`的符号旨在由主程序或已导致加载的库中的符号解析。我看到您确实`-lm`为主程序添加了链接命令行，但我的猜测是主程序实际上并没有使用任何符号`libm.so`，因此它没有被添加到`DT_NEEDED`主程序的表中，因此尚未加载.

在任何情况下，像这样明确依赖关系几乎总是最好的。

# vim - VIM：TODO 高亮使文本消失

> ID：10133382
> 
> 赞同：1
> 
> 时间：2012-04-12T23:43:24.553
> 
> 标签：vim, putty

在 Putty 中，当 VIM 突出显示文本 TODO 或 FIXME 时，突出显示的颜色使我什至看不到文本！我试过设置`background=light`，但没有帮助，无论如何我喜欢我的深色（未修改）背景。我已经阅读[了另一个解决 TODO 突出问题的 SO question](https://stackoverflow.com/questions/4097259/in-vim-how-do-i-highlight-todo-and-fixme)，但我似乎找不到解决方案。

服务器是带有 VIM 7.0 的 CentOS 5.x。除了我自己的个人 .vimrc 文件外，没有什么可以改变的。我在 Windows XP SP3 上使用 Putty 进行连接。我确实有 Windows 机器的管理员访问权限，但它不是我的，我不能对它做任何激烈的事情（比如像我想要的那样安装 Debian）。不过，我可以在 Windows 机器上对自己的用户配置文件做任何我喜欢的事情。

# php - PHP REGEX：邮政编码的 PREG_SPLIT() 需要帮助

> ID：10133384
> 
> 赞同：0
> 
> 时间：2012-04-12T23:43:26.780
> 
> 标签：php, regex, zipcode, preg-split

我有类似的内容

> 圣克莱门特，CA 92673

或者

> 德克萨斯州阿灵顿 76012-3693

我需要把它分成`CityAndState`and `Zip`。
一些

我正在努力：

```
$moreAddressInfo = preg_split('^[0-9.]{5,}^', $row2['cityAndZip'],null,PREG_SPLIT_DELIM_CAPTURE); 
```

（也尝试不使用标志）
... CityState 部分返回得很好，但缺少主要的 Zip 信息
（对于上面的两个示例，*$moreAddressInfo[1]*将分别等于**''**和**'-3693'**） .

任何指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T00:00:09.993

试试这个：

```
$moreAddressInfo = preg_split('~\s+(?=[0-9]{5})~', $row2['cityAndZip']); 
```

*   `\s+`匹配一个或多个空白字符。

*   `(?=[0-9]{5})`是积极的前瞻；它*断言*字符串的下一部分是五位数字，但不*消耗*它们。

所以你的分隔符是一些空格，后面跟着五位数字。

# python - PyBrain：使用 numpy.loadtxt 加载数据？

> ID：10133386
> 
> 赞同：5
> 
> 时间：2012-04-12T23:43:39.747
> 
> 标签：python, numpy, pybrain

我有一些工作代码可以正确地将 csv 文件中的数据加载到 PyBrain 数据集中：

```
def old_get_dataset():

    reader = csv.reader(open('test.csv', 'rb'))

    header = reader.next()
    fields = dict(zip(header, range(len(header))))
    print header

    # assume last field in csv is single target variable
    # and all other fields are input variables
    dataset = SupervisedDataSet(len(fields) - 1, 1)

    for row in reader:
        #print row[:-1]
        #print row[-1]
        dataset.addSample(row[:-1], row[-1])

    return dataset 
```

现在我正在尝试重写此代码以改用 numpy 的 loadtxt 函数。我相信 addSample 可以采用 numpy 数组，而不必一次添加一行数据。

假设我加载的 numpy 数组是 mxn 维的，我如何传入第一组 mx (n-1) 数据作为第一个参数，最后一列数据作为第二个参数？这就是我正在尝试的：

```
def get_dataset():

    array = numpy.loadtxt('test.csv', delimiter=',', skiprows=1)

    # assume last field in csv is single target variable
    # and all other fields are input variables
    number_of_columns = array.shape[1]
    dataset = SupervisedDataSet(number_of_columns - 1, 1)

    #print array[0]
    #print array[:,:-1]
    #print array[:,-1]
    dataset.addSample(array[:,:-1], array[:,-1])

    return dataset 
```

但我收到以下错误：

```
Traceback (most recent call last):
  File "C:\test.py", line 109, in <module>
    (d, n, t) = main()
  File "C:\test.py", line 87, in main
    ds = get_dataset()
  File "C:\test.py", line 45, in get_dataset
    dataset.addSample(array[:,:-1], array[:,-1])
  File "C:\Python27\lib\site-packages\pybrain\datasets\supervised.py",
       line 45, in addSample self.appendLinked(inp, target)
  File "C:\Python27\lib\site-packages\pybrain\datasets\dataset.py",
       line 215, in appendLinked self._appendUnlinked(l, args[i])
  File "C:\Python27\lib\site-packages\pybrain\datasets\dataset.py",
       line 197, in _appendUnlinked self.data[label][self.endmarker[label], :] = row
ValueError: output operand requires a reduction, but reduction is not enabled 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T02:23:32.263

经过大量试验和重新阅读[数据集文档](http://pybrain.org/docs/tutorial/datasets.html)后，以下运行没有错误：

```
def get_dataset():

    array = numpy.loadtxt('test.csv', delimiter=',', skiprows=1)

    # assume last field in csv is single target variable
    # and all other fields are input variables
    number_of_columns = array.shape[1]
    dataset = SupervisedDataSet(number_of_columns - 1, 1)

    print array[0]
    #print array[:,:-1]
    #print array[:,-1]
    #dataset.addSample(array[:,:-1], array[:,-1])
    #dataset.addSample(array[:,:-1], array[:,-2:-1])
    dataset.setField('input', array[:,:-1])
    dataset.setField('target', array[:,-1:])

    return dataset 
```

我必须仔细检查它是否在做正确的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T18:28:04.147

我写了一个小函数来做到这一点

```
def load_csv(filename, cols, sep = ',', skip = 0):
    from numpy import loadtxt
    data = loadtxt(filename, delimiter = sep, usecols = cols, skiprows = skip)
    return data 
```

# javascript - 在 jQuery 中使用 replaceWIth 是否有数据大小限制？

> ID：10133387
> 
> 赞同：1
> 
> 时间：2012-04-12T23:43:54.150
> 
> 标签：javascript, jquery

我正在使用`replaceWith()`jQuery 中的函数来更新我的网页。我从 C# Web 服务程序接收数据，该程序从数据库中提取数据以构建我的 HTML 代码。它工作正常，除非我替换大量数据。在不起作用的示例中，我将网页中的代码替换为 39000 字节的数据。之后，单击跨度调用 JavaScript 函数时，我的所有链接都不起作用。函数中使用的数据大小是否有限制`replaceWith()`？我要替换的 html 代码如下所示：

```
<td align=left valign=top>
<div id="showitems" class="showitems" style="display:inline; float:left"></div>
 </td> 
```

javascript 代码如下所示：

```
function ShowDinerItems() {

            var gps = document.getElementById("selectdiner").value;
            var pos = gps.indexOf(";");
            var len = gps.length;
            var latitude = document.getElementById("Hiddenlat").value;
            var longitude = document.getElementById("Hiddenlng").value;
            var dinerkey = gps.substring(0, pos);
            PageMethods.CallShowDinerItems(dinerkey, latitude,longitude,               OnShowDinerComplete, OnShowDinerError, dinerkey);
        }

    function OnShowDinerComplete(result) {
        var htmlcode = result[0];
        if (result == 'none') {
                document.getElementById("Message").value = "Search returned no items";

            }
            else {
                var htmlcode = result[0];
                htmlcode = "<div id=\"showitems\" class=\"showitems\"         style=\"display:inline\">" + htmlcode + "</div>";
                $('.showitems').replaceWith(htmlcode); // size of htmlcode is 39849 bytes
                var locations = result[1].split(";");
                var lat = locations[0];
                var lng = locations[1];
                markDiner(lat, lng, "", 'map_canvas');

            }
        } 
```

我使用 jquery 构建网页的原因是为了避免页面重新加载。我可以很容易地在我的 C# 程序中对 webdata 内容进行编程，这可能会更有效，但要避免页面重新加载，这取决于拥有该网站的人的指示。我会尝试给出的建议。

注意：我使用以下代码使其工作。

```
 $('.showitems').html(result[0]); 
```

使用 .text 将不起作用，因为它显示的是原始数据而不是 html 数据。感谢那些做出贡献的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T01:34:56.033

老实说，我认为您在这里的做法是错误的。

在我看来，当您可以使用 jQuery 更改其属性时，您似乎正在使用 ReplaceWith 完全覆盖匹配的标签。

例如：

```
var htmlcode = result[0];
htmlcode = "<div id=\"showitems\" class=\"showitems\"         style=\"display:inline\">" + htmlcode + "</div>";
$('.showitems').replaceWith(htmlcode); // size of htmlcode is 39849 bytes 
```

可以很容易地改成这样：

```
$('.showitems').css('float','none').text(result[0]); 
```

顺便说一下，到底会有多少个 showItem，你怎么知道它与你从 C# 调用中得到的结果的比较？

编辑 2：对不起，没有意识到 CSS display 属性实际上并没有改变。

# c# - glTexImage2D + 字节[]

> ID：10133395
> 
> 赞同：0
> 
> 时间：2012-04-12T23:45:02.013
> 
> 标签：c#, opengl, textures

如何将像素从简单的字节数组上传到 OpenGL 纹理？

我正在使用[glTexImage2D](http://www.opengl.org/sdk/docs/man/xhtml/glTexImage2D.xml)，我得到的只是一个白色矩形而不是像素化纹理。第 9 个参数（指向像素数据的 32 位指针）是 IMO 的问题。我在那里尝试了很多参数类型（byte、ref byte、byte[]、ref byte[]、int & IntPtr + Marshall、out byte、out byte[]、byte*）。glGetError() 总是返回 GL_NO_ERROR。一定有什么我做错了，因为它从来不是一些乱码的像素。它总是白色的。glGenTextures 工作正常。第一个 id 的值是 1，就像在 OpenGL 中一样。我画彩色线条没有任何问题。所以我的纹理有问题。我控制着 DllImport。所以我可以根据需要更改参数类型。

```
GL.glBindTexture(GL.GL_TEXTURE_2D, id);
int w = 4;
int h = 4;
byte[] bytes = new byte[w * h * 4];
for (int i = 0; i < bytes.Length; i++)
    bytes[i] = (byte)Utils.random(256);
GL.glTexImage2D(GL.GL_TEXTURE_2D, 0, GL.GL_RGBA, w, h, 0, GL.GL_RGBA, GL.GL_UNSIGNED_BYTE, bytes); 
```

```
[DllImport(GL_LIBRARY)] public static extern void glTexImage2D(uint what, int level, int internalFormat, int width, int height, int border, int format,
            int type, byte[] bytes); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T00:27:22.510

一个常见的错误是没有更改 MIN 过滤器，因为默认是 mipmapped，这使得纹理不完整。做这个：

```
GL.glBindTexture(GL_TEXTURE_2D, id);
GL.glTexParameteri(GL_TEXTURE_2D, GL_MIN_FILTER, GL_NEAREST); 
```

然后画出纹理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T07:57:26.030

尽管已经上传了一些东西，但纹理仍然是白色的，这表明不是所有的 mipmap 级别都被正确上传，或者过滤器设置没有正确设置。

那么感兴趣的是

```
glTexParameteri(GL_TEXTURE_..., GL_MIN_FILTER, GL_...); 
```

使用 GL_NEAREST 或 GL_LINEAR 禁用 mipmapping。默认情况下启用 Mipmapping。

另一个重要的事情是在上传之前设置数据的结构，即调用glTexImage。为此，您可以使用该函数`glPixelStorei`来设置 GL_UNPACK_... 参数。您需要设置对齐、步幅等内容。我建议您参考文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T20:15:40.703

您的 P/Invoke 声明是错误的。

简短的回答是：

```
[System.Runtime.InteropServices.DllImport(Library, EntryPoint = "glTexImage2D", ExactSpelling = true)]
internal extern static void glTexImage2D(int target, int level, int internalformat, Int32 width, Int32 height, int border, int format, int type, IntPtr pixels); 
```

这个 P/Invoke 声明是安全的（不是直接使用指针，而是*IntPtr*）。

问题是.NET 内存管理。内存块并不固定在某个内存地址上：垃圾收集器 (GC) 可以自由地将内存移动到任何地方（例如，它可以在堆空间中移动堆栈分配的内存，反之亦然）。

实际上，您需要告诉 .NET GC 内存不应移动。为此，您应使用*固定*语句或其他与垃圾收集器相关的方法。

例如：

```
public static void TexImage2D(int target, int level, int internalformat, Int32 width, Int32 height, int border, int format, int type, object pixels) {
    GCHandle pp_pixels = GCHandle.Alloc(pixels, GCHandleType.Pinned);
    try {
        if      (Delegates.pglTexImage2D != null)
            Delegates.pglTexImage2D(target, level, internalformat, width, height, border, format, type, pp_pixels.AddrOfPinnedObject());
        else
            throw new InvalidOperationException("binding point TexImage2D cannot be found");
     } finally {
         pp_pixels.Free();
     }         
} 
```

*TexImage2D*函数的 object 参数旨在用于任何数据数组（那些实现*Array*类的对象（即 byte[]、short[]、int[] 等）。

本质上，上面的代码告诉 GC：获取*像素*的地址，并且在我调用内存句柄上的 Free() 之前不要移动它。

使用固定语句是另一种选择，但需要一个不安全的 P/Invoke 声明，并且在代码中使用它有点冗长（对于每个调用，您必须定义一个*不安全*和*固定*的语句）。

# c# - 没有实现的覆盖方法

> ID：10133400
> 
> 赞同：0
> 
> 时间：2012-04-12T23:45:46.203
> 
> 标签：c#, xna, overriding

所以我有一个派生自[GameComponent](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.gamecomponent.aspx)的类。在类内部存在此方法：

```
public override void Initialize(){
     base.Initialize();
} 
```

我见过多个来源，人们做同样的事情，他们覆盖了 Initialize 方法，但除了`base.Initialize`调用之外没有任何实现。我不明白这一点，因为如果它什么都不做，为什么还要使用该方法？如果您不包含覆盖方法，则默认情况下会调用 GameComponent 类中的虚拟方法，对吗？我真的拿出了整个方法，没有发生任何不同。

简而言之，覆盖没有实现的方法有什么意义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:55:26.537

没有任何。

原因是 GameComponent 模板包含它来指导您应该如何实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T23:50:41.030

是的，您显示的内容完全等同于根本没有覆盖它；Resharper 实际上会建议删除这样的方法，因为它是不必要的混乱。

从技术上讲，覆盖它并仅调用基本方法不是“没有实现”，它是默认实现，或者没有额外的实现。没有实现会覆盖它，然后将方法置空：

```
public override void Initialize()
{
   // no implementation
} 
```

在这种情况下，您不想这样做，但在某些情况下您可能想要这样做。

# java - 无法转换 ArrayList 到数组列表

> ID：10133401
> 
> 赞同：3
> 
> 时间：2012-04-12T23:45:50.673
> 
> 标签：java, arraylist, type-conversion

我正在编写一个程序来模拟人工神经网络。我设置了以下类和接口：

```
public interface Neuron
{
}

// Input neuron
public class INeuron implements Neuron
{
}

// Output and hidden neuron
public class ONeuron implements Neuron
{
}

public interface Layer
{
    public ArrayList<Neuron> getNeurons();
}

// Input layer
public class ILayer implements Layer
{
    ArrayList<INeuron> neurons = new ArrayList<INeuron>();

    public ArrayList<Neuron> getNeurons()
    {
        return neurons;
    }

    // other stuff appropriate to the input layer
} 
```

编译器报告“无法从 ArrayList<INeuron> 转换为 ArrayList<Neuron>”。

我试过换东西。例如：`ArrayList<Neuron> neurons = new ArrayList<INeuron>()`。但这似乎只是将相同的错误转移到班级的不同部分。

我不明白为什么 INeuron 不能隐式转换为 Neuron，因为 INeuron 是 Neuron 的一个子类型。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T23:48:11.300

你需要使用：

```
public interface Layer
{
    public ArrayList<? extends Neuron> getNeurons();
} 
```

因为泛型缺乏协变和逆变。如果您将 ArrayList < INeuron > 作为 ArrayList < Neuron > 返回，那么您可能能够将不是 INeuron 的元素（如 Neuron 的另一个孩子）添加到 ArrayList < INeuron >

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T23:55:14.287

简单地改变：

```
ArrayList<INeuron> neurons = new ArrayList<INeuron>(); 
```

到：

```
ArrayList<Neuron> neurons = new ArrayList<Neuron>(); 
```

能够同时服务于这两种类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T23:51:22.760

这是可能发生的坏事的一个例子。

```
void mymethod ( ILayer l )
{
     List<Neuron> neurons = l . getNeurons ( ) ;
     neurons . add ( new ONeuron ( ) ) ; // bad thing
} 
```

我的方法只是用 non`mymethod`污染了该列表。`ILayer``neurons``INeuron`

我推荐[卢西亚诺的解决方案](https://stackoverflow.com/a/10133422/348975)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-09T04:46:51.583

```
public Layer <?> getNeurons(); 
```

这是编写子类型的另一种方式，对吧？

# spring - 休眠拦截器不工作

> ID：10133405
> 
> 赞同：5
> 
> 时间：2012-04-12T23:46:18.760
> 
> 标签：spring, hibernate, interceptor

我有一个简单的 HibernateInterceptor，基本上我想在其中自动设置一些字段。这个拦截器（如下所示）扩展了 EmptyInterceptor：

```
public class EntityAuditInterceptor extends EmptyInterceptor {

    /**
     * The Serial Version UUID.
     */
    private static final long serialVersionUID = 4636626262147801287L;

    /* (non-Javadoc)
     * @see org.hibernate.EmptyInterceptor#onFlushDirty(java.lang.Object, java.io.Serializable, java.lang.Object[], java.lang.Object[], java.lang.String[], org.hibernate.type.Type[])
     */
    public boolean onFlushDirty(Object entity,  Serializable id, Object[] currentState, Object[] previousState, String[] propertyNames, Type[] types) {

        // doing stuff here

        return false;
    }

    /* (non-Javadoc)
     * @see org.hibernate.EmptyInterceptor#onSave(java.lang.Object, java.io.Serializable, java.lang.Object[], java.lang.String[], org.hibernate.type.Type[])
     */
    public boolean onSave(Object entity, Serializable id, Object[] state, String[] propertyNames, Type[] types) {

                // doing stuff here
        return false;
    } 
} 
```

我正在使用弹簧配置文件进行接线，如下所示：

```
<!-- Hibernate SessionFactory -->
    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="hsqlDbDataSource"/>

        <property name="packagesToScan">
            <list>
                <value>com.dreamteam.lms.**.*</value>
            </list>
        </property>

        <!-- Adding Interceptor here -->
        <property name="entityInterceptor">
            <bean class="com.dreamteam.lms.interceptors.EntityAuditInterceptor"></bean>
        </property>

        <property name="hibernateProperties">
            <props>
                <!--<prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>-->
                <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
                <prop key="hibernate.generate_statistics">true</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.cache.use_second_level_cache">true</prop>
                <prop key="hibernate.hbm2ddl.auto">create</prop>
                <prop key="hibernate.cache.use_query_cache">true</prop>
                <prop key="hibernate.cache.provider_class">net.sf.ehcache.hibernate.SingletonEhCacheProvider</prop>
            </props>
        </property>
    </bean> 
```

但是，永远无法到达拦截器。有没有人有任何线索？我还尝试将以下内容添加到事务管理器 bean 定义中，如下所示：

```
<property name="entityInterceptor">
        <ref local="entityAuditInterceptor"/>
    </property> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-14T15:44:24.637

好的，为了记录，我解决了这个问题，结果证明这是我的一个愚蠢的错误。

当我实现扩展 EmptyInterceptor 的拦截器时，我添加了方法“onFlushDirty”等等。到目前为止，一切都很好。问题是在使用我的 IDE 自动导入使用的类时，我最终错误地导入了 java.reflect.Type 而不是 org.hibernate.type.Type。因此，我并没有真正覆盖拦截器方法！

我注意到当我将 @Override 拦截器添加到我的方法时。

另一个谜团解开了...... :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T00:03:30.007

看起来你的 Spring XML 配置是正确的，所以 Hibernate 应该调用你的拦截器方法。然而，这些方法似乎总是返回`false`，这意味着 Hibernate 将忽略您所做的任何更改。

当你改变一个值时，你必须返回`true`。例如，此代码遍历所有属性并`true`在且仅当进行更改时才返回：

```
public boolean onFlushDirty(Object entity,  Serializable id, Object[] currentState, Object[] previousState, String[] propertyNames, Type[] types) {
    boolean changed = false;
    for (int i = 0; i < propertyNames.length; i++) {
        if ("saveDate".equals(propertyNames[i])) {
            currentState[i] = new Date();
            changed = true;
        }
    }
    return changed;
} 
```

# ios - 用我的按钮写

> ID：10133414
> 
> 赞同：0
> 
> 时间：2012-04-12T23:47:05.173
> 
> 标签：ios, xcode, button, nsstring, position

我用一些按钮制作了自己的键盘，制作了 AZ 按钮，并给了它们标题 A 按钮有标题 A，B 按钮有标题 B 等等。

我添加了一个标签，因此当我单击一个按钮时，它会显示该按钮的标题，并且确实如此。

当我单击 A 时，它显示 A，当我单击 B 时，它显示 B。问题是我希望它们彼此相邻显示，但我无法让它工作。就像当我按 ABC 时，它会先显示 ABC，而不是先显示 A，然后用 B 替换它，然后用 C 替换它，因为这就是它现在所做的。

```
-(IBAction) clicked: (id)sender{
    NSString *titleOfButton = [sender titleForState:UIControlStateNormal];
    NSString *newLabelText = [[NSString alloc] initWithFormat:@"%@", titleOfButton];
    labelsText.text = newLabelText;

} 
```

这是来自计算器的一些代码，它确实可以工作，但我找不到正确的方法将它植入我的代码

```
//-(IBAction)buttonDigitPressed:(id)sender {
//currentNumber = currentNumber*10 + (float)[sender tag];
//calculatorScreen.text = [NSString stringWithFormat:@"%2f",currentNumber];
//} 
```

有没有人可以告诉我如何让它工作或知道如何让它工作我一直在寻找和尝试将近一个星期了谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:54:45.193

这是导致您出现问题的行：

```
labelsText.text = newLabelText; 
```

您将标签文本设置为仅 newLabelText。您要做的是连接字符串，这会将旧文本与新文本结合起来。这一改变应该做到这一点：

```
labelsText.text = [NSString stringWithFormat:@"%@%@", labelsText.text, newLabelText] 
```

# objective-c - 升级的 Xcode 4.3.2 显示错误

> ID：10133416
> 
> 赞同：0
> 
> 时间：2012-04-12T23:47:19.037
> 
> 标签：objective-c, ios, xcode, xcode4, ios-simulator

我刚刚升级到 Xcode 4.3.2（最新版本）。当我尝试运行在以前版本的 Xcode 中构建的应用程序时，会弹出以下错误：

> Xcode 无法使用所选设备运行。
> 
> 没有提供兼容 iOS 版本的预置 iOS 设备。将 iOS 设备与最新版本的 iOS 连接以运行您的应用程序或选择 iOS 模拟器作为目标。

我确保将 iOS 部署目标更改为 5.1。我怎样才能摆脱这个错误？

我所做的只是按下构建并运行。我想在 iOS 模拟器上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T13:22:04.233

您可以将 Xcode 设置为构建到模拟器，如下图所示。

![在此处输入图像描述](../Images/16ba1c44a7f06c01b3ce8d6d9ccb915c.png)

# visual-studio - 如何在 Visual Studio 11 中添加对新文件格式的支持

> ID：10133420
> 
> 赞同：1
> 
> 时间：2012-04-12T23:47:52.107
> 
> 标签：visual-studio, visual-studio-2012, visual-studio-sdk, visual-studio-shell

我公司有一个基于 SGML 的 30 年超媒体系统。它有点类似于 HTML。现在有些客户想用微软VS来写他们的屏幕。我是 .NET 新手，不知道从哪里开始。我想要语法高亮、自动完成和可用属性建议。我们将仅支持 VS 11 并开始测试版的开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:16:32.547

听起来您想实现语言服务。

MSDN 有关于构建语言服务的基础知识的大量文档和详尽的教程。您可以从[语言服务概述（托管包框架）](http://msdn.microsoft.com/en-us/library/bb166360%28v=vs.110%29.aspx)及其相关主题开始。

# android - 在 Android 上 Context.getCacheDir() 似乎返回了一个我无法在其中创建子目录的目录

> ID：10133421
> 
> 赞同：7
> 
> 时间：2012-04-12T23:48:07.153
> 
> 标签：android, file, caching, permissions, subdirectory

Android 不允许在 cacheDir 中创建子目录吗？鉴于第三方（例如供应商）肯定需要缓存他们自己的文件，因此为我的缓存文件创建一个子目录并让我集成的第三方管理他们自己的缓存文件对我来说很有意义。

有谁知道如何设置权限以便创建子目录？

前任。以下代码似乎总是无法创建子目录。

```
File cacheDir = context.getCacheDir();
File subDir = new File(cacheDir, "subdir");
if ( !subDir.exists() ) {
    if ( !subDir.mkdirs() )
        Log.w(TAG, "Failed to create subdirectory in cache");
} 
```

# javascript - 未命名的传递参数未包含在“参数”对象中

> ID：10133424
> 
> 赞同：0
> 
> 时间：2012-04-12T23:48:23.047
> 
> 标签：javascript

我在调试一些 Javascript 时注意到，我传递的一个额外参数没有出现在`arguments`对象中。函数声明有一个命名参数，并且被传递了两个参数，但参数数组只包含第一个参数。尝试在 Javascript 控制台或 jsfiddle 中复制问题时，始终正确传递参数。问题可能是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T23:53:49.627

该问题仅发生在 Chrome 中，似乎是 Chrome 优化。起初我没有意识到的是，在我发现参数不完整的原始函数中，我正在`arguments`控制台中进行检查，但在我创建的所有测试中，我正在做`console.log(arguments)`或类似的事情。

如果我不在`arguments`函数中引用，Chrome 不会以填充它为代价。因此，当通过控制台检查参数时，它只显示作为命名参数存在的参数。我创建了一个 jsfiddle 来证明这一点：http: [//jsfiddle.net/bgmort/2kmJs/](http://jsfiddle.net/bgmort/2kmJs/)

由于我花了几个小时来寻找这个问题的答案，我希望记录我的发现可以为其他人节省一点时间。

# php - 模拟 php 用于单元测试的资源类型

> ID：10133426
> 
> 赞同：4
> 
> 时间：2012-04-12T23:48:32.457
> 
> 标签：php, unit-testing, phpunit

我必须为使用由我们使用的 apache 扩展创建的资源类型的 php 类编写测试，但假设它是具有 mysql 资源类型的数据库类。

显然我想模拟那些全局函数，但是当类检查资源是否创建正常时如何伪造返回类型？

php 文档中的资源页面甚至有一条评论抱怨无法进行模拟测试。这是最后的答案吗？

假设我有（蹩脚的例子）代码：

```
class DB {
  function init(){
    $this->handle = mysql_connect('myserver');
    if( get_resource_type($this->handle) != 'mysql' ) return false;
      return true;
    }
} 
```

然后是通过嘲笑来测试成功和失败的测试`mysql_connect`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T00:04:00.463

也许你离得有点远。实际上，资源完全可以用 PHP 测试，你可以得到它们的类型等。

不容易测试的是它们所代表的依赖关系。您通常不会注入这些资源，而是围绕这些资源编写代码。我们称之为面向对象反转。

Central 是对象（资源），以过程风格属于它的代码始终具有该资源的依赖关系。我们以 curl 为例：

```
$url = 'http://example.com/';
$handle = curl_init($url);
curl_exec($handle); 
```

由于围绕`$handle`对象的这种程序风格，如果 curl 是某些其他代码的依赖项，则在某种意义上用模拟替换功能是不可模拟的。因此，您需要先将其包装以使其可注射：

```
$url = 'http://example.com/';
$curl = new Curl($url);
$curl->exec(); 
```

这伴随着您在普通的旧 PHP 对象中转换以资源为中心的对象方向所需的代价：

```
class Curl
{
    private $handle;
    public function __construct($url) {
        $this->handle = curl_init($url);
    }
    public function exec() {
        return curl_exec($this->handle);
    }
} 
```

现在很容易模拟它。好消息是，这通常是可能的，所以通常资源本身不应该对测试施加任何限制，它只是缺少一些封装，所以你需要先添加它。

某些 API，例如 imap 扩展，由于全局静态状态，不允许创建干净的对象接口，在 IMAP 扩展的情况下，它是错误处理。但它仍然越来越接近，如果缺陷被记录在案，那也有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-28T21:39:09.350

这可能会帮助那些试图模拟像 Curl 这样的 PHP 函数的人： [https ://github.com/IcecaveStudios/isolator](https://github.com/IcecaveStudios/isolator)

它允许您将它们与您的代码隔离，使您能够使用正常的模拟技术。

# ruby-on-rails - 如何在 has_many_through 关系中保存额外字段

> ID：10133428
> 
> 赞同：2
> 
> 时间：2012-04-12T23:48:43.743
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我有两个用户模型：**Advisor**和**Investor**，它们通过 has_many_through 关系与**Relation模型连接。**问题是我想保存登录的**投资者**用户与通过电子邮件找到的**顾问用户之间的关系。**我有以下代码：

```
advisor = Advisor.where(:email => params[:invite][:email])
if advisor.exists?
@logged_investor.advisors << advisor
end 
```

这很好用，但我需要在**关系**表中保存一个名为“status”的额外字段，该字段将跟踪它们的关系状态。我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:11:36.473

```
@logged_investor.relations.create(:status => ..., :advisor => ...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T02:13:48.870

您应该能够像访问任何其他关系一样通过以下方式访问关系表

```
@logged_investor.relations 
```

如果模型设置正确。然后只需找到您想要的关系并更改状态值。

使用 rails 控制台很容易检查您可以在对象上调用哪种方法，就像任何其他命令行一样，推送选项卡将为您提供对象具有的所有可用方法和属性。

# javascript - 如何在客户端验证文件输入（Javascript）

> ID：10133437
> 
> 赞同：6
> 
> 时间：2012-04-12T23:50:28.893
> 
> 标签：javascript, jquery, validation

我有一个存储在下面的 javascript 变量中的表单：

```
var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='startImageUpload(this);' class='imageuploadform' >" + 
"<label> Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/>" +
"<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label></form> 
```

现在您可以看到，当用户单击提交按钮时，它会提交到下面的“startImageUpload”函数：

```
function startImageUpload(imageuploadform){
  $(imageuploadform).find('.imagef1_upload_process').css('visibility','visible');
  $(imageuploadform).find('.imagef1_upload_form').css('visibility','hidden');
  sourceImageForm = imageuploadform;
      return true;
} 
```

它的作用是当用户点击提交时，它会显示一个加载栏并上传表单。

现在我的问题是我想执行一个简单的 javascript 验证，当用户单击表单中的提交按钮时，它将检查文件是“png”还是“gif”文件类型。如果文件类型正确，则显示加载栏并上传表单。如果文件类型不正确，则显示文件类型不正确的警报，但不显示加载栏，也不上传表单。

有谁知道如何编码。这样我就可以使用您的答案之一中的示例，然后对其进行扩展并使用 javascript 来验证更多文件类型和文件大小，因此如果有人可以帮助我，这将非常有帮助。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T00:03:32.807

```
function startImageUpload(imageuploadform){

  var form = $(imageuploadform)
    , value = form.find('.fileImage').val()

  form.find('.imagef1_upload_process').css('visibility','visible')
  form.find('.imagef1_upload_form').css('visibility','hidden')

  if (!/\.(png|gif)$/.test(value)){
    return false
  }
  return true
} 
```

HTML 规范也演变为包含一个`accept`属性：

```
<input type="file" accept="image/png,image/gif" /> 
```

（近期支持 Chrome、Firefox 和 Opera - IE10、Safari 6）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T23:55:04.350

你可以这样检查...

```
var validExtensions = ['png', 'gif'],
    validExtensionSupplied = $.inArray(
           ($('.fileImage').val().match(/\.(.*?)]\s*$/) || [])[1],
           validExtensions) != -1; 
```

或者，您可以通过检查 MIME 类型来验证`$('.fileImage').prop('files')[0].type`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T23:53:34.477

试试这个：

```
 $("#pic").change(function() {

    var val = $(this).val();

    switch(val.substring(val.lastIndexOf('.') + 1).toLowerCase()){
        case 'gif': case 'jpg': case 'png':
            alert("an image");
            break;
        default:
            $(this).val('');
            // error message here
            alert("not an image");
            break;
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-09T17:47:28.480

**这是我的解决方案，它非常简单快捷**

```
 var accept = $(event.target).attr('accept');
    //<input name='fileImage' accept='.png,.jpg,.jpeg' type='file'  class='fileImage' />

    value = $(event.target).val(), ext = value.substring(value.lastIndexOf('.'));

    if(ext && accept.indexOf(ext) == -1){

        console.log('No');

    } 
```

# algorithm - 我的启发式算法是否正确？（数独求解器）

> ID：10133447
> 
> 赞同：1
> 
> 时间：2012-04-12T23:51:57.937
> 
> 标签：algorithm, prolog, heuristics, sudoku

首先 - 是的，这是一个家庭作业 - 但它主要是一个理论问题，而不是一个实际问题，我只是要求确认我是否正确思考或任何提示，如果我不正确。

我被要求编译一个简单的 Sudoku 求解器（在**Prolog**上，但现在并不那么重要），唯一的限制是它必须使用使用[Best-First Algorithm](http://en.wikipedia.org/wiki/Best-first_search)的启发式函数。我能想出的唯一启发式函数解释如下：

```
1\. Select an empty cell. 
  1a. If there are no empty cells and there is a solution return solution.
      Else return No.
2\. Find all possible values it can hold. %% It can't take values currently assigned to cells on the same line/column/box.
3\. Set to all those values a heuristic number starting from 1.
4\. Pick the value whose heuristic number is the lowest && you haven't checked yet.
   4a. If there are no more values return no.
5\. If a solution is not found: GoTo 1.
   Else Return Solution.

// I am sorry for errors in this "pseudo code." If you want any clarification let me know. 
```

那么我这样做是对的还是有其他方法而我的方法是错误的？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:25:47.710

我会使用的启发式是这样的：

1.  反复查找只能插入一个可能数字的任何空格。用适合的数字填写它们`1-9`。
2.  如果每个空白空间都有两种或多种可能性，则将游戏状态压入堆栈，然后选择一个随机方块填充随机值。
3.  转到步骤 1。

如果你设法填满每一个方格，你就找到了一个有效的解决方案。

**如果你到了没有**有效选项的地步，将最后一个游戏状态从堆栈中弹出（即回溯到你最后一次随机选择的时间。）做出不同的选择，然后再试一次。

* * *

作为一个有趣的旁注，您被告知使用贪婪启发式方法来执行此操作，但数独实际上可以简化为布尔可满足性问题（SAT 问题）并[使用通用 SAT 求解器解决](http://bramcohen.livejournal.com/70250.html)。这非常优雅，实际上可以比启发式方法*更快。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:04:32.707

当我自己在 Prolog 中编写数独求解器时，我使用的算法如下：

1.  过滤掉已经解决的单元格（即开始时的给定值）
2.  对于每个单元格，构建一个包含其所有邻居（即 20 个单元格）的列表。
3.  对于每个单元格，构建一个包含它可以采用的所有可能值的列表（完成上述操作后很容易做到）
4.  在包含所有要求解的单元格的列表中，将可用值最少的单元格放在顶部
5.  如果顶部单元格剩余的可能性为 0，则转到 7，否则，转到 6，如果列表为空，则您有解决方案。
6.  对于列表顶部的单元格：在单元格的可能值中选择一个随机数。在其邻居的所有可能值中删除此值。转到 5。
7.  回溯（即在 Prolog 中失败）

该算法总是首先对“解决最多的”单元进行排序，并尽早检测到故障。与求解随机单元的算法相比，它大大减少了求解时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-17T14:42:20.947

你所描述的是最受约束的变量启发式。它选择具有最少可能性的单元格，然后从该单元格开始深度递归分支。这种启发式算法在深度优先搜索算法中的速度非常快，因为它可以在靠近根的早期检测到碰撞，而搜索树仍然很小。

这是 C# 中最受约束变量启发式的实现：[练习 #2：数独求解器](http://www.codinghelmet.com/?path=exercises/sudoku-solver)

这篇文章还包含了这个算法对数独单元的访问总数的分析——它非常小。看起来启发式算法在第一次尝试中就解决了数独问题。

# json - Yesod 中的例外情况

> ID：10133448
> 
> 赞同：93
> 
> 时间：2012-04-12T23:52:06.033
> 
> 标签：json, haskell, exception-handling, yesod

我制作了一个守护进程，它使用了一种非常原始的形式`ipc`（telnet 并发送一个字符串，该字符串具有特定顺序的特定单词）。我摆脱了它，现在`JSON`用来将消息传递到`Yesod`服务器。然而，我真的很喜欢我的设计的一些东西，我不确定我现在的选择是什么。

这就是我正在做的事情：

```
buildManager :: Phase -> IO ()
buildManager phase = do
  let buildSeq = findSeq phase
      jid = JobID $ pack "8"
      config = MkConfig $ Just jid
  flip C.catch exceptionHandler $ 
  runReaderT (sequence_ $ buildSeq <*> stages) config
  -- ^^ I would really like to keep the above line of code, or something like it.
  return () 
```

buildSeq 中的每个函数看起来像这样

```
foo :: Stage -> ReaderT Config IO ()

data Config = MkConfig (Either JobID Product) BaseDir JobMap 
```

`JobMap`是一个`TMVar Map`跟踪有关当前作业的信息。

所以现在，我拥有的是处理程序，它们看起来都像这样

```
foo :: Handler RepJson 
```

`foo`代表我的守护进程的命令，每个处理程序可能必须处理不同的 JSON 对象。

我想做的是发送一个`JSON`表示成功的对象，以及另一个表示有关某些异常的信息的 JSON 对象。

我希望`foo`s 辅助函数能够返回一个`Either`，但我不确定我是如何得到它的，以及终止对我的操作列表进行评估的能力，`buildSeq`.

这是我看到的唯一选择

1）确保`exceptionHandler`在处理程序中。放入记录`JobMap`。`App`使用`getYesod`更改适当的值来`JobMap`指示有关异常的详细信息，然后可以通过`foo`

有没有更好的办法？

我的其他选择是什么？

编辑：为清楚起见，我将解释`Handler RepJson`. 服务器需要某种方式来接受命令，例如`build` `stop` `report`. 客户端需要某种方式来了解这些命令的结果。我选择 JSON 作为服务器和客户端相互通信的媒介。我使用 Handler 类型只是为了管理 JSON 输入/输出，仅此而已。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T21:37:53.260

从哲学上讲，在 Haskell/Yesod 世界中，您希望将值向前传递，而不是向后返回。因此，与其让处理程序返回一个值，不如让它们调用转发到流程中的下一步，这可能是生成异常。

请记住，您可以将任意数量的未来操作捆绑到一个对象中，因此您可以将一个延续对象传递给您的处理程序和 foo，这基本上告诉他们：“完成后，运行这个代码块。” 这样它们就可以是无效的并且什么也不返回。

# c++ - C++ 错误中的简单线程 - 未声明“Lib”

> ID：10133449
> 
> 赞同：0
> 
> 时间：2012-04-12T23:52:12.143
> 
> 标签：c++, multithreading

我试图在我的 C++ 应用程序中使最基本的线程成为可能，它只是执行一个名为 Run() 的函数（它在一个近乎无限的循环中连续循环）并允许调用其他函数作为线程的结果.

根据本教程，[http://www.codeproject.com/Articles/16479/Effective-Threads-in-C-Part-1-The-Basic-Thread-Cla](http://www.codeproject.com/Articles/16479/Effective-Threads-in-C-Part-1-The-Basic-Thread-Cla)

我在 MyClass（具有 Run() 函数的类）头文件中创建了一个对象：

```
private:
    Lib::Thread<MyClass, int> listenerThread; 
```

但是我收到以下错误：

```
MyClass.h:23: error: ‘Lib’ has not been declared 
```

我需要包括一些东西吗？这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:56:26.817

看起来他们的项目在`Lib`命名空间中。

出于您的目的，您可能只需摆脱`Lib::`部分代码。

否则，您应该使用命名空间或在命名空间内。有关命名空间的更多信息，请参见[http://www.cplusplus.com/doc/tutorial/namespaces/](http://www.cplusplus.com/doc/tutorial/namespaces/)。

# php - 如何在 mySQL LIKE 查询中使用 PHP 字符串？

> ID：10133450
> 
> 赞同：11
> 
> 时间：2012-04-12T23:52:13.180
> 
> 标签：php, mysql, sql, string

我正在尝试查找与特定模式匹配的行数。在此示例中，所有以“123”开头的内容：

这是有效的：

```
$query = mysql_query("SELECT * FROM table WHERE the_number LIKE '123%'");
$count = mysql_num_rows($query); 
```

问题是 LIKE 会有所不同，所以我试图在脚本中定义它，然后执行查询，但这不起作用：

```
$prefix = "123";
$query = mysql_query("SELECT * FROM table WHERE the_number LIKE $prefix.'%'");
$count = mysql_num_rows($query); 
```

如何让这个查询在第二个示例中正常工作？

编辑：我也尝试过没有句号（也不起作用）：

```
$query = mysql_query("SELECT * FROM table WHERE the_number LIKE $prefix'%'"); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-12T23:54:04.930

您的语法错误；无需在双引号字符串中放置句点。相反，它应该更像

```
$query = mysql_query("SELECT * FROM table WHERE the_number LIKE '$prefix%'"); 
```

您可以通过打印字符串来确认这一点，以查看它是否与第一种情况相同。

当然，像这样简单地将变量注入到查询字符串中*并不是一个好主意，因为存在 SQL 注入的危险。*至少您应该手动转义变量的内容 with `mysql_real_escape_string`，这将使它看起来像这样：

```
$sql = sprintf("SELECT * FROM table WHERE the_number LIKE '%s%%'",
               mysql_real_escape_string($prefix));
$query = mysql_query($sql); 
```

请注意，`sprintf`百分号的第一个参数需要加倍才能在结果中出现一次。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T23:56:08.640

做它喜欢

```
$query = mysql_query("SELECT * FROM table WHERE the_number LIKE '$yourPHPVAR%'"); 
```

不要忘记`%`最后

# arrays - 用于与 WCF 互操作性目的的数组与列表

> ID：10133454
> 
> 赞同：10
> 
> 时间：2012-04-12T23:52:41.653
> 
> 标签：arrays, wcf, list

我已经采用了一个 WCF 项目，该项目具有以数组而不是列表返回数据的约定。有人告诉我，这样做的原因是为了提高与非 .NET 消费应用程序的潜在互操作性。

是否有任何好的示例说明值得从 WCF 服务返回数组而不是列表？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T00:26:22.087

我以前从事过一个具有相同实现和相同推理的项目。我无法从任何项目团队那里得到有效的解释。

我想听听一个理由，但在我这样做之前我不相信这一点。

两者`Array`和`List`序列化作为 XML 或 JSON 中的集合 - 没有区别，因为它们是可互操作的且功能上为 null 的语言。请注意，当您在 Visual Studio 中使用“添加服务引用...”工具时，您可以选择使用 a`List`或 an`Array`作为集合类型。

`List`如果您在 WCF 中使用二进制序列化，则和之间会有所不同`Array`，但二进制序列化仅适用于 .NET 到 .NET，因此不会出现互操作性问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-13T04:22:26.293

请记住，Web 服务不返回数组。他们也不返回列表。它们返回 XML。

数组的 XML 与列表的 XML 相同。

# c# - 使用正则表达式从 HTML 字符串中解析 HREF

> ID：10133456
> 
> 赞同：0
> 
> 时间：2012-04-12T23:53:13.200
> 
> 标签：c#, regex

我需要从 html 中解析一个 zip 文件的链接。这个 zipfile 的名称每个月都会更改。这是我需要解析的 HTML 片段：

```
<a href="http://nppes.viva-it.com/NPPES_Data_Dissemination_Mar_2012.zip"> 
```

我需要得到的字符串是“http://nppes.viva-it.com/NPPES_Data_Dissemination_Mar_2012.zip”，所以我可以使用 WebClient 下载文件。该 zip 文件 URL 中唯一每月保持不变的部分是“http://nppes.viva-it.com/”。有没有办法使用正则表达式从 HTML 中解析完整的 URL，“http://nppes.viva-it.com/NPPES_Data_Dissemination_Mar_2012.zip”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:33:42.227

通过使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)：

```
var html = "<a href=\"http://nppes.viva-it.com/NPPES_Data_Dissemination_Mar_2012.zip\">";
var doc = new HtmlDocument();
doc.LoadHtml(html);
var anchor = doc.DocumentNode.SelectSingleNode("//a");
var href = anchor.GetAttributeValue("href", null); 
```

现在`href`变量持有`"http://nppes.viva-it.com/NPPES_Data_Dissemination_Mar_2012.zip"`价值。

它不是比正则表达式更简单吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T00:46:46.423

这是一个原始的正则表达式 - 使用分支重置。
答案在捕获缓冲区 2 中。

```
<a 
  (?=\s) 
  (?= (?:[^>"']|"[^"]*"|'[^']*')*? (?<=\s)
    href \s*=
    (?|
        (?> \s* (['"]) \s* (http://nppes\.viva-it\.com/ (?:(?!\g{-2}) .)+ \.zip ) \s*     \g{-2} )
      | (?> (?!\s*['"]) \s* () (http://nppes\.viva-it\.com/ [^\s>]* \.zip ) (?=\s|>) )
    )
  )
  \s+ (?:".*?"|'.*?'|[^>]*?)+ 
> 
```

不确定 C# 是否可以进行分支重置。如果不能，则此变体有效。
答案始终是捕获缓冲区 2 与捕获缓冲区 3 的结果。

```
<a 
  (?=\s) 
  (?= (?:[^>"']|"[^"]*"|'[^']*')*? (?<=\s)
    href \s*=
    (?:
        (?> \s* (['"]) \s* (http://nppes\.viva-it\.com/ (?:(?!\g{-2}) .)+ \.zip ) \s* \g{-2} )
      | (?> (?!\s*['"]) \s* (http://nppes\.viva-it\.com/ [^\s>]* \.zip ) (?=\s|>) )
    )
  )
  \s+ (?:".*?"|'.*?'|[^>]*?)+ 
> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T23:54:48.193

如果页面上只有一个 ZIP 链接，没问题：

```
Regex re = new Regex(@"http://nppes\.viva-it\.com/.+\.zip");

re.Match(html).Value // To get the matched URL 
```

[这是一个演示。](http://ideone.com/P3jeS)

# asp.net - 如何将数据作为超链接插入到复选框列表中？

> ID：10133457
> 
> 赞同：0
> 
> 时间：2012-04-12T23:53:24.867
> 
> 标签：asp.net, vb.net

我有一个看起来像这样的函数：

```
Private Sub displayData(title As String, cost As String, asin As String)
    cdCheckList.Items.Add(title + "/" + cost + "/" + asin)
End Sub 
```

我想让整个字符串（标题+“/”+成本+“/”+asin）成为另一个页面的超链接`SearchDisplay.aspx`。

编辑：我还需要将 、 和 的值发送`title`到`cost`其他`asin`页面。

不完全确定如何做到这一点。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T00:04:41.727

我手头没有 Visual Studio，但你可以试试：

```
Private Sub displayData(title As String, cost As String, asin As String)
    cdCheckList.Items.Add("<a href=\"SearchDisplay.aspx\">" + title + "/" + cost + "/" + asin + "</a>")
End Sub 
```

或使用`String.Format`看起来更好，更容易阅读：

```
Private Sub displayData(title As String, cost As String, asin As String)
    cdCheckList.Items.Add(String.Format("<a href=\"SearchDisplay.aspx\">{0}/{1}/{2}</a>", title, cost, asin))
End Sub 
```

**更新以回答 OP 重新措辞的问题：**

```
Private Sub displayData(title As String, cost As String, asin As String)
    cdCheckList.Items.Add(String.Format("<a href=\"SearchDisplay.aspx?title={1}&cost={2}&asin={2}\">{0}/{1}/{2}</a>", HttpUtility.UrlEncode(title), HttpUtility.UrlEncode(cost), HttpUtility.UrlEncode(asin)))
End Sub 
```

您应该始终对 URL 查询字符串参数进行编码。您应该考虑使用 Microsoft 的 AntiXss 库而不是 HttpUtility 类。[您可以在此处](http://wpl.codeplex.com/)找到有关 AntiXss 库的更多信息。

# matlab - hist 和 sum 的组合：有这个功能吗？

> ID：10133459
> 
> 赞同：1
> 
> 时间：2012-04-12T23:53:29.503
> 
> 标签：matlab, sum, histogram

假设我们有以下向量：

```
data=a=[2.3 3.2 4.1 6.2 7.3 6.4 5.5 4.3 3.2 2.6 1.7 3.4 4.5 5.7 6.8]; 
```

如果我们只使用 hist 函数计算数字，我们会得到类似的结果：

```
[n xout]=hist(a,[1:1:max(a)])

n =

 0     0     2     4     3     1     3     2 
```

xout =

```
 0     1     2     3     4     5     6     7 
```

我现在要做的是对 bin 的每个元素求和：

xout =

```
 0     1     2     3     4     5     6     7 
```

n =

```
 0     0     2     4     3     1     3     2 
```

binsum =

```
0      0     4    12.4 etc. 
```

例如，对于第三个 bin，我的 n(3)=2 值介于 1,5 和 2,5（bin 的大小）之间：1.7 和 2.3 -> 1.7+2.3=4 -> binsum(3)=4对于第四个 bin，我的 n(4)=4 值介于 2,5 和 3,5 之间：3.2+3.2+3.4+2.6=12.4-> binsum(4)=12.4 等。

是否有一个简单的功能可以完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T01:24:35.867

如果您的直方图箱是由数组定义的`minBin:binWidth:maxBin`，那么您可以找到箱的索引，然后像这样总结数据：

```
minBin = 1;
binWidth = 1;
maxBin = 7;

data=[2.3 3.2 4.1 6.2 7.3 6.4 5.5 4.3 3.2 2.6 1.7 3.4 4.5 5.7 6.8];

%# to create index: First, take care of out-of-range data points
tmp = max(min( data, maxBin),minBin);
%# then, subtract minimum, divide by step, round: this is the binIdx
%# add 1 so that we don't start counting at 0
idx = round( (tmp-minBin)/binWidth ) +1;

%# now we can use accumarray to sum up the data
binSum = accumarray(idx(:),data(:),[floor((maxBin-minBin)/binWidth)+1, 1], @sum, 0)

binSum =

         0
    4.0000
   12.4000
    8.4000
    4.5000
   23.8000
   14.1000 
```

请注意，我没有先得到两个零，因为我使用您用作输入的箱`hist`，而不是您显然用于生成输出的箱。此外，您可以通过替换来获得`data`计数`ones(length(data),1)`。

# ruby-on-rails - Rails - 如何访问 html.erb 模板中的外键对象？在控制台中工作

> ID：10133461
> 
> 赞同：2
> 
> 时间：2012-04-12T23:53:37.663
> 
> 标签：ruby-on-rails

我正在通过尝试为可收藏的纸牌游戏建模来学习 Rails。

我有一个冠军模型和一个稀有模型。我在模型定义中有 has_many/belongs_to ，这在控制台中有效：

```
c = Champion.find(1)

c.rarity.name
=> "Uncommon" 
```

当我在模板中做同样的事情时，我得到

```
<%= champion.rarity.name %>

undefined method `name' for nil:NilClass 
```

关于如何让它发挥作用的任何想法？

这是在 Rails 3.2.2 上。

### 更新：完整的 .erb 代码

```
<% @champions.each do |champion| %> 
  <tr> 
    <td><%= champion.name %></td>
    <td><%= champion.rarity.name %></td> 
  </tr>
<% end %> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T00:20:09.343

如果 every`Champion`没有`Rarity`关联（有些是`nil`），您可以使用 a`.try()`打印名称。否则， 当遇到没有 a的情况时，`.each`将失败。`NoMethod``Rarity`

```
<% @champions.each do |champion| %> 
  <tr> 
    <td><%= h champion.name %></td>
    <td><%= h champion.rarity.try(:name) %></td> 
  </tr>
<% end %> 
```

或者不太聪明的`unless nil`方法：

```
<% @champions.each do |champion| %> 
  <tr> 
    <td><%= h champion.name %></td>
    <td><%= h champion.rarity.name unless champion.rarity.nil? %></td> 
  </tr>
<% end %> 
```

**注意**：我还添加了`h()`帮助方法来编码这些 HTML 输出，尽管这是在 Rails 3 中自动完成的。

# objective-c - 幻影警告：不支持的配置最小字体大小大于当前字体大小

> ID：10133467
> 
> 赞同：1
> 
> 时间：2012-04-12T23:54:02.873
> 
> 标签：objective-c, ios, xcode, interface-builder

XCode 警告我我的最小字体大小大于我当前的字体大小。当我点击警告时，它会将我带到一个 XIB 文件，但它只突出显示外部对象，没有实际具有字体大小属性的内部对象。为了确定，我检查了每个对象并确保它们的最小字体大小小于它们当前的字体大小，但 Xcode 仍然给我这个警告。这个警告试图指向什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-15T19:48:47.047

我遇到了同样的问题，很难确定哪个标签是问题所在。

然后我将故事板作为源代码打开并搜索 minimumFontSize。我将 minimumFontSize 与 fontDescription 的 pointSize 进行了比较，以检查哪个值等于或大于 minimumFontSize。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T23:57:00.063

我通过增加标签对象上的字体大小来解决这个问题，然后关闭它的自动缩小，然后重建，然后重新打开自动缩小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-01T21:22:15.410

有两种情况在起作用，因此有两种解决方案：

1）如果你想自动收缩你的标签

*   将标签的最小字体大小增加到安全的值，比如 16 点
*   修改代码以在运行时将字体大小设置为所需的字体大小

2）如果您不关心自动缩小：只需将“自动缩小”设置更改为“固定字体大小”，无论您在界面生成器中设置的字体大小如何，这都应该纠正行为

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-06T08:51:52.863

用最小字体比例替换最小字体大小。

# jquery - 自动完成 - 单击时如何使其查询。当前显示列表中显示的所有选项

> ID：10133468
> 
> 赞同：0
> 
> 时间：2012-04-12T23:54:03.017
> 
> 标签：jquery, jquery-ui, api, google-maps, google-maps-api-3

我正在一个名为[地震破坏地图](http://www.earthquakedamagemap.com)的网站上工作。它几乎完成了，但是我对自动完成功能有疑问。它适用于搜索按钮，但我想完全摆脱搜索按钮。当我单击列表中的结果时，它应该查询结果，而是显示列表中出现的所有结果。

```
 <input type="text" id="search-string4" placeholder="Search by Earthquake" class="tb11" onclick="focus" oninput="doQuery()" onchange="doQuery()"> 
```

如您所见，它会在我键入时查询结果，这很好，但在列表中单击结果时无法正确显示。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T00:00:38.237

无论您在单击搜索按钮时调用什么代码，都可以将该代码移动到自动完成的选择事件中，如下所示：

```
$( "#search-string4" ).autocomplete({
   select: function(event, ui) {
        doQuery();
   }
}); 
```

来自[jqueryui](http://jqueryui.com/demos/autocomplete/#remote)网站，

> **当从菜单中选择一个项目时触发 select 事件；ui.item 是指选中的项目。select 的默认操作是将文本字段的值替换为所选项目的值。取消此事件可防止值被更新，但不会阻止菜单关闭**

# c++ - 通过命令行以编程方式运行程序

> ID：10133470
> 
> 赞同：0
> 
> 时间：2012-04-12T23:54:10.347
> 
> 标签：c++, windows, macos, command-line

如何通过命令行以编程方式运行程序并获取其返回值？我希望有一种适用于 Windows 7 和 MacOS X 的方法，但如果我需要对每个操作系统进行不同的编程，我也会这样做

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T23:57:13.420

您可以使用[system](http://www.cplusplus.com/reference/clibrary/cstdlib/system/)调用程序并检索其返回值。

一个例子是

```
int returnValue = system("C:\\SomeProgram.exe"); 
```

# c# - Silverlight中有这样的内置控件吗？

> ID：10133476
> 
> 赞同：1
> 
> 时间：2012-04-12T23:55:17.943
> 
> 标签：c#, silverlight, controls

我有一个带有 id 和描述的项目列表（如果需要，我可以引入键值集合）。我需要的是绑定到 viewmodel id 属性的控件，但在其上显示相应项目/对的描述。我知道的最接近的例子是组合框，我在其中设置了 DisplayMemberPath 和 SelectedValue/SelectedValuePath，但我不需要下拉菜单。**那么 Silverlight 中是否有任何内置控件呢？**

（当然我可以自己编写一个，这很容易，我什至可以为视图模型添加一些逻辑来获得我需要的配对并将其描述绑定到简单的文本块）

**编辑：**为了说明我需要什么功能，我编写了简单的示例类。它实际上满足了我的需求，但我仍然想知道我是否可以使用**内置控件**。

```
public class CollectionItemDisplayControl:TextBox
{
    public CollectionItemDisplayControl()
    {
        IsReadOnly = true;

    }

    public string SelectedID
    {
        get { return (string)GetValue(SelectedIDProperty); }
        set { SetValue(SelectedIDProperty, value); }
    }

    // Using a DependencyProperty as the backing store for SelectedID.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty SelectedIDProperty =
        DependencyProperty.Register("SelectedID", typeof(string), typeof(CollectionItemDisplayControl), new PropertyMetadata(new PropertyChangedCallback(OnSelectedIDChangedStatic)));

    private static void OnSelectedIDChangedStatic(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        CollectionItemDisplayControl originator = d as CollectionItemDisplayControl;
        if (originator != null)
        {
            originator.OnSelectedIDChanged(e);
        }
    }

    private void OnSelectedIDChanged(DependencyPropertyChangedEventArgs e)
    {
        string description = String.Empty;
        string value = e.NewValue as string;
        if (value != null)
        {
            foreach (var item in _items)
            {
                if (item.UniqueID == value)
                {
                    description = item.Description;
                    break;
                }
            }
        }
        Text = description;
    }        

    private IDataCollection _viewModel;
    public IDataCollection ViewModel
    {
        get { return _viewModel; }
        set
        {
            _viewModel = value;
            if (_viewModel != null)
            {
                _items = _viewModel.Items;
            }
        }
    }

    private ObservableCollection<IUnique> _items = new ObservableCollection<IUnique>();

} 
```

ItemClass 包含两个属性：ID 和Description。我可以把这个控件放在页面上，绑定Items，单向绑定SelectedID。

**编辑 2：**好吧，我没有制作 SelectedID DependencyProperty，所​​以绑定不起作用，但我会立即修复它

**编辑 3：**第一个片段草率且无法正常工作，所以我修复了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T00:10:14.550

如果我理解正确，

您只需要实施正确的绑定。

（您确实需要一个列表？不仅仅是一个项目，即使是单个它也类似于任何控件）

将列表绑定到 eg `ItemsControl`。

设置`ItemsSource`为您的`list of items`

然后覆盖`ToString`你`Item`提供它真的是“你的”。如果没有，您可以制作自己的包装器。

在 ToString 输出中显示您的项目的任何内容，例如描述。

这是一个最快的解决方案，您也可以根据需要制作项目模板。

编辑：
只需将所有内容放在视图模型中并绑定到它 - 文本框，即

```
Text={Binding SelectedText} 
```

例如
...在您的视图模型中添加`SelectedText`和`SelectedID`（`Items`如果需要） - 正确执行`OnPropertyChanged`.

从视图模型中设置 SelectedID，或者如果从另一个可能更改它的控件“绑定”。
在 SelectedID 的集合中设置 SelectedText。
不需要控制这样的事情，它实际上都是数据绑定。

# python - 如何在 pyqt/matplotlib 导航中以编程方式选择平移/缩放

> ID：10133478
> 
> 赞同：5
> 
> 时间：2012-04-12T23:55:27.220
> 
> 标签：python, matplotlib, pyqt4

我有一个 pyqt4 matplotlib 应用程序，我希望该图在应用程序打开时开始（默认）到平移缩放模式。我无法从文档中找到有关如何以编程方式执行此操作的任何示例或线索。

同样沿着这条线，我将如何在我的应用程序中启用快捷键（http://matplotlib.sourceforge.net/users/navigation_toolbar.html）

感谢您的任何建议。

科林

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T16:50:29.050

我有一个类似的问题，就我而言，我使用以下方法解决了它`toolbar.zoom()`：

```
import pylab

plt.Figure()
thismanager = get_current_fig_manager()
thismanager.toolbar.zoom() 
```

在这种情况下，该图形将显示已选择缩放工具

# php - CakePHP：离开主页以使用其他控制器

> ID：10133480
> 
> 赞同：0
> 
> 时间：2012-04-12T23:56:10.420
> 
> 标签：php, cakephp

我刚刚发现在修改新的 CakePHP 安装的主页时默认使用页面控制器。我读到这主要用于静态页面。我想制作一个静态的左侧垂直导航栏，但我不确定我需要如何从这里开始使用其他控制器，`/cake`.

这真的很混乱，因为我正在尝试解决问题，但是......例如，我有产品控制器，它允许我通过`/cake/products`. 因此，我使用 制作了左侧菜单`$this->element('left_menu')`，其中包含以下（省略 HTML 代码）代码，`C:\...\cake\app\views\pages\home.ctp`在

```
<?php echo $this->Html->link(__('Product View', true), array('action' => 'products/view')); ?> 
```

我正在`cake/page/products`（从主页）路由到 Products Controller 的索引页面，以便在单击此菜单按钮时可以使用 Products Controller 的功能。

```
Router::connect('/pages/products/*', array('controller' => 'products', 'action' => 'index')); 
```

这个左侧导航菜单在主页上工作，但是一旦我点击这个菜单按钮并转到`/cake/product/...`，它就不再工作了，因为它是相对于页面控制器的。如何制作这个静态左侧导航栏以允许我使用其他控制器？最后，我希望这个静态菜单也能带我使用其他控制器的功能。我很混乱！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T00:06:08.140

关于设置菜单，您需要确保将所有菜单内容放在[app/View/Layouts/default.ctp](http://book.cakephp.org/2.0/en/views.html#layouts)文件中。

当您在我链接的那个页面上时，请查看 HTML 帮助程序并让它为您生成链接。节省大量时间。

# ruby-on-rails - 如何使用 ActiveRecord 将表复制到 Rails 中的另一个数据库？

> ID：10133482
> 
> 赞同：1
> 
> 时间：2012-04-12T23:56:22.927
> 
> 标签：ruby-on-rails, ruby, activerecord

假设我有 2 个数据库，`main`并且，我有一个对应于 中的表`temp`的 ActiveRecord 类，如何在 中创建类似的表。`Entry``entries``main``temp`

第一个刺是`Entry.connection.execute('show create table #{Entry.table_name}')`针对另一个表使用和调用它。（如果`main`并且`temp`是同一种数据库，则有效）。

有更好的方法吗？最好是不涉及读取和调用“创建表”表达式的一种。

例如，带有 ActiveRecord::Schema.define 的东西似乎是最好的。但我不确定该怎么做。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T00:14:57.247

快速谷歌搜索后，我没有找到没有原始 SQL 的现成方法。但是，您可以通过模仿所做的事情来制定自己的解决方案[`annotate_models`](https://github.com/ctran/annotate_models)。

来自[https://github.com/ctran/annotate_models/blob/master/lib/annotate/annotate_models.rb](https://github.com/ctran/annotate_models/blob/master/lib/annotate/annotate_models.rb)

```
# Use the column information in an ActiveRecord class
# to create a comment block containing a line for
# each column. The line contains the column name,
# the type (and length), and any optional attributes
def get_schema_info(klass, header, options = {})
  info = "# #{header}\n#\n"
  info << "# Table name: #{klass.table_name}\n#\n"

  max_size = klass.column_names.collect{|name| name.size}.max + 1
  klass.columns.each do |col|
    attrs = []
    attrs << "default(#{quote(col.default)})" unless col.default.nil?
    attrs << "not null" unless col.null
    attrs << "primary key" if col.name == klass.primary_key

    col_type = col.type.to_s
    if col_type == "decimal"
      col_type << "(#{col.precision}, #{col.scale})" 
```

此外，您可能想阅读[ActiveRecord 迁移指南](http://guides.rubyonrails.org/migrations.html#schema-dumping-and-you)所提供的内容。

```
ActiveRecord::Schema.define(:version => 20080906171750) do
  create_table "authors", :force => true do |t|
    t.string   "name"
    t.datetime "created_at"
    t.datetime "updated_at"
  end
end 
```

> 该文件是通过检查数据库并使用 create_table、a​​dd_index 等表示其结构来创建的。因为这是独立于数据库的，所以它可以加载到 Active Record 支持的任何数据库中。如果您要分发能够针对多个数据库运行的应用程序，这可能非常有用。
> 
> 然而，有一个权衡：db/schema.rb 不能表达数据库特定的项目，例如外键约束、触发器或存储过程。虽然在迁移中您可以执行自定义 SQL 语句，但模式转储程序无法从数据库中重构这些语句。如果您正在使用这样的功能，那么您应该将架构格式设置为 :sql。
> 
> 将使用特定于数据库的工具（通过 db:structure:dump Rake 任务）将数据库的结构转储到 db/structure.sql 中，而不是使用 Active Record 的模式转储器。例如，对于 PostgreSQL RDBMS，使用 pg_dump 实用程序。对于 MySQL，此文件将包含各种表的 SHOW CREATE TABLE 的输出。加载这些模式只是执行它们包含的 SQL 语句的问题。根据定义，这将创建数据库结构的完美副本。但是，使用 :sql 模式格式将阻止将模式加载到用于创建它的 RDBMS 之外的 RDBMS 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T04:16:30.853

如果您只想从一个数据库移动到另一个数据库，请使用 gem 'yaml_db'

# maven - 构建战争时文件在maven项目中被覆盖

> ID：10133485
> 
> 赞同：6
> 
> 时间：2012-04-12T23:56:33.697
> 
> 标签：maven, yui-compressor, maven-war-plugin

我正在使用 maven 构建一个 Web 应用程序项目，并且打包设置为“战争”。我还使用 YUI 压缩器插件来压缩 webapp 目录中的 javascript 代码。我已经像这样设置了 YUI 压缩器：

```
<plugin>
    <groupId>net.alchim31.maven</groupId>
    <artifactId>yuicompressor-maven-plugin</artifactId>
    <version>1.3.0</version>
    <executions>
        <execution>
        <phase>process-resources</phase>
        <goals>
            <goal>compress</goal>
        </goals>
        </execution>
    </executions>
    <configuration>
        <excludes>
        <exclude>**/ext-2.0/**/*.js</exclude>
        <exclude>**/lang/*.js</exclude>
        <exclude>**/javascripts/flot/*.js</exclude>
        <exclude>**/javascripts/jqplot/*.js</exclude>
        </excludes>
        <nosuffix>true</nosuffix>
        <force>true</force>
        <jswarn>false</jswarn>
    </configuration>
</plugin> 
```

如果我这样做：mvn process-resources，src/main/webapp 将被复制到 target/webapp-1.0/ 目录，并且 javacripts 被压缩。但是，当我运行 mvn install 时，所有压缩的 javascript 都会被覆盖，显然打包过程会在构建 war 文件之前从 main/webapp 复制一次内容。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T16:14:01.517

正如您所注意到的，`/src/main/webapp`在打包阶段执行 war 插件之前，不会将目录（又名 warSourceDirectory）内容复制到项目目录中进行打包。当战争插件完成时，存档已经构建；修改这些资源为时已晚。如果您要压缩的 .js 文件被移动到另一个目录（在 之外`/src/main/webapp`），那么您可以执行以下操作。

为了测试，我创建了一个`${basedir}/src/play`目录，其中包含几个文件。我使用`resource`插件作为示例；您可以将该配置替换为您需要的 YUI 压缩器插件配置，然后将`<webResource>`元素添加到您的`war`插件配置中，如下所示；[战争插件示例](http://maven.apache.org/plugins/maven-war-plugin/examples/adding-filtering-webresources.html)中的更多信息。我的战争以我想要的附加文件结束。

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-resources-plugin</artifactId>
  <executions>
    <execution>
      <id>copy-resources</id>
      <phase>process-resources</phase>
      <goals><goal>copy-resources</goal></goals>
      <configuration>
        <outputDirectory>${project.build.directory}/tmpPlay</outputDirectory>
        <resources>
          <resource>
             <directory>${project.basedir}/src/play</directory>
             <includes>
                <include>**/*</include>
             </includes>
          </resource>
        </resources>
       </configuration>
    </execution>
  </executions>
</plugin>

<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-war-plugin</artifactId>
  <executions>
    <execution>
      <id>default-war</id>
      <configuration>
        <webResources>
          <resource>
            <directory>${project.build.directory}/tmpPlay</directory>
            <targetPath>WEB-INF/yourLocationHere</targetPath>
            <includes>
              <include>**/*</include>
            </includes>
          </resource>
        </webResources>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T18:11:26.407

我认为@user944849 答案是正确答案，至少是正确答案之一。另一种存档方法是从 maven-war-plugin 配置中排除修改后的 javascript 目录，例如：

```
<plugin>
    <artifactId> maven-war-plugin </artifactId>
    <configuration>
        <warSourceExcludes>**/external/ dojo/**/*.js </warSourceExcludes>
    </configuration>
</plugin> 
```

这将告诉 maven-war-plugin 不要从排除的目录复制，但由于修改后的 javascript 目录已经存在，war 文件仍然包含 javascript 目录，但带有修改后的，在这种情况下是压缩的 javascript 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T00:01:33.493

在您的执行指令中，将应用压缩和复制的阶段设置为安装，这有望解决问题。代码应该是这样的：

```
<executions>
    <execution>
        ....
        <phase>install</phase>
        ....
    </execution>
<executions> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-13T10:12:56.893

这是我的解决方案，只需添加一个 antrun 插件，它使用已处理的输出更新打包的 war 文件，它绑定到包阶段：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
                <execution>
                    <id>package</id>
                    <phase>package</phase>
                    <configuration>
                        <target>
                            <zip basedir="${project.build.directory}/${project.build.finalName}"
                                destfile="${project.build.directory}/${project.build.finalName}.war"
                                update="true">
                            </zip>
                        </target>
                    </configuration>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

# c - 使用 ncurses 将文本包装在 pad 中。（在 C 中）

> ID：10133489
> 
> 赞同：2
> 
> 时间：2012-04-12T23:56:51.530
> 
> 标签：c, linux, ncurses

我一直在玩 ncurses，我在网上发现很少有用的信息来处理垫子。我知道垫子是一种较大的屏幕外窗口，其中的部分可以打印在屏幕上较小的窗口上。

我编写了一个程序来在屏幕上打印 pad 的上下文。问题是该程序似乎只打印“逐行”并且不环绕文本。

程序的输出是这样的：

> abcdefghij
> 
> abcdefghij
> 
> abcdefghij

但它应该是这样的：

> abcdefghij
> 
> klmnopqrst
> 
> uvwxyzabc

在后一种情况下，同一行“环绕”而不是打印多行。

任何 ncurses 大师都可以告诉我如何实现这种包装功能吗？（即：魔法？）

询问您是否需要更多详细信息，程序的源代码：

```
#include <unistd.h>
#include <curses.h>

int main()
{
    WINDOW *pad_ptr;
    int x, y;
    int pad_lines;
    int pad_cols;
    char disp_char;

    initscr();

    pad_lines = LINES + 50;
    pad_cols = COLS + 50;

    pad_ptr = newpad(pad_lines, pad_cols);

    disp_char = 'a';
    for(x = 0; x < pad_lines; x++)
    {
            for(y = 0; y < pad_cols; y++)
            {
                    mvwaddch(pad_ptr, x, y, disp_char);
                    if(disp_char == 'z')
                            disp_char = 'a';
                    else
                            disp_char++;
            }
    }

/* We just filled the pad with letters from the alphabet. */

/* Now we will fill part of the main window with a 10x10 section
 * of the pad.
 * Notice that the text does not wrap around. (Where is 'k'?)
 */

    prefresh(pad_ptr, 0, 0, 3, 3, 9+3, 9+3);
    sleep(3000);

//  prefresh(pad_ptr, LINES + 5, COLS + 7, 5, 5, 21, 19);
//  sleep(4);

    delwin(pad_ptr);

    endwin();

    exit(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T15:40:15.737

您误解了护垫的工作方式。

垫允许您创建一个窗口（可能大于物理屏幕），然后显示窗口的一个子集。当您显示带有预刷新的焊盘时，您正在显示焊盘子集的视图。当您显示 pad 的子集时，内容不会改变（或包装）。

如果您将下面的代码添加到您的示例中，您将看到每次按下键时视口都会移动，但垫的内容不会改变。

```
for (x=0; x<10; x++) {
    prefresh(pad_ptr, 0, x, 3, 3, 9+3, 9+3);
    wgetch(pad_ptr);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T00:46:48.067

将 pad_lines 和 pad_cols 更改为 9，看看你是否更快乐。

假设您的系统上的 LINES 和 COLS 为 100。您正在焊盘中创建一个 10+k 数组，例如：

```
a-z..a-z..a-z..a-k
l-z..a-z..a-z..a-d  
e-z..a-z..a-z..a-o //etc 
```

然后在`prefresh()`屏幕上显示前 9 列（共 9 行）。

# jquery - jquery ajax: doctype 语法错误和 $ 在远程服务器上未定义错误

> ID：10133490
> 
> 赞同：0
> 
> 时间：2012-04-12T23:56:59.187
> 
> 标签：jquery, ajax, cakephp

我的 jquery ajax 代码在我的本地服务器上运行良好。但是，它不适用于远程服务器 justhost.com。这让我发疯了。:( 有人可以指出我哪里出错了吗？

[Merry Flowers](http://www.merryflowers.com/)是我网站的链接。当您打开 firebug 访问网站时，您将能够看到以下提到的错误。

当我尝试使用 firebug 进行调试时，出现以下 2 个错误：

我在以下行收到语法错误：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

我尝试了不同的文档类型，但仍然遇到相同的错误。

我在以下行收到“$ 未定义错误”：

```
$(document).ready(function(){ 
```

谷歌浏览器开发者工具的错误：

```
 Resource interpreted as Script but transferred with MIME type text/html: "http://www.merryflowers.com/js/jquery.js".
jquery.js:1Uncaught SyntaxError: Unexpected token <
home:8Uncaught ReferenceError: $ is not defined 
```

当我单击 chrome 开发人员工具的网络选项卡时，

```
jquery.js's type is text/html not application/javascript. While the other javascript files are of type application/javascript. 
```

在按照 Lazerblade 要求进行所有更正后，cakephp 的原始 default.ctp 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 

Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<?php
 echo $this->Html->charset();
 ?>
<title>
    <?php  __('Merry Flowers Montessori'); ?>
    <?php echo $title_for_layout; ?>
</title>
<?php
    //echo $this->Html->meta('icon');
    echo $this->Html->css('cake.generic');  //link to cake.generic.css will be 

placed in $scripts_for_layout
        echo $this->Html->css('navbar.css'); 
        echo $this->Html->script('jquery.js'); //Include jquery library
/*      echo $this->Html->script('swfobject.js');
*/

    echo $this->Session->flash();
    echo $this->Session->flash('email');
    echo $scripts_for_layout;
?>
<script type="text/javascript">
   //var j=jQuery.noConflict();
  $(document).ready(function(){
      $("#MerryParentEmail").change(function(){
        //txt=$("#MerryParentEmail").val();
        email_id=$("#MerryParentEmail").serialize();
        //alert(txt);
        $.post("/students/get_parent_info",email_id,function(result_str){
        result_array=result_str.split('*****');
          $("#MerryParentInitial").val(result_array[0]);
          $("#MerryParentName").val(result_array[1]); 
          $("#MerryParentLandline").val(result_array[2]);
          $("#MerryParentMobile").val(result_array[3]); 
          $("#MerryParentAddress").val(result_array[4]);
          $("#MerryParentStateId").val(result_array[5]);
          state=result_array[5];
          txt_str="state_id="+state;
          $.get("/students/getcities",txt_str,function(result){
            $("#MerryParentCityId").html(result).show();
            $("#MerryParentCityId").val(result_array[6]);
          });
          $("#MerryParentPostalCode").val(result_array[7]);
        });
      });

       $("#MerryParentStateId").change(function(){
        state=$(this).val();
        txt_str="state_id="+state;
        $.get("/students/getcities",txt_str,function(result){
            $("#MerryParentCityId").html(result).show();
        });
       });
 });
 </script>
</head>
<body>

<div id="container">
    <div id="header">
            <?php 
               echo $this->element('logo');
               echo $this->element('navbar');
              ?>
    </div> <!-- finish div header -->
    <div id="content">
        <div>
            <div id="content1">
            <?php echo $content_for_layout; ?>
            </div>
            <div id="content2">
                <?php 
                       echo $this->Html->link($this->Html->image("admission_open.gif",array("alt"=>"admissions")),
                                "/students/add",array('escape'=>false));  //if escape is false, admission_open.gif 

displays, otherwise only link <img src="/merry_flowers/img/admission_open.gif" alt="admissions"/> displays.
                          echo $this->Html->image("contact_us.gif", $options=array()); 
                    ?>  
                </div> 
            </div>
        </div>  <!--finish div content-->
        <div id="footer"> 
            &copy;  2011 Merry Flowers Montessori | Designed by VRI Web
        </div>
   </div><!--div container finish-->
</body>
</html> 
```

以下是修改后的default.ctp查看源码（cakephp中的布局页面）。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 

Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />   <title>
        Merry Flowers Montessori        Home    </title>
    <link rel="stylesheet" type="text/css" href="/css/cake.generic.css" /><link rel="stylesheet" type="text/css" href="/css/navbar.css" /><script type="text/javascript" src="/js/jquery.js"></script><script type="text/javascript" src="/js/swfobject.js"></script>   <script type="text/javascript">
       //var j=jQuery.noConflict();
      $(document).ready(function(){
          $("#MerryParentEmail").change(function(){

        //txt=$("#MerryParentEmail").val();
        email_id=$("#MerryParentEmail").serialize();
        //alert(txt);
        $.post("/students/get_parent_info",email_id,function(result_str){
        result_array=result_str.split('*****');
          $("#MerryParentInitial").val(result_array[0]);
          $("#MerryParentName").val(result_array[1]); 
          $("#MerryParentLandline").val(result_array[2]);
          $("#MerryParentMobile").val(result_array[3]); 
          $("#MerryParentAddress").val(result_array[4]);
          $("#MerryParentStateId").val(result_array[5]);
          state=result_array[5];
          txt_str="state_id="+state;
          $.get("/students/getcities",txt_str,function(result){
            $("#MerryParentCityId").html(result).show();
            $("#MerryParentCityId").val(result_array[6]);
          });
          $("#MerryParentPostalCode").val(result_array[7]);
        });
      });

       $("#MerryParentStateId").change(function(){
        state=$(this).val();

txt_str="state_id="+state;
            $.get("/students/getcities",txt_str,function(result){
                $("#MerryParentCityId").html(result).show();
            });
           });
     });
     </script>
</head>

<body>
<div id="container">

    <div id="header">
            <div>
<div style="float:left; width:98%; background-color:#ffffff;">
<img src="/img/logo.png" alt="" />  </div>
<div style="float:right; width:5%; top:100%; right:10%;">
<a href="/pages/home">Home</a>  </div>

    </div><div id="menu">

    <ul id="nav">

<!--        <li><a href="/pages/home">Home</a></li>
-->         <li><a href="#">Our Program</a><ul>

        <li><a href="/pages/preschool">Preschool</a></li>
        <li><a href="/pages/kindergarten">Kindergarten</a></li>
        <li><a href="/pages/summer_camp">Summer Camp</a></li>
        </ul>
        </li>
        <li><a href="#">About Us</a><ul>

        <li><a href="/pages/about_us">Merry Flowers</a></li>
        <li><a href="/pages/tour_our_school">Tour Our School</a></li>
        <li><a href="/pages/contact_us">Contact Us</a></li>
        </ul>
        </li>

        <li><a href="#">My Child</a><ul>
        <li><a href="/merry_parents/register">Report Card</a></li>

        </ul>
        </li>

        <li><a href="#">Events</a><ul>
        <li><a href="#">News &amp; Events</a>               <ul>
                <li><a href="/pages/sports_day">Sports Day</a></li>
                <li><a href="/pages/annual_day">Annual Day</a></li>

            </ul>
        </li>

        <li><a href="/pages/list_of_holidays">List of Holidays</a></li>
        </ul>
        </li>
        <li><a href="#">FAQ</a><ul>
        <li><a href="/pages/faq">FAQ</a></li>

        <li><a href="/feedbacks/add">Feedback</a></li>
        <li><a href="/forum/home">Discussion</a></li>
        </ul>
        </li>
        <li><a href="#">Admissions</a><ul>
        <li><a href="/students/add">Enroll Now</a></li>
        </ul>

        </li>
    </ul><!--finish ul nav-->
   </div> <!--finish div menu-->        </div> <!-- finish div header -->
    <div id="content">
        <div>
            <div id="content1">
            <script type="text/javascript">
//<![CDATA[
swfobject.embedSWF("/main_ani.swf", "content1", "530", "300", "9.0.0",
            "", {}, {wmode : "opaque"}, {});
//]]>
</script>               </div>

                <div id="content2">
                    <a href="/students/add"><img src="/img/admission_open.gif" alt="admissions" /></a><img src="/img/contact_us.gif" alt="" />  
                </div> 
            </div>

    </div>  <!--finish div content-->
    <div id="footer"> 
        &copy;  2011 Merry Flowers Montessori | Designed by VRI Web
    </div>

 </div><!--div container finish-->
</body>

</html> 
```

顺便说一句，我正在使用 jquery 和 cakephp。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:05:46.517

CakePHP 有一个特性，它可以很好地生成它的 url。[使用HTML Helper URL](http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#HtmlHelper%3a%3aurl)非常容易。

我相信您的 jQuery 问题与 CakePHP 无关。我的猜测可能是您的 jQuery 文件链接无效或您的 jQuery 上下文已损坏。很难说。

编辑：看到你的页面后，我猜测问题是要么。

*   您正在将完整的 HTML 文档添加到每个 .ctp 模板中。这只需要在default.ctp中
*   或者，您在当前页面中再次使用 Ajax 加载完整页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T05:36:04.700

最可能的答案可能是您链接 jquery 文件的方式。

```
<script type="text/javascript" src="/js/jquery.js"></script> 
```

检查 firebug > Scripts 并查看 jquery.js 的结果是什么。如果我猜对了，`jquery.js`不是返回`jquery`代码而是返回 404 或其他内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T01:59:49.240

再检查一遍。问题不在于 jQuery 文件本身，而在于它被添加的方式，可能是 .htaccess 文件有冲突，或者路径设置错误。它正在尝试加载错误页面。查看 Chrome 开发者工具中的预览和响应，特别是加载 jQuery.js 时的响应。当您请求 jQuery 文件时，您正在加载您的网站页面。我需要查看更多实际代码，而不是查看源代码，以便找出确切的问题，但结果是 jQuery 没有加载......

编辑：检查您的 jQuery 文件是否确实在 /js/ 文件夹中，并且它的名称完全是 jquery.js，而不是 jquery.latest.min.js 或类似的东西。文件名区分大小写，因此如果是 jQuery.js（注意大写 Q），您需要重命名或更改代码。还要打开 jQuery 文件并确保它不为空（通常“下载”jQuery 需要在浏览器中以纯文本格式打开文件、复制所有文件、粘贴到文件中并保存该文件）。

EDIT2：如果这是在本地工作但不是在远程工作，有两个可能的原因。您要么在公共文件夹中的 .htaccess 文件中缺少重写条件，要么在您的配置文件之一（apache httpd.config 或 .htaccess 文件，或者可能在 config.php 文件中）有 /localhost/ （从您的公共文件夹中的 index.php 调用）。

```
Options -Indexes
RewriteEngine on
#
# Redirect all non-image and non-file requests to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php?url=$1 [PT,L] 
```

公用文件夹中的 .htaccess 示例，用于将路径不在公用文件夹中的所有请求重定向到您的索引文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T00:08:01.957

您发送请求的方式是

```
$.post("../students/get_parent_info" ... ); 
```

这似乎更像是一个**遍历**而不是链接的目录。即使它似乎在一个阶段中起作用，您也应该使用它。您可能必须提供直接链接，例如

```
$.post("http://domain.com/students/get_parent_info", ... ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T16:15:02.023

好的，在 lazerblade 的指导下，我发现了问题，public_html/merry_flowers/js 和 www/merry_flowers/js 文件夹中没有 jquery.js。现在，在将 jquery.js 添加到这些文件夹中之后，我在 jquery.js 的网络响应（chrome 开发人员工具的网络）中不再出现任何错误，并且 jquery.js 在网络中属于 application/javascript 类型。但是，我的 jquery 函数还没有工作。所以，我现在必须调查一下。

非常感谢你们所有人。您的帮助是无价的！

# html - CORS withCredentials XHR 预检未在 Firefox 中发布 Cookie

> ID：10133497
> 
> 赞同：17
> 
> 时间：2012-04-12T23:57:11.560
> 
> 标签：html, firefox, cookies, cross-domain

我正在尝试使用凭据进行 CORS XHR 发布。它在 Chrome 中运行良好，但在 Firefox 中却不行。cookie 不存在于飞行前请求标头中，因此我看到 302。这在 Chrome 中非常有效，因为 cookie 位于飞行前请求标头中，并且随后的 POST 会通过。

为什么这在 FF 中不起作用？我错过了什么？

```
// assume url, boundEventHandler and uploadData are defined, as this definitely works in Chrome
var xhr = new XMLHttpRequest(); 
xhr.open("POST", url, true); 
xhr.addEventListener ("readystatechange", boundEventHandler, false); 
xhr.withCredentials = true;  // FWIW, I've also tried the string 'true'
xhr.send(uploadData); 
```

有任何想法吗？我看到一些帖子说我可以在服务器端代理请求，但我更愿意根据 CORS 规范来让它工作。

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-13T04:47:11.620

[根据https://www.w3.org/TR/cors/#resource-preflight-requests](https://www.w3.org/TR/cors/#resource-preflight-requests)的规范，预检请求从不包含 cookie。具体来说，规范说：

> *   排除用户凭据。

并链接到[https://www.w3.org/TR/cors/#user-credentials](https://www.w3.org/TR/cors/#user-credentials)说：

> 就本规范而言，术语用户凭据是指 cookie、HTTP 身份验证和客户端 SSL (...)。

也就是说，您上面引用的代码片段根本不应该涉及预检：没有上传事件侦听器，方法与简单方法一样，并且没有设置作者标头。因此，如果您真的看到预检请求，第一个问题是为什么会发生这种情况。您在 Firefox 中是否有任何扩展可能会修改您的 XMLHttpRequest 对象？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-06T03:23:50.713

现在 Chromium（2014 年 7 月 4 日）不会发送带有预检请求的 cookie。 [https://code.google.com/p/chromium/issues/detail?id=377541](https://code.google.com/p/chromium/issues/detail?id=377541)

# qt - 在 CentOS 5.8 版上运行 Qt Creator - 无法解析 libdbus-1 中的“dbus_get_version”

> ID：10133499
> 
> 赞同：0
> 
> 时间：2012-04-12T23:57:34.067
> 
> 标签：qt, qt-creator

我在 CentOS 5.8 上成功构建了 Qt 4.8（没有 QtWebKit）（Qt 助手和演示运行良好）。我还针对 Qt 4.8 构建了 Qt Creator 2.4.1。在构建 Qt Creator 的过程中，我没有发现任何错误。但是，当我尝试运行 Qt Creator 时，我收到以下错误：

[root@localhost bin]# ./qtcreator 无法解析 libdbus-1 中的“dbus_get_version”。中止

有没有人遇到过这个错误？你怎么修好它的？不幸的是，升级到更好的操作系统（例如 Ubuntu）对我来说不是一个选择。

谢谢，

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T21:34:06.690

QtDBus 模块在运行时加载 libdbus-1 库（通过 dlopen）。这就是您没有编译/链接错误的原因。您可以尝试升级 dbus 包（或任何包含 libdbus-1.so 的包）或使用以前版本的 Qt。

（在 Gentoo 中，QtDBus-4.8 依赖于 dbus-1.2 而 QtDBus-4.7.4 依赖于 dbus-1.0.2）。

# vim - 当我做 vi 时调用了哪些函数

> ID：10133500
> 
> 赞同：0
> 
> 时间：2012-04-12T23:57:35.100
> 
> 标签：vim, filesystems, fuse

当我从命令提示符处执行 vi 文件名时，如果我使用 fusexmp 示例，会调用哪些 fuse 函数？我可以猜到 mknod，open 都被调用了。当我做一个写时，即当我做时：wq write 被调用。那正确吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T00:10:49.660

没有*非常*简单的方法可以查看任何给定文件操作调用了哪些 FUSE 函数，但是运行`strace(1)`会记录*系统调用*，这与 FUSE 函数非常接近：

```
$ strace -o /tmp/vim.all vim /etc/motd 
```

许多这些系统调用与一个文件无关，而是与加载过程`vim`、其动态链接库、您的本地配置及其所有支持文件相关。

以下是一些选定的行，它们引用了`/etc/motd`我打开的行：

```
stat("/etc/motd", {st_mode=S_IFREG|0644, st_size=183, ...}) = 0
stat("/etc/motd", {st_mode=S_IFREG|0644, st_size=183, ...}) = 0
stat("/etc/motd", {st_mode=S_IFREG|0644, st_size=183, ...}) = 0
stat("/etc/motd", {st_mode=S_IFREG|0644, st_size=183, ...}) = 0
access("/etc/motd", W_OK)               = -1 EACCES (Permission denied)
open("/etc/motd", O_RDONLY)             = 7
close(7)                                = 0
open("/etc/motd", O_RDONLY)             = 7
read(7, "Welcome to Ubuntu 11.04 (GNU/Lin"..., 8192) = 183
read(7, "", 65536)                      = 0
close(7)                                = 0
stat("/etc/motd", {st_mode=S_IFREG|0644, st_size=183, ...}) = 0 
```

中间的线条使重复的`stat(2)`调用看起来不那么愚蠢。

# jquery - 复杂的选择改变另一个选择..之前没有问过

> ID：10133513
> 
> 赞同：0
> 
> 时间：2012-04-12T23:59:51.763
> 
> 标签：jquery, select, onchange

我的问题很容易解释，但实施起来有点棘手。从逻辑上讲，这似乎很有可能，但我有点卡住了。

目标/目的：我的第一个 SELECT 名为“hour”，第二个 SELECT 名为“rec_hour”。每个都有相同的值。请参阅下面的 HTML 代码：

```
<select id="hour">
  <option value="0">00</option>
  <option value="1">01</option>
  <option value="2">02</option>
  <!-- This would go up to 23 -->
</select>

<select id="rec_hour">
   <option value="0">00</option>
   <option value="1">01</option>
   <option value="2">02</option>
 <!-- This would go up to 23 -->
</select> 
```

我从 PHP 文件“$hours”中收到一个变量，其中包含一个从 0 到 24 的整数值。现在，我想获得小时的值，假设这个场景是 6，然后在第二个 SELECT 中减去这个值(rec_hour)。

所以本质上，如果我返回的变量是 6。并且我从第一个选择（小时）中选择 10，那么我希望第二个选择显示/选择 10-6 的值，即 4。

我希望这是有道理的..

我绝望地尝试了下面的脚本，但无济于事：

```
 $(document).ready(function() {

    $("#hour").change(function() {
        var myHour = $(this).val();
        var Subtra = 10;
        var recHour = myHour - Subtra;

       $("#rec_hour").val = recHour;
       $("#rec_hour").text(recHour); 
     }
  });

}); 
```

我上面的代码使用“Subtra”作为试金石测试值。这实际上会根据我的 php 结果而改变。

更新：

我真正想做的就是这个..

我收到一个时间（仅小时）说 2 -> 指的是凌晨 2 点（14 点将是下午 2 点）n 然后我的 php 将计算小时以找出旅程需要多长时间。例如说这是 6 小时.. 那么我想向用户显示从凌晨 2 点开始落后 6 小时.. 即晚上 8 点.. 即您应该在晚上 8 点离开家.. 你跟着？还是我很困惑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T00:03:16.287

使用 .val() 设置 rec_hour 的值。另请注意，您的代码中有一些语法错误。你有一个额外的花括号。您还想使用 abs 值函数处理 subtra > myHour 的情况。

更正的代码：

```
$(document).ready(function() {

    $("#hour").change(function() {
        var myHour = $(this).val();
        var Subtra = 4;
        var recHour = Math.abs(Subtra - myHour);
       $("#rec_hour").val(recHour);
     });
}); 
```

注明错误的原件：

```
 $(document).ready(function() {

    $("#hour").change(function() {
        var myHour = $(this).val();
        var Subtra = 10;
        var recHour = myHour - Subtra;  //handle Subtra > myHour with abs()

       $("#rec_hour").val = recHour;
       $("#rec_hour").text(recHour); 
     } //This curly brace is not needed
  });

}); 
```

演示：http: [//jsfiddle.net/FdW4w/3/](http://jsfiddle.net/FdW4w/3/)

我给出了一些更具描述性的变量名称并应用了数学。小提琴也更新以反映这一点。

```
 $(document).ready(function() {

    $("#arrival").change(function() {
        var arrivalTime = $(this).val();
       $("#depart").val(getDepartTime(10, arrivalTime));
     });
});

      function getDepartTime(journeyDuration, arrivalTime){
          var departTime = 0;
          if(journeyDuration > arrivalTime){
             departTime = 24 - (Math.abs(journeyDuration - arrivalTime));             
          }else{
             departTime = arrivalTime -journeyDuration;
          }
          return departTime;
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T00:02:23.087

这应该工作：

```
$("#rec_hour").val(recHour); 
```

# iphone - 访问 UIWindow 的 rootViewController？

> ID：10133515
> 
> 赞同：1
> 
> 时间：2012-04-12T23:59:55.617
> 
> 标签：iphone, objective-c, ios

下面是[ECSlidingViewController](https://github.com/edgecase/ECSlidingViewController)演示代码的 applicationDidFinishLaunching 方法：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  ECSlidingViewController *slidingViewController = (ECSlidingViewController *)self.window.rootViewController;
  UIStoryboard *storyboard;

  if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
    storyboard = [UIStoryboard storyboardWithName:@"iPhone" bundle:nil];
  } else if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    storyboard = [UIStoryboard storyboardWithName:@"iPad" bundle:nil];
  }

  slidingViewController.topViewController = [storyboard instantiateViewControllerWithIdentifier:@"FirstTop"];

  return YES;
} 
```

对我来说没有意义的是第一行：

```
ECSlidingViewController *slidingViewController = (ECSlidingViewController*)self.window.rootViewController; 
```

我只是不明白你怎么能抓住窗口的根视图控制器，然后像你喜欢的那样投射它？那条线到底是做什么的，它是如何工作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T00:28:14.197

在您的故事板中，您为根视图控制器设置了一个场景（即在属性中选中了 rootViewController 复选框，并且画布上的初始箭头指向该视图控制器）。该视图控制器的类在属性检查器中设置。在您的情况下，课程设置为`ECSlidingViewController`. 这决定了故事板将实例化的对象的类。

UIWindow 有一个`rootViewController`返回该对象的属性。UIWindow 上的属性类型是`UIViewController`- 所以窗口知道它是一个视图控制器，但它不知道比这更多的细节。您`ECSlidingViewController`的类是`UIViewController`. 当它返回时，您的代码会将其转换为更具体的对象，以便您可以将其作为实际更具体的对象来使用。

# c++ - 在 C++ 对象中放置 int 矩阵数组时遇到问题

> ID：10133516
> 
> 赞同：1
> 
> 时间：2012-04-12T23:59:55.800
> 
> 标签：c++, arrays, visual-c++, initialization

我需要一个变量来保存 22 对整数（网格中的位置），所以我想有一个矩阵数组。所以在我的头文件中是：

```
int points[22][2]; 
```

但是当我将以下内容放入对象的构造函数中时：

```
this->points = {{1,2},{2,3},...}; 
```

它说“必须是一个表达式必须是一个可修改的左值”我尝试使用 const 关键字并将其作为头文件中的指针，如此处所述[表达式必须是一个可修改的左值](https://stackoverflow.com/questions/6008733/intellisense-expression-must-be-a-modifiable-lvalue)

我也尝试过创建一个单独的二维数组，然后分配它，但这也不起作用。

```
int points2 = {{1,2},{2,3},...};
this->points = points2; 
```

我习惯了 Java，对 C++ 不太熟悉。有一个默认构造函数将分配上述值，还有一个构造函数将矩阵作为参数。

以下确实有效：

```
this->point[1][1] = 4; 
```

但这意味着我不能将另一个值作为参数传递，我最终会在默认构造函数中得到 44 行凌乱的代码！我打算使用一个带有 2 个整数的结构并将它们放在一个向量中，这似乎有点矫枉过正，这意味着我需要 22 个向量插入，然后我什至用手动值调用构造函数，我只是认为必须做一个更好的方法:)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T00:03:24.623

由于您使用的是 C++，因此**更好**的选择是使用 a `vector`of `pair`s of `int`s。

像这样声明它：

```
std::vector<std::pair<int, int> > points; 
```

在您的构造函数中，您可以在初始化时指定大小

```
: points(22), 
```

或在任何时候设置它：

```
points.resize(22); 
```

您可以访问单个坐标

```
points[1].first = 1;
points[1].second = 44; 
```

或与

```
points[1] = make_pair(1, 44); 
```

或者您可以构建它而不必担心超出其分配的大小

```
points.push_back(make_pair(1, 44)); 
```

ETC

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T00:10:43.287

问题的根本原因是数组在 C++ 中不算作实值。它们在许多方面都不合标准——您刚刚遇到过其中一种。任何普通类型都可以按您的预期工作。不幸的是，对于我们这些不是语言专家的人来说，Visual Studio 抛出的错误毫无帮助。

您必须在堆栈上创建一个数组，然后手动循环并分配所有值。

# qt - 从 qt 中的对话框打开新对话框

> ID：10133517
> 
> 赞同：6
> 
> 时间：2012-04-13T00:00:08.377
> 
> 标签：qt, qt-creator, qdialog

我正在尝试从按钮单击事件的现有对话框中打开一个新的对话框窗口，但是当我从 MainWindow 打开对话框窗口时，我无法执行此操作。

我正在尝试：

```
Dialog1 *New = new Dialog1();

New->show(); 
```

是否有从现有对话框窗口中打开对话框窗口的不同方式？？？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T00:36:42.010

一定还有其他问题，因为您的代码对我来说看起来不错。这是我的做法：

```
#include <QtGui>

class Dialog : public QDialog
{
public:
    Dialog()
    {
        QDialog *subDialog = new QDialog;
        subDialog->setWindowTitle("Sub Dialog");
        QPushButton *button = new QPushButton("Push to open new dialog", this);
        connect(button, SIGNAL(clicked()), subDialog, SLOT(show()));
    }
};

class MainWindow : public QMainWindow
{
public:
    MainWindow()
    {
        Dialog *dialog = new Dialog;
        dialog->setWindowTitle("Dialog");
        dialog->show();
    }
};

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    MainWindow w;
    w.setWindowTitle("Main Window");
    w.show();

    return a.exec();
} 
```

顺便说一下，请注意我是如何将 QPushButton 的“clicked”信号连接到 QDialog 的“show”插槽的。非常便利。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-22T16:48:26.430

我是 QT 的新手，我确实遇到了类似的问题。就我而言，我是从主对话框中的函数调用新对话框。我正在使用`dlg->show`which 不会等到新对话框的结果。因此程序仍在运行。我改变`dlg->show`了`dlg->exec`，对话框现在可以工作了。在您的代码中，对话框似乎是一个局部变量，也许您也有同样的问题。其他选择可能是使用静态指针。

```
Dialog1 *newDlg = new Dialog1();
this->hide();
int result = newDlg->exec();
this->show();
delete newDlg; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-02T18:35:06.740

在 mainwindow.h 文件中，您应该声明一个指向新对话框的指针并包含新的 dialog.h，如

```
#include <myNewDialog.h>

private:
    Ui::MainWindow *ui;
    MyNewDialog *objMyNewDialog; 
```

之后，您可以调用您的对话框以显示在 mainwindow.cpp 中，例如

```
void MainWindow::on_btnClose_clicked()
{    
    objMyNewDialog= new MyNewDialog(this);
    objMyNewDialog->show();
} 
```

# ant - ant 文件集目录排除某些目录

> ID：10133522
> 
> 赞同：22
> 
> 时间：2012-04-13T00:00:37.590
> 
> 标签：ant

关于这个主题有很多问题，但没有一个答案能解决我的问题。再次启动此线程以获得新的输入。

我尝试了两种不同的方法来排除 B-dir 及其在 A-dir/subdir 下的所有内容。但没有一个工作。仅供参考，a-dir 在 dir.src 1)

```
 <copy todir="${dir.classes}" excludes="A-dir/**/B-dir/**">
  <fileset dir="${dir.src}" >
    <exclude name="**/*.java"/>
  </fileset>
  </copy> 
```

2)

```
 <copy todir="${dir.classes}">
  <fileset dir="${dir.src}" >
    <exclude name="**/*.java"/>
    <exclude name="A-dir/**/B-dir/**"/>
  </fileset>
  </copy> 
```

我尝试删除所有旧 jar 并像有人建议的那样进行干净的编译。但这也无济于事。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-13T00:08:38.227

我认为应该是：

```
<copy todir="${dir.classes}">
<fileset dir="${dir.src}" >
  <exclude name="**/*.java"/>
  <exclude name="**/A-dir/**/B-dir/**"/>
</fileset>
</copy> 
```

请注意，`**/A-dir/**`而不是`A-dir/**`.

# c++ - 如何找到最长的回文

> ID：10133531
> 
> 赞同：-4
> 
> 时间：2012-04-13T00:01:54.847
> 
> 标签：c++, palindrome

> **可能重复：**
> [编写一个函数，返回给定字符串中最长的回文](https://stackoverflow.com/questions/1115001/write-a-function-that-returns-the-longest-palindrome-in-a-given-string)

我有一个 C++ 任务，希望我编写一个程序，在给定文本中找到最长的回文。例如，文本是这样的：`asdqerderdiedasqwertunut`，我的程序应该`tunut`在 19 的索引中找到。但是，如果将输入更改为此`astunutsaderdiedasqwertunut`，它应该`astunutsa`在 0 的索引中找到，而不是`tunut`在 22 的索引中。

所以，我的问题是这个。但我是该主题的初学者，我只知道字符串类、循环、ifs。如果你能在这方面帮助我，那就太好了。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T00:09:42.327

这个想法很简单：

*   编写一个函数`is_palindrome(string)`，接收一个字符串，`true`如果是回文`false`则返回，否则返回
*   使用该函数，编写两个嵌套循环，从原始字符串中删除不同的子字符串。将每个子字符串传递给`is_palindrome(string)`，并在返回的字符串中选择最长的一个`true`。

您可以通过在较短的子字符串之前检查最长的子字符串来进一步优化您的程序。如果您从最长到最短检查子串，您将能够在找到第一个回文后立即返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T00:29:04.240

Dasblinkenlight 的想法很不错，但是这样更快：

回文有偶数个字母或奇数个字母，所以你有两种情况。让我们从偶数开始。您需要找到两个连续相同的字母，然后检查前一个字母是否与下一个字母相同。在其他情况下也是如此，除了起初您只需要一个字母。我英语说得不太好，所以希望你能理解。:)

# android - 模拟器中闪烁红色边框的含义

> ID：10133534
> 
> 赞同：13
> 
> 时间：2012-04-13T00:02:28.080
> 
> 标签：android, android-emulator

我注意到，在使用 Android 模拟器（API 级别 15）时，我偶尔会看到一个红色边框短暂出现。在应用程序之间切换或解锁设备时似乎有时会发生这种情况，但让它出现的可靠方法是打开相机应用程序：

![在此处输入图像描述](../Images/b58e1d5a5e793b2256e4163e5e24d36d.png)

打开消息应用程序时，我有时也可以调用此行为：

![在此处输入图像描述](../Images/26f76c8d306871ab07cd68969fbd1e9a.png)

这是什么意思？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T00:07:05.077

这也适用于 ICS 硬件（设置 > 开发人员 > 启用严格模式）。这表明前台的任何内容都在其进程的主应用程序线程上消耗了过多的时间。

# rdf - 我想知道如何构建平台以在 RDF 上执行 SPARQL 查询，尤其是我需要哪些编程工具

> ID：10133543
> 
> 赞同：3
> 
> 时间：2012-04-13T00:03:36.097
> 
> 标签：rdf, sparql, semantic-web, jena

我正在研究模糊 SPARQL 查询。我提出了一种扩展语法 f-SPARQL。我想通过对 RDF 进行查询来完成一个系统来验证此语法。由于我对 RDF 查询实现知之甚少，我想知道如何构建平台来执行 SPARQL 查询以及我需要哪些编程工具。例如，Jena TDB eclipse 或其他东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-08T18:08:01.063

[Apache Jena 的 ARQ](http://jena.apache.org/documentation/query/arq-query-eval.html "ARQ - 扩展查询执行")具有大量[扩展点](http://jena.apache.org/documentation/query/extension.html "ARQ 扩展")，用于添加过滤函数和属性函数等。几个项目（例如[LARQ](http://jena.sourceforge.net/ARQ/lucene-arq.html "LARQ - SPARQL 的自由文本索引")和[SpatialIndex](https://code.google.com/p/geospatialweb/wiki/SpatialIndex "语义网的地理空间推理")）已经利用这些扩展点来添加功能。我建议查看 ARQ 上的链接以及这些项目的代码库，因为它们将为您提供一些指导和一些示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T08:29:47.070

要将数据集导入 Jena TDB，您只需在命令提示符下运行它并在项目中查询它。

通过以下方式将其加载到 Windows 命令提示符中：

```
java -jar c:\your_ontology_directory\fuseki-server.jar  --file=your_ontology.rdf /your_datasetname 
```

然后您可以使用任何 GET/POST 应用程序（甚至在您的浏览器中）查询它：

```
http://localhost:3030/your_namespace/sparql?query=SELECT * { ?s ?p ?o } 
```

结果以 XML 格式返回。

```
<?xml version="1.0"?>
<sparql xmlns="http://www.w3.org/2005/sparql-results#">
  <head>
    <variable name="s"/>
    <variable name="p"/>
    <variable name="o"/>
  </head>
  <results>
    <result>
      <binding name="s">
        <uri>http://yago-knowledge/resource/wordnet_gulag_103467887</uri>
      </binding>
      <binding name="p">
        <uri>http://www.w3.org/2000/01/rdf-schema#subClassOf</uri>
      </binding>
      <binding name="o">
        <uri>http://yago-knowledge/resource/wordnet_prison_camp_104005912</uri>
      </binding>
    </result>
    ... 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T10:25:19.000

我建议您可以提供语言扩展的[SAIL API](http://www.openrdf.org/doc/sesame2/system/ch05.html)实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T08:34:03.130

祝你的冒险好运；）

您可以使用 O'Reilly Media, Inc. **Learning SPARQL**来学习 Sparql 。
这本书是 Sparql 的一个很好的资源。
此外，您可以使用**Twinkle** Sparql 在本地检查您的 Sparql 查询，以及您的 dbPedia。 [闪烁的 Sparql](http://www.ldodds.com/projects/twinkle/)

# javascript - 如何从客户端网页向 0mq 服务器发送消息

> ID：10133549
> 
> 赞同：0
> 
> 时间：2012-04-13T00:04:15.330
> 
> 标签：javascript, zeromq

是否可以直接从客户端浏览器中的 JavaScript 向 0mq 发送消息？

如果不是在 JavaScript 中，那么我应该使用 Flash 或设置一些 http 代理服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T04:51:15.243

0mq 不适用于面向 Internet 的端口。有一个名为 nullmq 的项目，它通过在防火墙后面将 web 协议转换为 zmq 来完成您想要的工作，同时在浏览器上保留 zeromq 之类的 api。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T00:20:40.380

我怀疑让您的客户端浏览器`XMLHttpRequest()`连接到您的 Web 应用程序，然后让您的 Web 应用程序与您的 0MQ 基础设施对话是最简单的。

0MQ有一个[javascript/flash 绑定](http://www.zeromq.org/bindings%3ajavascript)，但我自己从未使用过它，所以我无法评论稳定性或任何东西。

如果您告诉我们更多关于您想要完成的工作，我们可能会提出可行的替代方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T17:20:56.910

如果你想要一个持久连接，你可以在客户端使用 websockets，并使用像 tornado 或 socket.io 这样的 websocket 服务器将消息中继到 zmq 并返回。

# vb.net - 在井字游戏中编码领带

> ID：10133550
> 
> 赞同：-4
> 
> 时间：2012-04-13T00:04:19.503
> 
> 标签：vb.net

> **可能重复：**
> [tie tic tac toe 编码](https://stackoverflow.com/questions/10123342/tic-tac-toe-coding-for-tie)

我有一个井字游戏程序，我已经让一切都按照它应该的方式工作。但是，我在使用这种编码时遇到的最后一个问题是，我似乎无法弄清楚何时有一个平局如何编码。这是我到目前为止所拥有的。

```
Public Class Form1

Private turn As Integer = 1
Private play() As String = {"O", "X"}
Private board(2, 2) As String

Private Structure arrayIndex
    Dim x As Integer
    Dim y As Integer
End Structure

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    For x As Integer = 1 To 9
        Dim b As New Button With { _
            .Width = 80, _
            .Height = 80, _
            .Text = "", _
            .Location = New Point(60 + (((x - 1) Mod 3) * 80), 60 + (((x - 1) \ 3) * 80)), _
            .Tag = New arrayIndex With {.x = (x - 1) Mod 3, .y = (x - 1) \ 3}}
        Me.Controls.Add(b)
        AddHandler b.Click, AddressOf buttons_click

    Next
    Me.SetClientSizeCore(360, 360)

End Sub

Private Sub buttons_click(ByVal sender As System.Object, ByVal e As System.EventArgs)
    If DirectCast(sender, Button).Text <> "" Then Return
    DirectCast(sender, Button).Text = play(turn Mod 2)
    Dim index As arrayIndex = DirectCast(DirectCast(sender, Button).Tag, arrayIndex)
    board(index.x, index.y) = play(turn Mod 2)
    turn += 1
    winner()
End Sub

Private Sub winner()
    Dim rows(7) As String
    rows(0) = board(0, 0) & board(1, 0) & board(2, 0)
    rows(1) = board(0, 1) & board(1, 1) & board(2, 1)
    rows(2) = board(0, 2) & board(1, 2) & board(2, 2)
    rows(3) = board(0, 0) & board(0, 1) & board(0, 2)
    rows(4) = board(1, 0) & board(1, 1) & board(1, 2)
    rows(5) = board(2, 0) & board(2, 1) & board(2, 2)
    rows(6) = board(0, 0) & board(1, 1) & board(2, 2)
    rows(7) = board(2, 0) & board(1, 1) & board(0, 2)

    For x As Integer = 0 To 7
        If rows(x).Length = 3 AndAlso (rows(x)(0) = rows(x)(1) AndAlso rows(x)(0) = rows(x)(2)) Then
            If MessageBox.Show(rows(x)(0) & "'s winsssss!", "We have a winner!", MessageBoxButtons.OKCancel, MessageBoxIcon.Information) = DialogResult.OK Then
                turn = 1
                ReDim board(2, 2)
                For Each ctrl As Control In Controls
                    ctrl.Text = ""
                Next
                Return
            Else
                Me.Close()

            End If

        End If
    Next

End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T00:43:31.803

如果你有`Me.close()`，那就是说你打领带的地方。基本上，您输入的逻辑很简单，如果一方（x 或 o）获胜，则会有一个消息框显示它。然后你重置游戏并返回。在那之后有一个声明`else`意味着没有人赢得比赛，所以假设有平局。（如果所有空格都已填满）`Me.close()``else`

# php - 分析英文文本句子以检测 PHP 中的韵律

> ID：10133554
> 
> 赞同：4
> 
> 时间：2012-04-13T00:05:27.547
> 
> 标签：php, algorithm, text, lexical-analysis

我不确定这是否可能，但有没有办法（预先编写的库或已知的科学检测方案）来分析几句文本并确定这些句子是否押韵？一位同事建议比较第一个和最后一个单词并使用同义词库，但我不太明白它是如何工作的。

高精度不是我的目标，即使是 20% 的精度也很棒，这是一个花哨的小 Web 应用程序想法，我没有什么重要的，只是觉得它很酷。

我愿意尝试其他语言，甚至我听说过的 Python 也很适合分析文本，但 PHP 会更好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T00:10:02.547

Metaphone [http://www.php.net/manual/en/function.metaphone.php](http://www.php.net/manual/en/function.metaphone.php)

您可以将输入分类为语音（声音），然后检查相同的声音是否经常出现。由于每个都应该与音节匹配，因此您可以计算 Levenshtein 距离（计算匹配之间的音节）以查看它们是否适合某些已知模式，即俳句。

[http://www.php.net/manual/en/function.levenshtein.php](http://www.php.net/manual/en/function.levenshtein.php)

[http://php.net/manual/en/function.soundex.php](http://php.net/manual/en/function.soundex.php)

# javascript - 从 iframe 到 top.document.body 的 fireEvent

> ID：10133557
> 
> 赞同：0
> 
> 时间：2012-04-13T00:05:47.217
> 
> 标签：javascript, javascript-events

我有这个功能：

```
function doSomething(e) {
    if (!e) var e = window.event;
    alert(e.type);
} 
```

当 HTML (Master.html) 页面准备好时......我称之为另一个：

```
var iniciarTimeOut = function (e) {
    document.onload = doSomething;
    window.onmousedown = doSomething;
    window.onkeypress = doSomething;
}; 
```

我在 Master.html 中有一个 iframe，我想将事件检测到 iframe.html 但在 Master.html 中触发事件我正在尝试这样做：

```
document.onmousedown = top.document.body.fireEvent("onload");
document.onkeypress = top.document.body.fireEvent("onmousedown");
document.onload = top.document.body.fireEvent("onload"); 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:20:59.337

我会在您的 iframe 中创建一个虚构事件并将其附加到目标链接或框架。

您可能还注意到，触发事件的方式取决于测试浏览器遵循的标准：

```
 // Attach the fictive event object to the target
    // MSIE
    if (document.createEventObject )
        YourTarget.fireEvent('onmouseup',oEvt) ;
    // W3C
    else
        YourTarget.dispatchEvent(oEvt) ; 
```

请[在此处查看更多详细信息](http://hornetbzz.developpez.com/tutoriels/javascript/dom/#L5-E-1-C)

希望它对您有所帮助或至少给您一个提示，因为我不确定完全理解您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:04:21.590

这个问题的解决方案是 HTML5 使用 postMessage。

我在这里找到了一个例子： [http ://robertnyman.com/html5/postMessage/postMessage.html](http://robertnyman.com/html5/postMessage/postMessage.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T07:54:31.643

您可以在所需的 iframe 中创建一个包装器 fireevent 方法，并从该包装器方法调用 windows fire 事件。

从除此之外的任何 iframe 调用此包装器。它将在所需的 iframe 上触发事件。

# css - 如何用 CSS 控制一个？

> ID：10133558
> 
> 赞同：0
> 
> 时间：2012-04-13T00:05:47.233
> 
> 标签：css, label

我有这个片段：

```
 <label>&nbsp;</label><a id="whatever" 
      onclick="addmore('field_whatever', 'What's up?');">The deal is?</a><br/> 
```

如何使用 CSS 在顶部或底部添加空间。我可以为 margin-left 做到这一点，但它不适用于 margin-top 或 margin-bottom。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T00:11:52.283

`labels`默认情况下是内联的。他们不会在顶部/底部边距上响应。您必须告诉他们显示为`block`/ `inline-block`。

像这样

```
label { 
    display: inline-block;
    margin: 20px 0;
} 
```

* * *

此外，您的锚有一个未转义的报价。改正为这样

```
<a id="whatever" 
      onclick="addmore('field_whatever', 'What\'s up?');">The deal is?</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T00:08:25.417

```
#whatever{
    margin-left: 10px;
    margin-top: 10px;
    // etc, can even do this
    margin: 10px 10px 5px 20px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T00:08:32.907

试试显示块，应该可以的。

```
label {
   display:block;
   margin:20px 0;
} 
```

# jsf-2 - JSF 2.0 在视图中找不到组件 ID

> ID：10133561
> 
> 赞同：1
> 
> 时间：2012-04-13T00:06:10.557
> 
> 标签：jsf-2

我用 date_m 给出了输入文本的 id。当我尝试访问该页面时，它给出了一个错误，说组件 id date_m not found in view。但是当 id 更改为 date-m 时，我没有收到此错误。JSF 不允许 id 下划线吗？在我们的项目中，javax.faces.SEPARATOR_CHAR 是下划线。

```
<h:inputText id="date_m" value="{bean.month}"/>
<h:message id="error" for="date_m"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T03:15:39.237

组件 ID 不应包含与分隔符相同的字符。这就是为什么默认分隔符是`:`. 不能在组件 ID 中使用，根据 的规则会失效[`UIComponent#setId()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#setId%28java.lang.String%29)，但在 HTML 元素 ID 中是允许的。

但是，如果您通过`javax.faces.SEPARATOR_CHAR`上下文参数将默认分隔符更改为组件 ID 中允许的字符，那么在指定组件 ID 时应格外小心。您应该确保不要在组件 ID 中完全使用分隔符，否则该[`UIViewRoot#findComponent()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponentBase.html#findComponent%28java.lang.String%29)方法可能会中断。JSF 在内部使用此方法按客户端 ID 查找组件。

因此，如果您的分隔符是`_`，那么您不应在组件 ID 中的*任何地方使用它。*因此，逻辑上的结果是改为使用`-`。

### 也可以看看：

*   [如何在 CSS 选择器中使用带有冒号“：”的 JSF 生成的 HTML 元素 ID？](https://stackoverflow.com/questions/5878692/how-to-use-jsf-generated-html-element-id-in-css-selectors)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T01:02:34.840

如果您的分隔符是“_”，那么我认为您在 id 字段中使用下划线混淆了查找算法。

尝试删除下划线（从“date_m”到“datem”），然后看看会发生什么。

# objective-c - 从外部源注入 NSData（从 NSCoding 生成）？

> ID：10133566
> 
> 赞同：0
> 
> 时间：2012-04-13T00:06:45.797
> 
> 标签：objective-c, xml, nsdata, nscoding

我们有一个应用程序，我们使用 NSCoding 将我们的对象数据归档到 NSData。然后我们获取 NSData 并将其发送到 XML 解析器并将其发送到云服务器进行存储。

我们有一个客户希望能够在云服务器上更改或创建他们自己的对象，然后让我们的应用程序再次读取 NSData 并查看对象的内容。

客户是基于 Windows 的，因此我们需要一种方法让他们能够以编程方式生成与 NSData 存储的相同数据结构。我可以向他们提供我正在解码的数据密钥和数据类型。

有没有办法对 NSData 对象进行逆向工程，并从非 Objective-C 的东西中注入、修改等？

**更新：** 2012.0413 添加代码：

这是我用来获取数据的代码：

```
NSMutableData *data = [NSMutableData data];
NSKeyedArchiver  *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];

    //go and encode ourselves so we can save our state in CD.
[self encodeWithCoder:archiver]; 
```

这是 encodwWithCoder 例程：

```
-(void) encodeWithCoder:(NSCoder *)encoder {

        //See if mama has anything for us...
    [super encodeWithCoder:encoder];
        //encode our state

    [encoder encodeObject:[self elementName] forKey:@"name" ];
    [encoder encodeObject:[self elementViewContents] forKey:@"elementViewContents" ];
    [encoder encodeObject:[self elementGestureRecognizerView] forKey:@"elementGestureRecognizerView" ];
    [encoder encodeCGRect:self.frame forKey:@"frame"];
    [encoder encodeCGRect:self.bounds forKey:@"bounds"];
    [encoder encodeCGPoint:self.center forKey:@"center"];
    [encoder encodeBool:elementLocked forKey:@"elementLocked"];

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:02:09.020

如果您像这样设置键控存档器的输出格式：

```
NSMutableData *data = [NSMutableData data];
NSKeyedArchiver  *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
[archiver setOutputFormat:NSPropertyListXMLFormat_v1_0];
[self encodeWithCoder:archiver]; 
```

那么 NSData 将只是 XML 文本（我认为是 UTF8 编码的？），任何东西都应该能够解析和修改。

# java - availableProcessors() 为双核手机返回 1

> ID：10133570
> 
> 赞同：11
> 
> 时间：2012-04-13T00:07:05.340
> 
> 标签：java, android, performance, processors

我最近买了一部 Moto Atrix 2 手机。当我试图查看手机中的处理器规格时，Runtime.getRuntime().availableProcessors() 返回 1。/proc/cpuinfo 也只有处理器 0 的信息。

出于好奇，我在我朋友的三星 Galaxy S2 上进行了同样的检查，它又是一款双核手机。这也表明没有。核心数为 1。

我在我的 Moto xoom 平板电脑中检查了同样的内容，它也是双核的。这次 availableProcessors() 返回 2 并且 cpuinfo 也有处理器 0 和处理器 1 的详细信息。

我很困惑。为什么有些设备携带不同的信息？有人可以解释这个异常吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-13T00:19:18.573

`Runtime.getRuntime().availableProcessors()`只返回在线处理器的数量，所以当第二个内核处于休眠状态时它会返回 1。这样做是为了在资源较少的任务期间保持电力。

要查看所有可用内核，请查看 /sys/devices/system/cpu/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T23:28:32.583

这将为您提供 Android 上的核心数量（基于[这篇文章](https://stackoverflow.com/a/10377934/878126)）：

```
public static int getCoresCount()
    {
    class CpuFilter implements FileFilter
      {
      @Override
      public boolean accept(final File pathname)
        {
        if(Pattern.matches("cpu[0-9]+",pathname.getName()))
          return true;
        return false;
        }
      }
    try
      {
      final File dir=new File("/sys/devices/system/cpu/");
      final File[] files=dir.listFiles(new CpuFilter());
      return files.length;
      }
    catch(final Exception e)
      {
      return Math.max(1,Runtime.getRuntime().availableProcessors());
      }
    } 
```

# c++ - 如何在 C++ 中创建一个基本线程

> ID：10133574
> 
> 赞同：2
> 
> 时间：2012-04-13T00:07:59.560
> 
> 标签：c++, multithreading

我有课`main.cpp`，还有`MyClass.cpp`。

在`main.cpp`，我有很多代码。不过，在顶部，我创建了一个`MyClass`对象，然后我想启动一个位于`MyClass`. 我希望它调用一个函数`Run()`并让该函数在运行中的其余函数的`main.cpp`同时运行。

在 C++ 中执行此操作的最简单方法是什么。我从来没有在 C++ 中完成过线程，但是我在 Java 中这样做过。

如果可能的话，我想避免使用外部包等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T00:15:05.790

最简单的方法是使用[boost 线程](http://www.boost.org/libs/thread/)库。

```
#include <boost/thread.hpp>
#include <boost/bind.hpp>

...

int main()
{
  ...
  MyClass mc;
  boost::thread bt(boost::bind(MyClass::Run, &mc));
  ...
  bt.join();
  ...
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T00:13:39.053

C++ 语言本身没有任何线程* 的概念。您当然可以用 C++ 编写多线程程序，但它会涉及使用特定于平台的线程库。例如，您可以在 Linux 系统上使用“pthreads”库。你的目标平台是什么？

*新 C++11 规范中添加的扩展增加了对线程的标准化支持，但许多编译器和标准库尚未实现此版本的标准。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T00:20:53.070

使用标准 C++：

```
#include <future>

int main() {
    MyClass mc;
    auto future = std::async(MyClass::Run,&mc);
    ...
} 
```

# asp.net - 服务器端表单标签的 W3C 验证

> ID：10133579
> 
> 赞同：8
> 
> 时间：2012-04-13T00:08:20.127
> 
> 标签：asp.net, html, w3c-validation

我在 w3.org 中检查了我的网站 html 验证并收到此错误

> 元素表单上属性操作的错误值：必须为非空。

但我的表单是 asp.net 服务器端表单，我无法设置操作属性。

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T11:05:20.203

这是一篇旧文章，但为了将来在 ASP.NET 中参考，可以执行以下操作以避免空白操作属性：

```
<form action="#" runat="server"> 
```

这将通过 W3C 进行验证，并且不需要您执行任何特殊编码来检测您当前所在的页面 url。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-15T11:43:22.320

```
form1.Action = Request.Url.AbsoluteUri; 
```

这对我有用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T05:06:48.093

省略属性`action`。根据 HTML5 草案，它不是必需的，但如果存在，它的值必须是非空的。参考：WHATWG HTML5 草案，[属性](http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#attr-fs-action)[描述`action`](http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#attr-fs-action)。

# java - 为什么 Collections.frequency 在转换后的列表中没有按预期工作？

> ID：10133584
> 
> 赞同：6
> 
> 时间：2012-04-13T00:08:42.820
> 
> 标签：java

我过去使用过 Collections.frequency，它运行良好，但现在我使用 int [] 时遇到了问题。

基本上 Collections.frequency 需要一个数组，但我的数据是 int[] 的形式，所以我转换了我的列表但没有得到结果。我认为我的错误在于列表的转换，但不知道该怎么做。

这是我的问题的一个例子：

```
import java.util.Arrays;
import java.util.Collection;
import java.util.Collections;

public class stackexample {
    public static void main(String[] args) {
        int[] data = new int[] { 5,0, 0, 1};
        int occurrences = Collections.frequency(Arrays.asList(data), 0);
        System.out.println("occurrences of zero is " + occurrences); //shows 0 but answer should be 2
    }
} 
```

我没有得到零错误，但是当我尝试列出其中的项目时，我得到了奇怪的数据`Arrays.asList(data)`，如果我只是直接添加数据，它想将我的列表转换为`collections<?>`

有什么建议么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T00:25:57.447

这有效：

```
import java.util.Arrays;
import java.util.Collections;
import java.util.List;

public class stackexample {
    public static void main(String[] args) {
        List<Integer> values = Arrays.asList( 5, 0, 0, 2 );
        int occurrences = Collections.frequency(values, 0);
        System.out.println("occurrences of zero is " + occurrences); //shows 0 but answer should be 2
    }
} 
```

这是因为`Arrays.asList`没有给你你认为的：

[http://mlangc.wordpress.com/2010/05/01/be-carefull-when-converting-java-arrays-to-lists/](http://mlangc.wordpress.com/2010/05/01/be-carefull-when-converting-java-arrays-to-lists/)

你得到的`List`是`int []`，不是`int`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T00:27:40.907

你的问题来自这个指令`Arrays.asList(data)`。

这个方法的返回`List<int[]>`不是`List<Integer>`。

这是一个正确的实现

```
 int[] data = new int[] { 5,0, 0, 1};
    List<Integer> intList = new ArrayList<Integer>();
    for (int index = 0; index < data.length; index++)
    {
        intList.add(data[index]);
    }

    int occurrences = Collections.frequency(intList, 0);
    System.out.println("occurrences of zero is " + occurrences); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T00:27:01.120

API 需要一个`Object`, 原始类型不是对象。试试这个：

```
import java.util.Arrays;
import java.util.Collection;
import java.util.Collections;

public class stackexample {
    public static void main(String[] args) {
        Integer[] data = new Integer[] { 5,0, 0, 1};
        int occurrences = Collections.frequency(Arrays.asList(data), Integer.valueOf(5));
        System.out.println("occurrences of five is " + occurrences); 
    }
} 
```

# java - Android SQLite 更新查询 - 我错过了什么

> ID：10133588
> 
> 赞同：0
> 
> 时间：2012-04-13T00:09:38.147
> 
> 标签：java, android, sqlite

```
package lab.ex1;

import java.util.ArrayList;
import java.util.List;

import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteQueryBuilder;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;
import lab.ex1.HospitalDatabase.Patient;

public class DisplayPatient extends HospitalActivity {

    @Override

    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.display);
        displayData();

    }

    private void displayData()
    {

         final List<Integer> myList = new ArrayList<Integer>();
         final Intent me = new Intent(DisplayPatient.this,UpdatePatient.class);
         final Bundle b = new Bundle();

        //Build new Patient
        PatientData build = new PatientData();

        final TableLayout viewData = (TableLayout)findViewById(R.id.tblDisplay);

        SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();
        queryBuilder.setTables(Patient.patientTableName);

        SQLiteDatabase db = mDatabase.getReadableDatabase();

        String asColumnsToReturn[] = {Patient.patientTableName + "." + Patient.ID, 
                                      Patient.patientTableName + "." + Patient.firstName, 
                                      Patient.patientTableName + "." + Patient.lastName,
                                      Patient.patientTableName + "." + Patient.room,
                                      Patient.patientTableName + "." + Patient.department}; 

        Cursor c = queryBuilder.query(db,asColumnsToReturn,null,null,null,null,Patient.DEFAULT_SORT_ORDER);

        if (c.moveToFirst())
        {
            for (int i=0; i< c.getCount(); i++)
            {
                final TableRow newRow = new TableRow(this);
                Button update = new Button(this);
                TextView display = new TextView(this);

                display.setTextSize(15);

                    update.setX(15);
                    update.setY(10);
                    update.setTextSize(10);

                Button deleteButton = new Button(this);

                deleteButton.setX(100);
                deleteButton.setY(100);
                deleteButton.setTextSize(10);

                deleteButton.setText("Delete");
                update.setText("Update");
                deleteButton.setTag(c.getInt(c.getColumnIndex(Patient.ID)));

                update.setTag(c.getInt(c.getColumnIndex(Patient.ID)));
                newRow.setTag(c.getInt(c.getColumnIndex(Patient.ID)));      // set the tag field on the TableRow view so we know which row to delete

                myList.add(c.getInt(c.getColumnIndex(Patient.ID)));

                build.setID(Integer.parseInt(c.getString(c.getColumnIndex((Patient.ID)))));
                build.setFirstName((c.getString(c.getColumnIndex(Patient.firstName))));
                build.setLastName(c.getString(c.getColumnIndex(Patient.lastName)));
                build.setDepartment(c.getString(c.getColumnIndex(Patient.department)));
                build.setRoom(Integer.parseInt(c.getString(c.getColumnIndex(Patient.room))));

                deleteButton.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {
                        Integer id = (Integer) v.getTag();
                        deletePatient(id);
                        final TableLayout patientTable = (TableLayout) findViewById(R.id.tblDisplay);

                        View viewToDelete = patientTable.findViewWithTag(id);
                        viewData.removeView(viewToDelete);

                    }
                });

                update.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        Integer id = (Integer)v.getTag();
                        final TableLayout patientRmv = (TableLayout)findViewById(R.id.tblDisplay);

                        for (Integer delete : myList )
                        {
                            View viewToDelete = patientRmv.findViewWithTag(delete);
                            viewData.removeView(viewToDelete);
                        }

                        b.putString("key", Integer.toString(id));
                        me.putExtras(b);
                        startActivity(me);

                    }
                });

                display.setText(build.toString());
                newRow.addView(display);
                newRow.addView(update);
                //newRow.addView(deleteButton);

                viewData.addView(newRow);
                c.moveToNext();

            }

        }

        else
        {
            TableRow newRow = new TableRow(this);
            TextView noResults = new TextView(this);
            noResults.setText("No results to show.");
            newRow.addView(noResults);
            viewData.addView(newRow);
        }
        c.close();
        db.close();

    }

    public void deletePatient(Integer id)
    {

            SQLiteDatabase db = mDatabase.getWritableDatabase();
            String astrArgs[] = { id.toString() };
            db.delete(Patient.patientTableName, Patient.ID+ "=?",astrArgs );  
            db.close();
    }

}

package lab.ex1;

import lab.ex1.HospitalDatabase.Patient;
import android.content.ContentValues;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;

public class UpdatePatient extends HospitalActivity {

     Spinner spinner;
     TextView update;
     String up;
     Button check;

     EditText entry;
     String setPosition;
     TextView updateID;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.updatepatient);

        check = (Button)findViewById(R.id.btnUpdate);

        entry = (EditText)findViewById(R.id.editUpdate);
        updateID = (TextView)findViewById(R.id.txtIDUpdate);

         Bundle accept = getIntent().getExtras();

         up = accept.getString("key","0");

         updateID.setText(null);
         updateID.setText("ID: "  + up);

        update = (TextView)findViewById(R.id.txtUpdateMessage);
        update.setText(null);
       // update.setText(up);
         spinner = (Spinner) findViewById(R.id.spnChoice);
         ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
                    this, R.array.arrFields, android.R.layout.simple_spinner_item);
            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            spinner.setAdapter(adapter);

          spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());

          check.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {

                    updateDB(entry.getText().toString(),setPosition,up);

                }
            });

    }

    public class MyOnItemSelectedListener implements OnItemSelectedListener {

        public void onItemSelected(AdapterView<?> adapterView,
            View view, int pos, long id) {

            update.setText(null);
            update.setText("I will update On " + adapterView.getItemAtPosition(pos).toString());
            setPosition = adapterView.getItemAtPosition(pos).toString();

        }

        public void onNothingSelected(AdapterView parent) {
          // Do nothing.
        }

    }

    public void updateDB(String valuesToUpdate, String field,String ID)
    {

        SQLiteDatabase db = mDatabase.getWritableDatabase();
        db.beginTransaction();
        try
        {
            ContentValues updatePatient = new ContentValues();

            if (field == "First Name")
            {
                updatePatient.put(Patient.firstName, valuesToUpdate);
                String astrArgs[] = { up.toString() };
                db.update(Patient.patientTableName,updatePatient, Patient.ID+"=?", astrArgs);
                //
                db.setTransactionSuccessful();
            }

        }

        finally
        {
            db.endTransaction();
        }

        db.close();

        Intent me = new Intent(UpdatePatient.this,DisplayPatient.class);
        startActivity(me);

    }
} 
```

我正在使用 Android SQLite 数据库。在我的显示类中，它从数据库中读取所有条目并将它们与每个条目旁边的更新按钮一起显示。该条目更新按钮的标签具有条目 Patient.ID。当用户单击更新时，他们将被带到更新类，在那里他们可以选择他们想要更新的内容，名字，姓氏，公寓，房间。之后他们点击更新，他们被带回显示类，他们应该看到那里的变化。但是，当它们被取回时，之前的值仍然存在，更改没有显示出来，我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T00:35:38.843

将您的 displaydata() 调用从 onCreate 移至 onResume。

# c++ - 在结构或类中使用智能指针

> ID：10133591
> 
> 赞同：6
> 
> 时间：2012-04-13T00:09:53.513
> 
> 标签：c++, visual-c++, c++11, smart-pointers

我编写了一个函数，它从文件中加载字节并返回一个包含字节缓冲区和缓冲区长度的 FileData 结构。

我希望缓冲区在被消耗并超出范围后立即被删除。

由于各种转换错误，我无法编译它。另外，我不确定缓冲区是否被正确移动而不是被复制。我不介意 FileData 结构本身被复制，因为它最多可能是 16 个字节。

一般来说，您如何将智能指针用作类/结构字段？这甚至是你会做的事情吗？

我知道，这是一个有点模糊的问题，但是由于我在一般意义上对智能指针有一些概念上的困难，我希望这个例子能帮助我朝着正确的方向前进。

这是我到目前为止所得到的：

```
struct FileData
{
    unique_ptr<char[]> buf;
    unsigned int len;
};

FileData LoadFile(string filename)
{
    ifstream str;
    str.open(filename, ios::binary);

    str.seekg(0, ios::end);
    auto len = str.tellg();
    str.seekg(0, ios::beg);

    char* buf = new char[len];

    str.read(buf, len);
    str.close();

    FileData d = { unique_ptr<char[]>(buf), len };

    return d;
} 
```

**编辑：**由于有些人对我使用此当前代码得到的错误消息感到好奇，所以这里是：

```
error C2248: 'std::unique_ptr<_Ty>::unique_ptr' : cannot access private member declared in class 'std::unique_ptr<_Ty>' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T00:35:27.577

您的代码很好，除了一个小细节：

```
struct FileData
{
    unique_ptr<char[]> buf;
    <del>unsigned int</del> <ins>streamoff</ins> len;
}; 
```

它不为您编译的原因是您的编译器尚未实现特殊移动成员的自动生成。在完全符合 C++11 的编译器中，您的`FileData`行为就像：

```
struct FileData
{
    unique_ptr<char[]> buf;
    streamoff len;

    FileData(FileData&&) = default;
    FileData& operator=(FileData&&) = default;
    FileData(const FileData&) = delete;
    FileData& operator=(const FileData&) = delete;
    ~FileData() = default;
}; 
```

默认的移动构造函数只是简单地移动构造每个成员（对于默认的移动赋值也是如此）。

当从 中返回`d`时`LoadFile`，会发生一个隐式移动，它将绑定到隐式默认的移动构造函数。

使用`vector<char>`或`string`按照其他人的建议也可以。但就 C++11 而言，您的代码没有任何问题。

哦，我可能会这样调整它：我喜欢尽快拥有我的资源：

```
FileData LoadFile(string filename)
{
    ifstream str;
    str.open(filename, ios::binary);

    str.seekg(0, ios::end);
    auto len = str.tellg();
    str.seekg(0, ios::beg);

    FileData d = {unique_ptr<char[]>(new char[len]), len};

    str.read(d.buf.get(), d.len);
    str.close();

    return d;
} 
```

如果您需要显式定义`FileData`移动成员，它应该如下所示：

```
struct FileData
{
    unique_ptr<char[]> buf;
    streamoff len;

    FileData(FileData&& f)
        : buf(std::move(f.buf)),
          len(f.len)
        {
            f.len = 0;
        }

    FileData& operator=(FileData&& f)
    {
        buf = std::move(f.buf);
        len = f.len;
        f.len = 0;
        return *this;
    }
}; 
```

哦，这让我想到了另一点。默认的移动成员并不**完全**正确，因为它们在源中没有设置`len`为 0。这是否是错误取决于您的文档。 `~FileData()`不需要`len`反映缓冲区的长度。但其他客户可能会。如果您将移动的来源定义`FileData`为没有可靠的`len`，则默认的移动成员很好，否则它们不是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T00:16:50.143

如果您不介意在返回时被复制，我可能会使用 a`std::vector`而不是 a ：`std:::unique_ptr<char[]>``std::vector``FileData`

```
struct FileData 
{ 
    vector<char> buf; 
}; 

FileData LoadFile(string filename) 
{ 
    ifstream str; 
    str.open(filename, ios::binary); 

    str.seekg(0, ios::end); 
    auto len = str.tellg(); 
    str.seekg(0, ios::beg); 

    FileData d; 
    d.buf.resize(len); 

    str.read(&(d.buf)[0], len); 
    str.close(); 

    return d; 
} 
```

或者，为了避免复制，调用者可以传入 a`FileData`作为函数参数而不是返回值：

```
struct FileData 
{ 
    vector<char> buf; 
}; 

void LoadFile(string filename, FileData &data) 
{ 
    ifstream str; 
    str.open(filename, ios::binary); 

    str.seekg(0, ios::end); 
    auto len = str.tellg(); 
    str.seekg(0, ios::beg); 

    data.buf.resize(len); 

    str.read(&(data.buf)[0], len); 
    str.close(); 
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-13T00:28:34.427

如何使用 std::string 作为缓冲区。它具有您想要的所有行为：

*   引用计数而不是复制
*   一旦超出范围就会消失
*   保存任意数量的任意字节

人们会对此投反对票，因为它不是字符串的最初预期用途；可能派生一个类（或包装它）并将其称为“缓冲区”

# html - HTML表格对齐图像和文本

> ID：10133595
> 
> 赞同：4
> 
> 时间：2012-04-13T00:10:06.727
> 
> 标签：html

在示例文章中，我添加了一个包含 2 列的 html 表格，左列用于图像，右列用于图像描述。

问题是，右栏中的文本描述在图像下方，就像图像迫使文本分成另一行一样。

这是我使用的示例代码：

```
<table>
<tr>
<td>Image.jpg</td>
<td>Image.jpg description</td>
</tr>
<tr>
<td>Image2.jpg</td>
<td>Image2.jpg description</td>
</tr>
</table> 
```

[您可以在此页面上](http://sharkpt.com/aprender-a-jogar)看到问题

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T00:13:33.390

你只需要添加`style="vertical-align:top"`到`td`

或者`vertical-align:middle`，如果您想将文本放置在行的中间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T00:13:06.213

在文本中试试这个 CSS `<TD>`：

```
vertical-align:top; 
```

IE：

```
<td style="vertical-align:top;">
   Trio: Quaisquer três cartas do mesmo valor. Este exemplo ...
</td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T00:17:28.493

因此，要了解您希望照片和文字正确对齐吗？您可以使用 valign 属性吗？

```
<table>
<tr>
 <td valign="top">January</td>
 <td valign="top">$100</td>
</tr>
<tr> 
<td valign="bottom">February</td>
 <td valign="bottom">$80</td>
   </tr>
</table> 
```

顶部、底部和中心应根据您希望的对齐方式使用。

# android - 使用 CalendarContract - Android 4.0+ 阅读今天的所有事件

> ID：10133616
> 
> 赞同：11
> 
> 时间：2012-04-13T00:12:55.377
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-calendar

我正在尝试使用 Android 的新日历 API 来读取今天的所有日历事件。我无法在数据库查询中找到正确的选择来返回所有事件。似乎所有重复的和全天的事件都被排除在选择之外。什么选择参数可以让我从日历 api 中获取今天的所有事件？

这是我目前的尝试：

```
 Cursor cur = null;
    String selection = "((" + CalendarContract.Events.DTSTART
            + " >= ?) AND (" + CalendarContract.Events.DTEND + " <= ?))";
    Time t = new Time();
    t.setToNow();
    String dtStart = Long.toString(t.toMillis(false));
    t.set(59, 59, 23, t.monthDay, t.month, t.year);
    String dtEnd = Long.toString(t.toMillis(false));
    String[] selectionArgs = new String[] { dtStart, dtEnd };
    cur = c.getContentResolver().query(CalendarContract.Events.CONTENT_URI,
            null, selection, selectionArgs, null); 
```

我不确定如何扩大选择范围或添加到其中以获取重复事件和全天事件。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-26T01:13:37.867

要获取今天的所有事件，包括重复事件，您需要使用 Instances 表，即

```
Uri.Builder eventsUriBuilder = CalendarContract.Instances.CONTENT_URI
            .buildUpon();
ContentUris.appendId(eventsUriBuilder, timeNow);
ContentUris.appendId(eventsUriBuilder, endOfToday);
Uri eventsUri = eventsUriBuilder.build();
Cursor cursor = null;       
cursor = mContext.getContentResolver().query(eventsUri, columns, null, null, CalendarContract.Instances.DTSTART + " ASC"); 
```

请注意，您必须将时间限制附加到事件 uri，您不能以任何其他方式排序。

为了也包括全天活动，只需将搜索范围扩大到前一天晚上 11:59 PM 和今晚 12:00 AM。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-09T16:34:11.617

你的条件只给你严格在今天限制内的事件。您应该检查在今天之前开始并在（多日事件）之后结束的那些。

对于重复发生的事件，我手动检查它们。我没有找到其他方法。

我使用类似的东西：

```
String selection = "((" + CalendarContract.Events.DTSTART + " <= ?) AND (" + CalendarContract.Events.DTEND + " >= ?)) OR (" + CalendarContract.Events.RRULE + " is not null )";

String[] selectionArgs = new String[] { dtEnd, dtStart}; 
```

问候，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T20:37:42.130

您应该能够将 CalendarContract.Events.ALL_DAY 添加到您的选择条件以过滤所有 ALL_DAY 事件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-18T04:58:17.863

我知道这有点晚了，但我有一个非常相似的问题并且很难找到我正在寻找的答案。全天事件的强制 UTC 时区使事情变得棘手。这是我的解决方案：

```
 // "allDayStart" is an all-day event today, encoded in the default time zone
    Time allDayStart = new Time();
    allDayStart.timezone=TimeZone.getDefault().toString();
    allDayStart.set(dayStart.monthDay, dayStart.month, dayStart.year);

    // 2 time selections for the query: 
        // 1) Between day-start and day-end (not all-day); or
        // 2) Equals today at 0:00:00 (all-day) in the default timezone
    String calSelection = 
        "((" + Calendars.ACCOUNT_NAME + " = ?) " +
            "AND (" + Calendars.OWNER_ACCOUNT + "= ?) " +
            "AND (" +
                "((" + Events.DTSTART + ">= ?) " +
                "AND (" + Events.DTSTART + "<= ?) " +
                "AND (" + Events.ALL_DAY + "= ?) " +
                ") " +
            "OR ((" + Events.DTSTART + "= ?) " +
                "AND (" + Events.ALL_DAY + "= ?)" +
                ")" +
            ")" +
        ")"; 

    String[] calSelectionArgs = new String[] {
        accountName, ownerName, 
        dayStartInMillis.toString(), dayEndInMillis.toString(), "0", // during today, not all day
        allDayStartInMillis.toString(), "1" // Started today at default start-time for all-day events (all-day), default time zone
    }; 
```

可以将查询细化为不需要 2 个部分，但这对我来说已经足够了。

如果有帮助，这里是 dayStart 和 dayEnd 的来源：

```
 Time dayStart = new Time();
    dayStart.setToNow();
    dayStart.hour=0;
    dayStart.minute=0;
    dayStart.second=0;

    Time dayEnd = new Time();
    dayEnd.set(dayStart);
    dayEnd.hour=dayStart.hour+23;
    dayEnd.minute=dayStart.minute+59;
    dayEnd.second=dayStart.second+59;

    Long dayStartInMillis = dayStart.toMillis(false);
    Long dayEndInMillis = dayEnd.toMillis(false) + 999;
    Long allDayStartInMillis = allDayStart.toMillis(false); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-18T10:05:12.537

尝试使用 Instances.CONTENT_BY_DAY_URI。检查此答案以获取示例 - [https://stackoverflow.com/a/36622111/1219241](https://stackoverflow.com/a/36622111/1219241)

# ios - 为什么 UIDocumentInteractionController 不显示预览？

> ID：10133617
> 
> 赞同：2
> 
> 时间：2012-04-13T00:12:58.117
> 
> 标签：ios, cocoa-touch, uiviewcontroller, xamarin.ios

我们有一个包含 UIViewController 的 Monotouch 应用程序，用于呈现文件列表并允许用户与列表中的文件进行交互。

在其中一个交互中，我们允许用户通过使用 UIDocumentInteractionController 来查看文件，并调用 PresentPreview 方法并将动画参数设置为 true。

现在，我们的问题是，根据导致该视图控制器显示的事件链，PresentPreview 可能会显示也可能不会显示。

如果此视图控制器从非模态视图控制器以模态方式呈现，则预览效果很好。

但是，如果另一个视图控制器以模态方式打开，然后我们的问题视图控制器从该视图控制器以模态方式打开，则当前预览不起作用。没有错误信息，该方法的返回值为true，并且委托中的方法被正确调用，并且与第一个场景的顺序相同，只是文档预览从未显示。

我研究了[Apple 的文档](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/PreviewingandOpeningItems.html#//apple_ref/doc/uid/TP40010410-SW1)，发现以下陈述似乎描述了该问题：

> ...或者如果您的实现返回的视图控制器无法呈现另一个模式视图控制器，则不会显示文档预览。

但是，他们没有说明**为什么**给定的视图控制器将无法呈现另一个模态视图控制器。

如果有人能对此有所了解，我将不胜感激。

# vb.net - 我的累加器和计算在 VB 2010 中不起作用

> ID：10133625
> 
> 赞同：0
> 
> 时间：2012-04-13T00:13:55.480
> 
> 标签：vb.net

好的，所以我的累加器现在正在添加并正确显示在表格中。但是，我的 if...then 语句有问题，在达到 125 后它没有将其扔到第二级。我可以达到 125，我需要输入以启用我的按钮。任何帮助表示赞赏！

**编辑以显示使用 Do While 循环更新。现在导致我的输入错误 msgbox 出现问题... **

```
do while decTotalCredits < 125 
        If IsNumeric(txtCredit.Text) Then
            ' This statement will convert the string entered to decimal and establish the 
            ' input as the decCredit Variable
            decCredit = Convert.ToDecimal(txtCredit.Text)
            ' This Case Statement is to verify that the correct denominations of coins are 
            ' being entered in the machine. 
            Select Case decCredit
                Case 5, 10, 25, 100
                    ' This line adds the newly entered credit to the 
                    ' exsisting total
                    decTotalCredits += decCredit
                    lblTotal.Text = Convert.ToString(decTotalCredits)
                    lblTotal.Visible = True
                    ' reset the text input box for the credit amount
                    txtCredit.Clear()
                    txtCredit.Focus()
                Case Else
                    ' This message will appear if a Credit is entered that does not
                    ' conform to normal coins
                    MsgBox("Please enter a valid coin amount", , "Invalid Amount Entered")
            End Select
        Else
            ' This message will occur when a user inputs a non-numeric entry
            MsgBox("Please enter a valid Coin amount", , "Input Error")
        End If
    Loop

    ' Loop should complete when credits hit 125 and activate this code
    ' Once the credits are reached the prompt to make selection is visible. 
    lblMakeSelection.Visible = True
    ' Once the credits are reached, the buttons for selection become enabled.
    btnDietPepsi.Enabled = True
    btnPepsi.Enabled = True
    btnSierraMist.Enabled = True
    btnLemonade.Enabled = True
    btnDrPepper.Enabled = True
    btnWater.Enabled = True

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T03:07:34.657

从您给我们的代码中，它将进入循环，添加到总数，擦除 txtCredit 文本框，再次启动循环，然后显示错误消息框，因为 txtCredit 不再是数字。

假设逻辑在按钮单击或 TextBox Validate 例程中，建议您删除循环并在启用按钮之前添加“If decTotalCredit >= 125 Then”语句。

# iphone - CLLocationManager 无法在 iPhone 模拟器上启动

> ID：10133627
> 
> 赞同：1
> 
> 时间：2012-04-13T00:14:44.937
> 
> 标签：iphone, cllocationmanager, simulator

突然之间，CLLocationManager 不会在模拟器上启动——我通过发现 gps 图标确实显示在状态栏上来观察这一点，并且也没有回调 didUpdateToLocation 委托。造成这种情况的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:19:40.923

在 Xcode 中添加一个 GPX 文件并在其中指定纬度和经度...:)

例如 wpt lat="23.04472" lon="72.56839"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T04:45:29.653

您是否将模拟器更改为低于 5.0 的版本？因为低于 5.0 的模拟器版本不支持定位服务。同样在模拟器中的设置中确保启用了定位服务。

# php - php mysql 搜索26个表

> ID：10133634
> 
> 赞同：1
> 
> 时间：2012-04-13T00:15:16.460
> 
> 标签：php, search

我有这个包含大约 26 个表的数据库（每个表中的字段名称都相同），我想知道根据将搜索所有表的关键字在我的网站上进行一般搜索有多简单？

例如，每张表格都有标题、作者等，所以如果我有一个发胶关键字 - 在所有表格中查找关键字的最佳方法是什么..

由于表的数量，最好不要通过连接或联合

提前喝彩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T00:19:35.180

### 创建表格是一种非常糟糕的方式。

如果它们共享一个共同的模式，它们应该是**一个单独的表**，并带有一些额外的字段来分隔或区分数据。

如果这不适合您，您可能需要创建一个临时表，该表将保存所有 26 个表中的所有数据，然后查询该表以进行搜索。

# php - PHPUnit 3.4.17 的依赖项

> ID：10133635
> 
> 赞同：3
> 
> 时间：2012-04-13T00:15:34.607
> 
> 标签：php, phpunit

这与另一篇文章（[如何通过 PEAR 安装旧版本的 PHPUnit？](https://stackoverflow.com/questions/1569012/how-to-install-an-older-version-of-phpunit-through-pear)）有关，但是在我的情况下，我实际上是在安装 PHPUnit 3.4.17（这是因为我正在环境中构建应用程序运行 PHP 5.1.6)。

我在 PHPUnit 文档中找不到任何地方，其中说明了各种依赖项需要的确切版本号。有没有人在某个地方有一个列表，特别是 PHPUnit 3.4 版？

我问的原因是我想确保在开发过程中不会遇到任何问题，因为一个依赖项太新了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:59:22.433

从 3.4[文档](http://www.phpunit.de/manual/3.4/en/installation.html)：

> PHPUnit 3.4 需要 PHP 5.1.4（或更高版本），但强烈建议使用 PHP 5.3.3（或更高版本）。
> 
> 收集和处理代码覆盖率信息需要 Xdebug 2.0.5（或更高版本），但强烈建议使用 Xdebug 2.1.0（或更高版本）。

我认为没有其他要求。

# python - 使用 del 时列表出现索引错误，无法弄清楚

> ID：10133637
> 
> 赞同：1
> 
> 时间：2012-04-13T00:16:21.203
> 
> 标签：python

我是编程新手，所以这段代码可能相当垃圾。无论如何，我要做的是获取两个列表（xy1，xy2），它们包含一个矩形的角，看看它们是否与其他矩形重叠。我使用的格式是 x1,y1 在数组 xy1 中，x2,y2 在数组 xy2 中。到目前为止，我只使用 x 轴，所以两个数组中的所有其他条目。我的问题是，当我找到重叠的并删除它们时，我得到一个索引错误。我相信问题与使用 del 和我的 for loops max 有关，我使用数组的 len 得到。如果没有重叠并触发已删除的调用，该代码有时也会起作用。任何建议表示赞赏。谢谢

```
#1,3 are x cords for first rect, 5 and 8 are x cords for second rect
xy1=[1,6,5,12,1,17]
xy2=[3,9,8,16,4,19]
def make(xy1,xy2):
    count0=0
    for count1 in range(count0,len(xy1),2):
        for count2 in range(count0,len(xy2),2):
            if xy1[count1] in range(xy1[count2],xy2[count2]) and not (count1==count2):
                xy1=removed(xy1,count1)
                xy2=removed(xy2,count1)
    return xy1,xy2

def removed(xy1,count1):
    #removes the x,y that was overlapped along with the other 2 corners of the rect
    del xy1[count1:count1+2]
    return xy1

make(xy1,xy2)

print xy1,xy2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T00:24:32.433

您的问题是，每次删除某些内容时，数组 xy1 的长度都会缩小。但是您的计数迭代器不断增加而没有考虑到这一点。如果您打印`xy1`并且`count1`每次都在您做之前，您可以更清楚地看到行为`del`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:35:28.857

就像 TJD 说的那样，你有一个正在缩小的数组，所以你会得到一个索引超出范围的错误。

无需过多更改代码，您可以通过向后浏览列表来解决此问题。如果您更改程序的前三行，您应该得到您想要的结果并且不再出现错误。

```
def make(xy1,xy2):
count0=-1
for count1 in range(len(xy1)-2,count0,-2):
    for count2 in range(len(xy2)-2,count0,-2):
        if xy1[count1] in range(xy1[count2],xy2[count2]) and not (count1==count2):
            xy1=removed(xy1,count1)
            xy2=removed(xy2,count1)
return xy1,xy2 
```

# javascript - 如何在 Metro Style App 中将日志或文本文件写入文件系统

> ID：10133638
> 
> 赞同：1
> 
> 时间：2012-04-13T00:16:23.797
> 
> 标签：javascript, windows-8, microsoft-metro, winjs

正如标题所说，我想将我的应用程序的活动日志自动写入文件。我的应用程序是用 Javascript/HTML5 构建的，当我调试时，我可以`console.log("this is a debug log")`在控制台中使用和跟踪它。但是，如果我想将我的测试机器提供给某个测试用户，我希望能够跟踪活动日志。

有什么办法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T15:17:01.067

当然，只需写出一个文件。此处示例：http: [//code.msdn.microsoft.com/windowsapps/File-access-sample-d723e597](http://code.msdn.microsoft.com/windowsapps/File-access-sample-d723e597)

# javascript - 在具有地址已地理编码位置的融合表中使用自定义标记

> ID：10133639
> 
> 赞同：0
> 
> 时间：2012-04-13T00:16:27.630
> 
> 标签：javascript, google-maps-api-3, google-maps-markers, google-fusion-tables

我试图按照这个例子[http://code.google.com/p/gmaps-samples/source/browse/trunk/fusiontables/custom_markers.html?spec=svn2515&r=2515](http://code.google.com/p/gmaps-samples/source/browse/trunk/fusiontables/custom_markers.html?spec=svn2515&r=2515)创建自定义标记。我试图更改示例以使用我的数据。不同之处在于我的数据已经过地理编码。当我更改表 ID 和代码列时，我很难弄清楚为什么它不起作用。所以我在原始代码和我的数据上打印了“地址”。

带有示例融合表的原始代码，像这样输出位置

```
(37.4471132, -122.1602044) 
```

因为我的表已经被地理编码，所以我拿走了大部分功能

```
function codeAddress(row) {
    alert(row[1]);
    var marker = new google.maps.Marker(
            {
                map : map,
                position : row[1],
                //this is where the magic happens!
                icon : new google.maps.MarkerImage(icon: new google.maps.MarkerImage("http://www.google.com/images/icons/product/fusion_tables-32.png")
            }); 
} 
```

但是警报只显示坐标有点不同

```
<Point><coordinates>-78.423652,-0.203057,0.0</coordinates></Point> 
```

所以是的，这就是我认为它不起作用的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:33:47.920

Mia DiLorenzo 是对的，[MarkerOption`position`](https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions)需要一个[LatLng 对象](https://developers.google.com/maps/documentation/javascript/reference#LatLng)。

[看看这个例子](http://gmaps-samples.googlecode.com/svn/trunk/fusiontables/custom_markers.html)，它与你的非常相似，但它使用`Coordinates`字段来创建标记。

该示例假设坐标字段中的数据是逗号分隔的“lat,lng”，例如`47.7672,-3.2022`

但是，如果您的数据恰好是 KML 格式，那么您可以提取 lat/lng 值。这些值按顺序排列：经度、纬度和高度（有关KML的详细信息，请参阅[KML 参考](https://developers.google.com/kml/documentation/kmlreference#coordinates)`coordinates`）：

```
function createLatLngObject(kmlString) {
   //remove XML tags from input
   var xmlRegEx = /<\/?\w+>/;
   var kmlValue = kmlString.replace(xmlRegEx,'');

   // now kmlValue contains e.g. -78.423652,-0.203057,0.0

   //extract latitude and longitude
   var coordinates = kmlValue.split(",");
   var lat = coordinates[1];
   var lng = coordinates[0];

   return new google.maps.LatLng(lat, lng);
}

function createMarker(row) {
   var latlng = createLatLngObject(row[1]);
   var marker = new google.maps.Marker({
       map: map, 
       position: latlng,
       icon: new google.maps.MarkerImage("http://www.google.com/images/icons/product/fusion_tables-32.png")
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T03:17:23.590

我的意见是`position :`后面必须跟一个`google.maps.LatLng`.

看起来`row`数据来自 KML，您需要提取前两个数字来创建 LatLng。

# css - Bootstrap 多级下拉菜单

> ID：10133640
> 
> 赞同：1
> 
> 时间：2012-04-13T00:16:41.100
> 
> 标签：css, twitter-bootstrap

我将这些 css 规则用于多级下拉菜单，如下所示：

```
/*Multilevel Dropdown*/
/**
* Bootstrap 2.0 dropdown multi-level menu enabler
* Bootstrap: http://twitter.github.com/bootstrap/javascript.html#dropdowns
*/
/* overrides */
.nav li.dropdown ul.dropdown-menu li ul {
display:block; 
position:absolute; 
left:100%;
-webkit-border-radius: 3px;
-moz-border-radius: 3px;
border-radius: 3px 3px 3px 3px;
}

.nav li.dropdown ul.dropdown-menu ul {
display: none;
float:right;
position: relative;
top: auto;
margin-top: -30px;
} 
```

和 HTML 如下：

```
<li class="dropdown">
  <a class="url dropdown-toggle" data-toggle="dropdown">My Dropdown<i class="icon-chevron-down"></i></a>
  <ul class="dropdown-menu">
      <li>
        <a href="#">Level1</a>
        <ul class="dropdown-menu">

            <li><a href="#">Level2</a></li>

            <li><a href="#">Level2</a></li>

            <li><a href="#">Level2</a></li>                                                              
        </ul>
      </li>

  </ul>
</li> 
```

它非常适用于 Chrome 和 Firefo，但是当鼠标悬停在 1 级时，IE9 上不会出现 2 级或更多级。可能是什么问题？

# javascript - 通过 JavaScript 客户端保留身份验证？

> ID：10133649
> 
> 赞同：1
> 
> 时间：2012-04-13T00:18:39.920
> 
> 标签：javascript, jquery, wcf, authentication, session-cookies

我有一个 WCF 应用程序，我可以在其中调用 JavaScript。我想保护 Web 服务，因此您必须登录才能使用它。如果我有一个服务器端应用程序向 WCF 发出请求，这很容易。如果我使用的是纯 JavaScript / jQuery 客户端应用程序，我可以通过将凭据作为 JSON 参数传递来很好地进行身份验证，但是如何让该客户端应用程序从那时起保持登录状态？我要存储 cookie 吗？我当然不想将凭据存储在 cookie 中，因为这不安全。那么如何在不引入另一个服务器端应用程序的情况下实现这一点呢？Web 应用程序如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T00:29:50.993

[OAuth](http://oauth.net/)是一种适用于 JS API 的解决方案。 [Netflix](http://developer.netflix.com/docs/Security)、[Yelp](http://www.yelp.com/developers/documentation/v2/authentication)、[Facebook](https://developers.facebook.com/docs/authentication/)等使用这个。

这是一篇关于[WCF中 OAuth 的文章](http://weblogs.asp.net/cibrax/archive/2008/11/14/oauth-channel-for-wcf-restful-services.aspx)

这是一个非常著名的用于在 .NET 中进行身份验证的库：[DotNetOpenAuth](http://www.dotnetopenauth.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T09:09:53.637

如果您使用或正在使用 ASP.Net 表单身份验证（WCF 应该在 ASP.Net 兼容模式下运行），那么没有什么可做的。

如果您在初始身份验证后设置表单身份验证票据\cookie，则 cookie 将附加到来自浏览器的每个后续请求，而无需您编写任何代码。然后可以使用标准 ASP.Net 身份验证管道在服务器上对所有未来的 WCF 服务调用进行身份验证。

# text-extraction - 如何在perl中提取两个关键字之间的所有内容

> ID：10133652
> 
> 赞同：0
> 
> 时间：2012-04-13T00:19:13.860
> 
> 标签：text-extraction

需要提取开始和结束之间的所有内容。

如果没有\n，则以下代码有效。

```
$mystring = "The start text always precedes \n the end of the text.";
if($mystring =~ m/start(.*?)end/) {
    print $1;
} 
```

o/p 应该是 - 文本总是在 \n 之前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T00:22:52.200

学习[`perlre`](http://perldoc.perl.org/perlre.html)，特别是`/s`修饰语。

# mysql - 复合查询

> ID：10133655
> 
> 赞同：2
> 
> 时间：2012-04-13T00:19:23.970
> 
> 标签：mysql

具有以下列的表格：

```
Player_id (primary key), Event_type(A,B,C), Points. 
```

每个 event_type 可能有 1 名玩家出现多次

我想显示所有事件类型的 DESC SUM(Points) GROUP BY player_id 的总体排名，同时提出一些条件：

*   对于事件类型 A，每个 player_id 只有最好的 5 个结果
*   对于事件类型 B，每个 player_id 只有最好的 2 个结果
*   对于事件类型 C，每个 player_id 只有最好的 3 个结果

我徒劳地尝试过：

```
SUM(points) WHERE event_type ="X" 
GROUP BY Player_id ORDER BY SUM(points) LIMIT N 
```

一个星期以来，我一直在与这个头痛作斗争，当涉及到包含子查询、UNION 或临时表时，我感到非常困惑。我不知道如何将所有部分放在一起...

我的梦想是让这个整体排名运行起来，能够在点击时访问每个玩家的详细积分细分......

愿意为此提供任何帮助...谢谢！

源表示例：

**player_id-----event_type-----score-----**

---1--------------------A---------------- **5** --------- -

---1--------A--------------- **10** ---------

---1--------------------A---------------- **5** ---------

---1--------------------A----------------5---------

---1--------------------A----------------2---------

---1--------------------A---------------- **15** ---------

---1--------------------A---------------- **10** ---------

---1--------------------C----------------20---------

---1--------------------B---------------- **5** ---------

---1--------------------B----------------5---------

---1--------------------B---------------- **20** ---------

---2--------------------A---------------- **50** ---------

---2--------------------B---------------- **55** ---------

根据此示例的所需输出：

**Rank---player_id-----overall_score-----**

----1------------2----------- **105 分**[A 50 分（最佳 5）+ B 55 分（最佳 2）]---- -----

----2------------1----------- **90 分**[A 中 45 分（最佳 5）+ C 中 20 分（最佳 3）+ B 中 25 分（最佳2)]---------

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T01:50:42.593

首先：您想要的功能称为`sliding window`和`ranking`。Oracle 使用`OVER`-keyword 和`rank()`-function 来实现这些。MySQL 不支持这些特性，所以我们必须解决这个问题。

我使用[这个答案](https://stackoverflow.com/questions/9692041/top-n-results-for-each-keyword)创建了以下查询。`+1`如果这对你有帮助，也给他一个。

```
SELECT 
    `player_id`, `event`, `points`,
    (SELECT 1 + count(*) 
     FROM `points` 
     WHERE `l`.`player_id` = `player_id` 
         AND `l`.`event` = `event` 
         AND `points` > `l`.`points`
    ) AS `rank`
FROM
    `points` `l` 
```

这将输出每个`player_id`和`event`的等级`points`。例如：假设`(player_id, event, points)`has`(1,A,10), (1,A,5), (1,A,2), (1,A,2), (1,A,1), (2,A,0)`那么输出将是

```
player_id    event   points   rank
  1            A       10       1
  1            A        5       2
  1            A        2       3
  1            A        2       3
  1            A        1       5
  2            A        0       1 
```

秩并不密集，所以如果你有重复的元组，你将有相同秩的输出元组以及你的秩数中的间隙。

要获取`N`每个的 top * 元组`player_id`，`event`您可以创建一个视图或在条件中使用子查询。视图是首选方式，但您无权在许多服务器上创建视图。

**创建一个包含`rank`as 列的视图。**

```
CREATE VIEW `points_view`
AS SELECT 
    `player_id`, `event`, `points`,
    (SELECT 1 + count(*) 
         FROM `points` 
         WHERE `l`.`player_id` = `player_id` 
             AND `l`.`event` = `event` 
             AND `points` > `l`.`points`
        ) as `rank`
FROM
    `points` `l` 
```

从视图中获取所需的前 N ​​个结果：

```
SELECT
    `player_id`, `event`, `points`
FROM `points_view`
WHERE 
     `event` = 'A' AND `rank` <= 5
OR
     `event` = 'B' AND `rank` <= 2
OR
     `event` = 'C' AND `rank` <= 3 
```

**使用条件中的等级**

```
SELECT 
    `player_id`, `event`, `points`
FROM
    `points` `l`
WHERE
    (SELECT 1 + count(*) 
     FROM `points` 
     WHERE `l`.`player_id` = `player_id` 
         AND `l`.`event` = `event` 
         AND `points` > `l`.`points`
    ) <= N 
```

要根据您的事件进一步获得不同数量的元组，您可以这样做

```
SELECT 
    `player_id`, `event`, `points`
FROM
    `points` `l`
WHERE
        `event` = 'A' AND
        (SELECT 1 + count(*) 
         FROM `points` 
         WHERE `l`.`player_id` = `player_id` 
             AND `l`.`event` = `event` 
             AND `points` > `l`.`points`
        ) <= 5
    OR
        `event` = 'B' AND
        (SELECT 1 + count(*) 
         FROM `points` 
         WHERE `l`.`player_id` = `player_id` 
             AND `l`.`event` = `event` 
             AND `points` > `l`.`points`
        ) <= 2
    OR
        `event` = 'C' AND
        (SELECT 1 + count(*) 
         FROM `points` 
         WHERE `l`.`player_id` = `player_id` 
             AND `l`.`event` = `event` 
             AND `points` > `l`.`points`
        ) <= 3 
```

我将只使用您的最大值`N`5 并忽略其他事件类型的其他元组，因为 MySQL 不会优化此查询，这会导致 3 个单独的依赖子查询。如果性能不是问题，或者您没有太多数据，请保持这种状态。

* 正如我所解释的那样，`rank`它并不密集，因此获取所有元组`rank <= N`通常会导致多于`N`元组。额外的元组是重复的。

从示例表中可以看出，简单地删除重复项是一个坏主意。如果您想要 and 的前 5 个结果`player_id = 1`，则`event = A`需要两个元组`(1,A,2)`。他们都有排名 3。但如果你删除其中一个，你最终只会得到前 4 个结果`(1,A,10,1)`, `(1,A,5,2)`, `(1,A,2,3)`, `(1,A,1,5)`。

要获得密集排名，您可以使用此子查询

```
(SELECT count(DISTINCT `points`) 
 FROM `points` 
 WHERE `l`.`player_id` = `player_id` 
     AND `l`.`event` = `event` 
     AND `points` >= `l`.`points`
) as `dense_rank` 
```

小心，因为这仍然会产生重复的等级。

**编辑**

要将所有事件的分数加起来为一个分数，请使用`GROUP BY`

```
SELECT
    `player_id`, SUM(`points`)
FROM `points_view`
WHERE 
     `event` = 'A' AND `rank` <= 5
OR
     `event` = 'B' AND `rank` <= 2
OR
     `event` = 'C' AND `rank` <= 3

GROUP BY `player_id`
ORDER BY SUM(`points`) DESC 
```

在分区 ( `GROUP BY`) 之前，结果包含正确数量的最高分，因此您可以简单地将所有分数相加。

您在这里面临的一个大问题是，既不`rank`也不`dense_rank`会给您工具为每个`player_id`和获得恰好 5 个元组`event`。例如：如果某人在事件 A 中获得 1000 倍 1 分，那么他最终将获得 1000 分，因为所有分数都会得到`rank`和`dense_rank` `1`。

但又是这样`ROWNUM`：MySQL 不支持这个，所以我们必须模仿这个。问题`ROWNUM`在于它将为所有元组生成一个复合数字。但是我们想要 , 组的合`player_id`数`event`。不过，我仍在研究此解决方案。

**编辑2**

使用[这个答案](https://stackoverflow.com/a/3332131/1220835)，我发现这个解决方案可以工作：

```
select
  player_id, sum( points )
from
(
select
  player_id,
  event,
  points,
  /* increment current_pos and reset to 0 if player_id or event changes */
  @current_pos := if (@current_player = player_id AND 
      @current_event = event, @current_pos, 0) + 1 as position,
  @current_player := player_id,
  @current_event := event
from
  (select 
    /* global variable init */
    @current_player := null, 
    @current_event := null, 
    @current_pos := 0) set_pos,
  points
order by
  player_id,
  event,
  points desc
) pos
WHERE
     pos.event = 'A' AND pos.position <= 5
OR
     pos.event = 'B' AND pos.position <= 2
OR
     pos.event = 'C' AND pos.position <= 3
GROUP BY player_id
ORDER BY SUM( points ) DESC 
```

内部查询选择 (player_id, event, points)-元组，按 player_id 和 event 对它们进行排序，最后给每个元组一个复合数，每次 player_id 或 event 更改时重置为 0。由于顺序的原因，所有具有相同 player_id 的元组都是连续的。外部查询与先前使用的查询对视图的作用相同。

**Edit3**（见评论）

您可以使用 OLAP ROLLUP 运算符创建中间总和或不同类型的分区。例如，查询将如下所示：

```
select
  player_id, event, sum( points )
from
(
select
  player_id,
  event,
  points,
  /* increment current_pos and reset to 0 if player_id or event changes */
  @current_pos := if (@current_player = player_id AND 
      @current_event = event, @current_pos, 0) + 1 as position,
  @current_player := player_id,
  @current_event := event
from
  (select 
    /* global variable init */
    @current_player := null, 
    @current_event := null, 
    @current_pos := 0) set_pos,
  points
order by
  player_id,
  event,
  points desc
) pos
WHERE
     pos.event = 'A' AND pos.position <= 5
OR
     pos.event = 'B' AND pos.position <= 2
OR
     pos.event = 'C' AND pos.position <= 3
GROUP BY player_id, event WITH ROLLUP
/* NO ORDER BY HERE. SEE DOCUMENTATION ON MYSQL's ROLLUP FOR REASON */ 
```

结果现在将首先按 分组`player_id, event`，然后按 only分组，`player_id`最后按 null 分组（总结所有行）。

第一组看起来像`(player_id, event, sum(points)) = {(1, A, 20), (1,B,5)}`20 和 5 是关于`player_id`和的点的总和`event`。第二组的样子`(player_id, event, sum(points)) = {(1,NULL,25)}`。25 是关于 的所有点的总和`player_id`。希望有帮助。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:25:04.150

您可能需要为 sum(points) 命名。

这样做：

```
select player,sum(points) as points from table where event_type = "x" group by player order by points desc limit 5; 
```

（我需要查看您的确切表架构才能将其写成您可以直接插入的内容，但这是它的要点）

# eclipse - 如何将 JDBC 连接器 jar 文件添加到可移植的 Eclipse 安装中？

> ID：10133659
> 
> 赞同：-1
> 
> 时间：2012-04-13T00:20:07.223
> 
> 标签：eclipse, jar

我应该将 JDBC JAR 文件放在哪里，以便能够从 Eclipse 中使用它们并能够保持 Eclipse 的可移植性（在 Dropbox 中）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:02:18.047

转到安装tomcat的文件夹。在里面去lib文件夹并将jar文件放在那里。

您还需要在 Eclipse 中链接它。

1.  打开 Eclipse IDE。

2.  在动态网页设计方面，通过右键单击项目文件夹链接 jar 文件。

# php - pdo - 准备好的语句丢失数据？

> ID：10133661
> 
> 赞同：2
> 
> 时间：2012-04-13T00:20:12.167
> 
> 标签：php, mysql, pdo, prepared-statement

我有一个查询（PHP，Mysql）一个名为“table”的表，如下所示：

```
 id | name
-------------
  6 | abc
  10| xxx
  52| def 
```

和一个查询：

```
$ids = '5,62'

$name = $pdo -> prepare('SELECT id, name FROM table WHERE id IN ( :ids )');
$name -> bindValue(':ids', $ids, PDO::PARAM_STR); 
$name -> execute();
$name = $name->fetchAll(PDO::FETCH_ASSOC);
print_r($nazwa); 
```

我希望得到类似的结果

```
 id | name
-------------
  6 | abc
  52| def 
```

不幸的是，我只得到：

```
 id | name
-------------
  6 | abc 
```

好像第二个值会被忽略。如果我将查询更改为：

```
$name = $pdo -> prepare('SELECT id, name FROM table WHERE id IN (' $ids ')'); 
```

一切顺利。你能告诉我为什么准备好的语句不考虑带逗号的内爆表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T00:38:37.593

因为评论字段不允许写得那么好，所以这里的答案仅仅是评论：

假设您有两个 ID：

```
$name = $pdo->prepare('SELECT id, name FROM table WHERE id IN ( :id1, :id2 )'); 
```

假设您有三个 ID：

```
$name = $pdo->prepare('SELECT id, name FROM table WHERE id IN ( :id1, :id2, :id3 )'); 
```

你看到图案了吗？您拥有的值与拥有的 ID 一样多。根据您拥有的 ID 数量制定准备语句以及执行绑定语句。

所以答案是：您需要更改您的代码，以便它实际反映您要处理的 ID 数量。MySQL 服务器不会神奇地将字符串中的逗号分隔列表解释为多个 ID。相反，您需要告诉服务器每个 ID。

# javascript - 如何使用 get/set 获取属性以使用 JSON.stringify() 进行序列化

> ID：10133665
> 
> 赞同：2
> 
> 时间：2012-04-13T00:20:20.863
> 
> 标签：javascript, jquery, javascript-objects, ecmascript-5

我有以下情况：

```
var msp = function () { 
  this.val = 0.00;
  this.disc = 0;

};
Object.defineProperty(msp.prototype, "x", {
                        get: function () {return this.val - this.disc;},
                        toJSON: function () {return this.val - this.disc;},
                        enumerable: true,
                        configurable: true
                    });
var mp = new msp();
JSON.stringify(mp); // only returns {"val":0,"disc":0} 
```

我希望我可以在 defineProperty 调用中以某种方式在属性“x”上设置一个 toJSON 方法，但这不起作用。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:58:39.007

这对我有用：

```
var obj = function() {
    this.val = 10.0;
    this.disc = 1.5;
    Object.defineProperties(this, {
        test: {
            get: function() { return this.val - this.disc; },
            enumerable: true
        }
    });    
};

var o = new obj;
o.test;
8.5
JSON.stringify(o);   // output: {"val":10,"disc":1.5,"test":8.5} 
```

注意**test**不是原型定义，并且 enumerable*必须*设置为**true**。

我在 IE9、FF 11 和 Chrome 18 中测试了上述**工作**版本——这三个版本都给出了预期的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T00:54:33.727

您需要将其应用于对象本身，而不是像这样的原型

```
var msp = function () { 
  this.val = 0.00;
  this.disc = 0;

};
msp.prototype.dif=function () {this.x = this.val - this.disc;return this;}

var mp = new msp();
JSON.stringify(mp.dif()); 
```

但是，如果您尝试序列化不可能的功能。

# php - 如何在 CakePHP 中检索整数列的整数值？

> ID：10133666
> 
> 赞同：2
> 
> 时间：2012-04-13T00:20:21.263
> 
> 标签：php, mysql, cakephp, cakephp-2.0

当我执行`find`or`fetch`时，返回的值数组包含我所有列的字符串表示形式，而不管列的数据类型如何。这意味着而不是返回整数列：

```
array( 'field1' => 1 ) 
```

他们最终成为

```
array( 'field1' => '1' ) 
```

这是 CakePHP 的预期行为吗？我是否配置错误？

我想过在`afterfind`我的模型方法中编写一些代码来调用`intval`适当的列，但这真的是最好的解决方案吗？CakePHP 是否有更好的方法来处理非字符串列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:54:59.303

我也注意到了这一点，显然这是 PDO 将所有内容都转换为字符串的结果。我提交了[一张票](http://cakephp.lighthouseapp.com/projects/42648/tickets/2965-modelfind-not-returning-the-correct-data-type)，希望将来可能会有一个自动强制功能。

尽管客户端可以转换数据，但它不是很“干净”，尤其是当您可能将 api 提供给 3rd 方开发人员时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T00:38:28.157

您可以从模型属性 Model::_schema 中找出您的模型中的表中的字段是什么类型的字段。基于此，您可以在[Model::afterFind()](http://book.cakephp.org/2.0/en/models/callback-methods.html#afterfind)回调中键入转换字段的值。

您也可以手动检查您希望成为整数的字段，但使用 _schema 可以让您自动化它。例如，您可以将其作为一种行为来执行，并将其附加到需要此功能的每个模型上。

因此，只需遍历结果并检查您想要成为整数的字段并对其进行类型转换。

# c++ - Qt QFileSystemModel - 根索引下的多个目录树

> ID：10133671
> 
> 赞同：9
> 
> 时间：2012-04-13T00:20:50.710
> 
> 标签：c++, qt, treeview

我正在尝试创建一个`QTreeView`使用`QFileSystemModel`，它将在树的根索引下显示多个目录树。

我正在使用以下代码：

```
QFileSystemModel *model = new QFileSystemModel();
QTreeView *tree = new QTreeView();
model->setRootPath(QDir::rootPath());
tree->setModel(model); 
```

使用它，文件树将显示单个项目（文件系统的根）。不过，我想做的是能够显示文件系统的根目录，并有几个特定的​​目录和不相关的子树作为兄弟。

下面是来自不同应用程序的所需行为的图像。前两项是文件系统中的特定文件夹，就像快捷方式一样。最后一项与文件系统无关。

![期望的行为](../Images/5e63e17eb12fac26e45b5b35f07035ad.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T12:45:46.493

我建议创建一个自定义模型，可能源自`QAbstractItemModel`，该模型具有一些顶级实体（屏幕外），您可以将多个实体作为其父`QFileSystemModels`级，一个用于您要显示的每个顶级目录。这将允许您以不同的方式操作每棵树，具体取决于它所显示的目录类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-25T17:30:28.910

您应该能够创建一个临时目录（使用[QTemporaryDir](https://doc.qt.io/qt-5/qtemporarydir.html)），然后在该临时目录中创建指向您要显示的文件和/或目录的[符号链接。](https://www.qtcentre.org/threads/5124-How-to-create-a-symlink-to-a-directory)然后使用临时目录的路径作为模型的根路径。

# c++ - resize() 是否会丢弃之前的 Reserve() 所做的预留？

> ID：10133674
> 
> 赞同：6
> 
> 时间：2012-04-13T00:21:13.407
> 
> 标签：c++, vector, containers, std

因此，如果我先保留（100），添加一些元素，然后调整大小（0）（或任何其他小于当前大小的数字），向量是否会重新分配内存以占用少于 100 个元素的空间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T00:22:44.210

`vector<T>::resize(0)`不应导致重新分配或删除已分配的内存，因此在大多数情况下，最好使用`vector<T>::clear()`.

有关更多详细信息，请参阅此问题的答案：[std::vector resize down](https://stackoverflow.com/questions/1155693/stdvector-resize-downward)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T00:36:06.097

对较小的计数而不是当前计数执行`vector::resize(0)`or 不应释放任何内存。但是，它可能会破坏这些元素。

有关 的参考`std::vector::resize`，请查看[std::vector::resize](http://en.cppreference.com/w/cpp/container/vector/resize)

# c++ - streampos和pos_type、streamoff和off_type有什么区别？

> ID：10133680
> 
> 赞同：9
> 
> 时间：2012-04-13T00:22:36.650
> 
> 标签：c++

`streampos`和`pos_type`、`streamoff`和之间有什么区别`off_type`，除了它们的定义不同。我应该使用`basic_stream<>::seek`'s 函数做什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-13T04:44:32.703

`std::basic_istream`并且`std::basic_ostream`都采用两种模板类型，`CharT`并且`Traits`. 给定一个派生自基本流之一的类 A，`Traits`可以将数据类型检索为

```
A::traits_type 
```

根据 C++ 标准的 §21.2，此数据类型必须提供以下成员类型：

```
char_type // must be identical to CharT of the basic-stream
off_type
pos_type 
```

（以及与当前问题无关的一些其他数据类型）。给定[方法`std::basic_istream<>::seekg()`的定义](http://en.cppreference.com/w/cpp/io/basic_istream/seekg)`off_type`方式， and的预期含义`pos_type`是：

*   `pos_type`用于流中的绝对位置
*   `off_type`用于相对位置

所以如果你想使用绝对版本`seekg()`，你应该声明的数据类型是`A::pos_type`（与 相同`A::traits_type::pos_type`）。对于相对版本，它是`A::off_type`.

**关于`std::streampos`和`std::streamoff`：**这些也被标准定义为用于*默认*版本的数据类型`traits_type`。换句话说，如果您没有明确指定`Traits`模板参数，则`A::pos_type`实际上*将*是`std::streampos`，`A::off_type`并且*实际上*是`std::streamoff`。

**如果您创建自己的版本`Traits`**并希望将其与`std::basic_istream<>`等标准库模板一起使用，则必须包含`pos_type`和`off_type`（以及许多其他数据类型）的 typedef，并确保它们符合 §27.2.2 和 §27.3标准。

# javascript - 对象没有方法“charAt”

> ID：10133688
> 
> 赞同：1
> 
> 时间：2012-04-13T00:23:22.663
> 
> 标签：javascript

我正在使用以下函数来获取谷歌地图上的海拔：

```
function getElevation(event) {
    var locations = [];
    var clickedLocation = event.latLng;
    locations.push(clickedLocation);

    var positionalRequest = {
        'locations': locations
    }

    elevator.getElevationForLocations(positionalRequest, function(results, status) {
        if(status == google.maps.ElevationStatus.OK) {
            var s = results[0].elevation;

            if(results[0]) {
                $('#elevation').html(parseInt(s).charAt(0) + ' meter');
            } else {
                alert('Inget resultat hittades');
            }
        } else {
            alert('Det gick inte att hitta höjdskillnaden på grund av följande: ' + status);
        }
    });
} 
```

当我点击地图上的某个地方时，我得到`Uncaught TypeError: Object 65 has no method 'charAt'`了，我不知道如何解决这个问题。`parseInt(s)`打印例如 44 取决于您在地图上单击的位置。如果我单击海洋，它会显示例如 -4837，它只是我想确定它是否存在于该字符串中的那个减号字符。

关于如何解决这个问题的任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T00:26:22.460

数字的原型上没有“charAt()”方法，但字符串有。

```
$('#elevation').html(('' + parseInt(s)).charAt(0) + ' meter'); 
```

该`parseInt()`函数返回一个数字。您必须先将其显式转换为字符串。

为什么你一开始就想把它变成一个数字有点神秘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T00:26:53.880

```
parseInt(s).charAt(0) 
```

您正在解析一个字符串并返回一个整数，然后尝试在一个整数上调用 charAt，这不会很好。您应该在解析它之前调用 charAt。

# perl - 为什么测试哈希中是否存在密钥对引用哈希不起作用？

> ID：10133689
> 
> 赞同：0
> 
> 时间：2012-04-13T00:23:27.500
> 
> 标签：perl, hash, reference, exists

当我有对哈希的引用时，如何判断一个键是否存在？以下内容看似简单明了（以我的专业水平），但打印出的内容与预期不同：

```
%simple = (a => 8, b=> 9);
print  0+exists $simple{a},  0+exists $simple{c},   "\n";    # prints 10

%href = \%simple;
print  0+exists $href{a},  0+exists $href{c},  "\n";        # expect fail; bad syntax
print  0+exists $href->{a},  0+exists $href->{c},  "\n";    # should work
print  0+exists ${$href}{a},  0+exists ${$href}{c},  "\n";  #  should work
print  0+exists $$href{a},  0+exists $$href{c},  "\n";      # not sure

# see if attempt to ask about {c} accidently created it
print %simple, "\n"; 
```

这打印出来

```
10
00
00
00
00
a8b9 
```

我希望（非常乐观）：

```
10
10
10
10
10
a8b9 
```

我不期望我尝试工作的所有方式，但至少应该有一种方式。我已经检查了 perldoc、其他 SO 问题和谷歌搜索，我想出的只是我在其中一些行中使用的语法应该可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T00:28:57.983

线

```
%href = \%simple; 
```

没有做你认为它做的事；`perl -w`（或`use warnings;`）会给你一个关于奇数个散列元素的警告，这应该是一个关于它试图做什么的充分暗示（如果你考虑一下，为什么你的“坏语法”不是）。尝试

```
$href = \%simple; 
```

另外，学习使用`use warnings;`and `use strict;`，并*始终*使用它们。

# regex - 在自定义 ModelValidatorProvider 中使用 RegularExpressionAttribute

> ID：10133690
> 
> 赞同：1
> 
> 时间：2012-04-13T00:23:33.587
> 
> 标签：regex, asp.net-mvc, model-validation

我有一个`ModelValidatorProvider`在 ASP.NET MVC 应用程序中使用的自定义实现。但我目前在任何产生`RegularExpressionAttributeAdapter`. 错误是`Either ErrorMessageString or ErrorMessageResourceName must be set, but not both.`现在我的代码没有设置资源名称但确实设置了一条消息。

```
yield return new RegularExpressionAttributeAdapter(metadata, context, new RegularExpressionAttribute(myExpression) { 
    ErrorMessage = expressionErrorMessage 
});` 
```

我尝试将两者都设置`ErrorMessageResourceName`为 null 并将其设置`ErrorMessageResourceType`为 null，但它没有帮助。如果我没有设置`ErrorMessage`异常，那么我就会失去用户对验证的反馈。

现在，我应该注意到这曾经可以工作，但我最近升级了应用程序以使用 MVC4 而不是 MVC3，我很好奇这是 MVC4 独有的还是其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:04:53.780

虽然我从来没有发现它为什么这样做，但在升级到 MVC4 后我可以取消注释我的代码并且它按预期工作，所以我只能假设它是特定于以前版本的东西。

# pear - PHP 使用 pear 邮件模块发送 smtp 电子邮件

> ID：10133692
> 
> 赞同：0
> 
> 时间：2012-04-13T00:23:51.803
> 
> 标签：pear, php

最初我通过 mail() 函数发送电子邮件，但它们总是被夹在垃圾邮件文件夹中，所以现在我想使用 PHP PEAR 使用 SMTP 发送它们，但我遇到了一些错误。

在functions.php中，我有电子邮件功能；

```
function send_mail($from,$to,$subject,$body)
{
    // Setting up the SMTP setting
    $smtp_info["host"] = "smtp1.servage.net"; 
    $smtp_info["port"] = "25"; 
    $smtp_info["auth"] = true; 
    $smtp_info["username"] = "xxx@auto-sal.es"; 
    $smtp_info["password"] = "xxx"; 

    // Creating the PEAR mail object :
    $mail_obj =& Mail::factory("smtp", $smtp_info); 

    $headers = '';
    $headers .= "From: $from\n";
    $headers .= "Reply-to: $from\n";
    $headers .= "Return-Path: $from\n";
    $headers .= "Message-ID: <" . md5(uniqid(time())) . "@" . $_SERVER['SERVER_NAME'] . ">\n";
    $headers .= "MIME-Version: 1.0\n";
    $headers .= "Date: " . date('r', time()) . "\n";

    $mail_sent = $mail_obj->send($to,$subject,$body,$headers);

    if (PEAR::isError($mail_sent)) { print($mail_sent->getMessage());} 
```

但我收到以下错误；

> 致命错误：在第 17 行的 /mounted-storage/hoxxx/xxx01/xx/auto-sal.es/functions.php 中找不到类“邮件”

但是，我的主机确实安装了这些模块[https://www.servage.net/wiki/List_of_PEAR_modules](https://www.servage.net/wiki/List_of_PEAR_modules)

任何人都可以请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:34:59.417

如果您想尝试修复当前的库，那么它可能对您的托管服务提供商来说是个问题，因为只有他们知道他们的存储系统的结构。

您的另一个选择可能是使用[Swift Mailer](http://swiftmailer.org/)，您只需上传库，然后将其包含在您要使用的每个页面中。该网站有很好的文档，根据经验，Swift Mailer 可以做你想做的 SMTP。

# c# - 如何通过 StreamWriter 使用 String Builder 格式化我的文本文件？

> ID：10133696
> 
> 赞同：0
> 
> 时间：2012-04-13T00:24:16.920
> 
> 标签：c#, asp.net, forms, stream, stringbuilder

您好，我有一个名为 gameWriter 的 StreamWriter。我可以使用字符串生成器来格式化我的 Stream Writer 吗？我希望结果如下所示： playerOneName 和 playerTwoName 是需要写入的变量。有人可以给我一个示例代码来显示以下内容：

```
Output:
playerOnename, playerTwoname, _, _, _, _, _, _, _, _, _,

private void WriteData(string playerOneName, string playerTwoName)
    {
        StreamWriter gameStateWriter = null;

        try
        {
            gameStateWriter = new StreamWriter(filepath, true);
            gameStateWriter.WriteLine(playerOneName + " , " + playerTwoName);
        }
        catch (Exception ex)
        {
            txtOutcome.Text = "The following problem ocurred when writing to the file:\n"
               + ex.Message;
        }
        finally
        {
            if (gameStateWriter != null)
                gameStateWriter.Close();
        }
    } 
```

是的，这些是下划线，它们应该表示准备好写入空间以保存一些文本。

我正在使用运行 ASP.NET 网站和表单的 Visual Studio '08。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T00:41:57.560

尽管我建议使用循环附加到构建器，但如何将流编写器与字符串构建器一起使用。

```
StringBuilder builder = new StringBuilder();

builder.Append(playerOneName)
builder.Append(",")
builder.Append(playerTwoName)
builder.Append(",")
StreamWriter  nameWriter = new StreamWriter(filepath, true);
nameWriter.WriteLine(builder.ToString()); 
```

您只需将所有变量存储在数组中

```
string[] names = {playerOneName, playerTwoName, playerThreName};
foreach(string item in names)
{

    builder.Append(item)
    builder.Append(",")
} 
```

# jquery - Jquery Return value from.post 是 bool 但如何测试条件

> ID：10133697
> 
> 赞同：0
> 
> 时间：2012-04-13T00:24:28.630
> 
> 标签：jquery

我有一些代码，例如：

```
$.post('/Invoice/UpdateFieldUser/', invoiceLine, function (data) {
    if (data == 'false') {
        alert("An approver could not be updated");
    } else {
        var fieldlabel = $('#fieldapprovallabel' + invoiceLineId + '');
        fieldlabel.text($(".fieldapproverddl option:selected").text());
    }
}) 
```

UpdateFieldUser 返回一个布尔值。我以为我可以像上面那样测试返回值，但它不起作用。有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T00:27:42.070

`'false'`是一个非空字符串，其计算结果为`true`. 尝试使用`false`（不带引号），或使用开发人员工具（如 Firebug）检查 的值`data`以查看实际返回的内容。

# c++ - CUDA - 我每次都必须分配和释放内存吗？

> ID：10133701
> 
> 赞同：0
> 
> 时间：2012-04-13T00:24:49.353
> 
> 标签：c++, cuda, nvidia

我有一个带有 CUDA 的卷积核，它经常被调用（它用于实时渲染）。每次我想调用内核时我应该 cudaMalloc 和 cudaFree 吗？我试图存储一个指向 cudaMalloc 结果的指针，并在内核执行之前通过 cudaMemcpy'ing 来继续，但我遇到了奇怪的行为（比如内核执行后的空内存）

我也在考虑使用固定内存，但如果我每次都必须分配和释放它，它甚至可能会减慢应用程序的速度。对于经常被调用的内核，我应该如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T00:32:37.810

不，没有理由为每个内核调用进行 malloc/free。Malloc 的内存在您释放它之前一直有效。我们有很多代码在分配的内存上执行许多内核，有和没有 cudaMemcpy 以更改其间的内容。

你的问题一定出在其他地方。尝试将其归结为显示问题的最小可能示例并发布代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T00:33:29.167

听起来你正在做的事情应该有效。

也许您的内核中有错误。尝试在内核启动后添加 cudaThreadSynchronize 和 cudaGetLastError 调用以进行调试。

如果没有更多信息，我无法为您提供更多建议。

# javascript - 在声明的函数中使用 'this' 时严格违反，不违反函数表达式

> ID：10133702
> 
> 赞同：5
> 
> 时间：2012-04-13T00:24:49.817
> 
> 标签：javascript, jslint

为什么 jslint 抱怨在声明的函数中使用它？

```
function navigate() {
    var id = $(this).attr('id');
} 
```

给我：

```
#1 Strict violation.
var id = $(this).attr('id'), // Line 18, Pos 20 
```

然而 jslint 没有抱怨：

```
var navigate = function () {
    var id = $(this).attr('id');
} 
```

我以相同的方式使用它们，并且它们都在浏览器中正常工作。

```
view.on('click', navigate); 
```

仅供参考，我通过使用`event.target`来绕过警告，但我想知道区别是什么。

```
function navigate(event) {
    var id = $(event.target).attr('id'); // no complaint
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T00:38:13.460

看看这个链接： [https ://github.com/shichuan/javascript-patterns/blob/master/general-patterns/function-declarations.html](https://github.com/shichuan/javascript-patterns/blob/master/general-patterns/function-declarations.html)

从这里的优秀参考：http: [//shichuan.github.com/javascript-patterns/](http://shichuan.github.com/javascript-patterns/)

提供了这些理由，但我不确定它们的说服力如何：

1.  更容易理解“作为对象的功能”。
2.  它强制执行良好的分号习惯。
3.  没有太多传统上与功能和范围相关的包袱。

该页面上“命名函数表达式”的原因更有说服力，但仍然不是压倒性的。

顺便说一句，这些似乎来自 John Resig（以 jQuery 闻名），链接如下：http: [//ejohn.org/blog/javascript-as-a-first-language/](http://ejohn.org/blog/javascript-as-a-first-language/)

# emacs - 在 Emacs 中为 Clojure 设置 Uber 开发模式

> ID：10133704
> 
> 赞同：1
> 
> 时间：2012-04-13T00:25:10.577
> 
> 标签：emacs, clojure, slime, swank

我知道

[Clojure 的 Emacs/Swank/Paredit 教程](https://stackoverflow.com/questions/2285437/a-gentle-tutorial-to-emacs-swank-paredit-for-clojure)

我基本上有同样的问题。

我注意到有一个编辑说说明已经过时，并且会有更新（我看不到更新发布在哪里。）

因此，我的问题：

使用 Clojure 设置 Emacs 的“正确方法”是什么？

背景：过去几年我一直在用 VIM 编写 Clojure；但是 Slime/Swank 看起来相当令人印象深刻。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T01:05:48.277

参见[http://dev.clojure.org/display/doc/Getting+Started+with+Emacs](http://dev.clojure.org/display/doc/Getting+Started+with+Emacs)或更直接的[https://github.com/technomancy/clojure-mode/blob/master/README.md](https://github.com/technomancy/clojure-mode/blob/master/README.md)很好地概述了您需要设置的内容。基本上，为 swank-clojure 安装 clojure-mode 和 leiningen 插件就可以了。一旦安装了这些，你只需创建一个新的 leiningen 项目，从项目中的某个地方打开一个 clj 文件，然后执行`M-x clojure-jack-in`.

# php - 如何检查domdocument是否有项目

> ID：10133707
> 
> 赞同：1
> 
> 时间：2012-04-13T00:25:34.413
> 
> 标签：php

如何检查domdocument是否有项目

代码：

```
 $iframe =  $dom->getElementsByTagName('iframe');

 foreach ($iframe as $if) {

    //how to check whether $if has items for
     // $if->item(0) so that I can access it without errors?
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T00:28:15.403

测试节点是否有子节点[`hasChildNodes()`](http://www.php.net/manual/en/domnode.haschildnodes.php)

```
 foreach ($iframe as $if) {
    if ($if->hasChildNodes()) {
       // first child is $if->childNodes->item(0)
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T00:30:05.487

你可以检查使用喜欢

`if($if -> hasChildNodes()) { ... }`

# apache - 带有客户端身份验证的 Apache HTTPD/mod_proxy/Tomcat 和 SSL

> ID：10133711
> 
> 赞同：6
> 
> 时间：2012-04-13T00:26:28.397
> 
> 标签：apache, tomcat, ssl, mod-proxy, mod-proxy-balancer

我确定这是一个常见问题解答，但我找不到任何我认为是同一个问题的东西。

我有几个在 Tomcat 中运行的 Web 应用程序，其中一些页面例如受 SSL 保护的登录页面，由其 web.xmls 中的机密性元素定义。其中一个应用程序还通过证书接受客户端身份验证。我还有一个相当广泛的基于 JAAS 的授权和身份验证方案，并且在各种 webapps 之间有各种共享代码和不同的 JAAS 配置等。

在完成以下任务时，我真的不想打扰任何这些。

在添加更多 Tomcat 实例之前，我现在正在将带有 mod-proxy 和 mod-proxy-balancer 的 Apache HTTPD 作为负载均衡器插入到 Tomcat 前面。

我想要为 HTTPS 请求完成的是，它们被“盲目”重定向到 Tomcat，而 HTTPD 不是 SSL 端点，即 HTTPD 只是将密文直接传递给 Tomcat，以便 TC 可以继续做它已经在做的登录、SSL、Web .xml 机密性保证，最重要的是客户端身份验证。

这可能与我描述的配置有关吗？

我对 webapps 和 SSL 以及 HTTPS 和 Tomcat 非常熟悉，但是我对 Apache HTTPD 的外围知识是有限的。

如有必要，很高兴移动它，但它是一种使用配置文件进行编程；）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T02:22:54.160

这听起来类似于[这个问题](https://stackoverflow.com/q/10041830/372643)，我已经回答说这是不可能的：

> 您不能只将 SSL/TLS 流量从 Apache 中继到 Tomcat。您的 SSL 连接在 Apache 结束，然后您应该将流量反向代理到 Tomcat（SSL [在 Httpd 和 Tomcat 之间] 在这种情况下很少有用），或者您让客户端直接连接到 Tomcat 并让它处理 SSL 连接.

我承认支持这一说法的链接有点少。我想我可能是错的（我只是从未见过这样做，但这并不严格意味着它不存在......）。

如您所知，您需要在用户代理和 SSL 端点之间建立直接连接或完全中继的连接（在这种情况下，您希望它是 Tomcat）。这意味着 Apache Httpd 将无法查看 URL：它最多只能知道主机名（当使用服务器名称指示时）。

[`mod_proxy`文档](http://httpd.apache.org/docs/2.4/mod/mod_proxy.html)中似乎不依赖于 URL 的唯一选项是[`AllowCONNECT`](http://httpd.apache.org/docs/2.4/mod/mod_proxy_connect.html)，它用于 HTTPS 的*转发*代理服务器。

即使是在配置的某个点上[的选项`mod_proxy_balancer`](http://httpd.apache.org/docs/2.4/mod/mod_proxy_balancer.html)也需要一条路径。它的文档没有提到 SSL/HTTPS（“*它为 HTTP、FTP 和 AJP13 协议提供负载平衡支持*”），而`mod_proxy`在提到`CONNECT`.

我会建议几个选项：

*   使用`iptables`基于 -based 的负载均衡器，无需通过 Httpd，直接结束 Tomcat 中的连接。

*   在 Httpd 结束 SSL/TLS 连接并使用普通的 HTTP 反向代理到 Tomcat。

第二个选项需要更多配置来处理客户端证书和 Tomcat 的安全约束。

如果您已经使用 配置了您的 webapp `<transport-guarantee>CONFIDENTIAL</transport-guarantee>`，您将需要让 Tomcat 将连接标记为安全，尽管事实上它认为它们来自其纯 HTTP 端口。对于 Tomcat 5，[这里有一篇文章](http://translate.google.com/translate?js=y&prev=_t&hl=en&ie=UTF-8&layout=1&eotf=1&u=http://blog.xebia.fr/2009/09/23/securiser-tomcat-5-derriere-un-proxy-apache-2-https/comment-page-1/&sl=fr&tl=en)（原文为法语，但自动翻译还不错）描述了如何实现一个 Valve 来设置`isSecure()`. （如果您不熟悉[Valve](http://tomcat.apache.org/tomcat-7.0-doc/config/valve.html)，它们类似于过滤器，但在请求传播到 webapp 之前在 Tomcat 本身内运行。它们可以在 Catalina 中配置）我认为从 Tomcat 5.5 开始，[HTTP 连接器`secure`选项](http://tomcat.apache.org/tomcat-5.5-doc/config/http.html)完全可以那，不需要你自己的阀门。AJP 连接器也有一个类似的选项（如果使用`mod_proxy_ajp`or `mod_jk`）。

如果使用 AJP 连接器，`mod_proxy_ajp`将转发链中的第一个证书并使其在 Tomcat 中可用（通过正常的请求属性）。你可能需要`SSLOptions +ExportCertData +StdEnvVars`. `mod_jk`（尽管据我所知已弃用）也可以转发客户端发送的整个链（使用`JkOptions +ForwardSSLCertChain`）。这在使用[代理证书](https://www.rfc-editor.org/rfc/rfc3820)时可能是必要的（如果没有链接到它们的最终实体证书，这将毫无意义）。

如果您想使用`mod_proxy_http`，一个技巧是通过[HTTP 标头 ( `mod_header`)](http://httpd.apache.org/docs/2.2/mod/mod_headers.html#header)传递证书，使用类似`RequestHeader set X-ClientCert %{SSL_CLIENT_CERT}s`. 我不记得确切的细节，但重要的是确保清除此标头，以便它永远不会来自客户端的浏览器（否则谁可以伪造它）。如果你需要完整的链，你可以试试[这个 Httpd 补丁尝试](http://mail-archives.apache.org/mod_mbox/httpd-dev/200809.mbox/%3Cgbt26i$9p2$1@ger.gmane.org%3E)。这种方法可能需要一个额外的阀门/过滤器来将标题变成`javax.servlet.request.X509Certificate`（通过解析 PEM 块）。

可能感兴趣的其他几点：

*   如果我没记错的话，您需要为 Httpd 显式下载 CRL 文件并将[其配置为使用它们](http://httpd.apache.org/docs/2.0/mod/mod_ssl.html#sslproxycarevocationfile)。根据您使用的 Httpd 版本，您可能需要[重新启动它才能重新加载 CRL](https://issues.apache.org/bugzilla/show_bug.cgi?id=14104)。
*   如果您使用重新协商来获取您的客户`CLIENT-CERT`端证书，据我所知，指令不会使 Httpd 请求客户端证书（否则，这是通过一个可以在`SSLSession`直接使用 JSSE 连接器时访问的阀门来完成的）。您可能必须在 Httpd 中配置匹配路径以请求客户端证书。

# html - MVC Razor 视图根据模型项条件使图像不可见

> ID：10133712
> 
> 赞同：0
> 
> 时间：2012-04-13T00:26:34.917
> 
> 标签：html, asp.net-mvc, razor

我有一些剃须刀代码，例如：

```
foreach (var item in projectGroup) {
                <tr>
                    ...
                    <td>
                        <label id="@( "fieldapprovallabel" + @item.InvoiceLineId)">@item.FieldUserName</label>
                        @if(item.FieldApproved != null) {
                            <img src="../../Content/Images/stock_lock.gif" alt="locked" class="lockicon" />
                        }
                    </td>
...
} 
```

所以基本上锁定图像仅基于条件可见。我知道在视图中有这样的逻辑是不好的。任何人都可以提出更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T00:34:55.413

我不相信简单的布尔逻辑或视图中的空检查有什么问题。

唯一的选择是将它全部隐藏在一些返回html（或空字符串）的帮助类中，我认为这在像这样的简单情况下会增加不必要的复杂性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T00:38:25.567

您可以创建一个具有名为`IsLocked`. 这抽象了用于做出“IsLocked”确定的业务逻辑，并且没有说明视图应该如何表现，只是通知视图该项目处于特定状态。

随后的绑定代码将类似，但不需要视图知道`item.FieldApproved`等于锁定条件。

当然，在您的应用程序的上下文中，`item.FieldApproved`可能已经完全分离了关注点，在这种情况下，我认为这很好。

# java - 按下返回按钮时强制关闭

> ID：10133717
> 
> 赞同：0
> 
> 时间：2012-04-13T00:26:56.263
> 
> 标签：java, android, barcode-scanner

当我进入此页面并单击后退按钮时，我强制关闭，因为它强制关闭我的条形码扫描结果不显示。如何停止应用程序强制关闭？

```
private EditText mTitleText;
private EditText mBodyText;
private EditText mquantityint;
private EditText mbarcodeint;
private Long mRowId;
private NotesDbAdapter mDbHelper;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mDbHelper = new NotesDbAdapter(this);
    mDbHelper.open();

    setContentView(R.layout.note_edit);

    mTitleText = (EditText) findViewById(R.id.title);
    mBodyText = (EditText) findViewById(R.id.body);
    mquantityint = (EditText) findViewById(R.id.quantity);
    mbarcodeint = (EditText) findViewById(R.id.barcode);

    Button barcode2 = (Button) findViewById(R.id.sbarcode);
    barcode2.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0)
        {
            Intent intent = new Intent("com.google.zxing.client.android.SCAN");
            intent.putExtra("SCAN_MODE", "PRODUCT_MODE");
            intent.putExtra("SAVE_HISTORY", false);//this stops saving ur barcode in barcode scanner app's history
            startActivityForResult(intent, 0);
        }
    });

    Button confirmButton = (Button) findViewById(R.id.confirm);

    mRowId = (savedInstanceState == null) ? null :
        (Long) savedInstanceState.getSerializable(NotesDbAdapter.KEY_ROWID);
    if (mRowId == null) {
        Bundle extras = getIntent().getExtras();
        mRowId = extras != null ? extras.getLong(NotesDbAdapter.KEY_ROWID)
                                : null;
    }

    populateFields();

    confirmButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            setResult(RESULT_OK);
            finish();
        }
    });
}

private void populateFields() {
    if (mRowId != null) {
        Cursor note = mDbHelper.fetchNote(mRowId);
        startManagingCursor(note);
        mTitleText.setText(note.getString(
                note.getColumnIndexOrThrow(NotesDbAdapter.KEY_TITLE)));
        mBodyText.setText(note.getString(
                note.getColumnIndexOrThrow(NotesDbAdapter.KEY_BODY)));
        mquantityint.setText(note.getString(
                note.getColumnIndexOrThrow(NotesDbAdapter.KEY_QUANTITY)));
        mbarcodeint.setText(note.getString(
                note.getColumnIndexOrThrow(NotesDbAdapter.KEY_BARCODE)));
    }
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    saveState();
    outState.putSerializable(NotesDbAdapter.KEY_ROWID, mRowId);
}

@Override
protected void onPause() {
    super.onPause();
    saveState();
}

@Override
protected void onResume() {
    super.onResume();
    populateFields();
}

private void saveState() {
    String title = mTitleText.getText().toString();
    String body = mBodyText.getText().toString();
    int quantity =Integer.parseInt( mquantityint.getText().toString());
    int barcode =Integer.parseInt( mbarcodeint.getText().toString());
    if (mRowId == null) {
        long id = mDbHelper.createNote(title, body, quantity, barcode);
        if (id > 0) {
            mRowId = id;
        }
    } else {
        mDbHelper.updateNote(mRowId, title, body, quantity, barcode);
    }
}

public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    String contents =null;
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == 0)
    {
        if (resultCode == RESULT_OK)
        {
            contents = data.getStringExtra("SCAN_RESULT");
            // String format = data.getStringExtra("SCAN_RESULT_FORMAT");
            //Variable set for QR scan result
            EditText sbarcodeno = (EditText) findViewById(R.id.barcodeno);
            //Variable set to display custom string above result  
            EditText Result =(EditText) findViewById(R.id.sbarcode);
            //Displays actual  
            sbarcodeno.setText(contents);
            //Edit string here    
            Result.setText(""); 
            // TO DO - Modify code so the result launches in another activity.
        } 
        else if (resultCode == RESULT_CANCELED)
        {
            // Handle cancel
        }
    }
}
@Override
public void onBackPressed() {
   this.finish();
   return;
}
} 
```

日志猫 -

```
04-13 01:24:47.355: E/AndroidRuntime(2575): FATAL EXCEPTION: main
04-13 01:24:47.355: E/AndroidRuntime(2575): java.lang.RuntimeException: Unable to pause activity {bhavik.smart.shopping/bhavik.smart.shopping.NoteEdit}: java.lang.NumberFormatException: Invalid int: ""
04-13 01:24:47.355: E/AndroidRuntime(2575):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2706)
04-13 01:24:47.355: E/AndroidRuntime(2575):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2662)
04-13 01:24:47.355: E/AndroidRuntime(2575):     at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2640)
04-13 01:24:47.355: E/AndroidRuntime(2575):     at android.app.ActivityThread.access$800(ActivityThread.java:123)
04-13 01:24:47.355: E/AndroidRuntime(2575):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
04-13 01:24:47.355: E/AndroidRuntime(2575):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-13 01:24:47.355: E/AndroidRuntime(2575):     at android.os.Looper.loop(Looper.java:137)
04-13 01:24:47.355: E/AndroidRuntime(2575):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-13 01:24:47.355: E/AndroidRuntime(2575):     at java.lang.reflect.Method.invokeNative(Native Method)
04-13 01:24:47.355: E/AndroidRuntime(2575):     at java.lang.reflect.Method.invoke(Method.java:511)
04-13 01:24:47.355: E/AndroidRuntime(2575):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
04-13 01:24:47.355: E/AndroidRuntime(2575):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
04-13 01:24:47.355: E/AndroidRuntime(2575):     at dalvik.system.NativeStart.main(Native Method)
04-13 01:24:47.355: E/AndroidRuntime(2575): Caused by: java.lang.NumberFormatException: Invalid int: ""
04-13 01:24:47.355: E/AndroidRuntime(2575):     at java.lang.Integer.invalidInt(Integer.java:138)
04-13 01:24:47.355: E/AndroidRuntime(2575):     at java.lang.Integer.parseInt(Integer.java:359)
04-13 01:24:47.355: E/AndroidRuntime(2575):     at java.lang.Integer.parseInt(Integer.java:332)
04-13 01:24:47.355: E/AndroidRuntime(2575):     at bhavik.smart.shopping.NoteEdit.saveState(NoteEdit.java:138)
04-13 01:24:47.355: E/AndroidRuntime(2575):     at bhavik.smart.shopping.NoteEdit.onPause(NoteEdit.java:126)
04-13 01:24:47.355: E/AndroidRuntime(2575):     at android.app.Activity.performPause(Activity.java:4563)
04-13 01:24:47.355: E/AndroidRuntime(2575):     at android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1195)
04-13 01:24:47.355: E/AndroidRuntime(2575):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2693)
04-13 01:24:47.355: E/AndroidRuntime(2575):     ... 12 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T00:38:04.787

由于线条，您正在逼近

```
int quantity =Integer.parseInt( mquantityint.getText().toString());
int barcode =Integer.parseInt( mbarcodeint.getText().toString()); 
```

在保存状态（）中。当您按下后退按钮时，其中一个 TextView 为空。

注意错误日志中的这一行

```
 java.lang.NumberFormatException: Invalid int: "" 
```

当您在无效字符串上运行 parseInt 时会引发此问题。在这种情况下，它告诉您字符串为空。您需要在运行 parseInt 之前检查字符串是否为空，或者在方法周围抛出一个 try catch。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T02:02:30.007

```
Result.setText(""); 
```

从您的代码中，您正在解析为字符串，因此得到 numberformat 异常。只需在将其转换为整数之前检查简单的条件，如下所示：

```
if(Result.getText()!="" ||Result.getText()!=null)
 int barcode =Integer.parseInt( mbarcodeint.getText().toString());
else
 int barcode =0; 
```

在上面你可以删除 else 部分作为 [er 你的要求

# css - 如何在另一个 Div 中居中三个 Div

> ID：10133722
> 
> 赞同：0
> 
> 时间：2012-04-13T00:27:26.950
> 
> 标签：css, html

这已经考验了我大约一个小时的耐心，所以我想我会问。

我需要三个 div，以另一个 div 为中心，另一个 div 位于另一个 div 中，哈哈。这是我的代码的样子。

HTML

```
<div id="frontnav">
   <div id="front1" class="frontboxes">
      <h2>Gold</h2>
   </div>
   <div id="front2" class="frontboxes">
      <h2>Green</h2>
   </div>
   <div id="front3" class="frontboxes">
      <h2>Blue</h2>
   </div>
</div> 
```

CSS

```
/*  FRONT PAGE BOXES */

#frontnav {
    width: 90%;
    margin-left: auto;
    margin-right: auto;
    height: 300px;
    transition: all 2s;
    -moz-transition: all 2s;
 /* Firefox 4 */
    -webkit-transition: all 2s;
 /* Safari and Chrome */
    -o-transition: all 2s;
 /* Opera */;
}

#front1 {
    text-align: center;
    float: left;
    height: 200px;
    width: 30%;
    box-shadow: 0px 0px 19px #615D69;
}

#front2 {
    text-align: center;
    float: left;
    height: 200px;
    width: 30%;
    box-shadow: 0px 0px 19px #615D69;
}

#front3 {
    text-align: center;
    float: left;
    height: 200px;
    width: 30%;
    box-shadow: 0px 0px 19px #615D69;
}

.frontboxes {
    margin: 6px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T00:29:40.363

`text-align:center;`声明需要在最外面的 div 上，即在`frontnav`您的示例中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T00:34:48.607

将最后一条规则更改为：

```
.frontboxes {
    margin: 6px auto;
} 
```

并删除 `float: left;`s。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T00:36:47.980

div 元素只能通过将 margin css 属性设置为居中

```
margin: 0px auto; 
```

# asp.net-mvc-3 - LINQ - NHibernate：一个列表项包含所有其他列表项

> ID：10133723
> 
> 赞同：0
> 
> 时间：2012-04-13T00:27:33.473
> 
> 标签：asp.net-mvc-3, linq, nhibernate, c#-4.0, fluent-nhibernate

我有这个结构：

```
class Foo {
    IList<FooAttribute> Attributes { get; set; }
}

class FooAttribute {
    bool IsSelected { get; set; }
    string Value { get; set; }
} 
```

我有这样的对象：

```
IQuerable<Foo> foos; // Database repository object .AsQuerable()
IList<FooAttribute> attrs; 
```

我只需要过滤那些具有**attrs**列表所有属性的**foos项目。**我试过这个：

 **```
foos = foos.Where(foo =>
                  attrs.All(a =>
                      foo.Attributes.Any(at => at.Value == a)));
var filteredFoos = foos.ToList(); 
```

我认为它会起作用，但会非常慢而且......它会抛出 NotSupportedException......

顺便说一句...我使用 ASP.NET MVC 3 和 C# 4.0，所以即使是最新的解决方案也很受欢迎。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:36:24.723

```
FooAttribute fooAttributeAlias=null;
Session.QueryOver<Foo>().Inner.JoinAlias(x=>x.Attributes,()=>fooAttributeAlias)
.WhereRestrictionOn(()=>fooAttributeAlias).IsNotEmpty
.List(); 
```

我不明白你写的查询。我不确定上面的查询是否符合您的预期，请查看生成的 sql 并查看是否正确。此外，您希望看到的 sql 查询可能会有所帮助，这将为您提供正确的结果。**

# css - 排列输入元素，在 Firefox 中逐个排列

> ID：10133728
> 
> 赞同：3
> 
> 时间：2012-04-13T00:27:56.623
> 
> 标签：css, forms, html

我希望我错过了一些简单的东西，但是对于我的生活，我无法弄清楚为什么我不能在 <input type="submit"> 旁边排列一个 <input type="text">。

在 StackOverflow 上进行了一些搜索，我找到了 box-sizing 属性，它解决了我在 IE 中的问题，但 Firefox 让我发疯了。这两个元素现在大小相同，但偏移了 1 个像素。

这是[jsfiddle 上的违规代码](http://jsfiddle.net/markwoon/nxY2K/2/)。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T00:48:33.670

你需要设置：

```
input[type=submit]::-moz-focus-inner{ border: 0; } 
```

[更改盒子模型似乎会导致这种效果，但它与this](http://christophzillgens.com/en/articles/equal-height-input-and-button-elements-in-firefox-and-safari)本质上是相同的问题。

# php - 我的 .ctags 文件有什么问题？

> ID：10133734
> 
> 赞同：5
> 
> 时间：2012-04-13T00:28:33.453
> 
> 标签：php, ctags

我是一个 ctags 新手，用 PHP 编码。我在网上找到了这个 ctags 文件：

```
-R
--exclude=.svn
--tag-relative=yes
--PHP-kinds=+cfpd
--regex-PHP=/abstract\s+class\s+([^ ]+)/\1/c/
--regex-PHP=/interface\s+([^ ]+)/\1/c/
--regex-PHP=/(public\s+|static\s+|protected\s+|private\s+)\$([^     =]+)/\2/p/
--regex-PHP=/const\s+([^    =]+)/\1/d/
--regex-PHP=/final\s+(public\s+|static\s+|abstract\s+|protected\s+|private\s+)function\s+\&?\s*([^ (]+)/\2/f/ 
```

但是，我收到此错误：

```
$ ctags
ctags: Warning: Unsupported parameter 'p' for --PHP-kinds option 
```

从实验中我看到`p`需要定义，实际上它是在文件的第七行定义的。那么为什么会抛出错误呢？

**编辑：** ctags 文件[来自这里](https://github.com/lucasoman/Conf/blob/master/.ctags)，链接自[这篇了不起的文章](http://lucasoman.blogspot.com/2010/09/vim-php-taglist-and-ctags.html)。

这是我的配置的输出：

```
$ ctags --version
ctags: Warning: Unsupported parameter 'p' for --PHP-kinds option
Exuberant Ctags 5.6, Copyright (C) 1996-2004 Darren Hiebert
Compiled: Jan  6 2007, 02:10:54
Addresses: <dhiebert@users.sourceforge.net>, http://ctags.sourceforge.net
Optional compiled features: +wildcards, +regex
$ cat ~/.ctags
-R
--exclude=.svn
--tag-relative=yes
--regex-PHP=/abstract\s+class\s+([^ ]+)/\1/c/
--regex-PHP=/interface\s+([^ ]+)/\1/c/
--regex-PHP=/(public\s+|static\s+|protected\s+|private\s+)\$([^ \t=]+)/\2/p/
--regex-PHP=/const\s+([^ \t=]+)/\1/d/
--regex-PHP=/final\s+(public\s+|static\s+|abstract\s+|protected\s+|private\s+)function\s+\&?\s*([^ (]+)/\2/f/
--PHP-kinds=+cpdf
$ ctags
ctags: Warning: Unsupported parameter 'p' for --PHP-kinds option
$ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T18:49:08.340

默认情况下，没有为 PHP 定义“p”类型。

```
--regex-PHP=/(public\s+|static\s+|protected\s+|private\s+)\$([^     =]+)/\2/p/ 
```

在您的情况下为 PHP 定义一个“p”类型。如果你搬家

```
--PHP-kinds=+cfpd 
```

在此之后，它不会给你一个错误。

**注意：**这是我的 ctags 版本信息：

```
$ ctags --version 
Exuberant Ctags 5.8, Copyright (C) 1996-2009 Darren Hiebert
  Compiled: Apr 19 2012, 11:31:19
  Addresses: <dhiebert@users.sourceforge.net>, http://ctags.sourceforge.net
  Optional compiled features: +wildcards, +regex 
```

# java - 在下面的代码里面实现ActionListener

> ID：10133741
> 
> 赞同：2
> 
> 时间：2012-04-13T00:29:07.913
> 
> 标签：java, swing, user-interface, actionlistener

我在 Java 上的年龄计算程序遇到了一些问题。当我预设出生年份、出生月份和出生日期值时，它工作正常，但是当我尝试让用户在文本字段中输入他们自己的出生日期然后尝试使用这些值时，我只是走到了死胡同。我尝试在 Yahoo Answers 上提问，得到的提示是“getActionCommand() 的返回值是一个字符串，而结果是一个 JLabel。你能比较它们吗？” 我不完全确定如何处理该提示。

这就是我所拥有的以及我尝试实现整个“用户输入”想法的方式。我很确定我的编码是混乱和低效的，所以请耐心等待。我会很感激任何帮助！

```
 //Date: April 11, 2012
   //Description: Calculates the age in terms of days depending on your birthdate.
   import javax.swing.*;
   import java.awt.*;
   import java.awt.event.*;

   public class AgeCalculator extends Frame implements  ActionListener {

JButton equal;
JTextField year, month, day;
JLabel result, first, second, third;
JFrame frame;
JPanel panel;

static int totaldaysalive;
static int daysaliveyr;
static int daysalivem;
static int birthyr; 
static int birthm;
static int birthd;
static int currentyr = 2012; 

public AgeCalculator(){
    gui();
}

public void gui(){
    frame = new JFrame ("Age Calculator");
    panel = new JPanel(new GridBagLayout());
    panel.setBackground(Color.LIGHT_GRAY);
    GridBagConstraints x = new GridBagConstraints();

    equal = new JButton ("Get Result");

    x.insets = new Insets(3,0,3,0);

    first = new JLabel("Year  ");
    x.gridx = 0;
    x.gridx = 0;
    panel.add(first, x);

    year = new JTextField(10);
    x.gridx = 5;
    x.gridy = 0;
    x.gridwidth = 3;
    panel.add(year, x);

    second = new JLabel ("Month  ");
    x.gridx = 0;
    x.gridy = 1;
    panel.add(second,x);

    month = new JTextField(10);
    x.gridx = 5;
    x.gridy = 1;
    x.gridwidth = 3;
    panel.add(month,x);

    third = new JLabel ("Day      ");
    x.gridx = 0;
    x.gridy = 2;
    panel.add(third,x);

    day = new JTextField(10);
    x.gridx = 5;
    x.gridy = 2;
    x.gridwidth = 3;
    panel.add(day,x);

    x.gridx = 6;
    x.gridy = 3;
    panel.add(equal,x);

    result = new JLabel ("");
    x.gridx = 5;
    x.gridy = 5;
    panel.add(result,x);

    frame.add(panel);
    frame.setVisible(true);
    frame.setSize(350, 350);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    Calc e = new Calc();

    equal.addActionListener(e);
    year.addActionListener(e);
    month.addActionListener(e);
    day.addActionListener(e);
}

class Calc implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        try {
            birthyr = Integer.parseInt(year.getText());

        } catch (NumberFormatException a) {
            result.setText("Illegal data for first field.");
            result.setForeground(Color.red);
            return;
        }

        try {

            birthm = Integer.parseInt(month.getText());

        } catch (NumberFormatException a) {

            result.setText("Illegal data for second field.");
            result.setForeground(Color.red);
            return;
        }
        try {

            birthd = Integer.parseInt(day.getText());

        } catch (NumberFormatException a) {

            result.setText("Illegal data for third field.");
            result.setForeground(Color.red);
            return;
        } 

        if (e.getActionCommand().equals (equal)){

            totaldaysalive = ageCalcYr() + ageCalcM() + birthd;
            result.setText(Integer.toString(totaldaysalive));
        }
    } 

    public int ageCalcYr(){
        for (int i = birthyr; i <= currentyr; i++){
            if ((i % 4 == 0) && (!(i % 100 == 0) || (i % 400 == 0))){
                daysaliveyr = daysaliveyr + 366;
            }
            else {
                daysaliveyr = daysaliveyr + 365;
            }
        }
        return daysaliveyr;
    }
    public int ageCalcM(){
        if (birthm == 1){
            daysalivem = daysalivem + 0;
        }
        else if (birthm == 2){
            daysalivem = daysalivem + 30;
        }
        else if (birthm == 3){
            daysalivem = daysalivem + 60;
        }
        else if (birthm == 4){
            daysalivem = daysalivem + 90;
        }
        else if (birthm == 5){
            daysalivem = daysalivem + 120;
        }
        else if (birthm == 6){
            daysalivem = daysalivem + 150;
        }
        else if (birthm == 7){
            daysalivem = daysalivem + 180;
        }
        else if (birthm == 8){
            daysalivem = daysalivem + 210;
        }
        else if (birthm == 9){
            daysalivem = daysalivem + 240;
        }
        else if (birthm == 10){
            daysalivem = daysalivem + 270;
        }
        else if (birthm == 11){
            daysalivem = daysalivem + 300;
        }
        else if (birthm == 12){
            daysalivem = daysalivem + 330;
        }
        return daysalivem;
    }
}

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        AgeCalculator gui = new AgeCalculator();
    }
    @Override
    public void actionPerformed(ActionEvent arg0) {
        // TODO Auto-generated method stub
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T01:40:02.527

快速愈合：

```
 if (e.getActionCommand ().equals ("Get Result")) { // equal)) {
        totaldaysalive = ageCalcYr () + ageCalcM () + birthd;
        result.setText (Integer.toString (totaldaysalive));
    } 
```

如果您有时间，我可以向您发布 20 项改进。

1.  你扩展框架，
2.  暗示。ActionListener，但同时 AgeCalculator 有一个 JFrame（在 SwingContext 中比 Frame 更好，它是 AWT）并且有一个单独的 Actionlistener 被使用。
3.  删除声明，最后删除覆盖方法。

```
    public class AgeCalculator // 扩展 Frame 实现 ActionListener 

```

接下来是一组可视化组件和其他属性，后面的那些是静态的 - 这禁止在同一个 JVM 上使用 2 个 AgeCalculators。这肯定不是故意的限制。

1.  不要做一些静态的东西来关闭编译器。
2.  如果您不确定要公开它，请将所有内容设为私有。
3.  尽可能避免使用属性。
4.  你什么时候会修饰标签？

```
    JButton 相等；
    JTextField 年月日；
    JLabel 结果，...

    ...
    静态 int 出生；
    静态 int currentyr = 2012;

```

1.  在适当的地方使用简化的加法：

    ```
    daysaliveyr += 366; 
    ```

2.  要计算月份的天数，请将birthyr 和birthm 作为参数传递： int totaldaysalive = ageCalcYr (birthyr) + ageCalcM (birthm) +birthd; result.setText (Integer.toString (totaldaysalive));

3.  变量 totaldaysalive 的生存时间可以减少到 2 行 - 如果有任何错误，搜索错误的范围非常小。

    ```
    public int ageCalcM (int birthm) {
        int daysalivem = 0;     
        if (birthm == 2) {
            daysalivem += 30;
        }
        else if (birthm == 3) {
            daysalivem += 60;
        } 
    ```

4.  在当前状态下，ageCalcM 是一个provisorium。否则你只能说`daysalivem = (birthm - 1) * 30;`

5.  更短的代码：

    ```
    public int ageCalcM (int birthm) {
        if (birthm == 2) {
            return 30;
        }
        else if (birthm == 3) {
            return 60;
        } 
    ```

6.  然而，这种愚蠢重复的大规模操作可以用一个简单的数组来解决：

    ```
    public int ageCalcM (int birthm) {
        int[] mdays = {0, 30, 60, 90, ...};
        return mdays [birthm];
    } 
    ```

7.  在主方法中，您创建一个从未使用过的实例“gui”。这就是你所需要的：

    public static void main (String [] args) { new AgeCalculator (); }

8.  桂，顺便说一句。是一个坏名字，如果你已经有一个说名字的方法。

9.  由于从未使用过该方法，因此只需将整个内容移入 ctor 即可。
10.  年/月/日不需要 ActionListener。
11.  其他布局更适合。
12.  我们需要对日历进行另一次改革，以使您的计划发挥作用。
13.  输入不仅应检查为 int，还应检查为有效月份等。
14.  不使用实际日期。

剩下什么？

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class AgeCalculator
{
    JTextField year, month, day;
    JLabel result;

    public AgeCalculator () {
        JFrame frame = new JFrame ("Age Calculator");
        JPanel panel = new JPanel (new GridBagLayout ());
        panel.setBackground (Color.LIGHT_GRAY);
        GridBagConstraints x = new GridBagConstraints ();

        JButton equal = new JButton ("Get Result");
        x.insets = new Insets (3, 0, 3, 0);

        JLabel first = new JLabel ("Year  ");
   // two times gridx = 0 here?
        x.gridx = 0;
        x.gridx = 0;
        panel.add (first, x);

        year = new JTextField (10);
        x.gridx = 5;
        x.gridy = 0;
        x.gridwidth = 3;
        panel.add (year, x);

        JLabel second = new JLabel ("Month  ");
        x.gridx = 0;
        x.gridy = 1;
        panel.add (second, x);

        month = new JTextField (10);
        x.gridx = 5;
        x.gridy = 1;
        x.gridwidth = 3;
        panel.add (month, x);

        JLabel third = new JLabel ("Day      ");
        x.gridx = 0;
        x.gridy = 2;
        panel.add (third, x);

        day = new JTextField (10);
        x.gridx = 5;
        x.gridy = 2;
        x.gridwidth = 3;
        panel.add (day, x);

        x.gridx = 6;
        x.gridy = 3;
        panel.add (equal, x);

        result = new JLabel ("");
        x.gridx = 5;
        x.gridy = 5;
        panel.add (result, x);

        frame.add (panel);
        frame.setVisible (true);
        frame.setSize (350, 350);
        frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);

        Calc e = new Calc ();

        equal.addActionListener (e);
    }

    class Calc implements ActionListener {
        public void actionPerformed (ActionEvent e) {
            int birthyr; 
            int birthm;
            int birthd;

            try {
                birthyr = Integer.parseInt (year.getText ());
            } catch (NumberFormatException a) {
                result.setText ("Illegal data for first field.");
                result.setForeground (Color.red);
                return;
            }
            try {
                birthm = Integer.parseInt (month.getText ());
            } catch (NumberFormatException a) {
                result.setText ("Illegal data for second field.");
                result.setForeground (Color.red);
                return;
            }
            try {
                birthd = Integer.parseInt (day.getText ());
            } catch (NumberFormatException a) {
                result.setText ("Illegal data for third field.");
                result.setForeground (Color.red);
                return;
            } 
            if (e.getActionCommand ().equals ("Get Result")) { // equal)) {
                int totaldaysalive = ageCalcYr (birthyr) + ageCalcM (birthm) + birthd;
                result.setText (Integer.toString (totaldaysalive));
            }
        } 

        public int ageCalcYr (int birthyr) {
            int currentyr = 2012; 
            int daysaliveyr = 0;
            for (int i = birthyr; i <= currentyr; i++) {
                if ((i % 4 == 0) && (! (i % 100 == 0) || (i % 400 == 0))) {
                    daysaliveyr += 366;
                }
                else {
                    daysaliveyr += 365;
                }
            }
            return daysaliveyr;
        }

        public int ageCalcM (int birthm) {
            int[] mdays = {0, 30, 60, 90, 120};
            return mdays [birthm];
        }
    }

    public static void main (String [] args) {
        new AgeCalculator ();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T00:49:38.333

由于您使用按钮来启动计算，因此只需在该按钮上注册一个动作侦听器。在 action executed 方法中读取、解析和计算年龄（以天为单位）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T00:39:20.770

我想你想做`equal.addMouseListener(e)`。当然，您必须更改`Calc`以实施`MouseListener`. 您可能只需要实际编写该`mouseClicked(MouseEvent)`方法。所有其他人都是为了比你所追求的更具体的事情。

这将响应您的按钮上的单击事件。我不认为你想要任何其他听众。如果是这样，它们应该是`KeyListeners`或其他的东西`ActionListeners`。

在旁注中，我很难看到，因为您的缩进已关闭，但我无法真正说出为什么您的`int`字段是`static`. 我认为这可能是不必要的。

# android - 让菜单项设置动画

> ID：10133745
> 
> 赞同：1
> 
> 时间：2012-04-13T00:29:46.137
> 
> 标签：android, menu, android-actionbar, actionbarsherlock

我正在尝试在我的 ActionBar（实际上是 ActionBarSherlock）中为菜单项设置动画，同时加载活动。我的代码在第一次创建活动时工作，但任何时候再次调用活动时，我都会在“loadingItem”上得到一个 NullReference 异常，因为`onCreateOptionsMenu`在之后调用`onCreate`。我尝试使用`onPrepareOptionsMenu`但同样的东西。

```
public class MyActivity extends SherlockActivity  {
    private MenuItem loadingItem;

    @Override
    public void onCreate(final Bundle icicle) 
    {
        final LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        final ImageView ivRefresh = (ImageView)inflater.inflate(R.layout.refresh_view, null);

        final Animation rotation = AnimationUtils.loadAnimation(this, R.anim.refresh);
        ivRefresh.startAnimation(rotation);
        loadingItem.setActionView(ivRefresh);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getSupportMenuInflater().inflate(R.menu.my_menu, menu);
        loadingItem = menu.findItem(R.id.loading);
        return super.onCreateOptionsMenu(menu);
    }
} 
```

my_menu.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<menu xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@+id/loading" 
          android:icon="@drawable/loading"
          android:showAsAction="always"          
    />

</menu> 
```

更新：

这最终是我想要完成的。我有一个 WebView，我想在 WebView 完成加载之前显示一个加载图标：

```
 @Override
    public void onCreate(final Bundle icicle) 
    {
        WebView webView = (WebView)findViewById(R.id.webview);
        webView.getSettings().setSupportZoom(true);  
        webView.getSettings().setBuiltInZoomControls(true);

        webView.loadUrl("http://www.google.com");

        webView.setWebViewClient(new WebBrowserClient());

        final LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        final ImageView ivRefresh = (ImageView)inflater.inflate(R.layout.refresh_view, null);

        final Animation rotation = AnimationUtils.loadAnimation(this, R.anim.refresh);
        ivRefresh.startAnimation(rotation);
        loadingItem.setActionView(ivRefresh);

        webView.setWebChromeClient(new WebChromeClient() {
            public void onProgressChanged(WebView view, int progress) {

                if (!isFinishing() && progress == 100 && loadingItem != null && loadingItem.getActionView() != null)
                {
                    loadingItem.getActionView().clearAnimation();
                    loadingItem.setActionView(null);
                }
            }
        }); 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T00:43:54.683

`onCreateOptionsMenu`将始终在 之后调用`onCreate`。事实上，它`onCreate`总是[在](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)创建活动时调用的第一个方法。

您应该`loadingItem`在使用它之前分配变量，或者将其声明为静态，以便在销毁活动时不会删除引用（这仍然可能发生，在这种情况下我推荐第一个选项）。

为什么不设置动画`onCreateOptionsMenu`呢？

# c# - 根据 cardNumber 是否为空，将 GridView 的“已签出”列从按钮更改为标签

> ID：10133749
> 
> 赞同：0
> 
> 时间：2012-04-13T00:30:13.100
> 
> 标签：c#, asp.net, sql, visual-studio

注意：我是一名初级 Web 开发人员，对 PHP 有点熟悉。我一直对 ASP.NET 很好奇，想尝试一下。

现在，我正在尝试显示如下表的小型库应用程序：

```
Title                - Author        - Status
The Eye of the World - Robert Jordan - Checked Out
The Great Hunt       - Robert Jordan - Check Out
The Dragon Reborn    - Robert Jordan - Check Out 
```

我创建了一个 DataSet 和一个执行以下查询的 TableAdapter：

```
SELECT        books.SerialNumber, books.Title, books.Author, CheckedOut.cardNumber
FROM            books LEFT OUTER JOIN
                         CheckedOut ON books.SerialNumber = CheckedOut.SerialNumber 
```

我这样做是为了获得 NULL 或 cardNumber 以供下面使用。

这是我主页的当前状态：

```
 <%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeFile="Browse.aspx.cs" Inherits="_Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        DataKeyNames="SerialNumber,cardNumber" DataSourceID="ObjectDataSource1" 
        OnRowDataBound="browseMethod"
        AllowPaging="True" onselectedindexchanged="GridView1_SelectedIndexChanged">
        <Columns>
            <asp:BoundField DataField="SerialNumber" HeaderText="SerialNumber" 
                InsertVisible="False" ReadOnly="True" SortExpression="SerialNumber" 
                Visible="False" />
            <asp:BoundField DataField="Title" HeaderText="Title" SortExpression="Title" />
            <asp:BoundField DataField="Author" HeaderText="Author" 
                SortExpression="Author" />
            <asp:BoundField DataField="cardNumber" HeaderText="cardNumber" 
                SortExpression="cardNumber" Visible="False" />
            <asp:TemplateField HeaderText="Status">
                <ItemTemplate>
                    <asp:Button ID="Button1" runat="server" 
                        CommandArgument='<%# Eval("cardNumber") %>' 
                        Text="Check Out" />
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
</asp:GridView>
    <asp:ObjectDataSource ID="ObjectDataSource1" runat="server" 
        OldValuesParameterFormatString="original_{0}" SelectMethod="GetLibraryBooks" 
        TypeName="DataSet1TableAdapters.DataTable1TableAdapter">
    </asp:ObjectDataSource>
</asp:Content> 
```

当该行的“cardNumber”值为NULL时，我希望能够将“签出”按钮更改为标签（“签出”）。另外，如何在调用每个按钮时创建一个事件，并获取正确的序列号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T01:01:42.950

在填充网格时，将为网格中的每一行调用browseMethod。因此，您可以根据条件启用或禁用按钮..

您可以通过按钮名称“Button1”使用 row.FindControl 获取按钮并将其转换为按钮并调用 button.Enabled = true 或 false .. 基于 cc 编号..

我希望这应该引导你走上正确的道路......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:04:26.663

您可以创建另一个控件标签并将其可见性设置为 false。您已经为按钮设置了命令参数。也请给出命令名称。

```
<asp:Button ID="Button1" runat="server"                          CommandArgument='<%# Eval("cardNumber") %>'          CommandName="CheckOut"                 Text="Check Out" /> 
```

在 gridview_rowCommand 回调中检查命令名称并执行操作。将按钮的可见性设置为 false 并将标签设置为 true。另一个选项将是启用/禁用按钮，如上面的答案中讨论的那样，禁用样式以这样的方式制作它看起来像一个标签。对于网格视图命令参数，请参阅以下链接：- [http://msdn.microsoft.com/en-us/library/bb907626.aspx](http://msdn.microsoft.com/en-us/library/bb907626.aspx)

# java - 从与调用它的线程不同的线程执行方法

> ID：10133750
> 
> 赞同：1
> 
> 时间：2012-04-13T00:30:15.737
> 
> 标签：java, multithreading

我正在使用每客户端线程模型开发游戏。游戏的运行方式是每半秒所有玩家都需要更新。更新都必须在半秒的时间间隔内发生，因此它们都需要同时执行。我的想法是有一个类来跟踪“全局更新”何时需要发生，然后当时间到来时，遍历所有玩家并告诉它更新：

```
 for(Player p : currentPlayers) {
     p.update();
 } 
```

问题是，由于每个玩家都有自己的线程，我希望玩家能够利用这一事实，因为它已经存在。如果我从不同的类进行更新，那么会有一个线程执行几百个线程可以单独执行的操作。我该如何设计它，以便如果一个线程在 Player 类中调用方法“update()”，一个与调用它的线程不同的线程执行它，或者可能是一种可以实现相同目标的不同方法？

如果您需要任何澄清，请询问！非常感谢！

**更新：**你们怎么看这个（我不知道如何在帖子中格式化大量代码！）：

**更新2：**刚刚意识到我需要知道所有玩家何时完成更新以重置最后一次......

```
公共类 PseudoExample 实现 Runnable
{
    // 假设“玩家”中充满了活跃玩家。
    私人玩家 [] 玩家 = 新玩家 [100];
    私有的 long lastUpdate = System.currentTimeMillis();

    公共无效运行（）
    {
        而（真）
        {
            if (System.currentTimeMillis() - lastUpdate >= 500)
            {
                对于（玩家 p：玩家）
                {
                    p.update = true;
                }
            }

            尝试
            {
                线程.sleep(10);
            } 捕捉（InterruptedException e）
            {

            }
        }
    }

    私有类 Player 实现 Runnable
    {
        私人布尔更新=假；

        公共无效运行（）
        {
            而（真）
            {
                如果（更新）
                {
                    // 在这里更新...
                }

                尝试
                {
                    线程.sleep(10);
                } 捕捉（InterruptedException e）
                {

                }
            }
        }
    }
}
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T00:37:56.220

我认为处理这个问题的最好方法不是调用 p.update()，而是可以向 p 发送异步消息。这将使用[Handler](http://developer.android.com/reference/android/os/Handler.html)功能。这可能是最干净的方式，尽管我相信消息传递会产生一些（可能是微不足道的）开销。

因此，在您的滴答线程（即调用全局更新的线程）中，您将拥有对每个客户端线程的 Handler 对象的引用。然后，你看起来会像

```
for (Player p : currentPlayers) {
    p.handler().sendMessage(); // this isn't exactly the syntax
} 
```

在您的 Player 中，您将拥有一个 PlayerHandler 对象，该对象扩展了 Handler 并覆盖了 handleMessage(Message)。

编辑：关于这个问题的评论是好的——不要使用比你需要的更多的线程。它们似乎是“正确”的抽象，但它们引入了大量潜在的棘手问题。如果您的所有计算都需要在滴答之间完成，那么它是否按顺序完成可能并不重要。

# java - Oracle 数据库：DBMS_ALERT 与 java 应用程序一起使用

> ID：10133757
> 
> 赞同：3
> 
> 时间：2012-04-13T00:30:55.620
> 
> 标签：java, database, oracle

我有一个使用 JDBC 与 oracle 11.2 数据库服务器通信的 java 应用程序服务器。客户端的请求被发送到应用程序服务器，应用程序服务器运行一个调用数据库中的第一个存储过程的 java 方法。

我希望 java 方法在调用存储过程之后坐下来等待来自数据库的信号（该信号表明某些结果已准备好从数据库中检索）。

为了避免轮询数据库，可以使用 DBMS_ALERT 通知 java 方法（或多个方法，因为可能正在运行多个实例，每个唯一用户一个实例）结果已准备好检索，在这种情况下，java 方法可以继续执行它的其余代码？

有人可以提供一个在这种情况下使用 DBMS_ALERT 的简单示例吗？也就是说，如何在数据库中对其进行配置，以便在表中的预定字段发生更改（例如更改为预定值，例如“完成”）时发送警报，以及如何配置 java 方法以使其可以接收警报消息（包括它如何处理此消息以检查其内容，例如`if (received_message == 'done')`等）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T16:25:27.683

这是我正在寻找的一个很好的例子：

[https://web.archive.org/web/20111203004656/http://www.oracleutilities.com/Packages/dbms_alert.html](https://web.archive.org/web/20111203004656/http://www.oracleutilities.com/Packages/dbms_alert.html)

它显示了 java 应用程序如何使用 DBMS_ALERT 与 Oracle 数据库一起工作。

其他一些有用的参考链接：

[http://vapvarun.com/study/oracle/prentice.programming.oracle.triggers.and.stored.procedures.3rd.edition.ebook-lib/0130850330_ch11lev1sec21.html](http://vapvarun.com/study/oracle/prentice.programming.oracle.triggers.and.stored.procedures.3rd.edition.ebook-lib/0130850330_ch11lev1sec21.html)

[http://www.morganslibrary.org/reference/pkgs/dbms_alert.html](http://www.morganslibrary.org/reference/pkgs/dbms_alert.html)

[http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:1101233460502](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:1101233460502)

# javascript - JavaScript：有计划在未来版本中实现线程吗？

> ID：10133773
> 
> 赞同：3
> 
> 时间：2012-04-13T00:33:09.237
> 
> 标签：javascript

随着库的发展，编程变得更容易，人们似乎正在将 JS 用于更多 Java 在其鼎盛时期会被使用的东西。

也就是说，我们知道 JS 存在许多性能问题，其中之一就是使用线程优化运行时的能力。

我看到了：[为什么 JavaScript 不支持多线程？](https://stackoverflow.com/questions/39879/why-doesnt-javascript-support-multithreading)，但这在 3-4 年前得到了回答（一年内发生了很多变化，更不用说 3-4 年了）。随着 HTML5 的快速发展，我更加好奇这是否得到了更多的考虑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T00:36:34.320

你应该问，[ECMA TC39](http://www.ecma-international.org/memento/TC39.htm)，他们拥有 ECMAScript。

但简短的回答是否定的，如果你有长时间运行的脚本想要“产生一个新线程”，你应该检查[WebWorkers](http://www.whatwg.org/specs/web-apps/current-work/multipage/workers.html)，它们在自己的上下文中运行，*技术上*在另一个线程上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T00:42:39.293

我认为随着时间的推移，我们将看到 WebWorkers 可以做什么以及它们如何与主 javascript 线程通信的扩展。今天它非常有限，但是有一些方法可以让它变得更强大，而不会冒险让主 javascript 线程成为单线程的稳定性和简单性。

例如，今天您无法在 WebWorker 中加载图像或准备图形，但这对于图形密集型应用程序将非常有用。您可以进行计算，但仅限于此。

例如，您不能在任何类型的后台进程中为动画操作 DOM 对象。这也将非常有用 - 认为浏览器引擎实现起来更复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T00:48:10.580

JS 不——也可能不会——支持多线程的原因是它不适合 JS 所做的工作，尤其是在浏览器中。如果您有大量 CPU 密集型工作要做并且不介意在锁定等方面付出代价，并发线程很有用。但是浏览器 JS 根本不——也不应该——做很多 CPU 密集型的工作：它是一个事件驱动的环境，所以 JS 只需要一个线程。它在每个工作块之后将控制权交给浏览器，等待下一个事件——计时器、点击、onLoad 或其他任何事件。并发性将极大地增加管理所有事件处理程序的工作量并且不会增加太多性能 - 您的所有线程都将等待相同的事件，除非您有大量的事件触发，否则将没有足够的工作来保持您的线程忙。

正如 Slace 上面所说，WebWorkers 旨在允许在浏览器 JS 中执行 CPU 密集型工作的奇怪情况，但它们不是真正的多线程。

# c# - C# .NET 中的方法或属性之间存在歧义

> ID：10133774
> 
> 赞同：14
> 
> 时间：2012-04-13T00:33:12.340
> 
> 标签：c#

```
int n = 5;
int quorum = Math.Floor(n / 2) + 1; 
```

我希望 quorum 的值为 3。但这是我在 VisualStudio 中遇到的错误：

> 以下方法或属性之间的调用不明确：“System.Math.Floor(double)”和“System.Math.Floor(decimal)”

我该如何纠正？我哪里做错了？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-13T00:34:49.120

您无需使用`Math.Floor`. 因为您的所有术语都是整数，所以 .NET 将执行整数除法，无论如何都会自动截断输出的其余部分。

至于为什么会出现错误，如上所述整数除法的结果仍然是整数。因为你不能对整数取底（没有小数部分可以向下舍入），所以不会出现`Floor`需要`int`. 该调用必须将结果转换为 a`decimal`或`double`first，并且编译器不知道您想要哪个（实际上两者都不知道）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T00:35:20.993

n/2 是一个整数除法 - 所以结果是一个整数 - 实际上根本不需要在`Math.Floor()`这里做 - 只是做

```
int quorum = n / 2 + 1; 
```

将产生 的预期结果`3`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T00:39:25.533

Floor 方法只接受 double 和 decimal 值，但 int 会自动适应它们。您可以使用从 int 转换为十进制或双精度然后返回到 int 的方式：

```
int n = 5;
int quorum = (int)Math.Floor((decimal)n / 2) + 1; 
```

或者

```
int n = 5;
int quorum = (int)Math.Floor((double)n / 2) + 1; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-13T00:35:54.817

除以 2.0 以确保结果数字是双精度数。当在 Math.Floor(double) 或 Math.Floor(decimal) 之间进行选择时，n/2 本身并不会告诉编译器将其转换为什么。

```
int n = 5;
int quorum = (int)Math.Floor(n / 2.0) + 1; 
```

# c - 将多维数组传递给函数？

> ID：10133777
> 
> 赞同：0
> 
> 时间：2012-04-13T00:33:32.263
> 
> 标签：c, arrays, multidimensional-array

我有一个函数 setPosition 声明如下：

```
void setPosition(char ***grid, int a, int b) {
    int x = a / 8;
    int xbit = a % 8;
    int y = b;
    (*grid)[x][y] |= 1 << xbit;
} 
```

在我的主要，我有：

```
char grid[1000][1000];
setPosition(&grid, 10, 5); 
```

但我得到“警告：从不兼容的指针类型传递 'setPosition' 的参数 1”。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T00:35:47.437

数组和指针不是同一类型，即使数组在传递给函数时确实会*衰减为指针。*您可以更改方法签名以获取数组

```
void setPosition(char grid[][1000], Pos *p) 
```

但如果你在做 C++，`vector<vector<char> >`会提供一个更好、更灵活的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T03:53:20.263

除非它是`sizeof`或一元运算符的操作数`&`，或者是用于在声明中初始化另一个数组的字符串文字，否则“N-element array of `T`”类型的表达式将被转换为/替换为/“衰减”为类型为“pointer to `T`”的表达式，其值是数组中第一个元素的地址。

如果您将函数称为

```
setPosition(grid, 10, 5); 
```

该表达式`grid`将具有 type `char [1000][1000]`，根据上面的规则，它将被替换为 type 的表达式`char (*)[1000]`，因此您的函数原型需要是

```
void setPosition(char (*grid)[1000], int a, int b) { ... } 
```

或者

```
void setPosition(char grid[][1000], int a, int b) { ... } 
```

在这种情况下是一样的。

如果您将函数称为

```
setPosition(&grid, 10, 5); 
```

那么表达式`&grid`有类型`char (*)[1000][1000]`，所以你的函数原型需要是

```
void setPosition(char (*grid)[1000][1000], int a, int b) { ... } 
```

并且您需要`grid`在应用任何下标之前显式取消引用，如

```
(*grid)[a][b] = ...; 
```

# mysql - 如何为每个 GROUP BY 集返回多个结果？

> ID：10133778
> 
> 赞同：2
> 
> 时间：2012-04-13T00:33:47.877
> 
> 标签：mysql, sql

我的数据库中有 3 个表：

1.  员工日志

2.  工作日志

3.  船员日志

创建新工作时，会为其分配一名员工，因此会在“crew_log”表中创建一个条目。

我想要做的是获取每个具有 type=2 属性（意味着他们是主管）（来自employee_log）的员工，然后将其加入到查询中。

每个员工在“crew_log”中可以有多个活动工作，因此目标是在数组中返回该员工的所有活动工作。

到目前为止，我的查询如下所示：

```
SELECT el.id, cl.job_id
FROM employee_log AS el
JOIN crew_log AS cl
    ON el.id=cl.employee_id
    AND cl.start_date >= CURDATE()
WHERE el.type=2
GROUP BY cl.employee_id 
```

这当然是不正确的，但也许它有助于形象化我的问题。

我当然可以用另一种方式做到这一点......但我试图做的一切都是一个 SQL 查询，既能提高性能，又能学习一些关于 SQL 的新知识。

另一种方法是让我使用两个 while 循环。第一个循环将获取 type=2 的每个员工，然后在该循​​环中我将执行另一个 SQL 查询来获取该员工的所有活动作业。

必须有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T00:44:38.230

您的查询看起来是正确的，只是您不需要 ，`GROUP BY`因为您没有任何聚合函数 ( `SUM(), COUNT(), AVG()`) 将其替换为 an`ORDER BY`以对员工 ID 进行排序。

```
SELECT el.id, cl.job_id
FROM 
  employee_log AS el
  LEFT JOIN crew_log AS cl
    ON el.id=cl.employee_id
WHERE 
  el.type=2
  AND cl.start_date >= CURDATE()
ORDER BY el.id 
```

我还`JOIN`用 a替换了你的，`LEFT JOIN`这样没有记录的员工就不会`crew_log`被排除在查询之外。

# mbunit - mbunit gallio 在使用 Parallelizable 时会忽略测试顺序吗？

> ID：10133781
> 
> 赞同：2
> 
> 时间：2012-04-13T00:34:12.353
> 
> 标签：mbunit, gallio

我们将 mbunit gallio 与 [TestFixture, Parallelizable] 测试装置和 [Test(Order = X), Parallelizable] 测试属性一起使用，除了测试顺序被有效忽略之外，无论我们应用什么 X 值，它都可以正常工作，这只是没有似乎会影响执行测试的顺序。我们在这里做错了什么，使用 [Test(Order)] 是否有任何特殊技巧，或者可能是因为我们正在使用 Parallelizable ？

例子：

```
 [TestFixture, Parallelizable]
    public class SignUpTests : BaseTest
    {

    [Test(Order = 2), Parallelizable]
    public void SignUpProcessShouldBeEndedWithConfirmationPageAndWelcomeEmailSent()
    {
        blah-blah-blah;
        blah-blah-blah;
    }

    // we expect this test to be executed before SignUpProcessShouldBeEndedWithConfirmationPageAndWelcomeEmailSent()
    // but it's not the case
    [Test(Order = 1), Parallelizable]
    public void SignUpProcessShouldCompleteAndProvisionedServicesStatusUpdated()
    {
        blah-blah-blah;
        blah-blah-blah;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T06:59:58.543

试试 DependsOn 属性，说“测试用例 1”依赖于“测试用例 2”，测试用例 2 将首先执行，然后测试用例 1 将被执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-21T08:23:04.923

```
Include 'MbUnit.Framework.TestSequence(1)' and use ProcessTextFixture instead  of TextFixture.
  [ProcessTextFixture]
 public class TestSequeunce
{

    [MbUnit.Framework.TestSequence(1)]
    [TEST]
    public void TestMethod1()
    {
    }

    [MbUnit.Framework.TestSequence(2)]
    [TEST]
    public void TestMethod1()
    {
    }`enter code here`
} 
```

# c++ - XCheckWindowEvent 不返回 ClientMessage 事件

> ID：10133782
> 
> 赞同：3
> 
> 时间：2012-04-13T00:34:22.723
> 
> 标签：c++, c, x11

我正在玩 xlib，我有这样的东西可以在窗口/子窗口的基础上检查事件：

```
// Dispatch X11 events in a more friendly format
static inline bool xwin_event(xwin_t *xwin, event_t *evt) {
    XEvent event;
    if (!XCheckWindowEvent(xwin->xconn->dpy, xwin->window, 0xFFFFFFFF, &event)) {
        return false;
    }

    if (event.type == ClientMessage) {
        printf("Got event, wid: %i\n", event.xany.window);
    }
} 
```

我循环调用。我正在建造我的窗户：

```
// Define events we want
XSelectInput(xconn->dpy, xwin->window,
             KeyPressMask        | 
             ButtonPressMask     | ButtonReleaseMask |
             EnterWindowMask     | LeaveWindowMask   |
             PointerMotionMask   | ExposureMask      |
             StructureNotifyMask | SubstructureNotifyMask);

// Grab some window manager events
xwin->proto = XInternAtom(xconn->dpy, "WM_PROTOCOLS",     1);
xwin->close = XInternAtom(xconn->dpy, "WM_DELETE_WINDOW", 0);
XSetWMProtocols(xconn->dpy, xwin->window, &xwin->close, 1); 
```

出于某种原因，我从来没有看到任何 ClientMessage 事件从队列中出来。如果我检查这样的事情（这不允许我按窗口过滤）：

```
if (!XPending(xwin->xconn->dpy)) {
    return false;
}

XNextEvent(xwin->xconn->dpy, &event); 
```

它通过就好了。这是一个已知的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T08:29:30.537

是的，手册页`XCheckWindowEvent`明确表示

> XCheckWindowEvent() 不能返回 ClientMessage、MappingNotify、SelectionClear、SelectionNotify 或 SelectionRequest 事件，因为这些事件类型根据定义是不可屏蔽的。

# ruby-on-rails-3 - 如何在 twitter-bootstrap 中更改 textarea 的 cols？

> ID：10133783
> 
> 赞同：65
> 
> 时间：2012-04-13T00:34:25.547
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

如果我更改 :rows 的值，它会起作用。但无论我用 ':cols =>' 设置什么值，它都会保持默认值。列宽不会改变。

我查看了 html 源代码，它反映了变化。我想知道引导程序的 CSS 可能是嫌疑人......

HTML（最终的 HTML 中有一个“cols=”，但列宽保持在默认值，即 30。我不敢相信自己的眼睛！）

```
<textarea cols="100" id="comment_body" name="comment[body]" rows="5"></textarea> 
```

导轨：

```
<%= form_for([@post, @post.comments.build]) do |f| %>
  <div class="field">
    <i class="icon-user"></i>
    <%= f.text_field :commenter %>
  </div>
  <div class="field">
    <i class="icon-comment"></i>
    <%= f.text_area :body, :rows => 5, :cols => 100 %>
  </div>
  <div class="actions">
    <%= f.submit %>
  <div> 
<% end %> 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-05-29T11:58:36.590

其他答案对我不起作用。这做到了：

```
 <div class="span6">
      <h2>Document</h2>
        </p>
        <textarea class="field span12" id="textarea" rows="6" placeholder="Enter a short synopsis"></textarea>
        <button class="btn">Upload</button>
    </div> 
```

注意`span12`div 中的`span6`.

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-11-19T23:27:31.430

**更新：**从 Bootstrap 3.0 开始，`input-*`删除了下面描述的用于设置输入元素宽度的类。而是使用`col-*`类来设置输入元素的宽度。[文档中提供了示例](http://getbootstrap.com/css/#forms-control-sizes)。

* * *

在 Bootstrap 2.3 中，您将使用输入类来设置宽度。

```
<textarea class="input-mini"></textarea>
<textarea class="input-small"></textarea>
<textarea class="input-medium"></textarea>
<textarea class="input-large"></textarea>
<textarea class="input-xlarge"></textarea>
<textarea class="input-xxlarge"></textarea>​
<textarea class="input-block-level"></textarea>​ 
```

[为文档中的示例](http://getbootstrap.com/2.3.2/base-css.html#forms)查找“控制大小” 。

但是对于高度，我认为您仍然会使用 rows 属性。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-12-07T14:31:58.177

只需将引导程序“row-fluid”类添加到 textarea。它将拉伸到 100% 宽度；

更新：对于 bootstrap 3.x，对 textarea 使用“col-xs-12”类；

更新二：此外，如果您想将容器扩展到全宽，请使用：container-fluid 类。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-02-16T06:06:46.600

我在VS2013生成的site.css中发现了以下内容

```
/* Set width on the form input elements since they're 100% wide by default */
input,
select,
textarea {
    max-width: 280px;
} 
```

要在特定元素中覆盖此行为，请添加以下内容...

```
 style="max-width: none;" 
```

例如：

```
 <div class="col-md-6">
      <textarea style="max-width: none;" 
                class="form-control" 
                placeholder="a col-md-6 multiline input box" />
 </div> 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-10-24T14:54:00.480

我不知道这是否是正确的方法，但是我这样做了：

```
<div class="control-group">
  <label class="control-label" for="id1">Label:</label>
  <div class="controls">
    <textarea id="id1" class="textareawidth" rows="10" name="anyname">value</textarea>
  </div>
</div> 
```

并将其放入我的 bootstrapcustom.css 文件中：

```
@media (min-width: 768px) {
    .textareawidth {
        width:500px;
    }
}
@media (max-width: 767px) {
    .textareawidth {

    }
} 
```

这样它会根据视口调整大小。似乎可以在大型浏览器和小型移动设备上很好地排列所有内容。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-24T09:53:16.817

这适用于 twitter bootstrap 2 和 simple_form 2.0.4
结果是 span9 行中的 span6 文本区域

```
 <div class="row" >
   <div class="span9">
     <%= f.input :some_text, :input_html => {:rows => 5, :placeholder => "Enter some text.", :class => "span6"}%>
   </div>
 </div> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-31T17:18:13.263

另一种选择是拆分 Site.css 中的文本区域，如下所示：

```
/* Set width on the form input elements since they're 100% wide by default */

input,
select {

  max-width: 280px;
}

textarea {

  /*max-width: 280px;*/
  max-width: 500px;
  width: 280px;
  height: 200px;
} 
```

还（在我的 MVC 5 中）将 ref 添加到 textarea：

```
@Html.TextAreaFor(model => ................... @class = "form-control", @id="textarea"............ 
```

它对我有用

# vb.net - 我如何输出与所选索引关联的字符串...我的输出是所选索引整数（我不想要这个）

> ID：10133786
> 
> 赞同：1
> 
> 时间：2012-04-13T00:34:54.853
> 
> 标签：vb.net

我是学生，请多多包涵……以下是我的代码：

```
Private Sub cboYear_SelectedIndexChanged(ByVal sender As System.Object, 
 ByVal e As System.EventArgs) Handles cboYear.SelectedIndexChanged

  'declare variables
  Dim intSelectedYear As Integer
  Dim intNumhUUR As Integer

  'select year from combobox
  intSelectedYear = cboYear.SelectedIndex

  ' get number of hurricanes for selected year from number 
  ' of hurricanes array 
  intNumhUUR = _intNumberOfHurricanes(intSelectedYear)

  'and display in label
  lblNumberOfHurricanes.Visible = True
  lblNumberOfHurricanes.Text = "The number of Hurricanes " &
    "in the year " & intSelectedYear.ToString & "  is " & 
    intNumhUUR.ToString()
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T00:44:20.663

您需要使用`SelectedItem`组合框的属性来获取当前在该`SelectedIndex`位置选择的项目。IE：

```
Private Sub cboYear_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cboYear.SelectedIndexChanged
  'declare variables
  Dim intSelectedIndex As Integer
  Dim intNumhUUR As Integer
  Dim strSelectedYear As String

  'select year from combobox
  intSelectedIndex = cboYear.SelectedIndex
  strSelectedYear = cboYear.SelectedItem.ToString()
  ' get number of hurricanes for selected year from number 
  ' of hurricanes array 
  intNumhUUR = _intNumberOfHurricanes(intSelectedIndex)

  'and display in label
  lblNumberOfHurricanes.Visible = True
  lblNumberOfHurricanes.Text = string.Format("The number of Hurricanes in the year {0} is {1}", strSelectedYEar, intNumhUUR)
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T00:46:10.040

cboYear 是下拉列表吗？我认为 cboYear.SelectedValue 会给你字符串，或者你可以试试 cboYear.Items[cboYear.SelectedIndex].Text

# c# - 将 SelectByText（部分）与 C# Selenium WebDriver 绑定一起使用似乎不起作用

> ID：10133790
> 
> 赞同：7
> 
> 时间：2012-04-13T00:35:25.063
> 
> 标签：c#, .net, selenium, webdriver, selenium-webdriver

我在 C# 中使用 Selenium WebDriver Extensions 通过部分文本值从选择列表中选择一个值（实际前面有一个空格）。我无法使用部分文本匹配来使其工作。我做错了什么还是这是一个错误？

可重现的例子：

```
using Microsoft.VisualStudio.TestTools.UnitTesting;
using OpenQA.Selenium;
using OpenQA.Selenium.Firefox;
using OpenQA.Selenium.Support.UI;

namespace AutomatedTests
{
    [TestClass]
    public class UnitTest1
    {
        [TestMethod]
        public void TestMethod1()
        {
            var driver = new FirefoxDriver();
            driver.Navigate().GoToUrl("http://code.google.com/p/selenium/downloads/list");
            var selectList = new SelectElement(driver.FindElement(By.Id("can")));
            selectList.SelectByText("Featured downloads");
            Assert.AreEqual(" Featured downloads", selectList.SelectedOption.Text);
            selectList.SelectByValue("4");
            Assert.AreEqual("Deprecated downloads", selectList.SelectedOption.Text);
            driver.Quit();
        }
    }
} 
```

提供错误： `OpenQA.Selenium.NoSuchElementException: Cannot locate element with text: Featured downloads`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T01:14:56.050

SelectByText方法被破坏*了*，所以我编写了自己的扩展方法*SelectBySubText*来完成它应该做的事情。

```
using System.Linq;
using OpenQA.Selenium;
using OpenQA.Selenium.Support.UI;

namespace AutomatedTests.Extensions
{
    public static class WebElementExtensions
    {
        public static void SelectBySubText(this SelectElement me, string subText)
        {
            foreach (var option in me.Options.Where(option => option.Text.Contains(subText)))
            {
                option.Click();
                return;
            }
            me.SelectByText(subText);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:16:29.883

如果您可以在一个简单的 HTML 页面中重现该问题，那么您绝对应该提交一份错误报告。

首先查看[源代码](http://code.google.com/p/selenium/source/browse/trunk/dotnet/src/WebDriver.Support/UI/SelectElement.cs) `SelectByText`：

```
FindElements(By.XPath(".//option[normalize-space(.) = " + EscapeQuotes(text) + "]")) 
```

如果它没有找到任何东西，那么这样做：

```
string substringWithoutSpace = GetLongestSubstringWithoutSpace(text);
FindElements(By.XPath(".//option[contains(., " + EscapeQuotes(substringWithoutSpace) + ")]")) 
```

所以理论上它应该工作。您也可以自己使用 XPath，看看是否可以让它在您的情况下工作。

# perl - 如何在可用时从标准输入读取行（否则阻止）？

> ID：10133801
> 
> 赞同：1
> 
> 时间：2012-04-13T00:36:36.157
> 
> 标签：perl, unix, named-pipes

在下面的代码中`p00`是一个命名管道，使用`mkfifo p00`.

在控制台 1 中，我运行：

```
% perl -ne 'print "PERL: $_"' < p00 
```

然后，虽然上面被阻止（如预期的那样），但在控制台 2 中我跑了

```
% seq 3 > p00 
```

结果，控制台1中出现了以下内容：

```
PERL: 1
PERL: 2
PERL: 3
% 
```

这*几乎*是我希望达到的结果，除了`perl`脚本在打印第三行后终止。

> 我希望脚本在它们可用时继续回显行（以“PERL：”*为前缀），否则***阻止**。

上述单线的以下变体表面上*类似于*所需的行为：

```
perl -e 'while ( 1 ) { print "PERL: $_" while <>; sleep 1 }' < p00 
```

...但这不是真正的交易，因为它在等待输入时不会阻塞，也不会在输入可用时立即回显它。

笔记：

1.  这个问题背后的动机是教育（就是我的），仅此而已；我不是要解决任何实际问题；我只是想学习更多 perl（和 unix）。
2.  我不确定这个问题是否更适合 unix.se.com；如果是的话，我很乐意在那里重新发布它；让我知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:22:25.453

在阅读了 Maxim Yegorushkin 的评论后，我意识到我所要做的就是摆脱`sleep 1`第二个版本中的 。即，这正是我想要的：

```
perl -e 'while ( 1 ) { print "PERL: $_" while <> }' < p00 
```

`EOF`正如 Maxim 所写，内部循环在接收到;时终止。然后外循环将脚本返回到阻塞状态，等待输入……Doh！

# python - Python：如何在正则表达式中使用“或”？

> ID：10133808
> 
> 赞同：0
> 
> 时间：2012-04-13T00:37:41.760
> 
> 标签：python, regex

我有以下文字：

```
text='apples and oranges apples and grapes apples and lemons' 
```

我想使用正则表达式来实现如下所示：

“苹果和橘子”

“苹果和柠檬”

我试过这个`re.findall('apples and (oranges|lemons)',text)`，但它不起作用。

**更新：**如果 'oranges' 和 'lemons' 是一个列表 : `new_list=['oranges','lemons']`，我怎么能去 (?:'oranges'|'lemons') 而不再次输入它们？

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T00:43:21.210

`re.findall()`：如果模式中存在一个或多个组，则返回组列表；如果模式有多个组，这将是一个元组列表。

试试这个：

```
re.findall('apples and (?:oranges|lemons)',text) 
```

`(?:...)`是正则括号的非捕获版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T00:45:21.683

你所描述的应该工作：

在 example.py 中：

```
import re
pattern = 'apples and (oranges|lemons)'
text = "apples and oranges"
print re.findall(pattern, text)
text = "apples and lemons"
print re.findall(pattern, text)
text = "apples and chainsaws"
print re.findall(pattern, text) 
```

运行`python example.py`：

```
['oranges']
['lemons']
[] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T00:43:20.057

您是否尝试过非捕获组`re.search('apples and (?:oranges|lemons)',text)`？

# javascript - 脚本 CDN 使用、隐私和成本

> ID：10133816
> 
> 赞同：10
> 
> 时间：2012-04-13T00:38:24.157
> 
> 标签：javascript, html, http, cdn

如果我将来自谷歌 CDN 的 jQuery 与客户网站上的 html 页面中的脚本标签链接起来，这对隐私有什么影响？

使用这些 CDN 服务的隐藏成本是多少？如果脚本没有被浏览器缓存并且它从谷歌加载脚本，谷歌可能会对这些信息做什么？它能否与搜索、分析或 Adsense 等其他服务一起有效地推断？没有什么是免费的，有什么问题？

和奖金问题....

如果脚本已经被浏览器缓存（304），浏览器是否仍然发出远程请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T01:19:37.247

304*是*作为***请求结果的响应***。这是一个请求，其中包含有关它发出的最后一个请求的信息并得到一个 200，服务器或者从该请求中回复，`200 OK`这是新的东西，或者`304 Not Modified`然后在那里结束它（带有一些 HTTP 标头以便很好地衡量）。

但事实是，如果响应配置正确，浏览器甚至可能不会发出请求。我不知道头顶的标题，所以我只是通过浏览器浏览了 jquery 1.7.2 的 google CDN 请求。

```
HTTP/1.1 304 Not Modified
Date: Wed, 11 Apr 2012 15:01:19 GMT
Expires: Thu, 11 Apr 2013 15:01:19 GMT
Age: 122140
Server: GFE/2.0 
```

因此，您可以看到它设置为 1 年后到期。我尝试将其作为本地 html 编辑器/网页页面中脚本的源，并且使用 Fiddler2，可以看到没有发出任何请求。现在，如果我再次浏览我的浏览器，我将收到相同的请求，但不是在我的编辑器中。

隐私方面，我不确定是否存在问题。如果 CDN 出现问题，当然，可能会有一些问题，当然也可能存在中间人攻击等，但如果这是您的担忧，那么无论如何您都应该使用 HTTPS。CDN 通常也提供 HTTPS。

依赖 CDN 的最大缺点是由于网络故障，您的客户端可能无法访问 CDN。所以提供备份总是好的。

这是一个例子：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">
    if (typeof jQuery == 'undefined') {
        document.write(unescape('%3Cscript src="/local/path/to/jQuery/jquery.1.7.1.min.js" type="text/javascript"%3E%3C/script%3E'));
    }
</script> 
```

# ipv4 - 是否有任何文档可以在 IPv4 地址的点十进制表示法中省略零？

> ID：10133820
> 
> 赞同：12
> 
> 时间：2012-04-13T00:39:00.037
> 
> 标签：ipv4, rfc

我注意到 Linux 和 *BSD 系统允许用户在使用点十进制表示法时跳过八位字节。

这里有些例子：

```
$ ping 10.1
PING 10.1 (10.0.0.1) 56(84) bytes of data.

$ ping 10.15.1
PING 10.15.1 (10.15.0.1) 56(84) bytes of data. 
```

请注意，这不仅限于 ping 命令。

我找到了定义 IPv4 的文本表示的文档，但它似乎没有涵盖该功能：[Textual Representation of IPv4 and IPv6 Addresses](https://datatracker.ietf.org/doc/html/draft-main-ipaddr-text-rep-00)。

是否有任何其他文件定义了这种行为？这种行为有特定的名称吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T15:45:14.803

请参见[`inet_aton()`手册页](https://linux.die.net/man/3/inet_aton)。最后一部分是表示地址中剩余位内容的数值，即 24 位 `y`in`x.y`和 16 位 `z`in `x.y.z`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-15T19:27:41.647

缩写前缀。

[https://www.rfc-editor.org/rfc/rfc3779](https://www.rfc-editor.org/rfc/rfc3779)

> 前缀 - 由地址的一些初始位组成的位串，写为地址后跟“/”，以及初始位的数量。10.5.0.0/16 和 2001:0:200:3:0:0:0:0/64（或 2001:0:200:3::/64）是前缀的示例。前缀通常通过省略不太重要的零字段来缩写，但应该有足够的字段来包含指定数量的初始位。10.5/16 和 2001:0:200:3/64 是缩写前缀的示例。

# socket.io - 如何在客户端捕获服务器故障？

> ID：10133826
> 
> 赞同：4
> 
> 时间：2012-04-13T00:39:39.090
> 
> 标签：socket.io

在`socket.io`，当服务器关闭时，客户端尝试重新连接到服务器并收到错误`GET http:/localhost:8181/socket.io/1/?t=1334276656018`，这显然是因为服务器没有运行并且无法提供与客户端的连接。

有没有办法在客户端捕获这个错误？在这种情况下，类似的东西`socket.on("error", function(...){});`会非常方便......

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T00:50:23.377

抱歉打扰了..我找到了解决方案：

```
 socket.on('disconnect', function(){
        HANDLE HERE
    }); 
```

# git - 是否可以确定谁的代码（根据 `git blame`）受到 `git diff` 的每个大块输出的影响？

> ID：10133831
> 
> 赞同：12
> 
> 时间：2012-04-13T00:40:40.077
> 
> 标签：git

我有一个大的跨领域提交，我想根据其代码受到影响的作者进行拆分，以增加审阅者对他们正在审阅的代码的熟悉度，并公平地分配审阅负担。

我意识到责任可能混合在给定的大块头中，在这种情况下，最好收集多个评论者或只选择最“值得指责”的评论者（任意打破关系很好）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T17:26:11.323

有趣的问题。我无法简单地使用 git-flags 找到任何解决方案，但是一些快速的谷歌搜索让我找到了这个实用程序：[git-diff-blame](https://github.com/toddlipcon/tlipcon-bin/blob/master/git-diff-blame)。（工具不是我写的）

它显示实际的帅哥 + 帅哥中每一行的“责备”行。

# c++ - 使用 tr1 在 C++ 中生成超出范围的随机数

> ID：10133832
> 
> 赞同：2
> 
> 时间：2012-04-13T00:40:46.327
> 
> 标签：c++, random, c++11, tr1, uniform

我正在尝试从 [0, 1) 范围内的实数均匀分布中生成数字。但是编译器正在生成超出 [0, 1) 范围的数字。

这是代码：

```
int main(void) {
    // Solver solve;

    mt19937 mteng;
    mteng.seed(rdtsc());
    uniform_real<double> uniRealD;

    double randomNum;

    for (int index = 0; index < 10; index++){
        randomNum = uniRealD(mteng);

        if(randomNum<0.5)
            cout<<index<<" no. random number is: "<<randomNum<<endl;
        else
            cout<<"number generate is not in range"<<endl;
    }

    return 0;
} 
```

关于代码可能有什么问题的任何评论？我`rdtsc()`用作种子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T01:09:07.850

你的代码不应该那样做。可能是实现中的一个错误。什么编译器和库版本？尝试从 tr1 迁移到 C++11。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T01:22:11.910

我不得不去掉你的种子函数，`rdtsc()`做一些包含，引入 a `using namespace std`，并将 a 0.5 更改为 1.0，然后更改`uniform_real`为`uniform_real_distribution`，但在那之后，使用 libc++，我得到：

```
#include <random>
#include <iostream>

using namespace std;

int main(void) {
    // Solver solve;

    mt19937 mteng;
    mteng.seed(0);
    uniform_real_distribution<double> uniRealD;

    double randomNum;

    for (int index = 0; index < 10; index++){
        randomNum = uniRealD(mteng);

        if(randomNum<1.0)
            cout<<index<<" no. random number is: "<<randomNum<<endl;
        else
            cout<<"number generate is not in range"<<endl;
    }

    return 0;
}

0 no. random number is: 0.592845
1 no. random number is: 0.844266
2 no. random number is: 0.857946
3 no. random number is: 0.847252
4 no. random number is: 0.623564
5 no. random number is: 0.384382
6 no. random number is: 0.297535
7 no. random number is: 0.056713
8 no. random number is: 0.272656
9 no. random number is: 0.477665 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T00:44:29.427

```
 if(randomNum<0.5)
        cout<<index<<" no. random number is: "<<randomNum<<endl;
    else
        cout<<"number generate is not in range"<<endl; 
```

`if`将语句更改为`if(randomNum < 1.)`

# javascript - 将外部页面加载到叠加层中

> ID：10133834
> 
> 赞同：-2
> 
> 时间：2012-04-13T00:41:06.840
> 
> 标签：javascript, jquery, jquery-tools

我在以下代码中遇到问题，该代码用于在用户单击按钮时将外部页面加载到覆盖中

```
 <!DOCTYPE html>
        <html>
            <head>
                <title>jQuery Tools standalone demo</title>

                <script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script>

                <style>

                    /* the overlayed element */
                    .apple_overlay {

                        /* initially overlay is hidden */
                        display:none;

                        /* growing background image */
                        background-image:url(images/white.png);

                        /*
                          width after the growing animation finishes
                          height is automatically calculated
                        */
                        width:640px;

                        /* some padding to layout nested elements nicely  */
                        padding:35px;

                        /* a little styling */
                        font-size:11px;
                    }

                    /* default close button positioned on upper right corner */
                    .apple_overlay .close {
                        background-image:url(images/close.png);
                        position:absolute; right:5px; top:5px;
                        cursor:pointer;
                        height:35px;
                        width:35px;
                    }
                </style>
            </head>

            <body>
                <!-- external page is given in the href attribute (as it should be) -->
                <a href="http://www.facebook.com/" rel="#overlay" style="text-decoration:none">
                    <!-- remember that you can use any element inside the trigger -->
                    <button type="button">Show external page in overlay</button>
                </a>

                <!-- another link. uses the same overlay -->
                <a href="http://jquerytools.org/demos/overlay/external-content.htm" rel="#overlay" style="text-decoration:none">
                    <button type="button">Show another page</button>
                </a>

                <!-- overlayed element -->
                <div class="apple_overlay" id="overlay">
                    <!-- the external content is loaded inside this tag -->
                    <div class="contentWrap"></div>
                </div>

                <!-- make all links with the 'rel' attribute open overlays -->
                <script>
                    $(function() {

                        // if the function argument is given to overlay,
                        // it is assumed to be the onBeforeLoad event listener
                        $("a[rel]").overlay({

                            mask: 'darkred',
                            effect: 'apple',

                            onBeforeLoad: function() {

                                // grab wrapper element inside content
                                var wrap = this.getOverlay().find(".contentWrap");

                                // load the page specified in the trigger
                                wrap.load(this.getTrigger().attr("href"));
                            }

                        });
                    });
                </script>
            </body>
        </html> 
```

此代码取自[http://jquerytools.org/demos/overlay/external.html](http://jquerytools.org/demos/overlay/external.html) 有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T00:49:28.330

来自[jQuery 文档](http://api.jquery.com/load/)：

> 由于浏览器安全限制，大部分“Ajax”请求都受同源策略的约束；请求无法从不同的域、子域或协议成功检索数据。

# jquery - jQuery：获取输入字段的值

> ID：10133836
> 
> 赞同：1
> 
> 时间：2012-04-13T00:41:23.677
> 
> 标签：jquery

对于您的 jQuery 专家来说，这应该是不费吹灰之力。

我有一个具有动态标记字段的表单。

前任。

```
<input id="user_394783" type="hidden" value="3"> 
```

在我的脚本中，我的 ID 为 394783，我正在尝试将其附加到“user_”

所以，我正在尝试这个：

```
var userID = 394783;
$("#user_"+userID).val(); 
```

和

```
var userID = "user_"+ 394783;
$("#"+userID).val(); 
```

但是，这是行不通的。如何连接值并让 jQuery 识别我的连接？

谢谢jQuery大神！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T00:46:02.600

这两种方法都有效：http: [//jsfiddle.net/my9vc/](http://jsfiddle.net/my9vc/)

因此，肯定有其他问题。检查以下内容：

*   jQuery 库是否正确加载？
*   当您尝试获取值时，该字段是否存在？换句话说，您是否至少要等到文档准备好或加载？
*   您的脚本中的其他地方是否存在阻止此代码运行的错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T00:47:33.417

```
var userID = 394783; 
userID += '';
$("#user_"+userID).val(); 
```

你的值需要变成一个字符串。我有同样的问题。

# snort - 如何启动 Snort 软件？

> ID：10133840
> 
> 赞同：-3
> 
> 时间：2012-04-13T00:41:59.873
> 
> 标签：snort

我对打鼾很陌生。我已将 Snort 下载到 Windows 7 上，我想运行它吗？我在 Windows 7 的计算机文件夹中的 Snort 安装文件夹中打开了 snort.exe 文件。我将其作为命令提示符运行？对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:49:36.923

Snort 通常从 CLI 运行（就像在 cmd 中键入“snort”一样简单），当它成功启动时，您应该会看到有关版本、（运行）模式、规则引擎和预处理器的消息。

这是在 Windows 7 上安装和运行 Snort 的链接 - [http://www.snort.org/assets/151/Installing_Snort_2.8.6.1_on_Windows_7.pdf](http://www.snort.org/assets/151/Installing_Snort_2.8.6.1_on_Windows_7.pdf)。

Snort 是为在 Linux 上运行而设计的，但我不相信他们在任何地方都花太多时间在 Windows 平台上进行开发。

# c# - ASP.NET MVC 查询部署的应用程序服务器地址而不是在请求中

> ID：10133841
> 
> 赞同：2
> 
> 时间：2012-04-13T00:42:01.913
> 
> 标签：c#, asp.net-mvc, url, httpcontext

这个问题看起来像[另一个问题](https://stackoverflow.com/questions/2916092/asp-net-mvc-deployed-application-server-address)不是吗？略有不同。我想在进行初始设置（在应用程序启动中）时知道服务器的部署地址，当时没有请求：

```
HttpContext.Current.Request 
```

所以我无法查询它来获取当前的 URL。还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:07:44.577

查看[HostingEnvironment](http://msdn.microsoft.com/en-us/library/system.web.hosting.hostingenvironment.aspx)类。如果课程中没有您需要的信息，您也可以查看[以下文章](http://weblogs.asp.net/reganschroder/archive/2008/07/25/iis7-integrated-mode-request-is-not-available-in-this-context-exception-in-application-start.aspx)`HostingEnvironment`。在本文中，作者在`Application_BeginRequest`方法中执行初始化逻辑，而不是`Application_Start`. 它使用一个锁来确保这个初始化只执行一次：

```
void Application_BeginRequest(Object source, EventArgs e)
{

    HttpApplication app = (HttpApplication)source;
    HttpContext context = app.Context;

    // Attempt to peform first request initialization

    FirstRequestInitialization.Initialize(context);
} 
```

这是`FirstRequestInitialization`课程：

```
class FirstRequestInitialization
{
    private static bool s_InitializedAlready = false;
    private static Object s_lock = new Object();

    // Initialize only on the first request

    public static void Initialize(HttpContext context)
    {
        if (s_InitializedAlready)
        {
            return;
        }

        lock (s_lock)
        {
            if (s_InitializedAlready)
            {
                return;
            }

            // Perform first-request initialization here ...

            s_InitializedAlready = true;
        }
    }
} 
```

# wordpress - wordpress query_posts 归档问题

> ID：10133845
> 
> 赞同：1
> 
> 时间：2012-04-13T00:43:11.040
> 
> 标签：wordpress, archive, posts

我想让我在每个类别中的所有帖子都根据其分数下降（使用 GD 星级插件）。我在插件站点中发现，我需要添加`query_posts("gdsr_sort=rating");`到我的archive.php 文件中。

这就是我的 archive.php 添加了 query_posts 后的样子：

```
 <?php query_posts("gdsr_sort=rating"); ?>
<?php while (have_posts()) : the_post(); ?>
    <div <?php post_class() ?>><li>
        <h1><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h1>

        <?php if ( has_post_thumbnail() ) : ?>
            <a href="<?php the_permalink() ?>"><?php the_post_thumbnail(); ?></a>
        <?php endif; ?>

        <?php the_content('Read more...'); ?>
    </li>
    </div>
    <?php endwhile; ?>
        <div class="clear"></div>
    <?php wp_reset_query(); ?> 
```

它把事情搞砸了，所以我尝试使用`query_posts('posts_per_page=5');` 好处是它每页显示 5 篇文章。坏事是它显示了错误的文章。准确地说，无论我去哪个子类别……都会显示相同的文章，这些文章不应该在那个子类别中。当您转到下一页时.. 正在显示相同的文章。这些随处可见的文章仅属于 1 个子类别。我还应该提到，我有 10 个类别，每个类别都有 2-3 个子类别。

我在这里不知所措，希望您理解我的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T01:08:53.247

您可以修改 wordpress 查询，而不是进行新查询。我不知道您使用的插件，但我认为这应该可以工作：

```
function change_archive_query( $query ) {
    if ( $query->is_main_query() && $query->is_archive()) {
         $query->set( 'gdsr_sort', 'rating' );
    }
}
add_action( 'pre_get_posts', 'change_archive_query' ); 
```

你可以把它放在你的functions.php中。在 archive.php 你可以删除 query_posts

# python - 如何在 Tkinter 中添加图像？

> ID：10133856
> 
> 赞同：40
> 
> 时间：2012-04-13T00:44:19.260
> 
> 标签：python, user-interface, tkinter

如何在 Tkinter 中添加图像？

这给了我一个语法错误：

```
root = tk.Tk()
img = ImageTk.PhotoImage(Image.open(path))
panel = tk.Label(root, image = img)
panel.pack(side = "bottom", fill = "both", expand = "yes")
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-05-14T06:29:21.057

2013 年 5 月 14 日 win32 上的 Python 3.3.1 [MSC v.1600 32 位（英特尔）]

按照上面的代码，这对我有用

```
from tkinter import *
from PIL import ImageTk, Image
import os

root = Tk()
img = ImageTk.PhotoImage(Image.open("True1.gif"))
panel = Label(root, image = img)
panel.pack(side = "bottom", fill = "both", expand = "yes")
root.mainloop() 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-13T02:56:35.470

上面的代码中没有“语法错误”——它要么发生在其他行（上面不是你的所有代码，因为没有导入，也没有你的`path`变量的声明），或者你得到了一些其他错误类型。

上面的例子对我来说很好，在交互式解释器上进行测试。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-04-20T02:17:31.530

这是 Python 3 的示例，您可以针对 Python 2 进行编辑；）

```
from tkinter import *
from PIL import ImageTk, Image
from tkinter import filedialog
import os

root = Tk()
root.geometry("550x300+300+150")
root.resizable(width=True, height=True)

def openfn():
    filename = filedialog.askopenfilename(title='open')
    return filename
def open_img():
    x = openfn()
    img = Image.open(x)
    img = img.resize((250, 250), Image.ANTIALIAS)
    img = ImageTk.PhotoImage(img)
    panel = Label(root, image=img)
    panel.image = img
    panel.pack()

btn = Button(root, text='open image', command=open_img).pack()

root.mainloop() 
```

[![在此处输入图像描述](../Images/69875d0d0abc08db29baeddf5900aa7b.png)](https://i.stack.imgur.com/HWNMM.png)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-17T06:50:13.413

以下代码适用于我的机器

1.  您的代码中可能缺少某些内容。
2.  请同时检查代码文件的编码。
3.  确保你安装了 PIL 包

    ```
    import Tkinter as tk
    from PIL import ImageTk, Image

    path = 'C:/xxxx/xxxx.jpg'

    root = tk.Tk()
    img = ImageTk.PhotoImage(Image.open(path))
    panel = tk.Label(root, image = img)
    panel.pack(side = "bottom", fill = "both", expand = "yes")
    root.mainloop() 
    ```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-01-30T01:01:06.563

`path`根据文件指向的格式，您的实际代码可能会返回错误。话虽如此，该类已经支持某些图像格式，例如 .gif、.pgm（如果 tk.TkVersion >= 8.6 则为 .png）[`PhotoImage`](http://effbot.org/tkinterbook/photoimage.htm)。

下面是一个显示示例：

[![莲娜 (.png)](../Images/06336ffdbc8d285597cfcc9fb07a232f.png)](https://i.stack.imgur.com/IgD2r.png)

或者如果`tk.TkVersion < 8.6`：

[![莲娜 (.gif)](../Images/6b430eb44b8ef0339d73538043eb6922.png)](https://i.stack.imgur.com/sML82.gif)

```
try:                        # In order to be able to import tkinter for
    import tkinter as tk    # either in python 2 or in python 3
except ImportError:
    import Tkinter as tk

def download_images():
    # In order to fetch the image online
    try:
        import urllib.request as url
    except ImportError:
        import urllib as url
    url.urlretrieve("https://i.stack.imgur.com/IgD2r.png", "lenna.png")
    url.urlretrieve("https://i.stack.imgur.com/sML82.gif", "lenna.gif")

if __name__ == '__main__':
    download_images()
    root = tk.Tk()
    widget = tk.Label(root, compound='top')
    widget.lenna_image_png = tk.PhotoImage(file="lenna.png")
    widget.lenna_image_gif = tk.PhotoImage(file="lenna.gif")
    try:
        widget['text'] = "Lenna.png"
        widget['image'] = widget.lenna_image_png
    except:
        widget['text'] = "Lenna.gif"
        widget['image'] = widget.lenna_image_gif
    widget.pack()
    root.mainloop() 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-10-18T14:33:16.390

它不是 python 2.7 的标准库。因此，为了使它们正常工作，如果您使用的是 Python 2.7，您应该首先下载 PIL 库：直接下载链接：[http://effbot.org/downloads/PIL-1.1.7.win32-py2.7。 exe](http://effbot.org/downloads/PIL-1.1.7.win32-py2.7.exe) 安装后，请按照以下步骤操作：

1.  确保您的**script.py**与您要显示的**图像**位于***同一文件夹中。***
***   编辑你的**script.py**

    ```
    from Tkinter import *        
    from PIL import ImageTk, Image

    app_root = Tk()

    #Setting it up
    img = ImageTk.PhotoImage(Image.open("app.png"))

    #Displaying it
    imglabel = Label(app_root, image=img).grid(row=1, column=1)        

    app_root.mainloop() 
    ```** 

 **希望有帮助！

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-09-02T16:58:02.623

此代码对我有用，您还应该考虑该窗口中是否有任何其他按钮或标签并且您不使用`.place()`它将无法正常工作。

```
from Tkinter import*
from PIL import Image, ImageTk

img  = Image.open("path/x.png") 
photo=ImageTk.PhotoImage(img)
lab=Label(image=photo).place(x=50,y=50) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-11-02T17:54:31.893

这是一个Python版本问题。如果您使用的是最新的，那么您的旧语法将不起作用并给您此错误。请遵循@Josav09 的代码，你会没事的。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-07-02T15:49:05.940

只需将 jpg 格式的图像转换为 png 格式即可。它将 100% 工作。**

# php - 如何使用 php 登录 unix 帐户

> ID：10133866
> 
> 赞同：-4
> 
> 时间：2012-04-13T00:45:49.473
> 
> 标签：php, unix, login, account

我正在尝试为我网站上的用户创建 UNIX 帐户，但我不知道如何获取 php 来创建帐户或登录。我尝试了 shell_exec() 命令，但我不知道如何提供它是一个密码。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T00:49:16.680

虽然通过 HTTP 请求强制服务器允许 PHP 创建用户当然是可能的，但设置它是一个安全噩梦，我强烈建议不要这样做。您需要破坏现代 Linux 和 Unix 系统中内置的许多安全功能才能使其正常工作。

相反，我可能会通过运行一个频繁的 cron 作业来处理这个问题，该作业在您的数据库中查找新用户并通过 shell 脚本为他们创建一个 UNIX 帐户。

该脚本将：

*   查询数据库中最近几分钟创建的用户
*   运行`useradd`以创建他们的帐户
*   运行密码生成实用程序来设置他们的密码。

**当心：将有很多与此相关的维护。仅当您确定您了解潜在的安全和维护影响并且您真正信任您的用户时才进行此操作。**

您可能有很多很多未使用的 shell 帐户堆积如山。您需要一个定期清除/删除未使用的脚本。您可能希望为 Unix 帐户维护密码过期策略。您可能希望锁定这些 shell 帐户对部分命令的访问权限，以防止在您的网站上注册的任何人使用他们的 shell 帐户将您的服务器变成垃圾邮件机器人。我可以继续下去...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:13:58.717

也许您需要使用 php 的 ssh 连接。但是你必须小心权限

# c# - 在 powerpoint 的文本框中查找动画的开始/结束字符索引

> ID：10133868
> 
> 赞同：4
> 
> 时间：2012-04-13T00:45:55.760
> 
> 标签：c#, .net, vsto, powerpoint, textrange

这是一些示例幻灯片的屏幕截图。我有一个关于“披萨”这个词的动画。我试图通过字符号查找字符串中的哪个位置。

![示例幻灯片](../Images/c1fb5a61797d5273fc8d495a40f5e294.png) 我获取有关动画信息的代码：

```
foreach (PowerPoint.Effect effect in slide.TimeLine.MainSequence)
        {
            animationMap[animationCount] = new WBLAnimation(effect,shapeMap[effect.Shape.Id],effect.TextRangeStart,effect.TextRangeStart+effect.TextRangeLength);
            animationCount++;
        } 
```

Pizza 应该从字符 11 左右开始，但 TextRangeStart 属性声称它从字符 80 左右开始。TextRangeLength 也是错误的。它声称它的长度是 71 个字符，而它应该是 6 个（“披萨？”的长度）。对我来说，这似乎是计算文本范围的整个长度而不是动画部分。

WBLAnimation 只是一个辅助类。它需要一个效果、一个形状、形状的开始位置和结束位置。这最终需要重构。这只是我如何获取此信息的一个示例，因此有人可能会指出我做错了什么。

有没有另一种方法可以找到动画在字符串中发生的位置？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:39:33.220

我相信动画总是适用于物体。这意味着您没有关于“披萨”一词的动画。您在包含单词“Pizza”的对象（文本框？）上有一个动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T00:46:52.027

很明显，PowerPoint中存在一个错误。TextRangeStart 将始终指出动画文本范围中的最后一段：http: [//answers.microsoft.com/en-us/office/forum/office_2010-powerpoint/where-can-i-find-the-start-and-文本结尾/43a16276-8abc-4cb2-9753-46c7119e7618](http://answers.microsoft.com/en-us/office/forum/office_2010-powerpoint/where-can-i-find-the-start-and-end-of-the-text-in/43a16276-8abc-4cb2-9753-46c7119e7618)

现在既然是这样，我所做的就是将动画的段落索引与形状相匹配，并从那里找到字符索引。它是圆形的，但它有效......

我正在尝试处理各种 ppt 到 html 转换器的工作。它使用 RaphaelJS 来渲染所有这些东西。如果有人想贡献，请查看：[https](https://github.com/parris/tilda) ://github.com/parris/tilda ...我将在一周内做出非常好的承诺。

感谢大家的帮助。

# c - 来自 C 中重定向标准输入的输入验证

> ID：10133872
> 
> 赞同：0
> 
> 时间：2012-04-13T00:46:21.770
> 
> 标签：c, validation, stdin

我正在尝试用 C 编写一个程序来检测 CSV 格式，例如。十进制commadecimal。并给出文件是否为所需格式的输出。我尝试使用来自标准输入的各种输入并使用 isdigit 等，但没有成功。我是一个超级菜鸟，之前几乎没有做过任何 C 编程，我尝试使用 regexc 但无法弄清楚使用它的语法。

```
#include <ctype.h>
#include <stdio.h>
const char EOL = '\n';

int cbreak(void);
int check_dig(void);
int value =1;
char c;

int main()
{

    while((scanf("%c" ,&c)) !=EOF&& value !=0)
    check_dig();

    printf("\n%d\n",value);
}

int check_dig()
{
    if (c == EOL)
        scanf("%c", &c);
    if (c == isdigit)
        scanf("%c", &c);
    else if (c == ',')
        scanf("%c", &c);
    else value = 0;
} 
```

谢谢伙计们，我现在到了这个阶段，但是对于如何完成感到困惑，我需要根据验证打印 1 或 0，我想按照建议使用返回值来执行此操作。

```
#include <ctype.h>
#include <stdio.h>

int check_digit(int);
int check_comma(int);
int skip_char(int);
int main()
{
    int c;

    while ((c = getchar()) !=EOF)
        if (check_digit(c))
            skip_char(c);
        else if (check_comma(c))
            skip_char(c);
        else return 0;
}

int check_digit(int c)
{   
    if (isdigit(c))
        return 1;
    else return 0;
}    

int check_comma(int c)
{
    if (c == ',')
        return 1;
    else return 0;
}

int skip_char(int c)
{
    c = getchar(); // will this skip 2 chars as i have a while loop that has c=getchar()??
    return c;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T01:07:58.810

我不建议使用 regexc 来解决这个问题，特别是如果您是 C 新手。您应该能够使用一些基本的标准库功能来解决它​​。你似乎在正确的一般轨道上。您正在阅读字符并确定它们适合什么类。由于您知道有效输入仅包含数字和逗号字符，因此如果遇到不属于这两种情况之一的任何内容，您可以立即终止程序。这里有一些可能会有所帮助的提示。

如果您一次读取一个字符，`getchar`可能会比`scanf`.

另外，`isdigit`是一个函数。与其说，不如`if (c == isdigit)`说`if (isdigit(c))`。

您的函数`check_dig`被定义为返回一个`int`，但`return`函数中没有语句。该函数需要修改以返回一个值，并且`main`需要对这个值做一些事情。一般的经验法则是，函数在成功完成时返回零，或者在出错时返回非零。在您的情况下，“成功”可能表示“字符有效”，“错误”可能表示“字符无效”。进行此更改应该可以消除全局变量`value`。`c`如果您将输入`check_dig`作为参数传递给，您也可以消除全局变量（`c`将成为内部的局部变量`main()`）。

我建议您只使用该`check_dig`功能来*检查*数字，并删除读取另一个字符的部分。您应该在调用 之前决定是否跳过一个字符`check_dig`。这样，您可以将“读取”代码、“跳过”代码和“检查”代码分开。这使您的程序更易于阅读和调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:04:09.963

首先，我建议不要使用大量的全局变量。在函数中使用参数并从函数返回值。

第二个`isdigit`不是那样工作的。它接受一个参数并返回真或假。[是数字](http://www.cplusplus.com/reference/clibrary/cctype/isdigit/)

此外，我会在 scanf 上使用[getchar 。](http://www.cplusplus.com/reference/clibrary/cstdio/getchar/)

你的`int check_dig()`功能有点奇怪。您继续阅读函数内部的字符。

我可能会做类似的事情：

```
int valid_csv(char c)
{
    if (isdigit(c))
        return 1;
    /* etc. other checks */
    if all fails
    return 0;
}

int main(void)
{
    int c;

    /* read chars into c and call fun by something like */
    valid_svc(c);

    return 0;
} 
```

* * *

编辑：根据经验。一个函数应该做一件事，而且只做一件事，并且把它做好。函数的名称应该反映它的作用。

* * *

编辑2：

您不需要“跳过字符”。在您的新代码中，它的方式是跳过所有其他字符。

IE：

文件：12、33、66、14

在您的代码中，您将获得

*   c = getchar => c == 1
*   c是数字
    *   getchar => 你读了 2 （并且从不验证它）
*   c = getchar => c == ,
*   c 是逗号
    *   getchar => 你读了 3 （并且从不验证它）
*   ...

更远; 我知道我写了“一个函数应该做一件事”——但不是那个字面意思。即你的新`check_digit`是多余的。直接使用`isdigit`。如果您的 csv 中有浮点数，则必须扩展或使用不同的方法。

举例说明；然后在这里写更容易:)

```
#include <ctype.h>
#include <stdio.h>

int valid_csv_chr(int);
int valid_csv(); /* guess naming could be better. */

int main(void)
{
    if (valid_csv())
        puts("1");
    else
        puts("0");

    return 0; /* Main should return 0 if there was no "crash" scenario etc.
     * You could also return i.e. 1 if the file is not validated as csv. 
     * Do not think of 1 and 0 as boolean true / false here. */
}

int valid_csv()
{
    int c;

    while((c = getchar()) !=EOF) {
        if (!valid_csv_chr(c)) {
            return 0;
        }
    }

    return 1;
}

int valid_csv_chr(int c)
{
    if (isdigit(c))
        return 1;
    if (c == ',')
        return 1;
    if (c == '\n')
        return 1;
        /* add checks for space etc. */
    return 0;
} 
```

* * *

编辑3：

代码结构与语言本身一样需要学习。它是边做边写的学习。人们意识到代码的重新结构是必要的，但在编写之前考虑得越多，首先制作一个简单的结构并扩展它等等。它是更可以避免的。

无论如何; 练习，练习，练习。并始终牢记这些主题。

即使它可以“看起来”简单，但事实并非如此。我认为通常书籍、教程、课程等都很少关注这个主题。它完全是关于`for`, , 函数等的，几乎没有关于如何以一种***好的***方式`if`将它们拼接在一起。

 *拆分代码有几个优点。

*   它使它更具可读性。
*   它使维护变得更容易。
*   错误和错误通常可以通过修复一个小功能而不是一个大功能来修复。
    *   在某些情况下，我看到了数千行代码，其中一个具有一些错误的怪物功能。通过调整来修复它几乎是不可能的，完全重写是唯一的选择。
*   优化执行一项任务且规模不大的功能更容易。
*   当使用较小的功能时，更容易扩展以覆盖更多场景。
    *   例如在你的程序中说。您可以将其更改为“验证数据文件”，包括 csv、制表符分隔、对齐等。

最后一点其实是我写作时经常想到的一种方式；“我应该如何最好地实现此代码，以便将来如果我想扩展它以涵盖更多场景，则可以轻松完成。”

我自己在用 C 语言编写时，结合我在 K&R 的 ANSI C 书 ++ 中学到的东西，[以此](http://lxr.linux.no/#linux+v3.3.1/Documentation/CodingStyle)为***基础。***例如，参见关于[函数](http://lxr.linux.no/#linux+v3.3.1/Documentation/CodingStyle#L344)的内容。

还; 严格的编码风格使它更容易阅读和维护。我在很大程度上使用了上面文档中描述的内容。这不是*法律*，但意识到这一点会使编码生活变得如此简单。*

# python - 使用 Python 2.6 的 ahocorasick C 模块的内存泄漏

> ID：10133877
> 
> 赞同：0
> 
> 时间：2012-04-13T00:47:04.403
> 
> 标签：python, c, memory-leaks, module

我尝试使用 Python 2.6 的 ahocorasick C 模块。我建了一个KeywordTree，然后用UTF-8插入一个中文单词，然后：

1.  在 .py 文件中出现“分段错误”，否则它将耗尽内存。

2.  在 iPython shell 中，它运行良好。

代码是：

```
tree = ahocorasick.KeywordTree()
tree.add('头条') 
```

C 模块来自： [https ://hkn.eecs.berkeley.edu/~dyoo/python/ahocorasick/ahocorasick-1.0pre.tar.gz](https://hkn.eecs.berkeley.edu/~dyoo/python/ahocorasick/ahocorasick-1.0pre.tar.gz)

POST：该模块适用于 Python 2.7

# jquery - JQuery：循环表单输入元素的多维数组

> ID：10133878
> 
> 赞同：0
> 
> 时间：2012-04-13T00:47:11.030
> 
> 标签：jquery, forms, multidimensional-array

使用 php，我生成了一个基于多维数组的表单。该表单包含许多名为“items[level1][level2][price]”和“items[level1][level2][amount]”的输入 type="text" 字段对。我将这些显示在表格中。

现在，我想使用 jquery 添加两件事：

1.  显示此商品总价的额外列 (=items[level1][level2][price].value * items[level1][level2][amount].value)
2.  在底行：所有商品的总价。

这些值应在上述文本输入之一的每个更改事件上更新。

过去几个小时我一直在碰壁，我希望这里的人能给我一些指示。

这是生成的 html 的片段：

```
<form name="formname">
<table name="tablename">
    <tr>
        <td><input type="text" class="classname" name="items[1][2][amount]" /></td>
        <td><input type="text" class="classname" name="items[1][2][price]" /></td>
        <td>Here I want to display amount*price</td>
    </tr>
    <tr>
        <td><input type="text" class="classname" name="items[1][8][amount]" /></td>
        <td><input type="text" class="classname" name="items[1][8][price]" /></td>
        <td>Here I want to display amount*price</td>
    </tr>
    <tr>
        <td><input type="text" class="classname" name="items[3][4][amount]" /></td>
        <td><input type="text" class="classname" name="items[3][4][price]" /></td>
        <td>Here I want to display amount*price</td>
    </tr>
    ...more rows like above...
    <tr>Some more formelements that have nothing to do with the problem</tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>Here I want to display the sum of all amount*price</td>
    </tr>
</table>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T01:01:42.983

有几种方法可以做到。基本思想是当`.classname`输入发生变化时，查找父行，然后使用它来查找该行中的输入以相乘`td`并将其值放入。您可以使用“名称包含”`[attr*=string]`选择器来查找它们：

```
$('.classname').on('change', function() {
    var row = $(this).closest('tr');
    var total = row.find('[name*=amount]').val() * row.find('[name*=price]').val();

    row.find('td:last').text(total);
}); 
```

演示：http: [//jsfiddle.net/jtbowden/DJtTs/](http://jsfiddle.net/jtbowden/DJtTs/)

或者，如果它们始终是第一/第二列，请使用`.eq()`or `:eq()`：

```
$('.classname').on('change', function() {
    var row = $(this).closest('tr');
    var total = row.find('input:eq(0)').val() * row.find('input:eq(1)').val();

    row.find('td:last').text(total);
}); 
```

演示：http: [//jsfiddle.net/jtbowden/DJtTs/1/](http://jsfiddle.net/jtbowden/DJtTs/1/)

编辑马可：

```
$(".classname").live('change', function(e) {
    //replaced on with live so the function will stick.
    var row = $(this).closest('tr');
    var total = row.find('[name*=amount]').val() * row.find('[name*=price]').val();
    row.find('[id="totalitemprice"]').text("\u20ac "+total.toFixed(2));
    //added eurosign and rounded to 2 decimals

    //Start computing total value
    var totaltotal = parseFloat(0);
    $.each($('[id="totalitemprice"]'), function(key, value) {
        //Loop across all totalitemprices
        totaltotal += parseFloat(value.firstChild.data.replace(/\u20ac /g,''));
        //Find out what's in the cell, strip the eurosign, parse it to Float and add it to the total
    });

    $("#totalprice").text("\u20ac "+totaltotal.toFixed(2));
    //Finally, write the total price to the approprioate cell.
}); 
```

# google-analytics - Google Analytics：将两个域合二为一

> ID：10133880
> 
> 赞同：1
> 
> 时间：2012-04-13T00:47:18.697
> 
> 标签：google-analytics

在工作中，我们有两个域服务于完全相同的网站/代码/等。我试图找出是否有一种方法可以通过 Google Analytics 跟踪它们，并且有一个帐户可以不在乎它为哪个域提供分析数据？我目前遇到的问题是，我们用于广告的域显示为隐藏（或至少我不知道如何找到）真正来源的引荐来源（google/bing/yahoo/etc ）。

请注意...在这里搜索后，我只想添加它以希望使其 100% 清晰。我不想单独跟踪两个域...我希望我的 GA 帐户合并数据，而不考虑用户浏览器显示的域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:15:01.623

你为什么要那样做？

有 2 个域提供相同的内容可能会被视为重复内容，并且可能会破坏您的谷歌排名。我建议将一个域重定向到另一个域，以便 1 个域实际处理该网站，而另一个域只是捕获访问者。

如果你还是想这样做

```
var pageTracker = _gat._getTracker("UA-12345-1");
pageTracker._setDomainName("none");
pageTracker._setAllowLinker(true);
pageTracker._trackPageview(); 
```

但是您还需要编辑所有链接，请阅读下面的文章。

[http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=55503](http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=55503)

# objective-c - 如何在 UIView 子类中创建对象网格？

> ID：10133881
> 
> 赞同：0
> 
> 时间：2012-04-13T00:47:25.803
> 
> 标签：objective-c, grid

截至目前，我的 view.m 文件中有一个 for 循环，在 drawRect 方法中。我有 for 循环在 x 轴上显示图像。我想做的是能够不仅在 x 轴上而且在 y 轴上制作图像网格。换句话说，你的典型网格。我还想让网格中的每个重复图像成为一个对象，并附加一些属性，例如布尔值、触摸时我可以检索它的 id 以及它的坐标。我将如何在objective-c中执行此操作？这是我到目前为止所拥有的，并不多：

```
- (void)drawRect:(CGRect)rect
{
    int intX = 0; 
    int intCounter = 0;
    int intY = 0;
    for (intCounter = 0; intCounter < 10; intCounter++) {
        UIImage* pngLeaf = [UIImage imageNamed:@"leaf2.png"];
        CGRect imgRectDefault = CGRectMake(intX, 0, 34, 34);
        [pngLeaf drawInRect:imgRectDefault];
        intX += 32;
        intY += 32;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T02:27:09.693

使用 UIViews 会更轻松。

这是一个网格例程 - 它可以写得更紧凑，但通过显式声明的大量变量更容易理解。把它放在你的主 ViewController 中并在 ViewWillAppear 中调用它。

```
- (void)makeGrid
{

int xStart = 0;
int yStart = 0;
int xCurrent = xStart;
int yCurrent = yStart;

UIImage * myImage = [UIImage imageNamed:@"juicy-tomato_small.png"];

int xStepSize = myImage.size.width;
int yStepSize = myImage.size.height;

int xCnt = 8;
int yCnt = 8;

int cellCounter = 0;

UIView * gridContainerView = [[UIView alloc] init];
[self.view addSubview:gridContainerView];

for (int y = 0; y < yCnt; y++) {
    for (int x = 0; x < xCnt; x++) {
         printf("xCurrent %d  yCurrent %d \n", xCurrent, yCurrent);

        UIImageView * myView = [[UIImageView  alloc] initWithImage:myImage];
        CGRect rect = myView.frame;
        rect.origin.x = xCurrent;
        rect.origin.y = yCurrent;
        myView.frame = rect;
        myView.tag = cellCounter;
        [gridContainerView addSubview:myView];

        // just label stuff
        UILabel * myLabel = [[UILabel alloc] init];
        myLabel.textColor = [UIColor blackColor];
        myLabel.textAlignment = UITextAlignmentCenter;
        myLabel.frame = rect;
        myLabel.backgroundColor = [UIColor clearColor];
        myLabel.text = [NSString stringWithFormat:@"%d",cellCounter];
        [gridContainerView addSubview:myLabel];
        //--------------------------------

        xCurrent += xStepSize;
        cellCounter++;
    }

    xCurrent = xStart;
    yCurrent += yStepSize;
}

CGRect repositionRect = gridContainerView.frame;
repositionRect.origin.y = 100;
gridContainerView.frame = repositionRect;

} 
```

# uitabbar - 调整 UIITabBar 属性？

> ID：10133884
> 
> 赞同：0
> 
> 时间：2012-04-13T00:47:58.137
> 
> 标签：uitabbar, uitabbaritem, uistoryboard

我正在将 iPhone 应用程序升级到 Universal，并发现所有 UITabBarItems 都挤在中心。

我正在使用 Xcode 中的新故事板功能，我可以调整 UITabBarItems 或 UITabBar 本身的任何属性以控制标签栏项目的宽度等内容 - 或者像 iPhone 一样简单地填充 UITabBar 的整个宽度？

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-13T04:41:58.247

您可以在界面构建器中的这些按钮之间动态放置灵活的空格键按钮项

# objective-c - GDataXML、命名空间和 xpath

> ID：10133885
> 
> 赞同：1
> 
> 时间：2012-04-13T00:47:58.880
> 
> 标签：objective-c, xml, xcode, xpath, gdataxml

我在使用 xpath 和 GDataXML 解析 XML 时遇到问题——使用 xpath 测试器，我的字符串似乎应该可以工作，但我认为在命名空间中添加会干扰它的工作。

XML:

```
<?xml version="1.0" encoding="utf-8"?>

<Autodiscover xmlns='http://schemas.microsoft.com/exchange/autodiscover/responseschema/2006'>
          <Response xmlns='http://schemas.microsoft.com/exchange/autodiscover/outlook/responseschema/2006a'>
        <Account>
        <Protocol>
                <Type>EXPR</Type>
                <EwsUrl>https://server.my.dom/EWS/Exchange.asmx</EwsUrl>
        </Protocol>
        </Account>
      </Response>
</Autodiscover> 
```

我尝试解析它如下：

```
NSDictionary *namespaceMappings = [NSDictionary dictionaryWithObjectsAndKeys:@"http://schemas.microsoft.com/exchange/autodiscover/outlook/responseschema/2006a", @"response", nil];

    NSArray *idList = [doc nodesForXPath:@"//response:Protocol[Type='EXPR']/EwsUrl" namespaces:namespaceMappings error:nil]; 
```

我还尝试使用以下内容省略命名空间：

```
NSArray *idList = [doc nodesForXPath:@"//Protocol[Type='EXPR']/EwsUrl" error:nil]; 
```

在这两种情况下，idList 都有 0 个成员。我感觉好像我现在只是在墙上扔东西，看看有没有东西粘住。有人能给我指路吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:26:26.417

马丁的回答是正确的，但我想我会为那些在初读时错过它的人（比如我）解释为什么。

当您设置命名空间映射时，给命名空间一个键，然后在您的 XPath 表达式中为您的选择器添加前缀，该键后跟一个冒号 (:)。该解决方案使用整洁的[TouchXML 库](https://github.com/TouchCode/TouchXML)中的 CXMLDocuments 和 CXMLElements 。

从一个简单的例子开始，假设您的 XML 是：

```
<books xmlns="http://what.com/ever">
  <book>
    <title>Life of Pi</title>
  </book>
  <book>
    <title>Crime and Punishment</book>
  </book
</books> 
```

您将选择所有书籍：

```
// So, assuming you've already got the data for the XML document
CXMLDocument* xmldoc = [[CXMLDocument alloc] initWithData:xmlDocData options:0 error:nil];
NSDictionary *namespaceMappings = [NSDictionary dictionaryWithObjectsAndKeys:@"http://what.com/ever", @"nskey", nil];
NSError *error = nil;
NSArray *bookElements = [xmldoc nodesForXPath:@"/nskey:books/nskey:book" namespaceMappings:mappings error:&error]; 
```

请注意，您需要为每个元素添加前缀，而不仅仅是声明命名空间的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T10:13:04.057

至于 XPath，您需要`//response:Protocol[response:Type='EXPR']/response:EwsUrl`. 我对objective-c的东西无能为力。

# mysql - WHERE 的通配符？

> ID：10133887
> 
> 赞同：1
> 
> 时间：2012-04-13T00:48:14.743
> 
> 标签：mysql, search, wildcard, contains

我想设置执行此操作的代码：（* 是通配符）

```
SELECT * FROM * WHERE * CONTAINS '$search-query'; 
```

我可以使用什么 MYSQL 代码来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T00:51:29.767

有一个名为[anywhereindb](http://code.google.com/p/anywhereindb)的项目可以做你想做的事。

* * *

我不会创建一个完整的解决方案，这需要很长时间，但是，我将创建一个你会称之为的例子

```
SELECT * From `tablename` WHERE * CONTAINS `$search_query` 
```

首先，让我们提取字段

```
$fields = array();
$query = "SELECT * FROM `yourtable` LIMIT 1;";
$result = mysql_query($query);
while ($i < mysql_num_fields($result)) {
    $info = mysql_fetch_field($result, $i);
    $fields[] = $info -> name;
} 
```

现在准备您的查询

```
$query = "SELECT * FROM `table` WHERE";
foreach($fields as $index => $field) {
    $fields[$index] = $field." CONTAINS '$search_query'"
}
$query .= implode(" and ", $fields);
//Finally query
$result = mysql_query($query); 
```

# java - 使用连接池在 mysql 数据库中使用 log4j 进行日志记录

> ID：10133896
> 
> 赞同：-3
> 
> 时间：2012-04-13T00:49:36.683
> 
> 标签：java, mysql, jdbc, log4j, connection-pooling

我已经从 JDBC 实现了一个连接池来获取和关闭我的数据访问对象的连接，以便使用 java 从 mysql 数据库中存储和检索数据。

我还想通过名为 JDBCAppender 的附加程序，使用名为 log4j 的库将主要操作和异常存储在数据库中。

在使用连接池之前，事件的日志记录很好，因为一次只有一个连接被用于操作。现在连接同时被从池中抓取并交还给池，一旦一个连接（第一个）被关闭，记录器似乎不知道如何获得另一个连接。

如何登录具有连接池的数据库？

我自己对此进行了调查，我需要做的就是覆盖 JDBCAppender.java（在 apache log4j 1.2.16 库中）中的 getConnection() 方法......但我有两个问题。

我需要在 LOG4J 1.2.16 jar 文件中有我的连接池实现类吗？假设我从池中获得连接，如何将 LOG4J 1.2.16 Java 文件重新编译为 jar 文件？

到目前为止，我可以提供我的连接池实现和 JDBCAppender java 类，我们可以从那里获取它...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T21:38:39.883

首先，回答您的具体问题：您的连接池类不需要在 Log4J 中`JAR`。当你运行你的代码时，你所需要的只是在你的所有类和`JAR`文件中。`CLASSPATH`将`CLASSPATH`拾取一切。所以这不是你的问题的原因。

我无法从您的问题和后来的一些评论中看出您是使用自己的连接池还是第三方连接池。如果是前者，您绝对应该切换到第 3 方池，例如[DBCP](http://commons.apache.org/dbcp/)、[C3P0](http://sourceforge.net/projects/c3p0/)或[BoneCP](http://jolbox.com/)。如果是后者，那么您的问题可能是由您配置池的方式引起的。它绝对与 s 无关`JAR`，它们都在你的身上`CLASSPATH`，不需要组合或混合或类似的东西。

我阅读了[JDBCAppender 的 javadoc](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/jdbc/JDBCAppender.html)并注意到了一些事情。首先，确保您是压倒一切的`closeConnection()`，而不仅仅是`openConnection()`. 接下来，我注意到一个警告，这个类将来可能会更改，并且也不会记录异常。

For this reason, you may also want to use [LogBack](http://logback.qos.ch/) instead of Log4J. It is by the same author and represents newer technology. Its [DBAppender](http://logback.qos.ch/manual/appenders.html#DBAppender) seems to support logging of exceptions, and also allows you to plug in your `Connection` source, rather than overriding `getConnection()`.

# python - Python和机械化登录脚本

> ID：10133899
> 
> 赞同：9
> 
> 时间：2012-04-13T00:49:40.977
> 
> 标签：python, mechanize, login-script, python-memcached

各位程序员好！

我正在尝试编写一个脚本来使用 python 和机械化模块登录我的大学“食物平衡”页面......

这是我要登录的页面：[http](http://www.wcu.edu/11407.asp) ://www.wcu.edu/11407.asp 该网站有以下登录表格：

```
<FORM method=post action=https://itapp.wcu.edu/BanAuthRedirector/Default.aspx><INPUT value=https://cf.wcu.edu/busafrs/catcard/idsearch.cfm type=hidden name=wcuirs_uri> 
<P><B>WCU ID Number<BR></B><INPUT maxLength=12 size=12 type=password name=id> </P>
<P><B>PIN<BR></B><INPUT maxLength=20 type=password name=PIN> </P>
<P></P>
<P><INPUT value="Request Access" type=submit name=submit> </P></FORM> 
```

由此我们知道我需要填写以下字段： 1\. name=id 2\. name=PIN

随着行动：action=https://itapp.wcu.edu/BanAuthRedirector/Default.aspx

这是我到目前为止写的脚本：

```
#!/usr/bin/python2 -W ignore

import mechanize, cookielib
from time import sleep

url   = 'http://www.wcu.edu/11407.asp'
myId  = '11111111111'
myPin = '22222222222'

# Browser
#br = mechanize.Browser()
#br = mechanize.Browser(factory=mechanize.DefaultFactory(i_want_broken_xhtml_support=True))
br = mechanize.Browser(factory=mechanize.RobustFactory()) # Use this because of bad html tags in the html...

# Cookie Jar
cj = cookielib.LWPCookieJar()
br.set_cookiejar(cj)

# Browser options
br.set_handle_equiv(True)
br.set_handle_gzip(True)
br.set_handle_redirect(True)
br.set_handle_referer(True)
br.set_handle_robots(False)

# Follows refresh 0 but not hangs on refresh > 0
br.set_handle_refresh(mechanize._http.HTTPRefreshProcessor(), max_time=1)

# User-Agent (fake agent to google-chrome linux x86_64)
br.addheaders = [('User-agent','Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11'),
                 ('Accept', 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'),
                 ('Accept-Encoding', 'gzip,deflate,sdch'),                  
                 ('Accept-Language', 'en-US,en;q=0.8'),                     
                 ('Accept-Charset', 'ISO-8859-1,utf-8;q=0.7,*;q=0.3')]

# The site we will navigate into
br.open(url)

# Go though all the forms (for debugging only)
for f in br.forms():
    print f

# Select the first (index two) form
br.select_form(nr=2)

# User credentials
br.form['id']  = myId
br.form['PIN'] = myPin

br.form.action = 'https://itapp.wcu.edu/BanAuthRedirector/Default.aspx'

# Login
br.submit()

# Wait 10 seconds
sleep(10)

# Save to a file
f = file('mycatpage.html', 'w')
f.write(br.response().read())
f.close() 
```

现在问题...

出于某种奇怪的原因，我返回的页面（在 mycatpage.html 中）是登录页面，而不是显示我的“猫现金余额”和“剩余餐食数量”的预期页面......

有谁知道为什么？请记住，头文件的所有内容都是正确的，虽然 id 和 pass 不是真正的 111111111 和 222222222，但正确的值确实适用于网站（使用浏览器......）

提前致谢

编辑

我试过的另一个脚本：

```
from urllib import urlopen, urlencode                                           
import urllib2                                                                  
import httplib                                                                  

url = 'https://itapp.wcu.edu/BanAuthRedirector/Default.aspx'                    

myId = 'xxxxxxxx'                                                               
myPin = 'xxxxxxxx'                                                              

data = {                                                                        
            'id':myId,                                                          
            'PIN':myPin,                                                        
            'submit':'Request Access',                                          
            'wcuirs_uri':'https://cf.wcu.edu/busafrs/catcard/idsearch.cfm'      
        }                                                                       

opener = urllib2.build_opener()                                                 
opener.addheaders = [('User-agent','Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11'),
                     ('Accept', 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'),
                     ('Accept-Encoding', 'gzip,deflate,sdch'),                  
                     ('Accept-Language', 'en-US,en;q=0.8'),                     
                     ('Accept-Charset', 'ISO-8859-1,utf-8;q=0.7,*;q=0.3')]      

request = urllib2.Request(url, urlencode(data))                                 
open("mycatpage.html", 'w').write(opener.open(request)) 
```

这具有相同的行为...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:17:31.337

```
# User credentials
br.form['id']  = myId
br.form['PIN'] = myPin 
```

我相信这是问题所在。

尝试将其更改为

```
br['id'] = myId
br['PIN'] = myPin 
```

我也很确定您不需要`br.form.action = 'https://itapp.wcu.edu/BanAuthRedirector/Default.aspx'`，因为您已经选择了表单，所以只需调用提交就可以了，但我可能是错的。

此外，我只使用 urllib 和 urllib2 完成了类似的任务，所以如果这不起作用，我将发布该代码。

**编辑：**这是我与 urllib 和 urllib2 一起使用的技术：

```
import urllib2, urllib

opener = urllib2.build_opener(urllib2.HTTPCookieProcessor())
urllib2.install_opener(opener)
encoded = urllib.urlencode({"PIN":my_pin, "id":my_id})
f = opener.open('http://www.wcu.edu/11407.asp', encoded)
data = f.read()
f.close() 
```

**编辑2：**

```
>>> b = mechanize.Browser(factory=mechanize.RobustFactory())
>>> b.open('http://www.wcu.edu/11407.asp')
<response_seek_wrapper at 0x10acfa248 whose wrapped object = <closeable_response at 0x10aca32d8 whose fp = <socket._fileobject object at 0x10aaf45d0>>>
>>> b.select_form(nr=2)
>>> b.form
<mechanize._form.HTMLForm instance at 0x10ad0dbd8>
>>> b.form.attrs
{'action': 'https://itapp.wcu.edu/BanAuthRedirector/Default.aspx', 'method': 'post'} 
```

这可能是你的问题？没有把握。

**编辑3：**

使用了 html 检查器，我认为您很有可能需要将“wcuirs_uir”设置为“https://cf.wcu.edu/busafrs/catcard/idsearch.cfm”。我有 95% 的把握这会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-23T16:10:58.227

我建议使用以下库：[http ://docs.python-requests.org/en/latest/](http://docs.python-requests.org/en/latest/)

这是一个漂亮而简单的图书馆。它有一个很好的文档。我已经使用这个库来编写不同类型的脚本，就像你正在做的那样。

你需要做这样的事情：

```
import requests 

s = requests.Session()
url = 'https://itapp.wcu.edu/BanAuthRedirector/Default.aspx'                    
myId = 'xxxxxxxx'                                                               
myPin = 'xxxxxxxx'  
headers = {'User-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11',
           'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
           'Accept-Encoding': 'gzip,deflate,sdch',                  
           'Accept-Language': 'en-US,en;q=0.8',                     
           'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3'}
data = {'id':myId,                                                          
        'PIN':myPin,                                                        
        'submit':'Request Access',                                          
        'wcuirs_uri':'https://cf.wcu.edu/busafrs/catcard/idsearch.cfm'} 
response = s.post(url, headers = headers, data=date)

if response.status_code == 200: #Maybe add another constraint to be sure we are logged in
    #Now do any call you want
    response = s.get(another_url)
    print response.text 
```

[你可以在这里](http://docs.python-requests.org/en/latest/user/quickstart/)获得更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-08T02:29:37.510

我在使用 ASPX 时使用的另一个解决方案是[robobrowser](https://github.com/jmcarp/robobrowser)。

例如：

```
def auth(mailbox, password):
    browser = RoboBrowser(history=False)
    browser.open(oc_auth_uri)

    signin = browser.get_form(id='aspnetForm')
    signin['SubLoginControl:mailbox'].value = mailbox
    signin['SubLoginControl:password'].value = password
    signin['SubLoginControl:javascriptTest'].value = 'true'
    signin['SubLoginControl:btnLogOn'].value = 'Logon'
    signin['SubLoginControl:webLanguage'].value = 'en-US'
    signin['SubLoginControl:initialLanguage'].value = 'en-US'
    signin['SubLoginControl:errorCallBackNumber'].value = 'Entered+telephone+number+contains+non-dialable+characters.'
    signin['SubLoginControl:cookieMailbox'].value = 'mailbox'
    signin['SubLoginControl:cookieCallbackNumber'].value = 'callbackNumber'
    signin['SubLoginControl:serverDomain'].value = ''

    browser.submit_form(signin)
    return browser 
```

注意：您可能需要更新表单以在提交之前将*隐藏*的表单字段（例如和朋友）添加到表单中。`__VIEWSTATE`有关更多信息，请参阅[此](https://stackoverflow.com/questions/27681731/python-requests-robobrowser-aspx-post-javascript)帖子。

# iphone - cocos2d iPhone中的循环背景

> ID：10133902
> 
> 赞同：0
> 
> 时间：2012-04-13T00:50:11.967
> 
> 标签：iphone, ios, background, cocos2d-iphone

我正在开发我的第一个 cocos2d 游戏。它将有一个循环背景，三个不同的层都以不同的速度循环。循环的速度将根据用户输入而改变。

这是我的做法

```
-(void) update: (ccTime) dt
{
for (CCSprite *bckgrnd in backgroundArray){
    switch (bckgrnd.tag) {
        case 0:
            bckgrnd.position = ccp(bckgrnd.position.x - speed * .30, bckgrnd.position.y);
            break;
        case 1:
            bckgrnd.position = ccp(bckgrnd.position.x - speed * .80, bckgrnd.position.y);
            break;
        case 2:
            bckgrnd.position = ccp(bckgrnd.position.x - speed * .50, bckgrnd.position.y);
            break;

        default:
            break;
    }
    if (bckgrnd.position.x <= -kBacWidth) {
        CGPoint greatestPosition = CGPointMake(0, 0);
        for (CCSprite *sprt in backgroundArray){
            if (sprt.tag == bckgrnd.tag && sprt.position.x > greatestPosition.x) {
                greatestPosition = CGPointMake(sprt.position.x, sprt.position.y);
            }
        }

        bckgrnd.position = ccp(greatestPosition.x + kBacWidth, bckgrnd.position.y); 
    }
}
} 
```

这可行，但有两个问题。首先，它在第二次循环后会产生一个间隙，然后该间隙会保持在那里。另一个问题是背景的不同部分在屏幕向左移动时似乎“摆动”。这会导致单独的精灵有时会重叠一个像素。我不能拥有。我哪里错了？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T23:01:21.960

我已经为垂直滚动射击游戏实现了 ParallaxBackground，这是我的更新方法。我希望它确实有助于激发你的灵感，因为我一开始也遇到了差距问题。

speedFactors 是一个浮点对象数组，它决定了背景中每个条纹的速度。我将 numStripes 乘以 2，因为我有一个顶部和底部条纹（图像分成两半），所以当它们超出可视范围时我可以重新定位它们（​​条件：**if(pos.y < -screenSize.height)**）。

精灵作为子类添加到类中，但如果您愿意，也可以使用 CCSpriteBatch 或 backgroundArray。

```
-(void) update:(ccTime)delta
{
    CCSprite* sprite;
    int factorIndex=0;
    for (int i=0; i<(numStripes*2); i++) {

        sprite = (CCSprite*)[self getChildByTag:firstParallaxSpriteTag+i];

        NSNumber* factor = [speedFactors objectAtIndex:factorIndex];

        CGPoint pos = sprite.position;
        pos.y -= scrollSpeed * [factor floatValue];;

        // Reposition stripes when they're out of bounds
        if (pos.y < -screenSize.height)
        {
            pos.y += (screenSize.height * 2) - 2;
        }
        sprite.position = pos;   
        factorIndex++;
        if(factorIndex>=numStripes){
            factorIndex=0;
        }
    }   
} 
```

希望这对您有所帮助，请不要犹豫，通过评论提出进一步的问题。

[PS：为了记录，我的方法和类是对本书](http://www.apress.com/9781430233039/)中 ShootEmUp 示例中的 ParallaxBackground 类的修改。您可以在链接中找到源代码，我建议您也购买这本书。

PPS：为了避免 1 像素的间隙，您需要在重新定位精灵时将其移除，为了避免背景精灵的间隙，您需要分配背景精灵的两个实例并在屏幕中交替它们（当一个从视觉范围，您将其重新定位在屏幕的开头或侧面，在您的情况下是侧面-)，然后继续移动两个背景精灵。如果您看到我的代码甚至更多书中的 PrallaxBackground 示例，您就会明白。

# ruby-on-rails - Rails 更新破坏了 uniq？

> ID：10133904
> 
> 赞同：1
> 
> 时间：2012-04-13T00:50:45.880
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我刚刚从 Rails 3.1.1 升级到 3.2.2，我想我发现了一个回归`ActiveRecord::QueryMethods#uniq`。在向 Rails 团队记录另一个问题之前，我想在这里问一下！

我有一个`Department`模型：

```
class Department < ActiveRecord::Base
  ...
  has_many :products
  has_many :brands, :through => :products, :uniq => true
  ...
end 
```

这在 Rails 3.1.1 下完美运行，其中执行查询等`@department.brands`操作`SELECT DISTINCT ...`。

在 Rails 3.2.2 下，`DISTINCT`不再进行查询。我已经在控制台中尝试过类似的东西，`Department.first.brands.uniq`但这似乎只是在调用`Array#uniq`而不是`ActiveRecord::QueryMethods#uniq`.

任何人都知道 3.1.1 和 3.2.2 之间是否有什么变化会影响到这一点？

# java - 关于try-catch

> ID：10133905
> 
> 赞同：2
> 
> 时间：2012-04-13T00:51:04.390
> 
> 标签：java, exception-handling, if-statement, try-catch, throw

我目前正在学习 Java 入门课程，这是关于 try-catch 方法的。当我键入此内容时，我的`System.out.println`陈述不断重复。这是我的代码：

```
public static double exp(double b, int c) {
    if (c == 0) {
        return 1;
    }

    // c > 0
    if (c % 2 == 0) {
        return exp(b*b, c / 2);
    }
    if (c<0){
        try{
        throw new ArithmeticException();
        }
        catch (ArithmeticException e) {
            System.out.println("yadonegoofed");
        }
    }

    // c is odd and > 0
    return b * exp(b, c-1);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T00:57:33.633

```
if (c<0){
    try{
    throw new ArithmeticException();
    }
    catch (ArithmeticException e) {
        System.out.println("yadonegoofed");
    }
}

// c is odd and > 0
return b * exp(b, c-1); 
```

您的评论`c is odd and > 0`不正确-您从未真正*终止*过该功能。你扔了它，你立即接住它，然后继续执行递归函数。最终，当您点击[wraparound](http://en.wikipedia.org/wiki/Integer_overflow)时，它将再次成为一个正数，并且不会发生错误。（大约需要 20 亿次迭代——别等了。）

我不会在这里使用异常——你只需要终止递归。我会在检查*之前*检查负输入`0`，并在那里抛出异常，并*在调用者中捕获异常*。

在伪代码中：

```
exp(double b, int c) {
    if (c < 0)
        throw new Exception("C cannot be negative");
    } else if (c % 2 == 0) {
        return exp(b*b, c / 2);
    } else {
        /* and so forth */
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T01:05:37.020

在创建自己的自定义异常时，您忘记了一个非常重要的部分。你忘了告诉方法它会抛出这样的方法。您的第一行代码应如下所示：

```
public static double exp(double b, int c) throws ArithmeticException { 
```

请注意，我自己对此进行了测试，它只会在您的输出中抛出一次异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T00:57:27.017

例如，如果 c = -1 in，第一个和第二个 if 失败，第三个 if 抛出异常然后打印错误，但事情进展，因为您处理了 excpetion。所以它调用 exp(b, -2)。反过来，它在返回中调用 exp(b, -3)，依此类推。将 C 的值添加到您的 println 以进行验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T00:55:57.693

好吧，最后你有`return b * exp(b, c-1);`this `exp`will call again which will call it again。
所以这个函数会不断重复，所以也会如此 `System.out.println`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T00:59:11.313

你的基本情况是非常具体的......你的代码保证c等于0？目前，这是您退出递归调用的唯一方式。正如@Jay 所说，你总是减去 1 会导致抛出的异常，但此时 c 已经低于 0，因此它不等于 0。将你的第一条`if`语句更改为捕获值 <= 0，你应该没问题。

```
if( c <= 0 )
     return 1; 
```

# php - 尝试使用图像将变量保存到 MYSQL 数据库表

> ID：10133911
> 
> 赞同：0
> 
> 时间：2012-04-13T00:52:27.427
> 
> 标签：php, javascript, mysql, forms

所以我真的不知道怎么问这个……但我正在制作一个网站，您可以在其中单击六个天气图标之一，将您引导到一个页面，该页面允许您输入您的姓名和故事与天气有关，并将其与其他人关于同一类型天气的故事一起发布在最后一页上。我设置了一个表格来保存名称和故事，但是当用户单击其中一个图标时，我不确定如何保存天气。

我的老师说要用javascript做一些事情并制作一个隐藏的表格或其他东西。如果有帮助，请提供指向该网站的链接。[http://www.tcnjart.com/christineaustin/whethertheweather/index.html](http://www.tcnjart.com/christineaustin/whethertheweather/index.html)

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>WhethertheWeather.</title>

<!--<link rel="stylesheet" type="text/css" href="demo/css/screen.css" media="all" />-->
    <script src="http://www.adrianpelletier.com/mint/?js" type="text/javascript">           
 </script>
    <script type="text/javascript" src="demo/scripts/jquery-1.3.2.min.js"></script>
    <script type="text/javascript" src="demo/scripts/jquery-ui-1.7.1.custom.min.js">      
 </script>
    <script type="text/javascript" src="demo/scripts/execute.js"></script>

 <script>
     function connect(){
var moveto= $.(#sel).attr("name");
$(#myweather).value=moveto;
myform.submit;

}

</script>

<link href="style.css" rel="stylesheet" type="text/css">
</head>

<body background="images/gradientsky.jpg"> 

 <div id="logo">

WhethertheWeather.

</div>

<div id="question">

Whats your favorite weather?

</div>

<div id="weather">

<ul id="nav-reflection">
<form name="myform" method="post" action="cloudy_name.php">
    <li class="button-color-1"><a href="javascript:connect();"id="sel"name"cloudy"       
 title="My fancy link"><img src="images/cloudybubble.png" width="211" height="180"align="left">  
</a></li>
<li class="button-color-1"><a href="sunny_name.php" title="My fancy link"><img               src="images/sunnybubble.png" width="211" height="180" align="left"></a></li>
<li class="button-color-2"><a href="snowy_name.php" title="My fancy link"><img src="images/snowbubble.png" width="211" height="180" align="left"></a></li>
<li class="button-color-1"><a href="snowy_name.php" title="My fancy link"><img src="images/rainbubble.png" width="211" height="180" align="left"></a></li>
<li class="button-color-1"><a href="mixy_name.php" title="My fancy link"><img src="images/mixbubble.png" width="211" height="180" align="left"></a></li>
<li class="button-color-1"><a href="windy_name.php" title="My fancy link"<imgsrc="images/windybubble.png" width="211" height="180" align="left"></a></li>

<input type="hidden" name="weather" value="none" id="myweather">
</form>
</ul>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T01:21:15.960

嗯，首先，这个作业的重点是让你自己弄清楚如何做这件事，尽管我想 SO*有点*重要。

设置图像的 onclick 属性设置隐藏表单元素的值。这应该足以让您谷歌并获得正确的答案。

```
<img src=foo onclick="javascript_code_goes_here"> 
```

和

```
<input type=hidden name='weather' id='weather' value=''> 
```

# javascript - 复制对象javascript以按值传递

> ID：10133916
> 
> 赞同：0
> 
> 时间：2012-04-13T00:53:49.443
> 
> 标签：javascript, object, pass-by-value

从函数中，我想返回作为参数传递的对象的修改版本，而不影响原始对象（即无副作用）。所以本质上我想通过价值。我试图通过修改并返回对象的（深度）复制版本来做到这一点。但是我现在发现我对克隆对象所做的修改仍然会影响原始对象。

下面的代码片段演示了这一点，因为在 newObject 上调用 modifyMyData 会影响 oldObject 的数据

```
var clone = function(oldObject) {
    return jQuery.extend(true, {}, oldObject);
}

var objf = function() {
    var data = {list:[1],dic:{a:'3'}};
    this.modifyMyData = function() {
        data.list.push(3);
        data.dic['e'] = 10;
    }
    this.getData = function() {
        return data;
    }
}

var old = new objf;
var newo = clone(old);
newo.modifyMyData(); 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:16:11.323

试试这个，我认为它可以像你想要的那样工作。您需要将变量数据附加到对象。你这样做的方式把它变成了一个带有闭包的变量，所以它没有被复制。

```
var clone = function(oldObject) {
    return jQuery.extend(true, {}, oldObject);
}

var objf = function() {
    this.data = {list:[1],dic:{a:'3'}};

    this.modifyMyData = function() {

        this.data.list.push(3);
        this.data.dic['e'] = 10;
    }
    this.getData = function() {
        return this.data;
    }
}

var old = new objf();
var newo = clone(old);
newo.modifyMyData(); 
```

# functional-programming - 是否可以在 Underscore.js 中同时遍历两个列表？

> ID：10133918
> 
> 赞同：10
> 
> 时间：2012-04-13T00:54:09.413
> 
> 标签：functional-programming, underscore.js

[`_.each()`](http://underscorejs.org/#each)我基本上想在 Underscore.js 中使用or来表达以下行为[`_.map()`](http://underscorejs.org/#map)。

```
a = [1, 2, 3]
b = [3, 2, 1]

# Result list
c = [0, 0, 0]

for i in [0 .. a.length - 1]
   c[i] = a[i] + b[i] 
```

这在 Matlab（我的主要语言）中绝对是可能的：

```
c = arrayfun(@(x,y) x+y, a, b) 
```

直觉上，感觉下划线中的语法应该是：

```
c = _.map(a, b, function(x, y){ return x + y;}) 
```

但是，该参数列表是不可接受的；第二个参数应该是一个可调用函数。

在这种情况下，可选的“上下文”参数对我没有帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-13T01:08:48.553

为此使用[zip](https://underscorejs.org/#zip)（也来自 underscore.js）。像这样的东西：

```
var a = [1, 2, 3];
var b = [4, 5, 6];
var zipped = _.zip(a, b);
// This gives you:
// zipped = [[1, 4], [2, 5], [3, 6]]

var c = _.map(zipped, function(pair) {
  var first = pair[0];
  var second = pair[1];
  return first + second;
});

// This gives you:
// c = [5, 7, 9] 
```

工作示例：

*   [http://jsfiddle.net/beRAD/](http://jsfiddle.net/beRAD/)

# javascript - 用两个按钮固定切换

> ID：10133919
> 
> 赞同：0
> 
> 时间：2012-04-13T00:54:15.257
> 
> 标签：javascript, jquery, toggle

我需要更改我的代码，以便如果您单击同一个按钮两次，它将返回到原来的状态。

另外，页面加载时是否可以不选择男性？我试图弄清楚如何在加载时取消选中两个按钮。

[http://jsfiddle.net/B4XkL/](http://jsfiddle.net/B4XkL/) （运行 jQuery）

$("input[type=button]").click(function() { $("input[type=button]").removeClass("button-toggle-on"); $(this).toggleClass("button -toggle-on"); if($(this).hasClass("gnF")) varval = 'female'; else varval = 'male'; $("#gender").val(varval); }); ​</p>

```
<input type="button" class="gnF" />

<input class="req-string gender"  id="gender" name="gender">​

$("input[type=button]").click(function() {
$("input[type=button]").removeClass("button-toggle-on");
$(this).toggleClass("button-toggle-on");
if($(this).hasClass("gnF")) varval = 'female';
else varval = 'male';
$("#gender").val(varval);
});

.gnM  {width:137px;height: 60px;background:#E8E8E8 url('http://www.41q.org/admin/img/male.png') 0px 0px no-repeat;margin-top:15px;padding: 0;border: 0;margin-left: 0px;float: left;outline: none;text-align:center;font-family: Verdana, Arial, Helvetica, sans-serif;font-size: 105%;font-style:normal;color:#03F;}

.gnF  {width:137px;height: 60px;background:#E8E8E8 url('http://www.41q.org/admin/img/female.png') 0px 0px no-repeat;margin-top:15px;padding: 0;border: 0;margin-left: 0px;float: left;outline: none;text-align:center;font-family: Verdana, Arial, Helvetica, sans-serif;font-size: 105%;font-style:normal;color:#03F;}

.button-toggle-on    {background-position: 0 -120px} 
```

​ ​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T01:08:01.487

你没有在那个小提琴中包含 jQuery 库，它现在被添加了。

包裹在 $ready 函数中，移除了默认的男性选择；应用选择器并按预期更新您的“valval”。请参阅下面的更新小提琴：

**编辑**按要求更新。：

按照要求：

[http://jsfiddle.net/B4XkL/3/](http://jsfiddle.net/B4XkL/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T02:36:38.380

我采取了一种稍微不同的方法，并冒昧地清理了一些东西。

[http://jsfiddle.net/natedavisolds/Uksgq/4/](http://jsfiddle.net/natedavisolds/Uksgq/4/)

# image - 检测图像中主要颜色的最快方法？

> ID：10133920
> 
> 赞同：3
> 
> 时间：2012-04-13T00:54:15.367
> 
> 标签：image

我不是特别热衷于使用的语言或库，而是能够很好且足够快地完成工作的工具。或者也许是使用的算法或方法。

非常感谢任何提示、建议代码示例、URL 链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T13:54:03.190

随机选择一个像素。它的颜色是图像中的主要颜色。这是相对快速且非常绝望的。

随机选择 2 个像素。取这两者的“模式颜色”。慢一点，不那么绝望。

选择 3 个像素，...

你可以看到这是怎么回事

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T01:00:26.943

我过去这样做的一种方法是拍摄图像并将其缩小为 1x1 图像，这将为您提供最常用的颜色，或者 2x2 用于呈现每个象限中最常用的颜色以及从那里开始。这不是特别好，但这是我能想到的最快的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T14:32:56.727

使用[Python Imaging Library](http://www.pythonware.com/products/pil/index.htm)，您可以将图像转换为有限的调色板，然后向它询问颜色。类似的东西（尚未测试以下内容）：

```
from PIL import Image
im = Image.open("foo.jpg")
im = im.convert("P", Image.ADAPTIVE, colors=16) 
```

使用`Image.ADAPTIVE`,`im.convert`将选择 16 种最常见的颜色，也称为*调色板*。然后，您应该能够使用`im.palette`.

# ruby-on-rails - 启动 Rails 服务器时未初始化的常量 Formtastic::SemanticFormBuilder (NameError)

> ID：10133924
> 
> 赞同：1
> 
> 时间：2012-04-13T00:55:02.947
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem, nameerror

我试图启动我的 Rails 服务器，但出现以下错误：

> /config/initializers/formtastic.rb:27:in `': 未初始化的常量 Formtastic::SemanticFormBuilder (NameError)

我唯一记得我上次做的是捆绑安装，从那以后它一直没有工作。我尝试删除并重新安装我的 gem，甚至是 formtastic gem。当我从我的 gemfile 中删除 formtastic gem 时，我收到以下错误：

> /config/initializers/formtastic.rb:27:in `': 未初始化的常量 Formtastic (NameError)

然后我去评论`formtastic.rb`看看发生了什么，当我尝试启动服务器时，我又收到另一个错误，来自我的另一个文件：

> /app/api/V1/base_api.rb:11:in`inherited': undefined method`继承 API::V1::ShoppingListAPI:Class (NoMethodError)

无论我做什么，都会出现另一个名称错误。不知道发生了什么以及如何调试它。我试图搜索互联网并没有找到解决方案。想知道是否有人发现了同样的问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-21T20:37:02.293

不，这不是问题。`SemanticFormBuilder`已重命名`FormBuilder`为版本 2。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T10:05:46.853

如果您在初始化程序中创建，如果您不需要该文件并将其删除并运行，`formatastic.rb`则会收到此*错误。*
路径是：

```
Configuration/Initializers/formtastic.rb 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T05:34:09.630

这似乎是一个 Gem 依赖问题。当您执行“捆绑安装”时，您可能已经安装了您之前使用的另一个 Gem 版本。

我强烈建议您使用 RVM 并创建 Gemset 来避免和防止 Gem 依赖问题： [https ://rvm.io/](https://rvm.io/)

此外，您可能想查看您的 Gemfile 和 Gemfile.lock 以了解它们是如何工作的（查看 Railscasts 以获取更多信息）。我认为删除 Gem 并不是一个好主意，如果重新安装它可能会更好。删除该文件也不是很有帮助。尝试使用 RVM 解决这个问题并安装正确的 gem，你会很高兴的。

# iphone - 更改其包含 UIView 的 UIButton

> ID：10133925
> 
> 赞同：0
> 
> 时间：2012-04-13T00:55:25.163
> 
> 标签：iphone, objective-c, cocoa-touch, uitableview, uibutton

我有一个包含一些按钮的 UITableViewCells 设置。单击某些按钮时，包含这些按钮的 UIView 会发生变化。不幸的是，这会导致单元格被选中，而按钮实际上捕获了触摸（如果在触摸时未更改包含视图，则此方法可以正常工作）。

一旦被 UIButton 检测到一次，有没有办法防止触摸传递到单元格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T01:00:44.313

如果你实施

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

对于托管表视图并为包含按钮的行返回 nil，那么当您点击按钮时它将不会被选中。

如果您需要在用户点击按钮以外的任何内容时选择行，那么您可以在按钮的操作方法中调用 [tableVeiw deselectRowAtIndexPath:indexpathForButton animated:NO]

# python - 如何将变量传递给 Python/Django 中的继承类？

> ID：10133928
> 
> 赞同：0
> 
> 时间：2012-04-13T00:55:47.330
> 
> 标签：python, django, django-forms, django-widget

这可能更像是一个面向对象的 Python 问题。但它来自我问过的关于 Django的[这个问题。](https://stackoverflow.com/questions/10099710/how-to-manually-create-a-select-field-from-a-modelform-in-django)

所以@burhan 建议不要在我的 Django 模板中手动写出我的自定义`<select>`和`<option>`标签，我应该只使用自定义`ModelChoiceField`和`forms.Select`.

我当前继承`ModelForm`并创建了一个`OrderCreateForm`为我的模型调用的自定义表单`Order`，`creator`'s`queryset`是基于`creator`'s`user_type`的，因此我需要以某种方式将变量传递给自定义`ModelForm`以在自定义中使用`ModelChoiceField`。

所以我最终想要这样的东西

```
class OrderCreateForm(ModelForm):
    class Meta :
        model=Order
        fields=('work_type', 'comment',)

    def __init__(self):
        # somehow get a variable called user_type

    if user_type == 'foo':
        queryset = User.objects.all()
    else:
        queryset = User.objects.filter(userprofle__user_type='bar')

    creator = MyCustomField(queryset=queryset,
                            empty_label="Please select",
                            widget=forms.Select(attrs={'onchange':'some_ajax_function()'}) 
```

`__init__`我知道在类中创建参数`__init__`与`ModelForm.__init__`. 我也想调用我的自定义`ModelForm`类，例如`form=OrderCreateForm(user_type='foo_bar')`. 那有可能吗。

对不起，如果我的问题令人困惑，就像我说我是一个 OO 新手，我不太了解所有的术语和概念。

**编辑：**这是来自 Django 的一些源代码`ModelForm`：

```
class BaseForm(StrAndUnicode):
    # This is the main implementation of all the Form logic. Note that this
    # class is different than Form. See the comments by the Form class for more
    # information. Any improvements to the form API should be made to *this*
    # class, not to the Form class.
    def __init__(self, data=None, files=None, auto_id='id_%s', prefix=None,
                 initial=None, error_class=ErrorList, label_suffix=':',
                 empty_permitted=False):

class BaseModelForm(BaseForm):
    def __init__(self, data=None, files=None, auto_id='id_%s', prefix=None,
                 initial=None, error_class=ErrorList, label_suffix=':',
                 empty_permitted=False, instance=None):
        opts = self._meta
        if instance is None:
            if opts.model is None:
                raise ValueError('ModelForm has no model class specified.')
            # if we didn't get an instance, instantiate a new one
            self.instance = opts.model()
            object_data = {}
        else:
            self.instance = instance
            object_data = model_to_dict(instance, opts.fields, opts.exclude)
        # if initial was provided, it should override the values from instance
        if initial is not None:
            object_data.update(initial)
        # self._validate_unique will be set to True by BaseModelForm.clean().
        # It is False by default so overriding self.clean() and failing to call
        # super will stop validate_unique from being called.
        self._validate_unique = False
        super(BaseModelForm, self).__init__(data, files, auto_id, prefix, object_data,
                                            error_class, label_suffix, empty_permitted)

    def _update_errors(self, message_dict):
        for k, v in message_dict.items():
            if k != NON_FIELD_ERRORS:
                self._errors.setdefault(k, self.error_class()).extend(v)
                # Remove the data from the cleaned_data dict since it was invalid
                if k in self.cleaned_data:
                    del self.cleaned_data[k]
        if NON_FIELD_ERRORS in message_dict:
            messages = message_dict[NON_FIELD_ERRORS]
            self._errors.setdefault(NON_FIELD_ERRORS, self.error_class()).extend(messages)

    def _get_validation_exclusions(self):
        """
        For backwards-compatibility, several types of fields need to be
        excluded from model validation. See the following tickets for
        details: #12507, #12521, #12553
        """
        exclude = []
        # Build up a list of fields that should be excluded from model field
        # validation and unique checks.
        for f in self.instance._meta.fields:
            field = f.name
            # Exclude fields that aren't on the form. The developer may be
            # adding these values to the model after form validation.
            if field not in self.fields:
                exclude.append(f.name)

            # Don't perform model validation on fields that were defined
            # manually on the form and excluded via the ModelForm's Meta
            # class. See #12901.
            elif self._meta.fields and field not in self._meta.fields:
                exclude.append(f.name)
            elif self._meta.exclude and field in self._meta.exclude:
                exclude.append(f.name)

            # Exclude fields that failed form validation. There's no need for
            # the model fields to validate them as well.
            elif field in self._errors.keys():
                exclude.append(f.name)

            # Exclude empty fields that are not required by the form, if the
            # underlying model field is required. This keeps the model field
            # from raising a required error. Note: don't exclude the field from
            # validation if the model field allows blanks. If it does, the blank
            # value may be included in a unique check, so cannot be excluded
            # from validation.
            else:
                form_field = self.fields[field]
                field_value = self.cleaned_data.get(field, None)
                if not f.blank and not form_field.required and field_value in EMPTY_VALUES:
                    exclude.append(f.name)
        return exclude

    def clean(self):
        self._validate_unique = True
        return self.cleaned_data

    def _post_clean(self):
        opts = self._meta
        # Update the model instance with self.cleaned_data.
        self.instance = construct_instance(self, self.instance, opts.fields, opts.exclude)

        exclude = self._get_validation_exclusions()

        # Foreign Keys being used to represent inline relationships
        # are excluded from basic field value validation. This is for two
        # reasons: firstly, the value may not be supplied (#12507; the
        # case of providing new values to the admin); secondly the
        # object being referred to may not yet fully exist (#12749).
        # However, these fields *must* be included in uniqueness checks,
        # so this can't be part of _get_validation_exclusions().
        for f_name, field in self.fields.items():
            if isinstance(field, InlineForeignKeyField):
                exclude.append(f_name)

        # Clean the model instance's fields.
        try:
            self.instance.clean_fields(exclude=exclude)
        except ValidationError, e:
            self._update_errors(e.message_dict)

        # Call the model instance's clean method.
        try:
            self.instance.clean()
        except ValidationError, e:
            self._update_errors({NON_FIELD_ERRORS: e.messages})

        # Validate uniqueness if needed.
        if self._validate_unique:
            self.validate_unique()

    def validate_unique(self):
        """
        Calls the instance's validate_unique() method and updates the form's
        validation errors if any were raised.
        """
        exclude = self._get_validation_exclusions()
        try:
            self.instance.validate_unique(exclude=exclude)
        except ValidationError, e:
            self._update_errors(e.message_dict)

    def save(self, commit=True):
        """
        Saves this ``form``'s cleaned_data into model instance
        ``self.instance``.

        If commit=True, then the changes to ``instance`` will be saved to the
        database. Returns ``instance``.
        """
        if self.instance.pk is None:
            fail_message = 'created'
        else:
            fail_message = 'changed'
        return save_instance(self, self.instance, self._meta.fields,
                             fail_message, commit, construct=False)

    save.alters_data = True

class ModelForm(BaseModelForm):
    __metaclass__ = ModelFormMetaclass 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T02:06:18.690

您很可能需要在 OrderCreateForm 中初始化 ModelForm

```
class OrderCreateForm(ModelForm):
    class Meta :
        model=Order
        fields=('work_type', 'comment',)

    # *args and **kwargs will help you to main the compatibility with your parent
    # class without to manage all arguments
    def __init__(self, user_type, *args, **kwargs):
        # ModelForm.__init__(self, *args, **kwargs)
        # Usage of super is recommended.
        super(OrderCreateForm, self).__init__(*args, **kwargs)
        self.user_type = user_type

        if self.user_type == 'foo':
            queryset = User.objects.all()
        else:
            queryset = User.objects.filter(userprofle__user_type='bar')

        self.creator = MyCustomField(
          queryset=queryset,
          empty_label="Please select",
          widget=forms.Select(attrs={'onchange':'some_ajax_function()'})
        ) 
```

那是你需要的吗？

霍尔迪

# javascript - 在 div 中搜索元素

> ID：10133936
> 
> 赞同：0
> 
> 时间：2012-04-13T00:56:22.430
> 
> 标签：javascript, html

我正在尝试为`div`包含多个图像的搜索栏。我有搜索工作，但是当它隐藏不适合搜索的元素时，元素之间只有空格。我想要发生的是让剩余的元素彼此重新定位。我做了一个[jsFiddle](http://jsfiddle.net/JnBmL/14/)来展示我到目前为止所拥有的。尝试在搜索字段中输入“a”或“b”，您就会明白我的意思。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T01:00:45.633

使用`display: none`而不是`visibility: hidden`.

* * *

*   `display: none`从 DOM 中移除元素。例子：

    ```
    .cheshire_cat {
        display: none;
    } 
    ```

    该元素将完全消失，就像它不存在一样。

*   `visibility: hidden`就像元素是完全透明的一样。例子：

    ```
    .ninja {
        color: black;
        visibility: hidden;
    } 
    ```

    该元素仍将存在，在相同的位置，占据相同的空间，但您将无法看到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T01:01:30.213

改变这个

```
objects[i].style.visibility = 'hidden'; 
```

对此

```
objects[i].style.display = 'none'; 
```

并再次显示图像

```
objects[i].style.display = ''; 
```

# file - 括号错误

> ID：10133937
> 
> 赞同：0
> 
> 时间：2012-04-13T00:56:34.443
> 
> 标签：file, batch-file

这是我正在制作的这批

```
@echo off  
title TXTanimation  
set dir101=C:\USers\Jake\Desktop\file.bat  
goto menu  
echo Lets make a text animation  
pause  
set /p dir101=where will the .bat be saved:  
echo @ECHO OFF > %dir101%  
:menu  
echo 0=Edit important information  
echo 1=Display .txt  
echo 2=Play sound  
echo 3=Close sound player  
echo 4=Add nessicary wait between .txt  
echo 5=Label point  
echo 6=Edit variable  
echo 7=Goto point  
echo 8=Create IF sentence  
echo 9=End it  
Set /p choose=which one:  

If '%choose%'=='0' (  
SEt /p title=What is the title  
:LOL101  
set /p color=what color do you want (type test to experiment with the colors)  
If '%color%'=='test' goto tester  
goto model  
:tester  
SEt /p test=Please give hexadecimal number type exit to leave:  
if '%test%'=='exit' goto LOL101  
color %test%  
goto tester  
:model 
echo title %title% >> %dir101%  
echo color %color% >> %dir101%  
)  

If '%choose%'=='1' (  
set /p dir=what is the dir of your .txt:  
)  
If '%choose%'=='1' (  
echo cls >> %dir101%  
echo type %dir% >> %dir101%  
)  
If '%choose%'=='4' (  
SEt /p thyme=How much milliseconds 250 is usual:  
echo ping 192.168.1.1 -n 1 -w %thyme% >> %dir101%  
)  
goto menu  
If '%choose%'=='9' (  
echo Thanks for making  
pause  
) 
```

它将用于在 .bat 文件中创建 .txt 动画。我可以完成它，但我首先需要解决一个问题。

问题是它确实 `echo title %title% >> %dir101% echo color %color% >> %dir101%` 存在，即使在括号中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T02:03:26.883

你不是很清楚你有什么问题。但是，我发现您的代码存在一个常见问题。

您正在设置环境变量，然后尝试使用立即扩展访问该值，所有这些都在括号括起来的同一代码块内。这是行不通的，因为在解析块时会发生扩展，并且在执行任何操作之前会一次性解析整个块。因此，您最终会获得在块内设置值之前存在的值。

`SETLOCAL EnableDelayedExpansion`解决方案是在脚本顶部启用延迟扩展。然后使用延迟扩展 ( `!var!`) 而不是正常扩展 ( `%var%`) 在执行时而不是在解析时获取变量的值。

有关更多信息，请在命令提示符下键入并从*“最后，添加了对延迟环境变量扩展的支持...”*`HELP SET`开始的段落开始阅读。

# css - Div 页面设计在其他分辨率下看起来不对

> ID：10133939
> 
> 赞同：1
> 
> 时间：2012-04-13T00:56:46.160
> 
> 标签：css, html

我有一个 75% 宽度和 100% 高度的主 div。首先，背景图像不会一直走到最后。其次，在 div 里面，我有两个 div，一个在左边，一个在右边。在右边，我主要是文本，在较小的分辨率下，文本会脱离 div，尽管它有 100% 的高度。我试图设置像素高度，但在不同的分辨率下看起来是错误的。有什么解决办法吗？

此外，在某些分辨率下，左侧 div 上方似乎有太多空间，但在其他分辨率下，右侧 div 有。我只是不明白我做错了什么。

这是代码的一部分。另外，我也使用了一张桌子，以安排两个较低的 div。我知道这可能是一团糟。:D

CSS：

```
body {
    height: 100%;
    font-family: Tahoma,sans-serif;
    background-image: url("images/pattern.jpg");
    color: #005200;
    font-size: 15px;
    text-align: left;
}

html {
    background: #47B224;
    height: 100%;
}

.main {
    background: white;
    width: 76%;
    margin: 0;
    padding: 10px;
    border: 1px solid black;
    height: 100%;
    position: absolute;
    top: 0;
    left: 50%;
    margin-left: -38%;
}

.left {
    margin: 5px;
    text-align: left;
    width=135px;
}

.right {
    padding: 5px;
    float: right;
    text-align: left;
}

table {
    margin-top: 20px;
    padding: 20px;
    padding-top: 0px;
} 
```

其余的就像：

```
<body>
<div class="main">
<table>
    <td>
        <div class="left">
        Content:left
        </div>
    </td>
    <td>
        <div class="right">
        Content:right
        </div>
    </td>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:31:40.393

[jsfiddle](http://jsfiddle.net/Qfsqg/)

我做了我认为你描述的改变。如果您希望您的背景在整个屏幕上重复，那么您必须告诉它重复，`background-repeat: repeat;` 我也将此应用于`html`标签而不是`body`标签。

这可能是设计使然，但对我而言，您似乎想将主要部分拆分为列，在这种情况下您需要`float: left;`在左列上使用...这再次取决于您想要什么，不应该对任何事情都有影响。

不过，就个人而言，我会衡量您的目标受众是什么，并找出最低分辨率是多少。从那个设计到你在左边增加边距的那个，我们在更高分辨率的右边。

# matlab - matlab中的隐式接口

> ID：10133941
> 
> 赞同：0
> 
> 时间：2012-04-13T00:57:14.293
> 
> 标签：matlab, interface, fortran, implicit

似乎我不擅长 FORTRAN 或 MATLAB，但对它们都有一点了解。

虽然我发现 MATLAB 擅长处理矩阵，但我还发现 fortran 程序中的隐式接口相当方便（我可以将声明的变量，尤其是一些大型数组，传递给隐式函数而不将它们作为输入伪参数，而且我也可以通过接口中声明的变量很容易返回调用程序）。

我只是想知道 MATLAB 中是否有任何类似的机制作为隐式接口，以便我可以像使用 FORTRAN 一样完成工作。（全局变量似乎不是很好，因为如果我尝试经常调用该函数，它只会变成一项乏味的工作——也许我错了）

你怎么看？谢谢。

* * *

这是一个例子：

```
PROGRAM test_function
IMPLICIT NONE
REAL :: A, B
REAL :: C,D,E

A = 1
B = 2
D = 3
E = xf(A)-A

WRITE (*,*), "A = ", A
WRITE (*,*), "B = ", B
WRITE (*,*), "C = ", C
WRITE (*,*), "D = ", D  
WRITE (*,*), "E = ", E  

CONTAINS
FUNCTION xf(x)
    IMPLICIT NONE
    REAL, INTENT(IN) :: x
    REAL :: xf
    C = x+B
    D = x+D
    xf = A+B+C
END FUNCTION xf

END PROGRAM test_function 
```

D 被传递到函数 xf(·) 中而不被视为哑参数，并且 D 也可以不受限制地传递出去。程序给出的结果如下：

```
 A =    1.0000000    
 B =    2.0000000    
 C =    3.0000000    
 D =    4.0000000    
 E =    5.0000000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:45:46.133

我想我现在开始理解你的问题了。

郑重声明，Fortran 的这个特性，你显然可以将参数传递给函数而不在函数签名中引用它们，这是一个坏事。当然，它只在这里有效，因为函数定义包含在与程序本身相同的源范围内。

如果您已超过 18 岁，请继续在您的程序中做一些危险的事情。如果不是，请立即停止并正确地做事——不要将参数传递给函数参数列表之外的函数，也不要将任何东西传递给函数，而不是通过函数本身的结果。

您也可以在 Matlab 中执行此操作。如果您在工作区中放置一个名为“a”的变量，那么任何引用名为“a”的变量的脚本都会引用该变量。Matlab 函数则不同，它们定义了自己的范围单位。要从 Matlab 函数中引用工作区变量，您必须将其传入或使用全局变量功能。如果您不了解 Matlab 中脚本和函数之间的区别，请点击文档。

# java - Java 中的 Google API 与 Struts

> ID：10133942
> 
> 赞同：0
> 
> 时间：2012-04-13T00:57:21.137
> 
> 标签：java

如果我使用下面的方法使用普通 Java 项目获取 Google 帐户的令牌，它绝对可以正常工作，但如果我在我的 Struts 项目中使用相同的代码，它会给我一个`ClassNotFoundException`. 有人可以告诉我为什么它会抛出异常吗？我搞不清楚了。

```
public String Login(String username,String password){
    String token = null;
     HttpClient client = new DefaultHttpClient();
     String postURL = "https://www.google.com/accounts/ClientLogin";
     HttpPost post = new HttpPost(postURL);
     List<NameValuePair> nvps = new ArrayList<NameValuePair>();
     nvps.add(new BasicNameValuePair("accountType", "HOSTED_OR_GOOGLE"));
     nvps.add(new BasicNameValuePair("Email", username));
     nvps.add(new BasicNameValuePair("Passwd", password));
     nvps.add(new BasicNameValuePair("service", "cp"));// Name of Google service 
     nvps.add(new BasicNameValuePair("source", "feras-MeAndTheGreenRobot-1.0"));
     UrlEncodedFormEntity ent;
     try {
             ent = new UrlEncodedFormEntity(nvps, HTTP.UTF_8);
             post.setEntity(ent);
             HttpResponse responsePOST = client.execute(post);
             HttpEntity resEntity = responsePOST.getEntity();
             if (resEntity != null) {
                      String authToken=  EntityUtils.toString(resEntity);
                     System.out.println("RESPONSE is "+ authToken );
 token = authToken.substring(authToken.indexOf("Auth=") + 5, authToken.length()).trim();
                     System.out.println("Auth is "+  authToken.substring(authToken.indexOf("Auth=") + 5, authToken.length()).trim());
             }
     } catch (UnsupportedEncodingException e) {
             e.printStackTrace();
     } catch (ClientProtocolException e) {
             e.printStackTrace();
     } catch (IOException e) {
             e.printStackTrace();
     }
    return token;
} 
```

例外

```
java.lang.ClassNotFoundException: org.apache.http.client.ClientProtocolException
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1701)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1546)
at com.struts.action.LoginAction.submit(LoginAction.java:85)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:404)
at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:267)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:229)
at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:221)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:150)
at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:48)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:123)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:184) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T01:27:57.287

您是否将`"WEB-INF/lib"`使用的 jar 库文件放在您的 Web 项目的文件夹下`HttpClient`？

# vb.net - 数据集更新vb.net后DataGridView不刷新

> ID：10133946
> 
> 赞同：4
> 
> 时间：2012-04-13T00:57:40.230
> 
> 标签：vb.net, datagridview, dataset, tableadapter

我有一个带有 dataGridView 的 vb.net 表单

dataGridView 数据源是带有这条sql语句的dgvTableAdapter

```
SELECT membres.ID, membres.refere_par, bands.titre, 
       membres_1.prenom & ' ' & membres_1.nom  AS reference_nom
FROM ((bands INNER JOIN membres ON bands.ID = membres.[band]) 
      INNER JOIN membres membres_1 ON membres.refere_par = membres_1.ID) 
```

我像这样从成员表中删除成员

```
' Get member id 
Dim userId As Integer 
userId = DataGridView1.Item( 0,0).Value

' Delete the member
Me.MeoshowDataSet2.membres.FindByID(userId).Delete()
Me.MembresTableAdapter.Update(Me.MeoshowDataSet2)

' Refresh datagrid
dataGridView1.Refresh() ' does nothing 
```

我知道删除语句有效，因为我看到了数据库中的更改。如果我关闭表单并重新打开它，则 dataGridView 是最新的。

成员表是一个访问表

我在视觉 2010 调试模式下运行该应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T01:17:12.693

这样做的通常方法是重置`DataSource`.`DataGridView`

试试这个代码（使用正确的代码从数据集中提供正确的表）：

```
dataGridView1.DataSource = typeof(List); 
dataGridView1.DataSource = dataset.Tables["your table"]; 
```

调用`.Refresh()`不起作用，因为它只强制重新绘制，但绘制网格的代码不知道更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T17:29:24.873

我在寻找完全相同的问题时偶然发现了这一点。不过网上没找到。这对我有用：

```
Public Sub RefreshData()
    dTable.Clear()
    dAdapter.Fill(dTable)
    dtaDataGrid.DataSource = dTable
End Sub

Private Sub btnRefresh_Click(sender As System.Object, e As System.EventArgs) Handles btnRefresh.Click
    RefreshData()

    ClearAllTextBox(Me)
End Sub 
```

首先清除数据表中的所有数据，然后用数据适配器中的数据重新填充它，因为您说数据库已使用您的代码进行了更新，只是它没有刷新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T16:46:41.530

你也可以使用这个：

```
DirectCast(dataGridView1.DataSource, DataTable).AcceptChanges() 
```

只需更换`dataGridView1`. 第二个参数是`DataTable`类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-14T09:49:59.943

...以及对我有用的替代方法：

```
'reset datasource

dgvBHL.DataSource = nothing

' Assign datatable to dgv this always works 1st time it is called

dgvBHL.DataSource = dtData 

'To fix the DGV not refreshing properly after the 1st time, switch the sort order

dgvBHL.Sort(dgvBHL.Columns(0), System.ComponentModel.ListSortDirection.Descending)

dgvBHL.Sort(dgvBHL.Columns(0), System.ComponentModel.ListSortDirection.Ascending)

'No need to do a refresh or anything else 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-02T07:26:13.860

我刚刚添加了这一行：

```
 Me.EmpTableAdapter.Fill(Me.MyDbDataSet1.Emp) 
```

# ruby-on-rails - 在 Rails 中使用 form_for 编辑 has_one 对象

> ID：10133949
> 
> 赞同：2
> 
> 时间：2012-04-13T00:57:59.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, form-for, has-one

我在两个模型之间有一个 has_one / belongs_to 关联-> 用户和 ContactCard。虽然我可以为用户创建联系人卡片，但每当我尝试编辑卡片时，都会从 ContactCardsController 调用创建操作，而不是更新（我可以判断，因为每个卡片都有不同的成功消息）。我不得不说，它改变了联系人卡片的属性。我很高兴它的工作，但宁愿修补我对 Rails 路径和关联的理解中的任何差距。我错过了什么？为什么不使用我期望的动作？此外，如果您知道我可以研究的网络或 github 上的任何相关示例，我会全神贯注。谢谢！

联系卡控制器...

```
class ContactCardsController < ApplicationController      

 def create 
   current_user.build_contact_card(params[:contact_card]) 
   if current_user.contact_card.save
     flash[:success] = "Contact Card created!"
     redirect_to '/account'
   else
     flash[:error] = "Fail!"
     redirect_to '/account'
  end
 end  

  def update
    if current_user.contact_card.update_attributes(params[:contact_card])
      flash[:success] = "Profile updated."
      redirect_to '/account'
    else
      flash[:error] = "Fail!"
      redirect_to '/account'
    end
  end 
```

链接编辑表格...

```
<%= link_to "Edit Profile", edit_user_contact_card_path(current_user) %> 
```

编辑表格...

```
<%= form_for [current_user, current_user.build_contact_card], :url => user_contact_card_path(current_user) do |f| %>

<%= f.label :first_name %>
<%= f.text_field :first_name %>    

<%= f.label :last_name %> 
<%= f.text_field :last_name %>

<%= f.submit "Save Contact Details", :class => "btn btn-large btn-primary" %>

<% end %> 
```

相关路线...

```
resources :users do      
  resource :contact_card    
   ..... 
```

User 模型 has_one :contact_card 和 ContactCard 模型 belongs_to:user

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T17:22:29.227

```
<%= form_for [current_user, current_user.build_contact_card], :url =>   user_contact_card_path(current_user) do |f| %> 
```

这是在您每次编辑时构建一个新的联系人卡片！将其更改为

```
<%= form_for [current_user,contact_card], :url => user_contact_card_path(current_user) do |f| %> 
```

您可能希望在用户控制器的创建操作中使用 build_contact_card

# xml - 为什么 xmllint 将其返回为无效

> ID：10133954
> 
> 赞同：1
> 
> 时间：2012-04-13T00:59:07.387
> 
> 标签：xml, xsd, amazon, xsd-validation, xmllint

当我尝试验证 Amazon Marketplace Web 服务 SubmitFeed 以完成订单时，我收到以下错误：

xmllint.exe --schema OrderFulfillment.xsd OrderFulfillment.xml

OrderFulfillment.xml:2：元素 AmazonEnvelope：架构有效性错误：元素“AmazonEnvelope”：没有可用于验证根的匹配全局声明。OrderFulfillment.xml 无法验证

订单履行.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<AmazonEnvelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="amzn-envelope.xsd">
    <Header>
        <DocumentVersion>1.01</DocumentVersion>
        <MerchantIdentifier>AXGZ4X5NTV6SN</MerchantIdentifier>
    </Header>
    <MessageType>OrderFulfillment</MessageType>
    <Message>
        <MessageID>1</MessageID>
        <OrderFulfillment>
            <AmazonOrderID>104-5894782-1841713</AmazonOrderID>
            <FulfillmentDate>2012-04-07T15:54:40.154Z</FulfillmentDate>
            <FulfillmentData>
                <CarrierCode>USPS</CarrierCode>
                <ShippingMethod>Priority</ShippingMethod>
                <ShipperTrackingNumber>9109901000372243321450</ShipperTrackingNumber>
            </FulfillmentData>
        </OrderFulfillment>
    </Message>
</AmazonEnvelope> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:08:10.857

找到解决方案，您必须使用父架构进行验证，在本例中为 amzn-envelope.xsd

请参阅[lxml 如何在加载内联模式的同时针对 XSD 文件验证某些 XML？](https://stackoverflow.com/questions/8424457/how-can-lxml-validate-some-xml-against-both-an-xsd-file-while-also-loading-an-in)

# math - 没有参考平面的两个向量之间的符号角

> ID：10133957
> 
> 赞同：15
> 
> 时间：2012-04-13T01:00:08.443
> 
> 标签：math, vector, 3d, geometry

（在三个维度上）我正在寻找一种方法来计算两个向量之间的符号角度，除了这些向量之外没有任何信息。正如在[这个问题](https://stackoverflow.com/questions/5188561/signed-angle-between-two-3d-vectors-with-same-origin-within-the-same-plane-reci)中所回答的那样，在给定向量垂直的平面的法线的情况下计算有符号角度很简单。但是如果没有这个价值，我就无法做到这一点。很明显，两个向量的叉积会产生这样的法线，但是我使用上面的答案遇到了以下矛盾：

```
signed_angle(x_dir, y_dir) == 90
signed_angle(y_dir, x_dir) == 90 
```

我希望第二个结果是负面的。这是因为叉积`cross(x_dir, y_dir)`与 的方向相反`cross(y_dir, x_dir)`，给定以下具有标准化输入的伪代码：

```
signed_angle(Va, Vb)
    magnitude = acos(dot(Va, Vb))
    axis = cross(Va, Vb)
    dir = dot(Vb, cross(axis, Va))
    if dir < 0 then
        magnitude = -magnitude
    endif
    return magnitude 
```

我不相信 dir 在上面永远不会是负面的。

我在建议的 atan2 解决方案中看到了同样的问题。

我正在寻找一种方法来制作：

```
signed_angle(a, b) == -signed_angle(b, a) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-13T16:54:49.837

相关数学公式：

```
 dot_product(a,b) == length(a) * length(b) * cos(angle)
  length(cross_product(a,b)) == length(a) * length(b) * sin(angle) 
```

对于 3-D 向量之间的稳健角度，您的实际计算应该是：

```
 s = length(cross_product(a,b))
  c = dot_product(a,b)
  angle = atan2(s, c) 
```

如果`acos(c)`单独使用，在角度较小的情况下会出现严重的精度问题。计算`s`和使用`atan2()`可以为所有可能的情况提供可靠的结果。

由于`s`始终是非负的，因此生成的角度将在 0 到 pi 的范围内。总会有一个等效的负角`(angle - 2*pi)`，但没有几何理由偏爱它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T01:05:27.400

> 没有参考平面的两个向量之间的符号角

```
angle = acos(dotproduct(normalized(a), normalized(b))); 
```

* * *

> 有符号角度（a，b）== -有符号角度（b，a）

我认为没有某种参考向量是不可能的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T05:11:36.203

谢谢大家。在查看了这里的评论并回顾了我试图做的事情之后，我意识到我可以使用给定的标准角度来完成我需要做的事情。我刚刚挂断了我的签名角度函数的单元测试。

作为参考，我将得到的角度反馈到旋转函数中。我没有考虑到这样一个事实，即这自然会使用与 signed_angle 相同的轴（输入向量的叉积），并且正确的旋转方向将遵循该轴所面向的任何方向。

更简单地说，这两者都应该“做正确的事”并朝不同的方向旋转：

```
rotate(cross(Va, Vb), signed_angle(Va, Vb), point)
rotate(cross(Vb, Va), signed_angle(Vb, Va), point) 
```

第一个参数是旋转轴，第二个参数是旋转量。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-13T10:49:19.690

**如果您想要的只是一个一致的结果，那么任何在a** × **b**和**b** × **a**之间为您的法线选择的任意方式都可以。也许选择字典顺序较小的那个？

（但您可能想解释您实际上要解决的问题：也许有一个解决方案不涉及计算任意 3 向量之间的一致符号角。）

# wpf - 将三角形索引转换为 Point3d，然后显示为线

> ID：10133961
> 
> 赞同：1
> 
> 时间：2012-04-13T01:00:57.953
> 
> 标签：wpf, 3d

我使用 Helix3d 工具包导入模型。接下来，我对 3Dmodel 执行命中测试。然后我从 rayMeshResult.Meshit 获取 MeshGeometry3D 信息。最后，我从 MeshGeometry3D 中获得了顶点位置信息和 triangleIndices。现在我从 LinesVisual3D 中克隆点，然后将 triangleIndices/vertex 信息输入到克隆中。最后，我将克隆的点数据复制到 LinesVisual3D.Points 中，并将线条添加到我的视口中。

正如您从链接中的图片中看到的那样，并非立方体的所有边缘都被绘制出来，但所有点都在那里。

[http://www.freeimagehosting.net/fhws5](http://www.freeimagehosting.net/fhws5)

```
GeometryModel3D hitgeo = rayMeshResult.ModelHit as GeometryModel3D;
MeshGeometry3D newGeom = rayMeshResult.MeshHit as MeshGeometry3D;
Point3DCollection srtpnt = modelLines.Points.Clone();

for (int i = 0; i < newGeom.TriangleIndices.Count; i ++)
{
    srtpnt.Add(newGeom.Positions[newGeom.TriangleIndices[i]]);
    textBlock4.Text += newGeom.Positions[newGeom.TriangleIndices[i]].ToString() + "\n";
}

modelLines.Points = srtpnt;
modelPoints.Points = srtpnt;

modelPoints.Color = Colors.Red;
modelPoints.Size = 15;

modelLines.Thickness = 6;
modelLines.Color = Colors.Blue;

MainViewport.ClearChildren();
MainViewport.Children.Add(modelLines);
MainViewport.Children.Add(modelPoints);
UpdateResultInfo(rayMeshResult); 
```

# android - 我正在使用 AsyncTask 来执行一个长时间运行的任务，但它似乎仍在主 ui 中执行它

> ID：10133963
> 
> 赞同：1
> 
> 时间：2012-04-13T01:01:11.133
> 
> 标签：android, multithreading, user-interface, android-asynctask, android-anr-dialog

我正在尝试编写一个测试应用程序来压缩和解压缩文件。我找到了一个用于进行文件压缩/解压缩的开源库，但是您可以猜到这确实需要一些时间，所以我无法在主 ui 中运行它，所以我想我会使用 AsyncTask 在后台线程上进行繁重的工作，然后就开始吐了，一个完成的消息，一切都会好起来的。但我在这里有两个大问题。当我点击按钮时，它确实会解压缩文件，但它似乎是在主 ui 中而不是在后台线程中执行此操作，因为应用程序将锁定并且我确实得到了 anr 屏幕，而且我正在关注任何使用 ddms 视图确实出现了新线程，但我看不到任何线程。如果我告诉它我想等待它，它将解压缩文件。但当然我不希望程序看起来冻结或在我身上出现另一个问题是我将它设置为在单击它后立即更新按钮文本，然后在 aysc 任务完成时再次更新但我没有'没有看到任何变化发生，我确实更改了文本，以便它们完全不同，所以我可以分辨出来。它还应该在状态消息中设置一个文本字段。我不认为 onPostExecute 被调用过。有人可以告诉我这里发生了什么吗？

```
package net.pawworks.sandbox.svc;

import java.io.File;
import net.pawworks.utils.mainlib.filetools;
import net.pawworks.utils.mainlib.zipper;
import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class TestserviceActivity extends Activity {
    /** Called when the activity is first created. */
    String readpath= filetools.sdcardpath()+"/ziptestin/";
    TextView readstatus;
    Button readbut;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.ziptest);
        File setup = new File(filetools.sdcardpath()+"/ziptestout");
        setup.mkdir();
        setup = new File(filetools.sdcardpath()+"/ziptestin/");
        setup.mkdir();
        readstatus = (TextView)findViewById(R.id.readstatus);
        readbut = (Button)findViewById(R.id.readit);
        readbut.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v)
            {
                readbut.setText("Loading.....");
                String status="";
                // TODO Auto-generated method stub
                File setup = new File(readpath+"jpgs.zip");
                if(setup.canRead())
                {
                    status="File Readable\n";
                    new unpackit().doInBackground(new String[]{"jpgs.zip",status} );
                    readbut.setText("Read!");
                }
                else {status = "File not Readable:"+setup.toString();readstatus.setText(status);readbut.setText("Read.");}

            }
        });
       }
    private class unpackit extends AsyncTask<String, Void, String>
    {

        @Override
        protected String doInBackground(String... params) 
        {
            // TODO Auto-generated method stub
            Log.e("asynctask", "1:"+params[0]+"2:"+params[1]);
            zipper d = new zipper(readpath+"jpgs.zip",filetools.sdcardpath()+"/ziptestout/");
            d.unzip();
            return params[1]+"\n"+d.status();
        }

        @Override
        protected void onPostExecute(String result)
        {
            readstatus.setText(result);
            readbut.setText("Read?");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T01:07:44.420

你想打电话

```
new unpackit().execute(args); 
```

而不是 doInBackground(args)。这类似于在线程上调用 start() 而不是 run() - 在这种情况下，您的 UI 线程只是执行 doInBackground() 中的代码，但它没有调用任何其他内容。

有关详细信息，请参阅[此处](http://developer.android.com/reference/android/os/AsyncTask.html)的文档和示例代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T02:05:03.220

```
new unpackit().doInBackground(new String[]{"jpgs.zip",status} ); 
```

将上面的行替换为以下::

```
new unpackit().execute(new String[]{"jpgs.zip",status} ); 
```

# linux - Jenkins 无法在 linux 中启动

> ID：10133964
> 
> 赞同：23
> 
> 时间：2012-04-13T01:01:20.813
> 
> 标签：linux, ubuntu, jenkins

升级后去运行jenkins，得到以下信息：

```
start jenkins
start: Job failed to start 
```

就是这样......詹金的日志中没有任何内容......所以至少可以说很难调试。（它还没有运行，或者类似的东西）。

是否有另一个我应该查看的日志会有所帮助？（我假设这个问题的答案会有些迭代，所以希望有人可以让我开始调试这个问题）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-13T05:23:05.897

因此，知道这是一个启动前的错误，我可以进行更深入的调查。

进一步挖掘让我发现文件中的确切行`/etc/init/jenkins.conf`是指向`/usr/share/jenkins/bin/maintain-plugins.sh`

查看这个位置，我发现它不存在（即没有 bin 目录）。这意味着`jenkins-common`由于某种原因不再安装...确实很奇怪...进入`apt-get`并再次安装此组件导致错误：

```
dpkg error processing /var/cache/apt/archives/jenkins-common_1.409.1-0ubuntu4.2_all.deb ... 
```

之前看到这个错误并通过谷歌刷新我的记忆给出了以下解决方案：

```
dpkg -i --force-overwrite /var/cache/apt/archives/jenkins-common_1.409.1-0ubuntu4.2_all.deb 
```

这使得 common 的安装可以正常进行。在此之后，我所要做的就是`/usr/share/jenkins/jenkins.war`用我的备份副本替换 （因为 ubuntu 远远落后于最新发布版本），我能够再次启动服务器。

我不确定是什么导致了问题的开始，但很可能是在 apt-get upgrade/clean 过程中......并且由于 jenkins 与 jenkins-common 冲突的奇怪之处，它没有`/usr/share/jenkins`正确重新填充目录。

不管怎样，很高兴它又能正常工作了。:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-25T10:08:51.973

相反，您可以在安装之前运行以下命令以正确清理发行版留下的任何配置文件：

```
sudo apt-get purge jenkins 
```

然后安装正确的版本。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-01T07:52:23.377

我去看了詹金斯日志 `tail -f /var/log/jenkins/jenkins.log`

就我而言，它没有启动，因为我使用了不兼容的 java 版本。更新并确保它看到正确的java（在我的情况下，它应该使用JRE 1.7打开。要检查，请使用 `java -version`命令）并且一切都应该工作

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-09-17T10:30:49.757

Ubuntu 18.04 LTS 使用 Java 9 作为默认 java

Jenkins 2.107.2 仍然使用 Java 8

[解决方案]

在安装 Jenkins 之前安装 Java 8

```
sudo add-apt-repository ppa:webupd8team/java
sudo apt install oracle-java8-installer
wget -q -O - https://pkg.jenkins.io/debian-stable/jenkins.io.key | sudo apt-key add -
sudo apt-add-repository "deb https://pkg.jenkins.io/debian-stable binary/"
sudo apt install jenkins 
```

见[https://stackoverflow.com/a/49937744/900684](https://stackoverflow.com/a/49937744/900684)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-11-03T07:09:58.800

以下对我有用：

```
sudo rm /etc/init/jenkins.conf
sudo update-rc.d jenkins defaults
sudo service jenkins start 
```

然后....

```
root@core:/# service jenkins start
* Starting Jenkins Continuous Integration Server jenkins                    [ OK ] 
```

借自：[https ://groups.google.com/forum/#!msg/jenkinsci-users/eW_yEWLojFc/tFhb8DKoRHUJ](https://groups.google.com/forum/#!msg/jenkinsci-users/eW_yEWLojFc/tFhb8DKoRHUJ)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-16T04:23:37.593

我从这个链接得到：[https ://serverfault.com/questions/710680/jenkins-not-starting-in-ubuntu](https://serverfault.com/questions/710680/jenkins-not-starting-in-ubuntu)

它可能是由磁盘已满引起的。确实，请尝试手动运行它。像这样： `/usr/bin/java -Djava.awt.headless=true -jar /usr/share/jenkins/jenkins.war --webroot=/var/cache/jenkins/war --httpPort=8080 --ajp13Port=-1`

# javascript - (jQuery) 查找和替换特定文本

> ID：10133969
> 
> 赞同：2
> 
> 时间：2012-04-13T01:01:57.523
> 
> 标签：javascript, jquery, replace

我有以下 HTML 代码，它本质上与我在几行中宣布某些内容的帖子有关，以“[...]”结尾，并在底部添加“阅读更多”链接按钮。单击此按钮时，隐藏的其他内容将随着按钮的消失而淡入，从而使介绍性文本和隐藏的内容可见-足够简单。现在，我已经为此编写了代码，但是当我尝试删除我在偷窥中包含的“[...]”（从点击按钮发生的帖子中）*时，就会出现复杂情况。*这是HTML：

```
<div class="entry">
    <p>Welcome. Talk about something briefly and click below for more. [...]</p>    

    <div class="slide-content">
        <p>Hidden content.</p>
    </div>
    <span id="revealer" class="button"><a href="#">Read more</a></span>
</div> 
```

“entry”和“button”类属于我的 CSS 文件，而“slide-content”属于我的 .js 文件，用于控制淡入淡出效果。出于相同目的，ID“revealer”也属于 .js 文件。这个 HTML 被包裹在一个带有“box”类的 div 标签中。这是每个帖子遵循的格式，完全相同的格式和相同的 HTML 元素——每次需要发布公告时，只需将内容放在段落标签之间并发布即可。这就是我的问题所在，因为我找不到仅在单击按钮的帖子中删除“[...]”的方法。我尝试执行以下操作，但结果是删除了多个帖子中的所有“[...]”：

```
$('.entry p').each(function() {
    var textReplace = $(this).text();
    $(this).text(textReplace.replace('[...]', '')); 
}); 
```

**概括：**

1.  **我只需**要从用户单击的帖子中删除“[...]”文本（“阅读更多”按钮）。我们的想法是在隐藏内容淡入的同时将其删除。
2.  我已经能够完成上述工作，但对于“[...]”的*所有*实例。我需要通过修改我的 jQuery 代码或 HTML 来完善我的选择。
3.  选项 3 是去掉这个“[...]”，但我想把它留在那里，让用户知道她有更多的内容要阅读，我想拥有那个“阅读更多”按钮帖子的一致性。

〜提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:22:31.240

首先，你提到你有多个。在这种情况下，这个：

```
<span id="revealer" class="button"><a href="#">Read more</a></span> 
```

不管用。`id`每个文档的属性必须是唯一的，即您最多可以拥有一个具有特定`id`值的元素。

如果您像这样制作 HTML（对于每个块）：

```
<div class="entry">
    <p>Welcome. Talk about something briefly and click below for more. [...]</p>    

    <div class="slide-content">
        <p>Hidden content.</p>
    </div>
    <span class="revealer button"><a href="#">Read more</a></span>
</div> 
```

你的JS是这样的：

```
function replace(fromp) {
    var textReplace = fromp.text();
    fromp.text(textReplace.replace('[...]', ''));
}

$('.revealer').click(function() {
   var fromp = $(this).siblings().eq(0);
   replace(fromp);
}); 
```

它会正常工作。工作示例：

*   [http://jsfiddle.net/G4t7Q/](http://jsfiddle.net/G4t7Q/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:31:39.433

当您运行页面初始化脚本时，您可以使用 jquery 选择所有帖子和所有删除按钮，并通过它们的点击事件将它们链接起来。我创建了一个 JSFiddle[示例](http://jsfiddle.net/9fmsr/)，但这是它的要点：

```
var removers = $(".remover")
var posts = $(".post")
for (var i = 0; i < removers.length; i++) {
    $(removers[i]).click( { post: posts[i] },
        function(event) {
            var textReplace = $(event.data.post).text()
            $(event.data.post).text(textReplace.replace('[...]', ''))
        }
    )
}​ 
```

这是一个简化的例子；它假定帖子和按钮在标记中排序。

# android - 如何拦截键盘保护（软件菜单）点击，例如“设置”菜单选项点击？

> ID：10133972
> 
> 赞同：0
> 
> 时间：2012-04-13T01:02:05.510
> 
> 标签：android, onclicklistener, keyguard

有没有办法找出用户何时单击屏幕菜单上的“设置”选项？

onClick 列表器的 KeyDown 事件仅捕获手机上的硬件按钮，而不捕获当文本框/editText 获得焦点并显示键保护时显示的软件键盘的单击。

甚至可以使用公共的android SDK。

PS：我只关心 2.2 和 2.3，所以如果这在 3.0 及更高版本上是不可能的，那也没关系。

谢谢

**编辑**

解释一个有助于更好地理解问题的场景！

我有一个带有 editText 和一个按钮的全屏活动。我想拦截用户所做的所有点击，并在此基础上做出一些决定。

我能够注册一个侦听器来拦截正在单击的物理键（HOME、MENU、VOLUME UP/DOWN 等）...问题是，当用户单击 editText 即文本框获得焦点时，软件键盘出现。现在我还想拦截点击了某些键（数字、字母、特殊字符甚至是自定义功能，例如“转到设置”）并根据点击执行操作。

我的问题是，是否有可能，如果是，那么如何？

注意：请不要问我为什么要这样做，因为它的用户体验不好。我非常清楚这一点。我正在尝试在需要此功能的特定上下文中执行此操作。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T01:13:51.620

您需要使用 KeyListener 类和 setKeyListener

[http://developer.android.com/reference/android/widget/TextView.html](http://developer.android.com/reference/android/widget/TextView.html)

这仅允许您修改/过滤输入到 TextView 中。

# center - 居中图像

> ID：10133974
> 
> 赞同：1
> 
> 时间：2012-04-13T01:02:13.840
> 
> 标签：center, css

您好，以下代码已应用了 3 次：

```
<div class="bio">
    <div class="bio-icon"><img src="/images/icon_location.png" alt="Location" /></div>
    <div class="bio-content">
        <div class="bio-title">location:</div>
        <div class="bio-text">' . $obj[0] . '</div>
    </div>
</div> 
```

在每种情况下，bio-icon div 中的图像都是不同的（宽度和高度不同）。基本上，会有一个图标，旁边有一个文本。我希望文本居中（垂直），但我不知道该怎么做，因为每个图标都有不同的高度！我应该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:16:12.327

你可以试试这个

```
.bio {
  display:table;
}

.bio-icon, bio-content {
  display:table-cell;
  vertical-align:middle;
} 
```

唯一的问题是 IE7 无法识别 css 表属性，因此您可能必须使用 jquery 在 IE7 中修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:10:15.747

您可以使用 vertical-align 属性将文本垂直居中[w3 链接here](http://www.w3schools.com/cssref/pr_pos_vertical-align.asp)

对于不同大小的图标问题，在 css 中使用固定的宽度和高度

```
.bio-icon
{
  height:50px;
} 
```

这将自动调整您的图标/图像的大小。

# javascript - 仅限 getElementsByTagName 特定链接

> ID：10133976
> 
> 赞同：0
> 
> 时间：2012-04-13T01:02:26.093
> 
> 标签：javascript, getelementsbytagname

我正在尝试在我的网站上使用 Anarchy Media Player，但不得不稍微更改代码，因为我的媒体文件/网址不是标准格式。它现在提取视频文件，但 javascript 正在查找所有链接并尝试向其中添加播放器。我什至在视频链接中添加了 id “video”，但仍然可以找到页面上的所有链接并添加播放器。如何分离这些链接以仅将播放器添加到其中？

这是查找链接的 javascript 部分：

```
var all = document.getElementsByTagName('a');
for (var i = 0, o; o = all[i]; i++) {
    if(o.idName="video" && o.className!="amplink") {
        // Add player code...
    }
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T01:11:22.830

不知道为什么你不只是这样做：

```
var all = document.getElementsByTagName('a');
for (var i = 0, len = all.length; i<len; i++) {
    if(all[i].idName=="video" && all[i].className!="amplink") {
        // Add player code...
    }
} 
```

那应该对你有用。请注意，我存储了数组长度的值，因此您不必每次迭代都查找它。最小，但确实**略微**提高了性能。

当您在 if 语句中进行设置时，您还设置`idName`了视频`idName="video"`，而不是比较（这将始终返回 true，这是您的问题）。使用双等号运算符 (==) 或三等号运算符 (===) 比较值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:47:09.360

没有 idName 属性。只是`o.id`。而且只能有一个 id，所以这可能会导致一些问题。此外，您正在分配它，而不是比较总是评估为 true 的相等性。如果您有多个类，例如`class="amplink someOtherClass"`!= amplink 将评估为真。最好对 className 进行匹配。像这样：`&& !o.className.match(/ampLink/)`

在另一个班级制作视频并进行比赛。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T01:15:03.880

你确定你不是这个意思`if (o.className == "amplink")`？

除此之外，您所拥有的一切都很好（除了`o.idName="video"`始终返回 true 的位）：http: [//jsfiddle.net/VpMVe/](http://jsfiddle.net/VpMVe/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T01:23:28.180

[您可以使用querySelectorAll](https://developer.mozilla.org/en/DOM/Document.querySelectorAll)获取元素，但[旧版浏览器不支持](http://caniuse.com/#search=queryselector)它（比 IE8、FF3.5、Opera 10、Chrome 4 和 Safari 3.1 更早）。它类似于使用 CSS 选择器（和 jQuery）定位元素。这是[一个演示](http://jsfiddle.net/d7VVF/1/)，让所有与类`video`的链接变红。

```
function get(selector) {
    return document.querySelectorAll(selector)
}

(function() {
    //get all <a> with class "video"
    var video = get('a.video');

    //for each, turn them red
    for (var i = 0; i < video.length; i++) {
        video[i].style.color = 'red';

        //in your case, do whatever you want for each target here

    }
}())​ 
```

# php - “未定义索引”错误

> ID：10133981
> 
> 赞同：-1
> 
> 时间：2012-04-13T01:03:11.867
> 
> 标签：php

我这样做是为了让用户可以在登录表单上检查“记住我”，它会设置 cookie。现在，如果他们注销，它会将他们定向到 logout.php，并且应该删除 cookie。除了我收到这些错误消息外，这一切都有效。

> **注意：**未定义索引：第 6 行 C:\xammp\htdocs\mine\logout.php 中的用户名
> 
> **注意：**未定义索引：第 7 行 C:\xammp\htdocs\mine\logout.php 中的密码

我的 logout.php 代码是

```
<?php

session_start();

if (isset($_SESSION['username'])) {
    setcookie('username', $_POST['username'], false, '/');
    setcookie('password', $_POST['password'], false, '/');
    session_destroy();
    echo "You've benn logged out. <a href='index.php'>Click here</a> to return.";
} else {
    die ('You are not logged in!');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T01:06:38.880

只需使用`isset($_POST['username'])?$_POST['username']:''`而不是`$_POST['username']`

而`isset($_POST['password'])?$_POST['password']:''`不是`$_POST['password']`

* * *

请参阅：[三元运算符](http://php.net/manual/en/language.operators.comparison.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:09:10.520

如果您的用户想要注销，他们不太可能也将他们的用户名或密码提交到注销页面，因此`$_POST['username']`并且`$_POST['password']`将为空，因此您会收到错误。

但是，您不需要知道值（实际用户名或密码）来取消设置 cookie，您只需要知道键（字面意思是“用户名”和“密码”）。

```
<?php
session_start();
setcookie('username', '', time()-3600, '/');
setcookie('password', '', time()-3600, '/');
session_write_close();
header("Location: /");
?> 
```

这会将它们注销并将它们重定向到您的首页。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-13T01:12:44.847

这是因为`$_POST`超全局没有`username`and`password`变量。

我猜想当您从 index.php 链接到 logout.php 时，您并没有 POST 到 logout.php（因此这个调用不会有 POST 变量）。

您需要做的是将用户名和密码保存在会话中（或其他形式的持久存储）：

session_start() 之后的 index.php；

```
if (isset($_POST['username']) && isset($_POST['password'])) {
    $_SESSION['username'] = $_POST['username'];
    $_SESSION['password'] = $_POST['password'];
} 
```

然后在 logout.php 中，您可以使用`$_SESSION`超全局而不是`$_POST`.

顺便说一句，我真的不知道您为什么要将用户名和密码设置为 cookie，但这不是您问题的重点。

# file - CakePHP (2.1) 媒体插件 - 多文件上传

> ID：10133983
> 
> 赞同：1
> 
> 时间：2012-04-13T01:03:32.253
> 
> 标签：file, cakephp, plugins, upload, media

我在我的项目中使用 cakephp 媒体插件，使用整体样式附件表，即所有附件都放在一个表中，其中外键、模型、组等与文件详细信息一起保存。所以我的模型看起来像：

```
class ProjectProfile extends AppModel {

var $name = 'ProjectProfile';
var $useDbConfig = 'default';
var $useTable = 'project_profiles';
var $actsAs = array('Media.Transfer', 'Media.Generator');

public $belongsTo = array(
    'Project' => array(
        'className' => 'Project',
        'foreignKey' => 'pjID'
    )
);

var $hasMany = array(
      'Photo' => array(
          'className' => 'Media.Attachment',
          'order' => 'Photo.basename, Photo.id',
          'foreignKey' => 'foreign_key',
          'conditions' => array('Photo.model' => 'ProjectProfile', 'Photo.group' => 'Photo'),
          'dependent' => true)
  ); 
```

然后保存我的记录时控制器中的 saveAll 保存附件。

这一切都很好，但是我真的很希望能够一次上传多个文件，插件确实支持通过以下形式执行此操作：

```
echo $this->Form->hidden('Photo.0.model', array('value' => 'Photo'));
echo $this->Form->input('Photo.0.file', array('type' => 'file');
echo $this->Form->hidden('Photo.1.model', array('value' => 'Photo'));
echo $this->Form->input('Photo.1.file', array('type' => 'file');
echo $this->Form->hidden('Photo.2.model', array('value' => 'Photo'));
echo $this->Form->input('Photo.2.file', array('type' => 'file'); 
```

但是我认为您会同意必须单击浏览每个文件有点麻烦。我可以看到允许多个文件上传的最简单方法是使用 HTML5 多文件部分选项 - [http://bakery.cakephp.org/articles/veganista/2012/01/31/html_5_multiple_file_upload_with_cake](http://bakery.cakephp.org/articles/veganista/2012/01/31/html_5_multiple_file_upload_with_cake)：

```
echo $this->Form->input('files.', array('type' => 'file', 'multiple')); 
```

这允许您在文件浏览器中移动单击以选择多个文件，然后将文件放入数组中保存...但是，媒体插件不处理此字段格式。此外，据我所知，无法在保存中添加模型、组等字段。

那么，有人知道我如何使用单片模型通过媒体插件处理多文件上传吗？我愿意接受所有建议。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:07:01.797

这个 CakePHP 2.x 插件 - [AjaxMultiUpload](https://github.com/srs81/CakePHP-AjaxMultiUpload) - 对你有用吗？我认为这正是你需要的。

# python - Python UnboundLocalError“需要帮助”

> ID：10133985
> 
> 赞同：0
> 
> 时间：2012-04-13T01:03:53.370
> 
> 标签：python

```
def rotate_word(word,number)
    for i in word:
        word_num = ord(i)
        new_word += chr(word_num + number)
return new_word 
```

大家好，上面的代码不起作用。这是一个python函数。当我运行程序时，我将返回一个错误：“UnboundLocalError: 'new_word' referenced before assignment”

这是什么意思？谁能帮我？

我的函数的输出是：

打印 rotate_word('abc',5)

输出：fgh

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T01:05:38.470

你应该`new_word`在使用它之前定义它。把它放在`for`：

```
new_word = '' 
```

您还缺少返回的缩进和 def 后的冒号。这是一个固定版本：

```
def rotate_word(word, number):
    new_word = ''
    for i in word:
        word_num = ord(i)
        new_char = chr(word_num + number)
        if new_char > 'z':
            new_char = chr(ord(new_char) - 26)
        new_word += new_char
    return new_word

print rotate_word('abc', 5)
print rotate_word('xyz', 3) 
```

编辑：我已经更新了你的代码，所以它在`'z'`

# kml - 模型不会在 GE Plugin Tour Player 中显示

> ID：10133995
> 
> 赞同：0
> 
> 时间：2012-04-13T01:05:44.867
> 
> 标签：kml, google-earth-plugin

GE Plugin Tour Player 功能是否支持显示 .kmz 文件中的模型？如果是这样，我无法让它发挥作用。

这是我设置的测试页面：http: [//www.ppacg.org/google_earth/ds/tip/8th-Street-Tour-Model.html](http://www.ppacg.org/google_earth/ds/tip/8th-Street-Tour-Model.html)

这个.kmz 中有一个模型显示了未来的高速公路改进。使用 Desktop GE 应用程序时，此模型会显示在游览中，但不会显示在 GE 插件上。我检查了路径，它们看起来还不错。我使用 Google Earth API Samples - Playing Tours 中的这段代码作为我的起点： [http ://earth-api-samples.googlecode.com/svn/trunk/examples/tour-player.html](http://earth-api-samples.googlecode.com/svn/trunk/examples/tour-player.html)

提前感谢您提供的任何帮助！

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:51:11.920

我测试了该页面，Tour 完美运行。也就是说，您在页面上确实有几个错误。

首先，删除线

```
document.getElementById('installed-plugin-version').innerHTML =
  ge.getPluginVersion().toString(); 
```

它给出了错误

```
Uncaught TypeError: Cannot set property 'innerHTML' of null 
```

另外，css文件的路径不正确。你有

```
http://earth-api-samples.googlecode.com/svn/trunk/examples/static/prettify.css 
```

它应该是

```
http://earth-api-samples.googlecode.com/svn/trunk/examples/static/prettify/prettify.css 
```

最后，而不是使用线条

```
var href = window.location.href.substring(0, window.location.href.lastIndexOf('/')) + '/';
    href += '../8thStreet1a.kmz'; 
```

您可以直接链接到该文件：

```
var href = "http://www.ppacg.org/google_earth/ds/8thStreet1a.kmz" 
```

# java - 舍入错误？

> ID：10133996
> 
> 赞同：1
> 
> 时间：2012-04-13T01:05:46.807
> 
> 标签：java, rounding, coin-change

您好，我在为学校作业创建零钱计算器时遇到问题。它本质上是计算一定数量的货币所需的最低变化量。

*   前任。5.36 美元：
*   2 个玩具（2 美元）
*   1加元（1美元）
*   1 季度
*   1毛钱
*   0 镍币
*   1便士

我已经声明我的所有变量都是双精度数，所以我可以一起计算值和总数。它似乎在整数（5.00、6.00、7.00）上运行良好，但每当我添加小数位时就会出错。就像当我说 5.25 美元时，它应该说 2 toonies 1 loonie 和 1 Quarter。我认为这可能是舍入错误或我的计算有问题。任何帮助表示赞赏。下面是代码的计算：

```
//Rounding to one number           
DecimalFormat oneDigit = new DecimalFormat ("#,0");

//Ask user for input
String moneyinput = JOptionPane.showInputDialog ("Welcome to the Change Caluculator. "
                + "Please Enter your amount of money in Dollars ($): ");

//Take user input and create into string.
totmoney = Double.parseDouble (moneyinput);

//Calculate number of toonies
numtoonies =  (totmoney/toonieval);

System.out.println ("There is a total of " + oneDigit.format (numtoonies) + " toonies.");

//Find new amount
totmoney = (totmoney%toonieval);

//Calculate the number of loonies
numloonies = (totmoney/loonieval);

//Find new amount
totmoney = (totmoney-numloonies);

System.out.println ("There is a total of " + oneDigit.format (numloonies) + " loonies.");

//Calculate number of quarters
numquarters = (totmoney/quarterval);

//State the about of Coins
System.out.println ("There is a total of " + oneDigit.format (numquarters) + " quarters.");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T01:16:13.067

我不太明白你为什么要使用 DecimalFormat 。你应该可以只用 mod`%`和 Division来解决这个问题`/`。

这就是我解决这个问题的方法：

1.  从用户那里获取输入（作为 5.33 格式的双精度）
2.  通过移动小数位将其保存为 int (int value = cost * 100)
3.  使用除法查找 toonies 的数量 (numToonies = value / toonieval)
4.  通过 (value = value % toonieval) 找到剩余金额
5.  对其他面额重复步骤 3 和 4

注意：您必须修改 toonies 的值以反映您使用的价格乘以 100 的事实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T01:17:39.647

我认为这不适用于浮点数：

```
totmoney = (totmoney%toonieval); 
```

尝试

```
totmoney = totmoney - toonieval*numtoonies; 
```

反而。

此外，请注意浮点值通常不适合处理货币值（因为可能存在舍入错误）。改用定点小数（基本上，以美分存储值并以美分为基础计算每个值）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T07:39:51.537

当您需要绝对精度时，不要使用浮点数。java 遵循的 IEEE 浮点规范甚至指出会损失精度，因为浮点规范不能正确表示所有浮点运算，它只能近似它们。解决方案是您需要将值存储在 2 个整数中，一个用于小数点左侧的数量，一个用于小数点右侧的值