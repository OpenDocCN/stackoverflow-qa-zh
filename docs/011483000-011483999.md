# StackOverflow 问答 11483000-11483999

# javascript - 是否有 JavaScript 或可能的 Python/Django Web 服务来对街道地址进行地理编码？

> ID：11483002
> 
> 赞同：0
> 
> 时间：2012-07-14T10:30:29.440
> 
> 标签：javascript, python, api, geolocation, geocoding

是否有通用的 JavaScript 或可能的 Python/Django 或其他开源 Web 服务或 API 来查找给定街道地址的地理位置？[http://www.braincastexception.com/wp7-web-services-first-part-geocodeservice/](http://www.braincastexception.com/wp7-web-services-first-part-geocodeservice/)做我想做的事，显然是在 C# 中。JavaScript 或可查询的开源项目中是否有类似的东西？

ATdhvaanckse，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T10:51:10.273

查看[Gisgraphy](http://www.gisgraphy.com/)一个免费的开源地理服务。

每个人都会告诉您使用 Google Maps API，但请阅读使用[条款](https://developers.google.com/maps/terms)。

> (g) 不得使用没有 Google 地图的内容。您不得在没有相应 Google 地图的情况下使用或显示内容，除非 Maps API 文档明确允许您这样做，或获得 Google 的书面许可。在任何情况下，您都不得在非谷歌地图上或与非谷歌地图一起使用或显示内容。例如，您不得将通过服务获得的地理编码与非 Google 地图结合使用。再举一个例子，您不得在非 Google 地图旁边显示街景图像，但您可以在没有相应 Google 地图的情况下显示街景图像，因为 Maps API 文档明确允许您这样做。

因此，对于 Google API，您**必须使用 Google Map**。所以如果你需要一张地图，你就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T13:52:26.943

[您可以使用LiveAddress API](http://smartystreets.com/products/liveaddress-api)来规避 Google、Bing 和其他提供商的限制性 TOS 。我在[SmartyStreets](http://smartystreets.com)工作并帮助维护它。

虽然 Google 只会近似地址（换句话说，返回不存在地址的结果），但 LiveAddress 将验证地址的存在并仅返回有效结果以及一些其他有价值的数据。

Python 示例代码：[https ://github.com/smartystreets/LiveAddressSamples/tree/master/python](https://github.com/smartystreets/LiveAddressSamples/tree/master/python)

此处的 Javascript 示例：http: [//jsfiddle.net/user/smartystreets/fiddles/](http://jsfiddle.net/user/smartystreets/fiddles/)和[https://github.com/smartystreets/LiveAddressSamples/tree/master/jQuery](https://github.com/smartystreets/LiveAddressSamples/tree/master/jQuery)（使用 jQuery）和[https://github.com/smartystreets /LiveAddressSamples/tree/master/javascript](https://github.com/smartystreets/LiveAddressSamples/tree/master/javascript)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T10:46:04.260

您可以使用[Google Maps JavaScript API](https://developers.google.com/maps/documentation/javascript/)。[您可以在此处](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple)找到您想要的示例。

# php - PHP中特定字符串的需要模式

> ID：11483004
> 
> 赞同：0
> 
> 时间：2012-07-14T10:30:53.380
> 
> 标签：php, regex

如何在 PHP 中编写一个函数来检查具有允许模式的输入字符串？我的模式是这样的：

**1-1341498217**

第一部分是从 0 到 9 的一位整数，破折号后的第二部分是 10 位正整数。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T10:32:16.583

```
preg_match("/\d-\d{10}/", $string); 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T10:34:11.807

```
preg_match("/^\d-[1-9]{10}$/", $string)
                 //^--------------for positive digits 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T10:41:00.880

用这个`preg_match("/^\d-[1-9]\d{9}$/", $string)`

# android - BroadcastReceiver 在启动时有条件地启动服务而不启动应用程序

> ID：11483007
> 
> 赞同：0
> 
> 时间：2012-07-14T10:31:05.530
> 
> 标签：android, broadcastreceiver, boot

我有一个应用程序，该应用程序具有在启动时有条件地启动的服务（基于 xml 中定义的复选框首选项）。我的广播接收器类是这样的：

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.preference.PreferenceManager;
import android.util.Log;

public class BootServiceReceiver extends BroadcastReceiver {
private static final String TAG = "tweakmanager";

@Override
public void onReceive(Context context, Intent intent) {
    if (intent.getAction().equals(Intent.ACTION_BOOT_COMPLETED)) {
        SharedPreferences prefLights;
        prefLights = PreferenceManager.getDefaultSharedPreferences(context);
        if (prefLights.getBoolean("checkbox1", false)) {
            Log.i(TAG, "doing nothing...");
        } else {
            Intent p = new Intent();
            p.setAction("app.tweaks.Service");
            context.startService(p);
        }
    }
}
} 
```

请注意，只有在未选中复选框时才应启动服务。默认状态被选中。

现在，在正常操作中，一切正常 - 如果选中复选框，则服务不会启动，如果未选中，则服务会在启动时启动。

问题在于应用程序是否已安装但从未运行...在这种情况下，即使选中了复选框，服务也会在下次启动时启动。我考虑将默认首选项写入接收方可以读取的文件，但我认为这不是最好的解决方案......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T10:43:53.857

> 在这种情况下，即使选中复选框，服务也会在下次启动时启动

它不应该这样做，因为不会有偏好，所以你`getBoolean()`应该`false`按照你的指定返回。

话虽如此，有一个更好的解决方案：

1.  添加`android:enabled="false"`到此`<receiver>`元素的清单中。

2.  当他们在首选项中切换复选框时，使用`PackageManager`和`setComponentEnabledSetting()`来启用或禁用`BroadcastReceiver`，以便在选中复选框时启用您。

这样，如果用户没有选中此复选框，Android 就不必在重新启动时分叉您的进程。

# php - Memcached 集失败

> ID：11483008
> 
> 赞同：1
> 
> 时间：2012-07-14T10:31:18.767
> 
> 标签：php, memcached

我在 4 行脚本中有一个错误，我找不到。`

```
$m = new Memcached();
var_dump($m->addServer('localhost', 11211));
var_dump( $m->getResultCode());
var_dump($m->set("aaaa","bbb"));` 
```

输出：

```
bool(true) 
int(0) 
bool(false) 
```

get 和 replace 也返回 false。

我的 memcached 服务器的错误或配置错误？

# sql - sql查询计算用户常用项

> ID：11483009
> 
> 赞同：0
> 
> 时间：2012-07-14T10:31:21.980
> 
> 标签：sql, oracle, count, oracle10g

我有一张表，假设有 2 个用户，用户 A 和用户 B。用户 A 和用户 B 有一些项目；其中一些项目是相同的，但其中一些是不同的。我想数一数他们有多少共同点。

例如，用户 A 和用户 B 有 2 个共同项目。用户 A 和用户 C 只有一个公共物品。用户 B 和用户 C 有 2 个共同项目，以此类推。

我怎样才能在 SQL 中做到这一点？

```
 Users  Items
  A      C1
  A      C2
  A      C3
  B      C2
  B      C3
  B      C4
  B      C5
  C      C1
  C      C4
  C      C5
  C      C6 
```

这是我迄今为止尝试过的：

```
select distinct users, count(items) over (partition by items) 
  from table1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T11:12:00.010

好的，这可以通过自加入来完成：

```
select a.username as user1
     , b.username as user2
     , count(distinct a.item) as similar
  from user_items a
  join user_items b
    on a.item = b.item
 where a.username <> b.username
   and a.username < b.username
 group by a.username, b.username 
```

这是一个要演示的[SQL Fiddle 。](http://www.sqlfiddle.com/#!4/69e9c/5)

连接已完成，`item`因为这是您想知道它是否相同的列。我已经排除了用户相同的地方，但如果你愿意，你可以包括它。

最重要的部分是`a.username < b.username`。如果你不使用它，那么你会得到两个相同的行，但用户名是相反的。例如，您得到`A|B|2`和`B|A|2`。

我也用过`distinct item`。如果您想要项目的数量而不是不同的数量，只需删除此关键字。

# c# - 递归和变量值

> ID：11483011
> 
> 赞同：0
> 
> 时间：2012-07-14T10:31:40.300
> 
> 标签：c#, .net, recursion

我有一个简化的递归方法：

```
private List<string> data;
public string Method1()
{
    data = new List<string>();

    //When Method 1 gets called first time there is a problem
    //When Method 1 gets called from Method2 problem is fixed
    if (problem)
    {
        data.Add("prob");
    }

    if(data.Count > 0)
    {
        return Method2()
    }
    else
    {
        return string.Empty();
    }
}

private string Method2()
{
    return Method1();
} 
```

当 Method1 从 Method2 调用时，我是否正确地认为该`data`变量已重新初始化，从而消除了以前的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T10:34:55.297

当您打电话时，`Method1`您正在创建新的`List<string>`旧`data`变量值变得无法访问（将被垃圾收集）。

为避免这种情况，您必须在`data`外部某处进行初始化，`Method1`例如在构造函数中。

# linux - Linux 将控制台输出附加到日志文件？

> ID：11483012
> 
> 赞同：25
> 
> 时间：2012-07-14T10:31:55.833
> 
> 标签：linux, logging, console

我知道我可以让 Linux 通过执行以下操作将控制台输出写入日志文件：

```
command > logfile.log 
```

但这会覆盖之前日志文件中的任何内容。如何使其将输出附加到日志文件而不是覆盖它？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-14T10:38:57.663

您可以`>>`用于附加到相同的日志文件，例如，`cmd1 >> logfile.log` 然后用于其他命令，例如

```
cmd2 >> logfile.log 
```

`>>`用于将数据附加到文件

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-14T10:36:45.517

`>`只需更换`>>`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-14T10:35:36.653

更改运算符：

```
command >> logfile.log 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-14T10:37:18.470

采用`command >> logfile.log`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-14T10:45:31.497

几种方法：

1）使用io管道如下：

$> echo 'some text' >> file.txt （将被附加）

2）使用像sed这样的程序：

$> 猫文件.txt

一些文字

$> sed -i '$ a\ here is some more text' file.txt （也将被附加，没有管道）

哈哈！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-04T11:35:59.650

单个大于字符`>`WRITES 输出到文件。

双字符`>>`APPENDS 输出到现有文件中

# javascript - IE 9 中的 Javascript 错误

> ID：11483016
> 
> 赞同：1
> 
> 时间：2012-07-14T10:32:25.523
> 
> 标签：javascript, internet-explorer-9

编码：

```
if(e.target.className.indexOf('box') !== -1)
  e.target.parentNode.className = 'boxW'; 
```

在 Internet Explorer 9 中出现此错误：

> SCRIPT5007：无法获取属性“className”的值

parentNode 属性也会发生同样的事情（如果我删除了 IF）......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T10:38:39.023

我不知道 IE 9 的情况如何，但其他版本已经使用`e.srcElement`了`e.target`.

所以也许你可以这样做：

```
var real_target = e.target || e.srcElement;

if(real_target.className.indexOf('box') !== -1)
  real_target.parentNode.className = 'boxW'; 
```

# android - 锁屏对应用程序有何影响？

> ID：11483018
> 
> 赞同：0
> 
> 时间：2012-07-14T10:32:38.120
> 
> 标签：android, locking, screen, keypress

我正在创建一个需要在很长一段时间内听（硬件）按键的应用程序，所以我认为如果我在此期间锁定屏幕，手机会节省大量电池。但是几个月前我读到了一些关于 androids lockscreen 的东西。据说在 lockscreen 期间，手机将无法听硬件按键......我说的对吗？

在这个解释之后，我的问题是：有没有人知道在锁定屏幕的情况下收听按键以不消耗大量电池的任何方式？

我想过把屏幕亮度调到最低值，但是 Cpu 会耗尽电池，因为手机没有处于深度睡眠状态，所以我认为这不是正确的方法:)

请问还有什么办法吗？？？

提前致谢！！！;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T11:07:20.027

你将不得不启动一个无限运行的服务来实现你想要做的事情。我想向您建议一种更有效的方法，即使用[ACTION_SCREEN_OFF](http://developer.android.com/reference/android/content/Intent.html#ACTION_SCREEN_OFF)代替。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T11:14:41.890

您可以使用 WakeLock 功能来节省电池电量。参考这个[链接](http://www.vogella.com/blog/2011/02/07/android-wakelock/)

# mysql - MySQL 在 INSERT SELECT 上非法混合排序规则

> ID：11483020
> 
> 赞同：0
> 
> 时间：2012-07-14T10:32:39.567
> 
> 标签：mysql

我正在尝试执行以下查询，以将数据从一个数据库表移动到另一个数据库表，表上有不同的排序规则，字段上有不同的排序规则：

```
INSERT INTO `db1`.`my_table` SELECT * FROM `db2`.`my_table` WHERE 1 COLLATE 'latin1_swedish_ci'; 
```

这总是给我以下错误：

```
COLLATION 'latin1_swedish_ci' is not valid for CHARACTER SET 'binary' 
```

该表是两个数据库的字符集“latin1”，所以我不知道为什么它在错误中说“二进制”。

如果我不整理，我会得到通常的“非法混合整理”错误：

```
SQL error #1267 : Illegal mix of collations (latin1_general_ci,IMPLICIT) and (latin1_swedish_ci,IMPLICIT) for operation '=' 
```

如何构建这样的查询以使其正常工作？

如果我可以在执行查询文件之前设置字符集和排序规则而不是按查询执行此操作，那就更好了。会严重地让我头疼！

# browser - SmarTvs 中的浏览器：它们使用哪个引擎？

> ID：11483022
> 
> 赞同：9
> 
> 时间：2012-07-14T10:32:56.280
> 
> 标签：browser, samsung-smart-tv, smart-tv

我一直在寻找一段时间，但我没有找到足够好的答案。我决定为这种平台验证我的布局，但从未想过它们会如何出现在这种电视上。

所以我想知道 SmarTV 是否使用一些现有的引擎，如 Webkit、Mozilla、Presto 甚至 Trident（希望没有），或者他们是否使用自己的引擎，至少对于以下制造商：

*   索尼
*   三星
*   LG
*   AOC

这些是我国最常见的。

非常感谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T07:41:51.113

*   索尼有 Opera。
*   LG 有 Webkit。[http://developer.lgappstv.com](http://developer.lgappstv.com)
*   正如@WojtekT 所说的三星有 Maple，现在它也是 Webkit。[http://www.samsungdforum.com/](http://www.samsungdforum.com/)

如果您想测试您的布局如何与这些电视配合使用，您可以安装 SDK。三星和 LG 在 SDK 中有模拟器。SONY 没有任何官方的 SDK。

对于 2011 年及更早的电视型号，您不想使用 CSS3，因为它不受支持（三星、LG）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T11:23:00.993

就三星智能电视而言，它取决于版本：

*   2010 和 2011 版本使用高度修改的 Gecko 引擎 Maple 浏览器（代表嵌入式系统的标记引擎平台）
*   2012 版本正在使用 WebKit 引擎

# java - 使用复杂对象作为参数从 Java 中调用 JavaScript 函数

> ID：11483026
> 
> 赞同：1
> 
> 时间：2012-07-14T10:33:39.647
> 
> 标签：java, javascript, rhino

我有一个带有方法（A）的java应用程序，它应该使用一个用rhino评估的javascript函数（B）来更改一些对象，然后再用A返回它们。关键是，从A内部传递到B的参数很复杂(List) 以及从 B 返回的类型应该来自相同的类型。目前我不知道如何在 javascript 函数中使用我自己的类。我应该在 JavaScript 中向谁导入它们？

我使用[rhino 如何从 java 调用 js 函数](https://stackoverflow.com/questions/3995897/rhino-how-to-call-js-function-from-java)来加载和运行我的 javascript 函数。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:13:21.503

见例子。它使用 jsr223，但你会明白的。我将带有 MyClass 的一个实例的列表传递给 rhino，它对其进行了修改（通过 java 方法调用），最后将另一个元素添加到列表中。

```
package lv.test;

import java.util.ArrayList;
import java.util.List;

import javax.script.Bindings;
import javax.script.ScriptContext;
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;

public class MyClass {
    private int field;

    public int getField() {
        return field;
    }

    public void setField(final int field) {
        this.field = field;
    }

    public String toString() {
        return String.format("{%d}", field);
    }

    public static void main(String[] args) throws ScriptException {
        final ScriptEngineManager manager = new ScriptEngineManager();
        final ScriptEngine e = manager.getEngineByName("js");

        final Bindings b = e.getBindings(ScriptContext.ENGINE_SCOPE);

        final List<MyClass> somelist = new ArrayList<MyClass>();
        somelist.add(new MyClass());

        b.put("somelist", somelist);

        final StringBuilder script = new StringBuilder()
            .append("function abc(x,y) { return x+y+new java.lang.Integer(2).intValue(); }")
            .append("somelist.get(0).setField(abc(2,3));")
            .append("somelist.add(new Packages.lv.test.MyClass()); somelist.get(1).setField(888);");

        e.eval(script.toString());

        System.out.println(somelist); // [{7}, {888}]
    }
} 
```

# ruby-on-rails - Rails link_to 没有？符号

> ID：11483027
> 
> 赞同：0
> 
> 时间：2012-07-14T10:33:54.127
> 
> 标签：ruby-on-rails, routes

我正在尝试创建一个用户个人资料页面，我正在寻找的是

```
/profile/Nick 
```

在我正在使用的视图上

```
profile_path(:nick => current_user.nick) 
```

虽然可行，但它确实给了我一个链接，例如

```
/profile?nick=Nick 
```

路线包括

```
get 'profile/:nick' => 'users#show' 
```

如果我手写地址，路线已经可以工作，只是生成它不是我想要的方式

有没有办法以创建 / 而不是旧的 ?= 的方式传递参数

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T10:36:45.733

使用`profile_path(current_user.nick)`而不是你现在拥有的。

# yii - 获取 Db 连接字符串的 Yii 多语言行为扩展问题

> ID：11483029
> 
> 赞同：1
> 
> 时间：2012-07-14T10:34:14.457
> 
> 标签：yii, multilingual, yii-extensions

我通常遵循 Yii 扩展：多语言行为[指令](http://www.yiiframework.com/extension/multilingual-behavior/#hh1)，这是我的模型行为配置：

```
public function behaviors() 
{
    return array(
        'ml' => array(
            'class' => 'application.models.behaviors.MultilingualBehavior',
            'langClassName' => 'CandidateLang',
            'langTableName' => 'candidatelang',
            'langForeignKey' => 'candidate_id',
            'langField' => 'lang_id',
            'localizedAttributes' => array('name', 'birth_place', 'home_city', 'intro'), //attributes of the model to be translated
            'localizedPrefix' => 'l_',
            'languages' => Yii::app()->params['languages'], // array of your translated languages. Example : array('fr' => 'Français', 'en' => 'English')
            'defaultLanguage' => 'en', //your main language. Example : 'fr'
            'createScenario' => 'insert',
            'localizedRelation' => 'i18nCandidate',
            'multilangRelation' => 'multilangCandidate',
            'forceOverwrite' => false,
            'forceDelete' => true, 
            'dynamicLangClass' => true, //Set to true if you don't want to create a 'PostLang.php' in your models folder
        ),
    );
} 
```

**我得到一个 CDbException：在数据库中找不到活动记录类“CandidateLang”的表“{{candidatelang}}”。**

这是触发错误的地方：

```
private $_model;
2253 
2254     /**
2255      * Constructor.
2256      * @param CActiveRecord $model the model instance
2257      */
2258     public function __construct($model)
2259     {
2260         $this->_model=$model;
2261 
2262         $tableName=$model->tableName();
2263         if(($table=$model->getDbConnection()->getSchema()-   >getTable($tableName))===null)
2264             throw new CDbException(Yii::t('yii','The table "{table}" for active record class "{class}" cannot be found in the database.',
2265                 array('{class}'=>get_class($model),'{table}'=>$tableName)));
2266         if($table->primaryKey===null)
2267         {
2268             $table->primaryKey=$model->primaryKey();
2269             if(is_string($table->primaryKey) && isset($table->columns[$table->primaryKey]))
2270                 $table->columns[$table->primaryKey]->isPrimaryKey=true;
2271             else if(is_array($table->primaryKey))
2272             {
2273                 foreach($table->primaryKey as $name)
2274                 {
2275                     if(isset($table->columns[$name]))
2276                         $table->columns[$name]->isPrimaryKey=true; 
```

我确保桌子在那里，并仔细检查了大小写和拼写。我什至尝试从架构中放置不同的表名，但没有任何运气！所以我猜这个调用会导致错误： `$model->getDbConnection()`，但我不知道为什么或如何修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:02:43.217

我有同样的问题，我修复了它。在主配置集中`tablePrefix => ''`，问题应该得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T08:00:33.657

我试图`db`像这样强制自动生成模型变量：

```
 public function createLangClass() {
    if(!class_exists($this->langClassName, false)) {
        $owner_classname = get_class($this->getOwner());
        eval("class {$this->langClassName} extends CActiveRecord
        {
                  //Forcing model db variable
            self::db = Yii::app()->getDb();

            public static function model(\$className=__CLASS__)
            {
                return parent::model(\$className);
            }

            public function tableName()
            {
                return '{{{$this->langTableName}}}';
            }

            public function relations()
            {
                return array('$owner_classname' => array(self::BELONGS_TO, '$owner_classname', '{$this->langForeignKey}'));
            }

        }");
    }
} 
```

我还是不知道为什么！！但它似乎有效，因为它`CdbException`已经**消失了**。

但是我遇到了一个新错误，Yiibase 抱怨找不到动态自动生成的模型文件！我之前在 Yii 中没有使用动态类的经验，但我仍然怀疑这个问题是 yii1.1.10 的新问题。如果您有任何快速修复请评论，否则我将发布一个新问题。

# ruby-on-rails-3 - 如何在 Rails 模型中正确挂钩 after_create

> ID：11483031
> 
> 赞同：3
> 
> 时间：2012-07-14T10:34:39.267
> 
> 标签：ruby-on-rails-3

我目前有这样的事情：

```
class Article

  # fields = [flag, something]

  after_create :update_flag

  def update_flag
    self.flag = 1 if something_changed?
  end
end 
```

但是当我更改某些字段时，它不会更改“标志”字段。我已经保存了对象。仍然没有变化。

```
a = Article.create(flag: 0, something: "content")
a.something = "different"
a.save

a.flag
> 0 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T10:37:44.767

改变

```
after_create 
```

到

```
after_update 
```

在您的代码示例中，您正在更新对象，这就是您需要不同钩子的原因。请参阅[文档](https://guides.rubyonrails.org/active_record_callbacks.html#available-callbacks)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-20T07:40:31.457

```
after_create() 
```

在 Base.save 之后调用尚未保存的新对象（不存在记录）。

after_save()

在 Base.save 之后调用（无论是创建还是更新保存）。`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-17T06:28:16.207

将“after_create”更改为“after_save”，因为 after_create 只工作一次——就在第一次创建记录之后，并且每次保存对象时 after_save 工作——即使你只是在多年后更新它。

参考[- `after_create` 和 `after_save` 有什么区别，何时使用？](https://stackoverflow.com/questions/6422199/what-is-the-difference-between-after-create-and-after-save-and-when-to-use-w)

# javascript - 带有 javascript 代码提示的 Eclipse Android 项目

> ID：11483036
> 
> 赞同：1
> 
> 时间：2012-07-14T10:35:15.747
> 
> 标签：javascript, android, eclipse, webview

我无法找到解决方案，我不知道这是否可能。

*   我有一个 Android 项目，并在 WebView 中运行 UI。
*   我有一些我希望在 Eclipse 中编辑的 javaScript 文件，但我看到 javaScript 的代码提示不起作用，因为它是一个 Android 项目。
*   JS 代码提示在 Eclipse 的 javaScript 项目中效果很好

是否有可能以某种方式将 JS 代码提示绑定到 Android 项目？

我在 Android 项目的“assets”文件夹中有“www”文件夹（其中包含 .js 文件）。

任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:23:38.143

我发现它适用于以下步骤：

1.  关闭当前打开的js文件；
2.  切换到 javascript 视角；
3.  重新打开js文件

如果您在 Java 透视图中打开 JavaScript 文件，它将不起作用。如果它在 Java 透视图中打开时自动切换到 JavaScript 透视图，或者在打开 .js 文件时切换到 javascript 透视图，那就太好了。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T11:20:53.257

只需手动切换到`Web`透视图，前提是您安装了可以执行此操作的插件（尝试[Aptana](http://update1.aptana.org/studio/3.2/024747/index.html)）。那应该行得通。

# objective-c - 如何向 Apple 的 AVCam 示例添加新视图

> ID：11483043
> 
> 赞同：0
> 
> 时间：2012-07-14T10:35:55.257
> 
> 标签：objective-c, ios

我一直在尝试添加一个新视图（作为翻转视图），但无法做到这一点。我知道该示例没有 appdelagate。所以为了做到这一点，我应该怎么做？

提前致谢..

PS：这里是[代码](http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:42:08.493

在 AVCamViewController.m 文件中，查找 viewDidLoad 方法。您可以调整您的捕获视频预览区域并添加另一个您自己的视图。

像这样的东西：

```
- (void)viewDidLoad
{
// ...
[newCaptureVideoPreviewLayer setFrame:CGRectMake(0, 0, 200, 200)];  //adjust camera preview area to accommodate your new view.
UIImageView *myView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 210, 200, 50)];  //either a UIImageView or UIView
[self.view addSubview:myView];  //add your view to the main view

//....
} 
```

# android - Android 创建项目 Eclipse

> ID：11483045
> 
> 赞同：0
> 
> 时间：2012-07-14T10:36:05.423
> 
> 标签：android, sdk, project

安装 Android SDK 和 Eclipse。一切都是根据说明设置的，但是当我尝试创建一个新项目时，没有选项。我有其他选择，但没有新的 Android 项目。有谁知道如何解决这一问题？

Eclipse 中的首选项设置 [http://s11.postimage.org/g6hpno8nn/image.jpg](http://s11.postimage.org/g6hpno8nn/image.jpg)

新项目 [http://s16.postimage.org/6gb9kxzzp/image.jpg](http://s16.postimage.org/6gb9kxzzp/image.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T10:51:02.150

在导航器中右键单击 -> 新建项目 -> 其他 -> Android -> Android 应用程序项目/Android 项目（以可用者为准，它们的含义相同）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:49:30.390

选择`Android Application Project`。

它有一些不同的选项，`Android Project` 但你可以使用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T10:59:29.463

android SDK 和 eclipse 不足以让您创建项目。您必须为 Eclipse 安装 ADT 插件。

ADT 插件：ADT 插件 [的下载链接](http://developer.android.com/tools/sdk/eclipse-adt.html)

安装：[在 Eclipse 中安装 ADT 看到这个 stackoverflow 链接](https://stackoverflow.com/questions/3935956/how-to-install-the-android-adt-plugin-in-eclipse)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T11:03:16.390

转到：Window -> Customize Perspective ... 检查 Android Wizards 复选框是否已选中。您可以取消选中它并重新检查它以查看“新建 Adroid 项目向导”图标的位置。顶部会有 3 个 Android 向导图标。

# spring - Spring选项标签的使用

> ID：11483048
> 
> 赞同：0
> 
> 时间：2012-07-14T10:36:38.310
> 
> 标签：spring, spring-mvc

我想知道`options tag`在 Spring 的表单命名空间中做了什么。我不明白 itemValue 属性如何与[文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/view.html#view-jsp-formtaglib-optionstag)中提到的映射键相关。比如说我在控制器中有以下方法：

```
@ModelAttribute("rights")
public Map<ADMIN_RIGHTS, String> populateRights(){
    Map<ADMIN_RIGHTS, String> rights = new LinkedHashMap<ADMIN_RIGHTS, String>();
    rights.put(ADMIN_RIGHTS.ADMIN, "administrator");
    rights.put(ADMIN_RIGHTS.COMP,"company");
    rights.put(ADMIN_RIGHTS.EMP,"Employee");

    return rights;
} 
```

该jsp是：

```
 <form:select path="right" >
     <form:options items="${rights}"/>
 </form:select> 
```

而 propertyEditor 类是：

```
public class RightsPropertyEditor extends PropertyEditorSupport {

@Override
public String getAsText() {
    Right right = (Right) getValue();
    if (right != null) {
        return right.getName();
    }
    return super.getAsText();
}

@Override
public void setAsText(String rightStr) throws IllegalArgumentException {
    if (rightStr != null && rightStr.equals("ADMIN")){
        rightStr = "Adminstrator credential";
    }
    else if(rightStr != null && rightStr.equals("COMP")){
        rightStr = "Computer credential";

    }
    else if(rightStr != null && rightStr.equals("EMP")){
        rightStr = "Employee credential";

    }
    setValue(new Right(rightStr));
} 
```

在 jsp 中，我没有给出 itemValue 和 itemLabel，但仍然一切正常。那么我在这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T11:34:48.680

您链接到的文档说：

> 或者，您可以指定项目映射，在这种情况下，映射键被解释为选项值，映射值对应于选项标签。

因此，标签将地图的键显示为值，并将其值显示为标签，如文档所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T11:34:29.213

默认情况下，对于地图，选项值是`map key`，标签是`map value`，这`map value`是一个 Right 对象，属性编辑器将启动以显示`right name`. 如果属性编辑器不可用，比如键，那么它将`toString()`用于显示值。

# wpf - 从后面的代码中用 xml 绑定组合框

> ID：11483051
> 
> 赞同：0
> 
> 时间：2012-07-14T10:36:49.820
> 
> 标签：wpf

我有两个组合框，我想根据第一个组合框的值更新第二个组合框。我必须将组合框与 xml 文件而不是数据集绑定。我有搜索网，但没有找到帮助。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T11:48:44.027

尝试这样的事情：

XAML 文件：

```
<Window x:Class="ComboBoxBindingXML.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <Window.Resources>
        <XmlDataProvider x:Key="myData">
            <x:XData xmlns="">
                <Books>
                    <Book Title="Book1">
                        <Authors>
                            <Author Name="Make" Surname="Vey" />
                            <Author Name="Jane" Surname="McRoy" />
                        </Authors>
                    </Book>
                    <Book Title="Book2" />
                    <Book Title="Book3" />
                    <Book Title="Book4">
                        <Authors>
                            <Author Name="John" Surname="Rat" />
                            <Author Name="Dorian" Surname="Trust" />
                        </Authors>
                    </Book>
                    <Book Title="Book5" />
                </Books>
            </x:XData>
        </XmlDataProvider>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="30" />
            <RowDefinition Height="10" />
            <RowDefinition Height="30" />
            <RowDefinition Height="10" />
            <RowDefinition Height="30" />
            <RowDefinition Height="10" />
            <RowDefinition Height="30" />
        </Grid.RowDefinitions>

        <ComboBox Name="cbFirst" DataContext="{StaticResource myData}" ItemsSource="{Binding XPath=Books/Book }">
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding XPath=@Title}" FontWeight="Bold" />
                </DataTemplate>
            </ComboBox.ItemTemplate>
        </ComboBox>

        <ComboBox Name="cbSecond" Grid.Row="2" DataContext="{Binding ElementName=cbFirst, Path=SelectedItem}" ItemsSource="{Binding XPath=Authors/Author}">
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding XPath=@Surname}" FontWeight="Bold" />
                        <TextBlock Text=" " />
                        <TextBlock Text="{Binding XPath=@Name}" />                        
                    </StackPanel>
                </DataTemplate>
            </ComboBox.ItemTemplate>
        </ComboBox>

        <TextBlock Grid.Row="4" Text="{Binding ElementName=cbFirst, Path=Items.Count, UpdateSourceTrigger=PropertyChanged}" />
        <TextBlock Grid.Row="6" Text="{Binding ElementName=cbSecond, Path=Items.Count, UpdateSourceTrigger=PropertyChanged}" />
    </Grid>
</Window> 
```

代码隐藏文件为空。一切都发生在 XAML 文件中。

[XmlDataProvider](http://msdn.microsoft.com/en-us/library/system.windows.data.xmldataprovider.aspx)类具有属性“Source”，您可以在其中设置 XML 数据文件的 Uri。

# c++ - std::next_permutation 实现说明

> ID：11483060
> 
> 赞同：122
> 
> 时间：2012-07-14T10:37:48.183
> 
> 标签：c++, c++11, permutation, stl-algorithm, lexicographic

我很好奇是如何`std:next_permutation`实现的，所以我提取了`gnu libstdc++ 4.7`版本并清理了标识符和格式以生成以下演示......

```
#include <vector>
#include <iostream>
#include <algorithm>

using namespace std;

template<typename It>
bool next_permutation(It begin, It end)
{
        if (begin == end)
                return false;

        It i = begin;
        ++i;
        if (i == end)
                return false;

        i = end;
        --i;

        while (true)
        {
                It j = i;
                --i;

                if (*i < *j)
                {
                        It k = end;

                        while (!(*i < *--k))
                                /* pass */;

                        iter_swap(i, k);
                        reverse(j, end);
                        return true;
                }

                if (i == begin)
                {
                        reverse(begin, end);
                        return false;
                }
        }
}

int main()
{
        vector<int> v = { 1, 2, 3, 4 };

        do
        {
                for (int i = 0; i < 4; i++)
                {
                        cout << v[i] << " ";
                }
                cout << endl;
        }
        while (::next_permutation(v.begin(), v.end()));
} 
```

输出如预期：http: [//ideone.com/4nZdx](http://ideone.com/4nZdx)

我的问题是：它是如何工作的？和的含义是`i`什么？它们在执行的不同部分有什么价值？证明其正确性的草图是什么？`j``k`

很明显，在进入主循环之前，它只检查琐碎的 0 或 1 元素列表案例。在主循环的入口处，我指向最后一个元素（不是一个过去的结尾），并且列表至少有 2 个元素长。

主循环的主体中发生了什么？

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2012-07-14T11:32:36.110

让我们看一些排列：

```
1 2 3 4
1 2 4 3
1 3 2 4
1 3 4 2
1 4 2 3
1 4 3 2
2 1 3 4
... 
```

我们如何从一个排列转到下一个排列？首先，让我们以不同的方式看待事物。**我们可以将元素视为数字，将排列视为数字**。以这种方式查看问题，**我们希望以“升序”顺序排列排列/数字**。

当我们订购数字时，我们希望“以最小的数量增加它们”。例如在计数时我们不计算 1,2,3,10,... 因为中间还有 4,5,...，虽然 10 大于 3，但是有缺失的数字可以通过以较小的量增加 3。在上面的示例中，我们看到它`1`长时间保持为第一个数字，因为最后 3 个“数字”有许多重新排序，这“增加”了较小的排列量。

那么我们什么时候最终“使用” `1`？当最后 3 位数字不再有排列时。
什么时候不再有最后 3 位数字的排列？当最后 3 位数字按降序排列时。

啊哈！这是理解算法的关键。**我们只在右边的所有内容都按降序排列时更改“数字”的位置，** *因为如果它不是按降序排列，那么还有更多的排列要走*（即我们可以“增加”排列更小的数量） .

现在让我们回到代码：

```
while (true)
{
    It j = i;
    --i;

    if (*i < *j)
    { // ...
    }

    if (i == begin)
    { // ...
    }
} 
```

从循环的前 2 行开始，`j`是一个元素，并且`i`是它之前的元素。
然后，如果元素按升序排列，则 ( `if (*i < *j)`) 做一些事情。
否则，如果整个事物按降序排列， ( `if (i == begin)`) 那么这是最后一个排列。
否则，我们继续，我们看到 j 和 i 本质上是递减的。

我们现在了解了`if (i == begin)`零件，所以我们只需要了解`if (*i < *j)`零件。

另请注意：“那么如果元素按升序排列......”这支持了我们之前的观察，即“当右边的所有内容都按降序排列时”我们只需要对数字做一些事情。升序`if`语句本质上是找到“右边的所有内容都按降序排列”的最左边的位置。

让我们再看一些例子：

```
...
1 4 3 2
2 1 3 4
...
2 4 3 1
3 1 2 4
... 
```

我们看到，当一个数字右边的所有内容都按降序排列时，我们**找到下一个最大的数字并将其放在前面**，然后**将剩余的数字按升序排列**。

让我们看一下代码：

```
It k = end;

while (!(*i < *--k))
    /* pass */;

iter_swap(i, k);
reverse(j, end);
return true; 
```

好吧，因为右边的东西是按降序排列的，为了找到“下一个最大的数字”，我们只需要从最后迭代，我们在前 3 行代码中看到。

接下来，我们将“下一个最大的数字”与语句交换到前面，`iter_swap()`然后由于我们知道该数字是下一个最大的，我们知道右边的数字仍然是降序的，所以按升序排列，我们只需要`reverse()`它。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-07-14T10:56:23.210

gcc 实现按字典顺序生成排列。[维基百科](http://en.wikipedia.org/wiki/Permutation#Generation_in_lexicographic_order)解释如下：

> 以下算法在给定排列之后按字典顺序生成下一个排列。它就地改变了给定的排列。
> 
> 1.  找到满足 a[k] < a[k + 1] 的最大索引 k。如果不存在这样的索引，则排列是最后一个排列。
> 2.  找到最大的索引 l 使得 a[k] < a[l]。由于 k + 1 是这样一个索引，所以 l 是很好定义的并且满足 k < l。
> 3.  将 a[k] 与 a[l] 交换。
> 4.  反转从 a[k + 1] 到最后一个元素 a[n] 的序列。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-01-22T02:47:24.317

*Knuth 在The Art of Computer Programming 的*7.2.1.2 和 7.2.1.3 节中深入介绍了该算法及其概括。他称之为“算法 L”——显然它可以追溯到 13 世纪。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-09-21T12:36:05.393

这是使用其他标准库算法的完整实现：

```
template <typename I, typename C>
    // requires BidirectionalIterator<I> && Compare<C>
bool my_next_permutation(I begin, I end, C comp) {
    auto rbegin = std::make_reverse_iterator(end);
    auto rend = std::make_reverse_iterator(begin);
    auto rsorted_end = std::is_sorted_until(rbegin, rend, comp);
    bool has_more_permutations = rsorted_end != rend;

    if (has_more_permutations) {
        auto rupper_bound = std::upper_bound(
            rbegin, rsorted_end, *rsorted_end, comp);
        std::iter_swap(rsorted_end, rupper_bound);
    }

    std::reverse(rbegin, rsorted_end);
    return has_more_permutations;
} 
```

[演示](http://coliru.stacked-crooked.com/a/cd92c2ae232c63e8)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-21T12:58:20.730

使用[.cppreference](http://en.cppreference.com/w/cpp/algorithm/next_permutation)有一个不言自明的可能实现`<algorithm>`。

```
template <class Iterator>
bool next_permutation(Iterator first, Iterator last) {
    if (first == last) return false;
    Iterator i = last;
    if (first == --i) return false;
    while (1) {
        Iterator i1 = i, i2;
        if (*--i < *i1) {
            i2 = last;
            while (!(*i < *--i2));
            std::iter_swap(i, i2);
            std::reverse(i1, last);
            return true;
        }
        if (i == first) {
            std::reverse(first, last);
            return false;
        }
    }
} 
```

将内容更改为按字典顺序排列的下一个排列（就地），如果存在则返回 true，否则排序，如果不存在则返回 false。

# phpexcel - 根据行数在每个单元格中插入公式

> ID：11483066
> 
> 赞同：2
> 
> 时间：2012-07-14T10:38:57.463
> 
> 标签：phpexcel

任何帮助表示赞赏..

我的代码

```
 /**
 *  Admin Excel Export Function().
 */

function work_record_export_admin(){

require('inc/php-excel.class.php');

    $objPHPExcel = new PHPExcel();
    $objPHPExcel->getActiveSheet()->setTitle('Work Record');

    $objPHPExcel->setActiveSheetIndex(0)
            ->setCellValue('A1', 'Name')
            ->setCellValue('B1', 'Region')
            ->setCellValue('C1', 'Role')
            ->setCellValue('D1', 'Date')
            ->setCellValue('E1', 'Start Travel')
            ->setCellValue('F1', 'Start Job')
            ->setCellValue('G1', 'Finish Job')
            ->setCellValue('H1', 'Site ID')
            ->setCellValue('I1', 'Site Name')
            ->setCellValue('J1', 'Site Town')
            ->setCellValue('K1', 'Fault Description')
            ->setCellValue('L1', 'Work Summary')
        ->setCellValue('M1', 'Customer Type')
            ->setCellValue('N1', 'Business')
            ->setCellValue('O1', 'Work Code (depot only)')
            ->setCellValue('P1', 'Quantity (depot only)')
        ->setCellValue('Q1', 'Travel Time')
            ->setCellValue('R1', 'Job Time');

 $result = db_query("SELECT name, region, role, date, startt, startj, finj, siteid, sitename, sitetown, faultdesc, worksum, buscode, workcode, quantity FROM work_record_grid ") or die('Query failed!'); 

  // Loop through the result set
    $rowNumber = 2;
    while ($row = db_fetch_array($result)) {
       $col = 'A';
       foreach($row as $cell) {
          $objPHPExcel->getActiveSheet()->setCellValue($col.$rowNumber,$cell);
          $col++;
       }
       $rowNumber++;
    }

    // Freeze pane so that the heading line won't scroll
    $objPHPExcel->getActiveSheet()->freezePane('A2');

$objPHPExcel->getActiveSheet()->getColumnDimension('A')->setWidth(20);
$objPHPExcel->getActiveSheet()->getColumnDimension('B')->setWidth(17);
$objPHPExcel->getActiveSheet()->getColumnDimension('C')->setWidth(19);
$objPHPExcel->getActiveSheet()->getColumnDimension('D')->setWidth(12);
$objPHPExcel->getActiveSheet()->getColumnDimension('E')->setWidth(10);
$objPHPExcel->getActiveSheet()->getColumnDimension('F')->setWidth(10);
$objPHPExcel->getActiveSheet()->getColumnDimension('G')->setWidth(10);
$objPHPExcel->getActiveSheet()->getColumnDimension('H')->setWidth(10);
$objPHPExcel->getActiveSheet()->getColumnDimension('I')->setWidth(17);
$objPHPExcel->getActiveSheet()->getColumnDimension('J')->setWidth(17);
$objPHPExcel->getActiveSheet()->getColumnDimension('K')->setWidth(20);
$objPHPExcel->getActiveSheet()->getColumnDimension('L')->setWidth(30);
$objPHPExcel->getActiveSheet()->getColumnDimension('M')->setWidth(14);
$objPHPExcel->getActiveSheet()->getColumnDimension('N')->setWidth(20);
$objPHPExcel->getActiveSheet()->getColumnDimension('O')->setWidth(21);
$objPHPExcel->getActiveSheet()->getColumnDimension('P')->setWidth(8);
$objPHPExcel->getActiveSheet()->getColumnDimension('Q')->setWidth(10);
$objPHPExcel->getActiveSheet()->getColumnDimension('R')->setWidth(10);
$objPHPExcel->getActiveSheet()->getStyle('Q'.$row)->getNumberFormat()->setFormatCode('[h]:mm');

$objPHPExcel->getActiveSheet()->getStyle('R'.$row)->getNumberFormat()->setFormatCode('[h]:mm');
//$objPHPExcel->getActiveSheet()->setCellValue('Q'.$row, '=(F'.$row.'-E'.$row.')');
//$objPHPExcel->getActiveSheet()->setCellValue(R'.$row, '=(G'.$row.'-F'.$row')');

    // Save as an Excel BIFF (xls) file
    $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5');

   header('Content-Type: application/vnd.ms-excel');
   header('Content-Disposition: attachment;filename="work_record_data' . date('Ymd') . '.xls"');
   header('Cache-Control: max-age=0');
   $objWriter->save('php://output');
   exit();

 } 
```

我正在尝试将公式 =F(cellnumber)-E(cellnember) 添加到 Q col 中的所有单元格中。和 =G(cellnumber)-E(cellnumber) 进入所有的 R col。对于存在的每一行。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:14:04.700

在您的行循环中（一旦您填充了所有列）：

```
$objPHPExcel->getActiveSheet()
    ->setCellValue( 'Q'.$rowNumber,
                    '=F'.$rowNumber.'-E'.$rowNumber
                  ); 
```

和单元格 R.$rowNumber 的等价物

所以：

```
while ($row = db_fetch_array($result)) {
   $col = 'A';
   foreach($row as $cell) {
      $objPHPExcel->getActiveSheet()->setCellValue($col.$rowNumber,$cell);
      $col++;
   }
    $objPHPExcel->getActiveSheet()
        ->setCellValue( 'Q'.$rowNumber,
                        '=F'.$rowNumber.'-E'.$rowNumber
                      );
   $rowNumber++;
} 
```

**编辑**

并使用范围为所有适当的单元格设置样式：

```
$objPHPExcel->getActiveSheet()
    ->getStyle('Q2:Q'.$rowNumber)
    ->getNumberFormat()
    ->setFormatCode('[h]:mm'); 
```

# windows - 当我想使用 MinGW 时，系统 PATH 中的 ndk bin 出现问题

> ID：11483068
> 
> 赞同：2
> 
> 时间：2012-07-14T10:38:59.183
> 
> 标签：windows, gcc, configuration, android-ndk, mingw

我从 nvidiia 安装 Tegra-Devpack，这个包包含 eclipse、android ndk、sdk 和其他 android 本机开发所需的东西。这个安装从 ndk 添加到我的系统变量“路径”文件夹 bin，其中包含 gcc、g++ 等。我还安装 MinGW 以使用 g++，从命令行（例如，我想在任何地方键入 g++ main.cpp -o main，并且编译），但如果我想要这个，我必须将 MinGW bin 文件夹添加到我的系统“路径”变量中，该变量已经包含其他 bin ：/（来自 Tegra-Devpack）你知道任何解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:04:35.613

Android NDK 带有非常复杂的构建系统，基于几个不同的 gcc 工具链和 makefile。要调用适当的工具链，您必须调用

```
ndk-build 
```

从项目的根目录（`jni`包含 Android.mk 和 Application.mk 的文件夹所在的位置）。

NDK 的构建系统不会干扰 MinGW。即，您可以让 Android NDK r8b 和 Equation GCC 4.8 Experimental 在同一环境中友好地共存。这可能是因为每个 gcc 编译器都来自其自己的二进制文件（即`D:\ndk\toolchains\arm-linux-androideabi-4.4.3\prebuilt\windows\bin\arm-linux-androideabi-gcc.exe`）并通过`ndk-build`脚本调用。

因此，解决方案将是：

1.  将路径添加`D:\ndk`到 PATH 环境变量
2.  不要直接调用 gcc 并使用`ndk-build`脚本

# linux - svn 不想询问密码

> ID：11483073
> 
> 赞同：1
> 
> 时间：2012-07-14T10:40:09.260
> 
> 标签：linux, svn, svnserve

我的配置：

```
root@/var/svn/skryb/conf# cat /etc/init.d/svnserve
[general]
anon-access = none
auth-access=read
auth-access=write
password-db = passwd
[sasl] 
```

重新启动 svnserve 以确保其正常工作：

```
# killall svnserve
# /etc/init.d/svnserve
# ps fax | grep svnserve
 1233 pts/2    S+     0:00                      \_ grep svnserve
 1231 ?        Ss     0:00 svnserve -d -r /var/svn/skryb/ 
```

从 windows pc 中检查内容：

```
C:\Temp\some>del *.*
C:\Temp\some\*.*, Продолжить [Y(да)/N(нет)]? y

C:\Temp\some>svn co svn://192.168.1.36
A    utils
A    utils\utils.ipr
A    utils\getContents
svn: E200015: Caught signal -- I hit ctr-break here 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T11:43:56.753

我不确定为什么它没有提示，但这里有一些提示，可能缺少什么。

*   看SVN红皮书：[创建用户文件和领域](http://svnbook.red-bean.com/en/1.6/svn-book.html#svn.serverconfig.svnserve.auth.users)时，缺少条目`realm = <your name>`。
*   您没有提到`password-db`文件的内容。您是否创建了它，它是否具有以下结构：

    ```
    [users]
    <name> = <password> 
    ```

*   你应该删除一个规则`auth-access`，我认为一个 with `read`，两个规则都没有意义。
*   我没有使用 SASL 的经验，但部分：[Authentication with SASL](http://svnbook.red-bean.com/en/1.6/svn-book.html#svn.serverconfig.svnserve.sasl.authn)至少提到了以下内容：

    ```
    [sasl]
    use-sasl = true 
    ```

*   您是否检查过您的密码没有被缓存？应该有一个本地缓存（在 Windows 中通常位于 下`%APPDATA%/Subversion/auth/`），当您尝试查看密码时，该缓存必须为空。

当您尝试了提示后，请评论结果，以便我可以进一步完善答案。我希望他们能帮助...

# python - PyQt：将多个字符串发送到打印机

> ID：11483077
> 
> 赞同：0
> 
> 时间：2012-07-14T10:40:33.313
> 
> 标签：python, sqlite, printing, pyqt

我的应用程序运行良好，解决了我寻求帮助的所有问题，最好是 :) 我想做的最后一件事是能够打印（或制作报告）从数据库查询的各种字符串。我搜索了很多，找到了 ReportLab Toolkit、reStructuredText 等等，但这不是我想要的。

这是我的代码：（由于粘贴，缩进可能会稍微偏离）

```
def preparePrint(self):
 caseNumber = (str(self.ui.linecaseNumber.text()).upper())
 if caseNumber:
  with con:
   cur = con.cursor()
   cur.execute('SELECT notes FROM cases WHERE caseNumber =?',[caseNumber])
   tempnotes=str(cur.fetchone())
   cur.execute('SELECT name FROM cases WHERE caseNumber =?',[caseNumber])
   tempname=str(cur.fetchone())
   cur.execute('SELECT date FROM cases WHERE caseNumber =?',[caseNumber])
   tempdate = str(cur.fetchone()) #fetch 3 values from SQLite database

    #get rid of "tuple marks"
   tempname = (str(tempname.replace('(','').replace(')','').replace(',','').replace("'","")))
   tempnotes = (str(tempnotes.replace('(','').replace(')','').replace(',','').replace("'",""))) 
   tempdate=(str(tempdate.replace('(','').replace(')','').replace(',','').replace("'",""))) 

    #join them in one string. Notice the \n
   finalText = (str("NAME: %s\nDATE: %s\nNOTES: %s" %(tempname,tempdate,tempnotes))) 

#put the joined string into one QTextEdit, while preserving HTML properties (bold mostly).
   self.ui.textPrint.setHtml(str(finalText.replace('(','').replace(')','').replace(',','').replace("'","").replace('\\n','\r'))) 
```

在此功能之后，还有一个用于创建 PDF 的功能，除了换行符。当我*将 finalText*打印到控制台时，它看起来就像我想要的那样。它在 QTextEdit 中看起来不像 :(

控制台输出：

```
Name: Some Name
Date: 14.07.2012
Notes: Some notes go here 
```

QTextEdit 和 PDF 输出：

```
Name: Some Name Date: 14.07.2012 Notes: Some notes go here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:20:24.437

这段代码在很多地方都是错误的......
我修改了你的代码，进行了许多改进和适当的行长：

```
def preparePrint(self):
    caseNumber = str(self.ui.linecaseNumber.text()).upper()
    if caseNumber:
        with con:
            cur = con.cursor()
            # fetch 3 values from SQLite database
            cur.execute('SELECT notes FROM cases WHERE caseNumber = ?',
                        caseNumber)
            tempnotes = cur.fetchone()[0]
            # if you have multiple columns, use:
            # tempnotes = ''.join(cur.fetchone())
            cur.execute('SELECT name FROM cases WHERE caseNumber = ?',
                        caseNumber)
            tempname = cur.fetchone()[0]
            cur.execute('SELECT date FROM cases WHERE caseNumber = ?',
                        caseNumber)
            tempdate = cur.fetchone()[0]

        # no need to 'get rid of "tuple marks"',
        # because they aren't there now

        # join them in one string. Notice the \n
        finalText = ("NAME: %s\nDATE: %s\nNOTES: %s"
                     % (tempname, tempdate, tempnotes))

        # put the joined string into one QTextEdit, 
        # while preserving HTML properties (bold mostly).

        # again, no need to 'get rid of "tuple marks"'
        self.ui.textPrint.setHtml(finaltext) 
```

这应该使文本带有换行符。如果没有，请尝试使用`\r\n`in finaltext 而不是`\n`. 如果它仍然不起作用，那么就会发生一些奇怪的事情，但至少你有更好的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T12:36:24.010

我破解了！:D 由于 QTextEdit 接受 HTML，<br> 标签会换行。这是一段与原始帖子不同的代码：

```
finalText = (str("NAME: %s%sDATE: %s%sNOTES: %s%s" %(tempname,'<br>',tempdate,'<br>',tempnotes,'<br>')))
self.ui.textPrint.setHtml(str(finalText).replace('\\n','\r')) 
```

# android - 在 Titanium 应用程序中找不到库 stlport_shared

> ID：11483078
> 
> 赞同：4
> 
> 时间：2012-07-14T10:40:56.713
> 
> 标签：android, titanium-mobile, titanium-modules

我想创建一个 Titanium 模块，因此我有一个扩展 KrollModule 及其方法的类：

```
@Kroll.method
public void example()
{   
    Activity activity = this.getActivity();
    String filesDir = activity.getFilesDir().getAbsolutePath();
    } 
```

当我尝试以这种方式在我的应用程序中使用此模块时：

```
var w = require('com.module3');
w.example(); 
```

我有以下错误：

```
[ERROR][TiApplication(  286)] (KrollRuntimeThread) [30,975] Sending event: exception on       thread: KrollRuntimeThread msg:java.lang.UnsatisfiedLinkError: Library stlport_shared not      found; Titanium 2.1.0,2012/06/28 12:16,6e3cab6
[ERROR][TiApplication(  286)] java.lang.UnsatisfiedLinkError: Library stlport_shared not found
[ERROR][TiApplication(  286)]   at java.lang.Runtime.loadLibrary(Runtime.java:461)
[ERROR][TiApplication(  286)]   at java.lang.System.loadLibrary(System.java:557)
[ERROR][TiApplication(  286)]   at org.appcelerator.kroll.runtime.v8.V8Runtime.initRuntime(V8Runtime.java:59)
[ERROR][TiApplication(  286)]   at org.appcelerator.kroll.KrollRuntime.doInit(KrollRuntime.java:163)
[ERROR][TiApplication(  286)]   at org.appcelerator.kroll.KrollRuntime$KrollRuntimeThread.run(KrollRuntime.java:101) 
```

我搜索 stlport_shared，它位于 C:\Users\Maria\AppData\Roaming\Titanium\mobilesdk\win32\2.1.0.GA\android\native\libs\x86 中。有人可以帮我理解这个问题吗？

# c# - 在 MonoTouch 中仅绘制图像的特定部分

> ID：11483081
> 
> 赞同：1
> 
> 时间：2012-07-14T10:41:04.827
> 
> 标签：c#, image, mono, xamarin.ios, drawing

我想为孩子们制作一个应用程序，当他们开始触摸屏幕时，背景图像会出现在他们的手指下。意味着假设我们有一个白色的屏幕，然后您开始触摸屏幕，无论您触摸到哪里，背景图像都只出现在该区域上。就像图层蒙版一样。

此致，佩曼·莫尔塔扎维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:11:28.393

有很多方法可以实现这一点。由于您`mono`在问题上加了标签，我假设您对一种易于移植到其他图形工具包的方式感兴趣。

1.  创建并显示您的*背景*图片；

2.  创建并显示（在背景上）第二张图像（相同大小），它是纯白色的，带有 Alpha 通道（不透明）；

3.  当您获得触摸事件时，只需将第二个图像的 alpha 设置为透明（例如，在触摸位置的一个圆圈，其半径大致与孩子手指的大小相同），*背景*图像将出现在它的后面；

作为替代方案，您可以逐渐从不透明减少到透明（在 #3 中），因此需要几次滑动才能获得完全清晰的图像。

# java - java拉绳直接图片

> ID：11483084
> 
> 赞同：3
> 
> 时间：2012-07-14T10:41:25.700
> 
> 标签：java, image, swing

> **可能重复：**
> [使用 Graphics2D 在 BufferedImage 上叠加文本并返回 BufferedImage](https://stackoverflow.com/questions/2658554/using-graphics2d-to-overlay-text-on-a-bufferedimage-and-return-a-bufferedimage)

我的问题是如何将字符串永久绘制到图像上。

当我绘制字符串然后刷新图像时，字符串在显示屏上消失了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T13:51:39.787

> ..如何将字符串永久绘制到图像上。

如果您的意思是a，`BufferedImage`那么它很简单。

1.  从图像中获取一个[`Graphics`](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html#getGraphics%28%29)或[`Graphics2D`](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html#createGraphics%28%29)实例。
2.  将绳子拉到它上面。
3.  处理图形对象。

工作完成了。要显示图像，请将其添加到标签。

如果您有一个`Image`实例而不是一个`BufferedImage`实例，请创建一个与原始图像一样大的缓冲图像，然后在上面的第 2 步之前将其绘制到图形实例。（绘制字符串）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T13:28:12.077

为了使文本始终显示在图像顶部，请将您的`drawString`电话放在里面`paint(Graphics g)`

如果您发布一些代码会很有帮助，但我认为您可能从错误的地方调用 drawString。现在，如果您还想保存顶部带有文本的图像，那是另一回事。我可能会使用`javax.imageio.ImageIO.write`它。

# python - 我可以将列表更改为字符串，对其进行修改，然后再次将其更改为列表吗？

> ID：11483085
> 
> 赞同：0
> 
> 时间：2012-07-14T10:41:41.690
> 
> 标签：python, regex, string, list

例如，我有一个这样的列表：

```
lista = ['abc', 'alpha', 'bravo', 'charlie'] 
```

然后我把它改成字符串并修改它：

```
lista = str(lista)
re.sub('a','b', lista) 
```

然后我会得到一个“字符串”，例如：

```
lista = ['bbc','blphb','brbvo','chbrlie'] 
```

我希望这再次成为一个列表。

有什么建议么？或者我可以修改列表中的内容吗？简单的方法是最好的。

编辑：我正在使用 beutifulsoup 的 findall 来制作列表。代码是这样的：

```
desclist = soup.findAll('description')
desclist[:] = (x.replace(r'.+', ' ') for x in desclist)
print desclist 
```

我正在尝试改变'。或 '.' 到 ' ' 但它说 nonetype 对象不可调用..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T10:42:55.183

无需将列表转换为字符串。也不需要使用正则表达式来进行简单的字符串替换。只需对列表中的每个项目执行替换并将它们存储在新列表中：

```
lista = [x.replace('a', 'b') for x in lista] 
```

您还可以就地修改列表：

```
lista[:] = (x.replace('a', 'b') for x in lista) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:43:54.527

使用[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)对列表中的每个成员进行操作：

```
In [1]: import re

In [2]: lista = ['abc', 'alpha', 'bravo', 'charlie']

In [3]: lista = [re.sub('a','b',x) for x in lista]

In [4]: lista
Out[4]: ['bbc', 'blphb', 'brbvo', 'chbrlie'] 
```

# ios - ShareKit 2.0：在 Facebook 上获取 OAuth 异常 368

> ID：11483086
> 
> 赞同：0
> 
> 时间：2012-07-14T10:41:54.230
> 
> 标签：ios, facebook, oauth, sharekit

我正在尝试使用 ShareKit 2.0 发布到 Facebook。

我得到了权限对话框，看到消息 UI 预先填充了我在代码中设置的默认消息 - 到目前为止，一切都很好。

当我单击“发送到 Facebook”时，我收到 OAuth 异常 368“尝试的操作已被视为滥用或以其他方式被禁止”

我认为这是developers.facebook.com 上的配置问题 - 我已设置

显示名称命名空间（我真的需要吗？）联系人电子邮件类别 iOS 捆绑 ID iPhone 应用商店 ID 为 iOS 配置 SSO - 启用 iOS 原生深度链接 - 启用 URL 方案后缀

Auth Dialog 设置为默认设置（空）

高级设置：应用程序类型 - 本机/桌面沙盒模式：禁用 其他一切都是默认/空的。

有任何想法吗？

更新：

因此，问题似乎是预填充消息中 App Store 上应用程序的 URL，这导致了“滥用/不允许”错误。如果我要删除此 URL，Facebook 甚至会接受预先填写的消息。

仅使用短信有效：

```
SHKItem *item = [SHKItem text:text]; 
```

新问题是 - 如果我不能在文本中包含 URL，我该如何处理没有指向原始应用程序链接的服务，例如使用 ShareKit 的 Twitter？

如果我正在使用

```
 SHKItem *item = [SHKItem URL:[NSURL URLWithString:@"http://itunes.com/apps/MyApp"] title:text contentType:SHKURLContentTypeWebpage]; 
```

Facebook 会给我同样的“滥用/禁止”错误（尽管在弹出式 WebView 中对用户可见，而不是作为请求错误）。

其他 URL（未链接到 App Store）有效。

我的快速解决方法是链接到我自己的网站，该网站描述了该应用程序并有一个 App Store 徽章，但这可能不是最好的解决方案？

# php - 如何优化 Sphinx 搜索以进行模糊文本匹配？

> ID：11483087
> 
> 赞同：0
> 
> 时间：2012-07-14T10:42:12.250
> 
> 标签：php, mysql, search, full-text-search, sphinx

情况：我有一个 MySQL 数据库，总共有 200 万条记录，其中包含英文和中文文本单词和语料库以及它们之间的关系。它位于具有 1.5G RAM 和 2.26Ghz 双核 CPU 的专用服务器上。搜索包含30多个汉字的字符串时，大约需要4秒才能得到结果。这太慢了。

搜索方法：运行查询时，一旦有 4 个或更多词匹配，则认为查询成功，然后按相关性对结果进行排序，并选择匹配度最高的词。

这是现在如何完成的一个片段：

```
$this->sphinx->ResetFilters();
$this->sphinx->SetMatchMode(SPH_MATCH_ANY);
//Sort by relevance
$this->sphinx->SetSortMode(SPH_SORT_RELEVANCE);
$this->sphinx->SetArrayResult(true);
//Get 10 results
$this->sphinx->SetLimits(0,10);
//Filter the length
$this->sphinx->SetFilterRange('en_length', 10,50); 
```

如何提高搜索性能？如果可能的话，我希望在 1 秒内完成。我试过使用 SPH_MATCH_ALL 并且效果非常好。我相信问题可能是用于模糊匹配的匹配模式？

**更新：** 使用 quorum 运算符应该更快，但使用它会返回意外值：

这是使用 OR 运算符（正常）时的结果： ![在此处输入图像描述](../Images/116c809656ae025631201bdf728cb147.png) 这是使用 Quorum 运算符时的结果（损坏）：

![在此处输入图像描述](../Images/bbbe14276fc2dad21b9d6b688d398f1f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:08:28.773

按非 FT 属性过滤可能会很慢。如果您正在寻找具有 4 个或更多匹配项的文档，您可能需要使用 quorum 运算符：

```
"get me any document with more than four matches"/4 
```

这需要启用 SPH_MATCH_EXTENDED 模式

希望这可以帮助。

# php - 如何在magento站点中创建新页面

> ID：11483097
> 
> 赞同：3
> 
> 时间：2012-07-14T10:43:54.877
> 
> 标签：php, magento, e-commerce

我正在尝试在 magento 中创建一个新页面，我必须在其中添加一些 html 和 javascript。为此，我创建了一个模块。-> app\code\local\CompanyName\HelloWorld\etc\config.xml 的内容 -

```
 <?xml version="1.0"?>
 <config>
<modules>
    <CompanyName_Helloworld>
        <version>
            0.1.0
        </version>
    </CompanyName_Helloworld>
</modules>
<frontend>
    <routers>
        <helloworld>
            <use>standard</use>
            <args>
                <module>CompanyName_Helloworld</module>
                <frontName>Helloworld</frontName>
            </args>
        </helloworld>
    </routers>

</frontend> 
```

-> app\code\local\CompanyName\HelloWorld\controllers\IndexController.php 的内容 -

```
<?php
 class CompanyName_Helloworld_IndexController extends   Mage_Core_Controller_Front_Action{
public function indexAction(){
    $this->loadLayout();
           $this->renderLayout();
    //echo "We're echoing just to show that this is what's called, normally you'd have some kind of redirect going on here";
  }
 } 
```

?>

完成所有这些后，当我转到 domain/index.php/Helloworld 时，我可以看到页眉和页脚，现在我想在它们之间添加一些“div”标签和 javascript。请解释如何做到这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T08:29:43.540

插入到模块的`config.xml`：

```
<frontend>
...
  <layout>
    <updates>
      <helloworld>
        <file>helloworld.xml</file>
      </helloworld>
    </updates>
  </layout>
</frontend> 
```

接下来添加布局文件`app/design/frontend/default/default/layout/helloworld.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<layout version="0.1.0">
  <helloworld_index_index>
    <reference name="content">
      <block type="helloworld/index" name="helloworld_any_block" template="helloworld/index.phtml" />
    </reference>
  </helloworld_index_index>
</layout> 
```

最终添加任何内容的 phtml 文件`app/design/frontend/default/default/template/helloworld/index.phtml`。

# php - codeigniter中的递归函数

> ID：11483098
> 
> 赞同：0
> 
> 时间：2012-07-14T10:44:10.407
> 
> 标签：php, codeigniter

我已经创建了一个递归函数来以树形形式显示导航方案我在 codeigniter 中使用递归，但这会产生错误，因为我的代码是未定义的函数

```
 function parseAndPrintTree($root, $tree) 
      {
       $return = array();
       if(!is_null($tree) && count($tree) > 0) 
         {
          echo 'ul';
           foreach($tree as $child => $parent) 
            {
            if($parent == $root) 
              {

              unset($tree[$child]);
                echo 'li'.$child;
                return  parseAndPrintTree($child, $tree); // Recursion-here(Not called)
                echo 'closing li';
               }
             }
            echo 'closing ul';
          }
        } 
```

我将根和平面数组传递给该函数并得到未定义的行为..在代码点火器控制器中递归调用函数的正确方法是什么错误：：致命错误：调用未定义函数 parseAndPrintTree()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:41:05.417

如果您在控制器或模型中使用它，则该函数是一个类方法，并且需要这样调用，即使用`$this->parseAndPrintTree($child,$tree)`：

```
...
if($parent == $root) 
{
 unset($tree[$child]);
 echo 'li'.$child;
      $this->parseAndPrintTree($child, $tree);
      // ^-- inside the recursion
 echo 'closing li';
}
... 
```

否则，正如 Valeh 所说，函数需要在助手内部。创建一个助手，比如 helpers/site_helper.php：

```
if(!function_exists('parseAndPrinTree')
{
  function parseAndPrintTree($root, $tree)
  {}
} 
```

您现在可以将其用于：

```
$this->load->helper('site');
parseAndPrintTree($root,$tree); 
```

如果助手被多次调用，需要进行存在检查以避免出现“函数已定义”错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:53:10.697

我得到了解决方案，我需要使用 $this 而不仅仅是函数名

```
 function parseAndPrintTree($root, $tree) 
      {
       $return = array();
       if(!is_null($tree) && count($tree) > 0) 
         {
          echo 'ul';
           foreach($tree as $child => $parent) 
            {
            if($parent == $root) 
              { `unset($tree[$child]);
            echo 'li'.$child;
              $this->parseAndPrintTree($child, $tree); // Recursion-here(Now called)
            echo 'closing li';
           }
         }
        echo 'closing ul';
      }
    }` 

```

# apache - 用于迁移网站代码的 RerwiteRule 留在同一个域上

> ID：11483101
> 
> 赞同：1
> 
> 时间：2012-07-14T10:44:25.813
> 
> 标签：apache, mod-rewrite

我的 .htaccess 文件中有这个

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

我想要做的是在这个配置中添加另一个 RewriteRule 以便像这样的旧 URL 将被重定向到站点的根目录

```
http://www.acme.com/category.php?id=6
http://www.acme.com/product.php?id=183&category= 
```

我知道“category.php”和“product.php”现在将是无效字符串。以“category.php”为例，我尝试将配置更改为

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^category.php(.*) / [L,R=301]
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

这将重定向如下

```
http://www.acme.com/category.php?id=112 -> http://www.acme.com/?id=112 
```

我有两个问题

1.  我不希望附加查询字符串。我没有指定 [QSA]
2.  如果我直接输入根目录`www.acme.com`，除非我删除刚刚添加的行，否则页面不会显示。为什么我的新 RewriteRule 会影响不以“category.php”开头的 URL？

**[编辑]**

我也试过这个而不是上面的重定向，但我似乎仍然在应用这两个规则

```
RewriteRule ^category.php /holdingPage.php [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T17:10:39.423

您需要将 2 个条件绑定到发送所有内容的旧规则，`index.php`并且您需要在它们*之上*添加新规则：

```
RewriteEngine On
RewriteBase /

RewriteRule ^category.php /? [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

为了处理**1.**，我在规则目标的 / 末尾添加了一个“ **？ ”。**这使得查询字符串不会自动附加，除非你特别有`QSA`标志。至于**2.**，不确定为什么它对您不起作用，但它可能与应用于错误规则的 2 个条件有关。

* * *

编辑：

有关 2`RewriteCond`行的说明，请参阅这篇文章：[https ://stackoverflow.com/a/11275339/851273](https://stackoverflow.com/a/11275339/851273)

A`RewriteCond`本质上是一个条件，这个块：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

本质上是这样的（在伪代码中）：

```
if(request_uri != maps_to_existing file) {
    if(request_uri != maps_to_existing_directory) {
        request_uri = request_uri.replace("([^?]*)", "index.php?_route_=$1", "[L,QSA]");
    }
} 
```

事情是，一个`RewriteCond`或许多一个接一个，只适用于紧随其后的`RewriteRule`，所以如果不将 category.php 排除在前面，则伪代码 deo 等效项将是：

```
if(request_uri != maps_to_existing file) {
    if(request_uri != maps_to_existing_directory) {
        request_uri = request_uri.replace("^category.php", "/?", "[L,R=301]");
    }
}
request_uri = request_uri.replace("([^?]*)", "index.php?_route_=$1", "[L,QSA]"); 
```

这有点坏了，因为这两个`if()`条件被错误地应用了。特别是重写为“index.php”的那个需要条件以防止自身循环。

# javascript - 故意使 Chrome 扩展程序崩溃的 Chrome 选项卡

> ID：11483104
> 
> 赞同：7
> 
> 时间：2012-07-14T10:44:47.600
> 
> 标签：javascript, google-chrome, google-chrome-extension, crash

嗨，我正在创建一个 Chrome 扩展程序来故意使 Chrome 选项卡崩溃。我的方法没有按照我想要的方式工作。我在尝试：

```
chrome.tabs.update({url: "about:crash"});
chrome.tabs.update({url: "chrome://crash"});
window.location = 'about:crash';
window.location = 'chrome://crash'; 
```

这些都不起作用。

但是，如果我将 URL 替换为“about:blank”或“http://google.com”之类的内容，它就可以工作！

Chrome 是否有某种安全措施，如果有的话......有什么建议可以解决吗？

如果可能的话，我想避免使用无限循环使内存过载。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T23:50:59.183

加载`chrome://kill`在选项卡上。

例如，要在 chrome 上终止此选项卡，`chrome://kill`请在 URL 栏中输入并按 Enter。

Chrome 20 的额外乐趣：`chrome://favicon/size/1/http://gonna.crash.you/`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T03:19:35.417

使用[实验进程 API](http://code.google.com/chrome/extensions/dev/experimental.processes.html)，您可以结束进程，包括那些属于选项卡的进程。

我想到了完全相同的用例——如果你完成了你的扩展，我想试试！

虽然现在可能一个更好的主意可能是您的背景页面可以将选项卡重定向到基于页面的数据 uri，例如

```
data:text/html,<a href="http://www.google.com/">click here to restore</a> 
```

或者可能是基于其查询参数生成页面的扩展页面：

```
my_extension_page.html?url=http://www.google.com/ 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-23T18:42:36.327

得到这个工作并打包为一个[扩展](https://github.com/funroll/jollyroger)。以下是相关代码：

```
// Called when the user clicks on the browser action.
chrome.browserAction.onClicked.addListener(function(tab) {
  queryInfo = new Object();
  chrome.tabs.query(queryInfo, function(result) {
    var i;
    for (i=0; i < result.length; i += 1) {
        chrome.experimental.processes.getProcessIdForTab(result[i].id, function(processId) {
            chrome.experimental.processes.terminate(processId);
        });
    }
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T04:07:10.103

选项卡对象的关闭方法应该以有序的方式执行此操作，文档在这里：[http ://code.google.com/chrome/extensions/tabs.html#method-remove](http://code.google.com/chrome/extensions/tabs.html#method-remove)

干杯，T。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-18T15:33:02.050

使用以下 FUN FUN LOOP，如此[处](https://stackoverflow.com/questions/10965987/how-do-you-force-chrome-pages-tabs-to-crash-using-javascript)所述！

```
txt = "a";
while(1)
{
    txt = txt += "a";    //add as much as the browser can handle
}
//<i>[evil laugh]</i> BOOM! All memory used up, and it is now <b>CRASHED</b>! 
```

# security - flowplayer 和 https

> ID：11483105
> 
> 赞同：0
> 
> 时间：2012-07-14T10:45:11.133
> 
> 标签：security, https, flowplayer

我在我的网站上使用 flowplayer。问题是，在设置 HTTPS 后，我收到有关视频播放器页面上不安全内容的警告。有什么办法可以消除这个警告吗？

# java - 如何正确着色 JTree 和所有节点

> ID：11483116
> 
> 赞同：4
> 
> 时间：2012-07-14T10:46:31.763
> 
> 标签：java, swing

让我解释一下我需要什么以及我已经走了多远：

我有`JTree`一个自定义模型和一些漂亮的图标，一切正常，但是，树的默认颜色（白色）不适合我正在尝试设计的 GUI，我希望能够更改其背景颜色。

事实证明，这很麻烦！

*我在网上看到了很多对此的解释*，它们似乎围绕着扩展 the`DefaultTreeCellRenderer`或*应该*改为。`BasicTreeUI`

 **无论如何，建议的方法似乎都不是很好，因为我总是遇到以下两种情况之一：

颜色是在树中设置的，但是在树标签的末端和树的右侧之间、标签和它们的图标之间以及用于扩展树的加/减小部件之间存在令人讨厌的间隙。在这种情况下，建议实施全行选择。

另一种情况是实现了全行选择，节点颜色正确，全行选择有效，但图标或者完全丢失，连同加/减小部件，或者两者周围仍然存在令人讨厌的白色边框。

我自己的尝试失败了，我目前只剩下以下代码，它为树和节点着色，但仍然在树标签的末尾和所有图标之间留下令人讨厌的白色边框。

```
final Color MainBg = new Color(213,220,228);
KTree.setCellRenderer(new DefaultTreeCellRenderer()
{
    @Override
    public Component getTreeCellRendererComponent(JTree pTree, Object pValue, boolean pIsSelected, boolean pIsExpanded, boolean pIsLeaf, int pRow, boolean pHasFocus)
    {
            super.getTreeCellRendererComponent(pTree, pValue, pIsSelected, pIsExpanded, pIsLeaf, pRow, pHasFocus);
            setBackgroundNonSelectionColor(MainBg);
            setBackgroundSelectionColor(MainBg);
            setTextNonSelectionColor(Color.BLACK);
            setTextSelectionColor(Color.BLACK);
            ImageIcon tDoc = createImageIcon("images"  + File.separator + "document.gif","document");
            ImageIcon tOpen = createImageIcon("images"  + File.separator + "book_open.gif","book open");
            ImageIcon tClosed = createImageIcon("images"  + File.separator + "bookclosed.png","book closed");
            setClosedIcon(tClosed);
            setOpenIcon(tOpen);
            setLeafIcon(tDoc);
            putClientProperty("Tree.collapsedIcon", tDoc);
            putClientProperty("tree.expandedIcon", tOpen);
        return (this);
    }
}); 
```

我的问题：

1）当然，我会很感激一些帮助`JTree`，我愿意接受建议，虽然如果你打算发布一个链接，我很可能在过去几天已经去过那里，而且.. .

2）我很欣赏对这个过程所涉及的确切内容的明确解释。我通读了许多关于`JTree`但没有长期关注的教程（如果有的话）完全着色一棵树的问题，这是我正在寻找的，并且似乎有一些关于确切需要什么的讨论，例如完整行选择与否，子类化与否等。

我还想了解为什么某些事情被认为是“黑客”以及替代方案是什么。

* * *

## 编辑 - 一个解决方案

我添加这一部分是为了展示我在解决这个问题方面取得的进展，并可能让其他人在这个相当繁琐的过程中领先一步。我花了几天的时间试图让它与 System L&F 一起正常工作，我已经转了好几次了。毫无疑问，这很大程度上是由于缺乏经验，所以如果这可以为​​其他人节省一些拉头发的时间，那就更好了！

顺便说一句：如果我做了一些被认为是 hack 的事情，我很乐意听到批评，但请提供一个（可行的）替代方案以及 Hack 标签背后的一些明确推理。

好的，让我们开始吧：我想要设置系统 L&F，因为我不太喜欢其他选项，而且我喜欢用户看到与他们习惯的事物相匹配的程序。在我做任何其他事情之前，我这样设置 L&F：

```
try
    {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    }
catch (Exception e) { return; } 
```

这`JTree`将为您使用的任何操作系统设置标准。这似乎包括设置树本身的背景，以及节点选择的背景等等。如果你想要的只是标准`JTree`，你就可以开始了，但是当我想看到基于系统的滚动条等时，我也想看到除白色以外的颜色作为背景。

我将背景设置为这样的漂亮蓝色（请注意，稍后会再次使用该颜色，因此`final`声明）：

```
final Color MainBg = new Color(213,220,228);
    KTree.setBackground(MainBg); 
```

我现在拥有的是`JTree`一个漂亮的蓝色背景，它仅覆盖树中不包含节点的区域，根据 L&F 的设置，这些区域保持白色。我现在需要为节点本身设置一些颜色，为此我需要使用以下代码覆盖`getTreeCellRendererComponent`of ：`DefaultTreeCellRenderer`

```
final Color SellBg = new Color(232,235,237);
final Color HiliBg = new Color(150,196,246);

KTree.setCellRenderer(new DefaultTreeCellRenderer()
{

    @Override
    public Component getTreeCellRendererComponent( JTree tree, Object value, boolean sel, boolean expanded, boolean leaf, int row, boolean hasFocus)
    {
        super.getTreeCellRendererComponent( tree, value, sel, expanded, leaf, row, hasFocus);
        setBackgroundNonSelectionColor(MainBg);
        setBackgroundSelectionColor(SellBg);
        setTextNonSelectionColor(Color.BLACK);
        setTextSelectionColor(Color.BLACK);
        ImageIcon tDoc = createImageIcon("images"  + File.separator + "document.gif","document");
        ImageIcon tOpen = createImageIcon("images"  + File.separator + "book_open.gif","open");
        ImageIcon tClosed = createImageIcon("images"  + File.separator + "bookclosed.png","closed");
        setClosedIcon(tClosed);
        setOpenIcon(tOpen);
        setLeafIcon(tDoc);
        setBorderSelectionColor(HiliBg);
        return this;
    }
}); 
```

这是上面的*createImageIcon*。这直接来自教程，但请注意，这是在我完成之前编辑的（所以不要复制和粘贴*此*代码！）：

```
protected ImageIcon createImageIcon(String path, String description)
{
    java.net.URL imgURL = getClass().getResource(path);
    if (imgURL != null)
    {
        return new ImageIcon(imgURL, description);
    }
    else
    {
        System.err.println("Couldn't find file: " + path);
        return null;
    }
} 
```

如果您遵循代码，那么在此阶段您将看到我为树节点设置了各种颜色，并为它们添加了一些图标。所有这一切都很好，但是现在在节点文本的末端和`JTree`自身的边缘之间，以及节点文本和图标之间，以及树的加/减小部件之间都有令人讨厌的白色块。随着树的扩展，这些白色块也会穿过树。

这几乎就是我进来的地方，开始拉头发。多亏了 Jacob 的建议和 MadProgrammer 的提示（谢谢大家），我走在了正确的轨道上，但这就是事情变得奇怪的地方，很可能是因为我已经在搞砸`JTree`试图让事情正常进行。将代码回滚到以前的版本并重新开始本节有助于使事情正常进行。

快速说明：如果我做错了，请告诉我！

看来要更改`JTree`我需要覆盖的白色部分`BasicTreeUI`，我这样做是这样的：

```
KTree.setUI(new javax.swing.plaf.basic.BasicTreeUI()
{
    @Override
    public Rectangle getPathBounds(JTree tree, TreePath path)
    {
        if(tree != null && treeState != null)
        {
            return getPathBounds(path, tree.getInsets(), new Rectangle());
        }
        return null;
    }
    private Rectangle getPathBounds(TreePath path, Insets insets, Rectangle bounds)
    {
        bounds = treeState.getBounds(path, bounds);
        if(bounds != null)
        {
            bounds.width = tree.getWidth();
            bounds.y += insets.top;
        }
        return bounds;
    }

}); 
```

我必须声明这不是我的代码 - 我在许多教程网站之一上找到了它，它按照建议工作，我`JTree`现在有一个正确绘制的背景，但是，加号/减号小部件已经消失了！

很可能有一种简单的方法可以从上面的代码中设置这些小部件，但是我注意到 Jacob 关于弄乱的警告，所以我在设置 L&F 后*直接*`BasicTreeUI`放置了以下代码：

 *```
ImageIcon clapsed = createImageIcon("images"  + File.separator + "plus.gif","closed");
ImageIcon clopen = createImageIcon("images"  + File.separator + "minus.gif","open");
UIManager.getLookAndFeelDefaults().put("Tree.collapsedIcon",clapsed);
UIManager.getLookAndFeelDefaults().put("Tree.expandedIcon",clopen);
UIManager.getLookAndFeelDefaults().put("Tree.paintLines", true);
UIManager.getLookAndFeelDefaults().put("Tree.leftChildIndent",7);
UIManager.getLookAndFeelDefaults().put("Tree.lineTypeDashed",true) 
```

这会将加/减小部件图标设置为我自己的一些图标，并在树中的元素之间设置我想要的绘制线条的类型。请注意，此时我收到一个错误，因为无法访问之前的非静态*createImageIcon 。*我必须像这样编辑代码以允许调用此方法：

```
protected static ImageIcon createImageIcon(String path, String description)
{
    Class<?> cl=new Object(){}.getClass().getEnclosingClass();
        java.net.URL imgURL = cl.getResource(path);
        if (imgURL != null)
        {
            return new ImageIcon(imgURL, description);
        }
        else
        {
            System.err.println("Couldn't find file: " + path);
            return null;
        }
} 
```

我现在（终于！）有一个`JTree`, 设置了系统 L&F，并为树的所有元素设置了颜色。

仍然存在未解决的问题：

我（尚未）完全理解`BasicTreeUI()`代码 - 这给了我所需的颜色，但似乎也给了我完整的行选择。但是我一直无法让选择颜色跨越整个距离。我打算稍后再玩，但感​​谢 Jacob 的警告，我会保持谨慎 - 如果有人对此有任何硬性规定，我很乐意听到。

我还特意设置了 L&F，以便用户可以看到他们熟悉的东西，尽管颜色不同。但是，我被迫将自己的图标添加到加/减树小部件中，这并不是真正的问题，而是有点小问题。这很可能在以后得到澄清。

我的另一个担忧是，当使用我设置值时，`UIManager`我只能设置某些键，而其他键显然被忽略了。MadProgrammer 确实指出使用 Nimbus 可能会使这些键有些混乱，因此使用 L&F 系统可能有其自身的怪癖。

不管怎样，这是我目前努力的结果。我为这篇文章的长度道歉，但我希望这可以帮助其他人，并且如果我以错误的方式做某事，有人可以向我指出正确的解决方法。

问候

MVK

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T12:33:28.213

如果您已经覆盖`getTreeCellRendererComponent`，以便树项目具有您想要的颜色，您可以使用

```
UIManager.getLookAndFeelDefaults().put("Tree.background", new ColorUIResource(aColor); 
```

更改树中“未占用”空间的颜色。请注意，这将影响*所有*未来的树。组件 UI 类在绘制其组件时使用此属性，许多人喜欢它。要找出存在哪些键，您可以执行以下操作：

```
for (Entry<Object, Object> entry : UIManager.getLookAndFeelDefaults().entrySet()) {
    System.out.println(entry.getKey() + " : " + entry.getValue());
} 
```

至于您的其他问题，我永远不会认为覆盖`getTreeCellRendererComponent`是一种黑客行为，但粗心的扩展`BasicTreeUI`可能会导致某些外观和感觉出现意外行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-26T19:26:44.690

如果您正在寻找的只是一种在 JTree 中同时拥有 System L&F 和彩色背景 + 文本的方法，那么这就是您应该需要的所有代码：

```
 try {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        UIManager.getLookAndFeelDefaults().put("Tree.background", new ColorUIResource(Util.BACKGROUND));
        UIManager.getLookAndFeelDefaults().put("Tree.textBackground", new ColorUIResource(Util.BACKGROUND));
    } catch (ClassNotFoundException | InstantiationException
            | IllegalAccessException | UnsupportedLookAndFeelException e) {
        e.printStackTrace();
    } 
```***

# php - 如何评论照片和喜欢照片

> ID：11483117
> 
> 赞同：-2
> 
> 时间：2012-07-14T10:46:35.097
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk, facebook-comments

我[在文档中进行了](http://developers.facebook.com/docs/reference/api/Comment/)研究，但我找不到任何东西。

我希望用户评论他人的照片并喜欢他们的照片。我怎样才能做到这一点？
我正在使用 php-sdk 也使用图形 api。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T11:47:35.657

您是否尝试过浏览[`photo`](https://developers.facebook.com/docs/reference/api/photo/)对象文档？
[评论](https://developers.facebook.com/docs/reference/api/photo/#comments)：

> 您可以通过发出具有 publish_stream 权限和以下参数的 HTTP POST 请求写入 PHOTO_ID/comments 连接以向照片发布评论。

[喜欢](https://developers.facebook.com/docs/reference/api/photo/#likes)：

> 您可以通过向具有 publish_stream 权限的 PHOTO_ID/likes 连接发出 HTTP POST 请求来点赞照片。不需要参数。

# wpf - WPF 性能：画笔作为资源

> ID：11483118
> 
> 赞同：1
> 
> 时间：2012-07-14T10:47:21.077
> 
> 标签：wpf, performance

默认情况下，在 XAML 中声明为资源的画笔是“解冻的”。对于我们的应用程序，我们使用了一个为所有常用控件生成样式的工具。但我发现它还在我们的应用程序使用的资源字典中声明了很多画笔（SolidColor、LinerGradient 等）。

您认为将它们标记为“冻结”是一种好习惯吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:03:21.753

是的，

请参阅以下文章中 Microsoft 的建议：http: [//msdn.microsoft.com/en-us/library/bb613565.aspx](http://msdn.microsoft.com/en-us/library/bb613565.aspx)

他们的分析样本：

*   冻结的 SolidColorBrush：212 字节
*   非冻结 SolidColorBrush：972 字节

# .net - 禁用交换（分页文件）以确保一切都在内存中

> ID：11483119
> 
> 赞同：1
> 
> 时间：2012-07-14T10:47:21.183
> 
> 标签：.net, windows, memory, pagefile

我有几个需要真实内存的应用程序，它们消耗了大量内存。一种解决方案是将应用程序中的每一块内存都锁定（VirtualLock），但由于应用程序位于 .NET 中，因此需要很多小时才能做好。

所以，我的问题是，禁用交换文件（我的机器上有很多 RAM）是确保所有内容都真正在内存中的有效策略吗？

**更新：**

让我重复一遍 - 我知道这可能是非常肮脏的做事方式，并且可能会破坏整个操作系统的运行，但是，我将承担全部责任并应对后果，只想知道我可能会遇到什么，问题明智的。

以下是其他 StackExchangers 的看法：[https ://serverfault.com/questions/23621/any-benefit-or-detriment-from-removing-a-pagefile-on-an-8gb-ram-machine](https://serverfault.com/questions/23621/any-benefit-or-detriment-from-removing-a-pagefile-on-an-8gb-ram-machine)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T12:04:34.077

你不能通过这样做强制进入内存的一件事：可执行图像和映射文件。这些是他们自己的每个“页面文件”。当内存压力发生时，Windows 检测到它们在内存中的页面没有被修改，并且只是丢弃这些页面，因为它们可以稍后重新加载。

所有没有文件支持的东西都不能被分页（只是没有地方放它）。所以我想你的技术在实践中会起作用。

你不会看到很多问题。我一直在运行而没有分页文件（16GB RAM）。在蓝屏的情况下，您失去了捕获完整内存转储的能力，但很可能您不需要它。

只要确保你永远不会达到物理内存限制，否则很多程序会严重崩溃。没有人编写他们的程序来应对 OOM 情况（除了我从未见过的核心 Windows 组件崩溃。他们做得很好。）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T12:58:15.570

> 我只需要确保我的数据始终在内存中

但是在内存中有数据而不是访问它所需的代码有什么好处呢？您可以确定您的数据在 RAM 中，但您不能确定代码是否在 RAM 中。当需要重新调入代码时，您将产生完全相同的延迟。第一组候选对象是 .NET 框架程序集，它们经过预编译（“ngen-ed”）并由它们的 *.ni.dll 支持文件。你可以做些什么，你可以从 GAC 目录（c:\windows\assembly\gac_64 和 gac_msil 目录）中删除它们。当您运行多个 .NET 程序时，您将付出的代价是显着减慢热启动和不共享。下一组候选是 Windows 操作系统 DLL。对此你无能为力。

另一件需要担心的是文件系统缓存。随着 RAM 使用量的增加，缓存会缩小。这将显着减慢磁盘访问速度。特别是如果无法缓存，写入速度会非常慢，从几微秒到几秒。

当您的 RAM 使用高度可预测且远低于限制并且您只在机器上运行一个程序时，这很可能不是一个真正的问题。您必须对其进行监控以确保情况如此。不得不担心 RAM 大大违背了购买大量 RAM 的目的。特别是当您不能保证禁用分页文件实际上会给您带来任何好处时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T22:54:05.710

我尝试禁用页面文件。结局并不好...

我只想说我做了一次野鹅追逐。禁用页面文件对磁盘 i/o 施加了极大的压力，现在已经承受了所有的打击。

摘要：就我而言，让 Windows 平衡文件缓存/应用程序内存使用是明显的赢家。

# java - 自定义列表字段点击事件

> ID：11483128
> 
> 赞同：4
> 
> 时间：2012-07-14T10:49:21.403
> 
> 标签：java, blackberry, blackberry-jde, listfield

我正在编写一个应用程序，其中我创建了用于显示列表视图的自定义列表字段。我的 CustomListField 连续包含一个图像和文本。我在单击 listfield 行时获取字段更改侦听器，但我也想将 fieldchange 侦听器放在图像上.. 谁能告诉我我该怎么做。

这是我的代码。

```
public class CustomListField extends ListField implements ListFieldCallback {
    private Vector _listData;
    private int _MAX_ROW_HEIGHT = 60;

    public CustomListField(Vector data) {
        _listData = data;
        setSize(_listData.size());
        setSearchable(true);
        setCallback(this);
        setRowHeight(_MAX_ROW_HEIGHT);
    }

    protected void drawFocus(Graphics graphics, boolean on) {
        XYRect rect = new XYRect();
        graphics.setGlobalAlpha(150);
        graphics.setColor(Color.BLUE);
        getFocusRect(rect);
        drawHighlightRegion(graphics, HIGHLIGHT_FOCUS, true, rect.x, rect.y, rect.width, rect.height);
    }

    public int moveFocus(int amount, int status, int time) {
        this.invalidate(this.getSelectedIndex());
        return super.moveFocus(amount, status, time);

    }

    public void onFocus(int direction) {
        super.onFocus(direction);
    }

    protected void onUnFocus() {
        this.invalidate(this.getSelectedIndex());
    }

    public void refresh() {
        this.getManager().invalidate();
    }

    public void drawListRow(ListField listField, Graphics graphics, int index, int y, int w) {
        listField.setBackground(BackgroundFactory.createBitmapBackground(Bitmap.getBitmapResource("listing_bg.png")));
        ListRander listRander = (ListRander) _listData.elementAt(index);

        graphics.setGlobalAlpha(255);
        graphics.setFont(Font.getDefault().getFontFamily().getFont(Font.PLAIN, 24));

        final int margin = 5;
        final Bitmap thumb = listRander.getListThumb();
        final String listHeading = listRander.getListTitle();
        final Bitmap nevBar = listRander.getNavBar();

        // list border
        graphics.setColor(Color.GRAY);
        graphics.drawRect(0, y, w, _MAX_ROW_HEIGHT);

        // thumbnail border & thumbnail image
        graphics.setColor(Color.BLACK);
        // graphics.drawRoundRect(margin-2, y+margin-2,thumb.getWidth()+2, thumb.getHeight()+2, 5, 5);
        graphics.drawBitmap(margin, y + margin, thumb.getWidth(), thumb.getHeight(), thumb, 0, 0);

        // drawing texts
        // graphics.setFont(Font.BOLD);
        graphics.drawText(listHeading, margin + thumb.getWidth(), y + margin);
        graphics.setColor(Color.GRAY);
        // graphics.setFont(Font.smallFont); // graphics.drawText(listDesc, 2*margin+thumb.getWidth(), y+ margin+20); // //
        // graphics.drawText(listDesc2, 2*margin+thumb.getWidth(), y+ margin+32);

        // draw navigation button
        final int navBarPosY = y + (_MAX_ROW_HEIGHT / 2 - nevBar.getHeight() / 2);
        final int navBarPosX = Graphics.getScreenWidth() - nevBar.getWidth() + margin;
        graphics.drawBitmap(navBarPosX, navBarPosY, nevBar.getWidth(), nevBar.getHeight(), nevBar, 0, 0);
    }

    public Object get(ListField listField, int index) {
        String rowString = (String) _listData.elementAt(index);
        return rowString;
    }

    public int indexOfList(ListField listField, String prefix, int start) {
        for (Enumeration e = _listData.elements(); e.hasMoreElements();) {
            String rowString = (String) e.nextElement();
            if (rowString.startsWith(prefix)) {
                return _listData.indexOf(rowString);
            }
        }
        return 0;
    }

    public int getPreferredWidth(ListField listField) {
        return 3 * listField.getRowHeight();

    }

/*
    protected boolean trackwheelClick(int status, int time) {
        invalidate(getSelectedIndex());
        Dialog.alert(" U have selected :" + getSelectedIndex());
        return super.trackwheelClick(status, time);
    }    
*/
} 
```

我想将点击列表器放在列表字段行的星形图像上

以下是上述代码的输出。 ![在此处输入图像描述](../Images/409b47957bbd0084ce11199c3eee2c2f.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T08:07:21.063

我在过去的项目中做了与此非常相似的事情：

## 背景

[正如 Arhimed 在他的回答中所说](https://stackoverflow.com/a/11486480/119114)，并且您可以[在此处的 BlackBerry 论坛上](http://supportforums.blackberry.com/t5/Java-Development/making-field-inside-a-listfield-row-focusable/td-p/1505295)阅读到，您不能`Field`在`ListField`. 行的内容`ListField`只是直接`drawListRow()`作为文本和位图等绘制。内容不是`Field`实例，因此不可聚焦。

所以，我所做的就是`ListField`用`Manager`. 最初，我使用 a `VerticalFieldManager`，但遇到了问题。我也看到了很多关于堆栈溢出的问题，人们子类`VerticalFieldManager`化，只自定义一个小行为，一切都开始崩溃。在我看来，`VerticalFieldManager`如果你接受它的正常行为，那效果很好，如果你需要更多东西，直接扩展`Manager`。为垂直堆叠的行执行布局非常容易。

然后我将每一行都设为自己的`Manager`，并实现自定义布局`sublayout()`以将行的`Field`s 放置在我想要的位置。然后，我还可以使该行可聚焦，然后该行上的位图/按钮可单独聚焦（例如您的星形）。单击该行调用一项操作，单击星号调用另一项操作。

但是，我会注意到，在我的应用程序中，性能不是问题，因为我只有 10-20 行。此外，我确实必须修改我的代码以匹配您的示例，因此请考虑此代码仅经过轻微测试。但是，我确实将它构建到了一个应用程序中，因此只要我的假设和您的描述有效，它应该可以正常运行。

## 执行

首先，我不清楚您`ListRander`是什么（您没有显示该代码）。但是，在我的代码中，我需要一个数据类来包含有关**一行**的详细信息。看起来这就是你使用的方式`ListRander`，所以这就是我使用的方式：

```
public class ListRander {

   private String _title;
   private Bitmap _thumb;

   public ListRander(String title, Bitmap thumb) {
      _title = title;
      _thumb = thumb;
   }

   public String getTitle() {
      return _title;
   }
   public Bitmap getThumb() {
      return _thumb;
   }
} 
```

然后，我`CustomListField`用我自己的替换了你的类：

```
public class CustomListField extends Manager implements FocusChangeListener {

   private int _MAX_ROW_HEIGHT = 60; 
   private boolean _searchable = false;
   private Vector _listData; 
   private FieldChangeListener _fieldListener;

   public CustomListField(Vector data) {
      super(FOCUSABLE | VERTICAL_SCROLL | VERTICAL_SCROLLBAR);
      setSearchable(true);
      setEditable(false);
      setListData(data);
   }

   public void setChangeListener(FieldChangeListener listener) {
      // we need to save this listener, because we set it to listen to all new rows
      _fieldListener = listener;
      int numFields = getFieldCount();
      for (int f = 0; f < numFields; f++) {
         getField(f).setChangeListener(listener);
      }
      super.setChangeListener(listener);
   }

   public int getRowHeight() {
      return _MAX_ROW_HEIGHT;
   }

   public void setSearchable(boolean searchable) {
      _searchable = searchable;
   }

   public int getSelectedIndex() {
      return getFieldWithFocusIndex();  // TODO??
   }

   public Object get(int index) {
      return _listData.elementAt(index);
   }

   public int indexOfList(String prefix, int start) {
      if (start >= _listData.size() || !_searchable) {
         return -1;
      } else {
         int result = getSelectedIndex();  // the default result if we find no matches
         for (Enumeration e = _listData.elements(); e.hasMoreElements(); ) {
            String rowString = (String) e.nextElement(); 
            if (rowString.startsWith(prefix)) { 
               return _listData.indexOf(rowString); 
            } 
         }
         return result;
      }
   }

   protected boolean navigationClick(int status, int time) {
      CustomListRow focus = (CustomListRow) getFieldWithFocus();
      if (focus != null) {
         // see if the row wants to process this click
         if (!focus.navigationClick(status, time)) {
            // let our FieldChangeListener know that this row has been clicked
            fieldChangeNotify(getFieldWithFocusIndex());
         }
         return true;
      } else {
         return false;
      }
   }

   protected void sublayout(int width, int height) {
      int w = Math.min(width, getPreferredWidth());
      int h = Math.min(height, getPreferredHeight());
      int rowHeight = getRowHeight();
      int numRows = getFieldCount();

      setExtent(w, h);
      setVirtualExtent(w, rowHeight * numRows);

      for (int i = 0; i < numRows; i++) {
         Field f = getField(i);
         setPositionChild(f, 0, rowHeight * i);
         layoutChild(f, w, rowHeight);
      }
   }

   public int getPreferredWidth() {
      return Display.getWidth();
   }

   public int getPreferredHeight() {
      return Display.getHeight();
   }

   public void setListData(Vector listData) {
      _listData = listData;
      if (listData != null) {
         int listSize = listData.size();
         int numRows = getFieldCount();
         for (int s = 0; s < listSize; s++) {
            if (s < numRows) {
               // we can reuse existing CustomListRows
               CustomListRow row = (CustomListRow) getField(s);               
               row.setData((ListRander) listData.elementAt(s));
            } else {
               CustomListRow row = new CustomListRow((ListRander) listData.elementAt(s));
               row.setChangeListener(_fieldListener);
               row.setFocusListener(this);
               add(row);
            }
         }

         if (listSize < numRows) {
            // delete the excess rows
            deleteRange(listSize, numRows - listSize);
         }
      } else {
         deleteAll();
      }
      invalidate();
   }

   public void focusChanged(Field field, int eventType) {
      // we handle scrolling here, when focus changes between rows
      if (eventType == FOCUS_GAINED) {
         if (field.getTop() < getVerticalScroll()) {
            // field is off the top of the screen, so scroll up
            setVerticalScroll(field.getTop());
         } else if (field.getTop() >= getVerticalScroll() + getVisibleHeight()) {
            // field is off the bottom of the screen, so scroll down
            setVerticalScroll(field.getTop() - getVisibleHeight() + getRowHeight());
         }          
      }
   }
} 
```

`CustomListRow`最后，我的班级代表了一行：

```
public class CustomListRow extends Manager implements FieldChangeListener {

   private static final int _MAX_ROW_HEIGHT = 60;   
   private ListRander _data;
   private BitmapField _thumb;
   private LabelField _title;
   private FocusableBitmapField _star;
   private static final Bitmap _starImg = Bitmap.getBitmapResource("star.png");
   private static final Bitmap _bgImg = Bitmap.getBitmapResource("listing_bg.png");
   private SeparatorField _separator;
   private int _fontColor = Color.BLACK;
   private boolean _highlighted = false;
   private int _width;

   // subclass exists to expose focus methods (make public)
   private class FocusableBitmapField extends BitmapField {
      public FocusableBitmapField() {
         super(_starImg, BitmapField.FOCUSABLE | BitmapField.EDITABLE);    
      }
      public void onFocus(int direction) {
         super.onFocus(direction);
      }
      public void onUnfocus() {
         super.onUnfocus();
      }
   }

   public CustomListRow(ListRander data) {
      super(Field.FOCUSABLE | Manager.NO_VERTICAL_SCROLL | Manager.NO_VERTICAL_SCROLLBAR);

      setBackground(BackgroundFactory.createBitmapBackground(_bgImg));
      _width = Display.getWidth();

      long labelStyle = (DrawStyle.LEFT | DrawStyle.TOP | DrawStyle.ELLIPSIS);
      _title = new LabelField("", labelStyle) {   // custom anonymous class to change font color
         protected void paint(Graphics g) {
            int c = g.getColor();
            g.setColor(_fontColor);
            super.paint(g);
            g.setColor(c);
         }
      };
      _title.setFont(Font.getDefault().getFontFamily().getFont(Font.PLAIN, 24));

      _thumb = new BitmapField();

      _star = new FocusableBitmapField();
      _star.setChangeListener(this);

      _separator = new SeparatorField() {  // custom anonymous class to change separator color
         protected void paint(Graphics g) {
            int c = g.getColor();
            g.setColor(Color.GRAY);
            super.paint(g);
            g.setColor(c);
         }
      };

      setData(data);

      add(_thumb);
      add(_title);
      add(_star);
      add(_separator);
   }

   public ListRander getData() {
      return _data;
   }

   public void setData(ListRander value) {
      if (value != _data) {
         _data = value;

         _title.setText(value.getTitle());
         _thumb.setBitmap(value.getThumb());
      }
   }

   private void onStarClicked() {
      Dialog.alert("Star has been clicked or tapped!");
   }

   private void onRowClicked() {
      Dialog.alert("Row has been clicked or tapped!");
   }

   public void fieldChanged(Field field, int context) {
      if (field == _star) {
         onStarClicked();
      }
   }  

   public boolean navigationClick(int status, int time) {
      if (_star.isFocus()) {
         onStarClicked();
         return true;
      } /* else {
            onRowClicked();
            return true;
        } */
      return false;  // we will not consume this event
   }

   protected void highlight(boolean onRow) {
      _fontColor = onRow ? Color.WHITE : Color.BLACK;  // change font color for contrast
      _highlighted = onRow;         
      invalidate();
   }

   protected void onFocus(int direction) {
      // called when focus first transfers to this row, from another Field
      if (direction == 1) {
         // coming from top to bottom, we highlight the row first, not the star  
         highlight(true);
      } else if (direction == -1) {
         // coming from bottom to top, we highlight the star button first, not the row
         _star.onFocus(direction);
         highlight(false);
      }
   }  

   protected void onUnfocus() {
      // remove highlighting of the row, if any
      highlight(false);
      super.onUnfocus();
   }

   protected int moveFocus(int amount, int status, int time) {
      // called when this row already has focus (either on row, or star button)
      if (amount > 0) {
         // moving top to bottom
         if (!_star.isFocus()) {
            // we were on the row, now move to the star button
            _star.onFocus(1);
            highlight(false);
            amount--;             // consume one unit of movement
         }
      } else {
         // moving from bottom to top
         if (_star.isFocus()) {
            // we were on the star button, now move back over to the row
            _star.onUnfocus();
            highlight(true);
            amount++;             // consume one unit of movement
         }
      }
      return amount;
   }

   protected boolean touchEvent(net.rim.device.api.ui.TouchEvent event) {
      // We take action when the user completes a click (a.k.a. unclick)
      int eventCode = event.getEvent();
      if ((eventCode == TouchEvent.UNCLICK) || (eventCode == TouchEvent.DOWN)) {
         // Get the touch location, within this Manager
         int x = event.getX(1);
         int y = event.getY(1);

         if ((x >= 0) && (y >= 0) && (x < _width) && (y < _MAX_ROW_HEIGHT)) {
            int field = getFieldAtLocation(x, y);
            if ((field >= 0) && (getField(field) == _star)) {
               // Let event propagate to (star) button field
               return super.touchEvent(event);
            } else {
               if (eventCode == TouchEvent.UNCLICK) {
                  // A completed click anywhere else in this row should popup details for this selection
                  fieldChangeNotify(1);
                  onRowClicked();
               } else {
                  // This is just a soft touch (TouchEvent.DOWN), without full click
                  setFocus();
               }
               // Consume the event
               return true;
            }
         }
      }
      // Event wasn't for us, let superclass handle in default manner
      return super.touchEvent(event);
   }

   protected void sublayout(int width, int height) {
      height = Math.min(getPreferredHeight(), height);
      setExtent(_width, height);

      final int margin = 5;

      int thumbWidth = _thumb.getPreferredWidth();
      layoutChild(_thumb, thumbWidth, _thumb.getPreferredHeight());
      setPositionChild(_thumb, margin, margin);

      int starWidth = _star.getPreferredWidth();
      int starHeight = _star.getPreferredHeight();
      layoutChild(_star, starWidth, starHeight);
      setPositionChild(_star, width - starWidth - margin, (height - starHeight) / 2);

      // this assumes you want margin between all fields, and edges
      layoutChild(_title, width - thumbWidth - starWidth - 4 * margin, _title.getPreferredHeight());
      setPositionChild(_title, margin + thumbWidth /* + margin */, margin);  // TODO?
   }    

   protected void paintBackground(Graphics g) {
      super.paintBackground(g);
      if (_highlighted) {
         // you can't override drawFocus() for a Manager, so we'll handle that here:
         int oldColor = g.getColor();
         int oldAlpha = g.getGlobalAlpha();
         XYRect rect = new XYRect();
         g.setGlobalAlpha(150); 
         g.setColor(Color.BLUE); 
         getFocusRect(rect); 
         drawHighlightRegion(g, HIGHLIGHT_FOCUS, true, rect.x, rect.y, rect.width, rect.height);
         g.setGlobalAlpha(oldAlpha);
         g.setColor(oldColor);
      }
   }

   public int getPreferredWidth() {
      return _width;
   }

   public int getPreferredHeight() {
      return _MAX_ROW_HEIGHT;
   }
} 
```

## 用法

这是您可以使用整个列表字段的方式（可能在一个`Screen`类中）：

```
public class ListScreen extends MainScreen implements FieldChangeListener {
   public ListScreen() {
      try {
         Vector data = new Vector();
         Bitmap icon = Bitmap.getBitmapResource("list_icon.png");
         for (int i = 0; i < 15; i++) {
            ListRander lr = new ListRander("Product Name " + i, icon);
            data.addElement(lr);
         }
         CustomListField list = new CustomListField(data);
         add(list);
         list.setChangeListener(this);
      } catch (Exception e) {
         e.printStackTrace();
      }
   }

   public void fieldChanged(Field field, int context) {
      if (field instanceof CustomListRow) {
         CustomListRow row = (CustomListRow) field;
         Dialog.alert(row.getData().getTitle() + " was selected!");
      }      
   }    
} 
```

`CustomListRow`在我的应用程序中，它本身处理相当于您的星号点击是有意义的。但是，对我来说，以这种方式处理**行**点击是**没有**意义的。So, I let you set a on the itself, which is called back when any row is selected. 在我的屏幕类中查看上面的示例。如果您也想处理类*内*的行单击，那也没关系。我在那里制定了一个方法。在代码中搜索注释掉的位置，您可以重新激活实现该方法 ( )。**`FieldChangeListener``CustomListField`*`CustomListRow``onRowClicked()``onRowClicked()`***

 ***## 问题

*   我的应用不需要列表搜索。我列出了一个示例实现，就像`ListField`有一样。但是，我没有测试它。这是你的工作，如果你需要的话。我刚刚让您开始`CustomListField`实施（请参阅 参考资料`indexOfList()`）。
*   我没有看到你的“导航栏”是干什么用的。栏通常是全角项目，如状态栏或工具栏。我在你的截图中没有看到类似的东西。导航*项*可能是每行右侧的一个小箭头，用于显示详细信息。但是，我也没有在您的屏幕截图中看到这一点。所以，我忽略了那个代码。如果您需要导航栏，您显然知道它应该是什么，并且可以将其添加到我上面的代码中。
*   我不知道您是否只是将星号添加为行背景图像的一部分，或者您是否有单独的图像。我添加了一个单独的**star.png**来表示星星。我会假设单击星号会填充它，或者突出显示它，或者其他什么。但是，你没有描述那个问题，所以我认为你可以处理这个问题。如果您需要一个自定义字段来表示星星，可以*选择*和*未选择*的图像，只需将其作为新问题发布。
*   您有一些代码看起来像是试图将行宽设置为行高的 3 倍，但这与您的屏幕截图不匹配。无论如何，大多数列表都是全屏宽度。因此，我删除了该代码。我的`CustomListRow`班级实现`getPreferredWidth()`并请求全屏宽度。喜欢就换吧。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-14T18:53:40.687

与 Android 不同`ListView`，BB 的`ListField`设计不是为了在列表项**内具有可聚焦/可点击的字段。**因此，任何解决此问题的尝试都会产生一些负面影响。

一个相对简单/快速的解决方法是切换到`VerticalFieldManager`（检查[这个其他堆栈溢出问题](https://stackoverflow.com/a/6583165/247013)）。但是，如果列表太长（我相信超过数百个），您可能会“吃掉”太多内存。

如果该应用程序仅适用于触摸屏，那么您可以尝试使用`ListField`+ 手动跟踪触摸事件坐标。因此，当您检测到列表字段单击（以您通常会这样做的方式）时，您可以检查触摸坐标是否对应于星形图像区域（至少在 X 轴上）。我不会发明/提供一个实现，而只是给出一个想法。***

# iphone - 保存从 url 加载的图像到 iphone

> ID：11483130
> 
> 赞同：0
> 
> 时间：2012-07-14T10:49:30.343
> 
> 标签：iphone, ios, nsurlconnection

我已经`UITableView`从 URL 加载了图像。现在如何将这些图像保存在我的**iPhone**中。

下载图像时，使用适当的命名约定创建它的缩略图并保存。

请为此保存图像提供一些提示或方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:32:05.753

```
NSURL *url = [[NSURL alloc] initWithString:@"http://image.com"];
NSData *data = [NSData dataWithContentsOfURL:url];
UIImage *image = [[UIImage alloc] initWithData:data];
UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil); 
```

有关**UIImageWriteToSavedPhotosAlbum 的**更多信息，您可以在[此处找到](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:52:32.213

```
// data is the NSData you obtained
// from the NSURLConnection

UIImage* image = [[UIImage alloc] initWithData:data];

// path is an NSString containing the path
// to save the file, usually inside Documents, Cache, etc,

[image writeToFile:path]; 
```

*阅读 Apple 的文档，了解如何获取相关目录的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T11:07:49.953

这是从图像的 weburl 下载图像并将其保存在应用程序中的代码。

```
NSURLRequest *request = [NSURLRequest requestWithURL:imageURL];
 [NSURLConnection connectionWithRequest:request delegate:self];

 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
 NSString *documentsDirectory = [paths objectAtIndex:0];
 NSString *localFilePath = [documentsDirectory stringByAppendingPathComponent:@"image.jpg"];
 NSData *thedata = [NSData dataWithContentsOfURL:imageURL];
 [thedata writeToFile:localFilePath atomically:YES]; 
```

# node.js - 如何在 Node.js 中返回没有回调函数的值？

> ID：11483132
> 
> 赞同：0
> 
> 时间：2012-07-14T10:50:12.133
> 
> 标签：node.js

我做了一些 i/o 函数，比如加载 yaml 配置文件，回调函数将返回 yaml 的 JSON 格式。没有回调的可能返回值如下？

```
var u=require('./my_util');
var oData=u.yaml2json('path/to/yaml'); 
```

## my_util.js

```
module.exports={
    yaml2json : function(path, callback){
    env = process.env.NODE_ENV || 'development';
    var fs    = require('fs'),
        yaml  = require('js-yaml');

    data=fs.readFileSync(path);
    try {
      yaml.loadAll(data, function (doc) {
        callback(null, doc[env]);
      });
    } catch(e) {
      console.log(e);
    }
  }
}; 
```

## 回调用法

```
var u=require('./my_util');
u.yaml2json('path/to/yaml', function(err, oData){
  // do something
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T10:58:33.843

[从js-yaml github 页面](https://github.com/nodeca/js-yaml#readme)尝试以下示例...

```
var yaml = require('js-yaml');

// pass the string
fs.readFile('/home/ixti/example.yml', 'utf8', function (err, data) {
  if (err) {
    // handle error
    return;
  }
  try {
    console.log( yaml.load(data) );
  } catch(e) {
    console.log(e);
  }
}); 
```

你可以把它改成...

```
var yaml = require('js-yaml');

// pass the string
var data = fs.readFileSync('/home/ixti/example.yml');
try {
  console.log( yaml.load(data) );
} catch(e) {
  console.log(e);
} 
```

PS。自己没有测试过。

# symfony-2.1 - 可以从 Symfony >= 2.0 的视图中访问供应商文件吗？

> ID：11483137
> 
> 赞同：2
> 
> 时间：2012-07-14T10:50:51.713
> 
> 标签：symfony-2.1

我在 Symfony 2.1 中作为供应商安装了 Twitter Bootstrap 框架，使用 composer 包管理器作为来自 github repo 的包。我的意图是直接在*::base.html.twig*布局中“包含”该供应商的一些文件，而不必创建一个 Bundle 来处理这个问题。

如何从视图中访问供应商的文件，例如*“vendor/twitter/bootstrap” ？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T17:35:17.347

哦，对不起，我在谷歌上搜索时发现了自己的问题。我在提交 xD 时尝试发布此问题的那天丢失了表单的内容，并认为它没有发布，今天，让 LOL 感到惊讶。

Ty 对于所有答案，幸运的是我自己找到了解决方案。如果我的经验可以帮助任何人...因为 2.1 版本可以从 github 获取 twitter 引导程序包并使用 composer.phar 作为供应商安装它

在项目根目录的 composer.json 文件中，将其添加到 "require": {} 部分：

```
"twitter/bootstrap": "dev-master", 
```

然后在“存储库”：{} 部分添加：

```
 {
        "type": "package",
        "package": {
            "version": "master",
            "name": "twitter/bootstrap",
            "source": {
                "url": "https://github.com/twitter/bootstrap.git",
                "type": "git",
                "reference": "master"
            },
            "dist": {
                "url": "https://github.com/twitter/bootstrap/zipball/master",
                "type": "zip"
             }
        }
    }, 
```

然后使用 node.js for windows 安装你可以执行：

```
npm install -g less jshint recess uglify-js 
```

和

```
make 
```

要再次编译包含已编译库的 docs 子文件夹或...

```
make bootstrap 
```

这也在引导子文件夹中编译 css、js、缩小版本

然后，可以通过这种方式调用和使用引导程序：

```
{% stylesheets '../vendor/twitter/bootstrap/bootstrap/css/bootstrap.min.css' %}
    <link rel="stylesheet" href="{{ asset_url }}" />
{% endstylesheets %}

{% javascripts '../vendor/twitter/bootstrap/bootstrap/js/bootstrap.min.js' %}
    <script src="{{ asset_url }}" type="text/javascript"></script>
{% endjavascripts %} 
```

**这种方法的优点**是可以通过简单地使用来更新供应商的版本：

```
cd /path/to/symfony/root/dir
php composer.phar update Twitter/Bootstrap 
```

并再次编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:46:22.820

您可以使用assetics css rewrite 来完成您的要求：

```
{% stylesheets filter='cssrewrite' output='css/frontend.css'
   '%kernel.root_dir%/../vendor/path/to/stylesheet.css'
%} 
```

[**编辑：请参阅此处了解最近关于**[该主题](https://groups.google.com/forum/?fromgroups#!topic/symfony2/lY627yx_ncc)的 googlegroups 讨论]

# restructuredtext - rst2latex 中的 bibtex 引用

> ID：11483138
> 
> 赞同：9
> 
> 时间：2012-07-14T10:51:01.230
> 
> 标签：restructuredtext

Usind **rst2latex**，哪个命令允许我包含引用 bibtex 数据库的引用键？在乳胶中，我会用 \cite{Rumpelstielzchen2003} 实现这一点

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-15T01:05:24.630

我找到的解决方案是将乳胶内联到第一个文档中：

```
.. role:: raw-tex(raw)
    :format: latex html

Introduction
============
A profit maximizing agent in an environment with a finite number of buyers
following :raw-tex:`\cite{Kutschinski2003}` investigates price setting by 
reinforcement learning agent.

# at the end of the document
.. raw:: latex

    \bibliographystyle{plain}
    \bibliography{/home/path/library} 
```

正文开头的角色定义可以让我们把纯latex inline。使用 :raw-tex:`\cite{Kutschinski2003}`我们从 bibtex 文件中索引一个乳胶参考。在文档的末尾，我们放置了一个原始的乳胶段落，以 .. raw:latex 开头，它引用了 library.bib 文件。（由 bibtex 或 mendeley 创建）第一个文件可以编译：

```
rst2latex paper.rst > build/paper.tex && cd build/ && latex paper.tex && bibtex paper.aux && latex paper.tex && pdflatex paper.tex && evince paper.pdf & cd .. 
```

或者使用以下编译命令创建一个 paper.sh 文件：

```
rst2latex paper.rst > build/paper.tex 
cd build/
latex paper.tex
bibtex paper.aux
latex paper.tex
pdflatex paper.tex
evince paper.pdf
cd .. 
```

（如果乳胶导致图片出现问题，请用 pdflatex 替换它）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-08T14:44:26.620

另一种方法（虽然也是 LaTeX 特定的）是使它在编辑时更好。

```
.. role:: cite

.. raw:: latex

   \providecommand*\DUrolecite[1]{\cite{#1}} 
```

这样你就可以使用

```
:cite:`key` 
```

并且在您的文档末尾：

```
.. raw:: latex

   \bibliographystyle{plain}
   \bibliography{/home/path/library} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-06T00:56:12.077

有一个名为[bib2reSTcitation](https://github.com/cykustcc/bib2reSTcitation)的非常方便的工具，可以将 bibtex 样式引用文件转换为 reStructuredText Markup 样式引用样式。

赶紧跑：

```
$ python bib2reSTcitation.py -i tex.bib -o references.txt 
```

你得到你想要的。希望能帮助到你！

# android - 从 joomla 2.5 网站获取 JSON

> ID：11483140
> 
> 赞同：2
> 
> 时间：2012-07-14T10:51:01.403
> 
> 标签：android, json, mobile, web, joomla2.5

我有一个 Joomla 目录网站，现在我需要基于该网站构建一个移动应用程序。是否有可能从我的网站获取 JSON，我应该怎么做以及如何做到这一点？如果有人知道请帮助我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T10:56:10.060

这正是您所需要的

[http://docs.joomla.org/Generating_JSON_output](http://docs.joomla.org/Generating_JSON_output)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:55:29.500

愿这对您有所帮助：

您可以使用 JSON 和解析从 Web 服务获取值。只要参考[这个](http://mobile.dzone.com/news/android-tutorial-how-parse)

# terminal - 无法更改 pty/N 上的终端大小（适用于 ttyN）

> ID：11483141
> 
> 赞同：5
> 
> 时间：2012-07-14T10:51:02.773
> 
> 标签：terminal, ioctl, tty, pty

我使用下一个来更改终端大小：
`rc = ioctl(fd, TIOCSWINSZ, &ws);`
当我在 linux 文本终端下运行它时（通过 Alt-Ctrl-F1 切换），结果是我希望看到的。在 ioctl 系统调用给定的范围内我的整个输入和输出。
但是当我通过 SSH 连接到 localhost 并运行相同的程序时，它只能部分工作。我的意思是我不能输入比 ioctl 设置的终端大小更宽的命令，但是输出可以跨越 ioctl 给定的终端边界，并且输入可以占用 ioctl 设置的更多行。之后也没有自动回车和换行。
我直接运行程序时看到的唯一区别是它在终端/dev/ttyN上运行，它的主编号是5，当我通过SSH运行程序时，它使用/dev/pts/N作为终端，主编号为136 .所以，据我了解，这是由于终端的差异而发生的。
我的问题：
1\. 这是正确的吗？是终端驱动的原因吗？
2\. 我该如何解决？我需要通过 SSH 进行相同的行为，就像在本地 tty 终端中一样。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T10:59:47.747

通常`TIOCSWINSZ`由 tty 主机（例如`xterm`，Linux 控制台本身等）用来告诉内核驱动程序终端实际有多大。tty slave上运行的程序（即应用程序本身）`TIOCGWINSZ`用来查询终端的大小。大多数 tty 驱动程序不支持以其他方式推送它；您通常不能`TIOCSWINSZ`从应用程序调用 tty 从属设备并让主设备更改其大小。

某些终端，例如`xterm`确实支持转义序列以请求它们调整大小，但这只是一个字节转义序列，而不是`ioctl()`命令。

如果您希望应用程序强制终端的大小，那么便携式没有办法做到这一点。不可移植的是，您可以应用一些特殊技巧，例如尝试`TIOCSWINSZ`或发送`xterm`转义序列。

# php - php日期转换mysql

> ID：11483142
> 
> 赞同：0
> 
> 时间：2012-07-14T10:51:07.640
> 
> 标签：php, mysql, date, jquery-ui, datetime

> **可能重复：**
> [管理 PHP 和 MySQL 之间的日期格式差异](https://stackoverflow.com/questions/415092/managing-date-formats-differences-between-php-and-mysql)

我正在使用 jQuery ui 日期选择器

并用以下格式初始化

```
$("#task_date").datepicker({dateFormat : "m/d/y",
            showOn: "button",
            buttonImage: "<?= base_url(); ?>assets/img/calendar.png",
            buttonImageOnly: true
        }); 
```

所以日期格式是`"m/d/y"`，我怎样才能将它转换为mysql日期格式？

我还需要从 mysql 日期格式转换为`"m/d/y"`...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T10:54:04.070

更改`dateFormat : "m/d/y"`为

```
dateFormat : "yy-mm-dd"    //Which is same as PHP's 'Y-m-d' or '2012-07-14' 
```

而且，要转换为`m/d/y`格式（在 jQuery 中），您需要执行以下操作：

```
var date = $('#task_date').datepicker({ dateFormat: 'dd-mm-yy' }).val(); 
```

日期转换（在[jQuery](http://docs.jquery.com/UI/Datepicker/formatDate)和[PHP](http://php.net/manual/en/function.date.php)中）

# c# - C# 在具有不同行长的两个文本框上同步垂直滚动条（VS2010，.Net Framework 4）

> ID：11483143
> 
> 赞同：1
> 
> 时间：2012-07-14T10:51:09.670
> 
> 标签：c#, textbox, controls

我正在使用以下代码片段作为概念证明来同步两个相邻文本框的滚动条，但我得到了相当奇怪的“StackOverFlow”异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T11:04:50.857

在我的手机上，所以现在无法测试你的代码，也没有真正遵循它，但是 StackOverflowException 让我猜想当你的一个滚动条移动时，另一个被代码移动，触发一个事件来移动第一个再次触发一个事件以再次移动第二个事件，依此类推，直到堆栈溢出...

# android-video-player - 开发视频播放器应用程序

> ID：11483147
> 
> 赞同：0
> 
> 时间：2012-07-14T10:51:32.210
> 
> 标签：android-video-player

我想在 android 平台上构建一个视频播放器，这实际上是为了电子学习目的，因此这里的视频保护和盗版是主要问题。视频播放器将连接到拥有所有视频的服务器，并且只有在订阅视频时，用户才能下载视频。但现在我还需要保护视频不被共享。所以我的想法是从我的应用程序中创建一个隐藏的密码保护文件夹，该文件夹仅包含下载的视频，这样即使有人访问该文件夹也无法获取其中的视频，从而减少盗版。这里密码不可用给用户也是因为该文件只能在我的具有解密代码的媒体播放器上播放。没有其他播放器可以播放该文件。我的主要疑问是你认为这个想法是否可行？实际上我是 Android 开发的新手，所以如果你能指导我如何做到这一点？我打算同时使用媒体播放器类或 VideoView 类吗？你建议什么对这个应用程序更好？是否可以在没有互联网连接的情况下停止安装任何应用程序，即使用户拥有 .apk 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T10:55:09.897

与其将视频与您的应用程序捆绑在一起，不如将所有媒体托管在远程服务器上？然后，用户可以在身份验证后从那里下载/流式传输。

# jquery - jQuery autocomple 和 knockoutjs 可观察数组

> ID：11483151
> 
> 赞同：2
> 
> 时间：2012-07-14T10:51:50.013
> 
> 标签：jquery, asp.net-mvc-3, autocomplete, knockout.js

当我使用 jquery 自动完成功能并选择一些可能的值时，尝试更新 knockoutjs 生成的列表。但是当我在 Select 方法中调用 addItem 函数时，列表不会更新。预期的行为是将选定的项目值添加到 knockoutjs 项目数组。

MVC3 示例视图：

```
<input type="text" id="Name"/>

<h4>Items</h4>
<ul data-bind="foreach: items">
    <li>
        <span data-bind="text: $index"></span>:
        <span data-bind="text: name"></span>
        <span data-bind="text: code"></span>
        <a href="#" data-bind="click: $parent.removeItem">Remove</a>
    </li>
</ul>

<script type="text/javascript">
    $(function () {
        var appViewModel = new AppViewModel();
        function AppViewModel() {
            var self = this;

            self.items = ko.observableArray([]);

            self.addItem = function (name, code) {
                self.items.push({ name: name, code: code });
            };

            self.removeItem = function () {
                self.items.remove(this);
            };
        }

        $('#Name').autocomplete({
            minLength: 1,
            delay: 500,
            source: function (request, response) {
                $.ajax({
                    type: "POST",
                    url: "/Home/SearchItems",
                    dataType: "json",
                    data: { searchText: request.term },
                    success: function (data) {
                        if (data != undefined) {
                            response($.map(data, function (item) {
                                return {
                                    label: item.Name,
                                    value: item.Name,
                                    code: item.Code
                                };
                            }));
                        }
                    }
                });
            },
            select: function (event, ui) {
                appViewModel.addItem(ui.item.value, ui.item.code);
            }
        });

        ko.applyBindings(new AppViewModel());
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:31:09.767

这是一个工作版本：http: [//jsfiddle.net/jearles/vya7V/](http://jsfiddle.net/jearles/vya7V/)

您的问题是您在`ko.applyBindings`语句中实例化了一个新的 AppViewModel，而不是传入`appViewModel`您之前实例化并在`select`.

# java - 如何推广上下文类？

> ID：11483152
> 
> 赞同：1
> 
> 时间：2012-07-14T10:51:52.260
> 
> 标签：java, oop, design-patterns

我正在创建某种过滤系统，它基于不同元素接受/产生相同类型的“上下文”。

例如，可以对过程进行建模：

```
{generate_numbers(1..100)} --> {is_prime} --> {输出}
```

上下文可以是一个简单的“HashMap”。`generate_numbers`创建将“x”设置为某个数字的`is_prime`上下文，使用此上下文，查找“x”并相应地放置“prime”=true/false。

优点：

*   灵活性（易于扩展（HashMap））

缺点：

*   无类型值被强制转换

* * *

将所有内容声明为“上下文”中的字段也是一种可行的方法，但是这样会牺牲易于扩展性（我可以忍受）

* * *

但是......情况有点复杂，因为这些转换器元素分散在应用程序的包中：

```
{generate_numbers(1..100)} --> {is_prime} --> {calc(f_1)} --> {输出}
```

```
{--------------- pkg_A ------} | {--------- pkg_B --------}
```

所以有些部分 pkg_A 做了一些工作，然后有些部分 pkg_B 部分处理上下文 --> 这就是为什么我想混合这两种方法

* * *

我提出了以下想法：

### 选项1

*   假设我已将包含上下文 E 的基本 HashMap 命名为
*   创建 E 的子类，其中一些条目出现在 getter/setter 可用的字段中
*   在每个处理函数中将传入的参数转换为所需的类类型

亲：

*   相对容易实现

缺点：

*   应该与字段同步 HashMap 内容
*   访问值的方法不止一种可能会导致混淆

### 选项 2

*   创建一些进行铸造的“工具”类

亲：

*   每个函数都没有子类的运行时强制转换

缺点：

*   访问总是转换为 HashMap 访问
*   每次读取一个字段时都会进行一次强制转换

### 选项 3

我完全错了，我应该以不同的方式解决问题

更新：

与“如何促进上下文类？” 我的意思是我怎样才能创建一个相对方便的上下文来承载应用程序正在处理的所有杂乱的东西，因为在当前的工作流程中，这些信息被控制逻辑模糊了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T10:54:28.853

我相信你应该切换到[Scala](http://www.scala-lang.org/) :D。
Scala 是一种具有 OOP 设计的函数式语言，它运行在 Java 虚拟机上，支持您刚才提到的内容，并具有强大的模式匹配引擎。

另一种方法可能涉及在 Java 中模拟函数范式，这实际上是几天前我的想法，但是我有太多的工作并忘记了它：D。

基本上，我回想他们的是你应该有一个界面

```
public interface Functionalizable {
    public void map(Function f);
} 
```

Where`Function`也将是一个接口，您可以扩展它来编写自己的函数。然后，一个这样的例子（可能很糟糕，但这是我在火车上上班时的想法）可能是这样的：

```
public class FunctionList extends ArrayList implements Functionalizable {
    public void map(Function f) {
        // iterate over the elements of a list
        // applying the function f on each of them
    }
} 
```

你可以这样称呼它：

```
List l = new FunctionList();
// add some data
l.map(
    new Function() {
        // some function
    }
) 
```

当然，这些代码实际上都不是可编译的，而只是我一直在考虑的。是的，在 Java 中引入函数式范式是一件痛苦的事，所以再一次，我最好的建议是坚持使用真正的函数式语言，比如 Scala。:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:05:31.970

试图传递元数据会让人头疼。相反，您需要一个[函数式编程](http://en.wikipedia.org/wiki/Functional_programming)解决方案，但特别是您似乎想要处理[列表推导](http://en.wikipedia.org/wiki/List_comprehension)- 在您的示例中是`generate_numbers`函数。虽然您可以通过自己滚动来做到这一点 - 正如@Lopina 建议的那样 - 通过创建一组[函数对象](http://en.wikipedia.org/wiki/Function_object)，我认为更好的路径是使用现有的 Java 库。

特别是 Google [Guava](https://code.google.com/p/guava-libraries/)有许多工具可以以这种方式处理 Java 集合 -[功能习语](https://code.google.com/p/guava-libraries/wiki/FunctionalExplained)就是您想要的。您必须编写自己的函数（在本例中为 Guava [Predicates](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/base/Predicate.html)）才能在 Guava 的框架中使用，但我认为它为您描述的问题提供了正确的工具和抽象级别。[我发现这个问题的答案特别有助于理解谓词](https://stackoverflow.com/questions/2955043/predicate-in-java)。

# 番石榴代码示例

```
import java.util.Arrays;

import com.google.common.base.Predicate;
import com.google.common.collect.*;

public class PrimeFinder {
    static Predicate<Integer> isPrimeToTenThousand = new Predicate<Integer>() {
        private boolean[] primes = new boolean[10000];
        {
            // prime detection algorithm from
            // http://www.mkyong.com/java/how-to-determine-a-prime-number-in-java/
            // will contain true or false values for the first 10,000 integers
            Arrays.fill(primes, true); // assume all integers are prime.
            primes[0] = primes[1] = false; // we know 0 and 1 are not prime.
            for (int i = 2; i < primes.length; i++) {
                // if the number is prime,
                // then go through all its multiples and make their values false.
                if (!primes[i]) continue;
                for (int j = 2; i * j < primes.length; j++)
                    primes[i * j] = false;
            }
        }

        @Override
        public boolean apply(Integer number) {
            return primes[number];
        }
    };

    public static void main(String args[]) {
        ImmutableSortedSet<Integer> positiveIntegersTo100 = Ranges.open(1, 100).asSet(DiscreteDomains.integers());
        Iterable<Integer> primeNumbersTo100 = Iterables.filter(positiveIntegersTo100, isPrimeToTenThousand);
        // output: [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97]
        System.out.println(primeNumbersTo100);
    }
} 
```

最后，this other question及其关于如何[在Java中模拟Python列表推导](https://stackoverflow.com/q/899138/470838)的答案应该会有所帮助。

# python - webpy，如何在表单中额外添加数据？

> ID：11483154
> 
> 赞同：2
> 
> 时间：2012-07-14T10:51:56.940
> 
> 标签：python, forms, web.py

我需要一个从数据库生成的带有“记录”的表格。

对于每条数据库记录，除了表单字段外，还需要包含图像和记录描述，例如

```
<tr> <td> rec 15, <img src=fnamex.jpg>, <input name=inp15> <checkbox name=chk15> </td> </tr> 
```

所以我对创建表单的方式、时间和地点感到困惑：

1.  表单生成方法应该出现在我的“model.py”中吗？在模板中？
2.  如何将“记录”的所有元素保存在一起以便以后在模板中进行迭代？
3.  我应该在哪里添加“额外”数据（例如图像源和标题）？到表单对象？在并行对象列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T02:52:08.227

要将元素添加到 Web.py 表单函数，您可以执行以下操作：

```
 args = ()
    for a in range(0,2):
        args = args + (web.form.Textbox(a), ) # Forces tuple type
    tmp = web.form.Form(*args) 
```

# ios - 通过带有用户位置的 iOS Graph API 将照片上传到自己的墙

> ID：11483157
> 
> 赞同：1
> 
> 时间：2012-07-14T10:52:22.367
> 
> 标签：ios, facebook-graph-api, photo-upload

我需要在用户的 Facebook 墙上发布一张带有用户位置的照片（从相机拍摄）。现在，facebook 照片对象有一个名为[place](https://developers.facebook.com/docs/reference/api/photo/)的字段：

```
object containing id and name of Page associated with this location, and a location field containing geographic information such as latitude, longitude, country, and other fields (fields will vary based on geography and availability of information) 
```

现在我如何获得这个地方，将它与照片一起附加并上传到用户墙。这是我的照片上传代码：

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                       resultImage, @"picture",
                                       location, @"place",
                                       nil];

        [appDelegate.facebook requestWithGraphPath:@"me/photos"
                                         andParams:params
                                     andHttpMethod:@"POST"
                                       andDelegate:self]; 
```

但是，我如何在这里获取位置参数？任何人都可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:57:56.257

[根据本文档](https://developers.facebook.com/docs/reference/api/user/#photos)，地点对象只能是所需位置的 Facebook 页面 ID 。因此，这就是我在上传照片时设法获取用户位置的方法。

```
-(void)fbCheckForPlace:(CLLocation *)location
{
    NSString *centerLocation = [[NSString alloc] initWithFormat:@"%f,%f",
                                location.coordinate.latitude,
                                location.coordinate.longitude];
    NSLog(@"center location is : %@",centerLocation);
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                    @"place",  @"type",
                                    centerLocation, @"center",
                                    @"1000",  @"distance",
                                    nil];
    [centerLocation release];
    [appDelegate.facebook requestWithGraphPath:@"search" andParams:params andDelegate:self];
} 
```

当前位置是通过调用 CLLocation Manager 委托获取的，并在上述方法中传递。

接下来，如果此请求成功，则将地点对象插入可变数组中。

```
NSArray *resultData = [result objectForKey:@"data"];
        for (NSUInteger i=0; i<[resultData count] && i < 5; i++) 
        {
            [self.listOfPlaces addObject:[resultData objectAtIndex:i]];
        } 
```

然后触发照片上传方法：

```
- (void)uploadPhotoWithLocation
{
    NSString *placeId = [[self.listOfPlaces objectAtIndex:0] objectForKey:@"id"];

    params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   self.resultImage, @"picture",
                                   placeId, @"place",
                                   nil];

    [appDelegate.facebook requestWithGraphPath:@"me/photos"
                                     andParams:params
                                 andHttpMethod:@"POST"
                                   andDelegate:self];
} 
```

我已经占据了可用签到的第一个附近位置 ( `[self.listOfPlaces objectAtIndex:0]`)，现在该应用程序可以成功发布用户当前附近位置的照片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T05:44:42.083

FB API 显示 : 'place': 'object 包含与此位置关联的页面的 id 和名称，以及包含地理信息的位置字段，例如纬度、经度、国家和其他字段（字段将根据地理位置和可用性而有所不同）信息）'

1）在iOS 2中启动定位服务）获取当前位置：纬度，经度

使用两个数据经纬度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-26T14:56:18.727

Shabib 上面的答案很好（我没有足够的代表直接发表评论），但是您现在还需要指定“字段”参数，以便对 /search 的图形请求成功完成。我的参数字典如下所示：

```
NSDictionary *params = @{@"type" : @"place",
                        @"center" : centerLocation,
                        @"distance" : @"500",
                        @"fields" : @"id,name"}; 
```

# php - Jquery在php echo中显示隐藏的div

> ID：11483158
> 
> 赞同：0
> 
> 时间：2012-07-14T10:52:24.380
> 
> 标签：php, jquery, css

我在这里挣扎..需要一些帮助！:)

我有一个 PHP，需要在按下提交按钮时在 echo 中运行 jquery .show。任何帮助将不胜感激。

PHP 代码 >

```
<?php
                        $name = $_POST['name'];
                        $email = $_POST['email'];
                        $title = $_POST['title'];
                        $content = $_POST['content'];
                        $from = 'From: Comeone Form'; 
                        $to = 'info@someemail.com'; 
                        $subject = 'Contact Form';
                        $human = $_POST['human'];

                        $body = "From: $name\n E-Mail: $email\n Subject: $title\n Message:\n $content";

                    if ($_POST['submit'] && $human == '4') {                 
                    if (mail ($to, $subject, $body, $from)) { 
                            echo '<p>Your email has been successfully sent!</p>';
                    } else { 
                            echo '<p>Something went wrong, go back and try again!</p>'; 
                            } 
                    } else if ($_POST['submit'] && $human != '4') {
                            echo '<script>
$("submit-mail").click(function () {
$("#mail-message-window").show("slow");
});
</script>';
                            }
                    ?> 
```

表格 >

```
<form method="post" action="#contact-us">
                        <label>Name *</label>
                        <input type="text" name="name" class="rounded" required />
                        <label>E-mail *</label>
                        <input type="email" name="email" class="rounded" required />
                        <label>Subject *</label>
                        <input type="text" name="title" class="rounded" required />
                        <label>Message *</label>
                        <textarea name="content" cols="42" rows="7" class="rounded" required></textarea>
                        <label>What is 2+2? (Anti-spam) *</label>
                        <input type="text" name="human" class="rounded" required />
                        <input id="submit" name="submit" id="submit-mail" type="submit" class="submit-btn rounded" value="SEND">
                    </form> 
```

隐藏的 DIV >

```
<div id="mail-message">
                        <table>
                            <tr>
                                <td>
                                    <div id="mail-message-window">
                                        <div id="mail-message-header"></div>
                                        <p id="mail-failure">Unable to send your email!</p>
                                        <p id="invalid-email">Please enter valid email address!</p>
                                        <p id="empty-field">Please fill out all the fields in order to send us a message.</p>
                                        <p id="mail-success">Your email has been successfully sent to us!</p>
                                        <input type="button" id="mail-message-btn" class="mail-message-btn rounded" value="OK" />
                                    </div>
                                </td>
                            </tr>
                        </table> 
```

CSS >

```
#mail-message
{
    position: fixed;
    top: 0;
    left: 0;
    display: none;
    width: 100%;
    height: 100%;
    z-index: 210;
}
#mail-message
{
    width: 100%;
    height: 100%;
    text-align: center;
}
#mail-message-window
{
    width: 400px;
    padding-bottom: 20px;
    border: solid 0px #ffffff;
    background: #000000 url('../images/bg.png') repeat top left;
    margin: 0 auto;
}
#mail-message-header
{
    width: 400px;
    height: 70px;
}
.mail-message-success
{
    background: transparent url('../images/success.png') no-repeat top left;
}
.mail-message-error
{
    background: transparent url('../images/error.png') no-repeat top left;
}
#mail-message-window p
{
    margin: 0 0 5px 10px;
    text-align: left;
}
#mail-message-window input
{
    margin-top: 10px;
}
#mail-message td
{
    vertical-align: middle;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T10:54:52.113

代替

```
$("#mail-message-window").show("slow"); 
```

你需要

```
$("#mail-message").show("slow"); 
```

因为从`CSS`它看来`display: none;`是设置为`#mail-message`但不是`mail-message-window`。

如果要使用，请`$("#mail-message-window").show("slow");`设置`display:none`为`#mail-message-window`而不是`#mail-message`.

### 笔记

`$(document).ready(function() { ... })`简而言之，您应该使用,`$(function() { .. })`来包装所有 jQuery 代码。

# c - 双重发送/接收问题

> ID：11483159
> 
> 赞同：0
> 
> 时间：2012-07-14T10:52:29.950
> 
> 标签：c, sockets, send, recv

我对发送/接收有问题：如果客户端发送两个字符串，服务器仅在一个接收中接收两个字符串，第二个接收参加来自客户端的第三次发送（我不想发送）。我想发送 2 个字符串并接收 2 个字符串。我能怎么做？

我的代码：客户

```
char login[] = "admin";
char password[] = "admin";

send(sd, login, strlen(login), 0);
send(sd, password, strlen(password), 0); 
```

服务器：

```
bzero(login,MAX);
bzero(password,MAX);

recv(sd_client, login, sizeof(login), 0);
recv(sd_client, password, sizeof(password), 0); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T10:59:59.863

TCP 无法发送/接收字符串。TCP 不能发送/接收超过一个字节的消息。TCP 不能发送/接收超过一个字节的结构。

TCP 传输是字节流。

如果你想传输比一个字节更复杂的东西，你需要一个额外的协议，因此 HTTP、SMTP 等等等等协议。

例如，如果您特别想发送以空值结尾的字符串，则需要缓冲并连接接收到的数据，直到检测到空值 - 那么您就有了“C”风格的字符串，可以继续组装下一个字符串。

Rgds，马丁

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T11:12:42.207

我假设您在服务器端使用两个字符数组作为变量“登录”和“密码”。

在这种情况下，为了创建它们，您必须在其声明中给它们一个固定大小，这个数组的大小是多少？MAX 宏的大小是多少？

在您的客户端中，您使用的是五长度数组，如果 MAX 宏的长度大于 10 字节，那么第一个 recv() 将读取两个发送。

# xml - xml配置文件的eclipse rcp更改图标

> ID：11483161
> 
> 赞同：2
> 
> 时间：2012-07-14T10:52:36.983
> 
> 标签：xml, eclipse, icons, rcp

我构建了一个 Eclipse RCP 应用程序，该应用程序`configuration.xml`在项目的根目录中使用了一些项目配置。我想自定义图标并保留默认的 xml 编辑器。我找到了一篇博客[文章](http://blog.eclipse-tips.com/2008/04/content-type-specific-file-icons.html)，这正是我正在寻找的`property`文件。我提取了它：

```
<extension point="org.eclipse.core.contenttype.contentTypes">
  <content-type base-type="org.eclipse.core.runtime.properties"
    file-extensions="config"
    id="in.cypal.eclipse.myConfig"
    name="My Config File"
    priority="normal">
  </content-type>
</extension>

<extension point="org.eclipse.ui.editors">
  <editor class="org.eclipse.jdt.internal.ui.propertiesfileeditor.PropertiesFileEditor"
    default="false"
    extensions="config"
    icon="icons/sample.gif"
    id="in.cypal.eclipse.editors.myConfigEditor"
    name="My Config Editor">
      <contentTypeBinding contentTypeId="in.cypal.eclipse.myConfig">
      </contentTypeBinding>
  </editor>
</extension> 
```

我想我基本上需要将`class`元素的属性调整为`editor`Eclipse中xml编辑器的实现。我安装了`org.eclipse.wst.xml_ui.feature.feature.group`. 我无法找到正确的实现。请帮忙：）谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T13:35:14.723

我可以解决我的问题，如果有人遇到同样的问题，这是我的解决方案。

```
 <extension
        point="org.eclipse.core.contenttype.contentTypes">
     <content-type
           base-type="org.eclipse.core.runtime.xml"
           file-names="configuration.xml"
           id="org.eclipse.core.runtime.xml.spl"
           name="Software Product Line Configuration"
           priority="normal">
     </content-type>
  </extension>
  <extension
        point="org.eclipse.ui.editors">
     <editor
           class="org.eclipse.wst.xml.ui.internal.tabletree.XMLMultiPageEditorPart"
           default="true"
           icon="icons/configuration.png"
           id="YOUR_ID"
           name="Software Product Line Configuration">
        <contentTypeBinding
              contentTypeId="org.eclipse.core.runtime.xml.spl">
        </contentTypeBinding>
     </editor>
  </extension> 
```

我将包导入`org.eclipse.wst.xml.ui`到我的工作区，并查看了`MANIFEST.MF`文件中的扩展选项卡。扩展点`org.eclipse.ui.editors`只出现了一个。所以我在`class`属性中使用了实现并且它起作用了:)

**编辑**：如果我知道[Eclipse Plugin Spy](http://www.vogella.com/blog/2009/06/22/eclipse-plug-in-spy-eclipse-rcp/)，这会更容易。所以，如果一个特性已经存在，只需使用神奇的快捷方式来找出实现细节:)

# mysql - 存储过程中的case语句

> ID：11483167
> 
> 赞同：1
> 
> 时间：2012-07-14T10:53:29.790
> 
> 标签：mysql, stored-procedures, case-when

我有这个存储过程，它的工作

```
CREATE PROCEDURE myrange()
BEGIN
SET @start = 0;
PREPARE stmt FROM ' SELECT firstname FROM peoples ORDER BY id LIMIT ?,1 INTO @name';
    WHILE @start < 5 DO
        EXECUTE stmt USING @start;
        CASE 
            WHEN @name = 'Ana'
                THEN INSERT INTO mytable (log) VALUES('yes');
            ELSE 
                INSERT INTO mytable (log) VALUES('no');
        END CASE;
        SET @start = @start + 1;
    END WHILE;
END; 
```

但是，如果我从这个过程中删除，这段代码：

```
ELSE 
    INSERT INTO mytable (log) VALUES('no'); 
```

mysqli_error() 返回此错误：**“CASE 语句未找到案例”**。

有人知道，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T12:16:49.890

从[MySQL CASE 语法](http://dev.mysql.com/doc/refman/5.1/en/case-statement.html)

> 如果没有 when_value 或 search_condition 与测试的值匹配，并且 CASE 语句不包含 ELSE 子句，则 CASE 语句错误结果为 Case not found。

您必须涵盖所有选项。

MySQL 手册是一个*很好的*文档。一定要去看看！

# android - Android：设置振动的力量

> ID：11483168
> 
> 赞同：5
> 
> 时间：2012-07-14T10:53:31.897
> 
> 标签：android

我目前正在做一个项目，我想使用位于 Android 手机内部的振动电机。

我想通了，在清单中设置正确的权限并获取振动器的实例：

```
Vibrator v = (Vibrator) game.getSystemService(Context.VIBRATOR_SERVICE); 
```

会让我访问它。据我所知，使其振动的唯一方法是：

> 公共抽象虚空振动（长毫秒）

和

> 公共抽象无效振动（long []模式，int重复）

然而，我想控制振动的力量：

如何控制振动的力量？

**更新：**

不应该通过改变电压（或 PWM 直流）来控制速度吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T11:02:16.643

根据以下内容，我不相信可以控制强度。你能做的是使用短脉冲，这样设备就不会振动得那么快？但我没有亲自测试过。

[http://developer.android.com/reference/android/os/Vibrator.html](http://developer.android.com/reference/android/os/Vibrator.html) 和 [控制安卓手机的振动强度？可能吗？](https://stackoverflow.com/questions/2888043/controlling-vibration-intensity-in-android-phones-is-it-possible?rq=1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-31T14:55:42.227

诚然，API 没有提供直接控制振动强度的方法。但正如您在更新中建议的那样，[PWM](http://en.wikipedia.org/wiki/Pulse-width_modulation)可用于产生各种脉冲宽度的振动模式，从而降低振动电机的平均电压（从而降低振动输出）。

我在[这里](https://stackoverflow.com/questions/20808479/algorithm-for-generating-vibration-patterns-ranging-in-intensity-in-android/20821575#20821575)发布了一个简单的概念验证方法。此方法将根据指定的强度生成模式。该方法的转换不是很线性，所以我发布了一个赏金，希望能得到一些替代建议。当我有更好的算法时会更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T11:05:00.327

[振动器类](http://developer.android.com/reference/android/os/Vibrator.html)不允许这样做，您只能设置模式和持续时间：

```
vibrate(long[] pattern, int repeat)

vibrate(long milliseconds) 
```

强度与硬件“[振动马达](http://www.youtube.com/watch?v=ykpa5r1bWeE)”有关

# c# - 如何在wp7中用手指触摸滑动图像

> ID：11483176
> 
> 赞同：0
> 
> 时间：2012-07-14T10:54:56.543
> 
> 标签：c#, silverlight, windows-phone-7

我正在开发一个带有silverlight应用程序的**windows phone 7**，我想用手指触摸滑动图像，任何人都可以帮助我如何做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:53:49.890

您需要订阅 ManipulationDelta 事件，该事件会向您发送有关触摸事件所做更改的信息。例如：

```
<Image ManipulationDelta="abc_ManipulationDelta" Height="100" Width="100" Name="abc" Source="smiley.jpg" Stretch="Fill"/> 
```

现在，您的事件处理程序应该类似于：

```
 private void abc_ManipulationDelta(object sender, ManipulationDeltaEventArgs e)
        {
            abc.Margin = new Thickness(abc.Margin.Left +e.DeltaManipulation.Translation.X,
                abc.Margin.Top + e.DeltaManipulation.Translation.Y,
                abc.Margin.Right, abc.Margin.Bottom);
        } 
```

`e.DeltaManipulation.Translate`通知我们触摸手势在 X 和 Y 方向上的偏移量。我已经将图像控件的边距更改了该数量。如果存在向下拖动，则 Translate.Y 为 +ve，即上边距增加，向上拖动则相反。您可以使用更复杂的边距更改来产生更好的拖动效果，但这个答案为您提供了有关该技术的基本概念。

# java - 函数调用卡住了，但监视器似乎被释放了，怎么办？

> ID：11483181
> 
> 赞同：1
> 
> 时间：2012-07-14T10:56:02.493
> 
> 标签：java, parallel-processing

我在一个项目中有以下设计

*   多个爬虫
*   找到的图像列表`ImageList`( `Observable`); 这由**线程**进程更新（因此是并行的）
*   两个监听列表（`Downloader`和`ImagesWindow`）的观察者；警告：这些可以被多次通知，因为列表是由线程更新的

我一直想只获取最新的条目，`ImageList`所以我用一个**计数器**实现了它：

```
public class ImageList extends Observable {
    private final ConcurrentMap<Integer, Image> images = new ConcurrentHashMap<Integer, Image>();
    private final AtomicInteger counter = new AtomicInteger(0);

    /* There is some more code within here, but its not that important
       important is that stuff gets added to the list and the list shall
       inform all listeners about the change

       The observers then check which is the newest ID in the list (often +1
       but I guess I will reduce the inform frequency somehow)
       and call (in synchronized method):

       int lastIndex = list.getCurrentLastIndex();
       getImagesFromTo(myNextValue, lastIndex);
       myNextValue = lastIndex + 1;
    */

    public synchronized void addToFinished(Image job) throws InterruptedException {
        int currentCounter = counter.incrementAndGet();

        images.put(currentCounter, job);

        this.setChanged();
        this.notifyObservers();
    }

    public synchronized int getCurrentLastIndex() {
        return counter.get();
    }

    public ArrayList<Image> getImagesFromTo(int starting, int ending) {
        ArrayList<Image> newImages = new ArrayList<Image>();

        Image image;
        for (int i = starting; i <= ending; i++) {
            image = images.get(i);
            if (image != null) {
                newImages.add(image);
            }
        }

        return newImages;
    }
} 
```

观察者（`Downloader`这里）使用这种方法是这样的：

```
@Override
public void update(Observable o, Object arg) {
    System.out.println("Updated downloader");

    if (o instanceof ImageList) {
        ImageList list = (ImageList) o;
        downloadNewImages(list);
    }
}

private synchronized void downloadNewImages(ImageList list) {
    int last = list.getCurrentLastIndex();

    for (Image image : list.getImagesFromTo(readImageFrom, last)) {
        // code gets stuck after this line
        if (filter.isOk(image)) {
            // and before this line
            // [here was a line, but it also fails if I remove it]
        }
    }

    // set the index to the new index
    readImageFrom = last + 1;
} 
```

但是，有时循环会卡住，并且似乎允许对该方法进行第二次调用。然后这就是发生的事情：

*   下载器检索图像 70 到 70
*   下载器检索图像 70 到 71
*   下载器检索图像 70 到 72
*   …</li>
*   下载器检索图像 70 到 n

因此，允许对该方法的第二次调用进入该方法，但计数器`readImageFrom`永远不会更新。

当我删除对循环中其他函数的两个调用时，脚本开始工作。我知道它们没有同步，但是如果“父级”已经同步，它们是否必须同步？

`filter.isOK()`是这样实现的（其他函数只返回 true 或 false；当我`hasRightColor`包含代码时代码失败，我猜是因为计算速度有点慢）：

```
public boolean isOk(Image image) {
    return hasRightDimensions(image) && hasRightColor(image);
} 
```

这怎么可能发生？Eclipse 不会显示任何抛出的异常（这当然会导致方法退出）。

也许还有一种完全不同的方法可以只从多个观察者那里获取列表的最新内容（每个观察者可能会被**通知多次，**因为程序并行运行）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:11:14.617

好的，错误是一些邪恶的**NullPointerException**没有显示给我（谁知道为什么）`filter.isOk()`。

我无法在我的 IDE 中看到它，因为我已从更改`this.image`为 parameter-passing `image`，但忘记`private image`在标题中删除并更改三个函数中最后一个函数的参数。

所以 Eclipse 既没有说任何关于缺失的事情，也没有说`image`关于未使用的`this.image`.

最后。

# android - 在 Android 上可访问蓝牙设备时启动活动的最佳方式

> ID：11483188
> 
> 赞同：0
> 
> 时间：2012-07-14T10:57:08.173
> 
> 标签：android, android-activity, bluetooth

我正在 Android 上编写一个应用程序，它需要在蓝牙设备触手可及时启动一个活动，并在设备遥不可及时再次停止它。它不需要连接到设备，只需将其用作何时开始和停止活动的指示器。最好的方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:42:04.643

在清单中声明[ACL_CONNECTED](http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#ACTION_ACL_CONNECTED)的接收者：

```
<uses-permission android:name="android.permission.BLUETOOTH" />
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <receiver android:name=".YourBroadcastReciver">
        <intent-filter >
            <action android:name="android.bluetooth.device.action.ACL_CONNECTED" />
            <action android:name="android.bluetooth.device.action.ACL_DISCONNECTED" />
        </intent-filter>
    </receiver>
</application> 
```

然后在 YourBroadcastReciver 中执行您需要的操作，但不要显示新活动（这对用户来说会很烦人），最好显示/隐藏一些[状态通知](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)。

# sql-server-2008 - Transact SQL 函数，用于从 ESRI 个人地理数据库 SHAPE 列转换为 OGC 众所周知的文本

> ID：11483189
> 
> 赞同：1
> 
> 时间：2012-07-14T10:57:08.400
> 
> 标签：sql-server-2008, tsql, gis

我的工作需要将多边形 GIS 要素表从 ESRI 个人地理数据库格式迁移到 SQL2008 标准格式。源数据只是在 SQL Server 中使用。问题是将形状列转换为几何。

我为意大利托斯卡纳地区的大约 1000 万个多边形制作并成功使用了这段代码：

```
/****** object:  function [dbo].[shp2wkt] - 12/07/2012 10:02:42 - Leonardo Danza ******/
set ansi_nulls on
go
set quoted_identifier on
go
create function [dbo].[shp2wkt_eng](@shp  varbinary(max))
returns nvarchar(max) 
as
begin
    -- points table

    declare @PA table(N int identity(1,1), N_Part_Rel int, X varchar(16), Y varchar(16), part_number int)
    declare @N integer,                    -- row number
            @N_Part_Rel integer,           -- actual part row number  
            @X float, @X_STR varchar(16),  -- X coord.
            @Y float, @Y_STR varchar(16),  -- Y coord
            @part_number integer           -- part sequential number

    declare @F bigint                                          -- feature length (byte)
    declare @Ftype int                                         -- feature type (5 = polygon)
    Declare @Npoints int, @Nparts int                          -- points number, parts number in the feature
    declare @Xmin float, @Ymin float, @XMax float, @YMax float -- bounding box

    -- gets feature length

    set @F = datalength(@shp)

    -- gets Feature Type, bounding box, parts number, points number

    set @FType   = cast(substring(@shp, 1, 1) as int)       -- 1 byte
    set @Xmin    = dbo.BinToFloatLE(substring(@shp,  5 ,8)) -- 8 byte
    set @Ymin    = dbo.BinToFloatLE(substring(@shp, 13 ,8)) -- 8 byte
    set @XMax    = dbo.BinToFloatLE(substring(@shp, 21 ,8)) -- 8 byte
    set @YMax    = dbo.BinToFloatLE(substring(@shp, 29 ,8)) -- 8 byte
    set @NParts  = cast(substring(@shp, 37, 1) as int) +    -- 4 byte
                   cast(substring(@shp, 38, 1) as int)*256 +    
                   cast(substring(@shp, 39, 1) as int)*65536 +
                   cast(substring(@shp, 40, 1) as int)*16777216 
    set @NPoints = cast(substring(@shp, 41, 1) as int) +    -- 4 byte
                   cast(substring(@shp, 42, 1) as int)*256 +
                   cast(substring(@shp, 43, 1) as int)*65536 +
                   cast(substring(@shp, 44, 1) as int)*16777216 

    -- **********************************************************
    -- from  byte 44 (45) there is a  [Nparts] sequence of  
        -- 4 byte integers (Nparts is the parts number).
    -- Each number is a pointer to the first point of the part.
    -- **********************************************************

    declare @I int            -- points loop counter initialized with @I0
    declare @J int            -- parts loop counter initialized with 45
    declare @I0 int           -- current part first point seq. n. 
    declare @Last_Point int   -- current part last point seq. n.
    declare @Last_Point_0 int -- prev. part last point seq. n.
    declare @Max int          -- next part first point seq. n.
    declare @Jmax int         -- first part first point seq. n.
    declare @Part_Id int      -- part seq. number (from 0)

    set @Part_Id   = 0
    set @I0        = 44 + 4*@NParts 
    set @J         = 45
    set @I         = @I0
    set @Jmax      = 44 + 4*@NParts
    set @Last_Point_0  = 0 

    -- inserts points into @PA table

    while @J < @Jmax                                -- scans all parts
        begin
            if @Nparts=0 or @Part_Id = @NParts - 1  -- gets current part last point seq. n.
                begin
                    set @Last_Point=@NPoints
                end
            else
                begin
                    set @Last_Point = cast(substring(@shp, @J+4, 1) as int) +   
                                cast(substring(@shp, @J+5, 1) as int)*256 + 
                                cast(substring(@shp, @J+6, 1) as int)*65536 +
                                cast(substring(@shp, @J+7, 1) as int)*16777216 
                end

            set @Max = @I0 + 16*(@Last_Point-@Last_Point_0) -- current part points number

            While @I < @Max  -- scans current part points
                begin
                    Set @N_Part_Rel = 1 + (@I - @I0)/16 
                    Set @X = dbo.BinToFloatLE(substring(@shp,    @I + 1, 8))
                    Set @Y = dbo.BinToFloatLE(substring(@shp,8 + @I + 1, 8)) 

                    set @X_STR=cast((cast(@X as decimal(15,8))) as varchar)
                    set @Y_STR=cast((cast(@Y as decimal(15,8))) as varchar)

                    insert into @PA (N_Part_Rel, x, y, part_number)
                    select @N_Part_Rel, @X_STR, @Y_STR, @Part_Id
                    Set @I = @I + 16
                end

            set @I0 = 44 + 4*@NParts + 16*@Last_Point
            set @J  = @J  + 4 
            set @Part_Id = @Part_Id + 1
            set @Last_Point_0 = @Last_Point
        end

    -- create well known text string

    declare @wkt nvarchar(max), @part_number_prev int, @virgola varchar(5)
    set @wkt='MULTIPOLYGON ((('
    set @virgola=''

    declare @punti cursor
    set @punti = cursor local for select * from @PA
    open @punti 
    fetch next from @punti into @n, @n_part_rel, @x_str,@y_str, @part_number
    set @part_number_prev=@part_number

    while @@fetch_status = 0
        begin
            if @part_number_prev<>@part_number  -- make separator string 
                begin
                    set @virgola='), ('         -- virgola is the italian for comma
                    set @part_number_prev=@part_number
                end
            else
                begin
                    set @virgola=', '
                end
            if @n > 1 set @wkt += @virgola      -- no separator for first point
            set @wkt += @x_str + ' ' + @y_str   -- add points coords

            fetch next from @punti into @n, @n_part_rel, @x_str,@y_str, @part_number
        end
    set @wkt+=')))'
    close @punti
    deallocate @punti
    return @wkt
end

/****** Object:  UserDefinedFunction [dbo].[BinToFloatLE]    Script Date: 07/14/2012 12:19:26 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER OFF
GO

CREATE function [dbo].[BinToFloatLE] (
    @IEEE64 binary(8)
)
returns float
as
begin
    /********************************************************************************/
    /* Created By   : Umachandar Jayachandran (UC)                                  */
    /* Created On   : 28 July 2002                                                  */
    /* Description  : This function can be used to convert a 8-byte IEEE 754 format */
    /*                representation of real or double-precision value into it's    */
    /*                equivalent floating point value. This cannot be done directly */
    /*                using CAST in SQL Server. This is an optimized version of the */
    /*                UDF that does not use lookup tables to check for consistency  */
    /*                or the utility bit function "BitsToFloat". This is used by the*/
    /*                "ParseTrcShowStats" SP.                                   */
    /* Modified        : parse binary in little endian order of byte for use in conjuction of ESRI shapefile format
                */ 
    /********************************************************************************/
    /*  Resources  :    http://www.umachandar.com/resources.htm                 */
    /********************************************************************************/

    -- http://www.umachandar.com/technical/SQL2000Scripts/UtilityFns/Main15.htm
    -- IEEE spec:
    -- http://www.psc.edu/general/software/packages/ieee/ieee.html
    -- little endian
    -- http://www.opengroup.org/onlinepubs/9629399/chap14.htm

    -- Count from left to right in SQL!
    declare @Byte1 binary(1), @Byte2 binary(1), @Byte3 binary(1), @Byte4 binary(1),
            @Byte5 binary(1), @Byte6 binary(1), @Byte7 binary(1), @Byte8 binary(1),
            @1Float float, @2Float float

    set @Byte1 = substring( @IEEE64, 8, 1 )
    set @Byte2 = substring( @IEEE64, 7, 1 )
    set @Byte3 = substring( @IEEE64, 6, 1 )
    set @Byte4 = substring( @IEEE64, 5, 1 )
    set @Byte5 = substring( @IEEE64, 4, 1 )
    set @Byte6 = substring( @IEEE64, 3, 1 )
    set @Byte7 = substring( @IEEE64, 2, 1 )
    set @Byte8 = substring( @IEEE64, 1, 1 )

    set @1Float = 1.
    set @2Float = 2.

    -- Double-precision float per IEEE 754 specification.
    -- S EEEEEEEEEEE FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
    -- 0 1        11 12                                                63

    -- Sign * 2^Exp * Val
    return case @IEEE64 when 0x0 then 0 else 1 end *
           case sign( cast( @Byte1 as smallint ) & 0x02 ) when 0 then 1 else -1 end *
           ( @1Float +
             ( sign( @Byte8 & power( 2, 0 ) ) * power( @2Float, -52 ) ) +
             ( sign( @Byte8 & power( 2, 1 ) ) * power( @2Float, -51 ) ) +
             ( sign( @Byte8 & power( 2, 2 ) ) * power( @2Float, -50 ) ) +
             ( sign( @Byte8 & power( 2, 3 ) ) * power( @2Float, -49 ) ) +
             ( sign( @Byte8 & power( 2, 4 ) ) * power( @2Float, -48 ) ) +
             ( sign( @Byte8 & power( 2, 5 ) ) * power( @2Float, -47 ) ) +
             ( sign( @Byte8 & power( 2, 6 ) ) * power( @2Float, -46 ) ) +
             ( sign( @Byte8 & power( 2, 7 ) ) * power( @2Float, -45 ) ) +
             ( sign( @Byte7 & power( 2, 0 ) ) * power( @2Float, -44 ) ) +
             ( sign( @Byte7 & power( 2, 1 ) ) * power( @2Float, -43 ) ) +
             ( sign( @Byte7 & power( 2, 2 ) ) * power( @2Float, -42 ) ) +
             ( sign( @Byte7 & power( 2, 3 ) ) * power( @2Float, -41 ) ) +
             ( sign( @Byte7 & power( 2, 4 ) ) * power( @2Float, -40 ) ) +
             ( sign( @Byte7 & power( 2, 5 ) ) * power( @2Float, -39 ) ) +
             ( sign( @Byte7 & power( 2, 6 ) ) * power( @2Float, -38 ) ) +
             ( sign( @Byte7 & power( 2, 7 ) ) * power( @2Float, -37 ) ) +
             ( sign( @Byte6 & power( 2, 0 ) ) * power( @2Float, -36 ) ) +
             ( sign( @Byte6 & power( 2, 1 ) ) * power( @2Float, -35 ) ) +
             ( sign( @Byte6 & power( 2, 2 ) ) * power( @2Float, -34 ) ) +
             ( sign( @Byte6 & power( 2, 3 ) ) * power( @2Float, -33 ) ) +
             ( sign( @Byte6 & power( 2, 4 ) ) * power( @2Float, -32 ) ) +
             ( sign( @Byte6 & power( 2, 5 ) ) * power( @2Float, -31 ) ) +
             ( sign( @Byte6 & power( 2, 6 ) ) * power( @2Float, -30 ) ) +
             ( sign( @Byte6 & power( 2, 7 ) ) * power( @2Float, -29 ) ) +
             ( sign( @Byte5 & power( 2, 0 ) ) * power( @2Float, -28 ) ) +
             ( sign( @Byte5 & power( 2, 1 ) ) * power( @2Float, -27 ) ) +
             ( sign( @Byte5 & power( 2, 2 ) ) * power( @2Float, -26 ) ) +
             ( sign( @Byte5 & power( 2, 3 ) ) * power( @2Float, -25 ) ) +
             ( sign( @Byte5 & power( 2, 4 ) ) * power( @2Float, -24 ) ) +
             ( sign( @Byte5 & power( 2, 5 ) ) * power( @2Float, -23 ) ) +
             ( sign( @Byte5 & power( 2, 6 ) ) * power( @2Float, -22 ) ) +
             ( sign( @Byte5 & power( 2, 7 ) ) * power( @2Float, -21 ) ) +
             ( sign( @Byte4 & power( 2, 0 ) ) * power( @2Float, -20 ) ) +
             ( sign( @Byte4 & power( 2, 1 ) ) * power( @2Float, -19 ) ) +
             ( sign( @Byte4 & power( 2, 2 ) ) * power( @2Float, -18 ) ) +
             ( sign( @Byte4 & power( 2, 3 ) ) * power( @2Float, -17 ) ) +
             ( sign( @Byte4 & power( 2, 4 ) ) * power( @2Float, -16 ) ) +
             ( sign( @Byte4 & power( 2, 5 ) ) * power( @2Float, -15 ) ) +
             ( sign( @Byte4 & power( 2, 6 ) ) * power( @2Float, -14 ) ) +
             ( sign( @Byte4 & power( 2, 7 ) ) * power( @2Float, -13 ) ) +
             ( sign( @Byte3 & power( 2, 0 ) ) * power( @2Float, -12 ) ) +
             ( sign( @Byte3 & power( 2, 1 ) ) * power( @2Float, -11 ) ) +
             ( sign( @Byte3 & power( 2, 2 ) ) * power( @2Float, -10 ) ) +
             ( sign( @Byte3 & power( 2, 3 ) ) * power( @2Float, -09 ) ) +
             ( sign( @Byte3 & power( 2, 4 ) ) * power( @2Float, -08 ) ) +
             ( sign( @Byte3 & power( 2, 5 ) ) * power( @2Float, -07 ) ) +
             ( sign( @Byte3 & power( 2, 6 ) ) * power( @2Float, -06 ) ) +
             ( sign( @Byte3 & power( 2, 7 ) ) * power( @2Float, -05 ) ) +
             ( sign( @Byte2 & power( 2, 0 ) ) * power( @2Float, -04 ) ) +
             ( sign( @Byte2 & power( 2, 1 ) ) * power( @2Float, -03 ) ) +
             ( sign( @Byte2 & power( 2, 2 ) ) * power( @2Float, -02 ) ) +
             ( sign( @Byte2 & power( 2, 3 ) ) * power( @2Float, -01 ) ) ) *
           power( @2Float,
                  ( sign( @Byte2 & power( 2, 4 ) ) * power( 2, 00 ) ) +
                  ( sign( @Byte2 & power( 2, 5 ) ) * power( 2, 01 ) ) +
                  ( sign( @Byte2 & power( 2, 6 ) ) * power( 2, 02 ) ) +
                  ( sign( @Byte2 & power( 2, 7 ) ) * power( 2, 03 ) ) +
                  ( sign( @Byte1 & power( 2, 0 ) ) * power( 2, 04 ) ) +
                  ( sign( @Byte1 & power( 2, 1 ) ) * power( 2, 05 ) ) +
                  ( sign( @Byte1 & power( 2, 2 ) ) * power( 2, 06 ) ) +
                  ( sign( @Byte1 & power( 2, 3 ) ) * power( 2, 07 ) ) +
                  ( sign( @Byte1 & power( 2, 4 ) ) * power( 2, 08 ) ) +
                  ( sign( @Byte1 & power( 2, 5 ) ) * power( 2, 09 ) ) +
                  ( sign( @Byte1 & power( 2, 6 ) ) * power( 2, 10 ) ) - 1023 )
     --- verificare il bit di segno.....
end 
```

如果没有在 Internet 上找到的用于将 ESRI shapefile 坐标转换为浮点数的第二个函数，我就没有达到目标。

我问是否有人不仅为多边形做了类似的工作，而且对所有特征类型都做了类似的工作。我也认为这段代码可能对解决类似问题很有用。

这是我的第一个版本。我喜欢向程序员学习如何改进它或了解代码中的错误。

此致

莱昂纳多·丹萨

附言

使用此功能，您可以如示例中所示进行转换：

```
/****** Object:  Table [dbo].[si_test_part]    Script Date: 07/14/2012 13:06:34 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

CREATE TABLE [dbo].[test_shp2geom](
    [OBJECTID] [int] NOT NULL,
    [SHAPE] [image] NULL,
    [geom] [geometry] NULL,
 CONSTRAINT [FDO_OBJECTID_test_shp2geom] PRIMARY KEY CLUSTERED 
(
    [OBJECTID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

GO

insert test_shp2geom
select 
1 as objectid,
0x05000000F6285C8FD12E3A418FC2F558472352415C8FC2751A2F3A4148E17A3461235241010000000B00000000000000F6285C8FD12E3A4148E17A3461235241A4703DCADD2E3A41AE47E1BA5F2352413E0AD7630A2F3A41295C8FF25A235241EC51B81E0D2F3A413E0AD7834E2352415C8FC2751A2F3A411F85EB914B2352411F85EB91162F3A418FC2F55847235241295C8FC2F12E3A418FC2F5384A23524185EB51F8E02E3A41CDCCCC4C4A23524148E17A94D92E3A41713D0A0755235241E17A142EDA2E3A41E17A141E55235241F6285C8FD12E3A4148E17A3461235241
as shape, null as geom
union all
select 
3,  
0x0500000052B81E054F2E3A4185EB51F84723524185EB51F8E02E3A419A9999B960235241010000000D0000000000000085EB51F8E02E3A41CDCCCC4C4A23524190C2F528D52E3A41B81E855B4A2352411F85EB91722E3A4185EB51F84723524152B81E054F2E3A4115AE470155235241CDCCCC0CA62E3A416766667660235241AE47E17AB52E3A419A9999B96023524115AE47A1A62E3A41EC51B81E5C235241F1AFE755B02E3A41A520987A582352413E0AD7639E2E3A413E0AD793552352411F85EB11A72E3A41CDCCCC5C50235241D7A370FDC02E3A41D7A3706D5123524148E17A94D92E3A41713D0A075523524185EB51F8E02E3A41CDCCCC4C4A235241
as shape, null as geom
union all
select 
4,  
0x05000000E17A14AEEC323A41B81E852B4423524185EB51F878333A41A4703D2A5E235241010000000B00000000000000E17A14AEEC323A41AE47E1DA5423524185EB51F878333A41A4703D2A5E235241676666A66D333A4185EB51F852235241000000C064333A41C3F5284C4C235241C3F528DC49333A413E0AD76349235241676666262F333A41F6285C1F49235241C3F5281C07333A41B81E852B44235241EC51B8DE04333A4185EB51684423524185EB513803333A41E17A14FE4623524185EB51F8F9323A41676666F64A235241E17A14AEEC323A41AE47E1DA54235241
as shape, null as geom
union all
select 
5,  
0x0500000085EB51F8E02E3A41A4703D5A2E2352410AD7A3F04B2F3A41295C8FF25A23524101000000130000000000000085EB51F8E02E3A41CDCCCC4C4A235241295C8FC2F12E3A418FC2F5384A2352411F85EB91162F3A418FC2F558472352415C8FC2751A2F3A411F85EB914B235241EC51B81E0D2F3A413E0AD7834E2352413E0AD7630A2F3A41295C8FF25A235241E17A14AE332F3A4148E17A845623524185EB5138442F3A4115AE47214B2352410AD7A330412F3A4115AE47C14A2352415C8FC2B5352F3A41D7A3703D47235241CDCCCC8C442F3A41CDCCCC7C3A2352410AD7A3F04B2F3A41295C8F2234235241CDCCCC4C412F3A410AD7A3602E235241A4703D8A3D2F3A41A4703D5A2E2352415C8FC2F5352F3A41C3F528EC31235241B81E852B032F3A417B14AE573523524152B81E45F02E3A41AE47E12A3623524185EB51B8EC2E3A41295C8F923923524185EB51F8E02E3A41CDCCCC4C4A235241
as shape, null as geom
union all
select 
6,  
0x05000000E17A14AE332F3A4115AE47214B23524115AE4761A32F3A4148E17A8456235241010000000A00000000000000E17A14AE332F3A4148E17A845623524133333373462F3A4115AE478154235241D7A3707D9D2F3A410AD7A3D05323524115AE4761A32F3A41A4703D8A4F23524115AE4721822F3A416766660651235241E17A14EE6B2F3A419A9999395123524148E17A145B2F3A413E0AD7034D2352419A9999194E2F3A41AE47E15A4C23524185EB5138442F3A4115AE47214B235241E17A14AE332F3A4148E17A8456235241
as shape, null as geom
union all
select 
7,  
0x05000000333333F3112E3A4115AE47012E235241676666A69C2E3A4115AE470155235241010000001400000000000000E17A14EE122E3A4115AE47414C23524152B81E054F2E3A4115AE4701552352411F85EB91722E3A4185EB51F8472352411F85EB51642E3A41000000A047235241CDCCCCCC652E3A41EC51B83E3E235241C3F5281C802E3A41333333833E235241000000C0882E3A415C8FC2B533235241676666A69C2E3A41C3F5282C32235241713D0A57942E3A4115AE47012E235241000000C06D2E3A4148E17A642F235241EC51B89E5E2E3A41713D0AC7322352411F85EB91632E3A4115AE473137235241EC51B8DE5E2E3A41D7A3709D3B235241E17A146E4E2E3A41CDCCCCFC3A2352410AD7A3702B2E3A419A99991940235241713D0A171D2E3A417B14AE573D23524100000080152E3A413E0AD7233E235241333333F3112E3A415C8FC27541235241000000401D2E3A4115AE472146235241E17A14EE122E3A4115AE47414C235241
as shape, null as geom
union all
select 
8,  
0x05000000B81E856BE1323A4185EB516844235241EC51B8DE04333A41AE47E1DA54235241010000000800000000000000B81E856BE1323A4115AE47615223524100000000E3323A416766663654235241E17A14AEEC323A41AE47E1DA5423524185EB51F8F9323A41676666F64A23524185EB513803333A41E17A14FE46235241EC51B8DE04333A4185EB5168442352413E0AD763F7323A4148E17A3445235241B81E856BE1323A4115AE476152235241
as shape, null as geom
union all
select 
9,  
0x05000000A4703D4AA1323A41AE47E1CA4623524148E17A54E3323A41295C8FF253235241010000000A00000000000000A4703D4AA1323A415C8FC2F54F235241295C8F42DD323A41295C8FF2532352417B14AE87DC323A41F6285C1F532352411F85EB51DA323A41CDCCCCEC51235241E17A142EDA323A4148E17AE44F235241D7A370BDDE323A41CDCCCCFC4A23524148E17A54E3323A41AE47E1CA4623524148E17A14C4323A41E17A144E4A2352410AD7A3B0B1323A41F6285C5F4C235241A4703D4AA1323A415C8FC2F54F235241
as shape, null as geom
union all
select 
10, 
0x05000000D7A3707D9D2F3A41B81E853B49235241000000402E303A410AD7A3D053235241010000000A00000000000000D7A3707D9D2F3A410AD7A3D0532352410AD7A3702C303A418FC2F5B852235241000000402E303A4148E17AC450235241EC51B8DEFE2F3A41A4703DFA4D235241A4703D0AD22F3A417B14AE974B23524100000040AB2F3A41B81E853B4923524152B81E05AB2F3A41EC51B8FE49235241333333B3A92F3A41333333F34A23524115AE4761A32F3A41A4703D8A4F235241D7A3707D9D2F3A410AD7A3D053235241
as shape, null as geom
union all
select 
11,
0x050000000AD7A3702C303A41E17A143E4C235241B81E85EB2A313A418FC2F5B852235241010000000C000000000000000AD7A3702C303A418FC2F5B8522352411F85EB11F7303A415C8FC23551235241B81E852BFE303A413E0AD7D34F23524115AE47A109313A417B14AEA74E2352417B14AE4718313A41000000104E235241B81E85EB2A313A41E17A143E4C2352416766666626313A41000000804C235241F6285C0FFA303A4115AE47114E2352417B14AEC78A303A41333333F35023524185EB51F845303A41A4703D2A52235241000000402E303A4148E17AC4502352410AD7A3702C303A418FC2F5B852235241
as shape, null as geom
go

update test_shp2geom
set geom=geometry::STGeomFromText(dbo.shp2wkt(SHAPE),0).MakeValid()

select geom from test_shp2geom 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:11:05.443

这是 T-SQL 函数的第二个版本，解决了将 ESRI 个人地理数据库要素表的形状列转换为众所周知的文本字符串的问题。

在这个版本中，我添加了对 XY WKT POINT、LINESTRING、MULTILINESTRING、POLYGON、MULTIPOLYGON、MULTIPOINT 的支持。这个版本检查多边形/多多边形环的有符号区域，计算外环和内环，并使用这些信息来管理 WKT 字符串的类型和语法。

可能你们中没有人对此类问题感兴趣/参与其中......无论如何，谢谢，并致以最诚挚的问候

莱昂纳多·丹萨

```
/****** object:  function [dbo].[shp2wkt_eng] - 12/07/2012 10:02:42 - Leonardo Danza ******/
set ansi_nulls on
go
set quoted_identifier on
go
alter function [dbo].[shp2wkt_eng](@shp  varbinary(max))
returns nvarchar(max) 
as
begin
    -- points table

    declare @Points_A table(N int identity(1,1), N_Part_Rel int, X varchar(16), Y varchar(16), part_number int)
    declare @N integer,                    -- row number
            @N_Part_Rel integer,           -- actual part row number  
            @X float, @X_STR varchar(16),  -- X coord.
            @Y float, @Y_STR varchar(16),  -- Y coord
            @part_number integer           -- part sequential number

    -- parts table

    declare @Parts_A table(part_number integer, SignedArea float)

    declare @F bigint                                          -- feature length (byte)
    declare @Ftype int                                         -- feature type (5 = polygon)
    Declare @Npoints int, @Nparts int                          -- points number, parts number in the feature
    declare @Xmin float, @Ymin float, @XMax float, @YMax float -- bounding box
    declare @OuterRings int, @InnerRings int                   -- current number of outer and inner rings in case of polygons
    declare @SignedArea float, @X_Prev float, @Y_Prev float    -- current ring area and previous point coords

    set @OuterRings = 0; set @InnerRings =0; set @SignedArea= 0;

    -- gets feature length

    set @F = datalength(@shp)

    -- gets Feature Type, bounding box, parts number, points number

    set @FType   = cast(substring(@shp, 1, 1) as int)       -- 1 byte
    set @Xmin    = dbo.BinToFloatLE(substring(@shp,  5 ,8)) -- 8 byte
    set @Ymin    = dbo.BinToFloatLE(substring(@shp, 13 ,8)) -- 8 byte
    set @XMax    = dbo.BinToFloatLE(substring(@shp, 21 ,8)) -- 8 byte
    set @YMax    = dbo.BinToFloatLE(substring(@shp, 29 ,8)) -- 8 byte
    set @NParts  = cast(substring(@shp, 37, 1) as int) +    -- 4 byte
                   cast(substring(@shp, 38, 1) as int)*256 +    
                   cast(substring(@shp, 39, 1) as int)*65536 +
                   cast(substring(@shp, 40, 1) as int)*16777216 
    set @NPoints = cast(substring(@shp, 41, 1) as int) +    -- 4 byte
                   cast(substring(@shp, 42, 1) as int)*256 +
                   cast(substring(@shp, 43, 1) as int)*65536 +
                   cast(substring(@shp, 44, 1) as int)*16777216 

    -- **********************************************************
    -- from  byte 44 (45) there is a  [Nparts] sequence of  
    -- 4 byte integers (Nparts is the parts number).
    -- Each number is a pointer to the first point of the part.
    -- **********************************************************

    declare @I int            -- points loop counter initialized with @I0
    declare @J int            -- parts loop counter initialized with 45
    declare @I0 int           -- current part first point seq. n. 
    declare @Last_Point int   -- current part last point seq. n.
    declare @Last_Point_0 int -- prev. part last point seq. n.
    declare @Max int          -- next part first point seq. n.
    declare @Jmax int         -- first part first point seq. n.
    declare @Part_Id int      -- part seq. number (from 0)

    set @Part_Id   = 0
    set @I0        = 44 + 4*@NParts 
    set @J         = 45
    set @I         = @I0
    set @Jmax      = 44 + 4*@NParts
    set @Last_Point_0  = 0 

    -- inserts points into @Points_A table

    while @J < @Jmax                                -- scans all parts
        begin
            if @Nparts=0 or @Part_Id = @NParts - 1  -- gets current part last point seq. n.
                begin
                    set @Last_Point=@NPoints
                end
            else
                begin
                    set @Last_Point = cast(substring(@shp, @J+4, 1) as int) +   
                                cast(substring(@shp, @J+5, 1) as int)*256 + 
                                cast(substring(@shp, @J+6, 1) as int)*65536 +
                                cast(substring(@shp, @J+7, 1) as int)*16777216 
                end

            set @Max = @I0 + 16*(@Last_Point-@Last_Point_0) -- current part points number
            set @SignedArea=0

            While @I < @Max  -- scans current part points
                begin
                    Set @N_Part_Rel = 1 + (@I - @I0)/16 
                    set @X_Prev=@X; set @Y_Prev=@Y;
                    Set @X = dbo.BinToFloatLE(substring(@shp,    @I + 1, 8))
                    Set @Y = dbo.BinToFloatLE(substring(@shp,8 + @I + 1, 8)) 

                    set @X_STR=cast((cast(@X as decimal(15,8))) as varchar)
                    set @Y_STR=cast((cast(@Y as decimal(15,8))) as varchar)

                    insert into @Points_A (N_Part_Rel, x, y, part_number)
                    select @N_Part_Rel, @X_STR, @Y_STR, @Part_Id

                    -- update current Signed Area

                    if @I>@I0 set @SignedArea+=(@X-@X_Prev) *( @Y+@Y_Prev)
                    Set @I = @I + 16
                end

            -- insert row into Parts Table

            insert @Parts_A(part_number, SignedArea) select @Part_Id, @SignedArea/2

            if @Ftype=5 and @SignedArea<>0
                begin
                    if @SignedArea>0 set @OuterRings+=1 else set @InnerRings+=1
                end

            set @I0 = 44 + 4*@NParts + 16*@Last_Point
            set @J  = @J  + 4 
            set @Part_Id = @Part_Id + 1
            set @Last_Point_0 = @Last_Point
        end

    -- create well known text string

    declare @wkt nvarchar(max), @end_wkt varchar(10), @part_number_prev int, @virgola varchar(50), @SignedArea_next float

    set @wkt=         -- set strings start wkt,end wkt
        case @Ftype 
             when 1 then 'POINT(|)' 
             when 3 then 
                 case
                     when @OuterRings>1 then 'MULTILINESTRING((|))'
                     when @OuterRings<=1 then 'LINESTRING(|)'
                 end
             when 5 then 
                 case
                     when @OuterRings>1 then 'MULTIPOLYGON(((|)))'
                     when @OuterRings<=1 then 'POLYGON((|))'
                 end
             when 8 then 'MULTIPOINT(|)'
        end 
        set @end_wkt=right(@wkt,len(@wkt) - charindex('|',@wkt))
        set @wkt=left(@wkt,charindex('|',@wkt)-1)

    set @virgola=''

    declare @punti cursor
    set @punti = cursor local for select Po.*, Pa.SignedArea from @Points_A Po inner join @Parts_A Pa on Po.part_number=Pa.part_number order by Po.n
    open @punti 
    fetch next from @punti into @n, @n_part_rel, @x_str,@y_str, @part_number, @SignedArea
    select @SignedArea_next=0
    set @part_number_prev=@part_number
    while @@fetch_status = 0
        begin
            if @part_number_prev<>@part_number  -- make separator string 
                begin
                    if @SignedArea>0      
                        begin                           -- new outer ring
                            set @virgola=')), (('       -- virgola is the italian for comma
                        end
                    else
                        begin                           -- new inner ring
                            set @virgola='), ('         -- virgola is the italian for comma
                        end
                    set @part_number_prev=@part_number
                end
            else
                begin
                    set @virgola=', '
                end
            if @n > 1 set @wkt += @virgola      -- no separator for first point
            set @wkt += @x_str + ' ' + @y_str   -- add points coords

            fetch next from @punti into @n, @n_part_rel, @x_str,@y_str, @part_number, @SignedArea
            select @SignedArea_next=isnull(SignedArea,0) from @Parts_A where part_number=(@part_number+1)
        end
    set @wkt+=@end_wkt
    close @punti
    deallocate @punti
    return @wkt
end 
```

# binding - knockout.js 绑定选择框

> ID：11483192
> 
> 赞同：0
> 
> 时间：2012-07-14T10:57:27.713
> 
> 标签：binding, knockout.js, drop-down-menu

我正在摆弄淘汰赛 js，并试图在其中制作一个带有选择的网格。看来我有点卡在这里了。

我想将一个数组绑定到选择框网格，然后单击保存（S）我想看到一个 json 响应，如

{ id: 2, name: "Long Cloak", price: "120.20", selthis: 1 }

这是我得到的[http://jsfiddle.net/marsmania00/JS6An/](http://jsfiddle.net/marsmania00/JS6An/) 任何帮助将不胜感激！

问候，迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T11:10:30.840

您将选项列表绑定到错误的级别。选项列表位于您的用例的 $root.pulldown 中。见[http://jsfiddle.net/JS6An/2/](http://jsfiddle.net/JS6An/2/)

# android - Webview 不加载离线缓存数据

> ID：11483195
> 
> 赞同：5
> 
> 时间：2012-07-14T10:57:46.300
> 
> 标签：android, offline

我在使用 Webview 时遇到问题，因为它不会使用缓存。我启动我的应用程序，加载 HTML5 页面，然后退出页面，在手机上进入飞行模式，然后再次尝试访问网页。它应该被缓存，但我收到一条消息说无法检索 URL。

这是我与此相关的代码。难道我做错了什么？？？

```
String weblink = "http://abcd.com";
final ConnectivityManager conMgr =  (ConnectivityManager)
getSystemService(Context.CONNECTIVITY_SERVICE);

final NetworkInfo activeNetwork = conMgr.getActiveNetworkInfo();

if (activeNetwork != null && activeNetwork.isConnected()) {
    progressBar = ProgressDialog.show(this, "Please Wait", "loading online..");
    mWebview.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT);
    mWebview.getSettings().setAppCacheMaxSize(1024*1024*8);
    mWebview.loadUrl(weblink);
    setContentView(mWebview);
} 
else 
{
    progressBar = ProgressDialog.show(this, "Please Wait", "loading offline..");
    mWebview.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ONLY);

    mWebview.loadUrl(weblink);
    setContentView(mWebview);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T11:15:53.727

你的代码没问题。

网站不存在或未正确缓存，或者您忘记添加以下权限：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permisson.ACCESS_WIFI_STATE"/>
<uses-permission android:name="android.permission.INTERNET"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-16T11:07:28.407

```
Just Remove 
```

> 设置内容视图（mWebview）；

```
in 
if and else both parts 
```

# actionscript-3 - 如何在 Adob e Air 2.0 的文件夹中检查相同扩展名（例如 .txt）的文件数量？

> ID：11483197
> 
> 赞同：0
> 
> 时间：2012-07-14T10:58:12.230
> 
> 标签：actionscript-3, air, filesystems

有没有办法在一个文件夹中找到相同类型的文件（例如“.txt”文件）的总数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T11:14:05.393

这是我找到的解决方案。

```
//Tested on AIR 2.0
import flash.filesystem.File;

//e.g. Say you want to target documents folder of your OS
var MyFolder:File = File.documentsDirectory.resolvePath("Temp");

var totNumOfFiles:Array = MyFolder.getDirectoryListing();
var numOfSameFileType:Array = [];

for (var i:uint = 0; i < totNumOfFiles.length; i++)
{
    if(totNumOfFiles[i].type == ".txt" )
    {
        numOfSameFileType.push(i);
    }else
    {
        trace("No text files.");
    }
}

trace("Total " + numOfSameFileType.length + " text files are available."); 
```

# android - CursorAdapter 不调用 newView 或 bindView android

> ID：11483199
> 
> 赞同：2
> 
> 时间：2012-07-14T10:58:39.903
> 
> 标签：android, android-cursoradapter

我正在尝试`GridView`在`Fragment`. 由于某种原因，没有调用 CursorAdapter 的`newView()`or`bindView()`方法。这是我的代码：

GridImageAdapter.java 类：

```
public class GridImageAdapter extends CursorAdapter {
    private static String TAG = "Image_Debug";

    private Context mContext;
    private int count;
    private String columnname;

    public GridImageAdapter(Context context,Cursor cursor,int flag){
        super(context,cursor,flag);
        this.mContext = context;
        //this.columnname = columnname;
        Log.d(TAG, "calling grid imageadapter now");
    }

    @Override
    public int getCount() {
        return count;
    }

    @Override
    public Object getItem(int position) {
        return position;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    /*@Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ImageView image;
        ViewHolder holder;

        if(convertView == null) {
            LayoutInflater inflater = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.media_view, null);
            holder = new ViewHolder();  
            holder.image = (ImageView)convertView.findViewById(R.id.media_image_id);    
            convertView.setTag(holder); 
        } else {
            holder = (ViewHolder)convertView.getTag();
        }   

           // holder.image.setImageBitmap((position).getBitmap());    

        return convertView;
    }*/

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        Log.d(TAG, "calling bind view");
        ViewHolder holder = (ViewHolder)view.getTag();
        String name = cursor.getString(cursor.getColumnIndexOrThrow(WeatherImageDB.CLOUDY));
        Log.d(TAG, "string name in gridimageadapter is" + name);

        BitmapFactory.Options options = new BitmapFactory.Options();
        Bitmap bitmap = BitmapFactory.decodeFile(name);

        Bitmap newbitmap = Bitmap.createScaledBitmap(bitmap, 120, 120, false);
        holder.image.setImageBitmap(newbitmap);
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup container) {
        Log.d(TAG, "calling new view here");
        ViewHolder holder = new ViewHolder();

            LayoutInflater inflater = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View view = inflater.inflate(R.layout.media_view, container, false);

            holder.image = (ImageView)view.findViewById(R.id.media_image_id);   
            view.setTag(holder);    

            return view;
    }
}

class ViewHolder {
   ImageView image;
   TextView item_name;
} 
```

并从片段：

```
public class PhotoFragment extends Fragment implements LoaderCallbacks<Cursor> {

private static final int FRIENDS_LOADER = 0;

private static final int MYLOADER_LOADER = 1;

    TextView text;
    GridView grid;
    GridImageAdapter imageAdapter;

    PhotoDB dbadapter;

public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);

        dbadapter = new PhotosDB(getActivity().getApplicationContext()); //database class

        getActivity().getSupportLoaderManager().initLoader(FRIENDS_LOADER, null, this);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState){
        super.onActivityCreated(savedInstanceState);

        setRetainInstance(true);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
            Bundle savedInstanceState){

        View view = inflater.inflate(R.layout.my_tags, container, false);

    text = (TextView)view.findViewById(R.id.my_header_text_id);
    grid = (GridView)view.findViewById(R.id.my_tag_gridview_id);
    grid.setClipToPadding(false);

    imageAdapter = new GridImageAdapter(getActivity().getApplicationContext(), null, CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
    grid.setAdapter(imageAdapter);
        return view;
    }

    @Override
    public Loader<Cursor> onCreateLoader(int id, Bundle args) {

        switch(id){
        case FRIENDS_LOADER:
                return new CustomCursorLoader(getActivity().getApplicationContext(), dbadapter,PhotoDB.FRIENDS);

        case MY_LOADER:

            return new CustomCursorLoader(getActivity().getApplicationContext(),dbadapter,PhotoDB.MYFOTOS);
        }

        return null;
    }

    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
        if(loader.getId() == 0){
            imageAdapter.swapCursor(data);
                    text.setText("Friend Photos");  
    }

    @Override
    public void onLoaderReset(Loader<Cursor> args) {
        imageAdapter.swapCursor(null);

    }

    public static final class CustomCursorLoader extends SimpleCursorLoader {

        String columnname;
        PhotoDB dbadapter;

        public CustomCursorLoader(Context context, PhotoDB dbadapter, String columnname){
            super(context);
            this.dbadapter = dbadapter;
            this.columnname = columnname;
        }

        public CustomCursorLoader(Context context,String columnname){
            super(context);
            this.columnname = columnname;
        }

        @Override
        public Cursor loadInBackground() {
            Cursor cursor = null;
            dbadapter.open();

            Log.d(TAG, "retrieving tag from database now");
            cursor = dbadapter.retrieveTag(columnname);

            return cursor;
        }

    }

} 
```

所以，我的问题是，为什么`CursorAdapter`不调用`newView()`/`bindView()`方法？我什至无法获得这些方法的 logcat 输出，所以我知道它没有到达那里。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T17:37:52.253

好吧，我知道已经很晚了-我还没有找到这篇文章-，但是我遇到了同样的问题（尽管我只是想做一个待办事项列表）。在过去的三个小时里，我一直在试图找出问题所在，并在网络上的某个地方寻找可能的解决方案。

也许无论如何它可以帮助其他人，所以我会说。

就我而言，有效的是：

这是我使用 onCreate 方法的主要活动的一部分：

```
public class TimeTrackerActivity extends Activity implements LoaderCallbacks<Cursor>
{
public static final int TIME_ENTRY_REQUEST_CODE = 1;
public static final int TIME_EDIT_REQUEST_CODE = 2;

private TimeTrackerAdapterDB adapter;
private TimeTrackerDatabaseHelper databaseHelper;
private ListView listView;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    //Database Helper
    databaseHelper = new TimeTrackerDatabaseHelper(this);
    //ListView that wasn't showing anything -before solving it-
    listView = (ListView)findViewById(R.id.times_list);
    //A private method I made for adding a listener to the ListView
    setListViewListener(listView);

    this.getLoaderManager().initLoader(0, null, this);
} 
```

...并向下移动到 LoaderCallbacks 方法：

```
 public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    CursorLoader loader = new CursorLoader(this, 
            TimeTrackerContentProvider.CONTENT_URI, null, null, null, null);

    return loader;
}

public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
            // I'm initializing my custom adapter here because it requires a cursor
    if (adapter == null)
        adapter = new TimeTrackerAdapterDB(this, cursor);
    else
        adapter.swapCursor(cursor);

    //THIS IS WHAT SOLVED IT!
    listView.setAdapter(adapter);
} 
```

所以，在我的情况下，它不起作用的原因是因为适配器没有设置为 ListView，所以我的列表没有显示任何内容，并且之前从未调用过 newView() 和 bindView() 方法。

一旦光标加载完成，也许它可以通过将适配器设置为 onLoadFinished 上的 GridView 来工作。

不知道它是否会解决您的问题或其他任何人的问题，但它对我有用。希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T11:33:04.860

尝试以这种格式更改您的代码，它应该可以按照您的意愿工作。

```
 class GridImageAdapter extends CursorAdapter {
            LayoutInflater mInflater; 
            SimpleDateFormat sdf; 

            GridImageAdapter (Context context, Cursor cursor)
            {
                super(context, cursor);
                mInflater = (LayoutInflater) context
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            }

            @Override
            public View newView(Context context, Cursor cursor, ViewGroup parent)
            {
                return mInflater.inflate(R.layout.yourxml, parent, false);
            }

           @Override
            public void bindView(View row, Context context, Cursor cursor)
            {
                ImageView expensesdate = (ImageView) row.findViewById(R.id.dateWorked); 
                        You can Assign your image with this imageview.

            } 
        } 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-09T12:37:54.937

我也遇到了这个问题，我就是这样解决的，你可以试试。在您的片段中，更改此行：

```
getActivity().getSupportLoaderManager().initLoader(FRIENDS_LOADER, null, this); 
```

至

```
getLoaderManager().initLoader(FRIENDS_LOADER, null, HomeFragment.this).forceLoad(); 
```

前者不起作用，因为它将 Activity 作为上下文，因此不会通知 Fragment。

# jsp - javaee项目目录结构需要了解

> ID：11483201
> 
> 赞同：0
> 
> 时间：2012-07-14T10:59:04.773
> 
> 标签：jsp, jakarta-ee, servlets

我是 java 新手，但在 .NET 方面有经验。我在 Servlet/JSP/JDBC 中开发 CRUD 用于学习。在开发过程中想要正确命名将要使用的包和文件。

如果我没有正确命名适合 javaEE 项目的名称，我会感到不舒服。

我对此进行了很多搜索，最后决定使用这种命名方式。请参阅下面的目录并建议我是否可以从您的开发经验中修复它。

![javaEE目录结构](../Images/ec8ff90b83a72c2d02c8f82a3dd34ff3.png)

***我是否应该****在一个名为 UserController 的单个控制器中为所有 CRUD 和相关的用户操作使用一个控制器，因为如果我有管理、产品等页面，那么每个页面都会有很多控制器？*

```
User --> Properties only (POJO)
UserDAO --> Interface
UserDAOImpl --> Methods for CRUD etc 
```

我将很快切换到 MVC 框架，并将探索 JSF、Spring 和 Struts。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T11:16:00.317

1.  公认的命名约定是为您的项目使用您拥有的反向域名，以便类在全世界都是唯一的。我没有任何域名，但我通常使用`com.blogspot.nurkiewicz`

2.  是否应该根据用例或层将类保存在包中，社区中并没有真正达成一致。你有 DAO、DTO 和控制器的包。我更喜欢为与用户相关的用例提供包，将所有类放在一个地方。

3.  如果可以，将一个控制器用于所有与用户相关的操作。但是，一旦它变得太大，请将其拆分为相关功能组（例如`UserCrudController`，`UserPermissionsController`...）

4.  我在这里缺少服务层——在视图层（控制器）和原始数据访问之间进行调解的东西。

# android - Android Listview Single Choice 保持选中项

> ID：11483207
> 
> 赞同：1
> 
> 时间：2012-07-14T11:00:01.887
> 
> 标签：android, android-listview

我有一个包含各种 TABS 的活动，其中一个有一个单选模式 ListView，它填充了一个 SimpleCursorAdapter。

```
Cursor c = db.listaPessoas(APRESENTACAO);
startManagingCursor(c);
SimpleCursorAdapter sca = new SimpleCursorAdapter(formPessoa.this,android.R.layout.select_dialog_singlechoice, c, new String[] {"nome"}, new int[] {android.R.id.text1});
pessoasInseridas.setAdapter(sca);
sca.notifyDataSetChanged(); 
```

问题是当我更改为另一个选项卡并返回具有 ListView 的选项卡时，不再选择 ListView 的选定项（绿色突出显示从单选按钮消失）。如何在 ListView 上保持项目的状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T11:05:59.783

试试这个

```
listView.setSelection(i);  // ex: i=5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T11:10:19.733

发生这种情况是因为 android 不存储 listview 的状态来节省内存。当您在选项卡之间切换时，列表视图会“重新绘制”。您必须做的是更新数据库并刷新列表视图绑定的游标。这必须在列表视图中选中复选框后立即完成

# java - 从 shell 脚本运行 java 类

> ID：11483208
> 
> 赞同：2
> 
> 时间：2012-07-14T11:00:14.997
> 
> 标签：java, shell, classpath

我在将 Windows 批处理文件更改为 unix shell 脚本以在我的 linux 机器上执行相同的 java 代码时遇到问题。

我的 shell 脚本如下所示：

```
#!/bin/bash

libdir=../lib
bindir=.
LIBS=$libdir/lib_1.jar;$libdir/lib_2.jar;$libdir/lib_3.jar;$libdir/lib_4.jar

java -cp $bindir;$LIBS com.sample.SampleServer 
```

对我来说，它看起来是正确的，但我收到以下错误消息： `Failed to load Main-Class manifest attribute from /home/user/development/lib/lib_2.jar`

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T11:03:07.193

在 UNIX 上，类路径的各个部分需要用冒号 (:) 分隔，而不是用分号分隔（在 -cp 和 LIBS 中）。

# android - 在动态 ListView 中只添加一行

> ID：11483209
> 
> 赞同：2
> 
> 时间：2012-07-14T11:00:15.933
> 
> 标签：android, android-listview, android-arrayadapter

我有一个**ListView**，当我单击一个按钮时，我想将数据添加到我的**ListView**。我为此有一个自定义的**ArrayAdapter**，但这仅适用于第一次单击，第二次不添加任何内容，但如果我调试数据就可以了。

**代码：**

```
 public class gremioAdapter extends ArrayAdapter<Gremio> {

        Context context;
        int layoutResourceId;
        ArrayList<Gremio> data = null;

        public gremioAdapter(Context context, int layoutResourceId, ArrayList<Gremio> data)
        {
            super(context, layoutResourceId, data);
           this.layoutResourceId = layoutResourceId;
            this.context = context;
            this.data = data;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View row = convertView;
            GremioHolder holder = null;

            if (row == null) {
                LayoutInflater inflater = ((Activity) context).getLayoutInflater();
                row = inflater.inflate(layoutResourceId, parent, false);

                holder = new GremioHolder();
                holder.tvGremio = (TextView) row.findViewById(R.id.tvGremio);
                holder.etComentario = (EditText) row.findViewById(R.id.etComentario);
                holder.cbActivo = (CheckBox) row.findViewById(R.id.cbGremioActivo);
                row.setTag(holder);
            }
            else {
                holder = (GremioHolder) row.getTag();
            }

            Gremio gremio = data.get(position);
            holder.tvGremio.setText(gremio.literal);
            holder.etComentario.setText(gremio.comentario);    
            posicion++;

            return row;
        }

        public class GremioHolder {
            TextView tvGremio;
            EditText etComentario;
            CheckBox cbActivo;
        }
    }

} 
```

我在这里添加数据：

```
btnAnadirGremio.setOnClickListener(new OnClickListener()
        {

            @Override
            public void onClick(View v) {

                gremioQueQuiereAnadir = spinnerGremios.getSelectedItem().toString();
                codigoDelGremio = respuestaTerminar.getListaGremiosDisponibles().get(gremioClickeado).getCodigo();
                Gremio objetoGremioAnadir = new Gremio();
                objetoGremioAnadir.setCodigo(codigoDelGremio);
                objetoGremioAnadir.setLiteral(gremioQueQuiereAnadir);
                gremios.add(objetoGremioAnadir);
                adaptadorListaGremios.notifyDataSetChanged();

            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T11:07:49.923

```
public class gremioAdapter extends ArrayAdapter<Gremio> {

....

public void updateDataSet(Gremio objetoGremioAnadir) {
   this.data.add(objetoGremioAnadir);
   notifyDataSetChanged();

}

}

btnAnadirGremio.setOnClickListener(new OnClickListener()
 {

    @Override
    public void onClick(View v) {

      gremioQueQuiereAnadir = spinnerGremios.getSelectedItem().toString();
      codigoDelGremio = respuestaTerminar.getListaGremiosDisponibles().get(gremioClickeado).getCodigo();
       Gremio objetoGremioAnadir = new Gremio();
       objetoGremioAnadir.setCodigo(codigoDelGremio);
       objetoGremioAnadir.setLiteral(gremioQueQuiereAnadir);
       adaptadorListaGremios.updateDataSet(objetoGremioAnadir );

       }
 }); 
```

# php - imagecreatefromjpeg() 调整大小时返回黑色图像

> ID：11483212
> 
> 赞同：4
> 
> 时间：2012-07-14T11:00:49.827
> 
> 标签：php, image, file, image-processing, file-upload

我有以下代码

```
 // load image and get image size
  $img = imagecreatefrompng( "{$pathToImages}{$fname}" );

  $width = imagesx( $img );
  $height = imagesy( $img );

  // calculate thumbnail size
  $new_width = $imageWidth;
  $new_height = 500;

  // create a new temporary image
  $tmp_img = imagecreatetruecolor( $new_width, $new_height );

  // copy and resize old image into new image 
  imagecopyresized( $tmp_img, $img, 0, 0, 0, 0, $new_width, $new_height, $width, $height ); 
```

它适用于某些图像..但是对于某些图像，它会显示错误，例如

```
Warning: imagecreatefromjpeg() [function.imagecreatefromjpeg]: gd-jpeg: JPEG library reports unrecoverable error: 

Warning: imagesx() expects parameter 1 to be resource, boolean given

Warning: imagesy() expects parameter 1 to be resource, boolean given 
```

我也启用了

gd.jpeg_ignore_warning = 1

在 php.ini 中

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T11:07:43.377

根据[（2010 年 2 月）的一篇博客文章，](http://anvilstudios.co.za/blog/php/imagecreatefromjpeg-gd-jpeg-library-reports-unrecoverable-error/)它的实现中的一个错误`imagecreatefromjpeg`应该返回`false`，但会引发错误。

解决方案是检查图像的文件类型（我删除了重复调用，`imagecreatefromjpeg`因为它完全是多余的；我们之前已经检查过正确的文件类型，如果由于其他原因发生错误，`imagecreatefromjpeg`将`false`正确返回）：

```
function imagecreatefromjpeg_if_correct($file_tempname) {
    $file_dimensions = getimagesize($file_tempname);
    $file_type = strtolower($file_dimensions['mime']);

    if ($file_type == 'image/jpeg' || $file_type == 'image/pjpeg'){
        $im = imagecreatefromjpeg($file_tempname);
        return $im;
    }
    return false;
} 
```

然后你可以这样写你的代码：

```
$img = imagecreatefrompng_if_correct("{$pathToImages}{$fname}");
if ($img == false) {
    // report some error
} else {
    // enter all your other functions here, because everything is ok
} 
```

当然，如果你想打开一个 png 文件（就像你的代码所建议的那样），你可以对 png 做同样的事情。实际上，通常您会检查您的文件真正具有的文件类型，然后在这三个（jpeg、png、gif）之间调用正确的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T11:33:39.353

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-24T16:54:28.687

我对这个问题的解决方案：检测 imagecreatefromjpeg 是否返回“false”，在这种情况下，请在 file_get_contents 上使用 imagecreatefromstring。为我工作。请参阅下面的代码示例：

```
$ind=0;
do{
    if($mime == 'image/jpeg'){
        $img = imagecreatefromjpeg($image_url_to_upload);
    }elseif ($mime == 'image/png') {
        $img = imagecreatefrompng($image_url_to_upload);
    }
    if ($img===false){
        echo "imagecreatefromjpeg error!\n";
    }
    if ($img===false){
        $img = imagecreatefromstring(file_get_contents($image_url_to_upload));
    }
    if ($img===false){
        echo "imagecreatefromstring error!\n";
    }
    $ind++;
}while($img===false&&$ind<5); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T11:08:51.870

你能举出任何文件做/不工作的例子吗？根据[http://www.php.net/manual/en/function.imagecreatefromjpeg.php#100338](http://www.php.net/manual/en/function.imagecreatefromjpeg.php#100338)远程文件名中的空白可能会导致问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-15T12:59:43.630

如果您使用 URL 作为图像的来源，则需要确保启用 php 设置 allow_url_fopen。

# mono - 使用 Mono for Android 重命名 Java 绑定库中的“params”参数？

> ID：11483213
> 
> 赞同：0
> 
> 时间：2012-07-14T11:00:58.757
> 
> 标签：mono, xamarin.android, bugsense

我正在尝试为 BugSense 创建一个 Java 绑定库，但其中一种方法有一个名为“params”的参数，它是 C# 中的保留字。我尝试使用 Metadata.xml 文件对其进行重命名，但我无法弄清楚如何访问该类，更不用说方法或其参数了。

这是它生成的问题代码：

```
namespace Com.Bugsense.Trace {

[global::Android.Runtime.Register ("com/bugsense/trace/ActivityAsyncTask", DoNotGenerateAcw=true)]
internal partial class ActivityAsyncTaskInvoker : ActivityAsyncTask {

    static IntPtr id_doInBackground_arrayLjava_lang_Object_;
    [Register ("doInBackground", "([Ljava/lang/Object;)Ljava/lang/Object;", "GetDoInBackground_arrayLjava_lang_Object_Handler")]
    protected override global::Java.Lang.Object DoInBackground (global::Java.Lang.Object[] params)
    {
        if (id_doInBackground_arrayLjava_lang_Object_ == IntPtr.Zero)
            id_doInBackground_arrayLjava_lang_Object_ = JNIEnv.GetMethodID (class_ref, "doInBackground", "([Ljava/lang/Object;)Ljava/lang/Object;");
        IntPtr native_params = JNIEnv.NewArray (params);
        global::Java.Lang.Object __ret = Java.Lang.Object.GetObject<global::Java.Lang.Object> (JNIEnv.CallObjectMethod  (Handle, id_doInBackground_arrayLjava_lang_Object_, new JValue (native_params)), JniHandleOwnership.TransferLocalRef);
        if (params != null) {
            JNIEnv.CopyArray (native_params, params);
            JNIEnv.DeleteLocalRef (native_params);
        }
        return __ret;
    }
}
} 
```

这是我的映射，我觉得应该可以，但就是拒绝。

```
<attr path="/api/package[@name='com.bugsense.trace']/class[@name='ActivityAsyncTaskInvoker']/method[@name='doInBackground']/parameter[@name='params']" name="managedName">@params</attr> 
```

我已经尝试了我能想到的一切。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T11:21:12.610

因此，事实证明这只是当前版本的 Mono for Android 中的一个错误。如果您更新到处于测试阶段的 4.2.4 版本，一切都可以正常编译。

# sql - SQL 查询必须从 ProductMaster 和其他 2 个表中返回行

> ID：11483215
> 
> 赞同：0
> 
> 时间：2012-07-14T11:01:22.680
> 
> 标签：sql

我有 3 张桌子：

1.  产品大师
2.  SalesTY（今年销售额）
3.  SalesLY（去年销售额）

我正在尝试创建一个查询，它将返回 ProductMaster 中的所有行，然后是今年的销售额，然后是去年的销售额。问题是今年的一些产品是新的，而去年的一些产品已经没有了，但我必须列出所有的产品，所以它必须看起来像这样：

```
Product    TY       LY
aaaa       1000     0
bbbb       0        1000 
```

我的查询：

```
select 
i.Product
,b1.TrnMonth
,b1.TrnYear
,b1.TY
,b2.LY
from Productmaster i
left join #ty b1
on i.Product = b1.Product
left join #ly b2
on i.Product = b2.Product
Group by i.Product
,b1.TrnMonth
,b1.TrnYear 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:42:00.557

目前尚不清楚您`GROUP BY`的`TY.TrnYear`和`TrnMonth`列应该如何与结果中的 LY 表相关联。

排除它们并继续您的输出示例（也排除它们），我将使用此查询：

```
SELECT
    i.Product
    , COALESCE((Select SUM(TY) From #ty b1 Where i.Product = b1.Product), 0) As TY
    , COALESCE((Select SUM(LY) From #ly b2 Where i.Product = b2.Product), 0) As LY    
FROM Productmaster i 
```

不应该在没有特殊条件的情况下将 TY 和 LY 相互连接，因为它们会使结果行交叉相乘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T13:18:10.703

你需要`LEFT OUTER JOIN`我想。

# language-agnostic - 为什么用前导零来表示八进制数？

> ID：11483216
> 
> 赞同：17
> 
> 时间：2012-07-14T11:01:47.197
> 
> 标签：language-agnostic, history, octal

我一直想知道为什么用前导零 ( `0`) 来表示八进制数，而不是——例如—— `0o`。的使用`0o`同样有帮助，但不会像前导`0`es 那样引起很多问题（例如`parseInt('08');`在 JavaScript 中）。这种设计选择背后的原因是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-14T11:24:10.183

所有现代语言都从 C 导入这个约定，从 B 导入它，从 BCPL 导入它。

除了 BCPL 用于`#1234`八进制和`#x1234`十六进制。B 已经背离了这个约定，因为 # 是 B 中的一元运算符（整数到浮点的转换），所以不能使用 #1234，并且将 # 作为基础指示符替换为 0。

B 的设计者试图使语法非常紧凑。我想这就是他们没有使用两个字符前缀的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T11:17:10.713

“0b”通常用于二进制而不是八进制。前导“0”是，我怀疑是“ **O** -ctal”。

如果你知道你将要解析八进制，那么使用`parseInt('08', 10);`它来让它把这个数字当作十进制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-23T12:09:45.483

值得注意的是，在 Python 3.0 中，由于您在问题中提到的确切原因，他们决定八进制文字必须以“0o”为前缀，而旧的“0”前缀变成了 SyntaxError

[https://www.python.org/dev/peps/pep-3127/#removal-of-old-octal-syntax](https://www.python.org/dev/peps/pep-3127/#removal-of-old-octal-syntax)

# fibonacci - 斐波那契矩阵

> ID：11483221
> 
> 赞同：1
> 
> 时间：2012-07-14T11:02:37.287
> 
> 标签：fibonacci

为了计算 O(logn) 中的斐波那契数列，我们使用矩阵指数，因为该项
`fn = fn-1 + fn-2`是线性的，但是如果我们想找到的第 n 项需要什么矩阵

`fn = fn-1 + fn-2 + a0 + a1*n + a2*n^2 + ... an*n^n`
哪个是依赖多项式？？？
这里 a0,a1,... an 是常数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T14:49:39.220

在此处查找使用公式 [的 Erlang 中的实现](https://gist.github.com/pichi/8238258)![\begin{pmatrix}1&1\\1&0\end{pmatrix}^{n-1}=\begin{pmatrix}\mathrm{fib}(n)&\mathrm{fib}(n-1)\ \mathrm{fib }(n-1)&\mathrm{fib}(n-2)\end{pmatrix}](../Images/070b5dabbacff1bd815a3be743511aa0.png) 。它显示了很好的线性结果行为，因为`O(M(n) log n)`部分`M(n)`是大数字的指数。它在 2 秒内计算出一百万的 fib，其中结果有 208988 位。诀窍是您可以`O(log n)`使用（尾）递归公式计算乘法中的幂（尾表示`O(1)`在使用适当的编译器或重写循环时带有空格）：

```
% compute X^N
power(X, N) when is_integer(N), N >= 0 ->
    power(N, X, 1).

power(0, _, Acc) ->
    Acc;
power(N, X, Acc) ->
    if N rem 2 =:= 1 ->
            power(N - 1,   X,     Acc * X);
        true ->
            power(N div 2, X * X, Acc)
    end. 
```

在哪里`X`，`Acc`你用矩阵代替。`X`将以![\begin{pmatrix}1&1\1&0\end{pmatrix}](../Images/05259e35d5c377f93f5f4f433fae8ce7.png)和`Acc`身份启动`I`等于![\begin{pmatrix}1&0\0&1\end{pmatrix}](../Images/87ddecf8d7e2b897c998ca7b36762c6d.png)。

# ios - 检测 UIView 区域的颜色

> ID：11483224
> 
> 赞同：3
> 
> 时间：2012-07-14T11:02:48.517
> 
> 标签：ios, colors, area

我正在开发一个用户可以在屏幕上绘图的应用程序。我从Apple提供的**GLPaint开始。**

我想检测用户是否为屏幕的特定区域着色，并且我想每**1/15 秒**检测一次（或类似的东西，非常快）。

我想创建一个位图图形上下文并将其传递给`CGBitmapContextCreate`然后将我的视图绘制到该上下文中并循环遍历所有像素。

我正在寻找更有效的东西......有什么帮助吗？

# 更新

我尝试使用 glReadPixels() 但它非常慢......也许我错过了一些东西......我试图读取一个 100x100 的区域，但这个方法需要大约 1 秒才能完成。这是我的代码

```
- (void)isGameFinished
{
    float x = 0;
    float y = 0;
    float w = 100;
    float h = 100;
    GLubyte* pixelColors = malloc(w * h * sizeof(GLubyte) * 3);
    glReadPixels(x,y, w, h, GL_RGB, GL_UNSIGNED_BYTE, &pixelColors[0]);

    for(int i=0;i<w*h;i+=3)
    {
        ccColor3B color=ccc3(pixelColors[i],pixelColors[i+1],pixelColors[i+2]);
        NSLog(@"index: %d  r:%c g:%c b:%c",i,color.r,color.g,color.b);
    }

    free(pixelColors);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:07:52.480

对于每 1/15 秒调用一次方法，您可以使用 a为4 的[CADisplayLink](http://developer.apple.com/library/ios/#documentation/QuartzCore/Reference/CADisplayLink_ClassRef/Reference/Reference.html)`frameInterval`（60 FPS / 4 = 每秒 15 次）。如果您使用的是 GLPaint，则意味着您使用的是 OpenGL。您可以使用函数[glReadPixels()](http://www.khronos.org/opengles/documentation/opengles1_0/html/glReadPixels.html)来获取某个区域的像素数据。但是，您需要确保您可以访问 CADisplayLink 调用的函数中的底层缓冲区。我在 OpenGL 方面还不够好，无法说明如何确保这一点。

# phpstorm - 使 PhpStorm 在项目视图中显示更改/修改的文件

> ID：11483227
> 
> 赞同：31
> 
> 时间：2012-07-14T11:03:12.233
> 
> 标签：phpstorm

从 Zend Studio (ZS) 迁移到 PhpStorm 后，我开始怀念 ZS 用来显示更改文件并一次显示多个项目的方式。

例如，注意它如何显示 IndexController.php 已被修改。

有没有办法用 PhpStorm 做到这一点？

![Zend Studio PHP 资源管理器](../Images/13dddde26d97c83d68fe059cdfd56126.png)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2015-05-06T14:07:14.577

正如[LazyOne](https://stackoverflow.com/users/783119/lazyone)[在评论中提到](https://stackoverflow.com/questions/11483227/make-phpstorm-show-changed-modified-files-in-project-view#comment21821264_11483227)的那样；

该`Project`面板确实会突出显示任何`VCS`更改，但要突出显示已更改文件的所有父文件夹，请启用：

**文件 | 设置 | 版本控制 | 显示具有更改后代的目录**

向[LazyOne 致敬](https://stackoverflow.com/users/783119/lazyone)！

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-02-18T04:42:15.143

按`Alt`+ `9`（不是来自`numpad`），您可以获得一个包含已更改文件的面板。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-10-08T13:08:58.950

**转到**文件>>设置>>编辑器>>常规>>编辑器选项卡。 **用星号检查**标记修改的选项卡 **单击**确定

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-12-02T11:36:35.763

另一种选择：`ctrl`++`shift``e`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-02-01T06:50:05.560

更具体地说。在文件状态（设置）下
[选项] 已更改后代
[选项] 已立即更改子
[选项] 已修改

改变这三种颜色

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-21T13:43:58.933

另一种选择：`ctrl`+`e`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-25T10:07:49.633

PhpStorm 将所有更改存储在您的文件中。如果您使用 Git 或 VCS，很容易看到您所做的更改，但这也适用于普通的本地项目。
打开：

```
VCS -> Local History -> Show History 
```

[![在此处输入图像描述](../Images/1029f191b66a0d1f43506effbe9a0ec0.png)](https://i.stack.imgur.com/vuZ6F.png)

您将看到大窗口分为 2。左边显示所有版本，右边显示所有修改过的文件。双击还会为您提供一个差异窗口，显示两个文件之间的差异。

全部 修改显示为标量，意味着选择左上角将仅显示最后一次修改。在左侧选择 scond 将显示从那时起的聚合修改。

如果您需要更多解释，请告诉我。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-14T09:31:28.483

在名为 Local changes 的 Git 工具栏 (ctrl+9) 选项卡中

[![在此处输入图像描述](../Images/7971663c4a75c37db0986ec5fb6b0eb3.png)](https://i.stack.imgur.com/bL30o.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-26T11:24:00.113

与 PhpStorm 2021 一样，您可以通过转到**Settings > Version Control > Git**并选中**Enable Staging Area来实现它** [![在此处输入图像描述](../Images/77c99ab18c01c367a29adc5cec112b50.png)](https://i.stack.imgur.com/d2anv.png)

# file-management - 在远程管理器的命令中获取选定的文件

> ID：11483229
> 
> 赞同：0
> 
> 时间：2012-07-14T11:03:18.557
> 
> 标签：file-management, file-manager, far

我想使用 far 并且我不知道如何执行以下操作。我有一个 powershell 脚本，想通过命令菜单运行它。就是这个：

powershell C:\tgit.ps1 {所选文件}

我想用实际选择的文件替换 {selected file}。或者如果没有，则使用空字符串。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:30:43.163

不幸的是，这并不完全可能。

您可以像这样将选定文件的列表传递给您的命令...

```
powershell C:\tgit.ps1 !& 
```

...但是如果没有选择文件，则不会按照您的要求传递空字符串（而是当前光标下的文件）。您可以检查所选文件列表是否等于当前光标下的文件，并在这种情况下调用不带参数的命令：

```
IF "!.!" == "!&" ( powershell C:\tgit.ps1 ) ELSE ( powershell C:\tgit.ps1 !& ) 
```

但是现在，如果您选择单个文件并且光标也在该选定文件上，您将调用不带参数的变体。尽管这是一种边缘情况，但我想不出完全满足您要求的解决方案。

# iphone - 构建成功但未在模拟器上运行

> ID：11483231
> 
> 赞同：2
> 
> 时间：2012-07-14T11:03:39.793
> 
> 标签：iphone, ios, gpu

[我从这里](https://github.com/BradLarson/GPUImage)下载 Brad Larson 的代码 。当我运行它时。它显示构建成功，但它没有在模拟器中运行。请指引我正确的方向。

我检查了应用程序委托文件中的方法

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{
....... 
```

}

不叫。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T11:27:34.053

您尝试运行的方案可能设置不正确（我下载代码时也不适合我）。只需将方案更改为您要运行的方案，然后重试（XCode 的左上角区域有一个下拉框，可能设置为“GPUImage”或类似的东西，将其更改为“CubeExample”或其他任何东西，它应该可以工作）。[但是，根据](https://github.com/BradLarson/GPUImage/issues/214)您最需要在设备上运行的问题页面，不要期望在模拟器中运行太多。

# c# - 在包含对象作为值的字典上使用 foreach 时出错

> ID：11483232
> 
> 赞同：4
> 
> 时间：2012-07-14T11:03:40.563
> 
> 标签：c#, collections, dictionary, foreach, enumeration

我正在尝试遍历包含对象作为值的字典：

```
foreach (KeyValuePair<int, CMapPool_Entry> Entry in MapPool)
{
   this.SendConsoleMessage(Entry.Value.Map);
} 
```

下面你可以看到 CMapPool_Entry 的类

```
public class CMapPool_Entry
{
    public string Map;
    public string Mode;
    public int Rounds;
    public int Index;
    public int Votes;

    public bool Nominated;
    public string Nominator;

    public CMapPool_Entry(string map, string mode, int rounds, int index, string Nominator_LeaveEmptyStringIfNone)
    {
        this.Map = map;
        this.Mode = mode;
        this.Rounds = rounds;
        this.Index = index;

        // If Nominator isn't empty, set map to nominated
        if (Nominator_LeaveEmptyStringIfNone != "")
        {
            this.Nominated = true;
            this.Nominator = Nominator_LeaveEmptyStringIfNone;
        }
    }

    public void AddVote()
    {
        this.Votes++;
    }

    public void RemoveVote()
    {
        if (this.Votes > 0)
            this.Votes--;
    }
} 
```

这里还可以看到 SendConsoleMessage 方法：

```
 private void SendConsoleMessage(string message)
    {
        this.ExecuteCommand("procon.protected.pluginconsole.write", String.Format("{0}", message));
    } 
```

对我来说它看起来会起作用，我已经阅读了如何从 foreach 中的字典中编辑值会产生以下错误：“集合已修改；枚举操作可能无法执行。”

但是为什么我会收到这个错误？我没有编辑任何值，我只是在阅读它们，对吗？如果 CObject 是 string 或 int ，它可以正常工作，但如果它是一个对象，它就会发疯。我做错了什么，我该怎么办？

* * *

编辑：经过进一步调试后，我注意到 Entry.Key 可以很好地使用，但是一旦我触摸 Entry.Value，我就会收到错误消息。由于某种原因，我随机收到了两个不同的错误：

1.  “集合已修改；枚举操作可能无法执行。”
2.  “给定的键不在字典中。”

有任何想法吗？或者以对象为值的枚举字典根本不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T12:25:00.070

正如每个人在评论中指出的那样，当您尝试从中读取字典时，您正在修改另一个线程中的字典。您在评论中写道，您通过以下方式“复制”字典：

```
Dictionary<int, CMapPool_Entry> MapPool = this.Votemap_MapPool; 
```

这不会复制字典，而是创建对`Votemap_MapPool`in的引用`MapPool`，因此在修改`Votemap_MapPool`代码中的某处时，在阅读时`MapPool`您将收到异常`System.InvalidOperationException`，并显示 Collection 已修改的消息。

要真正复制您的字典，您必须编写：

```
Dictionary<int, CMapPool_Entry> MapPool = new Dictionary<int, CMapPool_Entry>(Votemap_MapPool); 
```

这确实创建了一个带有`Votemap_MapPool`as 内容的 Dictionary 的新实例，并且在`Votemap_MapPool`被修改时`MapPool`保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T11:15:17.600

在处理 foreach 期间，您无法更改集合（字典也是集合）。

解决方法：

```
using System.Linq;

foreach (CObject value in ExampleDictionary.Values.ToArray()) {
   this.SendConsoleMessage(value.SomeVariableInObject);
} 
```

# python - Python命令行模式错误

> ID：11483234
> 
> 赞同：0
> 
> 时间：2012-07-14T11:04:15.990
> 
> 标签：python, shell, user-interface, command-line

我在尝试从 cmd 或命令行运行 python 程序时遇到了一些困难。当我双击 python 程序时，它显示 cmd 几秒钟，实际上不到 3 秒，然后 cmd 消失了。我只能通过右键单击它然后在空闲编辑并运行模型命令来运行。仅来自 python shell。以及如何为 python shell 提供查找应用程序的路径，例如只需键入程序名称即可运行。python有GUI作为exe程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T11:07:10.560

首先确保 python.exe 在你的[路径](http://www.computerhope.com/issues/ch000549.htm)中。
然后在命令提示符下输入 ( `cmd`)`python "path\to\program.py"`

如果您只想输入程序名称，您有两个选择。

1.  将包含您的程序的文件夹添加到您的路径中。
2.  按住 shift 右键单击​​文件夹，然后单击“在此处打开命令提示符”

# objective-c - 如何在目标 c 中正确地对我的查询进行 SQL 注入证明

> ID：11483235
> 
> 赞同：4
> 
> 时间：2012-07-14T11:04:21.763
> 
> 标签：objective-c, xcode, sqlite, xcode4.3

我的目标 c 代码中有一个函数，它使用用户在文本字段中输入的注释更新 SQLite 表列。我想确保我正确地执行此操作，以便没有安全问题或一般问题。这是我的代码，我可以做些什么来使它更安全，还是已经可以了？

```
sqlite3_stmt *stmt=nil;
sqlite3 *cruddb;

//insert
const char *sql = "UPDATE Peaks SET notes=? where ID=?";

//Open db
sqlite3_open([path UTF8String], &cruddb);
sqlite3_prepare_v2(cruddb, sql, -1, &stmt, NULL);
sqlite3_bind_text(stmt, 1, [self.viewNotes.text UTF8String], -1, SQLITE_TRANSIENT);
sqlite3_bind_int(stmt, 2, [self.detailItem ID]);

sqlite3_step(stmt);
sqlite3_finalize(stmt);
sqlite3_close(cruddb); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T11:10:30.287

您已经是 SQL 注入安全的，因为您通过**sqlite3_bind_text**和**sqlite3_bind_int**传递用户输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T11:12:24.780

好问题！看起来你已经通过绑定你的值做了正确的事情，而不是做一些愚蠢的事情，比如使用`[NSString stringWithFormat]`构造 SQL 语句。

# javascript - 找到两个 dom 元素的差异然后使它们相同

> ID：11483236
> 
> 赞同：3
> 
> 时间：2012-07-14T11:04:23.310
> 
> 标签：javascript, html, dom

如果我有两个元素：

**元素 A：**

```
<div id="myID">
  <div id="a"></div>
  <div id="b"><div id="ba"></div></div>
  <div id="c"><span id="ca"></span></div>
</div> 
```

和**元素 B：**

```
<div id="myID">
  <div id="a"></div>
  <div id="b"><div id="ba"></div></div>
  <div id="c"><span id="ca"></span></div>
  <div id="d"></div>
</div> 
```

**是否有可能找出`Element B`具有比 更多的孩子`Element A`，然后找到附加元素并在其中创建它`Element A`？**

*PS：在实际代码中，新元素已加载`Ajax Request`，但我不想用加载的内容替换所有内容，我只需要添加新内容并跳过现有内容。*

*PSS：在我当前的代码中，我有 Md5 校验和来检查新内容是否与现有内容不同，但如果新内容只有很少的变化，它会替换所有内容，这对我来说是个问题。*

***我当前的一段代码：***

```
 window.processResponse = function(data) {
    // Note : "data" is Ajax responseText;
    if(!data) return false;
    var $data = document.createElement("div");
    $data.innerHTML = data;
    var em = $data.getElementsByTagName("*");
    for(var i = 0; i < em.length; i++)
    {
      var parent = sget(em[i].id); // sget function is : document.getElementById
      if(parent) 
      {
        var html = em[i].innerHTML.replace(/(\s)+/gim, "").replace(/(\n|\r\n)+/gim, "");
        var id = em[i].id;
        savedPages[id] = savedPages[id] || [];
        var _md5 = md5(html);
        if(savedPages[id][0] == _md5) continue;
        savedPages[id] = [_md5, getTime()];
        parent.innerHTML = em[i].innerHTML;
      }
      if(em[i].tagName === "SCRIPT") 
      {
        var code = em[i].innerHTML.replace(/(\s)+/gim, "").replace(/(\n|\r\n)+/gim, "");
        var id = em[i].id;
        savedPages[id] = savedPages[id] || [];
        var _md5 = md5(code);
        if(savedPages[id][0] == _md5) continue;
        savedPages[id] = [_md5, getTime()];
        try{eval(em[i].innerHTML)}catch(ex){log(ex)};
      }
    }
  }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T11:51:51.537

因此，您可以对其进行优化，但这也取决于您在哪个浏览器中运行此代码。我假设如下：

*   所有 ID 都是唯一的，您依赖它。您想比较具有相同 ID 的元素，而不是相同的结构。

*   正如您所说，所有孩子都有ID，并且您只想比较孩子 - 而不是嵌套节点

*   从服务器接收到的元素只有更多的子元素，不少。要删除孩子，您必须添加一些其他代码。

*   因此，如果您有相同数量的孩子，我们假设它们是相同的（优化）。如果这不是真的，那么您还必须执行删除子项

话虽如此，我相信这种东西更适合服务器端，应该只将实际修改的部分发送给客户端。这就是我们通常所做的——或者，如果我们不在乎，就替换所有东西。

```
 var div = document.createElement('div');
  div.innerHTML = s;

  var root = div.firstChild;
  var children = root.children;

  var documentRoot = document.getElementById(root.id);

  if (documentRoot && documentRoot.children.length < children.length) {
    var node = null;
    var previousNode = null;
    var index = 0;

    while ( node = children[index++] ) {
      var documentNode = document.getElementById(node.id);

      if (!documentNode) {
        if (previousNode)
          documentRoot.insertBefore(node, previousNode.nextSibling);
        else
          documentRoot.insertBefore(node, documentRoot.firstChild);

        documentNode = node;
      }

      previousNode = documentNode;

    }

    previousNode = null;

  } else {
    // probably append as is somewhere

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T11:40:58.950

解决方案并不是那么简单。如果父节点 myID 在样本 A 中不存在，但子节点在两个样本中，表明 DOM 中有 3 层需要比较和调整，该怎么办？你会如何比较这个：

```
<div id="papa">
    <div id="myID">
        <div id="a"></div>
        <div id="b">
            <div id="ba"></div>
        </div>
        <div id="c">
            <span id="ca"></span>
        </div>
    </div>
</div> 
```

对比

```
<div id="papa">
    <div id="a"></div>
    <div id="b">
        <div id="ba"></div>
    </div>
    <div id="c">
        <span id="ca"></span>
    </div>
</div> 
```

在这种情况下，比较变得更加复杂。您实际上需要一个具有合并功能的完全充实的 XML/HTML 语言感知差异实用程序。您可以使用[Pretty Diff](http://prettydiff.com/)来演示这会变得多么复杂，但不幸**的是它没有合并功能**，因此它不能成为您问题的完全自动化解决方案。

# ms-access - Access 2007 - 在表单上显示 PDF 内容

> ID：11483237
> 
> 赞同：3
> 
> 时间：2012-07-14T11:04:26.460
> 
> 标签：ms-access

在 Access 2007 上，有没有办法在表单上显示 PDF 的内容，即使它只是第一页？此 PDF 作为附件保存在表格中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T14:16:34.170

免责声明：此答案仅适用于作为单独文件存储在数据库之外的 PDF 文件。它们可以通过网络连接定位，但我不知道如何直接从您的数据库表中访问它们。该[站点提供了使用附件的详尽指南](http://www.cimaware.com/resources/article_135.html)，但没有说明如何实际自动显示它们。这可能是 Access 未提供的功能。

`Microsoft Web Browser`您可以使用控件显示 Internet Explorer 可以显示的任何内容。

添加控件后，您可以导航到要在表单的加载或打开事件期间显示的任何内容。

例如，如果调用控件，`WebBrowser0`则以下操作将起作用：

```
Private Sub Form_Load()
    Me.WebBrowser0.Navigate2 "C:\example.pdf" 'Substitute the actual address here.
End Sub 
```

这是一种非常通用的方法，用于在 Access 中显示其他内容。您可以在此处找到更多信息[。](http://msdn.microsoft.com/en-us/library/aa752041%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T19:01:30.087

我所知道的用于预览 PDF 的唯一两种方法（Daniel 建议的 WebBrowser 和 Adob​​e Active X 控件）需要将文件路径传递给控件。

我建议从附件字段中提取文件并将其保存到临时位置，例如`C:\Documents and Settings\username\AppData`. 这可以通过使用 vba`Environ`命令找到。

使用嵌入式 DAO 记录集中的方法提取文件`SaveToFile`（这是附件在内存中存储的方式）。

### 示例代码

*假设每条记录都有一个名为的字段* `AttachedFile` *，并且每条记录只有一个附加的 PDF。表单正在使用名为* `PreviewBrowser` *查看 PDF的 WebBrowser 控件*

```
Private Sub Form_Current()
On Error GoTo ExitSub
    Dim FormRS As DAO.Recordset
    Set FormRS = Me.Recordset

    Dim RecAtt As DAO.Recordset

    If (Me.AttachedFile.AttachmentCount > 0) Then
        Set RecAtt = FormRS.Fields("AttachedFile").Value
        RecAtt.OpenRecordset

        Dim Path As String
        FilePath = Environ("APPDATA") & "\Preview.pdf"

        If (Dir(FilePath) <> "") Then Kill FilePath
        RecAtt.Fields("FileData").SaveToFile FilePath
        Me.PreviewBrowser.Navigate2 FilePath
    End If

ExitSub:
    RecAtt.Close
End Sub 
```

当然，如果给定记录有多个附件，则代码需要稍微复杂一些，但这可以通过操作`RecAtt`记录集来完成。

# jquery - jQuery 大写文本输入

> ID：11483241
> 
> 赞同：0
> 
> 时间：2012-07-14T11:04:55.723
> 
> 标签：jquery

我需要创建一个具有以下功能的大写 jQuery 插件：

*   自动大写每个单词
*   当用户按下退格键时，他仍然可以更正字符，例如他键入“John Mayer”，但他决定“Mayer”不应该是大写字母，因此他将其更改为“mayer”带退格键。

到目前为止我尝试了什么：

```
field.on('keyup change', function(e){
  var val = field.val();

  field.val(val.replace(/^(.)|\s(.)/g, function($1){ return $1.toUpperCase( ); }));
}); 
```

问题是，正则表达式解析整个值，但只应解析键入的新字符。

谢谢阅读

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T11:47:02.523

像这样的东西，我认为它可以工作，尽管当我在笔记本电脑上按退格键时我似乎没有得到键码：S

这个想法是您从文本创建一个数组，操作最后一个单词`lword`（数组的最后一个元素）然后将数组作为字符串放回输入框/文本区域

```
$('input')​.keypress(function(e) {
    var $t = $(this);
        key = e.keyCode,
        txt = $t.val().split(' '),
        lword = txt[(txt.length - 1)];

    function replace() {
        txt[(txt.length - 1)] = lword;
        $t.val(txt.join(' '));
    }

    function undo() {
        lword = lword.toLowerCase();
        replace();
    }

    function capitalize(n) {
        lword = lword.charAt(n).toUpperCase() + lword.slice(n+1);
        replace();
    }

    if (key === 8) {
        undo();
    } else if (key === 32) {
        capitalize(0);
    }

});​​​ 
```

[演示](http://jsfiddle.net/dafastestfingers/u4pxA/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T05:57:58.583

自动资本化每个世界的第一个世界

```
//usage
$("input").keyup(function() {
toUpper(this);
});

//function
function toUpper(obj) {
var mystring = obj.value;
var sp = mystring.split(' ');
var wl=0;
var f ,r;
var word = new Array();
for (i = 0 ; i < sp.length ; i ++ ) {
f = sp[i].substring(0,1).toUpperCase();
r = sp[i].substring(1).toLowerCase();
word[i] = f+r;
}
newstring = word.join(' ');
obj.value = newstring;
return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T20:45:11.650

这在 Chrome 中效果很好，但不幸的是，这在 Firefox 中似乎并不可靠。我能够解决这个使用模糊的解决方案。似乎适用于所有浏览器。

**HTML**

```
<label>Address 1</label>
<input name="addressaddress1" id="addressaddress1" value=""
size="25" />

<label>Address 2</label>
<input name="addressaddress1" id="addressaddress1" value=""
size="25" /> 
```

**Javascript**

```
$.fn.capitalize = function (e) {
    $.each(this, function () {
        if( $('body').data(this.id) != this.value )
        {
            var split = this.value.split(' ');
            for (var i = 0, len = split.length; i < len; i++) {
                split[i] = split[i].charAt(0).toUpperCase() + split[i].slice(1);
            }
            this.value = split.join(' ');
        }
    });

    return this;
};

$('[id^=address]').on('blur', function (e) {
    $(this).capitalize();
}); 
```

[http://jsfiddle.net/bsegovia/V4ATc/31/](http://jsfiddle.net/bsegovia/V4ATc/31/)

更新！！这个先前的解决方案没有解决所有大写输入。请参阅此 jsfiddle 以获取更正的脚本。[http://jsfiddle.net/bsegovia/V4ATc/](http://jsfiddle.net/bsegovia/V4ATc/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T15:14:08.210

经过一番挣扎后，我自己修复了它，但这是我的解决方案：

```
var doCap = false;

$('input').keydown(function(e) {
    var input = $(this);
    var val = input.val();

    if(doCap){
        var lastVal = val.substr(val.length - 1);

        if(lastVal !== " "){
            input.val(val.substring(0, val.length - 1) + lastVal.toUpperCase());
            doCap = false;
        }
    }
});

$('input').keypress(function(e){
    var input = $(this);
    var key = e.keyCode;
    var val = input.val();

    // Capitalize first character ever typed.
    if(val.length === 1){
        input.val(val.substr(0, 1).toUpperCase() + val.slice(1));
    }

    if(key === 32){

        // Prevent double spaces.
        if(val.substr(val.length - 1, 1) === " "){
            return false;
        }

        doCap = true;
    }
});​ 
```

[http://jsfiddle.net/u4pxA/4/](http://jsfiddle.net/u4pxA/4/)

感谢所有的反馈，帮助。

# c++ - Bitblt，createdibsection，图像损坏

> ID：11483249
> 
> 赞同：1
> 
> 时间：2012-07-14T11:06:13.667
> 
> 标签：c++, bitblt, createdibsection

嗨，我正在尝试捕获屏幕截图，但图像已损坏，任何人都可以看到代码有什么问题，基本上我正在尝试使用 createdibsection，因此我可以直接访问这些位。

这是生成的图片的样子 [http://oi47.tinypic.com/33c4zko.jpg](http://oi47.tinypic.com/33c4zko.jpg)

```
bool FrameData::Create(int width, int height, ImageFormat imgFormat, HWND sourceWindow)
{
if(width < 0)
    return false;

srcWndDC = GetDC(sourceWindow);
hdc = CreateCompatibleDC(srcWndDC);

if(hdc == nullptr || srcWndDC == nullptr)
{
    return false;
}

memset(&bmpInfo, 0, sizeof(BITMAPINFO));
bmpInfo.bmiHeader.biSize = sizeof(BITMAPINFOHEADER);
bmpInfo.bmiHeader.biWidth = width;
bmpInfo.bmiHeader.biHeight = -height; // top-down
bmpInfo.bmiHeader.biPlanes = 1;
switch(imgFormat)
{
case ImageFormat::RGB16:
        bmpInfo.bmiHeader.biBitCount = 16;
        break;
    case ImageFormat::RGB24:
        bmpInfo.bmiHeader.biBitCount = 24;
        break;
    case ImageFormat::RGB32:
        bmpInfo.bmiHeader.biBitCount = 32;
        break;
    default:
        return false;

}
bmpInfo.bmiHeader.biCompression = BI_RGB;
bmpInfo.bmiHeader.biSizeImage = height * width * imgFormat;
hBitmap = CreateDIBSection(srcWndDC, &bmpInfo, DIB_RGB_COLORS, (void**)&bits, NULL, NULL);

if(hBitmap == nullptr)
{
    return false;
}

return true;

}

bool FrameData::SaveFrameToFile(std::string& filename)
{
BITMAPFILEHEADER bmpFileHdr = {0};

bmpFileHdr.bfSize=sizeof(BITMAPFILEHEADER)+sizeof(BITMAPINFOHEADER)+bmpInfo.bmiHeader.biSizeImage;
bmpFileHdr.bfType='MB';
bmpFileHdr.bfOffBits=sizeof(BITMAPFILEHEADER)+sizeof(BITMAPINFOHEADER);

std::ofstream outfile;
outfile.open(filename);

if(!outfile.is_open())
{
    return false;
}

outfile.write((char*)&bmpFileHdr, sizeof(BITMAPFILEHEADER));
outfile.write((char*)&bmpInfo.bmiHeader, sizeof(BITMAPINFOHEADER));
outfile.write((char*)bits, bmpInfo.bmiHeader.biSizeImage);
outfile.close();
return true;
} 
```

这就是代码，然后我只是用它来捕获屏幕

```
 SelectObject(data.GetHDC(), data.GetHBitmap());
 BitBlt(data.GetHDC(),0,0,data.GetWidth(), data.GetHeight(),           data.GetSourceWindowDC(),0,0 , SRCCOPY | CAPTUREBLT); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T15:35:24.040

没有时间检查位图结构初始化的所有详细信息，但请尝试`outfile.open(filename, ios_base::out + ios_base::bin);`代替`outfile.open(filename);`，否则所有 0x0A 字节（'\n' 或 LineFeed）都将替换为 0x0D（'\r' 或 CarriageReturn），然后是 0x0A（2字节 MS-DOS/Windows 文本文件行尾序列）！

另外我认为`bmpInfo.bmiHeader.biSizeImage`应该是这样的`height * 4 * (((width * bmpInfo.bmiHeader.biBitCount) + 0x1F) / 0x20)`（每行像素必须是 32 位对齐的，导致每行末尾最多有 3 个未使用的填充字节，对于 RGB32 格式无关紧要）。

# ruby-on-rails - 使用 rspec 进行错误测试路由

> ID：11483254
> 
> 赞同：1
> 
> 时间：2012-07-14T11:07:11.447
> 
> 标签：ruby-on-rails, unit-testing, rspec, tdd

我有这个资源`config/routes.rb`

```
resources :users, :path => "u" do
 resources :boards, :controller => 'users/boards', :path => "collections"
end 
```

在我的`spec/routing/boards_routing_spec.rb`我有：

```
require "spec_helper"

describe Users::BoardsController do
  describe "routing" do

    it "routes to #index" do
      get("/u/:user_id/collections").should route_to("users/boards#index")
    end

  end
end 
```

我得到下一个错误：

```
Failures:

  1) Users::BoardsController routing routes to #index
     Failure/Error: get("/u/:user_id/collections").should route_to("users/boards#index")
       The recognized options <{"action"=>"index", "controller"=>"users/boards", "user_id"=>":user_id"}> did not match <{"controller"=>"users/boards", "action"=>"index"}>, difference: <{"user_id"=>":user_id"}>.
       <{"controller"=>"users/boards", "action"=>"index"}> expected but was
       <{"action"=>"index", "controller"=>"users/boards", "user_id"=>":user_id"}>.
     # ./spec/routing/boards_routing_spec.rb:7:in `block (3 levels) in <top (required)>' 
```

我正在为用户使用 Devise 2.0。

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T11:27:50.917

错误已修复：

```
require "spec_helper"

describe Users::BoardsController do
  describe "routing" do

    it "routes to #index" do
      get("/u/hyperrjas/collections").should route_to("users/boards#index", :user_id => "hyperrjas")
    end
end 
```

# jquery - 点击后jQuery淡入新背景

> ID：11483258
> 
> 赞同：0
> 
> 时间：2012-07-14T11:07:45.450
> 
> 标签：jquery, image, background, fadein

堆栈上有类似的线程，但我没有找到适合我的线程。

我有身体背景，我想在点击后更改。

```
$('#start').click(function(){
    $(this).fadeOut('slow');
    $('#help').fadeOut('slow');
    $('#exit').fadeOut('slow');

    setTimeout(function(){
             $('body').css('background-image','url(media/note.jpg)');
    },500);
}); 
```

所以，我想要新的背景`fadeIn`。我已经尝试以我能想到但没有运气的所有可能方式添加它。

有没有办法这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T11:42:50.873

您可以使用 jQuery UI 库延迟添加一个类，如下所示：

```
$(document).ready(function() {
    $("#start").click(function () {
        $(this).fadeOut('slow');
        $('#help').fadeOut('slow');
        $('#exit').fadeOut('slow');
        $('body').addClass("note", 1000);
    });
}); 
```

​ 类“note”看起来像：

```
​.note{
    background-image:url('media/note.jpg');
    /*more styling if you like */
}​ 
```

要使用 jQuery UI 库，请确保将以下脚本添加到您的 html HEAD 标记：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<script src="http://ui.jquery.com/latest/ui/effects.core.js"></script> 
```

看看这个 jsFiddle 的例子：[点击](http://jsfiddle.net/BccTG/)！

# jquery - 如何使用jquery使背景图像淡入

> ID：11483262
> 
> 赞同：1
> 
> 时间：2012-07-14T11:08:15.623
> 
> 标签：jquery, html, css, fade, fadein

我有这行 css 用于在悬停时会淡入的图像：

```
#social-links a:hover span  { background: url("/images/hover-light.jpg") no-repeat scroll -4px 42px transparent; } 
```

它有效，现在我想从 jquery 中添加淡入淡出效果。有多个`spans`，所以我假设我必须使用标识符`this`，但我有一段时间没有使用 jquery 并且不记得了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T11:15:45.653

```
$('#social-links a').mouseleave(
   function() {
     $(this)  // anchor tag from which mouseleave happen
       .find('span')
       .css({ 'background': 'your background css' })
}); 
```

`fadeIn()`你可以这样做：

```
$('#social-links a').mouseleave(
   function() {
     $(this)  // anchor tag from which mouseleave happen
       .find('span')
       .fadeIn();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T12:43:37.217

这是背景图像褪色的完美示例。只需稍加修改，它就非常适合您的目的。

[http://www.jasperrooswinkel.com/smooth-fullscreen-background-slideshow-in-jquery/](http://www.jasperrooswinkel.com/smooth-fullscreen-background-slideshow-in-jquery/)

# operating-system - 操作系统如何处理上下文切换？

> ID：11483263
> 
> 赞同：6
> 
> 时间：2012-07-14T11:08:23.867
> 
> 标签：operating-system, scheduled-tasks, rtos

据我所知，每个操作系统都需要有一些机制来定期检查它是否应该运行某些任务并暂停其他任务。

一种方法是某种计时器，操作系统将在其到期时检查它是否应该运行/暂停某些任务。

一般来说，比如说在可能是某种 ISR 的 ARM 系统上。

我真正的问题是，我只能将其可视化，而在某处看不到它。有人可以指出一些免费/开放的 RTOS 代码，我实际上可以在其中看到处理抢占/调度的代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T01:08:22.450

[freertos.org](https://freertos.org/)。整个操作系统都是开源的，就在那里供您查看。并且有几十个不同的端口可以比较和对比。对于上下文切换代码，您需要查看 ports 目录，在称为 port.c、port.asm 等的许多文件中的任何一个文件中。是的，在 freertos 的情况下，所有上下文切换都是在中断中执行的（a滴答计时器 ISR 或任何其他 SysCall 中断）。

上下文切换是非常特定于处理器的，因为要保存的寄存器列表和保存它们的汇编代码在处理器系列之间有所不同，有时在给定系列中也会有所不同。因此，每个端口都有一个用于此代码的单独文件。

另一方面，调度（选择要运行的下一个任务）是在一个名为[tasks.c](https://github.com/FreeRTOS/FreeRTOS/blob/master/FreeRTOS/Source/tasks.c)的文件中完成的，该文件对所有端口都是通用的，并引用特定于端口的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T08:09:55.477

并非 RTOS 只是周期性地进行上下文切换——这就是大多数 GPOS 的工作方式。在 RTOS 中，调度程序在任何调度事件上运行。这些包括系统滴答，但也包括消息发布、事件触发器、信号量提供或互斥解锁等。

在 ARM Cortex-M 上，[CMSIS 3.x](http://www.arm.com/products/processors/cortex-m/cortex-microcontroller-software-interface-standard.php)包括一个 RTOS API（主要用于 RTOS 开发人员，而不是完整的 RTOS 本身），其源代码将包括上下文切换机制。

如果您想要一个简单 RTOS 的详细描述，您可以考虑阅读[µC/OS-II：实时内核](http://micrium.com/page/products/books/os-ii-book)或更复杂的[µC/OS-III：实时内核](http://micrium.com/page/products/books/os-iii-books)。

[FreeRTOS](http://www.freertos.org/)越来越受欢迎，尽管在架构上可能有点不合常规。一个更完整（因为它不仅仅是一个调度内核，而是一个更完整的操作系统）和非常强大的选项是[eCos](http://ecos.sourceware.org/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T14:29:46.650

你可以看看[xv6](http://pdos.csail.mit.edu/6.828/2011/xv6.html)。
它不是 RTOS，它只是一个用于学术目的的骨架 OS（基于 V6 unix）。
在 XV6 的[书](http://pdos.csail.mit.edu/6.828/2011/xv6/book-rev6.pdf)看第 4 章，有关于如何在像 xv6 这样的小型操作系统上完成调度的解释和代码。XV6 在等待磁盘或某些 I/O 操作时使进程进入睡眠状态，还有每 100 毫秒的定时器中断来切换一个进程。
还有关于上下文切换如何发生的代码解释，保存了哪些信息（进程的上下文框架），当调度程序必须运行时如何从用户模式切换到内核模式。
最好的部分是你必须做的阅读量来理解这些概念与一些关于操作系统的参考书不同:) 代码相对较小，你可以在 qemu 上运行 XV6 设置断点在 sched ， swtch 和其他功能并实际查看上下文切换期间保存的信息。（如何在此[链接](http://www.cse.iitd.ernet.in/~sbansal/csl373/tools.html)中运行 xv6 ）
您无需阅读前面的章节即可理解第 4 章。没有太大的依赖关系，xv6使用struct proc来标识一个进程，ptable代表系统中所有当前运行的进程，proc->conext - 指进程所处的状态（寄存器值等），这个由调度器保存. 干杯:)

# ruby-on-rails-3 - 设计/omniauth - 找不到动作“facebook”

> ID：11483274
> 
> 赞同：12
> 
> 时间：2012-07-14T11:10:36.487
> 
> 标签：ruby-on-rails-3, devise, omniauth

我正在尝试按照[本指南在我的应用程序中实现 facebook 身份验证](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview)

我已按照所有步骤操作，但在登录后出现以下错误。

```
Unknown action

The action 'facebook' could not be found for Devise::OmniauthCallbacksController 
```

我在控制器/用户中创建了omniauth_callbacks_controller 文件。它定义了一个 facebook 方法。知道我应该如何调试吗？

* * *

添加我的路线文件 -

```
Myapp::Application.routes.draw do
  get "static_pages/home"

  get "static_pages/help"

  get "static_pages/about"

  devise_for :users do
    resources :posts

  end

  root :to => 'static_pages#home'

  devise_for :users, controllers: {omniauth_callbacks: "omniauth_callbacks"}
end 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-14T15:22:40.870

如果您查看指南，它会为您的路线文件指定这一行：

```
devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks" } 
```

你在哪里：

```
devise_for :users, controllers: {omniauth_callbacks: "omniauth_callbacks"} 
```

看到不同？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-31T19:23:10.810

我假设您的用户将能够登录和注销、编辑个人资料、注册 facebook 或注册电子邮件，如果您愿意，您也可以添加 Confirmable 进行设计。您应该在用户表中有额外的列。就像首先在您的用户模型中添加额外的字段一样。

`rails g migration AddFieledsToUser provider:string uid:string image:string`

然后运行`rails db:migrate`

检查您的用户表，确保上面有这 3 列

此外，我假设您已经正确配置了 initializers/devise.rb，如下所示：`config.omniauth :facebook, 'APP_ID', 'APP_SECRET_KEY', scope: 'email', info_fields: 'email, name'`在您正确创建了 facebook 应用程序之后。还假设您已经`omniauth_callbacks_controller.rb`根据 gems`gem 'omniauth', '~> 1.6'`和`gem 'omniauth-facebook', '~> 4.0'`gem 文件成功地创建和配置了您的。只要确保您已完成所有这些步骤。

在您的 routes.rb 中，您可以添加以下内容：

```
devise_for :users,
         path: '',
         path_names: {
           sign_in: 'login',
           sign_out: 'logout',
           edit: 'profile',
           sign_up: 'registration'
         },
         controllers: {
           omniauth_callbacks: 'omniauth_callbacks',
         } 
```

我认为这是你错过的部分。您也可以随意命名路线。只是说。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-07T23:40:44.003

我在教程中遇到了类似的问题。在 users/omniauth_callbacks_controller.rb 中检查 facebook 中 F 的大小写我使用的是大写的“Facebook”，但它正在寻找小写的“facebook”

# android - 如何从静态函数向处理程序发送消息？

> ID：11483275
> 
> 赞同：5
> 
> 时间：2012-07-14T11:10:42.587
> 
> 标签：android

我知道，这又是一个重复的问题，但我的情况是不同的问题。

我有一个带有静态函数和处理程序的类 abc。早些时候我无法从静态函数调用处理程序。然后我用谷歌搜索**从静态函数访问非静态函数**并发现解决方案是创建类的实例并访问非静态变量。但是现在，为什么，我得到了这个错误。

**`E/AndroidRuntime(13343): java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()`**

```
public class abc
 {    
    static public void Instantiate()
    {
         abc xyz = new abc();
         xyz.handler.sendEmptyMessage(1);      **//GETTING ERROR IN THIS LINE**
    }

    public Handler handler = new Handler() 
        {
                public void handleMessage(Message msg) 
                {
                        switch (msg.what)
                        {
                        }
                 }
        }

} 
```

**我的问题：如何从静态函数向*处理程序发送消息？***

**谢谢。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T08:33:52.577

检查您执行此操作的位置：

```
abc.Instantiate(); 
```

并将其替换为

```
runOnUiThread(new Runnable() {

    @Override
    public void run() {
        abc.Instantiate();
    }
}); 
```

我希望你是从一个活动中调用它

***一些解释（****引用* ***bicska88）:)***

* * *

`Handler`导致问题的原因与您从静态函数中向对象发送消息这一事实没有任何关系。问题是您从尚未调用的线程向处理程序发送消息`Looper.prepare()`（如错误消息所述，该线程没有**`message loop`**）。这可以通过显式调用`Looper.prepare()`before-while 或通过在 UIThread 上运行代码来解决。

* * *

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T08:33:25.617

尝试将处理程序定义为

```
final static Handler handler = new Handler() { ... }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T09:42:06.683

`Handler`导致问题的原因与您从静态函数中向对象发送消息这一事实没有任何关系。问题是您从尚未调用的线程向处理程序发送消息`Looper.prepare()`（如错误消息所述，该线程没有**`message loop`**）。要解决此问题，请执行以下操作：

```
public class abc
{    
    public Handler handler;

    static public void Instantiate()
    {
        abc xyz = new abc();
        Looper.prepare();
        handler = new Handler() 
        {
            public void handleMessage(Message msg) 
            {
                switch (msg.what)
                {

                }
            }
        }
        xyz.handler.sendEmptyMessage(1);
        Looper.loop();
    }
} 
```

可以在[此](http://developer.android.com/reference/android/os/Looper.html)链接中找到文档。

# php - php 和 MYSQL 插入错误

> ID：11483277
> 
> 赞同：0
> 
> 时间：2012-07-14T11:10:57.580
> 
> 标签：php, mysql

我目前处于在这行代码中找不到任何错误的情况。我正在尝试使用 PHP 将几个数据添加到 mysql 数据库。

当我尝试注册某人时，它会收到“您的 SQL 语法有错误；请检查与您的 MySQL 服务器版本相对应的手册，以在第 5 行的 '', 'geo')' 附近使用正确的语法”。“geo”是单选组元素的值。

```
<?php
if($_GET["regname"] && $_GET["regemail"] && $_GET["regpass1"] 
   && $_GET["regpass2"]&& $_GET["regfamilyname"] 
   && $_GET["reggivenname"] && $_GET["radioGroup"] )
{
    if($_GET["regpass1"]==$_GET["regpass2"])
    {
       $servername="localhost";
       $database="aaa";
       $username="bbbb";
       $password="cccc";

       $conn=  mysql_connect($servername,$username, $password) 
               or die(mysql_error());
       mysql_select_db($database,$conn);

       $sql="INSERT INTO users (username,password,familyname, 
             email, givenname, is_admin, created_time, category) values 
             ('" . $_GET["regname"] . "', '" .$_GET["regpass"]. "', '" 
             .$_GET["regfamilyname"]. "','" .$_GET["regemail"]. "', '" 
             .$_GET["reggivenname"]. "', '0', NOW()', '" 
             .$_GET["radioGroup"]. "')";

       $result=mysql_query($sql,$conn) or die(mysql_error());          
       print "<h1>You have registered sucessfully</h1>"; 
       print "<a href='index.php'>Go to login page</a>";
    }
    else print "Passwords doesnt match.";
}
    else print"Invalid data;";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T11:13:07.257

很难说，因为你没有提供错误信息。

我猜错误在这里：

```
$sql="INSERT INTO users (id,username,password,familyname, email, givenname, is_admin, created_time, category) values ('','$_GET["regname"]', '$_GET["regpass"]', '$_GET["regfamilyname"]', '$_GET["regemail"]', '$_GET["reggivenname"]', '0', NOW()', '$radiobutton')"; 
```

您正在将空字符串插入`id`列中。尝试修复它，通过删除`id`and `''`，还有一些与引号相关的问题：

```
$sql="INSERT INTO users (username,password,familyname, email, givenname, is_admin, created_time, category) values ('".$_GET["regname"]."', '".$_GET["regpass"]."', '".$_GET["regfamilyname"]."', '".$_GET["regemail"]."', '".$_GET["reggivenname"]."', '0', NOW(), '".$radiobutton."')"; 
```

这可能不起作用，因为您已将`id`归档定义为`int PRIMARY KEY`with `AUTO_INCREMENT`。

此外，您正在使用旧`mysql_*`函数，这会导致 sql 注入漏洞。您可以将 PDO 与准备好的语句一起使用。

**更新**：

*   [PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)
*   [MySQL 主 Ket auto_increment](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)
*   [PHP 报价](http://php.net/manual/en/language.types.string.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T11:18:12.210

问题是查询会中断，因为所有类似`'$_GET["regname"]'`which 的术语都会使用`"`. 如果你想这样做，你可以使用连接：

```
$sql="INSERT INTO users (username,password,familyname, 
email, givenname, is_admin, created_time, category) values 
('" . $_GET["regname"] . "', '" .$_GET["regpass"]. "', '" .$_GET["regfamilyname"]. "',
  '" .$_GET["regemail"]. "', '" .$_GET["reggivenname"]. "', '0', 
  NOW()', '" . $radiobutton. "')"; 
```

但更好的做法是使用[PDO。](http://php.net/manual/en/book.pdo.php)

**一个例子：**

```
$stmt = $dbh->prepare("INSERT INTO users (username,password,familyname, 
email, givenname, is_admin, created_time, category) values 
(:username,:password,:familyname,:email,:givenname,:is_admin,:created_time,:category)");

$taValues = array(
 'username'   =>  $_GET["regname"],
 'password'   =>  $_GET["regpass"],
 'familyname' =>  $_GET["regfamilyname"],
 'email'      =>  $_GET["regemail"],
 'givenname'  =>  $_GET["reggivenname"],
 'is_admin'   => '0',
 'created_time'  =>  NOW(),
 'category'      =>  $radiobutton
); 

PDOBindArray($stmt,$taValues);

$stmt->execute(); 
```

# c++ - 带有数据的空闲缓冲区

> ID：11483278
> 
> 赞同：0
> 
> 时间：2012-07-14T11:11:07.610
> 
> 标签：c++, qt

我使用此代码从 QTcpSocket 获取数据。我读取缓冲区中的数据，然后如果我立即释放它就可以了。但是如果我稍后释放它，应用程序就会崩溃。QtDocs 说我必须在使用方法 readBytes 后使用 delete[] 清理内存

```
void Widget::slotReadClient()
{
    QTcpSocket* pClientSocket = (QTcpSocket*)sender();
    QDataStream in(pClientSocket);
    in.setVersion(QDataStream::Qt_4_7);
    for (;;)
    {
        if (!m_nNextBlockSize)
        {
            if (pClientSocket->bytesAvailable() < sizeof(quint16))
            {
                break;
            }
            in >> m_nNextBlockSize;
        }
        if (pClientSocket->bytesAvailable() < m_nNextBlockSize)
        {
            break;
        }
      QString attribute;
     quint16 count=0;
      in>>count;//count of massives
     quint16 els=count;
     uint len=0;
     char** wkbs;
     if(count)
          wkbs=new char*[els];
     int j=0;
     char* buf=0;

      while(count)
      {
          in>>attribute;//description its ok
          buf=wkbs[j];
          buf=0;
          in.readBytes(buf,len);
          ui->plainTextEdit->appendPlainText(QString::number(len));//length of buffer ok
          j++;
          count--;
          processGeom(buf);//data is OK
          //delete [] buf; if I use this it works
      }
      ui->plainTextEdit->appendPlainText(QString::number(els));
      j=0;
      while(els)
      {
          buf=wkbs[j];
          delete[] buf;//here I get crash
          els--;
          j++;
      }
      delete[] wkbs;
      m_nNextBlockSize = 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T11:24:27.493

你从来没有为 分配任何东西`wkbs`，所以你正在尝试`delete[]`一个*未初始化*的指针！

```
buf=wkbs[j];
buf=0;
in.readBytes(buf,len); 
```

在这里，你分配了`buf`三遍！第一行绝对没有意义，因为`readBytes`会覆盖`buf`. 如果要保留分配的缓冲区，请将其存储在`wkbs`after `readBytes`：

```
in.readBytes(buf, len);
wkbs[j] = buf; 
```

接下来，您正在尝试：

```
buf=wkbs[j];
delete[] buf;//here I get crash 
```

使用您的原始代码，`wkbs[j]`未*初始化*，它的值可以是*任何东西*。删除此指针是不安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T11:24:39.703

```
 in.readBytes(buf,len);
      ui->plainTextEdit->appendPlainText(QString::number(len));//length of buffer ok
      j++;
      count--;
      processGeom(buf);//data is OK 
```

正确的。您应该调用`delete[]`从中获得的缓冲区`readBytes`。所以它当然有效。

```
 buf=wkbs[j];
      delete[] buf;//here I get crash 
```

对，因为这段代码没有意义。您正在对作为一个单元分配的数组的一个元素调用 delete。如果要单独释放元素，则必须单独分配它们。

想必，你想要的是这样的：

```
 in.readBytes(wkbs[j], len); 
```

这将存储使用in`readBytes`分配的缓冲区，让您可以随时访问它。`new[]``wkbs[j]``delete[]`

# android - Android 元素不显示

> ID：11483279
> 
> 赞同：1
> 
> 时间：2012-07-14T11:11:08.627
> 
> 标签：android, layout

我正在使用最新的 SDK完成[http://developer.android.com上的 MyFirstApp 教程。](http://developer.android.com)

我创建了一个 4.1 应用程序并设置了我的模拟器，LCD 密度为 213，VM 应用程序堆为 48，设备 RAM 大小为 512。分辨率为 720x1280。

当我第一次得到这个时，我在模拟器上闪现了“Android”。

我注意到我的布局 main.xml 没有默认创建，所以我自己在 res/layouts 中添加了它

我添加了以下 main.xml 和 strings.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >
    <EditText android:id="@+id/edit_message"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:hint="@string/edit_message" />
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_send" />
</LinearLayout>

<resources>
    <string name="app_name">My First App</string>
    <string name="edit_message">Enter a message</string>
    <string name="button_send">Send</string>
</resources> 
```

现在当我运行我的模拟器时，我只是得到一个黑屏。我的猜测是我没有正确添加 main.xml 或者我的 xml 文件中有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T12:16:40.797

通过在 Activity 的方法中使用以下 statemetn 将您的 XML 文件 (main.xml) 映射到您的 Activity `onCreate()`：

```
setContentView(R.layout.main); 
```

# c++ - 是否可以使用宏来创建类型定义？

> ID：11483281
> 
> 赞同：1
> 
> 时间：2012-07-14T11:11:41.237
> 
> 标签：c++, c

如何使用宏 (#define) 创建 typedef？

由于各种原因，我正在尝试使用宏在 C 中进行 typedef'ing。类似于 C++ 的模板行。

作为一个例子，我希望预处理器扩展`#define`和`typedef`其`struct`“内容”成员的类型为`char`：

```
#define DEFINE_FOO_TYPE(content_type__, content_type_name__) \
typedef struct {                                             \
        content_type__ content;                              \
} content_type_name__

DEFINE_FOO_TYPE(char, foo_t);

foo_t foo_var;
foo_var.content = 'g'; 
```

显然情况并非如此。是否有可能在 C 中做这些事情，或者是 C++ 模板的唯一方式？

抢占“为什么不使用 C++ 模板？”之类的问题。答案是我试图用 C 来做，因为它很有趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T11:16:37.657

试试这个：

```
#define DEFINE_FOO_TYPE(content_type__, content_type_name__) \
typedef struct {                                             \
    content_type__ content;                              \
} content_type_name__

DEFINE_FOO_TYPE(char, foo_t);

int main() {
    foo_t foo_var;
    foo_var.content = 'g';
    return 0;
} 
```

即使用`content_type_name__`而不是`element_type_name__`

[编译证明](http://ideone.com/0SBR1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T12:35:29.513

只需将最后两行代码放入 main() 或任何它肯定会工作的函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T18:02:54.557

我在评论中发帖是因为我认为这太琐碎了，但这里是：

> 当然，您不只是将引用的代码粘贴到 gcc 中，是吗？您不能只在任何函数之外执行代码。将最后一行放在函数中。

# android - 检查是否有 2 个实例正在运行

> ID：11483283
> 
> 赞同：0
> 
> 时间：2012-07-14T11:11:52.807
> 
> 标签：android

如果用户尝试再次输入它，我正在尝试检查我的应用程序是否已经在运行。如果一个应用程序启动另一个应用程序并且用户使用移动设备进入第二个应用程序，则可能是 2 个实例。

我启动原始应用程序的启动器应用程序如下所示：

```
 Intent i = new Intent(Intent.ACTION_MAIN);
  PackageManager manager = getPackageManager();

  i = manager.getLaunchIntentForPackage("com.test.vayo");
  i.addCategory(Intent.CATEGORY_LAUNCHER);
   startActivity(i); 
```

在我的原始代码中，我试图检查是否有 2 个实例，但在此代码上总是正确的

```
 if (processName == null) {
        return false;
    }
    ActivityManager manager = (ActivityManager) context.getSystemService(context.ACTIVITY_SERVICE);
    List<RunningAppProcessInfo> processes = manager.getRunningAppProcesses();
    for (RunningAppProcessInfo process : processes) {
        if (processName.equals(process.processName)) {

           return true;
        }
    }
    return false; 
```

proccessName 取自这段代码，pid 来自 android.os.Process.myPid()：

```
private String getAppName(int pID) 
```

{

```
String processName = "";
ActivityManager am = (ActivityManager)context.getSystemService(context.ACTIVITY_SERVICE);

List l = am.getRunningAppProcesses();
Iterator i = l.iterator();
PackageManager pm = context.getPackageManager();
while(i.hasNext()) 
{
      ActivityManager.RunningAppProcessInfo info = (ActivityManager.RunningAppProcessInfo)(i.next());
      try 
      { 
          if(info.pid == pID)
          {
              CharSequence c = pm.getApplicationLabel(pm.getApplicationInfo(info.processName, PackageManager.GET_META_DATA));
              //Log.d("Process", "Id: "+ info.pid +" ProcessName: "+ info.processName +"  Label: "+c.toString());
              //processName = c.toString();
              processName = info.processName;
          }
      }
      catch(Exception e) 
      {
            //Log.d("Process", "Error>> :"+ e.toString());
      }
 }
   return processName;
 } 
```

希望你能告诉我为什么我的第一个代码块总是正确的。多谢！！

# iphone - 收据验证失败

> ID：11483287
> 
> 赞同：1
> 
> 时间：2012-07-14T11:12:50.217
> 
> 标签：iphone, ios, verification, storekit, receipt

我正在尝试创建一个库，该库将验证 StoreKit 收据直接连接到 Apple 服务器，而无需 3rd 方服务器。这是可能的，因为 Apple 建议您首先针对生产服务器[http://buy.itunes.apple.com/verifyReceipt](http://buy.itunes.apple.com/verifyReceipt)进行验证，如果验证失败并显示代码 21007，请尝试沙箱服务器[https://sandbox.itunes.apple.com/验证收据](https://sandbox.itunes.apple.com/verifyReceipt)。

但是，我一直收到错误“无法连接到服务器”。对于生产服务器，或“网络连接丢失”。从沙盒服务器。

如果我使用 Hurl.it 将相同的确切帖子数据发送到任一 URL，我会得到正确的响应。

我是不是做错了什么，或者这只是被 Apple 阻止，**强迫**你使用中间人服务器来验证收据？如果是这样，为什么？

谢谢

马切伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:43:32.903

忘了这两行。现在都在工作。

```
[urlRequest setHTTPMethod:@"POST"];
[urlRequest setValue:[NSString stringWithFormat:@"%d", [[jsonString dataUsingEncoding:NSUTF8StringEncoding] length]] forHTTPHeaderField:@"Content-Length"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-08T01:29:40.413

我在模拟器上测试过类似的问题，结果是这样。[NSURLConnection GET 请求返回 -1005，“网络连接丢失”](https://stackoverflow.com/questions/25797339/nsurlconnection-get-request-returns-1005-the-network-connection-was-lost)

> 我的 Mac 有一个可用的互联网连接，而模拟器没有。重启模拟器解决了这个问题。

# git - 如何在 git 服务器端禁用压缩？

> ID：11483288
> 
> 赞同：12
> 
> 时间：2012-07-14T11:12:49.353
> 
> 标签：git

我有一个 repo 需要永远拉取，因为服务器的可用 RAM 很少，而且它交换了很多时间

```
remote: Compressing objects: 24% 
```

正在发生（即使我在服务器上本地克隆）。网络没有那么受限，所以发送所有未压缩的数据就可以了。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-14T13:46:30.113

从 git 文档：

> ```
>  core.bigFileThreshold  
> 
>     Files larger than this size are stored deflated, without
>     attempting delta compression.  Storing large files without
>     delta compression avoids excessive memory usage, at the
>     slight expense of increased disk usage.
> 
> Default is 512 MiB on all platforms.
> This should be reasonable for most projects as source code and other 
> text files can still be delta compressed, 
> but larger binary media files won't be.
> 
> Common unit suffixes of 'k', 'm', or 'g' are supported. 
> ```

所以我想通过将此值设置为 1 之类的值就可以了。

*由注释扩展：您可以使用`git config --add core.bigFileThreshold 1`命令进行设置。它也适用于裸回购。*

# java - ContentLength 在通过 http 请求读取时变为 -1

> ID：11483294
> 
> 赞同：0
> 
> 时间：2012-07-14T11:13:25.840
> 
> 标签：java, android

我正在读取从我的 android 应用程序中的 php 文件返回的**生成的 xml输出，如下所示**

```
URL u = new URL("http://www.abcdefg.com/hijklm/nopqr.php");
URLConnection uc = u.openConnection();
String contentType = uc.getContentType();
int contentLength = uc.getContentLength(); 
```

在 php 文件中，xml 是动态生成的。问题是**当 xml 的大小增加时 contentLength 的值变为 -1**。我观察到，当 xml 的大小增加超过 7kb 时 contentLength 变量的值包含-1。

我推断它可能会超出标头大小的限制，但不确定。谁能解释一下我应该怎么做才能阅读大型 xml 内容........？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T11:40:23.263

您在客户端看到的内容长度是在服务器端的标头中设置的。如果您看到`-1`这意味着回复中没有`Content-Length`标题。

我希望 PHP 端正在尝试`Content-Length`自动设置。如果文档小于~7kb，它可以将它全部保存在缓冲区中，然后发送具有实际大小的标题。如果大于该值，则缓冲区填满，并且输出代码被迫发送没有 Content-Length 的标头。

有两种可能的方法来解决这个问题。

*   在客户端，如果内容长度报告为`-1`. 这仅仅意味着没有`Content-Length`设置标题。即使您将另一端固定为始终设置标题，您也应该这样做。

*   在服务器端，*可能有*一种方法可以告诉 PHP 使用特定值作为内容长度。

# actionscript-3 - 如何重新启动对 flash as3 影片剪辑的引用？

> ID：11483299
> 
> 赞同：0
> 
> 时间：2012-07-14T11:14:09.527
> 
> 标签：actionscript-3, flash, movieclip

我使用各种带有movieClip按钮的movieClips-所有MC都是通过代码插入的，舞台上什么都没有。每次触发按钮的 eventListener 时，我都会调用下一个函数，在其中添加下一个movieClip，然后我想删除对我之前使用的 MovieClip 的引用。

更具体地说，我正在编写一个益智游戏，每次我进入游戏时，移动其中一个片段并按下 MovieClip 后退按钮，下次我进入同一个游戏时，我仍然会看到我离开它的片段，我想要电影剪辑重新开始到它的原始位置。我在这里做错了什么？不介意变量，这里的重点是当我点击每个功能时，我如何重新启动对我开始游戏时它们的引用？谢谢。

```
public function start1()
        {

                  //start screen

            addChild(first1);
            first1.start(button name).addEventListener(MouseEvent.CLICK, start); 

        }

    public function back1(even:MouseEvent)
{
removeChildAt(numChildren - 1); //want to remove who ever called back1
start1();
}

    public function start(even:MouseEvent)
{
       /choosing num of pieces

       removeChildAt(numChildren - 1); //want to remove first1
       addChild(level);
       level.back.addEventListener(MouseEvent.CLICK, back1);
       level.sixpieces.addEventListener(MouseEvent.CLICK, sixLevel);

}
  //level choosing
    public function sixLevel(even:MouseEvent)
{   
    removeChildAt(numChildren - 1); //want to remove level
     addChild(clevel);
      clevel.back.addEventListener(MouseEvent.CLICK, back1);
      clevel.easy.addEventListener(MouseEvent.CLICK, function(){Slevel=1;six(even);});
      clevel.med.addEventListener(MouseEvent.CLICK, function(){Slevel=2;six(even);});
      clevel.hard.addEventListener(MouseEvent.CLICK, function(){Slevel=3;six(even);});

}

//game itself
    public function six(even:MouseEvent)
{   
    num=6;
    row1=0;
    row2=1;
    row3=2;
    row4=3;

     removeChildAt(numChildren - 1);
      addChild(full1);

      if(Slevel==1)
      {
          full1.time1.visible=false;
          full1.full.visible=true;
        full1.frame1.visible=false;

      }
    else
     if(Slevel==2)
     {
         full1.full.visible=false;
          myTimer = new Timer(1000,60);
     }
     else
     if(Slevel==3)
     {
          full1.full.visible=false;
           myTimer = new Timer(1000,30);
     }
    if(Slevel!=1)
    {
        Slevel=4;

    }
    full1.back.addEventListener(MouseEvent.CLICK, back1);
    for(a=0;a<6;a++)
    {
        this.locarrs[3][a].addEventListener(MouseEvent.MOUSE_DOWN, Move);
        this.locarrs[3][a].addEventListener(MouseEvent.MOUSE_UP, stopMove);
    } 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:00:48.270

您可以在单击后保存原始位置和存储库，或者您可以每次创建和销毁影片剪辑。简单地再次添加到显示列表是不够的，因为它的位置保存在 mc 本身上。

# iphone - 图像的网格视图（从 url 加载）

> ID：11483301
> 
> 赞同：0
> 
> 时间：2012-07-14T11:14:56.593
> 
> 标签：iphone, ios, gridview

我已经在 xcode 中创建了网格视图的代码，现在我想将多个图像加载到网格视图中。如何在网格视图中加载多个图像，这些图像也应该从 url 加载。帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T14:07:28.107

从网络加载图像后怎么样（尝试使用SDWebImage在网上搜索）加载后您可以将其保存在NsDocumentDirectory中，然后将其加载到滚动视图缩略图中（开源代码：FGallery，GMGridView ..搜索它github）。（对不起，我使用 iPhone 的格式）

# rhomobile - 堆栈级别太深。我间歇性地收到此错误

> ID：11483304
> 
> 赞同：2
> 
> 时间：2012-07-14T11:15:22.173
> 
> 标签：rhomobile

我在 rhohub 上有一个 rhosync 应用程序。通常它可以正常工作，但间歇性地我会收到此错误。当我重新启动服务器时，它又可以正常工作了。

我试图在代码中找到递归，但无法做到。以下是日志：

```
2012-07-14T10:52:27+00:00 app[web.1]: /usr/ruby1.8.7/lib/ruby/gems/1.8/gems/thin-1.2.6/lib/thin/runner.rb:143:in `run!'
2012-07-14T10:52:27+00:00 app[web.1]: /usr/ruby1.8.7/bin/thin:19:in `load'
2012-07-14T10:52:27+00:00 app[web.1]: /usr/ruby1.8.7/lib/ruby/gems/1.8/gems/thin-1.2.6/bin/thin:6
2012-07-14T10:52:27+00:00 app[web.1]: /usr/ruby1.8.7/lib/ruby/gems/1.8/gems/thin-1.2.6/lib/thin/controllers/controller.rb:80:in `start'
2012-07-14T10:52:27+00:00 app[web.1]: /usr/ruby1.8.7/lib/ruby/gems/1.8/gems/thin-1.2.6/lib/thin/runner.rb:177:in `send'
2012-07-14T10:52:27+00:00 heroku[router]: GET rhohub-tombarnard-482dfc2a.rhosync.com/application?client_id=ad17fd1c118943dd95df11f62d2f36d2&p_size=2000&version=3&source_name=Devicecache dyno=web.1 queue=0 wait=0ms service=338ms status=500 bytes=20
2012-07-14T10:52:27+00:00 heroku[nginx]: 212.183.128.12 - - [14/Jul/2012:10:52:27 +0000] "GET /application?client_id=ad17fd1c118943dd95df11f62d2f36d2&p_size=2000&version=3&source_name=Devicecache HTTP/1.1" 500 20 "-" "rhodes-wm" rhohub-tombarnard-482dfc2a.rhosync.com
2012-07-14T10:52:39+00:00 app[web.1]: config.ru:15: warning: already initialized constant ROOT_PATH
2012-07-14T10:52:39+00:00 app[web.1]: [03:52:39 AM 2012-07-14] stack level too deep/app/.gems/gems/redis-2.2.2/lib/redis/connection/command_helper.rb:26:in `string_size'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/redis-2.2.2/lib/redis/connection/command_helper.rb:13:in `build_command'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/redis-2.2.2/lib/redis/connection/command_helper.rb:11:in `each'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/redis-2.2.2/lib/redis/connection/command_helper.rb:11:in `build_command'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/redis-2.2.2/lib/redis/connection/ruby.rb:58:in `write'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/redis-2.2.2/lib/redis/client.rb:139:in `process'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/redis-2.2.2/lib/redis/client.rb:138:in `each'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/redis-2.2.2/lib/redis/client.rb:138:in `process'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/redis-2.2.2/lib/redis/client.rb:137:in `process'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/redis-2.2.2/lib/redis/client.rb:250:in `ensure_connected'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/redis-2.2.2/lib/redis/client.rb:136:in `process'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/redis-2.2.2/lib/redis/client.rb:206:in `logging'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/redis-2.2.2/lib/redis/client.rb:46:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/redis-2.2.2/lib/redis.rb:157:in `get'
2012-07-14T10:52:39+00:00 app[web.1]: /usr/ruby1.8.7/lib/ruby/1.8/monitor.rb:242:in `synchronize'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/redis-2.2.2/lib/redis.rb:156:in `get'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rhosync-2.1.17/lib/rhosync/../rhosync/store.rb:114:in `get_value'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rhosync-2.1.17/lib/rhosync/../rhosync/source.rb:194:in `poll_interval'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rhosync-2.1.17/lib/rhosync/../rhosync/source.rb:269:in `if_need_refresh'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rhosync-2.1.17/lib/rhosync/../rhosync/source.rb:264:in `check_refresh_time'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rhosync-2.1.17/lib/rhosync/../rhosync/lock_ops.rb:8:in `lock'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rhosync-2.1.17/lib/rhosync/../rhosync/store.rb:214:in `lock'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rhosync-2.1.17/lib/rhosync/../rhosync/lock_ops.rb:7:in `lock'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rhosync-2.1.17/lib/rhosync/../rhosync/source.rb:268:in `if_need_refresh'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rhosync-2.1.17/lib/rhosync/../rhosync/source_sync.rb:63:in `do_query'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rhosync-2.1.17/lib/rhosync/../rhosync/source_sync.rb:57:in `process_query'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rhosync-2.1.17/lib/rhosync/../rhosync/client_sync.rb:32:in `send_cud'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rhosync-2.1.17/lib/rhosync/server.rb:243:in `GET /application'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rhosync-2.1.17/lib/rhosync/server.rb:153:in `catch_all'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rhosync-2.1.17/lib/rhosync/server.rb:241:in `GET /application'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/sinatra-1.3.2/lib/sinatra/base.rb:1211:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/sinatra-1.3.2/lib/sinatra/base.rb:1211:in `compile!'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/sinatra-1.3.2/lib/sinatra/base.rb:785:in `[]'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/sinatra-1.3.2/lib/sinatra/base.rb:785:in `route!'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/sinatra-1.3.2/lib/sinatra/base.rb:801:in `route_eval'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/sinatra-1.3.2/lib/sinatra/base.rb:785:in `route!'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/sinatra-1.3.2/lib/sinatra/base.rb:822:in `process_route'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/sinatra-1.3.2/lib/sinatra/base.rb:820:in `catch'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/sinatra-1.3.2/lib/sinatra/base.rb:820:in `process_route'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/sinatra-1.3.2/lib/sinatra/base.rb:784:in `route!'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/sinatra-1.3.2/lib/sinatra/base.rb:783:in `route!'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/sinatra-1.3.2/lib/sinatra/base.rb:783:in `each'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/sinatra-1.3.2/lib/sinatra/base.rb:886:in `dispatch!'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/sinatra-1.3.2/lib/sinatra/base.rb:719:in `call!'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/sinatra-1.3.2/lib/sinatra/base.rb:871:in `catch'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/sinatra-1.3.2/lib/sinatra/base.rb:871:in `invoke'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/sinatra-1.3.2/lib/sinatra/base.rb:871:in `invoke'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/sinatra-1.3.2/lib/sinatra/base.rb:719:in `call!'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rack-1.4.1/lib/rack/static.rb:66:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/sinatra-1.3.2/lib/sinatra/base.rb:705:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rhosync-2.1.17/lib/rhosync/../rhosync/stats/middleware.rb:19:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rack-protection-1.2.0/lib/rack/protection/xss_header.rb:22:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rhosync-2.1.17/lib/rhosync/../rhosync/body_content_type_parser.rb:26:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rack-1.4.1/lib/rack/static.rb:66:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rack-protection-1.2.0/lib/rack/protection/path_traversal.rb:16:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rack-protection-1.2.0/lib/rack/protection/base.rb:47:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rack-protection-1.2.0/lib/rack/protection/json_csrf.rb:17:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rack-protection-1.2.0/lib/rack/protection/xss_header.rb:22:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rack-1.4.1/lib/rack/nulllogger.rb:9:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rack-1.4.1/lib/rack/urlmap.rb:49:in `each'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rack-1.4.1/lib/rack/head.rb:9:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rack-1.4.1/lib/rack/urlmap.rb:64:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /home/heroku_rack/lib/static_assets.rb:9:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rack-1.4.1/lib/rack/urlmap.rb:49:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rack-1.4.1/lib/rack/builder.rb:134:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /home/heroku_rack/lib/last_access.rb:15:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rack-1.4.1/lib/rack/urlmap.rb:64:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rack-1.4.1/lib/rack/urlmap.rb:49:in `each'
2012-07-14T10:52:39+00:00 app[web.1]: /home/heroku_rack/lib/date_header.rb:14:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rack-1.4.1/lib/rack/urlmap.rb:49:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /app/.gems/gems/rack-1.4.1/lib/rack/builder.rb:134:in `call'
2012-07-14T10:52:39+00:00 app[web.1]: /usr/ruby1.8.7/lib/ruby/gems/1.8/gems/thin-1.2.6/lib/thin/connection.rb:74:in `catch'
2012-07-14T10:52:39+00:00 app[web.1]: /usr/ruby1.8.7/lib/ruby/gems/1.8/gems/thin-1.2.6/lib/thin/connection.rb:76:in `pre_process'
2012-07-14T10:52:39+00:00 app[web.1]: /usr/ruby1.8.7/lib/ruby/gems/1.8/gems/thin-1.2.6/lib/thin/connection.rb:57:in `process'
2012-07-14T10:52:39+00:00 app[web.1]: /usr/ruby1.8.7/lib/ruby/gems/1.8/gems/thin-1.2.6/lib/thin/connection.rb:74:in `pre_process'
2012-07-14T10:52:39+00:00 app[web.1]: /usr/ruby1.8.7/lib/ruby/gems/1.8/gems/thin-1.2.6/lib/thin/connection.rb:42:in `receive_data'
2012-07-14T10:52:39+00:00 app[web.1]: /usr/ruby1.8.7/lib/ruby/gems/1.8/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine'
2012-07-14T10:52:39+00:00 app[web.1]: /usr/ruby1.8.7/lib/ruby/gems/1.8/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run'
2012-07-14T10:52:39+00:00 app[web.1]: /usr/ruby1.8.7/lib/ruby/gems/1.8/gems/thin-1.2.6/lib/thin/backends/base.rb:57:in `start'
2012-07-14T10:52:39+00:00 app[web.1]: /usr/ruby1.8.7/lib/ruby/gems/1.8/gems/thin-1.2.6/lib/thin/server.rb:156:in `start'
2012-07-14T10:52:39+00:00 app[web.1]: /usr/ruby1.8.7/lib/ruby/gems/1.8/gems/thin-1.2.6/lib/thin/controllers/controller.rb:80:in `start'
2012-07-14T10:52:39+00:00 app[web.1]: /usr/ruby1.8.7/lib/ruby/gems/1.8/gems/thin-1.2.6/lib/thin/runner.rb:177:in `send'
2012-07-14T10:52:39+00:00 app[web.1]: /usr/ruby1.8.7/lib/ruby/gems/1.8/gems/thin-1.2.6/lib/thin/runner.rb:177:in `run_command'
2012-07-14T10:52:39+00:00 app[web.1]: /usr/ruby1.8.7/lib/ruby/gems/1.8/gems/thin-1.2.6/lib/thin/runner.rb:143:in `run!'
2012-07-14T10:52:39+00:00 app[web.1]: /usr/ruby1.8.7/lib/ruby/gems/1.8/gems/thin-1.2.6/bin/thin:6
2012-07-14T10:52:39+00:00 heroku[router]: GET rhohub-tombarnard-482dfc2a.rhosync.com/application?client_id=3af00085ad1d410c82c049030c93210e&p_size=2000&version=3&source_name=Job dyno=web.1 queue=0 wait=0ms service=395ms status=500 bytes=20
2012-07-14T10:52:39+00:00 app[web.1]: /usr/ruby1.8.7/bin/thin:19:in `load'
2012-07-14T10:52:39+00:00 app[web.1]: /usr/ruby1.8.7/bin/thin:19
2012-07-14T10:52:40+00:00 heroku[nginx]: 212.183.128.235 - - [14/Jul/2012:10:52:39 +0000] "GET /application?client_id=3af00085ad1d410c82c049030c93210e&p_size=2000&version=3&source_name=Job HTTP/1.1" 500 20 "-" "rhodes-wm" rhohub-tombarnard-482dfc2a.rhosync.com
2012-07-14T10:52:41+00:00 app[web.1]: config.ru:15: warning: already initialized constant ROOT_PATH 
```

# c# - 使随机列表中的条目在 Windows 窗体应用程序上不可重复

> ID：11483308
> 
> 赞同：0
> 
> 时间：2012-07-14T11:15:35.707
> 
> 标签：c#, winforms, visual-studio

我正在制作一个基本的多项选择游戏。我有一个给定字段的现有数据库：**Qno、Question、Correct、Wrong1、Wrong2 和 Wrong3。**当表单加载时，此代码会从我的数据库中生成随机顺序的问题，将问题放置在标签上，并将选项放在相应的按钮上。

```
 private void Form1_Load(object sender, EventArgs e)
        {
            NewQuestion();

  public void NewQuestion()
        {
            Stack numberCheck = new Stack();
            int y = 0;
            Random x = new Random();
            bool exists = false;

            y = x.Next(1, 50);
            exists = numberCheck.Contains(y);
            while (exists == true)
            {
                y = x.Next(1, 50);
                exists = numberCheck.Contains(y);
            }
            label2.Text = Convert.ToString(y);

            da.SelectCommand = new SqlCommand("SELECT Question from MC WHERE QNo=@id", cs);
            da.SelectCommand.Parameters.Add("@id", SqlDbType.Int).Value = label2.Text;
            cs.Open();
            label1.Text = Convert.ToString(da.SelectCommand.ExecuteScalar());
            cs.Close();

            da.SelectCommand = new SqlCommand("SELECT Correct from MC WHERE QNo=@id", cs);
            da.SelectCommand.Parameters.Add("@id", SqlDbType.Int).Value = label2.Text;
            cs.Open();
            button2.Text = Convert.ToString(da.SelectCommand.ExecuteScalar());
            cs.Close();

            da.SelectCommand = new SqlCommand("SELECT Wrong1 from MC WHERE QNo=@id", cs);
            da.SelectCommand.Parameters.Add("@id", SqlDbType.Int).Value = label2.Text;
            cs.Open();
            button3.Text = Convert.ToString(da.SelectCommand.ExecuteScalar());
            cs.Close();

            da.SelectCommand = new SqlCommand("SELECT Wrong2 from MC WHERE QNo=@id", cs);
            da.SelectCommand.Parameters.Add("@id", SqlDbType.Int).Value = label2.Text;
            cs.Open();
            button4.Text = Convert.ToString(da.SelectCommand.ExecuteScalar());
            cs.Close();

            da.SelectCommand = new SqlCommand("SELECT Wrong3 from MC WHERE QNo=@id", cs);
            da.SelectCommand.Parameters.Add("@id", SqlDbType.Int).Value = label2.Text;
            cs.Open();
            button5.Text = Convert.ToString(da.SelectCommand.ExecuteScalar());
            cs.Close();

        }

    }
} 
```

问题清单：

1.  问题可以重复
2.  答案列表与它们在数据库中声明的顺序相同，其中按钮 1 始终正确，其余按钮错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T11:29:47.890

1.  `numberCheck`每次调用时都会重新创建`NewQuestion`。要使其正常工作，您必须将其移出方法并使其成为类成员。

2.  查看[Randomize a List<T>](https://stackoverflow.com/questions/273313/randomize-a-listt-in-c-sharp)，它包含一个很好的 shuffle 方法来随机化答案列表的顺序。

尽管将`numberCheck`变量提升为成员会起作用，但这实际上是一个糟糕的解决方案。对于前几个项目，它会起作用，但是当您完成 49 个问题时，它将继续循环，直到它随机碰巧选择了剩下的唯一问题。一个更好的选择是创建一个数字 1-50 的初始列表，然后使用 2) 中链接的帖子中的 Shuffle 方法来选择订单。然后在获取新问题时只需获取该列表中的下一项即可。

# .htaccess - 在 codeigniter 中强制 SSL

> ID：11483312
> 
> 赞同：0
> 
> 时间：2012-07-14T11:16:31.693
> 
> 标签：.htaccess, codeigniter, ssl

我已经在网上搜索并尝试了大多数东西，最近几个小时但没有结果。

我使用了 CodeIgniter，我有一个。我有一些规则的 Htaccess 文件。

我想强制 SSL 连接并从 url 中删除 index.php。

这是我的 .Htaccess

```
<IfModule mod_rewrite.c>
    Options +FollowSymLinks
    RewriteEngine On
    RewriteBase /

    # Force SSL
    RewriteCond %{HTTPS} off
    RewriteRule ^(.*)$ https://%{SERVER_NAME}%{REQUEST_URI} [R=301,L]

    #remove ugly index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ /index.php/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin
    ErrorDocument 404 /index.php
</IfModule> 
Options All -Indexes 
```

问题是它不起作用。我在 www.lotusmodellen.se 上安装了证书，所有流量都必须去那里。不是 lotusmodellen.se

请尝试进入这样的[http://www.lotusmodellen.se](http://www.lotusmodellen.se)或[http://lotusmodellen.se](http://lotusmodellen.se)

不管你写什么，不管有没有 https，你都应该来 www.lotusmodellen.se

但这似乎是问题，重定向错误或其他东西。因为它不起作用。

有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T06:17:37.417

您好，只需在 config.php 文件中替换您的 base_url，这将检查来自 https 的请求，或者 http 将根据该请求设置您的 base_url。

```
if(isset($_SERVER['HTTP_HOST']))
{
    $config['base_url'] = isset($_SERVER['HTTPS']) && strtolower($_SERVER['HTTPS']) == 'on' ? 'https' : 'http';
    $config['base_url'] .= '://'. $_SERVER['HTTP_HOST'];
    $config['base_url'] .= str_replace(basename($_SERVER['SCRIPT_NAME']), '', $_SERVER['SCRIPT_NAME']);
}

else
{
    $config['base_url'] = 'http://localhost/';
} 
```

# android - 带有 2 个单选按钮的单个按钮，带有 alertdialog 视图

> ID：11483315
> 
> 赞同：-1
> 
> 时间：2012-07-14T11:16:47.133
> 
> 标签：android, android-ui, android-button, android-dialog

我只想制作一个应该有一个按钮的用户界面，当单击此按钮时，应该会出现一个带有两个可单击单选按钮的对话框。如何制作这样的用户界面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T11:20:40.987

用于创建这样的警报对话框。在您的按钮单击侦听器中调用此方法。

```
 private void showDialog() { 

final CharSequence[] Countries = { "India", "U.S.A", "U.K" }; 

AlertDialog.Builder alt_bld = new AlertDialog.Builder(this); 
alt_bld.setIcon(R.drawable.icon); 
alt_bld.setTitle("Select Country"); 

//you can set the Default selected value of the list, Here it is 0 means India 
alt_bld.setSingleChoiceItems(Countries, 0, 
new DialogInterface.OnClickListener() { 
public void onClick(DialogInterface dialog, int item) { 

Toast.makeText(getBaseContext(), Countries[item], 
Toast.LENGTH_LONG).show(); 
alert.cancel(); 
} 
}); 

alert = alt_bld.create(); 
alert.show(); 

} 
```

# css - 带有 Image-Sprite 的 CSS-Fading-Transition，无需额外标记

> ID：11483318
> 
> 赞同：0
> 
> 时间：2012-07-14T11:17:16.890
> 
> 标签：css, css-transitions

这是几乎完成的例子：http: [//jsfiddle.net/mbDAF/](http://jsfiddle.net/mbDAF/)

我想要两个图像之间持续时间为 2 秒的衰落过渡。但过渡不起作用（我使用的是 crome v20）。

有人能告诉我为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:11:58.137

我相信尚不支持生成内容的转换 - [https://bugs.webkit.org/show_bug.cgi?id=23209](https://bugs.webkit.org/show_bug.cgi?id=23209)

**更新：*2013 年 1 月 4 日***
正如 Benjamin 在下面的评论中指出的那样，伪元素的转换开始成为可能。css-tricks.com 正在跟踪对不同浏览器的***[支持](http://css-tricks.com/transitions-and-animations-on-css-generated-content/)***。

# cuda - 哪些变量会消耗 CUDA 中的寄存器？

> ID：11483321
> 
> 赞同：11
> 
> 时间：2012-07-14T11:18:11.877
> 
> 标签：cuda

```
__global__ void add( int *c, const int* a, const int* b )
{
    int x = blockIdx.x;
    int y = blockIdx.y;
    int offset = x + y * gridDim.x;
    c[offset] = a[offset] + b[offset];
} 
```

在上面的例子中，我猜`x`, `y`,`offset`保存在寄存器中，而

*   **nvcc -Xptxas -v**给出`4 registers, 24+16 bytes smem`

*   **profiler**显示 4 个寄存器

*   和**ptx**文件的头：

    ```
    .reg .u16 %rh<4>;
    .reg .u32 %r<9>;    
    .reg .u64 %rd<10>;  
    .loc    15  21  0   

    $LDWbegin__Z3addPiPKiS1_:   
    .loc    15  26  0 
    ```

任何人都可以澄清寄存器的用法吗？在 Fermi 中，每个线程的最大寄存器数为 63。在我的程序中，我想测试内核消耗太多寄存器的情况（因此变量可能必须自动存储在本地内存中，从而导致性能下降）。然后此时我可以将一个内核分成两个，以便每个线程都有足够的寄存器。假设 SM 资源足够并发内核。

我不确定我是否正确。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-14T13:15:23.487

PTX中的寄存器分配与内核最终的寄存器消耗完全无关。PTX 只是最终机器码的中间表示，采用[静态单一赋值形式](http://en.wikipedia.org/wiki/Static_single_assignment_form)，意味着 PTX 中的每个寄存器只使用一次。一块有数百个寄存器的 PTX 可以编译成只有几个寄存器的内核。

寄存器分配是`ptxas`作为一个完全独立的编译过程完成的（静态或由驱动程序即时执行，或两者兼而有之），它可以对输入 PTX 执行大量代码重新排序和优化，以提高吞吐量并节省寄存器，这意味着原始 C 中的变量或 PTX 中的寄存器与组装内核的最终寄存器计数之间几乎没有关系。

`nvcc` does provide some ways to influence the register allocation behaviour of the assembler. You have `__launch_bounds__` to provide heuristic hints to the compiler which can influence register allocation, and the compiler/assembler takes the `-maxrregcount` argument (at the potential expense of register spilling to local memory, which can lower performance). The volatile keyword used to make a difference to older versions of the nvopen64 based compiler and could influence the local memory spill behaviour. But you can't arbitrarily control or steer register allocation in the original C code or PTX assembly language code.

# google-apps-script - 如何使用 Google Script 获取事件中具有前缀的元素

> ID：11483322
> 
> 赞同：1
> 
> 时间：2012-07-14T11:19:06.720
> 
> 标签：google-apps-script, google-apps

我有一个函数，里面有这个。

```
var obj = app.loadComponent("guiItem", {"prefix": sItems + "-"}); 
```

组件内部`guiItem`有 2 个文本框 (tbx1, tbx2)

我目前有一个`guiItem`可以添加实例的绝对面板，以确保 tbx1 和 tbx2 是唯一的，我为`guiItem`每次添加的实例添加前缀（参见上面的代码行）。

问题：更改 tbx1 时，我需要更改 tbx2 的文本，但我不知道如何使用 Google Script 来完成。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:30:28.663

试试这个 ：

```
var obj = app.loadComponent("guiItem", {"prefix": sItems + "-"});
/* Store your prefix somewhere */
CacheService.getPrivateCache().put('prefix',sItems + '-' , 300);
/* .... */
var hdl = app.createServerHandler('handleTbx1Change').addCallbackElement('your_panel_object');
app.getElementById(sItems + '-' + 'tbx1').addChangeHandler(hdl); 

function handleTbx1Change(e){
  var prefix = CacheService.getPrivateCache().get('prefix');
  app.getElementById(prefix + 'tbx2').setText(e.parameter.tbx1); // assuming setName('tbx1') on tbx1 
```

这就是粗略的草图。您需要进行一些微调，但那段代码应该显示出方法

# php - Oscommerce 和每天自动将 excel/csv 文件导入我的数据库

> ID：11483325
> 
> 赞同：0
> 
> 时间：2012-07-14T11:19:41.087
> 
> 标签：php, excel, text, csv, oscommerce

我想将文本文件转换为 excel，然后修改 excel 文件中的某些数据，然后将这个新的 excel 文件导入数据库。

例如，excel 文件的内容将是产品及其价格，修改将针对价格。因此数据库和网站上的产品更新将是自动的。我打算使用 OSCommerce

我的问题是：是否有任何用于 OSCommerce 的工具可以配置为我完成这项工作，例如我需要每 8 小时自动执行一次？我需要使用 PHP 从头开始​​编写脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T11:27:53.003

如果您以简单的 csv（逗号分隔值）格式保存 excel 文件，那么您可以轻松地用逗号分割它并使用 PHP 组织您的数据。

您将使用以下代码从文件中读取数据：

```
$file_name = "test.csv"; // This needs to be relative to the current location that this script is being executed in 
$fp = fopen($file_name, "r"); // "r" means read, change to "rw" or "w" for read/write and write as needed
$data = fread($fp, filesize($file_name)); // Read the contents of the file into a string
fclose($fp); // Close the file for efficiency
$data = explode(',', $data); // Override data with the array format 
```

这只是一个基本脚本，需要您自己操作才能满足您的需求。祝你好运:)

# php - 如何检查数组中的值是否为空？

> ID：11483330
> 
> 赞同：1
> 
> 时间：2012-07-14T11:20:58.210
> 
> 标签：php, arrays, foreach

是否有快捷方式来检查数组中的值是否为空。我不想一一列举。

```
$form_inputs = array (
    'name' => $name,
    'gender' => $gender, 
    'location' => $location,
    'city' => $city,
    'description' => $description);

if (!empty(XXXXXXXX)){
        echo 'none are empty';
    } else {
        header('Location:add.school.php?error=1');
        exit();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T11:24:36.183

使用[in_array](http://php.net/manual/en/function.in-array.php)：

```
if(in_array('', $form_inputs)) {
  echo 'has empty field(s)';
} 
```

`in_array`将`''`, `null`, `0`,识别`false`为空，因此它可能无法很好地工作，具体取决于您的值。这通常适用于检查字符串数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T11:25:11.527

```
if (has_empty($form_inputs)) {
    // header location
}

function has_empty($array) {
    foreach ($array as $key=>$value) {
        if (empty($value)) {
            return true;
        }
    }
} 
```

# python - 如何强制我的整个包使用 __future__ 指令？

> ID：11483333
> 
> 赞同：6
> 
> 时间：2012-07-14T11:21:45.477
> 
> 标签：python, python-3.x

我可以放置：

```
from __future__ import absolute_import 
```

在`__init__.py`我的包的顶级目录中，并保证 absolute_import 将应用于在该包或子包内运行的所有代码？

或者我应该将该指令放在执行绝对导入的每个模型中？

我维护了一个 Python 包，并试图让我的代码尽可能容易地在时机成熟时迁移到 Python3。我不能马上做，因为我的依赖项还没有在 Python3 上。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T11:23:41.417

不，`__future__`导入仅对单个文件有效。您必须将此行放在每个 Python 源文件的顶部。

从[文档](http://docs.python.org/reference/simple_stmts.html#future)中：

> 未来语句是对编译器的指令，应使用将在指定的 Python 未来版本中可用的语法或语义来编译特定模块。

# jquery - Div 没有很好地居中

> ID：11483334
> 
> 赞同：3
> 
> 时间：2012-07-14T11:21:50.097
> 
> 标签：jquery

嗨，我正在尝试为我的网站创建一个灯箱效果，但我似乎对 centerint 有问题，这里的图像是我的代码：

```
<div id="lightbox">
    <img src="img/accrington-stanley.jpg" alt="Accrington Stanley" class="lightboximg"/>
</div>
  jQuery.fn.center = function () {
      this.css("position","absolute");
      this.css("top", Math.max(0, (($(window).height() - this.outerHeight()) / 2) + 
                                            $(window).scrollTop()) + "px");

      this.css("left", Math.max(0, (($(window).width() - this.outerWidth()) / 2) + 
                                            $(window).scrollLeft()) + "px");
      return this;
  } 

   var lightbox = $('div#lightbox');

            var lightboximg = $('img.lightboximg');

  portfolio.on("click","li" ,function(){
                var curent = $(this).attr("data-id");
                for(var i=0;i<arr.length;i++){
                    if(curent === attrValue){
                        for(var index in obj){
                                var attrName2 = index;
                                var attrValue2 = obj[index];
                                if(attrName2 === "img"){
                                    lightboximg.attr("src" , attrValue2);    
                                }     
                  }
                }

                lightbox.center().fadeIn();

            }) 
```

img.lightboximg 的来源在每次点击时都会发生变化，因此容器的宽度和高度会根据图像大小而变化。容器不会在第一次点击时居中，而是在第二次点击时居中。这两个循环仅用于更改 img.lightboximg 上的 src。

我不明白的另一件事是，如果我尝试获取 lightboximg 变量的宽度和高度，它总是返回 0。为什么会这样？谁能告诉我我的代码有什么问题以及如何纠正它以使 div#lightbox 居中？

**编辑**：arr 是一个包含许多对象的数组。在每个对象中，我都存储了 src 和其他参数

**编辑**：我在尝试使代码正常工作时发现了一些非常奇怪的东西。如果我在点击处理程序中添加一个警报框，容器就会居中，这与任何事情有什么关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:42:18.960

CSS方法怎么样？

```
.lightbox {
      position:absolute;
      left:50%;
      top:50%;
      width:300px;
      height:200px;
      margin-top:-100px;
      margin-left:-150px;
 } 
```

# perl - 如何生成一个与主通道共享 STDOUT 通道（仅此而已）的新进程？

> ID：11483335
> 
> 赞同：1
> 
> 时间：2012-07-14T11:22:00.330
> 
> 标签：perl, spawn

我有一个软件会在某个时候等待命名管道上的输出。这个动作是阻塞的，我想同时有一个加载图像。我正在考虑通过在 while 循环开始之前分叉该过程来实现这一点。

```
my $pid = fork()

if (defined($pid) and $pid == 0) {
    show_animation();
    exit 0;
}

while ($return_line = $FIFO->getline) {
    # Process the output when it's ready
} 
```

将`show_animation()`检查正在编写输出的脚本是否仍在运行，并在它结束后立即结束。

不幸的是，这破坏了一切，因为分叉进程与主进程共享相同的套接字和其他所有内容。[ZeroMQ](http://search.cpan.org/dist/ZeroMQ/lib/ZeroMQ.pm)似乎不喜欢这样（一旦进程被分叉，程序就会因 ZeroMQ 错误而中止）。

我一直在寻找像[Proc::Spawn](http://search.cpan.org/~garrow/Proc-Spawn-1.03/Spawn.pm)这样的模块，它可以让我在两个进程之间共享 STDOUT 通道。你有什么建议吗？你有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T10:51:34.863

在`fork()`您可以使用`close()`任何文件句柄之后，您就不再需要了。

```
use POSIX qw( close _SC_OPEN_MAX sysconf );
use constant OPEN_MAX_FD => eval { sysconf(_SC_OPEN_MAX) } || 1024;

...

defined( my $kid = fork() ) or die "Cannot fork - $!";

if( $kid == 0 ) {
    # child
    $_ == 1 or close $_ for 0 .. OPEN_MAX_FD;

    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T12:17:50.633

感谢您的帮助，但我找到了一个非常适合使用线程的问题的解决方案：

```
use threads;

my $loading_threads = threads->create(\&loading_animation, $process_name);
$loading_threads->detach(); 
```

把这个放在之前我没有任何问题。

# actionscript-3 - as3 vars 和具有相同名称的包导致 flash builder 抛出 3599 错误

> ID：11483336
> 
> 赞同：2
> 
> 时间：2012-07-14T11:22:47.930
> 
> 标签：actionscript-3, actionscript, flash-builder

刚刚切换到 flash builder 并且从 flash 工作的 as3 代码抛出了很多 3599 错误：

3599 定义名称与导入的包名称相同。对该名称的非限定引用将解析为包而不是定义。

我知道这是因为我的包与位于包内的类属性变量同名，但我不知道解决这些名称冲突的最佳实践是什么。问题是我有时喜欢在类之后命名包和变量。例如：

```
package icon {
import flash.display.DisplayObject;
import flash.display.Graphics;
import flash.display.Shape;
import flash.display.Sprite;

public class IconMaker extends Sprite{

    private var icon:Icon;

    public function IconMaker(icon:Icon):void{
        this.icon = icon;
    }
    public function make():void {
        icon.iconButton = new IconButton();
        icon.addChild(icon.iconButton);
    }
}
} 
```

所以我的问题是最佳实践是什么：下划线前缀（_icon）或“我的”前缀（myicon）还是我应该重命名包？或者是什么。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:09:06.997

我建议重命名软件包。[包的命名约定](http://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html)如下：com.publisher-website.app，然后扩展到更具体的包，如 graphics.icons 或类似的东西。源代码用于 Java，但基本上同样适用于 AS3。

# android - 使用 Facebook Graph API 创建新消息

> ID：11483341
> 
> 赞同：4
> 
> 时间：2012-07-14T11:24:25.970
> 
> 标签：android, facebook, facebook-graph-api

我需要使用 Facebook Graph Api 发送消息。

我发现这篇文章[http://developers.facebook.com/docs/reference/api/message/](http://developers.facebook.com/docs/reference/api/message/)

但我仍然找不到合适的 api 来从我的 android 应用程序创建新消息。

谁能告诉我，创建一条新消息是否可行？任何教程或参考注册？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T11:34:09.743

Facebook API 目前不允许第 3 方应用程序向用户（朋友或其他人）发布消息以防止垃圾邮件。

这已经在 SO 上被问过几次了。我添加了一些链接。

[http://facebook.stackoverflow.com/a/9047881/450534](http://facebook.stackoverflow.com/a/9047881/450534)

[https://developers.facebook.com/blog/post/291/](https://developers.facebook.com/blog/post/291/)（来源： http: [//facebook.stackoverflow.com/a/4525572/450534](http://facebook.stackoverflow.com/a/4525572/450534)）

**注意：**有一种解决方法，或者看起来是这样，但我个人从来没有亲自尝试过。查看此位之后链接上的任何答案是否对您有所帮助。

[http://facebook.stackoverflow.com/q/2943297/450534](http://facebook.stackoverflow.com/q/2943297/450534)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T08:26:23.377

您可以使用直接 url 发送消息，您必须在其中提供您的应用程序 ID、您必须发送消息的朋友用户 ID 和重定向 uri，您必须在 Facebook 上发送消息后重定向页面。

```
var redirect_uri= you site url;
var sendUrl = "https://www.facebook.com/dialog/send?app_id=**app_id**&to=**friend_id**&picture=**imageurl**&link=**yoursitelink**&redirect_uri="+redirect_uri; 
```

点击 sendUrl 并发送消息..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-04T21:42:39.190

```
var redirect_uri= www.ibda3world.com;
var sendUrl = "https://www.facebook.com/dialog/send?387805884642610=**387805884642610**&to=**100001280661576**&picture=**https://fbcdn-sphotos-b-a.akamaihd.net/hphotos-ak-frc3/1380084_637568089629207_126766341_n.jpg**&link=**www.ibda3world.com**&redirect_uri="www.ibda3world.com; 
```

# android - android屏幕坐标如何工作？

> ID：11483345
> 
> 赞同：166
> 
> 时间：2012-07-14T11:24:39.967
> 
> 标签：android, android-animation, coordinate-systems

我正在使用 Android `Animation`，我发现 Android 坐标系统非常混乱，所以我在这里问这个关于坐标如何在 Android 中工作的问题。我正在关注此图像以将一个视图移动到另一个视图，但它似乎不起作用：

![图片](../Images/02f534bdb10da18ed3ddab2464e5f4e3.png)

* * *

## 回答 #1

> 赞同：320
> 
> 时间：2012-07-14T11:34:38.090

![在此处输入图像描述](../Images/a81888f277c34e7e67446805004bb2fd.png)

**此图像呈现两个方向（横向/纵向）**

要获得 MaxX 和 MaxY，请继续阅读。

对于 Android 设备屏幕坐标，以下概念将起作用。

```
Display mdisp = getWindowManager().getDefaultDisplay();
Point mdispSize = new Point();
mdisp.getSize(mdispSize);
int maxX = mdispSize.x; 
int maxY = mdispSize.y; 
```

**编辑：- ** **适用于支持 android api 级别早于 13 的设备。可以使用以下代码。**

```
 Display mdisp = getWindowManager().getDefaultDisplay();
    int maxX= mdisp.getWidth();
    int maxY= mdisp.getHeight(); 
```

(x,y) :-

1) **(0,0)**是左上角。

2) **(maxX,0)**是右上角

3) **(0,maxY)**是左下角

4) **(maxX,maxY)**是右下角

这里 maxX 和 maxY 是以像素为单位的屏幕最大高度和宽度，我们在上面给定的代码中检索到了它们。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-09-26T04:01:55.607

对于 Android API 级别 13，您需要使用：

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int maxX = size.x; 
int maxY = size.y; 
```

然后 (0,0) 是左上角， (maxX,maxY) 是屏幕的右下角。

自 API 13 起，屏幕大小的“getWidth()”已被弃用

此外， [getwidth()](https://developer.android.com/reference/android/view/View#getWidth())和[getHeight()](https://developer.android.com/reference/android/view/View#getHeight())是[android.view.View](https://developer.android.com/reference/android/view/View) 类中的方法。所以当你的 java 类扩展 View 类时，没有 windowManager 开销。

```
 int maxX=getwidht();
          int maxY=getHeight(); 
```

就如此容易。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-04-01T14:02:49.893

[这张照片是从那里](https://www.javacodegeeks.com/2014/06/15-useful-robotium-code-snippets-for-android-test-automation.html)收集的，希望能消除大家的困惑。

[![安卓屏幕坐标](../Images/7b1902cd38e8aecee85bf50edc4afbed.png)](https://i.stack.imgur.com/oIKAh.png)

# regex - 正则表达式删除每行空格后的字符

> ID：11483346
> 
> 赞同：0
> 
> 时间：2012-07-14T11:24:54.973
> 
> 标签：regex

我有一个像这样的 50k 行的文本文件

```
word1 1 23
word2 43 23
word3 197
word4 
```

并且需要一种方法使它看起来像这样：

```
word1
word2
word3
word4 
```

所以我需要一种方法来删除每行第一个空格后面的每个字符。我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T11:28:13.610

多种解决方案。

**解决方案 1：Vim**

[在vim](http://www.vim.org/download.php)中打开文件，然后运行：

`:%s/\s.*//g`

**解决方案2：sed**

`sed "s/ .*//g" < input_file > output_file`

不能在 Windows 上执行此操作。

**解决方案 3：Excel/Calc/数字**

在 OpenOffice/MSOffice/etc 中导入文件。
您可以将空格设置为分隔符。
但这是一个较慢且不那么有趣的。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T12:38:19.843

```
[ghoti@pc ~]$ cat input.txt 
word1 1 23
word2 43 23
word3 197
word4
[ghoti@pc ~]$ awk '{print $1}' input.txt 
word1
word2
word3
word4
[ghoti@pc ~]$ sed 's/ .*//' input.txt 
word1
word2
word3
word4
[ghoti@pc ~]$ cut -d\  -f1 input.txt 
word1
word2
word3
word4
[ghoti@pc ~]$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T11:27:59.150

我建议使用 excel 或电子表格来代替，如果它是一次性的。

只需导入一个文件，并将分隔符设置为空格字符。然后，您可以删除除第一列之外的所有列，然后再次保存为文本文件。

# mysql - 排序错误 Magento 从字母排序更改为数字排序

> ID：11483350
> 
> 赞同：2
> 
> 时间：2012-07-14T11:25:39.313
> 
> 标签：mysql, magento

我有一个名为 toplist 的属性，我在其中根据销售额从另一个系统导入产品排名。当我尝试对我的产品列表进行排序时，它会返回一个字母排序顺序，例如 1 ,10,100,1000 我想要 1,2,3,4,5,6,7,8,9,10 等等。不过，我尝试将属性保存为价格字段，但并没有变得更好。

有谁知道如何将排序顺序设置为数字？

请我在这里绝望:-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T23:17:13.610

如果我正确理解了这个问题，以下可能会起作用：

```
SELECT *
FROM table
ORDER BY CAST(toplist as UNSIGNED); 
```

“UNSIGNED”表示该字段在按其排序之前转换为无符号整数。您也可以将其转换为“签名”或“十进制”

# iphone - 如何成为从一个 UITextView 到另一个 UITextView 的响应者？

> ID：11483351
> 
> 赞同：1
> 
> 时间：2012-07-14T11:25:46.393
> 
> 标签：iphone, ios, uitextview, uitextviewdelegate

我的 iPhone 应用程序中有两个`UITextView`。当用户选择一个`UITextView`控制器自动转到另一个`UITextView`。我在我的项目中尝试了以下方式。但是第二个`UITextView`直到`becomefirstresponder`用户在第二个里面点击才会出现`UITextView`。

```
 -(void) viewDidLoad
{   
    TextView1 = [[UITextView alloc] initWithFrame:CGRectMake(10, 320, 300, 50)];
    TextView1.delegate = self;
    TextView1.backgroundColor = [UIColor clearColor];
    TextView1.layer.borderWidth = 2;
    TextView1.layer.borderColor = [UIColor blackColor].CGColor;
    TextView1.layer.cornerRadius = 5;
    [self.view addSubview: TextView1];

    TextView2 = [[UITextView alloc] initWithFrame:CGRectMake(10, 5, 300, 30)];
    TextView2.delegate = self;
    TextView2.backgroundColor = [UIColor whiteColor];
    TextView2.layer.borderWidth = 2;
    TextView2.layer.borderColor = [UIColor lightTextColor].CGColor;
    TextView2.layer.cornerRadius = 5;
    [self.view addSubview: TextView2];

    UIBarButtonItem *textBarButton = [[UIBarButtonItem alloc] initWithCustomView: TextView2];

    accessoryToolBar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    accessoryToolBar.items = [NSArray arrayWithObjects:textBarButton, nil];
}

 -(BOOL) textViewShouldBeginEditing:(UITextView *)textView
{
    NSLog(@"TextView Should Begin Editing");
    if (textView == messageTextView) 
    {
        [TextView2 setInputAccessoryView:accessoryToolBar];
        [TextView1 resignFirstResponder];
        [TextView2 becomeFirstResponder];
    }
    else
    {
        [TextView2 setInputAccessoryView:accessoryToolBar];
        [TextView1 resignFirstResponder];
    }

    return YES;
} 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T11:37:37.947

删除完整的`textViewShouldBeginEditing`方法。那是错误的观点。

您希望，当用户触摸第一个 textView 时，应该选择第二个，对吧？如果那是您想要的，请`textViewDidBeginEditing:`改用。

```
- (void) textViewDidBeginEditing:(UITextView *)textView
{
  if(textView == TextView1) {
    [TextView2 becomeFirstResponder];
  }
} 
```

这应该是你需要的一切。

# python - 将“普通”Python 类集成到 Django 模型类中

> ID：11483352
> 
> 赞同：0
> 
> 时间：2012-07-14T11:26:29.337
> 
> 标签：python, django

我编写了一个包含多个类的 Python 应用程序。假设其中一个是这样的（过于简单了 - 但我试图表示功能的类型）：

```
class PythonXyz(object):

    def __init__(self):
        self.x = []
        self.y = []
        self.z = []

    def append(self, x, y):
        self.x.append(x)
        self.y.append(y)

    def get_x(self):
        return self.x

    def get_y(self):
        return self.y

    def get_z(self):
        return self.x + self.y

    def size(self):
        return len(self.x)

    def dump(self):
        #generate some output

    def do_some_complex_stuff(self, q):
        #lots of calculations and manipulation of the self.x and self.y lists.

    def save(self, filename):
        #some code that saves data to disk

    def load(self, filename):
        #some code that loads data from disk 
```

当应用程序工作，但缺乏可用性时，我决定对应用程序进行 djangofy，这样我就可以将浏览器用作穷人的 GUI 并使用数据库的优点。所以我像这样制作了一个model.py：

```
class DjangoXyzModel(models.model):
    x = models.FloatField()
    y = models.FloatField() 
```

我修改了 PythonXYZ 类中的 load() 和 save() 方法以使用数据库而不是文件，并使一些视图可以通过浏览器工作。

现在我得到了 3 个 Django 应用程序，[编辑]具有不同的数据库模式 [/编辑]，每个都有自己的 models.py 文件和几个模型类，此外，我的原始代码在一个单独的文件夹中。我觉得这一切都变得非常混乱，我觉得将所有 PythonXyz 方法完全集成到 DjangoXyzModel 类中会更加简洁，例如：

```
class DjangoXyzModel(models.model):
    x_db = models.FloatField()
    y_db = models.FloatField()

    def init_lists(self):
        self.x = []
        self.y = []
        self.z = []

    def append(self, x, y):
        self.x.append(x)
        self.y.append(y)

    def get_x(self):
        return self.x

    def get_y(self):
        return self.y

    def get_z(self):
        return self.x + self.y

    def size(self):
        return len(self.x)

    def dump(self):
        #generate some output

    def do_some_complex_stuff(self, q):
        #lots of calculations and manipulation of the self.x and self.y lists.

    def save_to_db(self):
        #some code that saves x,y lists to the database

    def load_from_db(self, filename):
        #some code that loads x,y lists from the database 
```

**我的问题是**：这种方法是否会被视为 Django 模型类的“污染”，或者这是否可以，只是个人喜好问题，或者这可能正是模型类应该使用的方式？如果不推荐或不赞成这样做，那么处理重复课程的更好方法是什么？

请注意，显而易见的（？）解决方案完全摆脱列表并直接从数据库中工作是不可接受的，因为我需要内存中的列表以便更快地访问。例如，列表从数据库加载到内存中一次并被访问数百或数千次。每个列表可能超过 1000 个项目，因此在需要值时批量读/写也比单独访问快得多（通常不是顺序的）。此外，在最终提交到数据库之前，通常会多次修改数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T21:00:58.160

听起来您不应该将 PythonXYZ 类与 Django 模型集成。让 Django 管理数据库（个人`x`和`y`FloatField 记录）。您的代码处理真正管理*模型实例集合*的列表逻辑。在模型上使用旨在对单个模型实例范围之外的事物进行操作的方法是没有意义的。您可能需要一个由两部分组成的解决方案——带有**Collection**类的**Manager 。**

 **为您的列表级加载/保存逻辑编写一个自定义[管理器。](https://docs.djangoproject.com/en/1.10/topics/db/managers/)这比纯粹的泛型类要好，因为它在概念上将列表操作与它们正在操作的数据库记录联系起来。管理器将处理模型实例的初始加载到这些 x/y/z 列表中，并将列表保存回数据库。从文档中：

> 添加额外的 Manager 方法是向模型添加“表级”功能的首选方式。（对于“行级”功能——即作用于模型对象的单个实例的函数——使用模型方法，而不是自定义管理器方法。）
> 
> 自定义 Manager 方法可以返回您想要的任何内容。它不必返回 QuerySet。

由于列表本身听起来像是实体，因此您可能需要一个 Collection 类，该类为列表提供 do_some_complex_stuff()、size()、dump() 等方法。这就是`PythonXyz`你现在拥有的对象。您可以进行子类化`list`以避免重新实现 append() 等。Manager load() 可以返回这个 Collection 类，而它的 save() 将 Collection 转换为 Model 实例以进行数据库写入。

至于在您的三个应用程序之间共享通用代码。

*   您可以使用[抽象](https://docs.djangoproject.com/en/1.10/ref/models/options/#abstract)模型来保存具有具体应用模型的公共代码。
*   如果您需要在模式级别访问共性，请不要使用抽象父模型。（然后您将拥有一个基表和仅包含应用程序特定列的单个表。）
*   [代理](https://docs.djangoproject.com/en/1.10/topics/db/models/#proxy-models)模型仅适用于您想要不同的行为并且架构相同/共享的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T15:27:20.697

> 将所有 PythonXyz 方法完全集成到 DjangoXyzModel 类中

不。将基类分开，然后创建使用 MI 组合它们的[模型代理，在适当的情况下覆盖行为。](https://docs.djangoproject.com/en/dev/topics/db/models/#proxy-models)**

# css - 在父 div 中浮动带有文本的 div

> ID：11483353
> 
> 赞同：1
> 
> 时间：2012-07-14T11:26:38.103
> 
> 标签：css, html

我有一个`<div>`我想漂浮在一个 parent 里面`<div>`。父 div 包含一些 HTML 条目，例如`texts, images, tables`

如果我`HTML`这样做，那么它会给出我想要的结果

```
<div class="parent-div">
<div class="child-div">
Child div content
</div>

Parent div HTML content
</div> 
```

结果

```
+---------- parent div --------------+
|Parent HTML content... +-----------+|
|...................... | child div || 
|...................... | child div ||
|...................... +-----------+|
|....................................|
|....................................|
+------------------------------------+ 
```

我的问题是我不想将第二个（子）div 内容放在父内容之前。

我想制作这样的HTML

```
<div class="parent-div">
Parent div HTML content

<div class="child-div">
Child div content
</div>
</div> 
```

如果我像上面显示的那样制作 HTML，它会在完整的父 HTML 之后呈现子 div

以上结果

```
+---------- parent div --------------+
|Parent HTML content.................|
|....................................| 
|....................................|
|....................................|
|                       +-----------+|
|                       | child div ||
|                       | child div ||
|                       +-----------+|
+------------------------------------+ 
```

我正在为子 div 使用这些样式`<div style="width:200px; float:right;">`

`child div`如果我`child div`在父文本结束后发布，是否可以与父文本一起浮动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T18:52:37.520

不`float`，只是`margin-left:auto`和`margin-right:0`：http: [//jsfiddle.net/tovic/2QVX8/21/](http://jsfiddle.net/tovic/2QVX8/21/)

**编辑：**如下评论：将原始框设置为绝对位置，然后创建一个浮动的假元素作为原始框的空间：http: [//jsfiddle.net/tovic/2QVX8/22/](http://jsfiddle.net/tovic/2QVX8/22/)

# asp.net-mvc - ASP.net MVC 表单中多个值的逗号，但如果一个值也包含逗号

> ID：11483356
> 
> 赞同：1
> 
> 时间：2012-07-14T11:27:40.730
> 
> 标签：asp.net-mvc, asp.net-mvc-2

我正在处理一个网络表单，在这个网络表单中我有多个同名的输入。

```
<% using(Html.BeginForm("Create", "Object", Method.Post))
   {
foreach(var prop in Model.Properties)   
{%>
    <div id="prop-<%= prop.name %>">
        <input name="<%= prop.name%>" value="" type="text" />

    <% if(prop.type == "Lines") 
       {%>
        <input type="button" value="Add More" onclick="$('#prop-<%= prop.name %>').append('<input name=\'<%= prop.name%>\'></input>');" />
     <%}%>
  <%}%> 
```

现在在 C# 中我得到这样的结果

```
var result = "item_name1,item_name2,item_name3" 
```

但如果用户在一个字段中输入逗号，例如字段 2，结果将是：

```
var result = "item_name1,item,name2,item_name3" 
```

现在我不知道正确的输入是什么

注意：我不能使用对象和模型，只能使用 FormCollection，在此先感谢

我的 C# 代码：

```
[HttpPost]public ActionResult Edit(string ObjectId, string Code, FormCollection form){
        foreach (var key in form.AllKeys)
        {
                var prop_name = key;

                var property = db.Properties.First(prop => prop.Name == prop_name);
                if (property.ReadOnly == true)
                {
                    continue;
                }

                string EmptyValue = property.EmptyValue;

                //for lines we need to split the incoming value
                var values = form[key].Split(',');
                int rowNo = 0;
                foreach (var value in values)
                {
                    var temp = new DI_Value();
                    //Here we get value according to it's data type
                    temp.Value = GetValue(value, property.DataType); 
                    PropertyName = prop_name;
                    temp.RowNumber = rowNo++;
                    temp.DataType = property.DataType;
                    temp.EmptyValue = EmptyValue;

                    data.Add(temp);
                }
            }
        }
     } 
```

我正在使用 Json 将数据发送到服务器：

```
 $.ajax({ type: 'POST', url: submit_url, data: $(form).serialize(),
        success: function (result) {
            if (result.error) {
                setStatusMsg(result.error_text, 'error');
            }
            else {
                setStatusMsg(success_message, 'success');
            }); 
```

逻辑是获取表单并将其保存到 XML 文件，但所有字段都是动态的，因为我不能使用模型

# user-interface - 支持 Java Web 开发人员所见即所得的开源 Web 构建器（拖放）工具

> ID：11483360
> 
> 赞同：0
> 
> 时间：2012-07-14T11:27:59.607
> 
> 标签：user-interface, jakarta-ee, web, wysiwyg

我是 java 开发人员，我必须在 java 中开发一个动态 Web 应用程序，谁能建议我一个**拖放工具（所见即所得）**来设计我的网站，支持 jquery 和 ajax，这样我就不必花更多时间在静态编码上.

**我的平台：** *linux mint 13 64bit，sun jdk7，netbeans7*

提前谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T11:31:10.587

您可能会对 GWT 感兴趣。

[GWT](https://developers.google.com/web-toolkit/)是一个平台，您主要在其中使用 java 进行编码，但它会生成基于 ajax 的 Web 应用程序。

看看[GWT 设计器](https://developers.google.com/web-toolkit/tools/gwtdesigner/)。

# c++ - Auto-stage in Git Extensions

> ID：11483362
> 
> 赞同：2
> 
> 时间：2012-07-14T11:28:10.117
> 
> 标签：c++, visual-studio-2010, visual-studio, git, git-extensions

I am using *Git Extensions* as add-in in Visual Studio 2010\. It is working great. However, whenever I am going to commit to repository, the GUI forces me to manually select the appropriate files for adding to the stage (even if these files has been indexed and added to the stage already). I am a little bit confused since my believe was that already staged files do not require a selection for the stage again.

Example: In the Git Extension's GUI, I am adding Network.cpp to the stage after using *Commit*. In the next, I type any arbitrary but useful description and commit the staged files. The next time the Network.cpp has been changed, I have to stage Network.cpp again after committing to repository.

Is there anything completely wrong in my workflow?

Thanks in advance for your help.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T08:55:25.150

Nothing is wrong with your workflow; you're running into the same misunderstanding of the staging area (the "index") that most people have at first.

With Subversion and Mercurial, once you've told the system to track a file, it checks for changes in that file every time you commit. Any changes to a tracked file get noticed automatically.

Git is different. With Git, you don't add files to the staging area, you add *changes to files*. This means each time you change a file, you need to add those changes if you want them included with the next commit. If you don't add new changes to the staging area, they never get committed.

Usually you want to commit everything that's been changed, so with Git Extensions just use the "Stage All" button each time you commit, and you'll see the system behave pretty much the same way that Subversion and Mercurial do. If you use the command line, you can use `git commit -a` to automatically add changes that have been made to tracked files.

# python - python中的受保护方法

> ID：11483366
> 
> 赞同：39
> 
> 时间：2012-07-14T11:28:52.350
> 
> 标签：python, oop, access-modifiers

> **可能重复：**
> [在 python 子类中将方法设为](https://stackoverflow.com/questions/451963/making-a-method-private-in-a-python-subclass)
> [私有 Python 中的私有变量和方法](https://stackoverflow.com/questions/3385317/private-variables-and-methods-in-python)

如何在受保护且只有子类可以看到的 python 类中定义一个方法？

这是我的代码：

```
class BaseType(Model):
    def __init__(self):
        Model.__init__(self, self.__defaults())

    def __defaults(self):
        return {'name': {},
                'readonly': {},
                'constraints': {'value': UniqueMap()},
                'cType': {}
        }

    cType = property(lambda self: self.getAttribute("cType"), lambda self, data:              self.setAttribute('cType', data))
    name = property(lambda self: self.getAttribute("name"), lambda self, data: self.setAttribute('name', data))
    readonly = property(lambda self: self.getAttribute("readonly"),
                        lambda self, data: self.setAttribute('readonly', data))

    constraints = property(lambda self: self.getAttribute("constraints"))

    def getJsCode(self):
        pass

    def getCsCode(self):
        pass

    def generateCsCode(self, template=None, constraintMap=None, **kwargs):
        if not template:
            template = self.csTemplate

        if not constraintMap: constraintMap = {}
        atts = ""

        constraintMap.update(constraintMap)

        for element in self.getNoneEmptyAttributes():
            if not AbstractType.constraintMap.has_key(element[0].lower()):
                continue
            attTemplate = Template(AbstractType.constraintMap[element[0].lower()]['cs'])
            attValue = str(element[1]['value'])
            atts += "%s  " % attTemplate.substitute({'value': attValue})

        kwargs.update(dict(attributes=atts))

        return template.substitute(kwargs)

class  MainClass(BaseType, Model):
    def __init__(self):
        #Only Model will initialize
        Model.__init__(self, self.__defaults())
        BaseType.__init__(self)

    def __defaults(self):
        return {'name': {},
                'fields': {'value': UniqueMap()},
                'innerClass': {'value': UniqueMap()},
                'types': {}
        }

    fields = property(lambda self: self.getAttribute("fields"))
    innerClass = property(lambda self: self.getAttribute("innerClass"))
    types = property(lambda self: self.getAttribute("types"))

    @staticmethod
    def isType(iType):
    #        return type(widget) in WidgetSelector.widgets.itervalues()
        return isinstance(iType, AbstractType)

    def addType(self, type):
        if not MainClass.isType(type):
            raise Exception, "Unknown widget type %s" % type
        self.types[type.name] = type 
```

我只想`BaseType`看到`generateCsCode`.`BaseType`

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-07-14T11:33:27.477

Python 不像 C++/Java/C# 那样支持访问保护。一切都是公开的。座右铭是，“我们在这里都是成年人。” 记录您的课程，并坚持让您的合作者阅读并遵循文档。

Python 的文化是，以下划线开头的名称意味着“除非你真的知道你应该使用，否则不要使用这些”。您可以选择使用下划线开始您的“受保护”方法。但请记住，这只是一个约定，它不会改变访问方法的方式。

以双下划线 ( ) 开头的名称`__name`被破坏，因此可以构建继承层次结构而不必担心名称冲突。有些人将这些用于“私有”方法，但同样，它不会改变访问方法的方式。

最好的策略是习惯一个模型，其中必须编写单个进程中的所有代码才能相处。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-14T11:30:38.200

你不能。Python 故意不支持访问控制。按照惯例，以下划线开头的方法是私有的，您应该在文档中明确说明谁应该使用该方法。

# mysql - 将 VALUES 中的 IF 插入到 INSERT 语句中

> ID：11483368
> 
> 赞同：2
> 
> 时间：2012-07-14T11:29:14.297
> 
> 标签：mysql, sql, phpmyadmin

我开始使用触发器，并且根据 NEW.lettre2 我有不同的值要插入。所以我想知道好的等价物（仅在 SQL 中，没有 php）：

```
...
BEGIN
INSERT INTO newsfeed(lettre1) 
VALUES (IF(NEW.lettre2='a','b','c') );
END |
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T11:32:22.910

您可以在 sub select 的帮助下做到这一点：

```
INSERT INTO newsfeed(lettre1) 
VALUES (SELECT IF(NEW.lettre2='a','b','c') AS col1 ); 
```

# php - 无法检索保存在 $.ajax php 调用中的 $_COOKIE

> ID：11483374
> 
> 赞同：0
> 
> 时间：2012-07-14T11:29:51.897
> 
> 标签：php, jquery, ajax, cookies

我遇到了一个问题，如果有人可以帮助我解决这个问题，我将不胜感激。

基本上，我正在制作一个代码，允许用户将帖子添加到收藏夹，并将收藏夹保存在 cookie 中以记住它，但它失败了。这是我的代码：

首先，我使用这段代码运行一个函数来检查用户是否保存了帖子：

```
<?php dt_fav_action(); ?> 
```

这是我的 dt_fav_action 函数：

```
function dt_fav_action() {
    global $post;
    $cookie = $_COOKIE['fav-'.$post->ID];
    if ($cookie == 1) {
        $user_faved = true;
    }
    if ($user_faved == true) {
        echo '<a href="';dt_favorites_link();echo '" class="faved">';dt_count_fav();echo '</a>';
    } else {
        echo '<a href="" class="addfav">';dt_count_fav();echo '</a>';
    }
} 
```

这是 $.ajax 请求，它将数据发送到我的 php 文件以处理收藏夹并存储 cookie 等。

```
$('.addfav').click(function(event){
    $(this).unbind('click');
    var parentfav = $(this).parent();
    var postid = $(this).parent().parent().parent().attr('id').replace(/[^0-9]/g, '');
    $(this).fadeOut();
    $.ajax({
        url: '<?php bloginfo('template_directory'); ?>/ajax/favorite.php',
        type: 'get',
        data: { postid : postid },
        dataType: 'json',
        success: function(data){
            parentfav.html('<a href="<?php dt_favorites_link(); ?>" class="faved">' + data.msg + '</a>');
            parentfav.children('.faved').css({'background-position' : 'left bottom', 'color' : '#1871a4'});
        }
    });
    return false;
}); 
```

最后，这是我更新收藏夹计数的 favorite.php，并添加了 cookie，以便稍后可以通过 dt_fav_action 函数检索它，但这是真正的问题，$_COOKIE 总是返回 null，它没有被保存。

```
<?php

// include WordPress
require('../../../../wp-blog-header.php');
$data = array();

    // update post favorites count
    $postid = $_GET['postid'];
    update_post_meta($postid, 'faves', (int)get_post_meta($postid, 'faves', true)+1);
    $updated = get_post_meta($postid, 'faves', true);

    setcookie('fav-'.$postid, '1', time() + (20 * 365 * 24 * 60 * 60));

    $data['msg'] = $updated;

echo json_encode($data);

?> 
```

setcookie 部分，我在通过 $.ajax 调用它时设置了 cookie，之后脚本无法识别任何 cookie，因此它总是失败并且永远不会记住保存状态。

请帮助..我提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T11:34:52.333

将 cookie 设置为在根目录的所有子目录上可用。

```
setcookie(
      'fav-'.$postid, 
      '1', 
      time() + (20 * 365 * 24 * 60 * 60), 
      "/"
); 
```

# c - 函数获取 EditBox winApit 中的选定文本

> ID：11483377
> 
> 赞同：0
> 
> 时间：2012-07-14T11:30:29.543
> 
> 标签：c, winforms, winapi

是否有任何 WinAPI 可以在编辑框中获取选定的文本？取光标的初始和最终位置？我告诉编辑框的 HWND 和函数返回的函数，选定的文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T13:01:43.557

我不知道有一个函数可以做到这一点。

将[EM_GETSEL](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761598%28v=vs.85%29.aspx)消息发送到编辑控件以获取选择的限制，例如

```
DWORD selStart;
DWORD selEnd;
SendMessage(hWndEdit, EM_GETSEL, &selStart, &selEnd); 
```

使用[WM_GETTEXT](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632627%28v=vs.85%29.aspx)从编辑控件中检索所有文本，并自己提取选定的子字符串。

# jquery - Twitter Bootstrap 可滚动表格行和固定标题

> ID：11483378
> 
> 赞同：35
> 
> 时间：2012-07-14T11:30:36.143
> 
> 标签：jquery, css, twitter-bootstrap

有谁知道如何制作具有固定标题行和可滚动正文行的表格？如果这很重要，我正在使用 twitter 引导程序。

这是我正在尝试创建的示例：

[http://www.siteexperts.com/tips/html/ts04/page1.asp](http://www.siteexperts.com/tips/html/ts04/page1.asp)

我见过的所有例子都把它分成两个单独的表。想知道是否有人有更优雅的解决方案。

Twitter bootstrap 还会根据内容自动调整列大小，这是我想将其保留在一个表中的另一个原因

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-12-29T00:52:32.373

只需堆叠两个引导表；一个用于列，另一个用于内容。没有插件，只是纯粹的引导程序（这不是没有 bs，哈哈！）

```
 <table id="tableHeader" class="table" style="table-layout:fixed">
        <thead>
            <tr>
                <th>Col1</th>
                ...
            </tr>
        </thead>
  </table>
  <div style="overflow-y:auto;">
    <table id="tableData" class="table table-condensed" style="table-layout:fixed">
        <tbody>
            <tr>
                <td>data</td>
                ...
            </tr>
        </tbody>
    </table>
 </div> 
```

`[Demo JSFiddle](http://jsfiddle.net/SAFX/Mq52k/16/)`

内容表 div 需要`overflow-y:auto`, 用于垂直滚动条。必须使用`table-layout:fixed`，否则，列没有对齐。此外，必须将整个东西放在引导面板中以消除表格之间的空间。

尚未使用自定义列宽进行测试，但如果您保持表格之间的宽度一致，它应该可以工作。

```
 // ADD THIS JS FUNCTION TO MATCH UP COL WIDTHS
    $(function () {

        //copy width of header cells to match width of cells with data
        //so they line up properly
        var tdHeader = document.getElementById("tableHeader").rows[0].cells;
        var tdData = document.getElementById("tableData").rows[0].cells;

        for (var i = 0; i < tdData.length; i++)
            tdHeader[i].style.width = tdData[i].offsetWidth + 'px';

    }); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-05T02:47:03.203

这是一个 jQuery 插件，正是这样做的：http: [//fixedheadertable.com/](http://fixedheadertable.com/)

用法：

> `$('selector').fixedHeaderTable({ fixedColumn: 1 });`

`fixedColumn`如果您希望任意数量的列也被固定以进行水平滚动，请设置该选项。

编辑：这个例子[http://www.datatables.net/examples/basic_init/scroll_y.html](http://www.datatables.net/examples/basic_init/scroll_y.html)在我看来要好得多，尽管使用 DataTables 您需要更好地了解它的一般工作原理。

EDIT2：要让 Bootstrap 与 DataTables 一起使用，您需要遵循此处的说明：http: [//datatables.net/blog/Twitter_Bootstrap_2](http://datatables.net/blog/Twitter_Bootstrap_2)（我已经对此进行了测试并且它有效）- 对于 Bootstrap 3，这里有一个讨论：[http://datatables .net/forums/discussion/comment/53462](http://datatables.net/forums/discussion/comment/53462) - （我没有测试过这个）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-14T12:19:24.593

有趣的问题，我尝试通过只做一个固定位置行来做到这一点，但这种方式似乎要好得多。来源在底部。

css

```
thead { display:block; background: green; margin:0px; cell-spacing:0px; left:0px; }
tbody { display:block; overflow:auto; height:100px; }
th { height:50px; width:80px; }
td { height:50px; width:80px; background:blue; margin:0px; cell-spacing:0px;} 
```

html

```
<table>
    <thead>
        <tr><th>hey</th><th>ho</th></tr>
    </thead>
    <tbody>
        <tr><td>test</td><td>test</td></tr>
        <tr><td>test</td><td>test</td></tr>
        <tr><td>test</td><td>test</td></tr>
</tbody> 
```

[http://www.imaputz.com/cssStuff/bigFourVersion.html](http://www.imaputz.com/cssStuff/bigFourVersion.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-14T03:48:36.973

```
<table class="table table-striped table-condensed table-hover rsk-tbl vScrollTHead">
            <thead>
            <tr>
                <th>Risk Element</th>
                <th>Description</th>
                <th>Risk Value</th>
                <th>&nbsp;</th>
            </tr>
            </thead>
        </table>
<div class="vScrollTable">
            <table class="table table-striped table-condensed table-hover rsk-tbl vScrollTBody">
                <tbody>
                <tr class="">
                    <td>JEWELLERY</td>
                    <td>Jewellery business</td>

                </tr><tr class="">
                    <td>NGO</td>
                    <td>none-governmental organizations</td>
                    </tr>
                </tbody>
            </table>
        </div>

.vScrollTBody{
  height:15px;
}

.vScrollTHead {
  height:15px;
}

.vScrollTable{
  height:100px;
  overflow-y:scroll;
} 
```

有两张用于头部和身体的桌子对我有用

# asp.net - 将 KeyPress 事件从 VB6 转换为 VB.NET

> ID：11483381
> 
> 赞同：0
> 
> 时间：2012-07-14T11:30:41.923
> 
> 标签：asp.net, vb.net, vb6

我需要将此语言（用 VB6 编写）转换为 VB.NET：

```
Private Sub txt1_KeyPress(KeyAscii as Integer)
   If KeyAscii=13 Then
       XXX=CStr(txt1.Text)
       txt2.SetFocus
   End If
End Sub 
```

我只是希望通过`Enter`按键 (KeyAscii=13) txt1 将焦点设置为下一个文本框`txt2`。

有人能帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T11:52:27.427

尝试这个：

```
Private Sub Txt1_KeyPress(sender As Object, e As System.Windows.Forms.KeyPressEventArgs) Handles Txt1.KeyPress
    If e.KeyChar.ToString = ChrW(Keys.Enter) Then
        Txt2.Focus()
        e.Handled = True
    End If
End Sub 
```

# javascript - 用于选择国家然后状态的下拉菜单

> ID：11483387
> 
> 赞同：0
> 
> 时间：2012-07-14T11:32:16.043
> 
> 标签：javascript, html, drop-down-menu, html-select

我想创建一个下拉菜单，它会在所选值的基础上生成另一个下拉菜单，例如，如果从第一个下拉菜单中选择美国，那么第二个下拉菜单包含美国的州。我已经完成了大部分工作。我更喜欢 javascript 并使用数组

```
var country_arr = new Array("USA", "Singapore", "Pakistan")
var s_a = new Array();
s_a[0]="";
s_a[1]="CA|NJ|NY";
s_a[2]="paas|naas|taas";
s_a[3]="Islamabad|karachi|lahore"; 
```

但我还希望选择国家和州的“名称”，以发送到 mysql 数据库。我想我必须为此使用二维数组。但这次无法编码，非常需要你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T12:38:19.030

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript">
        var citiesByState = {
            USA: ["NY","NJ"],
            Singapore: ["taas","naas"]
        }
        function makeSubmenu(value) {
            if(value.length==0) document.getElementById("citySelect").innerHTML = "<option></option>";
            else {
                var citiesOptions = "";
                for(cityId in citiesByState[value]) {
                    citiesOptions+="<option>"+citiesByState[value][cityId]+"</option>";
                }
                document.getElementById("citySelect").innerHTML = citiesOptions;
            }
        }
        function displaySelected() {
            var country = document.getElementById("countrySelect").value;
            var city = document.getElementById("citySelect").value;
            alert(country+"\n"+city);
        }
        function resetSelection() {
            document.getElementById("countrySelect").selectedIndex = 0;
            document.getElementById("citySelect").selectedIndex = 0;
        }
    </script>
</head>
<body onload="resetSelection()">
    <select id="countrySelect" size="1" onchange="makeSubmenu(this.value)">
        <option></option>
        <option>USA</option>
        <option>Singapore</option>
    </select>
    <select id="citySelect" size="1">
        <option></option>
    </select>
    <button onclick="displaySelected()">show selected</button>
</body>
</html> 
```

# javascript - 使用 -webkit-animation 时 webkitTransitionEnd 未触发

> ID：11483395
> 
> 赞同：3
> 
> 时间：2012-07-14T11:33:04.500
> 
> 标签：javascript, animation, css, webkit

-webkit-transition 和 -webkit-animation 有什么区别？出于某种原因，当我使用 -webkit-animation 时，webkitTransitionEnd 不会触发。

如何使用此代码 [http://jsbin.com/oveval/7/edit](http://jsbin.com/oveval/7/edit)找出动画何时完成。我已将事件侦听器附加到所有动画元素，但它们都不会触发。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T12:01:58.563

解决方案就在那里：http: [//jsbin.com/oveval/10/](http://jsbin.com/oveval/10/)。您需要使用`webkitAnimationEnd`事件。[https://developer.apple.com/documentation/webkitjs/webkitanimationevent](https://developer.apple.com/documentation/webkitjs/webkitanimationevent)

（警报似乎不适用于 jsbin ..）

# ruby-on-rails - 未初始化的常量 Faker::CONFIG

> ID：11483399
> 
> 赞同：0
> 
> 时间：2012-07-14T11:33:44.767
> 
> 标签：ruby-on-rails, faker

我希望 Faker 生成“英语”语言的句子。

我已经使用了**require 'faker'**。

当我使用**Faker::Name.name**时，它​​工作正常。

当我使用**Faker::Config.locale = :en 时，**它给出了错误`uninitialized constant Faker::CONFIG`。

我错过了什么吗？.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:12:36.810

我认为您使用的是非常过时的 Faker gem 版本。当前版本似乎是 1.0.1。

也许你应该`gem faker`先试试？

# php - 如何制作一个漂亮的 URL，但仍然使用 PHP 获取数据

> ID：11483400
> 
> 赞同：-2
> 
> 时间：2012-07-14T11:33:55.577
> 
> 标签：php, url, get

我正在尝试制作一个动态页面，它将根据 URL 显示内容，但我想知道是否可以使 URL 对用户更具可读性。

所以我有一个名为 work.php 的页面，它将根据 URL 中传递的 ID 显示某项工作。所以 work.php?project=1 会显示项目 1。

有没有办法使用更像 www.website.com/work/projectname 的 URL 来实现相同的效果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:06:14.513

如果仅针对一个或两个特定脚本，您可以查看 Apache Rewrites 的工作方式，这将使其显示为 www.website.com/work/projectname 并且在后端表现得好像它是 work.php?project= 1

```
Here is an example:
# Turn on URL rewriting
RewriteEngine On
RewriteBase /
RedirectRule ^work.php?project=(.*) http://www.website.com/work/$1 
```

如果这将是一个包含大量这些页面的项目，并且您不想编写大量这些规则，我建议您研究一个 MVC 框架，例如 Kohana、Yii 等来处理这个问题以及许多其他的东西给你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T11:38:10.557

看看这个：[.htaccess 和 mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html) for apache

然后你可以处理代表的网址`$_SERVER['REQUEST_URI']`

** 附录 **

例如我在`.htacess`文件中使用这样的东西：

```
Options +FollowSymLinks
IndexIgnore */*
# Turn on the RewriteEngine
RewriteEngine On
RewriteBase /
#  Rules
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php 
```

因此，我将始终确定`index.php`解析 URI 的位置，并将其用作我的页面的分发器和路由器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T11:59:08.037

您必须创建一个名为 .htaccess 的文件（仅此而已）。将此文件与网站的其他文件放在同一文件夹中。您可能必须打开“显示隐藏文件”才能在创建文件时看到它。

在 .htaccess 中你可以这样写：

RewriteRule 上的 RewriteEngine ^work/([a-zA-Z0-9_-]+)$ work.php?product=$1

此代码将为您提供工作/1

# javascript - 确定对象何时准备就绪。我应该使用事件吗？

> ID：11483403
> 
> 赞同：1
> 
> 时间：2012-07-14T11:34:30.753
> 
> 标签：javascript, events, design-patterns

我正在编写一个画布赛车游戏，并计划使用事件来确定每个游戏对象何时初始化并准备好使用。首先，我尝试将事件侦听器添加到我的对象，但意识到它们只能附加到 html 元素。作为一种解决方法，我改为向窗口对象添加了一个侦听器。

对于我是否应该使用事件来解决这个问题，以及我应该查看任何常见的模式/方法，我将不胜感激？我打算阅读观察者模式，这似乎适合这种情况吗？

下面的代码片段显示了我目前正在做的事情。当 Track 对象的所有项目都被加载时，它会调度一个事件，该事件被附加到窗口对象的事件侦听器捕获。

主要的：

```
function game() {
  var loadCount = 0;
  var itemsToLoad  = 10; 

  window.addEventListener("finishedLoading", itemLoaded, false);      
  function itemLoaded(event) {
    loadCount++;
    if(loadCount >= itemsToLoad)
    {
      gameStateFunction = title;
    }
  }
} 
```

跟踪对象：

```
function Track(name, bgTileSheet) {  
  this.backgroundImage = new Image();
  this.itemsLoaded = 0;
  this.itemsToLoad = 3;
  this.loadedEvent = new CustomEvent("finishedLoading", {
    detail: {
      objectType: "track"
    },
    bubbles: true,
    cancelable: false
  });

  this.centerPath = null;
}

Track.prototype.updateLoadProgress = function() {
  this.itemsLoaded++;
  if(this.itemsLoaded >= this.itemsToLoad)
  {
    dispatchEvent(this.loadedEvent);
  }
};

Track.prototype.init = function() {
  //calls loadItems() when XML data is ready
};

Track.prototype.loadItems = function() {
  this.loadBackground();
  this.loadMapDimensions();
  this.loadPaths();
};

Track.prototype.loadBackground = function() {
  var self = this;
  this.backgroundImage.addEventListener("load", 
    function() {
      self.updateLoadProgress();
    }, 
    false);     
  this.backgroundImage.src = Track.TILESHEET_DIR + this.bgTileSheet;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:12:14.093

是的，我会说事件是这样的方式。只是您必须放宽对事件的定义，使其不再是仅可附加到 HTML 元素的事件。

您最终将用于此类事情的大多数模式——观察者、订阅者、中介者，等等——将在另一种意义上使用一种人为的事件形式。

您可能想要研究的一件事是 jQuery 的延迟对象。这些通常与 AJAX 相关联，但也可以以非常有效的方式用于人为的主观事件。

几个月前我写了一篇关于这个[的博客文章，展示了一种技术。](http://www.mitya.co.uk/blog/2012/Apr/Non-AJAX-use-for-jQuerys-deferred-objects-207)

这是一个快速示例：

```
function SomeClass() {
    this.ready = false;
    this.deferred = $.Deferred();
}
SomeClass.prototype.makeReady = function() {
    this.ready = true;
    this.deferred.resolve();
}
var myInstance = new SomeClass();

//listen for ready
$.when(myInstance.deferred).done(function() { alert('object is ready!'); });

//after a while, let's say we're ready
setTimeout(function() { myInstance.makeReady(); }, 2000); 
```

这里的超时只是模拟您设置对象的真实环境 - 执行 AJAX 请求、其他代码等等。

最后，虽然您确实不能直接将事件附加到对象，但您可以通过[getters/setters](http://www.mitya.co.uk/blog/2012/Mar/JavaScript-getters-and-setters-varying-approaches-204)将对象附加到对象属性。

# objective-c - 自定义 UITableViewCell 中的 UIImageView - 始终调整为图像大小

> ID：11483411
> 
> 赞同：0
> 
> 时间：2012-07-14T11:35:52.983
> 
> 标签：objective-c, ios5, uiimageview

我在自定义 UITableViewCell 中有一个 UIImageView，

并且无论我在其中放置哪个图像，它总是会调整大小以适应图像，而不是相反。

所以如果图像非常大，就会占据整个单元格！我将 UIImageView 设置为 ScaletoFill，但我不明白为什么会这样。

编辑：请求代码..所以这就是我在构建 UITableViewCell 的函数内将图像分配给 UIImageView 的方式。

```
UIImageView* ivImage = (UIImageView*)[cell ViewwithTag:0];
ivImage.image = //Some image I have that's loaded from a URL or from local 
```

基本上就是这样。单元格中的 UIImageView 在 IB 中创建为特定大小。

谢谢

罗伊

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-14T11:42:32.137

您是否尝试将 contentMode 设置为中心？？？

就像是

```
[cell.imgView setContentMode:UIViewContentModeCenter]; 
```

# php - AJAX PHP JSON编码不返回所有结果

> ID：11483417
> 
> 赞同：1
> 
> 时间：2012-07-14T11:36:57.527
> 
> 标签：php, javascript, ajax, json

我会简短...我要跳了

并非所有结果都有效

在我包含的文档标题中`jquery-1.7.2.min.js`-

我的查询：

```
"SELECT tableA.columns_xyz..., tableB.columns_xyz..., tableC.columns_xyz 
FROM tableB
JOIN tableC ON tableB.x = tableC.x
JOIN tableA ON tableB.x = tableA.x
WHERE tableA.x = '$query_value'
GROUP BY tableA.y
ORDER BY tableA.y DESC 
LIMIT 1"; 
```

问题1：

更改`LIMIT 1`为`LIMIT 5`或任何 >1 并且查询在 phpmyadmin 中执行良好，但不是通过 ajax/json/php

php：

```
$sql = above...
$result = $mysqli->query($sql);
while($row = mysqli_fetch_array($result)) {
echo json_encode(array($row['x'],$row['y'],....$row['z']));
$mysqli->close(); 
```

的JavaScript：

```
$.ajax ({
    url: 'script.php',
    type: "post",
    dataType: "json",
    data: {value : $("#searchbox").val()},
    success: function(data) {
        var a = parseFloat(data[0]);
        var b = parseFloat(data[1]);
        var c = data[2];

            document.getElementById("blah1").innerHTML = a;
            document.getElementById("blah2").innerHTML = b;
            document.getElementById("blah3").innerHTML = c;
       }
}); 
```

的HTML：

```
<td><span id="blah1"></span></td>
<td><span id="blah2"></span></td>
<td><span id="blah3"></span></td> 
```

问题2：

有些元素正在打印到页面，有些则没有。我究竟做错了什么 ？

问题3：

我知道我应该能够表达`document.getElementById("blah1").innerHTML;`，`$('#blah1');`但`$('#blah1');`就是不工作......我不知道为什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T11:44:19.663

您不应该创建一个对象，然后对整个对象进行 json 编码，而不是 json 对每一行进行单独编码吗？

我对 sql 不是很好，但是 LIMIT 大于 1 意味着您期望返回不止一行（可能），对吗？

如果是这样，那么您实际上是在一个响应中返回多个 json 响应，我认为您不应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T11:49:35.937

将每一行存储在一个数组中，然后使用 json_encode 一次：

```
$store = array();
while($row = mysqli_fetch_array($result)) {
    $store[] = array('x'=>$row['x'], 'y'=>$row['y'], 'z'=>$row['z']);
}
echo json_encode($store); 
```

然后你可以`JSON.parse`在客户端使用：

```
var store = JSON.parse(data) 
```

然后循环遍历：

```
for(var x in store){
    $('#blah1').html(store[x]['x']);
} 
```

您已经在使用 jquery，所以为什么不通过转换来充分利用它：

```
document.getElementById("blah1"); 
```

到它的 jquery 版本：

```
$('#blah1'); 
```

只要确保这些元素是唯一的，因为您使用的是 ID

# jquery - jQuery函数查找类和fadeToggle另一个具有相同类的div

> ID：11483422
> 
> 赞同：0
> 
> 时间：2012-07-14T11:37:45.183
> 
> 标签：jquery

我正在电子商务网站上工作，我正在尝试制作它，以便在单击显示类别名称的列表项时，相关的产品类别（在“产品显示”div 中）将淡出切换。我希望淡入淡出的列表项和 div 都分配了相同的类名。

我怎么能通过 jQuery 做到这一点？

```
<ul id="product-filter">
 <li class="cat_1">category 1</li>  // Clicking on this li item...
 <li class="cat_2">category 2</li>
</ul>

<div id="product-display">
  <div class="cat_1">  // fadeToggles this div
    <img src="image1.gif">
</div>

  <div class="cat_2">
    <img src="image2.gif">
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:00:44.117

也许是这样的：

```
$('#product-filter li').click(function() {
    $('#product-display div.' + $(this).attr('class')).fadeToggle();
}); 
```

也就是说，单击其中一个 li 元素获取其类，然后在“product-dislay”中选择适当的匹配项。

话虽如此，如果是我的代码，我不会使用类来链接项目，因为它使得将其他类应用于 li 元素有点困难——我可能会使用数据属性。对于产品 div，我可能会使用 id，因为它们似乎是独特的项目：

```
<ul id="product-filter">
   <li data-category="cat_1">category 1</li>
   ...

<div id="product-display">
    <div id="cat_1">

$('#product-filter li').click(function() {
    $('#' + $(this).attr('data-category')).fadeToggle();
}); 
```

此外，我可能会将锚元素放在 li 元素中，因为这样可以通过键盘“点击”它们（对于不能或不使用鼠标或其他指针设备的用户）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T11:43:51.810

```
$('#product-filter li[class^=cat_]').click(function()
{
    $('#product-display div[class=' + $(this).attr('class') + ']')
        .fadeIn(); // or whatever fade logic you need
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T18:24:38.797

这个怎么样：

```
$('#product-filter').find('li').each(function() {
    $(this).click(function() {
        var item = $(this).attr('class');
        $('#product-display').find('.'+item).fadeToggle();
    });
}); 
```

# android - 有没有关于如何在 Android 上编辑图像的教程？

> ID：11483429
> 
> 赞同：0
> 
> 时间：2012-07-14T11:38:33.637
> 
> 标签：android, android-canvas

出色地，

我正在开发一个应用程序，我将从相册中选择一些图片，然后在这张图片上添加一些其他图片。之后，我将有一个“保存”按钮，在用户编辑图像后，我将以 jpg 格式保存“最终”图像。我的问题是显示我选择的图像，进行更改，向该图像添加另一个图像，然后保存它......我找到了在屏幕上显示一个图像，另一个要保存的教程，但没有关于将图像添加到一张图片并最终保存。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:48:41.580

yes i have faced same problem but now it's solved.For solution you can use capture screen and save bitmap in sdcard.If capture screen not working than you can use screen snapshot it's work fine for me.The code like this:-

//it's root layout of your xml layout file LinearLayout L1 = (LinearLayout) findViewById(R.id.LinearLayout01);

//Code which you can use for snapshot

```
 View v1 = L1.getRootView();
            v1.setDrawingCacheEnabled(true);
            Bitmap bm = v1.getDrawingCache(); 
```

ok i hope it's helpful for you.Ok gdluck

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T13:30:11.403

您是否将位图用于在当前图像之上添加的图像？如果是，则尝试使用此功能：因此，基本上，您必须检测屏幕上的触摸事件并获取触摸事件的 X 和 Y 坐标，然后传递原始图像，即您要添加的图像在顶部你的原始图像，X坐标和Y坐标。

```
public Bitmap drawableOnImage(Bitmap imageBackground, Bitmap itemOnImage,
                                      int xScreenOffset, int yScreenOffset)
{

Canvas canvas = new Canvas(imageBackground);
canvas.drawBitmap(imageBackground, 0, 0, null);

canvas.drawBitmap(itemOnImage, xScreenOffset, yScreenOffset, null); 

return Bitmap.createBitmap(imageBackground);

} 
```

# php - 从多个用户获取行并按日期排序显示它们

> ID：11483432
> 
> 赞同：0
> 
> 时间：2012-07-14T11:39:01.507
> 
> 标签：php, mysql

我正在构建一个从订阅表中获取用户的函数。然后这些用户用于获取他们的个人文章并以有序的方式显示它们。

我已经成功做到了一半。它将获取用户，然后输出用户的文章。但是一次需要一个用户。我正在寻找一种方法来选择订阅表中的所有用户并将它们全部获取，以便我可以同时显示它们，但按日期排序。

表格：

* * *

```
**Subscribe :** 
Lastviewed ( datetime ) 
Uniqueuser ( userid )
Subscription ( subscribed users id) 
```

* * *

```
**Article:**
date_posted ( datetime )
uniqueuser ( users id) 
```

* * *

这就是我得到的：

```
$sesname = $_SESSION['full_name'];
$sesid = $_SESSION['user_id'];

connectDB();
$sql ="select * from subscribe where uniqueuser = '$sesid'";
$rsd = mysql_query($sql);

while ($row = mysql_fetch_array($rsd))
{
    $subscription = $row['subscription'];
    $lastviewed = $row['lastviewed'];
    $substart = $row['substart'];
    $sql3 = "select * from article 
        where uniqueuser = '$subscription' 
        and date_posted > '$lastviewed' 
        order by date_posted 
        desc limit 0, 7";

    $rsd3 = mysql_query($sql3);
    $newarticles = mysql_num_rows($rsd3);

    while ($row3 = mysql_fetch_assoc($rsd3)) {
        $id  =$row3['id'];
        $title = $row3['title'];
        $uid = $row3['uniqueuser'];
        $sql2 = "SELECT * FROM users WHERE id = '$uid'";  
        $result2 = mysql_query($sql2);

        while ($row2 = mysql_fetch_assoc($result2)) {
            $name = $row2['user_name'];
            echo "<b><a>{$name}</a></b> wrote an <a>article</a><br>";
        }
    }
} //END SUBSCRIBE 
```

这输出：

```
User A wrote an article (1th july)
User A wrote an article (2th july)
User A wrote an article (3th july)
User A wrote an article (4th july)
User B wrote an article (1th july)
User B wrote an article (2th july)
User B wrote an article (3th july)
User B wrote an article (4th july) 
```

即使用户 B 的文章在用户 A 的帖子之间发布，它也会一个接一个地订购它。

想要的输出：

```
User A wrote an article (1th july)
User B wrote an article (1th july)
User A wrote an article (2th july)
User B wrote an article (2th july)
User A wrote an article (3th july)
User B wrote an article (3th july)
User A wrote an article (4th july)
User B wrote an article (4th july) 
```

那么，无论用户写了什么，我如何将它打包并按日期排序？我认为我的问题是由于订阅查询上的 while 循环，但我不知道有任何其他方法可以做到这一点。任何帮助是极大的赞赏！=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:34:34.133

或多或少简单地加入所涉及的 3 个表并按**a.date_posted排序**

```
$sql2 = "select a.* , u.user_name, a.id as article_id, u.id as user_id 
    from subscribe s
    join article a on s.subscription = a.uniqueuser AND s.lastviewed < a.date_posted
    join user u on a.uniqueuser = u.id
    where s.uniqueuser = '$sesid'
    order by a.date_posted 
    desc limit 0, 7";

$result2 = mysql_query($sql2);

while ($row2 = mysql_fetch_assoc($result2)) {
    $name = $row2['user_name'];
    $date = $row2['date_posted'];
// fetch the columns having the same name using aliases
$a_id = $row2['article_id'];
$u_id = $row2['user_id'];

    echo "<b><a>{$name}</a></b> wrote an <a>article</a>({$date})<br>";
} 
```

编辑

修复条件 s.lastviewed < a.date_posted

添加关于加入

**两个或多个表之间的连接**是具有有效/真实条件（ON 和 WHERE）的表的所有元素的所有组合的集合

# php - 替换字符串中的字段值

> ID：11483434
> 
> 赞同：0
> 
> 时间：2012-07-14T11:39:08.630
> 
> 标签：php

我想将从数据库查询中获得的字段值替换为字符串中的对象数组，如下所示：

```
"My name is {name} and I live in {city}." 
```

我找到了以下解决方案，但仅当我用普通字符串而不是对象属性替换值时才有效：

```
preg_replace('/\{([a-z]+)\}/', "$row->\\1", $myString) 
```

我收到此错误：*类 stdClass 的对象无法转换为 string*。

为什么它不能评估 $row-> 字段名？

此致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T11:45:30.607

您问

> 为什么不能评价`$row->fielname?`

对于以下代码行：

```
preg_replace('/\{([a-z]+)\}/', "$row->\\1", $myString) 
```

为了更好地理解这一点，请查看相关字符串：

```
"$row->\\1" 
```

考虑到 PHP 双引号字符串变量替换的规则，在调用函数*之前会产生以下结果：*

```
***contents of the variable $row as string*** . '->\1' 
```

如果`$row`无法转换为字符串（对象可能会发生这种情况），这将产生致命错误。

如果`$row`包含数字`42`，它将是这样的：

```
preg_replace('/\{([a-z]+)\}/', '42->\\1', $myString) 
```

希望这个例子有用。

您可能想要做的是以下内容：

```
preg_replace_callback('/\{([a-z]+)\}/', function($groups) use ($row) {
    return $row->{$groups[1]};
}, $myString); 
```

# c# - 如何让 VS 2010 默认创建 x64 项目？

> ID：11483435
> 
> 赞同：2
> 
> 时间：2012-07-14T11:39:16.593
> 
> 标签：c#, .net, visual-studio-2010

我有一个完整的 x64 解决方案，每次我创建一个项目时，它默认是一个 x86 项目，我必须手动将它转换为 x64。有没有办法默认这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T11:46:19.730

在 C# .NET 项目和解决方案中，默认目标平台应该是“任何 CPU”而不是 x86，这意味着编译后的 IL 能够在经典的 x86 和 x64 系统上运行而无需任何更改并在本机模式下运行......

**编辑**

抱歉，我刚刚注意到 Visual Studio 2010 中的行为发生了变化，请查看[此处](http://blogs.msdn.com/b/rmbyers/archive/2009/06/8/anycpu-exes-are-usually-more-trouble-then-they-re-worth.aspx)以获取有关此选择原因的更多信息...

> 那么 Visual Studio 2010 和 .NET 4.0 有何变化？我们没有在 CLR 或编译器中更改任何内容 - 它们继续支持这两种模式。但是，在讨论了这些问题后，VS 项目系统团队已经同意在 VS 2010 中将 EXE 项目默认为 x86 平台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T16:34:12.550

您可以简单地修改项目模板。例如，WPF 应用程序的项目模板存储在 C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\ProjectTemplatesCache\CSharp\Windows\1033\WPFApplication.zip

使用文本编辑器打开该 .zip 文件中的 .csproj 文件，并将`<Platform>`元素从 x86 修改为 AnyCPU。首先制作一个备份副本。

# delphi - 如何在 Delphi 中使用 NativeXML 遍历 XML 文档中的相似节点？

> ID：11483436
> 
> 赞同：0
> 
> 时间：2012-07-14T11:39:20.617
> 
> 标签：delphi, nativexml

我目前在 Delphi 中使用 NativeXML，并且我的 XML 文档具有以下结构：

```
<?xml version="1.0"?>
<Request>
  <RequestId>5429935816</RequestId>
  <CompletedDate>2012-07-12T12:06:57+00:00</CompletedDate>
</Request>
<RequestId>
  <RequestId>5428581330</RequestId>
  <CompletedDate>2012-07-12T04:21:46+00:00</CompletedDate>
</Request> 
```

基本上我需要知道文档中每个 RequestID 的值。

提前谢谢你，问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T19:06:54.210

这是一些代码（未经测试，从我的记忆中写出来..），它显示了如何通过节点循环......（当然你必须用一些真实的代码替换 strBuf-thing 和文件名......）

```
procedure ReadNodes;
var
  strBuf: string;
  i: Integer;
begin
  aXMLDoc := TNativeXML.Create;
  try
    aXMLDoc.ExternalEncoding := seUTF8; //for example...
    aXMLDoc.LoadFromFile(FileName);

    if assigned(aXMLDoc.Root) then
    begin 
      for i := 0 to aXMLDoc.Root.NodeCount - 1 do                                                          
      begin
        strBuf := aXMLDoc.Root.Node[i].NodeByName('RequestID').ValueAsString;
      end; 
    end;
  finally
    aXMLDoc.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T10:52:29.130

```
 Node.FindNodes('Request', AList);  
 for I := 0 to AList.Count - 1 do begin  
  Node2 := TXmlNode(AList[I]);  
  if Assigned(Node2.NodeByName('RequestId')) then begin  
    Node3 := Node2.NodeByName('RequestId');  
    s := Node3.ValueUnicode;  
    //...s  
  end;  
 end; 
```

# javascript - 使用 jquery，是否可以显示和隐藏包含 javascript 的 div？

> ID：11483438
> 
> 赞同：0
> 
> 时间：2012-07-14T11:39:25.160
> 
> 标签：javascript, jquery, html

我有一些实现幻灯片放映的 javascript 代码。

我已将运行幻灯片的函数放置在这样的 div 中：

```
<div id="portfolio">

  <script>

    var imgArray = new Array();
    imgArray[0] = "smaller_acorn.jpg";
    imgArray[1] = "slideshow/01.jpg";
    imgArray[2] = "slideshow/02.jpg";
    imgArray[3] = "slideshow/03.jpg";
    imgArray[4] = "slideshow/04.jpg";
    imgArray[5] = "slideshow/05.jpg";
    imgArray[6] = "slideshow/06.jpg";

    slideshowMerge('Slideshow1','',imgArray,20,3000);
  </script>
</div> 
```

我想使用 jquery 悬停功能显示/隐藏这个 div。我已经编写了一些工作 jquery 悬停函数来改变其他元素的不透明度。

```
 $("#contact").hover( function () {
     $('#acorn').css({opacity : .1});
     $('#contactblurb').css({opacity: 1.0});
 }, function () 
 {
     $('#acorn').css({opacity : .5});
     $('#contactblurb').css({opacity: 0.0});
 }
 ); 
```

但是显示/隐藏或更改不透明度似乎不适用于此 div。

有任何想法吗？

注意 - 请在此处查看 jsFiddle：

[http://jsfiddle.net/beeband/qgW9V/12/](http://jsfiddle.net/beeband/qgW9V/12/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T11:58:50.517

当然，诀窍是确保`<script>`标签可见：

```
$("#portfolio > script").css("display","block");​​​​​​​​​​​​​​​ 
```

请注意，`.show()`这在这里不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T11:50:55.973

[这是一个 jsFiddle](http://jsfiddle.net/brianflanagan/ZkWbH/)来演示。图像交换的 JavaScript 与您尝试对悬停触发器执行的操作不同。我不确定您是否希望它们无论如何都相关，但您仍然需要悬停首先起作用。

# python - python搜索元组列表

> ID：11483439
> 
> 赞同：1
> 
> 时间：2012-07-14T11:39:34.847
> 
> 标签：python, list, search, increment

我只是想问你如何在 python 中搜索元组列表，比如：

```
[("A","B",3),("C","D",4),("E","F",5)] 
```

假设用户搜索`"A", "B"`: 因为`"A", "B"`在列表中，它将增加`3.`并再次输出列表

```
[("A","B",4),("C","D",4),("E","F",5)] 
```

如果用户搜索`"A", "S"`，程序将创建一条新记录并将其保存在数据库中。

```
[("A","S",1),("A","B",3),("C","D",4),("E","F",5)] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T11:50:57.860

如果您使用，此任务将变得简单`collections.Counter`

首先，您需要`Counter`通过迭代序列并使用前两项的元组来创建一个，例如。`("A", "B")`作为键和数字，例如。`3`作为价值。

然后你可以简单地做`c[("A", "B")] += 1`例如。如果钥匙不在柜台中，它也可以工作，例如。`c[("A", "S")] += 1`.

您可以从中创建一个列表以使用列表理解来输出它，但我将把它留给您，因为这是家庭作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T11:53:03.143

```
lis=[["A","B",3],["C","D",4],["E","F",5]]

def search_and_increment(local_list,search):
    for x in local_list:
        if search in ",".join(x[:-1]):
            x[-1]+=1
            return
    else:
        local_list.append(search.split(",")+[1])
        return 
```

**输出：**

```
>>> search_and_increment(lis,"A,B")
>>> lis
[['A', 'B', 4], ['C', 'D', 4], ['E', 'F', 5]]
>>> search_and_increment(lis,"A,S")
>>> lis
[['A', 'B', 4], ['C', 'D', 4], ['E', 'F', 5], ['A', 'S', 1]]
>>> search_and_increment(lis,"A,S")
>>> lis
[['A', 'B', 4], ['C', 'D', 4], ['E', 'F', 5], ['A', 'S', 2]]
>>> search_and_increment(lis,"E,F")
>>> lis
[['A', 'B', 4], ['C', 'D', 4], ['E', 'F', 6], ['A', 'S', 2]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T11:55:05.180

整个事情有点棘手，因为元组是不可变的，这意味着它们无法更改。相反，您必须复制并阅读它们。

如果你真的需要使用元组，这段代码应该可以工作（尽管它可能完全不是最好的解决方案）。但是，此解决方案不会使列表元素保持有序。

否则，jamylak 的解决方案看起来要好得多。

```
def search_and_inc_list(tuple_list, search_tuple):
    found = False

    for index, element in enumerate(tuple_list):
        last_index = len(search_tuple)
        if element[0:last_index] == search_tuple:
            new_element = element[0:last_index] + (element[last_index]+1,)
            found = True

            tuple_list[index] = new_element

            # You may add break here if elements are unique

    if found == False:
        new_tuple = search_tuple + (1,)
        tuple_list.append(new_tuple)

mylist = [("A","B",3),("C","D",4),("E","F",5)]
print(mylist)
search_and_inc_list(mylist, ("A", "B"))
print(mylist)
search_and_inc_list(mylist, ("A", "C"))

# [('A', 'B', 3), ('C', 'D', 4), ('E', 'F', 5)]
# [('A', 'B', 4), ('C', 'D', 4), ('E', 'F', 5)]
# [('A', 'B', 4), ('C', 'D', 4), ('E', 'F', 5), ('A', 'C', 1)] 
```

# mysql - Mysql 正则表达式允许数字和'+'

> ID：11483443
> 
> 赞同：1
> 
> 时间：2012-07-14T11:40:34.760
> 
> 标签：mysql, regex

我有一个 mysql 表，其中有一列包含电话号码 - 有些不是真正的电话号码，我想通过触发一个查询来找出它，上面写着“将所有电话号码设置为 NULL 其中电话号码包含0-9 和 '+' 以外的其他字符"

到目前为止，我想出了以下内容，但不知道如何为“+”添加容差：

```
$query="UPDATE table SET phone='NULL' WHERE phone REGEXP ('[0-9]')!=1";
mysql_query($query); 
```

有人知道如何在该查询中容忍“+”吗？此外，“+”必须位于电话号码的开头。

谢谢！

查尔斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T11:46:03.733

首先，使用`NOT REGEXP`代替`!=1`. 要在开始时选择允许`+`，请使用`^\\+?`. 由于`+`是正则表达式中的特殊字符，因此必须用反斜杠转义（必须用另一个反斜杠转义）。然后，您需要一个或多个数字 ( `[0-9]+`)，直到字符串的末尾`$`。

```
$query="UPDATE table SET phone='NULL' WHERE phone NOT REGEXP '^\+?[0-9]+$'"; 
```

这将匹配任何不以可选开头`+`，后跟仅数字的内容。如果您还需要在电话号码中允许使用连字符和点，请将它们添加到`[]`字符类中：

```
'^\\+?[0-9.-]+$' 
```

# facebook - 我的应用没有“翻译您的应用”链接

> ID：11483444
> 
> 赞同：3
> 
> 时间：2012-07-14T11:40:37.787
> 
> 标签：facebook, translation, locale

我正在尝试翻译我的应用程序打开图形操作，我到处搜索，我读到的唯一内容是单击“翻译您的应用程序”链接（`http://www.facebook.com/translations/admin/`）和“访问翻译管理面板”（`https://www.facebook.com/translations/admin/dashboard.php`），但两个链接都不起作用对我来说，也许文档是旧的：-/，所以我不知道如何访问我的应用程序翻译......

我发现输入`https://www.facebook.com/translations/admin/dashboard.php?app=[YOUR APP ID]`你可以进入管理仪表板，但所有翻译都是 0% 虽然我有一些翻译和接受的文本，如果无法从开发人员部分访问该链接，我想我需要在我的应用程序中激活一些东西因此启用了翻译。

编辑：当我编辑我的应用程序时，我在左侧看到的链接是：

使用调试工具 - 使用 Graph API Explorer - 查看应用时间线视图 - 通过广告推广 - Eliminar 应用

我迷路了：-/请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T09:58:23.710

你要做的是去 https://www.facebook.com/translations/admin/dashboard.php?app=[YOUR APP ID]。所有的翻译当然都是 0%，因为还没有翻译。

1.  转到 https://www.facebook.com/translations/admin/dashboard.php?app=[您的应用程序 ID]
2.  点击您要翻译的语言
3.  您会找到可以翻译的文本部分
4.  完成后，检查此语言（左列）并发布（右列中的链接）

PS：注意一个错误，我现在也在体验。无论某种语言有一些翻译，进度条都可以保持为 0%。

# xml - 从手机/卡内存中读取 XML 文件，而不是从 J2ME 中的 .jar 文件中读取

> ID：11483445
> 
> 赞同：1
> 
> 时间：2012-07-14T11:40:53.850
> 
> 标签：xml, java-me, kxml2

我可以在使用将 xml 文件添加到资源时解析它

```
InputStream in = getClass().getResourceAsStream("/data.xml"); 
KXmlParser parser = new KXmlParser();
parser.setInput(new InputStreamReader(in)); 
```

但是我需要知道如何使用 kXML 读取 xml 文件，当它像（电话/卡）内存一样保存在 jar 之外时，以及如何使用 kXML 编辑它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:07:18.180

根据您的问题，我假设您想从手机内存或 sd 卡中读取 .xml 文件。此处的 .xml 文件表现为简单的文本文件，因此您需要了解[文件连接 API](http://developers.sun.com/mobility/apis/articles/fileconnection/)以满足您的要求。访问[如何阅读文本文件](http://www.bukisa.com/articles/369270_j2me-how-to-read-text-files)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T01:51:45.443

如果您的目标设备支持 JSR 172 中的 SAX，您应该使用此解析器而不是 kXML。它将减少您的应用程序的最终 jar 大小（不导入库）。[在http://www.developer.nokia.com/Community/Wiki/JSR_172:_XML_Parsing_Example](http://www.developer.nokia.com/Community/Wiki/JSR_172:_XML_Parsing_Example)有一个很好的示例它实际上将 XML 解组为 Java 对象。 `InputStream in = getClass().getResourceAsStream("/JSR172Demo.xml");`对于您的情况，您应该使用 FileConnection API 而不是启动。

然后根据需要更改对象属性。

要将您的内容写回 XML，您可以覆盖 toString 方法，使其创建您需要的 XML 字符串。

# asp.net - 如何将复杂类型对象从一个域传递到子域

> ID：11483448
> 
> 赞同：1
> 
> 时间：2012-07-14T11:41:43.917
> 
> 标签：asp.net, web-services, xmlhttprequest, dns, subdomain

我需要将保留类型对象从一个主域传递到子域，其中是安装了 ssl 的页面。所以有必要在那里发送所有值并在那里消费/

我厌倦了使用以下方法创建 Web 服务

```
[WebMethod]
    public List<Reservation> getReservation()
    {
        if (HttpContext.Current.Session["reservation"] != null)
        {
            return (List<Reservation>)HttpContext.Current.Session["reservation"];
        }
        else
        {
            List<Reservation> objres = new List<Reservation>();
            return objres;
        }

    } 
```

所以我可以在子域页面中使用该 Web 服务

以下代码写在启用 ssl 的页面上

```
 string FullUrl = "http://localhost/goldlinetravel/webservice.asmx/getReservation";
            HttpWebRequest request = WebRequest.Create(FullUrl.ToString()) as HttpWebRequest;
            request.ContentType = "text/xml; charset=UTF-8";
            request.Accept = "application / xml";
            request.Method = "POST";
            request.ContentLength = 0;
            DataSet dsReservation = new DataSet();
            using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
            {
                response.GetResponseStream();

                dsReservation.ReadXml(response.GetResponseStream());
            } 
```

它抛出错误 500 服务器错误。

Web服务中还有另一种方法

```
 [WebMethod]
    public string HelloWorld() {
        return "Hello World";
    } 
```

当我使用以下代码使用此 Web 服务时，没有错误

```
string FullUrl = "http://localhost/goldlinetravel/webservice.asmx/HelloWorld";
            HttpWebRequest request = WebRequest.Create(FullUrl.ToString()) as HttpWebRequest;
            request.ContentType = "application/x-www-form-urlencoded";
            request.Accept = "application / xml";
            request.Method = "POST";
            request.ContentLength = 0;
            DataSet dsReservation = new DataSet();
            using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
            {
                response.GetResponseStream();

                dsReservation.ReadXml(response.GetResponseStream());
            } 
```

我的 getReservation 方法没有发现什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:11:16.150

如果您打算使用它，请确保您已在 Web 服务中启用会话：

```
[WebMethod(EnableSession = true)]
public List<Reservation> getReservation()
{
    ...
} 
```

显然，既然您已经启用了会话，这并不意味着它`HttpContext.Current.Session["reservation"]`会为您提供除`null`. 您必须首先将某些内容存储到会话中。这应该在同一个 Web 服务中完成，而不是从外部完成。您不能在 ASP.NET 应用程序之间共享会话。

# android - meego 和 android 堆栈有什么不同？

> ID：11483449
> 
> 赞同：2
> 
> 时间：2012-07-14T11:41:46.703
> 
> 标签：android, linux, meego

MeeGo 和 Android 堆栈是否在 Linux 内核之上共享其用户空间中的任何相关库？

查看 Android 堆栈，我猜 MeeGo 共享 Linux 内核的所有组件，包括：

*   显示驱动程序
*   闪存驱动程序
*   工控机驱动程序
*   USB 驱动程序
*   键盘驱动程序
*   音频驱动程序
*   能源管理

怎么样：

*   WiFi 驱动程序
*   相机驱动程序
*   蓝牙驱动程序

我从 CyanogenMod 读到，当试图让 CM 在不稳定的设备上运行时，大多数抱怨似乎是 WiFi、相机和蓝牙。这是否意味着这是一个不被 MeeGo 共享的 Android 特定部分，否则它是另一个基于 Linux 的平台？

Android Stack 的其他部分呢？我猜所有的应用程序框架部分都是 Android 特定的，还有大多数库，比如媒体框架和其他。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T11:59:12.300

*   Android 使用他们的 Dalvik 虚拟机，应用程序代码由 Java 编译。还为必须使用 C++ 的高性能应用程序（例如游戏）提供了本机开发工具包 (NDK)。

*   MeeGo 操作系统主要基于诺基亚的 Qt 平台和 Qt Creator，应用程序是用 C++ 编写的。

*   Android 的重点一直是移植到主导移动设备的基于 ARM 的 CPU。

*   在 Android 中，每个内置应用程序都可以替换。在 MeeGo 中，
    禁止开发人员这样做。

*   MeeGo 旨在禁止碎片并确保应用程序
    与任何基于 MeeGo 的设备兼容。

更多信息：http: [//www.eedailynews.com/2010/05/android-vs-meego-two-approaches-to.html](http://www.eedailynews.com/2010/05/android-vs-meego-two-approaches-to.html)

# oracle - 如何在 SQLFiddle 中获取 PL/SQL？

> ID：11483450
> 
> 赞同：16
> 
> 时间：2012-07-14T11:41:48.327
> 
> 标签：oracle, plsql, sqlfiddle

任何线索如何在 SQLFiddle 中获取 PL/SQL？

我试过了

```
begin
 dbms_output.put_line('Hello World');
end;
/ 
```

或者

```
begin
 null; 
end;
/ 
```

它适用于 SQL*Plus（或 TOAD 或 SQLDeveloper 或 ...），但 SQLFiddle 只给了我

```
ORA-06550: line 2, column 36: PLS-00103: Encountered the symbol "end-of-file" when expecting one of the following: := . ( % ; : begin dbms_output.put_line('Hello World') 
```

所以似乎有某种 PL/SQL 引擎到位，但我不知道如何让它解析匿名程序单元。

参见例如[http://www.sqlfiddle.com/#!4/db36d/4](http://www.sqlfiddle.com/#!4/db36d/4)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-14T11:59:54.010

正如@Lieven 正确指出的那样：右下方有一个按钮，您可以在其中将查询终止符切换为`/`.

[http://www.sqlfiddle.com/#!4/db36d/5](http://www.sqlfiddle.com/#!4/db36d/5)上的工作示例

# xpages - 如何将下拉节点与小部件容器一起使用

> ID：11483463
> 
> 赞同：1
> 
> 时间：2012-07-14T11:43:09.107
> 
> 标签：xpages, xpages-extlib

我正在尝试使用扩展库中的小部件容器 - 特别是我想添加一个下拉节点，其中包含运行 SSJS 的选项。

在小部件容器中使用基本叶节点时，有两个感兴趣的选项。“onClick”似乎完全符合我的要求。但是，代码会在创建节点时触发 - 而不仅仅是在单击它时。实际上，它似乎一直在燃烧。

还有submitValue。我尝试将代码放在那里，因为 Ext.xml 中有一个示例。第 249 页的图书馆书（SafariBooksOnline 版），但我似乎无法让该代码运行它。

```
<xe:this.dropDownNodes>
<xe:basicLeafNode label="New Category">
<xe:this.onClick><![CDATA[#{javascript:print("onClick Code")
}]]></xe:this.onClick>
<xe:this.submitValue><![CDATA[#{javascript:print("SubmitValue Code");
sessionScope.put("currentDoc", "");
viewScope.put("showSub", false)
var c = getComponent("dynamic")
c.show("cat")}]]></xe:this.submitValue>
</xe:basicLeafNode>
<xe:basicLeafNode label="Another option"></xe:basicLeafNode>
</xe:this.dropDownNodes> 
```

我要做的是在这个完成的调用代码中设置范围变量，然后更新页面上的动态控件。从理论上讲，我认为我需要部分刷新，但我看不到设置它的方法。

在我给出的代码示例中 - onClick 在未单击事物时运行，而 submitValue - 具有我感兴趣的代码似乎根本没有触发。

任何意见，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T12:18:57.083

显然在 ApplciationLayout 控件内部，basicLeafNode 的 onclick 方法没有定义放置 SSJS 调用的位置，但实际上定义了运行 CSJS 的位置。submitValue 也是放置值的地方，因此要获得您正在寻找的行为，您应该将 submitValue 设置为“NewCategoryClick”之类的内容，然后在 applicationLayout 下定义一个 eventHandler 子项，以检查是否提交了 Value ==“ NewCategoryClick”然后运行您定义的 SSJS 代码。

# php - 如何将谷歌文档与 php 集成？

> ID：11483464
> 
> 赞同：1
> 
> 时间：2012-07-14T11:43:38.657
> 
> 标签：php, google-docs-api, google-drive-api

请帮助我为 php 集成谷歌文档。我想在 php 中使用 google docs 作为我的应用程序的数据库。我想上传和下载文件到谷歌文档，不管使用 php 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T18:45:43.943

You should use the newer Google Drive API, which allows you to perform the same tasks as the Documents List API and has completely new PHP client library and samples:

[https://developers.google.com/drive/](https://developers.google.com/drive/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T12:22:08.203

[Zend Framework gdata API](http://framework.zend.com/manual/en/zend.gdata.docs.html)可能是您想要开始的地方。一旦您有一些需要帮助的代码，我们将很乐意提供帮助。

[如果您通过编辑您的问题](https://stackoverflow.com/posts/11483464/edit)（在您的问题下方有一个编辑链接）提供有关您的要求的更多详细信息，我们也许能够提供更详细的答案。

# ios - 警报视图按钮

> ID：11483465
> 
> 赞同：1
> 
> 时间：2012-07-14T11:43:41.327
> 
> 标签：ios, xcode, button, xcode4.3, uialertview

我正在创建一个 iOS 应用程序，当分数达到 100 时，将显示此警报，并且一切正常，但按钮（分享、苹果、评价此应用程序）。

```
 - (void) buttonAction {
                counter++;
                if(counter == 100)
                    [self showAlert];
            }

            - (void) showAlert {

                UIAlertView *alert = [[UIAlertView alloc]

                                      initWithTitle:@"hello"
                                      message:@"whats you name" 
                                      delegate:nil 
                                      cancelButtonTitle:@"Dismiss" 
                                      otherButtonTitles:@"share", @"apple" , @"rate this app", nil]; 

 -(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
        if (buttonIndex == 0) { // means share button pressed
            // write your code here to do whatever you want to do once the share button is pressed
        }
        if(buttonIndex == 1) { // means apple button pressed
            // write your code here to do whatever you want to do once the apple button is pressed
        }
        // and so on for the last button
    }

                [alert show];

            }

            -(IBAction)plus {
                counter=counter + 1;
                count.text = [NSString stringWithFormat:@"%i",counter];
                if(counter == 100)
                    [self showAlert];

            }

            -(IBAction)zero {
                counter=0;
                count.text = [NSString stringWithFormat:@"%i",counter];
            }

        - (void)viewDidLoad {
            counter=0;
            count.text = @"0";
                [super viewDidLoad];

        } 
```

我想要什么我在哪里添加链接等谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-14T12:22:21.353

尝试以下...

```
UIAlertView *alert = [[UIAlertView alloc]

                      initWithTitle:@"hello"
                      message:@"whats you name" 
                      delegate:self 
                      cancelButtonTitle:@"Dismiss" 
                      otherButtonTitles:@"share", @"apple" , @"rate this app", nil]; 

[alert show]; 
```

然后在您的代码中添加以下方法：

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
      if (buttonIndex == 0) { // means share button pressed
              // write your code here to do whatever you want to do once the share button is pressed
      }
      if(buttonIndex == 1) { // means apple button pressed
              // write your code here to do whatever you want to do once the apple button is pressed
      }
      // and so on for the last button
 } 
```

一个建议，如果你在你的问题中更清楚你到底想做什么，你可能会得到更多有用的答案......

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T12:22:31.527

根据您的问题，我了解到，您需要一种方法来识别用户按下了哪个警报按钮。为此，您可以使用此委托方法：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{

} 
```

在此方法中，您需要检查用户按下的按钮索引。根据这一点，你可以做其他的事情。

要使用委托方法，您需要将`delegate`警报视图设置为`self`

如需进一步参考：http: [//developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertView_Class/UIAlertView/UIAlertView.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertView_Class/UIAlertView/UIAlertView.html)

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html#//apple_ref/doc/uid/TP40007548](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html#//apple_ref/doc/uid/TP40007548)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T12:22:36.153

您需要实现[UIAlertViewDelegate](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html)方法：`– alertView:didDismissWithButtonIndex:` 在初始化时将控制器设置为 UIAlertViewDelegate，然后在您的实现中`– alertView:didDismissWithButtonIndex:`调用与相关按钮索引相关的各种方法。

# ipad - 在 iPad 上同时在线绘图

> ID：11483466
> 
> 赞同：1
> 
> 时间：2012-07-14T11:43:46.893
> 
> 标签：ipad, web-applications, simultaneous

是否有适用于 iPad 的 Web 应用程序或应用程序使两个用户能够同时在画布上绘图，以便用户 B 可以实时观看用户 A 正在绘制的内容，反之亦然。

我的意思是，iPad 是否有类似的东西，例如可以在[FlockDraw](http://flockdraw.com/)找到（不幸的是，这是一个 Flash 应用程序）

拥有这样的工具会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:15:39.333

Scott Snibbe 刚刚发布了一个[应用程序](http://www.snibbestudio.com/2012/01/26/motionphone/)来做这种事情。我敢肯定还有其他例子。搜索*共享白板应用*

# javascript - :after 元素没有定位在 div 上

> ID：11483467
> 
> 赞同：1
> 
> 时间：2012-07-14T11:43:47.280
> 
> 标签：javascript, css

我目前正在为我的个人游戏项目制作一个小型登录页面。我想要一个不错的链接：悬停效果，所以我使用 :after 元素在链接上方定位一个三角形，但定位不起作用。

我将代码放在[jsfiddle](http://jsfiddle.net/niktehpui/xUjCC/1/)上。

目前三角形是绝对定位的，这在大量教程中工作，但它不适用于我的跨度元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T11:47:49.560

不要忘记设置`position: relative`元素`<span>`：

```
span.linktopbar {
    ...
    position: relative;
} 
```

另外，我设置`display: inline-block`为防止在悬停时出现滚动条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T11:56:45.077

它总是在中间的原因是因为 linktopbar.xi 总是从包含所有锚元素（div.footer）的包含 div 中获取其绝对位置。你已经给了 .xi 元素 left:50% 这意味着它将获得第一个包含 position:relative 的元素，并根据元素 x、y 和宽度来计算。

您需要给每个锚元素一个 xi 或者您需要使用一些 .js 来计算元素的 .position() （在 jQuery 中），然后调整 .xi 左属性值

# java - create jar file of only one package of a project in netbeans ide

> ID：11483473
> 
> 赞同：0
> 
> 时间：2012-07-14T11:44:51.153
> 
> 标签：java, jar

I would create a jar of only one package belonged to my project. this package contains a main class.how can I do?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:11:28.443

From the [jar documentation](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html):

```
jar cf jar-file input-file(s)

...
* The input-file(s) argument is a space-separated list of one or more files that you want to include in your JAR file. 
The input-file(s) argument can contain the wildcard * symbol. If any of the "input-files" are directories, the contents of those directories are added to the JAR archive recursively. 
```

So you could just specify your path as a package:

```
jar cf <jar file name> com/companyname/package/ 
```

# c++ - 如何在 GDI+ 中控制 TextureBrush 的不透明度

> ID：11483475
> 
> 赞同：-1
> 
> 时间：2012-07-14T11:45:13.967
> 
> 标签：c++, gdi+

我正在开发一个 MainForm 作为 ActiveX 控件，并且我想控制 TextureBrush 的不透明度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T21:37:49.677

使用缩放颜色变换矩阵，如[http://msdn.microsoft.com/en-us/library/ms533869%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms533869%28v=vs.85%29.aspx)中所述，将 alpha 通道缩放到您想要的级别。

该文章中的示例让您在绘制图像时使用带有颜色矩阵集的 ImageAttributes 对象，但您也可以将 ImageAttributes 对象传递给 TextureBrush 构造函数：http: [//msdn.microsoft.com/en-us/library/ ms534552%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms534552%28v=vs.85%29.aspx)

无法更改现有 TextureBrush 对象的不透明度。

# magento - Magento：addAttributeToFilter 列出空多选属性

> ID：11483482
> 
> 赞同：0
> 
> 时间：2012-07-14T11:46:24.480
> 
> 标签：magento

对于多选属性，如何过滤产品集合以查找该属性未选择任何内容的产品？我尝试了以下方法，但都没有奏效：

```
$productCollection->addAttributeToFilter( 'multi_select_attribute', array( 'null' => true ) );
$productCollection->addAttributeToFilter( 'multi_select_attribute', array( 'null' => '' ) );
$productCollection->addAttributeToFilter( 'multi_select_attribute', array( 'eq' => '' ) ); 
$productCollection->addAttributeToFilter( 'multi_select_attribute', array( 'finset' => '') ); 
```

都返回一个空集合。

那么，如何过滤产品集合以查找“multi_select_attribute”没有选择的产品？

编辑 - 附加信息：

这就是我正在做的事情：

```
$productCollection = Mage::getResourceModel('catalog/product_collection');
$this->_addProductAttributesAndPrices($productCollection);
$productCollection->addStoreFilter();
$productCollection->addAttributeToFilter( ... one of the above ... ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:04:38.683

如果您看一下，`catalog_product_entity_varchar`您会发现只有实际为产品的多选属性填充的值才被填充在那里。

这意味着如果没有为产品选择任何值，则不会在数据库中为该产品/多选属性写入任何内容，这意味着您至少需要进行某种连接或检索没有价值的产品。

一种快速而肮脏的方法是首先获取具有此多选属性值的产品，然后将它们从原始集合中取回：

```
$attribute_code = 'multi_select_attribute';

// Get a product collection and add whatever filters you have to
$collectionWithMultiSelectValue = Mage::getModel('catalog/product')->getCollection();
$collectionWithMultiSelectValue->addAttributeToSelect($attribute_code)
->addFieldToFilter(array( array('attribute'=> $attribute_code, 'notnull' => true)));

// Take products with a value for the attribute off the collection
$productCollection->addAttributeToSelect('*')
->addAttributeToFilter('entity_id', array('nin' => $collectionWithMultiSelectValue->getAllIds())); 
```

# php - 需要在php中打印表格的逻辑

> ID：11483490
> 
> 赞同：-3
> 
> 时间：2012-07-14T11:47:45.720
> 
> 标签：php, logic

```
for ($count = 1; $count < 20; $count++) {
        if ($count == 1 || $count % 4 == 0) {
            ?> <tr> <?php 
        }
        if (true) {
            ?> <td><?php echo $count; ?></td> <?php
        }
        if (($count + 1) % 4 == 0){
            ?> </tr> <?php
        } 
```

这段代码运行良好，但唯一的问题是它在前 2 行成功打印后没有以良好的顺序打印新行，它超过了一行，m 卡住了，需要逻辑使其正确。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T11:55:37.853

遍历行，然后遍历列：

```
$counts = range(1, 19);
foreach (array_chunk($counts, 4) as $rowCounts)
{
    echo '<tr>';
    foreach ($rowCounts as $count) 
    {
        printf("<td>%d</td>", $count);
    }
    echo '</tr>'; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T11:53:10.910

就个人而言，我为非常简单的表格所做的事情是：

```
function Tr ($text) {
    echo "<tr><td>$text</td></tr>";
} 
```

然后你可以像这样循环：

```
for ($count = 1; $count < 20; $count++) {
    Tr ($count);
} 
```

此外，我建议您不要像那样不断地切换进出，但我认为这只是风格问题。

# google-apps-script - API是否可以在Google Groups中插入消息？

> ID：11483493
> 
> 赞同：3
> 
> 时间：2012-07-14T11:48:39.993
> 
> 标签：google-apps-script, google-groups, google-groups-api

我正在构建用于维护我们的 Google Apps for Business 帐户的工具。

无论如何将内容发布到不是电子邮件的 Google Group 中？理想情况下来自 Apps Script，但我绝不反对使用 AppEngine 或其他接触 API 来实现这一目标。

基本用例是能够在用户帐户中提取标记的电子邮件并复制

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T03:49:21.770

谷歌今天刚刚发布了新的谷歌群组迁移 API，允许您将消息导入谷歌群组。这些消息不会通过电子邮件发送给群组成员，但会出现在群组存档中，这听起来像是您的最终目标：

[https://developers.google.com/google-apps/groups-migration/](https://developers.google.com/google-apps/groups-migration/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T17:41:25.280

Apps Script 中的[Groups 服务](https://developers.google.com/apps-script/service_groups)不提供直接将内容发布到 Google Group 的方法，尽管它有一些管理组的方法。您提到您不想通过电子邮件执行此操作，但如果以编程方式（通过 Apps 脚本）向群组发送电子邮件可行，您可以使用[MailApp](https://developers.google.com/apps-script/service_mail)或[Gmail 服务](https://developers.google.com/apps-script/service_gmail)。

# tomcat - CFWheels - 插件无缘无故被删除

> ID：11483496
> 
> 赞同：0
> 
> 时间：2012-07-14T11:49:02.337
> 
> 标签：tomcat, coldfusion, railo, cfwheels

我之前遇到了插件问题，但结果证明是我的主机“Hostek”出现了故障。好的，我想，我将设置一个本地 Railo / Tomcat 环境并在本地工作。

一切正常...除了插件...再次！

无论我做什么，CFWheels 都会删除/删除掉到插件目录中的任何插件文件夹。这让我非常生气。

我什至切换了设置：

```
<cfset set(overwritePlugins = false) />
<cfset set(cachePlugins = true) /> 
```

即使在“重新加载”应用程序之后，它似乎也没有什么区别。我尝试了很多不同的东西，现在我没有想法了。

我正在使用最新的 Railo、最新的 CFWheels，并且我在 Mac 上使用 Lion。

正如我所说，其他一切似乎都按预期工作，但是我放在这个特定文件夹中的任何内容，然后在我执行诸如刷新应用程序页面之类的简单操作时都会被删除。

什么？？我喜欢 CFWheels，但我正处于尝试其他东西的边缘，因为这似乎已经持续了太久。

请帮助一个绝望的新人。

谢谢，迈克尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:22:13.767

查看[配置和默认值](http://cfwheels.org/docs/1-1/chapter/configuration-and-defaults)一章的“插件设置”部分。

`deletePluginDirectories`设置如下所示：

> 当设置为 true 时，Wheels 将删除`plugins`文件夹中不包含相应插件 zip 文件的子目录。设置为`false`为开发您自己的插件的过程增加便利。

在我看来，最好的做法是将其设置为`false`模式`design`，但将其保留`true`在其他模式中。但是您需要确保在移动到不同的环境之前将其打包在一个 zip 文件中，否则它会像您描述的那样删除您的所有代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:04:08.887

插件文件夹中是否有插件的 zip 文件？如果没有，那就是问题所在。如果您删除 zip 文件，那么 cfwheels 将删除该插件。此外，如果还没有，值得使用插件管理器。坚持使用cfwheels。

如果您不使用插件管理器，您只需将插件 zip 文件夹放入插件文件夹即可。要删除插件，您只需删除 zip 文件。

话虽如此，强烈建议使用插件管理器。

玩得开心 cfwheels.. 你会喜欢的！

# windows-phone-7 - Windows Phone 7：无法从 WebClient 以增量方式获取下载数据？

> ID：11483498
> 
> 赞同：0
> 
> 时间：2012-07-14T11:49:22.727
> 
> 标签：windows-phone-7, webclient

在我的应用程序中，我使用`WebClient`. 我使用该事件`WebClient.OpenReadCompleted`在下载完成时收到通知。这工作正常，但是...

下载完成后，我需要将 MP3 保存到独立存储中，这在 Windows Phone 上速度非常慢，因为最多可以保存 50 MB。

我试图寻找一种方法来在我的应用程序从网络下载数据时增量接收数据并将其立即存储到独立存储中。但我找不到用`WebClient`.

我错过了什么，或者我怎样才能逐步获取下载的字节？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:01:59.187

我认为使用 WebClient 是不可能的，但是您可以异步保存到文件到独立存储而不阻塞 UI。

如果您的文件最大为 50 MB，则应使用后台文件传输而不是 WebClient

# uitextfield - 输入值时将调用哪个 uitextfield 委托

> ID：11483501
> 
> 赞同：0
> 
> 时间：2012-07-14T11:50:10.370
> 
> 标签：uitextfield, uitextfielddelegate

在 UITextfield 中输入值以及离开该文本框的焦点之前将调用哪个委托。我想在输入焦点之前将 textfiled 的值与其他字符串进行比较。如果值不匹配，则清除文本框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:03:46.027

你可以试试这个委托方法

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField 
```

这会询问代理是否应该在指定的文本字段中开始编辑。您可以将 UITextField 对象作为参数传递。

仅当焦点指向 UITextField 对象时才会调用它。

在您离开焦点（即结束编辑）之前，将调用以下委托方法：

```
- (BOOL)textFieldShouldEndEditing:(UITextField *)textField 
```

这会询问代理编辑是否应该在指定的文本字段中停止。在您的情况下，当您失去 UITextField 对象的焦点时。

在提到的第一个委托方法的实现中，您实际上可以编写用于比较 UITextField 中的文本和要与之比较的字符串的代码。

因此，您可以决定是否必须清除 UITextField 中的文本，或者保留它。

# javascript - 现在运行的功能是什么？

> ID：11483503
> 
> 赞同：2
> 
> 时间：2012-07-14T11:50:37.203
> 
> 标签：javascript, debugging, google-chrome-devtools

我使用 Google Chrome 和它的 webkit 开发工具来编写/调试我的 JavaScript。

我希望能够查看当前正在执行的函数，但我似乎找不到执行此操作的方法。似乎每个人都需要这个。请帮忙...

PS。目前我在每个函数之上执行*console.log ('Function X is running')* ......但这似乎不是很有效。至少我可以在控制台中知道正在执行什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:31:00.177

我同意其他评论者的观点，因为这可能不是了解您的代码在做什么的方法。如果您无法通过阅读它或单步执行断点（浏览器开发工具为您提供）来理解它，那么您将有一段非常长的时间来处理该代码，并且需要进行重构等。

此外，在某些地方添加 console.log 确实可能是最快和最简单的。使用[此处](https://stackoverflow.com/questions/1013239/can-i-get-the-name-of-the-currently-running-function-in-javascript)的答案获取当前正在执行的函数名称。

或者，如果您以后不添加功能，您可以考虑[这样做。](https://stackoverflow.com/questions/5033836/adding-console-log-to-every-function-automatically)我也认为[这](https://stackoverflow.com/questions/5226550/can-i-override-the-javascript-function-object-to-log-all-function-calls)可以改进以适用于所有情况。

再次使用[JS AOP 框架](http://www.dotvoid.com/2005/06/aspect-oriented-programming-and-javascript/)是多余的，但理论上可以工作。

最后，如果由于某种原因这些都不适合您，那么该产品可能就是您正在寻找的产品：http: [//www.compuware.com/application-performance-management/dynatrace-ajax-javascript-dom.html](http://www.compuware.com/application-performance-management/dynatrace-ajax-javascript-dom.html)

# python - 正则表达式仅适用于显式给定的 unicode 字符串，而不适用于模型的 unicode 字段

> ID：11483509
> 
> 赞同：0
> 
> 时间：2012-07-14T11:51:43.237
> 
> 标签：python, django

我有一个自定义模板标签来替换空格、制表符、换行符、!、@、#、$、%、&、(,)、.，用破折号：

```
re.sub('[,@#$%&_.?!\t\n ]+', '-', value) 
```

当我给时，这很好用`value parameter explicitly`：

```
re.sub('[,@#$%&_.?!\t\n ]+', '-', 'نمونه کد') 
```

或者：

```
value='نمونه کد'
re.sub('[,@#$%&_.?!\t\n ]+', '-', value) 
```

但是在模板中，当我想在对象列表的字段上使用此标签时`subject`，它不能正常工作，只是用破折号替换空格：

```
{% for n in news %}
   <a href="{% url CompanyHub.views.getNews n.subject|custom_unicode_slugify,n.pk %}" >{{n.description|safe|truncatewords_html:15}}</a>
{% endfor %} 
```

这是我的客户模板标签：

```
def custom_unicode_slugify(value):
    return re.sub('[,@#$%&_.?!\t\n ]+', '-', value)

register.filter('custom_unicode_slugify', custom_unicode_slugify) 
```

我尝试使用此标签而不使用`n|custom_unicode_slugify`，`n.subject|custom_unicode_slugify`因为我的模型`__unicode__()`方法返回`subject field`，但我收到此错误：

```
Caught TypeError while rendering: expected string or buffer 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:10:28.257

我终于想出了这个解决方案：使用模板标签时`unicode method`不会立即运行，所以我`unicode subject`定义`__unicode__`了`models.py`：

```
def __unicode__(self):
    return self.subject
def unicode_subject(self):
    return unicode(self.subject) 
```

在模板中：

```
<a href="{% url CompanyHub.views.DocDetails doc.unicode_subject|custom_unicode_slugify,doc.pk %}">{{doc.content}}</a> 
```

# android - 检查无线是否打开（即使没有连接到任何网络）

> ID：11483513
> 
> 赞同：4
> 
> 时间：2012-07-14T11:52:19.243
> 
> 标签：android, position, wireless

我可以检查无线是否启用，即使没有连接到任何网络。我需要启用无线才能获得更准确的 gps 读数。但我不需要向任何网络让步（似乎除非 wi-fi 处于活动状态，否则设备不能使用网络进行定位）。对于数据传输，我将使用移动网络。

那么，如何检查无线是否已激活？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T12:03:00.203

```
public boolean isWifiOn() {
     WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
     return wifi.isWifiEnabled();
} 
```

# c - 在 C 中创建主管进程

> ID：11483520
> 
> 赞同：1
> 
> 时间：2012-07-14T11:53:39.937
> 
> 标签：c

我想在 c 中创建一个主管进程来控制其他一些进程的启动，密切关注所有进程（以前由它自己启动）并处理任何错误，例如任何进程终止管理所有 I/O 错误该进程并使用相同的上下文以及从终止点重新启动该进程。也可以尝试解决终止后面的错误。
我搜索了很多，但没有发现任何好东西。我发现Erlang中有supervisor控制。我想在 C 中做同样的事情。我想了两种方法来做到这一点（密切关注进程的终止）：

1.  使用信号：还有两种方法：

    > a) 使用来自主管的轮询协议并定期检查进程是否正常。
    > b) 处理非主管进程中的所有信号，并在出现任何杀手信号时通知主管。

2.  使用进程记帐：正如[Stevens 中所定义的 - (pg250)](http://books.google.co.in/books?id=ZWJCvrVQUwAC&printsec=frontcover&source=gbs_atb#v=onepage&q&f=false)每当一个进程终止时，一条记录将被写入记帐文件中。我可以让主管这个会计文件驱动。每当发生任何更改时，它都会检查我们的某个进程是否已终止并进行处理。

*我想要的是有关此主管流程的任何信息，因为网上对此知之甚少。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:17:10.793

如果我理解正确，您可以做几件事。

# 管理孩子

**信号**

优点：

*   简单，自动异步
*   内置于每个 POSIX 系统中
*   内置于 C
*   `SIGHUP`如果孩子遵循信号操作的约定（ ：重新加载配置，`SIGTERM`：受控关闭，`SIGINT`：终止/忽略，`SIGKILL`：终止（没有选项）等），则允许对孩子进行少量控制

缺点：

*   不准确
*   信号只能传达非常基本的想法，没有额外的数据
*   *不保证*信号传递
**   信号很容易延迟，而在高负载下您真正可以依赖的唯一信号是`SIGKILL`*   只有两个用户定义的动作信号：`SIGUSR1`和`SIGUSR2`*

 ***会计**

优点：

*   与信号相同，因为收到有关死亡孩子的通知是通过父母接收完成的`SIGCHLD`

缺点：

*   与信号相同
*   很少控制。您可以知道孩子何时终止，并且可以重新启动它。没有额外的数据，除非你结合使用信号，否则控制*更少*。

**IPC（和 UNIX 域套接字）**

优点：

*   可靠的
*   富有的。您可以通过 IPC（甚至是完整的 HTTP）定义任意复杂的协议，也可以只共享原始内存。
*   高效的
*   POSIX 标准化
*   您定义协议——发送主管需要知道的消息，并且仅此而已。你可以告诉主管任何你需要的东西。

缺点：

*   需要对被监视的进程进行*大量*修改，这可能是不可能的。
*   要求您发明自己的协议，这可能很难。
*   更多代码。

# 限制儿童

这只是一个注释。如果您使用的是标准`fork`（或`vfork`）/ `exec`，您还可以限制子资源的使用。所以这是伪代码：

```
if(fork() != 0)
{
  setrlimit(...); //Set the resource limits of the child. Look at `man 2 setrlimit`
  exec..(...);
} 
```

`setrlimit`让我们设置进程可以拥有多少时钟 CPU、多少内存、多少文件等的限制。如果进程超过，它会被`SIGXCPU`.

* * *

以下是您应该研究的几件事：

*   `setrlimit`的[手册页](http://linux.die.net/man/2/setrlimit)
*   一本关于 Linux 编程*的* [免费电子书。](http://www.advancedlinuxprogramming.com/alp-folder/advanced-linux-programming.pdf)看一下关于 IPC 的章节。
*   [`init`](http://en.wikipedia.org/wiki/Init)在维基百科上
*   [`launchd`](http://en.wikipedia.org/wiki/Launchd)维基百科上的 OSX/BSD

总而言之，我不得不建议你使用IPC。而且如果你不能修改你想要监督的代码，你仍然可以做一些事情。如果您可以从 STDOUT 和 STDIN 获得状态，或者甚至更好地控制进程，请查看 C 标准库[`popen`](http://linux.die.net/man/3/popen)及其构建的 POSIX 的[`pipe`](http://linux.die.net/man/2/pipe).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T12:51:33.103

通过 Stevens*的 UNIX® 环境中的高级编程，*您应该会安定下来。

如果您想要一些类似程序的示例，请查看 Linux [sysvinit](http://svn.savannah.nongnu.org/viewvc/sysvinit/trunk/src/?root=sysvinit)以及其他变体，例如 Apple 的[launchd](http://opensource.apple.com/source/launchd/launchd-392.38/launchd/src/)或 init 的 BSD 变体。另一个例子是inet.d，互联网超级服务器。（[来自 Apple](http://opensource.apple.com/source/network_cmds/network_cmds-115/inetd.tproj/)或[xinit.d](http://www.xinetd.org/cgi-bin/cvsweb.cgi/xinetd/)的来源）*

# css - 我的 CSS 选择器 ":active" 不工作

> ID：11483522
> 
> 赞同：0
> 
> 时间：2012-07-14T11:53:45.080
> 
> 标签：css, css-selectors

```
#selec:active{background-color:#000000;} 
```

```
<a href="<?php>phpscript-dynamic<?>"><div id="selec">TITLE</div></a> 
```

但它不起作用......我正在使用`<div><a></a></div>`，但也不起作用。

任何人都可以帮助我吗？

* * *

编码：

::CSS::

`#selec:hover{background-color:blue;}` *＃在职的*

`#selec:active{background-color:red;}`**＃不行**

::PHP::

```
<a href="?room=<?php echo $ID;?>"><div id="selec"><?php $name;?></div></a> 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T11:56:29.517

[CSS3 规范](http://www.w3.org/TR/css3-selectors/#useraction-pseudos)指出：

> 对于哪些元素可以变为 :active 或获取 :focus 可能存在文档语言或实现特定的限制。

所以它并没有说明它不应该在你的 div 上工作。由于规范对此很宽松，因此可能存在浏览器实现差异。[@Engineer](https://stackoverflow.com/questions/11483522/my-css-selector-active-not-working/11483537#comment15165186_11483522)的演示向我展示了您的代码可以在 Chrome 中运行。

由于`a`元素肯定`:active`在每个浏览器中都有一个状态，因此以下内容肯定会起作用，例如：

```
#selec a:active {background-color:#000000;} 
```

```
<div id="selec"><a href="dynamic.php">TITLE</a></div> 
```

在这里，您使用`:active`的`a`是`#selec`. 您使用了[后代选择器](http://reference.sitepoint.com/css/descendantselector)。

它也应该反过来工作 -`:active`选择器仍在`a`：

```
a:active #selec {background-color:#000000;} 
```

```
<a href="dynamic.php"><div id="selec">TITLE</div></a> 
```

# c# - 整个行的Listview背景色，就像在列表框中一样

> ID：11483523
> 
> 赞同：0
> 
> 时间：2012-07-14T11:53:55.367
> 
> 标签：c#, listview, listbox, selection

我对 C# 中的 ListView 有疑问。我使用它而不是 ListBox，因此我可以更改项目的 BackroundColor。ListView 功能列设置为列表。

现在我的问题是，当我更改 Backroundcolor 时，它不会像我在列表框中选择一个项目时那样超过整行。有没有可能改变这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T12:06:50.557

设置此属性：

```
listView1.FullRowSelect = true; 
```

然后进入 ListView 控件的 Columns 集合并将每个`Width`属性设置为 -2。

如果 ListView 控件随表单调整大小，则必须再次重置这些列宽。尝试这样的事情：

```
private void listView1_Resize(object sender, EventArgs e) {
  foreach (ColumnHeader ch in listView1.Columns) {
    ch.Width = -2;
  }
} 
```

# ios - paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions 在 restoreCompletedTransactions 时不被调用

> ID：11483526
> 
> 赞同：7
> 
> 时间：2012-07-14T11:54:20.803
> 
> 标签：ios, objective-c, in-app-purchase, storekit

嗨，我需要在 Inapp-Purchase 中实现恢复功能，因为这创建了一个“恢复”按钮，它正在调用方法

```
-(void)restorePurchasedProductsWithProductId:(NSString*)prodID
{
    _productIdsArray = [[NSMutableArray alloc] init];
    productID = [prodID retain];
    [[SKPaymentQueue defaultQueue] restoreCompletedTransactions];
} 
```

它给了我一个输入苹果ID密码的弹出窗口。然后什么都没有发生。

我在某个地方读到它叫

```
- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions 
```

所以我确实喜欢这个

```
- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
    NSLog(@"paymentQueue");
    for (SKPaymentTransaction *transaction in transactions)
    {
        switch (transaction.transactionState)
        {
            case SKPaymentTransactionStatePurchased:
                [self completeTransaction:transaction];
                break;
            case SKPaymentTransactionStateFailed:
                [self failedTransaction:transaction];
                break;
            case SKPaymentTransactionStateRestored:
                NSLog(@"restored");
                [self restoreTransaction:transaction];
                break;
            default:
                break;

        }
    }
} 
```

但问题是上述方法既没有调用 this

```
- (void)paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue 
```

也不

```
-(void)paymentQueue:(SKPaymentQueue *)queue restoreCompletedTransactionsFailedWithError:(NSError *)error 
```

我还包括了所需的协议，

有人可以帮助我为什么这些委托方法不要求恢复过程。我正在尝试使用测试帐户。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-08T10:46:41.703

您需要确保实现`paymentQueueRestoreCompletedTransactionsFinished:`并`paymentQueue: restoreCompletedTransactionsFailedWithError:`注册为支付队列观察者的类。

如果您在 a 中编写了此代码`UIViewController`，请尝试将其添加到您的`viewDidLoad`:

```
[[SKPaymentQueue defaultQueue] addTransactionObserver:self]; 
```

并在`viewDidDisappear`：

```
[[SKPaymentQueue defaultQueue] removeTransactionObserver:self]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-22T11:49:44.167

我也面临类似的问题；

经过研究和修改，我意识到：

```
[[SKPaymentQueue defaultQueue] finishTransaction:transaction] 
```

方法不会立即实施。

通常，我检查 transaction.transactionReceipt 并将其发送到我的服务器，毕竟我发送回调以完成交易。最后，我明白了没有立即调用完成事务的问题。当我更改代码时，我的应用程序可以工作。

有趣的是，当我在沙盒环境中测试时，一切正常。然而，在 AppStore 应用程序并没有很好地工作。当我进行此修改时，我的问题就解决了。

# c++ - 在没有父窗口的情况下显示 Gtk::FileChooserDialog

> ID：11483529
> 
> 赞同：3
> 
> 时间：2012-07-14T11:54:59.437
> 
> 标签：c++, gtk, freeglut

我正在编写一个带有 OpenGL GUI 的应用程序。在 Windows 上，我`GetOpenFilename`用来允许用户选择一个文件。

`Gtk::FileChooserDialog`我尝试使用（遵循[本教程](http://developer.gnome.org/gtkmm-tutorial/3.0/sec-dialogs-filechooserdialog.html.en)）在 Linux for Gtk 上实现类似的功能。我试图保持 Windows 和 Linux 的函数签名相同，所以我将示例修改为如下所示：

```
std::string browseFile( std::string filetypes )
{
    Gtk::Main kit(false);

    Gtk::FileChooserDialog dialog( "Please choose a file",
            Gtk::FILE_CHOOSER_ACTION_OPEN );
//    dialog.set_transient_for( kit.instance() );

    //Add response buttons the the dialog:
    dialog.add_button( Gtk::Stock::CANCEL, Gtk::RESPONSE_CANCEL );
    dialog.add_button( Gtk::Stock::OPEN, Gtk::RESPONSE_OK );

    //Add filters, so that only certain file types can be selected:
    Glib::RefPtr<Gtk::FileFilter> filter_any = Gtk::FileFilter::create();
    filter_any->set_name( "Any files" );
    filter_any->add_pattern( "*" );
    dialog.add_filter( filter_any );

    //Show the dialog and wait for a user response:
    int result = dialog.run();

    //Handle the response:
    switch( result )
    {
        case( Gtk::RESPONSE_OK ):
        {
            std::cout << "Open clicked." << std::endl;

            //Notice that this is a std::string, not a Glib::ustring.
            std::string filename = dialog.get_filename(  );
            std::cout << "File selected: " <<  filename << std::endl;
            return filename;
        }
        case( Gtk::RESPONSE_CANCEL ): { std::cout << "Cancel clicked." << std::endl; break; }
        default: { std::cout << "Unexpected button clicked." << std::endl; break; }
    }
    return std::string( "" );
} 
```

主要区别在于我消除了该`set_transient_for`位，因为我的主窗口不是由 Gtk 管理的（它是由 freeglut 创建的）。

**问题**：在我选择一个文件后，对话框就冻结了。我的应用程序继续运行，我可以处理选定的文件，只是冻结的对话框。

**选择文件后如何关闭对话框？**我试过`dialog.hide()`了，但它似乎没有任何效果。我也试图在这个函数中包含 Gtk 特定的代码，而不是特定于`int main()`平台的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-17T16:04:14.783

我决定为此创建重载类。代码如下：

```
 class FileChooser : public Gtk::FileChooserDialog {
public:

    static std::string getFileName() {
        FileChooser dialog("Select file", Gtk::FILE_CHOOSER_ACTION_OPEN);
        kit.run(dialog);
        std::string ret = dialog.chosenFile;
        return ret;
    }
protected:
    static Gtk::Main kit;
    std::string chosenFile;

    FileChooser(const Glib::ustring& title, Gtk::FileChooserAction action = Gtk::FILE_CHOOSER_ACTION_OPEN) :
    Gtk::FileChooserDialog(title, action) {
        chosenFile = std::string("");
        add_button(Gtk::Stock::CANCEL, Gtk::RESPONSE_CANCEL);
        add_button(Gtk::Stock::OPEN, Gtk::RESPONSE_OK);
        signal_response().connect(sigc::mem_fun(*this,
                &FileChooser::on_my_response));
    }

    void on_my_response(int response_id) {
        chosenFile = get_filename();
        hide();
    }
};
Gtk::Main FileChooser::kit(false); 
```

你可以像这样使用它：

```
std::cout << "File: " << FileChooser::getFileName() << "\n"; 
```

# django - 创建一个看起来像 Django 更改表单的表单

> ID：11483532
> 
> 赞同：1
> 
> 时间：2012-07-14T11:55:08.210
> 
> 标签：django, django-templates, django-views, admin

我想创建一个单独的 Django 页面和对应的视图，它看起来与 Django Admin changeform 完全相同，但定义了我自己的表单字段。我是 Django 模板语言的新手，虽然曾在 Django 服务器端工作过。我不确定如何定义我的服务器端视图（理想情况下，我可以遍历表单并相应地更新我的数据模型，并像通常在管理表单中那样发出任何验证错误）和相应的模板。

1.  我应该扩展管理员的 change_form.html 模板吗？如果是这样，我应该覆盖哪些部分？
2.  如何编写相应的视图来填充此模板或其他模板？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:05:38.450

> 我应该扩展管理员的 change_form.html 模板吗？如果是这样，我应该覆盖哪些部分？

绝对不。

> 如何编写相应的视图来填充此模板或其他模板？

这一切都记录在案。

1.  **制作[表单视图](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs)**，您也可以使用[django-crispy-forms 之](http://django-crispy-forms.readthedocs.org/en/d-0/index.html)类的应用程序来获取一些 python 端布局，例如 django admin 的字段集

2.  **为相关对象制作[内联表单集](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#inline-formsets)**，这是 django 用于内联的

# entity-framework - 空间数据类型、Entity Framework 5 和 SqlCompact 不起作用

> ID：11483533
> 
> 赞同：0
> 
> 时间：2012-07-14T11:55:21.030
> 
> 标签：entity-framework, sql-server-ce

我将 EF5.0 与 EntityFramework.SqlCompact (4.3.3) 一起使用。当我尝试创建一个简单的单元测试时，出现错误：

System.NotSupportedException：没有对应于原始类型“Geography”的 EDM 类型“Edm.Geography(Nullable=True)”的存储类型。

如果没有 Geography 属性，一切运行正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:16:23.893

@ErikEJ

抱歉，这应该是评论而不是答案，但“人”明确表示您可以将地理数据存储在 SQL CE 中：

*   [http://msdn.microsoft.com/en-us/library/bb896140.aspx](http://msdn.microsoft.com/en-us/library/bb896140.aspx)
*   [http://social.msdn.microsoft.com/Forums/en-US/sqlce/thread/eb0f24ba-f705-4ee8-a0b0-40074f133f90/](http://social.msdn.microsoft.com/Forums/en-US/sqlce/thread/eb0f24ba-f705-4ee8-a0b0-40074f133f90/)

这似乎是 EF5 的一个缺点，而不是 SQL CE。我在使用 SQL CE 4.0 时遇到了完全相同的错误。

# asp.net - WinDBG - ASP.NET 和 VB.NET - .loadby sos clr

> ID：11483539
> 
> 赞同：1
> 
> 时间：2012-07-14T11:57:00.497
> 
> 标签：asp.net, vb.net, windbg

我正在尝试使用 WinDBG 在源文件中创建断点。我在这里遵循了建议：http: [//www.codeproject.com/Articles/22245/Quick-start-to-using-WinDbg](http://www.codeproject.com/Articles/22245/Quick-start-to-using-WinDbg)，但是当我按 F5 时，我收到一条错误消息：

```
Unable to insert breakpoint 0 at 00db0861, Win32 error 0n998
    "Invalid access to memory location." 
```

我研究了这个错误，发现可能是因为我没有加载 CLR 即 .loadby sos clr。但是，当我运行此语句时，我收到一条错误消息：无法找到模块“clr”。如果我遵循此博客中的建议，我可以加载 CLR：http: [//humblecoder.co.uk/uncategorized/spotting-a-memory-leak-with-windbg-in-net](http://humblecoder.co.uk/uncategorized/spotting-a-memory-leak-with-windbg-in-net)，但这是针对 ASP .NET 应用程序。

因此，如果我正在调试在 64 位进程中运行的 ASP.NET 应用程序，我可以加载 SOS.DLL，但在运行在 32 位进程中运行的 VB.NET 客户端应用程序时，我无法加载 CLR . 因此我有两个问题：

1) 是否加载 SOS.DLL 可能会解决原始问题（无法添加断点） 2) 为什么我在调试 ASP.NET 应用程序时能够执行 .loadby sos clr 语句，而不是 VB.NET 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T18:31:06.150

您可以使用 !sosex.mbp 和 !sosex.mbm 设置断点，甚至在 CLR 加载之前。

```
.load sosex

!mbp mysource.cs 23  <--sets a BP at mysource.cs, line 23. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T22:36:21.207

“无法找到模块 'clr'”错误是因为[clr.dll 尚未加载](http://blogs.msdn.com/b/rihamselim/archive/2012/03/14/breaking-on-module-load.aspx)。添加此断点：

```
sxe ld clr 
```

当它中断时，将加载 clr.dll。然后你可以这样做：

```
.loadby sos clr 
```

# c# - 使用 AppDomain 时在 TransparentProxy 上查询

> ID：11483540
> 
> 赞同：1
> 
> 时间：2012-07-14T11:57:03.720
> 
> 标签：c#, appdomain, transparentproxy

我有一段代码在 AppDomains 之间传递一个对象，为了使调试更容易，我想摆脱透明代理。

在编写此示例的过程中，我发现了如何做到这一点，但是我有两个非常相似的代码片段，它们的行为不同，我不知道为什么。

我知道实际值是正确的，所以这只是为了帮助调试。

在下面的例子中。我有一个 Data 类，它在默认域中初始化并传递给在另一个域中运行的 Process。如果我尝试使用静态方法克隆数据结构，它可以工作，但使用实例方法可以，我不太明白为什么。

谁能解释一下？

```
using System;

class Program
{
    static void Main(string[] args)
    {
        AppDomain otherDomain = AppDomain.CreateDomain("Test");

        var otherType = typeof(Process);
        var process = otherDomain.CreateInstanceAndUnwrap(
                 otherType.Assembly.FullName, otherType.FullName) as Process;

        Data d = new Data() { Info = "Hello" };
        process.SetData(d);
    }
}

public class Process : MarshalByRefObject
{

    public void SetData(Data data)
    {
        Data data1 = Data.Clone(data);
        Data data2 = data.Clone();

        Console.WriteLine(data1.Info); 
           // Debugger shows data1.Info as Hello

        Console.WriteLine(data2.Info); 
           // Outputs Hello, but Debugger shows data2 as     
           // System.Runtime.Remoting.Proxies.__TransparentProxy
    }

}

public class Data : MarshalByRefObject
{
    public string Info { get; set; }

    public Data Clone()
    {
        return Data.Clone(this);
    }

    public static Data Clone(Data old)
    {
        var clone = new Data();
        clone.Info = old.Info;
        return clone;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:06:40.803

当您从另一个 appdomain 调用静态方法时，该方法会在该 appdomain 中调用，并在该 appdomain`Data`中创建新对象。OTOH 调用实例方法时，调用被编组到对象的原始appdomain，因此在`Data`原始appdomain 中创建克隆对象。然后它作为透明代理被封送回另一个 appdomain 并作为 retern 值出现在那里。

# android - Android - 从数据库中更改布局

> ID：11483541
> 
> 赞同：0
> 
> 时间：2012-07-14T11:57:07.683
> 
> 标签：android

我有一个关于测验的项目。我想从数据库中获取数据来创建问题。当用户单击下一个按钮时，它会转到下一个问题（从数据库中获取）。它有很多问题，因此无法为每个问题创建活动。我应该使用什么类型的布局，我该怎么做？谢谢帮忙。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:05:15.633

使用可以使用带有一个**Button**和**TextView**的 Normal Layout 。用于移动到下一个问题的按钮和用于显示问题的 TextView。

使用光标从数据库中获取所有问题。它将存储所有问题。因此，当您单击按钮时，您可以使用`question_cursor .moveToNext()`.

```
 Cursor question_cursor = db.getPersonId(this);
        if(question_cursor !=null)
        {
            personid_cursor.moveToFirst();
            String question = question_cursor .getString(Your Value));

                    } 
```

使用 TextView 显示问题。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T12:02:39.700

您为单个问题创建正常布局，稍后您要做的是当用户回答时，您更改布局元素的值，例如将 TextView 更改为第二个问题。此外，当用户回答时，您会将答案保存在数据库中。（您可能希望对问题和答案使用增量 ID，以便以简单的方式实现这一点）。

# javascript - 我应该在哪里存储 html 元素的 jQuery 数据？

> ID：11483545
> 
> 赞同：2
> 
> 时间：2012-07-14T11:57:21.453
> 
> 标签：javascript, jquery

为了更好地学习 jquery，我决定编写一个插件来创建类似于 google+的[画廊拼贴效果。](https://github.com/ed-lea/jquery-collagePlus)这是一个[例子](http://www.devurl.co.uk/collagePlus/)。

我想在调整包含图像的 html 元素的大小时再次触发它。我遇到的部分问题是我需要存储原始图像大小以便重新计算图像大小以使其适合。

我不知道在哪里存储以及如何检索这些原始图像大小。完整的插件链接在上面，但我会在这里做一个总结。

```
;(function( $ ) {
    $.fn.collagePlus = function( options ) {

        var settings = $.extend( 
            //... 
            'images'          : $('img', $(this))
            //... 
        );

        return this.each(function() {
            settings.images.each(function(index){
                //... 

                /*
                * get the current image size
                */
                var w = (typeof $(this).data().width != 'undefined') ? $(this).data().width : $(this).width();
                var h = (typeof $(this).data().height != 'undefined') ? $(this).data().height : $(this).height();

                /*
                * store the original size for resize events
                */
                $(this).attr( "data-width" , w  );
                $(this).attr( "data-height" , h  ); 
                //... Do some other stuff
                }
            );
        });
    }
})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T12:22:44.753

你用[`.data()`](http://api.jquery.com/data/)错了。当您将 1 个参数传递给`.data`函数时，它会返回给定键的值。当您传递 2 个参数时，`.data`将为该键设置值。

这个块：

```
//get the current image size
var w = (typeof $(this).data().width != 'undefined') ? $(this).data().width : $(this).width();
var h = (typeof $(this).data().height != 'undefined') ? $(this).data().height : $(this).height(); 
```

应该：

```
var $this = $(this); //caching your selector
if (!$this.data('width')) //if this element doesn't have a width stored
    $this.data('width', $this.width()); //stores currently computed width
if (!$this.data('height')) //repeat
    $this.data('height', $this.height()); 
```

当然，稍后检索数据：

```
alert($this.data('width')) //alerts currently stored width 
```

[**小提琴演示**](http://jsfiddle.net/ult_combo/LE24f/2/)

您还可以在`.data`传递属性映射中存储对象：

```
if (!$(this).data('size'))
    $(this).data('size', { width: $(this).width(), height: $(this).height() }); 
```

现在`width`和`height`是存储在 中的对象的属性`.data('size')`，可以通过以下方式检索：

```
alert($(this).data('size').width); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/LE24f/1/)

为了简单起见，我主要选择第一个选项。但是第二个看起来更整洁。选择您认为更具可读性和可维护性的任何一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T12:26:39.183

在服务器端，您可以将 HTML 元素的数据存储在[`data-*`属性](http://dev.w3.org/html5/spec/global-attributes.html#embedding-custom-non-visible-data-with-the-data-attributes)中并通过 jQuery 的[`.data()`](http://api.jquery.com/data/)函数获取它（从[jQuery 1.4.3](http://blog.jquery.com/2010/10/16/jQuery-143-released/)开始，它也改变了该函数的一般行为，如文档中所述）。您正在插件中设置属性，但此时，您可以将原始宽度和高度存储在`data`对象中，如下所示：

```
$(this).data( "data-width", w );
$(this).data( "data-height", h ); 
```

`.data()`无论数据是作为`data-`属性存储在 HTML 中还是包含在`data`附加到元素的 jQuery 对象中，使用该函数都会返回数据。您已经在使用`.data()`不带任何参数的函数，它[返回`data`匹配元素的完整对象，](http://james.padolsey.com/jquery/#v=1.7.2&fn=jQuery.fn.data)以及来自 HTML 属性和 jQuery`data`对象的数据。这行得通，但你可以得到保存`width`，并`height`像这样调用它：

```
$(this).data("width");
$(this).data("height"); 
```

# zend-framework - Zend_auth 和 Zend_acl 的区别？

> ID：11483547
> 
> 赞同：0
> 
> 时间：2012-07-14T11:57:24.383
> 
> 标签：zend-framework, authentication, authorization, zend-auth, zend-acl

我正在为我的一个项目使用 Zend Framework，而且我对 Zend Framework 很陌生。你能告诉我和之间的区别`Aend_Auth`吗`Zend_Acl`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T12:21:41.877

a) 要参加考试，您必须随身携带您的考试票，上面有您的卷号（密码）。没有它你不能进入考场。所以考试票验证了你的身份，让你坐在考场上。(Zend_Auth)

b)考试期间无权翻书、求助朋友或使用手机，但可以用水壶喝水。这些基本上是对您强制执行的规则。（在 Zend 中，这些规则是使用 Zend_Acl 编写的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T12:59:32.703

如果您查看操作系统，您将拥有登录名以及简单目录或文件安全性（读/写/执行）等安全功能。

您必须使用 Zend_Auth 来处理所有登录活动。请注意，虽然 Zend_Auth 不允许或拒绝访问，但它只是进行一些涉及登录过程的管理，如会话管理。这在操作系统中通常是相同的，但在后台你有一个安全设置，可以让你访问桌面或远程。

安全性最终是“访问控制列表”的责任。使用 Zend_Acl，您可以以各种方式处理 Web 应用程序的所有安全性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T13:28:50.267

您应该首先区分**身份验证**和**授权**。身份验证是检查凭据（例如用户名和密码）是否有效。授权是检查用户的角色（例如管理员或用户）。授权是在认证之后完成的。Zend_Auth 是认证过程。Zend_Acl 是授权过程。

请参考：[http ://en.wikipedia.org/wiki/AAA_protocol](http://en.wikipedia.org/wiki/AAA_protocol)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T09:34:59.623

Zend_Auth - 检查存储在数据库中的登录名和密码，并将用户数据保存在会话/注册表中

Zend_Acl - 让一些用户访问一些页面（例如，用户 admin 可以访问 'admin' 控制器）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-14T12:00:13.207

Zend Auth 用于对最终用户进行身份验证，它处理登录和会话管理，而 zend acl 则是另一回事。您可以指定登录用户的角色，例如 admin 、 manager 、 customer atc 。我更喜欢查看 zend 文档以获取更多信息。

# cocoa - Cocoa 中继承的合成属性的访问器

> ID：11483548
> 
> 赞同：2
> 
> 时间：2012-07-14T11:58:07.677
> 
> 标签：cocoa, properties, subclass

我有两门课：几何和圆。圆是几何的子类。

几何有一个综合属性：

界面：

```
@interface Geometry : NSObject <drawProtocol, intersectionProtocol>
@property int geoLineWidth; 
```

执行：

```
@synthesize geoLineWidth; 
```

圆是几何的子类。界面：

```
@interface Circle : Geometry 
```

此代码在 Geometry.m 中的 Geometry 方法内编译

```
NSLog(@"%d", geoLineWidth); 
```

此代码无法编译，在 Circle 的方法中

```
NSBezierPath * thePath=  [NSBezierPath bezierPath];
[thePath setLineWidth: geoLineWidth]; 
```

`Use of undeclared identifier 'geoLineWidth'`

但是，此代码编译：

```
[thePath setLineWidth: [self geoLineWidth]]; 
```

这种行为是故意的，还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T12:39:39.177

这是故意的。您的子类只知道接口文件的内容（这就是您导入的全部内容，不是吗？），而您所拥有的只是属性声明。这使编译器没有理由相信存在一个名为 GeoLineWidth 的实例变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T14:06:02.730

在子类中，您必须实际使用访问器，而不是直接访问实例变量。

改变这个：

```
[thePath setLineWidth: GeoLineWidth]; 
```

对此：

```
[thePath setLineWidth: self.GeoLineWidth];
[thePath setLineWidth: [self GeoLineWidth]]; 
```

要让编译器识别实例变量，您需要在超类头文件中显式声明它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T14:49:53.397

A）不要对变量使用大写字母，看起来像一个类......

B) 如果 Ivar 是公共的或受保护的，则子类可以使用 self->Ivar 访问。

C）既然你有属性，使用它们，一切都会好起来的。

# php - 递归获取类别树（Yii）

> ID：11483549
> 
> 赞同：2
> 
> 时间：2012-07-14T11:58:11.943
> 
> 标签：php, recursion, yii, hierarchy

我有一个具有以下结构的表：

类别

*   ID
*   姓名
*   parent_id

我想获得具有单一功能的类别树。我在我的模型中写了这样的东西，但它不起作用。

```
public function getChildren($parent) { 
        $criteria = new CDbCriteria;
        $criteria->condition='parent_id=:id';
        $criteria->params=array(':id'=>$parent);
        $model = Term::model()->findAll($criteria);
        while ($model) {
            echo $model->id . "<br />";
            $this->getChildren;
        }
} 
```

有人可以帮我弄这个吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T13:24:28.280

我终于解决了这个问题。如果有人感兴趣，这是代码：

```
public function getChildren($parent, $level=0) { 
        $criteria = new CDbCriteria;
        $criteria->condition='parent_id=:id';
        $criteria->params=array(':id'=>$parent);
        $model = $this->findAll($criteria);
        foreach ($model as $key) {
            echo str_repeat(' — ', $level) . $key->name . "<br />";
            $this->getChildren($key->id, $level+1);
        }
    }
public function getChildrenString($parent) { 
        $criteria = new CDbCriteria;
        $criteria->condition='parent_id=:id';
        $criteria->params=array(':id'=>$parent);
        $model = $this->findAll($criteria);
        foreach ($model as $key) {
            $storage .= $key->id . ","; 
            $storage .= $this->getChildrenString($key->id);
        }
        return $storage;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-23T07:46:53.030

这是更好的解决方案。每层只有一个查询。其他解决方案使用每个孩子的查询或查询所有记录（如果数量少则很好）

```
$models=Category::find()->where(['id'=>4])->one()->getRecursiveChildren();

public function getChild()
{
    return $this->hasMany(Category::className(), ['parent_id' => 'id']);
}
public function getRecursiveChildren()
{
    $models=[];
    $childs=$this->child;
    Yii::createObject(ActiveQuery::className(), [get_called_class()])->findWith(['child'], $childs);
    if(is_array($childs)&&count($childs)>0)
        foreach ($childs as $item)
        {
            $models[]=$item;
            $models=array_merge($models,$item->getRecursiveChildren());
        }
    return $models;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-07T12:20:55.183

您可以使用模型中的一个递归函数来做到这一点，例如：

```
public function getCategoriesTree(&$tree = array(), $parentID = 0)
{
    $criteria = new CDbCriteria;
    $criteria->condition='parent_id=:id';
    $criteria->params=array(':id'=>$parentID);
    $resultNumber = $this->count($criteria);

    if($resultNumber > 0)
    {
        $model = $this->findAll($criteria);
        // get category position as order_id
        $orderId = 0;
        foreach ($model as $key) 
        {
            $tree[$orderId] = array(
                'id' => $key->id,
                'parent_id' => $key->parent_id,
                'name' => $key->name,
            );

            // get subcategories
            $this->getCategoriesTree($tree[$orderId]['subcat'], $key->id);

            if(count($tree[$orderId]['subcat']) === 0)
            {
                unset($tree[$orderId]['subcat']);
            }

            $orderId++;
        }
    }
} 
```

并在控制器中使用它：

```
$model = new Categories;

    $tree = array(
        0 => array(
            'id' => 0,
            'parent_id' => -1,
            'name' => 'Main category',
            'subcat' => array()
        ),
    );

    $model->getCategoriesTree($tree[0]['subcat']); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-25T08:07:17.657

可能这个对你有帮助......:)

我正在为类别复制 yii2 的控制器类

```
<?php
namespace api\modules\v1\controllers;

use Yii;
use yii\rest\Controller;
use api\modules\v1\models\MySearializer;
use api\modules\v1\models\search\CategorySearch;
use api\modules\v1\models\Category;

class CategoryController extends Controller
{
    public function actionIndex()
    {
        $searchModel = new CategorySearch();
        $status        = false;
        $message       = '';
        $data          = (object)[];

        $dataProvider = $searchModel->search(Yii::$app->request->getBodyParams());
        $obj = new MySearializer();
        $obj->collectionEnvelope ='pager';
        $ser = $obj->serialize($dataProvider);
        return ['status' => true, 'message' => 'Category Listing', 
        'data' => $ser];
    }

    public function actionView($id)
    {
        $status        = false;
        $message       = '';
        $data          = (object)[];
        $model = Category::findOne($id);
        if($model)
        {
           return ['status' => true, 'message' => 'Category View', 
        'data' => $model];
        }else
        {
            return ['status' => false, 'message' => 'Category not found', 
        'data' => $data];
        }
    }

    public function actionAllParent()
    {
        $status        = false;
        $message       = '';
        $data          = (object)[];
        $model = Category::find()->where(['parent'=>0])->all();
        if($model)
        {
           return ['status' => true, 'message' => 'All Parent Category Listing', 
        'data' => $model];
        }else
        {
            return ['status' => false, 'message' => 'Parent Category not found', 
        'data' => $data];
        }
    }

    public function actionTree()
    {
        $status        = false;
        $message       = '';
        $data          = (object)[];
        $model = Category::find()->asArray()->all();
        $cattree = $this->CreateTree($model);
        print_r($cattree); die;
        if($model)
        {
           return ['status' => true, 'message' => 'All Child Category Listing', 
        'data' => $model];
        }else
        {
            return ['status' => false, 'message' => 'Child Category not found', 
        'data' => $data];
        }
    }

    public function actionChild($id)
    {
        $status        = false;
        $message       = '';
        $data          = (object)[];
        $model = Category::find()->where(['parent'=>$id])->all();
        if($model)
        {
           return ['status' => true, 'message' => 'All Child Category Listing', 
        'data' => $model];
        }else
        {
            return ['status' => false, 'message' => 'Child Category not found', 
        'data' => $data];
        }
    }

    public function CreateTree($tree,$parentId=0)
    {
        $branch =[] ;
        foreach ($tree as $element) 
        {
        if ($element['parent'] == $parentId) 
        {
            $children = $this->CreateTree($tree, $element['slno']);
            if ($children) 
            {
                $element['children'] = $children;
            }
            $branch[] = $element;
        }
       }
        return $branch;
    }
} 
```

# c# - MVC3 - DropDownListFor 未填充

> ID：11483551
> 
> 赞同：1
> 
> 时间：2012-07-14T11:58:50.577
> 
> 标签：c#, asp.net-mvc-3, html.dropdownlistfor

我已经尝试了一整天，但是我的下拉列表无法加载。它应该是一个简单的应用程序。我需要创建一个新员工，而创建视图为我呈现一个下拉列表，其中填充了来自 StoresMst 表的不同 [Store Names]。这个想法是将员工与商店联系起来。下面是我的代码

在 viewModel 类中

```
 public class EmployeeStoreViewModel
    {
        private JCOperationsDataContext  db = new JCOperationsDataContext ();

        //public Employee employee { get; set; }
        public IEnumerable<SelectListItem> Stores { get;set;}
        public int storeID { get; set; }         
    } 
```

在创建 ActionLink

```
 public ActionResult Create()
        {
            //ViewData["PartialStores"] = repository.GetStoreNames();
            var model = new EmployeeStoreViewModel()
            {   
                //Stores= jc.StoreMsts.OrderBy(o=> o.StoreID).ToList<SelectListItem>();

                Stores = jc.StoreMsts
                        .ToList()
                        .Select(x => new SelectListItem
                        {
                            Text = x.StoreID.ToString(),
                            Value = x.StoreName
                        }),                        
            };

            return View(model);
        } 
```

在视图中（添加了对 ModelView 类的引用

```
<div class="editor-field">
    @{Html.DropDownListFor(model => model.storeID, new SelectList (Model.Stores));}
</div > 
```

页面加载没有错误，但没有呈现和填充 DropDownbox。我错过了什么吗？我正在将 MVC3 与 VS2010 Ultimate 一起使用 请注意：我对 MVC2 进行了同样的尝试，并且确实有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T12:47:25.880

删除调用中的花括号`DropDownListFor`。在您的代码中，razor 将其视为常规方法调用并忽略该方法的返回值。使用 razor 输出 html 的正确语法如下。

```
<div class="editor-field">
    @Html.DropDownListFor(model => model.storeID, new SelectList (Model.Stores))
</div > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T12:56:55.333

因为您的视图模型中有您的 Stores 对象，并且您在传递它之前设置了该集合，所以您不需要使用“新 SelectList”，您可以在集合中引用该属性。此外，您不需要下拉列表周围的花括号，它不会以这种方式评估。这应该是您所需要的：

```
<div class="editor-field">
@Html.DropDownListFor(model => model.storeID, Model.Stores);
</div > 
```

编辑：再次查看您的代码后，如果您的下拉列表没有以这种方式加载，您可能需要将集合类型更改为 List 而不是 IEnumerable。

# android - 什么时候使用蜂窝塔三角测量？

> ID：11483558
> 
> 赞同：5
> 
> 时间：2012-07-14T11:59:22.300
> 
> 标签：android, gps, triangulation

当网络用于定位时，这些无线网络是广播他们的ID，还是这些网络实际上是运营商网络，你打电话时使用的网络？

据我所知，每当我使用 GPS 时，都会使用手机信号塔来加速这一过程，这被称为 AGPS。即使在设备上禁用了无线功能，也会发生这种情况。

当您使用网络提供商时，它会使用附近的无线网络，而不会与手机信号塔三角测量进行任何交互。为了做到这一点，无线必须打开。

这个对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T12:17:28.893

是的，它们与您拨打电话的网络相同。每个手机信号塔都有一个唯一的 ID。

每个 ID 对应一个特定的位置。该位置的半径可能是几米到几公里宽。

因此，您的 AGPS 获取塔 ID，在数据库中查找它，然后执行“我必须在 xyz 2 公里范围内”。这意味着它可以（大致）知道哪个 GPS 可能在头顶，并相应地调整它们。

为了获得更好的准确性，手机可以查看多个信号塔的信号强度。如果 A 塔的信号比 B 塔强 - 它必须比 B 更靠近 A。

如果它可以看到 3 个或更多的塔，它可以使用信号强度大致计算出它的位置。

最后，一些位置感知设备将使用 WiFi 来计算它们的位置。如果它知道 WiFi 网络“Starbuck-1234”在某条街道上，它可以使用该信息为您提供更精确的位置。

# mysql - 更新mysql触发器中的同一行

> ID：11483559
> 
> 赞同：5
> 
> 时间：2012-07-14T11:59:32.723
> 
> 标签：mysql, triggers, mysql-error-1442

我有一个表`SCHEDULES_CLASS`，其中 2 个字段是`CLASS_ID`（来自 CLASS 表的外键）`STATUS`和`NUMBER_OF_ENROLLED_STUDENTS`. 我有其他表`CLASS`有 1 个字段作为 MAX_SEATS。

当`NUMBER_OF_ENROLLED_STUDENTS`预定课程中的课程等于`MAX_SEATS`相应课程的可用课程时，我需要将其状态`SCHEDULES_CLASS`从初始状态“打开”更改为“已满”。

为此，我创建了一个触发器，如下所示：

```
USE mydb;
DELIMITER ##
dROP TRIGGER IF EXISTS updateClassStatusTrigger ##
CREATE TRIGGER updateClassStatusTrigger
BEFORE UPDATE ON SCHEDULED_CLASS
  FOR EACH ROW
  BEGIN
        UPDATE SCHEDULED_CLASS SET STATUS="FULL" WHERE CLASS_ID=NEW.CLASS_ID
        AND EXISTS (SELECT 1 FROM SCHEDULED_CLASS sc, CLASS cl WHERE cl.CLASS_ID=NEW.CLASS_ID AND NEW.NUMBER_OF_ENROLLED_STUDENTS=cl.MAX_SEATS);
END## 
```

我正在使用 phpmyadmin，当 SCHEDULED_CLASS 表上发生任何更新时，我收到以下错误：

```
#1442 - Can't update table 'SCHEDULED_CLASS' in stored function/trigger because it is already used by statement which invoked this stored function/trigger. 
```

任何想法，如何完成这项任务？即，每当注册的学生人数达到最大可用座位时，将预定班级的状态更新为“已满”。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T12:13:26.943

更新同一行的方法是简单地`SET NEW.column_name = some_Value`. 为了简化您的触发器，请考虑：

```
CREATE TRIGGER updateClassStatusTrigger
BEFORE UPDATE ON SCHEDULED_CLASS
FOR EACH ROW
  SET NEW.STATUS='FULL' 
```

现在，此外，您只需要在给定条件的情况下更新值。由于我们不再使用标准的`UPDATE`. 所以，拆分：

```
USE mydb;
DELIMITER ##
dROP TRIGGER IF EXISTS updateClassStatusTrigger ##
CREATE TRIGGER updateClassStatusTrigger
BEFORE UPDATE ON SCHEDULED_CLASS
  FOR EACH ROW
  BEGIN
        SELECT EXISTS (SELECT 1 FROM SCHEDULED_CLASS sc, CLASS cl WHERE cl.CLASS_ID=NEW.CLASS_ID AND NEW.NUMBER_OF_ENROLLED_STUDENTS=cl.MAX_SEATS) INTO @row_exists;
        IF @row_exists THEN
          SET NEW.STATUS='FULL';
        END IF;
  END## 
```

我希望我在上面没有一些语法错误。我已经在自己的表上对其进行了测试，但随后进行了编辑以适合您的架构。

您自己的尝试失败了，因为在触发器中，MySQL 不允许您修改执行触发器的表。它无法分析您的查询以确定您基本上尝试过的内容是否可以以有效的方式完成——它甚至不会尝试。它只是禁止修改同一张表。

# windows-phone-7 - Push Channel Uri 在设备上显示“无法评估表达式”。在模拟器上完美运行

> ID：11483561
> 
> 赞同：1
> 
> 时间：2012-07-14T11:59:49.367
> 
> 标签：windows-phone-7, push-notification, nullreferenceexception, mpns

我正在尝试在 Windows Phone 上实现基于推送通知的应用程序。我已经能够在模拟器上检索 Channel Uri 并通过我的服务器向模拟器发送推送通知。

另一方面，我在我的设备上部署相同的解决方案时遇到了问题。使用 Uri 会返回 NullReferenceException。而 Channel Uri 显示“无法评估表达式”。

这是我放置在页面构造函数中的代码。我也尝试过更改 _pushChannelName。

```
private static string _pushChannelName = "TestApp";

    // Constructor
    public MainPage()
    {
        HttpNotificationChannel pushChannel;

        InitializeComponent();

        pushChannel = HttpNotificationChannel.Find(_pushChannelName);

        if (pushChannel == null) 
        {
            MessageBox.Show("NULL");
            pushChannel = new HttpNotificationChannel(_pushChannelName);

            pushChannel.ChannelUriUpdated += new EventHandler<NotificationChannelUriEventArgs>(pushChannel_ChannelUriUpdated);
            pushChannel.ErrorOccurred += new EventHandler<NotificationChannelErrorEventArgs>(pushChannel_ErrorOccurred);

            pushChannel.ShellToastNotificationReceived +=new EventHandler<NotificationEventArgs>(pushChannel_ShellToastNotificationReceived);

            pushChannel.Open();

            pushChannel.BindToShellToast();
        }
        else
        {

            pushChannel.ChannelUriUpdated += new EventHandler<NotificationChannelUriEventArgs>(pushChannel_ChannelUriUpdated);
            pushChannel.ErrorOccurred += new EventHandler<NotificationChannelErrorEventArgs>(pushChannel_ErrorOccurred);

            pushChannel.ShellToastNotificationReceived += new EventHandler<NotificationEventArgs>(pushChannel_ShellToastNotificationReceived);

            //System.Diagnostics.Debug.WriteLine(pushChannel.ChannelUri.ToString());
            textBox1.Text = pushChannel.ChannelUri.ToString();

        }

        MessageBox.Show(String.Format("Channel Uri is {0}", pushChannel.ChannelUri.ToString()));
    } 
```

我还尝试从 ChangeUri 事件中检查 Uri。该事件不会在设备上触发，而 Push 应用程序工作正常。甚至没有达到频道限制。

```
private void pushChannel_ChannelUriUpdated(Object sender, NotificationChannelUriEventArgs e)
    {
        Dispatcher.BeginInvoke(() =>
        {

            MessageBox.Show(String.Format("Channel Uri is {0}",
                e.ChannelUri.ToString()));

        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:26:00.117

许多用户都面临这个问题。解决方案有两种。

1.  第一个解决方案是停止所有与市场帐户相关的应用程序、游戏和其他软件，并删除或停止通知。重启手机（关机/开机）并等待 24 小时。

2.  第二种解决方案是向 Marketplace 付款并注册您的应用程序，从 Marketplace 获取证书并插入您的应用程序。那么当打开新频道时必须使用静态类“HttpNotificationChannel”的第二个重载构造函数：

    [SecuritySafeCritical] public HttpNotificationChannel(string channelName, string serviceName);

# android - 如何在滑动屏幕时在活动之间进行向右或向左或从左向右转换

> ID：11483567
> 
> 赞同：1
> 
> 时间：2012-07-14T12:01:18.323
> 
> 标签：android, android-activity, touch, screen, sliding

如果我有三个活动，我想在触摸屏幕上的水平移动（从左到右或从右到左）时从一个活动移动到另一个活动。如何访问滑动屏幕的动作和？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T12:14:53.110

尝试这个：

```
 try    {           
        Intent newIntent = new Intent(view.getContext(), NewActivity.class);    
        startActivityForResult(newIntent, 0);
        overridePendingTransition(android.R.anim.slide_in_left, android.R.anim.slide_out_right);        
    } catch(Exception ex) {
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T12:06:45.610

[http://android-developers.blogspot.in/2011/08/horizo​​ntal-view-swiping-with-viewpager.html](http://android-developers.blogspot.in/2011/08/horizontal-view-swiping-with-viewpager.html)

和

[http://blog.velir.com/index.php/2010/11/17/android-snapping-horizo​​ntal-scroll/](http://blog.velir.com/index.php/2010/11/17/android-snapping-horizontal-scroll/)

# c++ - 来自 wiki 的 pow (power) 模板实现

> ID：11483568
> 
> 赞同：5
> 
> 时间：2012-07-14T12:01:37.777
> 
> 标签：c++, templates, enums

> **可能的重复：**
> [模板元编程 - 使用 Enum Hack 和静态常量之间的区别](https://stackoverflow.com/questions/2172647/template-metaprogramming-difference-between-using-enum-hack-and-static-const)

请解释`enum`在以下电源模板的实现中使用了什么。

```
template<int B, int N>
struct Pow {
    // recursive call and recombination.
    enum{ value = B*Pow<B, N-1>::value };
};

template< int B >
struct Pow<B, 0> {
    // ''N == 0'' condition of termination.
    enum{ value = 1 };
};
int quartic_of_three = Pow<3, 4>::value; 
```

我在维基百科上找到了它。在这种情况下，`int`和之间有区别吗？`enum`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T12:03:54.397

如果您尝试获取`static const int`. 在这种情况下，编译器将为`static const int`. 您不能获取 an 的地址，`enum`编译器将永远不会为它生成存储空间。

另请参阅[模板元编程 - 使用 Enum Hack 和静态常量之间的区别](https://stackoverflow.com/q/2172647/819272)

# .htaccess - 谁能帮我处理我的 .htaccess 文件？

> ID：11483575
> 
> 赞同：0
> 
> 时间：2012-07-14T12:02:31.153
> 
> 标签：.htaccess

我制作了这个 .htaccess 文件以尝试删除链接上的最后一个斜杠，但它不会删除并且不会重定向其他任何内容，例如，如果您访问：mydomain.com/fruit 它会重定向到 mydomain.com/fruit/ 并且我想要正好相反（水果目录就是一个例子，我有很多目录，每个目录里面都有一个 index.php 文件或其他类型的文件，只有几个是空的）。我已经尝试了两种不同的方法（从一些网站复制），但没有一种方法能按我的意愿工作。

代码一：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^mydomain.com
RewriteRule ^ http://www.mydomain.com%{REQUEST_URI} [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^(.+)/$
RewriteRule ^(.+)/$  /$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)$
RewriteRule (.*) http://www.mydomain.com/$1 [L,R=301] 
```

代码二：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^mydomain.com
RewriteRule ^ http://www.mydomain.com%{REQUEST_URI} [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)$
RewriteRule (.*) http://www.mydomain.com/$1 [L,R=301] 
```

我的实际文件（但使用我的真实域）：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^mydomain.com
RewriteRule ^ http://www.mydomain.com%{REQUEST_URI} [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/+$ http://www.mydomain.com/$1 [L,R=301]

Options All -Indexes

<Files .htaccess>
order allow,deny
deny from all
</Files> 
```

如果我评论这一行：**RewriteCond %{REQUEST_FILENAME} !-d** Chrome 给我一个错误：错误 310 (net::ERR_TOO_MANY_REDIRECTS)。

任何人都可以帮我编写 .htaccess 文件的代码吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:12:26.323

[您应该在 Apache 网络服务器http://httpd.apache.org/docs/current/mod/mod_dir.html](http://httpd.apache.org/docs/current/mod/mod_dir.html)添加的斜杠上阅读此内容 希望这会有所帮助

# namespaces - 从标识符创建 URI 的良好做法

> ID：11483588
> 
> 赞同：1
> 
> 时间：2012-07-14T12:05:10.963
> 
> 标签：namespaces, uri, rdf, semantic-web

我有几个要使用 RDF 建模的资源，每个资源都有一个唯一标识符（DMS 格式的 GPS 坐标。

*   36.54.01E.25.28.44N
*   150.18.38.9E.2.40.47.5S
*   ...

现在我想为它们中的每一个创建 URI。在这种情况下，什么被认为是最佳实践？是否可以暗示将其附加到我的命名空间 URI 或者由于点而我不应该这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T12:23:48.600

点是在 URI 中找到的完全合法的字符，所以是的，你的建议在语法上可以作为 URI。

我不知道这方面的*最佳实践*，但是 Leigh Dodds 和 Ian Davis 收集了非常好的链接数据模式，其中包括一个关于[标识符](http://patterns.dataincubator.org/book/identifier-patterns.html)的部分，可能对您的问题有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T20:25:11.460

这是可以的，我对自己使用这样的uri感到“内疚”。

**然而**： rdf 纯粹主义者可能会挑战这一点。一个物理位置可能有很多东西。只要你把它放在*你自己的命名空间*下，这没问题（例如“http://kool.rdfsite.Mahondi.net/gps/36.54...等”）

RDF 存储几乎总是由谓词、对象的组合索引。如果您命名一个适当的谓词（如果您愿意，也可以使用您自己的命名空间）并使用 DMS 作为对象，它仍然只是一个快速索引查找来查找我建议的可能是空白节点的资源。

# ios - iOS中的lucene搜索不一致

> ID：11483593
> 
> 赞同：2
> 
> 时间：2012-07-14T12:06:02.500
> 
> 标签：ios, search, lucene

我正在尝试改进 iOS 应用程序的搜索算法，该应用程序提供了一些包含大量文章的杂志。为此，我使用了 Micheal Papp ( [git repo](https://github.com/mikekppp/S4LuceneLibrary) ) 的 S4LuceneLibrary，它是一个 iOS 等效于 Apache Lucene 的全功能文本搜索引擎库。问题是，现在的搜索非常不一致……这意味着对特定单词的搜索有时需要很长时间，而另一方面有时不需要。

这是我正在搜索的单词列表，以及搜索所花费的时间：

*   柏林（34 次点击）-> 3.5 秒
*   标记（29 次点击）-> 8.3 秒
*   豪斯（3 次点击）-> 3.6 秒
*   Straße（28 次点击）-> 8 秒
*   Raumfahrt (5 hits) -> 6,2 秒
*   天文学（9 次点击）-> 1 秒

所以结果有点不同，但我认为每个搜索短语应该花费相同的时间。你知道区别在哪里吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:39:18.583

好的，为了测试，我有 6 个杂志，每个杂志都有自己的索引。所以索引大小是：

434kb、41kb、139kb、434kb、57kb 和 57kb

我的索引代码是：

```
LCSimpleAnalyzer *analyzer = [[LCSimpleAnalyzeralloc] init];
    LCIndexWriter *writer = [[LCIndexWriteralloc] initWithDirectory:[selfcreateFileDirectoryWithEmagPath:emagModel.emagPath] analyzer: analyzer create: YES];

...
// creating searchResult
...

// adding relevant information to lucene document
LCDocument *doc = [[LCDocumentalloc] init];

LCField *fieldContent = [[LCFieldalloc] initWithName: @"content_to_search"string:bodyText store:LCStore_YES index:LCIndex_Tokenized];   
LCField *fieldResult = [[LCFieldalloc] initWithName:@"data" data: [NSKeyedArchiverarchivedDataWithRootObject:result] store:LCStore_YES];

[doc addField:fieldContent];
[doc addField:fieldResult];  

[writer addDocument:doc];

...
// releasing stuff and close writer 
```

这就是搜索的代码：

```
// search
LCIndexSearcher *searcher = [[LCIndexSearcheralloc] initWithDirectory: [selfgetFileDirectoryOfEmagPath:emagPath]];
LCTerm *term = [[LCTermalloc] initWithField: @"content_to_search" text: self.searchText];
LCTermQuery *termQuery = [[LCTermQueryalloc] initWithTerm:term];

LCHits *hits = [searcher search:termQuery]; 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:29:58.667

哇，这些基准！你的索引/收藏有多大？

我在这里假设，您正在以编程方式搜索索引？（而不是通过一些复杂的实现/UI，这可能有它自己的故障）

我的第一站是确保您首先正确索引您的收藏。特别是：检查您在每个文档中放置的字段的构造函数。某些形式的构造函数为 'store' 和 'index' 使用布尔值：确保你已经传递了它：在这种情况下`store.yes`，`index.yes`否则它们将在那里并且可检索，但不能通过 lucene 的倒排索引 - 的症结整个工具。

但是，鉴于您的收藏集的大小可能没有变化，如果是这种情况，那么您的搜索时间会显着不同，这很奇怪。

您能否向我们展示您如何填充/查询您的索引？

# php - 如何使用 facebook SDK 注销用户？

> ID：11483594
> 
> 赞同：9
> 
> 时间：2012-07-14T12:06:07.553
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我正在`facebook`为我的网站使用`facebook php sdk`.

我注意到`logout`链接没有做任何事情。注销后，用户仍然可以浏览该站点。这是我的代码`facebook.php`：

```
<?php
    require 'src/facebook.php';
    $facebook = new Facebook(array(
           'appId'  => '*************',
           'secret' => '******************************',
    ));
    $user = $facebook->getUser();
    $loginUrl = $facebook->getLoginUrl();
    echo "<a href='$loginUrl'>login</a>";

    $logoutUrl = $facebook->getLogoutUrl();
    echo $loginUrl; 
    if($user){
        session_start() ; 
        $_SESSION['user_info'] = $user; 
        $_SESSION['user_pro']= $facebook->api('/me');
        print_r($_SESSION);
    }
    else{
        echo 'not logged in '; 
    }

    echo "<a href='example.com/logout.php'>log out </a>"
?> 
```

这`code`在登录时工作正常。注销链接应该会破坏会话。这是页面的标题：

```
<?php 
    print_r($_SESSION) ; 
    header('example.com') ; 
?> 
```

我的`logout.php`页面的问题是它根本没有检测到会话。我不知道这是一个`facebook api`问题还是我的`php`问题。

您如何使用 facebook SDK 注销用户？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-18T08:18:02.430

您可以通过将您的网站网址提供给下一个参数并销毁会话来从您的网站以及 Facebook 注销，如下所示

```
$token = $facebook->getAccessToken();
$url = 'https://www.facebook.com/logout.php?next=' . YOUR_SITE_URL .
  '&access_token='.$token;
session_destroy();
header('Location: '.$url); 
```

您还必须将它们从您的网站中注销，并且您必须防止您的网站自动记住您的用户并立即重新登录。

禁用自动登录用户的代码并尝试再次注销。销毁会话不会阻止您的站点为记​​住的用户创建一个全新的有效会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-19T18:24:49.200

这是我的网站的 PHP 注销代码，它使用 facebook 登录和注销用户。您不必破坏会话来注销用户，从技术上讲，您所要做的就是向您自己的网站发出信号，表明此特定会话可能不会用于让用户进入。

**注销.php：**

```
<?php
    require_once("facebook-php-sdk-6c82b3f/src/facebook.php");
    $config = array();
    $config['appId'] = '2911111111146';
    $config['secret'] = 'a6eaaaaaaaaaaaaaaaaaaaaaaaaaad1a';
    $config['fileUpload'] = false;
    $facebook = new Facebook($config);
    $logouturl = $facebook->getLogoutUrl();
    $_SESSION['user_facebook_email'] = "";
    $_SESSION['ask_user_to_login'] = true;
    header("Location: showquestions.php");
?> 
```

**索引.php：**

```
<?php
    require_once("facebook-php-sdk-6c82b3f/src/facebook.php");

    $config = array();
    $config['appId'] = '2911111111146';
    $config['secret'] = 'a6eaaaaaaaaaaaaaaaaaaaaaaaaaad1a';
    $config['fileUpload'] = false;

    $facebook = new Facebook($config);
    $userId = $facebook->getUser();
    if ($_SESSION['ask_user_to_login'] == true || $userId == 0){
      $loginUrl = $facebook->getLoginUrl();
      $_SESSION['ask_user_to_login'] = false;
      echo "<button type='button' onClick=\"window.location='$loginUrl'\">" .
           "<img src='picture.gif' alt='Login with facebook'/>" .
           "</button>";
      exit;
    }
    else
    {
      $userInfo = $facebook->api('/' + $userId);
      session_cache_expire (150000);  //set the cache expire to 15000 minutes
      $_SESSION['user_facebook_email'] = $userInfo['email'];
      $_SESSION['facebook'] = $facebook;      
      header("Location: showquestions.php");
    }
    $userInfo = $facebook->api('/' + $userId);
    echo "Welcome" . $userInfo['email'];
?> 
```

**登录.php：**

```
<?php
    session_start();        
    if (isset($_SESSION['user_facebook_email']) !== true || 
        $_SESSION['user_facebook_email'] == "")
    {
        header("Location: index.php");
        exit;
    }
?> 
```

然后在您想要阻止没有登录用户访问的每个 php 文件中，将其放在顶部：

```
<?php
    require("log2.php");
?> 
```

使用此代码，用户会自动登录，如果他们调用注销代码，站点将不会让他们进入，直到他们再次登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T12:24:38.790

您需要调用`session_start()`将使用会话的所有页面。

要将某人从会话中注销（即清除它），您可以使用`session_destroy()`.

最后，`header('example.com');`实际上不会做任何事情，您是否打算执行重定向？如果是这样，您应该使用 `header('Location: [http://example.com/](http://example.com/) ');

编辑：对不起，我没有正确阅读，第二个代码片段是什么？那是你的 logout.php 页面吗？

据我所知，当您调用 Facebook API 时`getLogoutUrl()`，您应该在用户单击链接时将其发送给他们，而不是您自己的`logout.php`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T12:29:13.443

从 Facebook 注销用户可能很困难。这对我有用

```
// Get an instance of the Facebook class
$facebook = $this->facebook_instance_factory();
// Destroy the session so that no Facebook data is held
$facebook->destroySession();
$logout = $facebook->getLogoutUrl();
$facebook->setAccessToken('');
// Redirect the user to the logout url, facebook will redirect him to our page
wp_redirect( $logout ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T01:27:11.230

**回答**

```
 $_SESSION['fb_(your_APP_ID)_access_token'] = '' ; 
```

当登录会话初始化时，似乎如果我们将这些`session`变量中的任何一个设置为空，它会破坏登录功能，并要求用户再次登录

# ruby-on-rails-3 - 大型数据库中的高级搜索轨道

> ID：11483603
> 
> 赞同：0
> 
> 时间：2012-07-14T12:08:20.193
> 
> 标签：ruby-on-rails-3, activerecord, advanced-search

我有非常大的数据库，我正在使用类似于此 railscast 的高级搜索表单：[http: //railscasts.com/episodes/111-advanced-search-form-revised](http://railscasts.com/episodes/111-advanced-search-form-revised)

也许这是一个愚蠢的问题，但想象一下，您有 400,000 种产品（或更多）要使用此链`.where`（和分页）过滤。

```
products = Product.order(:name)
products = products.where("name like ?", "%#{keywords}%") if keywords.present?
products = products.where(category_id: category_id) if category_id.present?
products = products.where("price >= ?", min_price) if min_price.present?
products = products.where("price <= ?", max_price) if max_price.present?
products.page(params[:page]) 
```

正如我所看到的，搜索执行第一个条件，然后使用其他 where 条件进行过滤，因此您将搜索 400,000 个产品。这不会影响性能，还是我完全（我希望）错了？

**注意：**我也在 railscast 上写过这个问题，但是，作为一个旧的 railscast，我不知道是否有人会在那里看到这个问题。出于这个原因，我也在这里写了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T12:25:55.243

只需使用来自表单的参数中的哈希，我已经有一段时间没有完成它了，我什至没有代码了，但理论上它应该是这样的：

```
finder = Hash.new
params[:form].each {|index, val|
finder[index] = val
} 
```

这将创建所有已传递参数的哈希，您可以像这样将其传递给活动记录搜索。

```
products = Products.where(finder) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T12:11:09.880

Rails 会将所有这些`.where`条件组合到一个 SQL 查询中。

如果您的数据库被正确索引，那么您应该没问题。

# php - Memcached 如何在页面刷新时存储对象，该对象的引用将被清除？

> ID：11483608
> 
> 赞同：0
> 
> 时间：2012-07-14T12:09:12.967
> 
> 标签：php, memcached

问题是当我们如下实例化一个对象时：

```
$obj_user = new user($uid); 
```

在 RAM 中会有对该对象的引用，当我们刷新页面时，页面引用将消失，因此我们无法在页面刷新时访问它。这怎么可能通过 Memcached 访问对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:14:21.950

您需要使用 MemCache 将信息存储在缓存中，或者使用 $_SESSION 变量将信息存储在 Session 中。无论哪种方式，您都需要传递某种信息来识别该用户与所有其他用户。您可以通过隐藏表单、数据库条目、txt 文件记录或其他方法来执行此操作。

获得此标识符后，您可以正确存储它以供以后检索。这是 MemCache 示例：

```
$memcache = new Memcache;
$memcache->connect('memcache_host', 11211);
$memcache->set('user_123', $obj_usr);

//In the next script

$memcache = new Memcache;
$memcache->connect('memcache_host', 11211);
$obj_usr = $memcache->get('user_123'); 
```

# android - 为什么在下面给定的代码中播放歌曲后出现非法状态异常？

> ID：11483611
> 
> 赞同：2
> 
> 时间：2012-07-14T12:09:27.463
> 
> 标签：android

为什么歌曲结束后我得到非法状态异常？我在 seekcontrol.setProgress(mediaPlayer.getCurrentPosition()); 处收到此错误。与搜索栏有什么关系还是因为其他原因？

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.media3);

    Intent i1 = getIntent();
    kg1 = i1.getStringExtra("Kggg1");
    MixName1 = i1.getStringExtra("mixname1");
    MixReplace=MixName1.replace(".mp3", "  ");
    initViews();
}
private void initViews() {
    mediaPlayer = new MediaPlayer();
    audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
    txtcrnt = (TextView) findViewById(R.id.txtcurnt);
    txtremain = (TextView) findViewById(R.id.txtremain);
    txtcrntbig = (TextView) findViewById(R.id.txtcrntbig);
    txttitle=(TextView) findViewById(R.id.title);
    btnpre = (ImageButton) findViewById(R.id.btnpre);
    btnnext = (ImageButton) findViewById(R.id.btnnext);
    btnplay = (ImageButton) findViewById(R.id.btnplay);
    btnrepeat=(ImageButton) findViewById(R.id.btnrepeat);
    btnback = (Button) findViewById(R.id.btnlout);
    btnplayer = (Button) findViewById(R.id.btnedit);
    btnback.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            ((MyMixes)getParent()).goBack();
        }
    });

    btnplayer.setClickable(true);
    btnplayer.setEnabled(false);
    btnplayer.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

        }
    });

    seekcontrol=(SeekBar) findViewById(R.id.seekbarcontrol);

    seekcontrol.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {

        public void onStopTrackingTouch(SeekBar seekBar) {
        }

        public void onStartTrackingTouch(SeekBar seekBar) {

        }

        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
            if(fromUser){
                mediaPlayer.seekTo(progress);
                seekcontrol.setProgress(progress);
            }

        }
    });

    btnplay.setOnClickListener(new OnClickListener() {

        public void onClick(View paramView) {

            btnClick();
        }
    });

    btnplay.setOnClickListener(new OnClickListener() {

        public void onClick(View paramView) {
            if (mediaPlayer != null && mediaPlayer.isPlaying()) {
                if (mediaPlayer != null) {
                    mediaPlayer.pause();
                    btnplay.setImageResource(R.drawable.play);
                }
            } else {
                if (mediaPlayer != null && mediaPlayer != null) {
                    mediaPlayer.start();
                    startPlayProgressUpdater();
                    btnplay.setImageResource(R.drawable.pause);
                }
            }
        }
    });

    btnnext.setOnClickListener(new OnClickListener() {

        public void onClick(View paramView) {

        }
    });

    btnpre.setOnClickListener(new OnClickListener() {

        public void onClick(View paramView) {

        }
    });

    seekvolume = (SeekBar) findViewById(R.id.seekbarvolume);

    new Thread()
    {
        public void run() 
        {
            while (isDownloading)
            {
                if (Data.filenames != null&& Data.filenames.size() >= (getIntent().getExtras().getInt("index") + 1) && Data.filenames.get(getIntent().getExtras().getInt("index")) != null) 
                {
                    try 
                    {
                        mediaPlayer.setDataSource(Data.filenames.get(getIntent().getExtras().getInt("index")));
                        mediaPlayer.prepare();
                        mediaPlayer.start();
                        startPlayProgressUpdater();
                        mediaPlayer.setOnCompletionListener(new OnCompletionListener() 
                        {
                            @Override
                            public void onCompletion(MediaPlayer mp) 
                            {
                                mediaPlayer.stop();
                                mediaPlayer.release();
                            }
                        });
                    } catch (IllegalArgumentException e) {
                        e.printStackTrace();
                    } catch (IllegalStateException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    } catch (Exception e) {
                        e.printStackTrace();
                    } finally {
                        isDownloading = false;
                    }

                    if (mediaPlayer != null)
                        seekcontrol.setMax(mediaPlayer.getDuration());

                    int maxvolume = audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
                    int curntvolume = audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);

                    seekvolume.setMax(maxvolume);
                    seekvolume.setProgress(curntvolume);

                    seekvolume.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() 
                    {

                        public void onStopTrackingTouch(SeekBar paramSeekBar) {
                        }

                        public void onStartTrackingTouch(SeekBar paramSeekBar) {
                        }

                        public void onProgressChanged(SeekBar paramSeekBar, int progress, boolean paramBoolean) 
                        {
                            audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, progress, 0);
                        }
                    });
                    seekcontrol.setMax(mediaPlayer.getDuration());

                    seekcontrol.setOnTouchListener(new OnTouchListener() 
                    {
                        public boolean onTouch(View v, MotionEvent paramMotionEvent) 
                        {
                            seekChange(v);
                            return false;
                        }
                    });
                }
            }
        };
    }.start();
}

protected void btnClick() {
    i++;
    i = i % 2;
    startSong(i);
}
 private void startSong(int i) {
        if (i == 1) {
            System.out.println("11111" + i);
            btnplay.setBackgroundResource(R.drawable.pause);
            try {
                System.out.println("start try chech------");
                mediaPlayer.start();
                startPlayProgressUpdater();
            } catch (Exception e) {
                mediaPlayer.pause();
            }
        }
        if (i == 0) {
            btnplay.setBackgroundResource(R.drawable.play);
            mediaPlayer.pause();
            System.out.println("00000" + i);
        }
    }

public void startPlayProgressUpdater() {

    Log.e("position", mediaPlayer.getCurrentPosition()+"");
    seekcontrol.setProgress(mediaPlayer.getCurrentPosition());

    if (mediaPlayer.isPlaying()) {
        Runnable notification = new Runnable() {
            public void run() {
                startPlayProgressUpdater();

                int curtimeplay = mediaPlayer.getCurrentPosition();
                int curntseconds = (int) (curtimeplay / 1000) % 60;
                int curntminutes = (int) ((curtimeplay / (1000 * 60)) % 60);
                txtcrnt.setText(curntminutes + ":" + curntseconds);
                txtcrntbig.setText(curntminutes + ":" + curntseconds);

                int duratplay = mediaPlayer.getDuration();
                int totaldurationseconds = (int) (duratplay / 1000) % 60;
                int totaldurationminutes = (int) ((duratplay / (1000 * 60)) % 60);
                int remianingtime = duratplay - curtimeplay;
                int remianingtimeseconds = (int) (remianingtime / 1000) % 60;
                int remianingtimeminutes = (int) ((remianingtime / (1000 * 60)) % 60);
                txtremain.setText(remianingtimeminutes + ":"
                        + remianingtimeseconds);
            }
        };
        handler.postDelayed(notification, 1000);
    } else {
        mediaPlayer.pause();

        btnplay.setBackgroundResource(R.drawable.play);

        seekcontrol.setProgress(mediaPlayer.getCurrentPosition());
    }

}

 protected void seekChange(View v) {
        if (mediaPlayer.isPlaying()) {
            SeekBar sb = (SeekBar) v;
            mediaPlayer.seekTo(sb.getProgress());
        }
    } 
```

日志猫

```
07-14 21:45:31.530: E/AndroidRuntime(13870): FATAL EXCEPTION: main
07-14 21:45:31.530: E/AndroidRuntime(13870): java.lang.IllegalStateException
07-14 21:45:31.530: E/AndroidRuntime(13870):    at android.media.MediaPlayer.getCurrentPosition(Native Method)
07-14 21:45:31.530: E/AndroidRuntime(13870):    at com.nelitemusic.MediaPlay1.startPlayProgressUpdater(MediaPlay1.java:253)
07-14 21:45:31.530: E/AndroidRuntime(13870):    at com.nelitemusic.MediaPlay1$9.run(MediaPlay1.java:259)
07-14 21:45:31.530: E/AndroidRuntime(13870):    at android.os.Handler.handleCallback(Handler.java:587)
07-14 21:45:31.530: E/AndroidRuntime(13870):    at android.os.Handler.dispatchMessage(Handler.java:92)
07-14 21:45:31.530: E/AndroidRuntime(13870):    at android.os.Looper.loop(Looper.java:132)
07-14 21:45:31.530: E/AndroidRuntime(13870):    at android.app.ActivityThread.main(ActivityThread.java:4126)
07-14 21:45:31.530: E/AndroidRuntime(13870):    at java.lang.reflect.Method.invokeNative(Native Method)
07-14 21:45:31.530: E/AndroidRuntime(13870):    at java.lang.reflect.Method.invoke(Method.java:491)
07-14 21:45:31.530: E/AndroidRuntime(13870):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
07-14 21:45:31.530: E/AndroidRuntime(13870):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
07-14 21:45:31.530: E/AndroidRuntime(13870):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:23:46.887

```
seekcontrol.setProgress(mediaPlayer.getCurrentPosition()); 
```

叫里面`startPlayProgressUpdater()`，也就是叫里面`inner thread`。由于`SeekBar`只能由 UI Thread 触摸，因此您应该使用 an`Handler`来发布

```
seekcontrol.setProgress(mediaPlayer.getCurrentPosition()); 
```

进入 UI 线程队列。

# apache2 - 为什么浏览器不在页面上显示日期，而是将日期下载为文件？

> ID：11483613
> 
> 赞同：0
> 
> 时间：2012-07-14T12:10:25.403
> 
> 标签：apache2, xmlhttprequest, cgi

我使用 xmlhttprequest 来“获取”服务器上的一部分数据，而不是在浏览器上显示数据，浏览器让我下载它，它告诉我这是一个 PL 文件。然后我尝试以相同的方式获取一些其他数据。浏览器可以很好地显示它们。我将内容类型更改为 application/octet-stream 并下载可以在 borwser 上显示的数据，它告诉我这是一个 SSR 源文件。我不知道为什么会这样？

# subdomain - 带有屏蔽中断视口的域名转发

> ID：11483614
> 
> 赞同：8
> 
> 时间：2012-07-14T12:10:33.433
> 
> 标签：subdomain, viewport, forwarding

所以，我发现了一个相当有趣的问题，并且想知道是否有其他人遇到过它并且可能以某种方式解决了它。

我正在开发一个响应式网站。这个网站在[这里](http://nicholasarehart.com/designs)托管。并且域名[iconclash.com](http://ionclash.com)正在通过掩码转发到子域。事情进展顺利，但我注意到在移动设备上我的视口元标记不起作用。检查页面后，我注意到这是被注入的：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<html>

<head>
  <title>ionclash.com</title>

</head>
<frameset rows="100%,*" border="0">
  <frame src="http://nicholasarehart.com/designs/" frameborder="0" />
  <frame frameborder="0" noresize />
</frameset> 
```

这似乎破坏了视口标签。如果您直接访问子域，您会看到该标签正在工作，但如果您访问它被转发给它的域名，则它不是。那么，还有其他人见过这个吗？还是解决了？至少我认为这是需要注意的。

编辑：[似乎其他人可能遇到过这个问题](http://opensourcehacker.com/2012/01/09/setting-mobile-browser-viewport-mobilizing-websites-with-responsive-design-and-html5-part-4/comment-page-1/#comment-6283)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T22:47:25.083

编辑：我最近刚从使用 GoDaddy 的带有掩码的子域转发转而在我自己的服务器上使用 Apache 的 mod_rewrite 工具来设置子域。在我看来，这要好得多，因为没有使用会导致视口问题的框架等。

***注意***：您需要添加一个通配符子域以指向您的服务器的 ip，然后下面的方法才会起作用。

我的目录结构如下：

/srv/http/
---------子域/
-------www/
------------- ------sub1/
-------------------sub2/

我的主网站的代码位于**www**目录中，因此它适合子域的工作方式，但不是真正的子域本身，因为它是主站点。

以下是我的 httpd.conf 文件中的内容。它是唯一的虚拟主机。

```
<VirtualHost *:80>
  ServerAlias *.domain.com

  #Rewrite Starts*
  RewriteEngine on

  #This will just force www.domain.com if
  #only domain.com is given (to load our
  #code in the www directory) 
  RewriteCond %{HTTP_HOST} ^domain.com
  RewriteRule (.*) http://www.jmtk.co$1 [R=301,L]

  #RewriteCond %{HTTP_HOST} !^www.* [NC]
  RewriteCond %{HTTP_HOST} ^([^\.]+)\.domain\.com
  RewriteCond /srv/http/subdomains/%1 -d
  RewriteRule ^(.*) /subdomains/%1/$1 [L]
</VirtualHost> 
```

这里只是我的服务器的一些配置信息供参考：

```
[root@server ~]# apachectl -v
Server version: Apache/2.2.24 (Unix)
Server built:   Mar 18 2013 13:57:39

[root@jmtksrv ~]# uname -a
Linux jmtksrv 3.8.11-1-ARCH #1 SMP PREEMPT Wed May 1 20:18:57 CEST 2013 x86_64 GNU/Linux 
```

希望这对你有用。在查看了几个试图解释使用 mod_rewrite 创建子域的资源之后，我花了很长时间才最终得到它。

# string - 在 LISP 中将 CHAR 转换为 ASCII

> ID：11483618
> 
> 赞同：-1
> 
> 时间：2012-07-14T12:11:11.203
> 
> 标签：string, lisp, common-lisp

我想在 LISP 中编写一个程序来从用户那里获取一个字符串，并返回通过将 1 加到字符串的每个字符代码而形成的字符串。例如：

输入：“hello123” 输出：“ifmmp234”

我想也许我应该将字符一一转换为ASCII，然后做我想做的事。

对此的任何帮助将不胜感激..

谢谢

这是我开发的代码。然而，它在输出中给了我 NIL 。你能帮我解决这个问题吗：

```
(defun esi (n)
  (setf m 0)
  (loop (when (< m (length n))
          (return))
        (code-char (+ 1 (char-code (char n m))))
        (+ 1 m))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T13:36:54.500

看看函数[`char-code`](http://www.lispworks.com/documentation/HyperSpec/Body/f_char_c.htm)和[`code-char`](http://www.lispworks.com/documentation/HyperSpec/Body/f_code_c.htm)。

*编辑：*关于您的代码示例：

*   您的函数的输入似乎应该是一个字符串。这样命名，例如`string`。
*   那`(setf m 0)`就是设置一个自由变量。在这种情况下，我必须假设`m`从未在任何地方定义过，因此行为是未定义的。例如，您应该使用`let`来建立本地绑定。提示：大多数循环结构也提供了建立本地绑定的方法。
*   唯一退出循环的是`(return)`. 由于它没有获取任何参数，因此它将始终返回`nil`. 您需要在某处累积新字符串并最终返回它。
*   Lisp 中的函数大多不修改它们的参数。 `(+ 1 m)`不修改`m`。它只返回一个大于 1 的值`m`。同样，`code-char`不会修改其参数，而是返回一个新值，即与参数对应的字符。您需要绑定或分配这些值。
*   那个完成条件是错误的。它将直接终止，或者如果输入字符串为空，则永远不会终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T14:20:16.293

有很多方法可以做你想做的事。让我们从一个函数开始，它在一个代码点之后返回一个字符（这里有一些边界问题，我们暂时忽略它）。

```
(defun next-codepoint (char) (code-char (1+ (char-code char)))) 
```

现在，这对字符起作用。令人高兴的是，字符串本质上是一个字符序列。一般来说，序列操作应该将您发送到 MAP 系列的方向。

所以，我们有：

```
(defun nextify-string (string) (map 'string #'next-codepoint string)) 
```

逐步了解正在发生的事情：

*   对于输入字符串 m 中的每个字符，我们执行以下操作：
    *   我们将字符转换为代码属性。
    *   我们增加这个
    *   我们将它转​​换回一个字符
*   然后我们将所有这些组合成一个返回值。

# c# - 为什么会出现这个异常？

> ID：11483623
> 
> 赞同：1
> 
> 时间：2012-07-14T12:12:10.473
> 
> 标签：c#, dictionary

![](../Images/e9651c71bb4117e8217dced80c3a53b7.png)

我在 c# 中有一个`dictionary`名字。`Pair`它包含一些键值对。我添加了一个屏幕截图，在 上生成了一个异常`(p.Key == "left)`，`Sequence containes no matching element`但是如果您在 中看到，则`Pair Dictionary`该`left`密钥存在于那里。那么请有人告诉我为什么会发生这个异常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T12:14:55.030

如果我没看错的话，这个`left`值前面有一个空格`" left"`，所以`p.Key == "left"`永远不会是真的。

在尝试操作它之前，请改用`p.Key.contains("left")`，或检查它是否返回值。或修剪前导和尾随空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T12:16:16.900

您应该使用[indexer](http://msdn.microsoft.com/en-us/library/9tee9ht2.aspx)或[TryGetValue](http://msdn.microsoft.com/en-us/library/bb347013.aspx)而不是[Single](http://msdn.microsoft.com/en-us/library/bb155325.aspx)。使用 Single，没有理由使用字典。

此外，您的问题源于这样一个事实，即“左”之前有空格，因此整个字符串实际上是“左”。看看宽度是如何向左移动一个字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T12:18:06.690

如果这不是白马问题，那么我能做到的唯一方法是字典是否为 a `Dictionary<object,...>`，在这种情况下，`==`您使用的是*引用相等*，而不是*字符串相等*。那会导致它失败。如果是这样，请使用 a`Dictionary<string,...>`或使用`Equals("left", p,Key)`.

请注意，这`Pair["left"]`将是一种更好的查找方式。

# mysql - CakePHP 2.1 选择 Distinct 字段但仍选择 SQL 表中的 ID

> ID：11483627
> 
> 赞同：0
> 
> 时间：2012-07-14T12:12:29.723
> 
> 标签：mysql, cakephp-2.1, distinct-values

嗨，我在我的新闻网站上为我的投资组合制作了一个画廊，但是有一个小故障。我正在尝试选择一个不同的画廊，这样它就不会重复自己，这是我到目前为止的代码

```
function viewgalleries() {

    $viewgalleries = $this->Gallery->find('all', array(
        'fields' => 'DISTINCT Gallery.gallery_name'));
    if (!empty($this->request->params['requested'])) {
return $viewgalleries; }
    $this->set('gallery', $viewgalleries); 

} 
```

这是我的观点..

```
 <?php $viewgalleries = $this->requestAction('/Galleries/viewgalleries');?>

    <div class="allgalleries">

 <table class="galleries">
<?php foreach ($viewgalleries as $galleries): ?>
    <tr>
       <td>
         <span class="gallerylink">
            <?php echo $this->Html->link($galleries['Gallery']['gallery_name'], 
                  array('controller' => 'Gallery', 'action' => 'view', 
                  $galleries['Gallery']['id'])); ?>
         </span>
       </td>
    </tr>
  <?php endforeach; ?>
  </table>
    </div> 
```

这给了我想要的但是它没有选择表中的 id 字段所以它给我这个错误......

```
 Notice (8): Undefined index: id [APP/View/Galleries/viewgalleries.ctp, line 10] 
```

下面它确实显示了画廊的名称，但是 2012 年欧洲冠军联赛决赛

关于如何从数据库中选择 id 的任何想法？

在此先感谢或任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T18:49:59.790

Тry`fields`像这样更改 find 中的键：

```
'fields' => array('DISTINCT Gallery.gallery_name', 'Gallery.id') 
```

你也可以试试：

```
$this->ModelName->query('SELECT 
                 DISTINCT Gallery.gallery_name,
                 Gallery.id 
                 FROM kickoff.galleries
                 AS Gallery WHERE 1 = 1'); 
```

还有另一种解决方法可以解决您的问题。如下查询构造将产生与 SELECT DISTINCT 相同的结果集：

```
select * from TABLE group by FIELDNAME having count(FIELDNAME)>=1; 
```

所以在你的情况下应该是：

```
 SELECT Gallery.id, Gallery.gallery_name
   FROM kickoff.galleries 
   GROUP BY Gallery.gallery_name 
   HAVING COUNT(Gallery.gallery_name)=>1 
```

但请记住，COUNT() 不计算 NULL 值，因此如果您按具有 NULL 值的字段计算值，则 COUNT() 不会计算该行。这里最好的选择是在表声明中使用“NOT NULL”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:34:07.790

尝试更改 find 中的 fields 参数键，如下所示：

```
'fields' => array('DISTINCT Gallery.gallery_name, Gallery.id') 
```

这对你有用。请问它是否不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:09:58.200

我没有使用 select distinct 函数，因为它被证明非常棘手，而是决定重新格式化我的画廊，我添加了诸如 isUnique 之类的验证技术，以便允许传递相同的画廊名称，这是在模型/画廊中实现的.php 带有以下语句：

```
public $validate = array(
    'gallery_name' => array(
        'rule' => 'isUnique',
        'message' => 'This gallery already exists.')); 
```

希望这对其他人有帮助。

# javascript - 如何真正防止 Chrome 中的缓存？

> ID：11483628
> 
> 赞同：1
> 
> 时间：2012-07-14T12:12:52.830
> 
> 标签：javascript, jquery, caching, google-chrome

> **可能重复：**
> [为网站开发禁用 chrome 缓存](https://stackoverflow.com/questions/5690269/disabling-chrome-cache-for-website-development)

我正在开发一个不幸的是围绕框架构建的网络应用程序。在切换到 Chrome 之前，我使用了 Firefox 中的 Web 开发人员工具栏来禁用缓存。虽然我宁愿为单个站点执行此操作，但它运行良好。

在 Chrome 中，开发控制台 -> 常规 -> 禁用缓存并非一直有效，但如果我手动删除缓存，它可以正常工作。有人可能会说只使用硬刷新快捷方式，但我的应用程序的性质要求我每次执行此操作时都必须登录。

还有什么我可以做的吗？这真的会为我节省大量的开发时间，这是我从 Firefox 中唯一想念的东西：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T15:15:10.683

单击chrome右上角的扳手，然后选择“新的隐身窗口”。使用隐身窗口将解决所有缓存问题。我有时在开发时使用它，它很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T12:55:03.400

有一种方法不依赖于浏览器。如果您浏览 www.abc.com，浏览器可能会将数据保存在缓存中。但是，如果您更改 url，则不会使用任何机会。因此，只需浏览 www.abc.com?r=。这样浏览器会认为页面不同，不会使用缓存。

希望这是帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T15:21:44.310

**[Web Developer](https://chrome.google.com/webstore/detail/bfbameneiokkgbdmiekhjnmfkcnldhhm)**也可用于 Chrome。虽然它不允许完全禁用缓存，但它仍然有一个非常易于访问的“清除缓存”选项。

右下角还有一个扳手图标，您可以在其中永久禁用缓存。看看**[这个](https://stackoverflow.com/questions/5690269/disabling-chrome-cache-for-website-development)**。

# iphone - 用 plist 填充 tableView

> ID：11483629
> 
> 赞同：0
> 
> 时间：2012-07-14T12:13:07.650
> 
> 标签：iphone, xcode4.3

我正在努力用 plist 填充 tableView 10 天。这是我的清单。item 0 description descr1 image image1.jpg name mom item 1 description descr2 image image2.png name dad

我需要填充字符串“名称”。我试图发布我的代码，但它总是说我的代码格式不正确，所以我无法发布它。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:20:22.447

在此处查看 Apple 教程[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/TableView_iPhone/CreateConfigureTableView/CreateConfigureTableView.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/TableView_iPhone/CreateConfigureTableView/CreateConfigureTableView.html)

如果您遵循本指南，则很简单。

# java - STS 报告的关于动态 Web 模块版本的错误

> ID：11483637
> 
> 赞同：6
> 
> 时间：2012-07-14T12:14:29.740
> 
> 标签：java, spring, maven-2, sts-springsourcetoolsuite

我使用 Spring 3.0.6 和 Maven 3.0.3 在 STS 2.9.2 中创建了一个 Web 项目。我已经创建了一些没有错误的页面和代码。我已经在项目的 pom.xml 中将 Spring 库版本从 3.0.6 升级到 3.1.2，现在我收到以下错误消息：

> 动态 Web 模块 3.0 需要 Java 1.6 或更高版本。

项目中的动态 web 模块版本和 Java 编译器版本分别设置为 2.5 和 1.6。还将我的项目的 JRE 系统库设置为 1.6。

我尝试删除 Maven 特性，然后再次添加它，并且 JRE 系统库自动设置为 JSE 1.5（但我没有安装 Java 1.5）。我手动将 JRE 系统库更改为 1.6（以修复有关 JRE 系统库版本的 STS 投诉）但有关动态 Web 模块的错误仍然存​​在。

我已经用谷歌搜索了一个修复程序，但我什么也没找到。

我该如何解决该错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-27T03:17:19.020

首先检查您的项目是否配置为使用 Java 1.7。右键单击您的项目 > 属性 > Java 编译器并将“编译器合规性级别”设置为 1.7。

接下来从左侧的菜单中选择 Project Facets > Java 并将其版本设置为 1.7 如果您在之前的首选项中没有找到 1.7 作为下拉选项之一，那么您必须先将其添加到 eclipse。导航到 eclipse Preferences > Java > Installed JREs，单击 Add，然后找到安装的 Java 路径。

打开项目的 pom.xml 并添加这个插件标签

```
<build>
    <plugins>
        <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.1</version>
        <configuration>
            <source>1.7</source>
            <target>1.7</target>
        </configuration>
    </plugin>
    </plugins>
</build> 
```

最后，右键单击您的项目 > Maven > 更新项目...</p>

来源：http: [//qussay.com/2013/09/13/solving-dynamic-web-module-3-0-requires-java-1-6-or-newer-in-maven-projects/](http://qussay.com/2013/09/13/solving-dynamic-web-module-3-0-requires-java-1-6-or-newer-in-maven-projects/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T11:38:31.763

我无法通过修改 pom.xml 或删除项目和工作区文件并重新启动 eclipse 来解决这个问题。我通过禁用项目的 Maven 特性然后重新启用它来修复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T14:15:08.930

我也有同样的问题。我从 Eclipse 中删除项目。在控制台中我输入`mvn eclipse:clean`. 在 Eclipse 中，我导入了一个 Maven 项目，这是一个解决方案。

# php - 禁用特定页面上的 Javascript 执行 (HTML/PHP)

> ID：11483638
> 
> 赞同：5
> 
> 时间：2012-07-14T12:14:29.740
> 
> 标签：php, javascript, security, header

是否有任何 HTTP 标头可以禁用特定页面的 Javascript？我的网站提供用户生成的 HTML 内容（这就是为什么我不能只使用`htmlenitities`）并且我想防止脚本（JavaScript 注入）。

我已经使用 HttpOnly-cookies 设置为仅在主域上进行身份验证，而用户内容仅显示在无法读取 cookie 的子域上。问题是仍然有太多的可能性来执行 JavaScript - 例如使用事件属性，例如`onclick`，Internet Explorer 在 CSS 中甚至有一个属性来允许 JavaScript 执行 ( `expression`)，这是我以前从未听说过的。我读到的另一个有趣的想法是抛出异常以阻止后面的代码。另一个想法是定义一个包含所有允许的标签的列表以及一个包含每个允许的属性名称的数组，但这是一项非常艰巨的工作，我想这不会涵盖所有可能的注入。

我想我不是唯一一个遇到这个问题的人，所以有人知道覆盖**所有**可能有害代码的可能性 - 至少在现代浏览器中？

一个类似于 的简单虚构标题`X-Scripting: disabled`将使生活变得如此轻松！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:57:57.497

是的，有一个名为[Content Security Policy](https://developer.mozilla.org/en/Introducing_Content_Security_Policy)的实验性 HTTP 标头允许您控制 JavaScript 的来源，这会使 XSS 成为不可能。但是，它目前仅受 Chrome 和 Firefox 支持。

启用 HttpOnly-cookies 是个好主意，但这将完全防止**零**攻击。您仍然可以通过[读取 CSRF 令牌并使用 XHR 执行请求](http://namb.la/popular/tech.html)来利用 XSS 。

获取 XSS 的方法有很多种，像[~~ShieldSeal~~](https://shieldseal.com/)（下）这样的漏洞扫描器会（几乎）找到所有方法。[Skipfish](http://code.google.com/p/skipfish/)是一个非常原始的开源漏洞扫描程序，但它是免费的。这就是大多数 Web 应用程序处理广泛传播的漏洞的方式。（我在 ShieldSeal 工作，帮助构建他们的漏洞扫描器，我热爱我的工作。）

当发现问题时，您应该使用`htmlspecialchars($var)`或`htmlspecialchars($var, ENT_QUOTES)`清理输入。`ENT_QUOTES`可以防止攻击者引入一个`onclick`或其他 JavaScript 事件。

# ios - 如何在 iOS 上使用着色器绘制类似卡通的黑色边缘？

> ID：11483639
> 
> 赞同：-1
> 
> 时间：2012-07-14T12:14:42.903
> 
> 标签：ios, opengl-es

我正在 iPhone 上使用 OpenGL ES 2.0 开发一个简单的 3D 游戏。我需要为我的网格绘制黑色边缘，就像您在卡通着色中看到的那样，但没有其他类似卡通的渲染效果。

我如何编写顶点和片段着色器来在 OpenGL ES 2.0 iOS 应用程序中完成这种外观？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T12:18:41.857

是的，cg 教程书
[http://http.developer.nvidia.com/CgTutorial/cg_tutorial_chapter09.html](http://http.developer.nvidia.com/CgTutorial/cg_tutorial_chapter09.html)
第 9.2.1 节，glsl 版本与它没有太大区别。

对于 glsl 并且仅对于边缘，您可以执行类似的操作

```
 float edge = dot(fragmentNormal, -viewingDirection);
 edge = clamp(edge, 0, 1);
 if(edge < 0.2)
 finalColor = mix(vec3(0, 0, 0), diffuseColor, edge); 
```

# c++ - ACE_TRACE 宏不起作用

> ID：11483640
> 
> 赞同：0
> 
> 时间：2012-07-14T12:14:43.860
> 
> 标签：c++, ace

我正在关注**ACE Programmer's Guide, The: Practical Design Patterns for Network and Systems Programming**作者 Stephen D. Huston, James CE Johnson, Umar Syyid。在本书一开始就有一个清单：

```
#include "ace/Log_Msg.h"

void foo (void);

int ACE_TMAIN (int, ACE_TCHAR *[])
{
    ACE_TRACE(ACE_TEXT ("main"));

    ACE_DEBUG ((LM_INFO, ACE_TEXT ("%IHi Mom\n")));
    foo();
    ACE_DEBUG ((LM_INFO, ACE_TEXT ("%IGoodnight\n")));

    return 0;
}

void foo (void)
{
    ACE_TRACE (ACE_TEXT ("foo"));

    ACE_DEBUG ((LM_INFO, ACE_TEXT ("%IHowdy Pardner\n")));
} 
```

正如书中所说，这段代码应该有输出：

```
(1024) calling main in file `Simple1.cpp' on line 7
   Hi Mom
   (1024) calling foo in file `Simple1.cpp' on line 18
      Howdy Pardner
   (1024) leaving foo
   Goodnight
(1024) leaving main 
```

但它正在输出：

```
Hi Mom
Howdy Pardner
Goodnight 
```

我在 Windows 7、Visual C++ 2010 中将它作为 Win32 控制台应用程序运行。有没有其他方法可以轻松学习 ACE？以这种方式学习似乎很乏味。Qt 有自己的跨平台网络库。ACE 比 Qt 的库有什么优势吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T12:19:11.823

那是因为您还没有定义`ACE_NTRACE`，因此`ACE_TRACE`默认情况下扩展为空。将此添加到您的代码中：

```
#define ACE_NTRACE 0 
```

# joomla - 无法理解 JModel 的哪个子包适用于 2.5x

> ID：11483641
> 
> 赞同：2
> 
> 时间：2012-07-14T12:14:50.843
> 
> 标签：joomla

我找不到抽象类 JModel 的真正子包（平台 12.1：[http](http://api.joomla.org/Joomla-Platform/Application/JModel.html) ://api.joomla.org/Joomla-Platform/Application/JModel.html ）。有指出：

```
Class JObject   (Subpackage Base)
   Abstract class JModel   (Subpackage Application) 
```

我在包树中看不到它。我没有看到`Base->JObject`，也没有`Application->JModel`，也没有`Object -> JObject -> JModel`。我真的不知道在哪里可以找到它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:10:11.693

您可以在您的类中扩展 JModel，以及 JModelList、JModelItem、JModelForm 等。

这真的取决于你想做什么。

实际的实现可以在下面找到：

```
libraries/joomla/application/component/model.php or modeladmin.php etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T23:18:15.883

在 2.5 中，您应该使用 Valentin 提到的 JLegacyModel 类。基本 JModel 类位于 legacy 文件夹中，而子类位于 cms 文件夹中。这将让您在需要时切换到 J3。

库/旧版/模型/model.php

# java - 如何通过反射访问私有方法和私有数据成员？

> ID：11483647
> 
> 赞同：27
> 
> 时间：2012-07-14T12:14:58.410
> 
> 标签：java, security, reflection, private

我知道我们可以通过反射访问私有构造函数，正如[@Sanjay T. Sharma](https://stackoverflow.com/users/193906/sanjay-t-sharma)在他对我的问题的回答中提到的那样：[“instanceof Void”是否总是返回 false？](https://stackoverflow.com/questions/6636734/does-instanceof-void-always-return-false)

然而，[@duffymo](https://stackoverflow.com/users/37213/duffymo) [说](https://stackoverflow.com/questions/11480181/unit-testing-a-class-with-private-environment-variables/11480226#comment15160872_11480226)：

> 你可以通过反射访问私有的一切——方法、构造函数、数据成员，一切。

1.  如何访问私有方法和私有数据成员？
2.  是否可以通过反射访问局部变量？
3.  有没有办法阻止任何人访问私有构造函数、方法和数据成员？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-07-14T13:29:52.697

1）***如何访问私有方法和私有数据成员？***

您可以借助以下方法来做到这一点`setAccessible(true)`：

```
class Dummy{
    private void foo(){
        System.out.println("hello foo()");
    }
    private int i = 10;
}

class Test{
    public static void main(String[] args) throws Exception {
        Dummy d = new Dummy();

        /*---  [INVOKING PRIVATE METHOD]  ---*/
        Method m = Dummy.class.getDeclaredMethod("foo");
        //m.invoke(d); // Exception java.lang.IllegalAccessException
        m.setAccessible(true);//Abracadabra
        m.invoke(d); // Now it's OK

        /*---  [GETING VALUE FROM PRIVATE FIELD]  ---*/
        Field f = Dummy.class.getDeclaredField("i");
        //System.out.println(f.get(d)); // Not accessible now
        f.setAccessible(true); // Abracadabra
        System.out.println(f.get(d)); // Now it's OK

        /*---  [SETTING VALUE OF PRIVATE FIELD]  ---*/
        Field f2 = Dummy.class.getDeclaredField("i");
        //f2.set(d,20); // Not accessible now
        f2.setAccessible(true); // Abracadabra
        f2.set(d, 20); // Now it's OK
        System.out.println(f2.get(d));
    }
} 
```

2）***是否可以通过反射访问局部变量？***

不。局部变量不能在创建它们的块之外访问（有人可能会说，您可以将这样的变量分配给类似的字段`field = localVariable;`，然后通过反射访问这样的字段，但是这样我们将访问*值*，不是*变量*）。

3)***有没有办法阻止任何人访问私有构造函数、方法和数据成员？***

我认为 for`constructors`或者`methods`您可以使用 stacktrace 来检查它是否被`Reflection`.
对于字段，我找不到阻止通过反射访问它们的解决方案。

## [警告：这未经任何人批准。我只是受您的问题启发而写的。]

```
class Dummy {
    private void safeMethod() {
        StackTraceElement[] st = new Exception().getStackTrace();
        // If a method was invoked by reflection, the stack trace would be similar
        // to something like this:
        /*
        java.lang.Exception
            at package1.b.Dummy.safeMethod(SomeClass.java:38)
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        ->    at java.lang.reflect.Method.invoke(Method.java:601)
            at package1.b.Test.main(SomeClass.java:65)
        */
        //5th line marked by "->" is interesting one so I will try to use that info

        if (st.length > 5 &&
            st[4].getClassName().equals("java.lang.reflect.Method"))
            throw new RuntimeException("safeMethod() is accessible only by Dummy object");

        // Now normal code of method
        System.out.println("code of safe method");
    }

    // I will check if it is possible to normally use that method inside this class
    public void trySafeMethod(){
        safeMethod();
    }

    Dummy() {
        safeMethod();
    }
}

class Dummy1 extends Dummy {}

class Test {
    public static void main(String[] args) throws Exception {
        Dummy1 d1 = new Dummy1(); // safeMethod can be invoked inside a superclass constructor
        d1.trySafeMethod(); // safeMethod can be invoked inside other Dummy class methods
        System.out.println("-------------------");

        // Let's check if it is possible to invoke it via reflection
        Method m2 = Dummy.class.getDeclaredMethod("safeMethod");
        // m.invoke(d);//exception java.lang.IllegalAccessException
        m2.setAccessible(true);
        m2.invoke(d1);
    }
} 
```

**`Test`主要方法的输出**：

```
code of safe method
code of safe method
-------------------
Exception in thread "main" java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at package1.b.Test.main(MyClass2.java:87)
Caused by: java.lang.RuntimeException: method safeMethod() is accessible only by Dummy object
    at package1.b.Dummy.safeMethod(MyClass2.java:54)
    ... 5 more 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-14T12:22:23.443

1.  使用您链接到的答案中显示的方法：[setAccessible(true)](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/AccessibleObject.html#setAccessible%28boolean%29)，它是 Field、Constructor 和 Method 的超类的方法。
2.  不。
3.  不，除非代码在您控制的 JVM 中运行，您可以在其中安装安全管理器。但是，如果您给某人一个 jar 文件，并且他使用该 jar 文件中的类，他将能够访问所有内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-08T09:21:30.193

**要访问** **私有字段**，您需要调用 `Class.getDeclaredField(String name)`or`enter code here`方法。 **检查这个简单的代码：**

```
public class PrivateObject {

  private String privateString = null;

  public PrivateObject(String privateString) {
    this.privateString = privateString;
  }
}

PrivateObject privateObject = new PrivateObject("The Private Value");

Field privateStringField = PrivateObject.class.
            getDeclaredField("privateString");

privateStringField.setAccessible(true);

String fieldValue = (String) privateStringField.get(privateObject);
System.out.println("fieldValue = " + fieldValue 
```

**要访问私有方法**，您需要调用 Class.getDeclaredMethod(String name, Class[] parameterTypes) 或 Class.getDeclaredMethods() 方法。

**检查这个简单的代码：**

```
public class PrivateObject {

  private String privateString = null;

  public PrivateObject(String privateString) {
    this.privateString = privateString;
  }

  private String getPrivateString(){
    return this.privateString;
  }
}
PrivateObject privateObject = new PrivateObject("The Private Value");

Method privateStringMethod = PrivateObject.class.
        getDeclaredMethod("getPrivateString", null);

privateStringMethod.setAccessible(true);

String returnValue = (String)
        privateStringMethod.invoke(privateObject, null);

System.out.println("returnValue = " + returnValue); 
```

[在http://tutorials.jenkov.com/java-reflection/private-fields-and-methods.html](http://tutorials.jenkov.com/java-reflection/private-fields-and-methods.html)阅读详细信息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-09T11:13:27.587

```
 Area s=(Area)c.newInstance();  
 s.setRadius(10);
 System.out.println("Area: "+s.calculateArea(4));

 Method m[]=c.getDeclaredMethods(); 
  Constructor c1[]=c.getConstructors();  

 for(int i=0;i<m.length;i++)
     System.out.println(""+m[i]);

 for(int i=0;i<c1.length;i++)
     System.out.println(""+c1[i]); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-09T13:01:40.130

示例如下：

```
import java.lang.reflect.Constructor;

import java.lang.reflect.Field;

import java.lang.reflect.InvocationTargetException;

import java.lang.reflect.Method;

class Test
{
    private int a = 5;   // Private data member

    private void call(int n) // Private method
    {
        System.out.println("in call()  n: " + n);
    }
}

public class Sample
{
    public static void main(String args[]) throws ClassNotFoundException, NoSuchMethodException, SecurityException, InstantiationException, IllegalAccessException, IllegalArgumentException, InvocationTargetException, NoSuchFieldException
    {
        Class c = Class.forName("Test");

        Object obj = c.newInstance();

        //---- Accessing a private method
        Method m=c.getDeclaredMethod("call",new Class[]{int.class});
        m.setAccessible(true);
        m.invoke(obj,7);

       //---- Accessing a private data member
       Field d = c.getDeclaredField("a");
       d.setAccessible(true);
       System.out.println(d.getInt(obj));
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-04T14:43:08.193

回答你的第三个问题：

3.  有没有办法阻止任何人访问私有构造函数、方法和数据成员？

回答：

是的，您可以限制访问（当有人试图访问您的私有构造函数/方法/数据时，您可以抛出异常）

请参考以下示例：

```
******JavaSingleton Class******

package server;

public class JavaSingleton {

  private static final JavaSingleton INSTANCE = new JavaSingleton();

  private JavaSingleton() {
    if (INSTANCE != null) {
      throw new IllegalStateException("Inside JavaSingleton(): JavaSingleton " +
                                                        "instance already created.");
    }
    System.out.println("Inside JavaSingleton(): Singleton instance is being created.");
  }

  public static final JavaSingleton getInstance() {
    return INSTANCE;
  }
}

***Listing 2: JavaSingleton client***

import server.JavaSingleton;
import java.lang.reflect.*;

public class TestSingleton {

  public static void main(String[] args) throws ReflectiveOperationException {
    System.out.println("Inside main(): Getting the singleton instance using getInstance()...");
    JavaSingleton s = JavaSingleton.getInstance();

    System.out.println("Inside main(): Trying to use reflection to get another instance...");
    Class<JavaSingleton> clazz = JavaSingleton.class;
    Constructor<JavaSingleton> cons = clazz.getDeclaredConstructor();
    cons.setAccessible(true);
    JavaSingleton s2 = cons.newInstance();
  }
}

Output:

C:\singleton>java TestSingleton
Inside main(): Getting the singleton instance using getInstance()...
Inside JavaSingleton(): Singleton instance is being created.
Inside main(): Trying to use reflection to get another instance...
Exception in thread "main" java.lang.reflect.InvocationTargetException
  at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
  at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
  at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
  at java.lang.reflect.Constructor.newInstance(Unknown Source)
  at TestSingleton.main(TestSingleton.java:13)
Caused by: java.lang.IllegalStateException: Inside JavaSingleton(): JavaSingleton instance already created.
  at server.JavaSingleton.<init>(JavaSingleton.java:7)
  ... 5 more 
```

此示例适用于单例类（检查构造函数），但您仍然可以为要阻止其他类访问的私有方法实现此逻辑。

在这种情况下，您还将声明一个静态实例并在私有方法中检查它的值，并在出现任何不需要的值时抛出错误。

# gtk - 我应该为 Linux 桌面面板使用哪些库？

> ID：11483652
> 
> 赞同：1
> 
> 时间：2012-07-14T12:15:23.450
> 
> 标签：gtk, x11, gnome, cairo, gtk3

我正在考虑为 Linux 制作一个面板，其中包括窗口列表、菜单、时钟等。我的两个要求是：

*   它应该适合 MATE（Gnome 2 fork）和可能的 Gnome 3 2D 模式。
*   它应该有流畅的动画（用于拖放窗口按钮重新排序，如 Chrome 中的选项卡）。

我应该使用哪些库？GTK+ / Cairo / Clutter / 别的什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T00:26:50.843

您可以开始检查`libgnome-panel`（可能重命名为`libmate-panel`）。gnome-panel 建立在此之上，并`libgnome-panel`提供构建小程序所需的内容（如窗口列表等）。

每个小程序都有自己的依赖项，例如，对于您将需要的窗口列表`libwcnk`，对于您可能需要的时钟`cairo`。对于具有平滑动画的面板，您可能需要混乱（即 OpenGL），但是，这可能不适合您正在寻找的 2D。

# java - 只有字母和只有数字正则表达式问题

> ID：11483654
> 
> 赞同：0
> 
> 时间：2012-07-14T12:15:31.250
> 
> 标签：java, regex

我在 Java 中有以下正则表达式：

```
private static final String ALPHA_REGEX = "[^A-Za-z]+$"; 
```

如果我输入说“a334234234”，验证将失败。但是，如果我输入“a3423423fsfsdf”验证成功...

以下正则表达式也是如此，它检查输入是否仅为数字：

```
private final static    Pattern NUMBER_ONLY_PATTERN = Pattern.compile("[^0-9 ]+$", Pattern.CASE_INSENSITIVE); 
```

如果我输入 4saasd 验证失败，但如果我输入 3dfsdf22 验证成功。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T12:19:33.650

`^`在`[]`mean `not`，但没有`[]`它意味着字符串的开头，这是你的问题

`^[a-zA-Z]+$`- 只有字母

`^\d+$`- 只有数字

# c# - 按钮内的图标？

> ID：11483655
> 
> 赞同：32
> 
> 时间：2012-07-14T12:15:32.987
> 
> 标签：c#

如何在按钮内添加如下屏幕截图中的图标？我似乎找不到该怎么做。

![http://i.stack.imgur.com/6HGcK.jpg](../Images/6148da4697823b6041e85af66566849b.png)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-14T12:43:47.203

在 WinForms 中使用`Button.Image`（[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.buttonbase.image.aspx)），如下所示：

```
private void SetMyButtonIcon()
 {
    // Assign an image to the button.
    button1.Image = Image.FromFile("C:\\Graphics\\My.ico");
    // Align the image and text on the button.
    button1.ImageAlign = ContentAlignment.MiddleRight;    
    button1.TextAlign = ContentAlignment.MiddleLeft;
 } 
```

您可以使用`Button.TextImageRelation`Property 设置[文本和图像](http://msdn.microsoft.com/en-us/library/s020taz2.aspx)相对于彼此的位置：

*   `Overlay`：图像和文本在控件上共享相同的空间。
*   `ImageBeforeText`：图像在控件文本之前水平显示。
*   `TextBeforeImage`：文本在控件图像之前水平显示。
*   `ImageAboveText`：图像垂直显示在控件文本的上方。
*   `TextAboveImage`：文本垂直显示在控件图像的上方。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-27T15:00:14.343

如果您将按钮放在表单上，​​您可以右键单击它并单击属性，然后转到“图像”并放入您想要的图像，它们转到底部并单击“TextImageRelation”并单击下拉菜单然后单击“ImageBeforeText”，您可以随意制作，但我个人最喜欢文字前的图像。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-14T12:21:04.480

尝试这个：

```
 <Button>
        <StackPanel Orientation="Horizontal">
            <Image Source="/Image/ok.png" />
            <TextBlock Text="Start Tasks" />
        </StackPanel>
    </Button> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-14T12:19:23.220

WPF（和 Silverlight）提供了一个名为`Image`. 顾名思义，它是一个可以在里面保存图像的容器。使用这样的控件来表示您想要的图标，然后`Button`通过它的`Content`属性将其放置在您的内部

像这儿：

```
<Button x:Name="btn_ControlRun">
    <StackPanel Orientation="Horizontal">
        <Image Stretch="Fill" Source="right.png"/>
        <Label Content="Start Tasks" />
    </StackPanel>
</Button> 
```

# android - 如何像 MyTracks（开源）一样将 kml 文件发送到 Google 地球？

> ID：11483657
> 
> 赞同：6
> 
> 时间：2012-07-14T12:15:44.450
> 
> 标签：android, android-intent, kml, google-earth

我不知道您是否看过令人惊叹的 Mytrack 更新，但它允许将 kml 文件发送到 Google 地球应用程序并在 Google 应用程序中显示（当然，如果已安装）。

![在此处输入图像描述](../Images/ab80e61b14f8e120744cbed301a5ea25.png)

源代码在那里：[http ://code.google.com/p/mytracks/source/browse/](http://code.google.com/p/mytracks/source/browse/)

但我找不到实现这一目标的方法。

我想我在这里找到了一些东西：[http ://code.google.com/r/jshih-mytracks3/source/browse/MyTracks/src/com/google/android/apps/mytracks/io/file/SaveActivity.java?spec =svn5178eb75934b7f0c4c23ec26b7d79a0787de18b8&r=5178eb75934b7f0c4c23ec26b7d79a0787de18b8](http://code.google.com/r/jshih-mytracks3/source/browse/MyTracks/src/com/google/android/apps/mytracks/io/file/SaveActivity.java?spec=svn5178eb75934b7f0c4c23ec26b7d79a0787de18b8&r=5178eb75934b7f0c4c23ec26b7d79a0787de18b8)

```
else if (playTrack) {
        Intent intent = new Intent()
            .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK)
            .putExtra(GOOGLE_EARTH_TOUR_FEATURE_ID, KmlTrackWriter.TOUR_FEATURE_ID)
            .setClassName(GOOGLE_EARTH_PACKAGE, GOOGLE_EARTH_CLASS)
            .setDataAndType(Uri.fromFile(new File(savedPath)), GOOGLE_EARTH_KML_MIME_TYPE);
        startActivity(intent); 
```

硬编码的方式给出了这个代码：

```
 Intent intent = new Intent()
            .addFlags(
                    Intent.FLAG_ACTIVITY_CLEAR_TOP
                            | Intent.FLAG_ACTIVITY_NEW_TASK)
            .putExtra("com.google.earth.EXTRA.tour_feature_id","tour")
            .setClassName("com.google.earth", "com.google.earth.EarthActivity")
            .setDataAndType(Uri.fromFile(new File("/sdcard/test.kml")),
                    "application/vnd.google-earth.kml+xml");
    startActivity(intent); 
```

但是上面的代码只是简单地显示了与这段代码结果相同的路径：

```
 Intent mapIntent = new Intent(Intent.ACTION_VIEW); 
    Uri uri1 = Uri.parse("file:///sdcard/test.kml"); 
    mapIntent.setData(uri1); 
    startActivity(Intent.createChooser(mapIntent, "Sample")); 
```

我的目标是使用“播放”按钮获得相同的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T00:03:22.320

您需要指定 KML 文件的 URI*和*KML MIME 类型，如下所示。

```
File file = new File(Environment.getExternalStorageDirectory(), "sample_tour.kml");
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(file), "application/vnd.google-earth.kml+xml");
intent.putExtra("com.google.earth.EXTRA.tour_feature_id", "my_track");
startActivity(intent); 
```

这目前没有记录，但我们正在寻求解决这个问题。

一定要使用而`Intent::setDataAndType`不是单独使用（它们各自覆盖另一个）。`Intent::setData``Intent::setType`

“my_track”是对您的地标 ID 的引用。Intent extra 会自动启动游览。

```
<Placemark id="my_track">
 <gx:Track>
  ...
 </gx:Track>
</Placemark> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T20:46:35.660

是否可以使用链接而不是磁盘中的 kml？像这样的东西：

`intent.setDataAndType(Uri.parse("http://sites.cyclingthealps.com/other/downloads/doc.kml"), "application/vnd.google-earth.kml+xml");`

谢谢

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-19T10:09:32.897

如果您的目标是 Android N，则不再允许发送 file:// 意图。使用[android.os.FileUriExposedException: file:///storage/emulated/0/test.txt 中的说明通过 Intent.getData() 暴露在应用之外](https://stackoverflow.com/questions/38200282/android-os-fileuriexposedexception-file-storage-emulated-0-test-txt-exposed)，并添加`Intent.FLAG_GRANT_READ_URI_PERMISSION`标志。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-03T04:12:26.217

```
File KML = new File("/sdcard/doc.kml");
Intent i = getPackageManager().getLaunchIntentForPackage("com.google.earth");
i.setDataAndType(Uri.fromFile(KML), "xml");
startActivity(i); 
```

来源：[http ://enladodelbien.blogspot.com/2015/06/kmlkmz-to-google-earth.html](http://enladodelbien.blogspot.com/2015/06/kmlkmz-to-google-earth.html)

# css - 对硒使用 CSS 选择器。当字段非常相似时过滤字段。见场景

> ID：11483658
> 
> 赞同：1
> 
> 时间：2012-07-14T12:15:47.917
> 
> 标签：css, selenium, css-selectors

以下 CSS 使用 firefinder 返回这两个字段。

```
tr[class="ui-widget-content footrow footrow-ltr"] td[aria-describedby*="Active_Customers"] 
```

回报：

```
<td aria-describedby="Grid_1201748220_Active_Customers" style="width: 150px;" role="gridcell">

<td aria-describedby="Grid_1201748220_New_Active_Customers" style="width: 150px;" role="gridcell"> 
```

正如人们所看到的，它们之间的区别只是（*New*）（第一个结果）。有没有办法，只需使用 CSS 定位器来获取 Active_Customers ONLY（不是新的）（第一个结果）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:18:28.693

除了排除其中包含“New”的那个之外似乎没有任何其他方法（不幸的是导致更长的选择器）：

```
tr[class="ui-widget-content footrow footrow-ltr"] td[aria-describedby*="Active_Customers"]:not([aria-describedby*="New_Active_Customers"]) 
```

# php - 简单的 HTML Dom - 使用 load_file 时出现致命错误

> ID：11483663
> 
> 赞同：8
> 
> 时间：2012-07-14T12:16:17.020
> 
> 标签：php, html-parsing, fatal-error, simple-html-dom

我正在尝试解析具有糟糕（相信我，它是）HTML 结构的 HTML 文件，并且由于这一点以及我缺乏知识，我无法编写自己的解析器。后来我尝试使用 Simple HTML Dom 解析器，因为很多人（在 SO 上也是如此）推荐它。

我需要 simple_html_dom.php，然后创建了对象。它们似乎有效，require() 函数返回“1”，而 var_dump()-ing 对象返回一个对象。

在此之后，我尝试按照手册中的方式加载 URL，但无论我尝试什么 URL，我都会遇到致命错误。错误如下：

```
Fatal error: Call to undefined function mb_detect_encoding() in 
             /home/fema/web/subdomain/devel/www_root/parser/
             simplehtmldom_1_5/simple_html_dom.php on line 988 
```

我检查了第 988 行的内容，如下所示：

```
// Have php try to detect the encoding from the text given to us.
        $charset = mb_detect_encoding($this->root->plaintext . "ascii", 
                   $encoding_list = array( "UTF-8", "CP1252" ) ); 
```

我知道这是关于字符编码的，但仅此而已。无论是在谷歌还是在 SO 上，我都没有找到任何关于此的信息。

我的整个代码是（占位符 URL）：

```
<?php

require('simplehtmldom_1_5/simple_html_dom.php');

// Create a DOM object
$dom = new simple_html_dom();

$dom->load_file('http://www.google.com/');

?> 
```

谁能告诉我该怎么做？或者在发生这种情况时提供某种建议。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T12:27:35.857

您的 PHP 构建缺少多字节字符串扩展。这种情况实际上很不寻常，除非您使用的是非常旧的 PHP 版本或使用不寻常的编译选项编译的版本，因为虽然默认情况下未启用多字节扩展，但它通常被认为是其中之一这些天来每个 PHP 构建或多或少都有的基本扩展。

如果您运行的是旧版本的 PHP，我强烈建议您升级，如果您有一个相当新的版本，请检查 phpinfo() 是否安装了多字节。如果您不这样做，那么您可能需要从源代码重新安装或重建 PHP。

如果已安装，`--enable-mbstring`则应在编译选项列表中。有关更多详细信息，请参阅多字节扩展的 PHP 手册，尤其是[安装章节](http://www.php.net/manual/en/mbstring.installation.php)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T17:08:52.210

我在使用 Amazon EC2 和 PHP 的标准安装时遇到了同样的问题。我做了以下（在[http://php.net/manual/en/mbstring.installation.php](http://php.net/manual/en/mbstring.installation.php)上找到）解决了这个问题：

```
百胜安装 php-mbstring
httpd -k 重启

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-14T09:44:39.713

删除 load_file() 方法中提供的 URL 字符串中的尾部正斜杠 (/) 并且它可以工作。
显然，简单 HTML DOM 库的 load_file() 方法存在将正斜杠附加到 URL 字符串末尾的问题。

# mysql - MySQL 是否缓存查询的先前部分？

> ID：11483664
> 
> 赞同：0
> 
> 时间：2012-07-14T12:16:29.737
> 
> 标签：mysql, caching, select

我有一个类似这样的查询：

```
SELECT t1, t2,
IF(MATCH(t2) AGAINST ('input*' IN BOOLEAN MODE), 10, 0) AS matches,
IF(t2 LIKE '%input%', 2, 0) AS similar
FROM tbl
WHERE t2 LIKE '%input%'
ORDER BY (matches + similar) DESC
LIMIT 5 
```

查询工作正常，但我关心的部分是 MySQL 是否检查 t2 是否为 LIKE '%input%' 两次，或者它是否缓存了第一个结果（这很酷！）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:27:15.203

对不起，它没有。

作为穷人的测试，请考虑：

```
delimiter //
create function qqq() 
returns int no sql 
begin 
  set @x:=@x+1; 
  return 17; 
end //
delimiter ;

set @x := 0;
select qqq(), qqq(), qqq() > 1, qqq() > 1 from dual;
+-------+-------+-----------+-----------+
| qqq() | qqq() | qqq() > 1 | qqq() > 1 |
+-------+-------+-----------+-----------+
|    17 |    17 |         1 |         1 |
+-------+-------+-----------+-----------+

select @x;
+------+
| @x   |
+------+
|    4 |
+------+ 
```

虽然有人可能会说这是一种特殊情况，但由于我们调用的是存储例程，而不是内置函数，所以目前没有区别。一切都重新评估。

这在未来可能会改变——没有什么可以严格*阻止*这种优化发生在众所周知的确定性函数上。但有时这可能很难被优化器诊断出来。

# jmeter - 增加 ThreadStackSize 以解决“jmeter.control.GenericController: StackOverflowError detected”错误

> ID：11483666
> 
> 赞同：1
> 
> 时间：2012-07-14T12:16:45.467
> 
> 标签：jmeter, load-testing, performance-testing

我在运行测试时收到此错误：“jmeter.control.GenericController: StackOverflowError detected”。我无法理解为什么我会收到此错误。

我在 JMeter 的论坛上阅读了一个类似的问题，有人建议将 ThreadStackSize 增加到 4096。我正在 Jmeter 的 GUI 模式下运行测试。我应该在哪里更改 ThreadStackSize？Jmeter 的 /bin 目录中是否有一些文件可以更改此属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:24:16.597

查看您的 JMETER_HOME/bin 目录，在那里找到`jmeter`文件（unix shell - 如果您正在使用任何 unix/linux）或`jmeter.bat`（windows bat-file - 如果您使用的是 windows 操作系统）。
在这两个中，您都可以找到如下字符串：

```
`HEAP="-Xms512m -Xmx512m"
NEW="-XX:NewSize=128m -XX:MaxNewSize=128m"
TENURING="-XX:MaxTenuringThreshold=2"
RMIGC="-Dsun.rmi.dgc.client.gcInterval=600000 -Dsun.rmi.dgc.server.gcInterval=600000"
PERM="-XX:PermSize=64m -XX:MaxPermSize=128m"
DUMP="-XX:+HeapDumpOnOutOfMemoryError"
SERVER="-server"
**ARGS="$SERVER $DUMP $HEAP $NEW $SURVIVOR $TENURING $EVACUATION $RMIGC $PERM"**
java $ARGS $JVM_ARGS -jar `dirname $0`/ApacheJMeter.jar "$@"` 
```

`定义 jmeter 的 JVM 参数的值。

只需将**-XX:ThreadStackSize=4096**添加到任何这些变量中，例如

```
`ARGS="$SERVER $DUMP $HEAP $NEW $SURVIVOR $TENURING $EVACUATION $RMIGC $PERM **-XX:ThreadStackSize=4096**"
java $ARGS $JVM_ARGS -jar `dirname $0`/ApacheJMeter.jar "$@"` 
```

`甚至 重新启动您的 jmeter 实例。 ````
java $ARGS $JVM_ARGS -XX:ThreadStackSize=4096 -jar dirname $0/ApacheJMeter.jar "$@"

``````

# jquery - 如何限制html中的默认工具提示宽度

> ID：11483671
> 
> 赞同：2
> 
> 时间：2012-07-14T12:17:51.653
> 
> 标签：jquery, css, html

我正在使用`<a>`标签默认标题属性来显示链接的工具提示。但我的问题是如何限制工具提示的宽度。悬停链接时，此标题标签会离开窗口。

我为此问题提供的示例代码[http://jsfiddle.net/cj74C/](http://jsfiddle.net/cj74C/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:37:12.477

据我所知，没有标准的方法可以做到这一点。您不能从浏览器格式化 alt/title 弹出窗口。

谷歌说对于 IE 你可以这样说：

```
&#13; 
```

作为文本中的回车。

如果您想要灵活性 - 您可能必须放弃浏览器标准行为并使用 jQuery 插件，例如

[http://onehackoranother.com/projects/jquery/tipsy/](http://onehackoranother.com/projects/jquery/tipsy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:36:32.030

从标题中获取值后，您可以删除此属性。

```
$(this).removeAttr('title'); 
```

或者您可以存储标题，然后将其删除：

```
$(this).data("title", $(this).attr("title")).removeAttr("title"); 
```

# unix - 查找连接到服务器的所有 IP

> ID：11483673
> 
> 赞同：0
> 
> 时间：2012-07-14T12:18:08.087
> 
> 标签：unix, ip, centos

我买了一个专用服务器，他们给了我 5 个公共 IP。但我不知道如何使用 unix 命令获取连接到我的服务器的所有 IP。请帮帮我。我的服务器使用 CentOS 64 位运行。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:25:01.740

查看 `ip`or`ifconfig`命令的手册页，

# python - GAE - Flask - OSError：[Errno 13] 路径不可访问：

> ID：11483675
> 
> 赞同：2
> 
> 时间：2012-07-14T12:18:29.750
> 
> 标签：python, google-app-engine, flask

我从 2 天以来一直在尝试让烧瓶运行，但是对于所有模板，我都会收到相同的错误消息

我正在使用 Windows 7 64 位

[https://github.com/kamalgill/flask-appengine-template/](https://github.com/kamalgill/flask-appengine-template/)

OOSError：[Errno 13] 路径不可访问：'c:\python27\dlls'

来自 pkq_resources，功能：find_on_path

所以我想这可能是一个 Windows 的东西，所以我将它部署到我的 GAE 应用程序并且它工作。

[http://kanta3d.appspot.com](http://kanta3d.appspot.com)

但我不想每次都部署它，这会破坏工作流程。

我用谷歌搜索了这个错误，但找不到修复方法。

我做了一些调查，pkq_resources 中的这个函数抛出了错误

```
for entry in os.listdir(path_item): # this throws the error 
```

.

```
def find_on_path(importer, path_item, only=False):
    """Yield distributions accessible on a sys.path directory"""
    path_item = _normalize_cached(path_item)

    if os.path.isdir(path_item) and os.access(path_item, os.R_OK):
        if path_item.lower().endswith('.egg'):
            # unpacked egg
            yield Distribution.from_filename(
                path_item, metadata=PathMetadata(
                    path_item, os.path.join(path_item,'EGG-INFO')
                )
            )
        else:
            # scan for .egg and .egg-info in directory
            for entry in os.listdir(path_item):
                lower = entry.lower()
                if lower.endswith('.egg-info'):
                    fullpath = os.path.join(path_item, entry)
                    if os.path.isdir(fullpath):
                        # egg-info directory, allow getting metadata
                        metadata = PathMetadata(path_item, fullpath)
                    else:
                        metadata = FileMetadata(fullpath)
                    yield Distribution.from_location(
                        path_item,entry,metadata,precedence=DEVELOP_DIST
                    )
                elif not only and lower.endswith('.egg'):
                    for dist in find_distributions(os.path.join(path_item, entry)):
                        yield dist
                elif not only and lower.endswith('.egg-link'):
                    for line in open(os.path.join(path_item, entry)):
                        if not line.strip(): continue
                        for item in find_distributions(os.path.join(path_item,line.rstrip())):
                            yield item
                        break 
```

完整来源：

[https://github.com/kamalgill/flask-appengine-template/blob/master/src/pkg_resources.py](https://github.com/kamalgill/flask-appengine-template/blob/master/src/pkg_resources.py)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-04-02T15:44:33.150

我认为获得相关文件夹的所有权应该可行。我在 Windows 10 上遇到了同样的问题，我必须在 powershell 上这样做才能克服这个问题。

.\takeown.exe /f "C:\users\" /r /dy

# javascript - 在单击 jquery 事件中找不到变量

> ID：11483689
> 
> 赞同：0
> 
> 时间：2012-07-14T12:20:10.420
> 
> 标签：javascript, jquery, events, variables, click

我有一些单选按钮的列表，我在单击时获取选中输入的值，将其存储在变量中，稍后我想在单击另一个元素（例如 div）时访问该变量。除了在第二次点击事件中无法识别变量外，一切正常。也许是一个可能的变量范围错误？

```
 <ul><li><a href="#">Line</a><input class="checkTool" type="radio" name="drawTool"     value="line"></input></li></ul>
            <ul><li><a href="#">Rect</a><input class="checkTool" type="radio" name="drawTool" value="rectangle"></input></li></ul>
            <ul><li><a href="#">Circ</a><input class="checkTool" type="radio" name="drawTool" value="circle"></input></li></ul> 
```

​</p>

```
 $("input:radio[name=drawTool]").click(function() {
                    var currTool = $(this).val();
 });

$('.space').click(function(){

$(this).html(currTool)

}) 
```

​<a href="http://jsfiddle.net/menislici/cbfhu/3/" rel="nofollow">JSFiddle

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T12:27:23.947

更好的是：您可以在实际需要时通过查找*选中*的单选按钮来检索当前选择的工具。

```
$('.space').click(function(){
    var currTool = $("input:radio[name=drawTool]:checked").val();
    $(this).html(currTool);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T12:23:07.560

如果您想以不同的方法访问，请将值保存在方法外部声明的变量中。使其具有比方法更广的范围。它也可以在方法之外访问。

```
$(function(){

   var currTool="";
   $("input:radio[name=drawTool]").click(function() {
      currTool= $(this).val();
   });

   $('.space').click(function(){
      $(this).html(currTool)
   })

}); 
```

# css - 在 CSS 中为按钮的上半部分创建圆角

> ID：11483708
> 
> 赞同：43
> 
> 时间：2012-07-14T12:23:02.170
> 
> 标签：css

我只想为按钮的上半部分制作圆角。

`border-radius`我知道如何使用和为所有侧面制作圆角`-webkit-border-radius`。

但只喜欢上半部分有角。

我需要一些关于如何在 CSS 中执行此操作的指导。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-14T12:26:52.177

您可以使用以下样式规则：

```
border-top-left-radius
border-top-right-radius 
```

注意：该`border-radius`规则在没有`-webkit-`位的情况下有效。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-07-17T01:56:20.213

当我想绕过特定的角落时，我使用下面的代码

```
border-radius: 10px     10px      0           0;
            // top-left top-right bottom-right bottom-left. 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-14T12:27:42.957

这是我喜欢使用的模式：

**CSS**

```
.round-corners-5px{
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
}
.round-corners-10px{
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
}
.unround-top-corners{
    -webkit-border-top-left-radius: 0px;
    -webkit-border-top-right-radius: 0px;
    -moz-border-radius-topleft: 0px;
    -moz-border-radius-topright: 0px;
    border-top-left-radius: 0px;
    border-top-right-radius: 0px;
}
.unround-bottom-corners{
    -webkit-border-bottom-left-radius: 0px;
    -webkit-border-bottom-right-radius: 0px;
    -moz-border-radius-bottomleft: 0px;
    -moz-border-radius-bottomright: 0px;
    border-bottom-left-radius: 0px;
    border-bottom-right-radius: 0px;
} 
```

**HTML**

```
<button class="round-corners-5px unround-bottom-corners" style="background-color: white;"></button> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-14T12:26:55.320

为此，border-radius css 标记有特定的变体：

```
border-top-left-radius:2em; 
border-top-right-radius:2em; 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-07-14T12:46:56.683

如果你只想圆某些角落，这是它的代码：

```
border-radius:5px 5px 5px 5px; 
```

第一个值是左上角，第二个是右上角，第三个是左下角，第四个是右下角。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-12-08T06:42:53.757

如果您使用 sass scss，那么您可以编写一次，然后将其作为简单的代码行重用，如下所示：

在你的 sass 或 scss 文件中，像这样定义 mixin：

```
@mixin rounded($amount: "10px",$position: null) {
  @if $position != null {
    @if $position == "top" or $position == "bottom" {
      //top or bottom
      -webkit-border-#{$position}-left-radius: $amount;
      -moz-border-#{$position}-left-radius: $amount;
      border-#{$position}-left-radius: $amount;

      -webkit-border-#{$position}-right-radius: $amount;
      -moz-border-#{$position}-right-radius: $amount;
      border-#{$position}-right-radius: $amount;

    } @else {
      // top-left or top-right or bottom-left or bottom-right
      -webkit-border-#{$position}-radius: $amount;
      -moz-border-#{$position}-radius: $amount;
      border-#{$position}-radius: $amount;      
    }
  } @else {
    // ALL IF EMPTY
    -webkit-border-radius: $amount;
    -moz-border-radius: $amount;
    border-radius: $amount; 
  }

} 
```

然后在 scss 文件中，您可以像这样使用 mixin：

```
 @include rounded(); /*as default 10px on all corners*/
  @include rounded(15px); /*all corners*/ 

  @include rounded(15px, top); /*all top corners*/ 
  @include rounded(15px, bottom); /* all bottom corners*/ 

  @include rounded(15px, top-right); /*this corner only*/ 
  @include rounded(15px, top-left); /*this corner only*/ 
  @include rounded(15px, bottom-right); /*this corner only*/ 
  @include rounded(15px, bottom-left); /*this corner only*/ 
```

此 .scss 代码将生成此 .css 代码：

```
 /*  as default 10px on all corners */
  -webkit-border-radius: "10px";
  -moz-border-radius: "10px";
  border-radius: "10px";

  /*  all corners  
  */
  -webkit-border-radius: 15px;
  -moz-border-radius: 15px;
  border-radius: 15px;

  /*  all top corners   
  */
  -webkit-border-top-left-radius: 15px;
  -moz-border-top-left-radius: 15px;
  border-top-left-radius: 15px;
  -webkit-border-top-right-radius: 15px;
  -moz-border-top-right-radius: 15px;
  border-top-right-radius: 15px;

  /*  all bottom corners   
  */
  -webkit-border-bottom-left-radius: 15px;
  -moz-border-bottom-left-radius: 15px;
  border-bottom-left-radius: 15px;
  -webkit-border-bottom-right-radius: 15px;
  -moz-border-bottom-right-radius: 15px;
  border-bottom-right-radius: 15px;

  /*  top-right corner only  
  */
  -webkit-border-top-right-radius: 15px;
  -moz-border-top-right-radius: 15px;
  border-top-right-radius: 15px;

  /*  top-left corner only  
  */
  -webkit-border-top-left-radius: 15px;
  -moz-border-top-left-radius: 15px;
  border-top-left-radius: 15px;

  /*  bottom-right corner only  
  */
  -webkit-border-bottom-right-radius: 15px;
  -moz-border-bottom-right-radius: 15px;
  border-bottom-right-radius: 15px;

  /*  bottom-left corner only   
  */
  -webkit-border-bottom-left-radius: 15px;
  -moz-border-bottom-left-radius: 15px;
  border-bottom-left-radius: 15px; } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-28T11:43:54.113

[这](http://www.css3.info/preview/rounded-border/)有助于理解它是如何工作的，我这样做是为了制作左方圆角和右圆角：

```
.btn-circle.btn-lg {
        width: 170px;
        height: 47px;
        padding: 10px 16px;
        font-size: 17px;
        line-height: 1.33;
        /*border-radius: 25px;*/ //use this for both side rounded corner side
        border-radius: 0px 50px 50px 0px / 50px 50px 50px 50px;
    } 
```

[本](http://bootsnipp.com/snippets/featured/circle-button)指南帮助我在 twitter bootstrap 中制作圆形按钮

# c++ - 相同的请求不同的响应

> ID：11483709
> 
> 赞同：0
> 
> 时间：2012-07-14T12:23:04.053
> 
> 标签：c++, visual-c++

我的问题是两种不同的反应。

我的部分代码发送请求。

```
boost::asio::ip::tcp::iostream stream;
stream.expires_from_now(boost::posix_time::seconds(60));
stream.connect("www.mail.ru","http");
stream << "GET /cgi-bin/msglist HTTP/1.1\r\n";
stream << "Host: e.mail.ru\r\n";
stream << "Connection: keep-alive\r\n";
stream << "User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11\r\n";
stream << "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n";
stream << "Referer: http://mail.ru/ \r\n";
stream << "Accept-Encoding: gzip,deflate,sdch\r\n";
stream << "Accept-Language: en-US,en;q=0.8\r\n";
stream << "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3\r\n";
stream << "Cookie: Cookie here \r\n\r\n";

Such a response from the server I get from the code

HTTP/1.1 302 OK

Date: Fri, 13 Jul 2012 19:00:06 GMT

Server: Apache/1.3.27 (Unix) mru_xml/0.471 gorgona/2.1 mod_jk/1.2.4 mod_ruby/1.0.7 Ruby/1.6.8 mod_mrim/0.17

Connection: close

Location: http://e.mail.ru/cgi-bin/msglist

Content-Length: 0

Content-Type: text/plain 
```

但是当我从我的浏览器发出相同的请求时，我得到了相同的标题

这个回应

```
//HTTP/1.1 200 OK
//Server: nginx/0.7.62
//Date: Fri, 13 Jul 2012 18:50:46 GMT
///Content-Type: text/html; charset=utf-8
//Connection: close
//P3P: CP="NON CUR OUR IND UNI INT"
//Cache-Control: no-cache,no-store,must-revalidate
//Pragma: no-cache
//Expires: Thu, 14 Jul 2011 18:50:46 GMT
//Last-Modified: Fri, 13 Jul 2012 22:50:46 GMT
//X-Host: f306.mail.ru
//Content-Length: 461042 
```

那么我的代码有什么问题？（我需要从我的代码中获取响应 200）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:25:34.203

找到 302，在 location 有重定向链接。[http://en.wikipedia.org/wiki/HTTP_302](http://en.wikipedia.org/wiki/HTTP_302) 您应该从位置获取 url 并对这个 url 发出其他请求。

# mysql - 无法在mysql中创建触发器

> ID：11483710
> 
> 赞同：0
> 
> 时间：2012-07-14T12:23:05.947
> 
> 标签：mysql, triggers

嗨，我有像这样的表结构

```
CREATE TABLE IF NOT EXISTS `history` (
  `order_product_id` varchar(20) NOT NULL,
  `Details` text NOT NULL,
  PRIMARY KEY (`order_product_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
CREATE TABLE IF NOT EXISTS `order_product` (
  `order_product_id` varchar(64) NOT NULL,
  `porder_status` int(11) NOT NULL,
  PRIMARY KEY (`order_product_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
INSERT INTO `order_product` (`order_product_id`, `porder_status`) VALUES
('1339789127O532877', 11),
('1339789127O532933', 2),
('1339868495O010300', 2),
('1339868495O010342', 0),
('1339869923O564839', 0); 
```

现在我想编写一个触发器，它会在更新 order_product.porder_status 的值时触发，**并将****order_product.porder_status**值插入/更新 到历史表中

```
DELIMITER $$ 
CREATE TRIGGER addtohistory 
AFTER UPDATE ON order_product 
FOR EACH ROW 
BEGIN 
INSERT INTO history (order_product_id,Details)
  values 
    (NEW.order_product_id,CONCAT_WS(':',NEW.porder_status,CURRENT_TIMESTAMP)) 
  ON DUPLICATE KEY UPDATE 
  Details = 
    CONCAT_WS(',',Details,CONCAT_WS(':',NEW.porder_status,CURRENT_TIMESTAMP));
END;$$ 
```

当我创建触发器时，它说查询已成功执行，执行`SHOW triggers`结果时没有任何结果，因此得出的结论是数据库中不存在触发器。我不知道我在哪里犯错。请帮我找出错误。我在 MySQL Server 5.5 中使用 innodb 引擎。

提前致谢。

知道了。

```
DROP TRIGGER IF EXISTS `addtohistory`;
DELIMITER $$
CREATE TRIGGER `addtohistory` AFTER UPDATE ON `order_product`
 FOR EACH ROW BEGIN
    INSERT INTO history (order_product_id,Details) values (NEW.order_product_id,CONCAT_WS(':',NEW.porder_status,CURRENT_TIMESTAMP)) ON DUPLICATE KEY UPDATE Details = CONCAT_WS(',',Details,CONCAT_WS(':',NEW.porder_status,CURRENT_TIMESTAMP));
  END
$$
DELIMITER ; 
```

我不明白，但我执行了上面的表达式并且它有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T12:34:58.087

感谢您提供完整的架构代码。

你说“数据库中不存在触发器”是什么意思？我跟着你的代码，然后发出：

```
SHOW TRIGGERS \G
*************************** 1\. row ***************************
             Trigger: addtohistory
               Event: UPDATE
               Table: order_product
           Statement: BEGIN INSERT INTO history (order_product_id,Details) values (NEW.order_product_id,CONCAT_WS(':',NEW.porder_status,CURRENT_TIMESTAMP)) ON DUPLICATE KEY UPDATE Details=CONCAT_WS(',',Details,CONCAT_WS(':',NEW.porder_status,CURRENT_TIMESTAMP));END
              Timing: AFTER
             Created: NULL
            sql_mode: 
             Definer: root@localhost
character_set_client: latin1
collation_connection: latin1_swedish_ci
  Database Collation: latin1_swedish_ci 
```

所以触发器似乎在那里。

此外，它似乎正在工作：

```
UPDATE order_product SET porder_status=123 WHERE order_product_id='1339869923O564839';
Query OK, 1 row affected (0.08 sec)
Rows matched: 1  Changed: 1  Warnings: 0

SELECT * FROM history;
+-------------------+-------------------------+
| order_product_id  | Details                 |
+-------------------+-------------------------+
| 1339869923O564839 | 123:2012-07-14 15:33:05 |
+-------------------+-------------------------+ 
```

所以，一切似乎都很好！您究竟发出了哪些不起作用的查询？

# jquery - 将鼠标悬停在子菜单上时停止滑动子菜单向上滑动

> ID：11483713
> 
> 赞同：2
> 
> 时间：2012-07-14T12:23:30.167
> 
> 标签：jquery, navigation, slidedown, slideup

我有以下脚本来处理向下滑动子菜单：

```
$('#nav li #bottom').hover(function() {
    $(this).closest('#nav li').find('#sub_nav').slideDown("slow");
},
function() {
    $(this).closest('#nav li').find('#sub_nav').slideUp("slow");
}); 
```

脚本以这种方式编写，因此只有当用户将鼠标悬停在导航列表项中的一个 div 上时才会触发向下滑动，即 #bottom。

我遇到的麻烦是，虽然向下滑动工作正常，但当用户将鼠标悬停在子菜单上时菜单会向上滑动，当然，我不希望子菜单向上滑动，直到鼠标/光标离开`#nav li #bottom`或`#sub_nav`.

我在[这里](http://jsfiddle.net/nickharambee/uVbJp/)创建了一个 jsfiddle，以便您可以看到正在运行的菜单。

**NAV 项目结构的屏幕截图**

![在此处输入图像描述](../Images/2298c6e7c9393063053ae5764e560440.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:32:42.167

您可以包装`#sub_nav`by `div#wrapper`，这种方式`sub_menu`是底部的一部分：

```
<div id="bottom">
    <a href="#">Menu Item 1</a>
    <ul id="sub_nav">
      <li><a href="#">Item 1</a></li>
      <li><a href="#">Item 2</a></li>
      <li><a href="#">Item 3</a></li>
      <li><a href="#">Item 4</a></li>
    </ul>
</div> 
```

你也可以使用`stop()`方法：

```
$('#nav li #bottom').hover(function() {
    $(this).find('#sub_nav').stop().slideDown("slow");
},
function() {
    $(this).find('#sub_nav').stop().slideUp("slow");
}); 
```

[演示](http://jsfiddle.net/uVbJp/3/)

# heroku - 耙中止！ActiveAdmin:Module 的未定义方法“设置”

> ID：11483714
> 
> 赞同：0
> 
> 时间：2012-07-14T12:23:34.390
> 
> 标签：heroku, ruby-on-rails-3.2, activeadmin

我已经在我的开发机器上安装了活动管理员，它工作正常。但是当我运行`heroku run rake db:migrate`它给我以下错误

```
rake aborted! undefined method `setup' for ActiveAdmin:Module 
```

这是我的宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.6'

gem 'pg'
gem 'haml'
gem 'haml-rails'
gem 'sorcery'#, "~> 0.7.12"
gem 'jquery-rails'
gem 'localeapp'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem "activeadmin", :git => "git://github.com/gregbell/active_admin.git"
  gem 'sass-rails'#,   '~> 3.2.5'
  gem 'coffee-rails'#, '~> 3.2.2'
  gem 'twitter-bootstrap-rails'
  gem 'uglifier'
end

group :production do
  gem 'thin'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T13:20:55.050

作为记录，我想尝试 activeadmin-cms 0.1.0 并且我遇到了同样的问题。

gem activeadmin-cms 与activeadmin 0.6.0 不兼容（我没有测试过其他版本的activeadmin）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:34:06.523

```
 gem "activeadmin", :git => "git://github.com/gregbell/active_admin.git" 
```

不要在任何组下声明活动管理员。至少它不会在生产环境中工作。

# mysql - PhpMyAdmin 通过创建触发器冻结

> ID：11483722
> 
> 赞同：0
> 
> 时间：2012-07-14T12:25:05.093
> 
> 标签：mysql, sql, phpmyadmin

我尝试从 PhpMyAdmin 的 SQL 控制台创建触发器，但导航器无限加载

```
DELIMITER |
CREATE TRIGGER before_insert_history BEFORE INSERT
ON history FOR EACH ROW
BEGIN
INSERT INTO newsfeed(user_ID, date_action, action, pg_ID, rk_ID, vote) 
VALUES (NEW.user_ID, NOW(), "vote", NEW.page_ID, NEW.ranking_ID, SELECT IF(NEW.liked='1','1','-1') AS vote );
END |
DELIMITER ; 
```

一段时间后，我出现此错误：致命错误：第 259 行的 C:\wamp\apps\phpmyadmin3.2.0.1\libraries\import\sql.php 中的最大执行时间超过 300 秒

也许这是一个分隔符问题，但我选择了“;” 在控制台底部的分隔符字段中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:32:36.313

`delimiter`是 MySQL 客户端命令，而不是 SQL。我相信您需要`|`从 PHPMyAdmin 的 SQL 选项卡上的下拉框中选择作为分隔符，然后使用您在此处发布的相同代码而不使用`delimiter`命令。

我只是在命令中尝试了一个简单的语句`delimiter`，虽然第一个`delimiter`命令似乎没有做太多，但第二个命令导致它挂起。在我的情况下，删除它解决了它。

```
CREATE TRIGGER before_insert_history BEFORE INSERT
ON history FOR EACH ROW
BEGIN
INSERT INTO newsfeed(user_ID, date_action, action, pg_ID, rk_ID, vote) 
VALUES (NEW.user_ID, NOW(), "vote", NEW.page_ID, NEW.ranking_ID, SELECT IF(NEW.liked='1','1','-1') AS vote );
END | 
```

# c++ - 在初始化对象上调用虚拟方法的段错误

> ID：11483723
> 
> 赞同：3
> 
> 时间：2012-07-14T12:25:18.950
> 
> 标签：c++, pointers, segmentation-fault

我遇到了一个我不明白的段错误。我正在使用 Wt 库并用信号做一些花哨的事情（我只提到它是因为它使我能够尝试调试它）。

我从一个向量中获取一个指向我的一个小部件的指针，并试图在它指向的对象上调用一个方法。Gdb 显示指针解析，如果我检查它指向的对象，它正是我需要修改的对象。在这种情况下，小部件正在向自己广播，因此它同时注册为广播者和侦听器；因此，我还能够验证“广播”指针和“侦听器”指针访问的是同一个对象。他们是这样！

但是，即使我可以看到该对象存在，并且已初始化，并且实际上是正确的对象，但当我尝试调用该对象的方法时，我会立即收到 seg 错误。我尝试了几种不同的方法（包括一些不修改对象的布尔返回）。我再次尝试通过广播器指针和侦听器指针调用它们，只是为了尝试调试。

调试器甚至不进入对象；尝试调用方法时会立即发生段错误。

代码！

```
/* listeners is a vector of pointers to widgets to whom the broadcasting widget
 * is trying to signal.
 */
unsigned int num_listeners = listeners.size();
for (int w = 0; w < num_listeners; w++)
{
    // Moldable is an abstraction of another widget type
    Moldable* widget = listeners.at(w);

    /* Because in this case, the broadcaster and the listener are one in the same, 
     * these two point to the same location in memory; this part works. I know, therefore,
     * that the object has been instantiated, exists, and is happy, or we wouldn't
     * have gotten to this point to begin with. I can also examine the fields with gdb
     * and can verify that all of this is correct.
     */
    Moldable* broadcaster_debug = broadcast->getBroadcaster();

    /* setStyle is a method I created, and have tested in other instances and it
     * works just fine; I've also used native Wt methods for testing this problem and
     * they are also met with segfaults. 
     */
    widget->setStyle(new_style); // segfault goes here!
} 
```

自从研究将指针存储在向量中并不是最好的想法以来，我已经阅读过，我应该研究 boost::shared_ptr。可能是这样，我会调查它，但它没有解释为什么在已知存在的对象上调用方法会导致段错误。我想了解为什么会这样。

感谢您的任何帮助。

编辑：我已经创建了一个详细的矢量操作要点，因为它的代码比帖子中舒适的要多。 [https://gist.github.com/3111137](https://gist.github.com/3111137)

我没有展示创建小部件的代码，因为它是一种递归算法，为了做到这一点，我必须展示用于创建小部件的整个类决策树。可以说正在创建小部件；在浏览器中查看应用程序时，我可以在页面上看到它们。在我开始使用我喜欢的信号之前，一切都很好。

Moar 编辑：当我查看指令步进模式下的反汇编时，我可以看到就在发生段错误之前，发生了以下操作，其中第一个参数列为'void'。诚然，令我懊恼的是，我对大会一无所知，但这似乎很重要。谁能解释这条指令的含义以及它是否可能是我陷入困境的原因？

```
 add $0x378,%rax //$0x378 is listed as 'void' 
```

另一个编辑：根据某人的建议，我创建了一个非虚拟方法，我能够在段错误之前成功调用它，这意味着该对象实际上就在那里。如果我采用相同的方法并将其设为虚拟，则会发生段错误。那么，为什么只有虚方法会产生段错误呢？

我现在发现，如果在调用类中，我确保指定 Moldable::debug_test（和 Moldable::setStyle），则不会发生 seg 错误。但是，这似乎与 const 冒泡具有相似的效果——每个虚拟方法似乎都需要这个说明符。我以前从未见过这种行为。虽然我愿意纠正我的代码，如果它真的应该是这样的话，我不确定根本问题是否是别的。

到达那里！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:33:06.457

好吧，我找到了问题所在，尽管我很遗憾地说这是一个全新的错误，由于项目的性质，很难找到它。我会把答案放在这里，我也投票结束这个问题，因为它过于本地化。请随意做同样的事情。

该类`BroadcastMessage`有一个`__broadcaster`字段 ( `Moldable* __broadcaster;`)。在将指向广播器的指针传递给`BroadcastMessage`构造函数时，我忘记将入站指针分配给该字段，这意味着 __broadcaster 不是`Moldable`该类的完全实现的实例。

因此，一些方法实际上是有效的——那些可以内联的方法，或者我为测试创建的虚拟函数（例如，其中一个返回值 1），所以看起来那里有一个完整的对象实际上没有。直到调用一个更专门的方法来尝试访问对象的某些特定的动态属性，才发生段错误。

更重要的是，大部分广播消息的生命周期都在它的构造函数中，这意味着它的大部分目的都可以毫无问题地实现，因为广播器在构造函数的本地范围内是可用的。

但是，按照建议使用 Valgrind，我确实发现了一些其他潜在问题。我也几乎剥离并重新构建了整个项目。我丢弃了大量不必要的代码，作为副作用，它现在运行得更快了。

无论如何，感谢所有的帮助。抱歉，解决方案不是更多的发现。

# google-maps - 标记/标记自定义街景

> ID：11483730
> 
> 赞同：1
> 
> 时间：2012-07-14T12:26:11.913
> 
> 标签：google-maps, google-maps-api-3, google-street-view

我已经使用谷歌地图 api 为室内商店建筑创建了一个自定义街景应用程序，类似于漫画商店视图： http: [//www.bleedingcool.com/2011/11/02/google-street-view-enters-a -漫画店/](http://www.bleedingcool.com/2011/11/02/google-street-view-enters-a-comic-shop/)

但现在我的问题是我如何标记/标记货架上的每个产品，以在 div 内以小文本显示价格？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:28:54.083

看起来很酷，我正在做类似的事情。一种方法是在货架上的每个产品的街景地图上添加标记，然后检查点击。要在街景中添加标记，请查看：[https ://developers.google.com/maps/documentation/javascript/streetview#StreetViewOverlays](https://developers.google.com/maps/documentation/javascript/streetview#StreetViewOverlays)

要检查点击，请阅读以下内容： [https ://developers.google.com/maps/documentation/javascript/events](https://developers.google.com/maps/documentation/javascript/events)

因此，您可能想要做的是创建一个自定义标记图像，它只是围绕透明中心的一条虚线，以便用户知道单击或悬停在那里。

# opencv - 拜耳数据的无损编解码器

> ID：11483738
> 
> 赞同：4
> 
> 时间：2012-07-14T12:26:58.293
> 
> 标签：opencv, ffmpeg, gstreamer, codec, lossless-compression

我正在使用大量以 BG 拜耳模式拍摄的相机。

现在，每次我记录一些数据时，我都会以原始拜耳模式将其保存到磁盘的 avi 容器中。问题是，这确实会在一段时间后加起来。经过一年的研究，我有接近 4TB 的数据...

所以我正在寻找一种无损编解码器来压缩这些数据。我知道我可以使用 libx264（带 --qp 0）或 huffYUV、dirac 或 jpeg2000，但他们都假设你有 RGB 或 YUV 数据。将 Bayered 数据转换为 RGB，然后对其进行压缩很容易，但如果您首先将数据增加三倍，则有点违背了压缩的目的。这也意味着 debayering 引入的去马赛克人工制品也将在我的源数据中，这也不是太大。有一个可以直接处理拜耳数据的编解码器会很好。

更好的是，该解决方案将涉及 gstreamer（或 ffmpeg）已经支持的编解码器，因为那是我已经在使用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-21T10:22:00.580

一个相当晚的建议，可能对其他人有用..

它有助于将拜耳模式解交织成四个象限，然后将该图像视为灰度。子图像（例如左上角的所有红色像素）具有一半的空间分辨率，但它们的像素相关性更高。这会导致使用附近像素的预测器的残差更低，从而获得更好的压缩比。我已经看到这在 12 位原始相机数据上达到了 2-3 倍的无损压缩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T00:27:13.583

如果商业解决方案没问题，请查看[Cineform](http://cineform.com/)。我已经将他们的 sdk 用于自定义视频压缩器，效果很好，而且他们有一些很棒的工具来处理原始视频。

或者，如果您更喜欢开源路线，请查看[Elphel JP4](http://wiki.elphel.com/index.php?title=JP4)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T22:35:34.223

我从 Wikipedia 学到的关于 Bayer 模式的所有知识，但转换为 RGB 不是更多的是去隔行而不是三倍吗？红色和蓝色的分辨率不会下降 4 倍，绿色的分辨率不会下降 2 倍吗？如果是这样，像无损 jpeg 这样的无损图像压缩方案可能就是这样。

# c++ - QPropertyAnimation：立即跳转到动画结尾？

> ID：11483744
> 
> 赞同：1
> 
> 时间：2012-07-14T12:27:29.943
> 
> 标签：c++, qt, animation

我使用 QPropertyAnimation 为用户输入设置动画以在小部件中导航。也就是说，我用它来使用鼠标滚轮平滑缩放。

目前，当用户提供新输入（旋转鼠标滚轮）时，当前动画被取消并开始一个新动画，从我的缩放属性的当前值开始。

例如，如果放大操作将视图缩放 2 倍，我们可以想象以下场景：

```
 User input         |  Zoom before the animation  |  Animation's end value
----------------------+-----------------------------+--------------------------
   Mouse wheel up     |                      100 %  |                  200 %
   (wait)             |                             |
   Mouse wheel up     |                      200 %  |                  400 %
   (wait)             |                             |
   Mouse wheel up     |                      400 %  |                  800 % 
```

但是如果用户不等待动画完成：

```
 User input         |  Zoom before the animation  |  Animation's end value
----------------------+-----------------------------+--------------------------
   Mouse wheel up     |                      100 %  |                  200 %
   Mouse wheel up     |                      110 %  |                  220 %
   Mouse wheel up     |                      120 %  |                  240 % 
```

我想要的（同样，用户不会等待）：

```
 User input         |  Zoom before the animation  |  Animation's end value
----------------------+-----------------------------+--------------------------
   Mouse wheel up     |                      100 %  |                  200 %
   Mouse wheel up     |  immediately jump to 200 %  |                  400 %
   Mouse wheel up     |  immediately jump to 400 %  |                  800 % 
```

我讨厌在动画结束之前无法进行进一步用户输入的应用程序，因此我最讨厌流畅的动画。所以我想要的是：当用户给另一个用户输入并且当前有一个动画正在运行时，通过跳到这个动画的结尾来“跳过”这个动画。

最简单的解决方案是只使用前一个动画的结束值作为新动画的开始值，但我想抽象出当前执行的动画的“类型”；它不一定是缩放动画，也可以是滚动、平移等动画。

那么是否有可能在**不进一步了解动画的情况下**（我只有一个指向 a 的指针`QPropertyAnimation`）使其**立即跳转到结尾**？

目前，我的代码如下所示：

```
class View : ...
{ 
    // Property I want to animate using the mouse wheel
    Q_PROPERTY(qreal scale READ currentScale WRITE setScale)
    ...
private:
    // Pointer to the animation, which can also be another animation!
    QPropertyAnimation *viewAnimation;
} 
```

```
void View::wheelEvent(QWheelEvent *e)
{
    qreal scaleDelta = pow(1.002, e->delta());
    qreal newScale = currentScale() * scaleDelta;

    if(viewAnimation)
    {
        // --- CODE SHOULD BE INSERTED HERE ---
        // --- Jump to end of viewAnimation ---
        // --- rather than canceling it     ---
        cancelViewAnimation();
    }
    viewAnimation = new QPropertyAnimation(this, "scale", this);
    viewAnimation->setStartValue(currentScale());
    viewAnimation->setEndValue(newScale);
    viewAnimation->setDuration(100);
    connect(viewAnimation, SIGNAL(finished()), SLOT(cancelViewAnimation()));
    viewAnimation->start();
}

void View::cancelViewAnimation()
{
    if(viewAnimation)
    {
        viewAnimation->stop();
        viewAnimation->deleteLater();
        viewAnimation = NULL;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T12:41:03.503

我认为这会做到：

```
if(viewAnimation)
{
    // jump to end of animation, without any further knowledge of it:
    viewAnimation->targetObject()->setProperty(viewAnimation->propertyName(),
                                               viewAnimation->endValue());
    cancelViewAnimation();
} 
```

# java - 顺序搜索 10000 个随机数文件中的 1000 个键

> ID：11483753
> 
> 赞同：0
> 
> 时间：2012-07-14T12:29:22.320
> 
> 标签：java, arrays

我编写了一些代码，它将在 10000 个随机数的文件中连续搜索 1000 个键，并打印出 arr 找到的键。

这是下面的代码。当我运行它但我什么也没得到。我的错误在哪里？

```
public class SeqSample2 {

    public static void main(String[] args) {
        double[] a;
        double[] b;
        a = new double[10000];
        b = new double[1000];
        for (int i = 0; i < 1000; i++) {
            a[i] = (int) ((Math.random() * 10000));
        }
        for (int j = 0; j < 1000; j++) {
            b[j] = (int) ((Math.random() * 1000));
        }

        int lim = a.length - b.length;
        int i = 0;
        int j = 0;
        boolean found = false;
        for (i = 0; i < lim; i++) {

            if (b[0] == a[i]) {
                found = true;

                for (j = 0; j < b.length; j++) {
                    if (b[j] != a[i + j]) {
                        found = false;
                        break;
                    }
                }
                if (found) {
                    System.out.println(b[i]);
                } else {
                    System.out.println("Not found");
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T12:35:55.570

你为什么惊讶？

*   `b[0]`是 0 到 1,000 之间的随机数。
*   `a[i]`是 0 到 10,000 之间的随机数，`i < 1,000`0 是`i >= 1,000`.

如果你运行你的程序几次，你最终会得到一个输出，但大多数时候，`if (b[0] == a[i])`会是假的，程序将退出而不打印任何东西。

# java - xsd java类生成

> ID：11483757
> 
> 赞同：1
> 
> 时间：2012-07-14T12:30:08.053
> 
> 标签：java, xml, binding

今天我给某人发了一个 xsd 文件来为我生成 java 类。他对我说，在 XML 绑定过程中，没有从 Internet 下载任何内容。

我仍然无法相信，因为如果我打开 .xsd 文件，里面没有太多内容。例如：

```
 <xs:element name="Country">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="Code" type="xs:string" minOccurs="1" maxOccurs="1"/>
            <xs:element name="Name" type="xs:string" minOccurs="1" maxOccurs="1"/>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

正在生成一个名为 CountryDocument.java 的 java 类，代码长度为 179 行。这个过程是如何运作的？

我仍然相信在这个过程中使用了互联网，因为 xsd 文件中有 openAPI url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:40:22.677

有人可能正在使用 JAXB 或类似的框架：

> XML 绑定的 Java 体系结构 (JAXB) 允许 Java 开发人员将 Java 类映射到 XML 表示。JAXB 提供了两个主要特性：将 Java 对象编组为 XML 的能力和相反的能力，即将 XML 解编回 Java 对象。换句话说，JAXB 允许在内存中以任何 XML 格式存储和检索数据，而无需为程序的类结构实现一组特定的 XML 加载和保存例程。它类似于 .NET Framework 中的 xsd.exe 和 XmlSerializer。

来源：[https ://en.wikipedia.org/wiki/Java_Architecture_for_XML_Binding](https://en.wikipedia.org/wiki/Java_Architecture_for_XML_Binding)

# sorting - 对文本中的特定行进行排序

> ID：11483758
> 
> 赞同：2
> 
> 时间：2012-07-14T12:30:16.587
> 
> 标签：sorting, vim, emacs, vi, nano

我有给定的文字：

```
# Blub
Hello this is a blub text.

# Bla
This is the bla text.

# Abba
Another text. 
```

是否可以使用 对行进行排序`#`？所以生成的文本是：

```
# Abba
Another text.

# Bla
This the bla text.

# Blub
Hello this is a blub text. 
```

最好使用 vim 或 emacs。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T13:44:53.053

在 Emacs 中，

1.  `M-x``sort-regexp-fields`
2.  进入：`#[^#]*`
3.  进入：`\&`

第一个正则表达式分隔记录，第二个指定用于排序的键。

如果您可以自由选择标记字符并使用`*`而不是`#`，则可以改用 org-mode 的命令`org-sort-entries`，这样可以避免输入正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T13:37:07.667

您没有这样标记它，但我认为这`awk`是完成这项工作的最佳工具。使用`gawk`以下作品：

```
gawk RS='\n\n' '{ 
  gsub("\n$", "")
  gsub("\n", "@")
  print 
}' file_to_be_sorted | sort | sed -e 's/$/\n/' -e 's/@/\n/' 
```

### 解释

通过将记录分隔符 (RS) 设置为 '\n\n'`gawk`从每个块创建记录。每条记录都转换为一行，并带有`@`分隔符（`gsub("\n", "@")`），此时正常`sort`工作。`sed`然后用于重新创建块。`gsub("\n$", "")`修复了最后一条记录的空白问题。

注意：如果任何块包含`@`您需要选择不同的分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T12:58:37.770

就像是：

```
:sort! /^#.+\n.+\n$/ 
```

我不确定行块顺序。

# java - 通过观察者从线程使用列表中仅获取最新元素

> ID：11483764
> 
> 赞同：1
> 
> 时间：2012-07-14T12:31:15.317
> 
> 标签：java, multithreading, parallel-processing

这个问题与[我目前的实施](https://stackoverflow.com/questions/11483181/call-to-function-gets-stuck-but-monitor-seems-to-get-freed-how)遇到的问题有关。因此，我想知道是否有一种方法可以完全不同地实现它。

我有一个由多个线程更新的`java.util.concurrent` **列表。****列表**本身实现，然后我有另外`Observable`两个`Observers`在列表更改时得到通知。

现在`Observers`应该只加载**最新的值**（它们还没有），而不是列表可能包含的所有数千个值。

目前的概览是这样的：

```
public class Observer1 implements Observable {
}

public class Observer2 implements Observable {
}

public class MyList<T> extends Observable {
    private SomeJavaConcurrentList list; // (which one depends on your answer)

    public synchronized void addElement(T element) {
        list.put(element); // or list.add(element); depending on list above
        setChanged();
        notifyObservers();
    }
}

public class MyThread implements Runnable {
    public void run() {
        MyList list = MyList.getInstance();
        list.add("new element from thread " + this.getName());
    }
} 
```

我怎样才能确保每个观察者只得到它还没有看到的条目**呢**？

可能出现的问题：

*   我可以以某种方式删除上面的同步吗？当需要等待所有通知过程时，它可能会减慢程序的速度？但是`notifyObservers()`可能会被多次调用。
*   我不确定观察者在被调用时是否都具有相同的状态。有人可能会说：“哦，我现在不更新自己，但下一回合我会更新所有内容。返回”，另一个人会立即下载更改。因此他们有不同的文件。
*   有多个观察者，所以我不能从列表中删除现有元素（比如 with `LinkedBlockingQueue.take()`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:59:05.757

我有两个建议： 1\. 每个观察者都有一个成员，它保存加载到观察者的最后一个索引的索引，并且在通知观察者的代码中，您将返回在索引之后添加的元素。2.如果你有大量的观察者比添加更多，也许你应该使用读写锁而不是同步。

# android - 单击“+”按钮时，我需要添加一个带有相关按钮的 EditText 字段

> ID：11483766
> 
> 赞同：0
> 
> 时间：2012-07-14T12:31:19.630
> 
> 标签：android, layout, button, onclick, layout-inflater

可能我的问题的标题不是很清楚。我正在为大学项目开发​​我的第一个 Android 应用程序。我现在需要的是让我的用户可以输入一种“配料”，以便在数据库中查找食谱。这很简单。

我可能阅读了这个网站上所有类似的帖子，但我无法解决我的问题：现在我想给用户指定多个成分的可能性，以便我的第一个 EditText 字段下方应该有一个“+”按钮允许在第一个和按钮本身之间添加新的 EditText 字段。连同 EditText 字段，我需要一个“-”按钮，单击该按钮时，“隐藏”相关输入字段。

我希望描述清楚。

我现在拥有的是我的主要 XML 布局和第二个布局，带有 edittext 和“-”按钮...但我不明白如何在主要布局中推送/膨胀/显示此布局...

请你帮助我好吗？这是我要推送的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_below="@+id/ingredient"
    android:layout_height ="wrap_content"
     android:layout_width="fill_parent"
     android:visibility="gone"
     android:id="@+id/newLine1">

 <EditText 
    android:id="@+id/ingredient"
    android:layout_width="100dp"
    android:layout_height="50dp"
    android:inputType="text"
    android:hint="@string/hint_ingredient" />
<Button 
    android:id="@+id/remove"
    android:layout_width="50dp"
    android:layout_height="wrap_content"
    android:text="@string/remove"
    android:layout_toRightOf="@+id/ingredient"
        android:onClick="removeLine"
    />

     </RelativeLayout> 
```

这是主要布局：

```
 <?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@+id/main_linear">

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="0dip" 
android:scrollbars="horizontal"
android:id="@+id/scrollView"
android:layout_weight="1.0" android:fadingEdge="none">

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="300dp" android:layout_height="wrap_content" android:id="@+id/ingredients">

 <EditText 
    android:id="@+id/ingredient"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"

    android:inputType="text"
    android:hint="@string/hint_ingredient" />

</RelativeLayout>

</ScrollView>

  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:orientation="vertical" 
    android:layout_height ="wrap_content"
     android:layout_width="match_parent"
     android:id="@+id/buttons">

 <Button 
    android:id="@+id/add"
    android:layout_width="100dp"
    android:layout_height="wrap_content"
    android:text="@string/add"
    />

   <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
     android:layout_below="@+id/add"

        android:text="@string/search" 

        />
   </RelativeLayout>
   </LinearLayout> 
```

删除充气机添加的新线怎么样？

现在我这样解决了：

```
public void removeLine(View v)
    {
        View line = (View) v.getParent();
        line.setVisibility(View.GONE);
    } 
```

还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T10:59:35.853

在 onClickListener 到你的“+”按钮写这样的东西：

```
int et_counter=1;
LinearLayout ll = (LinearLayout) findViewById(R.id.ll);

EditText et = new EditText(RecipeActivity.this);
//assign them an ID with an int counter
//use this counter later to refer to the EditText
//to retrieve the values
et.setId(et_counter);

ll.addView(et); 
```

你可以像这样检索值：

```
for (n = 1; n <= et_counter; n++){
    et = (EditText) findViewById(n);
    String ingridient=et.getText().toString();
    //use the text somewhere
} 
```

同样，您可以为您的“-”按钮分配一个 onClick 侦听器，使用 et_counter 引用带有 ID 的 EditText 并使用删除它`et.setVisibility(View.GONE);`

您应该能够将其与您的逻辑一起使用。祝你好运 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T12:38:11.903

在“+”按钮的 onClickListener 中，您需要使用 LayoutInflater 将您的成分布局膨胀到视图中。然后使用 findViewById() 获取对您的成分 RelativeLayout 的引用并将新视图添加到其中。

确保为膨胀的新视图指定 LayoutParams。

您可能希望将成分更改为 LinearLayout。向其添加视图比相对布局更容易，因为您只需将视图添加到线性布局而不必担心它们的相对位置。

祝你好运。

# java - 无法将 HashMap 返回的对象转换为 Arraylist

> ID：11483772
> 
> 赞同：2
> 
> 时间：2012-07-14T12:32:19.783
> 
> 标签：java, casting

我在 Tomcat 服务器上将此代码作为 Java 应用程序运行。

```
if(levelMap.get(bssid_a) == null)
    continue;
ArrayList<String> levels_a = new ArrayList<String>();
levels_a = (ArrayList<String>)levelMap.get(bssid_a); 
```

其中levelMap是一个hashmap，定义为：

```
HashMap<String, ArrayList<String>> levelMap 
```

我收到此错误：

```
java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to java.util.ArrayList 
```

相同的代码在我的 Android 应用程序中运行，所以我不确定为什么会收到此错误。

原始函数（没有类型转换，但给了我同样的错误）：

```
 public EDistance[] getLocation(HashMap<String, ArrayList<String>> levelMap) {

        HashMap<String, CrossProduct> crossProductList_local = new HashMap<String, CrossProduct>();

        LinkedHashSet<String> localList = (LinkedHashSet<String>) globalList.clone();

        Iterator<String> cpItera = localList.iterator();
        long time1 = System.currentTimeMillis();
        // Iterator<String> levelIter = levelMap.keySet().iterator();
        // try {

        while (cpItera.hasNext()) {

            String ssids[] = cpItera.next().split(",");
            String bssid_a = ssids[0];

            if(levelMap.get(bssid_a) == null)
                continue;
            //ArrayList<String> levels_a = new ArrayList<String>();
            ArrayList<String> levels_a = levelMap.get(bssid_a);
            double meanA = mean(levels_a, sampleSize, defaultLevel);

            // Iterator<String> cpIterb = localList.iterator();
            //
            // while(cpIterb.hasNext())
            // {

            String bssid_b = ssids[1];
            // if(bssid_a.equals(bssid_b))
            // continue;
            if(levelMap.get(bssid_b) == null)
                continue;
            //ArrayList<String> levels_b = new ArrayList<String>();
            ArrayList<String> levels_b = levelMap.get(bssid_b);
            double meanB = mean(levels_b, sampleSize, defaultLevel);
............ 
```

这是堆栈跟踪：

```
SEVERE: Failed to invoke method distance in class com.fingerprint.core.Calculate: [Ljava.lang.Object; cannot be cast to java.util.ArrayList
org.apache.xmlrpc.common.XmlRpcInvocationException: Failed to invoke method distance in class com.fingerprint.core.Calculate: [Ljava.lang.Object; cannot be cast to java.util.ArrayList
    at org.apache.xmlrpc.server.ReflectiveXmlRpcHandler.invoke(ReflectiveXmlRpcHandler.java:129)
    at org.apache.xmlrpc.server.ReflectiveXmlRpcHandler.execute(ReflectiveXmlRpcHandler.java:106)
    at org.apache.xmlrpc.server.XmlRpcServerWorker.execute(XmlRpcServerWorker.java:46)
    at org.apache.xmlrpc.server.XmlRpcServer.execute(XmlRpcServer.java:86)
    at org.apache.xmlrpc.server.XmlRpcStreamServer.execute(XmlRpcStreamServer.java:200)
    at org.apache.xmlrpc.webserver.XmlRpcServletServer.execute(XmlRpcServletServer.java:112)
    at org.apache.xmlrpc.webserver.XmlRpcServlet.doPost(XmlRpcServlet.java:196)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to java.util.ArrayList
    at com.fingerprint.location.HyperbolicEuclideanDistance.getLocation(HyperbolicEuclideanDistance.java:235)
    at com.fingerprint.core.Calculate.distance(Calculate.java:30)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.xmlrpc.server.ReflectiveXmlRpcHandler.invoke(ReflectiveXmlRpcHandler.java:115)
    ... 24 more
Caused by:
java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to java.util.ArrayList
    at com.fingerprint.location.HyperbolicEuclideanDistance.getLocation(HyperbolicEuclideanDistance.java:235)
    at com.fingerprint.core.Calculate.distance(Calculate.java:30)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.xmlrpc.server.ReflectiveXmlRpcHandler.invoke(ReflectiveXmlRpcHandler.java:115)
    at org.apache.xmlrpc.server.ReflectiveXmlRpcHandler.execute(ReflectiveXmlRpcHandler.java:106)
    at org.apache.xmlrpc.server.XmlRpcServerWorker.execute(XmlRpcServerWorker.java:46)
    at org.apache.xmlrpc.server.XmlRpcServer.execute(XmlRpcServer.java:86)
    at org.apache.xmlrpc.server.XmlRpcStreamServer.execute(XmlRpcStreamServer.java:200)
    at org.apache.xmlrpc.webserver.XmlRpcServletServer.execute(XmlRpcServletServer.java:112)
    at org.apache.xmlrpc.webserver.XmlRpcServlet.doPost(XmlRpcServlet.java:196)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

调用 XMlRPC 方法的代码：

```
public String getLocationXMLRPC(HashMap<String, ArrayList<String>> levelMap, String mapFile) {

    try {
        XMLRPCClient client = new XMLRPCClient("http://172.28.184.222:8080/LocationService/xmlrpc");

        Object[] params = new Object[]{levelMap, mapFile};
        //EDistance retura[] = (EDistance[]) client.callEx("Calculate.distance", params);
        String result = (String) client.callEx("Calculate.distance", params);
        return result;

    } catch (XMLRPCException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return null;
} 
```

调用错误函数的 XMLRPC 方法：

```
public String distance(HashMap<String, ArrayList<String>> levelMap, String mapFile)
{
    if(dist == null){
        dist = new HyperbolicEuclideanDistance(mapFile, 3, -130,
                false, "fake.txt");
        System.out.println("New Class created!");
    }
    EDistance[] result =  dist.getLocation(levelMap);

    StringBuilder build = new StringBuilder();

    for (int j = 0; j < result.length; j++) {
        if (result[j] != null)
            build.append(j + ") " + result[j] + "\n");
    }
    return build.toString(); 

} 
```

调用服务器的代码：

```
public String getLocationXMLRPC(HashMap<String, ArrayList<String>> levelMap, String mapFile) {

    try {
        XMLRPCClient client = new XMLRPCClient("http://172.28.184.222:8080/LocationService/xmlrpc");

        String result = (String) client.call("Calculate.distance", levelMap, mapFile);
        return result;

    } catch (XMLRPCException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:34:30.980

根据[ws-xmlrpc XMLRPC Data-Types](http://ws.apache.org/xmlrpc/types.html) a`HashMap<String, ArrayList<String>>`不是直接支持的参数类型。

从您发布的异常堆栈跟踪中可以看到，`HashMap<String, Object>`它沿着线路连接到您的 XMLRPC 服务器。这很明显，因为服务器需要`distance`使用 Java 反射调用该方法。这样做，如果参数至少不是 HashMap，则会发生异常。相反，当从该映射中检索对象时，跟踪中的异常会发生。从 检索和分配元素时，在运行时会进行不可见的类型检查`HashMap<String, ArrayList<String>>`，并且该检查会失败，并出现异常。

因此，XMLRPC 库传递参数可能是一个编组问题。因此，`Map<String, List<String>>`根据上述文档应该是一个有效的参数类型，尝试将`distance`方法及其被调用者参数更改为该参数类型，然后重试。

如果这也失败了，请考虑以另一种更扁平和简单的结构传递参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:47:04.297

我自己也遇到了类似的问题。似乎 ws-xmlrpc 将另一个结构中的 List 转换为数组，即使函数参数被指定为 List。因此 Map[String,List[String]] 被转换为 Map[String,Object] ，其中 Object 是一个字符串数组。我通过将传入的列表作为数组处理来解决这个问题。在某些情况下，我使用 instanceof 来区分数组和列表。

# android - Android-GPS ACCURACY_HIGH Criteria 使我的应用程序崩溃

> ID：11483774
> 
> 赞同：1
> 
> 时间：2012-07-14T12:32:32.913
> 
> 标签：android, gps, locationmanager

我正在测试一个应用程序，它选择当前位置，并在一个小部件上进行筛选。我正在使用此功能，但是当我尝试将精度更改为 HIGH 时，一切都崩溃了！

```
 private void startListening(){
        AppLog.logString("Service.startListening()");

        final Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_FINE);
        criteria.setAltitudeRequired(false);
        criteria.setBearingRequired(false);
        criteria.setCostAllowed(true);
        criteria.setPowerRequirement(Criteria.POWER_LOW);

        final String bestProvider = manager.getBestProvider(criteria, true);

        if (bestProvider != null && bestProvider.length() > 0) {
            manager.requestLocationUpdates(bestProvider, 500, 10, listener);
        }
        else {
            final List<String> providers = manager.getProviders(true);

            for (final String provider : providers) {
                manager.requestLocationUpdates(provider, 500, 10, listener);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:26:27.040

Add this to your AndroidManigest.xml file:

```
 <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

# mysql - MySQL：许多表与 FK 到一张表 - 是或否？

> ID：11483779
> 
> 赞同：0
> 
> 时间：2012-07-14T12:33:28.220
> 
> 标签：mysql

我即将扩展另外 50 多个表的数据库模式（在 MySQL 中）。其中大约 15-20 个将引用该表`File`（wchich 将创建或上传的文件的数据存储在我的项目中）问题是，我应该使用什么程序：

*   保持原样
*   为每个表创建自己的`File`表

我问是因为，如果我选择第一个选项，在某些时候`File`会有大量的行，这会使 CRUD 操作（带有`where`分句）变慢（我想）。那么，你怎么看，最好的主意是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:37:57.063

`File`保留一个所有其他人都引用的中央表，除非对于存储在`File`. 换句话说，如果您在`File`表中为不同的关联类型存储不同的文件元数据集，您会发现有必要为不同的元数据类型提供不同的文件存储表。

但是，如果您存储的是同一组文件二进制数据、文件名、MIME 类型等，通常对于所有关联类型，它属于一个表。

如果表预计会变得非常大，请考虑对其存储进行[分区。](http://dev.mysql.com/doc/refman/5.1/en/partitioning.html)通过适当的索引，CRUD 操作可以在数百万行上执行。

# ruby-on-rails - gem模块的所有方法：设计显示未定义的方法

> ID：11483782
> 
> 赞同：2
> 
> 时间：2012-07-14T12:34:15.113
> 
> 标签：ruby-on-rails, devise

我安装了 gem 模块：用于用户身份验证的设备。它适用于登录/注销。但是当我在控制器和视图中添加任何设计方法时，所有响应都是“未定义的方法”

*   例如，未定义的方法“user_signed_in？” 对于#<#:0x0000001dddecb8>
*   例如，未定义的方法“authenticate_user！” 为了＃

有人遇到同样的问题吗？你能告诉我任何解决方案吗？

我正在使用 Rails 3.1.1 ruby​​ 1.9.2p290（2011-07-09 修订版 32553）[x86_64-linux] 设计（2.1.2）

谢谢——克也

# javascript - 出现在 for...in 循环中的 Monkeypatched 代码

> ID：11483785
> 
> 赞同：0
> 
> 时间：2012-07-14T12:34:44.147
> 
> 标签：javascript

我的网络应用程序的主要 JavaScript 中有以下代码：

```
 // uniq for arrays
if (!Array.prototype.getUnique) {
    Array.prototype.getUnique = function () {
        var u = {}, a = [];
        for (var i = 0, l = this.length; i < l; ++i) {
            if (u.hasOwnProperty(this[i])) {
                continue;
            }
            a.push(this[i]);
            u[this[i]] = 1;
        }
        return a;
    }
} 
```

这是一个简单`uniq`的 javascript 克隆，monkeypatched 到基本的 Array 类中。（不是在这里讨论猴子补丁，请在别处发火......）

`getUnique()`可以按预期工作，但是现在每当我使用循环遍历 Array 时，都会将`for...in`一个名为的附加索引`getUnique`传递给迭代器主体，并且当`n`查找此 false 时，`getUnique`代码就是值。（换句话说：`for...in`正在循环遍历数组，但附加 a`getUnique`作为最后一次迭代）

这里发生了什么？在这个函数的正上方还有另一个函数 monkeypatched 可以正常工作 ( `indexOf()`) 并且不会出现在迭代器中。以下是一些触发此问题的示例代码：

```
for (var r in result) {
    //tags = tags + result[r]["tags"].split(" ").join(", ")
    if (result[r]["tags"]) {
        var newtags = result[r]["tags"].split(" ");
        debug.log(newtags);
        for (var n in newtags) {
            debug.log("n is " + n);
            tags.push(newtags[n]);
        }
    }
} 
```

此代码段的调试输出如下所示：

```
[14:22:26.090] [["camp", "furnitur", "wood"]]
[14:22:26.093] ["n is 0"]
[14:22:26.096] ["n is 1"]
[14:22:26.099] ["n is 2"]
[14:22:26.101] ["n is getUnique"] 
```

这里发生了什么？重构 monkeypatch 并将其放入实用程序类很容易，但这对我来说是一个非常奇怪的边缘案例。我对这里发生的事情有一些想法，但这些只是猜测。谁能解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:43:07.950

`for…in`您不应该使用用于枚举对象属性的循环遍历数组。因此，例如，您不能保证索引的顺序，也不能保证——正如你所看到的——你只迭代数字索引。如果其他人以这种方式将属性添加到 Array 的原型中，您也将迭代该属性。请参阅[https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in)以获得完整的图片。

但是，在您的情况下，您可以执行以下操作：

```
for (var n in newtags) {
    if (newtags.hasOwnProperty(n)) {
        debug.log("n is " + n);
        tags.push(newtags[n]);
    }
} 
```

这也可以防止迭代其他脚本添加到原型的属性。此外，您可以将您的函数定义为不可枚举（在支持 ES5 的浏览器中）：

```
Object.defineProperty(Array.prototype, "getUnique", {
    value: function () { /*.. your function ..*/}
}) 
```

请参阅：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperty](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperty)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T12:54:34.193

常见的误解是 for...in 操作在 javascript 中是用来迭代数组的。这是错误的。它的用途是迭代对象的任何可枚举属性。在 javascript 中，一切都是对象（包括数组）。但是您可能会注意到，当您对数组执行 for...in 时，您不会得到像长度、切片等这样的值。这是因为这些不是对象的可枚举属性。

这个 SO question 有一些关于 for...in 用法的非常好的信息：[为什么将“for...in”与数组迭代一起使用是个坏主意？](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays)

如果你想坚持使用 for...in，你可以像上面建议的那样做，并检查你的 for...in 中的 hasOwnProperty

```
for ( var v in myArray ) {
    if ( myArray.hasOwnProperty(v) ) {
        // Do Something
    } 
} 
```

但是，我建议使用普通的旧无聊循环......

```
for ( var i = 0; i <= myArray.length - 1; i++ ) {
    // Do Something
} 
```

无需深入细节，这不会影响您添加的方法，因为数组的“索引”根本不是真正的索引，而是名称与其相应索引匹配的属性：即 1、0、4 等。

它们感觉就像索引，因为在 javascript 中，如果该属性是数字，则您无法使用点符号访问该属性（即：myArray.0 将不起作用）。所以你做 myArray[0]，感觉就像一个数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T12:38:46.883

这就是`hasOwnProperty`旨在解决的问题：它告诉您迭代到的名称是在对象本身上，还是从原型继承。

尝试这个：

```
for (var n in newtags) {
    if (newtags.hasOwnProperty(n)) {
        debug.log("n is " + n);
        tags.push(newtags[n]);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T12:39:41.580

不要`for-in`用于数值属性的迭代。

使用`for`循环：

```
 for (var i = 0; i < newtags.length; i++) { 
```

* * *

该`for-in`声明*几乎*永远不是这项工作的正确工具，因为...

*   它包括所有属性，包括非数字、超出范围和原型属性。

*   它不保证枚举的顺序。

* * *

虽然您*可以*进行`hasOwnProperty`检查，但没有真正的好处，并且有一些缺点......

*   它会减慢您的迭代速度

*   它对枚举问题的顺序没有帮助

*   有时您想要一个原型索引*（很少见，但确实会发生）*。使用`hasOwnProperty`使这成为不可能。

# javascript - 不同机器上的两个浏览器查看同一个页面

> ID：11483788
> 
> 赞同：3
> 
> 时间：2012-07-14T12:35:13.630
> 
> 标签：javascript, html, browser

我正在考虑一个远程帮助应用程序，用户需要帮助导航网站。

第二个用户如何才能看到第一个用户看到的内容，以便他们可以通过电话帮助他们。

两个用户都可以与网站交互吗？

是否有适用于任何不需要特殊下载的浏览器的解决方案。我可以想象一个简单的系统，其中用户浏览器使用当前位置 URL 更新服务器，但如何查看鼠标点击和动态 Javascript 更改等。

编辑：这称为“cobrowsing”，请参阅维基百科以获取解决方案列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:41:30.067

为什么不使用现有的屏幕共享解决方案，例如[http://join.me](http://join.me)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T20:48:21.000

unblu 允许两个用户与同一个网站进行交互

*   无需下载
*   适用于 Javascript/AJAX 等
*   SSL的作品
*   可以是云或私有托管

还有其他一些我没有调查过 - 你可以在共​​同浏览的维基百科页面中看到一个列表。

# android - 我想每天中午播放一个声音文件

> ID：11483792
> 
> 赞同：0
> 
> 时间：2012-07-14T12:36:10.073
> 
> 标签：android

我想在每天早上 6 点、中午和下午 6 点播放声音文件.. 可以吗..？它怎么能读时间..？我认为这就像一个警报点..我想打开或关闭点..我想要你的明智回答..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:48:16.933

使用 AlarmManager 安排事件。您可以在操作系统触发 ON_BOOT_COMPLETED 意图时安排警报。

[http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

[http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

[http://developer.android.com/reference/android/content/Intent.html#ACTION_BOOT_COMPLETED](http://developer.android.com/reference/android/content/Intent.html#ACTION_BOOT_COMPLETED)

# java - 使用andengine GLES2通过引用传递Sprite导致空指针异常

> ID：11483795
> 
> 赞同：0
> 
> 时间：2012-07-14T12:36:42.523
> 
> 标签：java, android, nullpointerexception, opengl-es-2.0, andengine

当我在参数中传递 sprite 并在方法中初始化该对象但 Object 的引用仍然为 null 时，我在方法中传递了它。这是我的方法。

```
public void createAndLoadSimpleSprite(Sprite sprite ,String name,
        SimpleBaseGameActivity activity, int width, int height) {

    BitmapTextureAtlas atlasForBGSprite = new BitmapTextureAtlas(
            activity.getTextureManager(), width, height);
    TextureRegion backgroundSpriteTextureRegion = BitmapTextureAtlasTextureRegionFactory
            .createFromAsset(atlasForBGSprite, activity, name, 0, 0);
    sprite = new Sprite(0, 0, backgroundSpriteTextureRegion,
            activity.getVertexBufferObjectManager());
    activity.getTextureManager().loadTexture(atlasForBGSprite);

} 
```

以及我如何称呼它。

```
createAndLoadSimpleSprite(defualtCageSprite,"bg.png", this, 450, 444); 
```

但访问 defaultCageSprite 仍然会引发空指针异常......我不确定这是 AndEngine 问题。但是如果没有解决方法，我们不能在 AndEngine 中将精灵作为参数传递吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T06:21:04.683

这不是 AndEngine 问题。您正在处理 Java 的工作方式。AFAIK不可能有输出参数。您需要做的是使用“返回”或创建字段来保存您的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T12:29:08.267

您必须更改方法以返回 sprite 对象：

```
public Sprite createAndLoadSimpleSprite(String name,
    SimpleBaseGameActivity activity, int width, int height) {

BitmapTextureAtlas atlasForBGSprite = new BitmapTextureAtlas(
        activity.getTextureManager(), width, height);
TextureRegion backgroundSpriteTextureRegion = BitmapTextureAtlasTextureRegionFactory
        .createFromAsset(atlasForBGSprite, activity, name, 0, 0);
activity.getTextureManager().loadTexture(atlasForBGSprite);

Sprite sprite = new Sprite(0, 0, backgroundSpriteTextureRegion,
        activity.getVertexBufferObjectManager());

return sprite;

} 
```

现在您可以致电：

```
defualtCageSprite = createAndLoadSimpleSprite("bg.png", this, 450, 444); 
```

不要忘记将您的精灵附加到`scene`.

# php - PHP/MySQL：带有插入/更新查询的动态准备语句

> ID：11483799
> 
> 赞同：0
> 
> 时间：2012-07-14T12:38:06.363
> 
> 标签：php, mysql, dynamic

我发现了这个[http://net.tutsplus.com/tutorials/php/the-problem-with-phps-prepared-statements/](http://net.tutsplus.com/tutorials/php/the-problem-with-phps-prepared-statements/)

将它放在一个单独的 php 文件中真的很好，我的其他文件使用查询作为参数调用该文件。

是否可以与其他查询（如插入和更新）进行类似的操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:03:46.727

这是更新的示例：

$params 是一个数组。

```
 function insertToDB($params, $db) { //Pass array and db

        $fields = array();
        $conn = new mysqli('localhost', 'root', 'root', 'db') or die('XXX');     
        $stmt =  $conn->stmt_init();
        $stmt->prepare("SELECT * FROM ".$db); 
        $stmt->execute();
        $meta =  $stmt->result_metadata();
        while ($field = $meta->fetch_field()) { 
             $fields[] = $field->name;   
        }

        $fields = implode(", ", $fields);

        $placeholders = implode(',', array_fill(0, count($params), '?'));

        $types = '';
        foreach($params as $value) {
            $types.= substr(strtolower(gettype($value)), 0, 1); 
        }

        $ins = "INSERT INTO MYDB (".$fields.") VALUES (".$placeholders.")"; 

        $bind_names[] = $types; 
        for ($i = 0; $i < count($params); $i++) { 
            $bind_name = 'bind' . $i;
            $$bind_name = $params[$i];
            $bind_names[] = &$$bind_name;
        }
        if ($stmt->prepare($ins)) {
                call_user_func_array(array($stmt,'bind_param'),$bind_names); 
                $insresult = $stmt->execute(); 
        }
        return $insresult;
        $stmt->close();
    } 
```

# c# - 如何使用来自套接字的 XAML 数据设置网格内容

> ID：11483804
> 
> 赞同：0
> 
> 时间：2012-07-14T12:38:19.687
> 
> 标签：c#, wpf, xaml

我不知道它将是什么数据......我从 socket(example) 获得 XAML：

```
 <Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="180.036*" />
        <RowDefinition Height="81.964*" />
    </Grid.RowDefinitions>
    <Button Margin="0,5.282,0,0" Name="button1" HorizontalAlignment="Left" Grid.Row="1" Width="109.633" Click="button1_Click">Button</Button>
    <TextBox Grid.Row="0" HorizontalAlignment="Right" Margin="0,13.336,0,0" Name="textBox1" Width="123.358" Height="68.628" VerticalAlignment="Top" />

</Grid> 
```

如何将当前网格内容切换为我在运行期间获得的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T14:14:17.077

您可以使用 XamlReader 解析您收到的 xaml：

```
UIElement root = XamlReader.Parse(xaml) as UIElement;
myGrid.Children.Clear();
if(root != null)
    myGrid.Children.Add(root); 
```

但是，xaml 必须满足一些条件。所有命名空间都必须包含在 XAML 的根节点中。例如：

```
<Grid xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
    <Grid.RowDefinitions>
         .... 
```

此外，XAML 中必须没有无法解决的引用。例如，在您提供的 XAML 中，存在对无法解析的 Click 事件处理程序的引用。您可以在解析代码后添加点击处理程序。

# linux - 如何在gentoo上安装jre？

> ID：11483811
> 
> 赞同：0
> 
> 时间：2012-07-14T12:39:11.693
> 
> 标签：linux, java, gentoo

我正在尝试在我使用的 gentoo 上安装 jre：

```
emerge virtual/jre 
```

我的问题是这不起作用

```
Resolving ftp.gentoo.mesh-solutions.com... 213.203.218.123
Connecting to ftp.gentoo.mesh-solutions.com|213.203.218.123|:21... failed: Connection timed out.
Retrying.

--14:37:13--  ftp://ftp.gentoo.mesh-solutions.com/gentoo/distfiles/portage-utils-0.1.29.tar.bz2
  (try: 2) => `/usr/portage/distfiles/portage-utils-0.1.29.tar.bz2'
Connecting to ftp.gentoo.mesh-solutions.com|213.203.218.123|:21... 
```

事实上，服务器试图从 ftp.gentoo.mesh-solutions 获取一些数据包，但这个站点似乎已关闭。

gentoo 还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:01:09.753

继续手动下载软件包并放入 /usr/portage/distfiles。然后重新出现，portage 将完成下载步骤并且安装应该正常继续。

也就是说，通常portage 不会依赖于单个镜像站点——它会检查多个镜像。为确保您没有问题，请`emerge --sync`再次运行并查看 /etc/make.conf 以查看您是否有正确的重试/镜像数量/等设置。

由于许可证问题，java 包需要手动下载 distfile 的情况并不少见，但这通常会通过emerge -pv 说明，并且emerge 会在运行时打印一条消息并退出。

# mysql - Rake db:create 继续使用 /tmp/mysql.sock 尽管 my.cnf 设置

> ID：11483816
> 
> 赞同：1
> 
> 时间：2012-07-14T12:39:51.793
> 
> 标签：mysql, ruby-on-rails

我在 Mac 上使用 brew 安装更新的 MySQL。为了简化本地数据库的创建，我取消了本地 root 用户的密码（我知道，我知道），并且在创建一个新的 Rails 应用程序（`rails new myapp -d mysql`）之后，应该可以运行了`rake db:create`，对吧？

然而，尽管已经`/etc/my.cnf`设置为定义标准 mysql.sock 位置......

```
[mysqld]
socket=/usr/local/var/mysql/mysql.sock

[client]
socket=/usr/local/var/mysql/mysql.sock 
```

... Rails 仍然不会`mysql.sock`在 a 上使用新定义的文件`rake db:create`：

```
rake db:create
Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)
Couldn't create database for {"adapter"=>"mysql2", "encoding"=>"utf8", "reconnect"=>false, "database"=>"delayed_jobs_development", "pool"=>5, "username"=>"root", "password"=>nil, "host"=>"localhost"}, charset: , collation: 
```

Running`mysqladmin variables`列出了正确的套接字文件位置，`mysql --help`. 我重新启动了 MySQL 服务器，甚至重新创建了 Rails 应用程序。

所以我的问题是：还有什么可以将套接字文件默认为`/tmp/mysql.sock`，或者是否有一个替代的，最好是全局的配置文件，我可以在其中指定 rake 任务将遵循的位置？rake 任务是否可以调用使用不同配置文件的不同命令行 MySQL 工具？

显然，我可以创建一个从该`/tmp`位置到我的真实位置的符号链接，或者编辑我的`database.yml`文件以引用它。我了解如何让 Rails 正确地与数据库服务器对话，但关键是设置一次正确的默认值，因此我在本地创建的任何未来 Rails 应用程序都可以在没有额外编辑的情况下使用（/tmp/mysql.sock 获取重新启动时清除）。

事实上，我什至不确定它为什么要尝试通过套接字文件进行连接，因为我的`database.yml`文件告诉它使用主机名：

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: myapp_development
  pool: 5
  username: root
  password:
  host: localhost 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T12:45:49.523

正如 MySQL 文档所说，`/tmp/mysql.sock`是套接字文件的默认位置。这也是 rails 的默认设置（更多内容见下文）。

正如您所提到的，您始终可以在您的[database.yml](http://guides.rubyonrails.org/getting_started.html#configuring-a-mysql-database)文件`mysqladmin variables`中显式设置套接字（您配置的并且由 返回的套接字） ：

```
socket: /usr/local/var/mysql/mysql.sock 
```

我认为连接是通过您设置的套接字文件建立的`host: localhost`。如果将其更改为`127.0.0.1`，[则应通过 TCP/IP 建立连接](http://dev.mysql.com/doc/refman/5.1/en/can-not-connect-to-server.html)。

我发现了相当旧的信息（[mysql 适配器的真正旧版本](https://github.com/rails/rails/blob/5b3f7563ae1b4a7160fda7fe34240d40c5777dcd/activerecord/lib/active_record/vendor/mysql.rb)和 2007 年的[博客条目](http://log.gmarik.info/2007/01/learning-rails-issue-1.html)），这意味着`MYSQL_UNIX_ADDR`环境变量用于解析套接字。另请参阅Ruby/MySQL 的开发人员在 GitHub 上的此[评论](https://github.com/tmtm/ruby-mysql/issues/12#issuecomment-777857)`MYSQL_UNIX_PORT`，其中他说要设置变量。[Ruby/MySQL](https://github.com/tmtm/ruby-mysql/blob/master/spec/mysql_spec.rb)`MYSQL_SOCKET`连接器的源代码中提到了第三个环境变量。

```
export MYSQL_UNIX_ADDR=/usr/local/var/mysql/mysql.sock
export MYSQL_UNIX_PORT=/usr/local/var/mysql/mysql.sock
export MYSQL_SOCKET=/usr/local/var/mysql/mysql.sock 
```

我不知道这些变量是否会在此过程中的某个地方得到评估。不过，您可以尝试一下。

现在，rails[`mysql_adapter.rb`](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/connection_adapters/mysql_adapter.rb)表示`socket`已使用已配置且默认为`/tmp/mysql.sock`(set in [`app_generator.rb`](https://github.com/rails/rails/blob/master/railties/lib/rails/generators/rails/app/app_generator.rb))。似乎没有其他位置得到检查。我没有在`Ruby/MySQL`rails 使用的默认适配器中找到任何其他内容。

所以基本上——不是这个主题的专家——我认为没有办法为 MySQL 套接字文件设置全局默认位置，该文​​件由 rails 或使用的默认适配器评估。

# .htaccess - Magento 域配置

> ID：11483817
> 
> 赞同：0
> 
> 时间：2012-07-14T12:40:22.197
> 
> 标签：.htaccess, magento, dns

我正在关注 Magento 书中的一个示例，该示例要求在 .htaccess 文件中写入以下内容：

```
SetEnvIf Host www\.acmefurniture.com MAGE_RUN_CODE=furniture_en
SetEnvIf Host www\.acmefurniture.com MAGE_RUN_TYPE=store
SetEnvIf Host ^acmefurniture.com MAGE_RUN_CODE=furniture_en
SetEnvIf Host ^acmefurniture.com MAGE_RUN_TYPE =store
SetEnvIf Host www\.acmeelectronics.com MAGE_RUN_CODE=electronics_en
SetEnvIf Host www\.acmeelectronics.com MAGE_RUN_TYPE=store
SetEnvIf Host ^acmeelectronics.com MAGE_RUN_CODE=electronics_en
SetEnvIf Host ^acmeelectronics.com MAGE_RUN_TYPE =store
SetEnvIf Host www\.acmeoutdoor.com MAGE_RUN_CODE=outdoor_products
SetEnvIf Host www\.acmeoutdoor.com MAGE_RUN_TYPE=website
SetEnvIf Host ^acmeoutdoor.com MAGE_RUN_CODE=outdoor_products
SetEnvIf Host ^acmeoutdoor.com MAGE_RUN_TYPE=website 
```

我想使用这样的示例，除了我在防火墙后面的 Windows 7 机器上运行 xampp 服务器并且不拥有多个域名。

那么我想问的是，我可以在 localhost 服务器上使用什么来代替 acmefurniture、acmeelectronics 和 acmeoutdoor（我才刚刚开始测试 magento）？

当然，一旦出现在网络上，类似的示例将要求网络商店维护人员购买他们自己的域等......但现在我只是想知道如何查看示例中的页面如何显示在 localhost 上。

* * *

我尝试修改我的 C:\Windows\System32\drivers\etc\hosts 文件并添加以下行：

然后在我的 C:\xampp\htdocs\magento.htaccess 文件中写入以下内容：

```
SetEnvIf Host en.furniture.localhost MAGE_RUN_CODE=furniture_en
SetEnvIf Host en.furniture.localhost MAGE_RUN_TYPE=store
SetEnvIf Host en.electronics.localhost MAGE_RUN_CODE=electronics_en
SetEnvIf Host en.electronics.localhost MAGE_RUN_TYPE=store
SetEnvIf Host products.localhost MAGE_RUN_CODE=outdoor_products
SetEnvIf Host products.localhost MAGE_RUN_TYPE=website 
```

但是当我将浏览器指向

```
http://en.furniture.localhost/magento 
```

或者

```
http://products.localhost/magento 
```

我仍然得到相同的结果。我应该得到两个不同的页面。

任何人都知道为什么我在这两种情况下都得到相同的页面？

如何配置我的 Windows 7 + XAMPP + Magento 环境以便在这两种情况下获得不同的站点？

谢谢，

约翰·戈切

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:47:32.440

您可以使用本地主机上的任何域。甚至 google.com。只需在您的主机文件中指定它。在此处查看更多信息[http://helpdeskgeek.com/windows-7/windows-7-hosts-file/](http://helpdeskgeek.com/windows-7/windows-7-hosts-file/)

当您在浏览器的地址栏中输入任何域名时，它首先会查看本地主机文件。如果在那里找到记录，浏览器将向指定的服务器发送请求，在您的情况下为 127.0.0.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:13:16.753

您可以修改您的 Windows 主机文件以诱使 Windows 认为这些域名指向您的本地计算机：

例如，您将添加：

127.0.0.1 somedomain.com

127.0.0.1 anotherdomain.com

当您在 Web 浏览器中键入这些内容时，窗口将尝试查看域的本地 WAMP 设置。

然后你会改变你的 .htaccess 像这样：

SetEnvIf Host somedomain.com MAGE_RUN_CODE=[store1]

SetEnvIf Host somedomain.com MAGE_RUN_TYPE=store

SetEnvIf Host anotherdomain.com MAGE_RUN_CODE=[store2]

SetEnvIf Host anotherdomain.com MAGE_RUN_TYPE=store

您可以将 [store1] 和 [store2] 替换为您可以从 magento 管理员（商店管理）获得的每个商店视图的商店代码。

# ruby-on-rails - Rails 资产最佳实践

> ID：11483819
> 
> 赞同：15
> 
> 时间：2012-07-14T12:40:41.593
> 
> 标签：ruby-on-rails, asset-pipeline, sprockets

我是 Rails 新手，无法找出组织资产的最佳方式。这个问题的目的是收集我的想法，征求意见，并随着时间的推移改进文档——也许有一天它可以成为 Rails 指南。（Rails Wiki 似乎已经死了。）这将是对新手概念化的帮助，而不是参考，因此它将仅限于最常见的场景。

* * *

**资产管道 - 概述**

*有关管道的目的、好处和内部工作原理的详细信息，请从本指南开始：http: [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html) 我将在这里仅总结与我的目的相关的部分。*

需要管道的原因是：

1.  **编译：**将高级语言（ERb、Haml、Sass、LESS、CoffeeScript...）编译成纯 CSS/JS。

管道的额外好处是：

1.  **串联：**将多个文件合并为一个以提高客户端性能。
2.  **缩小：**删除空格和其他巧妙的优化以减小文件大小。
3.  **指纹识别：**在文件名中添加了文件内容的 MD5 哈希，以强制缓存在文件更改时再次获取文件。

**资产管道 - 默认文件系统布局**

*   `app|lib|vender/assets/`- 用于将由管道处理的文件。
*   `app/assets/`- 专门用于您为应用程序创建的文件。
*   `lib/assets/`- 专门用于您为在多个应用程序之间共享而创建的文件。
*   `vendor/assets/`- 专门用于其他人创建的文件，例如 jQuery 和 Twitter Bootstrap（尽管它们经常由 gems 提供，而不是直接导入 /vender）。
*   `public/`- 此处的文件保持原样，可直接从 Web 应用程序的根路径 ('/') 获取。

**资产管道 - 默认文件和行为**

应用程序/资产/javascripts/application.js

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

应用程序/资产/样式表/application.css

```
/*
 *= require_self
 *= require_tree .
 */ 
```

public/404.html
public/robots.txt
...

宝石文件

```
...
gem 'jquery-rails'
... 
```

以下是资产管道编译器使用新 Rails 应用程序的默认设置所做的事情：

1.  默认情况下，编译器将处理`application.js`、`application.css`和所有非 JS/CSS 文件（主要是图像）。
2.  这两个应用程序文件包含 sprockets 指令（以 = 开头的注释行）。Sprockets 是为 Rails 资产管道编译提供支持的库。这些指令也称为*manifests*，因为它们列出了要包含的文件。
3.  `application.js`包含拉入两个 jquery 文件（存在于 jquery-rails gem 中，而不是在您的应用程序中）的清单，然后`app/assets/javascripts/`通过`require_tree .`. 通过此清单包含的所有文件都将编译为一个名为 的文件`application-[the MD5 hash].js`，并放置在`public/assets/`.
4.  `application.css`包含一个清单，该清单`app/assets/stylesheets/`通过`require_tree .`. 该`required_self`指令告诉编译器在`application.css`文件本身中包含任何 CSS 内容，并且按照指令的顺序。因此，在这种情况下，其中的 CSS`application.css`将出现在其余部分之上。通过此清单包含的所有文件都将编译为一个名为 的文件`application-[the MD5 hash].css`，并放置在`public/assets/`.
5.  app/assets 树中的所有非 JS/CSS 文件（主要是图像）也将被指纹识别并放置在 中`public/assets/`，目录结构保持不变。例如，`app/assets/images/categories/computers.png`最终将作为`public/assets/categories/computers-[the MD5 hash].png`.

**概念化资产内依赖场景**

*图片*

图像之间没有依赖关系，它们总是独立存在的。

*样式表*

*   **CSS：** CSS 文件可以相互导入，只要路径正确就可以使用，尽管这可能不是最好的技术。
*   **Sass：** Sass 文件可以相互导入，也可以共享变量和 mixin，但前提*是它们仍然是 Sass*（不是在编译成 CSS 之后），并且*只能通过 Sass 导入*。如果您有`application.css.scss`需要“a”和“b”的 sprockets 指令，它们将在合并之前在单独的上下文中编译。要共享变量和 mixin，您必须使用 Sass 导入指令从 'b' 导入 'a'，反之亦然。（请参阅下面的关键概念 1。）
*   **LESS：** [对此了解不够。]

*JavaScript*

*   **JS：** JavaScript 组件具有相互依赖关系（例如：Twitter Bootstrap 使用 jQuery）。但是，它们都在运行时在浏览器中得到解析，因此无论您如何组织/组合项目中的文件，只要所有内容最终都由浏览器加载即可。
*   **CoffeeScript：** [对此了解不够。]

**辅助行为 - Rails 视图**

*去做*

**辅助行为 - Sass**

*去做*

**最佳实践 - 关键概念**

1.  该管道用于为生产准备资产。将其视为部署系统的一部分，而不是应用程序本身。自己建立应用程序的逻辑结构，然后配置 sprocket 以在该结构上正确运行。

**最佳实践 - 通用资产场景**

*去做*

**最佳实践 - 一般有用的默认值摘要**

*去做*

** 问题 **

# asp.net-mvc-3 - 事后处理方法中的文化问题

> ID：11483820
> 
> 赞同：0
> 
> 时间：2012-07-14T12:40:43.197
> 
> 标签：asp.net-mvc-3, localization

我在使用后操作方法时遇到了一些特定于文化的问题。我有一个 post action 方法，当我处理法语、俄语、乌尔都语或日语时效果很好。但是当我使用 es-MX（西班牙文化）和 ar-AE（文化）时；我遇到了一些问题。在 get 方法设置正确期间，我在 Model 类中有日期字段，但是当模型对象被传递给 post 方法时，日期字段的值以某种方式丢失，我在日期字段中获得的值是 01/01/ 0001。我不知道为什么会这样。如果代码有问题，那么它也不应该适用于法国、俄罗斯文化。

大家对此有什么想法吗？？任何代码建议表示赞赏..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T06:11:23.013

The default model binder does the validation based upon the current culture of the server. You are setting the culture in the action filter and the default model binder is invoked before the action filter execution so the validation fails.

One way I can see to solve this problem is setting the culture for the current thread before the default model binder is invoked (i haven't tried this so i can't assure whether this work or not) the other option is you can go for [custom model binder](https://stackoverflow.com/questions/2356601/custom-datetime-model-binder-in-asp-net-mvc).

# c - 使用 Cygwin 在 Windows 7 上调试 C for UNIX API？

> ID：11483822
> 
> 赞同：0
> 
> 时间：2012-07-14T12:40:57.233
> 
> 标签：c, unix, cygwin

我刚刚了解 Cygwin，它似乎可以针对 UNIX API 编写 C 代码，然后让它在 Windows 上运行，前提是您在 Cygwin 环境中构建它。

我已经习惯了 Visual Studio IDE 和调试工具，所以想问一下：是否有可能在 Windows 中编写和构建 C，然后在 Cygwin 的帮助下使用 Visual Studio 进行调试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T12:52:04.573

不，因为 VS 调试工具（大部分）严重依赖于使用 MS C 编译器而不是 GCC 编译它。

因此，如果您设法将其引导加载，您将无法获得 VS 提供的任何更有用的调试功能。

支持 GCC 的最接近 Visual Studio 的替代品是[Eclipse](http://eclipse.org)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T15:33:19.517

Visual Studio 不适合您的情况，因为 VS 工具集合旨在处理使用 VS C 编译器而非 GCC 编译的代码。代替 Visual Studio，我建议[Codelite](http://www.codelite.org/)。它专门设计为一个跨平台的 IDE，对于从 Visual Studio 迁移的开发人员来说是熟悉的。它当然会处理 GCC 或 Clang。

与 CodeBlocks（您可以使用的另一个潜在 IDE）相比，Codelite 有大量功能略有改进，但它确实有一些值得单独提及。

*   Clang 驱动的代码完成和代码标记。这与编译器是分开的，因此即使使用 GCC 编译，IDE 也可以为您提供基于 Clang 的功能。需要注意的是，Clang 支持的功能尚未完全实现。例如，不存在 Clang 代码建议，并且代码完成功能还不适用于 Objective-C。
*   开箱即用对 Objective-C 的部分支持。CodeBlocks 需要正确设置才能正确处理 Objective-C 项目，而 Codelite 无需任何修改即可处理它们。我说对 Objective-C 的部分支持是因为前面提到的 Objective-C 方法和类缺少代码完成。
*   更高质量的构建错误输出窗口；按消息、文件和项目分类所有构建错误和警告。我唯一可以直接比较的是 Xcode 中的构建错误输出窗口。

我的建议是尝试两种 IDE 并决定哪个更适合您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T00:30:39.030

实际上可以使用 Visual Studio 调试 UNIX 应用程序。请参阅[Utilities and SDK for Subsystem for UNIX-based Applications](http://technet.microsoft.com/en-us/library/cc732759)。

# asp.net-mvc - 在 mvc 中重写 URl

> ID：11483829
> 
> 赞同：0
> 
> 时间：2012-07-14T12:41:20.347
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

海

我写了下面的代码

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        routes.MapRoute(
            "Home", // Route name
            "", // URL with parameters
            new { controller = "Home", action = "Index" } // Parameter defaults
        );
        routes.MapRoute(
                   "Controller_Action", // Route name
                   "{controller}/{action}/{id}", // URL with parameters
                   new { id = UrlParameter.Optional } // Parameter defaults
        );
        foreach (var route in GetDefaultRoutes())
        {
            routes.Add(route);
        }
        routes.MapRoute(
            "UserPage", // Route name
            "{id}", // URL with parameters
            new { controller = "Home", action = "Get" } // Parameter defaults
        );
    }

    private static IEnumerable<Route> GetDefaultRoutes()
    {
        //My controllers assembly (can be get also by name)
        Assembly assembly = typeof(test1.Controllers.HomeController).Assembly;
        // get all the controllers that are public and not abstract
        var types = assembly.GetTypes().Where(t => t.IsSubclassOf(typeof(Controller)) && t.IsPublic && !t.IsAbstract);
        // run for each controller type
        foreach (var type in types)
        {

            //Get the controller name - each controller should end with the word Controller
            string controller = type.Name.Substring(0, type.Name.IndexOf("Controller"));
            // create the default
            RouteValueDictionary routeDictionary = new RouteValueDictionary
                                               {
                                                   {"controller", controller}, // the controller name
                                                   {"action", "index"} // the default method
                                               };
            yield return new Route(controller, routeDictionary, new MvcRouteHandler());
        }
    } 
```

我是 mvc 的新手，我想像这样重写我的 url，假设我的 url 就像 www.myhouse.com/product/index/1 那么我只想显示 www.myhouse.com/prduct-name 以获得更好的 seo性能，我正在使用 mvc4 beta，我也有一个通过[.Net MVC 中的 URL 重写，](https://stackoverflow.com/questions/2375256/url-rewriting-in-net-mvc)但它不适合我....

但我不知道如何将值传递给这个方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T19:23:15.360

在互联网上搜索了很多之后，我得到了我的解决方案

将以下代码添加到`global.asax`

```
routes.MapRoute(
            "Home", // Route name
            "", // URL with parameters
            new { controller = "Home", action = "Index" } // Parameter defaults
        );
        routes.MapRoute(
           "jats", // Route name
           "{jats}", // URL with parameters
           new { controller = "Home", action = "Content" } // Parameter defaults
         ); 
```

然后添加以下代码以查看：

```
@Html.ActionLink("test", "Content", new { jats= "test-test" }) 
```

将以下代码添加到`HomeController`：

```
public ActionResult Content(string jats)
{
    return View();
} 
```

然后你就完成了...现在 URL 与您传入的查询字符串相同...因此您的控制器名称和查询字符串参数将不会显示。

# android - Android：未处理带有选择 WHERE 子句的 SQLite 查询

> ID：11483831
> 
> 赞同：2
> 
> 时间：2012-07-14T12:41:36.413
> 
> 标签：android, sqlite, where-clause, android-contentresolver

我试图通过在*ContentResolver的查询的**选择*字符串中定义 SQL **WHERE**子句来限制数据库结果。

 **```
Cursor cursor = getContentResolver().query(uri, null, getSelectionString(), null, null); 
```

...

```
public String getSelectionString() {
    // TODO Replace latitude and longitude with database reference.
    StringBuilder string = new StringBuilder();
    string.append("latitude >= ").append(northEast.getLatitudeE6() / 1e6);
    string.append(" AND ");
    string.append("latitude <= ").append(southWest.getLatitudeE6() / 1e6);
    string.append(" AND ");
    string.append("longitude >= ").append(southWest.getLongitudeE6() / 1e6);
    string.append(" AND ");
    string.append("longitude <= ").append(northEast.getLongitudeE6() / 1e6);
    return string.toString();
} 
```

数据库列定义如下...

```
public class CustomDatabase {
    public static final class Contract {
        public static final String COLUMN_NAME = "name";
        public static final String COLUMN_LATITUDE = "latitude";
        public static final String COLUMN_LONGITUDE = "longitude";
    }
} 
```

...

我不是特别确定我可以检查游标中发送的查询。如果是这样，它不包含我发送的 WHERE 子句：

```
SQLiteQuery: SELECT * FROM custom_db ORDER BY number ASC 
```

以下是选择字符串的示例：

```
latitude >= 48.203927 AND latitude <= 48.213851 AND longitude >= 16.36735 AND longitude <= 16.377648 
```

**问题：**

1.  WHERE 子句在语法上是否正确？
2.  我需要撇号吗？
3.  我是否被迫在查询中一次使用两个参数（selection、selectionArgs）？
4.  我在哪里可以调试整个查询？

* * *

**编辑：**

这是*ContentProvider的**query()*方法...

 *```
public class CustomProvider extends ContentProvider {

    @Override
    public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {
        switch (URI_MATCHER.match(uri)) {
        case URI_CODE_LOCATIONS:
            return mCustomDatabase.getLocations();
        }
        return null;
    } 
```

...显然，正如[biegleux](https://stackoverflow.com/users/1300995/biegleux)猜测的那样，我忘了传递参数。嗬！
这是数据库方法的当前实现...

```
public class CustomSQLiteOpenHelper extends SQLiteOpenHelper {

    public Cursor getLocation() {
        return mDatabaseHelper.getReadableDatabase().query(
            CustomSQLiteOpenHelper.TABLE_NAME,
            null, null, null, null, null, null);
} 
```

您是否建议我将方法签名更改为以下以传递所有参数？我不是以这种方式暴露了大部分数据库接口吗？

```
public Cursor getLocations(String[] columns, String selection, String[] selectionArgs, String groupBy, String having, String orderBy) {
    return mDatabaseHelper.getReadableDatabase().query(
            CustomSQLiteOpenHelper.TABLE_NAME,
            columns, selection, selectionArgs, groupBy, having, orderBy);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:37:25.217

好的，看来`query()`您的提供商的方法正在引起问题。确保它看起来像下面这样。

```
@Override
public abstract Cursor query (Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {
...

// run the query
db.query(db, projection, selection, selectionArgs, groupBy, having, sortOrder, limit); 
```

您不必强制使用`selectionArgs`参数，但使用它的代码更具可读性。要调试查询，您可以使用

```
SQLiteQueryBuilder qb = new SQLiteQueryBuilder();
Log.e(TAG, qb.buildQuery(projection, selection, selectionArgs, groupBy, having, sortOrder, limit); 
```

编辑：如果您已`ContentProvider`实现，则无需公开`getLocations()`方法，因为您/用户可以使用`ContentProvider's` `query()`方法。您应该至少传递那些可以在`query()`方法中传递的参数，它们是`projection`,和.`selection``selectionArgs``sortOrder`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T13:27:17.723

那条线不应该是：

```
Cursor cursor = getContentResolver().query(uri, null, getSelectionString(), null, null); 
```

请注意后面添加的括号`getSelectionString`，表示它是一个方法调用，而不是一个字符串（尽管我确实想知道为什么它不会引发错误，因为`getSelectionString`如果我的理论是正确的，它就不会作为字符串存在......）。***

# android - 带有按钮的android水平滚动

> ID：11483839
> 
> 赞同：0
> 
> 时间：2012-07-14T12:43:31.727
> 
> 标签：android

嗨，我想创建一个允许用户左右滑动并且按钮水平滑入的功能。例如，当您滑动屏幕上会出现一个大按钮，它会水平移动，而另一个大按钮可以指点我正确的方向，因为我不知道从哪里开始？

这是我正在寻找的一个例子 ![在此处输入图像描述](../Images/0c3fbc015f7b8c86bc239b69d4787161.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:15:24.610

你可以使用viewpager：http: [//developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

当当前页面发生变化时（有一个监听器可以做到这一点），您可以更改底部的圆形图像以显示正确的页面。

:)

# android - 带有来自资产的数据库的 CursorAdapter

> ID：11483846
> 
> 赞同：1
> 
> 时间：2012-07-14T12:44:13.220
> 
> 标签：android, android-cursoradapter, android-cursorloader

我想在我的应用程序中使用一个预先创建的数据库，然后使用游标加载器来呈现来自数据库的数据。首先，我根据本教程 [http://goo.gl/1XS84] 从 assets 文件夹中复制数据库，然后我想将 CursorLoader 与 CursorAdapter 一起使用。

CursorLoader 虽然需要一些数据库的查询 Uri，但我不知道我应该指定什么 URI。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:22:33.780

以下是如何从内容提供商的资产中使用数据库的摘录。

```
public class MyProvider extends ContentProvider {

    private SQLiteOpenHelper mOpenHelper;
    ...

    private static class DatabaseHelper extends SQLiteOpenHelper {

        private static final String DATABASE_NAME = "database.db";
        private static final int DATABASE_VERSION = 1;
        private static final String SP_KEY_DB_VER = "db_ver";
        private final Context mContext;
            ...

        public DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            mContext = context;
            initialize();
        }

        /**
         * Initializes database. Creates database if doesn't exist.
         */
        private void initialize() {
            if (databaseExists()) {
                SharedPreferences prefs = PreferenceManager
                        .getDefaultSharedPreferences(mContext);
                int dbVersion = prefs.getInt(SP_KEY_DB_VER, 1);
                if (DATABASE_VERSION != dbVersion) {
                    File dbFile = mContext.getDatabasePath(DATABASE_NAME);
                    if (!dbFile.delete()) {
                        Log.w(TAG, "Unable to update database");
                    }
                }
            }
            if (!databaseExists()) {
                createDatabase();
            }
        }

        /**
         * Returns true if database file exists, false otherwise.
         */
        private boolean databaseExists() {
            File dbFile = mContext.getDatabasePath(DATABASE_NAME);
            return dbFile.exists();
        }

        /**
         * Creates database by copying it from assets directory.
         */
        private void createDatabase() {
            String parentPath = mContext.getDatabasePath(DATABASE_NAME).getParent();
            String path = mContext.getDatabasePath(DATABASE_NAME).getPath();

            File file = new File(parentPath);
            if (!file.exists()) {
                if (!file.mkdir()) {
                    Log.w(TAG, "Unable to create database directory");
                    return;
                }
            }

            InputStream is = null;
            OutputStream os = null;
            try {
                is = mContext.getAssets().open(DATABASE_NAME);
                os = new FileOutputStream(path);

                byte[] buffer = new byte[1024];
                int length;
                while ((length = is.read(buffer)) > 0) {
                    os.write(buffer, 0, length);
                }
                os.flush();
                SharedPreferences prefs = PreferenceManager
                        .getDefaultSharedPreferences(mContext);
                SharedPreferences.Editor editor = prefs.edit();
                editor.putInt(SP_KEY_DB_VER, DATABASE_VERSION);
                editor.commit();
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                if (is != null) {
                    try {
                        is.close();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
                if (os != null) {
                    try {
                        os.close();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
            }
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion,
                int newVersion) {
        }
    }
    ... 
```

注意：我建议在单独的线程中执行 I/O 操作。

# android-layout - 类似 Android 应用程序布局的 RealPlayer

> ID：11483851
> 
> 赞同：0
> 
> 时间：2012-07-14T12:45:28.990
> 
> 标签：android-layout

我是 Android 新手，我正在尝试设计我的 Android 应用程序，就像 Android RealPlayer 的界面一样，但我不知道怎么做！

我真正想要设计的是：将页面分成 4 个相等的网格状部分，这样整个页面都被覆盖，并且页面末尾没有多余的空白空间（就像 RealPlayer 界面一样）。

![真实播放器界面](../Images/437fd2637d8e3a61ef81ba5d632476b4.png)

![我的应用](../Images/2c9e3cda1cfb377c842ab2c55b08befe.png)

```
<?xml version="l.0" encoding="utf—8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android“
    android:id=“@+id/gridview“
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_alignParentTop="true"
    android:layout_gravity="center"
    android:layout_weight="l.0"
    android:columnWidth="90dp"
    android:horizontalSpacing="l0dp"
    android:numColumns="2"
    android:orientation="horizontal"
    android:paddingTop="50dp"
    android:stretchMode=“columnWidth"
    android:verticalSpacing="l0dp" >

</GridView> 
```

我尝试过操作属性，但似乎只使用元素`GridView`是不可能的。`GridView`我希望我的问题陈述足够清楚！有人可以给我一个关于如何做到这一点的提示吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-15T11:25:03.650

我发现可以使用不同尺寸的按钮！

# c# - C#中对象之间的转换

> ID：11483854
> 
> 赞同：2
> 
> 时间：2012-07-14T12:45:35.810
> 
> 标签：c#, object, transformation

我有一个看似简单的问题，但无法提出一个干净的解决方案。我有两个类，如下所示

```
Class Person{
    String name{get; set;}
    int age{get; set;}
}

Class Alien{
    String alienName{ get; set}
    int alienAge{get; set;}
} 
```

这些类是我必须使用的第三方类，无法控制。但在某些时候，我希望能够在给定 Person 对象的情况下构造 Alien 对象，反之亦然。在我的示例中，我只有两个属性。在现实生活中，我可能为 Alien 和 Person 拥有多达 50 个属性。

Alien 不是 Person 的子集，Person 不是 Alien 的子集。这些只是两个不同的对象。你们认为在彼此之间转换这些对象的最佳方法是什么。我不想费力地编写一个复制方法，该方法接受每个属性并在另一个中设置其等效属性。由于这两个类之间的方法名称可能有很大不同，我认为我也不能使用反射。理想情况下，我正在寻找可以外部化复制过程的东西，这样如果将来 Alien 或 Person 对象发生变化，我就不必改变我的逻辑。

有什么建议么？

谢谢K

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T12:51:22.920

你可能想看看[AutoMapper](http://automapper.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T13:02:28.170

使用[`Interfaces`](http://msdn.microsoft.com/en-us/library/ms173156.aspx). 如果您有`Interface`，则必须复制的某些属性已经定义：

```
Interface ISubject
{
    // properties
    String name {get; set;}
    int age {get; set;}
}

Class Person : ISubject
{
    // contractors
    public Person ()
    {
        ...
    }

    public Person (ISubject subject)
    {
         name = subject.name;
         age = subject.age;
    }
    ...
}

Class Alien : ISubject
{
    // contractors
    public Alien ()
    {
        ...
    }

    public Alien (ISubject subject)
    {
         name = subject.name;
         age = subject.age;
    }
    ... 
} 
```

当您使用时：

```
var person = new Person();
...
ISubject subject = (ISubject) person;
var name = subject.name; 
```

或者

```
var person = new Person();
...
Alien subject = new Alien(person);
var name = alien.name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T12:54:45.427

您可以尝试[http://code.google.com/p/nutil/](http://code.google.com/p/nutil/)，有一个名为 BeanUtils 的类，它具有复制属性的方法。

# iphone - 跟随像猴子一样的球角色开球游戏

> ID：11483857
> 
> 赞同：0
> 
> 时间：2012-07-14T12:46:16.277
> 
> 标签：iphone, ios5, cocos2d-iphone

我正在开发一款类似于游戏猴子开球的游戏。我有一个球在屏幕左侧的一个地方弹跳，根据球的位置，我在用户触摸时将 linearImpulse 应用于球，以便看起来球被踢了。但是当我施加冲动时会发生什么，球会超出屏幕范围。我不希望球超出水平屏幕边界，而它可以垂直离开屏幕。我尝试使用 CCFollow，但它并没有给游戏流程带来逼真的感觉。我试过[这个](http://martin-pennings.blogspot.in/2012/06/cocos2d-how-to-use-ccfollow-to-follow.html%22THIS%20%22)教程，但帮助很大。我设法滚动背景，只剩下这一部分。

关于球不应该移出水平屏幕边界的任何想法..？但另一方面，在垂直边界的情况下，它可能会超出范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:42:31.733

如果您不使用物理，这是一个简单的边界检查。假设屏幕宽度为 320 点，这将使球水平保持在屏幕内：

```
CGPoint ballPos = ball.position;
ball.position.x = fmaxf(0, fminf(320, ballPos.x));
ball.position = ballPos; 
```

更新：我注意到你提到了线性脉冲。所以你正在使用物理引擎。在这种情况下，请在两侧创建水平墙。请参阅 cocos2d Box2D 或 Chipmunk 模板如何用碰撞边框包围屏幕，然后在游戏中仅使用左侧和右侧边框。

# android - 为什么调用finish() 后不停止android 活动？

> ID：11483860
> 
> 赞同：1
> 
> 时间：2012-07-14T12:46:54.303
> 
> 标签：android, android-intent, progressdialog, activity-finish

我有一个名为 MyProgressDialog 的活动，其中包含一个 ProgressDialog。此 ScreenProgressDialog 活动由 Intent 在 Main 活动中调用：

```
 if(msg.what == SET_PROGRESS){

            intent.putExtra("action", "set");
            ...

            intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);

            startActivity(intent);
        }
        else if(msg.what == SHOW_PROGRESS){             

            intent.putExtra("action", "show");
            ...

            intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);

            startActivity(intent);              
        }
        else if(msg.what == HIDE_PROGRESS){

            intent.putExtra("action", "hide");

            intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);

            startActivity(intent);

        } 
```

这是 MyProgressDialog 活动：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Log.e("screenPD", "spd created");

    extras = getIntent().getExtras();

    pd = new ProgressDialog(this);

    ...setting the pd...        

    pd.show();  

    Log.e("screenPD", "spd shown");
}

@Override
protected void onNewIntent(Intent intent) {
    super.onNewIntent(intent);

    setIntent(intent);

    int newTitle = intent.getExtras().getInt("title");

    if (intent.getExtras().getString("action").equals("set")){
        pd.set methods...
        pd.show();

        Log.e("DialogSET", "DialogSET "+intent.getExtras().getInt("progress"));
    }
    else if (intent.getExtras().getString("action").equals("show")){
        pd.set methods...
        pd.show();

        Log.e("DialogSHOW", "DialogSHOW "+progress);

    }
    else if (intent.getExtras().getString("action").equals("hide")){
        pd.dismiss();
        this.finish();
        Log.e("DialogHIDE", "DialogHIDE");
        return;
    }
}

@Override
public void onDestroy() {
    super.onDestroy();
    Log.e("screenPD", "destroyed");     
} 
```

这是 LogCat：

```
DialogHIDE(2615): DialogHIDE
screenPD(2615): spd created
screenPD(2615): spd shown
screenPD(2615): destroyed 
```

所以第三个意图开始了，调用了finish(); 返回; 并启动 Onreate 方法，该方法显示一个新的 ProgressDialog。onDestroy 被调用，但 ProgressDialog 不会从屏幕上隐藏。在完成（）方法之后，活动将被关闭。问题出在哪里？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:51:22.013

没有错误。方法调用`finish()`将完成，完成后控制返回`Android`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T13:00:27.427

在 startactivity 方法之后，您调用 finish() 来完成当前活动。在开始完成前一个活动的新活动之后。

# python - Python：交叉索引numpy数组

> ID：11483863
> 
> 赞同：42
> 
> 时间：2012-07-14T12:47:04.063
> 
> 标签：python, arrays, numpy

如何获取两个 numpy 数组之间的交点索引？我可以得到相交的值`intersect1d`：

```
import numpy as np

a = np.array(xrange(11))
b = np.array([2, 7, 10])
inter = np.intersect1d(a, b)
# inter == array([ 2,  7, 10]) 
```

但是我怎样才能将索引放入`a`中的值`inter`？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-14T12:59:00.947

您可以使用生成的布尔数组`in1d`来索引`arange`. 反转`a`以使索引与值不同：

```
>>> a[::-1]
array([10,  9,  8,  7,  6,  5,  4,  3,  2,  1,  0])
>>> a = a[::-1] 
```

`intersect1d`仍然返回相同的值...

```
>>> numpy.intersect1d(a, b)
array([ 2,  7, 10]) 
```

但`in1d`返回一个布尔数组：

```
>>> numpy.in1d(a, b)
array([ True, False, False,  True, False, False, False, False,  True,
       False, False], dtype=bool) 
```

可用于索引范围：

```
>>> numpy.arange(a.shape[0])[numpy.in1d(a, b)]
array([0, 3, 8])
>>> indices = numpy.arange(a.shape[0])[numpy.in1d(a, b)]
>>> a[indices]
array([10,  7,  2]) 
```

但是，为了简化上述内容，您可以使用[`nonzero`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.nonzero.html#numpy-nonzero)-- 这可能是最正确的方法，因为它返回统一列表的元组`X`，`Y`... 坐标：

```
>>> numpy.nonzero(numpy.in1d(a, b))
(array([0, 3, 8]),) 
```

或者，等效地：

```
>>> numpy.in1d(a, b).nonzero()
(array([0, 3, 8]),) 
```

结果可以用作相同形状的数组的索引，`a`没有问题。

```
>>> a[numpy.nonzero(numpy.in1d(a, b))]
array([10,  7,  2]) 
```

但请注意，在许多情况下，仅使用布尔数组本身而不是将其转换为一组非布尔索引是有意义的。

最后，您还可以将布尔数组传递给[`argwhere`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.argwhere.html)，这会产生形状略有不同的结果，它不适合索引，但可能对其他目的有用。

```
>>> numpy.argwhere(numpy.in1d(a, b))
array([[0],
       [3],
       [8]]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-20T21:47:46.527

如果您需要获取 intersect1d 给出的唯一值：

```
import numpy as np

a = np.array([range(11,21), range(11,21)]).reshape(20)
b = np.array([12, 17, 20])
print(np.intersect1d(a,b))
#unique values

inter = np.in1d(a, b)
print(a[inter])
#you can see these values are not unique

indices=np.array(range(len(a)))[inter]
#These are the non-unique indices

_,unique=np.unique(a[inter], return_index=True)

uniqueIndices=indices[unique]
#this grabs the unique indices

print(uniqueIndices)
print(a[uniqueIndices])
#now they are unique as you would get from np.intersect1d() 
```

输出：

```
[12 17 20]
[12 17 20 12 17 20]
[1 6 9]
[12 17 20] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-23T10:00:21.567

```
indices = np.argwhere(np.in1d(a,b)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-17T09:30:19.557

对于`Python >= 3.5`，还有另一种解决方案

## 其他解决方案

让我们一步一步来。

基于问题的原始代码

```
import numpy as np

a = np.array(range(11))
b = np.array([2, 7, 10])
inter = np.intersect1d(a, b) 
```

首先，我们创建一个带有零的 numpy 数组

```
c = np.zeros(len(a))
print (c) 
```

**输出**

```
>>> [ 0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0.] 
```

其次，使用相交索引更改 c 的数组值。因此，我们有

```
c[inter] = 1
print (c) 
```

**输出**

```
>>>[ 0\.  0\.  1\.  0\.  0\.  0\.  0\.  1\.  0\.  0\.  1.] 
```

最后一步，使用 的特性`np.nonzero()`，它会准确地返回你想要的非零项的**索引。**

```
inter_with_idx = np.nonzero(c)
print (inter_with_idx) 
```

**最终输出**

```
array([ 2, 7, 10]) 
```

### 参考

[1] [numpy .非零](https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.nonzero.html)

# jsf - 如何在 JSF 中实现计算字段

> ID：11483864
> 
> 赞同：1
> 
> 时间：2012-07-14T12:47:03.773
> 
> 标签：jsf

我有一个实体 OrderLine，其中包含 unitPrice、quantity 和 totalPrice 字段。并计算 totalPrice 值：totalPrice=unitPrice*quantity。

totalPrice 是一个持久字段。

我想在视图中将 totalPrice 显示为输出文本。

第一个替代方案： `<h:outputText id="total" value="#{unitPrice*quantity}"/>` 使用此替代方案，实体字段 totalPrice 将永远不会更新，但在视图中将显示总价的正确值。

第二种选择：`<h:outputText id="total" value="#{orderLine.totalPrice }"/>`

使用这种替代方法，将从数据库中获取的值将被显示，但该值将始终为空。

是否可以仅使用 JSF，在显示页面时显示值 #{orderLine.totalPrice }，并在同一页面中修改 unitPrice 或数量时设置其更新值 #{unitPrice*quantity}？

感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T17:10:37.953

如果我是你，我可能会尝试在客户端使用一些带有 jQ​​uery 的 JavaScript 来完成。

但是如果你真的想用纯 Java 和 JSF 来做，你可以做的一件事是`totalPrice`在其中一个字段`unitPrice`或更新时更新该字段`quantity`：

```
public void setUnitPrice(BigDecimal unitPrice) {
    this.unitPrice = unitPrice;
    this.updateTotalPrice();
}
public void setQuantity(BigDecimal quantity) {
    this.quantity = quantity;
    this.updateTotalPrice();
}
private void updateTotalPrice() {
    // update total price accordingly:
    if (unitPrice != null && quantity != null){
        this.totalPrice = this.unitPrice.multiply(this.quantity);
    }
} 
```

这样，您的模型也将始终保持最新。

然后，您只需要`onchange`在`unitPrice`和`quantity`表单控件的事件上重新渲染使用 ajax 显示它的组件，如下所示：

```
<h:panelGrid>
    <label>Unit Price</label>
    <h:inputText value="#{myBean.unitPrice}">
        <f:convertNumber type="currency" />
        <f:ajax render="totalPrice" />
    </h:inputText>
    <label>Quantity</label>
    <h:inputText value="#{myBean.quantity}">
        <f:convertNumber type="currency" />
        <f:ajax render="totalPrice" />
    </h:inputText>
    <h:outputText id="totalPrice" value="#{myBean.totalPrice}">
        <f:convertNumber type="currency" />
    </h:outputText>
</h:panelGrid> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T13:32:24.803

您可能需要使用包装器将逻辑放入包装的 getTotalPrice 方法中，而不是直接使用实体。这样，您就有了更好的逻辑/表示分离，在这种情况下，您将能够向 getTotalPrice 添加舍入逻辑（大多数情况下，IEEE 浮动数学不适合与金钱相关的数学......）

# javascript - setAutoGrow() 只适用于应用程序的第一页，有什么问题？

> ID：11483869
> 
> 赞同：-1
> 
> 时间：2012-07-14T12:47:32.940
> 
> 标签：javascript, facebook

在我的 facebook 应用程序中，我使用 setAutoGrow() 使页面适合内容并且它可以工作，但仅在第一页上，当我转到另一个页面时，它会从应用程序开始获取主页的高度并且不适合新内容。怎么了？

我正在这样做

```
<body>
<div id="fb-root"></div>
<script>
   window.fbAsyncInit = function() {
      FB.init({
      appId   : '<?php echo $facebook->getAppId(); ?>',
      channelUrl : '//autosn.net/channel.php', 
      cookie  : true, 
      xfbml   : true, 
      oauth: true
   });

   FB.Canvas.setAutoGrow();
   ... 
```

您可以在[http://apps.facebook.com/auto_social/](http://apps.facebook.com/auto_social/)上查看此问题，只需从主页面转到任何其他页面，您就会在主页面左侧的内容下看到一个巨大的空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:56:39.503

# xna - 如何检查玩家是否在具有远见物理的身体上点击？

> ID：11483875
> 
> 赞同：0
> 
> 时间：2012-07-14T12:48:50.147
> 
> 标签：xna, farseer

我需要知道如何在玩家/用户点击特定身体时检查 Farseer Physics，这可能吗？

我必须编写自己的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:17:55.880

使用`Mouse.GetState()`并将此帧的鼠标状态与前一帧的状态（您必须存储它）进行比较，以确定单击的时间和位置。这应该是微不足道的，所以我不会更详细地介绍（如果您需要它，请专门询问有关 XNA 而不是 Farseer 的附加问题）。

将鼠标位置设置为 a`Vector2`后，将其传递给`World.TestFixture(Vector2 point)`将返回 a 的位置`Fixture`。`TestPointAll`（如果您想处理光标下有多个灯具，您也可以使用它来获取灯具列表）。

如果你想要一个`Body`，使用这个`Fixture.Body`属性。

# c - 通过 shell-wrapper 脚本到 C 程序的带有空格的命令行参数

> ID：11483877
> 
> 赞同：3
> 
> 时间：2012-07-14T12:49:11.360
> 
> 标签：c, command-line-arguments

如何让我的程序接受带空格的命令行参数？

**另一个编辑**：我刚刚认识到该程序是从一个 shell 脚本启动的，该脚本为程序的执行设置了环境。由于有一些外部库，`LD_LIBRARY_PATH`设置为当前工作目录：

```
#!/bin/sh

ARCH=`uname -m`
export LD_LIBRARY_PATH=".:lib/magic/linux-${ARCH}"

./data_sniffer.bin $*

exit $? 
```

这个问题肯定与`$*`. 是否有任何解决方案可以正确转发命令行参数？

这是来自的代码片段`main()`：

```
if (stat(argv[1], &lStat) != 0)
{   
    fprintf(stderr, "Cannot stat(2) given file: %s. \n", argv[1]);
    return EXIT_FAILURE;
} 
```

我正在使用以下参数启动我的程序：

```
./data_sniffer /mnt/pod/movies/some\ test\ movie\ file.avi 
```

生成的错误消息如下所示：Cannot stat(2) given file: /mnt/pod/movies/some.

有人知道这里有什么问题吗？我认为我不是第一个遇到这个问题的人（虽然，我在这里找不到相关的问题）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T12:54:18.630

在包装脚本中替换使用`./data_sniffer.bin $*`with`./data_sniffer.bin "$@"`并且参数应该以正确的方式转发。

更多关于两者的区别`$*`，可以在[这里](http://unixhelp.ed.ac.uk/scrpt/scrpt2.2.2.html)找到。`$@``"$@"`

* * *

> ^(这个问题的作者完全改变了它，并提出了有关此事的更多信息，我会让所有已经写好的东西都保持不变，但请记住这是在他/她最后一次编辑之前写的。)

* * *

### 关于`argv`..

作为开发人员，它对你的要求并不高，我很想（而且更真实）说它不需要**你**。

传递给应用程序的参数由执行二进制文件的 shell 处理，在下面执行此操作肯定会按照您希望的方式工作（尽管我觉得您声称当前的 shell 不能正确处理很奇怪`'\ '`）：

```
./data_sniffer '/mnt/pod/movies/some test movie file.avi'
./data_sniffer /mnt/pod/movies/some\ test\ movie\ file.avi

# there should be no difference between the two 
```

* * *

### 我的建议

*   您是否尝试过`printf ("argv[1]: %s\n", argv[1]);`在 main 的开头做来验证它的内容？

*   您确定使用正确的*命令行*参数调用正确的二进制文件吗？

可悲的是，写的唯一合理的事情是你做错了什么。但是，如果没有有关该问题的进一步信息，我们将无法回答。

^(我发现很难相信你的*shell*中有一个错误，即使这当然是可能的——我对此表示怀疑。)

* * *

*将命令行*解析为`argv`开发人员不必担心，您不必为二进制文件本身实现强制功能来处理其参数中的空格。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T13:35:19.013

在我的 CentOS 5.3 中，我做了一个测试。

```
#include <stdio.h>
int main(int argc, char** argv)
{
        printf("argc=%d\n", argc);
        int i = 0;
        for(i = 0; i<argc; i++)
        {   
                printf("argv[%d]=%s\n", i, argv[i]);
        }   
        return 0;
} 
```

然后使用不同的参数运行它：

```
[root@dw examples]# ./a.out a b c
argc=4
argv[0]=./a.out
argv[1]=a
argv[2]=b
argv[3]=c
[root@dw examples]# ./a.out 'a b c'
argc=2
argv[0]=./a.out
argv[1]=a b c
[root@dw examples]# ./a.out a\ b\ c
argc=2
argv[0]=./a.out
argv[1]=a b c
[root@dw examples]# ./a.out "a b c"
argc=2
argv[0]=./a.out
argv[1]=a b c 
```

所以看起来像 (1) 'ab c' ; (2) a\b\c；(3) "ab c" 都在工作。

# java - 具有空默认选定项的微调器

> ID：11483883
> 
> 赞同：10
> 
> 时间：2012-07-14T12:49:52.060
> 
> 标签：java, android, android-spinner

我正在尝试使用默认的空选定项创建一个微调器，但它显示微调器选择中的第一个项目。如果我将空值添加到我的字符串，这是微调器中的选择源，那么在打开微调器后会显示空行。我该怎么做？这是我正在使用的代码：

```
 String[] ch = {"Session1", "Session2", "Session3"};
  Spinner sp = (Spinner)findViewById(R.id.spinner1);
  TextView sess_name = findViewById(R.id.sessname);
  ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,ch);
  sp.setAdapter(adapter);

  adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

  sp.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener({
      @Override
      public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
          int index = arg0.getSelectedItemPosition();
          sess_name.setText(ch[index]);

          Toast.makeText(getBaseContext(), "You have selected item : " + ch[index], Toast.LENGTH_SHORT).show();
      } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-15T06:06:48.760

巴拉克的解决方案有问题。当您选择第一项时，Spinner 不会调用 OnItemSelectedListener`onItemSelected()`并刷新空内容，因为之前的位置和选择位置都是 0。

首先在字符串数组的开头放置一个空字符串：

```
String[] test = {" ", "one", "two", "three"}; 
```

第二次构建适配器，不要修改`getView()`，修改`getDropDownView()`。将空视图的高度设置为 1px。

```
public class MyArrayAdapter extends ArrayAdapter<String> {

    private static final int ITEM_HEIGHT = ViewGroup.LayoutParams.WRAP_CONTENT;

    private int textViewResourceId;

    public MyArrayAdapter(Context context,
                          int textViewResourceId,
                          String[] objects) {
        super(context, textViewResourceId, objects);
        this.textViewResourceId = textViewResourceId;
    }

    @Override
    public View getDropDownView(int position, View convertView, @NonNull ViewGroup parent) {
        TextView textView;

        if (convertView == null) {
            textView = (TextView) LayoutInflater.from(getContext())
                   .inflate(textViewResourceId, parent, false);
        } else {
            textView = (TextView) convertView;
        }

        textView.setText(getItem(position));
        if (position == 0) {
            ViewGroup.LayoutParams layoutParams = textView.getLayoutParams();
            layoutParams.height = 1;
            textView.setLayoutParams(layoutParams);
        } else {
            ViewGroup.LayoutParams layoutParams = textView.getLayoutParams();
            layoutParams.height = ITEM_HEIGHT;
            textView.setLayoutParams(layoutParams);
        }

        return textView;
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-30T16:42:17.633

我参加聚会有点晚了，但这是我为解决这个问题所做的。
如果用户取消选择初始项目，则微调器将保留初始空状态。一旦选择了初始项目，它就像“正常”一样
在 2.3.3+ 上工作，我没有在 2.2 及以下版本上测试过

首先，创建一个适配器类...

```
public class EmptyFirstItemAdapter extends ArrayAdapter<String>{
    //Track the removal of the empty item
    private boolean emptyRemoved = false;

    /** Adjust the constructor(s) to fit your purposes. */
    public EmptyFirstitemAdapter(Context context, List<String> objects) {
        super(context, android.R.layout.simple_spinner_item, objects);
        setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    }

    @Override
    public int getCount() {
        //Adjust the count based on the removal of the empty item
        if(emptyRemoved){
            return super.getCount();            
        }
        return super.getCount()-1;            
    }

    @Override
    public View getDropDownView(int position, View convertView, ViewGroup parent) {
        if(!emptyRemoved){
            // Remove the empty item the first time the dropdown is displayed.
            emptyRemoved = true;
            // Set to false to prevent auto-selecting the first item after removal.
            setNotifyOnChange(false);
            remove(getItem(0));
            // Set it back to true for future changes.
            setNotifyOnChange(true);
        }
        return super.getDropDownView(position, convertView, parent);
    }

    @Override
    public long getItemId(int position) {
        // Adjust the id after removal to keep the id's the same as pre-removal.
        if(emptyRemoved){
            return position +1;
        }
        return position;
    }

} 
```

这是我在strings.xml中使用的字符串数组

```
<string-array name="my_items">
    <item></item>
    <item>Item 1</item>
    <item>Item 2</item>
</string-array> 
```

接下来，将 OnItemSelectedListener 添加到您的 Spinner...

```
mSpinner = (Spinner) mRootView.findViewById(R.id.spinner);
String[] opts = getResources().getStringArray(R.array.my_items);
//DO NOT set the entries in XML OR use an array directly, the adapter will get an immutable List.
List<String> vals = new ArrayList<String>(Arrays.asList(opts));
final EmptyFirstitemAdapter adapter = new EmptyFirstitemAdapter(getActivity(), vals);
mSpinner.setAdapter(adapter);
mSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {
    //Track that we have updated after removing the empty item
    private boolean mInitialized = false;
    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
        if(!mInitialized && position == 0 && id == 1){
            // User selected the 1st item after the 'empty' item was initially removed,
            // update the data set to compensate for the removed item.
            mInitialized = true;
            adapter.notifyDataSetChanged();
        }
    }

    @Override
    public void onNothingSelected(AdapterView<?> parent) {
        // Nothing to do
    }
}); 
```

这可能不是一个“完美”的解决方案，但我希望它对某人有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T13:47:08.453

经过一番思考，我相信我已经想出了实现您目标的方法。它涉及创建自定义适配器并设置/维护标志以确定是否选择了微调器中的项目。使用此方法，您无需创建/使用错误数据（您的空字符串）。

基本上，适配器`getView`方法为关闭的微调器设置文本。因此，如果您覆盖它并在那里设置条件，您可以在启动时有一个空白字段，并且在您做出选择后，它会出现在关闭的微调框中。唯一需要记住的是，当您需要查看关闭的微调器中的值时，您需要设置标志。

我创建了一个小示例程序（下面的代码）。

请注意，我只添加了示例所需的单个构造函数。您可以实现所有标准的 ArrayAdapter 构造函数，也可以只实现您需要的那些。

**SpinnerTest.java**

```
public class SpinnerTestActivity extends Activity {
    private String[] planets = { "Mercury", "Venus", "Earth", "Mars",
            "Jupiter", "Saturn", "Uranus", "Neptune" };
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Spinner spinner = (Spinner) findViewById(R.id.spinner);
        CustomAdapter adapter = new CustomAdapter(this,              // Use our custom adapter
                android.R.layout.simple_spinner_item, planets);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(adapter);
        spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
            @Override
            public void onNothingSelected(AdapterView<?> parent) {
            }
            @Override
            public void onItemSelected(AdapterView<?> parent, View view,
                    int pos, long id) {
                CustomAdapter.flag = true;                       // Set adapter flag that something
                has been chosen
            }
        });
    }
} 
```

**CustomAdapter.java**

```
public class CustomAdapter extends ArrayAdapter {
    private Context context;
    private int textViewResourceId;
    private String[] objects;
    public static boolean flag = false;
    public CustomAdapter(Context context, int textViewResourceId,
            String[] objects) {
        super(context, textViewResourceId, objects);
        this.context = context;
        this.textViewResourceId = textViewResourceId;
        this.objects = objects;
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null)
            convertView = View.inflate(context, textViewResourceId, null);
        if (flag != false) {
            TextView tv = (TextView) convertView;
            tv.setText(objects[position]);
        }
        return convertView;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-07T20:30:28.963

这是我使用的。它以通用方式正确处理空（空）选择。它适用于任何模型类 T，只要类 T 正确实现`toString()`，以显示微调器中显示的文本，并且`equals()`，以便可以通过引用而不是位置索引来选择项目。

```
package com.10xdev.android.components;

import android.content.Context;
import android.graphics.Color;
import android.util.AttributeSet;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.TextView;

import java.util.ArrayList;
import java.util.List;

/**
 * A spinner where no selection is possible, and other enhancements.
 * requires model class to properly implement Object.equals, with semantic comparaison (such as id comparaison)
 * and a proper toString(), whose result will be displayed in the spinner
 *
 * @author tony.benbrahim
 */

public class EnhancedSpinner<T> extends Spinner {
    private final EnhanceArraySpinnerAdapter<T> spinnerAdapter;
    private final List<T> items = new ArrayList<>();
    private T selected = null;

    public EnhancedSpinner(final Context context, final AttributeSet attributeSet) {
        super(context, attributeSet);
        spinnerAdapter = new EnhanceArraySpinnerAdapter<>(context, items);
        setAdapter(spinnerAdapter);
    }

    /**
     * sets the items to be displayed
     *
     * @param items
     */
    public void setItems(final List<T> items) {
        this.items.clear();
        //very iffy, but works because of type erasure
        this.items.add((T) "");
        this.items.addAll(items);
        spinnerAdapter.notifyDataSetChanged();
        updateSelected();
    }

    /**
     * set the selected item. this may be called before or after setting items
     *
     * @param item the item to select, or null to clear the selection
     */
    public void setSelected(final T item) {
        this.selected = item;
        updateSelected();
    }

    /**
     * gets the selected item, or null if no item is selected
     *
     * @return
     */
    @Override
    public T getSelectedItem() {
        return getSelectedItemPosition() != 0 ? (T) super.getSelectedItem() : null;
    }

    /**
     * set the error message for the select
     *
     * @param errorMessage
     */
    public void setError(final String errorMessage) {
        final TextView errorText = (TextView) getSelectedView();
        errorText.setError("error");
        errorText.setTextColor(Color.RED);
        errorText.setText(errorMessage);
    }

    private void updateSelected() {
        if (selected == null) {
            setSelection(0);
        } else {
            for (int i = 1; i < items.size(); ++i) {
                if (selected.equals(items.get(i))) {
                    setSelection(i);
                    break;
                }
            }
        }
    }

    private class EnhanceArraySpinnerAdapter<T> extends ArrayAdapter<T> {
        private final LayoutInflater inflater;

        public EnhanceArraySpinnerAdapter(final Context context, final List<T> objects) {
            super(context, android.R.layout.simple_spinner_item, objects);
            inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        }

        @Override
        public View getDropDownView(final int position, final View convertView, final ViewGroup parent) {
            final TextView textView = convertView != null ? (TextView) convertView
                    : (TextView) inflater.inflate(android.R.layout.simple_spinner_item, parent, false);
            final Object item = getItem(position);
            textView.setText(item.toString());
            final ViewGroup.LayoutParams layoutParams = textView.getLayoutParams();
            layoutParams.height = position == 0 ? 1 : LayoutParams.WRAP_CONTENT;
            textView.setLayoutParams(layoutParams);
            return textView;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-14T13:09:50.770

您必须将微调器的第一个元素放置为空，或者使用`string`指示未选择任何内容，如下所示：

```
String[] ch= {"","Session1", "Session2", "Session3"}; 
```

或者

```
String[] ch= {"Nothing selected", "Session1", "Session2", "Session3"}; 
```

希望有所帮助

# jquery - jQuery曲线路径动画，多路径

> ID：11483886
> 
> 赞同：1
> 
> 时间：2012-07-14T12:50:20.143
> 
> 标签：jquery

美好的一天，我今天看到了这个插件（http://phrogz.net/SVG/animation_on_a_curve.html）这是 phrogz.net 的一个很棒的插件，由 gavin kistner 完成，我想知道是否有任何方法可以使用多个弯曲路径一个页面并将它们应用于一个对象，以便在第一个对象完成后继续它在另一条路径中的旅程。如果你能帮我添加缓动也很好。

我正在尝试为飞机制作动画，这是我使用的代码：

```
var curve = new CurveAnimator(
  [0,400], [670,410],
  [34,45], [250,-37]
);

var o = document.getElementById('plane');
o.style.position = 'absolute';

curve.animate(10, function(point,angle){
easing: "linear"
  o.style.left = point.x+"px";
  o.style.top  = point.y+"px";
  o.style.transform =
    o.style.webkitTransform =
    o.style.MozTransform =
    "rotate("+angle+"deg)";
    }); 
```

# android - 在具有网格视图的寻呼机中回收视图是否有意义？

> ID：11483887
> 
> 赞同：0
> 
> 时间：2012-07-14T12:50:20.827
> 
> 标签：android, gridview, recycle

我想知道在这种情况下使用回收功能是否有意义：ViewPager，其中每个页面都是一个带有 GridView 的片段，它适合页面（所有项目都是可见的，没有滚动）。

问题的原因是我想在 2 个不同（相似）的 XML 之间切换以膨胀网格视图中的项目。而且，使用回收，这可能是不可能的。但我认为在这种情况下不需要回收。

编辑：为了清楚起见，我的意思是回收网格项目。有关视图寻呼机的信息只是给出使用它们的上下文。对于回收，我的意思是在方法 getView 中使用 convertView 进行回收。`if (convertView) == null {inflate}`等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:14:27.207

使用 ViewPager 时，您实现了 PagerAdapter。在这种情况下，由于您想使用片段，您将扩展 FragmentStatePagerAdapter。我将实现抽象的方法（尽管查看 FragmentStatePagerAdapter 的源代码，可能还有一些方法需要重写，因为不受支持的异常，如destroyItem）并将其保留。让 PagerAdapter 担心回收视图，这是它的工作。

除非存在性能问题（例如您在每个页面中加载大量图像），否则我不会考虑自己回收视图。如果您确实达到了这一点，您还需要考虑 destroyItem() 会起作用。

# doctrine-orm - 如何在 Native Query COLUMNS 上使用 Doctrine2 类型转换

> ID：11483888
> 
> 赞同：5
> 
> 时间：2012-07-14T12:50:23.827
> 
> 标签：doctrine-orm, type-conversion, native-sql

在这方面找不到任何东西——似乎它应该是直截了当的。

因此，Doctrine2 文档给出的绑定参数类型转换的示例如下所示：

```
$date = new \DateTime("2011-03-05 14:00:21");
$stmt = $conn->prepare("SELECT * FROM articles WHERE publish_date > ?");
$stmt->bindValue(1, $date, "datetime");
$stmt->execute(); 
```

我想要做的是为其中一列指定类型转换，但在文档或 StackOverflow 上我找不到任何东西。这可能看起来像一个伪示例：

```
$stmt = $conn -> prepare("SELECT datetime FROM articles WHERE id = 1");
$stmt -> setType(0, "date_type"); // 0 being the column position, "date_type" being the PHP type to convert to 
```

如果有人知道如何做到这一点（这是 SQL 而不是 DQL），我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T18:16:10.637

这不是在 DBAL 级别起作用的东西。如果您在 ORM 中使用 NativeSQL 查询，则可以通过使用模式并将一些获取的字段映射到实体来通过水合（请参阅[Doctrine ORM 文档中的 NativeSQL 部分](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/native-sql.html#scalar-results)）获得这种转换。`HYDRATE_ARRAY`最快的解决方案（如果您不打算使用 ORM）是遍历结果并通过访问手动应用类型转换`Doctrine\DBAL\Types\Type::getType($someType)->convertToPhpValue($fetchedValue)`。能够指定第三个参数来说明在`Doctrine\ORM\Query\ResultSetMapping#addScalarResult`.

# c++ - 练习模板返回错误

> ID：11483893
> 
> 赞同：0
> 
> 时间：2012-07-14T12:51:13.027
> 
> 标签：c++

该代码正在其中工作，`couts` `haha`但它会导致错误，因为它说：

`Process returned -1073741819 <0xC0000005>`

并弹出一个窗口，告诉我是否要发送错误消息。为什么是这样？

```
#include <iostream>

using namespace std;

template <class A>

    A print( A a ) {
        cout << a;
    }

template <class T>

    class David {
        T a;
        public:
            David( T something ) : a( something ) {}
            void laugh() {
                print(a);
            }
    };

int main() {

    David <string> Do("Hahaha");

    Do.laugh();

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T12:53:21.767

```
template <class A>

    A print( A a ) {
        cout << a;
    } 
```

这是不正确的。函数中没有返回值，因此编译器会从堆栈中返回一些垃圾。我认为更好的是这个宣言

```
template<class A>
void print(const A& a) { cout << a; } 
```

# php - 如何在 php 中替换一些匹配的模板标签

> ID：11483898
> 
> 赞同：0
> 
> 时间：2012-07-14T12:51:36.183
> 
> 标签：php, templates, replace

我有这个模板文件作为 HTML 并愿意`[**title**]`用正确的内容替换所有匹配的标签，例如等，然后作为 PHP 文件写入磁盘。我已经进行了一系列搜索，但似乎没有一个符合我的目的。下面是 HTML 代码。问题是它并不总是替换正确的标签？

```
<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>[**title**]</title>
  </head>
  <body>
  <!--.wrap-->
  <div id="wrap">
  <!--.banner-->
  <div class="banner">[**banner**]</div>
  <!--/.banner-->

  <div class="list">
    <ul>[**list**]</ul>
  </div>

  <!--.content-->
  <div class="content">[**content**]</div>
  <!--/.content-->

  <!--.footer-->
  <div class="footer">[**footer**]</div>
  <!--/.footer-->

  </div>
  <!--/.wrap-->

</body>
</html> 
```

这是我到目前为止所尝试的。

```
<?php
    $search = array('[**title**]', '[**banner**]', '[**list**]'); // and so on...
    $replace = array(
        'title' => 'Hello World', 
        'list' => '<li>Step 1</li><li>Step 2</li>', // an so on
    ); 

    $template = 'template.html';
    $raw = file_get_contents($template);
    $output = str_replace($search, $replace, $raw);
    $file = 'template.php';
    $file = file_put_contents($file, $output);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:15:03.040

您的代码中的问题是您正在使用`$replace`数组中的键。`str_replace`只是根据数组中的位置替换，所以键什么都不做。

因此，您将其`[**banner**]`作为 中的第二项`$search`，因此它将用替换中的第二项替换它，即`<li>Step 1</li><li>Step 2</li>.`

如果您想通过键自动执行此操作（因此`[**foo**]`始终替换为`$replace['foo']`，您可能想查看使用正则表达式。我敲了一段快速的代码，在我测试它时有效，但可能存在错误：

```
<?php
function replace_callback($matches) {
        $replace = array(
            'title' => 'Hello World', 
            'list' => '<li>Step 1</li><li>Step 2</li>', // an so on
        );

    if ( array_key_exists($matches[1], $replace)) {
        return $replace[$matches[1]];
    } else {
        return '';
    }
}

$template = 'template.html';
$raw = file_get_contents($template);

$output = preg_replace_callback("/\[\*\*([a-z]+)\*\*\]/", 'replace_callback', $raw);

$file = 'template.php';
$file = file_put_contents($file, $output); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T13:13:24.093

str_replace 是正确的功能。但是`$replace`数组必须将值保存在相同的平面结构中，例如`$search`

所以：

```
$replace = array('Hello World', '<li>Step 1</li><li>Step 2</li>', // an so on    ); 
```

# asp.net - Asp.net 只允许通过路由访问？

> ID：11483899
> 
> 赞同：1
> 
> 时间：2012-07-14T12:51:41.467
> 
> 标签：asp.net, url-routing

我正在使用 URL 重写来制作用户友好的 URL。所以`www.mysite.som/search`被`www.mysite/search.aspx`正确处理。但我还想要一件事。我想阻止直接访问我的页面`search.aspx`。因此，如果有人输入 www.mysite.com/search.aspx，他应该被重定向到`www.mysite.com/search`。

我尝试了什么？

```
<rewrite>
<rule name="Redirect to friendly" stopProcessing="true">
  <match url="^(.*)\.aspx$" />
  <action type="Redirect" url="{R:1}" />
</rule>
</rewrite> 
```

但它不起作用。

# javascript - appendChild 不正确

> ID：11483900
> 
> 赞同：1
> 
> 时间：2012-07-14T12:51:43.057
> 
> 标签：javascript, ajax

如果我有 ：

```
<div id="mc"></div> 
```

和以下**ajax.responseText**：

```
<div id="mc">
  <div>1</div>
  <div>2</div>
  <div>3</div>
  <div>4</div>
  <div>5</div>
  <div>6</div>
</div> 
```

最后是我的 Javascript 代码：

```
var div = document.createElement("div");
div.innerHTML = ajax.responseText;
var divChildren = div.children;
for(var i = 0; i < divChildren.length; i++) {
  var root = divChildren[i];
  var children = root.children;
  var documentRoot = document.getElementById(root.id||"$");
  if(documentRoot) {
    var node = null;
    for(var j = 0; j < children.length; j++) {
      node = children[j];
      documentRoot.appendChild(node);
    }
  } 
} 
```

**为什么结果是？：**

```
<div id="mc">
  <div>1</div>
  <div>3</div>
  <div>5</div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T12:58:43.317

这是因为`children`它是一个活动列表，这意味着当您将其中一个元素附加到其他地方时，它将从列表中删除。这会扰乱前向迭代，除非您每次删除索引时都减少索引。

这是两个示例解决方案...

你会减`j`...

```
for(var j = 0; j < children.length; j++) {
  node = children[j];
  j--;
  documentRoot.appendChild(node);
} 
```

但是由于您要附加所有元素，因此这没有多大意义，因为只是在and`j`之间来回弹跳。`0``-1`

因为您要添加所有元素，所以只要索引处有东西，您就可以简单地运行循环`0`...

```
while(children[0]) {
  node = children[0];
  documentRoot.appendChild(node);
} 
```

# arpack - arpack++ 错误：矩阵数据包含不一致

> ID：11483901
> 
> 赞同：0
> 
> 时间：2012-07-14T12:51:43.900
> 
> 标签：arpack

我从“arpackpp.doc”中输入了示例代码，并得到了一个运行时错误，如下所示： ![在此处输入图像描述](../Images/6d581888699ce44e9e719c4d23b4a489.png)

这是我的代码： ![在此处输入图像描述](../Images/05c4cc89891b75fd5faea62e7459f52a.png)

矩阵是 ![在此处输入图像描述](../Images/2ba0200c6d345e9a4ad37b7e89c6aa06.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:57:49.750

好吧，我回答我的问题... irow 的元素，它是指向 nzval 中包含的非零元素的行索引数组的指针，应该从 0 而不是 1 开始。

# c# - 在数据网格视图中编辑 c#.net

> ID：11483902
> 
> 赞同：0
> 
> 时间：2012-07-14T12:51:47.227
> 
> 标签：c#, winforms

我无法在数据网格视图中编辑未绑定列的单元格值。我还检查了 gridview 和 individual column 的 readonly 属性。还有我的网格视图在“EditOnKeystrokeOrF2”中的编辑模式。有没有人知道这个问题...

我在网格中有 Bound 和 Unbound Columns 。

# java - Android OCR tesseract：使用 Pixa 对象中的数据显示边界框

> ID：11483903
> 
> 赞同：8
> 
> 时间：2012-07-14T12:51:47.927
> 
> 标签：java, android, ocr, preview, tesseract

我目前正在使用 android 上的 OCR。因此，我编写了一个带有相机预览的小应用程序，现在我正在从我的 onPreviewFrame 方法中提供 tessearact 工具（tess-two）图像。现在我想在我的相机预览上显示来自 OCR 的边界矩形。TessBaseAPI 提供了返回字符/单词边界框的方法。返回对象的类型是 Pixa，就像在 tess-two 提供的 leptonica 库中一样。

所以我的问题是：**如何从 TessBaseAPI 的 getCharacters() 或 getWords() 返回的 Pixa 对象中获取可用坐标，以便在相机预览上绘制边界框？**

[BaseAPI 中的 GetCharacters() 和 getWords()](https://github.com/rmtheis/tess-two/blob/master/tess-two/src/com/googlecode/tesseract/android/TessBaseAPI.java#L438)

[leptonicas Pixa 类](https://github.com/rmtheis/tess-two/blob/master/tess-two/src/com/googlecode/leptonica/android/Pixa.java)

*重要的：*

因为预览仅支持的图像格式是 YUV N21 并且据我所阅读的 tess-API 需要 ARGB_8888 位图，所以在我将位图提供给 TessAPI 之前，我的 onPreviewFrame 方法中有以下解决方法：（我也在旋转顺时针旋转 90 度，因为我在纵向使用相机，但相机预览帧是横向的）

```
//byte[] bmpdata <- the image in a byte array (NV21 Imageformat) in onPreviewFrame 
YuvImage yuvimage = new YuvImage(bmpdata,ImageFormat.NV21,width,height,null); 

ByteArrayOutputStream outStream = new ByteArrayOutputStream();
Rect rect = new Rect(0, 0, width, height);
yuvimage.compressToJpeg(rect, 100, outStream);

Bitmap bmp = BitmapFactory.decodeByteArray(outStream.toByteArray(),0,outStream.size());

Matrix mtx = new Matrix();
mtx.preRotate(90);
bmp = Bitmap.createBitmap(bmp, 0, 0, bmp.getWidth(), bmp.getHeight(), mtx, false);
bmp = bmp.copy(Bitmap.Config.ARGB_8888, true);

TessTBaseApi.setImage(bmp); 
```

所以基本上，我将从相机获得的 NV21 字节 [] 压缩为 YuvImage，然后压缩为 jpeg，然后从那里压缩为位图。我在网上搜索了很多关于如何从 NV21 数组中获取位图/jpeg 的解决方案，这是我找到的最简单的方法。该位图将被提供给 tesseract 工具 OCR。这就引出了我的第二个问题：

**在这些压缩和 90 度旋转之后，我如何找到必须在屏幕上绘制框的位置？**（相对于压缩和旋转之前）

这可能不是为 OCR 提供实时帧的最佳甚至不是好方法，我非常感谢评论、其他解决方案或优化方式的建议。

两天前我开始了这个项目，并且是 android 和 ocr 编程的初学者。在这两天里，这个页面帮助了我很多，并且很好地回答了我迄今为止的问题，所以谢谢你，并提前感谢你帮助我解决我目前的问题。如果您想查看更多代码或有任何疑问，我将提供并很乐意回答我能回答的任何问题。

问候

您可以通过 Pixa 类和 GetCharacters() 链接在 github 上浏览整个 API 源代码，不能插入更多超链接。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-14T18:36:38.460

`TessTBaseApi.getWords().getBoxRects()`将返回一个边界框[Rects](http://developer.android.com/reference/android/graphics/Rect.html)的 ArrayList，其坐标相对于您的`bmp`位图。

# list - Exchange 传输代理：如何检索 Exchange 分发列表的成员？

> ID：11483906
> 
> 赞同：0
> 
> 时间：2012-07-14T12:52:08.397
> 
> 标签：list, exchange-server, distribution, members

我必须在 C# 中为 Exchange 2007 编写一个自定义传输代理，以检查发送邮件的发件人是否属于特定的分发列表。

我的代理运行良好，但我现在需要做的就是如何检索分发列表的成员？？

我怎样才能做到这一点 ？

提前谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:51:56.813

这是我为了检查用户是否是 DL 成员所做的：

```
RoutingAddress rGroupe = new RoutingAddress("mail of the DL");

foreach (EnvelopeRecipient entry in e.MailItem.Recipients)
{
   RoutingAddress rRecipient = new RoutingAddress(entry.Address.ToString());

   if (addressBook.IsMemberOf(rRecipient, rGroupe))
   {
      // ok
   }
} 
```

# gis - 将 .dat 文件转换为 .dta、.shp、.bdf 或 .csv

> ID：11483920
> 
> 赞同：7
> 
> 时间：2012-07-14T12:54:04.403
> 
> 标签：gis, dta

我从 USGS 网站下载了 .dat 格式的空间数据，我也无法在 textedit 中读取 - 它只是显示“../ofr041189it03/vat.adf”。我熟悉 STATA、ArcGIS 和 GeoDA，所以我希望将其转换为任何这些程序都可以读取的类型（最好是 STATA），但不知道如何。有任何想法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-03T10:15:03.730

打开一个新的空白 Excel 文件

在 Excel 中

1.  转到**数据**选项卡
2.  **从文本中**选择
***   选择要打开的 .dat 文件（注意：在下拉框中选择“所有文件”）*   点击导入*   检查分隔并单击下一步*   取消选择**选项卡**并选择**其他**并给出“|”（制表符）然后单击下一步*   点击完成和确定**

# c# - 如何实现二元方程的高斯消元

> ID：11483925
> 
> 赞同：2
> 
> 时间：2012-07-14T12:54:38.083
> 
> 标签：c#, math, binary

我有这个方程组
1=x⊕y⊕z
1=x⊕y⊕w
0=x⊕w⊕z
1=w⊕y⊕z

我正在尝试实施高斯消元法来解决这个系统，如此[处](http://social.msdn.microsoft.com/Forums/en/Vsexpressvcs/thread/70408584-668d-49a0-b179-fabf101e71e9)所述，用 XOR 替换除法，减法和乘法，但它给出了我的错误答案..正确答案是 (x,y,z,w)=(0,1,0,0)
我做错了什么？

```
public static void ComputeCoefficents(byte[,] X, byte[] Y)
    {
        int I, J, K, K1, N;
        N = Y.Length;
        for (K = 0; K < N; K++)
        {
            K1 = K + 1;
            for (I = K; I < N; I++)
            {
                if (X[I, K] != 0)
                {
                    for (J = K1; J < N; J++)
                    {
                        X[I, J] /= X[I, K];
                    }
                    //Y[I] /= X[I, K];
                    Y[I] ^= X[I, K];

                }
            }
            for (I = K1; I < N; I++)
            {
                if (X[I, K] != 0)
                {
                    for (J = K1; J < N; J++)
                    {
                        X[I, J] ^= X[K, J];
                    }
                    Y[I] ^= Y[K];
                }
            }
        }
        for (I = N - 2; I >= 0; I--)
        {
            for (J = N - 1; J >= I + 1; J--)
            {
                //Y[I] -= AndOperation(X[I, J], Y[J]);
                Y[I] ^= (byte)(X[I, J]* Y[J]);

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T07:06:24.617

我认为您正在尝试为此应用高斯消除模型 2。

一般来说，你可以做高斯消除 mod k，如果你的方程是形式

```
a_1 * x + b_1 * y + c_1 * z = d_1
a_2 * x + b_2 * y + c_2 * z = d_2
a_3 * x + b_3 * y + c_3 * z = d_3
a_4 * x + b_4 * y + c_4 * z = d_4 
```

而在 Z2 * is`and`和 + is 中`xor`，您可以使用高斯消元法求解形式为

```
x (xor) y (xor) z   = 1
x (xor) y (xor) w   = 1 
x (xor) z (xor) w   = 0
y (xor) z (xor) w   = 1 
```

让我们手动使用高斯消元来做这个方程。

对应的增广矩阵为：

```
 1 1 1 0 | 1
 1 1 0 1 | 1
 1 0 1 1 | 0
 0 1 1 1 | 1

 1 1 1 0 | 1
 0 0 1 1 | 0   (R2 = R2 + R1)
 0 1 0 1 | 1   (R3 = R3 + R1)
 0 1 1 1 | 1

 1 1 1 0 | 1
 0 1 1 1 | 1   (R2 = R4)
 0 1 0 1 | 1   
 0 0 1 1 | 0   (R4 = R2)

 1 0 0 1 | 0   (R1 = R1 + R2)
 0 1 1 1 | 1   
 0 0 1 0 | 0   (R3 = R3 + R2)   
 0 0 1 1 | 0   

 1 0 0 1 | 0
 0 1 0 1 | 1   (R2 = R2 + R3)  
 0 0 1 0 | 0      
 0 0 0 1 | 0   (R4 = R4 + R3)

 1 0 0 0 | 0   (R1 = R1 + R4)
 0 1 0 0 | 1   (R2 = R2 + R4)  
 0 0 1 0 | 0      
 0 0 0 1 | 0 
```

给出 (x,y,z,w) = (0,1,0,0) 的解。

但这需要行旋转 - 我在您的代码中看不到。

在您的代码中还有一些可能不需要存在的乘法和除法。我希望代码看起来像这样：（您需要修复 TODO）。

```
public static void ComputeCoefficents(byte[,] X, byte[] Y) {
  int I, J, K, K1, N;
  N = Y.Length;

  for (K = 0; K < N; K++) {
    //First ensure that we have a non-zero entry in X[K,K]
    if( X[K,K] == 0 ) {
      for(int i = 0; i<N ; ++i ) { 
        if(X[i,K] != 0 ) {
             for( ... ) //TODO: A loop to swap the entries
             //TODO swap entries in Y too
           }
      }
    if( X[K,K] == 0 ) {
       // TODO: Handle the case where we have a zero column 
       //      - for now we just move on to the next column
       //      - This means we have no solutions or multiple 
       //        solutions
       continue
    }

    // Do full row elimination.
    for( int I = 0; I<N; ++I)
    {
       if( I!=K ){ //Don't self eliminate
         if( X[I,K] ) { 
           for( int J=K; J<N; ++J ) { X[I,J] = X[I,J] ^ X[K,J]; }
           Y[J] = Y[J] ^ Y[K];
         }
       }
    }
  }

  //Now assuming we didnt hit any zero columns Y should be our solution. 
```

}

# php - or的正则表达式

> ID：11483927
> 
> 赞同：-4
> 
> 时间：2012-07-14T12:54:52.170
> 
> 标签：php, regex

我有这些：

```
<!--{tag}--> 
```

和

```
<!--{tag(integer)}--> 
```

和

```
<!--{tag('argument1')}--> 
```

和

```
<!--{tag('argument1', 'argument2',... 'argumentn')}--> 
```

我正在寻找可以处理所有这些的单一模式，我已经尝试过第一个模式，但我不知道第二个模式到第四个：

```
<!--\{tag\}--> 
```

ps: *argument 可以是整数（不带引号）或带单引号（或双引号）的字符串。*模式可以提取参数中的信息

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:10:28.253

它不漂亮，但这就是我想出的：

```
<!--\{tag(?:\(((?:\d+)|(?:'\w+')|(?:(?:['"]?\w+['"]?,\s*){1,}['"]?[\w\d]+['"]?))\))?\}--> 
```

您可以[从正则表达式](http://regexr.com?31hh4)中看到它匹配您的每一个测试用例。

但是，它也将匹配以下测试用例，我将由 OP 来确定如何更正。

```
<!--{tag(argument1, 2)}--> (missing quotes around string arguments)
<!--{tag("argument1', 2)}--> (unmatched single and double quotes)
<!--{tag(2, "arg)}--> (missing unmatched quotes) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T12:57:55.597

```
<!--\{tag(\([0-9]+|'[a-zA-Z0-9]+'\))?\}--> 
```

可能有一些逃逸的问题，我现在真的没有要测试的环境，但是该模式应该可以工作。

您基本上是在寻找标签，它可以选择在括号中包含两个额外的后缀之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T12:58:42.057

使用此正则表达式`<!--\{tag.*?\}-->` 进行提取参数使用`(?<=<!--\{tag).*?(?=\}-->)`

# jquery - 不确定如何使用 1.7 版中的 jQuery “live”

> ID：11483932
> 
> 赞同：7
> 
> 时间：2012-07-14T12:55:41.890
> 
> 标签：jquery

这是一个显示/隐藏文本的小片段。问题是 click 事件不会为“readless”类触发。通常我会使用 jQuery 的“live”功能，但由于它被弃用以支持“on”，我想知道我应该怎么做？

这是一个 jsfiddle：http: [//jsfiddle.net/SSAu2/](http://jsfiddle.net/SSAu2/)

代码：

```
$(document).ready(function(){

    var showHiddenText = function(e){

        e.preventDefault();

        var $this = $(this);
        $this.prev().fadeIn();
        $this.text("less").removeClass("readmore-anchor").addClass("readless-anchor");
    };

    var hideShownText = function(e){

        e.preventDefault();

        var $this = $(this);
        $this.prev().fadeOut();
        $this.text("more").removeClass("readless-anchor").addClass("readmore-anchor");
    };

    $(".readmore").after("<a href='#' class='readmore-anchor'>More</a>");
    $(".readmore-anchor").on("click", showHiddenText);
    $(".readless-anchor").on("click", hideShownText);

});​ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T13:00:01.587

你可以这样尝试：

```
$(document).on("click",".readmore-anchor", showHiddenText);
$(document).on("click",".readless-anchor", hideShownText); 
```

[现场演示](http://jsfiddle.net/ZcK2w/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T13:10:07.583

当 dom 就绪函数执行时，当时不存在任何与选择器“.readless-anchor”匹配的元素。工作方式`.on()`是，它需要一个元素用作父元素。在其后代下发生的所有事件都将冒泡到父级并调用适当的处理程序。这就是为什么 jquery 的主要选择器已经存在很重要的原因。

从[文档](http://api.jquery.com/on/)中，

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。

该`.on()`函数的第二个参数是要过滤的选择器。

在您的情况下，您可以锚定`.on()`并按`body`您的类过滤。

```
$("body").on("click", ".readmore-anchor", null, showHiddenText);
$("body").on("click", ".readless-anchor", null, hideShownText); 
```

这与您可能使用的方法相同`.live()`

```
$("body").find(".readmore-anchor").live('click', showHiddenText); 
```

# java - spring hibernate jsf集成中删除一行

> ID：11483934
> 
> 赞同：0
> 
> 时间：2012-07-14T12:55:43.060
> 
> 标签：java, spring, hibernate, jsf, jakarta-ee

根据我[之前的问题](https://stackoverflow.com/questions/11433666/delete-rows-in-jsf-data-table)，我可以添加客户，但我不能删除一行。 ![在此处输入图像描述](../Images/fd82949febb007091c071599c17f378e.png)

如何编写删除行的正确代码？

我在 Eclipse 中使用 hibernate 4.1.4 和 spring 3.1 以及 jsf 2.0 和 maven 3。

**Customermanagedbean.java**

```
@ManagedBean(name="CustomerMB")
@RequestScoped
public class Customermanagedbean implements Serializable{
@ManagedProperty(value="#{CustomerBoImpl}")
ICustomerBo customerBoImpl;
List<Customer> CustomerList;
public int customerId;
public String name;
public String address;
public String createdDate;

public ICustomerBo getCustomerBoImpl() {
    return customerBoImpl;
}
public void setCustomerBoImpl(ICustomerBo customerBoImpl) {
    this.customerBoImpl = customerBoImpl;
}

public List<Customer> getCustomerList() {
    CustomerList=new ArrayList<Customer>();
    CustomerList.addAll(getCustomerBoImpl().findAllCustomer());

    return CustomerList;
}

public void setCustomerList(List<Customer> customerList) {
    CustomerList = customerList;
}
public int getCustomerId() {
    return customerId;
}
public void setCustomerId(int customerId) {
    this.customerId = customerId;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public String getAddress() {
    return address;
}
public void setAddress(String address) {
    this.address = address;
}
public String getCreatedDate() {
    return createdDate;
}
public void setCreatedDate(String createdDate) {
    this.createdDate = createdDate;
}
//add a new customer data into database
public String addCustomer(){

    Customer cust = new Customer();
    cust.setCustomerId(getCustomerId());
    cust.setName(getName());
    cust.setAddress(getAddress());
cust.setCreatedDate(getCreatedDate());

    getCustomerBoImpl().addCustomer(cust);

    clearForm();

    return "";
}

//clear form values
private void clearForm(){
        setName("");
    setAddress("");
    setCreatedDate("");
}
public String deleteCustomer(Customer customer){
    getCustomerBoImpl().deleteCustomer(customer);

    return "";

}

} 
```

**CustomerDaoImpl.java**

```
public class CustomerDaoImpl implements ICustomerDao{
    private SessionFactory sessionFactory;
    public SessionFactory getSessionFactory() {
        return sessionFactory;}
    public void setSessionFactory(SessionFactory sessionFactory) {
         this.sessionFactory = sessionFactory;
    }

    public void addCustomer(Customer customer){
        sessionFactory.openSession();
        getSessionFactory().getCurrentSession().save(customer);

    }

    public void updateCustomer(Customer customer){
        sessionFactory.openSession();
        getSessionFactory().getCurrentSession().update(customer);
    }

    public void deleteCustomer(Customer customer){
        sessionFactory.openSession();
        getSessionFactory().getCurrentSession().delete(customer);
    }

    public List<Customer> findAllCustomer(){
        sessionFactory.openSession();

        List list = getSessionFactory().getCurrentSession

().createQuery("from Customer").list();
        return list;

    }
} 
```

**CustomerBoImpl.java**

```
@Transactional(readOnly = true)
public class CustomerBoImpl implements ICustomerBo{
 @Autowired
    ICustomerDao customerDaoImpl;

    public ICustomerDao getCustomerDaoImpl() {
        return customerDaoImpl;
    }

    public void setCustomerDaoImpl(ICustomerDao customerDaoImpl) {
        this.customerDaoImpl = customerDaoImpl;
    }

@Transactional(readOnly = false)
@Override
    public void addCustomer(Customer customer){

        getCustomerDaoImpl().addCustomer(customer);

    }

@Transactional(readOnly = false)
@Override
    public void updateCustomer(Customer customer){
        getCustomerDaoImpl().updateCustomer(customer);
    }

@Transactional(readOnly = false)
@Override
    public void deleteCustomer(Customer customer){
        getCustomerDaoImpl().deleteCustomer(customer);
    }

@Override
    public List<Customer> findAllCustomer(){

        return getCustomerDaoImpl().findAllCustomer();
    }
} 
```

**默认.xhtml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      >
    <h:head>
        <h:outputStylesheet library="css" name="table-style.css"  />
    </h:head>

    <h:body>

        <h:dataTable value="#{CustomerMB.getCustomerList()}" var="c"
                styleClass="order-table"
                headerClass="order-table-header"
                rowClasses="order-table-odd-row,order-table-even-row"
            >

            <h:column>
                <f:facet name="header">
                    Customer ID
                </f:facet>
                    #{c.customerId}
            </h:column>

            <h:column>
                <f:facet name="header">
                    Name
                </f:facet>
                    #{c.name}
            </h:column>

            <h:column>
                <f:facet name="header">
                    Address
                </f:facet>
                    #{c.address}
            </h:column>

            <h:column>
                <f:facet name="header">
                    Created Date
                </f:facet>
                    #{c.createdDate}

            </h:column>
             <h:column>

    <f:facet name="header">Action</f:facet>

    <h:commandButton value="Delete" action="#{CustomerMB.deleteCustomer(c)}" />

           </h:column>

        </h:dataTable>

        <h2>Add New Customer</h2>
        <h:form>

            <h:panelGrid columns="3">
                Customer ID : 
                <h:inputText id="customerId" value="#{CustomerMB.customerId}" 
                    size="20" required="true"
                    label="customerId" >
                </h:inputText>

                <h:message for="customerId" style="color:red" />
                Name : 
                <h:inputText id="name" value="#{CustomerMB.name}" 
                    size="20" required="true"
                    label="Name" >
                </h:inputText>

                <h:message for="name" style="color:red" />

                Address : 
                <h:inputTextarea id="address" value="#{CustomerMB.address}" 
                    cols="30" rows="10" required="true"
                    label="Address" >
                </h:inputTextarea>

                <h:message for="address" style="color:red" />

created Date : 
                <h:inputTextarea id="createdDate" value="#{CustomerMB.createdDate}" 
                    size="20" required="true"
                    label="createdDate" >
                </h:inputTextarea>

            </h:panelGrid>

            <h:commandButton value="Submit" action="#{CustomerMB.addCustomer()}" />

        </h:form>

    </h:body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:20:58.693

制作你的 bean`@ViewScoped`而不是`@RequestScoped`.

[你可以在这篇文章](http://balusc.blogspot.com.br/2010/06/benefits-and-pitfalls-of-viewscoped.html)中找到一个非常详尽的解释，但它不起作用的原因是用于请求的数据`h:dataTable`没有通过请求保留。

当您的 bean 是`@RequestScoped`时，每次单击向服务器发出另一个请求的按钮时，都会创建一个新的 bean 实例。然后，您在 delete commandButton 的操作中绑定为参数的值不再存在。

`@ViewScoped`当您在同一个视图中时（当您回发到同一个 XHTML 页面时），使您的 bean将通过请求使其保持活动状态。这样，用作参数的对象仍然存在，并且绑定应该按预期工作。

# google-code - 删除 Google Code Hosting 上的项目并使其成为商业项目

> ID：11483937
> 
> 赞同：3
> 
> 时间：2012-07-14T12:56:20.697
> 
> 标签：google-code

我有一个项目托管在 Google 代码托管服务器上，我想将其删除，以便将其更改为要出售的商业项目。有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T19:33:47.507

要取消发布和安排删除，您必须转到

> 我的个人资料 > “所有者角色”旁边的链接 > 管理选项卡 > 高级（子导航链接）> “删除项目”

只要您是代码版权持有者，您应该没问题。

您应该注意，删除项目的过程需要几天时间。

# c# - 如何从元素属性中获取值，XML序列化

> ID：11483938
> 
> 赞同：0
> 
> 时间：2012-07-14T12:56:34.433
> 
> 标签：c#, xml-serialization

我想从 vimeo xml 中获取一个属性。这里是 xml 文档的结构

```
<?xml version="1.0" encoding="UTF-8" ?> 
- <rsp generated_in="0.6533" stat="ok">
- <videos on_this_page="15" page="1" perpage="15" total="329">
- <video allow_adds="1" embed_privacy="anywhere" id="3475223" is_hd="0" is_transcoding="0" license="0" privacy="anybody">
  <title>AxDroid - Android on Dell Axim x51v</title> 
  <description>This is my first attempt at installing and running Android on my Dell Axim x51v. Touchscreen and buttons are working! For details please visit: http://axdroid.blogspot.com/</description> 
  <upload_date>2009-03-04 16:14:19</upload_date> 
  <modified_date>2012-07-14 07:03:32</modified_date> 
  <number_of_likes>2</number_of_likes> 
  <number_of_plays>43422</number_of_plays> 
  <number_of_comments>1</number_of_comments> 
  <width>320</width> 
  <height>240</height> 
  <duration>320</duration> 
- <owner display_name="Ertan D." id="1387509" is_plus="0" is_pro="0" is_staff="0" profileurl="http://vimeo.com/user1387509" realname="Ertan D." username="user1387509" videosurl="http://vimeo.com/user1387509/videos">
- <portraits>
  <portrait height="30" width="30">http://a.vimeocdn.com/images_v6/portraits/portrait_30_yellow.png</portrait> 
  <portrait height="75" width="75">http://a.vimeocdn.com/images_v6/portraits/portrait_75_yellow.png</portrait> 
  <portrait height="100" width="100">http://a.vimeocdn.com/images_v6/portraits/portrait_100_yellow.png</portrait> 
  <portrait height="300" width="300">http://a.vimeocdn.com/images_v6/portraits/portrait_300_yellow.png</portrait> 
  </portraits>
  </owner>
- <tags>
  <tag author="1387509" id="8397224" normalized="android" url="http://vimeo.com/tag:android">android</tag> 
  <tag author="1387509" id="8397225" normalized="dell" url="http://vimeo.com/tag:dell">dell</tag> 
  <tag author="1387509" id="8397226" normalized="axim" url="http://vimeo.com/tag:axim">axim</tag> 
  <tag author="1387509" id="8397227" normalized="linux" url="http://vimeo.com/tag:linux">linux</tag> 
  <tag author="1387509" id="8397228" normalized="google" url="http://vimeo.com/tag:google">google</tag> 
  <tag author="1387509" id="8397229" normalized="pda" url="http://vimeo.com/tag:pda">pda</tag> 
  <tag author="1387509" id="8397230" normalized="ppc" url="http://vimeo.com/tag:ppc">ppc</tag> 
  </tags>
- <cast>
  <member display_name="Ertan D." id="1387509" role="" username="user1387509" /> 
  </cast>
- <urls>
  <url type="video">http://vimeo.com/3475223</url> 
  </urls>
- <thumbnails>
  <thumbnail height="75" width="100">http://b.vimeocdn.com/ts/347/807/3478071_100.jpg</thumbnail> 
  <thumbnail height="150" width="200">http://b.vimeocdn.com/ts/347/807/3478071_200.jpg</thumbnail> 
  <thumbnail height="480" width="640">http://b.vimeocdn.com/ts/347/807/3478071_640.jpg</thumbnail> 
  </thumbnails>
  </video>
- <video allow_adds="1" embed_privacy="anywhere" id="28665952" is_hd="1" is_transcoding="0" license="0" privacy="anybody">
  <title>Duygu + Ertan Şıkır Şıkır by DÜĞÜNHİKAYEMİZ</title> 
  <description /> 
  <upload_date>2011-09-06 10:54:49</upload_date> 
  <modified_date>2012-07-14 06:41:33</modified_date> 
  <number_of_likes>3</number_of_likes> 
  <number_of_plays>26214</number_of_plays> 
```

我想从所有者元素中获取用户名属性。这是序列化代码。

```
 [XmlTypeAttribute(AnonymousType = true)]
    [XmlRootAttribute(Namespace = "", IsNullable = false, ElementName = "rsp")]
    public partial class VimeoSearchResponse
    {
        private SearchResponseVideosWrapper _videos;
        private string _generated_in;
        private string _stat;

        [XmlElementAttribute("videos", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
        public SearchResponseVideosWrapper videos
        {
            get { return _videos; }
            set { _videos = value; }
        }
        [XmlAttributeAttribute()]
        public string generated_in
        {
            get { return _generated_in; }
            set { _generated_in = value; }
        }
        [XmlAttributeAttribute()]
        public string stat
        {
            get { return _stat; }
            set { _stat = value; }
        }
    }

    [SerializableAttribute]
    [XmlTypeAttribute(AnonymousType = true)]
    public partial class SearchResponseVideosWrapper
    {
        private SearchResponseVideosWrapperVideo[] _video;
        private string _on_this_page;
        private string _page;
        private string _perpage;
        private string _total;

        [XmlElementAttribute("video", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
        public SearchResponseVideosWrapperVideo[] video
        {
            get { return _video; }
            set { _video = value; }
        }

        [XmlAttributeAttribute()]
        public string on_this_page
        {
            get { return _on_this_page; }
            set { _on_this_page = value; }
        }
        [XmlAttributeAttribute()]
        public string page
        {
            get { return _page; }
            set { _page = value; }
        }
        [XmlAttributeAttribute()]
        public string perpage
        {
            get { return _perpage; }
            set { _perpage = value; }
        }
        [XmlAttributeAttribute()]
        public string total
        {
            get { return _total; }
            set { _total = value; }
        }
    }

    [SerializableAttribute]
    [XmlTypeAttribute(AnonymousType = true)]
    public partial class SearchResponseVideosWrapperVideo
    {
        private string _title;
        private string _id;
        private string _username;

        [XmlElement()]
        public string title
        {
            get { return _title; }
            set { _title = value; }
        }

        [XmlAttributeAttribute()]
        public string id
        {
            get { return _id; }
            set { _id = value; }
        }

        [XmlElementAttribute("owner")]
        public string username 
        {
            get { return _username; }
            set { _username = value; }
        }        
} 
```

我认为问题就在这里

```
 [XmlElementAttribute("owner")]
        public string username 
        {
            get { return _username; }
            set { _username = value; }
        }

- <owner display_name="Ertan D." id="1387509" is_plus="0" is_pro="0" is_staff="0" profileurl="http://vimeo.com/user1387509" realname="Ertan D." username="user1387509" videosurl="http://vimeo.com/user1387509/videos"> 
```

我怎样才能从所有者那里获得属性..

这是异常详细信息

> 我收到一个异常，即 XML 文档中存在错误 (1, 1005)。
> 
> {“非预期的节点类型元素。ReadElementString 方法只能对内容简单或为空的元素调用。第 1 行，位置 1005。”}
> 
> System.InvalidOperationException 被捕获

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T13:14:45.600

你需要一个“所有者”类。您还可以考虑在“所有者”类中添加带有集合的“肖像”类。

```
public class owner
{
    [XmlAttributeAttribute]
    public string username { get; set; }
}

[SerializableAttribute] 
[XmlTypeAttribute(AnonymousType = true)] 
public partial class SearchResponseVideosWrapperVideo 
{ 
    private string _title; 
    private string _id; 
    private string _username; 

    [XmlElement()] 
    public string title 
    { 
        get { return _title; } 
        set { _title = value; } 
    } 

    [XmlAttributeAttribute()] 
    public string id 
    { 
        get { return _id; } 
        set { _id = value; } 
    } 

    [XmlElementAttribute("owner")] 
    public owner owner { get; set; } 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T13:24:24.147

您正在使用“所有者”的 XmlElementAttribute 注释用户名。这意味着所有者元素应反序列化为字符串属性用户名。

如果要获取用户名，首先必须将所有者反序列化为某个对象。

例如，您可以使用与创建 VimeoSearchResponse 相同的方式添加 Owner 类。

```
public class Owner
{
    private string _owner;

    [XmlAttribute]
    public string username 
    {
       get { return _owner; } 
       set { _owner = value; }
    }
} 
```

# hadoop - Hadoop：MapReduce 处的 ClassNotFound 错误

> ID：11483943
> 
> 赞同：2
> 
> 时间：2012-07-14T12:56:56.273
> 
> 标签：hadoop, mapreduce

只是在提出问题之前说明我的设置，

```
Hadoop Version : 1.0.3 
```

默认的 WordCount 示例运行良好。但是当我根据这个页面[http://hadoop.apache.org/common/docs/r0.20.2/mapred_tutorial.html创建了一个新的 WordCount 程序时](http://hadoop.apache.org/common/docs/r0.20.2/mapred_tutorial.html)

我编译它并以与教程中给出的类似方式对其进行 jar-ed。但是当我使用它运行它时：

```
/usr/local/hadoop$ bin/hadoop jar wordcount.jar org.myorg.WordCount ../Space/input/ ../Space/output 
```

我收到以下错误，

```
java.lang.RuntimeException: java.lang.ClassNotFoundException: org.myorg.WordCount$Map 
```

整个错误日志已粘贴在这里： http: [//pastebin.com/GNbsfpg3](http://pastebin.com/GNbsfpg3)

我哪里做错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T13:38:31.573

错误信息中有一些线索：

> 12/07/14 18:09:38 WARN mapred.JobClient：使用 GenericOptionsParser 解析参数。应用程序应该实现同样的工具。
> 
> 12/07/14 18:09:38 WARN mapred.JobClient：没有设置作业 jar 文件。可能找不到用户类。请参阅 JobConf(Class) 或 JobConf#setJar(String)。

您需要与我们共享您的驱动程序代码（您在其中创建和配置作业），但您似乎没有配置“作业 jar”，也就是说，作业客户端没有提示您在哪里代码被捆绑到一个 jar 中，因此当您运行作业时，当地图实例实际运行时无法找到这些类。

你可能想要类似的东西

```
jobConf.setJarByClass(org.myorg.WordCount.class); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-17T15:54:08.640

我遇到了完全相同的问题，并通过在主代码中添加以下内容来解决它

```
jobConf.setJarByClass(org.myorg.WordCount.class); 
```

在这里你可以找到完整的主要功能 Configuration conf = new Configuration();

```
 Job job = new Job(conf, "wordcount");
    job.setJarByClass(org.myorg.WordCount.class);

job.setOutputKeyClass(Text.class);
job.setOutputValueClass(IntWritable.class);

job.setMapperClass(Map.class);
job.setReducerClass(Reduce.class);

job.setInputFormatClass(TextInputFormat.class);
job.setOutputFormatClass(TextOutputFormat.class);

FileInputFormat.addInputPath(job, new Path(args[0]));
FileOutputFormat.setOutputPath(job, new Path(args[1]));

job.waitForCompletion(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T11:38:18.117

我也得到了上述错误。我所做的只是将 jar 文件复制到集群的所有节点中并设置类路径，以便每个从节点都可以访问这个 jar。这对我有用。它可能会帮助你。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-19T08:19:12.230

在 runJob 之前，像这样设置 conf： conf.setJar("Your jar file name"); 它可能有效，试试吧！

# algorithm - 触发顺序击键的算法

> ID：11483944
> 
> 赞同：0
> 
> 时间：2012-07-14T12:57:16.803
> 
> 标签：algorithm

我想编写一个算法来顺序按下 F1-F3 键。我的表单有这些控件：

```
lblF1
textboxF1
lblF2
textboxF2
lblF3
textboxF3
btnStart 
```

在 textboxF1-textboxF3 中输入以秒为单位的时间。这在程序是按热键的时候。重要的是程序不能同时按下两个键，例如 F1 和 F2。它可能不会在一秒钟内按下一个以上的键。当我单击 btnStart 时，它会调用 Run()。

这就是我试图解决这个问题的方法：

```
static int counterF1 = 9999;
static int counterF2 = 9999;
static int counterF3 = 9999;

    public void Run()
    {
        counterF1 = 9999;
        counterF2 = 9999;
        counterF3 = 9999;
        while (true)
        {
            Loop();
        }
    }

    public void Loop()
    {
        bool used = false;

            if (counterF1 >= (int)textboxF1.text)
            {
                counterF1 = PressKey(VK_F1);
                used = true;
            }

            if (counterF2 >= (int)textboxF2.text)
            {
                counterF2 = PressKey(VK_F2);
                used = true;
            }

            if (counterF3 >= (int)textboxF3.text)
            {
                counterF3 = PressKey(VK_F3);
                used = true;
            }
        if (used == false)
        {
            IncrementCounters();
            Delay(1000);
        }
    }

    public double PressKey(uint key)
    {
        myPostMessageA(hWindow, WM_KEYDOWN, (uint)key, (uint)key); 
        IncrementCounters();
        return 1; //return 1 because one second
    }

    public void IncrementCounters()
    {
        counterF1++;
        counterF2++;
        counterF3++;
    } 
```

但通常它不按任何键（可能为时已晚，但不能是遗漏）。你能解释一下如何为此制定算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T14:44:45.907

我们将使用一个类`KeyStroke`来存储特殊键的必要数据：

```
public class KeyStroke
{
    public int period { get; set; } // Period in which to hit key
    public int next { get; set; } // ticks to the next hit of this key
    public int VK { get; set; } //KeyCode
}
public List<KeyStroke> keys = new List<KeyStroke>(); 
```

需要一个 Initialize() 方法来从文本框中读取数据并初始化模拟。我们使用一个间隔为一秒的计时器来运行模拟。在我的示例中，我不从文本框中读取，而是使用常量值。添加输入和错误处理。如果您使用 WPF，您可以将 KeyStroke 对象绑定到文本框。

```
void Init()
{
    //Initialize keys with according periods from input
    keys.Clear();
    keys.Add(new KeyStroke() { VK = VK_F1, period = 1, next = 1 });
    keys.Add(new KeyStroke() { VK = VK_F2, period = 10, next = 10 });
    keys.Add(new KeyStroke() { VK = VK_F3, period = 5, next = 5 });

    //sort keys by period (descending), in order to handle long period keys, too
    keys.Sort((first, second) => second.period.CompareTo(first.period));

    //Start the program
    var t = new DispatcherTimer();
    t.Interval = TimeSpan.FromSeconds(1);
    t.Tick += new EventHandler(t_Tick);
    t.Start();
} 
```

tick 事件与您的类似：

```
void t_Tick(object sender, EventArgs e)
{
    bool used = false;
    foreach (var key in keys)
    {
        if (key.next <= 0 && !used)
        {
            PressKey(key.VK);
            key.next = key.period;
            used = true;
        }
        key.next--;
    }
} 
```

# php - 从一个站点重定向到另一个站点

> ID：11483945
> 
> 赞同：0
> 
> 时间：2012-07-14T12:57:31.377
> 
> 标签：php, html, redirect

有没有办法将网站上的每个页面重定向到另一个网站？

实际上我的意思是，我拥有两个网站，例如：

1.  1.com
2.  2.com

2.com 是我的主要网站。当我将页面添加到 2.com（例如：2.com/index.html）时，1.com 会忽略它并使用重定向代码创建（1.com/index.html）到 2.com/index.html。我可以这样做吗？

有没有办法通过 php 做到这一点？

实际上，我需要的是一个脚本，它可以自动创建文件，这些文件将添加到我的第一个站点上的第二个站点。那么我可以用 php 和 mysql 或任何其他脚本或编程语言来做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T13:08:29.943

如果您拥有这两个域，则可以使用 DNS-A 记录或其他任何方式将它们重定向到您的网站，然后只需使用[apache.org 上](http://httpd.apache.org/docs/2.0/de/mod/core.html#ServerAlias)`Server Alias`概述的服务器别名 ( ) 。如果用户随后访问该域，他仍将看到他访问的原始域。

另一种方法是使用[此博客](http://www.noupe.com/php/10-mod_rewrite-rules-you-should-know.html)所述的重写规则：

```
RewriteCond %{HTTP_HOST} ^www.2.com$ [NC,OR]
RewriteCond %{HTTP_HOST} ^2.com$ [NC,OR]
RewriteCond %{HTTP_HOST} ^www.2.com$ [NC]
RewriteRule ^(.*)$ http://1.com/$1 [R=301,L] 
```

然后您的用户将始终在其地址栏中看到 1.com。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T13:02:52.140

// 将此脚本放在 1.com 上，它将重定向到 2.com，反之亦然

```
<?php

header('Location: http://2.com/index.html');
exit();

?> 
```

如果我没有正确理解您的问题，请告诉我，我会尽我所能帮助您。

// 超级破解时间

```
<?php
// 1.com
$files = scandir('./*'); // not recursive, note that
$sent = file($files['log.txt']);
unset($files['log.txt']);
$notsent = array_diff($files, $sent);
foreach($notsent as $file) {
     $contents = file_get_contents($file);
     // Use curl to post to 2.com receiving script http://davidwalsh.name/execute-http-post-php-curl
     file_put_contents($sent, $file, FILE_APPEND);
}
?> 
```

免责声明：尚未测试，但这是做我*认为*你想要的最直接的方法。同样，我真的不知道您为什么要这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T13:08:19.227

用 PHP 是不可能的，因为 PHP 代码是在文件启动时执行的，而不是在服务器上的*任何文件启动时执行的。*可能与`.htaccess`：

```
RewriteRule (.*) http://www.newdomain.com/ [R=301,L] 
```

从旧域上的每个页面重定向到 www.newdomain.com。

* * *

*有关重定向的更多方法，请参见[这篇文章](https://stackoverflow.com/questions/11441146/simple-page-redirect/11441186#11441186)。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T13:05:31.967

上述答案只能在加载任何 html 之前使用。如果您正在寻找更容易实现的东西，请使用：

```
<script>window.location = 'http://google.com';</script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-14T13:05:50.223

*我不确定我是否完全理解你的问题。*

**使用 PHP**

```
header('Location: http://2.com'); 
```

**使用 HTML**

```
<meta http-equiv="refresh" content="2;url=http://2.com"> 
```

**提供了更多信息：**

向 1.com 的 DNS 添加一条 CNAME 记录，值为 2.com

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-14T13:21:47.130

我更愿意在 1.com 上设置 Nginx Web 服务器并将其配置为代理，因此 2.com 实际上会处理所有请求。因此，您可以避免在 1.com 上复制整个 2.com，同时用户浏览器不会像使用*Location*标头那样重定向到 1.com。

# javascript - 如何仅使用 javascript 获取框索引号

> ID：11483946
> 
> 赞同：1
> 
> 时间：2012-07-14T12:57:42.867
> 
> 标签：javascript

我想使用 Javascript 获取框索引号。就像我有四个盒子，所以我希望每个盒子的文字都有这个适当的数字。

```
<head>

  <script type="text/javascript">
  function () {
   var Main= document.getElementById('container').getElementsByTagName('div');

for(i=0; i<Main.length;i++){

}

  }
  </script>
  <style>
  .box {
    float:left;
    margin-left:20px;
    position:relative
  }
  .width {
    position:absolute;
    left:0;
    top:0;
    color:#FFF;
    font-size:20px;
  }
  </style>
</head>
<body>
  <div id="container">
    <div class="box">

      <img src="img/sample1.jpg" height="200" width="300" />
    </div>
    <div class="box">

      <img src="img/sample2.jpg" height="200" width="350" />
    </div>
    <div class="box">

      <img src="img/sample3.jpg" height="200" width="150" />
    </div>
    <div class="box">

      <img src="img/sample4.jpg" height="200" width="100" />
    </div>
  </div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T13:02:17.700

```
window.onload=function() {
   var Main= document.getElementById('container').getElementsByTagName('div');

  for(var i=0; i<Main.length;i++){
    Main[i].innerHTML+= '<span class="title">box '+(i+1)+'</span>';
  }
} 
```

[演示](http://jsfiddle.net/mplungjan/FH4MA/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T13:04:24.650

用下面的这个替换你的所有 JS 并将 script 标签作为你的 body 标签中的最后一个标签，以确保在调用它时 DOM 已准备好。您也可以从`onload`事件中调用此函数。

```
(function(){
    var Main= document.getElementById('container').getElementsByTagName('div');
    for(var i=0; i<Main.length;i++){
      Main[i].innerHTML += "box"+i;
    }
})(); 
```

[http://jsfiddle.net/mmjW9/](http://jsfiddle.net/mmjW9/)

# android - 安全异常：DEVICE_POWER 的权限被拒绝

> ID：11483947
> 
> 赞同：3
> 
> 时间：2012-07-14T12:57:45.037
> 
> 标签：android, permissions, permission-denied

我正在尝试编写一个简单的 android 应用程序来关闭我的手机屏幕。当我运行这个应用程序时，我得到安全异常：权限拒绝应用程序需要 android.permission.DEVICE_POWER。我知道这是一个受保护的权限，但我的手机已植根。我如何指定我可以使用此权限？我已经尝试将 DEVICE_ADMIN 权限与 DEVICE_POWER 权限一起声明，但它仍然不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T13:35:06.160

Root 可能让您规避或修改 android 安全模型，但这并不一定意味着您获得强制执行它的 android API 的特殊权限。您通常不能以 root 身份运行应用程序本身，而您可以以 root 身份启动的辅助可执行文件中的代码与 Android API 交互会遇到很大困难。

您正在尝试做的事情可能真的不是一个好主意。但是，如果您真的想这样做，则需要安装自己的 Android 版本，以便拥有与您用于签署平台的密钥匹配的（自行生成的）密钥，然后您可以使用它来签署您的应用程序，或者尝试在系统分区上安装您的应用程序。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-14T13:38:46.707

如果您只想关闭屏幕，那么为什么不使用[PowerManager](http://developer.android.com/reference/android/os/PowerManager.html)呢？根据文档，[goToSleep()](http://developer.android.com/reference/android/os/PowerManager.html#goToSleep%28long%29)函数将强制设备进入睡眠状态。

# android - glReadPixels 字节浮动

> ID：11483950
> 
> 赞同：2
> 
> 时间：2012-07-14T12:57:57.740
> 
> 标签：android, opengl-es, colors, glreadpixels

我正在尝试使用 glReadPixels 在 OpenGL ES 中检索颜色。我用 float[] 设置对象的颜色，例如 {0.0f,0.5f,0.2f,1.0f} 如何将 glReadPixels 值转换为相同的 float[]，因为它是无符号字节？

设置颜色：

```
gl.glColor4f(color[0], color[1], color[2], color[3]); 
```

获取颜色：

```
ByteBuffer buf = ByteBuffer.allocate(4);
buf.order(ByteOrder.nativeOrder());

gl.glReadPixels((int) mx, height - (int) my, 1, 1, GL10.GL_RGBA, GL10.GL_UNSIGNED_BYTE, buf);
byte result[] = buff.array(); 
```

我不知道这是否已经被问过/回答过，但我还没有找到解决方案，我已经尝试了很长时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T20:56:05.817

你得到的原因`byte / 255.f = -0.0039`是因为你从 bytebuffer 得到的字节是 java 中的一个有符号值。

当 OpenGL 返回无符号值`255 = 0xFF`时，java 将其解释为有符号，其中`0xFF = -1`.

取你得到的字节（result[0]），把它转换成一个 int `int resultInt = ((int)result[0]) & 0xFF`，然后除以 255。你应该得到一个接近 1 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:39:41.957

用于`ByteBuffer.asFloatBuffer()`将其从字节转换为浮点数。

# git - 多用户使用 Git SVN 和远程 Git 存储库的工作流程

> ID：11483953
> 
> 赞同：5
> 
> 时间：2012-07-14T12:58:35.260
> 
> 标签：git, svn, workflow, git-svn, multiple-users

**问题总结：**

当我写这篇文章时，我意识到有很多细节，所以这里是标题：

*   对于在工作环境中使用 SVN 和 Git SVN，但又想使用远程 Git Repo (BitBucket) 从工作环境外部访问相同代码的许多用户的团队来说，什么是好的工作流程，将更改共享到这段代码在不在办公室时相互之间，然后在回到办公室时安全地重新回到 SVN？当其他人也在办公室内继续使用 Git SVN 时？

在写这篇文章时，我也开始意识到我要求做的事情真的很复杂，可能根本不可能......

**细节：**

我与一群使用 SVN 存储库的人一起工作。我们中的许多人已经开始使用 Git SVN，现在正在收获在本地使用 Git 的好处，随心所欲地分支，必要时合并到我们本地的 Masters，然后重新提交回 SVN。这很好用（尽管我意识到我们并没有获得纯 Git 解决方案的所有好处）。

我最近开始使用私有 BitBucket Git 存储库作为 Master 的远程，因此我可以轻松地将代码传输到其他地方或从其他地方传输代码。工作流程是这样的：

*   在工作中，来自 SVN Trunk => Local Work Master 的 Rebase。
*   从本地 Work Master => BitBucket Master 推送。
*   在家里，从 BitBucket Master => Local Home Master 拉取。
*   在家编写代码，分支，合并，享受 git。
*   从本地家庭分支合并 => 本地家庭主。
*   从本地 Home Master => BitBucket Master 推送。
*   在工作中，从 BitBucket Master 拉到 Local Work Master。
*   针对 SVN 主干变基。
*   向 SVN 提交。

好的，有几个步骤，但对我来说效果很好。但是，我的一些同事想开始做同样的事情。更重要的是，我们希望能够在没有 SVN 的情况下使用我们的 BitBucket Git 存储库。

我们正在考虑的一些事情的例子：

*   如果我们中的一个人不在办公室，他们希望能够获得最新的代码。在工作中，我可以从 SVN 变基，然后推送到 BitBucket，让我的同事可以使用最新的代码。
*   如果我们两个想要共享一些更改（假设我们中的一个或两个都不在办公室），我们可以在 BitBucket 上为此创建一个功能分支，并根据需要每次推送和拉取它。
*   当我们对它感到满意时，我们可以将其合并到我们的 Local Home Master 中，然后推送到 BitBucket Master，准备好在我们回来工作时拉取。
*   一旦回到工作岗位，我们中的一个人可以将 Master 从 BitBucket 拉到我们的 Local Work Master，然后像往常一样针对 SVN 和 dcommit 进行 rebase。

但是，假设我们中的一个人已经做到了这一点，那么团队中的其他人会发生什么？如果他们从 BitBucket Master 中提取，他们将获得更改。但是，如果他们从 SVN 变基，他们也会得到更改。

如果两者都做会发生什么？这只是一个可能的障碍。我能想到其他的步骤，如果这一切都可能陷入真正的混乱。

不幸的是，我们的持续集成工作流程与其他业务一样与 SVN 相关联。因此，我们实际上并没有完全迁移到 Git 的选择。我们也无法从公司外部访问我们的 SVN 存储库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T14:08:49.293

看看为那些想要同时使用 Git 和 SVN 存储库的人设计的[SubGit项目。](http://subgit.com)如果您有权访问您的 SVN 服务器，则只需运行

```
$ subgit install path/to/svn/repository 
```

之后为存储库创建一个 Git 接口。每次推送到 Git 存储库都会转换为 SVN，反之亦然。您只需设置对新创建的 Git 存储库的访问权限。

一些用于 SVN<->Git 镜像的基于 git-svn 的脚本提出了类似的功能，但与 SubGit 相比它们有缺点：

*   并发问题：如果有人同时推送到 SVN 和 Git，存储库历史就会出现分歧（SubGit 关心并发）；
*   git-svn 存储库只允许类似 SVN 的概念（例如，它不允许有 Git 子模块 --- “git svn dcommit”删除本地添加的子模块）
*   git-svn 不会将 svn:ignore 翻译成 .gitignore
*   git-svn 不能正确处理行尾（即不尊重 svn:eol-style）
*   git-svn 不翻译匿名 Git 分支，这些分支中的提交永远不会进入 SVN
*   git-svn 并不总是将 Git 合并提交正确转换为 SVN svn:mergeinfo 更改
*   git-svn dcommit 在 Git->SVN 翻译时不保留 Git 提交中的日期...

git-svn 的优点是有可能将 Git 镜像保存在另一台机器上；但它通过并发安全来支付这一点（在同一台机器上是在短时间内锁定 SVN 和 Git 存储库的条件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T13:10:26.510

将 git 服务器与 svn 存储库同步并非易事。如果你想使用两台服务器，一台使用 git，一台使用 subversion，你会遇到问题：

*   Subversion 不像 git 那样理解分支。如果您在分支之间的 git 中进行了几次合并，这也可以传递给 svn。但是对于颠覆来说，一切都发生在一个分支中，因此在不丢失信息的情况下不可能进行反向操作。
*   当您 dcommit 时，您的更改将被重新设置。这意味着提交获得了新的 sha。如果您将更改从 subversion 合并回 git，git 会感到困惑。

我尝试在工作中进行相同的同步（我们在构建过程中也被绑定到 svn），经过一些试验，我发现可靠的工作是使用每个人都使用的 git 服务器，并同步更改进行颠覆，以便您使用的詹金斯或集成服务器也可以获得最新的更改。实现这一点的最简单方法是仅在一个方向上同步，git -> svn。这意味着没有人提交 svn（除了 git sync 进程）。

如果这个解决方案对你有用，我会记录我是如何做到的，并构建了几个脚本来自动完成。你可以[在这篇文章](http://blog.hceris.com/synchronizing-a-git-repository-with-a-subvers)中找到它。

# c# - 仅在 DateTime 属性的 TextBlock 中显示日期

> ID：11483957
> 
> 赞同：0
> 
> 时间：2012-07-14T12:58:53.800
> 
> 标签：c#, xaml, windows-phone-7.1

我想在我的 WindowsPhone 应用程序的 DateTime 属性中仅在 TextBlock 中显示 Day。我使用以下代码在 TextBlock 中显示 Day。

```
<TextBlock Text="{Binding SelectedValue,StringFormat='dd'}"
           FontWeight="Bold"/> 
```

但是当我选择第一天时，它显示为**01**但我希望它显示为**1** 有什么方法可以使用`StringFormat`.

我希望这应该使用 100% xaml 代码甚至不使用转换器来实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T13:07:34.963

格式字符指定没有前导零的月份中的`d`某一天。但是，您需要其他东西（任何东西）来确保它不会被解释为标准`d`日期格式字符串。一种方法是在它前面加上一个空字符串：`String.Format(DateTime.Today, "''d")`显示为 14。在 XAML 中，您需要对单引号字符进行编码。在 WPF 中进行测试时，由于转义问题，使用与最外面的引号字符相同的引号字符会更容易，所以它变成

```
<TextBlock Text="{Binding SelectedValue,StringFormat='d&quot;&quot;'}"
       FontWeight="Bold"/> 
```

**编辑**：也许更清洁和更简单的方法是根本不绑定到日期，而是直接绑定到月份中的某一天：

```
<TextBlock Text="{Binding SelectedValue.Day}"
       FontWeight="Bold"/> 
```

# mysql - 如何从一个 MySQL 列输出多个列？

> ID：11483960
> 
> 赞同：3
> 
> 时间：2012-07-14T12:59:31.030
> 
> 标签：mysql

考虑下表

```
tweets
---------------------------------
tweet_id  nyse_date   class  type
---------------------------------
1         2011-03-12  2      0
2         2011-03-12  1      1
3         2011-03-12  1      0
4         2011-03-12  1      0
5         2011-03-12  0      0
6         2011-03-12  1      0
7         2011-03-12  3      2
8         2011-03-12  3      0 
```

每条推文都分配了一个“类”，它是 1、2 或 3 和一个“类型”，即 0、1 或 2。我想大致了解每个类和类型中的推文数量，如下所示：

```
nyse_date   class1  class2  class3  type0  type1  type2
-------------------------------------------------------
2011-03-12  3       1       2       6      1      1 
```

我从以下查询开始（按日期分组，因为真实表有许多不同的日期）：

```
SELECT
  nyse_date,
  COUNT(class) AS class1 FROM tweets WHERE class = 1,
  COUNT(class) AS class2 FROM tweets WHERE class = 2
GROUP BY
  nyse_date ASC 
```

预期的输出是

```
nyse_date   class1  class2
--------------------------
2011-03-12  3       1 
```

但我得到了一个错误。我相信这与我每个查询只能使用一个 WHERE 子句（我使用的是 2 个）这一事实有关，但我不知道替代方案是什么。你？

任何帮助是极大的赞赏 ：-）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T13:06:55.497

尝试这个：

```
SELECT
  nyse_date,
  SUM(class = 1) AS class1,
  SUM(class = 2) AS class2,
  SUM(class = 3) AS class3
FROM 
  tweets
GROUP BY
  nyse_date ASC 
```

The`class = 1`是一个布尔表达式，其值为`TRUE`or `FALSE`。A`TRUE`等于`1`。因此，使用`SUM`实际上意味着“计算条件成立的所有行”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T13:04:24.843

在 MySql 中使用 GROUP_CONCAT 聚合函数：

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T13:19:09.397

这行得通吗？

```
SELECT nyse_date, SUM( IF( class =1, 1, 0 ) ) AS class1, SUM( IF( class =2, 1, 0 ) ) AS class2
FROM tweets
GROUP BY nyse_date 
```

# java - Java Sax 树（重复属性）

> ID：11483963
> 
> 赞同：1
> 
> 时间：2012-07-14T12:59:53.613
> 
> 标签：java, xml, duplicates, sax

我正在尝试制作一个程序，该程序将通过 SAX 解析器从 xml 文档构建树。但是在标签的结果名称中构建成功，但在属性中我只看到最后一个标签的属性。

[代码](http://pastebin.com/jYXNYg31)有什么问题？打印到树在 tag.toString()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:35:28.587

尝试将第 48 行更改为：

```
Tag t = new Tag(eName, new org.xml.sax.helpers.AttributesImpl(attrs)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T15:04:30.253

我想问题是您正在`Attributes`为 each 存储实例，并且每次调用调用都会重用`Tag`该实例。因此，每个人都会看到具有相同内容的相同属性实例，即解析器构造的最后一个属性实例。您必须为每个标签创建实际属性的副本（或地图或其他）。`Attributes``startElement()``Tag`

# grails - 没有插件的 Grails + EXTJS

> ID：11483964
> 
> 赞同：0
> 
> 时间：2012-07-14T12:59:54.503
> 
> 标签：grails, extjs

由于 Grails extjs 插件显然由于许可限制而被停用，如果没有插件，我将如何在我的 Grails 应用程序中使用 extjs 库（具有许可证）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:40:10.823

只需添加 Ext JS 文件`web-app/js`并将它们包含在 GSP 文件中，就像其他 JS 源一样。

# ruby-on-rails - 使用 Rspec 选择单选按钮

> ID：11483967
> 
> 赞同：11
> 
> 时间：2012-07-14T13:00:21.593
> 
> 标签：ruby-on-rails, ruby, rspec

我目前正在使用 RSpec 为表单编写测试，我想知道如何选择一个单选按钮，给出下面的表单：

```
<%=form_for(@whatever) do|f|%>

         <%=f.label :option, "TRUE" %>
         <%=f.radio_button :option, true %>
         <%=f.label :option, "FALSE" %>
         <%=f.radio_button :morning, false %>

         <%=f.submit "SAVE" %>
      <% end %> 
```

我希望我的测试看起来像：

```
 describe "with valid options selected" do

          before do
            #CODE TO SELECT A RADIO BUTTON
            click_button "SAVE"
          end

        end 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-14T13:16:15.680

```
describe "with valid info" do    
  before do 
   choose('True')
   click_button "Create Setlist"
  end
  ...
end 
```

我必须为单选按钮分配一个 ID 才能正常工作

更多参考文档：[http ://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Actions](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Actions)

# asp.net-mvc-3 - 我如何从 mvc 的剑道 ui 网格的下拉列表中获取选定的值

> ID：11483972
> 
> 赞同：3
> 
> 时间：2012-07-14T13:00:49.110
> 
> 标签：asp.net-mvc-3, razor, kendo-ui

我正在使用 asp.net mvc razor 处理 Kendo UI。我正在尝试将数据库表数据与支持 CRUD 操作的剑道网格绑定。在这里，我需要为我的一个表字段填充一个下拉列表。我使用了以下代码

**看法：**

```
@model IEnumerable<MvcApplication1.PriceOption>    
@(Html.Kendo().Grid(Model)
        .Name("Grid")
        .Columns(columns =>
        {
            //columns.Bound(p => p.ProductTitle).ClientTemplate("<input type='checkbox' disabled='disabled'name='Discontinued' <#= Discontinued? checked='checked' : '' #> />");
            columns.Bound(p => p.ProductTitle).EditorTemplateName("OptionalEmail");
            columns.Bound(p => p.OptionTitle);
            columns.Bound(p => p.Price);
            columns.Bound(p => p.Frequency);
            columns.Command(command => { command.Edit(); command.Destroy(); }).Width(200);

        })
        .ToolBar(toolbar => toolbar.Create())
            .Editable(editable => editable.Mode(Kendo.Mvc.UI.GridEditMode.InLine))
        .Pageable()
        .Sortable()
        .Scrollable()
        .DataSource(dataSource => dataSource
            .Ajax()
            .Events(events => events.Error("error_handler"))
            .Model(model => model.Id(p => p.ProductID))
            .Create(create => create.Action("CreateOption", "ZiceAdmin"))
            .Read(read => read.Action("Read", "ZiceAdmin"))
            .Update(update => update.Action("UpdateOption", "ZiceAdmin"))
            .Destroy(update => update.Action("DeleteOption", "ZiceAdmin"))
        )
    ) 
```

**可选电子邮件.cshtml**

```
@model string
@(Html.Kendo().DropDownList()
    .Name("ProductTitle")
    .Value(Model)
    .SelectedIndex(0)
    .BindTo(new SelectList(ViewBag.ProductTitle))
 ) 
```

在这里，我需要存储下拉列表中的选定项目。但它总是显示为空。我如何从下拉列表中获取选定的值。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-19T04:51:54.157

这是一个错误。删除名称，它将作为以下内容的一部分提交回服务器`ViewModel`：

```
@model string 
@(Html.Kendo().DropDownList() 
    .Value(Model) 
    .SelectedIndex(0) 
    .BindTo(new SelectList(ViewBag.ProductTitle)) 
 ) 
```

# ruby-on-rails - 为什么 ActiveRecord::StatementInvalid 不能在这个 Rails 方法中被拯救？

> ID：11483973
> 
> 赞同：4
> 
> 时间：2012-07-14T13:01:16.473
> 
> 标签：ruby-on-rails, exception, activerecord, rescue

为什么我无法通过以下方法拯救任何东西？

```
def get_things
  begin
    things= @member.things.where("id>?",params[:id])
  rescue ActiveRecord::StatementInvalid
    render( inline: "RESCUED ActiveRecord::StatementInvalid" )
    return
  rescue
    render( inline: "RESCUED something" )
    return
  end
  render( inline: "#{things.first.title}" )
end 
```

当使用有效的 id 调用时，它可以工作：

```
$  curl -vd "id=3" http://localhost:3000/get_things 
```

但如果我传错了，例如：

```
$  curl -vd "id=3,0" http://localhost:3000/get_things
$  curl -vd "id='3'" http://localhost:3000/get_things 
```

异常未获救：

```
< HTTP/1.1 500 Internal Server Error
<h1>
  ActiveRecord::StatementInvalid
    in ApplicationController#get_things
</h1>
<pre>PG::Error: ERROR:  invalid input syntax for integer: &quot;'3'&quot; 
```

仅当渲染发生在开始/救援块内时

```
def get_things
  begin
    things= @member.things.where("id>?",params[:id])
    render( inline: "#{things.first.title}" )
  rescue ActiveRecord::StatementInvalid
    render( inline: "RESCUED ActiveRecord::StatementInvalid" )
    return
  end
end 
```

它按预期工作：

```
$ curl -vd "id='3'" http://localhost:3000/get_things
  < HTTP/1.1 200 OK
  RESCUED ActiveRecord::StatementInvalid 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T13:35:16.753

据我所知，`things`在您的情况下，将是一个包含查询信息的类，但是在您尝试访问基于查询的元素（如`things.first`）之前，查询不会被执行。

```
things= @member.things.where("id>?",params[:id]) # query not run
things= things.order("id desc") # still not run
things.first.title # now the query runs, the statement can be invalid 
```

这就是它无法挽救的原因，因为在您的渲染行中，发生异常的地方，而不是在创建`things`.

这应该没问题：

```
def get_things
  begin
    things= @member.things.where("id>?",params[:id])
    thing_title = things.first.title
  rescue ActiveRecord::StatementInvalid
    render( inline: "RESCUED ActiveRecord::StatementInvalid" )
    return
  rescue
    render( inline: "RESCUED something" )
    return
  end
  render( inline: "#{thing_title}" )
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-14T13:27:03.710

您可以将参数更改为 int：

```
params[:id] = params[:id].to_i if params[:id].present?
things= @member.things.where("id>?",params[:id]) 
```

或者您可以在以下位置添加参数验证器`config/routes.rb`：

```
resources :things, :constraints => {:id => /\d+/} 
```

# android - 将 GridView 调整为所有屏幕尺寸

> ID：11483978
> 
> 赞同：11
> 
> 时间：2012-07-14T13:01:52.140
> 
> 标签：android, android-layout, android-linearlayout, android-gridview, screen-size

我试图将 GridView 实现为图片库的一部分。我遵循了来自[Android 开发者门户](http://developer.android.com/guide/topics/ui/layout/gridview.html)的以下示例。

该教程似乎适用于所有屏幕尺寸。正如您在下面看到的，正确显示了小屏幕和大屏幕尺寸的比例（左侧 - 小屏幕尺寸，右侧 - 大屏幕尺寸。

![来自 Android 开发者门户的 GridView 教程](../Images/36345b870cf6bbfbfee3bd50f3c31dbe.png)

但现在我的问题。当我想在我的 Android 项目的 LinearLayout 中实现完全相同的 GridView 时 - 正确的比例消失了 - 如下图所示。图片开始重叠等等。

![我的安卓项目](../Images/c94e29f068a7d48ede289b4325057dd0.png)

我很确定这与我的 LinearLayout 有关系，如下所示。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/widget64"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:orientation="vertical">

    <LinearLayout
            android:id="@+id/widget34"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:padding="5dp"
            android:background="@drawable/foto_detail_bg_cell_0"
            >
        <ImageView
                android:id="@+id/flyer"
                android:layout_width="100dp"
                android:layout_height="80dp"
                android:src="@drawable/icon"
                android:scaleType="centerCrop"
                />
        <LinearLayout
                android:id="@+id/widget36"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="5px"
                android:orientation="vertical">
            <TextView
                    android:id="@+id/toptext"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Beat.It"
                    android:textSize="16sp"
                    android:textStyle="bold"
                    android:textColor="@color/white"/>
            <TextView
                    android:id="@+id/widget39"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="http://www.google.at"
                    android:textColor="@color/white"/>
            <LinearLayout
                    android:id="@+id/widget40"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content">
                <ImageView
                        android:id="@+id/widget41"
                        android:layout_width="58dp"
                        android:layout_height="40dp"
                        android:src="@drawable/facebook_share"/>
                <ImageView
                        android:id="@+id/widget42"
                        android:layout_width="58dp"
                        android:layout_height="40dp"
                        android:layout_marginLeft="1dp"
                        android:src="@drawable/photocount"/>
            </LinearLayout>
        </LinearLayout>
    </LinearLayout>
    <GridView xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/gridview"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:columnWidth="90dp"
              android:numColumns="auto_fit"
              android:verticalSpacing="10dp"
              android:horizontalSpacing="10dp"
              android:stretchMode="columnWidth"
              android:gravity="center"
            />

</LinearLayout> 
```

**主要问题：**[Android 开发者门户](http://developer.android.com/guide/topics/ui/layout/gridview.html) 上的教程使用的 Layout XML仅使用 GridView，没有 LinearLayout，并且在每个屏幕尺寸上都以正确的比例显示。这是为什么？当我像在我的项目中一样将 GridView 嵌套在线性布局中时，为什么它不能正常工作？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-14T16:54:45.830

**解决了：**

我通过编辑 GridView 的 ImageAdapter 解决了这个问题。我计算了生成的图像视图的大小 - 与密度无关。

```
// create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {  

            //Calculation of ImageView Size - density independent.
            //maybe you should do this calculation not exactly in this method but put is somewhere else.
            Resources r = Resources.getSystem();
            float px = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 60, r.getDisplayMetrics());

            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams((int)px, (int)px));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            //imageView.setPadding(8, 8, 8, 8);
            imageView.setBackgroundColor(Color.BLUE);
        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(mThumbIds[position]);
        return imageView;
    } 
```

# localization - Three.js如何显示汉字

> ID：11483980
> 
> 赞同：2
> 
> 时间：2012-07-14T13:02:00.417
> 
> 标签：localization, three.js

我正在使用 OBJLoader 加载大型 3D 模型（在 .obj 文件中描述），并且我想在其表面上显示模型名称。虽然 Three.js 似乎只能显示英文字符。我的问题是如何在 Three.js 中显示汉字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T00:30:46.947

有几种显示文本的方法（https://github.com/mrdoob/three.js/wiki/Text-in-Three.js），但由于导出中文字体可能更困难，因此可能更容易将汉字绘制到画布纹理上，并将纹理用作场景中的材质。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-26T03:58:58.847

另一种选择是使用[msdf-bmfont-xml](https://www.npmjs.com/package/msdf-bmfont-xml)。此示例使用[Microsoft YaHei](https://www.wfonts.com/font/microsoft-yahei)。

charset.txt——</p>

```
你好，世界 
```

您可能需要先[安装依赖](https://github.com/Jam3/msdf-bmfont#install)项。然后：

```
npm install msdf-bmfont-xml -g
msdf-bmfont -f json yahei.ttf -i charset.txt --pot --square 
```

最后，使用[three-bmfont-text](https://www.npmjs.com/package/three-bmfont-text)渲染文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-17T07:53:16.023

好像可以用[Facetype.js](http://gero3.github.io/facetype.js/)弄个中文字体库，比如"YaHei_Regular.typeface.json" ，就可以显示汉字了。

```
var fontLoader = new THREE.FontLoader();
    fontLoader.load("YaHei_Regular.typeface.json", (font)=> {
        this.font = font;
    }); 
```

# c - fscanf 包含双精度和字符的文件

> ID：11483984
> 
> 赞同：1
> 
> 时间：2012-07-14T13:02:47.970
> 
> 标签：c, file-io, scanf

我有一个包含基本数学运算的文件。一个例子：

```
1 + 23 / 42 * 23 
```

我正在扫描文件，将每个“元素”放入一个结构中并将其推送到我创建的堆栈中。我遇到的问题如下：

```
char reading;
while(!feof(fp)) {
  fscanf(fp, "%c", &reading);
  .... 
```

这将扫描`1`, `+`, `2`,`3`而不是`1`, `+`, `23`。还有什么其他建议可以使用它`fscanf`并让它迭代并按照预期的类型读取所有输入？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:06:31.817

`fscanf`对这项工作来说是错误的工具，因为它需要一个预先知道预期格式的格式字符串。您最好的选择是一次读取一个字符并构建您可以解释的标记，特别是如果您必须接受`2+2`（无空格）或`(1 + 23) / 42`带括号之类的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T15:35:21.017

你应该使用`fscanf()`一些不同的，像这样：

```
char buf[16];
int val;
char op;

while (!feof(fp)) {
    fscanf("%s ", buf); // Note: Without ' ' the last value would be readed twice
    if (buf[0] == '+' || buf[0] == '-' || buf[0] == '/' || buf[0] == '*') {
        op = buf[0];
        // do something with op
    } else {
        sscanf(buf, "%d", &val);
        // do something with val
    }
} 
```

的大小`buf`必须是可以存储数字长度的东西。

# php - 在 PHP 中验证数据

> ID：11483989
> 
> 赞同：0
> 
> 时间：2012-07-14T13:03:55.557
> 
> 标签：php

我有一个像下面这样的表格，我想从用户那里得到一些输入。我的目标是在提交到数据库之前验证数据。我的问题是我该怎么做？

```
<form action="../actions/insertcomment.php" method="post">
    <p class ="ctitle">Leave a Comment:</p>
    <p><label for="postid"><b>PostID:</b></label>
       <input type="text" id="postid" name="postid" maxlength="5" /> <br/>

        <label for="name"><b>Name:</b></label>
        <input type="text" id="name" name="name" maxlength="25" /> <br/>

        <label for="email"><b>Email:</b></label>
        <input type="text" id="email" name="email" maxlength="50" /> <br/>

        <label for="website"><b>Website:</b></label>
        <input type="text" id="website" name="website" maxlength="25" /> <br/>

        <label for="content"><b>Comment:</b></label>
        <textarea id="content" name="content" cols="10" rows="4" maxlength="100"></textarea> <br/>

        <input type="submit" value="Submit Comment" name="submit_comment" /> <br/>
    </p>
</form> 
```

我的 insercomment.php 如下：

```
<html>
<link rel = "stylesheet" type = "text/css"
          href = "../common/style.css" />
<?php
include("../common/dbconnect.php");
$con=new dbconnect();
$con->connect();
error_reporting(E_ALL);

 //$postid= $_GET['id'];

if($_POST) {

    $postid= $_POST['postid'];
    $users_name = $_POST['name'];
    $users_email = $_POST['email'];
    $users_website = $_POST['website'];
    $users_comment = $_POST['content'];

    $postid = htmlspecialchars($postid);
    $users_name = htmlspecialchars($users_name);
    $users_email = htmlspecialchars($users_email);
    $users_website = htmlspecialchars($users_website);
    $users_comment = htmlspecialchars($users_comment);

$sSql = "INSERT INTO comments
 ( post_id,name, email, website,content)
 VALUES ( $postid, '$users_name',
        '$users_email', '$users_website', '$users_comment' )";

    //echo $sSql;
    mysql_query($sSql);
    //$update=mysql_affected_rows();
    //echo "<h2>$update Record Inserted</h2><br />";
    echo '<h2> Your Comment is submitted</h2><br />';
}

?> 
```

在这里，我不使用“method="post"> 任何此类代码或示例都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:11:11.123

你当然应该清理你的输入以防止注入：

```
 $postid= mysql_real_escape_string($_POST['postid']); 
```

这将使您的所有输入安全地插入数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T13:17:02.820

您可以使用`filter_input`php.ini 来验证数据。你可以在这里读更多关于它的内容：

[php中的filter_input](http://php.net/manual/en/function.filter-input.php)

这是一个关于如何使用它来验证电子邮件的示例：

```
$email = filter_input(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL); 
```

where`INPUT_POST`是方法，`email`是字段的名称，`($_POST['email'])`是`FILTER_VALIDATE_EMAIL`验证选项。

您可能需要考虑在[mysqli](http://php.net/manual/en/book.mysqli.php)或[pdo](http://php.net/manual/en/book.pdo.php)中使用准备好的语句以使您的应用程序更安全。

要检查变量是否有值，您可以使用函数[empty](http://php.net/manual/en/function.empty.php)：

```
if(!empty($_POST['email']){
  //do stuff
} 
```

您还可以添加客户端验证。一个好的库是[liveValidation](http://livevalidation.com/)，顾名思义，它会在用户输入时验证用户输入，这样用户就不必等待页面刷新才能获得反馈，无论他们的表单是否已成功提交。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T06:18:32.450

我建议您使用`mysql_real_escape_string()`. 使用 if else 语句进行验证。举例

```
if ($_POST['name']...) 
{
    echo "fill in those fields!";
}
else
{
    do stuff...
} 
```

顺便说一句，您应该使用 PDO 准备好的语句，而不是用 PHP 回显 HTML。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T13:20:39.117

我的经验表明，在插入数据库之前，您应该**使用 if-else 语句检查您的输入。**最重要的是**使用准备好的语句**。不要像那样传递原始字符串。始终为您的表格使用准备好的声明。

请参阅：[防止 SQL 注入的最佳方法](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-14T13:10:17.977

最好的方法是在 sql 语句之前检查数据是否有效。

伪命题：

```
$data1 = $_POST['xyz']; //text
$data2 = $_POST['abc']; //number
...

errors = array
if(data1 is not text) errors[] = data1 must be text
if(data2 is not number) errors[] = data2 must be number
...

if(count(errors) > 0) return errors
else

do the sql insert
return "thank you message" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-14T13:13:50.687

你可以这样做： -

```
if(isset($_POST))
{
     if($_POST['postid']!="" && $_POST['name']!="" &&.....)
     {
         //do your insertion here 
     }
     else
       echo "oops !! Something is missing";
} 
```

# android - 如何在 sqlite 中找到我的 .db 文件？

> ID：11483992
> 
> 赞同：1
> 
> 时间：2012-07-14T13:04:11.710
> 
> 标签：android, sqlite, ddms

我创建了一个名为“enigmeDB”的数据库和一个表“table_enigme”：

```
public class EnigmeDatabase extends SQLiteOpenHelper {
    private static final int DATABASE_VERSION = 1;
    private static final String DATABASE_NAME = "enigmeBD";
    private static final String TABLE_ENIGME = "table_enigme";

    // fields 
    private static final String KEY_ID = "id";
    private static final String KEY_DESCRIPTION = "description";
    private static final String KEY_REPONSE="reponse";
    private static final String KEY_CATEGORIE="categorie";      

    public EnigmeDatabase(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // creation of the table
    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_ENIGME_TABLE = 
            "CREATE TABLE " + TABLE_ENIGME
            + "("
            + KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT," 
            + KEY_DESCRIPTION + " TEXT,"
            + KEY_REPONSE + " TEXT,"
            + KEY_CATEGORIE + "TEXT"
            + ")";
        db.execSQL(CREATE_ENIGME_TABLE);    
    }

    // Update
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_ENIGME);
                onCreate(db);
    }.... 
```

当我打开我的 DDMS 透视图并打开文件资源管理器时：/data/data/com.android.enigme（我的包）我找到“enigmeDB”但我没有找到“table_enigme”。

![在此处输入图像描述](../Images/61540adaeed12a8dd161d3f437ec63ce.png)

虽然在 Sqlite 数据库浏览器中我的表看起来是空的：

![在此处输入图像描述](../Images/55c169236359eab30cbb5444c1d31ea9.png)

* * *

我从 Activity 插入数据，这是我的课程：

公共类 EnigmeActivity 扩展 Activity {

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //recuperation des champs depuis main.xml
    final EditText description=(EditText) this.findViewById(R.id.description);
    final EditText reponse=(EditText)this.findViewById(R.id.reponse);
    final EditText categorie=(EditText)this.findViewById(R.id.categorie);
    Button ajouter = (Button)this.findViewById(R.id.ajouter);

   final EnigmeDatabase db=new EnigmeDatabase(this);

    ajouter.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            Log.d("Etape : " , "Recuperation");
            Log.i("description : ", description.getText().toString());
            Log.i("reponse : ", reponse.getText().toString());
            Log.i("categorie : ", categorie.getText().toString());
            //add a new Enigme
            Log.d("Etape : ","Insertion" );
            db.ajouterEnigme(new EnigmeBean(description.getText().toString(),reponse.getText().toString(),categorie.getText().toString()));      
            Toast.makeText(EnigmeActivity.this, "Ajout avec succes!", Toast.LENGTH_SHORT).show();

        }

        });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:06:26.867

在 SQLite 中，数据库的所有表都在一个文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T13:06:32.697

那是一个包含所有表的数据库文件。

您已像上一张图​​片一样打开它，并且列名在您创建时就存在。

它是“空”的原因是因为其中没有数据。

您需要用数据填充表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T13:07:55.917

“table_enigme”在 enigmBD 中。该文件包含您的数据库。资源管理器中的那个文件就是数据库。不确定您是否正在寻找更多的东西。

您的代码没有插入任何数据，因此该表应该是空的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T13:08:12.227

“数据库”文件夹包含您的数据库（单个文件）。没有其他文件称为“表”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-14T15:47:43.020

插入错误在这个 ligne 中：

*   KEY_CATEGOIE + "文本"

    创建的表包含一个名为 "categorieTEXT" 的列： categorie 是我的列名，而 TEXT 它的类型
    我必须在 " 和 TEXT 之间留一个空格，如下所示：

*   KEY_CATEGOIE +“文本”

# java - 有没有用 Class.forName() 加载类的替代方法？

> ID：11483993
> 
> 赞同：4
> 
> 时间：2012-07-14T13:04:23.483
> 
> 标签：java, osgi, classloader

在我的库代码中，我使用 JAXB 从 XML 文件加载类名，以便稍后使用[`Class.forName()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#forName%28java.lang.String%29). 一个虚构的例子来说明这个案例：

```
public void libraryMethod() throws Exception {
  List<String> classNames = loadClassNamesFromXML();

  for (String className : classNames) {
    Class.forName(className).newInstance().doThings();
  }
} 
```

现在，一些用户使用 OSGi 来配置他们的应用程序，他们使用与使用我的 XML 结构配置的类不同的类加载器加载我的库。这意味着加载可能会失败，因为找不到类。

有没有更可靠的方法来加载这些类？或者有没有其他方法来配置这些实例？我愿意接受导致这种情况的建议：

```
public void libraryMethod() throws Exception {
  // Spring does things like this:
  List<SomeType> instances = loadInstancesFromXML();

  for (SomeType instance : instances) {
    instance.doThings();
  }
} 
```

一些限制：

*   从库的角度来看，这些实例的生命周期并不重要。如果他们有（用户）状态，我的图书馆不会注意到。
*   我想在这个库中保持简单，所以我想避免在配置框架上创建外部依赖项，例如 spring。所以我只对标准 JDK 6+ 发行版可以实现的解决方案感兴趣。
*   我真的很想保留我的简单 XML 配置文件（对 XML 结构稍作调整是可以的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T16:30:34.783

如果您希望您的库灵活并在 OSGi 和非 OSGi 环境中工作，您应该允许用户提供他们自己的 ClassLoader，或者让他们告诉您的库他们有哪些类名。阅读[Neil Bartlett 博客文章](http://njbartlett.name/2010/08/30/osgi-readiness-loading-classes.html)。

原始链接返回 404。您可以访问[Wayback Machine 上的文章。](https://web.archive.org/web/20150217082541/http://njbartlett.name/2010/08/30/osgi-readiness-loading-classes.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T21:06:36.287

感谢您的解释。在 OSGi 中，Spring 不会让这变得更容易。您不能简单地从未导入的包中注入实现类。在 OSGi 中，您通常使用 OSGi 服务来注入源自您的包之外并且在编译时您不知道的实现。

因此，您的用户将实现您指定的接口并将其实现发布为 OSGi 服务。然后，您可以选择所有此类服务，或者让用户在 xml 配置中为他的服务指定一个 ldap 过滤器。

这种方法的优点是您不必加载类并关心类加载器。所以这是 OSGi 中推荐的方式。如果您想在 OSGi 内部和外部使用相同的解决方案，那么指定类加载器 + 类名的方法是另一种选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T13:58:54.980

通常，在 OSGi 中您应该使用服务。Class.forName/XML 配置如此流行的原因是只有一个类获得控制权。要配置其余部分，它需要知道要初始化/调用的类。

在 OSGi 中，这个问题不存在，因为每个模块（包）（可以）通过声明式服务（或以老式方式通过激活器）获得控制。所以在 OSGi 中你有一个对等模型。任何人都可以注册服务并依赖其他服务。

因此，与其指定类名并假设它们是全局唯一的（它们不在大型系统中），不如使用服务更容易，而不用离开 Java 编译器；这些类名很容易出错。一般来说，这意味着您通常只需注册您的服务并等待被调用，因为不需要初始化您的客户端。但是，当您想了解您的客户时，白板模式解决了这种情况（使用 bndtools 和 bnd 注释）：

服务器”

```
@Component
public class MyLib {
   @Reference(type='*')
   void addSomeType(SomeType st ) {
      st.doThings();
   }
} 
```

客户端

```
@Component
public class MyClient implements SomeType {
  public void doThings() { ... }
} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T19:29:13.187

JDBC4 驱动程序在 jar 中包含 META-INF/services/java.sql.Driver，它使用 ServiceProvider 机制向 JVM 注册驱动程序实现（参见[java.util.ServiceLoader](http://download.java.net/jdk7/archive/b123/docs/api/java/util/ServiceLoader.html) javadocs）。将驱动程序放在类路径上将自动注册驱动程序，无需使用 Class.forName。相反，应用程序代码使用 ServiceLoader.load 来发现已注册的驱动程序。相同的机制可用于其他配置。也许可以使用类似的东西？顺便说一句，在使用 Service Provider 机制注册自己的实现时，使用像[spi](http://code.google.com/p/spi/)这样的注解看起来很方便。

# javascript - javascript语法 - 将变量传递给函数

> ID：11483999
> 
> 赞同：0
> 
> 时间：2012-07-14T13:05:43.703
> 
> 标签：javascript, syntax

```
var testvar = "something";

//only one of the following 3 lines were uncommented while testing:
var myinsert = '<span class="green myCursor" 
                   onClick="getproblemsadmin(testvar)">
                   Test
                </span>'; //doesn't pass testvar to function

var myinsert = '<span class="green myCursor" 
                   onClick="getproblemsadmin(\'testvar\')">
                   Test
                </span>'; //doesn't pass testvar to function

var myinsert = "<span class='green myCursor' 
                   onClick='getproblemsadmin(\"testvar\")\'>
                   Test
                </span>"; //doesn't pass testvar to function

$('.someclass').html(myinsert); //jquery works and this works (tested) 
```

有没有办法将变量传递给这样的函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T13:08:27.743

你的意思是这个变量的值吗？

```
var myinsert = "<span class='green myCursor' onClick='getproblemsadmin(\""+testvar+"\")\'>Test</span>"; 
```

语法：

```
var myinsert = "string" + variable + "string";
var myinsert = 'string' + variable + 'string'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T13:24:54.913

您可以尝试创建 span 元素，然后绑定 click 事件：

```
$('<span class="green myCursor">Test</span>').click(function()
{
    getproblemsadmin('testvar')
}); 
```

或者，如果你想获得真正的 jQuery'esk，你可以这样写：

```
$('<span />').addClass('green myCursor').text('test').click(function()
{
    getproblemsadmin('testvar')
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T13:12:03.700

如果我理解正确，您正在寻找一种将变量传递给函数的方法，该函数将返回包含标记代码的构造字符串？像这样的东西？

```
var testvar = "something";

var myinsert = work_horse(testvar);
$('.someclass').html(myinsert);

function work_horse(testvar){
    return '<span class="green myCursor" onClick="getproblemsadmin(' + testvar + ')">Test</span>';
}​ 
```