# StackOverflow 问答 10561000-10561999

# objective-c - 具有相同名称的 Objective-C 类别

> ID：10561000
> 
> 赞同：2
> 
> 时间：2012-05-12T04:06:09.563
> 
> 标签：objective-c, objective-c-category

我有一组数据类，我想用我自己的方法通过创建每个类独有的类别来扩展它们。

在声明一个类别时，每个类别是否需要有一个唯一的名称，或者我可以重复使用相同的名称。

例子。假设我有一个 List 类和 ListItem 类，我想要两个类别。我现在正在做的声明如下：

在 List+Additions.h 中

```
@interface List (Additions) ... 
```

在 ListItem+Addtions.h

```
@interface ListItem (Additions) ... 
```

那样可以么？我不知道它是否一直在工作。什么被认为是类别名称？是“Additions”，还是“ListItem+Additions”的组合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T04:34:20.943

> 那样可以么？我不知道它是否一直在工作。什么被认为是类别名称？是“Additions”，还是“ListItem+Additions”的组合。

是的，没关系。

这两个类别具有相同的名称：`Additions`，但一个是 a`List`的类别，另一个是 a`ListItem`的类别。所以不存在名称冲突。即使您将两个类别声明都放在同一个文件中也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T04:34:40.333

类别名称是`List (Additions)`和`ListItem (Additions)`。因此，这两个类别是分开的和独立的。

“ListItem+Additions”之类的东西是定义类别的文件名的通用约定，但编译器和运行时都没有注意到这一点。

# ajax - Ajax 使 IE 7 崩溃

> ID：10561003
> 
> 赞同：1
> 
> 时间：2012-05-12T04:06:50.957
> 
> 标签：ajax, crash, internet-explorer-7

这是我的ajax代码

```
function sendAjax(send_data,id)
{
    var ajaxobj;

    alert("After this alert problem occurs!");

    if (window.XMLHttpRequest) ajaxobj = new XMLHttpRequest();
    else ajaxobj = new ActiveXObject("Microsoft.XMLHTTP");

    ajaxobj.onreadystatechange=function()
    {
      if(ajaxobj.readyState==4) 
      {
          if(ajaxobj.responseText.match("confirmPage") != null) document.getElementById(id).innerHTML = ajaxobj.responseText;
          else  
          {
            if(id == "FreshContent") 
            document.getElementById(id).innerHTML = "<a id=\"refreshpage\" onClick=\"siteSelection('select')\">Failed.Click here to Reload!</a>";
            else
            document.getElementById(id).innerHTML = "<a id=\"refreshpage\" onClick=\"sendAjax(0,'latest_gossip_marquee');\">Failed.Click here to Reload!</a>";
          }

          }
      else document.getElementById(id).innerHTML="Loading...."; 
    }

    if(id == "FreshContent") ajaxobj.open("GET","sitexyz.php?"+send_data,true);
    else ajaxobj.open("GET","html/xyz.html",true); 
    ajaxobj.send();     
} 
```

这里的 FreshContent 是一个 div 标签 id。它适用于 Opera 和 firefox，但它在我的 IE7 中崩溃。要查看服务器返回的页面是否有效，代码会检查返回的页面中是否包含 confirmPage 字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T04:22:43.703

Try this function out - it's a [little more robust](http://bulletproofajax.com/code/) than what you're using.

```
function getHTTPObject() {
  var xhr = false;
  if (window.XMLHttpRequest) {
    xhr = new XMLHttpRequest();
  } else if (window.ActiveXObject) {
    try {
      xhr = new ActiveXObject("Msxml2.XMLHTTP");
    } catch(e) {
      try {
        xhr = new ActiveXObject("Microsoft.XMLHTTP");
      } catch(e) {
        xhr = false;
      }
    }
  }
  return xhr;
} 
```

# java - 如何将 jpeg 帧从 java 客户端流式传输到 python 服务器

> ID：10561010
> 
> 赞同：2
> 
> 时间：2012-05-12T04:07:35.440
> 
> 标签：java, c++, python, sockets, jpeg

我正在开发一个android应用程序，其中我必须发送分配给BufferedArrayOutputStream（代码中的baos变量）的jpeg格式的帧。我将此 baos 转换为字节数组以写入套接字。在服务器端，我想以 jpeg 格式重建图像。如果我将变量中接收到的数据写入服务器上的“.jpg”文件，则在打开文件时，会出现类似“以 ffx0 不是 jpeg 格式开头的文件”的错误。我认为这是因为 python 中的字符串变量将文件中的数据作为十六进制字符串写入。客户端代码如下：-

```
Bitmap memoryImage = Bitmap.createBitmap(rgb, previewSize.width,previewSize.height,Bitmap.Config.ARGB_8888);
ByteArrayOutputStream baos = new ByteArrayOutputStream();
if(memoryImage.compress(CompressFormat.JPEG,100, baos)){
    try {
        if(count==0){
            byte [] Finalbaos = baos.toByteArray();
            int tempLen = Finalbaos.length;
            Log.v("Client","ImageBytes :"+ tempLen);
            String dataMeta = Integer.toString(tempLen);
            Log.v("Client","Integer Size :"+ dataMeta.length());
            PrintWriter tempOut = new PrintWriter(socket.getOutputStream());
            if(tempOut!=null){
                tempOut.write(dataMeta);
                Log.v("Client","data size sent");
                tempOut.flush();
            }

            DataInputStream in = new DataInputStream(socket.getInputStream());
            if(in!=null){
                Log.v("Client","read buffer created");
                String xyz = in.readLine();
                String temp = "recvd";
                Log.v("Client",xyz);
                if(xyz.equals(temp)){
                    OutputStream out = socket.getOutputStream();
                    out.write(Finalbaos,0,tempLen);
                    out.flush();
                    Log.d("Client", "Client sent message");
                }
            } 
```

服务器代码：

```
import socket,thread
import string
import array
host=""
port=54321
s=socket.socket()
s.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,1)
s.bind((host,port))
s.listen(5)
conn,address=s.accept()
data=""
mylen=0
dataRecv=0
file1 = open("myfile.jpg","w")
totalLength=""
length=conn.recv(1024)
conn.send("recvd")
mylen=int(length)

while dataRecv<mylen:
    newData=""
    newData=conn.recv(1)
    if not newData:
        break
    data+=newData
    dataRecv+=len(newData)

result= array.array('B',data.decode("hex"))
file1.write(result)
file1.close()
print len(data)
conn.close()
s.close() 
```

谁能让我知道如何在 python 或 C++ 中重建服务器上的框架

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T06:04:03.860

*   `mylen=len(length)`不会给您尝试发送的长度。它为您提供了在 previsous 中读取了多少字节`recv`。所以你在那里得到了错误的长度。
*   在您的客户端，您使用`String xyz = in.readLine();`which 将阻塞，直到遇到换行符。但是您永远不会在服务器端发送 a `'\n'`，而是等待客户端的响应。所以你有一个僵局。
*   您`data.decode("hex")`在收到的数据上使用。除非你`data.encode("hex")`在另一边做 java 中的等价物，否则那是行不通的。如果字符串不是二进制字符串的有效十六进制表示，它应该会给你一个错误。
*   `result`是一个`array.array`，您将其写入文件。`file1.write`需要一个字符串作为参数，如果你传递你的`result`对象，它会给你一个错误。

所以我什至看不出为什么您的代码完全有效，以及为什么您的文件中有任何内容。

# objective-c - 创建多个自失效的计时器

> ID：10561014
> 
> 赞同：1
> 
> 时间：2012-05-12T04:08:55.183
> 
> 标签：objective-c, xcode

我正在尝试使用 Xcode 4.3.1 为 Iphone 编写一个应用程序，我想做的是按下一个按钮并触摸触摸屏上的某处并显示一个标签（附有计时器）并计数从某个数字下降。当计时器到达 0:00 时，我希望它自己失效，为此我需要保留它的参考。

我不知道我将预先使用多少个标签/计时器，所以我想我会使用一个数组来存储每个。我对Objective-C语言知之甚少。到目前为止，我所做的一切都只是复制了我在其他 stackoverflow 问题中看到的示例，试图理解它们。到目前为止，我已经能够构建一个相对实用的计时器。

以下是我当前的计时器代码。目前，它只是一个连接到预制标签的预制按钮，具有我希望我的计时器具有的所有功能。它从 5 分钟开始，将自身格式化为分钟：秒，并在到达 0:00 时使计时器失效。定时器启动后，该按钮还可用作停止/复位功能。

视图控制器.h

```
@interface ViewController : UIViewController{

    IBOutlet UILabel *timerDisplay;
    NSTimer *timer;
    bool timerActive;
    int MainInt;
    int minutes;
    int seconds;

}

@property (nonatomic, retain) UILabel *timerDisplay;

-(IBAction)start:(id)sender;
-(void)countdown;
-(void)timerStop;
-(void)timeFormat;

@end 
```

视图控制器.m

```
@implementation ViewController

@synthesize timerDisplay;

-(void)timeFormat{
    seconds = MainInt % 60;
    minutes = (MainInt - seconds) / 60;
    timerDisplay.text = [NSString stringWithFormat:@"%d:%.2d", minutes, seconds];
}

-(void)countdown {
    MainInt -= 1;
    [self timeFormat];
    if (MainInt <=0){
        timerActive = NO;
        [self->timer invalidate];
        self->timer = nil;
    }
}

-(IBAction)start:(id)sender {
    MainInt = 300;
    [self timeFormat];
    if(timerActive == NO){
        timerActive = YES;
        self->timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(countdown) userInfo:nil repeats:YES];
    }
    else {
        timerActive = NO;
        [self->timer invalidate];
        self->timer = nil;
    }
} 
```

任何帮助将不胜感激。我最希望能够使用数组或其他东西一次拥有多个计时器的帮助。硬编码大量计时器将是一件愚蠢的事情。

干杯。

编辑2：

我有下面的代码作为我的应用程序，这几乎正是我想要它做的。除了在这段代码中，我一次只能运行一个计时器，这是我的问题。

在这段代码中，我存储了触摸屏上最近一次点击的值（使用它的坐标将计时器放置在屏幕上的某个位置），以及一个按钮，当我按下它时，一个正在运行的计时器（带有 UILabel）将出现在之前存储的拍子的位置。它将一直运行直到完成，然后使自身失效并将自身从视图中移除。这工作正常。

但是，当我在原始计时器完成之前再次按下按钮时，它只会在新位置创建一个新计时器（使用 UILabel）。这个新计时器可以正常工作，但旧计时器已丢失其计时器参考，因此无法完成，我无法删除它。

视图控制器.h：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController{

    UILabel *timerDisplay;
    NSTimer *timer;
    CGPoint startPoint;
    int MainInt;

}

@property CGPoint startPoint;

-(IBAction)startTimer:(id)sender;
-(void)countdown;
-(void)timeFormat;
-(void)start;

@end 
```

视图控制器.m：

```
@implementation ViewController

@synthesize startPoint;

-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *theTouch = [touches anyObject];
    startPoint = [theTouch locationInView:self.view];
}

-(IBAction)startTimer:(id)sender {

    timerDisplay = [[UILabel alloc] initWithFrame:CGRectMake(startPoint.x -15, startPoint.y - 15, 50, 50)];
    timerDisplay.textAlignment = UITextAlignmentCenter;
    timerDisplay.text = [NSString stringWithFormat:@"%i", MainInt];
    timerDisplay.backgroundColor = [UIColor greenColor];
    timerDisplay.textColor = [UIColor whiteColor];
    [self.view addSubview:timerDisplay];
    [self start];

}

-(void)timeFormat{
    int seconds = MainInt % 60;
    int minutes = (MainInt - seconds) / 60;
    timerDisplay.text = [NSString stringWithFormat:@"%d:%.2d", minutes, seconds];
}

-(void)countdown {
    MainInt -= 1;
    [self timeFormat];
    if (MainInt <= 0){
        [self->timer invalidate];
        self->timer = nil;
        [timerDisplay removeFromSuperview];
    }
}

-(void)start {
    MainInt = 5;
    [self timeFormat];
    if(self->timer == nil){
        self->timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(countdown) userInfo:nil repeats:YES];
    }
}

@end 
```

我希望有人可以帮助我创建一个新类来保存每个新的计时器实例并保留对它们的引用。我缺乏目标 C 的知识来完成这项工作。或者，也许您可​​以将我链接到可以帮助我的示例。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T04:50:18.580

你的代码对我来说看起来不错。我会说你有多余的实例变量。`timerActive`是多余的，因为您可以检查是否`self->timer`是非`nil`. `seconds`并且`minutes`可能只是本地的`-timeFormat`，它们不需要是实例变量。

问题是您不知道如何将其推广到具有多个计时器的多个按钮标签对吗？我建议您创建一个新类来充当每个按钮标签对的控制器。该类将派生自`NSObject`. 您的视图控制器类的当前实例变量将是这个新类的实例变量，尽管您不一定要`IBOutlet`用于标签。（一个插座连接在一个 NIB 中，但这些可能是动态创建的，并且会在代码中连接。）

您将为所需的每个按钮标签对分配并初始化这个新类的实例。您将传递指向标签的指针和开始时间值。您还可以将指针传递给`ViewController`拥有它的对象，以便它可以在停止或类似的情况下通知它。相应的按钮将设置为针对这个新控制器。`ViewController`将跟踪可变数组中的每个控制器。当它完成一个时，它会删除它的标签、它的按钮和控制器。

这有帮助吗？

# ruby - Windows 命令提示符下的 Ruby ri 未提供正确信息

> ID：10561023
> 
> 赞同：1
> 
> 时间：2012-05-12T04:11:55.603
> 
> 标签：ruby, ri

Ri 似乎正在为 Rails 提供结果。有什么不对劲。谁能帮我从 ri 获得有用的结果。我有一个干净且最新的 Ruby (1.9.3) 和 Rails (3.2.3) 安装。例如，如果`ri Range`我得到这个。

```
Range < Object
(from gem activesupport-3.2.3)

Constants:
RANGE_FORMATS
[not documented]

Instance methods:
include_with_range?
overlaps?
step_with_blockless
to_default_s
to_formatted_s
to_s 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T05:41:46.463

@Casper 向我指出了[另一个 SO 答案](https://stackoverflow.com/questions/1587354/ruby-1-9-ri-problem) ，它为我提供了了解 ri 发生了什么所需的信息。1\. ri 不会自动安装，因为它会增加安装的大小；而是安装 .chm 样式的帮助文件。但这些似乎与通过[RubyDocs](http://www.ruby-doc.org/core-1.9.3/index.html#classes)在线提供的帮助相同。2\. 我认为 rails 可能已经安装了一些 ri 文档，所以当我使用 ri 时，我确实会得到某些查询的结果，就像我在上面的示例中列出的那样。

# python - 从 django shell (manage.py) 运行 python 模块

> ID：10561025
> 
> 赞同：1
> 
> 时间：2012-05-12T04:12:02.773
> 
> 标签：python, database, django, api

我正在尝试将数据填充到我的数据库中，并且我想使用 django API 来执行此操作。我编写了一个 python 模块，可以很容易地做到这一点。

但是，在 django shell (manage.py) 中，似乎无法运行我的“populate.py”文件。

**是否可以从 django shell 运行我的 populate.py？或者，我应该改为运行常规 python 终端并导入必要的 django 组件吗？无论哪种方式，我都会非常感谢一些指示。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T04:33:09.163

您也可以考虑使用[loaddata 命令](https://docs.djangoproject.com/en/dev/ref/django-admin/#loaddata-fixture-fixture)或[创建自己的命令](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T04:38:12.750

这是我从命令行运行 django 东西的标准包装器。如果您有要运行的 cron 脚本，这也很有用。

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import os, sys
# If this script lives in a child directory of the main project directory
# uncomment the following 2 lines:
#dir_parent = os.path.dirname(os.path.dirname(os.path.realpath(__file__)))
#sys.path.insert(0, dir_parent)

from django.core.management import setup_environ
import settings
setup_environ(settings)

from django.db import transaction

# import whatever you like from app.models or whatever
# do random stuff.

# If you are *changing* database records,
# wrap your database code either in:
@transaction.commit_manually
def foo():
   ... stuff
   transaction.commit()

# OR end you script with:
transaction.commit_unless_managed() 
```

**更新评论：**

上面提到的变量不是`file`，它是`__file__`（即2个下划线`file`和2个下划线）。这总是由 Python 解释器设置为它出现的文件的完整路径。正如评论所说，如果这个脚本位于主目录的子目录中，则文件名的目录为您提供主项目目录的目录名称，并将其添加到`sys.path`将确保您的所有导入正常工作。如果脚本*位于*主目录中并且您从那里执行它，那么您不需要这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-18T09:56:19.960

试试 django-extensions，它有一个 runscript 命令，你把它放在脚本目录中。

奇怪的是，主文档中似乎缺少该命令，但是如果您 google django-extensions runscript，您会找到示例和文档。

# objective-c - 应用内购买问题

> ID：10561033
> 
> 赞同：1
> 
> 时间：2012-05-12T04:13:12.870
> 
> 标签：objective-c, ios, xcode

我正在沙盒模式下测试我的应用内购买，但我不明白为什么即使我点击了购买，应用内购买提醒框仍然弹出...

在我点击“购买”后第二次弹出，我点击“取消”，出现错误：

```
Thread 1:EXC_BAD_ACCESS (code1, address=0x6000008) 
```

我的.m：

> -(void)updateCredit{ //添加到 plist NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); NSString *documentsDirectory = [paths objectAtIndex:0]; NSString *path = [documentsDirectory stringByAppendingPathComponent:@"data.plist"];
> 
> ```
> NSMutableArray *currPlist = [[NSMutableArray alloc] initWithContentsOfFile: path];
> 
> NSString *lastEx = [currPlist objectAtIndex:0];
> int lastScore = [[currPlist objectAtIndex:1] intValue];
> int numberOfTries = [[currPlist objectAtIndex:2] intValue];
> int totalScore = [[currPlist objectAtIndex:3] intValue];
> int avg = [[currPlist objectAtIndex:4] intValue];
> int credit = [[currPlist objectAtIndex:5] intValue];
> 
> credit += 10;
> 
> NSMutableArray *updatePlist = [[NSMutableArray alloc] init];
> [updatePlist addObject:lastEx];
> [updatePlist addObject:[NSNumber numberWithInt:lastScore]];
> [updatePlist addObject:[NSNumber numberWithInt:numberOfTries]];
> [updatePlist addObject:[NSNumber numberWithInt:totalScore]];
> [updatePlist addObject:[NSNumber numberWithInt:avg]];
> [updatePlist addObject:[NSNumber numberWithInt:credit]];
> [updatePlist writeToFile: path atomically:YES]; 
>  } 
> ```

```
-(void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions{
    for (SKPaymentTransaction *transaction in transactions) {
        switch (transaction.transactionState) {
            case SKPaymentTransactionStatePurchasing:

            break;
        case SKPaymentTransactionStatePurchased:
            [[SKPaymentQueue defaultQueue]finishTransaction:transaction];
            [self updateCredit];
            [self dismissModalViewControllerAnimated:YES];
            break;

        case SKPaymentTransactionStateRestored:
            [[SKPaymentQueue defaultQueue]finishTransaction:transaction];
            break;

        case SKPaymentTransactionStateFailed:
            if (transaction.error.code != SKErrorPaymentCancelled) {
                UIAlertView *alert2 = [[UIAlertView alloc]initWithTitle:@"Error" message:@"Error updating credit" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                [alert2 show];
            }
            [[SKPaymentQueue defaultQueue]finishTransaction:transaction];
            break;

        default:
            break;
    }
}
} 
```

# nhibernate - Convert SQL query to Nhibernate Criteria

> ID：10561035
> 
> 赞同：0
> 
> 时间：2012-05-12T04:14:24.287
> 
> 标签：nhibernate, count, distinct, having

**My SQL query:**

```
select [CompanyId] 
from dbo.Bussiness_Company
where [BussinessId] in (11,12,13)
group by [CompanyId]
having COUNT(distinct [BussinessId])=3 
```

**Explain:** I have a table **Bussiness_Company** table :

**Bussiness_Company**

Id*

BussinessId

CompanyId

## **My data:**

Id---------BussinessId------------CompanyId

1----------10---------------------100

2----------11---------------------100

3----------12---------------------100

## Resaul query

CompanyId

100

*   Thank for any hepl!

Sloved:

## This is my code:

```
DetachedCriteria detachedCriteria = DetachedCriteria.For<BussinessCompany>();
 detachedCriteria.SetProjection(Projections.Property("Company"));
 detachedCriteria.SetProjection(Projections.GroupProperty("Company"));
 Disjunction disjunction = Restrictions.Disjunction();
 foreach (Bussiness bussiness in list)
 {
   disjunction.Add(Restrictions.Eq("Bussiness", bussiness ));
 }                  detachedCriteria.Add(disjunction).Add(Restrictions.Eq(Projections.CountDistinct<BussinessCompany>(m => m.Bussiness), list.Count));

 IList<Sonomi.Core.BusinessObjects.Bussiness> bussiness =
                    bussinessUnitManager.CreateCriteria().Add(Subqueries.PropertyIn("Id", detachedCriteria)).List
 <Sonomi.Core.BusinessObjects.BussinessUnit>();

 dgrCer.DataSource = bussiness;
 dgrCer.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T12:01:32.170

您可以尝试这样的 QueryOver 代码：

```
var bussinessIdCount = 3;
var bussinessIds = new[] { 11, 12, 13 };
Bussiness_Company bussinessCompany = null;
session.QueryOver(() => bussinessCompany)
  .WhereRestrictionOn(() => bussinessCompany.BussinessId).IsIn(bussinessIds)
  .Select(Projections.Group(Projections.Property(() => bussinessCompany.CompanyId)))
  .Where(Restrictions.Gt(Projections.CountDistinct(() => bussinessCompany.BussinessId), bussinessIdCount)); 
```

# javascript - 如何从 javascript 函数返回两个参数？

> ID：10561037
> 
> 赞同：1
> 
> 时间：2012-05-12T04:14:45.820
> 
> 标签：javascript

我有以下内容：

```
function getPk(entity) {
    var store = window.localStorage;
    switch (entity) {
        case "City":
            if (store.getItem('AccountID')) {
                // Need to return both of the below pieces of information
                return store.getItem('AccountID') + "04" + "000";
                return "CityTable";

            } else {
                paramOnFailure("Please reselect"); 
                return false;
            }
            break; 
```

问题是我需要能够调用这个函数并返回两个字符串。在这里，我展示了两个返回语句，但我知道我不能这样做。

有没有一种干净的方法可以将两个字符串返回给调用我的 getPk(entity) 函数的函数？

如果可能的话，您能否举例说明我如何阅读返回的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T04:18:46.770

将它们作为数组或在对象内返回。

```
return [store.getItem('AccountID') + "04" + "000", "CityTable"]; 
```

或者

```
return { accountID: store.getItem('AccountID') + "04" + "000", table: "CityTable" }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T04:18:20.670

您只能从 JavaScript 中的函数返回单个值，但该值可以是内部包含多个值的结构，例如数组：

```
return [store.getItem('AccountID') + "04" + "000", "CityTable"]; 
```

只需确保调用它的函数知道您用于返回值的约定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T05:28:31.883

在 javascript 和几乎所有语言中，返回多个值是不可能的。

但是，您可以返回包含您要返回的所有值的自定义对象。

请参阅以下链接以了解如何创建对象。 [创建具有属性的对象，](https://stackoverflow.com/questions/8224680/create-an-object-with-properties)

# model-view-controller - How to store business logic in domain object?

> ID：10561038
> 
> 赞同：0
> 
> 时间：2012-05-12T04:16:17.427
> 
> 标签：model-view-controller, design-patterns, architecture, model

I will display a grid of a view model `class M {string A, int B, float C, int D, .....}`:

1.  Render the number in red if it's negative.
2.  Highlight the background of the cell if `A is in 'xxx', 'zzz' and B = 0 or D > 200...`
3.  Set the background of the row to grey if `E > 100 and F < 0....`

Are these considered business logic? Where to put these logic if they are? For (3), I guess a new read-only property can be created in in the view model? But it make the M not POJO/POCO any more? I read that the business logic should be in domain object. Is the domain object implemented using POJO/POCO?

Is there any code sample shows how the business logic is stored in domain objects?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:23:42.860

有几种方法可以实现您正在尝试做的事情。您在描述中多次提到“视图模型”一词，这让我认为您正在尝试使用设计模式“MVVM”（模型视图视图模型），这在使用 WPF 或 Silverlight 技术时很流行，因为它支持针对视图的数据绑定，但也可以扩展到其他技术。

在 MVVM 中，层分为模型、视图模型和视图。

**模型**本质上是您的领域，仅用于特定领域的建模。您的应用程序实体应该存在于此，但不应进行计算或对域实体的操作。例如。如果它是一个自行车领域，您的“自行车”和“骑手”类应该存在于此，但不应有与计算比赛获胜者相关的代码，或者在应用程序 GUI 中显示获胜者的颜色。

**视图模型**是您准备要呈现到视图（用户界面）中的域实体的地方。您几乎可以通过将域实体包装到新类中来实现这一点，这些新类在构造函数中获取域对象，然后公开或将现有属性转换为您希望在视图中显示的属性。在自行车类比中，您的 Bike 对象可能具有 Make、Model、Cost、RRP、TimeBuilt 属性，因此在视图模型中，我将公开 Make、Model 属性，然后*将*Cost 和 RRP 与保证金一起转换以得出零售价格（如前端所示）。

您可能已经猜到了**View**是显示此信息的位置。这可能是桌面、移动或网络前端——这并不重要。这也是应该实现 UI 渲染的地方。如果我想向我的客户突出优惠，并将任何零售价格非常好的自行车涂成绿色 - 我会在这里做。

因此，当与您的示例相关时，应该在视图中实现对象显示的格式化。即使您不使用 MVVM，您也可以通过*将*域对象扩展为要部署和操作的 Wrapper 类来获得非常相似的结果。您的规则，例如

> 如果 A 在 'xxx'、'zzz' 且 B = 0 或 D > 200，则突出显示单元格的背景

可以在您的视图模型类上以布尔值建模，为您提供所需的效果，而不会用非特定代码污染您的域对象。

无论架构选择如何（MVC、MVP、MVVM 等），这些都是很好的开发指南，因为它们部署了应用程序层之间的**关注点分离。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:41:13.497

术语“视图模型”是错误的。View 和 Model 是两个独立的东西，每个都处理应用程序的不同/独立的关注点：封装业务逻辑的模型，视图处理表示/显示。简单来说，模型就是你的领域对象。您在示例中显示的内容与演示相关。它属于视图，不属于模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T23:50:40.843

您可以将所有 3 个计算的输出存储为对象的属性，然后将计算的对象传递给您的视图。

例如，在第 1 点呈现数字，如果它是负数。这种红色可以传递给视图。确定颜色为红色的实际计算可能发生在您的 biz 逻辑层中。

请让我知道这可不可以帮你。

# android - Only one image is appearing in every grid of gridview

> ID：10561042
> 
> 赞同：2
> 
> 时间：2012-05-12T04:17:58.267
> 
> 标签：android, gridview

I had developed an application where I want to display images inside grid view from specific folder of sd card. The application is working but only 1st image from folder is appearing in every grid, while I want all images should display. I am not getting where I went wrong. Below, I am posting my code:

**Album Activity:**

```
public class Album3Activity extends Activity {
static File [] mediaFiles;
static File imageDir;
GridView gridView;
ImageAdapter adapter;
Intent in;
public static final String TAG = "Album3Activity";
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.grid);
    prepareList();
    adapter = new ImageAdapter(this, mediaFiles);
    gridView = (GridView)findViewById(R.id.gridview);
    gridView.setAdapter(adapter);
    gridView.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                long arg3) {
            in = new Intent(getApplicationContext(), FullScreen.class);
            in.putExtra("id", position);
            startActivity(in);
        }
    });
}//onCreate

public static Bitmap prepareList() {
    imageDir = new File(Environment.getExternalStorageDirectory().toString()+
             "/diplomat");
    mediaFiles = imageDir.listFiles();
    Bitmap bmp = null;
    for(File imagePath:mediaFiles){
        try{
            bmp = BitmapFactory.decodeStream(imagePath.toURL().openStream());
        }catch(Exception e){
            Log.d(TAG, "Exception: "+e.toString());
        }//catch
    }//for
    Log.d(TAG, "prepareList() called");
    return bmp;
}//prepareList 
```

}//class

**Image Adapter:**

```
public class ImageAdapter extends BaseAdapter{
Activity act;
File[] mFiles;
public static final String TAG = "ImageAdapter";
public ImageAdapter(Activity act, File[] mFiles){
    super();
    this.act = act;
    this.mFiles = mFiles;
}//ImageAdapter

public int getCount() {
    return mFiles.length;
}//getCount

public Object getItem(int postion) {
    return mFiles[postion];
}//getItem

public long getItemId(int position) {
    return 0;
}//getItemId

public static class ViewHolder{
    ImageView iv;
}

public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder view;
    LayoutInflater li = act.getLayoutInflater();
    if(convertView == null){
        view = new ViewHolder();
        convertView = li.inflate(R.layout.gridview_row, null);
        view.iv = (ImageView)convertView.findViewById(R.id.imageView1);
        convertView.setTag(view);
    }//if
    else{
        view = (ViewHolder)convertView.getTag();
    }//else
    Bitmap bmp = Album3Activity.prepareList();
    view.iv.setImageBitmap(bmp);
    Log.d(TAG, "getView called");
    return convertView;
}//getView 
```

}//ImageAdapter

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T04:28:01.473

Note prepareList method, it is not returning bitmap according to the position or index of the imageview, so it would return same image all the time, change it to accept an index parameter, and return bitmap accordingly, as:

```
public static Bitmap prepareList(int index) {
    imageDir = new File(Environment.getExternalStorageDirectory().toString()+
             "/diplomat");
    mediaFiles = imageDir.listFiles();
    File imagePath=imageDir[index];
    Bitmap bmp = null;
        try{
            bmp = BitmapFactory.decodeStream(imagePath.toURL().openStream());
        }catch(Exception e){
            Log.d(TAG, "Exception: "+e.toString());
        }//catch
   Log.d(TAG, "prepareList() called");
    return bmp;
}//prepareList 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T04:27:10.120

In getView everytime your are calling album3Activity.prepareList() so it will return single image for all the grid. Try with the passing the particular imagepath in mFiles[position] each time and get the bitmap or get all the bitmap at once and store it in arrayList and pass the arraylist to adapter and use it in getView.

Try this..it may help you..

# sql - SQL 脚本中是否需要 BEGIN/END？

> ID：10561046
> 
> 赞同：1
> 
> 时间：2012-05-12T04:19:37.660
> 
> 标签：sql, tsql, syntax, sql-server-2008-r2

SQL 脚本中是否需要 BEGIN/END（一般而言）或者可以用 { 和 } 替换它们吗

例子：

```
IF DB_ID('comics') IS NOT NULL        
    BEGIN
        PRINT 'Database exists - dropping the comics database.';
        DROP DATABASE comics;
    END 
```

VS

```
IF DB_ID('comics') IS NOT NULL        
{
    PRINT 'Database exists - dropping the comics database.';
    DROP DATABASE comics;
} 
```

我正在使用 MS SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T04:26:12.533

您应该使用[`BEGIN...END`](http://msdn.microsoft.com/en-us/library/aa225998%28v=sql.80%29.aspx)for 语句块。[来源](http://msdn.microsoft.com/en-us/library/ms182717.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T04:31:08.167

节目的文档[`IF...ELSE`](http://msdn.microsoft.com/en-us/library/ms182717.aspx)：

```
IF Boolean_expression 
     { sql_statement | statement_block } 
[ ELSE 
     { sql_statement | statement_block } ] 
```

但是，[Transact-SQL 语法约定 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms177563.aspx)页面显示：

```
{ } (braces)    Required syntax items. Do not type the braces. 
```

因此，大括号不是您可以在代码中输入的东西，而只是表明语句中恰好*有一个* `sql_statement`或`statement_block`必需的。`IF`（当然，a`statement_block`可以包含多个`sql_statement`s，只要你使用`BEGIN`和`END`围绕它们。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T04:29:59.207

从未听说过 SQL 中的 {}。SQL 92 规范使用 BEGIN END。我认为 BEGIN END 是唯一的选择。

# java - Progress bar only load one time

> ID：10561049
> 
> 赞同：-1
> 
> 时间：2012-05-12T04:21:43.860
> 
> 标签：java, android

My progress bar can only use one time,when i click it second time,it likes a loop,never end,what is the problem?

```
class ProgressThread extends Thread {   

    final static int DONE = 0;
    final static int RUNNING = 1;
    int maxBarValue=100;
    int delay=40;

    Handler mHandler;
    int mState;
    int total;

    // Constructor with an argument that specifies Handler on main thread
    // to which messages will be sent by this thread.

    ProgressThread(Handler h) {
        mHandler = h;
    }

    @Override
    public void run() {
        mState = RUNNING;   
        total = maxBarValue;
        while (mState == RUNNING) {
            // The method Thread.sleep throws an InterruptedException if Thread.interrupt() 
            // were to be issued while thread is sleeping; the exception must be caught.
            try {
                // Control speed of update (but precision of delay not guaranteed)
                Thread.sleep(delay);
            } catch (InterruptedException e) {
                Log.e("ERROR", "Thread was Interrupted");
            }

            // Send message (with current value of  total as data) to Handler on UI thread
            // so that it can update the progress bar.

            Message msg = mHandler.obtainMessage();
            Bundle b = new Bundle();
            b.putInt("total", total);
            msg.setData(b);
            mHandler.sendMessage(msg);
            total--;    // Count down
        }
        total=maxBarValue;
    }

public class ProgressBarActivity extends Activity {

    ProgressThread progThread;
    ProgressDialog progDialog;
    Button button1, button2;
    int typeBar;                     // Determines type progress bar: 0 = spinner, 1 = horizontal
    int delay = 40;                  // Milliseconds of delay in the update loop
    int maxBarValue = 200;           // Maximum value of horizontal progress bar

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Process button to start spinner progress dialog with anonymous inner class
        button1 = (Button) findViewById(R.id.Button01);
        button1.setOnClickListener(new OnClickListener(){
            public void onClick(View v) {
                typeBar = 0;
                showDialog(typeBar);
            }
        }); 

        // Process button to start horizontal progress bar dialog with anonymous inner class
        button2 = (Button) findViewById(R.id.Button02);
        button2.setOnClickListener(new OnClickListener(){
            public void onClick(View v) {
                typeBar = 1;
                showDialog(typeBar);
            }
        }); 
    }

    // Method to create a progress bar dialog of either spinner or horizontal type
    @Override
    protected Dialog onCreateDialog(int id) {
        switch(id) {
        case 0:                      // Spinner
            progDialog = new ProgressDialog(this);
            progDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
            progDialog.setMessage("Loading...");
            progThread = new ProgressThread(handler);
            progThread.start();
            return progDialog;
        case 1:                      // Horizontal
            progDialog = new ProgressDialog(this);
            progDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            progDialog.setMax(maxBarValue);
            progDialog.setMessage("Dollars in checking account:");
            progThread = new ProgressThread(handler);
            progThread.start();
            return progDialog;
        default:
            return null;
        }
    }

    // Handler on the main (UI) thread that will receive messages from the 
    // second thread and update the progress.

    final Handler handler = new Handler() {
        public void handleMessage(Message msg) {
            // Get the current value of the variable total from the message data
            // and update the progress bar.
            int total = msg.getData().getInt("total");
            progDialog.setProgress(total);
            if (total <= 0){
                dismissDialog(typeBar);
                progThread.setState(ProgressThread.DONE);
            }
        }
    };
}

    // Set current state of thread (use state=ProgressThread.DONE to stop thread)
    public void setState(int state) {
        state=ProgressThread.DONE;
        mState = state;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T04:25:09.637

[ProgressBar.postInvalidate()](https://developer.android.com/reference/android/widget/ProgressBar.html#postInvalidate%28%29) you can try this.

# php - 在 CakePHP 旁边的子文件夹中托管 phpBB3

> ID：10561050
> 
> 赞同：3
> 
> 时间：2012-05-12T04:22:11.697
> 
> 标签：php, .htaccess, cakephp, phpbb

我的 Web 根目录中有 CakePHP 文件（假设`http://www.example.com/`）。

现在，我希望在我的 Web 根目录下名为“forum”的文件夹中托管 phpBB3 安装。所以当有人访问（`http://www.example.com/forum`）时，他们可以使用phpBB。

我如何实现这一目标？我已经尝试查看 CakePHP 文档以了解路由配置，但找不到与此相关的任何内容。

我很确定这与此有关，`.htaccess`但不确定到底是什么。

注意 - 我尝试创建一个名为`forum`under的文件夹，`app/webroot`但这通常会重定向到`http://www.example.com/app/webroot/forum`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T08:19:20.553

在 Cake 的根`.htaccess`文件中你可以放：

`RewriteRule ^forum/ - [L]`

如果您在此之前插入`RewriteRule ^$ app/webroot/ [L]`它，它将允许请求`http://www.example.com/forum`直接转到 phpBB，绕过 Cake。

# jquery - 有条件的远程验证

> ID：10561053
> 
> 赞同：3
> 
> 时间：2012-05-12T04:23:07.330
> 
> 标签：jquery, jquery-validate, depends

我有一个表单，我正在通过 jQuery Validate 插件进行验证。除了一件事，一切都很好。

我有一个我使用的字段，即远程规则，并且我正在使用 AJAX 检查是否已经存在同名的应用程序记录。仅当用户更改字段中的值时，我才需要执行此验证。

这是我拥有的验证代码：

```
$('#createapp').validate({
    rules: {
      appname: {
        minlength: 8,
        required: true,
        remote: {
                url: "<?php echo base_url();?>app/application/check_app",
                type:"POST",
                async: false,
                data:  {
                appname: function() {
                return $("#appname").val();
          }
        }  
      }
      },
      apptitle: {
        required: true
      }
    },
    messages: {
        appname: {
      remote: "Application with same name already exists"
      }
     },
    highlight: function(label) {
        $(label).closest('.control-group').addClass('error');
    },
    success: function(label) {
        label
            .text('OK!').addClass('valid')
            .closest('.control-group').addClass('success');
    }
  }); 
```

我需要这样做：

仅当用户更改 appname 字段中的文本时才执行远程验证。我尝试使用依赖，但无法使其工作。这基本上是我尝试过的：

```
remote: {
            depends: function(element){
            return ($('#appname').val() != "<?php echo trim($application[0]->app_name) ?>" );
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T03:04:06.943

我终于使用了一种解决方法。如下

1.  将原始名称作为隐藏参数传递

    ```
    <input type="hidden" name="orgappletname" id="orgappletname"
      value="<?php echo $applet[0]->applet_name ?>"> 
    ```

2.  设置 jQuery 以与原始名称进行比较，并查看模糊时是否发生了某些变化。如果是，则触发 ajax 请求以检查更改的名称。

    ```
    $('#appletname').blur(function(){
     if($(this).val() != $('#orgappname').val()){
        $.ajax({
            url: "<?php echo base_url() . "apl/applet/check_applet" ?>",
            data: "appletname=" + $(this).val(),
            type: "POST",
            success: function (msg) {
            }
        });
      }
      }); 
    ```

我不确定这是否是正确的方法，但它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:16:38.233

@user1017268

这也有效，不知道为什么，预计它会失败；-) 如果您将远程验证规则换成单独的方法，那么您可以执行类似 (coffeescript) 的操作：

```
getEmailRule = () ->
  which = window.location.pathname.split('/')[1]
  if which == 'renew' then required: true
  else remote: { url: "/user/exists", type: "POST", async: false } 

isValid = $('#subscriptionForm').validate({
  rules: {
    email:      getEmailRule()
    password:   "strongPass"
    orderTotal: "gtZero"
  }
}).form() 
```

`email must exist`由于续订用户已经登录，因此仅执行远程电子邮件存在检查订阅未续订（即注册） ；-)

# java - WCF Duplex service and Android client? Any possibilities

> ID：10561054
> 
> 赞同：0
> 
> 时间：2012-05-12T04:23:27.807
> 
> 标签：java, android, .net, wcf, duplex

I have created a **WCF duplex service** and client in .NET and its working fine and its pretty good also.
Now I wish to make an Android client. I have used **kSoap** previously for webservices and those are good for client to service connections.
But in the case of **duplex** communication in which **I need the service to sent message to client**, I dont know how to implement.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:23:32.513

不幸的是，没有一个双工绑定是可互操作的

此时轮询可能是您最简单的选择。更进一步，也许您可​​以使用 WebSockets 之类的东西（WCF 在下一个版本中支持它们 - 4.5）

# jquery - jquery selector multiple classes on set of 's (contains one class, not the other)

> ID：10561057
> 
> 赞同：1
> 
> 时间：2012-05-12T04:24:14.650
> 
> 标签：jquery, css-selectors

This may be easier than what I've tried. I have a set of `<div>`'s such as `<div id="site-abc" .. "site-def">` and each has similar HTML content. The DIV's have multiple classes like `"ui-tabs-panel class2 ui-tabs-hide"`. One does not have ui-tabs-hide. That's what I need a selector for, and then from that I need to find unique text within that DIV that's within bingo!.

What's the right jQuery selector code for the following steps: A) find right `<div>` with `class="ui-tabs-panel"` but NOT CONTAINING `"ui-tabs-hide"`; B) take that selector result and find `('th.target2')` and get the `.text()`?

```
var tabs = $('#editors.not(.ui-tabs-hide'); 
var my_text = tabs.find('th.target2').text();

<div class="grid-editor">
    <div id="editors" class="ui-tabs">
        <div id="site-abc" class="ui-tabs-panel class2 ui-tabs-hide"> 
            //duplicates HTML like "site-ghi" including <th>bingo!</th>
        </div>
        <div id="site-def" class="ui-tabs-panel class2 ui-tabs-hide">
            //duplicates HTML like "site-ghi" including <th>bingo!</th>
        </div>
        <div id="site-ghi" class="ui-tabs-panel class2”&gt;
            <table class=”my-table”&gt;
                <thead>
                    <tr>

                        <th class="target1">abc1</th>
                        <th class="target2">bingo</th>
                    </tr>
                </thead>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T05:15:27.583

**尝试这个 ：**

```
var val = $('div.ui-tabs-panel:not(.ui-tabs-hide)').find('th').filter(".target2").text();
alert(val); 
```

见这里：http: [//jsfiddle.net/YxUfq/6/](http://jsfiddle.net/YxUfq/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T04:26:58.730

You almost got it. Use `:not` selector to omit the one you don't need.

```
var divs = $('.ui-tabs-panel:not(.ui-tabs-hide)'); 
```

I am not sure if this is related to the problem, but there is mistake in your selector statement as well.

```
var tabs = $('#editors.not(.ui-tabs-hide');
                                      //^ No Closing bracket 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T04:57:02.570

我认为最酷的方法是：

```
var text = $(".ui-tabs-panel:not(.ui-tabs-hide) th.target2").text(); 
```

希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T04:30:26.047

```
var my_text = $('#target2', '.ui-tabs-panel:not(.ui-tabs-hide)').text(); 
```

[小提琴](http://jsfiddle.net/adeneo/hpyTk/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T04:47:56.287

```
var divs = $('.ui-tabs-panel:not(.ui-tabs-hide)'); 
```

或者

```
var divs = $('.ui-tabs-panel').not('.ui-tabs-hide'); 
```

然后发现`target2`你可以试试这个：

```
$('th#target2', divs).text(); 
```

根据您的标记，'target2'`id`不是`class`. 所以正确的意志`th#target2`，不是`th.target2`

# c# - Progress update while WCF is executed

> ID：10561061
> 
> 赞同：2
> 
> 时间：2012-05-12T04:25:39.807
> 
> 标签：c#, asp.net, .net, wcf

I have an ASP.NET 3.5 app consuming a C# WCF in an intranet.

The service executes three commands sequentially taking 2-3 mins each. I'd like to keep the user updated with the command that is running, for example, refreshing a label.

I'm not an expert on this matter so I'd like to know what is the best way to do this.

Thanks,

Ps. The service and the client are hosted in the same server using IIS 7.5.

**EDIT**

Well, I've been working on this for the past two days .. I'm not an expert :)

I'm following Eric's suggestion, use of WSHttpDualBinding and a callback function.

So, I was able to build a service using duplex binding and define a callback function, however I can't define the callback function on the client side, can you please shed some light on this.

```
namespace WCF_DuplexContracts
{
    [DataContract]
    public class Command
    {
        [DataMember]
        public int Id;
        [DataMember]
        public string Comments;
    }

    [ServiceContract(SessionMode = SessionMode.Required, CallbackContract = typeof(ICallbacks))]
    public interface ICommandService
    {
        [OperationContract]
        string ExecuteAllCommands(Command command);
    }

    public interface ICallbacks
    {
        [OperationContract(IsOneWay = true)]
        void MyCallbackFunction(string callbackValue);
    }

    [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
    public class CommandService : ICommandService
    {
        public string ExecuteAllCommands(Command command)
        {
            CmdOne();
            //How call my callback function here to update the client??
            CmdTwo();
            //How call my callback function here to update the client??
            CmdThree();
            //How call my callback function here to update the client??

            return "all commands have finished!";
        }

        private void CmdOne()
        {
            Thread.Sleep(1);
        }

        private void CmdTwo()
        {
            Thread.Sleep(2);
        }

        private void CmdThree()
        {
            Thread.Sleep(3);
        }
    }
} 
```

**EDIT 2**

This the client implementation,

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Client.DuplexServiceReference;
using System.ServiceModel;

namespace Client
{
    class Program
    {
        public class Callback : ICommandServiceCallback
        {
            public void MyCallbackFunction(string callbackValue)
            {
                Console.WriteLine(callbackValue);
            }
        }

        static void Main(string[] args)
        {
            InstanceContext ins = new InstanceContext(new Callback());
            CommandServiceClient client = new CommandServiceClient(ins);

            Command command = new Command();
            command.Comments = "this a test";
            command.Id = 5;

            string Result = client.ExecuteAllCommands(command);
            Console.WriteLine(Result);

        }
    }
} 
```

And the result:

```
C:\>client
cmdOne is running
cmdTwo is running
cmdThree is running
all commands have finished! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T05:18:19.703

在回调中使用双工绑定和更新状态。

编辑*您需要获取对回调通道的引用

```
public string ExecuteAllCommands(Command command)
    {

        var callback = OperationContext.Current.GetCallbackChannel<ICallbacks>();                  
        CmdOne();
        //How call my callback function here to update the client??
        callback.MyCallbackFunctio("cmdOne done");
        CmdTwo();
        callback.MyCallbackFunctio("cmdTwo done");
        //How call my callback function here to update the client??
        CmdThree();
        callback.MyCallbackFunctio("cmdThree done");
        //How call my callback function here to update the client??

        return "all commands have finished!";
    } 
```

您会希望服务方法无效，以免超时

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T04:34:25.480

我会创建几个操作。一个用于启动冗长的命令，另一个用于获取状态。如果您有一项操作等待命令完成，则会遇到超时问题并且无法确定进度。

# c# - 在 x 小时后更新数据，在 Sql Server / 或 Wpf C#

> ID：10561074
> 
> 赞同：0
> 
> 时间：2012-05-12T04:29:11.897
> 
> 标签：c#, wpf, database, linq-to-sql

我有一个为其用户使用许可系统的程序。现在我的数据库中有一个整数列 LicenceDays，我想每 24 小时将该值减 1。例如，假设我的 LicenceDays 为 4，24 小时后更新数据库，它将在3.

现在我不明白我会怎么做。我从哪里开始？我可以在 Sql Server 本身中实现这一点，还是可以在我的 WPF C# 程序中使用某种代码？我正在使用 LINQ to SQL 来访问我的数据库。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T04:45:49.393

由于这是一个重复的 SQL 任务，可能最简单和最可维护的解决方案是在 SQL Server 本身内创建一个作业。您可以编写将“LicenseDays”减 1 的 SQL 语句，并安排它每 24 小时运行一次。您甚至可以使用 SQL Server Management Studio 中的 GUI 来安排、更新和启动/停止此操作。

有关 SQL Server 作业的更多信息：http: [//msdn.microsoft.com/en-us/library/ms190268.aspx](http://msdn.microsoft.com/en-us/library/ms190268.aspx)

# python - 在 plone 4.1 的顶级私人文件夹中创建工作流

> ID：10561075
> 
> 赞同：0
> 
> 时间：2012-05-12T04:29:39.617
> 
> 标签：python, plone

我希望创建对应于不同项目的顶级文件夹。每个项目文件夹对一个用户组都是私有的，即当用户登录时，他只能查看其文件夹的内容。该项目文件夹不应该有任何关联的工作流。即该文件夹的状态应该始终保持“私有”。在此文件夹中，我需要通过定义工作流程规则来自定义工作流程，或者使用站点的默认工作流程来工作。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T04:34:32.030

这是已关闭的[https://stackoverflow.com/questions/10497735/multiple-project-folders-with-workflows-plone-4-1 。](https://stackoverflow.com/questions/10497735/multiple-project-folders-with-workflows-plone-4-1)刚刚重新编辑了帖子。我遇到了一个适合我的解决方案。想与面临类似挑战的人分享它，也与您分享[https://stackoverflow.com/users/835961/sdupton](https://stackoverflow.com/users/835961/sdupton)感谢您回复我的票：重要提示：要始终将顶级文件夹设为私有，我们可以定义一个只有 1 个状态的自定义工作流：私有您可以使用 ZMI，选择 Contents/portal_workflow/ 然后选项卡内容和复制并粘贴文件夹的 Intranet_workflow。将其重命名为 private_workflow。然后对于 private_workflow 的状态，只保留私有状态并删除工作流的所有转换和其他状态。选择内容类型文件夹并将自定义 private_workflow 应用到它。对于子文件夹，使用工作流程规则继续分配给它们的工作流程。

# c - 用户尝试停止服务时的警告窗口

> ID：10561081
> 
> 赞同：0
> 
> 时间：2012-05-12T04:30:29.660
> 
> 标签：c, windows, winapi, service, windows-services

我正在用“C”编写服务，一旦用户尝试停止服务（使用“确定”和“取消”按钮），我想显示一个警告窗口。

是否有任何特定的 Windows API 可用于实现此目的？还有其他简单的方法可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T04:36:32.310

不，这是不可能的。Windows 服务无法直接与用户桌面交互，因此它们将无法显示任何类型的用户界面。

不过，这应该没什么大不了的。您必须拥有足够的权限才能停止和启动服务，默认情况下，只有管理员拥有这些权限。如果您不希望用户无意中停止您的服务，那么您应该利用权限为您解决该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T04:36:35.027

您使用服务控制面板停止服务；您的服务通常无权访问此控制面板进程，因此您无法覆盖它的 UI 并显示询问“确定/取消”的对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T05:19:45.010

我刚刚了解到，从服务对 UI 的任何调用都会导致它挂起。MSDN 确实有一个关于变通方法[的页面。](http://msdn.microsoft.com/en-us/library/ms683502%28VS.85%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T22:30:05.027

如果您不希望任何人能够停止服务，只需告诉服务经理您不接受停止消息即可。相反，您可以提供一个停止服务的应用程序（使用某种形式的 IPC），并且该应用程序可以根据需要显示尽可能多的警告消息。

另一方面，这*会*惹恼您的用户，而且这不太可能是必要的。默认情况下，只有管理员可以停止服务，人们不太可能在没有充分理由的情况下尝试停止您的服务。

# scala - Scala 下界和协方差

> ID：10561084
> 
> 赞同：5
> 
> 时间：2012-05-12T04:31:06.637
> 
> 标签：scala, covariance, lower-bound

我正在阅读此页面[http://www.scala-lang.org/node/137](http://www.scala-lang.org/node/137)，我了解协方差和下限是什么，但不清楚的是这一行：

> 不幸的是，该程序无法编译，因为只有在类型变量仅在协变位置使用时才能使用协方差注释。由于类型变量 T 显示为方法前置的参数类型，因此该规则被打破。

为什么`elem`必须是 的超类型的实例`T`，如果`ListNode`已经是协变的，为什么`elem`不能添加到当前列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T15:07:26.890

```
class Super             {override def toString = "Super"}
class Sub extends Super {override def toString = "Sub"; def subMethod {} }
val sup = new Super
val sub = new Sub 
```

想象一下允许以下情况：

```
// invalid code
class Foo[+T] {
  def bar(x: T) = println(x)
} 
```

由于`Foo`是 上的协变`T`，这是有效的（一个简单的向上转换，因为 a`Foo[Sub]`是 a `Foo[Super]`）：

```
val foo : Foo[Super] = new Foo[Sub] {
  override def bar(x: Sub) = x.subMethod
} 
```

`foo`据我们所知，现在是 a`Foo[Super]`和其他任何方法一样，但它的`bar`方法不起作用，因为`bar`实现需要 a `Sub`：

```
foo.bar(sup) // would cause error! 
```

# c# - ')' 附近的 SQL 语法错误

> ID：10561086
> 
> 赞同：0
> 
> 时间：2012-05-12T04:31:15.603
> 
> 标签：c#, sql, sql-server-2008

我正在实现一个使用 SQL 服务器数据库的 C# 桌面应用程序。

我有这个代码：

```
SqlConnection cn = new SqlConnection(@"Data Source=PC;Initial Catalog=FRAT_DB;Integrated Security=True");
SqlCommand cmdSelect = new SqlCommand("select MAX(PhotoID) from Photo", cn);
cn.Open();
SqlDataReader MaxID_Selector = cmdSelect.ExecuteReader();
double maxID = 0;
while (MaxID_Selector.Read())
{
    if (MaxID_Selector[0].ToString().Trim() != "") 
    {
        maxID = Convert.ToInt64(MaxID_Selector[0].ToString());
    }
}
maxID = maxID + 1;
cn.Close();

SqlCommand cmdb = new SqlCommand(@"IF EXISTS(SELECT * FROM Person WHERE PersonID = @personID) BEGIN  UPDATE Person SET PersonID = @PersonID, Name= @Name, Age= @Age,P_Group=@P_Group, Email= @Email END ELSE BEGIN INSERT INTO Person(PersonID,Name,Age,P_Group,Email) values(@PersonID,@Name,@Age,@P_Group,@Email)", cn);

cmdb.Parameters.AddWithValue("@PersonID", personID);
cmdb.Parameters.AddWithValue("@Name", textBox1.Text);
cmdb.Parameters.AddWithValue("@Age", textBox2.Text);
cmdb.Parameters.AddWithValue("@P_Group", textBox6.Text);
cmdb.Parameters.AddWithValue("@Email", textBox5.Text);` 
```

当我运行程序并尝试保存信息时，我收到以下错误消息：`Syntax Error Near ')'`

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T04:35:37.270

看起来您在插入后缺少“结束”。这是未经测试的，但请尝试以下操作：

```
SqlCommand cmdb = new SqlCommand(@"IF EXISTS(SELECT * FROM Person WHERE PersonID = @personID) 
                                       BEGIN  
                                           UPDATE Person SET PersonID = @PersonID, Name= @Name, Age= @Age,P_Group=@P_Group, Email= @Email 
                                       END 
                                   ELSE 
                                       BEGIN 
                                           INSERT INTO Person(PersonID,Name,Age,P_Group,Email) values(@PersonID,@Name,@Age,@P_Group,@Email) 
                                       END ", cn
                                 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T05:11:45.070

您在插入后错过了“结束”，在第二个插入语句中，请尝试以下操作：

```
SqlCommand cmdb = new SqlCommand(@"IF EXISTS(SELECT * FROM Person WHERE PersonID = @personID) BEGIN UPDATE Person SET PersonID = @PersonID, Name= @Name, Age= @Age,P_Group=@P_Group, Email= @Email END ELSE BEGIN INSERT INTO Person(PersonID,Name,Age,P_Group,Email) values(@PersonID,@Name,@Age,@P_Group,@Email) END ", cn); 
```

# php - PHP：从 JSON 字符串中获取特定数据

> ID：10561089
> 
> 赞同：0
> 
> 时间：2012-05-12T04:32:03.300
> 
> 标签：php, curl, preg-match, preg-match-all

```
$url = "https://graph.facebook.com/fql?q=SELECT%20uid2%20FROM%20friend%20WHERE%20uid1=me()&access_token=sadfasdf";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2 GTB5');
$string = curl_exec($ch); // grab URL and pass it to the browser
echo $string;
curl_close($ch); 
```

现在，`echo $string`将抓取的整个数据输出为纯文本。

```
{ "data": [
    { "uid2": "91298391" },
    { "uid2": "00291509" },
    { "uid2": "101927261" }
]} 
```

我怎样才能获取类似于 JSON 的特定数据？在这种情况下，我希望能够获取每个 ID。我有一种我会使用的感觉，`preg_match`但我很难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T04:44:38.340

php 有一个内置函数，用于将 json 字符串转换为数组。

[json_decode](http://us.php.net/json_decode)

第二个参数使它返回一个 assoc 数组而不是一个对象。然后只需获取值：

```
$ids = array_values(json_decode($string, true)); 
```

# django - 将来自不同应用程序/对象的模型分组到一个管理块中

> ID：10561091
> 
> 赞同：24
> 
> 时间：2012-05-12T04:32:16.280
> 
> 标签：django, django-models, django-admin

是否可以将来自不同应用程序的模型分组到 1 个管理块中？

例如，我的结构是

```
project/
  review/
    models.py -  class Review(models.Model):
  followers/
    models.py -  class Followers(models.Model):
    admin.py 
```

在`followers/admin.py`，我打电话给

```
 admin.site.register(Followers)
 admin.site.register(Review) 
```

这是将它们分组在 1 个管理块中，以便管理员轻松查找内容。

我试过了，但`Review`模型没有出现在`Followers`管理块中，我找不到关于这个的文档。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-12T05:26:26.967

Django Admin 通过其应用程序将模型分组到管理块，该应用程序由`Model._meta.app_label`. 因此注册`Review`仍然`followers/admin.py`会得到它到 app `review`。

因此，制作一个代理[模型](https://docs.djangoproject.com/en/1.4/topics/db/models/#proxy-models)`Review`并将其放入“评论”应用程序中

```
class ProxyReview(Review):
    class Meta:
        proxy = True    
        # If you're define ProxyReview inside review/models.py,
        #  its app_label is set to 'review' automatically.
        # Or else comment out following line to specify it explicitly               
        # app_label = 'review'

        # set following lines to display ProxyReview as Review
        # verbose_name = Review._meta.verbose_name
        # verbose_name_plural = Review._meta.verbose_name_plural

# in admin.py
admin.site.register(ProxyReview) 
```

此外，您可以将`Followers`和放入`Review`相同的应用程序或为它们设置相同的应用程序`app_label`。

自定义管理视图或使用第 3 部分仪表板*也可以*实现目标。

# php - 通过 cURL 在 PHP DOM 中解析 XML - 如果它是 url 地址或日期，则无法获取 nodeValue

> ID：10561092
> 
> 赞同：3
> 
> 时间：2012-05-12T04:32:21.303
> 
> 标签：php, xml, dom, curl

我在解析通过 cURL 加载的 PHP 中的 XML 文档时遇到了这个奇怪的问题。我无法获取包含 URL 地址的 nodeValue（我正在尝试在我的 CMS 中实现简单的 RSS 阅读器）。奇怪的是它适用于每个节点，除了包含 url 地址和日期（和）的节点。

这是代码（我知道这是一个愚蠢的解决方案，但我在使用 DOM 和解析 XML 文档方面还是个新手）。

```
function file_get_contents_curl($url) {

$ch = curl_init();    // initialize curl handle
curl_setopt($ch, CURLOPT_URL, $url); // set url to post to
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); // return into a variable
curl_setopt($ch, CURLOPT_TIMEOUT, 4); // times out after 4s
$result = curl_exec($ch); // run the whole process

return $result;
}

function vypis($adresa) {

$html = file_get_contents_curl($adresa);

$doc = new DOMDocument();
@$doc->loadHTML($html);

$nodes = $doc->getElementsByTagName('title');
$desc = $doc->getElementsByTagName('description');
$ctg = $doc->getElementsByTagName('category');
$pd = $doc->getElementsByTagName('pubDate');
$ab = $doc->getElementsByTagName('link');
$aut = $doc->getElementsByTagName('author');

for ($i = 1; $i < $desc->length; $i++) {

    $dsc = $desc->item($i);
    $titles = $nodes->item($i);
    $categorys = $ctg->item($i);
    $pubDates = $pd->item($i);
    $links = $ab->item($i);
    $autors = $aut->item($i);

    $description = $dsc->nodeValue;
    $title = $titles->nodeValue;
    $category = $categorys->nodeValue;
    $pubDate = $pubDates->nodeValue;
    $link = $links->nodeValue;
    $autor = $autors->nodeValue;

    echo 'Title:' . $title . '<br/>';
    echo 'Description:' . $description . '<br/>';
    echo 'Category:' . $category . '<br/>';
    echo 'Datum ' . gmdate("D, d M Y H:i:s",
       strtotime($pubDate)) . " GMT" . '<br/>';
    echo "Autor: $autor" . '<br/>';
    echo 'Link: ' . $link . '<br/><br/>';
}
} 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T04:54:55.810

要阅读 RSS，您不应该使用`loadHTML`，但是`loadXML`. 链接不显示的一个原因是`<link>`HTML 中的标记忽略了其内容。另请参阅：http: [//www.w3.org/TR/html401/struct/links.html#h-12.3](http://www.w3.org/TR/html401/struct/links.html#h-12.3)

`<item>`此外，我发现迭代标签然后迭代它们的子节点更容易。像这样：

```
$d = new DOMDocument;
// don't show xml warnings
libxml_use_internal_errors(true);
$d->loadXML($xml_contents);
// clear xml warnings buffer
libxml_clear_errors();

$items = array();

// iterate all item tags
foreach ($d->getElementsByTagName('item') as $item) {
    $item_attributes = array();
    // iterate over children
    foreach ($item->childNodes as $child) {
        $item_attributes[$child->nodeName] = $child->nodeValue;
    }
    $items[] = $item_attributes;
}

var_dump($items); 
```

# php - 如何将 NULL 动态插入到 postgres 表中？

> ID：10561096
> 
> 赞同：1
> 
> 时间：2012-05-12T04:33:47.017
> 
> 标签：php, database, postgresql, null

我有一张这样的桌子

```
CREATE TABLE test(a int, b int); 
```

表中的值是从动态输入中插入的

$a, $b (PHP 变量)

```
$query = "UPDATE test set a=$a where b = $b";
pg_query($db, $query); 
```

这在 $a 为空时不起作用（即，当用户没有为表格中的表单字段输入任何值时）。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T04:38:12.847

测试是否`$a`为空，如果是，则将其设置为 null：

```
$a = ($a == '') ? 'NULL' : "'$a'";
$query = "UPDATE test set a=$a where b='$b'"; 
```

不要忘记引用该`$b`值，在我引用它之前它在这里返回错误。

如果它不为空，我在上面的检查中添加了引号`$a`，所以如果 $a 是 NULL（空）、整数或字符串，它现在可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T04:36:21.623

如果 $a 为空，`$query`将如下所示：

```
UPDATE test SET a= where b = whatever 
```

您需要显式添加`NULL`到查询字符串：

```
UPDATE test SET a=NULL where b = whatever 
```

# c - 使用 fstat 确定文件类型

> ID：10561097
> 
> 赞同：1
> 
> 时间：2012-05-12T04:34:10.383
> 
> 标签：c, fstat

所以，我有一个任务，基本上是比较系统调用与库函数的速度的练习。我们正在对通过标准输入从文件中获取的字符串进行排序。我们应该确定该文件是否是常规文件或不使用 fstat。我已经阅读了手册页，虽然我知道它的作用，但我在弄清楚如何使用它时遇到了问题。

我知道它返回一个 stat 结构，所以我可以直接创建一个变量并像这样存储它吗？前任：

```
int n;
struct stat *val;
n = fstat(0, val); 
```

这就是你获得结构的方式吗？是不是退回到别的地方了？我需要访问 off_t st_size 变量，所以我知道文件有多少字节。可以将其转换为int吗？

此外，显然您可以使用 st_mode 字段来检查文件是否是常规文件（使用宏 S_ISREG），但是......如何？它是返回真还是假？这很烦人，因为我可以找到所有这些文档，告诉我这些字段是什么，但不知道如何使用它们。

如果我有一个常规文件，我应该在任何函数调用之前分配足够的内存来存储它。如果不是，那么我在阅读时重新分配内存。我已经完成了第二部分，我只是不知道如何正确使用 fstat。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T04:46:29.903

[`fstat`](http://linux.die.net/man/2/fstat)不分配内存，你需要给它预分配空间的地址。例如：

```
int n;
struct stat myStat;
n = fstat(0, &myStat); 
```

注意缺少指针。

# ios - 什么时候在 iOS 开发中使用多线程？

> ID：10561099
> 
> 赞同：1
> 
> 时间：2012-05-12T04:34:23.017
> 
> 标签：ios, multithreading

除了繁重的处理之外，当你有一个不太响应的 UI 时，是否应该主要使用多线程？还是有其他考虑？我如何知道我的应用程序*是否应该*具有多线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T04:44:07.263

基本上在`iOS`开发`Threads`中用于当您不想影响您`UI`需要`process`很长时间才能完成时。例如，当您`connection`解析 xml、json、图像数据等时，您不想`interaction`在那时停止用户，您可以使用`threads`.

您可以使用`NSThread`.

使用线程之前要记住的事情 -

*   您永远不应该在线程中进行图形更改。如果你需要
    在一个线程中这样做，那么你只能在`main thread`.
*   切勿 `NSTimer`在辅助中使用 a `thread`，因为您`thread`可能会在`timer`执行之前完成，因此计时器可能无法运行。

每当您想执行 long 时`process`，您都可以使用`thread`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T04:52:16.423

线程在 ios 中的重要应用之一是在网络通信期间。整个应用程序都在与服务器通信，如果您想在 UR UI 上显示繁忙的视图，您需要在这种情况下创建线程以在后台线程中执行网络通信。

在 IOS 5 中，您可以选择 GCD（Grand Central Dispatch）而不是线程来执行相同的功能。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-05-12T05:43:17.567

在 ios 中使用线程是为了确保最终用户的无忧和无缝体验。每当您想通过网络提取一些资源（例如解析或数据检索）并且您不希望 ui 受到影响时，您都可以实现线程，因为应用程序将在主线程上运行而 Web 操作在您的自定义线程上运行。

当您需要并发操作或同时操作时，您可能需要使用线程，例如在游戏中，当您必须同时在同一个对象上拥有多个动画时。可能需要线程的场景可能相当多。

您可以阅读[Apple 的并发编程指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html)

和[线程管理](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html)

但是线程可能是应用程序中的开销，因为它需要内存分配，并且线程上的大型操作可能会影响性能，因此在无法避免时使用它。

您可以使用 NSThread、NSOperations 创建线程。现在不推荐使用 GCD。

# tomcat - 你如何删除tomcat的默认favicon？

> ID：10561112
> 
> 赞同：18
> 
> 时间：2012-05-12T04:37:26.590
> 
> 标签：tomcat, favicon

Tomcat 6 似乎为我的 web 应用程序提供了一个默认的 favicon - tomcat 徽标。我的 webapp 根目录中没有 favicon.ico，我的 web.xml 也没有提及任何关于 favicon 的内容。我什至在我的 web.xml 中为 *.ico 有一个映射到默认 servlet，但它仍在显示。我怎样才能删除那个tomcat favicon？

我知道我可以通过多种方式指定一个网站图标来覆盖这个默认图标。我试图找出如何（如果可能的话）防止tomcat添加的默认图标，因此没有图标。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-07-04T08:50:23.340

删除或重命名 tomcat/webapps/ROOT/favicon.ico，Tomcat 将在它所服务的每个 web 应用程序的根目录中查找 favicon.ico。您不需要将 a 放入每个页面的头部。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-12T04:40:26.180

1.  如果`favicon.ico`更改，`Catalina Home/webapps/ROOT`则所有 Web 应用程序都会将此图像 URL 显示为 root-apache-tomcat-xxxx/webapps/ROOT。

2.  要更改每个应用程序的图标，请在 head 部分指定以下内容：

    ```
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> 
    ```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-03-26T11:11:41.677

要不显示网站图标，只需指定 none。在大多数情况下，您必须从您的 tomcat/webapps/ROOT 中删除“favicon.ico”。如果简单地从 tomcat/webapps/ROOT 中删除 favicon 对您不起作用，请确保：

1.  仔细检查您在 ROOT 中确实没有 favicon.ico。默认情况下，ROOT 有一个 favicon.ico。因此，如果您尚未删除它，它仍然存在。
2.  检查`<link rel="shortcut icon" href="http://example.com/myicon.ico" />`您的索引站点或被调用站点中是否没有类似的标签。
3.  收藏夹由浏览器缓存，简单的“重新加载”不会重新加载收藏夹（！）。因此，也许您的应用程序不再有网站图标，但您的浏览器仍会从缓存中显示它。确保您的浏览器缓存已完全清除。（在谷歌浏览器中清除“Cookies and other site data”和“Cached images and files”对我有用）

在大多数情况下，它是浏览器缓存......我希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-26T06:27:21.083

我遇到了同样的问题，我已经通过以下解决方案解决了这个问题。我已将 ?v=1.1.0 添加到 html 头部部分的 favicon 行。每当网站图标图像发生变化时，我都会修改此参数，例如 ?v=1.1.0 到 ?v=1.1.1

有关详细信息，请参阅示例代码。

```
<html>
<head>
<link rel="shortcut icon" href="favicon.ico?v=1.1.1" type="image/x-icon">
</head> 
```

# java - Java上的图形/数据结构算法

> ID：10561113
> 
> 赞同：3
> 
> 时间：2012-05-12T04:38:01.560
> 
> 标签：java, algorithm, graph, jgrapht

我一直在解决以下问题，我有一个包含两列的 CSV 文件，我们可以说文件名是“朋友”。两列都包含从 A 到 Z 的字母。例如

```
A B
B C
A E
D F
E F 
```

每行有两个不同的字母（行中没有重复）。A是B的朋友，C是D的朋友等等......如果A人与B人交谈，B人与C人交谈，那么B和C将成为aquitances。Aquintaces 是共同的朋友。我需要找出谁有更多的朋友？

我一直在尝试两种不同的方法，一种使用不同的数据结构，如 hashmap、arraylist、stack 等，另一种使用图论（JGraphT 库）。但是，如果我使用数据结构，我会被逻辑困住，如果我使用图论，我会被图形中的遍历困住。

我有以下问题：-

1.  使用数据结构或图形的更好方法是什么？还是比这更好的方法/逻辑/算法？
2.  有谁知道如何在 JgraphT 库中遍历图形。我无法做到这一点，他们关于图书馆的文档非常有限。

请，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:51:48.733

一般来说，HashMaps 是最快速和最容易使用的。我建议您使用它们而不是任何自定义库，除非您确定某些库可以轻松完成您需要的事情并且需要很长时间才能编写代码。

在您的情况下，您可以只使用每个人作为键，将他的朋友列表作为指向的对象。正如先前的评论所指出的，解析您的 .csv 文件并相应地填充 HashMap 将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T05:30:07.840

你可以先有一个哈希表，将每个字母映射到它的朋友集，例如 A 映射到 { B }，B 映射到 { C }，如果 Z 有两个朋友 Y 和 W，那么 Z 映射到 { Y, W }。这是一个从字母到字母集的哈希映射。

要计算熟人，请遍历哈希图。当你在入口 A -> { B, C, F } 然后在内部循环中遍历集合 B、C、F。将他们的朋友（三个集合）收集到一个集合中（只需将元素插入一个临时集合) 并在找到 A 时从该集合中删除 A。然后，该集合的大小就是 A. 的熟人数量。冲洗并重复。

# python - 在受控条件下使用“exec”是否构成安全威胁？

> ID：10561114
> 
> 赞同：5
> 
> 时间：2012-05-12T04:38:06.443
> 
> 标签：python, security, exec

这是一个示例类：

```
from datetime import datetime
class Article:
    published = datetime.now()
    for propname in "year month day hour minute second".split():
        exec "%s = property(lambda self: self.published.%s)"%(propname, propname)
    del propname 
```

如您所见，我正在使用`exec`优化多个`property()`对象的创建。我经常读到使用`exec`是不好的，它是你程序中的一个安全漏洞。在这种情况下，是吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T04:58:05.637

在这种情况下，它并不是真正的安全威胁，因为当执行的字符串是用户可以访问的内容时，就会出现安全威胁。在这种情况下，它是一个拆分字符串文字。

然而，即使它不是安全风险，`exec`也几乎总是一个糟糕的选择。为什么不使用`getattr`and`setattr`来代替？

```
from datetime import datetime
class Article:
    published = datetime.now()

    def __init__(self):
        for propname in "year month day hour minute second".split():
            setattr(self, propname, getattr(self.published, propname)) 
```

一个缺陷是这必须在`__init__`方法中完成，因此这取决于您是否有充分的理由不将其包含在其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T05:55:18.187

将*exec*与可信数据一起使用是可以的；但是，在这种情况下，它不是必需的，并且会减慢您的脚本速度。

# java - Ajax 请求 - 在 Spring Controller 上调用不同的方法

> ID：10561116
> 
> 赞同：5
> 
> 时间：2012-05-12T04:38:12.357
> 
> 标签：java, ajax, spring, spring-mvc

我在将 AJAX 与 Spring MVC 一起使用时遇到了问题。我有一个包含很多字段的表单，每个字段根据单击的关联按钮检索数据。

所以，我的每个按钮都需要调用一个 AJAX 请求。每个响应都将显示在相关字段上。

我想知道一旦我点击了不同的按钮，是否可以在我的 Spring 控制器中调用不同的方法？

换句话说，我想向同一个控制器发出多个 ajax 请求，每个请求将在同一个控制器中调用不同的方法。

看这个例子：

```
 // when get account detail is clicked it will call this method  
@RequestMapping(method=RequestMethod.POST)  
    public @ResponseBody String getAccountDetails(@RequestParam(value="accountid") String accountid){  

     return somefunct.getAccountDetails(accountid);  

    }  

// when get account summary is clicked it will call this method  
@RequestMapping(method=RequestMethod.POST)  
    public @ResponseBody String getAccountSummary(@RequestParam(value="accountid") String accountid){  

      return somefunct.getAccountSummary(accountid);  

    }  

/* when submit button is clicked... Form is submitted for saving*/  
@RequestMapping(method=RequestMethod.POST)  
    public String submitForm(){  
        // save here  
        return "myform";  
    };*/ 
```

目前，我只能有一个 AJAX 请求。如何修改此代码，以便为不同的 AJAX 请求提供不同的功能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T05:15:19.863

首先，考虑当您从服务器检索数据而不修改该服务器的状态时，普遍接受的标准是使用 HTTP GET 方法，而不是 POST。因此，对于您的前两种方法，您误用了 HTTP 方法。

其次，您可以使用 RequestMapping 注释的 value 属性将单个 URL 模式映射到特定方法。

第三，表示您的帐户详细信息资源的最 RESTful 方式是使用 PathVariable 注释并将您的标识 accountid 包含在实际路径中：

```
@RequestMapping(value="/account/{accountid}/details", method = RequestMethod.GET)
public @ResponseBody String getAccountDetails(@PathVariable(value="accountid") String accountid){  

 return somefunct.getAccountDetails(accountid);  

} 
```

接下来，您可以使用不同的 URL 模式表示您的帐户摘要，其中 URL 像树一样构建，其中路径的前两部分再次是“帐户”和帐户 ID：

```
// when get account summary is clicked it will call this method  
@RequestMapping(value="/account/{accountid}/summary", method=RequestMethod.GET)  
public @ResponseBody String getAccountSummary(@PathVariable(value="accountid") String accountid){  

    return somefunct.getAccountSummary(accountid);  

} 
```

现在，另一方面，您的提交方法有副作用。这只是一种奇特的说法，即您的服务器状态在此请求结束时会有所不同，并且对该资源发出的任何 GET 请求都将与更改之前不同。修改资源或将资源添加到集合时使用的适当 HTTP 方法是 HTTP POST 方法。替换集合时，HTTP 方法 PUT 是普遍接受的选择方法。

PUT 和 POST 之间的另一个区别因素是 PUT 是幂等的，这意味着一遍又一遍地重复相同的请求不会改变服务器上的状态。如果多次点击同一个请求会创建更多记录，则使用 POST。

最后，这个请求也可以映射到一个 URL。在下面的示例中，我假设您正在创建一个新的客户记录并在数据库的客户集合中插入一条新记录。因此，我使用了 POST。我还修改了您的参数列表以使用 PathVariable 从 URL 路径中获取 accountid，并添加了 RequestBody 注释，以便您可以在请求正文中发送一个对象，该对象可以反序列化为 Java 对象：

```
/* when submit button is clicked... Form is submitted for saving*/  
@RequestMapping(value="/account/{accountid}", method=RequestMethod.POST)  
    public String submitForm(@PathVariable String accountid, @RequestBody Account account){  
        // save here  
        return "myform";  
} 
```

有关 Spring MVC 的更多信息，请查看 Spring MVC[上的 Spring 文档](http://static.springsource.org/spring/docs/3.0.3.RELEASE/spring-framework-reference/html/mvc.html)。

# image - 如何使用 HAML 将图像添加到内容中？

> ID：10561121
> 
> 赞同：24
> 
> 时间：2012-05-12T04:38:25.040
> 
> 标签：image, haml

这种标记语言的新手，我很难找到提到如何使用图像的文档。一两个例子会很棒。

顺便说一句，我确实提到了[这个讨论](https://stackoverflow.com/questions/1202654/how-do-i-make-an-image-link-tag-using-haml-in-rails)，但不确定这是否是我需要的。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-05-13T00:35:48.213

在任何类型的框架之外：

```
%img(src="/images/loading.gif") 
```

较旧、更冗长但灵活的语法：

```
%img{:src => "/images/loading.gif"} 
```

如果你使用 Rails，它会自己生成标签：

```
=image_tag "loading.gif" 
```

# facebook - 在 Facebook Open Graph 中创建 GeoPoint 复杂数据类型

> ID：10561125
> 
> 赞同：1
> 
> 时间：2012-05-12T04:40:12.953
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我正在尝试为我现有的对象创建一个 GeoPoint 类型。Facebook 的文档在这里并不十分出色 - 但我继续做的是创建一个新属性并将其命名为`location`. 我把它做成 GeoPoint 类型并且是必需的。

然后我在我的模板中提供以下内容：

```
 <meta property="my-app:location:latitude" content="<%= @location.lat %>" />
  <meta property="my-app:location:longitude" content="<%= @location.lng %>" /> 
```

然而调试器抱怨：

```
The parser's result for this metadata did not match the input metadata. Likely, this was caused by the data being ordered in an unexpected way, multiple values being given for a property only expecting a single value, or property values for a given property being mismatched. Here are the input property =>content pairs that were not seen in the parsed result: 'my-app:location:latitude => 40.134537901957735, my-app:location:longitude => -75.00853989318185' 
```

我应该如何定义这个 GeoPoint 以及我应该如何在我的 URL 中嵌入 lat/lng？这不想以我尝试过的任何方式验证它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T04:53:58.827

我刚刚运行了我通过另一个应用程序 (Endomondo) 发布的对象的 URL，但其中包含 GeoPoint 数据到调试工具中，他们就是这样做的。请记住，在这种情况下它是一个数组（它是循环活动的路径），所以实际上有 60 个，但我认为一个例子就是：

```
Meta Tag    <meta property="endoapp:route:latitude" content="3x.xxxx" />
Meta Tag    <meta property="endoapp:route:longitude" content="-12x.xxxx" />
Meta Tag    <meta property="endoapp:route:altitude" content="0.01" /> 
```

看看你的例子，我想也许省略的高度可能是问题所在？Endomondo 的示例在“路线”字段中使用了一组点，开始和结束各一个，分别是 endoapp:start:latitude、endoapp:start:longitude 等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T06:38:56.747

您应该省略您在 property="og:type" 中指定的内容，即 content="my-app" 如果是这样，那么您应该使用 property="location:latitude" 等（省略“my-app”前缀）

# iphone - 更改 UIActionSheet 宽度

> ID：10561132
> 
> 赞同：0
> 
> 时间：2012-05-12T04:42:55.640
> 
> 标签：iphone, uiactionsheet

默认情况`UIActionSheet`下，iPhone 的横向模式采用屏幕宽度 (480)。

我试图最小化宽度。我们如何更改宽度，Apple 会接受这种行为吗？

完整代码：

```
actionSheet = [[UIActionSheet alloc] initWithTitle:@"\n\n\n\n\n\n\n\n\n\n\n" delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil,nil]; actionSheet.actionSheetStyle = UIActionSheetStyleBlackOpaque; actionSheet.delegate = self; [actionSheet showInView:self.view]; [actionSheet setBounds:CGRectMake(0 , 0, 200, 320)]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T18:34:47.860

我不认为 UIActionSheet 内置了这种能力，因为我确信我没有看到它在任何应用程序中实现。我会创建一个自定义 UIView 并使用 UIViewAnimation 从屏幕底部向上滑动它。如果您希望它阻止访问自定义操作表后面的视图，则需要创建一个视图以在主视图和覆盖整个屏幕大小的自定义操作表之间移动。

# xcode - 当前是否有适用于 Xcode 4.3 的 D 插件？

> ID：10561134
> 
> 赞同：1
> 
> 时间：2012-05-12T04:42:59.060
> 
> 标签：xcode, macos, ide, d

当前是否有适用于 Xcode 4.3 的 D 插件？我试图按照[wiki](http://www.prowiki.org/wiki4d/wiki.cgi?EditorSupport#IDEs)上提供的链接进行操作，但链接 ( [http://michelf.com/projects/d-for-xcode/](http://michelf.com/projects/d-for-xcode/) ) 似乎已损坏*。我在 Github 上进行了搜索，该[项目](https://github.com/michelf/d-for-xcode)自去年初（2011 年 3 月 28 日）以来一直没有更新。

更新：

[*] 似乎只有我一个人，我再次检查并加载正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:19:18.687

> 致 Xcode 4 用户：D for Xcode 目前仅部分使用 Xcode 4；完全支持 Xcode 版本 3。

似乎不是 - 如果完全支持回来，我会编辑这个答案。直到那时我一直在使用 SublimeText（它只有突出显示 - 自动完成或预编译检查）。

# jquery - 为什么我的 Datepicker 看起来很奇怪？

> ID：10561137
> 
> 赞同：2
> 
> 时间：2012-05-12T04:44:04.387
> 
> 标签：jquery, jquery-ui, google-app-engine

我正在尝试使用 jquery UI。我下载了所有内容并按照说明进行操作，我在我的 html 中添加了这样的代码：

```
<link type="text/css" href="/css/ui-lightness/jquery-ui-1.8.20.custom.css" rel="stylesheet" />
<script type="text/javascript" src="/js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="/js/jquery-ui-1.8.20.custom.min.js"></script>
<script type="text/javascript">
     $(function() {
         $( "#id_myDate" ).datepicker({
             inline: true
         });
     });
</script>
.....
<div>Date: <input type="text" id="id_myDate" name="deadLine"></div> 
```

当我加载这个页面时，Datepicker 看起来很奇怪。

![在此处输入图像描述](../Images/d5a7085d0e0ebff4a91439eff7cbfbe6.png)

怎么了？当我下载 jquery UI 时，我打开 index.html 并且一切正常（包括 datepicker），但是当我将它放入我的应用程序时，它看起来很糟糕。

顺便提一句。我的浏览器是 Chrome（我也在 Firefox 中测试过，同样的问题），我正在使用 python 开发一个 google appengine 应用程序。

谢谢你。

------------**编辑**------------- --

对不起。因为这是一个google appengine，所以我应该配置我的静态文件，比如js和css。我忘记在 app.yaml 中配置我的 css 文件。现在，我将其添加到 yaml 文件中：

```
- url: /js
static_dir: js

- url: /css
static_dir: css 
```

js 和 css 是这些文件所在目录的名称。非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-01-06T11:31:45.163

```
<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css"> 
```

将此代码添加到您的 html 的头部

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T05:08:02.027

听起来css文件没有正确加载。检查以确保其正确加载。

在 chrome 中，您可以按`F12`打开开发者工具。单击网络选项卡，然后刷新您的页面。您将看到发送到网络服务器的每个请求的列表，包括任何错误。确保您的 css 文件已正确加载。

# r - 从 ddply 函数中对术语进行分组？

> ID：10561139
> 
> 赞同：2
> 
> 时间：2012-05-12T04:44:07.900
> 
> 标签：r, plyr

我有以下示例数据框 x

```
id val
a 1
a 2
a 3
b 2
b 4
b 9 
```

我有一个简单的功能，我在做 SAC 时应用。就像是，

```
f.x <- function(x){
 cat(x$id,"\n")
} 
```

请注意，我要做的只是打印出分组术语。使用 ddply 调用此函数，如下所示

```
ddply(x,.(id),f.x) 
```

但是，当我运行它时，我会得到我怀疑是列表索引的整数输出。如何在 fx 中获得实际的分组项，在这种情况下是“a”和“b”？提前非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T04:58:17.563

永远不要因为变量看起来像一堆字符而误以为它实际上只是一堆字符。

因素不是字符。它们是整数代码，通常表现得像整数代码。

使用 as.character() 将值强制转换为字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T06:56:24.537

如果你想做的每件事都是打印，你应该使用 d_ply。在 ddply (d_ply) 中，传递给函数（此处为 fx）的实际参数是 data.frame（x data.frame 的子集），因此您应该修改 fx 函数。

```
f.x <- function(x) cat(x[1,"id"],"\n")
d_ply(x,.(id),f.x) 
```

# java - 从选项卡主机点击返回按钮时未调用 OnResume

> ID：10561145
> 
> 赞同：1
> 
> 时间：2012-05-12T04:46:16.397
> 
> 标签：java, android, android-activity, android-tabhost, onresume

我遇到了一个讨厌的问题。我有**两个选项卡主机**...**选项卡主机 A**和**选项卡主机 B**。每个选项卡主机都有三个选项卡（我们称它们为 A1、B1、A2、B2 等）。**选项卡主机 B 从 Activity A2 启动**。无论如何，这是我的问题：

当我在选项卡主机 B 的一个选项卡中并使用内置的后退按钮导航回活动 A2 时，`onResume`不会被调用。我不明白为什么会这样......我阅读了关于活动生命周期的文章，在我看来，一旦 Tab 主机 B 启动，应该调用 Activity A2 的 onStop 方法......并且尽快当我使用应该调用 A2 的 onStart 和 onResume 方法的后退按钮导航回它时。我能想到的唯一一件事是，可能`onResume`正在调用 Tab Host A，而不是简历上的 Activty A2。任何帮助将非常感激！

这是我用来从 Tab Host A 踢出 A2 的代码：

```
intent = new Intent().setClass(this, FiltersActivity.class);
spec = tabHost.newTabSpec("filters").setIndicator("Filters",
       res.getDrawable(R.drawable.ic_tab_filters)).setContent(intent);
tabHost.addTab(spec); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:11:45.307

开发者页面的评论继承了答案

```
 // Create an Intent to launch an Activity for the tab (to be reused)
    intent = new Intent().setClass(this, ArtistsActivity.class); 
```

该活动包含在您的选项卡规范中，并且它的生命周期现在与规范相关。

您可能想要做的是提供您自己的方法，当您切换到选项卡并调用它时调用它。

```
getTabHost().setCurrentTab(resumeTab);
Activity filtersActivity = this.getCurrentActivity();
filtersActivity.yourMethod(); 
```

# oracle10g - c# ora-02291 错误

> ID：10561154
> 
> 赞同：1
> 
> 时间：2012-05-12T04:47:42.927
> 
> 标签：oracle10g, odp.net

这是一个奇怪的......我有两个表tableA和tableB tableB在tableA中有一个外键。

我有 2 个存储过程，一个插入到 tableA，另一个插入到 tableB。

使用 odp.net 我运行第一个存储过程，将记录插入到 tableA 中。然后我可以打开 SQLPlus 并选择这条记录

然后我运行第二个存储过程，插入到 tableB 中。 **它因“ora-02291-integrity-constraint-violated-parent-key-not-found”而失败**

我有双重，三重，四重检查错别字等......什么都没有。

当我在 SQLPlus 中使用相同的存储过程手动执行相同的操作时，让事情变得更加奇怪，它可以毫无问题地工作。

这让我花了 12 多个小时寻找我知道必须简单的东西。这是存储过程。

**斯普罗卡**

```
CREATE OR REPLACE PROCEDURE genData_TestTrackerSegment
  (
    INTX_ID IN IntxSegment.IntxID%TYPE,
    siteid IN INT
  )
AS
BEGIN
INSERT INTO INTXSEGMENT(INTXID,INTXTYPEID,VERSION,ISPRIVATE,
SEGMENTTYPE,STARTDATETIME,INTXDIRECTION,SITEID)
VALUES(INTX_ID,1,1,0,1,SYSDATE,1,siteid);
COMMIT;
END; 
```

**SPROCB**

```
CREATE OR REPLACE PROCEDURE genData_TestTrackerPart
  (
    INTX_ID IN IntxSegment.IntxID%TYPE,
    INTX_PART_ID IN INTX_PARTICIPANT.INTX_PART_ID%TYPE,
    INDIVID IN INDIVIDUAL.INDIVID%TYPE,
    CALLID IN INTX_PARTICIPANT.CALLIDKEY%TYPE
  )AS
BEGIN
INSERT INTO
INTX_PARTICIPANT(INTXID,INTX_PART_ID,INDIVID,ROLE,
CALLIDKEY,RECORDED,VERSION,STARTDATETIME)
VALUES(INTX_ID,INTX_PART_ID,INDIVID,1,CALLID,1,1,SYSDATE);
COMMIT;
END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T16:24:55.840

是的，我非常确定——毫无疑问，FKEY.
话虽这么说，我修好了这个.....顺便说一句，这太**愚蠢**了。
我处于（错误的）假设之下，即 ODP.NET 中的“命名参数”意味着我不必按照它们在存储过程中引用的顺序添加这些参数。长话短说——在我重写了大约 4 次之后，我修改了参数的顺序，现在它已经修复了。——</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-02T03:21:28.160

对我来说，ORA-02291 错误意味着使用的 FK 之一不是有效的 pk 或不是另一个表中的现有 pk。

只需确保插入 TABLE 中的每个 FK 都是有效的。

# mysql - 我正在使用 XAMPP 服务器在 mysql 上运行此查询

> ID：10561157
> 
> 赞同：-4
> 
> 时间：2012-05-12T04:48:23.243
> 
> 标签：mysql

> **可能重复：**
> [每个派生表都必须有自己的别名](https://stackoverflow.com/questions/1888779/every-derived-table-must-have-its-own-alias)

```
SELECT * FROM (SELECT Customer , Count(Customer) AS Reservation FROM Reservation GROUP BY customer) WHERE Reservation>=8 ORDER BY 1; 
```

并得到以下错误

```
#1248 - Every derived table must have its own alias. 
```

同样适用于 MS Access。提前感谢您的帮助，谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T04:50:21.527

正是错误所说的，通过`AS foo`在`WHERE`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-12T04:50:28.330

```
SELECT 
    * 
FROM 
    (SELECT 
         Customer , 
         Count(Customer) AS Reservation 
     FROM 
         Reservation 
     GROUP BY 
         customer) AS SOMETABLEALIAS 
WHERE 
    Reservation>=8 
ORDER BY 1; 
```

# lua - LuaBind 和 package.loadlib

> ID：10561159
> 
> 赞同：1
> 
> 时间：2012-05-12T04:48:33.447
> 
> 标签：lua, luabind

我正在尝试使用 luabind 在这里[http://www.rasterbar.com/products/luabind/docs.html](http://www.rasterbar.com/products/luabind/docs.html)完成教程，但是我在加载库时遇到了问题。我目前使用的是 5.1 版的 lua，所以我相信我会使用 package.loadlib 而不是 loadlib。我做了一个简单的dll，它是这样的：

```
#include <iostream>
#include <luabind\luabind.hpp>

void greet()
{
std::cout << "Hello world!\n";
}

extern "C" int init(lua_State* L)
{
luabind::open(L);

luabind::module(L)
    [
        luabind::def("greet", &greet)
    ];

return 0;
} 
```

这构建得很好。但是，当我尝试运行此代码时，我在 lua 中遇到错误：

```
package.loadlib("LuaTestLib.dll", "init")
greet() 
```

它声明 greet 是 nil。如何正确加载 dll 中的函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T06:36:05.803

[`package.loadlib`从's 文档](http://www.lua.org/manual/5.1/manual.html#pdf-package.loadlib)的前两句：

> 将宿主程序与 C 库动态链接`libname`。在这个库中，查找一个函数`funcname`并将**这个函数作为 C 函数返回**。

（重点补充）

这不*执行* `funcname`。它只是将它作为一个函数返回给你调用。您仍然必须调用它：

```
package.loadlib("LuaTestLib.dll", "init")() 
```

# hibernate - 关于在 Hibernate 中生成 HBM 文件

> ID：10561160
> 
> 赞同：0
> 
> 时间：2012-05-12T04:49:22.787
> 
> 标签：hibernate

我正在学习 Hibernate ，我只想知道 eclipse 中是否有任何插件可以自动生成 XML 格式的 Hbm Files hibernate 映射文件。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T04:52:49.670

在这里，您可以获得包含 Hibernate 工具的 Eclipse 的 jboss 工具插件。

[http://www.jboss.org/tools/download.html](http://www.jboss.org/tools/download.html)

# html - 如何垂直对齐两个浮动 div？

> ID：10561162
> 
> 赞同：9
> 
> 时间：2012-05-12T04:50:00.963
> 
> 标签：html, css

我在一个容器 div 中有两个 div。一个需要向左浮动，另一个需要向右浮动。他们也都需要在他们的父母内部垂直居中。我怎样才能做到这一点？

```
<div id='parent'>
    <div id='left-box' class='child'>Some text</div>
    <div id='right-box' class='child'>Details</div>    
</div> 
```

如果没有浮动应用到任何一个它们垂直对齐到这个css的中间

```
.child{ display:inline-block; vertical-align:middle; } 
```

但是添加`#right-box{ float: right; }`会导致孩子失去垂直对齐。我究竟做错了什么？

多谢你们

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-12T05:37:34.950

**[这](http://dabblet.com/gist/2664227)**是您需要的解决方案的在线演示

![在此处输入图像描述](../Images/da74a89dabc8bb0130de765178c66bde.png)

它是用这个 html 制作的：

```
<div id='parent'>
    <div id='left-box' class='child'>Some text</div>
    <div id='right-box' class='child'>Details</div>    
</div> 
```

这个CSS：

```
#parent {
    position: relative;

    /* decoration */
    width: 500px;
    height: 200px;
    background-color: #ddd;
}

.child {
    position: absolute;
    top: 50%;
    height: 70px;
    /* if text is one-line, line-height equal to height set text to the middle */
    line-height: 70px;
    /* margin-top is negative 1/2 of height */
    margin-top: -35px;

    /* decoration */
    width: 200px;
    text-align: center;
    background-color: #dfd;
}​

#left-box { left: 0; }
#right-box { right: 0; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T05:35:13.127

您可以尝试 display:table 和 display:table-cell 样式。
查看此站点以获取更多详细信息[http://www.quirksmode.org/css/display.html](http://www.quirksmode.org/css/display.html)

注意：如果您希望父 div 高度为百分比（如 100%），那么它将相对于其容器的高度。如果容器是主体，那么您还必须设置主体和 html 的高度，例如设置为 100%。

下面是代码可能看起来的示例：

```
<div id='parent'>
    <div id='left-box'>Some text</div>
    <div id='right-box'>Details</div>    
</div>​

<style>
body,html{
    height:100%;   
}
#parent{
    border:1px solid red;
    display:table;
    height:100%; 
    width:100%;        
}
#left-box{ 
    background-color:#eee;
    display: table-cell;
    vertical-align:middle;
    padding:3px;
    width:50%;
}
#right-box{ 
    background-color:#dddddd;
    display: table-cell;
    vertical-align:middle;
    padding:3px;
    width:50%;
}
​&lt;/style> 
```

# jquery - 仅显示 jQuery 模板中的前 10 名

> ID：10561168
> 
> 赞同：3
> 
> 时间：2012-05-12T04:50:52.447
> 
> 标签：jquery, jquery-templates, wufoo

我们使用 jQuery、jQuery 模板和 Wufoo jQuery API 来显示表单中的数据，使用以下代码：

```
<div id="people">           
    <ul>
        <script id="attendeeTemplate" type="text/x-jquery-tmpl">
            <li>
                <h4>${Field1}</h4>
                ${Field3} minutes
            </li>
             </script>
    </ul>
</div> 
```

这很好用，但是我们希望将其限制为仅显示前 10 个条目。现在它正在显示数据库中的每个条目（使用下面的 JavaScript 和 API 排序）。请注意，我们仅尝试显示前 10 名，按分钟数从高到​​低排序。

这是JavaScript：

```
<script>
    function processEntries(data) {
        $.each(data.Entries, function(entriesIndex, entriesObject) {
            // Make sure this entry has all the required bits
            if (entriesObject.Field1 && entriesObject.Field3) {
                $("#attendeeTemplate").tmpl(entriesObject).appendTo("#people ul");  
            }
        });
    };

    $.wufooAPI.getEntries({
        "callback"   : processEntries,             // Name of custom function declared above
        "formHash"   : "BLAH",                   // Found by clicking "Code" button from the Form Manager, then the "API Information" button
        "sortID"   : "Field3",                   // Found by clicking "Code" button from the Form Manager, then the "API Information" button
        "sortDirection"   : "DESC",                   // Found by clicking "Code" button from the Form Manager, then the "API Information" button

    });
</script> 
```

任何关于如何将其限制在前 10 名的想法都会非常有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T05:00:17.260

这应该有效：

```
data.Entries.slice(0,9); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T05:03:17.537

如果您不能使用数据库施加限制，您仍然可以像这样进行修复：

```
function processEntries(data) {
    var i = 0;
    $.each(data.Entries, function(entriesIndex, entriesObject) {
        // Make sure this entry has all the required bits
        if (entriesObject.Field1 && entriesObject.Field3 && i<10) {
            $("#attendeeTemplate").tmpl(entriesObject).appendTo("#people ul");
            i++;
        }
    });
}; 
```

注意：这假设您以前以某种方式订购了整体

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T05:02:30.137

假设这`data.Entries`是一个数组，您可以使用[`Array.slice()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/slice)：

```
$.each(data.Entries.slice(0, 9), function(entriesIndex, entriesObject) { 
```

# mysql - 我如何让这个 IF 语句在 MYSQL 中工作（它在存储过程中）？

> ID：10561175
> 
> 赞同：-2
> 
> 时间：2012-05-12T04:51:42.790
> 
> 标签：mysql, if-statement, procedure

我在任何地方都找不到不给我语法错误的示例

我的代码是

```
BEGIN
UPDATE Room_Descriptions
IF(STRCMP(Bed_Type,'King')) THEN SET Max_People = Number_Beds * 3
END 
```

基本上它应该遍历表格并查看“Bed_Type”列，如果它找到“King”这个词，它将将该行的 Number_Beds 乘以 3 并将其设置在 Max_People 列中

我希望最终能得到一些，但如果可行的话，我会满足于一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T04:53:42.930

```
UPDATE Room_Descriptions SET Max_People = Number_Beds*3 WHERE STRCMP(Bed_Type,'King') 
```

所需要的只是一个有条件的更新。

# ruby - Ruby 中的“<<-”是什么意思？

> ID：10561177
> 
> 赞同：34
> 
> 时间：2012-05-12T04:52:10.573
> 
> 标签：ruby

例如：

```
code = <<-EOH
    bundle install
    bundle exec unicorn -c /etc/unicorn.cfg -D
EOH 
```

这段代码有什么作用？什么`<<-`叫做？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-12T04:56:22.037

它被称为heredoc。一种定义多行字符串的简单方法，其中可能包含单引号或双引号，而无需转义它们。

例如，[在这里](http://blog.jayfields.com/2006/12/ruby-multiline-strings-here-doc-or.html)查看更多信息。

您经常使用 heredocs 来定义大块代码。[一些](http://macromates.com/)编辑知道这一点，可以在那里为您突出显示语法（如果您指定语言）。看：

![字符串 vs heredocs](../Images/66b87297605e81f714eaf27a75434efb.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T04:55:33.570

在我看来像heredoc。`-`允许结束分隔符忽略它之前的空格。

一个简单的谷歌搜索给了我[这个](http://rubyquicktips.com/post/4438542511/heredoc-and-indent)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-28T20:33:49.333

Ruby 还有一个更新的 HEREDOC 语法，`<<~END`它更类似于您通常在大多数 shell 和其他语言中看到的语法，`~`而不是`-`告诉 Ruby 去除前导空格以匹配块中缩进最少的行。

[https://infinum.co/the-capsized-eight/multiline-strings-ruby-2-3-0-the-squiggly-heredoc](https://infinum.co/the-capsized-eight/multiline-strings-ruby-2-3-0-the-squiggly-heredoc)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-12-13T18:26:57.567

您可以在 Chef Recipe 中像这样在一个块中传递多个命令

```
 bash 'Install ftppwd' do
    code <<-EOH
   mkdir #{ftppwd_dir}
   chmod 775 #{ftppwd_dir}
   chgrp #{batch_id} #{ftppwd_dir}/*
   chown #{batch_id} #{ftppwd_dir}/*
   EOH 
```

# php - 使用 sql 信息更新选择下拉列表 (html)

> ID：10561179
> 
> 赞同：0
> 
> 时间：2012-05-12T04:52:26.670
> 
> 标签：php, javascript, html, sql, select

我真的很困惑。我想使用 sql 数据库中的信息创建一个选择下拉菜单。一切都很好，但我有一个问题。每次用户更改他的选择时，我如何更新选择下拉菜单。这个问题真的很令人困惑，我真的不知道如何描述它。我在 php 中设置了代码，然后把它放在我的页面中。这是代码：

```
<?php
//creating a function to generate the second select menu
function createNameSelect(){
    $options = "<select id='name'>"
    $sql = "SELECT * FROM names WHERE category = 'c'";
    $result = mysql_query($sql);

    $options.="<option value='nothing'>-- select an option --</option>";

    while ($row=mysql_fetch_array($result)){
        $name=$row['name'];
        $options.="<option value='$name'>$name</option>";
    }

    $options.="</select>";

    return "$options";
}
?>

<!DOCTYPE html>
....
<select id = c>
   <option value ='1'>option 1</option>
   <option value ='2'>option 2</option>
   <option value ='3'>option 3</option>
</select>
 <?php createNameSelect(); ?>

....
</html> 
```

现在，它完美运行，但是，它不会更新第一个之后的选择菜单。它会卡在从默认选项生成的菜单上。知道我能做些什么来解决它吗？有js解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T04:57:45.670

试试这个

```
<select id = c ONCHANGE="location = this.options[this.selectedIndex].value;"> 
```

调用ajax并将更改的值保存在db中

例如

```
<select id = c> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T05:04:04.730

PHP 是一个服务器端脚本 - 它会在服务器上精确执行一次，并且输出将被发送到客户端（查看器浏览器）。因此，当用户更改第一个选择时，您不能一遍又一遍地调用该 PHP 函数。

您需要做的是创建一个单独的 PHP 文件，当为第一个选择提供有效选项时，打印出第二个选择的代码。然后，您使用 AJAX 使用 jQuery .get() 函数调用该 PHP 文件，并将第二个选择的内容替换为您获得的结果。

# android - 如何动态设置水平滚动查看器的高度？

> ID：10561181
> 
> 赞同：0
> 
> 时间：2012-05-12T04:53:23.707
> 
> 标签：android, horizontalscrollview

我想从我`height`的`horizontal scroll View`代码中设置。这怎么可能？

……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T05:07:49.250

```
 HorizontalScrollView hv;

 hv = new HorizontalScrollView(this);
 hv.setMinimumHeight(intMinHeight); 
```

试试这个：

# ios - 如何在 Objective-C 中生成随机大写字符

> ID：10561188
> 
> 赞同：2
> 
> 时间：2012-05-12T04:54:12.553
> 
> 标签：ios, objective-c, ios5

如何在我的 Objective-C iOS 应用程序中随机生成 20 个大写字符？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-12T05:11:35.923

`char c = (char)('A' + arc4random_uniform(25))`

会给你一个随机的大写字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T04:57:12.507

将所有大写字符存储在数组中，并使用 rand() 或 arcg4rand() 生成 0-25 的随机数，然后分别检索对象的随机编号索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T05:05:02.073

```
NSMutableArray *a = [[NSMutableArray alloc] initWithObjects:@"A", @"B", @"C", @"D", @"E", nil]; // You can add more uppercases here.
int firstRandom = objectAtIndex:arc4random()%[a count];
NSString *s = [[NSString alloc] initWithFormat:@"%@", [a objectAtIndex:firstRandom]];
[a removeObjectAtIndex:firstRandom];
// Avoiding some uppercase repetitions. ;-)
for (int i = 0; i < [a count]; i++) {
    int rndm = objectAtIndex:arc4random()%[a count];
    s += [a objectAtIndex:rndm];
    [a removeObjectAtIndex:rndm];
}
NSLog(@"%@", s);
[a release];
[s release]; 
```

希望这个答案是你想要的。:-)

阿尔贝托

# javascript - 将简单的下拉菜单从 jQuery 转换为纯 JavaScript

> ID：10561196
> 
> 赞同：1
> 
> 时间：2012-05-12T04:56:21.490
> 
> 标签：javascript, jquery, drop-down-menu

这是在 jquery 中制作的简单下拉菜单，我需要在没有 jQuery 的常规 JavaScript 中制作它。有人可以帮我做吗，我缺乏经验。

这是现场示例[http://jsfiddle.net/qRBuN/](http://jsfiddle.net/qRBuN/)它具有多级导航，但我不需要它，只需一个简单的下拉菜单，也不需要动画。

```
<script type="text/javascript">
    $(document).ready(function(){
        $("ul.topnav li a").mouseenter(function() {
            $(this).parent().find("ul.subnav").stop(true, true).slideDown('slow').show();

        });  

        $("ul.topnav li.first_level").mouseleave(function(){ 
            $(this).parent().find("ul.subnav").stop(true, true).slideUp('fast');
        });

        $("li.ex_level a").mouseenter(function() {
            $(this).parent().find("ul.ex_subnav").stop(true, true).slideDown('fast').show();
        });

        $(".ex_level").mouseleave(function(){ 
            $(this).parent().find("ul.ex_subnav").stop(true, true).slideUp('fast');
        });
    });

</script> 
```

===

```
 <ul class="topnav">  
        <li><a href="="#">Home</a></li>  
        <li class="first_level">  
            <a href="="#">One</a>  
            <ul class="subnav">  
                <li><a href="#">One</a></li>  
                <li class="ex_level"><a href="#">Two</a>
                    <ul class="ex_subnav">
                        <li><a href="#">One</a></li>  
                        <li><a href="#">Two</a></li>  
                    </ul>  
                </li>  
                <li><a href="#">Three</a></li>  
                <li><a href="#">Four</a></li>  
            </ul>
        </li>  

        <li class="first_level">  
            <a href="="#">One</a>  
            <ul class="subnav">  
                <li><a href="#">One</a></li>  
                <li><a href="#">Two</a></li> 
            </ul>
        </li> 
        <li><a href="#">Contact</a></li>  
    </ul> 
```

# eclipse - 在 mylyn、Tasktop Pro 中生成报告的 API

> ID：10561198
> 
> 赞同：0
> 
> 时间：2012-05-12T04:56:27.857
> 
> 标签：eclipse, eclipse-plugin, mylyn, tasktop

我一直是 tasktop Pro 的活跃用户。我钦佩它的简单性和鲁棒性。它提供的时间跟踪选项给我留下了特别深刻的印象。

我觉得需要使用命令行 / 批处理 / shell 脚本 / maven / ant 或任何其他允许我创建报告而无需访问 Tasktop Pro 中的“创建个人报告”的自动化工具。是否有任何形式的 API 可用于访问这些资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:01:41.103

不幸的是，没有可用于访问时间跟踪数据的 API。[您可以考虑在https://tasktop.com/bugs](https://tasktop.com/bugs)上打开此功能的请求

# cocos2d-iphone - M_PI*2（在 Cocos2d 中）是否等于 1 秒？如何？

> ID：10561201
> 
> 赞同：0
> 
> 时间：2012-05-12T04:57:41.190
> 
> 标签：cocos2d-iphone, accelerometer

是什么告诉我们这是“第二”？（`M_PI*2`等于1秒？怎么做？）

```
float32 maxRevsPerSecond = 7.0;
float32 accelerationFraction = acceleration.y*6;
float32 motorSpeed = (M_PI*2) * maxRevsPerSecond * accelerationFraction; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T06:23:49.997

`M_PI`是系统对 π 值的定义 (3.14159...) 因此，`motorSpeed`是以[弧度](http://en.wikipedia.org/wiki/Radian)每秒为单位的角度（旋转）值。

* * *

上面的初始答案仅基于示例代码中的变量名称。*做一些网络搜索，我看到这段代码是学习 Cocos2D*书中示例的一部分。在*使用加速度计使推车移动*的部分中，这本书说：

> 由于您为手推车车轮设置了**旋转**接头，因此旋转车轮很容易。旋转接头有一个内置的“电机”，它定义了车轮每秒旋转的弧度。
> 
> ...
> 
> 将电机想象成一种自动机构，它根据电机速度转动车轮。motorSpeed 以弧度/秒为单位，...

# php - 涉及多个表时如何进行基于Yii角色的访问控制

> ID：10561203
> 
> 赞同：3
> 
> 时间：2012-05-12T04:57:53.470
> 
> 标签：php, yii

我现在正在尝试在 Yii 框架下开发一个网站，并且程序中需要基于角色的访问控制（RBAC）。我从指南中读到过滤器可用于 RBAC，但我想知道如果管理员和用户存储在两个表中该怎么办？即如果数据库中有两张表，一张给管理员，一张给用户，我应该如何实现访问控制？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T10:28:37.433

这是可能的。不管多么棘手，我不能保证这不会在将来带来问题。您需要的是有两个或多个表`AuthAssignment`，例如`AuthAssignment_Admins`和`AuthAssignment_Customers`，并确保`CDbAuthManager`每次调用它时都引用相关的表（例如，在分配角色或检查权限时）。

我将从远处开始，但你会明白为什么。

1.  我们必须创建一种机制来告诉登录用户属于哪个表/类别。这可以通过扩展来完成`Yii::app()->user`。[在这里](http://www.yiiframework.com/wiki/60/)解释。您可能想要添加一个特殊的参数（例如`authTable`）或与分配的模型进行比较。

2.  你必须延长`CDbAuthManager`. 在组件中创建一个类`CDbAuthManagerTwoTables`，并在您的 in 中引用`config.php`in `authManager`as `'class' => 'CDbAuthManagerTwoTables'`。在`CDbAuthManagerTwoTables`

    ```
    <?php
    class CDbAuthManagerTwoTables extends CDbAuthManager {
       // public $assignmentTable = 'AuthAssignment'; 
       public $assignmentTable = 'AuthAssignment_Customers'; // you may want to have AuthAssignment_Customers to be your default table
       function __construct() {
          if (!Yii::app()->user->isGuest) {
             if (Yii::app()->user->authTable == 'admin') {
                $this->assignmentTable = 'AuthAssignment_Admins';
             } else {
                $this->assignmentTable = 'AuthAssignment_Customers';
             }
          }
      }

      public function setType($assignmentTable = '') { // this method will be needed during authentication
         switch ($assignmentTable) {
           case 'Admin':
             $assignmentTable = 'AuthAssignment_Admins';
             break;
           case 'Customer':
             $assignmentTable = 'AuthAssignment_Customers';
             break;
           default:
             $assignmentTable = 'AuthAssignment_Customers';
             break;
         }
         $this->assignmentTable = $assignmentTable;
      }

    } 
    ```

3.  现在在认证时分配。我们假设您已经有单独的登录表单并在`UserIdentity.php`. 在你的代码中的某个地方你会做：

    ```
     $this->setState('authTable', 'admin'); 

     $auth = Yii::app()->authManager;  // You should already have this in your code
     $auth->setType('Admin');   // call to our new method from CDbAuthManagerTwoTables
     if (!$auth->isAssigned($user->role, $this->_id)) {
        if ($auth->assign($user->role, $this->_id)) {
           Yii::app()->authManager->save();
        }
     } 
    ```

4.  没有第 4 步。

因此，对于`Customers`任何其他表格和授权也是如此。让我知道如何为您工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T22:09:52.697

我认为这是不可能的。当您检查 authassignment 的 db 架构时，您会看到它有一个 userid 字段，该字段与您的 users 表相关。如果您有两个不同的表，则需要在 auth 表中使用另一个唯一标识符。您是否绝对有必要为您的用户提供两个不同的表？实际上，RBAC 对于分离关注点非常有用。所以你有一个用户表，但是你可以给你的用户分配不同的角色，比如“admin”，“editor”等。如果你有两个不同的用户表，如果一个用户变成了管理员，你会怎么做？这是您不应该处理的复杂性。如果您必须这样做，您将不得不扩展 RBAC 功能，以便可以引用 tp 不同的表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T18:43:15.690

### 更改 UserID 的存储方式

我目前正在处理这个确切的问题，我的解决方案是修改用户 ID 在分配表中的存储方式。我不是只存储一个整数用户 ID，而是存储一个指示用户 ID 和类型的字符串：

```
auth_assignments.userid["<typeId>.<userId>"] VARCHAR(64) NOT NULL 
```

*分配或检查*时*角色时，使用用户的“授权 ID”而不是他们的正常 ID。希望听到有关此方法的反馈。*

# asp.net - 如何以编程方式在 ASP.NET 应用程序中打开 OpenFileDialog 框？

> ID：10561206
> 
> 赞同：1
> 
> 时间：2012-05-12T04:58:24.893
> 
> 标签：asp.net, vb.net

我正在使用以下代码打开 Open FileDialog：

```
OpenFile("D:\\"); 
```

我得到“拒绝访问”。

我如何打开一个 Web 应用程序的 OpenFileDialog 窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:29:54.340

也许你应该告诉我们更多关于你想要达到的目标。从服务器端对普通对话的任何调用都将（尝试）在服务器上执行。为用户提供 eq 的便利。选择并上传文件，您需要使用将在客户端调用的其他方法（JScript、Flash、Silverlight...）。

# objective-c - 使用 phonegap 从 AppDelegate.m 重新加载应用程序

> ID：10561207
> 
> 赞同：0
> 
> 时间：2012-05-12T04:58:43.050
> 
> 标签：objective-c, cordova

我正在使用 jquerymobile 和 phonegap 开发一个应用程序。

我想知道有没有办法使用重新加载应用程序

*   (void)applicationWillEnterForeground:(UIWebView*) theWebView { //reload here } 或
*   (void)applicationWillEnterForeground:(UIApplication *)application { //在此处重新加载 }

在 AppDelegate.m 中使用目标 c

而不是 onresume phonegap 事件。

？？？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T10:45:46.110

是的，你可以，试着打电话；

```
[self.viewController.webView reload]; 
```

# java - Alfresco：签入在之前某个时间点签出的文件（并悬空）

> ID：10561209
> 
> 赞同：0
> 
> 时间：2012-05-12T04:59:01.087
> 
> 标签：java, alfresco, cmis

我目前正在从事由另一家公司启动的项目。他们创建了一些 CMIS 连接器，目前用于在 Alfresco 中存储文档。我们没有该连接器/组件的来源。客户和供应商之间的事情变得糟糕，获得我们所拥有的代码是一场艰苦的战斗。

事实证明，每隔一段时间，文档更新就会失败，因为该文件已经被签出并且当前被锁定。考虑到露天服务器内没有用户（这一切都是通过网络服务完成的），我们相信在某些时候它会默默地崩溃并无限期地签出文档。我假设问题出在我们正在管理的应用程序上。问题可能是由 Alfresco 引起的。

我们发现无法更新文档的函数——不是让它签出的函数，而是因为它而失败的函数——是这样的：

```
cmisHelper.checkIn(cmisHelper.checkOut(cr.getId()), "Update", null, docBytes, mimeType); 
```

`cr.getId()`有文档ID。退房失败的原因很明显。

有没有办法签入可能已被另一个会话签出的文档？那个定制的 cmisHelper 类似乎没有任何与解锁相关的内容。您可以猜到，文档在行动中缺失。

我考虑的其他东西是露天的 soem 选项，它会自动签入“过期”结账。但是我还没有找到这样的选择。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T00:08:36.453

工作副本没有超时，只要用户以这种方式离开，签出的文档就可以保持该状态。您首先需要一种方法来识别哪些工作副本已过期，可能会自己引入结帐超时的概念。

例如，假设您要告诉用户在 Alfresco 结帐中翻译的操作必须在一小时内完成。然后，您可以配置一个 cron 作业来运行可以运行如下脚本的每个 hor：

```
var nodes = search.query("ASPECT:\"cm:workingcopy\" AND @cm\:created:\$\{luceneDateRange(today, \"-P1H\")\}");
for each (n in nodes) {
  n.remove();
} 
```

# jquery - 如何使用 jquery 以 rails 形式显示/隐藏？

> ID：10561210
> 
> 赞同：1
> 
> 时间：2012-05-12T04:59:23.687
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, coffeescript

I have a rails view (erb) that displays some checkboxes (populated data from seed.rb).. When certain checkboxes are selected i need a div to appear below it that collects more information.. For example: the user checks "anniversary"并且它下面的 div 出现在询问日期。jquery 是最好的方法吗？咖啡本？

*注意：我使用 Wicked gem 从

观点如下：

```
<%= render layout: 'form' do |f| %>

<% for holiday in Holiday.find(:all) %>
 <label class="checkbox">
  <%= check_box_tag "user[holiday_ids][]", holiday.id, @user.holidays.include?(holiday) %>
  <%= holiday.name %>
</label> 
```

继承人呈现的 html （无论如何是表单部分）：

```
<form accept-charset="UTF-8" action="/user_steps/interests" class="edit_user" id="edit_user_3"     method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="_method" type="hidden" value="put" /><input name="authenticity_token" type="hidden" value="lub8Fb5pvkxwgb3hGT66U14QBNKLOLfEwaLLw9Ts2WU=" /></div>

<label class="checkbox">
 <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="1" />
 New Years Day
</label>

<label class="checkbox">
 <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="2" />
 Valentine Day
</label>

<label class="checkbox">
 <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="3" />
 Easter
</label>

<label class="checkbox">
 <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="4" />
 Mother Day
</label>

<label class="checkbox">
  <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="5" />
  Father's Day
</label>

<label class="checkbox">
 <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="6" />
 Halloween
</label>

<label class="checkbox">
 <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="7" />
 Thanksgiving
</label>

<label class="checkbox">
  <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="8" />
  Christmas 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T07:13:20.977

我认为你应该做类似的事情

```
 if( $(#check_box_id).is(':checked')) {      
          $("#div_id").show();        
     } else {         
          $("#div_id").hide();        
   } 
```

这不是完美的代码，但您可以使用 .hide() 和 .show() 方法来完成。
我希望这能帮到您。
谢谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T09:14:04.327

Hiya**演示** [http://jsfiddle.net/z862m/](http://jsfiddle.net/z862m/) **并**从您的站点链接提供的解决方案在这里：http: [//jsfiddle.net/2UfBy/](http://jsfiddle.net/2UfBy/)

所以演示会做你提到的。即当复选框被勾选时，相应的 div 将显示，而当未选中时则不会。B-)

[quote] 当某些复选框被选中时，我需要一个 div 出现在它下方，以收集更多信息。例如：用户选中“anniversary”并且它下面出现一个 div 询问日期...[unquote] :)

**jQuery代码**

```
$(".checkbox").click(function(){

   $(this).next("div").toggle();    

});​ 
```

**html**

```
<label class="checkbox">
 <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="2" />
 Valentine Day
</label>
<div style="display:none;">
    Whatever you have to capture here<input type="text" id="foo" />
</div>
</br>
<label class="checkbox">
 <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="3" />
 Easter
</label>
<div style="display:none;">
    Whatever you have to capture here<input type="text" id="foo1" />
</div>
</br>
<label class="checkbox">
 <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="4" />
 Mother Day
</label>
<div style="display:none;">
    Whatever you have to capture here<input type="text" id="foo2" />
</div>
</br>
<label class="checkbox">
  <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="5" />
  Father's Day
</label>
<div style="display:none;">
    Whatever you have to capture here<input type="text" id="foo3" />
</div>
</br>
<label class="checkbox">
 <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="6" />
 Halloween
</label>
<div style="display:none;">
    Whatever you have to capture here<input type="text" id="foo4" />
</div>
</br>
<label class="checkbox">
 <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="7" />
 Thanksgiving
</label>
</br>
<label class="checkbox">
  <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="8" />
  Christmas
</label>​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-17T15:36:11.907

这是我想出的最简单的方法。

1.  确保文件中有 jquery 和 jquery-ujs `application.js`。

```
//= require jquery
//= require jquery-ujs 
```

（确保您的 gemfile 中也安装了 Jquery gem。）

2.  在表单底部添加一个脚本标签。

```
<script>
$("#id_of_checkbox").click(function(){
    $('div#id_of_html_element').toggle();
})
</script> 
```

3.  根据您要切换的内容，确保您的 id 是正确的。我将发布一个更新的 JS 函数，我将编写它以使其更容易。

更新：我把它做成了一个简单的函数，如果你想把它存储在 Rails 类型的地方，你可以把它放在任何 JS 文件中。

```
<script>
function showHiddenOptions(info_id) {
        $('#' + info_id).toggle();
    }
</script> 
```

然后，将此添加到您希望具有此功能的输入中： `onclick: "showHiddenOptions('ID_OF_OPTIONS')"`

**确保括号也正确，因为这对于函数正确查看此信息很重要！**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-29T20:50:08.273

JQuery 是一个很好的方法。您需要在 application.js 文件中使用适当的 require 语句才能使用 JQuery

```
//= require jquery.js 
```

一个简单的方法是用一个 span 标签包围你想要显示和/或隐藏的所有内容，然后使用 JQuery 从你的 *.js.erb 文件中触发你的 span 标签上的显示/隐藏

您可以使用以下 respond_with 块来指定 format.js (javascript) 响应。代码位于与表单名称匹配的控制器方法名称中：

```
def hide_show_form
  respond_with do |format|
    format.js
  end
end 
```

这将导致 hide_show_form.js.erb 先运行，然后再渲染 hide_show_form.html.erb 中的 HTML。

hide_show_form.js.erb

```
$('span#hide_and_show').hide();  // hide the appropriate span tag right away 
function showHiddenForm() {      // this can be triggered using :onclick
    if ($('span#hide_and_show').css('display') == 'none') {
        $('span#hide_and_show').show();
    } else {
        $('span#hide_and_show').hide();
    }
} 
```

hide_show_form.html.erb

```
<%= check_box_tag(:hide_show_checkbox, "hide_show_checkbox", false, :onclick=>"showHiddenForm();") %>
<span id="hide_and_show">
    <%= label_tag(:optional_data, "You might not always see this field:") %>&nbsp&nbsp
    <%= text_field_tag(:optional_data) %>
</span> 
```

此示例指定 check_box_tag 的 :onclick 属性以调用 js.erb 文件中的 JavaScript 函数 showHiddenForm()。

# java - 在 Java 中创建实时协作记事本

> ID：10561211
> 
> 赞同：5
> 
> 时间：2012-05-12T04:59:49.997
> 
> 标签：java, database, sockets, node.js, real-time

背景：我想创建一个类似记事本的应用程序，其中多人可以编辑一个文档/记事本。我已经创建了图形界面，现在想开始研究它的多用户协作部分。

问题：我如何从一个客户的文本框中获取文本以转到另一个客户的文本框。我会使用套接字吗？我将在哪里存储将与所有客户共享的文本？为了创建一个功能强大的实时协作文本框，我必须使用/做什么。我可以研究的一个好的起点是什么？

示例：Etherpad.com / Titanpad.com / Piratepad.com 或 Docs.Google.com（除了我想创建桌面应用程序，而不是网站）

解决答案中出现的一些问题：

用户如何选择他们想要编辑的文档：是的

用户如何创建新文档：通过选择主菜单中的“新建文件”选项

如果许多用户尝试同时编辑同一个文档会发生什么？: 他们都可以编辑文件。

用户是否需要在更改反映之前单击“保存”按钮？：不，更改应同时反映

用户需要登录吗？： 是的

任何人都可以编辑任何文档，还是有访问限制？: 有限制，即。文档的创建者可以阻止用户编辑文档..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T05:13:46.413

寻找解决方案的第一步是*足够详细地定义所需的最终结果*。不要只考虑多用户协作部分，而是尝试描述整个用户体验：

*   用户如何选择他们想要编辑的文档？
*   用户如何创建新文档？
*   如果许多用户尝试同时编辑同一个文档会发生什么？
*   用户是否需要在更改反映之前单击“保存”按钮？
*   用户需要登录吗？
*   任何人都可以编辑任何文档，还是有访问限制？

通过思考这些设计决策，您最终会遇到一些具体的实现问题，然后您可以尝试回答这些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T15:56:02.893

这是一个链接[http://scholar.lib.vt.edu/theses/available/etd-05032001-113750/unrestricted/FinalThesis.pdf](http://scholar.lib.vt.edu/theses/available/etd-05032001-113750/unrestricted/FinalThesis.pdf)

由于上面的链接似乎已失效，这是一个更新的链接：

[https://vtechworks.lib.vt.edu/bitstream/handle/10919/32127/FinalThesis.pdf?sequence=1&isAllowed=y](https://vtechworks.lib.vt.edu/bitstream/handle/10919/32127/FinalThesis.pdf?sequence=1&isAllowed=y)

您可以浏览此 PDF。它让您深入了解协作编辑器的工作原理和方式。它提供了有关他们正在使用的架构和设计的详细信息。
也许这将帮助您开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T03:14:13.127

看看[Operational transformation](http://en.wikipedia.org/wiki/Operational_transformation)，这是 Google 用于其（已停产）Wave 产品的东西。[在此处](https://stackoverflow.com/questions/2043165/operational-transformation-library/2043367#2043367)查看指向其库的相关链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T05:46:53.513

你肯定需要查看 etherpad 的源代码。特别`Collab_server.js`是。这是一个有很多功能主义者的主文件。这个文件的主要方法之一如下值得检查：

```
function applyUserChanges(pad, baseRev, changeset, optSocketId, optAuthor) {
  // changeset must be already adapted to the server's apool

  var apool = pad.pool();
  var r = baseRev;
  while (r < pad.getHeadRevisionNumber()) {
    r++;
    var c = pad.getRevisionChangeset(r);
    changeset = Changeset.follow(c, changeset, false, apool);
  }

  var prevText = pad.text();
  if (Changeset.oldLen(changeset) != prevText.length) {
    _doWarn("Can't apply USER_CHANGES "+changeset+" to document of length "+
            prevText.length);
    return;
  }

  var thisAuthor = '';
  if (optSocketId) {
    var connectionId = getSocketConnectionId(optSocketId);
    if (connectionId) {
      var connection = getConnection(connectionId);
      if (connection) {
        thisAuthor = connection.data.userInfo.userId;
      }
    }
  }
  if (optAuthor) {
    thisAuthor = optAuthor;
  }

  pad.appendRevision(changeset, thisAuthor);
  var newRev = pad.getHeadRevisionNumber();
  if (optSocketId) {
    _getPadRevisionSockets(pad)[newRev] = optSocketId;
  }

  var correctionChangeset = _correctMarkersInPad(pad.atext(), pad.pool());
  if (correctionChangeset) {
    pad.appendRevision(correctionChangeset);
  }

  ///// make document end in blank line if it doesn't:
  if (pad.text().lastIndexOf("\n\n") != pad.text().length-2) {
    var nlChangeset = Changeset.makeSplice(
      pad.text(), pad.text().length-1, 0, "\n");
    pad.appendRevision(nlChangeset);
  }

  updatePadClients(pad);

  activepads.touch(pad.getId());
  padevents.onEditPad(pad, thisAuthor);
} 
```

可能这会帮助你开始。

# c++ - 使用 clang 解析命名空间：在另一个源文件中包含标头或直接解析时的 AST 差异

> ID：10561212
> 
> 赞同：10
> 
> 时间：2012-05-12T04:59:59.637
> 
> 标签：c++, python, parsing, clang

很抱歉这个冗长的问题，但我看不到任何其他方式可以说清楚。我正在编写一个工具来将 C++ 头文件转换为 SWIG 接口文件，作为进一步微调的启动器。

在执行此操作的过程中，我注意到 clang (v3.0) 的一些奇怪行为。如果我解析头文件，我得到的 AST 与解析包含头文件的源文件有很大不同。

出于说明目的，以下是一些示例源文件：

源文件：

```
// example.cpp: Test case for nsbug.py
//
#include "example.h" 
```

标题：

```
// example.h: Test case for nsbug.py
//
namespace Geom {

struct Location
{
    double x, y;
};

class Shape
{
public:
    Shape();

    void set_location(const Location &where)
    {
        m_pos = where;
    };

    const Location &get_location() const

    // Draw it...
    virtual void draw() const = 0;

protected:
    Location m_pos;
};

class Circle : public Shape
{
    Circle();

    virtual void draw() const;
};
} // namespace Geom 
```

我使用以下 Python 代码对其进行解析并转储 AST：

```
# Usage: python nsbug.py <file>

import sys
import clang.cindex

def indent(level):
    """ Indentation string for pretty-printing
    """ 
    return '  '*level

def output_cursor(cursor, level):
    """ Low level cursor output
    """
    spelling = ''
    displayname = ''

    if cursor.spelling:
        spelling = cursor.spelling
    if cursor.displayname:
        displayname = cursor.displayname
    kind = cursor.kind;

    print indent(level) + spelling, '<' + str(kind) + '>'
    print indent(level+1) + '"'  + displayname + '"'

def output_cursor_and_children(cursor, level=0):
    """ Output this cursor and its children with minimal formatting.
    """
    output_cursor(cursor, level)
    if cursor.kind.is_reference():
        print indent(level) + 'reference to:'
        output_cursor(clang.cindex.Cursor_ref(cursor), level+1)

    # Recurse for children of this cursor
    has_children = False;
    for c in cursor.get_children():
        if not has_children:
            print indent(level) + '{'
            has_children = True
        output_cursor_and_children(c, level+1)

    if has_children:
        print indent(level) + '}'

index = clang.cindex.Index.create()
tu = index.parse(sys.argv[1], options=1)

output_cursor_and_children(tu.cursor) 
```

当我在*example.cpp*上运行它时，我得到（我认为是正确的）：

```
 <CursorKind.TRANSLATION_UNIT>
  "example.cpp"
{

  (Deleted lots of clang-generated declarations such as __VERSION__)

  Geom <CursorKind.NAMESPACE>
    "Geom"
  {
    Location <CursorKind.STRUCT_DECL>
      "Location"
    {
      x <CursorKind.FIELD_DECL>
        "x"
      y <CursorKind.FIELD_DECL>
        "y"
    }
    Shape <CursorKind.CLASS_DECL>
      "Shape"
    {
       <CursorKind.CXX_ACCESS_SPEC_DECL>
        ""
       <CursorKind.CXX_ACCESS_SPEC_DECL>
        ""
      Shape <CursorKind.CONSTRUCTOR>
        "Shape()"
      set_location <CursorKind.CXX_METHOD>
        "set_location(const Geom::Location &)"
      {
        where <CursorKind.PARM_DECL>
          "where"
        {
           <CursorKind.TYPE_REF>
            "struct Geom::Location"
          reference to:
            Location <CursorKind.STRUCT_DECL>
              "Location"
        }
         <CursorKind.COMPOUND_STMT>
          ""
        {
           <CursorKind.CALL_EXPR>
            "operator="
          {
             <CursorKind.MEMBER_REF_EXPR>
              "m_pos"
             <CursorKind.UNEXPOSED_EXPR>
              "operator="
            {
               <CursorKind.DECL_REF_EXPR>
                "operator="
            }
             <CursorKind.DECL_REF_EXPR>
              "where"
          }
        }
      }
      get_location <CursorKind.CXX_METHOD>
        "get_location()"
      {
         <CursorKind.TYPE_REF>
          "struct Geom::Location"
        reference to:
          Location <CursorKind.STRUCT_DECL>
            "Location"
      }
       <CursorKind.CXX_ACCESS_SPEC_DECL>
        ""
       <CursorKind.CXX_ACCESS_SPEC_DECL>
        ""
      m_pos <CursorKind.FIELD_DECL>
        "m_pos"
      {
         <CursorKind.TYPE_REF>
          "struct Geom::Location"
        reference to:
          Location <CursorKind.STRUCT_DECL>
            "Location"
      }
    }
    Circle <CursorKind.CLASS_DECL>
      "Circle"
    {
       <CursorKind.CXX_BASE_SPECIFIER>
        "class Geom::Shape"
      reference to:
        Shape <CursorKind.CLASS_DECL>
          "Shape"
      {
         <CursorKind.TYPE_REF>
          "class Geom::Shape"
        reference to:
          Shape <CursorKind.CLASS_DECL>
            "Shape"
      }
      Circle <CursorKind.CONSTRUCTOR>
        "Circle()"
      draw <CursorKind.CXX_METHOD>
        "draw()"
    }
  }
} 
```

但是当我在头文件上尝试它时，`python nsbug.py example.py`我只得到：

```
 <CursorKind.TRANSLATION_UNIT>
  "example.h"
{

  (deleted lots of clang-generated definitions such as __VERSION__)

  Geom <CursorKind.VAR_DECL>
    "Geom"
} 
```

为什么`Geom`AST 中的命名空间是一个 VAR_DECL？除了预处理器游标外，我预计没有区别。

解决方法很明显——只需在内存中创建一个包含标题的临时文件——但这并不是很令人满意。有人可以启发我吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-13T23:11:18.863

由于您没有明确指定语言，因此 Clang 从文件扩展名确定语言，导致`"example.h"`被解析为 C，而不是 C++。因此，该文件在很大程度上是格式错误的，并且索引器会尽力恢复。`namespace Geom`被视为`Geom`具有未知类型的变量声明`namespace`，并跳过以下意外`{`...`}`块。

尝试：

```
tu = index.parse(sys.argv[1], args=['-x', 'c++']) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-17T15:42:07.527

虽然理查德的回答在这种情况下确实有效，但我可以解决同样的问题，但这对我不起作用。事实证明，python clang 绑定隐藏了错误消息。如果您运行以下命令：

```
clang -Xclang -ast-dump -fsyntax-only yourfile.cpp 
```

这将打印出 AST 信息。就我而言，它找不到头文件，因为它位于不同的目录中。因此，我必须添加传入`-I`的附加包含路径`args`，并且它起作用了。

# iphone - 将设备添加到配置文件？

> ID：10561214
> 
> 赞同：0
> 
> 时间：2012-05-12T05:00:22.307
> 
> 标签：iphone, provisioning, device

developer.apple.com 上的“我的设备”选项卡缺少“添加新设备”或“批量上传”按钮？

我错过了什么吗，这些按钮曾经在那里？

![在此处输入图像描述](../Images/c72ea2169135f29a482575870aa1c216.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:22:45.883

在 Xcode 中选择您的设备，然后单击添加到门户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T05:47:55.883

希望这将帮助您 [预发布 Apple 软件](https://stackoverflow.com/a/10381570/932011)

# asp.net - 使用站点地图的菜单控制导航错误

> ID：10561218
> 
> 赞同：0
> 
> 时间：2012-05-12T05:01:08.467
> 
> 标签：asp.net, iis, web-config

我使用菜单控件进行导航。我将站点地图用于不同的登录用户。在我的本地主机中它运行良好，但是当我将我的应用程序上传到服务器时，它在 web.config 中显示错误。

> 解析器错误消息：在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。

```
<siteMap>
  <providers>
    <add name="MyNewSitemapProvider"
            type="System.Web.XmlSiteMapProvider"
            siteMapFile="MyNewSitemapFile.sitemap"/>
  </providers>
</siteMap> 
```

你能告诉我我哪里做错了吗...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T05:10:03.910

嗯......这只是意味着您不允许将此配置添加到您的 Web.Config 文件中，**除非**您将虚拟目录转换为应用程序。如果您有权访问 IIS 管理器，请执行以下操作：

*   在 IIS 浏览器中右键单击应用程序的文件夹。
*   单击“转换为应用程序”并按照说明进行操作
*   现在刷新你的页面，它应该可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T05:11:06.523

您不知何故需要为该站点创建一个应用程序。如果您可以控制机器，则可以在 IIS 中进行。否则主机可能有一个工具来为你设置它。

# uiimageview - 如何在 iphone sdk 中裁剪图像圈

> ID：10561221
> 
> 赞同：0
> 
> 时间：2012-05-12T05:02:01.850
> 
> 标签：uiimageview, uibutton, uipickerview, crop

我正在尝试使用 iPhone 上相机胶卷中的图像为自定义样式 UIButton 创建图像。该按钮具有圆形背景，并且有效地显示为圆形。现在我需要一个图像放在也出现圆形的按钮中间。

任何人都可以帮助我吗？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T05:10:42.430

您必须设置按钮图层的圆角半径以使其为圆形。但是你不能准确地对图像做同样的事情。

您需要为您想要的状态设置 UIButton 的图像属性。但更重要的是确保图像也是圆形的。

图像不能是圆形的，但如果你使用 PNG，它支持透明度，所以有一个角透明的图像，这样图像看起来是圆形的。

```
btnImage = [UIImage imageNamed:@"image.png"];
[circularBtn setImage:btnImage forState:UIControlStateNormal]; 
```

# c# - 如何使用 opencv 均衡图像的对比度和亮度？

> ID：10561222
> 
> 赞同：15
> 
> 时间：2012-05-12T05:02:03.687
> 
> 标签：c#, opencv, image-manipulation, emgucv

我有一张已扫描的图像，但屏幕上的白纸不是白色的。有没有办法平衡合同/亮度以使背景更白？

[![](../Images/b5c190bb23b19a27ce817d8c0551e2dc.png)](https://i.stack.imgur.com/9jU1U.jpg)

**更新**

我已经尝试了 EmguCv 中建议的 Image._EqualizeHist 函数：

```
string file = @"IMG_20120512_055533.jpg";
Image<Bgr, byte> originalColour = new Image<Bgr, byte>(file);

Image<Bgr, byte> improved = originalColour.Clone();
improved._EqualizeHist(); 
```

但是得到一个更糟糕的结果（也是在第一次灰度时）：

[![](../Images/521e829d9f35890000aea8117d6fbade.png)](https://i.stack.imgur.com/vetKe.jpg)

我是否缺少其他参数？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-12T05:39:23.717

我在这里讨论了一些技术：[如何在 C 中调整 OpenCV 中的对比度？](https://stackoverflow.com/questions/10549245/how-can-i-adjust-contrast-in-opencv-in-c/10551882#10551882)

请检查一下。以下是我在您的图像上尝试最后两种方法时得到的结果

1）**阈值**：

阈值化给出二值图像。如果这是你想要的，你可以申请`threshold function`

2）**如果需要灰度图像**：

![在此处输入图像描述](../Images/1c32a014a040bc9f27eaa4f336e94a2e.png)

**额外的 ：**

`Morphological closing`在你的情况下也很好用

```
img = cv2.imread('home.jpg',0)
kernel1 = cv2.getStructuringElement(cv2.MORPH_ELLIPSE,(5,5))
close = cv2.morphologyEx(gray,cv2.MORPH_CLOSE,kernel1)
div = np.float32(gray)/(close)
res = np.uint8(cv2.normalize(div,div,0,255,cv2.NORM_MINMAX)) 
```

（Python API 中的代码）

结果如下：

![在此处输入图像描述](../Images/f4b0efd9ee10b648ba0dcf2d5204f52d.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-12T10:11:10.703

我建议使用[AdaptiveThreshold](http://opencv.willowgarage.com/documentation/python/miscellaneous_image_transformations.html)。它通过对图像中的每个像素进行局部邻域阈值处理来工作（当有渐变背景时，这确实很重要，比你的图像强一点）。该`blockSize`参数是邻域的大小，处理后的像素值必须大于平均邻域值减去`param1`。

![在此处输入图像描述](../Images/1c1fb78933dffb59b998a64b65476641.png)

以下是如何在 python 中执行此操作（转换为 c 应该很容易）：

```
import cv
im = cv.LoadImage("9jU1Um.jpg", cv.CV_LOAD_IMAGE_GRAYSCALE)
cv.AdaptiveThreshold(im, im, 255, cv.CV_ADAPTIVE_THRESH_MEAN_C, 
                                  cv.CV_THRESH_BINARY, blockSize=31, param1=15)
cv.ShowImage('image', im)
cv.WaitKey(0) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-09-16T22:24:49.100

要更改亮度和对比度，您可以将像素值相乘，然后向它们添加一些常数。[（有关更改图像对比度和亮度的](https://docs.opencv.org/3.4.2/d3/dc1/tutorial_basic_linear_transform.html)更多信息，请参见 OpenCV 文档。）

使用 python 和 numpy：

```
import cv2 as cv
import numpy as np

img = cv.imread('b.jpg',0) # loads in grayscale

alpha = 1
beta = 0
res = cv.multiply(img, alpha)
res = cv.add(res, beta) 
```

您也可以只使用：

```
res = cv.convertScaleAbs(img, alpha = alpha, beta = beta) 
```

在您的图像中，您可以在直方图中检查最大值在 170 左右（实际上，如果您使用 172，它是 172 `img.max()`）。因此，您可以将图像乘以`255/172 = 1.48`增加亮度。

请参阅以下结果：

[![在此处输入图像描述](../Images/c770504fac45f757a495ea731482c902.png)](https://i.stack.imgur.com/uEaYc.png)

以及直方图，分别为：

[![在此处输入图像描述](../Images/c60140ea94b5918f8c0bcc954da56c13.png)](https://i.stack.imgur.com/Q8Nk2.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-12T05:11:19.897

它被称为equalizeHist。我不知道它在 emgu 中的名称，但结果应该正是您所需要的 - 更亮的背景和更暗的文本。

**编辑**

要仅提取边缘（这与图像增强技术非常不同），您可以简单地应用 Canny。选择 20 和 60 这两个阈值作为开始，然后增加（或减少）它们之间的比例保持为 3:1，直到获得好看的边缘图像。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-13T02:50:19.293

无论哪种方式，您还可以检查每个像素。如果小于定义的值，则将其设置为 0，如果超过定义的值，则将其设置为 255。

# objective-c - 使用 MKMapView 和 Core Data 来索引和显示位置？

> ID：10561229
> 
> 赞同：0
> 
> 时间：2012-05-12T05:03:38.963
> 
> 标签：objective-c, ios, core-data, mkmapview

我将构建一个自定义地图应用程序，该应用程序具有一个自定义的、预先确定的位置列表（我希望将此列表存储在应用程序本身中，这样用户就不必加载它以供使用）。基本上，我会选择一种“封闭”的地图应用程序；一个具有相当大的可搜索位置数组的位置，当用户找到他们想要的位置时，它会将注释加载到地图视图上并显示位置。

在开始这项工作之前，我想获得一些反馈，看看我选择的工具是否最适合手头的工作。那么，MKMapView 和 Core Data 会是实现这个想法的最简单和最有效的方式吗？我绝对愿意接受建议、想法等，并提前感谢您的反馈和想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T13:53:43.093

如果您有一组预定义的位置，那么带有 coredata/sqlite 的 MKMapView 绝对是最佳选择。

# javascript - NicEditor 字体大小从标签到

> ID：10561232
> 
> 赞同：2
> 
> 时间：2012-05-12T05:04:09.277
> 
> 标签：javascript, textbox, text-editor, nicedit, rich-text-editor

嗨，我正在使用 NicEditor，我希望字体大小以不同的方式工作。现在编辑器使用：

`<font size='1...7'>the selected text here</font>`

我不希望它成为一个跨度标签，即

`<span style='font-size:30px'>the selected text here</span>`

这是下拉菜单的代码：

```
var nicEditorFontSizeSelect = nicEditorSelect.extend({
    sel : {1 : '1&nbsp;(8pt)', 2 : '2&nbsp;(10pt)', 3 : '3&nbsp;(12pt)', 4 : '4&nbsp;(14pt)', 5 : '5&nbsp;(18pt)', 6 : '6&nbsp;(24pt)', 7 : '7&nbsp;(36pt)', 8 : '8&nbsp;(48pt)', 9 : '9&nbsp;(72pt)', 10 : '10&nbsp;90pt)', 11 : '11&nbsp;(100pt)'},
    init : function() {
        this.setDisplay('Font&nbsp;Size...');
        for(itm in this.sel) {
            this.add(itm,'<font size="'+itm+'">'+this.sel[itm]+'</font>');
        }       
    }
}); 
```

但我找不到要修改的代码，以便它将替换成文本区域内`font`的标签。`span`

任何建议都非常受欢迎。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T23:52:13.790

Know this is an old question but should anyone else need the answer here it is.

Note this is very basic and could do with improving, for example it'll create nested 's.

Anyway, add this JS code before you initialise your nicEditor, create a custom plugin:

```
var nicSelectOptionsCustomFormat = {
    buttons : {
        'fontCustomSize' : {name : __('Font size'), type : 'nicEditorCustomFormatSelect'}
    }
};
var nicEditorCustomFormatSelect = nicEditorSelect.extend({
    sel : {'11px' : '11px', '13px' : '13px', '15px' : '15px', '19px' : '19px', '22px' : '22px'},

    init : function() {
        this.setDisplay('Font size');
        for(itm in this.sel) {
            this.add(itm,'<span style="size:'+itm+'">'+this.sel[itm]+'</span>');
        }
    }

    ,update : function(elm) {
        var newNode = document.createElement('span');
        newNode.style.fontSize = elm;
        var rng = this.ne.selectedInstance.getRng().surroundContents(newNode);
        this.close();
    }
});
nicEditors.registerPlugin(nicPlugin,nicSelectOptionsCustomFormat); 
```

Then use `fontCustomSize` when you create your editor, eg:

```
var config = {
    buttonList: ["bold", "italic", "underline","fontCustomSize"]
};
var e = new nicEditor(config);
e.panelInstance("page-description"); 
```

# winforms - 在 MVP 方案中，presenter 和 view 之间如何通信？

> ID：10561233
> 
> 赞同：0
> 
> 时间：2012-05-12T05:04:32.723
> 
> 标签：winforms, model-view-controller, design-patterns, mvp, passive-view

据我所知，基本上有两种选择。

第一个是查看展示者应该订阅的通知事件。当用户单击视图上的某个按钮时，视图只会触发一些事件，通知某些内容发生了变化。

第二种只是使用观察者模式，让演示者干预一些合同。让它成为一个接口，其中包含我上面告诉你的事件之类的方法。应将演示者观察者附加到视图。

正如 Jeremy Miller 在其传奇的[“构建自己的 CAB 系列”博](http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/)文中所说，他最好使用第二个选项。

你对这个话题有什么看法？您如何在项目中绑定演示者和视图？每个选项的优点或缺点是什么？

让我们在这里进行一些民意调查。我认为这会很有用。提前致谢！

* * *

**为了回应彼得里奇的回答。**

我的问题是我缺乏经验，我应该依靠别人的意见来做出决定并选择一种对我来说似乎正确的方式。

> 接口的缺点是你有特定的耦合。视图与接口耦合，并且必须实现该接口

但另一方面，事件服务不是像某种契约（像接口一样）吗？它将演示者绑定到视图，因为它应该对这些事件做出反应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T05:11:37.723

观察者可能有点乏味。如果您有多个控件产生事件或多个事件，那么您必须一次将它们连接起来。而如果你使用一个接口，它就在一个地方，如果你忘记实现接口的特定成员，你会得到类型安全和编译错误。接口的缺点是你有特定的耦合。视图与接口耦合，并且必须实现该接口。您可以使用接口隔离将接口耦合限制为一个特定的类；但是，这增加了一定程度的复杂性。

对此没有一个正确的答案。您可以提供一些标准来帮助您做出决定吗？

# ios - 有什么方法可以让 Time Profiler Instrument 对大型功能更有效？

> ID：10561237
> 
> 赞同：2
> 
> 时间：2012-05-12T05:05:24.750
> 
> 标签：ios, xcode, profiling, instruments, intel-vtune

我目前正在为 iOS 使用 Xcode 的 Time Profiler Instrument。一个功能非常大。是的，将其拆分成更小的内联会更加智能。但是，有没有办法伪造堆栈级别或让仪器处理如此大的函数，以便更容易确定实际上慢速部分是什么？

在 AMD Code Analyst 和 Intel VTune 中，您可以看到函数的图表，以便您确定不同的减速区域。我基本上想知道是否有适用于 iOS 设备的 Xcode 等价物。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T00:32:46.933

如果您在 Instruments 时间分析器中有一个大型函数，您应该能够双击该行（或单击右侧显示的小箭头），它将直接带您进入代码（在 Instruments 中）。

![timeProfilerImg](../Images/b6b91241f1bfafb51b3325f113906e18.png)

从那里，任何使用大量 CPU 时间的特定行都将以特定百分比突出显示。在代码视图的右上角会有一个小的 xCode 图标，您可以单击它来打开 xCode 中的特定代码区域。

# c++ - Qt sql查询失败

> ID：10561240
> 
> 赞同：3
> 
> 时间：2012-05-12T05:06:20.217
> 
> 标签：c++, mysql, qt, qtsql

```
query->prepare("INSERT INTO businessweek (id, source, date, headline, body) VALUES (NULL, ?, ?, ?, ?)");
query->bindValue(1, "source");
query->bindValue(2, "date");
query->bindValue(3, "headline");
query->bindValue(4, "body");

if (query->exec()) {
    tt << "Query success";
} else {
    qDebug() << db.lastError();
    return;
} 
```

我正在使用 QMYSQL。错误是

```
 QSqlError(-1, "", "") 
```

但

```
query->exec("INSERT INTO businessweek (id, source, date, headline, body) VALUES (NULL, 'google', 'may 0, 23', 'head', 'fjsdflksjdlkfdsjlfkjd');") 
```

工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T05:41:06.757

很难猜出问题所在。但是我可以想象的一件事并且您的代码肯定有问题是字段编号`bindValue`从 0 开始（请参见[此处](http://qt-project.org/doc/qt-4.8/qsqlquery.html#bindValue-2)）。

因此，我建议尝试

```
query->prepare("INSERT INTO businessweek (id, source, date, headline, body) VALUES (NULL, ?, ?, ?, ?)");
query->bindValue(0, "source");
query->bindValue(1, "date");
query->bindValue(2, "headline");
query->bindValue(3, "body");

if (query->exec()) {
    tt << "Query success";
} else {
    qDebug() << db.lastError();
    return;
} 
```

# java - android：如果开/关/自动，如何检查闪光灯？

> ID：10561241
> 
> 赞同：2
> 
> 时间：2012-05-12T05:06:31.110
> 
> 标签：java, android, eclipse, camera, android-camera

所以我试图有一个按钮，用户可以在闪光灯开/关/自动之间进行选择。这个按钮在我的相机预览活动中，但我不确定如何用一个按钮检查某些参数。

```
 //Flash Button
    final Button flashButton = (Button) findViewById(id.camera_flash);
    flashButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(mCamera != null){
                Parameters p = mCamera.getParameters();
                p.setFlashMode(Parameters.FLASH_MODE_AUTO);
                mCamera.setParameters(p);
                mCamera.startPreview();
                flashButton.setText("AUTO");
                Log.e("Torch","Torch On");
            }else{
                Parameters p = mCamera.getParameters();
                p.setFlashMode(Parameters.FLASH_MODE_OFF);
                mCamera.setParameters(p);
                mCamera.release();
                mCamera=null;
                flashButton.setText("OFF");

            }// maybe another one for ON

        } 
```

现在它的设置 if`mCamera!=null`但是我如何检查闪光灯是自动、打开还是关闭？我在想可能有一个 SWITCH 代替？我试图将这些设置保留在一个按钮中，所以它是一种切换。有人可以帮我弄这个吗？

提前致谢。

更新代码

```
 //Flash Button
    final Button flashButton = (Button) findViewById(id.camera_flash);
    flashButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Parameters p = mCamera.getParameters();

            // TODO Auto-generated method stub
            if(p.getFlashMode() == android.hardware.Camera.Parameters.FLASH_MODE_ON){
                p.setFlashMode(Parameters.FLASH_MODE_OFF);
                mCamera.setParameters(p);
                mCamera.startPreview();
                flashButton.setText("Off");
                Log.e("Torch","MODE OFF");

            }else if(p.getFlashMode() == android.hardware.Camera.Parameters.FLASH_MODE_OFF){
                p.setFlashMode(Parameters.FLASH_MODE_TORCH);
                mCamera.setParameters(p);
                mCamera.release();
                mCamera=null;
                flashButton.setText("TORCH");
                Log.e("Torch","MODE TORCH");

            }else if(p.getFlashMode() == android.hardware.Camera.Parameters.FLASH_MODE_AUTO){
                p.setFlashMode(Parameters.FLASH_MODE_ON);
                mCamera.setParameters(p);
                mCamera.startPreview();
                flashButton.setText("ON");
                Log.e("Torch","MODE ON");

            }else if(p.getFlashMode() == android.hardware.Camera.Parameters.FLASH_MODE_TORCH){
                p.setFlashMode(Parameters.FLASH_MODE_ON);
                mCamera.setParameters(p);
                mCamera.startPreview();
                flashButton.setText("AUTO");
                Log.e("Torch","MODE AUTO");

            }else{
                p.setFlashMode(Parameters.FLASH_MODE_AUTO);
                mCamera.setParameters(p);
                mCamera.startPreview();
                flashButton.setText("AUTO");
                Log.e("Torch","MODE AUTO");

            }

        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T05:22:20.213

您可以检查闪光灯是 AUTO、ON 还是 OFF，如下所示：

```
Camera.Parameters p= mCamera.getParameters();

if(p.getFlashMode().equals(android.hardware.Camera.Parameters.FLASH_MODE_ON))
{
 //DO STUFF...
}
else if(p.getFlashMode().equals(android.hardware.Camera.Parameters.FLASH_MODE_OFF))
{
//DO STUFF......
}
else if(p.getFlashMode().equals(android.hardware.Camera.Parameters.FLASH_MODE_TORCH))
{
//DO STUFF......
}
else if(p.getFlashMode().equals(android.hardware.Camera.Parameters.FLASH_MODE_AUTO))
{
//DO STUFF......
}
else
{
//DO STUFF.....
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T11:55:05.990

您需要使用 equals() 方法而不是“==”来比较这些值，因为这些值是字符串。

```
Camera.Parameters p= mCamera.getParameters();
String flashMode = p.getFlashMode();
if(flashMode == null) {
 //DO something, if it has no value
} else if(flashMode.equals(Camera.Parameters.FLASH_MODE_OFF)) {
  //DO STUFF......
} else if(flashMode.equals(Camera.Parameters.FLASH_MODE_TORCH)) {
//DO STUFF......
}
  :
  : 
```

# c# - Bings 地图控制仅限于一个国家？

> ID：10561247
> 
> 赞同：0
> 
> 时间：2012-05-12T05:08:15.600
> 
> 标签：c#, wpf, .net-4.0, bing-maps

我正在尝试创建一个弹出对话框，允许用户选择澳大利亚境内的坐标，但是我无法找到 WPF 控件的特定文档，即使它与 Silverlight 控件非常相似。

基本上我想要做的是将地图在澳大利亚居中，然后缩放到 3.8 的级别，然后防止用户将地图滚动到澳大利亚坐标范围之外，进一步缩小到 3.8 或重新居中地图在澳大利亚范围之外的另一个位置。

到目前为止，这是我的代码：

```
 <Window x:Class="GetP51.Views.Dialogs.SelectCoordinatesDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:m="clr-namespace:Microsoft.Maps.MapControl.WPF;assembly=Microsoft.Maps.MapControl.WPF"
        Title="GetP51 - Select Coordinates" MinHeight="525" Height="525" MaxHeight="525" MinWidth="500" Width="500" MaxWidth="500" Icon="../../GetP51.ico" WindowStartupLocation="CenterOwner" WindowStyle="ToolWindow">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="25"></RowDefinition>
            <RowDefinition></RowDefinition>
        </Grid.RowDefinitions>

        <TextBox x:Name="AddressSearch" Grid.Row="0"></TextBox>

        <m:Map x:Name="AustralianMap" Grid.Row="1" CredentialsProvider="key" Mode="Aerial"></m:Map>
    </Grid>
</Window> 
```

以及背后的代码：

```
public partial class SelectCoordinatesDialog : Window
    {
        public SelectCoordinatesDialog()
        {
            InitializeComponent();
            AustralianMap.Center = new Location(-25.274398, 133.775136);
            AustralianMap.ZoomLevel = 3.8;
        }
    } 
```

有人可以告诉我如何完成我想做的事情吗？

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:47:48.660

您可以简单地禁用地图控件并使用透明控件（例如 Canvas）覆盖它，该控件获取鼠标输入（例如 MouseLeftButtonUp）：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="25"/>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <TextBox x:Name="AddressSearch" Grid.Row="0" />    
    <m:Map Name="AustralianMap" Grid.Row="1"
           ZoomLevel="3.8" Center="-25.274398,133.775136"
           IsEnabled="False" />
    <Canvas Grid.Row="1" Background="Transparent"
            MouseLeftButtonUp="Canvas_MouseLeftButtonUp" />
</Grid> 
```

在输入事件处理程序中，您可以获得这样的位置：

```
private void Canvas_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
{
    Location loc = AustralianMap.ViewportPointToLocation(e.GetPosition(AustralianMap));

    System.Diagnostics.Trace.TraceInformation("Hit location {0}", loc);
} 
```

这里是[Bing Maps WPF Control API Reference](http://msdn.microsoft.com/en-us/library/hh872901)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T14:02:00.973

您可以通过自己处理来禁用地图的相应事件，也可以尝试使用以下代码将地图移动限制在给定的值范围内。

以下代码会将地图限制在提供的坐标上，并将其限制在提供的缩放级别。如果需要， 您可以在使用`Aerial`和之间来回切换。**注意：**这是 Silverlight 代码，我从来没有弄乱过 WPF 中的地图控件，所以我不确定这是否可行。`CustomMode`

 **```
public class CustomMode : MercatorMode {
    protected static Range<double> validLatitudeRange = new Range<double>(-45.58328975600631, -8.320212289522944);
    protected static Range<double> validLongitudeRange = new Range<double>(110.7421875, 156.533203125);

    protected override Range<double> GetZoomRange(Location center) {
        return new Range<double>(3, 3.8);
    }

    public override bool ConstrainView(Location center, ref double zoomLevel, ref double heading, ref double pitch) {
        bool isChanged = base.ConstrainView(center, ref zoomLevel, ref heading, ref pitch);

        double newLatitude = center.Latitude;
        double newLongitude = center.Longitude;

        if(center.Longitude > validLongitudeRange.To) {
            newLongitude = validLongitudeRange.To;
        } else if(center.Longitude < validLongitudeRange.From) {
            newLongitude = validLongitudeRange.From;
        }

        if(center.Latitude > validLatitudeRange.To) {
            newLatitude = validLatitudeRange.To;
        } else if(center.Latitude < validLatitudeRange.From) {
            newLatitude = validLatitudeRange.From;
        }

        if(newLatitude != center.Latitude || newLongitude != center.Longitude) {
            center.Latitude = newLatitude;
            center.Longitude = newLongitude;
            isChanged = true;
        }

        Range<double> range = GetZoomRange(center);
        if(zoomLevel > range.To) {
            zoomLevel = range.To;
            isChanged = true;
        } else if(zoomLevel < range.From) {
            zoomLevel = range.From;
            isChanged = true;
        }

        return isChanged;
    }
} 
```**

# c# - 子元素的 WPF Panel.ZIndex

> ID：10561253
> 
> 赞同：1
> 
> 时间：2012-05-12T05:10:32.093
> 
> 标签：c#, .net, wpf

我正在开发一个小型视觉设计器，我需要实现索引元素的功能。所有元素都有自己的可见性级别，相互依赖。我没有将 ZIndex 用于主要元素，因此它们显示为在可视树中。但是所有处于设置索引模式的元素都有一个带有索引号的区域。问题是这些区域继承了它们父母的 zindex。我尝试为这些区域设置 zindex = 1000，但没有帮助。

```
<ControlTemplate x:Key="IndexRegion" TargetType="ContentControl">
        <Border>
            <StackPanel Orientation="Horizontal">
                <!--<TextBlock Text="Индекс: "></TextBlock>-->
                <TextBlock Text="{Binding TabIndex}"></TextBlock>
            </StackPanel>
        </Border>
    </ControlTemplate>
<Style x:Key="IndexRegionStyle" TargetType="ContentControl">
        <Setter Property="HorizontalAlignment" Value="Left"></Setter>
        <Setter Property="Margin" Value="1 -15 0 0"></Setter>
        <Setter Property="Visibility" Value="{Binding IsTabIndexVisible, Mode=OneWay, Converter={StaticResource VisibilityOfBool}}"></Setter>
        <Setter Property="Panel.ZIndex" Value="1000"></Setter>
    </Style>

<DataTemplate DataType="{x:Type viewModel:WizardFormTextFieldViewModel}">
  <wfSurface:DesignSurfaceItemContainer Width="{Binding Width}" Height="{Binding Height}" ClipToBounds="False">
    <Grid VerticalAlignment="Stretch" HorizontalAlignment="Stretch">

      <ContentControl Style="{StaticResource IndexRegionStyle}" Template="{StaticResource IndexRegion}">
      </ContentControl> --- this is an index region

      <Border Style="{StaticResource WrongElement}">
        <Border Style="{StaticResource TextFieldStyle}">                        
        </Border>
      </Border>
    </Grid>
  </wfSurface:DesignSurfaceItemContainer>           
</DataTemplate> 
```

我怎样才能使所有区域都高于所有主要元素？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T06:17:11.890

ZIndex 是一个索引，用于组织兄弟姐妹（同一容器的子控件）的 z 顺序

If you want elements to be on top of 'everything' you need to add a new container that is on top of everything. You cannot specify this from a lower level such as this Template. The UI remains a hierarchy, you can't break that as far as I know.

# jquery - 带有ID和类选择器的jQuery属性选择器

> ID：10561263
> 
> 赞同：2
> 
> 时间：2012-05-12T05:12:21.820
> 
> 标签：jquery, class, attributes, selector, html-table

我有一个带有“report-standard-alternatingrowcolors”类的表，element_id 是 tr 元素的 id。在选择器的末尾，我想选择带有属性选择器的 td 元素。“.data”是 td 元素的类。但是没有用。它选择所有 td 值。你有什么主意吗？

```
alert($('.report-standard-alternatingrowcolors #element_id .data[headers="STATE"]').val()); 
```

您可以查看：http: [//jsfiddle.net/BscPP/](http://jsfiddle.net/BscPP/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T05:17:38.050

[http://jsfiddle.net/BscPP/1/](http://jsfiddle.net/BscPP/1/)

给你。您没有`report-standard...`引号内的主要内容，因此这行不通。此外，您在选择器中投入了大量精力。在提供的示例中，所需要的只是使用`.data[headers="STATE"]`and 使用 the`.text()`而不是`.val()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T05:17:49.420

你的例子有一些问题。

您加载了 MooTools 而不是 jQuery。

你的 HTML 是错误的。

```
<table class=""report-standard-alternatingrowcolors> 
```

您需要将课程放在引号中

```
<table class="report-standard-alternatingrowcolors"> 
```

`<td>`s没有`value`属性，所以`.val()`是错误的方法，试试吧`.text()`。

固定示例：http: [//jsfiddle.net/BscPP/2/](http://jsfiddle.net/BscPP/2/)

PS如果你想为元素添加自定义属性，你应该在它们前面加上`data-`：

```
<td class="data" data-headers="STATE">123</td> 
```

然后将选择器更改为：

```
$('.report-standard-alternatingrowcolors #element_id .data[data-headers="STATE"]') 
```

新演示：http: [//jsfiddle.net/BscPP/3/](http://jsfiddle.net/BscPP/3/)

注意：ID 应该是唯一的，所以`.report-standard-alternatingrowcolors`有点无关紧要。

```
$('#element_id .data[data-headers="STATE"]') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T05:19:10.790

你几乎明白了。在您的 jsFiddle 中，只需更改`.val()`为即可`.text()`。一个 td 元素没有价值。

此外，在小提琴中，您的课程`"report-standard-alternatingrowcolors"`位置不正确，它位于`" "`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T05:16:50.220

```
$('#element_id td.data[headers="STATE"]', '.report-standard-alternatingrowcolors').text() 
```

[小提琴](http://jsfiddle.net/adeneo/BscPP/5/)

# jquery - 鼠标上的复杂 Css 选择器单击页面中 html 元素的任何部分

> ID：10561264
> 
> 赞同：1
> 
> 时间：2012-05-12T05:13:34.547
> 
> 标签：jquery, dom

我正在使用 Jquery 1.7.2。我想在鼠标单击网页上的任何 html 元素时获得如下所示的输出。

假设 Html 代码是 :>

```
<div id ="mySDiv" class="FT">
    <div class="product">
        <a href="#">Try</a>
        <a href="#">catch</a>
        <a href="#">Throw</a>
    </div>
</div> 
```

当我单击锚标记“catch”上的 html 元素时，上述代码的输出将是

```
DIV#mySDIV.FT DIV.product A.eq(2) 
```

我能够得到输出直到下面

```
DIV#mySDIV.FT DIV.product 
```

为实现输出而编写的代码到现在

```
 $(document).click(function (e) {
        e.preventDefault();
        var $parents = $(e.target).parentsUntil('[id]');
        var tagNames = $parents.add($parents.parent())
    .map(function () {
        myCssSelector;
        var tagId = $(this).attr("id"); ;
        if (tag) {
            myCssSelector = this.tagName + "#" + tagId;
            var myClassName = $(this).attr("class");
            if (myClassName) {
                myCssSelector = myCssSelector + "." + myClassName;
            }
            else {
                myCssSelector = myCssSelector + " ";
            }
        }
        else {
            myCssSelector = this.tagName;
            var myClassName = $(this).attr("class");
            if (myClassName) {
                myCssSelector = myCssSelector + "." + myClassName;
            }
            else {
                myCssSelector = myCssSelector + " ";
            }
        }
        return myCssSelector;
    }).get().join(',');
        console.log(tagNames);
    }); 
```

我无法在子节点上进行横向计算并计算单击元素的兄弟节点

请帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T07:32:43.713

[http://jsfiddle.net/earlonrails/LCUzy/9/](http://jsfiddle.net/earlonrails/LCUzy/9/)

```
 $('*').click(function(e){
    var tagId = $(this).attr("id");    
    if (tagId) {
        myCssSelector = this.tagName + "#" + tagId;
        var myClassName = $(this).attr("class");
        if (myClassName) {
            myCssSelector = myCssSelector + "." + myClassName;
        } else {
            myCssSelector = myCssSelector + " ";
        }
    } else {
        myCssSelector = this.tagName;
        var myClassName = $(this).attr("class");
        if (myClassName) {
            myCssSelector = myCssSelector + "." + myClassName;
        } else {
            myCssSelector = myCssSelector + " " + $(this).index();
        }
    }
    console.log(myCssSelector);
});
​ 
```

# c# - 为 TextBlock 应用默认样式而不影响 ComboBox

> ID：10561272
> 
> 赞同：3
> 
> 时间：2012-05-12T05:17:21.077
> 
> 标签：c#, wpf, xaml

我想为`TextBlock`我的应用程序中使用 Royal 主题的所有控件设置默认样式。例如：

```
<Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource {x:Type TextBlock}}">
    <Setter Property="Margin" Value="4"/>        
</Style> 
```

这很好地继承了皇家主题，但不幸的是，它也影响了`TextBlock`在其他控件的模板中使用的样式`ComboBox`，我不希望这样。

我已经尝试将我的风格降低一级（例如在内部`Grid.Resources`），但没有运气。

有没有办法做到这一点？当然，我不想命名我的样式（使用`x:key`），因为我不想`TextBlock`将自定义样式显式应用于我的每个应用程序。并且没有创建子类来覆盖那里的样式。

有任何想法吗？先感谢您！

PS我已经看过可能相似的问题，但没有对我有用的答案。

**编辑：**

感谢所有的答案。我希望有一些我想念的方法可以区分`TextBlock`其他控件模板中使用的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T07:13:16.723

（对不起，我的英语不好）

一种方法是“强制” ComboBox 和 ComboBoxItem 内的 TextBlock 使用另一种样式。它不是很漂亮，但它有效:)

只需将其添加到您的，现在您可以`ResourceDictionary`随意调整`TextBlock`内部的外观`ComboBox`

```
<!-- Default for all TextBlock -->
   <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource {x:Type TextBlock}}">
    <Setter Property="Margin" Value="4"/>
    <Setter Property="Foreground" Value="Green"/>
</Style>

<!-- Applied only to TextBlocks inside ComboBox -->
<Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource {x:Type TextBlock}}" x:Key="ComboBoxTextBlockStyle">
    <Setter Property="Margin" Value="0"/>
    <Setter Property="Foreground" Value="Blue"/>
</Style>

<Style  TargetType="{x:Type ComboBox}">
    <Setter Property="FocusVisualStyle">
        <Setter.Value>
            <Style>
                <Setter Property="Control.Template">
                    <Setter.Value>
                        <ControlTemplate>
                            <Rectangle Margin="4,4,21,4" SnapsToDevicePixels="True" Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" StrokeThickness="1" StrokeDashArray="1 2"/>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </Setter.Value>
    </Setter>
    <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.WindowTextBrushKey}}"/>
    <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"/>
    <Setter Property="BorderBrush" Value="#FFA7A6AA"/>
    <Setter Property="BorderThickness" Value="1"/>
    <Setter Property="Padding" Value="0,1"/>
    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
    <Setter Property="ScrollViewer.CanContentScroll" Value="True"/>
    <Setter Property="ScrollViewer.PanningMode" Value="Both"/>
    <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
    <Setter Property="VerticalContentAlignment" Value="Center"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ComboBox}">

                <Grid SnapsToDevicePixels="True">

                    <Border x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="1">
                        <Grid Grid.IsSharedSizeScope="True">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="1"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition SharedSizeGroup="ComboBoxButton" Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Border x:Name="SelectedItemBorder" Grid.ColumnSpan="2" Margin="{TemplateBinding Padding}"/>
                            <ContentPresenter ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}" Content="{TemplateBinding SelectionBoxItem}" Grid.Column="1" ContentStringFormat="{TemplateBinding SelectionBoxItemStringFormat}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}">

                                <!-- ADD THIS HERE (SELECTED ITEM)-->
                                <ContentPresenter.Resources>
                                    <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource ComboBoxTextBlockStyle}"/>
                                </ContentPresenter.Resources>

                            </ContentPresenter>
                            <ToggleButton Grid.ColumnSpan="3" IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}">
                                <ToggleButton.Style>
                                    <Style TargetType="{x:Type ToggleButton}">
                                        <Setter Property="MinWidth" Value="0"/>
                                        <Setter Property="MinHeight" Value="0"/>
                                        <Setter Property="Width" Value="Auto"/>
                                        <Setter Property="Height" Value="Auto"/>
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Setter Property="Focusable" Value="False"/>
                                        <Setter Property="ClickMode" Value="Press"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="{x:Type ToggleButton}">
                                                    <Grid Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition SharedSizeGroup="ComboBoxButton" Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        <Microsoft_Windows_Themes:ScrollChrome x:Name="Chrome" Grid.Column="1" HasOuterBorder="False" Padding="1,0,0,0" RenderMouseOver="{TemplateBinding IsMouseOver}" RenderPressed="{TemplateBinding IsChecked}" Microsoft_Windows_Themes:ScrollChrome.ScrollGlyph="DownArrow" Width="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}"/>
                                                    </Grid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </ToggleButton.Style>
                            </ToggleButton>
                        </Grid>
                    </Border>
                    <Popup x:Name="PART_Popup" AllowsTransparency="True" Focusable="False" IsOpen="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}" PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}" Placement="Bottom">
                        <Microsoft_Windows_Themes:SystemDropShadowChrome x:Name="Shdw" Color="Transparent" MaxHeight="{TemplateBinding MaxDropDownHeight}" MinWidth="{TemplateBinding ActualWidth}">
                            <Border x:Name="DropDownBorder" BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}" BorderThickness="1" Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}">
                                <ScrollViewer x:Name="DropDownScrollViewer">
                                    <Grid RenderOptions.ClearTypeHint="Enabled">
                                        <Canvas HorizontalAlignment="Left" Height="0" VerticalAlignment="Top" Width="0">
                                            <Rectangle x:Name="OpaqueRect" Fill="{Binding Background, ElementName=DropDownBorder}" Height="{Binding ActualHeight, ElementName=DropDownBorder}" Width="{Binding ActualWidth, ElementName=DropDownBorder}"/>
                                        </Canvas>
                                        <ItemsPresenter x:Name="ItemsPresenter" KeyboardNavigation.DirectionalNavigation="Contained" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                    </Grid>
                                </ScrollViewer>
                            </Border>
                        </Microsoft_Windows_Themes:SystemDropShadowChrome>
                    </Popup>
                </Grid>
                <ControlTemplate.Triggers>
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="IsSelectionBoxHighlighted" Value="True"/>
                            <Condition Property="IsDropDownOpen" Value="False"/>
                        </MultiTrigger.Conditions>
                        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/>
                    </MultiTrigger>
                    <Trigger Property="IsSelectionBoxHighlighted" Value="True">
                        <Setter Property="Background" TargetName="SelectedItemBorder" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                    </Trigger>
                    <Trigger Property="HasDropShadow" SourceName="PART_Popup" Value="True">
                        <Setter Property="Margin" TargetName="Shdw" Value="0,0,5,5"/>
                        <Setter Property="Color" TargetName="Shdw" Value="#71000000"/>
                    </Trigger>
                    <Trigger Property="HasItems" Value="False">
                        <Setter Property="MinHeight" TargetName="DropDownBorder" Value="95"/>
                    </Trigger>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="BorderBrush" TargetName="Bd" Value="#FF335EA8"/>
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                        <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                    </Trigger>
                    <Trigger Property="IsGrouping" Value="True">
                        <Setter Property="ScrollViewer.CanContentScroll" Value="False"/>
                    </Trigger>
                    <Trigger Property="CanContentScroll" SourceName="DropDownScrollViewer" Value="False">
                        <Setter Property="Canvas.Top" TargetName="OpaqueRect" Value="{Binding VerticalOffset, ElementName=DropDownScrollViewer}"/>
                        <Setter Property="Canvas.Left" TargetName="OpaqueRect" Value="{Binding HorizontalOffset, ElementName=DropDownScrollViewer}"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <Trigger Property="IsEditable" Value="True">
            <Setter Property="IsTabStop" Value="False"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ComboBox}">

                        <Grid SnapsToDevicePixels="True">
                            <Border x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="1">
                                <Grid Grid.IsSharedSizeScope="True">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="1"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition SharedSizeGroup="ComboBoxButton" Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBox x:Name="PART_EditableTextBox" Grid.Column="1" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" IsReadOnly="{Binding IsReadOnly, RelativeSource={RelativeSource TemplatedParent}}" Margin="{TemplateBinding Padding}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}">
                                        <TextBox.Style>
                                            <Style TargetType="{x:Type TextBox}">
                                                <Setter Property="OverridesDefaultStyle" Value="True"/>
                                                <Setter Property="AllowDrop" Value="True"/>
                                                <Setter Property="MinWidth" Value="0"/>
                                                <Setter Property="MinHeight" Value="0"/>
                                                <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
                                                <Setter Property="ScrollViewer.PanningMode" Value="VerticalFirst"/>
                                                <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="{x:Type TextBox}">
                                                            <ScrollViewer x:Name="PART_ContentHost" Background="Transparent" Focusable="False" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden" />
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </TextBox.Style>
                                    </TextBox>
                                    <ToggleButton Background="{x:Null}" Grid.ColumnSpan="3" IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}">
                                        <ToggleButton.Style>
                                            <Style TargetType="{x:Type ToggleButton}">
                                                <Setter Property="MinWidth" Value="0"/>
                                                <Setter Property="MinHeight" Value="0"/>
                                                <Setter Property="Width" Value="Auto"/>
                                                <Setter Property="Height" Value="Auto"/>
                                                <Setter Property="Background" Value="Transparent"/>
                                                <Setter Property="Focusable" Value="False"/>
                                                <Setter Property="ClickMode" Value="Press"/>
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="{x:Type ToggleButton}">
                                                            <Grid Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="*"/>
                                                                    <ColumnDefinition SharedSizeGroup="ComboBoxButton" Width="Auto"/>
                                                                </Grid.ColumnDefinitions>
                                                                <Microsoft_Windows_Themes:ScrollChrome x:Name="Chrome" Grid.Column="1" HasOuterBorder="False" Padding="1,0,0,0" RenderMouseOver="{TemplateBinding IsMouseOver}" RenderPressed="{TemplateBinding IsChecked}" Microsoft_Windows_Themes:ScrollChrome.ScrollGlyph="DownArrow" Width="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}"/>
                                                            </Grid>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </ToggleButton.Style>
                                    </ToggleButton>
                                </Grid>
                            </Border>
                            <Popup x:Name="PART_Popup" AllowsTransparency="True" Focusable="False" IsOpen="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}" PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}" Placement="Bottom">
                                <Microsoft_Windows_Themes:SystemDropShadowChrome x:Name="Shdw" Color="Transparent" MaxHeight="{TemplateBinding MaxDropDownHeight}" MinWidth="{TemplateBinding ActualWidth}">
                                    <Border x:Name="DropDownBorder" BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}" BorderThickness="1" Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}">
                                        <ScrollViewer x:Name="DropDownScrollViewer">
                                            <Grid RenderOptions.ClearTypeHint="Enabled">
                                                <Canvas HorizontalAlignment="Left" Height="0" VerticalAlignment="Top" Width="0">
                                                    <Rectangle x:Name="OpaqueRect" Fill="{Binding Background, ElementName=DropDownBorder}" Height="{Binding ActualHeight, ElementName=DropDownBorder}" Width="{Binding ActualWidth, ElementName=DropDownBorder}"/>
                                                </Canvas>
                                                <ItemsPresenter x:Name="ItemsPresenter" KeyboardNavigation.DirectionalNavigation="Contained" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                            </Grid>
                                        </ScrollViewer>
                                    </Border>
                                </Microsoft_Windows_Themes:SystemDropShadowChrome>
                            </Popup>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="HasItems" Value="False">
                                <Setter Property="MinHeight" TargetName="DropDownBorder" Value="95"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="BorderBrush" TargetName="Bd" Value="#FF335EA8"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                                <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                            </Trigger>
                            <Trigger Property="IsGrouping" Value="True">
                                <Setter Property="ScrollViewer.CanContentScroll" Value="False"/>
                            </Trigger>
                            <Trigger Property="HasDropShadow" SourceName="PART_Popup" Value="True">
                                <Setter Property="Margin" TargetName="Shdw" Value="0,0,5,5"/>
                                <Setter Property="Color" TargetName="Shdw" Value="#71000000"/>
                            </Trigger>
                            <Trigger Property="CanContentScroll" SourceName="DropDownScrollViewer" Value="False">
                                <Setter Property="Canvas.Top" TargetName="OpaqueRect" Value="{Binding VerticalOffset, ElementName=DropDownScrollViewer}"/>
                                <Setter Property="Canvas.Left" TargetName="OpaqueRect" Value="{Binding HorizontalOffset, ElementName=DropDownScrollViewer}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Trigger>
    </Style.Triggers>
</Style>

<Style  TargetType="{x:Type ComboBoxItem}">
    <Setter Property="HorizontalContentAlignment" Value="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type ItemsControl}}}"/>
    <Setter Property="VerticalContentAlignment" Value="{Binding VerticalContentAlignment, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type ItemsControl}}}"/>
    <Setter Property="Padding" Value="3,0"/>
    <Setter Property="Background" Value="Transparent"/>

    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ComboBoxItem}">
                <Border x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="True">
                    <ContentPresenter ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" ContentStringFormat="{TemplateBinding ContentStringFormat}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}">

                        <!-- ADD THIS HERE (ITEMS LIST DROPDOWN)-->
                        <ContentPresenter.Resources>
                            <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource ComboBoxTextBlockStyle}"/>
                        </ContentPresenter.Resources>

                    </ContentPresenter>
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsHighlighted" Value="True">
                        <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/>
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T05:41:33.547

通过此排除：

> 当然，我不想命名我的样式（使用 x:key），因为我不想将自定义样式应用于我的应用程序的每个 TextBlock。并且没有创建子类来覆盖那里的样式。

你几乎问不可能的事。您创建的样式将应用于包含该样式的字典下方的可视树中的所有 TextBlock。

如果你想做出例外，你将不得不以一种或另一种方式指定它们。

显然，您的要求“为所有 TextBlock 控件设置默认样式”是不正确的。您不希望所有的 TextBlocks 都具有这种样式。

如果您希望从该级别应用样式，则将样式向下移动一个或多个级别可能是一种解决方案。

除非您能够以某种方式区分它们，否则无法指定您要将样式应用于特定的 TextBlocks 而不是其他的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T06:29:55.863

如果您熟悉 HTML 和 CSS 样式。在所有元素中都有特定的 CSS 样式是很常见的，例如。`<div class="foo bar"> <input class="boo bar"`特别是在专业/高级主题中。

WPF 和 XAML 实现了相同的概念。不使用 x:key 的样式无法满足您对复杂应用程序 UI 的所有需求。

为了减少编写，为组合框定义数据模板并应用特定样式。

```
 <ComboBox ItemsSource="{Binding Items}">
        <ComboBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Style="{StaticResource myComboBoxStyle}" Text="{Binding Path}" /> 
            </DataTemplate>
        </ComboBox.ItemTemplate>
    </ComboBox> 
```

# php - PHP Form/Cookies，需要刷新页面才能看到变化

> ID：10561278
> 
> 赞同：0
> 
> 时间：2012-05-12T05:18:25.213
> 
> 标签：php, mysql, html, cookies

原谅标题不好...

我正在尝试为登录脚本编写一个基本表单。用户输入用户名和密码并按下“登录”。分配给表单的操作只是刷新同一页面。该页面具有检查 $_POST 中的用户名和密码的代码，如果存在，则检查凭据，创建会话 ID 并设置 cookie。如果登录成功，则页面的登录部分不应再显示。

我遇到的问题是，在我点击登录后，似乎 cookie 的写入速度不够快或其他什么，因为随后从该 cookie 读取失败。但是，如果我立即手动刷新我的页面，它实际上已经成功登录。

```
// Login function, MD5 hashing would be replaced with something better
// if this were something mission critical, but as it stands I'm only
// using this as a learning tool
function login($username, $password) 
{

    $username = addslashes($username);
    $password = md5($password);
    $query = mysql_query("SELECT * FROM users WHERE username='$username' AND password='$password'");

    if(mysql_num_rows($query) == 1) 
    {
        $info = mysql_fetch_array($query);
        $userid = $info[uid];
        $sessionid = md5($userid . time());
        $time = time();
        setcookie ("testcookie", $sessionid, $time+3600, '/', '');
        mysql_query("DELETE FROM sessions WHERE uid='$userid'");
        mysql_query("INSERT INTO sessions (sessionid,uid,timestamp) VALUES('$sessionid','$userid','$time')");
        return $userid;
    } 
    else 
    {
        return 0;
    }
}

// Check the cookie and return the userid

function status() 
    {

        $sessionid = $_COOKIE[nojunkcontest];
        $oldtime = time() - 3600;
        $query = mysql_query("SELECT * FROM sessions WHERE sessionid='$sessionid' AND timestamp>$oldtime");

        if(mysql_num_rows($query) == 1) 
        {
            $info = mysql_fetch_array($query);
            return $info[uid];
        }

        return 0;
    }

// Check whether to attempt login, get userid either way

if($_POST[username] !='' || $_POST[password] != '') 
{
    $login_status = login($_POST[username], $_POST[password]);
} 

else if($_GET[logout]) 
{
    logout();
}

unset($userid); 
$userid = status();

// This is in the body of the document...

<?php
if($userid > 0) 
{ 
echo "Logged in  (<a href='?logout=1'>Logout</a>)"; 
} 

else 
{

if($login_status != '' && $login_status == 0) 
{ 
    echo "Invalid username/password combo.<br>"; 
}

?>

<form action = 'index.php' method ='post'>
<table border = '0' cellspacing = '5'>
<tr>
    <td>Username</td>
    <td><input type = 'text' name = 'username'></td>

    <td>Password</td>
    <td><input type = 'password' name = 'password'></td>

    <td><input type = 'submit' name = 'submit' value = 'Login'></td>
</tr>
</table>
</form> 
```

如您所见，表单操作是“index.php”，这是所有代码所在的同一页面，因此它只是执行刷新。status() 函数在此刷新时返回 0，但如果我之后手动刷新，它会成功，这让我相信 $_COOKIE 调用失败了。我没有包含的 login() 函数写入 status() 读取的 cookie。所以那个部门的一切都在工作，只是这个令人讨厌的刷新事情我无法弄清楚。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:00:47.123

正如你所说，你只是在试验，它不一定是安全的：

您的 cookie 的问题是*在*执行和交付给用户完成后设置了 cookie。这就是为什么在同一脚本中设置 cookie 后，您无法读取几行的原因。

但正如评论中的其他人已经建议的那样，永远不要为此使用cookie，使用会话。

# oracle - Oracle - 向表中添加列需要很长时间

> ID：10561279
> 
> 赞同：8
> 
> 时间：2012-05-12T05:18:38.797
> 
> 标签：oracle, alter-table

我需要将两个 DATE 列添加到已经存在的表中。但这需要很长时间，我必须终止该过程。奇怪的是我能够暂时将这些列添加到同一数据库中的其他表中。这些表中的大多数都比我在数据和列计数方面都遇到问题的表大。我必须做什么才能添加这些新列？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T06:33:10.493

这就是我解决问题的方法。之前，我在添加列时为列指定了默认值。但后来我首先添加了没有默认值的列。添加列后，我指定了默认值，它立即执行，无需等待。非常感谢@Justin Cave 关于默认值的提示。那是关键。

我毫不怀疑这与以下事实有关为所有行的新添加列设置默认值。正如人们所猜测的那样，更新 500 万条记录的成本很高。但是如果在添加列之后设置了默认值，那么之前插入的行中的新列的值将为 NULL，因此不会发生更新。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-19T09:32:21.057

**在 Oracle 11g 中添加一个没有默认值**的 varchar2(4000) 列一个 61K 行表时，我也遇到了这个问题。30分钟后，柱子仍未加入。

我试图中止操作，然后重试，但仍然没有完成。

什么有效：
我尝试添加一个数字列，这花了一瞬间。丢掉了。
然后我尝试添加一个 varchar2(1) 列，这需要一瞬间。丢掉了。
然后我尝试再次添加一个 varchar2(4000) 列，它只花了一瞬间。

愚蠢的“解决方法”，但也许这也适用于其他面临这个问题的人。

# php - 快速高效的 PHP 会话

> ID：10561280
> 
> 赞同：8
> 
> 时间：2012-05-12T05:18:49.170
> 
> 标签：php, performance, session

我目前在我的网站上的每个页面都有以下代码。请任何人确认这是否是开始和继续 PHP 会话的好习惯？

```
//************************************************************
//Session Settings
//************************************************************

$session_name = 'PHPSESSID'; 
$session_exp_time = 10000; 

$previous_name = session_name($session_name);

//Set garbage collection parameters
ini_set('session.gc_maxlifetime',   $session_exp_time);
ini_set('session.gc_probability', '1');
ini_set('session.gc_divisor', '100');

ini_set('session.name', $session_name);
ini_set('session.cookie_domain', ''); //Session set to not be available to subdomains
ini_set('session.cookie_lifetime', 0);

//Set the session cookie parameters
session_set_cookie_params($session_exp_time, '/', '');

//Start or continue a session...
@session_start();

if (isset($_COOKIE[$session_name]))
setcookie($session_name, $_COOKIE[$session_name], 2147483647, ''); 
```

请注意，此脚本包含在每个页面中。

另一个相关问题：

我应该设置自定义会话保存路径还是应该只使用服务器的默认会话保存路径？优缺点都有什么？据我了解，如果您没有设置自定义会话保存路径，那么您可能会在共享主机上遇到某种冲突？请帮忙指教。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T06:22:38.390

您的许多语句涉及会话配置设置；这些通常可以在服务器`php.ini`或顶级`.htaccess`（Apache）中移动。

```
session.name = PHPSESSID
session.gc_maxlifetime = 10000

session.gc_probability = 1
session.gc_divisor = 1000

session.cookie_domain =
session.cookie_path = /
session.cookie_httponly = 1
session.cookie_lifetime = 0 
```

你不应该让会话持续很长时间（到 2038 年到期）；会话通常使用会话 cookie 来延续（从技术上讲，它会持续到浏览器关闭）。如果您想实现“记住我”功能，我建议您将其添加到会话之上，如下所述：http: [//jaspan.com/improved_persistent_login_cookie_best_practice](http://jaspan.com/improved_persistent_login_cookie_best_practice)

我发现区分开始新会话和恢复现有会话很重要，尤其是在会话仅作为登录过程的一部分创建的情况下。当会话无法恢复时，出现了问题，用户应该被重定向回登录页面（或主页）。

PHP 不理解这种差异，`session_start`如果会话不存在，会自动创建会话，更糟糕的是，如果给出任意会话 ID；后者允许会话采用攻击，如下所述：http: [//gihyo.jp/dev/serial/01/php-security/0025](http://gihyo.jp/dev/serial/01/php-security/0025) - 它是日语，您必须使用浏览器进行翻译。

要确定会话是否可以恢复，您需要通过添加特殊键（例如`$_SESSION['_id'] = session_id()`）来启动每个新会话。如果找到该密钥，则会话已经存在，您可以恢复它；如果不是，则会话不存在或有人试图为您提供错误的 ID。

要开始一个新的会话，你首先看它是否可以恢复；如果没有，您可以使用`session_regenerate_id(true)`更改会话 ID（这使得攻击者更难劫持会话）。

最后，共享服务器上的会话保存路径可以写在您自己的主文件夹下，但这仅在您的共享主机与每个虚拟主机（即）的专用用户一起运行时才有意义`suexec`。否则，为了保护您的会话免受窥探攻击，您将不得不对会话数据（可能还有密钥）进行编码。查看`mcrypt`扩展：[http](http://sg.php.net/mcrypt) ://sg.php.net/mcrypt - 您应该能够在线找到示例。

我希望这或多或少能回答你的问题。如果您认为有什么不对劲，请告诉我。

# delphi - VB 6.0 -> Delphi XE2 转换

> ID：10561285
> 
> 赞同：0
> 
> 时间：2012-05-12T05:19:57.053
> 
> 标签：delphi, unicode, utf-8, vb6, utf-16

```
Public Function UTF8FromUTF16(ByRef abytUTF16() As Byte) As Byte() 

    Dim lngByteNum As Long 
    Dim abytUTF8() As Byte 
    Dim lngCharCount As Long 

    On Error GoTo ConversionErr 

    lngCharCount = (UBound(abytUTF16) + 1) \ 2 
    lngByteNum = WideCharToMultiByteArray(CP_UTF8, 0, abytUTF16(0), _
        lngCharCount, 0, 0, 0, 0) 

    If lngByteNum > 0 Then  
        ReDim abytUTF8(lngByteNum - 1) 
        lngByteNum = WideCharToMultiByteArray(CP_UTF8, 0, abytUTF16(0), _
            lngCharCount, abytUTF8(0), lngByteNum, 0, 0) 
        UTF8FromUTF16 = abytUTF8 
    End If 

    Exit Function 

ConversionErr:
    MsgBox " Conversion failed " 

End Function 
```

* * *

```
var 
    abytUTF8 : array of Byte; // Global

function UTF8FromUTF16(sUTF16 : WideString) : pAnsiChar; 
var 
    lngByteNum : integer; 
    lngCharCount : integer; 
begin 
    // On Error GoTo ConversionErr 
    result := nil; 

    lngCharCount := Length(sUTF16); 
    lngByteNum := WideCharToMultiByte(CP_UTF8, 0, @sUTF16[1],
        lngCharCount, nil, 0, nil, nil); 

    If lngByteNum > 0 Then 
    begin 
        SetLength(abytUTF8, lngByteNum+1); 
        abytUTF8[lngByteNum] := 0; 
        lngByteNum := WideCharToMultiByte(CP_UTF8, 0, @sUTF16[1],
            lngCharCount, @abytUTF8[0], lngByteNum, nil, nil); 
        result := pAnsiChar(@abytUTF8[0]); 
    End; 
End; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T07:09:51.707

您的代码未设置结果字符串的编码。Delphi（自 Delphi 2009 起）需要 ANSI 字符串的编码信息，否则使用默认系统区域设置。您的代码的工作版本是：

```
function UTF8FromUTF16(sUTF16: UnicodeString): UTF8String;
var
  lngByteNum : integer;
  lngCharCount : integer;
begin
  Result := '';

  lngCharCount := Length(sUTF16);
  if lngCharCount = 0 then Exit;

  lngByteNum := WideCharToMultiByte(CP_UTF8, 0, @sUTF16[1], lngCharCount, nil, 0, nil, nil);
  if lngByteNum > 0 then begin
    SetLength(Result, lngByteNum);
    WideCharToMultiByte(CP_UTF8, 0, @sUTF16[1], lngCharCount, @Result[1], lngByteNum, nil, nil);
  end;
end; 
```

但您不需要全部 - Delphi 为您执行字符串转换：

```
function UTF8FromUTF16_2(sUTF16: UnicodeString): UTF8String;
begin
  Result := sUTF16;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T03:44:55.527

直译如下：

```
function UTF8FromUTF16(const abytUTF16: TBytes): TBytes;
var
  lngByteNum: LongInt;
  abytUTF8: TBytes;
  lngCharCount: LongInt;
begin
  Result := nil;
  lngCharCount := Length(abytUTF16) div 2;
  lngByteNum := WideCharToMultiByte(CP_UTF8, 0, PWideChar(abytUTF16), lngCharCount, nil, 0, nil, nil); 
  if lngByteNum > 0 then
  begin
    SetLength(abytUTF8, lngByteNum);
    lngByteNum := WideCharToMultiByte(CP_UTF8, 0, PWideChar(abytUTF16), lngCharCount, PAnsiChar(abytUTF8), lngByteNum, nil, nil);
    Result := abytUTF8;
    Exit;
  end;
  if GetLastError <> 0 then
    MessageBox(0, ' Conversion failed ', '', MB_OK);
end; 
```

在 Delphi 2009+ 中，有一个更简单的方法：

```
function UTF8FromUTF16(const abytUTF16: TBytes): TBytes;
begin
  Result := TEncoding.Convert(TEncoding.Unicode, TEncoding.UTF8, abytUTF16);
end; 
```

更简单的是，如果您使用字符串而不是字节，那么您可以简单地将 a`WideString`或 a `UnicodeString`（两者都是 UTF-16 编码）分配给 a`UTF8String`并让 RTL 为您处理转换。

# c++ - 那里有任何 C++“代码生成器”吗？

> ID：10561286
> 
> 赞同：2
> 
> 时间：2012-05-12T05:20:05.743
> 
> 标签：c++

我一直在阅读有关 Meta II 的文章，这让我想知道是否有 C++“代码生成器”。我寻找了一个 C++ Metacompiler，但这并不是我所指的。我指的是类似于宏在Assembly 中的工作方式。

为了澄清，我不是在谈论模板或定义。我也不是在谈论使用 IDE 为我生成代码。这不是一个理论问题，它对我非常有用。我正在从事需要访问代码的项目，并且我需要它是“我的”。使用 STL 中的函数会使事情变得更糟。当算法首次实施时，它还将在琐碎的任务上节省大量时间。

我说的是一个包含模板化代码片段数据库的工具，可以使用宏或可视 GUI 插入该数据库。这样，在基本框架建立之后，就可以对代码进行进一步的操作。

示例：我有一个对象队列。我想在该队列中找到某种类型的对象。会有一个可以插入的代码片段，它将自动生成一个函数（成员、静态、朋友......），它将遍历我的队列并寻找某些条件。与 IDE 不同，我不会提供参数或返回类型等详细信息。只会生成非常基本的内容。在这种情况下，可能是对成员的引用。它会给我一个原型和一个基本的函数定义。进一步的定制将需要手动完成。

在 C++ 中实现算法时，您必须将其转换为一些技术细节，甚至在您完成任何事情之前。而在软件工程中，这些技术性发挥了重要作用，而在简单的算法开发中它们却没有（KIS）。

## 更多细节：

添加示例。对不起，如果我没有说清楚。我不知道对我试图描述的某些功能使用什么术语（英语不是我的第一语言）。我应该包括一个例子。

这是主要思想：我有一个算法和它的伪代码。我正在寻找的工具将减少首次实现该伪代码的时间。只需几行代码或一个 GUI，C++ 编码的许多琐碎部分都将自动完成（如缩进、创建用于遍历的 for 循环、声明迭代器和临时变量等）。设计考虑将以标准方式完成（例如：返回指针或引用，使用迭代器或索引等......）。库将自动包含在内。生成的类、函数原型和函数定义将以标准方式分布在您的代码中。我并没有特别限制我的描述，但这是我在这种工具中寻找的东西。

这是一个简单的例子：

## 生成公式：

我想出了某种语言/宏作为例子。但任何类似的事情都会做。图例：# - 表示它是一个变量

```
class Time(int #day, string #name) //Create `class` Time with `int` day and string name
  getter getName #name //Create a member function to get name

main//Main
  vector Time #vec //Create vector of Time vec 
  input int #var1 //Input `int`
  find #var1 #day #vec //Find a member with day equal to var1 in vec
  printVector #vec  //Call print function for vector

function printVector(vector #par1) //Create void function printVector() to output names of Time instances
   output #par1 //Print member variables from vector 
```

## 生成的代码：

自动变量、临时变量、迭代器或任何其他设计考虑因素的决策已经预定义。上面的代码至少需要一些思考才能提出“语言”，而我已经多次编写了下面的代码，以至于我什至没有“思考”。尽管如此，编写下面的代码还是花了很多很多的时间（而且它更容易包含难以发现的简单错误）。

```
#include <string>
#include <iostream>
#include <vector>
using namespace std;

//Create `class` Time with `int` day and string name
class Time
{
  int day;
  string name;

public:
  Time() {};
  Time(int par1, string par2) {day = par1; name = par2;}
  string getName() const {return name;} //Create a member function to get name
};

template<typename T> void printVector(vector<T>);

//Main
int main()
{
  vector<Time> vec; //Create vector of Time vec 
  int var1; cin>>var1; cin.ignore(); //Input `int` var1 (Default using iostream)

  //Find a member with day equal to var1 in vec (First found by default)
  vector<Time>::iterator it1; bool found = false;
  for(it1 = vec.begin(); (it1 != vec.end() && !found); found = (it1->day == var1), it1++);

  printVector(vec); //Call printVector

  return 0;
}

//Create void function printVector() to output name from vector
template<typename T>
void printVector(vector<T> par1)
{

  //Print member variables of instances from vector 
  vector<Time>::iterator it1;
  for(it1 = par1.begin(); it1 != par1.end(); it1++)
    cout<<it1->day<<" "<<it1->name; //Would cause an error since can't access, but generator doesn't know it!
} 
```

希望我能更好地澄清我正在寻找的工具类型。我真的不明白为什么有些人对我想要的东西如此沮丧。我完全不同意它没有用。而且只要使用的语法保持在基本水平，我不明白为什么会有那么多兼容性问题。我正在考虑自己用 GUI 来做这件事。但由于它是一个如此简单的概念（没有什么比元编译器更接近），我相信已经有类似的东西了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T07:07:12.243

您不太可能找到与您要求的完全一样的东西 - 代码重复（这是您提出的就地扩展模板方法将创建的）通常被认为是一件坏事，既因为它降低了代码的可理解性，又因为它提高了复制错误代码的可能性。通常建议使用 C++ 内置（非扩展）模板（和 STL） - 如果您遇到此类问题，您应该更清楚您的问题是什么，以便我们也可以提供帮助。

但是，如果您绝对必须有快捷方式模板，Eclipse 支持这样的东西。查看[有关 Eclipse 代码模板的本教程。](http://www.ibm.com/developerworks/opensource/tutorials/os-eclipse-code-templates/index.html)请注意，这些模板是纯字符串替换，并且有一定的限制。我*强烈*建议不要在这样的模板中包含任何类型的复杂逻辑。

# vb.net - 重载属性的 set 方法

> ID：10561288
> 
> 赞同：2
> 
> 时间：2012-05-12T05:20:12.967
> 
> 标签：vb.net

好的，也许这不是一种方法。这就是我想做的事情：

```
Private _Columns As ArrayList
Public Property Columns() As ArrayList
    Get
       Return _Columns
    End Get
    Set(Cols As ArrayList)
       _Columns = Cols
    End Set
    Set(Cols As MyOwnList)
       _Columns = New ArrayList
       For Each o As MyObj in Cols
          _Columns.Add(o.Column)
       Next
    End Set
End Property 
```

这将允许我通过为其分配各种集合类型来方便地设置属性...除了，我不能这样做，因为显然*Set*方法必须采用属性本身类型的参数...我收到投诉：

> “Set”参数必须与包含属性具有相同的类型

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T05:33:43.440

不，您不能在自动属性中更改 Setter 预期的参数类型。

但是，您可以从示例中为 MyOwnList 提供自己的隐式转换函数，然后当您将其传递给 setter 时，它会自动转换为 ArrayList。

```
Class MyOwnList
    ' your class code here....
    ' 
    Public Shared Widening Operator CType(ByVal p1 As MyOwnList) As ArrayList
        Dim columns As New ArrayList   
       For Each o As MyObj in p1
          columns.Add(o.Column)   
       Next 
     return columns  
    End Operator 
End Class 
```

然后在您程序的其他地方，此代码将起作用：

```
Dim myList as new MyOwnList
SomeClass.Columns = myList 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T08:32:37.297

它并没有真正超载，但以下可以提供（临时）解决方法：

```
Private Cols As ArrayList
Public Property Columns() As ArrayList
    Get
        Return _Columns
    End Get
    Set(Cols As ArrayList)
        _Columns = Cols
    End Set
End Property

Public WriteOnly Property SpecializedColumns() As MyOwnList
    Set(value As MyOwnList)
        Dim list As New ArrayList
        For Each o As MyObj In value
            list.Add(o.Column)
        Next
        Columns = list
    End Set
End Property 
```

我认为这是尽可能接近真正的重载属性...

**编辑**

我相信做你想要实现的正确方法是在你的类上定义一个`ToArrayList()`方法。`MyOwnList`

```
Public Function ToArrayList()
    Dim list As New ArrayList

    For Each o As MyObj In Me.Items
        list.Add(o.Column)
    Next

    Return list
End Function 
```

并像这样设置您的属性：

```
 Columns = theMyOwnListObject.ToArrayList 
```

如果您无权访问该类的源代码，您仍然可以通过扩展方法来实现这一点。

# eclipse - 找不到类运行时错误——Eclipse SDK 版本 3.7.2

> ID：10561293
> 
> 赞同：2
> 
> 时间：2012-05-12T05:22:23.060
> 
> 标签：eclipse, build, jar, path, runtime

我的代码编译但在运行时崩溃。

LogCat 文件显示：“找不到类 'com.danielle.algorithm.MergeSort'...”

我的设置是 MergeSort.jar 通过主项目属性添加到引用库的位置 --> Java 构建路径 --> 库 --> 添加外部 JAR。

在运行前，按 ctrl+SHIFT+o 会找到正确的导入包。此外，还会出现一个 Referenced Libraries 目录，因此我很确定 Eclipse 处理了附加的 .jar 文件。但是由于某种原因，在运行时，无法找到 .jar 文件中的类。

我也尝试过添加外部类文件夹，但没有成功。

是否有一些我不知道的 Eclipse 设置？

谢谢，丹妮

# sql - 使用 XML 数据类型读取存储在 SQL Server 2008 R2 中的 XML 文档

> ID：10561296
> 
> 赞同：2
> 
> 时间：2012-05-12T05:22:42.790
> 
> 标签：sql, sql-server, xml, sql-server-2008, tsql

我正在使用 SQL Server 2008 R2 和 ASP.NET 3.5。我在 SQL 端以 XML 形式存储数据表 (.NET)。列的数据类型为 XML。

这是将 XML 存储在 SQL Server 表列中的示例。

```
<container>
<NewDataSet>

<Containers>
  <BARCODE>680812</BARCODE>
  <CATEGORYID>114</CATEGORYID>
  <NAME>KS000147</NAME>
  <GWT>4.640</GWT>
  <NWT>4.640</NWT>
  <LAM>30.00</LAM>
  <QTY>2</QTY>
  <QUANTITY>1</QUANTITY>
  <REMARKS>HM</REMARKS>
</Containers>
<Containers>
  <BARCODE>680813</BARCODE>
  <CATEGORYID>114</CATEGORYID>
  <NAME>KS000147</NAME>
  <GWT>4.680</GWT>
  <NWT>4.680</NWT>
  <LAM>30.00</LAM>
  <QTY>2</QTY>
  <QUANTITY>1</QUANTITY>
  <REMARKS>HM</REMARKS>
</Containers>
<Containers>
  <BARCODE>680814</BARCODE>
  <CATEGORYID>114</CATEGORYID>
  <NAME>KS000147</NAME>
  <GWT>4.490</GWT>
  <NWT>4.490</NWT>
  <LAM>30.00</LAM>
  <QTY>2</QTY>
  <QUANTITY>1</QUANTITY>
  <REMARKS>HM</REMARKS>
</Containers>
</NewDataSet>
</container> 
```

现在我想以表格形式获取这个 XML。如何在 SQL 中编写查询以获取以下表格格式的 XML？IE

```
BARCODE | CATEGORYID |NAME     |GWT   |NWT   |LAM   |QTY |QUANTITY |REMARKS 
680814  |    114     |KS000147 |4.490 |4.490 |30.00 | 2  |   1     |HM 
```

如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T07:50:05.540

你可以尝试这样的事情：

```
SELECT
    Barcode = Container.value('(BARCODE)[1]', 'int'),
    CategoryID = Container.value('(CATEGORYID)[1]', 'int'),
    Name = Container.value('(NAME)[1]', 'varchar(50)'),
    GWT = Container.value('(GWT)[1]', 'decimal(10, 3)'),
    NWT = Container.value('(NWT)[1]', 'decimal(10, 3)'),
    LAM = Container.value('(LAM)[1]', 'decimal(10, 3)'),
    QTY = Container.value('(QTY)[1]', 'int'),
    Quantity = Container.value('(QUANTITY)[1]', 'int'),
    Remarks = Container.value('(REMARKS)[1]', 'varchar(50)')
FROM
    dbo.YourTableHere
CROSS APPLY 
    XmlColumnHere.nodes('/container/NewDataSet/Containers') AS T(Container)
WHERE
    ID = 1 
```

这将产生类似这样的输出（对于您给定的示例数据）：

![在此处输入图像描述](../Images/ad5b3d513de25d55be1a3d18c4ed9f37.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-05T20:13:15.047

此示例中的 XML 文档包含 <customer>、<order> 和 <orderdetail> 元素。

```
DECLARE @DocHandle int
Declare @XML NVARCHAR(MAX)
SET @XML = '<ROOT>
<Customer CustomerID="1" ContactName="vibhav bhavsar>
<Order OrderID="101" CustomerID="1" OrderDate="2014-01-01">
<OrderDetail ProductID="16" Quantity="11" Amount="200$">
One of the best customer
</OrderDetail>
<OrderDetail ProductID="57" Quantity="6" Amount="150$"/>
</Order>
</Customer>
<Customer CustomerID="2" ContactName="jay bhavsar">
<Order OrderID="102" CustomerID="2" OrderDate="2014-02-01">
<OrderDetail ProductID="12" Quantity="9" Amount="180$">
Customer was very satisfied
</OrderDetail>
<OrderDetail ProductID="7" Quantity="2" Amount="50$"/>
</Order>
</Customer> </ROOT>'

--Need to create an internal representation of the XML document.
EXEC sp_xml_preparedocument @DocHandle OUTPUT, @XML

--Execute a SELECT statement using OPENXML.
SELECT * 
FROM OPENXML (@DocHandle, '/ROOT/Customer/Order/OrderDetail')
WITH (OrderID int '../@OrderID',
CustomerID  varchar(10) '../../@CustomerID',
ContactName varchar(100) '../../@ContactName',
OrderDate   datetime '../@OrderDate',
ProductID  int '@ProductID',
Qty int '@Quantity',
Amount varchar(10) '@Amount',
Comment varchar(50) 'text()') 
```

SELECT 语句用于检索 OPENXML 提供的行集中的所有列。

查看更多[点击这里](http://aspdotnetsolu.blogspot.in/2014/03/openxml-function-read-xml-file-in-sql.html)

# c# - LINQ 在运行时选择要查询的表

> ID：10561297
> 
> 赞同：2
> 
> 时间：2012-05-12T05:22:58.413
> 
> 标签：c#, .net, sql, database, linq

我是 LINQ 的新手，正在尝试编写一个查询，该查询根据运行时输入的变量选择要查询的表。基本思想是我为 Persons 表中的每个人都有一个 Contacts 表。我可以从实体中获取我想要的所有数据，但是在查询时找不到另一个表。这是代码；

```
 public void GetFriendsList(string username, Person[] people)
    {     
        string table = "FL." + username;

        DataTable friends = new DataTable(table);

            var filePaths =
            from row in friends.AsEnumerable()
            select row.Field<string>("Friend's Name");

        var friendsArray = filePaths.ToArray();

        for (int i = 0; i < people.Length; i++)
        {
            people[i] = GetPerson(friendsArray[i]);
        }     
    } 
```

我也尝试过在顶部使用类似以下的内容来执行此操作，但 VS 无法识别 FillDataSet 函数。

```
DataSet ds = new DataSet();
ds.Locale = CultureInfo.InvariantCulture;
FillDataSet(ds);

DataTable products = ds.Tables[table]; 
```

任何建议表示赞赏，抱歉含糊不清。我假设我缺少连接字符串或其他东西。我已经完成了这个并且代码显然没有连接到表格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T05:56:45.867

如果有点粗鲁，评论中的欣快是正确的。你不可能为每个人都有一个单独的联系人表。正常的方法是有一个单独的*联系人*表并将外键链接回*Persons*表。这样，您可以在单个查询中完成所有操作，而不必担心查询直到运行时才知道的表。

至于您列出的代码为什么不起作用，您的怀疑基本上是正确的：它没有连接到任何数据库。您正在创建一个新的空表并尝试对其进行查询。要使其正常工作，您需要使用**SqlConnection**连接到数据库，然后使用**SqlDataAdapter**及其**Fill**方法来填充您的**DataTable**。（但同样，如果可能，请不要这样做，请阅读 SQL 外键。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T05:55:08.560

首先，您并没有真正使用 LINQ 来查询您的数据库。

但最重要的是，您的数据库中应该只有一个与表`Contacts`有关系的`Persons`表。

获取 Microsoft 示例 Northwind 数据库 (http://www.microsoft.com/en-us/download/details.aspx?id=23654) 并了解有关数据库架构设计的更多信息。

# jqgrid - 谷歌浏览器中的jqGrid水平滚动条问题

> ID：10561299
> 
> 赞同：3
> 
> 时间：2012-05-12T05:23:49.847
> 
> 标签：jqgrid

> **可能重复：**
> [jqGrid 在 Chrome/Chrome 框架中无法正确呈现](https://stackoverflow.com/questions/10588587/jqgrid-does-not-render-correctly-in-chrome-chrome-frame)

我安装了最新的 Google Chrome 19。我在 Google Chrome 上看到的所有 jqGrid[演示都有一个水平滚动条。](http://www.trirand.com/blog/jqgrid/jqgrid.html)在 Mozilla Firefox 中它运行良好。

知道可能是什么问题。任何修复相同的指针。

# php - php mysql查询表的最后设置的行数

> ID：10561300
> 
> 赞同：0
> 
> 时间：2012-05-12T05:24:05.017
> 
> 标签：php, mysql, sql

我想构建一个`mysql_query`只给我一个新`rows` 插入的`table`带有一个`where condition`类似的......

```
SELECT (LAST 5) FROM `x`  WHERE `USER_KEY` = '$RK' ORDER BY `dd` DESC 
```

之后这些数据将在 json 中解析，否则我只会得到所有数据并循环抛出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T05:26:42.367

您可以颠倒顺序并获得前 5 个。这与获得最后 5 个并反过来排序相同

```
SELECT * FROM `x`  WHERE `USER_KEY` = '$RK' ORDER BY `dd` ASC limit 5 
```

或者，如果您需要 desc 命令，您可以执行

```
select * from (SELECT * FROM `x`  
               WHERE `USER_KEY` = '$RK' 
               ORDER BY `dd` asc 
               limit 5) as x 
order by `dd` desc 
```

# ruby - 匹配包含某些字母的单词的正则表达式

> ID：10561302
> 
> 赞同：0
> 
> 时间：2012-05-12T05:24:38.060
> 
> 标签：ruby, regex

我想编写一些代码，从文本文件中提取单词列表，然后为其提供一堆字母，然后匹配包含所有这些字母的单词。因此，如果我输入字母“lheol”，它将匹配“hello”。

我正在考虑的正则表达式是这样的：

```
string =~ /(?=.*l{2})(?=.*h{1})(?=.*o{1})(?=.*e{1}).*/i 
```

但是，当我只想让它匹配单词“hello”时，它会匹配说“Hellod”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T05:37:04.260

用正则表达式解决这个问题并不合适，因为一个单词中可能有大量的字母组合。考虑改为对搜索词和每个目标的字母进行排序并检查字符串是否相等。

```
class String
  def sort
    self.chars.sort.join.downcase
  end
end
'hello'.sort # => 'ehllo'
'leloh'.sort # => 'ehllo'
'Hellod'.sort # => 'dehllo' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T05:58:19.077

A regular expression isn't really needed. If you just want to find out if a word contains at least one instance of each letter, you can check for character inclusion.

```
def word_match(word, letters)
  letters.split(//).uniq.each { |char| return false unless word.include? char }
  true
end 
```

The nice thing about doing it this way is that you fail fast anytime a letter isn't found.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T07:24:50.567

只是为了向您展示如何使用正则*表达式*来完成（这也意味着如果需要，尝试所有可能的组合的负担在于正则表达式引擎）：

```
if subject =~ /^(?:h()|e()|l()|l()|o()){5}\1\2\3\4\5$/
    # Successful match
else
    # Match attempt failed
end 
```

诀窍是每个字母后跟一个`()`始终匹配的空捕获组。然后，在正则表达式的末尾，反向引用`\1\2\3\4\5`确保每个字母都恰好参与了一次匹配（因为之前的交替只允许重复 5 次，并且检查了所有五个捕获组。

# php - PHP：如何调用类层次结构中的所有同名方法？

> ID：10561306
> 
> 赞同：2
> 
> 时间：2012-05-12T05:26:28.890
> 
> 标签：php, inheritance

我有一个类层次结构，如下所示：

```
class Alpha {
    public function initialize() {
        $class = get_class($this);
        $family = array( $class );
        while( ($class = get_parent_class($class)) !== false ) {
            $family[] = $class;
        }
        $family = array_reverse($family);
        foreach($family as $className) {
            // call $className's start (instance) method
        }
    }

    public function start() {
        echo "calling start from Alpha\n";
    }
}

class Beta extends Alpha {
    public function start() {
        echo "calling start from Beta\n";
    }
}

class Charlie extends Beta {
    public function start() {
        echo "calling start from Charlie\n";
    }
}

$c = new Charlie();
$c->initialize(); 
```

Alpha 的 initialize 方法应该调用派生类的 start 方法以及所有派生类的祖先类的 start 方法，一直到 Alpha 的 start 方法。该代码应产生以下输出：

```
calling start from Alpha
calling start from Beta
calling start from Charlie 
```

但是，我似乎无法弄清楚如何调用 $className 变量指定的特定祖先类的实例方法。

我使用过`call_user_func(array($className, 'start'))`，但这会导致 start 方法被视为静态函数。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T05:38:15.387

```
class Alpha {
    public function initialize() {
        // ... call all 'start' methods in class hierarchy starting with highest level     class (Alpha's start method) and ending with lowest derived class
    }

    public function start() {
        echo "calling start from Alpha\n";
    }
}

class Beta extends Alpha {
    public function start() {
        echo "calling start from Beta\n";
        parent::start();
    }
}

class Charlie extends Beta {
    public function start() {
        echo "calling start from Charlie\n";
        parent::start();
    }

    public function initialize() {
        $this->start();
    }
}

$c = new Charlie();
$c->initialize(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T07:27:15.037

在类函数调用中，如 Classname::start 应该调用 Classname 的函数 start 而不是静态调用

```
class Alpha {

    public $myvar = 0;

    public function initialize() {

        $class = get_class($this);
        $family = array( $class );
        while( ($class = get_parent_class($class)) !== false ) {
            $family[] = $class;
            $this->myvar ++;
        }
        $family = array_reverse($family);
        foreach($family as $className) {
            // call $className's start method
            eval("{$className}::start();");
        }
    }

    public function start() {
        echo "{$this->myvar} calling start from Alpha\n";
    }
}

class Beta extends Alpha {
    public function start() {
        echo "{$this->myvar} calling start from Beta\n";
    }
}

class Charlie extends Beta {
    public function start() {
        echo "{$this->myvar} calling start from Charlie\n";
    }
}

$c = new Charlie();
$c->initialize(); 
```

# android - android中的KSOAP请求

> ID：10561307
> 
> 赞同：1
> 
> 时间：2012-05-12T05:26:40.603
> 
> 标签：android, ksoap2

我的 SOAP 请求格式如下：

```
 <authentication>
        <LoginID>string</LoginID>
        <Password>string</Password>
      </authentication>
      <Id>int</Id>
      <Str>string</Str> 
```

我必须将 Loginid,pass,id,str 作为输入传递。所以我通过 addproperty 设置它，如下所示：

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

                PropertyInfo usrid =new PropertyInfo();
            usrid.setName("LoginID");
            usrid.setValue(userid);
            usrid.setType(String.class);
            request.addProperty(usrid);        

//          
            PropertyInfo pass =new PropertyInfo();
            pass.setName("Password");
            pass.setValue(password);
            pass.setType(String.class);
            request.addProperty(pass);

                PropertyInfo rote =new PropertyInfo();
            rote.setName("Id");
            rote.setValue(4114616);
            rote.setType(int.class);
            request.addProperty(rote);
//          
            PropertyInfo dte =new PropertyInfo();
            dte.setName("Str");
            dte.setValue(date);
            dte.setType(String.class);
            request.addProperty(dte); 
```

这是我设置的正确方式吗？因为我收到错误：

```
 SoapFault - faultcode: 'soap:Server'
  faultstring: 'System.Web.Services.Protocols.SoapException: Server was unable to
  process request. ---> System.ArgumentNullException: String reference not set to an
  instance of a String. 
```

任何人都可以请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:10:55.290

试试这个片段来创建你的肥皂请求：

```
String YOUR_LOGIN_ID = "Your login id";
String YOUR_PASSWORD = "Your password";
int YOUR_ID = 1;
String YOUR_STR = "Your str value";

SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

SoapObject authentication = new SoapObject(NAMESPACE, "authentication");
authentication.addProperty("LoginID", YOUR_LOGIN_ID);
authentication.addProperty("Password", YOUR_PASSWORD);

request.addProperty("authentication", authentication);
request.addProperty("Id", YOUR_ID);
request.addProperty("Str", YOUR_STR); 
```

# ios - 在游戏中心身份验证期间底层视图消失

> ID：10561309
> 
> 赞同：1
> 
> 时间：2012-05-12T05:26:43.100
> 
> 标签：ios, uiviewcontroller, game-center

我有一个刚刚开始实现游戏中心支持的 iOS 应用程序。我在主（根）视图控制器的 loadView 期间调用 authenticateWithCompletionHandler 方法。我的主视图显示，不久后“登录游戏中心”对话框完全按预期出现。如果选择“创建新帐户”，游戏中心的“新帐户”弹出对话框会显示在屏幕中间（这是在 iPad 上）——但我的底层主菜单消失了。弹出对话框下方只是一个黑屏。如果我在完成处理程序中关闭对话框，它会按预期消失，并且我的主菜单会返回。

我认为这一定是某种视图层次结构问题，因此为了简化问题，我创建了一个新项目。使用 Xcode 4.3.2，我通过添加单个视图控制器类“AppViewController”修改了一个新的“空应用程序”iOS 项目。我更改了系统创建的 AppDelegate.m 文件 applicationDidFinishLaunchingWithOptions 方法来设置 rootViewController（在窗口背景颜色设置为白色之后）：

```
self.window.rootViewController =
    [[[AppViewController alloc] initWithNibName:nil bundle:nil] autorelease]; 
```

...我将 AppViewController 的 loadView 方法设置为加载带有彩色背景的视图（这样我就可以判断它是否在其上正确合成），然后调用 gamekit 身份验证方法：

```
- (void) loadView {
    self.view = [[[UIView alloc] initWithFrame:[UIScreen mainScreen].applicationFrame] autorelease];
    self.view.backgroundColor = [UIColor yellowColor];
    GKLocalPlayer * localPlayer = [GKLocalPlayer localPlayer];
    [localPlayer authenticateWithCompletionHandler:nil];
} 
```

这个简单的结构完全模仿了我设置视图层次结构的方式——将单个 UIViewController 设置为加载和管理视图层次结构的窗口 rootViewController。没有 XIB 文件。

无论如何，我使用这个非常简单的测试应用程序得到了完全相同的行为。当“新帐户”弹出对话框出现时，我的底层视图（在本例中为黄色填充）消失（并显示底层窗口白色填充）。我认为这与我对 iOS 希望我如何管理这些控制器和视图的误解有关。

但是，特别奇怪（至少对我而言）是，如果我要么取消“新帐户”窗口，要么使用现有帐户登录，然后立即调出成就弹出对话框（使用 presentModalViewController），这是可行的！我可以在成就对话框后面看到我的主菜单视图。添加一个简单的按钮到视图和按钮按下处理程序到视图控制器显示了同样的事情——成就对话框很好地显示了背景视图，但是“新帐户”对话框掩盖了底层视图。显然，我希望“新帐户”对话框看起来像浮动在我的基础视图之上。我应该提到我正在测试 iOS 5.1。

感谢您能给我的任何帮助！

**更新：**在听取了另一篇 stackoverflow 帖子的建议后，我购买了 Jeff LaMarche、David Mark 和 Jack Nutting 的“开始 iOS 5 开发”，并查看了有关从 Xcode“空应用程序”模板开始的部分。这导致我稍微修改了我的测试代码。 我现在不是直接设置“rootViewController”属性，而是在 applicationDidFinishLaunchingWithOptions 中执行此操作*：*

```
UIViewController * viewController =
    [[[AppViewController alloc] initWithNibName:nil bundle:nil] autorelease];
viewController.view.backgroundColor = [UIColor yellowColor];
[self.window addSubview:viewController.view]; 
```

我还摆脱了视图控制器上的上述 loadView 方法。这行得通！有谁知道为什么？我认为这两个系统之间没有实质性区别。在第一个中，我想我正在视图控制器上*重新创建*视图（第二个系统中的视图控制器视图上没有 alloc/init）；自动创建的视图有什么特别之处吗？

**更新 x2**：好的，看起来真正的区别在于：

```
[self.window addSubview:viewController.view]; 
```

我认为在窗口上设置 rootViewController 会自动将视图添加到窗口中，但除非我明确地这样做，否则我会得到这种奇怪的行为。所以我找到了解决这个问题的方法，我只是不明白它为什么会起作用。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T06:33:38.383

I'm not sure what is causing your problem, but the authenticateWithCompletionHandler method is usually called as soon as your app starts. Try moving it inside applicationDidFinishLaunchingWithOptions method in your appDelegate and see if it works then.

# ruby - Packetfu Gem 识别错误

> ID：10561317
> 
> 赞同：1
> 
> 时间：2012-05-12T05:28:40.027
> 
> 标签：ruby, gem, packets

我的问题是 ruby​​ 识别需要'packetfu'并在 IRB 中包含 PacketFu，但是当我将它作为脚本运行时不起作用。我想知道这是否是由于我的 gem 目录的组织方式，或者当我以 sudo 签入以运行应用程序时是否发生了一些奇怪的事情。

这是我以普通用户身份运行时产生的错误：

```
 1 tMobile:~ cj3kim$ ruby packetfu.rb
  2 Simple sniffer for PacketFu 1.1.5
  3 /Users/cj3kim/.rvm/gems/ruby-1.9.3-p0/gems/packetfu-1.1.5/lib/packetfu/capture.rb:73:in `capture': Not root, so can't capture packets. Error:  (RuntimeError)
  4     from /Users/cj3kim/.rvm/gems/ruby-1.9.3-p0/gems/packetfu-1.1.5/lib/packetfu/capture.rb:46:in `setup_params'
  5     from /Users/cj3kim/.rvm/gems/ruby-1.9.3-p0/gems/packetfu-1.1.5/lib/packetfu/capture.rb:39:in `initialize'
  6     from packetfu.rb:9:in `new'
  7     from packetfu.rb:9:in `sniff'
  8     from packetfu.rb:20:in `<main>' 
```

不适用于 sudo。为什么？：

```
 9 The-BatMobile:~ cj3kim$ sudo ruby packetfu.rb
 10 /Users/cj3kim/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- packetfu (LoadError)
 11     from /Users/cj3kim/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
 12     from packetfu.rb:1:in `<main>' 
```

简单嗅探器程序的 packetfu 文档中的示例代码：

```
1 require 'packetfu'
  2 include PacketFu
  3 
  4 puts "Simple sniffer for PacketFu #{PacketFu.version}"
  5 
  6 iface = ARGV[0] || "en0"
  7 
  8 def sniff(iface)
  9         cap = Capture.new(:iface => iface, :start => true)
 10         cap.stream.each do |p|
 11                 pkt = Packet.parse p
 12                 if pkt.is_ip?
 13                         next if pkt.ip_saddr == Utils.ifconfig[:ip_saddr]
 14                         packet_info = [pkt.ip_saddr, pkt.ip_daddr, pkt.size, pkt.proto.last]
 15                         puts "%-15s -> %-15s %-4d %s" % packet_info
 16                 end
 17         end
 18 end
 19 
 20 sniff(iface) 
```

任何帮助表示赞赏。感谢您的关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T02:04:19.733

通常，这是因为 sudo 环境找不到您的任何 gem。

如果您使用的是 RVM（并且您应该： rvm.io ），您可以改用`rvmsudo`它，这将保留您的 Ruby 环境。

如果您出于任何原因无法使用 RVM，但您使用的是现代版本的 sudo，则可以尝试`sudo -E`保留该环境。

# linux - bash脚本小写输入文件中的每个字符串并将结果输出到新文件

> ID：10561319
> 
> 赞同：2
> 
> 时间：2012-05-12T05:29:23.783
> 
> 标签：linux, bash

如何小写文本文件中的所有内容，然后将结果输出到 bash 脚本中的新文件？例如输入文件包含

```
一种
公元前
D
乙

```

输出

```
一种
公元前
d
e

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T05:31:49.240

使用`tr`命令：

```
tr '[:upper:]' '[:lower:]' < infile > outfile 
```

# java - 如何使用Java计算文本文件中单词的频率？

> ID：10561324
> 
> 赞同：-2
> 
> 时间：2012-05-12T05:30:41.397
> 
> 标签：java, word-count, text-files

我有一个大文本文件（大小远高于 1G），我想使用 Java 来计算该文件中某个单词的出现次数。文件中的文本写在一行上，因此可能无法逐行检查。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T05:40:47.740

您想使用 Java 的[Scanner](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)类逐字使用该巨大文件。调用 useDelimiter(...) 方法一次来配置单词的拆分方式（可能只是一个空格字符），然后使用 hasNext() 和 getNext() 循环文件内容。

对于计数本身，您可以使用 HashMap 为简单起见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T05:46:35.230

您可以使用[Trie](http://en.wikipedia.org/wiki/Trie)数据结构的细微变化。此 DS 用于创建单词词典。例如你想搜索'Stack'，你可以通过传递'Sta'来搜索trie，它会返回所有以'Sta'开头的单词。

现在在您的问题中，您可以逐字遍历文件并将其放入 trie 中。为每个单词添加额外的字段“计数”。现在，当您插入修改后的尝试时，您可以增加“计数”。现在你已经计算了 trie 中的所有单词。

我认为内存使用量不应过多，因为 1G 文件中的大多数单词都是重复的。您只需遍历文件一次。而且一旦你有了这个 trie，你就可以搜索多个单词而不会降低性能。

编辑：

如果您需要完全匹配，我必须同意@Bananeweizen HashMap 也是一个很好的解决方案。所以逐字阅读并放入HashMap。内存使用量应与 try 相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T05:39:41.210

您首先需要对单词进行排序，以便它们按字母顺序排列。在读入数据并在空格上拆分单词后，您可以通过多种方式执行此操作。您还需要在排序之前删除特殊字符和标点符号。

排序后，您要定位的单词都会并排排列，这将使您的搜索成为 O(N) 问题。此时，您可以使用循环结构来遍历并比较每个单词，直到找到单词的第一个实例。在那一点上，你继续循环，计算每个单词，直到你到达下一个单词。

此时，您知道您的集合中没有该词的更多实例，您可以停止搜索。

这种特定的搜索算法是 O(N) 最坏的情况。如果您的单词是“apple”，那么搜索完成的速度可能比您的单词是“zebra”要快得多。

您可以选择其他算法，具体取决于您的具体需求。

根据您的问题，我假设这是一个编程练习，而不是实际的工作问题。如果是工作问题，那么这个问题已经被解决了无数次，并且有很多 Java 搜索库可以帮助您解决这个问题，包括 Java 标准库中的工具。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-12T05:37:39.363

您可以使用外部工具构建一些文本索引。之后，您将能够在此索引中快速找到计数不同的单词。例如，您可以获得 Lucene 来构建此类索引。然后简单地获取其中的术语频率。有类似的问题[计算 lucene 索引中的词频以及](https://stackoverflow.com/q/4167735/891391)文章和代码示例的链接。

# linux - bashscript 删除文件中的字符串

> ID：10561331
> 
> 赞同：2
> 
> 时间：2012-05-12T05:32:23.813
> 
> 标签：linux, string, bash

我想从输入文件中删除每行出现的每个单词“.xx”。如何才能做到这一点？输入

```
你好.xx
我的.xx

```

输出

```
你好
我的

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T05:35:09.880

使用`sed`：

```
sed -i.old 's/\.xx$//' infile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T14:29:39.393

作为标题，对于一个 shell 脚本来完成它，它是可行的：

测试.sh

```
#/bin/sh
while read line; do
    echo ${line%.xx}
done < input.txt 
```

输入文件

```
$ cat input.txt
hello.xx
my.xx 
```

试驾

```
$ ./test.sh
hello
my 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T05:37:43.980

使用以下模式：

如果从任何地方删除 .xx

```
s/\.xx//g 
```

如果仅在最后删除 .xx

```
s/\.xx$//g 
```

# android - 如何将复制的文本传递给Android中的其他活动

> ID：10561334
> 
> 赞同：1
> 
> 时间：2012-05-12T05:33:18.273
> 
> 标签：android, webview, clipboard, android-activity, android-preferences

我正在开发一个可以在 Android 3+ 上运行的字典应用程序

在**Activity1**中，有一个 EditText 框，用户可以在其中输入他/她想要查找的单词。然后使用 Webview在**Activity2**中显示单词的含义。

我知道在 Android 3+ 中，用户可以长按网页视图上的项目并将其复制到剪贴板。因此，我正在考虑在 Activity2 中添加一个按钮来处理复制到剪贴板的任何文本。澄清一下，我希望当单击此按钮时，将调用 Activity1 并将复制的文本自动粘贴到其 EditText 框中（用于查找）

**我怎么能以编程方式做到这一点？**

如果您能提供示例和/或教程，我将不胜感激。非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T05:41:08.383

使用意图将您的价值从活动 1 传递到活动 2

```
Intent i = new Intent(Activity1.this,Activity2.class);
i.putExtra("MyValue", value);
startActivityForResult(i, ActDocument.DIALOG_DOCUMENTDETAIL); 
```

在活动 2

```
@Override
    public void onCreate(Bundle savedInstanceState) {
    //...
    Intent intent = this.getIntent();
    value = intent.getSerializableExtra("MyValue");
    //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T05:36:14.700

您可以使用共享首选项来存储字符串或其他值。在按钮单击事件的另一个活动中，使用共享首选项获取字符串，然后将其设置为编辑文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T05:40:34.000

在活动 1 中：

```
SharedPreferences appSharedPrefs = PreferenceManager.getDefaultSharedPreferences(this.getApplicationContext());
Editor prefsEditor = appSharedPrefs.edit();
prefsEditor.putString("word1", string1);
//so on for other 'n' number of words you have
prefsEditor.commit(); 
```

在活动 2 中：

```
SharedPreferences appSharedPrefs = PreferenceManager.getDefaultSharedPreferences(this.getApplicationContext());
String meaning1 = appSharedPrefs.getString("word1", "meaning not found");
//so on for other 'n' number of words 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T05:42:30.780

在活动 2 中：单击按钮：

```
Intent it = new Intent(Activity2.this, Activity1.class);
Bundle bundle=new Bundle();
bundle.putString("word", "Android");
it.putExtras(bundle);   
startActivity(it); 
```

在活动 1 中：

```
Bundle bundle=getIntent().getExtras();
if(bundle !=null)
{
String name=bundle.getString("word");
EditText edttxt=(EditText)findViewById(R.id.edtboxtest);
edttxt.setText(name);
} 
```

# javascript - Javascript - 附加到文本区域值 - IE Chrome 和 Firefox

> ID：10561335
> 
> 赞同：3
> 
> 时间：2012-05-12T05:33:38.443
> 
> 标签：javascript

我该如何完成这项工作。我正在尝试将文本附加到文本区域。如果某个值已经存在，则追加。我让它工作，但似乎它不能在所有浏览器中工作。有一个更好的方法吗？

两种方法都试过了，它们在 Chrome、IE 和 FF 中都不起作用 -

```
if ($('#log').value == undefined) {
$('#log').val("First: " + result[0]);
} else {
$('#log').val($('#log').value += "Second: " + result[0]);
}

if ($('#log').value == undefined) {
$('#log').val("First: " + result[0]);
} else {
$('#log').val(log.value += "Second: " + result[0]);
} 
```

没有`If`，这适用于 Chrome，但不适用于 IE 和 FF -

```
$('#log').val(log.value += "First: + result[0]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T05:49:50.250

jQuery 对象没有`.value`属性，所以`$('#log').value`总是`undefined`. 这意味着您的语句将始终调用`$('#log').val("First: " + result[0]);`并且永远不会调用第二个语句。

你需要检查一下`if($('#log').val() == '')`。

至于[`.val()`](http://api.jquery.com/val/)，你可以传递一个函数。此函数将传递输入的当前值。

```
if ($('#log').val() == '') {
    $('#log').val("First: " + result[0]);
} else {
    $('#log').val(function(i, v){ // v is the current value
        return v + "Second: " + result[0];  // what's returned is what the value will be set to
    });
} 
```

# windows - 带有 Mongoid 的 Rails：身份验证失败时生成错误

> ID：10561342
> 
> 赞同：0
> 
> 时间：2012-05-12T05:34:35.560
> 
> 标签：windows, ruby-on-rails-3, mongoid

我是 Rails 和 Mongoid 的新手。我正在尝试创建一个登录页面。问题是如果出现用户名或密码错误，我无法发出错误消息。下面是我的代码。

模型用户.rb

```
def self.authenticate(login, pass)

 if user = first(:conditions => {:username => login})

   return user if user.password==(pass)

end

   return false

end 
```

控制器 user_auth.rb

```
def login

   if  request.post? && @user = User.authenticate(params[:user][:username],params[:user][:password])

 redirect_to(:controller => 'posts')

   else

 @user = User.new()
   end
end 
```

查看 login.html.erb

```
 <% form_for(@user,:url => { :action => "login" } ) do |d| %>
   <% if @user.errors.any? %>
     <div id="error_explanation">
    <%= pluralize(@user.errors.count, "error") %>

    <ul>
     <% @user.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
   <% end %>
    </ul>
   </div>
 <% end %>

 <p> Your Name: <%= d.text_field :username %><br />  </p>
 <p> Password: <%= d.password_field :password %><br/></p>
 <p><%=d.submit "Login" %></p>
 <% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T03:33:25.923

似乎在身份验证失败时，您实例化了一个没有参数“@user = User.new()”的新用户，然后查找@user.errors。猜测您的新用户默认没有设置任何错误（为什么要这样做？）。从您的问题陈述中，很明显您的错误情况没有正确传达。在你的控制器中设置@errors 并在你的视图中检查@errors，而不是通过一个新的用户实例添加间接性会更清晰、更明显。

# ruby - 定义自定义数组/哈希方法时出错

> ID：10561346
> 
> 赞同：2
> 
> 时间：2012-05-12T05:35:37.730
> 
> 标签：ruby, ruby-1.9

```
def [](index)
  case index
  when 0, -2: @x
  when 1, -1: @y
  when :x, "x": @x
  when :y, "y": @y
  else nil
  end
end 
```

```
array.rb:3: syntax error, unexpected ':', expecting keyword_then or ',' or ';' or '\n'
  when 0, -2: @x
             ^
array.rb:5: syntax error, unexpected ':', expecting keyword_end
  when :x, "x": @x
               ^
array.rb:6: syntax error, unexpected ':', expecting keyword_end
  when :y, "y": @y
               ^
array.rb:8: warning: else without rescue is useless
array.rb:9: syntax error, unexpected keyword_end, expecting $end 
```

* * *

我是按照《Ruby 编程语言》这本书的原样写的。

我的 ruby​​ 版本是 ruby​​ 1.9.3p0

有没有人见过这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T05:47:46.393

我建议您使用常规 case..when..then 形式

```
def [](index)   
  case index   
    when 0, -2 then @x   
    when 1, -1 then @y   
    when :x, "x" then @x   
    when :y, "y" then @y   
  end 
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T05:46:29.843

尝试 ”;” 或换行符而不是“：”。

```
case index
  when 0, -2; @x 
```

* * *

```
case index
  when 0, -2
    @x 
```

# css - CSS子元素在浮动或对齐时失去父背景颜色

> ID：10561347
> 
> 赞同：1
> 
> 时间：2012-05-12T05:36:05.307
> 
> 标签：css, parent, background-color

```
<span class='parent'>Parent<span class='child'> and child</span></span> 
```

如果我这样做：

```
.parent {
    background-color: green;
} 
```

所有文本都具有绿色背景色。但如果我添加这个：

```
.child {
   float: right;
} 
```

孩子不再保留该财产。我可以`background-color`对孩子做，*但我需要突出显示两者之间的空间*。

有没有办法做到这一点？

jsfiddle：http: [//jsfiddle.net/SLWTd/](http://jsfiddle.net/SLWTd/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T05:44:38.957

孩子永远不会自动继承父母的背景颜色。浮动内容就在父级背景*之上。*在这种情况下，父级的背景仅跨越其实际内部文本的数量（不包括浮动内容）。

幸运的是，通过设置结构的方式，您可以显式[设置子元素的背景以继承](http://jsfiddle.net/UuQcJ/)其父元素的值。

```
.child {
    float: right;
    background-color: inherit;
} 
```

* * *

**如果您希望*整行*都是那种颜色**，则需要[使用块级元素](http://jsfiddle.net/JvUr5/)。试试这个：

```
<div class='parent'><span class='child'> and child</span>Parent</div> 
```

# python - Python重新加载模块不会立即生效

> ID：10561349
> 
> 赞同：3
> 
> 时间：2012-05-12T05:37:01.453
> 
> 标签：python, module, reload

请参阅下面的复制代码。

跟踪内存泄漏我发现 reload(module) 不会立即生效。

下面的程序应该打印 0,1,2,3,4 但是，当快速执行时，它会打印 0,0,0,3,3 等序列。将 sleep() 函数中的时间增加到例如 1 秒似乎可以解决此问题。

请注意，此代码是更实用的代码的简化版本，只是为了重现问题，我需要处理现实生活中的应用程序中的情况。

有人知道如何确保稳定性吗？

我在 Windows 上，cpython27 32 位。

感谢您阅读本文。

```
# 这个程序假设文件夹 lib\mymodule 存在并且包含 __init__.py
进口时间
导入 io
导入 gc
模块文件 = 'c:\\python27\\lib\\mymodule\\simplemodule.py'
对于范围内的cnt（5）：
    modulecode = """def runmodule():
    返回 %i
"""%(cnt)
    obj = io.open（模块文件，u'wb'）
    obj.write（模块代码）
    obj.close()
    如果cnt==0：
        导入 mymodule.simplemodule
    别的：
        重新加载（mymodule.simplemodule）
    gc.collect()
    打印 mymodule.simplemodule.runmodule()
    time.sleep(0.05)

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T05:45:46.593

问题是*pyc*不会重新生成，除非它相对于 undelying *py*文件已经过时。如果以一秒的分辨率检查文件修改时间，您的更新可能会被忽略，并且会调用过期的*pyc*而不是您更新的源。

*   尝试在每次*import*或*reload之间删除**pyc*文件。

***   或者，您可以设置环境变量`PYTHONDONTWRITEBYTECODE=1`。

    *   您还可以使用[*execfile*](http://docs.python.org/library/functions.html#execfile)绕过导入逻辑。**

# css - 蓝图 CSS 框架：Para 移到右侧

> ID：10561354
> 
> 赞同：3
> 
> 时间：2012-05-12T05:37:46.727
> 
> 标签：css, blueprint-css

我正在使用 Blueprint CSS 框架，并且我的 screen.css 文件中有以下 para 代码

```
p {margin:0 0 1.5em;}
.left {float:left !important;}
 p .left {margin:1.5em 1.5em 1.5em 0;padding:0;}
.right {float:right !important;}
p .right {margin:1.5em 0 1.5em 1.5em;padding:0;} 
```

现在由于上面的代码（我猜），当我在我的网站中使用 para 时，我得到以下格式：

```
para One
     para two
     para three 
```

代替

```
para One
para two
para three 
```

你能告诉我如何解决这个问题。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T20:14:16.027

该`screen.css`文件包含创建此效果的规则：

```
p + p {
    text-indent: 2em;
} 
```

这意味着`p`后面的每一个`p`都将缩进 2em。

如果您删除它（或者当然是整个文件：D），那么这些段落将不再缩进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T10:56:27.997

在上面的教程中，您粘贴了[Link](http://blueprintcss.org/tests/parts/sample.html)，第二段使用的类是

```
.<div class="span-15 prepend-1 colborder"> 
```

只需从该 div 中删除类“prepend-1”，因为其中有 padding-left。

```
.prepend-1
{
padding-left:40px;
} 
```

对不起英语不好！

# javascript - 在带有 Javascript 的 Google Maps API 中使用 JSON 标记

> ID：10561355
> 
> 赞同：4
> 
> 时间：2012-05-12T05:38:01.130
> 
> 标签：javascript, json, maps

我对编程很陌生，所以我有点害怕发帖。但是两天来我一直在做一些对你们大多数人来说可能很简单的事情，我想我会在这里尝试......

我正在尝试在 Google Maps API 中创建标记。

如果我将数据硬编码到 javascript 中，就像这样，它就像一个魅力。

```
var locations = [
['1 Bedroom House', 55.1111, -100.1111, 1, 'This house has 1 bedroom.'],
['2 Bedroom House', 56.1111, -100.1111, 2, 'This house has 2 bedrooms.'],
['3 Bedroom House', 57.1111, -100.1111, 3, 'This house has 3 bedrooms.'],
['4 Bedroom House', 58.1111, -100.1111, 4, 'This house has 4 bedrooms.']
]; 
```

我有一个 JSON 请求，需要从那里获取标记数据。

在你说之前，我确定我已经离开这里了......但这就是我得到的：

```
var locations = new Array();

$.getJSON("[URL]", function(json) {
        for(var i = 0; i < json.houses.length; i++) {
            var name = json.houses[i].house.name;
            var markerlat = json.houses[i].house.lat;
            var markerlng = json.houses[i].house.lng;
            var description = json.houses[i].house.description;

locations[i] = new Array();
locations[i].push('\'' + name + '\', ' + markerlat + ', ' + markerlng + ', ' + i + ', ' + '\'' + description + '\'');

}
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T21:16:36.073

通过查看您的代码的那部分，我想知道是否可以在没有单独的位置数组的情况下解决它。

如果您使用以下代码在 $.getJSON 函数的成功处理程序中扩展*for*循环，它是否可以工作：

```
new google.maps.Marker({
    position: new google.maps.LatLng(markerlat, markerlng),
    title: name,
    map: [id of the map canvas element]
    }); 
```

如果您希望描述也可用，则必须将侦听器附加到触发信息窗口的标记。可以从[Google Maps API 文档站点](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)找到有关信息窗口叠加层及其用法的更多详细信息。

# c++ - 使用 SERVICE_USER_DEFINED_CONTROL 与 Windows 服务通信

> ID：10561362
> 
> 赞同：0
> 
> 时间：2012-05-12T05:39:51.077
> 
> 标签：c++, visual-studio-2010, windows-services, named-pipes

我期待在服务中使用用户定义的控制代码的示例。我想将用户定义的命令发送到我的 Windows 服务。在这个命令中，windows 服务将为客户端进程创建一个命名管道，客户端将通过 CreateFile 函数与这个命名管道建立连接。我的自定义控件有时效果很好，但后来它显示无效错误。

那么如何在服务和各种客户端之间建立信息交换呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:38:14.970

`SERVICE_USER_DEFINED_CONTROL`很少使用。使用时一般是提示服务重新读取其配置文件。（在 unix 上，SIGHUP 通常用于相同目的）。

在您的情况下，正确的答案是在启动时简单地创建命名管道并继续收听，并等待有人连接（如果他们有的话）。

# graphics - 交互式图形，60fps，人类感知

> ID：10561365
> 
> 赞同：3
> 
> 时间：2012-05-12T05:40:40.117
> 
> 标签：graphics

## 简短的问题

如果我的应用程序已经以 60fps 的速度渲染，是否有任何额外的好处（从人类感知的角度来看）在状态变化时渲染额外的帧？

## 长问题

我正在用 OpenGL 编写一个交互式应用程序，例如：

```
while(true) {
  render a frame;
  sleep right amount of time to hit 60fps
} 
```

现在，在 MVC 模型中，我会在每次状态更改时重新绘制。

我的问题：

鉴于我已经从模型以 60fps 的速度进行渲染，在每次状态更改时启动新的重绘是否有任何好处？人类真的能在 33 毫秒内感知到细微的差别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T06:15:44.510

是的，他们可以，尤其是精英 FPS 游戏玩家。你可以设置一个固定的时间步长系统或一些类似的系统来尽可能快地渲染，并在你的额外帧期间使用插值来平滑动画。这肯定会有所作为，但又是时间-资源-成本，也许你不需要超级平滑的渲染。

# c - 我有足够的内存，但 mmap 一直失败说无法分配内存

> ID：10561368
> 
> 赞同：2
> 
> 时间：2012-05-12T05:40:57.087
> 
> 标签：c, linux, memory-management

我正在尝试`mmap`一些大文件但失败了：我无法映射任何大于 2.7 GB 左右的文件。

通过这样做`ulimit -a`，它说我的虚拟内存是无限的。然后`cat /proc/meminfo`我说我的系统有 3GB Memfree 和 2GB Swapfree。

我假设我可以映射一个最大 5GB 的文件。我尝试了我在互联网上学到的所有东西，包括使用`MAP_NORESERVE`flag 和 set `overcommit_memory`to `1`。还是一样的`Cannot allocate memory`，什么可能出错？

我正在使用 64 位 cpu 和 32 位 linux 系统。如果您需要更多信息，请告诉我。我真的很感激任何建议或提示。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-12T05:48:39.793

您需要使用 64 位操作系统，因为 32 位操作系统没有足够的地址空间。
编辑：虽然您的系统有一些可用的物理内存，但一个 32 位进程只能寻址高达 4GB，内核为内核驱动程序保留大约 1-2GB...，因此用户空间通常有 2GB 用于 32 位应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T06:09:42.043

您的应用程序根本没有足够的地址空间（可用内存地址）来映射那么大的文件。

在 Linux 下，运行在 32 位内核上的 32 位进程通常有大约 3GB 的可用地址空间，而运行在 64 位内核上的 32 位进程有 4GB 的可用地址空间。如果您需要更多，您需要将您的应用程序编译为 64 位进程。这将为您提供至少 128TB 的地址空间。

# associative - 括号的结合性

> ID：10561374
> 
> 赞同：0
> 
> 时间：2012-05-12T05:41:38.510
> 
> 标签：associative

这个 msdn[链接](http://msdn.microsoft.com/en-us/library/ms139741.aspx)说 '(' 和 ')' 具有从左到右的关联性。

这有什么意义？有人可以给我一个例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:18:10.510

在形式语法中，具有从左到右优先级的运算符是左递归的。所以用二进制加法：

```
S -> E
E -> E + a
E -> a 
```

所以树看起来像：

```
 S
    |
    E
    |
  E + a
  |
E + a
|
a 
```

如您所见，前两个`a`是在后两个之前添加的。

对于右关联运算符，您的语法将包含右递归。所以用二进制取幂：

```
S -> E
E -> a ** E
E -> a 
```

随后，您的解析树将如下所示：

```
 S
    |
    E
    |
  a ** E
       |
     a ** E
          |
          a 
```

正如您所看到的，最后两个`a`是首先取幂的，其结果是第一个`a`的幂（顺便说一下，这是取幂的正确关联性）。

对于三元和更大的运算符，应用相同的模式，递归规则是最左边的非终结符或最右边的非终结符。但是，对于一元运算符，它是左递归还是右递归取决于非终结符 s 分别位于左侧还是右侧。`(` `E` `)`在两边都有一个终端的情况下，非终端虽然是递归的，但从语法的角度来看既不是左递归也不是右递归，所以我认为 MSDN 文章已经*武断*地声明它是“从左到右”。 "

括号的关联性与在 in`d`之前评估的事实无关，也与的关联性无关，所以我不知道另一个 Jared 在说什么。`a+b+c``d+(a+b+c)``a+b+c`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T05:47:13.777

什么不清楚？只要你有一个，它们就会成对出现，`(`你就会有一个`)`。一旦进入它们，你就可以从左到右进行算法运算，所以如果你有的话，`d+(a+b+c)`你会这样做，`a+b`然后加起来的总和然后`a+b`加起来`c`的总和`a,b,c``d`

# asp.net-mvc-3 - 从 ASP.Net MVC3 中的 DropDown 读取数据

> ID：10561378
> 
> 赞同：0
> 
> 时间：2012-05-12T05:42:19.250
> 
> 标签：asp.net-mvc-3

我正在使用 Database First 方法执行 ASP.net MVC 3（空类型而不是 Internet 类型）...

我需要的是

第 1 步：我只是使用下拉列表来显示公司所在的各个位置。该列表来自组织表，位置只是该组织表中的一个字符串字段，

第 2 步：当用户进行注册时，下拉列表将显示位置。现在，用户选择印度，然后此值（位置名称）应存储在 UserLogin 表中...

现在如何从下拉列表中读取值，我希望您理解我的问题并提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T09:48:23.340

我会使用视图模型：

```
public class RegisterViewModel
{
    public string LocationName { get; set; }
    public IEnumerable<SelectListItem> Locations { get; set; }
} 
```

然后是一个将服务于视图的控制器操作：

```
public ActionResult Index()
{
    var model = new RegisterViewModel();
    model.Locations = new SelectList(dbcontext.Organization_Details, "OName", "OLocation");
    return View(model);
} 
```

那么对应的强类型视图：

```
@model RegisterViewModel
@using (Html.BeginForm())
{
    @Html.LabelFor(x => x.LocationName)
    @Html.DropDownListFor(x => x.LocationName, Model.Locations)
    <button type="submit">OK</button>
} 
```

最后是提交表单时将调用的控制器操作：

```
[HttpPost]
public ActionResult Index(RegisterViewModel model)
{
    // model.LocationName will contain the selected location here
    ...
} 
```

# jquery - jquery mobile刷新动态加载页面

> ID：10561383
> 
> 赞同：10
> 
> 时间：2012-05-12T05:43:20.740
> 
> 标签：jquery, mobile, jquery-mobile

我有 page1，它是 index.html，它是一个独立的网站，包括标题和脚本等。我在此页面上有一个按钮，单击该按钮将通过 ajax 加载 page2 并将 page2 插入 page1。Page2 只是其中的 div data-role="page" 和 html，它不是一个独立的页面。但是，url 更改为 page2.html，然后如果我“刷新”页面，它不会加载完整的页面，因为 page2 不是完整的页面，它只是被注入到 page1 中。

我尝试设置 data-url="index.html&dashboard"（dashboard 是 page2 上的主要 id），在这种情况下，url 看起来正确，因为它仍然是 index.html&dashboard，因此即使您在 page2 上，页面刷新也会重新加载 page1。但是现在，jquery 吓坏了并永远坐在加载屏幕上，因为它找不到“仪表板”，因为该内容仅在用户单击按钮后才添加。

我该如何解决这个问题？

谢谢。

**page1 index.html**

```
<!DOCTYPE HTML>
<html>
<head>
<title>title</title>
<script><script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/jquery.mobile.js"></script>
<script type="text/javascript" charset="utf-8" src="js/global.js"></script>
<script type="text/javascript" charset="utf-8" src="js/login.js"></script>

<link rel="stylesheet" type="text/css" href="css/jquery.mobile.css" />
<link rel="stylesheet" type="text/css" href="css/style.css" />

<script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/jquery.mobile.js"></script>
<script type="text/javascript" charset="utf-8" src="js/login.js"></script>

<link rel="stylesheet" type="text/css" href="css/jquery.mobile.css" />
<link rel="stylesheet" type="text/css" href="css/style.css" />

</head>
<body>
    <div data-role="page" data-theme="b">

        <div data-role="header" data-theme="b">
            <h1>Login</h1>
        </div>
        <!-- /header -->

        <div data-role="content">
            <div class="row">
                <label for="login_name">Login Name:</label> <input
                    class="ui-input-text" type="text" name="login_name" id="login_name" />
            </div>
            <div class="row">
                <label for="basic">Password:</label> <input class="ui-input-text"
                    type="password" name="password" id="password" />
            </div>
            <div class="row">
                <input type="checkbox" name="remember" id="remember" class="custom"
                    data-mini="true" /> <label for="remember">Remember Me</label>
            </div>
            <div class="row">
                <input type="submit" id="submit" name="submit" value="Submit" />
            </div>
        </div>
        <!-- /content -->

    </div>
    <!-- /page -->
</body>
</html> 
```

**page2仪表板.html**

```
<div id="dashboard" data-role="page" data-theme="b" data-url="index.html&dashboard">

<div data-role="header" data-theme="b">
    <h1 id="page_title">Dashboard</h1>
</div> 
```

**登录.js**

```
$(function() {

$("#submit").click(function() {

    if ($("#login_name").val() == "") {
        alert("Please enter a login name");
        return false;
    }

    if ($("#password").val() == "") {
        alert("Please enter a password");
        return false;
    }

    $.post(URL + 'login', {
        'APIKEY' : APIKEY,
        'login' : $("#login_name").val(),
        'password' : $("#password").val()
    }, function(data) {
        if (data.error == "") {

            $.mobile.changePage("dashboard.html", { transition : "slide" });
        } else {
            alert(data.error);
        }

    }, "json");

}); 
```

});

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T06:28:01.280

## 简答

简短的回答是 jQuery Mobile 希望您使用散列来表示单个页面的状态：

*   /index.html - 第 1 页
*   /index.html#dashboard - 仪表板。

相反，当您应该只是调用 JavaScript 来动态更改第一页上的内容以表示第二页时，您正在加载一个全新的页面。

如果简短的回答有意义，那就太好了！如果不是，那么长答案非常详细，并描述了解决此问题的两种方法。

## 长答案

您本质上要问的是如何构建一个多页面移动网站，并让两个页面都可以通过标识资源的 URI 访问。

您可以使用两种方法来解决此问题。

**多页模板：**

对于 jQuery mobile，这是通过[jQuery Mobile Multi-page Template](http://jquerymobile.com/demos/1.1.0/docs/pages/multipage-template.html)完成的。

一般的想法是您的两个页面都在同一个 HTML 文档中，如下所示：

```
<head>

</head>

<!-- This is your FIRST page -->
<div data-role="page" id="one">

    <div data-role="header">
        <h1>Multi-page</h1>
    </div><!-- /header -->

    <div data-role="content" >  
        <h2>One</h2>

        <p>I have an id of "one" on my page container. I'm first in the source order so I'm shown when the page loads.</p>  

        <h3>Show internal pages:</h3>
        <p><a href="#two" data-role="button">Show page "two"</a></p>    
        <p><a href="#popup"data-role="button" data-rel="dialog" data-transition="pop">Show page "popup" (as a dialog)</a></p>
    </div><!-- /content -->

    <div data-role="footer" data-theme="d">
        <h4>Page Footer</h4>
    </div><!-- /footer -->
</div><!-- /page one -->

<!-- This is your SECOND page -->
<!-- Start of second page: #two -->
<div data-role="page" id="two" data-theme="a">

    <div data-role="header">
        <h1>Two</h1>
    </div><!-- /header -->

    <div data-role="content" data-theme="a">    
        <h2>Two</h2>
        <p>I have an id of "two" on my page container. I'm the second page container in this multi-page template.</p>   
        <p>Notice that the theme is different for this page because we've added a few <code>data-theme</code> swatch assigments here to show off how flexible it is. You can add any content or widget to these pages, but we're keeping these simple.</p>  
        <p><a href="#one" data-direction="reverse" data-role="button" data-theme="b">Back to page "one"</a></p> 

    </div><!-- /content -->

    <div data-role="footer">
        <h4>Page Footer</h4>
    </div><!-- /footer -->
</div><!-- /page two -->

</body> 
```

接下来，jQuery Mobile 本质上是使用 CSS 隐藏 id="two" 的 DIV 元素，只显示 id="one" 的 div。当用户点击 `href="#two" 的超链接时，有一个侦听器会拦截 hashChange 事件并触发一些 JavaScript 代码来隐藏 id="one" 的 DIV 并显示 id="two" 的 DIV ”。

这使得页面转换看起来非常流畅和快速，无需访问服务器来获取 HTML 标记。

**动态受保护的内容：**

如果您的数据更加动态，那么另一种选择是使用[jQuery Mobile 动态页面注入](http://jquerymobile.com/demos/1.1.0/docs/pages/page-dynamic.html)。这个过程的一般前提与多页面模板类似，浏览器监听 hashChange 事件，除了改变页面外，它还向服务器发出 AJAX 请求以检索 JSON 内容。

```
<div id="home" data-role="page">
  <div data-role="header"><h1>Categories</h1></div>
  <div data-role="content">
    <h2>Select a Category Below:</h2>
    <ul data-role="listview" data-inset="true">
        <li><a href="#category-items?category=animals">Animals</a></li>
        <li><a href="#category-items?category=colors">Colors</a></li>
        <li><a href="#category-items?category=vehicles">Vehicles</a></li>
    </ul>
  </div>

</div> 
```

单击“动物”类别时，隐藏 id="home" DIV。在此示例中，不是重新加载页面，而是动态生成 HTML 并使用 JSON 对象的结果填充。

这是处理显示正确内容的代码：

```
// Load the data for a specific category, based on
// the URL passed in. Generate markup for the items in the
// category, inject it into an embedded page, and then make
// that page the current active page.
function showCategory( urlObj, options )
{
    var categoryName = urlObj.hash.replace( /.*category=/, "" ),

        // Get the object that represents the category we
        // are interested in. Note, that at this point we could
        // instead fire off an ajax request to fetch the data, but
        // for the purposes of this sample, it's already in memory.
        category = categoryData[ categoryName ],

        // The pages we use to display our content are already in
        // the DOM. The id of the page we are going to write our
        // content into is specified in the hash before the '?'.
        pageSelector = urlObj.hash.replace( /\?.*$/, "" );

    if ( category ) {
        // Get the page we are going to dump our content into.
        var $page = $( pageSelector ),

            // Get the header for the page.
            $header = $page.children( ":jqmData(role=header)" ),

            // Get the content area element for the page.
            $content = $page.children( ":jqmData(role=content)" ),

            // The markup we are going to inject into the content
            // area of the page.
            markup = "<p>" + category.description + "</p><ul data-role='listview' data-inset='true'>",

            // The array of items for this category.
            cItems = category.items,

            // The number of items in the category.
            numItems = cItems.length;

        // Generate a list item for each item in the category
        // and add it to our markup.
        for ( var i = 0; i < numItems; i++ ) {
            markup += "<li>" + cItems[i].name + "</li>";
        }
        markup += "</ul>";

        // Find the h1 element in our header and inject the name of
        // the category into it.
        $header.find( "h1" ).html( category.name );

        // Inject the category items markup into the content element.
        $content.html( markup );

        // Pages are lazily enhanced. We call page() on the page
        // element to make sure it is always enhanced before we
        // attempt to enhance the listview markup we just injected.
        // Subsequent calls to page() are ignored since a page/widget
        // can only be enhanced once.
        $page.page();

        // Enhance the listview we just injected.
        $content.find( ":jqmData(role=listview)" ).listview();

        // We don't want the data-url of the page we just modified
        // to be the url that shows up in the browser's location field,
        // so set the dataUrl option to the URL for the category
        // we just loaded.
        options.dataUrl = urlObj.href;

        // Now call changePage() and tell it to switch to
        // the page we just modified.
        $.mobile.changePage( $page, options );
    }
} 
```

另请注意，在查看 Category 页面和 Animals 页面的 URL 时，您可以看到 HTML 文档每次都是相同的。不同的是哈希值。

[http://jquerymobile.com/demos/1.1.0/docs/pages/dynamic-samples/sample-reuse-page.html](http://jquerymobile.com/demos/1.1.0/docs/pages/dynamic-samples/sample-reuse-page.html)

[http://jquerymobile.com/demos/1.1.0/docs/pages/dynamic-samples/sample-reuse-page.html#category-items?category=animals](http://jquerymobile.com/demos/1.1.0/docs/pages/dynamic-samples/sample-reuse-page.html#category-items?category=animals)

当页面加载时，哈希值**用于表示页面的状态。**由于浏览器大多是无状态的，哈希是我们可以用来帮助确定页面应该向用户显示什么状态的一种技巧。

只需将您的 changePage 方法调用与类别页面菜单中使用的 URL 进行比较：

```
<li><a href="#category-items?category=animals">Animals</a></li>
<li><a href="#category-items?category=colors">Colors</a></li>
<li><a href="#category-items?category=vehicles">Vehicles</a></li> 
```

请注意，当用户单击链接时，唯一改变的是哈希值，页面永远不会重新加载。但在您的示例中，您实际上正在加载一个全新的页面：

```
// this is a new page, not a hash
$.mobile.changePage("dashboard.html", { transition : "slide" }); 
```

从逻辑上讲，您需要重新考虑如何表示页面的策略。要充分利用 jQuery Mobile，请将您的第一个 HTML 页面视为所有 CSS、JavaScript 和静态内容的框架。

之后，您请求的任何资源都应由具有相同页面的 URL 标识，后跟哈希值。

例如，如果您的静态页面是“index.html”，那么您的仪表板可能是“index.html#dashboard”。您也可以在 id="dashboard" DIV 中包含仪表板 HTML 并使用来自服务器的数据动态填充它，或者您可以通过 AJAX 加载 HTML 和数据。

第二点是任何直接访问您的仪表板的人都需要访问“/index.html#dashboard”，这将加载您的原始页面，触发一些 JavaScript 来检查哈希，识别它包含“仪表板”，然后制作通过拉回动态数据转换到仪表板页面。

有关更多信息，请参阅[jQuery 页面动态文档](http://jquerymobile.com/demos/1.1.0/docs/pages/page-dynamic.html)。

# java - 创建Android应用架构设计图示例

> ID：10561385
> 
> 赞同：1
> 
> 时间：2012-05-12T05:44:06.947
> 
> 标签：java, android, uml

我已经开发了Android应用程序，但是我的客户想要得到一个应用程序架构设计图，但我不知道我该怎么做，我应该使用哪个应用程序等等。有没有例子或者可能是您至少知道用于它的程序吗？谢谢你，我希望你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T06:27:57.300

给他任何重要工作流程的序列图，可能还有一张“大图”的类图。我使用 ArgoUML [http://argouml.tigris.org/](http://argouml.tigris.org/)因为它是免费的，但您可能需要更专业的工具。

# google-app-engine - Google AppEngine 错误：“没有名为 flask 的模块”

> ID：10561387
> 
> 赞同：3
> 
> 时间：2012-05-12T05:44:46.993
> 
> 标签：google-app-engine, flask

我正在按照[WebPutty 的 github](https://github.com/FogCreek/WebPutty)页面提供的指示将我自己的 WebPutty 分支放在 GAE 上。它在本地运行良好。我无法成功运行“fab deploy”（出现错误“没有名为 appengine.api 的模块”），因此尝试通过更新 appcfg.py 将其放在 GAE 上。不幸的是，当我访问 URL 时，这给了我以下错误：“没有名为 flask 的模块”。

希望获得有关如何解决的任何见解/帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T23:59:24.613

我不知道你是否已经这样做了，但是要使用 GAE 和 python，你需要在你的项目中拥有依赖包，如 Flask、Werkzeug、Jinja2 和 SimpleJson。

这是我在项目中使用的脚本：

```
# set the path of your project
PATH_PROJECT=~/Development/python/projects/scheduler-i-sweated-yesterday

cd ~/Downloads

#
# Installing Flask: https://github.com/mitsuhiko/flask/tags
#
wget https://github.com/mitsuhiko/flask/archive/0.9.zip
unzip 0.9.zip
mv flask-0.9/flask $PATH_PROJECT/flask

#
# Installing Werkzeug: https://github.com/mitsuhiko/werkzeug/tags
#
wget https://github.com/mitsuhiko/werkzeug/archive/0.8.3.zip
unzip 0.8.3.zip
mv werkzeug-0.8.3/werkzeug $PATH_PROJECT/werkzeug

#
# Installing Jinja2: https://github.com/mitsuhiko/jinja2/tags
#
wget https://github.com/mitsuhiko/jinja2/archive/2.6.zip
unzip 2.6.zip
mv jinja2-2.6/jinja2 $PATH_PROJECT/jinja2

#
# Installing SimpleJson: https://github.com/simplejson/simplejson/tags
#
wget https://github.com/simplejson/simplejson/archive/v3.0.5.zip
unzip v3.0.5.zip
mv simplejson-3.0.5/simplejson $PATH_PROJECT/simplejson 
```

另存为 install_packages_dependencies.sh ，然后在 shell 中运行：

```
bash install_packages_dependencies.sh 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T21:10:10.017

我有这个完全相同的问题。我在 Mac OS X Lion 上。我通过将 GoogleAppEngineLauncher.app 从我的桌面移动到应用程序目录来解决了这个问题。fabfile.py 在那里寻找应用程序。在我将应用程序移动到 fabfile.py 正在寻找它的位置后，我运行了“fab deploy”，一切正常。我希望这有帮助。

# php - 使用 php 更改 ftp 密码并将其发送到运行 cron 的邮件

> ID：10561390
> 
> 赞同：0
> 
> 时间：2012-05-12T05:45:43.927
> 
> 标签：php, ftp

我有网站托管在 godaddy 。我想每周使用 php 更改 ftp 密码，并使用 cron 将所有 ftp 密码邮寄到电子邮件 ID。我的网站托管在 godaddy 共享服务器上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:16:14.127

你问什么不需要php，你可以让cron运行一个bash脚本来改变X用户的通行证，这取决于你的托管服务器使用什么Ftp服务器软件，你可以使用php发送邮件或使用邮件命令.. .

# php - 煎茶网格 + PHP + JSON

> ID：10561396
> 
> 赞同：2
> 
> 时间：2012-05-12T05:46:46.633
> 
> 标签：php, ajax, json, extjs

我有一个问题，萤火虫没有告诉我任何问题：/

我的funcions.js

```
/* 
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

Ext.require([
    'Ext.grid.*',
    'Ext.data.*',
    'Ext.util.*',
    'Ext.state.*'
    ]);

Ext.onReady(function() {
    Ext.QuickTips.init();

    // setup the state provider, all state information will be saved to a cookie
    Ext.state.Manager.setProvider(Ext.create('Ext.state.CookieProvider'));

    var store = Ext.create('Ext.data.Store', {
        autoLoad: true,
        proxy: {
            type: 'ajax',
            url: 'src.php'
        }
    });
    var grid = Ext.create('Ext.grid.Panel', {
        store: store,
        stateful: true,
        collapsible: true,
        multiSelect: true,
        stateId: 'stateGrid',
        columns: [
        {
            text     : 'Nombre Chofer',
            flex     : 1,
            sortable : false,
            dataIndex: 'nombre_chofer'
        }
        ],
        height: 350,
        width: 600,
        title: 'Array Grid',
        renderTo: 'grid-example',
        viewConfig: {
            stripeRows: true,
            enableTextSelection: true
        }
    });
}); 
```

我的 src.php (AJAX)

```
<?php

include_once 'funciones/header_server.php';
include_once 'model/ChoferModel.php';

function getList() {
    $choferModel = new ChoferModel();
    $resultQuery = $choferModel->getTable();
    $conteo = count($resultQuery) - 1;
    $resultQuery = (array) $resultQuery;

    if ($conteo > 0) {
        foreach ($resultQuery as $chofer) {
            $rec['nombre_chofer'] = $chofer['NOMBRE_CHOFER'];
            $arr[] = $rec;
        }
        $jsonresult = JEncode($arr);
        echo $jsonresult;
    }
}

getList(); 
```

还有我的 index.php

```
<?php
//include_once 'funciones/header_server.php';
//include_once 'model/ChoferModel.php';
?>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Sistema para control de viaticos - COPRA</title>
        <link rel="stylesheet" type="text/css" href="script/ext-all.css" />
        <script type="text/javascript" charset="utf-8" src="script/ext-all-dev.js"></script>
        <script type="text/javascript" charset="utf-8" src="script/ext.js"></script>
        <script src="script/funcions.js"></script>
    </head>
    <body>
        <div id="grid-example" name="grid-example"></div>
    </body>
</html> 
```

我的输出是黑色的，不显示表格或网格...请帮助我..

截图：src 输出：http: [//i.stack.imgur.com/zLMgz.png](http://i.stack.imgur.com/zLMgz.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:19:45.423

只需定义您自己的模型并在 ajax 代理设置中使用它。

请参阅代码的[工作示例](http://jsfiddle.net/o_nix/EhuLm/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T07:20:17.250

将代理配置放入模型到存储中。这在我的应用程序中对我有用。

这里我如何配置我的模型：

`proxy: {`

 ````
type: 'ajax',
api: {
    read: 'scripts/receive.php',
    create: 'scripts/create.php?action=create',
    update: 'scripts/create.php?action=update',
    destroy:'scripts/destroy.php?action=destroy'
},

reader: {
    type: 'json',
    root: 'groups'
}, 
````  `* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-15T18:47:03.560

也许，您必须将 php 中的响应设置为 json。将此添加到您的 php

```
header("HTTP/1.1 200 OK");
header("Content-Type: application/json"); 
````

# ant - 如何在ant中复制文件而不管其位置

> ID：10561398
> 
> 赞同：2
> 
> 时间：2012-05-12T05:47:06.820
> 
> 标签：ant

我想从 ../source 复制一个 jar 文件，但我不确定它到底在哪里，它可以在任何子目录中的任何位置，但它就在那里。我正在写这段代码

```
<target name="CopyingFromSource" depends="clean">
  <copy file="../source/org.springframework-spring-support-2.0.8.jar" todir="../result"/> 
</target> 
```

但是显示我找不到`org.springframework-spring-support-2.0.8.jar`你能告诉我如何复制吗？

它出现在 /source 或任何子目录中的任何位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T20:47:51.580

使用带有嵌套文件集的复制任务，如下所示：

```
<project>
 <copy todir="../result">
  <fileset dir="/home/gilreb/temp" includes="**/org.springframework-spring-support-2.0.8.jar" id="foobar"/>
 </copy>
</project> 
```

有关详细信息，请参阅[Ant 手动复制任务](http://ant.apache.org/manual/Tasks/copy.html)和[Ant 手动文件集](http://ant.apache.org/manual/Types/fileset.html)。
即，如果您只需要复制平面文件，而不是您需要使用的整个路径：

```
<copy todir="../result" flatten="true">
...
</copy> 
```

# c# - 尝试连接数据库时出现“错误：无法初始化 OLE”？C＃

> ID：10561405
> 
> 赞同：3
> 
> 时间：2012-05-12T05:47:52.210
> 
> 标签：c#, sql-server, database, database-connection, ole

我正在尝试通过 C# 连接到数据库，但是这样做时我收到了一条非常无用的错误消息：

“08:44:17：错误：无法初始化 OLE 08:44:17：错误：无法初始化 OLE”

我曾尝试寻找解决方案，但没有成功。我也尝试重新启动我的计算机，这也没有帮助。

我正在运行 SQL Server 2008，这是相关的数据库代码：

```
/// <summary>
    /// Connects to a given database and returns the database connection.
    /// </summary>
    /// <param name="file">The database file name.</param>
    /// <returns>The database connection.</returns>
    public static SqlConnection ConnectToDb(string file)
    {
        //initialize generic path
        string path = System.Reflection.Assembly.GetExecutingAssembly().Location;
        path = path.Replace("bin\\Debug\\MediaPlayer.exe", "");
        path += "Database.mdf";

        string connectionPath = @"Data Source=.\SQLEXPRESS;AttachDbFilename=" + path + ";Integrated Security=True;User Instance=True";
        SqlConnection connection = new SqlConnection(connectionPath);
        return connection;
    }

    /// <summary>
    /// Executes a SQL query in a given database.
    /// </summary>
    /// <param name="file">The database file name.</param>
    /// <param name="query">The SQL query to execute.</param>
    public static void ExecuteQuery(string file, string query)
    {

        SqlConnection connection = ConnectToDb(file);
        connection.Open();
        SqlCommand command = new SqlCommand(query, connection);
        command.ExecuteNonQuery();
        connection.Close();
    } 
```

这是我用于几个项目的数据库代码，它以前一直有效。

在 ExecuteQuery 方法的 connection.Open() 行上调用错误（我知道这一点是因为我注释掉了其他行）。

任何帮助/建议将不胜感激:)。

编辑：我测试了我与数据库的连接并检查了所有内容，我只是不明白为什么我无法通过代码连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:14:12.637

对于任何可能正在寻找的人，我最终通过在 Main() 方法之前添加一个 [STAThread()] 来解决这个问题。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T06:19:25.243

我怀疑您正在为 x64 CPU 构建项目。x64 没有 OLE 驱动程序。我建议将构建目标从 ANY CPU 更改为 x86。

# javascript - Flickr JavaScript 框架

> ID：10561417
> 
> 赞同：-2
> 
> 时间：2012-05-12T05:50:26.877
> 
> 标签：javascript, flickr

我正在查看 Flickr 的 3rd 方框架[列表](http://www.flickr.com/services/api/)。有很多语言的框架，但令人惊讶的是没有 Javascript。

Flickr 是否有任何 Javascript 框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T06:00:31.357

[这个 github 项目](https://github.com/othermedia/flickr)是 Flickr API 的 JavaScript 包装库。这是其他媒体写[的](https://github.com/othermedia)。

# android - 使用 AlarmManager 为同一活动安排多个 pendingIntent

> ID：10561419
> 
> 赞同：4
> 
> 时间：2012-05-12T05:51:03.240
> 
> 标签：android, android-intent, alarmmanager, android-calendar, android-pendingintent

最近，当我尝试使用 AlarmManager 安排将来运行的活动时，我注意到了奇怪的行为。看下面的代码，第一个活动在 20 秒后启动，而第二个活动在 40 秒内没有启动，而是在 60 秒后才启动。谁能解释为什么第二个意图不安排第二个活动被调用，而是第三个意图。这是否意味着我只能对 AlarmManager 中的活动有一个意图。

```
//pending intent for morning
    Intent myIntent1 = new Intent(this, Activity1.class);
    pendingIntent1 = PendingIntent.getActivity(this, 0, myIntent1, 0);
    AlarmManager alarmManager1 = (AlarmManager)getSystemService(ALARM_SERVICE);
    Calendar calendar1 = Calendar.getInstance();
    //calendar1.set(Calendar.YEAR, Calendar.MONTH + 1, Calendar.DAY_OF_MONTH, morningTime, 0, 0);
    calendar1.setTimeInMillis(System.currentTimeMillis());
    calendar1.add(Calendar.SECOND, 20);
    alarmManager1.set(AlarmManager.RTC_WAKEUP, calendar1.getTimeInMillis(), pendingIntent1);

    //pending intent for noon
    Intent myIntent2 = new Intent(this, Activity2.class);
    pendingIntent2 = PendingIntent.getActivity(this, 0, myIntent2, 0);
    AlarmManager alarmManager2 = (AlarmManager)getSystemService(ALARM_SERVICE);
    Calendar calendar2 = Calendar.getInstance();
    //calendar2.set(Calendar.YEAR, Calendar.MONTH + 1, Calendar.DAY_OF_MONTH, noonTime, 0, 0);
    calendar2.setTimeInMillis(System.currentTimeMillis());
    calendar2.add(Calendar.SECOND, 40);
    alarmManager2.set(AlarmManager.RTC_WAKEUP, calendar2.getTimeInMillis(), pendingIntent2);

    //pending intent for night
    Intent myIntent = new Intent(this, Activity2.class);
    pendingIntent = PendingIntent.getActivity(this, 0, myIntent, 0);
    AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
    Calendar calendar = Calendar.getInstance();
    //calendar.set(Calendar.YEAR, Calendar.MONTH + 1, Calendar.DAY_OF_MONTH, nightTime, 0, 0);
    calendar.setTimeInMillis(System.currentTimeMillis());
    calendar.add(Calendar.SECOND, 60);
    alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent);' 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-12T10:40:21.000

> 这是否意味着我只能对 AlarmManager 中的活动有一个意图。

不，但这意味着您需要 distinct `PendingIntents`。您正在调用：

```
Intent myIntent = new Intent(this, Activity2.class);
pendingIntent = PendingIntent.getActivity(this, 0, myIntent, 0); 
```

两次，因此两个`getActivity()`调用返回相同的`PendingIntent`.

任何一个：

*   对第二个参数使用不同的值`getActivity()`，或

*   对对象做一些事情以`Intent`使它们充分不同，例如使用不同的操作字符串（注意：额外的还不够）

# jquery - 使用 $.post 通过 onclick="return..." 发布图片

> ID：10561421
> 
> 赞同：0
> 
> 时间：2012-05-12T05:51:10.767
> 
> 标签：jquery, facebook, post

我正在尝试通过 onclick="return..." 使用 $.post 方法发布图像我的代码如下。它没有发布任何图像。我也尝试发布消息，它的工作！所以想知道是否有人可以帮助我解决这个问题？

```
//Index.php file
<head>
<script type="text/javascript" src="jquery-1.7.1.min.js"></script>
</head>

<body>
<img src="1.jpg" id="imgURL">

<p id="wrap-btn">
//returning the image to post_to_wall function in main.js
<a href="#" onclick="return post_to_wall($('#imgURL').val())" id="btnpostwall">Post to     Wall</a>
</body> 
```

* * *

```
//Main.js file
function post_to_wall(imgURL){
$.post('posttowall.php',{'imgURL': imgURL},function(data){
    //alert(data);
    $('#loaddiv').hide();
});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T06:26:08.697

**无法使用 jQuery 发布图片**

您可以将其 src 发送到 php 文件，然后使用 PHP 从该 src 检索该图像。

要发送 src，您可以尝试如下：

```
function post_to_wall(imgURL){
   $.post('posttowall.php',{'imgURL': imgURL},function(data){
      //alert(data);
      $('#loaddiv').hide();
   });
}

$('a#btnpostwall').on('click', function() {
   post_to_wall($('#imgURL').attr('src'));
}); 
```

# gwt - TinyMCE 在 GWT 中加载，但工具栏按钮不起作用

> ID：10561423
> 
> 赞同：0
> 
> 时间：2012-05-12T05:51:40.057
> 
> 标签：gwt, button, tinymce, toolbar, smartgwt

我在 smartgwt 项目中使用[tinymce-gwt 。](http://code.google.com/p/tinymce-gwt/)我已经编写了一些代码来创建一个面板并将一个 textarea 项添加到该面板然后加载 tinymce 编辑器。它工作正常，我可以正确加载它，它可以很好地显示所有需要的按钮。但我有一个问题，工具栏按钮不起作用（点击它们没有任何反应）。这是我用来初始化 TinyMCE 的原生 GWT 方法：

```
protected native void init(String id) /*-{
    try{
        $wnd.tinyMCE.init({
                mode: "exact",
                elements: id,
                theme : "advanced",
                theme_advanced_buttons1 : "fontselect,fontsizeselect,formatselect,bold,italic,underline,strikethrough,separator,sub,sup,separator,cut,copy,paste,undo,redo",
                theme_advanced_buttons2 : "justifyleft,justifycenter,justifyright,justifyfull,separator,numlist,bullist,outdent,indent,separator,forecolor,backcolor,separator,hr,link,unlink,jbimages,image,table,separator,asciimath,asciimathcharmap,asciisvg",//media, code
                theme_advanced_buttons3 : "",
                theme_advanced_fonts : "Arial=arial,helvetica,sans-serif,Courier New=courier new,courier,monospace,Georgia=georgia,times new roman,times,serif,Tahoma=tahoma,arial,helvetica,sans-serif,Times=times new roman,times,serif,Verdana=verdana,arial,helvetica,sans-serif",
                theme_advanced_toolbar_location : "top",
                theme_advanced_toolbar_align : "left",
                theme_advanced_statusbar_location : "bottom",
                relative_urls : false,
                plugins : 'jbimages,asciimath,asciisvg,table,inlinepopups,media',
                AScgiloc : '/tinyMCE/plugins/asciisvg/php/svgimg.php',
                ASdloc : 'plugins/asciisvg/js/d.svg',   
                content_css : "css/content.css"
            });
    }catch(e){
        alert(e);
    }
}-*/; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:11:49.443

我建议看看这两个似乎在做你正在尝试的项目。

[http://code.google.com/p/gwt-html-editor/source/browse/branches/gwt1.4/src/com/gc/gwt/wysiwyg/client/tinymce/TinyMCE.java?r=89](http://code.google.com/p/gwt-html-editor/source/browse/branches/gwt1.4/src/com/gc/gwt/wysiwyg/client/tinymce/TinyMCE.java?r=89)

或这个：

[http://code.google.com/p/tinymce-gwt/source/browse/trunk/tinymce-gwt/tinymceGwt/src/gr/open/client/TinyMCE.java](http://code.google.com/p/tinymce-gwt/source/browse/trunk/tinymce-gwt/tinymceGwt/src/gr/open/client/TinyMCE.java)

# forms - 同一类型的多种形式 - Symfony 2

> ID：10561424
> 
> 赞同：12
> 
> 时间：2012-05-12T05:51:46.380
> 
> 标签：forms, symfony, multiple-forms

所以我的控制器动作与此类似

```
$task1 = new Task();
$form1 = $this->createForm(new MyForm(), $task1);

$task2 = new Task();
$form2 = $this->createForm(new MyForm(), $task2); 
```

假设我的 MyForm 有两个字段

```
//...
$builder->add('name', 'text');
$builder->add('note', 'text');
//... 
```

似乎由于这两个表单属于同一类型的 MyForm，因此在视图中呈现时，它们的字段具有相同的名称和 ID（两个表单的“名称”字段共享相同的名称和 ID；' note' 字段），因此 Symfony 可能无法正确绑定表单的数据。有谁知道这个问题的任何解决方案？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-12T11:24:09.750

```
// your form type
class myType extends AbstractType
{
   private $name = 'default_name';
   ...
   //builder and so on
   ...
   public function getName(){
       return $this->name;
   }

   public function setName($name){
       $this->name = $name;
   }

   // or alternativ you can set it via constructor (warning this is only a guess)

  public function __constructor($formname)
  {
      $this->name = $formname;
      parent::__construct();
  } 
```

}

```
// you controller

$entity  = new Entity();
$request = $this->getRequest();

$formType = new myType(); 
$formType->setName('foobar');
// or new myType('foobar'); if you set it in the constructor

$form    = $this->createForm($formtype, $entity); 
```

现在您应该能够为您创建的表单的每个实例设置一个不同的 id .. 这应该会导致`<input type="text" id="foobar_field_0" name="foobar[field]" required="required>`等等。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-11T03:53:15.330

我会使用静态来创建名称

```
// your form type

    class myType extends AbstractType
    {
        private static $count = 0;
        private $suffix;
        public function __construct() {
            $this->suffix = self::$count++;
        }
        ...
        public function getName() {
            return 'your_form_'.$this->suffix;
        }
    } 
```

然后，您可以根据需要创建任意数量，而无需每次都设置名称。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-09T11:53:03.037

**编辑：不要那样做！请改为查看：[http ://stackoverflow.com/a/36557060/6268862](http://stackoverflow.com/a/36557060/6268862)**

在 Symfony 3.0 中：

```
class MyCustomFormType extends AbstractType
{
    private $formCount;

    public function __construct()
    {
        $this->formCount = 0;
    }

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        ++$this->formCount;
        // Build your form...
    }

    public function getBlockPrefix()
    {
        return parent::getBlockPrefix().'_'.$this->formCount;
    }
} 
```

现在页面上表单的第一个实例将使用“my_custom_form_0”作为其名称（字段名称和 ID 相同），第二个实例将使用“my_custom_form_1”，...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-13T10:25:25.503

创建一个动态名称：

```
const NAME = "your_name";

public function getName()
{
    return self::NAME . '_' . uniqid();
} 
```

你的名字总是单身

# mysql - 为列分配多个索引的好处

> ID：10561425
> 
> 赞同：0
> 
> 时间：2012-05-12T05:52:20.437
> 
> 标签：mysql, sql, database-schema

我正在检查 wordpress 架构，我观察到了这一点：

![你好我很高兴见到你](../Images/db87d17c76e8efd4f97adbd930628ac1.png)

为什么`term_taxonomy_id`指定为主键和索引？它有什么好处吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T05:57:02.823

主索引是`object_id`和`term_taxonomy_id`（也是二级索引）的组合。

数据库模式设计者定义主要（和次要）索引，以期望查询（或更新）该数据库的常见 SQL 请求。

出于性能原因，定义好的索引实际上是最重要的。

因此，可能预期许多查询将类似于`SELECT` *some* `WHERE object_id=` *-constant* `AND term_taxonomy_id=` *some-other-constant*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T06:33:40.883

如果 PRIMARY 索引是主键，这将强制表中只能有 object_id 和 term_taxonomy_id 的一种组合。由于 object_id 首先出现，引用 object_id 的查询将使用索引结构非常快速地查询值。如果查询不引用任何其他字段，他们甚至不必查看表数据，因为数据都在索引中。

但是，如果 term_taxonomy_id 用于查询，则必须扫描整个索引才能找到行。在 term_taxonomy_id 上有一个索引将使这些查询运行得非常快。

# python - Plone 4.1 联系人的任何插件

> ID：10561426
> 
> 赞同：0
> 
> 时间：2012-05-12T05:52:22.900
> 
> 标签：python, plone

嗨，我已经尝试过 UpfrontContacts，collective.contacts 无法构建 zope.conf。Plone ie 4.1 的版本有吗？请让我知道实施相同的确切步骤。还尝试过膜。但是不知道怎么用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T06:38:11.240

Products.PressRoom 就是答案 yahooo！:)

# salesforce - 在 VF 页面上获取视图

> ID：10561432
> 
> 赞同：0
> 
> 时间：2012-05-12T05:54:34.400
> 
> 标签：salesforce, apex-code

我想在自定义 VF 页面上获取对象视图。

例如：当我们在salesforce 中单击一个对象时，我们会得到一个视图，我希望该视图出现在我创建的VF 页面上。

谁能帮我解决这个问题。如果可能的话，请提供给我顶点代码

谢谢阿努

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T03:58:19.030

该视图称为详细信息页面。事实上，有一个名为[apex:detail](http://www.salesforce.com/us/developer/docs/pages/Content/pages_compref_detail.htm)的 visualforce 组件可以完全满足您的需求。

# php - PHP socket_read 返回空字符串

> ID：10561436
> 
> 赞同：0
> 
> 时间：2012-05-12T05:55:16.187
> 
> 标签：php, sockets

我为 websocket 客户端编写了一个 PHP 类，它允许您从 PHP 连接到 websocket 服务器。它工作得很好，只是它只能在无限循环中读取数据。在 websocket 连接中，服务器或客户端可以随时发送数据，发送次数不限。不幸的是，如果另一个套接字发送了*任何*`socket_select`数据，`socket_read`, 和`socket_recv`不会阻塞-将立即返回，并且将返回一个空字符串。我尝试让进程休眠直到它收到，但这导致它无限期地休眠。收到数据后，有什么方法可以知道套接字上有更多可用数据吗？*`socket_select``socket_read``socket_recv``SIGPOLL`*

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T05:58:43.587

PHP is not a good language to go forth with this as it is not an asynchronous language. I would suggest Node.js or something similar.

I may not know much about PHP and websockets, but couldn't you just loop it until you hit `SIGPOLL`?*

# vb.net - 在数据绑定数据网格视图中使用组合框

> ID：10561437
> 
> 赞同：1
> 
> 时间：2012-05-12T05:55:16.177
> 
> 标签：vb.net, datagridview, combobox, databound

在 vb.net 中寻找数据绑定数据网格视图的示例。每行都需要一个带有组合框的单元格，该组合框从访问数据库接收其数据。用户应该能够从组合框中做出选择并更改数据。数据是具体的，多项选择总是相同的。这应该是一个简单、常见的情况，但没有找到任何样本。我知道如何使用文本样式单元格将 datagridview 与数据库绑定，但插入组合框似乎很复杂。

# mysql - 未找到记录时返回零

> ID：10561440
> 
> 赞同：2
> 
> 时间：2012-05-12T05:56:13.947
> 
> 标签：mysql, sql, jsp, servlets

我正在制作一个表格生成器作为学校项目。在 MySQL 中，我有 3 个表，即进程、操作、分数。一切看起来都很好，直到我在网络应用程序中测试了我的“添加列”按钮。以前保存的数据应该被正确读取但也包括格式中的新列，问题是以前查询的数据不包含新表的任何值，所以我打算如果没有找到记录它返回0分，试过了IFNULL & COALESCE 但什么也没发生（也许我只是用错了）

*   进程 - 进程 ID、进程名称
*   操作 - 操作 ID、操作名称
*   score - scoreID, score, processID, operationID, scoreType (score types are SELF,GL,FINAL)

    ps = (PreparedStatement)dbconn.prepareStatement("SELECT score FROM score WHERE processID=? and operationID=? and type=?ORDER BY processid");

这是一个小样本的图片[http://i50.tinypic.com/2yv3rf9.jpg](http://i50.tinypic.com/2yv3rf9.jpg)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T06:00:11.903

`IFNULL`不起作用的原因是它只对值有影响。没有行的结果集没有值，所以它什么也不做。

首先，在客户端执行此操作可能比在服务器上执行此操作要好。但是，如果您必须在服务器上执行此操作，我可以想到几种方法。

试试这个：

```
SELECT IFNULL(SUM(score), 0) AS score
FROM score
WHERE processID=? and operationID=? and type=?
ORDER BY processid 
```

确保将`SUM`返回恰好一行。

如果您需要在表包含多个匹配行时返回多行，那么您可以使用它（为简单起见省略 ORDER BY）：

```
SELECT score
FROM score
WHERE processID = ? and operationID = ? and type = ?

UNION ALL

SELECT 0
FROM (SELECT 0) T1
WHERE NOT EXISTS
(
    SELECT *
    FROM score
    WHERE processID = ? and operationID = ? and type = ?
) 
```

# android - 自定义 ListView 中的滚动滞后

> ID：10561446
> 
> 赞同：0
> 
> 时间：2012-05-12T05:57:11.730
> 
> 标签：android, listview

我一直在使用包含 1 个 imageView 和 3 个 textViews 的自定义 listView。图像是从 url 加载的，因此会减慢我的滚动速度。感谢任何帮助..

```
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub

    if (convertView == null) {

        LayoutInflater inflater = (LayoutInflater) LayoutInflater
                .from(context);
        convertView = inflater.inflate(R.layout.customvenue, parent, false);

    }

     Bitmap bitmap = null;
     try {
     bitmap = BitmapFactory.decodeStream((InputStream) new URL(
     VenueArray.get(position).get("VenueImage"))
     .getContent());

     } catch (MalformedURLException e) {
     // TODO Auto-generated catch block
     e.printStackTrace();
     } catch (IOException e) {
     // TODO Auto-generated catch block
     e.printStackTrace();
     }

     iconImage.setImageBitmap(bitmap);

    return convertView;
} 
```

这里 VenueArray 是包含所有数据的哈希映射数组

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T06:05:26.650

add this class, it will help you out, works like a charm for me

```
public class ImageLoader {

MemoryCache memoryCache = new MemoryCache();
FileCache fileCache;
private Map<ImageView, String> imageViews = Collections
        .synchronizedMap(new WeakHashMap<ImageView, String>());
private ProgressBar indicator;

public ImageLoader(Context context) {

    photoLoaderThread.setPriority(Thread.NORM_PRIORITY - 1);
    fileCache = new FileCache(context);
}

public void DisplayImage(String url, Context activity, ImageView imageView,
        ProgressBar pbar) {

    imageViews.put(imageView, url);
    Bitmap bitmap = memoryCache.get(url);

    if (bitmap != null) {
        this.indicator = pbar;
        indicator.setVisibility(View.INVISIBLE);
    //  imageView.setImageBitmap(getRoundedCornerBitmap(bitmap,13));
        imageView.setImageBitmap(bitmap);
    } else {
        this.indicator = pbar;
        indicator.setVisibility(View.INVISIBLE);
        queuePhoto(url, activity, imageView);
        imageView.setImageBitmap(null);
    }
}

private void queuePhoto(String url, Context activity, ImageView imageView) {
    // This ImageView may be used for other images before. So there may be
    // some old tasks in the queue. We need to discard them.
    photosQueue.Clean(imageView);
    PhotoToLoad p = new PhotoToLoad(url, imageView);
    synchronized (photosQueue.photosToLoad) {
        photosQueue.photosToLoad.push(p);
        photosQueue.photosToLoad.notifyAll();
    }

    // start thread if it's not started yet
    if (photoLoaderThread.getState() == Thread.State.NEW)
        photoLoaderThread.start();
}

private Bitmap getBitmap(String url) {
    File f = fileCache.getFile(url);

    // from SD cache
    Bitmap b = decodeFile(f);
    if (b != null)
        return b;

    // from web
    try {
        Bitmap bitmap = null;
        URL imageUrl = new URL(url);
        HttpURLConnection conn = (HttpURLConnection) imageUrl
                .openConnection();
        conn.setConnectTimeout(30000);
        conn.setReadTimeout(30000);
        InputStream is = conn.getInputStream();
        OutputStream os = new FileOutputStream(f);
        Utils.CopyStream(is, os);
        os.close();
        bitmap = decodeFile(f);
        return bitmap;
    } catch (Exception ex) {
        ex.printStackTrace();
        return null;
    }
}

// decodes image and scales it to reduce memory consumption
private Bitmap decodeFile(File f) {
    try {
        // decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f), null, o);

        // Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE = 70;
        int width_tmp = o.outWidth, height_tmp = o.outHeight;
        int scale = 1;
        while (true) {
            if (width_tmp / 2 < REQUIRED_SIZE
                    || height_tmp / 2 < REQUIRED_SIZE)
                break;
            width_tmp /= 2;
            height_tmp /= 2;
            scale *= 2;
        }

        // decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {
    }
    return null;
}

// Task for the queue
private class PhotoToLoad {
    public String url;
    public ImageView imageView;

    public PhotoToLoad(String u, ImageView i) {
        url = u;
        imageView = i;
    }
}

PhotosQueue photosQueue = new PhotosQueue();

public void stopThread() {
    photoLoaderThread.interrupt();
}

// stores list of photos to download
class PhotosQueue {
    private Stack<PhotoToLoad> photosToLoad = new Stack<PhotoToLoad>();

    // removes all instances of this ImageView
    public void Clean(ImageView image) {
        for (int j = 0; j < photosToLoad.size();) {
            if (photosToLoad.get(j).imageView == image)
                photosToLoad.remove(j);
            else
                ++j;
        }
    }
}

class PhotosLoader extends Thread {
    public void run() {
        try {
            while (true) {
                // thread waits until there are any images to load in the
                // queue
                if (photosQueue.photosToLoad.size() == 0)
                    synchronized (photosQueue.photosToLoad) {
                        photosQueue.photosToLoad.wait();
                    }
                if (photosQueue.photosToLoad.size() != 0) {
                    PhotoToLoad photoToLoad;
                    synchronized (photosQueue.photosToLoad) {
                        photoToLoad = photosQueue.photosToLoad.pop();
                    }
                    Bitmap bmp = getBitmap(photoToLoad.url);
                    memoryCache.put(photoToLoad.url, bmp);
                    String tag = imageViews.get(photoToLoad.imageView);
                    if (tag != null && tag.equals(photoToLoad.url)) {

                        //System.out.println("indicator ::" + indicator);

                        BitmapDisplayer bd = new BitmapDisplayer(bmp,
                                photoToLoad.imageView, indicator);
                        Activity a = (Activity) photoToLoad.imageView
                                .getContext();
                        a.runOnUiThread(bd);
                    }
                }
                if (Thread.interrupted())
                    break;
            }
        } catch (InterruptedException e) {
            // allow thread to exit
        }
    }
}

PhotosLoader photoLoaderThread = new PhotosLoader();

// Used to display bitmap in the UI thread
class BitmapDisplayer implements Runnable {
    Bitmap bitmap;
    ImageView imageView;

    // private ProgressBar indicator1;

    public BitmapDisplayer(Bitmap b, ImageView i, ProgressBar indicator) {
        this.bitmap = b;
        this.imageView = i;
        // this.indicator1 = indicator;
    }

    public void run() {
        if (bitmap != null) {

            imageView.setImageBitmap(bitmap);

    }
}

public void clearCache() {
    memoryCache.clear();
    fileCache.clear();
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T08:51:09.743

[使用 Universal Image Downloader](https://github.com/nostra13/Android-Universal-Image-Loader)显示图像。

它对我来说很好，希望对你有用......！

# java - 撤消设置失败的错误

> ID：10561447
> 
> 赞同：1
> 
> 时间：2012-05-12T05:57:23.883
> 
> 标签：java, snmp, snmp4j

我使用 SNMP4J 并尝试设置一些值。

```
 Variable var = OctetString.fromHexString(v);
        VariableBinding varBind = new VariableBinding(new OID(o),var);
        pdu.add(varBind);
        pdu.setRequestID(new Integer32(1));
        pdu.setType(PDU.SET);
        Snmp snmp = new Snmp(transport);
        ResponseEvent response = snmp.set(pdu, comtarget);
        if (response != null){
            PDU responsePDU = response.getResponse();
            if (responsePDU != null){
                int errorStatus = responsePDU.getErrorStatus();
                String errorStatusText = responsePDU.getErrorStatusText();
                if (errorStatus == PDU.noError) return responsePDU.get(0).getVariable().toString();
                else return errorStatusText;
            }else return "No response";
        }else return null; 
```

它工作正常，但有时我得到错误`Undo failed`
有人知道这个错误的原因是什么，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T03:08:10.417

错误代码`Undo Failed`意味着

1.  您试图在单个请求中设置多个变量
2.  一组尝试失败
3.  在尝试回滚整个操作（即撤消已完成的更改）时，*另一个*错误阻止了完成撤消

这本质上是在告诉您它不知道原始设置操作完成了多少，并且事情可能会处于不一致的状态。我对 SNMP 错误报告详细信息知之甚少，无法知道响应是否包含描述早期问题的其他错误代码。

顺便说一句，使用 Google 查找此信息需要 20 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T01:53:40.627

您修复的希望很小，就像您深入研究 RFC 文档一样，

[http://www.ietf.org/rfc/rfc1448.txt](http://www.ietf.org/rfc/rfc1448.txt)

在第 25 页，记录了 undoFailed 的原因。

严格来说这是由 SNMP 代理引起的，只有它的供应商才能告诉如何避免它。

# ruby-on-rails - Rails 3.2 Engine 我如何在数据库中保存会话？

> ID：10561449
> 
> 赞同：2
> 
> 时间：2012-05-12T05:57:26.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-engines, session-storage

我有一个 Rails 引擎代码。但是 Rails::Engine 没有 config.session_store 变量。

```
module Admin
  class Engine < ::Rails::Engine
    isolate_namespace Admin

    config.autoload_paths << File.expand_path("../..", __FILE__)
    config.session_store :active_record_store

    config.generators do |g|
      g.javascript_engine :coffee
      g.stylesheet_engine :less
      g.template_engine :haml
      g.test_framework :rspec, :view_specs => false
    end
  end
end 
```

我如何使用数据库会话存储？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T04:24:25.043

解决方案：

```
module Admin
 class Engine < ::Rails::Engine
   isolate_namespace Admin

    config.autoload_paths << File.expand_path("../..", __FILE__)
    config.generators do |g|
      g.javascript_engine :coffee
      g.stylesheet_engine :less
      g.template_engine :haml
      g.test_framework :rspec, :view_specs => false
    end

    initializer "Admin.add_middleware" do |app|
      ActiveRecord::SessionStore::Session.table_name = 'admin_sessions'
      app.middleware.use ActiveRecord::SessionStore
    end
  end
end 
```

# android - Optimizing Google Maps performance for Mobile?

> ID：10561450
> 
> 赞同：2
> 
> 时间：2012-05-12T05:57:30.657
> 
> 标签：android, mobile, maps

I'm currently developing a mobile application using html5 + phonegap, and everything is working well.. The only issue I'm having is that scrolling through a google map on a phonegap made native app it's sluggish and slow, zooming on the map is quite slow as well. Is there any way to increase map rendering speed / tile loading?

Any help in speeding up map loading is greatly appreciated!

# javascript - Is it possible to set width of a jQGrid in percentage?

> ID：10561452
> 
> 赞同：14
> 
> 时间：2012-05-12T05:57:53.363
> 
> 标签：javascript, jqgrid, jqgrid-asp.net

Is it possible to set width of a jQGrid in percentage? If yes, then how?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-12T23:44:52.747

不是直接的，但有可能...

如果您想将整个网格的宽度设置为百分比，您可以使用 autowidth 属性，它会将网格宽度设置为其父元素（即 DIV）的宽度，并且该父元素可以设置百分比。

```
autowidth: true 
```

如果您想按百分比设置列宽，您可以使用 shrinktofit，然后您的列宽值基本上是一个百分比。

```
shrinkToFit: true 
```

这些选项和许多其他选项可以在 JQGrid [wiki上找到](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-03T19:51:49.947

可以通过非常简单的方式：

```
$(document).ready(function(){
var pageWidth = $("#updatesList").parent().width() - 100;
$("#updatesList").jqGrid({
    url:'quick_updates.php?action=loadUpdates'+"&request=ajax",
    datatype: "json",
    colNames:[table_heading_id, table_heading_products, table_heading_categories, table_heading_model, table_heading_availability, table_heading_weight, table_heading_quantity, table_heading_sortorder, table_heading_manufacturers, table_heading_price, table_heading_tax],
    colModel:[
        {name:'id',index:'id', width:(pageWidth*(5/100)), sortable:true, align:"center", search:true},
        {name:'name',index:'name', width:(pageWidth*(20/100)), sortable:true, align:"left",true:false,resizable:true},
        {name:'categories',index:'categories', width:(pageWidth*(10/100)), sortable:true, align:"left",resizable:true,search:true,stype:"select",searchoptions:{value:categories}},
        {name:'model',index:'model', width:(pageWidth*(10/100)), sortable:false, align:"left",search:true,resizable:true,editable:true},
        {name:'availability',index:'availability', width:(pageWidth*(10/100)), sortable:true, align:"left",resizable:true,search:true,stype:"select",searchoptions:{value:availability},editable:true,edittype:"select",editoptions:{value:availability}},
        {name:'weight',index:'weight', width:(pageWidth*(5/100)), sortable:true, align:"center",search:false,editable:true},
        {name:'quantity',index:'quantity', width:(pageWidth*(5/100)), sortable:true, align:"center",search:false,editable:true},
        {name:'sortorder',index:'sortorder', width:(pageWidth*(5/100)), sortable:true, align:"center",search:false,editable:true},
        {name:'manufacturers',index:'manufacturers', width:(pageWidth*(10/100)), sortable:true, align:"left",resizable:true,search:true,stype:"select",searchoptions:{value:manufacturers},editable:true,edittype:"select",editoptions:{value:manufacturers}},
        {name:'price',index:'price', width:(pageWidth*(10/100)), sortable:false, align:"center",search:false},
        {name:'tax',index:'tax', width:(pageWidth*(10/100)), sortable:true, align:"center",resizable:true,search:true,stype:"select",searchoptions:{value:taxes},editable:true,edittype:"select",editoptions:{value:taxes}}
    ],
    rowNum:50,
    rowList:[10,20,30,50,100], 
```

看看这段代码：

```
var pageWidth = $("#updatesList").parent().width() - 100; 
```

这个代码：

```
{name:'id',index:'id', width:(pageWidth*(5/100)), sortable:true, align:"center", search:true},
        {name:'name',index:'name', width:(pageWidth*(20/100)), 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-13T07:55:25.500

Datatables 3.5+ 通过

```
 jQuery("#dt").jqGrid({
                autowidth: true,
                shrinkToFit: true
            }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-11T07:48:48.463

至于我，我认为这是最好的决定：

```
// add this after JqGrid creation
$("#YourTableGrid").setGridWidth( Math.round($(window).width(), true) ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-23T20:53:50.963

在 jquery 中检查窗口大小。

```
$(window).on("resize", function () {
        var newWidth = $("#list").closest(".ui-jqgrid").parent().width();
        $("#list").jqGrid("setGridWidth", newWidth, true);
}); 
```

确保在网格属性中设置 autowidth: true

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-05T16:27:49.993

`$(document).ready(function () { var yourPercentage = 50%; $("#jQGridDemo").setGridWidth($("#jQGridDemo").parent().width() * yourPercentage/100); });`

在 jqGrid 的父包装器的引用中计算的百分比。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-07T06:12:59.447

```
 var operationfieldwidth = 40
    function getPercentage(ask)
    {
        return ((screen.width - operationfieldwidth) * ask) / 100;
    }

    $(document).ready(function ($) {
        GridBind();
    });
    function GridBind() {
        $("#jqGrid").jqGrid({
            url: '@(Url.Action("BindRole", "Role"))',
            datatype: 'json',
            mtype: 'Get',
            colNames: ["Role Name", "Role Description", ""],
            colModel: [{ name: 'ActRoleName', index: 'RoleName', width: getPercentage(20), align: 'left', power: 3, sortable: true },
                       { name: 'ADRoleName', index: 'RoleDesc', width: getPercentage(80), align: 'left', power: 6, sortable: true },
                       { name: 'add', sortable: false, width: operationfieldwidth, search: false, power: 0, formatter: addLink }
            ],
            pager: jQuery('#jqControls'),
            iconSet: "fontAwesome",
            rowNum: 25,
            rowList: [25, 50, 100, 500, 1000],
            height: screen.height - 490,
            viewrecords: true,
            emptyrecords: 'No Records are Available to Display',
            jsonReader: {
                root: "rows",
                page: "page",
                total: "total",
                records: "records",
                repeatitems: false,
                Id: "0"
            },
            autowidth: true,
            multiselect: false,
        }).navGrid('#jqControls', {
            edit: false, add: false, del: false, search: true,
            searchtext: "Search", refresh: true
        }, {}, {}, {},
       {
           zIndex: 100,
           caption: "Search Record",
           sopt: ['cn'],
           closeAfterSearch: true
       });
    }
    function addLink(cellvalue, options, rowObject) {
        var Str = "<a class='fa fa-pencil-square-o fa-2x' style='cursor:pointer;' href='../../Role/AddEditRole?id=" + rowObject.ID + "'></a>"
        return Str;
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-30T00:14:33.417

如果您尝试在 HTML 页面上设置 jqgrid 表格的宽度，请尝试此操作。

**HTML**

```
<table id="jqGrid" width="98%"></table> 
```

**JS**

```
var outerwidth = $("#jqGrid").width();

$("#jqGrid").jqGrid({
   width: outerwidth
}); 
```

# android - Paypal Authorization & Capture API For Android

> ID：10561457
> 
> 赞同：0
> 
> 时间：2012-05-12T05:59:11.913
> 
> 标签：android, paypal

I want to use the Paypal Authorization & Capture API inside Android. I have found [a way to integrate it in a website](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/howto_admin_authcapture), but is there any way to integrate the same thing in an Android app?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T06:42:10.307

[https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index)

在这里你可以找到 sdk 和 android 和其他的例子

# ios - iOS Memory Leak cellForRowAtIndexPath

> ID：10561458
> 
> 赞同：0
> 
> 时间：2012-05-12T05:59:17.137
> 
> 标签：ios, memory-leaks, uitableview

The leak instrument points to "cell.textLabel.text = str;" as a memory leak. I am not sure why since I autoreleased the cells.

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *MyIdentifier = @"MyIdentifier";

// Try to retrieve from the table view a now-unused cell with the given identifier.
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];

// If no cell is available, create a new one using the given identifier.
if (cell == nil) {
    // Use the default cell style.
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyIdentifier] autorelease];
}

// Set up the cell.
NSString *str = [array objectAtIndex:indexPath.row];
cell.textLabel.text = str;

return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T06:07:26.853

you might not have released the array object that you use for getting the Strings.Also , try casting the value after extracting from array as

```
 str= [NSString stringWithFormat:"%@",(NSString *)[array objectAtIndex:indexPath.row]]; 
```

# jsf - primefaces 3.2 datatable incell editing not working

> ID：10561460
> 
> 赞同：3
> 
> 时间：2012-05-12T05:59:19.170
> 
> 标签：jsf, primefaces

I have a datatable with incell editing which displays the records correctly but when I try to edit a row, the change is not reflected. Following is the xhtml code:

```
 <p:cellEditor>
            <f:facet name="output">
                <h:outputText value="#{scrip.companyName}"/> 
            </f:facet>
           <f:facet name="input">
               <p:inputText value="#{scrip.companyName}"/> 
            </f:facet>
            </p:cellEditor>
        </p:column>
            <p:column headerText="Exchange">
            <p:cellEditor>
            <f:facet name="output">
              <h:outputText value="#{scrip.exchange}"/> 
            </f:facet>
                <f:facet name="input">
            <p:selectOneMenu style="width: 150px" value="#{manageScrip.exchange}">
                <f:selectItem itemLabel="nse" itemValue="nse"/>
                <f:selectItem itemLabel="bse" itemValue="bse"/>                        
            </p:selectOneMenu>
                    </f:facet>
       </p:cellEditor>
        </p:column>
            <p:column headerText="Brokerage Charge">
            <p:cellEditor>
            <f:facet name="output">
           <h:outputText value="#{scrip.brokerageCharge}"/> 
            </f:facet>
           <f:facet name="input">
           <p:inputText value="#{scrip.brokerageCharge}"/> 
            </f:facet>
       </p:cellEditor>
        </p:column>

            <p:column headerText="Options">
                <p:rowEditor/>

        </p:column>

    </p:dataTable>

    </h:form>
</h:body> 
```

Following is the managed bean function:

```
public void updateScrip()
{
    try{
        Integer i=(Integer)dt.getRowKey();
        String str=i.toString();
        sc=(ScripMaster) dt.getRowData(str);

        scripSymbol=sc.getScripSymbol();
        exchange=sc.getExchange();
        companyName=sc.getCompanyName();

        updateScrip(i, scripSymbol, companyName, exchange,);

      }catch(Exception ex){

        }
} 
```

Alternatively I also tried:

```
public void updateScrip(RowEditEvent e)
{
    try{
        sc=(ScripMaster) e.getObject();
        scripSymbol=sc.getScripSymbol();
        exchange=sc.getExchange();
        companyName=sc.getCompanyName();
        Integer i=sc.getScripID();
        updateScrip(i, scripSymbol, companyName, exchange);
        }catch(Exception ex){
        }
} 
```

* * *

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html" 
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Facelet Title</title>
</h:head>
<h:body> 
    <h:form id="frm">
        <p:commandLink action="/adminpages/addScrip" value="add scrip" ajax="false"/>
        <p:dataTable editable="true" var="scrip" value="#{manageScrip.scripList}" binding="#{manageScrip.dt}" rowKey="#{scrip.scripID}" id="dt">
            <p:ajax event="rowEdit" listener="#{manageScrip.updateScrip}" update="@this"/>
            <p:column headerText="Scrip Symbol">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{scrip.scripSymbol}"/>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{scrip.scripSymbol}"/>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Company Name">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{scrip.companyName}"/> 
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{scrip.companyName}"/> 
                    </f:facet>
                </p:cellEditor>
            </p:column>
            <p:column headerText="Exchange">
                <p:cellEditor>
                   <f:facet name="output">
                      <h:outputText value="#{scrip.exchange}"/> 
                   </f:facet>
                   <f:facet name="input">
                       <p:selectOneMenu style="width: 150px" value="#{manageScrip.exchange}">
                           <f:selectItem itemLabel="nse" itemValue="nse"/>
                          <f:selectItem itemLabel="bse" itemValue="bse"/>                        
                       </p:selectOneMenu>
                   </f:facet>
                </p:cellEditor>
            </p:column>
            <p:column headerText="Brokerage Charge">
               <p:cellEditor>
                   <f:facet name="output">
                       <h:outputText value="#{scrip.brokerageCharge}"/> 
                   </f:facet>
                   <f:facet name="input">
                       <p:inputText value="#{scrip.brokerageCharge}"/> 
                   </f:facet>
               </p:cellEditor>
            </p:column>

            <p:column headerText="Options">
                <p:rowEditor/>
            </p:column>
        </p:dataTable>
    </h:form>
</h:body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T14:45:13.140

最重要的部分是缺少数据表标签。

确保“可编辑”属性设置为 true。我认为这个属性是在 3.2 版中发明的，这使得许多 onld 数据表不可编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:38:52.217

尝试使用`h:inputText`而不是`p:inputText`.

# php - 如何使用 get_user_meta() 从数组中获取数据

> ID：10561461
> 
> 赞同：2
> 
> 时间：2012-05-12T05:59:22.540
> 
> 标签：php, wordpress

我创建了一个自定义用户配置文件字段

```
<?php $basics = get_the_author_meta( 'fbasics', $user->ID ); ?>
    <ul>
        <li><input value="lesson1" name="fbasics[]" <?php if (is_array($basics)) { if (in_array("lesson1", $basics)) { ?>checked="checked"<?php } }?> type="checkbox" /> <?php _e('Lesson 1', 'gprofile'); ?></li>
        <li><input value="lesson2" name="fbasics[]" <?php if (is_array($basics)) { if (in_array("lesson2", $basics)) { ?>checked="checked"<?php } }?> type="checkbox" /> <?php _e('Lesson 2', 'gprofile'); ?></li>
    </ul> 
```

我现在需要使用wordpress前端的数据来显示信息。我想我需要使用 get_user_meta() 函数，但我不明白如何使用 is 来获取数组的值。

如何使用 get_user_meta() 从数组中获取数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T06:35:23.673

```
$basics = get_user_meta($user->id,'fbasics',true); 
```

如果它也不起作用，则将 true 更改为 false，这样您将获得完整的用户元数据并`var_dump($basics)`检查“fbasics”是否真的存在

# excel - Remove newline while writing to text

> ID：10561464
> 
> 赞同：1
> 
> 时间：2012-05-12T06:00:01.513
> 
> 标签：excel, openoffice-calc, openoffice-basic

This simple macro will write the text "ABC" to the file temp.txt under E: drive. However if we open the text file, notice that there is a new line char after C. How can we get rid of this, so that it will end after C

Code:

```
Sub ExamplePrint
i = FreeFile()
Open "e:\Temp.txt" For Output As i
Print #i, "ABC"
Close #i
end Sub 
```

In vba if we give like this, the newline doesnt come. however in openoffice the whole text document comes as empty

Code:

```
Print #i, "ABC"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:27:45.653

试试 FileSystemObject：

[http://msdn.microsoft.com/en-us/library/6ee7s9w2%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/6ee7s9w2%28v=vs.85%29.aspx)

# asp.net - 将动态值添加到字符串的二维数组

> ID：10561471
> 
> 赞同：2
> 
> 时间：2012-05-12T06:01:07.950
> 
> 标签：asp.net, arrays, multidimensional-array

我有一个二维字符串数组，我需要根据某些条件将项目添加到该数组中。

```
Dim mainColumnsSummary(,) As String
mainColumnsSummary = { _
                     {"slNo", "#", "Number", "30", True, ""}, _
                     {"assessmentDate", "Assessment Date", "DateTime", "100", True, ""}, _
                     {"assetDescription", "Description and function of asset", "String", "100", True, ""}, _
                     {"assetScope", "Scope of assessment", "String", "100", True, ""}, _
                     {"assetHazards", "Hazard identification", "String", "100", True, ""} _
                  } if dtTable.rows.count>0 then
   ' I need to add dtTable.rows(x)("Question") to this array. where x should take values from 0 to dtTable.row.count-1 
```

我怎样才能得到这个结果。请帮助我编写 vb.net 中的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:08:34.400

.NET 数组是具有固定长度的数据结构。创建后， .Length 属性会告诉您数组中有多少元素，并且长度是恒定的。您不能添加到数组。

您需要查看 System.Collections.Generic.List(Of T)。

我的VB不是很好，但试试这样的：

```
Dim mainColumnsSummary As New List(Of String())

mainColumnsSummary.Add({"slNo", "#", "Number", "30", True, ""}) 
```

然后，您应该能够根据需要向此列表添加任意数量的“行”。

# facebook - Facebook asking about "Privacy Policy URL"

> ID：10561472
> 
> 赞同：1
> 
> 时间：2012-05-12T06:01:19.343
> 
> 标签：facebook

Help!

I can't seem to find the "privacy policy field" upon logging to developers facebook.

When I click on the URL they sent (http://developers.facebook.com/apps/XXXXXXXXXX/auth) and logged in with our admin account, it doesn't show "basic" setup, where I could find the "privacy policy field".

How can update the "privacy policy field"?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T06:31:53.363

您将在下面找到隐私政策 URL`Edit Settings -> Auth Dialog`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T06:47:08.993

正如@Yan 所说，您可以在 Auth Dialog 和 Advanced Settings/Contact Info 中找到它。

# javascript - Any way to know if user has touchscreen?

> ID：10561475
> 
> 赞同：2
> 
> 时间：2012-05-12T06:02:57.107
> 
> 标签：javascript, html, css

> **Possible Duplicate:**
> [What's the best way to detect a 'touch screen' device using JavaScript?](https://stackoverflow.com/questions/4817029/whats-the-best-way-to-detect-a-touch-screen-device-using-javascript)

I want to apply a different styling to an element if the user is using a browser on a touchscreen device. Is there any way to know?

# php - 为什么我不能多次打开命名管道？

> ID：10561480
> 
> 赞同：2
> 
> 时间：2012-05-12T06:04:09.790
> 
> 标签：php, windows, named-pipes

我似乎无法从 PHP 多次打开 Windows 命名管道：

```
$pipe1 = fopen($pipeName, 'r+');  // (1)
fclose($pipe1);
$pipe2 = fopen($pipeName, 'r+');  // (2)
fclose($pipe2); 
```

**(1) 成功**，我可以写入管道或在其上打开阻塞读取。

**( **2) 失败****

 **> fopen(\\.\pipe\encoding)：打开流失败：参数无效

“无效参数”似乎是指*mode*，但我已经尝试了 (1) 和 (2) 之间所有不同的模式组合，没有任何区别。无论是在同一个进程还是另一个进程中，它也会失败。

我正在创建管道：

```
CreateNamedPipe("\\\\.\\pipe\\encoding", 3, 0, 5, 512, 512, 0, 0); 
```

其中“3”使其成为读/写管道，“5”是可以创建的最大实例数。我也为[CreateNamedPipe](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365150%28v=vs.85%29.aspx)尝试了不同的参数组合，但无济于事。

Windows 命名管道有什么特别之处吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T17:07:56.303

“服务器进程必须调用 DisconnectNamedPipe 以断开管道句柄与其先前客户端的连接，然后才能使用 ConnectNamedPipe 函数将句柄连接到另一个客户端。”**

# java - 如何获取默认的日期和时间格式模式

> ID：10561481
> 
> 赞同：8
> 
> 时间：2012-05-12T06:04:17.547
> 
> 标签：java, android

有人可以告诉我如何获取指定语言环境（或默认语言环境）的默认日期和时间格式模式（字符串）。

我已经找到的（可能对其他人有用）：

1.  如何获取默认语言环境。

    ```
    Locale currentLocale= Locale.getDefault();
    System.out.print(currentLocale.toString());

    Result is "en_US" 
    ```

2.  如何获得小数点分隔符。

    ```
    DecimalFormatSymbols decimalFormatSymbols =
                                         new DecimalFormatSymbols(currentLocale);
    System.out.print(decimalFormatSymbols.getDecimalSeparator());

    Result is "." 
    ```

3.  如何获取默认的日期和时间格式模式（字符串）；

    ```
    (do something)
    System.out.print(something);
    And got at output something like this: "dd/mm/yyyy" or "hh:mm:ss".. 
                                 or other values for specified locale. 
    ```

非常感谢。

**UPD：** 找到解决方案：

```
SimpleDateFormat simpleDateFormat = new SimpleDateFormat();
String dateLocalizedFormatPattern = simpleDateFormat.toLocalizedPattern();

The result of System.out.print(dateLocalizedFormatPattern) 
                                             on my device is "M/d/yy h:mm a". 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T06:21:03.023

**更新**

正如俄罗斯熊在他对问题的更新中提到的那样，有一种`toLocalizedPattern()`方法`SimpleDateFormat`可以返回格式字符串。

**原始答案**

`SimpleDateFormat`在其私有构造函数中使用以下代码：

```
...
ResourceBundle r = LocaleData.getDateFormatData(loc);
if (!isGregorianCalendar()) {
    try {
        dateTimePatterns = r.getStringArray(getCalendarName() + ".DateTimePatterns");
    } catch (MissingResourceException e) {
    }
}
if (dateTimePatterns == null) {
    dateTimePatterns = r.getStringArray("DateTimePatterns");
}
... 
```

所以实际的格式字符串似乎是`ResourceBundle`通过`LocaleData.getDateFormatData()`方法访问的。

不幸的是，`LocaleData`该类是内部`sun.util.resources`包的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T06:15:52.313

我想你想要的是使用这个`DateFormat`类。查看[`getDateInstance(int, Locale)`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#getDateInstance%28int,%20java.util.Locale%29)方法。

# iphone - UIActionsheet with UIDatePicker

> ID：10561482
> 
> 赞同：0
> 
> 时间：2012-05-12T06:05:21.810
> 
> 标签：iphone, uidatepicker, uiactionsheet

I have placed UIDatePicker into UIActionSheet. In Landscape mode when click the down arrow button (image 1) the Actionsheet appears but the Set Date field is hidden. Will Apple reject my app for this behaviour?

![image 1](../Images/85f73ef3e50f0a2559ea6d779e7742d5.png)

![image 2](../Images/bcb1a2d9e62d35dc129b8d4cfd97c87c.png)

# qt - 我应该如何在 Qt 中解决这个线程问题？

> ID：10561484
> 
> 赞同：2
> 
> 时间：2012-05-12T06:05:45.197
> 
> 标签：qt, select, qt4

我有一个 GUI 程序，它有一个`QLocalServer`内部，每次从客户端获得连接时，它都会弹出一个对话框，询问用户该怎么做。

但是当同时收到多个连接时，一堆对话框会一起弹出..有没有办法让它们排队？

我尝试使用`QMutex`，但这卡住了整个 GUI 线程。

对此的常见/正确解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T06:18:55.960

只需使用队列数据结构，即将传入连接放入队列数据结构中，然后每当关闭对话框时（例如）检查队列上是否有更多连接；如果是，则处理下一个。当您建立连接并且队列为空时，立即处理它。QMutex 阻塞了 GUI 线程，因为您很可能没有产生任何额外的线程，它实际上是来自 QLocalServer 的回调，而不是通知您入站连接的新线程。

# javascript - 将底部边界的颜色更改为一定范围

> ID：10561486
> 
> 赞同：1
> 
> 时间：2012-05-12T06:06:07.973
> 
> 标签：javascript, jquery

有什么方法可以将 div 底部边界的颜色更改到一定距离或范围（即不完整的底部边界）。我正在使用以下代码，但它会改变整个底部的颜色：

```
style.borderBottom = "2px solid blue"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T06:15:30.877

您可以创建一个额外的元素并使用 css 对其进行样式设置：

[http://jsfiddle.net/UHMeW/](http://jsfiddle.net/UHMeW/)

# c# - System Data Entity. The underlying provider failed on Open

> ID：10561487
> 
> 赞同：0
> 
> 时间：2012-05-12T06:06:28.957
> 
> 标签：c#, web-services, ado.net-entity-data-model

I am creating 2 projects that have the same database (it's an MDF database). The first one is the map editor, and I use XNA 4 and Web Services to connect to it. The second one is the game itself and uses XNA 3.1 and Entity Data Model to connect database.

When I run the map editor and access the database, it runs properly. Bbut when I run the game and access the database, it shows an error "The underlying provider failed on Open"

I think the connection from the web service is not closed yet. But I don't know where I should close the connection.

Here is my code from the web service:

```
public Map AddNewMap(string username, string mapName, int sizeX, int sizeY)
    {
        using (BaseModelDataContext context = new BaseModelDataContext())
        {
            Map newMap = new Map()
            {
                Username = username,
                Name = mapName,
                SizeX = sizeX,
                SizeY = sizeY,
                Upload_Date = DateTime.Now,
                Status = 0
            };

            context.Maps.InsertOnSubmit(newMap);
            context.SubmitChanges(System.Data.Linq.ConflictMode.FailOnFirstConflict);
            context.Dispose();
            return newMap;
        }
    } 
```

EDIT:

Here is the entity data model code :

```
using (MazeEntities ent = new MazeEntities())
        {
            ent.Connection.Open();
            return (from map in ent.Map
                    select map).ToList<Map>();
        } 
```

This code runs properly if I did not use the web service before. If I use the web service first, it shows an error at ent.Connection.Open();

Here is the inner exception:

> Cannot open user default database. Login failed.\r\nLogin failed for user 'erkape-PC\erkape'.

Connection string for web service :

> connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\3DMapDatabase.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True"

Connection string for the game:

> "metadata=res://*/MazeDataModel.csdl|res://*/MazeDataModel.ssdl|res://*/MazeDataModel.msl;provider=System.Data.SqlClient;provider connection string="Data Source=.\SQLEXPRESS;AttachDbFilename=D:\eRKaPe\DropBox\TA\Program\3D_Map_Editor\3DMapEditorServices\App_Data\3DMapDatabase.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True;MultipleActiveResultSets=True"" providerName="System.Data.EntityClient" />

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T12:07:41.067

请查看以下帖子 [http://th2tran.blogspot.ae/2009/06/underlying-provider-failed-on-open.html](http://th2tran.blogspot.ae/2009/06/underlying-provider-failed-on-open.html)

也请在该应用程序的应用程序池中启用 32 位应用程序。

这可能会解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T07:45:20.720

为了快速检查，您可以尝试在使用后添加以下行：

```
 using (BaseModelDataContext context = new BaseModelDataContext())
    {
        context.Connection.Open();

        OR

        context.Database.Connection.Open(); 

        // your code here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T11:22:35.623

在阅读了一些文章后，我终于找到了解决问题的方法。关闭地图编辑器后，来自 Web 服务的连接不会自动关闭。这就是为什么我无法从游戏中访问我的数据库。我必须更改两个应用程序的连接字符串，我将用户实例设置为 False。游戏可以通过这种方式访问​​数据库。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-12T06:39:12.463

您正在尝试返回与上下文关联的对象（地图）。该对象具有无法返回给客户端的上下文信息。

您将需要创建自己的 DataContract（具有必要属性的类型），并希望将其公开给客户端。

或者您可以使用 POCO 实现 如此[处所述](http://www.toplinestrategies.com/dotneters/net/wcf-entity-framework-and-n-tier-solutions-part-2/?lang=en)

# android - Is it possible to start my own app service when user try to enable Bluetooth/WiFi/GPRS/GPS

> ID：10561488
> 
> 赞同：1
> 
> 时间：2012-05-12T06:07:00.243
> 
> 标签：android, android-service

As I am new to Android world i have no idea how to start my app service when the user try to open any of these following.Bluetooth/WiFi/GPRS/GPS etc.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T23:56:50.697

除非您正在修改操作系统，否则您无法做您想做的事情。当用户打开 BT、GPS 或 WiFi 时，Android 没有广播。

您可以注册以[`AlarmManager`](http://developer.android.com/reference/android/app/AlarmManager.html)不时唤醒您并检查您关心的任何这些服务的状态。如果两者都没有启动，您的代码可以再次休眠，直到下一次唤醒，当您重复时。

请注意，您必须小心您希望在闹钟时间方面具有多大的攻击性。您这样做的次数越多，设备电池消耗的速度就越快，用户卸载您的应用程序的可能性就越大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T06:12:54.763

是的，这是可能的。请参阅以下代码：

```
NetworkInfo mobNetInfo = connectivityManager.getNetworkInfo(     ConnectivityManager.TYPE_MOBILE );
    if ( activeNetInfo != null && mobNetInfo != null )
    {
      Toast.makeText( context, "Connected: " + activeNetInfo.getTypeName(), Toast.LENGTH_SHORT ).show();      
      context.startService(new Intent(context,SampleService.class));
} 
```

# javascript - 没有图像的文本翻转效果

> ID：10561493
> 
> 赞同：4
> 
> 时间：2012-05-12T06:07:55.810
> 
> 标签：javascript, jquery, html, css

我的网站顶部有一个电话号码链接，号码是 1300 GO POOPIES。（例如目的：P）

```
<h1 class="phone-text">
<a href="tel:+6113007667437">1300 GO POOPIES</a>
</h1> 
```

所以基本上，当一个人将鼠标放在 1300 GO POOPIES 上时，它会变为 1300 46 7667437。

但是，我不想使用图像，因为我想保留点击通话功能。

我尝试用 CSS 做一些事情，但是收效甚微。

```
.phone-text::after {
  content: "1300 GO POOPIES";
}

.phone-text:hover:after {
  content: "1300 76 67437";
} 
```

不知道这是否超出了css的界限，需要java ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T06:41:34.657

你甚至不需要加载 jQuery 或 JS。仅限 CSS+HTML。 [小提琴](http://jsfiddle.net/shehovn/TZVnE/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T06:24:44.490

如果您有理由避免使用 JavaScript，那么如果您愿意添加一些额外的标记，则可以仅使用 CSS 来实现。为此，您可以在标签内放置两个元素`<a>`，一个带有数字编号，一个带有字母数字编号。然后，您可以使用选择器独立隐藏/显示它们`a:hover`。

**HTML**

```
<h1 class="phone-text">
  <a href="tel:+6113007667437">
    <span class="letters">1300 GO POOPIES</span>
    <span class="digits">1300 76 67437</span>
  </a>
</h1>​ 
```

**CSS**

```
.phone-text a .digits,
.phone-text a:hover .letters {
  display: none;
}

.phone-text a .letters,
.phone-text a:hover .digits {
  display: inline;
} 
```

[**jsFiddle**](http://jsfiddle.net/xuFdA/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T06:28:51.440

你想要一些更深入的东西......来吧。

html

```
<a href="tel:+6113007667437">
  <div id="hide">
    <h1>1300 76 67437</h1>
  </div>
  <div>
    <h1>1300 GO POOPIES</h1>
  </div>
</a> 
```

还有你的 CSS

```
div{
 position:absolute;
 background:#ffffff;
}
div#hide:hover{
 display:none;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T06:19:48.253

[这个http://jsfiddle.net/tzerb/S52bz/](http://jsfiddle.net/tzerb/S52bz/)怎么样 <a class="phone-text" href="tel:+6113007667437" ></a>

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T06:16:20.457

尝试这个：

```
$('a').hover(
  function(){
    $(this).text('1300 76 67437')
  },
  function(){
    $(this).text('1300 GO POOPIES')
  }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-12T08:52:04.713

**在这里，您对yaponyal**提出的解决方案有所不同。它在没有`>`标志的情况下工作。

```
.hiden {
display:none;
}
a:hover .shown {
display:none;
}
a:hover .hiden {
display:inline;
} 
```

​​​

# php - 如何获取 google plus 授权用户 +1(like) 、事件和群组列表或详细信息？

> ID：10561496
> 
> 赞同：1
> 
> 时间：2012-05-12T06:08:47.993
> 
> 标签：php, google-plus

我想要 google plus 授权、、、`users(individual)` `likes(+1)`和`events`加入`friends`的`user`google 组详细信息或列表。

我正在用 php (magento) 开发谷歌社交连接器。我已经完成了谷歌用户认证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T06:55:34.140

此获取活动类似于 facebook 页面之类的列表，您也可以获取特定活动评论列表和 +1ed

```
 $optParams = array('maxResults' => 100);
  $activities = $plus->activities->listActivities('me', 'public', $optParams);
   $activityMarkup = '';

  foreach($activities['items'] as $activity) {
        $comments = $plus->comments->listComments($activity['id'],$optParams);
 foreach($comments['items'] as $comment) {
   print "<br />{$comment['id']}, {$comment['object']['content']}\n"; 
   echo "+1<br />";
   }
 $plusoners = $plus->people->listByActivity($activity['id'], "plusoners", $optParams);
foreach($plusoners['items'] as $person) {
  print "{$person['displayName']} +1'ed the post\n<br />";
} 
```

# javascript - 如何使用 OpenLayers 制作点击链接中心并在地图上显示弹出窗口？

> ID：10561501
> 
> 赞同：1
> 
> 时间：2012-05-12T06:09:50.897
> 
> 标签：javascript, django, openlayers, geodjango

我已经从 GeoDjango 返回的 geojson 将特征绘制到地图上。我现在想单独显示这些功能的列表。如果单击一个，地图将以该特定点为中心并显示一个包含一些详细信息的弹出窗口。一个很好的例子是谷歌地图，在其中你有一个地点列表，点击其中任何一个都会在地图中显示与该特定地点相对应的弹出窗口。

这篇文章建议人们应该创建一个事件监听器，所以我尝试了这个但无济于事：[链接](https://stackoverflow.com/questions/4370993/how-do-i-activate-a-feature-popup-when-clicking-outside-of-a-map-in-openlayers)

我不确定如何将这些组件联系在一起。单击链接后，以下代码不会执行任何操作。href 也令人困惑，因为它会检查我的视图是否有 url 模式，所以我输入了一个 void(0) 来避免这种情况。

```
<div id="place-list"></div>
<div id="map"></div>

// ... code that reads a geoJSON and outputs features
var mapnik = new OpenLayers.Layer.OSM();
map.addLayer(vectorLayer);
vectorLayer.addFeatures(features);

// Build the clickable list of features
var list = "";
for (var i=0, len=features.length; i  len; i++) {
        // This does not work?
        list = list + "<a href=\"javascript:void(0);\""+"onclick=\"selectFeature("+i+");\">"+features[i].attributes["address"]+"</a><br/>";
}

    $("#place-list").append(list);  

    var info;
    function selectFeature(i) {
        feature = features[i];
        info = new OpenLayers.Control.SelectFeature(
            vectorLayer, 
            {
                eventListeners: {
                    getfeaturesinfo: function(event) {
                        map.addPopup(new OpenLayers.Popup.FramedCloud(
                            feature.id,
                            feature.lonlat,
                            null,
                            event.text,
                            null,
                            true
                        ));
                    }
                }
            }
        );

    }
    map.addControl(info);
    info.activate(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T04:02:27.093

我能够弄清楚我的问题。我必须创建一个 OpenLayers.Control.Panel 来保存我的链接，然后将其添加到我的地图中。对于每个特征对象，我创建了一个事件监听器并将其链接到每个特征对象及其 id。

这是一个很好的例子：[OpenLayers Eventhandler example](http://dev.openlayers.org/releases/OpenLayers-2.11/examples/events.html)！

# android - Android 应用程序连接到数据库

> ID：10561504
> 
> 赞同：0
> 
> 时间：2012-05-12T06:10:44.823
> 
> 标签：android, web-services

我是android开发的新手。我正在创建一个android应用程序，其中需要使用Sql server 2005验证用户名和密码。我已经读过要在android应用程序中使用SQL server 2005，我需要一个webservice。您能否给我指导如何进行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T07:00:34.650

如果您想从 android 中的外部数据库中提取数据，那么首先您需要在 java 中进行数据库连接，并且您需要以 xml 格式从数据库中获取数据并通过 xml 解析在 android 中显示该数据。我希望这会帮助你。

# android - 为android编译程序集

> ID：10561509
> 
> 赞同：3
> 
> 时间：2012-05-12T06:11:37.570
> 
> 标签：android, assembly, android-ndk, arm

我发现 Vikram Aggarwal 的一篇文章谈到了将汇编代码链接到 Android 的 NDK，其中甚至有一些示例代码展示了如何将 C++ 代码与汇编连接。（见[http://www.eggwall.com/2011/09/android-arm-assembly-calling-assembly.html](http://www.eggwall.com/2011/09/android-arm-assembly-calling-assembly.html)）

我的问题是我想使用相同的函数，但不是从 JNI 存根类调用它，而是想从我的私有类调用我的 Assembly 函数。

但是在编译时，我得到了错误：

```
error: 'armFunction' was not declared in this scope 
```

有没有人试过这个或知道如何解决这个问题？

**编辑：**

生成文件：

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE := quake3

# I want ARM, not thumb.
LOCAL_ARM_MODE := arm    

LOCAL_SRC_FILES := \
    multiple.s \
    macros.h \
    math/Vector2.cpp\
    math/Vector3.cpp\
    math/plane.cpp\
    engine/frustum.cpp\
    engine/BoundingVolume.cpp\
    engine/camera.cpp\
    camera-proxy.cpp\

LOCAL_CFLAGS := -DANDROID_NDK \
                -DDISABLE_IMPORTGL \

LOCAL_LDLIBS := -lGLESv1_CM -ldl -llog
#LOCAL_LDLIBS := -llog -lGLESv2

APP_STL := gnustl_static
APP_CPPFLAGS := -S -frtti -fexceptions
APP_ABI := armeabi armeabi-v7a

include $(BUILD_SHARED_LIBRARY) 
```

cpp文件中的函数调用：

```
void
Java_surreal_quake3_engine_Camera9_nativeGetDirection(JNIEnv* env, jobject thiz)
{
    //Camera* camera = (Camera*) env->GetIntField(thiz, pointerID);

    // get the _Z as the Vector3 java object
    jfieldID vector_fID = env->GetFieldID(cls, "_Z", "Lsurreal/libs/math/Vector3;");
    jobject vector_obj = env->GetObjectField(thiz, vector_fID);

    // call the setter methods on the _vecEye
        //jclass vectorClass = env->FindClass("surreal/libs/math/Vector3");
    jmethodID vector3_set = env->GetMethodID(vector3Class, "set"/*method-name*/, "(FFF)V" /*method-signature*/);
    env->CallVoidMethod(vector_obj, vector3_set, camera->getZ().x, camera->getZ().y, camera->getZ().z);

    int result = armFunction();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T06:26:03.667

看类的代码，好像你调用了函数，但是我看不到它的任何声明，所以无法识别。所以你需要在调用它之前声明函数的原型（在 C++ 类中）：

就像是：

```
int armFunction(void); // << declaration

void Java_surreal_quake3_engine_Camera9_nativeGetDirection(JNIEnv* env, jobject thiz)
{
    // snip - snap
    int result = armFunction(); // << your function call
} 
```

# ios - 两个 CoreData 实体之间可以有多个“对多”关系吗？

> ID：10561510
> 
> 赞同：4
> 
> 时间：2012-05-12T06:11:48.913
> 
> 标签：ios, core-data, nspredicate, nsfetchrequest

我的模型有一个实体“过滤器”和一个实体“颜色”。我想在它们之间建立两个“多对多”关系：“背景”和“前景”。（即每个“过滤器”包含一组背景颜色和一组前景色，所有类型均为“颜色”）。

我有两个问题。首先，当我建立关系时，“颜色”的倒数只能有一个值（我猜这意味着我不能做我想做的事）。其次，我不知道如何创建一个谓词来仅获取背景或仅获取前景。我假设以下将返回所有合并在一起的（如果它有效的话）：

```
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Color"];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"filter == %@", self]; 
```

我将通过将 Color 转换为两个 Foreground 和 Background 实体来解决这个问题，但我不想在不理解为什么单个实体不起作用的情况下这样做。我在这里错过了什么吗？

注意：这对我来说显然不直观。我再次遇到了这个确切的问题，但是这次我没有使用谓词，所以我没有立即找到问题。我有一个非常相似的设置，但是当我尝试删除一个孩子时，它最初会消失，但是当我重新启动我的应用程序时，它会多次出现。我带走的孩子越多，我得到的就越多。我最终注意到两个关系数组中都有相同的孩子，当我查看模型的图形版本时，只有一个关系有一个与孩子相连的箭头。最后，我记得我以前遇到过这个问题！我不太明白发生了什么，但显然两个子“数组”以一种奇怪的方式合并在一起。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T09:59:20.650

是的。

# 多对多关系理论

假设你有一个实体 CHILD，它不是男孩就是女孩。每个孩子都可以有一组（对多）他们所有的兄弟姐妹。但是每个孩子还可以再拥有两组（对多）他们的所有 1：兄弟和 2：姐妹。

“兄弟姐妹”的反向关系将是“isSiblingTo”（或兄弟姐妹）。而“brothers”和“sisters”的反义词是“isBrotherTo”和“isSisterTo”。

这非常简单，因为两个实体都相同。

说我是一个有一套蜡笔和一套玩具的孩子。我可能在这两个集合中都有我的红色蜡笔，即我必须与它有很多关系。

这一切都归结为红色蜡笔既是我的 CRAYON 也是我的玩具。与上面的兄弟姐妹示例一样，孩子的兄弟既是他们的兄弟姐妹，也是他们的兄弟，他们的姐妹既是他们的兄弟姐妹又是他们的姐妹。

**更新：**

你不需要成为这两种关系的一部分。你可以有一个没有兄弟姐妹关系但有兄弟姐妹关系的孩子，其他孩子与他们有相反的关系（这更接近你的颜色+滤镜示例）

# 应用于您的示例

所以，如果你有它的用途，它是可行的。想想他们在日常语言中的关系，并将相反的设置为 isForegroundColorTo 和 isBackgroundColorTo。

**具有多对多关系的数据模型** ![具有多对多关系的数据模型](../Images/d8c3d2cb30dac1118f661f8700c4ccff.png)

**颜色模型定义** ![颜色模型定义](../Images/8de5a6651b2e9a41655a1af8bd1c1281.png)

**过滤器模型定义** ![过滤器模型定义](../Images/77f5e2fdd38963499118a27bd47cff53.png)

# magento - 安装 magento 扩展后，但扩展无法正常工作，就像未安装一样

> ID：10561513
> 
> 赞同：5
> 
> 时间：2012-05-12T06:12:41.263
> 
> 标签：magento

我正在使用 magento 1.6.2.0。当我在 Magento connect 中安装一些扩展时，黑色消息框显示“检查包的依赖关系安装包社区/TBT_Enhancedgrid 1.3.2.1 包社区/TBT_Enhancedgrid 1.3.2.1 安装成功包安装：社区 TBT_Enhancedgrid 1.3.2.1”

但是我感觉没有安装扩展。

首先我安装magento，然后进入Magento连接菜单，出现这样的红色错误信息。

“警告：您的 Magento 文件夹没有足够的写入权限。”

所以我更改了文件夹权限，然后错误消息消失了。

之后，任何扩展都安装得很好，但扩展没有出现在系统 -> 配置 -> 高级 -> 禁用模块输出中。

我已经在其他站点多次安装了相同的扩展程序。那工作得很好。

但这一次非常奇怪。

有人知道原因吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T21:50:45.210

请注意，Magento Connect 中有几个编码不佳的扩展，您应该始终在将任何更改推广到实时站点之前对其进行测试。

话虽如此，可能有几件事是问题。首先，检查模块是否实际安装在*/app/code/community*文件夹中。*还要检查/app/etc/modules*文件夹中是否存在类似于 TBT_Enhancedgrid.xml 的内容- 这是实际启用模块的文件。它是否包含与此类似的代码？

```
<?xml version="1.0"?>
<config>
  <modules>
    <Example_Module>
      <codePool>community</codePool>
      <active>true</active>
    </Example_Module>
  </modules>
</config> 
```

如果没有，那么它将无法正确启用。*其次，尝试通过System > Cache Management > Flush Cache Storage 刷新*整个缓存存储。第三，尝试退出管理面板并重新登录。

检查 Magento Connect 上的用户评论也很重要，因为它们可能会揭示有关它如何运作以及它是否破坏了 Magento 本身的任何功能的关键细节。

# android - Android 使用 JNI 将 ImageFile 解码为 Bitmap

> ID：10561523
> 
> 赞同：1
> 
> 时间：2012-05-12T06:15:18.317
> 
> 标签：android, bitmap, java-native-interface

我正在尝试使用 Android 中的 JNI 将 imageFile 解码为位图。是否有任何将imageFile解码为位图的示例代码，否则也欢迎使用JNI将字节数组解码为位图的示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T06:34:39.200

您可以查看android源代码。对于 android 操作系统，使用 JNI 对其进行解码。

# graph - ROC 图构建

> ID：10561525
> 
> 赞同：0
> 
> 时间：2012-05-12T06:15:43.620
> 
> 标签：graph, svm

我有两个严重不平衡的数据集，分别标记为正面和负面，我能够生成一个混淆矩阵，该矩阵产生约 95% 的真阳性率（并且继承 5% 的假阴性率）和约 99.5% 的真阴性率（ 0.5% 的误报率）。

我尝试构建 ROC 图的问题是 x 轴的范围不是从 0 到 1，间隔为 0.1。相反，考虑到我的误报率非常低，它的范围从 0 到 0.04 左右。

关于为什么会发生这种情况的任何见解？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T06:33:05.900

在 ROC 图中，两个轴是假阳性率 (F) 和真阳性率 (T)。T 是给定正数据项的概率，您的算法将其分类为正数据项。F 是给定负数数据项，您的算法错误地将其分类为正数的概率。轴总是从 0 到 1，如果你的算法不是参数化的，你应该在 ROC 图上得到一个点（或者两个数据集的两个点）而不是曲线。如果你的算法是参数化的，你会得到一条曲线，然后曲线是由不同的参数值引起的。

见[http://www2.cs.uregina.ca/~dbd/cs831/notes/ROC/ROC.html](http://www2.cs.uregina.ca/~dbd/cs831/notes/ROC/ROC.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T21:52:47.683

我已经想通了。我使用 Platt 算法提取正分类的概率并对数据集进行排序，概率最高的优先。我遍历数据集，任何正例（真正的正例，未分类为正例）都会增加真例计数，而任何负例（真正的负例，未分类为负例）都会增加误报计数。

将其视为 SVM 上的支持向量，它将两个类（+ve 和 -ve）从 svm 的一侧逐渐移动到另一侧。在这里，我想象二维平面上的点。随着支持向量的移动，它会发现示例。任何被标记为阳性的例子都是真阳性，任何阴性都是假阳性。

希望这可以帮助。由于网络上缺乏信息（或者只是我对 SVM 缺乏了解），我花了几天的时间才弄清楚这么琐碎的事情。这特别针对那些在 OpenCV 包中使用 CvSVM 的人。您可能知道，CvSVM 不返回概率值。相反，它会根据距离函数返回一个值。您无需使用 Platt 算法根据概率提取 ROC 曲线，而是可以使用距离值本身。例如，您从 10 开始距离，然后慢慢递减，直到覆盖了所有数据集。我发现使用概率更好地可视化，所以对每个人来说都是如此。

请注意我的英语，因为它不是我的第一语言

# python - Django - 在 SQLite3 中设置 ForeignKey 可延迟外键约束

> ID：10561527
> 
> 赞同：1
> 
> 时间：2012-05-12T06:15:52.327
> 
> 标签：python, django, sqlite

我似乎坚持在 Django 中的两个模型之间创建初始可延迟外键关系并使用 SQLite3 作为我的后端存储。

考虑这个简单的例子。这就是*models.py*的样子：

```
from django.db import models

class Investigator(models.Model):
    name = models.CharField(max_length=250)
    email = models.CharField(max_length=250)

class Project(models.Model):
    name = models.CharField(max_length=250)
    investigator = models.ForeignKey(Investigator) 
```

这就是*sqlall*的输出：

```
BEGIN;
CREATE TABLE "moo_investigator" (
    "id" integer NOT NULL PRIMARY KEY,
    "name" varchar(250) NOT NULL,
    "email" varchar(250) NOT NULL
)
;
CREATE TABLE "moo_project" (
    "id" integer NOT NULL PRIMARY KEY,
    "name" varchar(250) NOT NULL,
    "investigator_id" integer NOT NULL REFERENCES "moo_investigator" ("id")
)
;
CREATE INDEX "moo_project_a7e50be7" ON "moo_project" ("investigator_id");
COMMIT; 
```

*项目*表的 *investigator_id* 列中缺少“DEFERRABLE INITIALLY DEFERRED” 。我究竟做错了什么？

ps 我是 Python 和 Django 的新手——使用 Python 2.6.1 版 Django 1.4 版和 SQLite 3.6.12 版

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-07T20:06:47.440

此行为现​​在是默认行为。见[https://github.com/django/django/blob/803840abf7dcb6ac190f021a971f1e3dc8f6792a/django/db/backends/sqlite3/schema.py#L16](https://github.com/django/django/blob/803840abf7dcb6ac190f021a971f1e3dc8f6792a/django/db/backends/sqlite3/schema.py#L16)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T07:09:32.720

Sqlite 后端不添加`"DEFERRABLE INITIALLY DEFERRED"`. 检查[代码](https://github.com/django/django/blob/master/django/db/backends/__init__.py#L503)

# java - 如何在java中获取表单文本框和图像值表单类型enctype =“multipart/form-data”

> ID：10561532
> 
> 赞同：2
> 
> 时间：2012-05-12T06:16:31.753
> 
> 标签：java, forms, file-upload, multipartform-data

如何在 servlet 被加密为 multipart/form-data 时获取表单值。

```
<FORM name="filesForm" action="FileUpload" method="post" enctype="multipart/form-data">
<input type="text" name="firstname">
<input type="text" name="lastname">
<input type="file" name="filename">
</form> 
```

如何在 servlet 的名字、姓氏和文件值中获取这些值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T06:47:42.400

您可以使用 apache commons 文件上传：http: [//commons.apache.org/fileupload/](http://commons.apache.org/fileupload/)

通常，您的代码将类似于：

```
import org.apache.commons.fileupload.*; 
```

...

```
DiskFileUpload upload = new DiskFileUpload();
List<FileItem> items = upload.parseRequest(request); // request is HttpServletRequest

// iterate through form fields
for(FileItem item:items) {
    if(item.isFormField()) { // text fields, etc...
        String fieldName = item.getFieldName();
        String value = item.getString();
    } else { // file fields
        item.write(new File("some/path"));
    }
} 
```

# mysql - mysql中的同步存储过程执行

> ID：10561535
> 
> 赞同：9
> 
> 时间：2012-05-12T06:16:56.630
> 
> 标签：mysql, stored-procedures, synchronization, locking, boost-interprocess

我在*mysql*中有一个存储过程来执行需要同步的任务，这样如果两个应用程序调用存储过程，只有一个可以访问一段代码来执行任务，让另一个被阻塞直到第一个一个完成任务。

```
DELIMITER $$
CREATE PROCEDURE SP_GEN_ID(IN NAME VARCHAR(20))

BEGIN 
  DECLARE maxLen int default 0;
START TRANSACTION;
   #the section of code that needs to be synchronized
COMMIT
END;
$$

DELIMITER ; 
```

因此，如果两个应用程序同时调用存储过程，则任务必须同步。

一种。但是*Start TRANSACTION*和*COMMIT*没有同步执行。

湾。并且 LOCK TABLES *tableA*也不能在存储过程中使用以确保同步。

C。我试图在应用程序级别同步存储过程调用。我用了

> boost_interprocess scoped_lock lock();

它在 boost 1.41 中运行良好

但是 boost 1.34 库不支持进程间锁定互斥锁，这在我的情况下是可用的。

有没有办法同步代码的存储过程部分，这样当同时进行两个调用时，一个在另一个被执行之前被阻塞？

（添加了以下）编辑的代码：给出一个想法，我想在存储过程的同步块中执行什么。

它获取最后分配的 id，并将其加一并检查它是否未用于其他“名称”记录。找到有效 id 后，更新最后分配的 id 记录表，然后将其与给定的“名称”相关联。

```
DELIMITER $$
CREATE PROCEDURE SP_GEN_ID(IN NAME VARCHAR(20))

BEGIN 
  DECLARE maxLen int default 0;
START TRANSACTION;
   #the section of code that needs to be synchronized
    SELECT lastid into lastgenerated FROM DB_last_id WHERE key = 'NAME_ID';    
findid_loop:
    LOOP
    set lastid = lastid + 1;
    #this is to check whether it was assigned with someother name before.
    IF not EXISTS (SELECT 1 FROM user_name_id WHERE name_id = lastgenerated) then
                     set nameid = lastgenerated;
                     set found = true;
                     LEAVE findid_loop;
            END IF;

            #for loop limit check
            IF (counter < loopLimit) then
                    set counter = counter + 1;
                    ITERATE findid_loop;
            ELSE
                    #reached the limit and not found.
                    LEAVE findid_loop;
            END IF;
    END LOOP findid_loop;

     #if a valid id, update last id and assign to name.
     IF (found) THEN
            #update the id.
            update DB_last_id  set lastid = nameid where key = 'NAME_ID';
            insert into user_name_id values (nameid ,name);
     ELSE
            #return an empty string for the application to take action on the failure.
            set nameid = '';
    END IF;
#end transaction here.
COMMIT

END;
$$

DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T10:18:11.293

正如我在上面的评论中提到的，您*应该*发现一个事务足以满足大多数需求；但是，如果您需要明确等到另一个调用完成，请使用[`GET_LOCK(str,timeout)`](http://dev.mysql.com/doc/en/miscellaneous-functions.html#function_get-lock)：

> 尝试***`str`***使用由 string 指定的名称获取锁，超时时间为***`timeout`***秒。`1`如果锁定成功、`0`尝试超时（例如，因为另一个客户端先前已锁定名称）或`NULL`发生错误（例如内存不足或线程被 杀死），则返回[*`mysqladmin kill`*](http://dev.mysql.com/doc/en/mysqladmin.html)。如果你有一个用 获得的锁[`GET_LOCK()`](http://dev.mysql.com/doc/en/miscellaneous-functions.html#function_get-lock)，它会在你执行时被释放[`RELEASE_LOCK()`](http://dev.mysql.com/doc/en/miscellaneous-functions.html#function_release-lock)，执行一个新的[`GET_LOCK()`](http://dev.mysql.com/doc/en/miscellaneous-functions.html#function_get-lock)，或者你的连接终止（正常或异常）。获得的锁[`GET_LOCK()`](http://dev.mysql.com/doc/en/miscellaneous-functions.html#function_get-lock)不与事务交互。也就是说，提交事务不会释放在事务期间获得的任何此类锁。
> 
> 该函数可用于实现应用程序锁或模拟记录锁。名称在服务器范围内被锁定。如果一个名称已被一个客户端锁定，则[`GET_LOCK()`](http://dev.mysql.com/doc/en/miscellaneous-functions.html#function_get-lock)阻止另一个客户端对同名锁定的任何请求。这使同意给定锁名称的客户端能够使用该名称来执行协作咨询锁定。但请注意，它还会使不在合作客户端集合中的客户端无意或故意锁定名称，从而防止任何合作客户端锁定该名称。降低这种可能性的一种方法是使用特定于数据库或特定于应用程序的锁名称。例如，使用形式为***`db_name.str`***或的锁名称***`app_name.str`***。
> 
> ```
> mysql> SELECT GET_LOCK('lock1',10);
>         -> 1
> mysql> SELECT IS_FREE_LOCK('lock2');
>         -> 1
> mysql> SELECT GET_LOCK('lock2',10);
>         -> 1
> mysql> SELECT RELEASE_LOCK('lock2');
>         -> 1
> mysql> SELECT RELEASE_LOCK('lock1');
>         -> 空
> 
> ```
> 
> 第二次[`RELEASE_LOCK()`](http://dev.mysql.com/doc/en/miscellaneous-functions.html#function_release-lock)调用返回，因为第二次调用自动释放`NULL`了锁。`'lock1'`[`GET_LOCK()`](http://dev.mysql.com/doc/en/miscellaneous-functions.html#function_get-lock)
> 
> 如果多个客户端都在等待一个锁，它们获取锁的顺序是不确定的，取决于使用的线程库等因素。特别是，应用程序不应假定客户端将按照它们发出锁请求的相同顺序获取锁。
> 
> > **注意**
> > 在 MySQL 5.5.3 之前，如果一个客户端试图获取一个已经被另一个客户端持有的锁，它会根据***`timeout`***参数阻塞。如果被阻塞的客户端终止，它的线程在锁定请求超时之前不会死亡。
> 
> 此函数对于基于语句的复制是不安全的。[`binlog_format`](http://dev.mysql.com/doc/en/replication-options-binary-log.html#sysvar_binlog_format)从 MySQL 5.5.1 开始，如果在设置为时使用此函数，则会记录警告`STATEMENT`。（错误 #47995）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-12T12:00:09.470

使用 START TRANSACTION 启动事务实际上并不会启动它。START TRANSACTION 之后的第一个表访问确实如此。打开事务也不是并发控制的手段。如果你只需要这个，你可以依赖 MySQL 通过`GET_LOCK()`、`RELEASE_LOCK()`和其他一些相关函数提供的咨询锁系统。

这次通过事务实现并发控制的另一种方法是依赖排他行锁。由于`SELECT`InnoDB 中的语句是非锁定的，因此发出这样的查询会启动一个事务，但是它既不设置任何锁，也不尊重任何预先存在的锁。`SELECT`如果在同一信息（行）上存在较早的事务操作，则要使语句实际阻塞，您必须使用`FOR UPDATE`子句。例如：

```
START TRANSACTION;
SELECT lastid into lastgenerated FROM DB_last_id WHERE key = 'NAME_ID' FOR UPDATE;
... 
```

通过这种结构，在明确告知执行锁定读取`'NAME_ID'`的语句之后，将永远不会有两个并发事务在同一个事务上运行。`SELECT`

# python - 简单的正则表达式麻烦

> ID：10561539
> 
> 赞同：2
> 
> 时间：2012-05-12T06:17:21.767
> 
> 标签：python, regex

我的语言是蟒蛇

输入看起来像：

```
'0 0 0 0 1 0 0 0 1 1 0 0' 
```

等等。

我想要输出：

```
('0 0 0 0', '1 0 0 0', '1 1 0 0') 
```

或者每组 4 个数字都是它自己的元素

到目前为止，我已经放在一起

```
>>> truth = re.compile('(([0-1]\D*?){4})*')
>>> truth.search('0 0 0 0 1 0 0 0').groups()
('0 0 0 0', '0') 
```

或和几个类似的事情，但没有什么越来越接近。这里的一些东西对我来说是新的，我正在阅读文档，但似乎无法将分崩离析的东西拼凑起来。值得注意的是，我现在不知道为什么我得到最后一个 0 ...

输入最终将有很多行，但如果它适用于小案例，我相信它会翻译过来。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T06:25:27.947

我不会为此使用正则表达式。而是使用itertools[文档](http://docs.python.org/library/itertools.html)`grouper`中的[配方](http://docs.python.org/library/itertools.html#recipes)：

```
>>> [' '.join(x) for x in grouper(4, truth.split())] 
```

在线查看它：[ideone](http://ideone.com/ALGEI)

* * *

这是（从 itertools 文档复制）的源代码`grouper`：

```
from itertools import izip_longest

def grouper(n, iterable, fillvalue=None):
    "grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx"
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T06:29:48.173

我不是很精通 Python，但你可以稍微改变你的正则表达式并`re.findall()`改用它。

```
re.findall('(?:[0-1]\s*){4}', '0 0 0 0 1 0 0 0 1 1 0 0') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T06:25:17.167

您应该检查[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)：

```
>>> MyString = '0 0 0 0 1 0 0 0 1 1 0 0'
>>> [MyString[x:x+7] for x in range(0,len(MyString),8)]
>>> ['0 0 0 0', '1 0 0 0', '1 1 0 0'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T07:09:31.567

这样做：

```
>>> s='0 0 0 0 1 0 0 0 1 1 0 0' 
>>> [' '.join(x) for x in zip(*[iter(''.join(s.split()))]*4)]
['0 0 0 0', '1 0 0 0', '1 1 0 0'] 
```

如果你想要一个元组：

```
>>> tuple(' '.join(x) for x in zip(*[iter(''.join(s.split()))]*4))
('0 0 0 0', '1 0 0 0', '1 1 0 0') 
```

如果你真的想要一个正则表达式：

```
>>> [x.strip() for x in re.findall(r'(?:\d\s*){4}',s)]
['0 0 0 0', '1 0 0 0', '1 1 0 0'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T08:23:05.743

一个疯狂的解决方案只是为了好玩：

```
import math
s = '0 0 0 0 1 0 0 0 1 1 0 0'
step = 8
result = [s[0+i*step:step+i*step] for i in xrange(int(math.ceil(float(len(s))/step)))]
print result 
```

# java - 在 JUnit 测试中是否可以检查方法 System.out.println()

> ID：10561540
> 
> 赞同：1
> 
> 时间：2012-05-12T06:17:47.120
> 
> 标签：java, unit-testing, io

> **可能重复：**
> [System.out.println() 的 JUnit 测试](https://stackoverflow.com/questions/1119385/junit-test-for-system-out-println)

是否可以通过 JUnit 测试检查 System.out.println("One, Two") 方法是否实际打印 One, Two？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T06:25:44.083

是的，您可以，您可以将默认 System.out 更改为文件、缓冲区等，并对预期数据的新流进行单元测试。但海事组织这是一个可怕的可怕想法。

其他方法将使用 Logger 代替标准输出并对日志进行单元测试，但再次对记录器进行单元测试听起来很奇怪。至少如果您不开发日志工具:)

对我来说，这听起来像是对什么是单元测试的不好理解，但我可能是错的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T06:45:41.723

一个更好的主意是通过不直接使用 System.out 将您的应用程序更改为更具可测试性。

*   如果您尝试测试的方法旨在为最终用户编写输出，请修改它或封闭类，以便目标 OutputStream 或 PrintWriter 或任何参数。

*   另一方面，如果该方法正在生成日志输出，请使用适当的日志框架......并考虑是否值得对日志输出进行单元测试。

# ruby-on-rails - 什么时候在 Ruby 中使用符号代替变量是正确的？

> ID：10561541
> 
> 赞同：2
> 
> 时间：2012-05-12T06:18:01.903
> 
> 标签：ruby-on-rails, ruby, programming-languages

我是 Ruby 新手，并试图了解它的一些语法。

为什么此代码与异常对象的变量一起使用：

```
begin
  puts Dir::delete
rescue ArgumentError => e
  puts e.backtrace
end 
```

但不带符号？

```
begin
  puts Dir::delete
rescue ArgumentError => :e
  puts e.backtrace
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T06:33:50.913

Symbol is a value. In your example you need a variable to store the Error object. You usually use symbols as string constants.

For example, if you create a module with cardinal directions it is better to use the symbols `:north`, `:south`, `:east`, `:west` rather than the strings `"north"`, `"south"`, `"east"` and `"west"`.

Symbols are often used as keys in hashes:

```
my_hash = { a: 1, b: 7, e: 115 } 
```

It's very useful to read ruby code on github for instance in order to understand when to use symbols.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T06:31:18.173

因为，正如您在问题本身中所写，您需要一个 Exception 对象，而不是 Symbol 对象。

在救援块中，您`backtrace`通过`e`对象访问，该对象是 type `ArgumentException`，而不是 type `Symbol`。

因此，解释器解析时实际发生的`:e`是，间接`Symbol`创建了一个新对象并将其值设置为`:e`. 这就像 write `23`，其中`Fixnum`间接创建了一个对象并将其值设置为 23。

但是符号本身可以存储在变量中：

```
some_var = :e
e = :e 
```

希望我的意思很清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T06:28:08.610

我认为这`e`是一个存储异常对象的变量，并且`:e`是一种数据类型，因此它是一种值。

一些例子

```
# standard way of assign variable will work
e = ArgumentError.new 

# assign to data will not work
:e = ArgumentError.new
'e' = ArgumentError.new
 1 = ArgumentError.new 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T06:30:39.433

符号代替变量名 - 从不（符号是一个值，名称是一个名称。苹果和橙色）；

变量代替符号 - 如您所愿（如`s = :name; puts params[s]`）；

用符号代替字符串——小心（如果你创建了太多的符号，你可能会遇到麻烦）。

# c++ - 在实例化期间为 c++ 类变量设置变量类型

> ID：10561542
> 
> 赞同：3
> 
> 时间：2012-05-12T06:18:14.573
> 
> 标签：c++, variables, variable-types

我有一个 c++ 类，如下所示：

```
class some_class {

    protected:
        decide_later some_variable;

    public:
        void some_random_function();

};

void some_class::some_random_function() {

    decide_later another_variable;

} 
```

问题是在创建类的实例之前，我不知道 some_variable 将是什么变量类型。我想做的是如下所示：

```
some_class class_instance(std::string); 
```

这将设置decision_later 使用std::string （或int，或double，或任何它被告知使用）。此外，如果我以后可以在作为该类成员的其他函数中使用 decision_later 作为变量类型，那就太好了。例如，在函数 some_random_function() 中。

我曾尝试使用 boost::any 来做到这一点，但它似乎只适用于数字类型。此外，我认为如果我可以实际设置实际变量类型会更有效。

这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T06:24:35.633

您正在寻找*模板*。像这样声明你的类：

```
template <typename T> class some_class {

    protected:
        T some_variable;

    public:
        void some_random_function() {
            T another_variable;
        }

}; 
```

并实例化它：

```
some_class<std::string> class_instance(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T06:24:49.917

如果您在创建实例时静态地知道类型，则应该使用 C++ 模板并将类型作为模板参数。

如果您只是动态地知道它（即基于用户输入），您可以然后分支并使用不同类型参数实例化模板，或者您可以寻求完全动态的解决方案（如 boost::any 或等效的）。

但是，我相信如果你不能用模板做到这一点，那么你的程序设计就有问题。C++ 静态类型的想法是在编译时类型是已知的。通常在面向对象的设计中，您会使用多态性而不是弱类型。

# android - 通过 HttpClient 连接到 Google Tasks API 时的身份验证错误

> ID：10561543
> 
> 赞同：2
> 
> 时间：2012-05-12T06:18:19.670
> 
> 标签：android, oauth-2.0

我正在尝试使用 HttpClient 连接到 Google Tasks，但总是得到“未经授权的 HttpResponseException”。

这是我在 AccountManagerCallback 的“运行”方法中的代码

```
 @Override
    public void run(AccountManagerFuture<Bundle> result) {
        // Get the result of the operation from the AccountManagerFuture.
        Bundle bundle;
        try {
            bundle = result.getResult();
            token = bundle.getString(AccountManager.KEY_AUTHTOKEN);
            Log.i("#######", token); // token does have value

            String url = "https://www.googleapis.com/tasks/v1/users/@me/lists?key=" + your_api_key;
            HttpGet getRequest = new HttpGet(url);
            getRequest.addHeader("client_id", your_client_id);
            getRequest.addHeader("client_secret", your_client_secret);
            getRequest.addHeader("Authorization", "OAuth " + token);

            HttpClient httpclient = new DefaultHttpClient();

            String responseBody = httpclient.execute(getRequest, new BasicResponseHandler()); // exception raised here

            Log.i("###", responseBody); // cannot get the response here     

        } catch (OperationCanceledException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (AuthenticatorException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } 
```

我正在使用可以访问互联网的 Google APIs Level 10 模拟器，并且我确实在其中添加了一个 google 帐户。

感谢任何帮助或建议使我的代码正常工作。谢谢。

# objective-c - iOS5中视图控制器导航的内存泄漏

> ID：10561548
> 
> 赞同：0
> 
> 时间：2012-05-12T06:19:45.620
> 
> 标签：objective-c, ios, ios5

我已经将一个视图控制器导航到另一个视图控制器，但是当我多次导航时，我的应用程序显示内存泄漏，我使用 NSZombie 检测运行应用程序，显示“任务_for_pid 权限不足（LeakAgent）”。它已启用 ARC（xcode 4.2，iOS5）请帮助.......

我的代码在这里：

```
self.locationMapDetail = [[LocationMapDetail alloc] init];  //14.3% Leak
self.locationMapDetail.objItem = [self.parsedItems objectAtIndex:selectedIndex]; //5.7% Leak       
[self.navigationController pushViewController:locationMapDetail animated:YES]; //80.3% Leak
self.locationMapDetail = nil;
self.locationMapDetail.objItem = nil; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T06:25:33.067

您必须在将其设为 nil 之前释放对象。类似于

```
[self.locationMapDetail release];
self.locationMapDetail = nil; 
```

如果您不使用 ARC，您应该为您分配的所有对象执行此操作。

在强指针的情况下，即使您释放对象，您也可能无法有效地释放它，或者它可能只是虚拟释放，因为强指针只有在强指针的所有引用都已释放时才能释放。发生这种情况是因为有时目标可能具有指向已声明变量的强指针引用。

另请提及您用于创建变量的方法..（viewDidLoad 或 viewWillAppear）。建议在 viewDidLoad 中创建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T09:50:35.583

我也遇到了同样的问题，我花了将近 2 天的时间解决了这个问题。终于得到了解决方案。确保您的配置文件方案处于 DEBUG 模式而不是 RELEASE。这将解决问题。

# python - 请解释这段 python 代码以及如何在 lisp 中编写等效代码

> ID：10561558
> 
> 赞同：0
> 
> 时间：2012-05-12T06:24:09.323
> 
> 标签：python, common-lisp

请解释该`[[[0]*64 for i in range(7)] for j in range(2)]`部分以及如何编写 lisp 等效项。

```
pieceHashes = [[[0]*64 for i in range(7)] for j in range(2)]
    for color in WHITE, BLACK:
        for piece in PAWN, KNIGHT, BISHOP, ROOK, QUEEN, KING:
            for cord in range(64):
                pieceHashes[color][piece][cord] = randint(0, maxint) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T08:43:41.620

```
(let ((piece-array (make-array '(2 7 64) :initial-element 0)))
  (dolist (color `(,white ,black))
    (dolist (piece `(,pawn ,knight ,bishop ,rook ,queen ,king))
      (loop for cord below 64
            do (setf (aref piece-array color piece cord)
                     (random maxint)))))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T06:26:37.683

它生成一个具有 64 x 7 x 2 元素的三维数组。然后在最后一行填充数组。

# liferay-6 - 以编程方式在 Liferay 中设置默认布局

> ID：10561559
> 
> 赞同：0
> 
> 时间：2012-05-12T06:24:21.433
> 
> 标签：liferay-6

我正在研究与 Tomcat 7.0 捆绑在一起的 Liferay 6.1。我使用 liferay 插件创建了自己的布局。看起来像：

```
<div class="MyLayout" id="main-content" role="main">
<div class="portlet-layout">
    <div class="portlet-column portlet-column-only" id="column-1">
        $processor.processColumn("column-1", "portlet-column-content portlet-column-content-only")
    </div>
</div>
<div class="portlet-layout">
    <div class="portlet-column portlet-column-only" id="column-2">
        $processor.processColumn("column-2", "portlet-column-content portlet-column-content-only")
    </div>
</div>
<div class="portlet-layout">
    <div class="aui-w25 portlet-column portlet-column-first" id="column-3">
        $processor.processColumn("column-3", "portlet-column-content portlet-column-content-first")
    </div>
    <div class="aui-w75 portlet-column portlet-column-last" id="column-4">
        $processor.processColumn("column-4", "portlet-column-content portlet-column-content-last")
    </div>
</div> 
```

我想以编程方式将此布局设置为所有页面的默认布局。我怎样才能做到这一点？任何有价值的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T07:30:08.673

您可以检查与 liferay 捆绑在一起的 7-cogs-hook 中的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T17:42:21.690

你可以通过liferay的配置来设置默认布局。`portal-ext.properties`在-folder 中创建一个`bundles`并将这两个属性放置为默认布局：

```
layout.default.template.id = MyLayout
default.layout.template.id = MyLayout 
```

您必须设置这两个属性，否则门户会在启动时引发异常。

PS：问我，如果这个解决方案不适合你，并且你真的想以编程方式设置布局。

# ios - 如何在 Objective-C 中随机移动数组的元素

> ID：10561565
> 
> 赞同：0
> 
> 时间：2012-05-12T06:25:02.317
> 
> 标签：ios, objective-c, ios5

> **可能重复：**
> [在 Objective-C 中随机化 NSArray 的规范方法](https://stackoverflow.com/questions/791232/canonical-way-to-randomize-an-nsarray-in-objective-c)

假设我有一个如下数组。

```
shuffleArray = [[NSMutableArray alloc] initWithObjects:@"A",@"B",@"C",@"D",@"E", nil]; 
```

我想随机更改数组元素的位置，如下所示：

```
shuffleArray = [[NSMutableArray alloc] initWithObjects:@"C",@"A",@"B",@"E",@"D", nil]; 
```

那我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T06:31:47.050

```
-(NSArray *)shuffleme
{

 NSMutableArray *array = [NSMutableArray arrayWithCapacity:[self count]];

 NSMutableArray *array1 = [self mutableCopy];
 while ([array1 count] > 0)
 {
  int temp = arc4random() % [array1 count];
  id objectToMove = [array1 objectAtIndex:temp];
  [array addObject:objectToMove];
  [array1 removeObjectAtIndex:temp];
 }

   [array1 release];
   return array;
} 
```

希望对你有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T06:48:15.693

```
-(void)changeObjectAtIndex:(int)index1 index2:(int)index2 array:(NSMutableArray *)array
{
     id objectAtIndex1=[array objectAtIndex:index1];
     [array insertObject:[array objectAtIndex:index2] atIndex:index1];
     [array insertObject:id atIndex:index2];
} 
```

这是用于在两个索引处交换对象，如果您确切知道特定对象的位置，则可以使此函数递归。但是如果您想要随机，则可以采用 Nit 方法。

随机也可以通过以下方式完成：-

```
id newObject= [[[yourArray objectAtIndex:index] retain] autorelease];
[yourArray  removeObjectAtIndex:index];
[yourArray  insertObject:object atIndex:yourIndex]; 
```

记住要保留对象。

# python - 如何按降序打印频率？

> ID：10561566
> 
> 赞同：2
> 
> 时间：2012-05-12T06:25:07.207
> 
> 标签：python, frequency, letter

我已经看过其他类似的问题，但无法将答案应用于我的程序。目前频率按升序打印，我要更改什么以使其按降序打印？

```
from sys import argv
frequencies = {}
for ch in 'ABCDEFGHIJKLMNOPQRSTUVWXYZ':
   frequencies[ch] = 0

for filename in argv[1:]:
    try:
        f = open(filename)
    except IOError:
        print 'skipping unopenable', filename
        continue

 text = f.read()                
 f.close()                      

 for ch in text:                
     if ch.isalpha():
         ch = ch.upper()
         frequencies[ch] = frequencies[ch] + 1

for ch in 'ABCDEFGHIJKLMNOPQRSTUVWXYZ':
    print ch, frequencies[ch] 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T06:43:51.503

您不必重新发明轮子。使用标准库功能：

```
from sys import argv
from collections import Counter

frequencies = Counter()

for filename in argv[1:]:
    with open(filename) as f:
        text = f.read()
    frequencies.update(ch.upper() for ch in text if ch.isalpha())

for ch, freq in frequencies.most_common():
    print ch, freq 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T06:30:07.253

您可以调用[`items`](http://docs.python.org/library/stdtypes.html#dict.items)以`dict`获取字典中项目的元组列表。然后，您可以（反向）按元组中的第二项（中的值，频率）[排序：](http://docs.python.org/library/functions.html#sorted)`dict`

```
sorted(frequencies.items(), key=lambda x: -x[1]) 
```

顺便说一句，`'ABCD...`您可以使用[`string.ascii_uppercase`](http://docs.python.org/library/string.html#string.ascii_uppercase).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T06:27:46.433

从 Z 下降到 A？将倒数第二行的字符串常量更改为“ZYXWV...A”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T09:19:07.207

```
from sys import argv
tre="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"

for filename in argv[1:]:
    with open(filename) as f:
        text = f.read()
        ttt=list(set(zip(tre,map(text.count,tre))))
        ttt1=sorted([[x[1],x[0]] for x in ttt])
        ttt1.reverse()
        ttt3=[[x[1],x[0]] for x in ttt1]
        for x in ttt3:
            print x[0],x[1] 
```

# iphone - 在接口文件中：何时对自定义类使用前向声明而不是仅包含其标题？

> ID：10561578
> 
> 赞同：1
> 
> 时间：2012-05-12T06:26:50.780
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios5

我有一个`UIViewController`被调用的子类，`FullScreenViewController`它有一个类型的属性，`ImageScrollView`它是子类`UIScrollView`对象。实现和接口如下所示：

**全屏视图控制器.h**

```
#import <UIKit/UIKit.h>

@class ImageScrollView;

@interface FullScreenViewController : UIViewController 
{
    ImageScrollView *_scrollView;

}

@property(nonatomic, retain) ImageScrollView *scrollView;

@end 
```

**全屏视图控制器.m**

```
#import "FullScreenViewController.h"
#import "ImageScrollView.h"

@implementation FullScreenViewController

@synthesize scrollView = _scrollView;
...
@end 
```

现在我子类`FullScreenViewController`化，我尝试从`ImageScrollView`属性访问任何属性，但我不断收到错误消息：“找不到属性”。当我添加`ImageScrollView.h`到子类时，它可以工作，但我不明白这一点。我已经加`ImageScrollView.h`进去了`FullScreenViewController`，为什么还要再加呢？

更新：我没有使用前向类声明，而是将 ImageScrollView.h 包含在 FullScreenViewController.h 中。我有点困惑，为什么我曾经使用前向声明而不是只包含 .h 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T06:54:58.250

您需要添加它的原因是您的 FullScreenViewController.h 文件中只有一个 @class 声明。这仅将 ImageScrollView* 类型的变量声明为指向 ImageScrollView 类对象的指针。它不允许您访问 ImageScrollView 的属性。要访问特定于 ImageScrollView 的方法和属性，您需要包含 ImageScrollView 的 @interface 声明，我假设它位于您的 ImageScrollView.h 文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T20:25:18.283

给定标题：

```
@interface FullScreenViewController : UIViewController 
{
    ImageScrollView *_scrollView;

}

@property(nonatomic, retain) ImageScrollView *scrollView;

@end 
```

只需要一个前向声明`@class ImageScrollView`。这告诉编译器有一个名为 的 objc 类`ImageScrollView`。

当然，通过前向声明，界面在你需要使用的地方是不可见的，除非你`#import`在使用它的地方还有 ImageScrollView。

> 现在我将 FullScreenViewController 子类化，并尝试从 ImageScrollView 属性访问任何属性，但我不断收到错误消息：“找不到属性”。当我将 ImageScrollView.h 添加到子类时，它可以工作，但我不明白这一点。我已经在 FullScreenViewController 中添加了 ImageScrollView.h，为什么还要重新添加呢？

`ImageScrollView`的声明对子类不可见`FullScreenViewControllerSubclass`。`ImageScrollView.h`仅在`#import`ed 处可见。`FullScreenViewController.m`对 是不可见的`FullScreenViewControllerSubclass.m`。因此，您必须`#import`在其中编写另一个`FullScreenViewControllerSubclass.m`才能使用`ImageScrollView`。

> 更新：我没有使用前向类声明，而是将 ImageScrollView.h 包含在 FullScreenViewController.h 中。我有点困惑，为什么我曾经使用前向声明而不是只包含 .h 文件？

使用正向快速构建时间和健全、受控的依赖结构。这是一个非常耗时的撤消问题。随着程序和库的大小增加，这个问题会变得更糟：

您是否希望在中型项目中更改标题以要求重新编译 50 个源，每个翻译的平均预处理输入为 150,000 行，或者您希望该更改影响 6 个源，每个翻译的平均预处理输入为 40,000 行? 此处的不同之处在于，小的更改需要几秒钟到几分钟的增量重建才能完成，具体取决于您如何构建依赖项和导入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T06:32:34.423

您是否尝试过使用别名 _scrollView 或 scrollView 访问它。您应该使用 _scrollView 访问它并查看您是否已将文件导入到 .m 或 .h 中，因为 @class 还不够。

# java - “匹配的通配符是严格的，但找不到元素'http'的声明”错误

> ID：10561579
> 
> 赞同：16
> 
> 时间：2012-05-12T06:27:27.887
> 
> 标签：java, spring, spring-security, ntlm, spring-3

我正在尝试配置 NTLM 身份验证，但收到错误：

> cvc-complex-type.2.4.c：匹配通配符是严格的，但找不到元素“http”的声明。

我阅读了很多类似错误的主题，但找不到解决问题的方法。

我的导致错误的 security.xml 文件是：

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
                            http://www.springframework.org/schema/beans/spring-beans.xsd
                            http://www.springframework.org/schema/security
                            http://www.springframework.org/schema/security/spring-security.xsd" >

    <http access-denied-page="forms/error403.jsp" entry-point-ref="ntlmEntryPoint" servlet-api-provision="false"> 
        <intercept-url pattern="forms/error403.jsp" filters="none"/>
        <intercept-url pattern="forms/**" access="ROLE_GUEST,ROLE_OPERATOR,ROLE_ADMIN" />
                <custom-filter position="PRE_AUTH_FILTER"/>
    </http>

    <authentication-manager alias="mainAuthenticationManager"/>  
    <authentication-provider user-service-ref='userDetailsService' />

    <beans:bean id="userDetailsService"
        class="service.UserInfoService">
        <beans:property name="dataSource" ref="dataSource" />
        <beans:property name="usersByUsernameQuery" value="select distinct name, ' ' as password, 1 as enabled from TMP_SPRING_USERS where name=?" />
        <beans:property name="authoritiesByUsernameQuery" value="select name, role from TMP_SPRING_USERS where name=?" />
    </beans:bean>

    <beans:bean id="ntlmEntryPoint"
        class="org.springframework.security.ui.ntlm.NtlmProcessingFilterEntryPoint">
        <beans:property name="authenticationFailureUrl" value="forms/error403.html" />
    </beans:bean>

    <beans:bean id="exceptionTranslationFilter"
        class="org.springframework.security.ui.ExceptionTranslationFilter">
        <beans:property name="authenticationEntryPoint" ref="ntlmEntryPoint" />
    </beans:bean>

    <beans:bean id="ntlmFilter"
        class="org.springframework.security.ui.ntlm.NtlmProcessingFilter">
        <custom-filter position="NTLM_FILTER" />
        <beans:property name="authenticationManager" ref="mainAuthenticationManager" />
        <beans:property name="retryOnAuthFailure" value="true" />
        <beans:property name="stripDomain" value="true"/>
        <beans:property name="domainController" value="company.com" />
        <beans:property name="jcifsProperties">
            <beans:props>
                <beans:prop key="jcifs.smb.lmCompatibility">0</beans:prop> 
                <beans:prop key="jcifs.smb.client.useExtendedSecurity">false</beans:prop> 
                <beans:prop key="jcifs.smb.client.domain">COMPANY</beans:prop>
                <beans:prop key="jcifs.smb.client.username">somenycuser</beans:prop>
                <beans:prop key="jcifs.smb.client.password">AReallyLoooongRandomPassword</beans:prop>
            </beans:props> 
        </beans:property> 
    </beans:bean>

</beans:beans> 
```

因为从 3.X 版开始，Spring Security 不再包含 NTLM 扩展，所以我从[http://aloiscochard.blogspot.com/2010/03/spring-security-ntlm-3.html](http://aloiscochard.blogspot.com/2010/03/spring-security-ntlm-3.html)文章中使用它。

请帮我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-12T09:20:56.937

问题解决了，忘记添加spring-security-config.jar了。我也更改了一些设置。正确的 security.xml 是::

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
                            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                            http://www.springframework.org/schema/security
                            http://www.springframework.org/schema/security/spring-security-3.0.4.xsd" >

    <http access-denied-page="forms/error403.jsp" entry-point-ref="ntlmEntryPoint" servlet-api-provision="false"> 
                <intercept-url pattern="/**" access="ROLE_GUEST,ROLE_OPERATOR,ROLE_ADMIN" />
                <custom-filter position="PRE_AUTH_FILTER" ref="ntlmFilter"/>
        </http>

    <authentication-manager alias="mainAuthenticationManager">  
            <authentication-provider user-service-ref="userDetailsService" />
        </authentication-manager>

    <beans:bean id="userDetailsService"
        class="service.UserInfoService">
        <beans:property name="dataSource" ref="dataSource" />
        <beans:property name="usersByUsernameQuery" value="select distinct name, ' ' as password, 1 as enabled from TMP_SPRING_USERS where name=?" />
        <beans:property name="authoritiesByUsernameQuery" value="select name, role from TMP_SPRING_USERS where name=?" />
    </beans:bean>

    <beans:bean id="ntlmEntryPoint"
        class="org.springframework.security.ui.ntlm.NtlmAuthenticationFilterEntryPoint">
        <beans:property name="authenticationFailureUrl" value="forms/error403.html" />
    </beans:bean>

    <beans:bean id="ntlmFilter"
        class="org.springframework.security.ui.ntlm.NtlmAuthenticationFilter">
                <beans:property name="authenticationManager" ref="mainAuthenticationManager" />
        <beans:property name="retryOnAuthFailure" value="true" />
        <beans:property name="stripDomain" value="true"/>
        <beans:property name="domainController" value="company.com" />
        <beans:property name="jcifsProperties">
            <beans:props>
                <beans:prop key="jcifs.smb.lmCompatibility">0</beans:prop> 
                <beans:prop key="jcifs.smb.client.useExtendedSecurity">false</beans:prop> 
                <beans:prop key="jcifs.smb.client.domain">COMPANY</beans:prop>
                <beans:prop key="jcifs.smb.client.username">somenycuser</beans:prop>
                <beans:prop key="jcifs.smb.client.password">AReallyLoooongRandomPassword</beans:prop>
            </beans:props> 
        </beans:property> 
    </beans:bean>

</beans:beans> 
```

# c# - 用于检查输入字符串的正则表达式是否只是波斯语

> ID：10561590
> 
> 赞同：40
> 
> 时间：2012-05-12T06:30:01.680
> 
> 标签：c#, regex, asp.net-mvc-3, model-view-controller

我与 MVC 合作，我是新手。我想通过验证检查输入值是否仅使用波斯语（字符）`[RegularExpression]`。所以我认为使用正则表达式并需要检查 unicode 的范围，但我不知道如何找到波斯字符 Unicode 的范围。我对这个正则表达式是否正确？你的建议是什么，我怎样才能找到波斯语的 Unicode 范围

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-12T08:59:21.467

波斯语字符在以下范围内：`[\u0600-\u06FF]`

尝试：

```
Regex.IsMatch(value, @"^[\u0600-\u06FF]+$") 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-13T05:31:53.883

检查波斯语中的第一个字母和最后一个字母范围我认为是这样的：

```
"^[آ-ی]$" 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-10-20T11:45:33.207

```
Regex.IsMatch(Text, @"^([\u0600-\u06FF]+\s?)+$") 
```

这仅包含标准阿拉伯符号范围但波斯语还包括 4 个更多字符：

```
ژ \uFB8A
پ \u067E
چ \u0686
گ \u06AF 
```

所以你应该使用：

```
^[\u0600-\u06FF\uFB8A\u067E\u0686\u06AF]+$ 
```

如果你想匹配零宽度非连接器，你也应该添加这个：

```
\u200C 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-04-25T09:01:29.193

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-07-08T13:19:30.933

我在我的程序中使用了这个 RegExp，它可以正常工作。希望对您有所帮助：

```
 [پچجحخهعغفقثصضشسیبلاتنمکگوئدذرزطظژؤآإأءًٌٍَُِّ\s]+$ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-23T16:28:16.790

波斯语字符在以下范围内：[\u0600-\u06FF] + [\s]

尝试：

```
Regex.IsMatch(Text, @"^([\u0600-\u06FF]+\s?)+$") 
```

此模式包含字母和空格字符。

# php - 我在错误控制台中收到无效的正则表达式标志 w 错误

> ID：10561595
> 
> 赞同：0
> 
> 时间：2012-05-12T06:30:42.867
> 
> 标签：php, javascript, jquery, ajax

我收到一个无效的正则表达式标志 w 错误说明：

**注意**：未定义变量：**web/stud/中的image_file_name ...**

在查看源代码中，它指向这行代码下方的空白区域。

```
var image_file_name = <?php echo json_encode($image_file_name); ?>; 
```

那么如何从错误控制台中删除这个错误呢？

下面是显示代码行的 javascript 函数：

```
 var _cancelimagecounter = cancelimagecounter;

    $(".imageCancel").click(function() {
    var image_file_name = <?php echo json_encode($image_file_name); ?>;

                  $('.upload_target').get(0).contentwindow
              $("iframe[name='upload_target']").attr("src", "javascript:'<html></html>'");

    jQuery.ajax("cancelimage.php?fileImage=" + image_file_name)
        .done(function(data) {

        $(".imagemsg" + _cancelimagecounter).html(data);
    });

    return stopImageUpload();

}); 
```

下面是它检索变量的 php 代码`$image_file_name`。

```
<?php

...

$image_file_name = $_GET["fileImage"];

    echo "File Upload was Canceled";

        $imagecancelsql = "DELETE FROM Image 
        WHERE ImageFile = 'ImageFiles/". mysql_real_escape_string($image_file_name)."'";

    mysql_query($imagecancelsql);

    mysql_close();

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T04:51:58.987

查看您所有的引号，您的代码中有另一个错误的引号以及错误的引号`var image_file_name = '<?php echo $image_file_name; ?>';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T07:05:49.330

删除引号 `var image_file_name = '<?php echo $image_file_name; ?>';`

# android - 如何将屏幕坐标插入hashmap android

> ID：10561596
> 
> 赞同：1
> 
> 时间：2012-05-12T06:30:44.117
> 
> 标签：android, android-layout

我想将屏幕坐标插入到 hashmap 数据结构中意味着在 hashmap 中插入 setX(x) 和 setY(y) 值。我在这个应用程序中制作了一个android应用程序需要存储屏幕坐标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T06:45:45.887

获取大小..

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int width = size.x;
int height = size.y; 
```

你可以参考[这里](https://stackoverflow.com/a/1016941/1298796)

而对于哈希图

```
HashMap<Integer> meMap=new HashMap<Integer>();
meMap.put(width);
meMap.put(height); 
```

给出的只是一个例子。你可以做相应的事情。其他[参考](https://stackoverflow.com/questions/3422388/android-get-value-from-hashmap)。

# javascript - 摩卡的全局`before`和`beforeEach`？

> ID：10561598
> 
> 赞同：78
> 
> 时间：2012-05-12T06:31:25.840
> 
> 标签：javascript, unit-testing, mocha.js

我现在正在使用 mocha 进行 javascript 单元测试。

我有几个测试文件，每个文件都有一个`before`and `beforeEach`，但它们完全一样。

我如何为他们所有人（或其中一些人）提供一个全球`before`性的？`beforeEach`

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-12-26T07:05:42.343

在 test 文件夹的根目录中，创建一个全局测试助手`test/helper.js`，其中包含你的 before 和 beforeEach

```
// globals
global.assert = require('assert');

// setup
before();
beforeEach();

// teardown
after();
afterEach(); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2018-07-03T10:14:10.517

来自[mocha 文档](https://mochajs.org/#root-level-hooks)……</p>

> ## 根级挂钩
> 
> 您还可以选择任何文件并添加“根”级挂钩。例如，在所有 describe() 块之外添加 beforeEach()。这将导致对 beforeEach() 的回调在任何测试用例之前运行，无论它位于哪个文件中（这是因为 Mocha 有一个隐含的 describe() 块，称为“根套件

`describe()`首先收集所有常规套件，*然后再*运行，这可以保证首先调用它。

```
'use strict'
let run = false

beforeEach(function() {
    if ( run === true ) return
    console.log('GLOBAL ############################')
    run = true
}); 
```

如果您想在每次测试之前看到它每次运行，请删除运行标志。

我命名了这个文件`test/_beforeAll.test.js`。它不需要在任何地方导入/需要，但文件名中的`.test.`(resp. `.spec.`) 很重要，以便您的测试运行者将其拾取……</p>

* * *

## 奖励曲目 8-): 使用`mocha.opts`\o/

如果有东西，你真的只想在运行测试之前设置一次（不管是哪个......），这`mocha.opts`是一个令人惊讶的优雅选择！– 只需将 a 添加`require`到您的文件中（是​​的，即使它对 mocha 贡献不大，而是对您的测试设置贡献不大）。它会在之前可靠地运行一次：

[![在此处输入图像描述](../Images/80e020643f5af350e708be5f4b50c398.png)](https://i.stack.imgur.com/QIHx1.png)

（在这个例子中，我检测到，如果单个测试或多个测试即将运行。在前一种情况下，我输出 every `log.info()`，而在完全运行时，我将详细程度降低为 error+warn...）

**更新：**

如果有人知道一种方法，可以访问即将运行的 mocha 套件的一些基本属性`once.js`，我很想知道并在这里添加。（即我的`suiteMode`-detection 很糟糕，如果有另一种检测方法，要运行多少测试......）

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-05-12T06:36:09.963

在单独的文件中声明 a `before`or （我使用）并要求它。`beforeEach``spec_helper.coffee`

spec_helper.coffee

```
afterEach (done) ->
  async.parallel [
    (cb) -> Listing.remove {}, cb
    (cb) -> Server.remove {}, cb
  ], ->
    done() 
```

test_something.coffee

```
require './spec_helper' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-04-07T15:12:59.340

**`mochaHooks`Mocha 8 上的根钩子插件最小示例**

该机制目前记录在：[https ://mochajs.org/#root-hook-plugins](https://mochajs.org/#root-hook-plugins)

它不适用于`before`，仅适用于`beforeEach`，因为`before`不在以下可用挂钩列表中：[https ://mochajs.org/#available-root-hooks](https://mochajs.org/#available-root-hooks)

这是一个演示：

测试/global.js

```
// Root hook.
exports.mochaHooks = {
  beforeEach(done) {
    console.log('mochaHooks.beforeEach');
    done();
  },
};

// Bonus: global fixture, runs once before everything.
exports.mochaGlobalSetup = async function() {
  console.log('mochaGlobalSetup');
}; 
```

测试/mytest.js

```
var assert = require('assert');

describe('describe0', function() {
  // Only runs before the current describe.
  before(async () => {
    console.error('before describe 0');
  });
  beforeEach(async () => {
    console.error('beforeEach describe 0');
  });
  it('it 0 0', function() {
    assert.equal(0, 0);
  });
  it('it 0 1', function() {
    assert.equal(0, 0);
  });

  describe('describe 0 0', function() {
    before(async () => {
      console.error('before describe 0 0');
    });
    beforeEach(async () => {
      console.error('beforeEach describe 0 0');
    });
    it('it 0 0 0', function() {
      assert.equal(0, 0);
    });
    it('it 0 0 1', function() {
      assert.equal(0, 0);
    });
  });

  describe('describe 0 1', function() {
    before(async () => {
      console.error('before describe 0 1');
    });
    beforeEach(async () => {
      console.error('beforeEach describe 0 1');
    });
    it('it 0 1 0', function() {
      assert.equal(0, 0);
    });
    it('it 0 1 1', function() {
      assert.equal(0, 0);
    });
  });
}); 
```

然后使用以下命令启用该文件`--require`：

```
npx mocha --require test/global.js test/ 
```

结果：

```
mochaGlobalSetup

  describe0
before describe 0
mochaHooks.beforeEach
beforeEach describe 0
    ✓ it 0 0
mochaHooks.beforeEach
beforeEach describe 0
    ✓ it 0 1
    describe 0 0
before describe 0 0
mochaHooks.beforeEach
beforeEach describe 0
beforeEach describe 0 0
      ✓ it 0 0 0
mochaHooks.beforeEach
beforeEach describe 0
beforeEach describe 0 0
      ✓ it 0 0 1
    describe 0 1
before describe 0 1
mochaHooks.beforeEach
beforeEach describe 0
beforeEach describe 0 1
      ✓ it 0 1 0
mochaHooks.beforeEach
beforeEach describe 0
beforeEach describe 0 1
      ✓ it 0 1 1

  6 passing (6ms) 
```

所以我们看到 global 钩子在每个 local 之前运行`beforeEach`。

因为`before`我找不到比定义一个助手并从每个地方调用它更好的解决方案`before`：[如何让 Mocha 加载一个定义全局挂钩或实用程序的 helper.js 文件？](https://stackoverflow.com/questions/28191243/how-can-i-make-mocha-load-a-helper-js-file-that-defines-global-hooks-or-utilitie)

在 mocha 8.3.2、Node v14.16.0 上测试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-29T17:11:35.243

当我需要“模拟”依赖项之一使用的全局变量时，我遇到了类似的问题。

我为此使用了 .mocharc.js，因为在设置“mocha”环境时，该 JS 文件中的代码会被执行一次。

示例 .mocharc.js：

```
global.usedVariable = "someDefinedValue";

/** other code to be executed when mocha env setup **/

module.exports = {}; 
```

这对我有用，但是这样做看起来很“肮脏”。如果您知道该代码的更好位置，请发表评论:)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-07-04T21:58:49.567

使用模块可以更轻松地为您的测试套件进行全局设置/拆卸。这是一个使用 RequireJS（AMD 模块）的示例：

首先，让我们使用全局设置/拆卸来定义一个测试环境：

```
// test-env.js

define('test-env', [], function() {
  // One can store globals, which will be available within the
  // whole test suite.
  var my_global = true;

  before(function() {
    // global setup
  });
  return after(function() {
    // global teardown
  });
}); 
```

在我们的 JS 运行器中（包含在 mocha 的 HTML 运行器中，以及其他库和测试文件中，作为`<script type="text/javascript">…&lt;/script>`.，或者更好，作为外部 JS 文件）：

```
require([
          // this is the important thing: require the test-env dependency first
          'test-env',

          // then, require the specs
          'some-test-file'
        ], function() {

  mocha.run();
}); 
```

`some-test-file.js`可以这样实现：

```
// some-test-file.js

define(['unit-under-test'], function(UnitUnderTest) {
  return describe('Some unit under test', function() {
    before(function() {
      // locally "global" setup
    });

    beforeEach(function() {
    });

    afterEach(function() {
    });

    after(function() {
      // locally "global" teardown
    });

    it('exists', function() {
      // let's specify the unit under test
    });
  });
}); 
```

# linux - 关闭正在轮询的文件描述符

> ID：10561602
> 
> 赞同：4
> 
> 时间：2012-05-12T06:32:02.817
> 
> 标签：linux, pthreads, file-descriptor

如果我有两个线程（Linux、NPTL），并且我有一个线程轮询一个或多个文件描述符，而另一个线程正在关闭其中一个，这是一个合理的操作吗？我是否在做一些我不应该在 MT 环境中做的事情？

我考虑这样做的主要原因是，我不一定想与轮询线程通信、中断它等，而是出于任何原因只想关闭描述符，并且当轮询线程唤醒时，我希望 revents 包含 POLLNVAL，这表明文件描述符应该在下一次轮询之前被线程丢弃。

我已经进行了一个简单的测试，它确实表明 POLLNVAL 正是将要发生的事情。但是，在这种情况下，仅在超时到期时才设置 POLLNVAL，关闭套接字似乎不会使 poll() 返回。如果是这种情况，我可以终止线程以使 poll() 重新启动以返回。

```
#define _GNU_SOURCE

#include <stdio.h>
#include <pthread.h>
#include <poll.h>
#include <errno.h>
#include <sys/types.h>
#include <unistd.h>
#include <string.h>
#include <signal.h>

static pthread_t main_thread;

void * close_some(void*a) {

    printf("thread #2 (%d) is sleeping\n", getpid());
    sleep(2);
    close(0);
    printf("socket closed\n");
    // comment out the next line to not forcefully interrupt
    pthread_kill(main_thread, SIGUSR1);
    return 0;

}

void on_sig(int s) {
    printf("signal recieved\n");
}

int main(int argc, char ** argv) {

    pthread_t two;
    struct pollfd pfd;
    int rc;

    struct sigaction act;
    act.sa_handler = on_sig;
    sigemptyset(&act.sa_mask);
    act.sa_flags = 0;
    sigaction(SIGUSR1, &act, 0);

    main_thread = pthread_self();

    pthread_create(&two, 0, close_some, 0);

    pfd.fd = 0;
    pfd.events = POLLIN | POLLRDHUP;

    printf("thread 0 (%d) polling\n", getpid());

    rc = poll(&pfd, 1, 7000);

    if (rc < 0) {
        printf("error : %s\n", strerror(errno));
    } else if (!rc) {
        printf("time out!\n");
    } else {
        printf("revents = %x\n", pfd.revents);
    }
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T06:48:17.253

至少对于 Linux，这似乎是有风险的。`close`警告手册页：

> 当同一进程中的其他线程中的系统调用可能正在使用文件描述符时，关闭文件描述符可能是不明智的。由于可以重用文件描述符，因此存在一些可能导致意外副作用的模糊竞争条件。

由于您使用的是 Linux，因此您可以执行以下操作：

*   设置一个`eventfd`并将其添加到投票中
*   `eventfd`当您想关闭 fd 时发出信号（写入）
*   在民意调查中，当您在 上看到活动时，`eventfd`您可以立即关闭 fd 并将其从`poll`

或者，您可以简单地建立一个`signal`处理程序并检查`errno == EINTR`何时`poll`返回。信号处理程序只需将一些全局变量设置为您要关闭的 fd 的值。

* * *

由于您使用的是 Linux，因此您可能希望将其[`epoll`](http://www.kernel.org/doc/man-pages/online/pages/man7/epoll.7.html)视为`poll`.

# jquery - jquery 鼠标悬停抖动

> ID：10561606
> 
> 赞同：0
> 
> 时间：2012-05-12T06:32:50.917
> 
> 标签：jquery, css

我的元素不断抖动，当我将鼠标悬停在父元素上时？任何帮助都会很棒，谢谢！

```
$(document).ready(function(){
    $("div.row1 div.one").mouseover(function() {
        $("div.row1 div.one img").animate({"bottom":"0px"}, "600"); 
    });
    $("div.row1 div.one").mouseout(function() {
        $("div.row1 div.one img").animate({"bottom":"74px"}, "600");    
    });

});

         <div class="row1">
            <div class="one">
                <div class="post_data">
                    <h1 class="post_title">The Post Title</h1>
                    <h2 class="post_snippet">Lorem Ipsum Dolar Sit Amet.</h2>
                    <p class="post_date">3/14/2012</p>
                </div> <!-- post_data //-->
            <img src="test_img1.jpg" alt="test"/>
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T06:33:56.820

在动画之前停止。像这样。

```
$(document).ready(function(){
    $("div.row1 div.one").mouseover(function() {
        $("div.row1 div.one img").stop().animate({"bottom":"0px"}, "600"); 
    }).mouseout(function() {
        $("div.row1 div.one img").stop().animate({"bottom":"74px"}, "600");    
    });

}); 
```

# css - 使用水平滚动条在一行中获取缩略图

> ID：10561616
> 
> 赞同：1
> 
> 时间：2012-05-12T06:34:02.240
> 
> 标签：css, scroll

所有代码都在这里内联：http: [//shanxinc.com/test/fancybox2/](http://shanxinc.com/test/fancybox2/)

我要做的就是将一排缩略图放在一行中。这里提到的`white-space`和`display:inline` [东西](https://stackoverflow.com/questions/1472021/array-of-images-that-have-to-be-placed-in-one-horizontal-line-with-scrolling)不起作用。

因此，代码将显示在我上面的网站上，我什至在尝试 kludgy 之类的`table`东西`table-cell`。这会将缩略图放在一行中，但不显示水平滚动条（我希望缩略图行是其上方大图像的最大宽度）。该 `overflow-x: scroll`指令什么也没做。

问题：

1.  不使用表格和表格单元是否可以达到这种预期效果？我确实希望这是“响应式”，并且不知何故我觉得表格的东西可能无法在移动屏幕上工作。

2.  无论哪种方式，我怎样才能让水平条显示？

非常感谢您的任何想法！

* * *

编辑：这里也添加了代码：

该页面上的html代码非常干净和简单，因此您可以查看源代码吗？

这是HTML：

```
 <div class="holder">
      <img src="demo/img1.jpg" alt="" width="600" height="350">
      <div class="thumbnails">
          <a class="fancybox" rel="group" href="demo/img1.jpg" title="Exciting Title!"><img src="demo/img1s.jpg" alt="" class="thumb"></a>
                <a class="fancybox" rel="group" href="demo/img4.jpg" title="Bonjour!!"><img src="demo/img4s.jpg" alt="" class="thumb"></a>
                <a class="fancybox" rel="group" href="demo/img2.jpg" title="Yup, More Text.."><img src="demo/img2s.jpg" alt="" class="thumb"></a><br />
                <a class="fancybox" rel="group" href="demo/img3.jpg" title="Yelf Up."><img src="demo/img3s.jpg" alt="" class="thumb"></a>
                <a class="fancybox" rel="group" href="demo/img2.jpg" title="Yup, More Text.."><img src="demo/img2s.jpg" alt="" class="thumb"></a><br />
                <a class="fancybox" rel="group" href="demo/img3.jpg" title="Yelf Up."><img src="demo/img3s.jpg" alt="" class="thumb"></a>
          <a class="fancybox" rel="group" href="demo/img1.jpg" title="Exciting Title!"><img src="demo/img1s.jpg" alt="" class="thumb"></a>
                <a class="fancybox" rel="group" href="demo/img2.jpg" title="Yup, More Text.."><img src="demo/img2s.jpg" alt="" class="thumb"></a><br />
                <a class="fancybox" rel="group" href="demo/img4.jpg" title="Bonjour!!"><img src="demo/img4s.jpg" alt="" class="thumb"></a>
          <a class="fancybox" rel="group" href="demo/img1.jpg" title="Exciting Title!"><img src="demo/img1s.jpg" alt="" class="thumb"></a>
                <a class="fancybox" rel="group" href="demo/img3.jpg" title="Yelf Up."><img src="demo/img3s.jpg" alt="" class="thumb"></a>
                <a class="fancybox" rel="group" href="demo/img4.jpg" title="Bonjour!!"><img src="demo/img4s.jpg" alt="" class="thumb"></a>
      </div>
</div> 
```

这是我尝试过的旧 CSS，它不起作用，使用`display: inline`：

```
.holder { width: 600px; display: block;  }
.thumbnails { display: block; overflow-x: scroll !important; height: 75px; white-space: nowrap; }
.thumbnails a { display: inline; width: 75px; height: 50px; float: left; }
.thumbnails a .thumb { width: 75px; height: 50px; display: inline; } 
```

这是我现在正在尝试的：

```
.holder, .thumbnails { width: 600px; }
.thumbnails { display: table; overflow-x: scroll; white-space: nowrap; }
.thumbnails a { display: table-cell; padding-right: 2px  }
.thumbnails a .thumb { width: 75px; height: 50px; } 
```

这会在一行中显示缩略图，但没有水平滚动。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T06:58:11.260

您可以按照以下步骤执行此操作：

1.  删除所有`<br>`元素
2.  `display`将 CSS 类的规则`.thumbnails`从更改`table`为`block`：

`.thumbnails { display: block; overflow-x: scroll; white-space: nowrap; }`

你会得到这个：

[http://oi48.tinypic.com/audpba.jpg](http://oi48.tinypic.com/audpba.jpg)

干杯!

# sql - 使用 MERGE 语句正确更新表（记录）

> ID：10561622
> 
> 赞同：0
> 
> 时间：2012-05-12T06:35:04.500
> 
> 标签：sql, sql-server-2008, tsql

大家，早安！

下面是我拼接在一起的一段代码：我使用 a`CTE`从链接表中获取记录（数据），然后将字符串转换为日期，而不是使用合并语句将数据获取到本地表中：

我的列（字段）有问题，`LAST_RACE_DATE`该字段设置为 NULL 并且不是必需的，但它不会随着我当前的设置而更新。我想要完成的是在输入数据时填充此字段，但也要更新，这意味着它也应该使用 NULL 进行更新。

所以如果该字段有一个特定的日期，并且在远程数据库中输入了一个新的日期，该字段也应该更新，即使在后端删除了数据，它也应该删除该字段的本地表数据。

```
WITH CTE AS(

SELECT MEMBER_ID
  ,[MEMBER_DATE] = MAX(CONVERT(DATE, MEMBER_DATE))
  ,RACE_DATE = MAX(CONVERT(DATE, RACE_DATE))
  ,LAST_RACE_DATE = MAX(CONVERT(DATE, LAST_RACE_DATE))

FROM [EXAMPLE].[dbo].[LINKED_MEMBER_DATA]
WHERE (MEMBER_DATE IS NOT NULL) AND (ISDATE(MEMBER_DATE)<> 0) AND (RACE_DATE IS NOT NULL) AND (ISDATE(RACE_DATE)<> 0) 
       AND (LAST_RACE_DATE IS NULL) OR (ISDATE(LAST_RACE_DATE)<> 0) 

GROUP BY MEMBER_ID)

MERGE dbo.LINKED_MEMBER_DATA AS Target
USING (SELECT 
  MEMBER_ID, MEMBER_DATE, RACE_DATE, LAST_RACE_DATE  

FROM CTE 

GROUP BY MEMBER_ID, RACE_DATE, LAST_RACE_DATE)AS SOURCE ON (Target.MEMBER_ID = SOURCE.MEMBER_ID) 

WHEN MATCHED AND 
   (Target.MEMBER_DATE)  <> (SOURCE.MEMBER_DATE)
OR (Target.RACE_DATE) <> (SOURCE.RACE_DATE)
OR ISNULL(TARGET.LAST_RACE_DATE , Target.LAST_RACE_DATE) <> ISNULL(SOURCE.LAST_RACE_DATE, SOURCE.LAST_RACE_DATE)

THEN UPDATE SET

 Target.MEMBER_DATE   =   SOURCE.MEMBER_DATE   
,Target.RACE_DATE  = SOURCE.RACE_DATE 
,Target.LAST_RACE_DATE = SOURCE.LAST_RACE_DATE

WHEN NOT MATCHED BY TARGET THEN
INSERT(
MEMBER_ID, MEMBER_DATE, RACE_DATE, LAST_RACE_DATE)

VALUES (Source.MEMBER_ID, Source.MEMBER_DATE, Source.RACE_DATE, Source.LAST_RACE_DATE); 
```

我也试过这个：

```
ISNULL(Target.LAST_RACE_DATE,'N/A') <> ISNULL(SOURCE.LAST_RACE_DATE,'N/A') 
```

但它会为日期转换生成以下错误：

*从字符串转换日期和/或时间时转换失败。*

太感谢了！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T06:47:27.237

您当前的语句失败，因为`ISNULL`您拥有的 s 没有做任何事情（如果其中一个值为 NULL，则表达式将评估为 NULL），并且 NULL 值不进行比较。您的第二次尝试不起作用，因为`ISNULL`要求两个值的数据类型相同，因此您可以尝试 eg `ISNULL(Target.LAST_RACE_DATE, '1970-01-01') <> ISNULL(Source.LAST_RACE_DATE, '1970-01-01')`。

另一种选择是简单地列举不同的情况（例如，`((Source.LAST_RACE_DATE IS NULL AND Target.LAST_RACE_DATE IS NOT NULL) OR (Source.LAST_RACE_DATE IS NOT NULL AND Target.LAST_RACE_DATE IS NULL) OR (Source.LAST_RACE_DATE <> Target.LAST_RACE_DATE))`（ ）。

# php - PHP中的搜索和正则表达式

> ID：10561623
> 
> 赞同：2
> 
> 时间：2012-05-12T06:35:08.107
> 
> 标签：php, regex

因为我是 PHP 新手。这是我的 js 代码

```
 var sites = [
 //Texte anime
  {url:" http://carouselinfo.com/canal/", duration:9},
 //Texte anime
  {url:" http://carouselinfo.com/canal-2/", duration:9}, 
  //Intro detallee
 {url:"http://carouselinfo.com/index-t1.html", duration:35},
 //CTA
 {url:"http://carouselinfo.com/index-t2.html", duration:35},
     //Football
  {url:"http://carouselinfo.com/twitter-ligue/", duration:100},  
 //Texte anime
  {url:" http://carouselinfo.com/canal-2/", duration:9},     
  //TrailersClub.com
  {url:"http://trailersclub.com/?lang=fr", duration:480},    
 //Heure
 {url:"http://carouselinfo.com/heure", duration:8},
 //Meteo
 {url:"http://carouselinfo.com/meteo", duration:12},
 //Texte anime
  {url:" http://carouselinfo.com/canal-cine/", duration:9},
 //Cine
 {url:"http://carouselinfo.com/cine/index-t1.html", duration:150},
  //Texte anime
  {url:" http://carouselinfo.com/canal-2/", duration:9}, 
 //Heure
 {url:"http://carouselinfo.com/heure", duration:8},
 //Meteo
 {url:"http://carouselinfo.com/meteo", duration:12},
 //Texte anime
  {url:" http://carouselinfo.com/canal-cine/", duration:9},
   //Cine

 ]; 
```

我想执行一些搜索任务，例如 url 和持续时间，以便在单独的列中显示，但是当我为 http 执行 Regx 时，html 上没有任何内容。

这是我粗略的 PHP 代码：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,'http://carouselinfo.com/contents.js');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
 $contents = curl_exec ($ch);
 $contents = json_encode($contents,true);
 curl_close($ch);
 echo $contents;

 $reg_exUrl = "/(http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/";
 if (preg_match_all($reg_exUrl,$contents,$url))
{
    echo '<br/>';
    echo $url;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T06:47:35.693

首先删除 json_encode 调用。然后应用以下正则表达式，

```
 /url\s*:\s*"([^"]+)"/ 
```

代码应该看起来像。

```
$reg_exUrl = '/url\s*:\s*"([^"]+)"\s*,\s*duration\s*:\s*(\d+)/';
if (preg_match_all($reg_exUrl,$contents,$matches))
{
    print_r($matches[1]); // not using echo here
    print_r($matches[2]); 
} 
```

示例[PHP 片段](http://ideone.com/jDX0F)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T06:48:43.137

问题是 json_encode 正在添加额外的字符（“\”转义字符）或转换其他字符（到它们的 ascii 编码等效项），这意味着您的正则表达式无法匹配。您应该在 $contents 的原始值上运行正则表达式。顺便说一句，不要回显整个 $url 值，因为这是一个数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T06:52:09.220

您有一些错误，但是如何将您的 javascript var 保存为 php var 并执行 foreach 循环？

像这样...

```
$sites = array('http://www.php.net/','http://stackoverflow.com/','http://www.godaddy.com/');
$duration = array('5','100','5000');

foreach($sites as $site){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,$site);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $contents = curl_exec ($ch);
    curl_close($ch);

$reg_exUrl = "/(http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/";
preg_match_all($reg_exUrl,$contents,$urls);
if(isset($urls)){

    var_dump($urls);

}
} 
```

# jruby - warble 编译的 war 不编译使用 ruby 1.9 语言特性的源

> ID：10561635
> 
> 赞同：2
> 
> 时间：2012-05-12T06:37:13.550
> 
> 标签：jruby, jrubyonrails, warbler

我有一个使用 ruby​​ 1.9 语法编写的 jruby on rails 应用程序。当我尝试运行 warble 编译的 war 时，warbler 只为 ruby​​ 文件吐出 .class 文件，这些文件不使用 ruby​​ 1.9 中的新语言功能，例如新的哈希语法 {foo: bar}。我的 config/warbler.rb 和 JRUBY_OPTS=--1.9 中有 config.webxml.jruby.compat.version = "1.9"。我错过了什么吗？

我还在 github 上评论了一个相关的错误： [https ://github.com/jruby/warbler/issues/72#issuecomment-5665639](https://github.com/jruby/warbler/issues/72#issuecomment-5665639)

有没有人用 ruby​​ 1.9 成功编译了 jruby rails 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:13:51.673

莺虫错误，这是解决该问题的拉取请求： [https ://github.com/jruby/warbler/pull/99](https://github.com/jruby/warbler/pull/99)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T04:28:30.930

看起来这是由于莺中的一个小错误导致它始终在 1.8 模式下编译。这里提出了一个修复：http: [//kenai.com/jira/browse/WARBLER-28](http://kenai.com/jira/browse/WARBLER-28)

# iphone - fb图表发布图像错误

> ID：10561636
> 
> 赞同：0
> 
> 时间：2012-05-12T06:38:08.543
> 
> 标签：iphone, facebook-graph-api, ios5, fb-graph

这就像第一次看时重复的问题，但请不要读到最后。

我可以使用 fb graph api 发布图像。

1) 我可以发布照片，但需要大约**2 到 2.5 分钟** 。如何优化它，即如何让它花费更少的时间？2）在发布期间，它会像这样每 10 秒给我一次 nslog

```
 void SendDelegateMessage(NSInvocation*): delegate (webView:resource:didFinishLoadingFromDataSource:) failed to return after waiting 10 seconds. main run loop mode: _kCFURLConnectionPrivateRunLoopMode 
```

如何编码，所以我没有得到这个日志？

我调用 fb graph 的代码来自[这个例子](https://github.com/AalokParikh/iPhone-Facebook-Graph-API)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:21:44.400

好的，从@lgy给出的链接或问题链接中，我得到了最好的工作解决方案，如下所示

```
UIGraphicsBeginImageContext(newSize);
[image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

感谢@Tuan Nguyen 在那里给出了答案，我只是重复一遍，因为它对我有很大帮助，newSize 是 CGSize 类型变量 Happy Coding :)

# c# - 如何将 SqlCommand 类型转换为 Int 类型

> ID：10561637
> 
> 赞同：0
> 
> 时间：2012-05-12T06:38:10.337
> 
> 标签：c#, sql-server-2005, sqlcommand

我想将 SqlCommand 结果转换为 Int 值我该怎么做？请帮助我尝试过的内容如下：

表中的 stp_no 已设置身份属性。我想将自动生成的数字插入另一个表，但它总是显示错误，如“Connot Convert SqlCommand Type to Int Type”

```
 SqlCommand dvgcmd, snocmd;
    snocmd = new SqlCommand("SELECT stp_no FROM MaterialTestMaster", con);
    dvgcmd = new SqlCommand("INSERT INTO MaterialTestDetail(stp_no,test_no,test_name,test_type,test_spec,high_limit,low_limit)" +
                                                     "VALUES('"+ snocmd +"','" + @matTstDataGridView.Rows[j].Cells[0].Value + "'," +
                                                             " '" + @matTstDataGridView.Rows[j].Cells[1].Value + "'," +
                                                             " '" + @matTstDataGridView.Rows[j].Cells[2].Value + "'," +
                                                             " '" + @matTstDataGridView.Rows[j].Cells[3].Value + "'," + 
                                                             " '" + @matTstDataGridView.Rows[j].Cells[4].Value + "'," +
                                                             " '" + @matTstDataGridView.Rows[j].Cells[5].Value + "')", con); 
```

请帮助 M 解决这个问题 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T06:44:05.793

```
SqlCommand dvgcmd;
dvgcmd = new SqlCommand("INSERT INTO MaterialTestDetail(stp_no,test_no,test_name,test_type,test_spec,high_limit,low_limit)" +
                                                 "VALUES((SELECT stp_no FROM MaterialTestMaster),'" + @matTstDataGridView.Rows[j].Cells[0].Value + "'," +
                                                         " '" + @matTstDataGridView.Rows[j].Cells[1].Value + "'," +
                                                         " '" + @matTstDataGridView.Rows[j].Cells[2].Value + "'," +
                                                         " '" + @matTstDataGridView.Rows[j].Cells[3].Value + "'," + 
                                                         " '" + @matTstDataGridView.Rows[j].Cells[4].Value + "'," +
                                                         " '" + @matTstDataGridView.Rows[j].Cells[5].Value + "')", con); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T06:50:56.910

juergen 的答案应该有效，您必须先执行命令，然后将结果用作下一个：

```
int id = int.Parse(snocmd.ExecuteScalar().ToString());
dvgcmd = new SqlCommand("INSERT INTO MaterialTestDetail(stp_no,test_no,test_name,test_type,test_spec,high_limit,low_limit)" +
                                                 "VALUES('"+ id +"','" + @matTstDataGridView.Rows[j].Cells[0].Value + "'," +
                                                         " '" + @matTstDataGridView.Rows[j].Cells[1].Value + "'," +
                                                         " '" + @matTstDataGridView.Rows[j].Cells[2].Value + "'," +
                                                         " '" + @matTstDataGridView.Rows[j].Cells[3].Value + "'," + 
                                                         " '" + @matTstDataGridView.Rows[j].Cells[4].Value + "'," +
                                                         " '" + @matTstDataGridView.Rows[j].Cells[5].Value + "')", con); 
```

# asp.net - 如何在asp.net中将2d图像转换为3d图像

> ID：10561639
> 
> 赞同：0
> 
> 时间：2012-05-12T06:38:39.107
> 
> 标签：asp.net, vb.net, gdi

如何将 2d 图像转换为 3d 图像，就像我需要一个获取 2d 图像路径并返回 3d 图像的函数，任何可用于在 asp.net 或 vb.nt 中提供此功能的 api 或应用程序

# ssis - 在 Excel 源任务中创建行号

> ID：10561648
> 
> 赞同：1
> 
> 时间：2012-05-12T06:40:25.643
> 
> 标签：ssis

我有一个用于将数据提取到 SQL Server DB 的 excel 文件。在 Excel Source，我想像在 T-SQL 中一样创建 ROW_NUMBER() 作为附加列。EXcel Source 查询中可以吗？如何 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:21:21.250

您可以使用脚本组件来做到这一点：[生成代理键](http://sqlis.com/post/Generating-Surrogate-Keys.aspx)

或者您可以下载为您执行此操作的自定义组件。有几个，但这个选项的缩小是你必须处理这个组件的部署（很简单，只需复制dll，但要担心的事情多了）

# ruby-on-rails - Rails 文件结构：一个视图中有 2 个索引列表

> ID：10561652
> 
> 赞同：0
> 
> 时间：2012-05-12T06:41:44.503
> 
> 标签：ruby-on-rails, naming-conventions

我只是在帮助一个朋友创建一个小项目。他喜欢将 2 个模型放在一个视图中（两种模型的摘要，请参见下面的代码）

```
class UnnamedController < ApplicationController
  def index
     @models1 = Model1.all
     @models2 = Model2.all
  end
end 
```

然后在视图中

```
<% @models1.each do |book| %>
...
<% @models2.each do |book| %>
... 
```

这是正确的方法吗？

如何命名控制器和视图（Rails 约定）？

希望我的英语不错，感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:30:43.390

Ruby 中的类通常使用 CamelCase 命名，因此“UnnamedController”是控制器的正确名称，就像“ApplicationController”也是。

视图以调用它们的操作命名，因此如果您的操作称为“index”，那么您的视图文件名应该是“index.html.erb”。

所以你做对了。

# iphone - 未调用 UIApplicationDelegate 方法

> ID：10561655
> 
> 赞同：1
> 
> 时间：2012-05-12T06:43:04.933
> 
> 标签：iphone, objective-c, ios, unity3d, uiapplicationdelegate

我正在尝试创建一个用于区域监控的插件。区域监控开始正常，但没有调用功能 didfinishlaunching 和 didrecievelocalnotification。我不确定为什么会这样。

regionMonitoring.h

```
 #import <Foundation/Foundation.h>
    #import <CoreLocation/CoreLocation.h>

    @interface RegionMonitoringPlugin : NSObject <UIApplicationDelegate,CLLocationManagerDelegate>
    {
        CLLocationManager *locationManager; 
    }

    -(void)enterRegionNotify;
    -(void)leaveRegionNotify;
    -(void)startMonitor:(float)latitude longitude:(float)longitude radius:(float)raduis;

    @end 
```

regionMonitoring.mm

```
#import "RegionMonitoringPlugin.h"

@implementation RegionMonitoringPlugin

- (id) init
{
    //if ( init == [super init]){
    if (locationManager==nil){
        locationManager = [[CLLocationManager alloc] init];
        locationManager.delegate = self;
        [locationManager setDistanceFilter:kCLDistanceFilterNone];
        [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
    }

    return self;
}

-(void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region
    {
        [self enterRegionNotify];
    }

-(void)locationManager:(CLLocationManager *)manager didExitRegion:(CLRegion *)region
    {
        [self leaveRegionNotify];
    }

- (void)locationManager:(CLLocationManager *)manager monitoringDidFailForRegion:(CLRegion *)regionwithError:(NSError *)error
    {
        NSLog(@"Location error %@, %@", error, @"Fill in the reason here");
    }

-(void)leaveRegionNotify
{
    NSLog(@"Starting region monitoring - check point 3");

    UILocalNotification *note = [[UILocalNotification alloc] init];
    note.alertBody= @"Region Left"; // ToAsk: What should be displayed
    note.soundName = UILocalNotificationDefaultSoundName;
    [[UIApplication sharedApplication] presentLocalNotificationNow:note];
    [note release];

}

-(void)enterRegionNotify
{
    UILocalNotification *note = [[UILocalNotification alloc] init];
    note.alertBody= @"Region Left"; //ToAsk: what should be displayed ? 
    note.soundName = UILocalNotificationDefaultSoundName;
    [[UIApplication sharedApplication] presentLocalNotificationNow:note];
    [note release];

}

-(void)startMonitor:(float)latitude longitude:(float)longitude radius:(float)radius
{ 
    NSLog(@"Starting region monitoring - check point 2");
    [self leaveRegionNotify];
    CLLocationCoordinate2D home;
    home.latitude = latitude;
    home.longitude = longitude;
    CLRegion* region = [[CLRegion alloc] initCircularRegionWithCenter:home radius:radius identifier:@"region"];
    [locationManager startMonitoringForRegion:region desiredAccuracy:kCLLocationAccuracyBest];
    [region release];    
}

- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification 
{ 
    NSLog(@"Starting region monitoring - checkpoint 4");

    if ([UIApplication sharedApplication].applicationState == UIApplicationStateActive) {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Region Monitor Notification" message:notification.alertBody delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil]; 
        [alertView show]; 
        [alertView release];
    } 
}

- (BOOL)application:(UIApplication *) application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
      NSLog(@"Test");
    return TRUE;
}

@end

extern "C" {
        static RegionMonitoringPlugin *regionMonitor;

        // Unity callable function to start region monitoring
        BOOL _startRegionMonitoring(float m_latitude,float m_longitude, float m_radius)
        {

            NSLog(@"Starting region monitoring");
            if (![CLLocationManager regionMonitoringAvailable] || ![CLLocationManager regionMonitoringEnabled] )
                return NO;

            if (regionMonitor == nil){
                regionMonitor = [[RegionMonitoringPlugin alloc]  init] ;
            }
            [regionMonitor startMonitor:m_latitude longitude:m_longitude radius:m_radius];
            return YES;

        }
} 
```

插件的统一代码：RegionMonitorMediater.h

```
using UnityEngine;
using System.Collections;
using System.Runtime.InteropServices;

public class RegionMonitoringMediator {

    /*Interface to native implementation */
    [DllImport ("__Internal")]
    private static extern bool _startRegionMonitoring (float m_latitude,float m_longitude, float m_radius);

    public static bool startRegionMonitoring (float latitude,float longitude, float radius)
    {
         /*Call plugin only when running on real device*/
        if (Application.platform != RuntimePlatform.OSXEditor)
            return _startRegionMonitoring ( latitude , longitude , radius);
        else return false;

    }
} 
```

调用区域监视器

我做的 OnPress 活动

```
bool startedRM = RegionMonitoringMediator.startRegionMonitoring(77.0f,28.0f,10.0f); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T06:46:33.657

`init`应该在开始时包括对 super 的调用：

```
- (id) init
{
    if (self = [super init])
    {
        // initialize everything else
    }
    return self;
} 
```

请注意，我们使用了赋值 ( `=`) 运算符，而不是比较 ( `==`) 运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T10:20:14.843

`UIApplicationDelegate`每个应用程序只允许一个。当 Unity3D 为 iPhone 播放器构建应用程序时，`AppController`会生成一个用作接口的类。

这个类是插入你的代码来调用的地方`RegionMonitoringPlugin`。

# java - MSSQL 服务器 2005-JDBC 连接

> ID：10561657
> 
> 赞同：0
> 
> 时间：2012-05-12T06:43:27.093
> 
> 标签：java, sql-server, eclipse, jdbc

我正在尝试使用 JDBC 在 JAVA 中连接 Microsoft SQL Server 2005，但出现以下异常。我的项目没有在 Eclipse 中运行，它说“未找到请求的资源”（完成所有服务器配置以及从服务器添加和删除项目），当我从控制台运行它时，它显示“找不到类异常”我已经放JARs 通过使用构建路径并放入 WEB-INF/lib。但没有得到连接是我的代码。

```
import java.sql.Connection;  
import java.sql.DriverManager;  
import java.sql.ResultSet;  
import java.sql.Statement; 

import com.microsoft.sqlserver.jdbc.SQLServerDriver;
/** 
 * @author www.javaworkspace.com 
 *  
 */  
public class SMSdao {  
    public static void main(String[] args) {  
        try {  

         Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
            Connection connection = DriverManager  
                    .getConnection(  
                            "jdbc:sqlserver://192.128.10.17:1433;databaseName=TEK_R;selectMethod=cursor",  
                            "sa", "sai@123");  

            System.out.println("DATABASE NAME IS:"  
                    + connection.getMetaData().getDatabaseProductName());  
            Statement statement = connection.createStatement();  
            ResultSet resultSet = statement  
                    .executeQuery("SELECT * FROM dbo.SMS_OUT");  
            while (resultSet.next()) {  
                System.out.println("Message:"  
                        + resultSet.getString("MessageIn"));  
            }  
        } catch (Exception e) {  
            e.printStackTrace();  
        }  
    }  
} 
```

并且堆栈 trcae 是：

```
java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:186)
        at SMSdao.main(SMSdao.java:13) 
```

尝试了一切并完成了我在网上找到的所有事情。我在 Windows 7 上使用 jdk 7 和 tomcat 6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T06:48:36.130

您需要从 microsoft 下载 SQLServerDriver JDBC。Class.forName 正在搜索您指定的类名称，但在您的类路径中找不到它。

[http://msdn.microsoft.com/en-us/sqlserver/aa937724](http://msdn.microsoft.com/en-us/sqlserver/aa937724)

只需将 jar 放在您的项目类路径中（tomcat 的共享库更好）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T06:54:24.803

我还建议改用 jTDS：http: [//jtds.sourceforge.net/](http://jtds.sourceforge.net/)

从历史上看，微软的 JDBC 驱动程序未能完全实现 JDBC 规范中重要且有用的部分。jTDS 应该功能更全面并且是开源的。

# php - 如何在 PHP 中比较 2 个数组？

> ID：10561658
> 
> 赞同：2
> 
> 时间：2012-05-12T06:43:33.280
> 
> 标签：php

这是第一个数组：

```
$possible_combinations = array(
    1 => array(1),
    2 => array(2),
    3 => array(3),
    4 => array(4),

    5 => array(1, 2),
    6 => array(1, 3),
    7 => array(1, 4),       

    8 => array(2, 3),
    9 => array(2, 4),       

    10 => array(3, 4),

    11 => array(2, 3, 4),
    12 => array(1, 3, 4),
    13 => array(1, 2, 4),
    14 => array(1, 2, 3),

    15 => array(1, 2, 3, 4)
); 
```

这是第二个数组：

```
$seeking = array(2, 3, 4); 
```

正如你所看到的`$possible_combinations[11]`match `$seeking`。

在这种情况下 $seeking 的值是 2, 3, 4 但在其他时候可能不同。如何检查 $possible_combinations 数组以查看 $seeking 数组是否匹配该关联数组的任何值。如果有的话，它应该返回匹配的键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T06:49:14.523

> *“该关联数组的任何值”*

您的问题中没有任何关联数组。`$possible_combinations`是一个*多维*数组。不过，您可以使用[`in_array`^(*docs*)](http://php.net/manual/en/function.in-array.php)：

`var_dump(in_array(array(2, 3, 4), $possible_combinations)); // true`

如果您需要知道在大海捞针中找到针的索引，请`array_search`按照其他答案所述使用。哦，还要注意它`array_search`可以返回零，所以你应该在检查结果时验证它是返回值`!== FALSE`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T06:47:58.333

您可以为此使用 PHP 的内置`array_search()`函数。

```
$search = array_search($seeking,$possible_combinations);

if ($search !== FALSE) {
    echo 'Found at ' . $search;
} else {
    echo 'Not Found';
} 
```

[http://www.php.net/manual/en/function.array-search.php](http://www.php.net/manual/en/function.array-search.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T06:49:28.393

我会说，使用`array_search`：

```
var_dump(array_search($seeking, $possible_combinations, true)); 
```

如果找到则返回密钥，`FALSE`否则返回。所以一定要使用`===`来比较，即

```
if (false !== ($key = array_search($seeking, $possible_combinations, true))) {
    echo "Found here: $key";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T07:14:34.360

`array_keys()`找到所有可能的关键匹配。 `array_search()`将返回第一次出现。

```
var_dump(array_keys($possible_combinations, $seeking, true)); 
```

将匹配 0 和 11 假设

```
$possible_combinations = array(
     0 => array(2, 3, 4),
    ...
    11 => array(2, 3, 4),
);

$seeking = array(2, 3, 4); 
```

### 输出：

```
array
  0 => int 0
  1 => int 11 
```

# sharepoint - sharepoint 列表版本历史导出到 excel

> ID：10561661
> 
> 赞同：6
> 
> 时间：2012-05-12T06:43:55.403
> 
> 标签：sharepoint, version-control, export

再会 ！

我需要在excel中做日志数据项的导出版本。 [不幸的是，我无法使用此解决方案](http://mosshistoryexport.codeplex.com/)，因为我来自俄罗斯，并且该解决方案仅支持拉丁字母。所以我最需要学习的是从单个项目列表的版本历史中提取数据。

请帮忙。这是怎么做的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-03-07T15:44:12.617

虽然我还没有找到一种干净的方法，但我有一个部分解决方法。

1.  使用功能区列表部分中的导出到 Excel 选项（确保您导出的列表视图包含修改的列 - 感谢 T6J2E5）。
2.  保存 owssvr.iqy 文件并用记事本打开
3.  只复制文件中的 URL 并将其粘贴回浏览器，添加“&IncludeVersions=TRUE”
4.  保存 XML 文件并在 Excel（或您喜欢的 XML 查看器）中打开，选择“作为 XML 表”打开选项。
5.  您必须删除前几列和行，因为它们包含架构数据，但除此之外，您应该拥有所有版本历史记录（我建议您将版本列添加到视图中）。您可以按 Modified 列进行排序，以获取整个列表的时间变化日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-14T12:32:31.040

仅供参考，“IncludeVersions=TRUE”应该在任何其他需要它的人的列表 ID 之前。spurl/_vti_bin/owssvr.dll?XMLDATA=1&IncludeVersions=TRUE&List={ListID}&View={VIEWID}&RowLimit=0&RootFolder=name

在执行缺少分号的相同操作后，我面临错误。如何解决它。

# php - 有没有办法检查其中一个数组条目是否包含 MongoDB 中的子数组？

> ID：10561663
> 
> 赞同：-1
> 
> 时间：2012-05-12T06:44:24.443
> 
> 标签：php, mongodb

由于我的 PHP 脚本中的错误，我在 MongoDB 中创建了多个错误条目。具体来说，我使用了 $addToSet 和 $each 在某些情况下，MongoDB 对象被错误地更新如下：

```
array (
  '_id' => new MongoId("4fa4f815a6a54cedde000000"),
  'poster' => 'alex@randommail.com',
  'image' => 
  array (
    '0' => 'image1.jpg',
    '1' => 'image2.jpg',
    '2' => 'image3.png',
    '3' => 
    array (
      '$each' => NULL,
    ),
  ), 
```

您可以看到“image.3”与其他数组条目不同，这是不正确的条目。我已经在我的 PHP 脚本中修复了相关问题，但是我在追踪 MongoDB 中所有受影响的条目以删除这些条目时遇到了困难。

MongoDB中有什么方法可以检查任何图像数组条目是否包含另一个数组而不是字符串？由于包含子数组的索引是一个变量，因此不可能对 image.3 上的每个条目执行 $type 检查。

可以使用任何建议。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T06:48:18.067

由于这是您的 PHP 中的错误，我想，现在您想要升级所有错误的文档。

如果是这样，您可以*找到*数组项本身就是数组的所有文档。

```
> db.arr.insert({values: [1, 2, 3, [4, 5]]})
> db.arr.insert({values: [6, 7, 8]})
> 
> db.arr.find({values: {$type: 4}})
{ "_id" : ObjectId("4fae0750d59332f28c702618"), "values" : [ 1, 2, 3, [ 4, 5 ] ] } 
```

现在让我们解决这个问题。为了删除这些条目而不将它们提取到 PHP，我提供了这个简单的两步操作。

首先，找到所有包含数组的文档并取消设置这些数组。这将留下空值代替它们。注意，它只会匹配和更新文档中的第一个数组。如果有多个，要重复操作

```
> db.arr.update({values: {$type: 4}}, {$unset: {'values.$': 1}}, false, true);
> db.arr.find()
{ "_id" : ObjectId("4fae0750d59332f28c702618"), "values" : [ 1, 2, 3, null ] } 
```

删除空值。

```
> db.arr.update({values: null}, {$pull: {values: null}}, false, true);
> db.arr.find()
{ "_id" : ObjectId("4fae0750d59332f28c702618"), "values" : [ 1, 2, 3 ] } 
```

# analytics - Adsense 信息未显示在分析中

> ID：10561664
> 
> 赞同：0
> 
> 时间：2012-05-12T06:44:54.103
> 
> 标签：analytics, adsense

在网站[www.movi​​q.nl](http://www.moviq.nl)上，我们实施了 adsense。我将 Adsense 帐户与我们的分析帐户耦合，但即使几天后，AdSense 统计数据也没有显示在分析中。我在 head 部分中放入了用于分析的代码，并复制/粘贴了添加的代码。还有什么我应该做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T01:12:20.577

如果该网站不是您的主域，您需要[AdSense Analytics 代码](https://support.google.com/adsense/bin/answer.py?hl=en&answer=94743)（与常规 Analytics 代码不同）。

可悲的是，我一直无法[在 SO 上找到它并对此有疑问](https://stackoverflow.com/questions/10568669/cannot-find-adsense-analytics-code)。

附带说明一下，Analytics 代码（如果您指的是常规代码）应该就在`</body>`标签之前，而不是在 head 部分。

# swing - 摆动中有“队列小部件”吗？

> ID：10561665
> 
> 赞同：0
> 
> 时间：2012-05-12T06:45:02.723
> 
> 标签：swing

我正在尝试构建一个简单的管理系统，并且我想显示存储所有作业的队列。是否有一个摆动的小部件可以用来实现它？干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T06:52:13.527

最适合显示队列的 Swing 组件可能是[JList](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)或[JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)。

如何将数据放入 Swing 组件取决于您的队列是如何实现的。

# php - PHP preg_match_all 嵌套太深

> ID：10561673
> 
> 赞同：1
> 
> 时间：2012-05-12T06:46:42.767
> 
> 标签：php, regex, multidimensional-array, nested, preg-match-all

我在这里发现了一个类似的问题，但并不完全符合我的情况。我对 PHP 比较陌生，但已经阅读了 *preg_match_all* 的手册。

我正在解析页面以查找日期。它始终采用相同的格式（例如**13 Apr 2012**）。这是我的 *preg_match_all* 声明：

```
$eventDateRegex = '/[0-9]{2}\s[A-Z]{1}[a-z]{2}\s[0-9]{4}/';
preg_match_all($eventDateRegex, $parsedEvent, $eventDates[$i]); 
```

*$i*只是一个迭代器，因为它在*for*循环中。我在*$eventDates*中收到了正确的结果，但是，它似乎嵌套得太深了一层。

我的结果是这样的：

```
array
  0 => 
    array
      0 => 
        array
          0 => string '19 Apr 2012' (length=11)
          1 => string '24 May 2012' (length=11)
  1 => 
    array
      0 => 
        array
          0 => string '21 Apr 2012' (length=11)
          1 => string '30 Jun 2012' (length=11) 
```

而我更希望它是：

```
array
  0 => 
    array
      0 => string '19 Apr 2012' (length=11)
      1 => string '24 May 2012' (length=11)
  1 => 
    array
      0 => string '21 Apr 2012' (length=11)
      1 => string '30 Jun 2012' (length=11) 
```

这是可能的还是仅仅是因为 *preg_match_all* 吐出多维数组的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T06:53:25.817

您将获得所需格式的结果。EventDates 数组中的第一级索引是由您的 for 循环和您对索引 $i 的使用生成的。例如，数组中的第一个元素

```
array
  0 => 
    array
      0 => 
        array
          0 => string '19 Apr 2012' (length=11)
          1 => string '24 May 2012' (length=11) 
```

是正确的数组结构

```
array
          0 => 
            array
              0 => string '19 Apr 2012' (length=11)
              1 => string '24 May 2012' (length=11) 
```

但在 eventDates 的位置 0 因为您将 $eventDates[0] 作为匹配数组传递给 preg 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-15T16:33:53.333

您可以使用从不返回*数组数组的*[T-Regx](https://t-regx)

 *```
$eventDateRegex = '\d{2} [A-Z][a-z]{2} \d{4}';
$eventDates[$i] = pattern($eventDateRegex)->match($parsedEvent)->all(); 
```

这将返回：

```
[
   ['19 Apr 2012', '24 May 2012']    // first $i
   ['21 Apr 2012', '30 Jun 2012']    // second $i
] 
```

PS：请注意，感谢[T-Regx](https://t-regx) -`$eventDateRegex`没有`/`分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T07:55:11.390

如果你愿意，你可以重组数组。

```
$arr = array(
            array(
                array('19 Apr 2012', '24 May 2012')
                ),
            array(
                array('21 Apr 2012', '30 Jun 2012')
                )
            );

for ($i = 0; $i < count($arr); $i++)
    $arr[$i] = $arr[$i][0];

var_dump($arr); 
```

你会得到

```
array
  0 => 
    array
      0 => string '19 Apr 2012' (length=11)
      1 => string '24 May 2012' (length=11)
  1 => 
    array
      0 => string '21 Apr 2012' (length=11)
      1 => string '30 Jun 2012' (length=11) 
```*

# android - 如何从整个字符串中获取超链接

> ID：10561683
> 
> 赞同：0
> 
> 时间：2012-05-12T06:48:13.717
> 
> 标签：android

1.  我创建了一个应用程序，在其中我从 Web 服务获得响应。

2.  回复是“我可能有危险。我已经触发了与你相关的恐慌警报。现在给我打电话。如果我没有接听，请联系警察。我的位置是：http://maps.google.com /maps?q=21.183783,72.823548"

    3.我将字符串存储在文本视图中。我想在浏览器中打开 HTTP URL，点击文本。但是我怎样才能在整个字符串中获取 HTTP URL 请给我想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T06:55:40.903

```
var response = "ur response string";
var indexofHttp = response.indexOf('http://');
var url = response.substring(indexofHttp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T07:04:01.693

您可以使用 php 轻松完成此操作...

如果您能够运行 php，则应该这样做。

```
$string = $_GET['string']; 
```

或者

```
$string = $_POST['string']; 
```

这可能会根据您从网站获得回复的方式而改变，请随时将您获得回复的表格发送给我，并相应地进行更改。

```
$string_chunks = explode('http://',$string,2);
$url = 'http://'.$string_chunk['1']; 
```

基本上，这将获取字符串，找到“http://”并从中创建 2 个字符串。一种是“http://”之前的内容，一种是后面的内容，即url。所以它会返回 $string_chunk['0'] 和 $string_chunk['1']

# google-docs-api - 我可以使用 google api 设置文件锁定吗？

> ID：10561691
> 
> 赞同：5
> 
> 时间：2012-05-12T06:49:16.147
> 
> 标签：google-docs-api, google-drive-api

当我看Gdrive时，还有一个fuse客户端来挂载Gdrive。我想知道，当通过此客户端修改 Gdrive 上的文件时，该文件是否“锁定”或以任何其他方式设置为“正在使用”以防止他人修改互联网上的“原始”？我还没有找到任何关于这个的东西。Google docs api没有锁定方法吗？

斯蒂芬·邦

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T17:50:44.473

没有这样的功能，但您可以使用[文件条目的 ETag](https://developers.google.com/google-apps/documents-list/#updatingchanging_documents_and_files)来确保在获取文件后没有其他人更改过该文件。这不是完全一样的东西，但它可以达到相同的效果，确保来自一个地方的更改不会被来自另一个地方的更改覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T06:53:31.547

很确定他们没有那个。您应该考虑在[Google Docs 功能请求论坛](http://groups.google.com/a/googleproductforums.com/forum/#!forum/docs)中提出建议。

# java - 这个多线程 Java 代码是如何工作的？

> ID：10561693
> 
> 赞同：3
> 
> 时间：2012-05-12T06:49:43.593
> 
> 标签：java, multithreading

鉴于此 Java 代码：

```
class Account {
        private Integer number = 0;
        public synchronized void setNumber(Integer number) {
            this.number = number;
        }

         public synchronized Integer getNumber() {
            return number;
        }
    }

    class Client extends Thread {
        Account account;
        public Client(Account account) {
            this.account = account;
        }
        public  void run() {
            for (int i = 1; i <= 1000; i++) {
            account.setNumber(account.getNumber() + 1);
             }
        }
    }

    public class Run {
        public static void main(String[] args) throws Exception {
            Account account = new Account();
            Client one = new Client(account);
            Client two = new Client(account);
            one.start();
            two.start();
            one.join();
            two.join();
           System.out.println("Exiting main");
       System.out.println("account number value: " +account.getNumber());        
        }
    } 
```

`number`main 方法完成时的值是多少？是2000还是2000以下？我得到的数量少于 2000。鉴于每个线程都是同步的，如何同时调用`getNumer()`或`setNumber()`从两个线程调用？`run()`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T06:58:14.883

仔细思考下一节会发生什么。

```
account.setNumber(account.getNumber() + 1); 
```

尽管这两种方法是单独同步的，但整个操作却不是。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-12T07:08:14.967

该数字可能小于或等于 2000，但永远不会更高。考虑每个“set”和“get”数字函数分别同步*但*它们不同步*在一起*。这意味着线程之间的竞争条件可能会“跳过”对组合“增量”效果的调用。

考虑两个线程之间可能的调用序列：

```
number  Thread1     Thread2
0       get => 0    -
-       -           get => 0
-       -           incr => 1
1       -           set => 1
-       incr => 1   -
1       set => 1    - 
```

请注意，每个线程都获得数字零，分别递增，然后设置数字一。两个线程都认为他们增加了数字，但是他们对 set/get 的调用是交错的，因此其中一个被有效地跳过了。

相比之下，尝试在 Account 类中编写第三个同步方法，该方法以`increment()`原子方式执行 get/increment/set 序列，并看到您将始终获得数字 2000。

# asp.net - 在每个函数调用上向 XML 添加新的子节点

> ID：10561694
> 
> 赞同：0
> 
> 时间：2012-05-12T06:49:58.177
> 
> 标签：asp.net, xml, vb.net

我有一个 XML 文件，并且我有一个函数，这个 XML 作为字符串传递给它。我已经在 Xmldocument 中加载了这个字符串，我需要在一个节点下插入几个子节点。此函数返回修改后的 XML 字符串。我希望每当调用此函数时，都会添加新的子节点，目前，它会添加一次子节点。

我需要覆盖 XML 文件吗？如果是这样，我如何用新节点（添加了新的子节点）替换节点，以便在再次调用函数之前添加子节点？

我的代码看起来像这样：

```
Dim doc As New XmlDocument
doc.LoadXml(applicationXml)
Dim parentNode As XmlNode = doc.GetElementsByTagName("prList").Item(0)

Dim newElement As XmlNode = doc.CreateNode(XmlNodeType.Element, "gate.util.persistence.LanguageAnalyserPersistence", Nothing)

Dim runtimeParamsElement As XmlNode = doc.CreateNode(XmlNodeType.Element, "runtimeParams", Nothing)
Dim xa As XmlAttribute = doc.CreateAttribute("class")
xa.Value = "gate.util.persistence.MapPersistence"
runtimeParamsElement.Attributes.Append(xa)

localMapElement = doc.CreateNode(XmlNodeType.Element, "localMap", Nothing)
featuresElement.AppendChild(localMapElement)

newElement.AppendChild(featuresElement)

Return doc.InnerXml 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T08:14:06.060

您没有显示足够的代码来确定确切的问题。您要替换哪个节点？featuresElement 是从哪里来的？这里有几个答案：

1.  是的，您需要使用新文档替换整个文件。
2.  您无需将节点替换为新节点。只需将目标节点传递给您的函数。该函数应在父节点上调用 appendChild() 来添加子节点。
3.  当您将文档写入文件时，[例如](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.save%28v=vs.71%29.aspx)，它将具有新节点。

# list - 从给定列表制作两个列表

> ID：10561697
> 
> 赞同：1
> 
> 时间：2012-05-12T06:50:40.747
> 
> 标签：list, prolog

我正在努力了解 Prolog 列表。

这是我的问题：我需要接受一个列表和两个变量，并将奇数元素存储在列表 A 中，将偶数元素存储在列表 B 中。

我得到了这个，但它没有给出我正在寻找的结果

```
store(X, [], []).
store([X,Y|Z],[X|_],[Y|_]):-store(Z,X,Y). 
```

结果应该是：

```
where ?- store ([a,b,c,1,2,3], A, B).
         A = [b,1,3].
         B = [a,c,2]. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T07:04:47.953

要从列表参数构建其他列表，请对其进行递归访问，并在适当的位置存储元素。看看你能不能完成这个片段

```
odd_even([], [], []).
odd_even([N|Ns], [N|Odds], Evens) :-
   odd(N),
   !, odd_even(Ns, Odds, Evens).
% here another odd_even for evens

odd(N) :-
  ... % use rem/2 to find the integer remainder of N is 1 
```

*编辑*：要移动列表中偶数*位置*的元素和另一个列表中*奇数*位置的元素（通常称为*split*），访问只是将它们放在两个额外的参数上：我们需要一个终止规则，因为现在我们一起考虑两个*参数*要拆分的列表。

```
split([], [], []).
split([X], [], [X]).
split([X,Y|R], [X|Xs], [Y|Ys]) :-
   split(R,Xs,Ys). 
```

there is a case to consider: if odd vs even must be 'counted' from the end of list. Then we should swap (eventually) the lists when done...That would require to add 2 more arguments to the recursive visit, or count the num.of.elements to decide beforehand where to aplce them...

# database - 技能匹配算法

> ID：10561700
> 
> 赞同：3
> 
> 时间：2012-05-12T06:51:23.947
> 
> 标签：database, algorithm, search, matching

我需要实现类似于[http://venturocket.com](http://venturocket.com)的技能匹配功能- 候选人输入技能列表并对每个技能的熟练程度进行评分。然后，您可以通过再次输入您正在寻找的一些技能和专业水平进行搜索。结果是根据他们的技能与您的搜索匹配程度排序的候选人列表。

例子：

考生 1 进入技能 Java（熟练度 90），考生 2 进入 Java（50）。当我搜索 Java (60) 时，候选 2 更接近。

这也适用于多种技能。

我正在寻找的是可以帮助我实现这一目标的技术或算法的指针。我目前的方法是在数据库中进行范围查询（例如查找 45 到 75 之间的 Java 技能），然后在客户端上进行排序，但这不会很快。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T07:00:15.600

将您要检查的值作为查询的参数传递，然后使用欧几里德距离（差的平方）进行排序：

```
SELECT TOP 20 * -- added a TOP 20 as example, choose/limit as appropriate for your situation
FROM Candidate
ORDER BY SQUARE(Candidate.JavaProficiency - @JavaProficiency) + SQUARE(Candidate.SqlProficiency - @SqlProficiency) 
```

对于多个特征，您可以总结每个平方差异。

有关更多详细信息，请参见[维基百科：欧几里得距离（特别是“平方欧几里得距离”部分）。](http://en.wikipedia.org/wiki/Euclidean_distance)请注意，这个答案实际上是 DanRedux 的（见评论/编辑）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T15:54:37.377

如果我被要求实现这样的东西，我会从查看聚类算法开始。

通过根据候选人在许多属性（技能）上的相似程度将候选人分组在一起，很容易找出最有可能与您的搜索参数匹配的候选人集群。

k-means 聚类相当容易使用，可能是一个很好的起点。 [http://en.wikipedia.org/wiki/K-means_clustering](http://en.wikipedia.org/wiki/K-means_clustering)

在大多数编程语言中都有可靠的 k-means 实现，因此入门应该相当容易。

Programming Collective Intelligence 中有很多关于基于集群的过滤的好信息 — <a href="http://shop.oreilly.com/product/9780596529321.do" rel="nofollow">http://shop.oreilly。 com/product/9780596529321.do

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T00:18:21.590

您可以将此视为[信息检索](http://en.wikipedia.org/wiki/Information_retrieval)问题并使用[余弦相似度](http://en.wikipedia.org/wiki/Cosine_similarity)。

这涉及为每个候选人形成一个向量，该向量包含他们为每个标签输入的分数。未提及的标签得分为 0。查询被类似地转换，让用户为每个标签请求一个分数，或者可能只是将提及的标签视为高分等。使用点积和量值，可以计算查询之间的相似性分数以及每位候选人；排序并选择最高的。

这些是您自己实施它的大致步骤。在任何严肃的应用程序中，我建议您*不*要这样做，而是使用[sphinx](http://sphinxsearch.com/)或[lucene](http://lucene.apache.org/core/)之类的东西来为您做这件事。

# c# - 为什么会出现这种奇怪的行为？

> ID：10561708
> 
> 赞同：0
> 
> 时间：2012-05-12T06:52:59.110
> 
> 标签：c#, .net, c#-4.0

我无法理解这两种奇怪的行为

**1\. 第一行为**

我已经声明了一个这样的变量

```
double[][] dd =
{
    new double[10],
    new double[10]
}; 
```

它不会给出错误。

但是，如果我这样做，它会给出错误

```
double[][] dd;

dd = { // Here it gives 2 errors says Invalid Expression { and ; expected 
      new double[10], 
      new double[10] //Here and in the above line it says only  
                     //assignment, call, increment....can be used as a statement
     }; 
```

如果我这样做，错误就消失了

```
double[][] dd;

dd = new double[][]{
                     new double[10],
                     new double[10]
                   }; 
```

为什么？

**2\. 第二种行为**

`,`此外，在上述任何情况下，如果在数组的最后一个元素之后放置一个额外的逗号，则不会出错

```
{
 new double[10],
 new double[10], //This comma here is not given as error. Why?
}; 
```

如果该额外的逗号未指定应在其后添加一个实体。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T06:57:31.093

相当古老的文档，但仍然相关。您正在查看的是[Array Initializers](http://msdn.microsoft.com/en-us/library/aa664573%28v=vs.71%29.aspx)

> 可以在*字段声明*（第 10.4 节）、*局部变量声明*（第 8.5.1 节）和*数组创建表达式*（第 7.5.10.2 节）中指定数组初始值设定项。

请注意，它并没有说它们在*赋值*语句中可用，这是您在第一个错误时尝试的。

* * *

对于您的第二个问题，允许额外的原因`,`是方便 - 如果您不必对第一项或最后一项进行特殊处理，那么如果以编程方式生成代码，这将特别有用。您会在例如枚举声明中找到类似的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T06:59:26.210

1.  您的示例是 C# 的[Array Initializer](http://msdn.microsoft.com/en-us/library/aa664573%28v=VS.71%29.aspx)语法的示例。初始化表达式只能出现在定义变量的行上。在我看来，您希望该`{}`符号很像 Python 或 Ruby 的`[]`数组文字表达式。他们不是真的。

2.  它允许尾随逗号只是为了更容易更统一地拥有一个进入初始化程序的项目列表，这些项目会随着时间的推移而改变长度。例如，既然你有那个逗号，那么在末尾添加一个新项目只涉及编辑一行，而不是编辑一行来添加逗号和另一行来添加新内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T02:39:44.543

1.  首先是由于其他人提到的数组初始化器。[使用 Object Initializers 和 Collection Initializers](http://msdn.microsoft.com/en-us/library/bb384062(v=vs.110).aspx)将类似的行为扩展到其他对象。

2.  请参阅[.NET 的 Jon Skeet 答案现在支持数组中的尾随逗号，就像 python 一样](https://stackoverflow.com/questions/3758490/net-now-support-trailing-comma-in-array-like-python-does)

# android - 重新安装操作系统后无法获取连接工厂客户端

> ID：10561709
> 
> 赞同：0
> 
> 时间：2012-05-12T06:53:00.953
> 
> 标签：android

当我第一次获得生成 MD5 指纹的 api 密钥时，我的应用程序运行良好。但是在格式化我的 Windows 7 操作系统并现在重新安装后，我收到“MapActivity：无法获取连接工厂客户端”错误。我用 keytool 获得了新的 MD5 指纹，但有了这个新的指纹，我不能生成 api key 它说“您输入的指纹无效”。另一方面，提交旧的 MD5 指纹我得到了相同的旧 api 密钥，它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T04:21:32.233

我第一次用 jk6 制作 MD5 指纹，但是在重新安装我的操作系统后，我用 jdk7 制作了 MD5 指纹。无论再次安装操作系统，我已经用 jdk6 制作了 MD5 指纹，现在这一次 api 密钥工作正常，但在 Log cat 中仍然出现“无法获取连接工厂客户端”。

可能是因为这个原因它不起作用。

# c# - Google Docs 识别电子表格或表单

> ID：10561710
> 
> 赞同：0
> 
> 时间：2012-05-12T06:53:08.647
> 
> 标签：c#, asp.net

如何使用 ASP.net 在 Google Documents 中识别文档是电子表格还是表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T07:51:05.550

MIME 类型是检测原生 Google 文档格式的最佳方法：

*   谷歌文档
    应用程序/vnd.google-apps.document

*   谷歌电子表格
    应用程序/vnd.google-apps.spreadsheet

*   谷歌表单
    应用程序/vnd.google-apps.form

*   谷歌演示
    应用程序/vnd.google-apps.presentation

*   谷歌绘图
    应用程序/vnd.google-apps.drawing

参考：[https ://developers.google.com/google-apps/documents-list/#managing_archives_of_documents_and_files](https://developers.google.com/google-apps/documents-list/#managing_archives_of_documents_and_files)

# java - 摆脱哈希图中的逗号

> ID：10561718
> 
> 赞同：0
> 
> 时间：2012-05-12T06:54:43.633
> 
> 标签：java, android

我在 Java 的 Hashmap 中有一个键值对，我正在按以下方式遍历 Map。

```
 ArrayList<String> mysection = new ArrayList<String>();
    ArrayList<String> temp = new ArrayList<String>();

    Iterator it = Map.entrySet().iterator();

    while (it.hasNext()){   
        Map.Entry pairs = (Map.Entry)it.next();                 
        System.out.println(" = " + pairs.getValue());                   

        mysection.add(pairs.getKey().toString());
        temp.add(pairs.getValue().toString());

        it.remove(); // avoids a ConcurrentModificationException        

    } 
```

这似乎很好，但循环运行一次并创建一长串与键关联的值。我不想那样。我希望每个值都存储在 ArrayList 中，但不是这样发生的。所有值都存储在第一个索引本身中。

其次，即使我尝试分叉，我也找不到合适的方法。首先我想通过“，”运算符拆分字符串，但字符串本身包含几个“，”

请建议我应该针对第一个问题具体做什么，我不希望将所有值作为单个字符串。

谢谢

日志：

```
 05-12 12:14:01.387: I/System.out(433): EAMCET: caution on punctuality, 
            05-12 12:14:01.387: I/System.out(433): Delay by even a minute can cost one year for the aspirants, warn the officials making it clear that they need to report at least 45 minutes in advance for the EAMCET to be held on May 12\. Th...
            05-12 12:14:01.387: I/System.out(433): , 
            05-12 12:14:01.387: I/System.out(433): Shankar Rao takes on Kiran , 
            05-12 12:14:01.387: I/System.out(433): Former Minister P. Shankar Rao on Friday opened a new front in his fight against Chief Minister N. Kiran Kumar Reddy by submitting a notice of breach of privilege against the latter for preventing...
            05-12 12:14:01.387: I/System.out(433): , 
            05-12 12:14:01.458: I/System.out(433): Police fear more Maoist attacks , 
            05-12 12:14:01.458: I/System.out(433): Uneasy calm prevails in villages tucked away along the shores of the Godavari adjoining neighbouring Chhattisgarh after the Maoists conducted a â??Praja Courtâ? in the interior Mukunur village of Maha...
            05-12 12:14:01.458: I/System.out(433): , 
            05-12 12:14:01.458: I/System.out(433): 'Science in danger of regressing' , 
            05-12 12:14:01.458: I/System.out(433): Askok Ganguly delivers 'A.V. Rama Rao Tech Award Lecture' 
            05-12 12:14:01.458: I/System.out(433): , 
            05-12 12:14:01.458: I/System.out(433): Global firms pick up ISB students , 
            05-12 12:14:01.458: I/System.out(433): Average annual salary offered is Rs.18.83 lakh, 8 p.c. more than last year
            05-12 12:14:01.458: I/System.out(433): , 
            05-12 12:14:01.458: I/System.out(433): Telugu varsity to make its courses job-oriented, 
            05-12 12:14:01.458: I/System.out(433): Potti Sreeramulu Telugu University is planning to attract more students to pursue higher education by offering employment oriented courses.The university was exploring chances to embed info...
            05-12 12:14:01.458: I/System.out(433): , 
            05-12 12:14:01.458: I/System.out(433): Kiran sharpens attack on Jagan, 
            05-12 12:14:01.458: I/System.out(433): Ruling Congress has launched a three-cornered attack on its two arch rivals -- YSRCP president Y.S. Jaganmohan Reddy and TDP chief N. Chandrababu Naidu at Tirupati on Friday in its run up to the b...
            05-12 12:14:01.458: I/System.out(433): , 
            05-12 12:14:01.458: I/System.out(433): RINL to get Central nod soon for mining in Rajasthan, 
            05-12 12:14:01.458: I/System.out(433): The Centre will give its nod soon for granting lease for iron ore mining to Rashtriya Ispat Nigam Limited (RINL), the corporate entity of Visakhapatnam Steel Plant.
            05-12 12:14:01.458: I/System.out(433): â??After the Rajasthan g... 
```

这是输出的图像： ![在此处输入图像描述](../Images/29176d1161824933cdbbedf333175654.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T07:25:28.473

我试着理解代码。我怀疑问题在于地图对象以及您如何为其填充数据。从您的声明中，您的地图可能只有 1 个带有长字符串的条目。

所以...至少，您可以发布地图数据填充的代码。希望解决这个问题不会那么难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T06:29:58.820

好的，我完成了...实际上有很多方法可以迭代地图，这不是最适合我想要的。所以改变了另一种方法的迭代实现，现在它的工作顺利。

# android - 使用蓝牙和应用程序打开/关闭设备

> ID：10561720
> 
> 赞同：3
> 
> 时间：2012-05-12T06:54:55.803
> 
> 标签：android, bluetooth, hardware

我想做一些事情，但我不知道从哪里开始。我试着四处寻找，但问题是我不知道从哪里开始。所以基本上，有硬件方面和软件方面。硬件方面只是一个蓝牙 v4.0 设备，可以打开和关闭……就是这样。现在我想开发一个Android应用程序，它可以通过蓝牙连接到这个设备，并通过手机打开和关闭设备。是否有专门针对此任务的特殊蓝牙芯片？我是否必须为微控制器编写程序才能执行此任务？如果有人能帮助我指出正确的方向只是为了让我开始，我可以研究其余的，那么我将非常感激。谢谢。

哈桑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:30:56.477

基于蓝牙低功耗（蓝牙智能）的设备听起来就像您所追求的。

我工作的公司 CSR 生产蓝牙 LE 芯片，该芯片具有用于片上应用的 SDK，并且功耗非常低。Low Energy 有许多应用程序配置文件，但我想不出一个专门用于打开或关闭设备的配置文件，尽管这样的应用程序非常简单。

在控制方面，您肯定需要一个能够进行双模式操作的设备，例如运行正常的蓝牙 (BR/EDR) 和低功耗 (LE)。任何经过 4.0 认证的芯片都可以做到这一点（较新的 iPhone 等）

[http://www.csr.com/products/technology/low-energy](http://www.csr.com/products/technology/low-energy)

我听说博通也做芯片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T07:14:56.613

你的计划有一点遗漏。“蓝牙芯片”需要一个控制器来告诉它如何操作。
这通常意味着某种微控制器，但也有 Soc（片上系统）在一个设备上包含所有无线电、蓝牙堆栈和控制器。
有一些蓝牙模块同时包含蓝牙和控制器，您有时可以更改其上的固件以将其定制为像您这样的定制任务。

其次，当你“关闭它”时，你如何重新打开它？
我假设该设备将有电池？
在设计中添加电池时，您必须考虑低功耗设计和电池充电管理。
当然，您还需要额外的电子设备来处理电池。

首先尝试寻找包含您需要的所有部件的开发套件或评估板。我没有花时间研究它的文档，但是像[Texas Instruments CC2541这样的东西](http://www.ti.com/tool/cc2541emk)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T03:29:55.100

最便宜的方法是改变已经有蓝牙芯片、微控制器和输出的批量生产的蓝牙产品。虽然提供的灵活性不如 arduino 板或树莓派；对于一个简单的开/关蓝牙控制开关，这应该足够了，并且可以低至 3.50 英镑。

例如：购买便宜的中国制造蓝牙耳机，例如（2.89 英镑）： [http ://www.ebay.co.uk/itm/Black-Bluetooth-Handsfree-Headset-Earphone-With-Ear-Hook-for-Mobile -电话-/271349525637?pt=UK_Mobile_Home_Phones_Bluetooth_Acc_ET&hash=item3f2db12c85](http://www.ebay.co.uk/itm/Black-Bluetooth-Handsfree-Headset-Earphone-With-Ear-Hook-for-Mobile-Phone-/271349525637?pt=UK_Mobile_Home_Phones_Bluetooth_Acc_ET&hash=item3f2db12c85)

打开它并取下扬声器。将手机与设备配对（通常需要物理按钮来防止随机器配对，但可能取决于蓝牙耳机型号）并播放一种音调，该音调会在用于连接扬声器的电线中产生电流，您可以在其上连接一个继电器开关，该开关可以是有几分钱（如果连接到车库门开启电机等大型设备，请检查额定功率）。在要控制的继电器电路的另一侧接线。

我应该补充一点，可能有一种比播放音调和劫持扬声器线更聪明的方法来获得输出信号 - 通过使用电流表并将其设置为最低设置并将手机连接和断开设备，尝试定位是否有任何电流启动在电路中流动。如果是这样，可能是一个更好的接线位置。否则，使用应用程序生成器之类的东西可以快速制作一个开启按钮，通过蓝牙连续传输音调，以获得更流畅的体验。

PS：如果问题更多地涉及控制另一台蓝牙设备，例如一部手机控制另一部手机，那么这个解决方案不会那么有用，因为我猜你不会想开始打开你的手机！以及杰森强调的问题。

# php - 使用 JSON 在 MYSQL 中发布数据

> ID：10561724
> 
> 赞同：0
> 
> 时间：2012-05-12T06:55:29.433
> 
> 标签：php, android, mysql, database, json

我正在尝试在 MYSQL 数据库中插入一个新行（以在该数据库中发布数据）

这是我的主要课程：

```
try {
            JSONObject json = new JSONObject();
            json.put("latitude", "4332314");
            json.put("longitude", "1234567");
            json.put("description", "Hahalela");
            HttpParams httpParams = new BasicHttpParams();
            HttpConnectionParams.setConnectionTimeout(httpParams,TIMEOUT_MILLISEC);
            HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);
            HttpClient client = new DefaultHttpClient(httpParams);
            //
            //String url = "http://10.0.2.2:8080/sample1/webservice2.php?" + 
            //             "json={\"UserName\":1,\"FullName\":2}";
            String url = "http://localhost/writemysql.php";

            HttpPost request = new HttpPost(url);
            request.setEntity(new ByteArrayEntity(json.toString().getBytes(
                    "UTF8")));
            request.setHeader("json", json.toString());
            HttpResponse response = client.execute(request);
            HttpEntity entity = response.getEntity();
            // If the response does not enclose an entity, there is no need
            if (entity != null) {
                InputStream instream = entity.getContent();

                String result = RestClient.convertStreamToString(instream);
                Log.i("Read from server", result);
              //  Toast.makeText(this,  result,
                      //  Toast.LENGTH_LONG).show();
            }
        } catch (Throwable t) {
           // Toast.makeText(this, "Request failed: " + t.toString(),
             //       Toast.LENGTH_LONG).show();
        } 
```

这是我的 RestClient 数据：

```
public class RestClient {

public static String convertStreamToString(InputStream is) {

BufferedReader reader = new BufferedReader(new InputStreamReader(is));
StringBuilder sb = new StringBuilder();

String line = null;
try {
    while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
    }
} catch (IOException e) {
    e.printStackTrace();
} finally {
    try {
        is.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
}
return sb.toString();
}

  public static void connect(String url)
{

HttpClient httpclient = new DefaultHttpClient();

// Prepare a request object
HttpGet httpget = new HttpGet(url); 

// Execute the request
HttpResponse response;
try {
    response = httpclient.execute(httpget);
    // Examine the response status
    Log.i("Praeda",response.getStatusLine().toString());

    // Get hold of the response entity
    HttpEntity entity = response.getEntity();
    // If the response does not enclose an entity, there is no need
    // to worry about connection release

    if (entity != null) {

        // A Simple JSON Response Read
        InputStream instream = entity.getContent();
        String result= convertStreamToString(instream);
        Log.i("Praeda",result);

        // A Simple JSONObject Creation
        JSONObject json=new JSONObject(result);
        Log.i("Praeda","<jsonobject>\n"+json.toString()+"\n</jsonobject>");

        // A Simple JSONObject Parsing
        JSONArray nameArray=json.names();
        JSONArray valArray=json.toJSONArray(nameArray);
        for(int i=0;i<valArray.length();i++)
        {
            Log.i("Praeda","<jsonname"+i+">\n"+nameArray.getString(i)+"\n</jsonname"+i+">\n"
                    +"<jsonvalue"+i+">\n"+valArray.getString(i)+"\n</jsonvalue"+i+">");
        }

        // A Simple JSONObject Value Pushing
        json.put("sample key", "sample value");
        Log.i("Praeda","<jsonobject>\n"+json.toString()+"\n</jsonobject>");

        // Closing the input stream will trigger connection release
        instream.close();
    }

} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (JSONException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
  }} 
```

这是我的 php 脚本：

```
<?php

 $con = mysql_connect("localhost","root","mypassword");

 $d = mysql_select_db("radars");
 if ($json = file_get_contents('php://input')) {
// Never mind. We'll do it ourselves.
$a = json_decode($json, true); // Now we have a nice PHP array.
$insert = '';
foreach ($a as $v) {
    if ($insert) $insert .= ',';
    $insert .= ' ("' . mysql_real_escape_string($v['latitude']) . '", "' . mysql_real_escape_string($v['longitude']) . '", "' . mysql_real_escape_string($v['description']) . '")';

$sql = 'INSERT INTO `radars` (`latitude`, `longitude`, `description`) VALUES' . $insert;
mysql_query($sql);
}
}
?> 
```

运行应用程序后，我在 logcat 中收到这两个：

```
 05-11 19:52:29.273: E/Buffer Error(532): Error converting result java.lang.NullPointerException
 05-11 19:52:29.294: E/JSON Parser(532): Error parsing data org.json.JSONException: End of input at character 0 of 
```

有谁知道问题是什么，或者我应该改变什么才能通过 JSON 向 MYSQL 发送数据？欢迎任何提示或建议。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T07:38:23.767

我认为 instream 是 null 因为 entity.getContent() 返回 null

```
...
    InputStream instream = entity.getContent();
    String result= convertStreamToString(instream);
... 
```

你能提供更多的调试信息吗？

我们这样做的原因：

```
...
        request.setEntity(new ByteArrayEntity(json.toString().getBytes(
                "UTF8")));

        request.setHeader("json", json.toString());//<---that
... 
```

尝试添加检查服务器答案（因为服务器不响应正文）：

```
...
HttpPost request = new HttpPost(url);
            request.setEntity(new ByteArrayEntity(json.toString().getBytes(
                    "UTF8")));
            request.setHeader("json", json.toString());
            HttpResponse response = client.execute(request);
            HttpEntity entity = response.getEntity();
            // If the response does not enclose an entity, there is no need
            if (entity != null) {
                InputStream instream = entity.getContent();
                //check instream for null
                if(insream!=null)
                {

                String result = RestClient.convertStreamToString(instream);
                Log.i("Read from server", result);
              //  Toast.makeText(this,  result,
                      //  Toast.LENGTH_LONG).show();
                }
... 
```

# jquery-mobile - 在jquery中解析json对象数组

> ID：10561727
> 
> 赞同：1
> 
> 时间：2012-05-12T06:55:56.493
> 
> 标签：jquery-mobile

我有一个包含 3 个 json 对象的数组：它看起来像这样：

PHP代码：

```
echo json_encode(array(
   'BigArea' => $BigArea_Obj,
   'Categories' => $Categories_Obj,
   'Sub_Categories' => $Sub_Categories_Obj
)); 
```

Real Json 包含主要的 3 个实体（BigArea、Categories、Sub_Categories）

```
{
"BigArea":

[{"area_id":"1","area_name":"Beirut","country_id":"1"},{"area_id":"2","area_name":"North Maten","country_id":"1"}],

"Categories":

[{"categ_id":"2","categ_name":"Actvities","categ_pic":"1-1024.jpg","categ_big_area_id":"1","big_area_id":"1"},{"categ_id":"6","categ_name":"Hotels","categ_pic":"2-1024.jpg","categ_big_area_id":"1","big_area_id":"1"},{"categ_id":"5","categ_name":"Restaurants","categ_pic":"002_1024.jpg","categ_big_area_id":"1","big_area_id":"1"}],

"Sub_Categories":

[{"categ_id":"2","product_id":"5","product_name":"dr pepsi","product_pic_thumb":"","prod_categ_id":"2","small_area_id":"1"},{"categ_id":"5","product_id":"6","product_name":"Sushi","product_pic_thumb":"","prod_categ_id":"5","small_area_id":"1"}]

} 
```

我需要的是循环遍历每个对象，所以我使用了以下内容，但它对我来说不能正常工作：

```
$.ajax({
type: "POST",
url: "server/bigarea_categ_subcateg.php",
dataType: "json",
data: CountryId,
success: function (b) {
BigArea_Categ_Sub_Object = b;
$.mobile.changePage("#BigAreaPage", { changeHash: false });
}
});

var BigArea_Object = BigArea_Categ_Sub_Object.BigArea;
var Categories_Object = BigArea_Categ_Sub_Object.Categories;
var SubCategories_Object = BigArea_Categ_Sub_Object.Sub_Categories;

$.each(BigArea_Object, function (index, value) {

 ...

  $.each(Categories_Object, function (index, value) {

   ...

    $.each(SubCategories_Object, function (index, value) {

     ... 
```

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T07:05:31.853

AJAX 代表异步（非阻塞）请求。这意味着在调用之后立即`$.ajax`没有 BigArea_Categ_Sub_Object。

您应该将所有以开头的代码移动`var BigArea_Object = BigArea_Categ_Sub_Object.BigArea;`到`success`函数体中（一旦服务器的响应可用，就会调用该函数体）。例如

```
$.ajax({
    type: "POST",
    url: "server/bigarea_categ_subcateg.php",
    dataType: "json",
    data: CountryId,
    success: function (b) {
        BigArea_Categ_Sub_Object = b;
        $.mobile.changePage("#BigAreaPage", { changeHash: false });
        var BigArea_Object = BigArea_Categ_Sub_Object.BigArea;
        var Categories_Object = BigArea_Categ_Sub_Object.Categories;
        var SubCategories_Object = BigArea_Categ_Sub_Object.Sub_Categories;

        $.each(BigArea_Object, function (index, value) {

        ...

        $.each(Categories_Object, function (index, value) {

        ...

        $.each(SubCategories_Object, function (index, value) {

        ...
    }
}); 
```

# html - 当我们减小浏览器窗口大小时，Css font-size in % 不会减小

> ID：10561728
> 
> 赞同：1
> 
> 时间：2012-05-12T06:56:07.350
> 
> 标签：html, css

**CSS**

```
#header
{
    width:90%;    
}

#bakeryintro
{
    width:40%;    
}

.bakeryintro1
{    
    font-size:350%;        
}

.bakeryintro2
{ 
    font-size:200%;
} 
```

**化妆**

```
<div id="header">
        <div id="bakeryintro" class="editable draggable resizable text header">
            <span class="bakeryintro1">The Bakery</span><br />
            <span class="bakeryintro2">it`s all aboout the bread.</span>
        </div>
</div> 
```

当我将减小浏览器的大小时，大小`#header and #bakeryinro`将减小但字体大小`#bakeryintro`保持不变，请告诉我问题所在？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T07:00:48.890

以百分比表示的 css 属性“font-size”给出了相对于标准字体大小的字体大小，而不是相对于屏幕的大小。

所以当窗口大小改变时，字体没有理由改变大小。

如果你真的需要它，你可以使用 javascript 来改变你的字体大小：

```
$('.bakeryintro1').css('font-size', ($(window).width()*0.01)+'px'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T07:13:22.433

你说的是这个[原型](http://jsfiddle.net/matmuchrapna/2tQ5T/1/)吗？

如果你是，这只是 CSS 原型证明：

```
html { font-size: 62.5%; }
body { font-size: 1em;}

@media (max-width: 300px) {
    html { font-size: 70%; }
}

@media (min-width: 500px) {
    html { font-size: 80%; }
}

@media (min-width: 700px) {
    html { font-size: 120%; }
}

@media (min-width: 1200px) {
    html { font-size: 200%; }
} 
```

**更新：** @dystroy 在评论中询问了我的方法的平滑性以及为提供模拟 javascript 方式编写 1200 条规则的必要性，但我考虑了数千条规则，发现另一种方法是为每个整数值编写少量规则的字体大小。该方法有存在的权利，因为浏览器对属性的非整数值支持很差`font-size`，所以1200条将字体从12改为16的规则是不必要的，因为浏览器只能实现5（12、13、 14、15、16):

```
/* for smoothness on the edges of the rules
   when font-size is changing */
.example { transition: all 0.3s ease-out;  }

@media (min-width: 1000px) {
    .example { font-size: 12px; }
}

@media (min-width: 1100px) {
    .example { font-size: 13px; }
}

@media (min-width: 1200px) {
    .example { font-size: 14px; }
}

@media (min-width: 1300px) {
    .example { font-size: 15px; }
}

@media (min-width: 1400px) {
    .example { font-size: 16px; }
} 
```

# android - 从android执行.bat文件

> ID：10561729
> 
> 赞同：2
> 
> 时间：2012-05-12T06:56:24.443
> 
> 标签：android, batch-file, video-encoding

我正在尝试执行 xxx.bat 文件以从我的 Android 应用程序中重命名该文件，并听到我的代码

```
 Runtime.getRuntime().exec(Environment.getExternalStorageDirectory()+File.separator+"eduapp"+File.separator+"lock1.bat"); 
```

eduapp 是目录，lock1.bat 是我的 bat 文件及其内容

```
ren /sdcard/eduapp .{ED7BA470-8E54-465E-825C-99712043E01C} 
```

但是当我运行应用程序时，它会出现错误，例如..

```
java.io.IOException: Error running exec(). Command: [/mnt/sdcard/eduapp/lock1.bat] Working Directory: null Environment: null 
```

基本上**我想从 sdcard 隐藏一些文件夹。** 是他们从 sdcard 运行 .bat 或隐藏文件夹的任何另一种方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T07:05:08.193

因为.bat 是dos 批处理文件，而android 是基于linux 的？...它是'mv'，而不是'ren'。这不是“.bat”，而是“.sh”（但实际上这并不重要）。此外，您必须运行 /bin/sh 并将脚本文件作为参数传递，或者直接使用参数运行 'mv' - 你不能执行文本文件。但我确信java有它自己的移动文件的功能，不需要shell脚本。

# extjs4 - 为什么我的 jsonStore 没有任何数据？

> ID：10561731
> 
> 赞同：0
> 
> 时间：2012-05-12T06:56:26.503
> 
> 标签：extjs4, jsonstore

我有一个像这样的 jsonStore

```
var ch01_store = new Ext.data.JsonStore({
        autoLoad:true,

        storeId: 'ch01_store',
        proxy: new Ext.data.HttpProxy({
            url: 'index.php/test/get_ch01/10',
            method: 'POST'
        }),
        root: 'data',
        totalProperty: 'results',
        remoteSort: true,
        fields: [
            {name: 'date_time', mapping: 'date_time'},
            {name: 'chart_data', mapping: 'chart_data'}
        ]
    }); 
```

并且“localhost/myweb/index.php/test/get_ch01/10” url 在页面上产生了这个

```
 {
   "success": true,
   "results": 10,
   "data": [{
         "date_time": "5/12/2012 13:13:33",
         "chart_data": "3.5"
      },
      {
         "date_time": "5/12/2012 13:13:34",
         "chart_data": "0.0"
      },
      {
         "date_time": "5/12/2012 13:13:35",
         "chart_data": "3.5"
      },
      {
         "date_time": "5/12/2012 13:13:36",
         "chart_data": "0.0"
      },
      {
         "date_time": "5/12/2012 13:13:4",
         "chart_data": "0.0"
      },
      {
         "date_time": "5/12/2012 13:13:5",
         "chart_data": "3.5"
      },
      {
         "date_time": "5/12/2012 13:13:6",
         "chart_data": "0.0"
      },
      {
         "date_time": "5/12/2012 13:13:7",
         "chart_data": "3.5"
      },
      {
         "date_time": "5/12/2012 13:13:8",
         "chart_data": "0.0"
      },
      {
         "date_time": "5/12/2012 13:13:9",
         "chart_data": "3.5"
      }
   ]
} 
```

但是当我执行时

```
console.log(ch01_store.getCount()); 
```

日志显示为零，我试图将它填充到 gridPanel 上，结果仍然是空的，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:50:18.213

像这样设置代理并尝试：

```
proxy: {
    type: 'ajax',
    reader: {
        type: 'json',
        root: 'xxxxxx'
        }
} 
```

# sql - 将 varchar 更改为 nvarchar 后网站性能下降

> ID：10561736
> 
> 赞同：3
> 
> 时间：2012-05-12T06:57:59.050
> 
> 标签：sql, sql-server, tsql, stored-procedures, database-performance

我最近不得不将表的列定义之一转换为`nvarchar`from `varchar`。从那以后，我可以感觉到通过表搜索数据变得更慢了。

我在表中有 4200000+ 行并且还在增长。

我的 Web 应用程序当前不使用存储过程从数据库中检索数据。如果我使用存储过程，它会稍微提高搜索性能吗？

或者你有什么其他的建议可以改进吗？

这是现在使用的查询：

```
SELECT TOP 100 id, callerID, dateTime, activity, senderNum, msgSent, smsgRespond, msgIn 
FROM tbl_activitylog 
WHERE callerID = @callerID 
ORDER BY id DESC 
```

该列`msgSent`是转换为 nvarchar 的列。

下面是表结构：

```
id (int, Primary Key, Auto Increment)  
callerID (bigint)  
dateTime (datetime)  
activity (varchar(50)  
senderNum (int)  
msgSent (nvarchar(160))  
smsgRespond (varchar(50))  
msgIn (varchar(160)) 
```

我不明白索引部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T07:41:51.073

> 我不知道索引部分，所以我想我没有在数据库中做任何索引。

处理数据库性能时最重要的第一件事是**INDEXES**。

在 上添加[索引](http://msdn.microsoft.com/en-us/library/ms188783.aspx)`(callerID, id DESC)`。

您的查询会*快得多*。

您还可以在 SSMS 中运行查询，然后按“估计的查询计划”，它很可能会出现缺少索引的警告。您实际上可以复制并粘贴此警告并运行它。您唯一需要更改的是索引的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T07:03:03.790

编辑：将您的查询放入存储过程不会自动为您带来更好的性能。因此，如果您可以使用“简单的 SELECT 语句”检索所需的所有数据，请这样做。

但是您应该检查并最终修复您的数据库。

```
DBCC CHECKDB('<db_name>') -- check the db for error
DBCC UPDATEUSAGE('<db_name>') -- fix errors 
```

同样重要的是创建相关索引！

编辑：当您发布查询后：在 CalledId 上添加索引。

检查您的 SQL SELECTS，检查您的 WHERE 语句中有哪些列并为它们添加索引。这应该会改善很多！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T08:05:01.090

如果你有一个索引`varchar`并且查询包含`Nvarhchar`，那么这样的索引将被忽略。您需要同步所有使用的类型（在任何地方都相同）并**重建索引**，例如：

```
ALTER INDEX IX_msgSent ON tbl_activitylog REBUILD 
```

# image - 如何将图像/blob 插入 SQL Server CE（就像 sqlite 一样）？

> ID：10561739
> 
> 赞同：2
> 
> 时间：2012-05-12T06:58:38.593
> 
> 标签：image, sqlite, sql-server-ce, blob

sqlite 有一个 GUI，可以在其中插入所有图像值。同样，SQL Server Management Studio 中是否有任何选项可用于插入图像。

任何有关此的信息都将具有重要意义。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T09:12:06.147

您可以使用我的 SQL Server Compact Toolbox（VS 插件或独立工具箱）并右键单击图像列来导入/导出图像。[http://sqlcetoolbox.codeplex.com](http://sqlcetoolbox.codeplex.com)

# wcf - 自定义成员资格、MVC 和 WCF。在哪里实施？

> ID：10561740
> 
> 赞同：0
> 
> 时间：2012-05-12T06:58:41.523
> 
> 标签：wcf, asp.net-mvc-3, asp.net-membership, roleprovider

我有一个复杂的问题，至少对我来说是这样的：），我会说，它更像是架构而不是编码。

好的，我正在创建一个 MVC 网站。我有一个 wcf 服务，这是我与数据库、业务对象等进行通信的唯一方式。

*   网站 (MVC)
*   托管层 (WCF)
*   服务层（WCF 的接口和实现 - 类库）
*   业务层（类库）
*   数据层 (Plinqo - L2S)
*   框架（类库 - 这里我有我的自定义成员）

换句话说，在我的 mvc 层的 web.config 中，我没有任何连接字符串，只有 web 服务 mambo jambo。我没有实现默认的成员资格和角色提供者。

我实现了一个自定义成员资格和角色提供者。但是，我在服务层级别使用它（我在 WCF 的 web.config 中声明它）这意味着，从 MVC 我调用我的 web 服务客户端的验证方法（client.ValidateUser（User）），然后当我做我的Membership.ValidateUser（用户名，密码）。

如果您需要知道我这样做的原因，我会添加它。尽管问我。

我的问题......在我的控制器中，当我将角色属性添加到我的方法时，我知道它会失败，因为 mvc 将尝试使用 webconfig 中的任何成员资格和角色提供者......当然，我没有不是在 mvc 级别实现它，而是在 wcf 级别实现它。所以它会弹出一个 notImplemented 错误。我没试过，但这是我的胆量。我应该在我的 mvc 中实现它，然后从这个自定义成员资格和角色提供者调用我的 wcf（数据库调用）并将其删除我当前的成员资格提供者和角色提供者吗？

我知道这一切都很棘手和令人困惑。如果您有任何疑问，请告诉我。

太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T07:11:28.710

您必须创建`Authorize`文件管理器的自定义实现并覆盖`OnAuthorization`您必须进行 WCF 调用并完成所有工作的方法。

[http://geekswithblogs.net/brians/archive/2010/07/08/implementing-a-custom-asp.net-mvc-authorization-filter.aspx](http://geekswithblogs.net/brians/archive/2010/07/08/implementing-a-custom-asp.net-mvc-authorization-filter.aspx)

# ruby-on-rails - rails 显示错误的版本事件更新命令

> ID：10561745
> 
> 赞同：1
> 
> 时间：2012-05-12T06:59:58.543
> 
> 标签：ruby-on-rails

我刚刚通过命令更新了 rails

```
$ sudo gem update --system
$ sudo gem install rails 
```

我可以看到宝石清单

```
rails (3.2.3, 3.0.1) 
```

但是在终端上，当我输入`rails --version`它给我的版本`3.0.1`时，如何使用 3.2.3？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T07:02:49.127

不要`sudo`用来执行任何 gem 任务，因为那是更新 Ruby 的系统版本，这可能不是您想要做的。

我建议使用 RVM 设置 Ruby 安装，然后使用`gem install rails`.

如果您使用的是 Ubuntu，那么我有[一个指南，](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/)我也有一个用于[Mac OS X](http://ryanbigg.com/2011/06/mac-os-x-ruby-rvm-rails-and-you/)的指南。

# asp.net - 如何在c#中比较xml节点内的关键字

> ID：10561746
> 
> 赞同：0
> 
> 时间：2012-05-12T07:00:10.773
> 
> 标签：asp.net, xml, c#-4.0

我已经创建了一个 asp.net 页面，它正在读取一些文本的 xml 文件节点。下面是我的 xml 文件的样子。

```
<?xml version="1.0" encoding="utf-8" ?>
<Questions>
  <Question id="1">What is IL code </Question>
  <Answer1>Half compiled,Partially compiled code </Answer1>
  <Question id="2">What is TL code </Question>
  <Answer2>Half compiled,Partially compiled code </Answer2>
</Questions> 
```

我还创建了一个 .aspx 页面，该页面有一个显示问题的标签和一个文本，用户可以在其中输入他/她对该特定问题的答案，并且在一个按钮下方有一些代码，如下所示

```
 XmlDocument docQuestionList = new XmlDocument();// Set up the XmlDocument //
    docQuestionList.Load(@"C:\Users\Administrator\Desktop\questioon\questioon\QuestionAnswer.xml"); //Load the data from the file into the XmlDocument //
    XmlNodeList AnswerList = docQuestionList.SelectNodes("Questions/Question");
    foreach (XmlNode Answer in AnswerList)
    {
        if (Answer.InnerText.Trim() == lblQuestion.Text)
        {
            if (Answer.NextSibling.InnerText.Trim() == txtUserAnswer.Text)
            {
                // This is right Answer
                TextBox1.Text = "right";
            }
            else
            {
                // This is wrong Answer
                TextBox1.Text = "wrong";
            }
        }
    } 
```

我想显示用户为特定问题输入的答案的百分比。

例如假设问题是......什么是 IL 代码？并且用户输入答案作为部分编译..所以我只想检查我的 xml 答案节点中输入的关键字。

如果用户答案与节点答案匹配，则以百分比显示答案的准确性。

请帮忙...

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T03:05:05.607

如评论中所述，所有答案元素都应具有相同的标签。

如果不限制使用[Xlinq](http://msdn.microsoft.com/en-us/library/bb299195)并且答案标签的格式为 AnswerXXX，则以下代码用于确定问题、答案和答案的百分比（总问题/总答案）和正确答案的百分比（正确答案/总答案） .

您可以根据您的确切需要自定义比较逻辑。

```
 var xml = "<?xml version=\"1.0\" encoding=\"utf-8\" ?>" +
        "<Questions>" +
        "<Question id=\"1\">What is IL code </Question>" +
        "<Answer1>Half compiled,Partially compiled code </Answer1>"+
        "<Question id=\"2\">What is TL code </Question>"+
        "<Answer2>Half compiled,Partially compiled code1 </Answer2>"+
        "</Questions>";

        var correctAnswerText1 = "Half compiled,Partially compiled code ";// set it to txtUserAnswer.Text

        XElement root= XElement.Parse(xml); // Load String to XElement
        var questions = root.Elements("Question"); // All questions tag
        var answers = root.Elements().Where(e=> e.Name.LocalName.Contains("Answer")); //All answers tag
        var correctAnswers = answers.Where( e=> !e.IsEmpty && String.Equals(e.Value, correctAnswerText1)); // All correct answers, here answer comparision logic can be customized

        var answerPercent = questions.Count()*100/answers.Count();
        var correctAnswerPercent = questions.Count()*100/answers.Count();
        questions.Dump();
        answers.Dump();
        correctAnswers.Dump();
        percantage.Dump();
        //root.Dump(); 
```

# php - 如何动态调整排序？

> ID：10561748
> 
> 赞同：-1
> 
> 时间：2012-05-12T07:00:19.043
> 
> 标签：php, javascript, jquery, ajax, jqgrid

![https://lh6.googleusercontent.com/-jVwVJRmL-4M/T638dHzocNI/AAAAAAAAACU/8OLqf8cDDQc/w785-h247-k/sample.JPG](../Images/22f49c289c93f38c7c3c7dabccc17a24.png)

我有一个 jqgrid，我有一个 SortNo 字段来处理我的排序，当我在 sortNo 中添加相同的数字并按顺序自动调整数字时，如何动态调整其排序。请参阅上面链接中的示例。有人可以帮帮我吗？

```
$(document).ready(function(){   
var xaxis=645
var yaxis = $(document).height();
yaxis = yaxis-100;  
getGrids();

$("#maingrid").jqGrid({
    url:'models/gridheaders.php?todo=select&id=new',
    datatype: 'xml',
    mtype: 'POST',
    colNames:['ID','Description_EN','Description_JP',
    'SortNo','ColWidth','GridID','Module'],
    colModel :[ 
        {name:'id', index:'id', width:120, align:'center',sortable:false,editable:false,editoptions:{size:"30",maxlength:"30"}},                        

        {name:'eng', index:'eng', width:120, align:'center',sortable:false,editable:true,edittype:"text",editoptions:{size:"30",maxlength:"30"}},                   

        {name:'jap', index:'jap', width:120, align:'center',sortable:false,editable:true,edittype:"text",editoptions:{size:"30",maxlength:"30"}}, 
        //This field is I want to dynamically sort.
        {name:'sort', index:'sort', width:120, align:'center',sortable:false,editable:true,edittype:"text",editoptions:{size:"30",maxlength:"30"}},                         

        {name:'col', index:'col', width:120, align:'center',sortable:false,editable:true,
        edittype:"text",editoptions:{size:"30",maxlength:"30"}},                    

        {name:'grid', index:'grid', width:120, align:'center',sortable:false,editable:true,hidden:true,edittype:"text",
        editoptions:{size:"30",maxlength:"30"},editrules: { edithidden: true}}, 

        {name:'used', index:'used', width:120, align:'center',sortable:false,editable:true,hidden:true,edittype:"text",editoptions:{size:"30",maxlength:"30"},editrules: { edithidden: true}},  

        },
    ],
    viewrecords: true,          
    rowNum: -1,
    height: yaxis,
    width: xaxis,
    shrinkToFit: false,
    multiselect: true,
    editurl:""
}); 
```

有人可以帮助我，我应该使用什么功能来进行动态排序？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T07:08:04.500

您可以检查数据表。它可以很容易地与 jQuery 和 jQuery UI 集成，并且它包括多列排序。

[http://datatables.net/release-datatables/examples/basic_init/multi_col_sort.html](http://datatables.net/release-datatables/examples/basic_init/multi_col_sort.html)

# java - 在java中检查ReadLock的副本

> ID：10561758
> 
> 赞同：0
> 
> 时间：2012-05-12T07:03:13.900
> 
> 标签：java, concurrency

我有一种方法可以检查此类事务是否锁定了一个特定的事物。但是对于 ReadLock，同一个对象上可以有多个 ReadLock。有没有办法可以检查我有多少份该对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T18:08:43.357

您是否尝试过[ReentrantReadWriteLock.getReadLockCount()](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html#getReadLockCount%28%29)？

# mysql - 如何优化这个数据库和这个查询？

> ID：10561759
> 
> 赞同：0
> 
> 时间：2012-05-12T07:03:14.677
> 
> 标签：mysql

我需要创建一个简单的博客站点，其中包含博文、用户和评论。在主页将显示博客文章和用户评论下方的用户信息：

我已经创建了 3 个 mysql 表：blogpost、user、comment 并且在主页中我需要对这 3 个表进行 JOIN 查询。

有没有办法避免这个 JOIN with 3 query ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T07:05:54.600

您可以创建一个表示这 3 个表的数据的视图，然后简单地从该视图中选择数据。

看[这里](http://dev.mysql.com/doc/refman/5.1/de/create-view.html)

例子：

```
create view v as 
    select t1.id, t2.id as id2 
    from t1 inner join t2 on t1.id = t2.id;

select * from v; 
```

# android - 如何在 Android 冰淇淋三明治上同时启用硬件和虚拟键盘

> ID：10561760
> 
> 赞同：28
> 
> 时间：2012-05-12T07:03:19.417
> 
> 标签：android

我正在为客户的公司使用 Django 开发库存管理应用程序，并希望使用冰淇淋三明治平板电脑作为最终用户设备。我使用一个工作正常的 USB 条形码阅读器。

我的问题是，一旦插入条形码阅读器，它就会被识别为真正的键盘，我无法再访问虚拟键盘了。这对我来说是个大问题，因为我只使用条形码阅读器来编码 EAN13 代码，并且需要旁边的软键盘......

有什么方法可以同时启用虚拟键盘和真实键盘？我真的需要这方面的帮助......

谢谢 ！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-14T09:34:55.093

好吧，我找到了解决问题的方法！（现在不知道赏金该怎么办......）

当您输入文本区域时（例如：在导航器上），您只需触摸时钟左侧的键盘图标。在“使用物理键盘”旁边，您必须选择“否”。

我发现即使这样，条形码阅读器仍将处于活动状态（是的！）并且软键盘也会弹出！

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-06-18T14:07:42.803

是的，条形码扫描仪被检测为物理键盘。当键盘连接到设备时，默认情况下禁用软键盘。要启用它，我们需要通过以下方式关闭硬件键盘：

**设置 > 语言和输入法 > 选择输入法**

选项名称可能因设备而异。即使我们将其关闭，我们也可以将扫描仪与软键盘一起使用。

不，目前没有办法以编程方式实现这一点。我们能做的最多的就是检测扫描仪/键盘何时连接，并将用户重定向到输入法选择窗口，通过覆盖如下`onConfigurationChanged`方法：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
  super.onConfigurationChanged(newConfig);
  if(newConfig.hardKeyboardHidden == Configuration.HARDKEYBOARDHIDDEN_NO) {

    ((InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE))
                                  .showInputMethodPicker();
    Toast.makeText(this, "Barcode Scanner detected. Please turn OFF Hardware/Physical keyboard to enable softkeyboard to function.", Toast.LENGTH_LONG).show();
  }
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-14T07:46:37.597

您可以使用 InputMethodManager 强制打开软件键盘：

```
InputMethodManager imm = (InputMethodManager)getContext().getSystemService(
                                              Context.INPUT_METHOD_SERVICE); 
imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-20T02:35:25.390

试试这个强制打开软键盘：

```
((InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE)).toggleSoftInput(InputMethodManager.SHOW_FORCED, InputMethodManager.HIDE_IMPLICIT_ONLY); 
```

要关闭软键盘：

```
((InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE)).hideSoftInputFromWindow(_pay_box_helper.getWindowToken(), 0); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-17T04:22:19.267

我不是程序员，但这里发布的所有问题都相同。在网上搜索了很多之后，我通过 Google Play 商店找到了一个似乎对我们很有效的键盘（BT Scanner 和同时想要 SoftKeyboard）。它被 Klaus Weidner 称为 Hacker's Keyboard。

只需使用黑客键盘，转到设置-> 向下滚动到“语言和输入”--> 黑客键盘--> 转到--> 配置--> 向下滚动到“输入模式设置”--> 确保“始终显示软键盘”已选中。即使扫描仪是通过蓝牙连接的，软键盘也会保持打开状态。在断开和重新连接蓝牙扫描仪时也能正常工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-26T03:54:32.393

由于图标不显示，因此不适用于普通键盘。您需要安装另一个键盘应用程序或键盘切换器应用程序（即使您没有安装任何其他键盘，它也只会显示图标）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-17T15:05:09.633

**在Languages & input** > **Keyboard, mouse, and track pad中启用****使用屏幕键盘**（物理键盘处于活动状态时将其保留在屏幕上）后，它对我有用。

# ruby-on-rails - Rails：为不同的 MIME 类型重构视图文件

> ID：10561767
> 
> 赞同：0
> 
> 时间：2012-05-12T07:04:55.327
> 
> 标签：ruby-on-rails, view, mime-types

所以我有一个响应 HTML、XML、JSON、移动设备、平板电脑等的 Rails 应用程序。假设我有“书”资源。自然，此资源将需要“index.html.erb”、“show.html.erb”、“new.html.erb”、“edit.html.erb”、“_form.html.erb”和其他自定义函数。如您所见，“views/books”文件夹最终会包含许多杂乱的文件。我希望能够将它们分隔在“views/books”文件夹内的子文件夹中：

```
views/books/json
views/books/mobile
views/books/web
views/books/tablet 
```

我怎样才能在不弄乱我的控制器的情况下做到这一点？控制器动作执行和视图执行之间是否有回调（过滤器）？如果有，那应该可以解决这个问题。

在我的应用程序中让事情变得更复杂的是我想在某些 MIME 中重用一些部分，例如我想将“_login.erb”用于移动设备、Web 和平板电脑。然后，使用 CSS 对其进行自定义。

[这里](https://stackoverflow.com/questions/10030887/render-mime-typed-templates-in-rails-that-are-in-a-subfolder-without-explicitly)问了一个类似的问题。但我对答案不满意，因为它很慢并且不能解决我常见的部分问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:29:58.593

我认为您只是为了拥有更清晰的视图目录结构而使事情复杂化。

首先，我建议不要将 JSON 与 HTML 问题与 Web 与移动设备与平板电脑问题混为一谈。“手机”或“平板电脑”不是 mime 类型，我不会破解 Rails 基于 mime 类型的视图功能来解决这个问题。

在我们公司，我们对不同的 mime 类型 (json/html) 使用不同的视图，并且我们使用一个 HTML 视图，它根据设备类型在内部分叉。在三组视图中反映模型/控制器更改会很烦人，每种设备类型一组。大多数情况下，观点是相同的，或者只是略有不同。我们使用[mobvious-rails](https://github.com/jistr/mobvious-rails) gem 来根据设备分叉视图代码。那不是更好的解决方案吗？

# c++ - 声明一个类静态受保护

> ID：10561770
> 
> 赞同：0
> 
> 时间：2012-05-12T07:05:11.727
> 
> 标签：c++, static, client-server, private

静态类也受保护吗？因为没有对象可以被实例化，它必须被继承。我只想确保无法访问 Socket 成员，除非它直接与 ServerSocket 通信

```
i.e.

//Socket.cpp    
static class Socket {
   Socket();
   Socket(PORT);
   ~Socket();
   int create();
   int bind();
   int listen();
   int connect();
   int close();
   int send(char* data);
   int recv(char* data);
};

//ServerSocket.cpp
class ServerSocket : private Socket {
   ServerSocket();
   ServerSocket(PORT);
   ~ServerSocket();
   close();
   send(char* data);
   recv(char* data);
};

// main.cpp
int main() {
     ServerSocket socket(30000);

     socket.send("Hello World");
     socket.close();

     return 0;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:11:58.867

我认为你在这里混淆了事情？来自 Java 背景？在 C++ 中，“静态类”更像是定义命名空间的另一种方式。您不应该使用它来限制类成员的可访问性（因为它们本质上不是“真正的”类成员）。

更准确地说：关键字的使用根本不会影响生成的代码。被认为是“静态类”通常是一个`static`只有成员的类。

您使用`static`关键字的方式之所以有效，是因为您可以同时定义一个类和对象：

```
static class ClassOfStaticObject {
    ClassOfStaticObject() {
        // ...
    }
} myObject; 
```

这将与此相同：

```
class ClassOfStaticObject {
    ClassOfStaticObject() {
        // ...
    }
};
static ClassOfStaticObject myObject; 
```

为了实现您想做的事情，您所要做的就是通过拥有纯虚函数成员使您的基类抽象：

```
class Socket {
    Socket(void);
    Socket(PORT);
    ~Socket(void);
    // ...
    virtual int send(const char *data) = 0;
    virtual int recv(const char *data) = 0;
} 
```

这将不再允许您创建此类或任何派生类的实例，除非该类实现了这些虚拟方法。作为替代方案，您可以将所有构造函数隐藏为`private`或`protected`。

要限制基类成员的可见性，您可以使用`private`或`protected`像您已经做过的那样，但是我建议您使用`public`，然后将您希望仅从子类（即不从外部）访问的那些成员声明为`protected`.

```
class Socket {
protected:
    Socket(void);
    Socket(PORT);
    ~Socket(void);
    // ...
    virtual int send(const char *data) = 0;
    virtual int recv(const char *data) = 0;
    void something_protected();
public:
    void something_debug(void);
}

class ServerSocket : public Socket {
    // ...
} 
```

这样，您将能够调用`something_debug()`class 的对象`ServerSocket`，但您将无法`something_protected()`从外部调用，也无法创建 class 的对象`Socket`。

# javascript - 需要帮助在 IE8 中调试 JavaScript

> ID：10561777
> 
> 赞同：0
> 
> 时间：2012-05-12T07:06:48.187
> 
> 标签：javascript

好吧，[我在这里不知所措](http://sunnyslope.heroku.com)

对于所有指向 doctype 作为位置的本地托管 js 文件，我都会收到错误消息。我包含什么本地 js 文件并不重要，它们都会引发错误。在 IE 中的网站上没有 javascript 工作。

非常感谢任何和所有帮助！很高兴回答任何问题以向您提供更多信息，我只是不确定您要寻找什么，因为 js 不是我更擅长的技能之一......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T07:13:37.393

我认为此页面不适用于任何浏览器：

[http://sunnyslope.heroku.com/javascripts/jquery.fancybox.pack.js](http://sunnyslope.heroku.com/javascripts/jquery.fancybox.pack.js) http://sunnyslope.heroku.com/javascripts/application.js

这两个文件以 HTML 格式提供，因此这显然不起作用。

# c# - 带有日期过滤器的 CAML 查询，在 U2U 查询生成器中工作，但在 C# 代码中不工作

> ID：10561782
> 
> 赞同：0
> 
> 时间：2012-05-12T07:07:36.530
> 
> 标签：c#, date, sharepoint-2010, caml

这是一个 CAML 查询，它在查询生成器中工作正常，但在代码中使用时不起作用。

```
lstEmpQuery.Query = string.Concat("<Where><And><And><IsNotNull>" +
                                  "<FieldRef Name='Domain_x0020_Name' />" +
                                  "</IsNotNull><Leq>" +
                                  "<FieldRef Name='Start_x0020_Date' /><Value Type='DateTime'>[Today+0Day(s)]</Value>" +
                                  "</Leq></And><Eq><FieldRef Name='Is_x0020_Leaver_x003f_' /><Value Type='Boolean'>0</Value>" +
                                  "</Eq></And></Where>"); 
```

删除日期过滤器时，查询在代码和查询生成器中工作正常，即没有下面的部分

[今天+0天]

如何使查询与日期过滤器一起使用。我尝试通过`DateTime.Now`而不是，`[Today+0Day(s)]`但它仍然不起作用。

请帮助解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T07:18:05.603

替换为`<Today/>`而不是`[Today+0Day(s)]`及其工作。

# android - 使用传感器加速度计和 mp3 播放器

> ID：10561784
> 
> 赞同：0
> 
> 时间：2012-05-12T07:07:50.777
> 
> 标签：android, android-layout, android-intent, android-widget

我将创建一个使用加速度计传感器来启动 mp3 播放器的小应用程序。基本上我的想法是这样的： 1）启动应用程序 2）关闭智能手机的屏幕 3）摇动手机 4）启动 mp3 播放器，默认播放一首歌曲

我不是Android编程专家，希望对您有所帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T07:14:20.977

[在此链接](https://stackoverflow.com/a/9975422/779408)上查看我的摇动设备示例

对于媒体播放器：

```
public static void playMusic(Context context, int beepType) {
        try { 

            mMediaPlayer = MediaPlayer.create(context, R.raw.mymusic);

            mMediaPlayer.setLooping(false);
            mMediaPlayer.start();
            mMediaPlayer.setOnCompletionListener(new
                    OnCompletionListener() {
                        public void onCompletion(MediaPlayer arg0) {
                            // if (mMediaPlayer != null) {
                            // mMediaPlayer.release();
                            // mMediaPlayer = null;
                            // }
                        }
                    });
        } catch (Exception e) {
            if (mMediaPlayer != null) {
                mMediaPlayer.release();
                mMediaPlayer = null;
            }
        }
    } 
```

# sql - EAV 的替代数据库设计

> ID：10561789
> 
> 赞同：0
> 
> 时间：2012-05-12T07:08:44.813
> 
> 标签：sql, entity-attribute-value

我需要在关系数据库（MySQL）中对人员数据库进行建模。

每个人都有财产。有些属性确实只有 1:1 关系（例如性别男性/女性），而其他属性确实具有 1:n 关系，例如运动或语言（例如，一个人可能会打篮球和足球，会说英语和德语）。另外，这些 1:n 关系具有技能水平（例如专业、初学者）。

目前我在问自己是否有比 EAV 模型更好的方法来模拟人-属性关系。我关心的主要是让具有特殊属性的人更容易过滤（例如，所有男性演员（专业打篮球或是初学者）并且会说专业的英语。应该可以轻松添加新属性（而这必须不一定是完全动态的）。如果这需要由开发人员完成并且需要更改表是可以的。但应该不难（例如修改sql语句，添加连接，添加数据库表/查找表） .

我会采用经典的基于列的设计，将 person 表中的 1:1 属性放在每个属性的单独列中。我不确定在这样的设计中，哪一种是建模 1:n 关系的最佳方式。我想避免为每个 1:n 属性查找和单独的表。

最好的方法似乎仍然是以下 EAV 方法：

具有列 id、name 的 Persons 表，例如

```
1 | 基督教 

```

具有列 person_id、property、value、level 的 Properties 表，例如：

```
1 | 性别 | 男|
1 | 运动 | 篮球 | 专业的
1 | 运动 | 足球 | 初学者
1 | 语言 | 英语 | 专业的
1 | 语言 | 德语 | 基本的

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T10:35:32.600

EAV 最适合当您事先不知道数据的架构，并且您不希望开发人员为每组新数据修改您的系统时。

从你所说的情况来看，情况并非如此。

EAV 有很多缺点——例如，您不能依赖内置的关系模型来验证您的模式。因此，如果您的用户“Christian”没有指定其性别的值，则您的应用程序只需要处理它 - 而在传统模式中，您有您声明“非空”的性别列，并链接到“性别”查找表。对于大多数应用程序来说，这是一件大事——在应用程序级别强制执行数据的有效性并非易事。

EAV 的第二个大缺点是易于使用 SQL 的查询变得异常复杂，并且性能下降得相当快，因为​​ where 子句中的每个项目（例如“where gender = 'm'”）都变成了子查询。

因此，我肯定会将您知道其架构的数据建模为“传统”数据库。如果您想避免查找表，您可以 - 而不是“性别”表的外键，您可以依靠您的应用程序知道有效选项是“m”和“f”（不要忘记处理这里可能发生的怪异-“M”有效，而不是“m”？）。

为了对 1:n 关系建模，您可以创建一个单独的表，例如“person_sports”，它与“person”表具有外键关系。您可以而且也许应该有一个“运动”的查找表，在这种情况下，您有一个多对多的关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T16:04:24.987

您的问题的答案实际上取决于随着时间的推移数据库会发生什么。这里有一些问题要问：

*   多久添加一次新属性？
*   多久会添加一次新人？
*   是批量添加还是一次添加一个？
*   对于一个人来说，检索往往是更多的属性，还是对于很多人来说只是几个属性？

如果您有一个开发期，正在添加功能，然后在开发期间数据结构将稳定，请使用传统的 ER 方法。在开发过程中，添加新列并不是特别繁重。

此外，如果您计划处理具有数十或数百个属性的数百万人，那么请考虑性能问题。这可能会阻止您使用 EAV。

当您批量添加人员并一次仅检索几个属性时，还有一种替代数据库方法非常有效。曾几何时，这被称为垂直分区，但现在似乎被称为列分区。在这种情况下，您可以将不同的属性存储在不同的表中。1-1 属性将具有相同的主键，这应该会使连接在内存中快速运行——几乎不会对性能造成明显影响。对于 1-n 属性，您需要一个复合主键，以人作为第一个元素，以及默认情况下不完整的数据页（这允许您在同一数据页上进行更新）。

然后添加一个新属性只需要添加一个新表来存储它，为现有人员填充它，并更改数据库上的任何视图以使用它。

一些商业数据库专门用于此类结构（例如 Vertica），但它们比 mysql 贵得多。

# objective-c - 教程中的基本 Objective-C 代码无法运行

> ID：10561790
> 
> 赞同：0
> 
> 时间：2012-05-12T07:08:51.553
> 
> 标签：objective-c, xcode, xcode4

我对这种语言完全陌生，请原谅我这个琐碎的问题。

我正在关注提供以下代码的 tut：

![错误代码的屏幕截图](../Images/122c05a1d52071b6f5707f9a59c117ae.png)

我想看看屏幕截图你知道我遇到了什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T07:38:13.037

上面的代码工作正常，*用括号围绕你的 return 语句没有问题*。我刚刚运行了完全相同的代码，它运行良好并给出了预期的结果。

```
NSString *boolString(BOOL yesNo) {
    if (yesNo == YES) {
        return (@"YES");
    } else {
        return (@"NO");
    }
} 
```

尝试清理您的项目（`⇧</kbd>+`⌘</kbd>+`K`) and build it again and see if that works. If it doesn't, open the Organizer from Xcode (`⇧</kbd>+`⌘</kbd>+`2`) and delete the "Derived data" for your project and try to build it again.````

* * *

此外，如果您正在尝试学习 Objective-C，请考虑使用 Objective-C 方法而不是 C 函数。（您像这样调用以下代码`[self boolString:YES];`：）

```
- (NSString *)boolString:(BOOL)yesNo {
    if (yesNo == YES) {
        return (@"YES");
    } else {
        return (@"NO");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T07:14:08.943

虽然这与问题无关，但理解objective-C上的实例方法定义的语法仍然很有用：

```
- (NSString*) boolString: (BOOL yesno) {
    // code
    return @"objective-C string";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T07:13:14.273

更改返回语句，使用 -

```
return @"YES"; 
```

和

```
return @"NO"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T07:49:51.847

代码没有错。神奇的是我用手重写了代码，它没有错误，我猜当我从多个pdf页面复制代码时可能会有隐藏的字符。

# iphone - 关闭键盘和 dealloc()

> ID：10561791
> 
> 赞同：0
> 
> 时间：2012-05-12T07:08:55.513
> 
> 标签：iphone, keyboard, dealloc, dismiss

这里有一个引起“关注”的...

我有一个使用键盘的模态视图控制器。我正在使用一个系统从stackoverflow上的代码中解除键盘，这似乎是识别键盘外的点击以解除它的“新方法”......

```
// Register for keyboard dismissal
[[NSNotificationCenter defaultCenter] addObserverForName:UIKeyboardWillShowNotification object:nil queue:nil usingBlock:^(NSNotification *notification) 
{
     UITapGestureRecognizer *tap = [[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(dismissKeyboard:)]autorelease];
     tap.numberOfTapsRequired = 1;
     tap.numberOfTouchesRequired = 1;
     tap.delegate = self;
     [self.view addGestureRecognizer:tap];
}];

[[NSNotificationCenter defaultCenter] addObserverForName:UIKeyboardWillHideNotification object:nil queue:nil usingBlock:^(NSNotification *notification) 
{
    [self.view removeGestureRecognizer:[self.view.gestureRecognizers lastObject]];
}]; 
```

这很好用，但我注意到当我通过“完成”按钮将其关闭时，我的视图控制器上没有调用 dealloc。

这似乎与上面的代码有关。如果我注释掉通知定义大括号中的可执行代码，那么当控制器被解除时，dealloc 被调用 ok....（键盘未显示或解除，因此大括号内的代码未执行）

有没有人对为什么在实现上述代码时不调用 dealloc 有任何建议？

谢谢

适合

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T07:28:36.867

使用块时，它将保留“自我”，因此您需要删除观察者以解除分配。

# ocr - 为 Tesseract 编写语言文件

> ID：10561792
> 
> 赞同：1
> 
> 时间：2012-05-12T07:08:59.663
> 
> 标签：ocr, tesseract

我正在为不同字体的 Tesseract 编写语言文件。我已经使用 GUI 工具[txt2img](http://code.google.com/p/txt2img/downloads/detail?name=setup.exe&can=2&q=)完成了图像文件和框文件。谁能解释我如何编写创建 .traineddata 文件所需的其他文件？例如 word-dawg、unicharset 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T20:32:47.497

Tesseract Wiki:[训练Tesseract3](https://github.com/tesseract-ocr/tesseract/wiki/TrainingTesseract)

# mongodb - 使用 map reduce 的用户到用户相似度

> ID：10561797
> 
> 赞同：1
> 
> 时间：2012-05-12T07:10:03.613
> 
> 标签：mongodb, mapreduce

我的收藏包含：

```
{ user_id : 1, product_id : 1 },
{ user_id : 1, product_id : 2 },
{ user_id : 1, product_id : 3 },
{ user_id : 2, product_id : 2 },
{ user_id : 2, product_id : 3 },
{ user_id : 3, product_id : 2 }, 
```

我的收藏跟踪用户查看的产品，其中**user_id**是用户的 ID，**product_id**是产品的 ID。
我想计算两个用户之间的相似性，例如他们都查看过的产品数量。
例如从上面的集合中，用户之间的相似性将是

```
{ user_id1 : 1, user_id2 : 2, similarity : 2 },
{ user_id1 : 1, user_id2 : 3, similarity : 1 },
{ user_id1 : 2, user_id2 : 3, similarity : 1 }, 
```

## 已编辑

我在没有 map-reduce 的情况下完成了

```
def self.build_similarity_weight
  users_id = ProductView.all.distinct(:user_id).to_a
  users_id.each do |user_id|
    this_user_products = ProductView.all.where(user_id: user_id).distinct(:product_id).to_a

    other_users = users_id.map { |e| e } 
    other_users.delete_if { |x| x == user_id }

    other_users.each do |other_uid|
      other_user_products = ProductView.all.where(user_id: other_uid).distinct(:product_id).to_a
      user_sim = (other_user_products & this_user_products).length
      usw = UserSimilarityWeight.new(user_id1: user_id, user_id2: other_uid, weight: user_sim)
      usw.save
    end
  end
end 
```

问题是我的代码效率不高，**O(n ² )**，其中**n**是用户数。
如何使用 map-reduce 使我的代码更高效？

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:35:54.400

首先，您执行 2 个 mapreduce。

1.  *   map：省略 product_id 作为 key 和 user_id 作为 value
    *   减少：在循环内循环迭代值列表（每个产品的用户 ID 列表）并省略作为用户 ID 的键对（其中最小的用户 ID 是第一个）和值 1
2.  （处理第一张地图减少的结果）

    *   map：只需将用户对作为键传递，将 1 的值作为值传递
    *   减少：对每对的值求和。

其次，你不能比 O(n2) 更有效率，因为你的结果是 O(n2) 的顺序。意思是，即使以某种神奇的方式，你会得到对和相似度，你仍然需要写 n^2 对。

# php - 使用 PHP 将图片上传到 Facebook 时出错：OAuthException：必须使用活动访问令牌来查询有关当前用户的信息

> ID：10561798
> 
> 赞同：0
> 
> 时间：2012-05-12T07:10:08.510
> 
> 标签：php, facebook, graph, upload, image

我只是想使用 PHP 将图像上传到用户的时间轴。安装我的应用程序后，我使用以下代码但收到错误：OAuthException：必须使用活动访问令牌来查询有关当前用户的信息。

我可以通过 $token 变量回显访问令牌，所以我知道它在那里。我到处寻找并试图修复它但没有成功。这是代码...

```
<?php  

include_once "src/facebook.php";  
$app_id = 'xxxxxx';  
$application_secret = 'xxxxxx';  

$facebook = new Facebook(array(  
'appId'  => $app_id,  
'secret' => $application_secret,  
'cookie' => true, // enable optional cookie support  
));  
if ($facebook->getUser())
{
  $user = $facebook->getUser();
  //die($token);

        try
        {
            $token = $facebook->getAccessToken();
            $facebook->setFileUploadSupport(true);
            $file = "5star.png";
            $post_data = array(
            "message" => "My photo caption",
            "source" => '@' . realpath($file)
            );
            //die("/me/photos/?access_token=$token");
            $data['photo'] = $facebook->api("/me/photos?access_token=$token", 'post', $post_data);
        } catch (FacebookApiException $e)
        {
            die($e);
        }

header( 'Location: http://google.com' ) ;
}else
{
  $loginUrl = "https://graph.facebook.com/oauth/authorize?type=user_agent&display=page&client_id=$app_id&redirect_uri=http://apps.facebook.com/yourprofilerating/&scope=user_photos,email,offline_access,publish_stream,user_birthday,user_location,user_work_history,user_about_me,user_hometown";  
  echo "<script> top.location.href='" . $loginUrl . "'</script>";
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T08:58:36.370

您可能有一个无效或过期的访问令牌，请查看[处理无效和过期的访问令牌](https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)。在api调用之前和$token声明之后插入本文提供的代码。

# javascript - 如何在条件下使用 JavaScript 更改行颜色？

> ID：10561799
> 
> 赞同：0
> 
> 时间：2012-05-12T07:10:56.663
> 
> 标签：javascript

由于某些原因，我使用这个 JavaScript 代码来突出显示行。我需要向此代码块添加条件。像这样的东西：

```
 function onGridViewRowSelected(rowIdx, rowIdx2) {
   //bring value via get control and assign
var selRow = getSelectedRow(rowIdx);
//Check Current Row is null or not
if (curSelRow != null) {
   //..TRIED THIS ROW
    if (curSelRow.style.backgroundColor = '#red') {
        //do nothing..
    } else {

        curSelRow.style.backgroundColor = '#ffffff';
    }
}
//come to here if not in condition and check selected row is null or not
if (null != selRow) {
//if in condition ..
    curSelRow = selRow;
    //change current selected row background color
    curSelRow.style.backgroundColor = '#ababab';
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T07:40:21.137

我不清楚你的问题，但你的 js 代码有一个错误：

```
if (curSelRow.style.backgroundColor = '#red')  // WRONG, u can't do this
if (curSelRow.style.backgroundColor == '#red') // use color codes instead ( for red = #ff0000 ) or just red.. 
```

# web-services - 来自 FedEx 网络服务的账单信息

> ID：10561800
> 
> 赞同：1
> 
> 时间：2012-05-12T07:11:01.803
> 
> 标签：web-services, fedex

我在我的网络应用程序中使用 FedEx 网络服务。已经完成了一些功能，例如 CreateShipment。我需要知道特定跟踪号/货件的帐单信息。我怎样才能得到这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:59:58.547

具体来说，您在寻找什么信息？帐单信息（帐户等）不会在跟踪数据中公开。

# javascript - 在 android WebView 中的 java 和 javascript 之间共享对象（数据）

> ID：10561803
> 
> 赞同：2
> 
> 时间：2012-05-12T07:11:43.923
> 
> 标签：javascript, android, android-webview

我创建了一个如下所示的 WebView 活动。我无法让它工作。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.webview);

    JAsocket socket1=new JAsocket();

    webView = (WebView) findViewById(R.id.webView1);
    webView.getSettings().setJavaScriptEnabled(true);

        webView.addJavascriptInterface(socket1, "socket");

    webView.loadUrl("file:///android_asset/index.html");
     webView.getSettings().setLoadWithOverviewMode(true);
        webView.getSettings().setUseWideViewPort(true);

} 
```

我的问题是，如果我通过“socket”在javascript中调用它的函数来操纵“socket1”的一些成员变量，当我将同一个对象传递给javascript时，我能否使用socket1看到这个活动中的这些变化。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T07:31:13.510

你的问题的答案是肯定的。看几个例子。

[http://android-developers.blogspot.in/2008/09/using-webviews.html](http://android-developers.blogspot.in/2008/09/using-webviews.html)

[http://techdroid.kbeanie.com/2010/10/android-webview-javascript-and-css.html](http://techdroid.kbeanie.com/2010/10/android-webview-javascript-and-css.html)

顺便说一句，你已经完成了一半。

# algorithm - 将元素随机放入 N 个桶中

> ID：10561804
> 
> 赞同：4
> 
> 时间：2012-05-12T07:12:01.033
> 
> 标签：algorithm, math

我有一个装有 100 个土豆的袋子。我需要将土豆分成 N 个桶。在每个桶中，我必须有 15 到 60 个土豆。

显然，我需要一个逐步的解决方案来将它变成代码。

到目前为止我最好的方法：

最小桶数：100/60 = 1 (40) => 向上取整 => 2
最大桶数：100/15 = 6 (10) => 向下取整 => 6

因此，您可以拥有最少 2 个和最多 6 个存储桶。现在我们选择一个随机数（因为我只需要一个解决方案，而不是全部）。

让我们选 3个。
每桶土豆：100/3 = 33 (1)
桶：33、33、34。

现在这是棘手的部分。虽然这是对原始问题的解决方案，但它对我不起作用，因为我需要数字比这更随机。在问题中，条件是 15-60，但在这里我们只得到 33-34，这对于我需要的来说太统一了。

这里的解决方案之一可能是开始从每个桶中添加和减去数字。可能要进行 10 次左右的迭代，但我认为必须有更好的方法来做到这一点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T07:29:58.403

首先，分配所需的最少数量。在您的示例中，将 15 个放入每个存储桶中。如果您有 3 个桶，您将平均将 45 放入 3。剩余（R）：55。每个桶（C1，C2，C3）的剩余容量：45。

选择一个数字 k（参见关于如何选择 k 的脚注）。如果它大于 R，则将其设置为 R (k=min(k,R) )。随机挑选一个桶。如果 Ci 小于，则 k 将 k 设置为 Ci ( k=min(k,Ci) )。现在将 k 个土豆放入桶 i。更新 R 和 Ci (R=Rk, Ci=Ci-k)。重复此操作，直到所有土豆都吃完（R=0）。

**脚注：选择 k**

您可以设置 k=1 或从任何**适当**的分布中选择 k（例如：从 1 到 10 随机选择 k ）。

**代码**

```
import random
def distPotato(R, N, minP, maxP):
    C = [maxP-minP for i in range(N)]
    V = [minP for i in range(N)]
    R-=sum(V)    
    while(R>0):
        k = random.choice(range(10)) + 1
        i = random.choice(range(N))
        k = min(k,R)
        k = min(k, C[i])
        C[i]-=k
        R-=k
        V[i]+=k
    return V

distPotato(100,3,15,60) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T07:30:39.313

我想象在肉店里有一段牛肉，屠夫被要求在尽可能短的时间内把它切成 N 块随机大小。

他的第一个动作可能是随意敲击肉，确保在他进行 N-1 次切割之前，不要将其切得太靠近他之前的切片或边缘。

出于您的目的，这块牛肉可以是一排土豆。

所以要把它翻译成伪代码：

```
initiate a list of chosen potatoes to empty
while you have chosen less than N-1 potatos
    pick a potato
    if the potato is less than 15 potatoes away from a side
        continue
    if the potato is less than 15 potatoes away from a chosen potato
        continue
    add this potato to the chosen list
sort the chosen list
split the line of potatoes using the chosen potatoes as delimeters 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T07:42:53.890

我建议只是在桶中随机装满 15 到 60 个土豆，直到剩下的土豆少于 15 个。然后拿起你装满的最后一个桶，试着把剩下的土豆放进那个桶里。如果低于60，那就太好了！如果超过 60，则将桶分成两半。

所以假设你这样做了几次，你最终得到了 74 个土豆。你现在用一个随机数的土豆装满一个桶。假设它是 60 个。您现在还剩下 14 个土豆，对于另一个桶来说太少了，但对于您的最后一个桶来说太多了。很简单，倒出前一个桶（74 个土豆，再次），然后做两个桶，每个桶 37 个。

问题是你的最后两个桶不会像其他桶一样随机（或者至少不是“随机”，如果你愿意的话），但是因为你不能在一个桶里放少于 14 个土豆，所以你什么都没有可以做的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T19:01:36.313

首先，请注意，您可以稍微简化您的问题。而不是“每个桶需要包含 15 到 60 个土豆并且桶中的总数应该是 100”，您可以重述为“我需要 0 到 45 (60 - 15) 之间的 n 个数字，这样这些数字的总和为 100 - NX 15"。换句话说，用 15 个土豆填满你所有的桶，现在你正试图决定如何使用剩余的土豆来填满桶中剩余的空间。

假设你有 n 个桶要装，还有 p 个土豆。生成一个介于 0 到 45 之间的随机数 r，你现在剩下 p - r 个土豆。你现在能填满剩下的 (n-1) 个桶吗？

*   如果 (p - r) < 0，你显然不能填满剩余的桶，因为你分配的比你拥有的多，
*   如果 (p - r) > 45 * (n - 1)，这是不可行的：你剩下的土豆太多了，你的马铃薯容量必须超过你的桶容量。
*   否则，您知道如果您将 r 个土豆放入当前存储桶中，您仍然可以为下一个存储桶找到解决方案。

您可以将其写为递归解决方案：对于每个连续的桶，生成一个随机数的土豆，直到该数字不会阻止您在下一步找到解决方案。

下面是一个非常粗略的 F# 实现，显然可以对其进行改进/优化，但说明了算法的要点。allocation 是一个 int 列表，其中包含已分配给存储桶的数量，qty 是剩余要分配的土豆数量，buckets 是剩余存储桶的数量，min，max 是存储桶的容量。例如，有 100 个土豆和 3 个桶，您可以调用 solve 100 3 15 60。

结果分配应该是“尽可能随机”，即它应该以相同的概率产生任何可能的分配，但有一个警告：我假设桶的顺序无关紧要。鉴于该算法根据迄今为止分配的内容分配剩余的土豆，根据路径，列表的“头部”受到限制，并且分配可能会在第一个桶上分配更多。如果您想进行“真正的”随机分配，则需要在分配完成后对存储桶进行洗牌。

希望这可以帮助！

```
let rng = new System.Random() 

let rec allocate allocation qty buckets min max =
      match buckets with
      | 0 -> allocation
      | 1 -> qty :: allocation
      | _ ->
         let candidate = rng.Next(min, max + 1) // try a number in [min,max]
         let rest = qty - candidate
         if rest < (buckets - 1) * min // not enough left
         then allocate allocation qty buckets min max // try again
         else if rest > (buckets - 1) * max // too much left
         then allocate allocation qty buckets min max // try again
         else allocate (candidate :: allocation) rest (buckets - 1) min max

let solve qty buckets min max =
   if min * buckets > qty then failwith "unfeasible"
   if max * buckets < qty then failwith "unfeasible"
   allocate [] qty buckets min max 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-05T18:29:24.373

ElKamina 的答案可能是正确的，但对于数学上的挑战，这里是另一种马铃薯分类算法。

```
from random import randint, choice

def random_distribution(num_potatoes, num_buckets, min_num_potatoes, max_num_potatoes):
    """
    Distributes a set number of potatoes randomly across a number of buckets
    such that each bucket has a number of potatoes within a certain range.
    """
    # Cache the starting value
    _num_potatoes = num_potatoes

    # Create some buckets to put potatoes in, initial value 0
    buckets = [0 for x in range(num_buckets)]

    # Get a list of which buckets are not too empty or too full--
    # All of them are valid choices at this point
    indices = [i for (i, value) in enumerate(buckets)]

    # Distribution loop-- continue until we run out of potatoes or the
    # buckets are too full to keep adding to them.
    while indices and num_potatoes and sum(buckets) <= (max_num_potatoes * num_buckets):

        # Pick a random bucket from the list of eligible buckets
        index = choice(indices)

        # Add a potato to it
        buckets[index] = buckets[index] + 1
        num_potatoes = num_potatoes - 1

        # Refresh the list of eligible buckets
        indices = [i for (i, value) in enumerate(buckets) if (value < min_num_potatoes) or (value < max_num_potatoes)]

    print('Of %(potatoes)i potatoes distributed across %(buckets)i buckets, each having at least %(min)i and at most %(max)i, our spread looks like %(spread)s (total bucketed: %(sum)i).' % {
        'potatoes': _num_potatoes,
        'buckets': num_buckets,
        'min': min_num_potatoes,
        'max': max_num_potatoes,
        'spread': buckets,
        'sum': sum(buckets)
    })
    return buckets

for x in range(10):
    random_distribution(100, 3, 15, 60) 
```

示例输出：

```
Of 100 potatoes distributed across 3 buckets, each having at least 15 and at most 60, our spread looks like [35, 37, 28] (total bucketed: 100).
Of 100 potatoes distributed across 3 buckets, each having at least 15 and at most 60, our spread looks like [29, 36, 35] (total bucketed: 100).
Of 100 potatoes distributed across 3 buckets, each having at least 15 and at most 60, our spread looks like [32, 27, 41] (total bucketed: 100).
Of 100 potatoes distributed across 3 buckets, each having at least 15 and at most 60, our spread looks like [33, 33, 34] (total bucketed: 100).
Of 100 potatoes distributed across 3 buckets, each having at least 15 and at most 60, our spread looks like [32, 32, 36] (total bucketed: 100).
Of 100 potatoes distributed across 3 buckets, each having at least 15 and at most 60, our spread looks like [37, 28, 35] (total bucketed: 100).
Of 100 potatoes distributed across 3 buckets, each having at least 15 and at most 60, our spread looks like [32, 27, 41] (total bucketed: 100).
Of 100 potatoes distributed across 3 buckets, each having at least 15 and at most 60, our spread looks like [39, 27, 34] (total bucketed: 100).
Of 100 potatoes distributed across 3 buckets, each having at least 15 and at most 60, our spread looks like [32, 30, 38] (total bucketed: 100).
Of 100 potatoes distributed across 3 buckets, each having at least 15 and at most 60, our spread looks like [32, 30, 38] (total bucketed: 100). 
```

在您给定的示例中，如果您想要更多的价值差异，您需要从更少的土豆开始或使用更多的桶。

# c# - 单击按钮时如何将文本框添加到表格中

> ID：10561805
> 
> 赞同：1
> 
> 时间：2012-05-12T07:12:11.880
> 
> 标签：c#, asp.net

单击按钮时，我想在其中添加一个新单元格和一个 TextBox。但是当我单击当前行中的按钮时，它的单元格和 TextBox 将被删除并添加新的。

**标记：**

```
<form id="form1" runat="server">
<div>
    <asp:Panel ID="pnlForTextBoxes" runat="server">
    </asp:Panel>
    <asp:DropDownList ID="ddlNumbers" runat="server" Height="16px" Width="143px">
        <asp:ListItem>1</asp:ListItem>
        <asp:ListItem>2</asp:ListItem>
        <asp:ListItem>3</asp:ListItem>
        <asp:ListItem>4</asp:ListItem>
        <asp:ListItem>5</asp:ListItem>
    </asp:DropDownList>`enter code here`
    <asp:Table ID="myActualTable" runat="server">
    </asp:Table>
    <br />
    <asp:Button ID="cmdAddTextBox" runat="server" Text="Add" OnClick="cmdAddTextBox_Click" />
</div>
</form> 
```

**代码：**

```
protected void cmdAddTextBox_Click(object sender, EventArgs e)
{
    TableRow myRow = new TableRow();
    myRow.ID = "row" + ddlNumbers.SelectedValue.ToString();
    TableCell myCell = new TableCell();
    myCell.ID = "cell" + ddlNumbers.SelectedValue.ToString();
    TextBox myTextBox = new TextBox();
    myTextBox.ID = "txt" + ddlNumbers.SelectedValue.ToString();
    myTextBox.Text = "TextBox number " + ddlNumbers.SelectedValue.ToString();
    myCell.Controls.Add(myTextBox);
    myRow.Cells.Add(myCell);
    myActualTable.Rows.Add(myRow);

    myTextBox.Dispose();
    myCell.Dispose();
    myRow.Dispose();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T07:21:52.187

发生这种情况是因为旧的文本框和单元格没有出现在标记上。如您所知，每个回发页面对象都已创建，并且它不知道页面上的最后更改。有一种解决方法。在页面加载事件中，您必须检查，如果这已经是回发，则检查您的视图状态，或带有先前文本框和单元格的隐藏字段计数器，并重新创建它们。最好指定上次指定的名称和 ID，以允许视图状态恢复值。只有在此之后，您才能创建新的 onem 而不会丢失以前的。

# android - 自定义“ListView”还是 TableLayout？

> ID：10561806
> 
> 赞同：-2
> 
> 时间：2012-05-12T07:12:20.113
> 
> 标签：android, android-listview, android-tablelayout

我需要创建一个`ListView`或`TableLayout`每行由 3 列和 3 个按钮组成，类似于：

![在此处输入图像描述](../Images/b4b3af2794efa5ec5ac9122b8c29ff2b.png)

但屏幕不仅会包含此控件，还会包含文本字段和其他布局，我需要一个网格来呈现如下形状（例如）。

关于如何实现这一目标以及如何处理`Button`点击的任何想法？由于我是 Android 新手，我不知道如何创建它。

![在此处输入图像描述](../Images/4e264d62c94f452717f293b7a10cdd72.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T08:47:28.173

A`ListView`主要用于可变数据。如果您有某种数据可以每次都以相同的方式显示并且可以增长/删除，那么 ListView 是一个不错的选择。

另一方面，如果您有静态数据，静态布局（如 TableLayout、LinearLayout 等）是一个不错的选择。这完全取决于您拥有哪些数据以及您希望如何使用它。

我希望你不想在那个截图上做同样的列，因为你在智能手机上没有那个空间。

假设您需要 3 列，并且该数据是可变的。

您可以在根目录中使用带有a 的[costum ListView](http://www.mkyong.com/android/android-listview-example/)和. 然后，您插入的每个元素都需要与. 这种组合保证了行上的每个元素都具有相同的宽度，因此它是可选的。`LinearLayout``android:orientation="horizontal``layout_weight="1"``android:layout_width="0dp"``ListView`

你的服装列表行应该是这样的：

```
<LinearLayout
    android:layout_width="fill_parent"
    ...
    android:orientation="horizontal" >
<TextView
   android:layout_width="0dp"
   ...
   android:layout_weight="1" />
... 
```

要处理按钮单击，您需要在您的服装 ListView 上的适配器内`setOnClickListener`的方法中获取它时在 Button 中执行。`getView`

然后您可能会在单击按钮和 ListView 时遇到问题。解决此问题的常用方法是将按钮放在`android:focusable="false"`声明它的 xml 中。但一次一件事；）

编辑（因为评论：添加一个禁用/启用按钮的复选框）：

如果你想要一个复选框来禁用/启用按钮，你需要在你`getView`的服装 ListView 的适配器上做一些工作。

你需要：

*   使用类似的方式获取您的复选框：`CheckBox myCheckBox = (CheckBox) inflater.findViewById(R.id.checkboxid)`其中充气器是您在 getView 中定义的那个，而 checkboxid 是您在 xml 行中定义的 id。
*   将按钮保存在您的复选框侦听器中可以访问：`myCheckBox.setTag(button)`按钮是您要启用/禁用的按钮，您可以像获得 myCheckBox 一样获得他
*   在您的复选框上设置一个`setOnCheckedChangeListener`，您可以根据复选框的状态更改按钮的可见性。

最后一个项目符号听起来应该是这样的：

```
myCheckBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        Button myButton = (Button) buttonView.getTag();

        if ( isChecked ) 
            myButton.setVisibility(View.VISIBLE);
        else
            // Use GONE if you want to get that space for other views
            myButton.setVisibility(View.GONE); 

    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T07:26:15.467

我建议你看看这样的应用程序，因为你是 android 新手，然后也看看一些应用程序、教程和控件，没有人能告诉你如何制作这个应用程序，如果它是一个错误或什么的，那么它会回答的。但是你的问题真的很广泛。它不是应用程序的问题，而是如何开发整个应用程序的问题。我认为更好，您也可以查看一些应用程序或此[**链接**](http://developer.android.com/training/index.html)。对你有一个开始使用 android 会有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T11:24:56.357

我为您提供问题的完整实现。首先在您的 xml 中创建一个列表视图

文件名：Yourlist.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linearlayout_id"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" 
        android:background="@color/encode_view">

    <ListView
        android:id="@+id/info_list_id"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_above="@+id/cancelinfobtn_id" >
    </ListView>

    </RelativeLayout> 
```

之后再创建一个带有一个文本框和一个按钮的xml

文件名=youCustomlayout.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            />

    </RelativeLayout> 
```

现在创建一个这样的自定义列表

```
 package com.menu.in;

    import java.util.ArrayList;

    import com.daffodilsw.client.android.R;

    import android.content.Context;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.view.ViewGroup;
    import android.widget.ArrayAdapter;
    import android.widget.CheckBox;
    import android.widget.EditText;
    import android.widget.ImageView;
    import android.widget.SectionIndexer;
    import android.widget.TextView;

    public class MyContactAdapter extends ArrayAdapter {
    ArrayList<String> userContact_List,userheading_list;
    private Context mcontext;   
    private View rowview;
    LayoutInflater inflater;
    public static ArrayList<Boolean > itemchecked=new ArrayList<Boolean>();
    public MyContactAdapter(Context context, ArrayList< String> usercontactheading_list,ArrayList<String> usercontactheading_list ) {
        super(context,R.layout.yourcustomlayout,usercontactheading_list);

        userheading_list=new ArrayList<String>();

        userheading_list=usercontactheading_list;
        mcontext=context;
         inflater = (LayoutInflater) mcontext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    }

        public View getView(final int position, View convertView, ViewGroup parent) {
             rowview=convertView;
            if(convertView==null)
            {
                rowview = inflater.inflate(R.layout.detail_value_layout, parent, false);
            }

            TextView textView_heading = (TextView) rowview.findViewById(R.id.textView1);

            Button btn=(Button) rowview.findbyviewid(R.id.Button1);

            checkbox_detail.setOnClickListener(new OnClickListener() {
            textView_heading.setText(userheading_list.get(position));

          return rowview;
        }   

                } 
```

最后在您的主要活动中制作一个适配器，然后调用适配器的构造函数并在您的列表视图中设置此适配器。

# sockets - 编写平台无关的基于 Socket 的二进制解析代码

> ID：10561808
> 
> 赞同：1
> 
> 时间：2012-05-12T07:13:10.077
> 
> 标签：sockets, erlang, endianness

我有一个 erlang 应用程序，其中包括解析来自套接字（TCP 和 UDP）的二进制数据。二进制数据是根据一些特定的协议，所以我的 TCP 和 UDP sock 选项如下：

```
TCP 袜子：
Opts = [二进制，{packet，0}，{reuseaddr，true}，
            {keepalive, true}, {backlog, 30}, {active, false}],

```

```
UDP 袜子：
[二进制,{active,once},{recbuf,2097152}]

```

现在，当我解析从套接字获得的数据时，我确实喜欢这样（在 UNIX 上）：

```
    << 版本：4/大无符号整数单位：8，
       长度：2/大无符号整数：8，
       _Rest/二进制 >> = Bin_event_From_Socket。

```

现在，当在 LINUX 上运行时，这会给我一个问题，因为 LINUX 是基于小端的。所以，对我来说，这里的选项是在上面的代码中将“大”转换为“小”。

但是，Erlang 是一种基于 VM 的语言，我必须具备一些编写平台无关代码的便利。我搜索了 NET，但找不到太多关于它的信息。

那么，这里的问题是如何编写独立于平台的套接字数据解析代码？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T08:16:01.663

代替`big`or`little`您可以使用 endianness `native`。这将默认为您所在平台的正确字节序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T09:57:30.903

这是我在 Dmitry 的 erlang 邮件列表中得到的答案。

[http://erlang.org/pipermail/erlang-questions/2012-May/066692.html](http://erlang.org/pipermail/erlang-questions/2012-May/066692.html)

# python - 删除第一个字符后的所有字符

> ID：10561813
> 
> 赞同：1
> 
> 时间：2012-05-12T07:13:29.463
> 
> 标签：python

说我有字符串：

```
fame = "John"
lname = "Doe" 
```

我想要做的是制作它，以便我可以使用 lname 并制作它，以便删除第一个字符之后的所有内容，以便我可以缩写姓氏。输出将是：

```
fullname = "John D." 
```

我没有使用 Python 的经验，所以我在这方面找不到任何东西，因为我不知道这到底叫什么。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T07:15:41.880

```
>>> fname = "John"
>>> lname = "Doe"
>>> fullname = '{0} {1}.'.format(fname, lname[0])
>>> fullname
'John D.' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T07:18:17.553

很简单，你可以通过索引调用字符串中的字符。所以第一个字符是索引 0，第二个是 1，依此类推。所以...

```
fullname = fname + " " + lname[0] + "." 
```

或者，更pythonic：

```
fullname = "%s %s."%(fname, lname[0]) 
```

Python 有一些非常好的文档。阅读本文以了解如何在 python 中使用字符串：http: [//docs.python.org/library/string.html](http://docs.python.org/library/string.html)

- - 编辑 - -

我注意到在最新版本的 Python 中使用 % 表示法并不是一个好主意。我猜这是为了帮助程序员避免注入攻击。所以，就像其他人已经说过的那样，最好使用类似的东西：

```
fullname = "{0} {1}.".format(fname, lname[0]) 
```

或者

```
fullname = "{0} {1[0]}".format(fname, lname) 
```

我之前提供的 Python 文档也解释了这一点。显然，我不能把这个编辑中的代码归功于我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T07:16:40.173

Python REPL 中的以下示例代码是如何完成您想要的操作的示例。您可以索引字符串的一个或多个元素，例如`lname[0]`，并使用“+”连接子字符串。

```
>>> fame = "John"
>>> lname = "Doe"  
>>> fullname = fame + " " + lname[0] + '.'
>>> fullname
'John D.' 
```

# c - 将结构指针传递给C中的函数

> ID：10561819
> 
> 赞同：1
> 
> 时间：2012-05-12T07:14:17.060
> 
> 标签：c, function, structure

我在将结构传递给以结构指针作为参数的函数时遇到问题，并不断收到错误“错误：一元'*'的无效类型参数（具有'StackNode'）”

这是我的代码的必要部分（不是全部）：

```
#include <stdio.h>
#include <stdlib.h>

struct stackNode{
    char data;
    struct stackNode *nextPtr;
};
typedef struct stackNode StackNode;
typedef StackNode *StackNodePtr;

void convertToPostfix(char infix[], char postfix[]);
int isOperator(char c);
int precedence(char operator1, char operator2);
void push(StackNodePtr *topPtr, char value);
char pop(StackNodePtr *topPtr);
char stackTop(StackNodePtr topPtr);
int isEmpty(StackNodePtr topPtr);
void printStack(StackNodePtr topPtr);

int main(){
    convertToPostfix(NULL, NULL);
    return 0;
}

void convertToPostfix(char infix[], char postfix[]){
    StackNode stack = {'(', NULL};
    push(*stack, 'a');
    printStack(&stack);
}

void push(StackNodePtr* topPtr, char value){
    topPtr->nextPtr = NULL; //just temporary, not needed
    topPtr->data = value; //just temporary, not needed
} 
```

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-12T07:16:06.960

更改`push`呼叫，`push(*stack, 'a')`：

```
push(&stack, 'a');
     ^ 
```

`stack`( )上的间接引用`*`没有意义，因为它不是指针。取其地址 ( `&`) 即可。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T07:43:12.363

由于 StackNodePtr 已经是指向 StackNode 的指针，因此您不需要在参数列表中添加更多的 '*'。

全部替换

```
void push(StackNodePtr* topPtr, char value){ // WRONG
                     ^^^ 
```

至

```
void push(StackNodePtr topPtr, char value){ // RIGHT
                     ^^^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T07:18:18.933

我认为你的编译器很聪明。它知道 void 指针 (NULL) 与 StackNodePtr 不同。您需要对调用进行强制转换或空堆栈节点指针值的定义。

```
NULLSNP=(StackNodePtr)NULL; 
```

正如另一篇帖子所说，对 push 的调用也是错误的，应该是 & 不是 &。

```
push(&stack, 'a'); 
```

push 和 pop 的定义是错误的，你给它一个 stacknodeptr 但期望一个 stacknodeptr 指针。

```
void push(StackNodePtr topPtr, char value)
char pop(StackNodePtr topPtr); 
```

# html - 对 uri-templates 有哪些支持？

> ID：10561822
> 
> 赞同：5
> 
> 时间：2012-05-12T07:14:43.387
> 
> 标签：html, standards, uritemplate

我认为[uri-templates](https://www.rfc-editor.org/rfc/rfc6570)对于基于 REST 的应用程序来说是一个非常有趣的特性。但是除了//把你最喜欢的语言放在这里//基于实现之外，我在 HTML 本身中看不到对它的任何支持。

似乎对它的支持是针对 WebForms2.0 的，如下所述：http: [//blog.welldesignurls.org/2007/01/11/proposing-uri-templates-for-webforms-2/](http://blog.welldesignedurls.org/2007/01/11/proposing-uri-templates-for-webforms-2/)和[http://blog。 whatwg.org/proposing-uri-templates-for-webforms-20](http://blog.whatwg.org/proposing-uri-templates-for-webforms-20)但根据[WebForms2.0 页面](http://www.whatwg.org/specs/web-forms/current-work/)，它被[HTML5](http://www.whatwg.org/specs/web-apps/current-work/multipage/)取代，据我所知，它没有提到模板。

所以我的问题是：HTML 中是否支持 URI 模板？如果没有：是否有这样的计划？或者是否有像一个新兴标准，每个人都在做的事情，并且可能在未来的某个时候最终成为一个标准？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T07:44:45.920

这个功能真的很棒，但我找不到任何具体的文档。我想可以使用一些带有 onsubmit 事件的 JavaScript 来构建一个新的 URI 然后提交。

实际上有一个带有[uri-template implementations](http://code.google.com/p/uri-templates/wiki/Implementations)的列表。对于 HTML/Browserside 支持[，JavaScript 版本](https://github.com/fxa/uritemplate-js)似乎是最有用的。

# c# - 预初始化函数

> ID：10561829
> 
> 赞同：-1
> 
> 时间：2012-05-12T07:16:08.230
> 
> 标签：c#, javascript

我正在从事一项特定的任务。我有三个带有三个不同样式表的母版页，

我有一个 javascript 函数，可以检测用户正在使用什么，例如窗口、移动设备或 iPad ......

例如，当页面大小小于 700 时，我想设置母版页 1 敌人示例，当页面大小大于 700 时，我想在服务器端的预初始化功能上将其设置为母版页 2。

有人有解决我问题的线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T07:26:32.817

不使用 javascript 检测屏幕大小，而是使用 HttpHeader [User-Agent](http://en.wikipedia.org/wiki/User_agent)检测客户端设备，更改服务器端的母版页。

您可以在 ASP.NET 管道的 Pre-Init 函数中访问客户端发送的用户代理标头，也可以在控制器或页面对象中访问它（取决于您使用的服务器端框架）

```
string S = HttpContext.Request.Headers["User-Agent"]; 
```

它会给你这样的结果：

```
"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168 Safari/535.19" 
```

如果客户使用 PC，如果他使用 iPhone

```
Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_0 like Mac OS X; en-us) AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5 Mobile/8A293 Safari/6531.22.7 
```

对于 android 看[这里](http://www.gtrifonov.com/2011/04/15/google-android-user-agent-strings-2/)

# ios - 我为动画设置图像。用于 ios 中的动画。这是更好的方法吗？

> ID：10561832
> 
> 赞同：-2
> 
> 时间：2012-05-12T07:16:49.743
> 
> 标签：ios, animation, frame

在我的程序中，我在滑动动画时设置了替换图像

cate 1.png -> cate2.png->cate3.png->cate1.png-> ~

并使用 setframe 设置更改标签的框架。

```
-(void) scrollViewDidScroll:(UIScrollView *)scrollView
{
  int offsetx=(int)scrollView.contentOffset.x;

if(offsetx>0 && offsetx<20)
{

    UIImage * image=[UIImage imageNamed:@"cate1.png"];  
    cateImageview.image=image;

    UIFont * font=[UIFont systemFontOfSize:14];
    [gameLabel setFont:font];

    [gameLabel setFrame:CGRectMake(140,18,50,50)];

    return ;

}

 if(offsetx>20 && offsetx<40)
{

    UIImage * image=[UIImage imageNamed:@"cate2.png"];  
    cateImageview.image=image;

    [gameLabel setFrame:CGRectMake(122,16,50,50)];

    return ;

}
    if(offsetx>40 && offsetx<60)
    {

        UIImage * image=[UIImage imageNamed:@"cate3.png"];  
        cateImageview.image=image;

        [gameLabel setFrame:CGRectMake(113,14,50,50)];

        return ;

    }

    if( offsetx>60 && offsetx<80)
    { 
        UIImage * image=[UIImage imageNamed:@"cate1.png"];  
        cateImageview.image=image;

        [gameLabel setFrame:CGRectMake(103,12,50,50)];

        return ;

    }

   if( offsetx>80 && offsetx<100)
   {

    UIImage * image=[UIImage imageNamed:@"cate2.png"];  
    cateImageview.image=image;

    [gameLabel setFrame:CGRectMake(92,10,50,50)];

       return ;

   }

   if( offsetx>100 && offsetx<120)
   {

    UIImage * image=[UIImage imageNamed:@"cate3.png"];  
    cateImageview.image=image;

    [gameLabel setFrame:CGRectMake(83,8,50,50)];

       return ;

   }

      .
      .
      .

 if(offsetx >820 && offset <840)
      .
      .
 } 
```

1.  使用替换图像方式进行动画有问题吗？我想知道更好的方法。

2.  使用标签的框架方式进行动画有问题吗？我想知道更好的方法。

3.  label.frame=CGRectMake(~,~,~,~) vs [label setFrame:CGReckMake(~,~,~,~)] 有区别吗？什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:28:49.660

# 1\. 动画图像

您不能使用 image 属性为更改图像设置动画。如果您想在一个和另一个之间淡化图像，您可以在同一帧上添加第二个 imageView，在您的 imageView 上方并将其不透明度从 0 设置为 1。然后当动画完成时，删除旧的 imageView 或更改图像并删除动画图像视图。

# 2.动画帧

框架是一个动画属性，但简单地设置一个新值不会导致动画。使用框架进行动画处理没有问题。查看 UIView 动画以获得像这样的简单动画：

```
[UIView animateWithDuration:yourDurationInSeconds animations:^{
    // Changing the frame in here will cause the frame to animate over the specified duration
    [label setFrame:yourNewFrame];
}]; 
```

# 3\. 点符号与否

`label.frame = ...;`并且`[label setFrame:...];`是完全相同的东西。只是两种不同的代码编写方式。

# ios - InAppSettingsKit 动态单元格？（iPhone 和 iPad）

> ID：10561834
> 
> 赞同：0
> 
> 时间：2012-05-12T07:17:01.833
> 
> 标签：ios, iphone, ipad, plist, inappsettingskit

我正在寻找一种`dynamic cells`向`InAppSettingsKit`表格添加选择的方法。基本上我想要做的是有`ChildPane`一个选择的设置，这些设置是根据另一个 plist 的内容填充的（其中的内容会改变）。

我要求这样做的原因如下。由于用户应该能够创建一堆命名项目，与这些项目中的每一个相关联的将是一个数字。这个数字将在应用程序的其他地方递增，但是我需要一种允许用户通过设置页面设​​置这个数字的初始值的方法。这样，应用程序其他地方显示的数字就是设置菜单中的值与应用程序其他地方计算的值的总和。

我想解决这个问题的方法是在应用程序中填充一个 plist 文件，每次在应用程序中添加新项目名称时，该文件都会更新。但是我担心的是，由于 plist 位于文档目录而不是主包中，因此这将不起作用。

请问有人可以提供一些建议或建议吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:47:58.453

我认为你有 3 个选择：

1.  创建一个`IASKSettingsReader`基于您的动态模式的自定义子类（从未这样做，但应该可以，也许对 IASK 核心进行一些细微的修改）。`IASKSettingsReader`从 Settings.bundle（或 InAppSettings.bundle）读取设置架构并将其提供给 IASK 的其余部分。

2.  如果每个命名项目的设置模式是静态的，您可以只使用自定义`IASKSettingsStore`. 此类提供到`NSUserDefaults`( `IASKSettingsStoreUserDefaults`) 或文件 ( `IASKSettingsStoreFile`) 的接口。您需要在密钥前面加上子窗格的名称或编号或类似的东西。

3.  `IASKViewControllerClass`使用自述文件中`IASKViewControllerSelector`的描述在IASK 之外创建您的自定义 TableView 。不使用 IASK 来显示单元格，但当然更灵活。

# c# - 在 Crystal Reports C# 中计数

> ID：10561835
> 
> 赞同：1
> 
> 时间：2012-05-12T07:17:23.487
> 
> 标签：c#, crystal-reports

我有一个字段是“是”或“否”，我想在报告的末尾显示该字段中有多少“是”的计数。我创建了一个运行总计字段并将公式设置为等于该字段（“是”），但这会显示在每条记录中。我只想要一个最后的数字。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T07:38:31.303

制作一个静态字段（int 计数器）。每次选择“是”时，只需将计数器加 1。您可以访问计数器来检查“是”的数量。

# java - 为什么println打印的是引用对象的值而不是对象的地址

> ID：10561840
> 
> 赞同：0
> 
> 时间：2012-05-12T07:18:43.453
> 
> 标签：java, reference

```
String myString="Plz_help"; 
```

我开始知道“myString”不是一个对象，而是一个对象引用变量，它存储实际对象的基地址。所以'myString'应该在我执行时返回一个地址

```
System.out.println(myString); 
```

但它正在将“Plz_help”返回到输出。

```
Myclass obj_ref_var=new Myclass(); 
```

当我对我创建的其他类使用相同的 System.out.println(obj_ref_var) 时，它正在返回地址。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T07:22:59.890

当您调用`System.out.println`对象引用时，系统会执行`toString()`为该引用所引用的实际对象定义的方法。对于`String`这个方法返回它的值。

显然，您还没有`toString()`为您的类定义方法，这就是您获得对象类名 + 哈希码的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T07:23:04.467

`println`知道`String`s，并输出它们的内容。

`String`当您传递 a into以外的其他内容时`println`，它会隐式调用该事物的`toString`方法。默认值`toString`on`Object`返回您所看到的，这*不是*地址，而是类的名称 a`@`和[对象哈希码的十六进制版本](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString%28%29)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T07:23:52.627

那么，`System.out.println`使用引用来调用对象的`toString`方法。

由于`toString()`string 的方法返回字符串本身，这就是打印的内容。

但是由于您没有覆盖 的`toString`方法`MyClass`，它返回默认值`toString`，即类名 + 哈希码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T07:23:23.860

当你`System.out.println()`是一个对象时， println 方法检查它是否为空，如果是则打印空。如果不为空，则调用`toString()`对象的方法。`toString()`方法`String`覆盖方法，`Object.toString()`返回自身。

无论如何，`System.out.println()`不​​打印引用，它打印对象本身。Object 的 toString() 实现返回对象的类名，后跟其 hashCode。

# jquery-ui - 如何居中对齐 jQuery UI 选项卡 - 带有屏幕截图

> ID：10561841
> 
> 赞同：14
> 
> 时间：2012-05-12T07:18:54.747
> 
> 标签：jquery-ui, jquery-ui-tabs

有人知道如何在[jQuery UI 选项](http://jqueryui.com/demos/tabs/)卡中居中对齐选项卡吗？

（默认情况下它们是左对齐的，我在文档中找不到对齐选项）

这是[一个页面](http://preferans.de/user.php?id=DE10992)，我用它来分组一些图表，当前代码很简单：

```
$('#chart_tabs').tabs(); 
```

![在此处输入图像描述](../Images/43acd62d747dd030e6dfd49af9ff0b40.png)

**更新：** CSS代码：

```
.ui-tabs .ui-tabs-nav {
        text-align: center;
}

.ui-tabs .ui-tabs-nav li {
        float: none !important;
        display: inline-block;
} 
```

Didier（谢谢）建议已将选项卡居中对齐，但也在选项卡“按钮”下方放置了一些奇怪的间隙：

![在此处输入图像描述](../Images/c5bc0e95e294ca575291078dcf5c753c.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-12T07:26:58.957

这个剪断帮助我回到过去..

```
.centered .ui-tabs-nav {
    height: 2.35em;
    text-align: center;
}
.centered .ui-tabs-nav li {
    display: inline-block;
    float: none;
    margin: 0em;
} 
```

也许这也适合你

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-12T07:27:15.067

最简单的方法是应用于`text-align: center`容器（UL 元素）并取消浮动 LI：

```
.ui-tabs .ui-tabs-nav {
    text-align: center;
}

.ui-tabs .ui-tabs-nav li {
    float: none !important;
    display: inline-block;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-27T10:31:20.853

这对我有用，避免了你提到的差距（在标签下面）：

```
.ui-tabs-nav {
  float: none; text-align: center;  
}

.ui-tabs-nav li {
  display: inline-block; float: none;  
}

.ui-tabs-nav li a {
  float: none;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-21T03:09:18.120

```
.ui-tabs .ui-tabs-nav {
  text-align: center;
}

.ui-tabs .ui-tabs-nav li {
  float: none !important;
  display: inline-block;
}

.ui-tabs .ui-tabs-nav li.ui-tabs-active {
  margin-bottom: -8px;
}

.ui-tabs .ui-tabs-nav li {
  margin: 1px .2em -7px 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-31T12:57:24.610

现代另一种不错的方法：

```
.ui-tabs .ui-tabs-nav {
    display: flex;
    justify-content: center;
} 
```

# c++ - 静态库的静态成员

> ID：10561845
> 
> 赞同：4
> 
> 时间：2012-05-12T07:20:30.657
> 
> 标签：c++, static-libraries, static-members

我有带有静态成员的静态库。该库静态链接到主应用程序及其插件之一。看起来像在 main（应用程序）和 dll（插件）中初始化的静态变量。

**问题**：动态库加载时如何避免静态变量重新初始化。或者我可能错过了一些简单的东西？

**更多信息：**

这是一个简单的静态库，包含静态成员，它是 getter 和 setter：

orbhelper.h

```
class ORBHelper {
    static std::string sss_;
public:
    static std::string getStr();
    static void setSTR(std::string str);
}; 
```

orbhelper.cpp

```
std::string ORBHelper::sss_ = "init";

static std::string ORBHelper::getStr()
{
    std::cerr << "get " << sss_.c_str() << std::endl;
    return sss_;
}
static void ORBHelper::setSTR(std::string str)
{
    sss_ = str;
    std::cerr << "set " << sss_.c_str() << std::endl;
} 
```

这个库在 main.cpp 和另一个动态库中使用，它在 main 中加载。在 main.cpp 中，我设置了静态字符串，并在其中一个动态库函数中获取它。

在 main 中设置静态变量：

主文件

```
...
ORBHelper::setStr("main");
std::cerr << ORBHelper::getStr().c_str() << std::endl; //prints 'main'
//then loading library
... 
```

然后在dll中获取变量值：

hwplugin.cpp

```
...
std::cerr << ORBHelper::getStr().c_str() << std::endl; //prints 'init' instead of 'main'
... 
```

看起来静态变量已被初始化两次。第一个 - 在 main.cpp 之前，第二个 - 加载动态库时。具有静态类的静态库链接到主应用程序和动态库。

PS 在我的问题中有太多“静态”字眼，我知道 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T07:33:29.857

是的，您有两个辅助类实例。

DLL 应该链接到链接静态类的可执行文件，并使用它来解析帮助程序类。不要将 DLL 与静态库链接，而是将其链接到可执行文件本身。

# json - 在 Windows 8 中将数据写入文本文件

> ID：10561847
> 
> 赞同：2
> 
> 时间：2012-05-12T07:21:25.303
> 
> 标签：json, html, windows-8

我正在使用 HTML5 开发 Windows 8 应用程序。该应用程序需要一些用户数据来创建新事件。事件有标题、描述、日期和时间。我想在用户填写表单后将这些数据存储在 JSON 格式的文本文件中，以便下次用户打开应用程序时可以看到它。

我可以找到将 JSON 对象写入文本文件的不同方法，但找不到与在文本文件末尾附加数据相关的任何内容。基本上，我有一个 events.txt 从中读取和显示数据，并且我想在用户添加事件后将事件附加到同一个 .txt 中。

我的 events.txt 看起来像这样

```
[
        {
        "key": "event1",
        "title": "title1", 
        "description": "description1",
        "date": "<sample date>",
        "time": "<sample time>",
        "backgroundImage": "../images/logo.png"
        }
] 
```

我正在使用以下代码从该文件中读取事件

```
WinJS.xhr({ url: "../data/events.txt" }).then(function (xhr) {
        var events = JSON.parse(xhr.responseText);

        events.forEach(function (feed) {
            event.push({
                group: feed,
                key: feed.key,
                title: feed.title,
                description: feed.description,
                date: feed.date,
                time: feed.time,
                backgroundImage: feed.backgroundImage
            });
        });
    }); 
```

任何形式的帮助都将不胜感激，因为我在这里的最后期限紧迫。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T14:30:01.347

您是否正在寻找此文件访问[示例](http://code.msdn.microsoft.com/windowsapps/File-access-sample-d723e597)`Consumer Preview`？

如果我正确理解了您的问题，我认为这里有一些您想要使用的重要 API。

```
// Create a file
var eventFile;
Windows.Storage.KnownFolders.documentsLibrary.createFileAsync("event.txt", Windows.Storage.CreationCollisionOption.openIfExists).done(function (file) {
        eventFile = file;
    });

// Write Text to a file
Windows.Storage.FileIO.writeTextAsync(eventFile, JSON.stringify(yourJSONObject));

// Append Text to a file
Windows.Storage.FileIO.appendTextAsync(eventFile, JSON.stringify(yourJSONObject)); 
```

更多 FileIO API 参考：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh701440.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh701440.aspx)

此外，您为什么不考虑使用`local storage`或`indexedDB`存储您的活动信息？

# javascript - JQuery如何获取所选文本交叉的元素？

> ID：10561850
> 
> 赞同：0
> 
> 时间：2012-05-12T07:22:48.197
> 
> 标签：javascript, jquery

我正在做一个项目，我需要在 iframe 中获取选定的文本 选定的文本本身可以跨越 iframe 内的多个跨度我不需要获取文本本身，但我需要知道文本交叉的跨度，所有span 的 id 从 1~ 到页面末尾，所以它们都可以通过 id 属性访问，我只需要获取所选文本交叉的 span 的所有 id，我环顾了谷歌，但似乎没有找到某人有同样的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T10:30:10.780

这是获取范围内的节点的答案，该范围适用于除 IE < 9 之外的所有主要浏览器，但您需要自己获取所选范围：

[https://stackoverflow.com/a/7931003](https://stackoverflow.com/a/7931003)

对于跨浏览器解决方案，您可以按如下方式使用我的[Rangy](http://code.google.com/p/rangy/)`iframe`库，假设您在名为的变量中引用了 iframe ：

```
var sel = rangy.getIframeSelection(iframe);
if (sel.rangeCount > 0) {
    var range = sel.getRangeAt(0);
    var spans = range.getNodes([1], function(element) {
        return element.tagName.toLowerCase() == "span";
    });
    // spans is now an array of selected or partially selected <span>
    // elements. Spans inside other spans are not included.
} 
```

# ruby - 在设置 RVM 环境以使用 Gist 和 OpenSSL 时遇到问题

> ID：10561853
> 
> 赞同：2
> 
> 时间：2012-05-12T07:23:19.610
> 
> 标签：ruby, openssl, rvm, gist

我尝试按照[RVM](https://rvm.io/packages/openssl/)中列出的说明让 OpenSSL 正常工作，以便 Gist 与 pry 一起工作。但是，尽管尝试了所有建议，但我仍然不断收到这些错误。我对结构不够了解，无法尝试不同的选择。

```
stanley@ubuntu:~/Downloads$ pry
[1] pry(main)> gist s.each_line
LoadError: cannot load such file -- openssl
from /home/stanley/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
[2] pry(main)> 
stanley@ubuntu:~/Downloads$ gem install openssl
ERROR:  Could not find a valid gem 'openssl' (>= 0) in any repository
ERROR:  Possible alternatives: opendsl, OpenS3, open_dsl, opensrs, openurl
stanley@ubuntu:~/Downloads$ rm -rf $rvm_path/usr
stanley@ubuntu:~/Downloads$ rvm requirements

Requirements for Linux ( DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=11.10
DISTRIB_CODENAME=oneiric
DISTRIB_DESCRIPTION="Ubuntu 11.10" )

NOTE: 'ruby' represents Matz's Ruby Interpreter (MRI) (1.8.X, 1.9.X)
             This is the *original* / standard Ruby Language Interpreter
      'ree'  represents Ruby Enterprise Edition
      'rbx'  represents Rubinius

bash >= 4.1 required
curl is required
git is required (>= 1.7 for ruby-head)
patch is required (for 1.8 rubies and some ruby-head's).

To install rbx and/or Ruby 1.9 head (MRI) (eg. 1.9.2-head),
then you must install and use rvm 1.8.7 first.

Additional Dependencies:
# For Ruby / Ruby HEAD (MRI, Rubinius, & REE), install the following:
  ruby: /usr/bin/apt-get install build-essential openssl libreadline6 libreadline6-dev curl git-core zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev automake libtool bison subversion

# For JRuby, install the following:
  jruby: /usr/bin/apt-get install curl g++ openjdk-6-jre-headless
  jruby-head: /usr/bin/apt-get install ant openjdk-6-jdk

# For IronRuby, install the following:
  ironruby: /usr/bin/apt-get install curl mono-2.0-devel

stanley@ubuntu:~/Downloads$ rvm reinstall 1.9.2 --with-openssl-dir=/usr/local
it seems that /home/stanley/.rvm/src/ruby-1.9.2-p320 is already non existent.
it seems that /home/stanley/.rvm/rubies/ruby-1.9.2-p320 is already non existent.
Removing ruby-1.9.2-p320 aliases...
Removing ruby-1.9.2-p320 wrappers...
Removing ruby-1.9.2-p320 environments...
Removing ruby-1.9.2-p320 binaries...
Fetching yaml-0.1.4.tar.gz to /home/stanley/.rvm/archives
Extracting yaml-0.1.4.tar.gz to /home/stanley/.rvm/src
Prepare yaml in /home/stanley/.rvm/src/yaml-0.1.4.
Configuring yaml in /home/stanley/.rvm/src/yaml-0.1.4.
Compiling yaml in /home/stanley/.rvm/src/yaml-0.1.4.
Installing yaml to /home/stanley/.rvm/usr
Installing Ruby from source to: /home/stanley/.rvm/rubies/ruby-1.9.2-p320, this may take a while depending on your cpu(s)...

ruby-1.9.2-p320 - #fetching 
ruby-1.9.2-p320 - #downloading ruby-1.9.2-p320, this may take a while depending on your connection...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 8770k  100 8770k    0     0   171k      0  0:00:50  0:00:50 --:--:--  212k
ruby-1.9.2-p320 - #extracting ruby-1.9.2-p320 to /home/stanley/.rvm/src/ruby-1.9.2-p320
ruby-1.9.2-p320 - #extracted to /home/stanley/.rvm/src/ruby-1.9.2-p320
ruby-1.9.2-p320 - #configuring 
ruby-1.9.2-p320 - #compiling 
ruby-1.9.2-p320 - #installing 
Removing old Rubygems files...
Installing rubygems-1.8.24 for ruby-1.9.2-p320 ...
Installation of rubygems completed successfully.
ruby-1.9.2-p320 - adjusting #shebangs for (gem irb erb ri rdoc testrb rake).
ruby-1.9.2-p320 - #importing default gemsets (/home/stanley/.rvm/gemsets/)
Install of ruby-1.9.2-p320 - #complete 
stanley@ubuntu:~/Downloads$ pry
[1] pry(main)> gist s.each_line
LoadError: cannot load such file -- openssl
from /home/stanley/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
[2] pry(main)> 
stanley@ubuntu:~/Downloads$ rvm pkg install openssl
Fetching openssl-0.9.8t.tar.gz to /home/stanley/.rvm/archives
Extracting openssl-0.9.8t.tar.gz to /home/stanley/.rvm/src
Configuring openssl in /home/stanley/.rvm/src/openssl-0.9.8t.
Compiling openssl in /home/stanley/.rvm/src/openssl-0.9.8t.
Installing openssl to /home/stanley/.rvm/usr
stanley@ubuntu:~/Downloads$ pry
[1] pry(main)> gist s.each_line
LoadError: cannot load such file -- openssl
from /home/stanley/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
[2] pry(main)> 
stanley@ubuntu:~/Downloads$ rvm reinstall 1.9.2 --with-openssl-dir=$rvm_path/usr
Removing /home/stanley/.rvm/src/ruby-1.9.2-p320...
Removing /home/stanley/.rvm/rubies/ruby-1.9.2-p320...
Removing ruby-1.9.2-p320 aliases...
Removing ruby-1.9.2-p320 wrappers...
Removing ruby-1.9.2-p320 environments...
Removing ruby-1.9.2-p320 binaries...
Installing Ruby from source to: /home/stanley/.rvm/rubies/ruby-1.9.2-p320, this may take a while depending on your cpu(s)...

ruby-1.9.2-p320 - #fetching 
ruby-1.9.2-p320 - #extracting ruby-1.9.2-p320 to /home/stanley/.rvm/src/ruby-1.9.2-p320
ruby-1.9.2-p320 - #extracted to /home/stanley/.rvm/src/ruby-1.9.2-p320
ruby-1.9.2-p320 - #configuring 
ruby-1.9.2-p320 - #compiling 
ruby-1.9.2-p320 - #installing 
Removing old Rubygems files...
Installing rubygems-1.8.24 for ruby-1.9.2-p320 ...
Installation of rubygems completed successfully.
ruby-1.9.2-p320 - adjusting #shebangs for (gem irb erb ri rdoc testrb rake).
ruby-1.9.2-p320 - #importing default gemsets (/home/stanley/.rvm/gemsets/)
Install of ruby-1.9.2-p320 - #complete 
stanley@ubuntu:~/Downloads$ pry
[1] pry(main)> gist s.each_line
LoadError: cannot load such file -- openssl
from /home/stanley/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
[2] pry(main)> 
stanley@ubuntu:~/Downloads$  rvm --skip-autoreconf pkg install openssl
Fetching openssl-0.9.8t.tar.gz to /home/stanley/.rvm/archives
Extracting openssl-0.9.8t.tar.gz to /home/stanley/.rvm/src
Configuring openssl in /home/stanley/.rvm/src/openssl-0.9.8t.
Compiling openssl in /home/stanley/.rvm/src/openssl-0.9.8t.
Installing openssl to /home/stanley/.rvm/usr
stanley@ubuntu:~/Downloads$ pry
[1] pry(main)> gist s.each_line
LoadError: cannot load such file -- openssl
from /home/stanley/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
[2] pry(main)> 
```

你对我解决这个问题有什么建议？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T15:16:50.940

你的发行版的 openssl 就是你安装的。它不是宝石。它是一个操作系统包

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T00:50:10.703

我最终按照[此讨论](https://stackoverflow.com/questions/9056008/installed-ruby-1-9-3-with-rvm-but-command-line-doesnt-show-ruby-v/9056395#9056395)中的答案说明进行了操作。然后重新安装 ruby​​ 以使 gist 工作。

# mysql - MySQL CASE & INNER JOIN 在一起？

> ID：10561857
> 
> 赞同：3
> 
> 时间：2012-05-12T07:23:34.357
> 
> 标签：mysql

我有以下 SQL 查询。

```
SELECT MIN(PLD.available_date) as 'FROM', MAX(PLD.available_date) as 'UNTIL', (
CASE
    WHEN DATEDIFF('2012-04-01', '2012-04-10') = (COUNT(PLD.available_date) - 1)
    THEN 'Yes'
    ELSE 'No'
END) as isAvailable, PL.*
FROM `parking_lot_dates` as PLD
INNER JOIN parking_lots as PL ON PLD.plid = PL.plid
WHERE PLD.available_date BETWEEN '2012-04-01' AND '2012-04-10'
GROUP BY PLD.plid 
```

但是是否可以将 INNER JOIN 放入 CASE 中？我想要完成的是，当 isAvailable 列的值为 Yes 时，获取额外的信息，否则不要获取它。

我尝试将 INNER JOIN 放在 CASE 语句之间，但没有奏效。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T07:34:07.450

您不能以您想要的方式进行条件连接，但您可以：

```
SELECT PLD.FROM, PLD.UNTIL, IF(PLD.isAvailable, 'Yes', 'No') AS isAvailable, PL.*
FROM (
    SELECT   plid
      ,      MIN(available_date) AS `FROM`
      ,      MAX(available_date) AS `UNTIL`
      ,      DATEDIFF('2012-04-01', '2012-04-10') = COUNT(*) - 1 AS `isAvailable`
    FROM     parking_lot_dates
    WHERE    available_date BETWEEN '2012-04-01' AND '2012-04-10'
    GROUP BY plid
  ) AS PLD LEFT JOIN parking_lots AS PL ON (
    PLD.isAvailable AND PL.plid = PLD.plid
  )
WHERE NOT (PLD.isAvailable AND PL.plid IS NULL) 
```

子查询对表执行分组操作`parking_lot_dates`，我们在该表和表之间进行外连接，以便在*不满足*`parking_lots`连接条件时也有记录。了解[SQL 连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

 *该条款通过消除预期结果中没有匹配记录的任何结果来`WHERE`模仿您的效果；如果您实际上并不想要这种行为，则可以省略它。`INNER JOIN``parking_lots`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T07:59:40.813

目前还不是很清楚你到底想要什么。也许`HAVING`您只需要一个子句：

```
SELECT PL.*
FROM parking_lot_dates AS PLD
  INNER JOIN parking_lots AS PL 
    ON PLD.plid = PL.plid
WHERE PLD.available_date BETWEEN '2012-04-01' AND '2012-04-10'
GROUP BY PLD.plid
HAVING DATEDIFF('2012-04-01', '2012-04-10') = COUNT(PLD.available_date) - 1 
```*

# tfs - 如何从 TFS 2010 中的错误状态图之间的工作项（错误）转换中获取报告？

> ID：10561859
> 
> 赞同：4
> 
> 时间：2012-05-12T07:24:14.507
> 
> 标签：tfs, report

Bug 的状态图由 3 个状态组成。我将`R=s1/s2`在 TFS 2010 中计算 s1 与 s2 的比率。

*   S1 是特殊错误从一个`Resolved`状态转移到另一个`Active`状态的次数。

*   S2 是开发人员将该特殊错误从一个`Active`状态转移到另一个`Resolved`状态的次数。

![图表](../Images/02b0cc0c1e69da53b484ef596eeb6c6e.png).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:48:31.970

这是我的看法：

您有两种方法来构建报告：

1.  使用 SQL Reporting Services，在这种情况下，此类报告不存在，因此您必须自己开发。如果您熟悉 SSRS，那么如果您有时间花点时间就去尝试一下，否则很难得到您想要的东西。
2.  使用 Excel 处理 TFS OLAP Cube，您将在那里找到您需要的数据。然后您可以生成 Excel 图表，保存 Excel 文件并在每次需要时刷新内容。

[我认为您应该尝试第二种解决方案，您会在这里](http://msdn.microsoft.com/en-us/library/ms244710.aspx)和[那里](http://msdn.microsoft.com/en-us/library/ms244678)找到所需的所有信息

# ruby-on-rails - Rails 代码共享：gem vs plugin vs submodule？

> ID：10561860
> 
> 赞同：2
> 
> 时间：2012-05-12T07:24:27.183
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, git

这是场景：需要在多个 Rails 应用程序之间共享某个模型的小型闭源项目。基本上有一个数据库和多个应用程序以不同的方式读取/写入它，但都是通过同一个界面。我希望这个 DAL 的代码只在一个地方实现，并以某种方式与所有需要它的项目共享。

假设我使用 git 作为 VCS，使用最新的 Rails 版本执行此操作的最佳方法是什么？您经常阅读的三个竞争者是 gems（据我所知，如果您托管自己的 gem 服务器，它们只能供内部使用）、Rails 插件和 git 子模块。

鉴于所有三个选项，我无法找到一个概述，为什么一个人可能想要选择一个而不是另一个。我希望你们能帮助我！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T07:27:46.600

我建议您使用 gem，并将它们捆绑在您的应用程序中。我们正在使用几个私有 gem 并将它们保存在`vendor/cache`目录中。

插件已弃用，将被删除。（我相信 Rails 4.0 会删除它们）它们也会引起警告。

使用子模块是一个有趣的想法，但我仍然会坚持使用 gem。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T08:17:28.010

如今，将一些通用代码封装到 gem 中是一种很好的做法。有一个[Gemfury](http://www.gemfury.com/)，自称是“私人宝石云服务器”，提供存储私人宝石的服务。

# c# - 谷歌浏览器窃取剪贴板

> ID：10561861
> 
> 赞同：1
> 
> 时间：2012-05-12T07:24:27.550
> 
> 标签：c#, google-chrome, clipboard, chromium

我有一个问题，我只在网上看到过两三个关于它的帖子：当我在 C# 应用程序（Clipboard.SetText 或 Clipboard.Clear）中使用剪贴板时，Chrome 已经随机使用它，所以我的剪贴板请求失败。

```
System.Runtime.InteropServices.ExternalException: Requested Clipboard operation did not succeed. 
    at System.Windows.Forms.Clipboard.ThrowIfFailed(Int32 hr)
    at System.Windows.Forms.Clipboard.SetDataObject(Object data, Boolean copy, Int32 retryTimes, Int32 retryDelay)
    at System.Windows.Forms.Clipboard.SetText(String text, TextDataFormat format)
    at System.Windows.Forms.Clipboard.SetText(String text) 
```

我关闭 Chrome，它可以工作，然后重新打开 Chrome，几分钟后，它仍然失败。我正在使用以下代码和 1 秒计时器和 GetOpenClipboardWindow()，另一个 PInvoke :(，以确认这确实是让我烦恼的 Chrome：

```
 [DllImport("user32.dll")]
    static extern IntPtr GetOpenClipboardWindow();

    [DllImport("user32.dll", SetLastError = true)]
    static extern int GetWindowThreadProcessId(IntPtr hWnd, out int 
    lpdwProcessId);

    IntPtr hwnd = GetOpenClipboardWindow();
    if (hwnd != IntPtr.Zero)
    {
        int processId;
        GetWindowThreadProcessId(hwnd, out processId);
        Process p = Process.GetProcessById(processId);
        listBox1.Items.Add(p.Modules[0].FileName);
    } 
```

你们中是否有人已经遇到过这个问题？你知道为什么 Chrome 会偷剪贴板吗？

[编辑]

Chrome 团队的任何成员：亲爱的开发者，如果你今天读到这篇文章，请将我的剪贴板还给我，因为我在剪贴板上拥有比你更多的权利。为了你，我找了两天。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T20:05:07.937

恐怕没有什么可做的了，如果另一个进程打开了剪贴板，则在该进程关闭它之前无法释放它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:08:21.917

确保您的应用程序（因为最终，这就是您可以控制的全部）正在遵守规则。确保您没有在执行多个打开/关闭操作时进行。例如，如果您将多种格式放置到剪贴板上，请确保封装在一个打开/关闭块中，而不是两个。每当您在更新后关闭剪贴板时，都会生成剪贴板通知，从而触发其他应用程序（监视剪贴板）查看新数据。因此，请确保为每个预期操作生成一个此类事件（而不是多个）。不要创建意外操作（即在启动应用程序时不要打开/关闭剪贴板）。如果您刚刚更新了剪贴板，请不要

# android - 我无法连接到 ICS 4.0.4 上的服务器？

> ID：10561867
> 
> 赞同：0
> 
> 时间：2012-05-12T07:25:55.667
> 
> 标签：android, android-4.0-ice-cream-sandwich

在 Gingerbread 2.3 上，我的应用程序可以运行并且可以连接到服务器。

但在 ICS 4.0.4 上，可以运行但无法连接到服务器。我可以在 ICS 上的浏览​​器上连接到服务器。

是什么原因以及如何解决。

```
public class NFC_readerActivity extends Activity {

private NfcAdapter mAdapter;
private PendingIntent mPendingIntent;
private NdefMessage mNdefPushMessage;
private AlertDialog mDialog;

// New methods in Android 2.3.3
private static Method sAdapter_enableForegroundDispatch;
private static Method sAdapter_enableForegroundNdefPush;
private static Method sAdapter_disableForegroundDispatch;
private static Method sAdapter_disableForegroundNdefPush;

final static String url = "http://10.204.3.112/getpos.php";
static String result = "0";
String a = "";

static {
    try {
        sAdapter_enableForegroundDispatch = NfcAdapter.class.getMethod(
                "enableForegroundDispatch", new Class[] { Activity.class,
                        PendingIntent.class, IntentFilter[].class,
                        String[][].class });
        sAdapter_enableForegroundNdefPush = NfcAdapter.class.getMethod(
                "enableForegroundNdefPush", new Class[] { Activity.class,
                        NdefMessage.class });
        sAdapter_disableForegroundDispatch = NfcAdapter.class
                .getMethod("disableForegroundDispatch",
                        new Class[] { Activity.class });
        sAdapter_disableForegroundNdefPush = NfcAdapter.class
                .getMethod("disableForegroundNdefPush",
                        new Class[] { Activity.class });
    } catch (NoSuchMethodException e) {
        // failure, i.e Android 2.3-2.3.2
    }
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    boolean checkConnect = isConnectedToServer(url, 30000);
    if(checkConnect){
        Toast.makeText(getApplicationContext(), "connected",
                Toast.LENGTH_SHORT).show();
    }else{
        Toast.makeText(getApplicationContext(), "not connect",
                Toast.LENGTH_SHORT).show();
    }
    resolveIntent(getIntent());

    mDialog = new AlertDialog.Builder(this).setNeutralButton("Ok", null)
            .create();

    mAdapter = NfcAdapter.getDefaultAdapter(this);
    if (mAdapter == null) {
        showMessage(R.string.error, R.string.no_nfc);
    }

    mPendingIntent = PendingIntent.getActivity(this, 0, new Intent(this,
            getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);
    mNdefPushMessage = new NdefMessage(new NdefRecord[] { newTextRecord(
            "Message from NFC Reader :-)", Locale.ENGLISH, true) });
}

private void showMessage(int title, int message) {
    mDialog.setTitle(title);
    mDialog.setMessage(getText(message));
    mDialog.show();
}

private NdefRecord newTextRecord(String text, Locale locale,
        boolean encodeInUtf8) {
    byte[] langBytes = locale.getLanguage().getBytes(
            Charset.forName("US-ASCII"));

    Charset utfEncoding = encodeInUtf8 ? Charset.forName("UTF-8") : Charset
            .forName("UTF-16");
    byte[] textBytes = text.getBytes(utfEncoding);

    int utfBit = encodeInUtf8 ? 0 : (1 << 7);
    char status = (char) (utfBit + langBytes.length);

    byte[] data = new byte[1 + langBytes.length + textBytes.length];
    data[0] = (byte) status;
    System.arraycopy(langBytes, 0, data, 1, langBytes.length);
    System.arraycopy(textBytes, 0, data, 1 + langBytes.length,
            textBytes.length);

    return new NdefRecord(NdefRecord.TNF_WELL_KNOWN, NdefRecord.RTD_TEXT,
            new byte[0], data);
}

@Override
protected void onResume() {
    super.onResume();
    if (mAdapter != null) {
        if (!mAdapter.isEnabled()) {
            showMessage(R.string.error, R.string.nfc_disabled);
        }
        try {
            sAdapter_enableForegroundDispatch.invoke(mAdapter, this,
                    mPendingIntent, null, null);
            sAdapter_enableForegroundNdefPush.invoke(mAdapter, this,
                    mNdefPushMessage);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}

@Override
protected void onPause() {
    super.onPause();
    if (mAdapter != null) {
        try {
            sAdapter_disableForegroundDispatch.invoke(mAdapter, this);
            sAdapter_disableForegroundNdefPush.invoke(mAdapter, this);
        } catch (Exception e) {
            // ignore
        }
    }
}

private void resolveIntent(Intent intent) {
    String action = intent.getAction();
    if (NfcAdapter.ACTION_TAG_DISCOVERED.equals(action)
            || NfcAdapter.ACTION_NDEF_DISCOVERED.equals(action)) {
        Parcelable[] rawMsgs = intent
                .getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
        NdefMessage[] msgs;

        msgs = new NdefMessage[rawMsgs.length];
        for (int i = 0; i < rawMsgs.length; i++) {
            msgs[i] = (NdefMessage) rawMsgs[i];
        }

        getCode(msgs);
    }
}

public boolean isConnectedToServer(String url, int timeout) {
    try {
        URL myUrl = new URL(url);
        URLConnection connection = myUrl.openConnection();
        connection.setConnectTimeout(timeout);
        connection.connect();
        return true;
    } catch (Exception e) {
        return false;
    }
}

private static void getCodeServer(final String key) {
    Thread thread = new Thread() {

        public void run() {

            Looper.prepare();
            DefaultHttpClient client = new DefaultHttpClient();
            HttpParams params = client.getParams();
            HttpConnectionParams.setConnectionTimeout(params, 10000);
            HttpConnectionParams.setSoTimeout(params, 10000);
            HttpClientParams.setRedirecting(params, false);

            HttpPost post = new HttpPost(url);

            List<NameValuePair> valuePairs = new ArrayList<NameValuePair>(1);
            valuePairs.add(new BasicNameValuePair("code", key));

            try {
                post.setEntity(new UrlEncodedFormEntity(valuePairs));

            } catch (UnsupportedEncodingException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (Exception e) {
                Log.e("log_tag", "Error in http connection" + e.toString());
            }

            HttpResponse response = null;
            try {

                response = client.execute(post);
                ByteArrayOutputStream output = new ByteArrayOutputStream();
                response.getEntity().writeTo(output);
                result = output.toString();

                client.getConnectionManager().shutdown();

            } catch (ClientProtocolException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

            Looper.loop();

        }

    };

    thread.start();

    try {
        Thread.sleep(3000);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

void getCode(NdefMessage[] msgs) {
    if (msgs == null || msgs.length == 0) {
        return;
    }

    List<ParsedNdefRecord> records = MsgParser.parse(msgs[0]);
    Toast.makeText(getApplicationContext(), TextRecord.tRecord,
            Toast.LENGTH_SHORT).show();

    if (isConnectedToServer(url, 10000000)) {
        Toast.makeText(getApplicationContext(), "Connected.",
                Toast.LENGTH_SHORT).show();
        getCodeServer(TextRecord.tRecord);
        if (result.equals("1")) {
            Toast.makeText(getApplicationContext(), "You are teacher.",
                    Toast.LENGTH_SHORT).show();
        } else if (result.equals("2")) {
            Toast.makeText(getApplicationContext(), "You are staff.",
                    Toast.LENGTH_SHORT).show();
        } else if (result.equals("3")) {
            Toast.makeText(getApplicationContext(), "You are student.",
                    Toast.LENGTH_SHORT).show();
        } else {
            Toast.makeText(getApplicationContext(), "Somtring wrong.",
                    Toast.LENGTH_SHORT).show();
        }
    } else {
        Toast.makeText(getApplicationContext(), "not Connect.",
                Toast.LENGTH_SHORT).show();
    }

}

@Override
public void onNewIntent(Intent intent) {
    setIntent(intent);
    resolveIntent(intent);
}

} 
```

Logcat 有一条橙色线，另一条线是绿色和蓝色

> W/InputManagerService(132)：在非焦点客户端 com.android.internal.view.IInputMethodClient$Stub$Proxy@417ef6e)(uid=10026 pid=1160) 上开始输入

请帮助我，这是我的高级项目。我明天会介绍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T07:54:34.637

我怀疑您正在 UI 线程上连接到服务器并获得`NetworkOnMainThreadException`. 您可以通过查看 LogCat 视图中的日志来验证这一点。如果是这种情况，您应该改为在后台线程上[异步执行。](http://developer.android.com/resources/articles/painless-threading.html)

# php - PHP 5.1.6 接口问题

> ID：10561871
> 
> 赞同：0
> 
> 时间：2012-05-12T07:26:23.823
> 
> 标签：php

PHP 5.1.6 出现以下错误：

```
Fatal error: Declaration of Tl1Telnet::ExecuteCommand() must be compatible with that of telnet::ExecuteCommand() 
```

ExecuteCommand 在接口中正确定义实现。

```
interface telnet {

public function DoTelnet();
public function ExecuteCommand($command,$fh);
}

class Tl1Telnet implements telnet{
public function ExecuteCommand($command,$fh = NULL){
fputs($this->socketResource,$command);
sleep(2);
$tl1_string = fread($this->socketResource,30000);

if($fh != NULL){
fwrite( $fh, $tl1_string );
}

return $tl1_string;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T07:28:43.070

尝试`$fh = NULL`从实现中删除。这可能会导致问题。正如错误明确指出的那样`Declaration of Tl1Telnet::ExecuteCommand() must be compatible with that of telnet::ExecuteCommand()`

我不确定产生错误的原因是什么。如果可以，您可能应该升级您的 PHP 版本，如果不能，请尝试使用下面演示的解决方法。

例子。

在您的界面中将参数设置为空。

```
interface telnet {
    public function DoTelnet();
    public function ExecuteCommand();
} 
```

并在派生类中。

```
public function ExecuteCommand() {
    $numberOfArgs = func_num_args();
    if($numberOfArgs <= 0) {
        throw new Exception('Missing Argument 1');
    }
    $command = func_get_arg(0);
    $fh = ($numberOfArgs == 2) ? func_get_arg(1) : NULL;
} 
```

如果第一个参数为空，则会抛出错误。如果不是，它将获取第一个参数并将其分配给 $command 变量。如果它找到第二个参数，那么它会将其分配给`$fh`变量，如果为空，则分配默认值 NULL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T08:07:39.390

接口指定了函数 REQUIRES 2 个参数，但您的派生类将其中一个参数设为可选。您可以声明 2 个版本的接口函数（一个带有 1 个参数，另一个带有 2 个参数），或者您可以将接口函数定义为第二个参数是可选的。

# php - 如何能够检索已取消的文件的名称？

> ID：10561872
> 
> 赞同：-1
> 
> 时间：2012-05-12T07:26:28.563
> 
> 标签：php, javascript, jquery, ajax

当用户单击“取消”按钮时，我正在尝试检索已取消上传的文件的文件名。问题是我相信我使用的方法 (var image_file_name" 没有检索已取消的文件名。有谁知道检索已取消文件名的解决方案？

下面是控制“取消”按钮的表单代码和 Javascript 函数：

```
var $fileImage = $("<form action='imageupload.php' 
      method='post'enctype='multipart/form-data' target='upload_target' onsubmit='return 
      startImageUpload(this);' class='imageuploadform' ><label>" + 

"Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/>
<br/><label class='imagelbl'>" + 

"<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload'/>  
</label>" + 

"</p><p class='imagef1_cancel' align='center'><label>" + 

"<input type='button' name='imageCancel' class='imageCancel' value='Cancel'/>
</label>" + 

"</p><p class='listImage' align='left'></p>" +

"<iframe class='upload_target' name='upload_target' src='#' style='width:0;height:0;border:0px;solid;#fff;'></iframe></form>") 
```

...

```
 var _cancelimagecounter = cancelimagecounter;

    $(".imageCancel").click(function() {
    var image_file_name = <?php echo json_encode($image_file_name); ?>;

    jQuery.ajax("cancelimage.php?fileImage=" + image_file_name)
        .done(function(data) {

        $(".imagemsg" + _cancelimagecounter).html(data);
    });

    return stopImageUpload();

}); 
```

下面是 cancelimage.php 脚本，它使用 $GET 方法从 var image_file_name 获取文件名：

```
<?php

...

$image_file_name = $_GET["fileImage"];

    echo "File Upload was Canceled";

        $imagecancelsql = "DELETE FROM Image 
        WHERE ImageFile = 'ImageFiles/". mysql_real_escape_string($image_file_name)."'";

    mysql_query($imagecancelsql);

    mysql_close();

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:50:36.477

尝试设置读取和写入某些 GET var 的 php 循环，例如。isset($_GET["cancelthis"]); 虽然不是最佳实践，但您可以使用 ajax 上传插件进行更好的控制。

# java - 是否可以在 Eclipse 中指定 F3 进行搜索？

> ID：10561877
> 
> 赞同：4
> 
> 时间：2012-05-12T07:27:04.750
> 
> 标签：java, eclipse, shortcuts

我使用 Rclipse for Java，其中使用 Ctrl+F 进行搜索，但 F3 似乎是搜索的标准。我想使用 F3 快捷方式，但如果我指定 F3 像 Ctrl+F 一样工作 - 它会打开用于搜索和替换的对话框窗口。是否可以像在 Notepad++ 中一样使用 F3？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T07:42:54.623

是的你可以。从首选项面板中，您必须将 F3 绑定到`Find and Replace`功能：

![截屏](../Images/7d8c4efc87885aa7bdeac41170578767.png)

您必须避免与其他命令发生冲突才能使其正常工作...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T07:44:59.303

这是步骤

启动 Eclipse

转到**窗口>首选项**

选择**General > Editor > Keys**页面

从网格中搜索命令“查找”。它有一个快捷键 Ctrl + F。

点击**复制命令**

将绑定属性设置为**F3**

而已...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T07:38:56.137

您可以绑定`F3`到`Incremental Find`( `Ctrl+J`)

# multilingual - 如何翻译 JoomGallery 的类别？

> ID：10561887
> 
> 赞同：0
> 
> 时间：2012-05-12T07:28:56.850
> 
> 标签：multilingual, joomla2.5

在我的多语言 joomla 2.5 页面上，我想使用[JoomGallery](http://www.joomgallery.net)。图像被分配到类别。如何根据网页当前语言制作这些类别？

谢谢你。尖刺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:32:02.680

简短回答：尚不支持类别翻译。作为一种解决方法，您可以使用 joomla 的字符串翻译功能。我为设计的快速而肮脏的感觉辩解：主要目标是能够在不更改管理代码的情况下更改后端管理员的翻译。下面的示例以德语作为其基本语言，这意味着：

1.  每个类别名称都以德语输入（例如“Katgeorie 1”）
2.  我们创建一个新常量，其名称与德语版本相同，但修改为命名空间可能性（例如“CATEGORY1”）。这将允许自动匹配。
3.  在模板代码中，如果我们在与原始页面不同的语言页面（这里是德语）上，我们会替换类别输出。

以下函数有助于在其他语言中自动获取正确的常量值。

```
/**
 * Remove umlauts and special chars.
 */
if(!function_exists('toASCII')) {
   function toASCII($str) {   
         $str = mb_strtolower($str,'UTF-8'); // Useful if the current server setting is not UTF-8
         //$str = strtolower($str);
         $str = preg_replace( '#ß#'    , "ss",    $str );    // maps German ß onto ss
         $str = preg_replace( '#ä#'    , "ae",    $str );    // Æ => AE
         $str = preg_replace( '#ö#'    , "oe",    $str );    // Œ => OE
         $str = preg_replace( '#ü#'    , "ue",    $str );    // œ => oe
         $str = preg_replace( '#Ä#'    , "ae",    $str );    // Æ => AE
         $str = preg_replace( '#Ö#'    , "oe",    $str );    // Œ => OE
         $str = preg_replace( '#Ü#'    , "ue",    $str );    // œ => oe
         $str = preg_replace( '# #'    , "",    $str );        // remove spaces
         $str = preg_replace( '#-#'    , "",    $str );        // remove hyphens
         $str = preg_replace( "#'#"    , "",    $str );        // remove apostrophs
         $str = preg_replace( "#/#"    , "",    $str );        // remove apostrophs
         $str = preg_replace( "#\(#"    , "",    $str );        // remove apostrophs
         $str = preg_replace( "#\)#"    , "",    $str );        // remove apostrophs
         $str = preg_replace( "#\.#"    , "",    $str );        // remove apostrophs
         $str = preg_replace( "#,#"    , "",    $str );        // remove apostrophs
         $str = preg_replace( "#\[#"    , "",    $str );        // remove apostrophs
         $str = preg_replace( "#\]#"    , "",    $str );        // remove apostrophs
         // Process all other special chars
         $str = strtr(utf8_decode($str), 
                utf8_decode('ŠŒŽšœžŸ¥µÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖØÙÚÛÜÝßàáâãäåæçèéêëìíîïðñòóôõöøùúûüýÿ'),
                'SOZsozYYuAAAAAAACEEEEIIIIDNOOOOOOUUUUYsaaaaaaaceeeeiiiionoooooouuuuyy');
         return strtoupper($str);
   }
}

function translate($de_string) {

   // Translate all JoomGallery category names
   $menu = JFactory::getApplication()->getMenu();
   $active = $menu->getActive();
   $activeItemLanguage = $active->language;
   $lang = substr($activeItemLanguage, 0, 2);

   // Do not translate german category names
   $trans_str = $de_string;
   if ($lang != "de") {
      // Parse all category names and replace them with an existing override-string.
      $const = toASCII($trans_str);
      $trans_str = JText::_($const);
   }
   return $trans_str;
} 
```

如何使用：替换模板中显示类别名称的字符串函数：

```
<?php echo translate($this->escape($row->name)); ?> 
```

代替

```
<?php echo $this->escape($row->name); ?> 
```

# android - 无法压缩对齐 apk

> ID：10561892
> 
> 赞同：-1
> 
> 时间：2012-05-12T07:30:16.490
> 
> 标签：android, zip, alignment

好的，所以我发布了使用动态壁纸创建器制作的动态壁纸并将其发布到市场。我想添加 LWP 的 zipaligned 新版本，但我不知道该怎么做。

我尝试将应用程序推向市场并压缩我制作的新版本 LWP，但问题是 Google Play 市场不允许我更新我的 apk 文件，因为动态壁纸创建者使用了不同的签名密钥。

我的问题是如何在不退出 LWP 程序的情况下对我创建的 apk 进行 Ziplalign，以便我可以在 Market 中更新？我只想“zipalign”它。

*注意，我尝试使用 Eclipse zipalign 工具，但不知道怎么做，因为 apk 不是用 Eclipse 创建的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T07:57:30.377

Just run `zipalign` on your APK. There's an official [guide to signing](http://developer.android.com/guide/publishing/app-signing.html#align) manually which includes a section on zipalign:

```
zipalign -v 4 your_project_name-unaligned.apk your_project_name.apk 
```

# jsf - 如何在 Jsf 标签中设置行下。我想在一个字符的行下设置

> ID：10561896
> 
> 赞同：1
> 
> 时间：2012-05-12T07:31:28.043
> 
> 标签：jsf

我想在命令按钮和 commandLink 上只设置一个字符下划线。html 中的示例：

```
<button type="button"><u>C</u>lick Me!</button> 
```

如何在 jsf 命令按钮上实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:13:46.933

以下是 commandLink 的方法

```
<h:commandLink style="text-decoration:none;"> 
    <h:outputText value="&lt;u&gt;C&lt;/u&gt;lick Me!" escape="false"/> 
</h:commandLink> 
```

不确定如何仅使用 JSF 对 commandButton 进行操作...您可能想尝试使用 jquery 更改值...

# jquery - iPhone（jQuery）的高度错误？

> ID：10561899
> 
> 赞同：4
> 
> 时间：2012-05-12T07:31:36.350
> 
> 标签：jquery, iphone, height, viewport

我将视口标签设置为 480 像素，因此在 iPhone（纵向模式）中，网站的真实尺寸为：

1.  顶部栏可见时为 480x534 像素
2.  隐藏顶栏时为 480x594px

然而，`jQuery(window).height()`并且总是返回 480x534px `window.innerHeight`，当试图将容器放在当前内容（弹出窗口）之上`jQuery(window).InnerHeight()`时，这会在网站底部产生 60px 的间隙。`height: 100%; width: 100%;`

这已被报告为 jQuery 错误（和 iPhone 错误），但有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T07:56:54.040

当页面在 iPhone 上加载时，顶部栏会出现。
这就是为什么`$(window).height()`会返回较小窗口的实际大小。
在顶部栏向上滑动一段时间后，窗口大小会发生变化。
因此您可以向`(window).height()`表示顶部栏大小的常量添加一个常量，或者[连接](http://api.jquery.com/resize/)到`$(window).resize()`事件以在顶部面板消失后检索实际大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-18T10:42:57.907

请务必使用外部高度而不是内部高度。不幸的是，jQuery`$(window).outerHeight()`不适用于**窗口**（它返回与 相同`$(window).height()`）和**文档**元素，因此您必须使用纯 JavaScript 执行此操作，如下所示：

```
(typeof window.outerHeight != 'undefined')?Math.max(window.outerHeight, $(window).height()):$(window).height() 
```

# php - Wordpress 多用户 - 为单个用户创建一个静态文件夹

> ID：10561903
> 
> 赞同：0
> 
> 时间：2012-05-12T07:33:11.493
> 
> 标签：php, wordpress, .htaccess, subdirectory

我在 Wordpress Multisite http://yourdomain.com/ http://yourdomain.com/user1/ http://yourdomain.com/user2/ 下托管

了
几个
博客

Wordpress 根安装在

**/var/host/yourdomain.com/public/**

但是，我想创建一个静态 html 文件夹以包含一些静态 html 文件

http://yourdomain.com/user1/STATIC_FOLDER/css/ *.*
http://yourdomain.com/user1/STATIC_FOLDER/images/ *。 *
http://yourdomain.com/user1/STATIC_FOLDER/index.html

我还创建了一个子文件夹以允许用户直接通过 FTP

/var/host/yourdomain.com/public/user1/STATIC_FOLDER/ *.*

有人可以就htaccess的编辑给我建议吗？或推荐任何插件，或解决方法来启用它？感谢任何帮助谢谢！

```
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteRule ^([_0-9a-zA-Z-]+/)?files/(.+) wp-includes/ms-files.php?file=$2 [L]
RewriteRule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin/ [R=301,L]
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule  ^([_0-9a-zA-Z-]+/)?(wp-(content|admin|includes).*) $2 [L]
RewriteRule  ^([_0-9a-zA-Z-]+/)?(.*\.php)$ $2 [L]
RewriteRule . index.php [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T10:31:17.147

我已经找到了解决这个问题的方法......

基本上我已经编辑了 htaccess

```
RewriteRule ^user1/STATIC_FOLDER/(.*)$    user1/STATIC_FOLDER/$1   [NC,L] 
```

首先我要了解如何编辑 htaccess，这是一个很好的教程
[http://www.addedbytes.com/for-beginners/url-rewriting-for-beginners/](http://www.addedbytes.com/for-beginners/url-rewriting-for-beginners/)

替换中的“$1”告诉 Apache 在此时将与前面括号 () 模式匹配的任何内容放入 URL

对于正则表达式，这里有一个很好的提示 - 用于 htaccess 的正则表达式...

*   . （任何字符）
*   *（前面的零个或多个）
*   +（以上一项或多项）
*   {}（最小到最大量词）
*   ? （不贪婪的修饰符）
*   ！（字符串开头的意思是“负模式”）
*   ^（字符串的开头，如果在范围的开头，则为“负数”）
*   $（字符串结尾）
*   []（匹配任何内容）
*   - （如果在方括号之间使用，则为范围）
*   ()（组，反向引用组）
*   | （替代，或）
*   \（转义字符本身）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T08:07:04.307

这是安装MU的官方指南

[http://codex.wordpress.org/Create_A_Network](http://codex.wordpress.org/Create_A_Network)

但是，您建议的文件夹布局不能以这种方式工作。
你可以这样做，但你的静态文件夹必须放在`blog.dir` 你甚至可以考虑用户使用普通上传器上传这些文件。

# sql - 在 SQL Server 的列中插入特定的有界数字

> ID：10561915
> 
> 赞同：6
> 
> 时间：2012-05-12T07:37:47.483
> 
> 标签：sql, sql-server-2008

我想编写一个 SQL 查询，它将以特定数字（例如 100）开始并以另一个特定数字（例如 3000）结束的增量数字插入到 SQL Server 中表的列中，但我不知道如何做这个。

例如：
我想将 100 到 3000从(table)插入到`categoryID`(column )`Category`

非常感谢你

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T07:45:22.380

```
DECLARE @id INT
SET @id = 100
WHILE (@id <= 300)
BEGIN
    insert into categories (categoryID) values (@id)
    SELECT @id = @id + 1
END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T08:16:46.887

同样的事情，但使用递归 CTE：

```
DECLARE @i INT
DECLARE @n INT
SET @i = 100
SET @n = 3000
;WITH t(c) AS (
    SELECT @i
    UNION ALL
    SELECT c + 1 FROM t WHERE c < @n
)
INSERT INTO Categories(categoryID)
    SELECT c FROM t OPTION(MAXRECURSION 3000) 
```

# python - 如何在循环之外停止循环？

> ID：10561922
> 
> 赞同：0
> 
> 时间：2012-05-12T07:39:15.817
> 
> 标签：python, loops, try-catch, except

所以我有一个执行某些操作的 for 循环，我需要在上面创建一个 try-except 语句（用于打开文件，如果找不到文件则异常），但是下面的 for 循环出现语法错误它（尽管当我选择错误的文件时它确实给了我异常消息）。遇到异常后如何阻止程序运行循环？

我认为使用 break 可能与它有关，但不太确定如何。我正在考虑是否打印我的异常消息然后中断或类似的东西。这是有问题的代码：

```
def getIngredients(path, basename):
  ingredient = []
  filename = path + '\\' + basename
  try:
    file = open(filename, "r")
  except:
    printNow("File not found.")

  for item in file: 
    if item.find("name") > -1:
      startindex = item.find("name") + 5
      endindex = item.find("<//name>") - 7
      ingredients = item[startindex:endindex]
      ingredient.append(ingredients)

  del ingredient[0]
  del ingredient[4]

  for item in ingredient:
    printNow(item) 
```

基本上，因为我选择了错误的文件来获取异常，所以下面使用该文件的 for 循环给了我一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T07:57:48.400

Well, *you* need to decide what you want to happen if the file is not found.

You could choose to simply return from the function:

```
def getIngredients(path, basename):
    ingredient = []
    filename = path + '\\' + basename
    try:
        file = open(filename, "r")
    except IOError:                 # Never use a bare "except"! Be specific!
        printNow("File not found.")
        return

    for item in file: 
        ...

    return ingredient 
```

That way, the caller can check from the return value whether the function completed successfully (if that matters):

*   If an error occurred before the loop was run, `None` is returned.
*   If the loop doesn't find any matches, an empty list `[]` is returned.
*   Otherwise, the list of results is returned.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T07:56:38.527

I'm guessing you want to exit the function if the file is wrong. Then this will do it:

```
except:
  printNow("File not found.")
  return 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T07:45:38.023

根据我对您的问题的理解，每次遇到异常时，您都会将`flag`变量设置为`1`（或`true`）。然后简单地将你的 - 包围起来`loop`，`if-statement`然后不要执行，否则，执行它。`if``flag``loop`

或者，如果您（出于某种原因）确实需要进入循环，那么您可以选择将`if clause`循环置于内部并使用`break`语句来跳出或退出循环。

[有关python](http://docs.python.org/release/2.5.2/ref/break.html)中的 break 语句的更多信息，以及如何[在循环中使用它](http://docs.python.org/release/1.5/tut/node23.html)的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T07:49:59.220

在循环中 使用一段`break`时间，以摆脱它。`except`

```
>>> while True:  
...     try:  
...         x = int(raw_input("Please enter a number: "))  
...     except ValueError:  
...         print "Oops! That was no valid number. Try again..."  
...         break  
... 
```

# python - UnicodeDecodeError：“ascii”编解码器无法解码位置 1 的字节 0xef

> ID：10561923
> 
> 赞同：111
> 
> 时间：2012-05-12T07:39:52.710
> 
> 标签：python, unicode, utf-8

我在尝试将字符串编码为 UTF-8 时遇到了一些问题。我尝试了很多事情，包括使用`string.encode('utf-8')`and `unicode(string)`，但我得到了错误：

> UnicodeDecodeError：“ascii”编解码器无法解码位置 1 的字节 0xef：序数不在范围内（128）

这是我的字符串：

```
(｡･ω･｡)ﾉ 
```

我不知道出了什么问题，知道吗？

编辑：问题是按原样打印字符串不能正确显示。另外，当我尝试转换它时出现这个错误：

```
Python 2.7.1+ (r271:86832, Apr 11 2011, 18:13:53)
[GCC 4.5.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> s = '(\xef\xbd\xa1\xef\xbd\xa5\xcf\x89\xef\xbd\xa5\xef\xbd\xa1)\xef\xbe\x89'
>>> s1 = s.decode('utf-8')
>>> print s1
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeEncodeError: 'ascii' codec can't encode characters in position 1-5: ordinal not in range(128) 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-05-12T11:05:58.027

这与您的终端编码未设置为 UTF-8 有关。这是我的终端

```
$ echo $LANG
en_GB.UTF-8
$ python
Python 2.7.3 (default, Apr 20 2012, 22:39:59) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> s = '(\xef\xbd\xa1\xef\xbd\xa5\xcf\x89\xef\xbd\xa5\xef\xbd\xa1)\xef\xbe\x89'
>>> s1 = s.decode('utf-8')
>>> print s1
(｡･ω･｡)ﾉ
>>> 
```

在我的终端上，该示例适用于上述示例，但如果我摆脱该`LANG`设置，它将无法正常工作

```
$ unset LANG
$ python
Python 2.7.3 (default, Apr 20 2012, 22:39:59) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> s = '(\xef\xbd\xa1\xef\xbd\xa5\xcf\x89\xef\xbd\xa5\xef\xbd\xa1)\xef\xbe\x89'
>>> s1 = s.decode('utf-8')
>>> print s1
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeEncodeError: 'ascii' codec can't encode characters in position 1-5: ordinal not in range(128)
>>> 
```

请查阅有关您的 linux 变体的文档，以了解如何使此更改永久生效。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-12T07:53:01.310

尝试：

```
string.decode('utf-8')  # or:
unicode(string, 'utf-8') 
```

编辑：

`'(\xef\xbd\xa1\xef\xbd\xa5\xcf\x89\xef\xbd\xa5\xef\xbd\xa1)\xef\xbe\x89'.decode('utf-8')`给出`u'(\uff61\uff65\u03c9\uff65\uff61)\uff89'`，这是正确的。

所以你的问题一定出在其他地方，可能如果你试图用它做一些事情，那么有一个隐式转换正在进行（可能是打印，写入流......）

要说更多，我们需要查看一些代码。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-05-12T11:43:09.373

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-09-28T01:18:54.750

If you are working on a *remote* host, look at `/etc/ssh/ssh_config` on your *local* PC.

When this file contains a line:

```
SendEnv LANG LC_* 
```

comment it out with adding `#` at the head of line. It might help.

With this line, `ssh` sends language related environment variables of your PC to the *remote* host. It causes **a lot of** problems.

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2017-11-18T17:14:44.197

Try setting the system default encoding as `utf-8` at the start of the script, so that all strings are encoded using that.

```
# coding: utf-8
import sys
reload(sys)
sys.setdefaultencoding('utf-8') 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-03-21T08:14:39.270

It's fine to use the below code in the top of your script as [Andrei Krasutski](https://stackoverflow.com/users/3937190/andrei-krasutski) suggested.

```
import sys
reload(sys)
sys.setdefaultencoding('utf-8') 
```

But I will suggest you to also add `# -*- coding: utf-8 -*` line at very top of the script.

Omitting it throws below error in my case when I try to execute `basic.py`.

```
$ python basic.py
  File "01_basic.py", line 14
SyntaxError: Non-ASCII character '\xd9' in file basic.py on line 14, but no encoding declared; see http://python.org/dev/peps/pep-0263/ for details 
```

The following is the code present in `basic.py` which throws above error.

### code with error

```
from pylatex import Document, Section, Subsection, Command, Package
from pylatex.utils import italic, NoEscape

import sys
reload(sys)
sys.setdefaultencoding('utf-8')

def fill_document(doc):
    with doc.create(Section('ِش سثؤفهخى')):
        doc.append('إخع ساخعمي شمصشغس سحثشن فاث فقعفا')
        doc.append(italic('فشمهؤ ؤخىفثىفس شقث شمسخ ىهؤث'))

        with doc.create(Subsection('آثص ٍعلاسثؤفهخى')):
            doc.append('بشةخعس ؤقشئغ ؤاشقشؤفثقس: $&#{}')

if __name__ == '__main__':
    # Basic document
    doc = Document('basic')
    fill_document(doc) 
```

Then I added `# -*- coding: utf-8 -*-` line at very top and executed. It worked.

### code without error

```
# -*- coding: utf-8 -*-
from pylatex import Document, Section, Subsection, Command, Package
from pylatex.utils import italic, NoEscape

import sys
reload(sys)
sys.setdefaultencoding('utf-8')

def fill_document(doc):
    with doc.create(Section('ِش سثؤفهخى')):
        doc.append('إخع ساخعمي شمصشغس سحثشن فاث فقعفا')
        doc.append(italic('فشمهؤ ؤخىفثىفس شقث شمسخ ىهؤث'))

        with doc.create(Subsection('آثص ٍعلاسثؤفهخى')):
            doc.append('بشةخعس ؤقشئغ ؤاشقشؤفثقس: $&#{}')

if __name__ == '__main__':
    # Basic document
    doc = Document('basic')
    fill_document(doc) 
```

Thanks.

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-12-25T03:34:09.333

No problems with my terminal. The above answers helped me looking in the right directions but it didn't work for me until I added `'ignore'`:

```
fix_encoding = lambda s: s.decode('utf8', 'ignore') 
```

As indicated in the comment below, this may lead to undesired results. OTOH it also may just do the trick well enough to get things working and you don't care about losing some characters.

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-07-11T13:07:00.753

this works for ubuntu 15.10:

```
sudo locale-gen "en_US.UTF-8"
sudo dpkg-reconfigure locales 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-05-12T08:08:53.883

看起来您的字符串被编码为`utf-8`，那么到底是什么问题？或者你想在这里做什么..？

```
Python 2.7.3 (default, Apr 20 2012, 22:39:59) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> s = '(\xef\xbd\xa1\xef\xbd\xa5\xcf\x89\xef\xbd\xa5\xef\xbd\xa1)\xef\xbe\x89'
>>> s1 = s.decode('utf-8')
>>> print s1
(｡･ω･｡)ﾉ
>>> s2 = u'(｡･ω･｡)ﾉ'
>>> s2 == s1
True
>>> s2
u'(\uff61\uff65\u03c9\uff65\uff61)\uff89' 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-06-20T21:05:14.967

In my case, it was caused by my Unicode file being saved with a "BOM". To solve this, I cracked open the file using BBEdit and did a "Save as..." choosing for encoding "Unicode (UTF-8)" and not what it came with which was "Unicode (UTF-8, with BOM)"

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-05-10T10:16:57.497

I was getting the same type of error, and I found that the console is not capable of displaying the string in another language. Hence I made the below code changes to set default_charset as UTF-8\.

```
data_head = [('\x81\xa1\x8fo\x89\xef\x82\xa2\x95\xdb\x8f\xd8\x90\xa7\x93x\x81\xcb3\x8c\x8e\x8cp\x91\xb1\x92\x86(\x81\x86\x81\xde\x81\x85)\x81\xa1\x8f\x89\x89\xf1\x88\xc8\x8aO\x81A\x82\xa8\x8b\xe0\x82\xcc\x90S\x94z\x82\xcd\x88\xea\x90\xd8\x95s\x97v\x81\xa1\x83}\x83b\x83v\x82\xcc\x82\xa8\x8e\x8e\x82\xb5\x95\xdb\x8c\xaf\x82\xc5\x8fo\x89\xef\x82\xa2\x8am\x92\xe8\x81\xa1', 'shift_jis')]
default_charset = 'UTF-8' #can also try 'ascii' or other unicode type
print ''.join([ unicode(lin[0], lin[1] or default_charset) for lin in data_head ]) 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-02-26T14:20:08.310

This is the best answer: [https://stackoverflow.com/a/4027726/2159089](https://stackoverflow.com/a/4027726/2159089)

in linux:

```
export PYTHONIOENCODING=utf-8 
```

so `sys.stdout.encoding` is OK.

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2018-04-19T13:14:46.983

BOM, it's so often BOM for me

vi the file, use

```
:set nobomb 
```

and save it. That nearly always fixes it in my case

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2018-07-20T20:57:49.593

I had the same error, with URLs containing non-ascii chars (bytes with values > 128)

```
url = url.decode('utf8').encode('utf-8') 
```

Worked for me, in Python 2.7, I suppose this assignment changed 'something' in the `str` internal representation--i.e., it forces the right decoding of the backed byte sequence in `url` and finally puts the string into a *utf-8* `str` with all the magic in the right place. Unicode in Python is black magic for me. Hope useful

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2014-06-29T04:27:53.613

i solve that problem changing in the file settings.py with 'ENGINE': 'django.db.backends.mysql', don´t use 'ENGINE': 'mysql.connector.django',

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2016-02-05T08:22:33.497

Just convert the text explicitly to string using `str()`. Worked for me.

# java - 如何使用 Java 现有代码为类生成 UML 图？

> ID：10561926
> 
> 赞同：2
> 
> 时间：2012-05-12T07:40:28.653
> 
> 标签：java

我有带有源代码的 Java 项目，我想自动获取此代码的 UML 图。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T07:43:25.970

[Astah](http://astah.net/editions/community)可以做到这一点（即使在社区版本中也是如此）

# c# - itextsharp 段落块字体被列表默认字体覆盖

> ID：10561927
> 
> 赞同：1
> 
> 时间：2012-05-12T07:41:18.540
> 
> 标签：c#, pdf, itextsharp

我正在使用开源 iTextSharp 的 v5.2.1。我有一段代码的行为与预期不符。由于某种原因，当我将 pdf 流式传输到浏览器时，字体不同。

下面是我正在尝试做的事情的表示。

```
Font times_roman = new Font(Font.FONTFAMILY.TIMES_ROMAN, 9f);
float indent1 = 20f;

try
{

   foreach (var item in List)  {

        Chunk c1 = new Chunk(string.format("Item: {0}\n\n" item.Name, times_roman));
        Phrase ph1 = new Phrase(c1);
        Paragraph p1 = New Paragraph(ph1);
        doc.Add(p1);

        Chunk c2 = new Chunk(string.format("(1) Item  Category{0}:\n\n" item.Category, times_roman));
        Phrase ph2 = new Phrase(c2);
        Paragraph p2 = New Paragraph(ph2);
        p2.FirstLineIndent = indent1;
        doc.Add(p2);

  }
}
catch
{
} 
```

然后我流式传输 pdf，以便它在 IE8 或 IE9 中自动打开。

无论我尝试什么，我总是得到以下结果，无论我在 c2、ph2、p2 上设置什么字体

```
Item: MyWidget1 (this dislays Times Roman)

(1) Item Category:  Utility Tool (this displays as Helvetica 12) 
```

就好像 iTextSharp 认为它是一个 ListItem 因为 (1) 并且无论你做什么都会控制。

我不能使用 Lists 和 ListItem 因为我只需要缩进第一行，而 itextsharp 列表将缩进多行并自动排列它们。我有很多项目的文本会换行到半页。

我真的很喜欢 iTextSharp 库（因为它是免费的），但这个功能让我抓狂。

# python - 解析上传的文件而不传递密钥

> ID：10561930
> 
> 赞同：0
> 
> 时间：2012-05-12T07:42:10.490
> 
> 标签：python, django, wsgi

我想在一个请求中上传多个文件。

是否有预定义的解析器来解析文件（包括内容）而不在 wsgi 或 django 中传递文件的密钥。我想通过传递文件的索引从请求中获取所有文件。

例如，在 .net 中，我们`Request.Files.Count`将给出上传文件的数量。并将`Request.Files[0]`在索引零处给出文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T14:35:50.053

`request.FILES`是一个类似字典的对象，其中包含 UploadedFile 对象，这些对象是上传文件的轻量级包装器。有关这些包装器公开哪些功能的更多详细信息，请参阅[https://docs.djangoproject.com/en/1.3/topics/http/file-uploads/#uploadedfile-objects](https://docs.djangoproject.com/en/1.3/topics/http/file-uploads/#uploadedfile-objects)。

为了更简洁地回答您的问题，这意味着您不需要自定义解析器来访问多个文件。有关访问字典中数据的更多详细信息，请参阅[http://docs.python.org/tutorial/datastructures.html#dictionaries](http://docs.python.org/tutorial/datastructures.html#dictionaries)。

# mysql - 无法在 Windows 中使用批处理文件运行 MySQL 文件

> ID：10561934
> 
> 赞同：0
> 
> 时间：2012-05-12T07:43:02.237
> 
> 标签：mysql, sql, batch-file

我正在尝试`MySQL`从文件运行`batch`文件。

我目前正在使用此代码

```
mysql -u<root> -p<> -e "source C:/xampp/htdocs/internet_wk_1.7/db/master_db.sql" kani 
```

*   `root`是我的用户名。
*   我没有密码。
*   我要运行`master_db.sql`，路径是正确的。
*   数据库名称是`kani`，它已经存在

当我运行`batch`文件时，没有任何反应。我究竟做错了什么？

**更新**

嗨，我解决了。这是我的新代码

```
CLS
C:
cd\xampp\mysql\bin
mysql -u root -e "source C:\xampp\htdocs\internet_wk_1.7\db\master_db.sql" kani 
```

但我的文件夹中有多个 sql 文件，我也想运行它们。我试过这样但没有用，请帮忙

```
CLS
C:
cd\xampp\mysql\bin
mysql -u root -e "source C:\xampp\htdocs\internet_wk_1.7\db\master_db.sql" kani
source C:\xampp\htdocs\internet_wk_1.7\db\master_db_tracker.sql 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:13:33.497

```
CLS
C:
cd\xampp\mysql\bin
mysql -u root -e "source C:\xampp\htdocs\internet_wk_1.7\db\master_db.sql" kani
mysql -u root -e "source C:\xampp\htdocs\internet_wk_1.7\db\master_db_tracker.sql" kani 
```

# c# - 使用 Unity 2.0 的条件方法参数注入

> ID：10561935
> 
> 赞同：1
> 
> 时间：2012-05-12T07:43:10.357
> 
> 标签：c#, asp.net-mvc-3, dependency-injection, unity-container

我的 MVC 3 控制器类中有一个方法，它接受两个参数：

```
public ActionResult MyMethod(string providerName, IAuthProvider providerImpl) 
```

我`IAuthProvider`在 Unity 容器中通过其名称注册了多个实现，如下所示：

```
container.RegisterType<IAuthProvider, FacebookAuthProvider>("facebook");
container.RegisterType<IAuthProvider, GoogleAuthProvider>("google"); 
```

因此，当调用该方法时，我希望根据第一个参数解析第二个参数。例如，如果第一个参数是“facebook”，则第二个参数必须从容器解析为以`IAuthProvider`名称“facebook”注册的实现。

我期待任何想法！

备注：我用的是Unity.2.1.505.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T07:57:47.193

There's so many things wrong with your example.

1.  Action Methods are not to be dependency injected with parameters, they are meant to be injected with values from the ModelBinder, that converts the name-value pairs that the browser is sending to objects that your action can accept.
2.  No DI framework can do the "bind the second parameter, based on first" out of the box because it is beyond their scope. If the DI can figure out what to inject for your IAuthProvider based on runtime values, it can only be because you have written some custom code for it.
3.  What you need is not in Unity, you need to write a custom ModelBinder for your requirements - Look [here](https://stackoverflow.com/questions/1193453/asp-net-mvc-custom-model-binding-explanation) and [here](http://www.dotnetcurry.com/ShowArticle.aspx?ID=584) for examples. Extend the default ModelBinder, put a condition that if the action is `MyMethod` then look into the request values and self create the AuthProvider object and return the object.
4.  You can get the provider from the DI container, when you are writing your custom model binder. Also rethink the parameters, If your action is getting the correct provider, then why does it need the providerName? If it really needs it can it not get the name from the IAuthProvider itself? By checking the type or by using a .Name method? the providerName will only be used in the custom modelbinder

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T20:18:28.090

我认为，如果您使用 Autofac，您可以按照您的意图通过操作调用注入。但我不认为你可以用 Unity 做到这一点。我已经用 Autofac 完成了。

# javascript - 如何比较两个十六进制值？

> ID：10561938
> 
> 赞同：5
> 
> 时间：2012-05-12T07:44:34.730
> 
> 标签：javascript

我需要比较来自 xml 标记属性字段的两个十六进制值，我正在尝试这个：

```
var fill = $(this).attr( "fill" );
// console.log( fill.toString(16) );
if ( fill === "#FF00FF" ) 
```

但是没有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T07:59:49.457

`attr` returns a string, there's no need to call `toString` on it (and the argument will be ignored, because `String`'s `toString` doesn't take an argument).

Your code is assuming a couple of things:

1.  That the attribute comes back in #hex form (if it's a color value, this is not reliably true cross-browser).

2.  That it will be in all upper case.

Not knowing what you see when you log the value, I'll just address the second part:

```
var fill = $(this).attr( "fill" );
if ( fill.toUpperCase() === "#FF00FF" ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T07:52:48.000

我认为你必须在那里使用2个等号，试试这个......

```
var fill = $(this).attr( "fill" );
if ( fill == "#FF00FF" ) 
```

如果这不起作用，那么您可能没有识别 $(this)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T07:55:12.793

如果填充是一种颜色，那么它可能会以 RGB 格式返回。当你记录它时，你会写`toString()`. 将其与 RGB 值进行比较或将其与字符串进行比较`fill.toString(16)`

# c# - 将 xmlns 属性添加到根元素

> ID：10561948
> 
> 赞同：5
> 
> 时间：2012-05-12T07:45:59.017
> 
> 标签：c#, xml, linq, linq-to-xml, xml-namespaces

我有 C# 程序为报告服务中的显示报告生成 RDL 文件。我使用 Linq to Xml 生成 Xml。

当我尝试将**xmlns** XAttribute 添加到报表元素时，我遇到了几个问题。

我测试以下方法：

**第一的：**

```
 XDocument d = new XDocument(
           new XDeclaration("1.0", "utf-8", "yes"),
           new XElement("Report",
               new XAttribute(XNamespace.Xmlns + "rd", "http://schemas.microsoft.com/SQLServer/reporting/reportdesigner"),
               new XAttribute(XNamespace.Xmlns + "cl", "http://schemas.microsoft.com/sqlserver/reporting/2010/01/componentdefinition"),
               new XAttribute("xmlns", "http://schemas.microsoft.com/sqlserver/reporting/2010/01/reportdefinition"),
                   new XElement("DataSources", ""),
                   new XElement("DataSets", ""),
                   new XElement("ReportSections", 
```

这是我的代码的一部分，展示了如何生成 xml：

**第二：**

```
XNamespace reportDef = "http://schemas.microsoft.com/sqlserver/reporting/2010/01/reportdefinition";
        XDocument d = new XDocument(
           new XDeclaration("1.0", "utf-8", "yes"),
           new XElement(reportDef + "Report",
               new XAttribute(XNamespace.Xmlns + "rd", "http://schemas.microsoft.com/SQLServer/reporting/reportdesigner"),
               new XAttribute(XNamespace.Xmlns + "cl", "http://schemas.microsoft.com/sqlserver/reporting/2010/01/componentdefinition"),
                   new XElement("DataSources", ""),
                   new XElement("DataSets", ""),
                   new XElement("ReportSections",... 
```

第一种方法返回一个错误，第二种方法将属性**xmlns**添加到所有子节点。

我想要这种格式：

```
<Report xmlns="http://schemas.microsoft.com/sqlserver/reporting/2010/01/reportdefinition"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T08:09:49.057

尝试`XNamespace`按照[如何：使用命名空间创建文档 (C#) (LINQ to XML)中的说明添加子节点](http://msdn.microsoft.com/en-us/library/bb387075.aspx)

```
XNamespace reportDef = "http://schemas.microsoft.com/sqlserver/reporting/2010/01/reportdefinition";
XElement root = new XElement(reportDef + "Report",
    new XElement(reportDef + "Child", "child content")); 
```

这应该会给你想要的结果。

您还可以通过添加`xmlns`属性来添加默认命名空间

```
XElement xe = new XElement(reportDef + "Report",
    new XAttribute("xmlns", "http://schemas.microsoft.com/sqlserver/reporting/2010/01/reportdefinition"),
    new XElement(reportDef + "Child", "child content")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T09:32:15.040

您可以从@Filburt 的回答和[这篇](https://stackoverflow.com/questions/2874422/how-to-set-the-default-xml-namespace-for-an-xdocument)文章中看到， xmlns 属性是一个特殊属性。它只能通过 XNamespace 类访问。

下面我将举例说明如何创建命名空间。您应该查看[如何：使用命名空间创建文档以](http://msdn.microsoft.com/en-us/library/bb387075.aspx)获取更多信息。您的代码将**xmlns**标记添加到所有子节点的原因是因为您没有在同一命名空间中创建所有子节点。

1.  要将元素放在默认命名空间中，请创建一个`XNamespace`（参见下面的 ns1）并将值添加到元素名称之前。例如：`new XElement(ns1 + "Report");`这会在 ns1 命名空间中创建一个元素`<Report>`，并且没有前缀。
2.  要添加其他命名空间，请添加带有命名空间和前缀的属性。例如，`new XAttribute(XNamespace.Xmlns + "ns2", ns2)`将命名空间添加到带有前缀的`<Report>`元素。`ns2`此后，每次`new XElement(ns2+"DataSources")`使用 ns2 命名空间创建元素 ( ) 时，都会使用前缀。前缀可以用在具有前缀声明的元素下面的所有后代中。这是你犯错的地方。

    ```
     StringBuilder sb = new StringBuilder();
        XmlWriterSettings xws = new XmlWriterSettings();
        xws.OmitXmlDeclaration = true;
        xws.Indent = true;

        using (XmlWriter xw = XmlWriter.Create(sb, xws))
        {   
            XNamespace ns1 = "http://schemas.microsoft.com/sqlserver/reporting/2010/01/reportdefinition";
            XNamespace ns2 = "http://schemas.microsoft.com/SQLServer/reporting/reportdesigner";
            XNamespace ns3 = "http://schemas.microsoft.com/sqlserver/reporting/2010/01/componentdefinition";
            XDocument doc = new XDocument(new XDeclaration("1.0", "utf-8", "yes"));
            XElement reportElement = new XElement(ns1 + "Report",
                new XAttribute(XNamespace.Xmlns + "ns2", ns2),
                new XAttribute(XNamespace.Xmlns + "ns3", ns3));
            doc.Add(reportElement);

            reportElement.Add(new XElement(ns2+"DataSources"));
            reportElement.Add(new XElement(ns3+"DataSets"));
            reportElement.Add(new XElement(ns1+"ReportSections"));

            doc.WriteTo(xw);
        }

        System.Diagnostics.Debug.Write(sb.ToString()); 
    ```

# javascript - 将数据库生成的多个复选框值传递给使用 javascript 和查询数据库

> ID：10561953
> 
> 赞同：0
> 
> 时间：2012-05-12T07:47:32.110
> 
> 标签：javascript, database, text, checkbox

```
print "<Font face=\"calibri, Arial\"><table id=\"rnatable\" border=2px width=100%>";
print "<th></th>";
print "<th>a</th>";
print "<th>b</th>";
print "<th>c</th>";
print "<th>d</th>";
print "<th>e</th>";
print "<th>f</th>";
print "<th>g</th>";

while($array = mysql_fetch_array($sql_query))
{
$id=$array['a'];
print "<tr id=\"newtr\">";
print "<td><input id=\"check\" type=\"checkbox\" name=\"keyword[]\" value=\"$id\" ></td>";
print "<td>".$array['a']."</td>";
print "<td>".$array['b']."</td>";
print "<td>".$array['c']."</td>";
print "<td>".$array['d']."</td>";
print "<td>".$array['e']."</td>";
print "<td>".$array['f']."</td>";

print "<td>
<a href=\"http://localhost/rnasearch/retrieve.php?a=$id\">bla</a>
</td></tr></font>";

}

print "</table>";
} 
```

这是我编写的用于从数据库中检索数据的 php 搜索引擎脚本的一部分，如您所见，最后一列 g 包含一个链接，单击该链接时会将用户带到第二个 php 脚本，该脚本检索该条目的附加信息，但这仅适用于单个条目，因此您可以看到我引入了复选框，以便用户可以检查任意数量的复选框并根据自己的意愿检索信息

现在要做到这一点，我创建了一个

```
 <div id="floatMenu"> 
<ul class="menu1"> 
<center><li><form name="senddata" method="POST" action="http://localhost/retrieve.php" style="display:inline;"><input id="fasta" type="text" class="multitext"><input name="Fasta" type="Submit" value="Retrieve Fasta"></form> 
```

这是一个 CSS 浮动菜单....到目前为止一切都很好....一切都很好....之后我不得不编写一个 javascript 来执行此操作，并且过去 4 天我一直被困在那里搜索论坛！

这是我从某个地方找到的 javascript，它接近于我想要它做的事情

```
 window.onload = function () { 
var cb = document.getElementById('check');
var fasta = document.getElementById('fasta');
cb.onclick = function () {fasta.value = cb.value + ","; 
};}; 
```

此脚本仅发送表中第一个复选框的值，其他未找到，请注意，它不是第一个选中的复选框，它是表中存在的第一个复选框

我该如何解决这个问题，即使我的表中有 n 个复选框，如果用户选择这样做，他们也可以检索 n 个信息....请帮助我几乎失去了希望！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T08:28:36.960

ID 在一个 HTML 文档中是唯一的。因此，您不能使用它们来检索其中许多具有相同 ID 的信息。您可能必须像这样修改您的 PHP 和 JS：

```
$i=0;
while($array = mysql_fetch_array($sql_query))

{
$id=$array['a'];
print "<tr id=\"newtr\">";
print "<td><input id=\"check_$i\" type=\"checkbox\" name=\"keyword[]\" value=\"$id\" ></td>";
print "<td>".$array['a']."</td>";
print "<td>".$array['b']."</td>";
print "<td>".$array['c']."</td>";
print "<td>".$array['d']."</td>";
print "<td>".$array['e']."</td>";
print "<td>".$array['f']."</td>";

print "<td>
<a href=\"http://localhost/rnasearch/retrieve.php?a=$id\">bla</a>
</td></tr>";
$i++;
}

print "</table>";
} 
```

和

```
 window.onload = function () { 
    var cb = document.getElementsByTagName('input');
    var fasta = document.getElementById('fasta');
    for (i=0;i<cb.length;++i)
    {
      if ( cb[i].type === 'checkbox' && cb[i].name === 'keyword[]')
          cb[i].onclick = function (e) {
            var str = e.target.value + ","
            if(e.target.checked)
                fasta.value += str;
            else
            {
                var ind = fasta.value.indexOf(str);
                fasta.value = fasta.value.substr(0, ind) + fasta.value.substr(ind+str.length,fasta.value.length);
            }
    }
};}; 
```

你可以在这里找到一个 jsFiddle：http: [//jsfiddle.net/ZfmNw/1/](http://jsfiddle.net/ZfmNw/1/)

# wpf - 当自定义扩展在 Dev Studio 2010 中无法访问时，如何内置 xaml 扩展访问 IXamlTypeResolver？

> ID：10561955
> 
> 赞同：3
> 
> 时间：2012-05-12T07:48:18.557
> 
> 标签：wpf, xaml

我编写了一个自定义 xaml 扩展，但在设计时无法获得 IXamlTypeResolver。我做了一些观察，这似乎是由于 dev studio 2010 中引入的一个错误。作为实验，我反编译了 x:Static 并重建为外部扩展，但它也无法获得 IXamlTypeResolver。然而，构建一个在设计时工作。我想一定有一些内在的魔力在发生。我想知道是否有任何解决方法。我不介意做一些额外的工作来获取我需要的信息，比如解析命名空间 xaml 声明，但似乎我需要这样做的服务在设计时也不可用。Microsoft 是否有解决此问题的计划？它严重限制了自定义 xaml 扩展的实用性。这一定会影响到第 3 方库提供者——我想知道他们是如何解决这个问题的。

```
[MarkupExtensionReturnType(typeof(object))]
[TypeConverter(typeof(MyStaticExtensionConverter))]
public class MyStaticExtension : MarkupExtension
{
    private string _member;
    private Type _memberType;

    [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")]
    [EditorBrowsable(EditorBrowsableState.Advanced)]
    public MyStaticExtension()
    {
    }

    public MyStaticExtension(string member)
    {
        if (member == null) {
            throw new ArgumentNullException("member");
        }
        this._member = member;
    }

    private bool GetFieldOrPropertyValue(Type type, string name, out object value)
    {
        FieldInfo field = null;
        Type baseType = type;
        do {
            field = baseType.GetField(name, BindingFlags.Public | BindingFlags.Static);
            if (field != null) {
                value = field.GetValue(null);
                return true;
            }
            baseType = baseType.BaseType;
        }
        while (baseType != null);
        PropertyInfo property = null;
        baseType = type;
        do {
            property = baseType.GetProperty(name, BindingFlags.Public | BindingFlags.Static);
            if (property != null) {
                value = property.GetValue(null, null);
                return true;
            }
            baseType = baseType.BaseType;
        }
        while (baseType != null);
        value = null;
        return false;
    }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        if (this._member == null) {
            throw new InvalidOperationException("MarkupExtensionStaticMember");
        }

        Type memberType = this.MemberType;
        string str = null;
        string str2 = null;
        object obj2;
        if (memberType != null) {
            str = this._member;
            str2 = memberType.FullName + "." + this._member;
        }
        else {
            str2 = this._member;
            int index = this._member.IndexOf('.');
            if (index < 0) {
                throw new ArgumentException("MarkupExtensionBadStatic", this._member);
            }

            string qualifiedTypeName = this._member.Substring(0, index);
            if (qualifiedTypeName == string.Empty) {
                throw new ArgumentException("MarkupExtensionBadStatic", this._member);
            }

            if (serviceProvider == null) {
                throw new ArgumentNullException("serviceProvider");
            }

            IXamlTypeResolver service = serviceProvider.GetService(typeof(IXamlTypeResolver)) as IXamlTypeResolver;

            // Exception will thrown here as at design time
            if (service == null) {

                throw new ArgumentException("MarkupExtensionNoContext", base.GetType().Name);
            }

            memberType = service.Resolve(qualifiedTypeName);
            str = this._member.Substring(index + 1, (this._member.Length - index) - 1);
            if (str == string.Empty) {
                throw new ArgumentException("MarkupExtensionBadStatic", this._member);
            }
        }

        if (memberType.IsEnum) {
            return Enum.Parse(memberType, str);
        }

        if (!this.GetFieldOrPropertyValue(memberType, str, out obj2)) {
            throw new ArgumentException("MarkupExtensionBadStatic", str2);
        }

        return obj2;
    }

    [ConstructorArgument("member")]
    public string Member
    {
        [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")]
        get
        {
            return this._member;
        }
        set
        {
            if (value == null) {
                throw new ArgumentNullException("value");
            }
            this._member = value;
        }
    }

    [DefaultValue((string)null)]
    public Type MemberType
    {
        [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")]
        get
        {
            return this._memberType;
        }
        set
        {
            if (value == null) {
                throw new ArgumentNullException("value");
            }
            this._memberType = value;
        }
    }
}

internal class MyStaticExtensionConverter : TypeConverter
{
    public override bool CanConvertTo(ITypeDescriptorContext context, Type destinationType)
    {
        return ((destinationType == typeof(InstanceDescriptor)) || base.CanConvertTo(context, destinationType));
    }

    [SecurityCritical, SecurityTreatAsSafe]
    public override object ConvertTo(ITypeDescriptorContext context, CultureInfo culture, object value, Type destinationType)
    {
        if (destinationType != typeof(InstanceDescriptor)) {
            return base.ConvertTo(context, culture, value, destinationType);
        }

        MyStaticExtension extension = value as MyStaticExtension;
        if (extension == null) {
            throw new ArgumentException("MustBeOfType", "value");
        }

        return new InstanceDescriptor(typeof(MyStaticExtension).GetConstructor(new Type[] { typeof(string) }), new object[] { extension.Member });
    }
} 
```

# eclipse-rcp - 如何为 eclispse rcp 产品构建和创建 exe 安装程序

> ID：10561956
> 
> 赞同：3
> 
> 时间：2012-05-12T07:48:28.253
> 
> 标签：eclipse-rcp, rcp

谁能告诉我如何为 eclipse rcp 产品创建 exe 安装程序文件

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T10:17:13.523

使用[产品导出向导](http://wiki.eclipse.org/FAQ_How_do_I_create_an_Eclipse_product%3F)导出产品后，您将拥有一个文件夹，其中包含用于启动 RCP 应用程序的 exe。

如果您想创建一个用于从单个 exe 安装的打包版本，我过去使用过[Nullsoft Scriptable Install System](http://nsis.sourceforge.net/Main_Page)。附带一些很好的示例，让您轻松创建开始菜单条目和卸载程序。

如果您安装[EclipseNSIS](http://eclipsensis.sourceforge.net/index.shtml)，您可以使用它的向导来创建安装程序。新建->其他->EclipseNSIS->NSIS 脚本。带您逐步完成并为您创建脚本。然后，您还可以直接从 Eclipse 运行安装程序构建脚本。

# xcode - 在 actionSheet 显示上循环 touchCancelled

> ID：10561957
> 
> 赞同：0
> 
> 时间：2012-05-12T07:48:46.730
> 
> 标签：xcode, uiactionsheet, touchescancelled

我有这个非常简单的 Xcode 处理程序：

```
-(void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {

[super touchesCancelled:touches withEvent:event];

NSLog(@"taxi touchcancelled");

NSString *postOption=NSLocalizedString(@"SELECTEDTAXI", @"");

NSString *info=NSLocalizedString(@"INFORMATION", @"");

NSString *call=NSLocalizedString(@"CALL", @"");

NSString *cancel=NSLocalizedString(@"CANCEL", @"");

NSLog(@"delegate=%@",myTA.delegate);

UIActionSheet *myActionSheet= [[UIActionSheet alloc] initWithTitle:postOption delegate:self cancelButtonTitle:cancel destructiveButtonTitle:call otherButtonTitles:info, nil];

//[myActionSheet showFromToolbar:myTA.delegate.myToolBar];

[myActionSheet showInView:myTA.delegate.view];

NSLog(@"after the show");

} 
```

在单击注释时应该可视化一个动作表。然而，在随机运行而不是显示工作表时，它会到达 showInView 命令并永远循环回到函数的开头。在其他时候，它可以无缝运行。ActionSheet 有问题还是我做了一些很奇怪的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T10:17:37.133

我收到了有关链接组的建议，该组似乎通过延迟调用 showInview 来完成这项工作。

# html - 缩小时布局混乱

> ID：10561958
> 
> 赞同：3
> 
> 时间：2012-05-12T07:48:57.393
> 
> 标签：html, css, fixed-width

我做了一个固定的布局，它适用于所有浏览器。但是当缩小至少一个滚轮滚动 (90%) 时，第二个导航 (#header-navigation) 项目会分成更多行，并将下面的元素推到他们的位置之外。我尝试使用 em 和 % 设置字体大小、填充和边距，但效果不佳。如果我为 #header-navigation 设置了溢出：隐藏，我可以毫无问题地缩小 50%。这对我来说完全足够了，但是隐藏不是一种选择。

你可以在这里看到它：http: [//palivonas.lt/test/stackoverflow/](http://palivonas.lt/test/stackoverflow/)

编辑：让它在 Chrome 和 IE9 上运行（感谢@GGG），但 Firefox 仍然将 #social 框向下推，即使线路不再中断导航。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T08:24:47.050

这是一个修复。

将列表项的`display`属性更改为`inline-block`，然后删除`float`。

```
#header-navigation li {

    background: url(images/slash_header.png) right no-repeat;
    padding-right: 26px;
    margin-right: 19px;
    display: inline-block;

} 
```

添加`white-space: nowrap`到包含导航的有序列表。

```
ol, ul {

    list-style: none;
    white-space: nowrap;

} 
```

# forms - 在 Oracle Forms 6i 中显示存储在本地磁盘上的 pdf 文件

> ID：10561960
> 
> 赞同：1
> 
> 时间：2012-05-12T07:49:16.680
> 
> 标签：forms, oracle

我切换到其他架构。现在我将所有 pdf 文件保存在我运行表单的本地磁盘上。（即客户端）数据库存储在服务器上。我的要求是当用户单击某个特定员工的表单时，应该打开本地磁盘中的相应 pdf。希望这很容易回答。我没有在 Oracle 表单中工作过，但必须解决这个要求，所以对一个原始问题表示歉意。我使用了 host 和 client_host 命令，但得到了未定义的“host/client_host”之类的错误。并且 web.show_document 不能使用，因为我不是通过浏览器引用表单，并且表单不在服务器上，而是在客户端（放置 pdf 文档文件夹的位置）。

```
Last but not least. I am using Oracle Forms 6i 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T04:12:01.880

我终于设法在启动命令的帮助下从本地磁盘打开文件，如下所示： -

```
Begin
   host("start 'c:\test.pdf'");
End; 
```

谢谢。

# sql - 在 SQLCMD 模式下格式化输出？

> ID：10561961
> 
> 赞同：3
> 
> 时间：2012-05-12T07:49:21.793
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sqlcmd

有没有办法可以在**SQLCMD 模式下**指定输出文件格式，以便我可以使用它来读取它`BULK INSERT`？我想做这样的事情：

```
:CONNECT SERVER1
:OUT 'E:\test'

SELECT TOP 100 ID, NAME
FROM DB1.dbo.TABLE1

GO

:CONNECT SERVER2
:OUT 'E:\test2'

CREATE TABLE #TEMP(ID INT, NAME VARCHAR(100))

BULK
INSERT #TEMP
FROM 'E:\test'
WITH
(
  FIELDTERMINATOR = ',',
  ROWTERMINATOR = '\n'
)
GO

SELECT *
FROM DB2.dbo.TABLE2
WHERE ID IN (SELECT ID FROM #TEMP)

-- Other queries for #TEMP

GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T08:00:53.803

Here's a good example for using sqlcmd to generate a CSV file:

[http://www.siusic.com/wphchen/sqlcmd-example-to-output-in-csv-format-350.html](http://www.siusic.com/wphchen/sqlcmd-example-to-output-in-csv-format-350.html)

```
sqlcmd 
  -S “ServerName” -U “UID” -P “PWD” -d “DBName” 
  -i “c:\input.txt” 
  -o “c:\output.txt” 
  -s “,” 
  -h -1 
```

> You can use SQLCmd /? to display all applicable parameters. ... Parameter -h -1 instructs the utility not to output result set header. Parameter -s “,” instructs the utility to use comma as column separator.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-12T22:16:58.257

以某种自动化方式插入大量数据的一种方法是使用中间表。

（使用您的原始场景）

```
 :CONNECT SERVER1
  :OUT 'E:\test'

  SELECT TOP 100 '^'+cast(ID as varchar(16))+'^^'+NAME
  FROM DB1.dbo.TABLE1

  GO

  :CONNECT SERVER2
  :OUT 'E:\test2'

  CREATE TABLE #TEMP1(BOTHCOLUMNS VARCHAR(116))

  BULK
  INSERT #TEMP1
  FROM 'E:\test'
  GO

  CREATE TABLE #TEMP2(ID INT, NAME VARCHAR(100))

  INSERT #TEMP2
  SELECT 
       Substring(BOTHCOLUMNS, 2, Patindex('%^^%', BOTHCOLUMNS) - 2), 
       Substring(BOTHCOLUMNS, Patindex('%^^%', BOTHCOLUMNS) + 2, 
                 Len(BOTHCOLUMNS) - Patindex('%^^%', BOTHCOLUMNS) - 1) 
  FROM   #TEMP1
  WHERE  Patindex('%^^%', BOTHCOLUMNS) > 1 

  SELECT t2.*
  FROM DB2.dbo.TABLE2 t2
  JOIN #TEMP2 tmp2 on tmp2.ID=t2.ID

-- Other queries for #TEMP

GO 
```

# python - 如何在 Tkinter 中获得这种布局？

> ID：10561967
> 
> 赞同：2
> 
> 时间：2012-05-12T07:50:20.427
> 
> 标签：python, tkinter

我是 Tkinter 的新手，在获得所需的布局时遇到了一些问题。这是代码：

```
import tkinter as tk

class MainFrame(tk.Frame):
    def __init__(self, master, w, h):
        tk.Frame.__init__(self, master, width=w, height=h)
        self.toolpanel = ToolPanel(self, 200, h)
        self.toolpanel.pack(side=tk.LEFT, fill=tk.Y)

class ToolPanel(tk.Frame):
    def __init__(self, master, w, h):
        tk.Frame.__init__(self, master, width=w, height=h, background='#000')

def main():
    root = tk.Tk()
    root.geometry('640x480')

    mainframe = MainFrame(root, 640, 480)
    mainframe.pack()

    root.mainloop() 
```

下面是预期布局（右）和实际布局（左）。如果我让`root`工具面板的主人而不是主框架，那么我将得到预期的输出。但这不是我想要的，我认为让主机成为工具面板的主人更有意义。

```
self.toolpanel = ToolPanel(self, 200, h)   # Actual result
self.toolpanel = ToolPanel(master, 200, h) # Expected (desired) result 
```

![实际与预期结果](../Images/5bc324f0ff35eca32b39e330bbedce2c.png)

我注意到，当我构造主框架时，即使我将宽度和高度传递给它，它的大小仍然是`1x1`直到我调用`pack()`. 我应该如何更好地组织我的 Tkinter 应用程序以及如何获得所需的结果？

```
class MainFrame(tk.Frame):
    def __init__(self, master, w, h):
        tk.Frame.__init__(self, master, width=w, height=h)

        # At this point, the size is still 1x1
        # ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:01:04.807

问题不在于工具面板在错误的位置，而在于它在主机内部，而主机在错误的位置。

当你这样做时：

```
mainframe.pack() 
```

... Tkinter 默认为`side=TOP, fill=NONE`，大致意味着它将在其容器中居中并粘在顶部。相反，您希望大型机位于左边缘或填满整个容器。

尝试将该语句更改为以下两个之一，并观察 GUI 启动和调整大小时的行为：

```
mainframe.pack(fill="both", expand=True)
-or-
mainframe.pack(side="left", fill="y") 
```

为了额外的启发，暂时改变主机的背景，然后尝试上面的两个例子，看看有什么变化。当遇到布局问题时，这是一种强大的技术，因为它可以帮助您可视化小部件是否正在填充您认为它们应该填充的区域

# c++ - 如何从 C++ 中的枚举中返回随机元素

> ID：10561968
> 
> 赞同：2
> 
> 时间：2012-05-12T07:50:21.887
> 
> 标签：c++, enums, random-sample

> **可能重复：**
> [生成随机枚举](https://stackoverflow.com/questions/2999012/generating-random-enums)

我正在寻找从 C++ 中的枚举中选择元素的最佳方法。一开始，我感谢使用一个开关，但是，我有一些大的枚举并且效率不高，所以，我尝试使用一个 for each 来做到这一点。

在枚举中选择一个水果元素：

```
枚举 FruitType
{
    k苹果，
    橘子，
    瓜
};

```

并尝试这个功能：

```
/**
 * R3turn 一个随机水果
 */
FruitType giveMekRandomFruit()
{
    randNumber = rand % __TOTALFRUITS // 枚举总数 = 3 个元素

    for (int& i: FruitType)
    {
           如果 (randNumber = i)
           {
           CCLog("随机选择的水果：" + i);
           返回我；// 返回选中的数字

            }
    }
}

```

显然不起作用，我对语法或概念有疑问，有什么想法吗？？？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T07:55:46.307

如果枚举值是连续的，只需在适当范围内取一个随机整数并强制转换为枚举。否则，使用随机整数创建一个枚举值数组和索引。

# objective-c - 如果我在 viewDidLoad 中以编程方式添加控件，如何从其他方法访问它？

> ID：10561973
> 
> 赞同：1
> 
> 时间：2012-05-12T07:51:13.543
> 
> 标签：objective-c, ios, cocoa-touch

在我的主视图控制器的 viewDidLoad 方法中，我以编程方式创建了一个分段控件，然后将其添加到我的导航控件的 titleView 中。

```
NSArray *seggieItems = [[NSArray alloc] initWithObjects:@"See Entire List",@"See Near Me", nil];
UISegmentedControl *seggie = [[UISegmentedControl alloc]initWithItems:seggieItems];
[seggie setSegmentedControlStyle:UISegmentedControlStyleBar];
[seggie setTintColor:[UIColor redColor]];
[seggie addTarget:self
           action:@selector(seggieChanged:)
 forControlEvents:UIControlEventValueChanged];

self.navigationItem.titleView = seggie; 
```

但是，当我想从其他方法（例如 viewWillAppear）访问此分段控件时，我不能——它是一个未声明的标识符。

```
 - (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [seggie setSelectedSegmentIndex:0]; //this should always be 0 for this view controller viewDidLoad method

} 
```

如果我使用的是 XIB，这将没有问题，因为我有一个可以在任何地方使用的 IBOutlet。我尝试为我的分段控件创建一个属性，但是实例变量隐藏了局部变量，所以这一定是错误的方法。

解决这个问题的最佳方法是什么？如果这是一个愚蠢的问题，我深表歉意——我对 iOS 还很陌生，目前大约读了几本书。我在 Google 或搜索 StackOverflow 上找不到答案。我会很感激任何帮助，如果这是我错过的非常简单的事情，我很抱歉。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T08:03:17.630

将其作为属性是正确的方法。如果你这样做，并得到你描述的掩码警告，你可能仍在你的 viewDidLoad 方法中声明 seggie 变量。删除该声明并始终引用`self.seggie`而不是，`seggie`你会没事的。

通过声明，我的意思是这一行：

```
UISegmentedControl *seggie = [[UISegmentedControl alloc]initWithItems:seggieItems]; 
```

它应该是

```
self.seggie = [[UISegmentedControl alloc]initWithItems:seggieItems]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T11:14:47.040

有两种方法可以做到这一点：-

1>要么在 .h 文件（全局）中声明 UISegmentedControl 的对象，除非您想从其他类访问，否则同一类不需要属性。

2>您可以遍历父视图的子视图并获取 UISegmentedControl 并将其类型转换为执行 OPerations ，例如：-

```
NSArray *subviewss=[self.view subviews];
for(int i=0;i<[subviewss ;i++])
{
if([[subviews objectAtIndex:i] isKindOfClass:[UISegmentedControl class]])
{
UISegmentedControl *segmentControl= (UISegmentedControl *) [subviewss objectAtIndex:i];
[segmentControl setSelectedSegmentIndex:0];

}
} 
```

但是只有当您的视图控制器中只有一个分段控件作为子视图时，上面的循环代码才会起作用，否则它会碰到任何类类型为 UISegmentedControl 的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T07:59:08.523

将这`UISegmentedControl *seggie;`行代码放在您的 .h(header) 文件中，或者将其设为 Global ！

您不能在其他方法中使用本地创建的对象。[本地和即时变量](http://www.roseindia.net/answers/viewqa/Java-Beginners/16483-Local-Variable-and-Instant-Variable.html)。它适用于 java，但我希望你能理解主要思想。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-12T08:16:42.080

上面的建议选项很好，创建一个属性或类范围/全局变量。另一种方法，如果您不想定义属性或类范围/全局变量 -

访问控制，如 -

```
for (int index = 0; index < [self.view.subviews count]; index++) {
    if([[self.view.subviews objectAtIndex:index] isKindOfClass:[UISegmentedControl class]]) {
        UISegmentedControl *seggie = (UISegmentedControl *) [self.view.subviews objectAtIndex:index];
        [seggie setSelectedSegmentIndex:0];
    }
} 
```

* * *

不是真正的评论，而是一些一般性的建议

是的，这确实是获取视图的最低效的方式。

首先，如果您使用快速枚举，您至少可以摆脱重复使用

```
[self.view.subviews objectAtIndex:index] 
```

打电话，真的

```
[[[self view] subviews] objectAtIndex:index] 
```

方法调度很快，但这并不意味着你不应该考虑你的代码实际上在做什么。

您的代码不考虑多个控件，因为它们都被视为相同（例如设置为 0）。

一旦你找到了你想要的对象，也不会提前退出这个循环。如果您坚持骑自行车穿越风景，至少要做得很好-

```
for (UISegmentedControl *seggie in [self.views.subviews]) { 
    if ([seggie isKindOfClass:[UISegmentedControl class]]) { 
        seggie.selectedSegmentIndex = 0; 
        break; 
    } 
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-12T08:06:15.507

你要么做一个财产

```
UISegmentedControll *seggie 
```

在你的头文件中，或使数组全局。

如果这不是你的选择，我会尝试使用

```
UISegmentedControl * temp = self.navigationController.titleView;
[temp setSelectedSegmentIndex:0]; 
```

# java - 安卓服务不工作

> ID：10561974
> 
> 赞同：0
> 
> 时间：2012-05-12T07:51:55.557
> 
> 标签：java, android

我正在尝试做一个简单的服务。这是为了学习如何创建服务。在我的代码中，当我单击开始按钮时，它确实显示了表示服务已启动的 toast，但是当我单击停止按钮时，它不会显示表示服务已停止的 toast。我的 logcat 中也没有任何错误。这是我的代码

```
package com.zafar.batterynotify;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class BatteryNotify extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button startButton = (Button) findViewById(R.id.start);
    Button stopButton = (Button) findViewById(R.id.stop);

    startButton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            startService(new Intent(getBaseContext(), BatteryService.class));
        }
    });

    stopButton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            stopService(new Intent(getBaseContext(), BatteryService.class));
        }
    });
}
} 
```

服务等级

```
package com.zafar.batterynotify;

import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.widget.Toast;

public class BatteryService extends Service {

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();
    return START_STICKY;
}

public void onDestory() {
    super.onDestroy();
    Toast.makeText(this, "Service Stopped", Toast.LENGTH_LONG).show();
}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T07:54:34.137

```
public void onDestory() { ...
                  ^^ 
```

你有一个错字。请看：[你什么时候使用Java的@Override注解，为什么？](https://stackoverflow.com/questions/94361/when-do-you-use-javas-override-annotation-and-why)`@Override`，这是您应该使用注释的原因之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T08:16:02.647

尝试这个：

1）在清单文件中添加以下行：

```
<service  android:enabled="true"  android:name=".BatteryService " /> 
```

2）清理你的项目

# c# - 具有泛型返回的泛型方法的格式

> ID：10561982
> 
> 赞同：0
> 
> 时间：2012-05-12T07:54:06.833
> 
> 标签：c#, .net, generics

我想实现一个函数，它返回它正在操作的类型的值。请问我该怎么做？

示例 1：

```
static T Swap<T>(ref T lhs, ref T rhs)
{
    T temp;
    temp = lhs;
    lhs = rhs;
    rhs = temp;

    return <T> temp;
} 
```

示例 2：

```
public override T GetRandom()
{
    return  (T)_random.Next(_min, _max);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T07:56:47.777

Since both the return-type and the variable-type are already `T`, this is just:

```
return temp; 
```

Alternatively, to cast (but this is not needed here):

```
return (T) temp; 
```

Actually, though, IMO a "swap" should have `void` return!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T08:50:05.970

把这个通用化是没有意义的：

```
public override T GetRandom()
{
     return  (T)_random.Next(_min, _max);
} 
```

随机“T”是什么意思？假设 T 是“Person”类型，返回随机 Person 是什么意思？拥有一个通用的 GetRandom 方法似乎没有任何逻辑。

如果你想要一个整数，只需指定 int 作为返回类型。

```
public override int GetRandom()
{
    return  _random.Next(_min, _max); 
} 
```

# flash - SWC 调试或发布版本

> ID：10561996
> 
> 赞同：0
> 
> 时间：2012-05-12T07:56:15.757
> 
> 标签：flash, swc

是否有 swc 的 debug 和 release 版本，我只注意到创建 swc 的选项，如果有 debug 或 release 版本，我们如何在 flash 专业版中创建 debug 版本。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:24:30.687

当然有，但我不确定您在 Flash CS 中的选择是什么。我想默认是调试版本 - 因为如果您正在制作发布版本，最终编译将从 SWC 中删除调试信息。