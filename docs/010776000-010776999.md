# StackOverflow 问答 10776000-10776999

# php - 无法访问 localhost - 403 被禁止

> ID：10776003
> 
> 赞同：0
> 
> 时间：2012-05-27T17:45:17.050
> 
> 标签：php, apache, localhost, lamp, http-status-code-403

我可以访问本地主机的某些区域，但无法访问其他区域，例如，

*   我可以访问 `localhost/index.php`，`localhost/somefolder/`

*   但不是`localhost/somefolder/anotherfolder`

我也无法`include`从 php 内部获取任何文件，`anotherfolder`因为它说`failed to open stream: No such file or directory`

我有`chmod -R 755 www`但仍然无法访问子目录

可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T18:05:49.083

检查您是否在该机器上运行 SELinux。然后在您可以查看的目录和您不能查看的目录上执行 ls -alZ 。如果您启用了 SELinux，则您无法查看的目录的安全组可能未设置为 http 安全组。我相信它应该是大意的东西`system_u:object_r:httpd_sys_content_t`。

检查您的系统是否在`/etc/selinux/config`. 如果是，请转到您遇到问题的目录并键入：`chcon -Rv --type=httpd_sys_content_t <directory name>`。这会将 httpd 内容安全标志添加到该目录及其下的所有内容，从而允许 apache 访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T18:37:41.780

如果您的文件夹中没有“index.html”（或 index.php），则您无法在不将您的目录公开的情况下访问它们。默认情况下应该禁用它，但是对于您的包含问题，我需要一些代码和目录树。

# sql-server-2008 - 带有计数、分组依据、位置和连接的 SQL Server SELECT

> ID：10776005
> 
> 赞同：0
> 
> 时间：2012-05-27T17:45:51.030
> 
> 标签：sql-server-2008, null, count, group-by, where

我之前在 SQL Server 中创建了这个 SELECT 命令，它需要计算每个部门包含多少员工。这是我使用的：

```
SELECT Departments.Description AS [Department], COUNT(Employees.ID) AS [Employees]
FROM Employees 
RIGHT JOIN Departments ON
Employees.DepartmentID = Departments.ID 
GROUP BY Departments.Description 
```

它工作正常（即使没有员工，也显示部门）。

现在，我只想通过以下过滤器计算*当前工作*的员工：

```
WHERE Employees.JobEndDate = null 
```

我试着这样做：

```
SELECT   Departments.Description AS [Department], COUNT(Employees.ID) AS [Employees] 
FROM Employees 
RIGHT JOIN Departments ON
Employees.DepartmentID = Departments.ID 
WHERE Employees.JobEndDate = NULL 
GROUP BY Departments.Description 
```

但现在我没有得到任何结果。知道我做错了什么吗？

谢谢 :) 米西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T17:48:45.593

测试字段返回值是否`NULL`不是通过`=`等号而是通过`IS`运算符执行的

```
= null 
```

不起作用，而是写：

```
Employees.JobEndDate IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T17:52:19.313

```
SELECT Departments.Description AS [Department], COUNT(Employees.ID) AS [Employees] FROM Employees RIGHT JOIN Departments ON Employees.DepartmentID = Departments.ID WHERE Employees.JobEndDate = IS NULL GROUP BY Departments.Description 
```

# google-chrome - 确定哪个资源导致 chrome 中的 SSL 警告

> ID：10776006
> 
> 赞同：0
> 
> 时间：2012-05-27T17:45:53.907
> 
> 标签：google-chrome, ssl

我有一个带有 SSL 证书的网站，但谷歌浏览器没有显示绿色锁，而是显示一个带有红十字的锁，并显示该页面包含不安全内容的警告。

我知道这是因为您使用的资源（图像、js、css）不是通过 HTTPS 提供的。

我检查了 firebug 中的“net”选项卡，每个资源都通过 HTTPS。因此，我无法弄清楚是什么导致了 google chrome 中的警告。

有没有办法找出导致这种情况发生的特定资源？

可能是数据库连接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T17:51:30.020

我之前遇到过 Chrome 缓存问题。如果您确定您已经抓住了所有的罪魁祸首，请尝试清除您的缓存和历史记录。

# php - Google Checkout PHP 响应处理程序序列号未发送

> ID：10776009
> 
> 赞同：0
> 
> 时间：2012-05-27T17:46:27.753
> 
> 标签：php, xml, google-checkout

这可能是一个非常容易回答的问题，但无论如何我都会问：3

我已经使用 Google Checkout PHP 示例代码设置了我的网站（我目前正在使用沙盒）。我有它，以便我可以将商品添加到我网站上的购物车（定制），然后它们将使用 PHP 库发送给 Google。这一切都很好，我可以使用沙盒帐户付款。但是，当我使用通知 API 收到回复时，我遇到了问题。

我可以收到新的订单通知，它们工作正常。但是，当我发送对通知的确认（我假设通过 发生`$Gresponse->SendAck();`）时，我的集成控制台中出现错误，提示我没有在请求中发送序列号。

我的问题是：以前有没有人遇到过这个问题，我该如何解决？

我正在使用`responsehandlerdemo.php`示例代码中的文件（我通过添加 PHP`mail()`函数来调试订单通知对其进行了一些调整），并且我已经使用 XML API 设置了 Google Checkout - 以 XML 形式发送通知（是的，我使用的是 HTTPS 链接）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:05:45.720

我有多愚蠢？：P *（不要回答那个^.^）*

对于遇到同样问题的其他人来说，解决起来很简单 -`$data[$root]['serial-number']`将您的`$Gresponse->SendAck()`函数作为参数推入，它会整理发送序列号，一切都会好起来的。

希望我有所帮助！

# java - 打印 2 个字符串

> ID：10776019
> 
> 赞同：-6
> 
> 时间：2012-05-27T17:47:36.863
> 
> 标签：java, arrays, string, printing

我有 2 个数组：

```
String [] head = {"Name", "Date of birth", "PPS number"};
String [] personal= {value1, value2, value3}; 
```

我希望这两个数组以下列方式打印出来：

```
head[0] tab personal[0]
head[1] tab personal[1]
head[2] tab personal [2] 
```

我尝试了不同的选项，但无法正常工作。有什么建议么？提前谢谢了！

拉法尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T17:50:52.060

由于您没有提供任何尝试的证据，我假设您没有尝试过：

```
for(int i = 0; i < head.length; i++)
  System.out.println(head[i]+"\t"+personal[i]); 
```

至少我认为这是你正在寻找的。

# css - Firefox 调整窗口角的 CSS 选择器

> ID：10776020
> 
> 赞同：2
> 
> 时间：2012-05-27T17:47:56.103
> 
> 标签：css, firefox, css-selectors, xul

我想使用 CSS 制作时尚的用户样式，这会改变“调整窗口角”元素的外观。我不知道使用哪个选择器。仅当同时存在垂直和水平滚动条时，滚动角才有效。一些示例截图：

![](../Images/200863e54916a2bef3346505f13a50e1.png)

只有水平滚动条 - 调整大小的角是白色的

![](../Images/83d840175aff0f05beff35e4e7c5f2c5.png)

只有垂直滚动条 - 调整大小的角落是白色的

![](../Images/d43e8dada4887f19e78d62b731442328.png)

两个滚动条都存在 - 使用 CSS 代码正确设置调整角的样式：

```
scrollcorner{-moz-appearance: none !important;  background: red !important;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:27:20.600

我们在这里讨论的是隐式创建的元素框架，这使调查变得复杂 - 它们不存在于 DOM 中，因此甚至 DOM Inspector 也不会显示它们。但是，您正在寻找的元素显然是一个[`xul:resizer`元素](https://developer.mozilla.org/en/XUL/resizer)。我似乎如果只存在一个滚动条（也是一个隐式创建的元素框架），那么这个元素将是这个滚动条的一个子元素。在两个滚动条的情况下，一个`scrollcorner`元素框架被创建为调整大小的父级。我猜正确的选择器是这样的：

```
browser resizer
{
  ...
} 
```

这个只会设置属于浏览器元素的调整器的样式，而不是像文本区域调整器这样的任何其他调整器。

警告：我猜您正在注册一个新的代理样式表，因为其他样式表（例如用户样式表）将不适用于隐式节点。您应该注意这一点，这显然[不安全](https://developer.mozilla.org/en/Using_the_Stylesheet_Service#Using_the_API)，并且此处的意外样式可能会导致浏览器崩溃（有关此类问题的示例，请参见[错误 541506 ）。](https://bugzilla.mozilla.org/show_bug.cgi?id=541506)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T22:05:06.623

使用 Dom 检查器。（我无法验证选择器，因为我没有 mac）。

[https://addons.mozilla.org/en-US/firefox/addon/dom-inspector-6622/?src=search](https://addons.mozilla.org/en-US/firefox/addon/dom-inspector-6622/?src=search)

您需要检查“铬”。

# sql-server - 如果不在日期范围内，则打印日期范围和最后一条记录之间的记录

> ID：10776024
> 
> 赞同：0
> 
> 时间：2012-05-27T17:48:38.600
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

我已经在我之前的问题帖子中问过这个问题 [打印日期范围之间的当前值和以前的值](https://stackoverflow.com/questions/10739147/printing-the-current-value-and-previous-value-between-the-date-range) 但是这次我想更具体地了解这里的日期范围。

如您所见，我有以下数据集：

```
 ID     DATE           TIME     STATUS 
    ---------------------------------------------
    A      01-01-2000     0900     ACTIVE 
    A      05-02-2000     1000     INACTIVE 
    A      01-07-2000     1300     ACTIVE 
    B      01-05-2005     1000     ACTIVE 
    B      01-08-2007     1050     ACTIVE
    C      01-01-2010     0900     ACTIVE
    C      01-05-2010     0800     INACTIVE
    C      01-07-2010     1900     ACTIVE 
```

我想要以下日期范围（01-04-2010 到 01-06-2010）之间的所有 ID。输出应该是：

```
ID     DATE           TIME     STATUS 
---------------------------------------------
A      01-07-2000     1300     ACTIVE 
B      01-08-2007     1050     ACTIVE
C      01-01-2010     0900     ACTIVE 
C      01-05-2010     0800     INACTIVE 
```

这个想法是，如果您看到每个 ID 的最后一条记录，无论它是否不属于该日期范围，因为我希望状态显示自该特定日期以来 ID=A 状态没有改变。此外，如果您看到 ID=C 两个日期都属于日期范围，则应打印两者。

PS: DATE 是 DATE 格式和 MS SQL

如果有人能对此发表意见，我将不胜感激。谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T18:01:09.910

尝试使用`SET DATEFORMAT ymd`下面的 and 查询：

```
DATEFORMAT ymd

SELECT customerName 
FROM dbo.customer 
WHERE insertedDate BETWEEN '2010-04-01 'AND '2010-06-01' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T18:22:32.727

如果我理解正确，你想要：

1.  状态在指定范围内的任何 ID，以及
2.  最近的活动状态不在

在这里，我正在调用您的源表`STATS`：

```
DECLARE @START DATE = '1/4/2010';
DECLARE @END DATE = '1/6/2010';

; WITH a AS (
    SELECT *,r=ROW_NUMBER()OVER(PARTITION BY [ID],[STATUS] ORDER BY [DATE] DESC, [TIME] DESC)
    FROM [STATS]
)
SELECT [ID], [DATE], [TIME], [STATUS] FROM a
WHERE [DATE] BETWEEN @START AND @END

UNION

SELECT [ID], [DATE], [TIME], [STATUS] FROM a
WHERE [STATUS]='ACTIVE'
AND r=1; 
```

结果：

```
ID   DATE       TIME STATUS
---- ---------- ---- ----------------
A    2000-01-07 1300 ACTIVE
B    2007-01-08 1050 ACTIVE
C    2010-01-05 0800 INACTIVE
C    2010-01-07 1900 ACTIVE 
```

# javascript - 没有同步ajax的弹出窗口

> ID：10776026
> 
> 赞同：0
> 
> 时间：2012-05-27T17:48:39.687
> 
> 标签：javascript, jquery

我有一个弹出窗口，它在胡佛请求来自服务器的数据以显示。然而，我可以防止多个弹出窗口的唯一方法是使用同步 ajax。我知道如果永远不会使用同步 ajax，那么应该很少使用。这可以异步完成吗？我只是在学习需要回调，并且感觉它们是相关的。谢谢

```
(function( $ ){
    $.fn.screenshotPreview = function() {
        xOffset = 20;
        yOffset = 10;

        this.hover(function(e) {
            $.ajax({
                url:    'getPopup.php',
                success: function(data)
                {
                    $("body").append('<div id="screenshot">dl><dt>Name:</dt><dd>'+data.name+'</dd><dt>User Name:</dt><dd>'+data.username+'</dd></dl></div>');
                    $("#screenshot")
                    .css("top",(e.pageY - yOffset) + "px")
                    .css("left",(e.pageX + xOffset) + "px")
                    .fadeIn("fast");                    
                },
                async:   false,
                dataType: 'json'
            });
        },
        function() {
            $("#screenshot").remove();
        });
        this.mousemove(function(e) {
            $("#screenshot").css("top",(e.pageY - yOffset) + "px").css("left",(e.pageX + xOffset) + "px");
        });
    };
})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:05:28.960

您想添加一个标志，说明您是否已开始显示弹出窗口：

```
(function( $ ){

    var showing = false;

    $.fn.screenshotPreview = function() {
        xOffset = 20;
        yOffset = 10;

        this.hover(function(e) {
          if(!showing){
            showing = true;
            $.ajax({
                url:    'getPopup.php',
                success: function(data)
                {
                  if(showing){
                    $("body").append('<div id="screenshot">dl><dt>Name:</dt><dd>'+data.name+'</dd><dt>User Name:</dt><dd>'+data.username+'</dd></dl></div>');
                    $("#screenshot")
                    .css("top",(e.pageY - yOffset) + "px")
                    .css("left",(e.pageX + xOffset) + "px")
                    .fadeIn("fast");
                  }                    
                },
                dataType: 'json'
            });
          }
        },
        function() {

            showing = false;

            $("#screenshot").remove();
        });
        this.mousemove(function(e) {
            $("#screenshot").css("top",(e.pageY - yOffset) + "px").css("left",(e.pageX + xOffset) + "px");
        });
    };
})( jQuery ); 
```

# c# - 检查用户是否处于非活动状态

> ID：10776027
> 
> 赞同：1
> 
> 时间：2012-05-27T17:48:41.923
> 
> 标签：c#, .net, windows, user-inactivity

如何检查用户是否处于非活动状态？我有这个：

```
class UserActivity : IMessageFilter
{
    private double afk_time = 0.1;//minutes
    private DateTime last_activity = DateTime.Now;
    public static bool inactive = false;

    private int WM_LBUTTONDOWN = 0x0201;
    private int WM_MBUTTONDOWN = 0x0207;
    private int WM_RBUTTONDOWN = 0x0204;
    private int WM_MOUSEWHEEL = 0x020A;
    private int WM_MOUSEMOVE = 0x0200;
    private int WM_KEYDOWN = 0x0100;

    public bool PreFilterMessage(ref Message m)
    {
        if (m.Msg == WM_LBUTTONDOWN || m.Msg == WM_MBUTTONDOWN || m.Msg == WM_RBUTTONDOWN || m.Msg == WM_MOUSEWHEEL || m.Msg == WM_MOUSEMOVE || m.Msg == WM_KEYDOWN)
        {
            this.last_activity = DateTime.Now;
            inactive = false;
        }

        if (DateTime.Now.AddMinutes(-afk_time) > last_activity)
            inactive = true;

        return false;
    }
} 
```

但我必须在 Program.cs 中运行它

```
Application.AddMessageFilter(new UserActivity()); 
```

我该怎么做才能自行检查用户的不活动状态。我会检查一些复选框，它会开始检查。

我想检查全球用户活动 - 在所有系统中，不仅在应用程序中。

我不想不必要地使用cpu。还是我应该使用其他解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T18:30:59.360

我发现了这个，而且效果很好！因此，如果另一个人有问题，这里是解决方案：

```
 [StructLayout(LayoutKind.Sequential)]
    public struct LASTINPUTINFO
    {
        public uint cbSize;
        public uint dwTime;
    }

    [DllImport("user32.dll")]
    static extern bool GetLastInputInfo(ref LASTINPUTINFO plii);

    public static TimeSpan? GetInactiveTime()
    {
        LASTINPUTINFO info = new LASTINPUTINFO();
        info.cbSize = (uint)Marshal.SizeOf(info);
        if (GetLastInputInfo(ref info))
            return TimeSpan.FromMilliseconds(Environment.TickCount - info.dwTime);
        else
            return null;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-12T11:39:42.663

我试图根据先前的答案建立一个类，我已经对其进行了测试并且它可以正常工作。它是异步的，但我没有使用异步密钥。如果有人发现一些问题或改进，那么欢迎。

```
public class User
{
    [StructLayout(LayoutKind.Sequential)]
    public struct LASTINPUTINFO
    {
        public uint cbSize;
        public uint dwTime;
    }

    [DllImport("user32.dll")]
    static extern bool GetLastInputInfo(ref LASTINPUTINFO plii);

    public static TimeSpan? GetInactiveTime()
    {
        LASTINPUTINFO info = new LASTINPUTINFO();
        info.cbSize = (uint)Marshal.SizeOf(info);
        if (GetLastInputInfo(ref info))
            return TimeSpan.FromMilliseconds(Environment.TickCount - info.dwTime);
        else
            return null;
    }

    private TimeSpan? LastTime;
    private DispatcherTimer timer = new DispatcherTimer();
    public void RequestUserActivity()
    {
        LastTime = GetInactiveTime();
        timer.Interval = TimeSpan.FromMilliseconds(500);
        timer.Tick += timer_Tick;
        timer.Start();
    }

    void timer_Tick(object sender, EventArgs e)
    {
        TimeSpan? tmpTime = GetInactiveTime();
        if (LastTime.HasValue && tmpTime.HasValue && tmpTime < LastTime)
        {
            timer.Stop();
            UserAtivited(this, new EventArgs());
        }
        else if (!LastTime.HasValue || !tmpTime.HasValue)
        {
            timer.Stop();
            throw new Exception();
        }
    }

    public event EventHandler UserAtivited;
} 
```

现在在您的窗口中创建一个新的用户实例，注册到 UserActivated 事件并笑 RequestUserActivity()。我专家这将是有帮助的。

* * *

请不要对我糟糕的英语感到担忧。我是讲法语的。

# java - 为什么两个具有相同名称的字符串具有相同的对象实例？

> ID：10776029
> 
> 赞同：2
> 
> 时间：2012-05-27T17:48:48.103
> 
> 标签：java, instance

> **可能重复：**
> [字符串相等与位置相等](https://stackoverflow.com/questions/594604/string-equality-vs-equality-of-location)

这是我的第一个问题，请耐心等待

我有以下代码：

```
String str1 = "hello";
String str2 = "hello";
System.out.println(str1 == str2); 
```

结果是**真的**

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T17:57:31.200

当 Java 在编译期间发现相同的文字时，它会创建它的单个实例并将其引用到所有引用。

str1 和 str2 都具有相同的文字“hello”，因此 jvm 创建它的单个实例并将其分配给 str1 和 str2。

因此，当您执行 str1==str2 时，您会得到真实的。（两者都引用同一个实例）

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-05-27T17:54:00.317

因为 == 意味着等于所以你说 str1 和 str2 彼此相等.. 这是真的是的

# xna - 从文件加载曲线，而不是使用内容管理器

> ID：10776033
> 
> 赞同：0
> 
> 时间：2012-05-27T17:49:40.923
> 
> 标签：xna, curve

我希望在 XNA 中加载曲线文件，但不是通过内容管理器进程，例如 Load("")。

有没有办法做到这一点？

例如：

曲线曲线 = 新曲线（“文件名”）；或曲线曲线 = Curve.FromFile("filename"); // 类似于加载 texture2d 和歌曲。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:44:05.353

以 xml 形式创建曲线数据并使用内容处理器构建/导入它将适用于 PC、win7phone 和 xb360（也是最简单的方法）。如果您计划的平台比这更多，那么是的，您必须自己编写。

# ios - 如何在uitextfield中设置有限的文本宽度

> ID：10776040
> 
> 赞同：1
> 
> 时间：2012-05-27T17:50:42.187
> 
> 标签：ios, xcode, uitextfield, width, limit

我需要在我的 中设置有限的文本宽度`UITextField`，因为我把按钮放在上面`UITextField`

看图片：

![在此处输入图像描述](../Images/8a4f4b64ebe7c8a06f4c0a2e6028c9bc.png)

那怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T17:58:00.353

您可能需要继承 UITextField 并覆盖 editingRectForBounds: 方法。尝试这样的事情..当然相应地调整值。

```
- (CGRect)editingRectForBounds:(CGRect)bounds {
      return CGRectInset( bounds , 10 , 10 );
} 
```

如果它是您问题的解决方案，请接受此答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T17:59:52.963

您可以将`editingChanged`UITextView 的事件链接到以下方法：

```
- (IBAction)textFieldChanged:(id)sender{
    if([sender.text length]>6){ 
        sender.text = [sender.text substringToIndex: 6];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-23T19:21:42.390

除此之外，您可能希望同时覆盖两者`editingRectForBounds`，`textRectForBounds`以便在编辑和不编辑时正确显示文本（参见[这篇文章](https://stackoverflow.com/questions/8535760/uitextfield-textrectforbounds-vs-editingrectforbounds)）。在 Swift 中，这可能是：

```
class MyUITextField: UITextField {

    override func editingRectForBounds(bounds: CGRect) -> CGRect {
        return CGRectInset(bounds, 18, 0)
    }

    override func textRectForBounds(bounds: CGRect) -> CGRect {
        return CGRectInset(bounds, 18, 0)
    }
} 
```

# android - Android TableLayout 重力和填充问题

> ID：10776042
> 
> 赞同：0
> 
> 时间：2012-05-27T17:50:56.930
> 
> 标签：android, xml, tablelayout, gravity

好的，所以我目前正在使用 TableLayout 为一个活动进行布局，并将该死的表放在我想要的地方并不能很好地工作。

这是它现在的截图： ![在此处输入图像描述](../Images/79fc8a9cb1230b6282b400493abd4e4e.png)

我现在有三个目标：

1.  让包含 EditText 和 ToggleButton 的 LinearLayout 在屏幕中水平居中（还不能这样做）

2.  让表格布局（上面有 6 个带有触发 ftns 的按钮）在 LL 下方水平居中，**而不会将其分成 3 个线性布局**

3.  除了边距和填充之外，在不使用绝对值的情况下使所有按钮都具有相同的大小。

任何了解我将如何实现上述任何或所有目标的任何见解都将不胜感激，因为我基本上已经用尽了自己的 xml 布局知识，并且宁愿避免以编程方式进行，我通常在这种情况下会这样做。

**作为参考，这是**上面看到的当前布局的 xml（xml 版本行在那里，但它只是不想在这篇文章中复制权利）：

```
<com.hinodesoftworks.lordkat.widgets.TitleBar
    android:id="@+id/calc_titlebar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

<TextView
    android:id="@+id/calc_input_label"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal" >

    <EditText
        android:id="@+id/calc_input"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:hint="@string/txt_trig_hint" />

    <ToggleButton
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:background="@drawable/button_selector"
        android:paddingBottom="5dp"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:paddingTop="5dp"
        android:textOff="@string/txt_trig_toggle_radians"
        android:textOn="@string/txt_trig_toggle_degrees" />
</LinearLayout>

<TableLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:weightSum="3" >

    <TableRow
        android:layout_gravity="center_horizontal"
        android:layout_weight="1" >

        <Button
            android:id="@+id/trig_sine_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginBottom="2dp"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="1dp"
            android:layout_marginTop="2dp"
            android:background="@drawable/button_selector"
            android:paddingBottom="10dp"
            android:paddingLeft="20dp"
            android:paddingRight="20dp"
            android:paddingTop="10dp"
            android:text="@string/txt_trig_sine_button" />

        <Button
            android:id="@+id/trig_secant_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginBottom="2dp"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="1dp"
            android:layout_marginTop="2dp"
            android:background="@drawable/button_selector"
            android:paddingBottom="10dp"
            android:paddingLeft="20dp"
            android:paddingRight="20dp"
            android:paddingTop="10dp"
            android:text="@string/txt_trig_secant_button" />
    </TableRow>

    <TableRow
        android:layout_gravity="center_horizontal"
        android:layout_weight="1" >

        <Button
            android:id="@+id/trig_cosine_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginBottom="2dp"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="1dp"
            android:layout_marginTop="2dp"
            android:background="@drawable/button_selector"
            android:paddingBottom="10dp"
            android:paddingLeft="20dp"
            android:paddingRight="20dp"
            android:paddingTop="10dp"
            android:text="@string/txt_trig_cosine_button" />

        <Button
            android:id="@+id/trig_cosecant_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginBottom="2dp"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="1dp"
            android:layout_marginTop="2dp"
            android:background="@drawable/button_selector"
            android:paddingBottom="10dp"
            android:paddingLeft="20dp"
            android:paddingRight="20dp"
            android:paddingTop="10dp"
            android:text="@string/txt_trig_cosecant_button" />
    </TableRow>

    <TableRow
        android:layout_gravity="center_horizontal"
        android:layout_weight="1" >

        <Button
            android:id="@+id/trig_tangent_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginBottom="2dp"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="1dp"
            android:layout_marginTop="2dp"
            android:background="@drawable/button_selector"
            android:paddingBottom="10dp"
            android:paddingLeft="20dp"
            android:paddingRight="20dp"
            android:paddingTop="10dp"
            android:text="@string/txt_trig_tangent_button" />

        <Button
            android:id="@+id/trig_cotangent_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginBottom="2dp"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="1dp"
            android:layout_marginTop="2dp"
            android:background="@drawable/button_selector"
            android:paddingBottom="10dp"
            android:paddingLeft="20dp"
            android:paddingRight="20dp"
            android:paddingTop="10dp"
            android:text="@string/txt_trig_cotangent_button" />
    </TableRow>
</TableLayout>

<TextView
    android:id="@+id/calc_results_label"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/txt_trig_results_label" />

<TextView
    android:id="@+id/calc_results"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="123.456" />

<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:47:11.463

1-) 要让 EditText 和 ToggleButton 在屏幕中水平居中，请使用 android:gravity="center_horizo​​ntal"
而不是 "android:layout_gravity="center_horizo​​ntal"

2-) 如答案(1)，为了使表格水平居中，使用“android:gravity="center_horizo​​ntal"

3-) 要使按钮大小相同而不使用除边距和填充之外的绝对值，请使用 "android:stretchColumns="0,1"" 拉伸列 0 和 1。使用此属性时，您可以不必使用绝对值。所以生成的代码如下：

```
<TableLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:stretchColumns="0,1"
   >

<TableRow>
    <Button
        android:id="@+id/trig_sine_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/ic_launcher"
        android:text="txt_trig_sine_button" />
    <Button
        android:id="@+id/trig_secant_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/ic_launcher"
        android:text="txt_trig_secant_button" />
</TableRow> 
```

……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T23:52:29.470

尝试使用 GridLayout，它的内存效率更高，没有嵌套容器，非常适合这种类似网格的设计。

# google-apps-script - 从电子表格调用时出错，从菜单中正常工作

> ID：10776047
> 
> 赞同：-1
> 
> 时间：2012-05-27T17:52:00.630
> 
> 标签：google-apps-script, google-sheets, custom-function

因此，当 Google Apps Scripts 首次发布时，我使用它们进行了一些工作，但最近我很少使用它们。今天早上，我决定开发一个新脚本。一切看起来都很棒，我喜欢新功能。但是，以前有效的一件非常简单的事情现在被打破了（或者我只是愚蠢）。

当我从菜单中调用特定功能时，它工作正常。但是当我直接从电子表格中调用它时，我得到：

您无权调用 inputBox（第 17 行）

奇怪的是我什至没有调用 inputBox。有一组事件可以调用输入框，但前提是未设置特定变量（全局），在这种情况下它已设置。

我想也许我只是有一个错误。因此，我查看了我的旧应用程序脚本（曾经肯定可以正常工作）。我现在遇到了同样的问题。因此，无论发生什么变化，它也破坏了旧脚本。为了完整起见，我现在包含我的脚本代码。我试图直接调用的函数是管道和活动：

```
var webhookurl = "";

var jsondata = [];

function __urlCheck_(str) {
    var v = new RegExp(); 
    v.compile("^[A-Za-z]+://[A-Za-z0-9-_]+\\.[A-Za-z0-9-_%&\?\/.=]+$");
    if (!v.test(str)) {
        return false;
    }
    return true;
}

function __getWebHook_(){
    var newwebhookurl = UserProperties.getProperty('webhookurl_HCR');
    if((newwebhookurl == null || newwebhookurl.length==0) && (webhookurl.length==0 || webhookurl==null)){
        var newwebhookurl = Browser.inputBox("Paste your web hook url here");
        var newwebhookurl = newwebhookurl.replace(/^\s*/, '').replace(/\s*$/, '');
        if('cancel' == newwebhookurl.toLowerCase()){
            Browser.msgBox('Before this connection will work, you will have to enter a webhook url.');
        }else if(newwebhookurl.length==0 || newwebhookurl == null || __urlCheck_(newwebhookurl) == false){
            Browser.msgBox('Sorry, you must specify a webhook url.');
            __getWebHook_();
        }else{
            UserProperties.setProperty('webhookurl_HCR',newwebhookurl);
            webhookurl = newwebhookurl;
        }
    }else if(webhookurl.length==0 || webhookurl==null){
        webhookurl = newwebhookurl;
    }
}

function __ClearWebHook_(){
    UserProperties.setProperty('webhookurl_HCR','');
    webhookurl = '';
    __getWebHook_();
}

function onOpen() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var menuEntries = [{name: "Pipeline", functionName: "__PipelineMenu__"}, 
                     {name: "Activity", functionName: "__ActivityMenu__"},
                     {name: "Reset WebHook", functionName: "__ClearWebHook_"}
                     ];
  ss.addMenu("Heap CRM Reports", menuEntries);

}

function onInstall(){
    onOpen();
}

function __PipelineMenu__(){
    var mydoc = SpreadsheetApp.getActiveSpreadsheet();
    var myapp = UiApp.createApplication().setTitle('Pipeline');
    var mygrid = myapp.createGrid(5, 2);
    mygrid.setWidget(0, 0, myapp.createLabel('Category:'));
    mygrid.setWidget(0, 1, myapp.createTextBox().setName('category'));
    mygrid.setWidget(1, 0, myapp.createLabel('Label:'));
    mygrid.setWidget(1, 1, myapp.createTextBox().setName('label'));
    mygrid.setWidget(2, 0, myapp.createLabel('User:'));
    mygrid.setWidget(2, 1, myapp.createTextBox().setName('user'));
    mygrid.setWidget(3, 0, myapp.createLabel('Type:'));
    var lbt = myapp.createListBox(false).setName('type');
    lbt.setVisibleItemCount(1);
    lbt.addItem('Lead');
    lbt.addItem('Opportunity');
    lbt.addItem('Customer');
    mygrid.setWidget(3, 1, lbt);
    mygrid.setWidget(4, 0, myapp.createLabel('Kind:'));
    var lbk = myapp.createListBox(false).setName('kind');
    lbk.setVisibleItemCount(1);
    lbk.addItem('Expected Value');
    lbk.addItem('Value');
    lbk.addItem('Count');
    mygrid.setWidget(4, 1, lbk);
    var panel = myapp.createVerticalPanel();
    panel.add(mygrid);
    var button = myapp.createButton('Submit');
    var handler = myapp.createServerClickHandler('__processPipeline');
    handler.addCallbackElement(mygrid);
    button.addClickHandler(handler);
    panel.add(button);
    myapp.add(panel);
    mydoc.show(myapp);
}

function __ActivityMenu__(){
    var mydoc = SpreadsheetApp.getActiveSpreadsheet();
    var myapp = UiApp.createApplication().setTitle('Activity');
    var mygrid = myapp.createGrid(7, 2);
    mygrid.setWidget(0, 0, myapp.createLabel('Category:'));
    mygrid.setWidget(0, 1, myapp.createTextBox().setName('category'));
    mygrid.setWidget(1, 0, myapp.createLabel('Label:'));
    mygrid.setWidget(1, 1, myapp.createTextBox().setName('label'));
    mygrid.setWidget(2, 0, myapp.createLabel('User:'));
    mygrid.setWidget(2, 1, myapp.createTextBox().setName('user'));
    mygrid.setWidget(3, 0, myapp.createLabel('Date:'));
    mygrid.setWidget(3, 1, myapp.createDateBox().setId('date'));
    mygrid.setWidget(4, 0, myapp.createLabel('Range:'));
    var lb = myapp.createListBox(false).setName('range');
    lb.setVisibleItemCount(1);
    lb.addItem('Week');
    lb.addItem('Month');
    lb.addItem('Year');
    mygrid.setWidget(4, 1, lb);
    mygrid.setWidget(5, 0, myapp.createLabel('Type:'));
    var lbt = myapp.createListBox(false).setName('type');
    lbt.setVisibleItemCount(1);
    lbt.addItem('Lead');
    lbt.addItem('Opportunity');
    lbt.addItem('Customer');
    mygrid.setWidget(5, 1, lbt);
    mygrid.setWidget(6, 0, myapp.createLabel('Kind:'));
    var lbk = myapp.createListBox(false).setName('kind');
    lbk.setVisibleItemCount(1);
    lbk.addItem('Expected Value');
    lbk.addItem('Value');
    lbk.addItem('Count');
    mygrid.setWidget(6, 1, lbk);
    var panel = myapp.createVerticalPanel();
    panel.add(mygrid);
    var button = myapp.createButton('Submit');
    var handler = myapp.createServerClickHandler('__processActivity');
    handler.addCallbackElement(mygrid);
    button.addClickHandler(handler);
    panel.add(button);
    myapp.add(panel);
    mydoc.show(myapp);
}

function __processActivity(inputvalues){
    var category = inputvalues.parameter.category;
    var label = inputvalues.parameter.label;
    var user = inputvalues.parameter.user;
    var date = inputvalues.parameter.date;
    var range = inputvalues.parameter.range;
    var type = inputvalues.parameter.type;
    var kind = inputvalues.parameter.kind;
    var answer = Activity(kind,type,date,range,category,user,'',label);
    var mysheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
    mysheet.getActiveCell().setValue(answer);
    var app = UiApp.getActiveApplication();
    app.close();
    return app;
}

function Activity(kind,type,date,range,category,user,mylabel,label){
    var kind = kind || '';
    var type = type || '';
    var category = category || '';
    var user = user || '';
    var mylabel = mylabel || '';
    var label = label || '';
    var range = range || '';
    var date = date || '';
    var data = __getData_('activity ' + kind,category,user,label,mylabel,date,range);
    var type = type.toLowerCase();
    if(type=='lead' && data.hasOwnProperty('lead')==true){
        return data['lead'];
    }else if(type=='customer' && data.hasOwnProperty('customer')==true){
        return data['customer'];
    }else if(type=='opportunity' && data.hasOwnProperty('opportunity')==true){
        return data['opportunity'];
    }else{
        return 0;
    }
}

function Pipeline(kind,type,category,user,mylabel,label){
    var kind = kind || '';
    var type = type || '';
    var category = category || '';
    var user = user || '';
    var mylabel = mylabel || '';
    var label = label || '';
    var data = __getData_('pipeline ' + kind,category,user,label,mylabel);
    var type = type.toLowerCase();
    if(type=='lead' && data.hasOwnProperty('lead')==true){
        return data['lead'];
    }else if(type=='customer' && data.hasOwnProperty('customer')==true){
        return data['customer'];
    }else if(type=='opportunity' && data.hasOwnProperty('opportunity')==true){
        return data['opportunity'];
    }else{
        return 0;
    }
}

function __processPipeline(inputvalues){
    var category = inputvalues.parameter.category;
    var label = inputvalues.parameter.label;
    var user = inputvalues.parameter.user;
    var type = inputvalues.parameter.type;
    var kind = inputvalues.parameter.kind;
    var answer = Pipeline(kind,type,category,user,'',label);
    var mysheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
    mysheet.getActiveCell().setValue(answer);
    var app = UiApp.getActiveApplication();
    app.close();
    return app;
} 

function __getData_(mlist,mcategory,muser,label,mlabel,mdate,mrange) {
    var addon = '';
    var mlist = mlist || '';
    var mcategory = mcategory || '';
    var muser = muser || '';
    var label = label || '';
    var mlabel = mlabel || '';
    var mdate = mdate || '';
    var mrange = mrange || '';
    if(mcategory.length>0){
        addon = addon + "&category=" + encodeURIComponent(mcategory);
    }
    if(muser.length>0){
         addon = addon + "&user=" + encodeURIComponent(muser);
    }
    if(mlabel.length>0){
         addon = addon + "&mylabel=" + encodeURIComponent(mlabel);
    }
    if(label.length>0){
        addon = addon + "&label=" + encodeURIComponent(label);
    }
    if(mdate.length>0){
         addon = addon + "&date=" + encodeURIComponent(mdate);
    }
    if(mrange.length>0){
        addon = addon + "&range=" + encodeURIComponent(mrange);
    }
    __getWebHook_();

    if(webhookurl.length==0 || webhookurl == null){
        return [];
    }
    addon = "&list=" + encodeURIComponent(mlist) + addon;
    for(i=0;i<jsondata.length;i++){
        if(jsondata[i]['addon'].toLowerCase() == addon.toLowerCase()){
            return jsondata[i]['json'];
        }
    }

    var url = webhookurl + addon;
    var response = UrlFetchApp.fetch(url);
    if (response.getResponseCode() == 200) {
        var newid = jsondata.length;
        jsondata[newid] = {};
        jsondata[newid].json = Utilities.jsonParse(response.getContentText());
        jsondata[newid].addon = addon.toLowerCase();
        return jsondata[newid].json;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T18:30:01.293

这与以下内容相同：

[无权在 Google Apps 脚本中调用 msgBox](https://stackoverflow.com/questions/10506105/no-permission-to-call-msgbox-in-google-apps-scripting)

自定义函数只会返回一个值到它们所在的单元格，除非它们返回一个可能影响连续单元格的数组。

自定义函数无法启动输入框（Browser.inputBox()）

自定义函数是在电子表格单元格中作为公式的全部或部分输入的函数，它从脚本编辑器调用函数。

正如您所说：“它曾经可以工作”但已被禁用

# javascript - 我想返回一个函数并在调用模块中对其进行评估

> ID：10776049
> 
> 赞同：0
> 
> 时间：2012-05-27T17:52:25.607
> 
> 标签：javascript, requirejs

我不确定为什么这不起作用。我将我的函数包装在一个匿名函数中，并相信在其他地方调用它之前不会对其进行评估。但我收到关于“dropchart”未定义的错误，因此在此模块中对其进行评估。

```
define(function() {
  var stage = {
    before: {
      createCanvas: function() {
        return function() {
          before(function(done) {
            this.canvas = new dropchart.Canvas({
              canvas: argsFor.canvas(),
              data: argsFor.data()
            });
            done();
          });
        };
      }
    }
  };
  return stage;
}); 
```

这是从另一个模块调用它的方式：

```
define(['jquery', 'dropchart', 'argsFor', 'stage'], 
  function($, dropchart, argsFor, stage) {

  var should = chai.should();
  var xAxisSpec = {

    run: function() {

      describe('xAxis', function() {

        stage.before.createCanvas();

        ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:15:42.313

该`stage`模块具有`argsFor`和 `dropchart`依赖关系，**而不是**调用模块。

调用模块不能以某种方式使它们可用于`stage`模块，除非您将它们作为参数传递`stage.before.createCanvas`或将它们放入全局范围，这会破坏 require.js 的全部意义

# java - Struts 1.3 动作前向参数

> ID：10776051
> 
> 赞同：18
> 
> 时间：2012-05-27T17:53:46.760
> 
> 标签：java, struts-1, forwarding

我正在做一个使用 Struts 1.3 的小项目，但遇到了以下问题。

在某个业务逻辑发生后，`Action`我想将控件转发到另一个映射到`struts-config.xml`.

通常这是我解决这个问题的方式：

**struts-config.xml**

```
<action path="/boardCreate" type="com.example.BoardCreateAction" name="BoardCreateForm" input="/board.jsp">
    <forward name="success" path="/board.do" redirect="true" />
</action> 
```

**Java 动作类**

```
return mapping.findForward("success"); 
```

这将重定向到`board.do`也映射到那里的操作。

我的问题是我想将控件重定向到类似的东西：

```
<forward name="success" path="/board.do?id=1" redirect="true" /> 
```

注意**id=1**参数。除了为此重建我自己的行动之外，还有其他方式吗？我找不到任何讨论这个问题的文件。谢谢！

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-27T18:11:45.190

```
ActionRedirect redirect = new ActionRedirect(mapping.findForward("success"));
redirect.addParameter("id", theId);
return redirect; 
```

见[http://tool.oschina.net/uploads/apidocs/struts-1.3.10/org/apache/struts/action/ActionRedirect.html](http://tool.oschina.net/uploads/apidocs/struts-1.3.10/org/apache/struts/action/ActionRedirect.html)

# jquery - ajax重新加载后jquery不会重新启动

> ID：10776053
> 
> 赞同：0
> 
> 时间：2012-05-27T17:54:08.770
> 
> 标签：jquery, ajax

我正在使用以下 jquery 代码来提示图像和触发 ajax 调用请求。直到某一点工作正常，但是在通过 ajax 重新加载 div 之后，工具提示和滑块实际上应该能够启动新的 ajax 调用的东西正在停止工作。

```
// Load this script once the document is ready
$(document).ready(function () {

 // Get all the thumbnail
 $('div.thumbnail-item').mouseenter(function(e) {

  // Calculate the position of the image tooltip
  x = e.pageX - $(this).offset().left;
  y = e.pageY - $(this).offset().top;

  // Set the z-index of the current item, 
  // make sure it's greater than the rest of thumbnail items
  // Set the position and display the image tooltip
  $(this).css('z-index','15')
  .children("div.tooltip")
  .css({'top': y + 10,'left': x + 20,'display':'block'});

 }).mousemove(function(e) {

  // Calculate the position of the image tooltip   
  x = e.pageX - $(this).offset().left;
  y = e.pageY - $(this).offset().top;

  // This line causes the tooltip will follow the mouse pointer
  $(this).children("div.tooltip").css({'top': y + 10,'left': x + 20});

 }).mouseleave(function() {

  // Reset the z-index and hide the image tooltip 
  $(this).css('z-index','1')
  .children("div.tooltip")
  .animate({"opacity": "hide"}, "fast");
 });

$(function() {
    $( ".slider" ).slider({
        value:0,
        min: 0,
        max: 100,
        step: 10,
        change:function(e,ui){

            var domain = document.domain;
            var count = $('#amount').val();
            var $parent = $(this).closest(".product_box");
            var modul_title = $("h4", $parent).text();
            alert(count);
            $.ajax({

                url:'index/ajax',
                data:{mod_title:modul_title, domain:domain, count:count},
                cache:true,
                datatype:'html',
                success: function(response) {
                     if(response.status = modul_title) {
                         $parent.fadeOut();
                         $parent.html(response).fadeIn(); 

                     } else 

                     {
                          alert("something went wrong!");
                     }

                   }

                });

        },
        slide: function( event, ui ) {
            $( "#amount" ).val(ui.value );
        }

    });
    $( "#amount" ).val( $( "#slider" ).slider( "value" ) );
});

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T17:57:31.340

如果一个对象是动态创建的，你需要使用 .delegate() 之类的东西：

[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

或者，更好的是，更新的 .on 方法：

[http://api.jquery.com/on/](http://api.jquery.com/on/)

然后绑定事件，它应该可以工作。例如：

```
 $('div.thumbnail-item').on('mouseenter',function(e){ ... 
```

# android - android - 彻底更换根设备的锁屏

> ID：10776057
> 
> 赞同：2
> 
> 时间：2012-05-27T17:54:49.080
> 
> 标签：android, root, replace, lockscreen, keyguard

假设我只为根设备制作了一个应用程序，这将允许替换锁定屏幕（设备屏幕被唤醒时出现的屏幕）。

我知道有很多方法可以在没有 root 的情况下这样做，但它们都被认为是一种解决方法，并且在某些设备上它们根本无法正常工作（比如 Sony erricson，它在使用安装的储物柜解锁后显示它们的默认储物柜）。

这样的事情可能吗？也许有一条通往负责显示锁定屏幕的apk（或其他）的路径？

是否也可以备份负责锁屏的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:45:20.110

安卓锁屏不是由 apk 处理的。它们是框架本身的一部分（FaceUnlock 除外）。您可以做的是向“com.android.internal.policy.impl.LockPatternKeyguardView.java”添加另一个 IBinder 接口。看看“FaceUnlock”是如何实现的。

问候，

罗伯特

# vba - 根据标题删除特定列

> ID：10776060
> 
> 赞同：0
> 
> 时间：2012-05-27T17:55:13.590
> 
> 标签：vba, dispatcher, openoffice.org, openoffice-calc

我在 Calc 中创建了以下宏，它遍历指定的行，搜索预定义的标题，然后删除它们的整个列（包括标题），代码有效，相关列确实被删除，但是

我发现了一个漏洞。如果文件中缺少预定义列表中的任何标题，我会收到一条错误消息“找不到搜索键”，然后删除其他一些不相关的列（例如，代码正在搜索“Text1”，“ Text2"、"Text3" 标题，但是如果没有找到 "Text2"，则会弹出错误消息并删除一些不相关的列）。

如果此文件中不存在某个值，则应该有某种验证检查会自动跳到循环中的下一个值。

条件：

*   标题行始终为 7。
*   列表项 相关列可以出现在提到的行中的任何位置。
*   如果找到了标题，则应删除整个列（
    之后不应保留空白列），如果缺少某些标题，则代码应自动转到下一个
    搜索值。

我找到了一些 Excel 代码示例，它们应该可以满足我的需要，但是它们在我的情况下无法使用，因为 Calc/Excel 代码略有不同。

任何帮助是极大的赞赏。

```
sub DeleteSystemFields
rem ----------------------------------------------------------------------
rem define variables
dim document   as object
dim dispatcher as object
rem ----------------------------------------------------------------------
rem get access to the document
document   = ThisComponent.CurrentController.Frame
dispatcher = createUnoService("com.sun.star.frame.DispatchHelper")

rem switch to active cell A7

dim args1(0) as new com.sun.star.beans.PropertyValue
args1(0).Name = "ToPoint"
args1(0).Value = "$A$7"

dispatcher.executeDispatch(document, ".uno:GoToCell", "", 0, args1())

rem search conditions

dim args4(17) as new com.sun.star.beans.PropertyValue
args4(0).Name = "SearchItem.StyleFamily"
args4(0).Value = 2
args4(1).Name = "SearchItem.CellType"
args4(1).Value = 0
args4(2).Name = "SearchItem.RowDirection"
args4(2).Value = true
args4(3).Name = "SearchItem.AllTables"
args4(3).Value = false
args4(4).Name = "SearchItem.Backward"
args4(4).Value = false
args4(5).Name = "SearchItem.Pattern"
args4(5).Value = false
args4(6).Name = "SearchItem.Content"
args4(6).Value = false
args4(7).Name = "SearchItem.AsianOptions"
args4(7).Value = false
args4(8).Name = "SearchItem.AlgorithmType"
args4(8).Value = 1
args4(9).Name = "SearchItem.SearchFlags"
args4(9).Value = 65536

rem search criteria parameters - corresponds to args4(10) in the next section

args4(10).Name = "SearchItem.SearchString"
args4(10).Value = ""
args4(11).Name = "SearchItem.Locale"
args4(11).Value = 255
args4(12).Name = "SearchItem.ChangedChars"
args4(12).Value = 2
args4(13).Name = "SearchItem.DeletedChars"
args4(13).Value = 2
args4(14).Name = "SearchItem.InsertedChars"
args4(14).Value = 2
args4(15).Name = "SearchItem.TransliterateFlags"
args4(15).Value = 1280
args4(16).Name = "SearchItem.Command"
args4(16).Value = 3
args4(17).Name = "Quiet"
args4(17).Value = true

rem search values start

args4(10).Name = "SearchItem.SearchString"

args4(10).Value = "Text1" 

dispatcher.executeDispatch(document, ".uno:ExecuteSearch", "", 0, args4())

dispatcher.executeDispatch(document, ".uno:DeleteColumns", "", 0, Array())

args4(10).Name = "SearchItem.SearchString"

args4(10).Value = "Text2"

dispatcher.executeDispatch(document, ".uno:ExecuteSearch", "", 0, args4())

dispatcher.executeDispatch(document, ".uno:DeleteColumns", "", 0, Array())

args4(10).Name = "SearchItem.SearchString"

args4(10).Value = "Text3" 

dispatcher.executeDispatch(document, ".uno:ExecuteSearch", "", 0, args4())

dispatcher.executeDispatch(document, ".uno:DeleteColumns", "", 0, Array())

end sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T18:12:39.800

不确定，但试试这个

```
found = dispatcher.executeDispatch(document, ".uno:ExecuteSearch", "", 0, args4())

If found.result = True  then
    dispatcher.executeDispatch(document, ".uno:DeleteColumns", "", 0, Array())
End If 
```

**跟进**

尝试这个

```
args4(10).Name = "SearchItem.SearchString"
args4(10).Value = "Text1"

found = dispatcher.executeDispatch(document, ".uno:ExecuteSearch", "", 0, args4())

If found.result = True  then

    dispatcher.executeDispatch(document, ".uno:ExecuteSearch", "", 0, args4())

    dispatcher.executeDispatch(document, ".uno:DeleteColumns", "", 0, Array())

End If 
```

# php - 如何在 Bootstrap typeahead 中使用我使用 MySQLi 从数据库中获取的数据？

> ID：10776061
> 
> 赞同：0
> 
> 时间：2012-05-27T17:55:17.427
> 
> 标签：php, javascript, mysql, mysqli, twitter-bootstrap

我正在使用 jQuery ajax + MySQLi 的预处理语句从我的数据库中获取数据。问题是我不知道如何准确格式化要在 Bootstrap 的 typeahead 插件中使用的数据。

这是相关代码：

**PHP：**

```
$stmt = $mysqli->prepare("SELECT GAME_NAME FROM GAMES WHERE GAME_NAME LIKE ?");
        $query = "%".$query."%";
        $stmt->bind_param('s',$query);
        $stmt->execute();
        $stmt->store_result();
        $count = $stmt->num_rows;

        if($count > 0) {

          $stmt->bind_result($result);
           while($stmt->fetch()) {

            echo json_encode($result);
          } 
```

作为 AJAX 响应，我得到的是所有名称作为一堆文本：

```
'"game 1""game 2""blaablaa""some other game"....' 
```

我想我必须有一个名称数组，我不知道如何将`stmt`结果作为一个数组。我尝试并工作的示例是（我使用数组`allCities`作为数据源）：

```
<script type="text/javascript">
        $(document).ready(function() {
            var allCities = ['Baltimore', 'Boston', 'New York', 'Tampa Bay', 'Toronto', 'Chicago', 'Cleveland', 'Detroit', 'Kansas City', 'Minnesota', 'Los Angeles', 'Oakland', 'Seattle', 'Texas'].sort();
            $('#city').typeahead({source: allCities, items:5});
        });
    </script> 
```

现在，如果我只能得到与示例中相同格式的结果，我认为我的问题应该得到解决。顺便说一句，我不确定`json_encode()`我在代码中使用的。这只是我尝试过的。我很感激任何帮助。谢谢。

**更新，阿贾克斯：**

```
function handleSearch() {

    var query = $.trim($('#search-field').val());
    var itm = getSearchItem();

    $.ajax({

        type: "POST",
        url: "..//functions/handleSearch.php",
        dataType: "json",
        data: "query="+query+"&itm="+itm,
        success: function(resp) {

            console.log("Server said (response):\n '" + resp + "'");

            $('#search-field').typeahead({source: resp});

        },

        error: function(e) {
            console.log("Server said (error):\n '" + e + "'");
        }
    }); 
```

**另一个更新：**

在网络选项卡中，响应给出了我想要的结果，但格式如下：`Resistance: Fall of ManResident Evil 4John Woo Presents StrangleholdAge of Empires II: The Age of KingsResident Evil 2`. 所以没有任何格式。`Console.log(resp)`虽然没有给我任何东西。虽然当我搜索“生化危机 6”时，这意味着当我输入 EXACT NAME 时，`console.log`也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T19:54:43.627

基本上你应该创建 key=>value 存储数组，最后你应该用 json_encode 输出它。您在代码中做错的是您试图在最后应该完成的每个结果上回显和 json_encode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T18:14:18.947

发布初始化ajax请求的代码。

例如这是 jquery ajax 函数的简写

```
$.ajax({
    url: url,
    dataType: 'json',
    data: data,
    success: callback
}); 
```

如果数据类型指定为 json，则回调函数将收到一个数组，如您的示例中的 allCities，然后您可以将其传递给您的插件。例如伪代码：

```
$.ajax({
  url: 'http://blabla',
  dataType: 'json',
  data: dataArray,
  success: function(response) {
    $('#city').typeahead({source: response, items:response.count()});
  }
}); 
```

# php - 会话不存储数据

> ID：10776062
> 
> 赞同：0
> 
> 时间：2012-05-27T17:55:31.540
> 
> 标签：php, codeigniter, session

我正在将 Elliot Haughin 的 twitter oauth 库用于 codeigniter。可以在这里找到： [https ://github.com/elliothaughin/codeigniter-twitter](https://github.com/elliothaughin/codeigniter-twitter)

我有以下代码使用 twitter 对用户进行身份验证并存储会话详细信息。

```
public function login() {

     $this->tweet->set_callback(site_url(''));
     $this->tweet->login();

     $tokens = $this->tweet->get_tokens();
     $user = $this->tweet->call('get', 'account/verify_credentials');
     $u = $user->screen_name ; 

        $data = array(

                'user' => $u,
                'logged_in' => true

        );

        $this->session->set_userdata($data) ; 

} 
```

这很奇怪，但logged_in 变量被保存而用户没有。我不确定我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T17:59:09.220

您是否包含`SESSION`库或自动加载它。

更新： [http ://codeigniter.com/user_guide/libraries/sessions.html](http://codeigniter.com/user_guide/libraries/sessions.html)

# android - 失败的 Binder 事务文本文件

> ID：10776069
> 
> 赞同：1
> 
> 时间：2012-05-27T17:57:18.723
> 
> 标签：android, android-binder

我必须从 96000 字节的文本文件中读取一些数据，以便绘制折线图。我尝试读取每 2 个字节并将它们组合成 2 个字节，然后我制作了 8 个数组，每个数组有 6000 个整数。但是我遇到了上述错误！如果我尝试只使用 1,2 或 3 个数组，它可以工作，但 4 个数组不能

有人可以帮我看看我在哪里做错了。我从昨天阅读了不同的讨论，并没有真正看到任何合适的答案。我得到的是内存/堆的问题。

这是我的代码。

```
byte LSB;
     byte MSB;
    public  Intent getIntent(Context context) throws IOException{
        InputStream data_in ;

            data_in = context.getAssets().open("demodta.txt");

             int[] x = new int[6000]; // x values
             int[] y1= new int[6000]; // y1 values
             int[] y2= new int[6000]; // y2 values
             int[] y3= new int[6000]; // y3 values
             int[] y4= new int[6000]; // y4 values
             int[] y5= new int[6000]; // y5 values
             int[] y6= new int[6000]; // y6 values
             int[] y7= new int[6000]; // y7 values
             int[] y8= new int[6000]; // y8 values  
             int i =0;

//      while(true) {
    int j=0;
         try {

         int size = data_in.available();
         byte[] buffer = new byte[size];
         data_in.read(buffer);

             for( i=0;i<12000;i=i+2){                
                 LSB =  buffer[i];
                 MSB = buffer[i+1];
                  int current= ((MSB<<8)| (LSB & 0xFF));
                y1[j]=  current;
                j++;
              }
                j=0;
             for(i=12000;i<24000;i=i+2){
                LSB =  buffer[i];
                MSB = buffer[i+1];
                int current= ((MSB<<8)| (LSB & 0xFF));
                y2[j]=  current;
                j++;
              }
             j=0;
             for(i=24000;i<36000;i=i+2){
                LSB =  buffer[i];
                 MSB = buffer[i+1];
                 int current= ((MSB<<8)| (LSB & 0xFF));
                 y3[j]=  current;
                 j++;
               }
             j=0;
             for(i=36000;i<48000;i=i+2){
                LSB =  buffer[i];
                 MSB = buffer[i+1];
                 int current= ((MSB<<8)| (LSB & 0xFF));
                 y4[j]=  current;
                 j++;
               }
             j=0;
             for(i=48000;i<60000;i=i+2){
                LSB =  buffer[i];
                 MSB = buffer[i+1];
                 int current= ((MSB<<8)| (LSB & 0xFF));
                 y5[j]=  current;
                 j++;
               }
             j=0;
             for(i=60000;i<72000;i=i+2){
                LSB =  buffer[i];
                 MSB = buffer[i+1];
                 int current= ((MSB<<8)| (LSB & 0xFF));
                 y6[j]=  current;
                 j++;
               }
             j=0;
             for(i=72000;i<84000;i=i+2){
                LSB =  buffer[i];
                 MSB = buffer[i+1];
                 int current= ((MSB<<8)| (LSB & 0xFF));
                 y7[j]=  current;
                 j++;
               }
             j=0;
             for(i=84000;i<96000;i=i+2){
                LSB =  buffer[i];
                 MSB = buffer[i+1];
                 int current= ((MSB<<8)| (LSB & 0xFF));
                 y8[j]=  current;
                 j++;
               }
         }

 for(int k=0;k<6000;k++){
     x[k]=k;
    }

        TimeSeries series1 = new TimeSeries("line1");
        for(int k=0;k<x.length;k++){
            series1.add(x[k], y1[k]);
        }
        TimeSeries series2 = new TimeSeries("line2");
        for(int k=0;k<x.length;k++){
            series2.add(x[k], y2[k]);
        }
        TimeSeries series3 = new TimeSeries("line3");
        for(int k=0;k<x.length;k++){
            series3.add(x[k], y3[k]);
        }
        TimeSeries series4 = new TimeSeries("line4");
        for(int k=0;k<x.length;k++){
            series4.add(x[k], y4[k]);
        }
        TimeSeries series5 = new TimeSeries("line5");
        for(int k=0;k<x.length;k++){
            series5.add(x[k], y5[k]);
        }
        TimeSeries series6 = new TimeSeries("line6");
        for(int k=0;k<x.length;k++){
            series6.add(x[k], y6[k]);
        }
        TimeSeries series7 = new TimeSeries("line7");
        for(int k=0;k<x.length;k++){
            series7.add(x[k], y7[k]);
        }
        TimeSeries series8 = new TimeSeries("line8");
        for(int k=0;k<x.length;k++){
            series8.add(x[k], y8[k]);
        } 
```

这是我的 MainActivity

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button strt = (Button) findViewById(R.id.LineGraph);

        strt.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                lineGraph line = new lineGraph();

                Intent lineIntent = null;
                try {
                    lineIntent = line.getIntent(getBaseContext());
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                startActivity(lineIntent);

            }
        });
    } 
```

我的 LogCat 给出以下输出：

```
05-27 19:39:00.180: D/dalvikvm(5556): GC_FOR_ALLOC freed 0K, 10% free 14410K/15879K, paused 68ms
05-27 19:39:00.750: D/dalvikvm(5556): GC_FOR_ALLOC freed 961K, 16% free 13452K/15879K, paused 72ms
05-27 19:39:00.830: D/dalvikvm(5556): GC_FOR_ALLOC freed 0K, 10% free 14348K/15879K, paused 77ms
05-27 19:39:00.830: I/dalvikvm-heap(5556): Grow heap (frag case) to 14.945MB for 917520-byte allocation
05-27 19:39:00.920: D/dalvikvm(5556): GC_FOR_ALLOC freed 0K, 10% free 15244K/16839K, paused 78ms
05-27 19:39:01.320: D/dalvikvm(5556): GC_FOR_ALLOC freed 1206K, 15% free 14407K/16839K, paused 74ms
05-27 19:39:01.320: I/dalvikvm-heap(5556): Grow heap (frag case) to 15.643MB for 1589467-byte allocation
05-27 19:39:01.410: D/dalvikvm(5556): GC_FOR_ALLOC freed <1K, 14% free 15958K/18439K, paused 73ms
05-27 19:39:01.420: E/JavaBinder(5556): !!! FAILED BINDER TRANSACTION !!! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:31:00.277

不能这样吗。。

```
 for( i=0;i<12000;i=i+2){ y1[j]= current; j++; }
 TimeSeries series1 = new TimeSeries("line1"); 
for(int k=0;k<x.length;k++){ series1.add(x[k], y1[k]); } 
 for(i=12000;i<24000;i=i+2){ y1[j]= current; j++; } 
```

# xml - Office 2007 的 XML 架构

> ID：10776070
> 
> 赞同：-1
> 
> 时间：2012-05-27T17:57:30.703
> 
> 标签：xml, ms-office, wordml

我需要 Word 2007 的 xml 模板。在 Word 2003 中，它开始如下所示并继续。我需要的是 xml 格式的 Word 2007 通用模板，它可以用作 WordML 到 xml 转换的基础，反之亦然。有 WordML 经验的人肯定知道我要什么！如果有人知道，请告诉我。谢谢！

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<?mso-application progid="Word.Document"?> 
<w:wordDocument>xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml"..........." 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T18:16:13.733

[这](http://www.microsoft.com/en-us/download/details.aspx?id=5124)是 Open XML SDK

[这里](http://msdn.microsoft.com/en-us/office/ee330855.aspx)是学习Open XML的msdn内容

要在[此处](http://www.microsoft.com/en-us/download/details.aspx?id=101)完成的是 WordML (Word 2003) 架构文件。

# c++ - 最小值和最大值之间的随机双精度

> ID：10776073
> 
> 赞同：6
> 
> 时间：2012-05-27T17:57:41.030
> 
> 标签：c++, random

```
double get_random(double min, double max) {
  /* Returns a random double between min and max */

  return min * ((double) rand() / (double) RAND_MAX) - max;
} 
```

这是我在最小值和最大值之间生成随机双精度的函数。但是，当我调用 时`get_random(-1.0, 1.0);`，我得到的值介于 -2.0 和 -1.0 之间。

知道我做错了什么以及如何解决它吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-27T18:01:50.387

公式不应该是

```
(max - min) * ( (double)rand() / (double)RAND_MAX ) + min 
```

*   `(double)rand() / (double)RAND_MAX``0`返回一个介于和之间的随机数`1`
*   `(max - min) * ( (double)rand() / (double)RAND_MAX )``0`返回和之间的随机数`max - min`。
*   整个表达式将返回一个介于`0 + min`and之间的随机数`min + (max-min)`- 即`min`and `max`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T03:05:22.983

您可以使用它来生成随机双精度数或浮点数：

```
((double) rand()*(max-min)/(double)RAND_MAX-min); 
```

# android - 未显示列表/网格视图中的选择器

> ID：10776077
> 
> 赞同：0
> 
> 时间：2012-05-27T17:58:47.970
> 
> 标签：android, android-gridview

我有一个带有自定义适配器的 GridView，当我从列表中选择一个项目时，选择器会显示一秒钟然后消失。我猜是自定义适配器导致了它，我尝试使用它和选择器，但无济于事。

这是我的适配器（基于“Hello, Views”中的 Grid View 示例）：

```
package shira.android.paintdroid;

import android.content.Context;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AbsListView;
import android.widget.BaseAdapter;
import android.widget.ImageView;

class PaintActionsAdapter extends BaseAdapter
{
private Context context;
private int[] actionsImagesResources;

public PaintActionsAdapter(Context context)
{
    if (context==null)
        throw new IllegalArgumentException("The context must be non-null!");
    this.context=context;
    /*actionsImagesResources=context.getResources().getIntArray(R.array.
            actions_images);*/
    actionsImagesResources=new int[6];
    for (int counter=0;counter<actionsImagesResources.length;counter++)
        actionsImagesResources[counter]=R.drawable.pencil;
}

public int getCount() { return actionsImagesResources.length; }

public long getItemId(int position)
{ return actionsImagesResources[position]; }

public Object getItem(int position) 
{ return actionsImagesResources[position]; }

public View getView(int position,View convertView,ViewGroup parent)
{
    ImageView actionImageView;
    if (convertView==null)
    {
        actionImageView=new ImageView(context);
        AbsListView.LayoutParams layoutParams=new AbsListView.LayoutParams(
                ViewGroup.LayoutParams.FILL_PARENT,ViewGroup.LayoutParams.
                FILL_PARENT);
        actionImageView.setLayoutParams(layoutParams);
        //actionImageView.setAlpha(0);
    }
    else actionImageView=(ImageView)convertView;
    actionImageView.setImageResource(actionsImagesResources[position]);
    return actionImageView;
}
} 
```

这是布局：

```
<GridView android:id="@+id/paint_actions_grid" android:layout_width="0dip"
        android:layout_height="fill_parent" android:numColumns="2" 
        android:layout_weight="0.15" android:drawSelectorOnTop="true"/> <!-- android:background="@color/ui_background_color"/> --> 
        <!-- android:listSelector="@drawable/actions_list_selector"/> --> 
```

谢谢你的帮助。

这是 GridView 现在的样子的图像捕获（现在，所有项目都具有相同的图像）。我希望在所选图像周围绘制某种颜色的框架，但正如我所说，我得到一个橙色矩形，该矩形在一秒钟后消失。

![网格视图的屏幕截图](../Images/4b036dda2e0dc37fb7e0b4d2f7c4a0a4.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T20:14:53.137

这是因为在触摸模式下没有选择的东西。[请参阅此处](http://developer.android.com/resources/articles/touch-mode.html)的文档。

您可以通过将网格单元布局设置为可点击，然后按照[此处](http://developer.android.com/reference/android/content/res/ColorStateList.html)`android:clckickable="true"`所述创建 ColorStateList 来解决此问题。

您要为此使用的状态是`activated`. 在选择器 xml 中使用该状态。

```
<selector xmlns:android="http://schemas.android.com/apk/res/android"> 
   <item android:state_activated="true" android:color="@color/your_activated_color" />  
    <item android:color="@color/your_standard_color"/> 
</selector> 
```

然后将选择器 xml 设置为 gridview 单元格布局的背景。那应该达到预期的效果。

# ios - 从 iOS5 启动 Twitter 个人资料的正确方法是什么？

> ID：10776078
> 
> 赞同：1
> 
> 时间：2012-05-27T17:58:50.827
> 
> 标签：ios, ios5, twitter

假设我希望用户能够通过我的应用程序信用视图中的按钮查看我的 Twitter 帐户提要。

这样做的正确方法是什么？

我可以很容易地将 URL 加载到 twitter.com，但是如果用户不使用 twitter 的 web 版本而是使用 Twitter 应用程序或 Tweetbot 等怎么办？

我没有找到任何关于`twitter://`协议的明显内容。

谢谢！

# asp.net - 跨 ASP.NET 的多个数据库维护用户数据完整性

> ID：10776080
> 
> 赞同：1
> 
> 时间：2012-05-27T17:59:03.790
> 
> 标签：asp.net, sql, sql-server, database

我有 2 个问题。我正在开发一个使用标准 ASP.NET 成员资格的 ASP.NET Web 应用程序。我们打算将成员表放在 1 个数据库中。我们还有 2 个其他数据库，用于存储 2 个不同应用程序的数据。

```
Shared - Membership info
DB1 - Application1
DB2 - Application2 
```

两个应用程序都使用“共享”数据库中的成员信息。共享数据库有一个名为 userdetals 的表，它将存储其他用户的信息，例如姓名、电话和职位。

但是，DB1 也有一个名为 employees 的表，它存储与姓名、电话和职位相同的字段。每个员工都可以是一个用户。

同样对于 DB1 和 DB2 中的每个表，我们都进行审计试验，即哪个用户更新了数据库中的表。因此，我们需要将 UserID 存储在 DB1 和 DB2 的表中。我们考虑在 DB1 和 DB2 中添加一个用户表。因此，每次在 Shared 中创建新用户时，都会在 DB1 和 DB2 的 Users 表中创建相同的用户。

我们的问题是：

1.  鉴于上述设置，维护数据库完整性的最佳方法是什么？例如，每个员工都被分配为一个用户。如果 DB1 中的任何字段（例如用户名、姓名和电话）被更新，那么 Shared DB 中的相同字段也应该被更新，反之亦然。

2.  在我们的案例中，是否建议将会员数据库放在不同的数据库中？什么是最好的解决方案，因为 DB1 和 DB2 中的几乎所有表都引用共享数据库中的用户 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T23:22:23.007

1\. 您正在寻找的技术是 Merge Replication ( [http://bit.ly/KUtkPl](http://bit.ly/KUtkPl) )。本质上，您将在两个数据库上创建一个通用的用户表，在一个应用程序数据库上创建一个合并复制**发布**者，然后在另一个应用程序数据库上创建一个合并复制**订阅者**。你也可以设置它来同步模式（这也意味着你只需要在发布数据库上创建一次表：它将把表、模式和数据推送给订阅者）。

但是，如果您正在寻找更多的手动方法，我不会将用户数据非规范化为员工表，而是在每个应用程序服务器上创建一个补充表和一个视图。有点像 OOP 中的继承：Employee 表和 Users 表之间的任何公共数据都保留在共享的用户表上。Employee 的任何唯一列，仅添加到补充表并存储在每个数据库中。该视图将合并补充表和共享表。( [http://bit.ly/9KPxt0](http://bit.ly/9KPxt0) )

即使您确实使用复制服务，我仍然会将此视图设计与同步表一起使用。

您可以通过视图进行更新，但我不建议这样做。它之前已经在生产中成功完成，但是有太多的限制可能会爆炸（[http://bit.ly/LJCJev](http://bit.ly/LJCJev)）。而是直接更新保存数据的表。

绝对避免“同步的触发器”。风险太大（可能导致 SQL 服务器上的婴儿循环）和过多的维护开销。

2.我会做Merge Replication，配置正确后你就不用担心和维护了。但是，如果您需要更多手动操作，或者您不熟悉 SQL 中的复制服务，您的方法是可以的……只需使用上面提到的视图，您就可以设置好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:24:06.923

简单的方法：

您可以为这些数据库创建链接服务器。然后创建同义词以轻松访问每个数据库的表。创建触发器以在每个表上更新任何数据时更新数据。

# qt - 在 Ubuntu 12.04 上将 CUDA 与 Qt 集成

> ID：10776083
> 
> 赞同：2
> 
> 时间：2012-05-27T17:59:48.753
> 
> 标签：qt, cuda

我正在尝试将 Qt 与 CUDA 集成。我正在开发 Ubuntu 12.04。我已经安装了 CUDA 和 Qt。

我按照此处的步骤进行操作 - [尝试设置 QT creator 和 Cuda 时“未使用链接器输入文件，因为链接未完成”](https://stackoverflow.com/questions/10517660/linker-input-file-unused-because-linking-not-done-when-trying-to-setup-qt-crea)

但是它仍然给我一个错误。

这是我的做法。

我在我的主目录中创建了一个名为“CUDA2”的空 Qt 项目。

我添加了以下文件

**cuda_interface.cu**

```
// CUDA-C includes
#include <cuda.h>

extern "C"
void runCudaPart();

// Main cuda function

void runCudaPart() {

// all your cuda code here *smile*

} 
```

**主文件**

```
#include <QtCore/QCoreApplication>

extern "C"
void runCudaPart();

int main(int argc, char *argv[]) {

    QCoreApplication a(argc, argv);

    runCudaPart();

    return a.exec();

} 
```

我将以下行添加到 .pro 文件中

```
QT += core
QT -= gui

TARGET = cuda2
CONFIG += console
CONFIG -= app_bundle
TEMPLATE = app
# Source files for C/C++ compiler
SOURCES += main.cpp
# project build directories
DESTDIR = $$system(pwd)
OBJECTS_DIR = $$DESTDIR/Obj
# and C/C++ flags
QMAKE_CFLAGS_RELEASE =-O3
QMAKE_CXXFLAGS_RELEASE =-O3
# cuda source
CUDA_SOURCES += cuda_interface.cu
# Path to cuda toolkit install
CUDA_DIR = /usr/local/cuda
INCLUDEPATH += $$CUDA_DIR/include
QMAKE_LIBDIR += $$CUDA_DIR/lib
# GPU architecture
CUDA_ARCH = sm_20
# NVCC flags
NVCCFLAGS = --compiler-options -fno-strict-aliasing -use_fast_math --ptxas-options=-v
# Path to libraries
LIBS += -lcudart -lcuda
# join the includes in a line
CUDA_INC = $$join(INCLUDEPATH,' -I','-I',' ')
cuda.commands = $$CUDA_DIR/bin/nvcc -m64 -O3 -arch=$$CUDA_ARCH -c $$NVCCFLAGS $$CUDA_INC $$LIBS ${QMAKE_FILE_NAME} -o ${QMAKE_FILE_OUT}
cuda.dependcy_type = TYPE_C
cuda.depend_command = $$CUDA_DIR/bin/nvcc -O3 -M $$CUDA_INC $$NVCCFLAGS      ${QMAKE_FILE_NAME}

cuda.input = CUDA_SOURCES
cuda.output = ${OBJECTS_DIR}${QMAKE_FILE_BASE}_cuda.o
# Tell Qt that we want add more stuff to the Makefile
QMAKE_EXTRA_COMPILERS += cuda 
```

我运行 qmake 来生成 makefile。当我单击“构建”时，出现此错误 -

```
13:33:35: Running build steps for project CUDA2...
13:33:35: Configuration unchanged, skipping qmake step.
13:33:35: Starting: "/usr/bin/make" -w
make: Entering directory `/home/alex/CUDA2'
Makefile:541: warning: overriding commands for target `Obj/main.o'
Makefile:538: warning: ignoring old commands for target `Obj/main.o'
/usr/local/cuda/bin/nvcc -m64 -O3 -arch=sm_20 -c --compiler-options -fno-strict-aliasing     -use_fast_math --ptxas-options=-v -I/usr/local/cuda/include -lcudart -lcuda    cuda_interface.cu -o Obj/cuda_interface_cuda.o
ptxas info    : Compiling entry function '__cuda_dummy_entry__' for 'sm_20'
ptxas info    : Used 2 registers, 32 bytes cmem[0]
g++ -c -pipe -O3 -Wall -W -D_REENTRANT -DQT_WEBKIT -DQT_NO_DEBUG -DQT_CORE_LIB -      DQT_SHARED -I/usr/share/qt4/mkspecs/linux-g++ -I. -I/usr/include/qt4/QtCore -  I/usr/include/qt4 -I/usr/local/cuda/include -I. -o Obj/main.o main.cpp
gcc -c -pipe -O3 -Wall -W -D_REENTRANT -DQT_WEBKIT -DQT_NO_DEBUG -DQT_CORE_LIB -   DQT_SHARED -I/usr/share/qt4/mkspecs/linux-g++ -I. -I/usr/include/qt4/QtCore -   I/usr/include/qt4 -I/usr/local/cuda/include -I. -o Obj/cuda_interface.o cuda_interface.cu
gcc: warning: cuda_interface.cu: linker input file unused because linking not done
g++ -Wl,-O1 -o cuda2 Obj/cuda_interface_cuda.o Obj/main.o Obj/main.o   Obj/cuda_interface.o    -L/usr/local/cuda/lib -L/usr/lib/x86_64-linux-gnu -lcudart -lcuda -  lQtCore -lpthread 
g++: error: Obj/cuda_interface.o: No such file or directory
make: *** [cuda2] Error 1
make: Leaving directory `/home/alex/CUDA2'
13:33:36: The process "/usr/bin/make" exited with code 2.
Error while building project CUDA2 (target: Desktop) 
When executing build step 'Make' 
```

我不确定 .pro 文件是否适用于 Linux。看起来它是为 OSX 制作的。另外，我不知道 CUDA_ARCH = sm_20 行是否正确。有没有办法找到我的 gpu 架构？我正在使用 NVIDIA Quadro FX 380M

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T15:54:37.867

Based on the comments, you had some 'common mistakes' on your .pro file.

First, the CUDA toolkit has separated libraries directories for 32 and 64 bits. So, you need adjust the QMAKE_LIBDIR as follows:

```
QMAKE_LIBDIR += $$CUDA_DIR/lib64 # for 64bits operating system 
```

or

```
QMAKE_LIBDIR += $$CUDA_DIR/lib # for 32bits operating system 
```

Do not include the .cu files as SOURCES in the .pro file as they are not compiled with g++. The .pro file of your question does not show this case, but you commented that the .cu file were in the project in Qt remove them.

Finally, to be sure all your changes take effect do the following in the QT Creator IDE menu:

1.  Build -> Clean Project # to clean old stuff
2.  Build -> Run qmake # to take the .pro changes
3.  Build -> Build Project # obvious

PS: As @aland commented, your GPU device compute capability is 1.2, so adjust CUDA_ARCH = sm_12.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T18:11:55.927

1.  这就是问题：

    g++：错误：Obj/cuda_interface.o：没有这样的文件或目录

2.  我会*删除*你所有的 CUDA 源代码和库，确保一切都完全*干净*，然后从头开始*重新安装。*

3.  这是一个很好的指南：

    [http://laurencedawson.com/ubuntu-11.10-and-cuda-4.1](http://laurencedawson.com/ubuntu-11.10-and-cuda-4.1)

    <= 假设您已经安装了 Ubuntu 和 NVidia 驱动程序，那么只需重新安装并重建 CUDA 工具包和源代码。

4.  忘记 Qt 并忘记您的图形 IDE，直到您开始工作。

    请从命令行重新安装并重建 CUDA。

5.  在返回 Qt 和 IDE 之前，请确保您可以从命令行运行“deviceQuery”。

另一个好资源：

[http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Getting_Started_Linux.pdf](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Getting_Started_Linux.pdf)

# jquery - 将内容附加到 div 并滚动/动画到底部

> ID：10776085
> 
> 赞同：29
> 
> 时间：2012-05-27T18:00:25.877
> 
> 标签：jquery, scrolltop

添加新内容后，我试图让 div 滚动到底部（使用追加）

这是主要部分：

```
$('#textdiv').append('<p>Lorem ipsum dolor sit amet, solet nostrud concludaturque no eam. Ne quod recteque pri. Porro nulla zril mei eu. Eu nibh rebum pri, eu est maiorum menandri, ridens tamquam abhorreant te eum. Ipsum definiebas ad mel.</p>');

$('#textdiv').animate({scrollTop: $('#textdiv').height()}, 1000); 
```

在小提琴中查看/尝试：http: [//jsfiddle.net/5ucD3/7/](http://jsfiddle.net/5ucD3/7/)

非常错误..它不会滚动到底部（可能只是最初的几个附加）。当我向下滚动并添加新内容时，它会向上滚动。有时它根本没有动画。

我如何让它始终工作？我想我必须以某种方式获得**正确**的高度，但不知道如何

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-27T23:28:13.727

我找到了一种可行的方法：

```
$('#textdiv').animate({scrollTop: $('#textdiv').prop("scrollHeight")}, 500); 
```

[http://jsfiddle.net/5ucD3/13/](http://jsfiddle.net/5ucD3/13/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-02T09:46:26.957

我又迟到了，但这是我的两分钱。

有时，仅使用一种读数来测量动态元素可能会产生误导，因为附加的内容可能很长，或者因为对内容的请求（$.get、$.post、$.ajax 等）仍在进行中. 如果要附加的字符串来自请求，那么您必须使用回调方法来附加响应。

你能做的最好的事情就是像这样把它串起来，因为javascript“应该”以同步方式解析函数：

```
$("#textdiv").append('The longest string ever parsed goes here.')
.animate({scrollTop: $('#textdiv').prop("scrollHeight")}, 500); 
```

但你是对的，这种方法往往是错误的，尤其是在处理变异足够快的 div 时。

这就是为什么如果您想更加确定工作是否完成，您可以使用间隔：

```
var scroll_to_bottom = function(element){
    var tries = 0, old_height = new_height = element.height();
    var intervalId = setInterval(function() {
        if( old_height != new_height ){    
            // Env loaded
            clearInterval(intervalId);
            element.animate({ scrollTop: new_height }, 'slow');
        }else if(tries >= 30){
            // Give up and scroll anyway
            clearInterval(intervalId);
            element.animate({ scrollTop: new_height }, 'slow');
        }else{
            new_height = content.height();
            tries++;
        }
    }, 100);
}

$('#textdiv').append('The longest string ever parsed goes here.');
scroll_to_bottom($('#textdiv')); 
```

此方法无法击败回调或简单的函数队列，但如果您不确切知道追加何时结束，它可以解决问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-27T18:56:20.440

我已经编辑并测试了您的代码：

```
var div = $('#textdiv'),
    height = div.height();

$('#add').on('click', function(){
    div.append('<p>Lorem ipsum dolor sit amet, solet nostrud concludaturque no eam. Ne quod recteque pri. Porro nulla zril mei eu. Eu nibh rebum pri, eu est maiorum menandri, ridens tamquam abhorreant te eum. Ipsum definiebas ad mel.</p>');
    div.animate({scrollTop: height}, 500);
    height += div.height();
}); 
```

在[**jsFiddle**](http://jsfiddle.net/5ucD3/10/)现场试用 ​</p>

# jquery - jquery 新手，在添加左侧位置时需要帮助

> ID：10776089
> 
> 赞同：0
> 
> 时间：2012-05-27T18:00:53.383
> 
> 标签：jquery, scroll

我是使用 jquery 的新手，需要帮助。我正在使用scrolltofixed.js，需要帮助添加左侧：%%px。这是我到目前为止所拥有的：

```
$(document).ready(function() {
    $('#socialbar').scrollToFixed( {marginTop: $('.header').outerHeight(true) + 7,});
    $('#socialbar').bind('fixed', function() {   });
    $('#socialbar').bind('unfixed', function() {  });

    $('#sidebar').scrollToFixed({
        marginTop: $('.header').outerHeight(true) + 15,
        fixed: function() {  },
    });
}); 
```

当用户开始向下滚动页面时，#socialbar 元素会发生以下情况：

```
z-index: 1000; width: 58px; position: fixed; top: 7px; left: 70px; 
```

感谢您的帮助，格雷戈里 S。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T18:03:39.397

看看[`css()`](http://api.jquery.com/css/)方法：

```
$('#socialbar').css('left', 'your value'); 
```

# c++ - 用于接收输入的无等待命令

> ID：10776091
> 
> 赞同：1
> 
> 时间：2012-05-27T18:00:56.673
> 
> 标签：c++, windows, input

> **可能重复：**
> [C/C++：从标准输入中捕获字符而不等待按下回车键](https://stackoverflow.com/questions/421860/c-c-capture-characters-from-standard-input-without-waiting-for-enter-to-be-pr)

```
char ch; 
```

我想我想得到一个角色。我知道两种不同的方式。

1- 在 iostream 头文件中使用 cin 命令。

```
cin >> ch; 
```

它将等待用户输入某些内容，然后用户必须按 enter 将输入发送到 ch 变量。

2- conio.h 头文件中的 getch() 命令。

```
ch = _getch(); 
```

它会等待用户输入一些东西，一旦输入一个字符，它将被保存在 ch 变量中，用户不需要按 enter。顺便说一句，此代码将停止程序并等待输入。

现在我想写一个不需要按回车的命令，它不会停止程序按下某些东西。想象一下我将程序延迟 1 秒，如果用户按下某些东西，它会将其保存到 ch 变量中，如果不是什么都没有，程序将继续并且不会因为按下某些东西而停止。它就像一个选择器命令，如果有东西它会选择它，如果没有它会继续。

希望我很清楚。那么该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T18:35:09.877

在 Windows 上，您可以这样做：

1.  `CreateFile`使用 filename `"CONIN$"`，它将为您提供控制台的 Win32 句柄。
2.  `WaitForSingleObject`，传递控制台句柄和超时。
3.  如果等待成功，则用于`ReadConsoleInput`确定甚至发生了什么。
4.  如果等待失败，则发生超时。

如果您只是在循环中轮询执行其他操作，那么您可以使用`PeekConsoleInput`，它会检查输入队列中是否有任何事件，并始终立即返回。

* * *

在 Unix 上，类似的方法将起作用。请注意：

1.  不必打开文件，因为`stdin`始终是文件描述符`0`。
2.  使用`select`或`poll`测试超时输入的活动。

最后的区别：在 Windows 上，鼠标活动的捕获方式相同。在 Unix 上，您通常会从 tty 读取键盘输入，而鼠标是完全独立的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T19:16:57.220

首先我们需要一个函数来打开和关闭非阻塞输入：

```
void nonblock(const bool state){

    struct termios ttystate;

    //get the terminal state
    tcgetattr(STDIN_FILENO, &ttystate);

    if (state){
        //turn off canonical mode
        ttystate.c_lflag &= ~ICANON;
        //minimum of number input read.
        ttystate.c_cc[VMIN] = 1;
    }
    else{
        //turn on canonical mode
        ttystate.c_lflag |= ICANON;
    }

    //set the terminal attributes.
    tcsetattr(STDIN_FILENO, TCSANOW, &ttystate);
} 
```

现在我们需要一个函数来测试是否按下了某个键：

```
int keypress(void){
    struct timeval tv;
    fd_set fds;
    tv.tv_sec = 0;
    tv.tv_usec = 0;
    FD_ZERO(&fds);
    FD_SET(STDIN_FILENO, &fds);
    select(STDIN_FILENO+1, &fds, NULL, NULL, &tv);
    return FD_ISSET(STDIN_FILENO, &fds);
} 
```

我们将并行检查两件事。用户是否按下了某个键，或者时间用完了？这是一个在指定秒数后更改布尔值的函数：

```
void SleepForNumberOfSeconds(const int & numberofSeconds,bool & timesUp){

    timespec delay = {numberofSeconds,0};
    timespec delayrem;

    nanosleep(&delay, &delayrem);
    timesUp = true;

    return;
} 
```

这是您可以调用的主要功能：

```
void WaitForTimeoutOrInterrupt(int const& numberofSeconds){

    bool timesUp = false;

    std::thread t(SleepForNumberOfSeconds, numberofSeconds, std::ref(timesUp));
    nonblock(1);
    while (!timesUp && !keypress()){

    }

    if (t.joinable()){
        t.detach();
    }
    nonblock(0);

    return;
} 
```

这是要测试的[代码。](http://pastebin.com/q41L5pTs)
编译：

> g++ -std=c++0x -o rand rand.cpp -lpthread

上：

> gcc (Ubuntu/Linaro 4.6.1-9ubuntu3) 4.6.1

这只是一种解决方案，它可能对您不起作用。
考虑研究 ncurses 为好。

# jquery - Nivo Slider 在 Wordpress 主题中未正确加载

> ID：10776093
> 
> 赞同：0
> 
> 时间：2012-05-27T18:01:20.700
> 
> 标签：jquery, wordpress, slider, nivo-slider

网站： http: [//notsofastfoodtruck.com/](http://notsofastfoodtruck.com/)

如您所见，Nivo Slider 图像已加载，但它们不起作用，因为它们保持静止。

控制台错误：

```
Uncaught TypeError: Object [object Object] has no method 'anim_progressbar' script.js:164
Uncaught TypeError: Object [object Object] has no method 'nivoSlider' script.js:80
Uncaught TypeError: Object [object Object] has no method 'nivoSlider' 
```

任何可以为我指明正确方向的建议都值得赞赏。我正在为朋友解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T20:10:00.520

你有几个问题。有几个异常抱怨 jQuery 对象上的未知方法（nivoSlider、anim_progressbar）。

这就是我发现的。

![在此处输入图像描述](../Images/fc5f60913fd81c1ea3158fe3044dfc83.png)

1.  您在页面中包含多个版本的 jquery。这会带来麻烦。对于其中一个，您调用`.NoConflict()`了 ，它定义了 jQuery 对象。对于另一个你没有，它定义了`$`对象。anim_progressbar 正在其中一个（`jQuery`）上定义，而您正试图从另一个使用它，这会引发异常。您可以在上面的屏幕截图中看到它。解决方案：只使用一个版本的 jQuery。

2.  在我看来，您正试图`nivoSlider()`从文档就绪功能外部调用。

3.  script.js 中还有很多其他草率的东西。就像完全空的 document.ready 块一样。

基本上你需要控制你的页面。看起来你只是把你能想到的所有东西都扔进了那个页面。有 72 个脚本和几个 jQuery 实例。把它全部砍掉并控制它。重来。使用一种版本的 JQuery。

然后确保你`nivoSlider`在`$(document).ready()`.

# php - 显示来自数据库的图像

> ID：10776098
> 
> 赞同：0
> 
> 时间：2012-05-27T18:02:24.090
> 
> 标签：php, mysql, image

我听说将图像保存在数据库中是一个非常糟糕的主意，所以我决定保存图像的路径。这里的问题是我找不到显示图像的方法。我试过这个

```
<?php
$con = mysql_connect("localhost","root","mypassword");
mysql_query('SET NAMES UTF8');

if (!$con)
{
    echo "problem with connection" .mysql_error();
}
?>
<?php
mysql_select_db("eshop",$con);
$result = mysql_query("SELECT * FROM products", $con);
    $row = mysql_fetch_array($result);
while ($row)
 {   
$myimage = '<img src="<?php echo $row[\'image\']; ?>" />';
echo $row['title'] . " " . "<br />" . $myimage . $row['category'];
$row = mysql_fetch_array($result);
 }
 mysql_close($con);
?> 
```

和其他没有结果的类似方式。有人对此有任何线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T18:04:51.083

`$row`您甚至在设置它或调用 mysql 数组之前就尝试调用它。

```
 $row = mysql_fetch_array($result);
 $myimage = '<img src="<?php echo $row[\'image\']; ?>" />'
 echo $row['title'] . " " . "<br />" . $myimage . $row['category']; 
```

您还想转义 'image' 周围的单引号，否则会出现语法错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T19:11:50.400

为什么那里有php开始和结束标签？你可以这样做：

```
$result = mysql_query('SELECT * FROM products',$con);
while($row = mysql_fetch_array($result)){
$myimage = '<img src="'.$row['image'].'" />';
echo $row['title']. ' ' . '<br/>' . $myimage . $row['category'];
}
mysql_close($con); 
```

请注意 mysql_* 函数将在下一版本或之后的版本中被弃用。您应该改用 mysqli 或 PDO。此外，如果您不打算在其他变量定义中包含变量，则应使用单引号，因为 php 解析双引号内的字符串。如果在需要时使用单引号会更快一些。

你可以在这里看到我对单引号和双引号的意思：http: [//codepad.org/UW5DO2fT](http://codepad.org/UW5DO2fT)

# iphone - 动画 UIView 增长/收缩

> ID：10776100
> 
> 赞同：5
> 
> 时间：2012-05-27T18:03:03.830
> 
> 标签：iphone, ios, animation, uiview

我有一个 UILabel 我想要动画成长和缩小。当尺寸发生变化时，我需要左下角保持静止，以便它始终直接显示在底部工具栏的上方。我正在使用以下代码使标签增长：

```
[UIView animateWithDuration:kAnimationDuration delay:0.0 options:UIViewAnimationCurveEaseInOut 
                 animations:^{  
    CGFloat lblHeight = 42.0f;
    [label setFrame:CGRectMake(0.0, 
                CGRectGetMaxY(self.view.bounds) - kBottomBarHeight - lblHeight, 
                CGRectGetMaxX(self.view.bounds), 
                lblHeight)];                
} completion:^(BOOL finished) { }]; 
```

并使其缩小我使用相同的逻辑，除了 lblHeight 设置为 17.0f

视图正确增长，但是当我尝试缩小它时，帧更改动画没有动画。它会变成新的大小，然后动画到新的原点/位置。我需要动画帧变化。谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:50:04.463

经过一些修补后，我设法通过执行以下操作来获得所需的行为。

在 expand 方法中，我使用 UIView 动画来改变框架。在shrink 方法中，我使用UIView 动画来改变边界和中心。

我有点困惑为什么这有效，但试图缩小框架却没有。如果有人可以分享对此的一些见解，那就太好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T18:33:47.160

您不应该真正使用帧来制作动画，而应该使用标签的 transform 属性。

但是，由于您希望一个角落保持静止，我认为最好使用 Core Animation。`CALayer`有一个名为的属性`anchorPoint`，它确定图层将相对于哪个点旋转，我很确定它对于增长/收缩效果也有效。

# xcode - LLDB 中的 XCode 日志输出损坏

> ID：10776101
> 
> 赞同：0
> 
> 时间：2012-05-27T18:03:07.180
> 
> 标签：xcode, llvm, lldb

自从我切换到 lldb 后，许多对象的打印描述，尤其是 UIView，都已损坏。当它工作时，lldb 是一个很大的改进，特别是对于像字典这样的东西。但是，我经常得到如下输出。这是一个已知问题，还是我的配置有问题？

```
Printing description of v:
+ 6˝ú˝ Í|   HÜ0P«¡  `Owƒ˝Ä4Î    HÜ0†œ¡  86˝ú˝@ï0HÜ0\Ê˜`Owƒ˝@ï0HÜ0¯Â˜`6˝t˝@ï0HÜ0‰Ê˜`Owà˝@ï0HÜ0ÑÊ˜ú6˝$˝@ï0HÜ0ï∆   ∞6˝,˝@ï0HÜ00Ï˜`Ow8˝@ï0HÜ00ï∆    `Ow@˝@ï0HÜ0∞Î˜ÿ6˝ú˝x~|  HÜ0†π∆  `Owƒ˝†@—HÜ0¿π∆   retain:3 - tag:0 - bgcolor:(r:0 g:0 b:0 a:1.00)
   bounds: x:0 y:0 w:320 h:107 - frame: x:0 y:0 w:320 h:107 - center: x:160, y:54
++ \˝ú˝H≥|  HÜ0¿ô„  `Owƒ˝ÔË    HÜ0PSÁ  0\˝ú˝Pz«    HÜ0†t«  `Owƒ˝ù«    HÜ0Ät«  X\˝ú˝xø|    HÜ0@’∆  `Owƒ˝„∆    HÜ0`’∆  `Ow–\˝@ï0HÜ0`@∆ l\˝º\˝@ï0HÜ0@@∆ ®\˝LOw‡/Ñ   HÜ0Ä{«  `Ow`OwPÈ∆   HÜ0@û«  –\˝ú˝0Ñ    HÜ0∞7∆  `Owƒ˝‡È∆    HÜ0–7∆  ¯\˝LOwê-Ñ   HÜ0–/»  `Ow`Owê!»   HÜ0PC»  p]˝LOw@ï0HÜ0¿>˙`Ow‹PH@ï0HÜ0–9˙ ]˝»PH@ï0HÜ0‹;˙\]˝LOw–n°HÜ00C»    `Ow`OwàêHÜ0pR»  `Ow`Ow@ï0HÜ0‡=˙ò]˝$˝∞Ì« HÜ0`»   `Ow8˝‡Ï∆    HÜ0@    »   ¿]˝º\˝@ï0HÜ0‡e∆ `Ow–\˝@ï0HÜ0f∆  Ë]˝º\˝b|    HÜ0 V∆  `Ow–\˝∞ÍÉ   HÜ0PV∆  ^˝ÃL˝àÇ|    HÜ0Pπ±  `Ow‡L˝†TÉHÜ0@±  8^˝ÃL˝@ï0HÜ0xD˙`Ow‡L˝@ï0HÜ0pC˙`^˝úO˝@Ú| HÜ0pw±  `Ow∞O˝`N±   HÜ0†P±  à^˝M˝@ï0HÜ0∞G˙`Ow0M˝@ï0HÜ0»F˙∞^˝¸Ä˝ h|  HÜ0¿∆   `OwÅ˝¿˚–HÜ0ê∆   ÿ^˝ÃL˝ ÑÎ   HÜ00WÎ  `Ow‡L˝¿UÎ   HÜ0WÎ    retain:4 - tag:0 - bgcolor:(r:0 g:0 b:0 a:1.00)
    bounds: x:0 y:0 w:320 h:107 - frame: x:0 y:0 w:320 h:107 - center: x:160, y:54
+++ ,å= retain:4 - tag:11 - bgcolor:(r:30 g:198 b:32 a:1.00)
     bounds: x:0 y:0 w:420 h:403 - frame: x:-50 y:9 w:420 h:403 - center: x:160, y:210
++++ Tå= retain:4 - tag:0 - bgcolor:(r:0 g:0 b:0 a:1.00)
      bounds: x:0 y:0 w:403 h:403 - frame: x:0 y:0 w:403 h:403 - center: x:202, y:202 
```

# google-app-engine - golang：通过电子邮件发送存储为 Google Appengine blobstore blob 的图像

> ID：10776103
> 
> 赞同：2
> 
> 时间：2012-05-27T18:03:24.567
> 
> 标签：google-app-engine, go

我正在尝试使用以下代码将存储在 GAE blobstore 中的 JPEG 文件读回字节数组：

```
info,_  := blobstore.Stat(context,appengine.BlobKey(request.FormValue("blobkey")))
image   := make([]byte,info.Size)
reader  := blobstore.NewReader(context,appengine.BlobKey(request.FormValue("blobkey")))
n,nerr  := reader.Read(image) 
```

图像存储正确，即它可以使用 blobstore.Send(...) 提供。

上面的代码可以正常工作（因为它确实读回了 blob 数据），但它将任何 0x0a 字节转换为 0x0d 0x0a 对（即 LF 到 CR LF）。

Go 中有没有办法解决这种行为（无需编写过滤器将 0x0d0a 转换回 0x0a）？

编辑：

事实证明，问题根本不在于 Blobstore.Reader，而在于开发应用服务器上 mail.py 中的附件编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:19:06.563

开发应用服务器上的邮件附件处理未正确编码图像数据。如果已知附件数据是二进制的，部分解决方法是添加以下行：

```
encoders.encode_base64(mime_attachment) 
```

行后

```
mime_attachment.set_payload(attachment.data()) 
```

在文件中

> 谷歌/appengine/api/mail.py

对图像内容类型使用 MIMEImage 附件将是更好的解决方案，但会导致“LazyImporter 对象不可调用”错误。

# javascript - 将光标移动到输入的末尾

> ID：10776107
> 
> 赞同：4
> 
> 时间：2012-05-27T18:03:43.757
> 
> 标签：javascript, jquery

这是我的小 jquery 插件，它在打字时用其他符号替换每个英文符号。在这里一切正常，除了当我输入一个长于输入本身的长单词时，光标移到输入之外，单词的最后一部分不可见。只需访问下面的链接并输入一些内容（没有空格），您就会明白我的意思。

[http://jsfiddle.net/beLMf/](http://jsfiddle.net/beLMf/)

有什么解决方案可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T19:19:37.727

您有两个问题，一个是您始终将文本添加到行尾，即如果它与您要查找的字符匹配。您应该改为在插入符号（光标）位置进行插入：

```
jQuery.fn.extend({
insertAtCaret: function(myValue){
  return this.each(function(i) {
    if (document.selection) {
      //For browsers like Internet Explorer
      this.focus();
      sel = document.selection.createRange();
      sel.text = myValue;
      this.focus();
    }
    else if (this.selectionStart || this.selectionStart == '0') {
      //For browsers like Firefox and Webkit based
      var startPos = this.selectionStart;
      var endPos = this.selectionEnd;
      var scrollTop = this.scrollTop;
      this.value = this.value.substring(0, startPos)+myValue+this.value.substring(endPos,this.value.length);
      this.focus();
      this.selectionStart = startPos + myValue.length;
      this.selectionEnd = startPos + myValue.length;
      this.scrollTop = scrollTop;
    } else {
      this.value += myValue;
      this.focus();
    }
  })
}
}); 
```

然后改变你的行：

```
$this.val( $this.val() + String.fromCharCode( i + 4304 ) ); 
```

到

```
$this.insertAtCaret(String.fromCharCode( i + 4304 ));
$("#switcher").focus();
$(this).focus(); 
```

这将解决您的问题并解决编辑字符串任何部分的问题。

更新：要更新光标位置，我们必须将焦点移开，然后再回到元素

[我对jsFiddle](http://jsfiddle.net/beLMf/6/)进行了更改，还有一个捕获光标位置的功能，我想用它来解决您的问题。它只是输出到 console.log，你可以删除它。

# php - jquery：给用户一个“无数据”消息，而不是打印一个空图

> ID：10776108
> 
> 赞同：1
> 
> 时间：2012-05-27T18:03:49.683
> 
> 标签：php, jquery, mysql, sql, charts

我有一个基于 MySQL 数据绘制图表的代码。但是，我想通过以下方式改进此代码 - 如果 MySQL 结果集为空，那么我想显示一条文本消息（例如“无输入数据”）而不是图表。

我正在寻找一种更新方法，`mainFunc.php`以便它可以读取输出`mainChart.php`并显示图表或文本消息。如何以最简单的方式做到这一点？

**我的图表.php**

```
include_once '../include/DatabaseConnector.php';    
$query1="SELECT xxx, yyy FROM mySQLTable;";
$result1=DatabaseConnector::ExecuteQueryArray($query1);
$num_results = mysql_num_rows($result1); 
if ($num_results > 0){ 
// do something
echo 1;
}
else echo 0; 
```

**主函数.php**

```
<div class="scrollbar" id="chart">
    <img src="charts/myChart.php">
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T18:27:30.637

关于 jpgraph 的棘手部分是它返回一个图像文件，所以你不能只在 jpgraph 文件中回显一些文本。你有两个选择：

1.  检测 mygraph.php 之外缺少的结果，并避免首先调用 mygraph.php。
2.  使用 JPgraph 的工具来编写（绘制）文本，以制作显示“未找到结果”的图像。

### 未检测到结果并跳过图表

要执行 #1，只需将查询代码从 mygraph.php 中提取出来（如果需要，将其放入不同的包含文件中）。查询后，统计结果。如果为零，则返回一些文本并将其写入页面。如果有结果，请像现在一样返回一个 img 标签，并将其写入页面。

现在，由于查询不再在 mygraph.php 中完成，您如何将数据获取到图表中？最简单的方法就是在查询字符串中传递它，mygraph.php 可以从`$_GET`. 查看[有关将数据传递到 jpgraph 的文档以](http://jpgraph.net/download/manuals/chunkhtml/ch13s03.html)获取更多选项。

### 绘制“无数据”消息

[这是 jpgraph 网站上的一些代码](http://jpgraph.net/download/manuals/chunkhtml/example_src/textpalignex1.html)，向您展示了如何创建由文本消息组成的图像。我使用的服务器没有安装 truetype 支持，这会使 jpgraph 的文本看起来有点不稳定，因此请确保它在您的生产服务器上看起来令人满意。

# java - Spring - bean 生命周期

> ID：10776110
> 
> 赞同：2
> 
> 时间：2012-05-27T18:04:26.063
> 
> 标签：java, spring

我的 Spring 应用程序中有几个已配置的 bean。所有的豆子都按照它应该的方式工作并完成他们的工作。

问题是，我实现了 a`BeanPostProcessor`并注意到它没有被某些 bean 调用，（也`postProcessAfterInitialization`没有`postProcessBeforeInitialization`）。可能是什么原因 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T02:22:27.283

我不知道它是否相关，但参考手册说：

> **BeanPostProcessors 和 AOP 自动代理**
> 
> 实现 BeanPostProcessor 接口的类是特殊的，因此容器对它们的处理方式不同。所有 BeanPostProcessor 及其直接引用的 bean 将在启动时实例化，作为 ApplicationContext 特殊启动阶段的一部分，然后所有这些 BeanPostProcessor 将以排序方式注册 - 并应用于所有其他 bean。由于 AOP 自动代理是作为 BeanPostProcessor 本身实现的，因此没有 BeanPostProcessor 或直接引用的 bean 有资格进行自动代理（因此不会将方面“编织”到其中。
> 
> 对于任何此类 bean，您应该看到一条信息日志消息：“Bean 'foo' 不符合所有 BeanPostProcessors 的处理条件（例如：不符合自动代理条件）”。

所以，也许你的 bean 正在被代理。

# c++ - 试图挂钩一个窗口的窗口过程。SetWindowsHookEx 失败返回 NULL HHOOK 并且 GetLastError 返回错误代码 126

> ID：10776111
> 
> 赞同：2
> 
> 时间：2012-05-27T18:04:26.810
> 
> 标签：c++, winapi, setwindowshookex

## 概括

我正在创建一个简单的应用程序，它允许用户选择一个包含顶级窗口的进程。用户首先键入本机 DLL（不是托管 DLL）的路径。然后用户键入将在挂钩过程中调用的方法的名称。该方法不能返回值并且必须是无参数的。然后它们是一个用于挂钩的按钮。

# 问题

我能够检索执行挂钩的库的模块句柄。此外，我还能够获取用户想要使用的模块句柄库，其中包含他/她想要挂钩的方法。另外，我能够接收用户想要挂钩的方法等的程序地址。

*换句话说，它们不在返回的无效句柄上。除了挂钩的手柄 (HHOOK)*

但是 SetWindowsHookEx 返回一个 NULL HHOOK 并且 GetLastError 返回错误代码 126 (ERROR_NO_MOD_FOUND)。

# 关于为什么我得到 ERROR_MOD_NOT_FOUND 的可能理论

*   全局钩子的数量是有限制的，因为我在某个地方读到了一个在钩子时遇到同样错误的人。
*   我没有得到将执行挂钩的 DLL 的正确模块句柄。但是话又说回来，我尝试了许多不同的方法来获取库 HMODULE/HINSTANCE 但都失败并出现相同的错误。

# WinHooker.cpp

```
#include "winhooker.h"
HMODULE GetCurrentModule()
{ 
  HMODULE hModule = NULL;
  GetModuleHandleEx(
    GET_MODULE_HANDLE_EX_FLAG_FROM_ADDRESS,
    (LPCTSTR)GetCurrentModule,
    &hModule);

  return hModule;
}
LRESULT (WINAPI hookProc)(int nCode, WPARAM wParam, LPARAM lParam);
void recievedCallback(WIN32Hooker* hooker);
WIN32Hooker* current;

            WIN32Hooker::WIN32Hooker(HINSTANCE* hInstance, Callback callback)
            {
                if (!hInstance)
                {
                    HMODULE hModule = GetCurrentModule();
                    hInstance = &hModule;
                }
                this->callback = callback;
                this->hInstance = hInstance;
                return;
            }
            void WIN32Hooker::Hook(DWORD threadToHook)
            {
                recievedCallback(this);
                this->hhk = SetWindowsHookEx(WH_CALLWNDPROC, hookProc, *this->hInstance, threadToHook);
                DWORD errorCode = GetLastError(); // 126 ERROR_MOD_NOT_FOUND
                return;
            }
            void WIN32Hooker::NextHook(int nCode, WPARAM wParam, LPARAM lParam)
            {
                callback();
                CallNextHookEx(this->hhk, nCode, wParam, lParam);
                return;
            }
            void WIN32Hooker::Free()
            {
                UnhookWindowsHookEx(this->hhk);
                return;
            }

LRESULT (WINAPI hookProc)(int nCode, WPARAM wParam, LPARAM lParam)
{
    current->NextHook(nCode, wParam, lParam);
    return 0;
}
void recievedCallback(WIN32Hooker* hooker)
{
    current = hooker;
}
extern "C" WIN32Hooker* hookerMalloc(HINSTANCE* hInstance, Callback callback)
{
    return new WIN32Hooker(hInstance, callback);
} 
```

# 测试.cpp

```
#include <Windows.h>
extern "C" void sendMessage(void)
{
    MessageBox(NULL, L"Test", L"Test", MB_ICONINFORMATION);
} 
```

# 主要代码

```
// Window Hooker Bytes.cpp : Defines the entry point for the application.
//

#include "stdafx.h"
#include "Window Hooker Bytes.h"
#include "processes.h"
#include "button.h"
#include "edit.h"
#include "listbox.h"
#include "/Users/FatalisProgrammer/Documents/Visual Studio 2010/Projects/Window Hooker Bytes/WindowHookerLib/winhooker.h"
#define MAX_LOADSTRING 100
using namespace Processes;
using namespace Controls;
void Delete(); // Delete proto-type
void windowListCallback(map<HWND, wstring>* list); // Callback proto-type
// Global Variables:
HINSTANCE hInst;                                // current instance
TCHAR szTitle[MAX_LOADSTRING];                  // The title bar text
TCHAR szWindowClass[MAX_LOADSTRING];            // the main window class name
Button* hookButton;
Edit* dllPathEdit;
Edit* methodNameEdit;
ListBox* windowList;
ProcessEnumerator* processEnumerator;
map<HWND, wstring> mapList;
// Forward declarations of functions included in this code module:
ATOM                MyRegisterClass(HINSTANCE hInstance);
BOOL                InitInstance(HINSTANCE, int);
LRESULT CALLBACK    WndProc(HWND, UINT, WPARAM, LPARAM);
INT_PTR CALLBACK    About(HWND, UINT, WPARAM, LPARAM);

int APIENTRY _tWinMain(HINSTANCE hInstance,
                     HINSTANCE hPrevInstance,
                     LPTSTR    lpCmdLine,
                     int       nCmdShow)
{
    UNREFERENCED_PARAMETER(hPrevInstance);
    UNREFERENCED_PARAMETER(lpCmdLine);

    // TODO: Place code here.
    MSG msg;
    HACCEL hAccelTable;

    // Initialize global strings
    LoadString(hInstance, IDS_APP_TITLE, szTitle, MAX_LOADSTRING);
    LoadString(hInstance, IDC_WINDOWHOOKERBYTES, szWindowClass, MAX_LOADSTRING);
    MyRegisterClass(hInstance);

    // Perform application initialization:
    if (!InitInstance (hInstance, nCmdShow))
    {

        return FALSE;
    }

    hAccelTable = LoadAccelerators(hInstance, MAKEINTRESOURCE(IDC_WINDOWHOOKERBYTES));

    // Main message loop:
    while (GetMessage(&msg, NULL, 0, 0))
    {
        if (!TranslateAccelerator(msg.hwnd, hAccelTable, &msg))
        {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }
    }

    return (int) msg.wParam;
}

//
//  FUNCTION: MyRegisterClass()
//
//  PURPOSE: Registers the window class.
//
//  COMMENTS:
//
//    This function and its usage are only necessary if you want this code
//    to be compatible with Win32 systems prior to the 'RegisterClassEx'
//    function that was added to Windows 95\. It is important to call this function
//    so that the application will get 'well formed' small icons associated
//    with it.
//
ATOM MyRegisterClass(HINSTANCE hInstance)
{
    WNDCLASSEX wcex;

    wcex.cbSize = sizeof(WNDCLASSEX);

    wcex.style          = CS_HREDRAW | CS_VREDRAW;
    wcex.lpfnWndProc    = WndProc;
    wcex.cbClsExtra     = 0;
    wcex.cbWndExtra     = 0;
    wcex.hInstance      = hInstance;
    wcex.hIcon          = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_WINDOWHOOKERBYTES));
    wcex.hCursor        = LoadCursor(NULL, IDC_ARROW);
    wcex.hbrBackground  = (HBRUSH)(COLOR_WINDOW+1);
    wcex.lpszMenuName   = MAKEINTRESOURCE(IDC_WINDOWHOOKERBYTES);
    wcex.lpszClassName  = szWindowClass;
    wcex.hIconSm        = LoadIcon(wcex.hInstance, MAKEINTRESOURCE(IDI_SMALL));

    return RegisterClassEx(&wcex);
}

//
//   FUNCTION: InitInstance(HINSTANCE, int)
//
//   PURPOSE: Saves instance handle and creates main window
//
//   COMMENTS:
//
//        In this function, we save the instance handle in a global variable and
//        create and display the main program window.
//
BOOL InitInstance(HINSTANCE hInstance, int nCmdShow)
{
   HWND hWnd;

   hInst = hInstance; // Store instance handle in our global variable

   hWnd = CreateWindow(szWindowClass, szTitle, WS_MINIMIZEBOX | WS_CAPTION | WS_SYSMENU, CW_USEDEFAULT, 0, 800 / 2, 480 / 2, NULL, NULL, hInstance, NULL);
   hookButton = new Button(hWnd, 120, L"Hook Method From DLL!", 5, (480 / 2) - 24 - 24 - 24 - 6, (800 / 2) - 15, 24);
   hookButton->show(hInst);
   dllPathEdit = new Edit(hWnd, 169, 5, 5, (800 / 2) - 15, 24);
   dllPathEdit->show(hInst);
   dllPathEdit->setWatermarkText(L"Enter Path Of A Native DLL.");
   methodNameEdit = new Edit(hWnd, 256, 5, (5 * 2) + 24, (800 / 2) - 15, 24);
   methodNameEdit->show(hInst);
   methodNameEdit->setWatermarkText(L"Enter Method (Must Return Void And Be Parameterless)");
   methodNameEdit->setFont(L"Times", 16);
   dllPathEdit->setFont(L"Times", 16);
   hookButton->setFont(L"Times", 16);
   windowList = new ListBox(hWnd, 333, 5, (5 * 8) + 24, (800 / 2) - 15, (124 / 2) + 24);
   windowList->show(hInst);
   windowList->setFont(L"Times", 16);
   hookButton->setUACShield();
   if (!hWnd)
   {
      return FALSE;
   }
   processEnumerator = new ProcessEnumerator();
   processEnumerator->enumerateProcesses(windowListCallback);
   ShowWindow(hWnd, nCmdShow);
   UpdateWindow(hWnd);

   return TRUE;
}

//
//  FUNCTION: WndProc(HWND, UINT, WPARAM, LPARAM)
//
//  PURPOSE:  Processes messages for the main window.
//
//  WM_COMMAND  - process the application menu
//  WM_PAINT    - Paint the main window
//  WM_DESTROY  - post a quit message and return
//
//
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    int wmId, wmEvent;
    PAINTSTRUCT ps;
    HDC hdc;

    switch (message)
    {
    case WM_COMMAND:
        wmId    = LOWORD(wParam);
        wmEvent = HIWORD(wParam);

        if (wmId == hookButton->getID())
        {
            HMODULE libraryModule = LoadLibrary(L"WindowHookerLib.dll");
            typedef WIN32Hooker* (*HookerMalloc)(HINSTANCE* hInstance, Callback callback);
            HookerMalloc hookerMalloc =  (HookerMalloc)GetProcAddress(libraryModule, "hookerMalloc");
            DWORD errorCode = GetLastError();
            HMODULE libraryToHookModule = LoadLibrary(dllPathEdit->getText());
            if (!libraryToHookModule || !libraryModule)
            {
                MessageBox(hWnd, L"Error: Library That Contains The Method To Hook Or The WindowHookerLib.dll Does Not Exist!\nMake Sure WindowHookerLib.dll Is In The Current Working Directory!", L"Error In Application!", MB_ICONERROR);
            }
            else
            {
                typedef void (__stdcall *Method)(void);
                char* methodName = new char[wcslen(methodNameEdit->getText()) * 2];
                wcstombs(methodName, methodNameEdit->getText(), wcslen(methodNameEdit->getText()) * 2);
                Method method = (Method)GetProcAddress(libraryToHookModule, methodName);
                if (!hookerMalloc || !method)
                {
                    MessageBox(hWnd, L"Error: The Method To Hook Does Not Exist Or The Method To Initiate The Hooker Is Not Available!", L"Error In Application", MB_ICONERROR);
                }
                else
                {
                    WIN32Hooker* hooker = hookerMalloc(NULL, method);
                    DWORD pID;
                    int selectedItemIndex = windowList->getSelectedIndex();
                    vector<HWND> v;
                    for(map<HWND,wstring>::iterator it = mapList.begin(); it != mapList.end(); ++it) 
                    {
                        v.push_back(it->first);
                    }
                    GetWindowThreadProcessId(v[selectedItemIndex], &pID);
                    if (pID >= 0)
                    {

                        hooker->Hook(pID);
                    }
                    else
                    {
                        MessageBox(hWnd, L"Error Could Not Retrieve Process ID!", L"Error In Application", MB_ICONERROR);
                    }

                }
                delete methodName;
            }
        }

        // Parse the menu selections:
        switch (wmId)
        {

        case IDM_ABOUT:
            DialogBox(hInst, MAKEINTRESOURCE(IDD_ABOUTBOX), hWnd, About);
            break;
        case IDM_EXIT:
            DestroyWindow(hWnd);
            break;
        default:
            return DefWindowProc(hWnd, message, wParam, lParam);
        }
        break;
    case WM_PAINT:
        hdc = BeginPaint(hWnd, &ps);
        // TODO: Add any drawing code here...
        EndPaint(hWnd, &ps);
        break;
    case WM_DESTROY:
        Delete();
        PostQuitMessage(0);
        break;
    default:
        return DefWindowProc(hWnd, message, wParam, lParam);
    }
    return 0;
}

// Message handler for about box.
INT_PTR CALLBACK About(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)
{
    UNREFERENCED_PARAMETER(lParam);
    switch (message)
    {
    case WM_INITDIALOG:
        return (INT_PTR)TRUE;

    case WM_COMMAND:
        if (LOWORD(wParam) == IDOK || LOWORD(wParam) == IDCANCEL)
        {
            EndDialog(hDlg, LOWORD(wParam));
            return (INT_PTR)TRUE;
        }
        break;
    }
    return (INT_PTR)FALSE;
}

void Delete()
{
    delete dllPathEdit;
    delete hookButton;
    delete methodNameEdit;
    delete windowList;
    processEnumerator->free();
    delete processEnumerator;
    return;
}
void windowListCallback(map<HWND, wstring>* list)
{
    mapList = *list;
    vector<wstring> v;
    for(map<HWND,wstring>::iterator it = mapList.begin(); it != mapList.end(); ++it) 
    {
        v.push_back(it->second);
    }
    for each(wstring item in v)
    {
        windowList->addItem(item);
    }
    return;
} 
```

# 结论

任何帮助，将不胜感激。如果我做错了什么，请随时指出。这个项目是为了学习目的，所以告诉我需要修复什么，或者任何提示都会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T18:16:59.400

在这段代码中：

```
HMODULE hModule = GetCurrentModule();
hInstance = &hModule; 
```

您正在将局部变量的地址分配给`hInstance`. 当在调用中取消引用时，`SetWindowsHookEx`您将获得虚假值。

在整个代码中，不要使用指向 an 的指针`HINSTANCE`，只需使用普通的`HINSTANCE`.

# java - 构建项目错误

> ID：10776112
> 
> 赞同：0
> 
> 时间：2012-05-27T18:04:30.653
> 
> 标签：java, build, netbeans-7

我为朋友做了一个小项目，当我在 NetBeans 的电脑中构建它时，出现以下错误：

```
 Not copying library D:\share on eee\GeorgeApp\${libs.excel.classpath} , it can't be read.
 Not copying library D:\share on eee\GeorgeApp\${libs.MySQLDriver_2.classpath} , it can't be read.
 Not copying library D:\share on eee\GeorgeApp\${libs.Jcalendar.classpath} , it can't be read.
 Not copying library D:\share on eee\GeorgeApp\${libs.AutoComplete.classpath} , it can't be read. 
```

我也使用 lib 文件夹创建的 jar 文件，并在我的电脑上执行它们，在 ubuntu 下运行。效果很好。在我妻子的电脑上，女巫运行窗口也运行得很好。当我尝试在朋友的电脑上运行它时，我收到一个错误，提示找不到主类。它与我在构建过程中所犯的错误有关吗？

在我的朋友电脑中，我尝试安装了 JRE 甚至 JDK ...但什么也没有。然后我在他的电脑上安装了 Netbeans 并再次构建了该项目，但什么也没有……即使在 Netbeans 中也可以正常运行。

这些是我尝试运行它时得到的

```
 unknown@unknown-pc:~$ java -jar        "/home/unknown/NetBeansProjects/ProtocolProject/GeorgeApp/dist/GeorgeApp.jar"
    Exception in thread "main" java.lang.UnsupportedClassVersionError:  georgeapp/GeorgeApp :             Unsupported major.minor version 51.0
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    Could not find the main class: georgeapp.GeorgeApp. Program will exit.
    unknown@unknown-pc:~$ 
```

知道可能是什么问题，当我构建项目时如何避免这些错误出现在我的电脑中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T20:50:40.020

当您尝试在 X > Y 的 JDK/JRE Y 下运行使用 JDK X 编译的类时，java.lang.UnsupportedClassVersionErron 会出现问题。尝试在您朋友的 PC 上安装与您相同的 JRE/JDK。

您的构建错误可能是因为属性未正确替换为这些字符串：eee\GeorgeApp\${libs.excel.classpath}。

# jquery - ASP.net WebMethod 正在返回完整的页面内容而不是 JSON 数据

> ID：10776113
> 
> 赞同：3
> 
> 时间：2012-05-27T18:04:33.903
> 
> 标签：jquery, asp.net, .net, ajax, json

我正在尝试一个文本框的自动完成功能，我正在向一个返回完整页面内容而不是实际数据的 web 方法发送一个 get 请求，如下所示。

![在此处输入图像描述](../Images/b545afe128eec7bf96226eae9f011ee0.png)

我正在使用以下 C# 代码，而我所有其他带有 Post 请求的方法都可以正常工作

```
[WebMethod]
        [ScriptMethod(UseHttpGet=true,ResponseFormat=ResponseFormat.Json)]
        public static string GetListOfUsers()
        {
            return "{'0701414001','0701414002'}";
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T21:37:57.730

我认为问题出在您的参数中：您正在调用`Email.aspx/GetListOfUusers?query=lkkjlk`但您`public static string GetListOfUsers()`不包含参数名称。

尝试更改为：

```
public static string GetListOfUsers(string query)
{
...
} 
```

我也会尝试删除它：`ResponseFormat=ResponseFormat.Json`看看它是否会改变任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:29:52.840

我认为这可以通过创建 ashx 处理程序 [http://codeasp.net/articles/asp-net/212/using-jquery-autocomplete-in-asp-net在本文中提到的以下最简单的方式来实现](http://codeasp.net/articles/asp-net/212/using-jquery-autocomplete-in-asp-net)

文章演示 [http://codeasp.net/assets/demos/articles/using-jquery-autocomplete-in-asp-net/using-jquery-autocomplete-in-asp-net-multiple.aspx](http://codeasp.net/assets/demos/articles/using-jquery-autocomplete-in-asp-net/using-jquery-autocomplete-in-asp-net-multiple.aspx)

# php - 实时从mysql获取数据

> ID：10776114
> 
> 赞同：2
> 
> 时间：2012-05-27T18:04:34.890
> 
> 标签：php, jquery, mysql, websocket

我在 Stack Overflow 上遇到了一些关于如何实时获取 MySQL 数据的问题。有人建议使用 websockets，也有人建议使用 AJAX。我尝试了 AJAX，它可以工作，但是使用 firebug，我看到客户端每“n”秒发出一次请求。我用 Facebook 做了一个类似的测试，我意识到客户端只有在数据实际添加到数据库时才会发出请求。

我想知道使用 AJAX 是否会因请求过多而使 My​​SQL 服务器过载，考虑到用户 A 可能需要查看来自 100 多个用户的更新，而这 100 个用户需要查看来自另外 100 多个用户的更新，而使用 websockets 可能意味着请求更少。

这可以通过 websockets 实现吗？有没有人已经测试过[http://nodejs.org](http://nodejs.org)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:08:17.143

你看过 Socket.IO 吗？[http://socket.io/](http://socket.io/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T19:28:47.460

可能是针对此类负载和社交更新，您可能希望研究 NoSQL 并在其上进行中继，而不是 MySQL 或任何其他 RDBMS。

# xml - XMl 新手 - 如何从另一个 XML 返回特定元素？

> ID：10776117
> 
> 赞同：1
> 
> 时间：2012-05-27T18:05:04.033
> 
> 标签：xml, xslt

从天气提要中，我在 XSLT 片段中获得了这个元素：

```
<xsl:value-of select="data/current_condition/weatherCode"/> 
```

这将返回一个数字，例如 122

我有另一个 XML 列出了天气代码详细信息，例如：

```
<condition>
<code>122</code>
<description>Overcast</description>
<day_icon>wsymbol_0004_black_low_cloud</day_icon>
<night_icon>wsymbol_0004_black_low_cloud</night_icon>
</condition>
<condition>
<code>119</code>
<description>Cloudy</description>
<day_icon>wsymbol_0003_white_cloud</day_icon>
<night_icon>wsymbol_0004_black_low_cloud</night_icon>
</condition> 
```

那么如何动态获取例如代码 122 的描述、图标等呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T20:01:19.650

```
<xsl:variable name="weather_desc" select="document('2.xml')/root"/>

<xsl:variable name="weather_code" select="data/current_condition/weatherCode"/>
<xsl:value-of select="$weather_desc/condition[code=$weather_code]/description"/> 
```

# c# - EF中的工作单元模式是什么？

> ID：10776121
> 
> 赞同：39
> 
> 时间：2012-05-27T18:06:07.127
> 
> 标签：c#, .net, entity-framework, design-patterns

我正在学习 EF 并且看过很多例子，在学习过程中我开始了解使用存储库和工作单元模式。我知道为什么要使用存储库，但我并不真正了解工作单元。

没有理解会使 DAL 的理解变得困难。请指导我。

谢谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-27T18:09:06.243

DataContext 或 ObjectContext 是工作单元。

因此，您的 DAL 将保存、删除和检索对象，而您的 DataContext/ObjectContext 将跟踪您的对象、管理事务并应用更改。

这是一个示例**，只是为了说明解决方案的想法**。

```
using(var context = new ObjectContext()) { // Unit of Work
    var repo = new ProductRepository(context);
    var product = repo.GetXXXXXXX(...);
    ...

    // Do whatever tracking you want to do with the object context. For instance:
    // if( error == false) { 
    //     context.DetectChanges();
    //     context.SaveChanges(SaveOptions.AcceptAllChangesAfterSave);
    // }
} 
```

您的存储库将如下所示：

```
public abstract class Repository {

    public Respository(ObjectContext context){
        CurrentContext = context;
    }

    protected ObjectContext CurrentContext { get; private set; } 
}

public class ProductRespository : Repository {
    public ProductRespository(ObjectContext context) : base(context){
    }

    public Product GetXXXXXX(...){
        return CurrentContext... ; //Do something with the context
    }
} 
```

另一种方法是将工作单元（对象上下文）全局放置：

您需要定义您的工作单元范围。对于此示例，它将是一个 Web 请求。在现实世界的实现中，我会为此使用依赖注入。

```
public static class ContextProvider {

    public static ObjectContext CurrentContext {
        get { return HttpContext.Items["CurrentObjectContext"];
    }

    public static void OpenNew(){
        var context = new ObjectContext();
        HttpContext.Items["CurrentObjectContext"] = context; 
    }

    public static void CloseCurrent(){
        var context = CurrentContext;
        HttpContext.Items["CurrentObjectContext"] = null;
        // Do whatever tracking you want to do with the object context. For instance:
        // if( error == false) { 
        //     context.DetectChanges();
        //     context.SaveChanges(SaveOptions.AcceptAllChangesAfterSave);
        // }
        context.Dispose();
    }
} 
```

在此示例中，ObjectContext 是工作单元，它将存在于当前请求中。在您的全局 asax 中，您可以添加：

```
protected void Application_BeginRequest(object sender, EventArgs e){
    ContextProvider.OpenNew();
}

protected void Application_EndRequest(object sender, EventArgs e){
    ContextProvider.CloseCurrent();
} 
```

在您的存储库中，您只需调用`ContextProvider.CurrentContext`

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-05-19T15:49:33.080

企业软件开发中最常见的设计模式之一是**工作单元**。根据 Martin Fowler 的说法，[工作单元模式](http://martinfowler.com/eaaCatalog/unitOfWork.html)“维护受业务事务影响的对象列表，并协调更改的写入和并发问题的解决”。

**工作单元模式不一定是您自己明确构建的东西**，但该模式出现在我所知道的几乎所有持久性工具中。NHibernate 中的 ITransaction 接口、LINQ to SQL 中的 DataContext 类和实体框架中的 ObjectContext 类都是工作单元的示例。就此而言，**古老的 DataSet 可以用作工作单元**。

更多详细信息请点击[这里](https://msdn.microsoft.com/en-us/magazine/dd882510.aspx)阅读这篇文章，这是一篇很好的文章。

有关在 ASP.NET MVC（MVC 4 和 EF 5）应用程序中实现存储库和工作单元模式的教程（10 个中的 9 个），请单击[此处](http://www.asp.net/mvc/overview/older-versions/getting-started-with-ef-5-using-mvc-4/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)

EF 6 和 MVC 5 教程请点击[这里](http://www.asp.net/mvc/overview/getting-started/getting-started-with-ef-using-mvc/advanced-entity-framework-scenarios-for-an-mvc-web-application#repo)

我希望这会有所帮助，它帮助了我！

![在此处输入图像描述](../Images/4a937111d80c0a0b1a6d574bc08cf6ad.png)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-05-27T18:09:13.287

> ## 工作单元
> 
> *维护受业务事务影响的对象列表，并协调更改的写入和并发问题的解决。*
> 
> ![在此处输入图像描述](../Images/63349db2b845e659c1de799bb847df4e.png)
> 
> 当您将数据导入和导出数据库时，跟踪您所做的更改非常重要。否则，该数据将不会被写回数据库。同样，您必须插入您创建的新对象并删除您删除的任何对象。
> 
> 您可以在每次更改对象模型时更改数据库，但这可能会导致大量非常小的数据库调用，最终会非常慢。此外，它要求您为整个交互打开一个事务，如果您有一个跨越多个请求的业务事务，这是不切实际的。如果您需要跟踪已读取的对象以避免不一致的读取，情况会更糟。
> 
> 工作单元跟踪您在可能影响数据库的业务事务期间所做的一切。完成后，它会计算出根据您的工作更改数据库需要做的所有事情。

[http://martinfowler.com/eaaCatalog/unitOfWork.html](http://martinfowler.com/eaaCatalog/unitOfWork.html)

# extjs - 使用缓冲存储时我应该使用远程过滤/排序/分组吗？如果是，为什么？

> ID：10776123
> 
> 赞同：0
> 
> 时间：2012-05-27T18:06:15.437
> 
> 标签：extjs, extjs4.1

我试图了解远程和本地排序/过滤/分组之间的区别。我可以毫无问题地使用它们吗？我想在带有缓冲的“无限”表上使用它们。

感谢您提供任何信息，因为实际上我正在实施他们的远程版本，但正在浪费我的时间。如果我可以使用它们的本地版本会更好。

有什么优点/缺点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:49:35.987

我不明白如何在无限商店中使用本地排序和过滤。我的意思是，你可以这样做，但你的用户不会喜欢结果。

是的，进行远程排序和过滤比较棘手，但这一切都非常可行。我们在我们的项目中使用我们无法完全加载的商店。如果您有任何具体问题，我很乐意提供帮助。

# php - 在 PHP 中编辑 XLSX

> ID：10776124
> 
> 赞同：4
> 
> 时间：2012-05-27T18:06:40.630
> 
> 标签：php, excel, xlsx

嗨，有一种方法可以在 PHP 中编辑上传的 Excel (xlsx) 文档。文档非常简单（带有项目名称、价格、数量的表格）。我想 PHPExcel 只能读取文档但不能编辑？有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T18:09:33.400

您也可以使用 PHPExcel 来编辑文档，查看这些线程以获取更多信息：

*   [读取 - 编辑 - 写入 Excel 文件](http://phpexcel.codeplex.com/discussions/261777)
*   [PHPExcel用多个工作表修改现有的.xlsx文件](https://stackoverflow.com/questions/7594444/phpexcel-modify-existing-xlsx-file-with-multiple-worksheet)
*   [如何使用 PHPExcel 打开 Excel 文件进行读写？](https://stackoverflow.com/questions/8797103/how-to-open-an-excel-file-with-phpexcel-for-both-reading-and-writing)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T21:09:13.090

[OpenTBS](http://www.tinybutstrong.com/opentbs.php)可以使用模板技术编辑 XLSX 文档。

它是一个纯 PHP 库。

顺便说一句，它还可以编辑 DOCX、PPTX、ODT、ODS、...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-26T23:43:49.517

请尝试这种方法。例如，我想编辑/更新工作表（sheet1）中的列（expiryDate）。

```
$localFilePath = "C:/xampp/htdocs/Projects/abc.xlsx";

$reader = \PhpOffice\PhpSpreadsheet\IOFactory::createReader('Xlsx');
$reader->setLoadSheetsOnly(["sheet1"]);
$spreadsheet = $reader->load($localFilePath);
$worksheet = $spreadsheet->setActiveSheetIndex(0);
$column = NULL;
foreach($worksheet->getRowIterator() as $index => $row) {
    $cellIterator = $row->getCellIterator();
    $cellIterator->setIterateOnlyExistingCells(FALSE); // This loops through all cells,
    foreach($cellIterator as $subIndex => $cell) {
        $value = $cell->getValue();
        if($index == 1 && $value == "expiryDate"){
           $column = $subIndex;   
        }
        if((empty($value) || $value == "") && $column == $subIndex && $index != 1){
           $cell->setValue("2050-12-31 00:00:00");
        }
    }
}
$writer = \PhpOffice\PhpSpreadsheet\IOFactory::createWriter($spreadsheet, "Xlsx");
$writer->save($localFilePath); 
```

# node.js - 需要多次运行 npm update

> ID：10776130
> 
> 赞同：2
> 
> 时间：2012-05-27T18:07:36.993
> 
> 标签：node.js, npm

在所有软件包完全更新之前必须运行`npm update`多次是否正常？我运行了一次，当我启动节点时，它崩溃了。然后我跑了`npm outdated`，发现有些包还没有更新。`npm update`在所有软件包都是最新的之前，我必须再次运行两次

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:46:42.233

这不应该发生——也许您的 npm 版本已损坏或过时。如果您使用的是 Homebrew，则可以运行（在命令行中）`brew update`、然后`brew remove npm`、然后`brew install npm`重新安装所有内容。希望这将使一切恢复正常运行！

# php - 如何开始在 php/yii 应用程序中记录用户活动？

> ID：10776131
> 
> 赞同：0
> 
> 时间：2012-05-27T18:07:38.457
> 
> 标签：php, javascript, logging, yii

我正在建立一个包含音乐教学资源和练习的网站。我希望用户能够登录并跟踪他们完成了哪些课程/练习。为此，我需要在网站上记录各种事件，例如查看课程或回答练习题。

其中一些事件将在页面加载时发生 - 其他可能不会 - 例如视频课程已完成。因此，我猜测最好的方法是使用某种 javascript ajax 调用，它可以向 Event db 表中添加一行。

是否有这样做的框架/既定方法 - 如果没有，我应该记住什么以确保此日志记录不会以任何方式减慢用户的体验？

我希望最终我的网站能够扩展，并且想知道现在是否是尝试使用 nosql 方法存储所有这些事件的时候了。还是继续使用 SQL 直到我遇到 SQL 成为问题的阶段会更好？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:12:58.060

回答我自己的问题。. . 我将从尝试 log4js ( [http://log4js.berlios.de/](http://log4js.berlios.de/) ) 开始。这允许将 Ajax 事件消息发送回服务器。

# c# - 如何向元素添加键？

> ID：10776132
> 
> 赞同：0
> 
> 时间：2012-05-27T18:07:56.703
> 
> 标签：c#, xml

我使用 XmlWriter 在 XML 文件中写入一个元素

```
using (XmlWriter writer = XmlWriter.Create("test.x))
{
   writer.WriteStartElement("Order");
   writer.WriteEndElement();
} 
```

它将以下内容写入文件

```
<Order>
</Order> 
```

但是，我想写以下内容

```
<Order key="Name">
</Order> 
```

[WriteStartElement](http://msdn.microsoft.com/en-us/library/t8t5yhhk.aspx)只接受一个参数：

```
public void WriteStartElement(
string localName
) 
```

所以我想我必须使用不同的功能，但我找不到哪个。那么我可以向元素添加键吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T18:09:25.810

您需要添加一个名为的属性`key`（因为这似乎是您想要添加的 -`Order`元素的属性）：

```
using (XmlWriter writer = XmlWriter.Create("test.x))
{
   writer.WriteStartElement("Order");
   writer.WriteAttributeString("key", "value");
   writer.WriteEndElement();
} 
```

见[`WriteAttributeString`](http://msdn.microsoft.com/en-us/library/system.xml.xmlwriter.writeattributestring.aspx)。

# jquery - 使用 jquery 获取 youtube 播放列表上的视频数量？

> ID：10776133
> 
> 赞同：2
> 
> 时间：2012-05-27T18:07:57.593
> 
> 标签：jquery, ajax, youtube, playlist

我想知道播放列表（youtube）上的视频编号这是 json 播放列表的示例

> [http://gdata.youtube.com/feeds/api/playlists/80D426344F3DE8B6?v=2&alt=json](http://gdata.youtube.com/feeds/api/playlists/80D426344F3DE8B6?v=2&alt=json)

编码 ：

```
var playlistURL = 'http://gdata.youtube.com/feeds/api/playlists/'+config.playlist+'?v=2&alt=json&callback=?';
var youURL = 'http://www.youtube.com/watch?v=';

//retrieve json
jQuery.getJSON(playlistURL, function(data) {

    jQuery.each(data.feed.entry, function(i, item) {
        var feedTitle = item.title.jQueryt;
        var feedURL = item.link[1].href;
        var fragments = feedURL.split("/");
        var videoID = fragments[fragments.length - 2];
        var url = youURL + videoID;
        var thumb = "http://img.youtube.com/vi/"+ videoID +"/default.jpg";
            var videosCount = ??????

    });
}); 
```

感谢先进

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T18:11:52.820

播放列表中的视频总数存储在名为 的跨度类中`item-count`。

```
var $data = $('<div>').html(data);
var videosCount = $data.find('.item-count'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T18:54:22.953

答案是：data.feed.entry.length

# javascript - 使 jQuery UI 可拖动到窗口外

> ID：10776138
> 
> 赞同：1
> 
> 时间：2012-05-27T18:08:23.723
> 
> 标签：javascript, jquery, jquery-ui, drag

如何`<div>`使用在当前窗口之外进行可拖动`jQuery UI`？目前，`<div>`当光标离开窗口时，将停止拖动。但是如果我使用`onmousemove`on `window`，它会起作用（使用原生 JavaScript）。

[http://jsfiddle.net/DerekL/u4yKj/](http://jsfiddle.net/DerekL/u4yKj/) - 试试看，你就会明白我的意思。

有没有办法让 jQuery`window`用作事件监听器的目标？因为我希望它继续可拖动到窗口外。谢谢。

* * *

**用作** ![窗户](../Images/373f5f762ee44ae753e709866411967b.png) **目标：**

![在此处输入图像描述](../Images/30e9fe9f7fb5e88f144c9c741066b919.png)

> 好的。

* * *

**使用 jQuery 用户界面：**

![在此处输入图像描述](../Images/899b8b62332d43067daafbd0ab7f7c00.png)

> 出不来！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T18:16:59.987

从我所看到的 - 并非没有更改 UI 可拖动的代码。您可以添加 containement: 'window' 以防止在超出边界时出现粗略的行为，但这是您能做的最好的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T18:27:04.053

您看到的行为是 jsfiddle 在预览窗格旁边拥有其他框架的方式的结果。

正如您在对另一个答案的评论中提到的那样，jquery ui 演示允许在窗口边框之外拖动。这是您自己在移动视图中的 jsfiddle，您会看到它运行良好。

[http://jsfiddle.net/m/vrq/](http://jsfiddle.net/m/vrq/)

看起来答案是，只要你没有周围的框架，它就会做你想做的事......但是一旦你添加它们，draggable 就不会像你的 vanilla js 实现那样工作。

至于自定义此行为，您将获得以下`containment`选项：

[http://jqueryui.com/demos/draggable/#option-containment](http://jqueryui.com/demos/draggable/#option-containment)

# r - R：网格布局标题

> ID：10776139
> 
> 赞同：13
> 
> 时间：2012-05-27T18:08:31.810
> 
> 标签：r

我正在使用 grid 包来显示一组图，如下所示：

```
layout <- grid.layout(2, 4)
pushViewport(viewport(layout = layout))
# print various plots 
```

有没有办法为*整个*网格布局指定一个标题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-27T19:50:19.073

另一种方式：

```
library(gridExtra)
g = rectGrob() # dummy "plot"
grid.arrange(g, g, g, g, ncol=2, top = "Main Title") 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-27T18:56:08.073

基于类似 SO 问题的虚拟示例：[Place title of multiplot panel with ggplot2](https://stackoverflow.com/questions/8615530/place-title-of-multiplot-panel-with-ggplot2)

1.  首先创建一个具有所需行数 + 1 个短标题的布局：

    ```
    pushViewport(viewport(layout = grid.layout(3, 2, heights = unit(c(0.5, 5, 5), "null")))) 
    ```

2.  在那里创建一些图：

    ```
    print(ggplot(mtcars, aes(hp)) + geom_histogram(), vp = viewport(layout.pos.row = 2, layout.pos.col = 1:2))
    print(ggplot(mtcars, aes(wt)) + geom_histogram(), vp = viewport(layout.pos.row = 3, layout.pos.col = 1))
    print(ggplot(mtcars, aes(mpg)) + geom_histogram(), vp = viewport(layout.pos.row = 3, layout.pos.col = 2)) 
    ```

3.  在第一行添加标题：

    ```
    grid.text("MAIN TITLE", vp = viewport(layout.pos.row = 1, layout.pos.col = 1:2)) 
    ```

导致：

![在此处输入图像描述](../Images/61f5cafd7d7e0b448ddf9e7c0111f622.png)

# php - .htaccess URL 重写 2 个变量

> ID：10776140
> 
> 赞同：1
> 
> 时间：2012-05-27T18:08:32.457
> 
> 标签：php, .htaccess, url-rewriting

我在使用 .htaccess 重写 URL 时遇到问题，当 URL 看起来像原始 url 时：[http](http://www.example.com/page.php?id=1&name=test) ://www.example.com/page.php?id=1&name=test 重写后：[http:// /www.example.com/page-1-test](http://www.example.com/page-1-test)它工作正常

但经理要求用连字符而不是空格，所以我这样做了

```
$name = str_replace(" ", "-", $name); 
```

然后我回显 $page_name [http://www.example.com/page.php?id=2&name=test-some-other-text](http://www.example.com/page.php?id=2&name=test-some-other-text)

所以它看起来像这样[http://www.example.com/page-2-test-some-other-text](http://www.example.com/page-2-test-some-other-text)

当我尝试 $_GET['id']; 时，它需要 2-test-some-other-text 作为 id

这是我在 .htaccess 中的重写规则

```
RewriteRule page-(.*)-(.*)$ page.php?id=$1&name=$2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T18:12:08.217

由于 ID 是数字，请尝试以下规则：

```
RewriteRule page-([0-9]+)-(.*)$ page.php?id=$1&name=$2 
```

它只会匹配 ID 的数字，然后在最后的破折号处结束，而不是继续尝试贪婪匹配。

# java - 在类或接口中声明常量的更好地方是什么？

> ID：10776144
> 
> 赞同：4
> 
> 时间：2012-05-27T18:09:14.993
> 
> 标签：java, constants

我总是在考虑将常量放在哪里，例如：

```
public interface MyInterface {
...
    public static final String MY_CONST = "const";
...
} 
```

或在以下课程中：

```
public class MyClass implements MyInterface {
...
    public static final String MY_CONST = "const";
...
} 
```

定义常量的更好地方是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T18:14:20.577

**常量接口**模式可能是不好的做法，但是将常量放在接口中并不会使它成为常量接口。因此，如果您的常量与接口级别相关（与该接口的所有客户端相关），请继续将常量放入接口中。没有错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T18:11:29.090

**永远不要使用接口来定义常量。**

有关详细说明，请参阅 Robert C. Martin 的书 Clean Code，甚至 Josh Bloch 的 Effective Java。在这些作品中详细讨论了这个主题。

主要原因是它们确实会使搜索常量值的人感到困惑。

例如，假设您有一个类 A 实现了具有大量常量的接口。然后，B 还扩展了该类：您也将所有常量委托给子类的命名空间。

这有点像使用大量静态导入，这也有损于可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T18:14:14.293

一个接口可以有很多实现。如果常量表示的值对所有实现都是通用的，在接口上下文中有意义，那么最好在接口中声明它们。

否则，如果值特定于某个类实现及其后代，最好将它们放在类中。

没有对错之分，只是上下文或多或少地被挪用了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T18:19:26.460

不使用接口的另一个原因：从接口导入的常量值嵌入在使用类中。导入关系消失。当接口常量获得不同的值时，编译器不一定会检测到并重新编译该类。

*这有点令人难以置信，实际上是一个可修复的错误。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-12T01:13:58.027

接口旨在定义合同而不是实现，我将常量视为实现的一部分，因为它们对业务逻辑具有一定的价值。

所以在 Class 中定义常量是有意义的。更好的解释和推理阅读这篇文章[在接口或类中定义常量](https://readtorakesh.com/define-constants-in-interface-or-class/)

# node.js - 如何使用 node.js 执行多个 shell 命令？

> ID：10776145
> 
> 赞同：3
> 
> 时间：2012-05-27T18:09:23.507
> 
> 标签：node.js

也许我还没有深入了解异步范式，但我想做这样的事情：

```
var exec, start;
exec = require('child_process').exec;
start = function() {
  return exec("wc -l file1 | cut -f1 -d' '", function(error, f1_length) {
    return exec("wc -l file2 | cut -f1 -d' '", function(error, f2_length) {
      return exec("wc -l file3 | cut -f1 -d' '", function(error, f3_length) {
        return do_something_with(f1_length, f2_length, f3_length);
      });
    });
  });
}; 
```

每次我想添加一个新的 shell 命令时，不断嵌套这些回调似乎有点奇怪。难道没有更好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T20:16:57.517

正如哈维所说，您可以使用 TwoStep。另一方面，我使用[Async JS](https://github.com/caolan/async)库。您的代码可能如下所示：

```
async.parallel([
    function(callback) {
        exec("wc -l file1 | cut -f1 -d' '", function(error, f1_length) {
            if (error)
                return callback(error);
            callback(null, f1_length);
        });
    },
    function(callback) {
        exec("wc -l file2 | cut -f1 -d' '", function(error, f2_length) {
            if (error)
                return callback(error);
            callback(null, f2_length);
        });
    },
    function(callback) {
        exec("wc -l file3 | cut -f1 -d' '", callback);
    }
],
function(error, results) {
    /* If there is no error, then
       results is an array [f1_length, f2_length, f3_length] */
    if (error)
        return console.log(error);
    do_something_with(results);
}); 
```

Async 提供了大量其他选项。阅读文档并尝试一下！请注意，`f3_length`我只是`callback`在调用`exec`. 您也可以通过其他调用来执行此操作（因此您的代码会更短）。我只是想向你展示它是如何工作的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-27T19:04:29.027

我个人在这些情况下使用[TwoStep ：](https://github.com/xavi-/two-step)

```
var TwoStep = require("two-step");
var exec, start;
exec = require('child_process').exec;
start = function() {
  TwoStep(
    function() {
      exec("wc -l file1 | cut -f1 -d' '", this.val("f1_length"));
      exec("wc -l file2 | cut -f1 -d' '", this.val("f2_length"));
      exec("wc -l file3 | cut -f1 -d' '", this.val("f3_length"));
    },
    function(err, f1_length, f2_length, f3_length) {
      do_something_with(f1_length, f2_length, f3_length);
    }
  );
}; 
```

也就是说，那里有大量的流控制库。我鼓励您尝试一下：[https ://github.com/joyent/node/wiki/Modules#wiki-async-flow](https://github.com/joyent/node/wiki/Modules#wiki-async-flow)

# mysql - MySQL 查询：GROUP BY - 获取特定行（不总是第一行）

> ID：10776155
> 
> 赞同：2
> 
> 时间：2012-05-27T18:11:26.577
> 
> 标签：mysql, sql, database, group-by

## 带有示例数据的表“图像”：

```
id | user_id | album_id | sort

1     15         1         1
2     15         1         2
3     15         1         0
4     15         2         0
5     15         2         1
6     15         3         0 
```

## MySQL 查询：

```
SELECT id, sort, COUNT(*) FROM images WHERE user_id=15 GROUP BY album_id 
```

该查询为每个唯一组合返回一行。但是，你怎么知道`id`它选择了哪一行呢？例如，带有`sort=0`的图像是专辑的封面图像。此图像的文件路径包含`id`. 那么，如何始终获取行的 id，在哪里`sort=0`？

我试过了`MIN(sort)`，它总是`0`在`sort`列中返回，但不`id`适合该列...？`ORDER BY sort`只对结果进行排序......也不是解决方案。

非常感谢任何帮助！非常感谢您！

**编辑：希望这将有助于更好地理解：**

查询例如给出以下结果：

```
id | sort | count
1     1      3
4     0      2
6     0      1 
```

但是，怎么可能总是得到这个特定的行，它的值在`sort`哪里`0`？例如

```
id | sort | count
3     0      3
4     0      2
6     0      1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T18:28:39.223

首先，过滤封面图像（`WHERE sort = 0`），然后，简单地计算所有图像`album_id`。

```
SELECT id, 
  sort,
  (SELECT COUNT(*) 
   FROM images t 
   WHERE t.album_id = i.album_id) AS count
FROM images i
WHERE user_id = 15
      AND sort = 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T22:10:55.063

有一种方法可以在没有相关子查询的情况下做到这一点：

```
SELECT id, sort, isum.cnt
FROM images i join
     (select i.album_id, count(*) as cnt
      from images
     ) isum
     on i.album_id = isum.album_id
WHERE user_id = 15 and
      sort = 0 
```

我通常更喜欢将我的所有表都列在“from”子句中。但是，当album_id 上有索引时，一些数据库会比这种形式更好地优化相关子查询。

另外，我将第三个字段从“count”重命名为“cnt”。在 SQL 保留字之后命名列是一个非常非常糟糕的主意，除非你真的必须这样做。

最后，大多数其他 SQL 方言都支持窗口函数。所以，如果你改变数据库，你可以做类似的事情

```
select id, sort, count(*) over (partition by album_id)
from images
where user_id = 15 and
      sort = 0 
```

# javascript - JavaScript 选择一个目录

> ID：10776156
> 
> 赞同：2
> 
> 时间：2012-05-27T18:11:28.417
> 
> 标签：javascript, google-chrome, google-chrome-extension

> **可能重复：**
> [HTML 页面中的目录选择器](https://stackoverflow.com/questions/2809688/directory-chooser-in-html-page)
> [如何在我自己的代码中使用 Google Chrome 11 的上传文件夹功能？](https://stackoverflow.com/questions/5826286/how-do-i-use-google-chrome-11s-upload-folder-feature-in-my-own-code)

I'd like the users to click on a button, then there is a file select dialog, but the user can only select a directory, when selected, I need to get the directory path as a string.

我查看了 HTML5 File API，但不知道如何限制只能选择目录，也看不到文件路径的属性。

只需要支持Chrome

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T17:28:08.180

突破！这些使用一些实验性功能，我不知道这是否真的有效。首先，让我们通过下载一个虚拟文件来找出下载目录的路径：

```
chrome.experimental.downloads.download({url:"data:text/plain,",filename:"~dummy.tmp"},
  function (downloadId, error) {
    if (error) { /* do stuff */ }

    // get the DownloadItem object
    chrome.experimental.downloads.search({downloadId: downloadId}, function(items) {

      // this is the absolute filesystem location of where it was downloaded!
      var filename = items[0].filename;

      // if we remove dummy.tmp from the end we have the downloads directory!
      // also in case it's windows replace backslashes with forward slashes.
      var downloads_directory = filename.replace(/~dummy.tmp$/i,"").replace(/\\/g,"/");
    });
}); 
```

在此之后，我预计有两种方法可以完成您的扩展：

1.  （稍微难一点）现在我们有了下载目录，让我们访问 file:/// url。将`"file://*"`权限添加到您的清单文件。您需要告诉您的用户导航到`chrome://extensions`，找到您的扩展程序，然后勾选它旁边的“允许访问 file:// URLs”。您可以检查以确保用户已通过[isAllowedFileSchemeAccess](http://code.google.com/chrome/extensions/trunk/extension.html#method-isAllowedFileSchemeAccess)完成此操作。

    根据您的操作系统，前往`file:///home/`或进行尝试。`file:///C:/`它应该显示您计算机中文件的目录。我相信可以使用 XMLHttpRequest 来获取这些文件的 HTML（提示：[使用`xhr.responseType = "document"`](http://www.html5rocks.com/en/tutorials/file/xhr2/)），您可以对其进行解析以构建自己的用户界面来选择文件夹！（要添加文件夹，只需将文件下载到您要添加的路径即可。）

2.  您也可以简单地调用`chrome.experimental.downloads.download`with`saveAs: true`让用户将临时文件下载到他们想要保存到的文件夹中。然后，去掉最后的文件名，去掉开头的下载路径，得到一个相对路径，以后可以保存文件！

我很高兴看到你的扩展结果如何。祝你好运！

# php - .htaccess 301 重定向匹配

> ID：10776166
> 
> 赞同：0
> 
> 时间：2012-05-27T18:12:43.173
> 
> 标签：php, .htaccess, redirect

我正在尝试将特定格式的所有 url 301 重定向到替代 URL。我发现我所期望的会起作用，而且似乎没有很多其他操作可以完成这项工作，但是这个似乎在查询字符串中崩溃了。

我目前拥有的是这样的：

```
RedirectMatch 301 ^/catalogue/index\.php(.*)c=11(.*)$ http://www.domain.com/walking/ 
```

以下是我尝试重定向的 URL 类型的一些示例：

```
/catalogue/index.php?x=12&c=11&y=19
/catalogue/index.php?c=11&y=19
/catalogue/index.php?c=11 
```

非常欢迎对此的任何反馈，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:28:58.860

尝试将其写入您的 .htaccess 文件中：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} c=11
RewriteRule ^catalogue/index\.php$ http://www.domain.com/walking? [NC,L,R=301] 
```

在查询中包含“c=11”的每个对 catalogue/index.php 的请求都将被重定向。

# node.js - Assetic、Twitter 引导程序和更少

> ID：10776167
> 
> 赞同：4
> 
> 时间：2012-05-27T18:12:44.577
> 
> 标签：node.js, symfony, twitter-bootstrap, assets

配置：

```
assetic:
    debug:          %kernel.debug%
    use_controller: false
    read_from:      %kernel.root_dir%/../public
    filters:
        less:
            node: /usr/bin/node
            node_paths: [/usr/local/lib/node_modules] 
```

树枝模板：

```
{% block stylesheets %}
{% stylesheets filter='less'
    '@MyBundle/Resources/public/bootstrap/less/bootstrap.less'
%}
    <link rel="stylesheet" href="{{ asset_url }}" />
{% endstylesheets %}
{% endblock %} 
```

这几乎可以正常工作。

我有一个问题，没有图像，它们被引用为相对 url("../img/glyphicons-halflings.png") 但它们不存在。

还有一个问题，这适用于node.js，但是如果我在生产服务器上没有node.js，如果我只上传编译好的css，它会起作用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T18:20:31.933

我认为您也应该使用 cssrewrite 过滤器，如下所示：

```
{% block stylesheets %}
{% stylesheets filter='less,cssrewrite'
    '/bundles/mybundle/bootstrap/less/bootstrap.less'
%}
    <link rel="stylesheet" href="{{ asset_url }}" />
{% endstylesheets %}
{% endblock %} 
```

不要忘记使用以下命令发布您的资产：

```
app/console assets:install --symlink web 
```

为了回答你的最后一个问题，是的，上传编译的 CSS 就可以了。

# wpf - 如何使用 app.xaml 在 WPF 中设置我的应用程序的样式

> ID：10776168
> 
> 赞同：1
> 
> 时间：2012-05-27T18:13:01.410
> 
> 标签：wpf, styles, app.xaml

我已成功将资源字典（包含我的主题/样式模板资源集合）添加到我的 Window.Resources。这适当地设置了我的每个窗口的样式。但是，当我添加同一行时：

```
<ResourceDictionary Source="BureauBlack.xaml" x:Key="BureauBlackKey"/> 
```

对我的 App.xaml 来说没有任何变化。

编辑＃1：

```
<Application x:Class="EventPlanner.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:EventPlanner.ViewModels"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <ResourceDictionary>
            <vm:ViewModelLocator x:Key="ViewModelLocatorKey"/>
            <ResourceDictionary Source="BureauBlack.xaml" x:Key="BureauBlackKey"/>
        </ResourceDictionary>
    </Application.Resources>
</Application> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T18:27:09.903

您需要将主题资源字典添加到`MergedDictionaries`集合中：

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="BureauBlack.xaml" />
        </ResourceDictionary.MergedDictionaries>

        <!-- other resources go here -->

        <vm:ViewModelLocator x:Key="ViewModelLocatorKey"/>

    </ResourceDictionary>
</Application.Resources> 
```

# c++ - 构建 Qt 应用程序 Linux

> ID：10776170
> 
> 赞同：2
> 
> 时间：2012-05-27T18:14:02.623
> 
> 标签：c++, qt, deploying

我在 Qt 上为 Linux 部署应用程序时遇到了很多麻烦。我知道有很多关于它的文章，但我只是觉得每个人都想让你更加困惑，这就是我在这里的原因。我已经尝试了一些东西，我将在下面解释。

首先，我刚刚在 Google 上搜索了“部署 qt 应用程序 linux”并最终找到了[这篇文章](http://labs.qt.nokia.com/2006/05/09/deploying-qt-applications-on-linux/)，该文章旨在让您的生活变得更加轻松，但事实并非如此。我下载了那个 LSB SDK，然后尝试运行 install.sh，但结果当然是一个错误：

```
error: could not find configuration 
```

它也很明显，因为在同一目录中有一个 inst-config，如果我查看该 install.sh 脚本，我会看到它检查的内容：

```
if [ \! -e ./inst-config ]; then
echo "error: could not find configuration" >&2
exit 1
fi 
```

我尝试编辑到直接位置的路径，它通过了该错误，但只是导致了更多错误，所以我认为这不是最简单的方法。

* * *

接下来我直接去了诺基亚，在那里我找到[了这篇文章](http://qt-project.org/doc/qt-4.8/deployment-x11.html)。我读了一点，我看到它在问我是想静态构建还是动态构建。我只想要一个最简单的工作应用程序，所以我认为共享库是最简单的，因为在 Windows 上我需要做的就是打开 Dependency Walker 并使用应用程序拖动一些 DLL。当然，事实并非如此。

最让我烦恼的一件事是它在整个教程中引用：

```
path/to/qt 
```

我似乎无法正确找到的地方。我找到了这条路：

```
/usr/share/qt4 
```

但这显然是不正确的，因为它甚至没有“示例”文件夹，因为教程中说要使用位于其中的“plugandpaint”。

**我是 Linux 的一个非常非常新的用户**，我使用的是最新版本的 Ubuntu。我对 Linux 了解不多，我想这就是我在这里的原因，尽管在 Qt 上部署应用程序似乎是不可能的。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:42:52.727

在我看来，OP 正在询问有关分发应用程序的问题。如果是这种情况，您可能需要在此处阅读：[https](https://wiki.ubuntu.com/PackagingGuide/Complete) ://wiki.ubuntu.com/PackagingGuide/Complete 。

或者，这是一个更快速和肮脏的指南：[http](http://ubuntuforums.org/showthread.php?t=910717) ://ubuntuforums.org/showthread.php?t=910717 。

这个想法是您将应用程序放入 .deb 存档并指定所有依赖项。然后，该程序的用户将让他们的包管理器下载他们运行它所需的一切。使用 Linux，您不必担心自己提供所有库（如果它们位于存储库中）。

如果你想仔细检查你的程序正在使用哪些库，你可以在二进制文件上运行 ldd 命令，或者如果你需要很多细节，可以使用 strace。

您必须记住的一件事是，Linux 上的不同发行版具有不同的打包系统。到目前为止，最流行的是 DEB（Ubuntu、Debian）和 RPM（Fedora、Mandriva、OpenSUSE），但也有分发 tgz 文件的系统。通常，如果您为所有这些发行版发布软件，您希望编写一个 shell 脚本，该脚本将运行生成您感兴趣的所有包的步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T07:40:37.393

如果您在查找 Qt 的动态库时遇到问题，可以将它们安装在两个可能的位置：

*   `/usr/lib`对于非多架构版本（例如 Ubuntu 11.04），以及
*   `/usr/lib/x86_64-linux-gnu/`对于多架构的（例如 Ubuntu 11.10）。

搜索这些文件夹并查看某些`libQt....so`文件名模式的文件名。

# qr-code - Google Chart QR 码的实际字符数限制是多少？

> ID：10776177
> 
> 赞同：2
> 
> 时间：2012-05-27T18:14:24.730
> 
> 标签：qr-code, google-visualization

我编写了一些代码，在给定要编码的字符、所需的边距和 EC 级别的情况下，输出容纳符合标准的二维码所需的最小像素数。但是，我从 Google 收到空白图像响应，而不是有效的 QR 码。

可能的最小二维码是 29x29 像素版本 1 二维码（21 个编码模块 + 每侧 4 个模块边距）。 [例子](https://chart.googleapis.com/chart?chs=29x29&cht=qr&chl=0&chld=H%7C4&choe=UTF-8)

![1个字符二维码](../Images/29b8e1b0e477a46b2d8946960dc96ee1.png)

根据[Google Charts QR 码文档](https://developers.google.com/chart/infographics/docs/qr_codes#details)，您在 EC 级别 H 的版本 1 QR 码中可以拥有的最大 0-9 位数为 17。但是，这样指定参数[会导致空白图像](https://chart.googleapis.com/chart?chs=29x29&cht=qr&chl=12345678901234567&chld=H%7C4&choe=UTF-8)；无论`choe`参数设置为什么；因为正在编码的数据多于无法容纳的数据。

![应该有效但为空](../Images/8decaaa7910475bb5d911e1eb4d6ad0b.png)

将字符数减少到 14 个[会生成有效的 QR 码](https://chart.googleapis.com/chart?chs=29x29&cht=qr&chl=12345678901234&chld=H%7C4&choe=UTF-8)。

![必须减少数字才能工作](../Images/df4d46f67e3fee304c7b862cc5eb5ee9.png)

那么，有没有人知道 Google Charts API 在每个给定版本和 EC 级别可以编码多少数据？它是否依赖于字符字节？我的代码是用 Java 编写的，但如果需要，任何编程语言的解决方案都足够了。

希望我做错了什么，或者有一些可以遵循的逻辑，而不是一个“足够好”的二维码实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:00:33.023

对此没有官方答案。由于 API 现在已被弃用，因此不太可能出现答案或修复错误。您最好使用[zxing](http://code.google.com/p/zxing/)，因为它仍在开发中并且不会受到上述问题的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T19:02:28.257

生成的图像的大小（以像素为单位）与此处无关。您看到和生成的所有二维码都是有效的。

版本 1 二维码可以容纳 17 位数字，使用数字模式，是的。

我认为 Chart Server 的实现在这里是完全错误的。它使用的是数字模式，但添加的填充字节比我认为的需要更多，这使得它使用版本 2。

[您在zxing](http://code.google.com/p/zxing)中看到的版本实际上是相同的基本编码器代码，但我认为它实际上比这个起源于 2006 年的实现更新并且可能是固定的。（虽然我不知道，不再在里面。）

如果您使用 ECI 段在字节模式下指定 UTF-8 编码，则 UTF-8 有效。但这很少做对。zxing 支持它。

在实践中，您会发现各种以字节模式放入 QR 码的东西——Shift_JIS、UTF-8 等等。zxing（和其他人）会在很多时候正确地猜到它。图表服务器 AFAIK 将在必要时使用 UTF-8，因为它不能以默认的 ISO-8859-1 合法编码。但这不是这里的问题。

我认为 Chart Server 与规范规定的限制相差几个字节。规格为 ISO 18004:2006。它为您提供所有版本、模式和 EC 级别的所有正确限制。

AFAIK zxing 做得对，它是 Java。

# c - Gcc 中的编译错误

> ID：10776178
> 
> 赞同：0
> 
> 时间：2012-05-27T18:14:33.737
> 
> 标签：c, linux, gcc

我用 C 编写了一个程序。在我使用它编译之后

```
gcc -o pr prc.c 
```

我得到了下面的东西

```
/usr/bin/ld:cannot find -lc
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T18:20:03.193

链接器 ( `ld`) 找不到库文件`libc.{a|so}`，即标准 C 库。请参阅[ld 手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?ld)以在 OPTIONS 部分下提及此库（和`lc`命令行选项`ld`）。报价：

```
ld -o <output> /lib/crt0.o hello.o -lc

This tells ld to produce a file called output as the result of linking
the file "/lib/crt0.o" with "hello.o" and the library "libc.a" 
```

您应该检查以确保系统中确实缺少这些文件。在我的 Ubuntu 10.04 LTS 系统上：

```
 ~  [88] locate libc.so
/lib/libc.so.6
/lib/tls/i686/cmov/libc.so.6
/usr/lib/libc.so

~  [89] locate libc.a
/usr/lib/libc.a
/usr/lib/xen/libc.a 
```

您如何安装这个缺失的库将根据您的发行版而有所不同。使用您的包管理搜索`libc`. 否则，您可能需要考虑重新安装`gcc`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T18:20:59.513

-lc 是 libc 的缩写，它是`C`运行时库。无论您的 *nix 发行版是什么，您都需要通过适当的安装程序安装 glibc 和 glibc-common。

`man ld`这应该可以深入了解错误消息。像这样的消息表明链接器正在寻找丢失的库。这里的库名称是 libc（将 l 替换为 lib）。

# c# - 为什么 AutoMapper 关心我的访问器是什么（公共与内部）？

> ID：10776183
> 
> 赞同：1
> 
> 时间：2012-05-27T18:15:49.030
> 
> 标签：c#, wcf, automapper

我正在（或者，很快，将会）使用 AutoMapper 将一堆业务对象映射到一堆 WCF DTO。这似乎是一个不错的技巧——在这个级别上需要进行大量的故障排除`.CreateMap`，但总的来说感觉值得。直到我决定将我的业务逻辑隐藏在程序集之外。

BO 和 mapper 生活在同一个项目中；他们剥离了外部组件 DTO，它们是`public`（并且无论如何都需要通过渠道）。没有必要公开 BO，因为 DTO 现在可以完成这项工作，所以我想我应该将它们的访问器重置为`internal`. Kaboom 进行自动映射。为了显示：

（来自 BLL 的代码，与 AutoMapping 相同）

```
public class TestObject
{
    private int _myID;
    public int MyID
    {
        get { return _myID; }
        set { _myID = value; }
    }
} 
```

（来自服务层的代码）

```
public class TestObjectDTO
{
    private int _myID;
    public int MyID
    {
        get { return _myID; }
        set { _myID = value; }
    }
} 
```

这会起作用

```
Mapper.CreateMap<TestObject, TestObjectDTO>(); 
```

直到我这样做：

```
internal class TestObject
... 
```

甚至只是这个，在`TestObject`：

```
internal int MyID 
```

谁能给我解释一下？我不会称它为“错误”，但它似乎与基于反射的映射的整个目的相矛盾，即允许不同目的的对象流畅地缩放在一起。为什么 AM 不能处理映射，让我控制访问器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T18:50:20.210

这是设计。有几个选项是使用您自己的解析器，它将与那些（私有、受保护、内部等）一起使用，或者映射到接口并使用显式接口实现。

前一个 SO 线程的答案涵盖了这两种方法：

[如何在标记为内部的属性上使用 AutoMapper？](https://stackoverflow.com/questions/3208057/how-can-i-use-automapper-on-properties-marked-internal)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-27T18:29:11.183

来自[MSDN](http://msdn.microsoft.com/en-us/library/7c5ka91b%28v=vs.80%29.aspx)

`The internal keyword is an access modifier for types and type members. Internal types or members are accessible only within files in the same assembly`

IE, anything marked as internal can only be accessed by the code in your project - which means referenced assemblies such as AutoMapper cannot even see things marked as internal. Reflection based mappings require a public class, and public get / set properties.

# php - 无法连接到内存缓存

> ID：10776184
> 
> 赞同：14
> 
> 时间：2012-05-27T18:16:03.353
> 
> 标签：php, apache, caching, memcached

我正在尝试按照他们的建议连接到内存缓存：

```
$memcache = new Memcache();
$memcache->pconnect('localhost',11211); 
```

但我得到：

```
Notice: Memcache::pconnect() [memcache.pconnect]: Server localhost (tcp 11211) failed with: Connection refused (111) in /home/user/public_html/website.com/includes/basedatos.php on line 26 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-27T18:23:55.817

您需要实际安装`memcached`服务器才能连接到它。在 CentOS 上，这可以通过...

```
sudo yum install memcached 
```

（在 linux 的 debian 风格上，使用`apt-get`代替`yum`）

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-05-04T19:18:39.563

这可能很明显，但请确保 memcached 实际正在运行：

```
service memcached start 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-05T17:28:37.533

memcache 与 memcached 不同

我觉得你已经安装了 memcache 因为`$memcache = new Memcache();`工作

你必须在你的服务器上启动它

检查这[10 个小步骤来安装 Memcached Server 并使用 PHP 访问它](http://www.webdeveloperjuice.com/2010/01/25/10-baby-steps-to-install-memcached-server-and-access-it-with-php/)

# c# - 如何在 C# 中跟踪 NIC 活动？特别是通过端口的入口/出口

> ID：10776186
> 
> 赞同：1
> 
> 时间：2012-05-27T18:16:16.473
> 
> 标签：c#, winapi, networking, bandwidth

我需要在 C# 中跟踪每个应用程序通过端口发送和接收的数据量。

要使用的正确 API 或 .NET 对象是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T19:05:06.697

性能监视器 ( `perfmon`) 公开的数据可通过 HKEY_PERFORMANCE_DATA 轻松提供给应用程序。但是，它不包含您需要的详细程度。

资源监视器 ( `resmon`) 确实按进程（尽管不是按端口）显示网络活动，并且它使用 Windows 事件跟踪 (ETW)。要在您的应用程序中重现`resmon`数据，您需要从 ETW 捕获事件并自己总结总数。我不知道跟踪数据是否包含足够的信息来按端口号分解总数，但如果没有，我会感到惊讶。ETW 数据通常非常详细。但是，我不相信在 .Net 中使用 ETW 数据有任何支持。*ETW 可以以非常*高的速率生成事件，因此编写本机 DLL 来使用和聚合数据可能会更好。

一个更简单的选择是找到现有的工具。这是一个[起点](http://msdn.microsoft.com/en-us/library/windows/desktop/dd569137%28v=vs.85%29.aspx)。

# javascript - 单元测试 MVC3 客户端功能

> ID：10776187
> 
> 赞同：2
> 
> 时间：2012-05-27T18:16:21.127
> 
> 标签：javascript, .net, asp.net-mvc-3, unit-testing, dom

我很难掌握我看到的用于对网站的 UI 功能进行单元测试的方法（在本例中，使用 ASP.NET MVC3）。我尝试使用 Watin，这在一般意义上是我想要的，除了必须依赖 Web 浏览器的实际实例才能使其工作，因为它使整个过程相当复杂，尤其是使用 CI。

在我的理想世界中，这就是我想象的测试工作方式：

1.  将模型传递给视图，获取输出
2.  使用视图输出填充程序化 DOM
3.  例如，该测试将触发 DOM 事件以模拟单击按钮，并验证 DOM 是否以预期的方式进行操作。

我意识到这需要 javascript 引擎和 DOM 实现，要么用 .NET 编写，要么使用 .NET 绑定。我的问题是否存在明显的解决方案？如果没有，我想要的方式有什么特别愚蠢/错误的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T18:27:14.740

您所描述的被称为无头浏览器 - [XBrowser](http://xbrowser.codeplex.com/)就是这样一种努力，尽管最后一次签入日期是 2010 年 4 月。

另请参阅[这篇](http://blog.stevensanderson.com/2010/03/30/using-htmlunit-on-net-for-headless-browser-automation/)关于在 .NET 开发中使用 HtmlUnit 的帖子。

# c++ - 我可以对这段 C++ 代码的每一行中发生的事情进行详细解释吗？

> ID：10776190
> 
> 赞同：-1
> 
> 时间：2012-05-27T18:16:31.430
> 
> 标签：c++, windows

我想创建一个键盘记录器。我找到了一个关于它的教程，并且我正确地编码了它，并且它有效。我基本上了解所有代码，除了隐身方法：

```
void Stealth()
{

    HWND stealth;
    AllocConsole();
    stealth = FindWindowA("ConsoleWindowClass", NULL);
    ShowWindow(stealth,SW_HIDE);
} 
```

如果有人可以给我逐行分解这种方法中发生的事情，那绝对是惊人的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T18:19:21.567

```
HWND stealth; 
```

声明一个窗口句柄。

```
AllocConsole(); 
```

为调用进程分配一个新的控制台。

```
stealth = FindWindowA("ConsoleWindowClass", NULL); 
```

找到类名为“ConsoleWindowClass”的窗口句柄。

```
ShowWindow(stealth,SW_HIDE); 
```

把它藏起来。

# excel - 拼写检查 Excel 函数中的单个单词

> ID：10776191
> 
> 赞同：12
> 
> 时间：2012-05-27T18:16:42.187
> 
> 标签：excel, vba, spell-checking

这个 Excel VBA 小函数总是返回 false，没有传入什么字。

```
Function SpellCheck(SomeWord As String)

SpellCheck = Application.CheckSpelling(SomeWord)

End Function 
```

事实上，在 IDE 中，我可以验证 Application.CheckSpelling("hello") 失败，尽管 Excel 拼写检查器确实检测到拼写错误。

如果拼写正确，我要做的是为每个单词获取一个 T/F 值。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-27T18:22:13.013

就像我在评论中提到的那样，它有效。

```
Option Explicit

Sub Sample()
    MsgBox SpellCheck("hello") '<~~ Returns True
    MsgBox SpellCheck("daasd") '<~~ Returns False
End Sub

Function SpellCheck(SomeWord As String) As Boolean
    SpellCheck = Application.CheckSpelling(SomeWord)
End Function 
```

`Application.CheckSpelling`不会更正或提供更正拼写错误的单词，它只会返回`True`或`False`

我测试过

`?Application.CheckSpelling("hello")`

在即时窗口中，它返回了`True`

**编辑**`Application.CheckSpelling`：从 UDF调用将始终返回`False`。上次我检查时，它仍然是一个错误，没有办法解决它。如果最近有更新，那么我不知道。:)

**更多编辑**

这是您的函数稍作修改，它也可以用作 UDF :)

从这个[链接得到想法](http://newtonexcelbach.wordpress.com/2008/11/01/a-question-of-spelling/)

```
Function SpellCheck(rng As Range) As Boolean
    Dim oxlAp As Object
    Set oxlAp = CreateObject("Excel.Application")
    SpellCheck = oxlAp.CheckSpelling(rng.Value)
    oxlAp.Quit
    Set oxlAp = Nothing
End Function 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T19:20:29.970

需要注意的一个陷阱是 Application.CheckSpelling 将为任何具有您进行拼写检查的语言代码页之外的字符的文本返回 True。

例如，检查英语中的*nő*返回 True。显然 Excel 还没有（截至 2010 版）完全进入 Unicode 世界。

如果这是您的应用程序中的问题，您要么必须事先筛选出带有代码页之外的字符的文本，要么您可以借用 Word 的拼写检查功能，它没有这个错误，例如像这样（改编自[www.vb-tec .de](http://www.vb-tec.de/spelling.htm) ):

```
 Public Function CheckSpellingWd( _
            ByRef Text As String, _
            Optional ByVal IgnoreUpperCase As Boolean = False, _
            Optional ByVal ReUse As Boolean = True _
        ) As Boolean

        'Reuse Word object on next call
        Static wd As Word.Application

        If Len(Text) > 0 Then
            'create Word object on first call
            If wd Is Nothing Then
            Set wd = New Word.Application
            wd.DisplayAlerts = wdAlertsNone
            End If

            'Do spellcheck
            CheckSpellingWd = wd.CheckSpelling(Text, , IgnoreUpperCase)
        Else
            'Return True on empty string
            CheckSpellingWd = True
        End If
    End Function 
```

现在 Unicode 被检查得很好，理论上，你可以提供一个字典文件路径作为 CheckSpelling 函数的参数，以检查你有字典文件的任何语言：

```
Application.CheckSpelling(Word, CustomDictionary, IgnoreUppercase, MainDictionary, _
    CustomDictionary2, CustomDictionary3, CustomDictionary4, CustomDictionary5, _
    CustomDictionary6, CustomDictionary7, CustomDictionary8, CustomDictionary9, _
    CustomDictionary10) 
```

然而，实际上检查是使用默认语言的主词典（在文件/选项/语言中设置）完成的，而不管您指定的词典是什么（在 Word 2010 中检查，不确定以前的版本）。您只能手动更改该设置（并且必须重新启动 Word 才能使更改生效）。

默认语言设置由注册表项控制。在 Office 2010 中：

```
HKEY_CURRENT_USER\Software\Microsoft\Office\14.0\Common\LanguageResources\InstallLanguage 
```

因此，理论上，您也可以使用 VBA 包装器对[Windows Scripting](http://vba-corner.livejournal.com/3054.html)、[WMI](http://accesstips.wordpress.com/2009/07/16/microsoft-access-vba-uses-wmi-to-read-the-registry/)或[WinAPI](http://www.programmersheaven.com/mb/vba/371593/371593/change-registry-settings-in-vba/)更改注册表（然后重新启动 Word）来自动更改语言，但是在启用 UAC 的 Windows 7 上，我遇到了权限问题，这就是我放弃了实验。我只尝试了 WinAPI 路由。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-31T18:56:32.723

虽然使用[Excel 应用程序对象的错误仍然存​​在，但](https://msdn.microsoft.com/en-us/library/office/ff194565.aspx)[Application.CheckSpelling](https://msdn.microsoft.com/en-us/library/office/ff840059.aspx)方法需要它的 UDF可以从[早期绑定](https://msdn.microsoft.com/en-us/library/dd588434.aspx)和[静态](https://msdn.microsoft.com/en-us/library/z2cty7t8.aspx)变量声明中受益。

```
Function spellCheck(str As String) As Boolean
    Static xlApp As New Excel.Application
    spellCheck = xlApp.CheckSpelling(str)
End Function 
```

早期绑定加速了 Excel.Application 对象的创建。在 Excel 的 VBA 中使用时，无需使用[CreateObject 函数](https://msdn.microsoft.com/en-us/library/office/gg264813.aspx)，因为存在参考库。

在函数退出后，静态变量声明继续以其分配状态存在，并且不会在 UDF 的后续使用中重铸。这使得使用 UDF 填充长列或作为条件格式规则中的确定公式等情况更有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T18:44:21.683

我打赌你没有

```
Application.SpellingOptions.DictLang = 1033 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-27T18:45:02.140

你对UDF是正确的。不过，这个小工作人员有帮助。

```
Sub SpellCheckColumn()
    Dim rRng As Range

    Set rRng = Range("A1", Range("A" & Rows.Count).End(xlUp))

    For Each rCell In rRng
    If Not Application.CheckSpelling(rCell) Then
        rCell.Offset(, 1) = "Checkspell Error"
    Next rCell
End Sub 
```

# foursquare - Foursquare“此时此刻”在使用时间戳时提供错误数据

> ID：10776195
> 
> 赞同：0
> 
> 时间：2012-05-27T18:17:05.177
> 
> 标签：foursquare

使用foursquare API Explorer 时，我得到了使用时间戳时看似错误的数据。我发现，当我多次就特定地点拨打电话时，我仍然收到相同的输出（这意味着，尽管时间不同，但同一个人在该地点）。

例如，我在下面进行以下调用。

```
https://api.foursquare.com/v2/venues/4bf6ef8b5efe2d7fd10d6834/herenow?afterTimestamp=1337475603 
```

我将时间戳更改为其他时间，如下所示。

```
https://api.foursquare.com/v2/venues/4bf6ef8b5efe2d7fd10d6834/herenow?afterTimestamp=1337969407 
```

但是，我仍然在数据中得到相同的输出。我也尝试过其他时间戳。为什么我的输出保持不变，尽管我改变了时间戳？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:56:50.053

因此，hereNow 仅针对*当前*在某个场所登记入住的人。

在foursquare 上，我们认为人们在他们登记入住时间后的3 小时后才“登记入住”，或者直到他们在其他地方登记入住（以先到者为准）。

因此，afterTimestamp 旨在用于短于 3 小时的时间尺度。例如，您可以使用它来限制自己查看在过去一小时内（而不是过去 3 小时）签到的人。

正如端点所暗示的，这对于实时轮询更改很有用（尽管如果您是场地的经理，您应该使用我们的 Realtime Venue Push API）。

也就是说，请务必阅读 Akshay 发布的关于 Here Now 即将发生的变化的内容：[https ://groups.google.com/forum/?fromgroups#!topic/foursquare-api/sQMuHlv9wiU](https://groups.google.com/forum/?fromgroups#!topic/foursquare-api/sQMuHlv9wiU)

# iphone - 获取图像地理位置（从图像选择器中选择）

> ID：10776197
> 
> 赞同：1
> 
> 时间：2012-05-27T18:17:09.643
> 
> 标签：iphone, objective-c, geolocation, uiimagepickercontroller

伙计们，我真的需要你的帮助。

我已经挣扎了几个小时了。我有一个应用程序，用户可以在其中从`UIImagePicker`. 我需要以某种方式获得该图像的地理位置（纬度和经度）。我能找到的只是这个[http://code.google.com/p/iphone-exif/](http://code.google.com/p/iphone-exif/)库，它不是完全免费的。

我怎样才能做到这一点？我正在寻找最简单的方法:) 如果除了使用提供的链接上的库之外别无他法，你能告诉我怎么做吗？或者将我指向显示此内容的某个地方？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T18:37:46.860

从 iOS 4.x 开始，[CGImageSource](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CGImageSource/Reference/reference.html) API 成为获取和读取图像 EXIF 数据的可行方法。

（旁注：文档的链接实际上与设备无关，苹果只是没有为某些 C 接口框架编写两个版本）。

# php - 单击表单提交按钮时重定向

> ID：10776202
> 
> 赞同：0
> 
> 时间：2012-05-27T18:18:20.850
> 
> 标签：php, jquery, wordpress

我有这段代码，它可以让用户成功登录，但我还需要这样做，这样一旦登录，他就会被重定向到另一个页面提交我看到您更改了 action="destination url" 但其中已经包含该 php 代码，如果我更改它就不起作用。我很感激这方面的任何帮助。

```
<div id="apDiv4">
<form name="login-form" id="sidebar-login-form" class="standard-form" action=" <?php echo site_url( 'wp-login.php', 'login_post' ) ?>" method="post">
  <table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td><table width="100%" border="0" cellspacing="0" cellpadding="5">
       <tr>
          <td>
        <label><?php _e( 'Username', 'buddypress' ) ?>
        <input type="text" name="log" id="sidebar-user-login" class="input" value="<?php echo esc_attr(stripslashes($user_login)); ?>" /></label>

           </td>
          <td>
        <label><?php _e( 'Password', 'buddypress' ) ?>
        <input type="password" name="pwd" id="sidebar-user-pass" class="input" value="" /></label>

           </td>           
        </tr>
        <tr><td>
        <p class="forgetmenot"><label><input name="rememberme" type="checkbox" id="sidebar-rememberme" value="forever" /> <?php _e( 'Remember Me', 'buddypress' ) ?></label></p></td>
                <td>
                <?php do_action( 'bp_sidebar_login_form' ) ?>
                <input type="image" value=<img src="http://anime.edgardoroldanonline.com/wp-content/themes/buddyboss-child-fixed-navbar/images/button-letmein.png" width="127" height="26" name="wp-submit" id="sidebar-wp-submit" tabindex="100" />
                <input type="hidden" name="testcookie" value="1" />

?>

                 </td>
</td>       
        </tr>
      </table></td>
    </tr>
  </table>
            </form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:28:40.780

由于它的**wordpress**与您一起工作，您应该在表单中使用隐藏字段 (redirect_to)。它的一个特点。

```
<form name="login-form" id="sidebar-login-form" class="stand...
  <input type="hidden" name="redirect_to" value="http://redirect.to.com"> 
```

在 wp-login.php 的第 570 行，它将在登录后处理重定向值：

```
$redirect_to = apply_filters('login_redirect', $redirect_to, isset( $_REQUEST['redirect_to'] ) ? $_REQUEST['redirect_to'] : '', $user); 
```

* * *

**旁注：**您也可以使用[wp_redirect()](http://codex.wordpress.org/Function_Reference/wp_redirect)直接调用重定向函数：

```
<?php
wp_redirect( $location, $status );
exit;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T18:21:08.340

在您正在处理事务的 php 文件中，您可以使用 header-location：

```
<?php

$host  = $_SERVER['HTTP_HOST'];
$uri   = rtrim(dirname($_SERVER['PHP_SELF']), '/\\');
$extra = 'some_page.php';
header("Location: http://$host$uri/$extra");

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T18:21:17.733

您将希望`header("Location: /some/page.php")`在处理表单值的 PHP 脚本中使用调用。

此重定向必须在服务器端完成，因为您的服务器首先需要实际接收数据，因此您无法更改操作字段。

# html - xpath 不包括节点

> ID：10776203
> 
> 赞同：0
> 
> 时间：2012-05-27T18:18:37.493
> 
> 标签：html, xpath, screen-scraping

我试图从这个页面获取信息[http://registroapps.uniandes.edu.co/scripts/adm_con_horario1_joomla.php?depto=IIND&nombreDepto=Ingenier%EDa%20Industrial](http://registroapps.uniandes.edu.co/scripts/adm_con_horario1_joomla.php?depto=IIND&nombreDepto=Ingenier%EDa%20Industrial)

这些是我需要选择的值 ![选择值](../Images/b0f0401f1847140da657d71797784d45.png) 现在我有这个 xpath

/html/body/table/tbody/tr[2]/td/table/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[td[not(@class="back1" or @类="back3")]]

我需要排除“Dias Horas Salon 等”行。我怎样才能做到这一点？([b[text()!='Horas']]?

欢迎就如何改进选择提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T23:48:02.630

我将通过文本定位标题行并定位以下兄弟姐妹：

```
//b[.="CRN"]/../../following-sibling::tr
//b[.="Días"]/../../following-sibling::tr 
```

# java - JPA 缓存配置

> ID：10776204
> 
> 赞同：0
> 
> 时间：2012-05-27T18:18:45.753
> 
> 标签：java, caching, jpa

实际上有一个接口 javax.persistence.Cache 但我找不到在 persistence.xml 中指定缓存提供程序的方法！我必须使用供应商特定的方式来声明缓存还是有什么我不知道的？

如果目前没有可能声明它，我想在 JPA 规范中为 persistence.xml 提出一个配置值。

# eclipse - Eclipse Java EE IDE需要tomcat源码进行调试

> ID：10776211
> 
> 赞同：0
> 
> 时间：2012-05-27T18:20:18.917
> 
> 标签：eclipse, debugging, tomcat

很抱歉问这个问题。我用谷歌搜索，但找不到答案。

我正在使用 Eclipse Java EE IDE (WTP) 来调试 JSP。单步执行代码时，我抛出了一些类似的异常，它们都说它找不到特定 jar 文件的源代码。

我现在明白 Eclipse 在调试时需要源代码以允许它单步执行应用程序。所以我需要找到Tomcat安装的源代码并将eclipse指向它的位置：

*   我检查了Tomcat安装的jar文件，它们只包含`.class`文件，没有源代码。
*   我检查了从 Apache 站点下载的 jar 文件也不包含源代码。
*   我已经从 Apache 站点下载了源代码（不是在 jar 中），但这似乎并不是所有的源代码，因为它只修复了一些`source code not found`异常，但没有修复其他异常。
*   我已经从[GrepCode.com](http://www.grepcode.com)下载了几个带有源代码的 jar 文件，但我认为必须有另一种方法。

这一定是一个常见问题，我想知道是否有办法避免单独下载tomcat安装中每个jar的源代码？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:30:29.907

我假设您知道您可以使用调试器来单步执行第 3 方代码，而不是单步执行？

应该可以在不进入 tomcat 代码的情况下调试您的问题，除非您当然认为您发现了 tomcat 错误。

通常，您应该跳过 3rd 方 jar 中的方法，并在方法返回后通过探索应用程序的状态来查看该方法的结果。

# php - 类 IDP\Bundle\Entity\Portfolio 不是有效的实体或映射的超类

> ID：10776218
> 
> 赞同：1
> 
> 时间：2012-05-27T18:21:21.090
> 
> 标签：php, symfony, doctrine-orm

我是 symfony2 的新手。我创建了一个称为投资组合控制器的基本控制器和该控制器的一些索引视图。我也创建了一个实体类，但它给出了错误。

我的控制器是

```
<?php
namespace IDP\Bundle\Controller;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
 class PortfolioController extends Controller {

    public function indexAction() {
     $product = $this->getDoctrine()
      ->getRepository('IDPBundle:Portfolio')
      ->find(1);
    return $this->render('IDPBundle:Portfolio:index.html.twig');
   }

} 
```

在 src/IDP/Bundle/Entity/Portfolio.php 里面

```
 <?php
 namespace IDP\Bundle\Entity;
 use Doctrine\ORM\Mapping as ORM;
 use Symfony\Component\Validator\Constraints as Assert;
 class Portfolio
 {
   private $id;
   private $user_id;
   private $portfolio_name;
   private $description;
   private $permalink;
   private $sharingCode;
   private $shared;
   private $shared_portfolio_calls;
   private $patentgroup_id;

public function __construct()
{
    $this->portfolioGroups = new \Doctrine\Common\Collections\ArrayCollection();
}
public function getId()
{
    return $this->id;
}
public function setName($portfolio_name)
{
    $this->name = $portfolio_name;
}
public function setDescription($description)
{
    $this->description = $description;
}
public function getDescription()
{
    return $this->description;
}
public function setSharingCode($sharingCode)
{
    $this->sharingCode = $sharingCode;
}
public function getSharingCode()
{
    return $this->sharingCode;
}
public function setShared($shared)
{
    $this->shared = $shared;
}
public function getShared()
{
    return $this->shared;
}
public function getUser()
{
    return $this->user;
}
} 
```

我的表名称是 pm_portfolios，它包含我在投资组合类中提到的所有字段。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T18:42:35.970

您的实体缺少所有 ORM 元数据，例如`@ORM\Entity`类本身和其他属性上的元数据。请参阅[文档中的示例](http://symfony.com/doc/current/book/doctrine.html#add-mapping-information)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T02:08:12.817

您的 Entity 类没有任何 ORM 元数据。尝试这样的事情

```
 <?php

namespace IDP\Bundle\Entity;

 use Doctrine\ORM\Mapping as ORM;
 use Symfony\Component\Validator\Constraints as Assert;
 /**
 * IDP\Bundle\Entity\Portfolio
 * @ORM\Table(name="pm_portfolios")
 */
class Portfolio
{
/**
 * @var integer $id
 */
private $id;

/**
 * @var integer $user_id
 */
private $user_id;

/**
 * @var string $portfolio_name
 */
private $portfolio_name;

/**
 * @var text $description
 */
private $description;

/**
 * @var string $permalink
 */
private $permalink;

/**
 * @var string $sharing_code
 */
private $sharing_code;

/**
 * @var boolean $shared
 */
private $shared;

/**
 * @var integer $shared_portfolio_calls
 */
private $shared_portfolio_calls;

/**
 * @var integer $patentgroup_id
 */
private $patentgroup_id;

/**
 * Get id
 *
 * @return integer 
 */
public function getId()
{
    return $this->id;
}

/**
 * Set user_id
 *
 * @param integer $userId
 */
public function setUserId($userId)
{
    $this->user_id = $userId;
}

/**
 * Get user_id
 *
 * @return integer 
 */
public function getUserId()
{
    return $this->user_id;
}

/**
 * Set portfolio_name
 *
 * @param string $portfolioName
 */
public function setPortfolioName($portfolioName)
{
    $this->portfolio_name = $portfolioName;
}

/**
 * Get portfolio_name
 *
 * @return string 
 */
public function getPortfolioName()
{
    return $this->portfolio_name;
}

/**
 * Set description
 *
 * @param text $description
 */
public function setDescription($description)
{
    $this->description = $description;
}

/**
 * Get description
 *
 * @return text 
 */
public function getDescription()
{
    return $this->description;
}

/**
 * Set permalink
 *
 * @param string $permalink
 */
public function setPermalink($permalink)
{
    $this->permalink = $permalink;
}

/**
 * Get permalink
 *
 * @return string 
 */
public function getPermalink()
{
    return $this->permalink;
}

/**
 * Set sharing_code
 *
 * @param string $sharingCode
 */
public function setSharingCode($sharingCode)
{
    $this->sharing_code = $sharingCode;
}

/**
 * Get sharing_code
 *
 * @return string 
 */
public function getSharingCode()
{
    return $this->sharing_code;
}

/**
 * Set shared
 *
 * @param boolean $shared
 */
public function setShared($shared)
{
    $this->shared = $shared;
}

/**
 * Get shared
 *
 * @return boolean 
 */
public function getShared()
{
    return $this->shared;
}

/**
 * Set shared_portfolio_calls
 *
 * @param integer $sharedPortfolioCalls
 */
public function setSharedPortfolioCalls($sharedPortfolioCalls)
{
    $this->shared_portfolio_calls = $sharedPortfolioCalls;
}

/**
 * Get shared_portfolio_calls
 *
 * @return integer 
 */
public function getSharedPortfolioCalls()
{
    return $this->shared_portfolio_calls;
}

/**
 * Set patentgroup_id
 *
 * @param integer $patentgroupId
 */
public function setPatentgroupId($patentgroupId)
{
    $this->patentgroup_id = $patentgroupId;
}

/**
 * Get patentgroup_id
 *
 * @return integer 
 */
public function getPatentgroupId()
{
    return $this->patentgroup_id;
} 
```

}

# visual-studio-2010 - 构建 Intel Media SDK Directshow 示例：“无法打开包含文件：'streams.h'：没有这样的文件或目录”

> ID：10776219
> 
> 赞同：6
> 
> 时间：2012-05-27T18:21:24.023
> 
> 标签：visual-studio-2010, sdk, directshow

正如标题所说，我遇到了这个错误。我已经安装了：

*   视觉工作室专业版 2010
*   Microsoft Windows SDK 7.0A（默认设置）
*   微软视窗 SDK 7.1
*   Microsoft Windows SDK 6.1（英特尔发行说明推荐）
*   DirectX SDK 2010 年 6 月

一定有一些我缺少的 SDK 或库。会是什么呢？

顺便说一句，我还缺少一个名为“combase.h”的文件。应该有关系吧。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T18:36:26.930

在包含路径上添加以下内容（您丢失的文件在那里）：

*   $(WindowsSDK)\Samples\multimedia\directshow\baseclasses

您可能需要使用此目录中的解决方案构建静态库，以便您的示例还可以链接生成`.lib`的文件（它们也需要在搜索路径上）。

# javascript - 如何从客户端访问和读取文件？

> ID：10776221
> 
> 赞同：2
> 
> 时间：2012-05-27T18:21:35.110
> 
> 标签：javascript, html, web

我有一个包含以下行的文件 foo.txt：

```
row1
row2
row3 
```

我想在我的 HTML 中创建一个指向该文件的链接，并在客户端使用 Javascript 读取它。有解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T18:24:11.450

如果文件在您的服务器上，您可以使用以下内容：

```
jQuery.get('your_file.txt',function(data){
  alert(data);
}); 
```

如果你想从你的本地系统中提取，你首先需要一个上传机制。

**更新：**

同步执行：

```
$.ajax({
    url: "your_file.txt",
    async: false,
    success: function(data){ alert(data); }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T18:23:11.827

**文件不在您自己的服务器上：**

由于安全原因，客户端 JavaScript 无法做到这一点。想象一下，您正试图访问客户端的文件系统。

虽然在 Internet Explorer 中有文件系统对象的选项，但通常在客户端机器上进行 I/O 不是一个好主意，除非没有损害它的目的。

**服务器上的文件：**

但是，如果您打算从自己的域/空间中读取文件，则可以使用@Fluidbyte 指出的***AJAX 。***

* * *

您还可以在支持它的浏览器中使用[html5 的 File API 。](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-27T18:29:46.740

您可以将[File API](http://www.html5rocks.com/en/tutorials/file/dndfiles/)用于[支持的浏览器](http://caniuse.com/#search=filereader)。

如果没有，请使用传统的“上传到服务器并从服务器读取”方法。这也可以在 AJAX 中完成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T18:55:51.303

我建议您将文件存储在客户端浏览器的 HTML5 Localstorage 中，因为它是行，您可以将其保存在一个简单的循环中

```
localStorage.setItem("key1", "value1");  
localStorage["key1"] = "value1";
... 
```

编写一个服务器端脚本，逐行读取并输出javascript代码。

然后稍后阅读它，您只需要：

```
function listAllItems(){  
    for (i=0; i<=localStorage.length-1; i++)  
    {  
        key = localStorage.key(i);  
        val = localStorage.getItem(key);  
    }   
} 
```

每个网站通常会获得 5MB 的 Localstorage 空间。您可以编写一个函数来更新 Localstorage 附加一些内容并在需要时将其发送回服务器等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-03T09:56:27.643

```
 var oFReader = new FileReader();
            oFReader.readAsText(document.getElementById("fileImportOrExport").files[0]);
            oFReader.onload = function (oFREvent) {
                var fileImportOrExportContent = oFREvent.target.result;
            }
            oFReader.onerror = function (OFREvent) {
                alert("Error in reading");
            } 
```

# java - 尝试实例化 xmemcached 客户端

> ID：10776224
> 
> 赞同：3
> 
> 时间：2012-05-27T18:22:11.857
> 
> 标签：java, spring, memcached

我一直在尝试了解 memcached 的使用等，并尝试从昨天开始通过阅读一些稀缺资源来进行设置。让我从展示我拥有的东西开始。

1.  安装的 memcached 服务器
2.  为弹簧配置，如下[所述](http://code.google.com/p/simple-spring-memcached/)：

    ```
    <beans xmlns="http://www.springframework.org/schema/beans" 
        xmlns:aop="http://www.springframework.org/schema/aop"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
                http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                http://www.springframework.org/schema/aop
                http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">

        <import resource="simplesm-context.xml" />
        <aop:aspectj-autoproxy />

        <bean name="defaultMemcachedClient" class="com.google.code.ssm.CacheFactory">
              <property name="cacheClientFactory">
                    <bean class="com.google.code.ssm.providers.xmemcached.MemcacheClientFactoryImpl" />
              </property>
              <property name="addressProvider">
                    <bean class="com.google.code.ssm.config.DefaultAddressProvider">
                         <property name="address" value="127.0.0.1:11211" />
                    </bean>
              </property>
              <property name="configuration">
                    <bean class="com.google.code.ssm.providers.CacheConfiguration">
                          <property name="consistentHashing" value="true" />
                    </bean>
              </property>
         </bean>
    </beans> 
    ```

3.  通过 spring 成功创建到服务器的连接：

    ```
    20:06:07,864 WARN  [main] (XMemcachedClient.java:645) - XMemcachedClient use Text protocol
    20:06:08,112 WARN  [main] (AbstractController.java:372) - The Controller started at localhost/127.0.0.1:0 ...
    20:06:08,139 WARN  [Xmemcached-Reactor-0] (MemcachedConnector.java:239) - Add a session: 127.0.0.1:11211 
    ```

所以下一步是测试它，这提供了关于 memcached 的很好/简单的解释：http: [//www.majordojo.com/2007/03/memcached-howto.php](http://www.majordojo.com/2007/03/memcached-howto.php)

我想试试这个：

```
Class Foo {
    public static findById(id) {
            if (obj = memcached.get(id)) return obj;
            obj = loadFromDatabase(id);
            memcached.put(id,obj);
            return obj;
        }
} 
```

但是该站点上没有任何地方说明内存缓存的对象类型。所以我尝试了以下方法：

```
import net.rubyeye.xmemcached.MemcachedClient

Class Foo {
        @Autowired
    MemcachedClient defaultMemcachedClient;
        public static findById(id) {
                if (obj = memcached.get(id)) return obj;
                obj = loadFromDatabase(id);
                memcached.put(id,obj);
                return obj;
            }
    } 
```

我从日志中得到的错误是：

```
nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [net.rubyeye.xmemcached.MemcachedClient] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency 
```

我认为`defaultMemcachedClient`bean 应该是我的 memcached 客户端。这并不明显。我在这里做什么？有人有想法吗？关联？建议？任何事物？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T09:49:58.403

defaultMemcachedClient bean 属于[Cache](https://simple-spring-memcached.googlecode.com/svn/docs/2.0.0/apidocs/com/google/code/ssm/Cache.html)类型，与 xmemecached 无关。

如果您想直接使用 memcached，请不要使用[Simple Spring Memcached](http://code.google.com/p/simple-spring-memcached/)。SSM 用于使用拦截器 (AOP) 和注释进行缓存。在你的情况下：

```
public class Foo {
    // cache for 1 hour
    @ReadThroughSingleCache(namespace="foo", expiration=3600)
    public Object findById(@ParameterValueKeyProvider int id) {
            return loadFromDatabase(id);
    }
} 
```

调用此方法时，在调用此方法拦截器的主体之前，请检查 key 下的缓存中是否有任何值（key 是使用命名空间和 id 参数创建的）。如果缓存中有一个值，则将其返回给调用者并且不执行方法体（loadFromDatabase）。如果方法的缓存体中没有值，则执行并将结果存储在缓存中并返回给调用者。

如果您想直接使用 memcached 客户端，您仍然可以使用 SSM 中的 Cache 对象，但您可能对使用[xmemcached](http://code.google.com/p/xmemcached/wiki/User_Guide)感兴趣。

# php - 在 php 中限制/保护文件浏览器

> ID：10776226
> 
> 赞同：0
> 
> 时间：2012-05-27T18:22:20.340
> 
> 标签：php, security, file-browser

到目前为止，我已经构建了我的文件浏览器，但它非常不安全。例如，当您插入“?dir=../”或“?dir=../../../”时，您可以查看您不应该查看的文件。我的代码：

```
<?php
    if(isset($_GET['dir']) && $_GET['dir'] !== "../") {$dir = $basedir.$_GET['dir']."/";} else {$dir = $basedir;}
    if ($handle = opendir($dir)) {
        if(isset($_GET['dir']) && $_GET['dir'] !== "") {echo "<a href='?dir='>back to root</a>";}
        while (false !== ($file = readdir($handle))) {
            if ($file != "." && $file != "..") {
                if(filetype($dir . $file) == "file") {$filetype = what_suffix($file);} else {$filetype = "-";}
                if(filetype($dir . $file) == "file") {$filesize = round( filesize($dir . $file)/1024/1024 ,2)." MB";} else {$filesize = "-";}
                if(filetype($dir . $file) == "file") {$filedate = date("d.m.Y H:i:s", filectime($dir.$file));} else {$filedate = "-";}
                if(filetype($dir . $file) == "file") {
                echo(
                    "<tr>
                        <td><a href='?dir=".@$_GET['dir']."&file=".$file."'>".$file."</td>
                        <td>".$filetype."</td>
                        <td>".$filesize."</td>
                        <td>".$filedate."</td>
                    </tr>"
                ); } else {
                echo(
                    "<tr>
                        <td><a href='?dir=".@$_GET['dir']."/".$file."'>".$file."</td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                    </tr>"
                ); }

            }
        }
        closedir($handle);
    }
?> 
```

有什么办法可以限制吗？（我想我只是只见树木不见森林）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:29:59.063

这是我用于此类事情的基本安全检查。

```
function isSecurityViolation($dir) {
    if (preg_match('#https?://#i', $dir)) {
        return true;
    }

    // no directory traversal attempts
    if (strpos($dir, '../') !== false) {
        return true;
    }

    if (strpos($dir, "\x00") !== false) {
        return true;
    }

    if (strpos($dir, '%00') !== false) {
        return true;
    }

    return false;
} 
```

它检查以下违规行为：

*   尝试打开 http 或 https URL
*   目录遍历使用`..`
*   空字符检查可以允许恶意 url 通过某些功能

在脚本开头的某个地方，您可以调用：

```
if (isSecurityViolation($dir)) {
    die('No soup for you.');
} 
```

# c++ - 即使 nvidia.icd 存在并包含“libcuda.so”，getPlatformIDs() 也会返回 -1001

> ID：10776230
> 
> 赞同：2
> 
> 时间：2012-05-27T18:22:53.607
> 
> 标签：c++, ubuntu, opencl, nvidia, dlopen

我最近在我的 Ubuntu 12.04 机器上玩过 OpenCL。当我打电话时`cl::Platform::get`，我得到一个错误代码 -1001。经过一番研究，我发现当 c 调用`getPlatformIDs`未能找到有效平台时会发生这种情况，并且当您的 /etc/OpenCL/vendors/ 目录中没有 .icd 文件或实现时会发生这种情况（s ) 文件引用的文件无法通过调用来打开`dlopen`。
然而，我已经测试了所有这些可能性。在 /etc/OpenCL/vendors/ 中，我找到了 nvidia.icd，其中包含“libcuda.so”行。然后我尝试调用`dlopen`这个文件名，并成功了。然而，我的程序仍然返回 -1001 的错误代码！我的 nvidia 驱动程序在所有其他方面都运行良好，并且我能够编译该程序。什么可能是错的？

齐斯塔克

编辑：额外信息：我正在使用 nvidia-current-dev 驱动程序。我正在运行 nvidia GeForce GT 540M。

编辑：我最近发现了一些有趣的东西： [这](http://www.khronos.org/registry/cl/extensions/khr/cl_khr_icd.txt)是来自 Khronos 关于 icd 加载器的规范。它说：

> 成功加载供应商 ICD 的库后，ICD 加载器会从库中查询以下函数：clIcdGetPlatformIDsKHR、clGetPlatformInfo 和 clGetExtensionFunctionAddress。如果这些函数中的任何一个不存在，则 ICD 加载器将关闭并忽略该库。

这是一个实现 icd 加载器试图加载 nvidia 平台的人的帖子[。](http://www.nvnews.net/vbulletin/showthread.php?t=159051)它说：

> 我可以使用 dlsym() 从 libcuda.so 获取 clGetExtensionFunctionAddress 和 clGetPlatformInfo，然后我可以使用 clGetExtensionFunctionAddress 检索 clIcdGetPlatformIDsKHR。

在我的实验中，我只能成功查询 3 个函数中的 2 个 -`clGetPlatformInfo`和`clGetExtensionFunctionAddress`. 另一个失败了，正如论坛帖子所暗示的那样：作者继续说他们`clGetExtensionFunctionAddress`用来检索`clIcdGetPlatformIDsKHR`. 如果由 Khronos 实现的 ICD 加载器逐字遵循规范，那么它会失败是有道理的，因为查询`clIcdGetPlatformIDsKHR`会失败，并且库将被忽略。鉴于此，nvidia 的实现似乎并没有完全实现规范，除非有另一个我不知道的更新版本。然而其他人设法让 OpenCL 在他们的 nvidia 平台上正常工作。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T23:40:23.227

我想通了，这个命令的输出说明了一切：

```
lspci | grep VGA
00:02.0 VGA compatible controller: Intel Corporation 2nd Generation Core Processor Family Integrated Graphics Controller (rev 09)
01:00.0 VGA compatible controller: NVIDIA Corporation GF108 [GeForce GT 540M] (rev ff) 
```

我有 Optimus 技术，因此我的系统默认使用 Intel VGA 控制器。因此，nvidia 平台是无效的，因为从我的程序的角度来看，软件没有附加硬件。不幸的是，没有简单的方法来告诉操作系统忽略英特尔芯片而只使用 nvidia 芯片，而且 nvidia 不喜欢在 linux 下支持 optimus，因此没有适用于此设置的驱动程序。然而，安装 bumblebee 并运行我的程序`optirun`就像一个魅力。

# google-chrome-extension - Chrome 扩展 - 从 URL 截取屏幕截图而不在选项卡中显示页面

> ID：10776231
> 
> 赞同：1
> 
> 时间：2012-05-27T18:22:57.410
> 
> 标签：google-chrome-extension, webpage-screenshot

我的 chrome 扩展旨在定期从 Web URL 截取屏幕截图，并更新一些本地磁盘数据。我知道如何通过打开一个新标签并截屏来做到这一点。但是有没有办法避免打开一个新选项卡，或者至少打开一个隐藏的选项卡而不惹恼用户并默默地做这一切？

我不想在服务器上生成屏幕截图，我需要在本地机器上完成这一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T04:24:26.813

我不知道，也许你可以在后台页面的 iframe 中打开它？

但是[html2canvas](http://html2canvas.hertzen.com/)是一个库，它让你只用 JavaScript 就可以做到这一点。它不会是完美的，但我认为这就是你正在寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:13:07.617

我知道我的建议不会从字面上回答这个问题，但是当我注意到网上有很多关于定期截屏或抓取网页的问题时，我还是会发布它。其他偶然发现这个问题的人可能会从答案中受益。

如果您使用的是**Mac OSX**并且不介意一起绕过 Chrome，可以使用 webkit2png。

要么从

[http://www.paulhammond.org/webkit2png/](http://www.paulhammond.org/webkit2png/) [http://www.paulhammond.org/webkit2png/](http://www.paulhammond.org/webkit2png/)

或使用 Homebrew

```
brew install webkit2png 
```

和：

```
webkit2png http://google.com/ 
```

Mac 版本的 webkit2png 源自 Linux 原版，我没有测试过。我之所以提到这一点，是因为在 Internet 和 Stack Exchange 上的其他问题中，特别提到了**Linux 。**

[http://khtml2png.sourceforge.net/](http://khtml2png.sourceforge.net/)

和/或

[https://github.com/AdamN/python-webkit2png/](https://github.com/AdamN/python-webkit2png/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T04:25:47.820

现在我认为使用 NPAPI 插件执行此操作更安全，该插件可以静默截屏并通过我的 chrome 扩展调用其功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-07T09:27:33.980

除了我之前的回答，您可能还想查看[http://phantomjs.org/](http://phantomjs.org/)

一个可以轻松安装和配置以截取屏幕截图的 JavaScript 库。

# centos - libcurl 上 vps 错误

> ID：10776233
> 
> 赞同：0
> 
> 时间：2012-05-27T18:22:59.863
> 
> 标签：centos, vps

我一直在尝试编译一些东西，但是，在运行 ./configure 时，它​​不断吐出：configure: error: "libcurl 7.21 or later required"

我尝试通过在某些网站上找到的 RPM 安装 curl 和 libcurl 7.21，但它只是拖着我经历了一个巨大的长期依赖周期。有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:28:24.063

1.  修改配置。fe 7.19 安装在离要求的 7.21 不远的地方。
2.  从源代码制作 libcurl 的本地副本。

# c# - 我应该使用什么类型的变量？

> ID：10776238
> 
> 赞同：1
> 
> 时间：2012-05-27T18:24:28.907
> 
> 标签：c#, asp.net, variables

我正在开发一个asp.net 网站。我有一个 aspx 页面。我想使用一个变量，其值不应在回发期间重置，但是当传递到另一个页面并返回时，它应该被重置。而且我正在 C# 后面的代码中更改这个变量值。所以它应该在我想要的时候改变，它不应该在回发期间被重置，当我导航到另一个页面时它应该被重置。

我试着用

```
public int
public static int
protected int 
```

但我无法意识到哪个工作正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T18:39:22.463

通过回发保留数据的能力实际上并不取决于变量范围。选择公共、受保护或私有并不重要。

您正在寻找的技术称为[Session State](http://msdn.microsoft.com/en-us/library/ms178581.aspx)或[View State](http://msdn.microsoft.com/en-us/library/bb386448.aspx)。
`Session state`跨不同页面和`view state`同一页面内保留数据。实际上还有第三个，即[应用程序状态对象](http://msdn.microsoft.com/en-us/library/ms178594.aspx)，它也在不同的用户会话中全局保存数据。

在最简单的形式中，您将使用如下视图状态：

```
string myString = "123";
ViewState["MyString"] = myString; 
```

并在 post back 之后，在`Page_Load`方法中：

```
myString = ViewState["MyString"].ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T18:37:51.137

调查

```
Session["yourvar"] = 123; 
```

和

```
Application["globalvar"] = 456; 
```

msdn 文档[在这里](http://msdn.microsoft.com/en-us/library/ms178581.aspx)

# ruby - 地理编码器宝石：无法对某些谷歌地图结果进行反向地理编码

> ID：10776239
> 
> 赞同：1
> 
> 时间：2012-05-27T18:24:32.963
> 
> 标签：ruby, ruby-on-rails-3, rails-geocoder

使用[Geocoder gem](https://github.com/alexreisner/geocoder)，使用[高级地理编码](https://github.com/alexreisner/geocoder#advanced-geocoding)部分，我似乎无法让它工作。我基本上把[谷歌地图文档](https://developers.google.com/maps/documentation/geocoding/#JSON)上的每个**地址组件类型**都放在了**Geocoder::Result 块**中：

 **```
geocoded_by :street_address  do |obj,results|
 if geo = results.first
  obj.route = geo.route
  obj.intersection = geo.intersection
  obj.political = geo.political
  obj.country = geo.country
  obj.administrative_area_level_1 = geo.administrative_area_level_1
  obj.administrative_area_level_2 = geo.administrative_area_level_2
  obj.administrative_area_level_3 = geo.administrative_area_level_3
  obj.colloquial_area = geo.colloquial_area
  obj.floor = geo.floor
  obj.room = geo.room
 end
end
after_validation :reverse_geocode 
```

但我得到这个错误：

```
NoMethodError in StoresController#create

undefined method `route' for #<Geocoder::Result::Google:0x6939150> 
```

如果我删除它这个对象，它只会转到下一个对象，例如`intersection`.

这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T01:51:12.703

来自 API 文档[http://rdoc.info/github/alexreisner/geocoder/master/Geocoder/Result/Google](http://rdoc.info/github/alexreisner/geocoder/master/Geocoder/Result/Google)

```
 - (Object) address_components_of_type(type)

Get address components of a given type. Valid types are defined in Google's Geocoding API documentation and include (among others):

:street_number
:locality
:neighborhood
:route
:postal_code 
```

因此，对于您需要调用的路线示例`geo.address_components_of_type(:route)`**

# python - '@reify' 有什么作用，什么时候应该使用它？

> ID：10776244
> 
> 赞同：26
> 
> 时间：2012-05-27T18:25:04.490
> 
> 标签：python, pyramid

我在[UX 设计的 Pyramid 教程中](http://docs.pylonsproject.org/projects/pyramid_tutorials/en/latest/humans/creatingux/step06/index.html)看到了它。我无法弄清楚这个装饰器的全部内容。

我看到它的用法的示例代码。

```
def __init__(self, request):
    self.request = request
    renderer = get_renderer("templates/global_layout.pt")
    self.global_template = renderer.implementation().macros['layout']

@reify
def company_name(self):
    return COMPANY

@reify
def site_menu(self):
    new_menu = SITE_MENU[:]
    url = self.request.url
    for menu in new_menu:
        if menu['title'] == 'Home':
            menu['current'] = url.endswith('/')
        else:
            menu['current'] = url.endswith(menu['href'])
    return new_menu

@view_config(renderer="templates/index.pt")
def index_view(self):
    return {"page_title": "Home"}

@view_config(renderer="templates/about.pt", name="about.html")
def about_view(self):
    return {"page_title": "About"} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-27T18:42:33.570

从源代码文档：

> """ 在第一次调用后将使用此（非数据）描述符装饰器的方法的结果放入实例字典中，有效地用实例变量替换装饰器。"""

[来自模糊记事本博客](http://me.veekun.com/blog/2012/05/23/python-faq-descriptors/)的描述很好地总结了它。

> 它的作用类似于@property，只是该函数只被调用一次；之后，该值被缓存为常规属性。这使您可以在不可变的对象上创建惰性属性。

因此，在您发布的代码中，site_menu 可以像缓存属性一样进行访问。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-27T18:40:34.347

根据文档字符串（[source](https://github.com/Pylons/pyramid/blob/master/src/pyramid/decorator.py)）：

```
""" Put the result of a method which uses this (non-data)
descriptor decorator in the instance dict after the first call,
effectively replacing the decorator with an instance variable.""" 
```

# macos - 设置图标视图选项的字体颜色

> ID：10776248
> 
> 赞同：6
> 
> 时间：2012-05-27T18:26:23.183
> 
> 标签：macos, finder, dmg

在构建自定义 dmg 'drag installer' 时，出现了一个问题，是否可以更改图标下标签的字体颜色。

这里的信息似乎不是很积极——“图标视图选项”对象中没有这样的属性。

[http://docs.info.apple.com/article.html?path=AppleScript/2.1/en/as2039.html](http://docs.info.apple.com/article.html?path=AppleScript/2.1/en/as2039.html)

我想知道是否有人成功地完成了这一壮举？除了将文本嵌入背景本身之外，还有其他方式吗？

# javascript - 是否可以将元素打包在一起以优化空间使用？

> ID：10776249
> 
> 赞同：0
> 
> 时间：2012-05-27T18:26:32.913
> 
> 标签：javascript, html, css, packing

是否有可能让下图中的元素以某种方式更紧密地组合在一起？最好使用 css，但如果不可能，也欢迎使用 javascript 解决方案。

我希望所有元素尽可能紧密地包装在一起，以尽量减少它们占用的空间。这些元素当前跨度为`display:inline-block`. 我曾尝试使用 float:left 等更改为阻塞，但我总是以低效的元素行结束。这*是*预期的方式，我只是说在这种情况下我不希望它那样：P

![元素](../Images/56a5f53c81c87b5c2a30c8e182cf03a9.png)

有没有聪明的头脑可以在这里帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T18:31:06.273

如果您正在寻找更复杂的解决方案，请查看 jQuery`masonry`插件。链接在这里：[jQuery masonry 插件](http://masonry.desandro.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-09T15:19:02.560

Freetile 完美而简单 :) [https://github.com/yconst/Freetile](https://github.com/yconst/Freetile)

# python - 为什么 xrange 能够回到 Python 的起点？

> ID：10776250
> 
> 赞同：29
> 
> 时间：2012-05-27T18:26:35.220
> 
> 标签：python, iterator, xrange

我从[Most pythonic way of counting matching elements in something iterable 中遇到了这段代码](https://stackoverflow.com/questions/157039/most-pythonic-way-of-counting-matching-elements-in-something-iterable)

```
r = xrange(1, 10)
print sum(1 for v in r if v % 2 == 0) # 4
print sum(1 for v in r if v % 3 == 0) # 3 
```

r 被迭代一次。然后再次迭代。我想如果一个迭代器被消耗一次，那么它就结束了，它不应该再次迭代。

生成器表达式只能迭代一次：

```
r = (7 * i for i in xrange(1, 10))
print sum(1 for v in r if v % 2 == 0) # 4
print sum(1 for v in r if v % 3 == 0) # 0 
```

也枚举（L）：

```
r = enumerate(mylist) 
```

和文件对象：

```
f = open(myfilename, 'r') 
```

为什么 xrange 的行为不同？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-27T18:31:16.487

因为`xrange`不返回生成器。它返回一个[xrange 对象](http://docs.python.org/library/functions.html#xrange)。

```
>>> type(xrange(10))
<type 'xrange'> 
```

除了重复迭代之外，`xrange`对象还支持生成器不支持的其他事情——比如索引：

```
>>> xrange(10)[5]
5 
```

它们也有一个长度：

```
>>> len(xrange(10))
10 
```

它们可以颠倒过来：

```
>>> list(reversed(xrange(10)))
[9, 8, 7, 6, 5, 4, 3, 2, 1, 0] 
```

简而言之，`xrange`对象实现了完整的[序列](http://docs.python.org/glossary.html#term-sequence) [接口](http://docs.python.org/library/collections.html#collections-abstract-base-classes)：

```
>>> import collections
>>> isinstance(xrange(10), collections.Sequence)
True 
```

他们只是在不占用大量内存的情况下这样做。

另请注意，在 Python 3 中，`range`返回的对象`range`具有所有相同的属性。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-27T18:29:41.043

因为`xrange`调用生成的对象`xrange()`指定了一个在每次迭代时`__iter__`提供自身唯一版本（实际上是一个单独的对象）的对象。`rangeiterator`

```
>>> x = xrange(3)
>>> type(x)
<type 'xrange'>
>>> i = x.__iter__()
>>> type(i)
<type 'rangeiterator'> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T01:43:12.157

如果您所知道的只是它是一个迭代器，那么*通常*您必须假设您只能迭代它一次。这并不意味着*每个*迭代器只能被使用一次，只是每个迭代器*至少*可以被使用一次。一个明显的例子是列表和其他序列支持这个接口。

正如 senderle 和 Amber 所解释的，您通过调用获得的*特定*`xrange`迭代器恰好被实现，以便您可以多次迭代它们。

一般的迭代器思想允许迭代器在被迭代后可能会被耗尽。这是因为许多迭代器（例如生成器、文件遍历等）如果必须支持任意多的遍历，将难以实现，或者消耗更多的内存或运行得更慢，而且通常这个功能甚至不会用过的。所以如果迭代器必须支持任意多的遍历，那么这些东西可能就不是迭代器了。

长话短说，如果您正在编写在任意未知迭代器上运行的代码，您会假设它只能被遍历一次，并且如果有人给您一个支持超出您需要的功能的对象，这并不*重要*。如果您知道有关迭代器的一些其他信息（例如它也是一个序列，或者甚至与它是一个 xrange 对象一样多），那么您可以根据需要编写代码来使用它。

# google-chrome-extension - 将网页从 google chrome 扩展程序发送到桌面应用程序

> ID：10776251
> 
> 赞同：0
> 
> 时间：2012-05-27T18:26:35.677
> 
> 标签：google-chrome-extension

假设我创建了一个桌面笔记应用程序。是否可以创建一个允许将选定网页与该桌面应用程序通信的谷歌扩展程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T04:22:41.230

如果您说您希望您的桌面软件与网页通信，您可以在用户的​​计算机上开发一个[NPAPI 插件。](https://developer.mozilla.org/en/Plugins)（我建议从[FireBreath](http://www.firebreath.org/)开始）然后，您可以将[其打包到 Chrome 扩展程序中，](http://code.google.com/chrome/extensions/npapi.html)并使用您的其他软件自动[安装该 Chrome 扩展程序。](http://code.google.com/chrome/extensions/external_extensions.html)祝你好运！

# python - Python 3.2.2 IF 在 IDLE 中运行与从桌面运行时的行为不同

> ID：10776254
> 
> 赞同：3
> 
> 时间：2012-05-27T18:27:00.827
> 
> 标签：python, if-statement, behavior

再会！

今天我在用 Python 3.2.2 写一个小脚本，这段简单的代码决定给我带来麻烦。

```
def main():
    yn = ""
    #...
    while True:
        #...
        yn = input( "---> " )
        if yn.lower() != "y":
            break 
```

现在，这段代码的作用应该很明显了，但是当我在 Windows 7 上的 IDLE 中运行它时，它工作得非常好，或者当我双击桌面上的脚本图标并打开它时，不管天气与否我输入“y”它会关闭，当然这是一个简单的解决方法：

```
if yn.lower() == "n":
   #... 
```

这就是我所做的，但是我想知道这可能是什么原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T18:42:37.000

你确定你使用的是 3.2.2 而不是 3.2.0？

Windows 上的 Python 3.2.0 中有一个错误，从 stdin 读取有时会`\r`在字符串末尾留下 a ，这可以解释您所看到的内容。用于`yn.strip().lower()`解决错误或更新到当前版本 (3.2.3)。

具体问题描述为[http://bugs.python.org/issue11272](http://bugs.python.org/issue11272)，但如果您使用的是 3.2.2，它应该已经修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T18:43:45.190

它适用于 OSX（Python 3.2.2）：

```
yn = ""
while True:
    yn = input( "---> " )
    if yn.lower() != "y":
      break

pu@pumbair:~$ python3.2 test.py 
---> y
---> y
---> Y
---> Y
---> 
pu@pumbair:~$ python3.2 test.py 
---> n
pu@pumbair:~$ 
```

什么可执行文件与 .py 扩展名相关联？

# android - Android2.2播放swf需要外接Flash Player吗？

> ID：10776256
> 
> 赞同：1
> 
> 时间：2012-05-27T18:27:07.110
> 
> 标签：android, flash, embedded-flashplayer

我想在我的应用程序中使用 swf 动画。1\. 是否可以在没有安装 Adob​​e Flash Player 的情况下这样做，例如使用库？2\. 如果有，怎么做？如果没有，有没有办法检查播放器是否已安装或根据需要“标记”它？3.它应该在模拟器上工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T20:09:39.880

是的，您可以在 android 上使用 swf 动画，其工作方式包括：

创建一个播放 swf 的 html 页面，然后在 webview 组件中打开 html

您应该首先检查是否安装了 Flash 此代码段可以帮助您：

```
boolean flashInstalled = false;
try {
  PackageManager pm = getPackageManager();
  ApplicationInfo ai = pm.getApplicationInfo("com.adobe.flashplayer", 0);
  if (ai != null)
    flashInstalled = true;
} catch (NameNotFoundException e) {
  flashInstalled = false;
} 
```

通过使用 PackageManager，您可以获得 Flash Player 包的应用程序信息。如果这样的包不存在，它将抛出异常。

之后，您可以通过将 Flash 视频嵌入到 WebView 中来显示 Flash 视频以在 Activity 中播放动画。

如果您在第 1 部分中的检查返回 false，最佳做法是隐藏您的 WebView，并用解释 Flash 要求的错误消息替换它，或者更好的是，从 Android Market 下载 Flash 插件的链接。

是的，您可以在模拟器上安装 Flash 应用程序后对其进行测试！！

# matlab - MATLAB setpath 文件在哪里？

> ID：10776258
> 
> 赞同：1
> 
> 时间：2012-05-27T18:27:13.713
> 
> 标签：matlab, configuration, environment-variables

我想从 MATLAB 导出和更改 setpath 文件的文件夹。但我不知道这个文件在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T22:14:31.250

`pathdef`您可以执行以下操作，而不是直接导出/修改文件：

```
str = path;
save myPathBackup.mat str 
```

当您想恢复它时，请执行以下操作：

```
load myPathBackup.mat
path(str) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T18:30:11.853

在 Linux`/usr/local/MATLAB/R2012a/toolbox/local/pathdef.m`中，您需要将其中的`/usr/local/MATLAB/R2012a`部分替换为您的安装目录。

# solr - 如何禁用 solr 管理页面

> ID：10776263
> 
> 赞同：8
> 
> 时间：2012-05-27T18:28:56.547
> 
> 标签：solr

对于生产来说，拥有一个甚至不询问登录凭据的 solr 管理员是不安全的。如何禁用默认提供的 solr 管理页面？我只是希望我的 webapp 使用 Solr 进行搜索词索引。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-27T18:57:14.780

我强烈建议保留管理页面以进行调试。它在许多情况下拯救了我。有一些方法可以将其限制为仅通过 HTTP 身份验证的用户：[http](http://wiki.apache.org/solr/SolrSecurity#Jetty_example) ://wiki.apache.org/solr/SolrSecurity#Jetty_example 。您可能需要解压缩并重新压缩您的 web 应用程序。

但是，如果您仍想禁用整个管理部分，您可以注释掉 ${SOLR_HOME}/project/solr/conf/solrconfig.xml 中的管理 requestHandler。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T13:45:41.530

只需向 Solr Web 应用程序添加安全约束，您就可以使用密码保护您的管理页面。

Solr 3.6 的代码段：

```
 <security-constraint>
    <!-- This protects your admin interface and grants access to role Solr-Admin -->
    <web-resource-collection>
    <web-resource-name>Solr admin</web-resource-name>
      <!--url-pattern>/admin/*</url-pattern-->
      <url-pattern>/evu/admin/*</url-pattern>
      <url-pattern>/webcrawl/admin/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
      <role-name>Solr-Admin</role-name>
    </auth-constraint>
    <user-data-constraint>
      <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
  </security-constraint>

  <security-constraint>
    <!-- This protects your admin interface and grants access to roles Solr-Admin and Solr-Updater -->
    <web-resource-collection>
      <web-resource-name>Solr Update</web-resource-name>
      <url-pattern>/update/*</url-pattern>
      <url-pattern>/evu/update/*</url-pattern>
      <url-pattern>/webcrawl/update/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
      <role-name>Solr-Admin</role-name>
      <role-name>Solr-Update</role-name>
    </auth-constraint>
    <user-data-constraint>
      <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
  </security-constraint>

  <security-constraint>
    <!-- This one is necessary to show the image on the Solr start page -->
    <web-resource-collection>
      <web-resource-name>Solr Admin images</web-resource-name>
      <url-pattern>*.png</url-pattern>
    </web-resource-collection>
    <auth-contraint>
      <role-name>*</role-name>
    </auth-contraint>
  </security-constraint>

  <security-role>
    <description>The role that is required to administer Solr</description>
    <role-name>Solr-Admin</role-name>
  </security-role>
  <security-role>
    <description>The role that is required to update the Solr index</description>
    <role-name>Solr-Update</role-name>
  </security-role>

  <login-config>
    <auth-method>BASIC</auth-method>
    <realm-name>Solr</realm-name>
  </login-config>
</web-app> 
```

在 Solr 4 中，您必须保护管理界面的以下资源：

```
/admin/*
/admin.html 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-01T09:05:18.727

sudo vim /opt/solr-4.8.1/example/etc/jetty.xml 更改

```
 <!-- This connector is currently being used for Solr because it
          showed better performance than nio.SelectChannelConnector
          for typical Solr requests.  -->
    <Call name="addConnector">
      <Arg>
          <New class="org.eclipse.jetty.server.bio.SocketConnector">
            <Set name="host">0.0.0.0</Set>
            <Set name="port"><SystemProperty name="jetty.port" default="8983"/></Set>
            <Set name="maxIdleTime">50000</Set>
            <Set name="lowResourceMaxIdleTime">1500</Set>
            <Set name="statsOn">false</Set>
          </New>
      </Arg>
    </Call> 
```

到

```
 <!-- This connector is currently being used for Solr because it
          showed better performance than nio.SelectChannelConnector
          for typical Solr requests.  -->
    <Call name="addConnector">
      <Arg>
          <New class="org.eclipse.jetty.server.bio.SocketConnector">
            <Set name="host">127.0.0.1</Set>
            <Set name="port"><SystemProperty name="jetty.port" default="8983"/></Set>
            <Set name="maxIdleTime">50000</Set>
            <Set name="lowResourceMaxIdleTime">1500</Set>
            <Set name="statsOn">false</Set>
          </New>
      </Arg>
    </Call> 
```

然后 sudo service solrd restart

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-04T00:00:47.723

最简单的方法：

iptables -A INPUT -p tcp --dport 8983 -j DROP

iptables -A 输入 -p tcp -s 127.0.0.1 --dport 8983 -j 接受

有了这个命令！

# regex - 用于将 html 标签中的文本划分为单词的正则表达式

> ID：10776274
> 
> 赞同：0
> 
> 时间：2012-05-27T18:30:10.467
> 
> 标签：regex

有谁知道如何使用 RegEx 将 html 标签（h1-h6、a、b、i、br）中的文本划分为“单词”？例如，

### 输入：

```
<h4>TEST</h4> This sentence <br/> is <b><i>test</i></b> 
```

### 输出：

*“单词”的结果列表：*

```
<h4>TEST</h4>
This
sentence
<br/>
is 
<b> <i>test</i></b> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-21T19:55:29.163

我认为要做到这一点，您需要首先使用正则表达式解析 html，因为正则表达式还不够复杂。

我认为您需要使用解析器（在您选择的平台中）才能完成您的项目。

# android - 我看不到表面视图

> ID：10776277
> 
> 赞同：1
> 
> 时间：2012-05-27T18:30:18.987
> 
> 标签：android, android-camera, surfaceview

我正在尝试在android中预览相机，但是当我运行它时，应用程序只显示一个黑色窗口，标题和表面视图大小为（0px，0px）

这是我的活动：

```
package rolilink.test.android;
import java.io.IOException;

import android.hardware.Camera;
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.widget.Button;

public class CameraView extends Activity{
    private SurfaceView surface;
    private Camera camera;
    private Button stopbutton;
    protected void onCreate(Bundle SavedStateInstance){
        super.onCreate(SavedStateInstance);
        setContentView(R.layout.cameraview);
        Log.i("LogCamera", "Setteo el view");
        this.getUi();
        this.setListeners();
        try {
            this.startCameraPreview();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

    private void getUi(){
        this.surface=(SurfaceView) findViewById(R.id.CameraSurface);
        this.stopbutton=(Button) findViewById(R.id.btnStopPreview);
    }

    private void setListeners(){
        this.stopbutton.setOnClickListener(new View.OnClickListener(){
            public void onClick(View v) {
               finishWithCameraPreview();
            }
        });
    }

    private void startCameraPreview() throws IOException{
        this.camera= Camera.open();
        Camera.Parameters parameters = camera.getParameters();
        this.camera.setParameters(parameters);
        SurfaceHolder holder = this.surface.getHolder();
        this.camera.setPreviewDisplay(holder);
        camera.startPreview();
        Log.i("LogCamera", "Size of SurfaceView:"+this.surface.getHeight()+"x"+this.surface.getWidth());
    }

    private void finishWithCameraPreview(){
        this.camera.stopPreview();
        this.camera.release();

    }

} 
```

和我的布局cameraview：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:gravity="center">
    <SurfaceView 
        android:id="@+id/CameraSurface"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />
    <Button 
        android:id="@+id/btnStopPreview"
        android:text="Stop Preview"
        android:layout_marginTop="2dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />
</LinearLayout> 
```

# java - 几个 MouseListener 之间的 Java 变化

> ID：10776280
> 
> 赞同：2
> 
> 时间：2012-05-27T18:30:44.443
> 
> 标签：java, swing, mouselistener

我正在开发一个绘图程序，它使用了几个`MouseListeners`. 例如，我用 a`class`画一条线，用 a 画一条线，`MouseListener`另一个画圆。我从`MouseListener`a开始`button`，然后`validate()`被调用。现在，当鼠标悬停在元素上时，我想突出显示线条或圆形元素。但我不想`button`为它使用 a 。相反，在绘制`element`新`Mouselistener`的突出显示后应该开始。但是我不知道怎么打电话`validate()`。或者如何`MouseListener`在`non static`方法中实现 a。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T18:54:57.260

使用`element.removeMouseListener(theListener)`并添加另一个侦听器`element.addMouseListener(theOtheristener)`。

# jquery - 实时更改输入

> ID：10776284
> 
> 赞同：0
> 
> 时间：2012-05-27T18:31:11.620
> 
> 标签：jquery

如果第一个输入框不为空，我正在尝试使用 jQuery 禁用下一个输入框：

```
<input name = "mrp" id="mrp" type = "text" />
<input name = "miw" class="mmw" type = "text" />
<input name = "maw" class="mmw" type = "text" /> 
```

JavaScript 代码：

```
$(document).ready(function() {
        $('#mrp').blur(function() {     //i have even tried with live('change')
               var mrp = $(this).val();
               if(mrp != '' || mrp != ' '){
                 $('.mmw').attr("disabled", "disabled");   
               }
               else if(mrp == '' || mrp == ' '){
                   $('.mmw').removeAttr("disabled");
               }
               else{
                  $('.mmw').removeAttr("disabled");
               }
        });
}); 
```

它可以很好地禁用下一个输入框，但是当我清除第一个文本框时，它不会删除该`disabled`属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T18:33:11.153

您必须检测何时填充第一个输入。

这可以通过

```
$(window).ready(function() {  
    var handler = function() {
    if ($('#mrp').val().trim()!='') $('.mmw').attr("disabled", "disabled");
    else $('.mmw').removeAttr('disabled');
    };
    $('#mrp').keyup(handler).change(handler);
});​ 
```

“失去焦点”检测通常很糟糕，因为您不希望必须单击其他地方才能看到其他输入的变化。这就是我建议使用“keyup”的原因。

编辑：这是一个小提琴：http: [//jsfiddle.net/jxgTe/](http://jsfiddle.net/jxgTe/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T18:39:23.753

`keyup`例如，我使用事件，您可以使用`blur`或`keyup blur`两者都使用。

```
$('input[name=mrp]').keyup(function() {
    if ($.trim(this.value).length) {
        $(this).nextAll('input.mmw').prop('disabled', true);
    } else $(this).nextAll('input.mmw').prop('disabled', false);
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/QStkd/78/)**

# javascript - 如何通过javascript在文本区域中插入/删除字符

> ID：10776287
> 
> 赞同：1
> 
> 时间：2012-05-27T18:31:40.200
> 
> 标签：javascript, jquery, textarea

如何通过 javascript 在文本区域中添加/删除字符。假设我通过屏幕键盘输入。我需要模拟尽可能多的键，例如退格、删除、回车。更具挑战性的任务是为文本区域维护一个伪光标，并在从键盘接收输入时移动光标。

因此，如果我按下左箭头并且我有一个伪光标的轨迹，那么我需要将光标向后移动一个位置，然后从该位置插入/删除字符。

我希望我已经说清楚了。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T19:00:52.797

这是一个读取和设置光标位置的函数：

```
function doGetCaretPosition (ctrl) {
    var CaretPos = 0;   // IE Support
    if (document.selection) {
    ctrl.focus ();
        var Sel = document.selection.createRange ();
        Sel.moveStart ('character', -ctrl.value.length);
        CaretPos = Sel.text.length;
    }
    // Firefox support
    else if (ctrl.selectionStart || ctrl.selectionStart == '0')
        CaretPos = ctrl.selectionStart;
    return (CaretPos);
}
function setCaretPosition(ctrl, pos){
    if(ctrl.setSelectionRange)
    {
        ctrl.focus();
        ctrl.setSelectionRange(pos,pos);
    }
    else if (ctrl.createTextRange) {
        var range = ctrl.createTextRange();
        range.collapse(true);
        range.moveEnd('character', pos);
        range.moveStart('character', pos);
        range.select();
    }
} 
```

[从这个网站得到它](http://blog.vishalon.net/index.php/javascript-getting-and-setting-caret-position-in-textarea)

要捕获击键，您可以使用 jQuery，这是一个答案：

[将javascript绑定到键](https://stackoverflow.com/questions/1402698/binding-arrow-keys-in-js-jquery)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T19:03:36.117

1.  防止按下键时的默认处理

```
$('#textArea').keypress(function(event) {
  //console.log("Key down:" + event.keyCode);
  event.preventDefault();
  processKey(event);
}); 
```

2.  在 processKey(event) 中进行处理

3.  根据您的处理设置插入符号位置

```
function setCaretPosition(pos){
    var target = document.getElementById("target"); 
    if(target.setSelectionRange) {
        target.focus();
        target.setSelectionRange(pos,pos);
    }
    else if (target.createTextRange) {
        var range = target.createTextRange();
        range.collapse(true);
        range.moveEnd('character', pos);
        range.moveStart('character', pos);
        range.select();
    }
} 
```

# c++ - C++ 中运算符重载 + 和 +=

> ID：10776288
> 
> 赞同：1
> 
> 时间：2012-05-27T18:31:47.297
> 
> 标签：c++, operator-overloading

我对操作员操作加载概念很陌生，之前提出的相关问题比我早，所以我需要问一个基本问题。

这是.h文件：

```
#define ACCOUNT_H

using namespace std;

class Account{
  friend Account &operator+ (Account &acc);
  friend ostream &operator<< (ostream &, Account &);

  public:
    Account(double=100.0,double=0.0,double=0.0);

    Account &returnSum(Account &otherAccount) const;
    Account& operator+=(Account &Acc1);

    void setT(double);
    void setD(double);
    void setE(double);
    double getT(void);
    double getD(void);
    double getE(void);
    void printAccount();

  private:
    double t;
    double d;
    double e;
};

#endif 
```

我需要`+`作为全局函数重载“带有单个参数”（这对我来说是具有挑战性的部分）和`+=`成员函数（在这里我假设我不能采用右侧操作数，因为它是一个成员函数，所以是有问题的部分）。这是我的实现`+=`：

```
Account &Account ::operator+=(Account &Acc1){
   Account *result = new Account(Acc1.getT()+t,Acc1.getD()+d,Acc1.getE()+e);
   Acc1 = *result;
   return *this;
} 
```

如果您能纠正这一点`+=`并为我写一个重载实现，我将不胜感激`+`。我只需要将 t,d,e 值添加为 Account 对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T18:33:45.503

如果您想`operator+`作为免费功能，您需要：

```
friend Account operator+ (const Account &acc, const Account &secondAcc); 
```

此外，`operator +`是一个二元运算符，因此它不可能只接收一个参数。即使是成员函数，它也需要 2 个参数，只是第一个参数 ,`this`是在后台传递的。

所以，你的两个选择：

### 1) 会员运营商

```
class Account{
    Account operator+ (const Account &acc);
}; 
```

### 2) 自由运营商

```
class Account{
    friend Account operator+ (const Account &acc, const Account &secondAcc);
};

Account operator+ (const Account &acc, const Account &secondAcc)
{
} 
```

**非常重要 1**：

请注意，我是按值返回，而不是像您那样引用。这是为了防止 UB，因为您可能会返回一个局部变量，通过引用返回该变量是非法的。

**非常重要2**：

```
Account &Account ::operator+=(Account &Acc1){

   Account *result = new Account(Acc1.getT()+t,Acc1.getD()+d,Acc1.getE()+e);
   Acc1 = *result;

   return *this;

} 
```

此代码将泄漏。为什么不使用自动存储变量：

```
Account &Account ::operator+=(Account &Acc1){
   Account result(Acc1.getT()+t,Acc1.getD()+d,Acc1.getE()+e);
   Acc1 = result;
   return *this;
} 
```

仍然不确定里面的逻辑，但至少它不会泄漏内存。你现在拥有它的方式，你正在修改参数，而不是你调用的对象`+=`。所以之后，说，`a+=b`仍然`a`是一样的，并且`b`会被修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T19:16:29.343

```
Account &Account ::operator+=(Account &Acc1){
   Account *result = new Account(Acc1.getT()+t,Acc1.getD()+d,Acc1.getE()+e);
   Acc1 = *result;
   return *this;
} 
```

这里有两个大问题。一个是 Luchian Grigore 提到的泄漏。另一个是这与 operator+= 的行为方式不同。问题是您正在修改`Acc1`. 你应该修改`this`. 以下代码在您的重载时会表现得非常奇怪：

```
Account total;
Account joes_account;
...
total += joes_account; 
```

使用您的代码，它是`joes_account`用 sum 而不是 variable 更新的`total`。

# c++ - C++。错误 LNK1104。第一次构建解决方案时无法打开库文件

> ID：10776290
> 
> 赞同：3
> 
> 时间：2012-05-27T18:31:54.603
> 
> 标签：c++, visual-studio, linker

我有带有 C++ 项目的旧版 MSVS 解决方案。当我从版本控制系统中获取它并第一次尝试构建它时（当它干净时） - 我收到错误：找不到 LNK 1104 库。

当我第二次尝试构建它时 - 一切都构建好了。

项目“A”（C++）依赖于项目“B”（也是 C++）的库（lib 文件）。

“A”在它的一个 cpp 文件中有类似的代码（可能 stdafx.h 是#pragma 注释的更好位置？）：

```
#pragma comment(lib, "B.lib") 
```

这会导致第一个构建的链接器错误

我调查了第一个构建结果：“B”项目编译成功，“lib”文件生成，“A”项目（取决于“B”）是解决方案项目构建顺序中的最后一个项目。

我想知道为什么“A”第一次没有看到“B”库，因为“B”应该比“A”更早构建。当我第二次构建相同的解决方案时 - 没有链接器错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:39:23.333

右键单击项目 A > 项目依赖项
检查项目 B

VS不会从代码中扣除依赖，需要明确告诉

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T18:47:23.667

这与构建顺序有关。如果项目 A 先构建，`B.lib`则尚不存在。所以你得到了错误。然后构建并`B.lib`生成项目 B。当您再次构建时，由于库存在，错误就消失了。

要解决这个问题，您需要告诉解决方案 A 依赖于 B。右键单击解决方案，转到项目依赖项，`A`在“项目”中选择并选中`B`“依赖于”。就像是：

![在此处输入图像描述](../Images/013e1723f76e2241835e1af1dd739ffc.png)

# solr - solr 分片作为*滚动*分区

> ID：10776291
> 
> 赞同：2
> 
> 时间：2012-05-27T18:32:31.233
> 
> 标签：solr, sharding

有没有一种简单的方法可以让 solr 按日期将分片维护为滚动分区，例如，最后一天的文档在一个分片中，前一周在下一个分片中，前一个月在下一个分片中，等等？我真的不需要在整个索引上快速查询，但在最近的文档中快速查询是至关重要的。

一个相关但不同的问题：我可以在哪个配置文件中更改默认哈希函数以将文档分配给分片？这个过时的帖子 [http://wiki.apache.org/solr/NewSolrCloudDesign](http://wiki.apache.org/solr/NewSolrCloudDesign) 似乎建议您可以定义自己的哈希函数以及为分区分配哈希范围，但我不确定 solr 3.6 是否或如何支持这一点。就此而言，我不知道 SolrCloud（据我所知仅在 solr4 中可用）是否或如何支持这一点。我的目标是跨分片对文档进行非统一分区（与`hash(ID)%numShards`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T23:38:43.253

I think that custom hashing in SolrCloud is not implemented yet, more info [SOLR-2592](https://issues.apache.org/jira/browse/SOLR-2592)

# ruby-on-rails - 我如何 .split 包含引号的这个字符串？

> ID：10776293
> 
> 赞同：0
> 
> 时间：2012-05-27T18:32:54.960
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, model

[http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)

我正在使用的代码来自一个 jquery-tokeninput 分支，它允许在框中输入多个新令牌（不仅仅是已经存在的令牌）。当他们点击提交时，它返回的字符串格式是这样的：

`16,42,'Subway',37,'McDonald\'s',734.`

这些是存在的令牌的 ID 号，对于不存在的令牌，它会将它们包装在“引号”中。

我的问题是如何更改我的 new_custom_tokens 方法来解释他们是否输入了新令牌（检查它是否在引号中）。最终它会检查他们的帐户是否足够老以添加新标签，然后我需要运行我假设的 Tag.new （所以它只在它们完全有效时保存它，包括资源验证）

编辑：我还认为我需要某种不会在引号内拆分内容的验证

资源.rb

```
 def tag_tokens=(tokens)
    self.tokens_list = tokens.split(",")

    if new_custom_tokens?
      custom_token_time_restriction
    else
      self.tag_ids = self.tokens_list
    end
  end

  def new_custom_tokens?
    if self.token_list ... #... not sure
  end

  def add_new_tag_time_restriction
    # TODO: Check if they are anonymous or their account is newer than 7 days
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:57:11.023

如果我理解正确，这应该可以解决问题：

```
def new_custom_tokens?
  self.tokens_list.each { |token|
    return true if token.include? "'"
  }
  false
end 
```

基本上，它遍历 token_list 数组，如果任何标记具有 ' 字符，则返回 true。

# c - 如果条件没有得到遵守

> ID：10776295
> 
> 赞同：1
> 
> 时间：2012-05-27T18:33:03.727
> 
> 标签：c

我对以下代码有疑问：

```
/* 
 * Esercizio 5
 */

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char* getProduct(char product[]);
long getNumber(char product[]);

int main(int argc, char** argv) {

    char product1[60] = {0};
    char product2[60] = {0};
    char product3[60] = {0};
    char productInput[60] = {0};

    int flag = 0;
    long cost = 0;

    printf("Product 1: ");
    gets(product1);
    printf("Product 2: ");
    gets(product2);
    printf("Product 3: ");
    gets(product3);

    do {

        printf("Product and quantity: ");
        gets(productInput);
        printf("productInput: %s\n", getProduct(productInput));
        printf("product1: %s\n", getProduct(product1));
        if(getProduct(product1) == getProduct(productInput)){ /* PROBLEM HERE!!! */

            // No matter what i input it always goes here
            printf("Selezionato prodotto 1");
            cost = getNumber(product1) * getNumber(productInput);
            flag = 1;

        } else if(getProduct(product2) == getProduct(productInput)){

            printf("Selezionato prodotto 1");
            cost = getNumber(product2) * getNumber(productInput);
            flag = 1;

        } else if(getProduct(product3) == getProduct(productInput)){

            printf("Selezionato prodotto 1");
            cost = getNumber(product3) * getNumber(productInput);
            flag = 1;

        }

    }  while(!flag);

    printf("Costo totale: %d", cost);

    return (EXIT_SUCCESS);
}

char* getProduct(char product[]){

    char *pointer;
    char str_product[60] = {0};

    strcpy(str_product, product);

    pointer = strtok(str_product, " ");

    return pointer;

}

long getNumber(char product[]){

    char *pointer;
    char str_product[60] = {0};

    strcpy(str_product, product);

    pointer = strtok(str_product, " ");
    pointer = strtok(NULL, " ");

    return strtol(pointer, NULL, 10);

} 
```

如您所见，`getProduct(productInput)`并`getProduct(product1)`返回指向不同值的指针。问题是，即使值不同，`if`条件也没有得到尊重。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T18:36:18.047

您正在尝试通过`==`运算符比较字符串，这并没有按照您的预期进行。

相反，您需要通过调用`strcmp()`（或者更好的是，`strncmp()`）来比较它们

```
if(strmcp(getProduct(product1), getProduct(productInput)) == 0){ 
```

比较字符串`==`不能正常工作的原因是`==`比较指针（基本上是存储字符串的内存位置），而不是字符串本身

# java - 有没有办法在 Android / Java 中发送 HttpUriRequest 的 Content-Length 之前获取它？

> ID：10776302
> 
> 赞同：1
> 
> 时间：2012-05-27T18:34:08.330
> 
> 标签：java, android, http, httprequest

我想让我的 Android 应用程序跟踪它自己的数据使用情况。我可以获取 HTTP 响应的 Content-Length，但在发送请求之前我找不到如何获取请求的大小。所有请求（GET、POST、PUT 等）都是`HttpUriRequest`.

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T19:15:31.177

所有带有内容的请求都应该是`HttpEntityEnclosingRequestBase`.

```
HttpUriRequest req = ...;
long length = -1L;
if (req instanceof HttpEntityEnclosingRequestBase) {
    HttpEntityEnclosingRequestBase entityReq = (HttpEntityEnclosingRequestBase) req;
    HttpEntity entity = entityReq.getEntity();
    if (entity != null) {
        // If the length is known (i.e. this is not a streaming/chunked entity)
        // this method will return a non-negative value.
        length = entity.getContentLength();
    }
}

if (length > -1L) {
    // This is the Content-Length. Some cases (streaming/chunked) doesn't
    // know the length until the request has been sent however.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T19:38:16.783

该类`HttpUriRequest`继承自`HttpRequest`具有名为 的方法的类`getRequestLine()`。您可以调用此函数并调用该`toString()`方法，然后调用该`length()`函数来查找请求的长度。

例子：

```
HttpUriRequest req = ...;
int reqLength = req.getRequestLine().toString().length()); 
```

`String`这将为您提供请求表示的长度。

# php - php日期时间运算符

> ID：10776307
> 
> 赞同：0
> 
> 时间：2012-05-27T18:35:11.513
> 
> 标签：php, jgrasp

如果时间是 12 点，我将如何检查 php，如果是，则执行一些代码。这就是我到目前为止所拥有的。

我希望每天在特定时间执行代码，并且只在那个时间执行。

```
 if (date('H') == 20) 
 {
 //code to be carried out

 CODE
 CODE
 CODE
 echo ("lol");
 } 
```

然而，无论时间如何，编解码器似乎都在运行！

即使时间不是晚上 8 点，程序也会每次都回显 lol。

感谢任何帮助谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T18:56:19.947

如果您想在每天的某个时间执行 php 脚本，请查看[cron 作业](https://en.wikipedia.org/wiki/Cron)。

[这里](http://www.siteground.com/tutorials/cpanel/cron_jobs.htm)有一个关于如何在 cPanel 中设置 cron 作业的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T18:49:04.373

它没有在我的测试中呼应：

[http://codepad.org/7ZvAKHWh](http://codepad.org/7ZvAKHWh)

```
g 12-hour format of an hour without leading zeros 1 through 12 
G 24-hour format of an hour without leading zeros 0 through 23 
h 12-hour format of an hour with leading zeros 01 through 12 
H 24-hour format of an hour with leading zeros 00 through 23 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-27T18:49:56.620

您的代码应该可以工作，除非不是这样 --- 尝试从原始来源复制

# cocos2d-iphone - 关于 CCLayerPanZoom Cocos Extensions 缩放的建议

> ID：10776310
> 
> 赞同：0
> 
> 时间：2012-05-27T18:35:31.233
> 
> 标签：cocos2d-iphone

嗨，

我已经开始开发一款 RPG 游戏。我使用放在 CCLayerPanZoom 上的等距样式图。现在我想在瓷砖地图上定位怨恨。当我单击时，我得到了新 Sprite 在地图上的位置的偏离位置。为什么？层与层之间是否存在滑动？有没有办法将地图附加到缩放图层，以便点击位置与地图上我想要放置新精灵的位置相对应。

请帮忙。

这是我的 init() 对于那些想要查看它的人，只需查看包含 Xcode 项目的 zip 即可。这是一个 Kobold2D 项目。我有相同的项目，但没有 CCLayerPanZoom 层。那里的定位工作完美。重要说明：当地图被拖动以使左边缘恰好位于 IPAD 模拟器左侧的边界上时，瓷砖放置几乎可以了。瓷砖放置在正确的位置。

```
 - (id) init
   {
    if ((self = [super init])) 
    {
    //touches enables
    self.isTouchEnabled = YES;

    //instantiate the PanZoomLayer
    panZoomLayer = [CCLayerPanZoom node];
    //seting poperties for the pan zoom layer
    panZoomLayer.maxScale = 1.0f;
    panZoomLayer.minScale = 0.2f;
    panZoomLayer.maxSpeed = 100.0f;
    panZoomLayer.maxTouchDistanceToClick = 1000.0f;
    panZoomLayer.panBoundsRect = CGRectNull;
    panZoomLayer.mode = kCCLayerPanZoomModeSheet;

    //add the zoom layer to the CCLayer
    [self addChild: panZoomLayer z:-1];

    //if I uncoment this it thros me an error by ccTouchesEnded
    //It has to be commented like this
            //panZoomLayer.delegate = self; 

    self.map = [CCTMXTiledMap tiledMapWithTMXFile:@"isometric-no-offset.tmx"];

    _map.anchorPoint = ccp(0,0);
            _map.scale = CC_CONTENT_SCALE_FACTOR();

    layer = [_map layerNamed:@"Ground"];
    layer.visible = YES;

    [panZoomLayer addChild: _map 
                         z :-1 
                        tag:kTileMapTag];
            // create and initialize a Label
            CCLabelTTF *label = [CCLabelTTF labelWithString: @"Zooming and scroling Demo" 
                                           fontName: @"Marker Felt" 
                                           fontSize: 30];
            label.scale = 0.7f; //< to be visible on iPod Touch screen.
            label.color = ccBLUE;
            // add the label as a child to this Layer
            [panZoomLayer addChild: label 
                          z: 1 
                        tag:kLabelTag];

    _player = [CCSprite spriteWithFile:@"ninja.png"];

    //map size 
    mapHeight = _map.contentSize.height;
    mapWidth = _map.contentSize.width;

    //screen size
    CGSize screenSize = [[CCDirector sharedDirector] winSize];
    screenCenter = CGPointMake(screenSize.width / 2, screenSize.height / 2);

    //Hide/Show character
    [_player setVisible:YES];
    _player.position = ccp(300, 400);
    [panZoomLayer addChild:_player z:2];

    //dot initialization
    self.dot = [CCSprite spriteWithFile:@"d2.png"];
    //_dot. position = ccp(200,200);
    [_map addChild:dot z:3];

    panZoomLayer.mode = kCCLayerPanZoomModeSheet;
    panZoomLayer.minScale = 0.6f;
    panZoomLayer.maxScale = 2.0f;
    panZoomLayer.rubberEffectRatio = 1.1f;

    //test different scren reshapes
    //the zooming and scroling works also without any of the following methods

    //simple. until now the most convenient
    [self updateForScreenReshape1];

    //ruber. means center on screen. zoom out more in as previous
    //[self updateForScreenReshape2];

    //with zones. zoom out more and in less
    //[self updateForScreenReshape3];

}

return self; 
```

} gBoy 宝贝黑客

帖子：8 加入时间：2012 年 5 月 10 日星期四晚上 7:26 已感谢：0 次 已感谢：0 次

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T00:47:37.387

所以问题是你触摸/点击屏幕来放置一个精灵，精灵出现在一些随机的地方，而不是你想要的地方？

我没有使用过 Kobold2D（我主要使用香草 iOS cocos2D），但听起来是的，有“层之间的滑动”正在发生。当您将 _map 添加为 panZoomLayer 的子项时，_map 将继承 panZoomLayer 中发生的任何移动。

为了让精灵正确地坐在 _map 图层上，您必须计算从 panZoomLayer 到屏幕中心的位置差异，并使用该值来调整精灵的位置。

当你制作一个新的精灵时，你可以在你的 ccTouch 方法中做一些与此等价的事情：

```
CGPoint location = [[CCDirector sharedDirector] convertToGL:[touch locationInView:[touch view]]];

[newSprite setPosition: ccpSub(screenCenter, location)]; 
```

顺便说一句，当地图被拖到左边时，这些位置似乎可以正常工作，因为从它的原点的偏移量是（或接近）0。

# c# - 具有三个 Int16 值的 C#GetHashCode？

> ID：10776313
> 
> 赞同：1
> 
> 时间：2012-05-27T18:35:44.727
> 
> 标签：c#, hash, dictionary, hashmap, gethashcode

我将此函数用于 C# 哈希映射中的一个键，例如类“字典”。

x、y 和 z 是 Int16。

```
public override int GetHashCode()
{
    return (x << 16) | (UInt16)y;
} 
```

我如何将其扩展到使用所有 3 个变量？

* * *

请参阅[覆盖 System.Object.GetHashCode 的最佳算法是什么？](https://stackoverflow.com/questions/263400/what-is-the-best-algorithm-for-an-overridden-system-object-gethashcode)对于任何类型的任何数量的变量的更一般的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:50:31.387

对于任意类型的三个变量x、y、z，标准方法如下：

```
return x.GetHashCode() ^ y.GetHashCode() ^ z.GetHashCode(); 
```

^ 是 XOR 运算符。

您也可以使用 XOR 运算符将其他变量合并到您的方法中。

# php - CSS - Wordpress Jquery 框中的按钮位置

> ID：10776314
> 
> 赞同：1
> 
> 时间：2012-05-27T18:36:02.137
> 
> 标签：php, css, wordpress-theming

我希望你能再次帮助我。昨天，在您的帮助下，我用 JQuery 解决了我的问题。

所以我的问题是，在我的网站 newspace.cc 上，每篇文章下都有一个小 JQuery 框，其中显示了一些社交分享按钮。我想在框中正确划分按钮（Flattr、Like、Tweet、Google Plus）。因为好看。

但它并没有开始工作:(

我的 CSS 样式表：http: [//pastebin.de/26552](http://pastebin.de/26552) 我的 PHP 脚本： http: [//pastebin.de/26551](http://pastebin.de/26551)

所以我希望你能帮助我。提前谢谢！

迎接迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T18:49:31.613

您能否扩展您的意思：“在正确和完美的距离内。但它并没有开始工作:(”？

你希望他们在哪里？完全不同的位置？还是只是朝着某个方向轻推？

# ipad - 为什么 iPad 上的 Safari 不在嵌入式 Google 地图页面上显示我的标记？

> ID：10776318
> 
> 赞同：1
> 
> 时间：2012-05-27T18:36:34.590
> 
> 标签：ipad, google-maps, mobile-safari

我必须为客户在网页上嵌入谷歌地图。
我希望地图显示一个标记，显示客户业务的确切位置，以及他们的详细信息摘要（地址、网页、电话号码等）。
我用来执行此操作的代码由谷歌地图网站（不是第三方服务）提供，我没有修改它。
这在我测试过的每个桌面浏览器中都非常有效，并且标记显示正确。

但是，当我在 iPad 上查看页面时，标记会从地图中移除。
相反，地图下方有一个“A. Client's Name”形式的链接（我不知道 A. 代表什么）。当点击（点击）这个链接什么都不做。如果我用手指按住它并选择“在新标签中打开”，它会在新标签中打开我客户的 Google 地方信息页面，正如您所期望的那样。

此链接旁边是两个按钮（一个是电话，一个是其他东西，可能是“获取路线”），单击时会显示消息“Safari 无法打开页面，因为地址无效”

这是一个 jsfiddle（使用随机业务），它说明了我的问题：http: [//jsfiddle.net/H2whg/](http://jsfiddle.net/H2whg/)

是否可以在移动 safari 中对这种行为做任何事情（让按钮做一些明智的事情或完全删除它们）？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T19:02:06.947

它*确实*显示了您的标记，但它位于地图显示区域的南部。

您的来源很长：

[http://maps.google.de/maps?f=q&source=s_q&hl=de&geocode=&q=Harrods,+Brompton+Road,+London,+Gro%C3%9Fbritannien&aq=0&oq=harrods&sll=51.500808,-0.143003&sspn=0.006532 ,0.016512&g=白金汉+皇宫,+伦敦,+United+Kingdom&ie=UTF8&hq=Harrods,+Brompton+Road,+伦敦,+Gro%C3%9Fbritannien&hnear=&radius=15000&t=m&cid=5481296058834203814&ll=51.51539&spn=0.0-01.51539&spn=0.0-0.0.51539&spn=0.0-0.0.0\. ,0.072956&z=13&iwloc=A&输出=嵌入](http://maps.google.de/maps?f=q&source=s_q&hl=de&geocode=&q=Harrods,+Brompton+Road,+London,+Gro%C3%9Fbritannien&aq=0&oq=harrods&sll=51.500808,-0.143003&sspn=0.006532,0.016512&g=Buckingham+Palace,+London,+United+Kingdom&ie=UTF8&hq=Harrods,+Brompton+Road,+London,+Gro%C3%9Fbritannien&hnear=&radius=15000&t=m&cid=5481296058834203814&ll=51.515366,-0.157413&spn=0.037389,0.072956&z=13&iwloc=A&output=embed)

iPad版本存在一些冲突。特别是，`ll`修复地图中心——而你希望你的标记在那里。由于您必须`z`修复缩放，因此您不需要`spn`定义适合地图的跨度。

摆脱这两个确实允许标记显示在地图上。

[http://maps.google.de/maps?f=q&source=s_q&hl=de&geocode=&q=Harrods,+Brompton+Road,+London,+Gro%C3%9Fbritannien&aq=0&oq=harrods&sll=51.500808,-0.143003&sspn=0.006532 ,0.016512&g=白金汉+宫殿,+伦敦,+United+Kingdom&ie=UTF8&hq=Harrods,+Brompton+Road,+伦敦,+Gro%C3%9Fbritannien&hnear=&radius=15000&t=m&cid=5481296058834203814&zembed=13&iwloc=A&output=](http://maps.google.de/maps?f=q&source=s_q&hl=de&geocode=&q=Harrods,+Brompton+Road,+London,+Gro%C3%9Fbritannien&aq=0&oq=harrods&sll=51.500808,-0.143003&sspn=0.006532,0.016512&g=Buckingham+Palace,+London,+United+Kingdom&ie=UTF8&hq=Harrods,+Brompton+Road,+London,+Gro%C3%9Fbritannien&hnear=&radius=15000&t=m&cid=5481296058834203814&z=13&iwloc=A&output=embed)

请注意，iPad 实现不使用 infoWindow。相反，您会在地图中看到一系列标记，从 A 开始，并在其下方有一个相应的列表。

# ios - 在 iOS 上，缓存绘制的屏幕图像并显示它的最快方法是什么？

> ID：10776321
> 
> 赞同：9
> 
> 时间：2012-05-27T18:36:48.513
> 
> 标签：ios, calayer, quartz-graphics, cglayer

与其让`drawRect`每次重绘数千个点，我认为有几种方法可以“在屏幕上缓存图像”和任何其他绘图，我们将添加到该图像，并在需要时显示该图像`drawRect`：

1.  使用 BitmapContext 绘制位图，然后在`drawRect`中绘制此位图。

2.  使用`CGLayer`并绘制`CGLayer`in `drawRect`，这可能比方法 1 更快，因为此图像缓存在显卡中（并且它不会计入 iOS 上“内存警告”的 RAM 使用量？）

3.  绘制到 a `CGImage`，并使用视图的图层：`view.layer.contents = (id) cgimage;`

所以好像有3种方法，我觉得`CALayer`方法（3）中只能用a`CGImage`来实现。 `CALayer`本身不能缓存屏幕图像，不像`CGLayer`（2）中那样。

方法（2）是三种方法中最快的吗，还有其他方法可以做到吗？我实际上计划制作一些屏幕图像的动画（循环超过 5 或 6 个），并将尝试使用`CADisplayLink`60fps 的最高帧速率。方法（1）、（2）或（3）中的任何一种是否会使用显卡中的内存，因此不使用 RAM，因此也不太可能从 iOS 收到内存警告？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-27T21:47:13.490

根据您提出的最后几个问题，您似乎完全混淆了 CGLayers 和 CALayers。它们是不同的概念，彼此之间并没有真正的关系。CGLayer 是一种 Core Graphics 构造，它有助于在 Core Graphics 上下文的画布内重复呈现内容，并且被限制在单个视图、位图或 PDF 上下文中。我很少需要使用 CGLayer。

CALayer 是一个核心动画层，iOS 中的每个 UIView 都有一个支持（以及 Mac 上支持层的 NSView）。你一直在 iOS 上处理这些，因为它们是 UI 架构的基础部分。每个 UIView 实际上是围绕 CALayer 的轻量级包装器，而每个 CALayer 反过来实际上是围绕 GPU 上的纹理四边形的包装器。

在屏幕上显示 UIView 时，第一次需要渲染内容（或触发完全重绘时）Core Graphics 用于获取线条、弧线和其他矢量绘图（有时也包括光栅位图）和光栅化他们到一个位图。然后通过 CALayer 将该位图上传并缓存在 GPU 上。

对于界面的变化，例如视图被移动、旋转、缩放等，这些视图或图层不需要重新绘制，这是一个昂贵的过程。相反，它们只是在 GPU 上转换并在新位置合成。这就是在整个 iOS 界面中看到流畅的动画和滚动的原因。

因此，如果您想获得最佳性能，您将希望避免使用 Core Graphics 重绘任何内容。缓存你可以在 CALayers 或 UIViews 中的场景的哪些部分。想想老式动画如何使用 cel 来包含他们将移动的场景部分，而不是让动画师重新绘制场景中的每一个变化。

您可以轻松获得数百个 CALayer，以便在现代 iOS 设备上流畅地为屏幕制作动画。但是，如果您想为粒子系统之类的东西做数千个点，那么通过迁移到 OpenGL ES 并使用 GL_POINTS 进行渲染会更好。这将需要更多的代码来设置，但这可能是为您询问的“数千点”获得可接受的性能的唯一方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T06:28:22.533

一种允许缓存图形和修改这些缓存的图形内容的快速方法是您的方法 (1) 和 (3) 的混搭。

(1) 创建您自己的基于位图的图形上下文，对其进行绘制，然后根据需要随时修改（增量添加一个点或不时增加数千个点等）。不幸的是，它将是不可见的，因为无法直接将任何位图显示在 iOS 设备上。

所以，此外，

(3) 在某个帧率（60 Hz、30 Hz 等）下，如果位图脏（已修改），则将位图上下文转换为 CGImage 并将该图像分配给 CALayer 的内容。这会将整个位图的内存转换并复制到 GPU 纹理缓存（这是慢速部分）。然后使用核心动画对图层执行任何您想要的操作（刷新、合成、在窗口周围飞行等）以显示由位图制成的纹理。在幕后，Core 动画最终会让 GPU 使用该纹理将四边形投射到一些合成的窗口块上，这些块最终将被发送到设备显示器（这种描述可能会遗漏图形和 GPU 管道中的一大堆阶段）。在主 UI 运行循环中冲洗并根据需要重复。我关于这种方法的博客文章在[这里](http://www.musingpaw.com/2012/04/drawing-in-ios-apps.html).

无法部分修改正在使用的现有 GPU 纹理的内容。您要么必须用一个完整的新纹理上传替换它，要么在纹理层的顶部合成另一个层。因此，您最终将使用双倍内存，一些在 CPU 地址空间中，一些在 GPU 纹理缓存中。

# system.data.sqlite - monotouch.dialog 构建 CRUD 数据库访问的最佳方式

> ID：10776332
> 
> 赞同：0
> 
> 时间：2012-05-27T18:39:01.410
> 
> 标签：system.data.sqlite, monotouch.dialog

我有很多使用 SQL、SQLite 和 C# 在 Windows 上编写数据库的经验，试图找出使用 MonoTouch.Dialog 进行数据库操作的最佳方法，我的最后一个 C# 项目将所有表中的所有记录加载到镜像的类中数据库中的表带有一个名为dirty(bool) 的额外字段来计算需要更新的内容。

我猜我应该对 MonoTouch.Dialog 做同样的事情，当 dialogviewcontrollers 被关闭时更新 SQLite？，明智的做法是将表类包装到 dialogviewcontrollers 类的类中，因为这似乎是正确的方法，例如为每个 dialogviewcontroller 创建单独的类，并包含里面的数据。

向上和向下移动主详细信息视图（例如传递 ID）的最佳方法是什么。

谢谢

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T02:18:38.370

In my current MT.D project I define a service layer that handles database access. I subclass DialogViewController to pass the *id* of the appropriate database row when e.g. opening a new form to edit the object. The new DVC is then responsible for any CRUD operations against the database via the service layer.

If the DVC updates the database, the service layer raises an event with an argument containing the modified object. The parent DVC event handler is notified of changes to the data and can update the UI appropriately. This relies on the MT.D sections and elements being available in the DVC so when creating e.g. elements I store them in a Dictionary that is indexed by the data object *id*.

For me this provides a sufficiently decoupled architecture and I assemble the app using the [Funq](http://funq.codeplex.com/) DI framework (needs to be recompiled for MonoTouch). I'm interested to know how others handle this within a MT.D app.

# makefile - SOURCE 中带有空格的生成文件

> ID：10776337
> 
> 赞同：0
> 
> 时间：2012-05-27T18:39:50.463
> 
> 标签：makefile

我有这个 Makefile

```
CC=g++
CFLAGS=-g -c -Wall -o standalone
MYSQLINCLUDE = -I/usr/local/include/mysql
MYSQLINCLUDESP = -I/usr/local/include/
LDFLAGS =-L/usr/local/lib
LDFLAGSSP =-L/usr/local/lib/mysql  -lmysqlclient -lmysqlcppconn
SOURCES= /usr/eval/demo 1/user/demo1/p2/main.cpp 
OBJECTS=$(SOURCES:.cpp=.o)
EXECUTABLE=p2
all: $(SOURCES) $(EXECUTABLE)
$(EXECUTABLE): $(OBJECTS)
    $(CC) $(LDFLAGS) $(LDFLAGSSP) $(OBJECTS) -o $@
.cpp.o:
    $(CC) $(MYSQLINCLUDESP) $(CFLAGS) $< -o $@
clean:
    rm -rf $(OBJECTS) $(EXECUTABLE) *.core 
```

问题出在这条线上

```
SOURCES= /usr/eval/demo 1/user/demo1/p2/main.cpp 
```

在 demo 和 1 之间有空格，我得到这个错误

```
`make: don't know how to make /usr/eval/demo Stop` 
```

这个 Makefile 是从其他程序自动生成的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T21:04:40.293

Try to escape:

```
SOURCES=/usr/eval/demo\ 1/user/demo1/p2/main.cpp 
```

Or use quotes:

```
SOURCES="/usr/eval/demo 1/user/demo1/p2/main.cpp" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T18:26:09.297

在 Windows 上的 MSYS 下工作（GNU make 3.79.1）我与这个问题斗争了一段时间，并想出了：

```
ifndef ESCAPE_PATH
ESCAPE_SPACE = $(subst _,,_ _)
ESCAPE_PATH = $(subst $(ESCAPE_SPACE),\$(ESCAPE_SPACE),$(1))
endif 
```

然后，例如：

```
PROBLEM = ../problem with spaces.txt

PROBLEM_ESCAPED = $(call ESCAPE_PATH,$(PROBLEM))

$(PROBLEM_ESCAPED):
    date >$(PROBLEM_ESCAPED)

md5: $(PROBLEM_ESCAPED)
    md5sum $(PROBLEM_ESCAPED) >$(PROBLEM_ESCAPED).md5sum 
```

这适用于一个简单的 make 文件，甚至在更复杂的情况下，但我有一个实际项目，它不起作用，并且在一个通用示例中重现来演示并不简单。许多包含文件带来数据、可重用的生成资源、目标等。分配给问题的值也来自包含文件中的其他变量，包括相对于 $(CURDIR) 计算的路径，尽管最终在文件名中解析为一个简单的常量字符串。导致损坏的确切情况是什么尚不清楚，并且至少一次尝试为这篇文章创建示例并没有重现问题（GNU make 无法检测到 $(PROBLEM) 文件已经存在并且不需要重建）。

似乎很清楚（对我来说）文件名中的空格对 GNU make 构成了挑战，没有明显的一刀切解决方案。

# c# - 为什么使用两个 IPEndPoint？

> ID：10776339
> 
> 赞同：1
> 
> 时间：2012-05-27T18:40:08.877
> 
> 标签：c#, sockets, msdn

我正在创建一个 UDP 服务器。我从 MSDN 中找到了以下代码参考。任何人都可以解释为什么他们在代码示例中使用两个 IPEndPoint 对象。我假设第二个 ipeEdpoint 是发件人（客户端）的地址。但怎么可能呢？客户端的IP地址可以从数据报包中提取，那么这里第二个对象的目的是什么？这可能是一个简单而愚蠢的问题，但我有点困惑......：D

```
 byte[] data = new byte[1024];

  IPEndPoint ipep = new IPEndPoint(IPAddress.Any, 9050);

  UdpClient newsock = new UdpClient(ipep);

  Console.WriteLine("Waiting for a client...");

  IPEndPoint sender = new IPEndPoint(IPAddress.Any, 0);

  data = newsock.Receive(ref sender); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T20:45:15.693

对`UdpClient`构造函数的调用传入主机端点。`UdpClient`Receive 开始接收数据的过程——在另一个进程向您在构造函数中创建的端点发出请求之前，它不会做任何事情。当该连接*发生*时，向您发送数据的进程的端点`UdpClient`将可用。例如在`sender`变量中。

# php - 商店最受欢迎的产品，表1中的数组和表2所示

> ID：10776340
> 
> 赞同：0
> 
> 时间：2012-05-27T18:40:20.890
> 
> 标签：php, mysql

我想在网站上显示商店最受欢迎的商品表 1 是最后购买的商品，表 2 是产品详细信息

表 1 中的第一个查询：`SELECT item_id FROM $tableName ORDER BY views DESC LIMIT 5`
**结果：** 1156 、 1146 、 1749 、 1325 、 1952

**为了显示表 2 中的 MostPopulars Products 的此结果，我必须做什么？**
最后结果访问者可以查看，例如：
Example_Name_item1156 - Price:15$
Example_Name_item1146 - Price:38$
Example_Name_item1749 - Price:29$
Example_Name_item1952 - Price:17$

*我使用 PHP 和 MySQL*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T18:48:34.017

```
select p.* from products p
inner join (SELECT item_id, views FROM $tableName) as i on i.item_id = p.item_id
ORDER BY i.views DESC 
LIMIT 5 
```

# javascript - jQuery Mobile 嵌套列表刷新解决方案

> ID：10776342
> 
> 赞同：9
> 
> 时间：2012-05-27T18:40:27.910
> 
> 标签：javascript, jquery, jquery-mobile, browser-history, pushstate

我正在尝试使用 jquery Mobile 1.1 版刷新嵌套列表的解决方法，它目前给您留下一个空白页面。

我知道一个现有的解决方案是启用 pushState ，但这会将您送回列表的根目录，并在您的下一个嵌套列表视图中使用历史状态。

**我在**下面提出的解决方案并不漂亮，但适用于 iOS 和更新的 android。

```
$(document).bind("mobileinit", function(){

 var urlEx = '#&ui-page=5-0';  //ending of nested list url

 if (window.location.href.indexOf(urlEx) != -1){

  history.replaceState("", "0", "index.php");
   setTimeout("window.location.href='https://FULLURL#/FULLURL&ui-page=5-0'",100);
 }

 window.history.pushState("", "0", "index.php"); 

}); 
```

我意识到不是每个浏览器都支持 pushState 和 replaceState ，我可以尝试使用：

```
window.location.href = window.location.href.substring(0,window.location.href.indexOf('#')); 
```

相反，但它变得更加不稳定的用户体验。

我希望有人能阐明什么可以做得更好或如何做得更好/更可靠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:37:52.630

`$("#<mySelector>").listview("refresh");`

或者

`$("#<mySelector>").refresh("listview");`

除非我完全误解了您的问题，否则您应该能够使用上面的任何一行来刷新您要添加到的列表，其中`<mySelector>`任何 JQuery 兼容选择器将返回您的列表视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:12:23.830

这段代码对我有用：

```
$("#newList").append("<li class='ui-li-desc'><div><b>"+data[i].Title+":</b></div><small><div class='ui- li-desc'>"+data[i].Content+"</div></small></li>");

$("#newList").listview("refresh"); 
```

这`#newlist`是 ul 的 ID，data 是一个对象。

# php - 如何将枚举值保存到数据库中，使用带有学说和 symfony2 的自定义枚举数据类型？

> ID：10776345
> 
> 赞同：2
> 
> 时间：2012-05-27T18:40:39.933
> 
> 标签：php, symfony, doctrine-orm

这是我最初的问题的后续问题： [将 mysql 枚举迁移到使用 symfony2 的理论实体的最佳策略？](https://stackoverflow.com/questions/10763029/best-strategy-for-migrating-mysql-enums-to-doctrine-entities-with-symfony2)

我已经按照此处的说明成功添加了枚举数据类型：http: [//docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/cookbook/mysql-enums.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/cookbook/mysql-enums.html) 更具体地说，我使用了使用后半部分的解决方案 2 我创建了一个基本 EnumType 类，然后将其扩展为：

```
<?php
namespace CP\AdminBundle\DataTypes;

class EnumContactBasicGender extends EnumType
{
    protected $name = 'EnumContactBasicGender';
    protected $values = array('m','f');

} 
```

我的 EnumType 类看起来像：

```
<?php
namespace CP\AdminBundle\DataTypes;

use Doctrine\DBAL\Types\Type;
use Doctrine\DBAL\Platforms\AbstractPlatform;

abstract class EnumType extends Type
{
    protected $name;
    protected $values = array();

    public function getSqlDeclaration(array $fieldDeclaration, AbstractPlatform $platform)
    {
        $values = array_map(function($val) { return "'".$val."'"; }, $this->values);

        return "ENUM(".implode(", ", $values).") COMMENT '(DC2Type:".$this->name.")'";
    }

    public function convertToPHPValue($value, AbstractPlatform $platform)
    {
        return $value;
    }

    public function convertToDatabaseValue($value, AbstractPlatform $platform)
    {
        if (!in_array($value, $this->values)) {
            throw new \InvalidArgumentException("Invalid enum value given: '".$this->value."' for enum: '".$this->name."'");
        }
        return $value;
    }

    public function getName()
    {
        return $this->name;
    }
} 
```

然后我像这样注册了我的枚举：

```
<?php

namespace CP\AdminBundle;
use Doctrine\DBAL\Types\Type;
use Symfony\Component\HttpKernel\Bundle\Bundle;

class CPAdminBundle extends Bundle
{

 public function boot()
    {
        $em = $this->container->get('doctrine.orm.entity_manager');
        Type::addType('EnumContactBasicGender', 'CP\AdminBundle\DataTypes\EnumContactBasicGender');
        Type::addType('EnumContactBasicType', 'CP\AdminBundle\DataTypes\EnumContactBasicType');
        $em->getConnection()->getDatabasePlatform()->registerDoctrineTypeMapping('EnumContactBasicGender','EnumContactBasicGender');
        $em->getConnection()->getDatabasePlatform()->registerDoctrineTypeMapping('EnumContactBasicType','EnumContactBasicType');
    }
} 
```

当我运行命令**./app/console dictionary:generate:entities CP**时，它起作用了！它使用新的枚举数据类型创建我的实体，它毫无问题地创建了 setter 和 getter，我的一个实体如下所示：

```
<?php
namespace CP\AdminBundle\Entity;
use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * CP\AdminBundle\Entity\ContactBasic
 *
 * @ORM\Table(name="contacts_basics")
 * @ORM\Entity(repositoryClass="CP\AdminBundle\Entity\ContactBasicRepository")
 */
class ContactBasic
{
    /** Field #1 (contacts_id) **/
    /**
    * @var integer $contacts_id
    * @ORM\Column(type="integer",nullable=false)
    * @ORM\Id
    * @ORM\GeneratedValue(strategy="AUTO")
    */
    private $contacts_id;
    /** enum ('m','f') **/
    /**
    * @ORM\Column(type="EnumContactBasicGender",nullable=false)
    */
    private $gender;
    /** enum ('non-customer','customer','blacklisted') **/
    /**
    * @ORM\Column(type="EnumContactBasicType",nullable=false)
    */
    private $type;

        /** more omitted properties here **/

    /**
     * Set gender
     *
     * @param EnumContactBasicGender $gender
     */
    public function setGender(\EnumContactBasicGender $gender)
    {
        $this->gender = $gender;
    }

    /**
     * Get gender
     *
     * @return EnumContactBasicGender 
     */
    public function getGender()
    {
        return $this->gender;
    }
    /**
     * Set type
     *
     * @param EnumContactBasicType $type
     */
    public function setType(\EnumContactBasicType $type)
    {
        $this->type = $type;
    }

    /**
     * Get type
     *
     * @return EnumContactBasicType 
     */
    public function getType()
    {
        return $this->type;
    }

        /** more omitted setters and getters here **/
} 
```

当我创建一个夹具加载器时，我的问题出现了，我不知道如何设置任何枚举值以将它们保存到数据库中，到目前为止，我的夹具加载器类如下所示：

```
<?php
namespace CP\AdminBundle\DataFixtures\ORM;

use Doctrine\Common\DataFixtures\FixtureInterface;
use Doctrine\Common\Persistence\ObjectManager;
use CP\AdminBundle\Entity\ContactBasic;
use CP\AdminBundle\DataTypes\EnumContactBasicGender;
use CP\AdminBundle\DataTypes\EnumContactBasicType;

class ContactBasicLoader implements FixtureInterface
{
    public function load(ObjectManager $manager)
    {

        $contact = new ContactBasic();
      //  $contact->setGender(new EnumContactBasicGender());
        $contact->setGender('m');

       // $contact->setType(new EnumContactBasicType());
        $contact->setType('customer');

        $manager->persist($contact);
        $manager->flush();

    }
} 
```

当我运行**./app/console dictionary:fixtures:load**时，我收到以下错误：

```
Catchable Fatal Error: Argument 1 passed to CP\AdminBundle\Entity\ContactBasic::setGender() must be an instance of EnumContactBasicGender, string given 
```

但是如果我像上面的注释行一样通过类，我也会得到一个错误。

有人可以解释一下我需要如何设置所需的值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:49:42.753

Doctrine 不完全支持枚举。枚举类型看起来很专业，但没有人以这种方式使用枚举。解决方法是在实体中设置一些具有整数值的静态变量，并将枚举字段设置为整数类型。

对于您的问题，我将更改性别设置器：

*   没有方法参数 输入并传递一个简单的字符串
*   从字符串构建一个枚举对象
*   将 enumObject 分配给实体。

问候， 马克斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T13:26:39.053

我遇到了一个非常相似的问题，我通过在 XXXEnumType 类中添加相同的值数组但公共和静态的值来解决，这样我在一个地方指定了我的枚举的内容，从每个地方访问它并 foreach :)

但首先，检查您是否在 app/config/config.yml 中添加了 my_foo_type：

```
# Doctrine Configuration
doctrine:
    dbal:
        driver:   %database_driver%
        host:     %database_host%
        port:     %database_port%
        dbname:   %database_name%
        user:     %database_user%
        password: %database_password%
        charset:  UTF8
        types:
          my_foo_type:      use XXX\DBAL\XXXEnumType
        mapping_types:
          enum: string 
```

* * *

```
<?php
namespace XXX\DBAL;

class XXXEnumType extends EnumType
{
    protected $name = 'enum_xxx';
    protected $values = array('first', 'second', 'last');

    public static $static_name = 'enum_xxx';
    public static $static_values = array('first', 'second', 'last');

    public function getValues()
    {
        return $this->values;
    }
} 
```

从我项目的其他地方我可以做：

```
use XXX\DBAL\XXXEnumType; 
```

* * *

```
foreach (XXXEnumType::$static_values as $value)
{
    //do some stuff
} 
```

希望能帮助到你，

Linuxatico

# php - 制作 活跃的包括使用 PHP 和 CSS

> ID：10776347
> 
> 赞同：0
> 
> 时间：2012-05-27T18:40:44.207
> 
> 标签：php, css, class, menu, include

我使用这些文件作为我网站的基础：

`menu.php`: _

```
$p = $_GET['p'];

switch($p)
{
    case "home":
        $p = "page/home.php";
    break;

    case "customers":
        $p = "page/customers.php";
    break;

    default:
        $p = "page/home.php";
    break;
}

<ul id='nav'>

   <li>Title</li>
    <ul>
        <li class="nav active"><a href="?p=home">Home</a></li>
        <li><a href="?p=customers">Customers</a></li>
    </ul>
</ul> 
```

`default.php`: _

```
<body>
 <div id='navcontainer'>
  <?php include ("menu.php"); ?>
 </div>

<div id='content'>
 <?php include ($p); ?>
</div> 
```

`style.css`: _

```
#navcontainer {margin:0; padding:0; width:220px;float:left;}
#nav li {background:#36393D; color:#fff; padding:5px 3px 5px 20px; margin:4px;border-left:5px solid #3F4C6B;}
#nav ul li{display:block; padding:3px; background:#fff; color:#000;border:none; padding:3px 0 3px 30px;}
#nav ul li:hover, #nav ul li.active {background:#eee; cursor:pointer; border-left:5px solid #4096EE;padding:3px 0 3px 25px;}
#nav ul li a {text-decoration:none; color:#000;} 
```

和`home.php`所有页面：

```
<p>Hello world!</p> 
```

我想知道是否有可能让我根据当前访问的页面`menu.php`切换到`nav active`项目。`<li>`

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T18:50:33.283

仅使用 php，您可以创建一个额外的变量

```
<?php
  $p = $_GET['p'];
  $currentPageId = 0;

  switch($p)
  {
    case "home":
        $p = "page/home.php";
        $currentPageId = 1;    
    break;

    case "customers":
        $p = "page/customers.php";
        $currentPageId = 2;    
    break;

    default:
        $p = "page/home.php";
        $currentPageId = 1;    
    break;
  }
?>

<ul id='nav'>

   <li>Title</li>
    <ul>
        <li <?php if($currentPageId == 1) { echo 'class="nav active"'; } ?> ><a href="?p=home">Home</a></li>
        <li <?php if($currentPageId == 2) { echo 'class="nav active"'; } ?> ><a href="?p=customers">Customers</a></li>
    </ul>
</ul> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T18:50:12.320

您可以在 REQUEST 中提供一些 id，然后添加：

```
$id = $_GET['id'] 
```

然后

```
<li <?php if($id == your_id){ echo "class='nav visited'";} ?> > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-21T15:13:57.873

我无法得到

```
$p = $_GET['p']; 
```

去工作。对我有用的是

```
$p = $_SERVER[REQUEST_URI]; 
```

# jquery - 无法让 jQuery 选择属性 id 而不是名称

> ID：10776350
> 
> 赞同：-2
> 
> 时间：2012-05-27T18:42:01.170
> 
> 标签：jquery

我正在尝试调整下面的 jQuery 以选择 id 而不是 name 属性，因为我无法将名称设置为与 id 相同。我也试过让它选择标题属性。我是 jQuery 新手，并不完全理解它，我是否完全错误，或者我需要做什么才能让它起作用？

```
jQuery(document).ready(function () {
    var formfield;
    jQuery('.upload_image_button').click(function () {
        jQuery('html').addClass('Image');
        formfield = jQuery(this).prev().attr('name');
        tb_show('', 'media-upload.php?type=image&amp;TB_iframe=true');
        return false;
    });
    window.original_send_to_editor = window.send_to_editor;
    window.send_to_editor = function (html) {
        if (formfield) {
            fileurl = jQuery('img', html).attr('src');
            jQuery('#' + formfield).val(fileurl);
            tb_remove();
            jQuery('html').removeClass('Image');
        } else {
            window.original_send_to_editor(html);
        }
    };
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T18:44:03.900

尝试这个：

```
formfield = $('element[name="something"]'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T18:45:07.997

```
formfield = jQuery(this).prev().attr('id'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T18:45:57.773

如果你有`id`你可以选择这种方式：

```
$('#element-id').foo 
```

如果你只有名字：

```
$('[name="name-value"]').foo 
```

当然，您可以添加更多过滤器选项，例如：

```
$('#foo input[name="name-value"]').foo 
```

这将选择带有id`name-value`的元素的后代的输入。`foo`

# android - 如何在没有首选项屏幕等的情况下存储共享首选项

> ID：10776351
> 
> 赞同：1
> 
> 时间：2012-05-27T18:42:16.397
> 
> 标签：android

我只想在单击复选框时存储用户名和密码。我不需要上下文菜单和首选项屏幕。我怎样才能有一个简单的方法将这些值存储在我的登录类中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T18:47:49.980

将字符串值（例如）存储在应用程序共享首选项中，来自任何活动派生类：

```
SharedPreferences prefs = getSharedPreferences(PEFS_DESIRED_NAME, MODE_PRIVATE);
    prefs.edit().putString("password", mPasswordValue).commit(); 
```

下次加载它：

```
SharedPreferences prefs = getSharedPreferences(PEFS_DESIRED_NAME, MODE_PRIVATE);
mPasswordValue = prefs.getString("password", DEFAULT_VALUE_IF_NOT_EXISTS); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T18:49:17.057

您不必使用首选项屏幕。

这是一个示例代码（应该在活动、服务或您拥有的任何上下文中运行）：

阅读：

```
SharedPreferences sharedPreferences=getSharedPreferences("settings",Context.MODE_PRIVATE);
String userName=sharedPreferences.getString("userName",null);
String password=sharedPreferences.getString("password",null); 
```

写作：

```
Editor editor=getSharedPreferences("settings",Context.MODE_PRIVATE).edit();
editor.putString("userName",userName);
editor.putString("password",password);
editor.commit() 
```

对于“设置”，我建议使用唯一的常量字符串，例如活动的类名。当然你可以使用任何你想要的东西......

# solr - 如何在 Solr 方面搜索中正确编码术语

> ID：10776358
> 
> 赞同：1
> 
> 时间：2012-05-27T18:43:33.120
> 
> 标签：solr, filter, space, facet

当我使用以下 Solr 查询执行搜索时，我得到了我想要的：已用术语“PHP”或“编程”标记的“课程”。

```
q=[* TO *]&facet=on&facet.field=facet_contenttype&fq=facet_contenttype:mediaitems_course&facet.field=facet_wmterm&fq=(facet_wmterm:PHP OR Programming) 
```

现在，我还想包含带有“C# .NET”标签的课程。整个字符串“C# .NET”是我正在使用的 CMS 中的一个标签。我已经为 facet_wmterm 过滤器查询尝试了以下可能性。

```
&fq=(facet_wmterm:PHP OR Programming OR C# .NET) // no quotes
&fq=(facet_wmterm:PHP OR Programming OR 'C# .NET') // quotes
&fq=(facet_wmterm:PHP OR Programming OR 'C#+.NET') // quotes and replaced space for + sign
&fq=(facet_wmterm:PHP OR Programming OR C#%2b.NET) // no quotes, encoded + sign
&fq=(facet_wmterm:PHP OR Programming OR 'C#%2b.NET') // quotes, encoded + sign
&fq=(facet_wmterm:PHP OR Programming OR 'C%23+.NET') // quotes, encoded # sign
&fq=(facet_wmterm:PHP OR Programming OR C%23+.NET) // no quotes, encoded # sign
&fq=(facet_wmterm:PHP OR Programming OR 'C%23%2B.NET') // quotes, encoded # and + signs
&fq=(facet_wmterm:PHP OR Programming OR C%23%2B.NET) // no quotes, encoded # and + signs
and a lot more options.... 
```

奇怪的是，以上所有选项都会返回所有课程，无论它们被标记为什么，而且我很确定我不是在看缓存，因为删除“C# .NET”位会给我最初的、正确的“PHP 或编程”结果.

我很想学习如何在我的方面查询中包含“C# .NET”，因为我快要发疯了 :) 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T19:00:05.373

要确定哪种转义方案效果最好，请尝试在每个术语前加上字段名称。因此，例如，采取你的第三行，试试这个：

```
&fq=(facet_wmterm:PHP OR facet_wmterm:Programming OR facet_wmterm:'C#+.NET') // quotes and replaced space for + sign 
```

原因是每个术语必须指定它需要在哪个字段中，否则会在默认字段 ( `text`) 中搜索。对于转义问题，文字必须用双引号编码，而其他需要按字面显示的特殊符号必须是 URL 编码的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T19:43:24.680

重复字段名称确实有效果。

```
&fq=facet_wmterm:Test1 OR PHP 
```

..给我所有结果（=错误）并像这样重复字段名称

```
&fq=facet_wmterm:Test1 OR facet_wmterm:PHP 
```

..给我的课程只有Test1或PHP（=正确！）。谢谢你的安萨里。

不过，这仍然没有帮助我正确查询 .NET C# 课程，因为我也错误地转义了特殊字符。在 Solr 中，您可以使用引号从字面上搜索引号之间的内容，但您必须使用**双引号**而不是我使用的单引号。[http://wiki.apache.org/solr/SolrQuerySyntax](http://wiki.apache.org/solr/SolrQuerySyntax)

这对我有用：

```
&fq=(facet_wmterm:Test1 OR "C# .NET") 
```

# java - 显示在玻璃窗格上方的 JWebBrowser（扩展 JPanel）

> ID：10776359
> 
> 赞同：1
> 
> 时间：2012-05-27T18:43:40.207
> 
> 标签：java, swing, jframe, jpanel, glasspane

我正在使用 DJ Native Swing API 来使用 JWebBrowser。

```
public class GUI extends JPanel {

    Robot robot;
    JComponent glassPane;

    public GUI(final Bot bot) {
        super(new BorderLayout());
        try {
            robot = new Robot();
        } catch (AWTException e) {
            e.printStackTrace();
        }
        JPanel webBrowserPanel = new JPanel(new BorderLayout());
        JWebBrowser webBrowser = new JWebBrowser(JWebBrowser.constrainVisibility());
        webBrowser.setBarsVisible(false);
        webBrowser.setButtonBarVisible(false);
        webBrowser.setMenuBarVisible(false);
        webBrowser.navigate("http://google.com");
        webBrowserPanel.add(webBrowser, BorderLayout.CENTER);
        add(webBrowserPanel, BorderLayout.CENTER);

        JPanel buttonPanel = new JPanel(new FlowLayout(FlowLayout.CENTER, 4, 4));
        final JButton button = new JButton("Start");
        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                if (bot.isRunning()) {
                    button.setText("Start");
                } else {
                    button.setText("Stop");
                }
                bot.setRunning(!bot.isRunning());
            }
        });
        buttonPanel.add(button, BorderLayout.WEST);
        add(buttonPanel, BorderLayout.NORTH);

        JFrame mainFrame = new JFrame("Bot");
        mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        mainFrame.getContentPane().add(this, BorderLayout.CENTER);

        glassPane = new JComponent()
        {
            public void paintComponent(Graphics g)
            {
                g.setColor(new Color(1, 0, 0, 0.5f));
                g.fillRect(10, 10, 815, 775);
            }
        };
        glassPane.setSize(815,775);
        glassPane.setOpaque(false);
       mainFrame.setGlassPane(glassPane);
        glassPane.setVisible(true);

        mainFrame.setSize(815, 775);
        mainFrame.setLocationRelativeTo(null);
        mainFrame.setVisible(true);
    }
} 
```

当我运行它时，我希望在整个 GUI 上看到一个红色矩形。这不是发生的事情。这是我看到的（对不起，它不会让我直接发布图片）：http: [//i.stack.imgur.com/ZAe51.png](http://i.stack.imgur.com/ZAe51.png)

为什么 JWebBrowser 出现在玻璃窗格上？我认为玻璃窗格应该涵盖一切。

JWebBrowser 扩展了 JPanel。这是文档：[Javadoc](http://djproject.sourceforge.net/ns/documentation/javadoc/chrriis/dj/nativeswing/swtimpl/components/JWebBrowser.html)

我对这个玻璃窗格的目标是能够在用户使用 GUI 时获得鼠标位置。由于某种原因，鼠标位置使用 webBrowser.getMousePosition() 或 webBrowserPanel.getMousePosition() 返回 null（即使它位于组件上方）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T18:50:59.497

> 为什么 JWebBrowser 出现在玻璃窗格上？我认为玻璃窗格应该涵盖一切。

因为你设置`mainFrame.setGlassPane(glassPane);`

> 我对这个玻璃窗格的目标是能够在用户使用 GUI 时获得鼠标位置。由于某种原因，鼠标位置使用 webBrowser.getMousePosition() 或 webBrowserPanel.getMousePosition() 返回 null（即使它位于组件上方）。

`GlassPane`默认为 consume `MouseEvents`，但您可以重新调度这些事件

编辑

如果我使用来自 codersource 的代码示例

```
import java.awt.Image;
import java.awt.Toolkit;
import java.util.Arrays;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

import chrriis.common.UIUtils;
import chrriis.dj.nativeswing.swtimpl.NativeInterface;
import javax.swing.JRootPane;

/**
 * @author Christopher Deckers
 */
public class DemoFrame {

    public static void main(String[] args) {
        UIUtils.setPreferredLookAndFeel();
        NativeInterface.open();
        Toolkit.getDefaultToolkit().setDynamicLayout(true);
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                JFrame demoFrame = new JFrame("The DJ Project - NativeSwing (SWT)");
                Class<DemoFrame> clazz = DemoFrame.class;
                if (System.getProperty("java.version").compareTo("1.6") >= 0) {
                    demoFrame.setIconImages(Arrays.asList(new Image[]{
                                new ImageIcon(clazz.getResource("resource/DJIcon16x16.png")).getImage(),
                                new ImageIcon(clazz.getResource("resource/DJIcon24x24.png")).getImage(),
                                new ImageIcon(clazz.getResource("resource/DJIcon32x32.png")).getImage(),
                                new ImageIcon(clazz.getResource("resource/DJIcon48x48.png")).getImage(),
                                new ImageIcon(clazz.getResource("resource/DJIcon256x256.png")).getImage(),}));
                } else {
                    demoFrame.setIconImage(new ImageIcon(clazz.getResource("resource/DJIcon32x32Plain.png")).getImage());
                }
                demoFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                demoFrame.getContentPane().add(new DemoPane());
                demoFrame.setSize(800, 600);
                demoFrame.setLocationByPlatform(true);

                MyGlassPane glassPane = new MyGlassPane();
                JRootPane rootPane = SwingUtilities.getRootPane(demoFrame);
                rootPane.setGlassPane(glassPane);
                glassPane.activate("");

                demoFrame.setVisible(true);
            }
        });
        NativeInterface.runEventPump();
    }
} 
```

使用@camickr 编写的代码

```
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import javax.swing.*;
import javax.swing.border.*;

/*
 *  Simple implementation of a Glass Pane that will capture and ignore all
 *  events as well paint the glass pane to give the frame a "disabled" look.
 *
 *  The background color of the glass pane should use a color with an
 *  alpha value to create the disabled look.
 */
public class MyGlassPane extends JComponent
        implements KeyListener {

    private final static Border MESSAGE_BORDER = new EmptyBorder(10, 10, 10, 10);
    private JLabel message = new JLabel();

    public MyGlassPane() {
        //  Set glass pane properties

        setOpaque(false);
        Color base = UIManager.getColor("inactiveCaptionBorder");
        Color background = new Color(base.getRed(), base.getGreen(), base.getBlue(), 128);
        setBackground(background);
        setLayout(new GridBagLayout());

        //  Add a message label to the glass pane

        add(message, new GridBagConstraints());
        message.setOpaque(true);
        message.setBorder(MESSAGE_BORDER);

        //  Disable Mouse, Key and Focus events for the glass pane

        addMouseListener(new MouseAdapter() {
        });
        addMouseMotionListener(new MouseMotionAdapter() {
        });

        addKeyListener(this);

        setFocusTraversalKeysEnabled(false);
    }

    /*
     *  The component is transparent but we want to paint the background
     *  to give it the disabled look.
     */
    @Override
    protected void paintComponent(Graphics g) {
        g.setColor(getBackground());
        g.fillRect(0, 0, getSize().width, getSize().height);
    }

    /*
     *  The background color of the message label will be the same as the
     *  background of the glass pane without the alpha value
     */
    @Override
    public void setBackground(Color background) {
        super.setBackground(background);

        Color messageBackground = new Color(background.getRGB());
        message.setBackground(messageBackground);
    }
//
//  Implement the KeyListener to consume events
//

    public void keyPressed(KeyEvent e) {
        e.consume();
    }

    public void keyTyped(KeyEvent e) {
    }

    public void keyReleased(KeyEvent e) {
        e.consume();
    }

    /*
     *  Make the glass pane visible and change the cursor to the wait cursor
     *
     *  A message can be displayed and it will be centered on the frame.
     */
    public void activate(String text) {
        if (text != null && text.length() > 0) {
            message.setVisible(true);
            message.setText(text);
            message.setForeground(getForeground());
        } else {
            message.setVisible(false);
        }

        setVisible(true);
        setCursor(Cursor.getPredefinedCursor(Cursor.WAIT_CURSOR));
        requestFocusInWindow();
    }

    /*
     *  Hide the glass pane and restore the cursor
     */
    public void deactivate() {
        setCursor(null);
        setVisible(false);
    }
} 
```

那么输出将是

![在此处输入图像描述](../Images/9a800724298aafef821461beda25e679.png)

比我不能同意 GlassPane 低于任何 JComponent，也不是 JWebBrowser，故事结束了，

编辑更正，我找不到适用于 SWT 的 GlassPane 的替代方案（正确的替代方案），那么你是对的 JWebBrowser 是 AWT / Swing GlassPane

输出将是

![在此处输入图像描述](../Images/3272cb24fae6fd37830f47a3b04d4999.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T11:15:44.330

JWebBrowser 是一个重量级的组件。DJ Native Swing 通过应用各种剪切规则简化了 Swing 中的集成，但它不能进行 alpha 混合。

您可以实现的最接近的方法是执行演示应用程序在“附加功能 > 伪透明度”中显示的内容。不幸的是，在 Windows 7 上似乎每次刷新都有闪烁效果，但如果您不经常刷新，这可能不是您的问题。

# jquery - 文本区域随着有人输入而扩展

> ID：10776361
> 
> 赞同：1
> 
> 时间：2012-05-27T18:43:54.217
> 
> 标签：jquery, css

我想制作一个随着用户到达底部而扩展的文本区域（向下扩展而不是向外扩展）

在 Facebook 上可以看到一个很好的例子，当用户键入时，文本框会相应地调整其大小。

我已经尝试在网上查找，但没有任何效果，所以如果这看起来微不足道，请原谅我。

```
<textarea name="messagea" id="styled"></textarea>
<script>
$(function() {
   $('styled').autogrow();
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T19:01:08.817

使用原始 JavaScript，它将类似于以下内容。

```
var foo = document.getElementById('mytextarea');
foo.addEventListener('keypress', function(){
  if (this.clientHeight < this.scrollHeight) this.style.height = ''.concat(this.scrollHeight * 1.05, 'px');
}); 
```

这不能保证跨浏览器工作，因此您必须为此扩展它（对于 IE），但这应该为您提供处理按键事件和适当检查高度的基本概念。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T18:45:04.220

你在使用 jQuery 吗？

如果是这样，这个问题已经在 StackOverflow 上得到解答：[Auto expand a textarea using jQuery](https://stackoverflow.com/questions/2948230/auto-expand-textarea)或[textarea auto expand](https://stackoverflow.com/questions/6579447/textarea-auto-expand)。

# java - 哪个版本的 Restlet 框架适合 GWT 和 GAE 项目？

> ID：10776364
> 
> 赞同：1
> 
> 时间：2012-05-27T18:44:12.713
> 
> 标签：java, android, google-app-engine, gwt, restlet

我是 RESTlet 的新手，正在阅读[他们](http://wiki.restlet.org/docs_2.1/13-restlet/21-restlet/318-restlet/303-restlet.html)关于设置示例服务的文档。它说“Restlet Framework 2.1 Milestone 4”是必要的，但在该版本的[下载页面](http://www.restlet.org/downloads/testing)上有很多选择，没有一个被特别称为“框架”。

因此，要构建 GWT 和 GAE 演示，我应该安装 Java EE 版、Google AppEngine 版还是 Google Web Toolkit 版？它们都提供了不同的 jar 文件，或者在常见的 jar 文件的情况下，它们的内容不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T23:09:02.197

答案是你需要他们每个人做不同的事情。我想要构建的第一个项目是 org.restlet.example.serialization.gae-gwt，它需要 Restlet GWT (restlet-gwt-2.1rc5) 和 Restlet GAE (restlet-gae-2.1rc5)。

# json - 多个 JQuery .getJSON 回调不会触发

> ID：10776369
> 
> 赞同：3
> 
> 时间：2012-05-27T18:44:40.510
> 
> 标签：json, jquery

我正在尝试运行以下代码片段：

```
var myVar1 = $.getJSON('myurl', function(json) {
    console.log("debug1", json);
});
var myVar2 = $.getJSON('myurl2', function(json2) {
    console.log("debug2", json2);
}); 
```

而且我从未在控制台日志中看到“debug2”条目。当我检查`myVar2`请求完成后的状态时，我看到它填充了正确的数据。当我在第二个请求`.complete()`的末尾附加一条语句时，该函数将正确触发。`.getJSON()``.complete()`

使用 jQuery 1.7.2 和最新的谷歌浏览器稳定版。为什么第二个回调函数不会触发？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T19:01:45.747

尝试 ：

```
var myVar2 = $.getJSON('myurl2').success(function(){
    console.log("debug2 - success");
}).error(function(){
    console.log("debug2 - error");
}); 
```

您可能会看到错误消息而不是成功。我猜想“myurl2”不存在，尽管它可能确实存在，但脚本会发出带有错误标题的 HTTP 响应。我认为 JSON 解码失败也会触发错误回调。

# c++ - NCurses – getstr() 和功能键

> ID：10776370
> 
> 赞同：3
> 
> 时间：2012-05-27T18:44:43.623
> 
> 标签：c++, c, ncurses

**我的情况：**

*   在**ncurses 模式下**，我有窗口*contentWin*。
*   从这个窗口我想通过这个代码读取“字符串”。

* * *

```
char str [41];
wgetnstr(contentWin, str, 40); 
```

我希望能够在这一刻**抓住 F2 键**。我考虑捕获字符，然后进行比较，然后（如果！= F2）将其放入终端和**str**而不使用**wgetnstr()**。

有不同（更简单）的方法吗？谢谢 ：-）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:13:36.177

从来没听说过。您可能想创建自己的功能，类似于`wgetnstr()`检查 F2 等....

您可以将该函数基于以下捕获 F2 的代码。

```
#include <ncurses.h>

int main()
{   
    int ch;

    initscr();          /* Start curses mode        */
    raw();              /* Line buffering disabled  */
    keypad(stdscr, TRUE);       /* We get F1, F2 etc..      */
    noecho();           /* Don't echo() while we do getch */

    while( (ch = wgetch(stdscr) ) != KEY_F(2))
    {
        printw("Key code: %u Key: %c\n", ch, ch);
        refresh();          /* Print it on to the real screen */
    }
    endwin();           /* End curses mode        */

    printf("F2 pressed .. program exiting\n");

    return(0);
} 
```

# c# - 允许按列 gridview 排序

> ID：10776372
> 
> 赞同：4
> 
> 时间：2012-05-27T18:44:59.770
> 
> 标签：c#, asp.net, sorting, gridview

我正在编写从数据访问层获取数据并将其显示在 GridView 中的项目。问题是允许按列排序。当我单击列头时，会出现以下错误：

异常详细信息：System.Web.HttpException: GridView 'GridView1' 触发事件排序，尚未处理。

这里是 .cs 代码：

```
public partial class Default: System.Web.UI.Page
    {
        EmployeesTableAdapter eta = new EmployeesTableAdapter();

        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                GridView1.DataSource = eta.GetData();
                GridView1.DataBind();
            }
        }
    } 
```

这里是 .aspx 代码（仅 gridview）：

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
        AllowSorting="True" CellPadding="4" ForeColor="#333333" GridLines="None" 
        AutoGenerateColumns="False">
        <AlternatingRowStyle BackColor="White" />

<Columns>
            <asp:TemplateField HeaderText="Select">
                <ItemTemplate>                
                    <asp:CheckBox ID="CheckBox1" runat="server">
                </asp:CheckBox>
                </ItemTemplate>                
            </asp:TemplateField>  

            <asp:BoundField DataField="FirstName" HeaderText="FirstName" SortExpression="FirstName" />
            <asp:BoundField DataField="LastName" HeaderText="LastName" SortExpression="LastName" />
            <asp:BoundField DataField="Country" HeaderText="Country" SortExpression="Country" />

            <asp:TemplateField HeaderText="View">
                <ItemTemplate>                
                    <asp:ImageButton ID="ImageButton1" runat="server" ImageUrl="images/view.png"/>
                </ItemTemplate>                
            </asp:TemplateField> 

            <asp:TemplateField HeaderText="Edit">
                <ItemTemplate>                
                    <asp:ImageButton ID="ImageButton2" runat="server" ImageUrl="images/edit.png"/>
                </ItemTemplate>
            </asp:TemplateField> 

        </Columns>
        <EditRowStyle BackColor="#2461BF" />
        <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#EFF3FB" />
        <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
        <SortedAscendingCellStyle BackColor="#F5F7FB" />
        <SortedAscendingHeaderStyle BackColor="#6D95E1" />
        <SortedDescendingCellStyle BackColor="#E9EBEF" />
        <SortedDescendingHeaderStyle BackColor="#4870BE" />
       </asp:GridView> 
```

有人知道如何允许按列排序吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-27T18:58:48.523

GridView 不会自行排序。您需要**为 GridView 排序事件添加一些代码并将其连接起来**。

首先，将`OnSorting`事件的名称添加到`GridView`页面`.aspx`上：

```
<asp:GridView ID="gridView" OnSorting="gridView_Sorting" runat="server" /> 
```

然后，在代码隐藏中添加该事件。[这个例子](http://forums.asp.net/p/956540/1177923.aspx)还处理了排序方向的改变——一旦用户进行了排序，他们可能想要反转排序方向，你必须跟踪它。

```
 private string ConvertSortDirectionToSql(SortDirection sortDirection)
    {
       string newSortDirection = String.Empty;

   switch (sortDirection)
   {
      case SortDirection.Ascending:
             newSortDirection = "ASC";
             break;

      case SortDirection.Descending:
         newSortDirection = "DESC";
         break;
   }

   return newSortDirection;
}

protected void gridView_Sorting(object sender, GridViewSortEventArgs e)
{
   DataTable dataTable = gridView.DataSource as DataTable;

   if (dataTable != null)
   {
      DataView dataView = new DataView(dataTable);
      dataView.Sort = e.SortExpression + " " + ConvertSortDirectionToSql(e.SortDirection);

      gridView.DataSource = dataView;
      gridView.DataBind();
   }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-27T18:53:25.123

您需要定义一个排序方法，并实现它：

```
<asp:GridView ID="GridView1" **OnSorting="gridViewSorting"** runat="server" />

protected void gridViewSorting(object sender, GridViewSortEventArgs e)
{
   DataTable dataTable = gridView.DataSource as DataTable;

   if (dataTable != null)
   {
      DataView dataView = new DataView(dataTable);
      dataView.Sort = your sort expression

      gridView.DataSource = dataView;
      gridView.DataBind();
   }
} 
```

# ruby - 如何使用变量字符串访问多维数组？

> ID：10776376
> 
> 赞同：0
> 
> 时间：2012-05-27T18:45:04.717
> 
> 标签：ruby

在以下最后一个不起作用：

```
puts node.elasticsearch[:plugin][:jetty][:name]
puts node.elasticsearch[:plugin]['jetty'][:name]
puts node.elasticsearch[:plugin]["'#{entry}'"][:name] 
```

访问多维数组时，为了在索引中使用变量的值，我需要遵循什么语法？

更新：我认为 entry 是一个字符串，但我可能是错的，所以这是为您设置它的语句，让受过教育的助手确定什么是什么：

```
Dir.entries("/var/plugins/").any? do |entry|
    puts node.elasticsearch[:plugin][:jetty][:name]
    puts node.elasticsearch[:plugin]['jetty'][:name]
    puts node.elasticsearch[:plugin]["'#{entry}'"][:name]
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:53:12.693

您的散列中应该有一个键`String`，但看起来您在小时散列中有符号化键。在这种情况下，请将您的字符串转换为`Symbol`, ，然后再将其用作键。

试试这个代码：

```
puts node.elasticsearch[:plugin][entry.to_sym][:name] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T18:54:25.027

您的哈希是用符号索引的，因此您应该将字符串转换为符号，使用`entry.intern()`.

```
puts node.elasticsearch[:plugin][entry.intern][:name] 
```

编辑：`to_sym`并且`intern`是[String 类的别名](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-to_sym)。所以 entry 必须是一个字符串，这似乎是根据您的尝试。

# statistics - 从第一原理的离散概率分布中抽样

> ID：10776382
> 
> 赞同：2
> 
> 时间：2012-05-27T18:46:26.287
> 
> 标签：statistics, probability, sampling

我有一组 S={a1,a2,a3,a4,a5,......,an}。选择每个元素的概率分别为 {p1,p2,p3,p4,p5,...,pn}（当然 p1+p2+p3+p4+p5+....+pn=1} .

我想模拟一个可以做到这一点的实验。但是我希望在没有任何库的情况下做到这一点（即从第一原则）

我正在使用以下方法：1）我将实数线上的元素映射如下X（a1）= 1；X(a2)=2；X(a3)=3；X(a4)=4；X(a5)=5;....,X(an)=n

2）然后我计算每个坐标的累积概率分布函数（即 P(x < X) 如下：cdf(x)= P(a1) + P(a2) + .....P(ai) 使得X(ai) <= x < X(a(i+1))

（因此 cdf 是一个阶跃函数）

3）我随机选择一个实数，q在（0,1）之间。并计算线 y = q 与 cdf 相交的 x 坐标。由于 cdf 是一个在 1,2,...n 处跳跃的阶跃函数，因此该点将具有一个整数 x 坐标 btw 1 和 n。设 x 坐标为 m。

4) 我选择那个 ai，使得 X(ai) = m。

我的问题是这种方法是否在没有任何偏差的情况下模拟实验？

我没有得到所需的结果，这就是为什么我有点怀疑。

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T08:51:53.807

逻辑听起来不错。一般要从均匀分布U(0,1)中采样任意分布函数Y(x)，只需在Y向量中查找均匀随机值u，返回Y(x)大于等于的x的最小值你即`min{x:Y(x)>=u}`。

您可能希望为基本概率添加 x=0 观察值，如下例所示。

```
x      P(x)    Y(x)
0      0       0
1      0.1     0.1
2      0.3     0.4
3      0.4     0.8
4      0.2     1 
```

例如`u = 0.3 -> x = 2`,`u = 0.81 -> x = 4`等。

清楚地计算许多试验的相对频率将给出 P(x) 的无偏估计。

# scala - 在 Scala 中对 SGMLish 文档进行词法分析时组合解析器

> ID：10776383
> 
> 赞同：2
> 
> 时间：2012-05-27T18:46:44.477
> 
> 标签：scala, parsing, lexical-analysis, scala-2.9

除了小案例之外，我对整个词法分析和解析都是新手。有了这个警告，我的问题是我试图在 Scala 中解析 JSP 之类的方言。我正在对 char 流进行词法分析，当我到达类似 JSP 的标签时，我被卡住了。

```
Some text<%tag attribute="value"%>more stuff. 
```

我的词法分析器现在正试图提取标签部分并进行标记，所以我有类似的东西：

```
def document: Parser[Token] = tag | regular

def tag: Parser[Token] = elem('<') ~ elem('%') ~ rep1(validTagName) ~ tagAttribute.* ~ elem('%') ~ elem('>') ^^ {
    case a ~ b ~ tagName ~ tagAttributes ~ c ~ d => {
        Tag(tagName.foldLeft("")(_+_)) :: tagAttributes.flatMap(_)
    }
}

def validTagName: Parser[Token] = elem("",Character.isLetter(_))  // over-simplified

... Other code for tagAttribute and Tag extends Token here 
```

您现在可能会发现大约六个问题，我知道我自己可以发现一些问题，但是，这就是我目前所处的位置。最终，令牌函数应该返回一个解析器，如果我理解这一切正确，一个解析器可以由其他解析器组成。我的想法是我应该能够通过组合其他几个`Parser[Token]`对象来构造解析器。我不知道该怎么做，我也不完全理解这是否是最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T00:19:07.420

听起来您可能正在混淆您的词法和句法解析器。如果您想编写自己的词法分析器，您将需要两个解析器，第一个扩展`lexical.Scanners`（因此提供`token`type 方法`Parser[Token]`），另一个扩展`syntactical.TokenParsers`并在其实现该特征时引用第一个抽象`lexical`方法。

但是，除非您有特定的理由编写自己的词法分析器，否则使用类似的东西可能更容易[`RegexParsers`](http://www.scala-lang.org/api/current/scala/util/parsing/combinator/RegexParsers.html)：

```
import scala.util.parsing.combinator._

object MyParser extends RegexParsers {
  def name = "\\p{Alpha}+".r
  def value = "\"" ~> "[^\"]*".r <~ "\""
  def attr = name ~ "=" ~ value ^^ { case k ~ _ ~ v => k -> v }

  def tag: Parser[(String, Map[String, String])] =
    "<%" ~> name ~ rep(attr) <~ "%>" ^^ {
      case tagName ~ attrs => tagName -> attrs.toMap
    }
} 
```

现在像`MyParser.parseAll(MyParser.tag, "<%tag attribute=\"value\"%>")` 预期的那样工作。

请注意，由于我们没有编写词法分析器，因此没有义务提供`Parser[Token]`方法。

# php - PHP：只允许字符串中的某些字符，而不使用正则表达式

> ID：10776391
> 
> 赞同：4
> 
> 时间：2012-05-27T18:48:00.233
> 
> 标签：php

我只想允许字符串中的某些字符，我知道使用**preg_match**很容易，但是这个函数我多年来无法理解：/

正如我所说，我看到了数百万个 preg_match 示例，但我想构建我的，我只想允许：

1) 所有大写/小写英文字母和数字

> abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890

2) 所有阿拉伯字母和数字

> اأإآبتثحخدذرزسشصضطظعغفقكلمنهويىءئ١٢٣٤٥٦٧٨٩٠

3）以下特殊字符

> ,.()/-+&،

还有什么我想删除的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T18:54:57.870

您需要先了解正则表达式。它们是编程中的一个通用概念，有比 PHP 手册更好的地方来阅读它们。试试[正则表达式.info](http://www.regular-expressions.info/)。

对于您的特定问题，您需要字符类模式：`[...]`将匹配括号内的任何字符。如果你在开头写上帽子，它将匹配任何*不在*括号内的字符：`[^...]`. 您想用任何内容替换所有不匹配的字符，因此您可以使用以下功能`preg_replace`：

```
preg_replace("/[^...]/gu", ""); 
```

斜杠是必需的分隔符（斜杠是传统的，但您可以使用其他东西），“g”表示“全局”，如“替换所有出现，而不仅仅是第一个”，“u”表示“unicode” ，这将允许您在最后捕捉阿拉伯字符和那个奇怪的特殊字符。

现在，你可以列出所有我点了点的字符；或者您可以指定字符范围。例如，`[^a-zA-Z0-9,.\/+&-]`匹配任何字母数字英文字符，以及除了末尾奇怪的字符之外的所有特殊字符 :p 。请注意，您需要使用反斜杠转义斜杠（因为否则它将终止正则表达式），并且您需要将减号作为最后一个（否则它将被解释为字符范围）。您可以酌情扩展其他语言（我对阿拉伯语的编码不够熟悉）。

# c# - 由控件触发但传递给所有者列表<>的事件

> ID：10776395
> 
> 赞同：0
> 
> 时间：2012-05-27T18:49:28.103
> 
> 标签：c#, list, events

我想了解如何将从类引发的事件转发到实现 List<> 的所有者类，引发事件的类包含在其中。主类被调用`PCCControls`并包含一个`List<ControlBox>`对象。每个都`ControlBox`实现了一个名为 的事件`ButtonPushed`。

我想通过在类中实现类似于以下内容的事件将事件从`ControlBox`类移动到类：`PCCControls``PCCControls`

```
public delegate ControlBoxButtonPushedHandler(object sender, ControlBox controlbox);
public event ControlBoxButtonPushedHandler ButtonPushed; 
```

我有以下内容：

```
public class PCCControls
{
    List<ControlBox> ControlBoxes;
}  

public class ControlBox
{
    public event ButtonPushed;  

    public ProcessSub()
    {
        if(ButtonPushed != null) ButtonPushed(this, new EventArgs());
    }
} 
```

因此，基于上面的代码，我想将事件`ButtonPushed`从`ControlBox`类移动到`PCCControls`类，并将`ControlBox`触发事件的事件作为参数传递给`ButtonPushed`事件。

这是如何实现的？您的支持将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T20:53:06.673

你问的不是很清楚；但是，我会试一试。您可以简单地让`PCCControls`类订阅 a 中的事件`ControlBox`：

```
public class PCCControls
{
    List<ControlBox> ControlBoxes;
// initialization of ControlBoxes done elsewhere...
    public voice SomeMethod()
    {
        ControlBoxes.ElementAt(0).ButtonPushed += controlBox_ButtonPushed;
    }
    public void controlBox_ButtonPushed(object sender, EventArgs e)
    {
        // TODO:
    }
} 
```

如果这不是您要找的，请提供更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T20:57:09.250

如果您确保实际列表对 PCCControls 类保持私有（因此客户端代码不能直接向其中添加/删除 ControlBoxes），您可以在添加或删除项目时订阅/取消订阅 ControlBox 的 ButtonPushed 事件，然后定义您自己的事件以将其转发给客户端代码。像这样的东西：

```
public class PCCControls
{
    public event EventHandler<PCCButtonPushedEventArgs> PCCButtonPushed;

    List<ControlBox> ControlBoxes;

    public void AddControlBox(ControlBox box) 
    {
        box.ButtonPushed += OnButtonPushed;
        ControlBoxes.Add(box);
    }
    public void RemoveControlBox(ControlBox box) 
    {
        box.ButtonPushed -= OnButtonPushed;
        ControlBoxes.Remove(box);
    }
    private void OnButtonPushed(object sender, EventArgs e)
    {
        var handler = PCCButtonPushed;
        if (handler != null) 
        {
           var box = (ControlBox)sender;
           handler(this, new PCCButtonPushedEventArgs(box));
        }
    }
}  

public class ControlBox
{
    public event ButtonPushed;  
    public ProcessSub()
    {
        if(ButtonPushed != null) ButtonPushed(this, new EventArgs());
    }
} 
```

# c++ - 使用 OpenCV 从图像中提取数字

> ID：10776398
> 
> 赞同：3
> 
> 时间：2012-05-27T18:49:52.477
> 
> 标签：c++, c, opencv, image-processing

我有这样的图像，我想从中提取数字。

![在此处输入图像描述](../Images/a657acaf9a3bae3e7ab4fc8a7aec3dec.png) ![在此处输入图像描述](../Images/e7996fe5bcf309440952a830926f1730.png)

我一直在使用 OpenCV 和模板匹配，我特别感兴趣，但由于该技术不考虑任何图像缩放和旋转，我正在寻找可能能够至少考虑缩放的技术。

请提供任何建议或帮助。所有操作都是实时的。

PS 图像质量无法提高，相机的能力就是这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T19:08:34.637

研究**[SIFT](http://www.cs.ubc.ca/~lowe/papers/ijcv04.pdf)**：[尺度不变特征变换](http://www.aishack.in/2010/05/sift-scale-invariant-feature-transform/)。OpenCV 实现了此功能，请查看：[Implementing SIFT in OpenCV](http://www.aishack.in/2010/07/implementing-sift-in-opencv/)。

这些页面还提供有价值的内容：

*   [使用opencv在图像中查找形状](https://stackoverflow.com/q/8785664/176769)
*   [对于尺度不变的特征提取，SURF 和 SIFT 是否有任何快速的替代方案？](https://stackoverflow.com/questions/10157806/are-there-any-fast-alternatives-to-surf-and-sift-for-scale-invariant-feature-ext)
*   [使用 OpenCV 2.2 实现筛选](https://stackoverflow.com/q/5461148/176769)
*   [在 OpenCV 中训练 SIFT 特征](https://stackoverflow.com/questions/6749299/training-sift-features-in-opencv)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:30:58.063

要在不使用 SIFT 或 SURF 的情况下检测这些数字，还可以创建基于 K 最近邻算法的分类器。[您可以生成 .pbm 文件的数据库，并使用此处](http://blog.damiles.com/2008/11/basic-ocr-in-opencv/)的 c++ OCR 库将它们加载到分类器中

一步步：

1：找到一种从图像中提取数字的方法`cvFindContours`

2：将这些图像存储为 png 文件，`cvSaveImage`并将它们转换为二进制 pbm 文件

3：为 .pbm 文件编号并将它们存储在每个编号的单独文件夹中

4：使用上面显示的库加载 .pbm 文件

5：`ocr::classify`实时使用图像的功能来获取它们所属的类别（例如，哪个数字）。

# vb.net - 在列表框之间移动项目

> ID：10776399
> 
> 赞同：1
> 
> 时间：2012-05-27T18:49:55.577
> 
> 标签：vb.net, vb.net-2010

抱歉，如果之前已回答过此问题，但我搜索了该网站，但找不到任何可以回答我问题的内容。

我可以在我的列表框之间移动选定的项目，但是如何将所有项目从一个列表框中移动并将它们添加到另一个列表框中？如果可能的话，我想将它们附加到底部，而不是替换另一个列表框中的项目。

我用来移动特定项目的编码是

```
 Dim selectedItems = (From i In ListBox1.SelectedItems).ToArray()

    For Each selectedItem In selectedItems
        ListBox2.Items.Add(selectedItem)
        ListBox1.Items.Remove(selectedItem)
    Next 
```

由于某种原因，我无法回答我自己的问题，但非常感谢 Heinzi，对于遇到同样问题的其他人，以下编码应该可以帮助您。

Dim selectedItems = (From i In ListBox1.Items).ToArray()

```
For Each selectedItem In selectedItems
    ListBox2.Items.Add(selectedItem)
    ListBox1.Items.Remove(selectedItem)
Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T22:55:03.780

您可以使用相同的代码，但迭代 ListBox1.Items 而不是 ListBox1.SelectedItems：

```
Dim itemsToMove = ListBox1.Items.ToArray()  ' to make a copy of the list of items

For Each item In itemsToMove
    ListBox2.Items.Add(item)
    ListBox1.Items.Remove(item)
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-09T16:56:31.933

试试这个移动所有项目 - 工作 100%

```
For Each item As String In ListBox1.Items
            ListBox2.Items.Add(item.ToString)
        Next 
```

# linux - NPM 无法安装 appjs。错误：找不到模块 'graceful-fs'

> ID：10776405
> 
> 赞同：10
> 
> 时间：2012-05-27T18:50:35.690
> 
> 标签：linux, node.js, npm

我已经安装了 node.js 和 npm，但是当我尝试安装 appjs 时出现此错误：

```
zephlon@zephlon-T5254:~$ npm install appjs

node.js:201
    throw e; // process.nextTick error, or 'error' event on first tick
          ^
Error: Cannot find module 'graceful-fs'
    at Function._resolveFilename (module.js:334:11)
    at Function._load (module.js:279:25)
    at Module.require (module.js:357:17)
    at require (module.js:368:17)
    at Object.<anonymous> (/usr/share/npm/lib/utils/ini.js:32:10)
    at Module._compile (module.js:432:26)
    at Object..js (module.js:450:10)
    at Module.load (module.js:351:31)
    at Function._load (module.js:310:12)
    at Module.require (module.js:357:17) 
```

我在任何尝试安装时都会遇到类似的错误`graceful-fs`。

我正在使用 Ubuntu 12.04 LTS。

PS：这里是appjs网站的链接：http: [//appjs.org/](http://appjs.org/)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-04T06:01:12.107

使用以下脚本来解决这个问题

```
git clone git://github.com/isaacs/npm.git
cd npm/script
chmod +x bootstrap
sudo ./bootstrap 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-27T04:46:13.053

我在尝试在 Ubuntu LTS12.04 vps 上使用 npm 安装任何东西时遇到了这个问题，我解决了这个问题

```
sudo apt-get remove npm
sudo apt-get install npm 
```

您可能还想在 /usr/lib/nodejs中运行 npm install *__*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-21T09:33:07.197

使用Chris Lea的[node.js PPA ，从](https://launchpad.net/~chris-lea/+archive/node.js/+packages)[0.10 版本开始](https://chrislea.com/2013/03/15/upgrading-from-node-js-0-8-x-to-0-10-0-from-my-ppa/)`npm`集成在`nodejs`包中。适用于 12.04 LTS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-13T05:19:41.747

我也遇到了优雅的 fs 问题。在尝试更新 npm 时看到此消息后：

```
Error: npm doesn't work with node v0.10.0
Required: node@0.6 || 0.7 || 0.8 
```

我使用 n 模块切换到节点的**0.8.22**稳定版本。在那之后，我能够安装 graceful-fs、request 和其他模块。可能不是最好的解决方案，但这里没有其他解决方案对我有用。

# java - 使用 oauth 2 向 c2dm 发送消息并获得 401

> ID：10776407
> 
> 赞同：1
> 
> 时间：2012-05-27T18:50:50.723
> 
> 标签：java, android, android-c2dm

我有一个使用来自谷歌的 c2dm 的应用程序版本，没有 oauth 身份验证，它工作正常。但我想迁移到 oauth 2。我在绑定发送消息时遇到问题，我不断收到未经授权的 401。我创建了一个服务帐户来获取 ClientID、电子邮件地址和私钥。我已经注册了 c2dm（两次），多次刷新了身份验证令牌，并且我在服务器和设备中都使用了相同的电子邮件。有谁知道为什么会这样？

```
public static String getToken() {

    JsonFactory jsonFactory = new JacksonFactory();
    HttpTransport httpTransport = new NetHttpTransport();        

    String clientId = "****.apps.googleusercontent.com";
    String pkcs12Repo = "*****privatekey.p12";
    String scope = "https://android.apis.google.com/c2dm";      

        GoogleCredential credential = new GoogleCredential.Builder()
        .setTransport(httpTransport)
        .setJsonFactory(jsonFactory)
        .setServiceAccountId(clientId)
        .setServiceAccountPrivateKeyFromP12File(new File(pkcs12Repo))
        .setServiceAccountScopes(scope)
        .build();

        credential.refreshToken();
        String token = credential.getAccessToken();
        return token;
}

public static int sendMessage(String auth_token, String registrationId, String message) {

        StringBuilder postDataBuilder = new StringBuilder();
        postDataBuilder.append("registration_id").append("=").append(registrationId);
        postDataBuilder.append("&").append("collapse_key").append("=").append("0");
        postDataBuilder.append("&").append("data.payload").append("=").append(URLEncoder.encode(message, "UTF-8"));

        byte[] postData = postDataBuilder.toString().getBytes("UTF-8");

        URL url = new URL("https://android.clients.google.com/c2dm/send");
        HttpsURLConnection.setDefaultHostnameVerifier(new CustomizedHostnameVerifier());
        HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();
        conn.setDoOutput(true);
        conn.setUseCaches(false);
        conn.setRequestMethod("POST");
        conn.setRequestProperty("Content-Type", "application/x-www-form-urlencoded;charset=UTF-8");
        conn.setRequestProperty("Content-Length", Integer.toString(postData.length));
        conn.setRequestProperty("Authorization", "Bearer " + auth_token);

        OutputStream out = conn.getOutputStream();
        out.write(postData);
        out.close();

        int responseCode = conn.getResponseCode();
        return responseCode; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T22:59:08.300

C2DM 不支持 OAuth2 身份验证。ClientLogin AuthToken 是您目前唯一支持的方法。

# sql - SQL请教，如何解决？

> ID：10776409
> 
> 赞同：1
> 
> 时间：2012-05-27T18:50:56.150
> 
> 标签：sql, postgresql

这是一个家庭作业，但我不能一个人做。

1) 列出代号、销售汽车数量和转售利润总额，对利润不超过 5000 美元的转售。

```
resale:
cod | name    | city      | state
--------+-----------------+------------+--------
01  | Paraiso | Sao Paulo | SP
02  | Alameda | Taubate   | SP
03  | Cabana  | Macae     | RJ
04  | Santana | Betim     | MG

Automotive:
cod | manufacturer | model      | year | country   | price
--------+------------+-----------------+------+-----------+----------
01  | 01           | Gol        | 2000 | Brasil    | 25000.00
02  | 01           | Golf       | 2005 | Argentina | 39000.00
03  | 04           | Ford Ka    | 1990 | Brasil    | 15000.00
04  | 03           | Corsa Seda | 1995 | Brasil    | 12500.00
05  | 04           | Fiesta     | 2003 | Argentina | 20000.00
06  | 03           | Corsa Seda | 1995 | Argentina | 10000.00
07  | 05           | Palio      | 2002 | Brasil    | 15000.00
08  | 05           | Siena      | 2006 | Brasil    | 26000.00

sale:
customer| resale | automotive | date       | value
---------+---------+-----------+------------+----------
02      | 01     | 03         | 2010-02-05 | 17500.00
04      | 02     | 01         | 2010-01-07 | 28000.00
01      | 03     | 08         | 2010-02-15 | 28000.00
02      | 03     | 02         | 2010-03-12 | 42000.00
03      | 04     | 06         | 2010-02-06 | 11500.00
03      | 02     | 05         | 2010-01-25 | 22100.00
01      | 01     | 04         | 2010-01-21 | 15500.00
03      | 01     | 08         | 2012-02-05 | 17500.00 
```

我的 SQL：

```
SELECT automotive.cod, resale.name, COUNT(sale.resale) AS ammount, SUM(sale.value - automotive.price) AS total FROM sale, automotive, resale 
WHERE sale.resale = resale.cod AND automotive.cod = sale.automotive 
GROUP BY sale.resale, automotive.cod, resale.name 
HAVING SUM(sale.value - automotive.price) <= 5000; 
```

我不能一个人做，我的答案是错误的。

ps：我正在使用 PostgresSQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T19:08:36.563

你几乎拥有它：

```
SELECT r.cod, r.name
     , count(s.resale) AS amount
     , sum(s.value - a.price) AS total
FROM   sale s
JOIN   automotive a ON a.cod = s.automotive 
JOIN   resale r     ON r.cod = s.resale
GROUP  BY r.cod, r.name 
HAVING sum(s.value - a.price) <= 5000; 
```

[我使用表别名和显式`JOIN`语法](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-FROM)重新格式化了您的查询，以使其更具可读性。

基本上，您只需要替换`a.cod`为`r.cod`. 看起来像一个错字。这使得`s.resale`该`GROUP BY`子句变得多余，因此我将其删除。

# actionscript-3 - MOUSE_OVER 延时设置功能

> ID：10776414
> 
> 赞同：1
> 
> 时间：2012-05-27T18:51:24.390
> 
> 标签：actionscript-3, flash-cs5, mouseover, kinect, motion-detection

我想使用***xbox kinect***运行带有运动传感器的 flash 应用程序，我有一个简单的软件来执行移动鼠标和单击的功能。不幸的是不能只用一只手完成，右手移动鼠标并单击左手命令。我希望它可以只用一只手完成。我的想法是用鼠标悬停功能代替鼠标点击功能，前提是延迟延长，可以做到吗？请帮我如何将其设置为AS3，关键字是鼠标悬停在按钮上时的延迟时间（例如三秒），以便应用程序可以正常运行flash。或对我有任何建议或任何其他方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T20:07:52.547

这样做很容易，如果您有超过 1 个按钮，可能需要调整它，但如果是这样，调整起来很容易。

```
var timer:Timer = new Timer(3000);
timer.addEventListener(TimerEvent.TIMER, onTimerTickHandler);

button.addEventListener(MouseEvent.ROLL_OVER, _onRollOverHandler);
button.addEventListener(MouseEvent.ROLL_OUT, _onRollOutHandler);

private function _onRollOverHandler(e:MouseEvent):void
{
   timer.start();
}

private function _onRollOutHandler(e:MouseEvent):void
{
    timer.reset();
}

private function _onTimerTickHandler(e:TimerEvent):void
{
    timer.reset();

    // do something
} 
```

希望有帮助。

**编辑：**我使用`MouseEvent.ROLL_OVER`/的原因`MouseEvent.ROLL_OUT`是因为这样你会遇到更少的问题，如果你想知道确切的区别，请查看文档。祝你的项目好运。

# java - 从自定义渲染设置可编辑 JComboBox 中的文本字段

> ID：10776416
> 
> 赞同：0
> 
> 时间：2012-05-27T18:51:38.280
> 
> 标签：java, swing, jcombobox

![在此处输入图像描述](../Images/04d3248e11d85c7fa51738bb7b3c3f8a.png)

两个组合框都使用相同的代码，唯一的例外是“组合 1”被设置为可编辑，而“组合 2”不​​是。两者都选择了“项目 1”。如您所见，“Combo 1”在组合文本字段中打印“[Ljava.lang.Object;@77905258”，“Combo 2”打印所选名称。

“Combo 1”如何在组合框文本字段中打印与“Combo 2”相同的文本？

符合E：（参考附图）如果你点击“Combo 1”，你会看到第1项，第2项的列表...但是文本字段会显示“[Ljava.lang.Object;@77905258”当项目被选中时（这里是项目 1 被选中）。

如果单击“组合2”，您将看到项目1的列表，项目2 ...和不可编辑的文本费尔德将在选择“项目1”时显示“项目1”。

这是代码：

我正在使用自定义渲染器：

```
public class MyListRenderer extends JLabel 
 implements ListCellRenderer{
  @Override
  public Component getListCellRendererComponent(
   JList list, Object value,
   int index, boolean isSelected,
   boolean cellHasFocus) {

    Object[] itemData =(Object[])value;        
    setText((String)itemData[1]);
    return this;
    } 
 } 
```

这是设置 2 个组合框列表的代码：

```
private void iniCombobox() {            
   cmbMyCombo.addItem(new Object[] {"1", "Item 1"});
   cmbMyCombo.addItem(new Object[] {"2", "Item 2"});
   cmbMyCombo.addItem(new Object[] {"3", "Item 3"});

   cmbMyCombo2.addItem(new Object[] {"1", "Item 1"});
   cmbMyCombo2.addItem(new Object[] {"2", "Item 2"});
   cmbMyCombo2.addItem(new Object[] {"3", "Item 3"});

   cmbMyCombo.setRenderer(new MyListRenderer());
   cmbMyCombo2.setRenderer(new MyListRenderer());       
} 
```

这是事件的代码。这将设置每个选定项目的文本字段：

```
private void cmbMyComboActionPerformed(
 java.awt.event.ActionEvent evt) {
    Object mySelectedItem = cmbMyCombo.getSelectedItem();
    Object myObject[] = (Object[])mySelectedItem;
    txtID.setText(myObject[0].toString());
    txtName.setText(myObject[1].toString());        
}

private void cmbMyCombo2ActionPerformed(
 java.awt.event.ActionEvent evt) {
    Object mySelectedItem = cmbMyCombo.getSelectedItem();
    Object myObject[] = (Object[])mySelectedItem;
    txtID1.setText(myObject[0].toString());
    txtName1.setText(myObject[1].toString());  
} 
```

这是可以剪切和过去以符合 SC 和 C 的完整代码。不要忘记添加自定义渲染器“MyListRenderer”类。（使用 NetBean 7.1 编译）：

```
package combobox;

public class MyComboBox extends javax.swing.JFrame {

public MyComboBox() {
    initComponents();
    iniCombobox();
}
private void initComponents() {

    jPanel1 = new javax.swing.JPanel();
    cmbMyCombo = new javax.swing.JComboBox();
    lblId = new javax.swing.JLabel();
    txtID = new javax.swing.JTextField();
    lblName = new javax.swing.JLabel();
    txtName = new javax.swing.JTextField();
    jPanel2 = new javax.swing.JPanel();
    cmbMyCombo2 = new javax.swing.JComboBox();
    txtID1 = new javax.swing.JTextField();
    lblId1 = new javax.swing.JLabel();
    txtName1 = new javax.swing.JTextField();
    lblName1 = new javax.swing.JLabel();

    setDefaultCloseOperation(javax.swing.WindowConstants
    .EXIT_ON_CLOSE);

    jPanel1.setBorder(javax.swing.BorderFactory
    .createTitledBorder("Combo 1"));

    cmbMyCombo.setEditable(true);
    cmbMyCombo.addActionListener(new java.awt.event
    .ActionListener() {
        public void actionPerformed(java.awt.event
        .ActionEvent evt) {
            cmbMyComboActionPerformed(evt);
        }
    });

    lblId.setText("ID:");
    lblName.setText("Name:");

    javax.swing.GroupLayout jPanel1Layout = new javax
    .swing.GroupLayout(jPanel1);
    jPanel1.setLayout(jPanel1Layout);
    jPanel1Layout.setHorizontalGroup(
        jPanel1Layout.createParallelGroup(javax
        .swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel1Layout.createSequentialGroup()
            .addContainerGap()
            .addGroup(jPanel1Layout.createParallelGroup(
             javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(javax.swing.GroupLayout
                 .Alignment.TRAILING,
         jPanel1Layout.createSequentialGroup()
                    .addGap(0, 0, Short.MAX_VALUE)
                    .addComponent(cmbMyCombo, javax
                     .swing.GroupLayout.PREFERRED_SIZE,
                     141,
         javax.swing.GroupLayout
         .PREFERRED_SIZE)
                    .addGap(40, 40, 40))
                .addGroup(jPanel1Layout
                .createSequentialGroup()
                    .addGroup(jPanel1Layout
                     .createParallelGroup(
                       javax.swing.GroupLayout
                       .Alignment.LEADING)
                        .addGroup(jPanel1Layout
                         .createSequentialGroup()
                            .addComponent(lblId)
                            .addGap(28, 28, 28)
                            .addComponent(txtID, javax
                              .swing.GroupLayout
                              .PREFERRED_SIZE, 66,
                               javax.swing.GroupLayout
                              .PREFERRED_SIZE)
                            .addPreferredGap(javax
                             .swing.LayoutStyle
             .ComponentPlacement.RELATED,
             81,
             javax.swing.GroupLayout
             .PREFERRED_SIZE))
                        .addGroup(jPanel1Layout
                         .createSequentialGroup()
                            .addComponent(lblName)
                            .addPreferredGap(javax
                             .swing.LayoutStyle
                             .ComponentPlacement.RELATED)
                            .addComponent(txtName,
                             javax.swing.GroupLayout
                               .PREFERRED_SIZE,
                                147, javax.swing
                               .GroupLayout
                               .PREFERRED_SIZE)))
                    .addContainerGap(
                      35, Short.MAX_VALUE))))
    );
    jPanel1Layout.setVerticalGroup(
        jPanel1Layout.createParallelGroup(javax
        .swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel1Layout.createSequentialGroup()
            .addComponent(cmbMyCombo, javax.swing
             .GroupLayout.PREFERRED_SIZE,
      javax.swing.GroupLayout.DEFAULT_SIZE,
      javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle
             .ComponentPlacement.RELATED)
            .addGroup(jPanel1Layout.createParallelGroup(
              javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(txtID, 
                  javax.swing.GroupLayout
                   .PREFERRED_SIZE, javax.swing
                   .GroupLayout.DEFAULT_SIZE, 
                   javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(lblId))
            .addPreferredGap(javax.swing.LayoutStyle
             .ComponentPlacement.RELATED)
            .addGroup(jPanel1Layout.createParallelGroup(
             javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(lblName)
                .addComponent(txtName, 
                 javax.swing.GroupLayout.PREFERRED_SIZE,
                  javax.swing.GroupLayout.DEFAULT_SIZE,
                  javax.swing.GroupLayout.PREFERRED_SIZE))
            .addContainerGap(javax.swing.GroupLayout
             .DEFAULT_SIZE, Short.MAX_VALUE))
    );

    jPanel2.setBorder(javax.swing.BorderFactory
    .createTitledBorder("Combo 2"));

    cmbMyCombo2.setToolTipText("");
    cmbMyCombo2.addActionListener(
     new java.awt.event.ActionListener() {
        public void actionPerformed(
         java.awt.event.ActionEvent evt) {
            cmbMyCombo2ActionPerformed(evt);
        }
    });

    lblId1.setText("ID:");

    lblName1.setText("Name:");

    javax.swing.GroupLayout jPanel2Layout = 
      new javax.swing.GroupLayout(jPanel2);
    jPanel2.setLayout(jPanel2Layout);
    jPanel2Layout.setHorizontalGroup(
        jPanel2Layout.createParallelGroup(
         javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel2Layout.createSequentialGroup()
            .addGroup(jPanel2Layout.createParallelGroup(
              javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(
                   jPanel2Layout.createSequentialGroup()
                    .addGap(41, 41, 41)
                    .addComponent(
                      cmbMyCombo2,
                      javax.swing.GroupLayout
                      .PREFERRED_SIZE, 135,
                      javax.swing.GroupLayout
                      .PREFERRED_SIZE))
                .addGroup(
                 jPanel2Layout.createSequentialGroup()
                    .addGap(18, 18, 18)
                    .addGroup(jPanel2Layout
                     .createParallelGroup(
                       javax.swing.GroupLayout
                       .Alignment.LEADING)
                        .addGroup(
                          jPanel2Layout
                          .createSequentialGroup()
                            .addComponent(lblId1)
                            .addGap(28, 28, 28)
                            .addComponent(txtID1,
                             javax.swing.GroupLayout
                             .PREFERRED_SIZE,
                              66,
                              javax.swing.GroupLayout
                              .PREFERRED_SIZE)
                            .addPreferredGap(
                             javax.swing.LayoutStyle
                             .ComponentPlacement.RELATED,
                             81, javax.swing.GroupLayout
                             .PREFERRED_SIZE))
                        .addGroup(jPanel2Layout
                         .createSequentialGroup()
                            .addComponent(lblName1)
                            .addPreferredGap(
                             javax.swing.LayoutStyle
                             .ComponentPlacement.RELATED)
                            .addComponent(txtName1,
                             javax.swing.GroupLayout
                             .PREFERRED_SIZE,
                              147,
                              javax.swing.GroupLayout
                             .PREFERRED_SIZE)))))
            .addContainerGap(25, Short.MAX_VALUE))
    );
    jPanel2Layout.setVerticalGroup(
        jPanel2Layout.createParallelGroup(
         javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel2Layout.createSequentialGroup()
            .addComponent(
              cmbMyCombo2,
              javax.swing.GroupLayout.PREFERRED_SIZE,
              javax.swing.GroupLayout.DEFAULT_SIZE,
              javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle
             .ComponentPlacement.RELATED)
            .addGroup(jPanel2Layout.createParallelGroup(
             javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(
                 txtID1,
                 javax.swing.GroupLayout.PREFERRED_SIZE,
                 javax.swing.GroupLayout.DEFAULT_SIZE,
                 javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(lblId1))
            .addPreferredGap(
             javax.swing.LayoutStyle.ComponentPlacement
             .RELATED)
            .addGroup(
              jPanel2Layout.createParallelGroup(
               javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(lblName1)
                .addComponent(txtName1,
                javax.swing.GroupLayout.PREFERRED_SIZE,
                javax.swing.GroupLayout.DEFAULT_SIZE,
                javax.swing.GroupLayout.PREFERRED_SIZE))
            .addContainerGap(
             javax.swing.GroupLayout.DEFAULT_SIZE,
             Short.MAX_VALUE))
    );

    javax.swing.GroupLayout layout = 
     new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(
         javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(
             jPanel1,
             javax.swing.GroupLayout.PREFERRED_SIZE,
             javax.swing.GroupLayout.DEFAULT_SIZE,
             javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(18, 18, 18)
            .addComponent(
              jPanel2,
              javax.swing.GroupLayout.DEFAULT_SIZE,
              javax.swing.GroupLayout.DEFAULT_SIZE,
              Short.MAX_VALUE)
            .addContainerGap())
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(
         javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addGroup(layout.createParallelGroup(
             javax.swing.GroupLayout.Alignment.LEADING,
              false)
                .addComponent(
                 jPanel1,
                 javax.swing.GroupLayout.DEFAULT_SIZE,
         javax.swing.GroupLayout.DEFAULT_SIZE,
         Short.MAX_VALUE)
                .addComponent(
         jPanel2,
         javax.swing.GroupLayout.DEFAULT_SIZE,
         javax.swing.GroupLayout.DEFAULT_SIZE,
         Short.MAX_VALUE))
            .addContainerGap(
     javax.swing.GroupLayout.DEFAULT_SIZE,
     Short.MAX_VALUE))
    );

    pack();
}

private void cmbMyComboActionPerformed(
java.awt.event.ActionEvent evt) {
    Object mySelectedItem = cmbMyCombo.getSelectedItem();
    Object myObject[] = (Object[])mySelectedItem;
    txtID.setText(myObject[0].toString());
    txtName.setText(myObject[1].toString());        
}

private void cmbMyCombo2ActionPerformed(
java.awt.event.ActionEvent evt) {
    Object mySelectedItem = cmbMyCombo2.getSelectedItem();
    Object myObject[] = (Object[])mySelectedItem;
    txtID1.setText(myObject[0].toString());
    txtName1.setText(myObject[1].toString());
}

public static void main(String args[]) {

    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            new MyComboBox().setVisible(true);
        }
    });
}

private javax.swing.JComboBox cmbMyCombo;
private javax.swing.JComboBox cmbMyCombo2;
private javax.swing.JPanel jPanel1;
private javax.swing.JPanel jPanel2;
private javax.swing.JLabel lblId;
private javax.swing.JLabel lblId1;
private javax.swing.JLabel lblName;
private javax.swing.JLabel lblName1;
private javax.swing.JTextField txtID;
private javax.swing.JTextField txtID1;
private javax.swing.JTextField txtName;
private javax.swing.JTextField txtName1;
// End of variables declaration

private void iniCombobox() {

   cmbMyCombo.addItem(new Object[] {"1", "Item 1"});
   cmbMyCombo.addItem(new Object[] {"2", "Item 2"});
   cmbMyCombo.addItem(new Object[] {"3", "Item 3"});

   cmbMyCombo2.addItem(new Object[] {"1", "Item 1"});
   cmbMyCombo2.addItem(new Object[] {"2", "Item 2"});
   cmbMyCombo2.addItem(new Object[] {"3", "Item 3"});

   cmbMyCombo.setRenderer(new MyListRenderer());
   cmbMyCombo2.setRenderer(new MyListRenderer());       
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T01:37:43.647

最后......为了实现这一点，我必须添加一个基本的自定义组合框编辑器，并将自定义编辑器设置为我原始代码中的组合框（包含在我的问题中）：

```
cmbMyCombo.setEditor(new MyComboEditor()); 
```

自定义 Combo Box Editor 类需要实现 ComboBoxEditor。我有 6 种方法可以覆盖。但这里有3个主要的。在 getEditorComponent 中，我返回一个文本字段，但我可以返回任何类型的组件。

```
@Override
public Component getEditorComponent() {
    return textFeild;
} 
```

然后我根据我在 setItem() 中选择的对象数据 [1] 设置 textFeild 中的文本（请注意，我保留我的原始对象稍后返回“myReturnObject”）：

```
 @Override
 public void setItem(Object anObject) {

    if(anObject != null){
        myObject = (Object[])anObject;
        myReturnObject = anObject;
        //I can now set whatever i want in the text feild            
        textFeild.setText(myObject[1].toString());//<--
     }
     else{ 
       myReturnObject = anObject;
     }
} 
```

然后，如果从列表中选择原始对象，则返回原始对象；如果已编辑文本字段，则返回自定义对象。

```
@Override
public Object getItem() {
    String objectTxt = myObject[1].toString();
    String feildTxt = textFeild.getText();

    if(objectTxt.equals(feildTxt)){
        return myReturnObject;
    }
    else{
        //Creating and returning custom object with the Feild text
        //and setting the contnent of the text feild in the object
        return new Object[]{"0",textFeild.getText()};
    }
} 
```

对于组合框来说，这是很多工作，但在我的情况下是值得的。希望这可以帮助别人。

这里是这项工作的参考： [http](http://www.java2s.com/Code/Java/Swing-JFC/AfancyexampleofJComboBoxwithacustomrendererandeditor.htm) ://www.java2s.com/Code/Java/Swing-JFC/AfancyexampleofJComboBoxwithacustomrendererandeditor.htm http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html 这里是自定义组合编辑器“MyComboEditor()”的完整代码：

```
package combobox;

import java.awt.Component;
import java.awt.event.ActionListener;
import javax.swing.ComboBoxEditor;
import javax.swing.JTextField;

public class MyComboEditor implements ComboBoxEditor {
  JTextField textFeild;
  Object myObject[];
  Object myReturnObject;

public MyComboEditor(){
    textFeild = new JTextField();     
}

@Override
public Component getEditorComponent() {
    return textFeild;
}

@Override
public void setItem(Object anObject) {

    if(anObject != null){
        myObject = (Object[])anObject;
        myReturnObject = anObject;            
        textFeild.setText(myObject[1].toString());
     }
     else{ 
       myReturnObject = anObject;
     }
}

@Override
public Object getItem() {
    String objectTxt = myObject[1].toString();
    String feildTxt = textFeild.getText();

    if(objectTxt.equals(feildTxt)){
        return myReturnObject;
    }
    else{
        return new Object[]{"0",textFeild.getText()};
    }
}

@Override
public void selectAll() {
    throw new UnsupportedOperationException(
            "Not supported yet. in select All");
}

@Override
public void addActionListener(ActionListener l) {
    textFeild.addActionListener(l);     
}

@Override
public void removeActionListener(ActionListener l) {
    textFeild.removeActionListener(l);
}    
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T18:59:53.610

> 我确实设置了 myComboBox.setRenderer(new MyListRenderer()); 我在列表中选择的任何内容都会返回组合文本字段中的对象。注意：我的 Object[]{id, nomClient} 中的 id 是我对数据库的引用。

[渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)（与`JTable`,相同的概念）用于格式化已经存在的值（, , , ）, don't , ,或任何内部`JList``JComboBox``Color``Font``Background``Foreground``add``put``change``modify``Renderer`

> 我怎样才能解决这个问题？

直接放置数据，`Items`在`JComboBox`您的情况下更新[ComboBoxModel](https://stackoverflow.com/a/7388965/714968)，通知`add`，或者必须在[事件调度线程上完成](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)`put``change``modify`

# ruby-on-rails - 扫描文本以查找域类型

> ID：10776417
> 
> 赞同：0
> 
> 时间：2012-05-27T18:51:38.443
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我正在尝试在控制器中拼凑创建操作的一部分，该控制器扫描输入的文本并智能地了解它是什么类型的域名。

我有一个名为“domain_names”的文本框。用户将域放入以逗号分隔的框中，例如“yahoo.com, google.com”

在控制器中它像这样击中它：

```
@extracted_domains = (params[:domain_names]).split(",")
@extracted_domains.each do |domain|
    domain.strip
    domain_scan = domain.scan(/(\w+)[.]/).flatten
    com_scan = domain.scan(/[.](\w+)/).flatten
    new_domain_type = DomainType.find_or_create_by_domain_type(:domain_type => com_scan)
    new_domain = Domain.create(:domain => domain_scan, :domain_type_id => new_domain_type.id)
end 
```

在控制台中它工作得很好。但是当我把它付诸实践时，我得到了非常奇怪的东西存储在数据库中。例如，如果 :domain 本来应该具有值“google”，那么当它存储在数据库中时，它将具有值“---\n- google\n”。

不知道为什么

提前致谢。

更新**

问题：它将一个数组放入一个字符串中。

解决方案：将其设为字符串。

```
domain_scan = domain.scan(/(\w+)[.]/).flatten.first
com_scan = domain.scan(/[.](\w+)/).flatten.first 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T00:22:12.093

它似乎是由 YAML 输入提供的。字符串开头的三个破折号后跟一个换行符是 YAML 的有力指示：[http ://en.wikipedia.org/wiki/YAML#Sample_document](http://en.wikipedia.org/wiki/YAML#Sample_document)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T00:21:39.870

至于您的问题，我们可以看到发送的确切参数吗？

我会看看[https://github.com/pauldix/domainatrix](https://github.com/pauldix/domainatrix)进行域提取。

# xcode - 搜索栏可以与带有静态单元格的 uitableview 一起使用吗？

> ID：10776419
> 
> 赞同：2
> 
> 时间：2012-05-27T18:52:02.580
> 
> 标签：xcode, uitableview, static, uisearchbar

我有一个应用程序，它是一个选项卡栏布局，其中包含我通过界面生成器创建的 5 个表格视图。表格视图的所有单元格都是静态的，然后我将它们链接到 Viewcontroller 场景，这些场景通过界面构建​​器再次显示我想要的内容。我想知道是否有一种方法可以实现可以搜索这些静态单元格的搜索栏，或者我是否必须设置一个数组来保存页面。我对此有点迷茫，因为我找到了搜索栏教程，但据我所知，它们都适用于包含数据的数组。我正在使用最新的 Xcode 4.3 iOS 5.1 等。

谢谢J

# sql - 是否存在一种从特定表中选择所有数据的简单方法

> ID：10776423
> 
> 赞同：1
> 
> 时间：2012-05-27T18:52:28.303
> 
> 标签：sql, ios, sqlite

我有两个表：A，B。我需要从 B 中选择所有数据。我可以这样做

```
SELECT id, b1, b2, ... b20 FROM A,B WHERE A.id = B.id; 
```

这不是很酷的解决方案。如果我修改 B 的数据库，我将需要更新此语句。存在类似的东西吗？

```
SELECT *(B) 
```

它从 B 中选择了所有数据，并且没有从 A 中选择任何数据。

我的数据库

```
A
id
a1
a2
...
a20 

B
id
b1
b2
...
b20 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:55:30.563

使用以下查询：

```
SELECT * FROM B; 
```

或者

```
SELECT * FROM B INNER JOIN A ON A.id = B.id; 
```

如果要连接表 A 和 B。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T19:25:51.977

所以如果你想认真地创建数据库，你不应该看到方法的复杂性，而是效率和速度。所以我给你的建议是使用`JOIN`它是从两个或多个表中选择数据的最佳解决方案，因为这种方式尽可能快，至少对于我更清洁的例子来说`inserted select`。

你写道：`I need to select all data from B`这意味着`SELECT * FROM B`不是你写的。

我对你的建议是使用这个：

```
SELECT * FROM A <INNER / LEFT / RIGHT / NATURAL> JOIN B ON A.id = B.id; 
```

或选择特定列

```
SELECT A.column1, A.column2, ... FROM A <INNER / LEFT / RIGHT / NATURAL> JOIN B ON A.id = B.id; 
```

**笔记：**

> NATURAL JOIN 将在上面的示例中起作用，因为两个表中的主键和外键具有相同的名称。因此，在没有正确匹配的列的情况下使用 NATURAL JOIN 查询时必须非常小心。

因此，您确实应该考虑如何创建数据库以及如何使用数据库，如何从数据库中提取数据以供查看，如何将新的潜在数据插入数据库等。

问候男人！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T04:35:33.127

我怀疑其他人已经充分回答了您关于从表 B 中选择所有字段的问题。这很好，因为您确实应该了解 SQL 基础知识。如果他们还没有，我还建议您查看[SQLite.org](http://www.sqlite.org/lang.html)站点以了解 SQLite 理解的 SQL 语法。

但是，假设您已经回答了您的问题，我只想对使用星号语法提出两个警告。

1.  首先，如果在以后的某个日期，您向 B 添加一列，它是一个毛茸茸的大块（例如，一个多兆字节的图像）。如果您使用`*`(or `B.*`) 语法从 B 中检索所有列，您可能会检索到大量您可能不需要的特定功能的信息。如果不需要，不要从 SQLite 检索数据。

2.  其次，您的目标 C 是根据结果的列名还是根据相关列的索引号从您的 select 语句中检索数据。如果您使用后者，那么使用`*`语法可能会很危险，因为如果表中列的物理顺序发生变化，您可能会破坏您的代码。

使用命名列可以解决在检索过多数据方面的内存/性能问题，以及将 Objective C 与 SQLite 中表的物理实现隔离开来。一般来说，我不建议开发人员在`*`从 SQL 数据库中检索数据时使用该语法。也许这对于一个琐碎的项目来说不是问题，但是随着项目变得越来越复杂，您可能需要仔细考虑`*`语法的含义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T18:59:52.287

我不知道以下查询是否适用于 sqlite，我知道它适用于 Oracle，但您可以试一试...

```
SELECT B.* FROM A,B WHERE A.id = B.id; 
```

# ruby-on-rails - 使所有输入字段在同一行

> ID：10776429
> 
> 赞同：2
> 
> 时间：2012-05-27T18:54:01.163
> 
> 标签：ruby-on-rails, css, ajax, twitter-bootstrap, simple-form

我试图使用 css 使我的表单的所有字段都显示在一行上。它是我页面上标题导航的一部分，因此它显示在一行而不是多行上很重要。

这是我目前的标题代码。

```
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
      <div class="container">
      <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
        <span class="i-bar"></span>
        <span class="i-bar"></span>
        <span class="i-bar"></span>
      </a>
      <a class="brand" href="/">Bandini</a>
      <div class="container nav-collapse">
        <ul class="nav">
            <li><%= link_to "Clients", "/clients"  %></li>
            <li><%= link_to "Jobs", "/jobs"  %></li>
        </ul>
        <ul class="user_nav">
                <%= render :partial => "sessions/manager" %>
            </ul>
      </div><!--/.nav-collapse -->
    </div>
  </div>
</div> 
```

该`<%= render :partial => "sessions/manager" %>`部分指向一个部分，该部分根据用户登录状态显示另一个部分。

如果他们已注销，则会显示登录表单，如果他们已登录，则会显示当前用户的电子邮件地址和注销链接。

这是我的登录表单。

```
<%= simple_form_for("user", :url => user_session_path, :html => {:id => "sign_in", :class => 'form-inline' }, :remote => true, :format => :json) do |f| %>
    <%= f.input :email, :placeholder => 'Email' %>
    <%= f.input :password, :placeholder => 'Password' %>
    <%= f.submit 'Login' %>
    <%= link_to "Forgot your password?", new_password_path('user') %>
  <% end %> 
```

该表单将 ajax 和 simple_form gem 用于所有标记。

我试过在谷歌的元素工具中玩耍并添加`display: inline;`到我所有的输入字段中，但没有这样的运气。

任何人都可以帮助或指出我正确的方向吗？

编辑：HTML生成..

```
 <ul class="user_nav">
                  <form accept-charset="UTF-8" action="/users/sign_in" class="simple_form form-inline" data-remote="true" id="sign_in" method="post" novalidate="novalidate"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="fN0oKIlpnhS0WLZpKQafln+182IT1ONVuDP0eRtT8fg=" /></div>
    <div class="control-group email required"><label class="email required control-label" for="user_email"><abbr title="required">*</abbr> Email</label><div class="controls"><input class="string email required" id="user_email" name="user[email]" placeholder="Email" size="50" type="email" /></div></div>
    <div class="control-group password required"><label class="password required control-label" for="user_password"><abbr title="required">*</abbr> Password</label><div class="controls"><input class="password required" id="user_password" name="user[password]" placeholder="Password" size="50" type="password" /></div></div>
    <input name="commit" type="submit" value="Login" />
    <a href="/users/password/new">Forgot your password?</a>
  </form>

            </ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T19:14:35.443

`display: inline;`您的输入不起作用的原因是因为 simple_form 默认情况下会在每个输入周围包装一个 div 标签。有两种方法可以解决此问题：

1.  为 simple_form 创建一个自定义包装器

    [https://github.com/plataformatec/simple_form#the-wrappers-api](https://github.com/plataformatec/simple_form#the-wrappers-api)

2.  将您的输入和周围的 div 都设置为 inline-block：

    ```
    .user_nav div, .user_nav input, .user_nav input[type="submit"] {

      display: inline-block;

    } 
    ```

虽然`.user_nav input`理论上 css 样式不是必需的，但它有助于指定它以防万一有其他 CSS 规则将输入设置为阻止。如果您确定输入行为正常，那么您应该能够删除上面 CSS 定义的第二部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T20:28:17.027

根据文档所说的[http://twitter.github.com/bootstrap/components.html#navbar](http://twitter.github.com/bootstrap/components.html#navbar)

只需将 navbar-form 类添加到您的表单中，然后向左或向右拉

你也应该把它放在一个 li 标签里，因为你把它放在一个 ul 里面

# mysql - MySQL：仅使用偶数或奇数自动递增？

> ID：10776437
> 
> 赞同：6
> 
> 时间：2012-05-27T18:55:16.370
> 
> 标签：mysql

是否可以有自动增量字段生成偶数或奇数（跳过相反的）？我问的原因是因为我想在两个表之间共享自动增量。欢迎其他实现它的方法。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T19:36:50.843

正如 Juergen 所提到的，您可以通过在 my.ini 文件中进行以下更改（或添加）来在系统级别而不是会话级别执行此操作：

```
auto-increment-increment = 2
auto-increment-offset = 1 
```

或者

```
auto-increment-increment = 2
auto-increment-offset = 2 
```

基本上，这在 Master-Master 复制设置中被广泛使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T19:00:05.040

尝试

```
SET @@auto_increment_increment=2;
SET @@auto_increment_offset=2; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T19:08:31.137

您可以使用触发器来实现自定义自动增量功能。

创建表以存储自定义自动增量值并插入一行具有初始值：

```
CREATE TABLE autoincrement_id (id_even INT, id_odd INT);
INSERT INTO autoincrement_id VALUES (0, 1); 
```

创建触发器，它将相应地修改插入行的 id 值：

```
CREATE TRIGGER set_id_in_sometable_with_odd_id BEFORE INSERT ON `sometable_with_odd_id`
FOR EACH ROW
BEGIN
   SET NEW.id = (SELECT id_odd FROM autoincrement_id LIMIT 1);
   UPDATE autoincrement_id SET id_odd = id_odd + 2;
END;

CREATE TRIGGER set_id_in_sometable_with_even_id BEFORE INSERT ON `sometable_with_even_id`
FOR EACH ROW
BEGIN
   SET NEW.id = (SELECT id_even FROM autoincrement_id LIMIT 1);
   UPDATE autoincrement_id SET id_even = id_even + 2;
END; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T19:10:46.097

您可以从另一个表中偏移一个表的自动增量字段，即一个表从 1 开始 ids，而另一个从 1000000 开始（或根据您的使用模式选择的其他值）。

```
CREATE TABLE table1 (id BIGINT UNSIGNED AUTO_INCREMENT);
CREATE TABLE table2 (id BIGINT UNSIGNED AUTO_INCREMENT) AUTO_INCREMENT = 1000000; 
```

您还可以根据需要选择自动增量列类型。BIGINT UNSIGNED 的范围是 0..18446744073709551615，应该涵盖大多数情况。

# android - 从android中的图库中选择时裁剪图像

> ID：10776438
> 
> 赞同：25
> 
> 时间：2012-05-27T18:55:24.253
> 
> 标签：android

从图库中选择图像时，我想在我的应用程序中裁剪图像。即，如果我启动图库并选择一个图像，那么当我们从 iPhone 中选择一个图像时，裁剪窗口应该会出现。在Android中是否可以。

我找到了一个在 android 中裁剪图像的教程，但似乎不是我想要的方式。

[http://www.coderzheaven.com/2011/03/15/crop-an-image-in-android/](http://www.coderzheaven.com/2011/03/15/crop-an-image-in-android/)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-27T19:03:59.053

是的，可以使用`com.android.camera.action.CROP`. 从gallery.you挑选图片网址后，您将启动裁剪编辑器：

```
Intent intent = new Intent("com.android.camera.action.CROP");  
intent.setClassName("com.android.camera", "com.android.camera.CropImage");  
File file = new File(filePath);  
Uri uri = Uri.fromFile(file);  
intent.setData(uri);  
intent.putExtra("crop", "true");  
intent.putExtra("aspectX", 1);  
intent.putExtra("aspectY", 1);  
intent.putExtra("outputX", 96);  
intent.putExtra("outputY", 96);  
intent.putExtra("noFaceDetection", true);  
intent.putExtra("return-data", true);                                  
startActivityForResult(intent, REQUEST_CROP_ICON); 
```

当图片选择Activity返回时会选择保存contents.in `onActivityResult`：

```
Bundle extras = data.getExtras();  
if(extras != null ) {  
    Bitmap photo = extras.getParcelable("data");  
    ByteArrayOutputStream stream = new ByteArrayOutputStream();  
    photo.compress(Bitmap.CompressFormat.JPEG, 75, stream);  
        // The stream to write to a file or directly using the photo
} 
```

并查看[这篇文章](https://stackoverflow.com/questions/1973359/android-crop-an-image-after-taking-it-with-camera-with-a-fixed-aspect-ratio)，它也可以帮助您在 android 中裁剪图像

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-27T19:35:12.517

本[教程](http://www.londatiga.net/featured-articles/how-to-select-and-crop-image-on-android/)正是您需要享受的：

从图库中挑选图片：

![在此处输入图像描述](../Images/396bbc30d1b67d860d126ecedb45065e.png)

意图选择操作后裁剪图像

![在此处输入图像描述](../Images/fbd15955dbc0371fdef7bbac9b0669fb.png)

干杯

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-09-04T13:24:10.590

在选择/拍摄图像后，您已经可以告诉 Camera/Gallery-Intent 启动裁剪编辑器：

## 从图库中选择图片：

```
Intent pickImageIntent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

pickImageIntent.setType("image/*");
pickImageIntent.putExtra("crop", "true");
pickImageIntent.putExtra("outputX", 200);
pickImageIntent.putExtra("outputY", 200);
pickImageIntent.putExtra("aspectX", 1);
pickImageIntent.putExtra("aspectY", 1);
pickImageIntent.putExtra("scale", true);
pickImageIntent.putExtra(MediaStore.EXTRA_OUTPUT, uriWhereToStore);
pickImageIntent.putExtra("outputFormat",

Bitmap.CompressFormat.JPEG.toString());
startActivityForResult(pickImageIntent, RESULT_LOAD_IMAGE); 
```

## 拍照：

```
Intent takePicIntent = new Intent("android.media.action.IMAGE_CAPTURE");

takePicIntent .putExtra("crop", "true");
takePicIntent .putExtra("outputX", 200);
takePicIntent .putExtra("outputY", 200);
takePicIntent .putExtra("aspectX", 1);
takePicIntent .putExtra("aspectY", 1);
takePicIntent .putExtra("scale", true);
takePicIntent .putExtra(MediaStore.EXTRA_OUTPUT, uriWhereToStore);
takePicIntent .putExtra("outputFormat",

Bitmap.CompressFormat.JPEG.toString());
startActivityForResult(takePicIntent , RESULT_LOAD_IMAGE); 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-05-27T20:12:55.870

虽然是内部 API 的一部分，但`com.android.camera.action.CROP`它似乎在大多数 Android 设备上都得到了很好的支持。这可能会让你开始：

```
final Intent intent = new Intent("com.android.camera.action.CROP");
intent.setData(uriOfImageToCrop);
intent.putExtra("outputX", 400);
intent.putExtra("outputY", 400);
intent.putExtra("aspectX", 1);
intent.putExtra("aspectY", 1);
intent.putExtra("scale", true);
intent.putExtra("noFaceDetection", true);
intent.putExtra("output", Uri.fromFile(someOutputFile));
startActivityForResult(intent, SOME_RANDOM_REQUEST_CODE); 
```

`onActivityResult()`然后在你的方法中处理你需要做的事情`Activity`。您的输出文件应该是裁剪后的图像。

但是，由于此`Intent`操作是内部 API 的一部分，因此我**强烈建议**您在某些设备不支持`Intent`. 一些制造商提供自己的图库应用程序，因此无法知道用户的设备是否会识别`Intent`. **请不要忘记这个！！**:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-24T17:25:32.900

我以这种方式解决了这个问题

```
private void pickUserImage() { 

if (doHavePermission()) { 
    Intent photoPickerIntent = new Intent(Intent.ACTION_PICK,
            android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
    photoPickerIntent.setType("image/*");
    photoPickerIntent.putExtra("crop", "true");
    photoPickerIntent.putExtra("scale", true);
    photoPickerIntent.putExtra("outputX", 256);
    photoPickerIntent.putExtra("outputY", 256);
    photoPickerIntent.putExtra("aspectX", 1);
    photoPickerIntent.putExtra("aspectY", 1);
    photoPickerIntent.putExtra("outputFormat", Bitmap.CompressFormat.JPEG.toString());
    photoPickerIntent.putExtra(MediaStore.EXTRA_OUTPUT, getTempUri());
    startActivityForResult(photoPickerIntent, PICK_FROM_GALLERY);
    } 
} 
```

[在](https://stackoverflow.com/a/44193985/1448357)stackoverflow 帖子中找到我的完整解决方案

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-11T02:36:23.400

除非您尝试一下，否则没有人会告诉您需要哪些额外功能：

```
 val intent = Intent(Intent.ACTION_PICK)
   intent.apply {
       type = "image/*"
       putExtra("crop", "true") // NOTE: should be string
       putExtra("outputX", 300) // This is needed, editor can't close without these two
       putExtra("outputY", 300) // This is needed

       putExtra("scale", true)
       putExtra("aspectX", 1)
       putExtra("aspectY", 1)
       putExtra("return-data", true)
   }
   startActivityForResult(intent, YOUR_INT_CODE) 
```

# python - 如果未找到标头，则引发错误（csv 文件）

> ID：10776442
> 
> 赞同：3
> 
> 时间：2012-05-27T18:55:46.670
> 
> 标签：python

读取 CSV 文件。如果以下列表中没有任何标题，我想提出错误消息。它必须是 csv 文件中的至少一个标题。标头是 `age sex city`. 我正在尝试这样。谢谢

```
with open('data.csv') as f:
  cf = csv.DictReader(f, fieldnames=['city'])
  for row in cf:
    print row['city'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:58:57.010

这个怎么样？

```
import csv

with open('data.csv', 'rb') as inf:
    cf = csv.reader(inf)

    header = cf.next()
    if header != ['Age', 'Sex', 'City']:
        print "No header found"
    else:
        for row in cf:
            print row[2] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T22:24:06.873

根据我对问题的理解，如果找到任何标题，则需要通过标题检查。否则它应该引发异常。

```
import csv

with open('data.csv','rb') as f:
    fieldnames = ['age','sex','city']
    cf = csv.DictReader(f)
    headers = cf.fieldnames

    if len(set(fieldnames).intersection(set(headers))) == 0:
        raise csv.Error("CSV Error: Invalid headers: %s" % str(headers))

    for row in cf:
        city = row['city'] if 'city' in headers else "N/A"
        sex = row['sex'] if 'sex' in headers else "N/A"
        age = row['age'] if 'age' in headers else "N/A"
        print "city: " + city + ", sex: " + sex + ", age: " + age 
```

# java - java.util.Dates 的数值稳定平均值

> ID：10776448
> 
> 赞同：0
> 
> 时间：2012-05-27T18:56:37.293
> 
> 标签：java, numerical-stability

我有一堆日期，我想找到它们的平均值。

*   在遇到溢出问题之前，我可以总结 100 年内的多少个日期？有什么陷阱吗？
*   计算平均值的最佳方法是什么，避免溢出问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T19:01:22.277

```
System.out.println(Long.MAX_VALUE / System.currentTimeMillis()); 
```

输出：

```
6892653 
```

我认为这回答了你的两个问题。您还可以将每个 epoch 值除以 1000*60*60*24，但考虑到该原始商的大小，即使这样也可能是矫枉过正。

# c - 并行编程=多个子进程还是每个进程创建一个子进程？

> ID：10776450
> 
> 赞同：1
> 
> 时间：2012-05-27T18:56:54.790
> 
> 标签：c, multithreading, process, parallel-processing

不确定“并行编程”是什么意思......但我有两个想法

1.  进程 A 产生一定数量的子进程。一旦进程 A 完成创建子进程，所有子进程同时运行。

2.  进程A创建子进程B，进程B创建另一个它的子进程C，进程C创建子进程D，等等......一旦完成，所有分配任务的进程同时运行。

哪一个是并行编程的正确思想？谢谢您的帮助！

编辑：我假设同时运行不同的程序需要多进程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T20:01:11.767

术语“并行编程”比仅仅“产生子进程或线程的进程”要广泛得多。这可能意味着：

1.  一个进程产生一组线程来做一些工作。
2.  单个进程产生一组子进程来完成一些工作。
3.  多个进程独立产生以在同一台机器上进行协作计算。
4.  多个进程独立产生以在网络中的不同机器上进行协作计算。
5.  与执行所有并行计算的 GPU 通信的单个进程。
6.  以上任何组合或嵌套。

基本上，并行编程是编写并行解决问题的应用程序或应用程序组的行为。线程、进程等只是实现这一点的手段。

**考虑这种情况**：集群上发生的大型并行文本处理任务。主节点向其所有从节点发出命令以生成计算进程（全局并行）。每个进程依次产生多个线程/子进程以利用本地并行性（多核/多处理器节点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T19:43:37.303

我会说“并行编程的正确思想”**也不**是，因为场景要求进程同时执行。

并行性是指任务实际上同时运行（即在多核处理器上）。如果您的所有进程都在单个核心处理器上分叉/执行，那么这将被视为*concurrency*，而不是*parallelism*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T19:55:14.187

您的应用程序（称为“进程”）以一定数量的活动线程开始，在经典的 Unix 和 Windows 系统中通常为 1。线程代表单独的待办事项。

线程以真实或伪并行运行，具体取决于可用真实 CPU 的数量、调度程序的工作方式、优先级、同一机器上其他进程/线程的需求，或者线程是否正在等待与另一个线程的交互完成. 您通常应该想象它们并行运行，无论它们各自的进展速度有多快，或者调度程序的策略如何。

在任何时候，线程都可能死亡（退出或自杀）。或者，它可能会为其进程制造更多线程。因此，一个进程拥有的线程数通常是动态的。（在大多数操作系统中，线程也可以产生其他进程，但这只会混淆图片而不会添加任何真正不同的东西）。

# file - 我的应用程序的所有用户的中央共享文件夹

> ID：10776455
> 
> 赞同：0
> 
> 时间：2012-05-27T18:57:19.257
> 
> 标签：file, ftp, zip, dropbox, sharing

我有一个应用程序可以按用户访问应用程序文件夹。

我还希望能够在我的 Dropbox 中有一个特定的文件夹——我的应用程序的所有用户都可以访问其中的文件——有点像应用程序上每个用户之间的共享文件夹。

这是可能的 - 你是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T23:30:43.287

我相信这只是 Dropbox 不支持的功能——而且很可能会使用亚马逊云。

# c# - 在 C# 中获取 x 的静态类型？

> ID：10776456
> 
> 赞同：1
> 
> 时间：2012-05-27T18:57:27.433
> 
> 标签：c#, .net, .net-4.0

我有这个类结构：

```
class A     {   }
class B:A   {   }

A x = new B(); 
```

这是运行时类型：

```
x.GetType(); //B 
```

我怎样才能得到它的*编译时*类型？

我试过`typeof (x)`了 - 但参数必须是一种类型......

我渴望的答案是：`A`

## 编辑

我为什么要问它？

因为我认为`int`是通过`polymorphic`引擎初始化的：

像这样的东西：

```
object myInd = new Int32(); / /this DOES compile 
```

我想验证我的假设：

它来自对象吗？

为了做到这一点 - 我必须知道它的静态类型......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-27T19:04:04.793

您可以创建一个通用方法：

```
Type StaticTypeOf<T>(T t)
{
  return typeof(T);
} 
```

调用它：

```
object i = 1;

// Writes out System.Object
Console.WriteLine(StaticTypeOf(i).ToString()); 
```

这是一个解决方案-即使我看不到该解决方案解决的问题是什么；-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T20:21:38.577

正如其他人在评论中所述 - 对象的静态类型是您在编译时自己告诉编译器的东西。在运行时发现它绝对没有意义。

```
object myInd = new Int32(); / /this DOES compile 
```

编译不是因为“int 是通过多态引擎初始化的”，而是因为在 C# 中，所有内容都可以转换为 type `object`。这不一样。

值类型（如`Int32`）到的转换`object`是通过`boxing`. 您可以在此 msdn 页面上阅读所有相关信息：http: [//msdn.microsoft.com/en-us/library/yz2be5wk.aspx](http://msdn.microsoft.com/en-us/library/yz2be5wk.aspx)。

# java - java - 公共访问与访问器方法

> ID：10776459
> 
> 赞同：0
> 
> 时间：2012-05-27T18:58:38.067
> 
> 标签：java, encapsulation

> **可能重复：**
> [为什么要使用 getter 和 setter？](https://stackoverflow.com/questions/1568091/why-use-getters-and-setters)

我正在阅读 Java for Dummies 2nd edition，它说最好为类的变量定义访问器方法，而不是让它们`public`. 真的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T19:00:36.163

是的。

定义访问器方法使您具有更大的灵活性。例如，您可以使其`public`可读，但仅`private`可写。

[这是这个特定问题的 Skeet 答案](https://stackoverflow.com/a/2279692/1210260)。他建议始终将您的字段设为私有

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T19:04:49.277

是的，这是一个约定。

它允许您控制其他类如何访问成员（通常是私有的）。例如，您可以从返回和设置值的基本 get/set 开始。但也许在项目的后期你会想要添加更多的控制。在这种情况下，您只需更改 get/set 方法，而不是重构所有项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T19:14:13.800

如果可能的话，我什至会说最好不要使用访问器方法。让班级在自己的状态下工作，而不是将其公开给另一个班级使用。

如果您确实必须公开状态，访问器方法使您有机会返回状态的副本而不是实际的对象。这样调用类将无法从外部修改状态，避免了不变量被破坏的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T19:01:02.013

这是真的！

在 Java 中，通常的做法是将类变量声明为私有，然后编写公共访问器和转换器方法来在类外控制它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-27T19:01:15.780

制作访问器方法通常很好，以规范任何其他类（和任何人）可以使用的数据。

特别是在大型项目中，您希望其他类只使用该类中众多变量中的一小部分，因此您只需创建几个 getter 方法。

另一方面，它使代码更清晰，更容易看到正在发生的事情。第三，使用错误的变量很难在程序中创建自己的错误，因为在其他类中可供选择的变量较少。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-27T19:01:42.310

我推荐阅读面向对象的编程哲学：

[维基百科](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)：

当您定义访问器时，您可以在那里编写一些额外的逻辑来保护对象的状态。

# android - 从 php 服务器到 android 的数据转换失败

> ID：10776461
> 
> 赞同：0
> 
> 时间：2012-05-27T18:58:48.600
> 
> 标签：android, eclipse, android-emulator

这部分编码有错误吗？我不明白具体问题在哪里。作为我的结果= null。传递给 php 并获得 php 服务器回复后。它没有按应有的方式检索数据。调试没有错误，应用程序正在运行，但它并没有按照我编写的程序运行......有没有人可以看到这部分的任何漏洞？

```
 BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-    1"),8);

                sb = new StringBuilder();

                sb.append(reader.readLine() + "\n");

                String line="0";

                while ((line = reader.readLine()) != null) {

                sb.append(line + "\n");
                }
                is.close();
                result=sb.toString(); 
```

PHP 编码方面

```
 $db_host = "localhost";
 $db_username = "root";
 $db_pass = "trickster911";
 $db_name = "track_database";

 @mysql_connect("$db_host","$db_username","$db_pass") or die ("Could not connect to database");
 @mysql_select_db("$db_name");

 $imei = $_POST['code3'];

 $sql=("SELECT latitude, longitude FROM track WHERE imei = ('$imei')") or die (mysql_error());
 $result=mysql_query($sql);

 if($result){
 echo "Y";
 }

 else {
 echo "N";
 }
 $output = array();
  while($row=mysql_fetch_assoc($result))    
  $output[]=$row;
   print(json_encode($output));
   mysql_close();

 ?> 
```

调试后，

```
 JSONTokener.nextCleanInternal() line: 112  
 JSONTokener.nextValue() line: 90   
 JSONObject.<init>(JSONTokener) line: 154   
 JSONObject.<init>(String) line: 171    
 Tracking$1.onClick(View) line: 119 
 Button(View).performClick() line: 2408 
 View$PerformClick.run() line: 8816 
 ViewRoot(Handler).handleCallback(Message) line: 587    
 ViewRoot(Handler).dispatchMessage(Message) line: 92    
 Looper.loop() line: 123    
 ActivityThread.main(String[]) line: 4627   
 Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not      available [native method]    
 Method.invoke(Object, Object...) line: 521 
 ZygoteInit$MethodAndArgsCaller.run() line: 868 
 ZygoteInit.main(String[]) line: 626    
 NativeStart.main(String[]) line: not available [native method] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T19:42:08.957

代替：

```
$sql=("SELECT latitude, longitude FROM track WHERE imei = ('$imei')") or die (mysql_error()); 
```

尝试这个：

```
$sql=("SELECT latitude, longitude FROM track WHERE imei = '".$imei."'") or die (mysql_error()); 
```

我不确定，但也许你的问题是因为这个。如果它解决了您的问题，请提供一些反馈。

# objective-c - 显示来自 url 的照片

> ID：10776463
> 
> 赞同：0
> 
> 时间：2012-05-27T18:59:14.027
> 
> 标签：objective-c, cocos2d-iphone, textures, sprite

我想从我的主页上获取一张照片并显示它。它（有点）有效。但有时由于这里发生的事情，加载下一个场景需要至少 10 秒。所以这就是我所做的：

```
 NSString *myURL = [PICURL stringByAppendingString:[[[[levelConfig objectForKey:category] objectForKey:lSet] objectForKey:levelString] objectForKey:@"pic"]];
            UIImage *dYKPic = [UIImage imageWithData: [NSData dataWithContentsOfURL: [NSURL URLWithString:myURL]]];

            if(dYKPic == nil){
                NSString *defaultURL = @"http://www.exampleHP.com/exampleFolder/default.jpg";
                dYKPic = [UIImage imageWithData: [NSData dataWithContentsOfURL: [NSURL URLWithString:defaultURL]]];
            }

                CCTexture2D *tex = [[CCTexture2D alloc] initWithImage:dYKPic];
                CCSprite *image = [CCSprite spriteWithTexture:tex];
                image.anchorPoint = ccp(0,0);
                image.position = ccp(32,216);
                [self addChild:image z:2]; 
```

所以，这需要 10 秒，此外，加载 default.jpg - 即使图片存在 - 但只是在需要很长时间的情况下...... 70％的情况下它工作正常......所以怎么了 ？我在哪里释放 tex ？添加孩子后立即？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T19:28:59.470

它必须加载图片。这就是问题所在。您要么需要加载和缓存它、存储它，要么在需要它之前预加载它。

或者最后一个选项是异步加载它，并在完成后更新您的视图。

# android - 旋转图像并获取旋转角度

> ID：10776466
> 
> 赞同：0
> 
> 时间：2012-05-27T18:59:41.550
> 
> 标签：android, image, animation, rotation

我的应用程序中有一个圆形图像，我想让用户通过触摸和向上/向下滑动来旋转它，我还需要获取这个旋转的角度（所以如果你触摸图像的左下角，然后将手指向上移动到右上角，它将旋转适当的角度，并且该角度应该可以用于实时处理）。我应该使用或学习哪些课程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T19:07:48.593

扩展`ImageView`（实际上，您可以使用许多类中的任何一个，但这`ImageView`是一个好的开始）并覆盖`onDraw()`. 使用`OnTouchListener`. 网上有很多教程，你可以从[这里](http://www.mysecretroom.com/www/programming-and-software/android-multi-touch-handling)开始。此类使用该类操作位图`Matrix`，仅实现平移和缩放，但使用矩阵也可以轻松旋转。要回答您如何知道角度的问题，您知道是因为您设置了它！

总之，学习如何扩展`ImageView`、实现`OnTouchListener`和利用`Matrix`类。

# web-services - Axis2 - /Services 没有显示，但 /Services/listServices 有效

> ID：10776481
> 
> 赞同：0
> 
> 时间：2012-05-27T19:00:57.770
> 
> 标签：web-services, configuration, web, axis2

当导航到`http://localhost:8080/MyApp/services/listServices`

我得到了可用服务的列表。

但是，当我去： `http://localhost:8080/MyAPp/services`

相反，我得到一个错误：

```
<Exception>org.apache.axis2.AxisFault: The service cannot be found for the endpoint reference (EPR) /MyApp/services&#xd;
at org.apache.axis2.engine.DispatchPhase.checkPostConditions(DispatchPhase.java:65)&#xd;
at org.apache.axis2.engine.Phase.invoke(Phase.java:333)&#xd;
at org.apache.axis2.engine.AxisEngine.invoke(AxisEngine.java:264)&#xd;
at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:163)&#xd;
at org.apache.axis2.transport.http.util.RESTUtil.invokeAxisEngine(RESTUtil.java:136)&#xd;
at org.apache.axis2.transport.http.util.RESTUtil.processURLRequest(RESTUtil.java:130)&#xd;
at org.apache.axis2.transport.http.AxisServlet$RestRequestProcessor.processURLRequest(AxisServlet.java:829)&#xd;
at org.apache.axis2.transport.http.AxisServlet.doGet(AxisServlet.java:255)&#xd;
at javax.servlet.http.HttpServlet.service(HttpServlet.java:735)&#xd;
at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)&#xd;
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1534)&#xd;
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)&#xd;
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)&#xd;
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)&#xd;
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)&#xd;
at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)&#xd;
at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)&#xd;
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)&#xd;
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:326)&#xd;
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:227)&#xd;
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:170)&#xd;
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:822)&#xd;
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:719)&#xd;
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1013)&#xd;
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)&#xd;
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)&#xd;
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)&#xd;
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)&#xd;
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)&#xd;
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)&#xd;
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)&#xd;
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)&#xd;
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)&#xd;
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)&#xd;
at java.lang.Thread.run(Thread.java:662)&#xd; 
```

我很确定这是一个简单的配置问题，但我似乎无法弄清楚发生了什么（我对这些东西真的很陌生）。

谁能指出我正确的方向？

# php - 我想在 php 中从其他网站加载特定的 div

> ID：10776489
> 
> 赞同：3
> 
> 时间：2012-05-27T19:01:48.300
> 
> 标签：php

我在使用 PHP 加载特定 div 元素并在我的页面上显示时遇到问题。我现在的代码如下：

```
<?php
    $page = file_get_contents("http://www.bbc.co.uk/sport/football/results");
    preg_match('/<div id="results-data" class="fixtures-table full-table-medium">(.*)<\/div>/is', $page, $matches);
    var_dump($matches);
?> 
```

我希望它加载 id="results-data" 并将其显示在我的页面上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T06:10:52.423

您将无法操纵 URL 以仅获取页面的一部分。因此，您要做的是通过您选择的服务器端语言获取页面内容，然后解析 HTML。从那里您可以获取您正在寻找的特定 DIV，然后将其打印到您的屏幕上。您还可以用来删除不需要的内容。

使用 PHP，您可以使用`file_get_contents()`读取要解析的文件，然后使用[DOMDocument](http://us2.php.net/manual/en/class.domdocument.php)解析它并获取所需的 DIV。

这是基本的想法。这是未经测试的，但应该为您指明正确的方向：

```
$page = file_get_contents('http://www.bbc.co.uk/sport/football/results');
$doc = new DOMDocument();
$doc->loadHTML($page);
$divs = $doc->getElementsByTagName('div');
foreach($divs as $div) {
    // Loop through the DIVs looking for one withan id of "content"
    // Then echo out its contents (pardon the pun)
    if ($div->getAttribute('id') === 'content') {
         echo $div->nodeValue;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T19:12:34.117

您应该使用一些 html 解析器。看看 PHPQuery，你可以这样做：

```
require_once('phpQuery/phpQuery.php');
$html = file_get_contents('http://www.bbc.co.uk/sport/football/results');
phpQuery::newDocumentHTML($html);
$resultData = pq('div#results-data');
echo $resultData; 
```

在这里查看：

[http://code.google.com/p/phpquery](http://code.google.com/p/phpquery)

[另请参阅他们的选择器文档。](http://code.google.com/p/phpquery/wiki/Selectors)

# javascript - three.js中是否有容器类型的对象来转换一组孩子？

> ID：10776495
> 
> 赞同：15
> 
> 时间：2012-05-27T19:02:55.323
> 
> 标签：javascript, webgl, three.js

在 three.js 中是否有一个容器或节点对象，可以将多个网格添加为子对象，以便它们可以一起转换？

（一个不可见的容器，允许对组中的所有子对象执行转换？）

谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-27T20:46:27.183

[例子](http://mrdoob.github.com/three.js/examples/webgl_geometry_hierarchy.html)。

```
var group = new THREE.Group();

for ( var i = 0; i < 1000; i ++ ) {

    var mesh = new THREE.Mesh( geometry, material );
    mesh.position.x = Math.random() * 2000 - 1000;
    mesh.position.y = Math.random() * 2000 - 1000;
    mesh.position.z = Math.random() * 2000 - 1000;

    mesh.rotation.x = Math.random() * 360 * ( Math.PI / 180 );
    mesh.rotation.y = Math.random() * 360 * ( Math.PI / 180 );

    group.add( mesh );

}

scene.add( group ); 
```

r69+

# c# - 找到xml节点的更好方法？

> ID：10776496
> 
> 赞同：0
> 
> 时间：2012-05-27T19:02:57.147
> 
> 标签：c#, xml

谁能告诉我是否有更好的方法来搜索 XML 文件并替换值？该节点可以存在于任何地方，因此不能使用 xpath。

我可以通过以下方式实现我想要的，但只是想知道是否有更简单的方法。

```
 XmlDocument doc = new XmlDocument();
 doc.Load("c:\\test.xml");

 XmlNodeList elemList = doc.GetElementsByTagName("NameToChange");

 for (int i=0; i < elemList.Count; i++)
 {   
     elemList[i].InnerText = "replacedText";
 } 
```

TIA

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T19:23:30.967

使用[LINQ to XML](http://msdn.microsoft.com/en-us/library/system.xml.linq.xcontainer.descendantnodes.aspx)和 XElement 等类。就个人而言，我更喜欢它而不是 XPath，因为它直接集成到语言中，而不是依赖于字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T19:10:00.050

实际上，对于 XPath，我认为未指定位置没有问题。只需使用后代方向 [http://www.tizag.com/xmlTutorial/xpathdescendant.php](http://www.tizag.com/xmlTutorial/xpathdescendant.php)

XPath 将是：

```
//NameToChange 
```

但是，如果您问我，您的解决方案似乎还可以。你这样做的方式似乎很容易。

使用一种或另一种解决方案可能导致的主要区别在于难以以您希望选择节点的方式实施任何更改。我对 C# 库不熟悉，但在选择元素时，XPath 几乎可以让您在一行中做任何事情。

# javascript - 什么时候调用没有名称的 JavaScript 函数？是否可以显式调用它

> ID：10776499
> 
> 赞同：-1
> 
> 时间：2012-05-27T19:03:15.897
> 
> 标签：javascript

我是 JavaScript 新手，对语法不太熟悉。

我想知道功能如何

```
{       
    /*
   Data is split into distributions and relations - so append them
    */
    //getURLParameters();
    /*** Read in and parse the Distributome.xml DB ***/
    var xmlhttp=createAjaxRequest();
    var xmlDoc, xmlDoc1;
    xmlhttp.open("GET","distributome-relations.xml",false);
    xmlhttp.send();
    xmlDoc = xmlhttp.responseXML;
    xmlhttp=createAjaxRequest();
    xmlhttp.open("GET","distributome-references.xml",false);
    xmlhttp.send();
    xmlDoc1 = xmlhttp.responseXML;
    var node = xmlDoc.importNode(xmlDoc1.getElementsByTagName("references").item(0), true);
    xmlDoc.getElementsByTagName("distributome").item(0).appendChild(node);
        try{ 
        DistributomeXML_Objects=xmlDoc.documentElement.childNodes; 
    }catch(error){ 
        DistributomeXML_Objects=xmlDoc.childNodes; 
    } 

    traverseXML(false, null, DistributomeXML_Objects, distributome.nodes, distributome.edges, distributome.references, distributomeNodes, referenceNodes);

    xmlhttp=createAjaxRequest();
    xmlhttp.open("GET","Distributome.xml.pref",false);
    xmlhttp.send();
    if (!xmlhttp.responseXML.documentElement && xmlhttp.responseStream)
        xmlhttp.responseXML.load(xmlhttp.responseStream);
    var ontologyOrder = xmlhttp.responseXML;    
    getOntologyOrderArray(ontologyOrder);
            //console.log("firstread: xmlDoc: " xmlDoc);
} 
```

我正在尝试打印 xmlDoc 的内容，以便下次为变量赋值时可以检查内容，这样我就知道我正在创建一个有效的文档。

为澄清起见 - 我正在使用 ProtoVis 并希望在上传包含一些数据的 XML 文件后重绘节点。

我需要解决的第一个问题是创建一个有效的 xmlDoc，以便我可以显示更新的信息，因此我想查看 xmlDoc 内容，以便我可以将其与下一次使用上传的文件为 xmlDoc 分配值时进行比较。

谢谢你的时间！

编辑：我意识到 console.log 缺少逗号。

编辑：我的问题是函数何时执行 - 因为我无法明确调用它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T19:12:06.117

你的语法是错误的。您缺少 a`+`来连接字符串：

```
console.log("firstread: xmlDoc: " + xmlDoc); 
```

# perl - 在 Perl 中拆分 Test::More 的多个测试用例

> ID：10776500
> 
> 赞同：1
> 
> 时间：2012-05-27T19:03:31.317
> 
> 标签：perl, unit-testing, tdd

我有一个 perl 子程序，它应该返回介于两者之间的质`a`数`b`。我对此进行了测试`testSub.t`：

```
 my $arrayref = MyPackage::generatePrimes(1,2);

my @array = @$arrayref;
is ( scalar(@array), 1, "One primes between (1,2)"); 
```

我需要`MyPackage::generatePrimes`使用其他一些输入（`1..3`等`10..15`）重新运行。我可以这样做：

```
 my $arrayref;
my @array;

# Test between (1,2)
$arrayref = MyPackage::generatePrimes(1,2); 
@array = @$arrayref;
is ( scalar(@array), 1, "One primes between (1,2)");

# Test between (1,3)
$arrayref = MyPackage::generatePrimes(1,3);
@array = @$arrayref;
is ( scalar(@array), 2, "Two primes between (1,3)"); 
```

在这种情况下，它工作正常。但是，如果我有稍微复杂一些的例程和测试，这似乎不是很*干净*，因为当我重新使用变量时，测试之间可能存在泄漏。

添加第二个测试的正确（“干净”）方法是什么？是否有一种干净的方法可以做到这一点`testSub.t`（在我再次测试子例程之前由上述测试生成的拆卸`arrayref`和其他变量），还是我只是在 中编写另一个测试`testSub2.t`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T21:12:33.277

不要复制到另一个数组。

~~是(@#{$arrayref}+1,2)~~

```
is($#{$arrayref}+1,2) 
```

或者，将您的分配包装在一个 do 块中。

```
do {
    my @array = @( my_function());
    is( scalar( @array),2 );
} 
```

@array 的分配范围在块内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T20:56:57.097

您可以简单地将测试代码包装在子例程中。

```
#!/usr/bin/perl

use strict ;
use warnings ;
use Test::More ;
use MyPackage ;

#             from, to, primes
my @tests = ( [ 1 , 2 , 2 ] ,
              [ 1 , 3 , 3 ] ) ;
# Just add new tests as needed

plan tests => @tests ;

foreach my $test ( @tests ) {
  do_the_test( $test ) ;
}

sub do_the_test {
  my @args = @{ $_[0] } ;

  my @array = @{ MyPackage::generatePrimes( @args[0..1] ) } ;
  is( scalar @array , $args[2] ,
      sprintf( "Primes between (%d,%d): %d" , @args ) ) ;
} 
```

由于每个测试都在子程序内，因此测试彼此分开。
如果您有更多的参数必须传递给您的子例程，您应该考虑以散列的形式传递参数。

# joomla2.5 - joomla 2.5 模块开发，模块开发和组件开发是一样的吗？

> ID：10776502
> 
> 赞同：2
> 
> 时间：2012-05-27T19:03:45.983
> 
> 标签：joomla2.5

我想知道在 Joomla 2.5 模块开发中是否缺少某种教程，我能找到的只是关于组件开发的教程。这是同一件事吗？

但我也查看了可用的 Joomla 文档，我能找到的只是 Joomla 1.5 开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T21:11:18.790

这取决于上下文，但我自发的回答是不，这不是一回事。

Joomla 模块开发是指模块。具有轻量级功能的小型“小部件”，通常连接到组件。

组件是 Joomla 中最先进的“应用程序”。组件开发通常是指这些应用程序的开发。

还有一些插件以某种方式扩展或更改 Joomla 的功能。

Joomla 扩展开发，或者普通的Joomla 开发，是指以上所有的开发。

# android - LinearLayout 没有拉伸。文件名冲突？

> ID：10776503
> 
> 赞同：0
> 
> 时间：2012-05-27T19:03:47.947
> 
> 标签：android, android-layout

您是否介意指出 LinearLayout 元素不拉伸以匹配父元素的原因。这与我使用的项目配置或类名有关吗？我注意到 xmlfile 的名称可能与此问题有关。我不是在开玩笑——几天前我在不同的 xml 文件名上测试相同的代码，它在 LinearLayout 拉伸方面的工作方式不同。这个名为“clip.xml”

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:clickable="true" >

    <VideoView
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent">

    </LinearLayout>

 </FrameLayout> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T21:02:40.777

我认为您所做的没有任何问题，但是您不会注意到 linearLayout 中的任何内容，因为它不包含任何内容。

为了演示它，请尝试为 linearLayout 设置背景，例如：

```
android:background="#88ff000000" 
```

# java - 通过服务器类从mysql读取到客户端

> ID：10776507
> 
> 赞同：0
> 
> 时间：2012-05-27T19:04:00.380
> 
> 标签：java, mysql, client-server

所以基本上，我想做的是通过我创建的服务器从我的数据库 MySQL 中读取数据。我将数据库中的信息放在一个 ArrayList 中，但客户端无法读取它。当我添加简单的字符串时，它可以工作。但不是当它来自我的数据库时。有什么解决办法吗？

```
public class Server implements Runnable {

    private ServerSocket server;
    private Socket socket;
    private ObjectOutputStream oos = null;

    public Server() {
        try {
            server = new ServerSocket(4444);
            new Thread(this).start();

        } catch (Exception e) {
            System.out.println(e);
        }
    }

    public void run() {

        System.out.println("Server running");
        while (true) {
            try {
                socket = server.accept();
                sayHi();
                System.out.println("Hallå");
            } catch (Exception e) {
            }
        }
    }

    private void sayHi(){
        DataOutputStream dos;
        try {
            dos = new DataOutputStream(socket.getOutputStream());
            oos = new ObjectOutputStream(socket.getOutputStream());
            dos.writeUTF("Hej");
            sendNames();
        } catch (IOException ex) {
            Logger.getLogger(Server.class.getName()).log(Level.SEVERE, null, ex);
        }

    }

        public void sendNames() {
            ArrayList<String> drinkar = new ArrayList<String>();

          Connection con = null;
          String url = "jdbc:mysql://localhost:3306/";
          String db = "drycker";
          String driver = "com.mysql.jdbc.Driver";
          String user = "root";
          String pass = "";

          try{
                Class.forName(driver).newInstance();
                con = DriverManager.getConnection(url+db, user, pass);
              try{
                Statement st = (Statement) con.createStatement();
                ResultSet res = st.executeQuery("SELECT * FROM  drinktable");
              while (res.next()) {
                String s = res.getString("Name");
                for(int i = 0; i<drinkar.size(); i++){
                    drinkar.add(s);
                }
              }
                con.close();
              }
              catch (SQLException s){
                System.out.println("SQL code does not execute.");
              }  
              }
              catch (Exception e){
                e.printStackTrace();
              }

        ArrayList<String> a = new ArrayList<String>();
        a.add("Hejsan");
        a.add("Svejsan");
        try {
            FileOutputStream fos = new FileOutputStream("randomList");
            oos = new ObjectOutputStream(fos);
            oos.writeObject(drinkar);
            oos.flush();
            oos.reset();
            oos.close();
            fos.close();

        } catch (Exception e) {

        }

    }
    public static void main(String[] args) {
        new Server();
    }
}

public class Client implements Runnable {

    private Socket socket;
    private DataInputStream dis;
    private ObjectInputStream ois = null;

    public Client() {
        socket = new Socket();
        InetSocketAddress ipPort = new InetSocketAddress("192.168.0.10", 4444);
        try {
            socket.connect(ipPort);
            dis = new DataInputStream(socket.getInputStream());
            ois = new ObjectInputStream(socket.getInputStream());
        } catch (Exception e) {
        }
        new Thread(this).start();
    }

    public void run() {
        while (true) {
            try {
                String msg = dis.readUTF();
                if (msg.equals("Hej")) {
                    Thread.sleep(50);
                    receiveArrayList();
                }

            } catch (Exception e) {
            }
        }
    }

    public void receiveArrayList() {

        try {
            FileInputStream fis = new FileInputStream("randomList");
            ois = new ObjectInputStream(fis);
            ArrayList<String> a= (ArrayList<String>) (ois.readObject());
            for(int i = 0; i < a.size(); i++){
                System.out.println((String)a.get(i));
            }

            ois.close();
        } catch (ClassNotFoundException ex) {
            System.out.println(ex);
        } catch (IOException ex) {
            System.out.println(ex);
        }
    }

    public static void main(String[] args) {
        new Client();

    }
} 
```

# c++ - QThreads , QObject 和 sleep 函数

> ID：10776509
> 
> 赞同：8
> 
> 时间：2012-05-27T19:04:28.843
> 
> 标签：c++, qt, qthread

我遇到的问题是我决定`QThreads`按照他们应该的方式实现，基于大量文章：
[https ://www.qt.io/blog/2010/06/17/youre-doing-it-wrong](https://www.qt.io/blog/2010/06/17/youre-doing-it-wrong)
[http:// /mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/](http://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/)

手头的问题是，由于算法是单独运行的`QObject`（包装在 中`QThread`）。我怎样才能说出类似`Thread::Sleep`或 .. 之类的东西。有什么想法吗？

软件的小描述。基本上我的应用程序解决了`TSP`（旅行推销员问题）。随着搜索的进行，它将历史记录中的所有状态保存为`frames`..（如视觉框架）。搜索算法将在一个线程上运行。主线程正在处理 GUI。然后是`Mediaplayer`类似的线程，它告诉`Main`线程要在屏幕上显示什么帧。那么睡眠是从哪里来的呢？在 gui 中有一个滑块，用户可以使用它来快进或以正常速度前进。该滑块通过信号槽告诉`Mediaplayer`线程更快或更慢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T19:11:39.717

我们所做的基本上是这样的：（由内存编写，因为我没有在这台计算机上检查我们的代码）

```
class Sleeper : public QThread {
public:
   void sleep(int ms) { QThread::sleep(ms); }
};

void sleep(int ms);

// in a .cpp file:
static Sleeper slp;

void sleep(int ms) {
    slp.sleep(ms);
} 
```

关键是`QThread::sleep`函数导致调用线程休眠，而不是实例所代表的threaf `QThread`。所以只需创建一个通过自定义子类调用它的包装器`QThread`。

不幸的是，QThread 是*一团糟*。该文档告诉您错误地使用它。正如您所发现的，一些博客文章告诉您一种更好的方法，但是您不能调用类似 的函数`sleep`，*它本来就不应该是受保护的线程成员*。

最重要的是，无论您使用哪种方式使用 QThread，它都旨在模拟可能是有史以来最糟糕的线程 API，即 Java 线程 API。与理智的东西相比，比如`boost::thread`，甚至更好，`std::thread`它臃肿、过于复杂并且不必要地难以使用，并且需要大量的样板代码。

这确实是 Qt 团队搞砸的地方之一。重要时刻。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T23:25:13.270

简单的答案：你不应该阻塞异步的、运行到完成的代码——a 中的每个事件处理程序和插槽实现`QObject`都应该尽快完成它的工作并返回。它不应该做任何忙碌的等待或睡眠。有关这条线的更多咆哮，请参阅 Miro Samek 的[我讨厌 RTOSes](http://embeddedgurus.com/state-space/2010/04/i-hate-rtoses/)。

**对于从上面遵循的更好的实现，请参阅[此答案](https://stackoverflow.com/a/32595398/1329652)。**下面的宏诡计最好留给被 C 卡住的可怜的灵魂。

我附上了一个示例，说明如何以正确的方式进行操作，至少从代码功能的角度来看。如果你想要一个真正的实现，看看[Boost 的 stackless coroutines](http://www.boost.org/doc/libs/1_59_0/doc/html/boost_asio/overview/core/coroutine.html)。

*宏诡计是句法糖*——它使技术更可口（Boost 比我在下面做的更好）。无论您是使用宏还是显式写出方法，都取决于您。语法*并不是*所谓的“正确方法”。我[不是唯一一个使用这种预处理器诡计的人](http://blog.think-async.com/2009/08/secret-sauce-revealed.html)。缺少对嵌套函数调用的支持，以及在`QObject`. 该示例仅显示了一个“线程”的代码，并且仅显示了一级异步函数调用。[Stackless Python](http://ftp.python.org/workshops/2000-01/proceedings/papers/tismers/spcpaper.pdf)得出了合乎逻辑的结论。

如果您以异步方式编写它，您将在所有代码中看到这种模式。宏是语法糖，`SLEEP`有助于使代码更易于理解。如果没有 C++ 中的 hacky 宏，就没有真正干净的方法来编写它，其中语法不会过于霸道。即使从 C++11 开始，该语言也没有对 yield 的内置支持。请参阅[为什么没有将 yield 添加到 C++0x？](https://stackoverflow.com/questions/3864410/why-wasnt-yield-added-to-c0x).

这是真正的非阻塞代码，您会看到周期性计时器事件在您“睡着”时触发。请注意，这种协作式多任务处理的开销比操作系统完成的线程/进程切换要低得多。以这种方式编写 16 位 Windows 应用程序代码是有原因的：它的性能相当好，即使在微不足道的硬件上也是如此。

请注意，此代码不需要 a ，实际上也不需要 a *，*尽管如果您将对象移动到高优先级线程，则延迟的传播会更小。`QThread``QThread`

Qt 计时器实现足够聪明，可以减少 Windows 上的计时器滴答周期，如果周期“短”的话。您可以使用我在下面显示的特定于平台的代码，但不建议这样做。在 Qt 5 上，您只需启动一个`Qt::PreciseTimer`计时器。请注意，在 Windows 8 之前的系统上，您需要权衡功耗和稍高的内核开销来换取性能。Windows 8、OS X (xnu) 和现代 Linux 是无滴答的，不会遭受这种性能下降的影响。

我应该承认[使用 ## 和 __LINE__ 创建 C 宏（与定位宏的令牌连接）](https://stackoverflow.com/questions/1597007/creating-c-macro-with-and-line-token-concatenation-with-positioning-macr)中明确的预处理器滥用方向。

与宏类似`SLEEP()`，您也可以实现`GOTO()`宏，以允许您拥有以更易于遵循的阻塞代码样式编写的简单有限状态机，但在幕后是异步的。您可以使用宏来实现在状态进入和退出等时执行的操作，但代码看起来完全像一个直接编码的阻塞式函数`ENTER()`。`LEAVE()`我发现它比没有任何语法糖衣的代码效率高，而且更容易理解。YMMV。最后，您将有一些东西正在通往 UML 状态图的路上，但开销（运行时和代码文本方面）比`QStateMachine-based`实现要少。

下面是输出，星号是周期性的计时器滴答声。

```
doing something
*
*
*
*
*
*
*
*
*
*
slept, a=10
*
*
*
*
*
slept, a=20
*
*
slept, a=30
*
slept, a=40 
```

```
#sleep.pro
QT       += core
QT       -= gui
TARGET = sleep
CONFIG   += console
CONFIG   -= app_bundle
TEMPLATE = app
SOURCES += main.cpp 
```

```
//main.cpp
#ifdef Q_WS_WIN
#include <windows.h>
#endif
#include <cstdio>
#include <QtCore/QTextStream>
#include <QtCore/QObject>
#include <QtCore/QBasicTimer>
#include <QtCore/QTimer>
#include <QtCore/QCoreApplication>

QTextStream out(stdout);

// this order is important
#define TOKENPASTE2(x,y) x ## y
#define TOKENPASTE(x,y) TOKENPASTE2(x,y)
#define SLEEP(ms) sleep(ms, &SLEEPCLASS::TOKENPASTE(fun, __LINE__)); } void TOKENPASTE(fun, __LINE__)() {

class Object : public QObject
{
    Q_OBJECT
    #define SLEEPCLASS Object // used by the SLEEP macro
public:
    Object() {
        QTimer::singleShot(0, this, SLOT(slot1()));
        periodic.start(100);
        connect(&periodic, SIGNAL(timeout()), SLOT(tick()));
    }
protected slots:
    void slot1() {
        a = 10; // use member variables, not locals
        out << "doing something" << endl;
        sleep(1000, &Object::fun1);
    }
    void tick() {
        out << "*" << endl;
    }

protected:
    void fun1() {
        out << "slept, a=" << a << endl;
        a = 20;
        SLEEP(500);
        out << "slept, a=" << a << endl;
        a = 30;
        SLEEP(250);
        out << "slept, a=" << a << endl;
        a = 40;
        SLEEP(100);
        out << "slept, a=" << a << endl;
        qApp->exit();
    }

private:
    int a; // used in place of automatic variables

private:
    void sleep(int ms, void (Object::*target)()) {
        next = target;
        timer.start(ms, this);
    }
    void timerEvent(QTimerEvent * ev)
    {
        if (ev->timerId() == timer.timerId()) {
            timer.stop(); (this->*next)();
        }
    }
    QTimer periodic;
    QBasicTimer timer;
    void (Object::* next)();
};

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    Object o1;
#ifdef Q_WS_WIN
   timeBeginPeriod(1); // timers will be accurate to 1ms
#endif
    return a.exec();
}

#include "main.moc" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-22T10:20:46.740

我同意贾尔夫。我有一个线程充当一种 DBUS 守护进程，需要永远收听消息。有两点要提：

贾夫有

```
void sleep(int ms) { QThread::sleep(ms); } 
```

但这不是毫秒！QThread::sleep() 需要几秒钟。此外，如果要采用这种方法，他还必须包含 QThread 库，因此像这样进行调用可能更容易：

```
QThread::sleep(seconds); 
```

直接在代码中。这样就没有额外的头文件了。我跑了这个，它也像 jalf 解释的那样工作。（使*调用线程*进入睡眠状态。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-18T03:50:41.853

对于 Qt 4.8.0（我正在使用的版本）`QThread::sleep`，`QThread::msleep`和`QThread::usleep`已公开，因此您可以直接调用它们。在早期的 Qt 版本中，它们是`static protected`.

例如`QThread::sleep(5); // sleep for 5 seconds`

# javascript - 显示我的网络应用程序的特定页面时，是否可以禁用移动设备中的自动锁定？

> ID：10776511
> 
> 赞同：2
> 
> 时间：2012-05-27T19:04:29.507
> 
> 标签：javascript, android, ios, mobile, pusher

我正在开发一个移动网络应用程序，在该应用程序中我需要 Pusher 的 javascript 服务器来继续获取触发器，以便页面将继续获取更新。

不幸的是，自动屏幕锁定会暂停该过程。

有没有办法让移动浏览器阻止设备自动锁定？

# html - 拉伸和调整 html 对象的大小以适应？

> ID：10776512
> 
> 赞同：0
> 
> 时间：2012-05-27T19:04:39.107
> 
> 标签：html, css, resize, object-tag

我正在制作一个页面，旨在同时显示 4 个对象。这些对象将流式传输实时视频，并在单击主菜单中的项目时动态分配。我需要的是帮助自动调整页面上所有内容的大小，以便在不滚动的情况下尽可能地拉伸。

![在此处输入图像描述](../Images/86d7649fe09d440612d90e0c3feae83d.png)

黑盒子是页面。顶部的标题框始终具有相同的高度，左侧的框始终具有相同的宽度。然而，绿色框需要自动调整大小以尽可能适合，并且所有 4 个大小相同。除主菜单外，任何地方都不应有滚动条。

最重要的是，当内容框调整大小时，对象也需要调整大小。我在 IE 中看到了“100%”宽度的对象无法正常工作的问题。

我如何构建这个页面来做到这一点？我对 HTML 还是很陌生，不知道如何设置它来调整大小。这是我到目前为止的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>View Cameras</title>
    <script type="text/javascript" language="javascript">

        function pageload() {
            //dynamically load main menu
        }

        function camload(addr) {
            var i = document.getElementById("selPosition").selectedIndex + 1;
            var h = '<OBJECT classid="clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921" codebase="http://downloads.videolan.org/pub/videolan/vlc/latest/win32/axvlc.cab" width="100%" height="100%" id="vlc" events="True">';
                h += '<param name="Src" value="'+addr+'" />';
                h += '<param name="ShowDisplay" value="True" />';
                h += '<param name="AutoLoop" value="False" />';
                h += '<param name="AutoPlay" value="True" />';
                h += '<embed id="vlcEmb"  type="application/x-google-vlc-plugin" version="VideoLAN.VLCPlugin.2" autoplay="yes" loop="no" width="100%" height="100%"';
                h += '  target="' + addr + '" ></embed></OBJECT>';
            document.getElementById('divContent' + i).innerHTML = h;
        }
    </script>
    <style type="text/css">
        body 
        {
            position: relative;
            float: left;
            width: 100%;
            height: 100%;
        }
        h1
        {
            margin: 0px;
            border: 0px;
            padding: 0px;
        }
        div.title
        {
            position: relative;
            float: left;
            width: 100%;
            height: 40px;
            overflow: hidden;
        }
        div.main
        {
            position: relative;
            float: left;
            width: 100%; height: 100%;
        }
        div.contentmain
        {
            position: relative;
            float: left;
            width: 1000px;
            height: 100%;
        }
         div.contentbox
        {
            position: relative;
            float: left;
            width: 50%;
            height: 100%;
        }
    </style>
</head>
<body onload="pageload()">
    <div id="divTitle" class="title">
        <h1>View Cameras</h1>
    </div>
    <div id="divMain" class="main">
        <div style="width: 250px; height: 600px; position: relative; float: left;">
            <div>
                <select id="selPosition" name="selPosition">
                    <option>Top Left</option>
                    <option>Top Right</option>
                    <option>Bottom Left</option>
                    <option>Bottom Right</option>
                </select>
            </div>
            <div>
                <ul>
                    <li><a href="javascript:" onclick="camload('rtsp://192.168.1.1')">Item l 1</a></li>
                    <li><a href="javascript:" onclick="camload('rtsp://192.168.1.2')">Item 2</a></li>
                </ul>
            </div>
        </div>
        <div class="contentmain">
            <div style="position: relative; float: left; width: 100%; height: 50%;">
                <div class="contentbox" id="divContent1">
                    <br />
                </div>
                <div class="contentbox" id="divContent2">
                    <br />
                </div>
            </div>
            <div style="position: relative; float: left; width: 100%; height: 50%;">
                <div class="contentbox" id="divContent3">
                    <br />
                </div>
                <div class="contentbox" id="divContent4">
                    <br />
                </div>
            </div>
        </div>
    </div>
</body>
</html> 
```

**更新**

在尝试了安娜的使用答案后，`display: table;`我得到了更好的展示，但它现在仍然填补了所有空间。该页面还取决于主 div 的高度为 800 px，我需要将其设置为 100% - 由于标题 div，我无法弄清楚该怎么做，并且由于主菜单的宽度存在同样的问题. 那么 IA）如何确保页面在没有滚动条的情况下正确拉伸，以及 B）如何用它们的内容填充每个框？

[PS - 在这个新代码中将有一个图像找不到，现在是 3x3 而不是 2x2]

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>View Cameras</title>
    <script type="text/javascript" language="javascript">
        var selIndex = 0;

        function selBox(index) {
            document.getElementById('b' + selIndex).style.backgroundColor = "White";
            selIndex = index;
            document.getElementById('b' + selIndex).style.backgroundColor = "Blue";
        }

        function pageload() {
            selBox(0);
            camload('');
            selBox(1);
            camload('');
            selBox(2);
            camload('');
            selBox(3);
            camload('');
            selBox(4);
            camload('');
            selBox(5);
            camload('');
            selBox(6);
            camload('');
            selBox(7);
            camload('');
            selBox(8);
            camload('');
            selBox(0);
        }

        function camload(addr) {
            var h = '';
            if (addr == '') {
                h = '<div style="width: 100%; height: 100%; text-align: center; vertical-align: middle;">';
                h += '  <img src="Cam.jpg" alt="No Camera Selected"';
                h += '</div>';
            } else {
                h = '<OBJECT classid="clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921" codebase="http://downloads.videolan.org/pub/videolan/vlc/latest/win32/axvlc.cab" id="player'+selIndex+'" events="True">';
                h += '<param name="Src" value="' + addr + '" />';
                h += '<param name="ShowDisplay" value="True" />';
                h += '<param name="AutoLoop" value="False" />';
                h += '<param name="AutoPlay" value="True" />';
                h += '<embed id="vlcEmb"  type="application/x-google-vlc-plugin" version="VideoLAN.VLCPlugin.2" autoplay="yes" loop="no"';
                h += '  target="' + addr + '" ></embed></OBJECT>';
            }
            document.getElementById('divContent' + selIndex).innerHTML = h;
        }
    </script>
    <style type="text/css">
        body 
        {
            position: absolute;
            padding: 10px;
            width: 100%;
            height: 100%;
        }
        h1
        {
            margin: 0px;
            border: 0px;
            padding: 0px;
        }
        h3
        {
            margin: 0px;
            border: 0px;
            padding: 0px;
            font-size: 14px;
            font-weight: bold;
        }
        div.title
        {
            height: 40px;
            overflow: hidden;
        }
        div.main
        {
            position: relative;
            height: 800px;
        }
        div.contentmain
        {
            height: 100%;
            overflow: hidden;
            position: relative;
        }
        div.side
        {
            width: 250px;
            height: 100%;
            float: left;
            background: lightgrey;
        }
        .matrix
        {
            display: table;
            width: 100%;
            height: 100%;
        }
        .row 
        {
            display: table-row;
            width: 100%;
            height: 33%;
        }
        div.contentbox
        {
            display: table-cell;
            width: 33%;
            height: 33%;
        }
        table.selecttable
        {
            width: 200px;
            height: 100%;
        }
        td.selecttable
        {
            text-align: center;
            cursor: pointer;
        }
    </style>
</head>
<body onload="pageload()">
    <div id="divTitle" class="title">
        <h1>View Cameras</h1>
    </div>
    <div id="divMain" class="main">
        <div class="side">
            <h3>1) Click box to select view:</h3>
            <div style="position: relative; float: left; width: 100%;">
                <table class="selecttable" border="1px">
                    <tr>
                        <td class="selecttable" id="b0" onclick="selBox(0);">0<br /></td>
                        <td class="selecttable" id="b1" onclick="selBox(1);">1<br /></td>
                        <td class="selecttable" id="b2" onclick="selBox(2);">2<br /></td>
                    </tr>
                    <tr>
                        <td class="selecttable" id="b3" onclick="selBox(3);">3<br /></td>
                        <td class="selecttable" id="b4" onclick="selBox(4);">4<br /></td>
                        <td class="selecttable" id="b5" onclick="selBox(5);">5<br /></td>
                    </tr>
                    <tr>
                        <td class="selecttable" id="b6" onclick="selBox(6);">6<br /></td>
                        <td class="selecttable" id="b7" onclick="selBox(7);">7<br /></td>
                        <td class="selecttable" id="b8" onclick="selBox(8);">8<br /></td>
                    </tr>
                </table>
            </div>
            <h3>2) Select cam to show in selected box:</h3>
            <div style="position: relative; float: left; width: 100%;">
                <ul>
                    <li><a href="javascript:" onclick="camload('')">[ NONE ]</a></li>
                    <li><a href="javascript:" onclick="camload('rtsp://192.168.1.2')">Item 1</a></li>
                    <li><a href="javascript:" onclick="camload('rtsp://192.168.1.2')">Item 2</a></li>
                </ul>
            </div>
        </div>
        <div class="contentmain">
            <div class="matrix">
                <div class="row">
                    <div class="contentbox" id="divContent0"></div>
                    <div class="contentbox" id="divContent1"></div>
                    <div class="contentbox" id="divContent2"></div>
                </div>
                <div class="row">
                    <div class="contentbox" id="divContent3"></div>
                    <div class="contentbox" id="divContent4"></div>
                    <div class="contentbox" id="divContent5"></div>
                </div>
                <div class="row">
                    <div class="contentbox" id="divContent6"></div>
                    <div class="contentbox" id="divContent7"></div>
                    <div class="contentbox" id="divContent8"></div>
                </div>
            </div>
        </div>
    </div>
</body>
</html> 
```

这就是它现在的样子，我在它需要移动的地方画了线......

![在此处输入图像描述](../Images/e5d5f9055c19ccf6268c57bb6c5af264.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T19:41:42.720

在绿色框上使用`position: absolute;`，直接放入 contentmain。然后像这样定位它们：

```
#divContent1 {top:0;left:0;bottom:50%;right:50%}
#divContent2 {top:50%;left:0;bottom:100%;right:50%}
#divContent3 {top:0;left:50%;bottom:50%;right:100%}
#divContent4 {top:50%;left:50%;bottom:100%;right:100%} 
```

此外，不要`float:left;`在具有`width: 100%;`. 更好的是，甚至不要`width:100%;`在块元素上设置 - 块元素自然会扩展以水平填充其父元素。不要`position: relative`一无所有。将它们保留为默认值 ( `position: static`)，仅`position: relative`在需要时设置。就像您想要绝对定位的某些元素的父级一样 - 您可能想阅读此[http://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/](http://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/)

或其他版本：使用`display: table;`- 演示[http://dabblet.com/gist/2815688](http://dabblet.com/gist/2815688)

# c# - 如何更改gridview分页号码大小？

> ID：10776515
> 
> 赞同：5
> 
> 时间：2012-05-27T19:04:56.537
> 
> 标签：c#, asp.net

我正在使用gridview 和sqldatasource。在 mygridview 中启用了分页。

我想知道是否有任何方法可以更改分页号码的大小。（gridview下方的数字要大一些）

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T19:20:33.040

在**GridView**标记内，您可以包含用于**设置 Pager 样式的**特殊标记：

```
 <PagerSettings FirstPageText="First Page" LastPageText="Last Page" Mode="NumericFirstLast" Position="TopAndBottom" />  
    <PagerStyle BackColor="Yellow" ForeColor="Red" /> 
```

这是一篇[文章](http://www.dotnetcurry.com/ShowArticle.aspx?ID=244)，描述了一些选项，并展示了它们的外观。如您所见，您可以直接在`PagerStyle`标签中设置字体，也可以应用这样的 CSS 样式：

```
<style type="text/css">   
          .cssPager span { background-color:#4f6b72; font-size:18px;}    
    </style>

<PagerStyle CssClass="cssPager" /> 
```

# titanium - 围绕地图上的多个点（注释）居中地图 - Titanium mobile

> ID：10776516
> 
> 赞同：4
> 
> 时间：2012-05-27T19:04:58.363
> 
> 标签：titanium, region

我在地图上有多个注释 - 尽管用户可能需要滚动才能看到它们。我希望用户能够选择一个按钮以将它们全部放在地图上 - 无需滚动/手动调整大小。

我已经确定了最小值。和最大。我想在地图上显示的点的纬度和经度（例如 minLat、maxLat、minLong、maxLong）。

但是，我正在努力使用特定公式来获取要传递给 mapview.setLocation 的经度和纬度属性。关于我可以使用什么公式的任何指示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T13:24:57.620

我为相同的要求制作了一个功能。您可以测试并让我知道它是否给出了一些错误：

```
function setMarkersWithCenter(map,latiarray,longiarray)
{
    if(latiarray.length != longiarray.length)
        return;
    var total_locations = latiarray.length;
    var minLongi = null, minLati = null, maxLongi = null, maxLati = null;
    var totalLongi = 0.0, totalLati = 0.0;

    for(var i = 0; i < total_locations; i++) 
    {
        if(minLati == null || minLati > latiarray[i]) {
            minLati = latiarray[i];
        }
        if(minLongi == null || minLongi > longiarray[i]) {
            minLongi = longiarray[i];
        }
        if(maxLati == null || maxLati < latiarray[i]) {
            maxLati = latiarray[i];
        }
        if(maxLongi == null || maxLongi < longiarray[i]) {
            maxLongi = longiarray[i];
        }
    }

    var ltDiff = maxLati-minLati;
    var lgDiff = maxLongi-minLongi;
    var delta = ltDiff>lgDiff ? ltDiff : lgDiff;
    if(total_locations>0 && delta>0)
    {
        map.setLocation({
            animate : true,
            latitude:((maxLati+minLati)/2),
            longitude:((maxLongi+minLongi)/2),
            latitudeDelta:delta,
            longitudeDelta:delta,
        }); 
    }

} 
```

希望能帮助到你。

# mysql - 如何对查询进行计数和分组以获得正确的结果？

> ID：10776519
> 
> 赞同：3
> 
> 时间：2012-05-27T19:05:24.200
> 
> 标签：mysql, sql, count, group-by

我有问题，请查看我的数据库：

```
-------------------
| id | article_id |
-------------------
| 1  |      1     |
| 2  |      1     |
| 3  |      1     |
| 4  |      2     |
| 5  |      2     |
| 6  |      3     |
| 7  |      3     |
| 8  |      3     |
| 9  |      3     |
| 10 |      3     | 
```

我想收到这样的东西（按票排序，从最大到最小）：

```
---------------------------
| id | article_id | votes |
---------------------------
| 1  |      3     |    5  |
| 2  |      1     |    3  |
| 3  |      2     |    2  | 
```

你能帮我写正确的sql查询吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T19:10:52.507

```
SET @currentRow = 0;
SELECT @currentRow := @currentRow + 1 AS id, t.article_id, t.c AS `votes`
FROM (
    SELECT article_id, count(*) as `c`
    FROM table_votes
    GROUP BY article_id
    ) t
ORDER BY t.c DESC 
```

请注意，您不能在这种情况下选择这样的 id 列，并且您的“预期结果”不正确。我试图最大限度地适应它。

干杯

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T19:13:00.727

```
SELECT article_id, COUNT(article_id) AS votes
FROM votes_table
GROUP BY article_id
ORDER BY votes DESC; 
```

# django - 如何在验证 Django 中的父字段的子类中添加自定义验证器

> ID：10776522
> 
> 赞同：2
> 
> 时间：2012-05-27T19:06:39.703
> 
> 标签：django

在 Django 中，我有一个包含一些公共字段的父抽象类，以及一些添加更多字段的子类。在其中一些子类中，我想添加自定义验证器来验证父类上的字段。

```
class Template(models.Model):
  text = models.CharField(max_length=200)

class GlobalTemplate(Template):
  function = models.ManyToManyField(Function, null=True, blank=True) 
```

我可以像这样轻松地将它们添加到父类的字段中：

```
class Template(models.Model):
  text = models.CharField(max_length=200, validators=[validate_custom]) 
```

但在这种情况下，我想将验证器添加到我的子类 GlobalTemplate，但将其附加到文本字段。

这在 Django 中可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T21:00:50.993

字段验证器存储在 中`field.validators`，它是一个列表，因此您基本上需要在此处附加验证器。

要访问字段实例，您必须对`_meta`对象的属性进行一些操作（请注意，您不*应该*使用此属性，因此当您更新 django 时，您必须检查它是否具有没有改变）。你可以这样做：

```
def get_fields_dict(self):
    return dict((field.name, field) for field in self._meta.fields)

def __init__(self, *args, **kwargs):
    super(GlobalTeplate, self).__init__(*args, **kwargs)
    text_field = self.get_fields_dict()['text']
    text_field.validators.append(validate_custom) 
```

# c# - 使用两个表中的行创建第三个表

> ID：10776526
> 
> 赞同：0
> 
> 时间：2012-05-27T19:08:19.123
> 
> 标签：c#, sql-server, entity-framework-4, code-first

这是我的问题。我会尽量让我的问题尽可能简单。所以，我在数据库中有 2 个类和两个表，它们彼此没有连接，让我们将它们命名为 A 类和 B 类，看起来像：

```
public class User
{
[Key]
public int userID{ get; set; }

public User(string aName, string aPhone, string aEmail)
{
    Name = aName;
    Email= aEmail;
    Phone= aPhone;
}

public string Name { get; set; }
public string Email{ get; set; }
public string Phone{ get; set; }
}

public class Work
{
[Key]
public int workID{ get; set; }

public Work(string aWorkName, string aAddress, string sPosition)
{   
    WorkName= aWorkName;
    Address= aAddress;
    Position= aPosition;
}
public string WorkName{ get; set; }
public string Address{ get; set; }
public string Position{ get; set; }

} 
```

我现在要做的是在数据库中创建第三个类和第三个表。我应该能够用前两个表中的信息填充第三个表中的列。例如，它的列应该是名称电话电子邮件工作名称地址位置。所以我取 NameID 和 workID，并根据这些主键我应该用所有信息填充第三个表。应该如何完成？我认为应该做一些事情像这样：

```
public class CombinedTable
{
[Key]
public int cID{ get; set; }
public User user{ get; set; }
public Work work{ get; set; }
} 
```

让我们在主函数中说一些这样的查询：

```
 var UserResult = from p in db.User
 where p.UserId.Equals(userID)
 select p;
 var WorkResult= from p in db.Work
 where p.WorkID.Equals(workID)
 select p;

var combinedInfo= new CombinedTable()
        {
            User = UserResult,
            Work= WorkResult
        };
        db.CombinedTable.Add(combinedInfo);
        int savedChanges = db.SaveChanges(); 
```

但我错过了一些东西。我希望你明白。我首先使用实体​​框架和代码。非常感谢任何建议。谢谢。PS：再澄清一次。如果我使用 workID=5 和 UserID=1，在第三个表中，应该从 ID 为 1 的用户的信息中创建新行并使用 ID 5。你明白了吗？我希望有人能得到它。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T19:17:11.323

假设您在用户和工作实体之间有一对多的关系（一个用户可以有很多工作）

```
public class User
{
  public int UserID { set;get;}
  public string Name { set;get;}
  public string Email{ set;get;}
  public virtual IEnumerable<Work> Works { set;get;}
}

public class Work
{
  public int WorkID { set;get;}
  public string WorkName { set;get;}
  public string Hours { set;get;}
  public string Location { set;get;}
} 
```

这将创建具有一对多关系的表，您应该能够像这样轻松查询它

```
int userId=34;
var thatUser=dbContext.Users.Find(userId);
var works=thatUser.Works; 
```

**编辑：**如果您想要第三张表，请为此创建一个类

```
public class UserWork
{
  public int UserWorkID { set;get;}
  public int UserID { set;get}
  public int WorkID { set;get;} 
  public virtual User User { set;get;}
  public virtual Work Work  {set;get;}
} 
```

# php - 正则表达式分离

> ID：10776527
> 
> 赞同：-5
> 
> 时间：2012-05-27T19:08:19.983
> 
> 标签：php, regex, string

我正在尝试制作一个仅选择两个字符串中的第一个字符串的正则表达式。

**IE：**

```
hello:howareyou 
```

我希望正则表达式只返回`hello`。

同样，我希望另一个人返回 howareyou，但是一旦我理解了第一部分，我应该能够弄清楚这一点。

谢谢！

* * *

## 编辑：

到目前为止，我已经尝试过`(?:[^"<:]|"[^"]*"|<[^>]*)*` ，但这只是将两者分开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T19:16:48.673

您可以简单地使用`explode(':', $str)`，但如果您坚持使用正则表达式，您也可以这样做，`preg_match('/(.+?):(.+)/', $str, $matches)`这将返回第一部分 in`$matches[1]`和第二部分 in `$matches[2]`。

# ruby - 对此感到困惑，除非在rubykoans中声明

> ID：10776534
> 
> 赞同：2
> 
> 时间：2012-05-27T19:09:32.680
> 
> 标签：ruby

第 4 行和第 5 行让我很伤心：

```
1  def test_break_statement
2     i = 1
3     result = 1
4     while true
5       break unless i <= 10
6       result = result * i
7       i += 1
8     end
9     assert_equal 3628800, result
10  end 
```

我不确定`while true`声明中需要保持真实的内容，但我相信它是遵循它的代码。这会导致进一步的混乱，因为我正在阅读以下行：

`break unless i <= 10`as break if`i`不小于或等于 10。这段代码经历了什么过程，即 while 和 break 语句如何相互作用。我想我快到了，但不能把这个过程放在我的脑海里。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T19:12:48.173

当 i 大于 10 时，代码将跳出无休止的 while 循环。但我不确定为什么没有在 while 语句中检查条件。

**编辑：**如果我阅读了方法名称，我会理解为什么不直接使用 while 语句检查条件。该方法的目的是测试 break 语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T19:12:29.780

`while true`是一个无限循环。`break`，当执行时，将立即退出它，继续它之后的第一行（`assert_equal...`）。

`while`在这种特定情况下（和之间没有任何干预`break unless`），它等效于：

```
 while i <= 10
   result = result * i
   i += 1
 end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T19:27:20.103

`while`语句测试单词之后的任何内容，`while.` 如果它们后面的表达式是`true`它们执行循环内的代码。如果表达式为假，则它们不会。

因此，正如其他张贴者所指出的那样，`while true`将始终在循环内执行代码。`break`幸运的是，您的代码在循环中有一条语句。如果没有，循环将永远运行，您必须终止运行程序的进程。

在您的代码示例中，`break`关键字后面跟着它，`unless`这意味着它将`break`循环`unless`后面的表达式为真。当 i 大于 10 时，您的代码将跳出循环。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T19:13:41.107

*   `while true`这是无限循环。
*   `break unless i <= 10`相同，如果小于或等于，`break if i > 10`它将打破该循环`i``10`

# javascript - 如何识别jQuery中箭头键的长按

> ID：10776538
> 
> 赞同：1
> 
> 时间：2012-05-27T19:10:02.133
> 
> 标签：javascript, jquery, keypress, keydown

我对自己`keypress`和`keydown`. 我倾向于使用`keypress`它，因为它记录了一个事件，即使键被重复，即键被长按。但问题是`keypress`只在 Firefox 中记录特殊键，例如箭头键。如果我想跨浏览器这样做，那么我必须使用`keydown`，但是长按将被记录为单个事件。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T19:17:59.557

```
var pressed = null;
$(element).on('keydown', function(event) {
    pressed = +new Date();
    // do whatever else you need upon key down
});
$(element).on('keyup', function(event) {
    var duration = +new Date() - pressed;
    pressed = null;
    // do whatever you need to do based on the duration of the press
}); 
```

我把它作为一个练习留给你，以解决对多个同时按下的键的支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T19:27:52.583

您可以使用两个事件，如下所示：

```
var timer=false,
    pressedTime = 1000; //one second

$('input').on({
    keydown: function(e) {
        var charCode = (e.which) ? e.which : event.keyCode, keyP;
        if (charCode===37) keyP = 'left';
        if (charCode===38) keyP = 'up';
        if (charCode===39) keyP = 'right';
        if (charCode===40) keyP = 'down';        
        if (!timer) timer = setTimeout(function() {
           clearTimeout(timer);
           timer=false;
           alert(keyP+' arrow key held down for 1 second');
        }, pressedTime);
    },
    keyup: function() {
        clearTimeout(timer);
        timer=false;
    }
});​ 
```

[小提琴](http://jsfiddle.net/adeneo/B2rmk/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T19:13:50.290

有一个名为[jQuery Responsiveness](http://programmingdrunk.com/current-projects/jquery.responsiveness/)的插件可能有助于实现这一点。

# mysql - 比较 MySQL 中的日期忽略 DateTime 字段的时间部分

> ID：10776539
> 
> 赞同：50
> 
> 时间：2012-05-27T19:10:22.787
> 
> 标签：mysql, date, datetime, date-comparison

我需要比较 MySQL 中的日期，忽略`DateTime`列中的时间部分。我已经尝试了以下 SQL。

```
SELECT * FROM order_table where order_date=date_format('2012-05-03', '%Y-%m-%d'); 
```

即使`2012-05-03 10:16:46`MySQL 表中有日期，它也不会检索任何行。`DateTime`在比较 MySQL 中的日期时，如何忽略字段中的时间部分？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-05-27T19:12:36.270

您可以使用以下[`DATE`](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_date)功能：

```
SELECT col1, col2, ..., coln
FROM order_table
WHERE date(order_date) = '2012-05-03' 
```

但这更有效，如果您的表很大并且您有一个索引`order date`：

```
SELECT col1, col2, ..., coln
FROM order_table
WHERE order_date >= '2012-05-03'
AND order_date < '2012-05-04' 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-27T19:17:10.520

如果你想传递一个日期，那么你可以尝试这样的事情：

```
where YEAR(order_date)='2012' AND MONTH(order_date)='05' AND DAY(order_date)='03' 
```

您可以查看[此](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)以获取更多功能。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-27T19:51:09.807

@Mark 有一个很好的方法，但要小心，在这种情况下，你总是必须在第二天计算和找到。如果您想避免这种情况并且仍然忽略时间，您可以执行以下操作：

```
WHERE order_date >= '2012-05-27 00:00:00' AND order_date <= '2012-05-27 23:59:59' 
```

我希望这是有道理的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-27T19:13:10.353

```
SELECT * FROM order_table WHERE date(order_date) = '2012-05-03'; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-27T19:20:16.260

也许，您可以使用类似[`date()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date). 但是在这种情况下速度可以降低，因为索引不能被使用。所以，我建议使用

```
SELECT * FROM order_table 
WHERE order_date between('2012-05-03 0:0:0' and '2012-05-03 23:59:59') 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-06-22T12:15:08.283

这有点老了....但正确的答案也是在 order_date 列中使用 date_format，如下所示：

```
SELECT * FROM order_table where date_format(order_date, '%Y-%m-%d')='2012-05-03'; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-21T16:54:30.907

就我而言，我有，`DATE_FORMAT`并且`CONVERT_TZ`

唯一对我有用的是这个

```
DATE_FORMAT(CONVERT_TZ(`order_item`.created, '+0:00', '+2:00'), '%d/%m/%Y %H:%i') 

BETWEEN 
('12/02/2018 01:42') 
AND 
('12/02/2018 10:51') 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-21T11:12:49.367

在 MySQL 中比较日期时，可以使用以下其中一项：

```
DATEDIFF() Subtract two dates
TIMEDIFF() Subtract time
TIMESTAMPDIFF() Subtract an interval from a datetime expression
PERIOD_DIFF()   Return the number of months between periods 
```

有关日期函数的更多信息 MySQL[文档](http://dev.mysql.com/doc/refman/5.7/en/date-and-time-functions.html)。

# google-apps-script - 库中的未知宏

> ID：10776543
> 
> 赞同：-1
> 
> 时间：2012-05-27T19:10:59.267
> 
> 标签：google-apps-script

我正在尝试制作一个库，到目前为止进展顺利，但是在添加了一些功能之后它就变糟了。

当我从编辑器中运行脚本时，它会在脚本中运行。但是当我尝试测试它时，脚本无法识别服务器处理程序，并给出错误：未知宏 handler_function_name

我检查了，处理程序中的所有名称都对应于函数的名称。我读到有些人有问题，因为代码在不同的文件中，将所有代码移动到同一个文件中，问题仍然存在。

对于所有处理程序来说，它的行为并非如此......

这可能是什么原因？

编辑：

该应用程序在响应“点击”期间创建额外的面板。这些面板上元素的处理程序是应用程序无法“找到”的宏（即处理程序函数）。

如何解决？（除了将所有面板放在原始面板中然后更改可见性的解决方案之外，这在处理程序中有效，但会引发其他问题）

所以在这里放一些代码，这是非常非常简单的代码......

```
function notWorkingGUI(){

  var app=UiApp.createApplication();
  var appPanel=app.createVerticalPanel().setId("appPanel");
  var handler1=app.createServerHandler("handlerFunction1").addCallbackElement(appPanel);
  var firstButton=app.createButton("Button 1", handler1);

  appPanel.add(firstButton);
  app.add(appPanel);

  SpreadsheetApp.getActive().show(app);

}

function handlerFunction1(e){

  var app=UiApp.getActiveApplication();

  var appPanel2=app.createVerticalPanel().setId("appPanel2").setStyleAttribute("zIndex", 0).setStyleAttribute("position", "fixed");
  var handler2=app.createServerHandler("handlerFunction2").addCallbackElement(appPanel2);
  var secondButton=app.createButton("Button 2", handler2);
  var label=app.createLabel("This should get visible after the click").setId("label").setVisible(false);

  appPanel2.add(secondButton).add(label);
  app.add(appPanel2);

  return app;

}

function handlerFunction2(e){

  var app=UiApp.getActiveApplication();

  app.getElementById("label").setVisible(true);

  return app;

} 
```

当从编写它的编辑器执行时，这将按预期工作，即它将显示 firstButton 然后是 secondButton 并最终显示标签，但是如果它将作为库发布并从其他脚本调用它只会识别 functionHandler1，即显示 firstButton, secondButton 但在单击 secondButton 后会看到一条错误消息。

但是，如果脚本是这样编写的：

```
function workingGUI(){

  //previous first part
  var app=UiApp.createApplication();
  var appPanel=app.createVerticalPanel().setId("appPanel");
  var handler1=app.createServerHandler("handlerFunction1a").addCallbackElement(appPanel);
  var firstButton=app.createButton("Button 1", handler1);

  //previous second part
  var appPanel2=app.createVerticalPanel().setId("appPanel2").setStyleAttribute("zIndex", 0).setStyleAttribute("position", "fixed");
  var handler2=app.createServerHandler("handlerFunction2a").addCallbackElement(appPanel2);
  var secondButton=app.createButton("Button 2", handler2).setId("button2");

  appPanel.add(firstButton);
  app.add(appPanel);

  SpreadsheetApp.getActive().show(app);

}

function handlerFunction1a(e){

  var app=UiApp.getActiveApplication();

  var label=app.createLabel("This should get visible after the click").setId("label").setVisible(false);

  app.getElementById("appPanel2").add(app.getElementById("button2")).add(label);
  app.add(app.getElementById("appPanel2"));

  return app;

}

function handlerFunction2a(e){

  var app=UiApp.getActiveApplication();

  app.getElementById("label").setVisible(true);

  return app;

} 
```

请注意，所有处理程序都必须在主函数中定义，这意味着使用这些处理程序的所有元素和所有回调元素也必须在此处定义。然后它甚至可以作为一个库工作，但是由于某种原因，即使对于这样一个简单的示例，这也会使脚本慢得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:03:54.430

问题在这里：

[http://code.google.com/p/google-apps-script-issues/issues/detail?id=1346](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1346)

它正在调用本地代码而不是库代码。

我想知道如果在本地代码中添加一个存根函数是否仍然很慢？

IE

```
function runthis() {
  library.createGUI();
}
function myevent() {
 library.myevent();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T18:28:46.353

我解决了这个问题，它使脚本变慢了一点，但如果你在原始函数中定义所有处理程序（这意味着所有 UI 元素），它将起作用。

# php - Memcache：在非对象上调用成员函数 get()

> ID：10776545
> 
> 赞同：0
> 
> 时间：2012-05-27T19:11:21.493
> 
> 标签：php, object, memcached

[我按照以下步骤](http://kb.liquidweb.com/install-memcached-on-centos-5/)在 CentOS 中安装了 memcached

这是 PHP 错误：

```
Fatal error: Call to a member function get() on a non-object in /home/piscolab/public_html/keepyourlinks.com/includes/funciones.php on line 22 
```

代码：

```
/* MEMCACHE */
$memcache = new Memcache();
$memcache->pconnect('localhost',11211);

/* checks in memcache, if not: query and save to memcache */
function cache_query($sql,$nombre,$tiempo = -1){
    if($tiempo == -1) $tiempo = time() + 24*60*60*365;
    $consulta = $memcache->get($nombre);  /* THIS is the line */
    if ( $consulta === false) {
        $consulta = mysql_query($sql);
        $memcache->set($nombre,$consulta,0,$tiempo);
        $_SESSION['tQ']++;
    }else $_SESSION['tQC']++;
    return $consulta;
} 
```

我这样调用函数：

```
$result = cache_query('select * from users','all_users'); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T19:13:37.903

该`$memcache`对象在此处[超出范围](http://php.net/manual/en/language.variables.scope.php)。

将以下行添加到函数的顶部：

```
global $memcache; 
```

或者将其作为参数传递：

```
function cache_query($sql, $nombre, $memcache, $tiempo = -1) {
    ...
}
$result = cache_query('select * from users','all_users', $memcache); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T19:13:39.377

你需要做：

```
global $memcache; 
```

在你的功能中。

有关变量范围的信息，请参阅此：

[http://php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

# .net - 使用 WiX 中的在线设置安装 .NET 框架

> ID：10776548
> 
> 赞同：2
> 
> 时间：2012-05-27T19:11:37.733
> 
> 标签：.net, frameworks, wix, bootstrapper

**更新：事实证明这确实有效，但默认情况下安装文件只是被复制到输出目录。如果安装程序在没有它们存在的情况下运行，它只会根据需要下载文件。**

我一直在阅读文档并遵循如何在 WiX 中安装 .NET 框架的指南，但是由于包含框架安装文件（在 100mb 和 200mb 之间），构建的输出非常大。

由于我想为最终用户避免如此大的下载量，是否可以让 WiX 使用在线安装程序（http://www.microsoft.com/en-us/download/details.aspx?id=31）作为反对让已经拥有框架的用户不得不下载大型设置？

目前我的标记与文档中的标记几乎完全相同，但供可能需要查看的任何人参考，如下所示：

```
 <ItemGroup>
    <BootstrapperFile Include="Microsoft.Net.Framework.3.5">
      <ProductName>.NET Framework 3.5</ProductName>
    </BootstrapperFile>
    <BootstrapperFile Include="Microsoft.Windows.Installer.3.1">
      <ProductName>Windows Installer 3.1</ProductName>
    </BootstrapperFile>
  </ItemGroup>
  <Target Name="AfterBuild">
    <GenerateBootstrapper 
      ApplicationFile="$(TargetFileName)" 
      ApplicationName="Application Name" 
      BootstrapperItems="@(BootstrapperFile)" 
      ComponentsLocation="HomeSite" 
      CopyComponents="True" 
      OutputPath="$(OutputPath)" 
      Path="C:\Program Files (x86)\Microsoft SDKs\Windows\v6.0A\Bootstrapper\" />
  </Target> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T21:14:34.087

事实证明这确实有效，但默认情况下安装文件只是被复制到输出目录。如果安装程序在没有它们存在的情况下运行，它只会根据需要下载文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:49:11.873

正如 Sunil 所提到的，也许最简单的方法是使用引导程序。一旦你的 WiX 引导程序开始工作，你需要做的就是添加 .Net 4.0 作为先决条件。

a) 将文件 WixNetFxExtension.dll 的引用添加到您的 Bootstrapper / 托管 Bootstrapper 应用程序项目中

b）将以下内容添加为链中的第一项..

```
<PackageGroupRef Id="NetFx40Web"/> 
```

就是这样！

如果需要，上面会通过 Internet 下载 .net 4。更多信息和选项在这里：[wixnetfxextension 文档](http://wix.sourceforge.net/manual-wix3/wixnetfxextension.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T19:42:11.510

有很多引导程序可用于绑定设置。您可以将 .net 框架的 Web 设置与您的软件绑定，然后如果未安装先决条件，该工具将安装 .net 框架。

我也有同样的要求，我选择了[dotNetInstaller](http://dblock.github.com/dotnetinstaller/)。这是一个免费的工具。

# ant - 为什么 ant 不能正确运行我的单元测试？

> ID：10776561
> 
> 赞同：0
> 
> 时间：2012-05-27T19:13:05.253
> 
> 标签：ant, junit

我试图弄清楚如何使用 ant 建立一个项目。出于某种原因，我无法运行 junit 测试。我使用 ant 建立了一个简单的虚拟项目来尝试解决这个问题。它所拥有的只是一个应该可以轻松通过的单元测试。

我的项目结构是这样的。

```
.
|-- build.xml
|-- src
`-- test
    |-- foo
    |   `-- MainTest.java
    `-- junit-4.10.jar 
```

`MainTest.java`看起来像这样。

```
package foo;

import org.junit.*;
import static org.junit.Assert.*;

public class MainTest {
    @Test
    public void passes() {
        System.out.println("It works!");
    }
} 
```

这里是 build.xml。

```
<project name="Nes" default="build" basedir=".">
    <target name="build-test">
        <javac srcdir="test">
            <classpath>
                <pathelement location="test/junit-4.10.jar" />
            </classpath>
        </javac>
    </target>

    <target name="test" depends="build-test">
        <junit>
            <classpath>
                <pathelement location="test/junit-4.10.jar" />
            </classpath>
            <batchtest>
                <fileset dir="test" includes="foo/MainTest.class" />
            </batchtest>
        </junit>
    </target>
</project> 
```

这是我从运行中得到的输出`ant test`。

```
Buildfile: /home/hayden/dev/nes/build.xml

build-test:
    [javac] /home/hayden/dev/nes/build.xml:4: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds

test:
    [junit] Test foo.MainTest FAILED

BUILD SUCCESSFUL
Total time: 0 seconds 
```

我正在运行 ant 1.8.2 和 Java 6。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T19:26:34.400

您需要添加实际`.class`文件的路径，以便 JUnit 可以实际运行测试。由于您完全限定了测试类名称，因此您需要包含包含`foo`包的目录：

```
<target name="test" depends="build-test">
    <junit>
        <classpath>
            <pathelement location="test/junit-4.10.jar" />
            <pathelement location="test" />
        </classpath> 
```

但我建议您将`javac`任务更改为不将构建工件（即`.class`文件）输出到与源文件相同的目录中。创建一个顶级“构建”目录并将所有构建输出放在那里。

您还应该通过向任务添加`includeantruntime`属性来消除第一个警告`javac`：

```
 <javac srcdir="test" includeantruntime="false"> 
```

# php - 显示最新推文的位置，然后在网页上推文

> ID：10776569
> 
> 赞同：0
> 
> 时间：2012-05-27T19:13:43.870
> 
> 标签：php, javascript, twitter, geolocation

我希望能够在网页上显示 Twitter 用户在 X 位置“最后一次出现”，无论他们最新的推文是什么，“他说的地方”。这适用于启用了地理位置的用户，我这样做是为了在旅途中跟踪他们。最简单的方法是什么？它看起来像这样：

[user] 最后一次出现在 [latest tweet location (city/state, not geopoints)] 他说： [latest tweet]

任何帮助/建议表示赞赏。

更新：

我试过这个添加到页面：

```
<script type="text/javascript" src="http://mywebsite.com/blogger.js"></script>
<script type="text/javascript" src="http://twitter.com/statuses/user_timeline/username.json?callback=twitterCallback2&count=1"></script>
<script type="text/javascript" src="http://twitter.com/statuses/user_timeline/username.json?callback=twitterLocation&count=1"></script> 
```

然后修改 twitter 的 blogger.js 以在顶部添加：

```
function twitterLocation(twitters) {
  var statusHTML = [];
  for (var i=0; i<twitters.length; i++){
    var place= twitters[i].place.full_name;
    statusHTML.push('+place+');
  }
  document.getElementById('location').innerHTML = statusHTML.join('');
} 
```

最后，放一个

```
<span id="location></span> 
```

和

```
<div id="twitter_update_list"></div> 
```

在 html 中也是如此。

这条推文还可以，但是放在“位置”跨度中的唯一内容就是文本“+place”

我有可能在这里走上正确的道路吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T19:20:05.460

您应该在这里谷歌寻找答案，但我只会使用 REST API： [https ://dev.twitter.com/docs/api/1/get/statuses/user_timeline](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)

最后一个位置将在“geo”参数中。

然后使用 Google Reverse Geocoding API 提取位置字符串： [https ://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)

# assembly - 显示IP寄存器的内容

> ID：10776571
> 
> 赞同：-1
> 
> 时间：2012-05-27T19:13:54.320
> 
> 标签：assembly, x86, a86

我需要打印 IP 寄存器的内容。(a86)。

我有中断处理程序：

```
int11:
call ipp
iret 
```

和程序ipp：

```
ipp:
pop dx
print dx
ret 
```

和功能打印：

```
print macro
push ax,dx
lea dx, #1
mov ah,9
int 021 
pop dx,ax 
```

但它打印了很多奇怪的符号:)

请告诉我有什么问题。

PS我的汇编知识很差。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T19:18:41.537

您必须将二进制值转换为文本。它必须是“$”结尾的字符串。然后将该字符串的地址加载到 dx。

您还必须确保 ds 保持正确的值。

看： http: [//www.delorie.com/djgpp/doc/rbinter/id/73/25.html](http://www.delorie.com/djgpp/doc/rbinter/id/73/25.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:16:25.803

有多个问题。

这里

```
ipp:
pop dx
print dx
ret 
```

您使用 . 从堆栈中删除返回地址`pop dx`。你认为`ret`你偷了它的返回地址后会返回哪里？为什么不把地址放回堆栈呢？

同样，`pop dx`您也会破坏`dx`被 ISR 中断的程序的寄存器值。为什么不在`dx`ISR 中保存和恢复？

还有一个...我不知道你的汇编程序，但是这条线

```
lea dx, #1 
```

看起来很奇怪。当您调用`print dx`宏的这一行时，IMO 应转换为

```
lea dx, dx 
```

那是一个无效的 x86 指令。您的代码是否完全编译？？？如果是这样，你的汇编程序是做什么的`lea dx, dx`？它是成功`mov dx, dx`还是`nop`删除/忽略它？

更重要的是，int 21h 的函数 9 显示了一个以“$”结尾的 ASCII 字符串，其地址位于其中，`ds:dx`并且您没有在代码中构造任何这样的字符串。

您的代码永远不会设置`ds`，只是使用`ds`被中断程序中发生的任何值，这很糟糕。`ds`如果你想使用它，你需要保存和恢复。如果您的 ISR 的数据将包含在 ISR 的代码段中，您希望`ds`加载`cs`.

然后`dx`有`iret`before的偏移量`print dx`。您确定要打印*的*值`ip`吗？你什么时候想知道价值在`ip`哪里？

最后，您为什么要为所有这些设置 ISR？

您为什么不首先在`ipp`没有 ISR 的情况下完成您的工作？为什么不使用调试器？

# git - .gitignore 在 git-svn 中已过期

> ID：10776574
> 
> 赞同：1
> 
> 时间：2012-05-27T19:14:14.180
> 
> 标签：git, git-svn

我想做

```
git svn dcommit 
```

但我得到

```
Merge conflict during commit: File or directory 
'.gitignore' is out of date; try updating: resource
 out of date; try updating at /usr/lib/git-core/git-svn line 922 
```

如何仅从 svn repo 更新`.gitignore`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:20:25.693

听起来您对 .gitignore 进行了未提交的本地更改 - 您需要先将它们移开，然后才能使用 .gitignore 从 svn 远程更新`git svn rebase`。

采用

```
git stash 
```

暂时隐藏您的本地更改，然后用于`git svn rebase`从 svn 获取最新版本。接下来，您可以使用恢复临时更改

```
git stash pop 
```

Git 将报告您可以在本地修复的任何冲突，或者如果您决定不再需要本地更改，请使用：

```
git checkout -- .gitignore 
```

用从存储库中获取的文件覆盖您的本地 .gitignore 文件。

# java - 从 servlet（或 servlet 过滤器）中获取 JSP 名称

> ID：10776576
> 
> 赞同：1
> 
> 时间：2012-05-27T19:14:47.937
> 
> 标签：java, jsp, url, servlets, request

我有一堆 JSP 页面，所有这些页面都由单个 servlet 管理。我尝试使用请求的方法 getRequestURI 获取 JSP 页面名称以获取完整的 JSP 路径，但它仅返回 servlet 的路径（没有任何 JSP 页面）。有没有办法从 HttpServletRequest 中检索 JSP 名称？谢谢。

如果我有 url：

```
 http://localhost:8080/TutorWebApp/page/common/login.jsp 
```

我想通过帮助请求 /page/common/login.jsp 进入 servlet

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T21:21:25.253

[HttpServletRequest#getRequestURL](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRequestURL%28%29)？

如果得到了jsp的url，可以在jsp文件中写入如下内容。

```
<%= request.getRequestURL() %> 
```

# forms - CakePhp 表单：如何制作一个以 15 分钟为增量显示所有小时的下拉列表

> ID：10776577
> 
> 赞同：1
> 
> 时间：2012-05-27T19:15:02.820
> 
> 标签：forms, cakephp, drop-down-menu

我想要一个下拉列表，用户可以在其中选择任何 15 分钟增量的小时/分钟值，例如：

*   12:15
*   08:45

我怎样才能最好地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T20:07:21.467

使用`interval`选项。从书中：

> echo $this->Form->input('Model.time', array('type' => 'time', 'interval' => 15));

书：[http ://book.cakephp.org/1.3/en/view/1390/Automagic-Form-Elements](http://book.cakephp.org/1.3/en/view/1390/Automagic-Form-Elements)

# c# - 了解依赖属性系统

> ID：10776581
> 
> 赞同：1
> 
> 时间：2012-05-27T19:15:42.900
> 
> 标签：c#, wpf, dependency-properties, dependencyobject

有人可以帮我弄清楚WPF中的依赖属性系统吗？！我只是想做这样的事情：

假设，A 类有一个名为“A_property”的属性 (DP)。另一个 B 类只代表一些业务逻辑，我希望这个类能够监视“A_property”。我的意思是 B 类应该订阅 A 类的属性。如果有人这么好，请给我一个示例，如何使用依赖属性系统来做到这一点？

PS我很清楚如何使用RoutedEvent解决上述问题，但在我看来DP系统应该简化解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T19:29:08.120

您可以`DependencyPropertyDescriptor`为此使用：

```
var descriptor = DependencyPropertyDescriptor.FromProperty(A.AProperty, typeof(A));
descriptor.AddValueChanged(...); 
```

# grails - 分页不适用于grails中的列表

> ID：10776590
> 
> 赞同：0
> 
> 时间：2012-05-27T19:18:09.507
> 
> 标签：grails, pagination

分页在 grails 中对我不起作用。我也无法在 GUI 中看到分页按钮。我在 GUI 中看到整个列表

```
def lists={
params.max = Math.min(params.max ? params.int('max') : 10, 100) 
def submittedList=[],InstanceList=[]
submittedList=FicheRequest.executeQuery("select fr.id,fr.MOSSNumber from FicheRequest fr where  fr.status=?",['Submitted']) 
    if(submittedList.size()>0){
    def sortedSubmittedList=new MossNumberSorting().getSortedMossNo(submittedList as ArrayList[])
    sortedSubmittedList.each{sortedId->InstanceList.add(FicheRequest.get(sortedId))}
            }
    else
    flash.message="No Submitted Request exists in the queue"

    return [InstanceList:InstanceList, InstanceTotal: InstanceList.count()] 
} 
```

在我正在使用的 gsp 中

```
<div class="paginateButtons">
            <g:paginate total="${InstanceTotal}" />
        </div> 
```

我还在 URL 中看到了 max 和 offset 参数

```
http://localhost:9090/apps2/lists?offset=0&max=10 
```

不知道问题出在哪里，请提出一些解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T22:58:20.877

您可能忘记将参数传递给行：
`submittedList=FicheRequest.executeQuery("select fr.id,fr.MOSSNumber from FicheRequest fr where fr.status=?",['Submitted'])`
尝试这样：
`submittedList=FicheRequest.executeQuery("select fr.id,fr.MOSSNumber from FicheRequest fr where fr.status=?",['Submitted'],[max:params.max,offset:params.offset])`
查看更多详细信息：http:
[//grails.org/doc/latest/ref/Domain%20Classes/executeQuery.html](http://grails.org/doc/latest/ref/Domain%20Classes/executeQuery.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:02:35.507

我找到了对数组列表进行分页的粗略解决方案。我可以传递带有最大值和偏移值的完整列表，并获得要在视图中显示的列表：

[http://www.intelligrape.com/blog/2010/09/14/grails-pagination-on-filtered-list/](http://www.intelligrape.com/blog/2010/09/14/grails-pagination-on-filtered-list/)

但这不是一个好的解决方案，因为它需要加载所有数据库值以进行分页。我想到的一种解决方案是以苔藓编号排序格式存储域实例。苔藓数的格式有点复杂；这就是为什么我在从数据库中检索所有实例后使用 Comparator 类对其进行排序的原因。我欢迎关于如何以苔藓编号排序格式或其他格式保存我的实例的更好的想法。

# javascript - JQuery 中的跨站点 HTTP 身份验证

> ID：10776591
> 
> 赞同：4
> 
> 时间：2012-05-27T19:18:13.510
> 
> 标签：javascript, jquery, ajax, http-authentication

我想看看是否可以登录到使用 HTTP 身份验证的第三个站点。理想情况下，浏览器将存储凭据。不幸的是，这每次都失败。任何帮助将不胜感激，我正在使用我已经测试过的 base64 Jquery 插件。

所以，两个问题：

1.  如何查看 HTTP 状态码？
2.  原则上，这最终会奏效吗？

* * *

```
<script>
$("#login_button").click(function() {   
        var username = 'myFunUsername';
        var password = 'myFunPassword';

        $.ajax({
                url: 'http://remote-site-with-http-auth.com/member_site',
                beforeSend: function(xhr) {
                        xhr.setRequestHeader("Authorization", "Basic " + $.base64.encode(username + ":" + password));
                },
                success: function(data) { $("#label").text("Logged in, yay!"); }
        }).fail(function(){ $("#label").text("It didn't work"); });

}); 
```

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T04:16:58.030

```
var user= 'myFunUsername';
var pwd= 'myFunPassword';
        $.ajax({
                url: 'http://remote-site-with-http-auth.com/member_site',
                crossDomain:true,
                username :user,// Keep the variable name different from parameter name to avoid confusion
                password:pwd,
                xhrFields: { /* YOUR XHR PARAMETERS HERE */}

                beforeSend: function(xhr) {
                       // Set your headers
                },
                success: function(data, textStatus, xhr) {
                    alert(xhr.status);// The status code
                    //Code for success
                }
        }).fail(function(){ 
               //Fail code here
               }); 
```

有关参数的更多详细信息，请参阅[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# c++ - “标识符”：重新定义错误（错误 C2011 和错误 C2370）

> ID：10776593
> 
> 赞同：2
> 
> 时间：2012-05-27T19:18:28.403
> 
> 标签：c++, visual-c++

每次我尝试编译我的代码时，都会遇到大量错误。这不是我的代码的问题，因为它在另一台计算机上工作得很好。我尝试重新安装和修复，但这没有帮助。这是整个错误消息：

```
1>------ Build started: Project: Raptor Triangle 2, Configuration: Debug Win32 ------
1>  Raptor Triangle 2.cpp
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(57): error C2011: 'vc_attributes::YesNoMaybe' : 'enum' type redefinition
1>          c:\program files\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(57) : see declaration of 'vc_attributes::YesNoMaybe'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(67): error C2011: 'vc_attributes::AccessType' : 'enum' type redefinition
1>          c:\program files\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(67) : see declaration of 'vc_attributes::AccessType'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(81): error C2011: 'vc_attributes::Pre' : 'struct' type redefinition
1>          c:\program files\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(81) : see declaration of 'vc_attributes::Pre'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(78): error C3094: 'repeatable': anonymous usage not allowed
1>          e:\programs\c++\raptor triangle 2\raptor triangle 2\predefined c++ attributes (compiler internal)(147) : see declaration of 'repeatable'
1>          attribute can only be applied to: 'class', 'struct'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(112): error C2011: 'vc_attributes::Post' : 'struct' type redefinition
1>          c:\program files\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(112) : see declaration of 'vc_attributes::Post'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(109): error C3094: 'repeatable': anonymous usage not allowed
1>          e:\programs\c++\raptor triangle 2\raptor triangle 2\predefined c++ attributes (compiler internal)(147) : see declaration of 'repeatable'
1>          attribute can only be applied to: 'class', 'struct'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(143): error C2011: 'vc_attributes::FormatString' : 'struct' type redefinition
1>          c:\program files\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(143) : see declaration of 'vc_attributes::FormatString'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(155): error C2011: 'vc_attributes::InvalidCheck' : 'struct' type redefinition
1>          c:\program files\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(155) : see declaration of 'vc_attributes::InvalidCheck'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(152): error C3094: 'repeatable': anonymous usage not allowed
1>          e:\programs\c++\raptor triangle 2\raptor triangle 2\predefined c++ attributes (compiler internal)(147) : see declaration of 'repeatable'
1>          attribute can only be applied to: 'class', 'struct'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(165): error C2011: 'vc_attributes::Success' : 'struct' type redefinition
1>          c:\program files\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(165) : see declaration of 'vc_attributes::Success'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(176): error C2011: 'vc_attributes::PreBound' : 'struct' type redefinition
1>          c:\program files\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(176) : see declaration of 'vc_attributes::PreBound'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(173): error C3094: 'repeatable': anonymous usage not allowed
1>          e:\programs\c++\raptor triangle 2\raptor triangle 2\predefined c++ attributes (compiler internal)(147) : see declaration of 'repeatable'
1>          attribute can only be applied to: 'class', 'struct'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(186): error C2011: 'vc_attributes::PostBound' : 'struct' type redefinition
1>          c:\program files\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(186) : see declaration of 'vc_attributes::PostBound'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(183): error C3094: 'repeatable': anonymous usage not allowed
1>          e:\programs\c++\raptor triangle 2\raptor triangle 2\predefined c++ attributes (compiler internal)(147) : see declaration of 'repeatable'
1>          attribute can only be applied to: 'class', 'struct'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(196): error C2011: 'vc_attributes::PreRange' : 'struct' type redefinition
1>          c:\program files\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(196) : see declaration of 'vc_attributes::PreRange'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(193): error C3094: 'repeatable': anonymous usage not allowed
1>          e:\programs\c++\raptor triangle 2\raptor triangle 2\predefined c++ attributes (compiler internal)(147) : see declaration of 'repeatable'
1>          attribute can only be applied to: 'class', 'struct'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(208): error C2011: 'vc_attributes::PostRange' : 'struct' type redefinition
1>          c:\program files\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(208) : see declaration of 'vc_attributes::PostRange'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(205): error C3094: 'repeatable': anonymous usage not allowed
1>          e:\programs\c++\raptor triangle 2\raptor triangle 2\predefined c++ attributes (compiler internal)(147) : see declaration of 'repeatable'
1>          attribute can only be applied to: 'class', 'struct'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(245): error C2370: 'SA_Yes' : redefinition; different storage class
1>          c:\program files\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(245) : see declaration of 'SA_Yes'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(246): error C2370: 'SA_No' : redefinition; different storage class
1>          c:\program files\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(246) : see declaration of 'SA_No'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(247): error C2370: 'SA_Maybe' : redefinition; different storage class
1>          c:\program files\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(247) : see declaration of 'SA_Maybe'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(250): error C2370: 'SA_NoAccess' : redefinition; different storage class
1>          c:\program files\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(250) : see declaration of 'SA_NoAccess'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(251): error C2370: 'SA_Read' : redefinition; different storage class
1>          c:\program files\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(251) : see declaration of 'SA_Read'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(252): error C2370: 'SA_Write' : redefinition; different storage class
1>          c:\program files\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(252) : see declaration of 'SA_Write'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(253): error C2370: 'SA_ReadWrite' : redefinition; different storage class
1>          c:\program files\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(253) : see declaration of 'SA_ReadWrite'
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

帮助？哈哈。我不明白。我查看了错误代码，但不知道该怎么做。

另外，如果需要，我可以发布代码，但它很长。

编辑：我解决了它，但我不明白为什么。我去掉了包含 Windows.h 的行，这是 Sleep() 所需的。我仍然不明白为什么这很重要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T19:23:27.510

你需要形成你的头文件如下：

```
#ifndef HEADERFILENAME_DEF
#define HEADERFILENAME_DEF

/* all declarations here */

#endif 
```

这将防止头文件的双重包含。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-19T00:31:46.440

C2370 的另一个原因是存在包含常量的头文件的多个副本时。

然后不同的项目访问同一个头文件的不同副本，破坏'#pragma once'并导致'C2370 redefinition; 不同的存储类别”。

存在文件重复的一个常见原因是当开发人员制作依赖库头文件的本地副本时，同时存在全局可访问的静止 SDK。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T19:33:01.147

目标文件必须是过时的。尝试一个干净的构建 - 即清理/构建。`windows.h`应该与它无关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-11T09:39:05.107

我对 VS2008 也有同样的问题。我解决了：

```
change Yes (/Wp64) --> No 
```

# java - 我如何处理来自用户的多行数据

> ID：10776597
> 
> 赞同：0
> 
> 时间：2012-05-27T19:18:45.630
> 
> 标签：java, database, forms, javabeans

我正在使用 java bean、servlet 和 jsp（使用 jstl）。在其中一页上，我有一个包含多行数据的表格。例如 ：

```
 <form action="confirmAndCheckout" method="post">

                    <input type="hidden" name="serviceid" value="4">
                    <input type="hidden" name="eventid" value="0">
                    <input type="hidden" name="userid" value="1">
                    <input type="hidden" name="quantity" value="10">
                    <input type="hidden" name="datefrom" value="2012-02-07">
                    <input type="hidden" name="dateto" value="2012-05-26">
                    <input type="hidden" name="numdays" value="3">
                    <input type="hidden" name="status" value="pending">
                    <input type="hidden" name="timefrom" value="11:16">
                    <input type="hidden" name="timeto" value="22:07">

                    <input type="submit" name="submit" value="Proceed to Supplier Confirmation">

<form action="confirmAndCheckout" method="post">

                    <input type="hidden" name="serviceid" value="3">
                    <input type="hidden" name="eventid" value="0">
                    <input type="hidden" name="userid" value="1">
                    <input type="hidden" name="quantity" value="12">
                    <input type="hidden" name="datefrom" value="2012-02-07">
                    <input type="hidden" name="dateto" value="2012-05-26">
                    <input type="hidden" name="numdays" value="3">
                    <input type="hidden" name="status" value="pending">
                    <input type="hidden" name="timefrom" value="11:16">
                    <input type="hidden" name="timeto" value="22:07">

                    <input type="submit" name="submit" value="Proceed to Supplier Confirmation"> 
```

这是在我的jsp页面上。为简单起见，我只显示了 2 行数据。现在我每个都有一个按钮来让它工作，它逐行插入数据。

如何仅使用一个按钮将所有数据行提交到我的 servlet，这会将数据保存到适当的表中？

# c# - 是否可以捕获使用 SmtpClient 发送的电子邮件的“消息 ID”？

> ID：10776598
> 
> 赞同：7
> 
> 时间：2012-05-27T19:18:48.580
> 
> 标签：c#, .net, smtp, mailmessage, hmail-server

使用 .NET 中的[`SmtpClient`](https://docs.microsoft.com/en-us/dotnet/api/system.net.mail.smtpclient)和[`MailMessage`类](https://docs.microsoft.com/en-us/dotnet/api/system.net.mail.mailmessage)通过本地邮件服务器 ( [hMailServer](https://www.hmailserver.com/) ) 发送电子邮件，我目前发现无法获取已`Message-ID`发送消息的标头值。

**背后的想法**

我正在尝试以编程方式跟踪无法投递的邮件，因此我必须找到一种方法来识别来自拒绝特定邮件的目标 SMTP 服务器的回复。

现在我想简单地记住`Message-ID`SMTP 标头值并解析此 ID 的传入邮件。

发送消息后，我尝试检查[`Headers`集合](https://docs.microsoft.com/en-us/dotnet/api/system.net.mail.mailmessage.headers#System_Net_Mail_MailMessage_Headers)，但没有找到任何`Message-ID`.

**我的问题**

是否可以获得`Message-ID`我的 SMTP 服务器在发送`MailMessage`实例期间添加的标头值？

**2012-05-27 更新**

根据[此示例](https://social.msdn.microsoft.com/Forums/en-US/c915a9f2-d31e-42f1-a837-a3466b102242/how-to-create-a-valid-messageid-using-netmail-on-windows-xp-net-20)，我已成功尝试`Message-ID`在发送之前自行手动生成一个。

到目前为止，我所有的例子都有效，所以这*似乎*是我问题的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-07-03T16:26:13.187

您可以在发送电子邮件之前添加自己的消息 ID。我使用下一个代码：

```
Guid id = Guid.NewGuid(); //Save the id in your database 
mensajeEmail.Headers.Add("Message-Id", String.Format("<{0}@{1}>",id.ToString(),"mail.example.com")); 
```

注意：对于我使用[OpenPop.Net](http://hpop.sourceforge.net/)的下载消息，我检查了`message.Headers.InReplyTo`属性，并且发送了消息 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T20:35:45.383

您问题的标准解决方案是 VERP。阅读 Bernstein 的原始文章以了解原因`Message-Id`等。不可靠。[http://cr.yp.to/proto/verp.txt](http://cr.yp.to/proto/verp.txt)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-10T08:44:13.317

我正在为 .Net 和 SMTP 客户端使用 MailKit 库。

我尝试了另一种解决方案来获取使用 SMTP 客户端发送的消息的 ID，以跟踪任何回复的消息。

在发送消息之前，将隐藏的 ID 属性添加到消息标题中，

![检查这个样本](../Images/8dcb7efd741e437a281d7152ad06f0e5.png)

现在继续并发送您的消息，等待大约 10 秒，然后您将使用**IMAP**客户端获取您的已发送文件夹，并且对于您文件夹中的每条消息，循环遍历消息标题并检查其中是否有人是 == `messageIdentity`，现在你抓住了您已成功发送消息并获取有关它的任何信息，例如 ID 等...

# servlets - ServletContainerInitializer 与 ServletContextListener

> ID：10776599
> 
> 赞同：40
> 
> 时间：2012-05-27T19:18:50.683
> 
> 标签：servlets, initialization

我正在尝试使用 servletContainerInitializer 注册一个 servlet，但它似乎不起作用，也许这是我的代码（请查看它），但我开始想知道 and 之间的区别，[`ServletContainerInitializer`](http://docs.oracle.com/javaee/7/api/javax/servlet/ServletContainerInitializer.html)因为[`ServletContextListener`](http://docs.oracle.com/javaee/7/api/javax/servlet/ServletContextListener.html)以下代码在用作时运行良好`ServletContextListener`.

从 servlet 3.0 规范：

> ## 4.4
> 
> ### 配置方法（动态添加servlet）：
> 
> ...或从实现的`onStartup`方法`ServletContainerInitializer`...

`ServletContainerInitializer`: _

```
package com.marmoush.javaexamples.nullhaus.servlet;

import java.util.Set;
import javax.servlet.ServletContainerInitializer;
import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.ServletRegistration;

public class MyInit implements ServletContainerInitializer {
    public void onStartup(Set<Class<?>> c, ServletContext ctx) throws ServletException {
        System.out.println("hello");
        ServletRegistration reg = ctx.addServlet("q31","com.marmoush.javaexamples.nullhaus.servlet.Q31");
        reg.addMapping("/q31/*");
    }
} 
```

我试图自动注册的 servlet：

```
package com.marmoush.javaexamples.nullhaus.servlet;

import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class Q31 extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        resp.getWriter().println("hello world");
    }
} 
```

nullhaus java示例网站的原始代码“仅编辑了类名”也不起作用！

```
package com.marmoush.javaexamples.nullhaus.servlet;

import java.util.Set;

import javax.servlet.Servlet;
import javax.servlet.ServletContainerInitializer;
import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.ServletRegistration;

public class MyInit implements ServletContainerInitializer {
    public void onStartup(Set<Class<?>> c, ServletContext ctx) throws ServletException {
        try {
            Class klass = Class.forName("com.marmoush.javaexamples.nullhaus.servlet.Q31");
            Class<Q31> clazz = (Class<Q31>) klass;
            Servlet s = ctx.createServlet(clazz);
            ServletRegistration.Dynamic d = ctx.addServlet("q31", s);
            d.addMapping("/baz/*");
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-28T12:30:12.173

该`ServletContainerInitializer`实现旨在捆绑在一个 JAR 文件中，该文件又被放入`/WEB-INF/lib`webapp 中。JAR 文件本身应该有一个`/META-INF/services/javax.servlet.ServletContainerInitializer`包含 JAR 中实现的 FQN 的文件 `ServletContainerInitializer`。请注意，此文件不应放置在 webapp 本身中！

这允许 webapp 模块开发人员让他们的 JAR 文件挂钩 webapp 的启动和关闭周期。确实，他们也可以为此使用`ServletContextListener`with `@WebListener`，但是如果 webapp 自己的`web.xml`文件`metadata-complete="true"`设置了一个属性，`<web-app>`这意味着 webapp 不应该扫描 JAR 中的注释（这可以节省启动时间），这将不起作用。

在*您的特定情况下*`ServletContainerInitializer`不起作用只能意味着您实际上没有开发模块 JAR 文件，而只是您自己的 Web 应用程序不可或缺的一部分。在这种情况下，对你来说**没用**，你应该改用。*`ServletContainerInitializer`**`ServletContextListener`***

 ***```
@WebListener
public class Config implements ServletContextListener {

    @Override
    public void contextInitialized(ServletContextEvent event) {
        // Do stuff during server startup.
    }

    @Override
    public void contextDestroyed(ServletContextEvent event) {
        // Do stuff during server shutdown.
    }

} 
```

### 也可以看看：

*   [以编程方式映射 servlet，而不是使用 web.xml 或注释](https://stackoverflow.com/questions/39218951/map-servlet-programmatically-instead-of-using-web-xml-or-annotations/)
*   [将共享代码和 web.xml 从 WAR 项目拆分为通用 JAR 项目](https://stackoverflow.com/questions/30046979/splitting-up-shared-code-and-web-xml-from-war-project-to-common-jar-project/)
*   [使用特殊的自动启动 servlet 在启动时进行初始化并共享应用程序数据](https://stackoverflow.com/questions/3468150/using-special-auto-start-servlet-to-initialize-on-startup-and-share-application/)
*   [ServletContainerInitializer 中 contextDestroyed() 的等价物是什么？](https://stackoverflow.com/questions/35724728/what-is-the-equivalence-of-contextdestroyed-in-servletcontainerinitializer/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T11:27:55.957

**检查您是否已正确配置了 ServletContainerInitializer**。ServletContainerInitializer 类名应该在一个文件中配置：

```
META-INF/services/javax.servlet.ServletContainerInitializer 
```

该文件应该只包含类名。对于 Ex 在您的情况下，它应该如下所示：

```
com.marmoush.javaexamples.nullhaus.servlet.MyInit 
```

该文件（*META-INF/services/javax.servlet.ServletContainerInitializer*）可以捆绑在 WEB-INF/lib 中的库 JAR 中。

这是任何解释的[例子](http://piotrnowicki.com/2011/03/using-servlets-3-0-servletcontainerinitializer/)。***

# javascript - 测试正则表达式的相等性

> ID：10776600
> 
> 赞同：15
> 
> 时间：2012-05-27T19:19:26.223
> 
> 标签：javascript

我很惊讶地看到

```
/a/ === /a/ 
```

`false`在 JavaScript 中计算为。通读[规格](http://ecma-international.org/ecma-262/5.1/?utm_source=javascriptweekly&utm_medium=email#sec-7.8.5)：

> 程序中的两个正则表达式文字评估为永远不会相互比较 === 的正则表达式对象，即使这两个文字的内容相同。

既然`===`不能用来测试相等性，那么如何在 JavaScript 中测试正则表达式的相等性呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-27T19:28:37.227

这是一个甚至涵盖标志排序的案例。

```
function regexEqual(x, y) {
    return (x instanceof RegExp) && (y instanceof RegExp) && 
           (x.source === y.source) && (x.global === y.global) && 
           (x.ignoreCase === y.ignoreCase) && (x.multiline === y.multiline);
} 
```

测试：

```
regexEqual(/a/, /a/) // true
regexEqual(/a/gi, /a/ig) // also true.
regeXEqual(/a/, /b/) // false 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-27T19:36:34.180

这是一个完全测试所有相关正则表达式属性并确保它是正确类型的对象的函数：

```
function regexSame(r1, r2) {
    if (r1 instanceof RegExp && r2 instanceof RegExp) {
        var props = ["global", "multiline", "ignoreCase", "source", "dotAll", "sticky", "unicode"];
        for (var i = 0; i < props.length; i++) {
            var prop = props[i];
            if (r1[prop] !== r2[prop]) {
                return false;
            }
        }
        return true;
    }
    return false;
} 
```

* * *

而且，由于标志有时会被添加到具有新功能的正则表达式对象中（自 2012 年这个原始答案以来发生的情况 - 尽管上述代码已于 2019 年更新），所以这里的版本对未来标志有更多的未来证明被添加是因为它比较那里的任何标志而不是寻找一组特定的标志。它在比较之前对标志进行排序，以允许指定正则表达式的方式存在细微差异，而这些差异实际上不会改变功能。

```
function regexSame(r1, r2) {
    return r1 instanceof RegExp && 
           r2 instanceof RegExp &&
           r1.source === r2.source &&
           r1.flags.split("").sort().join("") === r2.flags.split("").sort().join("");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T19:22:32.283

您可以检查类型`typeof`，然后检查`toString()`两个正则表达式并进行比较。但是，它不会涵盖具有等效标志的情况，例如`/a/gi`and `/a/ig`。

```
function regexEquals(a, b)
{
    if (typeof a !== 'object' || typeof b !== 'object') return false;

    return a.toString() === b.toString();
} 
```

不幸的是，没有更具体的类型 from `typeof`，所以如果你真的想确保它们是正则表达式（或类似正则表达式），你可以按照以下方式做一些事情：

```
RegExp.prototype.regexEquals = function (other)
{
    return (typeof other.regexEquals === 'function')
        && (this.toString() === other.toString());
} 
```

然后：

```
/a/.regexEquals(/a/); // true
/a/.regexEquals(/b/); // false 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-27T19:24:42.883

使用 比较它们`toString()`，并检查它们`type`：

```
var a = /a/,
    b = /a/;

a.toString() === b.toString() && typeof(a) === typeof(b)  //true

var c = /a/,
    d = /b/;

c.toString() === d.toString() && typeof(c) === typeof(d)  //false 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-21T05:15:19.470

上面的答案没有考虑区分大小写。所以建立在[jfriend00 的答案](https://stackoverflow.com/a/10776682/8385554)上，函数应该是

```
function regexEqual(a, b) {
    if (!(a instanceof RegExp) || !(b instanceof RegExp)) {
        return false;
    }
    let sourceA = a.source;
    let sourceB = b.source;
    const flagsA = a.flags.split('').sort().join(',');
    const flagsB = b.flags.split('').sort().join(',');
    if (flagsA.includes('i') && flagsB.includes('i')) {
        sourceA = sourceA.toLowerCase();
        sourceB = sourceB.toLowerCase();
    }
    return sourceA === sourceB && flagsA === flagsB;
} 
```

# iphone - Sprite因为跟踪而有jigging效果

> ID：10776601
> 
> 赞同：0
> 
> 时间：2012-05-27T19:19:28.600
> 
> 标签：iphone, ios, ipad, cocos2d-iphone

我有一个精灵，它跟踪并跟随屏幕上的对象，向它们移动。

该方法按计划运行，基本上如下所示：

```
- (void) nextFrame:(ccTime)dt {
    //calculate distance between the bubble and the fish
    float dx = bubbleToChase.position.x - fish.position.x;
    float dy = bubbleToChase.position.y - fish.position.y;
    float d = sqrt(dx*dx + dy*dy);
    float v = 400;

    if (d >  190){
        NSLog(@"moving the fish!");
        fish.position = ccp( fish.position.x + dx/d * v *dt, 
                            fish.position.y + dy/d * v *dt);

    }
} 
```

该代码运行良好，当距离大于 190 时，鱼会游向它。

问题是对象具有物理特性，因此它们在屏幕上滑动。这会对鱼精灵产生一种摇晃/交错的效果，因为鱼一旦到达气泡就会停下来，但是随着气泡逐渐漂移 (d > 190)，它会摇晃并迅速停止。

我怎样才能摆脱这种跳汰效应？一旦鱼到达气泡的位置，我想阻止它移动。或者任何可以平滑它的替代方案。任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T20:14:29.310

```
if (d >  190 && !fish.parked){
    NSLog(@"moving the fish!");
    fish.position = ccp( fish.position.x + dx/d * v *dt, 
                        fish.position.y + dy/d * v *dt);

}else{
   if( fish.parked ){
   // what you want to do while parked
   // just sit there, wander randomly, 
   // then unpark the fish...
   if(unpark)
      fish.parked=FALSE;
   }else{
     fish.parked=TRUE;
     // set variables for parked state.
   }

} 
```

# c - 两个 malloc 返回相同的指针值

> ID：10776607
> 
> 赞同：0
> 
> 时间：2012-05-27T19:20:16.850
> 
> 标签：c, malloc

我正在用一行中的数据填充结构，行格式可以是 3 种不同的形式：
1.-“LD”（仅一个字）
2.-“LD A”（仅 2个字）3.-“
LD A ,B "（第二个单词用逗号隔开）。
名为 instruccion 的结构只有 3 个指针指向每个部分（`mnemo`和`op1`）`op2`，但是在为第二个单词分配内存时，有时`malloc`返回的值与为第一个单词给出的值相同。这是带有`mallocs`指出的代码：

```
instruccion sepInst(char *linea){
instruccion nueva;
char *et;

while(linea[strlen(linea)-1]==32||linea[strlen(linea)-1]==9)//Eliminating spaces and tabs at the end of the line
    linea[strlen(linea)-1]=0;
et=nextET(linea);//Save the direction of the next space or tab
if(*et==0){//If there is not, i save all in mnemo
    nueva.mnemo=malloc(strlen(linea)+1);
    strcpy(nueva.mnemo,linea);
    nueva.op1=malloc(2);
    nueva.op1[0]='k';nueva.op1[1]=0;//And set a "K" for op1
    nueva.op2=NULL;
    return nueva;
}
nueva.mnemo=malloc(et-linea+1);<-----------------------------------
strncpy(nueva.mnemo,linea,et-linea);
nueva.mnemo[et-linea]=0;printf("\nj%xj",nueva.mnemo);
linea=et;
while(*linea==9||*linea==32)//Move pointer to the second word
    linea++;
if(strchr(linea,',')==NULL){//Check if there is a coma
    nueva.op1=malloc(strlen(linea)+1);//Do this if there wasn't any coma
    strcpy(nueva.op1,linea);
    nueva.op2=NULL;
}
else{//Do this if there was a coma
    nueva.op1=malloc(strchr(linea,',')-linea+1);<----------------------------------
    strncpy(nueva.op1,linea,strchr(linea,',')-linea);
    nueva.op1[strchr(linea,',')-linea]=0;
    linea=strchr(linea,',')+1;
    nueva.op2=malloc(strlen(linea)+1);
    strcpy(nueva.op2,linea);printf("\n2j%xj2",nueva.op2);
}
return nueva;
} 
```

当我打印指针时，它恰好是相同的数字。注意：函数 char *nextET(char *line) 返回行中第一个空格或制表符的方向，如果没有则返回行尾的方向。

`sepInst()`在一个程序中被多次调用，并且只有在被多次调用后才会开始失败。`mallocs`我所有程序中的这些都让我很头疼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T19:50:33.563

有两种主要的可能性。

要么您正在程序中的其他地方释放内存（搜索对`free`或的调用`realloc`）。在这种情况下，您看到的效果是完全良性的。

或者，您可能正遭受内存损坏，很可能是缓冲区溢出。短期治疗是使用专门的工具（[内存调试器](http://en.wikipedia.org/wiki/Memory_debugger)）。选择一个在您的平台上可用的。该工具将需要重新编译（重新链接）并最终告诉您代码超出先前定义的缓冲区限制的确切位置。可能有多个违规代码位置。把每一个都当作一个严重的缺陷。

一旦你厌倦了这种研究，学习使用`const`限定符并将它与所有变量/参数声明一起使用，你可以干净地做到这一点。这不能完全防止缓冲区溢出，但会将它们限制为旨在成为可写缓冲区的变量（例如，您的问题中涉及的那些显然不是）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T19:20:55.063

附带说明一下，就个人而言，我认为您应该更加努力地减少调用 malloc 的次数。这对性能来说是一个好主意，而且它也减少了腐败。

```
nueva.mnemo=malloc(strlen(linea)+1);
strcpy(nueva.mnemo,linea);
nueva.op1=malloc(2); 
```

应该

```
// strlen has to traverse your string to get the length,
// so if you need it more than once, save its value.
cbLineA = strlen(linea); 
// malloc for the string, and the 2 bytes you need for op1.
nueva.mnemo=malloc(cbLineA + 3);
// strcpy checks for \0 again, so use memcpy
memcpy(nueva.mnemo, linea, cbLineA);  
nueva.mnemo[cbLineA] = 0;
// here we avoid a second malloc by pointing op1 to the space we left  after linea
nueva.op1 = nueva.mnemo + cbLinea + 1; 
```

只要您可以通过预先计算来减少 malloc 的数量……就这样做。您正在使用 C! 这不是滥用堆或进行垃圾收集的高级语言！

# android - 从/到 ftp 服务器上传或下载：Android 客户端

> ID：10776610
> 
> 赞同：2
> 
> 时间：2012-05-27T19:21:12.867
> 
> 标签：android, ftp

我正在开发 android 项目来测试上传或下载文件的 FTP 功能。这是我基于[本](http://www.jibble.org/simpleftp/)教程的第一次尝试代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    try {
        SimpleFTP ftp = new SimpleFTP();

        // Connect to an FTP server on port 21.
        ftp.connect("ftp.olympe-network.com", 21, "username", "password");

        // Set binary mode.
        ftp.bin();

        // Change to a new working directory on the FTP server.
        ftp.cwd("web");

        // Upload some files.
        ftp.stor(new File("shirt.jpg"));
        //ftp.stor(new File("comicbot-latest.png"));

        // You can also upload from an InputStream, e.g.
        ftp.stor(new FileInputStream(new File("shirt.jpg")), "shirt.jpg");
        /*ftp.stor(someSocket.getInputStream(), "blah.dat");
        */

        // Quit from the FTP server.
        ftp.disconnect();
    }
    catch (IOException e) {
        // Jibble.
    }
} 
```

我的 shirt.jpg 文件存储在主项目文件夹中。我使用的是模拟器而不是物理设备。我的日志中没有错误，但文件没有上传。

然后，我改用另一种方法：

```
private void loadLogs() {
    //radBtn.addView(null);
    new processTask().execute();
}
private class processTask extends AsyncTask<String, Void, Void>{
    private ProgressDialog Dialog = new ProgressDialog(activitiMain.this);
     private TextView log; 
     private  Spinner s;
    protected void onPreExecute() {
        Dialog.setMessage("Loading...");
        Dialog.show();
    }
    @Override
    protected Void doInBackground(String... arg0) {
        FTPClient client = new FTPClient();
        try {
        SharedPreferences myPref = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
        String ipaddr = myPref.getString("etServer", "");
        String port= myPref.getString("port", "21");
        String logFile= myPref.getString("logfname", "error_log");
        String filePath= myPref.getString("path", "/public_html");
        String uname= myPref.getString("uname", "");
        String pass= myPref.getString("pass", "");
        client.connect(ipaddr,21);
        client.enterLocalPassiveMode();
        boolean login = client.login(uname, pass);
        client.changeWorkingDirectory(filePath);
        System.out.println(client.printWorkingDirectory());

        BufferedReader reader = null;
        String line = null;
        sv = new ScrollView(activitiMain.this);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
        sv.setLayoutParams(LP_FF);
        LinearLayout loglay  =  new LinearLayout(activitiMain.this);
        loglay.setOrientation( LinearLayout.VERTICAL );  //FTPFile[] ftpFiles = client.listFiles();
        FTPFile[] ftpFiles = client.listFiles();
        ArrayList<String> name = new ArrayList<String>();                              
        ArrayAdapter <CharSequence> adapter =new ArrayAdapter <CharSequence> (getBaseContext(), android.R.layout.simple_spinner_item );
            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

             adapter.add("Select File");*/      
            //s = new (Spinner)findViewById(R.id.Spinner01);
            s = new Spinner(activitiMain.this);
            for (int i = 0; i < ftpFiles.length; i++) { 
                String fname =ftpFiles[i].getName();
                Log.i("FTP", "File " +i +" : "+fname);
                       name.add(fname);
                        long length = ftpFiles[i].getSize();
                        //adapter2.add(ftpFiles[i].getName());
                        //String readableLength = FileUtils.byteCountToDisplaySize( length );
                        ///System.out.println( name + ":\t\t" + readableLength );  
                    }
            //String [] strArray =null;
            //strArray.toArray(name);
            String [] files = name.toArray(new String[name.size()]);
            @SuppressWarnings("unchecked")
            ArrayAdapter<Object> adapter2 = new ArrayAdapter<Object>(getApplicationContext(), android.R.layout.simple_spinner_item,files);  
             adapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);  
             s.setAdapter(adapter2);  
             loglay.addView(s);

         Log.i("Files", ftpFiles.toString());
            for (FTPFile ftpFile : ftpFiles) {
                String fileName = ftpFile.getName(); 
                if (fileName.equals(logFile)){
                     try {
                         InputStream stream = client.retrieveFileStream(fileName);                             
                         reader = new BufferedReader(new InputStreamReader(stream, "UTF-8"));
                         //line = reader.readLine();

                         while ((line = reader.readLine())!= null && line.trim().length()>0) {
                                //System.out.println(line);
                             log = new TextView(activitiMain.this);
                                String trail = line; 
                                log.setTextColor(Color.GREEN);                                                                                                                                                                                                                                                                                                                                 
                                log.setPadding(10, 5, 0, 5);
                                log.setText(trail);                                                                                                                                                                                                                                                                                                                                   
                                loglay.addView(log);    
                            }
                         sv.addView(loglay);
                     } finally {
                         if (reader != null) try { reader.close(); } catch (IOException logOrIgnore) {}
                     }
                }
            }
               client.logout();

        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                client.disconnect();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return null;
    }
    protected void onPostExecute(Void unused) {
        Dialog.dismiss();
        setContentView(sv);
        } 
```

在我的首选项屏幕中，我指定了 ftp 服务器参数，但我的 logcat 中也出现错误：

```
 05-27 18:36:38.237: ERROR/AndroidRuntime(585): FATAL EXCEPTION: main
05-27 18:36:38.237: ERROR/AndroidRuntime(585): java.lang.NullPointerException
05-27 18:36:38.237: ERROR/AndroidRuntime(585):     at android.view.ViewGroup.addViewInner(ViewGroup.java:1969)
05-27 18:36:38.237: ERROR/AndroidRuntime(585):     at android.view.ViewGroup.addView(ViewGroup.java:1865)
05-27 18:36:38.237: ERROR/AndroidRuntime(585):     at android.view.ViewGroup.addView(ViewGroup.java:1845)
05-27 18:36:38.237: ERROR/AndroidRuntime(585):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:217)
05-27 18:36:38.237: ERROR/AndroidRuntime(585):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
05-27 18:36:38.237: ERROR/AndroidRuntime(585):     at android.app.Activity.setContentView(Activity.java:1658)
05-27 18:36:38.237: ERROR/AndroidRuntime(585):     at com.sam.remote.activitiMain$processTask.onPostExecute(activitiMain.java:160)
05-27 18:36:38.237: ERROR/AndroidRuntime(585):     at com.sam.remote.activitiMain$processTask.onPostExecute(activitiMain.java:1)
05-27 18:36:38.237: ERROR/AndroidRuntime(585):     at android.os.AsyncTask.finish(AsyncTask.java:417)
05-27 18:36:38.237: ERROR/AndroidRuntime(585):     at android.os.AsyncTask.access$300(AsyncTask.java:127)
05-27 18:36:38.237: ERROR/AndroidRuntime(585):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
05-27 18:36:38.237: ERROR/AndroidRuntime(585):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-27 18:36:38.237: ERROR/AndroidRuntime(585):     at android.os.Looper.loop(Looper.java:123)
05-27 18:36:38.237: ERROR/AndroidRuntime(585):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-27 18:36:38.237: ERROR/AndroidRuntime(585):     at java.lang.reflect.Method.invokeNative(Native Method)
05-27 18:36:38.237: ERROR/AndroidRuntime(585):     at java.lang.reflect.Method.invoke(Method.java:521)
05-27 18:36:38.237: ERROR/AndroidRuntime(585):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-27 18:36:38.237: ERROR/AndroidRuntime(585):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-27 18:36:38.237: ERROR/AndroidRuntime(585):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T20:32:38.350

当您说您的文件 shirt.jpg 存储在您的主项目文件夹中时，在这里查看您的第一次尝试，我认为您的代码不会发现一旦部署到设备上，您可能必须手动将该文件存储在此处解释的设备：

[http://developer.android.com/guide/topics/data/data-storage.html#filesInternal](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

或者您可以先将 shirt.jpg 文件（通过 ADP）上传到您的应用程序共享目录，如下所述：

[http://developer.android.com/guide/topics/data/data-storage.html#filesExternal](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)

然后尝试阅读并通过 FTP 访问它。

哦，是的，我在 Android 上保存文件然后通过电子邮件发送它们的经验，使用实际设备进行测试，因为模拟器不为您提供所需的网络连接。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-27T20:23:48.103

哪一行发生了异常？双击错误消息并尝试再次调试/发布

# jsf - 每次页面刷新时都会调用 Session Scoped Managed Bean 构造函数

> ID：10776611
> 
> 赞同：0
> 
> 时间：2012-05-27T19:22:03.597
> 
> 标签：jsf

我正在使用会话范围的托管 bean 来处理 Java EE 应用程序中的登录。在我对用户进行身份验证后，用户对象将保存在此会话 bean 中。但是，刷新页面后，会话 bean 值消失了。

我正在调试代码，结果是在页面刷新时再次调用会话范围托管 bean 的构造函数，因此用新用户初始化用户对象。我想这不是正常行为，因为它应该保留在会话中，不是吗？

我发布了登录托管 bean 的某些部分，包括参数和登录方法。基本上enteredEmail 和enteredPassword 代表登录表单上输入的数据。如果身份验证成功，loggedIn 布尔值将变为 true，并且登录的用户对象存储在 checkedUser 变量中。

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

@ManagedBean
@SessionScoped
public class LoginController  implements Serializable {

@EJB
private LoginSessionBean loginSessionBean;
@EJB
private LecturerFacade lecturerFacade;

private Lecturer checkedUser;
private String enteredEmail;
private String enteredPassword;
private boolean loggedIn;

/** Creates a new instance of loginController */
public LoginController() {
   loggedIn = false;
   checkedUser = new Lecturer();
}
public String login(){
    RequestContext context = RequestContext.getCurrentInstance();
    FacesMessage msg = null;

    this.setCheckedUser(lecturerFacade.findLecturerByEmail(enteredEmail));

    if(loginSessionBean.checkPassword(checkedUser, enteredPassword))
    {
        loggedIn = true;
        msg = new FacesMessage(FacesMessage.SEVERITY_INFO, "Welcome", checkedUser.getFirstName()+ " " + checkedUser.getLastName());

        FacesContext.getCurrentInstance().addMessage(null, msg);
        context.addCallbackParam("loggedIn", loggedIn);

    }
    return "Index"; 
```

我还发布了上述托管 bean 使用的两个 EJB。LecturerFacade 使用输入的电子邮件检索用户对象，而 loginSessionBean 检查密码。

```
@Stateless
public class LecturerFacade extends AbstractFacade<Lecturer> {
@PersistenceContext(unitName = "EffectinetWebPU")
private EntityManager em;

Logger logger = Logger.getLogger("MyLog");
FileHandler fh;

protected EntityManager getEntityManager() {
    return em;
}

public LecturerFacade() {
    super(Lecturer.class);
}

public Lecturer findLecturerByEmail(String email) {
    try {
        return (Lecturer) this.getEntityManager().createQuery("SELECT l FROM Lecturer l WHERE l.email = :email").setParameter("email", email).getSingleResult();
    } catch (NoResultException e) {
        System.err.println("Caught NOResultException: "+  e.getMessage());
        return null;
    } catch (NonUniqueResultException e) {
        System.err.println("Caught NonUniqueResultException: "+  e.getMessage());
        return null;
    } catch (IllegalStateException e) {
        System.err.println("Caught IllegalStateException: "+  e.getMessage());
        return null;
    }
} 
```

_

```
@Stateless

public class LoginSessionBean {

// Add business logic below. (Right-click in editor and choose
// "Insert Code > Add Business Method")
@PersistenceContext(unitName = "EffectinetWebPU")
private EntityManager em;

protected EntityManager getEntityManager() {
    return em;
}

public void setEntityManager(EntityManager em) {
    this.em = em;
}

public boolean checkPassword(Lecturer user, final String enteredPassword) {
    if (user.getPassword().equals(enteredPassword)) {
        return true;
    } else {
        return false;
    }
} 
```

}

如果有人对出了什么问题有任何建议，请告诉我

我使用 glassfish 3.1 作为应用程序服务器和 Primefaces 作为 JSF 库。另外，我已经检查并从正确的包中导入了 sessionScoped 注释，而不是从 javax.enterprise ...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T13:43:01.970

因此，您的问题就在这里：

```
<p:menuitem value="Logout" ... onclick="#{loginController.logout()}"/> 
```

该`onclick`属性应该代表一个**JavaScript**处理函数，当最终用户单击该元素时，该函数将在 Web 浏览器中执行。就像是

```
onclick="alert('You have clicked this element!')" 
```

该`onclick`属性还接受 a `ValueExpression`，因此您甚至可以让 JSF/EL 相应地自动生成其值：

```
onclick="#{bean.onclickFunction}" 
```

和

```
public String getOnclickFunction() {
    return "alert('You have clicked this element!')";
} 
```

因此，在呈现页面时会评估所有 EL。在您的特定情况下，`logout()`每次评估 EL 时都会调用该方法，因此每次呈现页面时都会使会话无效！

您需要将它绑定到一个接受`MethodExpression`like的属性`<h:commandLink action>`，`<h:commandButton action>`在这种特殊情况下`<p:menuitem action>`。

```
<p:menuitem value="Logout" ... action="#{loginController.logout()}"/> 
```

这可以通过理解基本的 HTML 和 JavaScript 概念并记住 JSF 最终生成 HTML/CSS/JS 来理解。在浏览器中打开JSF页面，右键*查看源码*即可实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:27:35.667

好吧，我今天设法解决了。这就是问题所在，尽管我无法解释原因：

我使用 Primefaces 3.2 作为 JSF 库，所以这是索引页面的主菜单。

```
<h:form>
        <p:menubar >
            <p:menuitem id="registerLink" value="Register" rendered="#{!loginController.loggedIn}" onclick="registerDialog.show()" /> 

            <p:menuitem id="loginLink" value="Login" rendered="#{!loginController.loggedIn}" onclick="loginDialog.show()" />

            <p:submenu label="Units" rendered="true"> 
                <p:menuitem id="addNew" value="Add New" onclick="createUnitDialog.show()" />

                <p:menuitem id="myUnits" value="My Units" onclick="" />
            </p:submenu>        

            <p:menuitem id="results" value="Results/Statistics" rendered="#{loginController.loggedIn}" onclick=""/>

            <p:menuitem id="profile" value="My Profile" rendered="#{loginController.loggedIn}" onclick=""/>

            <p:menuitem id="logout" value="Logout" rendered="#{loginController.loggedIn}" onclick="#{loginController.logout()}"/>

        </p:menubar>
    </h:form> 
```

在为整个代码设置断点之后，我发现应该在每次页面刷新时调用 logout() 方法，该方法应该销毁托管 bean。我不知道为什么会发生这种情况，因为应该在单击注销菜单项时调用它。

不过改了之后`onclick="#{loginController.logout()}`问题`action="#{loginController.logout()}`就解决了。

我检查了 Primefaces 的文档，但没有解释这种行为

# ruby - 来自 Svn::Client::Context 的 status 方法能否返回一个数组

> ID：10776613
> 
> 赞同：-1
> 
> 时间：2012-05-27T19:23:11.293
> 
> 标签：ruby, svn

我正在尝试使用 ruby​​ 的 SVN 绑定来获取文件的提交日期。下面的代码有效。但是，我不满足于我需要使用一个块来从 status 方法中获取结果。有没有更好的办法 ？

```
ctx = Svn::Client::Context.new()
ctx.add_simple_prompt_provider(2) do |cred, realm, user_name, may_save|
  cred.username = "sorin"
  cred.password = "realyniftypassword"
end

svndate = nil
ctx.status(path, "HEAD", true, true) do |path, status| 
    break if status.entry.nil?
    svndate = status.entry.cmt_date
end 

next if svndate.nil? 
```

我正在寻找类似的东西：

```
svndate = ctx.status(path, "HEAD", true, true)[0].entry.cmt_date 
```

但 ctx.status 返回一个整数。

有没有更合适的方法？

我使用 Ubuntu deb 包 libsvn-ruby1.8，除了网上的一些示例外，我找不到任何文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:56:28.247

为了将来参考，有一个 Ruby gem 可能会有所帮助。

[http://rubygems.org/gems/svn_wc](http://rubygems.org/gems/svn_wc)
[https://github.com/dvwright/svn_wc/](https://github.com/dvwright/svn_wc/)

```
require 'svn_wc'
conf = {
  "svn_repo_master"       => "svn+ssh://sorin@192.168.10.1/opt/repo",
  "svn_user"              => "sorin",
  "svn_pass"              => "realyniftypassword",
  "svn_repo_working_copy" => "/tmp/local_working_repo/root",
  #"svn_repo_config_path"  => "/tmp/my_config"
}

svn = SvnWc::RepoAccess.new YAML::dump(conf)
repo_wc = conf['svn_repo_working_copy']
svn.list_entries(repo_wc, nil, verbose=true).each do |info|
  puts "#{info[:entry_name]} #{info[:cmt_date]}"
end 
```

# javascript - 如何在three.js 中创建具有法线和UV 的动态网格？

> ID：10776614
> 
> 赞同：4
> 
> 时间：2012-05-27T19:23:21.047
> 
> 标签：javascript, webgl, three.js

我知道如何在 three.js 中动态创建网格，但不清楚如何在网格中添加自定义 UV 和法线。这是如何创建自定义网格，我们如何以编程方式将 UV 和法线添加到该网格？

谢谢！

```
var imgTexture = THREE.ImageUtils.loadTexture(image);
var avatarGeom = new THREE.Geometry();

avatarGeom.vertices.push(new THREE.Vector3(0.895813,0.732893,0));
avatarGeom.vertices.push(new THREE.Vector3(-1.007173,0.732893,0));
avatarGeom.vertices.push(new THREE.Vector3(0.895813,-1.390674,0));
avatarGeom.vertices.push(new THREE.Vector3(-1.007173,-1.390674,0));

var face = new THREE.Face3(2,3,1);
avatarGeom.faces.push(face);

face = new THREE.Face3(0,2,1);
avatarGeom.faces.push(face);

var avatar = new THREE.Mesh(avatarGeom,new THREE.MeshLambertMaterial(imgTexture));
avatar.doubleSided = true;
scene.add(avatar); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T21:01:50.400

正常的[脸](http://mrdoob.github.com/three.js/docs/49/#Face4)。UV 进入[几何体](http://mrdoob.github.com/three.js/docs/49/#Geometry)。

```
var imgTexture = THREE.ImageUtils.loadTexture(image);
var avatarGeom = new THREE.Geometry();

avatarGeom.vertices.push(new THREE.Vector3(0.895813,0.732893,0));
avatarGeom.vertices.push(new THREE.Vector3(-1.007173,0.732893,0));
avatarGeom.vertices.push(new THREE.Vector3(0.895813,-1.390674,0));
avatarGeom.vertices.push(new THREE.Vector3(-1.007173,-1.390674,0));

var face = new THREE.Face3(2,3,1);
face.normal.set(0,0,1); // normal
avatarGeom.faces.push(face);
avatarGeom.faceVertexUvs[0].push([new THREE.UV(1,1),new THREE.UV(0,1),new THREE.UV(1,0)]); // uvs

face = new THREE.Face3(0,2,1);
face.normal.set(0,0,1); // normal
avatarGeom.faces.push(face);
avatarGeom.faceVertexUvs[0].push([new THREE.UV(0,0),new THREE.UV(1,1),new THREE.UV(1,0)]); // uvs

var avatar = new THREE.Mesh(avatarGeom,new THREE.MeshLambertMaterial(imgTexture));
avatar.doubleSided = true;
scene.add(avatar); 
```

UV 进入几何体的原因是因为这样我们可以拥有不同的通道（同一几何体的不同 UV 集）。

# cuda - CUDA kernel is slower than CPU

> ID：10776620
> 
> 赞同：4
> 
> 时间：2012-05-27T19:24:19.633
> 
> 标签：cuda, mex

I'm new to CUDA and I'm probably doing something wrong. All I need is logical operation on two binary vectors. Length of vectors is 2048000\. I compared speed between logical `and` in Matlab's C mex file and in CUDA kernel. C on CPU is ~5% faster than CUDA. Please note that I measured only kernel execution (without memory transfer). I have i7 930 and 9800GT.

```
##MEX file testCPU.c:##

#include "mex.h"
void mexFunction( int nlhs, mxArray *plhs[],
        int nrhs, const mxArray *prhs[] ) {

    int i, varLen;
    unsigned char *vars, *output;

    vars = mxGetPr(prhs[0]);
    plhs[0] = mxCreateLogicalMatrix(2048000, 1);
    output = mxGetPr(plhs[0]);
    for (i=0;i<2048000;i++){
        output[i] = vars[i] & vars[2048000+i];
    }
} 
```

Compile

```
mex testCPU.c 
```

Create vectors

```
vars = ~~(randi(2,2048000,2)-1); 
```

Measure speed:

```
tic;testCPU(vars);toc; 
```

**CUDA**:

```
#CUDA file testGPU.cu#
#include "mex.h"
#include "cuda.h"

__global__ void logical_and(unsigned char* in, unsigned char* out, int N) {
    int idx = blockIdx.x*blockDim.x+threadIdx.x;
    out[idx] = in[idx] && in[idx+N];
}

void mexFunction( int nlhs, mxArray *plhs[],
        int nrhs, const mxArray *prhs[] ) {

    int i;
    unsigned char *vars, *output, *gpu, *gpures;

    vars = (unsigned char*)mxGetData(prhs[0]);

    plhs[0] = mxCreateLogicalMatrix(2048000, 1);
    output = (unsigned char*)mxGetData(plhs[0]);       

    cudaEvent_t start, stop;
    cudaEventCreate(&start);
    cudaEventCreate(&stop);
    float dt_ms;

    // input GPU malloc
    cudaEventRecord(start, 0);
    cudaMalloc( (void **) &gpu, sizeof(unsigned char)*4096000);
    cudaEventRecord(stop, 0);
    cudaEventSynchronize(stop);
    cudaEventElapsedTime(&dt_ms, start, stop);
    printf("GPU input malloc: %f ms, %i\n", dt_ms, cudaGetLastError());

    // output GPU malloc
    cudaEventRecord(start, 0);
    cudaMalloc( (void **) &gpures, sizeof(unsigned char)*2048000);
    cudaEventRecord(stop, 0);
    cudaEventSynchronize(stop);
    cudaEventElapsedTime(&dt_ms, start, stop);
    printf("GPU output malloc: %f ms, %i\n", dt_ms, cudaGetLastError());

    // copy from CPU to GPU
    cudaEventRecord(start, 0);
    cudaMemcpy( gpu, vars, sizeof(unsigned char)*4096000, cudaMemcpyHostToDevice);
    cudaEventRecord(stop, 0);
    cudaEventSynchronize(stop);
    cudaEventElapsedTime(&dt_ms, start, stop);
    printf("copy input from CPU to GPU: %f ms, %i\n", dt_ms, cudaGetLastError());

    dim3 dimBlock(32);
    printf("thread count: %i\n", dimBlock.x);
    dim3 dimGrid(2048000/dimBlock.x);
    printf("block count: %i\n", dimGrid.x);

    // --- KERNEL ---
    cudaEventRecord(start, 0);
    logical_and<<<dimGrid, dimBlock>>>(gpu, gpures, 2048000);
    cudaEventRecord(stop, 0);
    cudaEventSynchronize(stop);
    cudaEventElapsedTime(&dt_ms, start, stop);
    printf("GPU kernel: %f ms, %i\n", dt_ms, cudaGetLastError());

    // result from GPU to CPU
    cudaEventRecord(start, 0);
    cudaMemcpy( output, gpures, sizeof(unsigned char)*2048000, cudaMemcpyDeviceToHost );
    cudaEventRecord(stop, 0);
    cudaEventSynchronize(stop);
    cudaEventElapsedTime(&dt_ms, start, stop);
    printf("copy output from GPU to CPU: %f ms, %i\n", dt_ms, cudaGetLastError());

    cudaFree(gpu);
    cudaFree(gpures);

} 
```

Compile:

```
 nvmex -f nvmexopts_9.bat testGPU.cu 
-I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\include" 
-L"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\lib\x64" -lcudart -lcufft 
```

Output:

```
GPU input malloc: 0.772160 ms, 0
GPU output malloc: 0.041728 ms, 0
copy input from CPU to GPU: 1.494784 ms, 0
thread count: 32
block count: 64000
*** GPU kernel: 3.761216 ms, 0 ***
copy output from GPU to CPU: 1.203488 ms, 0 
```

Is that code OK? CPU was ~0.1ms faster than CUDA kernel. I tried different thread counts (multipliers of 32) up to 512, 32 was fastest. Operator & instead of && was almost 1ms slower.

Is 9800GT really so weak? What speed-up can I expect with today's mainstream card (ie. GTX460,560)?

Thank you

### EDIT: based on talonmies' comment, I made these modifications:

Kernel function:

```
__global__ void logical_and(uchar4* in, uchar4* out, int N) {
    int idx = blockIdx.x*blockDim.x+threadIdx.x;
    out[idx].x = in[idx].x & in[idx+N].x;
    out[idx].y = in[idx].y & in[idx+N].y;
    out[idx].z = in[idx].z & in[idx+N].z;
    out[idx].w = in[idx].w & in[idx+N].w;
} 
```

Main function:

```
uchar4 *gpu, *gpures;

// 32 was worst, 64,128,256,512 were similar
dim3 dimBlock(128);
// block count is now 4xtimes smaller
dim3 dimGrid(512000/dimBlock.x); 
```

Output:

```
GPU input malloc: 0.043360 ms, 0
GPU output malloc: 0.038592 ms, 0
copy input from CPU to GPU: 1.499584 ms, 0
thread count: 128
block count: 4000
*** GPU kernel: 0.131296 ms, 0 ***
copy output from GPU to CPU: 1.281120 ms, 0 
```

Is that correct? Almost 30x speed-up! It seems too good to be true, but result is correct :) How faster will be GTX560 on this particular task? Thx

### Edit 2:

Is this code

```
__global__ void logical_and(uchar4* in, uchar4* out, int N) {
    int idx = blockIdx.x*blockDim.x+threadIdx.x;

    out[idx].x = in[idx].x & in[idx+N].x;
    out[idx].y = in[idx].y & in[idx+N].y;
    out[idx].z = in[idx].z & in[idx+N].z;
    out[idx].w = in[idx].w & in[idx+N].w;
} 
```

automatically transformed to:

```
__global__ void logical_and(uchar4* in, uchar4* out, int N) {
    int idx = blockIdx.x*blockDim.x+threadIdx.x;  
    uchar4 buff;

    buff.x = in[idx].x;
    buff.y = in[idx].y;
    buff.z = in[idx].z;
    buff.w = in[idx].w;

    buff.x &= in[idx+N].x;
    buff.y &= in[idx+N].y;
    buff.z &= in[idx+N].z;
    buff.w &= in[idx+N].w;

    out[idx].x = buff.x;
    out[idx].y = buff.y;
    out[idx].z = buff.z;
    out[idx].w = buff.w;
} 
```

by compiler?

If it is correct, it explains my confusion about coalesced access. I thought that `in[idx] & in[idx+N]` leads to non-coalesced access, because of accessing non-contiguous memory. But in fact, `in[idx]` and `in[idx+N]` are loaded in two coalesced steps. `N` can be any multiple of 16, because uchar4 is 4 bytes long, and for coalesced access address must be aligned to 64 bytes (on 1.1 device). Am I right?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T22:03:21.047

As [talonmies](https://stackoverflow.com/users/681865/talonmies) pointed out, you're accessing and processing your data byte-wise, which is far from optimal. A collection of techniques you may want to consider, such as Instruction-Level Parallelism and buffered read/writes, are summarized in the nVidia Webinar [Better Performance at Lower Occupancy](http://nvidia.fullviewmedia.com/gtc2010/0922-a5-2238.html) by Vasily Volkov.

In a nutshell, what you want to do is, in each thread, read *several* `uint4` in a coalesced way, process them, and only then store them.

**Update**

Does it make any difference if you re-write your code as follows?

```
__global__ void logical_and(unsigned int* in, unsigned int* out, int N) {
    int idx = blockIdx.x*blockDim.x*chunksize+threadIdx.x;
    unsigned int buff[chunksize];
    #pragma unroll
    for ( int k = 0 ; k < chunksize ; k++ )
        buff[k] = in[ blockDim.x*k + idx ];
    #pragma unroll
    for ( int k = 0 ; k < chunksize ; k++ )
        buff[k] &= in[ blockDim.x*k + idx + N ];
    #pragma unroll
    for ( int k = 0 ; k < chunksize ; k++ )
        out[ blockDim.x*k + idx ] = buff[k];
} 
```

Note that I've assumed `chunksize` is a variable you've `#define`d somewhere, e.g.

```
#define chunksize 4 
```

And that you have to divide the number of blocks you launch and `N` by that number. I've also used `unsigned int` which is just four packed `uchar`. In your calling function, you may have to cast your pointers accordingly.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T19:49:50.417

What i think its happening is called [false sharing](http://en.wikipedia.org/wiki/False_sharing). I think the problem is that the byte-sized regions you are trying to write from your threads are producing a massive race condition because different threads are trying to write to the same word-aligned address. I'm not sure the details in GPU, but in CPU, when different threads try to write to memory in the same 256-byte aligned region (called cache lines) they will continuously block each other, plummeting your global performance.

# css - CSS下拉对齐

> ID：10776623
> 
> 赞同：1
> 
> 时间：2012-05-27T19:25:44.383
> 
> 标签：css, drop-down-menu, alignment

我正在尝试创建一个下拉菜单，当您单击它时会打开一个 ul。问题是我希望“查看更多”按钮始终位于它所在的位置，并且下拉菜单在其下方居中打开。

如果您转到下面的链接，您会明白我的意思。它完全按照我想要的方式打开，但是如果您通过单击“查看更多”关闭下拉菜单，当我希望它保持在原位时，您会看到标题向左移动

我正在构建它以便能够在许多不同的位置使用，因此“硬编码”大小不是一种选择。

请帮忙！:)

HTML

```
<div id="testcontainer">

        <a href="javascript:;" class="dropdown-activator" dropdownContent="#dropdown-content-340">
            <span>View More!</span>
        </a>

        <ul class="dropdown-content" id="dropdown-content-340">
            <li><a href="http://www.google.com" class="googleIcon">Google</a></li>
            <li><a href="http://www.yahoo.com" class="yahooIcon">Yahoo</a></li>
            <li><a href="http://www.bing.com" class="bingIcon">Bing</a></li>
        </ul>

    </div>

    <div id="testcontainer2">

        <a href="javascript:;" class="dropdown-activator" dropdownContent="#dropdown-content-350">
            <span>View More!</span>
        </a>

        <ul class="dropdown-content" id="dropdown-content-350">
            <li><a href="http://www.google.com" class="googleIcon">Google</a></li>
            <li><a href="http://www.yahoo.com" class="yahooIcon">THIS IS A TEST FOR WIDER SHIT</a></li>
            <li><a href="http://www.bing.com" class="bingIcon">Bing</a></li>
        </ul>

    </div>

    <div id="testcontainer3">

        <a href="javascript:;" class="dropdown-activator" dropdownContent="#dropdown-content-400">
            <span>View More!</span>
        </a>

        <ul class="dropdown-content" id="dropdown-container-400">
            <li><a href="http://www.google.com" class="googleIcon">GOOOOOOOOOOOOOOOOOOOOOGLEASDASDSASD</a></li>
            <li><a href="http://www.yahoo.com" class="yahooIcon">Yahoo</a></li>
            <li><a href="http://www.bing.com" class="bingIcon">Bing</a></li>
        </ul>

    </div> 
```

CSS

```
#testcontainer {
position: absolute;
top: 20px;
left: 100px;
text-align: center;
}

#testcontainer2 {
position: absolute;
top: 20px;
left: 150px;
text-align: center;
}

#testcontainer3 {
position: absolute;
top: 200px;
left: 500px;
text-align: center;
}

.dropdown-activator-active {
background-color: #000;
color: #fff;
}

.dropdown a {
display: inline-block;
}

.dropdown-activator {
display: inline-block;
border: 1px solid black;
padding: 3px;
}

.dropdown-content {
visibility: hidden;
height: 0;
opacity: 0;
position: relative;
text-align: left;
margin: 0 auto;
border: 1px solid black;
}

.dropdown-content-active {
visibility: visible;
height: auto;
opacity: 1;
}

.dropdown-content ul li {
list-style: none;
} 
```

jQuery

```
$(function(){

$(".dropdown-activator").click(function() {
    $this = $(this);
    var current = $this.attr('dropdownContent');
    if (!$(current).hasClass('dropdown-content-active')) {
        $this.addClass("dropdown-activator-active", 100);
        $(current).addClass('dropdown-content-active', 100, function() {
            $('html').unbind('click');
            $('html').not($this).one('click', function() {
                $(current).prev().removeClass("dropdown-activator-active", 100);
                $(current).removeClass('dropdown-content-active', 100);
            });
        });
    } else {
        $this.removeClass("dropdown-activator-active", 100);
        $(current).removeClass('dropdown-content-active', 100)
    }
});
}); 
```

你可以在这里看到一个例子 www.chrisworrell.com（临时）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T19:42:03.310

`display: none;`从文档流中删除您的元素，这就是您的父 div 调整大小的原因。另一方面，`visibility: hidden;`隐藏您的元素，同时将其保留在文档流中。

您可以做的不是操作`<ul>`元素的显示属性，而是设置`visibility: hidden;`和设置，`height: 0;`这样未扩展的链接将继续使用与其捆绑的 UL 元素的宽度。

这有点hacky，但应该完成工作。

为了使用 jQuery UI 操纵可见性而不是不显示任何内容，请使用`.animate({opacity: 1})`fadeIn() 和`.animate({opacity: 0})`fadeOut()

# java - org.hibernate.QueryException：无法解析属性

> ID：10776625
> 
> 赞同：2
> 
> 时间：2012-05-27T19:26:16.563
> 
> 标签：java, jpa

这是我第一次使用 JPA。我用 Java 和 JPA 编写代码。我的代码如下。

```
 String queryStr = "SELECT m.title, b.isbn, b.authors";
    queryStr += " FROM Book b, Media m";
    queryStr += " WHERE m.MediaID = b.MediaID";
            queryStr += " AND b.isbn = '" + isbn + "' AND m.title = '%" + title +"%'"; 
Query query = em.createQuery(queryStr); 
```

从我的代码中，Class Book 扩展了 Class Media。

但我得到的错误是

> org.hibernate.QueryException: 无法解析属性：MediaID of: mediaManagement.Media [SELECT m.title, b.isbn, b.authors FROM mediaManagement.Book b, mediaManagement.Media m WHERE m.MediaID = b.MediaID]

这是媒体类。

```
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
@Table(name = "Media")
@NamedQuery(name = "findAllMedias", query = "select b from Media b")
public class Media {

@Id
@Column(name = "MediaID")
@GeneratedValue(strategy = GenerationType.IDENTITY)
private int mediaID;

/**
 * Getter of the property <tt>mediaID</tt>
 * 
 * @return Returns the mediaID.
 * @uml.property name="mediaID"
 */
public int getMediaID() {
    return mediaID;
}

/**
 * Setter of the property <tt>mediaID</tt>
 * 
 * @param mediaID
 *            The mediaID to set.
 * @uml.property name="mediaID"
 */
public void setMediaID(int mediaID) {
    this.mediaID = mediaID;
}

/**
 * @uml.property name="title"
 */
@Column(name = "title")
private String title;

/**
 * Getter of the property <tt>title</tt>
 * 
 * @return Returns the title.
 * @uml.property name="title"
 */
public String getTitle() {
    return title;
}

/**
 * Setter of the property <tt>title</tt>
 * 
 * @param title
 *            The title to set.
 * @uml.property name="title"
 */
public void setTitle(String title) {
    this.title = title;
}

/**
 * @uml.property name="editionDate"
 */

private Calendar editionDate;

/**
 * Getter of the property <tt>editionDate</tt>
 * 
 * @return Returns the editionDate.
 * @uml.property name="editionDate"
 */
public Calendar getEditionDate() {
    return editionDate;
}

/**
 * Setter of the property <tt>editionDate</tt>
 * 
 * @param editionDate
 *            The editionDate to set.
 * @uml.property name="editionDate"
 */
public void setEditionDate(Calendar editionDate) {
    this.editionDate = editionDate;
}

/*
 * Two medias are equal if their mediaID is the same
 */
@Override
public boolean equals(Object media) {
    if (media == null)
        return false;
    Media b = (Media) media;

    if (b.mediaID == mediaID)
        return true;

    return false;
}

public Media() {
};

/**
 * Creates a media All parameters should be given
 * 
 * @param title
 *            the title of the media
 * 
 * @param editionDate
 *            date of the edition of the media
 * 
 * @throws BadParametersException
 */
public Media(String title, Calendar editionDate)
        throws BadParametersException {
    if ((title == null) || (editionDate == null))
        throw new BadParametersException();

    this.title = title;
    this.editionDate = editionDate;

}

/**
 * Returns a description of the media
 */
public String toString() {
    return this.title + "  " + String.valueOf(this.title);
}

/** 
 * @uml.property name="copies"
 * @uml.associationEnd multiplicity="(0 -1)" inverse="media:copyManagement.Copy"
 */
@OneToMany(mappedBy="mediaRef") protected Set<Copy> copies;

public void addCopy(Copy copy) {
    copies.add(copy);
}

/** 
 * Getter of the property <tt>copies</tt>
 * @return Returns the copies.
 * @uml.property name="copies"
 */
public Set<Copy> getCopies() {
    return copies;
}

/** 
 * Setter of the property <tt>copies</tt>
 * @param editionDate The copies to set.
 * @uml.property  name="copies"
 */
public void setCopies(Set<Copy> copies) {
    this.copies = copies;
} 
```

这是书类。

```
@Entity
@Table(name = "Book")
@NamedQuery(name = "findAllBooks", query = "select b from Book b")
public class Book extends Media {
/**
 * @uml.property name="authors"
 */
@Column(name = "authors")
private ArrayList<String> authors;

/**
 * Getter of the property <tt>authors</tt>
 * 
 * @return Returns the authors.
 * @uml.property name="authors"
 */
public ArrayList<String> getAuthors() {
    return authors;
}

/**
 * Setter of the property <tt>authors</tt>
 * 
 * @param authors
 *            The authors to set.
 * @uml.property name="authors"
 */
public void setAuthors(ArrayList<String> authors) {
    this.authors = authors;
}

/**
 * @uml.property name="isbn"
 */

@Column(name = "isbn")
private String isbn;

/**
 * Getter of the property <tt>isbn</tt>
 * 
 * @return Returns the isbn.
 * @uml.property name="isbn"
 */
public String getisbn() {
    return isbn;
}

/**
 * Setter of the property <tt>isbn</tt>
 * 
 * @param isbn
 *            The isbn to set.
 * @uml.property name="isbn"
 */
public void setisbn(String isbn) {
    this.isbn = isbn;
}

public Book() {
    // TODO Auto-generated constructor stub
}

public Book(String title, Calendar editionDate, ArrayList<String> authors,
        String isbn) throws BadParametersException {
    super(title, editionDate);
    this.authors = authors;
    this.isbn = isbn;
    // TODO Auto-generated constructor stub
}

} 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T20:08:24.217

如果书扩展了媒体，你为什么要加入媒体表？（尽管使用 Book 和 Media 类和映射会更容易）

查询“Book”对象就足够了。也许“MediaId”应该是“mediaId”。Hibernate 的属性名称区分大小写。

# ruby - Ruby 的自定义库目录

> ID：10776626
> 
> 赞同：0
> 
> 时间：2012-05-27T19:26:18.340
> 
> 标签：ruby, path

我有一个目录，里面有我的 Ruby 自定义库。将此目录添加到 Ruby 的库路径的最佳方法是什么？我不想对已执行的 Ruby 文件执行此操作。我曾经通过在 中为每个库留下一个符号链接来做到这一点`/usr/local/lib/ruby/1.9.1`，并且正在寻找更好的方法。

*   操作系统：Linux Mint 13
*   红宝石：1.9.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T21:32:36.247

使用`RUBYLIB`. 添加到`.bashrc`或任何地方：

```
export RUBYLIB=/path/to/whatever/ 
```

[RUBYLIB 环境路径](https://stackoverflow.com/questions/5995305/rubylib-environment-path)

# asp.net-mvc-3 - 我将这种 javascript 数组绑定到什么 mvc 对象？

> ID：10776628
> 
> 赞同：0
> 
> 时间：2012-05-27T19:26:52.623
> 
> 标签：asp.net-mvc-3, asp.net-ajax

我正在用 [int,bool] 填充数组：

```
$.each(ownedChecked, function (key, val) {
    /*code to set id as int and paintedTrue as bool*/
    ownedIDs.push([id,paintedTrue]);
}); 
```

我创建了一个将被字符串化的 var：

```
var saveData = { OwnedListEntryIDs:ownedIDs };

//send data
$.ajax({
    url: '/ListEntry/OwnedModels',
    type: 'POST',
    contentType: 'application/json; charset=utf-8',
    data: JSON.stringify(saveData),
    success: function (data) { alert('Update success: ' + data); },
    failure: function (data) { alert('Update failed: ' + data); }
}); 
```

这是视图模型：

```
public class OwnedPaintedSave
{
    //collection contains a ListEntryID and a bool indicating whether it is painted or not
    public Dictionary<int,bool> OwnedListEntryIDs { get; set; }
} 
```

进入控制器方法后，ModelState.Isvalid 传递，代码进入 foreach 循环，但模型始终为 NULL：

```
[HttpPost]
public JsonResult OwnedModels(OwnedPaintedSave models)
{
    if (ModelState.IsValid)
    {
        foreach (var id in models.OwnedListEntryIDs)
        { }
    }
} 
```

我尝试在 $.ajax 方法中设置传统：true，但同样的问题。我猜 ViewModel 中的 Dictionary 不是我需要绑定的，但我不确定它应该是什么。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T19:53:28.823

我为 OwnedPaintedSave 对象提供了两个 int[] 属性，一个用于 OwnedIDs，一个用于 PaintedIDs。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:09:21.313

我认为问题出在您的控制器上。您正在传递`var saveData = { OwnedListEntryIDs:ownedIDs };`（本质上是`Dictionary<int, bool>`- 是吗？）作为您的数据，但操作结果中的参数是类型`OwnedPaintedSave`

我认为，如果您将控制器参数更改为`Dictionary<int, bool> ownedListEntryIDs`并且不对 javascript 对象进行字符串化，则该框架足够聪明，可以序列化和反序列化您的对象。所以你会有这个...

```
var saveData = { OwnedListEntryIDs:ownedIDs };

//send data
$.ajax({
    url: '/ListEntry/OwnedModels',
    type: 'POST',
    contentType: 'application/json; charset=utf-8',
    data: saveData,
    success: function (data) { alert('Update success: ' + data); },
    failure: function (data) { alert('Update failed: ' + data); }
}); 
```

然后在你的控制器中......

```
[HttpPost]
public JsonResult OwnedModels(Dictionary<int, bool> ownedListEntryIDs)
{
    if (ModelState.IsValid)
    {
        foreach (var id in ownedListEntryIDs)
        { }
    }
} 
```

# linux - 需要帮助解析 shell 脚本命令行参数

> ID：10776629
> 
> 赞同：2
> 
> 时间：2012-05-27T19:26:58.880
> 
> 标签：linux, shell

我是 Unix shell 脚本的新手，希望在编写小脚本方面得到一些帮助。

我为我的脚本定义了以下概要：

```
install.sh [-h|-a path|[-k path][-f path][-d path][-e path]] 
```

即用户可以请求一些`help (-h)`，将全部安装到指定的位置（`-a path`），或者将一个或多个组件（`-k, -f, -d -e`）安装到适当的路径。如果没有参数，则应显示帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T19:31:25.077

您可以`getopts`使用`bash`. [这是一个使用 getopts](http://programmingexamples.net/wiki/Bash/Parsing_command_line_arguments_using_getopts)取自Bash/Parsing 命令行参数的示例（显然您必须根据需要调整选项）。

```
#!/bin/bash

#Set a default value for the $cell variable
cell="test"

#Check to see if at least one argument was specified
if [ $# -lt 1 ] ; then
   echo "You must specify at least 1 argument."
   exit 1
fi

#Process the arguments
while getopts c:hin: opt
do
   case "$opt" in
      c) cell=$OPTARG;;
      h) usage;;
      i) info="yes"
      n) name=$OPTARG;;
      \?) usage;;
   esac
done 
```

相关的 SO 问题[如何在 bash 中解析命令行参数](https://stackoverflow.com/questions/192249/how-do-i-parse-command-line-arguments-in-bash)？

有关更多信息，请`getopts`在此[手册页](http://linux.die.net/man/1/bash)上搜索 bash。

# node.js - 将 CouchDB 和 Redis 一起用于事务数据

> ID：10776630
> 
> 赞同：1
> 
> 时间：2012-05-27T19:27:04.530
> 
> 标签：node.js, couchdb, redis

当我阅读关于 couchdb 的内容时，我偶然发现了一个关于事务和 couchdb 的问题。显然，在沙发上处理事务的方法是提取最新版本并将其与您当前使用的版本进行比较。如果数据快速变化，这可能会出现问题。另一种方法是 map reduce 并将事务数据分离到多个文档中。这似乎也不是最理想的。

我正在考虑将 redis 用于此类数据。对于这种目的，递增和递减函数似乎相当惊人。

所以我可以为事务键写一些字符串，比如：

```
//some user document
{
   name: "guy",
   id: 10,
   page_views: "redis user:page_views:10"
} 
```

然后，如果我在一些事务数据中读到类似“redis”的内容，那么我就知道从 redis 获取该信息。我想我可以事先决定这些事情，但是由于面向文档的数据库的主要任务是灵活且不将数据绑定到列，我认为可能有更简单的方法？

有没有一种简单的方法可以将 redis 数据链接到 couchdb？我应该手动完成这一切并为出现的几个字段吗？还有其他想法吗？在用户文档中“最终”更新此事务数据还是干脆不将其存储在那里会更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T00:42:34.447

Redis 和 CouchDB 都“简单”（即简单）。所以在这方面，你所描述的很容易。当然，通过使用两个数据库，您增加了应用程序的复杂性。但另一方面，CouchDB+Redis 组合越来越受欢迎。

我所知道的将两者结合的唯一工具是 Mikeal Rogers 的[redcouch](https://github.com/mikeal/redcouch)。这是一个简单的工具。也许您可以扩展它以添加您需要的内容（并发送拉取请求！）。

更广泛的考虑是 Redis 没有 CouchDB 所具备的完整复制功能集。所以 Redis 可能会限制你未来使用 CouchDB 的选择。具体来说，Redis 不支持多主复制。与 CouchDB 相比，您将始终拥有一个集中式 Redis 数据库。（如果我错了，请纠正我——我使用 CouchDB 比使用 Redis 更强大。）

# python - 正则表达式表现出乎意料

> ID：10776631
> 
> 赞同：1
> 
> 时间：2012-05-27T19:27:15.527
> 
> 标签：python, regex

脚本：

```
import re

matches = ['hello', 'hey', 'hi', 'hiya']

def check_match(string):
    for item in matches:
        if re.search(item, string):
            print 'Match found: ' + string
        else:
            print 'Match not found: ' + string

check_match('hey')
check_match('hello there')
check_match('this should not match')
check_match('oh, hiya') 
```

输出：

```
Match not found: hey
Match found: hey
Match not found: hey
Match not found: hey
Match found: hello there
Match not found: hello there
Match not found: hello there
Match not found: hello there
Match not found: this should not match
Match not found: this should not match
Match found: this should not match
Match not found: this should not match
Match not found: oh, hiya
Match not found: oh, hiya
Match found: oh, hiya
Match found: oh, hiya 
```

有很多事情我不明白，对于初学者来说，每个字符串在这个输出中被搜索四次，一些返回两个作为找到的匹配，一些返回三个。我不确定我的代码中有什么问题导致这种情况发生，但是有人可以尝试看看有什么问题吗？

预期的输出是这样的：

```
Match found: hey
Match found: hello there
Match not found: this should not match
Match found: oh, hiya 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T19:37:49.317

这不是行为不正确，这是您对`re.search(...)`.

请参阅输出后的评论：

```
Match not found: hey                    # because 'hello' is not in 'hey'
Match found: hey                        # because 'hey' is in 'hey'
Match not found: hey                    # because 'hi' is not in 'hey'
Match not found: hey                    # because 'hiya' is not in 'hey'

Match found: hello there                # because 'hello' is in 'hello there'
Match not found: hello there            # because 'hey' is not in 'hello there'
Match not found: hello there            # because 'hi' is not in 'hello there'
Match not found: hello there            # because 'hiya' is not in 'hello there'

Match not found: this should not match  # because 'hello' is not in 'this should not match'
Match not found: this should not match  # because 'hey' is not in 'this should not match'
Match found: this should not match      # because 'hi' is in 'this should not match'
Match not found: this should not match  # because 'hiya' is not in 'this should not match'

Match not found: oh, hiya               # because 'hello' is not in 'oh, hiya'
Match not found: oh, hiya               # because 'hey' is not in 'oh, hiya'
Match found: oh, hiya                   # because 'hi' is in 'oh, hiya'
Match found: oh, hiya                   # because 'hiya' is in 'oh, hiya' 
```

如果您不希望`hi`在 input 的情况下匹配模式`oh, hiya`，则应在模式周围环绕单词边界：

```
\bhi\b 
```

这将导致它只匹配`hi` ***不***被其他字母包围的出现（`well hiya there`不会匹配模式`\bhi\b`，但`well hi there` *会*）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T19:46:47.743

试试这个 - 它更简洁，它会标记多个匹配项：

```
import re

matches = ['hello', 'hey', 'hi', 'hiya']

def check_match(string):
    results = [item for item in matches if re.search(r'\b%s\b' % (item), string)]
    print 'Found %s' % (results) if len(results) > 0 else "No match found"

check_match('hey')
check_match('hello there')
check_match('this should not match')
check_match('oh, hiya')
check_match('xxxxx xxx')
check_match('hello and hey') 
```

给出：

> ```
> Found ['hey']
> Found ['hello']
> No match found
> Found ['hiya']
> No match found
> Found ['hello', 'hey'] 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T19:41:08.550

for 循环针对每个“匹配项”检查字符串，并为每个匹配项打印找到或未找到。您真正想要的是查看是否有任何匹配项匹配，然后打印出一个“找到”或“未找到”。我实际上并不了解python，因此语法可能不正确。

```
for item in matches:
    if re.search(item, string):
    found = true
if found:
    print 'Match found: ' + string
else:
    print 'Match not found: ' + string 
```

`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T19:32:22.200

你会得到 4 个搜索和 4 个输出，因为你正在循环遍历一个数组，为数组中的每个元素搜索并输出一些东西......

# c++ - C++ sqlite3_prepare：“SQL 逻辑错误或缺少数据库”

> ID：10776633
> 
> 赞同：1
> 
> 时间：2012-05-27T19:27:40.837
> 
> 标签：c++, syntax, parameters, sqlite

这是我想在我的 SQLite3 DB 上运行的 SQL 代码：

`INSERT INTO tbl_types VALUES(?, ?);`

但是无论我玩多少`?`s 我都会得到同样的`"SQL logic error or missing database"`错误，而只是用`?`自定义的任意值替换 s ，运行并且我在我的表中得到记录，因此我推断出我的语法有问题。

有什么药？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T20:09:08.250

我必须为我部分通过谷歌搜索和部分蛮力发现问题而道歉：

1.  我为自动增量字段提供了一个默认的**0**参数，我将其替换为**NULL**，这是我在网上找到的。
2.  我从 0 开始绑定我的值，而文档说`The leftmost SQL parameter has an index of 1`我将它与我在 page.xml 阅读的类似条款混淆了`column`。

无论如何，感谢您抽出宝贵的时间；-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T20:56:40.340

我有同样的错误。但后来我注意到我拼错了一个参数名称。

# java - 如何从 JPanel 获取 JDialog 的父级

> ID：10776639
> 
> 赞同：5
> 
> 时间：2012-05-27T19:29:14.427
> 
> 标签：java, swing, jframe, jdialog

在我的 Swing 应用程序中。我有`JFrame`几个`JPanels`。其中一个用于放置另一个面板。其中一个 - 另一个小组 - 称为`JDialog`. 对话框的构造函数接受`Frame`,`String`和`Boolean`作为参数。我的问题是如何从此面板获取父级（即框架）？

`SwingUtilities.windowForComponent(...)`并且`SwingUtilities.getWindowAncestor(...)`在我的情况下不起作用。没有参数的构造函数不是一个选项。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T20:13:33.640

每个 JComponent 都支持方法 getParent()。正如该方法的名称所说，它返回对该组件父级的引用。由于 JDialog、JPanel、JFrame 等是 JComponent 的子类，因此您可以在自己的情况下使用它。但请注意，您必须进行类型转换，例如：

`JFrame parentFrame = (JFrame) myContenPane.getParent()`

并且根据您的布局，您可能必须多次调用 getParent()，这非常难看。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-10T04:52:01.937

要获取当前面板父级，您可以使用以下方法：

```
(JFrame)this.getRootpane().getParent(); 
```

# c# - 对象引用未设置为 C# 中的对象实例

> ID：10776641
> 
> 赞同：0
> 
> 时间：2012-05-27T19:29:22.690
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-2

我正在 asp.net MVC 2.0 中开发一个应用程序，我在其中调用`Repository`in 控制器的函数，但它给了我一个例外，`Object reference not set to an instance of an object`它不允许我调试这一行，所以我无法找到问题。这是代码。

```
private IIssueRepository _issueRepository;

public double CalculateLoadBar(long userID)
{
    int i = 0;
    double load = 0;
    var issues = _issueRepository.GetAssignedIssues(userID);
} 
```

请告诉我如何找出问题所在。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T19:30:42.347

从您发布的内容来看，它似乎`_issueRepository`没有设置为对象 - 它没有在任何地方实例化。

需要先对其进行实例化，然后才能对其调用方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T19:35:45.710

在使用它之前尝试实例化这个对象，如下所示：

```
_issueRepository = new IssueRepository(); 
```

希望这有帮助。

# php - 无法让 php 设置会话

> ID：10776643
> 
> 赞同：0
> 
> 时间：2012-05-27T19:29:46.653
> 
> 标签：php, mysql, session, http-post, session-variables

我只是无法在 php 中设置会话，也找不到原因。

希望你能给我一个线索，我可能做错了什么！

索引.php

```
<?php
    // Inialize session
    session_start();

    include_once("commons/config.php");
    $authenticated = checkLoggedIn("yes", FALSE);
    //flushMemberSession();

    var_dump($authenticated);

    echo "<pre>";
    var_dump($_SESSION);
    echo "</pre>";
?>
... followed by html and some php ifs 
```

jquery ajax 调用 WHICH RETURNS **TRUE**或**FALSE**，因为它应该从`checkPass()`内部`actions.php`

```
$('#login').click(function(){
    var data = $('#login-form').serialize();
    $.post('commons/actions.php', data, function(result){
        if(result == true){
            console.log(result);
            //location.reload();
        }else{
            console.log('not authenthicated');
        }
    },'json');
    return false;
}); 
```

动作.php

```
session_start();
if (!$_SERVER['SERVER_ADDR'] == $_SERVER['REMOTE_ADDR']){
    header('HTTP/1.0 400 Unauthorized', true, 400);
    exit;
} else {

    include('config.php');

    $user = mysql_real_escape_string(stripslashes($_POST['username']));
    $pass = mysql_real_escape_string(stripslashes($_POST['password']));

    $response = checkPass($user, $pass); // false or

    $debug = array('user'=>$user, 'pass'=>$pass, 'response'=>$response);

    print_r(json_encode($response));

} 
```

功能：

```
function checkLoggedIn($status, $redirect=TRUE){
    switch($status){
        case "yes":
            if(!isset($_SESSION["loggedIn"])){
                if($redirect) {
                    header("Location: login.php");
                    exit;
                } else {
                    $authenticated = false;
                    return $authenticated;
                }
            } else {
                checkLoggedIn("no");
            }
        break;
        case "no":
            if(isset($_SESSION["loggedIn"]) && $_SESSION["loggedIn"] === true ){
                //header("Location: members.php");
                $authenticated = true;
                return $authenticated;
            }
        break;
    }   
    return true;
}

function checkPass($username, $password) {
    $query="SELECT username, password FROM users WHERE username='$username' and password='$password'";
    $result=mysql_query($query, $link) or die("checkPass fatal error: ".mysql_error());

// Check exactly one row is found:
if(mysql_num_rows($result)==1) {
    cleanMemberSession($username);
    return true;
    /*$row=mysql_fetch_array($result);
    return $row;*/
}
//Bad username:
return false;
}

function cleanMemberSession($username) {
session_regenerate_id();
$_SESSION["username"]=$username;
$_SESSION["loggedIn"]=true;
session_write_close();
} 
```

## 更新

AJAX 标头

```
Response Headers
Connection  Keep-Alive
Content-Length  4
Content-Type    text/html
Date    Sun, 27 May 2012 19:36:54 GMT
Keep-Alive  timeout=5, max=100
Server  Apache/2.2.21 (Win32) mod_ssl/2.2.21 OpenSSL/1.0.0e PHP/5.3.8 mod_perl/2.0.4 Perl/v5.10.1
X-Powered-By    PHP/5.3.8
Request Headers
Accept  application/json, text/javascript, */*; q=0.01
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Connection  keep-alive
Content-Length  31
Content-Type    application/x-www-form-urlencoded; charset=UTF-8
Cookie  PHPSESSID=qhbjq76f4np7iug09jrnl4j5j1
Host    localhost
Referer http://localhost/tw/Tevienes/web/
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0
X-Requested-With    XMLHttpRequest 
```

## 更新2

顺便说一句，对的回应`var_dump($_SESSION);`是`array(0) { }`

## 更新3

我刚刚在index.php中添加`$_SESSION['test'] = 'alex';`了`session_start();`，并且会话变量已经设置...所以它必须是设置变量的函数...或者谁知道还有什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T19:42:19.090

将 session_start() 放入所有调用的 .php 文件中，也包括从 ajax 调用的文件。同样在actions.php 的开头，在比较中加上括号。！运算符的优先级高于 < 或 >。

改变

```
 if (!$_SERVER['SERVER_ADDR'] == $_SERVER['REMOTE_ADDR']){ 
```

至

```
 if (!($_SERVER['SERVER_ADDR'] == $_SERVER['REMOTE_ADDR'])){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T19:46:26.880

远射和愚蠢，但请检查服务器和客户端上的日期和时间是否设置正确。如果其中任何一个设置不正确，会话 cookie 将/可能不会设置。

# objective-c - NSManagedObjects 从离当前位置最近到最远的位置排序

> ID：10776644
> 
> 赞同：2
> 
> 时间：2012-05-27T19:29:48.497
> 
> 标签：objective-c, core-data, nssortdescriptor

我有一个定义了两个属性的核心数据模型

*   （双）纬度
*   （双）经度

现在，我想获取这些对象并根据它们与用户当前位置的比较距离对它们进行排序。我已经知道如何获取当前位置，但我仍然不知道如何根据两个属性对结果进行排序。

我已经搜索过类似的东西，但我仍然有点困惑。

如果有人能指出我正确的方向，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T20:29:36.777

使用比较器块进行排序非常容易

```
NSArray *positions = //all fetched positions
CLLocation *currentLocation   = // You said that you know how to get this.

positions = [positions sortedArrayUsingComparator: ^(id a, id b) {
    CLLocation *locationA    = [CLLocation initWithLatitude:a.latitude longitude:a.longitude];
    CLLocation *locationB    = [CLLocation initWithLatitude:b.latitude longitude:b.longitude];
    CLLocationDistance dist_a= [locationA distanceFromLocation: currentLocation];
    CLLocationDistance dist_b= [locationB distanceFromLocation: currentLocation];
    if ( dist_a < dist_b ) {
        return (NSComparisonResult)NSOrderedAscending;
    } else if ( dist_a > dist_b) {
        return (NSComparisonResult)NSOrderedDescending;
    } else {
        return (NSComparisonResult)NSOrderedSame;
    }
} 
```

正如我刚刚从 lnafziger 那里了解到的，您应该在此添加有用的 hack/workaround¹，他正在展示。

* * *

¹[从这个词中选择对你来说最积极的词]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T19:47:54.800

您可能希望将长/纬度对转换为点之间的地理距离，然后对该单个属性进行排序。

这是一篇关于一些转换方法的文章，具体取决于您想要接受的近似值：[http ://en.wikipedia.org/wiki/Geographical_distance](http://en.wikipedia.org/wiki/Geographical_distance)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T19:54:00.760

好吧，你不能。

无论如何，不​​仅仅是通过自行排序纬度/经度。:)

您将需要一个包含与您当前位置的距离的属性。您可以通过添加一个根据需要计算的瞬态属性或创建另一个具有距离的数组来做到这一点（可能更容易）。

要计算您与当前位置的距离，请使用以下方法：

```
CLLocation *currentLocation   = // You said that you know how to get this.
CLLocation *storedLocation    = [CLLocation initWithLatitude:object.latitude 
                                                   longitude:object.longitude];
/*
 * Calculate distance in meters
 * Note that there is a bug in distanceFromLocation and it gives different
 * values depending on whether you are going TO or FROM a location. 
 * The correct distance is the average of the two:
 */
CLLocationDistance *distance1 = [currentLocation distanceFromLocation:storedLocation];
CLLocationDistance *distance2 = [storedLocation distanceFromLocation:currentLocation];
CLLocationDistance *distance  = distance1 / 2 + distance2 / 2; 
```

# javascript - 在每个页面加载时运行我的脚本，*包括* AJAX 页面加载？

> ID：10776645
> 
> 赞同：1
> 
> 时间：2012-05-27T19:30:02.023
> 
> 标签：javascript, greasemonkey, delay, pageload

我想延迟特定网页的页面加载时间 - 在这种情况下是谷歌 - 以便用户在倒数计时器完成之前看不到网页。

这个问题受到[xkcd](http://xkcd.com/862/)的启发，类似的问题是[“Javascript page load delay of specific set of pages”](https://stackoverflow.com/questions/5043263/javascript-page-load-delay-of-specific-set-of-pages)。

我尝试了 Jonathan 的 Greasemonkey 脚本的修改版本（见下文），但该脚本仅在第一次在特定选项卡中使用 Google 时延迟 Google 页面加载。

如果 Google 在新选项卡中打开，或者用户点击 Google 的链接然后返回，则脚本会再次启动。但是，如果用户从未离开过 Google（例如，他们在每个搜索结果下的简短摘要中找到了他们正在寻找的答案，然后只搜索其他内容），他们就可以毫不拖延地进行搜索。

有没有办法在每次搜索后强制显示延迟屏幕（而不是在每次访问页面后）？-- 最好使用 Greasemonkey 或 Chrome 插件？

当前使用的脚本：（
首先将阻止的地址设置为“1”，将所有其他地址设置为“0”，然后，如果 block>0，则脚本启动...）

```
(function(){
    // Note: This doesn't actually stop the page from loading, but hides it, so you know its 
    // there, waiting; The dopamine of internet candy becomes a torture.  Better to clean 
    // your room or open an irb prompt instead.
    window.seconds = 30;

    function resetCountDown()
    {
        seconds = 30;
    }

    // You can has cybersauce
    window.clearDelay = function()
    {
        document.getElementById('eightSixTwoDelay').style.display = 'none';
    }

    var overlay = document.createElement('div');
    overlay.id = 'eightSixTwoDelay';
    overlay.style.backgroundColor = '#000';
    overlay.style.color = '#FFF';
    overlay.style.fontSize = '56px';
    overlay.style.fontFamily = 'Helvetica, Arial, Sans';
    overlay.style.fontWeight = 'bold';
    overlay.style.textDecoration = 'none';
    overlay.style.position = 'absolute';
    overlay.style.top = '0px';
    overlay.style.left = '0px';
    overlay.style.width = '100%';
    // clientHeight changes as content loads, and JS, like the PHX Valley Metro system, does not wait for you to run.
    overlay.style.height = document.body.clientHeight + 'px'; //'100%'; 
    overlay.style.paddingTop = '10px';
    overlay.style.paddingLeft = '10px';
    overlay.style.textAlign = 'left';
    overlay.style.zIndex = '10000'; // OVER 9000

    overlay.addEventListener("click", resetCountDown, true); // THERE IS NO ESCAPE

    document.getElementsByTagName('body')[0].appendChild(overlay);

    window.displayDelay = function()
    {
        if (seconds > -1)
        {
            document.getElementById('eightSixTwoDelay').innerHTML = 'Page ready in ' + seconds + ' seconds.';
            seconds -= 1;
            setTimeout(window.displayDelay, 1000);
        }
        else
        {
            clearDelay();
        }
    }

    window.onload = displayDelay();

})();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T23:37:00.280

输入新搜索时，Google 会礼貌地更改 URL，并在新页面中进行 AJAXing。因此，请侦听该`hashchange`事件以确定何时运行新搜索。

关于该脚本的一些随机注释：

1.  使用`@run-at document-start`以使消隐尽快开始。
2.  覆盖应该是`position: fixed;`.
3.  避免设置全局或`window.`范围变量，AMAP。

这是一个完整的脚本，可以在每次新的 Google 搜索时将页面空白：

```
// ==UserScript==
// @name        _Delay a page display, a la XKCD
// @namespace   _pc
// @match       http://*.google.com/*
// @run-at      document-start
// ==/UserScript==

/*--- Blank the screen as soon as the DOM is available, and also whenever
    the URL (hashtag) changes -- which happens when "new" pages are loaded
    via AJAX.
*/
window.addEventListener ("readystatechange",    FireWhenReady,          true);
window.addEventListener ("hashchange",          blankScreenForA_While,  true);

function FireWhenReady () {
    this.fired  = this.fired || false;

    if (    document.readyState != "uninitialized"
        &&  document.readyState != "loading"
        &&  ! this.fired
    ) {
        this.fired  = true;
        blankScreenForA_While ();
    }
}

function blankScreenForA_While () {
    /*  Note: This doesn't actually stop the page from loading, but hides it,
        so you know its there, waiting; The dopamine of internet candy becomes
        a torture.
        Better to clean your room or open an irb prompt instead.
    */
    //--- Settings:
    var pageDelaySeconds    = 5;
    var overlayID           = "gmEightSixTwoDelay"

    //--- One-time setup, for each new "page", START:
    function resetCountDown () {
        blankScreenForA_While.secondsRemaining  = pageDelaySeconds;
    }
    resetCountDown ();

    function createOverlay () {
        var overlay                 = document.getElementById (overlayID);
        if (overlay) {
            overlay.style.display   = 'block';  // Un-hide.
            return;
        }
        overlay                     = document.createElement ('div');
        overlay.id                  = overlayID;
        overlay.style.cssText       = "                                 \
            font:                   bold 56px Helvetica,Arial,Sans;     \
            text-decoration:        none;                               \
            position:               fixed;                              \
            top:                    0;                                  \
            left:                   0;                                  \
            width:                  100%;                               \
            height:                 100%;                               \
            z-index:                10000;  /* OVER 9000 */             \
            margin:                 0;                                  \
            overflow:               hidden;                             \
            color:                  pink;                               \
            background:             lime;                               \
            line-height:            1.5;                                \
            padding:                1em;                                \
            text-align:             center;                             \
        ";

        //--- Only use innerHTML the one time.
        overlay.innerHTML           = 'Go do something important!<br>'
                                    + 'Page ready in <span></span> seconds.'
                                    ;

        // THERE IS NO ESCAPE.
        overlay.addEventListener( "click", resetCountDown, true);

        document.body.appendChild (overlay);
    }
    createOverlay ();

    //--- One-time setup, for each new "page", :END

    // You can has cybersauce
    function clearDelay () {
        document.getElementById (overlayID).style.display = 'none';
    }

    function displayDelay () {
        if (blankScreenForA_While.secondsRemaining > -1) {
            var displaySpan         = document.querySelector (
                                        "#" + overlayID + " span"
                                    );
            displaySpan.textContent = blankScreenForA_While.secondsRemaining;

            blankScreenForA_While.secondsRemaining--;
            setTimeout (displayDelay, 1000);
        }
        else {
            clearDelay ();
        }
    }
    displayDelay ();

}//-- End of: blankScreenForA_While() 
```

# php - 如何从目录中获取所有文件，然后将它们变成 javascript 函数？

> ID：10776649
> 
> 赞同：0
> 
> 时间：2012-05-27T19:30:59.800
> 
> 标签：php, javascript

对于我现在正在处理的项目，我必须手动添加功能来播放这样的歌曲

```
function song(){
    mySong.src="song1.mp3";
    mySong.play();
    document.getElementById("p2").innerHTML="Now Playing:Song1";
} 
```

但是我希望能够用 php 搜索目录，并从 php 生成那些函数，所以我不必手动添加每首歌曲。这是我的测试代码，我知道我做错了，但我似乎做错了！

```
<?php
Header("content-type: application/x-javascript");
if ($handle = opendir('/wamp/www/songs/')) {
    while (false !== ($entry = readdir($handle))) {
        if ($entry != "." && $entry != "..") {
            echo 'function $entry(){mySong.src=$entry; mySong.play();       
            document.getElementById("p2").innerHTML="Now Playing:" $entry;}';
            echo "$entry";
        }
    }
    closedir($handle);
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T19:42:51.683

~~在您的页面中定义 JS 函数，并带有歌曲来源的参数：~~

 ~~```
function song(entry){
    mySong.src=entry;
    mySong.play();
    document.getElementById("p2").innerHTML="Now Playing: " + entry;
} 
```~~ 

在您的 PHP 中，您很可能希望回显一个链接来播放该文件夹中的每首歌曲，对吧？
做这个：

```
<?php
//Header("content-type: application/x-javascript");
if ($handle = opendir('/wamp/www/songs/')) {
    while (false !== ($entry = readdir($handle))) {
        if ($entry != "." && $entry != "..") {
            echo '<a href="javascript:void(0)" onclick="song(\'' . $entry . '\')">' . $entry . '</a><br />';
        }
    }
    closedir($handle);
}
?> 
```

~~请注意，这将显示带有扩展名的文件路径名，为了更好地显示，您只需使用 php/js `substr`/`substring`和`explode`/进行一些字符串操作`split`。~~

好的，我重写了代码以使用您给定的示例：

**JS**（头）

```
function song(entry){
    var mySong=document.getElementById("song1");
    mySong.src=entry;
    mySong.play();
    document.getElementById("p2").innerHTML="Now Playing: " + entry;
} 
```

**PHP + HTML**（正文）

```
<?php
//Header("content-type: application/x-javascript");
$path = '/wamp/www/songs/';
if ($handle = opendir($path)) {
    while (false !== ($entry = readdir($handle))) {
        if ($entry != "." && $entry != "..") {
            echo '<a href="javascript:void(0)" onclick="song(\'' . $path . $entry . '\')">' . $entry . '</a><br />';
        }
    }
    closedir($handle);
}
?>
<p id="p2"></p>
<audio id="song1" controls="controls">
    <source src="" type="audio/mpeg" />
</audio> 
```

这适用于在支持 HTML5 的浏览器中播放的 mp3 文件。

请注意，Firefox 不支持在`<audio>`标签内播放 .mp3，请参阅：[为什么 Firefox 不支持 <audio> 中的 MP3 文件格式](https://stackoverflow.com/questions/4923136/why-doesnt-firefox-support-mp3-file-format-in-audio)

因此，此解决方案（使用您的`<audio>`）将仅在 Chrome 中提供令人满意的结果（未在 Opera 和 safari 上测试）。您可能希望回退到另一个解决方案以获得更高的兼容性。

如果你想兼容 IE 和 Firefox，你可以尝试使用`<embed>`：

**JS**

```
function song(entry){
    var mySong=document.createElement('embed');
    mySong.src=entry;
    mySong.width='250px';
    mySong.height='60px';
    document.getElementById("song1").innerHTML= '';
    document.getElementById("song1").appendChild(mySong);
    document.getElementById("p2").innerHTML="Now Playing: " + entry;
} 
```

**PHP + HTML**

```
<?php
//Header("content-type: application/x-javascript");
$path = '/wamp/www/songs/';
if ($handle = opendir($path)) {
    while (false !== ($entry = readdir($handle))) {
        if ($entry != "." && $entry != "..") {
            echo '<a href="javascript:void(0)" onclick="song(\'' . $path . $entry . '\')">' . $entry . '</a><br />';
        }
    }
    closedir($handle);
}
?>
<p id="p2"></p>
<div id="song1"></div> 
```

这将有效地跨浏览器，但可能需要为 Firefox 安装插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T19:38:17.953

你的报价有问题。单引号不解析变量。另外，您在错误的地方引用了一些引号。

```
<?php
Header("content-type: application/x-javascript");
if ($handle = opendir('/wamp/www/songs/')) {
    while (false !== ($entry = readdir($handle))) {
        if ($entry != "." && $entry != "..") {
          echo "function $entry(){mySong.src='$entry';mySong.play();document.getElementById('p2').innerHTML='Now Playing: $entry';}";
        }
    }
    closedir($handle);
}
?> 
```

但是你会有另一个问题......你的歌曲可能不符合正确的功能名称......你将不得不重新考虑这个“每首歌的功能”的事情......

# apache-flex - Adobe Flex：从组件 MXML 中的主应用程序访问结果事件

> ID：10776650
> 
> 赞同：1
> 
> 时间：2012-05-27T19:31:00.350
> 
> 标签：apache-flex, mxml, xmllist

在我的主应用程序中，我有一个结果事件和一个`XMLList`，其中填充了我的结果。XMLList 在函数之外定义，如下所示：

```
public var testList:XMLList = new XMLList(); 
```

但是在我的结果处理程序中，它填充了来自结果的数据，并且工作正常。我需要创建一个包含列表的外部组件 MXML 文件，但在该组件文件中我无法从主应用程序访问 testList。

我已包含`xmlns:local="*"`在每个文件中，并且我的组件文件还具有以下导入：

```
import mx.collections.XMLListCollection;
import mx.controls.Alert;
import mx.core.Application;
import mx.events.FlexEvent;
import mx.rpc.events.ResultEvent; 
```

我不明白我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T20:13:14.290

您需要将其`testList`作为组件的属性传递。

**Main** - 您拥有来自结果事件和自定义组件的 testList。将 传递`testList`给您在组件中定义的属性，例如`data`：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx"
               xmlns:local="*">

    <fx:Script>
        <![CDATA[
            [Bindable]
            public var testList:XMLList = new XMLList();
        ]]>
    </fx:Script>

    <local:CustomComponent data="{testList}" />

</s:Application> 
```

**CustomComponent** - 从您创建的组件中，`testList`从属性访问 ，例如`data`在此示例中：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
         xmlns:s="library://ns.adobe.com/flex/spark"
         xmlns:mx="library://ns.adobe.com/flex/mx">

    <fx:Script>
        <![CDATA[
            [Bindable]
            public var data:XMLList;
        ]]>
    </fx:Script>

    <s:List dataProvider="{new XMLListCollection(data)}" />

</s:Group> 
```

# asp.net - 如何从 ASP.Net gridview 列字段链接到 .aspx 页面

> ID：10776655
> 
> 赞同：0
> 
> 时间：2012-05-27T19:32:31.520
> 
> 标签：asp.net, c#-4.0

我正在使用 asp.net gridview 来显示 mdb 文件中的数据列表。显示 5 列，大约有 240 行数据。每行显示“名字”、“姓氏”、“标题”、“类型”、“问题”和“id”。

每个“标题”条目都有对应的 .aspx 页。大约有 180 个实际的 .aspx 页面对应于网格中的“标题”条目。这种关系的一个例子是：title = "Once Upon a time in a long story"; aspx 页面可能是/alongstory.aspx。

我想要完成的事情：允许用户单击网格上的标题字段并打开相应的 .aspx 页面。

到目前为止我所做的：在“标题”字段上创建了一个 aspLabel - Text='<%#Eval("Title") %>'; 并为标签加载事件添加了 C# 代码：

```
 aspLabel l = sender as aspLabel;
    l.ClientsideEvents.Click = String.Format("function(s,e) {{window.location = \"{0}"; }}, GetPageUrl(l)); 
```

和 GetPageUrl：

```
 Private string GetPageUrl(aspLabel l)
     {GridViewDataItemTemplateContainer c = l.NamingContainer as GridViewDataItemTemplateContainer:
    var value = (string)DataBinder.Eval(c.DataItem, "Title"); 
    string result;
    switch (value) {
         case "in the mirror":
            result = "AnotherTitlePage.aspx";
            break;
        case "When your Eyes":
            result = "AnotherTitlePage2.aspx";
            break;
        case "Her Delivery":
            result = "ATitlePage1.aspx";
            break;
        case "You Never Know What You Might See":
            result = "TitlePage3.aspx";
            break;              
        default:
            result = "TitlePageDoesNotHavesameNameAsDBEntry.aspx";
            break;
    }
    return Page.ResolveUrl(result);
} 
```

虽然这可行，但它需要将所有标题连同对应的 url 硬编码到相应的 select 语句中，这相当于 240 个案例！此外，唯一标识每一行的字段是“id”值，它是一个整数 - 我在尝试为 int 设置 case select 并返回正确的 url 时遇到问题（问题是转换错误）。

我希望完成的工作：找到最有效的方法来打开单击网格视图的“标题”字段的相应 url，而无需将网格列中的字段名称和 url 硬编码到案例选择中。

那么，鉴于上述信息，案例选择是否是满足此要求的最佳方法？任何更好的方法的例子或建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T11:42:28.927

您必须使用 c# 4.0 及更高版本中引入的路由概念，而不是制作 180 个实际的 .aspx 页面。

在这里您可以动态生成 N 个页面，并且只有一个页面将用作模板。

请参阅以下链接了解更多详情

[asp.net 中的 URL 路由示例 www.jobdoor.in](http://www.codeproject.com/Articles/77199/URL-Routing-with-ASP-NET-4-0)

# html - 事件处理程序挂钩点和移动 Safari 突出显示框

> ID：10776656
> 
> 赞同：1
> 
> 时间：2012-05-27T19:32:37.353
> 
> 标签：html, css, mobile-safari, outline

我在容器 div 中有一组可点击的 div。我想在容器 div 上的单个处理程序中处理所有这些的单击事件。

但是，当单击内部 div 之一时，这会导致移动 safari 突出显示容器 div。

有没有办法维护单个事件处理程序并以某种方式告诉它要突出显示的正确子节点是什么？

# c# - 如何对最后 4 行数据执行聚合函数？

> ID：10776662
> 
> 赞同：1
> 
> 时间：2012-05-27T19:34:02.797
> 
> 标签：c#, sql, linq, aggregate-functions

我有一张以下型号的桌子。

```
public class WeeklyNums
{
   public int FranchiseId { get; set; }
   public DateTime WeekEnding { get; set; }
   public decimal Sales { get; set; }
} 
```

我需要第四列来计算本周和前三周的最小值。所以输出看起来像这样。

```
1   7-Jan   $1  
1   14-Jan  $2  
1   21-Jan  $3  
1   28-Jan  $4  **1**  
1   4-Feb   $4  **2**  
1   11-Feb  $6  **3**  
1   18-Feb  $4  **4**  
1   25-Feb  $8  **4**  
1   3-Mar   $7  **4** 
```

我什至不知道从哪里开始。即使在 SQL 中解决它的一些帮助也会有所帮助。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T19:42:20.573

考虑使用`outer apply`：

```
select  yt1.*
,       hist.four_week_min
from    YourTable yt1
outer apply
        (
        select  min(col1) as four_week_min
        from    YourTable yt2
        where   yt2.dt between dateadd(wk, -3, yt1.dt) and yt1.dt
        ) hist 
```

[SQL Fiddle](http://sqlfiddle.com/#!3/01764/4)的工作示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T20:10:57.087

```
var runningMins =   from weekNum in data
                    select new
                               {
                                   FranchiseId = weekNum.FranchiseId,
                                   WeekEnding = weekNum.WeekEnding,
                                   Sales = weekNum.Sales,
                                   LastThreeWeeks = data.OrderByDescending( x => x.WeekEnding )
                                        .Where( x => x.WeekEnding <= weekNum.WeekEnding )
                                        .Take( 4 )
                                        .Min( x => x.Sales )
                               }; 
```

SQL 查询将返回当前和前三个中的最小值，无论日期是否恰好相隔三周：

```
With RnkItems As 
  (
    Select DateVal, Sales
      , Row_Number() Over ( Order By DateVal ) As Rnk
    From SourceData
    )
Select *
  , (
    Select Min(Sales)
    From  RnkItems As R1
    Where R1.Rnk Between R.Rnk - 3 And R.Rnk
    )
From RnkItems R
Order By 1 
```

[SQL 小提琴版本](http://sqlfiddle.com/#!3/bb998/7)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T19:56:11.660

我知道我为时已晚，但这是 linq 版本：

```
var result = from w1 in db.Table
             from w2 in db.Table.Where(x => x.WeekEnding >= w1.WeekEnding.AddDays(-28))
             select new
             {
                 FranchiseId = w1.FranchiseId,
                 WeekEnding = w1.WeekEnding,
                 Sales = w1.Sales,
                 SalesMin = w2.Min(x => x.Sales)
             }; 
```

# php - 将日文字符传递给 PhP 文件

> ID：10776665
> 
> 赞同：-1
> 
> 时间：2012-05-27T19:34:23.093
> 
> 标签：php, encoding, utf-8

我做了一个简单的 PhP 程序

```
<?php

echo $_GET['ID'];
?> 
```

然后我打电话

```
http://localhost/testGetID/?ID=%E6%AD%A4%E5%8E%9F%E7%90%86%E6%98%AF%E5%9C%A8 
```

这就是我得到的：æ¤åŽŸç†æ~¯åœ¨</p>

我应该怎么做才能显示实际的汉字？顺便说一下，中文字符将是我的数据库的 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T19:38:40.623

你能试试这个吗？

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Test page</title>
</head>
Your php code/chinese characters go here.
<body>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T19:39:48.363

1.  将此行添加到您的`<head></head>`部分`<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />`

2.  用途`urldecode()`或`mb_convert_encoding()`功能

3.  对 ID 进行编码`base64_encode()`，然后对其进行解码`base64_decode()`

# c# - 如何对 ListBox 的元素应用函数？

> ID：10776666
> 
> 赞同：0
> 
> 时间：2012-05-27T19:34:33.640
> 
> 标签：c#, wpf

我有以下 XAML

```
<ListBox Name="feedListBox" Height="468" HorizontalAlignment="Left" Margin="20,100,0,0" VerticalAlignment="Top" Width="444" ScrollViewer.VerticalScrollBarVisibility="Auto" SelectionChanged="feedListBox_SelectionChanged"  DataContext="{Binding Source={StaticResource MyData}}">
   <ListBox.ItemTemplate>
         <DataTemplate>
              <StackPanel VerticalAlignment="Top">
                  <TextBlock TextDecorations="Underline" FontSize="24" Name="feedTitle" TextWrapping="Wrap" Margin="12,0,0,0" HorizontalAlignment="Left" Foreground="{StaticResource PhoneAccentBrush}" Text="{Binding Title.Text, Path=Arabic , Converter={StaticResource RssTextTrimmer}}"  />
                  <TextBlock Name="feedSummary" TextWrapping="Wrap" Margin="12,0,0,0" Text="{Binding Summary.Text, Converter={StaticResource RssTextTrimmer}}"  />
                  <TextBlock Name="feedPubDate" Foreground="{StaticResource PhoneSubtleBrush}" Margin="12,0,0,10" Text="{Binding PublishDate.DateTime}"  />
              </StackPanel>
         </DataTemplate>
   </ListBox.ItemTemplate>
</ListBox> 
```

现在我有这个对象

```
crAr = new Arabic.Controls.ArabicShape(); 
```

我想在 XAML 的每个元素上应用 DisplayArabic 方法，如下所示：

```
///// FeedTitle TextBlock
{TextBlock ELEMENT content} = crAr.DisplayArabic( {TextBlock ELEMENT content} );

///// FeedSummary TextBlock
{TextBlock ELEMENT content} = crAr.DisplayArabic( {TextBlock ELEMENT content} );

///// FeedPubDate TextBlock
{TextBlock ELEMENT content} = crAr.DisplayArabic( {TextBlock ELEMENT content} ); 
```

这怎么可能用 C# 编写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T03:02:59.730

试试这个[如何：绑定到方法](http://msdn.microsoft.com/en-us/library/aa348824.aspx)。

# objective-c - Xcode 不编译类

> ID：10776667
> 
> 赞同：0
> 
> 时间：2012-05-27T19:34:41.097
> 
> 标签：objective-c, xcode

我已经使用`File > New > Category`. 我注意到在 Xcode 中代码完成不起作用，即使我在类中添加垃圾，编译器也不会抱怨。

这是我的课：

```
#import "MyClass+Category.h"

@implementation MyClass (Category)

a
sdf
ads
f@asdlkfjhaslfäasdlföjölfasdf

@end 
```

该`.m`文件具有正确的目标成员资格并且处于`Compile Sources`构建阶段。出了什么问题。我也尝试重新启动 Xcode 无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T19:36:32.767

嗯，这很尴尬。我没有设置正确的目标，所以编译的是我的框架，而不是我正在编写的代码。

# api - 客户端会弄乱我的 API 吗？

> ID：10776672
> 
> 赞同：1
> 
> 时间：2012-05-27T19:35:28.040
> 
> 标签：api, rest, soap

我有一个围绕两个用户之间的交易的网站。每个用户都需要同意相同的条款。如果我想要一个 API，以便其他网站可以将其实现到他们自己的网站中，那么我想通过在两者之间包含更多字段或与我的应用程序无关的内容来确保其他网站不会弄乱该过程。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T19:53:40.900

如果我要实现这样的事情，我会允许其他网站使用将它们链接到我的网站的令牌/URL/小部件。因此，例如，网站 X 想使用我的服务来同意用户 A 和 B 的相同条款。他们的页面将有一个嵌入的表单/框架，该表单/框架将从我的网站生成，用户 B 还将收到一封电子邮件，其中包含指向我网站页面的链接（或网站 X 的页面，其中包含从我的服务器生成的表单/框架）。考虑不同的网站如何使用 eBay 来让用户付款。您在网站上购买了所有东西，但是当您付款时，您要么被带到 ebay 页面并在付款后返回，要么该网站有一个直接链接到 ebay 的小表格/框架。但这是我的解决方案，一种方法。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T19:42:39.800

这取决于您的 API 是如何实现的。构建一个可以从字面上获取任何类型数据的 API 或构建一个可以将附加的、命名的键/值对作为字段的 API 需要更多的工作、思考和工程。

如果您以这种方式实现了您的 API，那么该 API 的用户很可能会使用它来扩展功能或通过传递额外的数据来构建稍微不同的东西。

但是，如果您的 API 被构建为必须传递特定值并且这些字段是*必需*的，那么您的 API 很难以不同于您最初预期的方式使用。

例如，Google 有许多不同的 API 用于不同的目的，每个 API 都有非常特定数量的必需参数，开发人员必须使用这些参数才能成功发出 HTTP 请求。虽然这些 API 的目标是*允许*开发人员扩展功能，但它们确实只允许访问非常特定的数据片段。

最后，您可以使用身份验证来防止未经授权访问您的 API。具体的实现细节很大程度上取决于您使用的平台以及 API 的使用方式。例如，如果用户必须登录才能使用您的 API 提供的服务，那么一种 OAuth 形式就足够了。但是，如果其他服务器将使用您的 API，则授权必须在 HTTP 标头中进行。

有关 API 最佳实践的更多信息，请参阅[构建 API 时的 7 条经验法则](http://blog.programmableweb.com/2010/10/11/7-rules-of-thumb-when-you-build-an-api/)，以及来自 Google 工程师的幻灯片，标题为[如何设计好的 API 以及为何如此重要](http://lcsd05.cs.tamu.edu/slides/keynote.pdf)。

# machine-learning - 机器学习中使用的“相对绝对误差”和“根相对平方误差”的公式（由 Weka 计算）

> ID：10776673
> 
> 赞同：8
> 
> 时间：2012-05-27T19:35:29.783
> 
> 标签：machine-learning, data-mining, weka

在开源数据挖掘软件 Weka（用 Java 编写）中，当我运行一些数据挖掘算法时，如线性回归 Weka 返回模型和一些模型评估测试数据的指标。

它看起来像这样：

```
Correlation coefficient                  0.2978
Mean absolute error                     15.5995
Root mean squared error                 29.9002
Relative absolute error                 47.7508 %
Root relative squared error             72.2651 % 
```

“相对绝对误差”和“根相对平方误差”的公式是什么？我无法弄清楚。我想用这个指标来评估我自己在 Matlab 中的算法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T19:55:00.897

在[此](http://www.liacs.nl/home/joost/DM/mod_11_eval_lift_cost.ppt)演示文稿中，在幻灯片 22 中，并引用了 witten，以下是公式：

**相对绝对误差** ![绝对公式](../Images/5a326be1c0504e0cc9136583eb23c3de.png)

**根相对平方误差** ![公式相对](../Images/e4f569e04acde3071f997d4e5085476d.png)

和

*   实际目标值：a1 a2 … an
*   预测目标值：p1 p2 … pn

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T16:17:49.773

根相对平方误差的公式实际上是相对平方误差的公式。你需要取这个公式的平方根来得到 Weka 的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-20T11:14:20.040

在 Weka 书 Witten、Ian H.、Eibe Frank 和 Mark A. Hall 的第 177 页。“实用机器学习工具和技术。” Morgan Kaufmann (2005): 578，相对平方误差定义如下：

“这个错误是相对于如果使用一个简单的预测器会产生的。有问题的简单预测器只是**训练**数据中实际值的平均值。因此，相对平方误差采用总平方误差并通过除以默认预测器的总平方误差对其进行归一化。”</p>

这与 Weka 的实现是一致的。因此，需要**训练**集上目标的平均值来计算所有相对误差。

# google-maps - 为特定城市编制所有殖民地/社区的列表

> ID：10776674
> 
> 赞同：0
> 
> 时间：2012-05-27T19:35:32.627
> 
> 标签：google-maps, google-maps-api-3, google-places-api

我想要一些印度城市的所有可能的殖民地/社区的位置（坐标）列表。以德里为例。可以使用 Places API 获取这些数据吗？

我想到的唯一一件事就是使用这样的查询 -

```
https://maps.googleapis.com/maps/api/place/search/xml?location=28.540346,77.210026&radius=500&types=administrative_area_level_1|administrative_area_level_2|administrative_area_level_3|locality|neighborhood|street_address|sublocality|sublocality_level_4|sublocality_level_5|sublocality_level_3|sublocality_level_2|sublocality_level_1|subpremise&sensor=false&key=MYKEY 
```

然后不断改变半径500，直到覆盖整个城市。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T21:21:11.337

考虑到您需要为地图执行此操作的频率，因为缓存该数据违反了服务条款，所以这不是一个好方法。如果您的地图得到任何体面的使用，您将迅速达到您的配额。另外，您只能获得殖民地/社区的中心点。我建议您尝试找到可以下载的该数据的另一个来源。Places API 的设计并未考虑到这一点。

# android - 直接调用和不调用 LayoutInflater 有什么区别？

> ID：10776676
> 
> 赞同：9
> 
> 时间：2012-05-27T19:35:53.057
> 
> 标签：android, layout-inflater

我浏览了一些教程，在 Android Doc 中，它说在实例化它时不要直接访问 LayoutInflater。来自谷歌文档的示例：

```
LayoutInflater inflater = (LayoutInflater)context.getSystemService
  (Context.LAYOUT_INFLATER_SERVICE); 
```

我经历的教程是这个：

```
LayoutInflater inflater = LayoutInflater.from(parent.getContext()); 
```

所以我真的不明白除了明显不同的代码之外还有什么区别。任何解释都非常感谢。我认为 Android Doc 应该是我们遵循的那个，但我不确定它是否有所作为。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-27T19:43:50.777

如果您打开 Android 源代码，您会看到 LayoutInflator.from 方法如下所示：

```
/**
 * Obtains the LayoutInflater from the given context.
 */
public static LayoutInflater from(Context context) {
    LayoutInflater LayoutInflater =
            (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    if (LayoutInflater == null) {
        throw new AssertionError("LayoutInflater not found.");
    }
    return LayoutInflater;
} 
```

这意味着您问题中的两行代码做同样的事情。不确定您阅读的教程到底说了什么，但我看不出功能上有任何区别。使用该`from`方法很好，因为它需要更少的输入，就是这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T19:42:23.963

```
LayoutInflater inflater = (LayoutInflater)context.getSystemService
  (Context.LAYOUT_INFLATER_SERVICE); 
```

你`LayoutInflater Service Provider`从`System Manager`

```
LayoutInflater inflater = LayoutInflater.from(parent.getContext()); 
```

您正在使用`static`来自的方法`LayoutInflater Class`

我会说差异仅在于代码以及您如何编写此代码也调用堆栈但结果是相同的 - 您会得到`LayoutInflater`.

更多关于[这个](http://developer.android.com/reference/android/view/LayoutInflater.html)

问候

# string - 如何在bash中的正斜杠上拆分字符串

> ID：10776679
> 
> 赞同：24
> 
> 时间：2012-05-27T19:36:17.463
> 
> 标签：string, bash, split

示例字符串：

/gasg/字符串

预期结果 ：`string`

要删除的字符：“/”符号之间的所有字符，包括符号

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-27T19:41:49.560

与`sed`：

```
$ echo "/gasg/string" | sed -e 's/\/.*\///g'
string 
```

使用内置 bash 字符串操作：

```
$ s="/gag/string"
$ echo "${s##/*/}"
string 
```

您的字符串看起来与 Unix 路径名完全一样。这就是您也可以使用该`basename`实用程序的原因 - 它返回给定 Unix 路径名的最后一部分：

```
$ basename "/gag/string"
string
# It works with relative paths and spaces too:
$ basename "gag/fas das/string bla bla"
string bla bla 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-05-27T20:00:13.460

也 awk - 使用斜杠作为分隔符并打印最后一个字段

```
echo "/gas/string" | awk -F/ '{print $NF}' 
```

或剪切 - 但这只有在您有相同数量的目录要剥离时才有效

```
echo "/gasg/string" |cut -d/ -f 3 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-28T01:41:04.880

你可以使用 bash 字符串操作

```
a='/gasg/string'
echo ${a##*/} 
```

# verilog - 如何摆脱关于 LVDS 补码引脚的钳工警告？

> ID：10776680
> 
> 赞同：1
> 
> 时间：2012-05-27T19:36:28.523
> 
> 标签：verilog, intel-fpga

我有一个时钟输入到扇出缓冲器，它将 LVDS 输入驱动到 PLL 输入的底部边缘。有两个引脚 - `AJ19`（高电平有效）和一个互补`AK19`引脚（低电平有效）。我只对 感兴趣`AJ19`，所以我的顶级模块如下所示：

```
module top(clk, ...);
...
endmodule 
```

这是我的引脚分配`clk`：

```
set_instance_assignment -name IO_STANDARD LVDS -to clk
set_location_assignment PIN_AJ19 -to clk
set_location_assignment PIN_AK19 -to "clk(n)" 
```

到目前为止一切顺利，但 fitter 正在生成一个非常烦人的警告，让我发疯：

```
Warning (15714): Some pins have incomplete I/O assignments. Refer to the I/O Assignment Warnings report for details
Warning (176674): Following 1 pins are differential I/O pins but do not have their complement pins. Hence, the Fitter automatically created the complement pins.
    Warning (176118): Pin "clk" is a differential I/O pin but does not have its complement pin. Hence, fitter automatically created the complement pin "clk(n)" 
```

Altera 的知识库建议将时钟实际定义为一对（即`input wire [1:0] clk`）以消除警告。这并没有多大帮助，因为你会收到另一个警告，说输入引脚不驱动任何逻辑。

我尝试使用禁用此警告`// altera message_off 176118`。这会导致错误，因为“176118”不是有效的消息 ID。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:22:20.013

参见 Altera “Designing with Low-Level Primitives User Guide”了解原始细节和模板 [http://www.altera.co.uk/literature/ug/ug_low_level.pdf](http://www.altera.co.uk/literature/ug/ug_low_level.pdf)

包装顶级块的示例：

```
module top_wrap (
    ...
    input wire refclk,  input wire refclk_n,
  );

    // differential input buffers
  wire int_refclk;
  ALT_INBUF_DIFF inbuf_refclk (
    .i (refclk),
    .ibar (refclk_n),
    .o(int_refclk),
  );

  top wrapped (
      .refclk( int_refclk),
      ...
  )
endmodule 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T14:19:13.950

为了摆脱这种情况，您需要创建这两个信号，然后将它们放入一个 LVDS 缓冲器组件（我不记得 Altera 在我的脑海中将这个组件称为什么），其输出将驱动一个“正常" 内部信号，然后您可以根据需要使用该信号。

# ruby - Ruby 访问其他对象的实例变量

> ID：10776683
> 
> 赞同：0
> 
> 时间：2012-05-27T19:36:44.717
> 
> 标签：ruby

我一直在搞乱Ruby（Ruby 1.9.3，IRB 0.9.6（09/06/30）），我正在尝试开发一个复数类。我的`initialize`and`to_s`方法工作正常。我现在正试图重载四个算术运算符。

我所拥有的是以下内容：

```
def +(other)
    return ComplexNumber.new(@real + other.@real, @imag + other.@imag)
end 
```

但由于某种原因它不喜欢`other.@real`；它说

> 语法错误：意外的 tIVAR

并指向 . 后面的逗号`other.@real`。

于是我把它改成了：

```
def get_values
    return [@real, @imag]
end

def +(other)
    other_values = other.get_values
    return ComplexNumber.new(@real + other_values[0], @imag + other_values[1])
end 
```

虽然这可行，但我觉得这不是正确的方法。我真的不想公开该`get_values`方法；难道没有某种方法可以访问同一类的另一个实例的变量吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T19:46:00.233

最好的方法（在我看来）是提供对变量的只读访问权限`real`并`imag`使用`attr_reader`. 喜欢：

```
class ComplexNumber
  attr_reader :imag, :real
  ...
  def +(other)
    return ComplexNumber.new(@real + other.real, @imag + other.imag)
  end
end 
```

请注意， attr_reader 代表您定义方法，`.real()`并且`.imag()`[`attr_accessor`还定义`.real=()`和`.image=()`]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T19:39:38.477

实例变量`@`在引用另一个实例时无需使用：

```
other.real 
```

（假设您正在使用`attr_accessor`来定义它们，或者正在提供自己的访问器。即使在同一个实例中，您也可能更喜欢使用访问器，以防除了简单地返回实例变量之外还有其他逻辑。）

# perl - 剔除下限和上限之外的所有值的内置方法，perl 数组

> ID：10776690
> 
> 赞同：3
> 
> 时间：2012-05-27T19:37:57.600
> 
> 标签：perl

我在 perl 中有一个数组，其中包含排序的非连续值。例如：`1 2 3 5 7 11 13 15`。

我想删除所有在 and 之外的值，`lower`并在返回的选择中`upper`保留`lower`and 。`upper`我这样做的方法看起来像这样（可能可以通过使用来改进`slice`）：

```
my @culledArray;
for ( my $i = 0; $i < scalar(@array); $i++ ) { 
    if ( ( $array[$i] <= $_[1] ) and ( $array[$i] >= $_[0] ) ) { 
       push(@culledArray, $array[$i]);
    }
} 
```

其中`lower`和`upper`分别包含在`$_[0]`和`$_[1]`中。有没有内置的 perl 可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T19:48:33.027

不知道任何内置的东西可以做到这一点（这是一个非常具体的要求），但你可以通过使用来节省一些打字`grep`：

```
my @culledArray = grep {( $_ <= $_[1] ) and ( $_ >= $_[0] )} @array; 
```

如果列表很长并且您不想复制它，那么查找开始和结束索引并使用[切片](http://perldoc.perl.org/perldata.html#Slices)可能会很有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T22:07:38.730

这很混乱，但我的单元测试通过了，所以它似乎有效。`@array`根据排序列表和的事实，获取下索引和上索引，`$_[0] >= $_[1]`然后创建`@culledArray`from `@array[$lower..$upper]`：

```
my @culledArray;
my $index = 0;
++$index until $array[$index] >= $_[0];
my $lowerIndex = $index;
while (($array[$index] <= $_[1]) and ($index < $#array)) { ++$index; }
my $upperIndex = $index;

@culledArray = @array[$lowerIndex .. $upperIndex];
return \@culledArray; 
```

我很想知道这个与[Mat 给出的答案](https://stackoverflow.com/a/10776755/1084945)的效率。我几乎可以肯定我不一定要遍历整个`@array`（因为我从 index of 遍历`0`直到找到`$upperIndex`. 我不确定`grep`链接答案中的方法是如何工作的，或者如何在上面`perl`实现切片`@array`to`@culledArray`代码，虽然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T13:48:27.173

看起来您可能正在使用百分位数或分位数？如果是这样，那么[`Statistics::Descriptive`](https://metacpan.org/module/Statistics%3a%3aDescriptive)可能会有所帮助。

该`percentile`方法返回该百分位数的值和索引，因此您可以使用如下代码

```
use strict;
use warnings;

use Statistics::Descriptive;

my @data = qw/ 1 2 3 5 7 11 13 15 /;

my $stat = Statistics::Descriptive::Full->new;
$stat->add_data(@data);
my ($d25, $i25) = $stat->percentile(25);
my ($d75, $i75) = $stat->percentile(75);

my @subset = ($stat->get_data)[$i25 .. $i75];

print "@subset\n"; 
```

**输出**

```
2 3 5 7 11 
```

# javascript - 重新排列 javascript 对象

> ID：10776697
> 
> 赞同：1
> 
> 时间：2012-05-27T19:39:26.253
> 
> 标签：javascript

我有一个深度最多为 3 的对象：

```
OBJ.T.V.E={...} 
```

T 和 V 是整数（如 OBJ[0][1]['String']={...} ），因此典型的结构可能是：

```
OBJ[0][0]['S1']={..}
OBJ[0][0]['S2']={..}
OBJ[0][1]['S1']={..}
OBJ[0][2]['S1']={..} 
```

我想重新排列并以某种方式得到这个：

```
OBJNEW['S1'][0][0]={...} 
```

这将具有与 in 相同的值`OBJ[0][0]['S1']`

我挣扎了几个小时没有运气。有任何想法吗？也欢迎使用 Jquery 代码。

**编辑**：现在我尝试创建一个这样的对象数组：

```
OBJ2=[];
$.each(OBJ, function(name, value) {
  $(value).each(OBJ, function(name1, value1) {
    OBJ2[name1]=[];
    $(value1).each(OBJ, function(name2, value2) {
      OBJ2[name1][name2]={};
      OBJ2[name1][name2]['S1']={};
    })
  }) 
```

但是这一步失败了，因为每个 ...['S1'] 赋值都会覆盖前一个对象（例如 S2）。

请忽略任何错别字，我刚刚重新创建了逻辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T20:05:08.170

这应该会让你走得很远，除非我误解了。

```
function flipObject(o) {
  var i1, i2, i3, result = {};

  for ( i1 in o ) {
    if ( o.hasOwnProperty(i1) ) {
      for ( i2 in o[i1] ) {
        if ( o[i1].hasOwnProperty(i2) ) {
          for ( i3 in o[i1][i2] ) {
            if ( o[i1][i2].hasOwnProperty(i3) ) {
              if ( !(i3 in result) ) result[i3] = {};
              if ( !(i1 in result[i3]) ) result[i3][i1] = {};
              result[i3][i1][i2] = o[i1][i2][i3];
            }
          }
        }
      }
    }
  }
  return result;
} 
```

事实证明

```
{
    "0": {
        "0": {
            "s1": "s1.0.0",
            "s2": "s2.0.0"
        },
        "1": {
            "s1": "s1.0.1",
            "s2": "s2.0.1"
        }
    },
    "1": {
        "0": {
            "s1": "s1.1.0",
            "s2": "s2.1.0"
        },
        "1": {
            "s1": "s1.1.1",
            "s2": "s2.1.1"
        }
    }
} 
```

进入

```
{
    "s1": {
        "0": {
            "0": "s1.0.0",
            "1": "s1.0.1"
        },
        "1": {
            "0": "s1.1.0",
            "1": "s1.1.1"
        }
    },
    "s2": {
        "0": {
            "0": "s2.0.0",
            "1": "s2.0.1"
        },
        "1": {
            "0": "s2.1.0",
            "1": "s2.1.1"
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T20:05:58.147

原始代码中的一些问题是您不能将普通数组`[]`用作关联数组`{}`。字符串键只能在关联数组中使用。下一个问题是您可以并且应该迭代所有字符串键，而不是尝试对它们进行硬编码。

您可以做的最简单的事情是为原始对象层次结构的每个级别编写`for`/`in`循环，然后在将它们写入新对象时翻转分配。您还必须检查父键是否存在，如果不存在，请创建它们。

```
var NEWOBJ = {};

for (var outerKey in OBJ) {
  for (var innerKey in OBJ[outerKey]) {
    for (var stringKey in OBJ[outerKey][innerKey]) {
      NEWOBJ[stringKey] = NEWOBJ[stringKey] || {};
      NEWOBJ[stringKey][outerKey] = NEWOBJ[stringKey][outerKey] || {};
      NEWOBJ[stringKey][outerKey][innerKey] = OBJ[outerKey][innerKey][stringKey];
    }
  }
}

console.log(NEWOBJ);​ 
```

据我所知，jQuery 在这方面对你帮助不大。它确实并不比完成同样事情的原生 Javascript 简单得多。

请注意，这不会对您正在移动的对象进行深层复制。我相信如果你改变对象`NEWOBJ`，它们也会被改变`OBJ`。我认为一般很难解决这个问题，您可能不得不为每种对象类型求助于自定义复制对象。

另请注意，我不是 Javascript 专家。我知道在迭代对象中`hasOwnProperty`可以解决的属性时有时会出现问题，这些问题可能会在这样的示例中蔓延。不过，我不知道这些问题是什么。例如，我用一个简单的 JSON 对象尝试了这段代码，它工作了:)

[http://jsfiddle.net/e9uST/](http://jsfiddle.net/e9uST/) - 使用浏览器中的 Javascript 控制台查看输出。

# java - 3D 体素角度平面

> ID：10776704
> 
> 赞同：1
> 
> 时间：2012-05-27T19:40:55.323
> 
> 标签：java, algorithm, voxel

我正在尝试从体素中绘制一个平面，目标是填充它，但我遇到了很多麻烦。我尝试的一切都会导致表面出现孔洞。表面有 4 个角，但我也希望能够对三角形使用相同的方法。

这是我尝试过的：

*   从平行的一侧拉到另一侧
*   仅沿平面的一侧在一个方向（z 方向）上绘制

我在 2 上取得了最大的成功，但是当我在飞机上添加任何俯仰或滚动（存在任何高度）时它失败了。

有小费吗？没有代码，因为我确信我的实现都是正确的，只是算法的选择是错误的。

编辑：

附带说明一下，虽然 2 号的孔较少，但平面变形并且看起来不平坦。

编辑2：

我坚持我的第一个决定，但现在的问题是，我如何检测何时会有漏洞？通过观察，我注意到每个平面的孔数量相同，无论俯仰和滚动如何。Yaw是这里的罪魁祸首。

编辑3：

我把这个问题留了下来，但我决定只测试附近的一个街区，看看它是否是空的。我不想这样做，但是是的。如果您有更优雅的解决方案，我会全力以赴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T22:33:00.430

平面是无限的，没有角。你说的是四边形吗？它有方角吗？

对于多边形，我当然会从三角形开始，因为您可以用三角形构造任何其他多边形，而不是相反。

然后，填充三角形的一个好的开始可能是对是否应该填充给定的体素进行准确的测试。[这](http://www.blackpawn.com/texts/pointinpoly/default.html)是两个不同的三角点测试的示例。

之后，您可以以不同的方式进行操作。例如，虽然不是最有效的，但您可以从中心区域增长，测试每个相邻体素并使用堆栈递归。

# ruby-on-rails - Rails FriendlyId 和 normalize_friendly_id

> ID：10776706
> 
> 赞同：6
> 
> 时间：2012-05-27T19:40:56.257
> 
> 标签：ruby-on-rails, friendly-id

试图让我的应用程序运行[FriendlyId gem（版本 4.0.1）](https://github.com/norman/friendly_id)

我认为我这样做的顺序错误，但我想在创建新记录时生成[friendly_id slug](http://rubydoc.info/github/norman/friendly_id/master/FriendlyId/Slugged#normalize_friendly_id-instance_method)*之前去掉撇号。*但是我认为在已经生成 id 之后调用了**normalize_friend_id方法。**

 **我已将以下内容添加到我的模型中：

```
class Team < ActiveRecord::Base
  extend FriendlyId
  friendly_id :name, :use => :slugged

  def normalize_friendly_id(string)
    super.gsub("\'", "")
  end

end 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-07T13:00:05.680

`super`首先调用超类，这意味着正在生成友好的 id，然后您在该结果上运行 gsub。您真正想要的是完全覆盖此方法。

参考：[https ://github.com/norman/friendly_id/blob/master/lib/friendly_id/slugged.rb#L244-246](https://github.com/norman/friendly_id/blob/master/lib/friendly_id/slugged.rb#L244-246)

您的代码应如下所示：

```
def normalize_friendly_id(string)
  string.to_s.gsub("\'", "").parameterize
end 
```

或者

```
def normalize_friendly_id(string)
  super(string.to_s.gsub("\'", ""))
end 
```

希望有帮助**

# android - android 4（ICS）WebView中表单元素的错误焦点区域

> ID：10776708
> 
> 赞同：2
> 
> 时间：2012-05-27T19:41:17.943
> 
> 标签：android, html, webview, android-4.0-ice-cream-sandwich, right-to-left

**我在从右到左**的html 页面中有一个表单，我有一个`WebView`显示它的表单。当我准确点击页面的 Html 输入字段时，它们无法获得焦点，但是当我尝试点击正确区域旁边的某个位置时，它会变成焦点。我的问题发生在手机处于纵向模式时，而我没有在横向模式下面对它。

以下是上述问题的屏幕截图：
![人像模式](../Images/e66e4c99364b639807c8f260eabcf2b4.png)
![横向模式](../Images/8e90a6bf8b826a9bfb4ae98cc5f8bff5.png)
任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:18:58.403

**将具有rtl**值的**dir**属性添加到**html**或**body**标签引起的问题。 您的**html**或**正文**不应包含以下内容：

 ******```
dir="rtl" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T15:04:22.480

根据 W3C 规范，[http://www.w3.org/TR/html401/struct/dirlang.html](http://www.w3.org/TR/html401/struct/dirlang.html)可以将 dir 属性添加到 html 元素中，所以我不确定是不是这样

> 要为整个文档设置基本文本方向，请在 HTML 元素上设置 dir 属性。

我还看到了一些与 Android 浏览器的 RTL 行为有关的奇怪问题（它在桌面上运行良好）。******

# php - 重写 URL - 2 变量而不改变当前重写

> ID：10776712
> 
> 赞同：0
> 
> 时间：2012-05-27T19:42:05.923
> 
> 标签：php, apache, mod-rewrite

我已经完成了我需要进行的大部分重写，但我无法让第二部分使用 2 个变量，这是我的代码：

```
 RewriteEngine On
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ entity.php?vanityName=$1 [L]

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^([^/]*)/([^/]*)$ /entity.php?vanityName=$1&section=$2 [L] 
```

最后一点需要允许，例如[http://example.com/vanityName/Section](http://example.com/vanityName/Section)但是它不传递 section 变量。如何在保留当前重写的同时解决此问题？

我怎样才能得到它以便它适用于 /vanityName、/vanityName/section，但允许我保持其他目录免于重写，如 /includes/？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T20:29:07.150

您可以为不想重写的每个目录添加额外的规则：

```
RewriteRule directoryName/? - [L] 
```

如果在 之后直接写这些规则`RewriteBase /`，则不会检查其他规则。

# javascript - Mongoose 不会从预先存在的数据库 node.js 中检索数据

> ID：10776724
> 
> 赞同：0
> 
> 时间：2012-05-27T19:43:02.430
> 
> 标签：javascript, node.js, mongodb, mongoose, mocha.js

我已经尽我所能尝试了，我在谷歌上搜索并找到了一些示例，我尝试了这些示例，但没有任何乐趣。我现在真的被困住了。所以，我的 Mac 上有 mongodb，我通过 brew 安装了它。进展顺利。我通过“mongod”启动服务器，它也很顺利。我在 mongo interactive 上插入了一些数据，当我检索数据时，您可以在下面看到这些数据。我有数据库名称“test”和集合“test”

```
 > db.test.find()
{ "_id" : ObjectId("4fc27535a36ea778dd6cbdf4"), "a" : "1" }
{ "_id" : ObjectId("4fc27557a36ea778dd6cbdf5"), "Ich" : "I" } 

```

现在，当我用这段代码用 mongoose 创建一个简单的 mocha 测试时。

```
 var Vocabulary = function() {

    function get(german_vocab) {
        var mongoose = require("mongoose");
        mongoose.connect('mongodb://localhost:27017/test');
        mongoose.connection.on("open", function(){
          console.log("mongodb is connected!!");
        });

        mongoose.connection.db.collection("test", function (err, collection) {
            collection.find().toArray(function(err, results) {
                console.log(results);
            });
        });
    }

    return {
        get : get
    };
}

module.exports = Vocabulary; 

```

这是我的摩卡咖啡测试

```
 var should = require('should');
var Vocabulary = require('../modules/vocabulary');

describe("Vocabulary", function() {
    it("should get a translation of Ich", function() {
        var vocabulary = Vocabulary();
        vocabulary.get("Ich");
    });
}); 

```

这就是我从摩卡得到的

```
 Vocabulary
    ✓ should get a translation of Ich (161ms)

  ✔ 1 test complete (163ms) 

```

如您所见，它永远不会打印“mongodb is connected！” 在 find() 方法上它也不会打印任何东西。

请帮帮我。太感谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T00:17:41.330

我认为基本问题是您试图对异步活动采取同步方法。例如：

1.  在您获得“打开”事件回调之前，您与数据库的猫鼬连接实际上并未打开。
2.  您的`get`方法应该在传递给函数的回调中返回结果。
3.  您的 mocha 测试应该使用异步样式，您可以在其中调用在测试完成时`done`传递到`it`回调中的函数参数。

# java - 将方程绘制到笛卡尔平面

> ID：10776728
> 
> 赞同：1
> 
> 时间：2012-05-27T19:43:59.093
> 
> 标签：java, graph, plot, 2d, equation

我正在尝试将两个变量方程绘制到笛卡尔平面。这是我的问题，在下面的代码中，如果我注释掉一个 for 循环并让另一个运行，则图形的图（x 的负边或正边）是正确的，但如果我同时运行两个 for 循环，它们似乎会改变每个其他和图表出来是错误的。我已经尝试了 for 循环的每一种组合，向前循环，向后循环，似乎没有什么可以解决它。

我注释掉了这些循环在类“公共类 DrawingComponent 扩展 JComponent”的末尾的位置，它说“// 如果每个循环都独立运行，这两个循环工作正常”

```
public class GraphingCalc extends JFrame {

    private static final int FRAME_WIDTH = 450;
    private static final int FRAME_HEIGHT = 400;

    private static final double INITIAL_BALANCE = 1000;

    private JLabel rateLabel;
    private JTextField rateField;
    public JButton button ;
    private JLabel resultLabel;

    private JPanel basePanel;
    private JPanel topPanel; // will contain rateLabel, rateField, and buton
    private JPanel bottomPanel; // will contain drawingComponent 

    JComponent drawingComponent;

    Rectangle box;
    //////////////////////////////
    Graph graphObj;
    double xCoord; 
    int yCoord_size;
    double xRate;
    double[] yCoord;
    //////////////////////////////

    public GraphingCalc() {

        createTextField();

        drawingComponent = new DrawingComponent();      
        box = new Rectangle(100, 100, 20, 30);
        graphObj = new Graph();
        xCoord = 0;

        yCoord_size = 400;
        xRate = 0.101;

        yCoord = new double[yCoord_size];

        createButton();

        createPanel();

        setSize(FRAME_WIDTH, FRAME_HEIGHT);
    }

    private void createTextField() {

        rateLabel = new JLabel("Equation: ");

        final int FIELD_WIDTH = 10;
        rateField = new JTextField(FIELD_WIDTH);

    }

public void createButton() {

        button = new JButton("Plot");

         class AddInterestListener implements ActionListener {

            public void actionPerformed(ActionEvent event) {

                if(event.getSource() == button) {

                    //System.out.println("Boo");
                    graphObj.setEq(rateField.getText());

                }
                else {

                }

                //yCoord = Arrays.copyOf(graphObj.setY(), 10);
                yCoord = graphObj.getY(drawingComponent.getSize().width);

                //for(int i=0; i<10; i++)
                    //System.out.println("yCoord: " + yCoord[i] +"\n");

                revalidate();
                repaint();

            }
        }
        ActionListener listener = new AddInterestListener();
        button.addActionListener(listener);
    } 

public class DrawingComponent extends JComponent {

    public void paintComponent(Graphics g) {

            //////////////////////////
            // int scale 
            // multiply coord values by this
            // scale
            /////////////////////////
            Graphics2D g2 = (Graphics2D) g;

            g2.setStroke(new BasicStroke(1f));
            //g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            int drawArea_width = getSize().width;
            int drawArea_height = getSize().height;

            /////////////////////
            // x axis
            g2.draw(new Line2D.Double( 0, drawArea_height/2, drawArea_width ,drawArea_height/2 ));
            Font font = new Font("Times New Roman", Font.PLAIN, 10);
            g2.setFont(font);

            //positive x axis values

            for(int i = 1; i < 20; i++) {

                String num = Integer.toString(i);
                if(i >= 10) {
                    g2.draw(new Line2D.Double((drawArea_width/2 -19 ) + i*12 , (drawArea_height/2) -2 , (drawArea_width/2 -19 ) + i*12 , (drawArea_height/2) + 2 ));
                    g2.drawString(num, (drawArea_width/2 -22 ) + i*12  , (drawArea_height/2) + 15 );
                }

                else {
                    g2.draw(new Line2D.Double((drawArea_width/2) + i*10 , (drawArea_height/2) -2 , (drawArea_width/2) + i*10 , (drawArea_height/2) + 2 ));
                    g2.drawString(num, (drawArea_width/2 -1) + i*10 , (drawArea_height/2) + 15 );
                }
            }
            //

            //negative x axis values
            for(int i = 20; i > 0; i--) {

                String num = Integer.toString(i);
                if(i <= 9) {

                    g2.draw(new Line2D.Double((drawArea_width/2 ) - i*13 , (drawArea_height/2) -2 , (drawArea_width/2 ) - i*13 , (drawArea_height/2) + 2 ));
                    g2.drawString("-" + num, (drawArea_width/2 - 4) - i*15 , (drawArea_height/2) + 15 );
                }

                else {

                    g2.draw(new Line2D.Double((drawArea_width/2 + 16 ) - i*15 , (drawArea_height/2) -2 , (drawArea_width/2 + 16 ) - i*15 , (drawArea_height/2) + 2 ));
                    g2.drawString("-" + num, (drawArea_width/2 + 16 ) - i*17  , (drawArea_height/2) + 15 );
                }
            }
            //

            //////////////////////

            //y axis
            g2.draw(new Line2D.Double( drawArea_width/2, 0, drawArea_width/2, drawArea_height ));

            g2.setStroke(new BasicStroke(1.20f));

            // This two loops work fine if each one is run independently

            xCoord = 0;
            for(int i = 0; i < yCoord_size/2 ; i++) {

                //g2.draw(new Line2D.Double((drawArea_width/2 ) + xCoord , yCoord[i] + (drawArea_height/2), (drawArea_width/2 ) + xCoord , yCoord[i] + (drawArea_height/2) ) );
                g2.draw(new Ellipse2D.Double((drawArea_width/2 ) + xCoord , yCoord[i] + (drawArea_height/2), 1, 1));
                xCoord-= xRate;
            } 

            /*
            for(int i = yCoord_size/2; i < yCoord_size ; i++) {

                //g2.draw(new Line2D.Double((drawArea_width/2 ) + xCoord , yCoord[i] + (drawArea_height/2), (drawArea_width/2 ) + xCoord , yCoord[i] + (drawArea_height/2) ) );
                g2.draw(new Ellipse2D.Double((drawArea_width/2 ) + xCoord , yCoord[i] + (drawArea_height/2), 1, 1));
                xCoord+= xRate;
            }
            */

        }       
}

    private void createPanel() {

        basePanel = new JPanel();
        topPanel = new JPanel();

        basePanel.setLayout(new BorderLayout());

        topPanel.add(rateLabel);
        topPanel.add(rateField);
        topPanel.add(button);

        basePanel.add(topPanel, BorderLayout.NORTH);
        basePanel.add(drawingComponent, BorderLayout.CENTER);

        add(basePanel);     
    }
}

public class Graph {

    int yCoord_size;
    double xRate;
    String equation;
    double[] yCoord;
    static double num;

    public Graph() {

        yCoord_size = 400;
        xRate = 0.101;

        equation = "";
        num = 0;
        yCoord = new double[yCoord_size];

        for(int i=0; i <10; i++)
            yCoord[i] = 0;
    }

    public void setEq(String eq) {

        equation = eq;

        //System.out.println("eq is: " + eq);

    }

    public double equationStrToVal(String eq, double inX){  

        double total = 0.0;
        double x = inX;
        String[] tokens;
        tokens = eq.split(" ");

        for(int i=0; i<tokens.length; i++){

            if(tokens[i].equalsIgnoreCase("x")){

                total+= x;
            }

            //addition
            else if(tokens[i].equals("+")){
                if(tokens[i+1].equalsIgnoreCase("x"))
                    total+= x;
                else
                    total+= stringToDouble( tokens[i+1]);
                i++;
            }

            //multiplication
            else if(tokens[i].equals("*")){
                if(tokens[i+1].equalsIgnoreCase("x"))
                    total*= x;
                else
                    total*=stringToDouble( tokens[i+1]);
                i++;
            }

            //raised to a power

        }

        return total;
        //System.out.println("The result is: " + total);
    }

    public double[] getY(int screen_width) {

        double j = 0.0;

        //for(int i=0 ; i < screen_width/2; i++, j-=0.05) 
        for(int i=0 ; i < yCoord_size/2; i++, j-=xRate) 
            yCoord[i] =  -1 * equationStrToVal(equation, j);

        j = 0;

        //for(int i=screen_width/2 ; i<screen_width ; i++, j+=0.05)
        for(int i= yCoord_size/2 ; i< yCoord_size ; i++, j+=xRate)
            yCoord[i] = -1 * equationStrToVal(equation, j);     

        return yCoord;
    }

    static double stringToDouble(String num){

        return ( Double.valueOf(num.trim()).doubleValue());

    }

}

public class GraphingCalcViewer {

    public static void main(String[] args) {

        JFrame frame = new GraphingCalc();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T21:05:41.430

if you comment out one loop the other loop always start with xCoord = 0;

if you run both loops the second starts with the current xCoord.value

it looks like you have to set "xCoord = 0;" before the second loop;

# php - 简单的 HTML DOM 抓取字符编码问题

> ID：10776731
> 
> 赞同：1
> 
> 时间：2012-05-27T19:44:44.057
> 
> 标签：php, html, dom, screen-scraping

我正在尝试从网站上抓取一些内容，通常效果很好。然而，这一次，当我抓取内容时，我得到了大量的字符，带有问号的小菱形。

我正在抓取的网站和我自己的网站都使用 UTF-8 作为编码。奇怪的是，我可以很好地抓取该站点的主页，但每当我尝试抓取不同的页面时，一切都会变得一团糟，即使这些页面也使用 UTF-8。为了简单起见，我只调用了 file_get_html() ，然后调用了一个简单的 echo $html->plaintext 所以我的编码应该没有错误。

有谁知道如何解决这个问题？提前致谢

# android - 根据设备更改 minSDKVersion

> ID：10776733
> 
> 赞同：0
> 
> 时间：2012-05-27T19:45:07.547
> 
> 标签：android, android-manifest, android-4.0-ice-cream-sandwich, multiple-versions, android-min-sdk

我想为多个版本的 Android 发布我的应用程序。这就是为什么我在我的清单 xml 中写了这个

```
<uses-sdk android:minSdkVersion="8" /> 
```

我的应用程序显示一个 TimePicker。TimePicker 在 4.0.3 版本中通常看起来不同。由于我选择版本 8 作为我的默认 sdk 版本，TimePicker 看起来像旧版本，即使我在 4.0.3 设备上运行该应用程序。

当此应用程序在 4.0.3 设备上运行时，有什么方法可以选择 sdk 版本 15？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T19:47:27.567

你`apk`只编译一次，所以没有。相反，您应该在您的`AndroidManifest.xml`,

```
<uses-sdk android:minSdkVersion="8" 
    android:targetSdkVersion="15" /> 
```

然后检查你的代码（在运行时）旧设备不使用新框架中提供的方法。例如，

```
int currentVersion = android.os.Build.VERSION.SDK_INT;  
if (currentVersion >= android.os.Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) {
    // It is safe to use the TimePicker.
} else{
    // Don't use the TimePicker (ClassNotFoundException will be thrown).
} 
```

# asp.net - 如何使用 BIDS 安装和构建 SSIS？

> ID：10776736
> 
> 赞同：3
> 
> 时间：2012-05-27T19:45:47.660
> 
> 标签：asp.net, ssis

我只有visual studio 2010，没有sql server。我用它来学习。现在我想学习SSIS，它说我需要BIDS。如何安装 BIDS，我可以免费获得它吗？我应该安装 sql server express edition 并且还要安装 BIDS 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:24:21.503

您最好的选择是获得开发版（大约 50 美元），它与企业版完全一样，只是您不能在生产环境中使用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T19:59:55.640

目前没有[提供 SSIS 的免费 SQL Server](http://msdn.microsoft.com/en-us/library/cc645993%28v=SQL.110%29.aspx#SSIS)版本。

正如其他人指出的那样，您可以购买[Developer Edition](http://www.microsoftstore.com/store/msstore/en_US/pd/SQL-Server-2008-R2-Developer-Edition/productID.221634300)。这也包含在[MSDN 订阅](http://msdn.microsoft.com/en-us/subscriptions/default.aspx)中，可能有点贵。更经济的选择是[Technet 订阅](http://technet.microsoft.com/en-US/subscriptions)，其中包括标准/企业版。

# r - 如何在 R 中制作列表列表？

> ID：10776742
> 
> 赞同：55
> 
> 时间：2012-05-27T19:46:52.480
> 
> 标签：r

我不知道如何在 R 中制作列表列表。我有几个列表，我想将它们存储在一个数据结构中以便更轻松地访问它们。但是，看起来您不能在 R 中使用列表列表，因此如果我从另一个列表（例如 l2）获取列表 l1，那么我将无法访问元素 l1。我该如何实施？

**编辑**-我将展示一个对我不起作用的示例：

```
list1 <- list()
list1[1] = 1
list1[2] = 2
list2 <- list()
list2[1] = 'a'
list2[2] = 'b'
list_all <- list(list1, list2)
a = list_all[1]
a[2]
#[[1]]
#NULL 
```

但`a`应该是一个列表！

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-05-27T19:55:24.190

您可以轻松制作列表列表

```
list1 <- list(a = 2, b = 3)
list2 <- list(c = "a", d = "b")
mylist <- list(list1, list2) 
```

mylist 现在是一个包含两个列表的列表。要访问 list1，您可以使用`mylist[[1]]`. 如果您希望能够做类似的事情，`mylist$list1`那么您需要做类似的事情

```
mylist <- list(list1 = list1, list2 = list2)
# Now you can do the following
mylist$list1 
```

* * *

编辑：回复您的编辑。只需使用双括号索引

```
a <- list_all[[1]]
a[[1]]
#[1] 1
a[[2]]
#[1] 2 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-27T19:54:39.590

使用您的示例::

```
list1 <- list()
list1[1] = 1
list1[2] = 2
list2 <- list()
list2[1] = 'a'
list2[2] = 'b'
list_all <- list(list1, list2) 
```

使用 '[[' 检索列表的元素：

```
b = list_all[[1]]
 b
[[1]]
[1] 1

[[2]]
[1] 2

class(b)
[1] "list" 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-07-18T20:55:40.383

如果您试图保留 a `list`of `list`s （类似于`python`'s `list.append()`），那么这可能有效：

```
a <- list(1,2,3)
b <- list(4,5,6)
c <- append(list(a), list(b))

> c
[[1]]
[[1]][[1]]
[1] 1

[[1]][[2]]
[1] 2

[[1]][[3]]
[1] 3

[[2]]
[[2]][[1]]
[1] 4

[[2]][[2]]
[1] 5

[[2]][[3]]
[1] 6 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-05T12:10:48.373

该示例在循环中创建命名列表的列表。

```
 MyList <- list()
  for (aName in c("name1", "name2")){
    MyList[[aName]] <- list(aName)
  }
  MyList[["name1"]]
  MyList[["name2"]] 
```

要添加另一个名为“name3”的列表，请编写：

```
 MyList$name3 <- list(1, 2, 3) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-06-01T13:14:21.490

正如其他答案已经以更复杂的方式指出的那样，您确实*已经*创建了一个列表列表！只是 R 的奇怪输出让（每个人都感到困惑？）。试试这个：

```
> str(list_all)
List of 2
 $ :List of 2
  ..$ : num 1
  ..$ : num 2
 $ :List of 2
  ..$ : chr "a"
  ..$ : chr "b" 
```

最简单的构造是这样的：

```
> str(list(list(1, 2), list("a", "b")))
List of 2
 $ :List of 2
  ..$ : num 1
  ..$ : num 2
 $ :List of 2
  ..$ : chr "a"
  ..$ : chr "b" 
```

# forms - Symfony2 - 为什么隐藏字段中的整数值不被识别为整数？

> ID：10776746
> 
> 赞同：4
> 
> 时间：2012-05-27T19:47:35.423
> 
> 标签：forms, symfony, hidden-field

我的 Symfony2 项目中有一个“**评级”实体的自定义表单类型。**它有一个**值**字段，即*integer*。然后，我为这个实体创建了表单。下面是代码：

```
class RatingType extends AbstractType
{
  public function buildForm(FormBuilder $builder, array $options){
     $builder->add('value', 'hidden', array('data' => 113));
  }

  public function getDefaultOptions(array $options){
     return array(
         'data_class' => 'Acme\ArticleBundle\Entity\Rating',
     );
  }    

  public function getName() {
     return 'spesax_productbundle_pratingtype';
  }
} 
```

当我在我的 html 页面中按下**提交**按钮时，表单未经过验证，并且屏幕上显示“**不是整数”错误消息！**
为什么 Symfony2 不将值**113**转换为整数？我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T19:35:37.033

当使用类型`hidden`而不是`integer`FormType 时，symfony 不知道该字段会发生什么，因此它假定一个字符串。将表单绑定到实体时，隐藏字段作为字符串存储到实体字段中。

如果您使用 验证，则验证实体会失败`type="integer"`，因为该值不是整数，而是可以转换为整数的字符串（保存它会起作用，因为教义看起来是否可以转换为给定类型）。

**诀窍是`type="numeric`在您的实体验证注释中使用 "。**这将检查该字段是否可以转换为整数，而不是该值现在是否为真正的整数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-09T10:22:30.663

感谢 Sgoettschkes 的回答，这对我有用。这是一个例子：

```
/**
* @var integer
* @Assert\NotBlank()
* @Assert\Type(type="numeric")
*
* @ORM\Column(name="value", type="integer",  nullable=false)
*/

private $value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-06T01:26:39.727

另一种选择是在其*set*方法中对实体的参数进行类型转换。例如：

```
/** @var integer $value */
private $value;

public function setValue($val){
     $this->$val = (int) $val;
     return $this;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-07T13:52:36.247

Beltouche 的回答对我有用：通过将其类型转换为实体中的整数，它保存了数据库更新，否则学说认为字段不匹配。

因为 12345 !== '12345' 我看到我的 $id 字段有不必要的更新，即使表单/实体中没有其他内容发生变化。

```
/** @param int $id */
private $id;

public function setId($id){
    $this->$id = (int) $id;
    return $this;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-11-21T12:02:56.710

接下来使用：

```
$builder->add('fieldname', 'integer', array('attr' => array('style' => 'display: none') ) ) 
```

# random - 范围极值似乎没有被 random() 绘制

> ID：10776747
> 
> 赞同：3
> 
> 时间：2012-05-27T19:47:49.713
> 
> 标签：random, range, uniform

出于几个正当的原因，我必须使用 BSD 的 random() 来生成大量随机数，并且由于它的周期很短（如果我没记错的话，~2^69）这些数字的质量很快就会下降我的用例。我可以使用我可以访问的 rng 板，但它非常慢，所以我想我可以做到这一点：从板上取一个数字，用它来播种 random()，使用 random() 来绘制数字并在董事会说有一个新号码可用。该板每秒生成大约 100 个数字，所以我的猜测是 random() 几乎无法循环，并且生成速率很容易满足我每秒数百万个数字的要求。

无论如何，问题是 random() 声称均匀地绘制 0 和 (2^31)-1 之间的数字，但我一直在绘制无数的数字，而且我从未见过 0 或 (2^ 31)-1 到目前为止。也许有一些 1 和 (2^31)-2，但我从未见过极端情况。现在，我知道随机数的问题在于您永远无法确定（参见 Dilbert，Debian），但这似乎非常奇怪。此外，我尝试使用 histc() 函数使用 Octave 分析生成的数据集，最低和最高的 bin 包含中间 bin 数量的一半到四分之三（反过来又是均匀填充的，所以我猜在一些感觉分布是“均匀的”）。

有人可以解释一下吗？

**编辑**一些代码

板子用三个组件输出这个结构，然后我做了一些结合它们来产生种子的mumbo-jumbo。我没有关于这块板的规格，它是几年前以前的学生拼凑的一块古老的硬件，几乎没有文档，我使用的这个公式是文档中建议的公式之一。STEP 参数告诉我可以使用一个种子绘制多少数字，以便我可以同时优化性能并降低 CPU 使用率。

```
float n = fabsf(fmod(sqrt(a.s1*a.s1 + a.s2*a.s2 + a.s3*a.s3), 1.0));
unsigned int seed = n * UINT32_MAX;
srandom(seed);

for(int i = 0; i < STEP; i++) {
  long r = random();
  n = (float)r / (UINT32_MAX >> 1);
  [_numbers addObject:[NSNumber numberWithFloat:n]];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:36:49.850

为了延长周期长度，一种方法是运行两个具有不同周期的 RNG，并对它们的输出进行异或运算。一些例子见[L'Ecuyer 1988](http://www.iro.umontreal.ca/~lecuyer/myftp/papers/cacm88.pdf)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T22:56:02.733

你确定吗

```
void main() {
  while (random() != 0L);
} 
```

无限期挂起？在我的 linux 机器上（Gnu C 库使用与 BSD 相同的[线性反馈移位寄存器](http://en.wikipedia.org/wiki/Linear_feedback_shift_register)，尽管使用不同的播种过程）它没有。

根据[此参考](http://www.newwaveinstruments.com/resources/articles/m_sequence_linear_feedback_shift_register_lfsr.htm) ，该算法产生连续零或最长长度的“运行”，`n-1`其中 n 是移位寄存器的大小。当它的大小为 31 个整数（默认情况）时，我们甚至*可以确定*最终将*连续*`random()`返回 0 高达 30 次（但绝不是 31 次）！当然，我们可能要等几个世纪才能看到它的发生……

# image - matlab如何从文件夹中读取图像

> ID：10776748
> 
> 赞同：1
> 
> 时间：2012-05-27T19:47:51.430
> 
> 标签：image, matlab, file-io

我有六个这样的文件夹>>[图像](http://imageshack.us/photo/my-images/441/78731524.png/) ，每个文件夹都包含一些图像。我知道如何在 matlab 中读取图像但我的问题是如何遍历这些文件夹并读取 abc.m 文件中的图像（此文件显示在此[图像](http://imageshack.us/photo/my-images/441/78731524.png/)中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T19:54:29.130

所以基本上你想读取不同文件夹中的图像，而不是将所有图像放入一个文件夹并使用`imread()`? 因为您可以将所有图像（并以一种让您知道它们来自哪个文件夹的方式命名）复制到您的 MATLAB 工作目录中，然后以这种方式加载它们。

使用`cd`命令更改目录（如在 *nix 中），然后在遍历每个文件夹时加载/读取图像。您可能需要绝对路径名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T20:00:08.367

最简单的方法当然是在matlab中的forlder上右键单击并“添加到路径”>>“选定的文件夹和子文件夹”

然后你可以在`imread`不指定路径的情况下获取图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T21:31:43.097

如果您知道包含目录的图像的路径，则可以在其上使用[dir](http://www.mathworks.nl/help/techdoc/ref/dir.html)列出其中的所有文件（和目录）。使用您想要的图像扩展名过滤文件，瞧，您有一个数组，其中包含您指定的目录中的所有图像：

```
dirname = 'images';
ext = '.jpg';

sDir=  dir( fullfile(dirname ,['*' ext]) );;
sDir([sDir.isdir])=[]; % remove directories 
```

% 以下已过时，因为通配符 dir ^^
~~b=arrayfun(@(x) strcmpi(x.name(end-length(ext)+1:end),ext),sDir); % 过滤扩展
sFiles = sDir(b);~~

在使用之前，您可能希望在每个文件的名称前加上目录：

```
sFileName(ii) = fullfile(dirname, sFiles(ii)); 
```

您可以根据需要处理此生成的文件。加载所有文件，例如：

```
for ii=1:numel(sFiles)
    data{i}=imread(sFiles(ii).name)
end 
```

如果您还想递归子目录，我建议您看一下：

[如何获取MATLAB中特定目录下的所有文件？](https://stackoverflow.com/questions/2652630/how-to-get-all-files-under-a-specific-directory-in-matlab)

[或FEX](http://www.mathworks.com/matlabcentral/fileexchange/)上的其他解决方案：

[http://www.mathworks.com/matlabcentral/fileexchange/8682-dirr-find-files-recursively-filtering-name-date-or-bytes](http://www.mathworks.com/matlabcentral/fileexchange/8682-dirr-find-files-recursively-filtering-name-date-or-bytes)

[http://www.mathworks.com/matlabcentral/fileexchange/15505-recursive-dir](http://www.mathworks.com/matlabcentral/fileexchange/15505-recursive-dir)

编辑：添加了 Amro 对 dir 调用通配符的建议

# sqlite - Lua sqlite Select 语句

> ID：10776756
> 
> 赞同：0
> 
> 时间：2012-05-27T19:48:55.803
> 
> 标签：sqlite, lua, coronasdk

如果数据库表不存在，我有以下代码来创建数据库表，然后检查当前用户是否在数据库中。我通过选择 id 等于他们的设备 id 的用户来做到这一点。现在的代码应该打印 hello world 然后转到表单。但是，当我运行代码时，没有任何反应，没有错误，也没有打印语句。任何想法为什么会发生这种情况？

```
local tablesetup = [[CREATE TABLE IF NOT EXISTS User (id VARCHAR(255) PRIMARY KEY, name);]]
    db:exec(tablesetup)

    --Check if the user is in the database already
    for row in db:nrows("SELECT * FROM User WHERE id = " .. "'" .. system.getInfo("deviceID") .. "'") do
        print("hello")
        if(row.id == nil) then
            print("world")
            storyboard.gotoScene("forms")
        end
    end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T20:02:07.360

`nrows`返回查询产生的所有行。如果在查询中没有生成任何行（例如，因为找不到您要查找的项目），那么循环将不会开始。因为没有与查询匹配的行。

如果您要检测查询是否成功，则需要实际检查。

另外，*请停止使用字符串连接构建查询。*了解如何使用带有适当[值绑定的预](http://www.sqlite.org/c3ref/bind_blob.html)[准备语句](http://www.sqlite.org/c3ref/prepare.html)。它更干净，并且不会让您受到 SQL 注入攻击。

# list - 如何计算 Prolog 列表中元素出现的次数

> ID：10776759
> 
> 赞同：1
> 
> 时间：2012-05-27T19:50:32.573
> 
> 标签：list, count, prolog

我是序言中的新手，这就是为什么这个问题对你来说很容易，但我找不到答案。有人可以帮帮我吗。

我只是想

计数函数 st

```
count([c,c,a,a,b,b,d,a,c,b,d,d,a], O). 
```

它将返回列表成员的出现次数。

```
 O = [[a, 4], [b, 3], [c, 3], [d, 3]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-04T09:48:28.677

以下内容基于我[之前](https://stackoverflow.com/a/29432897/4609915)对“[删除列表中的重复项（Prolog）](https://stackoverflow.com/questions/2260792/remove-duplicates-in-list-prolog) ”的[回答以及之前](https://stackoverflow.com/a/27358600/4609915)对问题“ [Prolog union for AUBUC](https://stackoverflow.com/questions/27358456/prolog-union-for-a-u-b-u-c) ”的回答。

`list_item_subtracted_count0_count/5`源自`list_item_subtracted/3`。 `list_counts/2`派生自`list_setB/2`，它们都在[这里定义](https://stackoverflow.com/a/29432897/4609915)。

```
list_item_subtracted_count0_count([], _, [], N,N)。
list_item_subtracted_count0_count([A|As], E, Bs1, N0,N) :-
   if_ (A = E,
       ( Bs1 = Bs , N1 是 N0+1 ),
       (Bs1 = [A|Bs], N1 = N0)),
   list_item_subtracted_count0_count（As，E，Bs，N1，N）。

列表计数（[]，[]）。
list_counts([X|Xs], [XN|Ys]) :-
   list_item_subtracted_count0_count(Xs, X, Xs0, 1,N),
   list_counts(Xs0, Ys)。

```

这是OP给出的查询：

```
?- list_counts([c,c,a,a,b,b,d,a,c,b,d,d,a], Xss).
Xss = [c-3,a-4,b-3,d-3].                    % succeeds deterministically 
```

请注意，对`X-N`in的顺序对应于in`Counts`的第一次出现：`X``Xs`

```
?- list_counts([ a ,b,c,d], Xss)。
Xss = [ a -1,b-1,c-1,d-1]。

?- list_counts([d,c,b, a ], Xss)。
Xss = [d-1,c-1,b-1, a -1]。

```

最后，让我们考虑所有可能的列表`Es`——以递增的长度公平地列举：

```
?-长度(Es, N), list_counts(Es, Xss)。
   N = 0，Es = []，Xss = []
; N = 1，Es = [A]，Xss = [A-1]
; N = 2, Es = [A,A], Xss = [A-2]
; N = 2, Es = [A,B], Xss = [A-1,B-1], dif(B,A)
; N = 3, Es = [A,A,A], Xss = [A-3]
; N = 3，Es = [A,A,B]，Xss = [A-2,B-1]，dif(B,A)
; N = 3，Es = [A,B,A]，Xss = [A-2,B-1]，dif(B,A)
; N = 3, Es = [B,A,A], Xss = [B-1,A-2], dif(A,B), dif(A,B)
; N = 3, Es = [A,B,C], Xss = [A-1,B-1,C-1], dif(C,A), dif(C,B), dif(B,A)
...

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T20:26:37.907

```
co(X,L) :- co(X,[],L).

co([],A,A).
co([X|Xs], A, L) :- p(X-Z,A,R), !, Z1 is Z+1, co(Xs, [X-Z1|R], L). 
co([X|Xs], A, L) :- co(Xs, [X-1|A], L). 

p(X-Y,[X-Y|R],R):- !.
p(X,[H|Y], [H|Z]) :- p(X,Y,Z). 
```

我没有故意使用非常有意义的名字。尝试了解每个谓词的作用。

# c - 共享内存段内的指针

> ID：10776762
> 
> 赞同：12
> 
> 时间：2012-05-27T19:50:42.800
> 
> 标签：c, linux, shared-memory

我已经尝试了好几个小时，并用谷歌搜索了我想到的所有东西，但我快疯了。

我有一个结构：

```
typedef struct {
  int rows;
  int collumns;
  int* mat;
  char* IDs_row;
} mem; 
```

直到以后我才知道 int* （一个矩阵）和 char* 的大小。

当我这样做时，我会像这样创建共享内存：

```
mem *ctrl;
int size = (2 + ((i-1)*num_cons))*sizeof(int) + i*26*sizeof(char); //I have the real size now
shmemid = shmget(KEY, size, IPC_CREAT | 0666);
if (shmemid < 0) {
    perror("Ha fallado la creacion de la memoria compartida.");
    exit(1);
}
ctrl = (mem *)shmat(shmemid, 0, 0);
if (ctrl <= (mem *)(0)) {
    perror("Ha fallado el acceso a memoria compartida");
    exit(2);
} 
```

这里没问题。然后我给 ctrl->rows 和 collumns 一个值，并将 0 分配给所有矩阵。

但在那之后，我在 char* 和 bam 中写了一些东西，分段错误。

调试程序我看到指针 mat 和 IDs_row 都为空。如何在共享内存段内给他们正确的值？

我尝试删除 char* 指针，只是为了试一试，然后分段错误错误出现在连接到所述共享内存的另一个程序中，并且只是检查了矩阵内的值（检查 ->rows 和 ->columns 是成功）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-28T08:58:50.360

首先，将*绝对*指针放在共享内存段中是非常**糟糕的想法**——这些指针仅在填充其值的进程中有效。**不保证**共享内存段在每个进程中都附加到相同的虚拟地址。`shmaddr == NULL`相反，它们在调用时指定系统认为可能的位置`shmat()`。您可以在调用时指定相同的虚拟地址，`shmat()`但您可以确保在**所有**参与进程的该内存区域上没有映射任何其他内容。这很难以便携的方式完成。您最想做的是：

1）分配一个大的共享内存段来容纳`mem`结构和两个数据数组。然后，您不应该放置绝对指针，而是放置相对于内存块开头的指针，然后根据使用情况进行调整。

2) 分配三个不同的共享内存段，但不是放置*指针*，而是放置由返回的*共享内存 ID*`shmget()`：

```
typedef struct {
  int rows;
  int collumns;
  int mat_id;
  int IDs_row_id;
} mem; 
```

当您需要访问矩阵或 IDs 数组时，只需附加到存储在相​​应字段中的共享内存 ID。

请注意，尽管`KEY`在后续调用中使用相同的`shmget()`内容不会产生预期的结果，除非`KEY == IPC_PRIVATE`. `mem`最好对带有描述符（类型）的共享内存块和其他两个内存块使用固定键值，`IPC_PRIVATE`否则三个调用实际上将返回*相同*的共享内存块 - 第一个将创建它，然后接下来的两个将简单地返回其 ID，因为具有该键的块已经存在。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-27T19:55:13.763

```
ctrl = (mem *)shmat(shmemid, 0, 0); 
```

这只会将有效内存分配给`ctrl`指针，而不是分配给`ctrl->mat`or `ctrl->IDs_row`。

你可能想要：

```
mem *ctrl;
shmemid = shmget(KEY, sizeof(ctrl), IPC_CREAT | 0666);
//allocate memory for the structure
ctrl = (mem *)shmat(shmemid, 0, 0);

//allocate memory for the int*
shmemid = shmget(KEY,((i-1)*num_cons))*sizeof(int), IPC_CREAT | 0666);
ctrl->mat = (int*)shmat(shmemid, 0, 0);

//allocate memory for the char*
shmemid = shmget(KEY,i*26*sizeof(char), IPC_CREAT | 0666);
ctrl->IDs_row = (char*)shmat(shmemid,0,0); 
```

# php - 如何使用 php 添加多个 cron 作业？

> ID：10776763
> 
> 赞同：0
> 
> 时间：2012-05-27T19:50:43.597
> 
> 标签：php, cron, cron-task

我想做什么>

1.用户访问我的PHP基础页面

2.我的页面收集它的数据

3.Add cron job using PHP (Q1.How to add Cron job using PHP? **)第2738章**

4.Cron 作业运行上述 URL 并使用用户 ID 执行任务，这需要将近 1 小时 + 时间（Q2。如果可能的话，是否可以同时或在一分钟后运行作业）

5.如果另一个用户在同一时间访问该页面，上述过程也会发生在他们身上（Q3.所以这是可能的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T20:11:44.747

在我看来，您需要的不是 cron 作业，而是后台工作进程。Cron 作业是在特定的自动化时间（例如每天下午 2:30）运行的作业，而不是每次用户访问您的页面时都可能是任何时候。

为了实例化后台工作进程，我强烈推荐使用[Pheanstalk](https://github.com/pda/pheanstalk)。查看自述文件以了解如何实例化工作进程，这非常简单。

# android - 从自定义 View 到它所在的 Activity 的正确通信方式是什么？

> ID：10776764
> 
> 赞同：16
> 
> 时间：2012-05-27T19:51:00.710
> 
> 标签：android, view, spinner, adapter, android-context

我有一个扩展 Spinner 的自定义视图类。当用户进行选择时，我试图弄清楚与嵌入的 Activity 对话的正确方法是什么。我看到`OnItemSelected`侦听器获得了对适配器的引用，但我不清楚我是否应该使用这个适配器并以某种方式向上走它的父链，或者我是否应该直接与上下文交谈（出于某种原因这感觉不安全，即使我想不出它可能会失败的方式，即兴发挥）。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-27T19:59:24.113

正确的方法是通过公开一个接口来“监听”您的自定义视图，您的视图持有对他的实例的引用，并且您应该实现托管活动。与 OnItemSelected 接口完全相同，并且实现了 android 视图公开的任何事件。这是观察者设计模式。

例如：

```
public class MyCustomSpinner extends Spinner {
    public MyCustomSpinner(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }

    public interface IMyEventListener {
        public void onEventOccurred();
    }

    private IMyEventListener mEventListener;

    public void setEventListener(IMyEventListener mEventListener) {
        this.mEventListener = mEventListener;
    }

    protected void someMethodWhichDoingSomthingAndShouldRaiseAlsoTheEvent() {

        /*
         * Some Code which the function doing //more code...
         */

        if (mEventListener != null) {
            mEventListener.onEventOccurred();
        }
    }
} 
```

这是您从活动中使用它的方式：

```
 mMyCustomSpinner.setEventListener(new IMyEventListener() {

                @Override
                public void onEventOccurred() {
                    // TODO Auto-generated method stub

                }
            }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-27T20:04:25.550

> 当用户进行选择时，我试图弄清楚与嵌入的 Activity 对话的正确方法是什么。

您不想“与它嵌入的 Activity 交谈”。您想与负责`View`. 今天，这可能是一个`Activity`. 明天，那可能是一个`Fragment`.

> 我看到 OnItemSelected 侦听器获得了对适配器的引用，但我不清楚我是否应该使用这个适配器并以某种方式向上走它的父链

这意味着`View`知道 的特定类型`Adapter`，因为`Adapter`接口没有任何类型的`getContext()`方法。此外，它会将您与与 交谈联系起来`Activity`，如上所述，目前这不是一个好计划。

就个人而言，我对`Spinner`首先拥有一个自定义子类有点怀疑。但是，假设有充分的理由，您应该遵循 Tal Kanel 的建议（在我写这篇文章时发布）并为您的 custom 声明的这个自定义事件设计一个自定义侦听器接口`View`。让控制器（`Activity`或`Fragment`）提供该接口的实现——这可以直接在控制器上实现，或者实现为匿名内部类（如 Tal Kanel 的回答）等`View`。在侦听器接口根据需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-20T20:00:02.957

一个简单的解决方案 -

```
((ParentClass) context).functionToRun(); 
```

其中 ParentClass 是活动的类名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T19:53:48.930

正确的方法是使用某种监听器。我认为您可以直接参考，然后您的代码将不能用于另一个项目...

# .net - 企业架构师：导入二进制模块 .NET

> ID：10776767
> 
> 赞同：1
> 
> 时间：2012-05-27T19:51:23.050
> 
> 标签：.net, enterprise-architect

我多次尝试通过二进制模块导入从 .NET Framework 导入“System.Web.dll”。

```
Output "Reverse Engineering Process":
"Reverse Engineering Classes:
--importing C:\...\System.Web.dll
Resolving relationships
Import Complete!"
parameters: with diagramm, overwrite existing classes, ... 
```

但是 EA 不会创建任何包或图表。为什么？谢谢。

# android - 在 Android MediaPlayer 中打开 URL

> ID：10776769
> 
> 赞同：-1
> 
> 时间：2012-05-27T19:52:52.423
> 
> 标签：android, url, media-player

我正在尝试使用以下方法打开带有 androids MediaPlayer 类的 URL：

```
MediaPlayer.create(pContext, Uri.parse(m_sUrl)); 
```

我已经使用 %20 替换了 m_sUrl 字符串中的所有空格：

```
m_sUrl = m_sUrl.replace(" ", "%20"); 
```

但是 MediaPlayer.Create 方法返回 null 给我。所以解析m_sUrl字符串似乎还是有问题。

这就是我要流式传输的 URL 字符串：

[http://www.se.hs-heilbronn.de/~poneu/files/musik/oeffentlich/2007-03-10/01%20-%20L.v.%20Beethoven-%20Ouvertüre%20Nr.%203%20zur](http://www.se.hs-heilbronn.de/~poneu/files/musik/oeffentlich/2007-03-10/01%20-%20L.v.%20Beethoven-) _ %20Oper%20-Leonore-%20op.%2072a.mp3

如您所见，它似乎是 ü 字符。任何人都知道我必须在 ä ö ü ß 等的有效网址中使用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T20:29:42.867

使用**[URLEncoder](http://developer.android.com/reference/java/net/URLEncoder.html)**并且你必须记住只编码不安全的字符：

```
String query = URLEncoder.encode("depeche mode", "utf-8");
String url = "http://stackoverflow.com/search?q=" + query; 
```

在我下面提到的示例中，不安全字符是将转换为 %20 的空间

希望这会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T20:05:48.603

使用[URLEncoder](http://developer.android.com/reference/java/net/URLEncoder.html)而不是手动替换单个字符的实例。

# html - 谷歌搜索结果

> ID：10776773
> 
> 赞同：1
> 
> 时间：2012-05-27T19:53:13.267
> 
> 标签：html

在下图中，我有来自 Google 的搜索结果。我想知道这种详细的搜索结果叫什么，是怎么做的？谢谢！

![来自谷歌的搜索结果](../Images/af1a2ab612587aeca1f51f5ce7ad19d7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T19:58:33.457

您在谈论**附加链接**。请查看： http: [//support.google.com/webmasters/bin/answer.py ?hl=en&answer=47334](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=47334)

如文章中所述，这不是您可以强制的，Google 会决定您的网站是否值得拥有它们。

# java - 无法在 HSQLDB 中设置 md5 密码：找不到例程签名

> ID：10776777
> 
> 赞同：2
> 
> 时间：2012-05-27T19:53:42.983
> 
> 标签：java, sql, hsqldb

HSQLDB 中有关 MD5 的文档有些稀缺，但我已按照以下说明启用 md5-ing 我的密码：

```
CREATE FUNCTION md5(VARBINARY(128))
RETURNS VARBINARY(226)
LANGUAGE JAVA
DETERMINISTIC
NO SQL
EXTERNAL NAME 'CLASSPATH:org.hsqldb.lib.MD5.digest' 
```

现在，当我尝试更新密码时：

```
UPDATE worker SET password = md5('pass123') WHERE wid=1 
```

我收到以下错误：

```
java.sql.SQLException: routine signature not found for: PUBLIC.MD5(CHARACTER) 
```

我对sql不太熟悉，所以我不确定我在哪里犯了错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T21:10:36.243

You need a function signature with character strings, rather than binary.

```
CREATE FUNCTION md5(VARCHAR(128), VARCHAR(10))
RETURNS VARCHAR(256)
LANGUAGE JAVA
DETERMINISTIC
NO SQL
EXTERNAL NAME 'CLASSPATH:org.hsqldb.lib.MD5.encode' 
```

And call the function with a fixed encoding argument:

```
UPDATE worker SET password = md5('pass123', 'ISO-8859-1') WHERE wid=1 
```

# audio - 使用 gstreamer 循环播放部分音频

> ID：10776778
> 
> 赞同：1
> 
> 时间：2012-05-27T19:53:48.187
> 
> 标签：audio, gstreamer

我正在开发一种“高级播放”音频应用程序来帮助音乐转录。这个想法是允许用户更改音频速度/音高，以及选择和可能循环部分音轨。我暂时选择使用 gstreamer。我在管道中有 scaletempo 插件来帮助改变速度。我不确定进行循环的最佳方法是什么。

从阅读文档看来，我可以通过在 scaletempo 元素上执行 gst_element_seek 并设置 *stop_type* 和*停止*参数，等待消息总线上的 EOS，然后再执行一次搜索等来完成它。

有更好的方法吗？理想情况下，我希望获得平滑的循环，但如果我不这样做，它不会破坏交易。gstreamer 文档包含对“段”概念的提及，但从浏览文档来看，我仍然不知道它们是什么，也不知道它们在我的场景中是否有用。

非常欢迎指向 C/Python/Haskell/whatever 中的代码的指针。

# ios - 从地址簿中获取两个文本字段的电话号码

> ID：10776784
> 
> 赞同：0
> 
> 时间：2012-05-27T19:54:40.823
> 
> 标签：ios, xcode, uitextfield, addressbook, phone-number

我按照 Apple **[Address Book Programming Guide for iOS](http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Chapters/QuickStart.html)**将电话号码从地址簿获取到我的`UITextField`. 但我有两个`UITextField`，不知道如何对第二个文本字段实现相同的功能。

**呈现人员选择器**

```
- (IBAction)showPicker:(id)sender

{

    ABPeoplePickerNavigationController *picker =

            [[ABPeoplePickerNavigationController alloc] init];

    picker.peoplePickerDelegate = self;

    [self presentModalViewController:picker animated:YES];

} 
```

**响应人员选择器中的用户操作**

```
- (void)peoplePickerNavigationControllerDidCancel:

            (ABPeoplePickerNavigationController *)peoplePicker

{

    [self dismissModalViewControllerAnimated:YES];

}

- (BOOL)peoplePickerNavigationController:

            (ABPeoplePickerNavigationController *)peoplePicker

      shouldContinueAfterSelectingPerson:(ABRecordRef)person {

    [self displayPerson:person];

    [self dismissModalViewControllerAnimated:YES];

    return NO;

}

- (BOOL)peoplePickerNavigationController:

            (ABPeoplePickerNavigationController *)peoplePicker

      shouldContinueAfterSelectingPerson:(ABRecordRef)person

                                property:(ABPropertyID)property

                              identifier:(ABMultiValueIdentifier)identifier

{

    return NO;

} 
```

**显示一个人的信息**

```
- (void)displayPerson:(ABRecordRef)person

{

    NSString* name = (__bridge_transfer NSString*)ABRecordCopyValue(person,

                                               kABPersonFirstNameProperty);

    self.firstName.text = name;

    NSString* phone = nil;

    ABMultiValueRef phoneNumbers = ABRecordCopyValue(person,

                                    kABPersonPhoneProperty);

    if (ABMultiValueGetCount(phoneNumbers) > 0) {

       phone = (__bridge_transfer NSString*)

               ABMultiValueCopyValueAtIndex(phoneNumbers, 0);

    } else {

        phone = @"[None]";

    }

    self.phoneNumber.text = phone;

} 
```

**编辑**

```
- (void)displayPerson:(ABRecordRef)person

{

    NSString* phone = nil;

    ABMultiValueRef phoneNumbers = ABRecordCopyValue(person, kABPersonPhoneProperty);

    if (ABMultiValueGetCount(phoneNumbers) > 0) {

        phone = (__bridge_transfer NSString*)

        ABMultiValueCopyValueAtIndex(phoneNumbers, 0);

    } else {

        phone = @"None";

    }

    self.phoneNumber.text = phone;

    if (ABMultiValueGetCount(phoneNumbers) > 1) {

        phone = (__bridge_transfer NSString*)

        ABMultiValueCopyValueAtIndex(phoneNumbers, 1);

    } else {

        phone = @"None";

    }

    self.phoneNumber2.text = phone;

} 
```

![在此处输入图像描述](../Images/21b7865413721c4972a62d3c51cb60bc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T03:13:03.320

我假设你的第二个`UITextField`是第二个电话号码，如果它存在的话？然后你可以这样做：

```
if (ABMultiValueGetCount(phoneNumbers) > 1) {
   phone = (__bridge_transfer NSString*)ABMultiValueCopyValueAtIndex(phoneNumbers, 1);
} else {
    phone = @"[None]";
}

self.phoneNumber2.text = phone; 
```

或者您可以使用`CFBridgingRelease`而不是`__bridge_transfer`：

```
phone = CFBridgingRelease(ABMultiValueCopyValueAtIndex(phoneNumbers, 1)); 
```

而且，顺便说一句，您是否还想用它`ABMultiValueCopyLabelAtIndex`来捕获每个电话号码的类型（如果您不知道电话号码是什么类型，那么知道电话号码是什么也无济于事）。您可以将这两个电话号码标签存储在两个额外的 UITextField 中（大概在它们各自的电话号码旁边）。

* * *

**更新：**

我最初以为您正在寻找同一个联系人的两个电话号码。我现在从您的用户界面推断，在您想要点击按钮的两个电话号码文本字段中的每一个旁边都有一个“+”按钮，然后拉出该文本字段的电话号码。然后你点击另一个文本字段旁边的“+”按钮，然后拉出另一个联系人的电话号码并将其放在该文本字段中。

因此，如果是这种情况，您可以在类中添加一个 ivar，例如：

```
int _phoneNumberIndex; 
```

然后第一个“+”按钮会有一个`IBAction`like：

```
- (IBAction)showPicker1:(id)sender
{
    ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];

    picker.peoplePickerDelegate = self;

    _phoneNumberIndex = 1;

    [self presentModalViewController:picker animated:YES];
} 
```

而第二个“+”按钮会有`IBAction`类似的效果：

```
- (IBAction)showPicker2:(id)sender
{
    ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];

    picker.peoplePickerDelegate = self;

    _phoneNumberIndex = 2;

    [self presentModalViewController:picker animated:YES];
} 
```

然后你`displayPerson`会是这样的：

```
- (void)displayPerson:(ABRecordRef)person
{
    // first name

    NSString* name = CFBridgingRelease(ABRecordCopyValue(person, kABPersonFirstNameProperty));

    self.firstName.text = name;

    // phone numbers

    NSString* phone;

    ABMultiValueRef phoneNumbers = ABRecordCopyValue(person, kABPersonPhoneProperty);

    // first phone number

    if (ABMultiValueGetCount(phoneNumbers) > 0)
        phone = CFBridingRelease(ABMultiValueCopyValueAtIndex(phoneNumbers, 0));
    else
        phone = @"[None]";

    if (_phoneNumberIndex == 1)
        self.phoneNumber.text = phone;
    else if (_phoneNumberIndex == 2)
        self.phoneNumber2.text = phone;
    else
        NSLog(@"Unrecognized _phoneNumberIndex");

    CFRelease(phoneNumbers);
} 
```

顺便说一句，虽然我认为这可以满足您的需求，但尚不清楚您应该对名字字段做什么（因为您要选择两个联系人，您想使用哪个名字，或者您愿意将两个名字存储在两个字段中，就像您使用电话号码一样？）。所以，你必须看看那个。

显然，如果您不想要两个`IBAction`“+”按钮的两种方法，您可能会做一个查看`sender`或它的标签的方法，但这对您的问题并不重要。最重要的是，使用 ivar 指定要更新的电话号码。

# c# - Nopcommerce - 本地化资源缺失

> ID：10776787
> 
> 赞同：3
> 
> 时间：2012-05-27T19:54:47.897
> 
> 标签：c#, asp.net-mvc, localization, nopcommerce

我正在尝试学习 NopCommerce，并计划将其用于项目。我下载了2.50版本的源代码。我编译了代码并完成了数据库安装。

现在有些本地化资源不能被视为资源价值。

*   例如，在管理中`Admin.Header.LoggedInAs` ，注销旁边有一个文本。
*   在页眉和页脚行的数据网格（我认为是 Telerik）上，有 `Admin.Telerik.GridLocalization.DisplayingItems`.
*   在商店主页上，新闻项目后有一条`News.MoreInfo`文字。
*   我的购物车中有一件商品，`ShoppingCart.Mini.OneItemText`迷你购物车上有文字。
*   `Products.Availability.InStock`每个库存产品旁边都有“可用性： 文本”。

我通过数据网格仔细检查了所有资源键`Admin > Languages`，并确保它们也在 SQL Server 数据库中。

我该如何修复或调试它？

我检查了带有断点的视图，例如`T["Admin.Header.LoggedInAs"]`它的 Text 属性。`Admin.Header.LoggedInAs`

奇怪的是，所有或大部分资源值都具有`{0}`并且当然与`string.Format`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T20:04:22.610

我终于发现问题是由SQL Server db的排序引起的。

我的本地 SQL Server 的默认排序规则是`Turkish_CI_AS`，所以如果我从 SQL Server Management Studio 创建一个数据库，它会`Turkish_CI_AS`默认创建排序规则数据库。

我用`SQL_Latin1_General_CP1_CI_AS`排序规则创建了一个数据库，现在一切正常。

# php - 如果 PHP 返回 0，则运行 jQuery 模态对话框

> ID：10776790
> 
> 赞同：0
> 
> 时间：2012-05-27T19:55:03.927
> 
> 标签：php, javascript, jquery, modal-dialog

如果返回 0 ，我需要运行[jQuery 模态对话框](http://jqueryui.com/demos/dialog/#modal)`mainOptim.php`。现在 Firebug 说`$dialog is not defined`。我应该在代码中更改什么？

```
<script type="text/javascript">
    $(document).ready(function() {
        var $dialog = $('<div></div>')
            .html('This dialog will show every time!')
            .dialog({
                autoOpen: false,
                title: 'Basic Dialog'
            });
    });
    function click_function_ps() {
        $.ajax({
            url: 'callpage.php?page=optim/mainOptim.php',
            data: 'earl='+$('#earl').val(),
            success: function(html,msg){
                if(msg === '1'){
                    $('#opt_container').html(html);
                } else {
                    $dialog.dialog('open');
                    return false;
                }
            }
        });
    }
</script>

<div id="fragment-2">
    <table width="100%">
        <tr>
            <td width="100%"> 
                <form name="optform" method="post" action="#">
                    <div class = "boxx">
                        <label for="earl"><span>Parameter:</span></label>
                        <input type="text" class="input-text" value="5" size="11" maxlength="11" name="earl" id="earl">
                    </div>
                    <br/>
                    <div class="buttons">
                        <a href="#" class="regular" onclick="click_function_ps();">
                            <img src="images/opt.png" alt=""/> Run 
                        </a>
                    </div>
                </form>
            </td>
        </tr>
     </table>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T19:58:28.523

*那是因为您在就绪*范围内使用 var 关键字将其声明为局部变量。
删除`var`声明前面的 ( `var $dialog`)。

# javascript - Javascript - 测量 FPS 并将其与事件同步

> ID：10776796
> 
> 赞同：1
> 
> 时间：2012-05-27T19:55:29.600
> 
> 标签：javascript, timer, sync

假设我有一个这样的游戏循环

```
function update(){

myTime = Date.now() - myTime

// use myTime as you wish...

// reset myTime
myTime = Date.now()  

} 
```

事情发生在那里，理想情况下是 60fps，但并非总是如此。使用 Date.now() 我需要知道一帧和另一帧之间发生了多少毫秒。原因如下：

我有一个变量`X`，这个变量应该线性增加，以便每 1 秒增加 480 个单位。这种增加应该尽可能平滑，所以我认为它应该是每毫秒 0,48。

考虑到我每 16.6 毫秒 (60fps) 只在屏幕上绘制一次，我该怎么做？我需要通过添加 0,48 * 16,6 来补偿吗？或者......什么样的论坛？我对此感到疯狂，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T21:04:21.100

我不确定我是否得到了这个问题，但也许这会有所帮助？

要获取自上次运行函数以来的时间，您可以执行以下操作：

```
var lastTime = Date.now();

function update(){

    //do stuff here

    var myTime = Date.now(),
        timePassed = myTime - lastTime; //time passed since last time
    lastTime = Date.now(); //set for next time
} 
```

要查看函数每秒运行多少次，您可以执行以下操作：

```
var lastTime = Date.now(), framerate=1;

function update(){

    //do stuff

    framerate++;
    if ((Date.now()-1000)>lastTime) { //if a second or more has passed
        console.log(framerate); //log number of times function has ran
        framerate=0;  //and reset values
        lastTime = Date.now();
    }
} 
```

要加入这些功能，请执行以下操作：

```
var lastTimeEach = Date.now(), lastTimeSecond = Date.now(), framerate=1, x=480;

function update(){

    //do game logic

    var myTime = Date.now(), //time now
        timePassed = myTime - lastTimeEach; //time passed since last iteration
    lastTimeEach = Date.now(); //reset for next iteration

    framerate++;
    if ((myTime-1000)>lastTimeSecond) { //one second has passed
        x += 480; //add 480 to x
        framerate=0; //reset framerate
        lastTimeSecond = Date.now(); //reset for next second
    }
}​ 
```

这是一个[**演示**](http://jsfiddle.net/adeneo/De3ck/)

# python - 使用 django 导入 WSGIHandler 时出错

> ID：10776797
> 
> 赞同：4
> 
> 时间：2012-05-27T19:55:39.690
> 
> 标签：python, django, mod-wsgi

在没有任何代码更改的情况下，我的 django 应用程序在加载 WSGI 脚本时开始抛出异常。我将 django 1.3 与 python 2.7 一起使用，顶层`.wsgi`基本上未修改默认值：

```
import os
import sys

from django.core.handlers.wsgi import WSGIHandler

os.environ['DJANGO_SETTINGS_MODULE'] = 'api.settings'
application = WSGIHandler() 
```

正如 Apache 报告的那样，它开始在*任何请求上产生这些错误：*

```
mod_wsgi (pid=3283): Target WSGI script '/home/beder/webapps/api/api.wsgi' cannot be loaded as Python module.
mod_wsgi (pid=3283): Exception occurred processing WSGI script '/home/beder/webapps/api/api.wsgi'.
Traceback (most recent call last):
  File "/home/beder/webapps/api/api.wsgi", line 4, in <module>
    from django.core.handlers.wsgi import WSGIHandler
  File "/home/beder/webapps/api/lib/python2.7/django/core/handlers/wsgi.py", line 10, in <module>
    from django import http
  File "/home/beder/webapps/api/lib/python2.7/django/http/__init__.py", line 122, in <module>
    from django.utils.http import cookie_date
  File "/home/beder/webapps/api/lib/python2.7/django/utils/http.py", line 7, in <module>
    from email.Utils import formatdate
  File "/usr/local/lib/python2.7/email/__init__.py", line 79, in __getattr__
    __import__(self.__name__)
  File "/usr/local/lib/python2.7/email/utils.py", line 27, in <module>
    import random
  File "/usr/local/lib/python2.7/random.py", line 47, in <module>
    from os import urandom as _urandom
ImportError: cannot import name urandom 
```

我重新启动了服务器，它现在可以正常工作（没有错误）。我不知道该怎么办 - 我想确保这种情况不会再次发生，但现在没有发生，我不知道为什么会出现导入错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T20:53:42.040

你是在 virtualenv 中执行 Django 吗？您是否更新或升级了系统？如果是这样，并且您从 Python 2.6 升级到 Python 2.7，例如，您需要重新生成 virtualenv：

> $ virtualenv [你的选项] [你的 django 项目目录]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T07:03:20.060

对于使用像 Jesse 和我这样的 webfaction 来运行他的 django 应用程序但*不*使用 virtualenv 的任何人，升级后可能发生的情况是，webapp 的自定义 apache 安装从未重新启动。这意味着 stdlib 已更改，但 apache 仍使用 python 2.7.2，因为它已加载到内存中。

这种情况下的解决方案很简单：通过 ssh 登录到您的帐户并执行：

```
[username@webXX ~]$ ~/webapps/<webapp-name>/apache2/bin/restart 
```

这将重新启动 Web 服务器并导致 apache 重新加载新的解释器二进制文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T08:51:01.007

当我从源代码构建将 Python 2.6.5 更新到 2.6.8 时，我也发现了同样的错误。我还从源代码构建了 mod_wsgi，最初忘记为新版本的 Python 重新编译 mod_wsgi，这导致了关于 urandom 的相同错误。

# excel-2007 - Excel 合并数据列

> ID：10776800
> 
> 赞同：0
> 
> 时间：2012-05-27T19:56:14.847
> 
> 标签：excel-2007

我正在尝试将 excel 列合并到这样的一列中...

```
List1   List2   List3   List4   List5
1       0       0       0       0
0       1       0       0       0
0       0       1       0       0
0       0       0       1       0
0       0       0       0       1 
```

进入这个...

```
List
0
1
2
3
4 
```

如果 List1 中有 1，则合并列的值为 0 如果 List2 为 1，则合并列的值为 1，依此类推...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T20:24:14.117

如果您的数据从左上角开始，那么对于结果范围内的单元格，您可以编写数组公式，例如

```
{=SUM(A2:E2*(COLUMN(A2:E2)-1))} 
```

另一个想法是为整个结果范围编写一个数组公式

```
{=MMULT(A2:E6,{0;1;2;3;4})} 
```

# javascript - 可扩展帖子的网格，在行下方的 div 中发布内容

> ID：10776801
> 
> 赞同：0
> 
> 时间：2012-05-27T19:56:22.173
> 
> 标签：javascript, wordpress, accordion

所以我找不到自己的问题/问题的答案或解释。

我想要实现的目标非常复杂。为了说明，这里有一个 JSFiddle - [http://jsfiddle.net/GXaeL/3/](http://jsfiddle.net/GXaeL/3/)

有人可以解释一下，这甚至可以在它们下方的一个 div 中显示第一行帖子的内容。第二行帖子等也是如此。

我自己有过这样的想法：

1.  以某种方式结合 Tabs 和 Accordions？
2.  这纯粹是一个CSS定位问题？
3.  这比手风琴和 CSS 复杂得多？

从现在开始，我有一个 PHP 代码，它创建了一个帖子网格。.posts 向左浮动，当它达到 3 时该行被清除。

```
<div class="post">
<a href="<?php the_permalink() ?>" rel="bookmark">
<?php if ( has_post_thumbnail() ) {
      the_post_thumbnail('thumbnail');
} else { ?>
      <img src="<?php bloginfo('template_directory'); ?>/fallback_image.jpg" alt="<?php the_title(); ?>" />
<?php } ?>
</a>
</div>
  <?php
     if($c == $bpr) :
  ?>
  <div class="clr"></div>

<?php
   $c = 0;
   endif;
?>

<?php
  $c++;
  endwhile;
?>
<div class="clr"></div> 
```

也许有人可以将我推向正确的道路吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T00:33:26.923

我不确定您的首选实现是什么，所以我将提供几个选项。

第一个选项类似于您在 jsFiddle 上的组合，除了我将“触发器”`<div>`标签包装在`<div>`它们自己的标签中，并将“内容”标签添加到您向下和向上滑动`<div>`的单个“内容”标签中......更容易`<div>`在代码中解释：

```
 <div id="row1" class="item-info">
        <div class="item">item-1</div>      
        <div class="item">item-2</div>
        <div class="item">item-3</div>
        <div class="item">item-4</div>
    </div>
    <div id="contentRow1" class="item-info" style="display:none;">
        <div class="item-content">content div for item-1</div>      
        <div class="item-content">content div for item-2</div>
        <div class="item-content">content div for item-3</div>
        <div class="item-content">content div for item-4</div>
    </div> 
```

对于此解决方案，您使用的 jQuery 代码不需要更改。

第二个选项稍微复杂一些，但它允许单独显示每个答案，而不是必须与行中的所有其他答案一起显示。

诚然，可能有更优雅的或以 jQuery UI 为中心的解决方案，但这很好......我也会从中学习。

现在，我将在 jsFiddle 上提供[选项 2 的详细信息](http://jsfiddle.net/jimmym715/gwKq9/)，这是我从您在问题中提供的内容中分叉出来的。

如果您有任何问题，请告诉我，希望对您有所帮助。

# python - 哪个python模块用于在WINDOWS中读取CPU温度和处理器风扇速度..？

> ID：10776802
> 
> 赞同：3
> 
> 时间：2012-05-27T19:56:25.697
> 
> 标签：python

哪个python模块用于在WINDOWS中读取CPU温度和处理器风扇速度..？

探索了 WMI python 模块，但我无法找到正确的选项或函数来捕获上述信息。

实际上我尝试了以下代码片段，但它返回“无”。

```
import wmi
w = wmi.WMI()
print w.Win32_TemperatureProbe()[0].CurrentReading 
```

请提供一些建议以获取这些信息。

溴，-Srk

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T20:10:29.660

根据[微软的 MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394493%28v=vs.85%29.aspx)：

> Win32_TemperatureProbe WMI 类提供的大部分信息来自 SMBIOS。CurrentReading 属性的实时读数无法从 SMBIOS 表中提取。**因此，WMI 的当前实现不填充 CurrentReading 属性**。CurrentReading 属性的存在是为将来使用而保留的。

您可以`MSAcpi_ThermalZoneTemperature`改用：

```
import wmi

w = wmi.WMI(namespace="root\\wmi")
print (w.MSAcpi_ThermalZoneTemperature()[0].CurrentTemperature/10.0)-273.15 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-24T18:49:30.673

这完美地工作：

```
import wmi

w = wmi.WMI(namespace="root\\wmi")
print (w.MSAcpi_ThermalZoneTemperature()[0].CurrentTemperature / 10.0) - 273.15 
```

确保您以管理员身份运行程序，否则在尝试测试/运行/执行代码时它将失败或给出错误代码。

# mysql - SQL，查找两个人之间对话的最新条目

> ID：10776804
> 
> 赞同：3
> 
> 时间：2012-05-27T19:57:29.900
> 
> 标签：mysql, sql

我有一个表 Messages，其设置如下：

![在此处输入图像描述](../Images/4ff229b9e7d8c20006610f8f41837354.png)

该表存储人与人之间发送的所有消息，但是它需要像 FaceBook 的消息系统一样。

为此，我的查询需要类似于：

SELECT * FROM Messages WHERE To_User = x OR From_User = x ORDER BY Time DESC

这将按时间顺序获取发送或接收的每条消息“x”，最新消息首先出现。

然而，Facebook 的系统让它有点像一个论坛，所以我只想要一条消息，其中人 y 参与任何给定的查询结果。所以我不希望这种情况发生：

To_User：6 From_User：7 状态：我同意你的消息时间：12345

To_User：7 To_User：6 状态：你同意我的信息吗？时间：12344

假设我正在为用户 6 显示消息页面，两条消息都会显示在我当前的系统中。相反，应该只选择最上面的一条，因为我只想显示用户 6 和 7 之间的最新消息，而不是每条消息。

自然，这通常只要求一个 LIMIT 语句，但我需要能够收到很多消息，但唯一的规则是：

1- 必须是 FROM 或 TO 用户 X 2- 不能选择两条消息是 FROM 或 TO 用户 Y 3- 选择的消息必须是用户 X 和 Y 之间对话中的最新消息

这真的很难描述，但我希望我已经对它进行了足够详细的描述以提供解决方案。

我曾考虑过 GROUP BY，但我无法考虑到它需要找到一个来自或来自我的人，而不仅仅是来自或来自。

如果问题描述得不够详细，请在否决之前告诉我，我会尽力让它更详细一点，但我想不出用什么词来描述需要足够清楚地显示的内容.

编辑：

这是所需功能的一个重要示例：

假设我向 John Doe 发送了一条消息，然后立即进入我的消息页面，在最顶部会显示

“致 John Doe”“我发送的信息”

但是，如果 John Doe 回复，该条目将不再显示在页面上，它将被我和 John Doe 之间对话中的最新条目替换，因此虽然实际条目仍在数据库中，但不会显示不再：

“来自 John Doe” “你的信息很有趣”

但如果我之后给 Jane Doe 发了一封邮件，它会推动我和 John Doe 的对话，所以看起来像这样：

“致 Jane Doe” “你好”

“来自 John Doe” “你的信息很有趣”

现在有了我在这篇文章中陈述的第一个查询，结果将是：

“致 Jane Doe” “你好”

“来自 John Doe” “你的信息很有趣”

“致 John Doe”“我发送的信息”

但是，我不想显示我和 John Doe 之间的多个列，但是由于我正在查看表中的两个不同列（From 和两个）来指示我和 John Doe 是否相关，所以我不'认为常规的 GROUP BY 语句不会起作用。

现在，如果另外，Bob Joe 给我发了一条消息，它可能看起来像：

“来自鲍勃·乔”“你好”

“致 Jane Doe” “你好”

“来自 John Doe” “你的信息很有趣”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T20:07:56.533

您可以自联接表并使用外部联接，以便任何“早期”消息将“过滤掉”任何“非早期”消息。

```
SELECT * FROM Messages main LEFT JOIN Messages earlier
    ON earlier.time < main.time AND 
        (
            earlier.To_User = main.To_User AND earlier.From_User = main.From_User OR  
            earlier.To_User = main.From_User AND earlier.From_User = main.To_User
        )
WHERE (main.To_User = x OR main.From_User = x) AND earlier.id IS NULL
ORDER BY main.Time DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T20:13:41.140

如果您可以消除出现在“from”或“to”列中的人的复杂性，那么这将是在组中查找最小行的常见问题的一个实例。所以你可以从这个开始：

```
SELECT id, time, to_user as user
UNION ALL SELECT id, time, from_user as user 
```

然后将该查询的结果用作任何标准[最小行技术](http://it.toolbox.com/blogs/db2luw/finding-the-maximum-row-efficiently-12948)的输入。

# c++ - 概率密度的正交例程

> ID：10776805
> 
> 赞同：6
> 
> 时间：2012-05-27T19:57:33.623
> 
> 标签：c++, math, wolfram-mathematica

我想整合一个概率密度函数，`(-\infty, a]`因为 cdf 不能以封闭形式提供。但我不确定如何在 C++ 中做到这一点。

这个任务在 Mathematica 中非常简单；我需要做的就是定义函数，

```
f[x_, lambda_, alpha_, beta_, mu_] := 
   Module[{gamma}, 
     gamma = Sqrt[alpha^2 - beta^2]; 
     (gamma^(2*lambda)/((2*alpha)^(lambda - 1/2)*Sqrt[Pi]*Gamma[lambda]))*
      Abs[x - mu]^(lambda - 1/2)*
      BesselK[lambda - 1/2, alpha Abs[x - mu]] E^(beta (x - mu))
   ]; 
```

然后调用`NIntegrate`例程对其进行数值积分。

```
F[x_, lambda_, alpha_, beta_, mu_] := 
    NIntegrate[f[t, lambda, alpha, beta, mu], {t, -\[Infinity], x}] 
```

现在我想在 C++ 中实现同样的目标。我使用 gsl 数字库中的例程`gsl_integration_qagil`。它旨在集成半无限间隔上的功能，`(-\infty, a]`这正是我想要的。但不幸的是，我无法让它工作。

这是 C++ 中的密度函数，

```
density(double x)
{
using namespace boost::math;

if(x == _mu)
    return std::numeric_limits<double>::infinity();

    return pow(_gamma, 2*_lambda)/(pow(2*_alpha, _lambda-0.5)*sqrt(_pi)*tgamma(_lambda))* pow(abs(x-_mu), _lambda - 0.5) * cyl_bessel_k(_lambda-0.5, _alpha*abs(x - _mu)) * exp(_beta*(x - _mu));

} 
```

然后我尝试通过调用 gsl 例程来集成以获取 cdf。

```
cdf(double x)
{
gsl_integration_workspace * w = gsl_integration_workspace_alloc (1000);

    double result, error;      
    gsl_function F;
    F.function = &density;

    double epsabs = 0;
    double epsrel = 1e-12;

    gsl_integration_qagil (&F, x, epsabs, epsrel, 1000, w, &result, &error);

    printf("result          = % .18f\n", result);
    printf ("estimated error = % .18f\n", error);
    printf ("intervals =  %d\n", w->size);

    gsl_integration_workspace_free (w);

    return result;

} 
```

但是`gsl_integration_qagil`返回一个错误，`number of iterations was insufficient`.

```
 double mu = 0.0f;
 double lambda = 3.0f;
 double alpha = 265.0f;
 double beta = -5.0f;

 cout << cdf(0.01) << endl; 
```

如果我增加工作空间的大小，那么贝塞尔函数将不会计算。

我想知道是否有任何人可以让我了解我的问题。`x = 0.01`通过返回调用上述相应的 Mathematica 函数`0.904384`F。

可能是密度集中在一个非常小的区间附近（即`[-0.05, 0.05]`密度之外几乎`0`是 ，下面给出了一个图）。如果是这样，可以做些什么。谢谢阅读。

![密度](../Images/18b959517314f3db31f4cfbc191318a8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T03:56:49.013

回复：积分到 +/- 无穷大：

我会使用 Mathematica 来找到 |x - μ| 的经验界限。>> K，其中 K 表示平均值周围的“宽度”，K 是 alpha、beta 和 lambda 的函数——例如 F 小于且大约等于 a(x-μ) ^(-2)或 ae ^(- b(x-μ) ²)或其他。这些函数具有无穷大的已知积分，您可以根据经验对其进行评估。然后你可以对 K 进行数值积分，并使用有界近似从 K 到无穷大。

计算出 K 可能有点棘手。我对贝塞尔函数不是很熟悉，所以在那里我帮不了你太多。

一般来说，我发现对于不明显的数值计算，最好的方法是在进行数值评估*之前*尽可能多地进行分析数学。（有点像自动对焦相机——把它靠近你想要的地方，然后让相机做剩下的事情。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T02:46:32.030

[我在http://linux.math.tifr.res.in/manuals/html/gsl-ref-html/gsl-ref_16.html](http://linux.math.tifr.res.in/manuals/html/gsl-ref-html/gsl-ref_16.html)找到了关于这个 glsl 的完整描述 ，你可能会找到有用的信息。

由于我不是 GSL 专家，因此我没有从数学的角度关注您的问题，而是要提醒您有关浮点编程的一些关键方面。

您无法使用 IEEE 754 标准准确表示数字。MathLab 确实通过使用无限数字表示逻辑来隐藏事实，以便为您提供无错误的结果，这就是它与本机代码相比速度慢的原因。

我强烈推荐使用 FPU 参与科学微积分的任何人使用此链接：http: [//docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

假设您喜欢那篇文章，我在上面的 GSL 链接上注意到了这一点：“如果错误界限太严格，例程将无法收敛”。

如果上限和下限之间的差异小于 double 的最小可表示值，即 std::numeric_limits::epsilon();，则您的界限可能过于严格。

另外请记住，从第二个链接开始，对于任何 C/C++ 编译器实现，默认舍入模式是“截断”，这会引入导致错误结果的细微微积分错误。我确实遇到了一个简单的 Liang Barsky 剪线器的问题，一阶！所以想象一下这一行的混乱：

```
return pow(_gamma, 2*_lambda)/(pow(2*_alpha, _lambda-0.5)*sqrt(_pi)*tgamma(_lambda))* pow(abs(x-_mu), _lambda - 0.5) * cyl_bessel_k(_lambda-0.5, _alpha*abs(x - _mu)) * exp(_beta*(x - _mu)); 
```

作为一般规则，在 C/C++ 中添加额外的变量来保存中间结果是明智的，这样您就可以逐步调试，然后看到任何舍入错误，您不应该尝试在任何本机编程中输入这样的表达式语言。不能比编译器更好地优化变量。

最后，作为一般规则，除非您对微积分的动态行为有信心，否则您应该先乘以再除。

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T00:24:35.527

我没有尝试过 C++ 代码，但是通过检查 Mathematica 中的函数，它似乎在 mu 附近达到了极高的峰值，峰值的扩散由参数 lambda、alpha、beta 决定。

我要做的是对 pdf 进行初步搜索：查看 x=mu 的右侧和左侧，直到找到低于给定容差的第一个值。使用这些作为 cdf 的边界，而不是负无穷大。

伪代码如下：

```
x_mu
step = 0.000001
adaptive_step(y_value) -> returns a small step size if close to 0, and larger if far.

while (pdf_current > tolerance):
  step = adaptive_step(pdf_current)
  xtest = xtest - step
  pdf_current = pdf(xtest)

left_bound = xtest

//repeat for left bound 
```

考虑到这个函数的峰值似乎有多紧密，收紧边界可能会为您节省大量当前浪费在计算零上的计算机时间。此外，您可以使用有界积分例程，而不是 -\infty,b 。

只是一个想法...

PS：Mathematica 给我 F[0.01, 3, 265, -5, 0] = 0.884505

# java - java中的类型转换

> ID：10776806
> 
> 赞同：3
> 
> 时间：2012-05-27T19:57:35.077
> 
> 标签：java

```
int n ;
n= (int)( javax.swing.JOptionPane.showInputDialog(null,"enter a 3 digit no.")); 
```

为什么上面给出了错误 [required int, found string] 而下面的工作正常？

```
int n ;
n= Integer.parseInt( javax.swing.JOptionPane.showInputDialog(null,"enter a 3 digit no.")); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T19:59:51.737

[`Integer.parseInt`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)不使用强制转换，而是使用简单的算法将字符串中的数字解释为数字。转换由 JVM 直接在原始值上完成，或者由编译器在对象引用上完成。它可以`4.5`变成`4`（*类型转换*，因为它改变了基础值）和（*引用转换*`ArrayList`，因为它不修改实例），但它不能本地[解析或格式化数字。](http://docs.oracle.com/javase/tutorial/java/data/converting.html)`List`

 ** * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-27T20:00:35.137

类型转换不是类型转换，不要混淆术语。强制转换意味着将相同的二进制表示重新解释为另一种类型的值。在 Java 中存在**转换**，但仅限于原始数值之间。String 是一种引用类型，我想你知道这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T20:04:13.610

Java 只允许您进行有效的强制转换，即它知道如何进行的强制转换。将字符串转换为 int 是荒谬的；解析它不是。*

# ios - 从 Parse.com 抓取 NSString 并将其粘贴到 UILabel

> ID：10776809
> 
> 赞同：2
> 
> 时间：2012-05-27T19:58:06.983
> 
> 标签：ios, cocoa-touch, nsstring, parse-platform

我想从 Parse.com 获取一个 NSString 并将其粘贴到我的 iOS 应用程序中的标签中。

有谁知道该怎么做？我遇到了很多问题：/

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T22:47:14.717

反问是“你想得到哪个 NSString”？我认为这是您要显示的 PFObject 的某些属性，对吗？是什么让这个属性如此有趣？

假设您要显示*作者*为*Hemmingway*的*Book*的*标题*。

 ***首先你要找到对象：

```
PFQuery *query = [PFQuery queryWithClassName:@"Book"];  // I want to find a book
[query whereKey:@"author" equalTo:@"Hemmingway"];       // authored by hemmingway
PFObject *book = [query findFirstObject];               // go get it! 
```

然后你只需阅读它的属性`objectForKey`

```
myLabel.text = [book objectForKey:@"title"]; 
```

查看[iOS 指南](http://parse.com/docs/ios_guide)了解更多高级问题。如果您计划显示许多 PFObject 的许多属性，您可能需要查看[PFQueryTableViewController](https://parse.com/docs/ios_guide#ui-tables)***

# php - 不同的 htaccess mod_rewrite

> ID：10776813
> 
> 赞同：0
> 
> 时间：2012-05-27T19:58:38.100
> 
> 标签：php, .htaccess, mod-rewrite, seo

我正在尝试为我的网站进行 SEO 排序，但我似乎无法弄清楚这种情况。

我想要 4 个查询参数，, `$cat`, `$subcat`,`$page``$othervars`

但我需要一个 htaccess 规则来允许这些值：

1.  domain.com/cat/page
2.  domain.com/cat/subcat/page
3.  domain.com/cat
4.  domain.com/cat/subcat/page/其他

我怎样才能做到这一点，到目前为止我所拥有的是：

```
RewriteEngine On
RewriteRule ^([^/]*)/([^/]*)/([^/]*)/([^/]*)$ /beta/index.php?cat=$1&cat2=$2&page=$3&var=$4 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T20:04:49.107

改为在 PHP 中进行解析！

.htaccess：

```
RewriteEngine On
RewriteRule ^(.*)$ /beta/index.php?var=$1 [L] 
```

...在 index.php 中

```
$vars = explode("/",$_GET['var']);
$cat = isset($vars[0]) ? $vars[0] : false;
$subcat = isset($vars[1]) ? $vars[1] : false;
$page = isset($vars[2]) ? $vars[2] : false;
$othervars = isset($vars[3]) ? $vars[3] : false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T20:50:31.110

```
RewriteEngine On
RewriteRule ^([^/]+)/?$ /beta/index.php?cat=$1 [L]
RewriteRule ^([^/]+)/([^/]+)/?$ /beta/index.php?cat=$1&page=$2 [L]
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/?$ /beta/index.php?cat=$1&cat2=$2&page=$3 [L]
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/([^/]+)/?$ /beta/index.php?cat=$1&cat2=$2&page=$3&var=$4 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T20:08:20.767

我认为这些使用 4 RewriteRules 会更好：

```
RewriteEngine On
RewriteRule ^([^/]+)/?$ /beta/index.php?cat=$1 [L,R=301]
RewriteRule ^([^/]+)/([^/]+)/?$ /beta/index.php?cat=$1&page=$2 [L,R=301]
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/?$ /beta/index.php?cat=$1&cat2=$2&page=$3 [L,R=301]
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/([^/]+)/?$ /beta/index.php?cat=$1&cat2=$2&page=$3&var=$4 [L,R=301] 
```

# php - 安装学说装置

> ID：10776815
> 
> 赞同：0
> 
> 时间：2012-05-27T19:58:58.573
> 
> 标签：php, git, symfony, doctrine

我想安装带有文件 deps 的学说装置。我将此行添加到我的文件 deps 中：

```
[doctrine-fixtures]
    git=http://github.com/doctrine/data-fixtures.git

[DoctrineFixturesBundle]
    git=http://github.com/symfony/DoctrineFixturesBundle.git
    target=/bundles/Symfony/Bundle/DoctrineFixturesBundle 
```

如果我跑

```
php bin/vendors install 
```

我有错误：

```
>Installing/Updating  doctrine-fixtures
fatal: Not a git repository <or any of parent directories>: .git
fatal: Not a git repository <or any of parent directories>: .git
fatal: Not a git repository <or any of parent directories>: .git 
```

我也尝试过`php bin/vendors install --reinstall`，`git=https://github.com/doctrine/data-fixtures.git`但没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:34:24.423

这可能听起来很疯狂，但如果这是您在 deps 文件中的最后一行，请尝试在其后添加新行。我有类似的问题，没有 EOL 和 bundle 无法安装。

# java - 在文件中保存数据库模式使用java？

> ID：10776817
> 
> 赞同：2
> 
> 时间：2012-05-27T19:59:22.637
> 
> 标签：java, hibernate, jdbc

嗨，我需要将数据库模式保存在一个文件中。就像 Hibernate 在其 hbm 文件中所做的那样（保存表名、列名和类型以及主外键）是否有模式来做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T20:17:55.477

您可以使用休眠类`org.hibernate.tool.hbm2ddl.SchemaExport`

您可以将您的 Hibernate 配置传递给它，然后使用方法[execute() 来](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/tool/hbm2ddl/SchemaExport.html#execute%28boolean,%20boolean,%20boolean,%20boolean%29)打印模式。

这是一个代码示例：

```
Configuration cfg = new Configuration();
cfg.addResource(mappingFile);  // mapping to your hibernate mapping xml
cfg.setProperties(props);  // hibernate configuration properties, like dialect, connection url, etc.

SchemaExport schemaExport = new SchemaExport(cfg);
schemaExport.setDelimiter(";");
schemaExport.setOutputFile("database-script.sql");
schemaExport.setFormat(true);
schemaExport.execute(false, false, false, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T21:22:02.223

DBlook 会为您做到这一点。

[http://www-304.ibm.com/support/docview.wss?uid=swg21381009](http://www-304.ibm.com/support/docview.wss?uid=swg21381009)

[http://db.apache.org/derby/javadoc/publishedapi/jdbc4/org/apache/derby/tools/dblook.html](http://db.apache.org/derby/javadoc/publishedapi/jdbc4/org/apache/derby/tools/dblook.html)

# javascript - clearTimeout() 不起作用

> ID：10776828
> 
> 赞同：0
> 
> 时间：2012-05-27T20:01:20.427
> 
> 标签：javascript

当我双击时，似乎`clearTimeout(timer)`不起作用，并且代码调用了`function activated(currentactiveid);`

`setTimeout("activated2('" + currentactiveid + "')", 2000);`还要引用里面的函数 `timer`。所以最后我认为问题在于`clearTimeout`找不到变量`timer`。

**HTML：**

```
<td class='td2'  id='currentid1' ondblclick='activatedd(this);' onclick='dclickornot(this);'>Some Text</td> 
```

**Javascript：**

```
// Single Click 
function dclickornot(e)
{
    var currentactiveid = e.id;
    var timer = setTimeout("activated2('" + currentactiveid + "')", 2000);
}

// Double Click
function activatedd(e)
{
    clearTimeout(timer);
    var currentactiveid = e.id;
    activated(currentactiveid);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T20:05:34.993

在 JavaScript 中，变量是在函数的范围内定义的。因此，您必须改用全局变量。不过，这仍然不能阻止多次单击。

```
(function () {
    'use strict';

    var timer, currentactiveid;

    // Single Click 
    function dclickornot(e) {
        currentactiveid = e.id;
        timer = window.setTimeout(function () {activated2(currentactiveid); }, 2000);
    }

    // Double Click
    function activatedd(e) {
        window.clearTimeout(timer);
        timer = undefined;
        currentactiveid = e.id;
        activated(currentactiveid);
    }
}()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T20:03:34.733

您需要从计时器前面删除“var”。它的范围被锁定到 dclickornot() 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T20:06:41.577

您的计时器变量在函数内声明，并且超出了已激活函数的范围。要解决它，请在两个函数之外的全局范围内声明 timer。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T20:06:50.030

在 javascript 中，函数内部使用的“var”关键字创建了一个局部变量，该变量只能从该函数内部或在该函数下创建的作用域链中看到。

在您的情况下，“clearTimeout(timer);” 正在使用始终未定义的计时器变量。

# ios - 适用于 iOS 的简单水平按钮栏

> ID：10776829
> 
> 赞同：0
> 
> 时间：2012-05-27T20:01:51.900
> 
> 标签：ios, user-interface, components, uitabbar, uitoolbar

我需要一个非常简单的按钮栏。

*   它应该占据屏幕的宽度。
*   它应该允许至少 3 个按钮。
*   按钮的宽度应该相等，并且一起占据栏的整个宽度。
*   每个按钮都应该是可点击的，但没有选中状态。
*   该栏将覆盖在 MapView 上并直接位于 TabBar 上方。
*   点击一个按钮将启动一个模态视图控制器。

我考虑过使用 UITabBar 并且不允许其选项卡被选中，但是 HIG 很清楚这不是正确的用法，并且 UIToolBar 不允许设置按钮宽度。

这似乎是一个非常简单的要求，但我看不到明显的解决方案。有什么我想念的吗？任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T20:20:44.427

仅仅创建一个绘制适当渐变的简单视图，然后添加三个适当大小的按钮有什么问题？

如果你觉得雄心勃勃，或者如果这是你可能不止一次使用的东西，你甚至可以让视图创建三个按钮。叫它`ThreeButtonBar`什么的。给它一个恒定的高度并调整宽度以匹配其父视图的宽度，以便您可以纵向或横向使用它。

# python - 带有错误处理的 Geopy

> ID：10776834
> 
> 赞同：1
> 
> 时间：2012-05-27T20:02:36.907
> 
> 标签：python, geopy

我有一些带有错误处理的 Python 代码，但由于某种原因，代码似乎仍然无法处理这个特定的错误：

```
raise GQueryError("No corresponding geographic location could be found for the     specified location, possibly because the address is relatively new, or because it may be incorrect.")
geopy.geocoders.google.GQueryError: No corresponding geographic location could be found for the specified location, possibly because the address is relatively new, or because it may be incorrect. 
```

这是来源：

```
import csv
from geopy import geocoders
import time

g = geocoders.Google()

spamReader = csv.reader(open('locations.csv', 'rb'), delimiter='\t', quotechar='|')

f = open("output.txt",'w')

for row in spamReader:
    a = ', '.join(row)
    #exactly_one = False
    time.sleep(1)

    try:
        place, (lat, lng) = g.geocode(a)
    except ValueError:
        #print("Error: geocode failed on input %s with message %s"%(a, error_message))
        continue 

    b = str(place) + "," + str(lat) + "," + str(lng) + "\n"
    print b
    f.write(b) 
```

我没有包含足够的错误处理吗？我的印象是“除了 ValueError”会处理这种情况，但我一定是错的。

提前感谢您的帮助！

PS我把它从代码中提取出来了，但我还不知道它的真正含义：

```
 def check_status_code(self,status_code):
    if status_code == 400:
        raise GeocoderResultError("Bad request (Server returned status 400)")
    elif status_code == 500:
        raise GeocoderResultError("Unkown error (Server returned status 500)")
    elif status_code == 601:
        raise GQueryError("An empty lookup was performed")
    elif status_code == 602:
        raise GQueryError("No corresponding geographic location could be found for the specified location, possibly because the address is relatively new, or because it may be incorrect.")
    elif status_code == 603:
        raise GQueryError("The geocode for the given location could be returned due to legal or contractual reasons")
    elif status_code == 610:
        raise GBadKeyError("The api_key is either invalid or does not match the domain for which it was given.")
    elif status_code == 620:
        raise GTooManyQueriesError("The given key has gone over the requests limit in the 24 hour period or has submitted too many requests in too short a period of time.") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T21:03:27.790

现在 try/except 只捕获`ValueError`s。要捕获`GQueryError`，请将`except ValueError:`行替换为：

```
except (ValueError, GQueryError): 
```

或者，如果 GQueryError 不在您的命名空间中，您可能需要这样的东西：

```
except (ValueError, geocoders.google.GQueryError): 
```

或者捕获 ValueError 和以下列出的所有错误`check_status_code`：

```
except (ValueError, GQueryError, GeocoderResultError, 
        GBadKeyError, GTooManyQueriesError): 
```

（再次，`geocoders.google.`如果它们不在您的命名空间中，则将错误位置添加到所有地理错误的前面。）

或者，如果您只想捕获所有可能的异常，您可以简单地执行以下操作：

```
except: 
```

但这通常是不好的做法，因为它还会捕获`place, (lat, lng) = g.geocode(a)`您不希望捕获的行中的语法错误之类的东西，因此最好检查 geopy 代码以查找它可能抛出的所有可能的异常想抓。希望所有这些都列在您找到的那段代码中。

# objective-c - JTRevealSidebar 从 tableview 初始化

> ID：10776836
> 
> 赞同：1
> 
> 时间：2012-05-27T20:03:28.167
> 
> 标签：objective-c, ios, xcode, uitableview

我想在我的项目中实现 JTRevealSidebar 项目（与 facebook 应用程序中的侧边栏非常相似的侧边栏功能）。我唯一的问题是我要初始化侧边栏的主视图是 UITableView，而不是设置 JTRevealSidebar 的 UIView。有没有人尝试过使用 tableview 进行设置或知道是否可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:41:53.163

您可以在 sidebarDelegate 回调中返回 UIViews 的任何子类

```
- (UIView *)viewForLeftSidebar {
    // Use applicationViewFrame to get the correctly calculated view's frame
    // for use as a reference to our sidebar's view 
    CGRect viewFrame = self.navigationController.applicationViewFrame;
    UIView *anyView = self.leftView;
    if ( ! anyView) {
       anyView = [[AnySubclassOfUIView alloc] initWithFrame:viewFrame];
       [self.view addSubview:anyView];
    }

    return anyView;
} 
```

# cocoa - 副显示器上的可可全屏无空白主显示器mac

> ID：10776838
> 
> 赞同：0
> 
> 时间：2012-05-27T20:03:35.917
> 
> 标签：cocoa, fullscreen

有没有办法在第二个显示器上获得全屏窗口而不使第一个显示器空白？当您拖动一个窗口然后按 command-F 时，Quicktime 会执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:48:57.387

您可以使用`-[NSView enterFullScreenMode:withOptions:]`.

或者，您可以创建或配置一个无边框窗口，其内容矩形与所需的框架一致，`NSScreen`并将其窗口级别设置为`NSMainMenuWindowLevel + 1`.

这两个都早于 Lion 的全屏功能，因此工作方式不同。

# c# - C# - Visual C# 中这条语句的目的是什么？

> ID：10776844
> 
> 赞同：2
> 
> 时间：2012-05-27T20:04:30.307
> 
> 标签：c#, object, initialization

我想我在这里有一个相当基本的问题。我不是想浪费你的时间，但我只是不知道谷歌什么才能得到一个好的答案。我的问题与对象初始化有关。以 Head First C# 书中的以下示例为例：

```
using System;
using etc...

namespace Bees
{
   public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            Queen queenie = new Queen(workers, Report); //Queen is a created class
        }
        Queen queenie; //This is the line I'm curious about

        private void assignButton_Click(object sender, EventArgs e)
        {
            Report.AppendText(queenie.AssignWork(comboBox1.SelectedItem.ToString(), (int)shifts.Value));
        }

        private void button1_Click(object sender, EventArgs e)
        {
            queenie.WorkNextShift();
        }
... 
```

如果我已经通过说 实例化了一个 Queen 对象`Queen queenie = new Queen(...);`，那么该`Queen queenie`行的用途是什么，它的范围是什么？我在这里误解了什么关键概念？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-27T20:06:02.463

它看起来像代码中的错误。大概是这个意思：

```
public Form1()
{
    InitializeComponent();
    queenie = new Queen(workers, Report);
}

Queen queenie; //This is where the reference to the constructed Queen is stored 
```

该行`Queen queenie;`声明了一个类型的字段，该字段`Queen`可以从实例的所有方法访问，但不能从类外部访问。

如果您不确定其中一些术语的含义，我建议您遵循更温和的教程：

*   [https://stackoverflow.com/questions/4807574/best-c-sharp-programing-books-for-absolute-beginner-or-someone-just-starting-wit](https://stackoverflow.com/questions/4807574/best-c-sharp-programing-books-for-absolute-beginner-or-someone-just-starting-wit)

或者，如果您已经超出了当年的图书预算，请浏览一些免费的在线文档：

*   [课程](http://msdn.microsoft.com/en-us/library/x9afc042)
*   [对象](http://msdn.microsoft.com/en-us/library/ms173110)
*   [字段](http://msdn.microsoft.com/en-us/library/ms173118.aspx)
*   [成员](http://msdn.microsoft.com/en-us/library/ms173113)
*   [方法](http://msdn.microsoft.com/en-us/library/ms173114)
*   [访问修饰符](http://msdn.microsoft.com/en-us/library/ms173121)

# php - 使用 PHP 的 file_get_contents 在 cPanel 中创建 FTP 帐户

> ID：10776845
> 
> 赞同：0
> 
> 时间：2012-05-27T20:04:32.010
> 
> 标签：php, curl, ftp, cpanel, file-get-contents

我正在尝试在处理 PHP 表单时创建一个新的 ftp 帐户。如果我在浏览器的地址栏中输入此地址：

`http://cpanel_username:cpanel_password@$mydomain.com:2082/json-api/cpanel?cpanel_jsonapi_version=2&cpanel_jsonapi_module=Ftp&cpanel_jsonapi_func=addftp&user=ftp_username&pass=ftp_password&homedir=/the/users/homefolder&quota=0`

... json 格式的结果显示在屏幕上，并按指定创建一个 ftp 帐户。但是，当我在 PHP 文件中使用它时，我无法让它工作！这是我所拥有的：

```
$user = "cpanel_username";
$pass = "cpanel_password";
$domain = "mydomain.com";
$fuser = "ftp_username";
$fpass = "ftp_password";
$fhomedir = "/the/users/homefolder";

$url = "http://$user:$pass@$domain:2082/json-api/cpanel?cpanel_jsonapi_version=2&cpanel_jsonapi_module=Ftp&cpanel_jsonapi_func=addftp&user=$fuser&pass=$fpass&homedir=$fhomedir&quota=0";

file_get_contents($url); 
```

我也尝试使用 CURL：

```
function new_get_file_contents($url) {
$ch = curl_init();
$timeout = 10; 
curl_setopt ($ch, CURLOPT_URL, $url);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
$file_contents = curl_exec($ch); 
curl_close($ch);
return $file_contents;
}

new_get_file_contents($url); 
```

任何想法为什么我不能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-03T15:42:55.023

# 久经考验...

您需要输入变量

```
$cpaneluser = Your cpanel username
$cpanelpass = Your cpanel password
$domain = your domain name ( xyz.com )
$fuser = ftp username
$fpass = ftp password
$homedir = ftp directory 
```

* * *

```
$url = "http://$cpaneluser:$cpanelpass@$domain:2082/json-api/cpanel?";
$url .= "cpanel_jsonapi_version=2&cpanel_jsonapi_module=Ftp&cpanel_jsonapi_func=addftp&";
$url .= "user=$fuser&pass=$fpass&homedir=$fhomedir&quota=0";

var_dump($url);
$result = @file_get_contents($url);
if ($result === FALSE) 
die("ERROR: FTP Account not created. Please make sure you passed correct parameters.");
echo $result; 
```

希望能帮助到你..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T20:11:25.303

它可能不起作用，因为 cURL 无权访问 cPanel 会话/cookie。直接在 Web 浏览器中输入 URL，因为浏览器在请求之间保留 cPanel 会话状态。解决此问题的唯一方法是首先使用 cURL 和 HTTP POST 请求登录到 cPanel。

FireBug 和 Fiddler 等工具可以帮助您查看登录时发送的 HTML 表单元素或确切的 HTTP POST 字段，包括 HTTP 标头。使用 cURL 模拟登录表单过程，然后包含您的代码应该可以解决问题。

这可能会帮助您继续前进：

*   [http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)
*   [http://getfirebug.com/](http://getfirebug.com/)
*   [带有 curl 的 https 登录页面](https://stackoverflow.com/questions/5227259/https-login-page-with-curl)

# jquery - Jquery ColorBox：像画廊一样显示内联内容

> ID：10776848
> 
> 赞同：1
> 
> 时间：2012-05-27T20:05:00.490
> 
> 标签：jquery, colorbox

我正在尝试使用名为 ColorBox (http://colorpowered.com/colorbox/) 的 Jquery Lightbox，但遇到了一些麻烦。

我想使用灯箱来显示内联内容，但也会出现下一个和上一个按钮。这样，就像在照片库中一样，我可以浏览所有与下一个和上一个按钮共享相同 id 属性的项目。如果我将它硬编码到模板中，它可以工作，但如果我像粘贴在帖子末尾那样自动化它，它就不会。

我经常添加一个新元素，所以在开头添加一个新元素需要的时间比我想要的要长。所以我自动化了这个过程，生成的代码看起来和你的一模一样（在你的帖子中），但是颜色框不起作用。有人现在如何修复它（如果可能的话）？帮助将不胜感激。

这有效：

```
<p><a class="group1" href="#box1">Grouped Photo 1</a></p>
<p><a class="group1" href="#box2">Grouped Photo 2</a></p>
<p><a class="group1" href="#box3">Grouped Photo 3</a></p>

<div id="box1">
  Some text in box 1 Some text in box 1
  Some text in box 1
  Some text in box 1
  Some text in box 1
  Some text in box 1
</div>

<div id="box2">
  Some text in box 2
  Some text in box 2
  Some text in box 2
  Some text in box 2
  Some text in box 2        
</div>

<div id="box3">
  Some text in box 3
  Some text in box 3
  Some text in box 3
  Some text in box 3
  Some text in box 3                
</div> 
```

如果我像这样编辑上面的代码，它不会

```
<div class="links">
 <p><a class="group1">Grouped Photo 1</a></p>
 <p><a class="group1">Grouped Photo 2</a></p>
 <p><a class="group1">Grouped Photo 3</a></p>
</div>
<div class="boxes">
        <div>
          Some text in box 1 Some text in box 1
          Some text in box 1
          Some text in box 1
          Some text in box 1
          Some text in box 1
        </div>

        <div>
          Some text in box 2
          Some text in box 2
          Some text in box 2
          Some text in box 2
          Some text in box 2        
        </div>

        <div>
          Some text in box 3
          Some text in box 3
          Some text in box 3
          Some text in box 3
          Some text in box 3                
        </div> 
</div> 
```

和 javascript：

```
$('.links a').each(function(index) {
    $(this).attr("href","#box"+index);
});
$('.boxes div').each(function(index) {
    $(this).attr("id","#box"+index);
});
$(".group1").colorbox({rel:'group1', inline:true, href:$(this).attr('href'), width:"60%"}); 
```

这会遍历所有链接并将它们添加到与链接在 href 属性中具有相同的 id

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:19:20.173

没关系，我发现了一个愚蠢的小错误。

```
$('.boxes div').each(function(index) {
     $(this).attr("id","#box"+index);
}); 
```

并修复它：

```
$('.boxes div').each(function(index) {
    $(this).attr("id","box"+index);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:42:47.003

Colorbox 将下一个和上一个按钮添加到通过共享 rel 属性创建的组中。您所要做的就是添加`rel="group1"`您`class="group1"`在第一个代码示例中的位置，然后按钮就会出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T04:15:12.803

Colorbox 在调用时通过查看 DOM 元素来设置其所有内部结构。这意味着如果您在 Colorbox 的设置事件之后添加属性，插件将看不到它们。

确保在您运行 HREF 和 ID 分配之前推迟您对 Colorbox 的调用，看看这是否会改变您所追求的行为。

# php - 在模式中查找并连接结果

> ID：10776857
> 
> 赞同：0
> 
> 时间：2012-05-27T20:06:33.153
> 
> 标签：php, regex, visual-studio-2010, textmate, replace

*我有一个很长的*PHP 文件，我只想复制所有变量名并构建一个插入 sql 查询。有没有一种方法可以使用正则表达式搜索模式并将查找结果连接起来，直到我收集所有变量并在语句中将其吐出？

我正在使用 TextMate 并且熟悉正则表达式搜索。正则表达式搜索结果给出 $0、$1 等参数。不知道这是否可能。任何编辑器中的解决方案都不会只是文本匹配。

我有太多变量（+100）不想复制每一个。这是我的示例文件

```
$ID = $_POST['id'];
$TXN_TYPE = $_POST['txn_type'];
$CHARSET = $_POST['charset']
$CUSTOM = $_POST['custom']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T20:34:54.510

您可以尝试使用 get_defined_vars()。然而，这个函数也列出了 GLOBAL 变量。如果您不想要它们，可以使用此代码段删除它们并仅显示您定义的变量

$variables = array_diff(get_defined_vars(), array(array()));

但是这个片段会生成通知，我还没有找到解决它们的方法。

如果您只有 $_POST 变量，您可以循环遍历 $_POST 数组本身 您在循环遍历数组时以编程方式创建 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T20:27:48.697

我自己的解决方案是，做相反的事情。这可能是不可能的。

只保留变量名删除所有其余的。利用

```
[space].+  regex to remove everything that is after the variable name. 
```

清理文件，以便只留下变量名。然后再做几个查找和替换，以您想要的形式带来变量名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T20:41:37.200

如果您只想匹配变量名（而不是数组索引），那么[PHP 文档](http://www.php.net/manual/en/language.variables.basics.php)`$_POST`中几乎提供了正则表达式：

```
\$[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]* 
```

当然，这将包括 $_POST，但这应该很容易删除。如果没有，你可以用负前瞻来做（如果 TextMate 支持它）：

```
\$(?!_POST($|[^a-zA-Z0-9_\x7f-\xff]))[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]* 
```

# android - 退出并重新进入应用程序后从 AsyncTask 更新 UI

> ID：10776859
> 
> 赞同：0
> 
> 时间：2012-05-27T20:06:37.930
> 
> 标签：android

我目前正在开发一个在后台运行 AsyncTask 并使用进度条更新 UI 的应用程序。应用程序运行时进度条可以正常工作，但是，当用户退出应用程序并重新进入时，AsyncTask 仍在后台运行，但进度条不会更新。就好像 AsyncTask 已经从活动中分离出来了。有没有人知道可能导致这种情况的原因，例如涉及 AsyncTasks 的一般规则。如果需要，我可以提供代码，但它相当冗长，所以请告诉我您需要查看哪些部分。我还应该注意到 AsyncTask 确实完成了，我可以告诉这一点，因为它在完成时会将数据库上传到服务器。

这是代码：

公共类 BackgroundAsyncTask 扩展 AsyncTask { int myProgress;

```
 @Override
    protected void onPostExecute(Void result) {
        ((TextView) findViewById(R.id.tv1)).setText("");
        Cursor cur = sql3.query("videohashes", null, null, null, null,
                null, null);
        cur.moveToFirst();
        while (!cur.isAfterLast()) {

            Cursor curFrame = sql3.query("table_" + cur.getString(2), null,
                    null, null, null, null, null);
            curFrame.moveToFirst();

            ((TextView) findViewById(R.id.tv1)).append("\nPath: "
                    + cur.getString(1) + "\nHash: " + cur.getString(2)
                    + "\nDate:" + cur.getString(3) + "\nSize: "
                    + cur.getString(4) + " bytes\nResolution"
                    + cur.getString(5) + "\nFormat: " + cur.getString(6)
                    + "\nCodec: " + cur.getString(7) + "\nFPS: "
                    + cur.getString(8) + "\n\nFirst Frame Info:\nType: "
                    + curFrame.getString(1) + "\ncp_num: "
                    + curFrame.getString(2) + "\ndp_num: "
                    + curFrame.getString(3) + "\npts: "
                    + curFrame.getString(4) + "\nqstride: "
                    + curFrame.getString(5) + "\nsize: "
                    + curFrame.getString(6) + "\nqp_stddev: "
                    + curFrame.getString(7) + "\ncount: "
                    + curFrame.getString(8) + "\nqp_avg: "
                    + curFrame.getString(9) + "\n\n");

            cur.moveToNext();
        }
        cur.close();
        ((Button) findViewById(R.id.btnSend)).setEnabled(true);
        ((Button) findViewById(R.id.btnStart)).setEnabled(true);
        sql3.close();
        sharedPreferences.edit().putString("lastVideoInfo", ((TextView) findViewById(R.id.tv1)).getText().toString()).commit();
        sharedPreferences.edit().putBoolean("asyncTaskRunning", false).commit();
        dateNow = new Date();
        super.onPostExecute(result);
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        totProgress = 0;
        currVid = 0;
        curProgress = 0;
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        progress.setProgress(values[0]);
    }

    @Override
    protected Void doInBackground(Void... arg0) {

        // Calculate total size of all files
        for (String path : myFiles) {
            totProgress += getFileSize(path);
        }

        progress.setMax(totProgress);
        String strDB3File = getFilesDir().getPath() + "/VideoHashes.db3";
        sql3 = SQLiteDatabase.openDatabase(strDB3File, null,
                SQLiteDatabase.CREATE_IF_NECESSARY);

        try {
            String mysql = "CREATE TABLE IF NOT EXISTS videohashes (id INTEGER  NOT NULL PRIMARY KEY AUTOINCREMENT, path TEXT NOT NULL, hash TEXT NOT NULL, date TEXT NOT NULL, size INTEGER, resolution TEXT NOT NULL, codec TEXT NOT NULL, format TEXT NOT NULL, fps TEXT NOT NULL)";
            sql3.execSQL(mysql);
        } catch (SQLiteException e) {
            // TODO: handle exception
        }

        for (String path : myFiles) {
            try {

                String hash = getMD5Checksum(path);

                Cursor curFrame = sql3.query("videohashes",
                        new String[] { "hash" }, "hash=?",
                        new String[] { hash }, null, null, null);

                if (!curFrame.moveToFirst()) {
                    ContentValues myInsertData = new ContentValues();
                    myInsertData.put("path", path);
                    myInsertData.put("hash", hash);
                    Date date = new Date();
                    myInsertData.put("date", dateFormat.format(date));
                    myInsertData.put("size", getFileSize(path));

                    naInit(path);
                    Log.i("VPMA", "After naInit");
                    int[] prVideoRes = naGetVideoResolution();
                    myInsertData.put("resolution", prVideoRes[0] + "x"
                            + prVideoRes[1]);
                    String prVideoCodecName = naGetVideoCodecName();
                    myInsertData.put("codec", prVideoCodecName);
                    String prVideoFormatName = naGetVideoFormatName();
                    myInsertData.put("format", prVideoFormatName);
                    double prFps = naGetVideoFPS();
                    Log.i("VPMA", "fps: " + prFps);
                    myInsertData.put("fps", prFps);
                    Object[] prObjArray = naGetArray();
                    Log.i("VPMA", (String) prObjArray[0]);
                    String[] prStrArray = Arrays.copyOf(prObjArray,
                            prObjArray.length, String[].class);
                    Log.i("VPMA", "before frames");
                    try {
                        String mysql = "CREATE TABLE table_"
                                + hash
                                + " (id INTEGER  NOT  NULL PRIMARY KEY AUTOINCREMENT, type TEXT NOT NULL, cp_num TEXT NOT NULL, dp_num TEXT NOT NULL, pts TEXT NOT NULL, qstride TEXT NOT NULL, size TEXT NOT NULL, qp_stddev TEXT NOT NULL, count TEXT NOT NULL, qp_avg TEXT NOT NULL)";
                        sql3.execSQL(mysql);
                    } catch (SQLiteException e) {
                        // TODO: handle exception
                    }
                    for (String str : prStrArray) {
                        ContentValues myFrameInsertData = new ContentValues();
                        String[] strArr = str.split(",");
                        if (strArr.length == 9) {
                            String stddev = "", strCount = "", strQp_avg = "";
                            double sd, qp_avg, count = 0, sum = 0, sqrSum = 0;
                            try {
                                count = Integer.parseInt(strArr[6].trim());
                                sum = Integer.parseInt(strArr[7].trim());
                                sqrSum = Integer.parseInt(strArr[8].trim());

                                //sd = (sum * sum / count);
                                sd = (sqrSum - (sum*sum/count))/(count-1);//(sqrSum - sd) / (count - 1);
                                stddev = String.valueOf(sd);
                                qp_avg = sum / count;
                                strCount = String.valueOf(count);
                                strQp_avg = String.valueOf(qp_avg);
                            } catch (Exception e) {
                                Log.i("Error: ", "error converting values");
                            }
                            //Log.i("Java Code: ", "Sum: " + sum + " SqrSum: " + sqrSum + " Count: " + count);
                            //Log.i("Java Code: ", "StdDev: " + stddev + " qp_avg: " + strQp_avg);
                            myFrameInsertData.put("type", strArr[0]);
                            myFrameInsertData.put("cp_num", strArr[1]);
                            myFrameInsertData.put("dp_num", strArr[2]);
                            myFrameInsertData.put("pts", strArr[3]);
                            myFrameInsertData.put("qstride", strArr[4]);
                            myFrameInsertData.put("size", strArr[5]);
                            myFrameInsertData.put("qp_stddev", stddev);
                            myFrameInsertData.put("count", strCount);
                            myFrameInsertData.put("qp_avg", strQp_avg);

                            sql3.insert("table_" + hash, null,
                                    myFrameInsertData);
                        }
                    }
                    sql3.insert("videohashes", null, myInsertData);
                    naClose();
                }
                curFrame.close();
                currVid++;
                curProgress += getFileSize(path);
                publishProgress(curProgress);
                Log.i("Progress", "CurrVid:" + currVid + "  Max:"
                        + progress.getMax());
            } catch (Exception e) {
                Log.i("File", "File not Found");
            }
        }
        return null;
    }
}
    }
    if (sharedPreferences.getBoolean("asyncTaskRunning", false) == false)
    {
        ((Button) findViewById(R.id.btnStart)).setEnabled(false);
        progress = (ProgressBar) findViewById(R.id.progressBar1);
        text = (TextView) findViewById(R.id.tv1);
        if (sharedPreferences.contains("lastVideoInfo"))
        {
            text.setText("Last Video Information Parsed " + "(" + dateFormat.format(dateNow) + "):\n\n" +  sharedPreferences.getString("lastVideoInfo", ""));
            ((Button) findViewById(R.id.btnSend)).setEnabled(true);
        }
        else
        {
            text.setText("");
            ((Button) findViewById(R.id.btnSend)).setEnabled(false);
        }
        progress.setProgress(0);

        myFiles = new ArrayList<String>();
        new StartAsyncTask().execute();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T22:26:42.857

当`Activity`被销毁时，它失去了对 的引用`AsyncTask`，因为当`AsyncTask`它被创建时，它被传递给创建它的*实例*的引用`Activity`。当实例死亡时，对 Activity 的引用变得无用。

更好的方法是将`AsyncTask`放入 a`Service`中，设置`Service`并设置`AsyncTask`运行`Service`并将您绑定`Activity`到`Service`.

然后当创建一个新的实例时`Activity`（即当用户重新进入应用程序时），它可以绑定到`Service`已经运行的同一个实例并传递对其自身的引用以接收进度信息。

这种方式的另一个好处是你的Service可以在通知栏中放一个通知图标，大大降低了它被系统杀死的机会，用户可以一目了然地查看进度，甚至可以在进程完成时收到通知.

允许 AsyncTask 与其所有者（即 Activity）分离并相信它会完成它所做的事情是一个非常糟糕的主意，并且可能会产生一些意想不到的结果，导致潜在的内存泄漏等。

# c++ - G++ 错误：在包含的文件中，未声明 Foo

> ID：10776862
> 
> 赞同：2
> 
> 时间：2012-05-27T20:07:05.613
> 
> 标签：c++, include, g++, declare

我的 C++ 代码有问题。如果我插入`#include "god.hpp"`，会`neuron.hpp`显示`g++`以下错误：

```
In file included from neuron.hpp:4,
             from main.cpp:5:
god.hpp:11: error: ‘Neuron’ has not been declared
god.hpp:13: error: ‘Neuron’ was not declared in this scope
god.hpp:13: error: template argument 1 is invalid
god.hpp:13: error: template argument 2 is invalid
main.cpp: In function ‘int main()’:
main.cpp:36: error: no matching function for call to ‘God::regNeuron(Neuron*&)’
god.hpp:11: note: candidates are: long int God::regNeuron(int*)
In file included from god.hpp:5,
             from god.cpp:3:
neuron.hpp:10: error: ‘God’ has not been declared
In file included from neuron.hpp:4,
             from neuron.cpp:2:
god.hpp:11: error: ‘Neuron’ has not been declared
god.hpp:13: error: ‘Neuron’ was not declared in this scope
god.hpp:13: error: template argument 1 is invalid
god.hpp:13: error: template argument 2 is invalid 
```

以下是必要文件的相关（部分）：

```
//main.cpp
#include <string>
#include <vector>
#include "functions.hpp"
#include "neuron.hpp"
#include "god.hpp"
using namespace std;

int main()
{
God * god = new God();

vector<string>::iterator it;
for(it = patterns.begin(); it != patterns.end(); ++it) {
    Neuron * n = new Neuron();
            god->regNeuron(n);
    delete n;
    cout << *it << "\n";
}
} 
```

上帝;）谁将处理所有神经元......

```
//god.hpp
#ifndef GOD_HPP
#define GOD_HPP 1 

#include <vector>
#include "neuron.hpp"

class God
{
public:
    God();
    long regNeuron(Neuron * n);
private:
    std::vector<Neuron*> neurons;
};
#endif

//god.cpp
#include <iostream>
#include <vector>
#include "god.hpp"
#include "neuron.hpp"

using namespace std;

God::God()
{
vector<Neuron*> neurons;
}

long God::regNeuron(Neuron * n)
{
neurons.push_back(n);
cout << neurons.size() << "\n";
return neurons.size();
} 
```

至少，我的神经元。

```
//neuron.hpp
#ifndef NEURON_HPP
#define NEURON_HPP 1

#include "god.hpp" //Evil

class Neuron
{
public:
    Neuron();
    void setGod(God *g);
};
#endif

//neuron.cpp
#include <iostream>
#include "neuron.hpp"

#include "god.hpp"

Neuron::Neuron()
{
}

void Neuron::setGod(God *g)
{
std::cout << "Created Neuron!";
} 
```

我希望有人可以帮助我找到错误。当我写入时会发生这种`#include "god.hpp"`情况`neuron.hpp`。我用谷歌搜索了大约三个小时，但我没有运气。

亲切的问候-鲍里斯

编译：

```
g++ -Wall -o getneurons main.cpp functions.cpp god.cpp neuron.cpp 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T20:08:50.927

消除

```
#include "god.hpp" 
```

并将其替换为前向声明：

```
//neuron.hpp
#ifndef NEURON_HPP
#define NEURON_HPP 1

class God;  //forward declaration

class Neuron
{
public:
    Neuron();
    void setGod(God *g);
};
#endif 
```

同样适用于`God.hpp`：

```
//god.hpp
#ifndef GOD_HPP
#define GOD_HPP 1 

#include <vector>

class Neuron; //forward declaration

class God
{
public:
    God();
    long regNeuron(Neuron * n);
private:
    std::vector<Neuron*> neurons;
};
#endif 
```

请注意，您将需要包含在您的实现文件中。（`cpp`文件）

如果您使用指向对象的指针或引用作为成员或将该类型用作返回类型或参数，则不需要完整定义，因此前向声明就足够了。

# python - 在 mongodb 中抓取 URL 并使用抓取的文本更新记录

> ID：10776866
> 
> 赞同：1
> 
> 时间：2012-05-27T20:07:43.850
> 
> 标签：python, node.js, mongodb

我有一个维基百科文章编辑的序列化集合，我使用 node.js 流式传输并存储到 mongodb。它们看起来像这样：

```
{ "time" : 1338144181565, "page" : "Pavol Országh Hviezdoslav", "url" : "http://es.wikipedia.org/w/index.php?diff=56528327&oldid=56521690", "delta" : -60, "_id" : ObjectId("4fc275b5cd08c22d31000001") }
{ "time" : 1338144183265, "page" : "Indian Premier League", "url" : "http://en.wikipedia.org/w/index.php?diff=494656175&oldid=494656151", "delta" : -12, "_id" : ObjectId("4fc275b7cd08c22d31000002") }
{ "time" : 1338144187346, "page" : "Dizz Knee Land", "url" : "http://en.wikipedia.org/w/index.php?diff=494656189&oldid=494656176", "delta" : -84, "_id" : ObjectId("4fc275bbcd08c22d31000003") } 
```

URL 显示了编辑中的差异，我将使用 python 脚本抓取编辑后的文本，然后希望使用新字段“edit_text”更新记录，并可能使用每个主图像的 img src (“image_url”)维基百科文章（如果有的话）。

想法是最终将更新的数据流式传输到 Web 应用程序，该应用程序在上下文中显示已编辑的文本以及页面标题和图像（如果后者存在）。

通过将所有结果保存在同一个集合中来做到这一点，或者将结果存储在新集合中会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:46:31.807

由于以下几个原因，我会将抓取文件的内容存储在另一个集合中：

1.  带有编辑事件的当前集合是仅追加的，这意味着您永远不会有任何更新。这使得它的存储速度快如闪电。抓取的文档集合可能包含更大数量级的文档。
2.  这两种类型的文档是两种截然不同的文档类型，因此并不真正属于同一个集合。它使索引变得不必要的复杂，并且您可能不得不创建更多包含大量不相关信息的索引。

# c# - NullReferenceException：当用户单击按钮时，“对象引用未设置为对象的实例”

> ID：10776867
> 
> 赞同：2
> 
> 时间：2012-05-27T20:07:49.723
> 
> 标签：c#, winforms, nullreferenceexception, buttonclick

我已经将我的软件部署给了世界各地的几个用户，今天他们中的一个告诉我他遇到了这个错误。在我自己的机器上运行该软件时，我从未见过它，也没有收到任何其他报告。

当用户单击标准按钮时，他会收到以下错误文本：

> System.NullReferenceException：对象引用未设置为对象的实例。
> 在 x.MainForm.btnCreateOutput_Click(Object sender, EventArgs e)
> 在 System.Windows.Forms.Control.OnClick(EventArgs e)
> 在 System.Windows.Forms.Button.OnClick(EventArgs e)
> 在 System.Windows.Forms.Button。 OnMouseUp(MouseEventArgs 事件)
> 在 System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
> 在 System.Windows.Forms.Control.WndProc(Message& m)
> 在 System.Windows.Forms.ButtonBase.WndProc( Message& m)
> 在 System.Windows.Forms.Button.WndProc(Message& m)
> 在 System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
> 在 System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
> 在 System.Windows.Forms.NativeWindow.Callback（IntPtr hWnd，Int32 msg，IntPtr wparam，IntPtr lparam）

我真的不知道该怎么处理这个消息。

在`btnCreateOutput_Click`我只是做一些字符串工作，我不使用函数的参数做任何事情。

软件里面有很多类似的功能，而且明显只有这个按钮才会出现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:51:14.160

首先捕获异常并得到具体的错误......

这可能是因为连接字符串出错并且连接对象未初始化（如果您的应用程序完全使用...）..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T20:10:28.033

启用第一次机会异常处理，`Visual Studio`它将*准确*地命中execption 引发的行。

看这里：

[如何在 Visual Studio 中启用首次机会异常](http://florianreischl.blogspot.it/2010/01/how-to-enable-first-chance-exceptions.html)

**编辑**

如果这**仅**发生在客户端，请使用处理

[AppDomain.UnhandledException 事件](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)

并记录完整的堆栈跟踪，以及额外*的*调试信息。

如果它在统计上发生在某个特定的客户端上，我会做的（已经掌握了我遇到问题的方法）是记录所有可能的`null`条件，并将该版本提供给客户端。在日志文件中发生异常后，我肯定会有更多信息需要处理。

我自然假设您不能在他这边调试应用程序，也因为事件处理程序中发生的异常通常与用户的行为模型有关。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T20:11:06.753

最有可能：问题在于您正试图读取或写入属性或调用方法以获取未初始化对象的引用

这肯定不是鼠标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T06:43:05.657

内部存在问题`btnCreateOutput_Click`，要查看哪一行导致异常，您可以将 .pdb 附加到安装程序，您将获得详细信息，您的源文件/行中的哪些文件/行无效。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-10-03T08:58:09.963

这可能是一个老问题，但对于那些遇到这个问题的人来说，另一个可能的解决方案是检查机器上安装了哪个 .NET 版本。

更准确地说，.NET 4.0 Client Profile 是不够的。安装完整的 .NET 4.0，它现在应该可以工作了。当然，如果您的代码没有任何缺陷。

它对我有用。

# php - Zend 框架创建自定义视图助手？

> ID：10776868
> 
> 赞同：1
> 
> 时间：2012-05-27T20:07:49.860
> 
> 标签：php, zend-framework, zend-view

我尝试了多种修复方法，但都没有奏效。
我收到此错误：

> 致命错误：未在注册表中找到带有消息“插件名称“AddCss”的未捕获异常“Zend_Loader_PluginLoader_Exception”；使用的路径： Zend_View_Helper_: Zend/View/Helper/:/Users/cgunnels/dev/git/rove-git/application/views/helpers/' 在 /usr/local/zend/share/ZendFramework/library/Zend/Loader/ PluginLoader.php:412 堆栈跟踪：#0 /usr/local/zend/share/ZendFramework/library/Zend/View/Abstract.php(1182): Zend_Loader_PluginLoader->load('AddCss') #1 /usr/local/ zend/share/ZendFramework/library/Zend/View/Abstract.php(618): Zend_View_Abstract->_getPlugin('helper', 'addCss') #2 /usr/local/zend/share/ZendFramework/library/Zend/View /Abstract.php(344): Zend_View_Abstract->getHelper('addCss'

这是我的课：

```
 class Zend_View_Helper_Css extends Zend_View_Helper_Abstract {
      public function css() {
        die("test");
      }
    } 
```

我按照此页面[http://framework.zend.com/manual/en/zend.view.helpers.html](http://framework.zend.com/manual/en/zend.view.helpers.html)上的说明进行操作，但它不起作用。

我还将它添加到我的 application.ini 中：

```
resources.view.helperPath = APPLICATION_PATH "/views/helpers" 
```

请帮帮我，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:22:43.977

作者提供的答案：

> 我修好了它。所以文件名是 CssHelper.php 我将它更改为 Css.php 并且它工作。——克里斯·冈内尔斯

# .net - 无法在 Server 2008 上使用 C# 发送电子邮件，但可以在 Windows 7 上使用

> ID：10776874
> 
> 赞同：0
> 
> 时间：2012-05-27T20:08:28.780
> 
> 标签：.net, email, iis, smtp, windows-server-2008

我有代码使用 System.Net.Mail.MailMessage 通过 smtp.gmail.com 在端口 587 上发送电子邮件。当我在装有 Windows 7 的计算机上通过 IIS 运行此代码时，它可以工作。电子邮件被发送，它到达了。

在 Windows Server 2008 上的 IIS 上运行的完全相同的代码不起作用。一切都保持不变，唯一的区别是操作系统。它们都在同一个网络上运行，所以这不是路由器安全问题。我试图禁用端口 587 上的传出防火墙，但没有奏效。我试图在以下两个问题中应用答案，但这些也不起作用：

[通过 Google Apps 帐户发送电子邮件可以在本地工作，但不能在我的网络服务器上工作](https://stackoverflow.com/questions/1039089/sending-email-through-a-google-apps-account-is-working-locally-but-not-on-my-we)

[c# SmtpClient 类无法使用 gmail 发送电子邮件](https://stackoverflow.com/questions/1311749/c-sharp-smtpclient-class-not-able-to-send-email-using-gmail/1312095#1312095)

有人知道 Windows Server 上的哪些安全设置阻止我发送电子邮件吗？

我得到的错误：无法解析远程名称：'smtp.gmail.com'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T15:37:34.720

我昨天遇到了这个问题，我现在找到了解决方案，为时已晚，但希望这有助于其他人看到这个[链接](http://threadstate.com/2012/05/07/sputility-sendemail-problem-in-custom-activity-use-smtpclient/)，你需要的行是

```
 ServicePointManager.ServerCertificateValidationCallback =
                delegate(object s, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors)
                {
                    return true;
                }; 
```

和

```
 Credentials = new NetworkCredential("xxx@zzz.ccc", "sdfsdf") 
```

# mysql - 基于列值的条件连接

> ID：10776880
> 
> 赞同：4
> 
> 时间：2012-05-27T20:09:03.993
> 
> 标签：mysql, sql

我正在尝试根据事件类型有条件地将一个主事件表连接到其他三个事件表。select 语句工作正常，并返回我期望的结果集，但是当我添加 JOIN 语句时，我收到一个错误，提示找不到列别名：

```
SELECT 
event.type as type,
IF(type = 'birthday', event.target_id, NULL) as birthday_id,
IF(type = 'graduation', event.target_id, NULL) as graduation_id,
IF(type = 'wedding', event.target_id, NULL) as wedding_id
FROM event
LEFT OUTER JOIN birthday ON birthday_id = birthday.id
LEFT OUTER JOIN graduation ON graduation_id = graduation.id
LEFT OUTER JOIN wedding ON wedding_id = wedding.id 
```

得到这个错误：

> “on 子句”中的未知列“birthday_id”

* * *

**更新：**好的 Sebas 刚刚表示您不能加入计算结果，在这种情况下我的方法是关闭的。那么做这样的事情的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T20:18:08.143

```
SELECT 
    event.type as type,
    IF(type = 'birthday', birthday.id, NULL) as birthday_id,
    IF(type = 'graduation', graduation.id, NULL) as graduation_id,
    IF(type = 'wedding', wedding.id, NULL) as wedding_id
FROM 
    event
        LEFT OUTER JOIN birthday b  ON event.target_id = b.id
        LEFT OUTER JOIN graduation g    ON b.id IS NULL AND event.target_id = g.id
        LEFT OUTER JOIN wedding w   ON b.id IS NULL AND g.id IS NULL AND event.target_id = w.id 
```

应该做的伎俩，给我反馈！rgds。

编辑：请参阅 IS NULL 条件。我没测试，不知道mysql会不会接受！如果是，那么几乎只会完成必要的连接......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T20:18:14.977

你需要将所有的表加入同一个字段，event.target_id，当你需要展示一些特定的数据时，你可以先测试一下类型。

例子：

```
SELECT 
event.type as type,
IF(type = 'birthday', birthday.birthday_id, NULL) as birthday,
IF(type = 'graduation', graduation.graduation_id, NULL) as graduation,
IF(type = 'wedding', wedding.wedding_id, NULL) as wedding
FROM event
LEFT OUTER JOIN birthday ON birthday_id = event.target_id
LEFT OUTER JOIN graduation ON graduation_id = event.target_id
LEFT OUTER JOIN wedding ON wedding_id = event.target_id 
```

不是睾丸，但希望这能帮助你澄清你的疑虑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-25T12:24:20.020

Sebas 的答案是正确的，但不需要为每个先前的连接检查 IS NULL 条件，您可以使用基于列的值来使其生效。我已经测试了这个及其工作。

```
SELECT 
    E.type AS type,
    IF(E.type = 'birthday', B.id, NULL) AS birthday_id,
    IF(E.type = 'graduation', G.id, NULL) AS graduation_id,
    IF(E.type = 'wedding', W.id, NULL) AS wedding_id
FROM event E 
    LEFT OUTER JOIN birthday B ON E.type = 'birthday' AND E.target_id = B.id
    LEFT OUTER JOIN graduation G ON E.type = 'graduation' AND E.target_id = G.id
    LEFT OUTER JOIN wedding W ON E.type = 'wedding' AND E.target_id = W.id 
```

# iphone - iOS 上的蓝牙连接 - 建立连接时应用程序崩溃

> ID：10776881
> 
> 赞同：2
> 
> 时间：2012-05-27T20:09:04.047
> 
> 标签：iphone, ios, bluetooth, gamekit

我正在编写一个节拍器应用程序，它通过 GameKit 和 PeerPickerController 建立蓝牙连接，然后允许一个设备将控件发送到另一个设备，因此如果在一个设备上按下开始，节拍器就会在两个设备上启动。

该应用程序加载正常并搜索其他设备并说它在 Xcode 的调试器窗口中已连接，但随后立即崩溃并出现以下错误：

> wait_fences：未能收到回复：10004003
> 
> 2012-05-27 20:51:50.820 MetroConnect[5689:707]-[MetroConnectViewController session:didFailWithError:]：无法识别的选择器发送到实例 0x1793f0 2012-05-27 20:51:50.824 MetroConnect[5689:707] *** 终止应用程序due to uncaught exception 'NSInvalidArgumentException', reason: '-[MetroConnectViewController session:didFailWithError:]: unrecognized selector sent to instance 0x1793f0' *** First throw call stack: (0x3126388f 0x375a1259 0x31266a9b 0x31265a83 0x311c0650 0x34141b5f 0x311c21fb 0x31b7f747 0x31237ad3 0x3123729f 0x31236045 0x311b94a5 0x311b936d 0x33233439 0x3091ccd5 0x5023 0x4fc8）终止调用抛出异常（lldb）

我想知道是否有人可以告诉我哪里出错了？我以类似的方式制作了一个不同的应用程序，可以在两个设备之间发送聊天消息并且工作正常，我看不出这个实现和节拍器实现之间有任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T20:14:01.230

似乎您是 GKSession 委托，但没有实现所需的委托方法。毕竟，需要它们是有原因的。使用类似这样的方法实现 session:didFailWithError: 方法，并检查其余部分是否正确实现：

```
- (void)session:(GKSession *)session didFailWithError:(NSError *)error {
    NSLog(@"Session connection failed with error %@",[error localizedDescription]);
} 
```

# c#-4.0 - 替换div内的文本

> ID：10776883
> 
> 赞同：0
> 
> 时间：2012-05-27T20:09:27.813
> 
> 标签：c#-4.0, replace

我有很多 html 文件，我想将 rel="nofollow" 添加到特定 div 中的所有 a href 标记中。

我认为 c# 代码可以做到这一点。但是我如何只关联部分代码..？

有什么建议吗？我也不知道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T20:37:35.210

这是我的想法：

1.  逐行解析 HTML
2.  查找“块开始，您需要找到查找“/div>”的方法。
3.  将“”之间的所有内容存储到一个字符串中
4.  检查是否找到“href=”以及有多少
5.  现在再次解析此字符串以搜索所有“”并与“href =”计数器匹配
6.  #5 会给你一个基于 "href=" 标记的行数组
7.  现在您可以假设每个“href=”标签必须在“”的末尾有“>”

最后这是你可以做的：

```
 string s1 = "<a href=\"mylink\"> this is link </a>";
 string s2 = s1.Insert(s1.IndexOf(">"), " rel=\"nofollow\""); 
```

# ruby-on-rails - 将非自轨方法添加到类

> ID：10776884
> 
> 赞同：0
> 
> 时间：2012-05-27T20:09:38.940
> 
> 标签：ruby-on-rails, ruby

我想要一个方法

```
class User < ActiveRecord::Base
  def global_user_id
    User.find_by_username("Global_User").id
  end
end 
```

它返回当前的全局用户 ID。`User.global_user_id`我希望它使用而不是类似的东西来运行`User.new.global_user_id`

我该怎么做？

我需要其他模型中的用户 ID，现在它被困在我认为不是最佳位置的类资源中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T20:12:12.820

关键是`self.`名称中的 ，这意味着该函数是与类相关的静态函数，而不是与类的实例相关联。

```
class User < ActiveRecord::Base
  def self.global_user_id
    find_by_username("Global_User").id
  end
end 
```

# python - 将文件加载到字符串，没有这样的文件？

> ID：10776887
> 
> 赞同：0
> 
> 时间：2012-05-27T20:10:04.353
> 
> 标签：python

我正在编写一个 python 脚本来彻底破坏图像，为此，我将文件文本中的每个“g”替换为“h”（目前，它可能会改变）。这是开始，但它不起作用：

```
pathToFile = raw_input('File to corrupt (drag the file here): ')

x = open(pathToFile, 'r')
print x 
```

给出路径（将文件拖入终端）后，结果如下：

```
File to corrupt (drag the file here): /Users/me/Desktop/file.jpeg 
Traceback (most recent call last):
  File "/Users/me/Desktop/corrupt.py", line 7, in <module>
    x = open(pathToFile, 'r')
IOError: [Errno 2] No such file or directory: '/Users/me/Desktop/file.jpeg ' 
```

如果文件就在那里，怎么可能不存在，而我使用的是*确切的*文件名？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T20:18:02.793

仔细看：`'/Users/me/Desktop/file.jpeg '`。您的文件名中有一个空格。`open`不做任何剥离。

```
>>> f = open('foo.txt', 'w')
>>> f.write('a')
>>> f.close()
>>> f = open('foo.txt ', 'r')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IOError: [Errno 2] No such file or directory: 'foo.txt ' 
```

# c - 如何检查字母表中的所有字母是否都在一个带有 C 的数组中（检查它是否是一个 pangram）

> ID：10776890
> 
> 赞同：0
> 
> 时间：2012-05-27T20:10:36.217
> 
> 标签：c

```
#include <stdio.h>
#include <ctype.h>

/* prototypes for functions */
void getstring(char *sentence);
int check(char *sentence, int missing[26]);
void showNegativeResults(int[]);

int main(void) {
    char sentence[1024] = {'\0'};
    int missing[26] = {0};

    printf("Enter sentence\n(ending with a period like this one).\n\n");
    getstring(sentence);

    printf("\nSentence: \"%s.\"", sentence);    

    if ( check(sentence, missing) )
        printf("\n\nThe sentence IS a pangram!\n\n");
    else
        showNegativeResults(missing);

    return 0;
}

void getstring(char *sentence) {
    int j = 0;
   while ((sentence[j] = getchar()) != '.')
      j++;
   sentence[j] = '\0';
}

int check(char *sentence, int missing[26]) {

    return 1; /* return a 1 if it is a pangram*/

    return 0; /*return 0 if it is not a pangram */
}

void showNegativeResults(int missing[26]) {
    int c;
    printf("\n\nThe sentence is NOT a pangram.\n");
    printf("Missing letters:");
    for(c = 0; c < 26; c++)
        if (missing[c])
            printf(" %c", ('a' + c));
    printf("\n\n");
} 
```

我需要帮助实现一个函数，该函数将破译字符串中的字符是否包含字母表中的所有字母，以及它们是否不允许用户知道哪些字符丢失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T22:16:05.073

不做功课的答案...

```
1) get the character
2) is it a "."
   a) check if you have all and return result.
   b) continue
3) is it greater than/equal "A" but less than/equal "Z" ( this defines a range of characters )
   a) add it to list return to (1)
   b) continue
4) is it greater than/equal "a" but less than/equal "z" ( another range, could be combined with the first )
   a) add it to list return to (1)
   b) continue
5) is it a " " ( a space .. but could be another range, could be combined with the first )
  a) continue 
6) error not a correct character and exit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T20:14:31.157

你被教过不变量吗？我建议您寻找一个概括这两种特殊情况的不变量：

*   如果您没有查看句子的任何部分，则必须考虑所有字母都丢失了。

*   如果您查看了所有句子，那么正如您所写的，`missing`数据结构恰好包含句子中缺少的那些字母。

我还建议您查找 ANSI C 函数`isalpha`和`tolower`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T02:38:34.177

我能想到的最简单的方法是遍历字母表中的每个字母并检查该字母是否在句子中（通过循环遍历句子直到找到字母或到达句子的末尾）。如果该字母不在句子中，请将数字（对应于缺少的字母）添加到您的数组中。

这是工作功能：

```
int check(char *sentence, int missing[26]) 
{
  int missIndex = 0; //the index for the missing array;
  bool iWasFound; //was the letter found?  (used in the loops below)

  for(char i = 'A'; i <= 'Z'; i++)
  {
    iWasFound = false;

    for(int j = 0; j < 1024; j++)
    {
      if(toupper(sentence[j]) == i)
      {
        iWasFound = true;
        break;
      }
    }

    //if we did not find the letter, add the corresponding number to the missing array
    if(!iWasFound)
    {
      missing[missIndex] = (int)(i - 'A');
      cout << (int)(i - 'A') << " | " << missing[missIndex] << std::endl;
      missIndex++;
    }
  }

  if(missing[0] == -1)
  {
    return 1;
  }
  else
  {
    return 0;
  }
} 
```

如果您需要我解释任何事情，请告诉我

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T20:30:59.723

只需遍历输入字符串，标记其中包含哪些字符，然后检查缺少的字符：

```
int main()
{
    char str[] = "Some meaningful text";

    int freq[256];
    int i;

    for ( i = 0; i < 256; i ++) // clear frequency array
    {
        freq[i] = 0;
    }

    for (i = 0; str[i] != '\0'; i++) // parse input string
    {
        freq[str[i]]++;
    }

    for ( i = 0; i < 256; i ++)
    {
        if (freq[i]==0 && isalpha(i)) // find out which leters weren't typed
        {
            printf("%c letter wasn't typed!\n", (char)i);
        }
    }

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-27T20:13:57.243

在内部`check`，您可以遍历字符串`sentence`，并为遇到的每个字符更改`missing`为该`1`字符。

最后，缺少的字符将被标记为 0。如果`missing`至少包含一个`0`，则返回`0`，否则`1`。

我不打算编写完整的代码，但一些提示可以帮助您入门：

1) 您可以使用 标记正确的元素`currentCharacter - 'a'`。这将为您返回 character 的索引`currentCharacter`。

2）您可以使用遍历字符串

```
char currentCharacter;
while( currentCharacter = *(sentence++) )
{
   //mark array here
} 
```

# node.js - 如何知道何时完成

> ID：10776891
> 
> 赞同：6
> 
> 时间：2012-05-27T20:10:49.537
> 
> 标签：node.js, asynchronous

我对node.js很陌生，所以我想知道如何知道何时处理所有元素让我们说：

```
["one", "two", "three"].forEach(function(item){
    processItem(item, function(result){
        console.log(result);
    });
}); 
```

...现在，如果我想做一些只有在处理完所有项目后才能完成的事情，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T20:35:46.663

您可以使用[异步模块](https://github.com/caolan/async)。简单的例子：

```
async.map(['one','two','three'], processItem, function(err, results){
    // results[0] -> processItem('one');
    // results[1] -> processItem('two');
    // results[2] -> processItem('three');
}); 
```

async.map 的回调函数将在处理完所有项目时进行。但是，在 processItem 你应该小心， processItem 应该是这样的：

```
processItem(item, callback){
   // database call or something:
   db.call(myquery, function(){
       callback(); // Call when async event is complete!
   });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T22:43:30.250

forEach 正在阻塞，请参阅此帖子：

[JavaScript、Node.js：Array.forEach 是异步的吗？](https://stackoverflow.com/questions/5050265/javascript-nodejs-is-array-foreach-asynchronous)

所以要在所有项目都完成处理后调用一个函数，它可以内联完成：

```
["one", "two", "three"].forEach(function(item){
    processItem(item, function(result){
        console.log(result);
    });
});
console.log('finished'); 
```

如果要处理的每个项目的 io-bound 负载很高，请查看 Mustafa 推荐的模块。上面链接的帖子中还引用了一个模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-24T23:43:41.890

尽管其他答案是正确的，因为 node.js 从此支持 ES6，在我看来，使用内置`Promise`库会更加稳定和整洁。

你甚至不需要什么东西，Ecma 采用了*Promises/A+*库并将其实现为原生 Javascript。

```
Promise.all(["one", "two","three"].map(processItem))
  .then(function (results) {
    //  here we got the results in the same order of array
} .catch(function (err) {
    //  do something with error if your function throws
} 
```

由于在调试方面 Javascript 是一种问题严重的语言（动态类型、异步流），因此坚持使用`promise`s 而不是回调将最终节省您的时间。

# jquery - 我收到 jquery 错误

> ID：10776894
> 
> 赞同：0
> 
> 时间：2012-05-27T20:11:10.813
> 
> 标签：jquery, code-cleanup

我无法让它工作，也不明白错误在哪里

```
(function(){

        jQuery(window).bind('scrollstart', function(){
            $('header').fadeIn('slow', function() {
                    // Animation complete
                  });                
        });

        jQuery(window).bind('scrollstop', function(e){
            $('header')..fadeIn('slow', function() {
                    // Animation complete
                  });
         });

    })(); 
```

所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T20:13:21.950

这`$('header').fadeIn('slow', function()`

不是`$('header')..fadeIn('slow', function()`

# c# - 如何在 Html.BeginForm 视图中的 div 中显示 Json 消息

> ID：10776897
> 
> 赞同：1
> 
> 时间：2012-05-27T20:11:25.620
> 
> 标签：c#, asp.net-mvc, jquery

这是我的视图和控制器的代码

```
@using (Html.BeginForm("PdfHeaderAndFooterManager", "Dashboard", FormMethod.Post, new { enctype = "multipart/form-data", id = "formPdfImages" }))
 div id="resultMessage"></div> 
```

控制器动作

```
public ActionResult PdfHeaderAndFooterManager(HttpPostedFileBase headerImage,   HttpPostedFileBase footerImage)
{

   //some code to declare variables

    if (headerImage != null)
    {
        if (!String.IsNullOrEmpty(headerImage.ContentType))
        {
            headerImageContentType = imageHelper.IsValidImageType(headerImage.ContentType);

            if (headerImageContentType)
            {
                resizedHeaderImage = imageHelper.ResizeImage(headerImage.InputStream);
            }
            else
            {
                return Json(new { success = false, message = "Please Upload an image* file less than 2GB." });
            }
        }
    }
    if (footerImage != null)
    {
        if (!String.IsNullOrEmpty(footerImage.ContentType))
        {
            footerImageContentType = imageHelper.IsValidImageType(footerImage.ContentType);
            if (footerImageContentType)
            {   
                resizedFooterImage = imageHelper.ResizeImage(footerImage.InputStream);
            }
            else
            {

                return Json(new { success = false, message = "Please Upload an image* file less than 2GB." });
            }
        }
    }
    if (P24DataPrincipal.CurrentIdentity != null)
    {
        if (resizedHeaderImage != null || resizedFooterImage != null)
        {
          //add to DB code
            return Json(new { success = true, message = "Image(s) Uploaded Successfully." });

        }
        else
        {
            return Json(new {success = false, message = "Upload atleast 1 image file." });

        }

    }

    return View("someview");

} 
```

有人可以帮助我如何编写一个 jquery 函数来仅显示在我看来上述操作中返回的 Json 结果。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T20:55:13.697

社论

您似乎想发回 JSON 或图像。您可能可以使用 HTML 5 Blob API 做一些有趣的事情（或将图像作为带有 DATA URI 的 JSON 有效负载发送回）。通常，对此没有简单的解决方案，尤其是通过 AJAX。

尾注

假设 jQuery 1.5 或更好：

```
jQuery.post('/TheController/PdfHeaderAndFooterManager')
   .success(function(d){
        jQuery('#resultMessage').html(d.message).attr('data-action-success',d.success);
   }).error(function(){
      jQuery('#resultMessage').html('There was an error sending data to the server.').attr('data-action-success', false);
   }); 
```

然后你可以在 CSS 中做一些有趣的事情，比如：

```
[data-action-success=true]{
 color: green;
}
[data-action-success=false]{
 color: red;
} 
```

令我震惊的是，您正在返回不同类型的结果。这很少见，我建议您将“显示表单操作（GET 操作）”和“保存表单（POST 操作）”分开。GET 可以返回 HTML 操作结果。POST 总是可以返回 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:49:10.347

```
public ActionResult PdfHeaderAndFooterManager(HttpPostedFileBase headerImage,   HttpPostedFileBase footerImage)
{

   //some code to declare variables

if (headerImage != null)
{
    if (!String.IsNullOrEmpty(headerImage.ContentType))
    {
        headerImageContentType = imageHelper.IsValidImageType(headerImage.ContentType);

        if (headerImageContentType)
        {
            resizedHeaderImage = imageHelper.ResizeImage(headerImage.InputStream);
        }
        else
        {
            ViewBag.ResultMessage="<span style='color:red'">Please Upload an image* file less than 2GB.</span>";
            return View();
        }
    }
}
if (footerImage != null)
{
    if (!String.IsNullOrEmpty(footerImage.ContentType))
    {
        footerImageContentType = imageHelper.IsValidImageType(footerImage.ContentType);
        if (footerImageContentType)
        {   
            resizedFooterImage = imageHelper.ResizeImage(footerImage.InputStream);
        }
        else
        {

            ViewBag.ResultMessage="<span style='color:red'">Please Upload an image* file less than 2GB.</span>";
            return View();
        }
    }
}
if (P24DataPrincipal.CurrentIdentity != null)
{
    if (resizedHeaderImage != null || resizedFooterImage != null)
    {
      //add to DB code
            ViewBag.ResultMessage="<span style='color:green'">Image(s) Uploaded Successfully.</span>";
            return View();
    }
    else
    {
            ViewBag.ResultMessage="<span style='color:red'">Upload atleast 1 image file.</span>";
            return View();
    }

} 
```

}

在**视图**中，

```
@using (Html.BeginForm("PdfHeaderAndFooterManager", "Dashboard", FormMethod.Post, new { enctype = "multipart/form-data", id = "formPdfImages" })){
 <div id="resultMessage">
    @ViewBag.ResultMessage
 </div>
} 
```

试试这个，希望对你有帮助。

# actionscript-3 - 将文本字段对齐在一起会产生不准确的间距外观

> ID：10776901
> 
> 赞同：0
> 
> 时间：2012-05-27T20:12:04.340
> 
> 标签：actionscript-3

我已将 Arial 作为嵌入字体添加到我的字体格式中，我已将其添加到许多文本字段中，这些文本字段必须彼此准确对齐以创建空间外观。它们彼此对齐大约 1 - 2 个像素。问题是在正常的舞台尺寸下查看时它们的间距看起来不准确，但是当我放大文本时看起来很好。

我试过搞乱并添加高级抗锯齿，但没有任何效果。也许 Arial 不适用于小尺寸？我知道不设置字体会产生我想要的结果，但这不是我想要使用的字体；它必须使用时代？

有任何想法吗？

```
var myFont = new Font1();

            format1 = new TextFormat(); 
            format1.color = 0x000000; 
            format1.size = 16;
        format1.font = myFont.fontName; 
```

编辑：本质上，我将每个字符拆分为自己的文本字段，因此我可以操纵每个字符并为其设置动画。但要做到这一点，我需要将字符隔开，就好像它是一个文本字段一样。

```
private var bmd:BitmapData; // bitmapdata to draw textField in;
        private function getExactMetrics(textField:TextField):Object
        {
            // copy textField to bitmap
            bmd = new BitmapData(textField.width,textField.height,true,0x000000);
            bmd.draw(textField);

            // loop through pixels of bitmap data and store the x location of pixels found.
            var foundx:Array = [];

             for (var nx:int = 0; nx < bmd.width;nx++)
               {
                for (var ny:int = 0; ny < bmd.height; ny++)
                {

                    var px:uint = bmd.getPixel32(nx, ny);
                    if (px != 0)
                    {
                        foundx.push(nx);
                        break;
                    }

                }
            }

            // get the values for the metrics
            var startX:int = foundx[0]; // first pixel found representing the x start of the text in pixels
            var endX:int = foundx[foundx.length-1]; t
            var realWidth:Number = endX - startX; 

            // clear the array with found x positions
            foundx = [];

            // wrap values in object
            var metrics:Object = { };
            metrics.width = realWidth;
            metrics.x = startX;

            // clear bitmapdata
            bmd = null;

            return metrics; // retrurn metric object;
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T15:47:25.430

请记住，字体有`kerning`这意味着字母不仅彼此相邻，而且间距取决于字体的设置。例如，在单词“To”中，“o”略低于字母“T”的“顶梁”。

如果你只是把字母放在一起会看起来很糟糕，你必须考虑字距调整。

`TextField`类有一个`getCharBoundaries`方法可以用来获取准确的字符位置。不过，不确定它是否适用于 htmlText。

为了使其更简单，您可以使用第三方库。Greensock（但它不是免费的）或[Textanim](http://code.google.com/p/textanim/)（开源）有一个很棒的[SplitTextField 。](http://www.greensock.com/splittextfield/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T20:37:34.437

Verdana 等字体在较小的尺寸下可能具有更高的可读性；但是，听起来您遇到了文本指标问题。

在此示例中，TextLineMetrics 用于准确测量每个文本字段。

结果：

![文本行度量](../Images/ccfe2ff3fa8d494e66e16654ab44255f.png)

代码：

```
package
{
    import flash.display.Sprite;
    import flash.text.AntiAliasType;
    import flash.text.Font;
    import flash.text.TextField;
    import flash.text.TextFieldAutoSize;
    import flash.text.TextFormat;
    import flash.text.TextFormatAlign;
    import flash.text.TextLineMetrics;

    [SWF(percentWidth = 100, percentHeight = 100, backgroundColor = 0xefefef, frameRate = 30)]
    public class X extends Sprite
    {

        public function X()
        {
            super();

            // collection of words
            var words:Array = [ "These", "are", "the", "words", "to", "be", "placed" ];

            // define a text format
            var textFormat:TextFormat = new TextFormat();
            textFormat.font = "Arial";
            textFormat.bold = false;
            textFormat.size = 8;
            textFormat.color = 0x0;
            textFormat.align = TextFormatAlign.LEFT;

            // destination x coordinate for next word text field
            var dx:Number = 0;

            // for every word
            for each (var word:String in words)
            {
                // create a text field
                var textField:TextField = new TextField();
                textField.setTextFormat(textFormat);
                textField.defaultTextFormat = textFormat;
                textField.autoSize = TextFieldAutoSize.LEFT;
                textField.antiAliasType = AntiAliasType.ADVANCED;

                // set text and place the text field
                textField.text = word;
                textField.x = dx;
                textField.y = 20;
                addChild(textField);

                // measure the text field for accurate width
                var textLineMetrics:TextLineMetrics = textField.getLineMetrics(0);
                dx += textLineMetrics.width + 2;
            }
        }

    }
} 
```

# java - 解析 Web 服务结果

> ID：10776902
> 
> 赞同：0
> 
> 时间：2012-05-27T20:12:06.043
> 
> 标签：java, web-services, soap, wsdl, android-ksoap2

我正在使用下面的代码片段从给定的 wsdl url 获取用户详细信息，它只返回第一个用户的信息而不是整个列表，我该如何更正它以便打印整个用户详细信息？我需要它在 Android 上运行，所以我使用 ksoap-2-android 库。

请记住，我完全是 web 服务和 wsdl 的新手。我已经尝试理解阅读，但没有取得很多成就。

```
package parsewsdl;

import java.io.IOException;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import org.xmlpull.v1.XmlPullParserException;

public class ParseWSDL {

    private static final String NAMESPACE = "http://domain.intern.bits.com";
    private static final String METHOD_NAME = "getUserList";
    private static final String URL =
        "http://www.bulusalim.com:12000/BitsMobileInternHomeWork/services/UserWebService?wsdl";
    private static final String SOAP_ACTION = "getUserListResponse";

public static void main(String[] argv) {
    SoapObject soapObject = new SoapObject(NAMESPACE, METHOD_NAME);
    SoapSerializationEnvelope env = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    env.setOutputSoapObject(soapObject);

    HttpTransportSE con = new HttpTransportSE(URL);
    try {
        con.call(SOAP_ACTION, env);
        SoapObject result = (SoapObject) env.bodyIn;
        SoapObject dets = (SoapObject) result.getProperty("getUserListReturn");
        System.out.println(dets.getProperty("email").toString());

    } catch (IOException | XmlPullParserException e) {};
} 
```

更新：*System.out.println(result.toString());* 给了[这个](http://pastebin.com/AcFpbG3i)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-29T08:22:49.123

我不知道这是否是最充分或最合适的方式，但我找到了这样的解决方案：

```
...
SoapObject result = (SoapObject) env.bodyIn;
final int size = result.getPropertyCount();
for (int i = 0; i < size; i++) {
    SoapObject tempObj = (SoapObject) result.getProperty(i);
    // accessing operations with the name name and surname
    tempObj.getPropertyAsString("name");
    tempObj.getPropertyAsString("surname");
... 
```

# php - 如何将值传递给 header() 函数？

> ID：10776904
> 
> 赞同：0
> 
> 时间：2012-05-27T20:12:20.107
> 
> 标签：php, parsing, header

我必须将用户重定向到不同的页面。这就是我现在所拥有的。

```
header('Location: http://www.example.com/$confirmpage') 
```

但它不起作用。它将它们重定向到[http://www.example.com/](http://www.example.com/) $confirmpage （未检索到值。）并给出 404 错误。

当我使用

```
echo "<script>document.location='http://www.example.com/$confirmpage';</script>"; 
```

有用。

但由于某些原因，我必须使用 header() 函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T20:13:06.430

```
header("Location: http://www.example.com/$confirmpage") 
```

如果要在 php 字符串中引用变量，则必须使用`"`而不是`'`

[http://php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

# javascript - Javascript替换错误

> ID：10776908
> 
> 赞同：0
> 
> 时间：2012-05-27T20:13:11.837
> 
> 标签：javascript, jquery

我对 Javascript 中的函数有一个问题。当我在 中插入文本时`textarea`，函数`PHP`使用 AJAX 将文本发送到脚本，但是当我插入两个或三个单词时出现问题，例如`Bosnia and Herzegovina`脚本不起作用。我用字符串替换：

```
 function provjeraDrzave(rijec) {
        rijec = rijec.replace(" ", "%20");
        $.ajax({
            type: "GET",
            url: "/drzava.php?slovo=" + randomslovo + "&drzava=" + rijec,
            success: function (odgovor) {
                $('#rezultati').replaceWith($("<span id='rezultati'>" + odgovor + "</span>"));
            },
            error: function () {
                alert('Doslo je do pogreske');
            }
        });
    } 
```

它应该按如下方式工作：当我插入`Bosnia and Herzegovina`必须更改为`Bosnia%20and%20Herzegovina`但更改为`Bosnia%20and Herzegovina`并且不起作用时。问题出在哪里 ？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T20:21:40.383

例如，为什么不使用为此而生的本机`encodeURIComponent`功能？

或者，更好的是，让 jQuery 使用`data`配置参数为您处理 URL 编码：

```
function provjeraDrzave(rijec) {
    $.ajax({
        type: "GET",
        data: {
            slovo: randomslovo,
            drzava: rijec
        },
        url: "/drzava.php",
        success: function (odgovor) {
            $('#rezultati').replaceWith($("<span id='rezultati'>" + odgovor + "</span>"));
        },
        error: function () {
            alert('Doslo je do pogreske');
        }
     });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T20:22:31.480

jQuery[`$.ajax`](http://api.jquery.com/jQuery.ajax/)可以通过该属性接收 url 参数，`data`并且应该自动为您序列化它。

> ### 数据
> 
> 要发送到服务器的数据。如果还不是字符串，则将其转换为查询字符串。它附加到 GET 请求的 url...对象必须是键/值对...

```
$.ajax({
    type: 'GET',
    url: '/drzava.php'
    data : {
        'slovo' : randomslovo,
        'drzava' : rijec          //no need  to replace
    }
    success: function (returndata) {...},
    error: function () {...}
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T20:25:23.420

如果您绝对想这样做，请尝试

```
rijec = rijec.replace(/\ /g, "%20"); 
```

但`encodeURIComponent`会更合适。

# asp.net - 来自服务器的请求数量增加导致网站速度变慢？

> ID：10776909
> 
> 赞同：2
> 
> 时间：2012-05-27T20:13:11.843
> 
> 标签：asp.net

在我的办公室网站中，网页有 3 个 css 文件，2 个 javascript 文件，11 个图像和 1 个页面请求总共 17 个来自服务器的请求，如果 10000 人访问我的办公室网站......这可能会由于更多请求而导致网站速度变慢？？以及由于巨大的流量而对服务器造成的任何问题？

我记得我的小型办公室服务器有

Intel i3 处理器 Nvidia 2Gb 显卡 Microsoft 2008 服务器 8 GB DDR3 Ram 和 500GB 硬盘..

在 Asp.Net 上开发的网站

网速为 10mbps 下载和 2mbps 上传。使用静态 IP 地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T20:51:20.937

网站运行缓慢的原因有很多。

*   额外流量激增。

*   超大或未优化的图形。

*   大量外呼。

*   服务器问题。

所有网站都应该有优化的图像、flash 文件和视频。大型媒体会减慢每个页面的整体加载速度。优化每个图像。PNG 图像具有改进的加权优化，可以以更小的文件大小提供更好看的图像。您还可以运行 Traceroute 到您的站点。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T20:56:16.047

这个问题无法回答，因为变量太多。听起来您假设您将同时拥有 10000 个用户，您真的期望会有这么多吗？

找出您的服务器和站点在这种负载下是否能够承受的唯一方法是对其进行分析。

有一个名为 Apache Bench 的工具[http://httpd.apache.org/docs/2.0/programs/ab.html](http://httpd.apache.org/docs/2.0/programs/ab.html)您可以从命令行运行它并模拟对服务器的许多请求以对其进行基准测试。该工具安装了 apache，然后您可以模拟 10000 个对服务器的请求，并查看请求时间如何保持。同时，您可以在 windows 中运行性能监视器来诊断是否存在任何瓶颈。

示例用法取自[维基百科](http://en.wikipedia.org/wiki/ApacheBench)

```
ab -n 100 -c 10 http://www.yahoo.com/ 
```

> 这将执行 100 个 HTTP GET 请求，同时处理最多 10 个请求到指定的 URL，在本例中为“http://www.yahoo.com”。

我认为它不会下载您的页面依赖项（js、css、图像），但可能还有其他工具可以用来模拟它。

我建议您确保在您的站点上启用压缩并设置缓存，因为这将显着减少负载和请求数量，而只需很少的努力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T20:18:02.857

您应该考虑服务器的上传容量，而不是硬件。如果您的上传带宽很低，那当然会是个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T22:21:12.733

最可能的原因是因为一个会话锁定了所有的其余请求。

如果您不使用会话，请将其关闭并再次检查。

相对的：

[完全替换 ASP.Net 的会话](https://stackoverflow.com/questions/8989648/replacing-asp-nets-session-entirely/9021543)

[对 Web 服务的 jQuery Ajax 调用似乎是同步的](https://stackoverflow.com/questions/9052401/jquery-ajax-calls-to-web-service-seem-to-be-synchronous)

# c# - 来自 Audio XNA 的 Title Shake

> ID：10776910
> 
> 赞同：2
> 
> 时间：2012-05-27T20:13:11.793
> 
> 标签：c#, audio, xna, visualization

我正在使用 XNA。我想知道是否可以在菜单屏幕上使标题图片（PNG）像从音箱中振动一样抖动。我有一个特定的 mp3 将在后台播放。你知道我该怎么做吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T20:32:43.220

两种方法：

*   只需以任意节奏的方式移动标题，使其看起来与音乐相匹配。摆弄它，直到它看起来正确。不幸的是，如果您更改歌曲，您将不得不重新调整动画。
*   使用 MediaPlayer 类播放歌曲并使用其[GetVisualizationData](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.media.mediaplayer.getvisualizationdata.aspx)方法获取频率和样本数据。以某种方式移动标题作为它的功能。同样，您必须自己找出一个好的启发式方法。例如，如果您对最后 X 个样本的绝对幅度进行平均，则可以衡量音量，因此您可以根据该情况或多或少地制作动画。

我不会在这上面花太多时间，玩家倾向于把时间花在玩上，而不是欣赏主菜单。

# macos - 笔记本小部件中的tkinter python多个滚动条

> ID：10776912
> 
> 赞同：3
> 
> 时间：2012-05-27T20:13:17.523
> 
> 标签：macos, python-3.x, tkinter, scrollbar, tk

我在 Mac OS 10.7 上使用 Python 3.2.3 和 Tkinter (8.5.11)。我已经设置了一个带有多个选项卡的 Tkk Notebook 小部件。在前三帧中，有与滚动条同步的列表框。每个滚动条都可以正常工作，但是如果我操纵创建的三个滚动条中的最后一个，其他两个滚动条就会变得无响应。（当只有两个窗格上有滚动条时，也会发生同样的情况——在第一个窗格上使用滚动条不会影响第二个窗格的滚动条，但使用第二个窗格的滚动条会冻结第一个窗格的滚动条）。我附上下面的代码；这对我来说看起来很简单，但我对此很陌生。

```
from tkinter import *
from tkinter import ttk

def switchTab():
    newTab=tabList[1]
    fieldbook.select(tab_id=newTab)

root = Tk()
root.geometry('1000x700+1000+40')
root.resizable(FALSE,FALSE)
root.rowconfigure(0,weight=1)
root.columnconfigure(0,weight=1)
root.title("Electronic Fieldbook")

fieldbook = ttk.Notebook(root)
f1 = ttk.Frame(fieldbook);
f2 = ttk.Frame(fieldbook);
f3 = ttk.Frame(fieldbook);
f4 = ttk.Frame(fieldbook);
f5 = ttk.Frame(fieldbook);
f6 = ttk.Frame(fieldbook);
f7 = ttk.Frame(fieldbook);
f8 = ttk.Frame(fieldbook);
f9 = ttk.Frame(fieldbook);
fieldbook.add(f1, text="Home")
fieldbook.add(f2, text="Lexicon")
fieldbook.add(f3, text="Texts")
fieldbook.add(f4, text="Examples")
fieldbook.add(f5, text="Datasets")
fieldbook.add(f6, text="Concordances")
fieldbook.add(f7, text="Paradigms")
fieldbook.add(f8, text="Abbreviations")
fieldbook.add(f9, text="Index")

##create tabs

homeLabel=ttk.Label(f1, text="Lhome")
lexiconLabel=ttk.Label(f2, text="Llexicon")
textsLabel=ttk.Label(f3, text="Ltexts")
examplesLabel=ttk.Label(f4, text="Lexamples")
datasetsLabel=ttk.Label(f5, text="Ldatasets")
concordancesLabel=ttk.Label(f6, text="Lconcordances")
paradigmsLabel=ttk.Label(f7, text="Lparadigms")
abbrvLabel=ttk.Label(f8, text="Labbreviations")
indexLabel=ttk.Label(f9, text="Lindex")

##create home widgets
lexBox = Listbox(f1, height = 32)
lexScrl = ttk.Scrollbar(f1, orient=VERTICAL, command=lexBox.yview)
LexHomeLabel = ttk.Label(f1, text="Lexicon")
testButton = ttk.Button(f1, text="Test", command=switchTab)

##create Lexicon widgets
navBox = Listbox(f2, height = 35)
navScrl = ttk.Scrollbar(f2, orient=VERTICAL, command=navBox.yview)

##create Text widgets
txtBox = Listbox(f3, height = 35)
txtScrl = ttk.Scrollbar(f3, orient=VERTICAL, command=txtBox.yview)

##grid widgets
fieldbook.grid(row=0, column=0, sticky=(N,W,S,E))

## grid home widgets
LexHomeLabel.grid(row=0,column=0, sticky=(N))
lexBox.grid(row=1, column=0, sticky=(N,W,S,E))
for i in range(1,101):
    lexBox.insert('end', 'Line %d of 100' % i)
lexScrl.grid(row=1,column=1, sticky=(N,S))
lexBox['yscrollcommand'] = lexScrl.set
testButton.grid(column=3, row= 2, sticky=(S,E))

##grid lexicon widgets
navBox.grid(row=0, column=0, sticky=(N,W,S,E))
for i in lexBox.get(0, 'end'):
    navBox.insert('end', i)
navScrl.grid(row=0,column=1, sticky=(N,S))
navBox['yscrollcommand'] = navScrl.set

##grid txt widgets
txtBox.grid(row=0, column=0, sticky=(N,W,S,E))
for i in range(1,101):
    txtBox.insert('end', 'Text %d of 100' % i)
txtScrl.grid(row=0,column=1, sticky=(N,S))
txtBox['yscrollcommand'] = txtScrl.set

tabList = fieldbook.tabs()

root.mainloop() 
```

# matlab - 在 MATLAB 中对数组进行排序

> ID：10776924
> 
> 赞同：1
> 
> 时间：2012-05-27T20:14:44.320
> 
> 标签：matlab, number-formatting

我有一个单列数组，我想按降序排序。该数组的值范围从 0 到大约 10^14。当我对数组进行排序时

`sorted = sort(A,'descend')`

并尝试查看十个最大值，我发现

`sorted(1:10)`

给我

> 1.0e+14 *
> 
> 5.1093
> 
> 0.0000
> 
> 0.0000
> 
> 0.0000

等等...——显示前几个大条目告诉我只有一个非零元素，这是不正确的。但是，如果我跳过前几个条目，它们远大于数组的其余元素，我会得到

> 排序（8:10）=
> 
> 2.9754
> 
> 2.4182
> 
> 2.0799

为什么显示这些前几个大数组元素会导致所有其他元素显示为零？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T20:28:13.313

您可能会发现`sprintf`以`num2str`任意精度打印数字更有用。

请参阅[这个相关的 SO 问题](https://stackoverflow.com/questions/1759982/is-it-possible-in-matlab-to-explicitly-format-the-output-numbers)。

相关 Matlab 文档：

1.  [http://www.mathworks.com/help/techdoc/ref/format.html](http://www.mathworks.com/help/techdoc/ref/format.html)

2.  [http://www.mathworks.com/help/techdoc/ref/num2str.html](http://www.mathworks.com/help/techdoc/ref/num2str.html)

3.  [http://www.mathworks.com/help/techdoc/ref/sprintf.html](http://www.mathworks.com/help/techdoc/ref/sprintf.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T20:29:01.453

列表中的第一个数字是与后面的整个数组相乘的比例因子。由于元素大小的差异，您将需要使用格式设置。尝试

```
 format long 
```

或者

```
 format long e 
```

看到更好的表现

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T20:24:59.730

它们显示为零是因为与第一个元素相比它们基本上为零（也就是说，它们远小于 10^14）。但即使它们显示为零，它们也不是零。尝试输入`sorted(3)`：结果不应该为零。（编辑：你已经在上面展示了这个）。

这基本上是一个精度问题。打字`format long`也可能使这一点更清楚。

# eclipse - Ivy 解析来自 Ant 但不是 IvyDE 的 jersey-servlet

> ID：10776927
> 
> 赞同：0
> 
> 时间：2012-05-27T20:14:58.060
> 
> 标签：eclipse, jersey, ivy, ivyde

我正在尝试使用 Apache Jersey 构建一个安静的服务器。我在 Eclipse Indigo 中开发，并使用 Ivy 进行依赖管理与这个 ivy.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>

<!--=========================================================================-->
<!--
-->
<!--=========================================================================-->

<ivy-module version="2.2">      
    <info organisation="com.mypackage" module="mymodule"/>
    <dependencies>
        <dependency org="com.sun.jersey" name="jersey-servlet" rev="1.12"/>
    </dependencies>
</ivy-module> 
```

这解决了从 ant 调用 ivy 的问题，但是从 IvyDE 我得到了这个错误

```
Some projects fail to be resolved
Impossible to resolve dependencies of com.mypackage#mymodule;working@Samsung-Windows
unresolved dependency: org.jboss.weld#weld-spi;1.1.4.Final: not found
unresolved dependency: javax.annotation#jsr250-api;${jsr250.api.version}: not found
unresolved dependency: org.jboss.weld#weld-api;1.1.4.Final: not found
unresolved dependency: javax.inject#javax.inject;${atinject.api.version}: not found
unresolved dependency: org.jboss.spec.javax.interceptor#jboss-interceptors-api_1.1_spec;${interceptor.api.version}: not found 
```

对我来说， ${atinject.api.version} 看起来好像在某处无法正确解析变量。

我对Ivy的了解很肤浅，没有什么好的想法。

IvyDE 和 ant 都使用相同的 ivysettings.xml 文件（至少，我相信它们是）。

```
<?xml version="1.0" encoding="UTF-8"?>

<!--=========================================================================-->

<!--=========================================================================-->

<ivysettings>
   <settings defaultResolver="ibiblio"/>
   <resolvers>
          <ibiblio name="ibiblio" m2compatible="true"/>
          <ibiblio name="maven2" m2compatible="true"/>
          <ibiblio name="java-net-maven1" root="http://download.java.net/maven/1" pattern="${java.net.maven.pattern}" m2compatible="false"/>
          <ibiblio name="java-net-maven2" root="http://download.java.net/maven/2/" m2compatible="true"/>
    </resolvers>
</ivysettings> 
```

任何方向都会很棒。

提前非常感谢。

**编辑：添加部分 Build.xml**

我正在使用 apache-ivy-2.2.0 虽然输出声称：

```
[ivy:configure] :: Apache Ivy 2.3.0-rc1 - 20120416000235 :: http://ant.apache.org/ivy/ :: 
```

这是 build.xml：

```
<?xml version="1.0"?>

<project name="IvyTest" default="ivy.retrieve" xmlns:ivy="antlib:org.apache.ivy.ant">
    <description>
        IvyTest
    </description>

    <!--=====================================================================-->
    <!-- Properties                                                          -->
    <!--=====================================================================-->

    <!-- General properties. -->
    <property name="bin" location="bin" />
    <property name="lib" location="lib" />
    <property name="lib.ivy" location="${lib}/ivy-managed" />

    <property name="ivy.version" value="2.2.0" />
    <property name="ivy.home" location="${bin}/apache-ivy-${ivy.version}" />
    <available property="ivy.installed" file="${ivy.home}/ivy-${ivy.version}.jar" />

    <property name="ant.build.javac.source" value="1.7" />
    <property name="ant.build.javac.target" value="1.7" />

    <!--=====================================================================-->
    <!-- Targets: Ivy                                                        -->
    <!--=====================================================================-->

    <!--============================ ivy.download ===========================-->
    <target name="ivy.download" unless="ivy.installed">
        <mkdir dir="${ivy.home}"/>
        <get src="http://repo1.maven.org/maven2/org/apache/ivy/ivy/${ivy.version}/ivy-${ivy.version}.jar" dest="${ivy.home}/ivy-${ivy.version}.jar" usetimestamp="true"/>
    </target>

    <!--============================ ivy.init ===============================-->
    <target name="ivy.init" depends="ivy.download">
        <taskdef resource="org/apache/ivy/ant/antlib.xml" uri="antlib:org.apache.ivy.ant" classpath="${ivy.home}/ivy-${ivy.version}.jar"/>
    </target> 

    <!--============================ ivy.resolve ============================-->
    <target name="ivy.resolve" description="Resolve dependencies with Ivy" depends="ivy.configure">
        <ivy:resolve />
    </target>

    <!--============================ ivy.retrieve ===========================-->
    <target name="ivy.retrieve" description="Retrieve dependencies with Ivy" depends="ivy.configure">
        <ivy:retrieve log="verbose" pattern="${lib.ivy}/[artifact]-[revision].[ext]" type="jar,bundle" sync="true"/>
    </target>

    <!--============================ ivy.configure ==========================-->
    <target name="ivy.configure" description="Configure Ivy settings file" depends="ivy.init">
        <ivy:configure file="ivysettings.xml"/>
    </target>

    <!--============================ ivy.clean ==============================-->
    <target name="ivy.clean" description="Cleans the Ivy cache" depends="ivy.init">
        <ivy:cleancache />
    </target>

</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T18:16:14.513

默认情况下，ivy 将从 Maven Central 下载依赖项，因此除非您使用自己的 Maven 存储库管理器，否则您不需要 ivy 设置文件。话虽如此，声明一个和以下对我来说很好的做法是好的做法：

```
<ivysettings>
    <settings defaultResolver="central"/>
    <resolvers>
        <ibiblio name="central" m2compatible="true"/>
    </resolvers>
</ivysettings> 
```

请注意，它比您的示例简单得多。旧的 java.net 存储库不再真正使用，它们的大部分（如果不是全部）内容已迁移到 Maven Central。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-29T22:32:20.800

作为对原始问题的更新：

我也遇到了可以在控制台上解决的情况，`ant resolve`但 IvyDe（在 Eclipse 4.2 下）给了我错误*“无法解决依赖项 [...]”*

通过这篇[文章](http://osdir.com/ml/user-ant-apache/2009-05/msg00197.html)，我设法编辑了 IvyDE 的设置（Workspace Preferences -> Ivy -> Settings）并添加了一个包含以下内容的 ivysettings.properties 文件：

```
ivy.home=${user.home}/.ant
ivy.jar.dir=${ivy.home}/lib
ivy.jar.file=${ivy.jar.dir}/ivy.jar 
```

从现在开始一切正常。

# python - 如何执行需要在同一目录中的文件？

> ID：10776930
> 
> 赞同：3
> 
> 时间：2012-05-27T20:15:26.097
> 
> 标签：python

我有一个 python 脚本需要执行`.jar`位于另一个目录中的文件。最好的方法是什么？到目前为止，我在想——

```
subprocess.call(["cd","/path/to/file"])
subprocess.call(["./file.jar"]) 
```

我该怎么做？

**更新：**

使用下面的两个答案，这就是我最终要做的事情：

```
subprocess.call(shlex.split("./file.jar -rest -of -command"), cwd=COMMAND_FOLDER) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T20:22:25.100

要在不同的当前工作目录中运行进程，请使用`subprocess.Popen`'s`cwd`参数：

```
import subprocess
proc = subprocess.Popen(['file.jar'], cwd = '/path/to/file') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T20:19:47.067

如何使用：

```
import subprocess
import shlex

cmd = "the command to use to execute your binary"

args = shlex.split(cmd)
try:
    p = subprocess.call(args)
except OSError, e:
    print >>sys.stderr, "Execution failed:", e 
```

# c++ - 为什么我不能在没有常数的情况下定义比较

> ID：10776931
> 
> 赞同：4
> 
> 时间：2012-05-27T20:15:35.867
> 
> 标签：c++, compiler-construction, g++

如果我这样定义我的`compare`函数：

```
bool compare(Student& a, Student& b)
{
    return a.n < b.n;
} 
```

g++ 会抱怨：

```
g++ -Wall main.cpp -o main
In file included from /usr/lib/gcc/x86_64-pc-linux-gnu/4.5.3/include/g++-v4/algorithm:63:0,
                 from main.cpp:1:
/usr/lib/gcc/x86_64-pc-linux-gnu/4.5.3/include/g++-v4/bits/stl_algo.h: In function ‘_RandomAccessIterator std::__unguarded_partition(_RandomAccessIterator, _RandomAccessIterator, const _Tp&, _Compare) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<Student*, std::vector<Student> >, _Tp = Student, _Compare = bool (*)(Student&, Student&)]’:
/usr/lib/gcc/x86_64-pc-linux-gnu/4.5.3/include/g++-v4/bits/stl_algo.h:2261:78:   instantiated from ‘_RandomAccessIterator std::__unguarded_partition_pivot(_RandomAccessIterator, _RandomAccessIterator, _Compare) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<Student*, std::vector<Student> >, _Compare = bool (*)(Student&, Student&)]’
/usr/lib/gcc/x86_64-pc-linux-gnu/4.5.3/include/g++-v4/bits/stl_algo.h:2302:62:   instantiated from ‘void std::__introsort_loop(_RandomAccessIterator, _RandomAccessIterator, _Size, _Compare) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<Student*, std::vector<Student> >, _Size = long int, _Compare = bool (*)(Student&, Student&)]’
/usr/lib/gcc/x86_64-pc-linux-gnu/4.5.3/include/g++-v4/bits/stl_algo.h:5250:4:   instantiated from ‘void std::sort(_RAIter, _RAIter, _Compare) [with _RAIter = __gnu_cxx::__normal_iterator<Student*, std::vector<Student> >, _Compare = bool (*)(Student&, Student&)]’
main.cpp:38:51:   instantiated from here
/usr/lib/gcc/x86_64-pc-linux-gnu/4.5.3/include/g++-v4/bits/stl_algo.h:2229:4: error: invalid initialization of reference of type ‘Student&’ from expression of type ‘const Student’
/usr/lib/gcc/x86_64-pc-linux-gnu/4.5.3/include/g++-v4/bits/stl_algo.h:2232:4: error: invalid initialization of reference of type ‘Student&’ from expression of type ‘const Student’

Compilation exited abnormally with code 1 at Mon May 28 08:05:35 
```

但是如果我定义了与`const`类型的比较，它将编译并正常工作。

这是所有代码：

```
class Student {
public:
    Student(string);
    string n;

};

bool compare(Student& a, Student& b)
{
    return a.n < b.n;
}

Student::Student(string name) { n = name; }

int main()
{
    Student A = Student("A");
    Student B = Student("B");

    vector<Student> students;
    students.push_back(B);
    students.push_back(A);

    sort(students.begin(), students.end(), compare);

    cout << "After sort" << endl;
    for(vector<Student>::iterator i = students.begin(); i != students.end(); ++i) {
        cout << "Student: " << i->n << endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T20:29:25.857

在这个实现中，`std::sort`使用

```
 const _Tp& std::__median(const _Tp&, const _Tp&, const _Tp&, _Compare); 
```

在您的情况下，`_Tp`是学生，并且`_Compare`是`compare`。

所以你基本上有

```
const Student& std::__median(const Student&, const Student&, const Student&, 
                                                   bool (*)(Student&, Student&) ) 
```

或类似的。显然，回调不能应用于参数被转换为`const`，所以失败。

为您的`compare`方法设置参数`const`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T20:44:57.720

我不相信标准中有要求函数的参数必须是 const，所以我相信你的实现拒绝它是错误的。但是，要求函数不修改参数：

从标准——25.4/2

> Compare 是一个函数对象类型 (20.8)。应用于比较类型对象的函数调用操作的返回值，当上下文转换为 bool (4) 时，如果调用的第一个参数小于第二个参数，则返回 true，否则返回 false。比较 comp 始终用于假设排序关系的算法。假定 comp 不会通过取消引用的迭代器应用任何非常量函数。

`std::sort`以及来自 25.4.1.1的签名

```
template<class RandomAccessIterator, class Compare>
void sort(RandomAccessIterator first, RandomAccessIterator last, Compare comp) 
```

因此，由于不允许您的函数修改其参数，因此它确实应该将它们作为 const 接受，但标准并不要求这样做。因此，虽然您的实现可能有错误，但我认为这是一个可以原谅的错误，因为它设法引起人们注意这样一个事实，即您的函数通过修改其参数违反了标准，或者它不是 const 正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T20:18:23.417

您应该将其设为 const，因为它使两个参数保持不变。

# objective-c - objectValueForTableColumn: 什么时候被调用？

> ID：10776932
> 
> 赞同：1
> 
> 时间：2012-05-27T20:15:38.700
> 
> 标签：objective-c, cocoa, nstableview

我目前正在阅读 Big Nerd Ranch 家伙的 Mac OSX Cocoa 书的第 3 版，并且我正在编辑我的程序以包含表格视图。这里是 AppController.m 文件中的代码，我必须从 TableView 中实现所需的协议方法：

```
-(id)init{
    self = [super init];

    voiceArray = [NSSpeechSynthesizer availableVoices];
    speechSynth = [[NSSpeechSynthesizer alloc] initWithVoice:nil];
    [speechSynth setDelegate:self];
    return self;
}

-(int)numberOfRowsInTableView:(NSTableView *)tv{
    NSLog(@"Getting number of rows in table view: %lu", [voiceArray count]);
    return [voiceArray count];
}

-(id)tableView:(NSTableView *)tv objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row{

    NSString *v = [voiceArray objectAtIndex:row];
    NSDictionary *dict = [NSSpeechSynthesizer attributesForVoice:v];
    NSLog(@"Voice Name %@", [dict objectForKey:NSVoiceName]);
    return [dict objectForKey:NSVoiceName];
}

-(void)tableViewSelectionDidChange:(NSNotification *)notification{
    int row = [tableView selectedRow];
    NSLog(@"row selected %d", row);
    if(row == 1){
        return;
    }
    NSString *selectedVoice = [voiceArray objectAtIndex:row];
    [speechSynth setVoice:selectedVoice];
    NSLog(@"new voice %@ ", selectedVoice);
} 
```

当应用程序首次加载时，我得到以下输出：

> 2012-05-27 15:02:29.040 Speakline[42836:f03] 获取表格视图中的行数：24
> 2012-05-27 15:02:29.042 Speakline[42836:f03] 选择行 2
> 2012-05-27 15 :02:29.043 Speakline[42836:f03] 新语音 com.apple.speech.synthesis.voice.Alex 2012-05-27 15:02:29.162 Speakline[42836:f03] 语音名称 Agnes
> 2012-05-27 15:02 :29.163 Speakline[42836:f03] 语音名称 Albert

我想确保我完全理解这里发生了什么。为了做到这一点，我有几个问题。

1.  看起来该`numberOfRowsInTableView:`方法是在该方法之后自动调用的`init`。这个对吗？

2.  多久接到`objectValueForTableColumn:`一次电话？什么事件促使该方法被调用？此外，在那里的代码中，该`return`声明使我感到困惑。这个返回值到底去哪儿了？

3.  作为旁注，他们希望我通过控制+单击（通过连接面板）连接 Outlets 和 AppController 并以这种方式链接它们。有哪些替代方法可以在不这样做的情况下将代表和数据源连接到不同类型的视图？我假设添加`NSTableViewDelegate`控制器头文件可能是一种方法。如果您可以选择控制+单击将所有视图连接到插座等等，而不是以编程方式将其全部设置好，这只是一个偏好问题吗？在我看来，为了理解发生了什么，最好自己编写代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T23:13:45.763

1) numberOfRowsInTableView 和 objectValueForTableColumn:Row: 在 nib 未归档后立即调用（我不确定事情的确切顺序），因此可以用数据填充表格视图。

2）表的加载和重新加载或添加新数据以及滚动将导致 objectValueForTableColumn:row: 被调用（由表视图）。它会为填充的每一行调用。该值进入表视图，这就是它获取数据的方式。

3) 连接委托的另一种方法是使用 setDelegate: 在代码中执行此操作，但将 NSTableViewDelegate 放在 .h 文件中不会这样做——这只是对编译器的承诺，您将实现部分或全部委托消息.

# mysql - 奇怪的mysql未知列错误

> ID：10776934
> 
> 赞同：0
> 
> 时间：2012-05-27T20:15:50.017
> 
> 标签：mysql

一段时间以来，我们一直从我们的 mysql 服务器收到“未知列”错误。

错误如下所示：

```
Unknown column 'JOIN search_table��z[.cc.' in 'field list' 
Unknown column '(`IX_cfs$order$make$model`) INNER JOIN search_t' in 'field list'
Unknown column 'eated, cp.stat_sales, cp.stat_views, cp.culture_code' in 'field list'
+ more 
```

最奇怪的部分是我们的 .NET 代码中的哪些方法得到错误是完全随机的。即使在查询中不包含任何报告的错误表的方法，有时也会报告“未知列”错误，其中包含不属于该查询的 SQL 代码...... :-(

我们正在运行 Windows 2008、mysql 5.0.45 和 MySQL 连接器 6.2、.NET 3.5。我们平均每秒 250 个请求，峰值为 750 个请求/秒。MySQL CPU 使用率为 10-50%，内存使用率为 5-6 GB（8 GB 可用）。

这些错误仅在几个月前开始，但已经变得越来越频繁，以至于我们每天从 ELMAH 收到 +500 个错误。我们怀疑这可能是 mysql 服务器压力过大，连接混合（在 mysql 或 .NET 连接池中）。

我们试图在本地和单独的相同服务器设置上重现它，但到目前为止，重新生成错误没有运气，因为它不会发生在所有 sql 查询中，但是重新启动 mysql 服务可以消除一段时间的错误的时间。但是随着我们的用户群和服务器负载以每月 10-15% 的速度增长，错误变得更加频繁。

任何帮助，想法，建议都非常感谢......

**附加信息：** 我们通过修复所有 SQL 注入尝试的自定义函数运行所有外部参数（查询字符串、表单发布数据、Web 服务参数以及内部参数）。而且我们不使用“动态”SQL，只使用存储过程。

除此之外，最常见的返回“未知列”错误的方法是 .NET 中仅将 int32 作为输入参数的方法，而 MySQL SP 也仅将 int 作为参数。

此外，我们将所有内容都包装在 try-catch-finally 中，我们得到的错误来自我们的错误处理模块（主要是 ELMAH）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T20:24:32.253

看起来损坏的查询字符串正在传递给 mySQL。

您的 .Net 应用程序几乎可以肯定是罪魁祸首。

建议：

1.  再次查看进行查询的代码。

2.  如果幸运的话，您可以轻松隔离实际的 SQL

3.  无论如何，请确保相关代码：创建查询的位置，然后是进行查询的位置，最后是访问结果的位置 - 包含在 try/catch 块中。

    我猜测某些未处理的异常可能会使您脱离您期望采用的控制路径流，从而导致数据损坏。

# post - 播放框架 - GET 与 POST

> ID：10776936
> 
> 赞同：4
> 
> 时间：2012-05-27T20:16:13.210
> 
> 标签：post, get, playframework

Web 开发新手，我的理解是 GET 用于获取用户输入，而 POST 用于为他们提供输出。如果我有一个混合页面，例如。在 StackOverflow 上，如果我写一个问题，它会发布一个包含我的问题的页面，但也有一个文本框来获取我的答案。在我的路由文件中，与我的 postQgetA() 方法关联的 URL 将指定什么方法 - GET 或 POST？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T20:55:21.090

从技术角度来看，您只能使用它`GET`来执行几乎所有操作，但是......

*   `GET`是最常用的方法，当你 ie 时使用它。点击链接，获取数据（不要在服务器上修改），可选择发送要获取的资源 id（如果需要获取单个用户的数据）。
*   `POST`最常用于向`new`服务器发送数据，即。从`form`- 将它们存储在您的数据库中（或以任何其他方式处理）

您还可以在 Play 中使用其他[请求方法](http://en.wikipedia.org/wiki/PUT_%28HTTP%29#Request_methods)（即`DELETE`, `PUT`），但是其中一些需要通过 ie 进行“模拟”。ajax，因为无法设置公共链接的方法，即。到`DELETE`. 它描述[了如何在 Play 中使用非 GET/POST 方法！](https://stackoverflow.com/q/10472392/1066240)（*请注意，Julien 建议在那里使用 GET 进行`delete`操作，尽管它可能是一个损坏的语义。*）

StackOverflow 上还有[其他讨论](https://stackoverflow.com/questions/4573305/rest-api-why-use-put-delete-post-get)，您可以在其中找到为您的路线选择正确方法的示例和建议。

顺便说一句，如果您发送一些请求，假设`POST`您不需要单独执行`GET`，因为发送 a会`request`生成 a `response`，换句话说，在发送新问题后`POST`首先您尝试将其保存到数据库，如果没有错误呈现页面并将其发回作为回应。

# c# - 在 C# 中创建实例时覆盖抽象方法

> ID：10776938
> 
> 赞同：5
> 
> 时间：2012-05-27T20:16:53.147
> 
> 标签：c#, java, .net

在java中，我们可以在实例创建时重写或实现抽象方法，如下所示：

```
AbstractClass test =new AbstractClass() 
{
    public void AbstractMethod(string i) {

    }
    public void AbstractMethod2(string i) {

    }
}; 
```

这在 C# 中可能吗？如果是，等效代码是什么

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T20:19:24.400

此 Java 功能称为[“匿名类”](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)，而不是“实例创建方法的覆盖”。C# 中没有相同的功能。

C# 采取了不同的路线——它没有为创建子类提供方便的语法，而是扩展了它的委托特性，提供了[匿名委托](http://msdn.microsoft.com/en-us/library/0yw3tz5k%28v=vs.80%29.aspx)和[lambdas](http://msdn.microsoft.com/en-us/library/bb397687.aspx)。Lambda 让您可以插入代码片段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T20:32:30.227

您可以通过巧妙地使用 lambda 来实现非常相似的效果：

```
public class BaseClass {

    public BaseClass(Action<string> abs1 = null, Action<string> abs2 = null){
       AbstractMethod1 = abs1 ?? s=>{};
       AbstractMethod2 = abs2 ?? s=>{};
    }

    public Action<string> AbstractMethod1 {get; private set;}
    public Action<string> AbstractMethod2 {get; private set;}
} 
```

所以你可以像这样使用这个定义：

```
new BaseClass( s=> Console.WriteLine(s), s=> Console.WriteLine(s)); 
```

您还可以将所有方法定义为接口的一部分，然后使用接口的具体实现构造一个类（代理对具体实现的调用）——我称之为“策略”模式。但这只是这个主题的一个变体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T20:27:05.187

不知道`Java`，但这“闻起来”像匿名[类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)。`C#`

例如，您可以编写如下内容：

```
 var myNewType = new { 
                       Name = "Charles", 
                       Surname="Dickens", 
                       Age = 55 
                      }; 
```

# php - 如何使用 facebook php sdk 为帖子或照片添加位置

> ID：10776941
> 
> 赞同：1
> 
> 时间：2012-05-27T20:17:35.787
> 
> 标签：php, facebook, location, facebook-php-sdk, photo

这让我发疯了。

任何人都可以发布一个*实际*的例子吗？我对生命的感恩：

1.  发布帖子并添加相关的签到/位置信息
2.  发布照片并添加相关的签到/位置信息。

在这两种情况下，用户都将操作委托给应用程序。我们事先拥有访问令牌。

请不要理论，一个有效的编码狙击手;-)

我特别搞砸了，因为 facebook 要求*对象*和*数组的嵌套结构*

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T21:25:27.737

抓取`$user`实例

```
$user = $facebook->getUser(); 
```

检查登录的用户是否经过身份验证。

```
if ($user) {
  try {
    // Proceed 
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
} 
```

提供具有发布所需权限的登录 url。特别是`publish_stream`照片文档中所述的许可[http://developers.facebook.com/docs/reference/api/user/#photos](http://developers.facebook.com/docs/reference/api/user/#photos)

```
if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl(array(
             'scope' => 'read_stream,publish_stream,user_photos'
             ));
} 
```

将`me/photos`调用放在 try/catch 块中以捕获可能发生的任何异常。

```
 try {
        $facebook->setFileUploadSupport('http://yourapicallingwebsite.com/');
        $response = $facebook->api(
          '/me/photos/',
          'post',
          array(
            'message' => 'Testing the Photo Upload',
            'source' => '@/path/to/img',
            'place' => 'place_id' 
          )
        );
      }
   catch (FacebookApiException $e) {
       error_log('An error occurred posting the image');
   } 
```

检查来自我/照片呼叫的响应

```
$photo_u = $facebook->api('/'.$response['id']); 
```

喜欢就展示吧

```
<img src=<?php echo $photo_u['picture'] ?>/> 
```

如果您喜欢，请检查地名

```
$photo_place = $photo_u['place'];
<span><?php echo $photo_place['name'] ?></span> 
```

# android - ViewBinder 创建随机内容

> ID：10776947
> 
> 赞同：0
> 
> 时间：2012-05-27T20:18:11.647
> 
> 标签：android, android-viewbinder

我在 ViewBinder 中有奇怪的行为。在 TextViews 上一切正常。使用 CheckBoxes（在我的代码中删除）和自定义小部件 progressChart 当我向下和/或再次向上滚动时，值不会存储在 List 的正确位置。一切似乎都很随意。但是 TextViews 总是正确的。这是我的代码：

```
SimpleAdapter.ViewBinder viewBinder = new SimpleAdapter.ViewBinder() {
            @Override
            public boolean setViewValue(View view, Object data,
                    String textRepresentation) {
                if (view.getId() == R.id.progress) {
                    ProgressChart progressChart = (ProgressChart) view;

                progressChart.setVisibility(ImageButton.GONE);
                    } else {
                        if (x.substring(0, 1).equals("1")) {
                            int theProgress = Integer.parseInt(x.substring(1));
                            progressChart.setProgressDarkRed(theProgress);
                        }
                }
                if (view.getId() == R.id.textView1) {
                    TextView textView = (TextView) view;
                    textView.setText((String) data);
                }
                return true;
            }
        };
        simpleAdapter.setViewBinder(viewBinder);
        setListAdapter(simpleAdapter); 
```

非常感谢任何帮助

我发现了一个类似的问题，但答案不适合我的代码。 [ViewBinder 的问题](https://stackoverflow.com/questions/5077884/problem-with-the-viewbinder)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T20:38:48.900

这是因为视图回收。

您需要创建一个对象来保存复选框的状态并在适配器中设置您的视图。

我不认为它可以在 viewbinder 中完成，因为没有将位置传递给它（但老实说我从未尝试过）..

您可能必须在`getView`.

这是我以前的答案的链接，我在其中展示了如何使用 SimpleCursorAdapter 进行处理（它也可以修改为适用于 arrayadapter）。 [所以回答](https://stackoverflow.com/a/10713257/1105376)

# mysql - 运行重新启动的查询

> ID：10776951
> 
> 赞同：0
> 
> 时间：2012-05-27T20:18:32.480
> 
> 标签：mysql, sql

我正在通过 phpmyadmin 运行一个 MySql 数据库，并且正在构建一个查询来总计一些值。

在 EXCEL 中，公式如下所示 =IF(AND(P6=P5,B6=B5),SUM(H5+F6),F6)

该公式放在 H 列中

P Column 是一个类标识符。B栏是他们的注册号。H 列是他们的总分。F列是他们条目的点值。

它在excel中效果很好。但是在 SQL 的语法上有一些麻烦。

我知道首先我需要对文件进行排序，以便所有内容都以正确的顺序通过，明白了。但从那一刻起，我就一无所知了。

如果我的 excel 代码需要更深入的解释，我可以这样做，如果有帮助的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T22:10:05.633

据我了解，您需要使用一些“分区”或行来运行总计。似乎在 MySql 中您需要对变量进行一些“破解”，因为该数据库中没有分析函数。

以下查询将执行此操作。它使用三个变量 - @rollingsum 存储 F 列的总和，@prevP 和 @prevB 变量存储 B 和 P 列的先前值）

```
SELECT s.p, s.b, s.f, s.rollingSum FROM 
(
SELECT  p, 
        b, 
        f, 
        IF( p=@prevP AND b=@prevB,
        @rollingsum := @rollingsum + f,
        @rollingsum := f )  as rollingSum,
        @prevP := p,
        @prevB := b
FROM      test_table p, (SELECT @rollingsum := 0, @prevP := '', @prevB := '') r 
ORDER BY  p,b ) s 
```

例子：

源数据：

```
P   B   F
1   1   10
1   1   10
1   2   10
1   2   10
1   2   10
2   2   10
2   2   10
2   2   10 
```

上述查询的结果（rollingsum 列是您的 H 列 - 您的 excel 中的总分）：

```
P   B   F   ROLLINGSUM
1   1   10  10
1   1   10  20
1   2   10  10
1   2   10  20
1   2   10  30
2   2   10  10
2   2   10  20
2   2   10  30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T20:43:52.393

您没有向我们提供有关表结构的详细信息，因此我假设您有 SOME_ID = 5 和 SOME_ID = 6 的记录。有了这些数据，一个可能的 SQL 语句是：

```
select 
    (select T1.B from SOME_TABLE T1 where T1.SOME_ID = :PREVIOUS_ID) as B_PREVIOUS,
    (select T1.F from SOME_TABLE T1 where T1.SOME_ID = :PREVIOUS_ID) as F_PREVIOUS,
    (select T1.H from SOME_TABLE T1 where T1.SOME_ID = :PREVIOUS_ID) as H_PREVIOUS,
    (select T1.P from SOME_TABLE T1 where T1.SOME_ID = :PREVIOUS_ID) as P_PREVIOUS,
    B as B_CURRENT, F as F_CURRENT, H as H_CURRENT, P as P_CURRENT,
    case when
        (select T1.B from SOME_TABLE T1 where T1.SOME_ID = :PREVIOUS_ID) = B
        and
        (select T1.P from SOME_TABLE T1 where T1.SOME_ID = :PREVIOUS_ID) = P then
          (select T1.H from SOME_TABLE T1 where T1.SOME_ID = :PREVIOUS_ID) + F
  else
          F
  end as RESULT
from SOME_TABLE
where SOME_ID = :CURRENT_ID 
```

当然，唯一需要的返回列是 RESULT。我返回另一个仅用于调试目的。

希望这对你有帮助！

**已编辑：**更新以反映@Ben 关于由于重复搜索当前记录而导致性能下降的注释

# iphone - 更改静态表格视图，例如 Iphone 上的联系人应用程序

> ID：10776952
> 
> 赞同：1
> 
> 时间：2012-05-27T20:18:33.740
> 
> 标签：iphone, ios5, uitableview, static

我知道以前有人问过这个问题，但没有人真正回答过。

我正在尝试制作一个带有静态表格视图和右上角的完成/编辑按钮的应用程序。我需要能够在单元格处于一种状态时隐藏它，并在它处于另一种状态时显示该单元格。当用户选择某些东西时，我还需要能够添加单元格。我已经准备好使用 bool 来检测 Done / Edit 按钮的变化。

所以基本上我的问题是：当用户按下按钮时，如何让表格视图显示单元格，并在用户再次按下按钮时隐藏它。

以及如何通过代码添加静态单元格。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T02:09:06.057

我还没有真正看过 iOS 5 中的静态表格内容，因为我认为这需要我不使用的情节提要。

然而，这可以通过经典的 grouped 轻松完成`UITableView`。在您的`UITableViewDataSource`方法中，仅根据编辑状态返回不同的结果。如果您使用的是文字`editing`模式，`UITableView`您可以执行以下操作（警告：在浏览器中输入）：

```
– (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    if ([tableView isEditing]) {
        // Return number of sections when editing
    }
    else {
        // Return number of sections when not editing
    }
}

– (NSInteger)tableView:(UITableView *)tableView
 numberOfRowsInSection:(NSInteger)section
{
    if ([tableView isEditing]) {
        // Return number of rows in section when editing
    }
    else {
        // Return number of rows in section when not editing
    }
}

// etc. 
```

我不记得`-setEditing:`过渡是否为您处理动画，但如果没有，那么您将需要使用`-insertRowsAtIndexPaths:withRowAnimation:`相关方法来通知表格视图行数、节数等已更改并且应该设置动画到新的布局。最后，如果您要添加/删除多个行/部分，您可能希望像往常一样将您的工作包装在`-beginUpdates`/`-endUpdates`对中，以便动画全部合并。

# php - 如何在接口文档中记录@throws

> ID：10776959
> 
> 赞同：19
> 
> 时间：2012-05-27T20:19:45.847
> 
> 标签：php, oop, exception, interface, documentation

我正在编写一个 PHP 库，我有一个问题。我的界面中有类似于以下内容的内容：

```
<?php
/**
 * My interface
 *
 * ...
 */
interface MyInterface
{
    /**
     * This method does foo.
     *
     * @throws \RuntimeException If foo can't be done.
     */
    public function fooAndBar();
}
?> 
```

现在，该`@throws`条目并不完全正确，因为接口实际上并没有做任何事情，并且纯粹用于抽象实现细节。但是，我一直使用它，因为当出现问题时，我的所有接口实现都会抛出异常。

但是另一个开发人员可能会编写一个不会失败的实现（因此它不会抛出异常），或者他/她可能想要使用另一个异常类。

在这种情况下，我应该如何`@throws`在接口声明中记录？甚至应该记录在案吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-27T20:38:30.443

接口定义合约。实现类是否抛出异常是 PHP 中的一个实现细节，因为`throws`方法签名中没有关键字（就像在 Java 中一样）。添加`@throws`注释不能在技术上强制执行合同，但它可以指示约定（顺便说一句，返回值相同）。这是否足够好由您决定。

在旁注中，如果开发人员提出了一个不会抛出的实现，那么您没有问题，因为无论如何您都必须为那些抛出的实现添加一个 try/catch 块（按照惯例）。如果实现开始抛出与 DocBlock 中指示的不同的异常，那将是一个问题，因为那样它就不会被捕获。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-27T20:25:37.923

考虑使用接口的代码：

```
public function doSomething(MyInterface $my) { ... } 
```

如果甚至其中一个实现可以引发异常，您将需要确保处理异常的可能性。

所以，是的，它应该被记录在案。

即使只有一个实现抛出异常，异常处理仍然需要到位。当然，这并不意味着每个方法都应该有一个@throws。它仍应仅在适当的情况下使用（您期望实现合法地需要抛出异常）。

作为更具体的示例，请考虑以下内容：

```
interface LogWriter
{

    /**
     * @throws LogWriterException
     */
    public function write($entry);

}

class DbLogWriter
{

    public function __construct(PDO $db)
    {
        //store $db somewhere
    }

    public function write($entry)
    {
        try {
            //store $entry in the database
        } catch (PDOException $e) {
            throw new LogWriterException(...);
        }
    }

}

class NullLogWriter
{
    public function write($entry) { }
} 
```

可以做一些事情来尝试降低写入数据库时​​发生异常的可能性，但归根结底，这不是异常安全操作。因此，`DbLogWriter::write`应该预期会抛出异常。

现在考虑 null writer，它只是丢弃条目。那里绝对没有任何可能出错的地方，因此，不需要例外。

但是，如果您有一些`$log`并且您所知道的只是它是`LogWriter`. 您是否认为它不会抛出异常并可能不小心让一个冒泡，或者您是否认为它可以抛出一个`LogWriterException`？我会保持安全，并假设它可以抛出 LogWriterException。

如果用户只知道这`$log`是一个 LogWriter 但只有 DbLogWriter 被记录为抛出异常，用户可能没有意识到`$log->write(...)` *可以*抛出异常。此外，当稍后创建 FileLogWriter 时，这意味着已经设置了实现可以并且可能会抛出哪些异常的期望（没有人会期望`FileLogWriter`抛出 a `RandomNewException`）。

# iphone - 在 UITextView 编辑时移动 UIView

> ID：10776962
> 
> 赞同：0
> 
> 时间：2012-05-27T20:20:16.460
> 
> 标签：iphone, keyboard, uitextview, shift, uitextviewdelegate

我有一个很大的评论字段，它是一个`UITextView`. 由于出现了键盘，而 UITextField 几乎占了整个视图的一半，用户几乎看不到该字段。我想要做的是当键盘出现时（即`UITextView`正在编辑），我想将视图向上移动以使其完全可见且用户友好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T20:30:49.370

您可以使用

```
UITextViewTextDidBeginEditing 
```

重新排列视图中的项目。并使用

```
– bringSubviewToFront: 
```

将文本视图带到前面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T21:57:43.383

在浏览了复杂无用的代码后，我在这里找到了一个快速的解决方案：

[https://stackoverflow.com/a/5221243/1139419](https://stackoverflow.com/a/5221243/1139419)

感谢 Dan Ray，这里的答案非常温和地处理了这种情况

关于以下内容的快速说明：调用此函数对我来说并没有什么魅力

```
-(void)scrollToView:(UIView *)view {
    CGRect theFrame = view.frame;
    float y = theFrame.origin.y - 15;
    y -= (y/1.7);
    [self scrollToY:-y]; 
} 
```

所以我编辑了这个函数：

```
-(void)scrollToView:(UIView *)view withCoefficient:(CGFloat)coeff
{
    CGRect theFrame = view.frame;
    float y = theFrame.origin.y;
    y -= (y/coeff);
    [self scrollToY:-y];
} 
```

进入这个。这样我可以尝试滑动主视图的系数是合适的。不是 1.7，而是 2 为我带来了魅力。请访问链接以获取完整解决方案。`UINavigationController`另请注意，如果存在，您可能也想为您应用相同的东西；

```
-(void)textViewDidBeginEditing:(UITextView *)textView
{
    [self.view scrollToView:textView withCoefficient:2.0];
    [self.navigationController.view scrollToView:textView withCoefficient:2.0];
} 
```

# android - 在谷歌地图上绘制路线，android

> ID：10776965
> 
> 赞同：1
> 
> 时间：2012-05-27T20:20:44.137
> 
> 标签：android, google-maps, gps, routes

我想在谷歌地图上绘制一条路线，并使用 GPS 改变我的位置。随着我的位置发生变化（当创建新的地理点时），点在谷歌地图上移动，但我无法在地图上画线。

请帮助在谷歌地图上绘制路线。下面是我的代码

`

```
LocationManager locman;
LocationListener loclis;
Location location;
private MapView map;

List<GeoPoint> geoPointsArray = new ArrayList<GeoPoint>();
private MapController controller;
String provider = LocationManager.GPS_PROVIDER;
double lat;
double lon;

@Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);
      initMapView();
      initMyLocation();
      locman = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
      //locman.requestLocationUpdates(provider,60000, 100,loclis);
      //Location = locman.getLastKnownLocation(provider);

   }
/** Find and initialize the map view. */
   private void initMapView() {
      map = (MapView) findViewById(R.id.mapView);
      controller = map.getController();
      map.setSatellite(false);
      map.setBuiltInZoomControls(true);
   }

   /** Find Current Position on Map. */
   private void initMyLocation() {
      final MyLocationOverlay overlay = new MyLocationOverlay(this, map);
      overlay.enableMyLocation();
      overlay.enableCompass(); // does not work in emulator
      overlay.runOnFirstFix(new Runnable() {
         public void run() {
            // Zoom in to current location
            controller.setZoom(16);
            controller.animateTo(overlay.getMyLocation());
         }
      });
      map.getOverlays().add(overlay);
   }

public void onLocationChanged(Location location) {
    if (location != null){
        lat = location.getLatitude();
        lon = location.getLongitude();
        GeoPoint New_geopoint = new GeoPoint((int)(lat*1e6),(int)(lon*1e6));
        controller.animateTo(New_geopoint);

    }

}
class MyOverlay extends Overlay{
    public MyOverlay(){
    }   
    public void draw(Canvas canvas, MapView mapv, boolean shadow){
    super.draw(canvas, mapv, shadow);
    Paint paint;
    paint = new Paint();
    paint.setColor(Color.GREEN);

    paint.setAntiAlias(true);
    paint.setStyle(Style.STROKE);
    paint.setStrokeWidth(3);

        Projection projection = map.getProjection();
        Path p = new Path();
        for (int i = 0; i < geoPointsArray.size(); i++) {
            if (i == geoPointsArray.size() - 1) {
                break;
            }
        Point from = new Point();
        Point to = new Point();
        projection.toPixels(geoPointsArray.get(i), from);
        projection.toPixels(geoPointsArray.get(i + 1), to);
        p.moveTo(from.x, from.y);

        canvas.drawLine(from.x, from.y, to.x, to.y, paint);
            }
       }
 }

    ` 
```

# objective-c - 通过调用 addChild 泄漏对象

> ID：10776967
> 
> 赞同：0
> 
> 时间：2012-05-27T20:20:47.933
> 
> 标签：objective-c, ipad, memory-leaks, cocos2d-iphone

我有一个名为的自定义类`Hexagon`，它是`NSObject`. 但是，当我将它分配给精灵并通过调用将其添加到屏幕时`-addChild:`，它的保留计数为 2！为了阻止泄漏，我应该怎么做？

```
 for (int i =0; i < HEXCOUNT; i++){
        Hexagon *nHex = [[Hexagon alloc]initWithDicitonary:hexPositions];
        CCSprite *theSprite = (CCSprite*)nHex;
        NSString *hexName = [NSString stringWithFormat:@"hexagon%d", i];
        CGPoint location = CGPointFromString([[EXHEXAGONS objectForKey:hexName]objectForKey:@"position"]);
        CGPoint nLocation = ccp(screenSize.width/2 + 68 * location.x,screenSize.height/2 + 39 * location.y);
        theSprite.position = nLocation;

        [self addChild:theSprite z:1 tag:i];

        NSMutableDictionary *hexProperties = [EXHEXAGONS objectForKey:hexName];
        [hexProperties setObject:theSprite forKey:@"realSprite"];
        [EXHEXAGONS setObject:hexProperties forKey:hexName] ;
        [[GameStateSingleton sharedMySingleton]setExistingHexagons:EXHEXAGONS];

    [nHex release];

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T20:33:35.687

不要依赖retainCount 做任何事情。retainCount 为 2 并不意味着对象正在泄漏。只有 Instruments 可以告诉你。

使用 alloc/init 创建 Hexagon 对象将增加保留计数 +1。将其添加为子项将添加 +1。因此，根据您记录retainCount 的位置，它可能是正确的。

如果您担心内存泄漏，请务必[开始使用 ARC](http://www.learn-cocos2d.com/2012/04/enabling-arc-cocos2d-project-howto-stepbystep-tutorialguide/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T20:42:01.057

首先，担心保留计数是没有效率的，除非您验证它在从所有保留它的各种对象中完全释放时没有被释放。

其次，大概您将对象放入 a `NSArray`,`NSSet`或`NSDictionary`within `addChild:z:tag:`? 所以，这会使它的保留计数增加一。

您还将`Hexagon`对象转换为 a`CCSprite`并将其添加到`NSDictionary` `hexProperties`，这将为您的保留计数增加另一个 1。

当您`release`的对象位于循环底部时，您的保留计数将**至少为**3。之后`release`它应该**至少为**2。

# django - 媒体文件中的图像不会显示在 django 模板中

> ID：10776969
> 
> 赞同：18
> 
> 时间：2012-05-27T20:21:06.140
> 
> 标签：django, django-templates

我是 django 的新手，我一直在玩上传图片然后显示它们。...很好*地*展示它们。

每当我尝试从模板显示图像时，我都会得到损坏的图像链接图标。

我正在使用 sqlite3 服务器

设置.py

```
ROOT_DIR = os.path.dirname(os.path.dirname(__file__))
def location(f):
    return os.path.join(ROOT_DIR, f)
MEDIA_URL = 'http://127.0.0.1:8000/media/'
MEDIA_ROOT = location('media/') 
```

模型.py

```
class Image(models.Model):
    image = models.ImageField(upload_to = 'images/') 
```

视图.py

```
from imageupload.settings import MEDIA_ROOT, MEDIA_URL

def main(request):
    imgs = Image.objects.all()
    return render_to_response('index.html', {'images': imgs, 'media_root': MEDIA_ROOT, 'media_url': MEDIA_URL}) 
```

网址.py

```
urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT) 
```

现在我刚刚使用管理员上传图片。这似乎工作正常，他们去我期望的地方

但是当我尝试显示它们时：
模板

```
<!DOCTYPE html>
<html>
    <img src="<correct path to project>/media/images/photo_1.JPG" />

    {% for img in images %}
    <img src="{{ media_root }}{{ img.image.name }}" />
    <img src="{{ media_url }}{{ img.image.name }}" />
    <img src="{{ img.image.url }}" />
    {% endfor %}
</html> 
```

我得到每个破碎的图标。
浏览器源代码向我展示了：

```
<!DOCTYPE html>
<html>
    <img src="<correct path to project>/media/images/photo_1.JPG" />    
    <img src="<correct path to project>/media/images/photo_1.JPG" />    
    <img src="http://127.0.0.1:8000/media/images/photo_1.JPG" />
    <img src="http://127.0.0.1:8000/media/images/photo_1.JPG" />
</html> 
```

有道理，我只上传了一张照片。
如果我复制其中一个硬链接并将其放入其他一些 html 文件中......它可以工作

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-28T05:57:13.160

哦，FFS....

显然是

```
MEDIA_URL = '/media/' 
```

**不是**

```
MEDIA_URL = 'http://127.0.0.1:8000/media/' 
```

...尽管`#'http://127.0.0.1:8000/media/'`写在它旁边

工作 img 链接如下所示：

```
<img src="/media/images/photo_1.JPG" /> 
```

你肯定需要：

```
static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT) 
```

在 url 文件中也

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-12-10T05:50:43.073

对我来说，我做了以下两件事：

在**settings.py中定义媒体 url**

```
MEDIA_URL = '/media/'
MEDIA_ROOT = os.path.join(BASE_DIR, 'media') 
```

然后在项目的**urls.py**中，为开发和生产目的定义服务 url：

```
from django.contrib import admin
from django.urls import path, include
from django.conf import settings
from django.conf.urls.static import static
from django.contrib.staticfiles.urls import staticfiles_urlpatterns

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include('django_app.urls')),
]
# Serving the media files in development mode
if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
else:
    urlpatterns += staticfiles_urlpatterns() 
```

然后您可以像这样引用模板中媒体文件夹中的图像：

```
<img src="media/path_to_image" /> 
```

Note: Don't forget to set the **DEBUG** flag to **False** in the settings.py for production.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-27T21:23:06.360

如果您正在开发环境中寻找显示图像，请尝试以下操作：

设置.py

```
SITE_ROOT = os.path.realpath(os.path.dirname(__file__))
MEDIA_ROOT = os.path.join(SITE_ROOT, 'static')
MEDIA_URL = '/static/'
STATIC_ROOT = os.path.join(SITE_ROOT, 'statics')
STATIC_URL = '/statics/' 
```

网址.py

```
# somebody import this from settings
SITE_ROOT = os.path.realpath(os.path.dirname(__file__))  
urlpatterns += patterns('', 
    url(r'^static/(?P<path>.*)$','django.views.static.serve',
        {'document_root': os.path.join(SITE_ROOT, 'static')})
) 
```

html 查看文件 *.html:

```
<img src="{{ MEDIA_URL }}img/content_top_edit_form.png"> 
```

这意味着我们在静态文件夹中有一个**img**文件夹。在您的情况下，您可以通过

如果你看到你的浏览器 html 必须是这样的：

```
<img src="/static/img/content_top_edit_form.png"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-09T23:09:09.473

in the template use {{img.image.name.url}}

# java - 根据条件结束正则表达式

> ID：10776971
> 
> 赞同：2
> 
> 时间：2012-05-27T20:21:26.020
> 
> 标签：java, regex, string, split

我正在寻找一个正则表达式来拆分包含 () 的字符串。

这就是我所拥有的

```
String regex = "(?=\\()|()" 
```

第一部分是正确的，因此它以“（”开头。我需要第二部分以“）”结尾，但如果“）”后面有数字，则需要以数字结尾。

例如 Fe2(CH3)2(CH2O)(CH3)

这需要拆分为

Fe2

(CH3)2

(CH2O)

(CH3)

“)”后面的数字可以是一位数，也可以是两位数。

例如，我还需要将 Fe(C5H5)2O4(CH3) 拆分为

铁

(C5H5)2

O4

(CH3)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T20:55:26.687

更新后的新逻辑：匹配一些字母字符或带括号的内容，后跟可选数字。

```
final String f = "Fe2(CH3)2O4(CH2O)2(CH3)";
final Matcher m = Pattern.compile("(\\p{L}+|\\(.*?\\))\\d*").matcher(f);
while (m.find()) System.out.println(m.group()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T21:01:36.860

## 编辑

希望这对你有用:)

```
String s="Fe2(CH3)2(CH2O)(CH3)23O4(CH3)";
String[] array=s.split("(?=\\()|(?<=\\)[0-9]{1,2}+)");
System.out.println(Arrays.toString(array));
//out: [Fe2, (CH3)2, (CH2O), (CH3)23, O4, (CH3)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T20:29:52.220

我不知道 java-regex 特定的东西，但这在.net中对我有用：（未
`(^[A-Za-z0-9]+)|(\([A-Za-z0-9]+\)[A-Za-z0-9]{0,2})`
转义，`\`在需要的地方添加额外的......）

编辑：现在我已经阅读了你正在做的事情。我的正则表达式不适用于 SPLITTING，而是您应该调用`match`它。每场比赛对你来说都是一件。

如果这不能完全满足您的要求，请指定更多输入和所需输出（尤其是此未涵盖的输出），我非常乐意提供帮助...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T21:16:08.830

看起来我找到了适用于所有情况的解决方案：

```
Enter your regex: \(.*?\)[0-9]{0,2}|[\w]+
Enter input string to search: Fe2(CH3)2O4(CH2O)(CH3)
I found the text "Fe2" starting at index 0 and ending at index 3.
I found the text "(CH3)2" starting at index 3 and ending at index 9.
I found the text "O4" starting at index 9 and ending at index 11.
I found the text "(CH2O)" starting at index 11 and ending at index 17.
I found the text "(CH3)" starting at index 17 and ending at index 22. 
```

这是代码中要使用的正则表达式：

```
String regEx = "\\(.*?\\)[0-9]{0,2}|[\\w]+"; 
```

简而言之，它会查找以 '(' 开头并以 ')' 和数字结尾的字符串。如果那不存在，那么它会查找 'Fe2' 、 'O4' 等字符串。

# jquery - 遍历文档以查找数组

> ID：10776976
> 
> 赞同：-1
> 
> 时间：2012-05-27T20:22:08.890
> 
> 标签：jquery, arrays, iteration, each

抱歉，我是新来的，我的代码可能无法正确显示...

我将如何遍历文档以查找带有 .each() 的数组？

我在想这样的事情：

```
//-----START OF CODE----\\
var a = new Array("a0", "a1", "a3");
var b = new Array("b0", "b1", "b3");
var i = 0;

function CountArrays()
{    
    $('Array').each(function(){

        i++;            
    });
    alert("There are " + i + " arrays in this document!");
}

CountArrays();
//-----END OF CODE----\\ 
```

但是 $('Array') 似乎不是要走的路，因为我没有收到警报！

谢谢你的帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T20:28:38.733

不，不。这不起作用。请熟悉 jQuery 库。

```
$('foo'); 
```

该`$()`函数将 CSS 选择器作为参数除外并返回一个 jQuery 对象，您不能只将变量放入其中。你的 Javascripts 和你的 HTML 是两个不同的东西。

如果要在代码中迭代数组，请使用以下命令：

```
var a = ["Hello","World"];
for (var i = 0; i < a.length; i++) {
    alert(a[i]);
} 
```

有很多方法可以遍历数组，请参阅[this](http://ajaxian.com/archives/how-many-ways-can-you-iterate-over-an-array-in-javascript)以获得参考。

第二：如前所述，使用`alert()`调试不是一个好主意，尤其是在循环某些东西时。`console.log('string', variable)`当您使用 Chrome 或 Firefox 时，请改用。它将您的变量直接写入控制台，它还记录完整的对象，而`alert()`.

**评论后更新**：不可能遍历 javascript 中的所有现有数组。那是因为您无法列出所有现有变量。一个问题是，您为每个新功能创建了一个新范围。

函数内部的变量不知道外部的变量。例如，这是一段有效的代码：

```
var a = 5;

function foo() {
    var a = 6;

    return a;
}

console.log(a); // prints "5"
console.log(foo()); // prints "6" 
```

这两个变量都称为`a`，但它们包含不同的数据。有关更多信息，请参阅此答案：[https ://stackoverflow.com/a/2051693/735226](https://stackoverflow.com/a/2051693/735226)

顺便说一句：为什么你甚至想知道你的脚本中有多少个数组？而且由于对象可以包含这样的数组

```
var objWithArray = {
    foo:5,
    bar:[3, 4, 5, 6, 7] // objWithArray.bar would be an array
}; 
```

没有办法获取所有数组。Javascript 是一种无类型且可变的语言。

# linux - 支持颜色的“更多”命令替代方案？

> ID：10776977
> 
> 赞同：8
> 
> 时间：2012-05-27T20:22:22.910
> 
> 标签：linux, shell, command-line, colors, ncurses

这是我在 Linux 中最烦人的 10 件大事。我喜欢终端中的彩色输出：很高兴看到并且在阅读时很有用。

我在新系统上做的第一件事是为两者设置别名`ls`并`grep`显示彩色输出，第二件事是安装`vim`和`htop`.

我同时使用 Gentoo 和 Ubuntu，我发现`emerge`Gentoo 的包管理器具有更高的可读性，而`apt-get/aptitude`不仅仅是因为它使用的颜色输出比后者多得多。

因此，每当我必须使用 管道`emerge`命令时`more`，所有颜色都会丢失，我必须将注意力集中在每一行上以避免错过任何重要的东西。

我可以理解一个基本命令，例如`more`不应该依赖`ncurses`（有人可能会争辩说我们也有`less`，所以两者之一甚至可以是颜色友好的），但是为什么没有一个*著名*的替代方案来`more`支持颜色，有 for`vi/vim`等`top/htop`？

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-27T20:44:45.480

大多数可以输出颜色的命令都可以选择：

*   ON：始终输出颜色
*   OFF：从不输出颜色
*   AUTO：当且仅当输出是终端时显示颜色

许多命令在彩色自动模式下自动运行。对于`emerge`. 这就是为什么在管道输出时没有颜色的原因： pioe 不是终端。

解决方案是告诉`emerge`无条件输出颜色。当然，告诉`less`不要过滤它们。

尝试：

```
emerge --color y | less -R 
```

# ruby-on-rails - 如果调用它的页面/表单是用户关闭的，rails 是否会继续处理控制器方法？

> ID：10776982
> 
> 赞同：1
> 
> 时间：2012-05-27T20:22:38.253
> 
> 标签：ruby-on-rails

（轨道 2.3.5）

我有一个模型，在保存时会创建一个长系列关联记录（延迟 4-8 秒）。如果用户在此延迟期间关闭页面，控制器是否完成运行被调用的方法（'new'，无论如何......）直到完成？

我假设（希望）“是”。我只是想确保并且无法弄清楚如何在谷歌上搜索它。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T20:39:52.643

只要所有处理都在模型中而不是肯定的，也就是说你应该考虑为什么创建记录需要这么长时间，并可能将其卸载到后台处理器，例如 resqueue 、 background-job 或 sidekiq

# c++ - 指向指针和数组的 C / C++ Char 指针

> ID：10776983
> 
> 赞同：3
> 
> 时间：2012-05-27T20:22:43.243
> 
> 标签：c++, c, blackberry-10

有一个带有如下标题的函数：

```
BPS_API int dialog_event_get_filebrowse_filepaths(bps_event_t* event,
                                            char** file_paths[], int* num_paths); 
```

这来自 BlackBerry 10 的 Native SDK，供任何想知道的人使用（可以在[此处](https://bdsc.webapps.blackberry.com/native/reference/com.qnx.doc.bps.lib_ref/com.qnx.doc.bps.lib_ref/topic/dialog_event_get_filebrowse_filepaths.html)找到）。

问题是：我应该提供什么作为第二个论点。此函数应填充 char 指针数组以返回选定的文件路径。

我试着这样称呼它：

```
char* ar[2];
dialog_event_get_filebrowse_filepaths(event, &ar, &number_paths); 
```

我从 QNX Momentics 收到一个错误，如下所示：

```
cannot convert 'char * (*)[2]' to char * * * for argument 2 to int
dialog_event_get_filebrowse_filepaths(bps_event_t *, char * * *, int *) 
```

这似乎是最合乎逻辑的称呼方式。据我了解，它需要指针数组的内存地址才能设置它们。但是，如果我声明：

```
char** ar[2];
dialog_event_get_filebrowse_filepaths(event, ar, &number_paths); 
```

它可以工作，但是这样我创建了一个指向 char 指针的指针数组（一个 char* 数组）。这是我真正应该为该功能提供的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T22:13:56.803

文档确实应该更明确，但我很确定这是函数所期望的：

首先，一些有助于解码函数的经验法则：

*   该类型实际上等同于 a `char***`。这意味着我们必须找到三个指针的含义。
*   C 中的字符串是 a `char*`（`const`为简洁起见，省略了）。正如我们期望该函数填充一个字符串数组一样，这是一个原因`*`。
*   C中的数组通常由指针表示。所以这是第二个`*`。
*   “输出参数”可以通过以下两种方式之一处理：调用者分配内存，并传递一个指针，告诉被调用者在哪里写入数据，或者调用者*不*分配任何内存，只是传递一个指向指针的指针. 然后被调用者将修改“最内层”指针以指向被调用者本身分配的一块内存。第二种方法将占最后`*`. 这也解释了文档说明`The memory holding these values must be freed using bps_free() when no longer needed`——因为内存是由库函数分配的，而不是由你分配的，所以使用正确的`free`函数很重要。

所以，函数应该这样调用：

```
char** strs;
dialog_event_get_filebrowse_filepaths(foo, &strs, bar); 
```

当函数返回时，`strs`将指向由 分配的字符串数组的第一个条目`dialog_event_get_filebrowse_filepaths`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T21:56:18.810

该函数将通过参数返回一个字符串数组和长度，您可以像这样使用它：

```
char **ar=0;
int i,number_paths = 0;
dialog_event_get_filebrowse_filepaths(event, &ar, &number_paths);
for( i=0; i<number_paths; i++ )
  puts( ar[i] ); 
```

并且您可以/必须释放内存（请参阅 lib-docu ），例如：

```
for( i=0; i<number_paths; i++ )
  free( ar[i] );
free( ar ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T20:28:36.340

只是一个猜测，但我怀疑它应该这样称呼：

```
char** ar = 0;
dialog_event_get_filebrowse_filepaths(event, &ar, &number_paths); 
```

使用数组语法声明它的事实令人困惑，但这将是 C 风格函数返回分配的字符串数组的常用方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T20:28:31.830

这是一些应该满足编译器的（非黑莓）代码：

```
char *file_paths[];
iret = dialog_event_get_filebrowse_filepaths (event, &ar, &number_paths); 
```

重点是

1) 不要*在*声明中指定固定长度。

2) 将 addressof (&) 数组指针传递给您的函数

3) 确保*有人*（API 函数或您）分配数组，以及数组中的所有字符串

# c# - 在重载方法中使用泛型类型

> ID：10776985
> 
> 赞同：4
> 
> 时间：2012-05-27T20:23:23.460
> 
> 标签：c#, generics, overloading

我有一个通用方法：

```
public bool DoSomething<T>(T item) where T: IBase
{
    return DoSomethingSpecific(item);
}

public bool DoSomethingSpecific(IBase item)
{
    return true;
}

public bool DoSomethingSpecific(IAdvanced item)
{
    return false;
} 
```

请注意，IAdvanced 接口从 IBase 接口派生/继承。

我发现如果我在项目类型为 IAdvanced 的情况下调用 DoSomething，它仍然总是返回 false。我不明白这一点。我知道，由于 IAdvanced 是 IBase 类型（因为它是该接口的子接口），它可能会导致 DoSomethingSpecific 方法的 2 种重载类型之间的混淆。但是，据我所知，我的 C# 知识有限，这里应该选择 IAdvanced 方法。这是我如何得出这个结论的一个例子：

```
public class Advanced: IAdvanced
{

   public void CallMethod()
   {
      DoSomething(this);
   }
} 
```

这会产生一个真值。

但是，如果我这样做：

```
public class Advanced: IAdvanced
{

    public void CallMethod()
    {
       DoSomethingSpecific(this);
    }
} 
```

它返回 false，这是我所期望的。

我不得不说我以前从未使用过泛型。虽然我尝试过，但总是陷入这样的情况，然后完全看不到使用泛型的意义（除了树和链表等数据结构）。

这次我决定来这里寻求一些建议。我正在尝试做的事情有明显的问题吗？尝试做我在这里忙着做的事情可能没有意义吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T20:27:44.953

我无法重现这一点，这意味着可能正在发生其他事情。我怀疑您实际上*是*想说它总是返回*true*。这就是我在这里看到的：

```
using System;

public interface IBase {}
public interface IAdvanced : IBase {}

public class Base : IBase {}
public class Advanced : IAdvanced {}

class Test
{
    public static bool DoSomething<T>(T item) where T: IBase
    {
        return DoSomethingSpecific(item);
    }

    public static bool DoSomethingSpecific(IBase item)
    {
        return true;
    }

    public static bool DoSomethingSpecific(IAdvanced item)
    {
        return false;
    }

    static void Main()
    {
        Console.WriteLine(DoSomething(new Base()));     // True
        Console.WriteLine(DoSomething(new Advanced())); // True
    }    
} 
```

现在你也写：

> 我知道，由于 IAdvanced 是 IBase 类型（因为它是该接口的子接口），它可能会导致 DoSomethingSpecific 方法的 2 种重载类型之间的混淆。但是，据我所知，我的 C# 知识有限，这里应该选择 IAdvanced 方法。

当然，那么您应该*期望* `false`被退回 - 而我期望`true`被退回。

您会看到，其中的重载分辨率`DoSomething<T>`是在编译该方法时确定的。这种选择是一次性的，而不是对每个不同的人都做出*一次*`T`。因此，如果您在编译后的 IL 中查找`DoSomething<T>`，您*只会*看到对 的调用`DoSomethingSpecific(IBase)`，而*不是* `DoSomethingSpecific(IAdvanced)`。这里没有多态性。

至于如何“解决”这个问题 - 您需要更详细地解释您*真正*想要实现的目标。特别是，如果您有以下代码，您希望发生什么：

```
IBase x = new AdvancedImplementation();
DoSomething(x); 
```

这里`T`是`IBase`，但*值*将引用 的实现`IAdvanced`。如果你想`DoSomethingSpecific(IAdvanced)`在这种情况下被执行，并且如果你使用的是 C# 4，那么你可以使用动态类型：

```
public static bool DoSomething(IBase item)
{
    dynamic dynamicItem = item;
    // Dispatch dynamically based on execution-time type
    return DoSomethingSpecific(dynamicItem);
} 
```

请注意该方法不再需要是通用的 - 它不会带来任何好处。

另一方面，如果您想仅根据 来决定调用哪个，则`T`需要使用类似 ivowiblo 的解决方案。

就我个人而言，我会*尽量*避免这两种解决方案——我通常发现这种事情是可以通过其他方式改进的设计的症状。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T00:18:11.067

我会放弃编译时检查并使其运行时：

```
public bool DoSomething(IBase item)
{
    var itemAdvanced = item as IAdvanced;
    if (itemAdvanced != null)
        return DoSomethingSpecific(itemAdvanced);
    else
        return DoSomethingSpecific(item);
} 
```

原因是，如果你的调用者只是静态地知道对象是一个`IBase`，但在运行时它是一个`IAdvanced`，难道不应该把它当作一个`IAdvanced`？这可能也是做你想做的最快的方法。如果您认为有必要，我只会采用这种`dynamic`方法，例如因为可能有大量不同的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T20:31:42.890

据它所知，它是一个 IBase。编译器需要决定你调用的是哪种方法，这就是为什么它总是选择那个方法。

一个肮脏的技巧将是这样做：

```
public static bool DoSomething<T>(T item) where T: IBase
{
    var isAdvanced = typeof(IAdvanced).IsAssignableFrom(typeof(T));
    return isAdvanced ? DoSomethingSpecific((IAdvanced)item) : DoSomethingSpecific(item);
} 
```

另一种方法是使用 Double-Dispatch/Visitor 模式：

```
public interface IDoSomethingVisitor {
    bool DoSomethingSpecific(IBase base);
    bool DoSomethingSpecific(IAdvanced adv);
} 
```

DoSomething 方法将在您的 IBase 界面中：

```
public interface IBase{
    void DoSomething(IDoSomethingVisitor visitor);
} 
```

在您的实现中：

```
public class Base : IBase
{
   public bool DoSomething(IDoSomethingVisitor visitor)
   {
      visitor.DoSomething(this);
   }
}

public class Advanced : IAdvanced
{
   public bool DoSomething(IDoSomethingVisitor visitor)
   {
      visitor.DoSomething(this);
   }
} 
```

在这种情况下，使用纯继承解决了问题。实际实例是解析调用哪个方法的实例。没有如果。

# xcode - xcode 4.3.2 无法启动

> ID：10776987
> 
> 赞同：1
> 
> 时间：2012-05-27T20:23:45.437
> 
> 标签：xcode, monodevelop

我安装了最新的 Monodevelop (3.0.1) 我可以找到并安装 Monodevelop 但是当我双击一个 xlb 文件时，我看到以下错误：

更新 Objective-C 类型信息时出错。不支持操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T01:28:47.110

这是MonoDevelop 3.0.2 中修复[的错误](https://bugzilla.xamarin.com/show_bug.cgi?id=5167)，请更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:35:50.930

3.0.2 安装后似乎也有同样的问题，但在 MonoDevelop 和 XCode 重新启动后问题似乎消失了。

# php - 变量双输出

> ID：10776990
> 
> 赞同：0
> 
> 时间：2012-05-27T20:24:08.140
> 
> 标签：php, dump, var-dump

我有下一个功能：

```
function checkLoggedIn($status, $redirect=TRUE){
    switch($status){
        case "yes":
            if(!isset($_SESSION["loggedIn"])){
                if($redirect) {
                    header("Location: login.php");
                    exit;
                } else {
                    $authenticated = false;
                }
            } else {
                checkLoggedIn("no");
            }
        break;

        case "no":
            if(isset($_SESSION["loggedIn"]) && $_SESSION["loggedIn"] === true ){
                $authenticated = true;
            }
        break;
    }
    var_dump($authenticated);
    return $authenticated;
} 
```

奇怪的是，当我启用时`var_dump($authenticated);`，如果`true`：

```
bool(true)
NULL 
```

并且只是

```
bool(false) 
```

如果`false`

任何想法为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T20:26:38.523

那是因为你在`checkLoggedIn()`内部调用。

# php - 如何为动态生成的子 div 附加事件处理程序？

> ID：10776995
> 
> 赞同：0
> 
> 时间：2012-05-27T20:24:33.087
> 
> 标签：php, jquery, dynamic

我有一个包含 2 个 Div 容器（ Left 和 Right ）的页面。PartsList 页面有 5 个动态生成的 DIVS。自定义页面有 5 个动态生成的 DIVS。id 为“layout”的 div 没有被 jQuery .on() 识别。请帮忙。谢谢你的时间:)。

```
<script type="text/javascript" src="js/jquery.js">
</script>

<script type="text/javascript">

$(function() {

    $(".left").load("PartsList.php",function() {alert("success");});

    $(".right").load("Custom.php", function() {alert("success");});

        $("#layout").children().on({click: function() {
            alert($(this).attr('id'));

          }
 });    

});
</script>

<body>
<div class="main">

<div class="left">
//Load Left page.

</div>
<div class="right">

//Load Structure page.
</div>

</div>
</body>

</html> 
```

零件清单

```
<?php

for ($x = 1; $x < 6; $x++)
{

   $divs = <<<here
   <div id = 'div$x' class = 'list'><strong>Div: $x</strong></div>
   here;
   echo $divs;
 }

?> 
```

风俗

```
<?php

echo '<div id="layout">';

for ($y = 0; $y < 5; $y++)
{
        echo "<div id='x$y' style='
        position: absolute;
        width: 200px;
        height: 100px;
        top: ".(100 * $y)."px;
        border: 2px solid blue;
        cursor: pointer;
        '></div>";
}

echo '</div>';

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T20:35:45.733

在 jquery 1.7+ 中[使用](http://api.jquery.com/on/)like

```
$(document).on('click','dynamicElement',function(e){

 //handler code here
}); 
```

在早期版本中使用[`delegate`](http://api.jquery.com/delegate/)

```
$(document).delegate('dynamicElement','click',function(e){

 //handler code here
}); 
```

您可以用`document`动态生成的元素的父元素替换

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T00:11:40.293

来自 Jquery 在线手册：

.load( url [, data] [, complete(responseText, textStatus, XMLHttpRequest)] )

url：包含请求发送到的 URL 的字符串。

数据：随请求发送到服务器的映射或字符串。

**complete(responseText, textStatus, XMLHttpRequest) 请求完成时执行的回调函数。**

您可能需要将 .on 函数作为 Custom.php 页面的 .load 回调。

像这样的例子：

```
$(function() {

    $(".left").load("PartsList.php",function() {alert("success");});

    $(".right").load("Custom.php", function() {alert("success");

        $("#layout").children().on({click: function() {
            alert($(this).attr('id'));

          }
 });
 });    

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T20:35:26.263

我认为您的 .on() 函数语法错误，它应该类似于：

```
$('document').on('click', '#layout > div', function() {
    alert($(this).attr('id'));
}); 
```

您绑定到文档，当用户单击布局中的子 div 时，事件会“冒泡”DOM 到它被捕获的文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T00:43:56.643

好的。无论如何我找到了答案。对于那些在想为什么它不起作用的人。这是因为愚蠢的报价。

$("document") 应该是 $(document) 因为 document 不是标签 <。

多田就是这样。

叹。

感谢大家的帮助：）

# cocoa - PNG到NSImage并返回导致接近透明度的锯齿

> ID：10776997
> 
> 赞同：2
> 
> 时间：2012-05-27T20:24:56.057
> 
> 标签：cocoa, opengl, png, nsimage

我正在从 Cocoa 应用程序中调整一些 PNG 文件的大小。这些文件最终被另一个应用程序加载为 OpenGL 纹理，并应用了一个编写不佳的着色器，它在某一时刻执行以下操作：

```
texColor = mix(constant,vec4(texColor.rgb/texColor.a,texColor.a),texColor.a); 
```

除以 alpha 是一个坏主意，解决方案是确保该步骤中 texColor 的 RGB 分量永远不会超过 1。**但是！**出于好奇：

原始 PNG（在 GIMP 中创建）令人惊讶地工作正常，使用 GIMP 创建的调整大小的版本也工作正常。但是，使用下面的代码调整文件大小会导致纹理在任何透明像素附近出现锯齿，即使`percent`是`1.0`. 知道我在不知不觉中改变了这些突然导致着色器错误出现的图像是什么吗？

```
NSImage* originalImage = [[NSImage alloc] initWithData:[currentFile regularFileContents]];
NSSize newSize = NSMakeSize([originalImage size].width * percent, [originalImage size].height * percent);
NSImage* resizedImage = [[NSImage alloc] initWithSize:newSize];
[resizedImage lockFocus];
[originalImage drawInRect:NSMakeRect(0,0,newSize.width,newSize.height)
                 fromRect:NSMakeRect(0,0,[originalImage size].width, [originalImage size].height)
                operation:NSCompositeCopy fraction:1.0];
[resizedImage unlockFocus];

NSBitmapImageRep* bits = [[[NSBitmapImageRep alloc] initWithCGImage:[resizedImage CGImageForProposedRect:nil context:nil hints:nil]] autorelease];
NSData* data = [bits representationUsingType:NSPNGFileType properties:nil];
NSFileWrapper* newFile = [[[NSFileWrapper alloc] initRegularFileWithContents:data] autorelease];

[newFile setPreferredFilename:currentFilename];
[folder removeFileWrapper:currentFile];
[folder addFileWrapper:newFile];

[originalImage release];
[resizedImage release]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:42:48.230

您的源 PNG 的 DPI 是多少？您正在通过假设原始图像`size`以像素为单位，但`size`以*点*为单位来创建第二张图像。

假设您有一个 450 x 100 像素的图像，DPI 为 300。该图像在现实世界的单位中是 1 1/2 英寸 x 1/3 英寸。

现在，Cocoa 中的点名义上是 1/72 英寸。以点为单位的图像大小为 108 x 24。

如果您随后根据该尺寸创建新图像，则没有指定 DPI，因此假设是每点一个像素。您正在创建一个小得多的图像，这意味着必须更粗略地近似精细特征。

如果您选择原始图像的图像代表之一并使用它的`pixelsWide`和`pixelsHigh`值，您将会有更好的运气。但是，当您这样做时，新图像将具有与原始图像不同的真实世界大小。在我的示例中，原件为 1 1/2 x 1/3 英寸。新图像将具有相同的像素尺寸 (450 x 100)，但分辨率为 72 dpi，因此为 6.25 x 1.39 英寸。要解决此问题，您需要将`size`新位图代表的点数设置`size`为原始点数的点数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T20:35:05.137

在进行此类调整大小操作时，我通常将图像插值设置为高。这可能是你的问题。

```
[resizedImage lockFocus];
[NSGraphicsContext saveGraphicsState];
[[NSGraphicsContext currentContext] setImageInterpolation:NSImageInterpolationHigh];
[originalImage drawInRect:...]
[NSGraphicsContext restoreGraphicsState];
[resizedImage unlockFocus]; 
```

* * *

确保您正在做的另一件事，尽管它可能无济于事（见下文）：

```
[[NSGraphicsContext currentContext] setShouldAntialias:YES]; 
```

这可能无法解决它，因为您无法在不知道目标背景的情况下消除锯齿。但它仍然可能有所帮助。如果这是问题所在（您不能很快消除锯齿），您可能必须在准备好绘制最终图像时合成此调整大小。

# html - 默认画布尺寸

> ID：10776999
> 
> 赞同：1
> 
> 时间：2012-05-27T20:25:07.353
> 
> 标签：html, canvas, html5-canvas

谁能告诉我为什么默认的画布尺寸是 300 x 150 像素？：

[http://jsfiddle.net/VqNAV/](http://jsfiddle.net/VqNAV/)

为什么我的 50 x 50 正方形 ( [http://jsfiddle.net/VqNAV/1/](http://jsfiddle.net/VqNAV/1/) ) 在我更改画布大小时会被拉伸：http: [//jsfiddle.net/VqNAV/2/](http://jsfiddle.net/VqNAV/2/)

提前致谢！

编辑：我在这里找到了答案：[https ://www.w3.org/Bugs/Public/show_bug.cgi?id=13818#comments](https://www.w3.org/Bugs/Public/show_bug.cgi?id=13818#comments)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T20:28:58.120

对于画布，如果您不希望上下文被拉伸，则必须修改 HTML 属性。[http://jsfiddle.net/VqNAV/3/](http://jsfiddle.net/VqNAV/3/)

编辑：我认为更好的问题是为什么它是内联的？[HTML 5 草案](http://www.w3.org/TR/html5-author/the-canvas-element.html#the-canvas-element)中没有任何内容指定它应该是这样的。这是浏览器创建者的决定。画布充当图像，因此被视为也是内联且具有宽度和高度的图像。