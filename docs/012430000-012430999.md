# StackOverflow 问答 12430000-12430999

# frameworks - unity3d 的最佳 2D 框架

> ID：12430001
> 
> 赞同：0
> 
> 时间：2012-09-14T18:27:27.703
> 
> 标签：frameworks, 2d, unity3d

我想使用 Unity3d（iPhone 和 Android）为移动设备开发一些 2D 游戏，并意识到这是 Assets Store 上的几个 2D 框架，包括一些付费的（如 Uni2D）那么，你们推荐我这些 2D 框架中的哪一个？提前感谢=]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:59:47.330

2D Toolkit 是我认为最好的。它非常易于使用和学习。它支持 colliders 以及 2d GameObjects(Sprites) Sprite Animation 的自定义 colliders(polygon colliders) 使用它非常容易。文档非常好，支持也很好。试试 2D Toolkit，我想你不会失望的。观看一些关于它的 youtube 视频。您将获得更好的想法（或更好地阅读有关它的文档）

（游戏开发中使用的源代码 2D 工具包）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:36:51.643

[在这里](http://answers.unity3d.com/questions/222386/which-framework-for-2d-game.html)查看一些好的建议。

祝您游戏愉快。

# asp.net - 在 MVC 4.0 的局部视图中使用部分

> ID：12430005
> 
> 赞同：6
> 
> 时间：2012-09-14T18:27:37.580
> 
> 标签：asp.net, .net, asp.net-mvc, razor, asp.net-mvc-4

当我需要在特定元素上初始化 jQuery ui 时，我想在我的部分视图中包含脚本。它确实属于部分而不是包含页面或布局。

据说在 MVC 4 中有一种方法可以做到这一点，但我似乎找不到任何关于它的信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-25T11:56:25.723

我也有类似的问题。希望这可以帮助。我们希望有一个视图，其中包含一个显示一些数据的通用标题部分和另一个在我们单击页面中的链接时应该动态更改的部分。（类似于选项卡）由于我们不想多次重新加载标题部分，我们决定有一个容器视图和一个占位符 div，当我们单击 ajax 链接时，它将用于动态加载部分视图. 但是，加载到占位符中的局部视图有很多 javascript 代码，我们无法将不同局部视图使用的所有代码包含到单个 javascript 文件中并从容器视图中引用它，因为存在一些冲突的函数. 引入命名空间来解决这个问题也不是 这是一种非常有效的方法，因为所有 javascript 逻辑仍然会被不必要地加载。做一些谷歌搜索让我意识到在局部视图中拥有一个脚本部分是行不通的。我尝试使用 @RenderSection("partialScripts", required: false) 在我的视图中定义一个部分，但没有成功，因为 RenderSection 仅适用于布局视图。以下是我为克服这个问题而采取的方法。在布局视图中定义的脚本部分可以包含任何有效的标记。所以我决定有一个 div 来帮助我在容器视图的脚本部分中动态加载脚本。操作链接的 OnSuccess 事件处理程序用于动态附加脚本。这是我的容器视图的代码。做一些谷歌搜索让我意识到在局部视图中拥有一个脚本部分是行不通的。我尝试使用 @RenderSection("partialScripts", required: false) 在我的视图中定义一个部分，但没有成功，因为 RenderSection 仅适用于布局视图。以下是我为克服这个问题而采取的方法。在布局视图中定义的脚本部分可以包含任何有效的标记。所以我决定有一个 div 来帮助我在容器视图的脚本部分中动态加载脚本。操作链接的 OnSuccess 事件处理程序用于动态附加脚本。这是我的容器视图的代码。做一些谷歌搜索让我意识到在局部视图中拥有一个脚本部分是行不通的。我尝试使用 @RenderSection("partialScripts", required: false) 在我的视图中定义一个部分，但没有成功，因为 RenderSection 仅适用于布局视图。以下是我为克服这个问题而采取的方法。在布局视图中定义的脚本部分可以包含任何有效的标记。所以我决定有一个 div 来帮助我在容器视图的脚本部分中动态加载脚本。操作链接的 OnSuccess 事件处理程序用于动态附加脚本。这是我的容器视图的代码。false) 不成功，因为 RenderSection 仅适用于布局视图。以下是我为克服这个问题而采取的方法。在布局视图中定义的脚本部分可以包含任何有效的标记。所以我决定有一个 div 来帮助我在容器视图的脚本部分中动态加载脚本。操作链接的 OnSuccess 事件处理程序用于动态附加脚本。这是我的容器视图的代码。false) 不成功，因为 RenderSection 仅适用于布局视图。以下是我为克服这个问题而采取的方法。在布局视图中定义的脚本部分可以包含任何有效的标记。所以我决定有一个 div 来帮助我在容器视图的脚本部分中动态加载脚本。操作链接的 OnSuccess 事件处理程序用于动态附加脚本。这是我的容器视图的代码。

```
<ul>
    <li>
        @Ajax.ActionLink("Partial One", "PartialOne", ajaxOptions: new AjaxOptions
                     {
                         HttpMethod = "Get",
                         InsertionMode = InsertionMode.Replace,
                         UpdateTargetId = "container",
                         OnSuccess = "loadScriptsDynamically('PartialOne')"
                     })
    </li>
    <li>
        @Ajax.ActionLink("Partial Two", "PartialTwo", ajaxOptions: new AjaxOptions
                     {
                         HttpMethod = "Get",
                         InsertionMode = InsertionMode.Replace,
                         UpdateTargetId = "container",
                         OnSuccess = "loadScriptsDynamically('PartialTwo')"
                     })
    </li>
</ul>

<div id="container">
</div>

@section scripts
{
    <script src="@Url.Content("~/Scripts/app/Container.js")"></script>
    <div id="dynamicScripts"
         data-partial-one="@Url.Content("~/Scripts/App/PartialOne.js")"
         data-partial-two="@Url.Content("~/Scripts/App/PartialTwo.js")">
    </div>
} 
```

控制器类的代码

```
 public PartialViewResult PartialOne()
    {
        return PartialView("_PartialOne");
    }

    public PartialViewResult PartialTwo()
    {
        return PartialView("_PartialTwo");
    } 
```

Container.js 文件包含为不同的局部视图动态加载必要脚本的逻辑。

```
function loadScriptsDynamically(name) {
    var script = document.createElement('script');
    var dynamicScriptsDiv = document.getElementById('dynamicScripts');
    var dynamicScriptDivJQuery = $('#dynamicScripts');
    dynamicScriptDivJQuery.empty();
    if (name === 'PartialOne') {
        script.src = dynamicScriptDivJQuery.data('partial-one');
        dynamicScriptsDiv.appendChild(script);
    } else if (name === 'PartialTwo'){
        script.src = dynamicScriptDivJQuery.data('partial-two');
        dynamicScriptsDiv.appendChild(script);
    }
} 
```

由于某些限制，我们不能使用 jQuery 将脚本元素附加到 div。但是我们可以使用一些老式的 javascript 代码来创建一个脚本元素并将其附加到 dynamicScriptsDiv。请注意，当我们的 MVC 应用程序在 IIS 服务器中运行时，我正在使用一些数据属性访问我之前附加到 dynamicScriptsDivusing 的脚本路径，并且我们不想对它们进行硬编码。

在脚本动态加载后附加到事件是我们的下一个挑战。通过使用立即调用函数，我能够注册我的所有事件绑定代码和我必须使用以下代码执行的任何初始化逻辑。

```
(function initPartialOne() {
    $('#myButton').click(function() {
        setLabelText();
    });
})();

function setLabelText() {
    $('#myLabel').text('One was clicked');
} 
```

最后是我的部分观点之一的代码。

```
<label id="myLabel">[Message]</label>
<input type="button" id="myButton" value="Click me partial one"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:06:16.640

**这在 ASP.NET MVC 3**中是不可能的（[请参阅本文中的第二条评论](https://stackoverflow.com/questions/7299384/rendering-section-from-partial-view-using-razor-view-engine-in-mvc-3)）。部分只能用于（主）视图，不能用于部分视图。

根据 MVC 版本 4，我目前无法找到任何资源，但 Visual Studio 中的简短测试对于 MVC 4 也失败，除非您在该部分内呈现整个部分视图。

尽管如此，我不建议这样做。例如，我过去一直在使用甜甜圈缓存部分视图遇到缓存问题。缓存部分视图会导致代码未执行，并导致未呈现必要的 JavaScript 代码。因此，我建议将部分视图所需的所有内容放在部分视图本身中，或者（甚至更好）考虑一个清晰的设计并将所有 javascript 代码放在一个缩小的 javascript 文件中，该文件为整个页面加载一次（然后被缓存在浏览器的缓存中）。

# jruby - 在 Weblogic 11g 中部署在打包的 war 文件中的 Rails 应用程序失败

> ID：12430009
> 
> 赞同：1
> 
> 时间：2012-09-14T18:27:45.427
> 
> 标签：jruby, jrubyonrails, weblogic11g, warbler

我有一个 Rails 3 应用程序，它使用 Warbler 打包到一个 war 文件中并部署到 Weblogic 11g。我正在通过控制台 Web 应用程序部署战争。当我尝试访问应用程序时失败，在下面生成堆栈跟踪。但是，如果我将应用程序解包部署（提取失败的相同 war 文件），它会完美运行。

**环境：**

*   Ubuntu 12.04
*   JDK (1.7.0_06-b24)
*   Weblogic 11g (10.3.6)
*   导轨 (3.2.8)
*   莺 (1.3.6)
*   jruby (1.6.7.2)

[堆栈跟踪和 warble.rb 的要点](https://gist.github.com/c3a9a51452a759748fcf)

**堆栈跟踪**

```
<Sep 14, 2012 12:55:25 PM CDT> <Error> <ServletContext-/ruby-px> <BEA-000000> <ERROR: application error
org.jruby.rack.RackInitializationException: can't dup NilClass
    from classpath:/META-INF/jruby.home/lib/ruby/1.9/pathname.rb:215:in `initialize'
    from classpath:/jruby/rack/rails/railtie.rb:16:in `Railtie'
    from org/jruby/RubyProc.java:258:in `call'
    from /home/scott/wls_domains/PartnersXpress/servers/myserver/tmp/_WL_user/ruby-px/iikl7j/war/WEB-INF/gems/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:34:in `execute_hook'
    from /home/scott/wls_domains/PartnersXpress/servers/myserver/tmp/_WL_user/ruby-px/iikl7j/war/WEB-INF/gems/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:43:in `run_load_hooks'
    from org/jruby/RubyArray.java:1615:in `each'
    from /home/scott/wls_domains/PartnersXpress/servers/myserver/tmp/_WL_user/ruby-px/iikl7j/war/WEB-INF/gems/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
    from /home/scott/wls_domains/PartnersXpress/servers/myserver/tmp/_WL_user/ruby-px/iikl7j/war/WEB-INF/gems/gems/railties-3.2.8/lib/rails/application.rb:67:in `inherited'
    from /home/scott/wls_domains/PartnersXpress/servers/myserver/tmp/_WL_user/ruby-px/iikl7j/war/WEB-INF/config/application.rb:13:in `RubyPx'
    from /home/scott/wls_domains/PartnersXpress/servers/myserver/tmp/_WL_user/ruby-px/iikl7j/war/WEB-INF/config/application.rb:12:in `(root)'
    from org/jruby/RubyKernel.java:1042:in `require'
    from /home/scott/wls_domains/PartnersXpress/servers/myserver/tmp/_WL_user/ruby-px/iikl7j/war/WEB-INF/config/application.rb:2:in `(root)'
    from org/jruby/RubyKernel.java:1042:in `require'
    from /home/scott/wls_domains/PartnersXpress/servers/myserver/tmp/_WL_user/ruby-px/iikl7j/war/WEB-INF/config/environment.rb:23:in `load_environment'
    from classpath:/jruby/rack/rails_booter.rb:65:in `load_environment'
    from <script>:1:in `(root)'

    at org.jruby.rack.DefaultRackApplicationFactory$4.init(DefaultRackApplicationFactory.java:231)
    at org.jruby.rack.DefaultRackApplicationFactory.getApplication(DefaultRackApplicationFactory.java:58)
    at org.jruby.rack.PoolingRackApplicationFactory.createApplication(PoolingRackApplicationFactory.java:323)
    at org.jruby.rack.PoolingRackApplicationFactory.getApplication(PoolingRackApplicationFactory.java:171)
    at org.jruby.rack.DefaultRackDispatcher.getApplication(DefaultRackDispatcher.java:27)
    Truncated. see log file for complete stacktrace
Caused By: org.jruby.exceptions.RaiseException: (TypeError) can't dup NilClass
    at org.jruby.RubyKernel.dup(org/jruby/RubyKernel.java:1911)
    at Pathname.initialize(classpath:/META-INF/jruby.home/lib/ruby/1.9/pathname.rb:215)
    at (Anonymous).Railtie(classpath:/jruby/rack/rails/railtie.rb:16)
    at org.jruby.RubyProc.call(org/jruby/RubyProc.java:258)
    at (Anonymous).execute_hook(/home/scott/wls_domains/PartnersXpress/servers/myserver/tmp/_WL_user/ruby-px/iikl7j/war/WEB-INF/gems/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:34)
    Truncated. see log file for complete stacktrace
> 
<Sep 14, 2012 12:55:30 PM CDT> <Error> <ServletContext-/ruby-px> <BEA-000000> <ERROR: couldn't handle error
org.jruby.exceptions.RaiseException: (TypeError) can't convert nil into String
    at org.jruby.RubyFile.join(org/jruby/RubyFile.java:1496)
    at org.jruby.RubyFile.join(org/jruby/RubyFile.java:1518)
    at File._call(/home/scott/wls_domains/PartnersXpress/servers/myserver/tmp/_WL_user/ruby-px/iikl7j/war/WEB-INF/gems/gems/rack-1.4.1/lib/rack/file.rb:55)
    at File.call(/home/scott/wls_domains/PartnersXpress/servers/myserver/tmp/_WL_user/ruby-px/iikl7j/war/WEB-INF/gems/gems/rack-1.4.1/lib/rack/file.rb:30)
    at Errors.response_content(classpath:/jruby/rack/errors.rb:37)
    Truncated. see log file for complete stacktrace 
```

**编辑：**添加了 JDK 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:09:48.200

解决方案比我想象的要容易。上述症状是由于 Weblogic 默认不支持打包的战争文件的 ServletContext.getRealPath() 导致的。但是，这可以通过提供已`show-archived-real-path-enabled`设置为的 WEB-INF/weblogic.xml 来启用`true`

例子：

```
<weblogic-web-app xmlns="http://www.bea.com/ns/weblogic/weblogic-web-app">   
   <container-descriptor>     
       <show-archived-real-path-enabled>true</show-archived-real-path-enabled>   
   </container-descriptor> 
</weblogic-web-app> 
```

# php - 条件搜索结果语句

> ID：12430010
> 
> 赞同：0
> 
> 时间：2012-09-14T18:27:45.993
> 
> 标签：php, wordpress

我正在创建一个自定义 search.php，并想知道如何根据搜索结果的数量返回不同的语句。我想为三种情况中的每一种情况提供不同的陈述：

1.  没有结果返回
2.  返回一个结果
3.  返回多个结果

因此，在第一个示例中，页面将返回 No results where returned。在第二个中：您对 X 的搜索返回了一个结果。在第三个中：您对 X 的搜索返回了 Y 结果。

好的，希望能解释我想要做什么。所以这是我到目前为止的代码：

```
<?php
global $wp_query;
$total_results = $wp_query->found_posts;
?>
Your search for <span class="style"><?php echo get_search_query(); ?></span> returned <span class="style"><?php echo $total_results; ?></span> results. 
```

所以我可以打印出第三个选项，是否有一些条件可以与这个或任何其他代码一起使用来创建我上面提到的不同语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:32:34.297

假设这`$total_results`是您的计数；

```
if($total_results==1){
    echo 'message one';
    ?> or jump out of PHP and back in <?PHP
}elseif($total_results>1){
    echo 'message multiple';
}else{
    echo 'no results (or error if you did not trap seperately)';
} 
```

我错过了什么吗？也可以看看`switch()`构造。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T18:32:35.917

如果我理解正确，一个简单的 If/Else 块应该处理它：

```
if($total_results>1)
    echo 'more than one';
elseif($total_results==1)
    echo '1';
else
    echo '0'; 
```

# c - 多客户端UDP聊天

> ID：12430011
> 
> 赞同：1
> 
> 时间：2012-09-14T18:27:47.913
> 
> 标签：c, linux, sockets, network-programming, udp

我有以下代码...

客户代码

```
#include<stdio.h>
#include<string.h>
//#include<sys/stat.h>
#include<sys/types.h>
#include<sys/socket.h>
#include<netinet/in.h>
#include<arpa/inet.h>
main()
{   
        struct sockaddr_in client,server;
    int s,n;
        char b1[100],b2[100];
        s=socket(AF_INET,SOCK_DGRAM,0);
        server.sin_family=AF_INET;
        server.sin_port=2000;
        server.sin_addr.s_addr=inet_addr("127.0.0.1");
        printf("\nClient ready....\n");
        n=sizeof(server);
        while(1)
        {
            printf("\nClient:");
            gets(b2);
            sendto(s,b2,sizeof(b2),0,(struct sockaddr *)&server,n);
            if(strcmp(b2,"end")==0)
                break;
            recvfrom(s,b1,sizeof(b1),0,NULL,NULL);
            printf("\nServer:%s",b1);
        }

} 
```

服务器代码......

```
#include<stdio.h>
#include<string.h>
//#include<sys/stat.h>
#include<sys/types.h>
#include<sys/socket.h>
#include<netinet/in.h>
#include<arpa/inet.h>
main()
{
    struct sockaddr_in cliaddr,myaddr;
    int servsock,clisock;
    char b1[100],b2[100];
    servsock=socket(AF_INET,SOCK_DGRAM,0);
    myaddr.sin_family=AF_INET;
myaddr.sin_port=2000;
myaddr.sin_addr.s_addr=inet_addr("127.0.0.1");
bind(servsock,(struct sockaddr *)&myaddr,sizeof(myaddr));
printf("\nServer ready,waiting for client....\n");
clisock=sizeof(cliaddr);
while(1)
{
    recvfrom(servsock,b1,sizeof(b1),0,(struct sockaddr *) &cliaddr,&clisock);
    if(!(strcmp(b1,"end")))
        break;
    printf("\nCliaddr:%s",b1);
    printf("\nmyaddr:");
    gets(b2);
    sendto(servsock,b2,sizeof(b2),0,(struct sockaddr *) &cliaddr,clisock);

}
} 
```

这些代码用于单个客户端 UDP 聊天..我需要进行哪些更改才能使其成为多客户端 UDP 聊天..我希望多个客户端向服务器发送消息..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T11:55:34.547

或者，您可以使用诸如 select 之类的 api（它监视许多套接字描述符并返回数据可用的那个）并创建一个并发服务器。

[带有选择的并发服务器](http://forum.codecall.net/topic/64205-concurrent-tcp-server-using-select-api-in-linux-c/)

上面的例子虽然是用tcp写的，但是可以剪裁成使用udp的。

其他选项可能包括在 Linux 2.6 上使用 poll、epoll 或与 fork 分离的线程。

分叉创建一个单独的新进程。这在处理许多客户端时可能是不可行的，例如一个 Web 服务器处理数以万计的请求。现在它不能为每个客户端创建那么多线程或进程。另外，在收到请求时这样做是有代价的。

一个实用的解决方案是混合使用这两种方法，即创建一组由工作进程或线程池监控的套接字描述符。一旦它们中的任何一个是免费的，它们就会立即获取工作描述符。

[C10k](http://www.kegel.com/c10k.html)描述了编写高性能服务器应用程序的许多可能策略，并各有优缺点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:30:46.190

您将需要使用 fork() 创建并发服务器。希望这个链接有帮助。 [http://www.cems.uwe.ac.uk/~ngunton/worksheets/npws3.pdf](http://www.cems.uwe.ac.uk/~ngunton/worksheets/npws3.pdf)

# xml - 命名空间如何影响 DOM 树的构建？

> ID：12430012
> 
> 赞同：0
> 
> 时间：2012-09-14T18:27:50.097
> 
> 标签：xml, html, dom, xml-parsing

据我所知，XML 支持命名空间来解决不同规范中元素名称之间的冲突。

问题 1：HMTL 是否支持命名空间？

问题2：从树结构上看，namespace 是如何影响 DOM 树的构建的？

一个简单的例子是最好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:56:39.760

以下适用于 HTML5 解析。它不一定适用于遗留的独立 HTML 解析器。

> 问题 1：HTML 是否支持命名空间？

在 text/html 语法中，您无法控制。解析器将元素添加到 DOM 时，根据它们的名称和祖先元素将元素放置在不同的命名空间中。

您可以使用 document.createElementNS 控制通过 javascript 添加的新元素的命名空间。

命名空间可以在 application/xhtml+xml 语法中使用，但是没有新的符合 HTML5 的元素可用，而不是 text/html 语法中不可用的元素。

> 问题 2：namespace 如何影响 DOM 树的构建？一个简单的例子是最好的。

在 text/html 语法中

```
<div>
  <svg>
    <script ...></script>
  </svg>
  <script ...></script>
</div> 
```

该`div`元素是已知的 HTML 元素，因此被放置在`http://www.w3.org/1999/xhtml`命名空间中。

该`svg`元素是已知的 SVG 元素，因此被放置在`http://www.w3.org/2000/svg`命名空间中。

第一个`script`元素在`svg`元素内部，所以它被放置在`http://www.w3.org/2000/svg`命名空间中。

第二个`script`元素不在任何特殊元素内，因此它被放置在 `http://www.w3.org/1999/xhtml`命名空间中

解析为 SVG 或 MathML 命名空间中的元素的标签可以以 XML 的方式对所有此类元素使用自闭合语法。自闭合语法对形成 HTML 命名空间元素的标签没有影响。使用`/>`to 结束*void* HTML 元素的标签是允许的，但与使用 to 结束标签没有区别`>`。

# javascript - 将数据从 javascript 文件导入到 VB.Net 页面

> ID：12430014
> 
> 赞同：1
> 
> 时间：2012-09-14T18:27:58.363
> 
> 标签：javascript, asp.net, vb.net, json

任何有关如何解决以下问题的信息将不胜感激

我正在尝试使用 JSON 将数据从 javascript 文件传输到 VB.Net 应用程序。

javascript文件中的代码如下：

```
function TalkToServer() {

    var formData = "{'firstname':'fname','lastname':'dgln'}"

        $.ajax({
            type: "POST",
            url: "dataserver.aspx/Save",
            data: "{'firstname':'fname','lastname':'dgln'}",
            contentType: "application/json;charset=utf-8",
            dataType: "json",
            success: function (msg) {
                alert('Hello');
            },
            error: function () { alert(arguments[2]); }
        });

} 
```

VB.Net代码如下：

```
Imports System.Collections.Generic
Imports System.Linq
Imports System.Web
Imports System.Web.Services
Imports System.Web.Script.Serialization
Imports System.Web.Script.Services

Imports System.Web.UI
Imports System.Web.UI.WebControls

Public Class dataserver

Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

End Sub

<WebMethod()> _
<ScriptMethod(ResponseFormat:=ResponseFormat.Json, UseHttpGet:=False)> _
Public Function Save(ByVal formData As williedata) As returnMessages
    'Public Function Save(ByVal name As String) As returnMessages

    Dim a As String = formData.firstname
    Dim b As String = formData.lastname

    Dim mes As returnMessages
    mes.returnParameters = "KLJN"
    mes.recAction = "JKHJH"

    Return mes

End Function

End Class 
```

数据结构的定义如下：

```
Imports Microsoft.VisualBasic

Public Class williedata

Public lastname As String
Public firstname As String

End Class 
```

但是 - 似乎从未达到 VB.Net 功能。以下错误不断出现：

内部服务器错误

我知道我做错了什么，但不知道是什么。

WCV

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:38:44.970

~~删除，`""`以便将文字对象传递给 JQuery: `data: {'firstname':'fname','lastname':'dgln'}`。~~

~~由于您将其设置`contentType`为 JSON，JQuery 应该从对象文字中正确解析它。由于您当前传递的字符串不是有效的 JSON，因此无法正确编码。~~

**编辑**

正如另一个答案表明我弄错了，`data`参数需要采用所指示的格式，`contentType`因此在这种情况下是有效的 JSON：

`data: '{"firstname":"fname","lastname":"dgln"}'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:41:28.530

您的 data 参数需要与方法签名更匹配：

```
data: '{"formData":{"firstname":"fname", "lastname":"dgln"}}' 
```

您可以[使用 JSON.stringify 来简化该过程](http://encosia.com/using-complex-types-to-make-calling-services-less-complex/)。

# c++ - 定点贝塞尔绘图例程（如何重写）

> ID：12430016
> 
> 赞同：0
> 
> 时间：2012-09-14T18:28:14.550
> 
> 标签：c++, c, optimization

我有一些原始版本的贝塞尔曲线绘制程序，在这里

```
void DrawBezier(float ax, float ay,
            float bx, float by,
            float cx, float cy,
            float dx, float dy, unsigned color)
{
    float step = 1.0/1000.0;

    for(float t=0; t<=1; t+=step)
    {
    float u = 1.0-t;

    float a =     u*u*u;
    float b = 3.0*u*u*t;
    float c = 3.0*u*t*t;
    float d =     t*t*t;

    float x = ax*a + bx*b + cx*c + dx*d;
    float y = ay*a + by*b + cy*c + dy*d;

    SetPixel(int(x),int(y), color);

    }

} 
```

这是非常慢的，因为 float->int 转换速度很慢，至少在我的旧 pentium 4 上是这样（这种转换实际上消耗了 90% 的时间，3k beziers/s 而当 setpixel 被注释时为 30k beziers/s）。

所以我有一个想法将它重写为定点算法，但我对此并没有太多经验 - 如何将它重写为定点？（注意 t 在 0.0 到 1.0 的范围内）

编辑：问题的第二部分：如何以像素为单位估计贝塞尔曲线的长度（需要绘制像素）？不知道

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T22:47:46.683

除了使用定点之外，您还可以计算方程的前向差分，因此每一步都是一系列加法而不是乘法。这通常更快。

[Dobbs 博士](http://www.drdobbs.com/forward-difference-calculation-of-bezier/184403417)的合理解释；更短的解释和代码[在这里](http://www.niksula.hut.fi/~hkankaan/Homepages/bezierfast.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T21:06:17.307

Allrite 我已经这样做了

```
 void DrawBezierFX( int ax, int ay,
               int bx, int by,
               int cx, int cy,
               int dx, int dy, unsigned color)
    {

    for(unsigned i=0; i<=1024; i+=1)
    {
     unsigned t = i<<5;

     unsigned u = (1024-i)<<5;

     unsigned a = ((((u*u)>>15)*u)>>15);
     unsigned b = ((((t*u)>>15)*u)>>15)*3;
     unsigned c = ((((t*t)>>15)*u)>>15)*3;
     unsigned d = ((((t*t)>>15)*t)>>15);

     int x = ax*a + bx*b + cx*c + dx*d;
     int y = ay*a + by*b + cy*c + dy*d;

     SetPixel(x>>15 ,y>>15, color);

     }

     } 
```

由于没有 float 到 int 的转换，它的速度提高了 3.5 倍。当我测量计算时间时，它大约是 115 毫秒而不是 80 毫秒（其中 3k 在我的旧处理器上），所以这里的整数并没有那么快（aqbout 30% only :O）

# java - 无法在 Java 中使用 CometD 执行握手

> ID：12430017
> 
> 赞同：1
> 
> 时间：2012-09-14T18:28:15.417
> 
> 标签：java, servlets, comet, cometd

我有一个彗星的例子，我正在努力。该示例提供了一个 javascript 客户端代码。我正在尝试创建一个可以连接并执行相同操作的 Java 客户端。唯一的问题是我无法连接。

当我打电话时`handshake();`，它返回：

```
java.net.ProtocolException: Unexpected response 404: TransportExchange@f9e597=POST//localhost:8080/cometd/login/handshake#CONTENT(0ms)->COMPLETED(0ms)sent=45ms 
```

我不确定到底发生了什么。这是Javascript客户端代码。当用户单击页面上的按钮时，它会被调用。它执行握手。

```
 $('#connect').click(function() {
            var u = $('#user').val();
            if(u) {
                $.post('login', {
                    user: u
                }, function() {
                    _disconnecting = false;
                    cometd.handshake();
                });
            }
        }); 
```

这是我用来尝试复制它的客户端代码。我`http://localhost:8080/cometd/login`进入它：

```
public void handshake(String url) throws Exception {
    // Create (and eventually setup) Jetty's HttpClient
    HttpClient httpClient = new HttpClient();
    // Here setup Jetty's HttpClient, for example:
    // httpClient.setMaxConnectionsPerAddress(2);
    httpClient.start();

    // Prepare the transport
    Map<String, Object> options = new HashMap<String, Object>();
    ClientTransport transport = LongPollingTransport.create(options, httpClient);

    ClientSession client = new BayeuxClient(url, transport);
    // Here setup the BayeuxClient, for example:
    client.getChannel(Channel.META_HANDSHAKE).addListener(new ClientSessionChannel.MessageListener() {
        public void onMessage(ClientSessionChannel channel, Message message) {
            if (message.isSuccessful()) {
                System.out.println("HandShake yea!!");
            }
        }
    });
    client.handshake();
} 
```

在服务器上有一个正在运行的 servlet。我有断点。我可以看到使用 javascript 版本单击按钮时正在调用它。但是，当我使用我的版本时，它永远不会被调用。

如果有帮助，这里是 servlet：

```
public final class LoginServlet extends HttpServlet {
@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    System.out.println(getUrl(req));
    HttpSession session = req.getSession();
    String existingUser = (String) session.getAttribute("user");
    String user = req.getParameter("user");
    if (user != null && user.trim().length() == 0) {
        user = null;
    }
    if (user == null && existingUser == null) {
        resp.setStatus(HttpServletResponse.SC_FORBIDDEN);
    } else if (existingUser != null && !existingUser.equals(user)) {
        resp.setStatus(HttpServletResponse.SC_FORBIDDEN);
    } else if (user != null && existingUser == null) {
        session.setAttribute("user", user);
        resp.setStatus(HttpServletResponse.SC_OK);
    }
}
} 
```

这是 web.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:j2ee="http://java.sun.com/xml/ns/javaee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_3.0.xsd">

<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list>

<servlet>
    <servlet-name>login</servlet-name>
    <servlet-class>LoginServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>login</servlet-name>
    <url-pattern>/login</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>cometd</servlet-name>
    <servlet-class>org.cometd.java.annotation.AnnotationCometdServlet</servlet-class>
    <async-supported>true</async-supported>
    <init-param>
        <param-name>timeout</param-name>
        <param-value>60000</param-value>
    </init-param>
    <init-param>
        <param-name>logLevel</param-name>
        <param-value>3</param-value>
    </init-param>
    <init-param>
        <param-name>services</param-name>
        <param-value>ChatService</param-value>
    </init-param>
    <init-param>
        <param-name>transports</param-name>
        <param-value>com.ovea.cometd.websocket.jetty8.Jetty8WebSocketTransport</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>cometd</servlet-name>
    <url-pattern>/cometd/*</url-pattern>
</servlet-mapping> 
```

# java - 如何使用 Java 执行程序

> ID：12430018
> 
> 赞同：2
> 
> 时间：2012-09-14T18:28:16.300
> 
> 标签：java, exec

我对 java 还很陌生，现在我想使用 java 通过 windows 命令运行 SSH。

这是我创建的代码，

```
Process pr1 = Runtime.getRuntime().exec("cmd /k" + "ssh root@host" + "&&" + "passwd" );
Process pr = Runtime.getRuntime().exec("ls");
BufferedReader input = new BufferedReader(new InputStreamReader(pr.getInputStream()));
String line=null;

while((line=input.readLine()) != null)
    System.out.println(line); 
```

我总是得到错误：

> java.io.IOException: Cannot run program "ls": CreateProcess error=2, 系统找不到指定的文件

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T18:33:58.787

实际上回答可能很容易：问题是您正在执行 SSH 命令，然后执行一个单独的命令`ls`，该命令被发送到 Windows 控制台（而不是通过 SSH）所以，正如您所知，Windows 没有 ls 命令。

您必须将其发送到`Process`SSH 命令的 exec 返回的，您可以通过存储结果进程、检索它`OutputStream`并在那里写入命令来完成。当然，您必须使用它`InputStream`来获取结果。第二个`exec()`根本不应该存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T18:31:36.547

不要打扰 Runtime.exec，使用[Apache Commons Exec](http://commons.apache.org/exec/)。要将其应用于您的问题，它将如下所示：

```
ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
PumpStreamHandler streamHandler = new PumpStreamHandler(outputStream);
CommandLine pr1 = CommandLine.parse("cmd /k" + "ssh root@host" + "&&" + "passwd");
CommandLine pr = CommandLine.parse("ls");
DefaultExecutor executor = new DefaultExecutor();
executor.setStreamHandler(streamHandler);

int exitValue = executor.execute(pr1);
exitValue = executor.execute(pr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T18:32:11.507

除了使用`JSch`（或任何其他 Java SSH 实现）之外，通过环境变量传递路径可能不起作用，因为大多数 SSH 守护程序只接受来自另一端的一小部分变量（主要与本地化或终端类型相关）。

由于 ssh 的参数（或“命令”，如果将 JSch 与 ChannelExec 一起使用）传递给远程 shell 以执行，您可以尝试在此命令中定义路径（如果您的默认 shell 与 POSIX sh 兼容):

`PATH=path_needed_toRun_myProg /absPathToMyProg/myProg`

**因此，您的 Runtime.exec 数组将如下所示：**

```
String[] cmd = {"/usr/bin/ssh", "someRemoteMachine",
                "PATH=path_needed_toRun_myProg /absPathToMyProg/myProg"}; 
```

如果使用 Runtime.exec 的规则不严格，请尝试使用**Apache 的 Exec 库**...

**请参阅此链接：**

[http://commons.apache.org/exec/](http://commons.apache.org/exec/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T18:35:17.750

您想写入进程的标准输入。

```
pr.getOutputStream().write("ls\n".getBytes()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-11T06:20:07.023

请使用[https://github.com/zeroturnaround/zt-exec](https://github.com/zeroturnaround/zt-exec)。Apache Commons Exec 有很多缺点，你需要相当多的代码才能让它正确。一切都在这里解释：[https ://zeroturnaround.com/rebellabs/why-we-created-yaplj-yet-another-process-library-for-java/](https://zeroturnaround.com/rebellabs/why-we-created-yaplj-yet-another-process-library-for-java/)

# dll - 来自 dll 的第一个变量构造的访问冲突

> ID：12430020
> 
> 赞同：0
> 
> 时间：2012-09-14T18:28:23.123
> 
> 标签：dll, access-violation, class-constructors

我创建了一个包含我自己的数学库的 dll。该库允许我使用它的类和一些插值方法。但是，当我的程序第一次从这个 dll 创建一个类时，它会生成第一次机会异常 - 访问冲突。之后，所有类及其方法都可以正常运行，并且程序可以正常运行和关闭。这是我的代码生成的唯一错误，并且显然会阻止它在发行版中运行。

我在属性页面中缺少什么吗？还是我需要声明类方法 virtual METHOD() = 0？（我问这个，因为有很多要在一个类中添加来测试这个）。

我已经使用 /VERBOSE 来检查链接器阶段，一切都很好，生成的 dll 没有任何问题。我被这个问题难住了，我似乎很奇怪，它在创建第一堂课时就产生了这个问题，但之后就很好了。

任何提示都会很有帮助，我现在已经浪费了几个小时来处理这个错误。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T04:39:12.800

解决了！编译dll时缺少VS2010生成的dllmain.cpp。如果其他人 VS 没有生成此文件：#include "stdafx.h" BOOL APIENTRY DllMain(HMODULE hModule, DWORD ul_reason_for_call, LPVOID lpReserved) { switch (ul_reason_for_call) { case DLL_PROCESS_ATTACH: case DLL_THREAD_ATTACH: case DLL_THREAD_DETACH: case DLL_PROCESS_DETACH: break; } 返回真；}

# linux - Echo 命令行问题

> ID：12430027
> 
> 赞同：0
> 
> 时间：2012-09-14T18:28:37.810
> 
> 标签：linux, shell, command-line, echo

所以我是 linux 新手，我正在尝试学习 echo 命令

我的第一个问题是我试图在扩展 .txt 的某个目录中显示所有文件名（不是内容）而不是那个目录

我试过了， `cd /directory/ | echo *.{txt}`但它不起作用

同样，如果我想显示以“the”开头的所有文件名（不是内容），然后是我拥有的任何 2 个数字， `echo the[0-9][0-9]*`但我认为我的语法不正确，该怎么办？

最后，如果我想显示至少包含三个字符但不以“the”开头的文件怎么办？... <- 我不知道该怎么做

任何帮助和澄清都会使我受益，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:32:41.250

您可以通过使用正确的模式作为`ls`命令的参数来实现您想要做的事情：

```
ls /directory/*.txt 
```

就`echo`目前而言，它是一个仅显示其参数的命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:31:45.903

我认为您想要列表命令（`ls`）或`find`命令，例如

```
ls /some/path *.txt

find /some/path *.txt 
```

`ls`比较简单但有限。 `find`稍微复杂一些，但具有更大的功能和灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T18:32:58.330

```
cd /directory/ && echo *.txt 
```

但这并非没有。你可以

```
(cd /directory/ ; echo *.txt ) 
```

如果您想在命令执行后返回。

```
echo the{0..9}{0..9}*
ls| grep -v ^the 
```

是的，如果你想要文件的内容，你应该在最后一种情况下使用`cat`而不是和`echo`

```
cat $(ls|grep -v ^the) 
```

（注意，如果你的文件有空格，最后一个命令会变得更复杂）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T18:33:41.470

如果你想显示文件的内容，你应该使用`cat`. `cat /directory/*.txt`其他情况也是如此。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T18:46:55.520

问题一：

```
 ls /some/dir/*.txt 
```

问题2：

```
 ls /some/dir/the[0-9][0-9]*.txt 
```

问题 3：

```
 ls /some/dir/*.txt | awk '{if(length($1) > 3 && substr($1,0,3) != "the"){print $1}}' 
```

# python - PyQt4：更改 QTabBar 上的文本大小和字体

> ID：12430028
> 
> 赞同：2
> 
> 时间：2012-09-14T18:28:44.520
> 
> 标签：python, text, size, pyqt4, tabbar

您将如何更改 QTabWidget 中的文本大小和字体？

```
class TabBar(QtGui.QTabBar):
    def ???(self, ???): 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T00:39:06.840

带有样式表。您不需要为此进行子类化。但是从您[之前的问题](https://stackoverflow.com/questions/12428917/pyqt4-set-size-of-the-tab-bar-in-qtabwidget)来看，您已经在这样做了。你也可以把这个放进去`__init__`..

```
class TabBar(QtGui.QTabBar):
    def __init__(self, parent=None):
        super(TabBar, self).__init__(parent)

        self.setStyleSheet('font-size: 18pt; font-family: Courier;') 
```

如果您不想使用自定义`QTabBar`，则等效将样式表设置为`QTabWidget`与选择器相关`QTabBar`：

```
myTabWidget.setStyleSheet('QTabBar { font-size: 18pt; font-family: Courier; }') 
```

# jquery - jquery-fileupload-rails - 损坏的形式

> ID：12430044
> 
> 赞同：2
> 
> 时间：2012-09-14T18:30:16.657
> 
> 标签：jquery, ruby-on-rails

我正在尝试使用[jquery-fileupload-rails](https://github.com/tors/jquery-fileupload-rails) gem 来允许我的网站上的多文件上传器。

我已经完成了所有事情，就像它在文档中编写的那样 + 我遵循了[示例应用程序](https://github.com/tors/jquery-fileupload-rails-paperclip-example)，但我能得到的只是这个视图输出，这些按钮都不起作用：

![在此处输入图像描述](../Images/220e5e2797b73c9bff625b7dc03c9298.png)

* * *

我的文件：

**application.html.haml**（js 和 css 文件包含在资产管道中）

```
!!!
%html
  %head
    = stylesheet_link_tag 'application'
    = csrf_meta_tags

  %body{ :class => yield(:body_class) }

    = yield

  = yield :scripts

  = javascript_include_tag "application"
  = javascript_include_tag "rest_in_place" 
```

**上传者.html.erb**

```
<div class="container">
  <h2>Upload file</h2>
  <%= form_for UserPhoto.new, :html => { :multipart => true, :id => "fileupload"  } do |f| %>
    <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
    <div class="row fileupload-buttonbar">
      <div class="span7">
        <!-- The fileinput-button span is used to style the file input field as button -->
        <span class="btn btn-success fileinput-button">
          <i class="icon-plus icon-white"></i>
          <span>Add files...</span>
          <%= f.file_field :photo %>
        </span>
        <button type="submit" class="btn btn-primary start">
          <i class="icon-upload icon-white"></i>
          <span>Start upload</span>
        </button>
        <button type="reset" class="btn btn-warning cancel">
          <i class="icon-ban-circle icon-white"></i>
          <span>Cancel upload</span>
        </button>
        <button type="button" class="btn btn-danger delete">
          <i class="icon-trash icon-white"></i>
          <span>Delete</span>
        </button>
        <input type="checkbox" class="toggle">
      </div>
      <div class="span5">
        <!-- The global progress bar -->
        <div class="progress progress-success progress-striped active fade">
          <div class="bar" style="width:0%;"></div>
        </div>
      </div>
    </div>
    <!-- The loading indicator is shown during image processing -->
    <div class="fileupload-loading"></div>
    <br>
    <!-- The table listing the files available for upload/download -->
    <table class="table table-striped"><tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery"></tbody>
    </table>
  <% end %>

</div>
<script>
  var fileUploadErrors = {
  maxFileSize: 'File is too big',
  minFileSize: 'File is too small',
  acceptFileTypes: 'Filetype not allowed',
  maxNumberOfFiles: 'Max number of files exceeded',
  uploadedBytes: 'Uploaded bytes exceed file size',
  emptyResult: 'Empty file upload result'
  };
</script>

<!-- The template to display files available for upload -->
<script id="template-upload" type="text/x-tmpl">
  {% for (var i=0, file; file=o.files[i]; i++) { %}
  <tr class="template-upload fade">
    <td class="preview"><span class="fade"></span></td>
    <td class="name"><span>{%=file.name%}</span></td>
    <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
    {% if (file.error) { %}
    <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
    {% } else if (o.files.valid && !i) { %}
    <td>
      <div class="progress progress-success progress-striped active"><div class="bar" style="width:0%;"></div></div>
    </td>
    <td class="start">{% if (!o.options.autoUpload) { %}
      <button class="btn btn-primary">
        <i class="icon-upload icon-white"></i>
        <span>{%=locale.fileupload.start%}</span>
      </button>
      {% } %}</td>
    {% } else { %}
    <td colspan="2"></td>
    {% } %}
    <td class="cancel">{% if (!i) { %}
      <button class="btn btn-warning">
        <i class="icon-ban-circle icon-white"></i>
        <span>{%=locale.fileupload.cancel%}</span>
      </button>
      {% } %}</td>
  </tr>
  {% } %}
</script>
<!-- The template to display files available for download -->
<script id="template-download" type="text/x-tmpl">
  {% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-download fade">
      {% if (file.error) { %}
        <td></td>
        <td class="name"><span>{%=file.name%}</span></td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        {% } else { %}
        <td class="preview">{% if (file.thumbnail_url) { %}
          <a href="{%=file.url%}" title="{%=file.name%}" rel="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
          {% } %}</td>
        <td class="name">
          <a href="{%=file.url%}" title="{%=file.name%}" rel="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
        </td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        <td colspan="2"></td>
        {% } %}
      <td class="delete">
        <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}">
          <i class="icon-trash icon-white"></i>
          <span>{%=locale.fileupload.destroy%}</span>
        </button>
        <input type="checkbox" name="delete" value="1">
      </td>
    </tr>
    {% } %}
</script> 
```

**应用程序.js**

```
$(function(){
  // Initialize the jQuery File Upload widget:
  jQuery('#fileupload').fileupload();
  // 
  // Load existing files:
  jQuery.getJSON($('#fileupload').prop('action'), function (files) {
    var fu = $('#fileupload').data('fileupload'), 
      template;
    fu._adjustMaxNumberOfFiles(-files.length);
    console.log(files);
    template = fu._renderDownload(files)
      .appendTo($('#fileupload .files'));
    // Force reflow:
    fu._reflow = fu._transition && template.length &&
      template[0].offsetWidth;
    template.addClass('in');
    jQuery('#loading').remove();
  });
}); 
```

如果你能看到我做错了什么或者你需要更多的代码来检查，请告诉我，我感到很绝望。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T00:22:17.347

Google Chrome's Developer Tools are helpful tracking JS issues down. Get Chrome, then go to the menu -> Tools -> Developer Tools. Click on the right-most Console tab. Refresh to page. Get any errors? (post them here)

# android - android.R.layout.custom 错误

> ID：12430048
> 
> 赞同：0
> 
> 时间：2012-09-14T18:30:31.817
> 
> 标签：android, android-listview

我创建了一个 XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="4dip"
        android:paddingRight="4dip"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="24sp" />

</LinearLayout> 
```

我想用下面的代码填充这个布局：

```
package ir.smspeik.sms;

import android.app.ListActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class MyListView extends ListActivity {
    /** Called when the activity is first created. */
    TextView selection;
    String[] names;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listlayout);
        names = new String[] { "sunday", "monday", "tuesday", "wednesday",
                "thrusday", "friday", "saturday", };
        this.setListAdapter(new ArrayAdapter<String>(this, android.R.layout.custom,
                R.id.label, names));
        selection = (TextView) findViewById(R.id.label);
    }

    public void onListItemClick(ListView parent, View v, int position, long id) {
        selection.setText(names[position]);
    }
} 
```

我有两个警告和一个错误。警告在 xml 文件中：1\. 此标签及其子标签可以替换为一个和一个复合可绘制对象 2\. [辅助功能] 图像上缺少 contentDescription 属性

MyListView 中的错误 1\. eclipse 不知道 android.R.layout.custom

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T18:32:17.907

使用`R.layout.custom`代替`android.R.layout.custom`

# batch-file - 如何通过批处理文件远程执行命令？

> ID：12430049
> 
> 赞同：0
> 
> 时间：2012-09-14T18:30:32.617
> 
> 标签：batch-file

所以基本上，我要做的就是在文本文件“server.txt”中提到名称的 100 台服务器上执行“sc”命令。我尝试了以下方法，但它不起作用，因为它返回空的记事本文件。

```
for /f %%a in (servers.txt) do sc \\server_name query | find "SERVICE_NAME">>servicecontroller.txt 
```

我在本地尝试了上面的命令，它工作得很好。我知道问题出在“\server_name”中。不知道这是怎么回事。我需要使用隐藏共享吗？也许像这样？

```
\\server_name\c$ /user:domain\username password 
```

还是像这样？

```
 \\server_name\c$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T18:46:02.577

[您可以使用PsExec](http://technet.microsoft.com/en-us/sysinternals/bb897553)在网络中的远程计算机上执行命令。我用它来执行批处理文件并将参数传递给它们，以及检查正在运行的服务。甚至还有一种特殊的语法可以在文本文件中列出的多台计算机上执行。

或者，如果 powershell 是一个选项，您可以考虑使用[powershell remoting](http://msdn.microsoft.com/en-us/library/windows/desktop/ee706585%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T20:06:10.497

如果您在`\\server_name`那里硬编码而不是`%%a`，那么这就是您的问题。试试这个：

```
for /f %%a in (servers.txt) do sc \\%a query | find "SERVICE_NAME">>servicescontroller.txt 
```

编辑：以下行有助于在所有服务器上一致地获得管理员访问权限。这是我（OP）正在寻找的路线。

```
net use \\servername\ipc$ /u:domain\user password 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T20:22:38.370

作为替代方式，您可以使用 wmic ：

一次对多台机器执行并将列表保存为格式良好的 html 表（以及其他格式）：

```
wmic /node:@servers.txt /output:services.html service get caption /format:htable 
```

当然，除了名称/标题之外，您还可以查询更多属性。

# javascript - 不触发 Jquery 隐藏

> ID：12430053
> 
> 赞同：0
> 
> 时间：2012-09-14T18:30:47.087
> 
> 标签：javascript, jquery

以下是我的javascript，我一直在尝试显示某些div，并且在执行函数后，div应该自行隐藏，但我遇到了这个问题，在同一个函数中，两者都不起作用，喜欢先显示，然后在一段时间后显示隐藏那个 div 但是当我把显示事件和隐藏分开时它工作得很好。请让我知道如何修改以下代码，以便在处理结果后隐藏该 div

```
 function jq(input)
    {

    if (input == 'abc')
    {
    $("#show").show(1000);

        document.getElementById('sele').options.length = 0;

    $('#sele').append('<option value="test">Testing</option>').updateSelect();

    $("#show").hide(1000);

    }
}

 <div id="show" > <img  src="ajax-loader.gif" width="16" height="16" /> </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:36:43.643

```
$("#show").show(1000, function() {

    $('#sele').empty(); // instead of: document.getElementById('sele').options.length = 0;

    $('#sele').append('<option value="test">Testing</option>').updateSelect();

    // make a delay using setTimeout()
    setTimeout(function() {

      $("#show").hide(1000);

    }, 500);

}); 
```

***完整代码***

```
function jq(input) {
    if (input == 'abc') {
        $("#show").show(1000, function() {
            $('#sele').empty();
            $('#sele').append('<option value="test">Testing</option>').updateSelect();
            setTimeout(function() {
                $("#show").hide(1000);
            }, 500);
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:36:04.087

我认为您在以下行中遇到错误（检查控制台）：

```
document.getElementById('sele').options.length = 0; 
```

`length`是只读的，这不是清空选择的方法。由于您使用的是 jQuery，因此您可以这样做：

```
$('#sele').empty(); 
```

# .net - 如何等待 .Net 中列表的第一个完成的异步任务？

> ID：12430056
> 
> 赞同：0
> 
> 时间：2012-09-14T18:31:03.487
> 
> 标签：.net, vb.net, async-await

我的输入是位于 Amazon S3 服务器上的一长串文件。我想下载文件的元数据，计算本地文件的哈希值，并将元数据哈希值与本地文件的哈希值进行比较。

目前，我使用一个循环来异步启动所有元数据下载，然后在每次完成后，根据需要在本地文件上计算 MD5 并进行比较。这是代码（只是相关行）：

```
Dim s3client As New AmazonS3Client(KeyId.Text, keySecret.Text)
Dim responseTasks As New List(Of System.Tuple(Of ListViewItem, Task(Of GetObjectMetadataResponse)))
For Each lvi As ListViewItem In lvStatus.Items
    Dim gomr As New Amazon.S3.Model.GetObjectMetadataRequest
    gomr.BucketName = S3FileDialog.GetBucketName(lvi.SubItems(2).Text)
    gomr.Key = S3FileDialog.GetPrefix(lvi.SubItems(2).Text)
    responseTasks.Add(New System.Tuple(Of ListViewItem, Task(Of GetObjectMetadataResponse))(lvi, s3client.GetObjectMetadataAsync(gomr)))
Next
For Each t As System.Tuple(Of ListViewItem, Task(Of GetObjectMetadataResponse)) In responseTasks
    Dim response As GetObjectMetadataResponse = Await t.Item2
    If response.ETag.Trim(""""c) = MD5CalcFile(lvi.SubItems(1).Text) Then
        lvi.SubItems(3).Text = "Match"
        UpdateLvi(lvi)
    End If
Next 
```

我有两个问题：

1.  我正在按照我制作它们的顺序等待回复。我宁愿按照它们完成的顺序处理它们，以便我更快地得到它们。

2.  MD5 计算时间长且同步。我尝试使其异步但进程锁定。我认为 MD5 任务已添加到 .Net 任务列表的末尾，并且直到所有下载完成后才开始运行。

理想情况下，我在响应到达时对其进行处理，而不是按顺序处理，MD5 是异步的，但有机会运行。

**编辑：**

结合WhenAll，它现在看起来像这样：

```
Dim s3client As New Amazon.S3.AmazonS3Client(KeyId.Text, keySecret.Text)
Dim responseTasks As New Dictionary(Of Task(Of GetObjectMetadataResponse), ListViewItem)
    For Each lvi As ListViewItem In lvStatus.Items
        Dim gomr As New Amazon.S3.Model.GetObjectMetadataRequest
        gomr.BucketName = S3FileDialog.GetBucketName(lvi.SubItems(2).Text)
        gomr.Key = S3FileDialog.GetPrefix(lvi.SubItems(2).Text)
        responseTasks.Add(s3client.GetObjectMetadataAsync(gomr), lvi)
    Next
    Dim startTime As DateTimeOffset = DateTimeOffset.Now
    Do While responseTasks.Count > 0
        Dim currentTask As Task(Of GetObjectMetadataResponse) = Await Task.WhenAny(responseTasks.Keys)
        Dim response As GetObjectMetadataResponse = Await currentTask
        If response.ETag.Trim(""""c) = MD5CalcFile(lvi.SubItems(1).Text) Then
            lvi.SubItems(3).Text = "Match"
            UpdateLvi(lvi)
        End If
    Loop
    MsgBox((DateTimeOffset.Now - startTime).ToString) 
```

只要 MDSCalcFile 完成，UI 就会立即锁定。整个循环大约需要 45 秒，第一个文件的 MD5 结果发生在开始后的 1 秒内。

如果我将行更改为：

```
 If response.ETag.Trim(""""c) = Await Task.Run(Function () MD5CalcFile(lvi.SubItems(1).Text)) Then 
```

完成 MD5CalcFile 后，UI 不会锁定。整个循环大约需要 75 秒，从 45 秒开始，第一个文件的 MD5 结果发生在等待 40 秒之后。

**编辑2：**

我找到了一个适合我的解决方案。问题出在我的 GetObjectMetadataAsync 中。我写错了。评论中错误的正确版本如下：

```
<System.Runtime.CompilerServices.Extension>
Function GetObjectMetadataAsync(a As AmazonS3Client, l As GetObjectMetadataRequest) As Task(Of GetObjectMetadataResponse)
    Return Task.Factory.FromAsync(AddressOf a.BeginGetObjectMetadata, AddressOf a.EndGetObjectMetadata, l, Nothing)
    'Return Task.Run(Function()
    '                    Try
    '                        Return a.GetObjectMetadata(l)
    '                    Catch ex As Amazon.S3.AmazonS3Exception
    '                        If ex.ErrorCode = "NoSuchKey" Then
    '                            Return Nothing
    '                        Else
    '                            Throw ex
    '                        End If
    '                    End Try
    '                End Function)
End Function 
```

我不知道为什么将同步版本放入线程或使用 FromAsync 很重要，但显然后者更好看，测试表明它要快得多。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T19:09:09.680

您可以`WhenAny`在任务结果完成时使用它们来处理它们：

```
while (responseTasks.Length > 0)
{
  var completedTask = await Task.WhenAny(responseTasks);
  responseTasks.Remove(completedTask);
  var response = await completedTask;
  ...
} 
```

（对 C# 感到抱歉；我的 VB 语法太长了，无法正确）。

有关该主题的完整讨论，请参阅[Stephen Toub 关于该主题的帖子](http://blogs.msdn.com/b/pfxteam/archive/2012/08/02/processing-tasks-as-they-complete.aspx)。

另一个选项是[TPL Dataflow](http://msdn.microsoft.com/en-us/devlabs/gg585582.aspx)，它允许您构建一个“网格”供数据通过。对于此示例，Dataflow 可能有点矫枉过正，但如果您的实际处理更复杂，它会很有用。

就 MD5 而言，使其异步应该不是问题。基于异步 I/O 的任务（例如由 返回的任务`GetObjectMetadataAsync`）不消耗线程池线程。我会尝试其他一些场景（比如自己异步运行 MD5），然后如果没有出现明显的问题，则发布另一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T21:26:34.540

也许 using`Task.ContinueWith`会有所帮助，而不是 using `await`。它还可以帮助使代码比`await`在这些循环内部使用更简单。

**笔记：**

显然，我没有与您相同的可用数据类型，因此我使用基本数据类型和调试语句处理了我的示例，然后尝试将您的代码示例改进到其中。您可能需要稍微调整语法。

**编辑：**

我更新了我的示例以包括传递同步上下文以`ContinueWith`确保回调发生在 UI 线程上（假设此调用代码发生在 UI 线程上）。

*参考：[UI线程上的任务继续](https://stackoverflow.com/questions/4331262/task-continuation-on-ui-thread)*

```
...

Dim s3client As New AmazonS3Client(KeyId.Text, keySecret.Text)

For Each lvi As ListViewItem In lvStatus.Items

    Dim currentListItem = lvi

    Dim gomr As New Amazon.S3.Model.GetObjectMetadataRequest
    gomr.BucketName = S3FileDialog.GetBucketName(lvi.SubItems(2).Text)
    gomr.Key = S3FileDialog.GetPrefix(lvi.SubItems(2).Text)

    ' Pass this context to the ContinueWith method so that the callback is executed on the UI thread '
    Dim context = TaskScheduler.FromCurrentSynchronizationContext()
    Dim t = s3client.GetObjectMetadataAsync(gomr)
    t.ContinueWith(Sub(task) OnDownloadComplete(task.Result, currentListItem), context)
    t.Start()

Next

...

Private Sub OnDownloadComplete(response As GetObjectMetadataResponse, item As ListViewItem)
    If response.ETag.Trim(""""c) = MD5CalcFile(item.SubItems(1).Text) Then
        item.SubItems(3).Text = "Match"
        UpdateLvi(item)
    End If
End Sub 
```

# ruby-on-rails - unicorn_rails：找不到命令

> ID：12430061
> 
> 赞同：2
> 
> 时间：2012-09-14T18:31:42.777
> 
> 标签：ruby-on-rails, unicorn

我使用`kill -9 <processnumber>`. 尝试使用以下命令重新启动服务器时，出现错误`"unicorn_rails: Command not found."`

`unicorn_rails -p 3000 -E production -D`

在终止进程之前一切正常。

我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T19:20:55.083

试试`bundle exec unicorn_rails ...`。Unicorn 很可能是作为捆绑包的一部分安装的，而不是在全局 gem 路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T07:10:28.313

您是否还需要重新启动 nginx/apache 或其他一些在 unicorn 前面进行反向代理的 Web 服务器？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T10:43:12.573

尝试`cap development unicorn:start`

它适用于端口 3000

# ruby-on-rails - 在运行时将 git 与 rails 一起使用

> ID：12430064
> 
> 赞同：0
> 
> 时间：2012-09-14T18:31:53.490
> 
> 标签：ruby-on-rails, git, github

我想使用 Rails 应用程序制作一个简单的文档编辑器，但我希望它具有版本历史记录。我能看到的最好方法是使用 git，但我找不到任何关于在 rails 应用程序中使用 Git 的信息！当我搜索 git/rails（或任何组合）时，我会收到大量关于提交项目、安装 git 以及作为开发人员使用它的信息。我想要找到的是如何在 rails 应用程序内部使用它，以便使用网页的用户可以编辑文档并使用历史记录保存更改 - 就像 Github 的文件编辑器一样。

关于如何找到这个的任何想法？你觉得这个想法有什么潜在的问题吗？我不确定 git 是否仅适用于本地开发机器，或者它是否可以在并发用户访问的生产环境中使用 - 请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:09:17.653

您可以直接使用系统调用并负责组织您的存储库。

只需使用该`system`方法或用 ` 包围您的呼叫（例如：`ls`）

# callback - Fancybox 2 afterClose focus

> ID：12430065
> 
> 赞同：0
> 
> 时间：2012-09-14T18:31:56.557
> 
> 标签：callback, fancybox, focus, thumbnails, fancybox-2

我刚刚尝试了 Fancybox 2，但遇到了问题！在Fancybox 1.3.4 中，我可以在fancybox 关闭时触发一个功能，即将焦点添加到当前拇指元素（例如在画廊中）。

它看起来是这样的：

```
onClosed : function(){
 currentArray[currentIndex].focus();
} 
```

但是，在 Fancybox 2 中，它们已弃用`onClosed`，并且还有另一个参数 ，`afterClose`但我找不到存储当前拇指元素的变量。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:39:28.017

试试这个

```
afterClose : function(){
 this.group[this.index].focus();
} 
```

**编辑**：上面的代码适用于fancybox v2.0.6 及**以下**（2.x），但不适用于fancybox 2.1.0+（清理过程和一些变量可能已被修改）......所以对于fancybox v2.1.0，你需要然后从启动fancybox的位置获取选择器（`.fancybox`例如），对于这种类型的html

```
<a class="fancybox" ... 
```

使用如下`beforeClose`选项：

```
beforeClose : function(){
 $(".fancybox").eq(this.index).focus();
} 
```

# c - Switch Case 帮助 C

> ID：12430068
> 
> 赞同：0
> 
> 时间：2012-09-14T18:32:10.270
> 
> 标签：c, switch-statement

我正在尝试根据另一个字母来检查字符串字母，检查 userword[k] 中的第一个字母与 letterstest[t] 中的所有字母，如果它们匹配将字母test[t] 的匹配字母切换为 0 所以它不能再次匹配。我感到困惑的地方是 switch(){ 内部以及究竟会起作用。有没有一个案例：什么可以切换字符串的字母？

```
for (k = 0; k<wordsize; k++){
    for(t=0; t<8, t++){
        if (userword[k] != letterstest[t]) 
            return 0;

        if (userword[k] == letterstest[t]){    
            switch (letterstest[t]){

                    //unsure what case would work here
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T18:40:50.080

我认为你误解了什么`switch`是。`switch`是一个选择结构，例如`if`/ `else`。例如，这两个代码片段（通常）是等效的：

```
if(a == 0)
    printf("%s\n", "zero");
else if(a == 1)
    printf("%s\n", "one");
else if(a == 2)
    printf("%s\n", "two");
else
    printf("%s\n", "invalid");

switch(a)
{
    case 0:
        printf("%s\n", "zero");
        break;
    case 1:
        printf("%s\n", "one");
        break;
    case 2:
        printf("%s\n", "two");
        break;
    default:
        printf("%s\n", "invalid");
} 
```

我不完全清楚您要做什么，但是当您写“如果它们匹配将匹配的字母test[t] 切换为0，因此无法再次匹配”时，听起来您的意思是：

```
 if (userword[k] == letterstest[t]){
        letterstest[t] = '\0';
    } 
```

* * *

**编辑添加：**好的，我*想*我现在明白你想要做什么了：

*   您想确认 和 之间的每个字符都`userword[0]`出现在和`userword[wordsize-1]`之间。`letterstest[0]``letterstest[7]`
*   `userword[0]`如果给定字符在and之间出现多次，则它必须在and之间`userword[wordsize-1]`出现至少同样多次。那就是——一个介于和之间的字符只能算一次。`letterstest[0]``letterstest[7]``letterstest[0]``letterstest[7]`
*   只要最终答案正确，您就可以更改`letterstest[0]`和之间出现的字符；`letterstest[7]`也就是说，您不需要保留`letterstest`.
*   该字符`'\0'`不会出现在`userword[0]`和之间`userword[wordsize-1]`，因此可以用作“虚拟”值，意思是“不匹配”。

那是对的吗？

如果是这样，那么你可以写：

```
for(k = 0; k < wordsize; k++) {
    for(t = 0; t < 8; t++) {
        if(userword[k] == letterstest[t]) {
            letterstest[t] = '\0'; /* don't let letterstest[t] count again */
            break; /* O.K., we've matched userword[k], we can move on */
        }
    }
    if(t == 8) /* we reached letterstest[8] without finding a match */
        return 0;
}
return 1; /* we found a match for each character */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:56:17.373

好的，首先您可以使用任何函数来匹配其他字符或字符串...（如果您不想使用“for”循环）

在 linux 上使用“man”命令（函数）：

*   strchr
*   字符串
*   指数
*   索引...

如果你想切换一个字符，你可以使用字符的ascii代码（http://www.table-ascii.com/），或者直接使用字符...

例如，如果您想检查“A”字符，您可以这样做：

```
// Char Method
switch (letterstest[t]){
    case 'A':
        printf("A Detected !\n");
        break;
}

// Or Use The ASCII Code Method
switch (letterstest[t]){
    case 65:
        printf("A Detected !\n");
        break;
} 
```

例如，如果您想检查“0”字符（数字），您可以这样做：

```
// Char Method
switch (letterstest[t]){
    case '0':
        printf("0 Detected !\n");
        break;
}

// Or Use The ASCII Code Method
switch (letterstest[t]){
    case 48:
        printf("0 Detected !\n");
        break;
} 
```

例如，如果您想检查 0 字符（'\0' NUL），您可以这样做：

```
// Char Method
switch (letterstest[t]){
    case '\0':
        printf("NUL Detected !\n");
        break;
}

// Or Use The ASCII Code Method
switch (letterstest[t]){
    case 0:
        printf("NUL Detected !\n");
        break;
} 
```

# css - 在 IE9 中页面变为空白

> ID：12430080
> 
> 赞同：0
> 
> 时间：2012-09-14T18:32:51.100
> 
> 标签：css, internet-explorer, internet-explorer-9

有没有一个好方法可以解决为什么 IE 中的页面变为空白？我知道我可以切换到兼容模式 7，但处理 IE7 夸克更糟糕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:40:34.870

使用[http://validator.w3.org/](http://validator.w3.org/)来确定这个问题。

# mysql - MySQL - ON 更新 CASCADE + foreign_key_checks = 0

> ID：12430081
> 
> 赞同：4
> 
> 时间：2012-09-14T18:32:55.027
> 
> 标签：mysql, database, foreign-keys, sql-update, foreign-key-relationship

我正在开发一个工具来合并两个具有相同架构但不同数据的数据库。

其中一部分是将所有外键更改为`ON UPDATE CASCADE`，然后递增所有主键以避免冲突并保持外键指针正常工作。

我的问题是，有时有一些孤立的行带有损坏的 FK，所以下面的查询：

```
UPDATE table set pk = pk + 1000000 
```

像这样失败： `ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails`......（尽管我什至没有考虑触摸外键列！）

我想通过以下方式关闭它：

```
Set foreign_key_checks=0 
```

但随后相关的外键不会更新。我做了一个快速测试，设置foreign_key_checks = 0后级联不起作用。

有什么方法可以触发级联，或者在没有设置的情况下更新 FK 损坏的行`foreign_key_checks=0`？`UPDATE IGNORE`不能解决这个问题:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:40:39.350

您应该首先修复参照完整性。

1.  如果关系是组合类型，则删除孤立行
2.  否则将 fk 字段更新为 null

之后，您的操作将正常工作。

附加信息：

如果列是`NOT NULL`，则表示此关系为 1*。在这种情况下，您必须在父表中添加一个虚拟行（例如，“VIRTUAL PARENT”行）并将所有指向不存在的父级的 fks 更新为该行。这将允许您稍后继续处理数据，而且可以轻松地检索它们。

如果您认为 1* 没有必要（0* 对于您的技术/应用层来说就足够了），那么只需将该列设置为可为空。

# hibernate - 带有连字符的字符串的休眠限制引发断言失败异常

> ID：12430085
> 
> 赞同：0
> 
> 时间：2012-09-14T18:33:15.563
> 
> 标签：hibernate, restrictions

我正在尝试使用以下 Criteria 查询在 Hibernate 中提取记录。

```
Security result = (Security) getSession().createCriteria(Security.class)
        .add(  Restrictions.eq("symbol", symbol) ).uniqueResult(); 
```

symbol 属性是唯一的varchar 类型（股票代码），symbol 参数是String。

通常这工作得很好，但只要符号在名称中包含连字符，例如“CU”，我就会得到一个 AssertionFailure 异常。

知道我做错了什么或如何解决吗？

* * *

一些背景......

这发生在一个长期交易中，我在其中存储来自纽约证券交易所和纳斯达克的大量股票（证券）的日内统计数据（从雅虎提取的股票的当前价格）。

到此为止，已有数百只证券通过了循环。它们已被“保存”，但交易尚未提交。我在缓冲区（？）满之前把它关掉了。只有当涉及符号中带有连字符的证券时，它才会抛出此异常。

这是调用参数....

```
security = securityDAO.findBySymbol(record[0]); 
```

SecurityDAO 中的完整方法......

```
public Security findBySymbol(String symbol){
    log.debug("finding Security by symbol");
    try{

        Security result = 
            (Security) getSession().createCriteria(Security.class)
        .add(  Restrictions.eq("symbol", symbol)).uniqueResult();

        if (result == null)
            return null;

        return result;
    } catch (RuntimeException re) {
        log.error("Failed to find security by symbol.", re);
        throw re;
    }
} 
```

抛出的异常...

```
org.hibernate.AssertionFailure: null id in com.securityscanner.hibernate.IntradayStat entry (don't flush the Session after an exception occurs)
at org.hibernate.event.def.DefaultFlushEntityEventListener.checkId(DefaultFlushEntityEventListener.java:78)
at org.hibernate.event.def.DefaultFlushEntityEventListener.getValues(DefaultFlushEntityEventListener.java:187)
at org.hibernate.event.def.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:143)
at org.hibernate.event.def.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:219)
at org.hibernate.event.def.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:99)
at org.hibernate.event.def.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:58)
at org.hibernate.impl.SessionImpl.autoFlushIfRequired(SessionImpl.java:997)
at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1590)
at org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:306)
at org.hibernate.impl.CriteriaImpl.uniqueResult(CriteriaImpl.java:328)
at com.securityscanner.hibernate.SecurityDAO.findBySymbol(SecurityDAO.java:187)
at com.securityscanner.ScanStatsTask.storeCurrentStats(ScanStatsTask.java:196)
at com.securityscanner.ScanStatsTask.run(ScanStatsTask.java:99)
at java.util.TimerThread.mainLoop(Timer.java:512)
at java.util.TimerThread.run(Timer.java:462) 
```

安全性扩展 AbstractSecurity.................................................

/

```
**
 * AbstractSecurity entity provides the base persistence definition of the
 * Security entity. @author MyEclipse Persistence Tools
 */

public abstract class AbstractSecurity implements java.io.Serializable {

    // Fields

    private Integer securityId;
    private Exchange exchange;
    private String name;
    private String symbol;
    private String securityType;
    private String description;
    private Boolean skip;
    private Set dailyStats = new HashSet(0);
    private Set intradayStats = new HashSet(0);

    // Constructors

    /** default constructor */
    public AbstractSecurity() {
    }

    /** full constructor */
    public AbstractSecurity(Exchange exchange, String name, String symbol,
            String securityType, String description, Boolean skip,
            Set dailyStats, Set intradayStats) {
        this.exchange = exchange;
        this.name = name;
        this.symbol = symbol;
        this.securityType = securityType;
        this.description = description;
        this.skip = skip;
        this.dailyStats = dailyStats;
        this.intradayStats = intradayStats;
    }

    // Property accessors

    public Integer getSecurityId() {
        return this.securityId;
    }

    public void setSecurityId(Integer securityId) {
        this.securityId = securityId;
    }

    public Exchange getExchange() {
        return this.exchange;
    }

    public void setExchange(Exchange exchange) {
        this.exchange = exchange;
    }

    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getSymbol() {
        return this.symbol;
    }

    public void setSymbol(String symbol) {
        this.symbol = symbol;
    }

    public String getSecurityType() {
        return this.securityType;
    }

    public void setSecurityType(String securityType) {
        this.securityType = securityType;
    }

    public String getDescription() {
        return this.description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public Boolean getSkip() {
        return this.skip;
    }

    public void setSkip(Boolean skip) {
        this.skip = skip;
    }

    public Set getDailyStats() {
        return this.dailyStats;
    }

    public void setDailyStats(Set dailyStats) {
        this.dailyStats = dailyStats;
    }

    public Set getIntradayStats() {
        return this.intradayStats;
    }

    public void setIntradayStats(Set intradayStats) {
        this.intradayStats = intradayStats;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T07:12:57.300

帕特里克，错误不在选择中，而是在之前的某个地方。

Hibernate 保留所有更新或创建的对象的列表，当您刷新会话或执行任何其他强制刷新的操作（例如选择）时，它会将所有脏对象保存到数据库中。

From the stack trace, it looks like you have saved / updated a new instance of IntradayStat without an id and hibernate is expecting one.

# sql - 视图中的条件选择

> ID：12430090
> 
> 赞同：0
> 
> 时间：2012-09-14T18:33:50.977
> 
> 标签：sql, tsql, view

我的数据库 ( `MSSQL`) 中有一个视图需要 1 分钟以上才能输出结果。由于这需要很长时间，我让用户能够查看实时数据或缓存数据。我通过从视图中生成数据并每小时将其插入表中并通过在 use_cached = 0 或 1 上定义配置变量来做到这一点。

假设视图称为 v_foo，缓存表称为 t_bar。我想创建另一个从 v_foo if 中选择`use_cached = 0`并从 t_bar if 中选择的视图`use_cached = 1.`

我尝试了类似的东西

```
Create view v_final as 
select * from v_foo
where (select count(*) from config where id = 'use_cache' and value = 1) = 0
UNION ALL
select * from t_bar
where (select count(*) from config where id = 'use_cache' and value = 1) = 1 
```

但这会导致始终计算来自联合的两个查询，即使其中一个不返回任何行。使用函数也是一个不太好的解决方案，因为为了使用 IF 条件返回一个表，我必须声明一个临时表并且仅仅填充它需要将近 17 秒。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T19:09:08.213

例如，您可以将存储过程与以下代码一起使用：

```
if (exists (select * from config where id = 'use_cache' and value = 1))
    select * from t_bar
else
    select * from v_foo 
```

# jquery-ui-tabs - 显示 jquery ui 选项卡时如何执行操作

> ID：12430091
> 
> 赞同：0
> 
> 时间：2012-09-14T18:33:53.270
> 
> 标签：jquery-ui-tabs

显示选项卡时如何执行操作？

我已经尝试了[http://jqueryui.com/demos/tabs/#event-show](http://jqueryui.com/demos/tabs/#event-show)中的示例，但似乎没有看到我做错了什么。

```
$( "#General_Files" ).bind( "tabsshow", function(event, ui) {
  console.log('Performing action here');
}); 
```

其中 General_Files 是选项卡的 ID。

我正在使用 jquery-ui-1.8.21 和 jquery-1.7.2。

谢谢 h0tw1r3

解决方案：这是我如何让它工作的。

```
<div id="tabwidget">
    <ul><li><a href="#General_Files">General Files</a></li></ul>
    <div id="General_Files">content</div>
</div> 
```

以下工作。

```
$( "#tabwidget" ).bind( "tabsshow", function(event, ui) {
  console.log('Performing action here');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:45:17.460

> General_files 是选项卡的 ID。

更改为选项卡小部件的 ID 并用于`ui.panel`访问函数中的实际选项卡。

# groovy - 如何调用 Groovy 覆盖的名为 getProperties() 的可变 Java 方法

> ID：12430098
> 
> 赞同：4
> 
> 时间：2012-09-14T18:34:38.353
> 
> 标签：groovy

我有一个带有`.getProperties()`方法的 Java 类，但是在 Groovy 中调用该方法时，它会从[Groovy Beans 魔术](http://groovy.codehaus.org/api/groovy/lang/MetaClass.html#getProperties%28%29)`LinkedHashMap`返回一个属性，而不是我的 Java 类定义的 getProperties 方法。

如何调用我的`getProperties()`方法而不是 Groovy 方法？

我的 Java 代码（简化）：

```
import java.util.*;

public class MyObject {
    private Collection<Property> properties;

    private static class Property {
        public String value;

        public Property(String value) {
            this.value = value;
        }

        public String toString() {
            return String.format("Property: %s", this.value);
        }
    }

    private static interface PropertyFilter {
        boolean passes(String value);
    }

    public static class StartsWithPropertyFilter implements PropertyFilter {
        public String prefix;

        public StartsWithPropertyFilter(String prefix) {
            this.prefix = prefix;
        }

        public boolean passes(String value) {
            if(value == null)
                return false;
            return value.startsWith(prefix);
        }
    }

    public MyObject() {
        this(new ArrayList<Property>());
    }

    public MyObject(Collection<Property> myProperties) {
        this.properties = myProperties;
    }

    public void addProperty(String value) {
        this.properties.add(new Property(value));
    }

    public Collection<Property> getProperties(PropertyFilter... filters) {
        Collection<Property> ret = new ArrayList<Property>();
        for(Property prop : properties) {
            boolean passes = true;
            for(PropertyFilter filter : filters) {
                if(!filter.passes(prop.value)) {
                    passes = false;
                    break;
                }
            }
            if(passes) {
                ret.add(prop);
            }
        }
        System.out.println("Java getProperties()");
        return ret;
    }

    public static void main(String[] args) {
        MyObject obj = new MyObject();
        obj.addProperty("Fast");
        obj.addProperty("Strong");
        obj.addProperty("Furious");
        System.out.println(obj.getProperties());
        System.out.println(obj.getProperties(new MyObject.StartsWithPropertyFilter("F")));
    }
} 
```

我的 Groovy 代码：

```
MyObject obj = new MyObject()
obj.addProperty("Fast")
obj.addProperty("Strong")
obj.addProperty("Furious")
println obj.getProperties()
println obj.getProperties(new MyObject.StartsWithPropertyFilter("F")) 
```

运行这个：

```
javac MyObject.java && groovy Run.groovy && echo && java MyObject 
```

我得到这个输出：

```
[class:class MyObject]
Java getProperties()
[Property: Fast, Property: Furious]

Java getProperties()
[Property: Fast, Property: Strong, Property: Furious]
Java getProperties()
[Property: Fast, Property: Furious] 
```

我的 Groovy 版本是最近的版本（2.0.1）：

```
$ groovy -version
Groovy Version: 2.0.1 JVM: 1.6.0_27 Vendor: Sun Microsystems Inc. OS: Linux 
```

但我最初在 1.8.5 上看到了这个问题，我相信是的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:14:30.900

我没有看到相同的行为。使用 Groovy 1.8.5，如果我将其编译为 Java：

```
import java.util.*; 

public class MyClass {
    private Collection<String> myProperties;

    public MyClass() {
         this.myProperties = new ArrayList<String>();
    }

    public MyClass(Collection<String> myProperties) {
         this.myProperties = myProperties;
    }

    public Collection<String> getProperties() {
         System.err.println("java getProperties");
         return this.myProperties;
    }
} 
```

并运行这个 Groovy 脚本：

MyClass myClass = new MyClass() println myClass.getProperties()

输出是：

```
bash-3.2$ javac MyClass.java 
bash-3.2$ groovy Test.groovy 
java getProperties
[]
bash-3.2$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-16T13:56:47.883

这可能不再相关，但只需稍作改动，您就可以做到这一点：

```
obj.getProperties([] as MyObject.PropertyFilter[]) 
```

变化是 PropertyFilter 接口不能是私有的。

# prism - 通用用户控制中的 Prism 事件聚合器

> ID：12430099
> 
> 赞同：2
> 
> 时间：2012-09-14T18:34:41.363
> 
> 标签：prism, eventaggregator

在我的 wpf 应用程序中，我有几个用户控件，其中一个是用于选择特定数据类型的 TreeView。当 selectedItem 发生变化时，我会发布一个 selectionChanged 事件（使用 Prism 的 EventAggregator），订阅者将收到此事件。到目前为止，一切都很好。

现在，我开始在新视图中使用相同的用户控件，实际上是在新窗口中。当从新窗口触发 selectionChanged 事件时，两个订阅都会被触发。我想指定事件的发送者，以便订阅者可以检查事件的对象。有很多方法可以做到这一点，但到目前为止我还没有喜欢的方法。

所以问题就出来给你们了，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:57:07.610

实现这一点的最简单方法是将发送者添加到您发布的事件参数中。

```
public class SelectionChangedEventArgs
{
    public object Sender { get; set; }

    // Other properties (e.g. SelectedItem, etc.)
} 
```

然后正如您所说，您可以轻松地检查发件人以了解您是否应该处理该事件。Prism 已经提供了这样的功能，具有以下重载`Subscribe`：

```
public virtual SubscriptionToken Subscribe(Action<TPayload> action,
                                           ThreadOption threadOption,
                                           bool keepSubscriberReferenceAlive,
                                           Predicate<TPayload> filter); 
```

因此，您实际上可以提供一个`Sender`在订阅时检查属性的过滤器，因此只有在满足此条件时才会调用您的处理程序。

# drupal - Drupal 搜索 - 客户

> ID：12430100
> 
> 赞同：1
> 
> 时间：2012-09-14T18:34:41.813
> 
> 标签：drupal, search, drupal-7, ranking

您是否在 Drupal 搜索中实施了自定义评分或排名因素？我喜欢 Drupal 搜索，但我需要添加我的自定义排名因素以获得更好的结果。请帮忙！

# php - 如何将字符串值从php页面发送到java脚本页面

> ID：12430102
> 
> 赞同：-2
> 
> 时间：2012-09-14T18:34:57.603
> 
> 标签：php, javascript

我将字符串值存储在一个 php 变量中。我想在单击图像时将此值发送到函数。这是代码

```
userfn.php

$actvitycode = "AG001";
<img src="phpimages/addicon.gif" onclick="showData('.$actvitycode.')"></img>

getdata.js

function showData(actcode)
{
  alert(actcode);
  document.getElementById("tasklist").value = actcode;
} 
```

问题是，在图像上单击该函数没有调用。仅供参考：如果我在 $actvitycode 中存储整数值（例如：2342），则成功调用该函数并且警报显示结果。仅字符串值的问题。我尝试了几种语法，例如

```
onclick="showData("'.$actvitycode.'")"
onclick="showData($actvitycode)" 
```

但没有一种语法给出结果。请给我正确的语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:37:01.257

您必须使用以下[`echo`](http://php.net/manual/en/function.echo.php)命令：

```
<?php $actvitycode = "AG001"; ?>
<img src="phpimages/addicon.gif" onclick="showData('<?php echo $actvitycode; ?>')"></img> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T18:37:21.877

```
<?php 
$actvitycode = "AG001";
// close php tag ?>
<img src="phpimages/addicon.gif" onclick="showData('<?php echo $actvitycode ?>')"></img> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T18:43:54.553

您正在尝试`php`在`javascript`. 这是不可能的，因为`javascript`客户端（换句话说在客户端浏览器中执行）和`php`服务器端（=在服务器上执行）都是不可能的。

```
<img src="phpimages/addicon.gif" onclick="showData('<?php echo $actvitycode ?>')"></img> 
```

应该在这种情况下工作。

请记住，`<?php ?>`标记中的代码在发送到客户端之前（例如`apache`）在服务器上执行，而其余标记和代码以及服务器端代码的结果“按原样”发送到客户端显示（在 html 或 css 的情况下）或执行（在脚本的情况下 - 例如 javascript ）。

该代码实际上会生成一个 javascript 代码 - 如果`$activity = 'foo'`，代码会在 showData 函数调用中生成一个参数常量：

```
<img src="phpimages/addicon.gif" onclick="showData('foo')"></img> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T18:51:39.343

只需这样做：

PHP 文件：

```
<? $actvitycode = "AG001";?>
<img src="http://www.kafkabrigade.org.uk/wp-content/uploads/2011/07/button-pic.jpg" onclick="showData('<?=$actvitycode?>')"></img>

<? $actvitycode = "AG002";?>
<img src="http://www.kafkabrigade.org.uk/wp-content/uploads/2011/07/button-pic.jpg" onclick="showData('<?=$actvitycode?>')"></img>

<input type="input" id="tasklist" value=""> 
```

JS文件：

```
<script type="text/javascript" charset="utf-8">
    function showData(actcode) {
        alert(actcode);
        document.getElementById("tasklist").value = actcode;
    }
</script> 
```

所以在 ')"> $actvitycode 中必须插入或者 as 或者 as 。其实是一样的。

如果您有任何问题，请写...

# java - java中的字符串空构造函数

> ID：12430112
> 
> 赞同：12
> 
> 时间：2012-09-14T18:35:43.810
> 
> 标签：java, string

我正在研究字符串 API，突然我遇到了一个字符串空构造函数，即我们可以使用构造一个空字符串对象`String s = new String()`

我想知道它有什么用吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T18:39:46.060

当然.....

`String s = new String();`

**将在堆上创建一个非文字字符串对象，该对象**将**被**垃圾收集。

然而

`String s = "" ;`

**将创建一个 String Literal**。如果它可以通过默认加载​​器访问，则永远**不会被垃圾收集。**

请参阅下面的此链接到我提出的问题。这可能与您的问题没有直接关系，但它肯定会帮助您牢牢掌握这个概念。

[字符串字面量池是对字符串对象的引用的集合，还是对象的集合](https://stackoverflow.com/questions/11700320/is-string-literal-pool-a-collection-of-references-to-the-string-object-or-a-co)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T18:38:37.933

它创建空字符串，这似乎有一些有限的用途。

如果您将通过连接来构建 a`String`并且不使用 eg `StringBuiler`，则您的代码可以从以下内容之一开始。

```
String result = new String();
String result = "";
String result = "first part of string";

// ...
result += "append to the result"; 
```

前两个**不**等价，您应该更喜欢初始化 with ，`""`因为这可以利用[string interning](http://en.wikipedia.org/wiki/String_interning)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-14T19:06:31.337

小例子......字符串可以被垃圾收集

```
System.out.println(1 + new String() + 2); 
```

代替

```
System.out.println(1 + "" + 2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T18:46:04.383

根据文档，此构造函数创建一个空序列。

```
public String()

Initializes a newly created String object so that it represents an empty character sequence. Note that use of this constructor is unnecessary since Strings are immutable. 
```

如果你想要一个空序列，这是有道理的。

但通常情况下，在对它进行更改之前没有必要使用空构造函数，因为您没有更改字符串。实际上，例如，当您使用运算符 += 进行更改时，您正在创建另一个不可变字符串，而不是更改一个。

检查关于这个主题的这个问题：[字符串对象如何工作（如不可变对象）？](https://stackoverflow.com/questions/2382164/how-do-string-objects-work-like-immutable-objects)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T18:50:40.777

## 先介绍一下背景

因为 Java 中的字符串是不可变的，所以它们也是“interned”——这意味着加载的类中的所有*字符串文字*都保存在一个池中，因此通常每个唯一字符串文字一次在内存中只有一个实例。它是*享元模式*的一种应用，类似的池也用于 Integer 和其他原始包装对象（但仅限于有限数量的小值）。

由于这种机制，通常可以对字符串文字（甚至来自不同的类）进行身份比较（尽管`equals`在比较字符串时应始终使用方法以确保安全性和一致性）：

```
System.out.println("hello" == "hello"); // true 
```

现在，如果您使用默认字符串构造函数，您将获得一个空字符串的实例，但它是一个**新**实例，如 JavaDoc 中所述：

> 初始化一个新创建的 String 对象，使其表示一个空字符序列。请注意，由于字符串是不可变的，因此不需要使用此构造函数。

这样的新实例与实习的空字符串不同，导致：

```
System.out.println(new String() == ""); // false 
```

但正如我所说，只有*字符串文字*会被自动实习——这意味着由 StringBuilders 手动创建的字符串、从 char 数组等创建的字符串不会被实习。您可以使用[String.intern()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#intern%28%29)方法手动将此类字符串放入池中。

## 现在来看一些真实的场景

好吧，这一切确实很好，但我还没有回答**为什么这个构造函数存在**。好吧，Java 字符串只是*char 数组*的智能包装器，一些不同的字符串对象可以共享它们的内部数组。

如果我创建了一个很长的字符串（例如通过从流中读取），那么这个实例不会被实习（如上所述），因此在引用它的变量超出范围后它将被垃圾收集。但如果这样做：

```
String longString = readVeryLongString();
String shortString = longString.subString(0, 10); 
```

...那么新的`shortString`将不会从 中复制前 10 个字符`longString`并将它们放入自己的新 char 数组中。不，它将引用原始数组，仅使用其中的前 10 个字符。

现在，如果 shortString 变量具有更长的生命周期（例如放入某个静态上下文中），那么底层 char 数组**将不会被垃圾收集**（即使原始`longString`变量已经超出范围）。**这是在 Java 中创建内存泄漏的方法之一。**

现在，默认的字符串构造函数来拯救了！如果我将上面的代码更改为：

```
String longString = readVeryLongString();
String shortString = new String(longString.subString(0, 10)); 
```

...然后`shortString`将是一个新的字符串实例，它通过从`subString`方法返回的原始字符串中仅复制 10 个所需的字符来创建一个新的内部字符数组。

* * *

一篇很好的文章说明了这个主题：

[http://illya-keeplearning.blogspot.cz/2009/03/java-string-internals.html](http://illya-keeplearning.blogspot.cz/2009/03/java-string-internals.html)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-14T18:43:50.693

要创建一个空字符串，调用默认构造函数为 String s new String();

将创建一个没有字符的 String 实例。

# node.js - 如何在 MongoDB 中为 NodeJS Express 应用程序存储站点配置？

> ID：12430115
> 
> 赞同：6
> 
> 时间：2012-09-14T18:35:54.103
> 
> 标签：node.js, mongodb, express, mongoose, pug

我有一个使用 MongoDB 和 Jade 模板语言在 NodeJS 0.8.8 上运行的 Expressjs 应用程序，我希望允许用户配置许多站点范围的演示选项，例如页面标题、徽标图像等。

如何将这些配置选项存储在 mongoDB 数据库中，以便在应用程序启动时读取它们，在应用程序运行时对其进行操作，并将它们显示在玉模板中？

这是我的一般应用程序设置：

```
var app = module.exports = express();
global.app = app;
var DB = require('./accessDB');
var conn = 'mongodb://localhost/dbname';
var db;

// App Config
app.configure(function(){
   ...
});

db = new DB.startup(conn);

//env specific config
app.configure('development', function(){
    app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
}); // etc

// use date manipulation tool moment
app.locals.moment = moment;

// Load the router
require('./routes')(app); 
```

到目前为止，我已经为“siteConfig”集合创建了一个名为“Site”的模型，并且我在 accessDB.js 中有一个名为 getSiteConfig 的函数，它运行 Site.find()... 以检索集合中一个文档中的字段。

所以这是问题的症结所在：我应该如何将这些字段注入到 express 应用程序中，以便它们可以在整个站点中使用？我应该遵循与 moment.js 工具相同的模式吗？像这样：

```
db.getSiteConfig(function(err, siteConfig){
  if (err) {throw err;}
  app.locals.siteConfig = siteConfig;
}); 
```

如果不是，那么正确的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-15T14:05:15.507

考虑使用快速中间件来加载站点配置。

```
app.configure(function() {
  app.use(function(req, res, next) {
    // feel free to use req to store any user-specific data
    return db.getSiteConfig(req.user, function(err, siteConfig) {
      if (err) return next(err);
      res.local('siteConfig', siteConfig);
      return next();
    });
  });
  ...
}); 
```

抛出错误是一个非常糟糕的主意，因为它会使您的应用程序崩溃。所以`next(err);`改用。它会将您的错误传递给 express `errorHandler`。

如果您已经验证了您的用户（例如在以前的中间件中）并将其数据存储到`req.user`中，您可以使用它从 db.config 获取正确的配置。

但是在 express 中间件中使用你的`getSiteConfig`函数时要小心，因为它会暂停 express 对请求的进一步处理，直到接收到数据。

您应该考虑在快速会话中缓存`siteConfig`以加速您的应用程序。在快速会话中存储特定于会话的数据是绝对安全的，因为用户无法访问它。

以下代码演示了`siteConfig`在 express sessionn 中缓存的想法：

```
app.configure(function() {
  app.use(express.session({
    secret: "your sercret"
  }));
  app.use(/* Some middleware that handles authentication */);
  app.use(function(req, res, next) {
    if (req.session.siteConfig) {
      res.local('siteConfig', req.session.siteConfig);
      return next();
    }
    return db.getSiteConfig(req.user, function(err, siteConfig) {
      if (err) return next(err);
      req.session.siteConfig = siteConfig;
      res.local('siteConfig', siteConfig);
      return next();
    });
  });
  ...
}); 
```

# java - 将 AS3 OrderedObject 传递给 Java 后端

> ID：12430117
> 
> 赞同：0
> 
> 时间：2012-09-14T18:36:11.573
> 
> 标签：java, actionscript-3, apache-flex, flex4.5

问题是，如何？

一个 AS3 有序对象应该保持属性插入顺序，所以我通过一个 spark 远程对象传递有序对象并将其作为 LinkedHashMap 接收，但是 for each 循环以混乱的顺序读取 em。

我还尝试在过去 3 天的空闲时间找到有关通过 OrededObjects 的文档，但到目前为止没有任何运气=/

我一般不追求功能，我只想知道这是否可能。

简短的例子：

柔性

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx">
    <fx:Declarations>    
        <s:RemoteObject
            id="exampleRO"
            destination="example"/>
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import mx.utils.OrderedObject;
            private var oobject:OrderedObject=new OrderedObject();
            private function sendObject(){
                oobject["key1"]="value1";
                oobject["key2"]="value2";
                oobject["key3"]="value3";
                oobject["key4"]="value4";
                exampleRO.send(oobject);
            }
        ]]>
    </fx:Script>
    <s:Button click="sendObject()"/>
</s:Application> 
```

Java 后端

```
import java.util.Iterator;
import java.util.LinkedHashMap;
import java.util.Map;

import org.apache.log4j.Logger;

public class somename{
    private static Logger logger = Logger.getLogger(somename.class);
    public void send(LinkedHashMap<String, Object> oobject){
        Iterator it;
        Map.Entry e;
        for(it=oobject.entrySet().iterator(); it.hasNext();){
            e = (Map.Entry)it.next();
            logger.info("oobject key: "+  e.getKey() + " value:" + e.getValue());
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:36:18.997

刚刚开始工作=）

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx">
    <fx:Declarations>    
        <s:RemoteObject
            id="exampleRO"
            destination="example"/>
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import org.as3commons.collections.LinkedMap;
            private var oobject:LinkedMap=new LinkedMap();
            private function sendObject(){
                oobject.add("key1","value1");
                oobject.add("key2","value2");
                oobject.add("key3","value3");
                oobject.add("key4","value4");
                oobject.add("key5","value5");
            }
        ]]>
    </fx:Script>
    <s:Button click="sendObject()"/>
</s:Application> 
```

# jquery - Twitter Bootstrap 轮播：获取幻灯片的方向

> ID：12430119
> 
> 赞同：8
> 
> 时间：2012-09-14T18:36:28.207
> 
> 标签：jquery, twitter-bootstrap, carousel

如何确定轮播是向左滑动还是向右滑动？我查看了事件幻灯片和幻灯片的文档，但都没有提供有关幻灯片方向的任何相关信息。

我还检查了传递给滑动事件的事件处理程序的事件对象，但我似乎也找不到任何有用的线索。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-08T22:19:22.633

从 3.0.0-rc1 开始，以下工作可以访问活动元素、下一个元素、从索引到索引和滑动方向。*根据需要随意降低选择器的特异性。*

```
carousel.on('slide.bs.carousel', function (event) {

  var active = $(event.target).find('.carousel-inner > .item.active');
  var from = active.index();
  var next = $(event.relatedTarget);
  var to = next.index();
  var direction = event.direction;

}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-15T01:26:45.453

因此，据我所知，twitter bootstrap 并没有显示轮播通过事件对象移动的方向。但是，它确实为幻灯片中涉及的元素添加了“右”或“左”类。

所以基本上我看到了 2 个选项。在事件对象中暴露方向或在元素上查找右类或左类。

**选项1：**

您将不得不修改引导轮播代码。在轮播中，滑动功能变化：

```
e = $.Event('slide') 
```

至

```
e = $.Event('slide', {direction: direction}) 
```

（在 bootstrap.js 的普通版本中的第 337-340 行附近）

然后您可以通过以下方式获得方向：

```
var $carousel = $('.carousel');
$carousel.carousel();

$carousel.bind('slide', function(e) {
  console.log("e.direction = " + e.direction);
}); 
```

或**选项 2：**

等待一段时间，将 css “left” 或 “right” 类添加到元素中，然后检查该类是否存在。

```
var $carousel = $('.carousel');
$carousel.carousel();

$carousel.bind('slide', function(e) {

  setTimeout( function(){
    var left = $carousel.find('.item.active.left');
    var right = $carousel.find('.item.active.right');
    if(left.length > 0) {
      console.log('left');
    }
    else if(right.length > 0) {
      console.log('right');
    }
  }, 500);
}); 
```

需要超时，因为在触发事件和设置左右类之间存在竞争条件。显然这是一个 hackyer 解决方案，但您不必修改引导代码。可能还有其他选择，但我觉得选项 1 是最好的。

**编辑：**在最新版本的 bootstrap css (2.1.1) 中，选项 1 的行更改为：

（第 340 行）来自：

```
, e = $.Event('slide', {
  relatedTarget: $next[0]
}) 
```

至：

```
, e = $.Event('slide', {
  relatedTarget: $next[0],
  direction: direction
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-21T14:43:32.813

For twitter bootstrap 3 :

```
$('#myCarousel').on('slide.bs.carousel', function (event) {
    alert(event.direction);
}); 
```

# ios - 我的精灵从 Y 轴出来

> ID：12430122
> 
> 赞同：0
> 
> 时间：2012-09-14T18:36:40.560
> 
> 标签：ios, cocos2d-iphone

我已经创建了一个敌人在屏幕上随机移动的动作，但有时它会从 Y 轴移动出来，我该如何让精灵在移动时不会从 Y 轴出来？？？？ ??

这是随机移动精灵的代码：

```

[敌人 runAction:[CCSequence 动作:[CCMoveBy actionWithDuration:2.0 位置:ccp(-winSize.width*0.4, 0)],
                              [CCMoveBy actionWithDuration:randomValueBetween(1.0, 0.3)
                                                  位置：ccp（randomValueBetween（winSize.width*0.2，-winSize.width*0.2），
                                                                       randomValueBetween(winSize.height*0.2, -winSize.height*0.2))],
                              [CCDelayTime actionWithDuration:0.5],
                              [CCMoveBy actionWithDuration:randomValueBetween(1.0, 0.3)
                                                  位置：ccp（randomValueBetween（winSize.width*0.2，-winSize.width*0.2），
                                                                       randomValueBetween(winSize.height*0.2, -winSize.height*0.2))],
                              [CCDelayTime actionWithDuration:0.5],
                              [CCMoveBy actionWithDuration:randomValueBetween(1.0, 0.3)
                                                  位置：ccp（randomValueBetween（winSize.width*0.2，-winSize.width*0.2），
                                                                       randomValueBetween(winSize.height*0.2, -winSize.height*0.2))],
                              [CCDelayTime actionWithDuration:0.5],
                              [CCMoveBy actionWithDuration:randomValueBetween(1.0, 0.3)
                                                  位置：ccp（randomValueBetween（winSize.width*0.2，-winSize.width*0.2），
                                                                       randomValueBetween(winSize.height*0.2, -winSize.height*0.2))],
                              [CCDelayTime actionWithDuration:0.5],
                              [CCMoveBy actionWithDuration:randomValueBetween(1.0, 0.3)
                                                  位置：ccp（randomValueBetween（winSize.width*0.2，-winSize.width*0.2），
                                                                       randomValueBetween(winSize.height*0.2, -winSize.height*0.2))],
                              [CCDelayTime actionWithDuration:0.5],
                              [CCMoveBy actionWithDuration:randomValueBetween(1.0, 0.3)
                                                  位置：ccp(randomValueBetween(-winSize.width*0.3,winSize.width*0.3),
                                                               randomValueBetween(winSize.height*0.3, -winSize.height*0.3))],
                              [CCDelayTime actionWithDuration:0.5],
                              [CCMoveBy actionWithDuration:randomValueBetween(1.0, 0.3)
                                                  位置：ccp(randomValueBetween(-winSize.width*0.2,winSize.width*0.2),
                                                               randomValueBetween(winSize.height*0.2, -winSize.height*0.2))],
                              [CCDelayTime actionWithDuration:0.5],
                              [CCMoveBy actionWithDuration:randomValueBetween(1.0, 0.3)
                                                  位置：ccp(randomValueBetween(-winSize.width*0.3,winSize.width*0.3),
                                                               randomValueBetween(winSize.height*0.3, -winSize.height*0.3))],
                              [CCDelayTime actionWithDuration:0.5],
                              [CCMoveBy actionWithDuration:randomValueBetween(1.0, 0.3)
                                                  位置：ccp(randomValueBetween(-winSize.width*0.2,winSize.width*0.2),
                                                               randomValueBetween(winSize.height*0.2, -winSize.height*0.2))],
                              [CCDelayTime actionWithDuration:0.5],
                              [CCMoveBy actionWithDuration:randomValueBetween(1.0, 0.3)
                                                  位置：ccp(randomValueBetween(-winSize.width*0.3,winSize.width*0.3),
                                                               randomValueBetween(winSize.height*0.3, -winSize.height*0.3))],
                              [CCDelayTime actionWithDuration:0.5],
                              [CCMoveBy actionWithDuration:randomValueBetween(1.0, 0.3)
                                                  位置：ccp(randomValueBetween(-winSize.width*0.2,winSize.width*0.2),
                                                               randomValueBetween(winSize.height*0.2, -winSize.height*0.2))],
                              [CCDelayTime actionWithDuration:0.5],
                              [CCMoveBy actionWithDuration:2.0 位置:ccp(-winSize.width*1.5, 0)],
                              [CCCallFuncN actionWithTarget:self 选择器:@selector(invisNode:)], nil]];

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T08:14:30.430

您无法使用 CCMoveBy 和随机距离阻止精灵离开屏幕。随机偏移总有可能以这样一种方式加起来，即精灵沿着任何轴移动很长一段距离。

堆叠多个随机 CCMoveBy 动作并不能让您控制精灵最终将在哪里结束，或者它沿途移动到哪里。

您应该将序列拆分为单独的“等待和移动”序列。这样，您可以生成随机偏移，并在创建 CCMoveBy 之前将它们添加到精灵位置以测试生成的位置是否会在屏幕外。在这种情况下，将值限制在屏幕内的某个位置。

PS：

```
[CCCallFuncN actionWithTarget:self selector:@selector(invisNode:)] 
```

如果这只将精灵设置为不可见，您可以简单地用 CCHide 动作替换它。

# php - 如何防止我的网站中的 XSS 注入？

> ID：12430126
> 
> 赞同：0
> 
> 时间：2012-09-14T18:36:50.523
> 
> 标签：php, mysql, xss

> **可能重复：**
> [如何使用 HTML/PHP 防止 XSS？](https://stackoverflow.com/questions/1996122/how-to-prevent-xss-with-html-php)

我知道在很多网站中，如果你输入：
`<script>alert("xss");</script>`
网站会显示错误。
示例：[http ://www.igossips.com](http://igossips.com)

在搜索框中输入前面的代码。
该网站显示了很多代码。

我怎样才能防止这种情况发生在我自己的网站上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:54:05.783

下面是 XSS 预防的一个很好的概述：

[https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)

# c++ - 在 c++ 中，我可以拥有一个仅在某些条件下具有某些功能的类吗？

> ID：12430128
> 
> 赞同：0
> 
> 时间：2012-09-14T18:37:03.027
> 
> 标签：c++, methods

我有这个代码：

```
class A
{
public:
    A(int _a, int _b = 0) : a(_a), b(_b) {}
    void f(){}
    #if _b == 0
    void g(){}
    #endif

private:
    int a;
    int b;
};

int main()
{
    A x(1);
    x.g();

    return 0;
} 
```

我希望 A 只有当 b 为 0 时才具有 g() 方法。我知道上面的代码不起作用，但我想知道是否有某种方法可以实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T18:38:05.720

不，这些值仅在运行时已知。但是您可以检查函数中的值并进行拟合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T18:55:08.243

您应该使用模板并提供维数作为模板参数（编译时间常数）。然后使用特化来提供不同的接口：

```
class Matrix_base {...};     // common code
template <int Dimensions>
struct Matrix;
template <>
struct Matrix<1> : Matrix_base {
    int operator[]( std::size_t idx ) const {
       // ...
    }
};
template <>
struct Matrix<2> : Matrix_base {
    int operator()( std::size_t idx1, std::size_t idx2 ) const {
       // ...
    }
}
// ...
Matrix<1> v( 10 );
std::cout << v[5];
// v(5,1)                  // error
Matrix<2> m( 10, 20 );
// std::cout << m[5];      // error
std::cout << m(5,1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T18:44:14.340

不，这是不可能的。`b`只有在运行时才知道。`b`如果你调用你的函数并且非零，我建议抛出一个异常。

```
void g()
{
   if(b == 0)
   {
      Exception e("error..."); // Your exception class or a std::exception class
      throw e;
   }

   // The code from here will not be executed
} 
```

# jquery - WordPress中的颜色框部分工作

> ID：12430130
> 
> 赞同：0
> 
> 时间：2012-09-14T18:37:09.367
> 
> 标签：jquery, wordpress, colorbox

我正在尝试在 WordPress 页面上使用 Jack Moore 的 Colorbox。Colorbox 用于使用 iframe 选项调用自定义 PHP 页面。覆盖出现，我还可以看到页面正在根据浏览器状态栏加载，但页面不显示。就像没有创建彩盒一样？

我已经搜索并尝试了我能想到的一切。

[在http://tammylavertyhomes.com/listings/](http://tammylavertyhomes.com/listings/)上链接 HTML

```
<a class="rlpo_button rlpo_button-5 single" href="http://www.royallepageottawa.ca/agents/details-m.php?mls=840202&amp;ret=RES">View More</a> 
```

在页脚

```
<script type="text/javascript">
jQuery.noConflict();
jQuery(document).ready(function($)
{
jQuery('.single').colorbox({iframe:true, width:540, height:750});
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:45:29.810

我也遇到过同样的问题，就是因为colorbox加载后不显示div。

您可以使用该代码修复（修补）此问题：

```
jQuery('.single').colorbox({
  iframe:true, 
  width:540, 
  height:750,
  onComplete: function(){
    jQuery('#colorbox').show();
  }
}); 
```

# java - ksoap2 org.xmlpull.v1.xmlpullparserexception 预期的 start_tag 错误

> ID：12430136
> 
> 赞同：13
> 
> 时间：2012-09-14T18:37:48.580
> 
> 标签：java, android, asp.net, ksoap2, android-ksoap2

下面是我编写的代码，用于验证用户登录凭据。使用 .net 编写的 Web 服务

```
private static final String SOAP_ACTION = "http://tempuri.org/getCredentials";
private static final String OPERATION_NAME = "getCredentials";
private static final String WSDL_TARGET_NAMESPACE = "http://tempuri.org/";
private static final String SOAP_ADDRESS = "http://myStaticIP:portNo/WebSiteName/CommunicationInterface.asmx"; 

SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE, OPERATION_NAME);
request.addProperty("username",Username);
request.addProperty("password", Password);

SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setOutputSoapObject(request);
HttpTransportSE httptransport = new HttpTransportSE(SOAP_ADDRESS);

try
{
    httptransport.call(SOAP_ACTION, envelope);
SoapPrimitive result = (SoapPrimitive) envelope.getResponse();
String value = result.toString();
value_LoginWS = value;
val = value;
login_status = Boolean.valueOf(result.toString());

Log.v("CS return value: -", result.toString());
return value;
}
catch (Exception e) 
{
     Log.v("Exception Soap" , e.toString());
} 
```

排队`"httptransport.call(SOAP_ACTION, envelope)"` 我明白这`exception`句话

```
"org.xmlpull.v1.XmlPullParserException: expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG <html>
@1:7 in java.io.InputStreamReader@41afb3f0)" <br/><br/> 
```

我不知道错误是什么。这段代码非常适合模拟器（更改`staticIP to 10.0.2.2:portNo`）。

请帮我解决这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-06-06T07:42:57.213

以下解决方案经过测试并用于**WCF Web 服务**

如果您收到此**错误**

```
org.xmlpull.v1.XmlPullParserException: expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG <html>
@1:7 in java.io.InputStreamReader@41afb3f0)" 
```

那么可能的机会是您的代码无法访问 Web 服务，因为它没有提供正确的值

```
METHOD_NAME="";
NAMESPACE ="";      
SOAP_ACTION ="";
URL =""; 
```

我努力寻找这些基本但重要的价值观来运行`ksoap2`

```
METHOD_NAME="";
NAMESPACE ="";      
SOAP_ACTION ="";
URL =""; 
```

有各种各样的例子实际上告诉了我这个值背后的理论，那就是如何像明智的 SOAP_ACTION = NAMESPACE + METHOD_NAME 一样生成它们。

我继续尝试各种组合，但没有结果。

像我这样对 WebServices 和 Ksoap2 几乎没有经验并且大部分时间都在使用 JSON 的人实际上感到沮丧，这些值到底是什么以及如何正确获取它们。

通过以下程序后，您将永远不会遇到找出这些值的困难。

运行你的网络服务

**1.网络服务**

它会向您显示一个像这样的窗口。

![图 1 网络服务](../Images/cfc69ee5461d53015fe6f2b8b512854d.png)

**2.WSDL**

现在`WSDL`通过单击选择中标记的链接打开其文件以查看其`WSDL`

它看起来像这样。

![图 2 wsdl](../Images/bbbcc0662b7c2fa8020a9e4b8309a773.png)

**3.获取WebService的命名空间**

现在搜索字符串“ `Namespace`”使用`Ctrl+F`

你会得到这样的东西

![图 3 命名空间](../Images/480a1b90c134748c5878b0bc6427b290.png)

在这里你会注意到我们有`two namespaces`

```
targetNamespace="http://tempuri.org/">
<wsdl:import namespace="iscservices.dedicated.co.za" 
```

现在要考虑哪一个，我们稍后会在以下步骤中找到

现在用哪一个你会发现

**4.获取方法名及其对应的SoapAction**

`"PutRecipeImagesPost"`在这种情况下查找您要访问的方法

![图 4 肥皂作用](../Images/bed0c78bdbce4c2ac05cb04f358a37bc.png)

你会看到这里`SOAP Action`也有这种方法。

就像在`Soap action is NameSpace + Methodname` 和这里一样，我们可以看到它的使用`"iscservices.dedicated.co.za"` ，所以我们将最终确定为我们的`namespace`

**5.获取网址**

寻找字符串`"soap:address location"`

![见下图](../Images/0f30d2619f20e1ee614aac94e4038df5.png)

此属性的值将是您的 URL

所以最终我们得到了所有需要的值。

根据我们的示例的值

```
METHOD_NAME="PutRecipeImagesPost";
NAMESPACE ="iscservices.dedicated.co.za";       
SOAP_ACTION ="iscservices.dedicated.co.za/InterfaceiPhysioIntelWCFService/PutRecipeImagesPost";
URL ="http://10.0.2.2:51809/iPhysioIntelService.svc/second/"; 
```

如果您无法看到上述快照或无法获取这些快照的值，请`WSDl`告诉 `WebService deveoper`修复它。

稍后介绍如何使用 KSoap2

见下面的片段

```
SoapObject req = new SoapObject(NAMESPACE,METHOD_NAME);
            //SoapObject req = new SoapObject(Namespace_Server,MethodName_Server);

    //req.addProperty(KEY, VALUE);
//Key : - parameter name that is there in URL of webservice
//value:- value we want to send to the parameter
    req.addProperty("ImageData", data);
    req.addProperty("login", CommonStaticData.getusername());
    req.addProperty("password",CommonStaticData.getpassword());
    req.addProperty("recipeId",FileID);

    MarshalBase64 mbase = new MarshalBase64();// marshal is used to serialize the byte array

    SoapSerializationEnvelope envelop = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelop.bodyOut = req;
    envelop.encodingStyle = SoapSerializationEnvelope.ENC2001;
    envelop.dotNet = true;
    envelop.setOutputSoapObject(req);

    HttpTransportSE aht = new HttpTransportSE(URL);

    mbase.register(envelop);

    aht.call(SOAP_ACTION,envelop); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-10T17:38:49.963

@Azone 的答案各不相同，但实际上，如果 ksoap 返回回复为

> 预期 START_TAG { ... } 信封（位置：START_TAG <{ ... } ...

指需要不同于它使用的东西。

因此，您需要为 START_TAG "soapenv" 使用相同的命名空间源

ksoap2 库使用默认命名空间

```
 xmlns:v="http://www.w3.org/2003/05/soap-envelope" 
```

所以你的服务器应该保持相同的来源

龙卷风网络服务示例：

```
self._envelope.setAttribute ('xmlns:soapenv', 'http://www.w3.org/2003/05/soap-envelope') 
```

或者您需要将 ksoap 配置为您的服务器的其他方式

*服务器：*

```
self._envelope.setAttribute ('xmlns:soapenv', 'http://schemas.xmlsoap.org/soap/envelope/') 
```

*肥皂：*

```
envelope.env = "http://schemas.xmlsoap.org/soap/envelope/"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-29T15:27:19.110

如果您按照 Azone 的回答中所述使用了、、 和的值`NAMESPACE`，但仍然出现错误，请检查此语句**中的 SOAP 版本：**`URL``SOAP_ACTION``METHOD_NAME`

 **```
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VERXX); 
```

就我而言，我使用了`SoapEnvelope.VER12`，当我将其改回 时`SoapEnvelope.VER11`，错误已解决。

***如何从 WSDL 中查找 SOAP 版本：***

引用[这个答案](https://stackoverflow.com/questions/736845/can-a-wsdl-indicate-the-soap-version-1-1-or-1-2-of-the-web-service#answer-18968668)：

> SOAP 1.1 使用命名空间[http://schemas.xmlsoap.org/wsdl/soap/](http://schemas.xmlsoap.org/wsdl/soap/)
> 
> SOAP 1.2 使用命名空间[http://schemas.xmlsoap.org/wsdl/soap12/](http://schemas.xmlsoap.org/wsdl/soap12/)
> 
> wsdl 能够在同一个wsdl 中同时定义soap 1.1 和soap 1.2 下的操作。如果您需要改进 wsdl 以支持需要soap 1.2（例如 MTOM）的新功能，这很有用，在这种情况下，您不需要创建新服务，只需改进原始服务即可。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T14:07:04.107

我认为这个问题的答案是，在 SOAP_ADDRESS 字符串中，删除 /WebSiteName 部分，它工作正常。我已经在我的 android 设备中对此进行了测试。完美运行。

更正后的字符串应如下所示：

```
private static final String SOAP_ADDRESS = "http://myStaticIP:portNo/CommunicationInterface.asmx"; 
```

其中 CommunicationInterface.asmx 是 Web 服务名称。其他静态变量保持不变。

注意：这在网站托管在 IIS 中时使用。**

# javascript - JSONP 请求返回结果但也会触发 error_callback

> ID：12430140
> 
> 赞同：0
> 
> 时间：2012-09-14T18:38:17.493
> 
> 标签：javascript, google-closure-library

我正在将 Google Closure Library 用于大型网络应用程序。基本上我正在发送一个跨域请求以从服务器获取一些 JSON 数据。数据正确返回，一切正常，但指定为 JSONP.send 方法的 error_callback 的函数仍然触发，我不明白为什么。

[源 JavaScript 文件](http://www.niuzly.com/ajax/niuzly.base.page.index.js)

这是触发 JSONP 请求的代码。

```
JSONPhandler.send({
    action: 'getAllPublishers', start: 0, length: 15},
    goog.bind(function(callback) {
        progressBar.setValue(100);
        goog.style.showElement(progressBarContainer, false);
        goog.dom.append(this.mainViewPublications,
                initItems.call(this, callback));
}, this), errorHandler.displayError('UNKNOWN')); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:05:21.030

如果 JSONP 请求的服务器响应类型不是 application/json，则永远不会触发错误回调:)

# macos - 访问系统的亚麻图案？

> ID：12430141
> 
> 赞同：2
> 
> 时间：2012-09-14T18:38:22.090
> 
> 标签：macos, cocoa, user-interface, systemcolors

Lion 或 Mountain Lion 是否提供系统范围内的访问权限，以访问您如今随处可见的深色亚麻图案？我需要在我的应用程序中使用它，并且真的更喜欢官方的东西而不是我自己的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T19:01:55.690

[10.8 AppKit 发行说明：](http://developer.apple.com/library/mac/#releasenotes/Cocoa/AppKit.html)

> **NSColor**
> 
> 有一个新的 NSColor 类方法来返回应该用于页面背景和显示视图区域的较浅的亚麻颜色：
> 
> [`+ (NSColor *)underPageBackgroundColor;`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSColor_Class/Reference/Reference.html#//apple_ref/doc/uid/20000353-SW19)

如果这不是正确的颜色（你说“深色”，这说“浅色”），你可以从那里着色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T04:33:38.230

也许这会有所帮助：[使用 OS X 亚麻图案作为桌面背景](http://www.macworld.com/article/1165924/use_os_x_linen_pattern_for_desktop_background.html)

# r - 使用 foreach 写入 R 中的单个公共文件

> ID：12430142
> 
> 赞同：3
> 
> 时间：2012-09-14T18:38:24.627
> 
> 标签：r, foreach, parallel-processing

我在 R 中有一个并行进程，应该将每个线程的结果保存到一个公共文件中。但是这样做会产生问题，因为存在数据重叠。我确实在一个数据帧中聚合，最后可以一次写入所有数据，但由于数据很大，我想确保如果系统内存不足或发生其他事情时数据不会丢失。我如何写入一个文件并确保该文件被锁定或数据是异步写入的。我在 Windows 上运行我的代码以防万一，并`doSNOW`用于并行化。

这是主要代码

```
HedgedPortfolio <- data.frame()
cl<-makeCluster(6) 
registerDoSNOW(cl)
no<-length(X)
HedgedPortfolio<-foreach(i=1:no,.combine='rbind') %dopar%
{
  HedgeMain(as.Date(X[i]),InitPnlRecon)
}

stopCluster(cl)
HedgeMain<-function(X,InitPnlRecon)
{    
    OptimizedPort<-.............some computation                               
    write.table(OptimizedPort,file="C:/OptimizedAll.opt",     
                quote=FALSE,append=TRUE,sep=";",
                col.names = FALSE,row.names = FALSE)
    OptimizedPort
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:52:24.370

我不认为 R`write.*`或`cat`函数为使用单个目标文件提供了必要的文件锁定设施。您要么需要访问支持此类设施的数据库，要么需要使用多个文件。从节点终止时增加的弹性要求来看，在我看来，您并不想将其作为紧密耦合的进程运行，而是作为分布式批处理进程运行。[高性能计算任务视图](http://cran.r-project.org/web/views/HighPerformanceComputing.html)中有一个“资源管理器和批处理调度程序”部分，其中一些包听起来适用于此任务：特别是[批处理](http://cran.r-project.org/web/packages/batch/index.html)和[BatchJobs](http://cran.r-project.org/web/packages/BatchJobs/index.html)

最近有一个关于 R-Help 和 HPC-SIG 的讨论可能是相关的。线程从这里开始：

[https://stat.ethz.ch/pipermail/r-help/2012-September/324748.html](https://stat.ethz.ch/pipermail/r-help/2012-September/324748.html)

一些线程描述了一种方法，用于由单独的 CPU 工作人员访问磁盘文件中间的特定点。您仍然需要自己的编码来正确确保您没有覆盖“好数据”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-05T22:40:30.373

太晚了，但是当我为我的代码寻找类似的工具时，我想出了 pbdMPI 包中的 comm.write 函数。根据文档，等级 0 创建文件并写入文件，然后写入其余等级，以便将数据附加到该文件。

# api - 我想让人们使用谷歌帐户登录我的网站

> ID：12430146
> 
> 赞同：-1
> 
> 时间：2012-09-14T18:38:41.703
> 
> 标签：api

好的，我正计划使用 OpenID，并且我已经阅读了 google 的文档并查看了其他有关如何操作的教程。他们都使用此链接[https://www.google.com/accounts/o8/ud](https://www.google.com/accounts/o8/ud)但该链接会引发 400 错误。这个已经不用了？

编辑：[https ://www.google.com/accounts/o8/id](https://www.google.com/accounts/o8/id)

编辑我最终选择了 OAuth 2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:40:45.763

不是[https://www.google.com/accounts/o8/id](https://www.google.com/accounts/o8/id)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T19:56:11.390

因为我在这个项目中使用了 codeigniter，所以我最终选择了[http://hybridauth.sourceforge.net/](http://hybridauth.sourceforge.net/)

# c# - 如何使用 Dataset 将数据插入表中？

> ID：12430151
> 
> 赞同：-1
> 
> 时间：2012-09-14T18:38:49.490
> 
> 标签：c#, mysql, dataset

我在 MYSQL 数据库中有两个表，它们通过计数和名称包含相同的列，我将第一个表中的所有数据都放入 DataSet 但现在如果可能的话，我如何将此 dt 复制到第二个表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:47:11.693

// 只复制新行。

```
DataSet addedDataSet= customerDataSet.GetChanges(DataRowState.Added); 
```

// 复制所有更改。

```
DataSet changeDataSet = customerDataSet.GetChanges(); 
```

//创建完整副本

```
DataSet copyDataSet = customerDataSet.Copy(); 
```

# c - timer_create 在 i386 系统上导致分段错误，但不是 x86_64 系统（linux）

> ID：12430152
> 
> 赞同：0
> 
> 时间：2012-09-14T18:39:08.373
> 
> 标签：c, linux, timer, segmentation-fault, posix

我对这个计时器调用有一个奇怪的问题。它适用于我的测试系统（x64），但是当我将它加载到目标系统中，运行 i386 linux 并在那里编译时，它编译得很好，但会引发分段错误。这是可疑的代码：

```
507: int SwitchData = 0xFF,s, retval = EX_SOFTWARE;
508: struct sigevent sev;
509: struct itimerspec ts;
510: timer_t *tid; 
```

*剪断*

```
517: if(EX_OK != retval)
518: {
519:     fprintf(stderr,"init failed\n");
520:     return EX_SOFTWARE;
521: }
522: //notify via thread
    523:    sev.sigev_notify = SIGEV_THREAD;
    524:    sev.sigev_notify_function = SwitchThreadHandler;
    525:    sev.sigev_notify_attributes = NULL;
    526:    sev.sigev_value.sival_ptr = tid;
    527:    ts.it_interval.tv_sec = 0;
    528:    ts.it_interval.tv_nsec = 200000000;
    529:    if(-1 == timer_create(CLOCK_REALTIME,&sev,tid))
    530:    {
    531:        retval = EX_SOFTWARE;
    532:        fprintf(stderr,"Failed to create timer.");
    533:        return retval;
    534:    }
    535:    timer_settime(tid,0,&ts,NULL); 
```

因此，回溯指向 timer_create 作为原因。测试系统是 Kernel 3.0.0-24-generic，target 是 3.0.0-17-generic。两个系统都是 gcc v4.6.1。他们都在运行 ubuntu 11.10 的安装。

这是 catchsegv 运行时的输出：

```
*** Segmentation fault
Register dump:

EAX: 005c6ff4   EBX: 003daff4   ECX: 00000000   EDX: 00000001
ESI: 003db228   EDI: 00000000   EBP: 09ba00d0   ESP: bf96b2c8

EIP: 003d7058   EFLAGS: 00010292

CS: 0073   DS: 007b   ES: 007b   FS: 0000   GS: 0033   SS: 007b

Trap: 0000000e   Error: 00000007   OldMask: 00000000
ESP/signal: bf96b2c8   CR2: 005c6ff4

FPUCW: ffff037f   FPUSW: ffff0000   TAG: ffffffff
IPOFF: 00000000   CSSEL: 0000   DATAOFF: 00000000   DATASEL: 0000

ST(0) 0000 0000000000000000   ST(1) 0000 0000000000000000
ST(2) 0000 0000000000000000   ST(3) 0000 0000000000000000
ST(4) 0000 0000000000000000   ST(5) 0000 0000000000000000
ST(6) 0000 0000000000000000   ST(7) 0000 0000000000000000

Backtrace:
/lib/i386-linux-gnu/librt.so.1(timer_create+0x208)[0x3d7058]
/home/vislink/aircam/AircamFrontPanel/FrontPanel.c:529(main)[0x8048fd6]
/lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xf3)[0x466113]
??:0(_start)[0x80488c1]

Memory map:

00240000-00257000 r-xp 00000000 08:01 131477 /lib/i386-linux-gnu/libpthread-2.13.so
00257000-00258000 r--p 00016000 08:01 131477 /lib/i386-linux-gnu/libpthread-2.13.so
00258000-00259000 rw-p 00017000 08:01 131477 /lib/i386-linux-gnu/libpthread-2.13.so
00259000-0025b000 rw-p 00000000 00:00 0
003d3000-003da000 r-xp 00000000 08:01 131479 /lib/i386-linux-gnu/librt-2.13.so
003da000-003db000 r--p 00006000 08:01 131479 /lib/i386-linux-gnu/librt-2.13.so
003db000-003dc000 rw-p 00007000 08:01 131479 /lib/i386-linux-gnu/librt-2.13.so
00447000-0044b000 r-xp 00000000 08:01 310504 /usr/local/lib/libmpsse.so
0044b000-0044c000 r--p 00003000 08:01 310504 /usr/local/lib/libmpsse.so
0044c000-0044d000 rw-p 00004000 08:01 310504 /usr/local/lib/libmpsse.so
0044d000-005c5000 r-xp 00000000 08:01 131463 /lib/i386-linux-gnu/libc-2.13.so
005c5000-005c7000 r--p 00178000 08:01 131463 /lib/i386-linux-gnu/libc-2.13.so
005c7000-005c8000 rw-p 0017a000 08:01 131463 /lib/i386-linux-gnu/libc-2.13.so
005c8000-005cb000 rw-p 00000000 00:00 0
00600000-00603000 r-xp 00000000 08:01 131480 /lib/i386-linux-gnu/libSegFault.so
00603000-00604000 r--p 00002000 08:01 131480 /lib/i386-linux-gnu/libSegFault.so
00604000-00605000 rw-p 00003000 08:01 131480 /lib/i386-linux-gnu/libSegFault.so
0081f000-0083d000 r-xp 00000000 08:01 131460 /lib/i386-linux-gnu/ld-2.13.so
0083d000-0083e000 r--p 0001d000 08:01 131460 /lib/i386-linux-gnu/ld-2.13.so
0083e000-0083f000 rw-p 0001e000 08:01 131460 /lib/i386-linux-gnu/ld-2.13.so
0093c000-00942000 r-xp 00000000 08:01 308124 /usr/local/lib/libftdi.so.1.20.0
00942000-00943000 r--p 00005000 08:01 308124 /usr/local/lib/libftdi.so.1.20.0
00943000-00944000 rw-p 00006000 08:01 308124 /usr/local/lib/libftdi.so.1.20.0
00a98000-00a9f000 r-xp 00000000 08:01 131345 /lib/libusb-0.1.so.4.4.4
00a9f000-00aa0000 r--p 00006000 08:01 131345 /lib/libusb-0.1.so.4.4.4
00aa0000-00aa1000 rw-p 00007000 08:01 131345 /lib/libusb-0.1.so.4.4.4
00aa1000-00aa2000 rw-p 00000000 00:00 0
00d22000-00d3e000 r-xp 00000000 08:01 130812 /lib/i386-linux-gnu/libgcc_s.so.1
00d3e000-00d3f000 r--p 0001b000 08:01 130812 /lib/i386-linux-gnu/libgcc_s.so.1
00d3f000-00d40000 rw-p 0001c000 08:01 130812 /lib/i386-linux-gnu/libgcc_s.so.1
00d56000-00d57000 r-xp 00000000 00:00 0 [vdso]
08048000-0804b000 r-xp 00000000 08:01 342 /home/vislink/aircam/AircamFrontPanel/debugimage
0804b000-0804c000 r--p 00003000 08:01 342 /home/vislink/aircam/AircamFrontPanel/debugimage
0804c000-0804d000 rw-p 00004000 08:01 342 /home/vislink/aircam/AircamFrontPanel/debugimage
09b9c000-09bc1000 rw-p 00000000 00:00 0 [heap]
b7704000-b7707000 rw-p 00000000 00:00 0
b7711000-b7712000 ---p 00000000 00:00 0
b7712000-b7717000 rw-p 00000000 00:00 0
bf94b000-bf96c000 rw-p 00000000 00:00 0 [stack] 
```

不确定进行的最佳方式。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T18:53:29.140

`tid`是一个未初始化的指针。您必须声明一个类型的对象`timer_t`并将指向该对象的指针传递给`timer_create`. 您不能只创建`timer_t *`具有不确定值的类型的指针对象并将该不确定值传递给`timer_create`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:06:42.503

我无法从您发布的代码中看出，但除非您`struct sigevent`被声明为全局代码，否则您需要`memset()`在使用它之前将其归零。

很容易错过设置一个重要的结构字段。

而且，R. 关于`timer_t`需要指向真实对象的指针是正确的。

# ruby - RHEL 5.3 的最新 redhat 支持的 ruby 版本？

> ID：12430155
> 
> 赞同：1
> 
> 时间：2012-09-14T18:39:20.137
> 
> 标签：ruby, linux, redhat

因此，我正在尝试为我们商店的 SA 解决一些问题，以便请求升级到我们目前在几台 Redhat Enterprise Linux 生产服务器上安装的 ruby​​。

但也有一些复杂的因素：

*   升级必须是 rpm 形式
*   rpm 必须来自 redhat repo

我搜索了 redhat 文档并找到了 RHEL 6 所需的信息，但不是 5。我花了大量时间进行谷歌搜索，但大多数解决方案都涉及从非 redhat 站点提取或从源代码编译——我们的 SA 都不会这样做。我搜索了stackoverflow，并没有发现这个特定的问题被问到，或者在其他类似问题的答案中得到解决。

来自其中一台服务器的一些相关信息（它们都是相同的）：

```
foo@bar:~ $ cat /etc/redhat-release 
Red Hat Enterprise Linux Server release 5.3 (Tikanga)

foo@bar:~ $ ruby -v
ruby 1.8.5 (2006-08-25) [x86_64-linux] 
```

是否有人有针对 RHEL 5.3 支持的 ruby​​ 的最新版本的官方 redhat 文档和 repo 的特定链接？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:48:56.143

发布清单显示了 5.3 中包含的软件，您可以在此处找到它： [Red Hat Enterprise 5.3 - Release Manifest](http://www.centos.org/docs/5/html/5.3/pdf/Release_Manifest.pdf)

# c# - 如何从网页上的列表框中获取所选项目的列表？

> ID：12430160
> 
> 赞同：0
> 
> 时间：2012-09-14T18:39:36.697
> 
> 标签：c#, asp.net, list, listbox

这不起作用：

```
var selectedItems = lbxSourceTables.Items.Cast<String>().ToList(); 
```

如何获取用户在我的网页上选择的项目列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T18:41:37.167

```
var selectedItems = yourListBox.Items.GetSelectedItems(); 
```

// 使用这个扩展方法

```
public static IEnumerable<ListItem> GetSelectedItems(this ListItemCollection items)
{
    return items.OfType<ListItem>().Where(item => item.Selected);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:44:37.320

如果你的意思是列表框，那么`listBox1.SelectedItems`

# java - 在原始文件被反转后尝试读取文件输入以及文件输出？

> ID：12430168
> 
> 赞同：1
> 
> 时间：2012-09-14T18:40:05.903
> 
> 标签：java, file, exception, input

我已经阅读了我的书以及我的老师使用 FileNotFoundException 之类的异常就读写方法主题制作的幻灯片。我已经编写了很多代码并让它工作，允许我向用户询问文件路径并读取此文件并将其显示在控制台上。我正在努力反转文件文本并将这个新文本输出到文件以保存/创建。我的书没有解释如何在同一个程序上同时执行读取和写入方法。所以我写的输出代码可能是非常错误的。我在互联网上搜索了一些寻求帮助，但没有找到任何可以帮助我的东西，因为我想让用户输入他们想要读取和写入的文件位置。

我想要： 1\. 创建一个允许用户选择文件名并将文件内容输出到控制台的类。推荐使用文本文件来显示，java文件是文本文件。您可能希望将此代码放在一个方法中，以允许您在不覆盖代码的情况下完成此分配的其余部分。一个。要求用户输入文件的完整路径，以确保您正在处理正确的文件。2.修改你的代码/添加一个方法来以相反的顺序显示文件的内容。您不需要反转每行上的字符，只需以相反的顺序输出文件的行。一个。将文件内容读入一个ArrayList，然后遍历ArrayList。3\. 最后，将文件内容复制到另一个文件中。您将需要遍历文件并将每一行写入一个新文件。我还想创建一个新异常 FileMissingException，它将扩展 FileNotFoundException。您将需要创建一个单独的类来保存您的新异常。修改您的代码以捕获 FileNotFoundException 并引发 FileMissingException。在您的 main() 中捕获 FileMissingException 并打印 message.from 异常。

由于我必须完成所有工作，该程序变得有点杂乱无章。请记住，我是编程入门，所以有很多我不明白的地方，但我会尽力而为。你们给我的任何提示都会非常有帮助。

我写的新代码：

```
 import java.util.Scanner;
    import java.io.*; 
    import java.util.ArrayList;

    public class TextFile 
    {
    private static ArrayList<String> filesData = new ArrayList<String>();
    private static Scanner console = new Scanner(System.in);
    public static void main(String[] args) throws FileNotFoundException
    {
    System.out.println("Input file: ");
    String fileNameInput = console.nextLine();
    // Construct the Scanner and PrintWriter objects for reading and writing
    File inputFile = new File(fileNameInput);
    Scanner in = new Scanner(inputFile);

    do
    {
        // Asks the user what they would like to do with the file info based on number input.
        System.out.println("Please enter the number for your choice: ");
        System.out.println("1\. Display the contents of the file.");
        System.out.println("2\. Reverse the contents of the file.");
        System.out.println("3\. Write the contents of the file to a new file.");
        System.out.println("0\. Exits the program");
        int num = console.nextInt();
        console.nextLine();
        switch(num)
        {
            case 0:
                in.close();
                System.exit(0);
                break;
            case 1:
                while (in.hasNext())
                {
                    String lines = in.nextLine();
                    System.out.println(lines);
                }
                break;
            case 2:
                displayReverse(inputFile);
                break;
            case 3:
                outputFile(inputFile);
                break;
            default:
                break;
        }
    }while (true);
}
public static void displayReverse(File inputFile) throws FileNotFoundException
{
    Scanner in = new Scanner(inputFile);
    while (in.hasNext())
    {
        String text = in.next();
        filesData.add(text);
    }
    for (int i = filesData.size(); i > 0; i--)
    {
        System.out.print(filesData.get(i - 1) + " ");
    }
    in.close();
}
public static void outputFile(File inputFile) throws FileNotFoundException
{       
    System.out.println("Name your new file(hint: do not worry about a complete path here!): ");
    String outputFileName = inputFile.getParentFile() + "\\" + console.nextLine();
    Scanner in = new Scanner(inputFile);
    PrintWriter outFiles = new PrintWriter(outputFileName);
    while (in.hasNext())
    {
        String line = in.next();
        outFiles.print(line + " ");
    }
    outFiles.close();
    in.close();
} 
```

}

# perl - 如何检测系统是否支持 ipv6？

> ID：12430172
> 
> 赞同：3
> 
> 时间：2012-09-14T18:40:13.873
> 
> 标签：perl, ipv6

我终于设法在我的软件中修复了对 ipv6 的支持。不幸的是，现在它在每台仅 ipv4 的机器上崩溃。这是错误的子程序：

```
sub init
{
    my ($self, %opts) = @_;

    # server options defaults
    my %defaults = (StartBackground => 0, ServerPort => 3000);

    # set options or use defaults
    map { $self->{$_} = (exists $opts{$_} ? $opts{$_} : $defaults{$_}) }
        keys %defaults;

    $self->{'server'} = HTTP::AppServer::Base->new($self->{'ServerPort'}, Socket::AF_INET6);

    return $self;
} 
```

这里的问题在倒数第二行：

```
$self->{'server'} = HTTP::AppServer::Base->new($self->{'ServerPort'}, Socket::AF_INET6); 
```

与仅在 ipv4 上的机器一样，它会因抱怨不支持的地址系列而死掉（这是传递给`new`函数的第二个参数）。

基本上，我需要做的是：

```
if (it_supports_ipv6()) {
    $self->{'server'} = HTTP::AppServer::Base->new($self->{'ServerPort'}, Socket::AF_INET6);
}
else {
    $self->{'server'} = HTTP::AppServer::Base->new($self->{'ServerPort'});
} 
```

但是如何实现这样的功能`it_supports_ipv6()`呢？

我尝试使用`eval`以下语法，但它不起作用：

```
my $ipv6_success = eval { $self->{'server'} = HTTP::AppServer::Base->new($self->{'ServerPort'}, Socket::AF_INET6); };
if (!defined($ipv6_success)) {
    $self->{'server'} = HTTP::AppServer::Base->new($self->{'ServerPort'});
} 
```

逻辑是我在`eval`doc 中读到，`undef`如果表达式导致程序死亡，它会返回。

我正在使用 Linux 机器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:50:47.650

您可以通过以下方式检测`AF_INET6`常量的存在`eval`：

```
use constant HAS_AF_INET6 => defined eval { Socket::AF_INET6() }; 
```

但这还不够。仅仅因为操作系统支持该常量并不意味着这台特定的机器支持它。您必须测试整个操作是否正常工作`socket()`。`bind()`为此，您仍然希望以某种方式错误检测实际的对象构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T20:07:25.630

不要相信`has_ipv6()`. `Paranoid::Network::Socket`它返回误报，因为它只是检查 Perl 是否支持它，但这还不够（例如，系统可能缺少加载的 ipv6 内核模块）。

我最终得到了以下功能，它似乎工作正常。

```
use IO::Socket::IP;

sub supports_ipv6 {
    my $has_ipv6;

    eval {
        $has_ipv6 = IO::Socket::IP->new (
            Domain => PF_INET6,
            LocalHost => '::1',
            Listen => 1 ) or die;
    };

    if ($@) {
        return 0;
    }
    else {
        return 1;
    }
} 
```

# css - 如何用CSS匹配最后n个孩子？

> ID：12430174
> 
> 赞同：5
> 
> 时间：2012-09-14T18:40:32.180
> 
> 标签：css, css-selectors

我们想匹配父容器的最后 12 个元素。如何用 CSS 做到这一点？澄清一下，12 是一个任意数字。我们想知道如何匹配父容器的最后 N 个元素。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T18:45:45.927

明确地： nth- [**​​last-child(N)**](http://reference.sitepoint.com/css/pseudoclass-nthlastchild)

```
li:nth-last-child(-n+12) {
  /*your css declarations*/
} 
```

此示例选择器将匹配任何列表中的最后 12 个列表项，无论是有序的还是无序的：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T18:44:57.610

[http://reference.sitepoint.com/css/pseudoclass-nthlastchild](http://reference.sitepoint.com/css/pseudoclass-nthlastchild)

```
li:nth-last-child(-n+12) {
  ⋮ declarations
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T18:44:19.023

您想要`:nth-last-child` [伪](http://reference.sitepoint.com/css/css3psuedoclasses)类（或`:nth-last-of-type`用于类型检查）。之后，您可以使用`~`选择所有后续兄弟姐妹：

`.container > *:nth-last-child(13) ~ * { }`

[http://jsbin.com/uhuzer/1/edit](http://jsbin.com/uhuzer/1/edit)

# jquery - 如何在不更改所选值的情况下将选择框滚动到特定选项

> ID：12430179
> 
> 赞同：3
> 
> 时间：2012-09-14T18:40:42.030
> 
> 标签：jquery, scroll, drop-down-menu

我有一个选择下拉菜单，它显示了 100 个选项元素中的 10 个。我提供了一个搜索框，并且知道要滚动到选择框顶部的选项的索引。但是，如果已经选择了一个选项，我**不想更改选定的值。**

我在这里倾注的所有文章都涉及设置/重置所选值或调用`$('*theItem*').offset().top`. 不幸的是，我收到一个`.top`不是属性的 jscript 错误。

这似乎应该是一件简单的事情，但令人惊讶的是，事实并非如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:40:40.217

您可以使用`scrollTop()`滚动选择框。

[这是一个](http://jsfiddle.net/BFUyA/)有很多行的例子。高度为 10 行，所选行为 40，滚动条位于第 10 行。

# php - MVC 路由是如何工作的？

> ID：12430181
> 
> 赞同：21
> 
> 时间：2012-09-14T18:40:46.143
> 
> 标签：php, model-view-controller, routes

所以我开始更深入地研究 MVC（真正的 MVC，而不是框架 MVC），并且我正在尝试开发一个小型框架。我通过阅读 Symphony 和 Zend 等其他框架来工作，看看它们是如何工作的，并尝试自己实现它。

我卡住的地方是 URL 路由系统：

```
<?php
namespace Application\Common;

class RouteBuilder {

    public function create($name, $parameters) {
        $route           = new Route($name);
        $route->resource = array_keys($parameters)[0];
        $route->defaults = $parameters["defaults"];
        $notation        = $parameters["notation"];
        $notation = preg_replace("/\[(.*)\]/", "(:?$1)?", $notation);
        foreach ($parameters["conditions"] as $param => $condition) {
            $notation = \str_replace($param, $condition, $notation);
        }

        $notation = preg_replace("/:([a-z]+)/i", "(?P<$1>[^/.,;?\n]+)", $notation);

        //@TODO: Continue pattern replacement!!
    }
}
/* How a single entry looks like
 * "main": {
    "notation": "/:action",
    "defaults": {
        "resource"  :   "Authentication",
    },
    "conditions":   {
        ":action"   :   "(login)|(register)"
    }
},

 */ 
```

我只是无法正确地缠绕它。从这里开始的应用程序工作流程是什么？

生成的模式，大概是`Route`对象下要保存的`Request`对象什么的，然后呢？它是如何工作的？

> **PS**在这里寻找一个真实的，解释清楚的答案。我真的很想了解这个主题。如果有人花时间写一个真正详尽的答案，我将不胜感激。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-14T19:32:25.380

MVC`Router`类（它是更广泛的*Front Controller*的一部分）分解 HTTP 请求的 URL——特别是路径组件（可能还有查询字符串）。

`Router`尝试将路径组件的第一个或两个部分匹配到相应的路由组合（/ `Controller`Action [ *method* ]，或者只是`Controller`执行默认操作（*method*）的一个。

一个动作或命令只是一个特定的*方法*`Controller`。

通常有一个`abstract Controller`和多个子级`Controller`，每个网页一个（一般来说）。

有些人可能会说，如果 URL 中存在任何`Router`参数，也会将参数传递给所需的方法。`Controller`

**注意**：面向对象的编程纯粹主义者，遵循单一职责原则，可能会争辩说URL 的*路由*组件和*分派*一个`Controller`类是两个独立的职责。在这种情况下，一个`Dispatcher`类实际上将实例化`Controller`并传递其方法之一，任何从客户端 HTTP 请求派生的参数。

**示例 1: `Controller`，但没有操作或参数。**

`http://localhost/contact`在 GET 请求中，这可能会显示一个表单。

*控制器*= 合同

*Action* = Default（通常是一种`index()`方法）

=======================

**示例 2：`Controller`和操作，但没有参数。**

`http://localhost/contact/send`在 POST 请求中，这可能会启动服务器端验证并尝试发送消息。

*控制器*= 合同

*行动*= 发送

=======================

**示例 3 `Controller`：、动作和参数。**

`http://localhost/contact/send/sync`在 POST 请求中，这可能会启动服务器端验证并尝试发送消息。但是，在这种情况下，JavaScript 可能没有激活。因此，为了支持优雅降级，您可以告诉`ContactController`使用`View`支持屏幕重绘并使用 HTTP 标头`Content-Type: text/html`而不是`Content-Type: application/json`. `sync`将作为参数传递给`ContactConroller::send()`. 请注意，我的`sync`示例完全是任意的并且是虚构的，但我认为它符合要求！

*控制器*= 合同

*行动*= 发送

*Arguments* = `[sync]` // 是的，在数组中传递参数！

一个`Router`类实例化所请求的具体子项，从*控制器实例*`Controller`调用所请求的*方法*，并将其*参数*（如果有）传递给控制器​​方法。

 ****1)**你的`Router`类应该首先检查是否有一个`Controller`可以实例化的具体对象（使用 URL 中的名称，加上单词“Controller”）。如果找到控制器，则[测试请求的方法](http://php.net/manual/en/function.method-exists.php)（操作）是否存在。

**2)**如果`Router`在运行时找不到并加载必要的 PHP（建议使用[自动加载器](http://php.net/manual/en/function.spl-autoload-register.php)）来实例化一个具体的`Controller`子节点，它应该检查一个数组（通常在另一个类名中找到`Route`）以查看请求的 URL 是否[匹配](http://php.net/manual/en/function.preg-match.php)，使用常规表达式，其中包含的任何元素。下面是一个`Route`类的基本骨架。

注意：`.*?`= 零个或多个任意字符，非捕获。

```
class Route
{
    private $routes = [
        ['url' => 'nieuws/economie/.*?', // regular expression.
         'controller' => 'news',
         'action' => 'economie'],
        ['url' => 'weerbericht/locatie/.*?', // regular expression.
         'controller' => 'weather',
         'action' => 'location']
    ];

    public function __contstruct()
    {

    }

    public function getRoutes()
    {
        return $this->routes;
    }
} 
```

为什么要使用正则表达式？对于 URL 中第二个正斜杠之后的数据，不太可能完成可靠的匹配。

`/controller/method/param1/param2/...`，其中 param[x] 可以是*任何东西*！

**警告：**当目标数据包含模式分隔符（在这种情况下，正斜杠“/”）时，最好更改默认的正则表达式模式分隔符 ('/')。几乎任何无效的 URL 字符都是不错的选择。

该类的方法`Router`将遍历数组以查看目标 URL 和与二级索引关联的*值*`Route::routes`之间是否存在正则表达式匹配。如果找到匹配项，则知道要实例化哪个具体以及要调用的后续方法。参数将根据需要传递给方法。`string` *`url``Router``Controller`*

 *始终警惕边缘情况，例如表示以下内容的 URL。

```
`/`   // Should take you to the home page / HomeController by default
`''`  // Should take you to the home page / HomeController by default
`/gibberish&^&*^&*%#&(*$%&*#`   // Reject 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T19:51:25.857

路由器类，来自我的框架。代码讲述了这个故事：

```
class Router
{
  const default_action = 'index';
  const default_controller = 'index';

  protected $request = array();

  public function __construct( $url )
  {
    $this->SetRoute( $url ? $url : self::default_controller );
  }

  /*
  *  The magic gets transforms $router->action into $router->GetAction();
  */
  public function __get( $name )
  {
    if( method_exists( $this, 'Get' . $name ))
      return $this->{'Get' . $name}();
    else
      return null;
  }

  public function SetRoute( $route )
  {
    $route = rtrim( $route, '/' );
    $this->request = explode( '/', $route );
  }

  private function GetAction()
  {
    if( isset( $this->request[1] ))
      return $this->request[1];
    else
      return self::default_action;
  }

  private function GetParams()
  {
    if( count( $this->request ) > 2 )
      return array_slice ( $this->request, 2 );
    else
      return array();
  }

  private function GetPost()
  {
    return $_SERVER['REQUEST_METHOD'] == 'POST';
  }

  private function GetController()
  {
    if( isset( $this->request[0] ))
      return $this->request[0];
    else
      return self::default_controller;
  }

  private function GetRequest()
  {
    return $this->request;
  } 
```***

# javascript - jQuery - 如何在两种情况下使粘性导航“坚持”？默认情况下，顶部面板 div 展开

> ID：12430188
> 
> 赞同：2
> 
> 时间：2012-09-14T18:41:45.400
> 
> 标签：javascript, jquery, navigation, positioning, fixed

我有一个“粘性导航”，当用户向下滚动时“粘”到顶部（函数将其位置更改为：fixed，top:0）。我在页面顶部还有一个“expandalbe”登录区域。第一个问题是当我扩展页面顶部的登录区域时，导航栏“粘住”的点发生了变化。现在我让它在面板打开时粘住，但是当它关​​闭时，它粘在错误的点（似乎粘在#panel的额外高度点）。见小提琴

如何使#sticky_navigation 在两种情况下都保持在顶部：0 - 当#panel 打开和关闭/默认时？

*（删除了无效的 YouTube 链接）*

谢谢

```
 **// FIRST VERSION sticky navigaiton ------------//**
   $(document).ready(function(){
    var sticky_navigation_offset_top = $('#sticky_navigation').offset().top;             
    var sticky_navigation = function(){
        var scroll_top = $(window).scrollTop(); // our current vertical position from the top

        if (scroll_top > sticky_navigation_offset_top) {
            $('#sticky_navigation').css({ 'position': 'fixed', 'top':0, 'left':0 })
        } else {
            $('#sticky_navigation').css({ 'position': 'relative' });
        }       
    };

    sticky_navigation();

    $(window).scroll(function() {
         sticky_navigation();
    });

}); 
```

**更新：** 现在我只有在#panel 打开时才能使用它。如果它关闭，#sticky_navigation 不会启动。

```
//sticky top nav PANEL OPEN ONLY
$(document).ready(function(){
    // grab the initial top offset of the navigation
    var sticky_navigation_offset_top = $('#sticky_navigation').offset().top;

    // our function that decides weather the navigation bar should have "fixed" css position or not.
    var sticky_navigation2 = function(){

        var scroll_top1 = $(window).scrollTop(); // our current vertical position from the top
            scroll_top1 = $(window).scrollTop() - $('#panel').height();
        // if we've scrolled more than the navigation, change its position to fixed to stick to top,
        // otherwise change it back to relative
        if (scroll_top1 > sticky_navigation_offset_top ) {
            $('#sticky_navigation').css({ 'position': 'fixed', 'top':0, 'left':0 })
        } else {
            $('#sticky_navigation').css({ 'position': 'relative' });
        }  

    };

    // run our function on load
    sticky_navigation2();

    // and run it again every time you scroll
    $(window).scroll(function() {
         sticky_navigation2();
    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T23:29:59.877

尝试这样的事情：

```
$(document).ready(function() {

    $("#open").click(function() {
        var stickTop = $("div#sticky_navigation").offset().top;
        $("div#panel").slideDown("swing");
        $('#sticky_navigation').css('top',$("div#panel").height());

    });

    $("#panel").click(function() {
        $("div#panel").slideUp("swing");
        $('#sticky_navigation').css('top',stickTop);
    });

    $("#toggle a").click(function() {
        //$("#toggle a").toggle();
    });

});​ 
```

要获得更准确的答案，请创建一个[fiddle](http://jsfiddle.net/)。

**更新**

您需要从-var中减去`#panel`-height 。`$(window).scrollTop``scroll_top1`

例如：

```
var scroll_top1 = $(window).scrollTop() - $('#panel').height(); 
```

但是，您还需要检查#panel 是否可见；-)

**更新2**

明白[了，看看](http://jsfiddle.net/45kt7/show)吧！

```
//sticky top nav
$(document).ready(function(){
        // grab the initial top offset of the navigation
        var sticky_navigation_offset_top = $('#sticky_navigation').offset().top;

        // our function that decides weather the navigation bar should have "fixed" css position or not.
        var sticky_navigation = function(){

            var scrollHeight = $(window).scrollTop(),
                scrollHeightP = $(window).scrollTop() - $('#panel').height();
            var scroll_top1 = $('#panel:hidden') ? scrollHeight  : scrollHeightP; // our current vertical position from the top

            // if we've scrolled more than the navigation, change its position to fixed to stick to top,
            // otherwise change it back to relative
            if (scroll_top1 > sticky_navigation_offset_top ) {
                $('#sticky_navigation').css({ 'position': 'fixed', 'top':0, 'left':0 })
            } else {
                $('#sticky_navigation').css({ 'position': 'relative' });
            }  

        };

        // run our function on load
        sticky_navigation();

        // and run it again every time you scroll
        $(window).scroll(function() {
             sticky_navigation();
        });

}); 
```

# c# - 在 PDF 中插入按钮

> ID：12430189
> 
> 赞同：1
> 
> 时间：2012-09-14T18:41:54.517
> 
> 标签：c#, asp.net, pdf

如何使pdf文件具有功能按钮？

这是PDF背后的代码

```
 public partial class Pdf_Default : System.Web.UI.Page
{
protected override void Render(HtmlTextWriter writer)
{
    MemoryStream mem = new MemoryStream();
    StreamWriter twr = new StreamWriter(mem);
    HtmlTextWriter myWriter = new HtmlTextWriter(twr);
    base.Render(myWriter);
    myWriter.Flush();
    myWriter.Dispose();
    StreamReader strmRdr = new StreamReader(mem);
    strmRdr.BaseStream.Position = 0;
    string pageContent = strmRdr.ReadToEnd();
    strmRdr.Dispose();
    mem.Dispose();
    writer.Write(pageContent);
    CreatePDFDocument(pageContent);

}
public void CreatePDFDocument(string strHtml)
{

    string strFileName = HttpContext.Current.Server.MapPath("test.pdf");
    // step 1: creation of a document-object
    Document document = new Document();
    // step 2:
    // we create a writer that listens to the document
    PdfWriter.GetInstance(document, new FileStream(strFileName, FileMode.Create));
    StringReader se = new StringReader(strHtml);
    HTMLWorker obj = new HTMLWorker(document);
    document.Open();
    obj.Parse(se);
    document.Close();
    ShowPdf(strFileName);

}
public void ShowPdf(string strFileName)
{
    Response.ClearContent();
    Response.ClearHeaders();
    Response.AddHeader("Content-Disposition", "inline;filename=" + strFileName);
    Response.ContentType = "application/pdf";
    Response.WriteFile(strFileName);
    Response.Flush();
    Response.Clear();
} 
```

}

当我尝试放置后退按钮时，PDF 文件仅显示标签测试。我想制作一个可以转到另一个页面的按钮（非 PDF）。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:31:45.583

当您使用 etc 发送 PDF 文件作为响应`Response.ContentType = "application/pdf";`时，可能会发生很多事情，最常见的是：
1- 在您的网站上导航的用户**没有**默认的 PDF 查看器，并且将显示“另存为...”对话框（通常）。
2- 用户**有**一个默认的 PDF 查看器，它显示为浏览器外部的外部应用程序或集成在其中。

在任何这些情况下，您将只显示 PDF 文件，而不涉及任何 HTML 内容。如果您想显示一个将用户带回您的站点的按钮，则必须修改 PDF 文件并在其中添加按钮。

另一种选择是[将 pdf 文件嵌入页面](https://stackoverflow.com/questions/291813/best-way-to-embed-pdf-in-html)中，而不是将其作为响应发送。在这种情况下，您可以将按钮添加到包装 PDF 文件的页面。

# javascript - 如何将对象列表传递给 Spring Controller 以进行多行插入？

> ID：12430193
> 
> 赞同：0
> 
> 时间：2012-09-14T18:42:07.823
> 
> 标签：javascript, html, spring, jdbctemplate

有一个输出 HTML5 页面的 jsp。HTML5 有两个按钮——“添加”和“保存”。HTML5 本地存储功能用于存储离线数据。

“添加”按钮在单击时添加一条记录。因此，如果用户在 jsp 页面上填写字段 5 次并单击“添加”按钮 5 次，则将 5 条记录添加到 HTML5 表中。单击“添加”按钮时，将运行一个将记录添加到结果集中的 javascript。因此，对于 5 次点击，javascript 结果集包含 5 条记录。

单击“保存”按钮时，必须将 javascript 结果集中的所有 5 条记录插入到 Oracle 数据库中。为此，必须将结果集中的记录列表传递给 Spring 控制器。

Spring 控制器已使用 batchUpdate api 进行编码。

```
public void insertListOfPojos(final List<MyPojo> myPojoList) {

    String sql = "INSERT INTO "
        + "MY_TABLE "
        + "(FIELD_1,FIELD_2,FIELD_3) "
        + "VALUES " + "(?,?,?)";

    getJdbcTemplate().batchUpdate(sql, new BatchPreparedStatementSetter() {

        @Override
        public void setValues(PreparedStatement ps, int i)
            throws SQLException {

            MyPojo myPojo = myPojoList.get(i);
            ps.setString(1, myPojo.getField1());
            ps.setString(2, myPojo.getField2());
            ps.setString(3, myPojo.getField3());

        }

        @Override
        public int getBatchSize() {
            return myPojoList.size();
        }
    });

} 
```

问题是 - 当单击“添加”按钮时，如何将记录从 javascript 结果集中传递给 Spring 控制器，以便控制器的“myPojoList”可以使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:26:37.377

我有几个想法

1.  将 5 条记录形成一个 json 字符串并发布到控制器并将 json 解组为对象并存储在 Oracle 中。

2.  将 5 条记录形成为分隔字符串，例如`id1,name1,address1|id2,name2,address2`..etc。在服务器端，您可以标记化并存储在 Oracle 中。

JSON 具有标准格式，因此这将是更好的选择。用于存储在 HTML5 中的 javascript 可用于在客户端中形成此字符串，并在提交后从客户端读取并推送到控制器。

# java - java类可以在nsis脚本中运行吗？

> ID：12430195
> 
> 赞同：0
> 
> 时间：2012-09-14T18:42:23.383
> 
> 标签：java, nsis

我已经在 Windows 平台上的我的 Eclipse 中安装了 NSIS 插件。我有 java 类 Calculator.java

```
public class sample {

public static Integer sum(int a, int b) {
int c = a+b;
return c;
}

} 
```

在安装时，从 sample.java 类使用方法 sum(5,6) 我想在 nsis 文件中得到这个结果。

我需要帮助将 nsis 文件与 java 进行通信。nsis可以吗？如果可能，请给我步骤。

任何人都可以帮助这个概念吗？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T18:48:29.223

您可以使用 ExecWait 命令在 NSIS 中执行 Java JAR。

```
ExecWait 'javaw.exe -jar \
            ${networkDir}\your.jar \
            parameters' 
```

当且仅当您的 Java JAR 返回条件代码时，您才可以检查错误标志：

```
System.exit(0);   // Good return
System.exit(8);   // Error return 
```

据我所知，您不能在 NSIS 中引用 Java 方法。您的 Java JAR 必须有一个 main 方法。

您的 Java JAR 可以编写一个文件，稍后 NSIS 可以读取该文件。

# jquery - Jquery后续选项卡不加载ajax天气小部件

> ID：12430196
> 
> 赞同：1
> 
> 时间：2012-09-14T18:42:26.240
> 
> 标签：jquery, ajax, tabs

我正在构建一个带有小（基于cookie）选项卡部分的站点，其中包括一个AJAX 天气小部件。我知道我的问题是 AJAX 内容仅在开始时加载，其余选项卡在单击时不会触发事件。我发现了很多解决方案，从使用负载、缓存、url hrefs、id hrefs 等，但在每种情况下，我在尝试实现时都会弄乱语法。我不确定哪种解决方案适用于我（任何/全部？）。这看起来很简单，但我想我已经盯着这个太久了。

这是我的标签html：

```
 <div id="profileTabList" class="tabs">
        <a href="#toronto">Toronto</a>
        <a href="#montreal">Montreal</a>
        <a href="#calgary">Calgary</a>
        <a href="#vancouver">Vancouver</a>
        </div>

        <div class="hr"></div>

        <div id="profileTabData" class="both">

            <div id="toronto" class="tab_content">
                <div class="left">
                <div class="ws-widget"><span class="ws-location">Toronto, Canada</span></div>
                </div>
                <div class="right">
                <div class="ws-widget"><span class="ws-location">Moscow, Russia</span></div>
                </div>
            </div>

            <div id="montreal" class="tab_content">
                <div class="left">
                <div class="ws-widget"><span class="ws-location">Montreal, Canada</span></div>
                </div>
                <div class="right">
                <div id="cbc-montreal"></div>
                </div>
            </div>

            <div id="calgary" class="tab_content">
                <div class="left">
                <div class="ws-widget"><span class="ws-location">Calgary, Canada</span></div>
                </div>
                <div class="right">
                <div id="cbc-calgary"></div>
                </div>
            </div>

            <div id="vancouver" class="tab_content">
                <div class="left">
                <div class="ws-widget"><span class="ws-location">Vancouver, Canada</span></div>
                </div>
                <div class="right">
                <div id="cbc-bc"></div>
                </div>
            </div>

        </div> 
```

我正在使用基于 cookie 的 jquery-tabs.js：

```
$(function(){

function HashTabs(){
    var Cookie = $.cookie("offices");
    var activeTab = '';
    var navIndex = '';
    $('.tab_content').hide();

    if(!Cookie){
        $(".tabs a:first").addClass("active").show();
        $(".tab_content:first").show();

    } else if (Cookie != "") {
        $('.tabs > a:eq('+ Cookie +')').addClass('active').next().show();
        activeTab = $('.tabs > a:eq('+ Cookie +')').attr("href");
        $(activeTab).fadeIn(0);
    }

    $(".tabs > a").click(function() {
        $(".tabs a").removeClass("active");
        $(this).addClass("active");
        navIndex = $('.tabs > a').index(this);
        $.cookie("offices", navIndex);
        $('.tab_content').hide();
        activeTab = $(this).attr("href");
        $(activeTab).fadeIn(0);
        return false;
    });
}

$('#profileTabList').each(function(){
    return HashTabs();
}); 
```

});

# javascript - 无法完成 .getJSON 请求？

> ID：12430198
> 
> 赞同：1
> 
> 时间：2012-09-14T18:42:32.237
> 
> 标签：javascript, jquery, html, json, getjson

首先，这是我试图完成的跨域请求。这是我用作参考的 Strava API 白皮书的链接。[Strava 维基](https://stravasite-main.pbworks.com/w/page/51754151/Strava%20REST%20API%20Method%3a%20segments%20show)

请参阅下面我使用的代码。如果无法使用 jQuery 执行请求，你能给我举个例子来说明另一种方法吗？（例如 AJAX）我已经完成了我的研究，但我承认我知道的不够多，无法理解为什么请求不起作用。我是否需要在显示警报之前插入一个等待响应的参数，还是暗示？提前致谢！

```
 <html lang="en">
 <head>
   <meta charset="utf-8">
   <title>jQuery demo</title>
 </head>
 <body>
   <a href="http://jquery.com/">jQuery</a>
   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
   <script>
        $(document).ready(function(){
            $("a").click(function(event){
                $.getJSON('http://www.strava.com/api/v1/segments/637215', function(data) {
                    alert(data);
                });
            });
         });
   </script>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T18:52:04.143

有关您的解决方案为何无法按预期工作的更多信息，请参阅：[Access-Control-Allow-Origin Multiple Origin Domains？](https://stackoverflow.com/questions/1653308/access-control-allow-origin-multiple-origin-domains)

尝试使用该`.ajax`方法代替`dataType: "jsonp"`：

```
$.ajax({
   url: "http://www.strava.com/api/v1/segments/637215",
    dataType: 'jsonp',
    success: function(data){
        console.log(data);
     }
 }); 
```

运行它会得到以下结果：

```
{"segment":{"id":637215,"name":"Highway 33 Climb - Matilija Lake to Rose Valley","distance":16779.2,"elevationGain":1101.1,"elevationHigh":1070.9,"elevationLow":289.54,"averageGrade":4.64087,"climbCategory":"1"}} 
```

**[例子](http://jsfiddle.net/Eeywk/5/)**

请注意，返回的数据似乎确实存在错误，但我能够看到它。（请参阅下面**Musa**的评论）。

**编辑**

或者您可以更改：

```
$.getJSON('http://www.strava.com/api/v1/segments/637215', function(data) {
                    console.log(data);
                }); 
```

到：

```
$.getJSON('http://www.strava.com/api/v1/segments/637215?callback=?', function(data) {
                    console.log(data);
                }); 
```

这将导致`.getJSON()`使用`jsonp`。

`If the URL includes the string "callback=?" (or similar, as defined by the server-side API), the request is treated as JSONP instead.`

[**例子**](http://jsfiddle.net/Eeywk/6/)

# jsf - 照片尺寸未在数据库中更新

> ID：12430200
> 
> 赞同：0
> 
> 时间：2012-09-14T18:42:54.187
> 
> 标签：jsf, jsf-2, nullpointerexception

我正在尝试在数据库中插入图片的详细信息。每当我提交数据时，我的 PictureBean 的第 52 行都会出现空点异常，它表明 UploadedFile.getSize() 正在返回空值。图片的其他细节没有造成任何问题。

这是我的 xhtml 文件

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
<h:head>Add Photo</h:head>
<h:form enctype="multipart/form-data">
    <h:panelGrid columns="2">
                    <h:outputText value="Photo"/>
                    <p:fileUpload fileUploadListener="#{pictureBean.handleFileUpload}"/>
                    <h:outputText value="Picture ID: " />
                    <p:inputText styleClass="outputLabel"
                                value="#{pictureBean.picture.pictureId}" />
                    <h:outputText value="Picture Name: " />
                    <p:inputText styleClass="outputLabel"
                                value="#{pictureBean.picture.pictureName}" />
                    <h:outputText value="Picture Details: " />
                    <p:inputText styleClass="outputLabel"
                                value="#{pictureBean.picture.pictureDetails}" />
                    <h:outputText value="Album ID: " />
                    <p:inputText styleClass="outlabel" value="#{pictureBean.picture.albumId}"/>
                    <p:commandButton value="Add Photo" action="#{pictureBean.save}"/>
                                </h:panelGrid>
                                </h:form>
</html> 
```

这是我的图片豆

```
package com.bean;

import javax.faces.context.FacesContext;
import javax.faces.event.PhaseId;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;
import javax.servlet.http.HttpSession;

import org.primefaces.event.FileUploadEvent;
import org.primefaces.model.UploadedFile;

import com.entity.Picture;
import com.entity.User;

public class PictureBean {
    Picture picture;
    private UploadedFile uploadedFile;
    private EntityManager em;
    public PictureBean(){
        picture = new Picture();
        EntityManagerFactory emf=Persistence.createEntityManagerFactory("FreeBird");
         em =emf.createEntityManager();
    }
    public Picture getPicture() {
        return picture;
    }
    public void setPicture(Picture picture) {
        this.picture = picture;
    }

    public void handleFileUpload(FileUploadEvent e) {  
        System.out.println("file handler called");
        uploadedFile = e.getFile();
        String fileName=uploadedFile.getFileName();
        fileName=fileName.substring(fileName.lastIndexOf("\\")+1);
        System.out.println(fileName);
        byte[] a = uploadedFile.getContents();
        PhaseId currentPhaseId = FacesContext.getCurrentInstance().getCurrentPhaseId();
        System.out.println("current phase id"+currentPhaseId);
        picture.setPicture(a);

    }
    public String save(){
        FacesContext context = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context.getExternalContext().getSession(true);
        User user = (User) session.getAttribute("userdet");
        picture.setEmail(user.getEmail());
        picture.setPictureSize(uploadedFile.getSize());
        System.out.println("picture save called");
        em.getTransaction().begin();
        em.persist(picture);
        em.getTransaction().commit();
        return "success";
    }
} 
```

这是我得到的例外。

```
WARNING: #{pictureBean.save}: java.lang.NullPointerException
javax.faces.FacesException: #{pictureBean.save}: java.lang.NullPointerException
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:118)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.faces.el.EvaluationException: java.lang.NullPointerException
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    ... 36 more
Caused by: java.lang.NullPointerException
    at com.bean.PictureBean.save(PictureBean.java:52)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:254)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 37 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:58:19.167

> *它显示 uploadFile.getSize() 正在返回 null。*

不，它没有返回`null`，这不可能导致这个特定的堆栈跟踪。`uploadedFile`本身`null`就是。因此它不指向*任何东西*，因此任何使用句点运算符访问/调用它的尝试`.`都将导致`NullPointerException`，正如[它的 javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/NullPointerException.html)提示我们的那样。

在*这种特殊*情况下，如果 bean 是请求范围的并且文件实际上是在不同的 HTTP 请求中上传的，则可能会发生这种情况。您之前的问题中已经给出了两种可能的解决方案：[图像未更新](https://stackoverflow.com/questions/12411698/image-not-getting-updated/12412124#12412124)：

*   将 bean 放在视图范围内。
*   设置`<p:fileUpload>`为`mode="simple"`。

第三种解决方案是预先执行空检查。由于您没有将其设置为`required="true"`，另一个可能的原因是最终用户根本没有选择/发送任何文件。

```
if (uploadedFile != null) {
    picture.setPictureSize(uploadedFile.getSize());
} 
```

# python - 在 python 中创建自定义 zip 文件

> ID：12430201
> 
> 赞同：0
> 
> 时间：2012-09-14T18:42:55.733
> 
> 标签：python, zip

我想创建自己的 zip 文件存档，可以在我自己的代码中使用，即存档在标准解压缩应用程序中不可提取，但我只想将标题更改为我自己的自定义格式，例如 .will 。有任何想法吗？我应该只看加密标准 zip 吗？

注意：我不想加密数据。我只想“制作我自己的 zip 格式”，它本质上是 zip - 只是不能通过标准解压缩器提取。用于在应用程序中分配我自己对文件/文件夹的偏好（而不是用于窥探）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-16T14:14:11.830

如果您真的只想“锁定”标准 ZIP 工具（无论如何这都不是一个好主意），请在标准 ZIP 文件之前添加自定义标题。请注意，这不是加密，保护非常弱。

“加密”的伪代码：

```
infile = open("yourzip.zip", "rb")
outfile = open("yourencrypt.nozip", "wb")
outfile.write("THISISNOZIP")
outfile.write(infile.read()) 
```

“解密”的伪代码：

```
infile = open("yourencrypt.nozip", "rb")
outfile = open("yourzip.zip", "wb")
outfile.write(infile.read()[len("THISISNOZIP"):] 
```

# flash - 将 Actionscript 2 中的键盘侦听器添加到整个 Flash 电影

> ID：12430204
> 
> 赞同：1
> 
> 时间：2012-09-14T18:43:05.880
> 
> 标签：flash, event-handling, actionscript-2, keyboard-events

我一直在寻找一种有效地使用 AS2 来检测整个 .swf 上的空格键按下的方法，而不管焦点是什么影片剪辑。我发现了几个声称的解决方案，它们要么适用于 AS3，要么适用于 AS2，但并没有完全满足我的需要。在调整了我的发现之后，到目前为止，还没有任何一个检测到的空格键按下。任何人都可以提出替代方案吗？我觉得这很明显，我很想念它！

这是我迄今为止尝试过的（位于时间轴上的第一个也是唯一一个帧内）：1）

```
var stageListener:Object = new Object();
stageListener.onKeyUp = function() {
    if(Key.getAscii() == 32){
        trace("spaceup");
        dostuff;
    }
};
Stage.addListener(stageListener); 
```

2)

```
stage.onKeyUp = function() {
    if(Key.getAscii() == 32){
        trace("spaceup");
        dostuff;
    }
}; 
```

3)

```
_root.onKeyUp = function() {
    if(Key.getAscii() == 32){
        trace("spaceup");
        dostuff;
    }
}; 
```

4)

```
Main.stage.onKeyUp = function() {
    if(Key.getAscii() == 32){
        trace("spaceup");
        dostuff;
    }
}; 
```

5) 将其中一个附加到 swf 中的每个显示级交互式影片剪辑。依然没有！

```
this.onKeyUp = function() {
    if(Key.getAscii() == 32){
        trace("spaceup");
        dostuff;
    }
}; 
```

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T23:00:54.270

你的第一次尝试非常接近。`Key`对象是您附加侦听器的位置，而不是舞台。

```
var keyListener:Object = new Object();
keyListener.onKeyDown = function() {
   if(Key.getCode() == 32){
       //do something here for space bar press
   }
};
Key.addListener(keyListener); 
```

AS2 非常复古……我希望你有充分的理由使用它而不是 AS3

# java - 在带有 JDBC 驱动程序的 Java 中使用准备好的语句和变量绑定 Order By

> ID：12430208
> 
> 赞同：24
> 
> 时间：2012-09-14T18:43:21.287
> 
> 标签：java, sorting, jdbc, collections, jdbctemplate

我在用着

1.  jdbcTemplate 建立与 mySQL DB 的 JDBC 连接
2.  准备好的语句以尽可能保护自己免受 SQL 注入攻击
3.  需要接受来自用户的请求以对十几个不同列中的任何一个上的数据进行排序
4.  以下声明

    ```
    jdbcTemplate.query("SELECT * FROM TABLE1 ORDER BY ? ?", colName, sortOrder); 
    ```

当然这不起作用，因为变量绑定不应该指定列名，而只是指定查询中表达式的参数值。

那么......人们如何解决这个问题？只是在 Java 代码中进行排序似乎是一个简单的解决方案，但是因为我得到了一个用于列排序的变量字符串，以及一个告诉我排序顺序的变量……这是一个丑陋的比较器条件覆盖。这似乎应该是一个常见的问题，用一个常见的模式来解决它......

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-14T19:02:36.927

占位符`?`只能用于参数值，但不能用于列和排序方向。因此，如[这里](https://stackoverflow.com/questions/2857164/cannot-use-a-like-query-in-a-jdbc-prepared-statement/2857417#2857417)所指出的那样，执行此操作的标准方法是使用[String#format()](http://java.sun.com/javase/6/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)或类似的东西将您的列名和顺序值附加到您的查询中。

[另一种选择是使用 Spring Data JPA，您可以在其中为您的方法提供一个Sort](http://static.springsource.org/spring-data/data-commons/docs/current/api/org/springframework/data/domain/Sort.html)类型的实例作为参数，该实例可以包含数据库排序所需的所有信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T18:48:33.533

我只是将列名和顺序连接到 SQL 查询，但只有在

1.  验证列名和顺序在此上下文中是否有效。
2.  对它们进行消毒以应对任何[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击的尝试。

与将结果获取到应用程序层并在此处进行排序相比，我觉得这很有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-31T19:27:30.630

我的建议是键和列的映射。这是一个**安全**的解决方案。

一开始，我们以最简单的方式启动我们的地图。为方便起见，我重载了 get（Obiect key）方法以在失败的情况下返回**默认**列（“fullName”）。这将防止 SqlExeption。

```
 static Map<String,String> sortCol;
{
    sortCol = new HashMap<String, String>(){
        {//Enter all data for mapping
            put("name","fullName");
            put("rok","year");
            put("rate","likes");
            put("count-rate","countRate");

        }
        /**
         * 
         * @param key for column name
         * @return column name otherwise default "fullName"
         */
        @Override
        public String get(Object key) {
            String col =super.get(key);
            return null==col?"fullName":col;
        }
    };
} 
```

这是一个简单的使用示例。

```
String sqlQuery= "Select \"fullName\",year,likes,count-rate, country ..."+
 "from  blaBla..."+
 "where blaBla..."+
 "order by "+sortCol.get("keySort") "\n"; // keySort can have the value name, count-rate etc .. 
```

顺便说一句，您永远不应该在用户界面中透露列的真实名称，例如 REST 或 SOAP 等……对于攻击者来说，这是一个很大的帮助。

# android - 在片段中使用 ViewSwitcher 来更改视图

> ID：12430211
> 
> 赞同：0
> 
> 时间：2012-09-14T18:43:40.303
> 
> 标签：android, android-fragments, viewswitcher

我有以下片段，IdentificationFragment

我想让这个片段加载一个初始屏幕，然后当我按下按钮时，切换视图。（识别人脸、识别rfid、识别语音）最终。但是我在 Fragment 本身内部处理这个问题时遇到了麻烦。

这是片段当前的样子。

```
public class IdentificationFragment extends Fragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, 
    Bundle savedInstanceState) {

    return inflater.inflate(R.layout.identification_face, container, false);
} 
```

这是我的 Identification_face.xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>

<ViewSwitcher xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/identificationSwitcher"
  android:layout_width="fill_parent" 
  android:layout_height="fill_parent">    
<RelativeLayout 
  android:layout_width="match_parent"
  android:layout_height="match_parent" >
 <Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView1"
    android:layout_below="@+id/textView1"
    android:onCLick="nextView"
    android:text="Next View" />
  <TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/imageView1"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/imageView1"
    android:gravity="center_vertical"
    android:text="@string/article2" /> 
```

更通用的东西，还有另一种相对布局

```
 </RelativeLayout>
  </ViewSwitcher> 
```

我正在按照[此处](http://inphamousdevelopment.wordpress.com/2010/10/11/using-a-viewswitcher-in-your-android-xml-layouts/)提供的示例进行操作，但使用的是活动而不是片段。

由于通过 onCLick() 定位片段方法所涉及的问题，我不知道这是否可能。

我尝试在我的片段中使用此代码，但我似乎弊大于利。

```
public void onCreate(Bundle savedInstanceState, LayoutInflater inflater) {
    super.onCreate(savedInstanceState);
    inflater.inflate(R.layout.identification_face, article_container);
    ViewSwitcher switcher = (ViewSwitcher) findViewById(R.id.identificationSwitcher);
} 
```

希望这是可能的，我使用片段的原因是消除启动另一个活动，因为我的应用程序将加载实时视频处理，我只想在这个片段中使用它。

我在 developer.android 上花了很多时间使用此功能，但它们并没有提供太多帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T05:30:30.277

似乎您的设置就快到了。您只需要在 onCreateView 方法中找到您的视图。

以下是如何设置 ViewSwitcher 以及在单击 button1 时如何触发视图切换的示例：

```
ViewSwitcher mViewSwitcher;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{
   View root = inflater.inflate(R.layout.identification_face, container, false);
    mViewSwitcher = root.findViewById(R.id.identificationSwitcher);
    Button button1 = root.findViewById(R.id.button1);
    button1.setOnClickListener(new OnClickListener()
   { 
        @Override
        public void onClick(View v)
        {
          mViewSwitcher.setDisplayedChild(1);
        }
    });

    return root;
  } 
```

setDisplayedChild 是 ViewSwitcher 用于在视图之间切换的方法。0 是您的第一个视图的索引。

祝你好运

# xslt - XSLT - 使用 copy-namespaces="no" 时，未引用的命名空间仍会传播

> ID：12430212
> 
> 赞同：0
> 
> 时间：2012-09-14T18:43:40.877
> 
> 标签：xslt, namespaces, marklogic

为什么 copy-namespaces="no" 不删除未在 XSLT 的输出文档中引用的名称空间声明？我正在使用 MarkLogic 5 XSLT 处理器。

### 样本输入

```
<root xmlns:temp="http://temp" xmlns:keep="http://keep">
  <wrapper><temp:x>A</temp:x>BC<temp:x>D</temp:x></wrapper>
  <keep:me>XYZ</keep:me>
</root> 
```

### 示例 XSL

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:temp="http://temp"
  xmlns:keep="http://keep"
  exclude-result-prefixes="#all">

<xsl:template match="node()|@*" priority="-1" mode="#all">
    <xsl:copy copy-namespaces="no">
        <xsl:apply-templates select="@*|node()" mode="#current"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="temp:x">
  <xsl:apply-templates />
</xsl:template>

</xsl:stylesheet> 
```

### 预期产出

```
<root xmlns:keep="http://keep">
  <wrapper>ABCD</wrapper>
  <keep:me>XYZ</keep:me>
</root> 
```

### 实际输出

```
<root xmlns:temp="http://temp" xmlns:keep="http://keep">
  <wrapper>ABCD</wrapper>
  <keep:me>XYZ</keep:me>
</root> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T18:43:40.877

我向 MarkLogic 支持确认这是一个错误，他们正在努力修复。

同时，我使用这些模板代替身份模板作为解决方法：

```
<xsl:template match="*" priority="-1" mode="#all">
    <xsl:element name="{name(.)}">
        <xsl:apply-templates select="@*|node()" mode="#current"/>
    </xsl:element>
</xsl:template>

<xsl:template match="@*" priority="-1" mode="#all">
    <xsl:attribute name="{name(.)}" select="."/>
</xsl:template>

<xsl:template match="comment()|processing-instruction()|text()" priority="-1" mode="#all">
    <xsl:copy/>
</xsl:template> 
```

# java - 使用空值的数组在 Java 中动态填充 SQL

> ID：12430213
> 
> 赞同：3
> 
> 时间：2012-09-14T18:43:40.597
> 
> 标签：java, sql, database, vectorwise

举一个我的问题的简单例子：

```
//Create database table allowing nulls.
CREATE TABLE test(one int not null, two int null, three int not null); 
```

现在，在 Java 中，我有一个与数据库内容匹配的对象数组。我需要使用数组值为此数据库表创建插入/更新/删除语句。

```
Object[] arr = { 4, null, 1 };
String sql = GenereateInsert(arr); 
```

但这变得很困难，因为我需要提前从插入中删除空字段。例如，如果以上**两个**不为空：

```
 INSERT INTO test(4, 2, 1); 
```

一切都很容易。但如果它为空，我需要声明为：

```
 INSERT INTO test(one, three) values(4, 1); 
```

我正在处理的表是 50 列及以上，所以我不想手动执行此操作，这将无法管理。那么，人们一般如何解决这个问题呢？这应该是一种常见的情况。

PS：我不想使用完整的 ORM 库，这似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:14:11.633

我会建议这样的事情：

1.  运行类似的查询`SELECT * FROM <TABLE_NAME> LIMIT 1`。使用[`ResultSetMetaData`](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSetMetaData.html)检索 columnNames 及其 columnType。将其存储在 HashMap 中，并将键存储在 ArrayList 中

2.  现在`PreparedStatement`使用 ArrayList 中的键作为 columnNames 创建一个。*我想这不难做到*

3.  现在给定数组中的数据，事实上您知道它们来自 HashMap 的 SQL 类型，您可以轻松地使用此信息将您从数组中获得的值映射到`?`生成的 PreparedStatement 中。

现在的问题是如何处理`null`。好吧，既然您知道列的类型，那么如果您得到的值是，`null`那么您可以使用[`PreparedStatement.setNull(...)`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#setNull%28int,%20int%29)将它们设置为空。

另外，只是想指出，[根据这个文档](http://docs.oracle.com/javase/1.3/docs/guide/jdbc/getstart/preparedstatement.html)，有一个关于 JDBC的*setXXX(...)*的重要指南：

> **6.1.5 将 JDBC NULL 作为 IN 参数发送**
> 
> setNull 方法允许程序员将 JDBC NULL（通用 SQL NULL）值作为 IN 参数发送到数据库。但是请注意，仍然必须指定参数的 JDBC 类型。
> 
> 当将 Java 空值传递给 setXXX 方法（如果它将 Java 对象作为参数）时，JDBC NULL 也将发送到数据库。但是，只有在指定 JDBC 类型时，方法 setObject 才能采用空值。

这意味着您可以发送*null*作为`setXX(...)`方法参数的值，并且您实际上不必`setNull(..)`显式调用该方法。

我希望这对你有用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T18:52:04.423

高级算法：

1.  存储一个列名数组（与输入参数的顺序相同）——我们称之为`allColumnNames`——作为类的一个字段。
2.  调用该方法时，创建两个新的空`List<String>`s，一个表示列名，一个表示值 - 我们称这些为`columnNamesList`and `columnValuesList`。
3.  遍历输入数组，对于每个非空元素，添加`allColumnNames[i]`到.`columnNamesList``values[i]``columnValuesList`
4.  通过将,`INSERT INTO tablename`中的每个值的逗号分隔列表和 中的每个值的逗号分隔列表连接在一起来构建插入语句。`columnNames``VALUES``columnValuesList`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T19:36:25.580

不确定其他数据库系统，但在 postgres 中您可以插入一个空值，如下所示：

```
CREATE TABLE test(
  id       SERIAL PRIMARY KEY,
  val1     INTEGER DEFAULT NULL,
  val2     INTEGER DEFAULT NULL,
  val3     INTEGER DEFAULT NULL
);

INSERT INTO test(val1, val2, val3) VALUES(DEFAULT, DEFAULT, DEFAULT); 
```

你也可以用同样的方法做 set 语句：

```
UPDATE test SET val1 = DEFAULT, val2 = 123, val3 = DEFAULT WHERE id = 3; 
```

因此，

```
Stringbuilder sqlStmt = new StringBuilder();
sqlStmt.append("INSERT INTO test(val1, val2, val3) VALUES(");
sqlStmt.append(((val1 == null) ? "DEFAULT" : val1.toString()));
sqlStmt.append(" , ");
sqlStmt.append(((val2 == null) ? "DEFAULT" : val2.toString()));
sqlStmt.append(" , ");
sqlStmt.append(((val3 == null) ? "DEFAULT" : val3.toString()));
sqlStmt.append(";");
statement.execute(sqlStmt.toString()); 
```

如果你有很多这些，使用 for-each 循环可能更有意义。

# iphone - 调试 iphone 应用程序 - 发送到实例的无法识别的选择器崩溃

> ID：12430214
> 
> 赞同：0
> 
> 时间：2012-09-14T18:43:41.473
> 
> 标签：iphone, objective-c, xcode

当我启动此 iphone 应用程序时，会在输出控制台中引发此错误：

```
-[__NSCFString stringValue]: unrecognized selector sent to instance 0x548ad0 
```

并与此线程终止崩溃：

```
libsystem_kernel.dylib`__kill:
0x360c0840:  mov    r12, #37
0x360c0844:  svc    #128
>> 0x360c0848:  blo    0x360c0860                ; __kill + 32 
```

调试此问题的最佳方法是什么，以便我可以查看问题所在的代码位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T18:54:04.267

选择断点导航器，这是您的 xcode 导航栏上的第二个选择（在屏幕左侧）

左下角有一个+号，单击并选择添加异常断点。勾选异常断点，异常：ALL，break：抛出，动作：添加动作。（无论如何这应该是默认选择）。单击添加，您的程序现在应该在异常发生的地方停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:50:57.050

1) 在 Xcode 中，使用 Breakpoint Navigator 在 Objective-C 异常上设置断点。

2) 寻找您使用的地方`stringValue`并检查您使用的对象类型是否正确。（它说你已经在一个字符串上调用了它；它应该是别的东西，也许是一个`NSNumber`？）

3）启用僵尸，以防您认为收到`stringValue`消息的东西已被提前释放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T05:40:04.293

错误消息“unrecognized selector sent to instance XXX”表示应用正在尝试调用不存在的方法。经常发生这种情况是因为在错误的对象上调用了该方法。这里，有问题的对象是 NSString（位于内存地址 0x548ad0），方法是 stringValue：

找出代码中发生此错误的位置。您需要找到源文件的名称和行为异常的行号。您可以使用调用堆栈（也称为堆栈跟踪或回溯）来执行此操作。

如果我们保留断点，每当应用程序崩溃时，Xcode 窗口的左窗格就会切换到 Debug Navigator。它显示应用程序中处于活动状态的线程，并突出显示崩溃的线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T18:49:59.690

您正在尝试在对象上调用`stringValue`方法。`NSString`这行不通。你还没有发布任何代码，但我假设你做了这样的事情：

```
NSString *str1 = <#you get your string from somewhere#>;
NSString *str2 = [str1 stringValue]; //crash 
```

要本地化崩溃，请设置异常断点或仅`stringValue`在项目中查找调用。

# html - 如何将两个段落排列/对齐到框中

> ID：12430220
> 
> 赞同：-1
> 
> 时间：2012-09-14T18:44:00.283
> 
> 标签：html, css

> **可能重复：**
> [CSS 样式 - 如何将这两个 div 框相邻放置](https://stackoverflow.com/questions/3540976/css-styling-how-to-put-these-two-div-boxes-adjacent)

我必须2段：

```
Para 1

Para 2 
```

我怎样才能让它看起来像：

```
Para1   Para2 
```

都在自己的空间和盒子里。

![这就是我要的。](../Images/599d1f9394e1e353bd97533471bacec5.png)

```
 <div>
  <div class="block" id="profile">
  <h3>Professional Profile</h3>
  <p>Knowledge in all aspects of web application development. 
  My Skills to solve programming errors gets the job
  faster. Proficient in performance tuning database applications.</p>
  </div> 
```

我在这里做什么？

```
 <div class="block" id ="contact">
  <p>
  <h3> Contact</h3>
  <address>Written by W3Schools.com<br /><a href="mailto:rjohn5854@howardcc.edu">
  Email Me!!!</a><br />Address: Box 3223,City<br />Phone:6750</address>
  <p>
  </div>
  </div>

CSS

  div.block p  {
      display: inline-block;    
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T18:45:27.093

使用[`display: inline-block`CSS 属性](https://developer.mozilla.org/en-US/docs/CSS/display)或类似属性：

```
p { display: inline-block; } 
```

[演示](http://jsfiddle.net/eN39E/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T18:50:06.347

在你的 CSS 中：

```
.align-profile,
.align-contact
{
   display: inline-block;
   vertical-align: top; //also can try other align settings
   width: 45%;
}

.align-contact
{
   margin-left: 30px; //also try depending on the spacing you want between them
} 
```

在您的 html 中：

```
<div class="align-profile">
   <h2>Profile</h2>
   para1
</div>
<div class="align-contact">
   <h2>Contact</h2>
   para2
</div> 
```

*注意 div 或段落必须对齐才能发生这种情况。如果将 div 放入 div 或将段落放入段落中，它将不起作用。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T18:49:32.257

在 HTML 段落标签中

是块元素，所以它占据了父元素的所有宽度。如果你能安排两个

一行中的块，您需要将块行为更改为内联。使用`display: inline`或`display: inline-block`为它。

# java - 如果出现 404 错误，则重定向链接

> ID：12430223
> 
> 赞同：0
> 
> 时间：2012-09-14T18:44:13.097
> 
> 标签：java, javascript, android, ajax, url-scheme

## 问题描述

我正在编写 Android 应用程序，当用户在 Android 中打开标准网络浏览器并导航到我的网页（http://mywebpage.com）并按下某个按钮（测试按钮）时，我需要向我的应用程序添加一些功能页面必须检测我的应用程序是否已安装在 Android 手机上。

## 我做什么来解决这个问题

我已经阅读了很多文章并在这里问了一些问题，并且我知道我无法做某事以使我的网页可以理解我的应用程序是否安装在手机上，我可以做的一件事是在其中编写一些代码清单文件

```
<a href="my.special.scheme://other/parameters/here">

<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <data android:scheme="my.special.scheme" />
</intent-filter> 
```

但这对我来说还不够，因为当用户按下我网站中的链接时，手机上没有安装应用程序，它会给出 404 错误，说没有这样的 URL`my.special.scheme://other/parameters/here`我想为此找到另一个解决方案，这里是我思考。

## 问题的解决方案

`<a href="my.special.scheme://other/parameters/here">`当用户按下链接并显示 404 错误时，我如何从我的网站抛出一些异常。我的意思是我可以进行一些 AJAX 或 JAVA 脚本调用以确定该 url 引用无效链接并在这种情况下重定向到另一个链接。

## 问题2的解决方案

我使用这样的意图过滤器

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <data android:scheme="http" android:host="commonsware.com" android:path="LaunchApp"/>
</intent-filter> 
```

并在这样的网页上放置一个链接

```
<a href="commonsware.com/LaunchApp">Start App</a>. 
```

## 问题

当真实 URL 不存在或它给出 404 错误时，我如何重定向到我指定的 URL。请给我一个例子，因为我不擅长 AJAX 和 JAVA 脚本编码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T06:35:53.920

根据 Diane Hackborn 的回答，我已经做了类似的[事情](https://groups.google.com/d/msg/android-developers/s0DGBknT11o/ehHDOSi1_5wJ)：

> 请不要使用方案，除非它是您已注册的方案。方案对宇宙来说是全球性的，由于您将通过您的网页将其发布到宇宙中，因此您希望遵循它们的规则。
> 
> 您可以采取的另一种方法是创建一个您想要启动的 Intent，并打印 Intent.toUri() 的结果以获取要在链接中使用的字符串。（这应该是一个意图：URI。）然后您可能只想按照该意图将使用的标准命名约定进行自己的操作。如果需要，您甚至可以使用 Intent.setPackage() 确保只有您的应用程序可以从链接启动。（请注意，出于安全原因，您不能使用 Intent.setComponent()。）

我构建了一个 Intent 来启动所需的活动，然后，如前所述，将 Intent 转换为 URI 并将其打印到 stdout。`intent:`我在我的网页中使用的这个 URI（它以一个方案开头）如下所示：

`<a href="intent:/...">Start App</a>`.

如果安装了应用程序，这将启动 Activity，否则它会打开 Play-Store 应用程序，已经显示了应用程序的页面（如果在 Play-Store 中找到）供用户下载和安装。

# perl - 读取特定字符串后如何添加字符串？

> ID：12430243
> 
> 赞同：0
> 
> 时间：2012-09-14T18:45:47.963
> 
> 标签：perl, bash, shell, unix, terminal

我想编写一个要在终端中执行的脚本。

我正在编辑 xml 文件，我想在检测到 xml 列的头部后添加一个或多个字符串。

这是一个示例 xml

```
bunch of line
more unimportant lines
and they can very in number
<States>
<item1> something something </item1>

<item2> something something </item1>

<item3> something something </item1>
</states> 
```

现在我想添加第 4 项。但是，我希望将其插入第 1 项之前。

理想情况下，该文件应如下所示：

```
bunch of line
more unimportant lines
and they can very in number
and even some lines were added here
and here
and here
<States>
<item4> something something </item1>
<item1> something something </item1>

<item2> something something </item1>

<item3> something something </item1>
</states> 
```

请注意，顶部添加了与代码无关的其他内容。这些是将要进入的评论。

我愿意在 perl 中这样做，但 shell 会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:03:35.410

假设你的标题`States`是固定的，你可以试试这个

```
$ tlines=`wc -l your_file | cut -f1  -d ' '`
$ lno=`grep -n "<States>"  your_file | cut -f1 -d ':'`
$ head -${lno} your_file > your_file.tmp
$ cat file_to_insert >> your_file.tmp
$ tail -`expr ${tlines} - ${lno}` your_file >> your_file.tmp 
```

在此之后`your_file.tmp`将插入来自`file_to_insert`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:34:16.687

```
sed '/<States>/a\
<item4> something something </item4>
' input-file 
```

# vb.net - BackGroundWorker ReportProgress 用于对称加密和散列

> ID：12430248
> 
> 赞同：0
> 
> 时间：2012-09-14T18:46:04.240
> 
> 标签：vb.net, events, cryptography, progress-bar, backgroundworker

我正在`encryption/decryption`为用户输入字符串或简单地编写一个应用程序`plain text`。我使用`class`我找到并修改的这个。

```
Imports System.Security.Cryptography
Imports System.IO
Imports System.Text
Imports System.Text.Encoding
Imports System.ComponentModel

Public Class Crypto

#Region "Class Variables"
Public Enum KeySize As Integer
    AES = 128
End Enum

Public Enum Algorithm As Integer
    SHA256 = 1
    Rijndael = 3
End Enum

Public Enum EncodingType As Integer
    HEX = 0
    BASE_64 = 1
End Enum

'Initialization Vectors that we will use for symmetric encryption/decryption. These
'byte arrays are completely arbitrary, and you can change them to whatever you like.
Private Shared IV_8 As Byte() = New Byte() {2, 63, 9, 36, 235, 174, 78, 12}
Private Shared IV_16 As Byte() = New Byte() {15, 199, 56, 77, 244, 126, 107, 239, _
                                      9, 10, 88, 72, 24, 202, 31, 108}
Private Shared IV_24 As Byte() = New Byte() {37, 28, 19, 44, 25, 170, 122, 25, _
                                      25, 57, 127, 5, 22, 1, 66, 65, _
                                      14, 155, 224, 64, 9, 77, 18, 251}
Private Shared IV_32 As Byte() = New Byte() {133, 206, 56, 64, 110, 158, 132, 22, _
                                      99, 190, 35, 129, 101, 49, 204, 248, _
                                      251, 243, 13, 194, 160, 195, 89, 152, _
                                      149, 227, 245, 5, 218, 86, 161, 124}

'Salt value used to encrypt a plain text key. Again, this can be whatever you like
Private Shared SALT_BYTES As Byte() = New Byte() {162, 27, 98, 1, 28, 239, 64, 30, 156, 102, 223}

'File names to be used for private keys
Private Const KEY_PRIVATE As String = "private.key"

'Error messages
Private Const ERR_NO_KEY As String = "No encryption key was provided"
Private Const ERR_NO_ALGORITHM As String = "No algorithm was specified"
Private Const ERR_NO_CONTENT As String = "No content was provided"
Private Const ERR_INVALID_PROVIDER As String = "An invalid cryptographic provider was specified for this method"

'Initialization variables
Private Shared _key As String
Private Shared _algorithm As Algorithm = -1
Private Shared _content As String
Private Shared _exception As CryptographicException
Private Shared _encodingType As EncodingType = EncodingType.HEX
#End Region

#Region "Public Functions"
<Description("The key that is used to encrypt and decrypt data")> _
Public Shared Property Key() As String
    Get
        Return _key
    End Get
    Set(ByVal value As String)
        _key = value
    End Set
End Property

<Description("The algorithm that will be used for encryption and decryption")> _
Public Shared Property EncryptionAlgorithm() As Algorithm
    Get
        Return _algorithm
    End Get
    Set(ByVal value As Algorithm)
        _algorithm = value
    End Set
End Property

<Description("The format in which content is returned after encryption, or provided for decryption")> _
Public Shared Property Encoding() As EncodingType
    Get
        Return _encodingType
    End Get
    Set(ByVal value As EncodingType)
        _encodingType = value
    End Set
End Property

<Description("Encrypted content to be retrieved after an encryption call, or provided for a decryption call")> _
Public Shared Property Content() As String
    Get
        Return _content
    End Get
    Set(ByVal Value As String)
        _content = Value
    End Set
End Property

<Description("If an encryption or decryption call returns false, then this will contain the exception")> _
Public Shared ReadOnly Property CryptoException() As CryptographicException
    Get
        Return _exception
    End Get
End Property

<Description("Encryption of a string using the 'Key' and 'EncryptionAlgorithm' properties")> _
Public Shared Function EncryptString(ByVal Content As String) As Boolean
    Dim cipherBytes() As Byte

    Try
        cipherBytes = _Encrypt(Content)
    Catch ex As CryptographicException
        _exception = New CryptographicException(ex.Message, ex.InnerException)
        Return False
    End Try

    If _encodingType = EncodingType.HEX Then
        _content = BytesToHex(cipherBytes)
    Else
        _content = System.Convert.ToBase64String(cipherBytes)
    End If

    Return True
End Function

Public Shared Function DecryptString() As Boolean
    Dim encText As Byte() = Nothing
    Dim clearText As Byte() = Nothing

    Try
        clearText = _Decrypt(_content)
    Catch ex As Exception
        _exception = New CryptographicException(ex.Message, ex.InnerException)
        Return False
    End Try

    _content = UTF8.GetString(clearText)

    Return True
End Function

Public Shared ReadOnly Property IsHashAlgorithm() As Boolean
    Get
        Select Case _algorithm
            Case Algorithm.SHA256
                Return True
            Case Else
                Return False
        End Select
    End Get
End Property

Public Shared Function GenerateHash(ByVal Content As String) As Boolean
    If Content Is Nothing OrElse Content.Equals(String.Empty) Then
        _exception = New CryptographicException(ERR_NO_CONTENT)
        Return False
    End If

    If _algorithm.Equals(-1) Then
        _exception = New CryptographicException(ERR_NO_ALGORITHM)
        Return False
    End If

    Dim hashAlgorithm As HashAlgorithm = Nothing

    _algorithm = Algorithm.SHA256
    hashAlgorithm = New SHA256Managed

    Try
        Dim hash() As Byte = ComputeHash(hashAlgorithm, Content)
        If _encodingType = EncodingType.HEX Then
            _content = BytesToHex(hash)
        Else
            _content = System.Convert.ToBase64String(hash)
        End If
        hashAlgorithm.Clear()
        Return True
    Catch ex As CryptographicException
        _exception = ex
        Return False
    Finally
        hashAlgorithm.Clear()
    End Try
End Function

Public Shared Sub Clear()
    _algorithm = -1
    _content = String.Empty
    _key = String.Empty
    _encodingType = EncodingType.HEX
    _exception = Nothing
End Sub

#End Region

#Region "Shared Cryptographic Functions"

Private Shared Function _Encrypt(ByVal Content As Byte()) As Byte()

    If Not IsHashAlgorithm AndAlso _key Is Nothing Then
        Throw New CryptographicException(ERR_NO_KEY)
    End If

    If _algorithm.Equals(-1) Then
        Throw New CryptographicException(ERR_NO_ALGORITHM)
    End If

    If Content Is Nothing OrElse Content.Equals(String.Empty) Then
        Throw New CryptographicException(ERR_NO_CONTENT)
    End If

    Dim cipherBytes() As Byte = Nothing
    Dim NumBytes As Integer = 0
    Dim provider As SymmetricAlgorithm

    _algorithm = Algorithm.Rijndael
    provider = New RijndaelManaged
    NumBytes = KeySize.AES

    Try
        'Encrypt the string
        cipherBytes = SymmetricEncrypt(provider, Content, _key, NumBytes)
    Catch ex As CryptographicException
        Throw New CryptographicException(ex.Message, ex.InnerException)
    Finally
        'Free any resources held by the SymmetricAlgorithm provider
        provider.Clear()
    End Try

    Return cipherBytes
End Function

Private Shared Function _Encrypt(ByVal Content As String) As Byte()
    Return _Encrypt(UTF8.GetBytes(Content))
End Function

Private Shared Function _Decrypt(ByVal Content As Byte()) As Byte()

    If _algorithm.Equals(-1) Then
        Throw New CryptographicException(ERR_NO_ALGORITHM)
    End If

    If Content Is Nothing OrElse Content.Length.Equals(0) Then
        Throw New CryptographicException(ERR_NO_CONTENT)
    End If

    Dim encText As String = UTF8.GetString(Content)

    Dim clearBytes() As Byte = Nothing
    Dim NumBytes As Integer = 0
    Dim provider As SymmetricAlgorithm

    _algorithm = Algorithm.Rijndael
    provider = New RijndaelManaged
    NumBytes = KeySize.AES

    Try
        clearBytes = SymmetricDecrypt(provider, encText, _key, NumBytes)
    Catch ex As CryptographicException
        Throw ex
    Finally
        'Free any resources held by the SymmetricAlgorithm provider
        provider.Clear()
    End Try

    'Now return the plain text content
    Return clearBytes
End Function

Private Shared Function _Decrypt(ByVal Content As String) As Byte()
    Return _Decrypt(UTF8.GetBytes(Content))
End Function
#End Region

#Region "Compute Hash"

Private Shared Function ComputeHash(ByVal Provider As HashAlgorithm, ByVal plainText As String) As Byte()
    'All hashing mechanisms inherit from the HashAlgorithm base class so we can use that to cast the crypto service provider
    Dim hash As Byte() = Provider.ComputeHash(UTF8.GetBytes(plainText))
    Provider.Clear()
    Return hash
End Function
#End Region

#Region "Symmetric Cryptography"
Private Shared Function SymmetricEncrypt(ByVal Provider As SymmetricAlgorithm, ByVal plainText As Byte(), ByVal key As String, ByVal keySize As Integer) As Byte()
    'All symmetric algorithms inherit from the SymmetricAlgorithm base class, to which we can cast from the original crypto service provider
    Dim ivBytes As Byte() = Nothing
    Select Case keySize / 8 'Determine which initialization vector to use
        Case 8
            ivBytes = IV_8
        Case 16
            ivBytes = IV_16
        Case 24
            ivBytes = IV_24
        Case 32
            ivBytes = IV_32
        Case Else
            'Throw an error because an invalid key length has been passed
    End Select

    Provider.KeySize = keySize

    'Generate a secure key based on the original password by using SALT
    Dim keyStream As Byte() = DerivePassword(key, keySize / 8)

    'Initialize our encryptor object
    Dim trans As ICryptoTransform = Provider.CreateEncryptor(keyStream, ivBytes)

    'Perform the encryption on the textStream byte array
    Dim result As Byte() = trans.TransformFinalBlock(plainText, 0, plainText.GetLength(0))

    'Release cryptographic resources
    Provider.Clear()
    trans.Dispose()

    Return result
End Function

Private Shared Function SymmetricDecrypt(ByVal Provider As SymmetricAlgorithm, ByVal encText As String, ByVal key As String, ByVal keySize As Integer) As Byte()
    'All symmetric algorithms inherit from the SymmetricAlgorithm base class, to which we can cast from the original crypto service provider
    Dim ivBytes As Byte() = Nothing
    Select Case keySize / 8 'Determine which initialization vector to use
        Case 8
            ivBytes = IV_8
        Case 16
            ivBytes = IV_16
        Case 24
            ivBytes = IV_24
        Case 32
            ivBytes = IV_32
        Case Else
            'TODO: Throw an error because an invalid key length has been passed
    End Select

    'Generate a secure key based on the original password by using SALT
    Dim keyStream As Byte() = DerivePassword(key, keySize / 8)

    'Convert our hex-encoded cipher text to a byte array
    Dim textStream As Byte() = HexToBytes(encText)
    Provider.KeySize = keySize

    'Initialize our decryptor object
    Dim trans As ICryptoTransform = Provider.CreateDecryptor(keyStream, ivBytes)

    'Initialize the result stream
    Dim result() As Byte = Nothing

    Try
        'Perform the decryption on the textStream byte array
        result = trans.TransformFinalBlock(textStream, 0, textStream.GetLength(0))
    Catch ex As Exception
        Throw New System.Security.Cryptography.CryptographicException("The following exception occurred during decryption: " & ex.Message)
    Finally
        'Release cryptographic resources
        Provider.Clear()
        trans.Dispose()
    End Try

    Return result
End Function
#End Region

#Region "Utility Functions"
'********************************************************
'* BytesToHex: Converts a byte array to a hex-encoded
'*             string
'********************************************************
Private Shared Function BytesToHex(ByVal bytes() As Byte) As String
    Dim hex As New StringBuilder
    For n As Integer = 0 To bytes.Length - 1
        hex.AppendFormat("{0:X2}", bytes(n))
    Next
    Return hex.ToString
End Function

'********************************************************
'* HexToBytes: Converts a hex-encoded string to a
'*             byte array
'********************************************************
Private Shared Function HexToBytes(ByVal Hex As String) As Byte()
    Dim numBytes As Integer = Hex.Length / 2
    Dim bytes(numBytes - 1) As Byte
    For n As Integer = 0 To numBytes - 1
        Dim hexByte As String = Hex.Substring(n * 2, 2)
        bytes(n) = Integer.Parse(hexByte, Globalization.NumberStyles.HexNumber)
    Next
    Return bytes
End Function

'********************************************************
'* ClearBuffer: Clears a byte array to ensure
'*              that it cannot be read from memory
'********************************************************
Private Shared Sub ClearBuffer(ByVal bytes() As Byte)
    If bytes Is Nothing Then Exit Sub
    For n As Integer = 0 To bytes.Length - 1
        bytes(n) = 0
    Next
End Sub

'********************************************************
'* GenerateSalt: No, this is not a culinary routine. This
'*               generates a random salt value for
'*               password generation
'********************************************************
Private Shared Function GenerateSalt(ByVal saltLength As Integer) As Byte()
    Dim salt() As Byte
    If saltLength > 0 Then
        salt = New Byte(saltLength) {}
    Else
        salt = New Byte(0) {}
    End If

    Dim seed As New RNGCryptoServiceProvider
    seed.GetBytes(salt)
    Return salt
End Function

'********************************************************
'* DerivePassword: This takes the original plain text key
'*                 and creates a secure key using SALT
'********************************************************
Private Shared Function DerivePassword(ByVal originalPassword As String, ByVal passwordLength As Integer) As Byte()
    Dim derivedBytes As New Rfc2898DeriveBytes(originalPassword, SALT_BYTES, 5)
    Return derivedBytes.GetBytes(passwordLength)
End Function

#End Region

End Class 
```

我刚开始使用`BackgroundWorker`. 执行工人使用，

```
If Not BackgroundWorker.IsBusy = True Then
       BackgroundWorker.RunWorkerAsync()
End If 
```

在按钮单击事件上。然后我调用要执行的动作，即生成密文；

```
Private Sub BackgroundWorker_DoWork(sender As System.Object, e As System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker.DoWork
    'Perform operation 

    Crypto.EncryptionAlgorithm = Crypto.Algorithm.Rijndael
    Crypto.Key = hvalue
    Crypto.Encoding = Crypto.EncodingType.HEX
    Crypto.EncryptString(txtInput.Text)

    System.Threading.Thread.Sleep(500)
End Sub 
```

然后得到加密过程的输出并设置用户控制；

```
Private Sub BackgroundWorker_RunWorkerCompleted(sender As Object, e As System.ComponentModel.RunWorkerCompletedEventArgs) Handles BackgroundWorker.RunWorkerCompleted
    If e.Error Is Nothing Then
        'Complete encryption
        txtOutput.Text = Crypto.Content
        Crypto.Clear()
        'Set controls
        txtOutput.Show()
        btnPrint.Enabled = True
        btnNW.Enabled = True
        btnCopy.Enabled = True
        btnSave.Enabled = True
    Else
        txtOutput.Hide()
        btnPrint.Enabled = False
        btnNW.Enabled = False
        btnCopy.Enabled = False
        btnSave.Enabled = False
    End If
End Sub 
```

我现在的问题是如何开始工作以`ReportProgress`显示`progress`.`encryption/decryption`

我相信在密码学课程中有一些事情要做，`processed bytes`然后将它们显示在`progressbar`或按百分比显示在`textbox`或什至`label`。

作为参考，这里是原始类；

[.NET 框架的密码学 101](http://www.codeproject.com/Articles/15280/Cryptography-101-for-the-NET-Framework)

# c++ - Installshield，安装应用程序后，提示用户安装程序

> ID：12430251
> 
> 赞同：0
> 
> 时间：2012-09-14T18:46:17.333
> 
> 标签：c++, installation, installshield

我目前正在使用 Install Shield 2011 为我们的一个产品构建安装程序，它本身基本上安装了几个较小的 exe，它们作为更大系统的一部分工作，我们注意到一些安装程序构建会提示用户再次安装其中一个应用程序，即使用户刚刚安装了该应用程序。关于可能导致此问题的原因或要寻找哪些设置的任何建议？谢谢。

如果我在提示安装时单击取消，程序会启动。如果我让安装程序再次运行，提示会消失。如果我在安装新版本之前卸载了该应用程序，它就会消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:57:05.983

从安装程序或操作系统向用户提供什么样的提示？如果是 PCA，可以参考[http://msdn.microsoft.com/en-us/library/windows/desktop/bb756937.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756937.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T12:45:14.490

这听起来像是自动修复，是 Windows Installer 弹性的一部分。在事件日志中查找触发修复的组件的指示，并跟踪安装程序中的问题。

# javascript - JavaScript 对象/属性

> ID：12430253
> 
> 赞同：-1
> 
> 时间：2012-09-14T18:46:20.767
> 
> 标签：javascript, html, canvas

我对 JavaScript 相当陌生，并且一直在摆弄 HTML5 元素。

问题是我现在正在使用一个库来帮助简化画布在包括移动设备在内的多种设备上的使用，但我现在有一个问题困扰着我，因为它看起来很简单但我无法找到一个办法。我确实相信这可能是一个新手错误，但这是交易：

我有这两个功能：

```
function drawLine(sX, sY, eX, eY) {
    ctx.beginPath()
    ctx.moveTo(sX, sY);
    ctx.lineTo(eX, eY);
    ctx.stroke();
    ctx.closePath();
    return { x: eX, y: eY };
}

function canvas() {
    var canvas = new Canvas ('canvas', 0, function () {
        this.clear();
        this.setAutoResize(true);
    });

    canvas.canvasElement.width = window.innerWidth;
    canvas.canvasElement.height = window.innerHeight;

    canvas.onTouchStart = function(start) {
        var sX; var sY;
        return {sX: start.clientX, sY: start.clientY};
    }

    canvas.onTouchEnd = function (end) {
        var eX; var eY;
        return {eX: end.clientX, eY: end.clientY};
    }

    // canvas.onTouchMove = drawLine(sX, sY, eX, eY);
} 
```

没有详细介绍，我将如何使用 onTouchStart() 和 onTouchEnd() 返回的值将 x,y 位置传递给 drawLine 函数？

我得到的只是没有定义的值，我真的迷失在这里..

更新：

@胡安门德斯，

感谢您的帮助，但这似乎也不起作用。

为了更好地理解“后台”代码，这里是一个 touchstart 的例子：

```
this.canvasElement.addEventListener('touchstart', function(event) {
    var touchCount = event.changedTouches.length;
    var touches = [];
    var touch = null;

    for (var i = 0; i < touchCount; i++) {
        touch = event.changedTouches[i];

        var touchInfo = {
            pageX : touch.pageX,
            pageY : touch.pageY,
            clientX : touch.clientX,
            clientY : touch.clientY,
            screenX : touch.screenX,
            screenY : touch.screenY,
            target : touch.target,
            identifier : touch.identifier
        };

    self.onTouchStart(touchInfo, i, touchCount, event);

    touches.push(touchInfo);

    self.previousTouchInfo[touch.identifier] = touchInfo;
    }

    if (touchCount == 1) {
        touch = event.changedTouches[0];

        var x = touch.clientX;
        var y = touch.clientY;

        if (self.touchEmulatesMouse) {
            self.mouse.x = x;
            self.mouse.y = y;
            self.mouse.left = true;

            if (self.layerParent != null) {
                self.layerParent.onMouseDown(x, y, 0);
            }

        self.onMouseDown(x, y, 0);
        }
        } else {
            self.onMultiTouchStart(touches, event);
        }
    }, false);

/* A bit more down the library code */
/**
* Called at the start of every touch start (including when multiple touches occured)
*
* The info object contains the folloring info:
* - pageX - X coordinate relative to the full page (includes scrolling)
* - pageY - Y coordinate relative to the full page (includes scrolling)
* - clientX - X coordinate of touch relative to the viewport (excludes scroll offset)
* - clientY - Y coordinate of touch relative to the viewport (excludes scroll offset)
* - screenX - X coordinate relative to the screen
* - screenY - Y coordinate relative to the screen
*
* @param {object} info Touch info
* @param {integer} index Touch index
* @param {integer} count The total number of active touches
* @param {object} event The actual touch event
*/
onTouchStart: function(info, index, count, event) {}, 
```

而且我还更改了代码以反映您的帮助，进行了一些更改，并尝试使用 touchInfo 参数，如下所示：

```
function createCanvas() {
var canvas = new Canvas ('canvas', 0, function () {
    this.clear();
    this.setAutoResize(true);
});

var cWidth = canvas.canvasElement.width = window.innerWidth;
var cHeight = canvas.canvasElement.height = window.innerHeight;

var startPoint = null;

function fill() {
    canvas.fillStyle = "black";
    canvas.fillRect(0, 0, cWidth, cHeight);
    canvas.beginPath();
}

// Draw a line on the canvas from (s)tart to (e)nd
function drawLine(sX, sY, eX, eY) {
    canvas.beginPath()
    canvas.moveTo(sX, sY);
    canvas.lineTo(eX, eY);
    canvas.stroke();
    canvas.closePath();
    //return { x: eX, y: eY };
}

fill();

canvas.onTouchStart = function(start) {
    startPoint = {sX: this.clientX, sY: this.clientY};
}

canvas.onTouchEnd = function (end) {
    drawLine(startPoint.sX, startPoint.sY, this.clientX, this.clientY);
    // return {eX: end.clientX, eY: end.clientY};
}
} 
```

任何帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:51:05.040

很难说出你在问什么，但希望这会有所帮助

我认为您需要的是以下内容

```
(function() {
// Save the startPoint so we can use it when the touch ends to draw the line
var startPoint;
canvas.onTouchStart = function(e) {
    // set the shared variable 
    startPoint = {x: e.clientX, y: e.clientY};
}

canvas.onTouchEnd = function (e) {
    drawLine(startPoint.x, startPoint.y, e.clientX, e.clientY);
}
})(); 
```

我认为事件的名称是`ontouchstart`，不是`onTouchStart`

这就是我认为你的代码应该是这样的

```
function drawLine(sX, sY, eX, eY) {
    // Bad use of ctx global, you should pass it into the function so you can support
    // multiple contexts
    ctx.beginPath()
    ctx.moveTo(sX, sY);
    ctx.lineTo(eX, eY);
    ctx.stroke();
    ctx.closePath();
    // Kind of silly to return this object, the caller already passed it in
    // Should be used only if you need some kind of chaining, but
    // makes for a weird API
    return { x: eX, y: eY };
}

// Don't name a function and a variable the same thing, 
// you had canvas as a variable and as a function. 
// They didn't cause a problem, but it's just not pretty to look at
function createCanvas() {    
    var canvas = new Canvas('canvas', 0, function () {
        this.clear();
        this.setAutoResize(true);
    });

    canvas.canvasElement.width = window.innerWidth;
    canvas.canvasElement.height = window.innerHeight;

    // Save the startPoint so we can use it when the touch ends to draw the line
    var startPoint;
    // Correct spelling for ontouchstart
    canvas.ontouchstart = function(start) {
        // set the shared variable that will be used when they finish touching
        startPoint = {x: e.clientX, y: e.clientY};
    }

    // Draw the line
    canvas.ontouchend = function (e) {
        drawLine(startPoint.x, startPoint.y, e.clientX, e.clientY);
    }    
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T01:22:29.970

我终于设法解决了这个问题。原来图书馆还没有正确结束（还），我也在没有得到任何参数的情况下滥用这些函数。

# sql - 在选择中添加“-”而不是空格

> ID：12430254
> 
> 赞同：2
> 
> 时间：2012-09-14T18:46:34.657
> 
> 标签：sql, sql-server, sql-server-2008

有没有办法在我的选择语句的下面的列中添加“-”管理器而不是规范：

```
SPACE(([Depth]-1)*4) + [OrgUnitName] AS [OrgUnitName], 
```

所以现在它为有多少深度增加了空间。是否可以添加“-”字符而不是空格？数据是位置，因此单词之间也可以有空格。

因此对于：

```
Test
 Test2
  Test23 
```

我想：

```
Test
-Test2
--Test23 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T18:48:52.527

从以下文档[`REPLICATE`](http://msdn.microsoft.com/en-us/library/ms174383.aspx)：

```
REPLICATE ( string_expression ,integer_expression ) 
```

那是

```
REPLICATE ('-', ([Depth]-1)*4) + [OrgUnitName] AS [OrgUnitName], 
```

在你的情况下。

但是，我更喜欢`Depth`作为输出列返回并使用代码格式化破折号。根据我的经验，SQL 查询中尽可能少的格式和逻辑可以提高可维护性。

# ruby - Ruby中的类和该类的单例有什么区别？

> ID：12430255
> 
> 赞同：4
> 
> 时间：2012-09-14T18:46:42.157
> 
> 标签：ruby, eigenclass

好的，所以我正在尝试在 Ruby 中进行一些元编程，但我有点困惑。根据我读过的几篇文章（如[这篇](http://ryanangilly.com/post/234897271/dynamically-adding-class-methods-in-ruby)文章），为了向 Ruby 类动态添加类方法，您必须使用该类的单例类：

```
class Klass
end

class << Klass
  self.define_method(:foo) { return "foo" }
end 
```

为什么会这样，这和这有什么不同？

```
class Klass
  self.define_method(:foo) { return "foo" }
end 
```

（对不起，如果这个问题包含任何错误的假设。就像我说的，我有点困惑。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T19:55:07.697

直接回答你的问题：`Module#define_method`创建一个实例方法。“类方法”是对象的单例类（或特征类）上的实例方法`Class`。我敢肯定这听起来很令人困惑。让我解释一下为什么 Ruby 首先包含“单例类”的概念：

首先，让我说不同面向对象语言的基本“框架”是多种多样的。Ruby 在对象、类、元类等方面的设计绝不是唯一可能的设计，该语言*可以*以不同的方式设计。话虽如此，Ruby 以它的方式工作是有逻辑的原因的。我会尽量简明扼要地解释...

考虑一个简单的方法调用，例如：

```
[1,2,3].first 
```

在这里，我们调用了一个名为 的方法`first`，其中一个`Array`对象作为接收者。为了处理这个方法调用，Ruby 需要搜索匹配的方法定义并执行它。它从哪里开始寻找？自然，在 的实例方法中`Array`。如果在那里没有找到，它会在`Array`'s 的超类中查找，然后是超类的超类，以及`Module`混入的 s`Array`或其超类等。

“基于类”（与基于原型相反）的面向对象语言或多或少都以这种方式工作。如果您曾经使用 Java、C++ 或 Python 进行过编程，那么您应该对这种行为很熟悉。

现在，Ruby 的创建者还希望能够为*一个*对象添加方法。在基于原型的 OO 语言中，这很容易，但它如何在基于类的语言中工作？他通过引入“单例类”或“特征类”的概念使之成为可能。

简单地说，“单例类”是只有*一个*实例的类。*我相信，与其尝试为每个*对象跟踪不同的单例类，Ruby 会等到您第一次尝试访问对象的单例类，然后创建该类并将其动态插入到对象的继承链中。

正如我刚才所说，当一个方法被调用时，Ruby首先在对象的类中查找匹配的定义，然后是超类等。由于单例类作为对象继承链中的*第一个链接插入，因此它们是第**一位*的Ruby 将寻找方法定义。

引入“单例类”的概念同时也解决了另一个问题。在 Java 中（例如），您可以定义`static`在类上调用的方法。在 Ruby 中，人们经常想做类似的事情。使用“单例”类和方法，您*可以*做到这一点：您所要做的就是在 Class 对象上定义一个单例方法。

（请记住，在 Ruby 中，类*也是*对象。这就是为什么“单例”类和方法的概念可以“用 1 块石头杀死 2 只鸟”的原因，正如我在上面解释的那样！）

**额外的信息：**

一开始，我提到了“实例方法”。我不知道这是否会令人困惑，或者您是否已经知道“实例方法”是什么。当你定义一个 Ruby 类时，像这样......

```
class MyClass
  def my_method
    # do something
  end
end 
```

...然后`my_method`将*作为*. `MyClass`当 Ruby 在对象的类、超类等中搜索方法定义时，它实际查看的是它们的*实例方法*。所以一个对象的“方法”就是它的类的实例方法，加上超类的实例方法、超类的超类等等。

关于单例类如何与 Ruby 中的方法查找交互，有一点我上面没有提到的不一致。如果你想详细了解：

*类对象*的单例类的处理方式与一般其他对象的单例类略有不同。如果您有一个`A`从另一个类继承的类`B`，并且`B`具有单例方法，`A`则不仅会继承实例方法，*还会*继承的单例方法`B`。换句话说，`B`的单例类被视为 的单例类的超`A`类。这不适用于任何其他对象的单例类。

# android - android后退按钮处理

> ID：12430260
> 
> 赞同：0
> 
> 时间：2012-09-14T18:47:17.093
> 
> 标签：android

我目前有一个项目，其中主要活动启动另一个活动以收集信息，然后返回主要活动。我正在尝试处理后退按钮按下。每次我执行以下代码时，它都会崩溃。但我不明白为什么。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {

        finish();
        return true;
    }
    return super.onKeyDown(keyCode, event);
}; 
```

我也试过：

```
@Override
    public void onBackPressed() {
            finish();
    }; 
```

堆栈跟踪：

```
09-14 15:30:13.740: E/AndroidRuntime(32400): FATAL EXCEPTION: main
09-14 15:30:13.740: E/AndroidRuntime(32400): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=2, result=0, data=null} to activity {peaBerry.Shopping.Consultant/peaBerry.Shopping.Consultant.PeaBerryTeaActivity}: java.lang.NullPointerException
09-14 15:30:13.740: E/AndroidRuntime(32400):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2655)
09-14 15:30:13.740: E/AndroidRuntime(32400):    at android.app.ActivityThread.handleSendResult(ActivityThread.java:2697)
09-14 15:30:13.740: E/AndroidRuntime(32400):    at android.app.ActivityThread.access$2000(ActivityThread.java:124)
09-14 15:30:13.740: E/AndroidRuntime(32400):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:998)
09-14 15:30:13.740: E/AndroidRuntime(32400):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-14 15:30:13.740: E/AndroidRuntime(32400):    at android.os.Looper.loop(Looper.java:130)
09-14 15:30:13.740: E/AndroidRuntime(32400):    at android.app.ActivityThread.main(ActivityThread.java:3806)
09-14 15:30:13.740: E/AndroidRuntime(32400):    at java.lang.reflect.Method.invokeNative(Native Method)
09-14 15:30:13.740: E/AndroidRuntime(32400):    at java.lang.reflect.Method.invoke(Method.java:507)
09-14 15:30:13.740: E/AndroidRuntime(32400):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-14 15:30:13.740: E/AndroidRuntime(32400):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-14 15:30:13.740: E/AndroidRuntime(32400):    at dalvik.system.NativeStart.main(Native Method)
09-14 15:30:13.740: E/AndroidRuntime(32400): Caused by: java.lang.NullPointerException
09-14 15:30:13.740: E/AndroidRuntime(32400):    at peaBerry.Shopping.Consultant.PeaBerryTeaActivity.onActivityResult(PeaBerryTeaActivity.java:312)
09-14 15:30:13.740: E/AndroidRuntime(32400):    at android.app.Activity.dispatchActivityResult(Activity.java:3958)
09-14 15:30:13.740: E/AndroidRuntime(32400):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2651) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T19:35:46.383

根据错误消息，缺少结果。你开始第二个活动了`startActivityForResult()`吗？如果是这样，请在调用第二个 Activity 之前添加[setResult(value)](http://developer.android.com/reference/android/app/Activity.html#setResult%28int%29)或[setResult(value, data)](http://developer.android.com/reference/android/app/Activity.html#setResult%28int,%20android.content.Intent%29)`finish()`，以将预期结果传递回调用 Activity。

# wpf - 在 WPF 中的文本框上设置可访问属性

> ID：12430262
> 
> 赞同：0
> 
> 时间：2012-09-14T18:47:25.353
> 
> 标签：wpf, vb.net, xaml, dependency-properties

我有一个添加了依赖属性的 texbox，它使我能够直接在文本框上添加一个正则表达式，并且文本框会根据正则表达式是否通过或失败而更改。（[如何定义 TextBox 输入限制？](https://stackoverflow.com/questions/1103765/how-to-define-textbox-input-restrictions) Nathan Tornquist 帖子）

现在我想添加一个属性，当正则表达式失败或不失败时我将更新它，所以真的是一个布尔值。

我希望这样当我在将新信息添加到数据库之前进行验证时，我的所有新信息都会通过它们各自的正则表达式。

所以基本上我希望能够做到这一点

```
if(txtPostalCode.passRegex=true) Then 
```

到目前为止，我已将其添加到课程中

```
Public Shared ReadOnly PassRegexProperty As DependencyProperty = DependencyProperty.RegisterAttached("PassRegex", GetType(Boolean), GetType(ColorMasking), New PropertyMetadata(False))

    Public Shared Sub SetPassRegex(obj As DependencyObject, PassRegex As Boolean)
        obj.SetValue(PassRegexProperty, PassRegex)
    End Sub

    Public Shared Function GetPassRegex(obj As DependencyObject) As Boolean
        Return DirectCast(obj.GetValue(PassRegexProperty), Boolean)
    End Function 
```

该属性显示何时在代码的 xaml 位中，但如果我在一个模块或其他东西中，我如何访问这个值？

我相信也许我没有使用正确的方法，但我一直在谷歌上寻找很多东西，似乎找不到一个好的答案来为我指明正确的方向。

任何帮助或建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:59:55.673

从后面的代码中，您必须使用以下`GetValue`方法从扩展的 TextBox 控件的实例中访问它：

```
bool passRegexValue = (bool)MyTextBox.GetValue(ColorMasking.PassRegexProperty); 
```

（`GetValue`属于底层的[DependencyObject](http://msdn.microsoft.com/en-us/library/ms589309)类型。）

# cocoa - 如何让 NSLider 向对象发送带有参数的消息？

> ID：12430264
> 
> 赞同：0
> 
> 时间：2012-09-14T18:47:28.670
> 
> 标签：cocoa, selector

在运行时，我在 NSMenu 中创建了一个 NSSlider。我想向目标对象发送一条消息，但该消息还需要一个浮点参数。

到目前为止，我已经设法通过在 NSSlider 上保留一个指针来做到这一点：

```
NSSlider * widthSlider = [[NSSlider alloc] 
                           initWithFrame:NSMakeRect(16, 0, 150, 32)];
[widthSlider setMinValue:0.1];
[widthSlider setMaxValue:10];
[widthSlider setTarget:self];
 widthSliderRef=widthSlider;
[widthSlider setAction:@selector(updateLW:)];
[...]
-(void) updateLW:(id)sender {
[self setLW:[widthSliderRef doubleValue]]; } 
```

现在我想摆脱`widthSliderRef`.

我希望 NSSlider 将其作为参数发送`setLW:`到。`self``doublevalue`

怎么做到呢 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:51:53.900

to的`sender`参数`updateLW:`应该是滑块——您可以发送`doubleValue`到该滑块。

# ios - MonoTouch：TabItem BadgeValue

> ID：12430265
> 
> 赞同：1
> 
> 时间：2012-09-14T18:47:32.403
> 
> 标签：ios, xamarin.ios, uitabbarcontroller, badge

`MonoTouch 5.4`在新版本`XCode`和`iOS`6.0上使用

**TabBarController 代码中**的旧ViewController：****

 **```
this.TabBarItem.BadgeValue = "5"; 
```

不再工作。

**新代码**，改成这个确实有效：

```
this.TabBarController.TabBar.Items[theIndexOfTab].BadgeValue = "5"; 
```

不工作是指徽章没有出现，在旧情况下该值被忽略。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T00:17:21.950

我认为这是正常的。也许您的代码在更新之前已更改/重构？

`TabBarItem`*在此*视图控制器的*标签栏项目*中定义`UIViewController`并表示。

 ***这个*视图控制器`this.TabBarItem`的标签栏项目也是如此，例如我在我的代码中使用了 a （我们称之为它）。*`UITabBarController``parent`*

 *`this.TabBarController.TabBar.Items[x]`将代表*this*的其中一个**子**视图控制器的*选项卡栏项*。 ***`parent`***

 ***因此，当我创建`child1`and `child2`（的两个实例`UIViewController`）并将它们分配给我们时，`parent.ViewControllers`我们得到三个实例`UITabBarItem`（一个用于父级，一个用于每个子级） - 但只有两个实例（子级将永远可见）。

例如从记录句柄值

```
2012-09-14 20:13:24.092 test1[47917:1507] parent.TabBarItem.Handle = 291086496
2012-09-14 20:13:24.094 test1[47917:1507] parent.TabBar.Items [0].Handle = 218412640
2012-09-14 20:13:24.094 test1[47917:1507] parent.TabBar.Items [1].Handle = 160885040
2012-09-14 20:13:24.095 test1[47917:1507] child1.TabBarItem.Handle = 218412640 
2012-09-14 20:13:24.096 test1[47917:1507] child2.TabBarItem.Handle = 160885040 
```

所以我可以这样做：

```
child1.TabBarItem.BadgeValue = "5"; // or
parent.TabBar.Items[0].BadValue = "5"; 
```

获得相同的行为。但是，更改在`parent.TabBarItem`任何地方都不会可见（至少在我`RootViewController`的测试应用程序的情况下不是）。********

# php - 需要帮助调试 cron 作业

> ID：12430266
> 
> 赞同：0
> 
> 时间：2012-09-14T18:47:35.760
> 
> 标签：php, cron, crontab

我有一个没有运行的 cron 作业。我在这方面的经验并不丰富，所以我可能遗漏了一些明显的东西，但我就是想不通。

这是来自 crontab 的相关文本。（这是在某种 Windows 服务器上运行的。不幸的是，我不知道配置的详细信息。）

```
0,15,30,45 * * * * /usr/apps/nrbadm/php_invoker framework/index.php dc rezound newsql > /dev/null 2>&1
0,15,30,45 * * * * /usr/apps/nrbadm/php_invoker framework/index.php dc droid4 newsql > /dev/null 2>&1
0,15,30,45 * * * * /usr/apps/nrbadm/php_invoker framework/index.php dc ipad3 newsql &> /tmp/crn/ipad3.log
10,25,40,55 * * * * /usr/apps/nrbadm/php_invoker2 galaxys3_data.php >> /usr/apps/webdata/dashboards/cronlog.txt
10,25,40,55 * * * * /usr/apps/nrbadm/php_invoker2 galaxys3_data_full.php >> /usr/apps/webdata/dashboards/cronlog.txt
10,25,40,55 * * * * /usr/apps/nrbadm/php_invoker2 incredible4_data.php >> /usr/apps/webdata/dashboards/cronlog.txt
0,15,30,45 * * * * /usr/apps/nrbadm/php_invoker_gen queue_summary_data.php >> /usr/apps/webdata/cron/errorlog.txt 
```

最后一行是行不通的。我包括了其他行进行比较，因为它们*正在*工作。前三行调用一个名为 php_invoker 的脚本。（如果语法看起来很奇怪，那是因为这个脚本在 CodeIgniter 环境中。）这些是由我替换的程序员设置的。

第二组3个是我设置的。我们正在将站点从 CodeIgniter 中移植出来，所以我不得不移植这些文件。我复制了 php_invoker，用必要的编辑制作了 php_invoker2，它工作了。因此，当需要设置这个新的时，我做了同样的事情，只是它没有运行。新脚本 php_invoker_gen 旨在运行服务器上“cron”文件夹中的任何 PHP 脚本。

以下是 php_invoker_gen 的全文：

```
#!/bin/bash

export LD_LIBRARY_PATH="/usr/apps/oracle/product/10.2.0/db_1/lib32:$LD_LIBRARY_PATH"

/usr/apps/php/bin/php -f /usr/apps/webdata/cron/$1 
```

正如我所说，这是从原始 php_invoker 脚本中复制的。我唯一改变的是最后一行的第二部分指向我试图运行的 PHP 脚本。我不完全理解这里发生的一切，但从我能够弄清楚的（如果我错了有人纠正我） $1 是一个变量，它被替换为在 crontab 中传递的值上面的行，所以“queue_summary_data.php”。

结果路径应该是：

```
/usr/apps/webdata/cron/queue_summary_data.php 
```

我已经验证了这条路径是正确的。此文件的权限设置为 777。（我知道这有点矫枉过正，但我​​已经到了尝试任何东西的地步。）

我还验证了被调用脚本的路径是正确的：

```
/usr/apps/nrbadm/php_invoker_gen 
```

该文件的权限设置为 755，因此它是可执行的。这是与正在运行的其他两个脚本相同的权限级别。

如果我通过 PuTTY 登录服务器，我可以从命令行运行脚本。

```
/usr/apps/php/bin/php -f /usr/apps/webdata/cron/queue_summary_data.php 
```

在终端窗口中输入时有效。脚本运行并正确更新数据。但是 cron 作业就是不想运行。

我已经没有调试这个东西的想法了。事实上，我之前做过一次没有任何麻烦，这让我很沮丧。我确定这是我忽略的简单事情，但我不知道它可能是什么。

在此先感谢您的帮助。

->稍后.....香料

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:27:27.093

就这样问题被关闭并回答它是脚本上的换行符在运行时导致错误。我在终端中编辑了服务器上的文件以删除它们并开始运行。感谢大家！

# svn - 如何通过jenkins将文件从svn复制到指定位置

> ID：12430268
> 
> 赞同：0
> 
> 时间：2012-09-14T18:47:40.437
> 
> 标签：svn, jenkins

我试图使用詹金斯将我的文件重新分发到生产系统。源 php 文件位于 svn 中。如何将 svn 文件复制到指定的文件夹，我应该使用哪个构建步骤“执行 shell cmd 或执行 windows 批处理命令”。我在linux操作系统中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:18:15.637

我建议使用颠覆[导出](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.export.html)命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:53:42.003

如果您在 Linux 上，您肯定会想要使用 Execute Shell 命令对话框。如上一个答案所述，SVN Export 会将您的文件导出到生产服务器。

您还可以让 Jenkins 使用 SVN 插件在本地检查文件，然后使用 SCP 将它们复制到远程计算机。

# php - Magento 将横幅添加到自定义 phtml

> ID：12430269
> 
> 赞同：0
> 
> 时间：2012-09-14T18:47:41.907
> 
> 标签：php, mysql, html, magento, magento-1.6

我是 magento 的新手，我想添加一个可以使用 CMS 处理的横幅，因此我不需要直接编辑 HTML。

实际上我使用的是静态块，所以我可以对其进行编辑，它会显示在页面内。我在网上阅读了一些使用小部件的示例，但我不清楚小部件相对于简单的静态块有什么优势。顺便说一句，小部件没有显示在页面内，由于长时间的谷歌搜索，它似乎可能取决于不支持小部件的自定义主题......

如何在页面中包含小部件和/或重新启用选择将其放置在 CMS 中的位置的机会？

与简单的静态块相比，小部件有什么优势？

我正在开发一个 magento 1.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:27:23.977

要在您的页面中显示横幅或横幅幻灯片标记，您可以使用所需的 html 创建一个静态块。

然后使用布局更新将其添加到任何页面。我更喜欢使用`app\design\frontend\default\absolute\layout\local.xml`. 如果您还没有，请创建此文件，然后将以下 xml 放入其中。

在这里，您的静态块的 id 假定为`custm_slideshow`. 以下代码段特定于主页。但是如果你想在所有页面中显示它，而不是`<cms_index_index></<cms_index_index>`使用`<default></default>`.

```
<layout version="0.1.0">
    <cms_index_index>
        <reference name="content">
            <block type="cms/block" name="custom.slideshow">
                <action method="setBlockId">
                    <block_id>custom_slideshow</block_id>
                </action>
            </block>
        </reference>
    </cms_index_index>
</layout> 
```

如果您想了解更多关于小部件[的信息，这是一个不错的选择](http://www.magentocommerce.com/blog/comments/introducing-magento-widgets/)，以防您错过。

# jquery - 过滤下划线模板中的项目

> ID：12430270
> 
> 赞同：0
> 
> 时间：2012-09-14T18:47:43.777
> 
> 标签：jquery, underscore.js

我正在尝试过滤掉[下划线](http://underscorejs.org/)模板中的元素。例如，我只想返回没有类名“pin”的元素。任何人都知道我如何使用下划线方法或 jquery 来做到这一点

```
var renderToHTML = function( data ) {
    var list = data.results[0].items;
    var tmpl = $( template({items : list}) );
    // var layout = tmpl.filter()
} 
```

我的模板代码如下所示。

```
<% _.each(items,function(item,i){ %> 
    <% var cls=( item.id == 'feature') ? "pin" : 'item'; %>
    <div class="<%=cls%> <%=item.id%>" style="width:<%=item.width%>px">
        <div class="itemInner">
            <img src="<%= item.img %>" />
            <div class="title"><%= item.title %></div>
        </div>
    </div>
<% }); %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T19:18:50.083

如果您想从生成的 HTML 中提取`<div>`没有类的 s `pin`，那么您可能需要使用[`:not`](http://api.jquery.com/not-selector/)：

```
$(':not(.pin)')
$('some_prefix_for_specificity :not(.pin)')
$some_root_element.find(':not(.pin)')
//... 
```

或者，给定模板中的逻辑，您也许可以寻找`.item`：

```
$('.item')
$('some_prefix_for_specificity .item')
$some_root_element.find('.item')
//... 
```

如果您只想`pin`在来自模板的 HTML 中包含非 s，那么：

```
<% _.each(items, function(item, i) { %>
    <% if(item.id != 'feature') { %>
        <div class="item <%= item.id %>" style="width: <%= item.width %>px">
            <!--...-->
        </div>
    </div>
<% }); %> 
```

或者也许使用[`_.chain`](http://underscorejs.org/#chain)and [`_.filter`](http://underscorejs.org/#filter)：

```
<% _(items).chain().filter(function(item) { return item.id != 'feature' }).each(function(item, i) { %>
    <div class="item <%= item.id %>" style="width: <%= item.width %>px">
        <!-- ... -->
    </div>
<% }); %> 
```

如果您想在此级别执行此操作：

```
var tmpl = $(template({items : list})); 
```

然后你会想使用 jQuery[`filter`](http://api.jquery.com/filter/)而不是[`find`](http://api.jquery.com/find/)：

```
var not_pins = tmpl.filter(':not(.pin)'); 
```

或者，再次，给定模板的特定结构：

```
var not_pins = tmpl.filter('.item'); 
```

# asp.net - 在 ASP.NET 站点中允许用户创建的模板

> ID：12430271
> 
> 赞同：1
> 
> 时间：2012-09-14T18:47:47.367
> 
> 标签：asp.net, templates, user-input

我有一个网站，我正在从 Classic ASP 转换为 ASP.NET。旧网站允许用户编辑网站模板，为他们的网站部分创建自己的设计（想想 MySpace，只有 LESS 专业。）

我一直在绞尽脑汁想弄清楚如何使用 .NET 来做到这一点。我的网站通常使用母版页，但显然这不适用于最终用户。

我尝试将 HTML 模板加载为常规文本文件，并将其解析为“适合”内容占位符。它和听起来一样丑陋。

这里有一个通常被认为是最佳实践的东西，但我肯定找不到它。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T19:10:12.773

您希望您的用户拥有多少控制权？

有几种方法可以实现这一点。我将简要总结一下我能想到的所有想法：

### 带有预定义字段的静态 HTML。

通过这种方法，您可以获得完全控制权，并将任何安全漏洞的风险降到最低。您可以将每个用户的 HTML 存储在某个数据库表中。该 HTML 将具有带有一些标记的预定义字段，例如使用`{fieldName}`. 然后，您将使用一个简单的解析器来识别大括号并替换`fieldName`为从`Dictionary<String,String>`某个地方提取的字符串值。

如果您对字符串处理很聪明（即使用状态机解析器来查找花括号，将重建的字符串直接发送到输出或 StringBuilder 等，重要的是*不*使用`String.Replace`），这种方法可能会很快。缺点是它不是一个真正的模板系统：没有提供循环结果集（假设你想允许），表达式评估，但它适用于简单的“将这个内容插入这个空间”类型的设计。

### 允许用户编辑自己的 ASPX 或 ASCX 文件。

如果可以使用 ASP.NET，为什么还要构建自己的模板系统？好吧，如果您想构建一个快速的“n”脏报告系统，这种方法是最简单的，但它在安全性方面非常失败。不幸的是，由于 ASP.NET 的工作原理，您无法保护沙箱中 ASPX 文件中的任何`<% %>`/代码或使用 CAS（我之前自己研究过：[基于每个视图的 ASP.NET MVC 的代码访问安全性](https://stackoverflow.com/questions/11943888/code-access-security-on-a-per-view-asp-net-mvc-basis)）。`<script runat="server">`

您不需要将实际的 ASPX 和 ASCX 文件存储在网站的文件系统中，您可以使用`VirtualPathProvider`实现将文件存储在数据库中，但是让它正常工作可能有点痛苦（尤其是作为 ASP.NET运行时编译 ASPX 文件，因此如果用户修改了 ASPX 文件，您需要通知它）。您还需要注意，ASPX 加载与用户的请求路径相关联（除非您使用路由或 MVC），因此您最好使用 ASCX，这并不重要。

### 在自己的 CAS 沙箱中运行的自定义 ASP.NET 处理程序，它实现了一个成熟的模板引擎

这是最痛苦的选择，它介于两者之间：您可以获得一流模板引擎的灵活性（循环、字段、必要时的评估），而无需打开应用程序以应对巨大的安全漏洞。缺点是你需要自己构建几乎所有东西。我不会在这里详细介绍。

您选择哪个选项取决于您的要求。MySpace 的系统更像是“换皮”而不是“模板化”，因为用户可以自由设置样式表并定义一些任意的通用 HTML，而不是直接修改他们页面的通用模板。

您可以在 ASP.NET 中轻松实现类似 MySpace 的系统，假设每个可换肤功能都作为`Control`子类实现，只需扩展您的`Render`方法以允许插入所述任意 HTML。添加自定义样式表也很容易：只需将其添加到`<style type="text/css">`页面的`<head>`.

当/如果您确实允许用户直接输入 HTML，我强烈建议您对其进行解析并过滤掉任何危险元素（例如`<script>`、`<style>`、`<object>`等）。如果您想允许嵌入 YouTube 视频和相关视频，那么您应该分析`<object>`元素以确保它们确实属于 YouTube 视频，提取视频 ID，然后从已知的受信任模板重新创建元素。任何自定义 HTML 都是“标签平衡”的，这一点很重要（您可以通过严格的 XML 解析器而不是更宽容的 HTML 解析器来验证这一点，因为无论如何 XHTML （技术上）是 HTML 的一个子集），这样任何自定义标记不会破坏页面。

玩得开心。

# c++ - 利用 BST 的优先级队列——DeleteLargest 不起作用

> ID：12430272
> 
> 赞同：-1
> 
> 时间：2012-09-14T18:47:50.017
> 
> 标签：c++, c, data-structures

我正在为我的数据结构类创建一个使用二叉搜索树的优先级队列。但是当我尝试输出队列时，我总是得到 0。我查看了我的 DeleteLargest 和 Dequeue 成员函数，但我找不到错误

测试.cpp

```
#include <iostream>
#include "CTree.h"
#include "PriorityQueueBST.h"
using namespace std;

int main()
{

    int num, input, output;
    cout << "Enter number of elements: ";
    cin >> num;
    PriorityQueueBST p;
    for (int x = 0; x < num; x++)
    {
        cout << "Enter number " << x + 1  
            << " of " << num << ": ";
        cin >> input;
        p.Enqueue(input);
    }
    for (int y = 0; y < num; y++)
    {
        cout << "Outputting number " << y + 1  
            << " of " << num << ": ";
        if(p.IsEmpty())
        {
            break; //we are done (this is an error!)
        }
        output = p.Dequeue();
        cout << output << endl;
    }

    system("pause");
    return 0;
    //CTree* tr = new CTree();
    //
    //for (int i = 0; i < 3; i++)
    //  tr->Add();

    //tr->View();
    //system("pause");

    //return 0;
} 
```

BST 声明文件

```
//#ifndef CTREE_H
//#define CTREE_H
//using namespace std;

struct TreeNode
{
    int info;
    TreeNode* leftLink;
    TreeNode* rightLink;
};

class CTree
{

private:

    void AddItem( TreeNode*&, TreeNode*);
    void DisplayTree(TreeNode*);
    void Retrieve(TreeNode*&, TreeNode*,bool&);
    void Destroy(TreeNode*&);

public:
    CTree();
    ~CTree();
    void Add();
    void View();
    bool IsEmpty();
    int DeleteLargest(TreeNode*&);
    TreeNode *tree;
};

//#endif 
```

BST 实施文件

```
#include <iostream>
#include <string>

using namespace std;

#include "CTree.h"

CTree::CTree()
{
    tree = NULL;
}

CTree::~CTree()
{
    Destroy(tree);
}

void CTree::Destroy(TreeNode*& tree)
{
    if (tree != NULL)
    {
    Destroy(tree->leftLink);
    Destroy(tree->rightLink);
    delete tree;
    }
}

bool CTree::IsEmpty()
{
    if(tree == NULL) 
    {
        return true;
    }
    else
    {
        return false;
    }
}

void CTree::Add()
{
    TreeNode* newPerson = new TreeNode();
    /*cout << "Enter the person's name: ";
    std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
    cin.getline(newPerson->name, 20);*/
   /* cout << "Enter the person's contribution: ";
    cin >> newPerson->info;*/
    /*bool found = false;*/

    newPerson->leftLink = NULL;
    newPerson->rightLink = NULL;

    /*Retrieve(tree, newPerson, found);
     if (found)
         cout << "info allready entered\n";
     else*/
         AddItem(tree, newPerson);
}

void CTree::View()
{
    if (IsEmpty())
    {
        cout<<"The list is empy";
    }
    else
    {
        DisplayTree(tree);

    }

};

void CTree::AddItem( TreeNode*& ptr, TreeNode* newPer )
{
        if (ptr == NULL)
        {
            ptr = newPer;
        }
        else if ( newPer->info < ptr->info)
            AddItem(ptr->leftLink, newPer); 
        else
            AddItem(ptr->rightLink, newPer); 
}
void CTree::DisplayTree(TreeNode* ptr)
{
    if (ptr == NULL)
                    return;
    DisplayTree(ptr->rightLink);
    cout << ptr->info << endl; //cout<<ptr->name<<" "<<"$"<<ptr->info <<endl;
    DisplayTree(ptr->leftLink); 
}
void CTree::Retrieve(TreeNode*& ptr, TreeNode* newPer, bool& found)
{
    {
        if (ptr == NULL)
        {
            found = false; // item is not found.
        }
        else if ( newPer->info < ptr->info)
        {
            Retrieve(ptr->leftLink, newPer, found);
        }
             // Search left subtree.
        else if (newPer->info > ptr->info)
        {
            Retrieve(ptr->rightLink, newPer, found);// Search right subtree.
        }   
        else
        {
            //newPer.info = ptr->info; // item is found.
            found = true;
        }
    }
}

int CTree::DeleteLargest(TreeNode*& tr)
{
    int largest = 0;;
    TreeNode* prev;
    TreeNode* cur;
    prev = NULL;
    cur = tr;

    if (tr == NULL)
    {
        cout <<  "The tree is empty"<<endl;
    }
    else if (tr->rightLink == NULL)
    {
        largest = tr->info;
    }
    else
    {
        prev = tr;
        tr = tr->rightLink;
        DeleteLargest(tr);
    }

    return largest;
} 
```

优先队列声明

```
//#include <iostream>
//using namespace std;
//#include "SortedLinkedList.h"

#ifndef PRIORITYQUEUESLL__H
#define PRIORITYQUEUESLL__H

class PriorityQueueBST
{
    public:
        PriorityQueueBST();
        ~PriorityQueueBST();
        void Enqueue(int);
        int Dequeue();
        bool IsEmpty();

    private:
        CTree* ourTree;
        //sslNode* head;
};

#endif 
```

优先队列实现

```
#include <iostream>
using namespace std;
#include "CTree.h"
#include "PriorityQueueBST.h"

PriorityQueueBST::PriorityQueueBST()
{
    ourTree = new CTree();
    //head = NULL;
}

PriorityQueueBST::~PriorityQueueBST()
{

}

void PriorityQueueBST::Enqueue(int dataToEnter)
{
    ourTree->Add();
}

int PriorityQueueBST::Dequeue()
{
    //check for empty??
    return ourTree->DeleteLargest(ourTree->tree);
}

bool PriorityQueueBST::IsEmpty()
{
    return ourTree->IsEmpty();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:00:49.200

您的输出始终为 0，因为在

```
int CTree::DeleteLargest(TreeNode*& tr)
{
    int largest = 0;;
    TreeNode* prev;
    TreeNode* cur;
    prev = NULL;
    cur = tr;

    if (tr == NULL)
    {
        cout <<  "The tree is empty"<<endl;
    }
    else if (tr->rightLink == NULL)
    {
        largest = tr->info;
    }
    else
    {
        prev = tr;
        tr = tr->rightLink;
        DeleteLargest(tr);
    }

    return largest;
} 
```

如果is ，您只会设置`largest`一些潜在的东西。否则，您会重复并将变量本地设置为函数的另一个调用。当递归再次上升时，该更改将丢失，并且在最顶层的调用中，仍为 0。`!= 0``tr->rightlink``NULL``largest``largest`

在`else`分支的最后一行，您应该

```
largest = DeleteLargest(tr); 
```

或者

```
return DeleteLargest(tr); 
```

Another problem is that, despite its name, `deleteLargest` doesn't actually delete anything, so with the above, you would still always get the same value.

# javascript - 如何为动态创建的变量创建和赋值？

> ID：12430277
> 
> 赞同：2
> 
> 时间：2012-09-14T18:48:19.017
> 
> 标签：javascript, jquery, eval

我试图让它工作：

```
function whatever(arg) {
  eval(arg) + '_group' = [];
} 
```

目的是只有 1 个函数，而不是三个具有基本相同内容但具有不同变量名称的函数。

最后，我想要类似的东西：

```
a_group = [];
b_group = []; 
```

这样做，我得到了错误：

```
ReferenceError: Invalid left-hand side in assignment 
```

**编辑**

这是我正在尝试实现的原始功能。但它不会起作用。

```
function collect_all_values_for(field_name) {

    switch(field_name) {
        case 'states':
            use = 'state';
        case 'cities':
            use = 'city';
        case 'neighborhoods':
            use = 'neighborhood';        
    }

    window[field_name + '_group'] = [];

    n_fields = $('[id^=' + use + '_]').length-1;

    i = 0;
    field_value = 0;
    for (i = 0; i<= n_fields; i++) {

        if (i == 0) {
            field_value = $('#' + use).val(); 
        }else{
            field_value = $('#' + use + '_id' + i).val();
        }

        //states_group.push(field_value);
        window[field_name + '_group'].push(field_value);
    }

} 
```

查看控制台输出：

```
states_group
[undefined, undefined, undefined] 
```

然后我应该可以将其称为：

```
collect_all_values_for('states');
collect_all_values_for('cities');
collect_all_values_for('neighborhoods'); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T18:50:02.293

```
function whatever(arg) {
  window[arg + '_group'] = [];
} 
```

这会将`a_group`,设置`b_group`为全局变量。

要访问这些变量，请使用：

`window['a_group'], window['b_group']`等等。

### 根据编辑

在你的`switch`你应该使用`break;`.

```
switch(field_name) {
    case 'states':
        use = 'state';
        break;
    case 'cities':
        use = 'city';
        break;
    case 'neighborhoods':
        use = 'neighborhood';   
        break;     
} 
```

## 使用本地对象*（没有窗口对象）*和更好

```
var myObject = {};

function whatever(arg) {
  myObject[arg + '_group'] = [];
  // output: { 'a_group' : [], 'b_group' : [], .. }
}

// to set value
myObject[arg + '_group'].push( some_value );

// to get value
myObject[arg + '_group']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T18:50:14.370

虽然你真的不应该使用 eval 这应该有帮助

`eval(arg + '_group') = [];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T19:38:34.503

只是为了增加@theparadox 的答案。
我更喜欢使用以下方式进行切换。

```
var options =  {
    'states' : 'state',
    'cities': 'city',
    'neighborhoods': 'neighborhood'    
};
use = options[field_name]; 
```

[演示](http://jsfiddle.net/2qbVC/)

或者，如果您只想删除最后一个字母，您可以这样做。

`use = field_name.slice(0,-1);`

[演示](http://jsfiddle.net/2qbVC/1/)

# sql - Oracle SQL——避免递归相关更新

> ID：12430278
> 
> 赞同：1
> 
> 时间：2012-09-14T18:48:24.633
> 
> 标签：sql, oracle, sql-update

我有一张这样的桌子：

```
A
ID_A    ID_1   ID_2
1       1      (null)
2       3      (null)
3       7      (null)

B
ID_B    ID_1   ID_2
1       (null) 2
2       (null) 4
3       (null) 6

REF     
ID_A    ID_B
1       2
3       1 
```

根据 ref 表，ID_A 为 2 的对象与 ID_B 为 1 的对象相同。

因此，我应该能够以这种方式更新表：

```
A
ID_A    ID_1   ID_2
1       1      4
2       3      (null)
3       7      2 
```

实际上，如果您执行以下查询，您会得到该结果：

```
select
  A.ID_A, B.ID_1, C.ID_2
from
  A, B, REF
where
  A.ID_A = REF.ID_A
  AND REF.ID_B = B.ID_B 
```

（实际上你丢失了空行，因为它是一个内部连接，但这不是重点。）

我完全无法做的是用这个新信息更新 A！我要么得到“单行子查询返回多行”的更新，要么得到可爱的结果，即我的查询在合并时是不确定的。

鉴于我确实拥有我所展示的三个表，我如何编写查询以正确更新 id_2？;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:18:22.823

```
merge into A w
using(select a.id_a
           , b.id_2
       from a 
       join rf on (a.id_a = rf.id_a)
       join b   on (b.id_b = rf.id_b) 
     ) q
  on (q.id_a = w.id_a )
when matched then
  update 
     set w.id_2 = q.id_2 
```

[**SQL小提琴**](http://www.sqlfiddle.com/#!4/c0078/4)

# android - 从 wevbiew 获取已经加载的图像

> ID：12430284
> 
> 赞同：0
> 
> 时间：2012-09-14T18:48:50.540
> 
> 标签：android, client-server, android-webview

我想从网页中获取图像并将它们保存到本地存储中。我可以从 中找到所有图像 URL `HTML`，从服务器加载这些图像并保存它们。但是我不想第二次访问服务器以获取已经存在的相同信息`webview`。所以我想知道如何从`webview`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:38:10.380

您可以`WebView`通过几个步骤设置缓存。看看下面。

> WebView webView = (WebView) findViewById(R.id.your_webView_Id);
> 
> String cacheDir = getDir("your_WV_cache_dir", Context.MODE_PRIVATE).getAbsolutePath(); webView.getSettings().setAppCacheMaxSize(1024 * 1024 * 1); // 1 Mb 缓存限制大小 > webView.getSettings().setAppCachePath(cacheDir); webView.getSettings().setAppCacheEnabled(true); webView.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK); // 这个常量对你很重要。这样，您可以从缓存中加载 daa，如果它已经下载过一次。

[`WebView.WebSettings`](http://developer.android.com/reference/android/webkit/WebSettings.html)您可以在官方文档中查看上述常量的其他可能值。

让我知道它是否有效。

# python - 如何将字符串转换为日期对象并分别获取年、月和日？

> ID：12430287
> 
> 赞同：31
> 
> 时间：2012-09-14T18:49:01.013
> 
> 标签：python, string, datetime

如果我让我们说这个字符串“2008-12-12 19:21:10”，我如何将它转换为日期并分别从创建的对象中获取年、月和日？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-14T18:50:49.400

使用[`datetime.datetime.strptime()`功能](http://docs.python.org/library/datetime.html#datetime.datetime.strptime)：

```
from datetime import datetime
dt = datetime.strptime(datestring, '%Y-%m-%d %H:%M:%S') 
```

现在你有了一个`datetime.datetime`对象，它有[`.year`](http://docs.python.org/library/datetime.html#datetime.datetime.year),[`.month`](http://docs.python.org/library/datetime.html#datetime.datetime.month)和[`.day`](http://docs.python.org/library/datetime.html#datetime.datetime.day)属性：

```
>>> from datetime import datetime
>>> datestring = "2008-12-12 19:21:10"
>>> dt = datetime.strptime(datestring, '%Y-%m-%d %H:%M:%S')
>>> print dt.year, dt.month, dt.day
2008 12 12 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-26T18:36:06.363

[https://www.tutorialspoint.com/python/time_strptime.htm](https://www.tutorialspoint.com/python/time_strptime.htm) 在这里您可以找到 strptime() 方法的完整说明。您可以在其中找到所有类型的字符串。例如：- 转换这样的字符串 '15-MAY-12'

```
>>>from datetime import datetime
>>>datestring = "15-MAY-12"
>>>dt = datetime.strptime(datestring, '%d-%b-%Y')
>>>print(dt.year, dt.month, dt.day)
 2012 MAY 15 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-06-20T21:51:06.103

要补充的一件事；请注意，`%y`两位数的年份符号`%Y`是四位数的一：

```
import datetime

datestring = '15-MAY-12'
print(datetime.datetime.strptime(datestring, '%d-%b-%y'))
>>> datetime.datetime(2012, 5, 15, 0, 0)

datestring = '15-MAY-2012'    
print(datetime.datetime.strptime(datestring, '%d-%b-%Y'))
>>> datetime.datetime(2012, 5, 15, 0, 0) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-12T06:40:30.920

以**毫秒为单位**

```
>>> from datetime import datetime
>>> datestring = "2018-04-11 23:36:18.886585"
>>> dt = datetime.strptime(datestring, '%Y-%m-%d %H:%M:%S.%f')
>>> print dt.year, dt.month, dt.day
2018 04 11 
```

# javascript - lastIndexOf混乱

> ID：12430291
> 
> 赞同：4
> 
> 时间：2012-09-14T18:49:09.340
> 
> 标签：javascript, lastindexof

我真的不明白 lastIndexOf 是如何工作的。我无法使用第二个可选参数。

**string.lastIndexOf（搜索值，开始）**

**搜索值**-> 必需。要搜索的字符串

**开始**-> 可选。开始搜索的位置。如果省略，则默认值为字符串的长度

```
var test = "mississippi";

test.lastIndexOf("ss",1) // return -1
test.lastIndexOf("ss",2) // returns 2
test.lastIndexOf("ss",5) // returns 5 
```

谁能一步一步告诉我这个想法？例如，为什么第一个返回 -1 而第二个返回 2 ？

TIA

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T18:51:16.997

因为那是起始索引。`-1`表示未找到。

```
m 0
i 1
s 2
s 3
i 4
s 5
s 6
i 7
p 8
p 9
i 10 
```

所以从 1 开始，我没有看到匹配项。但是对于 2，我`s`在`s`3 处看到。

[MDN 解释](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/lastIndexOf)得很好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-02-13T21:37:35.727

lastIndexOf() 方法获取主字符串中搜索字符串的最后一个索引。它将一个参数作为输入搜索字符串。

它返回搜索字符串的最后一个位置（索引）。如果找不到搜索字符串，它将返回“-1”。例如访问[http://skillcram.com/JS.htm](http://skillcram.com/JS.htm)

# objective-c - contentView、scrollView、frame和bounds的混淆

> ID：12430293
> 
> 赞同：-3
> 
> 时间：2012-09-14T18:49:15.803
> 
> 标签：objective-c, ios, uiview

这一直是理解这些东西如何组合在一起的问题。有人可以一劳永逸地解释有什么区别以及它们如何一起使用吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T19:01:41.653

滚动视图管理一个内容视图，它通常比滚动视图本身大。滚动视图就像一个窗口，只显示较大的内容视图的一部分。当您滚动时，内容视图会移动，以便它的不同部分出现在窗口中。

每个视图`frame`和`bounds`属性。视图的`frame`是在其父视图的坐标系中包围视图的矩形。是`bounds`同一个矩形，但在视图自己的坐标系中表示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T18:53:16.660

从这里开始：[查看 iOS 编程指南](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009503)。

# ios - 如何使用外部存储将图像持久保存在核心数据中

> ID：12430295
> 
> 赞同：0
> 
> 时间：2012-09-14T18:49:27.310
> 
> 标签：ios, core-data, uiimage

在我的应用程序中，我有一个用户可以从相机获取的用户配置文件的图像。我不想管理核心数据之外的图像，因为我有一个用户对象可以很好地管理对象中的所有其他数据。

我将图像存储为什么数据类型？

有没有人有在哪里以及如何实现 setAllowsExternalBinaryDataStorage 的示例？我找不到一个例子。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T21:17:05.767

你在正确的轨道上。您想将其存储为 NSData。当您打开核心数据模型 gui（您有核心数据模型的可视化图表的那个）- 选择属性，然后在右侧 - 您将在其中为其指定类型和默认值等 - 将成为一个复选框，几乎可以准确地说明您想要什么。

选中该框，Core Data 将自动使用（和管理）外部文件来存储数据对象。

# ruby-on-rails - 刚从3.0.7升级到3.2.8；部分不显示

> ID：12430296
> 
> 赞同：0
> 
> 时间：2012-09-14T18:49:31.117
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我刚刚从 3.0.7 升级到 3.2.8 并且没有显示一堆部分。但是，它们正在被渲染（根据日志），并且没有给出错误消息。这是一个（简化的）示例：

**布局/application.html.haml**

```
(snip)
%body
  = yield :header
  = yield
(snip) 
```

**主页/index.html.haml**

```
- content_for :head do
  (snip)

- content_for :header do
  (snip)

= render(:partial => "home_content", :layout => "shared/layouts/content_columns") 
```

**共享/布局/_content_columns.html.haml**

```
%div
  .content
    = yield :content_column
  .sidebar
    = yield :sidebar 
```

**主页/_home_content.html.haml**

```
- content_for :content_column do
  = render_external("twitter")
  = render(:partial => "seo_content")

- content_for :sidebar do
  = render(:partial => "featured")
  = render(:partial => "testimonials")
  = render(:partial => "social") 
```

`:head`显示and的所有内容`:header`，而没有`:content_column`or`:sidebar`内容。我认为使用布局渲染局部会发生一些变化，但是一些快速搜索并没有产生任何明显的结果。

谢谢！

**更新**

这是日志中的渲染顺序（包括我在 中包含的调试语句`shared/layouts/_content_columns.html.haml`）：

```
Rendered home/_twitter.html.haml (1.4ms)
Rendered home/_seo_content.html.haml (0.9ms)
Rendered home/_featured.html.haml (2.2ms)
Rendered home/_testimonials.html.haml (2.1ms)
Rendered home/_social.html.haml (213.8ms)
DEBUG: String="Rendering shared/layouts/content_columns"
DEBUG: String="At '= yield :content_column'"
DEBUG: String="At '= yield :sidebar'"
Rendered home/_home_content.html.haml (256.9ms)
Rendered home/index.html.haml within layouts/application (300.6ms) 
```

如您所见，部分内容是在 and 之前渲染的`home_content`，`index`因此它们的内容应该由`= yield`in抓取`layouts/application`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:02:53.390

答案是改变`shared/layouts/_content_columns.html.haml`：

```
%div
  .content
    = content_for :content_column
  .sidebar
    = content_for :sidebar 
```

感谢这个 SO 问题：[content_for vs yield in partials](https://stackoverflow.com/questions/9185344/content-for-vs-yield-in-partials)

# c++ - c++ 使用指针和状态机构建递归树

> ID：12430298
> 
> 赞同：1
> 
> 时间：2012-09-14T18:49:45.333
> 
> 标签：c++, pointers, recursion, tree, state-machine

我有一个简单的状态机（在下面输入）。我的主要问题是我试图对作为我的状态机的函数进行递归调用。我在输入该函数时所做的是为我的树创建一个新节点，然后将其推送。当我进行递归调用时，我会一遍又一遍地创建一个新节点。这可以工作，但是在将孩子添加到父母时，我有点困惑。有人可以帮忙看看这个并帮我拿我的树节点（我假设是父节点）并将一个孩子附加到它上面吗？

```
TreeNodeClass* ProcessTree(TokenT token, vector <list <stateAssoc> >& vecTree, int depth)
  {
    int state = 1; //Assume this is a new record.
    bool noState = false;
    bool update = true;
    int dex = 0;
    string root, value, data, tag;
    TreeNodeClass* treeNode;

    treeNode = new TreeNodeClass; //Assume a new node per state machine visit.

    //Need 11 to break out of loop as well. 
    while(state != 10)
    {
      switch(state)
      {
    case 1: dex = 1;
        break;

    case 2: dex = 6; 
        root = yylval;
        break;

    case 3: dex = 7; 
        break;

    case 4: dex = 3;
        value = yylval;
        treeNode->CreateAttrib(root, value);
        break;

    case 5: dex = 2;
        break;

    case 6: dex = 4;
            data = yylval; 
        break;

    case 7: //Really Don't do anything. Set the tag creation at 8...
            dex = 8; 
        tag = yylval;
        if(data != "" and data != "authors")
          treeNode->CreateTag(data, tag);
        break;

    case 8: {
          //New TreeNode already grabbed. 
          //TreeNodeClass* childNode = new TreeNodeClass;
          childNode = ProcessTree(token, vecTree, depth+1);
          childNode->SetHeight(depth);
          treeNode->AddChildren(childNode);
        }
        token = TokenT(yylex()); //Get a new token to process.
        dex = 5;
        break;

    case 9: dex = 9;
        update = false;
        if(yylval != treeNode->ReturnTag())
        {
          state = 11; 
        }
        break;

    case 10: update = false;
        treeNode->SetHeight(1);
        break;

    default: cout << "Error " << endl;
        cout << state << endl;
        cin.get();
        break;

      }

      if(!noState)
    state = FindMatch(vecTree[dex], token);

      if(update)
    token = TokenT(yylex());
      else
    update = true;
    }
    return treeNode;

  } 
```

您可以假设 dex 只是一个列表数组的索引，它将返回正确的状态或 11（错误）。你也可以假设这个函数至少在输入文件上被调用过一次并且已经开始解析。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T12:48:35.977

查看您的代码，您有

```
int state = 1;
//Code

while(state != 10) {
    switch(state) {
        case:1 dex = 1; break;   //Only case you run
        //more cases
        case 8: { //never enter here
          //New TreeNode already grabbed. 
          //TreeNodeClass* childNode = new TreeNodeClass;
          childNode = ProcessTree(token, vecTree, depth+1);
          childNode->SetHeight(depth);
          treeNode->AddChildren(childNode); //should work if assuming function is correct
        }
        //stuff
        break;
        default: break;//blah
    }
}
//blah

return treeNode; 
```

`state`除了事实总是等于 1之外，我没有看到其他原因，即您在案例 8 中的代码将失败。这是假设`treeNodeClass::AddChildren(TreeNodeClass*)`已正确实施。如果没有该代码，我可以假设这不是您的问题。是否有某种方法在`state`开关中不会是 1？

# javascript - Google Charts API - 为 LineGraph 分组表格

> ID：12430299
> 
> 赞同：2
> 
> 时间：2012-09-14T18:49:46.987
> 
> 标签：javascript, google-visualization

我目前有一个如下所示的表格，我试图弄清楚如何创建一个折线图，其中 x 轴是“日期”，y 轴是“# of API Calls”并且有三个行，一个用于“类别”中的每个唯一值。我一直在翻阅 Google Charts API 文档，但似乎无法找到正确的功能组合来完成这项工作。任何帮助表示赞赏。

![数据表](../Images/54629064ce2a777e6b4a33406d333d2c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T19:10:30.787

您需要以这种格式将数据排列在数组中：

[[“日期”，“产品”，“配方”，“两者”]，[“2012 年 1 月 1 日”，176,0,144]，[“2012 年 7 月 1 日”，16,0,82]，. ..]

例如：

```
<script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
         ["date", "product", "recipe", "both"],
         ["Jan 1, 2012", 176, 0, 144],
         ["Jul 1, 2012", 16, 0, 82],
         ["Aug 1, 2012", 41, 81, 82],
         ["Sep 1, 2012", 27, 7, 7],
         ["Oct 1, 2012", 9, 0, 0]
        ]);

        var options = {
          title: 'Your data'
        };

        var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script> 
```

在这里它在[jsfiddle](http://jsfiddle.net/thnqa/)中工作。

# objective-c - Objective-C 内存管理——对象保证存在多长时间？

> ID：12430305
> 
> 赞同：4
> 
> 时间：2012-09-14T18:50:09.813
> 
> 标签：objective-c, memory-management, garbage-collection, automatic-ref-counting

我有以下形式的ARC代码：

`NSMutableData* someData = [NSMutableData dataWithLength:123];` ...

`CTRunGetGlyphs(run, CGRangeMake(0, 0), someData.mutableBytes);` ...

`const CGGlyph *glyphs = [someData mutableBytes];` ...

...后面是从 中读取内存`glyphs`但不执行任何操作的代码，`someData`不再引用。请注意，CGGlyph 不是对象类型，而是无符号整数。

我是否必须担心`someData`在我完成之前可能会释放内存`glyphs`（实际上只是指向内部`someData`）？

所有这些代码都在同一个范围内（即单个选择器），`glyphs`并且`someData`都同时超出范围。

PS 在这个问题的早期草稿中，我提到了“垃圾收集”，它并不真正适用于我的项目。这就是为什么下面的一些答案将其与 ARC 下发生的事情同等对待。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T20:27:27.747

无论您使用 GC 还是其他人推荐的 ARC，您都*可能会遇到麻烦。*您正在处理的是一个*内部指针*，一般来说，它在 GC 或 ARC 中不被视为*拥有引用*`NSData`- 除非实现具有特殊情况。如果没有该拥有引用，GC 或 ARC 可能会删除该对象。您面临的问题是内部指针所特有的。

当你描述你的情况时，最安全的做法是抓住真正的参考。您可以通过将`NSData`引用分配给实例变量或`static`（如果您愿意，可以使用本地方法）变量`nil`来完成此操作，然后在完成内部指针后分配给该变量。在并发的情况下`static`要小心！

在实践中，您的代码可能会在 GC 和 ARC 中工作，可能更可能在 ARC 中工作，但可以想象，任何一个都可能会咬你，尤其是当编译器发生变化时。对于一个变量声明和一个额外分配的成本，您可以避免这个问题，便宜的保险。

[[将此](http://weblog.bignerdranch.com/296-arc-gotcha-unexpectedly-short-lifetimes/)讨论视为 ARC 下生命周期短的示例。]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T19:06:36.313

在实际的、真正的垃圾收集下，该代码可能是一个问题。一旦不再有对它们的任何引用，对象就可能被释放，如果您不再使用它，编译器可能会随时丢弃该引用。出于优化目的，范围只是对这类事物设置上限的一种方式，而不是一种绝对规定它的方式。

您可以使用`NSAllocateCollectable`将生命周期计算附加到 C 原始指针，尽管它很混乱且略微令人费解。

[垃圾收集从未在 iOS 中实现，现在在 Mac 上已弃用（如本常见问题解答](http://developer.apple.com/library/mac/releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW17)的最底部所引用），在这两种情况下都支持自动引用计数 (ARC)。ARC 添加`retain`s 并且`releases`它可以看到它们是隐式需要的。遗憾的是，它可以执行一些以前不可能的巧妙技巧，例如从自动释放池中检索对象（如果它们已被用作返回结果）。所以这与垃圾收集方法具有相同的净效果——对象可以在对它的最终引用消失后的任何时候被释放。

一种解决方法是创建一个类，如：

```
@interface PFDoNothing

+ (void)doNothingWith:(id)object;

@end 
```

实施它什么都不做。使用完内部存储器后，将自动释放的对象发布到它。Objective-C 的动态分派意味着编译器优化调用是不安全的——它无法知道您（或 KVO 机制或任何其他参与者）没有在运行时执行诸如方法调配之类的事情。

编辑：`NSData`作为一个特例，因为它提供对对象持有的内存的直接 C 级访问，至少不难找到关于 GC 情况的明确讨论。请参阅[Cocoabuilder](http://www.cocoabuilder.com/archive/cocoa/199325-accessing-buffers-in-nsdata-nsmutabledata-under-garbage-collection.html)上的这个线程以获得一个非常好的线程，尽管适用与上述相同的警告，即不推荐使用垃圾收集并且自动引用计数的行为不同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T19:03:55.633

以下是不一定反映 Objective-C GC 支持的通用答案。然而，各种 GC 实现，包括引用计数，可以从可达性的角度来考虑，撇开怪癖不谈。

* * *

在 GC 语言中，*只要对象是[强**可达**](http://en.wikipedia.org/wiki/Reachability)*的，它就保证存在；这些强可达图的“根”可能因语言和执行环境而异。“强”的确切含义也有所不同，但通常意味着边缘是强引用。（在手动引用计数场景中，每条边都可以被认为是来自给定“所有者”的无与伦比的“保留”。）

CLR/.NET 上的 C# 就是这样一种实现，其中*变量可以保留在范围内，但不能充当可达性图的“根”*。查看[`Systems.Timer.Timer`](http://msdn.microsoft.com/en-us/library/system.timers.timer%28v=vs.90%29.aspx)课程并寻找`GC.KeepAlive`：

> 如果在长时间运行的方法中声明了计时器，请使用 KeepAlive 来防止在方法结束之前 [在计时器对象上] 发生垃圾收集。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T03:44:34.920

截至 2012 年夏天，返回非对象类型内部指针的 Apple 对象正在发生变化。在 Mountain Lion 的[发行说明](http://developer.apple.com/library/mac/#releasenotes/Cocoa/Foundation.html)中，Apple 表示：

> NS_RETURNS_INNER_POINTER
> 
> 返回指针（Objective C 对象类型除外）的方法已使用 clang 编译器属性 objc_returns_inner_pointer （使用 clang 编译时）进行修饰，以防止编译器积极释放那些似乎不再被引用的消息的接收者表达式，而返回的指针可能仍在使用中。

检查 NSData.h 头文件表明这也适用于 iOS 6 以后的版本。

另请注意，这`NS_RETURNS_INNER_POINTER`是`__attribute__((objc_returns_inner_pointer))`在[clang](http://clang.llvm.org/docs/AutomaticReferenceCounting.html)规范中定义的，这使得

> 对象的生命周期将至少延长到以下最早的时间：在调用函数中最后一次使用返回的指针或从它派生的任何指针；或者自动释放池恢复到以前的状态。

注意事项：如果您使用的是比 Mountain Lion 或 iOS 6 更早的版本，则`__attribute__((objc_precise_lifetime))`在声明本地 NSData 或 NSMutableData 对象时，您仍然需要使用此处讨论的任何方法（例如， ）。

此外，即使使用最新的编译器和 Apple 库，如果您将旧的或第三方库与不修饰其内部指针返回方法的对象一起使用，`__attribute__((objc_returns_inner_pointer))`您将需要使用`__attribute__((objc_precise_lifetime))`或使用以下对象之一来修饰此类对象的局部变量声明答案中讨论的其他方法。

# ruby-on-rails - 使用“created_at”查找以前的记录

> ID：12430306
> 
> 赞同：0
> 
> 时间：2012-09-14T18:50:13.363
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

好的，所以我的应用程序上有多个用户，每个用户都有多个“status_updates”。

每个状态更新都是 id'd，然后与它所属的用户关联。

因此，例如用户 2 的所有状态更新的 ID 顺序可能为 3、10、34、55

问题是，每个 status_update 都需要来自该用户之前状态更新的信息。显然，我不能简单地找到 id - 1 的状态更新，因为该状态更新可能属于不同的用户，并且无论如何都会返回 nil ，因为手头的用户不存在该状态更新。

我不知道如何编写 where() 参数，以便简单地为用户找到先前创建的状态更新。

苏...

以下是我的模型关于这个问题的重要部分：

```
after_find :previous_status_update   
.
.
.
def previous_status_update
 current_id = self.id
 previous_status_update = user.status_update.where( created_at: ? < self.created_at ).limit(1)
end 
```

在为此编写参数时，guides.rubyonrails.org 上的说明令人困惑。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T18:57:47.977

你是如此接近。

```
previous_status_updates = user.status_update.where("created_at < ?", self.created_at) 
```

这将返回所有早于该状态更新的状态更新。

如果你只想要一个，只需抓住该列表中的第一个或最后一个（无论是你想要的那个，如果你想要你也可以先排序它`.order()`

```
previous_status_update = user.status_update.where("created_at < ?", self.created_at).first 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:05:19.967

这肯定会为你工作。

```
previous_status_update = user.status_update.where( created_at: ? < self.created_at ).last 
```

# css - 具有 css 翻转的可滚动 div = 溢出问题

> ID：12430310
> 
> 赞同：1
> 
> 时间：2012-09-14T18:50:27.207
> 
> 标签：css, html, overflow, rollover

我正在开发一个界面，该界面利用可滚动 div 中的项目列表，其中一些利用悬停时的滚动菜单，该菜单延伸到 div 之外。禁用脚本兼容性是该站点的优先事项，因此在我开始进行其他妥协之前，我正在尝试查看界面是否可以仅使用 CSS 完成。

我在下面有一些例子。有问题的菜单位于右侧，标题为“选择项目”。每页顶部的第三个列表项包含一个翻转菜单。

为了在滚动位置发生变化时保持滚动位置相对于其父级，我定位了父级 li 的相对位置和子级 ul 的绝对位置。
[例 1](http://eypaedesign.com/markets-rollover-issue-no-overflow.htm)

当然，一旦**overflow:auto**开启并且滚动到位，翻转就会停止显示。 [例 2](http://eypaedesign.com/markets-rollover-issue-scroll.htm)

我尝试删除父 li 的相对定位，并保留翻转的绝对定位以将它们从 div 中释放出来，但是当滚动位置改变时它们没有正确定位。我只能发布两个链接，但如果你想要一个插图，它就在这里：eypaedesign.com/markets-rollover-issue-no-relative.htm

除了更改 UI 之外，是否有我在这里没有看到的属性组合可用于使此界面在 CSS 上工作？我可以将整个 div 定位为绝对，并添加大量左侧填充以显示翻转，但这似乎很不雅。

谢谢各位——

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:04:59.343

仅使用 CSS，您只能使用其中一种：`overflow: auto`或溢出的悬停菜单。对and使用单独的`visible`和`auto`属性不起作用，所以我认为你最好的选择是使用你正在考虑的填充解决方案。`overflow-x``overflow-y`

通过正确使用绝对定位和`z-index`（如果您担心填充菜单容器会阻止填充下的任何元素），您应该能够在不破坏布局的其余部分的情况下做到这一点。当然，您必须控制可滚动容器内所有子元素的大小，这样它们就不会扩展到填充父元素的整个宽度。

添加这些属性 - 没有其他更改 - 似乎在您的网站上工作，所以也许您可以轻松摆脱它：

```
#project_menu {
  padding-left: 300px;
  margin-left: -300px;
}

.center {
  position: relative;
  z-index; 10;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:55:49.290

如果您在班级导航中放置 293px 的高度应该没问题。或者在您的 project_menu ID 中，我可以看到 ID 的高度为 218px，而您的 UL 为 293px。

通过更改这两个中的一个，您应该没问题。这取决于您如何设置它影响其他元素。

但是使用 project_menu ID 应该很好。

# quaternions - 将轴角转换为四元数的问题

> ID：12430311
> 
> 赞同：0
> 
> 时间：2012-09-14T18:50:32.013
> 
> 标签：quaternions

我有一个向量，它从我的相机指向我想要指向的对象，所以我想制作一个四元数来旋转相机，使其指向该向量。所以我这样做（使用glm）

```
glm::quat rotation=glm::angleAxis(0.0f,vector); 
```

如果我在向量的情况下正确理解该函数，例如（0.0f，0.0f，-1.0f），相机应该在深度轴上指向前方，并且没有滚动。但我不知道为什么，在这种情况下，它会创建这个四元数： x:-0 y:-0 z:-0 w:1 什么都不做，并且 x,y,z 值仅在角度与 0 不同时传递给 angleAxis() 的参数不为 0。为什么会发生这种情况？如果我通过角度 0，它不应该简单地创建一个只有偏航和俯仰而没有滚动的旋转吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T07:39:07.040

Already go the answer: (on the gameDev forum, from the user clb)

No, your understanding is off. Angle-axis rotation generates rotation about the given axis, by the given angle. If you don't specify an angle, you'll always get identity back. This is because rotation a zero angle, be it about any axis, of course does not rotate at all.

What you are thinking about is the LookAt rotation. I am not sure what the function signature in glm is, but I'm sure they have a similar function. Use a LookAt rotation to orient one direction vector to face towards another vector.

# c++ - 将 CDC 窗口的内容导出到 EMF 文件

> ID：12430316
> 
> 赞同：2
> 
> 时间：2012-09-14T18:51:00.850
> 
> 标签：c++, bitmap, gdi, cdc

我是 C++ 和 OpenGL 的新手。以前有人写过这个 C++ 应用程序（基于 Linux），我必须对其进行调整。

基本上在这个应用程序中，有一个包含绘图的窗口。现在此窗口支持将绘图导出为位图（tga、jpg 和 bmp）的功能。我们想添加另一个函数来将绘图内容保存为增强元文件。

我设法获得了 CDC 设备处理程序并使用它的 HDC 创建了一个与绘图具有相同宽度/高度的空 EMF，但是我不知道如何将绘图的内容迁移到 EMF 文件中。有没有代码可以做到这一点？

我用来创建空 EMF 文件的代码如下。感谢任何想法或帮助！

```
CDC* dc = pWnd->GetDC();
HDC hdcRef;
hdcRef = dc->GetSafeHdc();

CRect rect;
pWnd->GetClientRect(rect);

// Convert client coordinates to .01-mm units.
// Use iWidthMM, iWidthPels, iHeightMM, and
int iWidthMM = GetDeviceCaps (hdcRef, HORZSIZE);  
int iHeightMM = GetDeviceCaps (hdcRef, VERTSIZE);  
int iWidthPels = GetDeviceCaps (hdcRef, HORZRES);  
int iHeightPels = GetDeviceCaps (hdcRef, VERTRES);  
rect.left = (rect.left * iWidthMM * 100) / iWidthPels;  
rect.top = (rect.top * iHeightMM * 100) / iHeightPels;  
rect.right = (rect.right * iWidthMM * 100) / iWidthPels;  
rect.bottom = (rect.bottom * iHeightMM * 100) / iHeightPels;

//::SetMapMode(hdcRef, MM_HIMETRIC);
HDC hdcMeta = CreateEnhMetaFile(hdcRef, "C:\\temp\\testEMF.emf", &rect, "Example metafile\0");
if (!hdcMeta) 
    GenAppWarningMsg("CreateEnhMetaFile", "Error");

// Set the device context back to its original state.  
SetMapMode(hdcMeta, MM_ANISOTROPIC); 
::ReleaseDC(NULL, hdcRef);

HENHMETAFILE meta = CloseEnhMetaFile (hdcMeta); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:54:28.337

你在正确的轨道上。基本上，您想为元文件创建一个 DC（正如您所做的那样），然后要求原始代码将绘图渲染到该 DC。

原代码可能有这样的功能。如果没有，您可以通过发送 Windows 消息[WM_PRINT](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145216%28v=vs.85%29.aspx)来欺骗它在您的 DC 上呈现。这不能保证有效，因为某些 Windows 没有实现 WM_PRINTCLIENT 的处理程序，而 WM_PRINT 依赖于 WM_PRINTCLIENT。

如果你不能让它工作（因为原始代码没有办法渲染到任意 DC 并且你不能修改代码来添加该功能），那么你能做的最好的就是获取位图文件并将 BitBlt 直接发送到您的`hdcMeta`. 如果您尝试拉伸/收缩 EMF，这种方法看起来不会那么好。

# mysql - Couchbase 和 mysql 集群

> ID：12430320
> 
> 赞同：0
> 
> 时间：2012-09-14T18:51:21.450
> 
> 标签：mysql, memcached, couchbase

随着最近发布的包含 memcache api 并为 memcache 提供持久性的 MySQL 集群，任何人都可以分享选择哪一个的好处吗？

我最初的想法是使用 couchbase 作为应用程序和数据库之间的内存缓存层。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:41:21.243

首先，作为披露，我是 MySQL Cluster 团队的一员

专门针对 MySQL 集群，这里有一个不错的博客，带您了解设计原理、好处和实现： [http ://www.clusterdb.com/mysql-cluster/scalabale-persistent-ha-nosql-memcache-storage-使用-mysql-cluster/](http://www.clusterdb.com/mysql-cluster/scalabale-persistent-ha-nosql-memcache-storage-using-mysql-cluster/)

上个月还录制了一个网络研讨会，演示了如何使用 Memcached API 和 MySQL 集群构建社交网络类型的服务（需要注册）： [http ://www.mysql.com/news-and-events/on-demand-webinars /display-od-723.html](http://www.mysql.com/news-and-events/on-demand-webinars/display-od-723.html)

我没有与 Couchbase 进行任何具体的比较，但我希望上面的资源能够帮助您确定 MySQL Cluster 是否适合您的项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-17T01:08:33.630

最近我不得不为自己回答同样的问题。我想为社交应用程序选择一个数据库，该数据库与大量数据和许多用户密切合作。正如您所看到的，我的需求并不期望概述这些数据库之间的一些重大技术差异 - 毕竟两者都经常用于此类应用程序。

无论如何，我根据我感兴趣的场景准备了一些负载测试。最后我在强大的硬件上连续运行了两天的测试。我想说这两种产品或多或少都表现出同样惊人的性能。我也进行了一些碰撞测试——愚蠢的案例，我试图吃掉所有的资源并做“愚蠢”的事情。在这些测试中，我对 Couchbase 的期望较低，但它让我非常惊讶，它实际上比 MongoDB 做得更好。因此，对于我的需求，从技术和架构的角度来看，我没有发现 Couchbase 和 MySQL Cluster 之间有太大区别。我的建议是根据您的场景运行一些测试并亲自查看。

在我的案例中，最后的选择是基于许可协议、法律声明中的声明、定价和围绕产品的社区——因此我选择了 MySQL Cluster。

# bash - 为 node.js 脚本创建启动器

> ID：12430321
> 
> 赞同：1
> 
> 时间：2012-09-14T18:51:25.657
> 
> 标签：bash, node.js

我正在尝试为 node.js 脚本创建一个启动器（这样我就可以通过单击它们的文件图标而不是从终端启动它们来运行脚本。）这通常是如何完成的？如果我可以通过单击其图标在终端中简单地运行脚本，我会更喜欢。

我尝试编写一个 shell 脚本来在同一文件夹中启动另一个脚本，但由于某种原因它没有显示 node.js 脚本的命令行输出：

```
#!/bin/bash
echo -n "Enter a node.js script to run > "
read text
node "$text" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T23:38:30.860

我现在知道您正在寻找一个 Ubuntu 解决方案，但如果有人对**OS X**解决方案感兴趣，这里是：

*   打开自动机。
*   创建一个新的应用程序。
*   添加 AppleScript 动作
*   粘贴以下代码：

```
on run {input, parameters}

    tell application "Terminal"
        repeat with f in input
            do script "node " & quoted form of (POSIX path of f)
        end repeat
        activate
    end tell

end run 
```

*   保存应用程序。
*   在 Finder 中，按住 Control 单击任何 *.js 文件并选择打开方式 > 其他...，选择新应用程序并选中“始终打开方式”。

从那时起，每当您打开 *.js 文件时，它都会在一个*新*的终端窗口中打开，该窗口将在节点完成运行后*保持打开状态；*添加`; exit`到上面的命令字符串以自动关闭（可能`read -sn 1`先添加以等待击键。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T01:07:09.657

我用它在终端的debian上启动我的节点脚本

```
#!/usr/bin/env sh
dir=$(dirname $0)
script="$dir/path_to_your_server.js"
echo "node $script" 
```

# ruby-on-rails - 如何在 Ruby / Rails 中正确执行日期逻辑

> ID：12430324
> 
> 赞同：0
> 
> 时间：2012-09-14T18:51:45.650
> 
> 标签：ruby-on-rails, ruby, time

我需要将日期读取为 UTC unix 时间戳整数。然后使用它，对其进行一些日期计算。

我编写了一个 Rails 应用程序和一个模仿我的环境的规范。

[https://github.com/dlikhten/semaphoretests/blob/master/spec/time/test_time.rb](https://github.com/dlikhten/semaphoretests/blob/master/spec/time/test_time.rb)

```
require 'spec_helper'

describe "time testing" do
  base_time = Time.new("2012")

  8760.times do |n|
    context "#{n + 1} hour offset" do
      let(:now) { base_time + (n + 1).hours }
      before { Timecop.freeze(now) }
      after { Timecop.return }

      it do
        # puts now.to_s

        t1 = 30.days.from_now.utc.to_i

        # puts t1

        d1 = Time.at(t1).to_date

        # puts d1

        d2 = 30.days.from_now.to_date

        # puts d2
        # puts 30.days.from_now.to_date

        d1.should == 30.days.from_now.to_date
        d2.should == 30.days.from_now.to_date
        d1.should == d2
      end
    end
  end
end 
```

谁能告诉我为什么这个规范失败了？这会尝试为一年中的每个小时运行逻辑。在某些小时它会失败。

有趣的是，我每天有几次计算 1 天假。为什么会发生这种情况是没有意义的。请注意，我执行 Timecop.freeze 以确保生成的所有日期都是相同的时间戳。

从理论上讲，它应该已经在所有情况下都在正确的时区上运行。

红宝石 1.9.2 轨道 3.2.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:20:24.037

将您的替换`to_i`为`to_f`.

小数秒截断可能会产生影响。不知道为什么会这样。

`to_f`或者，为了获得更好的性能，而不是在循环中调用，从`base_time`:

```
base_time = Time.at(Time.new('2012').to_i) 
```

# ruby-on-rails - Mongoid 2.4 通过ID查询嵌入文档失败

> ID：12430326
> 
> 赞同：10
> 
> 时间：2012-09-14T18:51:59.947
> 
> 标签：ruby-on-rails, mongodb, mongoid

我们有一个带有嵌入项目的模型条目：

```
class Entry
  include Mongoid::Document
  include Mongoid::Timestamps
  include Mongoid::Spacial::Document
  embeds_many :items, cascade_callbacks: true
...

class Item
  include Mongoid::Document
  include Mongoid::Timestamps
  include Mongoid::Spacial::Document
  embedded_in :entry
... 
```

如果我直接按项目 id 查询 mongo 的条目：

```
{"items._id" : ObjectId("50536b18baa072000f000360")} 
```

它返回条目：

> 505363b36181ce00020006b1 {"created_at":"2012-09-14T17:04:51Z","items":[{"_id":"50536b1a2b17b3...

然而，当我通过 Mongoid 查询时：

```
irb(main):002:0> Entry.where('items._id' => '50536b18baa072000f000360')[0]
=> nil 
```

所有其他查询都有效（对于项目上的其他字段和条目上的字段）。但不是为了身份证。

我们正在运行 mongoid (2.4.12)。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-18T14:52:20.540

显然您必须将 ID 包装在 BSON::ObjectId() 中，因此：

```
Entry.where('items._id' => BSON::ObjectId('50536b18baa072000f000360'))[0] 
```

否则 mongo 将偶尔不返回结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-10T22:55:15.987

这适用于 Mongoid 4.0.0.beta1：

```
Entry.where('items._id' => BSON::ObjectId.from_string('50536b18baa072000f000360')) 
```

这是文档的链接。

[http://api.mongodb.org/ruby/current/BSON/ObjectId.html#from_string-class_method](http://api.mongodb.org/ruby/current/BSON/ObjectId.html#from_string-class_method)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-14T12:58:14.823

`Entry.where('items._id' => Moped::BSON::ObjectId('50536b18baa072000f000360'))[0]`[在此处](http://api.mongodb.org/ruby/current/BSON/ObjectId.html#from_string-class_method) 查看文档

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-05-20T22:14:17.557

或者，这也可以。

```
Entry.find('50536b18baa072000f000360') 
```

# windows-phone-7 - 如何选择特定视图模型数据以加载到特定视图中

> ID：12430327
> 
> 赞同：0
> 
> 时间：2012-09-14T18:52:01.477
> 
> 标签：windows-phone-7, mvvm

我不确定我是否清楚地说明了我的问题，但我有两个单独的页面和一个视图模型。最初我只有一个页面，但我决定将它们拆分，因为我的页面变得太大（更具体地说，我在一个页面上有太多的数据透视项，两个页面可以更好地为用户分离数据）。我想知道是否可以仅将特定数据从视图模型加载到单个视图，因为现在我的应用程序正在冻结，因为我的视图模型尝试加载所有数据，即使它只需要大约一半在用户正在查看的当前页面上使用。如果是这样，我假设我需要以某种方式让视图模型知道要加载哪些数据。我将如何做到这一点。或者，创建两个单独的视图模型是否是一种好习惯，每个页面一个，这样只有每个页面的必要数据才会相应地加载并防止我的应用程序冻结？我不确定这里的标准是什么，或者在 CPU 使用率和响应时间等方面什么是最有效的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:50:06.077

加载比您需要的更多的数据绝对是一个问题，尤其是当您通过 Internet 进行时。为什么会这样？为什么不简单地将视图模型分成两部分？VM 的定义基本上是这样说的：（引自[Model-View-ViewModel (MVVM) Explained](http://www.wintellect.com/cs/blogs/jlikness/archive/2010/04/14/model-view-viewmodel-mvvm-explained.aspx)）

> 视图模型是三元组的关键部分，因为它引入了表示分离，或将视图的细微差别与模型分开的概念。模型没有让模型知道用户对日期的看法，从而将日期转换为显示格式，而是模型只保存数据，视图只保存格式化的日期，控制器充当两者之间的联络人.

如果你分离了视图，你也可以分离虚拟机以保持简单。

尽管如此，如果这对您不起作用，并且您的数据没有作为某种服务公开，为什么不直接使用 VM 的一部分呢？根据你看到的页面只调用你需要的方法，只设置你需要的属性，不要全部做。如果要处理的数据确实很大，则在不同的线程上执行此操作，这样您的 UI 就不会冻结（当然，同时向用户显示您正在使用进度条获取数据）。

对于您描述的场景，这应该足够了。

# asterisk - 将桥接呼叫从 Asterisk 流式传输到 ShoutCast

> ID：12430336
> 
> 赞同：3
> 
> 时间：2012-09-14T18:52:44.220
> 
> 标签：asterisk, shoutcast

我想将 Asterisk 代理的对话广播到 ShoutCast 服务器。当每个排队的呼叫者依次通过座席时，他与当前呼叫者的当前对话需要发送到特定流。

我可以找到很多关于设置 Asterisk 以接收 ShoutCast 广播的信息，我可以找到一些关于使用 Ices 向 ShoutCast 发送 MeetMe 会议的信息。后者对我没有好处，因为我需要排队系统，而且据我所知，无法同时排队和开会。任何其他信息都在躲避我。

谢谢。

[编辑] - 虽然我在上面说过 ShoutCast，但任何广播服务器都可以。最好是我可以在本地运行的。

[更新] - 这个问题不再与我的特定问题相关。我的项目不再需要此功能，因此我不再需要答案。但是，它获得了 2 票赞成，所以我只能假设其他一些人想要一个答案。不确定在这种情况下的礼仪，但我是否应该将其打开以便其他人可以回答以供其他人参考？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:21:16.037

您可以使用星号 ices 命令 [1] 或安装并行的 freeswitch 服务器，桥接两个服务器并使用 freeswitch 的 mod_shout [3]。

[编辑] 要捕获对话，请使用会议室并使用本地频道设置新呼叫到会议和拨号方案上下文，您可以在其中运行 ices 命令。[4]

更多...您可以一起使用 freeswitch 和 asterisk 来解决这个问题。从星号调用freeswitch 代替ices 命令。

参考

[1] [http://www.voip-info.org/wiki/view/Asterisk+cmd+Ices](http://www.voip-info.org/wiki/view/Asterisk+cmd+Ices)

[2] [http://en.wikipedia.org/wiki/Icecast](http://en.wikipedia.org/wiki/Icecast)

[3] [http://wiki.freeswitch.org/wiki/Mod_shout](http://wiki.freeswitch.org/wiki/Mod_shout)

[4][用星号加入两个会议](https://stackoverflow.com/questions/11964508/join-two-conferences-in-asterisk/11980169#11980169)

# ios - 嵌入 Youtube 视频：- 包含来自 * 的内容，限制在某些网站上播放

> ID：12430337
> 
> 赞同：8
> 
> 时间：2012-09-14T18:52:45.550
> 
> 标签：ios, cocoa-touch, ipad, youtube, embed

如何嵌入包含受版权保护内容的 Youtube 视频。

例如，当您尝试播放此视频（[http://www.youtube.com/embed/ADBKdSCbmiM](http://www.youtube.com/embed/ADBKdSCbmiM)）时，`UIWebView`它会显示

```
 This Video Contains content from Vevo. It is restricted from playback on certain sites 
```

我将如何让这样的视频在嵌入式播放器或我将使用的自定义播放器中播放`MPMoviePlayer`。我知道这是可能的，因为以下应用程序会这样做。（[http://itunes.apple.com/us/app/audioviz-view-your-songs-on/id547001249?mt=8](http://itunes.apple.com/us/app/audioviz-view-your-songs-on/id547001249?mt=8)）

**编辑** 很少有视频在浏览器中播放，但在 iOS 模拟器中显示

```
This video contains content from SME . It is restricted from playback on certain site 
```

感谢所有的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-04-03T10:37:21.017

您可以`player vars`在初始化 youtube sdk 时使用：

```
NSDictionary *playerVars = @{
                             @"origin" : @"http://www.youtube.com",
                             };
[self.playerView loadWithVideoId:@"KOvoD1upTxM" playerVars:playerVars]; 
```

享受！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T13:31:52.257

要使用以下方式播放 youtube 视频`uiwebview`：

1.  首先检查您的 youtube URL 是否在浏览器中播放。如果视频没有在浏览器中播放，它也不会在设备中播放

2.  您只签入设备；视频无法在模拟器中播放

    ```
    - (void) displayGoogleVideo

        {

        CGRect rect = [[UIScreen mainScreen] bounds];

        CGSize screenSize = rect.size;

        UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0,0,screenSize.width,screenSize.height)];

        webView.autoresizesSubviews = YES;

        webView.autoresizingMask=(UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth);

        NSString *videoUrl = @"http://www.youtube.com/v/oHg5SJYRHA0"; // valid youtube url

        NSString *htmlString = [NSString stringWithFormat:@"<html><head><meta name = \"viewport\" content = \"initial-scale = 1.0, user-scalable = no, width = 212\"/></head><body style=\"background:#F00;margin-top:0px;margin-left:0px\"><div><object width=\"320\" height=\"480\"><param name=\"movie\" value=\"%@\"></param><param name=\"wmode\" value=\"transparent\"></param><embed src=\"%@\" type=\"application/x-shockwave-flash\" wmode=\"transparent\" width=\"320\" height=\"480\"></embed></object></div></body></html>",videoUrl,videoUrl]    ;

        [webView loadHTMLString:htmlString baseURL:[NSURL URLWithString:@"http://www.youtube.com"]];

        [window addSubview:webView];

        [webView release]; 

    } 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-22T22:59:37.590

如果您要嵌入移动应用程序，则需要**在视频的请求标头中****设置您的。`Referer`**否则，如果您的推荐人字段留空，Youtube 会自动将您列入黑名单。

我在[这里](https://stackoverflow.com/a/39650091/4976373)详细回答了这个问题。我自己也遇到过这个问题，并在我的情况下修复了它（使用 React Native 的 iOS 应用程序）。我现在可以玩 Vevo、WMG 和所有其他受限内容。

# c++ - C++ 大数运算

> ID：12430339
> 
> 赞同：2
> 
> 时间：2012-09-14T18:52:49.713
> 
> 标签：c++, math, largenumber

我正在开发一个用于大数算术的类，它现在知道如何进行加法、处理 cin 和 cout。

但是，它具有非常有限和基本的减法功能，并且不知道如何处理负数。但这很容易解决。

我的问题是，如何进行乘法运算。

我将在这里详细说明它是如何处理 cin 和 cout 的。

对于cin，它将整数保存到value[500]，例如50将保存到value[498]和value[499]。但不是 value[0] 和 value[1]

对于 cout，它将从 value[0] 到 value[499] 扫描第一个非零值，然后从该非零值输出到末尾。此外，如果它没有找到非零值，它将输出 0。

这是我的代码：

```
#include <iostream>

using namespace std;

class largeNumber {
public:
    int value[500];
    largeNumber()
    {
        for ( int i = 0 ; i < 500 ; ++ i )
        {
            value[i] = 0;
        }
    }
    //below are arithmetic operations
    largeNumber operator+(const largeNumber &ln) const
    {
        largeNumber result;
        for ( int i = 0 ; i < 500 ; ++ i )
        {
            result.value[i] = value[i] + ln.value[i];
        }
        for ( int i = 499 ; i >= 0 ; -- i )
        {
            if ( result.value[i] >= 10 )
            {
                result.value[i - 1] += ( result.value[i] / 10 );
                result.value[i] %= 10;
            }
        }
        return result;
    }
    largeNumber operator-(const largeNumber &ln) const
    {
        largeNumber result;

        for ( int i = 0 ; i < 500 ; ++ i )
        {
            result.value[i] = value[i] - ln.value[i];
        }
        for ( int i = 499 ; i >= 0 ; -- i )
        {
            if ( result.value[i] < 0 )
            {
                --result.value[i - 1];
                result.value[i] += 10;
            }
        }
        return result;
    }
    largeNumber operator*(const largeNumber &ln) const
    {
        largeNumber result;
        for ( int x = 499 ; x >= 0 ; -- x )
        {
            for ( int y = 499 ; y >= 0 ; -- y )
            {
                int dx = 499 - x;
                int dy = 499 - y;
                int dr = dx + dy;
                int r = 499 - dr;
                if ( r >= 0 && r <= 499 )
                {
                    result.value[r] = value[x] * ln.value[y];
                }
            }
        }
        for ( int i = 499 ; i >= 0 ; -- i )
        {
            if ( result.value[i] >= 10 )
            {
                result.value[i - 1] += ( result.value[i] / 10 );
                result.value[i] %= 10;
            }
        }
        return result;
    }
    //below are cin, cout operators
    friend ostream& operator<<(ostream& out, const largeNumber& ln)
    {
        bool valueFound = false;
        for ( int i = 0 ; i < 500 ; ++ i )
        {
            if ( ln.value[i] != 0 )
            {
                valueFound = true;
            }
            if ( valueFound == true )
            {
                out << ln.value[i];
            }
        }
        if ( valueFound == false )
        {
            out << "0";
        }
        return out;
    }
    friend istream& operator>>(istream& in, largeNumber& ln) // input
    {
        string str;
        in >> str;
        int length = str.length();
        for ( int i = 500 - length ; i < 500 ; ++ i )
        {
            ln.value[i] = (str[length-(500-i)] - 48);
        }
        return in;
    }
};

int main()
{
    largeNumber a, b;
    string op;
    cin >> a >> op >> b;
    cout << a * b;
    return 0;
} 
```

我已经包含了我的乘法方法，但是它有缺陷。

顺便说一句，老师给出的数字承诺乘法的结果将是一个小于500位的数字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T18:59:25.653

让我们从简单的乘法（长乘法）开始：

112 * 301

```
 1     1     2
          3     0     1
          ______________
          1     1     2
     0    0     0
 3   3    6
 _______________________
 3   3    7     1     2 
```

因此，这需要 N 乘 N 矩阵作为要添加移位 n 次的行。

你在哪里做这个添加，在哪里转移？

对于您的问题，它需要 500 x 500 乘法和 500 x 500 加法。O(N*N)

优点：每个数字乘法都可以在一个字节中完成，因此您可以更改编译器可以向量化代码并一次将 16 到 32 位相乘的数字结构（展开非常好）。

缺点：计算过多（每 500 位数字近 25-40 次迭代）

注意：GPU 驱动的微积分可以使其速度提高大约 40 倍。例如 OpenCL 或 Cuda。

# ruby-on-rails - {发送消息所需的发件人（返回路径、发件人或发件人）<= 无法使用延迟 gem 发送电子邮件

> ID：12430340
> 
> 赞同：1
> 
> 时间：2012-09-14T18:52:50.677
> 
> 标签：ruby-on-rails, ruby, gem

我正在使用延迟工作 gem 并尝试发送延迟工作的电子邮件。

但我没有这样做，延迟的作业日志总是指出：`{A sender (Return-Path, Sender or From) required to send a message`。

另一方面，如果我不使用延迟工作，我可以成功发送电子邮件。

**最奇怪的事！！！如果我使用延迟工作发送电子邮件**

**`run at`刚刚在数据库中创建的延迟作业记录的列与列相同`created at`**

控制器代码：

```
def create
    @long_task = LongTask.new(params[:long_task])

    respond_to do |format|
      if @long_task.save
        # @long_task.set_delay_time(2)

        Notifier.delay.create_long_task
        # Notifier.create_long_task.deliver

        format.html { redirect_to @long_task, notice: 'Long task was successfully created.' }
        format.json { render json: @long_task, status: :created, location: @long_task }
      else
        format.html { render action: "new" }
        format.json { render json: @long_task.errors, status: :unprocessable_entity }
      end
    end
end 
```

邮寄者：

```
class Notifier < ActionMailer::Base
  default from: "from@example.com"

  # Subject can be set in your I18n file at config/locales/en.yml
  # with the following lookup:
  #
  #   en.notifier.create_long_task.subject
  #
  def create_long_task
    #@greeting = "Hi"
    #@longTask ="delay setting"
    # @longTask = longTask

    mail to: "j-xxx@hotmail.com", :subject => 'Long Task Created'
  end

   handle_asynchronously :create_long_task, :run_at => Proc.new { 2.minutes.from_now }
end 
```

电子邮件模板：

```
Notifier#create_long_task

You created a long task 
```

# user-interface - Visual Web Developer：Show Table Data 操作上的 Operation Not Valid 错误

> ID：12430344
> 
> 赞同：1
> 
> 时间：2012-09-14T18:53:14.740
> 
> 标签：user-interface, webforms, visual-web-developer-2010

我正在使用 Visual Web Developer 2010 Express 通过 W3 Schools 的教程学习 ASP.NET Web 表单。我目前停留在本教程的数据库部分，位于[此处](http://w3schools.com/aspnet/aspnet_demo_database.asp)。在“添加数据库记录”标题下，我被告知在数据库资源管理器中右键单击电影表并选择“显示表数据”选项，但是当我这样做时，我收到错误，“操作无效由于对象的当前状态”，没有其他信息。当我从表的上下文菜单中选择“新查询”选项时，也会发生此错误。

我尝试将 MaxHTTPCollectionKeys 属性添加到 web.config 文件中，如下所示[，](http://www.codeproject.com/Tips/319001/Error-Operation-is-not-valid-due-to-the-current-st)形式为

```
<appSettings>
    <add key="aspnet:MaxHttpCollectionKeys" value="5000" />
    <add key="aspnet:MaxJsonDeserializerMembers" value="5000" />
</appSettings> 
```

，但它没有帮助。该错误与代码无关，完全基于 GUI，或者我相信。欢迎任何帮助解决此错误。

# c - #define _snprintf_s 到 snprintf

> ID：12430346
> 
> 赞同：2
> 
> 时间：2012-09-14T18:53:17.623
> 
> 标签：c, visual-c++

我正在将一个win32应用程序移植到linux，而不是在每个_snprintf_s周围都有一堆#ifdefs，我想知道是否有办法#define它以某种方式snprintf。

所以像 -

```
#define _snprintf_s(1,2,3,4,5) snprintf(1,2,4,5) 
```

snprintf 不存在第三个参数、要存储的最大字符数或 _TRUNCATE。

这种方法对吗？我可以做这样的#define吗？如果是这样，有人可以指出我应该怎么做吗？

我通过[这个问题](https://stackoverflow.com/questions/3976306/using-snprintf-in-a-cross-platform-application)知道我必须小心这样的#defines。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T18:55:04.443

`#define _snprintf_s(a,b,c,...) snprintf(a,b,__VA_ARGS__)`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-14T20:48:52.077

`_snprintf_s()`您可以将其实现为函数，而不是宏。这个简单（未经测试）的版本不执行`_snprintf_s()`应该执行的运行时错误处理（如果需要/需要，您可以添加它），但它尝试处理`count`参数强加的差异和截断时的返回值：

```
#include <assert.h>
#include <stdarg.h>
#include <stdio.h>
#include <string.h>

#if !defined(_TRUNCATE)
#define _TRUNCATE ((size_t)-1)
#endif

int _snprintf_s(
   char *buffer,
   size_t sizeOfBuffer,
   size_t count,
   const char *format,
   ... 
)
{
    int retval;
    va_list ap;

    if ((count != _TRUNCATE) && (count < sizeOfBuffer)) {
        sizeOfBuffer = count;
    }

    va_start(ap, format);
    retval = vsnprintf(buffer, sizeOfBuffer, format, ap);
    va_end(ap);

    if ((0 <= retval) && (sizeOfBuffer <= (size_t) retval)) {
        retval = -1;
    }

    return retval;
} 
```

（为什么首先是参数列表中`count`的`_snprintf_s()`参数？）

# c - 想知道这个表达式是如何工作的吗？

> ID：12430347
> 
> 赞同：-2
> 
> 时间：2012-09-14T18:53:17.997
> 
> 标签：c, operator-precedence, decrement

问题是：

```
int z, x=5, y=-10 ,a=4, b=2;
z = x++ - --y * b / a; 
```

只是想知道输出以及 --y 将如何处理“y”的负值。解决这个问题的优先级是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T18:59:23.523

它将根据运算符优先级或“操作顺序”进行评估 - [http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedence](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedence)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T19:04:06.587

```
int z, x=5, y=-10 ,a=4, b=2;
z = x++ - --y * b / a;
z = 5++ - --(-10) * 2 / 4 // Suffix ++/-- goes first
z = 5 - --(-10) * 2 / 4 // Prefix ++/-- is next
z = 5 - (-11) * 2 / 4 // and then * and /
z = 5 - (-22) / 4
z = 5 - (-5)
z = 10 
```

与 y 不同，x 保留它的值，因为在后缀表示法中，运算符返回原始值而不是修改后的值。（其他人链接了运算符优先级页面，所以我不会）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T19:03:57.583

根据[操作顺序，这两个是等价的](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedence)

```
z = x++ - --y * b / a; 

z = (x++) - (((--y) * b) / a); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T20:33:32.407

操作的*优先级*是

```
z = ((x++) - (((--y) * b) / a)); 
```

爱荷华州，

1.  `--y`计算前必须知道结果`--y * b`；
2.  的结果`--y * b`必须在计算之前知道`--y * b / a`（`*`并且`/`具有相同的优先级，但是是左关联的，因此`a / b * c`将被解析为`(a / b) * c`）；
3.  `x++`计算前必须知道结果`x++ - --y * b / a`
4.  最后，在`x++ - --y * b / a`将结果分配给 之前，必须知道 的结果`z`。

*然而*...

请注意，*优先级*与*评估顺序不同*。每个单独的表达式`x++`, `--y`,`b`和`a`都可以*按任何顺序*进行计算。编译器可以选择计算`x++`, then `a`, then `b`, then `--y`。编译器可以选择在评估`--y * b / a`之前先评估`x++`。编译器可以选择将副作用应用推迟到`x++`结果`--y`分配给`z`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T19:01:06.510

`y`将在`=`操作`--`之前递减`y`， 因为在.`x``=``++``x`

例如：

```
int i = 2, y = 3, z;
z = ++i + ++y;         //3 + 4 
```

或者

```
int i = 2, y = 3, z;
z = --i + --y;         //1 + 2 
```

和

```
int i = 2, y = 3, z;
z = i++ + y++;         //2 + 3 
```

请注意，在最后一个示例中，它仍然是 2 + 3。那是因为在`++`之后`i`，`y`所以它们在`=`语句之后递增。

知道了这一点，只需应用您的正常操作顺序 `(1\. Parentheses 2\. Exponents 3\. Multiplication/Divison 4\. Addition/Subtraction)`来解决问题。由于乘法和除法段彼此相邻，因此只需从左到右读取该部分。

```
int z, x=5, y=-10 ,a=4, b=2;
z = x++ - --y * b / a;
y = --y
y = -11
z = 5 - -11 * 2 / 4
z = 5 - -22 / 4
z = 5 - -5
z = 10
x = 5++
x = 6 
```

这是我对此的思考过程：我根据`x`and`y`的位置来解释`++`and的值`--`，然后首先乘以该值，然后`-y * b`将该值除以，`a`然后将该值添加到`x`，最后递增`x`。请记住，当乘法和除法彼此相邻时，只需从左到右阅读。

# c - 如何在 FreeBSD 中获取开放的 posix 共享内存段列表

> ID：12430351
> 
> 赞同：7
> 
> 时间：2012-09-14T18:53:33.047
> 
> 标签：c, posix, shared-memory, freebsd

在 linux 中，我可以通过获取 /dev/shm 目录列表来获取打开的 posix 共享内存段的列表。

如何以编程方式获取 FreeBSD 中所有打开的 posix 共享内存段的列表？假设使用 shm_open 打开的段，我什至不知道用作 shm_open 的第一个参数的名称的一部分。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T20:07:39.573

你不能。请参阅 /sys/kern/uipc_shm.c 中的注释：

```
 * TODO:
 *
 * (2) Need to export data to a userland tool via a sysctl.  Should ipcs(1)
 *     and ipcrm(1) be expanded or should new tools to manage both POSIX
 *     kernel semaphores and POSIX shared memory be written?
 *
 * (3) Add support for this file type to fstat(1). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-13T19:33:15.387

您可以使用**posixshmcontrol**实用程序。

# ruby-on-rails - rails 中的全局变量，类似于 devise 中的全局变量

> ID：12430352
> 
> 赞同：0
> 
> 时间：2012-09-14T18:53:40.463
> 
> 标签：ruby-on-rails, devise, global-variables

在 Rails 中，如果我将设计用于表“用户”，它会创建一个全局变量 current_user，该变量在整个代码中都使用。我想在不触及设计代码的情况下添加一个类似的全局变量（current_auth_user）。最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T19:03:51.667

在您的应用程序控制器中，您只需添加一个辅助方法

```
class ApplicationController < ActionController::Base
  helper_method :current_auth_user

  protected

  def current_auth_user
    return whatever
  end

end 
```

# sass - 带有指南针和 sass 的前景 img 精灵

> ID：12430354
> 
> 赞同：2
> 
> 时间：2012-09-14T18:53:59.750
> 
> 标签：sass, sprite, compass-sass

我知道 compass 提供了一种使用厚实的 png gem 将 CSS sprites 实现为背景图像的方法。但是，生成的 CSS 使用 CSS 背景图像。

```
@import "images/icons/*.png"
@include all-icons-sprites 
```

如果我想使用 compass CSS sprites，但使用嵌入图像而不是背景图像，并将图像 sprite 相对定位，以便显示其中的一部分，该怎么办。 

我可以使用指南针生成精灵，但是是否有一个可以以某种方式为类生成 CSS 的 mixin，所以它使用定位而不是背景图像？

# c# - 将多个 linq 查询和连接的结果组合成一个较小的查询

> ID：12430360
> 
> 赞同：0
> 
> 时间：2012-09-14T18:54:30.223
> 
> 标签：c#, linq, linq-to-dataset

我可以将以下内容重组为更紧凑的 linq 查询，理想情况下不引入辅助函数吗？

```
var revPerUnitChanges = 
    from row in this.DataTable.GetChanges(DataRowState.Modified).AsEnumerable()
    let field = "Rev/Unit"
    select new {
        Field = field,
        From = row.Field<decimal>(field, DataRowVersion.Original),
        To = row.Field<decimal>(field, DataRowVersion.Current),
        ItemIds = row.Field<string>("ItemIds"),};
var costPerUnitChanges = 
    from row in this.DataTable.GetChanges(DataRowState.Modified).AsEnumerable()
    let field = "Cost/Unit"
    select new {
        Field = field,
        From = row.Field<decimal>(field, DataRowVersion.Original),
        To = row.Field<decimal>(field, DataRowVersion.Current),
        ItemIds = row.Field<string>("ItemIds"), };
var numUnitsChanges = 
    from row in this.DataTable.GetChanges(DataRowState.Modified).AsEnumerable()
    let field = "Units"
    select new {
        Field = field,
        From = row.Field<decimal>(field, DataRowVersion.Original),
        To = row.Field<decimal>(field, DataRowVersion.Current),
        ItemIds = row.Field<string>("ItemIds"), };
var changes = 
    revPerUnitChanges
        .Concat(costPerUnitChanges
        .Concat(numUnitsChanges))
        .Where(c => c.From != c.To); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:15:20.393

首先创建一个帮助类来保存数据。（您的代码使用匿名类型没有任何问题，但如果您想将部分重构为方法，使用命名类会容易得多。）

```
public class MyClass //TODO give better name
{
    public MyClass(DataRow row, string field) //You could have a public static generate method if it doesn't make sense for this to be a constructor.
    {
        Field = field;
        From = row.Field<decimal>(field, DataRowVersion.Original);
        To = row.Field<decimal>(field, DataRowVersion.Current);
        ItemIds = row.Field<string>("ItemIds");
    }
    public string Field { get; set; }
    public decimal From { get; set; }
    public decimal To { get; set; }
    public string ItemIds { get; set; }
} 
```

既然我们已经解决了这个问题，那么查询就相当简单了。

```
var changes = dataTable.GetChanges(DataRowState.Modified)
    .AsEnumerable()
    .Select(row => new[]{ //create 3 new items for each row
                    new MyClass(row, "Rev/Unit"),
                    new MyClass(row, "Cost/Unit"),
                    new MyClass(row, "Units"),
                })
    .SelectMany(item => item) //flatten the inner array
    .Where(item => item.From != item.To); 
```

# xml - xpath 在 html 代码中查找值

> ID：12430362
> 
> 赞同：0
> 
> 时间：2012-09-14T18:54:31.373
> 
> 标签：xml, xpath

我想使用 xpath 仅从下面的 html 中获取值“美国国家航空航天局”

```
 <table style="margin: 0 5px 0 2px; font-size: 8pt;" class="joaResultsDetailsTable">

                    <tr>
                        <td><strong>Department:</strong></td>
                        <td>National Aeronautics and Space Administration</td>
                    </tr>

                    <tr>
                        <td style="width: 112px;"><strong>Agency:</strong></td>
                        <td>George C. Marshall Space Flight Center</td>
                    </tr>
                    <tr>
                        <td><strong>Open Period:</strong></td>
                        <td>9/10/2012 to 9/14/2012</td>
                    </tr>
                    <tr>
                        <td><strong>Who May Apply:</strong></td>
                        <td>
                            Current students from education institutions interested in paid opportunities wi...

                        </td>
                    </tr>
                    <tr>

                        <td style="vertical-align:top;"><strong>Location(s):</strong></td>

                            <td>Huntsville, Alabama</td>

                    </tr>
                </table> 
```

我希望你能帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:07:00.090

您没有提供太多上下文。以下任何 XPath 表达式都将满足您声明的要求，即当针对您显示的输入进行评估时，表达式的值应该是字符串“美国国家航空航天局”：

```
string(self::table/tr[td='Department:']/td[2])

string(self::table/tr[1]/td[2])

string(self::table/descendant::td[2]))

'National Aeronautics and Space Administration' 
```

其中哪一个最适合您取决于您​​未说明的要求是什么。

# c - dos基础系统中指针的大小

> ID：12430363
> 
> 赞同：0
> 
> 时间：2012-09-14T18:54:38.337
> 
> 标签：c

在 C 编程中，指针在 dos 基本系统中为 2 字节 = 16 位。但用户区域为 64kb = 64*1024*8 bits 或 2^19bits 。如何？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T18:59:58.357

指针指向字节，而不是位。那就是你感到困惑的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T19:00:09.297

指针不寻址单个位。它们寻址字节，因此 16 位指针寻址 64 KB。它是 2^19 位，但它只有 2^16 字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T18:56:05.350

在 DOS 中有[字节寻址](http://en.wikipedia.org/wiki/Byte_addressing)而不是位寻址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T06:57:53.190

`sizeof(pointer)`通常是`sizeof(int)`

请不要假设 sizeof(pointer)=2 因为如果您更改编译器/系统/环境，您会突然发现自己正在尝试调试以前没有的问题

# google-maps - 标签中带有magento的谷歌地图版本3

> ID：12430366
> 
> 赞同：-1
> 
> 时间：2012-09-14T18:54:50.867
> 
> 标签：google-maps, magento, google-maps-api-3

我正在尝试在标签中使用 magento 加载 google map version3。地图以覆盖大部分地图的灰色部分显示。

任何人都可以帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:54:50.867

我在标签中发现了带有 magento 的 google map version3 的问题，在 google 上进行了许多研发后，我得到了解决方案。我想与您分享...这是解决方案：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<script type="text/javascript">
 var latLng;
function initialize() {
var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 8,
    center: new google.maps.LatLng(26.937201,75.785672),
    scrollwheel: true,
    disableDefaultUI: true,
    navigationControl: true,
    mapTypeId: google.maps.MapTypeId.ROADMAP,

});

var infoWindow = new google.maps.InfoWindow;

var onMarkerClick = function() {
  var marker = this;
  var latLng = marker.getPosition();
  infoWindow.setContent("I'm here!!!!");

  infoWindow.open(map, marker);
};
google.maps.event.addListener(map, 'click', function() {
  infoWindow.close();
});

var marker1 = new google.maps.Marker({
  map: map,
  position: new google.maps.LatLng(26.937201,75.785672)
});

google.maps.event.addListener(marker1, 'click', onMarkerClick);
  } 
 var GMaps = Class.create();
GMaps.prototype = {             }
var gmaps = null;
function switchGMapsTab(tab){
    if ( tab.tab.container.activeTab.id == 'googlemap_tabs_id'){
        if (!gmaps){
               initialize();
        }
    }
}
varienGlobalEvents.attachEventHandler('showTab', switchGMapsTab);    
</script> 
```

也访问链接，它也可以帮助您[使用 v3 API 导致 Google 地图上出现灰色空间的原因是什么？](https://stackoverflow.com/questions/10786132/what-is-causing-gray-space-on-a-google-map-using-v3-api#answers-header)

谢谢

# jquery - .on 事件在加载而不是点击时触发

> ID：12430375
> 
> 赞同：1
> 
> 时间：2012-09-14T18:55:31.727
> 
> 标签：jquery, dynamically-generated-co

好的，我是 jquery 的新手，并且已经取得了相当大的进步，但是这个让我很难过。我有一个事件处理程序，我绑定到一个动态加载的 div 来处理点击悬停等，但是当我尝试绑定一个自定义函数时，它会在加载时触发它，而不是在点击时触发它。

```
function AddUser(){
       alert('Hi');
       if ($section !== 'addUser'){
           $section = 'addUser';        
       $('.userPanel').empty();
       $('.userPanel').load('pages/addUser.html');
       }
       else{return;}
    }

    $(document).on("click", "a.addUser", AddUser()); 
```

但是，如果我在 .on 绑定中定义一个事件，它可以正常工作

```
 $(document).on("click", "a.addUser",function(){
        alert('Hi');
    }); 
```

我可能错过了一些基本的东西，但这让我整个早上都很沮丧，所以任何帮助都将不胜感激。

注意：我意识到绑定到文档是通用的，我应该绑定到我的静态父 div 之一，这只是我在测试时所做的更改。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T18:57:11.447

改变：

```
$(document).on("click", "a.addUser", AddUser()); 
```

到

```
$(document).on("click", "a.addUser", AddUser); 
```

通过在 AddUser 中添加括号，您可以在代码中有效地调用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T18:58:11.970

```
$(document).on("click", "a.addUser", AddUser); 
```

或者

```
$(document).on("click", "a.addUser", function(){
   AddUser();
 }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T18:57:18.547

只需删除括号`AddUser()`

```
$(document).on("click", "a.addUser", AddUser); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T18:58:03.150

改变

```
$(document).on("click", "a.addUser", AddUser()); 
```

到

```
$(document).on("click", "a.addUser", AddUser); 
```

因为`AddUser()`是在页面加载后自调用并执行的。

或者

```
$(document).on("click", "a.addUser", function(){
  AddUser();
}); 
```

因为，`function() { AddUser(); }`不是自调用块，并且在事件发生时将执行其中的所有内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T18:58:30.870

使用函数签名，否则您将调用该函数..将其更改为

```
$(document).on("click", "a.addUser", AddUser); 
```

**[演示](http://jsfiddle.net/R3HW5/1/)**

# windows - 在 Windows Azure 中生成 html 和 PDF 的 ASPx 模板

> ID：12430376
> 
> 赞同：0
> 
> 时间：2012-09-14T18:55:37.743
> 
> 标签：windows, templates, pdf, azure

我有一个项目要求在 MS Windows Azure 上部署的解决方案上生成 PDF 文件和 HTML。PDF 文件通常作为演示文稿的一部分打印并交付给客户，也可以通过客户门户获得。客户端门户的用户还应该能够通过 html 以更具交互性的方式与信息进行交互。所以这是我的问题，是否有 ASPx 控件允许以在 Azure 服务器上运行的 html 或 pdf 呈现信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:16:37.920

您可以创建一个 HTML 解决方案，并在需要时将每个页面转换为 PDF。有几个工具可以帮助您：

1.  [wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)（LGPL，命令行应用程序）
2.  [Amyuni WebkitPDF](http://www.amyuni.com/en/server/webkitpdf/)，一个 HTML 到 PDF/XAML 的转换库（免费用于商业和非商业用途，带有 C# 绑定的 Windows 库）

# javascript - 使用查询小部件将 ActiveX 控件动态加载到页面上

> ID：12430377
> 
> 赞同：6
> 
> 时间：2012-09-14T18:55:40.227
> 
> 标签：javascript, jquery, activex

我有一个看起来像这样的活动 X 控件：

```
<object id="activeX" height="100%" width="100%" classid="myClass" >
    <param name="name" value="myControlName" />
    <param name="details" value="interestingDetails" />
    <param name="a" value="a" />
    <param name="b" value="b" />
</object> 
```

我不想让这个 html 出现在我的页面上，我想使用 jquery 小部件动态插入它。

我可以做这样的事情：

```
myObject.id = "activeX";
        myObject.height = "100%";
        myObject.width = "100%";
        myObject.classid = "myClass";

    var param1 = document.createElement('param');
    param1.setAttribute('name', 'name');
    param1.setAttribute('value', 'myControlName');
    myObject.appendChild(param1);

    var param2 = document.createElement('param');
    param2.setAttribute('name', 'details');
    param2.setAttribute('value', 'interestingDetails');
    myObject.appendChild(param2);

    var param3 = document.createElement('param');
    param3.setAttribute('name', 'a');
    param3.setAttribute('value', 'a');
    myObject.appendChild(param3);

    var param4 = document.createElement('param');
    param4.setAttribute('name', 'b');
    param4.setAttribute('value', 'b');
    myObject.appendChild(param4); 
```

然后将该对象附加到我页面上的某些内容上。

或者我可以简单地将 html 附加到我的页面，例如：

```
 $('#div').append('<object id="activeX" height="100%" width="100%" classid="myClass" >')
    .append('<param name="name" value="myControlName" />')
    .append('<param name="details" value="interestingDetails" />')
    .append('<param name="a" value="a" />')
    .append('<param name="b" value="b" />')
    .append('</object>'); 
```

这些工作都没有。当我尝试使用上述两种方法之一调用我刚刚加载到页面上的活动 X 控件时，我得到对象不存在。

调用活动的 X 对象，当我直接编写我的 HTML 时。但不是当我从小部件加载这个对象时。

--有谁知道使用jquery小部件将activeX控件加载到页面上的方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-07T06:05:53.453

检查这一点：[可以使用 javascript 将 ActiveX 控件附加到页面吗？](https://stackoverflow.com/questions/1065828/possible-to-append-a-activex-control-to-a-page-using-javascript?rq=1)

我不知道您使用的是什么 activex，但我可以建议一种通用方法：

*   让activex加载到页面中。
*   只是把它隐藏起来
*   如果有启动/停止类型的控件，请在“div”隐藏/显示上使用它

这样，您将确保用户可以选择在页面加载期间允许 activex，并且可以在显示 div 元素时获取内容

# php - CI 创建多个会话

> ID：12430380
> 
> 赞同：1
> 
> 时间：2012-09-14T18:55:49.713
> 
> 标签：php, codeigniter

我的 CI 应用程序运行良好。在我的本地主机上，它可以正常工作，在实时站点上，CI 会在每次页面刷新时不断生成会话。我已经更新了数据库上的会话表以适应更长的 user_agents。这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-27T04:26:14.340

在您的表单页面上，如果会话为空或您有会话，则您没有条件，

如果表单刷新，它将循环创建一个新会话。所以这就是问题所在

然后，如果你想删除一个会话，你可以

```
$this->session->unset_userdata($yoursession); 
```

不要做 cookie 我认为这不安全，但如果你学习安全编程，我认为我会很安全 ^_^

# ios - 昨天在手机上安装了临时分发，但今天没有

> ID：12430381
> 
> 赞同：0
> 
> 时间：2012-09-14T18:55:57.410
> 
> 标签：ios, xcode

我正在尝试在某人的手机上安装一个临时分发包，昨天的一个构建成功，但今天的另一个构建将无法工作。

我已经尝试过这些配置文件组合：

第一个是 XCode 代码签名身份，第二个是 Ad-Hoc 部署签名身份

```
1) Ad hoc distribution +  Apple Push: result "signed with invalid entitlements"
2) Team provisioning + Apple Push: result installs but can't register for the push token
3) iPhone Distribution + Apple Push: result installs but can't register for the push token
4) Apple Push + Ad hoc: result "signed with invalid entitlements"
5) iOS Team Provisioning + Ad Hoc: result "signed with invalid entitlements" 
```

我可以继续尝试所有可能的组合，但这在过去有效，为什么现在不行。应该使用什么组合？

我正在使用 iPhone Configuration Utitlity 进行安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:18:30.760

在 IOS Provisioning Portal 的 Provisioning 页面中，单击新分发配置文件旁的“下载”按钮，它应该会添加到 Xcode。

要检查您是否拥有它，请转到 Xcode Organizer、Devices，然后转到左侧的 Library / Provisioning Profiles。

如果自动配置不起作用，那么对我有用的解决方法是像您一样进行清理，然后禁用自动配置，最后手动添加配置文件。

希望这可以帮助。如果没有然后评论。

# python - PyUnit：如何从文件中存在的不同 unittest.TestCase 子类运行所有测试

> ID：12430385
> 
> 赞同：2
> 
> 时间：2012-09-14T18:56:31.167
> 
> 标签：python, python-unittest

```
import unittest

import HTMLTestRunner

class TestClass1(unittest.TestCase):

    def setUp(self):
        pass

    def case1(self):
        assert 4 == 3

    def case2(self):
        assert 4 == 4

    def tearDown(self):
        pass

class TestClass2(unittest.TestCase):

    def setUp(self):
        pass

    def case3(self):
        assert 1 == 2

    def tearDown(self):
        pass

def suite():

    suite = unittest.TestSuite()
    suite.addTest(TestClass1(['case1','case2']))
    suite.addTest(TestClass2('case4'))
    return suite

test_suite = suite()

unittest.TextTestRunner(verbosity=2).run(test_suite)

fp = file('my_report.html', 'wb')

runner = HTMLTestRunner.HTMLTestRunner(
                stream=fp,
                title='My unit test',
                description='This demonstrates the report output by HTMLTestRunner.'
                )

runner.run(test_suite) 
```

我试图在一次运行中运行两个类中的所有方法。但是，上面的代码并没有这样做。在套件功能中，我尝试从类中添加多个测试，但这也不起作用并且出现错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:35:37.457

从[这个](https://stackoverflow.com/a/3137535/197011)问题“ [PyUnit 中不推荐使用测试套件吗？](https://stackoverflow.com/questions/3121107/is-test-suite-deprecated-in-pyunit) ”的答案：

“如果您想在单个模块中运行所有测试，则不需要 unittest.TestSuite，因为 unittest.main() 将动态检查调用它的模块并查找从 unittest.TestCase 派生的所有类。”

该答案中还有更多关于[unittest.TestSuite](http://docs.python.org/library/unittest.html#unittest.TestSuite)何时有用的信息。

也就是说，我需要进行一些更改才能使这些测试正常工作。首先，[unittest](http://docs.python.org/library/unittest.html)在开始时查找带有“test_”的函数。此外，应该使用unittest 的[assertEqual 和类似方法，而不仅仅是](http://docs.python.org/library/unittest.html#assert-methods)[Python 的 assert 语句](http://docs.python.org/reference/simple_stmts.html#the-assert-statement)。这样做并消除一些不需要的代码会导致：

```
import unittest
class TestClass1(unittest.TestCase):
    def test_case1(self):
        self.assertEqual(4, 3)
    def test_case2(self):
        self.assertEqual(4, 4)
class TestClass2(unittest.TestCase):
    def test_case3(self):
        self.assertEqual(1, 2)
unittest.main() 
```

这产生了适当的输出（3 次测试运行 2 次失败），为了篇幅，我不会在这里重现。

# css - 脚手架生成器后带有灰色文本的 Twitter 引导按钮

> ID：12430386
> 
> 赞同：3
> 
> 时间：2012-09-14T18:56:32.303
> 
> 标签：css, ruby-on-rails-3, twitter-bootstrap

我有一个非常相似的问题，因为这个 [Twitter bootstrap 显示带有灰色文本的按钮，](https://stackoverflow.com/questions/10507777/twitter-bootstrap-displays-button-with-greyed-text) 其中我有一个 Twitter Bootstrap 按钮 btn-info 和一个下拉菜单，在我单击下拉项目后，按钮的文本现在是灰色的，只显示为当我将鼠标悬停在它上面时是白色的。即使我停止 Rails 服务器并重新启动，它也永远不会恢复正常。如果我使用不同的浏览器（比如我从 Firefox 切换到 Chrome），按钮的文本是白色的，但是一旦我单击下拉项目，问题就会再次出现。

我相信问题直到我运行了一个脚手架生成器之后才开始，除了我没有要删除的 Scaffold.css 建议是修复[Twitter 引导显示按钮的灰色文本](https://stackoverflow.com/questions/10507777/twitter-bootstrap-displays-button-with-greyed-text)

任何想法如何停止按钮的神秘永久灰色文本？

这是我的按钮html

```
<span class="span3 btn-group">
    <a id="j_button" class="btn btn-info session_button dropdown-toggle" data-toggle="dropdown" href="#">
        Send to J location
        <span class="caret"></span>
    </a>
    <ul class="dropdown-menu">
        <li><a id='j_dropdown1' href="#">New issue</a></li>
        <li><a id='j_dropdown2' href="#">Add to existing</a></li>
    </ul>
</span> 
```

我添加的唯一CSS是

```
.session_button {
  font-size: 12px;
  font-weight: bold;
  padding-left: 8px;
  padding-right: 5px;
  padding-bottom: 0;
  padding-top: 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T19:40:15.947

这是因为您实际上正在使用链接。

它只是看起来像一个按钮，因为添加了类`btn`并`btn-info`添加了 twitter 引导样式。当您单击一个链接时，浏览器通常会记住您已经访问过该链接，并在您下次看到它时显示访问过的状态。

您可能还希望将 css 样式添加到链接的已访问状态以将其从灰色更改。

假设您希望它保持白色，您可以通过添加以下内容来实现：

```
.session_button:visited { color:#FFF; } 
```

还可以查看[CSS 选择器访问链接](http://www.w3schools.com/cssref/sel_visited.asp)。

# facebook - 如何通过 Graph API 获取应用的“代发帖”设置？

> ID：12430388
> 
> 赞同：2
> 
> 时间：2012-09-14T18:56:38.607
> 
> 标签：facebook, facebook-graph-api

有两种隐私。

**1.默认隐私设置** ![在此处输入图像描述](../Images/a4d0a5e0a499416e29b5adec6c8c094b.png)

* * *

**2\. 每个应用程序的隐私。**在用户进行身份验证时设置或在隐私设置页面修改它 ![在此处输入图像描述](../Images/f730ad72f04a1b2f878c6f16b711e1fb.png) 和 ![在此处输入图像描述](../Images/09523b8e5305d2d14fd783d792b6b8f6.png)

根据[https://developers.facebook.com/docs/reference/fql/privacy_setting/](https://developers.facebook.com/docs/reference/fql/privacy_setting/)，我们可以通过 FQL 获得默认隐私。

在这篇文章中[https://developers.facebook.com/blog/post/543/](https://developers.facebook.com/blog/post/543/)表示用户可以在“代表您的帖子：谁可以看到此应用在您的 Facebook 上为您发布的帖子”中为每个应用修改每个应用的隐私时间线？”</p>

并且[https://developers.facebook.com/blog/post/586/](https://developers.facebook.com/blog/post/586/)表示我们可以为用户检索应用特定的隐私设置。“通过privacy_setting表，应用可以检索用户为应用设置的隐私设置。”</p>

但它确实说明了如何检索应用程序的隐私设置，而不是默认隐私设置。

去年之前，也许下面的讨论工作正常。但现在我认为它们已经过时了：

*   [如何通过 API 确定 Facebook 应用程序的“代表我发帖”设置？](https://stackoverflow.com/questions/10002941/how-to-determine-the-posts-on-my-behalf-setting-for-a-facebook-application-via)
*   [Graph API 端点以获取新的“每应用发布隐私”控件](https://stackoverflow.com/questions/7502375/graph-api-end-point-to-get-the-new-per-app-post-privacy-controls)
*   [有没有办法知道用户是否更改了您的 FB 应用程序的默认“活动隐私”](https://stackoverflow.com/questions/9823828/is-there-a-way-to-know-if-a-user-changes-the-default-activity-privacy-for-your)

目前，不仅有默认的隐私设置，还有用户可以控制的每个应用程序的隐私设置。

如果我们使用

```
SELECT name, value, description, allow, deny, networks, friends
FROM privacy_setting
WHERE name = 'default_stream_privacy' 
```

检索隐私，结果与 1\. 默认隐私设置相同。

* * *

我的问题是，**如何获得 2\. Per-app privacy 的设置值？**

在上面的 FQL 查询中，是否有任何关键字可以放在名称列而不是“default_stream_privacy”？

它将影响应用程序使用 API 密钥发布的所有新状态/相册/照片/视频帖子的隐私。而且我需要在自定义 UI 中显示比应用程序隐私设置更严格的隐私选择。

感谢您提前回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:07:50.890

`default_stream_privacy`您的应用检索的设置**是**特定于应用的隐私设置 - 您可以在几秒钟内使用 Graph API Explorer 工具验证这一点，在 FQL 表中检查该值，在您的隐私设置中修改该应用的隐私设置并再次检查.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T03:28:56.877

好的...我找到了根本原因。

在此页面[https://developers.facebook.com/docs/reference/fql/privacy_setting/](https://developers.facebook.com/docs/reference/fql/privacy_setting/)中，有一个链接（*尝试此查询以获取测试应用程序*）。此链接的访问令牌有效但不正确。如果我们测试 *privacy_setting* 表，*default_stream_privacy* 的值是不正确的。

如果我们从 Graph API Explorer 或应用身份验证中获得有效且正确的访问令牌，则返回值将正确。

谢谢@igy！

# php - 从表中填充下拉列表，然后从另一个表中设置选定的选项

> ID：12430390
> 
> 赞同：0
> 
> 时间：2012-09-14T18:57:06.497
> 
> 标签：php, mysql

我有一张销售订单可以拥有的订单状态表；状态不一定是连续的。我可以使用以下命令将这些状态放入下拉列表中：

```
$sql1 = 'SELECT * FROM `mjj_order_status` ORDER BY Order_status_name DESC';
$result_order_status = mysql_query($sql1);

echo '<select name="Order_status">';
while ($row = mysql_fetch_array($result_order_status)) {
    echo '<option
    value="'.$row['Order_status_ID'].'">'.$row['Order_status_name'].'</option>';
}
echo '</select>'; 
```

当我尝试从数据库中获取订单数据，然后将下拉列表设置为该订单的状态时，就会出现我的问题。我可以运行查询以获取应选择的订单状态，但不确定如何编写代码如何应用此信息。获取订单状态 ID 的查询是：

```
SELECT Order_status FROM `mjj_orders` WHERE Order_ID = $_POST['Order_ID'] 
```

我已经搜索过（我认为是全面的），但我没有找到一个可行的答案，或者 - 公平地说 - 一个我能理解的答案。

（我发现了一个与此类似的问题，但我不确定如何让他们详细说明...[编辑时选择的项目 ind 下拉列表](https://stackoverflow.com/questions/9848079/selected-item-ind-dropdown-when-editing)）。

任何和所有的建议都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:03:09.050

只需插入一些逻辑来检查您正在处理的订单的状态。

```
$sql = "SELECT Order_status FROM 'mjj_orders' WHERE Order_ID = ".$_POST['Order_ID']; 
$result=mysql_query($sql); 
$myorder=mysql_fetch_array($result);

$sql1 = 'SELECT * FROM `mjj_order_status` ORDER BY Order_status_name DESC'; 
$result_order_status = mysql_query($sql1); 

echo '<select name="Order_status">'; 
while ($row = mysql_fetch_array($result_order_status)) { 
    if($myorder['Order_status']==$row['Order_status_ID']){
        $selectCurrent=' selected';
    }else{
        $selectCurrent='';
    }
    echo '<option value="'.$row['Order_status_ID'].'" '.$selectCurrent.'>'.$row['Order_status_name'].'</option>';
} 
echo '</select>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:59:39.873

只需标记 order_status_id = 应选择的 id 的选项`selected`。例如。将被选中的选项将如下`<option selected value="...`所示：

```
$id_to_select = // Your logic to get the id to select

$sql1 = 'SELECT * FROM `mjj_order_status` ORDER BY Order_status_name DESC';
$result_order_status = mysql_query($sql1);

echo '<select name="Order_status">';
while ($row = mysql_fetch_array($result_order_status)) {
  if($id_to_select == $row['Order_status_ID'])
    echo '<option selected value="'.$row['Order_status_ID'].'">'.$row['Order_status_name'].'</option>';
  else     
    echo '<option value="'.$row['Order_status_ID'].'">'.$row['Order_status_name'].'</option>';
}
echo '</select>'; 
```

# objective-c - 如何在 Objective-C 块中使用引用自身作为动画块？

> ID：12430393
> 
> 赞同：1
> 
> 时间：2012-09-14T18:57:11.080
> 
> 标签：objective-c, animation, block

理想情况下，我想编写代码，使我能够确定执行某个功能时所需的视图执行哪些动画，例如（nb，伪代码）：

```
- (void)animateView:(UIView *)view withAnimations:(NSArray *)arrayOfAnimationBlocks 
```

上述（即，期望的）函数将依次执行一系列动画，并且在前一个动画完全执行之前不会执行每个动画。我还可以`arrayOfAnimationBlocks`在运行时添加和删除动画。

为了做这样的事情，我正在尝试使用以下内容：

```
[UIView animateWithDuration:duration animations:animationBlock completion:completionBlock]; 
```

并且在调用函数时传递所有参数（`duration`, `animationBlock`, `completionBlock`）。

**然而**...

似乎您无法`self`从动画块中访问？我的动画块包含：

```
void (^animationBlock)(void) = ^
{
    NSLog(@"[^animationBlock]");
    [self.viewToAnimate setBounds:CGRectMake(self.viewToAnimate.bounds.origin.x, self.viewToAnimate.bounds.origin.y, self.viewToAnimate.bounds.size.width*2, self.viewToAnimate.bounds.size.height*2)];
}; 
```

我的完成块包含：

```
void (^completionBlock)(void) = ^
{
    NSLog(@"[^completionBlock]");
    [UIView animateWithDuration:duration animations:^{
        [self.viewToAnimate setBounds:CGRectMake(self.viewToAnimate.bounds.origin.x, self.viewToAnimate.bounds.origin.y, self.viewToAnimate.bounds.size.width/2, self.viewToAnimate.bounds.size.height/2)];
    } completion:^(BOOL finished){
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Animation Complete" message:@"The previous animations should be fully completed." delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
        alert.alertViewStyle = UIAlertViewStyleDefault;
        [alert show];
    }];
}; 
```

然后我当然有：

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0) NSLog(@"Cancel pressed.");
    else
    {
        NSLog(@"buttonIndex = %i", buttonIndex);
    }
} 
```

在两者中`animationBlock`，`completionBlock`Xcode 都会给出以下红色错误： `(!) Use of undeclared identifier 'self'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T23:27:17.617

乔希在他的评论中给出了正确的答案，我将详细说明。以下内容无效：

```
void (^completionBlock)(void) = ^
{ ... [self something] ... };

@implementation Whatever

...

@end 
```

（与`@implementation`放置在 的定义之上的相同`completionBlock`）因为在您声明的范围内`completionBlock`没有名为 的变量`self`。`self`仅存在于类的实例方法中，并引用已调用的特定实例——在一般情况下，它的值不能提前知道。

因此，您可能想要的（假设非 ARC；如果相关，则删除自动释放）类似于：

```
@implementation Whatever

- (dispatch_block_t)completionBlock
{
     return [[^{ ... [self something] ... } copy] autorelease];
}

@end 
```

它将动态生成一个指向适当自身的块，并按照正常的 getter 规则将其返回。在运行时实际发生的只是生成并存储代表进入块的外部状态的信息包。没有代码生成或类似的东西，所以不要担心成本。但是，您确实需要`copy`因为块尝试存在于堆栈上，因此如果不移动到堆中就不能安全返回，这就是`copy`在这种情况下实现的。

对于 UIView 样式的完成块，您同样需要类似的内容：

```
- (void (^)(BOOL))blockThatTakesABool
{
    return [[^(BOOL var){... [self something] ... } copy] autorelease];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T21:06:02.033

您似乎已经声明了全局变量并将它们分配给块。因此，块是在全局上下文中定义的，并且没有`self`方法`self`的（隐藏）参数，因此只存在于方法中。

在全局范围内使用块语法也是没用的。您也可以编写函数而不是块。块存在的真正原因是在 C 中（以及 C++ 和 Objective-C，因为它是基于 C/C++ 构建的）不可能以嵌套方式声明/定义函数。

以下是块的用途：

```
void foo() { ... }

void bar() 
{ 
  ...
  aFun(foo);
  ... 
} 
```

以上是合法的，但

```
void bar() 
{ 
   ...
   afun( void foo() { ... } );
   ...
} 
```

是不合法的，因为在 C/C++/Objective-C 中，一个函数不能在另一个函数中定义，也不能在表达式中内联。

许多语言允许您在表达式中内联定义函数，这是一件非常有用的事情，尤其是对于函数式编程。但是 C/C++/Objective-C 没有。

这就是 Apple 为 Objective-C 发明块的原因（并且*C++ lambdas*与 Apple 的块非常相似，在 C++11 语言的重新定义中被添加到 C++ 中）。实际上，块是可以在表达式中内联定义的匿名函数。在我的第二个示例中，您将使用块来解决问题。

块（和*C++ lambdas*）为定义内联函数和相应的闭包提供语言原生支持（有很多限制和怪癖，因为闭包在这些语言中也不是原生概念）。

它们使您更容易遵守 Greenspun 的第十条编程规则。（/我等待有人意识到有保证的尾调用优化也会有多大用处）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T23:20:22.453

如果您还没有阅读过 Apple 的 View Programming Guide，那么您应该真正阅读一下。尤其是[动画部分](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/AnimatingViews/AnimatingViews.html#//apple_ref/doc/uid/TP40009503-CH6-SW1)。

以下是直接来自该文档的示例代码：

```
- (IBAction)showHideView:(id)sender
{
    // Fade out the view right away
    [UIView animateWithDuration:1.0
        delay: 0.0
        options: UIViewAnimationOptionCurveEaseIn
        animations:^{
             thirdView.alpha = 0.0;
        }
        completion:^(BOOL finished){
            // Wait one second and then fade in the view
            [UIView animateWithDuration:1.0
                 delay: 1.0
                 options:UIViewAnimationOptionCurveEaseOut
                 animations:^{
                    thirdView.alpha = 1.0;
                 }
                 completion:nil];
        }];
} 
```

您看到带有完成块的部分吗？他们声明/创建与调用函数内联的块。当您第一次开始时，您应该始终查看 Apple 的代码并尽可能密切关注它们。当您获得更多经验时，您可以扩展并尝试其他方式来做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T01:15:16.280

大家好：我在 StackOverflow 上看到了[执行多个顺序 UIView 动画的最佳方式？](https://stackoverflow.com/questions/3849460/best-way-to-perform-several-sequential-uiview-animations)今天，其中包括用户 Yang 使用 CPAnimationSequence 的回答！链接如下。

*   GitHub存储库：[https ://github.com/yangmeyer/CPAnimationSequence#readme](https://github.com/yangmeyer/CPAnimationSequence#readme)
*   动机和理由：[https ://blog.compeople.eu/apps/?p=43](https://blog.compeople.eu/apps/?p=43)

这看起来很棒！

# c# - 命名空间设计和类分离

> ID：12430395
> 
> 赞同：0
> 
> 时间：2012-09-14T18:57:23.530
> 
> 标签：c#, .net, namespaces

我很难找到一个好的命名空间设计和类顺序。假设我们有以下命名空间层次结构：

```
 MyCompany.Hardware
       - ClassA

    MyCompany.Hardware.DeviceType1
       - ClassB : ClassA

    MyCompany.Hardware.DeviceType2
       - ClassC : ClassA

    MyCompany.Hardware.Reader
       - ReaderClassC : Reader 
```

问题：

1.  我应该将基类始终放在父命名空间中吗？还是在子命名空间和父命名空间的具体实现中？

2.  应该`ReaderClassC`在单独的命名空间中还是在同一个命名空间中`MyCompany.Hardware.DeviceType2`？还是我应该更喜欢父命名空间来“快速”访问？

3.  忘记所有的命名空间并把所有的都放在一个（`MyCompany.Hardware`）？

希望你明白我试图摆脱什么。如果您能告诉我您的命名空间设计，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T18:59:37.870

像往常一样，这是一个品味问题。

我更喜欢使用你的第四种方法，因为它更干净（对我来说）。我的意思是，如果我使用的是 Reader，那么我依赖于使用该命名空间。

当然，您可以查看[命名空间命名指南](http://msdn.microsoft.com/en-us/library/893ke618%28v=vs.71%29.aspx)，尤其是：

> 嵌套命名空间应该依赖于包含命名空间中的类型。例如，System.Web.UI.Design 中的类依赖于 System.Web.UI 中的类。但是，System.Web.UI 中的类不依赖于 System.Web.UI.Design 中的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:11:36.673

假设您对面向对象编程相对较新，这只是我的临时建议。我认为您的问题涉及设计领域，该领域需要辩论和编程风格选择。

也就是说，

命名空间的主要目标之一是将您的类型分组，以便其他“客户端”或引用其包含类库的程序可以轻松地重用它们。

考虑到这一点，为简单起见，您可以从一个命名空间开始，并在命名空间增加价值时引入它们。

在您的示例中，他们可能*不会*增加价值的一个地方是 DeviceType1 和 DeviceType2。以我的经验，这些将属于同一个命名空间。

```
namespace Acme.Hardware {
   class Product 
   {
      public int Price { get; set; }
      public bool InStock { get; set; }
   }
   class Hammer : Product
   {
   }
   class ScrewDriver : Product
   {
   }
} 
```

作为编码风格和命名空间如何相交的示例，请注意我是如何使用非常通用的名称`Product`而不是`HardwareProduct`. 我在这里使用了一个通用名称，因为我知道该名称将被包含`using Acme.Hardware`或完全限定的`Acme.Hardware.Product`. 无论哪种情况，附近都有上下文信息。

一般来说，我会首先关注类（即它们的功能和实现），其次才是命名空间，认为它们只是对类进行分组的一种有用方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T19:02:05.613

这取决于其他定义——当你有很多类型时，命名空间很有用，所以如果你的，比方说，`ClassB`伴随着很多与之相关的东西，`Hardware1`那么为此使用内部命名空间是非常有意义的。

理想情况下，您应该只遵循逻辑分组。您问过`ReaderC`，如果它与其他人相关`DeviceType2`而不与其他人相关，那么它不应该在父命名空间中，如果`ClassA`是所有硬件类型的基础，那么它也需要在父命名空间中。

# objective-c - UIVIew endEditing:YES 不隐藏键盘

> ID：12430397
> 
> 赞同：5
> 
> 时间：2012-09-14T18:57:28.700
> 
> 标签：objective-c, ios, ios5, uitextfield, first-responder

我有一个 UIVIew，它是一个子视图，它包含几个 UITextField。这些文本字段之一（用于 DATE）不应使用键盘进行编辑，而不是使用带有 Datepicker 的 PopOver。

达到时我运行一个方法`UIControlEventEditingDidBegin`。此方法调用`resignFirstResponder`DateTextField 上的 。

如果 DateTextField 是要编辑的第一个字段，则一切正常，但是当另一个 textField 被编辑并且当然显示键盘然后尝试编辑 DateField 时，键盘不会隐藏并且一切正常，但键盘会做任何事情。

我之前尝试过调用该方法`endEditing:YES`，`resignFirstResponder`但它不起作用。我试图在文本字段方法上运行`endEditing:YES`and ，但没有办法让那个键盘出来。`resignFirstResponder``didEndEditing`

这是我的方法：

```
- (void)showDatePopOver:(id)sender{ 
    [self.view endEditing:YES];

    UITextField *textField = (UITextField *)sender;
    [sender resignFirstResponder]; // hide keyboard

    /** POP OVER LINES**/
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:06:29.747

您应该使用`textFieldShouldBeginEditing:`委托方法而不是在以下情况下辞去第一响应者`didBeginEditing`：

这将允许在除`dateTextField`文本字段之外的所有内容上进行编辑：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
    return (![textField isEqual:dateTextField]);
} 
```

你应该指定你的视图控制器是一个文本视图委托，就像这样（在接口声明[.h文件]中）：

```
@interface MyViewController : UIViewController <UITextFieldDelegate> 
```

# asp.net-mvc - asp.net mvc 中的全球化/本地化

> ID：12430407
> 
> 赞同：1
> 
> 时间：2012-09-14T18:58:18.490
> 
> 标签：asp.net-mvc, globalization

当微软、谷歌和雅虎等公司提供可立即使用的翻译插件时，为什么必须在使用 .resx 等资源文件的应用程序中实现全球化功能。为什么不简单地在应用程序中插入任何一个翻译器，让用户可以自由选择自己的语言/文化？哪一个比其他更好？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:03:05.860

据我了解，这些翻译并不准确。我的上一位老板聘请了一名翻译，我们将数据翻译成一个单独的语言数据库表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:07:51.677

自动机器翻译不同于为不同语言提供定制翻译。机器翻译经常出错，并且很容易以令人反感或尴尬的方式表达某些内容。它也根本没有考虑本地化。

更重要的是，公共机器翻译服务仅适用于公共网站。大多数全球化网站都有只有登录用户才能访问的页面。在这种情况下，自己提供翻译会更容易。

如果您要从客户那里赚钱，那么最好投资于真正的翻译，而不是免费服务，最终会边缘化任何不讲网站主要语言的用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T19:23:08.870

自动翻译效率不高，在考虑严肃的应用程序时会给您带来麻烦。您可以在应用程序上执行一个非常简单的语言测试。首先，您将原始语言翻译成目标语言。然后，您获取结果并将其翻译回来。如果你得到满意的结果，你就可以走了。

事实上，对于一些简单的应用程序，这将是一种推荐的方式。但是，它可能会回来咬你的臀部。

# bash - 在 Bash Shell 中对 SHA-1 哈希进行 Base 64 编码

> ID：12430409
> 
> 赞同：1
> 
> 时间：2012-09-14T18:58:20.080
> 
> 标签：bash, utf-8, base64, sha

我有一个 Python 命令可以生成字符串的 SHA-1 哈希的 URL 安全 base-64 编码：

```
>>> import base64
>>> import sha
>>> base64.urlsafe_b64encode((sha.new("abc").digest()))
'qZk-NkcGgWq6PiVxeFDCbJzQ2J0=' 
```

我想在 bash shell 中做同样的事情，但我遇到了问题：

```
me:~$ echo -n "abc" | sha1sum | sed 's/ .*//' 
a9993e364706816aba3e25717850c26c9cd0d89d
me:~$ echo -n "abc" | sha1sum | sed 's/ .*//' | base64
YTk5OTNlMzY0NzA2ODE2YWJhM2UyNTcxNzg1MGMyNmM5Y2QwZDg5ZAo= 
```

我怀疑这是因为 sha1sum 的打印方式（以十六进制格式）。我认为 base64 正在读取 40 个字节，但实际上应该只读取 20 个字节。我尝试通过 iconv 进行管道传输，但没有成功：

```
me:~$ echo -n "abc" | sha1sum | sed 's/ .*//' 
a9993e364706816aba3e25717850c26c9cd0d89d
me:~$ echo -n "abc" | sha1sum | sed 's/ .*//' | base64
YTk5OTNlMzY0NzA2ODE2YWJhM2UyNTcxNzg1MGMyNmM5Y2QwZDg5ZAo= 
```

我应该在这里做什么来获得我期望的输出？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T19:36:21.507

digest() 与 hexdigest() 不同

```
base64.urlsafe_b64encode((sha.new("abc").hexdigest()))
'YTk5OTNlMzY0NzA2ODE2YWJhM2UyNTcxNzg1MGMyNmM5Y2QwZDg5ZA==' 
```

摘要的文档字符串：

```
Type:       builtin_function_or_method
Base Class: <type 'builtin_function_or_method'>
String Form:<built-in method digest of _hashlib.HASH object at 0x1c88940>
Namespace:  Interactive
Docstring:  Return the digest value as a **string of binary data**. 
```

**编辑：**尝试：

```
echo -n "abc"| openssl sha1 -binary | base64
qZk+NkcGgWq6PiVxeFDCbJzQ2J0= 
```

# javascript - 在 jQuery 对象中查找元素的位置

> ID：12430413
> 
> 赞同：1
> 
> 时间：2012-09-14T18:58:36.593
> 
> 标签：javascript, jquery

我需要在 jQuery 集合中找到特定元素的位置。

例如，在一个元素的集合中，我需要知道具有“活动”类的元素的数字位置。

```
<ul>
    <li><a href="#"></a></li>
    <li><a class="active" href="#"></a></li>
    <li><a href="#"></a></li>
</ul> 
```

我认为使用索引将是要走的路，但无论活动的位置如何，以下都会返回 0。

```
$('ul li a').index('.active'); 
```

有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T19:00:13.133

尝试这个：

```
$('ul li a.active').index(); 
```

请注意，即使使用正确的语法，此代码也总是返回`0`，因为 li 标签内只有一个锚链接，您可以找到父 li 元素的索引。

```
$('ul li:has(a.active)').index(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T19:00:22.243

尝试：

```
$('ul li a').each(function(i) {
    if ($(this).hasClass('active')) console.log(i);
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/LHHQa/)**

或者

```
console.log ($('ul li:has(a.active)').index() );​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T19:05:40.723

这应该这样做：

```
 $('ul li a').index($('ul li a.active')); 
```

如果您将 DOM 元素或 jQuery 对象传递给`index`它，则返回该元素/对象在原始集合中的位置。

为了完整起见，[jsfiddle](http://jsfiddle.net/z6UNP/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T19:18:51.997

怎么样：

```
$('li').index($('.active').parent()) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-14T19:03:27.297

$("ul li a").each(function(i){

```
if($(this).hasClass("active")){
 alert(i)        
} 
```

});​</p>

我希望它能解决你的问题

# php - 从 php4 转换为 php5

> ID：12430415
> 
> 赞同：-5
> 
> 时间：2012-09-14T18:58:45.867
> 
> 标签：php

请帮忙，我工作的地方没有内部技术，他们依靠我来满足需求。我们有一个您在线填写的应用程序，它将应用程序的结果通过电子邮件发送到一个电子邮件地址。我们的 web 主机服务器 godaddy 最近从 PHP4 (php 5.3) 切换到 PHP5，现在应用程序仍然显示在网站上，但是当他们提交应用程序时，它通过电子邮件向我们发送一个空白应用程序，而不是完整的应用程序。我打电话给godaddy，他们说我们传输数据的代码或脚本与PHP5不兼容。我已经粘贴了下面的代码，如果有人知道我必须改变什么才能让它工作，我将非常感谢他们，并将对我们的业务有很大帮助。下面是我需要帮助的代码。感谢您提供的任何见解

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-           

transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Apply Online</title>
<link href="../css/default.css" rel="stylesheet" type="text/css" />
<style type="text/css">
<!--
.style1 {
font-size: 10px;
font-style: italic;
}
-->
</style>
</head>

<body>
<?php
foreach ($_POST as $k=>$v) {$k = $v;}

$date = date(r);
?>

<table width="810" border="0" align="center" cellpadding="0" cellspacing="0">
<tr>
<td colspan="3" align="left" valign="top"><img src="../Images/GIF/Peterson_Cleaning_Logo_200x91.gif" alt="logo" width="200" height="91" /></td>
<td colspan="3" align="right" valign="middle">Peterson Cleaning, Inc.<br />
  843 North Madison Street<br />
  Rockford, IL. 61107<br />
  Phone # 815.961.1300<br />
Fax # 815.961.1190</td>
</tr>
<tr>
<td colspan="6" >&nbsp;</td>
</tr><tr class="cell_title">
<td colspan="6" align="left" valign="top" class="cell_title"><p>&nbsp;</p>
<p>Thank you, your application has been submitted.</p>
<p>&nbsp;</p></td>
</tr>
<tr>
<td colspan="6" >&nbsp;</td>
</tr>

</table>
<?php
$to = "applicant@petersoncleaning.com";
$subject = "$fname $mname $lname's Job Application";
$message = "<table width='810' border='0' align='center' cellpadding='0' cellspacing='0'>
<td colspan='3' align='left' valign='top'><img               

src='http://www.petersoncleaning.com/Images/GIF/Peterson_Cleaning_Logo_200x91.gif' alt='logo' width='200'                

height='91' /></td>
<td colspan='3' align='right' valign='middle'>Peterson Cleaning, Inc.<br />
  843 North Madison Street<br />
  Rockford, IL. 61107<br />
  Phone # 815.961.1300<br />
Fax # 815.961.1190</td>
</tr>
<tr>
<td colspan='6'>&nbsp;</td>
<tr>
<td colspan='6' class='cell_title'><strong>Application Information </strong></td>
</tr>
<tr>
<td colspan='2' class='cell_body_right_align'> First Name:
   <strong> $fname </strong> 
  <br />
Middle Name:
<strong> $mname </strong> 
<br />
Last Name:
<strong> $lname </strong> 
<br /></td>
<td colspan='4' class='cell_body_right_align'> Address:
<strong> $address </strong> 
Apt number
<strong> $apartment_number </strong> 
<br />
City:
<strong> $city </strong> 
State:
<strong> $state </strong> 
Zip:
<strong> $zip </strong> </td>
</tr>
<tr><td colspan='3' class='cell_body_center_align'>Home Phone #:
<strong> $home_phone </strong> </td>
<td colspan='3' class='cell_body_center_align'><span class='cell_body_left_align'>Cell Phone #:
<strong> $cell_phone </strong> 
</span></td>
</tr>
<tr>
<td colspan='2' class='cell_body_center_align'>Date Availible: <span class='cell_body_right_align'><span    

class='cell_body_left_align'>
<strong> $date_availible </strong> 
</span></span></td>
<td colspan='2' class='cell_body_center_align'>Social Security #: <span class='cell_body_left_align'><span      

class='cell_body_right_align'>
<strong> $soc_sec </strong> 
</span></span></td>
<td colspan='2' class='cell_body_center_align'>Desired Salary: <span class='cell_body_left_align'><span   

class='cell_body_right_align'>
<strong> $desired_salary </strong> 
</span></span></td>
</tr>
<tr>
<td colspan='3' class='cell_body_center_align'>Position Applied for: <span class='cell_body_left_align'> <strong>   

$postion_applied_for </strong>     </span></td>
<td colspan='3' class='cell_body_center_align'>City Applied for: <span class='cell_body_left_align'>     

<strong>         
$city_applied_for </strong>     </span></td>
</tr>
<tr>
<td colspan='3' class='cell_body_center_align'>Email Address:      
   <strong> $email </strong> 
<span class='style1'>(optional) </span></td>
<td colspan='3' class='cell_body_center_align'>Birthdate: 
   <strong> $birthdate </strong>  
<span class='style1'>(optional) </span></td>
</tr>
<tr>
 <td colspan='3' class='cell_body_center_align'><p>Are you a citizen of the United States? 
  <br /><strong> $us_citizen </strong> 
 </p></td>
<td colspan='3' class='cell_body_center_align'><p>If no, are you authorized to work in the U.S.? <br /><strong>      

$authorized_in_us </strong> 
</p></td>
</tr>
<tr>
<td colspan='3' class='cell_body_center_align'>Have you ever worked for this company? <br /><strong> $have_worked_for </strong> </td>
<td colspan='3' class='cell_body_center_align'>If so, when? 
<strong> $worked_for_peterson_when </strong> </td>
</tr>
<tr>
<td colspan='3' class='cell_body_center_align'>Have you ever been convicted of a felony? <br /><strong> $felony     

</strong> </td>
<td width='135' class='cell_body_center_align'>&nbsp;</td>
<td width='135' class='cell_body_center_align'>&nbsp;</td>
<td width='135' class='cell_body_center_align'>&nbsp;</td>
</tr>
<tr>
<td colspan='6' class='cell_body_center_align'>If Yes, Explain: 
 <strong> $felony_because </strong> </td>
 </tr>
 <tr>
 <td colspan='6'>&nbsp;</td>
 </tr>
 <tr>
 <td colspan='6' class='cell_title'>Education</td>
 </tr>
 <tr>
 <td colspan='2' class='cell_body_right_align'>High School: 
 <strong> $hs </strong> </td>
 <td colspan='4' class='cell_body_right_align'> Address:
 <strong> $hs_address </strong> 
 <br />
 City:
<strong> $hs_city </strong> 
State:
<strong> $hs_state </strong> 
Zip:
<strong> $hs_zip </strong>     </td>
</tr>
<tr>
<td width='135' class='cell_body_right_align'>From:
<strong> $hs_from </strong> </td>
<td width='135' class='cell_body_right_align'>To:
<strong> $hs_to </strong> </td>
<td colspan='2' class='cell_body_center_align'>Did you graduate? &nbsp;&nbsp;&nbsp;<strong> $graduate_hs     

</strong>     </td>
<td colspan='2' class='cell_body_right_align'>&nbsp;</td>
</tr>
<tr>
<td colspan='2' class='cell_body_right_align'>College:
<strong> $college </strong> </td>
<td colspan='4' class='cell_body_right_align'> Address:
<strong> $college_address </strong> 
<br />
City:
   <strong> $college_city </strong> 
  State:
   <strong> $college_state </strong> 
  Zip:
 <strong> $college_zip </strong>     </td>
 </tr>
 <tr>
 <td width='135' class='cell_body_right_align'>From:
 <strong> $college_from </strong> </td>
 <td width='135' class='cell_body_right_align'>To:
 <strong> $college_to </strong> </td>
 <td colspan='2' class='cell_body_center_align'>Did you graduate? &nbsp;&nbsp;&nbsp;<strong> $graduate_college   

 </strong> </td>
<td colspan='2' class='cell_body_right_align'>Degree:
 <strong> $college_degree </strong> </td>
 </tr>
 <tr>
 <td colspan='2' class='cell_body_right_align'>Other:
 <strong> $other </strong> </td>
 <td colspan='4' class='cell_body_right_align'> Address:
 <strong> $other_address </strong> 
  <br />
  City:
   <strong> $other_city </strong> 
  State:
   <strong> $other_state </strong> 
  Zip:
 <strong> $other_zip </strong>     </td>
 </tr>
 <tr>
 <td width='135' class='cell_body_right_align'>From:
 <strong> $other_from </strong> </td>
 <td width='135' class='cell_body_right_align'>To:
 <strong> $other_to </strong> </td>
<td colspan='2' class='cell_body_center_align'>Did you graduate? &nbsp;&nbsp;&nbsp;<strong> $graduate_other  

</strong> </td>
<td colspan='2' class='cell_body_right_align'>Degree:
 <strong> $other_degree </strong> </td>
</tr>
<tr>
<td colspan='6'>&nbsp;</td>
</tr>
<tr>
<td colspan='6' class='cell_title'>References</td>
</tr>
<tr>
<td colspan='2' class='cell_body_left_align'><em>Please list three references </em></td>
<td width='135' class='cell_body'>&nbsp;</td>
<td width='135' class='cell_body'>&nbsp;</td>
<td width='135' class='cell_body'>&nbsp;</td>
<td width='135' class='cell_body'>&nbsp;</td>
</tr>
<tr>
<td colspan='2' class='cell_body_left_align'>Full Name: 
<strong> $ref1_name </strong> </td>
<td colspan='2' class='cell_body_left_align'>Relationship:
<strong> $ref1_relation </strong> </td>
<td colspan='2' class='cell_body_left_align'>Phone #:
<strong> $ref1_phone </strong> </td>
</tr>
<tr>
<td colspan='2' class='cell_body_right_align'>Company:
<strong> $ref1_company </strong> </td>
<td colspan='4' class='cell_body_right_align'> Address:
<strong> $ref1_address </strong> 
  <br />
  City:
   <strong> $ref1_city </strong> 
  State:
   <strong> $ref1_state </strong> 
  Zip:
 <strong> $ref1_zip </strong>     </td>
 </tr>
 <tr>
 <td colspan='2' class='cell_body_left_align'>Full Name:
 <strong> $ref2_name </strong> </td>
 <td colspan='2' class='cell_body_left_align'>Relationship:
 <strong> $ref2_relation </strong> </td>
 <td colspan='2' class='cell_body_left_align'>Phone #:
 <strong> $ref2_phone </strong> </td>
 </tr>
 <tr>
 <td colspan='2' class='cell_body_right_align'>Company:
 <strong> $ref2_company </strong> </td>
 <td colspan='4' class='cell_body_right_align'> Address:
 <strong> $ref2_address </strong> 
 <br />
 City:
 <strong> $ref2_city </strong> 
 State:
 <strong> $ref2_state </strong> 
 Zip:
 <strong> $ref2_zip </strong>     </td>
 </tr>
 <tr>
 <td colspan='2' class='cell_body_left_align'>Full Name:
 <strong> $ref3_name </strong> </td>
 <td colspan='2' class='cell_body_left_align'>Relationship:
 <strong> $ref3_relation </strong> </td>
 <td colspan='2' class='cell_body_left_align'>Phone #:
 <strong> $ref3_phone </strong> </td>
 </tr>
 <tr>
 <td colspan='2' class='cell_body_right_align'>Company:
 <strong> $ref3_company </strong> </td>
 <td colspan='4' class='cell_body_right_align'> Address:
 <strong> $ref3_address </strong> 
 <br />
 City:
 <strong> $ref3_city </strong> 
 State:
 <strong> $ref3_state </strong> 
 Zip:
 <strong> $ref3_zip </strong>     </td>
 </tr>
 <tr>
 <td width='135'>&nbsp;</td>
 <td width='135'>&nbsp;</td>
 <td width='135'>&nbsp;</td>
 <td width='135'>&nbsp;</td>
 <td width='135'>&nbsp;</td>
 <td width='135'>&nbsp;</td>
 </tr>
 <tr>
 <td colspan='6' class='cell_title'>Previous Employment </td>
 </tr>
 <tr>
 <td colspan='2' class='cell_body_right_align'>Company:
 <strong> $pe1_company </strong> </td>
 <td colspan='2' class='cell_body_right_align'>Supervisor: 
 <strong> $pe1_suporvisor </strong> </td>
 <td colspan='2' class='cell_body_right_align'>Phone #:
 <strong> $pe1_phone </strong> </td>
 </tr>
 <tr>
 <td colspan='4' class='cell_body_right_align'> Address:
 <strong> $pe1_address </strong>         
 <br />
 City:
 <strong> $pe1_city </strong> 
 State:
 <strong> $pe1_state </strong> 
 Zip:
<strong> $pe1_zip </strong>     </td>
<td width='135' class='cell_body_center_align'>Starting Salary:
 <strong> $pe1_starting </strong> </td>
<td width='135' class='cell_body_center_align'>Ending Salary:
 <strong> $pe1_ending </strong> </td>
 </tr>
  <tr>
  <td colspan='6' class='cell_body_center_align'>Responsibilities: 
  <strong> $pe1_responsibilities </strong> </td>
  </tr>
  <tr>
  <td width='135' class='cell_body_right_align'>From:
  <strong> $pe1_from </strong> </td>
  <td width='135' class='cell_body_right_align'>To:
  <strong> $pe1_to </strong> </td>
  <td colspan='4' class='cell_body_center_align'>Reason for Leaving: 
  <strong> $pe1_reason </strong> </td>
  </tr>
  <tr>
 <td colspan='5' class='cell_body_center_align'>May we contact your previous supervisor for a reference?<strong> 

$prev_employer1_can_we_contact </strong> </td>
<td width='135' class='cell_body'>&nbsp;</td>
</tr>
<tr>
<td colspan='2' class='cell_body_right_align'>Company:
<strong> $pe2_company </strong> </td>
<td colspan='2' class='cell_body_right_align'>Supervisor:
<strong> $pe2_suporvisor </strong> </td>
<td colspan='2' class='cell_body_right_align'>Phone #:
<strong> $pe2_phone </strong> </td>
</tr>
<tr>
<td colspan='4' class='cell_body_right_align'> Address:
<strong> $pe2_address </strong> 
<br />
City:
<strong> $pe2_city </strong> 
State:
<strong> $pe2_state </strong> 
Zip:
<strong> $pe2_zip </strong>     </td>
<td width='135' class='cell_body_center_align'>Starting Salary:
<strong> $pe2_starting </strong> </td>
<td width='135' class='cell_body_center_align'>Ending Salary:
<strong> $pe2_ending </strong> </td>
</tr>
<tr>
<td colspan='6' class='cell_body_center_align'>Responsibilities:
 <strong> $pe2_responsibilities </strong> </td>
</tr>
<tr>
<td width='135' class='cell_body_right_align'>From:
<strong> $pe2_from </strong> </td>
<td width='135' class='cell_body_right_align'>To:
<strong> $pe2_to </strong> </td>
<td colspan='4' class='cell_body_center_align'>Reason for Leaving:
<strong> $pe2_reason </strong> </td>
</tr>
<tr>
<td colspan='5' class='cell_body_center_align'>May we contact your previous supervisor for a reference? <strong> 

 $prev_employer2_can_we_contact </strong> </td>
 <td width='135' class='cell_body'>&nbsp;</td>
 </tr>

 <tr>
 <td colspan='2' class='cell_body_right_align'>Company:
 <strong> $pe3_company </strong> </td>
 <td colspan='2' class='cell_body_right_align'>Supervisor:
 <strong> $pe3_suporvisor </strong> </td>
 <td colspan='2' class='cell_body_right_align'>Phone #:
 <strong> $pe3_phone </strong> </td>
 </tr>
 <tr>
 <td colspan='4' class='cell_body_right_align'> Address:
 <strong> $pe3_address </strong> 
 <br />
 City:
 <strong> $pe3_city </strong> 
 State:
 <strong> $pe3_state </strong> 
 Zip:
 <strong> $pe3_zip </strong>     </td>
 <td width='135' class='cell_body_center_align'>Starting Salary:
 <strong> $pe3_starting </strong> </td>
 <td width='135' class='cell_body_center_align'>Ending Salary:
 <strong> $pe3_ending </strong> </td>
 </tr>
 <tr>
 <td colspan='6' class='cell_body_center_align'>Responsibilities:
 <strong> $pe3_responsibilities </strong> </td>
 </tr>
 <tr>
 <td width='135' class='cell_body_right_align'>From:
 <strong> $pe3_from </strong> </td>
 <td width='135' class='cell_body_right_align'>To:
 <strong> $pe3_to </strong> </td>
 <td colspan='4' class='cell_body_center_align'>Reason for Leaving:
 <strong> $pe3_reason </strong> </td>
 </tr>
 <tr>
<td colspan='5' class='cell_body_center_align'>May we contact your previous supervisor for a reference?<strong> $prev_employer3_can_we_contact </strong> </td>
<td width='135' class='cell_body'>&nbsp;</td>
</tr>

<tr>
<td colspan='6'>&nbsp;</td>
</tr>
<tr>
<td colspan='6' class='cell_title'>Military Service </td>
</tr>
<tr>
<td colspan='4' class='cell_body_left_align'>Branch: 
<strong> $military_branch </strong> </td>
<td width='135' class='cell_body_right_align'>From:
<strong> $military_from </strong> </td>
<td width='135' class='cell_body_right_align'>To:
<strong> $military_to </strong> </td>
</tr>
<tr>
<td colspan='3' class='cell_body_left_align'>Rank at Discharge: 
<strong> $rank </strong> </td>
<td colspan='3' class='cell_body_left_align'>Type of Discharge: 
<strong> $type_of_discharge </strong> </td>
</tr>
<tr>
<td colspan='6' class='cell_body_left_align'>If other than honorable, explain: 
<strong> $textfield6 </strong> </td>
</tr>
<tr>
<td colspan='6'>&nbsp;</td>
</tr>
<tr>
<td colspan='6' class='cell_title'>Questionaire</td>
</tr>
<tr>
<td colspan='4' class='cell_body_left_align'><em>Please answer each question to the best of your ability. </em></td>
<td width='135' class='cell_body'>&nbsp;</td>
<td width='135' class='cell_body'>&nbsp;</td>
</tr>
<tr>
<td colspan='6'><p class='cell_body_left_align'>Do you have any physical Condition that may limit your ability to perform the job for which you have applied?<br /><strong> $has_physical_condition </strong> 
    If yes, please explain: 
     <strong> $yes_physical_condition </strong> 
 /td>
 </tr>
 <tr>
 <td colspan='6' class='cell_body_left_align'>Does heat, standing on your feet, or lifting cause you any difficulties?<br /><strong> $standing </strong> 
 If yes, please explain:
<strong> $yes_standing </strong> </td>
</tr>
<tr>
<td colspan='6' class='cell_body_left_align'>My number one reason for seeking employment in a cleaning buisness  is:<br /> <strong> $reasond_for_seeking_employment </strong>  </td>
</tr>
<tr>
<td colspan='6' class='cell_body_left_align'>I am applying to Peterson Cleaning, Inc. because:<br /> <strong> $peterson_cleaning </strong>  </td>
</tr>
<tr>
<td colspan='6' class='cell_body_left_align'>My friends describe me as:<br /> <strong> $friends_describe_me_as  </strong>  </td>
</tr>
<tr>
<td colspan='6' class='cell_body_left_align'>My previous (or current) employer describes me as:<br />
<strong> $previous_employer_describes_me_as </strong> </td>
</tr>
<tr>
<td colspan='6' class='cell_body_left_align'>When considering dependability, thouroughness, or energy level I feel my strongest area is: <br />
<strong> $strongest_area </strong> </td>
</tr>
<tr>
<td colspan='6' class='cell_body_left_align'>When it comes to getting along with fellow employees I can always be counted on to: <br />
<strong> $fellow_employees </strong> </td>
</tr>
<tr>
<td width='135'>&nbsp;</td>
<td width='135'>&nbsp;</td>
<td width='135'>&nbsp;</td>
<td width='135'>&nbsp;</td>
<td width='135'>&nbsp;</td>
<td width='135'>&nbsp;</td>
</tr>
<tr>
<td colspan='6'>&nbsp;</td>
</tr>
<tr>
<td colspan='6' class='cell_title'>Disclaimer and Agreement </td>
</tr>
<tr class='cell_body_left_align'>
<td colspan='6'><p>I certify that my answers are true and complete to the best of my knowledge.</p>
<p>If this application leads to employment, I understand that false or misleading information in my application  or  interview may result in my release.</p></td>
</tr>
<tr>
<td colspan='6' class='cell_body_center_align'>&nbsp;</td>
</tr>
<tr>
<td width='135' class='cell_body_center_align'> <strong> $contact_previous_employers </strong> </td>
<td colspan='5' class='cell_body_left_align'>By checking the box to the left, I herby authorize and request any  present or former employer, school, police department, financial institution or other person having personal knowledge  about me, to furnish bearer (Peterson Cleaning, Inc.) with any and all information in their possession regarding me in  connection with an application for employment. A printout or photocopy of this authorization may be accepted with the  same authority as the original, and I specifically waive any written notice from any present or former employer who may  provide information based upon this authorized request. I understand this authorization is to be part of the submitted  application that I filled out. </td>
</tr>
<tr>
<td colspan='6' class='cell_body_center_align'>&nbsp;</td>
</tr>
<tr>
<td colspan='6' class='cell_body_center_align'>By pressing the submit button, you agree to the terms expressed  above.</td>
</tr>
<tr>
<td colspan='6' class='cell_body_center_align'>&nbsp;</td>
</tr>
<tr>
<td colspan='6' class='cell_body_center_align'>Submitted  <strong> $date </strong> </td>
</tr>
<tr>
<td width='135'>&nbsp;</td>
<td width='135'>&nbsp;</td>
<td width='135'>&nbsp;</td>
<td width='135'>&nbsp;</td>
<td width='135'>&nbsp;</td>
<td width='135'>&nbsp;</td>
</tr>
</table>";
$headers = "MIME-Version: 1.0\r\n";
$headers .= "Content-type: text/html; charset=iso-8859-1\r\n";
$headers .= "Content-Transfer-Encoding: 7bit\r\n";
$headers .= "From: Webpage@petersoncleaning.com\r\n";
mail($to, $subject, $message , $headers);
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:59:24.073

我怀疑您之前的配置使用了[寄存器全局变量](http://php.net/manual/en/security.globals.php)

有一个大红色框表示这在 5.4 中已弃用。这就是为什么您的邮件不再包含某人输入的变量的原因。

使用`register globals`，PHP 根据输入的值生成变量；而不是`$_REQUEST["myname"]`，您可以使用`$myname`.

由于它不再可用，您将不得不稍微编辑您的脚本。对于每个变量，您必须将其从 编辑`$variable`为`$_REQUEST["variable"]`。您有很多东西要编辑，看起来像 - 我建议您只编辑第一对并在您提交表单时查看它们是否已填充，以防万一它实际上是其他东西。

我肯定也会按照 woz 的建议去做，并聘请一名程序员。可能还有更多的东西会被破坏。

# google-maps - Google Maps API：在不更改叠加层不透明度的情况下更改基本地图的不透明度

> ID：12430416
> 
> 赞同：0
> 
> 时间：2012-09-14T18:58:50.713
> 
> 标签：google-maps, google-maps-api-3

是否可以在不更改地图顶部任何叠加层的不透明度的情况下更改基础地图的不透明度？

我正在使用 ImageMapType Overlay 设置地图，并且我希望为基础层和 ImageMapType Overlay 设置一个单独的不透明度滑块。ImageMapType 有一个`setOpacity(opacity:number)`方法，但我找不到 Map 图层的任何类似内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T18:27:15.103

虽然没有记录并且有点 hacky，但看起来包含所有基础图块的 DIV 紧随其后`google.maps.MapPanes.floatPane`

所以你只需要在继承 OverlayView 的对象上调用如下： `overlayViewObject.getPanes().floatPane.nextSibling.style.opacity = 0.5;`

# wpf - 从 WPF 按钮中的代码控制动画？

> ID：12430421
> 
> 赞同：1
> 
> 时间：2012-09-14T18:59:15.877
> 
> 标签：wpf, animation, button, code-behind

我的按钮具有以下 XAML 样式：

```
 <Style TargetType="{x:Type Button}">
    <Setter Property="VerticalContentAlignment" Value="Center" />
    <Setter Property="FontFamily" Value="Calibri" />
    <Setter Property="Foreground" Value="White" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
                <Border x:Name="BtnBorder" Width="{TemplateBinding ActualWidth}" Height="{TemplateBinding ActualHeight}" CornerRadius="5" VerticalAlignment="Center" BorderBrush="White" BorderThickness="0" ClipToBounds="True" HorizontalAlignment="Center">
                    <Grid Width="{Binding ElementName=BtnBorder, Path=ActualWidth}">        
                        <Rectangle Name="BtnRect" RadiusX="6" RadiusY="5" Opacity="0.2" Fill="White" />
                        <Rectangle x:Name="progressIndicator" Width="0" HorizontalAlignment="Left" RadiusX="8" RadiusY="8" Margin="1">
                            <Rectangle.Fill>
                                <LinearGradientBrush StartPoint="0,0.5" EndPoint="1,0.5">
                                    <GradientStop Color="Transparent" Offset="0" />
                                    <GradientStop Color="#88FFFFFF" Offset="0.945" />
                                    <GradientStop Color="White" Offset="1" />
                                </LinearGradientBrush>
                            </Rectangle.Fill>
                        </Rectangle>
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" x:Name="BtnCP" />
                      </Grid>
                </Border>
                <ControlTemplate.Triggers>
                    <EventTrigger RoutedEvent="Mouse.MouseEnter">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="BtnRect" Storyboard.TargetProperty="Opacity" From="0.25" To="0.5" Duration="0:0:0.2" />
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                    <EventTrigger RoutedEvent="Mouse.MouseLeave">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="BtnRect" Storyboard.TargetProperty="Opacity" From="0.5" To="0.25" Duration="0:0:0.5" />
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                    <Trigger Property="IsPressed" Value="True">
                        <Setter TargetName="BtnBorder" Property="BorderThickness" Value="1.3" />
                        <Trigger.EnterActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimation Storyboard.TargetName="progressIndicator" Storyboard.TargetProperty="Width" From="0" To="300" Duration="0:0:5" AutoReverse="True" RepeatBehavior="5x" />
                                </Storyboard>
                             </BeginStoryboard>
                        </Trigger.EnterActions>
                    </Trigger>
                    <Trigger Property="IsFocused" Value="True">
                        <Setter TargetName="BtnBorder" Property="BorderThickness" Value="1.5,0,1.5,0" />
                    </Trigger>
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="IsFocused" Value="True" />
                            <Condition Property="IsPressed" Value="True" />
                        </MultiTrigger.Conditions>
                        <Setter TargetName="BtnBorder" Property="BorderThickness" Value="1.3" />
                    </MultiTrigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

单击按钮后，如何通过后面的代码控制按钮的 Rectangle 属性的动画。名为“progressIndicator”的矩形是在用户单击按钮时通过动画来增加宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:16:28.610

当前动画在 Xaml 中启动。为什么要在代码隐藏中使用它？

# nsis - 使用 SQLEXPRWT_x86_ENU.exe 安装 SQL Server Express 2008 R2 后，SQL Server 无法创建数据库

> ID：12430422
> 
> 赞同：0
> 
> 时间：2012-09-14T18:59:20.687
> 
> 标签：nsis, sql-server-2008r2-express

我有一个 NSIS 安装脚本，它成功地在 Windows 7 上安装了 SQL Server Express 2008 R2 的实例，但是当我后来尝试从安装脚本创建数据库时，我收到一条错误消息，提示访问被拒绝。我的详细步骤如下。

我使用以下命令通过 NSIS 安装程序安装 SQL Server Express：

```
ExecWait 'SQLEXPRWT_x86_ENU.exe /Q /ACTION=Install /IACCEPTSQLSERVERLICENSETERMS /ROLE=AllFeatures_WithDefaults /SQLSVCACCOUNT="NT AUTHORITY\Network Service" /INSTANCENAME=SQLXXXX /SecurityMode=SQL /SAPWD="xxxxxx" /IndicateProgress' 
```

然后在我的 NSIS 安装程序中，我“尝试”使用以下内容创建数据库：

```
ExecWait 'sqlcmd -S "computerName\SQLXXXX" -i "$OUTDIR\ASPNETDB_Create.SQL" -o "$OUTDIR\ASPNETDB_Create_Log.txt"' 
```

脚本 ASPNETDB_Create.SQL 在其中的第一个命令处失败，如下所示：

```
CREATE DATABASE [aspnetdb] ON  PRIMARY 
( NAME = N'aspnetdb', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLXXXX\MSSQL\DATA\aspnetdb.mdf' , SIZE = 411392KB , MAXSIZE = UNLIMITED, FILEGROWTH = 1024KB ) 
LOG ON ( NAME = N'aspnetdb_log', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLXXXX\MSSQL\DATA\aspnetdb_log.ldf' , SIZE = 1024KB , MAXSIZE = 2048GB , FILEGROWTH = 10%)
GO 
```

我收到以下错误：

```
CREATE FILE encountered operating system error 5(Access is denied.) while attempting to open or create the physical file 'C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLXXXX\MSSQL\DATA\aspnetdb.mdf'. 
```

似乎问题在于文件夹“C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLXXXX\MSSQL\DATA”没有为用户“NT AUTHORITY\Network Service”设置任何权限。

如果不正确的访问权限确实是我的问题，如何在数据库所在的 DATA 目录上设置正确的权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:22:45.140

[您可以使用AccessControl 插件](http://nsis.sourceforge.net/AccessControl_plug-in)更改 ACL

# python - MAC地址到二进制位的转换

> ID：12430425
> 
> 赞同：2
> 
> 时间：2012-09-14T18:59:30.713
> 
> 标签：python, binary, mac-address, hex

我正在尝试转换一个mac地址，

```
mac = '00:de:34:ef:2e:f4' 
```

成二进制格式。我正在使用的程序是，

```
mac = '00:de:34:ef:2e:f4'
r = mac.replace(':', '').decode('hex')  
print r 
```

但是当我运行这个程序时，我得到一个奇怪的输出，输出是

美元

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-14T19:04:25.103

我认为您不想使用`decode`unicode 转换和其他您不想要的东西。做就是了：

```
n = int(mac.replace(':', ''), 16) 
```

这会将您的mac地址转换为数字。打印它`'%012x'%n`以获取十六进制。

**编辑：**

如果要转换为二进制，则只需执行`bin(n)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-25T14:34:05.723

如果你想获得一个mac地址：

```
":".join(textwrap.wrap("%012x" % (integer), width=2)) 
```

# sql-server - 随着租金的增长，子查询变得越来越慢

> ID：12430430
> 
> 赞同：0
> 
> 时间：2012-09-14T18:59:48.030
> 
> 标签：sql-server

我有一个子查询随着租金的增长而变得非常慢，我想知道是否有一种解决方案可以编写更快的子查询。NULL 未编入索引

```
SELECT ALBUMId, ALBUMTitle 
FROM ALBUM
WHERE ALBUMId IN(SELECT ALBUMId FROM RENTAL
WHERE RntalReturnedDate IS NULL); 
```

没有创建索引。你怎么认为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T19:05:21.990

```
SELECT a.ALBUMId, a.ALBUMTitle
    FROM ALBUM a
    WHERE EXISTS(SELECT 1
                     FROM RENTAL r
                     WHERE a.ALBUMId = r.ALBUMId
                         AND r.RntalReturnedDate IS NULL); 
```

# c# - 在 ViewModel 之间共享 Collection

> ID：12430434
> 
> 赞同：1
> 
> 时间：2012-09-14T19:00:02.897
> 
> 标签：c#, wpf, mvvm, mediator, data-sharing

我已经搜索过，没有任何东西可以帮助我到达我需要到达的地方。

我的问题描述：

1.  我们有一个包含多个视图（用户控件）的对话窗口。单击下一步和返回将在此对话框中前后移动，类似于向导。

2.  在 6 个对话框中，其中 4 个引用了相同的核心数据。例如我们会说一个 ObservableCollection

3.  在这种情况下，我有 4 个视图模型，它们都需要引用同一个 ObservableCollection。每次我进入“向导”对话框中的新步骤时，我都不想保存然后重新加载列表。

我的问题是实现这一目标的最佳/最实用的方法是什么。

我考虑过以下几点：

1.  静态类
2.  单身 - ehhhh
3.  在视图之间传递参数（尽管这很困难，因为 nextlocation 和 previouslocation 非常通用）。
4.  中介模式？我对中介者模式的问题是我不想在视图之间“交流”。我只希望所有视图共享相同的数据源。
5.  观察者模式？如果我使用 ObservableCollections 并实施 INotifyPropertyChanged，那么我应该不需要通知任何人更改吗？

请让我知道您可能需要帮助我解决此问题的其他信息，我很乐意提供。

我并不是真的在寻找代码示例，因为我是设计者。虽然如果代码示例可以帮助解释设计，我完全赞成。

最后，EventAggregator 不是一个选项，因为我没有使用任何框架（除非我没有正确理解 EventAggregator）。

提前致谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T05:54:19.290

就像 Randolf 说的那样，DI 会起作用。我使用 MEF 和使用 CreationPolicy 共享的构造函数注入来执行此操作。你只需要把你想为你处理的东西 4views 放在一个导出类中。那是多么容易:)

顺便说一句：中介者模式是视图模型而不是视图之间的“通信”。

```
[Export]
public class MyClassWichHasDataSharedFor4Views {}

public class Viewmodel1
{
   [ImportingContructor] 
   public Viewmodel1(MyClassWichHasDataSharedFor4Views shareddata)
   {}
}

public class Viewmodel2
{
   [ImportingContructor] 
   public Viewmodel2(MyClassWichHasDataSharedFor4Views shareddata)
   {}
}

public class Viewmodel3
{
   [ImportingContructor] 
   public Viewmodel3(MyClassWichHasDataSharedFor4Views shareddata)
   {}
}

public class Viewmodel4
{
   [ImportingContructor] 
   public Viewmodel4(MyClassWichHasDataSharedFor4Views shareddata)
   {}
} 
```

现在 4 个视图模型引用了您的核心数据

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T18:28:29.400

我知道自从提出这个问题以来已经有很长时间了，但是在为同样的问题苦苦挣扎之后， [RayBurns 的 Response here](https://stackoverflow.com/a/2430770/1751090)真的帮助我真正简单而轻松地意识到没有必要觉得你必须制作视图模型对于您的每个用户控件。我现在将一个视图模型用于一堆关于 a*演变的不同视图，`Collection`作为一系列相关信息，其状态都彼此相关*。

否则，如果您真的必须在视图模型之间共享数据，我绝对会像 @blindmeis 演示的那样将其作为构造函数的参数。

首先（对我而言！）如何设置和共享 DataContexts 的本质似乎在于 View 的代码隐藏。这是我放在那里的唯一东西，但它允许我在实体框架中共享 ObjectContexts，与一个视图-多个视图模型建立 Master-Details 关系等。

形成存储库“更高层”也很棒，但要小心，在数据到达目的地之前，您要多次复制/传输数据。

不管怎样，那是我的两分钱。希望能帮助到你。在经历了很多不适之后，我最终发现自己正在收敛。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-14T19:45:04.897

根据您对对话框的描述及其工作原理，我将拥有一个`ViewModel`控制整个“向导”的对话框。

这`DialogWizardViewModel`将包含：

*   `ObservableCollection<SomeModel> Data`
*   `ObservableCollection<ViewModelBase> DialogWizardViews`
*   `ViewModelBase SelectedView`
*   `ICommand NextCommand`
*   `ICommand BackCommand`

您`DialogView`将包含类似于`ContentControl`绑定到的内容`SelectedView`，并且您的`Next`/`Back`命令将简单地切换`SelectedView`到中的下一个或上一个视图`DialogWizardViews`

例如，

```
<DockPanel>
    <StackPanel DockPanel.Dock="Bottom" 
                Orientation="Horizontal" 
                HorizontalAlignment="Center">
        <Button Command="{Binding BackCommand}" Content="Back" />
        <Button Command="{Binding NextCommand}" Content="Next" />
    </StackPanel>

    <ContentControl Content="{Binding SelectedView}" />
</DockPanel> 
```

`Data`可以在您第一次创建时在您的子 ViewModel 中设置，或者根据您的喜好`DialogWizardViews`切换时。`SelectedView`

```
DialogWizardViews = new ObservableCollection<ViewModelBase>()
{
    new DialogViewModel1(Data),
    new DialogViewModel2(),
    new DialogViewModel3(Data),
    new DialogViewModel4(Data),
    new DialogViewModel5(Data),
    new DialogViewModel6()
};

SelectedView = DialogWizardViews.FirstOrDefault(); 
```

请记住，使用 MVVM，您`ViewModels` *就是*您的应用程序，而`Views`只是为用户提供一个用户友好的界面来与 ViewModel 进行交互。理想情况下，您应该能够从测试脚本或控制台应用程序之类的东西运行整个应用程序，而`View`根本不需要。

如果您需要传递一些东西，它应该由应用程序层次结构中的某个父对象处理，或者使用某种通信系统，例如 Prism`EventAggregator`或 MVVM Light 的`Messenger`。您不需要使用整个框架来使用这些对象 - 您只需挑选出您感兴趣的部分即可。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T19:04:26.110

在我看来，您的视图共享相同的*Model*，这应该是可观察的，并且您的 ViewModel 都应该以不同的方式表示 Model。

如果您的模型和视图模型实现了观察者模式，那似乎是最干净、“最正确”的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T19:03:09.113

一个简单的“依赖注入”应该可以工作。第二个视图模型的构造函数依赖于注入到他的构造函数中的共享数据参数，依此类推。

# java - 常量表达式在编译时评估.....？

> ID：12430441
> 
> 赞同：4
> 
> 时间：2012-09-14T19:00:19.470
> 
> 标签：java, string

> **可能重复：**
> [为什么 Java 常量除以零不会产生编译时错误？](https://stackoverflow.com/questions/4980360/why-doesnt-a-java-constant-divided-by-zero-produce-compile-time-error)

```
String s1="hi"+"Ram" 
```

是一个常量表达式并在编译时评估。但是常量除以零也是一个常量表达式并在运行时评估为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:05:39.560

如果编译器可以保持与运行时相同的语义，则可以在编译时计算一个常量值。如果不是（例如，除以零的情况），那么它将计算推迟到运行时间。有关更多信息，请阅读 JLS 15.28。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:05:23.913

您的字符串可以在不改变类工作的情况下进行优化。这就是为什么它可以在编译时进行评估的原因。

该表达式`1.0/0.0`不是错误，只要您不对其进行评估，但不能在编译时对其进行评估，因为这会改变含义（它会从完全有效的错误（只要不是评估）表达式。我同意智能编译器可以阻止你这样做，但规范必须允许它。

# c# - MVC 控制器不会创建记录

> ID：12430446
> 
> 赞同：0
> 
> 时间：2012-09-14T19:00:45.463
> 
> 标签：c#, asp.net-mvc

当我尝试使用 Create 操作创建新记录时，它失败但没有错误，只是不存在。我不确定为什么它不是或为什么没有错误。我正在使用搜索操作来填充创建操作中的一些字段，然后填写其余信息。

```
[HttpPost]
    public ActionResult Create(Incident incident)
    {
        if (ModelState.IsValid)
        {
            db.Incidents.AddObject(incident);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        ViewBag.IncidentCreatedBy = new SelectList(db.Creators, "CreatorID", "CreatorName", incident.IncidentCreatedBy);
        ViewBag.ErrorType = new SelectList(db.Errors, "ErrorID", "ErrorDescription", incident.ErrorType);
        ViewBag.IncidentID = new SelectList(db.IncidentItems, "IncidentID", "IncidentItem1", incident.IncidentID);
        ViewBag.IncidentReasonID = new SelectList(db.IncidentReasons, "IncidentReasonID", "ReasonDescription", incident.IncidentReasonID);
        ViewBag.IncidentResolutionID = new SelectList(db.IncidentResolutions, "IncidentResolutionID", "ResolutionDescription", incident.IncidentResolutionID);
        ViewBag.InventoryStatus = new SelectList(db.InventoryStatus, "InvStatusID", "InvStatusValue", incident.InventoryStatus);
        ViewBag.ShipperID = new SelectList(db.ShipperIDs, "ShipperID1", "ShipperName", incident.ShipperID);
        return View(incident);
    }

public ActionResult Search(string searchString)
    {
        Incident i = new Incident();

        if (!String.IsNullOrEmpty(searchString))
        {
            Tracking result = db1.Trackings.FirstOrDefault(r => r.OrderNum == searchString);
            if (result == null)
            {
                return View();
            }
            else
            {
                i.Email = result.Email;
                i.OriginalShipDate = result.ShipDate;
                i.Name = result.Name;
                i.OrderID = result.OrderNum;
                i.IncidentReasonID = 1;

                ViewBag.IncidentCreatedBy = new SelectList(db.Creators, "CreatorID", "CreatorName", i.IncidentCreatedBy);
                ViewBag.ErrorType = new SelectList(db.Errors, "ErrorID", "ErrorDescription", i.ErrorType);
                ViewBag.IncidentID = new SelectList(db.IncidentItems, "IncidentID", "IncidentItem1", i.IncidentID);
                ViewBag.IncidentReasonID = new SelectList(db.IncidentReasons, "IncidentReasonID", "ReasonDescription", i.IncidentReasonID);
                ViewBag.IncidentResolutionID = new SelectList(db.IncidentResolutions, "IncidentResolutionID", "ResolutionDescription", i.IncidentResolutionID);
                ViewBag.InventoryStatus = new SelectList(db.InventoryStatus, "InvStatusID", "InvStatusValue", i.InventoryStatus);
                ViewBag.ShipperID = new SelectList(db.ShipperIDs, "ShipperID1", "ShipperName", i.ShipperID);

                return PartialView("~/Views/Home/Create.cshtml", i);
            }
        }
        else { return View(); }

    }

//search view
<div>
@Html.ActionLink("Back to List", "Index")
</div>
@using (Html.BeginForm("Search", "Home", FormMethod.Post)){    
     <p> Order #: @Html.TextBox("SearchString") <br />   
     <input type="submit" value="Filter" /></p> 
    } 
@if(IsPost){}

--create view
@model RMA_MAID_EASY.Models.Incident

@{
ViewBag.Title = "Create";
}
<script type="text/javascript" ></script>
<script>
$(function () {
    $("#datepicker").datepicker();
});    
</script>

<h2>Create</h2>

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
<legend>Incidents</legend>
<table>

    @*<tbody>*@
        <tr>
            <td><div class="editor-label">@Html.LabelFor(model => model.OrderID)</div>      <div class="editor-field">@Html.EditorFor(model => model.OrderID)@Html.ValidationMessageFor(model => model.OrderID)</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.Email)</div><div class="editor-field">@Html.EditorFor(model => model.Email)@Html.ValidationMessageFor(model => model.Email)</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.Name)</div><div class="editor-field">@Html.EditorFor(model => model.Name)@Html.ValidationMessageFor(model => model.Name)</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.OriginalShipDate)</div><div class="editor-field">@Html.EditorFor(model => model.OriginalShipDate)@Html.ValidationMessageFor(model => model.OriginalShipDate)</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.IncidentReasonID, "IncidentReason")</div><div class="editor-field">@Html.DropDownList("IncidentReasonID", String.Empty)@Html.ValidationMessageFor(model => model.IncidentReasonID)</div></td>

        </tr>
        <tr>
            <td><div class="editor-label">@Html.LabelFor(model => model.IncidentResolutionID, "IncidentResolution")</div><div class="editor-field">@Html.DropDownList("IncidentResolutionID", String.Empty)@Html.ValidationMessageFor(model => model.IncidentResolutionID)</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.Notes)</div><div class="editor-field">@Html.EditorFor(model => model.Notes)@Html.ValidationMessageFor(model => model.Notes)</div></td>
            @*<td><div class="editor-label">@Html.LabelFor(model => model.ReturnTagRequired)</div><div class="editor-field">@Html.EditorFor(model => model.ReturnTagRequired)@Html.ValidationMessageFor(model => model.ReturnTagRequired)</div></td>*@
            <td><div class="editor-label">@Html.LabelFor(model => model.ReturnTagRequired)</div><div class="editor-field">@Html.DropDownListFor(x => x.RefundRequired, new SelectList(new Dictionary<string, string> { {"Y", "Yes"}, {"N", "No"} },"key", "value", Model.RefundRequired))</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.DateRetTagGenerated)</div><div class="editor-field">@Html.TextBoxFor(model => model.DateRetTagGenerated, new { id = "datepicker", type = "text" })@Html.ValidationMessageFor(model => model.DateRetTagGenerated)</div></td>
            @*<td><div class="editor-label">@Html.LabelFor(model => model.RefundRequired)</div><div class="editor-field">@Html.EditorFor(model => model.RefundRequired)@Html.ValidationMessageFor(model => model.RefundRequired)</div></td>*@

            <td><div class="editor-label">@Html.LabelFor(model => model.RefundRequired)</div><div class="editor-field">@Html.DropDownListFor(x => x.RefundRequired, new SelectList(new Dictionary<string, string> { {"Y", "Yes"}, {"N", "No"} },"key", "value", Model.RefundRequired)) </div></td>
        </tr>
        <tr bgcolor ="#D3D3D3">

            <td><div class="editor-label">@Html.LabelFor(model => model.RefundAmount)</div><div class="editor-field">@Html.EditorFor(model => model.RefundAmount)@Html.ValidationMessageFor(model => model.RefundAmount)</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.DateRefundIssued)</div><div class="editor-field">@Html.EditorFor(model => model.DateRefundIssued)@Html.ValidationMessageFor(model => model.DateRefundIssued)</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.ShipperID, "ShipperID1")</div><div class="editor-field">@Html.DropDownList("ShipperID", String.Empty)@Html.ValidationMessageFor(model => model.ShipperID)</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.InventoryItem)</div><div class="editor-field">@Html.EditorFor(model => model.InventoryItem)@Html.ValidationMessageFor(model => model.InventoryItem)</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.InventoryQuantity)</div><div class="editor-field">@Html.EditorFor(model => model.InventoryQuantity)@Html.ValidationMessageFor(model => model.InventoryQuantity)</div></td>
        </tr>
        <tr>

            <td><div class="editor-label">@Html.LabelFor(model => model.eBayCredit)</div><div class="editor-field">@Html.EditorFor(model => model.eBayCredit)@Html.ValidationMessageFor(model => model.eBayCredit)</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.eBayCreditFileDate)</div><div class="editor-field">@Html.EditorFor(model => model.eBayCreditFileDate)@Html.ValidationMessageFor(model => model.eBayCreditFileDate)</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.LostValue)</div><div class="editor-field">@Html.EditorFor(model => model.LostValue)@Html.ValidationMessageFor(model => model.LostValue)</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.IncidentCreatedBy, "Creator")</div><div class="editor-field">@Html.DropDownList("IncidentCreatedBy", String.Empty)@Html.ValidationMessageFor(model => model.IncidentCreatedBy)</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.IncidentReturnDate)</div><div class="editor-field">@Html.EditorFor(model => model.IncidentReturnDate)@Html.ValidationMessageFor(model => model.IncidentReturnDate)</div></td>
        </tr>

        <tr bgcolor ="#D3D3D3">
            <td><div class="editor-label">@Html.LabelFor(model => model.IncidentResolved)</div><div class="editor-field">@Html.EditorFor(model => model.IncidentResolved)@Html.ValidationMessageFor(model => model.IncidentResolved)</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.IncidentReceived)</div><div class="editor-field">@Html.EditorFor(model => model.IncidentReceived)@Html.ValidationMessageFor(model => model.IncidentReceived)</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.ShippingCost)</div><div class="editor-field">@Html.EditorFor(model => model.ShippingCost)@Html.ValidationMessageFor(model => model.ShippingCost)</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.IncidentCreatedDate)</div><div class="editor-field">@Html.EditorFor(model => model.IncidentCreatedDate)@Html.ValidationMessageFor(model => model.IncidentCreatedDate)</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.RMANumber)</div><div class="editor-field">@Html.EditorFor(model => model.RMANumber)@Html.ValidationMessageFor(model => model.RMANumber)</div></td>

        </tr>

        <tr>                
            <td><div class="editor-label">@Html.LabelFor(model => model.RMARequested)</div><div class="editor-field">@Html.EditorFor(model => model.RMARequested)@Html.ValidationMessageFor(model => model.RMARequested)</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.RestockOption)</div><div class="editor-field">@Html.EditorFor(model => model.RestockOption)@Html.ValidationMessageFor(model => model.RestockOption)</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.ReceivedNotes)</div><div class="editor-field">@Html.EditorFor(model => model.ReceivedNotes)@Html.ValidationMessageFor(model => model.ReceivedNotes)</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.InventoryStatus, "InventoryStatu")</div><div class="editor-field">@Html.DropDownList("InventoryStatus", String.Empty)@Html.ValidationMessageFor(model => model.InventoryStatus)</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.ErrorType, "Error")</div><div class="editor-field">@Html.DropDownList("ErrorType", String.Empty)@Html.ValidationMessageFor(model => model.ErrorType)</div></td>

        </tr>

        <tr bgcolor ="#D3D3D3">
            <td><div class="editor-label">@Html.LabelFor(model => model.ReplacementOption)</div><div class="editor-field">@Html.EditorFor(model => model.ReplacementOption)@Html.ValidationMessageFor(model => model.ReplacementOption)</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.Replacement)</div><div class="editor-field">@Html.EditorFor(model => model.Replacement)@Html.ValidationMessageFor(model => model.Replacement)</div></td>
            <td><div class="editor-label">@Html.LabelFor(model => model.OurShippingCost)</div><div class="editor-field">@Html.EditorFor(model => model.OurShippingCost)@Html.ValidationMessageFor(model => model.OurShippingCost)</div>

        </tr>

    @*</tbody>
*@</table>
<p>
                <input type="submit" value="Create" />
                 @Html.ActionLink("Back to List", "Index")
            </p>

</fieldset> 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:18:31.127

很难说...您可以做的几件事： - 使用萤火虫查看哪些参数被发布回您的操作 - 在您的创建操作周围设置一些断点，以查看是否正在处理正确的对象/值。

# php - php类错误处理

> ID：12430448
> 
> 赞同：0
> 
> 时间：2012-09-14T19:00:52.933
> 
> 标签：php

```
class Foo {
    private $_bar;

    public function getBar() {
        return $this->_bar;
    }
}
$b = new Foo(); 
$b->xxx(); //xxx is an udefined method. 
```

如果调用未定义的方法，如何增强以下类以引发通知？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T19:03:09.887

您必须定义一个 __call( $methodName , $args ) 方法。

并从那里抛出你自己的异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T19:04:28.210

```
class Foo {
    private $_bar;

    public function getBar() {
        return $this->_bar;
    }

    public function __call($name, $params)
    {
       throw new Exception("Method $name does not exists!");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T19:01:57.250

当您调用未定义的函数时，会像其他任何时候一样抛出 PHP 警告。您需要使用`error_reporting(E_ALL);`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T19:04:12.010

在 Foo 类中编写 __call

```
function __call( $functionName, $argumentsArray ) {
      echo "Function $functionName does not exist";
    } 
```

[参考](http://www.php.net/manual/en/language.oop5.overloading.php#object.call)

# xcode - 允许沙盒应用的 HID 控制

> ID：12430449
> 
> 赞同：4
> 
> 时间：2012-09-14T19:00:55.497
> 
> 标签：xcode, sandbox

我们正在尝试将我们的应用程序沙箱化以将其提交到 Mac App Store（这是第一次）。它很难使用较低级别的 Carbon API，不能以其他方式操作。

当我启用沙盒时，一些功能停止工作，我在日志中看到这条消息：

```
9/14/12 10:51:58.863 PM sandboxd[41243]: ([41237]) MouseRecorder(41237) deny hid-control 
```

是否有任何我可以使用的隐藏权利，或者我们在 App Store 中没有机会使用这个应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T07:24:27.397

编辑：查看新接受的答案

只是为了回答我自己的问题——这是不可能的，没有解决方法，而且将来不太可能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-22T00:10:42.953

即使我晚了几年，我想我可以帮助其他人寻找同样的东西。我花了好几天才想知道为什么我无法连接到键盘。今天，沙盒的想法让我想到了，我终于允许我的应用程序访问。

[如此处](https://developer.apple.com/library/content/documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/EnablingAppSandbox.html)所述，我将以下内容添加到`.entitlements`文件中，并获得了访问权限。

```
<key>com.apple.security.device.usb</key>
<true/> 
```

具体来说，而不是误导：

> 我不使用碳；我使用 IOKit.hid 和 Swift。

# api - 从外部来源为 Spotify 中的歌曲加注星标？

> ID：12430452
> 
> 赞同：2
> 
> 时间：2012-09-14T19:01:12.117
> 
> 标签：api, spotify, cocoalibspotify-2.0

我正在寻找一种在 Spotify 中为歌曲加注星标的方法，而无需访问应用程序本身。

例如：我正在全屏玩游戏，或者我正在做某事而 Spotify 正在播放音乐。我听到一首很棒的歌，我想给它加星。

现在，我不想使用应用程序，而是想使用快捷方式或专用的外部按钮为歌曲加注星标。

无论是快捷方式，USB按钮，还是遥控器上的按钮，我相信这个功能都会非常有用。我搜索了 Spotify 核心 API，但找不到任何可以让我“为”歌曲“加注星标”的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:52:11.343

既然你在这个问题中标记了 CocoaLibSpotify，那么 CocoaLibSpotify 就内置了这个功能——`SPTrack`对象有这个`starred`属性。编写一个小应用程序相当简单，当触发时，它使用 Spotify 客户端的 AppleScript 桥接器获取当前播放的曲目并使用 CocoaLibSpotify 为其加注星标。

或者，Apps API 也可以为轨道加注星标（`Track`对象具有`starred`属性）。您可以使用该`player`对象获取当前曲目并为其加注星标。但是，将其链接到外部按钮会很棘手。一种（hacky）方法是让按钮触发系统 URL 启动，`spotify:app:star-this-track:invocation:1`每次按下按钮时，最后的数字都会增加。然后，应用程序的`ARGUMENTSCHANGED`事件将触发，此时您可以为轨道加注星标。

# jquery - 循环遍历动态添加的元素数组

> ID：12430456
> 
> 赞同：5
> 
> 时间：2012-09-14T19:01:25.953
> 
> 标签：jquery

jQuery 新手，请求帮助解决我无法弄清楚的问题。

克隆的表行包含一个`<input type="text" name="dt[]" id="dt1">`字段。下面是被克隆的模板行。

```
<table id="MyTable" name="MyTable">
    <tr name="tr3" id="tr3">
        <td>
            <input type="text" name="dt[]" id="dt1">
        </td>
        <td>
            <input type="file" name="fff[]" id="ff1">
        </td>
    </tr>
</table> 
```

用户可能会创建其中的几个字段，我试图弄清楚如何遍历它们并在提交表单之前验证它们中是否有文本。

请注意，我必须使用 jQuery .on() 方法来访问表单元素。循环需要如何编码？最初，我一直在尝试这个（已编辑）：

```
$(document).on('click','#sub1',function() {
    var d1 = $("[name^=dt]").val();
    alert(d1);
    if (d1 !=""){
        $("#TheForm").submit();
    } else {
        alert("Empty fields!");
    }
}); 
```

还有这个：

```
var d1 = $("#dt1").val();
alert(d1); 
```

还有这个：

```
var d1 = $("#^dt").val();
alert(d1); 
```

但一直无法获取数据。

* * *

编辑：根据要求，此代码克隆该行：

```
$(document).on('click', '#add_row', function() {
    $("table#MyTable tr:nth-child(4)")
        .clone()
        .show()
        .find("input, span").each(function() {
            $(this)
                .val('')
                .attr('id', function(_, id) {
                    var newcnt = id + count;
                    return id + count;
                    });
        })
        .end()
        .appendTo("table")
        ;

    count++;
    if (count == 2) {
        $('#add_row').prop('disabled', 'disabled');
    }
}); //end add_row Function 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-14T19:03:14.770

您的 HTML 格式不正确。你应该做：

```
<input type="text" name="dt[]"> 
```

然后像这样循环：

```
$('input[name^=dt]').each(function() {
  // code
  alert( this.value ); // $(this).val()
}); 
```

您尝试做的事情不能用属性来实现`id`，但可以用`name`属性来实现。***`id`应该永远是独一无二的***。

* * *

### 除此之外

您可以对所有 s 使用通用`class`名称，`input`然后像这样循环：

```
$('input.common_cls').each(function() {
  // code
}); 
```

* * *

### 笔记

`"#^dt"`根本不是一个有效的选择器。正确的语法是

`'input[name^=dt]'`

***或者***

`input[id^=dt]`.

* * *

### 您可以执行如下验证

```
// this function will return true if no empty
// input exists, otherwise it will return false

function noEmptyExists() {
    return $('input[name^=dt]').filter(function() {
        return !$.trim( this.value );
    }).length === 0;
}

$(document).on('click','#sub1',function() {
   if( noEmptyExists() ) {
      alert('Success');
   } else {
      alert('Failed');
   }
}); 
```

***[工作样本](http://jsfiddle.net/zZD9a/2/)***

* * *

### 根据进度更新

`this.val()`是错的。

将此行更改为：

```
$(this).val() 
```

* * *

### 在 Chat 中讨论并解决克隆问题后

***完整代码***

```
$(document).ready(function() {
    var count = 1;
    alert('doc ready');
    var row = $("table#MyTable tr:eq(1)");
    $(document).on('click', '#sub1', function() {
        if (noEmptyExists()) {
            alert('Success');
        } else {
            alert('Failed');
        }
    });

    $(document).on('click', '#add_row', function() {
        row.clone(true).find("input").each(function() {
            $(this).val('').attr('id', function(_, id) {
                var newcnt = id + count;
                return id + count;
            });
        }).end().appendTo("table");
    });

});

function noEmptyExists() {
    return $('input[name^=dt]').filter(function() {
        return !$.trim(this.value);
    }).length === 0;
} 
```

***[工作样本](http://jsfiddle.net/BGy4M/11/)***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T22:54:02.760

对于任何想知道的人，这是最终代码。`thecodeparadox`仅因为 HTML 是由 ajax 生成的，所以对 's post进行了轻微修改，这导致了一些细微的差异。正是出于这个原因，我添加了这篇文章，以防其他人正在为同样的问题而苦苦挣扎。不太可能，但是，嘿。

按下提交按钮时 ( `<INPUT type="button">`)

```
$(document).on('click', '#sub1', function() {
    var fcnt = 0; //input-FILE
    var dcnt = 0; //input-DOCTITLE
    $('input[name^=fff]').each(function() {
        if($(this).val() == ''){fcnt=fcnt + 1;}
    });
    $('input[name^=dt]').each(function() {
        if($(this).val() == ''){dcnt=dcnt + 1;}
    });
    if (dcnt > 1) {
        alert('Fields marked with an asterisk cannot be empty');
    } else if (fcnt > 1) {
        alert('One of the files is still empty');
    }else{
        $("#TheForm").submit();
    }
}); 
```

* * *

克隆表行的代码。这是重要的区别，因为我现在明白（感谢 tcp）有必要将行元素分配给 var，然后在 .clone() 方法中使用 var。

```
$(document).on('click', '#add_row', function() {
    var row = $("table#MyTable tr:eq(3)");
    row.clone(true).find("input").each(function() {
        $(this).val('').attr('id', function(_, id) {
            var newcnt = id + count;
            return id + count;
        });
    }).end().show().appendTo("table");
}); //end add_row Function 
```

# javascript - 骨干属于_to has_many

> ID：12430457
> 
> 赞同：1
> 
> 时间：2012-09-14T19:01:26.923
> 
> 标签：javascript, backbone.js, ruby-on-rails-3.2, backbone-relational

长期 Rails 开发人员，骨干菜鸟。

在我的 Rails 模型中，一个项目有很多任务，一个任务属于一个项目。标准的东西。

试图在集合中获取项目的任务 json。

```
ExampleApp.Collections.Tasks = Backbone.Collection.extend({
  url: '/projects/<dynamic_id>/tasks',
  model: ExampleApp.Models.Task
}); 
```

到目前为止，我看到的每个示例都将 url 引用为 /tasks。我想将项目 ID 传递给集合以获取该项目任务。

我检查了[Backbone Relational](https://github.com/PaulUithol/Backbone-relational)但不确定最好的解决方案是什么。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T00:08:44.720

我强烈建议使用 Backbone-Relational 而不是自己破解关系。从个人经验来看使用 Backbone-Relational 的原因：

*   创建前向和后向关系，因此您可以获得与项目相关的所有任务，或任务所属的项目
*   易于序列化和自动反序列化。也就是说，您给它一个 JSON，它会构建所有模型及其关系。非常便利。
*   您的模型保持独立定义，并且可以使用标准的 Backbone 东西来保存/获取，而无需任何额外的工作。
*   它还可以很好地与各种 Backbone 扩展（例如[Marionette](https://github.com/marionettejs/backbone.marionette)和[ioBind/ioSync ）配合使用](https://github.com/logicalparadox/backbone.iobind)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T22:45:03.623

一种方法是将*url*定义为一个函数并在 fetch() 之前设置你的 project_id

```
ExampleApp.Collections.Tasks = Backbone.Collection.extend({
    model: ExampleApp.Models.Task

    url: function() {
        return 'projects/'+this.project_id+'/tasks';
    },

    setProjectId(project_id) {
        this.project_id = project_id;
        this.fetch();
    }
}); 
```

# python - 无效索引：Python - matplotlib pyplot

> ID：12430458
> 
> 赞同：0
> 
> 时间：2012-09-14T19:01:27.717
> 
> 标签：python, matplotlib

对于以下代码：

```
G = [
  [8.29187396e-04,4.98341625e-01,8.29187396e-04,4.98341625e-01,8.29187396e-04,8.29187396e-04],
  [4.99168745e-01,4.15627598e-04,2.49792186e-01,4.15627598e-04,2.49792186e-01,4.15627598e-04],
  [1.66666667e-01,1.66666667e-01,1.66666667e-01,1.66666667e-01,1.66666667e-01,1.66666667e-01],
  [6.65005537e-01,3.32779623e-01,5.53709856e-04,5.53709856e-04,5.53709856e-04,5.53709856e-04],
  [1.66666667e-01,1.66666667e-01,1.66666667e-01,1.66666667e-01,1.66666667e-01,1.66666667e-01],
  [1.65016502e-03,1.65016502e-03,1.65016502e-03,1.65016502e-03,9.91749175e-01,1.65016502e-03],
]

fnames = ['angelinajolie.html', 'bradpitt.html', 'jenniferaniston.html', 
  'jonvoight.html', 'martinscorcese.html', 'robertdeniro.html']

NX = len(fnames)
PI = random(NX)
PI /= sum(PI)

import matplotlib.pyplot as plt
evolution = [numpy.dot (PI, G**i) for i in xrange(1,20)]       

plt.figure()
for i in xrange(NX):
    plt.plot([step[0,i] for step in evolution], label=fnames[i], lw=2 )
    # ^ this line
#plt.draw

    IndexError: invalid index 
```

我收到这个错误。我正在学习 Python，但我对该语言不是很熟悉。谷歌搜索这个错误没有给出任何具体的解决方案。想知道是否有人可以提供帮助。

谢谢

* * *

编辑：

我尝试了以下代码

```
import matplotlib.pyplot as plt
evolution = [numpy.dot (PI, G**i) for i in xrange(1,20)]
print 'xrange'
print xrange(1,20)
print ''
print 'evolution = '
print evolution
print ''

for i in xrange (NX):
print (step[0,i] for step in evolution) 
```

并得到了这个输出：

```
xrange
xrange(1, 20)

 evolution = 
 [array([ 0.32804667,  0.21757686,  0.12538595,  0.15799482,  0.12910639,
     0.04188931]), array([ 0.16964679,  0.08472597,  0.02780032,  0.06486529,  0.0314962  ,
     0.00690881]), array([ 0.09553784,  0.03664288,  0.00636997,  0.03003363,   0.01003537,
     0.00115142]), array([ 0.05605324,  0.01678453,  0.00149546,  0.01458511,   0.00513061,
      0.0001919 ]), array([  3.37327444e-02,   7.93664097e-03,   3.57601326e-04,
       7.20471786e-03,   3.96276140e-03,   3.19838999e-05]), array([  2.06957198e-02,      3.82337165e-03,   8.66673387e-05,
       3.57980255e-03,   3.66208187e-03,   5.33064999e-06]), array([  1.29011406e-02,     1.86325141e-03,   2.12057110e-05,
       1.78219658e-03,   3.56712012e-03,   8.88441665e-07]), array([  8.15011563e-03,     9.14821461e-04,   5.22316873e-06,
       8.87848064e-04,   3.52188086e-03,   1.48073611e-07]), array([  5.20576887e-03,     4.51378732e-04,   1.29239804e-06,
       4.42402535e-04,   3.48893476e-03,   2.46789351e-08]), array([  3.35501606e-03,     2.23446508e-04,   3.20779482e-07,
       2.20459413e-04,   3.45918721e-03,   4.11315586e-09]), array([  2.17777263e-03,     1.10856782e-04,   7.97863000e-08,
       1.09862738e-04,   3.43040772e-03,   6.85525976e-10]), array([  1.42161006e-03,     5.50797457e-05,   1.98730096e-08,
       5.47489480e-05,   3.40204477e-03,   1.14254329e-10]), array([  9.32090403e-04,     2.73937246e-05,   4.95462506e-09,
       2.72836418e-05,   3.37396034e-03,   1.90423882e-11]), array([  6.13212265e-04,    1.36332014e-05,   1.23604372e-09,
      1.35965681e-05,   3.34611871e-03,   3.17373137e-12]), array([  4.04478562e-04,    6.78792560e-06,   3.08490244e-10,
      6.77573479e-06,   3.31850955e-03,   5.28955228e-13]), array([  2.67327741e-04,    3.38068736e-06,   7.70144829e-11,
      3.37663051e-06,   3.29112888e-03,   8.81592047e-14]), array([  1.76949431e-04,    1.68406555e-06,   1.92302878e-11,
      1.68271551e-06,   3.26397429e-03,   1.46932008e-14]), array([  1.17260538e-04,    8.39016441e-07,   4.80235424e-12,
      8.38567176e-07,   3.23704380e-03,   2.44886680e-15]), array([  7.77733433e-05,    4.18042435e-07,   1.19938700e-12,
      4.17892928e-07,   3.21033551e-03,   4.08144466e-16])]

     xrange(NX) = 
     xrange(6)
     <generator object <genexpr> at 0x10c1b9f50>
     <generator object <genexpr> at 0x10c1b9f50>
     <generator object <genexpr> at 0x10c1b9f50>
     <generator object <genexpr> at 0x10c1b9f50>
     <generator object <genexpr> at 0x10c1b9f50>
     <generator object <genexpr> at 0x10c1b9f50> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:09:05.037

的值对于任何一个或`i`来说都太大了。`step[0, i]``fnames[i]`

换句话说， 的当前值`i`不是这些结构之一的有效索引。请注意，它`i`可以是 0 和 之间的任何值`NX - 1`。

您可以先尝试打印出这些`step`值，很可能它们不包含您期望它们包含的内容。

# c - 如何在 if 语句中使用 fork()

> ID：12430461
> 
> 赞同：3
> 
> 时间：2012-09-14T19:01:44.830
> 
> 标签：c, fork

有人可以向我解释是什么`fork() != 0`意思吗？据我了解，我认为这意味着如果 fork 不是假的？或者如果 fork 是真的，那么......我不明白 Fork() 如何是真或假，因为它只是将一个进程的副本创建到父子进程中。另外如果一个程序在哪里说`if (Fork() == 0)`，那是什么意思？

```
 #include "csapp.h"

 int main(void)
 {
     int x = 3;

     if (Fork() != 0)
         printf("x=%d\n", ++x);

     printf("x=%d\n", --x);
     exit(0);
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T19:03:28.453

`fork()`如果失败则返回 -1，如果成功，则在父节点中返回分叉子节点的 pid，在子节点中返回 0。所以`if (fork() != 0)`测试它是否是父进程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T19:05:35.737

从[人叉](http://linux.die.net/man/2/fork)

> 返回值
> 
> 成功时，父进程返回子进程的PID，子进程返回0。失败时，在父进程中返回 -1，不创建子进程，并适当设置 errno。

假设成功，`fork`返回*两次*：一次在父项中，一次在子项中。

* * *

好的，我对 OP 造成了伤害：我不知道`csapp.h`从哪里来，但如果是[这个](http://www.ece.cmu.edu/~ece845/sp02/csapp.h)，那么它对你没有任何好处。我猜它是 POSIX 上的一个薄包装器（例如 around `fork()`），但也许也适用于其他平台？

因为你之前提到`fork()`过`Fork()`，我认为后者是一个错字，而它实际上是一个库函数。

如果您一直在`fork()`直接使用，那么期望您查看联机帮助页是合理的。由于您使用的`Fork()`是某个库提供的功能，因此该库确实应该记录它，但似乎没有。

* * *

标准（非*csapp*）用法是：

```
pid_t child = fork();
if (child == -1) {
    printf("fork failed - %d - %s\n", errno, strerror(errno));
    exit(-1);
}
if (child) {
    printf("I have a child with pid %d, so I must be the parent!\n", child);
} else {
    printf("I don't have a child ... so I must be the child!\n")
}
exit(0); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-14T19:36:45.857

让我们尝试不同的解释......当函数启动时有1个进程，这个进程有一个int x = 3

一旦你点击了这行代码：

```
if (fork() != 0) 
```

现在，假设 fork() 工作，我们有两个进程。它们都具有相同的执行空间，它们都将运行相同的代码（在一定程度上），但孩子将获得自己的副本`x`来玩。

fork() 将返回一个 0 给子进程，所以从子进程的角度来看，函数的其余部分是这样的：

```
printf(("x=%d\n", --x);
exit(0); 
```

另一方面，父进程将从 fork() 命令返回一个有效值，因此它将执行：

```
printf("x=%d\n", ++x);
printf("x=%d\n", --x);
exit(0); 
```

此时的输出将是任何人的猜测......[您无法判断父母或孩子是否会先运行](https://stackoverflow.com/questions/6696959/can-the-order-of-execution-of-fork-be-determined)

但是，如果我们假设父级点击`++x`是下一个操作，那么输出是：

```
x=4
x=3
x=2 
```

因为父母和孩子都会击中`--x`. （父母的x在++x之后是4，最后是3。孩子的x是3，最后是2）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-14T19:04:21.593

来自 fork() 手册：

```
Upon successful completion, fork() returns a value of 0 to the child process and returns the process ID of the child process to the parent
     process.  Otherwise, a value of -1 is returned to the parent process, no child process is created, and the global variable errno is set to indi-
     cate the error. 
```

代码执行后，您有两个执行线程。在 if 语句中，您有父进程的线程，在 else 语句中，您有子进程的线程。

```
if ( fork() ) { 
    printf("I am the parent!\n"); 
} else {
    printf("I am the child\n");
} 
```

编辑

为澄清起见：fork 启动一个进程，该进程具有线程、内存并可能具有其他资源。我尝试（似乎没有成功）通过添加“线程”一词来强调执行流程。但是，决不能说“父进程”与“父进程的线程”中的“线程”有关。

当然，我的答案可以改进，但我认为这里已经有足够好的答案了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T19:04:11.180

Fork 将子进程返回 0，将子进程的进程 id 返回给父进程。因此通常代码有 if(fork){ }else 代码。这意味着 if 中的代码将仅在父级中执行。

更好的处理方法是

```
 pid = fork()
 if(pid){
  // I am parent. Let us do something that only the parent has to do
 }else{
 // I am child. Let us do something only the child has to do
 }
 // This code is common to both 
```

子 pid 可能有助于稍后等待或与父 pid 分离。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-14T19:37:10.390

我建议用`if`a替换，`switch`因为有 3 种可能的结果：

```
#include <sys/types.h>
#include <unistd.h>

pid_t pid;

switch ((pid = fork ())) {
case -1: /* error creating child. */
  break;
case 0:  /* I am the child process. */
  break;
default: /* I am the parent process. */
  break;
} 
```

# android - 关闭位图的抗锯齿

> ID：12430470
> 
> 赞同：1
> 
> 时间：2012-09-14T19:02:09.630
> 
> 标签：android, mobile, smoothing

我最近开始在其他人的手机上测试我的游戏。出于某种原因，整个游戏对他们的手机来说变得非常“模糊”，但对我来说却不是。他们都有比我更高的安卓版本。

我已经尝试在网上找到一个很好的答案，但我能找到的只是你是否使用 res/drawable 文件夹的答案。我正在使用特殊的加载方法从资产文件夹加载我的图像。然后，当我使用“c.drawBitmap()”将它们绘制到屏幕上时，我会将它们拉伸。我正在使用“android.view.View”进行绘图。

所以现在，任何有答案的人都可以在创建 8 位游戏时关闭位图的抗锯齿功能。我不可能在将图像渲染到屏幕上之前调整它们的大小，因为我从一个整数数组创建了一个图像，它以大约 60 fps 的速率刷新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T00:00:14.463

这种模糊，很可能是因为您的位图分辨率低。在您的测试设备上可能没问题，但是当您在更高分辨率的屏幕上使用它们时，您将在缩放后得到原始/像素化或模糊/AA'd 结果。一个合适的解决方案是为不同的分辨率提供不同的图像，或者更准确；密度。Android 已经做了选择部分：

```
ldpi
mdpi
hdpi
... 
```

我假设您知道这些标识符。

将高分辨率图像放入 res/drawable-hdpi，将低分辨率图像放入 res/drawable-ldpi 等。

# java - 在 java 存档中包含文件

> ID：12430472
> 
> 赞同：0
> 
> 时间：2012-09-14T19:02:16.440
> 
> 标签：java, netbeans, resources

我主要关注这个线程：
[How do you add files to a jar using Netbeans 6.5?](https://stackoverflow.com/questions/435971/how-do-you-add-files-to-a-jar-using-netbeans-6-5) 我有一个名为 Card 的类，然后需要加载一个文件并返回 InputStream 的名称。
这是获取输入的代码：

```
public String getFilename()
{
    String result= "" + seed + "-" + value + ".png";
    return result;
}
public InputStream getInputStream()
{
    InputStream result;
    result= Card.class.getClassLoader().getResourceAsStream(getFilename());
    return result;
} 
```

文件名正确，所有文件都在项目的src文件夹中。
如果我尝试使用 Netbeans 7.2 运行它，它可以工作。但是如果我构建项目并将 jar 从原来的位置移动，运行它，它就不再工作了。它不会加载文件（结果为空）。
问题可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:03:37.093

尝试这个：

```
result= Card.class.getResourceAsStream("/"+getFilename()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:06:12.793

我会将所有文件移动到他们自己的包“资源”中。

```
String result= "/resources/" + seed + "-" + value + ".png"; 
```

（这可能无法解决问题，但它是处理资源时各个站点推荐的解决方案。我知道这对 eclipse IDE 有效）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T13:26:19.613

问题是它没有找到库，我必须移动所有 dist 文件夹才能使其工作。

# c++ - Qt c ++在按键时播放声音-几秒钟后停止工作

> ID：12430488
> 
> 赞同：1
> 
> 时间：2012-09-14T19:03:39.573
> 
> 标签：c++, qt

当用户在 QTextEdit 中键入内容时，我正在制作一个需要播放 .wav 文件的应用程序。我做了一些代码，但几分钟或更短的时间后声音停止了，所以我做了一些愚蠢的工作。点击 30 次后，我调用 sound->stop(); 然后循环重新开始，这行得通，但它不好，你能给出更好的解决方案吗？这是我的代码：

```
int count = 0;
bool MainWindow::eventFilter(QObject *o, QEvent *e){
    if(e->type() == QEvent::KeyPress)
       {
        tipka->play();
        tipka->seek(0);
        count++;
        if(count == 30){
            tipka->pause();
            count = 0;
        }
       }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:33:58.630

您可以使用[QSound](http://doc.qt.nokia.com/4.7-snapshot/qsound.html)。它不提供任何搜索功能，但它使您能够循环、播放和停止。它的功能并不丰富，但可以完成工作。

```
QSound sound("File name.wav");
sound.play();
sound.stop(); 
```

此外，您可以使用其静态功能来播放声音。

```
QSound::play("File name.wav"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-14T21:33:09.090

试试这个，稍后再感谢我:) 在你的 MainWindow 构造函数中 -

```
 installEventFilter(this); 
```

在标题中-

```
 protected:
  bool eventFilter(QObject *, QEvent*); 
```

在 cpp-

```
 bool MainWindow::eventFilter(QObject *o, QEvent *e){

  Q_UNUSED(o);

  if(e->type() == QEvent::KeyRelease)
    {        player->stop();
            player->setMedia(QUrl("qrc:/sounds/button_push.mp3"));
            player->play();
    }
     return false;
   } 
```

# java - 如何使用 Java (Glassfish) SOAP 请求在多个请求之间保持对象实例化

> ID：12430493
> 
> 赞同：4
> 
> 时间：2012-09-14T19:03:53.257
> 
> 标签：java, soap, netbeans, glassfish

我在这个话题上做了很多环顾四周，但我能找到的都是与数据库连接等相关的。

我正在构建一个 Web 服务，它加载一个 Shapefile 并使用 GeoTools 库来做一些基于位置的时髦的东西。我想做的是加载一次Shapefile，为Shapefile获取内存中的所有“功能”，然后每次都能检查该集合 - 请注意，现在实际上加载了许多shapefile。

我已经将基于地理的东西包装在一个类中，当类被实例化时，它将 shapefile 加载到一个集合中。我的@WebService 类检查 myGeoClass 是否已实例化，否则它会创建它并将文件加载到内存中。这些文件永远不会改变，所以我想在多个请求之间保留相同的对象实例，但我已经添加了一些跟踪，它似乎在每个请求中创建一个新实例。

有没有办法将单个实例保存在内存中，在所有请求中共享？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:03:08.863

至少您可以使用静态变量。

如果是 Web 应用程序，则可以将其设置为 ServletContext 的属性。

如果您使用的是 Java EE 6，那么您可以将您的类定义为托管 bean @ApplicationScoped 或 Singleton

# algorithm - 降低埃拉托色尼筛的空间复杂度以生成范围内的素数

> ID：12430495
> 
> 赞同：2
> 
> 时间：2012-09-14T19:03:56.190
> 
> 标签：algorithm, data-structures, primes, sieve-of-eratosthenes, space-complexity

在浏览了一些[SO 帖子](https://stackoverflow.com/questions/622/most-efficient-code-for-the-first-10000-prime-numbers)后，我发现[埃拉托色尼筛法](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)是生成素数的最佳和最快的方法。

我想生成两个数字之间的质数，比如`a`和`b`。

AFAIK，在 Sieve 的方法中，空间复杂度为*O(b)*。

PS：我写的是Big-O而不是Theta，因为不知道能不能减少空间需求。

[我们可以降低埃拉托色尼筛中](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)的空间复杂度吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:20:42.173

这里有两个基本选择：`[a..b]`通过以下素数筛选范围`sqrt(b)`（[Eratosthenes的](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)*“偏移”* 筛），或通过*奇数*筛选。这是正确的; 只需像消除每个素数一样消除每个奇数的倍数。将范围分成一个块，或者如果范围太宽，则分成几个“段”（但如果块太窄，效率会下降）。

 *在 Haskell*可执行伪代码*中，

```
-- foldl :: (r -> x -> r) -> r -> [x] -> r     -- type signature of foldl

primesRange_by_Odds a b = 
  foldl (\ r x -> r `minus` [q x, q x+2*x .. b])
        [o, o+2 .. b]                          -- initial value of `r`, the list
        [3, 5 .. floor(sqrt(fromIntegral b))]  -- values of `x`, one after another
  where
    o   = 1 + 2*div a 2                        -- odd start of the range
    q x = x*x - 2*x*min 0 (div (x*x-o) (2*x))  -- 1st odd multiple of x >= x*x in range 
```

按几率筛选将具有*O(1)的额外**空间*复杂度（在*O(|ba|)*的输出/范围空间之上）。

 **这是因为我们可以通过迭代地添加*2*来枚举几率——这与下面的 Eratosthenes 筛的“核心”素数不同`sqrt(b)`，我们必须为此保留额外的空间*O(pi(sqrt(b)))* = ~ *`2*sqrt(b)/log(b)`*(其中*`pi()`*是[素数计数函数](http://en.wikipedia.org/wiki/Prime-counting_function#Inequalities)）。

剩下的问题是我们如何找到那些“核心”素数。*试除法将需要O(1)*的额外空间，但如果我们要通过 Eratosthenes 的筛子来做，我们需要*O(sqrt(b))*空间来执行核心筛子本身——除非我们执行它作为*分段*筛，因此具有*O(sqrt(sqrt(b)))*的辅助空间要求。选择更适合您需要的任何方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T19:17:00.937

[如果空间复杂度真的是一个问题， Sorenson Sieve](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.94.1737)可能值得一看。从您共享的维基百科页面获得参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T20:18:56.083

如果您有足够的空间来存储直到 sqrt(b) 的所有素数，那么您可以使用额外的空间 O(ba) 筛选 a 到 b 范围内的素数。

在 Python 中，这可能看起来像：

```
def primesieve(ps,start,n):
  """Sieve the interval [start,start+n) for primes.

     Returns a list P of length n.  
     P[x]==1 if the number start+x is prime.  
     Relies on being given a list of primes in ps from 2 up to sqrt(start+n)."""
  P=[1]*n
  for p in ps:
    for k in range((-start)%p,n,p):
      if k+start<=p: continue
      P[k]=0
  return P 
```

你可以很容易地通过只筛选奇数来减少一半的空间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T20:53:15.157

在您最喜欢的搜索引擎中搜索“Eratosthenes 分段筛”。如果你不想去搜索，我在我的博客上有一个[实现。](http://programmingpraxis.com/2010/02/05/segmented-sieve-of-eratosthenes/)***

# image - Matplotlib imshow 具有异常空白的相邻图像 - 有没有办法纠正它？

> ID：12430497
> 
> 赞同：1
> 
> 时间：2012-09-14T19:03:58.297
> 
> 标签：image, plot, matplotlib, antialiasing

我正在以与下面显示的工作代码类似的方式绘制平铺图像：

```
import Image
import matplotlib.pyplot as plt
import random
import numpy

def r():
    return random.randrange(50,200)

imsize = 100
rngsize = 5

rng = range(rngsize)
for i in rng:
    for j in rng:
        im = Image.new('RGB', (imsize, imsize), (r(),r(),r()))
        plt.imshow(im, aspect='equal', extent=numpy.array([i, i+1, j, j+1])*imsize)

plt.xlim(-5,imsize * rngsize + 5)
plt.ylim(-5,imsize * rngsize + 5)
plt.show() 
```

![在此处输入图像描述](../Images/98b824f46c185fba36244b001cea35a0.png)

问题是：当您平移和缩放时，图像边缘之间会出现与缩放比例无关的白色条纹，这是非常不希望的。我想这与重采样和抗锯齿有关，但不知道如何“以正确的方式”解决它，特别是因为不知道 matplotlib 渲染引擎的确切实现细节。

使用 Cairo 和 HTML Canvas，您可以绘制“到像素角”或“到像素中心”（平移 0.5 像素），从而避免抗锯齿效果。有没有办法用 Matplotlib 做到这一点？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T19:33:48.290

您可以简单地将值填充到更大的 numpy 数组中，并一次绘制整个合成图像。我已经将上面的代码调整为一个最小的示例，但是对于不同大小的图像，您需要采用不同的步长。

```
F = numpy.zeros((imsize*rngsize,imsize*rngsize,3))

for i in rng:
    for j in rng:
        F[i*imsize:(i+1)*imsize, 
          j*imsize:(j+1)*imsize, :] = (r(), r(), r())

plt.imshow(F, interpolation = 'nearest')
plt.show() 
```

![在此处输入图像描述](../Images/3123faed6b8401f9d7d7a9b7fdfb22a2.png)

# visual-studio - Visual Studio 2012 中的 Edit.MoveLineUp/Down 发生了什么

> ID：12430498
> 
> 赞同：7
> 
> 时间：2012-09-14T19:03:59.673
> 
> 标签：visual-studio, keyboard-shortcuts, visual-studio-2012

在 Visual Studio 2010 中，您可以为上下移动行分配键盘快捷键。

![视觉工作室 2010](../Images/a07bf8550aae703f4237c268e9d017ca.png)

我在 2012 年找不到这些命令。

![视觉工作室 2012](../Images/c02b48b57630bc3559518938fd898314.png)

它们是否已被重命名或删除？有什么*开箱即用的*`ALT`方法可以使用+移动行`↑</kbd>`↓</kbd>? (I'm not buying ReSharper.)``

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T22:07:53.787

此命令是**Productivity Power Tools**的一部分。

2012 版本于 2012 年 11 月发布。您可以在这里找到它：

[适用于 Visual Studio 2012 的生产力工具](http://blogs.msdn.com/b/visualstudio/archive/2012/11/07/productivity-power-tools-2012.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T22:01:57.147

什么也没发生，这些命令在 VS2010 中也不存在。检查您安装了哪些加载项。

不确定它的作用，但请考虑 Edit.ScrollLineUp/Down。默认绑定是 Ctrl+向上/向下箭头。

# html - 偏移图像鼠标悬停

> ID：12430505
> 
> 赞同：1
> 
> 时间：2012-09-14T19:04:18.110
> 
> 标签：html, css

我正在尝试做一些类似于此价目表在鼠标悬停和更改下的大图像方面的工作方式。我找不到这叫什么，谁能指出我正确的方向？

[http://www.anyjunk.co.uk/rubbish-removal-prices](http://www.anyjunk.co.uk/rubbish-removal-prices)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:10:54.350

在我看来，这只是一个基本`onmouseover`事件。你可以用这样的东西做同样的事情：

```
<script type="text/javascript">
    function changeImage(imageFile)
    {
        document.getElementById('img1').src = imageFile;
    }
</script>
<div id="div1" onmouseover="changeImage('image2.jpg')">Mouse over this</div>
<img src="image1.jpg" id="img1" /> 
```

这里以[jsFiddle](http://jsfiddle.net/TXgLv/4/)为例。

# sql - SQL Server 中的动态数据透视表

> ID：12430512
> 
> 赞同：5
> 
> 时间：2012-09-14T19:04:35.843
> 
> 标签：sql, sql-server, pivot

您好，我有下表，我想将 EcoYear 旋转到顶部，但没有固定的年份，这些年份可以随时开始。此外，不同的案例会有不同的起始年份，所以我需要它填充 0 而不是 null。

```
CaseID EcoYear NetInv NetOil NetGas
38755   2006   123     2154         525 
38755   2007   123     2154         525 
38755   2008   123     2154         525 
38755   2009   123     2154         525 
38755   2010   123     2154         525 
38755   2011   123     2154         525 
38755   2012   123     2154         525 
38755   2013   123     2154         525 
38755   2014   123     2154         525 
38755   2015   123     2154         525 
38755   2016   123     2154         525 
38755   2017   123     2154         525 
38755   2018   123     2154         525 
38755   2019   123     2154         525 
38755   2020   123     2154         525 
```

我需要表格看起来像这样：

```
CaseID Item 2006 2007 2008 2009 2010 2011 2012 2013 2014 2015 2016 2017 2018 2019 2020 
38755 NetInv
38755 NetOil
38755 NetGas 
```

这最初是通过 Access 使用交叉表完成的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-14T19:19:50.707

这可以在 sql server 中使用 an`UNPIVOT`和 a来完成`PIVOT`。静态版本是您知道要转换的列的地方：

```
select *
from 
(
  select CaseId, EcoYear, val, item
  from yourtable
  unpivot
  (
    val
    for Item in (NetInv, NetOil, NetGas)
  )u
) x
pivot
(
  max(val)
  for ecoyear in ([2006], [2007], [2008], [2009], [2010], [2011],
                 [2012], [2013], [2014], [2015], [2016], [2017],
                 [2018], [2019], [2020])
) p 
```

见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/b5c3b/13)

动态版本将确定执行记录：

```
DECLARE @colsPivot AS NVARCHAR(MAX),
    @colsUnpivot as NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @colsPivot = STUFF((SELECT distinct ',' + QUOTENAME(EcoYear) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsUnpivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('yourtable') and
               C.name LIKE 'Net%'
         for xml path('')), 1, 1, '')

set @query 
  = 'select *
      from
      (
        select caseid, ecoyear, val, col
        from yourtable
        unpivot
        (
          val
          for col in ('+ @colsunpivot +')
        ) u
      ) x1
      pivot
      (
        max(val)
        for ecoyear in ('+ @colspivot +')
      ) p'

exec(@query) 
```

见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/b5c3b/14)

# php - PROPEL中的OR句子示例

> ID：12430513
> 
> 赞同：-1
> 
> 时间：2012-09-14T19:04:52.407
> 
> 标签：php, propel

我正在学习推进，在文档中我找到了关于 WHERE/AND WHERE/IN 的示例，但我找不到 WHERE/OR 的示例。我怎样才能使这个 SQL 在推进？

```
SELECT * FROM `users` WHERE `username`='carasuman' OR `email`='carasuman@host.com'; 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:15:41.283

我想这是因为您没有阅读与模型标准相关的文档，其中详细介绍了 OR 子句。

[http://www.propelorm.org/reference/model-criteria#combining_several_conditions](http://www.propelorm.org/reference/model-criteria#combining_several_conditions)

# mysql - MySQL 查询匹配别名 WHERE 不起作用

> ID：12430516
> 
> 赞同：1
> 
> 时间：2012-09-14T19:05:05.723
> 
> 标签：mysql, match, where

为什么我的 sintax 不正确？

```
SELECT *,
           MATCH(tags,title,description) AGAINST ('asd jhbdckdsb' IN BOOLEAN MODE) AS score 
      FROM blogs WHERE score > 0
  ORDER BY score DESC, insert_datetime DESC, id DESC ; 
```

问题似乎出在 WHERE 条件下：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T19:08:37.827

不允许`WHERE`使用不可见的列和列别名`HAVING`

`HAVING score > 0`代替`WHERE`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:08:36.263

您不能在 WHERE 子句中使用列别名。您必须再次重复 MATCH。

# sql - 这个sql命令有什么问题？

> ID：12430519
> 
> 赞同：0
> 
> 时间：2012-09-14T19:05:14.240
> 
> 标签：sql, sql-server, group-by, having, in-clause

我正在尝试创建查询，该查询返回通过考试的学生列表，至少失败次数为 X。为此，我编写了以下查询，但我也收到以下错误：

> IN 子句中的值列表错误。无法解析查询文本。

我确信 IN 子句中的值列表很好，但我不明白它为什么抱怨？！这是有问题的查询：

```
SELECT  StudentID
    FROM    tblStudents
    WHERE   (Sex = @Sex) AND (StudentID IN
                                        (SELECT StudentID
                                        FROM    tblTest
                                        WHERE   (TestID = @TestID) AND (@APass = 'true') AND (Score IN (27, 28, 29, 30)))
                                        GROUP BY StudentID, TestID
                                        HAVING   (COUNT(*) = 1))/*By this i meant find the the user who has passed the exam (finally)*/
                        AND (StudentID IN
                                        (SELECT  StudentID
                                        FROM     tblTest
                                        WHERE   (TestID = @TestID) AND (Score NOT IN (27, 28, 29, 30)))
                                        GROUP BY StudentID, TestID
                                        HAVING        (COUNT(*) >= @Times))/*And By this i meant only return students which passed the exam after x times of failing it*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:18:19.237

`)`您的子查询似乎在子句之后有一个太多`IN`- 这些应该移到`HAVING`行中。

```
SELECT  StudentID
FROM    tblStudents
WHERE   (Sex = @Sex) AND (StudentID IN
                (SELECT StudentID
                FROM    tblTest
                WHERE   (TestID = @TestID) AND (@APass = 'true') AND (Score IN (27, 28, 29, 30))
                GROUP BY StudentID, TestID
                HAVING   (COUNT(*) = 1)))/*By this i meant find the the user who has passed the exam (finally)*/
AND (StudentID IN
                (SELECT  StudentID
                FROM     tblTest
                WHERE   (TestID = @TestID) AND (Score NOT IN (27, 28, 29, 30))
                GROUP BY StudentID, TestID
                HAVING        (COUNT(*) >= @Times)))/*And By this i meant only return students which passed the exam after x times of failing it*/ 
```

# sql - 有没有办法在 SQL 查询中传递多个参数？

> ID：12430528
> 
> 赞同：0
> 
> 时间：2012-09-14T19:05:42.790
> 
> 标签：sql, sql-server, oracle, oracle10g

有没有办法在 SQL 查询中传递多个参数？

**带有 1 个参数的 SQL 查询。**

```
Select 
       cusode as ACCOUNT,
       cusfulname as NAME,
       cushomephone as PHONE,
       numcals as CALLCOUNT,
       firstcalltime as FIRSTCALL,
       durationhm as DURATION,
       address as ADDRESS,
       city as CITY
from table(os_un_etcist('4815044')) 
```

如何传递超过 1 个参数。

例如“4815044”和“415175”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:44:23.737

您需要修改该函数以允许一个 id 数组，而不仅仅是 1。您可以修改现有的，或创建一个新函数，该函数只需为每个 id 调用原始函数并将数据输出管道。

要获取函数的来源，您可以执行以下操作：

```
select line, text
from all_source
where name = 'MY_FUNCTION'; 
```

或者（更好的选择）：从 Oracle 下载[SQL Developer](http://www.oracle.com/technetwork/developer-tools/sql-developer/overview/index.html)（免费），然后打开 Functions 文件夹进行连接。相信我，你会希望这个（或者可能是蟾蜍）向前发展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:10:04.820

如果它们具有相同的列，我建议进行 UNION 查询，因此多个`select`语句分别查询不同的表

if they have different columns use the `,`operator and give the table aliases and then select appropriately

```
select x.a,y.b,y.c from table(os_un_etcist('4815044')) as x, table(os_un_etcist('415175')) as y 
```

PS：这是基于我对 OPs 问题的解释。

# eclipse-plugin - Hadoop CDH4 和 Eclipse Juno

> ID：12430539
> 
> 赞同：4
> 
> 时间：2012-09-14T19:06:46.890
> 
> 标签：eclipse-plugin, hadoop

有没有人成功地针对 CDH4 安装为 Juno 构建 Eclipse 插件？

我在网上看到过CDH3。寻找CDH4。非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T01:15:04.393

我不确定您指的是 Hadoop Eclipse 插件还是针对 CDH4 开发代码的插件。我会回答这两个问题。

在 Juno 中针对 CDH4 进行开发：到目前为止，在 Eclipse（任何版本）中针对 CDH4 组件编写应用程序的最简单方法是使用 m2eclipse[1] 并将 Cloudera Maven 存储库添加到您的 pom.xml。事实上，Cloudera 的很大一部分人（包括我自己）经常这样做。最近，我们的一位工程师 (Natty) 写了一篇关于 CDH4、Maven 和 Eclipse[2]（以及其他 IDE）入门的精彩博文。否则，针对 CDH4 编写应用程序不需要什么特别的东西，除了有 JAR。您还可以在此处浏览 Cloudera Maven 存储库[3]。

Hadoop 插件：很久以前，存在一个用于 Eclipse 的插件，它允许执行 MR 作业和其他一些位。然而，它已经很久没有维护了（现在至少有两到三年）。我认为没有人更新它以与 Juno 一起工作——更不用说 Juno 本身了。

希望这可以帮助。

[1] [http://bit.ly/UUGmlB](http://bit.ly/UUGmlB) [2] [http://bit.ly/O6rkp6](http://bit.ly/O6rkp6) [3] [http://bit.ly/UUGwcC](http://bit.ly/UUGwcC)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T22:09:20.333

我按照以下说明进行操作：http: [//iredlof.com/part-4-compile-hadoop-v1-0-4-eclipse-plugin-on-ubuntu-12-10/](http://iredlof.com/part-4-compile-hadoop-v1-0-4-eclipse-plugin-on-ubuntu-12-10/)

系统：本地：Windows 7、Eclipse Juno (4.2.2)、hadoop-1.2.1。远程：具有相同 hadoop 版本的 Debian 7.1。

我应该提到我针对从 apache 新下载的 vanilla hadoop-1.2.1 构建了插件。

并非一切都适用于插件：我可以添加新的 MR 位置（在我的情况下是远程的），我可以从 DFS 浏览/上传/下载/删除文件，但是我无法运行我的代码（使用 Run as ... Run to Hadoop ）。控制台写入“ClassNotFoundException：WordCountReducer”

好在eclipse生成的jar可以手动上传到MR master，命令行启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-22T01:55:07.227

您可以在此 GitHub 存储库中获取 Hadoop Eclipse 插件。[https://github.com/winghc/hadoop2x-eclipse-plugin](https://github.com/winghc/hadoop2x-eclipse-plugin)。

这里有一篇文章介绍了如何集成 CDH5 和 Eclipse Luna。[http://speedy-elephant.blogspot.com/2015/08/the-real-getting-started-guide-cloudera.html](http://speedy-elephant.blogspot.com/2015/08/the-real-getting-started-guide-cloudera.html)

# android - 版本控制 Android/Eclipse 项目及其所有 3rd 方库

> ID：12430544
> 
> 赞同：4
> 
> 时间：2012-09-14T19:07:13.787
> 
> 标签：android, eclipse, git, project-structure

所以这里是交易。假设我正在开发一个基于 Facebook SDK 和 Chris Banes PullToRefreshListView 的应用程序。我将 SDK 导入到我的工作区（我不太喜欢它，因为它填满了工作区！）并在我的应用程序中将其作为库引用。我正在对 PullToRefreshListView 进行一些更改，假设我正在添加自定义字体或更改其中一个标签的颜色。

现在，我正在使用 Git 对我的项目进行版本控制。我希望能够将我的项目放到我们的 Git 服务器上，并让我的同事能够拉取项目并开始工作，而不必费力地设置和引用相同的 SDK（与我使用的版本相同）该项目。由于我对其中一个库进行了一些更改，因此如果我不提供代码，另一个人将永远无法完全恢复该项目。

*   在这种情况下我应该怎么做？
*   是否可以将未编译的库放在 libs 文件夹或类似的东西中？
*   如果不是，那么实现这一目标的正确方法是什么？

当谷歌搜索或搜索 Stack Overflow 时，我所能找到的只是如何在 libs 文件夹中使用已编译的 .jar 文件，这很好，但不是我想要的。

本质上，我正在寻找一种使用 3rd 方库构建项目的好方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:49:22.873

听起来这些是 android 库项目（它们包含资产）。如果是这种情况，您不能将它们转换为 JAR 文件。

想到的最简单的方法是让您的根项目文件夹包含您的应用程序和所有上述库：

```
Root
-\Your app
  -\src
  -\res
-\3rd party lib 1
-\3rd party lib 2
-\3rd party lib 3 
```

这种结构将使在 Eclipse 中推送到 git 和管理变得非常简单。

# php - CodeIgniter：TankAuth，检查用户出生日期作为回调

> ID：12430545
> 
> 赞同：0
> 
> 时间：2012-09-14T19:07:14.737
> 
> 标签：php, codeigniter, tankauth

好的，所以我在用户注册中实现了出生日期。我现在想要做的是在他们注册之前检查他们的出生日期并检查他们是否超过特定年龄（13）。他们我做 DOB 的方式有点奇怪，但它确实有效。我有 3 个字段 dob1、dob2、dob3。[CodeIgniter：Tank Auth，在这里添加出生日期问题](https://stackoverflow.com/questions/12379703/codeigniter-tank-auth-adding-date-of-birth-issues)是我如何实现它，如果有人感兴趣的话。无论如何，这是我迄今为止一直在尝试的：编辑：用户输入的语法是 mm dd yyyy

```
function is_old_enough($input, $dob1, $dob2) {
          $dob = $dob1.$dob2.$input;
          $date = date('md').(date('Y')-13);
          if ((int)$dob < (int)$date)
            $this->form_validation->set_message('is_old_enough', 'You are not old enough to have an account on this site.');
          return $input;
        } 
```

这是 register() 函数内部的内容。

```
$this->form_validation->set_rules('dob1', 'Date of Birth Month', 'trim|required|xss_clean|exact_length[2]');
$this->form_validation->set_rules('dob2', 'Date of Birth Day', 'trim|required|xss_clean|exact_length[2]');
$this->form_validation->set_rules('dob3', 'Date of Birth Year', 'trim|required|xss_clean|exact_length[4]|callback_is_old_enough[dob1||dob2]'); 
```

我接近了吗？我走远了吗？有人帮忙吗？现在它所做的只是假装我从未创建过这个回调并让用户加入，即使用户太年轻了。我知道它正确调用了函数，因为我对变量有一些问题。帮助？

编辑：布伦丹的回答对我帮助很大，但主要问题是逻辑错误。所以这就是我现在的工作方式：

```
//Check if user is old enough
function is_old_enough($input) {
    $dob = $this->input->post('dob3').$this->input->post('dob1').$this->input->post('dob2');
    $date = (date('Y')-13).date('md');
    if ((int)$dob > (int)$date) {
        $this->form_validation->set_message('is_old_enough', 'You are not old enough to register on this site.');
        return FALSE;
    }
    return TRUE;
}

$this->form_validation->set_rules('dob1', 'Date of Birth Month', 'trim|required|xss_clean|exact_length[2]');
$this->form_validation->set_rules('dob2', 'Date of Birth Day', 'trim|required|xss_clean|exact_length[2]');
$this->form_validation->set_rules('dob3', 'Date of Birth Year', 'trim|required|xss_clean|exact_length[4]|callback_is_old_enough[]'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:37:16.267

首先，您最多只能在回调中传递两个参数。其次，如果您从回调中返回非布尔值，则返回的任何内容都将替换您运行回调的字段的值。

如果您尝试检查某些内容是否有效，那么它的工作方式（本质上）是：

```
function _callback_for_field($input)
{
    // check if $input is valid based on your own logic
    if($input == YOUR_LOGIC_HERE)
    {
        return TRUE;
    }
    return FALSE;
} 
```

但是对于你正在做的事情，特别是：

```
// Birthdate rules
$this->form_validation->set_rules('birthdate-month','Birthdate Month','required|is_natural_no_zero|greater_than[0]|less_than[13]');
$this->form_validation->set_rules('birthdate-day','Birthdate Day','required|is_natural_no_zero|greater_than[0]|less_than[32]');
$this->form_validation->set_rules('birthdate-year','Birthdate Year','required|is_natural_no_zero|greater_than[1930]|less_than['.(date("Y") - 18).']'); 
```

我故意不竭尽全力阻止未满 18 岁的人注册，因为如果他们愿意，他们无论如何都会这样做。如果一个人下定决心要根据年龄限制注册是不可能的，而且由于您没有查看一些有关公民的政府数据库，因此这实际上不在您的职责范围内。只需简单的年龄检查即可。

我又想了想——如果你还想准确检查，你可以参考`$this->input->post()`回调函数中的每个字段。您甚至可以不带参数运行回调函数，因为您将绕过该限制。

# jsf-2 - PrimeFaces dataTable 滚动条在所需位置

> ID：12430546
> 
> 赞同：5
> 
> 时间：2012-09-14T19:07:18.250
> 
> 标签：jsf-2, primefaces

当我添加一条新记录（在默认可视区域之外）并更新数据表时，我有一个包含 100 多条记录的可滚动数据表，数据表从记录 0 加载，而我需要在前一个位置的数据表视图。

我的数据表代码

```
<p:dataTable id="DataTable" value="#{dtMB.selectDataModel}" var="test" scrollable="TRUE" scrollHeight="500" styleClass="day-column2" selectionMode="single" >
 <ui:insert name="TableInsert" >
        <ui:include src="test.xhtml" />
 </ui:insert>   
</p:dataTable> 
```

更新数据表的命令按钮（在对话框内）

```
<p:commandButton id="saveNew"  value="Save" type="submit" process="@parent" onsuccess="addNew.hide()"  action="#{dtMB.addNew()}"   update=":FORM:usrMsg :FORM:TABView:DataTable"/> 
```

目前我需要滚动回第 n 条记录以查看添加了什么或进行任何更新等。primeface 数据表中是否有任何选项，或者我需要为此编写一个 javascript。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T23:53:44.937

我使用以下帖子完成了上述操作

[primeface 数据表滚动条位置](https://stackoverflow.com/questions/12365873/primeface-datatable-scrollbar-position)

[数据表滚动](https://stackoverflow.com/questions/2601171/datatable-scroll)

我的代码

脚本

```
function saveScrollPos() {
var scrollPos = jQuery('#receptionFORM\\:receptionTV\\:scheduleDataTable .ui-datatable-scrollable-body').prop('scrollTop');
document.getElementById('receptionFORM:scrollPos').value = scrollPos;
}

function autoScroll() {
var scrollPos = document.getElementById('receptionFORM:scrollPos').value;
jQuery('#receptionFORM\\:receptionTV\\:scheduleDataTable .ui-datatable-scrollable-body').animate({scrollTop:scrollPos}, scrollPos); 
} 
```

隐藏输入

```
<h:inputHidden id="scrollPos" /> 
```

在数据表行选择的 Ajax 事件中

```
onstart="saveScrollPos()" 
```

保存记录时命令按钮中的以下代码

```
oncomplete="autoScroll()" 
```

# php - PHP 和 ASP.NET MVC 中的 ASP.NET 服务器控件类型

> ID：12430547
> 
> 赞同：0
> 
> 时间：2012-09-14T19:07:17.717
> 
> 标签：php, asp.net, asp.net-mvc

我在 ASP.NET 中创建了一个生成 DLL 的服务器控件，我们可以将它用于我们需要的任何其他应用程序。这很有帮助。

现在我想在 PHP 和 ASP.NET MVC 3 中创建服务器控制类型的应用程序。你能提供一些 PHP 和 ASP.NET MVC 3 的示例应用程序或示例，以便我能够完成我的任务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:20:22.087

Dai 将 ASP.NET WebForms 控件转换为任何其他控件的简单规则：

1.  从您的控件中提取“模型”（即将所有可能的输入变量封装到单个对象中）
2.  分析此模型对象中的变化如何导致渲染输出 (HTML) 发生变化。
3.  在所需的框架中重新实现所述渲染的输出生成逻辑。

如果我在 WebForms 中有这个：

```
public class WhateverControl : Control {
    public String SomeParameter { get; set; }
    public override void Render(HtmlTextWriter wtr) {
        wtr.WriteLine("<p>" + SomeParameter + "</p>");
    }
} 
```

在 PHP 中，像这样：

```
class Model {
    // control parameters go here, e.g. visiblity, data to be displayed, form fields, etc
   public $someParameter;
}

public function renderWhatever(Model $model) {
    echo "<p>" . $model->someParameter . "</p>";
} 
```

在 ASP.NET MVC（使用 Helpers）中，如下所示：

```
public class Model {
    public String SomeParameter { get; set; }
}

public static MvcHtmlString Whatever(this HtmlHelper html, Model model) {
    return MvcHtmlString.Create("<p>" + model.SomeParameter + "</p>");
}

<%= html.Whatever( new Model() { SomeParameter = "arse" } ) %> 
```

# php - 按星期几分割时间，间隔由两个 Zend_Date 定义

> ID：12430548
> 
> 赞同：0
> 
> 时间：2012-09-14T19:07:32.440
> 
> 标签：php, zend-framework, zend-date

我有两个`Zend_Date`代表一个区间：

```
$start = new Zend_Date($punch->getStart());
$end = new Zend_Date($punch->getEnd());

$nbHours = $start->sub($end , Zend_Date::HOUR);
$nbMinutes = $start->sub($end , Zend_Date::MINUTE);

$hoursTotal = $nbHours->get(Zend_Date::HOUR);
$minutesTotal = $nbMinutes->get(Zend_Date::MINUTE); 
```

`Zend_Date`当间隔> 24小时时，有没有一种简单的方法可以按星期几分割间隔？

例如，如果我有一个从星期一上午 8 点到星期二下午 4:30 的时间间隔，我想要一个包含`monday = 16h`and的数组`tuesday = 16:30`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:50:27.603

您不需要为此使用 Zend_Date，实际上最好不要这样做。您应该改用 PHP 中的[日期/时间类](http://www.php.net/manual/en/book.datetime.php)。

如果我正确理解您的问题，您需要一系列天数和这些天的工作时间。

我首先创建了一个模拟类来反映您的代码示例，我假设它正在返回时间戳：-

```
class Punch
{
    public function getStart()
    {
        return time();
    }

    public function getEnd()
    {
        return strtotime('+36 hours 45 minutes');
    }
} 
```

然后我们设置[DateTime](http://www.php.net/datetime)对象-

```
$Punch = new Punch();
$start = new DateTime();
$start->setTimestamp($Punch->getStart());
$end = new DateTime();
$end->setTimestamp($Punch->getEnd()); 
```

然后我们使用[DateInterval](http://www.php.net/dateinterval)对象来生成我们的可迭代[DatePeriod](http://www.php.net/dateperiod)：-

```
$interval = new DateInterval('PT1M');
$minutes = new DatePeriod($start, $interval, $end); 
```

然后我们简单地迭代它，计算每天工作的分钟数：-

```
$format = 'l';
foreach($minutes as $minute){
    if(!isset($result[$minute->format($format)])) $result[$minute->format($format)] = 0;
    $result[$minute->format($format)]++;
} 
```

有关可接受的格式，请参阅[手册页](http://us.php.net/manual/en/function.date.php)。

我们现在有了每天工作的分钟数，将它们转换为小时是微不足道的：-

```
foreach($result as $key => $r){
    $result[$key] = $r/60;
}
var_dump($result); 
```

输出（显然，在不同的时间运行它会得到不同的结果）：-

```
array
  'Monday' => float 17.483333333333
  'Tuesday' => float 19.266666666667 
```

所以周一工作了 17.48 小时，周二工作了 19.27。

或者：-

```
foreach($result as $key => $r){
    $result[$key] = floor($r/60) . ':' . $r % 60;
} 
```

如果更接近您想要的，将给出以下输出：-

```
array
  'Monday' => string "17:29"
  'Tuesday' => string "19:16" 
```

这是我能想到的最简单的方法。

# asp.net - 使用保存对话框将数据表导出到 excel 文件

> ID：12430551
> 
> 赞同：1
> 
> 时间：2012-09-14T19:07:39.407
> 
> 标签：asp.net, vb.net, excel, datatable

我有一个使用各种输入创建的数据表。有时结果表是 35000+ 行。目前，数据表显示在网格视图上。几分钟后加载正常。然后，可以选择将 gridview 导出到 excel 文件。每次我们有一个大表要导出时，转换都会失败。

我的目标是绕过 gridview 步骤并获取格式化表格并将其直接放入 excel 文件中。如果写入/加载速度更快，也可以是 csv 文件，只要数据表类似于 gridview 输出。

我在这里尝试了以下代码[Export DataTable to Excel File](https://stackoverflow.com/questions/1746701/export-datatable-to-excel-file?rq=1)。我尽力将它转换为vb，在这里......

```
Protected Sub btnExportData_Click(sender As Object, e As EventArgs) Handles btnExportData.Click
    Dim dt As DataTable
    dt = CreateDataSource()
    Dim filename As String = "attachment; filename=DistComplain.xls"
    Response.ClearContent()
    Response.AddHeader("content-disposition", filename)
    Response.ContentType = "application/vnd.ms-excel"
    Dim tab As String = ""
    For Each dc As DataColumn In dt.Columns
        Response.Write((tab + dc.ColumnName))
        tab = "" & vbTab
    Next
    Response.Write("" & vbLf)
    Dim i As Integer
    For Each dr As DataRow In dt.Rows
        tab = ""
        i = 0
        Do While (i < dt.Columns.Count)
            Response.Write((tab + dr(i).ToString))
            tab = "" & vbTab
            i = (i + 1)
        Loop
        Response.Write("" & vbLf)
    Next
    Response.End()
End Sub 
```

CreateDataSource() 是在内存中创建的表。然后还有其他按钮调用它来填充gridview。现在它成功地编译并运行，然后它成功地创建了文件。虽然，当文件试图打开我得到这个错误......

[![Excel 错误](../Images/e0807bcc692408a74a68cdfeee824330.png)](https://i.stack.imgur.com/jIVn6.png)

当我同时尝试 xls 和 csv 文件时会发生这种情况。有些东西翻译不正确。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:03:28.793

[（在 Google 的帮助下编写）使用StringWriter 类](http://msdn.microsoft.com/en-us/library/system.io.stringwriter.aspx)创建导出：

```
Public Shared Sub ExportDataSetToExcel(ds As DataSet, filename As String)
    Dim response As HttpResponse = HttpContext.Current.Response

    'Clean response object
    response.Clear()
    response.Charset = ""

    'Set response header
    response.ContentType = "application/vnd.ms-excel"
    response.AddHeader("Content-Disposition", "attachment;filename=""" & filename & """")

    'Create StringWriter and use to create CSV
    Using sw As New StringWriter()
        Using htw As New HtmlTextWriter(sw)
            'Instantiate DataGrid
            Dim dg As New DataGrid()
            dg.DataSource = ds.Tables(0)
            dg.DataBind()
            dg.RenderControl(htw)
            response.Write(sw.ToString())
            response.[End]()
        End Using
    End Using
End Sub 
```

您只需向函数传递数据集和文件名。如果您不想编辑`CreateDataSource()`函数，可以先将其合并到 DataSet 中，如下所示：

```
Dim dt As DataTable = CreateDataSource()
Dim ds As New DataSet
ds.Merge(dt) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T21:46:45.010

您的问题是关于为什么您会收到有关无法打开文件的消息，对吗？

根据 Microsoft 的说法，当您打开“忽略使用动态数据交换 (DDE) 的其他应用程序”设置时会发生这种情况。（见[这里](http://support.microsoft.com/kb/211494)）。该链接包含更改设置的说明。

# jackson - 更改 Jettison 中的日期默认格式

> ID：12430554
> 
> 赞同：0
> 
> 时间：2012-09-14T19:08:04.440
> 
> 标签：jackson, jettison

可以更改 Jettison 库返回的默认日期格式吗？

这是默认的日期格式

{“post”：{“activityDate”：“ **2012-07-03T16:15:29.111-04:00** ”，“modfiedDate”：“ **2012-07-03T16:15:29.111-04:00** ”，“createdDate”： “ **2012-07-03T16:15:29.111-04:00** ”}}

可以改变吗？

我们可以在 Jakson 中使用 org.codehaus.jackson.map.JsonSerialize 注解来做到这一点。

如何在 Jettison 中做到这一点？

Jettison 中是否有类似的课程？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:04:20.803

这可以使用 XMLAdapters 来完成

公共类 DateAdapter 扩展 XmlAdapter {

```
/**
 * This method is called when we return the DTO Date property to UI, We
 * convert the date to UI  date format
 */
@Override
public String marshal(Date inputDate) throws Exception {

    .........

    return dateStr;
}

/**
 * This method is called when UI sends date String and we set the DTO Date
 * property
 */
@Override
public Date unmarshal(String inputDateStr) throws Exception {
            ................
    return inputdate;
} 
```

}

# ruby-on-rails - 在 Rails/ActiveRecord 中播种关系

> ID：12430559
> 
> 赞同：1
> 
> 时间：2012-09-14T19:08:45.063
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.2, seed

在我的 Rails 3.2.8 项目的 db/seeds.rb 文件中，我创建了种子数据：

```
level_1 = Level.create(number: 1) 
```

我的级别模型是：

```
class Level < ActiveRecord::Base
  attr_accessible :number
  has_many :lessons
end 
```

所以我想播种课程：

```
Lesson.create(number: 5, level: level_1) 
```

它的模型是：

```
class Lesson < ActiveRecord::Base
  attr_accessible :level_id, :number
  belongs_to :level
end 
```

当我运行时`rake db:setup`，我收到以下错误：

> 耙中止！无法批量分配受保护的属性：级别

我如何让它工作，我需要添加`:level`到我`attr_accessible`的课程模型中的元素列表吗？这是一个坏主意吗？我是否应该简单地创建一个`Lesson`没有 a 的`Level`然后调用`lesson.level = level_1`？

***UDPATE***：在seeds.rb 文件中的rails 生成的注释显示了这个例子：

```
cities = City.create([{ name: 'Chicago' }, { name: 'Copenhagen' }])
Mayor.create(name: 'Emanuel', city: cities.first) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:43:30.273

你想能够批量分配`level`吗？换句话说，如果Lesson对象的表单可以设置级别属性，会不会有害？

如果它**不会**引起问题，请继续将其添加到 中`attr_accessible`，并继续做你现在正在做的事情。

如果**会**导致问题，`.new`请手动使用并设置：

```
lesson = Lesson.new
lesson.level = level_1
lesson.save 
```

# performance - SortedDictionary 上 First() 与 Last() 的性能

> ID：12430571
> 
> 赞同：4
> 
> 时间：2012-09-14T19:09:53.177
> 
> 标签：performance, linq, .net-3.5, sorteddictionary

我正在使用 SortedDictionaries 来模拟队列（由于我有一些要求），并且我在排序字典上调用 Last() 以获取我需要出列的项目。

我只是想知道使用自定义比较器并调用 First() 或继续调用 Last() 的性能。

反编译 .NET 3.5 程序集后，我发现 SortedDictionary 类确实有一个 Count 属性，所以我猜框架只是在调用 First 时返回位置 0 的项目，而当调用 First 时返回位置 [count-1] 的项目最后被调用，对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T19:14:08.657

不。

由于`SortedDictionary`没有实现`IList<TValue>`（它有一个`this[int]`索引器），`Last()`所以别无选择，只能遍历整个事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-14T19:22:04.537

Last 方法是`Enumerable`类中的扩展方法。Last 的实现首先尝试将`IEnumerable`(your `SortedDictionary`) 转换为`IList<T>`. 如果可以，那么它使用 Count 属性直接访问最后一个元素。如果不能，则必须遍历所有元素才能到达最后一个元素。`SortedDictionary`没有实现`IList<T>`，所以 Last 将遍历所有元素。

# javascript - 在 xml 文档中搜索标签

> ID：12430579
> 
> 赞同：0
> 
> 时间：2012-09-14T19:10:31.870
> 
> 标签：javascript, xml

这是我的 xml 文档

```
<item>
    <timeslot>67363</timeslot>
    <object>8GRM1</object>
    <status>A</status>
    <expl/>
</item>
<item>
    <timeslot>67365</timeslot>
    <timeslot2>67366</timeslot2>
    <object>8TEC6</object>
    <status>p</status>
</item> 
```

我想搜索（使用 javascript）标签是否存在于任何特定项目。

任何帮助将不胜感激..提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T19:55:12.573

不确定您希望做什么，但稍作更改，如果正在搜索的标签是空标签，该方法将返回 null。也请看看这个[jsfiddle](http://jsfiddle.net/BrtKY/2/)

```
function getXMLvalue (node,tagname) 
{ 
  var tagValue = ""; // If tag exists 
  if (node.getElementsByTagName(tagname).length > 0) 
  { // If tag is not empty get the value 
    if (node.getElementsByTagName(tagname)[0].firstChild != null) 
    { 
      tagValue = node.getElementsByTagName(tagname)[0].firstChild.nodeValue; 
    }
    else
    {
      return null;            
    }
  } 
  return tagValue; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:21:19.420

如果您习惯使用 jQuery，则可以执行以下操作：

```
var xml = "<item><timeslot>67363</timeslot><object>8GRM1</object><status>A</status><expl/></item><item><timeslot>67365</timeslot><timeslot2>67366</timeslot2><object>8TEC6</object><status>p</status></item>";

var textInsideTimeslotTag = $(xml).find('timeslot').text(); 
```

# php - PHP、MSSQL、SQLSRV（已准备）驱动程序；如何获取我刚刚插入的行的 ID？

> ID：12430580
> 
> 赞同：0
> 
> 时间：2012-09-14T19:10:35.263
> 
> 标签：php, sql-server, prepared-statement

**我正在寻找使用 SQLSRV 生成最后插入的 id。不过，我需要使用准备好的语句。** 我在这里看到了一个答案（参见下面代码后面的链接），显示了如何做到这一点，但该语句不是为反 sql 注入目的而准备的。

```
//Prep the variables for insert
$p1 = $_POST['description'];
$p2 = intval($_POST['visible']);
$p3 = strval($_POST['whoToShow']);

//Build an array with those variables
$params = array(&$p1, &$p2, &$p3);

//Build the SQL
$sql = "INSERT INTO notifications (description, visible, whoToShow) VALUES (?, ?, ?)";

//Execute the sql using a prepared statement, passing the variables in an array
$stmt = sqlsrv_prepare($conn, $sql, $params) or die(FormatErrors(sqlsrv_errors())); 
```

请查看[Microsoft 的 sqlsrv 驱动程序以了解在 Stack Overflow 上查询“SELECT SCOPE_IDENTITY() AS id”时未返回任何结果的 PHP 驱动程序，](https://stackoverflow.com/questions/4336473/microsofts-sqlsrv-driver-for-php-not-returning-any-result-when-querying-select)以获取有关使用未准备好的语句获取最后插入的 ID 的详细信息。

预先感谢您对我们的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:15:40.633

考虑使用存储过程而不是直接的 INSERT 语句。使用存储过程更好，因为您可以从存储过程中返回一个记录集，其中包含插入记录的 ID。

我将 Microsoft SQL Server 与我的 PHP 一起使用。我正在使用 mssql_query 库连接到 SQL 服务器。不确定它是否有所作为，但我看到您使用不同的库进行连接。我们所做的每一个查询都是通过存储过程。它的效率更高，而且绝对更安全。

```
$myServer = "xxxxxxx";
$myUser = "xxxxxxxx";
$myPass = "xxxxxxx";
$myDB = "myDatabase";
//connection to the database
$dbhandle = mssql_connect($myServer, $myUser, $myPass)
or die("Couldn't connect to SQL Server on $myServer");
//select a database to work with
$selected = mssql_select_db($myDB, $dbhandle)
or die("Couldn't open database $myDB");

$query = "exec eCommerce.dbo.cart_GET_Detail    @sid = ".$_SESSION['sid']." , @cc = '".$_SESSION['cc']."'";

$result = mssql_query($query);
$numRows = mssql_num_rows($result);
$hasItems = (($numRows == 0) ? 'N' : 'Y');

while ($RSLoop = mssql_fetch_array($result)) {
    //var_dump($RSLoop);  //var_dump will show you everything in the recordset
    echo '<tr><td colspan=6 width=720 class=cartDivider>&nbsp;</td></tr>';
    echo '<form name=frmProduct'.$idx.' method=POST action=_action.asp>';
    echo '<input type=hidden name=pid value="'.$RSLoop['product_id'].'">';
} 
```

这是对存储过程的调用，以获取存储在 SQL 表中的购物车内容。对存储过程执行插入操作是类似的。您应该能够在 SQL Server 存储过程中找到一些代码示例。

# asp.net - 向网站动态添加控件时，如何强制 asp:Panel 向右溢出？

> ID：12430581
> 
> 赞同：1
> 
> 时间：2012-09-14T19:10:36.083
> 
> 标签：asp.net, css, web

我正在尝试向网站上的 asp:Panel 动态添加控件，以便它们都出现在同一行上。我有一个固定的宽度，但是当我添加 overflow:auto 时，它们仍然会在空间不足时继续添加到下一行。有没有办法来解决这个问题？

编辑：我想我需要类似 flowLayoutPanel 的东西用于 windows 窗体

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:43:50.200

您的控件是否基于面板控件？那么这是正常行为。面板通常生成为 <div/> 标签，默认情况下 <div/> 标签从新行开始。

如果没有实际的 HTML 作为基础，我不能给你示例代码，但我怀疑为了做你想做的事，你将不得不探索`display`CSS 中的属性。[您可以在此处](http://www.w3schools.com/cssref/pr_class_display.asp)了解更多信息。

# mysql - 在一列mysql中插入多个值？

> ID：12430587
> 
> 赞同：8
> 
> 时间：2012-09-14T19:11:02.113
> 
> 标签：mysql

我有一个复选框和值表，如果用户选择一个复选框，他们会在一个名为 checkHW 的数组中选择 id 的值，为简单起见，代码如下所示：

```
$ids = implode(',',arrayofids);

$sql = "insert into table(id, type) values($ids,type);
$db->query($sql); 
```

用于测试的回显查询：

```
"insert into table('id1,id2','type') 
```

我想如果我遍历这个查询，我可以假设这样做：

```
"insert into table('id1','type');"

"insert into table('id2','type');" 
```

但我不太确定该怎么做，任何帮助都会很棒:)

我实际上使用以下方法解决了它：

```
for($i=0;$i<count(arrayofids); $i++){
$sql = "insert into table(id,type) values(array[$i], 'type'";
$db->query($sql);} 
```

我希望对某人有所帮助，并感谢你们的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T19:18:46.073

你可以这样做：

```
$base = 'INSERT INTO table (id, type) VALUES (';
$array = array(1, 2, 3, 4);
$values = implode(", 'type'), (", $array);
$query = $base . $values . ", 'type')";

$db->query($query); 
```

这是将要提交的内容：

```
INSERT INTO table (id, type) VALUES (1, 'type'), (2, 'type'), (3, 'type'), (4, 'type')
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:18:09.507

如果您有一系列复选框，并且想要将值插入表中，您可以像这样循环遍历它们：

```
<?php

$values = array();

foreach ($_POST['field_name'] as $i => $value) {
    $values[] = sprintf('(%d)', $value);
}

$values = implode(',', $values);

$sql = "INSERT INTO `table_name` (`column_name`) VALUES $values"; 
```

这将为您提供类似于以下内容的 SQL 查询：

```
INSERT INTO `table_name` (`column_name`) VALUES (1),(2),(3),(4) 
```

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T19:16:12.560

两个查询完全不同

`insert into table('id1,id2','type')`将插入单行

> id1,id2 | 类型

然而

```
insert into table('id1','type');"

insert into table('id2','type');" 
```

将插入两行

> id1 | 类型
> id2 | 类型

因此，如果您的**id**列是`int`类型，那么您将无法运行第一个查询

# javascript - 循环中的 jQuery 绑定切换

> ID：12430589
> 
> 赞同：1
> 
> 时间：2012-09-14T19:11:17.667
> 
> 标签：javascript, jquery, coffeescript

我正在尝试通过循环绑定点击事件。

只要我参考相对于原始绑定（使用`this`），这工作正常。问题是，这是不切实际的使用，`this`因为我正在切换的元素位于 DOM 的单独部分中。

结果，在这种情况下，第 4 行将始终引用“图像”。

咖啡脚本：

```
for name in ["contact", "kws", "image"]
  $("#expand-#{name}").bind('click', ->
    $(this).toggleClass("icon-plus-sign").toggleClass("icon-minus-sign")
    $(".#{name}-expander").toggle()
  ) 
```

可悲的是，我只想重复代码。

谢谢，贾斯汀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:21:37.350

如果我正确理解了您的问题，则说明您遇到了可变范围问题。`name`将始终是您的处理程序运行时分配的最后一个值。

Coffeescript 提供了[do](http://coffeescript.org/#loops)关键字来生成自调用闭包并为`name`:

```
for name in ["contact", "kws", "image"]
    do (name) ->
        $("#expand-#{name}").bind('click', ->
            $(this).toggleClass("icon-plus-sign").toggleClass("icon-minus-sign")
            $(".#{name}-expander").toggle()
        ) 
```

# c++ - 在 GCC 中关闭 COW

> ID：12430598
> 
> 赞同：16
> 
> 时间：2012-09-14T19:12:01.723
> 
> 标签：c++, string, gcc, c++11, thread-safety

我早就知道 GCC 使用 COW (Copy-On-Write) for `std::string`，因此无法`std::string`在多线程程序中使用。但据我所知，C++11 禁止使用 COW 的实现，因为线程现在由标准定义，并且移动语义几乎已经过时了对 COW 的需求。

现在，GCC 4.6 实现了大量的 C++11 标准。然而，实现似乎*仍在*使用 COW 语义。我写的一个多线程应用程序中随机出现的神秘段错误引起了我的注意。我已经通过以下测试代码确认这实际上是一个 COW 问题：

```
#include <iostream>
#include <string>
#include <cassert>
#include <thread>
using namespace std;

int main()
{
    std::string orig = "abc";
    std::string copy = orig;
    std::cout << (void*) orig.data() << ", " << (void*) copy.data() << endl;
    assert(orig.data() == copy.data());
} 
```

**编辑：**请注意此处包含`<thread>`标头，证明这是一个 C++11 程序。这是[ideone 的链接，](http://ideone.com/WrHsS)确认了我在说什么，（至少对于 ideone 使用的 GCC 4.5.1）

我不记得为什么，但由于某种原因，我的印象是该`std=c++0x`标志会消除 COW 语义，但事实并非如此。上述代码中的断言是成功的，**即使带有 --std=c++0x 标志。** 所以基本上，从 GCC 4.6 开始，`std::string`在多线程应用程序中仍然无法使用。

有什么方法可以禁用 COW 语义？`std::vector<char>`还是在 GCC 修复此问题之前我需要暂时使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T19:20:00.343

如果您要跨线程边界传递字符串，请执行显式复制，以强制它成为独立字符串，然后将其传递：

```
std::string a="bob";
std::string b(a.data(), a.length()); 
```

在所有事情交叉线程的地方都必须这样做很烦人，但在我看来它比`vector<char>`.

# php - 使用php和mysql制作一个通用的搜索框来搜索几个表

> ID：12430603
> 
> 赞同：-4
> 
> 时间：2012-09-14T19:12:20.370
> 
> 标签：php, mysql

我有 2 张桌子，即：`tbl_subscriber`和`tbl_faculty`.
`tbl_subscriber`具有以下字段：`name`, `id_number`, `email`, `phone`.

`tbl_faculty`有 : `f_name`, `l_name`, `email`, `phone`.

我有一个搜索框。我想写一个查询，如果我在其中输入电话号码/电子邮件/姓名/f_name/l_name，那么它应该搜索两个表以匹配提供的条目，并且它应该返回与该条目对应的所有行。

可以肯定的是，所提供的条目将在提到的任何一个表中（因为我已经制作了这样的表），而不是在两个表中。我的意思是一次只有一个表字段匹配，但查询应该同时搜索两个表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T19:32:43.583

```
 select x , y  from tbl_subscriber 
  union all 
  select x , null as y  from tbl_faculty 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:05:04.163

这可能会奏效：

```
SELECT name,id_number,email,phone FROM tbl_subscriber
UNION 
SELECT CONCAT(f_name, ' ', l_name) AS name, id_number, email, phone FROM tbl_faculty 
```

您可能需要对 name 字段进行一些转换，但它至少可以解决表具有不同数量的字段的问题。

# python - 最长回文子序列

> ID：12430604
> 
> 赞同：1
> 
> 时间：2012-09-14T19:12:23.407
> 
> 标签：python, algorithm

> **可能重复：**
> [如何找到最长的回文子序列？](https://stackoverflow.com/questions/4790522/how-to-find-longest-palindromic-subsequence)

**最长回文子序列。**
回文是一些字母表上的非空字符串，向前和向后读取相同。回文的例子是所有长度为 1 的字符串、civic、racecar 和 aibohphobia（对回文的恐惧）。给出一个有效的算法来找到给定输入字符串的子序列的最长回文。例如，给定输入“字符”，您的算法应该返回“caac”。

现在，我知道如何获得结果的长度。我怎样才能得到结果的顺序？

```
def mylongest(self, i, j):
    if j - i <= 1:
        return j-i
    else:
        if self.sequence[i] == self.sequence[j]:
            return self.mylongest(i+1,j-1) + 2
        else:
            return max (self.mylongest(i+1, j), self.mylongest(i, j-1)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T19:19:48.690

使用`itertools.combinations()`：

```
In [2]: from itertools import combinations

In [7]: strs="character"

In [8]: for y in range(len(strs)-1,1,-1):
   ...:     for x in combinations(strs,y):
   ...:         if ''.join(x)==''.join(x)[::-1]:
   ...:             print ''.join(x)
   ...:             break
   ...:             
   ...:             
carac
caac
chc
cc 
```

# jquery - Jediatable with grails - 如何在更改控制器中的字段数据时获取其他参数？

> ID：12430605
> 
> 赞同：1
> 
> 时间：2012-09-14T19:12:23.833
> 
> 标签：jquery, grails, params, gsp, jeditable

![在此处输入图像描述](../Images/57f987dc8c2b2e68a31bf45df7c42e17.png) 为我的 GSP 页面使用 Jeditable 插件，如下所示。我想将 jobid 作为参数发送，同时保存对字段所做的更改，以便我可以在表中保存正确的记录。

小提琴链接 - [http://jsfiddle.net/358ES/3/](http://jsfiddle.net/358ES/3/)

**用于保存更新功能**的控制器代码是 -

```
def update = {
    println params
     //saving will come here.
} 
```

在控制台上打印如下参数 -

```
 [id:select_2, value:daily, action:update, controller:auth]  //I NEED JOB ID AS PARAM. 
```

如何获取单击哪个行 id 进行更改？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:06:25.287

我已经解决了这个问题，并将 jobId 添加到每个列名，以便在提交时获得 ID。

# jquery-ui - 为什么 Opera 中的 JQuery UI 小部件明显更大？

> ID：12430607
> 
> 赞同：2
> 
> 时间：2012-09-14T19:12:31.727
> 
> 标签：jquery-ui, opera

因此，我在 Opera 12、IE9 和 Firefox 15**[的 JQuery 演示页面上对 jquery UI 组合框按钮](http://jqueryui.com/demos/autocomplete/#combobox)**的实际大小（宽度和高度）进行了测试，看看它是缩放还是其他。

事实证明，Opera 浏览器的按钮大小实际上是不同的，而且要大得多。

*   歌剧宽度/高度：**30px** / **25px**；
*   IE宽/高：24.2px / 19.37px；
*   火狐：24.2 像素/19.6 像素；

这是为什么？在 Opera 中查看时，我不想要巨大的 JQuery 控件。这也仅适用于 JQuery 控件，因为我页面上的其他控件大小相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:47:06.953

根据@Nal 和@Mystery Man 的评论，如果我在html 和/或正文级别将默认字体大小设置为px 或pt，它会修复差异。将其设置为任何 em 设置是导致问题的原因，因为默认值为 1em 或其他东西。jquery 演示页面仅使用默认的 jquery 字体大小设置，该设置位于 em 中，因此不是绝对大小。

# html - 是否可以将 HTML5 应用程序转换为移动平台的原生应用程序？

> ID：12430610
> 
> 赞同：0
> 
> 时间：2012-09-14T19:12:42.440
> 
> 标签：html, mobile

是否可以将 HTML5 应用程序转换为移动平台的原生应用程序？如果可能，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:16:18.707

是的。使用[**Adob​​e PhoneGap**](http://phonegap.com/)又名 Apache Cordova。

还有其他选择。有关不同选项的比较，请参阅[Corona、Phonegap、Titanium 之间](https://stackoverflow.com/questions/1482586/comparison-between-corona-phonegap-titanium)的比较。

# c++ - 找不到 Eclipse Juno C++ 二进制文件？

> ID：12430611
> 
> 赞同：0
> 
> 时间：2012-09-14T19:12:46.807
> 
> 标签：c++, eclipse, eclipse-cdt, eclipse-juno

我收到这个错误。启动失败，找不到二进制文件。

我是 C++ 新手，所以我不确定从哪里开始。它一直在编译，直到我添加了“swap”。

![在此处输入图像描述](../Images/fbfb142a493af3993ec34dd865ddcf23.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:48:13.923

“找不到二进制文件”是编译失败的结果 - 检查编译器输出，它说`assignment of read-only reference`。那是因为你不能分配给 variable `str`，因为它被声明为方法的`const`参数`permute`。

解决方案取决于您的方法应该如何工作：

*   如果`permute`应该修改作为参数给出的变量`str`（即调用时用作参数的字符串`permute`），则删除`const`方法声明中的
*   如果您只`str`在方法内部使用，并且用于方法调用的字符串变量应保持不变，则创建它的副本（例如`std::string strCopy(str);`）并使用它而不是`str`.

# database - 在 Django 中，如果使用原始 SQL 添加行，是否使用列的默认值？

> ID：12430614
> 
> 赞同：1
> 
> 时间：2012-09-14T19:13:24.670
> 
> 标签：database, django, postgresql

我注意到，在大多数情况下，Django 不会在数据库级别强制执行默认值。

模型中的字段定义：

```
description = models.TextField(default='') 
```

SQL：

```
description | text   | not null 
```

如果我使用原始 SQL 添加一行（如此处所述：[https](https://docs.djangoproject.com/en/dev/topics/db/sql/#executing-custom-sql-directly) ://docs.djangoproject.com/en/dev/topics/db/sql/#executing-custom-sql-directly ），并且不包含值对于具有默认值的字段，是否仍会使用默认值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:51:54.847

**不。**

至少，不是基于我刚刚做的测试。

模型.py：

```
class Recipient(models.Model):
    mailing = models.ForeignKey(Mailing, related_name="recipients")
    email = models.EmailField()
    how_sent = models.CharField(max_length=1, choices=SENT_TYPES, default="U")
    user = models.ForeignKey(User, blank=True, null=True)
    date_sent = models.DateTimeField(auto_now_add=True)
    date_viewed = models.DateTimeField(null=True, blank=True)

    def __unicode__(self):
        return "%s -> %s (%s)" % (self.mailing, self.email, self.date_sent) 
```

然后我运行这段代码：

```
>>> cursor.execute("""insert into mailings_recipient (mailing_id, email) values (3, 'test@example.org');""")
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "path/to/django/db/backends/util.py", line 40, in execute
    return self.cursor.execute(sql, params)
  File "/path/to/django-pyodbc/sql_server/pyodbc/base.py", line 326, in execute
    return self.cursor.execute(sql, params)
IntegrityError: ('23000', "[23000] [FreeTDS][SQL Server]Cannot insert the value NULL into column 'how_sent', table 'database.dbo.mailings_recipient'; column does not allow nulls. INSERT fails. (515) (SQLExecDirectW)") 
```

如果 Django 为您输入了默认值，它会发送一个“U”值，`how_sent`但我得到了一个错误。

那么如果我们使用 Django 创建一条记录，

```
Recipient.objects.create(mailing=Mailing.objects.all()[0], email='test@example.org') 
```

这是相应的 SQL：

```
SET NOCOUNT ON INSERT INTO [mailings_recipient] ([mailing_id], [email], [how_sent], [user_id], [date_sent], [date_viewed]) VALUES (1, test@example.org, U, None, 2012-09-14 14:48:59, None) 
;SELECT SCOPE_IDENTITY() 
```

因此，如果您真的问是否会为您输入默认值，如果您使用类似的答案，`cursor.execute("INSERT INTO...")`那么答案是*否定*的，它不会为您设置这些默认值。正如您所指出的，Django 在创建数据库模式时不会为您设置默认值，它只是在执行正常保存时设置这些默认值。

# c# - DataContext 和绑定 self 作为 RelativeSource

> ID：12430615
> 
> 赞同：20
> 
> 时间：2012-09-14T19:13:27.187
> 
> 标签：c#, xaml, data-binding, datacontext

有人可以向我解释以下 XAML 行吗？

```
DataContext="{Binding RelativeSource={RelativeSource Self}}" 
```

[这里](http://www.switchonthecode.com/tutorials/wpf-tutorial-using-the-listview-part-1#comment-11832)是简单的使用例子。

如何用`C#`代码替换该行？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-14T19:15:01.170

这只是将`DataContext`属性设置为等于具有该属性的对象。等效的代码是`this.DataContext = this;`

**编辑**

该`DataContext`属性是用作此对象及其子对象上发生的所有绑定的上下文的对象。如果您没有`DataContext`正确设置要绑定到的模型，则所有绑定都将失败。

**编辑2**

以下是如何在后面的代码中设置它（与您的示例匹配）：

```
public partial class ListViewTest : Window
{
    ObservableCollection<GameData> _GameCollection = 
        new ObservableCollection<GameData>();

    public ListViewTest()
    {
        _GameCollection.Add(new GameData { 
          GameName = "World Of Warcraft", 
          Creator = "Blizzard", 
          Publisher = "Blizzard" });
        _GameCollection.Add(new GameData { 
          GameName = "Halo", 
          Creator = "Bungie", 
          Publisher = "Microsoft" });
        _GameCollection.Add(new GameData { 
          GameName = "Gears Of War", 
          Creator = "Epic", 
          Publisher = "Microsoft" });

        InitializeComponent();

        this.DataContext = this;   //important part
    }

    public ObservableCollection<GameData> GameCollection
    { get { return _GameCollection; } }

    private void AddRow_Click(object sender, RoutedEventArgs e)
    {
      _GameCollection.Add(new GameData { 
          GameName = "A New Game", 
          Creator = "A New Creator", 
          Publisher = "A New Publisher" });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T19:15:27.123

这意味着“DataContext 是此 DataContext 属性的所有者”，因此是控件。

在 C# 中它会是

```
myTextBox.DataContext = myTextBox; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-23T11:24:33.283

回答您的第二个问题：有时在 XAML 上声明 DataContext 可能很有用，因为您可以在设计时看到数据绑定。如果您通过代码声明它，则数据绑定将仅在运行时完成。

还有其他方法可以获取设计时（假）数据。如需了解更多，请查询“可弯曲性”。

注意：作为一般规则，请记住，如果您有其他问题，您应该创建一个新的 stackoverflow 请求 :-)

# css - 使用 Facebook 广告 API 中的 PreviewCSS

> ID：12430617
> 
> 赞同：0
> 
> 时间：2012-09-14T19:13:37.523
> 
> 标签：css, facebook-ads-api

[如此处](http://developers.facebook.com/docs/reference/ads-api/generatepreview/)所述，您可以获取 CSS 文件，以与文档还描述的广告预览 HTML 一起使用。问题是css文件在下载时包含如下元素：

```
body{background:#fff;font-size:11px;font-family:&#39;lucida grande&#39;,tahoma,verdana,arial,sans-serif;color:#333;line-height:1.28;margin:0;padding:0;text-align:left;direction:ltr;unicode-bidi:embed}
h1, h2, h3, h4, h5, h6{font-size:13px;color:#333;margin:0;padding:0}
h1{font-size:14px}
h4, h5{font-size:11px}
p{margin:1em 0}
a{cursor:pointer;color:#3b5998;text-decoration:none}
a:hover{text-decoration:underline}
img{border:0}
td, td.label{font-size:11px;text-align:left}
dd{color:#000}
dt{color:#777}
ul{list-style-type:none;margin:0;padding:0} 
```

因此，当我们将这个 CSS 放在网页上时，它会与页面其余部分的格式发生冲突。也许这是一个简单的 CSS 问题，但我如何限制这个 CSS 的应用？我必须把它放在框架内吗？好像很烦...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T19:15:50.040

只需指定您自己的具有更高 css 特异性的选择器。[这](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)是一篇关于如何做到这一点的优秀文章。

基本上，由于所有这些选择器只有一个元素名称（例如`h1`），因此它们的特异性为 1。即使您为所有自己的选择器都添加了前缀`body`，例如。`body h1`，您的选择器将具有更高的特异性，因此优先于 Facebook CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:10:56.757

解决这个问题的一个更简单的方法是通过 iFrame 或弹出窗口加载预览广告的代码，这意味着 Facebook 的 CSS 不会干扰您的网站。

# jquery-autocomplete - jQuery自动完成不会接受标签值对

> ID：12430618
> 
> 赞同：0
> 
> 时间：2012-09-14T19:13:46.433
> 
> 标签：jquery-autocomplete

我正在尝试在本地主机上使用带有 url 选项的自动完成功能。我的 php 文件返回如下；

```
[ { label: "025170000", value: "18511"},....{ label: "TE-5170V-Special", value: "8464"} ] 
```

例如。

我的 html 代码如下所示；

```
 <head>
    <meta charset="utf-8">
    <title>jQuery UI Autocomplete - Remote datasource</title>
    <link rel="stylesheet" href="css/ui-lightness/jquery-ui-1.8.23.custom.css">
    <script src="js/jquery-1.8.0.min.js"></script>
    <script src="js/jquery-ui-1.8.23.custom.min.js"></script>
    <style>
    .ui-autocomplete-loading { background: white right center no-repeat; }
    </style>
    <script>
    $(function() {
        function log( message ) {
            $( "<div/>" ).text( message ).prependTo( "#log" );
            $( "#log" ).scrollTop( 0 );
        }

        $( "#products" ).autocomplete({
            source: "auto_complete.php",
            minLength: 3,
            select: function( event, ui ) {
                log( ui.item ?
                    "Selected: " + ui.item.value + " aka " + ui.item.id :
                    "Nothing selected, input was " + this.value );
            }
        });
    });
    </script>
</head>
<body>

<div class="demo">

<div class="ui-widget">
    <label for="products">Products: </label>
    <input id="products" />
</div>

<div class="ui-widget" style="margin-top:2em; font-family:Arial">
    Result:
    <div id="log" style="height: 200px; width: 300px; overflow: auto;" class="ui-widget-content"></div>
</div>

</div><!-- End demo --> 
```

我让它与一个字符串数组一起工作，但不能让它与标签 - 值对一起工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:08:37.053

好的，我发现您还需要在 'label' 和 'value 周围加上引号。所以它需要看起来像这样；

```
[ { "label": "025170000", "value": "18511"},....{ "label": "TE-5170V-Special", "value": "8464"} ] 
```

我通过在服务器端脚本中使用此代码来做到这一点；

```
 $result = mysql_query($sql);
  $products = '[';
  while ($row = mysql_fetch_assoc($result)) {
        extract($row);
        $products .= " { \"label\": \"$productnumber\", \"value\": \"$productid\"},";
  }
  $products=substr($products,0,-1); 
  $products .= ' ]'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:55:41.480

由于您从服务器获取标签/值对，因此您需要`$.ajax()`在`source`. 尝试这个。

```
$( "#products" ).autocomplete({
    source: function(request, response){
        $.ajax({
            url: "auto_complete.php",
            type: "POST",
            data: {}, //Filtering criteria is specified for the server to filter the results. I'm not exactly sure what needs to be done since you have not posted server code.
            success: function (data) {
                response(data);
            }
        });
    },
    minLength: 3,
    select: function( event, ui ) {
        log( ui.item ?
            "Selected: " + ui.item.value + " aka " + ui.item.id :
            "Nothing selected, input was " + this.value );
    }
}); 
```

如果你告诉我你在服务器端做什么，那么我可以帮助`data`你通过。

# nhibernate - NHibernate 映射定制

> ID：12430619
> 
> 赞同：2
> 
> 时间：2012-09-14T19:13:54.593
> 
> 标签：nhibernate, nhibernate-mapping

我正在使用 Nhibernate 3.3.1，我需要确保我的字符串列的长度都不会小于 15，即

我正在尝试检查 ModelMapper 的 AfterMapProperty/BeforeMapProperty 事件，但我知道 Length 属性是 PropertyMapper 类或其某些基类的私有。

我试图避免使用反射来访问私有属性来获取长度并检查它。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T19:18:30.297

您可以使用该`check`属性来实现这一点。在您的映射文件中，您需要定义如下内容：

```
<property name="Foo" type="string">
    <column name="foo" check="DATALENGTH(foo) > 15"/>
</property> 
```

这将创建一个检查约束。我不太确定 DATALENGTH 方法，但您可以确认..

请参阅此处的 NH 文档第 20.1.1 节：http: [//nhibernate.info/doc/nh/en/index.html](http://nhibernate.info/doc/nh/en/index.html)

# c++ - 在 C++ 中使用枚举标志

> ID：12430620
> 
> 赞同：1
> 
> 时间：2012-09-14T19:13:56.213
> 
> 标签：c++, qt, enumeration, flags

> **可能重复：**
> [如何在 C++ 中使用枚举作为标志？](https://stackoverflow.com/questions/1448396/how-to-use-enums-as-flags-in-c)

为了解释我想要做什么，我试图获取一个包含更新检查信息的标志整数，例如

```
int flags = keyPress | mouseClick | mouseMove; 
```

从我的事件枚举中；

```
enum mEvents {
     keyPress = QEvent::KeyPress,
     keyRelease = QEvent::KeyRelease,
     mouseClick = QEvent::MouseButtonPress,
     mouseDoubleClick = QEvent::MouseButtonDblClick,
     mouseMove = QEvent::MouseMove
}; 
```

这样我就可以检查发生了什么事件类型；

```
void Lib::Update(QEvent *e) {
     if (e->type() == flags)
         stateManager->updateCurrentState(e);
} 
```

我想做的是说，如果事件类型是“标志”中的以下任何一种，则更新。但是，这是行不通的。更准确地说，它适用于按键，但不适用于鼠标点击或移动事件。

所以我想知道，如果我想做的事情是可能的，如果可以，我怎么能做到这一点？（我很确定，我知道 SDL 使用类似的标志系统来创建屏幕）非常感谢任何帮助。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:19:39.543

是的，因为如果您查看[文档](http://qt-project.org/doc/qt-4.8/QEvent.html)，这些枚举值并非都是 2 的幂，因此您不能将它们用作位标志（好吧，您*可以*，如果任何位重叠，它将不起作用）。

您只是在复制 中定义的枚举`QEvent`，所以我真的完全看不出重点。您必须单独检查每种类型，它们不会作为不同值的组合出现在您面前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T19:22:32.997

[从这里](http://qt-project.org/doc/qt-4.8/QEvent.html)枚举值。

`QEvent::KeyPress`= 6 = 0x0110

`QEvent::KeyRelease`= 7 = 0x0111

`QEvent::NonClientAreaMouseButtonPress`= 174 = 0x10101110

`QEvent::MouseButtonDblClick`= 4 = 0x0100

`QEvent::MouseMove`= 5 = 0x0101

注意这些是如何按位排列的：

0x00000110

0x00000111

0x10101110

0x00000100

0x00000101

为此，您的所有标志都必须至少有一位未被其他标志共享。请注意

`0x10101110 | 0x00000110`= 0x10101110 本身就是第一个标志。

所以：

`QEvent::NonClientAreaMouseButtonPress | QEvent::KeyPress`

与简单没有区别：

`QEvent::NonClientAreaMouseButtonPress`

# java - 如何将我的 txt 文件转换为字符串

> ID：12430621
> 
> 赞同：2
> 
> 时间：2012-09-14T19:13:58.190
> 
> 标签：java, string, file

如何将我的 txt 文件转换为`String`我在方法中读取的文件`newGame`？我需要使用我给定的界面。使用的 txt 文件是一个 9x9 矩阵。然后我需要将其转换为 2D 数组，我该如何将 String 文件也转换为 2D int 文件。

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.PrintWriter;
import java.util.InputMismatchException;
import java.util.Scanner;

import javax.swing.JFileChooser;
import javax.swing.filechooser.FileNameExtensionFilter;

public class GameManager implements SudokuBoardManager
{

private static GameManager myBoard;

public static void main(String[] args)
{
    myBoard = new GameManager();
    JFileChooser chooser = new JFileChooser();
    myBoard.newGame(chooser.getSelectedFile());
    System.out.println(myBoard.toString());

}

@Override
public void setValueAt(int r, int c, int v) throws InputOutOfRangeException, ValueNotValidException 
{

}

@Override
public int getValueAt(int r, int c) throws InputOutOfRangeException 
{
    return 0;
}

@Override
public int[] displayPossibleValues(int r, int c)throws InputOutOfRangeException 
{
    return null;
}

public String toString()
{

    return " ";
}

@Override
public void newGame(File gameFile) 
{
    JFileChooser chooser = new JFileChooser();
    int status;
    Scanner in = null;

    chooser.setDialogTitle("Select Sudoku Game File");
    status = chooser.showOpenDialog(null);
    if(status == JFileChooser.APPROVE_OPTION)
    {
        try
        {
            gameFile = chooser.getSelectedFile();
            in = new Scanner(gameFile); 
        }
        catch(InputMismatchException e)
        {
            e.printStackTrace();
        } catch (NumberFormatException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T19:24:43.160

尝试 -

```
String output = new Scanner(new File("file.txt")).useDelimiter("\\Z").next(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T20:02:19.133

`Scanner`您可以使用以嵌套 for 循环分隔的逗号/换行符将数据与接口匹配：

```
Scanner scanner = new Scanner(new File("game.txt")).useDelimiter(",|\r\n");
for (int i=0; i < 9; i++) {
   for (int j=0; j < 9; j++) {
      myBoard.setValueAt(i, j, scanner.nextInt());
   }
} 
```

Setter 看起来像这样：

```
public void setValueAt(int r, int c, int v) throws InputOutOfRangeException, ValueNotValidException {
    // Handle InputOutOfRangeException, ValueNotValidException
    boardValues[r][c] = v;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T19:17:53.287

只需使用 BufferedReaders readline() 方法读取每一行。然后一一找到该行中的整数并继续将它们添加到您的二维数组中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T19:32:16.577

看看`org.apache.commons.io.IOUtils.readFully()`和`org.apache.commons.io.IOUtils.readLines`。

网址是[http://commons.apache.org/io/](http://commons.apache.org/io/)

# html5-canvas - 我非常短的代码没有显示任何内容

> ID：12430628
> 
> 赞同：0
> 
> 时间：2012-09-14T19:14:36.460
> 
> 标签：html5-canvas, easeljs

当我尝试使用easeljs javascript 库时，我编写了一个简短的页面以打印一个蓝色方块。不幸的是，我已经在 Ubuntu 12.04 主机的 Chromium 下对其进行了测试：但它没有显示任何内容。此外，Chromium 的开发者控制台没有检测到任何错误：

索引.html

```
<!DOCTYPE html>
<html>   
<head>
<title>Drag'n drop sur un carre</title>
<script src="easeljs-0.5.0.min.js"></script>
<script src="myScript.js"></script>
</head>

<body onload="init()">
<canvas id="mycanvas" width="640" height="480"></canvas>
</body>
</html> 
```

myScript.js

```
function init(){
    stage = new createjs.Stage(document.getElementById("mycanvas"));

    carre = new createjs.Shape();
    carre.graphics.beginFill(createjs.Graphics.getRGB(0, 0, 255));
    carre.graphics.rect(0, 0, 30, 30);
    carre.x = 70;
    carre.y = 50;
    stage.addChild(carre);
} 
```

所以：怎么了？提前致谢。

（我使用的是easeljs 0.5.0）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:37:44.543

你最后需要有 stage.update();

# .net - softartisans excelwriter - 如何获得 dd-mm-yyyy hh:mm:ss 的日期样式？

> ID：12430631
> 
> 赞同：0
> 
> 时间：2012-09-14T19:14:48.847
> 
> 标签：.net, officewriter

我可以使用`NumberFormat.DateFormat.MonthDayYearHourMinute24`或`NumberFormat.TimeFormat.HourMinuteSecond24`没有任何东西可以给我日期和时间以及秒数:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T13:20:03.527

[免责声明：我是OfficeWriter的产品负责人]

如果您需要内置[NumberFormat.DateFormat](http://wiki.softartisans.com/display/EW8/NumberFormat.DateFormat)枚举列表中未包含的自定义日期格式，则可以将[Style.NumberFormat](http://wiki.softartisans.com/display/EW8/Style.NumberFormat)设置为所需的任何格式字符串。在这种情况下，需要修改格式化字符串以包含第二个变量：

```
//Get NumberFormat
string numFormat = style.NumberFormat;

//Set NumberFormat
style.NumberFormat = "m/d/yy h:mm:ss AM/PM"; 
```

OfficeWriter 接受的格式字符串与 Excel 中的格式字符串相同。**要查找新的格式字符串，您可以在 Excel 中的Format Cells > Number**下查找数字格式。选择“自定义”以查找特定数字格式的确切格式字符串。更多信息可在[数字格式](http://wiki.softartisans.com/display/EW8/Number+Formats)下的 OfficeWriter 文档中找到。

# iphone - 核心数据 - 为什么不自动设置反向关系？

> ID：12430632
> 
> 赞同：1
> 
> 时间：2012-09-14T19:14:51.810
> 
> 标签：iphone, ios, ipad, core-data, magicalrecord

我有一个一对多的关系作为`NSOrderedSet`一个`NSManagedObject`。

但是，当在`addObject:`有序集（我从`NSManagedObjectModel`子类对象的属性调用）上调用该方法时，不会自动设置反向关系。什么会导致这种情况？

作为相关说明，我正在使用**Magical Record**来更轻松地将数据映射到`NSManagedObject`对象。

此外，我也参考了这篇文章，但我没有在我的子类上覆盖这些方法：

[未设置核心数据反向关系](https://stackoverflow.com/questions/6191160/core-data-inverse-relationship-not-being-set)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T21:40:49.833

`NSOrderedSet`在核心数据中有严重的错误。有关暂时绕过它们的方法，请参阅此帖子：

[NSOrderedSet 生成的访问器中抛出的异常](https://stackoverflow.com/questions/7385439/exception-thrown-in-nsorderedset-generated-accessors/7922993#7922993)

# vim - 如何让 MinTTY（Cygwin 终端）在新窗口中打开 gvim？

> ID：12430633
> 
> 赞同：4
> 
> 时间：2012-09-14T19:14:52.407
> 
> 标签：vim, cygwin

我已经安装了薄荷。之后我无法打开 gvim。正如我在使用 emacs 的同一个问题中所建议的那样：1）mintty gvim

这将打开一个带有消息的新窗口：

E233: 无法打开显示E852: 子进程无法启动 GUI 按 ENTER 或键入命令继续

我也设置了：export DISPLAY=":0"

我做错了什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T19:21:09.263

您可能没有运行 X 服务器。[在此处](http://x.cygwin.com/)查看有关设置的说明。就个人而言，我发现卸载 cygwin 版本的 gvim 并改用 windows 版本更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-29T00:41:29.130

我在启动 gvim 时遇到了同样的问题，并且收到了上述错误消息。

我的默认显示设置是：0.0

但是，我在 startxwin 的输出中注意到它说

""" 规则 = "base" 模型 = "pc105" 布局 = "us" Variant = "none" Options = "none" winMultiWindowXMsgProc - DISPLAY=:2.0 winInitMultiWindowWM - DISPLAY=:2.0 winProcEstablishConnection - winInitClipboard 返回。"""

我将我的显示设置为：2.0，它现在可以工作了。即导出DISPLAY=:2.0

希望这可以帮助。

[除此之外，脚本似乎检查 /tmp/.X11-unix/Xn 其中 Xn 中的 n 是一个数字。看来我已经有 X0 和 X1 了，可能是旧的坏关机遗留下来的。删除它似乎可以将其恢复为使用 :0.0 ]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-27T02:44:23.540

对我来说，gvim 是从 /usr/bin/gvim 中获取的，我将 gvim 作为 Windows 应用程序安装，然后直接从其 Windows 路径调用它

```
[cygwin$] /cygdrive/C/Program\ Files\ \(x86\)/Vim/vim74/gvim 
```

它奏效了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-03T18:28:13.553

像 user2250246 一样，我只是试图让 cygwin 的 gvim 重新开始工作，但我不想键入或别名 gvim。（我可能应该这样做。别名更容易。）

我将 Windows 应用程序的 gvim 路径添加到我的 Windows 环境变量中：

1.  通过在“开始”菜单中找到 gvim 的图标并右键单击它，然后打开“属性”来获取 gvim 的路径。找到目标链接并复制除最终的“gvim.exe”之外的所有内容。
2.  转到控制面板 -> 系统 -> 高级系统设置 -> 环境变量 -> 系统变量。选择路径。单击编辑。在开始时粘贴该路径。单击确定。单击确定。

然后 Cygwin 会将您的 Windows gvim 放在它的路径上，但它会将 /usr/bin 放在它自己的路径上。所以

3.  mv /usr/bin/gvim /usr/bin/gvim-screwed-up

    mv /usr/bin/gvimdiff /usr/bin/gvimdiff-screwed-up

并且您的 cygwin 将找到并运行 Windows 安装的 gvim，无论您的 cygwin X 服务器是否运行。

不幸的是，它将不再加载您的 cygwin .vimrc！你必须自己解决这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-28T02:24:38.740

您可以在 .bash_profile 中定义一个函数（您需要确保 gvim.exe 在您的 $PATH 中）

```
vim() {
  echo "cygstart gvim.exe --remote-tab-silent $(cygpath -w "$@")"
  cygstart gvim.exe --remote-tab-silent $(cygpath -w "$@")
} 
```

# jquery - Jquery animate 在我的网站上给了我奇怪的结果

> ID：12430641
> 
> 赞同：-1
> 
> 时间：2012-09-14T19:15:27.983
> 
> 标签：jquery, css

我以前没有在任何论坛上发过帖子……我通常会尝试自己解决问题。但是我在一个网站上遇到了一个让我非常恼火的问题。

这是网站： http: [//fortiswebsystems.com/](http://fortiswebsystems.com/)

问题：单击导航栏上的按钮时，背景图像会向下跳并缓和。我不想要这个。我已经在 Chrome、IE 和 Firefox 中对其进行了测试，结果都相同。

我一直在搞乱萤火虫试图修复它。我认为这是由 jQuery animate css 函数“changePage”引起的 CSS 错误。这是功能：

```
function changePage ( page )
                {
                    if( $('#logo').attr('class') != 'small' )
                        {

                            $('#logo').animate ({
                                    'margin-top': '-250px',
                                    'margin-left': '-250px',
                                    height: '150px',
                                    width: '150px'
                                } , 2000 , 'easeOutBounce' , function () {
                                $('#logo').attr('class','small');
                            });
                            $('#content-flying-page').css({ 
                                    'display' : 'block' , 
                                    '-ms-filter' : "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",
                                    'filter' : 'alpha(opacity=0)',
                                    'opacity' : '0'
                                }).animate ({
                                    '-ms-filter' : "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",
                                    'filter' : 'alpha(opacity=100)',
                                    'opacity' : '1'
                                }, 2000 );
                        }
                        $("#content-active").fadeOut(500);
                        $.get( 'index.php' , 'ajaxPage=' + page , function (data) {
                            $("#content-active").fadeOut(500, function(){
                            $("#content-active").html(data).fadeIn(500);
                            $("#content-active").append('<div style="display:none;" id="curpage">' + page + '</div>' );
                        });
                        });
                } 
```

我相信这与#logo 中的负边距有关。

这是一个小错误，但它让我很烦。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:47:28.760

如果您将背景图像的位置设置为：

```
background-position: top right; 
```

..而不仅仅是在右边，它似乎工作正常。

# java - 在什么情况下 finally {} 块不会执行？

> ID：12430642
> 
> 赞同：34
> 
> 时间：2012-09-14T19:15:34.200
> 
> 标签：java, jvm, try-catch, try-catch-finally

在 Java`try{} ... catch{} ... finally{}`块中，`finally{}`无论 try/catch 中发生什么，通常都认为“保证”可以运行其中的代码。但是，我知道至少有两种情况下它*不会*执行：

*   如果`System.exit(0)`被调用；或者，
*   如果一直抛出异常到 JVM 并且发生默认行为（即`printStackTrace()`退出）

是否有任何其他程序行为会阻止`finally{}`块中的代码执行？代码将在什么特定条件下执行或不执行？

**编辑：**正如 NullUserException 指出的，第二种情况实际上是不正确的。我认为这是因为标准错误中的文本在标准输出之后打印，防止在不向上滚动的情况下看到文本。：） 道歉。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-14T19:22:40.777

如果你调用[`System.exit()`](https://docs.oracle.com/javase/8/docs/api/java/lang/System.html#exit-int-)程序立即退出而不`finally`被调用。

JVM 崩溃，例如分段错误，也将阻止最终被调用。即 JVM 在此时立即停止并生成崩溃报告。

无限循环也会阻止 finally 被调用。

finally 块总是在抛出 Throwable 时调用。即使您调用 Thread.stop() 会触发[`ThreadDeath`](https://docs.oracle.com/javase/8/docs/api/java/lang/ThreadDeath.html)在目标线程中抛出的 a。这可以被捕获（它是一个[`Error`](https://docs.oracle.com/javase/8/docs/api/java/lang/Error.html)）并且 finally 块将被调用。

* * *

```
public static void main(String[] args) {
    testOutOfMemoryError();
    testThreadInterrupted();
    testThreadStop();
    testStackOverflow();
}

private static void testThreadStop() {
    try {
        try {
            final Thread thread = Thread.currentThread();
            new Thread(new Runnable() {
                @Override
                public void run() {
                    thread.stop();
                }
            }).start();
            while(true)
                Thread.sleep(1000);
        } finally {
            System.out.print("finally called after ");
        }
    } catch (Throwable t) {
        System.out.println(t);
    }
}

private static void testThreadInterrupted() {
    try {
        try {
            final Thread thread = Thread.currentThread();
            new Thread(new Runnable() {
                @Override
                public void run() {
                    thread.interrupt();
                }
            }).start();
            while(true)
                Thread.sleep(1000);
        } finally {
            System.out.print("finally called after ");
        }
    } catch (Throwable t) {
        System.out.println(t);
    }
}

private static void testOutOfMemoryError() {
    try {
        try {
            List<byte[]> bytes = new ArrayList<byte[]>();
            while(true)
                bytes.add(new byte[8*1024*1024]);
        } finally {
            System.out.print("finally called after ");
        }
    } catch (Throwable t) {
        System.out.println(t);
    }
}

private static void testStackOverflow() {
    try {
        try {
            testStackOverflow0();
        } finally {
            System.out.print("finally called after ");
        }
    } catch (Throwable t) {
        System.out.println(t);
    }
}

private static void testStackOverflow0() {
    testStackOverflow0();
} 
```

印刷

```
finally called after java.lang.OutOfMemoryError: Java heap space
finally called after java.lang.InterruptedException: sleep interrupted
finally called after java.lang.ThreadDeath
finally called after java.lang.StackOverflowError 
```

注意：在每种情况下，线程都保持运行，即使在 SO、OOME、Interrupted 和 Thread.stop() 之后！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-14T19:18:28.800

块中的无限循环`try`。

*损坏的内存*？程序不再像写的那样运行？我实际上已经在 DOS 机器上调试过一次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-01T10:06:19.587

在 try 块中的不同语句中测试**finally**块。

```
 public static void main(String [] args){

    try{
        System.out.println("Before Statement");
        /*** Statement ***/
        System.out.println("After Statement");
    }
    catch(Exception e){
    }
    finally{
        System.out.println("Finally is Executed");
    } 
```

**执行 finally 块的**语句如下：

1.  `Thread.currentThread().interrupted();`
2.  `Thread.currentThread().destroy();`
3.  `Thread.currentThread().stop();`
4.  `Thread.sleep(10);`
5.  `Thread.currentThread().interrupt();`
6.  `Runtime.getRuntime().addShutdownHook(Thread.currentThread());`
7.  如果有任何异常发生。
8.  如果没有例外。

**不执行 finally 块的**语句如下：

1.  `Thread.currentThread().suspend();`
2.  `System.exit(0);`
3.  JVM 崩溃了。
4.  CPU 芯片的电源关闭。
5.  操作系统杀死 JVM 进程。
6.  `Runtime.getRuntime().exit(0);`
7.  `Runtime.getRuntime().halt(0);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T19:20:16.487

当 finally 本身抛出异常（或导致错误）时，有可能部分执行

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T19:41:15.907

一个可能是“A finally 是守护线程的一部分，它可能不会被执行”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-01T06:33:49.797

最终不会被调用的唯一时间是：

如果电源关闭

1.  如果你调用 System.exit()
2.  如果 JVM 先崩溃
3.  如果 try 块中有无限循环
4.  如果电源关闭

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-02T04:16:23.960

我认为当JVM由于任何原因突然退出时，这可能是导致控件不会进入finally块并且永远不会执行的原因。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-21T18:18:07.467

你可以让它成为守护线程的一部分。您可以使用`setDaemon(boolean status)`用于将当前线程标记为守护线程或用户线程的方法，并在需要时退出JVM。这将使您能够在`finally{}`执行之前退出 JVM。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-11-04T01:11:18.467

finally 块永远不会执行的另一个可能实例是由于在进入 try 块之前方法返回的设计，就像我不时看到的一些非常糟糕的代码的情况一样：

```
public ObjectOfSomeType getMeAnObjectOfSomeType() throws SomeHorrendousException {
    if (checkSomeObjectState()) {
        return new ObjectOfSomeType();
    }

    try {
        // yada yada yada...
    } catch (SomeHorrendousException shexc) {
        // wow, do something about this horrendous exception...
    } finally {
        // do some really important cleanup and state invalidation stuff...
    } 
```

我知道你们中没有人会这样做，所以我犹豫是否将其添加为可能的场景，但我想，嗯，今天是星期五，见鬼；)

# java - HttpRequestHandler : 发送文件作为响应

> ID：12430645
> 
> 赞同：0
> 
> 时间：2012-09-14T19:15:41.290
> 
> 标签：java, webserver, apache-httpcomponents

我正在使用 httpCore 来创建自己的基本 Web 服务器。在接收到来自用户的特定请求时，必须启动文件传输操作。我正在使用 HttpRequestHandler 处理请求。我的代码看起来像这样

```
private HttpRequestHandler mRequestHandler = new HttpRequestHandler()
{
    @Override
    public void handle(HttpRequest request, HttpResponse response, HttpContext httpContext) throws HttpException, IOException
    {
        try{
        HttpEntity entity=null;     
        String contentType="text/html";

        entity = new EntityTemplate(new ContentProducer()
                {
                    public void writeTo(final OutputStream outstream)throws IOException
                    {
                        OutputStreamWriter writer = new OutputStreamWriter(outstream, "UTF-8");
                        String resp = "Server is up and running";

                        writer.write(resp);
                        writer.flush();
                    }
                });

        ((EntityTemplate)entity).setContentType(contentType);

        response.setEntity(entity);
        }catch(Exception e)
        {
            e.printStackTrace();
        }

    }
}; 
```

这是一个非常基本的响应，但是我希望将文件从服务器传输到客户端计算机。如何发送文件作为响应？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T20:09:50.537

我自己想通了。如果有人偶然发现同样的问题，这就是我的工作方式。

```
private HttpRequestHandler mRequestHandler = new HttpRequestHandler()
    {

        @Override
        public void handle(HttpRequest request, HttpResponse response, HttpContext context)
                throws HttpException, IOException 
            {
            try{
                File file = new File("/mnt/sdcard/Music/song.mp3");
                FileEntity body = new FileEntity(file, "audio/mpeg");
                response.setHeader("Content-Type", "application/force-download");
                response.setHeader("Content-Disposition","attachment; filename=song.mp3");
                response.setEntity(body);

            }catch(Exception e)
            {
                e.printStackTrace();
            }

            }

    }; 
```

# c# - 查找经纬度模式

> ID：12430649
> 
> 赞同：0
> 
> 时间：2012-09-14T19:15:59.630
> 
> 标签：c#, sql-server-2008, design-patterns, latitude-longitude, shape

我在 SQL Server 数据库中有一系列纬度/经度点。我希望能够找到形状。我的意思是，如果在混乱的坐标中有 8 个坐标组成一个完美的圆，或者有 7 个坐标组成一个三角形，我想知道。

如果已经有一些东西可以做到这一点，我会感到惊讶，尤其是在 C#（我正在使用的语言）中。但我的问题是，我应该如何处理这个问题？

我可能有 200k，但它们有时间戳，所以我一次只能使用 1k...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T19:55:23.837

你需要找到一个库，或者发展你自己，一种在形状上[计算最小二乘的方法。](https://stackoverflow.com/questions/350852/least-squares-c-sharp-library)

如果误差幅度超过 R ²的阈值水平，那么您就没有那个“形状”。您需要为您测试的形状定义一个公式（例如圆形：x ² +y ² =r ²）。

对于没有曲线的东西（三角形、正方形等），因为它们没有“公式”，所以会更难做。您可以使用最小二乘法找到线条 ( `y=mX+b`) 的形状的每一侧，然后将这些线条组合在一起形成形状。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:27:34.913

您正在尝试做的事情称为[最小二乘拟合](http://mathworld.wolfram.com/LeastSquaresFitting.html)。

基本上，你选择一个形状。让我们现在选择一条直线。

您计算线中点的偏移量（“残差”）的平方和。你用不同的线来做这个，直到你最小化平方和。

我不知道如何为几种类型的形状自动执行此操作。

# cocos2d-iphone - Cocos2d 和 iOS：无法理解使用 ccBezierConfig 控制点的使用

> ID：12430651
> 
> 赞同：1
> 
> 时间：2012-09-14T19:16:07.177
> 
> 标签：cocos2d-iphone, ccsprite, uibezierpath

编辑：如果问题写得不好，请查看视频（[3](http://youtu.be/IQ_Jf0O0KGc)），与本页底部的链接相同。

我正在尝试使用**ccBezierConfig**和 Cocos2D 绘制一条非常简单的贝塞尔曲线。在 Wikipedia 上阅读时，我试图了解一些控制点并找到了这张图片：

[http://upload.wikimedia.org/wikipedia/commons/thumb/b/bf/Bezier_2_big.png/240px-Bezier_2_big.png](http://upload.wikimedia.org/wikipedia/commons/thumb/b/bf/Bezier_2_big.png/240px-Bezier_2_big.png)

如果您查看我从中获取图像的维基百科页面，则会有一个很酷的动画。看看[这里](http://en.wikipedia.org/wiki/Bezier_curve)。

这是我使用的代码：

```
 CCSprite *r = [CCSprite spriteWithFile:@"hi.png"];
        r.anchorPoint = CGPointMake(0.5f, 0.5f);
        r.position = CGPointMake(0.0f, 200.0f);

        ccBezierConfig bezier;
        bezier.controlPoint_1 = CGPointMake(0.0f, 200.0f);
        bezier.controlPoint_1 = CGPointMake(180.0f, 330.0f);
        bezier.endPosition = CGPointMake(320.0f,200.0f);

        id bezierForward = [CCBezierBy actionWithDuration:1 bezier:bezier];
        [r runAction:bezierForward];
        [self addChild:r z:0 tag:77]; 
```

该应用程序在纵向模式下运行，我的猜测与[1](http://upload.wikimedia.org/wikipedia/commons/thumb/b/bf/Bezier_2_big.png/240px-Bezier_2_big.png)的控制点相匹配，而我的代码中的控制点是：

```
sprite.position should correspond to P0
bezier.controlPoint_1 should correspond to P0 
bezier.controlPoint_2 should correspond to P1
bezier.endPosition  should correspond to P2 
```

我确实尝试了两种方法。通过设置精灵的位置而不是设置它。

我假设位置应该与 controlPoint_1 相同，因为在维基百科架构[1](http://upload.wikimedia.org/wikipedia/commons/thumb/b/bf/Bezier_2_big.png/240px-Bezier_2_big.png)中只有三个点。

**我得到一个我不太明白的输出。我制作了一个小视频，是一个私人 youtube 视频：**

**[看视频点击这里](http://youtu.be/IQ_Jf0O0KGc)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:37:07.933

好吧，答案很简单……

**[二次贝塞尔曲线](http://en.wikipedia.org/wiki/B%C3%A9zier_curve#Quadratic_curves)**不是 cocos2d 绘制的。相反，请检查相同的 wiki 页面以了解**[三次贝塞尔曲线](http://en.wikipedia.org/wiki/B%C3%A9zier_curve#Higher-order_curves)**。这才是你应该看的。

1.  初始位置是精灵的位置（P0）
2.  控制点 1 和 2 分别是 P1 和 P2。
3.  终点就是终点。

不错的视频，顺便说一句，我喜欢它 xD。

* * *

来自`CCActionInterval.h`cocos2d 库中文件的证据：

```
/** An action that moves the target with a cubic Bezier curve by a certain distance.
 */
@interface CCBezierBy : CCActionInterval <NSCopying>
{
    ccBezierConfig config;
    CGPoint startPosition;
} 
```

* * *

[此链接](http://www.cse.unsw.edu.au/~lambert/splines/Bezier.html)应该可以帮助您直观地构建**[三次贝塞尔曲线](http://en.wikipedia.org/wiki/B%C3%A9zier_curve#Higher-order_curves)**，而不是调整值并运行应用程序。

# cluster-analysis - 聚类/最近邻

> ID：12430655
> 
> 赞同：1
> 
> 时间：2012-09-14T19:16:35.657
> 
> 标签：cluster-analysis, nearest-neighbor

我有来自 5 到 6 个不同来源的数千到一万个数据点 (x,y)。我需要根据一定的距离标准对它们进行唯一分组，这样形成的组应该只包含来自每个源的一个输入，并且组中的每个输入都应该在一定的距离 d 内。组成的组应该是最好的匹配。

1.  这是聚类和最近邻居的组合吗？
2.  对算法有什么建议？
3.  有没有可用的开源代码？

我看到很多参考资料都说 KD 树实现和 k-clustering 等。我不确定如何根据这个特定需求进行定制。

# python - 格式化作为字符串的python数字

> ID：12430658
> 
> 赞同：-1
> 
> 时间：2012-09-14T19:16:43.330
> 
> 标签：python

我有一个数字形式（如何从电子表格中解析）：

```
4.10045710008e+12 <type 'float'> 
```

我如何将其转换为整数：

```
4100457100080 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T19:18:18.783

```
f = 4.10045710008e+12
i = int(f) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:21:33.573

也更简单

```
a=int(4.10045710008e+12) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T19:18:35.573

```
if type(value) == float:
    value = int(value) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T19:26:43.290

```
>>> f = 4.10045710008e+12

>>> type(f)

<type 'float'>

>>> int(f)

4100457100080L

>>> 
```

# php - 有人可以解释如何在将 html 输入值写入 .txt 文件的 php 脚本之后重定向 url

> ID：12430659
> 
> 赞同：1
> 
> 时间：2012-09-14T19:16:57.133
> 
> 标签：php, javascript

我有一个获取用户详细信息的表单元素和一个将这些输入写入 .txt 文件的 php 脚本。我遇到的问题是在完成 php 脚本后，url 重定向到 http://。. ./the.php 并显示一个空白页面 - 我对服务器端脚本非常陌生，但我试图做的是允许用户输入数据并将该数据存储在一个文本文件中，这个文本文件应该由几个不同的多天收集的输入

```
<?php
if(isset($_POST['aDate'])) {
$aDate = $_POST['aDate'];
$fp = fopen("details.txt",  "a");
fputs($fp, "date: $aDate");
fclose($fp);
?>

<form action="txtWrite.php" method="POST" onSubmit="detail()">
<input id="datepicker" name='aDate' type="text" class="time"/>
. . . 
```

我已经通过在 php 脚本中添加 echo($aDate) 来测试输入值并检查它，那么我如何重定向回允许将更多用户输入添加到文本文件的 html 页面？如果你能理解我想要完成的事情并有一条替代路线，我会全神贯注。感谢您花时间帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:20:11.013

我想你正在寻找`header('Location:page.php');`你会使用的：

```
<?php
if(isset($_POST['aDate'])) {
  $aDate = $_POST['aDate'];
  $fp = fopen("details.txt",  "a");
  fputs($fp, "date: $aDate");
  fclose($fp);
  header('Location:page.php');
}
?>

<form action="txtWrite.php" method="POST" onSubmit="detail()">
<input id="datepicker" name='aDate' type="text" class="time"/>
. . . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:20:36.750

`header("Location: http://www.yousite.com/yourscript.html");`

# function - 在 Haskell 中创建多态函数

> ID：12430660
> 
> 赞同：10
> 
> 时间：2012-09-14T19:16:58.833
> 
> 标签：function, haskell, polymorphism

简短的搜索并没有帮助我找到答案，所以我开始怀疑它的存在。问题很简单。我想创建一个多态函数，如下所示：

```
f :: String -> String
f s = show (length s)

f :: Int -> String
f i = show i 
```

意味着针对不同数据类型定义不同的函数。可能吗？如果是，如何？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-14T19:21:11.990

Haskell 中有两种多态性：

*   参数多态性；和
*   有界多态性

第一个是最通用的——一个函数是参数多态的，如果它对所有类型的行为一致，至少在它的一个类型参数中。

例如，该函数`length`是多态的——它返回一个列表的长度，不管它的列表中存储的是什么类型。

```
length :: [a] -> Int 
```

多态性由小写类型变量指示。

现在，如果您希望对特定类型*集*具有自定义行为，那么您就有了有界多态性（也称为“ad hoc”）。在 Haskell 中，我们为此使用类型类。

该类声明了哪些函数将在一组类型中可用：

```
class FunnyShow a where
    funnyshow :: a -> String 
```

然后您可以为您关心的每种类型定义实例：

```
instance FunnyShow Int where
    funnyshow i = show (i+1) 
```

有可能：

```
instance FunnyShow [Char] where
   funnyshow s = show (show s) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-14T19:27:29.333

以下是使用类型族实现类似功能的方法。

好吧，如果您具有相同的返回类型，那么您可以在不使用类型系列的情况下实现该行为，而只需按照 Don 的建议仅使用类型类。

但是当您想要支持更复杂的即席多态性时，最好使用类型族，例如每个实例的不同返回类型。

```
{-# LANGUAGE FlexibleInstances #-}
{-# LANGUAGE TypeSynonymInstances #-}
{-# LANGUAGE TypeFamilies #-}

class F a where
    type Out a :: * 
    f :: a -> Out a

instance F String where  
    type Out String = String
    f = show . length

instance F Int where 
    type Out Int = String 
    f = show 

instance F Float where 
    type Out Float = Float
    f = id 
```

在 ghci

```
*Main> f (2::Int)
"2"

*Main> f "Hello"
"5"

*Main> f (2::Float)
2.0 
```

# ruby-on-rails - 自定义验证：从 accept_nested_attributes_for 创建的模型中引用父关联

> ID：12430661
> 
> 赞同：2
> 
> 时间：2012-09-14T19:16:59.473
> 
> 标签：ruby-on-rails, validation, nested-attributes

仅当问题类型为“选择”或“复选框”时，我才需要验证标题的存在：

```
class Answer < ActiveRecord::Base
  belongs_to :question
  attr_accessible :title

  validate :need_title?

  private
  def need_title?
     errors.add(:need_title, "")) if 
     ((question.type_of_answer == 'select' || question.type_of_answer == 'checkboxes') && title.blank?)
  end
end

class Question < ActiveRecord::Base
  has_many :answers

  accepts_nested_attributes_for :answers, :allow_destroy => true

  validates_presence_of :title
end 
```

但是当我创建对象时，我得到了这个异常：

```
NoMethodError: undefined method `type_of_answer' for nil:NilClass 
```

为什么`question`在验证`nil`期间`Answer#need_title?`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T19:32:14.793

我假设您正在使用嵌套答案创建问题。对于新创建的答案，它的`question`关联是`nil`。[这是一个解决根本原因](https://stackoverflow.com/questions/1896014/rails-how-can-i-access-the-parent-model-of-a-new-records-nested-associations)的老问题。

以下是使用自定义构建方法设置父对象的方法：

```
class Question < ActiveRecord::Base
  has_many :answers do
    def build(*args)
      answer = super
      answer.question = self.proxy_owner
      answer
    end
  end

  # ...
end 
```

当从嵌套属性构造新答案时，这应该分配反向关联（从答案到问题），并且您的验证器将按`question`预期得到非 nil。

# jquery - Django+Ajax+jQuery 问题

> ID：12430666
> 
> 赞同：0
> 
> 时间：2012-09-14T19:17:18.147
> 
> 标签：jquery, python, ajax, django

我终于让它与返回 json 数据的主视图一起工作......但现在我试图让它执行其他视图，但我无法让它工作！

当我尝试调用 ajax() 时，我从 amishbot/update 收到 server500 错误

代码：

我的 Ajax 脚本：

```
function sayHello(data){
    alert(data.message);
}    

function ajax(){
    $.ajax({
        type: 'POST',
        url: '/amishbot/update',
        success:func})}

//this is what is called in the html:
onlick="ajax(sayHello);" 
```

我的观点：

```
from django.shortcuts import render_to_response
from django.utils import simplejson
from django.http import HttpResponse, HttpResponseRedirect

def home(request):
    if request.is_ajax():
        d = { 'message':'HELLO!' }
        return HttpResponse(simplejson.dumps(d), mimetype="application/json")

    return render_to_response('amish/index.html')

def update(request):
    if request.is_ajax():
        d = {'message':'YALL'}
        return HttpResponse(simplejson.dumps(d), mimetype="application/json")

    return render_to_response('amish/index.html') 
```

阿米什/urls.py：

```
from django.conf.urls.defaults import *
urlpatterns = patterns('amish.views',
    (r'^$','home'),
    (r'^update/$', 'update')
) 
```

网址.py：

```
urlpatterns = patterns('',
    (r'^media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT }),
    url(r'^', include('amish.urls')),
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T19:31:40.337

您是否需要在您的根目录`urls.py`下包含您的 amishbot urls.py 名称`amishbot/`

`(r'^amishbot/', include('amish.urls')),`

# php - PHP 中是否有对 $_FILES 的预定义上传限制？

> ID：12430667
> 
> 赞同：0
> 
> 时间：2012-09-14T19:17:20.813
> 
> 标签：php, file, upload

嗨，我对 HTML、PHP、MySQL 等还是很陌生。我想知道是否有使用`$_FILES`. 我问是因为当我尝试上传 8 张大约 1.5 兆字节的图像时，代码不起作用，但是当我上传 10 张大约 60 KB 的图像时，代码可以正常工作。这是我的代码，请随时对它提出任何批评/评论：

```
</head>
<body>
<form action="test.php" method="POST" enctype="multipart/form-data" >
    <input type="file" name="image[]" multiple="multiple">
    <input type="submit" value="upload">
</form>    

<?php

include 'connect.php';

if(!empty($_FILES['image']['tmp_name'])){

    $allowed = array('jpg', 'gif', 'png', 'jpeg');
    $count = 0;
    foreach($_FILES['image']['name'] as $key => $name){

    $image_name = $name;
    $tmp = explode('.', $image_name);

    $image_extn = strtolower(end($tmp)); //can only reference file
    $image_temp = $_FILES['image']['tmp_name'][$count];
    $count = $count +1;

    if(in_array($image_extn, $allowed) === true){

        $image_path = 'images/' . md5($image_name) . '.' . $image_extn;

        move_uploaded_file($image_temp, $image_path);

        mysql_query("INSERT INTO store VALUES ('', '$image_name', '$image_path')") or die(mysql_error());

        $lastid = mysql_insert_id();
        $image_link = mysql_query("SELECT * FROM store WHERE id = $lastid");
        $image_link = mysql_fetch_assoc($image_link);
        $image_link = $image_link['image'];
        $uploaded[] = $image_link;

        }
        else{
            echo 'Incorrect file type. Allowed: ';
            echo implode(', ', $allowed);
            }
        }
    }        

    if(!empty($uploaded)){
        foreach($uploaded as  $new){
            echo "<a href = $new>$new</a><p></p>";

        }
    }
else{
        echo "Please select an image.";
    }
?>  
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-15T13:10:12.073

您正在尝试上传文件数组，由于[max_file_uploads](http://php.net/manual/en/ini.core.php#ini.sect.file-uploads)限制`php.ini`默认设置为`20`.

所以你必须增加这个限制才能上传超过 20 个文件。

**注意**：`max_file_uploads`不能在 php.ini 之外更改。请参阅[PHP“错误”#50684](http://bugs.php.net/bug.php?id=50684&edit=1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T19:19:10.173

以下是您要在 php.ini 中更改的设置：

**post_max_size** 此设置控制 HTTP 帖子的大小，需要设置为大于 upload_max_filesize 设置。

**upload_max_filesize** 此值设置上传文件的最大大小。

请记住在进行这些更改后重新启动您的 Web 服务器。

参考：

*   [http://www.php.net/manual/en/ini.core.php#ini.post-max-size](http://www.php.net/manual/en/ini.core.php#ini.post-max-size)
*   [http://www.php.net/manual/en/ini.core.php#ini.upload-max-filesize](http://www.php.net/manual/en/ini.core.php#ini.upload-max-filesize)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T19:19:19.603

php.ini 中的一些设置可能会导致此问题。查看 memory_limit、post_max_size、upload_max_filesize。你也可能超时。具体找出的最好方法是`error_reporting(E_ALL);ini_set('display_errors','1');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T19:22:13.933

在 php.ini 中，会有一个`post_max_size`and`upload_max_filesize`指令。

您还应该根据[http://www.php.net/manual/en/features.file-upload.post-method.php](http://www.php.net/manual/en/features.file-upload.post-method.php)`MAX_FILE_SIZE`在表单中定义隐藏输入

# css - ExtJs：通过css样式应用高度和宽度不起作用

> ID：12430668
> 
> 赞同：2
> 
> 时间：2012-09-14T19:17:28.130
> 
> 标签：css, extjs, height, width

我有以下代码：

```
var win = new Ext.Window({
width:200,
height:200, 
autoScroll: true,
closable: false,
border: false,
shadow: true,
draggable: false
});

win.show(); 
```

我想用css样式来设置宽度和高度，看下面的代码：代码：

```
var win = new Ext.Window({   
cls: 'test-class',
autoScroll: true,
closable: false,
border: false,
shadow: true,
draggable: false
});

win.show(); 
```

CSS样式类：

```
.test-class {
 height:200px; 
 width:200px;
 background:blue;
 }​ 
```

但是没有设置高度和宽度，而是背景是的。

你能告诉我如何通过css样式类设置宽度和高度吗？我正在使用 ExtJs。4.0。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T19:39:47.527

Ext 正在设置内联高度，它会覆盖您的 CSS。

您可以添加`!important`到您的 CSS 属性，这将强制它们覆盖内联样式，或者在创建 Ext 窗口时在配置中显式设置大小，就像在您的第一个代码块中一样。

# java - Java InterruptedException 挂起线程？

> ID：12430669
> 
> 赞同：3
> 
> 时间：2012-09-14T19:17:40.863
> 
> 标签：java, java.util.concurrent

对于任何 Java Master 来说，这应该是一个简单的做法。作为一个新手，我只想确认一件事。

我有一个实现 Runnable 的类，并且像许多这样的类一样，它的 run() 方法有一个无限循环。我想做一些任务，然后睡一分钟，然后再回来。

如果在线程休眠时遇到中断异常会发生什么？

我认为会发生的是线程被挂起，现在无限循环无助于保持线程运行。我想确认我的理解是否正确。

如果发生这种情况，重新启动线程的可能解决方案是什么。？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T19:20:25.430

错误的。
An`InterruptedException`只会终止`sleep()`调用并引发异常。
只要您适当地处理异常，您的线程就会继续运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T19:22:48.823

您的理解大部分是正确的 - 当您的线程处于睡眠状态时，如果它被中断，这将导致 an`InterruptedException`被抛出 - 您的代码`run()`必须捕获它并执行它想做的事情。线程本身不会被挂起 - 因为在该线程上继续执行活动。

`InterruptedException`处理完catch 块后，您可能希望继续执行线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T19:37:48.287

线程不会被挂起。

如果您捕获`InterruptedException`，将在您的异常处理程序中继续执行。

如果你没有抓住`InterruptedException`，线程将终止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T19:41:09.373

InterruptedExceptions 不只是发生。一些异常，如 IOExceptions，由于介质固有的易碎性而无法预测地发生，但中断并非如此。

中断是对线程的故意信号，通常由应用程序在关闭时发送，它应该完成它正在做的事情并停止运行。如果被中断的线程当时恰好在等待或休眠，则线程被唤醒，并且从等待或休眠方法中抛出 InterruptedException。

java.util.concurrent 和 guava 等有用的库使用中断来取消线程。如果您尝试将它们用于其他用途，那么您将无法使用这些库。

# javascript - 右键单击在 Firefox 中不断传播

> ID：12430682
> 
> 赞同：2
> 
> 时间：2012-09-14T19:18:40.067
> 
> 标签：javascript, firefox, right-click, stoppropagation

我刚刚注意到一些不寻常的事情。这就是我想要完成的：

*   我希望在单击链接时显示 div

*   当我单击文档中的其他位置时，我希望 div 消失

*   当我单击 div 本身时，我不希望它消失

像这样的东西：

[http://jsfiddle.net/XPmyF/](http://jsfiddle.net/XPmyF/)

JS：

```
(function() {
    var box = $('#box');
    $(document).on('click', function() {
        if (box.css('display') == 'block') {
            box.css('display', 'none');
        }
    });
    $('#start').on('click', function(e) {
        box.css({
            'text': 'Box',
            'position': 'absolute',
            'top': '50px',
            'left': '0',
            'background': '#EEE',
            'border': '1px solid #555',
            'width': '200px',
            'height': '50px',
            'display': 'block'
        });
        e.stopPropagation();
    });

    box.on('click', function(e) {
        e.stopPropagation();
    });
})();​ 
```

那个小提琴工作得很好，但是当我在 Firefox (15.0.1) 中测试它时，如果你右键单击 div，它就会消失，这不是我正在寻找的行为。似乎 stopPropagation() 适用于单击，但不适用于 Firefox 中的右键单击。Chrome 会阻止右键单击传播到文档。

我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T19:26:07.800

使用 event.which 方法来检测点击了哪个按钮。[这是jsfiddle](http://jsfiddle.net/jgBRf/)中的一个示例。

```
$(document).on('click', function(event) {
    if (event.which == 1 && box.css('display') == 'block') {
        box.css('display', 'none');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:21:53.933

编辑为实际工作...

很抱歉，活动没有按预期进行。你可以用鼠标悬停来处理它。

```
(function() {
var box = $('#box');
var clicky = true;
$(document).on('click', function() {
    if (box.css('display') == 'block' && clicky) {
        box.css('display', 'none');
    }
});
$('#start').on('click', function(e) {
    box.css({
        'text': 'Box',
        'position': 'absolute',
        'top': '50px',
        'left': '0',
        'background': '#EEE',
        'border': '1px solid #555',
        'width': '200px',
        'height': '50px',
        'display': 'block'
    });
    e.stopPropagation();
});
box.mouseenter(function(e) {
    clicky = false;
});    
box.mouseout(function(e) {
    clicky = true;
});

})(); 
```

# c# - 依赖 SessionManager 类的单元测试代码，该类依赖于 HttpContext.Current

> ID：12430696
> 
> 赞同：0
> 
> 时间：2012-09-14T19:19:32.387
> 
> 标签：c#, unit-testing, session, httpcontext

我在现有应用程序中有一个 SessionManager 类，如下所示：

```
public class SessionManagerBase<TKey>
{
    public static void AddItem(TKey key, object item)
    {
        _httpContext.Session[key.ToString()] = item;
    }

    public static T GetItem<T>(TKey key)
    {
        object item = _httpContext.Session[key.ToString()];
        return item == null ? default(T) : (T) Convert.ChangeType(item, typeof (T));
    }

    // etc...

    private static HttpContextBase _httpContext
    {
        get
        {
            return new HttpContextWrapper(HttpContext.Current);
        }
    }
} 
```

在我的 HomeController 中，我有如下代码：

```
public ActionResult Landing(string id)
{
    SessionManager.GetItem<Campaign>(SessionKeys.Campaign)

    // commented for brevity

    return View("Index");
} 
```

当我对 Landing 方法运行单元测试时，测试失败，因为 HttpContext.Current 为空。我在单元测试中模拟了 Session 对象，如果我尝试直接在 Landing 方法中访问 Session（即 Session["SomeValue"]），它可以工作，但是任何依赖 SessionManager 的代码都会被破坏。

底线是我想要一个可以用来以通用、强类型的方式访问 Session 值的类，但这也可以进行单元测试。有人对我如何修改此代码以实现此目的有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:22:17.303

如果您已经在测试的 HttpContextBase 中模拟了 Session，那么您需要做的就是更改`SessionManager`以接受您的自定义 HttpContextBase（例如，在`[ThreadStatic]`字段中）

或者，将`SessionManager`类本身设为非`static`，并将其`HttpContextBase`作为构造函数参数。

一般来说，你永远不应该使用`HttpContext.Current`. 如果您希望您的代码可测试或可重用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:33:12.733

您只能通过引入另一个抽象层来使其可测试。那是您自己的 IOurHttpContext 和 OurDotNetHttpContext : IOurHttpContext 用于真实应用程序和 OurTestHttpContext : IOutHttpContext 用于测试（后者不需要 moq）。OurDotNetHttpContext 可能如下所示：

```
public interface IOutHttpContext {
    object GetSessionVar( string key );
    void SetSessionVar( string key, object value );
}
public class OurDotNetHttpContext : IOutHttpContext {
    public object GetSessionVar(string key) { return HttpContext.Current.Session[key]; }
    public void SetSessionVar(string key, object value) { HttpContext.Current.Session[key] = value; }
} 
```

挺容易。虽然它可能更复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T23:05:06.357

您可以将 HttpContext.Current 设置为您的 _httpContext

# javascript - 在 keyup 上显示表单域

> ID：12430699
> 
> 赞同：0
> 
> 时间：2012-09-14T19:19:41.943
> 
> 标签：javascript, onkeyup

我一生都在尝试在具有特定输入（数字 4 及更高）的表单中显示隐藏字段。

JS：

```
function showStuff(id) {
    document.getElementById(id).style.display = 'block';
} 
```

HTML：

```
<tr valign="top">
    <td <? if(strstr($Error,"intern_openings")){ ?> class="error" <? } ?>>*Number of Interns/<br>Available positions:</td>
    <td colspan="2"><input type="text" name="intern_openings" size="3" maxlength="3" value="<?=$intern_openings?>" onkeyup="javascript:showStuff('supervisorname')"><br />
    <div id="supervisorname" style="display:none;">
    <br />
        Names of intern supervisors (employer staff):<br />
        <input type="text" name="supervisor[]" value="<?=$supervisor?>" <? if(strstr($supervisorList)){ ?> <? } ?>><br />
        <input type="text" name="supervisor[]" value="<?=$supervisor?>" <? if(strstr($supervisorList)){ ?> <? } ?>><br />
        <input type="text" name="supervisor[]" value="<?=$supervisor?>" <? if(strstr($supervisorList)){ ?> <? } ?>><br />
        <input type="text" name="supervisor[]" value="<?=$supervisor?>" <? if(strstr($supervisorList)){ ?> <? } ?>>
    </div>
    </td>
</tr> 
```

任何见解都将是完全激进的。

# json - 是否有 json 文件的预处理器？

> ID：12430702
> 
> 赞同：1
> 
> 时间：2012-09-14T19:19:58.870
> 
> 标签：json, preprocessor, configuration-files

我有一些配置文件，我将复杂的对象值存储为序列化的 json。目前，每个环境（localhost、dev、prod 等）和客户端的每次安装都有一个配置文件。大多数值对于环境之间的配置是相同的，但不是全部。因此，对于三个环境和四个客户端，我目前总共需要管理 12 个文件。

如果这是一个 web.config 文件，就会有 web.config 转换来解决问题。如果这是 c#，我将有编译器预处理器指令，可用于根据当前构建配置替换不同的值。

有没有人知道任何基本上以这种方式工作的东西，或者对经过验证的真实方法有一些好的建议？我想要的是将文件数量减少到每个安装的单个实例，这足以满足每个环境。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:25:16.843

配置的配置对我来说似乎总是有点过头了，但是您可以使用属性文件来处理更改的部分，并使用 apache ant 的`<replace>`任务来进行替换。像这样的东西：

```
<replace 
    file="configure.json"
    propertyFile="config-of-config.properties">
  <replacefilter 
    token="@token1@" 
    property="property.key"/>
</replace> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-09T12:49:22.197

[来自 Google 的Jsonnet](http://jsonnet.org/)是一种具有基于 JSON 的超集语法的语言，添加了有助于在 JSON fromat 中建模数据的高级语言功能。编译步骤生成 JSON。我在一个项目中使用它来描述复杂的部署环境，这些环境有时会相互继承，并且共享域属性，尽管从一个实例到另一个实例使用它们的方式不同。例如，一个实例包含应用程序、这些应用程序的租户订阅、合同、目的地等。所有这些属性的值都是在整个环境中重复出现的对象。

他们的文档非常详尽，不会错过[std 函数](http://jsonnet.org/docs/stdlib.html)，因为它们提供了一些非常强大的数据渲染功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-30T16:08:45.363

我编写了一个[Squirrelistic JSON 预处理器](https://github.com/Squirrelistic/sjpp)，它使用[Golang 文本模板语法](https://golang.org/pkg/text/template/)根据提供的参数生成 JSON 文件。

JSON 模板可以包含对其他模板的引用、使用条件逻辑、注释、变量以及 Golang Text 模板包提供的所有其他内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T19:38:48.300

这真的归结为你的全部堆栈。

如果您正在谈论一些仅在客户端运行而没有服务器端处理的应用程序，那么实际上没有预处理之类的东西。您可以在实际使用数据之前进一步处理数据，但这并不意味着它将在提供页面之前进行处理——这意味着人们必须坐在那里，等待在需要它的应用程序之前发生这种情况数据可以初始化。

首先使用 JSON 的好处是它只是一个数据存储，并且与语言完全无关，并且现在得到了广泛的支持。因此，如果它不是 100% 客户端，则没有什么可以阻止您以您在服务器上使用的任何语言进行预处理，并缓存这些文件的这些版本，以根据用户的需要服务（和缓存）给用户.

如果您真的非常需要一个系统来在客户端对配置文件进行实时处理，并且您已经完成了创建应用程序视图的工作，这些视图会提前加载，但会向用户显示他们正在推迟初始化（即：“正在加载...”/spinners），然后下载第二个 JSON 文件，其中包含所有需要的特定于实现的数据（您将拥有 12 个这样的小文件，应该易于管理），将两个 JSON 文件解析为 JS 对象，并使用辅助文件中的附加数据扩展大型配置对象。

**请注意：**使用 localhost 或其他一些存储设施来缓存它，这样对于 html5 浏览器，这种较长的加载只会发生一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-20T16:17:46.567

有一个，[https://www.npmjs.com/package/json-variables](https://www.npmjs.com/package/json-variables)

从概念上讲，它是一个函数，它接受*一个字符串*，JSON 内容，撒上特殊标记的变量，并生成一个解析了这些变量*的字符串。*就像**Sass**或**Less**对 CSS 所做的一样 - 它用于干燥源代码。

这是一个例子。

你会在 JSON 文件中添加这样的内容：

```
{
  "firstName": "customer.firstName",
  "message": "Hi %%_firstName_%%",
  "preheader": "%%_firstName_%%, look what's inside"
} 
```

注意它是如何干燥的——价值的单一真实来源`firstName`。

`json-variables`会将其处理为：

```
{
  "firstName": "customer.firstName",
  "message": "Hi customer.firstName",
  "preheader": "customer.firstName, look what's inside"
} 
```

也就是说，`Hi %%_firstName_%%`将`firstName`在根级别查找（但同样，它可能是更深的路径，例如`data1.data2.firstName`）。还解决“冒泡”到根级别，您还可以使用自定义数据结构等等。

JSON 处理任务难题的缺失部分是：

*   意味着合并多个 JSON 文件，各种方式（[object-merge-advanced](https://www.npmjs.com/package/object-merge-advanced)）
*   编排动作的方法——如果你喜欢的编程语言是 JS ， [Gulp就很好](https://gulpjs.com/)
*   表示通过路径获取/设置值（[对象路径](https://www.npmjs.com/package/object-path)- 它的符号只使用点，没有括号`key1.key2.array.2`代替`key1.key2.array[2]`）
*   意味着在一组 JSON 文件中维护相同的一组键 - 你在一个中添加一个键，它被添加到所有其他文件（[object-fill-missing-keys](https://www.npmjs.com/package/object-fill-missing-keys)）

在所描述的情况下，我们至少可以采用两种方法：一对多或多对多。

以前 - Gulp 可以从一个或多个类似 JSON 的源文件中“烘焙”许多 JSON 文件，`json-variables`从而干燥参考。

稍后 - 或者，它可以是“托管”的 JSON 文件集，呈现为一组分发文件 - Gulp 监视`src`文件夹，运行[object-fill-missing-keys](https://www.npmjs.com/package/object-fill-missing-keys)以规范化模式，甚至可能对对象进行排序（是的，有可能，[排序对象](https://github.com/domenic/sorted-object)）。

这一切都取决于所需的 JSON 文件集的相似程度以及如何自定义值以及是手动完成还是以编程方式完成。

# android - 为什么来电号码在 Intent extra TelephonyManager.EXTRA_INCOMING_NUMBER 中为空？

> ID：12430704
> 
> 赞同：4
> 
> 时间：2012-09-14T19:20:03.217
> 
> 标签：android, telephonymanager

我有一个用意图过滤器“android.intent.action.PHONE_STATE”定义的广播接收器。它主要可以很好地从意图中获取电话号码，但有时，相当随机，它在某些手机上会失败。它看起来像一些固件错误。有没有人遇到过同样的问题，知道实际原因是什么，如何应对？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-14T20:30:49.257

我用过类似的东西......而且我使用它没有问题......

```
 IntentService = new Intent(context, PlayService.class).setAction("outgoing_call");
            IntentService.putExtra("phone_number",intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER));            
            context.startService(IntentService); 
```

# android - 像 Instgram 这样的 SherlockAction Bar 主题？

> ID：12430705
> 
> 赞同：1
> 
> 时间：2012-09-14T19:20:09.017
> 
> 标签：android, actionbarsherlock

我正在使用 Instagram Android 应用程序。可以在[此处](http://cdn.thenextweb.com/wp-content/blogs.dir/1/files/2012/04/Screenshot_2012-04-03-09-33-01.png)找到屏幕截图。如果您注意到左手角包含一个后退箭头，然后是一个分隔线。屏幕名称在它旁边，但不可点击。我已将 ActionBarSerlock 集成到我的项目中。我怎样才能做到这一点？

亲切的问候

# google-app-engine - Google-App-Engine 上的 Grails - 它死了吗？

> ID：12430706
> 
> 赞同：30
> 
> 时间：2012-09-14T19:20:08.643
> 
> 标签：google-app-engine, grails, groovy

[为了在Google 的 AppEngine](https://developers.google.com/appengine/)上创建一个网络应用程序，我一直在寻找一个框架。在我的研究过程中，我遇到了 Groovy 和[Grails](http://grails.org/)。我是一个 Java 类型的人，所以我更喜欢 Python 框架（如[Django](https://www.djangoproject.com/)）之上的类似 Java 的东西。所以我收集了一些信息，并决定 Groovy 和 Grails 都符合我的喜好。

在尝试结合 AppEngine 更深入地研究 Grails 时，我发现[Grails GAE 插件](http://www.grails.org/plugin/app-engine)已经两年没有更新了，并且在网站上它说它“适用于最新的 Grails 1.3 RC2 及更高版本”[ [3](http://www.grails.org/plugin/app-engine) ]。Grails 的最新版本（截至今天）是 2.1.1[ [4](http://grails.org/) ]。所以我想知道插件是否仍在维护。当然，插件可能*非常*好，不需要维护 - 但根据我的经验，这看起来真的是插件死了。

所以我想知道是否有人目前正​​在使用（或最近使用过）AppEngine 上的最新版本的 Grails，以及它是否是一个痛苦的......指尖或坚实的框架。

如果您认为 App-Engine 上的 Grails 已死，我真的很想听听替代方案，所以请告诉我您是否在 AppEngine 上使用过框架，您使用了什么以及体验如何。

更准确地说明我的要求；我想使用的框架应该

*   类似于 Java 或 Java
*   在 Google AppEngine 上运行
*   有一定程度的脚手架机制（在编写可以轻松生成的代码时，我真的很懒惰）
*   通过提供可靠的 NoSQL 持久层，消除使用 SQL 处理数据库的痛苦

在您在答案中链接任何其他 Stackoverflow 帖子之前，请注意，在提出此问题之前，我已经对 stackoverflow 进行了研究，遗憾的是我没有找到最新信息 - 当然我可能忽略了一些东西，但请不要链接超过一年的文章，在这里没有帮助。

很抱歉文字很长，如果您喜欢并认为有必要，请缩短。

预先感谢您提供有用的答案。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-14T19:59:17.953

我使用上面提到的插件在 App Engine 上试用了 Grails。我写了[一系列关于它的博客文章](http://globalgateway.wordpress.com/2010/10/17/grails-on-google-app-engine-part-1-a-case-study/)。我认为 Grails App Engine 插件不再得到积极维护。

我个人切换到[Gaelyk](http://gaelyk.appspot.com/)，它是一个用 Groovy 编写的用于 App Engine 的轻量级 Web 工具包。它应该满足您的所有要求。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-17T03:37:31.523

适用于 Grails 的 App Engine 插件尚未针对 2.X 进行更新。可以在[此处找到 Graem Rocher 的公告](http://permalink.gmane.org/gmane.comp.lang.groovy.grails.user/121976)

当您尝试针对 2.1.1 运行应用程序时，Grails 当前会引发错误。[这里](http://jira.grails.org/browse/GPAPPENGINE-81)提出了一个与此有关的问题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T11:36:33.590

我很久以前就用 Google App Engine 尝试过 Grails。正如之前的答案所述 - 没有当前版本的插件。但是，如果这是您可以考虑的选项，请尝试 CloudFoundry 服务。它与 Grails 完全兼容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-27T08:54:01.097

2017 年更新：Grails 3.2.9 有一个新教程

[http://guides.grails.org/grails-google-cloud/guide/index.html](http://guides.grails.org/grails-google-cloud/guide/index.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T22:44:42.153

将[Play Framework](http://www.playframework.org/)视为 Web 应用程序的轻量级框架。

# php - 单击链接时设置会话变量

> ID：12430715
> 
> 赞同：1
> 
> 时间：2012-09-14T19:20:46.007
> 
> 标签：php, javascript, ajax, jquery

当单击任何一组链接时，我想将会话变量设置为 0。为此，我在我的 javascript 文件中添加了以下内容：

```
$(window).load(function () {
    $("#hdr li a").click(function () {
        $.ajax({
            type: "POST",
            url: "clear.php",
            data: "width=0"
        });
    });
}); 
```

（忽略数据：“width=0”...我不在 clear.php 中使用这些数据。我把它放在那里是因为我想也许我必须指定一个数据字段。）

在文件'clear.php'中，我只有：

```
<?php session_start();

$_SESSION['name'] = 0;

?> 
```

所以，这个想法是，当点击#hdr li 中的任何链接时，用户应该被带到链接指向的页面，通过 clear.php 将会话变量设置为 0。

这适用于某些浏览器（Firefox 和 Chrome），但不适用于其他浏览器（例如，Safari）。

这是实现我想要的标准/正确方法吗？还有，浏览器是怎么知道访问clear.php之后去哪里的呢？不知何故，它工作，但我的第一个想法是我应该将最终目标 URL 传递到 clear.php，然后使用“标题”从 clear.php 移动到最终目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T19:30:15.517

需要 Ajax 吗？如果您将用户重定向到另一个页面并且您只是想将一些数据传递到该页面，那么将这些数据包含在您的 URL 中可能会更简单。

```
<a href="http://yoursite.com/interesting_page.php?new_session_variable=whatever">Link</a> 
```

现在你的 php 会很简单：

```
$_SESSION['name'] = $_GET['new_session_variable']; 
```

现在您已经消除了对 JavaScript 的依赖，这有意义吗？:)

* * *

我觉得可能值得一提的是，您的方法在某些情况下是合适的，例如：如果您希望用户能够将页面上的某个链接标记为收藏夹。而不是将它们重定向到同一页面并重新加载大部分页面内容，您可以：

```
<a class="favourite" data-linkid="link123" href="mylink.php">My Link</a> 
```

* * *

```
// Ensure your page has finished loading aka: 'ready' (almost always)
$(document).ready(function() {

    // Listen for the click event
    $('.favourite').on('click', favoriteLink);

    // On the click - post the update via ajax and update your interface
    function favoriteLink(event) {
        event.preventDefault();

        // Lets get the link id from our data attribute
        var favourite_link = $(this).data('linkid');

        // Post that information via ajax
        $.post('ajax_handler.html', { link : favourite_link }, function(data) {

            // And finally do something with the result!
            $('.result').html(data);
        });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T19:25:51.783

我的猜测是这与 AJAX 的异步性有关，一些浏览器在加载新链接之前会正确触发 AJAX。其他人可能会因为页面正在更改而取消 AJAX 请求。尝试阻止锚点的默认操作，然后`window.location`在 ajax 调用返回后用于重定向它们。

```
$("#hdr li a").click(function (e) {
    var href = $(this).attr('href');
    e.preventDefault()
    $.post("clear.php", function () {
        window.location = href;
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T19:40:38.590

由于您正在执行 ajax 调用，因此访问者无法访问 clear.php 页面。

相反，您的浏览器会使用 XMLHTTPRequest 对象通过 javascript 在下面发送一个请求，该对象不会破坏您的浏览器行为，因此会加载 a href 指向的页面。

如前所述：ajax调用是无用的。您最好在页面顶部包含 clear.php 并测试是否应该设置会话变量，例如基于 get param。

如果您确实想在浏览器进入新页面之前保留 ajax 调用，您可以在“重置”链接（事件委托）的第一个公共父级上附加一个事件处理程序，并测试您是否应该发送一个 ajax 请求以通知 clear .php

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-21T13:30:59.520

我有这个问题。我想根据用户单击的链接传递不同的 sql 字符串以从表中选择不同的行，但我不想在 GET 中显示 sql。

我的解决方案是为每个链接设置不同的会话变量，并从链接传递会话变量的名称。我有几个链接，但我在这里只包含了 2 个作为示例。我的链接代码是：-

```
<?php $_SESSION["extend_stats_sql_01"] = "";                                  
echo '<a href="view_stats_1.php?sort=name&sent=extend_stats_sql_01"> View</a>';}?> <br> 
```

和

```
<?php $_SESSION["extend_stats_sql_02"] = " Where booking_status = 'Cancelled'";                               
echo '<a href="view_stats_1.php?sort=name&sent=extend_stats_sql_02"> View</a>';}?> <br> 
```

我在下一页上检索值以根据链接显示具有正确 sql 的列表的代码是：-

```
$stats_sql = "SELECT id, name, activity, email, diving_date, arrival_date, checkin_date, create_date, seller FROM guests ";
$sort = $_GET['sort']; 
$sent= $_GET['sent'];
$result = $_SESSION["$sent"];
$stats_sql.= "$result"; 
$stats_sql.= " ORDER BY $sort"; 
```

显然你需要在每一页的开头开始一个会话：-

```
session_start(); 
```

当你完成时：-

```
// remove all session variables
session_unset();

// destroy the session
session_destroy(); 
```

# label - Flot - 在堆叠条的顶部显示标签

> ID：12430716
> 
> 赞同：4
> 
> 时间：2012-09-14T19:20:47.663
> 
> 标签：label, flot, stacked

我正在使用[这个 stackoverflow 问题](https://stackoverflow.com/questions/1174298/flot-data-labels)中的代码片段来标记我的浮点数据点。到目前为止，这对我很有帮助，但现在我必须标记堆叠条的整体值。有两个数据系列，到目前为止，我已经设法计算了总和，但我似乎无法为我的标签制定正确的定位。我想把它们放在堆栈的顶部，但是 pointOffset 只给我基于非堆叠条的偏移量。

这是我目前使用的代码，它将标签放置在第二个系列的数据点所在的位置，如果条没有堆叠，则将它们放在顶部条的某个位置。

```
$.each(p.getData()[1].data, function(i, el){

    var series0 = p.getData()[0].data;
    sum = el[1] + series0[i][2]

    var o = p.pointOffset({x: el[0], y: el[1]});

    $('<div class="data-point-label">' + sum + '</div>').css( {
        position: 'absolute',
        left: o.left - 5,
        top: o.top ,
        display: 'none'
    }).appendTo(p.getPlaceholder()).fadeIn('slow');
}); 
```

编辑#1：到目前为止，我已经尝试使用 c2p/p2c，使用单个数据点的最高值计算最高值，并在堆栈插件上找到更多文档。恐怕这对我没有多大帮助。

编辑＃2：我也尝试过[这个stackoverflow答案](https://stackoverflow.com/questions/6843188/display-label-inside-stacked-bar-chart)中给出的代码，但它对我不起作用。我怀疑作者正在使用一些标签插件...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-18T15:45:41.320

使用injg画布将标签放在堆栈条顶部的解决方案是，您必须根据整个堆栈中的值的总和计算xPoint。

这是一个代码示例

```
var sumaArr = [];
for (var u = 0; u < p.getData().length; u++) {
    $.each(p.getData()[u].data, function (i, el) {
        sumaArr[i] > 0 ? sumaArr[i] = sumaArr[i] + el[1] : sumaArr[i] = el[1];
    });
}

var ctx = p.getCanvas().getContext("2d");
var data = p.getData()[p.getData().length - 1].data;
var xaxis = p.getXAxes()[0];
var yaxis = p.getYAxes()[0];
var offset = p.getPlotOffset();
ctx.font = "12px 'Segoe UI'";
ctx.fillStyle = "gray";
for (var i = 0; i < data.length; i++) {
    var text = sumaArr[i];
    var metrics = ctx.measureText(text);
    var xPos = (xaxis.p2c(data[i][0]) + offset.left) - metrics.width / 2;
    var yPos = yaxis.p2c(sumaArr[i]) + offset.top - 5;
    ctx.fillText(text, xPos, yPos);
} 
```

var yPos 使用构成完整堆栈的值的总和。

# android - 应用程序的Android“永久”超级用户权限？

> ID：12430717
> 
> 赞同：3
> 
> 时间：2012-09-14T19:20:49.817
> 
> 标签：android, process, runtime, exec, root

为了澄清，我使用这段代码来获得我的应用程序的超级用户权限，这样我就可以访问 root 和诸如此类的东西：

```
 public String runProcess(String[] functs) {

    DataOutputStream dos;
    DataInputStream dis;
    StringBuffer contents = new StringBuffer("");
    String tempInput;
    Process process;

    try {
        process = Runtime.getRuntime().exec(functs);
        dos = new DataOutputStream(process.getOutputStream());
        dis = new DataInputStream(process.getInputStream());

        for (String command : functs) {
            dos.writeBytes(command + "\n");
            dos.flush();

            while ((tempInput = dis.readLine()) != null)
                contents.append(tempInput + "\n");

        }

        dos.writeBytes("exit\n");
        dos.flush();
        process.waitFor();
    } catch (Exception e) {
        e.printStackTrace();
    }

    return contents.toString();

} 
```

虽然它工作得很好，但每当我打电话给它时，`runProcess(new String[] { "su", "-c", "some other command" });`它总是要求超级用户许可。我看到市场上有很多根应用程序只需要在应用程序每次启动时获得一次超级用户权限，但我认为我不需要每次应用程序调用函数时都向用户询问超级用户权限这需要SU。所以我的问题是，我如何在应用程序启动时提示用户给我一次 SU 权限，而不必为每个与 SU 相关的操作不断地请求它？

编辑：我知道我可以运行我的方法/ Runtime.getRuntime().exec() 方法，而无需每次都在其中输入“su”，但这仅适用于非 su 相关操作（即 exec("ps") 或 exec （“ls”）。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:07:48.800

如果您只是在寻找已经在您的设备中运行的“超级用户”应用程序的权限，您只需要在您的主 java 文件中添加以下代码。

```
try {
        process p= Runtime.getRuntime().exec(su);
    }

catch (IOException e) {
      e.printStackTrace();
   } 
```

是的，不用说设备必须已经root了！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:42:23.913

您可以使用我的库来执行此操作。

[https://code.google.com/p/roottools/](https://code.google.com/p/roottools/)

此外，如果您不想使用该库，则可以使用源代码，因此您可以撕下我的代码并在您的应用程序中使用它。

这是源代码的链接：

[https://code.google.com/p/roottools/source/browse/#svn%2Ftrunk%2FStable%2FRootTools-sdk3-generic%2Fsrc%2Fcom%2Fstericson%2FRootTools](https://code.google.com/p/roottools/source/browse/#svn%2Ftrunk%2FStable%2FRootTools-sdk3-generic%2Fsrc%2Fcom%2Fstericson%2FRootTools)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T13:23:58.267

每次您打开一个要求 root 访问权限的控制台，即使用 启动它时`su`，如果您在上一个提示中选中“不要再问我”之类的内容，相应的超级用户应用程序将提示您或允许/拒绝它。

如果您只想询问（超级用户应用程序）一次，则必须保持根控制台打开，而不是调用`dos.writeBytes("exit\n");`. 然后将此会话保留在后台线程中，并在必要时使用它。

因此，要么确保用户在第一次提示时选中“不要再问我”，要么保持会话打开。

# php - PHP包中的“机器字节顺序”是什么意思？

> ID：12430718
> 
> 赞同：0
> 
> 时间：2012-09-14T19:20:52.630
> 
> 标签：php, pack

我了解小端和大端，但是“机器字节顺序”是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T19:26:22.893

在[pack](http://php.net/manual/en/function.pack.php)中，短语“机器字节顺序”表示字节顺序由*当前机器*^(1确定)

PHP 本身*不保证*这些字符（例如`S`，`L`）编码数据的字节顺序，除非顺序与*当前机器*有关。

因此，使用“机器字节顺序”包装字符时要小心，如果有任何疑问，请考虑*保证顺序*的对应部分（例如`n`， ） ¹。但是，请注意*目标数据规范*，因为某些愚蠢的格式（例如 [Microsoft] UUID）是按照“机器字节顺序”排列的，而其他格式则始终是大端或小端。`v`

 ** * *

¹ x86/x64 总是 little-endian，但 PHP 在技术上可以在 big-endian 机器上运行……某处。最好养成明确和精确的习惯，以避免以后代码突然神秘地“停止工作”。*

# c# - 清单文件C#在哪里

> ID：12430725
> 
> 赞同：0
> 
> 时间：2012-09-14T19:21:15.743
> 
> 标签：c#, .net

将 C# 应用程序从 MSVS2003 转换为 MSVS2010 后出现错误：`"This application has failed to start because application configuration is incorrect. Review the manifest file for possible errors..."`当我尝试运行该应用程序时。清单文件在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:22:40.073

这是您的 VC（不是 C#）运行时配置的问题。这个 MSDN 线程应该告诉你该怎么做：[http ://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/36971526-95f3-4a9f-a601-1843c86332c1](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/36971526-95f3-4a9f-a601-1843c86332c1)

# sql-server - 在 WHERE 子句中搜索转换儒略日期

> ID：12430727
> 
> 赞同：2
> 
> 时间：2012-09-14T19:21:23.693
> 
> 标签：sql-server, sql-server-2008, julian-date

我从 SQL Server 2008 中的表中提取发票日期。日期以 Julian 为单位。我已经使用以下方法转换了它们：

```
CONVERT(char(12), dateadd(dd, (t2.date_paid - 639906), '1/1/1753'), 101) 
```

伟大的。现在，当我尝试使用 WHERE 子句限制结果时

```
AND CONVERT(char(12), dateadd(dd, (t2.date_paid - 639906), '1/1/1753'), 101) 
  BETWEEN '07/01/2012' AND '07/31/2012' 
```

我收到超出该范围的日期。该`t2.date_paid`列将返回 2004 年的日期。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T19:56:06.130

您正在将创建的日期转换`dateadd`为字符串，因此您正在进行字符串比较而不是日期比较。

# r - 针对单个结果变量的聚类变量 - ClustOfVar

> ID：12430728
> 
> 赞同：1
> 
> 时间：2012-09-14T19:21:24.353
> 
> 标签：r, cluster-analysis

我有一个数据集，其中包含代表分数和特征的变量（在这两个方面都混合了定性和定量）。我想根据每个分数对特征（而不是个人观察）进行聚类。所以，我想在 score_1 的基础上形成相似的特征集群（trait_1 到 trait_15），然后对分数 2 和 3 重复。下面的数据结构示例。

我在想我可以使用 ClustOfVar 包来形成这些集群，如果我只是试图将所有变量聚集到类似的组中，我会理解的。但是，我不知道如何根据其他变量之一对它们进行聚类。

如果有人有建议，我将不胜感激。提前致谢。

```
Score_1 Score_2 Score_3 Trait_1 Trait_2 Trait_3 …   Trait_15 
```

n1
n2
n3
…<br> n100000

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T09:46:45.800

You may want to look into *subspace* clustering algorithms.

They usually allow *overlapping* clusters, so you may get out quite a number of clusters.

You cluster on the traits only, then check if the found clusters correspond to your known scores in a second phase.

# php - PHP + SQL : 在 php 中循环获取多个 WHERE 条件

> ID：12430729
> 
> 赞同：-2
> 
> 时间：2012-09-14T19:21:25.680
> 
> 标签：php, sql

所以假设我有一个包含一些表条目（id）的列表。我想获取与列表中具有确切 ID 的表行。我怎么能用 sql 语句在 php 中制定这个。

IE

```
idList = [23,43,65,234,54]；
```

```
SELECT * 
FROM TABLE 
WHERE id = 23 
AND id = 43 
AND id = 65 
AND id = 234 
AND id = 54; 
```

抱歉，AND 是一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:25:01.280

`IN`您可以使用运算符在一组值中搜索，而不是检查每个 id ：

```
SELECT * FROM kittens WHERE id IN (23,43,65,234,54) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T19:25:52.863

```
$list='23,43,65,234,54';
$SQL='SELECT * FROM TABLE WHERE id in ('.$list.')'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T19:25:30.127

您的搜索必然不会返回任何行，因为`id`一次不能有多个值。

我猜你想返回`id`与任何一个值匹配的行，在这种情况下你可以

1) 使用 OR 运算符代替 AND

2) 或者更好地使用 IN 运算符

# javascript - Node.js 聊天应用程序和集群

> ID：12430730
> 
> 赞同：0
> 
> 时间：2012-09-14T19:21:33.510
> 
> 标签：javascript, node.js, socket.io, cluster-computing

我想用 node.js 和：socket.io，集群 - 模块/插件制作聊天轮盘应用程序。

所以我有一个只创建几个子集群的主集群。现在，每个子集群在同一个端口上都有 socket.io 连接。但是我应该在哪里将所有套接字（用户）组合成对，在哪个子集群中？一些套接字在一个集群中，而一些套接字在另一个集群中。

我可以通过这个clusterhub同步所有socket.io连接：http: [//toolbox.no.de/packages/socket.io-clusterhub](http://toolbox.no.de/packages/socket.io-clusterhub)

所以每个集群都有所有的套接字，但是哪个子集群应该将套接字组合成对呢？通常我需要对子集群做一些事情，并且需要访问所有子集群的所有套接字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:52:01.930

您需要将不同的 socket.io 实例与 Message Queue 或 Socket.IO Store 连接，以便它们相互通信并将消息传递到不同的实例。

Socket.IO 已经有了 Stores 的概念，它用于存储连接，它是 socket.io 对部署多个服务器和进程的回答。Socket.IO 附带 2 个存储，一个将所有连接信息保存在进程内的内存存储和一个 RedisStore，它将在所有连接的进程之间同步所有信息。

有关如何实现它的更多信息，请参阅[https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO （关于商店的部分）。](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)

# android - Asynctask 和 HTTP 连接的问题

> ID：12430734
> 
> 赞同：0
> 
> 时间：2012-09-14T19:21:47.880
> 
> 标签：android, android-asynctask, httpclient, settimeout, http-get

我有一个我似乎无法解决的非常疯狂的问题。我尝试了许多不同的方法，但它似乎没有像我预期的那样工作。我想要的是当用户单击我的 MainActivity 上的按钮时，它应该产生一个由 AsyncTask 提供的新线程。MainActivity 应该同时显示一个 ProgressDialog。新创建的线程负责使用 HTTP 连接通过 url 获取 xml，对其进行解析并将数据存储在本地数据库中。

我想要的是 AsyncTask 线程抛出超时异常，或者在没有数据连接或 xml 在 url 上不可用的情况下抛出任何异常。它必须在那时关闭 ProgressDialog。

这就是我所做的，有时它可以工作，但有时它只是长时间显示 ProgressDialog

```
class RetreiveFeedTask extends AsyncTask<String, Void, String> {
    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        pd = ProgressDialog.show(MainActivity.this, "Working..",
                "Fetching Values", false,true);

    }

    protected String doInBackground(String... params) {
        String xml = null;
        try {

            XmlPullParser parser = Xml.newPullParser();
            parser.setFeature(XmlPullParser.FEATURE_PROCESS_NAMESPACES,
                    false);

            HttpGet method = new HttpGet(
                    new URI(
                            "http://www.blahblahblah.xml"));
            HttpParams httpParameters = new BasicHttpParams();
            int timeoutConnection = 5000;
            HttpConnectionParams.setConnectionTimeout(httpParameters,
                    timeoutConnection);
            int timeoutSocket = 5000;
            HttpConnectionParams
                    .setSoTimeout(httpParameters, timeoutSocket);

            DefaultHttpClient client = new DefaultHttpClient();

            HttpResponse res = client.execute(method);

            InputStream is = res.getEntity().getContent();
            parser.setInput(is, null);

            int eventType = parser.getEventType();

            parser.nextTag();

            while (eventType != XmlPullParser.END_DOCUMENT) {
                if (eventType == XmlPullParser.START_TAG) {
                    if (parser.getAttributeCount() == 2) {

                        myDbHelper.update(parser.getAttributeValue(0),
                                parser.getAttributeValue(1));

                    }
                }
                eventType = parser.next();
            }
            System.out.println("End document");

            xml = "Done, Database updated :)";
        } 

        catch (Exception e) {
            xml = "Error: Unable to fetch data";
             e.printStackTrace();

        }
        return xml;
    }
@Override
    protected void onPostExecute(String xml) {
pd.dismiss();
        Toast.makeText(MainActivity.this, xml, Toast.LENGTH_SHORT).show();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:36:18.737

最好的方法是

您可以在启动异步任务之前检查数据连接

像

boolean isInternetConnectd;

if(isInternetConnectd) { // 执行网络相关任务.... } else { // 显示对话框“互联网连接不可用” }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:33:52.897

就超时而言，您实际上并没有使用您正在设置的参数。改变：

```
DefaultHttpClient client = new DefaultHttpClient(); 
```

到：

```
DefaultHttpClient client = new DefaultHttpClient(httpParameters); 
```

# actionscript-3 - 是否可以在没有原始 .fla 的情况下从 documentClass 文件 (.as) 生成 SWF？

> ID：12430742
> 
> 赞同：1
> 
> 时间：2012-09-14T19:22:22.810
> 
> 标签：actionscript-3, flash-builder, flash

我从一个旧项目继承了一个 Actionscript 文件，并且有人告诉我可以从中生成 SWF，尽管我没有相应的 FLA 文件。

文件中的代码遵循以下形式：

```
package {

    import flash.display.LoaderInfo;
    import flash.display.MovieClip;
    import flash.display.Sprite;
    import flash.display.StageAlign;
    import flash.display.StageScaleMode;
    // additional import statements

    [SWF(width="640", height="480", frameRate="30", backgroundColor="#FFFFFF")]

    public class MyClass extends Sprite {
        // code, code, code
    }
} 
```

我曾尝试将它引入 Flash Builder 并使用“作为 Web 应用程序运行”，但我得到了一堆我不理解的错误（对未定义方法的调用、无法找到的定义）。

我已经完成了相当多的 AS2 编码，但没有那么多 AS3 和零 Flex。我不确定我是否不了解在没有相应 FLA 的情况下编译 SWF 的一些最新方法。

有没有办法将这种类型的文件编译成 SWF？还是我以正确的方式进行处理，但可能只是缺少一些依赖文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:39:20.670

是否可以在没有原始 .fla 的情况下从 .as 文件生成 swf：

是的，**如果**您拥有所有依赖项。

使用 flashBuilder 时，您会查看所有导入，任何不是以您需要的文件开头的文件`flash.`或其他文件。`mx.`这也包括这些类文件中的所有导入。

此外，许多 .fla 使用库中的显示对象。如果是这种情况，则需要将它们导出到另一个 swc/swf，然后链接/加载到您的 flashBuilder 项目。这包括组件（“fl”包）。

**所以总结一下：**
如果 original.fla 只是一个链接了文档类的空项目，那么如果你有所有需要的类文件都可以导入，那么你就可以了。

如果原始 .fla 具有链接或拖放到时间线上的库资源，那么如果您无法获取原始 .fla，您将遇到问题。

* * *

**如何在 Flash Builder 中执行此操作 在 Flash Builder**
中，创建一个新的 ActionScript 项目。
将所有依赖文件放在它刚刚创建的项目的**src**文件夹中 - 保持它们的文件夹结构/层次结构（包名称表示它期望 .as 文件相对于 src 文件夹的文件夹）。

在树形视图中，找到主.as文件（documentClass），右键告诉它是默认的应用程序文件（如果需要，可以删除创建项目时自动生成的文件-projectname.as ）。

运行项目，它会将 swf 放入与项目同名的 bin（或 bin-debug）文件夹中。

# json - 如果未引用密钥，JSON::XS 会抱怨

> ID：12430748
> 
> 赞同：2
> 
> 时间：2012-09-14T19:22:41.587
> 
> 标签：json, perl

我以这种格式返回 JSON：

```
{key1:"value1", key2:"value2"} 
```

如果我尝试使用 JSON::XS' decode_json 方法为我转换它，但它抱怨没有引用键。我可以在 JSON::XS 中设置一个选项来忽略这个怪癖吗？我查看了文档，但没有什么明显的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T19:25:13.130

如果您不引用密钥，则它不是有效的 JSON。有效的 JavaScript 对象不一定是有效的 JSON 对象。

看到这个[答案](https://stackoverflow.com/a/2904181/384802)。

[JSON::PP](https://metacpan.org/module/JSON::PP)具有允许对“JSON”-ish 输入进行更宽松解析的选项，特别是[allow_barekey](https://metacpan.org/module/JSON::PP#allow_barekey)选项。

# python-2.7 - 决定用于 pip 和 easy_install 的 python 版本

> ID：12430753
> 
> 赞同：2
> 
> 时间：2012-09-14T19:23:06.100
> 
> 标签：python-2.7, pip, ipython, easy-install, python-2.4

我的服务器上有两个 python 版本，即 2.4 和 2.7。它正在运行 RHEL 5.8。

我的服务器上已经安装了 pip 和 easy_install。

当我尝试使用 easy_install 或 pip 安装 ipython 时，它给了我一个可能在 python 2.4 中不支持的错误。

我想对 pip 和 easy_install 都使用 python 2.7，因为我想使用两者的最新版本。

我应该怎么做才能让 pip 和 easy_install 使用 python 2.7。系统默认安装 Python 2.4，我确实想保留它。

Python 2.7 安装在另一个位置。

下面是 easy_install 和 pip 的回溯。两者最终都出现相同的错误。任何形式的帮助表示赞赏。

画中画

```
ronak@ronak fun $ sudo pip install ipython
Downloading/unpacking ipython
  Downloading ipython-0.13.zip (6.4Mb): 6.4Mb downloaded
  Running setup.py egg_info for package ipython
    Traceback (most recent call last):
      File "<string>", line 14, in ?
      File "/usr/local/home/ronak/fun/build/ipython/setup.py", line 23
        from __future__ import print_function
    SyntaxError: future feature print_function is not defined
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):
  File "<string>", line 14, in ?
  File "/usr/local/home/ronak/fun/build/ipython/setup.py", line 23
    from __future__ import print_function
SyntaxError: future feature print_function is not defined
----------------------------------------
Command python setup.py egg_info failed with error code 1
Storing complete log in /home/ronak/.pip/pip.log 
```

简易安装：

```
ronak@ronak $ sudo easy_install ipython
Searching for ipython
Reading http://pypi.python.org/simple/ipython/
Reading http://ipython.scipy.org
Reading http://ipython.scipy.org/dist
Reading http://ipython.scipy.org/dist/0.8.4
Reading http://ipython.scipy.org/dist/0.9.1
Reading http://ipython.org
Reading http://archive.ipython.org/release/0.12.1
Reading https://github.com/ipython/ipython/downloads
Reading http://ipython.scipy.org/dist/old/0.9
Reading http://ipython.scipy.org/dist/0.10
Reading http://archive.ipython.org/release/0.11/
Reading http://archive.ipython.org/release/0.12
Best match: ipython 0.13
Downloading https://github.com/downloads/ipython/ipython/ipython-0.13.zip
Processing ipython-0.13.zip
Running ipython-0.13/setup.py -q bdist_egg --dist-dir /tmp/easy_install-vgPLN2/ipython-0.13/egg-dist-tmp-GHUgsq
Traceback (most recent call last):
  File "/usr/bin/easy_install", line 7, in ?
    sys.exit(
  File "/usr/lib/python2.4/site-packages/setuptools-0.6c11-py2.4.egg/setuptools/command/easy_install.py", line 1712, in main
    with_ei_usage(lambda:
  File "/usr/lib/python2.4/site-packages/setuptools-0.6c11-py2.4.egg/setuptools/command/easy_install.py", line 1700, in with_ei_usage
    return f()
  File "/usr/lib/python2.4/site-packages/setuptools-0.6c11-py2.4.egg/setuptools/command/easy_install.py", line 1716, in <lambda>
    distclass=DistributionWithoutHelpCommands, **kw
  File "/usr/lib/python2.4/distutils/core.py", line 149, in setup
    dist.run_commands()
  File "/usr/lib/python2.4/distutils/dist.py", line 946, in run_commands
    self.run_command(cmd)
  File "/usr/lib/python2.4/distutils/dist.py", line 966, in run_command
    cmd_obj.run()
  File "/usr/lib/python2.4/site-packages/setuptools-0.6c11-py2.4.egg/setuptools/command/easy_install.py", line 211, in run
    self.easy_install(spec, not self.no_deps)
  File "/usr/lib/python2.4/site-packages/setuptools-0.6c11-py2.4.egg/setuptools/command/easy_install.py", line 446, in easy_install
    return self.install_item(spec, dist.location, tmpdir, deps)
  File "/usr/lib/python2.4/site-packages/setuptools-0.6c11-py2.4.egg/setuptools/command/easy_install.py", line 476, in install_item
    dists = self.install_eggs(spec, download, tmpdir)
  File "/usr/lib/python2.4/site-packages/setuptools-0.6c11-py2.4.egg/setuptools/command/easy_install.py", line 655, in install_eggs
    return self.build_and_install(setup_script, setup_base)
  File "/usr/lib/python2.4/site-packages/setuptools-0.6c11-py2.4.egg/setuptools/command/easy_install.py", line 930, in build_and_install
    self.run_setup(setup_script, setup_base, args)
  File "/usr/lib/python2.4/site-packages/setuptools-0.6c11-py2.4.egg/setuptools/command/easy_install.py", line 919, in run_setup
    run_setup(setup_script, args)
  File "/usr/lib/python2.4/site-packages/setuptools-0.6c11-py2.4.egg/setuptools/sandbox.py", line 61, in run_setup
    DirectorySandbox(setup_dir).run(
  File "/usr/lib/python2.4/site-packages/setuptools-0.6c11-py2.4.egg/setuptools/sandbox.py", line 105, in run
    return func()
  File "/usr/lib/python2.4/site-packages/setuptools-0.6c11-py2.4.egg/setuptools/sandbox.py", line 64, in <lambda>
    {'__file__':setup_script, '__name__':'__main__'}
  File "setup.py", line 23
    from __future__ import print_function
SyntaxError: future feature print_function is not defined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:30:11.503

一种方法是：

1.  在文本编辑器中打开 pip/easy_install

2.  检查顶行，它应该说

    #！/usr/bin/python

3.  将其更改为 #!path/to/python2.7

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T13:57:47.810

你应该检查[这个 SO question](https://stackoverflow.com/questions/2812520/pip-dealing-with-multiple-python-versions)。

您可能还需要考虑使用虚拟环境`virtualenv`并`virtualenvwrapper`管理您的包应使用的 Python 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T19:34:43.527

如果您想通过下载 .dmg 轻松安装 iPython、SciPy、MatPlotLib 等，可以在这里尝试：

[http://www.enthought.com/products/epd_free.php](http://www.enthought.com/products/epd_free.php)

或者，如果您有学术电子邮件地址：

[http://www.enthought.com/products/edudownload.php](http://www.enthought.com/products/edudownload.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T19:40:00.507

`sudo /location/to/python2.7 /path/to/pip install ipython`

如果你有最新版本的 pip，你也可以试试`sudo pip-2.7 install ipython`

# web-services - 如何为在代码 (.NET) 中创建的文件设置文件访问权限

> ID：12430755
> 
> 赞同：0
> 
> 时间：2012-09-14T19:23:14.740
> 
> 标签：web-services, permissions, mono

我有一个 Web 服务 (.asmx)，它将图像的字节数组作为参数并将图像保存在我们的服务器上。它工作正常，除了我之后无法对文件做任何事情，因为我显然没有权限。

当我在我的代码中使用 FileStream 将文件保存到我的服务器文件夹时，我可以在代码中的任何位置设置读/写/执行权限吗？

****编辑：我们的服务器是 Linux 服务器**

我在我的 Windows 机器 (Visual Studio 2010) 上编写了 Web 服务，并将其打包在 MonoDevelop 中以部署到我们的 Linux 服务器。我存储图像的文件夹与我的 .asmx 文件（在 Linux 服务器上）位于同一文件夹中。每当我的网络服务在该文件夹中存储图像时，权限默认为 rw-------。我希望他们默认为 rwxrwxrwx。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:44:51.823

尝试这个

```
// Get a FileSecurity object that represents the
// current security settings.
FileSecurity fSecurity = File.GetAccessControl(strFilePath1);

// Add the FileSystemAccessRule to the security settings.
fSecurity.AddAccessRule(new FileSystemAccessRule("IUSR_SOMESERVER",FileSystemRights.FullControl,AccessControlType.Allow));

// Set the new access settings.
File.SetAccessControl(strFilePath1, fSecurity); 
```

使代码适应你想要的（用户、文件路径和 acl）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:28:36.067

[如何检查写入目录或文件的权限？](https://stackoverflow.com/questions/130617/how-do-you-check-for-permissions-to-write-to-a-directory-or-file)

这是一篇关于文件权限的文章，我希望您可以将它们应用于读取文件，因为听起来您编写它没有问题，或者您可能无法正确编写它，这就是导致权限被锁定的原因，具体取决于位置你保存在你的服务器上。

# google-visualization - 从谷歌可视化表中的单元格值更改行颜色

> ID：12430756
> 
> 赞同：8
> 
> 时间：2012-09-14T19:23:28.963
> 
> 标签：google-visualization

我有一个带有一些数字和一些非数字列的谷歌可视化表。我需要一个 JavaScript 函数，它会根据行中单元格的值更改整个 google 可视化行的颜色。

我已经能够使用颜色格式化程序更改数字单元格的颜色，但我还需要更改行中剩余单元格的颜色。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T04:58:14.623

嘿，我刚刚遇到了和你一样的问题，我能够拼凑出一个回应。我确信有更好的方法可以做到这一点，但它对我有用。

使用`data.setProperty`标签，您可以对正在处理的行的每一列执行此操作。因此，如果您知道行号，我假设您知道行号，因为您可以使用颜色格式化程序只为一列执行此操作，您可以轻松完成此操作。

```
dataTable.setProperty(0, 0, 'style', 'background-color: red;');
dataTable.setProperty(0, 1, 'style', 'background-color: red;'); 
```

第一个参数是行索引，所以它应该保持不变，下一个参数是列索引，所以只需循环遍历所有列。然后您应该能够将背景颜色更改为任何 css 样式。

希望有帮助！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-04-27T13:51:58.003

您应该设置数据表`allowHtml=true`。

# r - 使用 mc2d 构建树时出错

> ID：12430757
> 
> 赞同：0
> 
> 时间：2012-09-14T19:23:31.977
> 
> 标签：r

我正在制作一棵树，它最终会变成一组手臂，每个手臂都有概率下降，每个手臂的末端都有一个值。

这是我树的最后一根手臂（我正在向后构建它）。

```
require(mc2d)
ndvar(1000)

sderror_dfail<-(0.30-0.86)/1.96
alpha_dfail<-0.62*{{0.62*{1-0.62}/{sderror_dfail*sderror_dfail}}-1}
beta_dfail<-alpha_dfail*{{1-0.62}/0.62}

probs_d_if_fail<-mcstoc(rbetagen,type="V",shape1=alpha_dfail, shape2=beta_dfail, 
min=0, max=1)

lots1<-mcdata(1)
test<-lots1-probs_d_if_fail

probs1 <- mcstoc(rempiricalD, values=1:2, type="V", prob= c(probs_d_if_fail,test)) 
```

下一步是构建树的分支，如下所示：

```
node1 <- mcprobtree(probs1, list("1"=mcdata(0), "2"=mcdata(1), type="V") 
```

但是，当我运行它时，行 probs1<- mcstoc(....) 给了我以下错误

```
Error in function (n, values, prob = NULL)  : 
Prob and values should be of same length or have the same number of columns. 
```

我觉得它不喜欢我使用 mcstoc 对象作为等式的 prob=c(probs_d_if_fail,test) 部分，但我不确定如何解决这个问题。

任何帮助将不胜感激。

提摩太

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:45:11.637

`rempiricalD`需要一个多元 mcnode 作为`prob`参数。这很棘手。

尝试：

```
require(mc2d)
ndvar(10000)

sderror_dfail<-(0.30-0.86)/1.96
alpha_dfail<-0.62*{{0.62*{1-0.62}/{sderror_dfail*sderror_dfail}}-1}
beta_dfail<-alpha_dfail*{{1-0.62}/0.62}

probs_d_if_fail<-mcstoc(rbetagen,type="V",shape1=alpha_dfail, shape2=beta_dfail, 
min=0, max=1)

lots1<-mcdata(1)
test<-lots1-probs_d_if_fail
probs <- mcdata(c(probs_d_if_fail,test),type="V",nvariates=2)
probs1 <- mcstoc(rempiricalD, values=1:2, type="V", prob= probs)

node1 <- mcprobtree(probs1, list("1"=mcdata(0), "2"=mcdata(1)), type="V")
node1 
```

但如果符合您的需要，以下代码可能会更简单：

```
require(mc2d)
ndvar(10000)

sderror_dfail<-(0.30-0.86)/1.96
alpha_dfail<-0.62*{{0.62*{1-0.62}/{sderror_dfail*sderror_dfail}}-1}
beta_dfail<-alpha_dfail*{{1-0.62}/0.62}

probs_d_if_fail<-mcstoc(rbeta,type="V",shape1=alpha_dfail,
shape2=beta_dfail)

node1 <- mcstoc(rbern, type="V",prob = 1-probs_d_if_fail)
node1 
```

请注意，`rbern`如果我理解得很好，这将提供一个概率为 1 (1-probs_d_if_fail) 的值。

反相

# wpf - 无法从引用的项目中合并 ResourceDictionary

> ID：12430762
> 
> 赞同：5
> 
> 时间：2012-09-14T19:23:50.523
> 
> 标签：wpf, xaml, resourcedictionary

我有两个程序集，每个程序集都提供了一组我想要包含在我的应用程序中的通用样式和资源。我正在使用合并字典`App.xaml`来加载它们，并且在运行时它们就很好。不幸的是，这些资源不会在设计时加载，在我的错误窗口中填充有关不可解析资源的消息，并给我一个不代表实际出现的 UI。

这是我现在的 App.xaml：

```
<Application x:Class="ClientDebug.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             >
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Dai.Common;component/Xaml/Common.xaml" />
                <ResourceDictionary Source="/Dai.DevExpress;component/Xaml/Styles.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>
</Application> 
```

对于这两个合并的字典，我在错误窗口中收到以下错误：

```
Error   11  An error occurred while finding the resource dictionary "/Dai.Common;component/Xaml/Common.xaml".   C:\DevProjects\Core Application\ClientDebug\App.xaml    12  17  ClientDebug
Error   12  An error occurred while finding the resource dictionary "/Dai.DevExpress;component/Xaml/Styles.xaml".   C:\DevProjects\Core Application\ClientDebug\App.xaml    13  17  ClientDebug 
```

这显然缺乏有用的信息。同样，它们在运行时加载，正如您所期望的那样，但在设计时没有任何资源可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:26:49.347

从几天前开始，每当我开始一个新的 WPF 项目或使用旧项目时，我都会遇到这个问题。我开始了一个问题来寻求帮助，只是在测试解决方案时它消失在我身上！好像 Visual Studio 不是很稳定，谁知道呢？

问题的核心是 Xaml 设计器不允许您仅从*应用程序项目*中引用解决方案中的其他项目。解决方法是将所有内容移到库中，让应用程序只在代码中将控制权交给它。不优雅和失去 App.Xaml 是非常艰难的，但总比等待 Visual Studio 神奇地解决所有问题要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:37:45.680

我在来自其他名称空间的字典前面加上“pack://application:,,”，如下所示：

```
 <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="pack://application:,,,/Wsi.Util;component/DataGrid/NameValueDataGridDictionary.xaml" />
            <ResourceDictionary Source="LayoutStylesDictionary.xaml" />
            <ResourceDictionary Source="pack://application:,,,/Wsi.Util;component/controls/ToolBarResources.xaml" />
            <ResourceDictionary Source="pack://application:,,,/Wsi.Common;component/view/themes/FilterStylesResourceDictionary.xaml" />
        </ResourceDictionary.MergedDictionaries> 
```

高温下，

珍妮

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:05:58.753

我在我的一个项目中尝试了类似的合并，我似乎让它完美地工作。（或者，如果我的某些设置可能是我很久以前设置的，请原谅我。）我可以问的唯一问题是 xamls 是否指的是父项目中的任何内容？我假设您也有对父项目的引用（只是交叉检查）。也许 xaml 文件也需要另一个 xaml 文件（控件、颜色、字体等）。（我尝试的合并来自 MahApps。）

```
 <Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colours.xaml" />
            <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
            <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml" />
            <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/Blue.xaml" />
            <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/BaseDark.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
  </Application.Resources> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T16:35:30.043

我通过签署引用的项目解决了这个问题。

问题是：我的项目使用密钥文件签名，但引用的项目没有。

要解决：

*   将项目加载到解决方案中
*   打开项目属性
*   导航到“签名”
*   单击“签署程序集”
*   从组合框中选择“<新建...>”
*   输入名称，例如。'keyfile'（'用密码保护我的密钥文件'是可选的）
*   重建解决方案

# jquery - 我的 jQuery 中的样式

> ID：12430769
> 
> 赞同：1
> 
> 时间：2012-09-14T19:24:06.913
> 
> 标签：jquery, css

`<ul>`我将如何在这段代码中设置我的样式，

```
$.widget( "custom.catcomplete", $.ui.autocomplete, {
    _renderMenu: function( ul, items ) {
        var self = this,
            currentCategory = "";
        $.each( items, function( index, item ) {
            if ( item.category != currentCategory ) {
                ul.append( "<li class='ui-autocomplete-category'>" + item.category + "</li>" );
                currentCategory = item.category;
            }
            self._renderItem( ul, item );
        });
    }
}); 
```

我相信我可以将我的自定义样式放在我的`<ul>`标签中，但我该怎么做呢？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T19:26:22.277

如果你只是在 Firefox 中检查元素，你可以看到它是什么样式，然后为它创建一个样式。否则，您可以使用`$(element).css()`. 参考。 [http://api.jquery.com/css/](http://api.jquery.com/css/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:49:56.620

在传入的 ul 元素上调用 .css() 或 .addClass()

如果已经是 jQuery 对象

```
ul.css("color", "red"); 
```

否则，创建一个 jQuery 对象，以便您可以调用 .css()

```
$(ul).css({ color: "red", margin: 0 }); 
```

# bazaar - 我可以只将工作树的一个子集 bzr-upload 到我的 Web 服务器吗？

> ID：12430772
> 
> 赞同：0
> 
> 时间：2012-09-14T19:24:09.557
> 
> 标签：bazaar, web-deployment

我刚刚发现了[bzr-upload](http://wiki.bazaar.canonical.com/BazaarUploadForWebDev)插件，并认为它可以解决我所有的 web 部署问题，直到我发现了一个巨大的、明显的缺陷：如果你的文档根在你的工作树的子文件夹中（例如，`/www`），bzr-upload几乎没用，因为它上传了整个工​​作树。

是否没有一个开关，或者至少是一个丑陋的黑客来改变这种行为？**FWIW，我仅限于 FTP 访问。** [这个错误报告](https://bugs.launchpad.net/bzr-upload/+bug/530373)提到了 Bazaar “视图”作为一个可能的解决方案（或不是），并以“不会修复”关闭。不过那是两年前的事了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:51:03.030

没有启用此行为的开关。除了创建一个仅包含您需要的文件并在其上运行 bzr upload 的单独分支之外，我也不知道任何解决方法。

# mysql - MySQL - 选择一行 - 然后一个下一个和一个前一个相对于所选

> ID：12430774
> 
> 赞同：5
> 
> 时间：2012-09-14T19:24:34.783
> 
> 标签：mysql, select, row, range

我会尽力说明这一点。

我需要在不使用 id 的情况下从该选定行中选择一个特定行和一个相对的前一行，以及从该选定行中选择一个相对的下一行。这可能吗？简而言之，上一个和下一个。

我不能（也许我只是不知道如何）使用 id 的原因是因为它们不是按顺序排列的。从这个相当不成熟和随机的示例中可以看出，它们存在差距。

```
TABLE <-the name of the table
+----+----------------------+-------+
| id | name                 | value |
+----+----------------------+-------+
|  1 | some_name            | asf   |
+----+----------------------+-------+
|  4 | hello                | A3r   |
+----+----------------------+-------+
|  5 | how_do_you_do        | HR5   |
+----+----------------------+-------+
|  8 | not_bad              | 00D   |
+----+----------------------+-------+
| 12 | i_like_women         | lla   |
+----+----------------------+-------+
| 13 | are_you_serious      | 1Ha   |
+----+----------------------+-------+
| 15 | nah_i_kid            | Ad4   |
+----+----------------------+-------+
| 17 | it_is_just_the_boobs | Zc5   |
+----+----------------------+-------+
| 18 | thank_god            | 102   |
+----+----------------------+-------+
| 44 | no_kidding           | jjy   |
+----+----------------------+-------+ 
```

首先，我需要根据其中一列的特定值选择一行。我知道该怎么做：

```
SELECT `value` 
FROM `TABLE` 
WHERE name = 'i_like_women' 
```

这将选择 id 为 12 且值为 lla 的一行。

我需要选择另外至少两行：一行名称为“not_bad”，另一行名称为“are_you_serious”，但未指定。或者，换句话说，相对于这个选定的前一个和下一个。

简而言之，应该基于一个值选择三行。我是 MySQL 新手，你可以猜到。

感谢您的时间和关注。乐于帮助我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T19:45:44.017

这是将返回所有三个记录的查询。

```
SELECT * 
FROM `TABLE` 
WHERE id >= (
    SELECT id 
    FROM `TABLE` 
    WHERE id < (SELECT id FROM `TABLE` WHERE name = 'i_like_women')
    ORDER BY id DESC 
    LIMIT 1
)
ORDER BY id ASC
LIMIT 3 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-14T19:29:21.610

最简单的方法是利用这样一个事实，即虽然不是连续的，但您的 id 是按升序排列的。

例如：

```
SELECT * FROM Table WHERE id = 8

UNION
--Select the first item less than 8
SELECT * FROM Table WHERE id = (SELECT MAX(id) FROM Table WHERE id < 8)

UNION
--select the first item greater than 8
SELECT * FROM Table WHERE id = (SELECT MIN(id) FROM Table WHERE id > 8) 
```

如果你只知道字符串，那么：

```
DECLARE _id INT

SELECT _id = id FROM Table WHERE value = 'i_like_women' 
```

然后你可以简单地将它`_id`输入到上面的查询中，而不是 8。

请注意，您不需要使用 ` 来划分表名和列名。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-14T19:29:12.297

可以通过以下方式检索之前的一个：

```
SELECT `value` 
FROM `TABLE` 
WHERE id < (SELECT id FROM `TABLE` WHERE name = 'i_like_women')
ORDER BY id DESC
LIMIT 1 
```

您可以执行相反的查询以找到下一个

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-11T06:49:57.473

此查询在第一条和最后一条记录上也可以正常工作

```
SELECT * FROM `products` WHERE `ProductId`  = (SELECT MAX(ProductId) FROM `products`  WHERE ProductId < 1)  AND SubCategoryId=1

UNION

SELECT * FROM `products` WHERE `ProductId`  = (SELECT MIN(ProductId) FROM `products`  WHERE ProductId > 1)  AND SubCategoryId=1

UNION

SELECT * FROM `products` WHERE `ProductId`  = (SELECT MIN(ProductId) FROM `products`  WHERE ProductId < 1)  AND SubCategoryId=1 

UNION

SELECT * FROM `products` WHERE `ProductId`  = (SELECT MAX(ProductId) FROM `products`  WHERE ProductId > 1)  AND SubCategoryId=1

ORDER BY ProductId ASC 
```

我希望这能解决你的问题:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-27T13:07:30.647

我为以下问题找到了更好更简单的答案（查找下一行和上一行），

```
$neighbors = $this->WorkDescription->find('neighbors',array('field' => 'id', 'value' => 3)); 
```

它会给出这样的输出-

```
Array
(
    [prev] => Array
        (
            [WorkDescription] => Array
                (
                    [id] => 1
                    [title] => Twenty
                    [ter_id] => 1
                    [cat_id] => 4    
                    [writer] => abk
                    [director] => Dir
                    [producer] => pro   
               )
        )

    [next] => Array
        (
            [WorkDescription] => Array
                (
                    [id] => 3
                    [title] => The Piper
                    [ter_id] => 1
                    [cat_id] => 3        
                    [writer] => abk
                    [director] => Dir
                    [producer] => pro
                )
           )
) 
```

# c++ - 尝试使用另一个库的静态库时的 C++/CLI LNK2028

> ID：12430775
> 
> 赞同：0
> 
> 时间：2012-09-14T19:24:37.240
> 
> 标签：c++, native, managed, .lib

尝试构建 C++/CLI dll 时出现 LNK2028 错误。我在我的程序中使用了一个名为 pano13 的静态库，并且我正在使用它的一种方法。我的程序中的一切都很好，除了我对库进行的一个方法调用，在那里我得到了这两个确切的异常。

```
Error   21  error LNK2028: unresolved token (0A00013B) "int __cdecl panoCreatePanorama(struct fullPath * const,int,struct fullPath *,struct fullPath *)" (?panoCreatePanorama@@$$FYAHQAUfullPath@@HPAU1@1@Z) referenced in function "public: int __clrcall Surgeon::Stitcher::StitchImage(class System::Collections::Generic::List<class System::String ^> ^,class System::String ^)" (?StitchImage@Stitcher@Surgeon@@$$FQ$AAMHP$AAV?$List@P$AAVString@System@@@Generic@Collections@System@@P$AAVString@6@@Z)   C:\Users\ndean_000\Documents\Visual Studio 2012\Projects\C#\CameraTest\Surgeon\Surgeon.obj  Surgeon

Error   22  error LNK2019: unresolved external symbol "int __cdecl panoCreatePanorama(struct fullPath * const,int,struct fullPath *,struct fullPath *)" (?panoCreatePanorama@@$$FYAHQAUfullPath@@HPAU1@1@Z) referenced in function "public: int __clrcall Surgeon::Stitcher::StitchImage(class System::Collections::Generic::List<class System::String ^> ^,class System::String ^)" (?StitchImage@Stitcher@Surgeon@@$$FQ$AAMHP$AAV?$List@P$AAVString@System@@@Generic@Collections@System@@P$AAVString@6@@Z)    C:\Users\ndean_000\Documents\Visual Studio 2012\Projects\C#\CameraTest\Surgeon\Surgeon.obj  Surgeon 
```

我在项目设置中包含了 lib 文件，我什至添加了#pragma 注释语句来包含该库，但是我收到了这个错误。我知道它与本机和托管 C++ 的混合有关，但是我没有使用 clr/pure 编译程序，而是使用 /clr 的默认 clr 编译进行编译。任何人有任何想法如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:05:46.857

顺便说一句，我在一段时间前解决了这个问题，但我可能应该说出问题所在。panotools 库是 C 库，而不是 C++ 库。我不知道 C 库需要在 C++ 中使用 extern C 指令。所以我所要做的就是解决我的问题

```
extern "C"
{
    #include <panorama.h>
} 
```

其中 panotools.h 是 panotools C 库的包含文件。我一直想知道 extern C 是干什么用的，现在我终于明白了它的用途。

# php - 将相关的隐藏字段值从表单传递给控制器

> ID：12430776
> 
> 赞同：0
> 
> 时间：2012-09-14T19:24:40.313
> 
> 标签：php, html, codeigniter, codeigniter-2

我有一个页面，显示使用 codeigniter 创建的用户的每月订阅。我想要做的是当用户点击付款时将隐藏文件中的值传递给控制器​​。

```
<?php echo form_open('options/done');?>
    <table class="tables">
        <thead>
            <tr>
                <th>Ref Code</th>
                <th>Month</th>
                <th>Year</th>
                <th>action/th>
            </tr>
        </thead>
        <tbody>
            <?php foreach ($payments as $s =>$payment):?>
                <?php $month = $payment['month'];?>
                <input type="hidden" value="<?php echo $month;?>" name="month_<?php echo $s;?>" />
                <input type="hidden" value="<?php echo $payment['ref_code'];?>" name="ref_<?php echo $s;?>" />
                <tr>
                    <td><?php echo $payment['ref_code'];?></td>
                    <td><?php echo $month;?></td>
                    <td><?php echo $payment['year'];?></td>
                    <td><input type="submit" value="MAKE PAYMENT" class="red" /></td>
                </tr>
            <?php endforeach; ?>
        </tbody>
    </table>
<?php echo form_close();?> 
```

所以当有人点击提交按钮时，我如何才能只传递与该表行相关的隐藏值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:58:40.230

在循环内的元素内添加表单`<tr>`（参见下面的代码）

```
<?php foreach ($payments as $s =>$payment):?> 
<?php $month = $payment['month']; 
?> 
    <tr> 
        <form action="target.php" method="post" name="formName_<?php echo $s;?>" >
<input type="hidden" value="<?php echo $month;?>" name="month_<?php echo $s;?>" /> 
<input type="hidden" value="<?php echo $payment['ref_code'];?>" name="ref_<?php echo $s;?>" /> 
        <td><?php echo $payment['ref_code'];?></td> 
        <td><?php echo $month;?></td> 
        <td><?php echo $payment['year'];?></td> 
    <td><input type="submit" value="MAKE PAYMENT" class="red" /></td> 
        </form>
    </tr> 
<?php endforeach; ?> 
```

# php - 计算 php 中的“单词”出现次数

> ID：12430780
> 
> 赞同：0
> 
> 时间：2012-09-14T19:24:54.240
> 
> 标签：php, html

```
 $answers = array("a", "b", "c", "a", "a", "a");
  $S1Q1 = $_POST['S1Q1'];
  $S1Q2 = $_POST['S1Q2'];

  $S2Q1 = $_POST['S2Q1'];
  $S2Q2 = $_POST['S2Q2'];
  $S2Q3 = $_POST['S2Q3'];
  $S2Q4 = $_POST['S2Q4'];

  $totalValue .= "About OM | Question 01: " . $S1Q1 . "&nbsp;&nbsp;&nbsp;&nbsp;" . ($S1Q1 == $correct[0]) ? 'Correct' : 'Wrong' . "\n";
  $totalValue .= "        | Question 02: " . $S1Q2 . "&nbsp;&nbsp;&nbsp;&nbsp;" . ($S1Q2 == $correct[1]) ? 'Correct' : 'Wrong'  . "\n\n";

    $totalValue .= "About EHS         | Question 01: " . $S2Q1 . "&nbsp;&nbsp;&nbsp;&nbsp;" . ($S2Q1 == $answers[2]) ? 'Correct' : 'Wrong' . "\n";
    $totalValue .= "                   | Question 02: " . $S2Q2 . "&nbsp;&nbsp;&nbsp;&nbsp;" . ($S2Q2 == $answers[3]) ? 'Correct' : 'Wrong' . "\n";
    $totalValue .= "                   | Question 03: " . $S2Q3 . "&nbsp;&nbsp;&nbsp;&nbsp;" . ($S2Q2 == $answers[4]) ? 'Correct' : 'Wrong' . "\n";
    $totalValue .= "                   | Question 04: " . $S2Q4 . "&nbsp;&nbsp;&nbsp;&nbsp;" . ($S2Q2 == $answers[5]) ? 'Correct' : 'Wrong' . "\n\n"; 
```

我有上面的php脚本，我可以用什么方法或函数来计算用户在一个循环中有多少正确和多少错误，然后计算百分比？

**示例**：
正确：4
错误：2
总计：6
正确百分比：((4/6) * 100) = 66.666666666% => 将其四舍五入为**66%**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:28:33.320

这是一种快速而肮脏的方法来完成它而不改变你已经拥有的东西：

```
$correct = substr_count($totalValue, "Correct\n");
$wrong = substr_count($totalValue, "Wrong\n");
$total = $correct + $wrong;
$percentage = floor($correct / $total * 100); 
```

* * *

也就是说，我认为这可以做得更好。我会将变量作为数组传递。您的帖子字符串看起来像这样：

```
answers[s1][q1]=a&answers[s1][q2]=b&answers[s2][q1]=c&answers[s2][q2]=a 
```

PHP 会像这样接收它：

```
answers => Array(
    's1' => Array(
        'q1' => 'a',
        'q2' => 'b'
    ),
    's2' => Array(
        'q1' => 'c',
        'q2' => 'a'
    )
) 
```

看看[这个例子](http://codepad.org/T15Ui0Md#output)。它看起来更长一些，也许更复杂一些，但它更加灵活和可扩展。如果您需要添加任何问题、答案等...您所要做的就是添加相应的数组条目。从长远来看，我认为你会更高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:30:46.213

您必须使用数组而不是不同的变量。例如，而不是这个

```
$S2Q1 = $_POST['S2Q1'];
$S2Q2 = $_POST['S2Q2'];
$S2Q3 = $_POST['S2Q3'];
$S2Q4 = $_POST['S2Q4']; 
```

做这样的事情：

```
$s2 = array();
for ($i=1; $i <= 4; $i++) {
    $s2[$i] = $_POST['S2Q'.$i];
} 
```

等等...请原谅可能的语法故障，我已经有一段时间没有做 PHP 了 :-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T19:46:19.670

理想情况下，在您的`$correct`数组中，您将拥有与问题名称相同的键（例如`S1Q1`，`S2Q1`...等）。这将允许您查找任何问题的答案。然后，您可以遍历问题并查找该问题的正确答案并保持正确的计数。就像是：

```
//array of correct answers
$correct = array("S1Q1"=>"a", "S1Q2"=>"b", "S2Q1"=>"c", "S2Q2"=>"a", "S2Q3"=>"a", "S2Q4"=>"a");

$correctCount = 0;
$totalValue = '';

//loop through posted answers and check
foreach($_POST as $question=>$answer){
    //check if there is an answer for this question.
    if(array_key_exists($correct, $question)){
        $totalValue .= "Question {$question}: ".($correct[$question]==$answer?'Correct':'Wrong').'<br>';
        $correctCount += ($correct[$question]==$answer?1:0);
    }
}
$pct = round($correctCount/count($correct)*100);

$totalValue .= "You got {$correctCount} out of ".count($correct)." ({$pct}%) answers correct."; 
```

# php - 会话在 Ajax 中不可用，但在常规 PHP 脚本中

> ID：12430785
> 
> 赞同：-1
> 
> 时间：2012-09-14T19:25:12.787
> 
> 标签：php, ajax, session

我目前正在编写一个 ajax 应用程序，它通过会话获取一些配置参数。

保存这些参数的 session['apps']['appXY'] 构建在 php-script 中，该脚本提供 js-links，调用 ajax。由于我不希望 session['apps']['appXY'] 消耗资源，当用户不使用 ajax-app 时，我每次都删除 session['apps'] 数组，用户定期调用任何站点/同步方式。

建站顺序如下：

*   session['apps'] 被删除；
*   包括应用程序类
*   在每个应用程序 (fe appXY) 中，如果需要 ajax，则构建 session['apps']['appXY'] (Step3)

*   站点已构建，加载完成，用户正在调用一些 ajax 功能，这可能取决于 session['apps']['appXY']

现在的问题是，如果在站点构建过程开始时删除了 session['apps']，则会话数组 $session['apps']['appXY'] 在 ajax-script 中不可用现在，即使它在第 3 步（appXY 的常规 php 脚本）中被重建 - 并且已经存在且可用了。

如果我也没有删除 ajax 可用的会话，但我不明白，为什么会话在 ajax 应用程序中不可用，因为在重建之前删除它？什么可能导致这样的事实，在删除和重建会话之后，该会话在常规 php-script 中可用，但在 ajax 中不可用？

谢谢，杰登

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:00:29.047

正如 Ninsuo 所建议的，我尝试通过更详细的模型使场景更清晰，其中包含一些代码：

在主类中，在包含任何模块（应用程序）之前，所有 ajax 会话都被删除：

```
function get-apps()
{
    unset($_SESSION['ajaxconf']);

    require_once(appXY.php);
    require_once(appABC.php);
} 
```

然后，在类 'appXY.php' 中，会话 '$_SESSION['ajaxconf']['appXY']' 被（重新）填充：

```
class appXY extends base
{
    function main ( $localconf, $lang ) 
    {
        foreach ($array as $key => $value)
        $_SESSION['ajaxconf']['appXY'][$key] = $value;

        return '<a href="index.php?id=123&param1=234" onclick="ajax-app(234) return false;">click</a>
    }
} 
```

从 '$_SESSION['ajaxconf']['appXY']' 获取值可以在 ajax 脚本中正常工作，该脚本由 javascript 函数 'ajax-app()' 调用，只要会话不是在 php 函数“get-apps()”的开头删除。如果会话被删除，它在 ajax 文件中不可用，即使它已在类“appXY”中再次重新定义，这在删除会话后显然包含在内。对我来说，这没有多大意义，因为会话在“appXY”类中可用。

# javascript - 有没有办法使颜色框对象可拖动？

> ID：12430796
> 
> 赞同：1
> 
> 时间：2012-09-14T19:26:14.577
> 
> 标签：javascript, jquery, colorbox

是否有一个 jQuery 脚本可以使颜色框窗口可拖动？

我发现了一个名为[easydrag](http://www3.unca.edu/cm/map/mapCB/easy.js)的*工作*，但一旦将颜色框拖到页面的外部边界，它就会变得*粘滞。*请参阅我的*easydrag* [示例页面](http://www3.unca.edu/cm/easy.html)。

我希望让*easydrag*脚本正常工作，或者找到一个可以很好地与 colorbox 配合使用的替代脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-24T17:17:21.653

您可以为此使用[jQuery UI Draggable](http://jqueryui.com/draggable/) - 如果*draggable*是您需要的唯一功能，则 UI 可能有点矫枉过正，但它确实有效：

`$('#colorbox').draggable();`

# android - Android 应用程序 - 如何更新我的 ListItem？

> ID：12430801
> 
> 赞同：0
> 
> 时间：2012-09-14T19:26:30.737
> 
> 标签：android, listitem

对于 Android 应用程序...我在调用自定义 ListActivity 的 Activity 上有一个按钮。这个 ListActivity 有两行文本和一个复选框。调用时，ListActivity 在设备上打开一个 XML 文件 ( `local.xml`) 。此 XML 文件包含 Web 上的目标 XML 文件列表。如果设备上存在该文件，则选中 ListActivity 上的复选框，否则不选中。

当 ListItem 被按下时，它会检查目标文件是否存在于设备上——如果存在，它会显示一个对话框，询问是否要覆盖。如果文件不存在，或者如果他们选择覆盖，则会在进入 Internet 并抓取一组文件时显示一个进度对话框（目标 XML 文件包含要收集的 JPegs 列表）。

下载 JPegs 后，我更改进度消息以显示是否所有 JPegs 都已下载。它睡了几秒钟，然后消失了。

以上所有工作。

我的问题是：

1.  完成后，如何根据是否下载所有 JPegs 来设置与按下的项目关联的复选框？

2.  我真的想要一个三态指示器而不是一个二进制的复选框，除非我可以将颜色更改为黄色。我应该在这里使用更好的小部件吗？

相关代码如下（如果您需要查看更多信息，请告诉我）

初始活动：

```
public class RRS_Preferences extends Activity {
    onCreate(yadda, yadda)  {
}

public void Button_Listener(View view)  {
    /* open up the ListView Activity */
    Intent myIntent = new Intent();
    myIntent.setClassName("com.sinisterlabs.mypackage", "com.sinisterlabs.mypackage.Download_List");
    startActivity(myIntent);
    }
} 
```

自定义列表活动：

```
public class Download_List extends ListActivity {
    List<Location>loc_list = new ArrayList<Location>();

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setListAdapter(new RRSList_ArrayAdapter(this));
        selection = (TextView)findViewById(R.id.tableRow1);

        /* Open the "local.xml" file, pull from it the list of files that need to go
        onto the ListActivity. For each file, I add it to the List.  */
        loc_list.add(new Location(stringLocalFilename, stringURL, booleanIsPresent));
    }

    protected void onListItemClick(final ListView parent, final View v, int position, long href)    {
        if (fileLocalFile.exists)   {
            subDownloadJPegs(fileLocalFile);

        } else {    // Ask to download or not?
            AlertDialog.Builder alertBuilder = new AlertDialog.Builder(this);
            alertBuilder.setMessage("Are you sure you want to OverWrite this file and all of its image files?")
                .setCancelable(false)
                .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int id) {
                        dialog.cancel();
                        subDownloadJPegs(fileLocalFile);
                        }
                    });
                .setNegativeButton("No", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int id) {
                        dialog.cancel();
                        Toast.makeText(getApplicationContext(), "OverWrite Operation Cancelled...", Toast.LENGTH_LONG).show();
                        }
                    });
            AlertDialog alert = alertBuilder.create();
            alert.show();
        }
    }

    private void subDownloadJPegs(fileLocalFile)    {
        progDialog = new ProgressDialog(this);
        progDialog.setCancelable(true);
        progDialog.setMessage("Downloading files for " + fileLocalFile.toString() + "...");
        progDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        progDialog.setProgress(0);
        /* open up this file and count the number of JPegs to be downloaded */
        progDialog.setMax(intMax);
        progDialog.setMessage("Downloading Sign Files for " + RuleSetName + "...");
        progDialog.show();

        /* background thread to update progress bar */
        Thread background = new Thread (new Runnable() {
        @Overide
        public void run() {
            /* Inside a loop, download each file, increment the progress bar as we do */
            progressHandler.sendMessage(progressHandler.obtainMessage());
        }
        background.start();
    }

    Handler progressHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            progDialog.incrementProgressBy(1);
        }
} 
```

列表项布局 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <CheckBox
        android:id="@+id/checkBox1"
        android:layout_width="50dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:clickable="false"
        android:focusable="false"
        android:gravity="center" />

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <TextView android:id="@+id/text1" 
            android:layout_width="fill_parent" 
            android:layout_height="20dp" 
            android:textSize="18dp"></TextView>

        <TextView android:id="@+id/text2" 
            android:layout_width="fill_parent" 
            android:layout_height="15dp"
            android:textSize="13dp"></TextView>

    </LinearLayout>
</LinearLayout> 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:03:52.087

好，我知道了。问题出在我拨打电话以关闭对话框的位置。它最终在一个 catch 语句中并且从未执行。在解决这个问题时，我还参数化了对处理程序的调用，这让事情变得更加清晰。

呼！:-)

# python - 遵循照片应用教程时出现 Django models.py 错误

> ID：12430805
> 
> 赞同：1
> 
> 时间：2012-09-14T19:26:47.417
> 
> 标签：python, django, django-models

我正在阅读以下[教程](http://lightbird.net/dbe/photo.html)，models.py 代码似乎被破坏了（我在 Mac 和 Django 1.4.1 上）。

这是models.py代码：

```
from django.db import models

from django.contrib.auth.models import User
from django.contrib import admin

class Album(models.Model):
    title = models.CharField(max_length=60)
    public = models.BooleanField(default=False)
    def __unicode__(self):
        return self.title

class Tag(models.Model):
    tag = models.CharField(max_length=50)
    def __unicode__(self):
        return self.tag

class Image(models.Model):
    title = models.CharField(max_length=60, blank=True, null=True)
    image = models.FileField(upload_to='images/')
    tags = models.ManyToManyField(Tag, blank=True)
    albums = models.ManyToManyField(Tag, blank = True)
    created = models.DateTimeField(auto_now_add=True)
    rating = models.IntegerField(default=50)
    width = models.IntegerField(blank=True, null=True)
    height = models.IntegerField(blank=True, null=True)
    user = models.ForeignKey(User, null=True, blank=True)
    def __unicode__(self):
        return self.image.name

    def save(self, *args, **kwargs):
        """Save image dimensions."""
        super(Image, self).save(*args, **kwargs)
        im = PImage.open(os.path.join(MEDIA_ROOT, self.image.name))
        self.width, self.height = im.size
        super(Image, self).save(*args, ** kwargs)

    def size(self):
        """Image size."""
        return "%s x %s" % (self.width, self.height)

    def __unicode__(self):
        return self.image.name

    def tags_(self):
        lst = [x[1] for x in self.tags.values_list()]
        return str(join(lst, ', '))

    def albums_(self):
        lst = [x[1] for x in self.albums.values_list()]
        return str(join(lst, ', '))

    def thumbnail(self):
        return """<a href="/media/%s"><img border="0" alt="" src="/media/%s" height="40" /></a>""" % (
                                                                    (self.image.name, self.image.name))
    thumbnail.allow_tags = True

class AlbumAdmin(admin.ModelAdmin):
    search_fields = ['title']
    list_display = ['title']

class TagAdmin(admin.ModelAdmin):
    list_display = ['tag']

class ImageAdmin(admin.ModelAdmin):
    search_fields = ['title']
    list_display = ["__unicode__", "title", "user", "rating", "size", "tags_", "albums_",
        "thumbnail", "created"]
    list_filter = ["tags", "albums", "user"]

    def save_model(self, request, obj, form, change):
        obj.user = request.user
        obj.save()

admin.site.register(Album, AlbumAdmin)
admin.site.register(Tag, TagAdmin)
admin.site.register(Image, ImageAdmin) 
```

这是我尝试同步数据库时遇到的错误：

```
Error: One or more models did not validate:
photoapp.image: Accessor for m2m field 'tags' clashes with related m2m field 'Tag.image_set'. Add a related_name argument to the definition for 'tags'.
photoapp.image: Accessor for m2m field 'albums' clashes with related m2m field 'Tag.image_set'. Add a related_name argument to the definition for 'albums'. 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:31:15.497

你有重复`M2M`的，`Tag`因为`albums`你想改变它`Album`。拥有相关名称也是个好主意

```
tags = models.ManyToManyField(Tag, blank=True)
albums = models.ManyToManyField(Tag, blank = True,) 
```

改成

```
tags = models.ManyToManyField(Tag, blank=True, related_name="img_tags")
albums = models.ManyToManyField(Album, blank = True, related_name="img_albums") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:32:12.703

当您有两个字段是同一模型的外键时，您需要提供一个`related_name`让 django 知道如何调用该关系的字段。这就是错误所说的。

所以，通过给你的关系一个唯一的名字来更新你的模型：

```
tags = models.ManyToManyField(Tag, blank=True, related_name='image_tags')
albums = models.ManyToManyField(Tag, blank = True, related_name='album_tags') 
```

但是，您的意思*可能*是这样的：

```
tags = models.ManyToManyField(Tag, blank=True)
albums = models.ManyToManyField(Album, blank=True) 
```

# mediaelement.js - 显示两个播放器的音频播放器

> ID：12430809
> 
> 赞同：1
> 
> 时间：2012-09-14T19:27:18.763
> 
> 标签：mediaelement.js

首先我想说这是一个很棒的插件！我搜索了高低，毫无疑问，你还有很多其他的失败。

我已经安装了这个插件两个多月了，它一直在完美地工作。截至周二（2012 年 9 月 11 日），音频播放器在我安装它的页面/帖子上显示两次。我正在运行最新版本的 WordPress 插件 (2.9.1) 并搜索了论坛，但没有看到其他人谈论这个问题。

我检查了 Firefox、IE 和 Safari，它们都产生了相同的结果。但是，它确实在 iOS 中正确显示。

请点击此链接查看问题： [http ://www.senteo.net/michael-ruckman-speaks-about-senteo-on-vegas-profiles-radio-show/](http://www.senteo.net/michael-ruckman-speaks-about-senteo-on-vegas-profiles-radio-show/)

预先感谢您的帮助。

# machine-learning - 衡量机器学习模型是否过拟合的正确方法是什么？

> ID：12430811
> 
> 赞同：4
> 
> 时间：2012-09-14T19:27:24.570
> 
> 标签：machine-learning, data-mining

我理解过拟合和欠拟合的直观含义。现在，给定一个基于训练数据训练的特定机器学习模型，你如何判断训练是过拟合还是欠拟合？有没有量化的方法来衡量这些因素？

我们可以看看错误并说它是过拟合还是欠拟合？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T19:29:51.267

我相信最简单的方法是拥有两组数据。训练数据和验证数据。只要模型在训练数据上的适应度接近模型在验证数据上的适应度，就可以在训练数据上训练模型。当模型在训练数据上的适应度增加但在验证数据上没有增加时，那么你就过拟合了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T19:30:57.573

我认为通常的方法被称为交叉验证。这个想法是将训练集分成几部分，称为折叠，然后一次选择一个进行评估并在剩余的部分上进行训练。

当然，它不会测量实际的过拟合或欠拟合，但如果您可以改变模型的复杂性，例如通过更改正则化项，您可以找到最佳点。我认为，仅通过培训和测试就可以做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T09:50:46.810

您不会查看*训练*数据上的错误，而仅查看验证数据上的错误。

一种常见的测试方法是尝试不同的模型复杂度，看看误差如何随模型复杂度变化。通常这些具有典型的曲线。一开始，错误很快得到改善。然后是饱和（模型好的地方），然后它们又开始下降，但不是因为模型更好，而是因为过度拟合。您希望处于平稳期的低复杂度，这是提供合理概括的最简单模型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-09T02:21:30.507

现有的答案严格来说并没有错，但它们并不完整。是的，您确实需要一个验证集，但这里的一个重要问题是您不要简单地查看验证集上的模型错误并尝试将其最小化。这将导致过度拟合，因为您将有效地以这种方式拟合验证集。正确的方法不是最小化您的集合上的错误，而是使错误与您使用的训练和验证集无关。如果验证集上的误差显着不同（无论是更糟还是更好），那么模型就是过拟合的。此外，当然，当您在某个随机集上训练然后在另一个随机集上进行验证时，这应该以交叉验证的方式完成。

# jquery - 在angularjs中访问单击的元素

> ID：12430820
> 
> 赞同：172
> 
> 时间：2012-09-14T19:28:38.583
> 
> 标签：jquery, angularjs

我对 AngularJS 比较陌生，怀疑我没有掌握一个概念。我也在使用 Twitter Bootstrap，并且已经加载了 jQuery。

工作流程：用户单击列表中的链接，更新“主”部分，并且用户单击的链接获得活动课程。

基本 HTML 标记：

```
<ul class="list-holder" ng-controller="adminController">
   <li><a ng-click="setMaster('client')">Clients</li>
   <li><a ng-click="setMaster('employees')">Employees</li>
   <li><a ng-click="setMaster('etc')>Etc...</li>
</ul> 
```

在 jQuery 中执行此操作：

```
jQuery(".list-holder").on('click', 'a', function(event){
    event.preventDefault();
jQuery(".list-holder li").removeClass('active');
jQuery(this).parent('li').addClass('active');
}); 
```

但我不知道如何集成 Angular 和 jQuery 来完成这项工作，因为我正在使用 Angular 从服务器获取主列表（以 JSON 形式）并更新页面上的列表。

我该如何整合它？一旦我进入角度控制器功能，我似乎无法找到我点击的元素

控制器：

```
function adminController($scope)
    {    
        $scope.setMaster = function(obj)
        {
            // How do I get clicked element's parent li?
            console.log(obj);
        }
    } 
```

* * *

## 回答 #1

> 赞同：283
> 
> 时间：2012-09-14T20:01:50.383

虽然 AngularJS 允许您使用以下语法（注意函数的`$event`参数`setMaster`；此处的文档：http: [//docs.angularjs.org/api/ng.directive :ng点击](http://docs.angularjs.org/api/ng.directive:ngClick)):

```
function AdminController($scope) {    
  $scope.setMaster = function(obj, $event){
    console.log($event.target);
  }
} 
```

这不是解决这个问题的非常有角度的方式。AngularJS 的重点是模型操作。一个人会改变一个模型，让 AngularJS 计算出渲染。

解决此问题的 AngularJS 方式（不使用 jQuery 且**无需传递`$event`参数**）将是：

```
<div ng-controller="AdminController">
    <ul class="list-holder">
        <li ng-repeat="section in sections" ng-class="{active : isSelected(section)}">
            <a ng-click="setMaster(section)">{{section.name}}</a>
        </li>
    </ul>
    <hr>
    {{selected | json}}
</div> 
```

控制器中的方法如下所示：

```
$scope.setMaster = function(section) {
    $scope.selected = section;
}

$scope.isSelected = function(section) {
    return $scope.selected === section;
} 
```

这是完整的 jsFiddle：http: [//jsfiddle.net/pkozlowski_opensource/WXJ3p/15/](http://jsfiddle.net/pkozlowski_opensource/WXJ3p/15/)

# jquery - jQuery灯箱下一个图片切换

> ID：12430824
> 
> 赞同：0
> 
> 时间：2012-09-14T19:28:45.487
> 
> 标签：jquery, lightbox

我在切换到灯箱中的下一个图像时遇到问题。当我第一次单击下一步按钮时，一切正常。我似乎无法从那里获得下一张图片。下面是我正在使用的代码。任何帮助将不胜感激。

```
 $('#portfolioGallery .pGallery').click(function(){    
        var firstImg = $(this).find('img').clone();
        var nextImg = $(this).next().find('img').clone();
        $('#lightbox').append(firstImg);
        $('#next').click(function(){                    
                $('#lightbox').find('img').remove();
                $('#lightbox').append(nextImg);

        }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T19:33:44.263

看起来您的代码可能正在运行，但是您继续克隆然后选择相同图像的克隆，所以它似乎无法正常工作，我不明白克隆的目的是什么

```
 $('#portfolioGallery .pGallery').click(function(){    
    var firstImg = $(this).find('img');
    var nextImg = $(firstImg).next().find('img');  //try this
    $('#lightbox').append(firstImg);
    $('#next').click(function(){                    
            $('#lightbox').find('img').remove();
            $('#lightbox').append(nextImg);
    }) 
```

# asp.net-mvc-3 - 检索整个 DropDownlist

> ID：12430829
> 
> 赞同：0
> 
> 时间：2012-09-14T19:29:08.827
> 
> 标签：asp.net-mvc-3, drop-down-menu

如何恢复我的所有 DropDownList 选项？我尝试了很多不同的东西，但没有一个奏效。我不只想要选定的值，而是整个选项，它是`text`和`value`。

我尝试使用`$('form').serialize()`它，虽然它通过模型绑定到我的控制器来恢复复杂的对象，但整个下拉列表都丢失了，只有它的选定值返回。

我什至尝试生成具有以下结构的 json 对象（不成功）：

```
var list = [
{
"MyDropDownList":
{ "option": {"Text": "Some text", "Value": "Some value"} },
{ "option": {"Text": "Ohter text", "Value": "Other value"} } 
}
]; 
```

我真的在考虑创建一个嵌套对象来模拟下拉列表，而不是使用`List<SelectListItem>`

# apache - Apache 配置中的多个值

> ID：12430830
> 
> 赞同：0
> 
> 时间：2012-09-14T19:29:10.910
> 
> 标签：apache

**apache配置文件：（** 别人做的事情）

```
start of it
Keepalive off
Timeout 60
..
..
..
rest of config
finally followed by
Keepalive on
Timeout 300 
```

从结果的类型来看，它似乎正在使用配置中的底部值，只是想确保是这种情况

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:32:27.510

是的，当同一指令在同一范围内使用两次时，最后一个就是使用的。

尽管请注意，某些指令是列表，例如`IndexOptions`or `ServerAlias`。因此，这些实例的多个实例只是附加到选项列表中。而其他指令是规则链，与开/关或特定名称/值指令（如`ErrorDocument`、`KeepAlive`或`Timeout`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:32:48.730

如果围绕这些配置（即）没有任何条件，情况应该是这样`<if ...>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T19:37:54.960

通常是，但有时不是，例如目录索引是附加的...... [http://httpd.apache.org/docs/2.2/mod/mod_dir.html](http://httpd.apache.org/docs/2.2/mod/mod_dir.html)

# plugins - drawBackground 钩子去哪儿了？或者为什么我的最后一点颜色不对

> ID：12430832
> 
> 赞同：0
> 
> 时间：2012-09-14T19:29:12.757
> 
> 标签：plugins, flot

为了尝试解决[这个](https://stackoverflow.com/questions/12427026/draw-axis-thru-x-0-and-y-0)问题，我开始考虑为 flot 编写一个插件来做我需要的事情。它看起来令人惊讶地直截了当，但我遇到了一个小障碍。我首先使用 draw hook 来绘制我的轴（注意：我知道这段代码需要一些错误检查以确保原点不在图表之外）

```
 function draw(plot, ctx) {
    var offset = plot.getPlotOffset();
    var origin = plot.pointOffset({ x: 0, y: 0 });
    ctx.moveTo(offset.left, origin.top);
    ctx.lineTo(plot.width() + offset.left, origin.top);
    ctx.stroke();
    ctx.moveTo(origin.left, offset.top);
    ctx.lineTo(origin.left, plot.height() + offset.top);
    ctx.stroke();
} 
```

这很有效，有两个小障碍。第一个也是最重要的是，由于某种原因，它使我的数据系列的最后一点改变了颜色！看这里：

![在此处输入图像描述](../Images/ffec157dd40972c2efc42891883e3f5b.png)

右上角的点已变为黑色。通过单步执行代码，我可以观察到这仅在绘制轴时发生。在调用我的绘制代码之前，该点是正确的颜色。所以我认为这与第一个“笔画”上的绘图有关。由于某种原因，它似乎将黑色应用于最后一点。关于如何解决这个问题的任何想法？

第二个问题是，只有在 flot 绘制了其他所有内容（包括数据点）之后才调用此代码，这意味着我的线条出现在点的顶部而不是它们的下方。这只是对于那些非常靠近垂直轴的两个点的问题。查看 flot 文档，它提到了一个 drawBackground 钩子，但这似乎并不存在。我尝试使用它，但它抱怨 drawBackground 为空。所以发生了什么事？有没有更好的地方可以钩住并画出我的斧头？我想在 flot 计算出绘图区域的大小之后绘制第一组数据点之前绘制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:58:29.743

当前网站 API 文档中的内容与最新发布的版本 (0.7) 不匹配。为了使用这个`backgroundDraw`钩子，你需要一个更新版本的 flot，直接来自他们的[github 仓库](https://github.com/flot/flot/)。最新版本很好，但是在[此提交](https://github.com/flot/flot/commit/4ee1e04e19c739d16a641b1fa224e8f320ad55db)之后的任何内容都可以使用。

# wpf - 如何为每个 ListBoxItem 设置 ToolTip

> ID：12430835
> 
> 赞同：2
> 
> 时间：2012-09-14T19:29:19.117
> 
> 标签：wpf, listbox, tooltip, itemtemplate

我有`ListBox`控制权；我将如何使用下面的代码`ToolTip`为每个设置。`ListBoxItem`

```
<ListBox Name="FillSelections" 
         VerticalContentAlignment="Stretch"
         Margin="1, 3, 1, 3"
         IsEnabled="True" 
         Grid.Column="0" 
         Background="Transparent"
         HorizontalContentAlignment="Center"
         SelectedItem="{Binding SelectedColor}"
         SelectionMode="Single"
         Style="{StaticResource HorizontalListBoxStyle}"
         ItemsSource="{Binding FillColors}"
         ItemTemplate="{StaticResource ColorsItemTemplate}">
</ListBox>

<DataTemplate x:Key="ColorsItemTemplate">
    <Border Width="20" 
            Height="16"
            BorderBrush="Black"
            BorderThickness="1">
        <Border.Background>
            <SolidColorBrush Color="{Binding}" />
        </Border.Background>
        <Path Stroke="Red" 
              StrokeThickness="3"
              x:Name="abc"
              Visibility="Hidden">
            <Path.Data>
                <LineGeometry StartPoint="0,16" EndPoint="20,0"/>
            </Path.Data>
        </Path>
    </Border>
    <DataTemplate.Triggers>
        <DataTrigger Binding="{Binding}" Value="#00FFFFFF">
            <Setter TargetName="abc" Property="Visibility" Value="Visible"/>
        </DataTrigger>
    </DataTemplate.Triggers>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T19:33:12.040

尝试这样的事情

```
<ListBox Width="400" Margin="10" 
         ItemsSource="{Binding Source={StaticResource myTodoList}}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Path=TaskName}" 
                       ToolTipService.ToolTip="{Binding Path=TheTooltipText}"/>
        </DataTemplate>
     </ListBox.ItemTemplate>
</ListBox> 
```

当然，使用您的绑定源来调整 ItemsSource 绑定，并使用您实际想要显示的列表中对象的任何公共属性来调整绑定路径部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T19:36:15.220

您可以为`ListBoxItem`. 所以类似于：

```
<Window x:Class="WpfApplication3.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <Style TargetType="ListBoxItem">
            <Setter Property="ToolTip">
                <Setter.Value>
                    <ToolTip>
                        <TextBlock>Hello</TextBlock>
                    </ToolTip>
                </Setter.Value>
            </Setter>
        </Style>
   </Window.Resources>
    <Grid>
        <ListBox>
            <ListBoxItem>
                <TextBlock Text="Hello" />
            </ListBoxItem>
        </ListBox>
    </Grid>
</Window> 
```

# javascript - Chrome：“未捕获的语法错误：意外的令牌：”

> ID：12430840
> 
> 赞同：0
> 
> 时间：2012-09-14T19:29:32.817
> 
> 标签：javascript, json, jsonp

在 Chrome 上运行我收到以下错误消息：

> 未捕获的 SyntaxError：意外的令牌

这是我的代码中负责请求的部分：

```
function wetter() {

  $.ajax({
    'Accept': 'application/json',
    type: 'GET',
    url: '[here comes the url',
    dataType: 'jsonp',
    success: function (data) {
      //content
    }
  });
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:33:40.747

您正在尝试向发送 json 的脚本发出 jsonp 请求，类似于[this](https://stackoverflow.com/questions/12430198/unable-to-complete-the-getjson-request/12430328#12430328)。您不能只在 json 之后删除 ap 并期望它能够工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:42:53.410

它接收的数据类型可能不是它所期望的。您可能会返回一个 JSON 对象，而预期结果是带有填充的 JSON (JSONP)。您可以尝试返回 JSONP 类型的数据，也可以将上面代码中的数据类型更改为 JSON。

# android - 来自谷歌搜索结果的带问号的钻石

> ID：12430850
> 
> 赞同：1
> 
> 时间：2012-09-14T19:30:55.477
> 
> 标签：android, html, character-encoding

我遇到了下一个编码问题：
起初查询谷歌时，用户代理是硬编码的：就像这样

```
"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:13.0) Gecko/20100101 Firefox/13.0" 
```

我在设备“A”上收到**有效结果**，但在设备“B”上，方法： `httpConnection.getResponseCode();`
返回`time out exception`。
然后我决定尝试一些巫术，我将“用户代理”更改为：

```
String userAgent = System.getProperty("http.agent"); 
```

现在我在设备“B”（希伯来语和英语）上得到可读的结果，但设备“A”在希伯来语的菱形内返回问号（编码问题）（英语工作正常）。

请告知（我需要做什么才能摆脱他们的钻石）:)
我已经在
Elad下面添加了我使用的代码

```
public ArrayList<ItemSearch> getSuggestFromServer(String query,
        Context cntxt, int iCountResult)
{
    String savedQuery = String.copyValueOf(query.toCharArray());
    ArrayList<ItemSearch> mResultArrayList = new ArrayList<ItemSearch>();
    ArrayList<ItemSugges> mSuggesArrayList = new ArrayList<ItemSugges>();
    String mSuggestUri = null;
    String language = "";
    String country = "";
    if (mSuggestUri == null)
    {
        Locale l = Locale.getDefault();
        language = l.getLanguage();
        country = l.getCountry().toLowerCase();
        // Chinese and Portuguese have two langauge variants.
        if ("zh".equals(language))
        {
            if ("cn".equals(country))
            {
                language = "zh-CN";
            } else if ("tw".equals(country))
            {
                language = "zh-TW";
            }
        } else if ("pt".equals(language))
        {
            if ("br".equals(country))
            {
                language = "pt-BR";
            } else if ("pt".equals(country))
            {
                language = "pt-PT";
            }
        }
        mSuggestUri = cntxt.getResources().getString(
                "http://www.google.com/complete/search?hl=%1$s&amp;gl=%2$s&amp;", language, country)
                + "q=";
    }
    String resultString = new String("");
    try
    {
        query = URLEncoder.encode(query, "UTF-8");
        mSuggestUri += query + "&output=toolbar";

        URLConnection connection = null;
        // mSuggestUri
        URL url = new URL(mSuggestUri);
        connection = url.openConnection();
        HttpURLConnection httpConnection = (HttpURLConnection) connection;
        httpConnection.setRequestMethod("GET");

        String userAgent = System.getProperty("http.agent");
        httpConnection
                .setRequestProperty(
                        "User-Agent",
                        userAgent);

        httpConnection
                .setRequestProperty("Content-Type",
                        "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
        httpConnection.setRequestProperty("Accept-Encoding", "deflate");

        httpConnection.setDoOutput(false);
        httpConnection.setDoInput(true);

        httpConnection.setConnectTimeout(2000);
        httpConnection.setReadTimeout(1000);

        // added
        httpConnection.setRequestProperty("http.keepAlive", "false");

        httpConnection.setRequestProperty("Connection", "close");
        // added

        httpConnection.connect();
        int responseCode = httpConnection.getResponseCode();
        if (responseCode == HttpURLConnection.HTTP_OK)
        {
            try
            {
                XmlPullParserFactory factory = XmlPullParserFactory
                        .newInstance();
                factory.setValidating(false);
                XmlPullParser mxml = factory.newPullParser();
                mxml.setInput(httpConnection.getInputStream(), null);
                int eventType = mxml.getEventType();
                int i = 0;
                while ((eventType != XmlPullParser.END_DOCUMENT))
                {
                    switch (eventType)
                    {
                        case XmlPullParser.START_DOCUMENT:

                            break;
                        case XmlPullParser.START_TAG:
                            String nameTag = mxml.getName();
                            if (nameTag.contains("suggestion"))
                            {
                                ItemSugges isuggest = new ItemSugges();
                                isuggest.sugges = mxml.getAttributeValue(
                                        null, "data");
                                mSuggesArrayList.add(isuggest);
                            } else if (nameTag.contains("num_queries"))
                            {
                                mSuggesArrayList.get(i).weigth = Long
                                        .valueOf(mxml.getAttributeValue(
                                                null, "int"));
                                i++;
                            }
                            break;
                        case XmlPullParser.TEXT:
                            String name = mxml.getText();
                            break;
                        case XmlPullParser.END_TAG:

                            break;
                        default:
                            break;
                    }
                    try
                    {
                        eventType = mxml.next();
                    } catch (IOException e)
                    {
                        e.printStackTrace();
                    }
                }

                for (int indx = 0; mSuggesArrayList.size() > indx; indx++)
                {
                    ItemSearch is = new ItemSearch();
                    is.nameItem = mSuggesArrayList.get(indx).sugges;
                    is.spannerString = Mngr.getInstance().getSpannedString(
                            is.nameItem, savedQuery);
                    is.typeItem = typeItemSearch.web;
                    is.metaInfo = mSuggestUri = cntxt.getResources()
                            .getString(R.string.google_search_extended,
                                    language, country)
                            + "q=" + is.nameItem;

                    mResultArrayList.add(is);
                }
            } catch (Exception e)
            {
                e.printStackTrace();
            }
        } else
        {
            resultString = "Server does not respond";
        }
    } catch (MalformedURLException e)
    {
        resultString = "MalformedURLException:" + e.getMessage();
    } catch (IOException e)
    {
        Log.i("elad", "bummer", e);
        resultString = "IOException:" + e;//.getMessage();
    }
    return mResultArrayList;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T08:56:21.607

找到解决方案，我找到了这个[网站](http://www.gtrifonov.com/2011/04/15/google-android-user-agent-strings-2/)
所以我决定使用下一个用户代理（硬编码）

```
Mozilla/5.0 (Linux; U; Android 0.5; en-us) AppleWebKit/522+ (KHTML, like Gecko) Safari/419.3 
```

没有问号。
它现在适用于两种设备。

# ruby - 使用 Ruby 删除数组中字符串的最佳方法

> ID：12430867
> 
> 赞同：16
> 
> 时间：2012-09-14T19:32:22.643
> 
> 标签：ruby, arrays

假设我有这个数组：

```
array = ["str1", "str2", "str3", "str4", "str5", "str6", "str7", "str8"] 
```

我在做什么：

```
array.delete_if {|i| i == "str1" || i == "str3" || i == "str5"} 
```

我有：

```
["str2", "str4", "str6", "str7", "str8"] 
```

ruby 有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-14T19:33:31.177

你可以这样做：

```
array - %w{str1 str2 str3} 
```

请注意，这会返回一个带有`"str1"`、`"str2"`和的新数组`"str3"`，而不是`array`直接修改（就像`delete_if`那样）。`array`您可以像这样简洁地重新分配新数组：

```
array -= %w{str1 str2 str3} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-20T12:08:48.050

```
array.reject{|e| e=~ /str[135]/} 
```

# go - 为已解析的模板指定名称

> ID：12430870
> 
> 赞同：3
> 
> 时间：2012-09-14T19:32:39.663
> 
> 标签：go, go-templates

我正在尝试使用 walk in a folder 动态解析文件，并且我希望能够设置文件“path/file.html”的路径。但我的问题是，如果我在文件夹“path/folder/files.html”中有一个文件，我不能这样做，因为当我`ExecuteTemplate`的文件名将是相同的“files.html”时。是否可以将每个模板命名为 I ParseFiles？

如果尝试一次完成所有文件都行不通，我可以一次处理一个文件。

```
// Parse file and send to responsewriter
func View(w http.ResponseWriter, path string) {
    temp, err := template.ParseFiles("application/views/"+path+".html")
    if err != nil {
        http.Error(w, err.Error(), http.StatusInternalServerError)
    } else {
        temp.ExecuteTemplate(w, path, nil)
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T21:47:27.237

使用`filepath.Walk`和 一种`consumer`方法遍历文件系统，该方法将创建具有完整文件路径作为名称的模板：

```
package main

import (
    "fmt"
    "html/template"
    "os"
    "path/filepath"
)

func consumer(p string, i os.FileInfo, e error) error {
    t := template.New(p)
    fmt.Println(t.Name())
    return nil
}

func main() {
    filepath.Walk("/path/to/template/root", filepath.WalkFunc(consumer))
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T10:32:52.457

你可以试试template.Lookup，整个过程是这样的：

```
var (
   templates *template.Template 
)

func loadTemplate() {
    funcMap := template.FuncMap{        
        "safe":func(s string) template.HTML {
            return template.HTML(s)
        },
    }
    var err error
    templates, err = utils.BuildTemplate("/theme/path/", funcMap)
    if err != nil {
        log.Printf("Can't read template file %v,", err)
    }   
 }
func homeHandler(w http.ResponseWriter, r *http.Request) {  
        //lookup the theme your want to use
    templ = templates.Lookup("theme.html")
    err := templ.Execute(w, data)
    if err != nil {
        log.Println(err)
    }
 }

 func main() {
   loadTemplate()
 } 
```

BuildTemplate 看起来像：

```
func BuildTemplate(dir string, funcMap template.FuncMap) (*template.Template, error) {
    fs, err := ioutil.ReadDir(dir)
    if err != nil {
        fmt.Printf("Can't read template folder: %s\n", dir)
        return nil, err
    }
    files := make([]string, len(fs))
    for i, f := range (fs) {
        files[i] = path.Join(dir, f.Name())
    }
    return template.Must(template.New("Template").Funcs(funcMap).ParseFiles(files...)), nil
} 
```

# image - Golang 中的图像处理

> ID：12430874
> 
> 赞同：15
> 
> 时间：2012-09-14T19:32:48.693
> 
> 标签：image, go

我有以下内容：

1.  背景图片 (bi)
2.  图像 1 (i1)
3.  图像 3 (i2)

我想以某个角度将 i1 和 i2 定位在 bi 上，然后生成最终图像。我有 i1 和 i2 的 x 和 y 轴值以及它们的预期旋转角度。i1 和 i2 可以部分重叠。但是我知道 i1 和 i2 的 z 索引，如果它们重叠，那么谁将在前台。

我正在尝试在 Golang 中实现这一目标。
[http://golang.org/doc/articles/image_draw.html](http://golang.org/doc/articles/image_draw.html)似乎可以做到这一点。任何人都知道任何类似的代码示例，这可能会有所帮助。或者你能给我看几行 Golang 中的伪程序吗？

谢谢。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-15T02:43:13.790

不确定您到底在寻找什么，而且我根本没有使用图像包......但只是按照示例代码并使用[graphics-go](http://code.google.com/p/graphics-go/)包（它适用于我），我能够在至少。

```
package main

import (
    "fmt"
    "os"
    "image/draw"
    "image"
    "image/jpeg"
    "code.google.com/p/graphics-go/graphics"
)

func main() {
    fImg1, _ := os.Open("arrow1.jpg")
    defer fImg1.Close()
    img1, _, _ := image.Decode(fImg1)

    fImg2, _ := os.Open("arrow2.jpg")
    defer fImg2.Close()
    img2, _, _ := image.Decode(fImg2)

    m := image.NewRGBA(image.Rect(0, 0, 800, 600))
    draw.Draw(m, m.Bounds(), img1, image.Point{0,0}, draw.Src)
    //draw.Draw(m, m.Bounds(), img2, image.Point{-200,-200}, draw.Src)
    graphics.Rotate(m, img2, &graphics.RotateOptions{3.5})

    toimg, _ := os.Create("new.jpg")
    defer toimg.Close()

    jpeg.Encode(toimg, m, &jpeg.Options{jpeg.DefaultQuality})
} 
```

# rest - Play 中有多个 REST 接口！2 应用

> ID：12430882
> 
> 赞同：4
> 
> 时间：2012-09-14T19:33:28.433
> 
> 标签：rest, playframework, playframework-2.0

我们有戏！我们需要向 Intranet 公开一组 REST 接口和必须向公共 Internet 公开一组 REST 接口的应用程序。它们共享一个数据层，因此我们希望尽可能将它们一起运行。我的假设是它们将在不同的端口上运行。刚开始玩！，我不知道这是否可以在单个 Play 中完成！实例。我看过模块，但这似乎不适合我们正在做的事情。有没有人有过这种情况的经验？

忘了提到我们正在使用 Play！2.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:26:31.547

您可以通过检查 ip 来限制/允许对资源的访问。

```
public class IPLocalSecurity extends Controller {
    @Before
    public static void checkAccess() throws Exception {
        if (!request.remoteAddress.matches("192\.168\.1\.*")) {
             forbidden();
        }
    }
} 
```

并在资源控制器中使用它。

```
@With(IPLocalSecurity.class)
public class IntranetController extends Controller{
    ....
} 
```

# javascript - JavaScript Pub/Sub 属性访问问题

> ID：12430883
> 
> 赞同：1
> 
> 时间：2012-09-14T19:33:28.520
> 
> 标签：javascript, underscore.js, publish-subscribe

我在这里遇到了一个奇怪的问题，希望大家能帮忙。

## 项目详情

我正在为一个包含`pubsub.subscribe_once()`方法的大型应用程序开发一个简单的发布/订阅实现。此方法可以创建一次性订阅，这意味着创建通用订阅，然后一旦触发正确的“发布”事件并运行订阅回调，订阅就会自行删除。

```
subscribe_once: function(topic, func) {
    var sub = pubsub.subscribe(topic, func),
        old_func = sub.func;

    // rewrite our subscription's method to remove itself after invocation
    sub.func = function() {
        // call the original function
        old_func.apply(this);
        // remove subscription from topic
        pubsub.unsubscribe(sub);
    };

    return sub;
} 
```

## 问题

我似乎对这个过程的内存流有某种问题。（为了更好地理解下面的解释，我建议你边走边看下面的 jsfiddle 演示。）我创建了一个 subscribe_once('someevent') 订阅，然后触发 publish('someevent')。当调用 publish 方法时，您希望看到主题哈希表包含一个“someevent”键，它引用了一个订阅对象数组。事实上，如果您引用主题["someevent"]，您会看到一个包含单个订阅的数组。但是，如果您引用主题，您会看到“someevent”键，但**数组是空的！**

通过注释掉`pubsub.unsubscribe(sub);`问题可以消除，即使这个函数直到我们运行之后才被触发`console.log(topics)`。

此外，这似乎不是给定浏览器“线程”方式的问题`console.log`；尝试`console.log(topics, topics[topic], topics, topics[topic])`，您会得到相同的结果。

### 演示：http: [//jsfiddle.net/4Ab6c/](http://jsfiddle.net/4Ab6c/)

任何帮助将*不胜*感激！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:11:28.937

我仍在寻找一些文档来支持我，但我怀疑控制台中显示的对象正在对您的`topics`对象执行惰性评估。我在被推送到数组后添加`console.log(topics)`到`subscribe`方法`sub`中，得到的结果与您的“但不在此处”日志相同。当我将小提琴的最后一行`pubsub.publish('someevent')`放入`setTimeout`其中并在回调运行之前打开对象树`publish`时，它会在数组中显示订阅，即使在回调运行后它也会保持这种状态。如果在回调运行之前我没有在控制台中打开对象树，那么我会看到空数组。

我将继续搜索博客文章或确认正在发生惰性评估的内容。

以防我不够明显，我的意思是懒惰，控制台不会收集对象的详细信息，直到在控制台中单击打开树视图。

我在 Chrome 中工作。

**更新**

我在 Firefox 上也发现了类似的行为。Firefox 识别出数组中有一个对象，但如果您在发布之前没有深入到数组中，那么数组的下钻将是空的。

我从您的评论中更新了小提琴：

[http://jsfiddle.net/4Ab6c/2/](http://jsfiddle.net/4Ab6c/2/)

请试试这个：

*   在发布事件触发之前运行小提琴并展开第一个 console.log 的对象树，我将其设置为 5 秒超时，但您可以根据您进入控制台的速度并单击检查员打开。

*   您应该会按预期在数组中看到订阅对象。

*   清除控制台并再次运行小提琴。这次不要打开对象检查器，直到发布事件触发并且所有代码都运行完毕。

*   现在，当您打开第一个 console.log 的对象检查器时，您应该不会在数组中看到订阅事件。

**更新 2** 这是一个更简单的小提琴，它表现出相同的行为：

[http://jsfiddle.net/4Ab6c/3/](http://jsfiddle.net/4Ab6c/3/)

如果你在第二个出现之前先展开，那么你会得到 foo: bar。如果你在第二个出现后第一个展开，你会得到 foo: baz。

**更新 3**

而且，瞧，[另一个 SO 问题](https://stackoverflow.com/questions/4057440/is-chromes-javascript-console-lazy-about-evaluating-arrays)支持惰性评估的动议。

# javascript - 通过 JavaScript 中的索引从对象数组中获取值？

> ID：12430892
> 
> 赞同：0
> 
> 时间：2012-09-14T19:34:10.490
> 
> 标签：javascript, arrays, json

这是我的对象：

```
var obj =
{
    salesForecast : {},
    currentWeek : 1,
    data : {
      "actual demand":  [93,87,100,63,50,76,98,140,118,64,104,104,125,131,138,91,48,64,76,99,152,93,123,127,103,97,116,45,14,80,32,120,87,128,147,74,73,135,140,71,125,163,77,78,139,59,95,108,61,101,80,85],
      "week+1":         [97,96,75,72,124,146,101,116,90,126,112,152,164,101,112,80,102,110,113,127,157,123,132,97,100,62,83,51,88,70,95,155,143,122,135,116,133,118,140,127,143,134,76,122,131,77,122,126,105,107,116,96],
      "week+2":         [107,106,83,79,136,161,111,128,99,139,123,167,180,111,123,88,112,121,124,140,173,135,145,107,110,68,91,56,97,77,105,171,157,134,149,128,146,130,154,140,157,147,84,134,144,85,134,139,116,118,128,106],
      "week+3":         [89,88,69,66,114,134,93,107,83,116,103,140,151,93,103,74,94,101,104,117,144,113,121,89,92,57,76,47,81,64,87,143,132,112,124,107,122,109,129,117,132,123,70,112,121,71,112,116,97,98,107,88],
      "week+4":         [95,94,74,71,122,143,99,114,88,123,110,149,161,99,110,78,100,108,111,124,154,121,129,95,98,61,81,50,86,69,93,152,140,120,132,114,130,116,137,124,140,131,74,120,128,75,120,123,103,105,114,94]
    }
}; 
```

我的功能：

```
function setPins() {
    var currentWeek = obj.currentWeek;
    console.log(currentWeek);

    var week1 = obj.data["week+1"][currentWeek],
        week2 = obj.data["week+2"][currentweek],
        week3 = obj.data["week+3"][currentweek],
        week4 = obj.data["week+4"][currentweek];

    console.log(week1);
    console.log(week2);
    console.log(week3);
    console.log(week4);
} 
```

现在，当我调用 时`setPins()`，我希望记录值 96、106、88 和 94。我实际得到的是：

> 未捕获的 ReferenceError：当前周未定义

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T19:37:43.733

变量名区分大小写。您在`currentWeek`和之间交替`currentweek`。

# regex - 您如何从正则表达式中提取/打印匹配项，并且只匹配正则表达式的匹配项？

> ID：12430895
> 
> 赞同：0
> 
> 时间：2012-09-14T19:34:17.777
> 
> 标签：regex, unix, vim

我有一大堆变量名，我需要在迁移文件、视图、语言环境文件等之间移动。

我不想重新输入所有这些，也不想复制、粘贴和修剪，因为我做的太多了。

我一直在尝试通过正则表达式将它们拉出来，但每次我尝试这样做时，都会打印整行而不是只打印我想要的以 ':' 开头并以 '\s' 结尾的变量名，如下所示： :name, :email, :home_phone 等

我怎样才能让这些只是提取出我想要的东西？

我一直在尝试在 vim 中这样做：

```
 :%s/:.*\s/y 
```

这是输入文件：

```
 <%= f.input  :name %>
      <%= f.input  :email %>
      <%= f.input  :home_phone %>
      <%= f.input  :cell_phone %>
      <%= f.input  :other_phones %>

      <%= f.input  :last_position_candidate_id %>
      <%= f.input  :last_position_title %>
      <%= f.input  :last_position_company_id %>
      <%= f.input  :last_position_start_date %>
      <%= f.input  :last_position_salary %>
      <%= f.input  :last_position_medical_insurance %>
      <%= f.input  :last_position_christmas_bonus %>
      <%= f.input  :last_position_annual_bonus %>
      <%= f.input  :last_position_vehicle %>
      <%= f.input  :last_position_other_benefits %>

      <%= f.input  :conversational_english %>
      <%= f.input  :written_english %>
      <%= f.input  :vehicle %> 
```

这就是我想要得到的：

```
 :name 
      :email 
      :home_phone 
      :cell_phone 
      :other_phones 
      :last_position_candidate_id 
      :last_position_title 
      :last_position_company_id 
      :last_position_start_date 
      :last_position_salary 
      :last_position_medical_insurance 
      :last_position_christmas_bonus 
      :last_position_annual_bonus 
      :last_position_vehicle 
      :last_position_other_benefits 
      :conversational_english 
      :written_english 
      :vehicle 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T19:44:36.347

```
%s/.*\(:\w\+\)\s.*/\1/ 
```

有关详细信息，请参阅[http://vimregex.com/#backreferences](http://vimregex.com/#backreferences)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T21:19:16.360

为了避免重新输入，可能就足够了

```
:set iskeyword+=: 
```

在 Vim 中打开源文件，并在另一个缓冲区中使用内置的插入模式完成（例如`:last_`，后跟`Ctrl`+ ）。`N`

# php - 创建自定义 LISTSERV 页面的最佳方法是什么？

> ID：12430896
> 
> 赞同：1
> 
> 时间：2012-09-14T19:34:35.390
> 
> 标签：php, listserv

我安装了 LISTSERV 并且有很多列表。在我的 LISTSERV 安装中使用了三个不同的域。我想为每个域创建一个网页（最好在 PHP 中），它将显示该域中的所有列表，并允许用户检查他们想要订阅的所有列表（或取消选中以取消订阅）。

我怀疑将 LISTSERV 与 Oracle 集成将是最好的方法，但想知道是否有更好的方法。

# android - 使用带有搜索栏的色调图像效果

> ID：12430899
> 
> 赞同：1
> 
> 时间：2012-09-14T19:34:55.250
> 
> 标签：android, seekbar

我有一个`hue`效果代码，我想将它与 a 一起使用`seek bar`，`applyHueFilter( bitmap, level )`当我将搜索栏的圆圈向右移动时，色调过滤器会增加，而当我将它向左移动时，色调过滤器会减少（删除）..

```
public static Bitmap applyHueFilter(Bitmap source, int level) {
    // get image size
    int width = source.getWidth();
    int height = source.getHeight();
    int[] pixels = new int[width * height];
    float[] HSV = new float[3];
    // get pixel array from source
    source.getPixels(pixels, 0, width, 0, 0, width, height);

    int index = 0;
    // iteration through pixels
    for(int y = 0; y < height; ++y) {
        for(int x = 0; x < width; ++x) {
            // get current index in 2D-matrix
            index = y * width + x;
            // convert to HSV
            Color.colorToHSV(pixels[index], HSV);
            // increase Saturation level
            HSV[1] *= level;
            HSV[1] = (float) Math.max(0.0, Math.min(HSV[1], 1.0));
            // take color back
            pixels[index] |= Color.HSVToColor(HSV);
        }
    }
    // output bitmap                
    myBitmap.setPixels(pixels, 0, width, 0, 0, width, height);
    return myBitmap;        
} 
```

当时我`applyHueFilter`在`progressChanged`..

```
 hueSB.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
            applyHueFilter(myBitmap, 100);
        }

        public void onStartTrackingTouch(SeekBar seekBar) {

        }

        public void onStopTrackingTouch(SeekBar seekBar) {

        }

    }); 
```

发生的情况是，当我将`seekbar`其向右移动时，色调适用，但当我将其向左移动时，它不会被移除（减少）..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-04-25T04:47:37.133

```
Canvas canvas = new Canvas(yourbitmap);

        Paint paint = new Paint();
        paint.setColorFilter(ColorFilterGenerator.adjustHue(seekbarvalue));
        canvas.drawBitmap(yourbitmap, 0, 0, paint);
return yourbitmap;

public class ColorFilterGenerator
{

    public static ColorFilter adjustHue( float value )
    {
        ColorMatrix cm = new ColorMatrix();

        adjustHue(cm, value);

        return new ColorMatrixColorFilter(cm);
    }

    public static void adjustHue(ColorMatrix cm, float value)
    {

        value = (value % 360.0f) * (float) Math.PI / 180.0f;

        if (value == 0)
        {
            return;
        }
        float cosVal = (float) Math.cos(value);
        float sinVal = (float) Math.sin(value);
        float lumR = 0.213f;
        float lumG = 0.715f;
        float lumB = 0.072f;
        float[] mat = new float[]
                {
                        lumR + cosVal * (1 - lumR) + sinVal * (-lumR), lumG + cosVal * (-lumG) + sinVal * (-lumG), lumB + cosVal * (-lumB) + sinVal * (1 - lumB), 0, 0,
                        lumR + cosVal * (-lumR) + sinVal * (0.143f), lumG + cosVal * (1 - lumG) + sinVal * (0.140f), lumB + cosVal * (-lumB) + sinVal * (-0.283f), 0, 0,
                        lumR + cosVal * (-lumR) + sinVal * (-(1 - lumR)), lumG + cosVal * (-lumG) + sinVal * (lumG), lumB + cosVal * (1 - lumB) + sinVal * (lumB), 0, 0,
                        0f, 0f, 0f, 1f, 0f,
                        0f, 0f, 0f, 0f, 1f };
        cm.postConcat(new ColorMatrix(mat));
    }
} 
```

此代码使用滤色器有效地处理色调效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:32:32.497

简单的逻辑错误。你有`applyHueFilter(myBitmap, 100);`......无论如何你都会增加100。

它应该是：

```
applyHueFilter(myBitmap, progress); 
```

看这个`applyHueFilter`方法，你也一直在做`HSV[0] *= level;`，所以无论如何，你总是在增加色调，只是增加了更少或更多的量。

# grails - 选择Multiple，获取选中的值和未选中的值

> ID：12430901
> 
> 赞同：2
> 
> 时间：2012-09-14T19:35:13.923
> 
> 标签：grails

我的页面上有一个选择多个。用户可以将元素添加到列表中并选择一个或多个删除它们。

当我通过 params.selectName 获得选择的值时，我只收到选择的值。我知道这是默认行为，但我需要所有这些，而不仅仅是选定的元素。

每次向服务器发送数据时，我都不想选择所有元素。有没有人有更好的解决方案？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:33:22.850

标记采用的方法`<g:checkBox>`是创建一个与复选框同名但带有下划线的隐藏字段。您可以在这里使用类似的技巧，即每当您添加一个新`<option>`的到时，`<select>`您还添加一个名为（比如说）`selectName_options`具有相同值的隐藏字段。然后在控制器中，您可以区分`params.list('selectName')`和`params.list('selectName_options')`从列表中获取未选择的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:24:40.133

对于应该是一个简单的问题，这有点复杂，但是在我当前的项目中，我们遇到了同样的问题，并按照@cdeszaq 的描述解决了它。

假设一个类的对象有一个项目的`Foo`集合（`bars``Bar``Bar``String name``toString()``FooController`

```
def removedItems = fooInstance.bars.findAll {
    !params.bars.collect { it.key }.contains(it.name)
}

if(removedItems){
    removedItems.each {
        fooInstance.removeFromBars(it)
    }
} 
```

# php - cakephp 表单助手错误

> ID：12430902
> 
> 赞同：0
> 
> 时间：2012-09-14T19:35:26.183
> 
> 标签：php, validation, cakephp, form-helpers

我想我在 Cake 的 FormHelper 类中发现了一个错误，但也许我只是没有使用正确的函数，所以希望这里有人知道。以下是相关代码：

```
<?php
    echo $this->Form->input('first_name', array('value' =>'First Name', 'label' => false));
?> 
```

如您所见，我只是输出一个默认值为 First Name 的输入文本字段。我遇到的问题是，如果用户未提供有效名称，则表单不会保留用户尝试提交的值，而是再次显示默认值（名字）。所以基本上，如果我要输入字段“hey123”然后单击提交，表单将在文本字段旁边显示适当的验证错误消息，但文本字段本身不会包含我之前输入的 hey123，它将再次显示名字文本。

是否可以让输入字段最初显示默认值，同时还允许在发生验证错误时保留用户在表单中输入的任何内容？因此，在前面的示例中，它不会在错误验证页面上显示名字文本，而是显示导致问题的原始条目 hey123。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T19:41:17.373

利用：

```
<?php
    echo $this->Form->input('first_name', array('default' =>'First Name', 'label' => false));
?> 
```

请注意，使用`default`而不是`value`. `Default`将设置一个“默认”值，同时`value`显式设置该字段的值。

# c++ - 如何在这个程序中使用向量（使用字符串）？C++

> ID：12430903
> 
> 赞同：-1
> 
> 时间：2012-09-14T19:35:31.180
> 
> 标签：c++, string, vector, justify

我将如何在当前程序中使用向量；“在向量中使用美元面额 1、2、5、10、20、50 和 100。”

```
int main()
{

    int i, dollar[7] = {0}, denom[7] = {1,2,5,10,20,50,100}, total = 0;
    string names[7] = {
        "1-Dollar bill",
        "2-Dollar bill",
        "5-Dollar bill",
        "10-Dollar bill",
        "20-Dollar bill",
        "50-Dollar bill",
        "100-Dollar bill"
    };

    for(i = 0; i < 7; i++)
    {
        cout << "How many " << setw(5) << names[i];
        if(i == 0)
            cout << "s";
        else  
            cout << "s";
        cout << " do you have? ";
        cin >> dollar[i];
    }

    for(i = 0; i < 7; i++)
    {
        cout <<  "You have" << setw(5) << dollar[i] << " " << names[i] << right;
        if(i == 0)
            if(dollar[i] == 1)
                cout << " ";
            else  
                cout << "s ";    
        else if(dollar[i] != 1) 
            cout << "s ";
        total += dollar[i] * denom[i];
        cout << endl;
    }

    cout << "The value of all your bills is $" << total << endl;
    return 0;
} 
```

基本上我的输出看起来像这样 =>“你所有账单的价值是 $”无论输入什么总和“”

我已经阅读了我的书并使用了 youtube，但仍然不能完全理解如何在此作业中使用向量；我是否也在 setw(5) 下正确使用“右对齐”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:44:16.317

再简单不过了，替换

```
string names[7]= {
    "1-Dollar bill",
    "2-Dollar bill",
    "5-Dollar bill",
    "10-Dollar bill",
    "20-Dollar bill",
    "50-Dollar bill",
    "100-Dollar bill"
}; 
```

和

```
vector<string> names(7); /* note round brackets not square brackets */
names[0] = "1-Dollar bill";
names[1] = "2-Dollar bill";
names[2] = "5-Dollar bill";
names[3] = "10-Dollar bill";
names[4] = "20-Dollar bill";
names[5] = "50-Dollar bill";
names[6] = "100-Dollar bill"; 
```

与`dollar`and相同`denom`，您就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:50:21.960

```
int main()
{
    std::vector<int>dollar;             //This makes an empty vector of ints
    std::vector<int>denom;              //so does this. 
    int total = 0;

    std::vector<std::string> names;     //this makes an empty vector of strings.
    names.push_back("1-Dollar bill");    //push_back means add to the end of the vector
    names.push_back("2-Dollar bill");
    names.push_back("5-Dollar bill");
    names.push_back("10-Dollar bill");
    names.push_back("20-Dollar bill");
    names.push_back("50-Dollar bill");
    names.push_back("100-Dollar bill");

    cout << names[0]; //This prints "1-Dollar bill"
} 
```

希望这会让你开始。

# sql - SQL将样本点转换为持续时间

> ID：12430906
> 
> 赞同：1
> 
> 时间：2012-09-14T19:35:48.560
> 
> 标签：sql, algorithm

这类似于[mysql query 中的 Compute dates and durations](https://stackoverflow.com/questions/8566278/compute-dates-and-durations-in-mysql-query)，除了我没有唯一的 ID 列可以使用，而且我的样本不是起点/终点。

作为一个有趣的实验，我将 cron 设置为`ps aux > 'date +%Y-%m-%d_%H-%M'.txt`. 我现在有大约 250,000 个“机器正在运行的东西”的样本。

我想把它变成“进程| cmd | 开始| 停止”的列表。假设是“开始”事件是该对第一次存在，而“停止”事件是它停止存在的第一个样本：样本不可能“丢失”或任何事情。

也就是说，有哪些方法可以进行这种转换，最好使用 SQL（因为我喜欢 SQL，这似乎是一个不错的挑战）。假设 pids 不能重复，这是一项微不足道的任务（将所有内容放在一个表中，`SELECT MIN(time), MAX(time), pid GROUP BY pid`）。但是，由于 PID/cmd 对是重复的（我检查过，有重复），我需要一种方法来执行真正的“查找所有连续段”搜索。

如有必要，我可以做一些形式

```
Load file0 -> oldList
ForEach fileN:
    Load fileN ->newList
    oldList-newList = closedN
    newList-oldList = openedN
    oldList=newList 
```

但这不是 SQL，也不是很有趣。谁知道呢，我最终可能会在某个时候拥有真正的 SQL 数据来处理这个属性。

我正在考虑首先构建一个差异表，然后将所有关闭与所有打开连接起来，并在每次打开后拉出最小距离关闭，但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:34:17.320

你没有提到你正在使用什么数据库。让我假设您正在使用支持排名函数的数据库，因为这简化了解决方案。

解决这个问题的关键是观察。您想为每个 pid 分配一个 id 以查看它是否是唯一的。*当 pid未*出现在先前的时间戳输出中时，我将假设 pid 表示单个进程。

现在，想法是：

1.  为每组输出分配一个序列号。根据日期，第一次调用 ps 得到 1，接下来是 2，依此类推。
2.  根据日期为每个 pid 分配一个序号。第一次出现得到 1，接下来是 2，依此类推。
3.  对于按顺序出现的 pid，差异是一个常数。我们可以将其称为该集合的 groupid。

所以，这是实际的查询：

```
select groupid, pid, min(time), max(time)
from (select t.*,
             (dense_rank() over (order by time) -
              row_number() over (partition by pid order by time)
             ) as groupid
      from t
     ) t
group by groupid, pid 
```

这适用于大多数数据库（SQL Server、Oracle、DB2、Postgres、Teradata 等）。它在 MySQL 中不起作用，因为 MySQL 不支持窗口/分析函数。

# jquery - 使用带有 Ajax / Jquery 的表单数据创建 div

> ID：12430907
> 
> 赞同：1
> 
> 时间：2012-09-14T19:36:00.290
> 
> 标签：jquery, ajax

这是我的表格，不知道我是否已正确设置它以与 AJAX 一起使用......

```
<form id="form" method="post">
<input id="cloudName" name="cloudName" type="text" placeholder="Enter cloud name">
<input id="cloudFamily" name="cloudFamily" type="text" placeholder="Enter cloud family">
<button id="add" type="submit" name="add">Add</button>
</form> 
```

我基本上想知道如何使用 class="cloud" 创建一个 div，并将第一个输入项“cloudName”放在 div 的第一个 p 标签中，并将“cloudFamily”放在我们创建的 div 的第二个 p 标签中我们按下添加按钮...希望有一个脚本可以让我们也不断添加 div。任何帮助表示赞赏。我在网上搜索了使用 AJAX 添加 div，但没有任何效果，可能是因为我在页面的其他地方进行了其他 ajax 调用？不知道会不会影响

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:55:45.667

假设您能够使 jQuery 正常工作，下面是一个应该对您有用的示例。**请注意，这假设您有一个名为cloudcontainer**的容器（用于放置新的 div）：

```
<div class="cloudcontainer"></div> 
```

Javascript 看起来像这样：

```
$('.cloundcontainer').append('<div class="cloud"><p>'+$('#cloudName').val()+'</p><p>'+$('#cloudFamily').val()+'</p></div>'); 
```

生成的 HTML 如下所示：

```
<div class="cloundcontainer">
    <div class="cloud">
        <p>...</p>
        <p>...</p>
    </div>
</div> 
```

我在此链接上准备了一个有效的 JSFIDDLE 示例：[示例](http://jsfiddle.net/wEYCE/13/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:41:57.153

尝试这个：

```
$('<div/>', {
    'class': 'cloud',
    html: '<p></p><p></p>'
}).prependTo('form');    

$('.cloud p').each(function(i,v){
    $(this).append($('form input').eq(i))
}) 
```

[http://jsfiddle.net/Wb8TZ/](http://jsfiddle.net/Wb8TZ/) ​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T19:42:16.290

您的 AJAX 回调看起来像这样：

```
success: function(data) {
   $('<div class="cloud">'); // Creates the holder div
   $('<p class="cloudname">').html(data.cloudname).appendTo('.cloud'); // Create the cloud name p element and attach to cloud placeholder
   $('<p>').html(data.cloudfamily).appendTo(".cloudname"); // Do the same for the cloudfamily
} 
```

# c# - 将 ASP.NET 2.0 GridView 绑定到我自己的 IList .SomeMemberOfMyOwnCustomType.SomeProperty

> ID：12430915
> 
> 赞同：4
> 
> 时间：2012-09-14T19:36:21.723
> 
> 标签：c#, asp.net, gridview

假设我有这样的数据：

```
class Location
{
    public int Id { get; private set; }
    public string City { get; set; }
    public string State { get; set; }
    public string Country { get; set; }
}

class Friend
{
    public int Id { get; }
    public string FriendName { get; set; }
    public Location Address { get; set; }
    public int Age { get; set; }
    public bool IsReliable { get; set; }
} 
```

假设我将一个 ASP.NET 2.0 GridView 控件绑定到我自己的 IList，如下所示：

```
GridView1.DataSource = new List<Friend>
{
    new Friend { Name = "...", Age = 22, ... }
};

GridView1.DataBind(); 
```

但我想在我的 GridView 中只有以下列具有以下自定义标题/列标题：

1.  FriendName（列标题：朋友姓名）
2.  城市（列标题：城市）
3.  年龄（列标题：年龄）

我怎么做？

换句话说，如何选择性地将 GridView 控件绑定到我自己的自定义 IList 的自定义成员？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T19:46:57.577

几年来我没有接触网络表单网格，但 IIRC 你可以在网格侧使用`<Columns>`符号来做到这一点：

```
<asp:GridView ...>
    <Columns>
      <asp:BoundField DataField="FriendName"
        readonly="true"      
        headertext="Friend Name"/>
      <asp:BoundField DataField="Address.City"
        readonly="true"      
        headertext="City"/>
      <asp:BoundField DataField="Age"
        readonly="true"      
        headertext="Age"/>
    </Columns>
</asp:GridView> 
```

或使用 IEnumerable/Linq 扩展来转换您的结果，如下所示：

```
GridView.DataSource = friends.Select(friend => 
     new { FriendName, City = friend.Address.City, Age }); 
```

并为这个新输出创建一个类似的`<Columns>`符号，您还需要这个用于自定义的标题文本。

编辑：如果 DateField="Address.City" 不起作用，则有 templateField 选项，`<ItemTemplate>`您可以简单地`<%# Eval("Address.City") %>`在其内容中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T20:04:47.730

像这样的东西：

```
<asp:GridView ID="FriendGridView" runat="server" AutoGenerateColumns="false"> 
    <Columns> 
        <asp:BoundField HeaderText="Friend Name" 
            DataField="FriendName" SortExpression="FriendName" /> 
        <asp:BoundField HeaderText="Age" 
            DataField="Age" SortExpression="Age" /> 
        <asp:BoundField HeaderText="City"  
            DataField="Address.City" SortExpression="Address.City" /> 
    </Columns> 
</asp:GridView> 
```

检查这个：[ASP.NET：GridView 和业务对象](http://msmvps.com/blogs/deborahk/archive/2010/01/24/asp-net-gridview-and-business-objects.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T20:06:43.797

您还可以为网格创建列并将它们映射到 page_load 的代码中，调用 generateColumns 子例程，然后在完成后调用绑定。GenerateColumns 可能如下所示：

```
Private Sub GenerateContactGridColumns()
    Dim clmName As New BoundField()
    clmName.DataField = "FriendName"
    clmName.HeaderText = "Name"

    Dim clmCity As New BoundField()
    clmCity.DataField = "City"
    clmCity.HeaderText = "City"

    Dim clmEdit As New CommandField()
    clmEdit.ButtonType = ButtonType.Image
    clmEdit.EditImageUrl = Me.ThemeImagesPath & "/edit.gif"
    clmEdit.DeleteImageUrl = Me.ThemeImagesPath & "/delete.gif"
    clmEdit.ShowEditButton = True
    clmEdit.ShowDeleteButton = True

    gvContacts.Columns.Clear()
    gvContacts.Columns.Add(clmName)
    gvContacts.Columns.Add(clmCity)
    gvContacts.Columns.Add(clmEdit)
End Sub 
```

另外，我通常使用实体框架，因此可以使用部分类将实体添加到实体中，然后我可以在实体中定义一个深入研究子对象的属性。例如，朋友可以有一个返回 address.city 的城市属性。

# mysql - 即时交换 MySQL 表引擎

> ID：12430921
> 
> 赞同：1
> 
> 时间：2012-09-14T19:36:51.490
> 
> 标签：mysql, myisam

我有一个相对较大的表（几百万条记录），多个网站正在查询该表，并且从一开始该表的引擎是 MyISAM，目前我遇到了表锁的困难。

所以。我决定将表引擎从 MyISAM 更改为 InnoDB。

问题是：里面有隐藏的石头吗？数据库是实时的。所以我需要确保它不会影响任何网站的功能。

此表中当前没有设置全文索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:49:54.623

基本上，你必须这样做：

```
ALTER TABLE t1 ENGINE=InnoDB; 
```

或这个：

```
INSERT INTO my_innodb_table SELECT * FROM my_myisam_table 
```

检查这个：[Converting Tables from Other Storage Engines to InnoDB](http://dev.mysql.com/doc/refman/5.1/en/converting-tables-to-innodb.html)以考虑此事，特别是：

> InnoDB 没有像 MyISAM 存储引擎那样对单独的索引创建进行特殊优化。因此，导出和导入表并随后创建索引是不值得的。将表更改为 InnoDB 的最快方法是直接对 InnoDB 表进行插入。也就是说，使用 ALTER TABLE ... ENGINE=INNODB，或者创建一个具有相同定义的空 InnoDB 表，并使用 INSERT INTO ... SELECT * FROM ... 插入行。

还有这些： http: [//dev.mysql.com/doc/refman/5.1/en/alter-table.html](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html) http://dev.mysql.com/doc/refman/5.1/en/forcing-innodb-recovery。 html

# wpf - 带有附加属性的 ListBoxItem 上的 BringIntoView？

> ID：12430923
> 
> 赞同：0
> 
> 时间：2012-09-14T19:36:56.923
> 
> 标签：wpf, mvvm

我正在尝试在附加属性上使用 BringIntoView 同步我的 ListBox 的滚动。

我的尝试不起作用。当我运行我的代码时，所选项目会在列表框之间同步，但是如果我选择了一个未显示在另一个 ListBox 上的项目，它不会自动滚动。

我有一个带有 IsShown 和 ItemText 属性的简单 ViewModel。

```
 <Window.Resources>
    <Style TargetType="ListBoxItem">
        <Setter Property="IsSelected" Value="{Binding IsShown, Mode=TwoWay}"/>
        <Setter Property="local:CustomProperties.BringIntoView" Value="{Binding IsShown}"/>
    </Style>
    <DataTemplate x:Key="DataTemplate1">
        <TextBlock Name="_txt" Text="{Binding ItemText}"/>
    </DataTemplate>
</Window.Resources>
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="255*"/>
        <ColumnDefinition Width="262*"/>
    </Grid.ColumnDefinitions>
    <ListBox ItemsSource="{Binding ItemList}" ItemTemplate="{StaticResource DataTemplate1}" />  
    <ListBox Grid.Column="1" ItemsSource="{Binding ItemList}" ItemTemplate="{StaticResource DataTemplate1}" >
    </ListBox>                
</Grid> 
```

这是我的依赖属性

```
public static class CustomProperties
{
    public static readonly DependencyProperty BringIntoViewProperty =
      DependencyProperty.RegisterAttached( "BringIntoView",
      typeof( bool ),
      typeof( CustomProperties ),
      new PropertyMetadata( OnBringIntoViewChanged ) );

    public static void SetBringIntoView ( DependencyObject o, bool value )
    {
        o.SetValue( BringIntoViewProperty, value );
    }

    public static bool GetBringIntoView ( DependencyObject o )
    {

        return ( bool )o.GetValue( BringIntoViewProperty );
    }

    private static void OnBringIntoViewChanged ( DependencyObject d, DependencyPropertyChangedEventArgs e )
    {
        if ( ( bool )e.NewValue )
        {
           if ( d is FrameworkElement )
                ( ( FrameworkElement )d ).BringIntoView();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:47:32.433

不同的方法怎么样？

您希望始终显示所选项目。如果您在 ViewModel 中使用 ListCollectionView，您可以通过调用 MoveCurrentTo() 和其他函数来更改选择。您的 ListBox 将绑定到此 ListCollectionView，默认情况下将使用 IsSynchronizedWithCurrentItem 属性同步所选项目。

通过这种方式，您的 ViewModel 会跟踪当前项目，并且您的 ListBox 会绑定到它。

现在，如果您希望 ListBox 的行为包括滚动以使所选项目保持在视图中，请将以下代码添加到您的视图代码隐藏中：

```
private void listBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    listBox.ScrollIntoView(listBox.SelectedItem);
} 
```

你的 ViewModel 可能不需要知道这个细节。自动滚动只是视图行为的一部分。

假设一切都需要在您的 ViewModel 中可能是错误的。例如，我们不关心文本框中的插入符号位置。我认为这符合特定于视图的条件。

# android - Actionbarsherlock：菜单按钮在 Froyo 中有效，但在 ICS 中无效？

> ID：12430924
> 
> 赞同：0
> 
> 时间：2012-09-14T19:37:00.353
> 
> 标签：android, button, actionbarsherlock

我制作了一个应用程序[OB Nyt](https://play.google.com/store/apps/details?id=com.bengaard.obnyt)，它在 Froyo 及以下版本上运行良好 - 但在 ICS 及以上版本上，当我单击菜单按钮（更新链接、图像活动链接和搜索活动链接）时，什么也没有发生。当我单击 ICS 中的按钮时，手机上的按钮会亮起 - 但活动不会像在 Froyo 上那样打开。我对 ActionBarSherlock 的修改很少。我从 toast 消息中知道点击已在 ICS 中注册。但是活动没有开始。在 LogCat 我得到一个

```
window already focused ignoring focus gain of com.android.internal.view.iinputmethodclient 
```

每次我点击其中一个按钮。我猜测问题可能就在这里：

```
public boolean onCreateOptionsMenu(Menu menu) {
    //Used to put dark icons on light action bar
    boolean isLight = true;

    menu.add("Save")
        .setIcon(isLight ? R.drawable.ic_stilling1 : R.drawable.ic_stilling1)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

    menu.add("Search")
        .setIcon(isLight ? R.drawable.ic_search_inverse : R.drawable.ic_search)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

    menu.add("Opdatér")
        .setIcon(isLight ? R.drawable.ic_refresh_inverse : R.drawable.ic_refresh)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

    return true;
}

public boolean onOptionsItemSelected(MenuItem item) {
    //This uses the imported MenuItem from ActionBarSherlock
    Toast.makeText(this, "Got click: " + item.toString(), Toast.LENGTH_SHORT).show();

    if (item.toString()=="Save"){

        startActivity (new Intent(getApplicationContext(), F3Activity.class));

        return true;
    }

    if (item.toString()=="Search"){

        startActivity (new Intent(getApplicationContext(), SearchActivity.class));

        return true;
    }

    if (item.toString()=="Opdatér"){

        startActivity (new Intent(getApplicationContext(), ABSTabsViewPagerActivity.class));

        return true;
    }

    return true;
} 
```

如您所见，我是编程中的菜鸟:-) 有没有人知道如何让按钮在 ICS 中做出反应？我在我朋友的三星 Galaxy II 和 III 上用我自己的旧 HTC Desire 和 ICS 测试了 Jelly Bean，结果完全相同。

[编辑]：这使它工作：

```
if (item.getTitle()=="Save") 
```

代替

```
if (item.toString()=="Save") 
```

初学者的错误，我知道 ;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:00:18.767

使用[String.equals(String)](https://developer.android.com/reference/java/lang/String.html#equals%28java.lang.Object%29)进行字符串比较。正确的方法是

```
if ("Save".equals(item.getTitle())) 
```

考虑给你的菜单项一个 ID，并使用它来确定哪个被点击了。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-18T07:47:21.730

这使它工作：

```
if (item.getTitle()=="Save") 
```

代替

```
if (item.toString()=="Save") 
```

# ruby-on-rails - Rails：从会话或数据库中获取令牌

> ID：12430934
> 
> 赞同：0
> 
> 时间：2012-09-14T19:38:00.217
> 
> 标签：ruby-on-rails, ruby, omniauth, koala

我跟着 Ryan Bates 使用 Facebook Railscast进行身份验证[http://media.railscasts.com/assets/episodes/videos/360-facebook-authentication.ogv](http://media.railscasts.com/assets/episodes/videos/360-facebook-authentication.ogv)在其中他使用`gem 'omniauth-facebook'`Facebook 进行身份验证。在 Railscast 的最后，他介绍了 Koala，它允许您与开放图形 api 进行交互。Ryan 给出了将 oath 令牌作为参数传递给这个的指令

```
@graph = Koala::Facebook::API.new(your_oauth_token) 
```

我无法让它工作，因为我不确定从哪里获得誓言令牌。让我解释....

在 session_controller.rb 中，我们有这个

```
 def create
    user = User.from_omniauth(env["omniauth.auth"])
    session[:user_id] = user.id

    redirect_to root_url

  end 
```

它将omniauth信息保存到用户模型中的数据库中

```
 def self.from_omniauth(auth)
  where(auth.slice(:provider, :uid)).first_or_initialize.tap do |user|
    user.provider = auth.provider
    user.uid = auth.uid
    user.name = auth.info.name
    user.oauth_token = auth.credentials.token
    user.oauth_expires_at = Time.at(auth.credentials.expires_at)
    user.save!
  end 
```

所以我猜我需要`user.oath_token`传入

```
@graph = Koala::Facebook::API.new(your_oauth_token) 
```

但我无法让它工作。

你能想象我有一个主控制器和一个索引操作吗？

```
Main_controller.rb
   def index
       @graph = Koala::Facebook::API.new(how do I get the oauth token in here?)
   end 
```

**问题** 我如何将 oath 令牌（来自会话或数据库）获取到主控制器的 index 方法中？

例如，使用 application_controller.rb 中的 helper 方法

```
 def current_user
  @current_user ||= User.find(session[:user_id]) if session[:user_id]

   end
  helper_method :current_user 
```

我试图在 main_controller.rb 中做到这一点

```
 def index
    @graph = Koala::Facebook::API.new(current_user.oauth_token)
    @graph_data = @graph.get_object("/me/statuses", "fields"=>"message")

    end 
```

但是，当我尝试使用以下方法遍历数据时

视图/main/index.html.erb

```
<% if current_user %>

Looping through your statuses:<br />
<ul>

<% @graph_data.each do |status| %>
<%= status["message"] %> (<i><%=status["updated_time"]%></i>)<hr>
<% end %>
</ul>

  <% end %> 
```

它没有给我任何状态更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:07:19.350

错误是 current_user 返回 nil。这可能是因为 session[:user_id] 未设置（即用户未登录）。您应该有一个签入索引来防止这种情况：

```
def index
  if current_user
    @graph = Koala::Facebook::API.new(current_user.oauth_token)
  else
    # User isn't logged in; do something else
  end
end 
```

# ruby-on-rails - Elasticsearch / 轮胎：分面顺序

> ID：12430937
> 
> 赞同：2
> 
> 时间：2012-09-14T19:38:20.863
> 
> 标签：ruby-on-rails, elasticsearch, tire

如何在轮胎中指定构面的顺序？

它可以在 Elasticsearch 中看到，如下所示： [http ://www.elasticsearch.org/guide/reference/api/search/facets/terms-facet.html](http://www.elasticsearch.org/guide/reference/api/search/facets/terms-facet.html)

在轮胎中，它的默认设置为“计数”，但我不知道如何将其更改为“术语”顺序。

这是我的搜索方法：

```
def self.search(params)
tire.search do
  query do
    boolean do
      must { string params[:query], default_operator: "AND" } if params[:query].present?
    end
  end
  facet "article_ratings" do
    terms :article_rating
  end
  # raise to_curl
end 
```

结尾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T08:31:00.073

弄清楚了...

```
facet "article_ratings" do
    terms :article_rating, :order => 'term'
  end 
```

# rest - 为标题/详细信息实体关系构建休息端点

> ID：12430938
> 
> 赞同：0
> 
> 时间：2012-09-14T19:38:21.687
> 
> 标签：rest, asp.net-web-api

![我们的对象示例](../Images/49453461806cc8600cba03276058d322.png)

给定一个与此类似的对象结构，如何构建 API？标头 BookWishlists 是否有自己的端点和详细信息 WishlistEntries 是否单独获取？

此外，API 应该如何构建各种类型的 WishlistEntries？我们是否有一个端点可以接受要添加的条目的“类型”？（以 POST /[EntryType]/[BaseBookId] 为例）为每种类型的条目设置一个不同的端点会更好吗？（POST /BookOnAmazon/[ BookOnAmazon:Id])

我们将不胜感激，因为我们无法找到一个指向执行此类操作的 api 的链接。

如果相关，我们将在带有 Phonegap/Javascript 前端的 ASP.net Web API 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:51:01.273

每个“资源”都是一个端点，我认为您的愿望清单的 URL 结构看起来不错。

我不认为将数据库表直接映射到资源总是正确的做法。您最好将自己置于 API 使用者的心态中。他们需要什么要求？

在我看来你只有 2 个资源

*   愿望清单
*   书

书籍实际上是愿望清单的一部分。您可能希望也可能不希望返回带有愿望清单条目的所有书籍详细信息，或者可能只是消费者可以请求的 ID。后者将需要消费者更多的开发工作/请求，但可能会更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T10:36:00.407

您可以按照以下原则`/resources/{particularResourceId}/subresources/{oneSubresourceId}`

因此，如果您不打算直接访问书籍，我只会想到一个主要资源

`/wishlists/`获取心愿单列表，
`/wishlists/{listId}`以获取 亚马逊心愿单条目中所有书籍的
`/wishlists/{listId}/entries/`所有心愿单条目的一个特定心愿单。
`/wishlists/{listId}/entries/amazon/books`

从逻辑上讲，您将在脑海中形成 URL。

# sql - 如何将 SQL Server 数据库中的所有日期时间记录更新为 UTC 时间？

> ID：12430941
> 
> 赞同：3
> 
> 时间：2012-09-14T19:38:43.837
> 
> 标签：sql, sql-server, tsql

我有一个大约 1000 个表的 SQL Server 数据库。大多数表都有`datetime`不同名称的列。当前存储在那里的值带有偏移量，因为代码使用来自服务器的当前日期插入它。

**目标是让所有日期时间记录都采用 UTC 时间。**

现在我想做两件事：

1.  使用这 3 个函数中的一些函数 ( `SYSDATETIME, SYSDATETIMEOFFSET, SYSUTCDATETIME`) 我可以获得偏移量。下一步是查找所有日期时间记录并更新它们。你能帮我解决这个问题吗？

2.  一些日期时间列具有默认值`GETTIME`。我想用`SYSUTCDATETIME`. 知道怎么做吗？

PS：我不想将列的类型更改为，`datetimeoffset`因为 MSSQL Server 2005 不支持该类型。

**编辑**：因为有这么多的评论`datetime`和问题的主题转移到不同的方向，我建议你不要考虑`datetime`列类型，而是考虑`int`. 问题还是一样。更新许多表并更改列的默认值。

最好的问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T19:50:06.670

用于更新服务器上所有用户数据库的动态 SQL。第一个查询输出到结果选项卡。第二个查询输出到消息选项卡。

```
SET NOCOUNT ON;
GO

---------------------------------------------
-- #1 Dynamic SQL to update DATETIME values with UTC offset
DECLARE @t TABLE(TABLE_CATALOG VARCHAR(128), TABLE_SCHEMA VARCHAR(128), TABLE_NAME VARCHAR(128), COLUMN_NAME VARCHAR(128));

INSERT @t
EXEC sp_msforeachdb 'select db = "?"
, s.name
, t.name
, c.name
FROM [?].sys.tables t
JOIN [?].sys.columns c ON c.object_id = t.object_id
JOIN [?].sys.types y ON y.user_type_id = c.user_type_id
JOIN [?].sys.schemas s ON s.schema_id = t.schema_id
WHERE t.[type] = ''U''
AND y.name = ''DATETIME''
AND "?" NOT IN (''master'', ''tempdb'', ''model'', ''msdb'')';

DECLARE @Offset INT;
SET @Offset = - DATEPART(TZOFFSET, SYSDATETIMEOFFSET());

SELECT [SQL] = 'UPDATE ['+ C.TABLE_CATALOG +'].[' + C.TABLE_SCHEMA + '].[' + C.TABLE_NAME + '] SET [' + C.COLUMN_NAME + '] = DATEADD(MINUTE,' + CAST(@Offset AS VARCHAR(5)) + ',[' + C.COLUMN_NAME + ']);' 
FROM @t C;
GO

---------------------------------------------
-- #2 Dynamic SQL to change DATETIME column defaults to SYSUTCDATETIME
DECLARE @t TABLE([SQL] VARCHAR(MAX));
DECLARE @SQL VARCHAR(MAX);

INSERT @t   
EXEC sp_msforeachdb 'SELECT [SQL] = ''---------------------------------------------'' + CHAR(13) + CHAR(10)
    + ''-- [?].[''+s.name+''].[''+t.name+''].['' + c.name + '']'' + CHAR(13) + CHAR(10)
    + ''ALTER TABLE [?].[''+s.name+''].[''+t.name+'']'' + CHAR(13) + CHAR(10)
    + ''DROP CONSTRAINT [''+d.name + '']'' + CHAR(13) + CHAR(10)
    + ''GO'' + CHAR(13) + CHAR(10)
    + ''ALTER TABLE [?].[''+s.name+''].[''+t.name+''] ADD CONSTRAINT'' + CHAR(13) + CHAR(10)
    + ''[''+d.name+''] DEFAULT (SYSUTCDATETIME()) FOR [''+c.name + '']'' + CHAR(13) + CHAR(10)
    + ''GO'' + CHAR(13) + CHAR(10) + CHAR(13) + CHAR(10)
    FROM [?].sys.default_constraints d
    JOIN [?].sys.columns c  ON  c.default_object_id = d.object_id
    JOIN [?].sys.types y ON y.user_type_id = c.user_type_id
    JOIN [?].sys.tables t ON t.object_id = d.parent_object_id AND t.[type] = ''U''
    JOIN [?].sys.schemas s ON s.schema_id = t.schema_id
    WHERE y.name = ''datetime''
    AND "?" NOT IN (''master'', ''tempdb'', ''model'', ''msdb'')';

DECLARE C CURSOR FOR 
SELECT * FROM @t

OPEN C
FETCH NEXT FROM C INTO @SQL;
WHILE @@FETCH_STATUS = 0 BEGIN
    PRINT @SQL;
    FETCH NEXT FROM C INTO @SQL;
END

CLOSE C;
DEALLOCATE C;
GO 
```

# c - 这种类型的 C 语句叫什么？

> ID：12430943
> 
> 赞同：0
> 
> 时间：2012-09-14T19:38:57.457
> 
> 标签：c

在 C 中，以下是有效代码：

```
if ((a, a+b, a*b) >= 0) {
    ....
} 
```

`(a, a+b, a*b)`零件有特殊名称吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T19:39:26.887

`x, y`称为逗号表达式。

`,`在 C 中称为逗号运算符，与.`(x, y, z)`相同`((x, y), z)`。

它不能与分隔函数参数且不是逗号运算符的逗号混淆。

# c# - 有没有办法检查代码更改是否改变了二进制文件？

> ID：12430951
> 
> 赞同：3
> 
> 时间：2012-09-14T19:39:30.990
> 
> 标签：c#, .net, visual-studio-2010, msbuild, il

我假设如果 C# 代码未更改，则生成的 IL 每次构建都相同。问题是从相同代码生成的 2 个 EXE 文件没有相同的哈希值。

我想检查代码样式的更改是否会生成不同的 IL。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T19:43:04.080

你在做一个错误的假设。无需更改代码的重建将提供不同的二进制文件。

看：

[https://stackoverflow.com/a/8927785/426894](https://stackoverflow.com/a/8927785/426894)

> 每次运行编译器时，都应该得到不同的输出。

和

[http://blogs.msdn.com/b/ericlippert/archive/2012/05/31/past-performance-is-no-guarantee-of-future-results.aspx](http://blogs.msdn.com/b/ericlippert/archive/2012/05/31/past-performance-is-no-guarantee-of-future-results.aspx)

> **两次编译相同的 C# 程序是否保证产生相同的二进制输出？**
> 
> 不。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:48:47.927

您可以使用[ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)来做到这一点，这是一个开源的 .NET 程序集浏览器和反编译器。

![在此处输入图像描述](../Images/30459cde51ea7ae93030e31302077c9b.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T19:49:43.330

您可以使用一些工具来反汇编 EXE 并比较它们的内容。看看这个博客[http://immitev.blogspot.com.br/2008/10/ways-to-compare-net-assemblies.html](http://immitev.blogspot.com.br/2008/10/ways-to-compare-net-assemblies.html)

[]的

# cocoa - NSForm 从自定义工作表中消失

> ID：12430952
> 
> 赞同：0
> 
> 时间：2012-09-14T19:39:36.530
> 
> 标签：cocoa, autoresize, cocoa-sheet, nsform

我制作了一个自定义工作表，它会根据需要出现和消失。但是，该工作表包含一个 NSForm，当禁用自动调整单元格大小时该 NSForm 会消失。

启用“自动重新计算单元格大小”时，会出现表单，但表单的单元格大小不正确。

以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:04:10.403

问题在于自动布局。我只是为工作表禁用了它。之后工作正常。

# java - 如何扩展不在我的项目中的类

> ID：12430953
> 
> 赞同：0
> 
> 时间：2012-09-14T19:39:44.813
> 
> 标签：java, xwiki

我正在尝试为[xwiki编写一个](http://www.xwiki.org/xwiki/bin/view/Main/WebHome)[自定义身份验证](http://platform.xwiki.org/xwiki/bin/view/AdminGuide/Authentication)类。

我有一个项目，其中编写了身份验证机制，如果有人试图访问 xwiki，我希望它使用 xwiki 自定义身份验证将他们重定向到我的项目的登录页面。

我正在尝试与我的项目分开编写一个类并与 xwiki 分开，将其打包为一个 jar 并将其放入 xwiki 项目的 xwiki WEB-INF/lib 文件夹中，因为这就是 xwiki 自定义的说明验证。

问题是，我需要编写的类导入了一些 xwiki 类。如果我用这些导入编写一个单独的类，它将无法正确编译。

如果它是一个需要进入 xwiki 的 WEB-INF/lib 文件夹的单独类，我应该如何创建一个扩展某些 xwiki 类的类？

这是某人发布的示例[https://www.box.com/shared/9kamt5d9c5](https://www.box.com/shared/9kamt5d9c5)。

简单的例子

```
package my.xwiki.custom.authentication;

import java.io.*;
import com.xpn.xwiki.XWikiContext;
import com.xpn.xwiki.XWikiException;
import com.xpn.xwiki.user.api.XWikiUser;
import com.xpn.xwiki.user.impl.xiki.XWikiAuthServiceImpl;

public class XWikiSSOImpl extends XWikiAuthServiceImpl {

    @Override
    public XWikiUser checkAuth(XWikiContext context) throws XWikiException {
        System.out.println("we actually in checkAuth?");
    }
} 
```

当我将我的 jar 文件添加到我的 xwiki 并运行它时，我收到以下错误：

```
Detailed information:

    Error number 0 in 11: Uncaught exception
Wrapped Exception: Unresolved compilation problems: 
    The import com.xpn cannot be resolved
    The import com.xpn cannot be resolved
    The import com.xpn cannot be resolved
    The import com.xpn cannot be resolved
    XWikiAuthServiceImpl cannot be resolved to a type
    XWikiUser cannot be resolved to a type
    XWikiContext cannot be resolved to a type
    XWikiException cannot be resolved to a type

com.xpn.xwiki.XWikiException: Error number 0 in 11: Uncaught exception
Wrapped Exception: Unresolved compilation problems: 
    The import com.xpn cannot be resolved
    The import com.xpn cannot be resolved
    The import com.xpn cannot be resolved
    The import com.xpn cannot be resolved
    XWikiAuthServiceImpl cannot be resolved to a type
    XWikiUser cannot be resolved to a type
    XWikiContext cannot be resolved to a type
    XWikiException cannot be resolved to a type

    at com.xpn.xwiki.web.XWikiAction.execute(XWikiAction.java:254)
    at com.xpn.xwiki.web.XWikiAction.execute(XWikiAction.java:116)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:431)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:236)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
    at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.xpn.xwiki.web.ActionFilter.doFilter(ActionFilter.java:120)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.xwiki.wysiwyg.server.filter.ConversionFilter.doFilter(ConversionFilter.java:144)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.xpn.xwiki.plugin.webdav.XWikiDavFilter.doFilter(XWikiDavFilter.java:66)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.xwiki.container.servlet.filters.internal.SavedRequestRestorerFilter.doFilter(SavedRequestRestorerFilter.java:208)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.xwiki.container.servlet.filters.internal.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:111)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.Error: Unresolved compilation problems: 
    The import com.xpn cannot be resolved
    The import com.xpn cannot be resolved
    The import com.xpn cannot be resolved
    The import com.xpn cannot be resolved
    XWikiAuthServiceImpl cannot be resolved to a type
    XWikiUser cannot be resolved to a type
    XWikiContext cannot be resolved to a type
    XWikiException cannot be resolved to a type

    at my.xwiki.custom.authentication.XWikiSSOImpl <init>(XWikiSSOImpl.java:4)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at java.lang.Class.newInstance0(Class.java:355)
    at java.lang.Class.newInstance(Class.java:308)
    at com.xpn.xwiki.XWiki.getAuthService(XWiki.java:5288)
    at com.xpn.xwiki.XWiki.checkAuth(XWiki.java:4090)
    at com.xpn.xwiki.user.impl.xwiki.XWikiRightServiceImpl.checkAccess(XWikiRightServiceImpl.java:205)
    at com.xpn.xwiki.XWiki.checkAccess(XWiki.java:4103)
    at com.xpn.xwiki.XWiki.prepareDocuments(XWiki.java:5128)
    at com.xpn.xwiki.web.XWikiAction.execute(XWikiAction.java:179)
    ... 34 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:08:56.993

根据提供的链接，您似乎没有丢失任何导入并假设您没有任何明显的语法错误，那么它指向您的开发环境。一个典型的解决方案是使用包的路径设置 CLASSPATH 变量，但根据我的经验，这很容易出错。

如果您使用的是 Eclipse，请右键单击您的项目名称并选择属性。在属性对话框中，单击左侧的“Java Build Path”。在“Java 构建路径”属性中，单击库选项卡。您想单击“添加外部 Jar...”按钮，您将在其中指定 xwiki jar 的路径。

![这就是我包含的 jar 在我的项目中的外观......](../Images/89198e03c645ee95be1554ca79190df7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:59:58.850

要编译一个类，编译器需要所有引用类（包括超类）的定义。它可以使用已经编译的类（作为 .class 文件或 JAR 文件），或者从源代码编译这些类。因为你不想编译 xwiki 类，你会想要做前者。

因此，您需要将包含这些类的 jar 文件添加到您的类路径中。如何做到这一点取决于您如何调用编译器或您使用的 IDE。使用 Eclipse，您可以右键单击项目 -> 构建路径 -> 添加外部档案。使用`javac`，您可以使用该`-cp`选项。

# objective-c - UIScrollView 地铁主题

> ID：12430956
> 
> 赞同：0
> 
> 时间：2012-09-14T19:39:55.787
> 
> 标签：objective-c, uiscrollview

我正在尝试创建一个“地铁”风格的 UIScrollView。它类似于 iTunes 应用程序如何处理*不会命名*的新 ios 版本中的面板。

我不知道如何让我的视图布局/滚动，以便显示序列中的下一个视图。我已经尝试了各种各样的方法，比如保持 contentSize 屏幕宽度，但将每个视图移动到 -10ish 上，这样它就会像上面那样显示。我尝试制作边界小于屏幕的滚动视图，以便显示下一个视图的一部分。没有任何效果。

这是我正在尝试做的图表： ![在此处输入图像描述](../Images/d23859df231286af4544e6ebabdb95ef.png)

在纸上看起来非常微不足道，但我似乎无法让它发挥作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:27:58.107

我不确定我是否误解了您的要求 - 但这可能是了解如何设置它的起点：

```
- (void)viewDidLoad
{
  [super viewDidLoad];

  CGRect viewBounds      = self.view.bounds;
  CGRect scrollViewFrame = CGRectMake(0, 0, floorf(CGRectGetWidth(viewBounds) / 2.2), CGRectGetHeight(viewBounds));
  UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:scrollViewFrame];

  scrollView.center        = self.view.center;
  scrollView.contentSize   = CGSizeMake(CGRectGetWidth(viewBounds) * 3, CGRectGetHeight(viewBounds) * 3);
  scrollView.pagingEnabled = YES;
  scrollView.clipsToBounds = NO;

  UIPanGestureRecognizer *gestureRecognizer = scrollView.panGestureRecognizer;
  [self.view addGestureRecognizer:gestureRecognizer];

  for (int i = 0; i < 3; i++) {
    CGRect frame = CGRectMake(10.f + (i * CGRectGetWidth(scrollView.bounds)), 10.f, CGRectGetWidth(scrollView.bounds) - 20.f, (CGRectGetHeight(scrollViewFrame) * 3) - 20.f);
    UIView *view = [[UIView alloc] initWithFrame:frame];
    view.backgroundColor = [UIColor redColor];
    [scrollView addSubview:view];
  }

  [self.view addSubview:scrollView];
} 
```

从字面上看，只是把它放在一个空的 viewController 中`viewDidLoad:`

需要注意的关键事项是

*   `contentSize`需要足够宽以容纳所有面板
*   `clipsToBounds`应该是`NO`这样你就可以看到额外的视图
*   滚动视图的边界本质上是主视图端口
*   `pagingEnabled`应该设置
*   我已经`panGestureRecognizer`从滚动视图中抓取并将其附加到包含视图，以便在包含视图的边界（更大）中检测到平移，否则您只能检测滚动视图边界内的滚动

# c# - 我可以在 .NET 2.0 上使用 .NET 4.0 API 调用吗？

> ID：12430959
> 
> 赞同：0
> 
> 时间：2012-09-14T19:40:15.707
> 
> 标签：c#, .net, c#-4.0, .net-2.0, c#-2.0

如果我进行 .NET 4.0 API 调用而客户只安装了 .NET 2.0，我的 EXE 可以工作吗？我认为没有——绝对没有。但我想再次确认并向我的客户指出是/否。

背景...我来自 Linux/PHP 世界。我的客户端在前端使用 Windows C# 应用程序，在后端使用 Linux/PHP。他让我调查这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T19:42:08.627

当您尝试运行使用 .NET 4.0 编写和编译的任何内容时，.NET 2.0 运行时会出错，反之则不然。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T19:49:28.117

针对 .NET 4.0 框架的应用程序代码不会在仅安装了 .NET 2.0 框架的环境中运行。

请参阅此处的“版本兼容性”部分：http: [//msdn.microsoft.com/en-us/library/8477k21c.aspx](http://msdn.microsoft.com/en-us/library/8477k21c.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T20:03:40.473

您可以做的是让您的 .NET 2 代码通过 Web 服务访问 .NET 4 库。如果您要通过 Web 服务公开 .NET 4 API，它将与 .NET 版本以及它们之间的技术无关。

# python - python 编码的类似“警报”的对话框或模板

> ID：12430960
> 
> 赞同：0
> 
> 时间：2012-09-14T19:40:22.877
> 
> 标签：python, html, alert

**更新 0：** 我的代码和下面的解释中有一个微妙但严重的错误，因为我不能只将`name`模板`hiddenname`上的更改会告诉我，但故意没有复选框），我还需要与保留数据存储中`name`的状态进行比较，`name`以查看其他人是否已经保留了时间段。所以我不能使用javascript，我也必须重写下面的一些代码来进行正确的比较。并且可能原始问题仍然如该问题的标题所建议的那样。（在其中一条评论中，我错误地说 javascript 可以工作。） **更新 0：**

我正在尝试以该代码建议我在何处使用`Trans`模型和 gae 数据存储（下文详述）在我的主应用程序和“警报模板”之间进行通信的方式编写一种“警报”。我有几个问题。

最初，我在子句中的另一部分代码中需要此警报`else:`，而不是在`elif:`子句中。当我尝试在`elif`代码中使用更简单的警报版本时，python 似乎忽略了`self.response.out.write(template.render(path, template_values))`并继续执行结束我的条件的代码：`return webapp2.redirect("/read/%s" % location_id)`. 因此，正如您在我的代码中看到的那样，我已经注释掉了忽略的前代码行，并尝试用更像后一个代码行的东西替换它，但后一行指向`unexpected`而不是`read`. 你可以从我的代码中看到它仍然是两种方法的混合，我可以使用帮助来解决它。`else:`关于这个和`elif:`关于这个真的有什么不同吗？

本来我没有预料到我会在我的代码中从这么多地方调用相同的html模板和Trans模型，所以我没有将key或ID或key_name设计到使用的设计中`Trans`。现在我在实现一个如此详细的版本时遇到了麻烦。

我一直在寻找如何在 python 中制作此类“警报模板”的示例。它们在 javascript 中非常简单，但我正在尝试在我的 python 代码中进行用户输入验证。任何指向示例或文档的指针将不胜感激。

```
weekday_key = db.Key.from_path('Locations',location_id,'Courts', court_id,'Days',weekday)
if name == hiddenname:
    pass
elif name != hiddenname and hiddenname == "":
    reservation = Reservations.get_or_insert(time[2],parent=weekday_key) 
    reservation.hour = time[0]
    reservation.minute = time[1]
    reservation.year = int(year)
    reservation.nowmonth = int(nowmonth)
    reservation.day = int(day)
    reservation.nowweekday = int(nowweekday)
    reservation.name = name
    reservation.put()
elif name != hiddenname and name!="":
    reservation = Reservations.get_by_key_name(time[2],parent=weekday_key) 
    reservation.hour = time[0]
    reservation.minute = time[1]
    reservation.year = int(year)
    reservation.nowmonth = int(nowmonth)
    reservation.day = int(day)
    reservation.nowweekday = int(nowweekday)
    reservation.name = name
    reservation.put()
    reason='This was in that time slot already: '
    trans = Trans(parent=reservation.key().name()) #this line is iffy
    trans.reason=reason
    trans.name=hiddenname
    trans.put()
    iden = trans.key().id() # this is part of the iffy just above
    template_values = {'trans':trans}
    path = os.path.join(TEMPLATE_DIR, 'unexpected.html')
    #self.response.out.write(template.render(path, template_values))
    return webapp2.redirect("/unexpected/%s/%d" % (time[2],iden) #more iffy
else:
    pass 
```

接下来是我的 Trans 模型。

```
class Trans(db.Model):
    reason = db.StringProperty()
    name = db.StringProperty() 
```

我的jinja2装备`unexpected.html`模板如下。

```
{% extends "base.html" %}
{% block content %}
This unexpected result occurred. {{ trans.reason }}:<emph style="font-weight: bold">{{ trans.name }}</emph>
<br /><br />
<div id="inputdata">
<label>Click the "Ok" button to go back to the previous page so you can elect to edit your entry, or not.
</label>
<button onclick="window.history.back()">Ok</button>
</div>

{% endblock content %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:27:41.043

[这个问题在这里得到解答](https://stackoverflow.com/questions/12565612/code-blows-through-html-template-and-returns-to-python-directly)。这个问题本来可以回答的，但显然给出的信息太多，没有人看到答案。

# sharepoint-2010 - Infopath 2010 > 是浏览器允许的多选列表框

> ID：12430962
> 
> 赞同：0
> 
> 时间：2012-09-14T19:40:30.023
> 
> 标签：sharepoint-2010, listbox, infopath2010

我可能会遗漏一些东西。我在一个部分中有一个多选列表框。见附图。当我右键单击 grpApplications 并复制 XPath 时，它给了我 /my:myFields/my:grpAccessOfficeEquipment/my:grpApplications 当我右键单击 fldApplicatins 上的 XPath 时，它给了我 /my:myFields/my:grpAccessOfficeEquipment/my:grpApplications/我的：fldApplications

在代码（下面发布的代码）中，我引用了 /my:myFields/my:grpAccessOfficeEquipment/my:grpApplications/my:fldApplications 并且没有任何价值。但我使用了 /my:myFields/my:grpAccessOfficeEquipment/my:grpApplications 我得到了列表框中所选项目的值。

但我仍然在字符串 appName 行上收到错误 NullReferenceException“对象引用未设置为对象的实例”。AppID 看起来像这样 "\n\t\t\t262265264143\n\t\t" 而不是调试中的整数。但是当我点击双筒望远镜时显示 262265264143 但在此之前和之后都有空格/行

```
XPathNavigator MainDS = MainDataSource.CreateNavigator();
XPathNodeIterator iterApp = MainDS.Select("/my:myFields/my:grpAccessOfficeEquipment/my:grpApplications", NamespaceManager);
System.Text.StringBuilder sb = new System.Text.StringBuilder();
while (iterApp.MoveNext())
{
    string AppID = iterApp.Current.Value;
    //int lookupID = Convert.ToInt16(value);
    XPathNavigator secAPPDS = DataSources["SupportEscalationList"].CreateNavigator();
    string appName = secAPPDS.SelectSingleNode("/dfs:myFields/dfs:dataFields/d:SharePointListItem_RW[@ID = '" + AppID + "']/@ApplicationProcess", NamespaceManager).Value;
    sb.Append(appName);
    item["ApplicationProcess"] = sb.ToString(); // because applicationprocess column in target sp list is single text type column
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T01:13:41.327

这里说 2010 浏览器表单支持多选列表框，但 2007 浏览器表单不支持。希望有帮助。

[http://office.microsoft.com/en-us/infopath-help/infopath-2010-features-unavailable-in-web-browser-forms-HA101732796.aspx](http://office.microsoft.com/en-us/infopath-help/infopath-2010-features-unavailable-in-web-browser-forms-HA101732796.aspx)

# asp.net - ASP.NET 注销事件处理程序和 Site.Master 页

> ID：12430964
> 
> 赞同：0
> 
> 时间：2012-09-14T19:40:56.707
> 
> 标签：asp.net, forms, web

我正在使用 Site.Master 文件使用以下代码在每个页面上创建登录/注销字段：

```
<asp:LoginView ID="HeadLoginView" runat="server" EnableViewState="false" >
                <AnonymousTemplate>
                    [ <a href="~/Account/Login.aspx" ID="HeadLoginStatus" runat="server">Log In</a> ]
                </AnonymousTemplate>
                <LoggedInTemplate>
                    Welcome <span class="bold"><asp:LoginName ID="HeadLoginName" runat="server" /></span>!
                    [ <asp:LoginStatus ID="HeadLoginStatus" runat="server" LogoutAction="Redirect" LogoutText="Log Out" OnLoggedOut="LoginStatus1_LoggedOut" LogoutPageUrl="~/"/> ]
                </LoggedInTemplate>
</asp:LoginView> 
```

但是，当用户注销时，我希望能够运行事件处理程序

```
OnLoggedOut="LoginStatus1_LoggedOut" 
```

并编辑用户表中的一些信息（例如上次注销时间等等）。但是，我不知道如何检索此信息，因为

```
FormsIdentity id = (FormsIdentity)User.Identity; 
```

显然在 Site.Master.cs 中不起作用（用户在上下文中不存在）。还有其他方法可以检索用户信息吗？此外，有没有办法从用户单击“注销”的页面传输信息（例如使用查询字符串）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:39:36.030

你在找这样的东西吗？

```
System.Security.Principal.IIdentity id = HttpContext.Current.User.Identity; 
```

或者，如果您只需要用户名...

```
String id = HttpContext.Current.User.Identity.Name 
```

# php - Symfony2 中表单验证成功的一些简单事情有多灵活？

> ID：12430970
> 
> 赞同：1
> 
> 时间：2012-09-14T19:41:27.907
> 
> 标签：php, symfony, validation

我有一个包含两个字段来上传文件的表单。我需要执行以下几点：

*   验证表格；
*   将文件移动到另一个目录；
*   处理移动的文件；
*   返回处理结果。

如果上述几点失败，我也必须返回错误消息。我很困惑如何更灵活地做到这一点。我不想在控制器中做所有事情。

我在 FOSUserBundle 中创建了表单处理程序、表单模型、表单类型，并在validation.yml 中为表单模型添加了验证规则。表单验证工作正常。

我有一个想法使用事件调度程序来解决这个问题。表单验证后，我可以通知事件侦听器。

你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:03:12.983

这取决于。

如果您需要订阅事件，因为您需要执行不同的操作（例如，通过电子邮件发送支持、清理垃圾、在数据库中写下失败日志），请使用事件调度程序。但如果它是一个简单的事情，比如只显示一个错误，那么使用异常来代替是有意义的：

```
if ($form->isValid()) { 
    try { 
        $entity->handle(); 
    } catch (FileHandleException $e) { 
        ... 
    } catch (RuntimeException $e) {
        ... 
    }
} 
```

另一个选项取决于“处理移动的文件”是什么。如果它是验证的一部分（例如，处理它们以发现它们是有效的 ssh 密钥）而不是业务逻辑，那么您可以创建一个新的验证器，它将成为表单验证的一部分。

# xcode - 如何快速将项目迁移到 Xcode？

> ID：12430971
> 
> 赞同：2
> 
> 时间：2012-09-14T19:41:37.070
> 
> 标签：xcode, xcode4

之前的项目是在 Linux 平台上开发的，我打算迁移到 Xcode IDE。

除了其他事情，我想知道如何在 Xcode 中快速设置项目。

理想情况下，它应该只使用最顶层的 Makefile 并自动执行（例如索引、自动完成、跳转到定义等）。对于 Eclipse，它几乎就是这样。但我在 Xcode 中找不到类似的功能（不是专家）。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:58:36.237

没有办法将 makefile“导入”到 Xcode 项目中，但您可以使用外部构建工具让 Xcode 为您运行您的 makefile。创建项目时，选择 Mac OS X 下的 Other 类别，然后选择 External Build Tool 并单击 Next 按钮。下一个屏幕底部将有一个文本字段，允许您输入要运行的命令。确保它是`/usr/bin/make`. 然后，完成创建项目。现在，无论何时构建，Xcode 都会从项目目录运行 make。

请注意，这不是“本机”Xcode 项目，因此您必须手动执行更多操作。例如，当您添加/删除文件时，您仍然负责更新 makefile，并且 Xcode 中的构建设置将被忽略，除非您自定义您的 makefile 以使用它们。如果您想做的不仅仅是从 Xcode 构建，您还必须编辑您的方案并设置其他操作，例如指定要运行的可执行文件。

尽管外部构建工具选项在 iOS 类别中不可用，但您可以使用 Mac OS X 版本，因为您的 makefile 定义了构建的内容。我不知道 Xcode 是否会尝试分析/完成您的代码，但您可能需要更新您的 SDK 和目标版本设置，以防万一。

# c++ - 在 OS X 上调试 MacPorts GCC 的问题

> ID：12430972
> 
> 赞同：7
> 
> 时间：2012-09-14T19:41:49.913
> 
> 标签：c++, macos, gcc, gdb

对于使用 GCC 4.7 MacPorts build 编译的程序，我似乎无法获得可读的调试输出。

我已经尝试过 GDB 6.3 和 GDB 7.3 并且每个都有自己的问题。

## 尝试使用 GDB 7.3 (MacPorts)

使用 GDB 7.3，我在启动时得到以下输出：

```
$ ggdb ./test
GNU gdb (GDB) 7.3
Copyright (C) 2011 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin11.4.0".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
BFD: unable to read unknown load command 0x24
BFD: unable to read unknown load command 0x26
BFD: unable to read unknown load command 0x24
BFD: unable to read unknown load command 0x26
Reading symbols from /Users/StackedCrooked/programming/projects/stacked-crooked/Playground/LockOrderChecker/test...Reading symbols from /Users/StackedCrooked/programming/projects/stacked-crooked/Playground/LockOrderChecker/test.dSYM/Contents/Resources/DWARF/test...done.
done. 
```

运行和触发断言会导致不可读的堆栈跟踪：

```
(gdb) r
Starting program: /Users/StackedCrooked/programming/projects/stacked-crooked/Playground/LockOrderChecker/test 
BFD: unable to read unknown load command 0x24
BFD: unable to read unknown load command 0x26
main
Assertion failed: (false), function lock, file main.cpp, line 168.

Program received signal SIGABRT, Aborted.
0x00007fff8ede282a in ?? ()

(gdb) bt
#0  0x00007fff8ede282a in ?? ()
#1  0x00007fff9a273a9c in ?? ()
#2  0x00007fff6af00690 in ?? ()
#3  0x0000003000000030 in ?? ()
#4  0x00007fffffffffdf in ?? ()
#5  0x000000010b305840 in ?? ()
#6  0x00007fff6af006d0 in ?? ()
#7  0x00007fff9a2a65de in ?? ()
#8  0x0000000000000000 in ?? () 
```

## 尝试使用 GDB 6.3（内置）

根据[这个答案](https://stackoverflow.com/a/10050436/75889)，我应该使用 GDB 6.3。然而，这会导致一系列不同的问题。在启动期间，我收到一堆错误：

```
GNU gdb 6.3.50-20050815 (Apple version gdb-1708) (Thu Nov  3 21:59:02 UTC 2011)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin"...Reading symbols for shared libraries .
warning: Could not find object file "/Volumes/work/macports/var/macports/build/_Volumes_work_mports_dports_lang_gcc47/gcc47/work/build/x86_64-apple-darwin11/libstdc++-v3/src/.libs/compatibility.o" - no debug information available for "../../../../gcc-4.7.1/libstdc++-v3/src/c++98/compatibility.cc".

warning: Could not find object file "/Volumes/work/macports/var/macports/build/_Volumes_work_mports_dports_lang_gcc47/gcc47/work/build/x86_64-apple-darwin11/libstdc++-v3/src/.libs/compatibility-debug_list.o" - no debug information available for "../../../../gcc-4.7.1/libstdc++-v3/src/c++98/compatibility-debug_list.cc".

warning: Could not find object file "/Volumes/work/macports/var/macports/build/_Volumes_work_mports_dports_lang_gcc47/gcc47/work/build/x86_64-apple-darwin11/libstdc++-v3/src/.libs/compatibility-debug_list-2.o" - no debug information available for "../../../../gcc-4.7.1/libstdc++-v3/src/c++98/compatibility-debug_list-2.cc". 
```

如果断言被触发并且我尝试获取回溯，这就是我看到的：

```
Assertion failed: (false), function lock, file main.cpp, line 168.

Program received signal SIGABRT, Aborted.
0x00007fff8ede282a in __kill ()
(gdb) bt
#0  0x00007fff8ede282a in __kill ()
#1  0x00007fff9a273a9c in abort ()
#2  0x00007fff9a2a65de in __assert_rtn ()
Die: DW_TAG_unspecified_type (abbrev = 19, offset = 423)
    has children: FALSE
    attributes:
        DW_AT_name (DW_FORM_strp) string: "decltype(nullptr)"
Die: DW_TAG_unspecified_type (abbrev = 19, offset = 423)
    has children: FALSE
    attributes:
        DW_AT_name (DW_FORM_strp) string: "decltype(nullptr)"
Dwarf Error: Cannot find type of die [in module /Users/StackedCrooked/programming/projects/stacked-crooked/Playground/LockOrderChecker/test.dSYM/Contents/Resources/DWARF/test] 
```

根据[这个答案](https://stackoverflow.com/a/11705195/75889)（引用 GCC 4.5 手册），我应该使用这些`-gdwarf-2 -gstrict-dwarf`选项。

我听从了这个建议。我的构建命令如下所示：

```
g++ -o run-test -std=c++0x -Wall -Wextra -Werror -gdwarf-2 -gstrict-dwarf -g2 -O0 -I/opt/local/include main.cpp 
```

但是，它并不能解决上述任何问题。

为了记录：我在 OS X Lion 上。

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:39:45.503

According to the g++ man pages you should use -ggdb to generate debug symbols for gdb. BTW, just using -g always generated good symbols for gdb in my experience (on linux, windows (mingw) and mac).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:09:28.517

MacPorts gdb 7.3 会话中的警告针对加载命令 0x24 (LC_VERSION_MIN_MACOSX) 和 0x26 (LC_FUNCTION_STARTS)。这些是新的加载命令，但对于调试不是必需的 - 警告是无害的。您的会话缺少任何符号信息的事实可能是因为 ASLR？自从将其引入系统进行用户登陆调试以来已经有好几年了，但是如果调试器不知道所有东西在运行时都在内存中滑动，这就是调试器输出的样子。

您是否尝试过使用 lldb？Xcode 4.5 中提供的版本真的很不错。它是 Apple 目前正在积极支持和开发的调试器，它应该可以正确地与更新的编译器的 DWARF 输出一起工作。命令语法与 gdb 略有不同（尽管提供了许多命令快捷方式，使 gdb 用户熟悉它），在[http://lldb.llvm.org/lldb-上提供了一个 gdb/lldb 命令等效表gdb.html](http://lldb.llvm.org/lldb-gdb.html)。试试看，你可能会喜欢。

# jquery - 在 iframe 中显示网页的选定部分

> ID：12430973
> 
> 赞同：0
> 
> 时间：2012-09-14T19:41:56.670
> 
> 标签：jquery, html, ajax

我必须在 iframe 中显示外部网页的一部分。我的方法是 1 – 在 iframe 中打开实际页面，然后定位框架以显示正确的内容，隐藏溢出。2 – 使用 ajax 请求从页面中抓取内容，仅提取文本并将其显示在我自己的 iframe 中。实现起来越来越棘手。有什么简单的解决办法吗？请帮忙....

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-14T19:42:44.017

除非您可以使用片段 url，否则 Ajax 是要走的路。

# paypal - 如何为移动网站的移动结账创建 Paypal 立即购买按钮？

> ID：12430977
> 
> 赞同：1
> 
> 时间：2012-09-14T19:42:08.220
> 
> 标签：paypal

我有一个带有 Paypal 立即购买按钮的移动网页，我希望它能够将用户发送到移动友好的 Paypal 结帐。我对有关移动应用程序结帐的文档感到非常困惑，但我想要的只是移动浏览器结帐。我可以在“立即购买”按钮上添加一个额外的参数吗？我一直在看这个，但我认为这可能是针对移动应用程序的。[http://code.google.com/p/paypalmobile/](http://code.google.com/p/paypalmobile/)

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="xxxxxxxxxxx">
<input type="image" src="https://www.paypalobjects.com/en_US/GB/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal — The safer, easier way to pay online.">
<img alt="" border="0" src="https://www.paypalobjects.com/en_GB/i/scr/pixel.gif" width="1" height="1">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:06:00.933

我还没有找到使用“立即购买”按钮的方法，但已经设法通过使用 Express Checkout API (https://api-3t.paypal.com/nvp) 中的 Paypal SetExpressCheckout 方法使其工作。这将返回一个您用来重定向到 Paypal 的令牌

[https://www.paypal.com/webscr?cmd=_express-checkout&token=RETURNED_TOKEN](https://www.paypal.com/webscr?cmd=_express-checkout&token=RETURNED_TOKEN)

如果您使用 Express Checkout，Paypal 会在通过手机访问时自动使用手机检查。

[https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_ExpressCheckout_IntegrationGuide.pdf](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_ExpressCheckout_IntegrationGuide.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T16:08:43.207

对于移动计费，请更改隐藏 cmd 的 url

header('位置：[https](https://mobile.paypal.com/wc?t=) ://mobile.paypal.com/wc?t= '.$querystring);

当您在 dektop 中打开时它是设备识别 URL

# python - 用于文件的 Python 命令行模块

> ID：12430978
> 
> 赞同：1
> 
> 时间：2012-09-14T19:42:11.240
> 
> 标签：python, parameters, command, options

我有一个 python 脚本，它接受命令行参数，在我们的构建系统中被调用了很多次。出于可维护性的原因，我想将所有这些选项集中到一个文件中，并简单地将命令行上的该文件的名称传递给脚本和可选参数，这些参数将在边缘情况下覆盖文件中的配置。

是否有与此功能类似的模块，或者我需要自己设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:49:20.460

Python 有几个模块用于读取配置文件。

*   [ConfigParser](http://docs.python.org/library/configparser.html)解析 INI 文件 ( `name=value`)
*   [json](http://docs.python.org/library/json.html#module-json)可以读取 JSON
*   有些人使用[execfile](http://docs.python.org/library/functions.html#execfile)来执行包含配置作为普通变量的 Python 文件。这在 Python 3 中被删除了，它有点像 hack，所以我不推荐它。

# visual-studio-2010 - 如何将此 foreach 循环组合成一行 lambda / linq

> ID：12430982
> 
> 赞同：0
> 
> 时间：2012-09-14T19:42:22.233
> 
> 标签：visual-studio-2010, linq, c#-4.0, lambda, converter

我如何将以下内容转换为一个班轮？我知道这是可能的，但我似乎无法再次想到如何。可能使用selectmany？

```
 Dim claimIds = allClaimLineItems.Select(Function(i) i.ClaimLineItemId).Distinct()

    For Each id As Guid In claimIds
        Result.ClaimDuplicateItemRuleDataList.Add(GetClaimDuplicateItemRuleDataWithHighestDuplicateFlags(allClaimLineItems.Where(Function(i) i.ClaimLineItemId = id)))
    Next 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:49:15.407

```
var result = allClaimLineItems
    .Select(i => i.ClaimLineItemId)
    .Distinct()
    .GroupJoin(allClaimLineItems, g => g, i => i.ClaimLineId, (g, matches) => matches)
    .Select(GetClaimDuplicateItemRuleDataWithHighestDuplicateFlags)
    .ToList(); 
```

# javascript - 移除对 HTML 元素的拖拽

> ID：12430990
> 
> 赞同：1
> 
> 时间：2012-09-14T19:43:29.063
> 
> 标签：javascript, html, css

您知道如何单击 HTML 元素（主要是图像），然后将它们的“影子版本”拖到屏幕上吗？

喜欢看到堆栈溢出标志吗？如果单击并拖动它，您可以在屏幕上移动它的深色版本。

所以我的问题是，有什么办法可以去掉 HTML 元素的拖拽，主要是图片？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T19:51:48.713

这是浏览器的功能。这是使将图像保存到本地硬盘驱动器更容易的快捷方式。有**三种方法**可以修复或解决此问题：

*   最好的方法是将图片替换为与图片具有`div`相同宽度和高度的图片，并将 background-image 属性设置为您想要的图片。背景不可拖动，因此这将完全符合您的要求。对于奖励积分，将 div 的样式设置`display: inline-block;`为使其更接近于模仿图像行为。

*   您可以做的下一个最好的事情是使**透明** `div`的大小与图像相同，并使用绝对定位和 z-index 将其定位在图像上。这维护起来比较麻烦，但在布局中实现起来可能更容易。

*   最后的选择很烂。您只需将以下 JavaScript 添加到您的页面某处：

    `document.getElementById('my-image').ondragstart = function() { return false; };`

...将 'my-image' 更改为您的图像元素的 ID，您就完成了。但是这个选项是个坏主意，因为它依赖于 Javascript，并不是所有的浏览器都会启用它。

作为脚注，如果您试图阻止保存图像 - 不要打扰。在有或没有任何客户端保护的情况下，抓取图像都非常容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:57:46.217

假设，我们应该能够使用 CSS[`user-select`属性来做到这一点。](https://developer.mozilla.org/en-US/docs/CSS/user-select)但是，浏览器对它的支持是有限且不规则的。在我的测试中，它阻止了选择文本的*出现*，但根本没有阻止图像的拖动。现在，您需要使用一种解决方法，例如使用背景图像，如上所述。

FWIW，应用以下内容来删除正文中所有文本项的可选择性，或有选择地将其与特定选择器一起使用以禁用对特定元素的选择/拖动：

```
body {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
} 
```

# haml - 仅在 Haml 中创建局部变量

> ID：12430993
> 
> 赞同：30
> 
> 时间：2012-09-14T19:43:39.040
> 
> 标签：haml

我使用 Haml 作为原型布局的快速方法。这没有使用 Rails、Sinatra 或任何框架。

我想要做的是在顶部声明一个变量并能够在整个页面中调用它，类似于我可以在 Sass 中声明一个变量并在整个代码中使用它的方式。

```
!!! 5
  %body
    / Declare Variable
    - $type = 'Audio'

    .container{:id => "page-#{$type}"} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-14T19:47:50.770

删除`$`以避免声明全局变量。它应该工作得很好。

```
!!! 5
  %body
    / Declare Variable
    - type = 'Audio'
    .container{:id => "page-#{type}"} 
```

# objective-c - MKStoreKit 自动更新订阅

> ID：12430994
> 
> 赞同：4
> 
> 时间：2012-09-14T19:43:42.863
> 
> 标签：objective-c, ios, in-app-purchase, mkstorekit

我正在使用 MKStoreKit 来处理自动更新订阅。我目前正在测试 1 个月的订阅（在测试中订阅持续 5 分钟）。购买订阅后，我等待它过期。到期后，我会检查订阅是否仍然有效。

```
[[MKStoreManager sharedManager] isSubscriptionActive:kSubscriptionMonthlyIdentifier] 
```

这会像我期望的那样返回 false。但是，由于它是自动续订的，我希望 MKStoreKit 届时会联系 Apple 以重新验证订阅。也许我使用 MKStoreKit 错误，但根据[文档](https://github.com/MugunthKumar/MKStoreKit)和[博客文章](http://blog.mugunthkumar.com/coding/using-mkstorekit-in-your-apps/)，它应该很简单：

```
//App Delegate
[MKStoreManager sharedManager];
//lets me know when the subscription was purchased
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(subscriptionPurchased:) name:kSubscriptionsPurchasedNotification object:nil];    
//lets me know when the subscription expires
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(subscriptionFailed:) name:kSubscriptionsInvalidNotification object:nil];

//In a view with subscription feature
if([[MKStoreManager sharedManager] isSubscriptionActive:kSubscriptionMonthlyIdentifier]){
    //access to subscription feature
}

//Where the user would purchase the subscription
[[MKStoreManager sharedManager] buyFeature:subscriptionId onComplete:^(NSString* purchasedFeature, NSData* receiptData)
{
...
}
 onCancelled:^
{
...
} 
```

我的问题是，当订阅在 Apple 端仍然有效时，为什么 MKStoreKit 不让我知道？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-16T23:29:47.477

[文档](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/StoreKitGuide/Chapters/Subscriptions.html#//apple_ref/doc/uid/TP40008267-CH7-SW8)说：

> 为了测试，生产环境和测试环境中的自动更新订阅的行为存在一些差异。
> 
> 续订速度加快，自动续订订阅每天最多续订六次。这使您可以测试您的应用如何处理订阅续订，以及它如何处理失效后的续订，以及它如何处理包含间隙的订阅历史记录。
> 
> **由于加快了到期和续订率，订阅可能会在系统开始尝试续订订阅之前到期，从而在订阅期间留下一小段时间。由于各种原因，在生产中也可能出现此类失误——确保您的应用程序正确处理它们。**

你可以尝试：

1.  测试更长的订阅周期，让“​​系统”有更多的时间来续订订阅（6mo = 30min, 1y = 1h）？
2.  运行计时器以继续检查订阅是否在延长时间后续订？
3.  通过恢复购买来强制续订？

此外，正如[此处](https://stackoverflow.com/questions/6588539)详述的那样，请确保您在检查之前等待的时间不超过订阅期的六倍，因为订阅每天只能为单个测试帐户续订六次。

我正要开始在我自己的应用程序中实现这个，所以如果我遇到同样的情况我会回信。

更新：

我在某处读到，当应用程序在到期前 24 小时后启动时会发生自动更新。这可能很难在沙盒中复制。也可以通过刷新应用收据 (>= iOS 7) 或重新验证最近购买的收据 (< iOS 7) 来强制续订。

我已经在[github](https://github.com/ykjchen/JCSubscriptionManager)上发布了我的实现供您阅读。

# android - 我需要学习 java 来构建 Android 应用程序吗？

> ID：12430995
> 
> 赞同：2
> 
> 时间：2012-09-14T19:43:52.540
> 
> 标签：android, cordova

我必须为android平板电脑做一个项目，但我不知道我是否可以使用Phonegap而不是学习Java。我的申请必须：

*   与 SQL 服务器交谈：更新、删除等（使用 Web 服务）如果与服务器应用程序没有连接，则必须将数据存储在本地，然后必须更新到远程
*   在地图中显示用户的当前位置（如导航）
*   用户可以在地图上添加位置或信息（如跟踪位置上的对象）

应用程序将使用 Internet，因此应用程序必须是安全的，应用程序没有很多用户，最大用户数为 50。

所以你怎么看？如果你在 Phonegap 工作，你能建议我使用它还是我必须学习 Java？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T19:58:39.243

简短的回答是**不**，您不必这样做，您可以使用 PhoneGap，或者如果您是**.NET**粉丝，那么请改用Mono [For Android](http://xamarin.com/monoforandroid)

**电话间隙**

当您开始您的新应用程序项目时，您只需要将您的 html 页面加载到应用程序中，这就是您需要了解的有关 java 的全部内容，从这一点开始，您将开始使用 javascript 、 html 、 css 、 phonegap 在您的 HTML 文档中实现访问移动 API、jquery mobile 等

![在此处输入图像描述](../Images/ec2f8a13a463ff4ff755ca251768410a.png)

从“基于 Web 的应用程序”访问远程服务器数据的最佳方式是对远程服务器进行 ajax 调用，因此请记住您将使用 Jquery Mobile（或任何其他支持此功能的 UI 框架）

*   [PhoneGap Storage](http://docs.phonegap.com/en/2.0.0/cordova_storage_storage.md.html#Storage)提供对设备存储选项的访问。
*   [PhoneGap Geolocation](http://docs.phonegap.com/en/2.0.0/cordova_geolocation_geolocation.md.html#Geolocation)地理定位对象提供对设备 GPS 传感器的访问。

如果您将使用 PhoneGap 并希望拥有一个原生外观的应用程序，推荐的是[kendo ui](http://www.kendoui.com/mobile.aspx)，它有点贵 200 美元但值得

*再加上*Ridcully 在他的回答中所说的“如果你想认真地为 Android 编程，你将不得不学习 Java 和 Android API。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:53:27.007

如果你想认真地为 Android 编程，你将不得不学习 Java 和 Android API。

如果这只是一项一次性任务，我认为所有必需的问题都可以使用 Javascript/Phonegap 解决。

# c# - 在 C# 中增加一个临时/定时变量

> ID：12430996
> 
> 赞同：0
> 
> 时间：2012-09-14T19:44:00.740
> 
> 标签：c#, variables, timer, intervals

原谅我对这个问题的无知，因为我对 C# 完全陌生，但是如何设置和处理临时变量或定时变量呢？例如，每当事件触发时，我想增加一个计数器。如果计数器在 60 秒内超过 3，我想触发另一个事件。否则，如果 60 秒过去并且计数器没有增加，它会重置回 0。

我应该使用 MemoryCache 吗？还是我可以为变量设置一些漂亮的标志以使它们在指定的持续时间后取消设置（假设它们没有刷新）？完成这个简单任务的最佳方法是什么？请注意，我不一定要找人为我写；只是一个有用的手或建议，可以为我指明正确的方向。这是我要完成的工作的粗略概述：

```
private static int totalCount = 0;
private static double maxCount = 3;
private static double timeLimit = 60;

private static void TestEvent(object src, EventArgs mea)
{
  totalCount++;
  if (totalCount > maxCount)
  {
    DoSomething();
  }
} 
```

感谢您提供的任何帮助。我强调**总是**奖励有用的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T20:07:26.600

您可以维护一个`Queue<T>`（请参阅[http://msdn.microsoft.com/en-us/library/7977ey2c.aspx](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)），其中每个条目是事件触发的时间。当事件触发时，您首先从队列中删除任何超过 60 秒的条目（这很容易，因为队列是按时间排序的，并且队列的头部是最旧的​​条目），然后添加一个新条目对于刚刚触发的事件。如果队列的数量超过了您的阈值，那么您已经满足了您正在寻找的条件。

我建议使用`DateTime.UtcNow`而不是`DateTime.Now`存储在`Queue<T>`. UtcNow 快得多，它避免了从夏令时转换到标准时间以及反之亦然可能导致的问题。

这是我脑海中的一些代码（可能需要一些修复）：

```
private static Queue<DateTime> eventQueue = new Queue<DateTime>();
private static int timeWindowSeconds = 60;
private static int threshold = 3;

private static void TestEvent(object src, EventArgs mea) {
    DateTime now = DateTime.UtcNow;
    DateTime tooOld = now.AddSeconds(-timeWindowSeconds);

    // remove old entries
    while((eventQueue.Count > 0) && (eventQueue.Peek() < tooOld)) {
        eventQueue.Dequeue();
    }

    // add new entry
    eventQueue.Enqueue(now);

    // test for condition
    if (eventQueue.Count >= threshold) {
        eventQueue.Clear();
        DoSomething();           
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T19:55:32.697

你可以这样做：

```
private static int totalCount = 0;
private static double maxCount = 3;
private static TimeSpan timeLimit = TimeSpan.FromSeconds(60);
private static DateTime lastIncrementTime;

private static void TestEvent(object src, EventArgs mea)
{
    // If the time between now and lastIncrementTime is more than the timeLimit...
    if(DateTime.Now - lastIncrementTime > timeLimit)
    {
        totalCount = 0;
    }
    lastIncrementTime = DateTime.Now;

    totalCount++;     
    if (totalCount > maxCount)
    {
        DoSomething();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T19:55:24.347

有无数种方法可以解决这个问题。我首先想到的是使用在后台线程上启动的 Stopwatch 对象或 Timer 对象，然后编写一个可以订阅您感兴趣的事件的事件处理程序。当事件发生时，您的处理程序会触发，允许您暂停计时器并查询经过的时间，并相应地做出递增/重置决定。

这只是一个概念的非常粗略的草图，但应该会给你一些前进的想法。祝你好运。

根据上面@hatchet 的评论，这几乎开始听起来像一个带有“过期”成员的队列或一个“滑动窗口”事件视界，如果该评论准确反映了您的问题，您必须捕获该事件范围。

**编辑**作为我的边缘强迫症，我给了你最初的问题一些想法，并提出了一个可能与你的问题相关或可能不相关的概念，但至少对于学术练习，我将发布我的内容做过。在您的原始帖子中引起我注意的是*过期或定时变量*的概念，我认为这很新颖。您的问题指定您想要在给定的时间间隔过去时做一些特定的事情。

我试图将这个想法抽象成一个通用的形式，思考这样一个想法可能有用的几种方式。想到的一个想法是在游戏环境中，（例如）在“自毁”之前，玩家可能只能看到一条消息 20 秒。我可以想象将过期“管道”连接到类型中可能会非常方便。另一种情况可能是在 CAI 环境中，其中 System.Drawing.Image 应该只显示固定时间，然后消失 - 同样，内置到期和计时代码的情况可能很有用。

因此，至少考虑到这么多概念上的实用性，我开始工作，我拼凑的东西（我不会假装它全面或完整）是 Expiring 类型的泛型，表示为`Expiring<T>`. 我整理的基线代码如下：

```
 // First stab at an "expiring" type that is only valid for a set interval.
public class Expiring<T>
{
    public delegate void ExpiredHandler(object sender, EventArgs e);
    public event ExpiredHandler OnExpired;

    T instance;
    int signaledCount = 0;
    long milliseconds = 0;
    bool isExpired = false;
    bool exceptOnExpiredReference = true;
    System.Timers.Timer lapseTimer = new System.Timers.Timer();

    public Expiring(T value)
    {
        instance = value;
    }

    public virtual void TimerElapsed(object sender, System.Timers.ElapsedEventArgs args)
    {
        if (OnExpired != null)
        {
            OnExpired(this, null);
        }

        isExpired = true;
    }

    public Expiring(T startValue, long expirationInterval, bool throwElapsedReferenceException):this(startValue)
    {
        milliseconds = expirationInterval;
        lapseTimer.AutoReset = true;
        lapseTimer.Interval = milliseconds;
        exceptOnExpiredReference = throwElapsedReferenceException;
        lapseTimer.Elapsed+=new System.Timers.ElapsedEventHandler(TimerElapsed);
        this.Set();

    }

    public void Set()
    {
        signaledCount++;
        lapseTimer.Stop();
        lapseTimer.Start();
    }

    public T Value
    {
        get
        {
            if (!isExpired || !exceptOnExpiredReference)
                return instance;
            else
                throw new InvalidOperationException("Reference to an expired value.");
        }
        set
        {
            instance = value;
        }
    }
} 
```

这里的想法是，有人可以声明一个`Expiring<int>`，指定它的初始值、过期时间和一个值，以指示在过期间隔过后尝试访问实例的值是否应该抛出异常。当 expireInterval 过去时，引发 OnExpired 事件，允许声明者指定自定义事件处理程序以在值到期时提供自定义操作。

如果调用者希望重置过期计时器，他只需要调用对象的 Set() 方法。这也增加了我最终没有使用的内部“signaledCount”值，但在确定到期计时器被重置的次数方面正在考虑。如果在过期间隔过后访问对象的 Value 属性，则会引发 InvalidOperationException 并显示“Value has expired”消息。

不幸的是，这个想法的理论/学术价值多于实际价值，恐怕。如果可以将所有算术运算符重载到本机值类型的实现中，它将具有更多的实用性，但我很快发现 C# 根本不喜欢这个概念（并在此处发现关于这个主题的相当广泛的帖子在这里）。理想情况下，我很想能够这样说：

```
Expired<Int32> foo = new Expired<Int32>(5,10000,true);
Expired<Int32> bar = new Expired<Int32>(10,10000,true);
Expired<Int32> baz = foo+bar;  // can't make that work 
```

有人认为这个问题可以通过动态类型来解决，但我现在选择不去追求它。正如我敲定的那样，这个想法供讨论，因为它适用于 OP 的“定时变量”概念的一般视图。鼓励和欢迎建设性的评论/批评/改进。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T20:07:37.627

您可以使用[StopWatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)类。

在表单加载事件上（如果你想从那个事件开始计算 60 秒），启动计时器，每次在点击事件中，检查它被调用了多少秒左右。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T19:53:21.353

您可以使用另一个变量来记录更改 的值的时间`totalcount`。用当前时间检查它并做任何你想做的事情。
这是代码...

```
private static int totalCount = 0;
private static double maxCount = 3;
private static double timeLimit = 60;
private static DateTime  timeflag= DateTime.Now;

private static void TestEvent(object src, EventArgs mea)
{
    if (timeflag.AddSeconds(timeLimit) < DateTime.Now)
    {
        totalCount = 0;
    }
    totalCount++;
    timeflag = DateTime.Now;
    if (totalCount > maxCount)
    {
            DoSomething();
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-14T21:01:36.210

我会做这样的事情：

```
private class SomeEventMonitor
{
    public  int      Threshold       { get ; private set ; }
    public  TimeSpan ThresholdWindow { get ; private set ; }

    private DateTime  marker ;
    private int       count  ;

    /// <summary>
    /// public constructor
    /// </summary>
    /// <param name="threshold"></param>
    /// <param name="window"></param>
    public SomeEventMonitor( int threshold , TimeSpan window )
    {
        if ( threshold <  1             ) throw new ArgumentOutOfRangeException("threshold") ;
        if ( window    <= TimeSpan.Zero ) throw new ArgumentOutofRangeException("window") ;

        this.Threshold       = threshold ;
        this.ThresholdWindow = window    ;

        Reset() ;

        return ;
    }

    private void Reset()
    {
        this.marker       = DateTime.Now ;
        this.count        = 0            ;
        return ;
    }

    public event EventHandler ThresholdExceeded ;

    private static readonly object latch = new object() ;
    public void EventWatcher( object source , EventArgs eventArgs )
    {
        lock ( latch )
        {
            DateTime current = DateTime.Now ;

            if ( ++count > Threshold )
            {
                TimeSpan window = current -marker ;
                if ( window > ThresholdWindow )
                {
                    ThresholdExceeded( this , new EventArgs() ) ;
                    Reset() ;
                }
            }

        }
        return ;
    }

} 
```

# c# - 使用 HttpWebClient 或 RestSharp 进行单元测试

> ID：12430998
> 
> 赞同：1
> 
> 时间：2012-09-14T19:44:05.983
> 
> 标签：c#, unit-testing, repository-pattern

我正在尝试找到一种方法来为“CheckSomething”方法编写单元测试，但是我很难弄清楚如何处理我在该方法中实例化的 RestClient 对象。

我应该抽象出RestClient，并将接口依赖项放在类级别并从构造函数内部注入吗？如果我选择这条路线，这是否意味着我必须接口所有依赖项？？

```
public class SomeRepository : IXRepository
{
    public SomeRepository()
    {
    }

    public bool CheckSomething()
    {
        var client = new RestClient("someurl");

        var request = new RestRequest("resourceX/{name}", Method.GET);
        request.AddUrlSegment("name", "ABC");
        var response = client.Execute(request);

        if (response.StatusCode == HttpStatusCode.NotFound) return false;
        if (response.StatusCode == HttpStatusCode.OK) return true;

        throw new Exception("Something is messed up");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:52:21.687

如果你不想要 SomeRepository 中的类级别 RestClient 字段，你可以使用方法注入，并在 CheckSomething 方法中添加一个 RestClient 参数。然后，您可以模拟 RestClient 进行单元测试。

```
public bool CheckSomething(RestClient restClient)
{
    var request = new RestRequest("resourceX/{name}", Method.GET);
    request.AddUrlSegment("name", "ABC");
    var response = client.Execute(request);

    if (response.StatusCode == HttpStatusCode.NotFound) return false;
    if (response.StatusCode == HttpStatusCode.OK) return true;

    throw new Exception("Something is messed up");
} 
```

如果那是我的代码，我想测试以下内容：

1.  是否正确设置了传递给 RestClient.Execute 方法的 RestRequest。
2.  该方法是根据 response.StatusCode 返回 true 还是 false
3.  任何其他状态代码是否会导致引发异常。

如果这就是您需要测试的全部内容，那么您唯一需要模拟的是 RestClient，这意味着您可以轻松地使用方法注入、构造函数或属性注入。