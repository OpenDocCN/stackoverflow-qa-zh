# StackOverflow 问答 10495000-10495999

# ios - 单击 ios“上一个”和“下一个”按钮时，JQuery 标题移动位置

> ID：10495000
> 
> 赞同：0
> 
> 时间：2012-05-08T08:16:22.487
> 
> 标签：ios, jquery-mobile, cordova

我已经使用 JQuery 1.1.0 和 Phonegap 构建了一个应用程序。我现在遇到的问题是，当我在字段中输入文本并点击 ios 键盘的“上一个”和“下一个”按钮时，标题会暂时从其固定位置移动并出现在页面上的不同位置。我必须补充一点，它也不一致，因为它不会在其他页面上这样做。标题被标记为固定，所以我不知道为什么它们有时会出现，有时不会出现。

多页的这一部分是“大部分时间”工作的页面示例，但有时当我在字段之间导航时，标题会滑出屏幕。

```
<div data-role="page" id="accident_detail" data-theme="f">
    <div data-role="header" data-position="fixed">
        <a href="#accident_insured" data-icon="arrow-l" data-direction="reverse" data-iconpos="notext"></a>
        <h1>Description</h1>
        <a href="#accident_vehicle" data-icon="arrow-r" data-iconpos="notext"></a>
    </div>
    <div data-role="content">
        <label for="incident_date">Date of Incident:</label>
        <input type="date" name="incident_date" id="incident_date" value="" class="required"/>
        <label for="incident_description">Description of Incident:</label>
        <textarea cols="40" rows="8" name="incident_description" id="incident_description" class="required"></textarea>
        <label for="accident_damage">Damage description:</label>
        <textarea cols="40" rows="8" name="accident_damage" id="accident_damage"></textarea>
        <label for="location_street">Street:</label>
        <input type="text" name="location_street" id="location_street" value="" class="required"/>
        <label for="location_city">City:</label>
        <input type="text" name="location_city" id="location_city" value="" class="required"/></div>
    <div data-role="footer" data-position="fixed" class="ui-btn-right" style="min-height:42px;">
        <a href="#accident_menu" data-icon="arrow-l" data-direction="reverse" data-iconpos="left"
           style="margin-left: 10px; margin-top: 5px">Done</a>
        <a href="index.html" rel="external" data-icon="home" data-direction="reverse" data-iconpos="notext"
           style="float: right; margin-right: 10px; margin-top: 5px"></a>
    </div>
</div> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-29T05:50:51.823

你可以试试这个..

```
<div data-role="page" id="myPage">
<div data-role="header" data-position="fixed" data-tap-toggle="false">
    <a data-icon="back" data-transition="none">Back</a>
    <h1>PAGE TITLE</h1>
</div>
</div> 
```

# google-drive-api - 500：“无法读取应用程序配置信息”

> ID：10495004
> 
> 赞同：2
> 
> 时间：2012-05-08T08:16:35.170
> 
> 标签：google-drive-api

我们在我们的 Ruby on Rails 项目中使用 google-api-client gem 来访问 Google Drive API 方法，一切都运行良好。但是，在调用 drive.files.update 或 drive.files.insert 方法时，我们有时会收到来自 API 的以下错误响应：

{"code"=>500, "message"=>"无法读取应用配置信息"}

此错误未记录在 SDK 的可能错误列表中，因此我不确定应该如何处理。能否请你帮忙？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:15:31.953

如果此错误是暂时的，最好的方法是在发生这种情况时制定重试策略（只需在放弃之前重试请求 2 或 3 次）。

在 Drive 端似乎存在一些并发问题，其中读取应用程序配置的请求超时。根据使用 Google API 和一般 Web API 的经验，我可以告诉你，即使团队会尝试修复/改进这些（顺便说一句，我会报告错误以便他们进行调查），这样的错误总是会发生一次尽管分布式 Web 规模系统上的并发、超时和可靠性问题的发生率非常低，但也极难解决。拥有防故障代码的最佳方法是对来自外部 Web API 的每个 500 和 503 错误重试几次。

[如果您真的有时间，您甚至可以实施指数退避策略，如我们的文档中所述，](https://developers.google.com/drive/practices#implementing_exponential_backoff)每次重试之间的时间每次都会增加。

# android - ApacheHttpTransport [ClassNotDef 异常] [android 项目不工作，但控制台应用程序工作] 为什么？

> ID：10495005
> 
> 赞同：0
> 
> 时间：2012-05-08T08:16:36.170
> 
> 标签：android, google-places-api

我遇到了一些问题。当我在 Eclipse（非安卓）中运行控制台应用程序时，我导入了 google-api-client-googleapis-1.4-beta.jar google-http-client-1.8.3-beta.jar

这行得通！！

但是当我将相同的东西导入我的android应用程序时，它在 new com.google.api.client.http.apache.ApacheHttpTransport(); [ClassNotDef 异常]

然后我关注了很多建议库列表的帖子，下载所有这些，并导入所有它们....但它仍然不应该我导入的方式是右键单击项目->配置构建路径-> 库 -> 添加外部 jar 文件..

所以一旦切换到android应用程序，它就找不到类。我以为我正确地导入了课程，但由于我有 classNotDef 我不认为我是。有谁知道原因？？？

任何提示都会很好。或者可能建议项目所需的库列表。

万分感谢。

劳伦斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:44:11.740

您要查找的类在 Android 的包结构中不存在。这个问题有两种解决方案：

1：您可以查看[相应包的](http://developer.android.com/reference/org/apache/http/package-summary.html)文档并使用不同的类。

2：另一方面，您可以选择您想要的课程并将其与您的应用程序一起打包。然后保证会被找到。

# django - 如果我使用 DJango Fandjango App，则在新浏览器中打开 FB App 而不是 FB Canvas

> ID：10495013
> 
> 赞同：1
> 
> 时间：2012-05-08T08:17:13.983
> 
> 标签：django, facebook, django-facebook, fandjango

我有一个使用 Fandjango 创建的 FB 应用程序。如果用户第一次登录应用程序，它可以正常工作，但如果用户之前使用过该应用程序并想要打开该应用程序，它会在独立浏览器中打开，而不是在 FB Canvas 中打开。

任何想法如何纠正。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:10:31.860

您会看到这种行为，因为 Fandjango 将签名请求缓存在 cookie 中，因此您不必通过 Facebook 画布代理每个请求。目前没有办法禁用缓存，因为它会引入非常大的开销（每个请求几秒钟），并使您很难将用户重定向到应用程序的各个部分。

请参阅[https://github.com/jgorset/fandjango/issues/55](https://github.com/jgorset/fandjango/issues/55)。

# java - 我的冒泡排序和其他排序方法中的空指针异常

> ID：10495018
> 
> 赞同：0
> 
> 时间：2012-05-08T08:17:36.910
> 
> 标签：java, linked-list, nullpointerexception, bubble-sort, insertion-sort

我有一个项目，我必须编写一堆排序方法并测量每个方法的时间复杂度，并将结果输出到输出文本文件。程序运行但我在冒泡排序方法中得到一些空指针异常。这是我的代码和错误，如果你能告诉我如何修复我的排序方法，那就太棒了！

链表类：

```
public class LinkedList {
protected static class Node {
    Comparable item;
    Node prev, next;

    public Node(Comparable newItem, Node prev, Node next) {
        this.item = newItem;
        this.prev = prev;
        this.next = next;
    }

    public Node (Comparable newItem) {
        this(newItem, null, null);
    }

    public Node() {
        this(null, null, null);
    }

    public String toString() {
        return String.valueOf(item);
    }
}

private Node head;
private int size;
public int dataCompares, dataAssigns;
public int loopCompares, loopAssigns;
public int other;

public LinkedList() {
    head = new Node(null, null, null);
    head.prev = head;
    head.next = head;
    size = 0;
}

public boolean add(Comparable newItem) {
    Node newNode = new Node(newItem);
    Node curr;
    if(isEmpty()) {
        head.next = newNode;
        head.prev = newNode;
        newNode.next = head;
        newNode.prev = head;
    } else {
        newNode.next = head;
        newNode.prev = head.prev;
        head.prev.next = newNode;
        head.prev = newNode;
    }
    size++;
    return false;
}

public boolean remove(Comparable item) {
    if(!isEmpty()) {
        Node prev = null;
        Node curr = head;
        while(curr!=null) {
            if(curr.item.compareTo(item)==0) {
                if(prev==null) {
                    head=curr.next;
                } else {
                    prev.next = curr.next;
                    curr=curr.next;
                }
                size--;
                return true;
            }else{
                prev=curr;
                curr = curr.next;
            }
        }
    }
    return false;
}

public void removeAll() {
    this.head.prev = null;
    this.head.next = null;
    size = 0;
}

public boolean isEmpty() {
    return size == 0;
}

public boolean remove(Object item) {
    return true;
}

public void insertSortNode() {  
    Node back = head;
if (size < 2)
    return;
    back = back.next;           // SECOND entry in the list
    while ( back != null ) {      // I.e., end-of-list
           Comparable value = back.item;
        Node curr = head;        // Start at the front
  // Find insertion point for value;
    while (curr != back && value.compareTo(curr.item) >= 0)
            curr = curr.next;
  // Propogate values upward, inserting the value from back
    while (curr != back){  
            Comparable hold = curr.item;
        curr.item = value;
        value = hold;
        curr = curr.next;
    }
    back.item = value;      // Drop final value into place!
    back = back.next;       // Move sorted boundary up
}
} // end insertSort()

       public void selSort() {  
    Node front = head;
   // Nothing to do on an empty list
      if ( front == null )
         return;
      while ( front.next != null ) {     // skips a one-entry list
         Node tiny = front;
         Node curr = front.next;
         Comparable temp = front.item; // start the swap
         for ( ; curr != null ; curr = curr.next ) {  
                if ( tiny.item.compareTo(curr.item) > 0 )
                tiny = curr;
         }
         front.item = tiny.item;       // Finish the swap
         tiny.item = temp;
         front = front.next;           // Advance to the next node
      }
      // The structure is unchanged, so the validity of tail is unchanged.
       }

public void bubbleSort() {
    Node Trav=head.next;
    Node Trail=head.next;
    Comparable temp;
    if (Trav != null)
       Trav = Trav.next;
    while(Trav!=null) {
      if (Trav.item.compareTo(Trail.item)<0) {
        temp = Trail.item;
        Trail.item=Trav.item;
        Trav.item = temp;
      }
      Trail=Trav;
      Trav=Trav.next;
    }
   }

public void insertSortArray() {
    Node insert1, cur, tmp1;
    Comparable temp;
    for(insert1 = this.head.next.next; insert1!=this.head; insert1 = insert1.next) {
    //++loopcompares; ++loopassigns;
        for (cur = head.next; cur!=insert1; cur=cur.next) {
        //++loopCompares; ++loopassigns;
        //++datacompares;
            if(insert1.item.compareTo(cur.item)<0) {
                temp=insert1.item;
                //++dataassign
                tmp1=insert1;
                //++other
                while(tmp1!=cur.prev) {
                //++loopcomares
                    tmp1.item=tmp1.prev.item;
                    tmp1=tmp1.prev;
                    //++dataassign+=2
                }
                //++loopcompares
                cur.item = temp;
                //++dataassign;
                break;
            }
        }
        //++loopcompares; ++loopassigns;
    }
    //++loopcompares; ++loopassigns
}

public void disp6sortsFile(boolean disp, String fileName, String header, String data) {
    FileWriter fw = null;
    PrintWriter pw = null;
    try {
        File file = new File(fileName);
        fw = new FileWriter(file, true);
        pw = new PrintWriter(fw, true);
    } catch (IOException e) {
        System.err.println("File open failed for " +fileName+ "\n" + e);
        System.exit(-1);
    }
    if (disp) {
        pw.print(header + "\n");
    }
        pw.print(data + "\n");
        pw.close();
}
} 
```

这是我的错误：

```
Exception in thread "main" java.lang.NullPointerException
    at LinkedList.bubbleSort(LinkedList.java:149)
    at LinkListTester.main(LinkListTester.java:51) 
```

linkedlisttester 错误只是 list1.bubbleSort(); 所以冒泡排序是问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:08:17.563

改变：

```
public String toString() {
    return this.item.toString();
} 
```

至：

```
public String toString() {
    return String.valueOf(item); // Handle null too.
} 
```

为`add`返回真。如果需要，可能会检查该项目是否为空。

**`remove`是为单个链表编写的。**

头部有`remove`一个空项目，这可能导致错误。此外，由于我们有一个带有虚拟节点的循环列表，因此终止不应该测试空值，而是测试头。否则不存在的项目将无限循环。

```
public boolean remove(Comparable item) {
if(!isEmpty()) {
    Node prev = null;
    Node curr = head.next; // !
    while(curr!=head) { // !
        if(curr.item.compareTo(item)==0) {
            if(prev==null) { // ! WRONG, but I will not correct home work ;)
                head=curr.next;
            } else {
                prev.next = curr.next;
                curr=curr.next;
            }
            size--;
            return true;
        }else{
            prev=curr;
            curr = curr.next;
        }
    }
}
return false;
} 
```

swap 是为单个链表编写的。

在这里我停止阅读，因为我已经了解了用法。

* * *

***第二次编辑：***

所有算法函数，即bubbleSort，都有以下控制流程：

```
while(Trav!=null) { ... Trav = Trav.next; } 
```

但是数据结构是循环定义的，所以最终你回到`head`那里，项目为空。

**解决方案是为第一个 Node 设置 prev null，为最后一个 Node 设置 next null。**

为了使这一点清晰易读，您可以将其替换为`Node head`：

```
Node first;
Node last; 
```

# cocoa - 鼠标移动窗口时如何接收通知？

> ID：10495037
> 
> 赞同：3
> 
> 时间：2012-05-08T08:18:42.400
> 
> 标签：cocoa, notifications, nswindow

我试过了`-setFrame:display:`，`-windowDidMove:`但在移动窗口时没有发送它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T10:01:19.503

如果你想跟踪`NSWindow`实时移动，默认情况下是不可能的，你必须自己做。`NSWindow`可以在开始拖动（移动）`NSWindowWillMoveNotification`或结束拖动（移动）时收到通知- `NSWindowDidMoveNotification`。

看看这些例子，它们可以帮助您解决实时窗口移动问题：

**1\. 示例：**

> **描述：** NSWindow 上非常短的类别，使窗口在拖动期间连续发布 NSWindowDidMove 通知（很像 NSWindowDidResizeNotification 的行为）。使用辅助线程并且可以切换行为。

[下载链接](http://www.sb-software.de/marco/dev/SBSWindowAdditions.zip)。

**2\. 示例：**

[项目下载链接](http://www.sb-software.de/marco/dev/TrackingAWindowFrame.zip)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-08T08:52:52.750

您可以为[`NSWindowDidMoveNotification`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/doc/uid/20000013-BCIJGJIE).

# sqlite - sqlite3_exec 可以在一次调用中执行多个 pragma 吗？

> ID：10495041
> 
> 赞同：1
> 
> 时间：2012-05-08T08:19:13.873
> 
> 标签：sqlite

是否可以在同一个 sqlite3_exec 语句中执行多个 PRAGMA 调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:59:13.433

它不支持。但是，您可以使用 sqlite3 (CLI) 使用“-init”选项执行多个 PRAGMA。

# c# - Response.Redirect 会丢失 ViewState 吗？

> ID：10495043
> 
> 赞同：0
> 
> 时间：2012-05-08T08:19:23.200
> 
> 标签：c#, .net, redirect, viewstate

假设，在我创建此控件的页面（WebForms）的 Page_Load() 上：

```
HtmlGenericControl optionBox = new HtmlGenericControl("div");
optionBox.Attributes["class"] = "class_1"; 
```

然后，用户将使用 LinkBut​​ton 调用页面。在从此按钮调用的方法上，我更改了以前 div 的类：

```
protected void cmdCerca_Click(object sender, EventArgs e)
{
    ...
    div.Attributes.Add("class", "class_2");
    ...
} 
```

好吧，如果我查看渲染结果，我会看到 div 的类已更改。

这意味着，在下一次调用此页面时（来自此上下文，示例调用`cmdCerca_2_Click`），该对象将从视图中恢复，获取`class_2`，而不是`class_1`。

但是，如果在结束时`cmdCerca_Click`我用 . 调用同一页面，则不会发生这种情况`Response.Redirect()`。似乎视图会丢失。

为什么？我该如何解决？

希望问题很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:22:25.633

You need to add the controls in the page init event, rather than load, in order to get them into the control tree.

You must be recreating this control on every postback? In this case, your default class will be set every time.

# iphone - 使用 NSURLConnection 连接失败，如何重新连接？

> ID：10495046
> 
> 赞同：0
> 
> 时间：2012-05-08T08:19:41.393
> 
> 标签：iphone, ios, nsurlconnection

我关闭网络并运行我的 ios 程序。然后保持停止程序。

当我打开我的网络之后。我的程序仍然停止。

我想在 ios 中重新连接 NSURLConnection。

```
-(void) applistDBdownload
{
NSString *file = [NSString stringWithFormat:@"http://sok129.cafxxx.com/oneapplist.sqlite3"];
NSURL *fileURL = [NSURL URLWithString:file];

NSURLRequest *req = [NSURLRequest requestWithURL:fileURL];
connect= [NSURLConnection connectionWithRequest:req delegate:self];

fileData = [[NSMutableData alloc] initWithLength:0];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
NSLog(@"fail");    -> come in when network off.
                   -> no come in when network on

}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
          -> no come in when network on
          -> come in when network off 
} 
```

1.如何重新连接？

和

```
 - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
if(self.connect!=connection)
{
    NSLog(@"noconnect");
    return;
}

 [self.fileData appendData:data]; 
} 
```

1.  在这个代码区域，如果网络关闭，我如何处理这个代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:27:19.347

您通常应该告诉用户出了点问题（`UIAlertView`例如，使用 ）。您可以要求用户再次尝试连接。您也可以将其设置为对用户“透明”，然后在用户不知道发生了什么的情况下重试。再打电话给你`applistDBdownload`。虽然，我认为您应该尝试创建某种逻辑以最适合您的需求（如果您知道您的网络不断出现故障，请尝试 3 或 4 次，然后再警告用户）。最后，您可以尝试在服务器端进行更改（可能接收较小的包，因此在您接收数据时网络中断的百分比较小）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:55:36.790

当您的网络关闭时， - (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error 将在此处被调用，您可以添加以下行以请求 agin [mConnection start]; 当您开始连接并打开时，如果您打开网络，您可以获得正确的连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T09:26:32.903

您可以使用处理重试 HTTP 请求的 Apple **MVCNetworking 。**[MVC网络](http://developer.apple.com/library/ios/#samplecode/MVCNetworking/Introduction/Intro.html)

以下是苹果派生的：[MVCNetworking 派生](https://github.com/acernikovs/MVCNetworking)

这种方法意味着您在创建请求时首先应该编写更多代码，但是当请求失败时，它将在给定的时间间隔内进行重试。

# ajax - 使用 ajax 插入标记后显示 Google Plus 按钮

> ID：10495049
> 
> 赞同：2
> 
> 时间：2012-05-08T08:19:58.423
> 
> 标签：ajax, jquery, google-plus-one

我正在尝试在页面上加载 google+ 1 按钮，目标是通过 ajax 将按钮标记插入页面，然后调用要呈现的按钮。

首次加载页面时，该按钮呈现良好。当从 /displaycode.php 获取标记然后再次进行渲染调用时，就会出现问题。

```
<a href="javascript:void(0)" id="btn">REFRESH</a>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js">
  {"parsetags": "explicit"}
</script>
<script type="text/javascript">
$(function() {
  $("#btn").click(function() {
        $('#live-preview').empty();
        $("#live-preview").load('/displaycode.php #code');
        gapi.plusone.go();
    return false;
  });
    gapi.plusone.go();
});
</script>
<div id="live-preview"><div id="code"><div class="g-plusone"></div></div></div>
</div> 
```

可以在这里查看问题的演示[http://32px.co/googleplusdemo.php](http://32px.co/googleplusdemo.php)。感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T09:03:19.967

## 渲染方法

使用显式渲染：[https ://developers.google.com/+/plugins/+1button/#example-explicit-render](https://developers.google.com/+/plugins/+1button/#example-explicit-render)

```
gapi.plusone.render('live-preview') 
```

代替：

```
gapi.plusone.go(); 
```

还需要 "{"parsetags": "explicit"}" 设置：

```
<script type="text/javascript" src="https://apis.google.com/js/plusone.js">
    {"parsetags": "explicit"}
</script> 
```

## 编辑

您还必须确保在 jQuery 加载完成后调用 render 。所以元素实际上是在 DOM 中。

```
$(function() {
    $("#btn").click(function(e) {
        e.preventDefault();
        $('#live-preview').empty(); // Not necessary 
        $("#live-preview").load('/displaycode.php #code', function() {
            gapi.plusone.render('live-preview');
        });
    });
    gapi.plusone.render('live-preview');
}); 
```

# android - Android：基于屏幕尺寸的不同图像

> ID：10495050
> 
> 赞同：3
> 
> 时间：2012-05-08T08:20:11.627
> 
> 标签：android, size, screen

有没有办法让 Android 根据屏幕尺寸选择不同的图像？根据文档和我的测试，图像必须放在 drawable、drawable-mdpi、drawable-hdpi 等文件夹中。

然而，这些文件夹与屏幕 dpi 而不是屏幕大小有关。布局文件夹用于处理不同的屏幕尺寸，但它们不允许您在其中存储图像。只有 xml 文件。

因此，如果我在具有相同 dpi 但屏幕尺寸不同的两台设备上运行我的应用程序，则会从相同的可绘制文件夹中选择相同的图像。我真正想要的是为较大的屏幕选择较大的图像，为较小的屏幕选择较小的图像。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:27:49.673

是的，你是对的，这就是 Android 的工作方式，通过将不同的图片保存在特定的文件夹（l、m、h 和 xh -dpi）中。

你的问题在哪里？

您想保留所有屏幕分辨率的图像吗？它太多了。你能写出更具体的你想要达到的目标吗？

如果您在 layouts.xml 中遇到问题，只需检查：

```
android:scaleType="..." 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T08:33:50.343

您可以使用 9-patch 图像。可以在不损失质量的情况下拉伸 9 块图像。您可以参考以下链接了解更多信息[http://developer.android.com/guide/developing/tools/draw9patch.html](http://developer.android.com/guide/developing/tools/draw9patch.html)

# c# - How to load only the ids for an associated entities

> ID：10495051
> 
> 赞同：0
> 
> 时间：2012-05-08T08:20:30.287
> 
> 标签：c#, nhibernate, fluent-nhibernate-mapping

I have N-Tier architecture and in service layer I need a way to get only the ids for associated entities or the full entities. So on one session I only need the ids and in other session I may need the full entities.

I have two entities:

```
public class ParentEntity
{
    public virtual long Id { get; set; }
    public virtual IList<ChildEntity> Children { get; set; }
    public virtual string Name { get; set; }
    // ... other fields
}

public class ChildEntity
{
    public virtual long Id { get; set; }
    public virtual string Name { get; set; }
    public virtual string Description { get; set; }
   // ... other fields
} 
```

I some times I need to load the full ChildEntity (in verification layer) but some times I need only to load the ids for it like this in my service layer:

```
ParentEntity parent = repository.GetById(someId);
SendChildIds(parent.Children.Select(x => x.Id)); 
```

But doing this will load the ChildEntity fully I only want to load the ids like this

```
SELECT parentchild0_.ParentId    as ParentId0_,
     parentchild0_.ChildId as ChildId0_
FROM   ParentChildEntities parentchild0_
WHERE  parentchild0_.ParentId0_= 447 /* @p0 */ 
```

but he do something like this

```
SELECT pce.ParentId, ce.* FROM ChildEntities ce INNER JOIN ParentChildEntities pce on pce.ChildId = ce.Id WHERE pce.ParentId = 447 
```

I use FluentNHibernate to configure the mappings.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:43:06.500

您可以使用投影或映射到仅返回上述要求的另一个实体。

IE

```
ParentEntity {..., IList<ChildEntity> Children}
ChildEntity {...}
ParentEntityLite {...} //mapped w.r.t requirements i.e. no mappings for children 
```

或通过投影

```
from parent in _session.Query<ParentEntity>()
select new {parent.Id, ...}; //projection --> parent.Id

from parent in _session.Query<ParentEntity>()
select new ParentEntity(){Id = parent.Id}; // projection --> parent.Id 
```

# tridion - 封闭类型的 Component 没有对应的 IsMultimedia 可设置属性

> ID：10495054
> 
> 赞同：6
> 
> 时间：2012-05-08T08:20:34.793
> 
> 标签：tridion, tridion-content-delivery

我已经在 Visual Studio 中生成了对 SDL Tridion 2011 SP1 上的 CD OData webservice 的服务引用，一切似乎都运行良好，但是当我使用如下代码请求特定组件时：

```
ContentDeliveryService cdService1 = new ContentDeliveryService(new Uri("http://xxx:81/odata.svc"));
var item =  cdService1.Components.Where(p => p.ItemId == 29 && p.PublicationId == 1).First();
Console.WriteLine(item.ItemId); 
```

它抛出异常：

```
 The closed type ConsoleApplication1.CdService.Component does not have a corresponding IsMultimedia settable property. 
```

有人知道这个热修复吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T08:36:55.980

我认为问题在于服务器向您发送了客户端不知道的属性（IsMultimedia 属性）。您可以通过使用例如 Fiddler 查看来自服务器的响应来确认这一点。如果服务器上的 Component 类型被标记为打开（可以具有比声明的属性更多的属性），则可能会发生这种情况。客户端库目前不直接支持开放类型。

如果您不需要客户端上的 IsMultimedia 属性，您可以通过设置 cdService1.IgnoreMissingProperties = true 来抑制此错误。

如果您确实需要客户端的 IsMultimedia 属性，则为您生成的 Component 类应该是分部类，因此您可以手动为其添加属性 IsMultimedia。然后它也应该工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T08:42:46.860

这似乎是一个缺陷，将在下一个版本中修复。设置`IgnoreMissingProperties`有效，另一种解决方案是打开`Reference.cs`此引用的文件并将`public global::System.Nullable<bool> Multimedia`属性更改为`IsMultimedia`

# iphone - 自定义注释错误

> ID：10495055
> 
> 赞同：0
> 
> 时间：2012-05-08T08:20:44.043
> 
> 标签：iphone, ios, xcode, annotations

我使用下面的代码在我的地图视图中设置了一个自定义注释。问题是注释图像的位置不正确，它把它放在实际位置的右侧，而不是像使用常规 Pins 时那样准确。

```
 - (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;
    static NSString* AnnotationIdentifier = @"AnnotationIdentifier";
    MKAnnotationView *annotationView = [mapView dequeueReusableAnnotationViewWithIdentifier:AnnotationIdentifier];
    if(annotationView)
        return annotationView;
    else
    {
        MKAnnotationView *annotationView = [[[MKAnnotationView alloc] initWithAnnotation:annotation
                                                                         reuseIdentifier:AnnotationIdentifier] autorelease];
        annotationView.canShowCallout = YES;
        annotationView.image = [UIImage imageNamed:[NSString stringWithFormat:@"townhouse.png"]];
        UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
        [rightButton addTarget:self action:@selector(writeSomething:) forControlEvents:UIControlEventTouchUpInside];
        [rightButton setTitle:annotation.title forState:UIControlStateNormal];
        annotationView.rightCalloutAccessoryView = rightButton;
        annotationView.canShowCallout = YES;
        annotationView.draggable = YES;
        return annotationView;
    }
    return nil;
} 
```

任何帮助都将不胜感激！

/马库斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:40:11.633

马库斯，

使用`centerOffset`MKAnnotationView 的属性来移动您的自定义注释视图。

`annotationView.centerOffset = CGPointMake(xOffset, yOffest);`

# python - Python: How to format large text outputs to be 'prettier' and user defined

> ID：10495058
> 
> 赞同：2
> 
> 时间：2012-05-08T08:21:17.190
> 
> 标签：python, formatting

Ahoy StackOverlow-ers!

I have a rather trivial question but it's something that I haven't been able to find in other questions here or on online tutorials: How might we be able to format the output of a Python program that so that it fits a certain aesthetic format without any extra modules?

The aim here is that I have a block of plain text like that from a newspaper article, and I've filtered through it earlier to extract just the words I want but now I'd like to print it out in the format that each line only has 70 characters along it and any word won't be broken if it should normally fall on a line break.

Using .ljust(70) as in stdout.write(article.ljust(70)) doesn't seem to do anything to it.

The other thing about not having words broken would be as:

```
Latest news tragic m

urder innocent victi

ms family quiet neig

hbourhood

Looking more like this:

Latest news tragic

murder innocent

victims family 

quiet neighbourhood 
```

Thank you all kindly in advance!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T08:29:20.793

签出[python textwrap 模块](http://docs.python.org/library/textwrap.html)（一个标准模块）

```
>>> import textwrap
>>> t="""Latest news tragic murder innocent victims family quiet neighbourhood"""
>>> print "\n".join(textwrap.wrap(t, width=20))
Latest news tragic
murder innocent
victims family quiet
neighbourhood
>>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:30:58.847

使用 textwrap 模块：

[http://docs.python.org/library/textwrap.html](http://docs.python.org/library/textwrap.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T09:34:18.440

我相信这可以改进。没有任何库：

```
def wrap_text(text, wrap_column=80):
    sentence = ''
    for word in text.split(' '):
        if len(sentence + word) <= 70:
            sentence += ' ' + word
        else:
            print sentence
            sentence = word
    print sentence 
```

编辑：如果您想使用正则表达式来挑选单词，请从评论中使用：

```
import re

def wrap_text(text, wrap_column=80):
    sentence = ''
    for word in re.findall(r'\w+', text):
        if len(sentence + word) <= 70:
            sentence += ' ' + word
        else:
            print sentence
            sentence = word
    print sentence 
```

# sql - A long query optimization

> ID：10495062
> 
> 赞同：0
> 
> 时间：2012-05-08T08:21:54.303
> 
> 标签：sql, ms-access, query-optimization

I have a form that contains many records ,If I click on a record another form should be appear with detail of that previous record.In the second form I have many Textfield that fill from these Long query:

```
 SELECT tb_bauteile.*, tb_bauteile.CDT AS CdtNr, tb_Fahrzeug.ID, tb_Pinnummern.Pin,

    (SELECT Fehlercodes_akt_Liste.OBD_Code from Fehlercodes_akt_Liste Where Fehlercodes_akt_Liste.ID=[FC_Plus] ) AS KS_Plus,

    (SELECT Fehlercodes_akt_Liste.CDT from Fehlercodes_akt_Liste Where Fehlercodes_akt_Liste.ID=[FC_Plus] ) AS CDT_Plus, 

    (SELECT Fehlercodes_akt_Liste.Fehlerpfad from Fehlercodes_akt_Liste Where Fehlercodes_akt_Liste.ID=[FC_Plus] ) AS Pfad_Plus, 

    (SELECT Fehlercodes_akt_Liste.Fehlerunterpfad from Fehlercodes_akt_Liste Where Fehlercodes_akt_Liste.ID=[FC_Plus] ) AS UPfad_Plus,

    (SELECT Fehlercodes_akt_Liste.OBD_Code from Fehlercodes_akt_Liste Where Fehlercodes_akt_Liste.ID=[FC_Minus] ) AS KS_Minus, 

    (SELECT Fehlercodes_akt_Liste.CDT from Fehlercodes_akt_Liste Where Fehlercodes_akt_Liste.ID=[FC_Minus] ) AS CDT_Minus,

    (SELECT Fehlercodes_akt_Liste.Fehlerpfad from Fehlercodes_akt_Liste Where Fehlercodes_akt_Liste.ID=[FC_Minus] ) AS Pfad_Minus,

    (SELECT Fehlercodes_akt_Liste.Fehlerunterpfad from Fehlercodes_akt_Liste Where Fehlercodes_akt_Liste.ID=[FC_Minus] ) AS UPfad_Minus,

    (SELECT Fehlercodes_akt_Liste.OBD_Code from Fehlercodes_akt_Liste Where Fehlercodes_akt_Liste.ID=[FC_Unterbrechung] ) AS Unterbr,

    (SELECT Fehlercodes_akt_Liste.CDT from Fehlercodes_akt_Liste Where Fehlercodes_akt_Liste.ID=[FC_Unterbrechung] ) AS CDT_Unterbr,

    (SELECT Fehlercodes_akt_Liste.Fehlerpfad from Fehlercodes_akt_Liste Where Fehlercodes_akt_Liste.ID=[FC_Unterbrechung] ) AS Pfad_Unterbr, 

    (SELECT Fehlercodes_akt_Liste.Fehlerunterpfad from Fehlercodes_akt_Liste Where Fehlercodes_akt_Liste.ID=[FC_Unterbrechung] ) AS UPfad_Unterbr, 

    (SELECT Fehlercodes_akt_Liste.OBD_Code from Fehlercodes_akt_Liste Where Fehlercodes_akt_Liste.ID=[FC_Aderschl] ) AS Aderschl, 

    (SELECT Fehlercodes_akt_Liste.CDT from Fehlercodes_akt_Liste Where Fehlercodes_akt_Liste.ID=[FC_Aderschl] ) AS CDT_Aderschl, 

    (SELECT Fehlercodes_akt_Liste.Fehlerpfad from Fehlercodes_akt_Liste Where Fehlercodes_akt_Liste.ID=[FC_Aderschl] ) AS Pfad_Aderschl, 

    (SELECT Fehlercodes_akt_Liste.Fehlerunterpfad from Fehlercodes_akt_Liste Where Fehlercodes_akt_Liste.ID=[FC_Aderschl] ) AS UPfad_Aderschl,

    (SELECT Fehlercodes_akt_Liste.F_Klasse_EU from Fehlercodes_akt_Liste Where Fehlercodes_akt_Liste.ID=[FC_Plus] ) AS CLA_EU,

    (SELECT Fehlercodes_akt_Liste.F_Klasse_US from Fehlercodes_akt_Liste Where Fehlercodes_akt_Liste.ID=[FC_Plus] ) AS CLA_US

    FROM (tb_Pinnummern INNER JOIN tb_Fahrzeug ON tb_Pinnummern.SG = tb_Fahrzeug.Motor_SG) INNER JOIN tb_bauteile ON tb_Pinnummern.Bauteil = tb_bauteile.ID
    WHERE (((tb_Fahrzeug.ID)=[forms]![frm_fahrzeug]![id])); 
```

and this form is very slow and I want to make it better,i put Index on necessary field ,It made the time less than before but slow

I tought that I can put each query on each textfield(in controlelementcontent) i.e:

```
SELECT Fehlercodes_akt_Liste.OBD_Code from Fehlercodes_akt_Liste Where Fehlercodes_akt_Liste.ID=[FC_Plus] 
```

but that does not work and show me no data.What dou you mean? Is it possible to do that? where did I make a mistake?

Thank you very much for your answers

Babak

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T09:46:40.803

您可以通过将原始查询重写为 7 个连接而不是 3 个连接和 18 个子查询来改进原始查询，如下所示：

```
SELECT bau.*, bau.CDT AS CdtNr, fze.ID, tpi.Pin
, fpl.F_Klasse_EU AS CLA_EU , fpl.F_Klasse_US AS CLA_US
, fpl.OBD_Code AS KS_Plus, fpl.CDT AS CDT_Plus
, fpl.Fehlerpfad AS Pfad_Plus, fpl.Fehlerunterpfad AS UPfad_Plus
, fmi.OBD_Code AS KS_Minus, fmi.CDT AS CDT_Minus
, fmi.Fehlerpfad AS Pfad_Minus, fmi.Fehlerunterpfad AS UPfad_Minus
, fub.OBD_Code AS Unterbr, fub.CDT AS CDT_Unterbr
, fub.Fehlerpfad AS Pfad_Unterbr, fub.Fehlerunterpfad AS UPfad_Unterbr
, fad.OBD_Code AS Aderschl, fad.CDT AS CDT_Aderschl
, fad.Fehlerpfad AS Pfad_Aderschl, fad.Fehlerunterpfad AS UPfad_Aderschl
FROM tb_Fahrzeug                AS fze
JOIN tb_Pinnummern              AS tpi ON tpi.SG = fze.Motor_SG
JOIN tb_bauteile                AS bau ON bau.ID = tpi.Bauteil
LEFT JOIN Fehlercodes_akt_Liste AS fpl ON fpl.ID = bau.[FC_Plus]
LEFT JOIN Fehlercodes_akt_Liste AS fmi ON fmi.ID = bau.[FC_Minus]
LEFT JOIN Fehlercodes_akt_Liste AS fub ON fub.ID = bau.[FC_Unterbrechung]
LEFT JOIN Fehlercodes_akt_Liste AS fad ON fad.ID = bau.[FC_Aderschl]
WHERE fze.ID = [forms]![frm_fahrzeug]![id]; 
```

对于仅与此查询有关的索引问题，您可以在 ID 列上创建聚簇索引，并为 tb_bauteile.SG 创建常规索引（假设 MSSQL 语法且没有其他聚簇索引）：

```
CREATE UNIQUE CLUSTERED INDEX idx0 ON tb_Fahrzeug (id);
CREATE INDEX idx0 ON tb_Pinnummern (SG);
CREATE UNIQUE CLUSTERED INDEX idx0 ON tb_bauteile (ID);
CREATE UNIQUE CLUSTERED INDEX idx0 ON Fehlercodes_akt_Liste (ID); 
```

作为最后的考虑，考虑不要将星号选择器（来自 original `tb_bauteile.*`）用于文档和 IO 目的。请记住，RDBMS 性能问题在很大程度上取决于实际的环境设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T08:42:57.873

请将子查询更改为`LEFT JOIN`s。像这样：

```
SELECT tb_bauteile.*, tb_bauteile.CDT AS CdtNr, tb_Fahrzeug.ID, tb_Pinnummern.Pin,
    Fehlercodes_akt_Liste_FC_Plus.OBD_Code AS KS_Plus,
    Fehlercodes_akt_Liste_FC_Plus.CDT AS CDT_Plus, 
    Fehlercodes_akt_Liste_FC_Plus.Fehlerpfad AS Pfad_Plus, 
    Fehlercodes_akt_Liste_FC_Plus.Fehlerunterpfad AS UPfad_Plus,
    Fehlercodes_akt_Liste_FC_Minus.OBD_Code AS KS_Minus, 
    Fehlercodes_akt_Liste_FC_Minus.CDT AS CDT_Minus,
    Fehlercodes_akt_Liste_FC_Minus.Fehlerpfad AS Pfad_Minus,
    Fehlercodes_akt_Liste_FC_Minus.Fehlerunterpfad AS UPfad_Minus,
    Fehlercodes_akt_Liste_FC_Unterbrechung.OBD_Code AS Unterbr,
    Fehlercodes_akt_Liste_FC_Unterbrechung.CDT AS CDT_Unterbr,
    Fehlercodes_akt_Liste_FC_Unterbrechung.Fehlerpfad AS Pfad_Unterbr, 
    Fehlercodes_akt_Liste_FC_Unterbrechung.Fehlerunterpfad AS UPfad_Unterbr, 
    Fehlercodes_akt_Liste_FC_Aderschl.OBD_Code AS Aderschl, 
    Fehlercodes_akt_Liste_FC_Aderschl.CDT AS CDT_Aderschl, 
    Fehlercodes_akt_Liste_FC_Aderschl.Fehlerpfad AS Pfad_Aderschl, 
    Fehlercodes_akt_Liste_FC_Aderschl.Fehlerunterpfad AS UPfad_Aderschl,
    Fehlercodes_akt_Liste_FC_Plus.F_Klasse_EU AS CLA_EU,
    Fehlercodes_akt_Liste_FC_Plus.F_Klasse_US AS CLA_US
    FROM tb_Pinnummern 
    INNER JOIN tb_Fahrzeug 
        ON tb_Pinnummern.SG = tb_Fahrzeug.Motor_SG
    INNER JOIN tb_bauteile 
        ON tb_Pinnummern.Bauteil = tb_bauteile.ID
    LEFT JOIN Fehlercodes_akt_Liste AS Fehlercodes_akt_Liste_FC_Plus
        ON Fehlercodes_akt_Liste_FC_Plus.ID=tb_bauteile.[FC_Plus]

    LEFT JOIN Fehlercodes_akt_Liste AS Fehlercodes_akt_Liste_FC_Minus
        ON Fehlercodes_akt_Liste_FC_Minus.ID=tb_bauteile.[FC_Minus]

    LEFT JOIN Fehlercodes_akt_Liste AS Fehlercodes_akt_Liste_FC_Unterbrechung
        ON Fehlercodes_akt_Liste_FC_Unterbrechung.ID=tb_bauteile.[FC_Unterbrechung]

    LEFT JOIN Fehlercodes_akt_Liste AS Fehlercodes_akt_Liste_FC_Aderschl
        ON Fehlercodes_akt_Liste_FC_Aderschl.ID=tb_bauteile.[FC_Aderschl]

    WHERE (((tb_Fahrzeug.ID)=[forms]![frm_fahrzeug]![id])); 
```

我不知道所有列的来源。但是如果你让它工作，这个建议会比你所有真正奇怪的子查询执行得更快。我可以看到执行这样的子查询的潜在问题：

```
SELECT
    (SELECT Fehlercodes_akt_Liste.OBD_Code from Fehlercodes_akt_Liste 
     Where Fehlercodes_akt_Liste.ID=[FC_Aderschl] ) AS Aderschl, 
..... 
```

如果其中一个返回更多的 one 值会发生什么？你可能会得到一个异常，说子查询不能返回更多的一个值。因此，如果您计划将来进行这样的子查询。至少`TOP 1`在他们身上放一个。像这样：

```
SELECT
    (SELECT TOP 1 Fehlercodes_akt_Liste.OBD_Code from Fehlercodes_akt_Liste 
     Where Fehlercodes_akt_Liste.ID=[FC_Aderschl] ) AS Aderschl, 
    ..... 
```

但我仍然不建议将其作为解决方案。因为它不是一种优化的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T08:33:11.327

我认为您应该尝试在 from 子句中添加表 Fehlercodes_akt_Liste 。

你将不得不添加它 4 次，但我相信它比当前查询的每行运行 18 次选择要好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T08:40:55.343

我没有在您的表中看到 FC_PLUS、FC_MINUS、FC_Unterbrechung 等（bauteile、Fahrzeug、Pinnummer。因此，如果这些只是您为子表单提供的值，则不必在数据源中使用它们。只需在任何情况下使用该 SELECT 语句您需要数据的字段。

# android - broadcast receiver not working in sleep mode

> ID：10495063
> 
> 赞同：1
> 
> 时间：2012-05-08T08:21:55.533
> 
> 标签：android, broadcastreceiver, alarmmanager

I want a alarm System in my application, I want to open a dialog activity when alarm is fired, it's working fine when phone is active, but the broadcast receiver is not working when phone is sleep or standby mode.

I also use wacklock logic in broadcast receiver but it can't work well.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:59:36.383

您需要编写服务以在手机处于睡眠或待机模式时继续工作 [这里是链接](http://www.vogella.com/articles/AndroidServices/article.html)

# http - using Fiddler to replace HREF

> ID：10495065
> 
> 赞同：0
> 
> 时间：2012-05-08T08:22:20.863
> 
> 标签：http, href, code-injection, fiddler

I want to replace the HREF values of a website to my local server hosted images using Fiddler. Can this be done and how?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:31:21.497

打开 fiddler 并切换到 AutoResponder 选项卡。在您的站点上进行硬刷新，并让所有会话文件加载到左侧面板中。一旦您看到您的页面包含您的链接，请确保它已被解码（右键单击并点击“解码”）。

将您的文件拖到 AutoResponder 面板中（您可能需要启用 AutoResponders，确保让不匹配的会话通过）。进入“自动回复”选项卡后，右键单击您的页面，然后单击“编辑回复”。从这里，您可以修改此页面的内容。

从现在开始，刷新您的站点将从 AutoResponder 加载该文件，而不是从服务器或缓存中加载。

# android - 实现 MessageCountListener 的服务未收到新电子邮件到达的通知

> ID：10495073
> 
> 赞同：3
> 
> 时间：2012-05-08T08:22:52.827
> 
> 标签：android, jakarta-mail

我已经实现了一项服务，它可以检索收件箱并实现 MessageCountListener 接口来收听新的电子邮件到达。但是在新的电子邮件到达时，它不会得到通知！可能是什么原因，还有什么可以做的？这是代码：

```
public class EmailRetreiverService extends Service implements MessageCountListener{

public static final Vector v=new Vector();
public static final Vector nwmsg=new Vector();
Message[] m=null;
@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}
@Override
public void onCreate(){
    Log.d("EmailRetreiverStarted"," ");

    ConvertToSmtp cts=new ConvertToSmtp("myemail@gmail.com","mypassword"," "," "," ", " ");
    Folder folder=cts.retreiveInbox();
    try {
        m=folder.getMessages();
    } catch (MessagingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    for(int i=0;i<m.length;i++){
        v.add(m[i]);

    }
    Log.d("EmailRetreiverMessageCount",new Integer(m.length).toString());
    Collections.reverse(v);
    /*folder.addMessageCountListener(new MessageCountAdapter(){  

        public void messagesAdded(MessageCountEvent ev) {  
            Log.d("MessageListener","message listner invoked.");  
            Message[] msgs = ev.getMessages(); 
            TTSservice.say("Attention! "+msgs.length+" new messages have arrived now.Kindly retreive inbox again!");
            Collections.reverse(v);
            for (int i = 0; i < msgs.length; i++) {

                v.add(msgs[i]);

            //System.out.println("Got " + msgs.length + " new messages");  
            }  
            Collections.reverse(v);
            // Just dump out the new messages  

        }

    });*/
    folder.addMessageCountListener(this);
}
@Override
public void onDestroy(){
    v.removeAllElements();
}
@Override
public void messagesAdded(MessageCountEvent arg0) {
    // TODO Auto-generated method stub
    Log.d("EmailService","MessageArrived!");
}
@Override
public void messagesRemoved(MessageCountEvent arg0) {
    // TODO Auto-generated method stub
    Log.d("EmailService","MessageRemoved!");
} 
```

必须注意，该服务正在成功检索收件箱。但只是没有得到通知。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T17:14:35.223

您需要做一些事情来使 JavaMail 从服务器接收新消息的通知。一种简单的方法是定期调用 getMessageCount() 方法。另一种方法是使用 IMAP 特定的 idle() 方法，该方法需要专门的线程来调用该方法。

# java - Android VideoView cannot play video

> ID：10495080
> 
> 赞同：0
> 
> 时间：2012-05-08T08:23:28.473
> 
> 标签：java, android

I am trying to play video in Android. My widget is Kindle Fire so Android version is 2.3.4. Here is my code:

```
super.onCreate(savedInstanceState);
setContentView(R.layout.video);
Uri uri = Uri.parse(getIntent().getExtras().getString(VIDEO_URI));
MediaController mediaController = new MediaController(this);
VideoView videoView = (VideoView) findViewById(R.id.videoView);
videoView.setMediaController(mediaController);
videoView.setVideoURI(uri);
videoView.requestFocus();
videoView.start(); 
```

It shows dialog box with title

"Cannot play video"

and message

"An error occured while trying to play your video. The video may have been interrupted or is an unsupported format. Please try again."

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T11:40:27.920

错误消息不言自明，VideoView 不支持视频格式

在此处检查支持的格式：http: [//developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

您可以尝试使用视频转换器工具将视频转换为适当的格式。

# javascript - 图像滑块不起作用（jquery）-Rails 3 项目

> ID：10495081
> 
> 赞同：0
> 
> 时间：2012-05-08T08:23:32.340
> 
> 标签：javascript, jquery

我正在尝试使用 jquery bootstrap carousel 设置图像滑块。

似乎很好，只是滑块不起作用。当我单击“下一步”箭头时，图像不会改变。

我究竟做错了什么？

最良好的祝愿，

费萨尔

* * *

**JAVASCRIPT 文件**

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script src="/assets/jquery.js"></script>
<script src="/assets/bootstrap-carousel.js"></script> 
```

**我称之为引导轮播的脚本**

```
<script>
$(function () {
//    $('.carousel').carousel({ interval: 2000 })

    $('#myCarousel').carousel()
        });
</script> 
```

**看法**

```
<div id="myCarousel" class="carousel">
 <!-- Carousel items -->
 <div class="carousel-inner">
   <div class="active item">
     …&lt;img src="/assets/us1.jpg" style="height="200", width="200">
   </div>
   <div class="item">
     …&lt;img src="/assets/us2.jpg" style="height="200", width="200">
   </div>
  </div>

  <!-- Carousel nav -->
  <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
  <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:27:39.143

我认为您需要在下一个/上一个链接中引用轮播的 ID，如下所示：

编辑：您有很多错别字，您的图像样式无效。而且通常我什至不必在 js 中调用轮播，我只需给它们所有唯一的 id。

我会仔细看看文档[http://twitter.github.com/bootstrap/javascript.html#carousel](http://twitter.github.com/bootstrap/javascript.html#carousel)

```
<div id="myCarousel" class="carousel">

<!-- Carousel items -->
<div class="carousel-inner">
  <div class="active item">
    <img src="/assets/us1.jpg" height="200" width="200">
  </div>
  <div class="item">
    <img src="/assets/us2.jpg" height="200" width="200">
  </div>
</div>

<!-- Carousel nav -->
<a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
<a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div> 
```

好吧，将其复制粘贴到您的视图中...如果您加载了 jquery，它应该可以开箱即用。

```
 <div id="myCarousel" class="carousel slide">
    <div class="carousel-inner">
      <div class="item active">
        <img src="assets/img/bootstrap-mdo-sfmoma-01.jpg" alt="">
        <div class="carousel-caption">
          <h4>First Thumbnail label</h4>
          <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
        </div>
      </div>
      <div class="item">
        <img src="assets/img/bootstrap-mdo-sfmoma-02.jpg" alt="">
        <div class="carousel-caption">
          <h4>Second Thumbnail label</h4>
          <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
        </div>
      </div>
      <div class="item">
        <img src="assets/img/bootstrap-mdo-sfmoma-03.jpg" alt="">
        <div class="carousel-caption">
          <h4>Third Thumbnail label</h4>
          <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
        </div>
      </div>
    </div>
    <a class="left carousel-control" href="#myCarousel" data-slide="prev">&lsaquo;</a>
    <a class="right carousel-control" href="#myCarousel" data-slide="next">&rsaquo;</a>
  </div> 
```

# android - Android 2.2 - 我如何设置微调器的 alpha 属性？

> ID：10495084
> 
> 赞同：2
> 
> 时间：2012-05-08T08:23:44.120
> 
> 标签：android, spinner, transparent, alpha, invisible

我正在尝试使微调器完全透明。在 Android 4.0 中，我可以在 xml 布局设计器中将 alpha 属性设置为 0。但是当我使用 Android 2.2 时，我无法使用该属性，Eclipse 将其标记为错误并告诉我无法使用它。

我试图使它透明地编写这个java代码：

```
final Spinner cmbCategorias = (Spinner) findViewById(R.id.cmbCategorias);
cmbCategorias.getBackground().setAlpha(0); 
```

它可以工作，但微调器中的文本保持可见。

有人可以告诉我我该怎么办？？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:06:10.793

**制作像 spinner_textview.xml 这样的 xml 布局**

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/txtview"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ellipsize="marquee"
    android:singleLine="true"
    android:textColor="@android:color/transparent" /> 
```

**并在 Java 代码中添加以下内容：**

```
Spinner sp=(Spinner)findViewById(R.id.sp);   
  sp.setAdapter(new ArrayAdapter(this,R.layout.spinner_textview, 
                items)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:23:08.440

我做了这样的功能：

```
private void enableView(View v, boolean enable)
{
    if(v.isEnabled() == enable)
        return;

    float from = enable ? .5f : 1.0f;
    float to = enable ? 1.0f : .5f;

    AlphaAnimation a = new AlphaAnimation(from, to);

    a.setDuration(500);
    a.setFillAfter(true);

    v.setEnabled(enable);
    v.startAnimation(a);
} 
```

它也适用于旋转器。

# ios - Custom UITableViewCells's UITextField mixing up after scrolling

> ID：10495085
> 
> 赞同：0
> 
> 时间：2012-05-08T08:23:48.770
> 
> 标签：ios, uitableview

I created a custom `UITableViewCell` with a `UITextField`, `UILabels` and `UIButtons`. When I enter a value to a `UITextField` and scroll down, it disappears and shows in another random cell. The same problem happens with my `UIButton`, when I press it, the state is changing but after I scroll down, it disappears.

Here is my cellForRowAtIndexPath:

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"produktCell";
    //NSString *CellIdentifier = [NSString stringWithFormat:@"produktCell %d",indexPath.row];

    ProduktTableViewCell *cell =(ProduktTableViewCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
          NSLog(@"wird neu erstellt");
        cell = [[ProduktTableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSManagedObject *managedObject = [self.fetchedResultsController objectAtIndexPath:indexPath];

    cell.produktnameLabel.text = [managedObject valueForKey:@"produktname"]; 

    if ([[managedObject valueForKey:@"vondatum"] length] > 1){
        cell.vonDatumLabel.text = [managedObject valueForKey:@"vondatum"];
        cell.bisDatumLabel.text = [managedObject valueForKey:@"bisdatum"]; 

    }else {
        cell.vonDatumLabel.text = dateString;
        cell.bisDatumLabel.text = dateString1;
    }  

        cell.datumButton.tag = indexPath.row;
    cell.warenkorbButton.tag = indexPath.row;
    cell.menge.tag = indexPath.row + 437812;
    cell.mengeLabel.text = [managedObject valueForKey:@"mengelabel"];
    cell.produktnameLabel.tag = indexPath.row +22333;
    cell.mengeLabel.tag =indexPath.row;

    NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
    NSLocale *german = [[NSLocale alloc] initWithLocaleIdentifier:@"de_DE"];
    [formatter setLocale:german];
    [formatter setNumberStyle:NSNumberFormatterCurrencyStyle];
    [formatter setMinimumFractionDigits:2];
    [formatter setMaximumFractionDigits:2];

    NSNumber *firstNumber = [managedObject valueForKey:@"preis"];

    cell.preisLabel.text = [formatter stringFromNumber:firstNumber];

    return cell;
} 
```

EDIT: i fixed my problem with the textfield. i just delete the method:

```
 /*- (void) scrollViewWillBeginDragging:(UIScrollView *)scrollView
{

   [[self.tableView superview] endEditing:YES];

}*/ 
```

but there is still a problem with my button.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:33:18.237

我最好的猜测是，您正在重复使用的单元格正在接收与您刚刚交互的单元格相同的行为。你可以快速尝试一下，看看我的意思。评论这个：

编辑：

```
 ProduktTableViewCell *cell =(ProduktTableViewCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
          NSLog(@"wird neu erstellt");
        cell = [[ProduktTableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    } 
```

把这个改为：

```
ProduktTableViewCell *cell = [[ProduktTableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]; 
```

这样，您的新单元格将不会获得与前一个单元格相同的“状态”。接下来你需要做的是知道你在哪个单元格上工作。除此之外，您仍然需要重置新单元格的状态。**最后，取消注释我告诉您要评论的内容（因为您希望您的单元格可重复使用）**

# multithreading - 如何处理存储库的多线程单元测试以模拟并发？

> ID：10495086
> 
> 赞同：2
> 
> 时间：2012-05-08T08:23:50.343
> 
> 标签：multithreading, asp.net-mvc-3, unit-testing, concurrency, nunit

我正在构建 mvc3 应用程序，它应该为大约 1000-2000 个并发用户提供服务，我实现了 Castle Active Record 和简单的存储库模式，现在我需要对所有这些进行单元测试，它不会在并发和多线程环境（如 iis）中崩溃. 我该怎么做？

我正在使用 nunit 测试框架。

我的仓库：

```
//interface
public interface IAbstractRepository<T> where T : class
{
    void Create(T model);
    void Update(T model);
    void Delete(T model);
    int Count();

    T FindById(object id);
    T FindOne(params ICriterion[] criteria);
    IList<T> FindAll();
    IList<T> FindAllByCriteria(params ICriterion[] criteria);
} 
```

//具体实现

```
public class AbstractRepository<T> : IAbstractRepository<T> where T : class
{
    void IAbstractRepository<T>.Create(T model)
    {
        ActiveRecordMediator<T>.Save(model);
    }

    void IAbstractRepository<T>.Update(T model)
    {
        ActiveRecordMediator<T>.Update(model);
    }

    void IAbstractRepository<T>.Delete(T model)
    {
        ActiveRecordMediator<T>.Delete(model);
    }

    int IAbstractRepository<T>.Count()
    {
        return ActiveRecordMediator<T>.Count();
    }

    T IAbstractRepository<T>.FindById(object id)
    {
        return ActiveRecordMediator<T>.FindByPrimaryKey(id);
    }

    T IAbstractRepository<T>.FindOne(params ICriterion[] criteria)
    {
        return ActiveRecordMediator<T>.FindOne(criteria);
    }

    IList<T> IAbstractRepository<T>.FindAll()
    {
        return ActiveRecordMediator<T>.FindAll();
    }

    IList<T> IAbstractRepository<T>.FindAllByCriteria(params ICriterion[] criteria)
    {
        return ActiveRecordMediator<T>.FindAll(criteria);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T08:27:34.103

这不再是你想要做的单元测试。这是一个负载测试。有一些工具可以让您记录一些场景，然后模拟对执行此场景的 Web 应用程序的并发访问：

*   [Visual Studio 负载测试](http://msdn.microsoft.com/en-us/library/ee923685.aspx)
*   [加载UI](http://www.loadui.org/)
*   [阿帕奇长凳](http://httpd.apache.org/docs/2.0/programs/ab.html)
*   [阿帕奇 JMeter](http://jmeter.apache.org/)
*   [派洛特](http://www.pylot.org/)
*   [宗](http://tsung.erlang-projects.org/)
*   [围城](http://www.joedog.org/siege-home/)

# c# - 从存储过程中的 exec sp_executesql 中获取值

> ID：10495088
> 
> 赞同：0
> 
> 时间：2012-05-08T08:24:07.600
> 
> 标签：c#, sql-server, sql-server-2005

```
declare @nopqty decimal(10,2)
declare @ntotamt decimal(10,2)
declare @npartno nvarchar(20)

SET @Orgcd =101
SET @npartno = "A 0001 150"

declare @qry nvarchar(4000)

SET @qry = 'SELECT @nopqty = oqty' + convert(varchar(3), @norgcd) + 
           ', @ntotamt = ocost' + convert(varchar(3), @norgcd) +
           ' FROM stock WHERE part = @npartno'

exec sp_executesql @qry 
```

错误

> 必须声明标量变量

然后我用

```
exec sp_executesql @qry, N'@nopqty decimal(10,2),@ntotamt decimal(10,2),@npartno nvarchar(20)',@nopqty=@nopqty,@ntotamt=@ntotamt,@npartno=@npartno 
```

但是当打印@nopqty，@ntotamt 它是空的

我怎样才能从这些@qry 中取出@nopqty、@ntotamt？

我需要这些值进行一些计算

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:45:33.643

将参数指定为`output`。例如：

```
declare @name varchar(10)
exec sp_executesql 
    N'select top 1 @name = name from sys.tables',
    N'@name varchar(10) output', 
    @name = @name output
print @name 
```

# playframework - Play framework Jobs JPA and magic

> ID：10495090
> 
> 赞同：0
> 
> 时间：2012-05-08T08:24:14.077
> 
> 标签：playframework, jobs

Can anyone indicate where all the magic happens for Play Jobs to be enhanced with JPA and transaction support.

I intend to write my own plugin and would like to give some objects the same support. However this I can't find anywhere obvious where this magic happens for the jobs.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:01:17.817

增强的辅助方法在[play.classloading.enhancers](https://github.com/playframework/play/tree/master/framework/src/play/classloading/enhancers)包中。

关于模型，它是[JPAEnhancer](https://github.com/playframework/play/blob/master/framework/src/play/db/jpa/JPAEnhancer.java)文件，它添加了许多方法（count、findAll、findById ...）

# javascript - 从 IEEE 754 单精度（32 位）浮点创建字节（字符串表示）

> ID：10495091
> 
> 赞同：0
> 
> 时间：2012-05-08T08:24:21.263
> 
> 标签：javascript

我正在尝试使用 javascript 将浮点数转换为字节数组/流。我的 javascript 代码是用一个表示浮点值的字符串传递的，定义如下：

**来自 AS 库的代码：**

```
 while (buffer.bytesAvailable > 0) 
        {
            ret += buffer.readFloat().toString() + ";";
        } 
```

上面的代码是一个Actionscript代码，其中定义了函数：

```
readFloat():Number
Reads an IEEE 754 single-precision (32-bit) floating-point number from the byte stream. 
```

由于我无法修改 AS 库，因为它已经编译为 SWF 并为 javascript 导出了函数，我只能求助于使用 Javascript 将输出转换回字节。

有什么方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:07:16.010

您可以使用该类解析二进制浮点数：http: [//jsfromhell.com/classes/binary-parser](http://jsfromhell.com/classes/binary-parser)

# javascript - 如何将 javascript 值分配给 Perl 变量

> ID：10495092
> 
> 赞同：1
> 
> 时间：2012-05-08T08:24:27.787
> 
> 标签：javascript, html, perl

我有这个javascript函数：

```
print <<"EOT";
<script type="text/javascript">
 function alertSize() {
  var myWidth = 0, myHeight = 0;
  if( typeof( window.innerWidth ) == 'number' ) {
    //Non-IE
    myWidth = window.innerWidth;
    myHeight = window.innerHeight;
  } else if( document.documentElement && ( document.documentElement.clientWidth || document.documentElement.clientHeight ) ) {
    //IE 6+ in 'standards compliant mode'
    myWidth = document.documentElement.clientWidth;
    myHeight = document.documentElement.clientHeight;
  } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
    //IE 4 compatible
    myWidth = document.body.clientWidth;
    myHeight = document.body.clientHeight;
  }
    window.alert( 'Width = ' + myWidth );
    window.alert( 'Height = ' + myHeight );
}
</script>
EOT
print "<body onload='alertSize()'>";
print "</body>";

my $windowHeight = $q->param('myHeight');
my $windowWidth = $q->param('windowwidth');
print "<$windowHeight><$windowWidth>"; 
```

如何将 javascript 函数的值传递给我的 Perl 变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T08:28:42.653

您的 Perl 正在服务器上运行。它输出一些发送到客户端（浏览器）的文本。

然后浏览器解释该文本以及 HTML 和 JavaScript。

如果不发出新的 HTTP 请求，就无法将数据传回 Perl。

您的选择包括：

*   使用 JavaScript 完成处理，而不是尝试将其传递回 Perl
*   使用 Ajax 发出新的 HTTP 请求
*   设置`location.href`为使用查询字符串中传递的数据加载新页面
*   在不使用当前逻辑的情况下找到一种方法来实现您的（未指定）目标（例如，您可以使用 CSS 媒体查询根据浏览器尺寸设置不同的页面样式）。

# ruby-on-rails - Active Admin on Heroku doesn't work properly

> ID：10495093
> 
> 赞同：3
> 
> 时间：2012-05-08T08:24:31.460
> 
> 标签：ruby-on-rails, heroku, activeadmin

Hi I had active admin working fine before but I think it got messed up when I tried merging my github + heroku repositories. It seems to work fine locally but on Heroku I get the generic We're sorry, but something went wrong message. Here is the output of my heroku logs

> 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks' 2012-05-08T08:20:16+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in` __run_callback' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/abstract_controller/callbacks.rb:17:in`process_action' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/notifications.rb:123:in `instrument' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/notifications.rb:123:in` block in instrument' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/notifications/instrumenter.rb:20:in `instrument' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/params_wrapper.rb:205:in` process_action' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/instrumentation.rb:29:in `process_action' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/railties/controller_runtime.rb:18:in` process_action' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/abstract_controller/rendering.rb:45:in `process' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/abstract_controller/base.rb:121:in` process' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal.rb:203:in `dispatch' 2012-05-08T08:20:16+00:00 heroku[router]: GET myrealtrip.com/admin/login dyno=web.1 queue=0 wait=0ms service=488ms status=500 bytes=643 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/rack_delegation.rb:14:in` dispatch' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal.rb:246:in `block in action' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:73:in` call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:73:in `dispatch' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:36:in` call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/mapper.rb:40:in `call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/journey-1.0.3/lib/journey/router.rb:68:in` block in call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/journey-1.0.3/lib/journey/router.rb:56:in `each' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/journey-1.0.3/lib/journey/router.rb:56:in` call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:600:in `call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/warden-1.1.1/lib/warden/manager.rb:35:in` block in call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/warden-1.1.1/lib/warden/manager.rb:34:in` call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in`call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:25:in `call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/head.rb:14:in`call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/params_parser.rb:21:in `call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/flash.rb:242:in` call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in` call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/query_cache.rb:64:in `call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/cookies.rb:338:in` call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/callbacks.rb:28:in` block in call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `__run_callback' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:385:in` _run_call_callbacks' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `_run__1275827987324005955__call__874682597306149572__callbacks' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:81:in` run_callbacks' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/remote_ip.rb:31:in `call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/callbacks.rb:27:in` call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/show_exceptions.rb:56:in` call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/rack/logger.rb:26:in `call_app' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/rack/logger.rb:16:in` call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/request_id.rb:22:in `call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in` call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/cache/strategy/local_cache.rb:72:in` call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/static.rb:62:in` call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in` fetch' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in` call!' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:479:in `call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in` call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application.rb:220:in `call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/content_length.rb:14:in` call' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler/webrick.rb:59:in `service' 2012-05-08T08:20:16+00:00 app[web.1]:
> vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/rack/log_tailer.rb:14:in` call' 2012-05-08T08:20:16+00:00 app[web.1]:
> /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service' 2012-05-08T08:20:16+00:00 app[web.1]:
> /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in`run' 2012-05-08T08:20:16+00:00 app[web.1]:
> /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread' 2012-05-08T08:20:16+00:00 app[web.1]: 2012-05-08T08:20:16+00:00 app[web.1]: 2012-05-08T08:20:16+00:00 app[web.1]: Processing by ActiveAdmin::Devise::SessionsController#new as HTML 2012-05-08T08:20:16+00:00 app[web.1]: Rendered vendor/bundle/ruby/1.9.1/bundler/gems/active_admin-ecb9ade65394/app/views/active_admin/devise/shared/_links.erb (1.6ms) 2012-05-08T08:20:16+00:00 app[web.1]: Rendered vendor/bundle/ruby/1.9.1/bundler/gems/active_admin-ecb9ade65394/app/views/active_admin/devise/sessions/new.html.erb within layouts/active_admin_logged_out (379.1ms) 2012-05-08T08:20:16+00:00 app[web.1]: Completed 500 Internal Server Error in 458ms 2012-05-08T08:20:16+00:00 heroku[router]: GET myrealtrip.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=5ms status=200 bytes=0 2012-05-08T08:20:20+00:00 heroku[router]: GET www.myrealtrip.com/assets/twit_icon_s.png dyno=web.1 queue=0 wait=0ms service=7ms status=200 bytes=2504 2012-05-08T08:20:20+00:00 heroku[router]: GET www.myrealtrip.com/assets/fb_icon_s.png dyno=web.1 queue=0 wait=0ms service=8ms status=200 bytes=2498 2012-05-08T08:20:20+00:00 heroku[router]: GET myrealtrip.com/assets/application.css dyno=web.1 queue=0 wait=0ms service=12ms status=200 bytes=74016 2012-05-08T08:20:21+00:00 app[web.1]: 2012-05-08T08:20:21+00:00 app[web.1]: 2012-05-08T08:20:21+00:00 app[web.1]: Started GET "/ko/offers/16" for 125.129.240.184 at 2012-05-08 08:20:21 +0000 2012-05-08T08:20:21+00:00 app[web.1]: Processing by OffersController#show as HTML 2012-05-08T08:20:21+00:00 app[web.1]: Rendered offers/show.html.erb within layouts/application (7.8ms) 2012-05-08T08:20:21+00:00 app[web.1]: Parameters: {"locale"=>"ko", "id"=>"16"} 2012-05-08T08:20:21+00:00 app[web.1]: Rendered layouts/_header.html.erb (1.9ms) 2012-05-08T08:20:21+00:00 app[web.1]: Rendered layouts/_footer.html.erb (0.2ms) 2012-05-08T08:20:21+00:00 app[web.1]: Completed 200 OK in 18ms (Views: 11.4ms | ActiveRecord: 5.3ms) 2012-05-08T08:20:21+00:00 heroku[router]: GET www.myrealtrip.com/ko/offers/16 dyno=web.1 queue=0 wait=0ms service=57ms status=200 bytes=11374 2012-05-08T08:20:21+00:00 heroku[router]: GET myrealtrip.com/assets/mrt_logo.png dyno=web.1 queue=0 wait=0ms service=5ms status=200 bytes=1985 2012-05-08T08:20:21+00:00 heroku[router]: GET www.myrealtrip.com/assets/application-e7fd2f7d29fd91d2ef43a8f52446d55e.css dyno=web.1 queue=0 wait=0ms service=5ms status=304 bytes=0 2012-05-08T08:20:21+00:00 heroku[router]: GET www.myrealtrip.com/assets/application-970c5c7eca4b286b5184e3caddf2b448.js dyno=web.1 queue=0 wait=0ms service=23ms status=304 bytes=0 2012-05-08T08:20:21+00:00 heroku[router]: GET www.myrealtrip.com/assets/fb_icon_s-41437f3d5d3a5b299e347aa41b1757bc.png dyno=web.1 queue=0 wait=0ms service=6ms status=304 bytes=0 2012-05-08T08:20:21+00:00 heroku[router]: GET www.myrealtrip.com/assets/twit_icon_s-2a91a32dd31f44cdc2716db595394a4e.png dyno=web.1 queue=0 wait=0ms service=7ms status=304 bytes=0 2012-05-08T08:20:21+00:00 heroku[router]: GET www.myrealtrip.com/assets/product_icon-de97603b22ca0e28730a4039f538c986.png dyno=web.1 queue=0 wait=0ms service=5ms status=304 bytes=0 2012-05-08T08:20:21+00:00 heroku[router]: GET www.myrealtrip.com/assets/offer_m_16-c77ea7c8aa397099eba93efd10f2ed0e.jpg dyno=web.1 queue=0 wait=0ms service=7ms status=304 bytes=0 2012-05-08T08:20:21+00:00 heroku[router]: GET www.myrealtrip.com/assets/guide_icon-0918b097277ab00b11c74d9a29601af1.png dyno=web.1 queue=0 wait=0ms service=8ms status=304 bytes=0 2012-05-08T08:20:21+00:00 heroku[router]: GET www.myrealtrip.com/assets/guide_profile_m_10-aae5b6874e3f733c238dde938cc90f09.jpg dyno=web.1 queue=0 wait=0ms service=6ms status=304 bytes=0 2012-05-08T08:20:22+00:00 heroku[router]: GET www.myrealtrip.com/assets/mrt_logo.png dyno=web.1 queue=0 wait=0ms service=5ms status=304 bytes=0 2012-05-08T08:20:22+00:00 heroku[router]: GET www.myrealtrip.com/assets/register_icon.png dyno=web.1 queue=0 wait=0ms service=13ms status=200 bytes=14694 2012-05-08T08:20:23+00:00 heroku[router]: GET www.myrealtrip.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=4ms status=304 bytes=0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:54:20.527

对此的更新 - heroku 提供了一个新的实验性功能，使资产编译更加符合开发环境中发生的情况。

从您的应用程序根运行：

```
heroku labs:enable user-env-compile 
```

您不需要进行上述任何更改，如果您进行了更改，则应将其删除。另一个被吹捧的修复方法是将以下内容添加到 config/application.rb （同样你不应该需要这个）：

```
config.assets.initialize_on_precompile = false
config.assets.precompile += %w[active_admin.css active_admin.js print.css]
config.assets.precompile += %w[active_admin/print.css] 
```

在此处阅读更多信息：[https ://devcenter.heroku.com/articles/labs-user-env-compile](https://devcenter.heroku.com/articles/labs-user-env-compile)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T19:09:46.463

在 config/environments/production.rb config.assets.compile = true 中修复它：（

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T12:06:36.633

活动管理员在 heroku 中工作正常..请参阅此[http://getinvoice.herokuapp.com/admin](http://getinvoice.herokuapp.com/admin) ..这是视图级别问题。您应该通过删除一个视图来解决它...然后问题出在哪里。 ...........

# javascript - how to get a Popup by id in OpenLayers map

> ID：10495094
> 
> 赞同：0
> 
> 时间：2012-05-08T08:24:40.440
> 
> 标签：javascript, openlayers

When initial the map, I created many popup for features

```
var popup= new OpenLayers.Popup.FramedCloud(
    id, //id
    new OpenLayers.LonLat(msg.reviseLng, msg.reviseLat),
    new OpenLayers.Size(160,100),
    '<html></html>',
    null,
    true);
    popup.autoSize=false;
    map.addPopup(popup); 
```

but I can not get a exist popup when I location a point ,I want get it by it's id and show it, please help me

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T12:06:27.013

这个想法应该是：当用户点击你识别的某个点时，应该显示弹出窗口，不是吗？

你可以这样做：

```
map.events.register("click", map , function(e){
   // Look for point... (your code)

   // Point detected!

   // now we need to take the popup identified by 'popupid' identifier and show it
   for(var i=0; i<map.popups.length; i++){
      if(map.popups[i].id == myid){
         map.popups[i].show();
         break;
      }
   }
}); 
```

# php - php中的致命与非致命错误？

> ID：10495098
> 
> 赞同：2
> 
> 时间：2012-05-08T08:25:03.013
> 
> 标签：php, codeigniter, session, fatal-error

我想知道哪些错误被认为是致命的，而不是 PHP 中的错误（尽管也对其他语言感兴趣）。是否有每个地方的错误类型的简明解释和/或列表？使用“非致命”这个表述是否有意义？

我想知道的原因是，有时当我犯 PHP 错误时，我的`$_SESSION`（实际上是使用 codeigniter 会话）被破坏了，而在其他情况下它不是，我不能完全弄清楚为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:49:25.810

好吧，命名是不言自明的：

**致命**错误是严重错误，这意味着由于此错误，解析器可能无法继续解析您的其余代码。例如：

*   您的网络服务器已耗尽内存来解析脚本（例如解析器命中`memory_limit`php.ini 中的设置）。
*   该脚本包含一个无限循环（例如`while(1) { echo "Hi friend!"; }`，运行时间比`max_execution_time`php.ini 中的设置长）。

**非致命**错误通常被称为`Warnings`，它们仍然非常严重并且应该被修复，但不要导致解析器停止解析你的代码，它仍然可以继续，不管发生了什么错误。例如：

*   您正在调用未设置的变量。
*   您正在请求一个不存在的数组中的键。
*   您正在调用一个不存在的函数。

希望这可以为您解决一些问题。

# javascript - 在页面底部粘贴页脚

> ID：10495101
> 
> 赞同：0
> 
> 时间：2012-05-08T08:25:05.523
> 
> 标签：javascript, css, html

请在 Firefox 中查看此站点：

[http://www.imageworkz.asia/microtel](http://www.imageworkz.asia/microtel)

页脚不会像 stackoverflow 的页脚那样粘在页面底部。我尝试了一些参考站点中显示的几种技术，但仍然没有运气。

我需要一些 CSS 专家来帮助我解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T08:33:50.130

有很多方法可以制作粘性页脚。固定高度页脚的基本技巧

```
html, body {
    height: 100%;
}
.wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -150px; /* the bottom margin is the negative value of the footer's height */
}
.footer {
    height: 150px; /* .push must be the same height as .footer */
} 
```

或者

您可以查看标题为“sticky footer”的这篇[文章](https://stackoverflow.com/questions/1448564/sticky-footer-help)（以及许多其他文章）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T08:32:00.467

添加`position:fixed; bottom:0; left:0`到页脚，它将修复它。如果您随后添加`#container {padding-bottom:120px}`（或该数量左右的内容），则在查看页面底部时，您的内容不会被页脚隐藏

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T08:32:15.787

使其具有底部`0`值的固定位置：

```
footer {
    position: fixed; 
    bottom: 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-20T22:39:19.730

```
<script type="text/javascript">  
$(document).ready(function() {
var docHeight = $(window).height();
var footerHeight = $('#footer').height();
var footerTop = $('#footer').position().top + footerHeight;
if (footerTop < docHeight) {
$('#footer').css('margin-top', 10 + (docHeight - footerTop) + 'px');
}
});
</script> 
```

# java - 如何在使用 Java 的 wav 文件末尾减少静音？

> ID：10495103
> 
> 赞同：5
> 
> 时间：2012-05-08T08:25:11.983
> 
> 标签：java, audio, javasound

如何使用 Java 擦除 wav 文件的静音（低于阈值）部分？有人说“从 PCM 数据中提取样本”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T08:31:18.047

这应该是直截了当的。wav 是未压缩的，因此您可以简单地打开它并使用标准（二进制）输入流对其进行处理。

对于实际的音频处理，Java Sound API 可以解决问题。查看[http://www.oracle.com/technetwork/java/index-139508.html](http://www.oracle.com/technetwork/java/index-139508.html)了解完整详情。很好玩。

# drupal - Drupal - 通过自定义权限切换菜单项的可见性

> ID：10495107
> 
> 赞同：2
> 
> 时间：2012-05-08T08:25:40.990
> 
> 标签：drupal, drupal-7, drupal-navigation

我目前正在使用 Drupal 7，并且正在编写自定义代码，以便具有特定权限（“使用业务仪表板”）的用户应该在他们的主菜单中看到一个菜单项。问题是只有我（管理员）可以看到这个菜单项。我已经能够在权限页面上创建自定义权限，并将其设置为授予对“管理员”和我的用户特定角色的访问权限，并实现了以下代码（不要介意代替模块名称的“xxxxxx”，我宁愿暂时保持匿名，但只知道它们都代替了机器可读的模块名称）：

```
function xxxxxx_menu(){
$items = array();

$items['xxxxxxx'] = array(
    'title' => 'Business Owner Dashboard',
    'page callback' => '_xxxxxx_page',
    'access arguments' => array('use business dashboard'),
    'type' => MENU_NORMAL_ITEM,
);
return $items;
}

function xxxxxx_permission(){
    return array(
            'use business dashboard' => array(
            'title' => t('Have access to business dashboard'),
            'description' => t('Allow user to send out SMS messages via         database query forms'),
        ),
    );
} 
```

当我以具有“使用业务仪表板”的角色特定权限的测试用户身份登录时，我看不到菜单项。我确信这非常简单，但我已经在谷歌上搜索并在代码上搜索了几个小时。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:44:20.293

这个也想不通。您能否尝试分解访问回调，如果它不起作用，至少它会给您一个关于正在发生的事情的提示。

你的代码可以是这样的：

```
function xxxxxx_menu(){
$items = array();

$items['xxxxxxx'] = array(
    'title' => 'Business Owner Dashboard',
    'page callback' => '_xxxxxx_page',
    'access callback' => 'my_custom_access_callback',
    'type' => MENU_NORMAL_ITEM,
);
return $items;
}

function my_custom_access_callback()
{
    if(user_access('use business dashboard'))
        return TRUE;

    return FALSE;
} 
```

如果这行得通，请告诉我……穆罕默德。

# jquery - CSS z-index - 无法将框设置在 div 之外

> ID：10495109
> 
> 赞同：0
> 
> 时间：2012-05-08T08:25:44.447
> 
> 标签：jquery, css, z-index

我有以下代码： [http ://codepad.org/cL3hjDTf](http://codepad.org/cL3hjDTf)

包含文本“一些文本”的黑框应位于标有蓝色边框的框之外。它应该看起来像 ![在此处输入图像描述](../Images/6b1dd181858fc15f48ec597202adec0e.png)

但是我无法达到这个效果。我在哪里犯错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:00:17.750

您在该单行中使用的 javascript 正在应用将溢出设置为隐藏到包装器的内联样式。要测试，请使用溢出：可见！重要；在你的 CSS 中，它应该强制它工作。

不要那样做。将其从 Javascript 中取出。但是，我怀疑无论哪种方式，carrosel 都会看起来有点奇怪，因为该包装隐藏了不可见的幻灯片。

您最好的选择是增加包装器的高度以包含“某些文本”跨度的底部偏移量（-25px）填充就可以了。

```
.carousel-wrapper {
    padding-bottom: 25px;
}

span {
    bottom: 0;
} 
```

希望有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T08:27:07.193

你应该`overflow:hidden`起飞`.carousel-wrapper`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T08:27:08.303

您需要设置`overflow: visible`不隐藏，因为您现在在 .carousel-wrapper 上拥有它

# iphone - 是否有现有代码可以转换目标 C 中的日语搜索字符串

> ID：10495110
> 
> 赞同：1
> 
> 时间：2012-05-08T08:25:48.363
> 
> 标签：iphone, objective-c, ios

我正在编写一个应该处理日语搜索字符串的应用程序。

我需要几个实用功能：

*   将平假名字母转换为片假名字母，反之亦然。
*   将半角字符转换为全角字符。

Objective C 中是否已经存在任何东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:39:56.013

要将半角转换为全角片假名，请查看此...

[http://d.hatena.ne.jp/izsak/20100508/1273334470](http://d.hatena.ne.jp/izsak/20100508/1273334470)

平假名到片假名是一个简单的 util 方法，带有一个巨大的 switch 语句......

> switch (平假名) { case @"あ": return @"ア"; ....}

在上面轻描淡写，但显然您必须提供非字符串才能在 switch 中进行比较。

# c# - 需要使用作为嵌入资源包含在项目中的 dll

> ID：10495111
> 
> 赞同：1
> 
> 时间：2012-05-08T08:25:48.397
> 
> 标签：c#, .net-assembly

通常我们经常添加 dll 的引用，然后访问该 dll 中的类并创建该类的实例。现在我在我的项目中包含了一个 dll 文件作为嵌入资源。现在我的问题是，我如何访问类并创建该 dll 中包含为嵌入资源的类的实例。我搜索谷歌并找到stackoverflow链接，例如将[一个dll作为嵌入式资源嵌入另一个dll中，然后从我的代码中调用它](https://stackoverflow.com/questions/96732/embedding-one-dll-inside-another-as-an-embedded-resource-and-then-calling-it-fro)

我在那里找到的用于访问 dll 的指令，该指令包含在嵌入式资源中，例如

将第三方程序集作为资源嵌入后，添加代码以在应用程序启动期间订阅当前域的 AppDomain.AssemblyResolve 事件。只要 CLR 的 Fusion 子系统未能根据有效的探测（策略）定位程序集，就会触发此事件。在 AppDomain.AssemblyResolve 的事件处理程序中，使用 Assembly.GetManifestResourceStream 加载资源并将其内容作为字节数组提供给相应的 Assembly.Load 重载。下面是一个这样的实现在 C# 中的样子：

```
AppDomain.CurrentDomain.AssemblyResolve += (sender, args) =>
{
var resName = args.Name + ".dll";    
var thisAssembly = Assembly.GetExecutingAssembly();    
using (var input = thisAssembly.GetManifestResourceStream(resName))
{
    return input != null 
         ? Assembly.Load(StreamToBytes(input))
         : null;
}
}; 
```

其中 StreamToBytes 可以定义为：

```
static byte[] StreamToBytes(Stream input) 
{
var capacity = input.CanSeek ? (int) input.Length : 0;
using (var output = new MemoryStream(capacity))
{
    int readLength;
    var buffer = new byte[4096];

    do
    {
        readLength = input.Read(buffer, 0, buffer.Length);
        output.Write(buffer, 0, readLength);
    }
    while (readLength != 0);

    return output.ToArray();
}
} 
```

有几件事我不清楚。那个人说

添加代码以在应用程序启动期间订阅当前域的 AppDomain.AssemblyResolve 事件。只要 CLR 的 Fusion 子系统未能根据有效的探测（策略）定位程序集，就会触发此事件。

什么是 CLR 的 Fusion 子系统失败？这是什么意思？当 AssemblyResolve 事件触发时。我需要将此代码放在我的 program.cs 文件中吗？

Assembly.Load() 只会将程序集加载到内存中，但他们没有显示如何在该 dll 中创建类的实例？

请详细讨论我的兴趣点。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:19:18.727

> 什么是 CLR 的 Fusion 子系统出现故障？这是什么意思？

[本文](http://codeidol.com/csharp/net-framework/Assemblies,-Loading,-and-Deployment/Assembly-Loading/)详细解释（尤其是*Probing for the Bits (Fusion)*部分）：

> 当探测无法定位程序集时，它将触发 AppDomain.AssemblyResolve 事件，允许用户代码执行自己的自定义加载。如果所有其他方法都失败，则抛出 TypeLoadException（如果加载过程是由于对依赖程序集中的类型的引用而被调用）或 FileNotFoundException（如果手动调用加载过程）。

> Assembly.Load() 只会将程序集加载到内存中，但他们没有显示如何在该 dll 中创建类的实例？

[SO中的另一个问题](https://stackoverflow.com/questions/8734632/how-to-manage-classes-from-a-loaded-dll)解释了如何在动态加载的程序集中创建类型的实例。

# java - 遍历生态模型

> ID：10495112
> 
> 赞同：0
> 
> 时间：2012-05-08T08:26:21.420
> 
> 标签：java, eclipse-emf, eclipse-emf-ecore

我已经从 Ecore 生成了模型代码。在我的模型中，我有一个派生参考：`derivedThings`.

我想要做的`derivedThingsImpl`是以下内容：

我想遍历整个模型，并根据元素，我想将它添加到集合中。

```
for(TreeIterator iter = EcoreUtil.getAllContents(rootObject); iter.hasNext();)
 ... 
```

问题是，我怎样才能从`derivedThingsImpl`?! 有没有类似的东西`getRootObject()`？！

谢谢

更新：

```
EObject e = this;
while(e.eContainer() != null) {
  e =  e.eContainer()
  if (e instanceof RootElement)
    break;
}
// No I should have the root element. Is this a good and clean way ?! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:21:50.673

有一种更好的方法：

```
EcoreUtil.getRootContainer(eObject); 
```

# java - 无法将spring mvc项目属性导入eclipse

> ID：10495118
> 
> 赞同：0
> 
> 时间：2012-05-08T08:27:09.923
> 
> 标签：java, eclipse, spring-mvc

我正在尝试将[http://www.javaworld.com/javaworld/jw-04-2009/jw-springmvc-cms-src.zip](http://www.javaworld.com/javaworld/jw-04-2009/jw-springmvc-cms-src.zip)上的项目导入 Eclipse。

我从现有的 Ant Buildfile 执行 File -> New -> Project.. -> Java Project。我给出了项目的 build.xml 的路径。

它将项目导入 eclipse 并显示 src 和 test 文件夹。但是，它不显示 WEB-INF、css 等文件夹。为什么？如何在 Eclipse 的项目结构中也可以查看它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:12:07.503

您应该尝试“手动”将丢失的文件夹创建到新创建的项目中，然后您可以使用 Import -> File system 将丢失的文件添加到相应的文件夹中......

# django - 跳过列表中的第一个元素

> ID：10495120
> 
> 赞同：7
> 
> 时间：2012-05-08T08:27:22.763
> 
> 标签：django, django-templates

在执行 for 循环时，django 模板标签是否可以跳过列表中的第一个元素？例如，我想从元素 1 开始，而不是从 0 开始。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T08:34:02.150

内置[切片](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#slice)过滤器

```
{{ qs|slice:"1:" }} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T08:42:13.427

例如，您可以这样做：

```
{% if not forloop.first %}
    ...
{% endif %} 
```

# facebook - URL 无法访问且没有错误

> ID：10495136
> 
> 赞同：0
> 
> 时间：2012-05-08T08:28:09.893
> 
> 标签：facebook, facebook-opengraph, meta-tags

我已经用 OG 元信息更新了我的网站，但它不能完美运行。在此门户网站上，Facebook 无法访问某些文章（评论对此进行了评论）。但是当我将 URL 粘贴到 FB 状态时，它无法加载本文的初始图像和预告片。这个问题不是永久性的，但常常让我难过。单击链接将我带到developers.facebook.com/tools/lint？页面，并且不能说任何错误，一切似乎都很好。我该怎么办，有人可以帮助我吗？一些用于检查的 URL（点击调试页面错误消息消失，一切都会好起来的）：

[http://www.femcafe.hu/cikkek/celeb/jessica-simpson-2-millio-dollaros-szulese](http://www.femcafe.hu/cikkek/celeb/jessica-simpson-2-millio-dollaros-szulese)

[http://www.femcafe.hu/cikkek/celeb/nem-haragszom-markra-interju-eden-kiraval](http://www.femcafe.hu/cikkek/celeb/nem-haragszom-markra-interju-eden-kiraval)

如果您需要更多网址，我可以发送更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:36:20.403

*lint*的新链接是：

[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)

确保您的页面/链接上没有任何重定向，它会抓取最后/最终的 url。

检查您是否有任何缓存问题等。

我没有看到任何错误

# c# - Android 中的 MVVMCross 绑定

> ID：10495137
> 
> 赞同：5
> 
> 时间：2012-05-08T08:28:13.517
> 
> 标签：c#, xamarin.android, mvvmcross

我正在开发一个跨平台的应用程序，在 android 中启动它。我找到了你的 MVVMCross 项目，我正在尝试进入它。现在我对它完全陌生，不知道如何将我的 WebService-Results 绑定到我的 ListView。这里以 XAML 为例，我是如何尝试的：

```
xmlns:mobsales="http://schemas.android.com/apk/res/MobSales.DroidUI"
... 
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:layout_marginLeft="5dp" 
mobsales:MvxItemTemplate="@layout/listitem_customer" 
mobsales:MvxBind="{'ItemSource':{'Path':'Customer'}}" /> 
... 
```

看起来像这样

```
<cirrious.mvvmcross.binding.android.views.MvxBindableListView
        android:id="@+id/autocomplete"
        android:layout_below="@id/txtfield"
        android:layout_centerHorizontal="true"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        mobsales:MvxItemTemplate="@layout/listitem_customer"
        mobsales:MvxBind="{'ItemSource':{'Path':'Customers'}}" /> 
```

当我悬停最后两行时，工具提示说属性未声明。我真的不知道你是怎么做到的。你能给我一些建议吗？我想我必须在我的 UI 项目的 Values 中写一些 xml，对吧？

另一个问题：如何使用 AutoCompleteTextViews？我必须先为它编写自己的 MvXBindables 吗？有什么建议吗？:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T09:00:06.587

要使这些属性绑定，您需要包含命名空间 - 看起来您已经完成了。

您还需要将 MvxBindingAttributes.xml 文件包含到您的 UI 项目中 - [https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross.Binding/ResourcesToCopy/MvxBindingAttributes.xml](https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross.Binding/ResourcesToCopy/MvxBindingAttributes.xml) - 您必须设置将此文件的操作构建到“AndroidResource”

例如，请参阅任何 Android 示例项目 - [https://github.com/slodge/MvvmCross](https://github.com/slodge/MvvmCross)

* * *

对于关于添加绑定的问题的第二部分，绑定框架应自动单向绑定（从 ViewModel 到 View）到任何 Monodroid 视图/小部件上的现有公共属性。

如果公共属性的类型不正确（例如，它是一些 Android 枚举而不是视图），那么您可以使用 IMvxValueConverter 进行转换。

如果您想进行双向绑定，或者没有要绑定的公共属性，那么您很容易进行自定义绑定。有关这方面的示例，请参阅[会议示例中的自定义 IsFavorite 2 方式绑定](https://github.com/slodge/MvvmCross/tree/master/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Droid/Bindings)

此代码为每个 Android Button 添加了一个新的可绑定伪属性“IsFavorite”。

...这是在 Setup.cs 中使用如下代码初始化的：

```
 protected override void FillTargetFactories(MvvmCross.Binding.Interfaces.Bindings.Target.Construction.IMvxTargetBindingFactoryRegistry registry)
    {
        base.FillTargetFactories(registry);

        registry.RegisterFactory(
                    new MvxCustomBindingFactory<Button>(
                       "IsFavorite", 
                       (button) => new FavoritesButtonBinding(button)));
    } 
```

...绑定代码是：

```
public class FavoritesButtonBinding
    : MvxBaseAndroidTargetBinding
{
    private readonly Button _button;
    private bool _currentValue;

    public FavoritesButtonBinding(Button button)
    {
        _button = button;
        _button.Click += ButtonOnClick;
    }

    private void ButtonOnClick(object sender, EventArgs eventArgs)
    {
        _currentValue = !_currentValue;
        SetButtonBackground();
        FireValueChanged(_currentValue);
    }

    public override void SetValue(object value)
    {
        var boolValue = (bool)value;
        _currentValue = boolValue;
        SetButtonBackground();
    }

    private void SetButtonBackground()
    {
        if (_currentValue)
        {
            _button.SetBackgroundResource(Resource.Drawable.star_gold_selector);
        }
        else
        {
            _button.SetBackgroundResource(Resource.Drawable.star_grey_selector);
        }
    }

    protected override void Dispose(bool isDisposing)
    {
        if (isDisposing)
        {
            _button.Click -= ButtonOnClick;
        }
        base.Dispose(isDisposing);
    }

    public override Type TargetType
    {
        get { return typeof(bool); }
    }

    public override MvxBindingMode DefaultMode
    {
        get { return MvxBindingMode.TwoWay; }
    }
} 
```

# c++ - MPI 收集不同的大小

> ID：10495139
> 
> 赞同：2
> 
> 时间：2012-05-08T08:28:20.827
> 
> 标签：c++, mpi

我在 C++ 中有 10 台计算机和 2 个变量的集群 - 结果：size int 100; - result_final : (仅在主机上) size int 1000; 如何收集“结果”的碎片并创建“result_final”，因为它们的大小不同。谢谢！

```
int *rcounts = (int *) malloc(commSize * sizeof(int));
int *displs = (int *) malloc(commSize * sizeof(int));
for (i = 0; i < commSize; ++i) {
    displs[i] = commRank * result_size * size;
    rcounts[i] = result_size * size;
}
MPI_Gatherv(h_result, result_size * size, MPI_INT, h_result_final, rcounts,
        displs, MPI_INT, 0, MPI_COMM_WORLD); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T08:37:54.787

如果每件的尺寸不同，您将`MPI_Gatherv()`使用`MPI_Gather()`. `MPI_Scatter()`对于vs也是如此`MPI_Scatterv()`。

# jquery - 似乎无法访问 JSON 值

> ID：10495141
> 
> 赞同：0
> 
> 时间：2012-05-08T08:28:33.853
> 
> 标签：jquery, ajax, json, alert

我目前在通过 jQuery AJAX 函数访问 JSON 值时遇到了一些问题。第一个警报工作正常，但我得到一个带有第二个值的“未定义”警报：this.dateOfBirth2。

看来我只能访问存储在另一个对象中的值。很奇怪。知道如何以这种方式访问​​ this.dateOfBirth2 吗？

这是JS小提琴。它不起作用，但想象一下上面`/js/formdata.js`的`<script>`代码。[http://jsfiddle.net/LMSmp/1/](http://jsfiddle.net/LMSmp/1/)

JavaScript：

```
$(document).on('click', function () {
    $.ajax({
      url: '/js/formdata.js',
      dataType: 'json',
      success: function (data) {
        var formData = $(data.formdata);
        formData.each(function () {
          alert(this.name.surname);
          alert(this.dateOfBirth2);
        });
      }
    })
});​ 
```

JSON：

```
{
  "formdata": {
    "name": {
      "salutation": "Dhr",
      "surname": "Jan",
      "tussenvoegsel": "van",
      "lastName": "Boden"
    },
    "dateOfBirth1": 1,
    "dateOfBirth2": 3,
    "dateOfBirth3": 2,
    "nationality": "Nederland",
    "address": {
      "zipcode": "1234AF",
      "houseNumber": 5,
      "suffix": "",
      "street": "Kerkstraat",
      "living": "Amstelveen",
      "country": "Nederland"
    },
    "contact": {
      "homeTel": "0123-456789",
      "mobileTel": "01-23456789",
      "email":"me@mail.com"
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:36:40.090

```
$(document).on('click', function () {
    $.ajax({
      url: '/js/formdata.js',
      dataType: 'json',
      success: function (data) {        
          alert(data.formdata.name.surname);
          alert(data.formdata.dateOfBirth2);
      }
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T08:37:26.020

您正在将一个对象传递给 jQuery，这没有任何意义。jQuery 用于处理**DOM 元素**。[尽管它可能“有效”](http://jsfiddle.net/d4tp8/)，但最好使用[`$.each()` *^([docs])*](http://api.jquery.com/jQuery.each/)：

```
$.each(data, function () {
    alert(this.name.surname);
    alert(this.dateOfBirth2);
}); 
```

[**演示**](http://jsfiddle.net/ULc6h/)

# ios - CGContextConvertRectToDeviceSpace 在视网膜设备上是否正常工作？

> ID：10495142
> 
> 赞同：3
> 
> 时间：2012-05-08T08:28:36.477
> 
> 标签：ios, core-graphics, core-text, retina-display

我正在构建一个基于 iOS 的核心文本应用程序（iOS 5、iPad），并有一个视图，我在其中执行一些印刷计算（在 drawRect 中）。

我注意到当我使用 CGContextConvertRectToDeviceSpace 时，我在视网膜设备上得到的结果是非视网膜设备的两倍。我的理解是在 drawRect 中应用了一个隐式变换，应该隐藏任何视网膜/非视网膜设备的差异，所以我很困惑为什么我应该看到任何差异。

更具体地说，我正在尝试计算用户空间坐标中给定 CTLine 的用户坐标中的位置。我首先将 CTLineGetTypographicBounds 用于我的线，并使用 CGContextConvertRectToDeviceSpace 中的这些值来获得一个矩形......但是我得到的矩形在视网膜设备上的宽度和高度是非视网膜设备的两倍。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T03:18:37.360

> 我注意到当我使用 CGContextConvertRectToDeviceSpace 时，我在视网膜设备上得到的结果是非视网膜设备的两倍。

对我来说听起来很正常。“设备空间”表示输出设备上的实际像素，在这种情况下是视网膜显示器。它通常比`CGContext`' 的用户空间坐标系大 2 倍。

通常很少需要转换到设备空间或从设备空间转换——只有当您绝对需要将绘图与真实像素对齐时，您才会这样做。

你想通过使用来完成`CGContextConvertRectToDeviceSpace`什么？可能有替代方案。

# javascriptmvc - 实验室 js + Javascriptmvc 偷

> ID：10495143
> 
> 赞同：0
> 
> 时间：2012-05-08T08:28:41.223
> 
> 标签：javascriptmvc, labjs

有人将 LabJs 与 javascriptmvc 窃取结合使用吗？意味着在子级别寻找依赖加载以及利用 LabJs 的异步性能提升。

一个.js

......

steal(../b.js) .then(../c.js) //c.js 需要先加载 b.js 和 d.js 才能加载

b.js

......

steal(../d.js) //(b.js调用时需要加载d.js，加载d.js以便更好的分类和维护)

labjs + 偷窃的任何文章或经验都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:44:11.153

Stee 会将您的生产应用程序构建到单个 JS 文件中。您可以根据需要加载该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:07:43.513

暂时不考虑偷窃为您构建一个文件...

注释嵌套在每个脚本中的依赖项的概念意味着，就其本身而言，您不能充分利用并行加载，因为加载器在完成加载 A 并且可以看到它需要 B 和C. 当然，一旦知道了 B 和 C，它可以并行加载这两个，但它不能与 A 并行加载 B 和 C。

另一个问题是 LABjs（和大多数其他动态脚本加载器）严格来说是非阻塞行为，所以如果你加载一些这样的脚本，你会遇到一个问题：

A -- 取决于 B 和 C

D -- 取决于 A 和 E

当 A 完成加载，然后您开始加载 B 和 C 时，您不能本机（没有额外的预努力）让 D 等到 B 和 C（以及 A）完成。

这背后的原因很难解释，但可以说，这种情况对于使用嵌套依赖注解的动态加载来说是有问题的。

* * *

但是，如果您在一开始就知道依赖关系树（也就是说，您不会等待加载脚本来了解它们的嵌套依赖关系注释），那么您可以轻松利用动态并行加载，同时确保保留顺序。您*可以*轻松地做到这一点：

B C A E D

并并行加载所有 5 个，同时仍确保它们按照说明的正确顺序执行。找出依赖关系树和必要的执行顺序的最佳方法是建立一个遍历所有脚本并确定列表是什么及其必要顺序的构建过程。

使用 LABjs，上面的链看起来像这样：

$LAB.setOptions({AlwaysPreserveOrder:true}).script([B,C,A,E,D]);

假设您一开始就知道该列表/顺序是什么，则非常简单明了。只需让您的构建脚本将那一行代码放到您的 HTML 页面中，然后繁荣，您就很好了。

如果您没有这样的构建脚本来执行此操作（我有自己的构建脚本，我已经为需要这种类型的各种项目构建了），您有两种选择：

1.  不要使用**嵌套的依赖注解**。自己管理你的依赖列表（上面的列表），并确保它的顺序正确。十年或更长时间以来，人们在浏览器中使用脚本标签的方式一直很好，因此对于大多数网站来说可能已经足够了。我在我手动管理的许多站点上都有 LABjs 链，这完全没有问题，成千上万的其他使用 LABjs 的站点也是如此。

2.  使用构建脚本（如 Steal），将它们全部放在一个文件中（当然，它也必须找出正确的顺序！）。您没有获得并行加载的好处。真可惜。

希望这能对手头的问题有所了解。

# c++ - C++ GUI窗口位置

> ID：10495145
> 
> 赞同：-1
> 
> 时间：2012-05-08T08:28:44.187
> 
> 标签：c++, user-interface, window, position, command-line-interface

我有一个用 C++/CLI 编写的 GUI。我希望它的一个特定窗口在我的显示器的特定位置（右上角）打开。
我该如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:35:38.580

```
BOOL WINAPI SetWindowPos(
  __in      HWND hWnd,
  __in_opt  HWND hWndInsertAfter,
  __in      int X,
  __in      int Y,
  __in      int cx,
  __in      int cy,
  __in      UINT uFlags
); 
```

[有关msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545%28v=vs.85%29.aspx)的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:38:30.560

[http://www.winprog.org/tutorial/](http://www.winprog.org/tutorial/) -- 这将教您如何仅在窗口的本机 GUI 工具 (API) 中为 Windows 制作 GUI。要实现您的代码，您需要响应用户的操作，即单击按钮然后执行 i = 1+1;

# sql - Oracle：如何在查询中比较两个 NUMBERS 得到值 'TRUE' 或 'FALSE'？

> ID：10495150
> 
> 赞同：8
> 
> 时间：2012-05-08T08:28:57.427
> 
> 标签：sql, oracle

我想比较两个数字。让我们以 1 和 2 为例。

我尝试编写以下查询，但它根本无法按预期工作（Toad 说：ORA-00923：在预期的地方找不到 FROM 关键字）：

```
SELECT 1 > 2 from dual 
```

DECODE 有点像 Switch 案例，那么如何将表达式评估（即数字比较）的结果放入选择列表中？

我在 SELECT LIST 中找到了使用函数而不是表达式的解决方案：即

```
select DECODE(SIGN(actual - target)
           , -1, 'NO Bonus for you'
           , 0,'Just made it'
           , 1, 'Congrats, you are a winner')
from some_table 
```

有没有更优雅的方式？

另外我如何比较两个日期？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T08:37:57.550

sql 中没有布尔类型（至少在 oracle 中）。
你可以使用`case`：

```
SELECT CASE when 1 > 2 THEN 1 ELSE 0 END FROM dual 
```

但是您的解决方案（解码）也不错，请阅读[此处](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:1243867216406)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T11:01:04.243

如果您想测试 a > b、a = b 和 a < b ，[SIGN()](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions145.htm)函数确实可能是您可能感兴趣的分类（不）等式的最佳方法，并且它将接受日期-日期或数字-numeric 作为参数。

我会优先使用 Case 语句，而不是解码。

```
Select
  case sign(actual-target)
    when -1 then ...
    when  0 then ...
    when  1 then ...
  end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T08:43:44.657

你可以用sql比较两个日期

方法（一）：

```
SELECT   TO_DATE('01/01/2012') - TO_DATE('01/01/2012')  
FROM DUAL--gives zero 
```

方法（2）：

```
SELECT CASE 

when MONTHS_BETWEEN('01/01/2012','01/01/2010') > 0 
THEN 'FIRST IS GREATER' 
ELSE 'SECOND IS GREATER OR EQUAL'  END

 FROM dual 
```

抱歉，我无法格式化代码格式化工具栏消失了！有人知道为什么吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T16:53:39.757

```
SELECT (CASE 
WHEN (SIGN(actual - target) > 0 ) THEN 
 'NO Bonus for you' 
ELSE 
 'Just made it'  END)
FROM dual 
```

# c# - 表标题在 runat=server 时不显示

> ID：10495152
> 
> 赞同：0
> 
> 时间：2012-05-08T08:29:12.403
> 
> 标签：c#, asp.net, c#-4.0, html-table

我有一个带有标题的简单 HTML 表，并显示了标题。我`runat="server"`向它添加了一个属性，现在标题没有显示。我如何显示表格的标题是`runat="server"`.

**编辑 1)**

```
<table cellpadding="4" cellspacing="0" id="tbl_9_10" runat="server" clientidmode="Static" >
                    <caption>
                        For Six years old </caption> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T08:34:11.347

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmltable%28v=vs.100%29.aspx) “不支持复杂的表格模型。您不能拥有带有嵌套标题、col、colgroup、tbody、thead 或 tfoot 元素的 HtmlTable 控件。”

相反，您可以使用 asp.net 表

```
<asp:Table Caption="For Six years old" runat="server">

</asp:Table> 
```

# android - 仅显示最后一个叠加项目

> ID：10495155
> 
> 赞同：0
> 
> 时间：2012-05-08T08:29:27.707
> 
> 标签：android, android-maps, itemizedoverlay

我所做的是从 xml 文件中获取数据，然后使用自定义 ItemizedOverlay 添加项目。

```
public CustomItemizedOverlay callme(List<Places> result){

    Drawable drawable = this.getResources().getDrawable(R.drawable.ic_launcher);

    latitudeE6  = result.get(i).latitude;
    longitudeE6 = result.get(i).longitude;

    GeoPoint point = new GeoPoint(latitudeE6a, longitudeE6a);                               
    OverlayItem overlayitem = new OverlayItem(point, result.get(i).title, result.get(i).text);

    CustomItemizedOverlay itemizedOverlay = new CustomItemizedOverlay(drawable);

    itemizedOverlay.addOverlay(overlayitem);//add point

    i++;

    latitudeE6 =0;
    longitudeE6 =0;
    return itemizedOverlay;

} 
```

当我在 UI 线程上时，我使用 while() 循环来打印：

```
int j=0;
List<Overlay> mapOverlays = mapView.getOverlays();

while( j < 5 ) {
    test1 = callme(result1);                                
    mapOverlays.add(test1);                                 

    j++;
} 

MapController mapController = mapView.getController();
mapController.setZoom(12); 
```

只需要显示五个项目，当 j < 5 时循环停止。问题是它只显示 xml 数据中的最后一项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:43:45.983

Step1：添加这个java文件..

```
public class MapItemizedOverlay extends ItemizedOverlay<OverlayItem>
{
public static boolean isRouteSelecting;
public static ArrayList<GeoPoint> geoPoints;

private GeoPoint geoPoint_;
private ArrayList<OverlayItem> overlayItems_ = new ArrayList<OverlayItem>();

public MapItemizedOverlay(Drawable defaultMarker)
{
    super(boundCenterBottom(defaultMarker));
    // TODO Auto-generated constructor stub
}

public void addOverlay(OverlayItem overlayItem)
{
    overlayItems_.add(overlayItem);
    populate();
}

@Override
protected OverlayItem createItem(int i)
{
    // TODO Auto-generated method stub
    return overlayItems_.get(i);
}

@Override
public int size()
{
    // TODO Auto-generated method stub
    return overlayItems_.size();
}
 } 
```

第2步：进入您的MapActivity ...（oncreate）

```
mapItemizedOverlay_ = new MapItemizedOverlay(drawable_);

                     for(int i = 0; i < yourList.size(); i++)
            {

                GeoPoint geoPoint = new            GeoPoint(Latitude, Longitude);
                OverlayItem overlayItem = new OverlayItem(geoPoint, busStop.getStopName(), "");
                mapItemizedOverlay_.addOverlay(overlayItem);
            }
            drawable_ = this.getResources().getDrawable(R.drawable.ic_launcher);
            mapView_.getOverlays().add(mapItemizedOverlay_); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T08:34:14.027

`int i`你在你的`callme(List<Places> result)`方法中错过了一个循环

**更新：**

```
List<Overlay> mapOverlays = mapView.getOverlays();

  for(int i=0;i<result1.size();i++)
   {
    Drawable drawable = this.getResources().getDrawable(R.drawable.ic_launcher);
    latitudeE6  = result1.get(i).latitude;
    longitudeE6 = result1.get(i).longitude;

    GeoPoint point = new GeoPoint(latitudeE6a,longitudeE6a);                                
    OverlayItem overlayitem = new OverlayItem(point, result1.get(i).title, result1.get(i).text);
    CustomItemizedOverlay itemizedOverlay = new CustomItemizedOverlay(drawable);           
    itemizedOverlay.addOverlay(overlayitem);        //add point

     mapOverlays.add(itemizedOverlay);  
    }           
    latitudeE6 =0;
    longitudeE6 =0;                     
MapController mapController = mapView.getController();
mapController.setZoom(12); 
```

使用上面的代码删除你的代码你发布了什么问题，现在让我知道会发生什么..

# java - MYSQL 自动递增主键的实际问题

> ID：10495156
> 
> 赞同：1
> 
> 时间：2012-05-08T08:29:28.893
> 
> 标签：java, mysql, persistence, auto-increment

我最近为我的 java 应用程序编写了一个会计模块。

该模块基于 MYSQL 表和 INNODB 引擎。其中一项要求当然是每张发票的“运行”ID。我尝试使用该`auto_increment`方法和使用序列表来生成 id，但在这两种方法中我都有同样的问题：由于 id 是在我持久化发票实体时生成的，如果在将持久化实体刷新到数据库期间发生错误, auto_id 递增，导致我的一系列发票出现“漏洞”。我当然可以放弃这种方法，并为新发票分配以前发票的最大 ID + 1，但我认为这是一种不好的做法。我可以使用哪些其他方法来确保我的发票系列中没有漏洞，假设有时发票可能由于某些验证问题而无法保存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:37:00.387

在spring框架中有类似的东西

```
@Transactional(rollbackFor=RuntimeException.class) 
```

所以如果服务器调用有问题，一切都应该回滚。我确信其他框架也有类似的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:49:09.040

如果您的 MySQL 版本 > 5.0.2，那么您可以尝试使用触发器来正确增加表列的值。但是您应该记住，将发票编号的生成委托给数据库，我认为这与业务逻辑更相关，这不是一个好主意，因为在失败的情况下您可能会遇到一些问题。所以我宁愿建议你在你的代码中以编程方式生成它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T09:22:45.013

这本身并不是一个坏习惯，但可能值得使用不同的“传统”数字主键字段来保证表的结构完整性，并为发票编号设置另一个字段。

然后，您可以使用不同的逻辑填充该发票编号，或者只是一个简单的**MAX+1**，或者可能通过从键表中查找，以便为不同类型的发票提供不同的编号顺序。

例如：

```
CREATE TABLE `keys` (
    `id` INT NOT NULL auto_increment,
    `type` VARCHAR(10) NOT NULL,
    `prefix` VARCHAR(10) NOT NULL,
    `value` INT(10) NOT NULL DEFAULT 0,
    PRIMARY KEY (`id`)
);

INSERT INTO `keys` (`type`, `prefix`) VALUES
('Sales Receipt', 'SRI'),
('Sales Invoice', 'SIN'),
('Sales Refund', 'SRF'); 
```

然后在你的（伪）代码中你可以做

```
Database.BeginTransaction;
NewInvNum = Database.Query("SELECT `value` FROM `keys` WHERE `type` = 'SIN'");
MyInvoice.InvoiceNumber = NewInvNum;
Database.SaveInvoice(MyInvoice);
Database.Query("UPDATE `keys` SET `value` = {0} WHERE `type` = 'SIN'", NewInvNum+1);
Database.CommitTransaction; 
```

事务（或其他一些并发保护）很重要，因此当创建多个发票时，它们不会得到相同的编号。

# c# - 从 c# 调用 SP 时，临时表变量似乎不起作用

> ID：10495157
> 
> 赞同：0
> 
> 时间：2012-05-08T08:29:35.523
> 
> 标签：c#, stored-procedures, temp-tables

我正在从 C# 代码调用存储过程。该 SP 创建临时表来存储一些值。当我从查询分析器运行这个 SP 时，一切似乎都很好。但是当我从 c# 代码运行它时，没有创建临时表。

我使用的是@tableName 而不是#tableName。

临时表仅在存储过程中被引用。SP 之外不需要它们。 ![在此处输入图像描述](../Images/f6cf265e0b63c5fdf9a61b996b34f20e.png) 有什么我错过的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:33:25.910

会话结束时会自动删除临时表，您确定它不只是在 C# 代码完成后被删除吗？[查看文档](http://msdn.microsoft.com/en-us/library/ms174979.aspx)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:48:13.923

发生这种情况是因为您在查询分析器中使用的用户凭据（可能是“sa”？）可能与 C# 应用程序使用的用户凭据不同。

用户需要访问系统数据库 tempdb（读/写），否则在调用存储过程时无法创建这些临时表（在过程内）。

向 C# 使用的用户授予对 tempdb 的访问权限，或者使用您在查询分析器中使用的同一用户（或任何其他 dbadmin 用户）测试您的 C# 应用程序登录，以测试它是否有效。

根据您通过语句询问 SQL Profiler 的评论。

第 1 步：打开 sql profiler 并创建一个新的跟踪。转到选项卡事件选择。并取消标记安全审计和会话

![在此处输入图像描述](../Images/149b57a694894bc6fccfb87d2936f038.png)

第 2 步：选中右下角的 Show all events 复选框，您将在网格上看到几个事件。转到存储过程和 T-SQL 并在下面的屏幕截图中标记它们。

![在此处输入图像描述](../Images/bcc2b4446f35bb1c712e8c66aaac3a98.png)

第三步：运行它。

# typo3 - 未登录时无法更改 tt_news 存档中的日期

> ID：10495158
> 
> 赞同：0
> 
> 时间：2012-05-08T08:29:35.787
> 
> 标签：typo3, typoscript, tt-news

我的一所大学已经建立了一个包含 tt_news 单曲、列表和存档的页面。

他在所有这些页面的侧边栏中都有一个存档列表，它列出了每条新闻的年份。
登录时，我可以单击每年并查看当年的新闻。
但是当我注销时，日期没有改变。它停留在设置“SHOW ARCHIVED”设置时第一次单击的日期。网址改变了，但页面没有......

我有：
tt_news v2.5.2
Typo3 v4.5.4
CoolURI v1.0.26

CoolUri 会议：http: [//pastebin.com/9xTmVyPn](http://pastebin.com/9xTmVyPn)

tt_news 排版：

```
plugin.tt_news { 
    templateFile = fileadmin/templates/ext/blog.html
    displayArchivedInLatest = 1
    datetimeMinutesToArchive = 1
    enableArchiveDate = 0

    # page with archive list
    archiveTypoLink.parameter = 286
    # page with single view
    singlePid = 285
    # page with list view
    backPid = 284
    # page with db entries 
    pid_list = 35

    displaySingle.date_stdWrap.strftime = %e:e %B %Y
    displayList.date_stdWrap.strftime = %e:e %B %Y

    pageBrowser {
        tableParams >
    }

    summary {
        wordWrap = 105 | ... | 1
    }

    imgMaxWidth = 600
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:09:47.207

Perhaps you have an caching issue? Just test it via www.example.com/your/url/?no_cache=1 If that works if you are not logged in, you have an caching issue.

# c# - 存储整数的滑块

> ID：10495161
> 
> 赞同：0
> 
> 时间：2012-05-08T08:29:56.993
> 
> 标签：c#, wpf, numbers, slider

我有这个 WPF 滑块：

```
<Slider Height="22" HorizontalAlignment="Left" Width="100" TickPlacement="BottomRight" AutoToolTipPlacement="BottomRight" TickFrequency="1" Minimum="10" Maximum="110" Value="{Binding Path=Zoom, Mode=TwoWay}" Ticks="100"/> 
```

和我后面的 c# 代码

```
public object Zoom
{
    get { return _zoom.ToString() }
    set
    {
        try
        {
            string zoom = value.ToString().Replace(",", ".");
            if (zoom.EndsWith(" %"))
            {
                _zoom= System.Convert.ToInt32(System.Convert.ToInt64(zoom));
            }
            OnPropertyChanged("CurrentZoom");
        }
        catch (FormatException ex)
        {
            //TODO: =)
        }
    }
} 
```

_zoom 中怎么可能只存储整数？我不需要十进制数。

例如：

缩放为“13,99999”

_zoom 应该是 13 (int)

```
_zoom= System.Convert.ToInt32(System.Convert.ToInt64(zoom)); 
```

所以我得到这个错误：

> 对于 Int32，值太大或太小。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:37:56.377

这会将 Decimal 值返回到点/小数的 LEFT。

> 计算指定十进制数的整数部分。

```
 Math.Truncate(zoom) 
```

[更多信息](http://msdn.microsoft.com/en-us/library/7d101hyf.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:30:32.893

```
_zoom = (int)Math.Round(System.Convert.ToDouble(zoom)); 
```

# python - “CSRF 验证失败。CSRF 令牌丢失或不正确。” 姜戈

> ID：10495164
> 
> 赞同：2
> 
> 时间：2012-05-08T08:30:01.343
> 
> 标签：python, django, token, csrf, verification

我正在尝试基于[Django Classifieds App](https://github.com/saebyn/django-classifieds)创建一个 Django 应用程序，但在尝试提交表单时出现错误：`CSRF verification failed. Request aborted. Reason given for failure: CSRF token missing or incorrect.`

我确实有一个`{% csrf_token %}`形式：

```
<form method="post" action="{% url classifieds.views.create.checkout ad.pk %}">
 {% csrf_token %}
  <table>
   {{ form }}
     <tr>
     <th><label>Total:</label></th>
     <td><div id="total">Choose options above</div></td>
     </tr>
  </table>
</form> 
```

我也在使用`from django.template import RequestContext`

我还在`'django.middleware.csrf.CsrfViewMiddleware',`我的 settings.py 中包含了 MIDDLEWARE_CLASSES

为了正确提交表格，我还缺少什么？

该函数如下所示：

```
def checkout(request, adId):
   ad = get_object_or_404(Ad, pk=adId)
   if request.method == 'POST':
    form = CheckoutForm(request.POST)
    if form.is_valid():

 ...

  payment.save()

  if django_settings.DEBUG:
    paypal_form = PayPalPaymentsForm(initial=paypal_values).sandbox()
  else:
    paypal_form = PayPalPaymentsForm(initial=paypal_values).render()

  return render_to_response('classifieds/paypal.html', {'form': paypal_form}, context_instance=RequestContext(request))
else:
  form = CheckoutForm()

return render_to_response('classifieds/checkout.html', {'ad': ad, 'form': form}, context_instance=RequestContext(request)) 
```

谢谢你的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T08:57:35.073

你用了正确的吗`RequestContext`，我不确定是不是这个问题，但你也可以检查一下。[使用方法](https://docs.djangoproject.com/en/dev/ref/csrf/#how-to-use-it)的第 3 步

> *   在相应的视图函数中，确保正在使用 'django.core.context_processors.csrf' 上下文处理器。通常，这可以通过以下两种方式之一完成：
>     
>     
>     1.  使用 RequestContext，它始终使用“django.core.context_processors.csrf”（无论您的 TEMPLATE_CONTEXT_PROCESSORS 设置如何）。如果您使用的是通用视图或贡献应用程序，那么您已经被覆盖，因为这些应用程序始终使用 RequestContext

# styles - icefaces 3在同一页面上合并了ice和ace组件，样式有问题

> ID：10495166
> 
> 赞同：0
> 
> 时间：2012-05-08T08:30:10.093
> 
> 标签：styles, ace-editor, icefaces-3, ice

我在同一个 xhtml 页面上使用 ace:daaTable 和其他 ice 组件。当我单击 oמ ice:commandButton 时，页面样式正在发生变化。

我试图在 web.xml 上定义“rime”样式，但它没有帮助。

当我定义“无”样式参数名称：org.icefaces.ace.theme 参数值：无点击冰：命令按钮保存页面样式，但我未能将表格样式更改为“styleClass =”oddRow , evenRow" （这是我在我的 previos IceFaces 1.8 项目中的 ice:dataTable 上使用的样式，带有 "xp" 样式。）

有人可以解释一下如何在表格上定义这个styleClass，而不改变每次点击的页面样式。并给我一个例子来展示如何在 ace:component 上使用 styleClass

谢谢塔米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:41:28.163

要包含 rime.css，您可以在头部部分包含以下行。

```
 <link rel="stylesheet" type="text/css"
    href="./xmlhttp/css/rime/rime.css" /> 
```

如果你想指定你自己的样式类，你可以像这样使用。

```
 <ace:dataTable style="width:200px; height:200px; cellspacing: 1px; 
          cellpadding:1px;" ></ace:dataTable> 
```

如果要使用 styleclass 属性，则指定外部 css 并包含名称。

# c# - 从 Asp.net 线程池中获取的线程？

> ID：10495168
> 
> 赞同：1
> 
> 时间：2012-05-08T08:30:12.093
> 
> 标签：c#, asp.net, multithreading, webforms

当我运行 Asp.net（cs 文件）页面时：

并创建`Thread T = new Thread(...)` **或**使用`BeginInvoke()`

线程是否从 Asp.net 保留的线程池中获取？

## 编辑

> 本质上，.NET 维护了一个可以处理页面请求的线程池。当接收到新请求时，ASP.NET 会抓取其中一个可用线程并使用它来处理整个页面。同一个线程实例化页面，运行您的事件处理代码，并返回呈现的 HTML。如果 ASP.NET 以很快的速度接收请求——比它可以提供的速度还快——未处理的请求将在队列中堆积。如果队列已满，ASP.NET 将被迫拒绝其他请求，并出现 503“服务器不可用”错误。

我不想影响 Asp.net “请求线程......”

![在此处输入图像描述](../Images/33b6eb4055f6e902b5efebe650e9db29.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T08:38:56.457

当你使用`new Thread()`时，它实际上创建了一个与`ThreadPool`.

当您使用`Delegate.BeginInvoke()`时，委托在 .Net 上执行`ThreadPool`（没有特殊的 ASP.NET 线程池）。

通常，最好将`ThreadPool`用于短期运行的任务并在需要运行长时间运行的任务时手动创建线程。另一种选择是使用 .Net 4.0 `Task`，它为您提供了更好、更一致的 API。CPU-bound `Task`s 通常在 上运行`ThreaPool`，但您可以指定一个`LongRunning`选项，以便它们创建自己的线程。

`ThreadPool`一般来说，即使在 ASP.NET 应用程序中，您也可能不必担心. 如果你确实遇到了这些问题，你可以尝试增加 中的线程数`ThreadPool`，或者你可以使用一个单独的线程池（这需要一些代码，但你应该可以在互联网上找到它的代码）。如果使用`Task`s，使用自定义线程池会更容易，因为这意味着只需切换`TaskScheduler`.

# apple-push-notifications - 在 Moon APNS 中，在 GetFeedBack 方法中获取有效令牌背后的逻辑是什么？

> ID：10495172
> 
> 赞同：0
> 
> 时间：2012-05-08T08:30:23.743
> 
> 标签：apple-push-notifications, apns-sharp

我一直在尝试使用 MoonAPNS 库找出我的 Apple 应用程序的有效令牌列表。使用 GetFeedBack() 时，收到的令牌数在几分钟后会发生巨大变化。第一次尝试它大约是 8000。然后它是 0 在第三次尝试它是 1 再次它是 0。

我正在使用有效的生产证书。& 已成功将使用相同证书的通知推送到采样设备。

我不了解代码的逻辑以及它提供接收令牌的基础。从 Moon APNS 下载的代码如下。

```
public List<Feedback> GetFeedBack()
{
  try
  {
    var feedbacks = new List<Feedback>();
    Logger.Info("Connecting to feedback service.");

    if (!_conected)
        Connect(_feedbackHost, FeedbackPort, _certificates);

    if (_conected)
    {
        //Set up
        byte[] buffer = new byte[38];
        int recd = 0;
        DateTime minTimestamp = DateTime.Now.AddYears(-1);

        //Get the first feedback
        recd = _apnsStream.Read(buffer, 0, buffer.Length);
        Logger.Info("Feedback response received.");

        if (recd == 0)
            Logger.Info("Feedback response is empty.");

        //Continue while we have results and are not disposing
        while (recd > 0)
        {
            Logger.Info("processing feedback response");
            var fb = new Feedback();

            //Get our seconds since 1970 ?
            byte[] bSeconds = new byte[4];
            byte[] bDeviceToken = new byte[32];

            Array.Copy(buffer, 0, bSeconds, 0, 4);

            //Check endianness
            if (BitConverter.IsLittleEndian)
                Array.Reverse(bSeconds);

            int tSeconds = BitConverter.ToInt32(bSeconds, 0);

            //Add seconds since 1970 to that date, in UTC and then get it locally
            fb.Timestamp = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc).AddSeconds(tSeconds).ToLocalTime();

            //Now copy out the device token
            Array.Copy(buffer, 6, bDeviceToken, 0, 32);

            fb.DeviceToken = BitConverter.ToString(bDeviceToken).Replace("-", "").ToLower().Trim();

            //Make sure we have a good feedback tuple
            if (fb.DeviceToken.Length == 64 && fb.Timestamp > minTimestamp)
            {
                //Raise event
                //this.Feedback(this, fb);
                feedbacks.Add(fb);
            }

            //Clear our array to reuse it
            Array.Clear(buffer, 0, buffer.Length);

            //Read the next feedback
            recd = _apnsStream.Read(buffer, 0, buffer.Length);
        }
        //clode the connection here !
        Disconnect();
        if (feedbacks.Count > 0)
            Logger.Info("Total {0} feedbacks received.", feedbacks.Count);
        return feedbacks;
    }
  }
  catch (Exception ex)
  {
    Logger.Error("Error occurred on receiving feed back. - " + ex.Message);
    return null;
  }
  return null;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:05:09.660

我个人没有使用过 Moon APNS，但是 APNS 反馈服务的工作方式是每次调用它时，它都会返回自上次调用反馈服务以来的非活动令牌。这就解释了你在这里看到的模式。

# c# - 从 dbf 到 c# 程序的字符串数据

> ID：10495173
> 
> 赞同：0
> 
> 时间：2012-05-08T08:30:23.790
> 
> 标签：c#, sql, foxpro, dbf

我有 ac# 程序，它连接到 dbf 文件：

```
OdbcConnection oconn = new OdbcConnection();
oconn.ConnectionString =
    "Driver={Microsoft Visual FoxPro Driver};SourceType=DBF;SourceDB=" + pelna_sciezka + ";Exclusive=No; Collate=Machine;NULL=NO;DELETED=NO;BACKGROUNDFETCH=NO;";
oconn.Open();
OdbcCommand ocmd = oconn.CreateCommand();

ocmd.CommandText = @"SELECT * FROM " + pelna_sciezka + " where Kod_kontr = '" + row.KNH_KOD + "'";
// ocmd.ExecuteNonQuery();
OdbcDataReader odr = ocmd.ExecuteReader();
while (odr.Read())
{
    kod_kontr = odr["Kod_kontr"].ToString();
    Nzwakontr1 = odr["Nzwakontr1"];
    Nzwakontr2 = odr["Nzwakontr2"];
} 
```

连接工作得很好，但是当我想将数据组装到本地字符串变量（kod_kontr、nzwakontr1）时，我得到的只是一个值`System.Byte[]`。当我想从此 dbf 获取其他类型的数据（例如日期、数字等）时，一切正常。问题仅适用于 varchar 数据。我该如何解决我的问题？

感谢任何帮助

* * *

根据 Antonio Bakula 的帮助，我已经阅读了答案：

我必须从 ODBC 更改为 OLE，并且： - 将连接字符串更改为：oconn.ConnectionString = "Provider=vfpoledb.1;Data Source="+pelna_sciezka+";Collat​​ing Sequence=machine"; 为此更改代码：

OleDbDataReader odr = ocmd.ExecuteReader();

```
 while (odr.Read())
            {
              //  byte[] A = Encoding.GetEncoding(Encoding.Default.CodePage).GetBytes(odr.GetString(0));
              //  string p = Encoding.Unicode.GetString((Encoding.Convert(Encoding.GetEncoding(850), Encoding.Unicode, A)));

                kod_kontr = OdczytajTabliceBajtow(odr["Kod_kontr"]);
                Nzwakontr1 = OdczytajTabliceBajtow(odr["Nzwakontr1"]);
                Nzwakontr2 = OdczytajTabliceBajtow(odr["Nzwakontr2"]);
            } 
```

其中 OdczytajTabliceBajtow：

私有字符串 OdczytajTabliceBajtow(object p) { 编码 enc8 = Encoding.ASCII; 字符串 wynik = ""; 字节[] 字节 = (字节[])p; StringBuilder sb = new StringBuilder(); sb.Append(Encoding.ASCII.GetChars(bytes)); wynik = sb.ToString(); 返回威尼克；}

这是我的问题的解决方案。谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T10:05:17.803

我建议您使用 FoxPro 的 OleDB 驱动程序，您不会遇到这些问题，并且速度会明显提高，这是链接

[http://www.microsoft.com/en-us/download/details.aspx?id=14839](http://www.microsoft.com/en-us/download/details.aspx?id=14839)

然后您将从 DataReader 中获取值作为字符字段的字符串

# msdeploy - 如何使用“Publish ->”Web Deploy”将 ASP.NET MVC3 应用程序发布到 azure？（出现错误：Web 部署任务失败）

> ID：10495176
> 
> 赞同：1
> 
> 时间：2012-05-08T08:30:35.410
> 
> 标签：msdeploy, azure-deployment, web-publishing, msbuild-wpp

尝试使用 MVC 项目中的“发布”部署到 azure 时出现此错误。我检查了 Web 管理服务和 Web 部署代理服务，它们都在运行。我使用的凭据是有效的，因为我可以通过远程桌面访问服务器实例

我还在“发布 Web”对话框中检查了 VS 为我填写的属性值，它们是正确的：

服务网址：https: **//*.cloudapp.net:8172/MsDeploy.axd（其中 ***是我的托管服务 ID）

站点/应用程序：NLSubscriber.Web_IN_0_Web

> 错误 66 Web 部署任务失败。（无法连接到目标计算机（“ ***.cloudapp.net”）。在目标计算机上，确保已安装 Web 部署并且所需的进程（“Web 管理服务”）是已启动。）此错误表示您无法连接到服务器。确保服务 URL 正确，此计算机和服务器计算机上的防火墙和网络设置配置正确，并且已在服务器上启动相应的服务。错误详细信息：无法连接到目标计算机（“***.cloudapp.net")。在目标计算机上，确保已安装 Web Deploy 并启动所需的进程（“Web 管理服务”）。无法连接到远程服务器连接尝试失败，因为连接方一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应 xxx.xxx.xxx.xxx:8172 0 0 NLSubscriber.Web

*   我已经检查了服务 url 是否可以访问（并且没有被防火墙阻止），通过我的浏览器直接访问它，输入与 VS 显示的相同的地址，并在警告我关于不受信任的证书之后，它提示我输入用户/密码，我提供并毫无问题地访问它。

*   我已经打开了远程桌面并从 IIS 管理器中检查了站点名称，这与 VS 预先输入的相同：NLSubscriber.Web_IN_0_Web。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:45:22.453

似乎 Arwind 已经在[http://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/dfe98f28-b211-4124-a505-0c664f48b3e5/](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/dfe98f28-b211-4124-a505-0c664f48b3e5/)上解决了这个问题， 请检查链接，看看它是否有帮助。

此致，

明旭。

# ios - 一个非常奇怪的崩溃。我如何解决它？

> ID：10495178
> 
> 赞同：0
> 
> 时间：2012-05-08T08:30:54.507
> 
> 标签：ios, crash

我有一个非常奇怪的崩溃。我不释放数据变量。我的日志是：

```
[NSConcreteData retain]: message sent to deallocated instance 0xa446a00 
```

和代码

```
- (void)request:(ASIHTTPRequest *)request didReceiveData:(NSData *)data
{
 if (!isThreadCreated)
 {
    self.isThreadCreated = YES;
    [NSThread detachNewThreadSelector:@selector(createNewEncodingThread:) toTarget:self withObject:nil];
 }
 [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
 [[AudiobookAppDelegate delegate].dateManager saveTimeLastActivities];

 if(trackFile && !isFotrbidGetNewData)
 {
    if (data) 
    {
        self.downloadedLengthOfFile+= data.length;
        [encodingArray addObject:data];
    }
 }     
} 
```

![在此处输入图像描述](../Images/d67ca44bb0efbb3f8810fc33afa72874.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:32:51.590

`encodingArray`以某种方式发布，所以相关的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:38:45.830

在添加对象之前添加这行代码。

```
if(!encodingArray) {

 encodingArray = [[NSMutableArray alloc] init];
}

[encodingArray addObject:data]; 
```

希望这能解决您的问题。

# wordpress - 在页面上显示元描述

> ID：10495185
> 
> 赞同：3
> 
> 时间：2012-05-08T08:31:09.113
> 
> 标签：wordpress

我正在使用 Wordpress Yoast Seo 插件来生成所有帖子的自动元和描述标签。我需要在帖子页面上显示 Yoast seo 生成的元描述。我在网上找到了这段代码。

```
<?php echo get_post_meta($post->ID, '_yoast_wpseo_metadesc', true); ?> 
```

所以无论我在哪里放置这个 php 代码，它都会显示帖子的元描述。

现在的问题是我博客中的大多数帖子在帖子编辑器的自定义字段中都没有元描述。我通过转到 Seo > Title Settings > Meta Description Template 使用插件使用自动元标记。我浏览了插件的编辑器并在其中找到了 wpseo_metadesc_template。所以我尝试了这段代码。

```
<?php echo get_post_meta($post->ID, 'wpseo_metadesc_template', true); ?> 
```

但它什么也没显示。有人请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T12:58:19.743

好的，我检查`wpseo_metadesc_template`了一个 javascript 变量。它不起作用......
最好的办法是检查描述是否已填充，并且仅在存在时才回显它：

```
<?php
$yoast_meta = get_post_meta($post->ID, '_yoast_wpseo_metadesc', true);
if ($yoast_meta) { //check if the variable(with meta value) isn't empty
    echo $yoast_meta;
}
?> 
```

# visual-studio - Visual Studio .NET 或 Visual Studio 6 的试用版

> ID：10495192
> 
> 赞同：1
> 
> 时间：2012-05-08T08:31:42.263
> 
> 标签：visual-studio, visual-c++

任何人都可以告诉我，是否可以获得 Visual Studio .NET 2003 或 Visual Studio 6.0 的试用版

我搜索了很多，我得到的所有链接都已经过时了。

请帮忙，至少告诉我它是否可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:40:22.987

无法使用。免费版本（“Visual Studio Express Edition”）始于 2005 年。

此外，几乎没有理由使用这些过时的版本。特别是对于 C++，新版本更符合最新标准（'03 和 '11）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:53:20.113

如果您是学生或大学成员，您实际上可以从 MSDNAA 或 Deamspark 下载它：

[http://e5.onthehub.com/WebStore/OfferingsOfMajorVersionList.aspx?ws=5650d4c2-5f9b-e011-969d-0030487d8897&vsro=8&pmv=23c41a99-3ef3-db11-b8b4-0030485a6b08&cmi_mnuMain=bdba23cf-e05e-e011-971f-0030487d8897](http://e5.onthehub.com/WebStore/OfferingsOfMajorVersionList.aspx?ws=5650d4c2-5f9b-e011-969d-0030487d8897&vsro=8&pmv=23c41a99-3ef3-db11-b8b4-0030485a6b08&cmi_mnuMain=bdba23cf-e05e-e011-971f-0030487d8897)

据我所知，所有其他微软官方消息来源都已关闭。

# .net - .NET 开源 FTP SDK/API 的建议

> ID：10495199
> 
> 赞同：0
> 
> 时间：2012-05-08T08:32:30.750
> 
> 标签：.net, ftp

有人对 .NET 的良好开源 FTP SDK/API 有什么建议吗？还是框架中内置的那个是最好的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:37:31.617

像 Alex FTPS 客户端这样的东西？就像@Adam Houldsworth 指出的那样，只说“最好”不足以提出一个好问题。

[http://ftps.codeplex.com/](http://ftps.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:38:24.417

试试这个开源 ftp 库，它易于使用并且以简单的方式编写，以便可以根据使用情况进行修改。

[**t-ftp 库**](http://www.codeproject.com/Articles/343913/Simple-FTP-library-in-Csharp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T09:15:37.280

这是 .NET 的 FTP 库的健康列表：http: [//csharp-source.net/open-source/network-clients](http://csharp-source.net/open-source/network-clients)（以及其他网络客户端库）。

# mysql - MySQL时间和日期查询问题

> ID：10495205
> 
> 赞同：1
> 
> 时间：2012-05-08T08:32:39.347
> 
> 标签：mysql, date, time

我想做一个查询，返回两个日期和两次之间的一些值......

DATE 和 TIME 值在不同的列中，DATE 称为 FECHA，TIME 称为 HORAIN

我只有一个 DATE 查询有 4 个可能的值：

值 1 具有日期 2012-05-07 时间 02:45:00 值 2 具有日期 2012-05-07 时间 12:00:00 值 3 具有日期 2012-05-08 时间 04:35:00 值 4 具有日期 2012 -05-08 时间 07:30:00

我想要得到的是第一天从 07:00:00 到 23:59:59 的结果，以及从第二天 00:00:00 到 06:59:59 的值（所以从 07上午至上午 06:59）

这是我的查询，它返回 NO VALUES... 它必须返回 VALUE 2 和 VALUE 3，因为它符合我想要的要求

```
SELECT * FROM mytable
WHERE
(DATE(fecha)>='2012-05-07' AND TIME(horain)>='07:00:00')
AND
(DATE(fecha)<='2012-05-08' AND TIME(horain)<='06:59:59'); 
```

我究竟做错了什么？:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:42:32.553

尝试一次调试它-消除尽可能多的限制并查看是否获得记录-获得记录后，一次添加一个条件：

从...开始：

```
SELECT * FROM mytable 
```

继续：

```
SELECT * FROM mytable
WHERE
 DATE(fecha)>='2012-05-07' 
```

依此类推，直到您找到删除所有记录的条件并了解发生这种情况的原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:42:36.670

尝试`SELECT * FROM mytable WHERE FECHA >= 2012-05-07 AND horain >= 07:00:00) AND FECHA <= 2012-05-08 AND horain <= 06:59:59 );`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T08:45:21.973

时间和日期单独检查

如果我们重组您的 where 子句并省略您获得的日期部分：

```
SELECT * FROM mytable 
WHERE TIME(horain)>='07:00:00' AND
TIME(horain)<='06:59:59' 
```

这永远不会给你一个结果，因为两者都不可能是真的。你可以做的是结合日期和时间字段

```
SELECT * FROM mytable 
WHERE
concat(fecha,' ',horain) as date BETWEEN '2012-05-07 07:00:00' AND '2012-05-08 06:59:59'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T08:58:03.880

您可以使用`Concat()`. 它连接两个字段值。所以您可以连接`fecha`字段`horain`值，然后搜索如下所示的结果。

```
SELECT *   FROM `mytable` WHERE (Concat(`fecha`, ' ', `horain`, '') <= '2012-05-08 06:59:59') AND (Concat(`fecha`, ' ', `horain`, '') >= '2012-05-07 07:00:00') 
```

`Concat()`函数采用 4 个参数。

1.  `Value1`
2.  `String from which concatenate value1 to value2`
3.  `Value2`
4.  `String want to concatenate in last`

希望对您有所帮助

谢谢。

# java - 与文件系统中的二进制文件交互的方法的java单元测试

> ID：10495216
> 
> 赞同：1
> 
> 时间：2012-05-08T08:33:16.883
> 
> 标签：java, unit-testing, file-io, mocking, junit4

我对 java 编程很陌生，但我会尽量使用正确的术语并尽可能避免误解。

我找到了一些与我的问题非常相似的主题的答案，但或者我只是看不出它们如何真正适合我的问题，或者它们真的不适合。其中一些使用模拟对象，但我不确定在我的情况下这是正确的选择。

## **一般说明**

我需要一个对象数组，这些对象的信息是从随机访问的二进制文件中加载的。二进制文件的第一个字节是文件的标题，它定义了数据如何存储在文件中，基本上表示某些字段的长度，这些字段有助于计算文件中所需数据的位置。

所以现在我想测试将调用的方法以将由*UnitListElement*对象指定的所需数据加载到*Unit*对象。为此，我只关注对二进制文件的单次读取。

## **更详细的视图**

我有一个名为*Unit*的 java 类，它有一些属性，比如说*a* ,*b* 和*c*。*此属性的值通过调用getDataFromBinFile*的方法加载：

```
public class Unit{
    public double[] a;
    public double[] b;
    public double[] c;

getDataFromBinFile(UnitListElement element){
    <here loads the data from the binary file with random access>
}
} 
```

从二进制文件加载数据的方法，打开二进制文件并访问二进制文件中所需的数据。要读取的所需数据在*UnitListElement*对象中指定：

```
public class UnitListElement{
    public String pathOfFile;
    public int beginToReadAt;  // info related to where the desired data begins
    public int finishReading;  // info related to where the desired data ends
} 
```

属性*beginToReadAt*和*finishReading*时间引用与二进制文件的头一起用于计算要从二进制文件读取的第一个和最后一个字节位置。

所以我需要做的是一个测试，我调用方法*getDataFromBinFile(unitListEl)*并测试返回的信息是否正确。

## **解决方案的选项**

*第一个选项*

在一些有类似问题的帖子中建议使用模拟对象。我试图找到有关模拟对象的文档，但我还没有找到任何简单的初学者指南。因此，虽然不太了解模拟对象，但我的印象是不适合这种情况，因为我要测试的是二进制文件的读取，而不仅仅是与其他对象的交互。

*第二个选项*

另一种选择是使用辅助方法在测试中为测试创建二进制文件，使用@BeforeClass 来创建测试，并使用此临时文件运行测试，然后使用@AfterClass 方法将其删除。

## **问题**

您认为考虑 TDD 方法的最佳实践是什么？模拟对象真的适合这种情况吗？如果他们这样做了，是否有任何包含初学者基本示例的文档？

或者另一方面，文件的创建更适合测试阅读方法？

## **谢谢**

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:45:22.597

模拟可以应用于您的案例，但实际上这里并不是绝对必要的。您所需要的只是将实际数据处理逻辑与`getDataFromBinFile`从文件中读取字节的代码分离。

您可以通过（至少）两种方式实现这一目标：

*   *使用 mocks：*将文件读取代码隐藏在一个接口方法后面，该接口方法接受 a`UnitListElement`并返回一个字节数组，然后在`getDataFromBinFile`. 然后你可以在你的测试中使用一个模拟阅读器模拟这个接口，它只返回一些预定义的字节而不访问任何文件。（或者，您可以将文件读取逻辑移动到`UnitListElement`自身中，因为现在它似乎是一个 POD 类。）
*   *没有模拟：*将签名更改`getDataFromBinFile`为采用字节数组参数而不是`UnitListElement`. 在您的实际生产代码中，您可以从 描述的文件位置读取数据`UnitListElement`，然后将其传递给`getDataFromBinFile`. 在您的单元测试中，您可以直接将任何二进制数据传递给它。（请注意，在这种情况下，将您的方法重命名为类似的名称是有意义的`getDataFromBytes`。）

对于模拟，到目前为止我一直在使用 EasyMock。我发现[它的文档](http://easymock.org/EasyMock3_1_Documentation.html)相当容易理解，希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:38:19.000

我在 TDD 方面没有太多经验。测试文件的读/写时不需要使用模拟，最好的选择是拥有一个测试版本的文件，您将在其上运行测试。当您不能轻松地为您的用例创建可测试对象时使用模拟，例如，如果您正在测试与服务器的交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T09:05:10.263

我不喜欢创建测试二进制文件，因为正在读取的文件格式的任何更改都意味着更改测试文件（以及测试）。

由于您遵循 TDD 方法，因此您必须为“UnitListElement”类编写测试，因此对于这种情况，模拟似乎是一个更好的解决方案。您的目标是测试“getDataFromBinFile”方法而不是“UnitListElement”类方法（当前），因此您可以模拟“UnitListElement”类（或由它继承并传递给 getDataFromBinFile 方法的接口）。模拟“UnitListElement”意味着您可以将预定义的或任何特定的返回值返回给类中的任何方法调用，只要在“getDataFromBinFile”方法中访问它。最后，您可以在“getDataFromBinFile”方法中使用来自模拟的返回值，并在执行业务逻辑后断言该方法的返回值。我没有[这里](http://www.vogella.com/articles/EasyMock/article.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T13:38:28.873

只需制作一个测试二进制文件。

此过程正在读取文件。所以没有理由担心文件系统。该文件将始终是确定性的（如果您在阅读期间更改了文件，那将是另一个故事）

如果您想在读入对象后对它们进行测试，我建议您在测试中创建它们（除非这很难做到，比如声音文件）

另外，我建议抽象流而不是文件，但我仍然会使用测试文件进行测试。顺便说一句：确保测试文件很小，毕竟这是一个测试。

有些人可能会争辩说“测试不应该命中文件系统”，但你认为 .class 文件是从哪里加载的？

另外，我会通过 java classLoader 获取流

```
this.getClass().getResourceAsStream("yourfile.name"); 
```

快乐的测试！

卢埃林·法尔科

[http://www.approvaltests.com](http://www.approvaltests.com)

# nservicebus - NServiceBus V3 如何在 WPF 应用程序中配置端点

> ID：10495218
> 
> 赞同：0
> 
> 时间：2012-05-08T08:33:24.147
> 
> 标签：nservicebus, nservicebus3

尝试配置总线实例时出现以下错误。

> 无法生成端点名称，请使用 Configure.DefineEndpointName(...) 指定您自己的约定

嗯，所以我需要告诉总线端点消息映射。我通常使用 app.config 来指定这一点，它适用于我的 WPF 应用程序（我不是 WPF 专家）。

看来 app.config 没有在我的 WPF 应用程序中被读取或出现问题...我的启动代码看起来像这样（在 winforms 或控制台应用程序中运行良好）

```
 Bus = Configure.With()
            .AutofacBuilder(container)
            .XmlSerializer()
            .MsmqTransport().IsTransactional(true).PurgeOnStartup(false)
            .UnicastBus().ImpersonateSender(false).LoadMessageHandlers()
            .CreateBus()
            .Start(); 
```

有什么建议么...

最终，我希望将消息发送到集中存储的端点映射，以便所有桌面应用程序都可以在启动时读取它，即。所有客户端都可以访问的中央数据库。如何以这种方式配置总线的示例将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T09:00:35.667

只是添加到上面接受的答案：调用方法的顺序很重要。就我而言，除非直接在 Configure.With() 之后，否则我无法让 DefineEndpointName() 工作

```
 Bus = Configure.With()
            .DefineEndpointName("WPFSubscriber")
            .DefiningEventsAs(t => t.Namespace != null && t.Namespace.StartsWith("MyMessages"))
            .Log4Net()
            .DefaultBuilder()
            .XmlSerializer()
            .MsmqTransport()
            .IsTransactional(true)
            .PurgeOnStartup(false)
            .UnicastBus().
            ImpersonateSender(false)
            .LoadMessageHandlers()
            .CreateBus()
            .Start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T12:37:05.537

根据错误，只需将其添加到您的初始化中：

```
 Bus = Configure.With()
        .AutofacBuilder(container)
        .DefineEndpointName("ENDPOINTNAME")
        .XmlSerializer()
        .MsmqTransport().IsTransactional(true).PurgeOnStartup(false)
        .UnicastBus().ImpersonateSender(false).LoadMessageHandlers()
        .CreateBus()
        .Start(); 
```

这也将成为您的输入队列名称。

# django - Django 缓存登录/注销响应

> ID：10495225
> 
> 赞同：1
> 
> 时间：2012-05-08T08:33:54.053
> 
> 标签：django

我在基于 Django 的应用程序上有这种奇怪的行为：

1.  登录后，用户再次被重定向到登录页面
2.  注销后，用户被重定向到登录页面（正确），但其会话没有被删除

会不会是缓存问题？

两者都是 POST 请求，所以它们永远不应该被缓存！

# eclipse-plugin - 将滚动条设置为表格查看器

> ID：10495231
> 
> 赞同：0
> 
> 时间：2012-05-08T08:34:13.670
> 
> 标签：eclipse-plugin, eclipse-rcp

我在 tableviewer 中设置 scollbar 时遇到了一个问题。我在一张桌子上有大约数千条记录。这意味着千行。我编辑了最后一行并按下回车键。当我按下回车键时，滚动条从表格上升。即它将转到表格的第一行。所以我必须再次向下滚动才能看到已编辑的行。我怎样才能确保当我按下回车键时滚动条应该留在那里。它不应从上次的位置移动。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:12:28.070

使用以下 API 滚动表格。您可以使用其中任何一种。

```
table.setTopIndex(int rowNo);
table.setSelection(int selection);
table.showSelection(); 
```

（或者）

```
viewer.reveal(Object obj); 
```

希望你得到你一直在寻找的东西。

# javascript - Facebook 评论插件一直卡在加载中——是 Facebook 还是我的代码？

> ID：10495233
> 
> 赞同：1
> 
> 时间：2012-05-08T08:34:32.137
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-comments

我在我们的网站上嵌入了 Facebook 评论插件，由于某种原因，评论插件卡在永久加载状态，如下所示：

![Facebook评论插件永久加载](../Images/1943e25ab71089ea6919bcc8d0f7728c.png)

我不确定这是 Facebook 问题还是我的代码。这是我在开始`<body>`标签之后的内容：

```
<div id="fb-root"></div>
<script>
   window.fbAsyncInit = function () {
      FB.init({ appId: '1234567890', cookie: true, oauth: true });
   };
   (function (d) {
      var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
      if (d.getElementById(id)) { return; }
      js = d.createElement('script'); js.id = id; js.async = true;
      js.src = "//connect.facebook.net/en_US/all.js";
      ref.parentNode.insertBefore(js, ref);
   } (document));
</script> 
```

（1234567890 是我的实际 appID 所在的位置）

在我想显示 Facebook 评论插件的页面上，我有这个：

```
<div class="fb-comments" data-href="http://mydomain.com" 
     data-num-posts="2" data-width="580"></div> 
```

据我所知，这一切都应该有效。但是，我没有看到任何关于此的 FB 错误，我也没有在其他网站上看到问题。所以我猜这是我的代码？

我什至尝试使用 FB 开发者网站上的代码生成器给出的确切代码：

```
<div id="fb-root"></div>
<script>
    (function (d, s, id) {
       var js, fjs = d.getElementsByTagName(s)[0];
       if (d.getElementById(id)) return;
       js = d.createElement(s); js.id = id;
       js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=1234567890";
       fjs.parentNode.insertBefore(js, fjs);
    } (document, 'script', 'facebook-jssdk'));
</script> 
```

不幸的是，这也不起作用。

希望有人帮助我指出正确的方向！

**更新：**我试过把我的 AppID 放在这个小提琴（[http://jsfiddle.net/Rw79Q/](http://jsfiddle.net/Rw79Q/)）中，它可以工作。所以我的代码中有一些东西导致了这个问题。不知道它可能是什么，我不能在这里分享我的整个代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:11:29.767

```
window.fbAsyncInit = function () {
   ({ appId: '1234567890', cookie: true, oauth: true });
}; 
```

该函数的主体实际上不应该是一个参数吗？`({ appId: '1234567890', cookie: true, oauth: true });`在函数体中创建一个对象字面量，然后什么也不做。这相当于写：

```
window.fbAsyncInit = function () {}; 
```

这是没用的。

您的其余代码看起来可以正常工作，但目前我手头没有有效的应用程序 ID / 域可供测试。将您的应用程序 ID 和域放在这个小提琴中，看看它是否有效：http: [//jsfiddle.net/Rw79Q/](http://jsfiddle.net/Rw79Q/)

* * *

从聊天讨论来看，该页面必须位于实时服务器上，否则您将获得“无限加载”行为。我能够使用本地`file:`URI 重新创建该行为。希望一旦您将其投入生产，问题就会消失。

# facebook - facebook喜欢按钮奇怪的行为

> ID：10495236
> 
> 赞同：1
> 
> 时间：2012-05-08T08:35:00.393
> 
> 标签：facebook, facebook-like

我们正在使用类似 fb 的按钮，效果很好。最近看起来点击它在点击后没有任何指示（按钮看起来没有被点击，计数器保持为 0），尽管该操作已按预期发布到用户 Facebook 时间线。

我已经用 facebook linter 页面测试了我的页面，页面看起来还不错。我已经用 facebook js 测试页面对其进行了测试，并得到了完全相同的行为[http://developers.facebook.com/tools/console/](http://developers.facebook.com/tools/console/)（转到*示例*并选择“does-like”示例，然后运行它然后你'会得到一个没什么多说的错误）。

最近有人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:23:00.303

我们在这里有同样的问题，所以我认为这可能是 facebook 错误或他们最近的一些变化。单击使用 [http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)生成的赞按钮没有任何指示。如果选中则不会取消选中，如果未选中则不会选中。Facebook 调试工具没有显示任何错误甚至警告。按钮属性：发送按钮：未选中，布局样式：button_count，显示面孔：false

我们使用 iframe 代码将其放置在页面上。在这里您可以找到我们使用的示例代码：http: [//jsfiddle.net/7nHEs/2/](http://jsfiddle.net/7nHEs/2/)

我测试了 XFBML 而不是 iframe，它似乎可以工作。所以这可能是解决方案。另一方面，我不想在我的所有应用程序中将上周工作的所有 iframe 按钮更改为 XFBML。

# jquery - jsonp，WCF 错误请求错误

> ID：10495238
> 
> 赞同：0
> 
> 时间：2012-05-08T08:35:32.647
> 
> 标签：jquery, wcf, jsonp

我有一个 WCF 服务以 json 格式返回数据，但是由于访问控制允许来源，我被迫将 jsonp 与 jquery 一起使用，问题是 jsonp 向传递的 URL 添加了一个回调函数以检索 json 数据，这导致一个错误的请求，我想知道服务器端是否有任何方法可以告诉它忽略通过 URL 传递的任何回调函数，或者对这个问题进行一些快速修复，而不是完全重新编程服务器。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:02:51.903

[这](http://msdn.microsoft.com/en-us/library/cc716898.aspx)是描述如何在 WCF 中使用 JSONP 的示例。可能您需要在项目中添加下一个文件。

```
JSONPBehavior.cs
JSONPBindingElement.cs
JSONPBindingExtension.cs
JSONPEncoderFactory.cs 
```

# javascript - 如何通过Javascript更改伪：before元素的内容值

> ID：10495243
> 
> 赞同：52
> 
> 时间：2012-05-08T08:35:56.200
> 
> 标签：javascript, jquery

我有由 CSS 构造的图，它是由 JS 动态更改的。我通过伪元素将图形最大值显示为：

```
.graph:before {
    content:""; //value that want set by JS
    position:absolute;
    top:0;
    left:0;
} 
```

这就是为什么我需要通过 JS 设置这个值。我试过`$(".graph:before").css("content", hh);`但没有帮助。如何获得该值？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2017-02-02T10:44:12.687

我希望下面的代码片段可能会有所帮助，您可以使用 CSS函数`content`通过 JS 指定您想要的值。[`attr()`](https://developer.mozilla.org/en-US/docs/Web/CSS/attr)下面有两个选项：使用 JavaScript 或 jQuery：

jQuery：

```
$('.graph').on('click', function () {
    //do something with the callback
    $(this).attr('data-before','anything'); //anything is the 'content' value
}); 
```

JavaScript：

```
var graphElem = document.querySelector('.graph');
graphElem.addEventListener('click', function (event) {
    event.target.setAttribute('data-before', 'anything');
}); 
```

CSS：

```
.graph:before {
    content: attr(data-before); /* value that that refers to CSS 'content' */
    position:absolute;
    top: 0;
    left: 0;
} 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-05-08T08:37:40.837

*更新（2018 年）*：如评论中所述，您现在[可以](https://stackoverflow.com/a/42000085/790695)执行此操作。

您不能通过 JavaScript 修改伪元素，因为它们不是 DOM 的一部分。你最好的办法是在你的 CSS 中用你需要的样式定义另一个类，然后将它添加到元素中。由于您的问题似乎不可能，因此您可能需要考虑使用真正的 DOM 元素而不是伪元素。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2018-05-22T13:34:54.040

您可以使用 CSS 变量

```
:root {
  --h: 100px;
}

.elem:after {
  top: var(--h);
}

let y = 10;

document.documentElement.style.setProperty('--h', y + 'px') 
```

[https://codepen.io/Gorbulin/pen/odVQVL](https://codepen.io/Gorbulin/pen/odVQVL)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-10-01T02:03:32.680

我相信有一个简单的解决方案，使用 attr() 函数来指定伪元素的内容。这是一个使用 'title' 属性的工作示例，但它也应该适用于自定义属性。：

```
document.getElementById('btn_change1').addEventListener("click", function(){
    document.getElementById('test_div').title='Status 1';
});

document.getElementById('btn_change2').addEventListener("click", function(){       
    document.getElementById('test_div').title='Status 2';
});
```

```
#test_div {
   margin: 4em;
   padding:2em;
   background: blue;
   color: yellow;
}

#test_div:after {
   content:attr(title);
   background: red;
   padding:1em;
}
```

```
<button id='btn_change1'>Change div:after to [Status 1]</button>
<button id='btn_change2'>Change div:after to [Status 2]</button>

<div id='test_div' title='Initial Status'>The element to modify</div>
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-11-14T13:42:17.877

仍在寻找相同问题的解决方案的人，可以使用 jQuery 进行如下操作：

```
<button id="changeBefore">Change</button>
<script>
    var newValue = '22';//coming from somewhere
    var add = '<style>.graph:before{content:"'+newValue+'"!important;}</style>';
    $('#changeBefore').click(function(){
        $('body').append(add);
    });
</script> 
```

此示例说明单击 button:`changeBefore`时，其值`.graph:before`将根据其新的动态即将到来的值而变化。

有关更改`:before`或`:after`元素样式或获取其内容的更多描述：

让我们假设你的 HTML 是这样的：

```
<div id="something">Test</div> 
```

然后你在 CSS 中设置它的 :before 并像这样设计它：

```
#something:before{
   content:"1st";
   font-size:20px;
   color:red;
}
#something{
  content:'1st';
} 
```

请注意，我还在`content`元素本身中设置了属性，以便您以后可以轻松地将其取出。现在有一个`button`点击，您想将 :before 的颜色更改为绿色，并将其字体大小更改为 30px。您可以按如下方式实现：

在某些类上定义具有所需样式的 css `.activeS`：

```
.activeS:before{
   color:green !important;
   font-size:30px !important;
 } 
```

现在您可以通过将类添加到您的 :before 元素来更改 :before 样式，如下所示：

```
<button id="changeBefore">Change</button>
<script>
    $('#changeBefore').click(function(){
        $('#something').addClass('activeS');
    });
</script> 
```

如果您只想获取 的内容`:before`，可以这样做：

```
<button id="getContent">Get Content</button>
<script>
    $('#getContent').click(function(){
        console.log($('#something').css('content'));//will print '1st'
    });
</script> 
```

*我希望它有帮助*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-12T09:42:59.053

我有一个类似的问题，但有图标。我需要在 html5 中切换音频播放器的播放和暂停图标。

这里的问题是，由于使用了 \ 符号，HTML、CSS 和 jQuery 都以不同的方式解释“内容”值来显示图标。

所以最好的解决方法是删除并重新创建节点。这是我的代码：

```
<ul class="list list--buttons">
    <li><a href="#" class="list__link previuos"><i class="fa fa-step-backward"></i></a></li>

    <li><a href="#" class="list__link playpause"><i class="fa fa-play"></i></a></li>

    <li><a href="#" class="list__link next"><i class="fa fa-step-forward"></i></a></li>
</ul> 
```

还有剧本

```
<script type="text/javascript">
            $(
                function(){
                    var aud = $('audio')[0];
                    $('.playpause').on('click', function(e){
                        e.preventDefault();
                    if (aud.paused) {
                        aud.play();
                        /* from play icon to pause icon */
                        $('.playpause .fa-play').remove();
                        $('.playpause').append('<i class="fa fa-pause"></i>');
                    }
                    else {
                        aud.pause();
                        /* from play icon to pause icon */
                        $('.playpause .fa-pause').remove();
                        $('.playpause').append('<i class="fa fa-play"></i>');
                    }

                })
                $('.next').on('click', function(e){
                    e.preventDefault();
                    aud.src = '{$content:audio-file}';
                })
                $('.previuos').on('click', function(e){
                    e.preventDefault();
                    aud.src = '{$content:audio-file}';
                })
                aud.ontimeupdate = function(){
                    $('.progress').css('width', aud.currentTime / aud.duration * 100 + '%')
                }
            })
        </script> 
```

希望能帮助到你！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-13T10:30:47.327

您可以使用 document.styleSheets 修改伪选择器 cssRules

```
document.styleSheets[0].cssRules[0].style.content = '"111"'; 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2019-02-20T11:34:12.333

如果您使用类似 onoffswitch 的东西[并希望使用 i18next](https://bootsnipp.com/snippets/v7x77)[转换](https://www.i18next.com/)css 内容属性，那么您可以使用来自[github （i18next Jquery 框架）的](https://github.com/i18next/jquery-i18next/blob/master/example/sample.html)[i18next 框架](https://www.i18next.com/overview/supported-frameworks)示例之一，然后使用以下代码扩展该功能：

```
var before = i18next.t('onoffswitch.before');
var after = i18next.t('onoffswitch.after');
$('.onoffswitch-inner')
    .attr('data-before', before )
    .attr('data-after', after ); 
```

并且css代码必须是这样的：

```
.onoffswitch-inner:before {
    content:  attr(data-before);
    padding-left: 10px;
    background-color: #65AFF5; color: #FFFFFF;
}
.onoffswitch-inner:after {
    content:  attr(data-after);
    padding-right: 10px;
    background-color: #EEEEEE; color: #999999;
    text-align: right;
} 
```

# ios - iOS 嵌套视图层次结构支持拖放功能以允许最终用户配置表单

> ID：10495244
> 
> 赞同：4
> 
> 时间：2012-05-08T08:36:05.193
> 
> 标签：ios, uitableview, uiview, uiviewcontroller, uiscrollview

我正在构建一个原生 iOS 应用程序，它允许最终用户通过从自定义控件的工具箱中拖放来构建表单。一个典型的场景是高级用户在 UIView 上拖动一些 UILabel 和 UITextField 表示。将支持控件组，允许在一个部分中可视地包含多个控件。整个内容可能包含在 UIScrollView 中，允许在“页面​​”之间水平滚动。

然后，“普通”用户将使用该表格进行数据输入。

所以，我有两个相关的要求：允许布局和分组不同类型的 UIView/UITableView/UIImageView/UILabelView/UITextField 等（并且可能包含在外部 UIScrollView 中），并允许调整/拖动布局/由超级用户掉落。

我的问题相当广泛，但本质上是这样的：支持这两个相关要求的最合适的嵌套 UIView 层次结构是什么？如果我想在 UITableView 内的嵌套视图中拖放，那么包含在外部 UIScrollView 中的 UITableViews 的基本结构是否基本合理？我应该避免使用 UITableView，因为它会使拖动变得复杂吗？

我很欣赏这个问题在范围上是主观的，但我真的很感谢那些以前做过这类事情的人的一些指导，他们对我有一些智慧的话。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:54:45.737

听起来像一个有趣的应用程序！我会说使用 a`UITableView`会使应用程序变得非常复杂。A`UIScrollView`将是拖放控件的良好基础。也许使用“添加页面”按钮，用户可以点击它需要的按钮，您可以将 扩展`contentSize`为`UIScrollView`+1 页面的宽度，然后滚动它以便用户可以将更多控件拖动到该页面上。

要拖动控件，您可以使用附加到每个控件的 UIPanGestureRecognizer，并在触发时更改控件的中心位置。您可能需要关闭其中一些控件的用户交互 - 例如，`UITextField`高级用户希望将其拖动但不想在其中输入值。

对于分组控件，您可以执行以下操作：

*   “组模式”，用户点击按钮进入此模式，然后点击多个控件（需要一些视觉指示以显示它们已被选中），然后点击完成。
*   然后从 UIScrollView 中删除选定的控件
*   一个新的 UIView 被创建并定位在所选控件的中心点，并且足够大以使控件能够以相同的距离容纳。它被添加为滚动视图的子视图
*   控件都添加为此视图的子视图
*   手势识别器被添加到这个视图中，而不是单独的控件。然后在左右拖动时，这组控件都会作为一个固定布局的组移动。

如果您有一组您认为可能常用的控件，您甚至可以提前创建它们，每个都在自己的 nib 中，然后允许用户将它们作为预制组拖到滚动视图上。

您可能会发现，特别是如果您的某些控件非常大（例如，我希望图像视图比标签或文本字段大得多），平移手势识别器会受到一些限制，因为在尝试拖动视图时如果它们位置靠近或重叠，您会无意中选择错误的。在这种情况下，您可能需要自己处理所有触摸事件的额外精度 - 因此，当触摸开始时，您测试所有控件（或组）以查看哪个具有最接近您的点击位置的中心，然后当您获取触摸移动事件，您可以更新此中心位置。

我没有做任何像你描述的那样复杂的东西，但我确实做了一个应用程序，用户可以将小图像拖到大图像上以用作“装饰”。他们可以拖动任意数量的这些装饰，也可以通过捏合手势来缩放它们。在这种情况下，我有一个 UIImageView 作为包含主图像的背景。然后装饰物位于图像的边缘，并且使用平移手势识别器来检测它们被拖到图像上。在拖动时，我实际上会创建一个新的装饰实例 (UIImageView)，这样工具箱中总会有另一个。用户使用捏合手势识别器来缩放装饰。为了让用户在他们已经放置的装饰品周围移动，我不得不使用手动触摸处理来检测正确的装饰（因为它们很容易重叠，而在用户看来，就 UIViews 而言实际上是方形的，所以用户很容易不小心拖动一个角当他们打算拖另一个时）。混合匹配的手势识别器和手动触摸处理似乎效果很好，这很好，因为它更容易使用手势识别器来处理更复杂的行为，比如捏合。

回到您的应用程序，一旦您的高级用户设置了所有内容，然后当普通用户加载应用程序时，您可以关闭任何触摸处理代码（并删除或不创建手势识别器），他们将获得静态表单按照高级用户的规定。然后确保在所有控件（例如`UITextField`）上启用了用户交互，并且他们将能够向其中输入数据。

我认为在滚动视图上使用控件执行上述所有操作将非常复杂，并且您最终可能不得不处理许多琐碎的行为，以使其对普通用户和高级用户都很好地工作。`UITableViews`我认为，如果您同时处理和处理，这将困难 100 倍`UITableCells`。

如果您希望我详细说明我在上面概述的应用程序的任何方面，请告诉我，因为它似乎与您的应用程序有相当多的功能。希望将来能看到/听到更多关于您的应用的信息！

**编辑**

我又想到了一件事——如果您热衷于`UITableView`在您的解决方案中使用 a，那么我建议您的高级用户一次布置一个`UITableViewCell`。事实上，他们会将`UILabels`其他控件拖到一个基本的 UIView 上，当他们完成后，您可以使用它来记录控件的位置。然后在单元格中显示这些控件时使用这些位置 - 在`cellForRowAtIndexPath`您将创建并初始化所有选定的控件，并将它们全部放置在新创建的单元格中，并放置在高级用户选择的位置和布局中。高级用户还可以控制更改他们正在布置的单元格的高度，以获得更大的灵活性。他们会一个接一个地创建一系列单元格布局（我猜这些单元格中的每一个都是一个“组”控件），然后这些单元格将在表格视图中按顺序显示。然后，您可以让高级用户将表格置于编辑模式，以便他们可以重新排序单元格（甚至删除一些），从而为高级用户提供一些最终的调整控制。

根据应用程序的不同，也许用户还可以让他们之前创建的这些单元格布局始终可用，因此在他们建立了一些公共控制组之后，他们可以继续重复使用它们以非常快速地建立一个表单。然后偶尔他们会创建一个新的单元格布局，当他们迄今为止创建的单元格布局都不合适时，它会再次保存为模板，供他们在未来的表单中再次使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T22:18:26.550

我只会创建一个 EditView 类，它只是一个带有一些透明背景颜色的 UIView。当您想拖动控件时，请设置某种类型的编辑模式，您可以在所有适当的控件上覆盖一堆 EditView。然后 EditView 将支持您想要调整大小或移动它的任何手势/触摸处理。将一个视图拖到另一个视图上并释放可能会提示“在视图 B 中嵌套视图 A？” 然后您可以进行相关的 addSubview 调用。

在滚动视图中嵌套表格视图不会成为问题，但我不确定如果您尝试将任何内容嵌套在表格视图中会出现什么样的行为......必须使用标准 UITableView 方法指定。

为了保存布局等，您可能需要创建自己的伪视图层次结构，其中包含重新创建最终布局所需的各种元数据，然后您可以将其存储在某处。

# visual-studio - 如何在 SharePoint 2010 中从一个站点列表到另一个站点列表进行多重查找？

> ID：10495245
> 
> 赞同：0
> 
> 时间：2012-05-08T08:36:07.270
> 
> 标签：visual-studio, list, sharepoint, sharepoint-2010, lookup

我在 SharePoint 站点中定义了一个列表，例如国家列表。

在另一个站点中，我有一个列表，该列表需要具有对上述国家列表进行多重查找的列。（所以这两个站点是不同的站点）

如何在 SharePoint 2010 中配置它？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:08:10.573

这是可能的，但需要一些编程或脚本，因为无法使用 Web UI 配置跨站点查找字段。PowerShell 代码应如下所示：

> $web1 = Get-SPWeb "http://site/web1"
> $web2 = Get-SPWeb "http://site/web2"
> $list = $web1.Lists["我的列表"]
> $lookupList = $web2.Lists ["我的查找列表"]
> $list.Fields.AddLookup("MyCrosssiteLookup", $lookupList.ID, $web2.ID, $false)
> $lookupField = list.Fields.GetFieldByInternalName(InternalName)
> $lookupField.Title = "我的十字架站点查找"
> $lookupField.Update()

或者，您可以使用 LookupWithPicker 字段类型，它具有 Web UI 控件来配置跨站点查找：http: [//ilovesharepoint.codeplex.com/releases/view/44989](http://ilovesharepoint.codeplex.com/releases/view/44989)。

# visual-studio-2010 - 在 Visual Studio 2010 中使用 RasGetEapUserIdentity 的链接器错误

> ID：10495252
> 
> 赞同：0
> 
> 时间：2012-05-08T08:36:53.307
> 
> 标签：visual-studio-2010, winapi, linker

翻译自谷歌翻译：

我尝试使用 just `RasGetEapUserIdentity`，但不幸的是我在编译时失败了。

# 输出

`meinprogrammname.obj: error LNK2019: unresolved external symbol "_RasGetEapUserIdentityW@20" in function "_wmain".`

如果链接器 -> 输入 -> 附加依赖项下的属性 ([ALT] + [F7]) `rasdial32.lib`，则放置：

`LINK: fatal error LNK1104: File "rasdial32.lib" can not be opened.`

在创建 Windows 控制台应用程序时有一个新项目。更改设置我没有做。

* * *

# 原帖：

ich versuche gerade `RasGetEapUserIdentity`zu benutzen, ich scheitere jedoch leider schon bei der Kompilierung。

# stdafx.h：

```
#include <stdio.h>
#include <tchar.h>
#include <atlbase.h>
#include <Windows.h>
#include <WinNT.h>
#include <Ras.h> 
```

# 奥斯加贝

`meinprogrammname.obj : error LNK2019: Verweis auf nicht aufgelöstes externes Symbol "_RasGetEapUserIdentityW@20" in Funktion "_wmain".`

Wenn unter Eigenschaften ([ALT]+ [F7]) unter Linker -> Eingabe -> Zusätzliche Abhängigkeiten hinzugefügt `rasdial32.lib`wrd, erscheint:

`LINK : fatal error LNK1104: Datei "rasdial32.lib" kann nicht geöffnet werden.`

Es ist ein neues Projekt als Windows Konsolenanwendung angelegt worden。Änderungen an Einstellungen habe ich keine vorgenommen。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:39:04.710

尝试在您的附加依赖项中替换`rasdial32.lib`为。`rasapi32.lib`

# java - 尝试调用 CXF/SOAP Web 服务时出现 LinkageError

> ID：10495254
> 
> 赞同：2
> 
> 时间：2012-05-08T08:36:57.703
> 
> 标签：java, soap, cxf, jboss6.x, linkageerror

我有一个项目（比如 myproject），其中托管了 CXF RESTful 服务和 CXF WS/SOAP 服务，并在 JBoss (6.0.0.FINAL) 上运行。我们内部所有系统都使用RESTful接口，第三方系统使用SOAP接口（作为回调接口）

以下 URL 工作正常。

*   REST URL：（`http://localhost:8080/myproject/internal/someOperation` 和`content-type: application/json`POST 正文）

*   SOAP WSDL：`http://localhost:8080/myproject/cbsoap?wsdl`

现在我的问题是实际的 SOAP 调用不成功。我使用 SOAPUI 来尝试 SOAP 调用，但只是为了能够查询 WSDL。我收到以下错误：-

```
javax.servlet.ServletException：Servlet 执行引发异常
    org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:67)

根本原因

java.lang.LinkageError：加载程序约束冲突：解析覆盖方法“org.apache.cxf.jaxb.attachment.JAXBAttachmentUnmarshaller.getAttachmentAsDataHandler(Ljava/lang/String;)Ljavax/activation/DataHandler;”时 当前类 org/apache/cxf/jaxb/attachment/JAXBAttachmentUnmarshaller 的类加载器（org/jboss/classloader/spi/base/BaseClassLoader 的实例）及其超类加载器（的实例）具有不同的 Class 对象签名中使用的类型 r
    org.apache.cxf.jaxb.JAXBDataBase.getAttachmentUnmarshaller(JAXBDataBase.java:78)
    org.apache.cxf.jaxb.io.DataReaderImpl.createUnmarshaller(DataReaderImpl.java:123)
    org.apache.cxf.jaxb.io.DataReaderImpl.read(DataReaderImpl.java:156)
    org.apache.cxf.interceptor.DocLiteralInInterceptor.handleMessage(DocLiteralInInterceptor.java:109)
    org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
    org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)
    org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:207)
    org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:209)
    org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:191)
    org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:114)
    org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:185)
    org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:108)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
    org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:164)
    org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:67)

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T10:27:39.117

`LinkageError`JBoss 通常是由您的应用程序打包自己的 JBoss 认为受限的某些库的副本引起的。这些通常是`java.*`和`javax.*`包中的东西。

查看您的堆栈跟踪，我猜罪魁祸首是`javax.activation.DataHandler`. 检查您的应用程序捆绑的 JAR 文件，确保其中没有类似的内容。如果有，则将其删除。

它可能不是`javax.activation.DataHandler`，但可能是它反过来依赖的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:53:45.800

我终于解决了这个问题，但这真的很奇怪。

1.  我添加了 cxf-rt-frontend-jaxws 和 cxf-bundle-rs 作为依赖项，并标记了一些排除项-> jetty-server、gernomino-servlet。
2.  我在 WEB-INF 文件夹下有 beans.xml，但必须将它放在 src/main/resources 下。beans.xml 应该在类路径下，而不是 WEB-INF。

感谢您的回复。

# mysql - 我可以在 xampp 和 mamp (mac amp) 之间共享相同的 mysql 数据库吗？

> ID：10495260
> 
> 赞同：2
> 
> 时间：2012-05-08T08:37:10.090
> 
> 标签：mysql, database, xampp, share, mamp

我正在用 xampp 和 mamp （在 macos x 雪豹上）进行一些测试，有时我在它们之间切换只是为了玩耍，他们每个人在不同的位置都有自己的数据库：

```
xampp in /Applications/XAMPP/xamppfiles/var/mysql/ 
mamp in /Applications/MAMP/db/mysql/ 
```

我不想处理 2 个分离的 mysql db 数据，我只想拥有一个，所以我可以将它共享给 xampp 和 mamp（不是同时）。我可以更新我的数据库而不必担心更新另一个数据库。这种实现是可能的吗？有谁知道如何在没有任何冲突的情况下做到这一点？

我正在使用mac（所以它是mamp），但这也可以在其他系统上实现。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:36:44.260

我在 Linux 上做了类似的事情。我需要运行两个不同版本的 PHP，但使用一个 MySQL 数据库。我在 Linux 中正常安装了 Apache/PHP，还安装了 XAMPP 来运行不同版本的 Apache/PHP。

您的设置类似，因此以下内容应该可以工作，以便 MAMP 和 XAMPP 都使用 MAMP MySQL 数据库。

我更改了 XAMPP 中的 PHP 配置以使用我的主 MySQL 数据库。像这样：

*   在 XAMPP 中找到文件 php.ini（我的是在 XAMPP 的 etc/ 文件夹中）。

*   在您选择的文本编辑器中打开文件并找到它用于 MySQL 的默认套接字。

*   将此更改为使用 MAMP 提供的套接字。

    ```
     mysql.default_socket = /path/to/mamp/mysqld/mysqld.sock 
    ```

*   保存文件并在 XAMPP 中重新启动 Apache。

*   不再需要在 XAMPP 中启动 MySQL，因为 PHP 应该使用来自 MAMP 的套接字连接。

*   XAMPP 现在应该使用 MAMP 中的数据库。

这*应该*工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:54:04.917

我认为这应该是可能的。尝试以下技术。

您可以启动 XAMPP。现在您的 XAMPP 的 Apache 和 PHP 将与 XAMPP 的 mysql 一起使用。

您可以启动 XAMPP，然后停止 XAMPP 的 Apache 和 PHP 服务。然后启动 MAMP。停止 MAMP 的 mysql 服务。现在你的 Apache 和 MAMP 的 PHP 将与 XAMPP 的 mysql 一起工作。

# ios - pushViewController 后无法显示 UITabBarController

> ID：10495262
> 
> 赞同：0
> 
> 时间：2012-05-08T08:37:20.777
> 
> 标签：ios, objective-c, uitabbarcontroller, uistoryboard, pushviewcontroller

这是我的流程：

1.  带有登录按钮的公共屏幕

2.  单击登录按钮将显示模态屏幕

3.  成功登录后，我将 a 推`UIViewController`送到主屏幕，该屏幕在我的故事板中设计为具有 3 个不同视图的选项卡栏控制器

4.  它确实推动了预期的观点，但`UITabBar`底部的消失了。所以应该在里面的视图`UITabBarController`缺少底部栏，我无法导航。

我该如何解决这个问题？还是我应该做其他事情而不是`pushViewController:`？

谢谢。

# c# - Assembly.Load 处理器架构规则

> ID：10495263
> 
> 赞同：1
> 
> 时间：2012-05-08T08:37:23.177
> 
> 标签：c#, reflection

加载程序集时，应使用 assembly.FullName 而不是 assembly.Name，以避免冲突，其格式如下：

“SampleAssembly，版本=1.0.2004.0，文化=中性，PublicKeyToken=8744b20f8da049e3”

从 MSDN 文档中，此字符串还可以包括“ProcessorArchitecture=????” 在哪里 ？？？？可以是 MSIL、X86 等，但是是可选的。

当在 assemblyName 字符串中未定义 ProcessorArchitecture 属性时，Assembly.Load 使用什么规则来查询 GAC 以加载为多个处理器架构（x86、Amd64、MSIL）编译的程序集？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:03:59.563

它是隐含的。到您的 Assembly.Load() 语句运行时，加载程序 shim 已经决定进程是在 32 位还是 64 位模式下运行。因此，例如，当它决定使用 64 位模式时，只有以 msil 或 amd64 为目标的程序集才能工作。

GAC 分为 3 个部分，子目录名称为 GAC_MSIL、GAC_32 和 GAC_64。融合加载程序将首先在 GAC_MSIL 中查看是否可以找到匹配的程序集。然后在另外两个中的*一个中寻找匹配。*没有歧义。

# android - 在Android中的一个角落将半径边框绘制到imageview或textview

> ID：10495265
> 
> 赞同：2
> 
> 时间：2012-05-08T08:37:27.267
> 
> 标签：android, css

我需要在我的应用程序中为 imageview 或 textview 绘制边框，但我只需要在一个角落绘制它，就像图像一样。

![在此处输入图像描述](../Images/9a1602825922398d14f4ed4ff881a101.png)

我做了一个形状，但我在所有 4 个方面都有边框：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <stroke android:width="1px" android:color="#FF000000" />
    <solid android:color="#ffffffff"/>  
    <padding android:left="1px" android:top="1px"
        android:right="0px" android:bottom="0px" />
    <corners android:topLeftRadius="8px" /> 
</shape> 
```

我怎样才能使它像图像中一样？

谢谢， 马蒂亚

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T09:33:40.980

使用此代码将解决它：

```
<?xml version="1.0" encoding="utf-8" ?> 
 <layer-list xmlns:android="http://schemas.android.com/apk/res/android">
  <item>
   <shape android:shape="rectangle">
    <solid android:color="#FF0000" /> 
     <corners android:topLeftRadius="15dp" /> 
    </shape>
 </item>
<item android:left="10dp" android:top="10dp">
  <shape android:shape="rectangle">
   <solid android:color="#000000" /> 
    <corners android:topLeftRadius="15dp" /> 
  </shape>
 </item>
</layer-list> 
```

您还必须在（布局 Xml）中进行调整：

安卓：布局宽度

机器人：布局高度

安卓：填充顶部

安卓：paddingLeft

这是输出：

![在此处输入图像描述](../Images/d88619a6388a1140426764b065ef7bb6.png)

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-14T06:48:42.277

这就是我实现的方式。使用`inset`drawable，我们可以轻松实现这一点，并且我们可以用更少的代码进行更多的定制。用这个`twoside_border.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- inset: It can remove border from any other side-->
<inset xmlns:android="http://schemas.android.com/apk/res/android"
android:insetBottom="-15dp"
android:insetRight="-15dp">

<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/rectangle">
    <stroke
        android:width="20dp"
        android:color="#ED302F" />

     <!--<corners
        android:topLeftRadius="20dp"
       />-->

    <!--<solid android:color="#f50a0a" />-->
</shape> 
```

`insetBottom`& `insetRight` **-dp** values 有助于隐藏我们不需要的边框并作为输出：

[两侧边框图像](http://i.stack.imgur.com/3a3T1.png)

要获得拐角曲线，请删除上面代码中的注释行

```
<corners android:topLeftRadius="20dp"/> 
```

现在我们可以看到曲线弯曲

[带有曲线图像的边框](http://i.stack.imgur.com/uxbm1.png)

`xml`在下面我如何使用它`frame layout`并根据您的需要调整填充或边距，使其适合看起来像框架的边框图像。

```
<FrameLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">

            <ImageView
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"

                android:paddingLeft="5dp"
                android:paddingRight="5dp"
                android:paddingTop="5dp"
                android:scaleType="centerCrop"
                android:src="@drawable/your_image_file" />

            <ImageView
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:background="@drawable/twoside_border" />

        </FrameLayout> 
```

# regex - 正则表达式 - 将数字与常量进行比较

> ID：10495267
> 
> 赞同：2
> 
> 时间：2012-05-08T08:37:35.467
> 
> 标签：regex

如果我想匹配所有小于 2000 的数字，我使用 Regex

```
 [01]{1}[0-9]{3} 
```

如果我想匹配 1 到 5 之间的所有数字，我使用表达式

```
 [2-4]{1} 
```

但是如果我想匹配 5 到 123 之间的所有数字呢？

有没有这样的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:43:56.610

要匹配 > 5 和 < 123 的数字，请尝试：

```
[6-9]|[1-9][0-9]|1[0-1][0-9]|12[0-2] 
```

有关更多信息，请查看：[使用正则表达式匹配数值范围](http://www.regular-expressions.info/numericranges.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T08:40:41.583

把它分成不同的部分：

[6-9]|[1-9]\d|1[0-1]\d|12[0-2]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T09:21:25.607

如果我需要这样做，我可能会使用这个：

```
([^0-9]+) 
```

然后将捕获组解析为整数（除非您使用的是动态语言，否则它已经是 one ），您可以对其执行任何数字操作。

# android - 长按时显示警报对话框

> ID：10495269
> 
> 赞同：0
> 
> 时间：2012-05-08T08:37:48.887
> 
> 标签：android, dialog, onclick, android-alertdialog, onlongclicklistener

我有一个 listView 和一个 onClickListener ， onClick 可以做一些事情并且它可以工作。现在我想在LongClick 上显示一个AlertDialog 但没有任何反应。我也添加`android:longClickable="true"`到清单中的 ListView 中，但仍然没有任何反应。

```
listView.setOnLongClickListener(new OnLongClickListener() {

    public boolean onLongClick(View v) {

        final CharSequence[] items = {"Revansch!", "Lägg till som vän","Ta bort spelet"};

        AlertDialog.Builder builder = new AlertDialog.Builder(ChallengeList.this);

        builder.setItems(items, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int item) {
                Toast.makeText(getApplicationContext(), items[item], Toast.LENGTH_SHORT).show();
            }
        });
        AlertDialog alert = builder.create();
        alert.show();
        return true;

    }

}); 
```

有谁知道为什么它不起作用？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T08:47:06.167

试试这个，

```
listView.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {
    @Override
    public boolean onItemLongClick(AdapterView<?> av, View v, int pos, final long id) {

       final CharSequence[] items = {"Revansch!", "Lägg till som vän","Ta bort spelet"};
       AlertDialog.Builder builder = new AlertDialog.Builder(ChallengeList.this);
       builder.setItems(items, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int item) {
                Toast.makeText(getApplicationContext(), items[item], Toast.LENGTH_SHORT).show();
            }
        });
        AlertDialog alert = builder.create();
        alert.show();

        return true;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:46:13.547

我试过这个。它的工作。

```
myList.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {
        @Override
        public boolean onItemLongClick(AdapterView<?> av, View v, int pos, long id) {
            return onLongListItemClick(v,pos,id);
        }
        protected boolean onLongListItemClick(View v, final int pos, long id) {

            // write code for AlertDialog
            return true;
        }

    }); 
```

您还需要覆盖 onItemLongClick 方法。

# android - 无法在 android 中浏览 facebook 相册

> ID：10495273
> 
> 赞同：0
> 
> 时间：2012-05-08T08:38:04.380
> 
> 标签：android, facebook, facebook-graph-api

我正在制作一个应用程序，我想在其中浏览 facebook 的所有相册。我使用了以下教程。

[http://huguesjohnson.com/programming/java/android-fb-album/](http://huguesjohnson.com/programming/java/android-fb-album/)

但无法获取单个数据。我收到来自 facebook 服务器的空响应。

谁能帮我获取 Facebook 相册及其照片？

这是我的代码。

```
public class getUserImages extends AsyncTask<Void, Void, Void>
    {
        @Override
        protected Void doInBackground(Void... params) 
        {
            try
            {
             //invoke the API to get albums
              long startTime=System.currentTimeMillis();
              RestClient client = new RestClient("https://graph.facebook.com/" + PreferenceData.getUserId(FacebookIntegrationActivity.this) + "/albums?access_token="+mFacebook.getAccessToken());
              String albumsJson=client.execute(0);
              long endTime=System.currentTimeMillis();
              Log.d("==","Time to download albums="+(endTime-startTime)+"ms");
              Log.d("==","Album Json="+albumsJson);
            }
            catch (Exception e) 
            {
                e.printStackTrace();
            }
            return null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:58:12.567

据我所知，您链接到的教程不包含任何身份验证或登录代码 - 我不知道您在多大程度上实现了这一点。从您的代码中，通过“手动”添加访问令牌，您似乎没有使用[Facebook Android SDK](https://github.com/facebook/facebook-android-sdk/)对用户进行身份验证并登录。

[这些示例](https://github.com/facebook/facebook-android-sdk/tree/master/examples)包括使用 SDK 在 Android 上进行身份验证/登录的代码。

您需要向用户请求“user_photos”权限才能成功请求相册数据。

在您验证并登录用户后，您可以通过调用来检索相册

```
mFacebookAsyncRunner.request(USER_ID+"/albums",new AlbumRequestListener()); 
```

其中 AlbumRequestListener 扩展了 SDK 的 RequestListener。

# android - Android 蓝牙 HID 在不同操作系统上的实现

> ID：10495277
> 
> 赞同：0
> 
> 时间：2012-05-08T08:38:36.997
> 
> 标签：android, bluetooth, android-ndk, hid

好吧，我相信这应该能够在Android上实现。

最近，我发现一些 Android 开发者通过以下方式创建了 Android 遥控器（KB/MOUSE）应用程序

将应用程序安装到服务器端（可以是 Windows 或 Mac 或 Linux）系统上，并通过蓝牙相互交互。

但是，我认为如果出现以下情况，则无需在主机端安装应用程序

我们可以利用标准蓝牙 HID 配置文件。

我已经实现了 Android 蓝牙 HID 应用程序，它可以让您的 android 设备作为蓝牙 kb/鼠标输入设备播放。

在不安装任何主机端守护程序的情况下控制我的 Ubuntu。

工程方法涉及 Bluez，因此它不适用于 Mac 或 Windows。

请承担我缺乏蓝牙知识。我真的很好奇这件事的可能性。

如果你们中的任何人对此有任何方法或想法，请分享。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:43:10.903

好吧，开发人员似乎尚未实施此问题。

但是，如果你们中的任何人对如何在 Linux 系统上执行此操作感兴趣。随时给我写一封电子邮件。我很乐意分享这项技能。

# java - Android中另一个选项卡内的选项卡（使用片段）

> ID：10495278
> 
> 赞同：0
> 
> 时间：2012-05-08T08:38:42.087
> 
> 标签：java, android, android-fragments, android-tabs

在我的应用程序（android 2.1）中，我已经使用 Fragments 成功添加了选项卡，并且我使用了 Android 兼容性库 v4。

现在我想在其中一个片段选项卡中添加另一个选项卡，但是 tabwidget 抛出 NullPointerException，我在这里做错了什么？

日志猫：

```
05-08 12:58:57.060: W/dalvikvm(1371): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
05-08 12:58:57.060: E/AndroidRuntime(1371): Uncaught handler: thread main exiting due to uncaught exception
05-08 12:58:57.100: E/AndroidRuntime(1371): java.lang.NullPointerException
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.widget.TabWidget.dispatchDraw(TabWidget.java:206)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.ViewGroup.drawChild(ViewGroup.java:1529)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.ViewGroup.drawChild(ViewGroup.java:1529)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.ViewGroup.drawChild(ViewGroup.java:1529)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.View.draw(View.java:6538)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.ViewGroup.drawChild(ViewGroup.java:1531)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.ViewGroup.drawChild(ViewGroup.java:1529)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.View.draw(View.java:6538)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.support.v4.view.ViewPager.draw(ViewPager.java:1574)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.ViewGroup.drawChild(ViewGroup.java:1531)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.ViewGroup.drawChild(ViewGroup.java:1529)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.ViewGroup.drawChild(ViewGroup.java:1529)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.ViewGroup.drawChild(ViewGroup.java:1529)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.View.draw(View.java:6538)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.widget.FrameLayout.draw(FrameLayout.java:352)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.ViewGroup.drawChild(ViewGroup.java:1531)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.View.draw(View.java:6538)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.widget.FrameLayout.draw(FrameLayout.java:352)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1830)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.ViewRoot.draw(ViewRoot.java:1349)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1114)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1633)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.os.Looper.loop(Looper.java:123)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at android.app.ActivityThread.main(ActivityThread.java:4363)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at java.lang.reflect.Method.invokeNative(Native Method)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at java.lang.reflect.Method.invoke(Method.java:521)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-08 12:58:57.100: E/AndroidRuntime(1371):     at dalvik.system.NativeStart.main(Native Method) 
```

// 子标签片段

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.LinearLayout;

public class Tab3Fragment extends Fragment
{

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    if (container == null) {
        // We have different layouts, and in one of them this
        // fragment's containing frame doesn't exist.  The fragment
        // may still be created from its saved state, but there is
        // no reason to try to create its view hierarchy because it
        // won't be displayed.  Note this is not needed -- we could
        // just run the code below, where we would create and return
        // the view hierarchy; it would just never be used.
        return null;
    }
    return (LinearLayout)inflater.inflate(R.layout.subtab, container, false);
} 
```

}

// subtab.xml

```
<?xml version="1.0" encoding="utf-8"?> 

 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#4C4C4C" >
<TabHost 
android:id="@android:id/tabhost" 
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:padding="2dp"> 

<LinearLayout 
    android:orientation="vertical" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:padding="5dp"> 

    <TabWidget 
        android:id="@android:id/tabs" 
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" /> 

    <FrameLayout 
        android:id="@android:id/tabcontent" 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" >

        </FrameLayout> 
     </LinearLayout> 
    </TabHost>
   </LinearLayout> 
```

# java - 无法让 maven-war-plugin 排除 jaxb jar

> ID：10495288
> 
> 赞同：1
> 
> 时间：2012-05-08T08:39:23.017
> 
> 标签：java, maven, jaxb, maven-3, war

我正在尝试使用`<packagingExcludes>`Maven 战争插件。

这是我的配置：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.2</version>
            <configuration>
                <archive>
                    <manifestEntries>
                        <Implementation-Version>${project.artifactId}-${project.version}-r${buildNumber}</Implementation-Version>
                        <Implementation-Buildtime>${timestamp}</Implementation-Buildtime>
                    </manifestEntries>
                </archive>

                <packagingExcludes>WEB-INF/lib/jaxb*.jar</packagingExcludes>
            </configuration>
        </plugin> 
```

据我了解，这一行：

```
<packagingExcludes>WEB-INF/lib/jaxb*.jar</packagingExcludes> 
```

应该从构建的 .war 文件中排除所有以 'jaxb' 开头的 jar。

但是，在我运行之后，`clean install`我得到了两个：

```
jaxb-api-2.1.jar
jaxb-impl-2.1.3.jar 
```

打包在我的 .war WEB-INF/lib 目录中。

我正在使用 Maven 3。

非常感谢任何帮助。

提前致谢，

* * *

回答 gkamal 的评论。

当我运行时，`mvn war:war -X`我可以看到：

```
[DEBUG] Processing: jaxb-api-2.1.jar
[DEBUG]  + WEB-INF/lib/jaxb-api-2.1.jar has been copied.
[DEBUG] Processing: jaxb-impl-2.1.3.jar
[DEBUG]  + WEB-INF/lib/jaxb-impl-2.1.3.jar has been copied. 
```

还

```
[DEBUG] Excluding [WEB-INF/lib/jaxb*.jar] from the generated webapp archive. 
```

不，异常、警告或错误或任何看起来可疑的东西，我应该寻找什么具体的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T09:01:53.807

这意味着您将它们作为项目中的依赖项，因此它们将被打包到战争中。只需删除依赖项，这样它们就不会被打包了。

根据您使用的选项的文档，您必须使用正则表达式，这意味着您应该编写：

```
<packagingExcludes>WEB-INF/lib/jaxb.*</packagingExcludes> 
```

代替

```
<packagingExcludes>WEB-INF/lib/jaxb*.jar</packagingExcludes> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T11:54:04.917

对于传递依赖，您可以使用`exclusions`元素来排除它。

```
<dependency>
    <groupId>...</groupId>
    <artifactId>...</artifactId>
    <version>...</version>
    <exclusions>
        <exclusion>
            <groupId>javax.xml.bind</groupId>
            <artifactId>jaxb-api-2.1</artifactId>
        </exclusion>
    </exclusions>
</dependency> 
```

正如[gkamal](https://stackoverflow.com/users/672586/gkamal)评论的那样，您还可以在 jaxb 上添加显式依赖并将其范围设置为`provided`，这将覆盖传递依赖的范围，因此不再打包。

另一种选择，war 插件也允许[基于正则表达式进行排除](http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html#packagingExcludes)，但语法涉及更多，以下代码段应排除`lib`文件名以“jaxb”开​​头的所有内容：

```
<packagingExcludes>%regex[WEB-INF/lib/jaxb.*]</packagingExcludes> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-21T11:04:37.517

除了@gkamal 对您的问题的评论（08/05/12@11:52），请检查您的 maven-war-plugin 版本。我自己花了 2 小时查看这个问题，以排除 javaee-api*.jar 的未知瞬态。

使用 maven 3.0.4，我默认使用 maven-war-plugin 版本 2.1（您可以判断您是否在调试中运行构建 - 例如`mvn clean package -X`）。您的其他评论之一是正确的说`package-excludes`在此之后进来。有关详细信息，请参阅[战争插件页面](http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html) （尽管描述条目的实际页面并未指示版本信息，因为这是您首先搜索的内容，所以版本信息很差）。

如果您将 maven-war-plugin 更新到 2.3（添加`<version>2.3</version>`，`packaging-excludes`应该使用您的。请注意，尽管您只会在构建的战争的 WEB-INF/lib 中看到这个，而不是在瞬态战争目录中（其中包括排除的 jar，即使debug 说它们将被排除在外，这在查看此问题时非常令人困惑）。

```
<plugins>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.3</version>
    ...
    <packagingExcludes>
      WEB-INF/lib/whatever-*.jar,
      WEB-INF/lib/javaee-api-*.jar
    </packagingExcludes>
    ...
  </plugin>
  ... 
```

然而，就最佳实践而言，这可能是从战争中排除 jar 的最后一次努力，而临时 jar 的依赖级别排除可能是最精确和正确的方法。也就是说，如果一个瞬态 jar 被多个依赖项引入怎么办？

所以，随着版本升级，我认为[@khmarbaise](https://stackoverflow.com/a/10495614/758831)的解决方案很好（并且表明它不起作用的评论是错误的）。但是，我认为最佳做法是根据您接受的答案使用依赖级别排除项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-09T09:55:09.953

您可以通过指定 inside `<packagingExcludes></packagingExcludes>`inside来做到这一点`</configuration><configuration>`。

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        <artifactId>maven-war-plugin</artifactId>
        <version>3.2.0</version>
        <configuration>
          <packagingExcludes>
            WEB-INF/lib/ex1-*.jar,
            WEB-INF/lib/ex2-logging-*.jar
          </packagingExcludes>
        </configuration>
      </plugin>
    </plugins>
  </build>
  ...
</project> 
```

**您也可以通过通配符**和**正则表达式**指定路径。有关更多信息，请参阅此[链接](https://maven.apache.org/plugins/maven-war-plugin/examples/including-excluding-files-from-war.html)。

# java - SQL 和 Java 返回不同的日期？

> ID：10495290
> 
> 赞同：1
> 
> 时间：2012-05-08T08:39:38.013
> 
> 标签：java, sql, sql-server, date

我正在使用 sqljdbc4.jar 从我的 java 应用程序连接 SQL Server。我的表中有一个日期字段。当我从 Sql Server Management Studio 检查时，它可以正常工作。但是在 java 中，每个日期都缺少 2 天。

例如;

我的日期：2012-01-10

java中的日期：2012-01-08

```
PreparedStatement stmt = conn.prepareStatement("SELECT * FROM table1", ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_READ_ONLY);
ResultSet rs = stmt.executeQuery();
rs.next();
System.out.println(rs2.getDate("dateCol").toString()); 
```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:26:09.563

我刚刚尝试了 sqljdbc4.jar 版本 4，它已修复。版本 2 也没有问题。只有错误的版本是 3。[版本 4 的下载链接](http://www.microsoft.com/en-us/download/details.aspx?id=11774)。

感谢您的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:56:48.850

您使用的是哪个版本的 SQL Server 和哪种数据类型？SQl Server 2008 上有 6 种“日期和时间”[数据类型：](http://msdn.microsoft.com/en-us/library/ms187752.aspx)

```
date
datetimeoffset
datetime2
smalldatetime
datetime
time 
```

Java 或您使用的驱动器可能不支持您使用的那个。特别是如果您使用`Date`的是 SQL Server 2008 中的新功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T09:01:45.380

就像@Eugenio Cuevas 说的，请尝试格式化日期

您可以尝试使用 SimpleDateFormat 和 yyyy.MM.dd 格式而不是 .toString 方法吗？

因为看着你约会的例子；可能就像我在差异为 2 天之前面临的一个问题，因为

1- 2012-01-10 和 2012-01-08 yyyy-mm-dd 2- 12-01-10 和 12-01-08 yy-mm-dd

那是什么导致了我的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T15:09:50.593

几周后，我遇到了类似的问题。我必须在一个键入 sql 日期的 oracle 表中保存一个 java 日期。您不能直接将 java 日期转换为 sql 日期。以下是我所做的。

```
java.util.Date jDate = myObj.getDate();
java.sql.Date sDate = new java.sql.Date(jDate.getTime()); 
```

# testing - PHPUnit --loader：什么是测试套件加载器？

> ID：10495292
> 
> 赞同：2
> 
> 时间：2012-05-08T08:39:48.743
> 
> 标签：testing, phpunit, loader, suite

PHPUnit 手册说：

> 如果您将 PHPUnit 命令行测试运行程序指向一个目录，它将查找 *Test.php 文件。

见：[http ://www.phpunit.de/manual/3.6/en/organizing-tests.html#organizing-tests.filesystem](http://www.phpunit.de/manual/3.6/en/organizing-tests.html#organizing-tests.filesystem)

**这是错误的！**

当我打电话时：

```
phpunit --config myconfig.xml --bootstrap mybootstrap.php tests 
```

它需要**所有**的php文件。

1.  第一个想法是在配置 xml 中使用黑名单或白名单，但后来我意识到，这些列表是测试对象的过滤器和过滤器测试类。
2.  第二个想法是在配置 xml 中使用测试套件。但目前测试套件只能定义，不能通过命令行执行（不是在 PHPUnit 中实现的 jet，票已开放超过 1 年）。
3.  接下来的想法是使用测试套件加载器，但我找不到有关如何使用它们以及 tsl 是否是我认为的文档的文档。

当我运行时：

```
phpunit --config myconfig.xml --bootstrap mybootstrap.php --loader My_Testsuite_Loader tests 
```

PHPUnit 获取“tests/”中的所有 php 文件并执行它们。将包含文件“My/Testsuite/Loader.php”。PHPUnit 检查类 My_Testsuite_Loader 是否存在。到目前为止一切都很好。

我使用“PHPUnit/Runner/StandardTestSuiteLoader.php”作为“My/Testsuite/Loader.php”的模板。它包含方法“load()”和“reload()”。PHPUnit 框架从不调用这两种方法。为什么不？我认为拥有一个自己的 testsuiteloder 会给我实现测试套件排除模式的机会。

我的项目的示例文件系统：

```
<root>
|-src/MyProject/Package/Object.php
|-tests/MyProject/Package/Object/TestTemplate.php
|-tests/MyProject/Package/Object/GetFooTest.php
|-tests/MyProject/Package/Object/GetBarTest.php
|-tests/phpunit.xml
|-tests/bootstrap.php
|-tests/My/Testsuite/Loader.php 
```

正如你所看到的，我使用一个文件进行所有关于 sut（被测方法）的测试。所有这些 *Test.php 文件都继承自 TestTemplate (TestCase)。在 TestTemplate.php 中是一个初始化对象（Object.php）并将其存储在私有成员变量中的设置。

如何使用测试套件加载器/它的含义是什么？（如何排除不符合模式的测试类：“*Test.php”？）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-18T08:39:56.833

您需要像这样取出“测试”参数

```
phpunit --config myconfig.xml --bootstrap mybootstrap.php 
```

然后在你的 myconfig.xml

```
<testsuites>
   <testsuite name="AllTests">
      <directory>.</directory>
   </testsuite>
<testsuites>

<filter>
  <blacklist>
    <directory suffix=".xml">.</directory>
    <file>MyProject/Package/Object/TestTemplate.php</file>
  </blacklist>
</filter> 
```

# javascript - 淘汰赛和事件的时间安排

> ID：10495293
> 
> 赞同：1
> 
> 时间：2012-05-08T08:39:50.527
> 
> 标签：javascript, jquery, knockout.js

我有一个计算函数，它会通知按钮是否应该被禁用。我也订阅了这个计算函数，它更新了另一个 observable。当这个 observable 被更新时，它会运行一个自定义绑定。

问题是 subscribe() 在按钮被禁用之前正在运行。我希望首先运行计算函数，然后启用/禁用按钮，最后运行订阅..

这可能吗？setTimeout() 不是一个好的选择。

```
this.enableButton = ko.computed(function() { return true or false });
this.enableButton.subscribe(function() { myself.triggerBinding(true) }); 
```

html:

```
<button data-bind="enable: enableButton" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:50:43.570

如果我理解正确，我希望这会有所帮助：

[http://jsfiddle.net/UHgTS/1](http://jsfiddle.net/UHgTS/1)

```
var viewModel = {
    buttonIsEnabled : ko.observable(true)
};

viewModel.enableButton = ko.computed({
    read : function () {
        log("read enableButton");
        return this.buttonIsEnabled();
    },
    write : function (isEnabled) {
        log("write enableButton");
        this.buttonIsEnabled(isEnabled);         
    },
    owner : viewModel    
});

viewModel.otherObservable = ko.computed({
    read : function(){
        log("read otherObservable");
        return this.buttonIsEnabled();
    },
    write : function () {
        log("write otherObservable");
    },
    owner : viewModel
});

viewModel.otherObservable.subscribe(function(){
    log("run subscription");
    log("----------------");
});

function log(message){
    $("#log").append(message + "\n");
}
ko.applyBindings(viewModel); 
```

# netty - 尝试为 Netty 客户端编写连接（通道）池；最好的方法是什么？

> ID：10495294
> 
> 赞同：1
> 
> 时间：2012-05-08T08:39:54.410
> 
> 标签：netty

我需要开发一个返回通道的 Netty 连接池，这样我就可以避免每次需要时都创建通道。客户端应该每秒通过 Http 发出多个请求，并从一组 10 个线程中执行。目前我已经创建了一个 Netty Channel Pool，它围绕这个机制工作，但它似乎没有连接。

（虽然它产生了频道，但频道无法在网络上成功“写入”。

```
//Code follows
  //get Channel method
  public Channel getChannel() throws Exception 
  {
            synchronized (_channels) {
              PoolChannel pc = null;
              for (int i = 0; i < _channels.size(); i++) {
                pc = _channels.get(i);
                if (pc.lease()) {
                  // PoolConnection is available
                  if (!_checkChannels) {
                    return pc;
                  }
                  else {
                    // Check the status of the connection
                    boolean isHealthy = true;
                    try {
                      if (!pc.isOpen()) {
                    // If something wrong with the channel
                    // then don't use it anymore.
                        isHealthy = false;
                      }
                    }
                    catch(Exception ex) {
                      // If we can't even ask for that information, we
                      // certainly don't want to use it anymore.
                      isHealthy = false;
                    }

                    if (isHealthy) {
                      return pc;
                    }
                    else {
                      try {
                        pc.expire();
                      }
                      catch(Exception e) {
                        // ignore
                      }
                      _channels.remove(i);
                    }
                  }
                }
              }
            }

            // Create a new Connection
            PoolChannel pc=null;

            URI uri = _uri;
            String host = _host;
            int port = _port;

            //create channel
            Executor bossPool = Executors.newCachedThreadPool();
            Executor workerPool = Executors.newCachedThreadPool();

            ClientBootstrap bstrap = new ClientBootstrap(
                        new NioClientSocketChannelFactory(
                                bossPool, workerPool));
             bstrap.setPipelineFactory(new HttpClientPipelineFactory());

             ChannelFuture future = bstrap.connect(new InetSocketAddress(host, port));
             Channel chann = future.awaitUninterruptibly().getChannel();
             if (future.isSuccess()) {
                System.out.println("Channel success");
             }
            System.out.println("Channel = "+chann);
            pc = new PoolChannel(chann);
            pc.lease();

            // Add it to the pool
            synchronized (_channels) {
              _channels.add(pc);

              if (_cleaner == null) {
                // Put a new PoolCleaner
                _cleaner = new PoolCleaner(_cleaningInterval);
                _cleaner.start();
              }
            }

            return pc;
          }  

//=========================== 
```

请问我可以得到帮助吗？另外，当我完成频道后，如何将此频道返回到池中？仅仅关闭频道就足够了吗？提前致谢。

# android - 无法禁用联想文本

> ID：10495296
> 
> 赞同：9
> 
> 时间：2012-05-08T08:40:02.503
> 
> 标签：android, android-edittext

我正在尝试禁用给定的预测文本，如此[处](https://stackoverflow.com/questions/8499709/android-disabling-predictive-text)`EditText`所述，但我仍然通过预测获得自动完成...

我有一台启用了 XT9 的三星 Galaxy S。

有人可以帮忙吗？

```
<EditText
    android:id="@+id/search_field"
    android:layout_width="300dp"
    android:layout_height="27dp"
    android:background="@drawable/bg_searchfield"
    android:hint="@string/search_hint"
    android:imeOptions="actionSearch"
    android:inputType="text|textNoSuggestions|textFilter"/> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-08T08:44:18.290

[这个](https://stackoverflow.com/questions/3789905/how-to-turnoff-suggestions-in-edittext)SO question的评论表明 xml 属性不适用于某些模型，但 java-method 在这些情况下确实有效。所以试试这个：

```
edittext.setInputType(InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS); 
```

**编辑：**

正如下面评论中所建议的，这是一个有效的 xml 替代方案：

```
android:inputType="textNoSuggestions|textVisiblePassword" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-25T12:54:02.277

```
android:inputType="textNoSuggestions|textVisiblePassword" 
```

此解决方案有效，但您必须小心。**如果设置了标志textVisiblePassword** ，则无法在 HTC 设备上切换键盘语言（可能原因是在 Sense 键盘中）。

所以我不得不从代码中设置 InputType 并编写如下内容：

```
 public static int getInputTypeForNoSuggestsInput() {
    if (android.os.Build.MANUFACTURER.equalsIgnoreCase("Samsung")) {
        return InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS
                | InputType.TYPE_TEXT_VARIATION_VISIBLE_PASSWORD;
    } else {
        return InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-12T10:56:09.143

对我来说，使用[书法](https://github.com/chrisjenx/Calligraphy/issues/334)库在**提示**和**文本**上看到正确字体的唯一解决方案是：

*   `EditText`在你的xml中 设置你的密码`android:inputType="textNoSuggestions|textVisiblePassword"`
*   `EditText`以编程方式 配置您的：`passwordET.transformationMethod = PasswordTransformationMethod()`

这会：

1.  在提示上显示正确的字体
2.  在文本上显示正确的字体
3.  如果你有一个显示正确的字体`TextInputLayout`
4.  不会在您的键盘中显示建议或预测。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-15T11:24:08.953

上面给出的大多数解决方案都不适合我。所以我做了一个解决方法。

在 filter 方法中使用以下内容创建一个 InputFilter：

```
for (char ch:BLOCKED_CHARACTER_SET.toCharArray()){
                if (source != null && source.toString().contains(ch+"")) {
                    return "";
                }
            } 
```

这里 BLOCKED_CHARACTER_SET 是一个字符串，其中包含我们想要阻止的字符。

然后设置edittext

```
editText.setFilters(new InputFilter[]{filterUsername, new InputFilter.LengthFilter(LENGTH)}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-05T07:18:04.913

如果您需要此密码字段并且仍需要字符掩码：

```
inputType = InputType.TYPE_TEXT_VARIATION_PASSWORD or InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS
transformationMethod = PasswordTransformationMethod() 
```

# android - 在 Motorola XOOM view.startAnimation 上导致 MediaPlayer 停止

> ID：10495297
> 
> 赞同：3
> 
> 时间：2012-05-08T08:40:08.997
> 
> 标签：android, animation, media-player, motorola

我启动媒体播放器的代码：

```
MediaPlayer player = MediaPlayer.create(context, Uri.fromFile(new File(context.getExternalCacheDir().getAbsolutePath()+ File.separator + "test.mp3")));//MediaPlayer.create(context, resId);
    player.setAudioStreamType(playOnStream);
    player.start();
    player.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
        @Override
        public void onCompletion(MediaPlayer mp) {
            mp.release();
        }
    }); 
```

如果在此之后我开始任何动画（我通过监听 onAnimationEnd 一个接一个地启动了具有不同视图的不同动画）媒体播放器停止并显示 logcat 消息：

```
05-08 11:17:43.180: W/MediaPlayer-JNI(6571): MediaPlayer finalized without being released 
```

目前我不知道如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:18:33.280

确保释放媒体播放器对象`onPause()`并再次准备`onResume()`

# java - 如何将焦点放在 textView 中新生成的文本的顶部？

> ID：10495302
> 
> 赞同：1
> 
> 时间：2012-05-08T08:40:28.403
> 
> 标签：java, android

我有一个简单的笑话应用程序。当您按下按钮时，您会得到新的笑话。如果前一个比屏幕大，您可以向下滚动。如果你下到底部然后你去下一个笑话，你会被转移到新生成的笑话的底部，但我希望它到顶部，并自动显示笑话的开头。我怎样才能做到这一点 ？我认为这将通过java代码完成。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:06:44.350

使用[scrollTo(int x, int y)](http://developer.android.com/reference/android/view/View.html#scrollTo%28int,%20int%29)方法，我喜欢在我的 TextView 周围有 ScrollView，但我认为同样的事情只适用于 TextView。希望你能理解！

罗尔夫

**例子**

**xml:**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ScrollView
        android:id="@+id/scroll"
        android:layout_width="fill_parent"
        android:layout_height="130dp" >

        <TextView
            android:id="@+id/text"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="long\n\n\n\n\n\n\n\n long\n\n\n\n\n\n\n very text here!" />

    </ScrollView>

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="joke" />

</LinearLayout> 
```

**爪哇：**

```
package org.sample.example;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ScrollView;
import android.widget.TextView;

public class AutoscrollActivity extends Activity implements OnClickListener {
    /** Called when the activity is first created. */

    private Button new_joke;
    private TextView joke;
    private ScrollView scroll;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        new_joke = (Button) this.findViewById(R.id.button);
        new_joke.setOnClickListener(this);
        joke = (TextView) this.findViewById(R.id.text);
        scroll = (ScrollView) this.findViewById(R.id.scroll);
    }

    @Override
    public void onClick(View v) {
        joke.setText("Long\n\n\n\n\n\n\n\n joke \n\n\n\n\n\n\n\nlong joke joke");
        scroll.scrollTo(0, 0);
    }
} 
```

# matlab - 如何在matlab中对3D矩阵进行切片获取数组

> ID：10495304
> 
> 赞同：4
> 
> 时间：2012-05-08T08:40:32.367
> 
> 标签：matlab

考虑在 matlab 中有一个 3D 矩阵

```
A(:,:,1) = [1 2 3;4 5 6;7 8 9];
A(:,:,2) = [11 22 33;44 55 66;77 88 99];
A(:,:,3) = [111 222 333;444 555 666;777 888 999]; 
```

好吧，当我要求

```
A(1:end,1,:) 
```

我得到三个不同的答案：

```
A(1:end,1,1) = [1 2 3];

A(1:end,1,2) = [11 22 33];

A(1:end,1,3) = [111 222 333]; 
```

我想在一条指令中得到这个，可能没有循环等等：

```
[1 2 3;11 22 33;111 222 333] 
```

如何得到它？

我想要一个新矩阵而不是一系列向量。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T08:47:40.773

```
squeeze(A(1,:,:))' 
```

作品。我认为如果我更聪明或愿意花更多时间在这方面，我可以在没有转置的情况下做到这一点，但这应该为你指明正确的方向。

# php - 表单 PHP 验证

> ID：10495310
> 
> 赞同：0
> 
> 时间：2012-05-08T08:40:46.237
> 
> 标签：php, forms, validation, contact

所以我设法用 jquery 验证创建了一个 ajax 表单，我需要用 php 验证来增强它。这是代码：

```
<!-- Contact form -->
    <div id='contact_form_holder'>
<form action='index.php' method='post' id='contact_form'>

<p>
Your Name:
<div id='name_error' class='error'><img src='images/error.png'> Please enter your Name.</div>
<div><input class="textbox" type='text' name='name' id='name'></div>
</p>

<p>
Your Email:
<div id='email_error' class='error'><img src='images/error.png'> Please enter a valid Email.</div>
<div><input class="textbox" type='text' name='email' id='email'></div>
</p>

<p>
The Subject:
<div id='subject_error' class='error'><img src='images/error.png'> What is the purpose of the contact?</div>
<div><input class="textbox" type='text' name='subject' id='subject'></div>
</p>

<p>
The Message:
<div id='message_error' class='error'><img src='images/error.png'> Forgot why you came here?</div>
<div><textarea class="textbox" name='message' id='message'></textarea></div>
</p>

<div id='mail_success' class='success'><img src='images/success.png'> Your email has been submitted.Thank you.</div>
<div id='mail_fail' class='error'><img src='images/error.png'> There seems to be an internal error.Try later.</div>
<p id='cf_submit_p'>
<input class="button" type='submit' id='send_message' value='Send The Message'>
</p>

</form>  
</div>
    <!-- /Contact form --> 
```

发送邮件 php 代码

```
 $email_to =   'admin@localhost.com'; //the address to which the email will be sent
    $name     =   $_POST['name'];  
    $email    =   $_POST['email'];
    $subject  =   $_POST['subject'];
    $message  =   $_POST['message'];

    /*the $header variable is for the additional headers in the mail function,
     we are asigning 2 values, first one is FROM and the second one is REPLY-TO.
     That way when we want to reply the email gmail(or yahoo or hotmail...) will know 
     who are we replying to. */
    $headers  = "From: $email\r\n";
    $headers .= "Reply-To: $email\r\n";

    if(mail($email_to, $subject, $message, $headers)){
        echo 'sent'; // we are sending this text to the ajax request telling it that the mail is sent..      
    }else{
        echo 'failed';// ... or this one to tell it that it wasn't sent    
    }
?> 
```

和jQuery：

```
/// Contact Form ///

    $(document).ready(function(){
        $('#send_message').click(function(e){

            //stop the form from being submitted
            e.preventDefault();

            /* declare the variables, var error is the variable that we use on the end
            to determine if there was an error or not */
            var error = false;
            var name = $('#name').val();
            var email = $('#email').val();
            var subject = $('#subject').val();
            var message = $('#message').val();
            var re = new RegExp(/^[a-z0-9_\-]+(\.[_a-z0-9\-]+)*@([_a-z0-9\-]+\.)+([a-z]{2}|aero|arpa|biz|com|coop|edu|gov|info|int|jobs|mil|museum|name|nato|net|org|pro|travel)$/);
            /* in the next section we do the checking by using VARIABLE.length
            where VARIABLE is the variable we are checking (like name, email),
            length is a javascript function to get the number of characters.
            And as you can see if the num of characters is 0 we set the error
            variable to true and show the name_error div with the fadeIn effect. 
            if it's not 0 then we fadeOut the div( that's if the div is shown and
            the error is fixed it fadesOut. 

            The only difference from these checks is the email checking, we have
            email.indexOf('@') which checks if there is @ in the email input field.
            This javascript function will return -1 if no occurence have been found.*/

            if(name.length == 0){
                var error = true;
                $('#name_error').fadeIn(500);
            }else{
                $('#name_error').fadeOut(500);
            }
            if(email.lenght == 0 || !email.match(re)) {
                var error = true;
                $('#email_error').fadeIn(500);
            } else {
                $('#email_error').fadeOut(500);
            }
            if(subject.length == 0){
                var error = true;
                $('#subject_error').fadeIn(500);
            }else{
                $('#subject_error').fadeOut(500);
            }
            if(message.length == 0){
                var error = true;
                $('#message_error').fadeIn(500);
            }else{
                $('#message_error').fadeOut(500);
            }

            //now when the validation is done we check if the error variable is false (no errors)
            if(error == false){
                //disable the submit button to avoid spamming
                //and change the button text to Sending...
                $('#send_message').attr({'disabled' : 'true', 'value' : 'Sending...' });

                /* using the jquery's post(ajax) function and a lifesaver
                function serialize() which gets all the data from the form
                we submit it to send_email.php */
                $.post("send_email.php", $("#contact_form").serialize(),function(result){
                    //and after the ajax request ends we check the text returned
                    if(result == 'sent'){
                        //if the mail is sent remove the submit paragraph
                         $('#cf_submit_p').remove();
                        //and show the mail success div with fadeIn
                        $('#mail_success').fadeIn(500);
                    }else{
                        //show the mail failed div
                        $('#mail_fail').fadeIn(500);
                        //reenable the submit button by removing attribute disabled and change the text back to Send The Message                        
                        $('#send_message').removeAttr('disabled').attr('value', 'Send The Message');
                        $(':input','#contact_form')
                         .not(':button, :submit, :reset, :hidden')
                         .val('')
                        .removeAttr('checked')
                        .removeAttr('selected');

                    }
                });
            }
        });    
    }); 
```

我对php的了解很差，如果禁用了javascript并在jquery使用的相应错误div中输出错误，我真的需要有人帮助我用php验证这个表单。帮助真的很感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:37:20.320

尝试通过重定向将错误代码传递给带有表单的页面 [http://example.com/form.php?error=1](http://example.com/form.php?error=1) 并检查 $_GET["error"] 的错误代码，显示相关的消息在页面中出现您想要的错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:33:13.153

在 index.php 检查您的 html 字段的值

```
$regex = '/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/';
if($_REQUEST['name']!="" && $_REQUEST['email']!="" && $_REQUEST['subject'] !="" &&       $_REQUEST['message']!="")
{
if (preg_match($regex, $_REQUEST['email'])) {
 echo $email . \" is a valid email. We can accept it.\";
 } else { 
 echo $email . \" is an invalid email. Please try again.\";
}

}
else{
echo "Error";
} 
```

# azure - 如何查看 azure 诊断日志

> ID：10495312
> 
> 赞同：7
> 
> 时间：2012-05-08T08:40:59.820
> 
> 标签：azure, azure-storage, azure-table-storage

我无法找出如何查看 azure 诊断日志。我写的代码如下。

```
DiagnosticMonitorConfiguration config = iagnosticMonitor.GetDefaultInitialConfiguration();
System.Diagnostics.Trace.Listeners.Add(new Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener());
config.Logs.ScheduledTransferLogLevelFilter = LogLevel.Information;
config.WindowsEventLog.ScheduledTransferPeriod = System.TimeSpan.FromMinutes(1.0);
DiagnosticMonitor.Start("Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString", config); 
```

然后我`Trace.WriteLine("some message");`在代码中添加。现在我在哪里可以找到这些消息。我签入了 Visual Studio 服务器资源管理器，并在其中添加了我的存储帐户引用。wad-control-container 只有配置文件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T10:28:53.460

您可能想看看 Michael S. Collier 的这篇博文。您的云项目中的设置可能会导致日志最终出现在您预期之外的其他位置：

[http://michaelcollier.wordpress.com/2012/04/02/where-is-my-windows-azure-diagnostics-data/](http://michaelcollier.wordpress.com/2012/04/02/where-is-my-windows-azure-diagnostics-data/)

**更新：**

请注意，您必须照顾好每一个小细节才能使一切正常。

你在哪里写`Trace.WriteLine("some message");`？它在您的 WebRole.cs 中吗？如果是这种情况，您需要为 WebRole.cs 配置跟踪侦听器（这在其他进程中运行，与您的实际 Web 应用程序不同）。

这是一个如何在 WebRole.cs 类中设置跟踪侦听器的示例：

```
System.Diagnostics.Trace.Listeners.Add(new Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener());
System.Diagnostics.Trace.AutoFlush = true; 
```

设置好之后，您可以使用**Trace.WriteLine**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:44:25.897

这是关于如何启用诊断的一个很好的逐步说明：

[http://www.windowsazure.com/en-us/develop/net/common-tasks/diagnostics/?sec=commontasks](http://www.windowsazure.com/en-us/develop/net/common-tasks/diagnostics/?sec=commontasks)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T00:44:37.610

我写了一个工具，可以让你查看 Azure 诊断信息.. 看看

[AzTools - Azure 诊断查看器](http://sudxtrm.com/2013/08/making-azure-simple-aztools/)

[单击此处查看如何使用此工具](http://sudxtrm.com/aztools/how-does-this-work/)

# python - 使用 id 机械化选择表单

> ID：10495313
> 
> 赞同：25
> 
> 时间：2012-05-08T08:41:05.753
> 
> 标签：python, forms, mechanize

我正在使用 python 进行机械化。

```
<form action="/monthly-reports"  accept-charset="UTF-8" method="post" id="sblock"> 
```

此处的表单没有名称。如何使用它解析表单`id`？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-02T06:20:44.823

我发现这是解决同一问题的方法。`br`是机械化对象：

```
formcount=0
for frm in br.forms():  
  if str(frm.attrs["id"])=="sblock":
    break
  formcount=formcount+1
br.select_form(nr=formcount) 
```

我确信上面的循环计数器方法可以做得更多pythonic，但这应该选择带有属性的表单`id="sblock"`。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-06-25T16:33:09.283

对 python412524 的示例进行了一些改进，文档指出这也是有效的，我发现它更简洁：

```
for form in br.forms():
    if form.attrs['id'] == 'sblock':
        br.form = form
        break 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-07-04T13:08:42.083

对于任何未来的观众，这是使用该`predicate`参数的另一个版本。请注意，如果您愿意，可以将其制成带有 lambda 的单行：

```
def is_sblock_form(form):
    return "id" in form.attrs and form.attrs['id'] == "sblock"

br.select_form(predicate=is_sblock_form) 
```

来源：[https ://github.com/jjlee/mechanize/blob/master/mechanize/_mechanize.py#L462](https://github.com/jjlee/mechanize/blob/master/mechanize/_mechanize.py#L462)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-08T11:19:19.733

尝试使用: `br.select_form(nr=0)`，其中 nr 是表格编号（您不需要名称或 ID）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T08:46:11.927

尝试：

```
[f.id for f in br.forms()] 
```

它应该从您的页面返回所有表单 ID 的列表

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-26T00:55:50.097

```
g_form_id = ""

def is_form_found(form1):
    return "id" in form1.attrs and form1.attrs['id'] == g_form_id

def select_form_with_id_using_br(br1, id1):
    global g_form_id
    g_form_id = id1
    try:
        br1.select_form(predicate=is_form_found)
    except mechanize.FormNotFoundError:
        print "form not found, id: " + g_form_id
        exit()

# ... goto the form page, using br = mechanize.Browser()

# now lets select a form with id "user-register-form", and print its contents
select_form_with_id_using_br(br, "user-register-form")
print br.form

# that's it, it works! upvote me if u like 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-04T15:23:26.407

您可以使用 Browser 类的函数 select_form 的谓词参数。像这样：

```
from mechanize import Browser, FormNotFoundError

try:
   br.select_form(predicate=lambda frm: 'id' in frm.attrs and frm.attrs['id'] == 'sblock')
except FormNotFoundError:
  print("ERROR: Form not Found") 
```

# c# - 如何使用 DataContractSerializer 格式化 IDictionary 的序列化？

> ID：10495315
> 
> 赞同：0
> 
> 时间：2012-05-08T08:41:27.823
> 
> 标签：c#, .net, xml-serialization, datacontractserializer

我正在使用以下代码将对象序列化/反序列化为 XML

```
using System.Runtime.Serialization;
public static string Serialize<T>(this T obj)
        {
            var serializer = new DataContractSerializer(obj.GetType());
            using (var writer = new StringWriter())
            using (var stm = new XmlTextWriter(writer))
            {
                serializer.WriteObject(stm, obj);
                return writer.ToString();
            }
        }

        public static T Deserialize<T>(this string serialized)
        {
            var serializer = new DataContractSerializer(typeof(T));
            using (var reader = new StringReader(serialized))
            using (var stm = new XmlTextReader(reader))
            {
                return (T)serializer.ReadObject(stm);
            }
        } 
```

为了使此代码与 IDictionary 一起使用，我有以下自定义 Dictionary 类：

```
[CollectionDataContract(Name = "Kenan", ItemName="Items", KeyName="Row", Namespace="spell", ValueName="Values")]
public class CustomRowList : Dictionary<RowXML, List<ColumnXML>>
{

} 
```

问题是，当代码输出我的

```
Dictionary<RowXML, List<ColumnXML>> 
```

它看起来像这样：

![在此处输入图像描述](../Images/4c91e2cfaab62e92a937a2691cb65447.png)

我不需要`<Items>`and`<Values>`节点。相反，我希望它输出为：

```
<RowList>
<Row>
<Title></Title>
<Help_Text></Help_Text>
<ClassName></ClassName>
<ColumnList>
<Column>
<ClassName></ClassName>
<Help_Text></Help_Text>
<Title></Title>
</Column>
<Column>
... 
```

我怎样才能使 DataContractSerializer 以这种方式格式化我的字典？我尝试设置

```
ItemName 
```

和

```
ValueName 
```

上

```
[CollectionDataContract] 
```

属性为空白，但这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:19:50.530

看起来，您想自定义集合类的 xml 输出。实现此预期输出的唯一方法是实现 IXmlSerializable 接口，如下所示。

```
[CollectionDataContract(Name = "Kenan", ItemName="Items", KeyName="Row", Namespace="spell", ValueName="Values")]
public class CustomRowList : Dictionary<RowXML, List<ColumnXML>>, IXmlSerializable 
{

} 
```

请在此处查看更多信息

[实现 IXmlSerializable 的正确方法？](https://stackoverflow.com/questions/279534/proper-way-to-implement-ixmlserializable)

# apache-flex - Flex mobile：可折叠面板

> ID：10495318
> 
> 赞同：0
> 
> 时间：2012-05-08T08:41:39.930
> 
> 标签：apache-flex, mobile, panel

我正在使用 Adob​​e 的 Flash Builder 构建一个 Flex 4.6 移动应用程序，并且我想实现某种可折叠面板。我找到了一些框架，但它们都是针对桌面应用程序的，不兼容移动设备。我也尝试将它们转换为移动设备，但没有成功。

有没有可以帮助我的移动框架？还是有其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:18:02.693

我不知道有一个框架可以做到这一点，但另一种方法是实现您自己的可折叠面板。[这](http://www.iwobanas.com/2009/09/creating-collapsible-panel-in-flex-4/)是一个带有[source](http://www.iwobanas.com/wp-content/uploads/collapsible_panel_01/srcview/index.html)的教程。您声明进出动画的过渡，并听取激活动作，例如按钮单击。您可以通过转换的“目标”属性将转换绑定到面板。

# javascript - google+ 页面与个人资料

> ID：10495320
> 
> 赞同：0
> 
> 时间：2012-05-08T08:41:51.413
> 
> 标签：javascript, asp.net

我有一个 Asp.net 网页，我想在其中显示用户的 google plus 信息。google plus ID 存储在数据库中。有没有办法（javascript/C#/VB）来确定 google plus ID 是否与页面或个人资料相关？因为我必须为它们包含不同的 g:plus 代码。我搜索了谷歌开发者页面，但找不到与此相关的任何内容。谢谢各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:12:29.547

我刚刚弄清楚如何做到这一点。也许有人会遇到这个问题，所以这里是答案。有 REST API 的[people get 方法](https://developers.google.com/+/api/latest/people/get)。如果您定位的 userId 是 Google+ 页面的用户 ID，则会有一个值为 page的**objectType属性。**[您可以在这里](http://code.google.com/apis/explorer/#_s=plus&_v=v1&_m=people.get&userId=116852994107721644038)看到这一点。只需提交查询并查看结果响应。您的请求需要一个 api 密钥，此密钥的限制约为。10000 个请求/天。[在这里](https://code.google.com/apis/console/)您可以注册并获取api密钥。

# php - 从 PHP 脚本运行 Javascript 函数

> ID：10495321
> 
> 赞同：0
> 
> 时间：2012-05-08T08:41:51.727
> 
> 标签：php, javascript, ajax

我正在做一个 Ajax 项目。如果我们可以像这样从 php 脚本运行 javascript 函数，则可以实现许多功能：

```
 <?php

   if(isset($_REQUEST['change-div))
   {
   echo'<script>  UpdateDiv("divId"); // function to change the text of the div on ajax page
   </script>';
   }

   ?> 
```

但它不起作用，javascript代码只是按原样回显，并且函数不运行。我已经尽力了，在网上搜索等。但似乎没有办法做到这一点。

有没有办法从 PHP 脚本运行 JavaScript 函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T08:46:24.157

您应该在客户端管理代码执行。假设您通过 ajax 调用的 php 脚本是

```
?php
   if(isset($_REQUEST['change-div'])) {
      echo 'UpdateDiv';
      exit();
   }
?> 
```

那么您的 Ajax 成功回调（我在这里与框架无关）可能很简单

```
...
success : function(response) {
    if (response === 'UpdateDiv') {
       UpdateDiv();
    }
} 
```

通过这种方式，您将保持客户端和服务器端逻辑的良好分离。你也不需要注入 javascript 代码（改变你的 DOM 结构）或使用`eval()`

# oracle - 在 Shell 脚本中执行 PLSQL 块的问题

> ID：10495322
> 
> 赞同：2
> 
> 时间：2012-05-08T08:42:09.883
> 
> 标签：oracle, shell, plsql

我正在尝试使用 shell 脚本删除具有特定后缀（作为参数 $1 传递）的表。

如果选择了父表而没有删除其子表，我将绕过父表并增加异常块中的计数器。

当我在 sql developer 中运行此脚本并将 $1 替换为正确的值时，它可以工作。但是当我运行这个 shell 脚本时，它卡住了。

您能否看一下并告诉我，我在 shell 脚本中缺少什么？

代码：

```
#!/bin/bash

cat <<ENDDROPNEWTABS >dropnewtabs.sql
set pagesize 100

DECLARE

t_cnt NUMBER;
CURSOR C001
IS
SELECT table_name FROM user_tables WHERE table_name LIKE '%$1%';

BEGIN
BEGIN SELECT COUNT(*) INTO t_cnt FROM user_tables WHERE table_name LIKE '%$1%'; 
END;

WHILE(t_cnt > 0) LOOP
FOR i IN C001 LOOP
BEGIN EXECUTE IMMEDIATE 'DROP TABLE '||i.table_name;
EXCEPTION
WHEN OTHERS THEN
t_cnt := t_cnt+1;
NULL;
END;      
t_cnt := t_cnt-1;
END LOOP;
END LOOP;

END;

exit
ENDDROPNEWTABS

echo "Dropping the tables created for this task..."

sqlplus -s usn/pwd@sid @dropnewtabs.sql >tablesDropped.txt

#END 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T09:47:57.653

`/`您在匿名块之后缺少 a `END;`，因此它永远不会执行它，并且`exit`将被视为前一个命令的一部分。这`/`与 SQL Developer 中的“运行”非常相似。

```
...
END LOOP;

END;
/

exit
ENDDROPNEWTABS 
```

（您不需要`BEGIN`/`END`周围的`SELECT`, 或`NULL`异常处理程序中的 ，但它们不会破坏任何东西；静默压制所有可能的异常也不是一个好主意，只需寻找您期望看到的那个.而且我个人觉得缩进更容易理解）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:17:44.783

```
#!/bin/ksh 

PSQL1=dropnewtabs.sql
TABNAME=$1

echo $1

>tablesDropped.txt
>$PSQL1              #this command will create a new empty file

echo "set echo off feed off head off pages 0  " >> $PSQL1
echo "set serveroutput on "          >> $PSQL1
echo "set define off " >> $PSQL1
echo "DECLARE  " >> $PSQL1
echo "CURSOR C001 " >> $PSQL1
echo "IS " >> $PSQL1
echo "SELECT table_name FROM user_tables WHERE table_name = '$TABNAME'; " >> $PSQL1
echo "BEGIN " >> $PSQL1
echo "FOR i IN C001  " >> $PSQL1
echo "LOOP " >> $PSQL1
echo "EXECUTE IMMEDIATE 'DROP TABLE '|| i.table_name ; " >> $PSQL1
echo "dbms_output.put_line('TEST-------->'); " >> $PSQL1
echo "END LOOP; " >> $PSQL1
echo "END; " >> $PSQL1
echo "/ "       >> $PSQL1
echo "exit;"       >> $PSQL1

echo "Dropping the tables created for this task..."

sqlplus -s user/pwd@sid @$PSQL1 >>tablesDropped.txt 2>&1
echo "Complete" 
```

# mongodb - 如何使用 TurboGear 框架在 python 中动态更改数据库？

> ID：10495324
> 
> 赞同：2
> 
> 时间：2012-05-08T08:42:11.583
> 
> 标签：mongodb, python-3.x, turbogears2

我遇到了需要使用 TurboGear 框架访问 Mongodb 服务器中的一组数据库的需求。在那里我需要列出数据库，并允许用户选择一个并继续前进。在我看来，TurboGear 确实有助于使用多个数据库，但需要在 development.ini 中事先指定。

有没有办法只连接到数据库服务器（或首先连接到特定数据库），然后获取数据库列表并即时选择一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:05:55.453

对于**SQLAlchemy**，您可以使用更智能的 Session 来实现类似的目标。

只需子类化`sqlalchemy.orm.Session`该类并覆盖该`get_bind(self, mapper=None, clause=None)`方法。每次会话必须决定使用哪个引擎并预计返回引擎本身时，都会调用该方法。然后，您可以在任何您喜欢的地方存储引擎列表并返回正确的引擎。

当使用**Ming/MongoDB**时，可能通过子类化`ming.Session`model/session.py 并覆盖该`ming.Session.db`属性以返回正确的数据库来实现相同的目的。

# android - 在 Android 上下载小 (vcf) 文件通常会失败

> ID：10495327
> 
> 赞同：3
> 
> 时间：2012-05-08T08:42:22.507
> 
> 标签：android, download-manager

我有一个网页，我可以在其中将联系人文件 (.vcf / vcard) 下载到我的 Android 手机，然后打开它以添加到联系人。

该文件非常小，只有大约 260-270 字节。

在不同版本的安卓和不同的手机上，下载的成功率差异很大。

在我的三星 Nexus S (ICS 4.0.4) 上使用股票浏览器和下载管理器，每 5 次下载失败大约有 4 次。

如果我查看 DDMS locCat 输出，我会看到

> 06-20 16:25:56.701：W/DownloadManager(6942)：中止下载请求 6728：尝试恢复无法恢复的下载

在另一台三星 Nexus S (ICS 4.0.4) 上，它失败了 5 次。

当我下载较大的文件或应用程序等时，我看不到这个问题。

有人知道为什么这个下载会经常失败吗？这可能与文件太小有关吗？

MIME 类型设置为 text/x-vcard

# jasper-reports - iReport 中的详细信息带比所需的长

> ID：10495329
> 
> 赞同：2
> 
> 时间：2012-05-08T08:42:32.910
> 
> 标签：jasper-reports, pdf-generation, ireport

我有一个带有文本字段和表格的详细信息带。在设计器视图中，我已经适合所有波段，但是当我看到预览时，最低文本字段高于下一个波段中的第一个文本字段（即我在波段 1 和波段 2 之间有空白区域）。

空的空间是由桌子造成的，事实上，如果我删除它，我就没有空间了。在设计器视图和预览下方。

![设计器视图](../Images/83fa0cf00243fcd3b0412d0b1b7061bc.png)

![预览](../Images/fc2d6a80cda623ff9c9c4cb94d1f3ea2.png)

问题是：我怎样才能避免乐队之间的空白？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T16:30:34.073

**EDIT2**：现在显示了报告，很清楚。使报表布局中的表格更大。一直拉伸到底部。如果您不这样做，JR 会小心地在其下方包含您留下的空间。

**编辑**：我认为关键问题是带高应该是“20”以匹配其中元素的高度。

**包含可能无关紧要的琐事的旧答案**：
您的一些“文本字段”是`textField`s。这很好。您的一些“文本字段”是`staticText`. 这是不好的。将静态文本转换为真实文本字段。您可以右键单击它们并自动转换它们。

拉伸类型不好。把它关掉。（其实挺好用的……但不是你想要的。）

isStretchWithOverflow 很好。打开它。您的文字说它已经打开，但您的代码显示它不是。

isPrintWhenDetailOverflows 不好。把它关掉。您的文字没有提及它，但您的代码显示它已打开。（这可能无关紧要......但你应该把它关掉，以明确它不是你认为的那样。）

# asp.net-mvc-3 - 如何在asp.net mvc3中为一系列图片制作动画？

> ID：10495339
> 
> 赞同：1
> 
> 时间：2012-05-08T08:42:59.387
> 
> 标签：asp.net-mvc-3, flash

任何人都可以解释如何在 asp.net mvc3 中使用 flash 为一系列图片制作动画或建议一个好的教程。我没有找到一个好的开始。这是我第一次想使用闪光灯。任何答案都会有所帮助。谢谢

# c# - 当多个 ComboBox 绑定到一个公共源时，如何强制执行不同的选择？

> ID：10495342
> 
> 赞同：0
> 
> 时间：2012-05-08T08:43:10.990
> 
> 标签：c#, wpf, combobox, wpf-controls

在我的 WPF 应用程序中，我有 4 个组合框。它们都以这种方式填充；

```
combobox1.ItemSource = dt.DefaultView;
combobox1.DisplayMemberpath = "Name";

combobox2.ItemSource = dt.DefaultView;
combobox2.DisplayMemberpath = "Name"; 
```

等等`combobox3`和`combobox4`。

这个`dt`（DataTable）已经包含不同的名称，因为我正在使用`distinct Name`. 现在我应该怎么做，当从组合框 1 中选择一个名称时，它不应该在其他 3 个组合框列表中可用。

我读了一个问题（[多个 ComboBoxes 绑定到一个公共源，强制执行不同的选择](https://stackoverflow.com/questions/5737381/wpf-multiple-comboboxs-bound-to-a-common-source-enforcing-distinct-selections)）但找不到解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:59:35.913

使用 RowFilter 怎么样？如果您使用新的 DataView 而不是 DefaultView，这当然可以工作。您可以在 SelectedItem 更改时创建 4 个 DataView 并设置 RowFilter。

看看我在[这个](https://stackoverflow.com/questions/10201467/wpf-binding-with-dataview-not-working)线程中的答案。该示例用于列表视图，但您可以使用组合框轻松实现相同的效果

编辑：快速而肮脏的例子:)

数据

```
public class MyTest
{
    private DataTable dt;

    public BindingListCollectionView View1 { get; set; }
    public BindingListCollectionView View2 { get; set; }
    public BindingListCollectionView View3 { get; set; }
    public BindingListCollectionView View4 { get; set; }

    private string _selected1;
    public string Selected1
    {
        get { return _selected1; }
        set { _selected1 = value;
            this.UpdateFilter();
        }
    }

    private void UpdateFilter()
    {
        this.View1.CustomFilter = GetFilter(this.Selected2, this.Selected3, this.Selected4);
        this.View2.CustomFilter = GetFilter(this.Selected1, this.Selected3, this.Selected4);
        this.View3.CustomFilter = GetFilter(this.Selected1, this.Selected2, this.Selected4);
        this.View4.CustomFilter = GetFilter(this.Selected1, this.Selected2, this.Selected3);
    }

    private string GetFilter(string selected2, string selected3, string selected4)
    {
        var filter = "";

        if (!string.IsNullOrWhiteSpace(selected2))
            filter = "Name <> '" + selected2 + "' and ";

        if(!string.IsNullOrWhiteSpace(selected3))
            filter += "Name <> '" + selected3 + "' and ";

        if (!string.IsNullOrWhiteSpace(selected4))
            filter += "Name <> '" + selected4 + "' and ";

        if (!string.IsNullOrWhiteSpace(filter))
            filter = filter.Substring(0, filter.Length - 4);

        return filter;
    }

    private string _selected2;
    public string Selected2
    {
        get { return _selected2; }
        set { _selected2 = value;
        this.UpdateFilter();
        }
    }

    private string _selected3;
    public string Selected3
    {
        get { return _selected3; }
        set { _selected3 = value;
        this.UpdateFilter();
        }

    }
    private string _selected4;
    public string Selected4
    {
        get { return _selected4; }
        set { _selected4 = value;
        this.UpdateFilter();
        }

    }

    public MyTest()
    {
        this.dt = new DataTable();
        this.dt.Columns.Add("Name");

        for (int i = 0; i < 15; i++)
        {
            var row = dt.NewRow();
            row["Name"] = "Name " + i;
            dt.Rows.Add(row);
        }

        View1 = new BindingListCollectionView(new DataView(dt));
        View2 = new BindingListCollectionView(new DataView(dt));
        View3 = new BindingListCollectionView(new DataView(dt));
        View4 = new BindingListCollectionView(new DataView(dt));
    }
} 
```

用户控件.cs

```
public partial class ComboxFour : UserControl
{
    private MyTest data;
    public ComboxFour()
    {
        this.data = new MyTest();
        InitializeComponent();
        this.DataContext = data;
    }
} 
```

xml

```
<StackPanel Orientation="Horizontal">
    <ComboBox Width="100" Height="30" SelectedValue="{Binding Selected1}" ItemsSource="{Binding View1}" DisplayMemberPath="Name" SelectedValuePath="Name"/>
    <ComboBox Width="100" Height="30" SelectedValue="{Binding Selected2}" ItemsSource="{Binding View2}" DisplayMemberPath="Name" SelectedValuePath="Name"/>
    <ComboBox Width="100" Height="30" SelectedValue="{Binding Selected3}" ItemsSource="{Binding View3}" DisplayMemberPath="Name" SelectedValuePath="Name"/>
    <ComboBox Width="100" Height="30" SelectedValue="{Binding Selected4}" ItemsSource="{Binding View4}" DisplayMemberPath="Name" SelectedValuePath="Name"/>
</StackPanel> 
```

# javascript - 使用 Titanium，删除当前视图或弹出当前视图

> ID：10495343
> 
> 赞同：4
> 
> 时间：2012-05-08T08:43:36.343
> 
> 标签：javascript, ios, iphone, titanium, titanium-mobile

我必须删除当前视图在同一个视图中......如果我在父视图中，我可以做

```
parentView.remove(childView); 
```

但是在子视图上我没有**parentView**所以我怎样才能弹出**childView**以让**parentView**在顶部，就像在 iOS 中按下后退按钮时发生的那样？请帮忙

这是我的 childView 文件..

```
function DetailView(){

var self = Ti.UI.createView({
    backgroundColor:'#fff'
});
// Create a Button.
var aButton = Ti.UI.createButton({
    title : 'aButton',
    height : '50',
    width : '100',
    top : '10',
    left : '20'
});

// Listen for click events.
aButton.addEventListener('click', function() {

     alert('\'aButton\' was clicked!'); 
```

***我必须在按下 aButton 时导航回来，我应该放在这里做什么***

```
});

// Add to the parent view.
self.add(aButton);

return(self);
 }
module.exports = DetailView; 
```

这是我的父母观点：

```
 //FirstView Component Constructor
    var self = Ti.UI.createView();

    function FirstView() {
//create object instance, a parasitic subclass of Observable

var DetailView = require('ui/common/DetailView');

var data = [{title:"Row 1"},{title:"Row 2"}];
var table = Titanium.UI.createTableView({
    data:data
    });
table.addEventListener('click', rowSelected);

self.add(table);

return self;
    }

    function rowSelected()
    {
var DetailView = require('ui/common/DetailView');

//construct UI
var detailView = new DetailView();
self.add(detailView);

    }

    module.exports = FirstView; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T11:46:13.247

此时您可以将 parentView 传递给子视图的构造函数：

```
//construct UI
var detailView = new DetailView(parentView);
self.add(detailView); 
```

并在点击事件中

```
aButton.addEventListener('click', function() {
   if ( parentView != null ) {
       parentView.remove(childView);
    }
}); 
```

# java - 围绕封闭三次样条绘制渐变

> ID：10495348
> 
> 赞同：2
> 
> 时间：2012-05-08T08:43:51.163
> 
> 标签：java, algorithm

对于图像编辑应用程序，我正在尝试围绕封闭的自然三次样条绘制渐变。
样条曲线是根据[这里](http://www.cse.unsw.edu.au/~lambert/splines/natcubicclosed.html)解释的算法和代码绘制的。

结果应该是[这样](http://dl.dropbox.com/u/765/bspline.png)的（使用 GIMP 使用大量高斯模糊创建）。

由于我找不到任何合适的算法来确定与样条的距离，因此我采用了以下算法：

1.  在样条上标记一些关键点
2.  参考闭合样条曲线的中心增大或放大这些点
3.  在内部点和外部点之间创建三角形网格。这些三角形的内部顶点为黑色，外部顶点为白色。

如您所见，此解决方案非常复杂（可能必须依赖 OpenGL），因此不是最理想的。

有人能想出一个更简单的解决方案吗？
提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:23:48.460

看来您需要在样条线之外构建[距离变换图。](http://en.wikipedia.org/wiki/Distance_transform)[一些代码](http://www.cs.brown.edu/~pff/dt/)来做这件事。它也在 OpenCV 库中实现。

# c# - Outlook 对话历史记录

> ID：10495351
> 
> 赞同：3
> 
> 时间：2012-05-08T08:44:07.763
> 
> 标签：c#, outlook, office-interop

我正在研究创建一个 Outlook 插件，我可以从“对话历史记录”文件夹中选择一个对话，然后单击一个将其保存到文件夹的按钮。是否有人对我如何选择对话历史文件夹并通过 C# 运行搜索以及选择对话有任何指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:29:51.557

```
 public static List<Outlook.MAPIFolder> GetFolders()
    {

        List<Outlook.MAPIFolder> _list = new List<Outlook.MAPIFolder>();

        Outlook.MAPIFolder root = OutlookApplication.Session.DefaultStore.GetRootFolder();

        foreach (Outlook.MAPIFolder folder in root.Folders)
        {
            _list.Add(folder);
        }

        return _list;
    }

    public static Outlook.MAPIFolder GetFolderByEntryId(string entryId)
    {
        List<Outlook.MAPIFolder> folders = GetFolders();
        return folders.Where(x => x.EntryID == entryId).FirstOrDefault();
    }

    public static Outlook.MAPIFolder GetFolderByName(string folderName)
    {
        List<Outlook.MAPIFolder> folders = GetFolders();
        return folders.Where(x => x.Name == folderName).FirstOrDefault();
    } 
```

和

```
 public static List<Outlook.MailItem> GetSelectedItem()
    {
        List<Outlook.MailItem> _list = new List<Outlook.MailItem>();

        Outlook.Selection outlookSelection = OutlookApplication.ActiveExplorer().Selection;

        for (int i = 1; i < outlookSelection.Count; i++)
        {
            Outlook.MailItem mailItem = (Outlook.MailItem)outlookSelection[i];

            _list.Add(mailItem);
        }

        return _list;
    }

    public static List<Outlook.MailItem> GetMailItems(string FolderName)
    {
        List<Outlook.MailItem> _list = new List<Outlook.MailItem>();

        Outlook.MAPIFolder theFolder = OutlookApplication.Session.GetFolderFromID(GetFolderByName(FolderName).EntryID);

        foreach (Object item in theFolder.Items)
        {
            Outlook.MailItem mailItem = (Outlook.MailItem)item;

            if (mailItem != null)
            {
                _list.Add(mailItem);
            }
        }

        return _list;

    } 
```

# java - 重新加载 prefuse Tree 结构？

> ID：10495353
> 
> 赞同：0
> 
> 时间：2012-05-08T08:44:10.960
> 
> 标签：java, xml, swing, listeners, prefuse

我需要用 prefuse 可视化一个 xml 文件，但由于它的大小，我必须一次只加载文件的一部分并将它们表示为 prefuse 中的树结构。我设法加载和可视化第一棵树，包括所有xml elemts 达到预定深度，但如果我想查看 XML 文件中更深的元素，我需要创建一个新的 prefuse 树，新根是在新深度读取的第一个元素，并继续读取元素直到最大深度和等等。我在 prefuse 中加载和可视化这些子树时遇到问题。目前我拨打了 currentTree.clear(); 之类的电话。并尝试在阅读过程中使用 currentTree 但我收到如下错误：

```
prefuse.Display$InputEventCapturer fireItemClicked
WARNING: Exception thrown by Control: java.lang.ArrayIndexOutOfBoundsException: -1
java.lang.ArrayIndexOutOfBoundsException: -1
    at java.util.ArrayList.get(ArrayList.java:324)
    at prefuse.data.Table.getColumn(Table.java:457)
    at prefuse.data.Table.setString(Table.java:1427)
    at prefuse.data.tuple.TableTuple.setString(TableTuple.java:455)
    at loader.TreeLoader.downLevel(TreeLoader.java:322)
    at visualizations.PrefuseTreeVisual$2.itemClicked(PrefuseTreeVisual.java:302)
    at prefuse.Display$InputEventCapturer.fireItemClicked(Display.java:1738)
    at prefuse.Display$InputEventCapturer.mouseClicked(Display.java:1590)
    at java.awt.AWTEventMulticaster.mouseClicked(AWTEventMulticaster.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6292)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
    at java.awt.Component.processEvent(Component.java:6054)
    at java.awt.Container.processEvent(Container.java:2041)
    at java.awt.Component.dispatchEventImpl(Component.java:4652)
    at java.awt.Container.dispatchEventImpl(Container.java:2099)
    at java.awt.Component.dispatchEvent(Component.java:4482)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4577)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4247)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)
    at java.awt.Container.dispatchEventImpl(Container.java:2085)
    at java.awt.Window.dispatchEventImpl(Window.java:2478)
    at java.awt.Component.dispatchEvent(Component.java:4482)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:644)
    at java.awt.EventQueue.access$000(EventQueue.java:85)
    at java.awt.EventQueue$1.run(EventQueue.java:603)
    at java.awt.EventQueue$1.run(EventQueue.java:601)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
    at java.awt.EventQueue$2.run(EventQueue.java:617)
    at java.awt.EventQueue$2.run(EventQueue.java:615)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:614)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)

08.05.2012 11:38:47 prefuse.action.ActionList run
WARNING: Row index out of bounds: -1
java.lang.IllegalArgumentException: Row index out of bounds: -1
    at prefuse.data.column.DoubleColumn.getDouble(DoubleColumn.java:112)
    at prefuse.data.Table.getDouble(Table.java:1255)
    at prefuse.visual.VisualTable.getX(VisualTable.java:407)
    at prefuse.visual.tuple.TableVisualItem.getX(TableVisualItem.java:270)
    at visualizations.PrefuseTreeVisual$AutoPanAction.run(PrefuseTreeVisual.java:433)
    at prefuse.action.ActionList.run(ActionList.java:79)
    at prefuse.action.Action.run(Action.java:122)
    at prefuse.activity.Activity.runActivity(Activity.java:165)
    at prefuse.activity.ActivityManager.run(ActivityManager.java:365) 
```

我认为树结构附有一些侦听器，当我在树上调用 clear() 时，这些侦听器不会被清除。我如何清除那些听众？或者有没有更简单的方法来做我想做的事情？提前致谢 ！

造成所有麻烦的代码在 itemClicked 函数中

```
package visualizations;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.MouseEvent;
import java.awt.geom.Point2D;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.*;
import loader.TreeLoader;
import prefuse.Constants;
import prefuse.Display;
import prefuse.Visualization;
import prefuse.action.Action;
import prefuse.action.ActionList;
import prefuse.action.ItemAction;
import prefuse.action.RepaintAction;
import prefuse.action.animate.ColorAnimator;
import prefuse.action.animate.LocationAnimator;
import prefuse.action.animate.QualityControlAnimator;
import prefuse.action.animate.VisibilityAnimator;
import prefuse.action.assignment.ColorAction;
import prefuse.action.assignment.FontAction;
import prefuse.action.filter.FisheyeTreeFilter;
import prefuse.action.layout.CollapsedSubtreeLayout;
import prefuse.action.layout.graph.NodeLinkTreeLayout;
import prefuse.activity.SlowInSlowOutPacer;
import prefuse.controls.*;
import prefuse.data.Node;
import prefuse.data.Tree;
import prefuse.data.event.TupleSetListener;
import prefuse.data.io.DataIOException;
import prefuse.data.search.PrefixSearchTupleSet;
import prefuse.data.tuple.TupleSet;
import prefuse.render.AbstractShapeRenderer;
import prefuse.render.DefaultRendererFactory;
import prefuse.render.EdgeRenderer;
import prefuse.render.LabelRenderer;
import prefuse.util.ColorLib;
import prefuse.util.FontLib;
import prefuse.util.ui.JFastLabel;
import prefuse.util.ui.JSearchPanel;
import prefuse.visual.NodeItem;
import prefuse.visual.VisualItem;
import prefuse.visual.expression.InGroupPredicate;
import prefuse.visual.sort.TreeDepthItemSorter;

public class PrefuseTreeVisual extends Display {

    //prefuse specific variables
    private static final String tree = "tree";
    private static final String treeNodes = "tree.nodes";
    private static final String treeEdges = "tree.edges";
    private LabelRenderer m_nodeRenderer;
    private EdgeRenderer m_edgeRenderer;
    private String m_label = "name";
    private int m_orientation = Constants.ORIENT_LEFT_RIGHT;
    private TreeLoader xmlLoader;
    private Tree prefuseTree;
    private JPanel panel;
    private static Visualization vis;

    public PrefuseTreeVisual() {
        vis=new Visualization();
    }

    public void init(Tree t, String label) {
        m_label = label;

        this.setVisualization(vis);
        vis.add(tree, t);

        m_nodeRenderer = new LabelRenderer(m_label);
        m_nodeRenderer.setRenderType(AbstractShapeRenderer.RENDER_TYPE_FILL);
        m_nodeRenderer.setHorizontalAlignment(Constants.LEFT);
        m_nodeRenderer.setRoundedCorner(8, 8);
        m_edgeRenderer = new EdgeRenderer(Constants.EDGE_TYPE_CURVE);

        DefaultRendererFactory rf = new DefaultRendererFactory(m_nodeRenderer);
        rf.add(new InGroupPredicate(treeEdges), m_edgeRenderer);
        vis.setRendererFactory(rf);

        // colors
        ItemAction nodeColor = new NodeColorAction(treeNodes);
        ItemAction textColor = new ColorAction(treeNodes,
                VisualItem.TEXTCOLOR, ColorLib.rgb(0, 0, 0));
        vis.putAction("textColor", textColor);

        ItemAction edgeColor = new ColorAction(treeEdges,
                VisualItem.STROKECOLOR, ColorLib.rgb(200, 200, 200));

        // quick repaint
        ActionList repaint = new ActionList();
        repaint.add(nodeColor);
        repaint.add(new RepaintAction());
        vis.putAction("repaint", repaint);

        // full paint
        ActionList fullPaint = new ActionList();
        fullPaint.add(nodeColor);
        vis.putAction("fullPaint", fullPaint);

        // animate paint change
        ActionList animatePaint = new ActionList(400);
        animatePaint.add(new ColorAnimator(treeNodes));
        animatePaint.add(new RepaintAction());
        vis.putAction("animatePaint", animatePaint);

        // create the tree layout action
        NodeLinkTreeLayout treeLayout = new NodeLinkTreeLayout(tree,
                m_orientation, 50, 0, 8);
        treeLayout.setLayoutAnchor(new Point2D.Double(25, 300));
        vis.putAction("treeLayout", treeLayout);

        CollapsedSubtreeLayout subLayout =
                new CollapsedSubtreeLayout(tree, m_orientation);
        vis.putAction("subLayout", subLayout);

        AutoPanAction autoPan = new AutoPanAction();

        // create the filtering and layout
        ActionList filter = new ActionList();
        filter.add(new FisheyeTreeFilter(tree, 4));
        filter.add(new FontAction(treeNodes, FontLib.getFont("Tahoma", 16)));
        filter.add(treeLayout);
        filter.add(subLayout);
        filter.add(textColor);
        filter.add(nodeColor);
        filter.add(edgeColor);
        vis.putAction("filter", filter);

        // animated transition
        ActionList animate = new ActionList(1000);
        animate.setPacingFunction(new SlowInSlowOutPacer());
        animate.add(autoPan);
        animate.add(new QualityControlAnimator());
        animate.add(new VisibilityAnimator(tree));
        animate.add(new LocationAnimator(treeNodes));
        animate.add(new ColorAnimator(treeNodes));
        animate.add(new RepaintAction());
        vis.putAction("animate", animate);
        vis.alwaysRunAfter("filter", "animate");

        // create animator for orientation changes
        ActionList orient = new ActionList(2000);
        orient.setPacingFunction(new SlowInSlowOutPacer());
        orient.add(autoPan);
        orient.add(new QualityControlAnimator());
        orient.add(new LocationAnimator(treeNodes));
        orient.add(new RepaintAction());
        vis.putAction("orient", orient);

        // ------------------------------------------------

        // initialize the display
        setSize(700, 600);
        setItemSorter(new TreeDepthItemSorter());
        addControlListener(new ZoomToFitControl());
        addControlListener(new ZoomControl());
        addControlListener(new WheelZoomControl());
        addControlListener(new PanControl());
        addControlListener(new FocusControl(1, "filter"));

        registerKeyboardAction(
                new OrientAction(Constants.ORIENT_LEFT_RIGHT),
                "left-to-right", KeyStroke.getKeyStroke("ctrl 1"), WHEN_FOCUSED);
        registerKeyboardAction(
                new OrientAction(Constants.ORIENT_TOP_BOTTOM),
                "top-to-bottom", KeyStroke.getKeyStroke("ctrl 2"), WHEN_FOCUSED);
        registerKeyboardAction(
                new OrientAction(Constants.ORIENT_RIGHT_LEFT),
                "right-to-left", KeyStroke.getKeyStroke("ctrl 3"), WHEN_FOCUSED);
        registerKeyboardAction(
                new OrientAction(Constants.ORIENT_BOTTOM_TOP),
                "bottom-to-top", KeyStroke.getKeyStroke("ctrl 4"), WHEN_FOCUSED);

        // ------------------------------------------------

        // filter graph and perform layout
        setOrientation(m_orientation);
        vis.run("filter");

        TupleSet search = new PrefixSearchTupleSet();
        vis.addFocusGroup(Visualization.SEARCH_ITEMS, search);
        search.addTupleSetListener(new TupleSetListener() {

            @Override
            public void tupleSetChanged(TupleSet t, prefuse.data.Tuple[] add, prefuse.data.Tuple[] rem) {
                vis.cancel("animatePaint");
                vis.run("fullPaint");
                vis.run("animatePaint");
            }
        });
    }

    public JComponent getVisual(String filepath, String label) {
        //set colors for background and foreground
        Color BACKGROUND = Color.WHITE;
        Color FOREGROUND = Color.BLACK;

        //load a partial tree
        xmlLoader = new TreeLoader();
        xmlLoader.setMaxDepth(1);
        prefuseTree = null;
        try {
            prefuseTree = (Tree) xmlLoader.readGraph(filepath);
        } catch (DataIOException ex) {
            Logger.getLogger(PrefuseTreeVisual.class.getName()).log(Level.SEVERE, null, ex);
        }

        final PrefuseTreeVisual tview = new PrefuseTreeVisual();
        tview.init(prefuseTree, label);
        tview.setBackground(BACKGROUND);
        tview.setForeground(FOREGROUND);

        //create a search panel
        JSearchPanel search = new JSearchPanel(tview.getVisualization(), treeNodes, Visualization.SEARCH_ITEMS, m_label, true, true);
        search.setShowResultCount(true);
        search.setBorder(BorderFactory.createEmptyBorder(5, 5, 4, 0));
        search.setFont(FontLib.getFont("Tahoma", Font.PLAIN, 11));
        search.setBackground(BACKGROUND);
        search.setForeground(FOREGROUND);

        final JFastLabel title = new JFastLabel("Title");
        title.setPreferredSize(new Dimension(350, 20));
        title.setVerticalAlignment(SwingConstants.BOTTOM);
        title.setBorder(BorderFactory.createEmptyBorder(3, 0, 0, 0));
        title.setFont(FontLib.getFont("Tahoma", Font.PLAIN, 16));
        title.setBackground(BACKGROUND);
        title.setForeground(FOREGROUND);

        tview.addControlListener(new ControlAdapter() {

            @Override
            public void itemEntered(VisualItem item, MouseEvent e) {
                if (item.canGetString(m_label)) {
                    title.setText(item.getString(m_label));
                }
                if (item instanceof NodeItem) {
                    Display d = (Display)e.getSource();
                    ToolTipManager.sharedInstance().setInitialDelay(0);
                    String text = new String();
                    Node nodeData = (Node) item.getSourceTuple();
                    text+="<html>Type:" + nodeData.getString("type");
                    if (nodeData.getString("type").equals("level")) {
                        text+=("<br>Name: " + nodeData.getString("name"));
                        text+=("<br>Depth: " + nodeData.getString("depthInXMLTree"));
                        text+=("<br>Back to: " + nodeData.getString("backto"));
                        text+=("<br>Timestamp: " + nodeData.getString("timestamp")+"</html>");
                    } else if (nodeData.getString("type").equals("branch")) {
                        text+=("<br>Index: " + nodeData.getString("index"));
                        text+=("<br>Value: " + nodeData.getString("value"));
                        text+=("<br>Filtered values: " + nodeData.getString("value"));
                        text+=("<br>Timestamp: " + nodeData.getString("timestamp"));
                        text+=("<br>Has subtree: " + nodeData.getBoolean("hasSubtree")+"</html>");
                    }
                    if (nodeData.getString("type").equals("variable")) {
                        text+=("<br>Name: " + nodeData.getString("name"));
                        text+=("<br>Value: " + nodeData.getString("value"));
                        text+=("<br>Filtered values: " + nodeData.getString("filteredvalues"));
                        text+=("<br>Timestamp: " + nodeData.getString("timestamp")+"</html>");
                    } else if (nodeData.getString("type").equals("status")) {
                        text+=("<br>Result: " + nodeData.getString("result"));
                        text+=("<br>Timestamp: " + nodeData.getString("timestamp")+"</html>");
                    }
                    d.setToolTipText(text);
                }
            }

            @Override
            public void itemExited(VisualItem item, MouseEvent e) {
                title.setText(null);
                Display d = (Display)e.getSource();
                d.setToolTipText(null);
            }

            @Override
            public void itemClicked(VisualItem item, MouseEvent e) {
                if(item instanceof NodeItem)
                {
                    Node nodeData = (Node)item.getSourceTuple();
                    if(nodeData.getString("type").equals("level"))
                    {
                        if(prefuseTree.getRoot().getString("name").equals(nodeData.getString("name")))
                        {
                            //System.out.println("up level");
                            prefuseTree.removeChild(nodeData);
                           // xmlLoader.upLevel();

                        }
                        else
                        {
                          //  System.out.println("down level");

                            prefuseTree.removeChild(nodeData);
                            //xmlLoader.downLevel(nodeData);

                        }
                    }else if(nodeData.getString("type").equals("branch"))
                    {

                    }else if(nodeData.getString("type").equals("variable"))
                    {

                    }else if(nodeData.getString("type").equals("status"))
                    {

                    }
                }
            }

        });

        Box box = new Box(BoxLayout.X_AXIS);
        box.add(Box.createHorizontalStrut(10));
        box.add(title);
        box.add(Box.createHorizontalGlue());
        box.add(search);
        box.add(Box.createHorizontalStrut(3));
        box.setBackground(BACKGROUND);

        panel = new JPanel(new BorderLayout());
        panel.setBackground(BACKGROUND);
        panel.setForeground(FOREGROUND);
        panel.add(tview, BorderLayout.CENTER);
        panel.add(box, BorderLayout.SOUTH);
        return panel;
    }

    public void setOrientation(int orientation) {
        NodeLinkTreeLayout rtl = (NodeLinkTreeLayout) vis.getAction("treeLayout");
        CollapsedSubtreeLayout stl = (CollapsedSubtreeLayout) vis.getAction("subLayout");
        switch (orientation) {
            case Constants.ORIENT_LEFT_RIGHT:
                m_nodeRenderer.setHorizontalAlignment(Constants.LEFT);
                m_edgeRenderer.setHorizontalAlignment1(Constants.RIGHT);
                m_edgeRenderer.setHorizontalAlignment2(Constants.LEFT);
                m_edgeRenderer.setVerticalAlignment1(Constants.CENTER);
                m_edgeRenderer.setVerticalAlignment2(Constants.CENTER);
                break;
            case Constants.ORIENT_RIGHT_LEFT:
                m_nodeRenderer.setHorizontalAlignment(Constants.RIGHT);
                m_edgeRenderer.setHorizontalAlignment1(Constants.LEFT);
                m_edgeRenderer.setHorizontalAlignment2(Constants.RIGHT);
                m_edgeRenderer.setVerticalAlignment1(Constants.CENTER);
                m_edgeRenderer.setVerticalAlignment2(Constants.CENTER);
                break;
            case Constants.ORIENT_TOP_BOTTOM:
                m_nodeRenderer.setHorizontalAlignment(Constants.CENTER);
                m_edgeRenderer.setHorizontalAlignment1(Constants.CENTER);
                m_edgeRenderer.setHorizontalAlignment2(Constants.CENTER);
                m_edgeRenderer.setVerticalAlignment1(Constants.BOTTOM);
                m_edgeRenderer.setVerticalAlignment2(Constants.TOP);
                break;
            case Constants.ORIENT_BOTTOM_TOP:
                m_nodeRenderer.setHorizontalAlignment(Constants.CENTER);
                m_edgeRenderer.setHorizontalAlignment1(Constants.CENTER);
                m_edgeRenderer.setHorizontalAlignment2(Constants.CENTER);
                m_edgeRenderer.setVerticalAlignment1(Constants.TOP);
                m_edgeRenderer.setVerticalAlignment2(Constants.BOTTOM);
                break;
            default:
                throw new IllegalArgumentException(
                        "Unrecognized orientation value: " + orientation);
        }
        m_orientation = orientation;
        rtl.setOrientation(orientation);
        stl.setOrientation(orientation);
    }

    public int getOrientation() {
        return m_orientation;
    }

    public class OrientAction extends AbstractAction {

        private int orientation;

        public OrientAction(int orientation) {
            this.orientation = orientation;
        }

        @Override
        public void actionPerformed(ActionEvent evt) {
            setOrientation(orientation);
            getVisualization().cancel("orient");
            getVisualization().run("treeLayout");
            getVisualization().run("orient");
        }
    }

    public class AutoPanAction extends Action {

        private Point2D m_start = new Point2D.Double();
        private Point2D m_end = new Point2D.Double();
        private Point2D m_cur = new Point2D.Double();
        private int m_bias = 150;

        @Override
        public void run(double frac) {
            TupleSet ts = vis.getFocusGroup(Visualization.FOCUS_ITEMS);
            if (ts.getTupleCount() == 0) {
                return;
            }

            if (frac == 0.0) {
                int xbias = 0, ybias = 0;
                switch (m_orientation) {
                    case Constants.ORIENT_LEFT_RIGHT:
                        xbias = m_bias;
                        break;
                    case Constants.ORIENT_RIGHT_LEFT:
                        xbias = -m_bias;
                        break;
                    case Constants.ORIENT_TOP_BOTTOM:
                        ybias = m_bias;
                        break;
                    case Constants.ORIENT_BOTTOM_TOP:
                        ybias = -m_bias;
                        break;
                }

                VisualItem vi = (VisualItem) ts.tuples().next();
                m_cur.setLocation(getWidth() / 2, getHeight() / 2);
                getAbsoluteCoordinate(m_cur, m_start);
                m_end.setLocation(vi.getX() + xbias, vi.getY() + ybias);
            } else {
                m_cur.setLocation(m_start.getX() + frac * (m_end.getX() - m_start.getX()),
                        m_start.getY() + frac * (m_end.getY() - m_start.getY()));
                panToAbs(m_cur);
            }
        }
    }

    public static class NodeColorAction extends ColorAction {

        public NodeColorAction(String group) {
            super(group, VisualItem.FILLCOLOR);
        }

        @Override
        public int getColor(VisualItem item) {
            if (vis.isInGroup(item, Visualization.SEARCH_ITEMS)) {
                return ColorLib.rgb(255, 190, 190);
            } else if (vis.isInGroup(item, Visualization.FOCUS_ITEMS)) {
                return ColorLib.rgb(198, 229, 229);
            } else if (item.getDOI() > -1) {
                return ColorLib.rgb(164, 193, 193);
            } else {
                return ColorLib.rgba(255, 255, 255, 0);
            }
        }
    } // end of inner class TreeMapColorAction
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:44:36.307

您可以使用 TreeWillExpandListener 将创建节点子节点的代码放在那里。

```
public void treeWillExpand(TreeExpansionEvent event) 
```

# asp.net - 带有更多按钮的中继器

> ID：10495357
> 
> 赞同：-1
> 
> 时间：2012-05-08T08:44:20.900
> 
> 标签：asp.net

我正在使用**中继器**控件。我最多可以有大约 300 条记录。

我不想使用**Paging**。可以在**Repeater**底部的**More**按钮的帮助下显示**更多**记录。

 ****您是否有任何类似的示例演示了这种用法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:28:35.133

正如评论者所说，您确实需要分页

您需要将`PagedDataSource`用作转发器的数据源。这个[链接](http://www.dotnetcurry.com/ShowArticle.aspx?ID=345)显示了如何。因为中继器不提供任何“开箱即用”的分页控件，所以您可以自由编写任何您想要的分页控件 - 在您的情况下是更多按钮。从链接中，数据绑定将类似于

```
pagedDataSource page = new PagedDataSource();
            page.AllowCustomPaging = true;
            page.AllowPaging = true;
            page.DataSource = query;
            page.PageSize = 10;
            Repeater1.DataSource = page;
            Repeater1.DataBind(); 
```

您的分页可能是 linq

```
protected btnMoreClick(object sender, EventArgs e)
{
    //.. get the source
    var dataSource = GetDataSource()

    //.. page it - i.e. use link
    dataSource.Skip(currentPage * pageSize).Take(pageSize)

    //.. now bind the source again
    //.. your code

} 
```

请注意，上面是伪代码，只是为了给您提供想法并帮助您入门。

**还**

[我发布了一个关于有效分页](https://stackoverflow.com/questions/9133938/efficient-paging-in-web-application/9134091#9134091)的先前答案，我认为这与您的情况相关。

希望这可以帮助****

# java - 将 jint 转换为 jstring

> ID：10495361
> 
> 赞同：4
> 
> 时间：2012-05-08T08:44:45.653
> 
> 标签：java, c, java-native-interface, type-conversion

```
#include <stdio.h>
#include "Package_MyTester.h"

jstring Java_Package_MyTester_NMethod
 (JNIEnv *env, jobject obj, jint first, jint second) {
  jint result_i = first * second;
  jstring result;
  int x = 0;
  for(x=0;x<5;x++) {
      printf("%d",x);
  }

  return result;      
} 
```

该程序将两个 jints 相乘。结果必须在 jstring 中。有没有办法将 jint 转换为 jstring ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T09:03:46.283

您需要创建一个包含结果的 C 缓冲区（使用`sprintf`），然后返回`NewStringUTF`函数的结果：

```
jstring Java_Package_MyTester_NMethod
 (JNIEnv *env, jobject obj, jint first, jint second) {
  jint result_i = first * second;
  char buf[64]; // assumed large enough to cope with result

  sprintf(buf, "%d", result_i);  // error checking omitted

  return (*env)->NewStringUTF(env, buf);      
} 
```

[请参阅http://java.sun.com/docs/books/jni/html/objtypes.html](http://java.sun.com/docs/books/jni/html/objtypes.html)的§3.2.3

# c# - Linq 查询嵌套列表

> ID：10495362
> 
> 赞同：0
> 
> 时间：2012-05-08T08:44:45.827
> 
> 标签：c#, linq

我有一个列表，每个 Foo 都包含一个列表，

我想根据 DateTime 列表中的条件过滤 List 中的项目。例如，我想获取嵌入列表中具有重复日期时间的所有 Foo 项目。

我已经尝试了很多事情，但我认为我的逻辑在我想要实现的目标中略有缺陷。任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:52:35.400

我相信你正在寻找这样的东西：

```
List<Foo> foos = new List<Foo>();

Random r = new Random();

for (int i = 0; i < 100; i++)
{
    foos.Add(new Foo { Bar = DateTime.Now.Date.AddDays(r.Next(0, 365)) });
}

IList<Foo> filteredFoos = foos.Where(f1 => foos.Count(f2 => f2.Bar == f1.Bar) > 1).ToList(); 
```

Foo 的样子：

```
class Foo
{
    public DateTime Bar { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:01:54.977

这可能会对您有所帮助（即使很难弄清楚您拥有/需要什么，正如安德鲁已经说过的那样）：

```
public class Foo
{
    public Foo(IEnumerable<DateTime> dates)
    {
        this.Dates = new List<DateTime>(dates);
    }

    public IList<DateTime> Dates { get; private set; }

    public static IEnumerable<Foo> FindFoos(IList<Foo> source)
    {
        return from f in source
               where f.Dates.Distinct().Count() < f.Dates.Count
               select f;
    }
} 
```

**免责声明：**它根本没有效率。使用不同的数据结构或更复杂的算法将加快速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T10:30:57.417

尝试

```
var duplicateDateFoos = foos.Where(foo => foo.DateTimes.GroupBy(d => d).Any(dateGroup => dateGroup.Count() > 1)); 
```

对于每个 foo，这将按其 DateTime 值对 DateTimes 列表进行分组。如果对于特定的 foo，存在一个包含多个项目的分组 - 即此 foo 的 DateTimes 中的至少两个条目具有相同的值 - 那么此 foo 将被添加到 duplicateDateFoos 列表中。

# java - nodejs 不会在 Java 程序成功 POST 时始终触发“数据”事件

> ID：10495364
> 
> 赞同：0
> 
> 时间：2012-05-08T08:45:08.277
> 
> 标签：java, json, http, node.js, post

我编写了一些代码来定期将数据发布到 NodeJs 程序，该程序侦听 POST 并打印数据。然而，有时头球可以通过，有时头球和身体都可以通过。这是发布数据的 Java 代码：

```
JSONObject dataObject = new JSONObject();
dataObject.put("test", "true");
URLConnection urlConn = thisSubUrl.openConnection();
urlConn.setDoInput (true);
urlConn.setDoOutput(true);
urlConn.setUseCaches (false);
urlConn.setRequestProperty("Content-Type", "application/json");
OutputStreamWriter wr = new OutputStreamWriter(urlConn.getOutputStream());
String dataStr = dataObject.toString();
wr.write(dataStr, 0, dataStr.length());
wr.flush();
wr.close();

BufferedReader in = new BufferedReader(new InputStreamReader(urlConn.getInputStream()));
in.close(); 
```

服务器代码如下所示：

```
var server= http.createServer(function(req,res){
req.setEncoding('utf8');
console.log(req.headers);
req.on('data', function(chunk) {
          console.log("Receive_Event::" + chunk);
         });
req.on('end', function() {
    console.log('on end');
});

console.log("Bytes received: " + req.socket.bytesRead);
if(req.method=='POST'){
    handlePost(req,res);
} else{
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end();
}
}).listen(1338, "127.0.0.1"); 
```

标题总是被打印出来。接收到的字节数在长度上有所不同，在标头中的字节数和标头中的字节数 + 正文长度之间。

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:53:27.697

可能发生的情况是，在您收到所有“数据”块之前，您将发出`res.end()`（不知道实际做了什么）。`handlePost`您应该在“结束”事件中调用所有额外的逻辑

```
var server= http.createServer(function(req,res){
    req.setEncoding('utf8');

    console.log(req.headers);

    req.on('data', function(chunk) {
        console.log("Receive_Event::" + chunk);
    });

    req.on('end', function() {
        console.log('on end');
        console.log("Bytes received: " + req.socket.bytesRead);
        if(req.method=='POST'){
            handlePost(req,res);
        } else{
            res.writeHead(200, {'Content-Type': 'text/plain'});
            res.end();
        }
    });

}).listen(1338, "127.0.0.1"); 
```

# sql - 根据碎片结果自动重建索引？

> ID：10495367
> 
> 赞同：14
> 
> 时间：2012-05-08T08:45:25.610
> 
> 标签：sql, sql-server, sql-server-2005

是否可以添加维护作业来检查索引碎片。如果大于 50% 则自动重建这些索引？

索引大小可以从 100MB 到 10GB 不等。2005 年的 SQL。

谢谢你。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-08T08:58:49.830

我使用这个脚本。请注意，我建议您阅读有关我在这里使用的 dmv 的信息，它们是 SQL2005+ 中的隐藏宝石。

```
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED
CREATE TABLE #FragmentedIndexes
(
 DatabaseName SYSNAME
 , SchemaName SYSNAME
 , TableName SYSNAME
 , IndexName SYSNAME
 , [Fragmentation%] FLOAT
)

INSERT INTO #FragmentedIndexes
SELECT
 DB_NAME(DB_ID()) AS DatabaseName
 , ss.name AS SchemaName
 , OBJECT_NAME (s.object_id) AS TableName
 , i.name AS IndexName
 , s.avg_fragmentation_in_percent AS [Fragmentation%]
FROM sys.dm_db_index_physical_stats(db_id(),NULL, NULL, NULL, 'SAMPLED') s
INNER JOIN sys.indexes i ON s.[object_id] = i.[object_id]
AND s.index_id = i.index_id
INNER JOIN sys.objects o ON s.object_id = o.object_id
INNER JOIN sys.schemas ss ON ss.[schema_id] = o.[schema_id]
WHERE s.database_id = DB_ID()
AND i.index_id != 0
AND s.record_count > 0
AND o.is_ms_shipped = 0
DECLARE @RebuildIndexesSQL NVARCHAR(MAX)
SET @RebuildIndexesSQL = ''
SELECT
 @RebuildIndexesSQL = @RebuildIndexesSQL +
CASE
 WHEN [Fragmentation%] > 30
   THEN CHAR(10) + 'ALTER INDEX ' + QUOTENAME(IndexName) + ' ON '
      + QUOTENAME(SchemaName) + '.'
      + QUOTENAME(TableName) + ' REBUILD;'
 WHEN [Fragmentation%] > 10
    THEN CHAR(10) + 'ALTER INDEX ' + QUOTENAME(IndexName) + ' ON '
    + QUOTENAME(SchemaName) + '.'
    + QUOTENAME(TableName) + ' REORGANIZE;'
END
FROM #FragmentedIndexes
WHERE [Fragmentation%] > 10
DECLARE @StartOffset INT
DECLARE @Length INT
SET @StartOffset = 0
SET @Length = 4000
WHILE (@StartOffset < LEN(@RebuildIndexesSQL))
BEGIN
 PRINT SUBSTRING(@RebuildIndexesSQL, @StartOffset, @Length)
 SET @StartOffset = @StartOffset + @Length
END
PRINT SUBSTRING(@RebuildIndexesSQL, @StartOffset, @Length)
EXECUTE sp_executesql @RebuildIndexesSQL
DROP TABLE #FragmentedIndexes 
```

另请记住，此脚本可以运行一段时间并阻止对您的表的访问。除非您有企业版，否则 SQL 可以在重建索引时锁定表。这将阻止使用索引对该表的所有查询，直到索引碎片整理完成。因此，不建议仅在维护窗口期间的操作时间内运行索引重建。如果您运行的是企业版，则可以使用 ONLINE=ON 选项在线对索引进行碎片整理。这将使用更多空间，但在碎片整理操作期间您的表不会被阻止/锁定。

如果您需要更多信息，请大声喊叫。

更新：

如果您在较小的数据库上运行此查询，您可能可以在调用 sys.dm_db_index_physical_stats 时使用“DETAILED”参数。这可能是对索引的更详细检查。评论中的讨论还将指出，在更大的表上，可能值得进行 SAMPLED 扫描，因为这将有助于减少进行索引扫描所需的时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T22:01:34.933

以防万一，您正在考虑避免创建任何临时表并解析字符串以创建 SQL 字符串列表。这是实现它的有效方法：

```
USE databasename

GO

DECLARE @Queryresult NVARCHAR(4000)

SET @Queryresult=''

SELECT

  @Queryresult=@Queryresult + 'ALTER INDEX ' + QUOTENAME(i.name) + ' ON '
  + QUOTENAME('dbo') + '.'
  + QUOTENAME(OBJECT_NAME(i.OBJECT_ID)) + ' REBUILD;'

 FROM sys.dm_db_index_physical_stats(DB_ID(), NULL, NULL, NULL, 'SAMPLED') ss

  INNER JOIN sys.indexes i ON i.OBJECT_ID = ss.OBJECT_ID AND i.index_id = ss.index_id

  INNER JOIN sys.objects o ON ss.object_id = o.object_id

WHERE ss.avg_fragmentation_in_percent > 50

AND ss.record_count > 0 

AND o.is_ms_shipped = 0 --Excludes any objects created as a part of SQL Server installation

AND ss.index_id > 0     --Excludes heap indexes

EXEC sp_executesql @Queryresult 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T08:52:18.290

是的你可以。

您可以使用以下查询获取碎片索引：

```
SELECT OBJECT_NAME(i.OBJECT_ID) AS TableName,
i.name AS IndexName,
indexstats.avg_fragmentation_in_percent
FROM sys.dm_db_index_physical_stats(DB_ID(), NULL, NULL, NULL, 'DETAILED') indexstats
INNER JOIN sys.indexes i ON i.OBJECT_ID = indexstats.OBJECT_ID
AND i.index_id = indexstats.index_id
WHERE indexstats.avg_fragmentation_in_percent > 20 
```

并根据结果构建一个命令来重新创建它们

我会将所有内容包装在存储过程中并从 SQL Server 作业中调用它

仅供参考，50% 是一个非常大的碎片。我会少一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T08:52:28.397

您可以使用[sys.dm_db_index_physical_stats](http://msdn.microsoft.com/en-us/library/ms188917.aspx)获取有关索引碎片的信息（请参阅 avg_fragmentation_in_percent 列）。然后，只要达到阈值，您就可以使用rebuild 子句执行alter index。

# bash - 将 Bash 脚本转换为 OpenVMS 语法

> ID：10495368
> 
> 赞同：0
> 
> 时间：2012-05-08T08:45:26.200
> 
> 标签：bash, shell, scripting, openvms

我需要将我的 bash 脚本转换为 OpenVMS，有人知道自动转换器还是可以手动帮助我？

```
#!/bin/bash
#
# Convert input to .CNF
inputfile=$1

rm outfile;
for line in $(cat $inputfile | awk '{ print $1 }' | tr '\*' ' ' | grep 0041); do
if [ `cat $inputfile | grep ${line:0:11} | wc -l` -eq 100 ]; then
echo "?,    ?,    "${line:2:9}\* >> outfile;
elif [ `cat $inputfile | grep ${line:0:12} | wc -l` -eq 10 ]; then
echo "?,    ?,    "${line:2:10}\* >> outfile;
else
echo "?,    ?,    "${line:2} >> outfile;
fi;
#echo ${line:0:11};
done;
cat outfile | sort -u >> newoutfile; 
```

输入文件包含一个数字列表，如果后面有 10 或 100 个数字，我需要将它们分组，否则正常打印它们。例子：

```
0041XYZ070690*
0041XYZ070691*
0041XYZ070692*
0041XYZ070693*
0041XYZ070694*
0041XYZ070695*
0041XYZ070696*
0041XYZ070697*
0041XYZ070698*
0041XYZ070699*
0041XYZ077778* 
0041XYZ077949* 
0041XYZ077950* 
```

变成：

```
?,    ?,    0041XYZ07069*
?,    ?,    0041XYZ077778
?,    ?,    0041XYZ077949
?,    ?,    0041XYZ077950 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-22T15:56:09.763

另一种选择是在 Python 中执行此操作

作者没有说明他们正在运行哪个版本的 OpenVMS

如果是旧版本（8.2之前）可以下载LD工具安装。从内存中，它将需要重新启动

从 8.2 开始，LD 工具完全集成到 OpenVMS 中

LD 工具将允许您在 OpenVMS 上创建和挂载容器文件

有 Python LD 容器文件已经预装了 Python，这意味着您不必安装 Python，只需挂载 Python LD 容器文件并运行它（首先您需要通过编译来准备 Python 构建，但这都包含在 LD 文件中，它不会在 OpenVMS 平台上安装任何新内容）

安装 Python 后（在 LD 容器文件中），您可以编写 Python 脚本并根据需要调用它们

脚步：

1.  如果 OpenVMS < 8.2; 下载并安装 LD 实用程序；重启

( [http://www.digiater.nl/lddriver.html](http://www.digiater.nl/lddriver.html) )

2.  下载适用于 OpenVMS 容器和相关工具容器的 Python（2 个 LD 映像）。

( [http://www.vmspython.org/doku.php?id=downloadandinstallationpython](http://www.vmspython.org/doku.php?id=downloadandinstallationpython) )

3.  将 LD 容器文件挂载为 LD 磁盘

4.  编译 Python（这是一次性的）

5.  运行 Python 启动（本地到您的进程或系统范围，您的选择）

6.  调用 Python

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T00:38:06.350

我不知道转换器，但你应该能够在 DCL 中轻松地做到这一点。棘手的部分将用几行逻辑处理替换 AWK 处理 - 除非您的系统有可用的 GAWK。

我不知道 bash，但很清楚您需要使用哪些 DCL 命令。我建议在 DCL HELP（例如 $ help open）或文档集中查看以下内容，

打开

读

词法（特别是 f$locate 和 f$extract）

如果（那么/否则）

写

我想这取决于你已经知道多少 DCL。如果您需要学习基础知识，那么 OpenVMS 用户手册是一个很好的起点[http://h71000.www7.hp.com/doc/731final/6489/6489pro_contents.html](http://h71000.www7.hp.com/doc/731final/6489/6489pro_contents.html) （第 2、12、13 和 14 章）特别是）。

Alos [http://dcl.openvms.org/](http://dcl.openvms.org/)可能是一个方便的资源——你甚至可以在那里找到一个转换器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:37:03.963

由于 GNV 非常不稳定，我决定使用外部 Linux 主机，它首先通过 ssh 接收输出，然后修改它（使用上面的脚本）并通过 sftp 将其写回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T20:40:10.630

您可能对 GNV（OpenVMS 上的 GNU）套件感兴趣。 [http://h71000.www7.hp.com/opensource/gnv.html](http://h71000.www7.hp.com/opensource/gnv.html)

它是免费的并且有效。它支持 bash，但不确定 awk。这样，您应该能够在 VMS 上使用相同的脚本。

在 DCL 中重写你的脚本也是很有可能的。除了使用 DCL“等效项”直接复制 bash 步骤之外，还有几种方法可以做到这一点。如果您仍然需要帮助，您可以告诉我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-17T16:08:27.733

两年后，我偶然发现了这个话题。为什么不完全在 AWK 或 PERL 中解决这个问题？该死的脚本小马/一招小马！使用的解决方案不会扩展，因为它是 N 方算法（然后还有更多）

对于存在的每条数据行，数据文件都会被完全读取（两次。由 cat 和 grep 读取）这表明一定没有数百万行。

这个假设允许我们简单地将“十”和“百”计数器累加到一个数组中。最坏的情况（一个唯一的数百组中的每个记录）每个数组中的元素将与输入记录一样多。更有可能的是总数不到一半。下面的 awk 脚本应该可以在 OpenVMS 上运行，并且仅使用提供的数据集进行测试。对于“真正的”解决方案，最好知道输入是否已排序，是否有重复，等等。

享受吧，海因。

```
$!  DCL ... is is not. Just AWK
$ gawk /VAR=(INPUTFILE='p1') /INPUT=SYS$INPUT NL:
BEGIN {
   while ((getline < INPUTFILE) > 0) {
     lines++
     if ($0 !~ /0041/)  continue
     tens[substr($0,1,12)]++
     huns[substr($0,1,11)]++
   }
   print lines i" lines read from " INPUTFILE
   close (INPUTFILE)
   while ((getline < INPUTFILE) > 0) {
     if ($0 !~ /0041/) continue
     sub(/\*/,"",$0)
     k =  substr($0,1,11)
     x =  huns[k]
     if (x == -1) continue
     if (x == 100) {
        print "?, " k "**"
        huns[k] = -1
        continue
        }
     k = substr($0,1,12)
     x = tens[k]
     if (x == -1) continue
     if (x == 10) {
        print "?, " k "*"
        tens[k] = -1
        continue
        }
     print "?, " $0
     }
}
$ EXIT 
```

# mysql - mySQL 错误：#1248 - 每个派生表都必须有自己的别名

> ID：10495373
> 
> 赞同：7
> 
> 时间：2012-05-08T08:45:34.280
> 
> 标签：mysql

如何通过设置别名来纠正此错误？**错误：#1248 - 每个派生表都必须有自己的别名**

```
SELECT 
    entry_id,
    author_id,
    title,
    status
FROM exp_channel_titles

LEFT JOIN
(SELECT
    entry_id, 
    field_id_14,
    field_id_15,
    field_id_25,
    field_id_27, 
    field_id_28, 
    field_id_29, 
    field_id_30,
    field_id_31,
    field_id_32,
    field_id_33,
    field_id_34,
    field_id_35
FROM exp_channel_data
WHERE entry_id = exp_channel_titles.entry_id)

LEFT JOIN
(SELECT   
    member_id,
    email
FROM exp_members
WHERE member_id = exp_channel_titles.author_id)

WHERE title LIKE %Member% 
AND status = 'complete' 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-08T08:48:26.937

好吧，正如错误所说，您必须命名每个派生表。例如

```
(SELECT   
    member_id,
    email
FROM exp_members
WHERE member_id = exp_channel_titles.author_id) 
```

是派生表。添加这样的名称：

```
(SELECT   
    member_id,
    email
FROM exp_members
WHERE member_id = exp_channel_titles.author_id) tempTableNameGoesHere 
```

（我想我确定括号和名称之间不需要一个`as`，但我想你可以尝试一下，或者从这里查找它；））

您的后续问题（我们要这样做多久？:)）

```
 WHERE title LIKE %Member% 
```

应该

```
WHERE title LIKE '%Member%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T08:59:49.127

```
SELECT 
    ect.entry_id,
    ect.author_id,
    ect.title,
    ect.status
FROM exp_channel_titles as ect

LEFT JOIN
(SELECT
    entry_id, 
    field_id_14,
    field_id_15,
    field_id_25,
    field_id_27, 
    field_id_28, 
    field_id_29, 
    field_id_30,
    field_id_31,
    field_id_32,
    field_id_33,
    field_id_34,
    field_id_35
FROM exp_channel_data) as ecd 
ON ecd.entry_id = ect.entry_id

LEFT JOIN
(SELECT   
    member_id,
    email
FROM exp_members) as exm
ON exm.member_id = ect.author_id

WHERE ect.title LIKE '%Member%' 
AND ect.status = 'complete' 
```

# cakephp - Cake php 和在布局中使用身份验证

> ID：10495374
> 
> 赞同：4
> 
> 时间：2012-05-08T08:45:38.697
> 
> 标签：cakephp, cakephp-2.0

我正在使用身份验证组件，它工作正常。但是在内容之前的默认布局中，如果用户登录，我有一些不同的菜单。所以我想确定用户是否登录 - 通常我使用 $this->Auth->user('id')但是 $this->Auth 在布局中不起作用（它仅适用于查看哪个控制器正在使用 Auth 组件）。

怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-08T08:55:25.793

在 beforeRender() 中只需调用

```
$this->set('userData', $this->Auth->user()); 
```

并将数据设置到视图并在视图中进行检查。

为了在布局中获取数据，您应该调用`beforeRender()`AppController 中的方法。

恕我直言，通过会话传递它不是一个好主意。这可能不是通常的情况，但至少我更喜欢做一些可靠的事情：如果您使用会话，那么您的代码将在不使用会话的系统中失败（无状态身份验证）。总的来说，我根本不喜欢在视图中访问会话。会话对我来说更像是一个数据源。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T09:14:03.880

您可以从会话中读取 Auth 数据。就像是：

```
$user = $session->read('Auth'); 
```

不要忘记在 AppController 中添加会话助手。

```
var $helpers = array('Session'); 
```

# android - 我无法查看应用程序是否成功登录

> ID：10495382
> 
> 赞同：0
> 
> 时间：2012-05-08T08:46:19.773
> 
> 标签：android

```
@Override
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);

     txtUserName=(EditText)this.findViewById(R.id.txtUname);
     txtPassword=(EditText)this.findViewById(R.id.txtPwd);
     btnLogin=(Button)this.findViewById(R.id.btnLogin);

           Button  btnLogin=(Button)this.findViewById(R.id.Button01);
         btnLogin.setOnClickListener(new OnClickListener() {

             @Override
             public void onClick(View v) {
                 if((txtUserName.getText().toString()).equals(txtPassword.getText().toString())){
                       Toast.makeText(LoginappActivity.this, "Login Successful",Toast.LENGTH_LONG).show();
                 } 
                 else
                 {
                       Toast.makeText(LoginappActivity.this, "Invalid Login",Toast.LENGTH_LONG).show(); 
                 }
               }
             }
         );

           Button next = (Button) findViewById(R.id.Button01);
           next.setOnClickListener(new View.OnClickListener() {   

                public void onClick(View view) {
                Intent myIntent = new Intent(view.getContext(), AddName.class);
                startActivityForResult(myIntent, 0); 
            }});    
       }    
 } 
```

当应用程序在模拟器中运行时，它编译成功，但我不知道是登录成功还是登录无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:50:51.660

您需要将此代码放在登录按钮的 onClickListner 中。修改后的颂歌应该是

```
Button  btnLogin=(Button)this.findViewById(R.id.Button01);
             btnLogin.setOnClickListener(new OnClickListener() {

                 @Override
                 public void onClick(View v) {
                     // TODO Auto-generated method stub
if((txtUserName.getText().toString()).equals(txtPassword.getText().toString())){
            Toast.makeText(LoginappActivity.this, "Login Successful",Toast.LENGTH_LONG).show();
           } else{
            Toast.makeText(LoginappActivity.this, "Invalid Login",Toast.LENGTH_LONG).show(); 
            }
              }
                 }
             }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:52:02.967

在按钮单击事件中写入 If...Else。

```
 Button  btnLogin=(Button)this.findViewById(R.id.Button01);
         btnLogin.setOnClickListener(new OnClickListener() {

             @Override
             public void onClick(View v) {
                 if((txtUserName.getText().toString()).equals(txtPassword.getText().toString())){
                       Toast.makeText(LoginappActivity.this, "Login Successful",Toast.LENGTH_LONG).show();
                 } 
                 else
                 {
                       Toast.makeText(LoginappActivity.this, "Invalid Login",Toast.LENGTH_LONG).show(); 
                 }
               }
             }
         }); 
```

# python - 使用 Python 解析 XML 时维护特殊字符？

> ID：10495387
> 
> 赞同：1
> 
> 时间：2012-05-08T08:46:34.780
> 
> 标签：python, xml, xml-parsing, special-characters

我有一个 XML 文件，我正在用 Python 解析它并作为 Python 代码输出到文件中。

一些 XML 包含 Reg Ex 值和字符串，它们将在屏幕上显示为对话框，因此我需要维护一些特殊字符。代码如下，但如何做到这一点？

XML 看起来有点像这样；

```
<variable id="passportnumber" value="" type="String">
    <validate>
        <regularExpression fieldID="passportnumber" errorID="3007162"><![CDATA[^[a-zA-Z+:?<>;*()%="!0-9./',&\s-]{1,35}$]]></regularExpression>
    </validate>
</variable> 
```

对于对话；

```
<if>
    <condition><![CDATA[$taxcode$ == $previousemergencytaxcode$ and $previousemergencytaxcode$ != $emergencytaxcode$]]></condition>
    <then>
        <dialog id="taxCodeOutdatedDialog" text="Are you sure this is the correct tax
        code? &#10; &#10;The emergency code for the tax year 2011-12 was
        '$previousemergencytaxcode$'. &#10;The emergency code for the tax
        year 2012-13 is '$emergencytaxcode$'. &#10; &#10;Proceed?" type="YES|NO|CANCEL" />
    </then>
</if> 
```

完整的 Python 脚本在[这里](http://pastebin.com/D9DkQdEv)，解析这两个的细节是；

```
def parse_regularExpression(self, elem):
    self.out('')
    self.out("item_regularExpression(fieldID='{0}', value='{1}')".format(elem.attrib['fieldID'],elem.text))

def parse_dialog(self, elem):
    self.out('')
    self.out("item_dialog(id='{0}', text='{1}', type='{2}')".format(elem.attrib['id'], elem.attrib['text'],elem.attrib['type'])) 
```

换行符 ( `&#10;`) 是我不确定如何处理的主要问题。似乎 etree 将其作为换行符输出，即使它是三重引号。它将文本值输出为；

```
item_dialog(id='taxCodeOutdatedDialog', text='Are you sure this is the correct tax code? 

The emergency code for the tax year 2011-12 was '$previousemergencytaxcode$'. 
The emergency code for the tax year 2012-13 is '$emergencytaxcode$'. 

Proceed?', type='YES|NO|CANCEL') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:58:15.813

我认为这正是你告诉它做的事情。XML 包含`&#10`我认为的换行符。然后你打印出那个字符串。

如果您想用打印输出中的其他内容替换换行符，那么您最好在阅读后但在输出之前这样做。（而不是试图在 XML 中更改它）。

您的代码最终将如下所示：

```
def parse_dialog(self, elem):
    self.out('')
    self.out("item_dialog(id='{0}', text='{1}', type='{2}')".format(
       escape_string(elem.attrib['id']),
       escape_string(elem.attrib['text']),
       escape_string( elem.attrib['type']) ))

def escape_string(s):
  ... 
```

这也更加强大，因为您的问题本质上是脚本注入问题/漏洞。

# mysql - MySQL：选择语句并有选择地检索数据

> ID：10495388
> 
> 赞同：1
> 
> 时间：2012-05-08T08:46:38.057
> 
> 标签：mysql, select, timestamp

我在 MySQL 中有一个大型数据集，我想在读取数据时加快 select 语句。假设有 1000 条记录，我想发出一个 select 语句，例如检索其中的一半，但基于时间戳。

使用这样的东西是行不通的，而 id 与时间戳不紧密耦合

```
select * from table where table.id mod 5 = 0; 
```

检索所有数据然后选择所需的数据不是解决方案，而我想避免检索大型数据集。因此，我正在寻找能够在选择时区分记录的东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:09:08.920

如果你需要速度，那么试试这个

```
select * from table ORDER BY table.id DESC LIMIT 0,500;

select * from table ORDER BY table.id DESC LIMIT 500,500; 
```

等等...

# ruby-on-rails - 如何使用设计配置超时？

> ID：10495390
> 
> 赞同：7
> 
> 时间：2012-05-08T08:46:45.610
> 
> 标签：ruby-on-rails, devise

模型：

```
devise :database_authenticatable, :registerable,:timeoutable, :recoverable, :rememberable, :trackable, :validatable,:timeout_in => 10.seconds 
```

开发.rb：

```
config.timeout_in = 10.seconds 
```

设计.rb：

```
config.timeout_in = 10.seconds 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-07-27T13:00:07.137

也可以动态设置 timeout_in 选项

```
class User < ActiveRecord::Base
  devise (...), :timeoutable

  def timeout_in
    if self.admin? 
      1.year
    else
      2.days
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T09:52:58.743

您是否希望页面刷新并再次显示登录页面？如果是这样，那不是超时功能的工作方式。如果您希望它在刷新时向您显示登录页面，请从模型中删除超时部分并将以下内容放入 devise.rb 而不是 development.rb 中。不要忘记重新启动 Rails 服务器。

```
config.timeout_in = 1.hour 
```

[这](https://github.com/plataformatec/devise/wiki)都记录在设计 wiki 中

另外，我不确定 10 秒背后的逻辑？好像有点太短了。如果它仍然不起作用，请增加到（例如）五分钟并进行测试。

# java - xpath如何读取xml间隔元素？

> ID：10495391
> 
> 赞同：0
> 
> 时间：2012-05-08T08:46:46.967
> 
> 标签：java, xml

这是 xml，不幸的是 XML 的任何内容**都不可更改**：

`<allowance name ='' /> <allowance type ='' /> <allowance value='' />`

而且我只需要在java中使用xpath获取“允许值”。怎么做到呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:54:03.937

此表达式将返回所有具有 'value' 属性的 'allowance' 元素：

```
//allowance[@value] 
```

这将只返回 "value" 的值：

```
//allowance[@value]/@value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:54:20.207

你可以试试：/root//allowance[@value]

# python - 打开子进程并与之通信

> ID：10495393
> 
> 赞同：0
> 
> 时间：2012-05-08T08:46:48.180
> 
> 标签：python, process

我有一个我使用的子流程。我必须能够异步地从这个进程读取和写入到它各自的标准输出和标准输入。

我怎样才能做到这一点？我看过`subprocess`，但是该`communicate`方法等待进程终止（这不是我想要的）并且该`subprocess.stdout.read`方法可以阻塞。

子进程**不是**Python 脚本，但如果绝对必要，可以对其进行编辑。我总共将拥有大约 15 个这样的子流程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:17:01.963

您是否考虑过使用一些队列或 NOSQL DB 进行进程间通信？我建议您使用 Redis，并在您的进程中读取和写入不同的键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:32:47.000

看看 sarge：[http ://sarge.readthedocs.org/en/latest/index.html](http://sarge.readthedocs.org/en/latest/index.html)

来自 sarge 文档：

如果您想与 Python 应用程序中的外部程序进行交互，Sarge 是一个库，旨在让您的生活比使用 Python 标准库中的 subprocess 模块更轻松。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T08:52:10.390

看看`communicate`是如何实现的。

基本上有两种方法可以做到：

1.  使用`select()`并被通知您是否可以读/写，
2.  或者将都可以阻塞的读取和写入分别委托给一个线程。

# javascript - 资源 - Javascript 文件奇怪的行为

> ID：10495394
> 
> 赞同：0
> 
> 时间：2012-05-08T08:46:48.450
> 
> 标签：javascript, spring, model-view-controller, resources, web

我的 spring web 项目中的 javascript 文件有问题。

我想知道这有什么问题，但是我的外部 javascript 文件没有反映我在运行程序时对其所做的更改。我要做的是我需要重命名文件，以便更改生效。

当我关闭 eclipse 并再次打开它时，更改将不会再次反映。然后我需要再次重命名 javascript 文件。

似乎它保留了每次我关闭和打开我的 Eclipse 时它拥有的以前的代码。

我还尝试删除 javascrip 文件，然后繁荣！！！即使我已经删除了它，它仍然运行以前的代码！！！

我迷路了，你们遇到过这个问题吗？

任何帮助，将不胜感激！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:44:11.587

该问题与 Spring Framework 无关，甚至在您的代码中也没有问题。问题出在您的 IDE 中。

尝试重新安装它。

# php - 间接修改重载属性 - cakephp

> ID：10495395
> 
> 赞同：2
> 
> 时间：2012-05-08T08:46:51.723
> 
> 标签：php, jquery, ajax, cakephp

我在 ajax 表单验证期间遇到了这个错误。

```
Notice (8): Indirect modification of overloaded property CommentsController::$data has no    effect [APP\Controller\CommentsController.php, line 78] 
```

错误中所述的具体行是这样的：

```
$this->data['Comment'][$this->params['form']['field']] = $this->params['form']['value']; 
```

我的 cakephp 版本是 2.1

他们说它在 1.3 中工作，但我将使用什么特定代码作为替代以使其与 2.1 兼容？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T08:52:51.660

这是

```
$this->request->data 
```

您应该[阅读迁移指南](http://book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html)。

* * *

从Cake3.4开始就是

```
$this->request->getData() 
```

请参阅3.4[的相关迁移](https://book.cakephp.org/3.0/en/appendices/3-4-migration-guide.html)指南 :)

# vb.net - 使用 WithEvents 声明取消注册到事件

> ID：10495401
> 
> 赞同：1
> 
> 时间：2012-05-08T08:47:28.850
> 
> 标签：vb.net

当使用 WithEvents 声明而不是 AddHanlder 时，取消注册 (removeHandler) 到 Event 的对应代码是什么？这仅仅是将 WithEvents 变量设置为 Nothing 吗？这是否足够（框架明智）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T20:47:43.143

假设我有一个表单，我只显示了一会儿，然后它就消失了，但它订阅了我的主域模型以获取有关更改的更新。我可能有这样的代码：

```
Private WithEvents _model As WeatherModel

Public Sub New(model As WeatherModel)
   _model = model
End Sub

Private Sub WeatherModel_Update(sender As Object, e As WeatherUpdateEventArgs) _
  Handles _model.WeatherUpdate

  'Handle updated weather conditions
End Sub 
```

由于我引用的模型将超过我，如果我不取消订阅我的事件处理程序，它将导致此表单不会被垃圾收集。在这种情况下，我想确保我`_model = Nothing`在我的`FormClosing`事件处理程序中这样做。

如果表单和`WithEvents`对象具有相同的生命周期（即同时超出范围）或存在于应用程序的整个生命周期，则无需担心。

# java - 使用 url 在 JFrame 中映射

> ID：10495407
> 
> 赞同：2
> 
> 时间：2012-05-08T08:47:48.823
> 
> 标签：java, swing, google-maps-api-3, jscrollpane, jtextpane

我正在尝试在我的框架中添加一个谷歌地图，我在这里读到最好的方法是打开一个 URL，所以，我做了：

```
 JTextPane myMap = new JTextPane();
    JScrollPane scroll = new JScrollPane();
    scroll.getViewport().add(myMap);

    scroll.setBounds(40,240,1200,644);
    background.add(scroll);

    try{
        URL url = getClass().getResource("/html/maps.html");

        myMap.setPage(url);
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

但是我什么也看不到，如果我使用 helloWorld.html 而不是 maps.htm 我会看到内容。

为什么会这样？

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T10:02:48.910

尝试这样的事情，所说的 URL 不是你的`Application Resource`，所以你必须像这样访问它，我猜

```
try
{
    java.net.URL url = new java.net.URL("http://gagandeepbali.uk.to/");
    tpane.setPage(url);
} 
catch (Exception e) 
{
    e.printStackTrace();
} 
```

这是一个小程序为您提供帮助：

```
import java.awt.*;
import javax.swing.*;

public class JTextPaneExample
{
    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("JTextPane Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JTextPane tpane = new JTextPane();
        tpane.setContentType("text/html");
        JScrollPane scroller = new JScrollPane();
        scroller.setViewportView(tpane);

        try
        {
            java.net.URL url = new java.net.URL("http://gagandeepbali.uk.to/");
            tpane.setPage(url);
        } 
        catch (Exception e) 
        {
            e.printStackTrace();
        }

        frame.getContentPane().add(scroller);
        frame.setSize(500, 500);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new JTextPaneExample().createAndDisplayGUI();
            }           
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T09:13:03.897

最好阅读教程[如何使用滚动窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)，然后有两种方法

```
JTextPane myMap = new JTextPane();
JScrollPane scroll = new JScrollPane(myMap); 
```

或者

```
JTextPane myMap = new JTextPane();
JScrollPane scroll = new JScrollPane();
scroll.setViewportView(myMap); 
```

不要，让我们为正确的[LayoutManager](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)`setBounds`做这份工作

# xaml - Expression Blend 3d 模型示例

> ID：10495409
> 
> 赞同：0
> 
> 时间：2012-05-08T08:47:58.073
> 
> 标签：xaml, expression-blend

我将使用 XAML 为 Silverlight 创建一些 3d 对象。我想为此使用 Expression Blend。它不是新工具，但我在 Expression Blend 中找不到任何 3d 模型示例。我没有提到立方体和其他简单的对象，我的意思是一些复杂的东西。这是否意味着我需要在 XNA 上寻找真正可爱的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:48:08.733

Expression Blend 并不是真正合适的工具。对于复杂的形状，让设计师在 Maya/3DS/whatever 中构建它们，然后使用[Zam3D](http://www.erain.com/products/zam3d/DefaultPDC.asp)之类的工具将它们转换为 xaml。

# drupal-7 - Drupal：如何删除 并 在使用语法高亮时从内容中标记

> ID：10495410
> 
> 赞同：1
> 
> 时间：2012-05-08T08:48:01.210
> 
> 标签：drupal-7

**使用版本 7.14**

我正在为我的网站使用[syntaxhighlighter](http://drupal.org/project/syntaxhighlighter) 。但是当我插入一些代码示例时，它总是会产生更多的输出

以及
单行内容。

我完成了，只需将 zend Studio 编辑器中的代码复制粘贴到 syntaxhighlighter 标记内

我搜索了许多论坛和 druapl 网站本身，但没有任何东西适合我。请给我建议

见下图了解更多

![在此处输入图像描述](../Images/56c3b9499dbf5110ac97792b01fa0399.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T22:52:21.333

尝试配置您的输入格式
/admin/config/content/formats
和 CKEditor Clenup 和输出设置
/admin/config/content/ckeditor/edit

# svn - 将我的 subversion 存储库添加到“corp 的”subversion 存储库，保留更改历史记录

> ID：10495412
> 
> 赞同：3
> 
> 时间：2012-05-08T08:48:17.197
> 
> 标签：svn

我目前有一个组颠覆存储库，其中有几年的历史。Corp 已经提出从现在开始托管我们的颠覆。我想知道将我们的存储库添加/导入/合并到 Corps 存储库的最佳方式是什么。我想保留历史记录，但我不介意我是否丢失了额外的道具，例如用户名进行更改，因为 a）他们没有映射到 Corp 的用户名和 b）我没有对其服务器的管理员访问权限，并且无法添加那些钩子。Corp 的存储库中已经有很多东西了——所以修订号也不再统计了——我不介意。重要的是不要丢失更改的细节（显然是更改的顺序）。我显然对我的存储库具有管理员访问权限 - 但对 Corps 存储库没有。

感谢您的建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T11:55:17.640

我自己从未使用过它，但**svnrdump**可能是你唯一的机会：

> 在 Subversion 1.7 中，svnrdump 加入了现有的 Subversion 工具集。它提供了相当专业的功能，本质上 **是 svnadmin dump 和 svnadmin load 命令的网络感知版本** ，我们在“使用 svnadmin 的存储库数据迁移”一节中深入讨论了这些命令。svnrdump dump 将从远程存储库生成转储流，将其发送到标准输出；**svnrdump load 将从标准输入读取转储流并将其加载到远程存储库**中。使用 svnrdump，您可以像使用 svnadmin dump 一样生成增量转储。您甚至可以转储存储库的子树——这是 svnadmin dump 无法做到的。

如果它确实对您有用，那么程序将是：

1.  在源代码库中进行适当`svn mv`的操作以将所有内容放入子目录中。
2.  `svnrdump dump`在源子目录上运行。
3.  在目标存储库中加载上一个转储。

会出什么问题？最有可能的是，两个存储库中都有包含公共路径的历史记录。我不知道 Subversion 会做什么。所以做广泛的测试和大量的备份:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T11:15:59.283

`svnadmin dump`并且`svnadmin load` [是你的朋友](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.maint.html#svn.reposadmin.maint.migrate)。不过，您必须让他们的管理员`svnadmin load`为您运行。

# jquery - 为什么我的 img 标签会创建两个请求？

> ID：10495415
> 
> 赞同：1
> 
> 时间：2012-05-08T08:48:20.583
> 
> 标签：jquery, html, image

HTML快照代码：

```
<div id='div'><img /></div> 
```

jQuery代码：

```
$("#div > img").click(function(){     
    var url = "path/to/img";
       $(this).attr("src", url);
       return false;    
}); 
```

在 Firebug 中，我只能看到一个请求，但`img`（来自 Firebug）不是显示的（来自浏览器）。从我的服务器，有两个请求。

即使我`img` `src`先设置，当点击时，它仍然会发出两个请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:52:49.333

拥有图像将导致向服务器发出加载其 src 的请求。更改其 src 将导致对新源发出请求。

使用 JavaScript 将图像添加到文档中，而不是从那里开始使用占位符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:59:14.493

您应该使用 jQuery 将图像添加到页面。您可以使用以下代码来实现此目的：

```
var img = $('<img></img>');
img.attr("src", url);
$("#div").html("");
$("#div").append(img); 
```

您应该将代码中的以下内容替换为上面的代码：

```
$(this).attr("src", url); 
```

# twitter-bootstrap - 如何关闭 twitter 引导模式（初始启动后）

> ID：10495421
> 
> 赞同：91
> 
> 时间：2012-05-08T08:49:02.483
> 
> 标签：twitter-bootstrap, modal-dialog

我是个菜鸟，所以我想我正在用 twitter 引导模式监督一些事情（可能很明显）。我想要做的是让一个模式只在移动设备上启动。这适用于在模态 div 上添加类 .visible-phone 。到目前为止，一切都很好。但是我希望它能够工作，这意味着您可以使用 X 按钮将其关闭。而且我无法让按钮工作。

```
<div class="modal visible-phone" id="myModal">
  <div class="modal-header">
    <button class="close" data-dismiss="modal">×</button>
    <h3>text introductory<br>want to navigate to...</h3>
 </div>
 <div class="modal-body">
    <ul class="nav">
      <li> ... list of links here </li>
    </ul>
   </div>
  </div> 
```

在 html 的底部，我放了 jquery.js（第一个）和 bootstrap.modal.js 和 bootstrap.transition.js。实际上所有的引导 js 模块（不要错过包含）。我对js没有经验..

如果我提出了一个非常愚蠢的问题，请原谅我。我在日志中找不到这种特定情况的答案。

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2012-11-30T23:17:28.480

`$('#myModal').modal('hide')`应该这样做

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-16T17:17:15.503

我在关闭引导模式对话框时遇到问题，如果它是通过以下方式打开的：

```
$('#myModal').modal('show'); 
```

我通过以下链接打开对话框解决了这个问题：

```
<a href="#myModal" data-toggle="modal">Open my dialog</a> 
```

不要忘记初始化：

```
$('#myModal').modal({show: false}); 
```

我还为关闭按钮使用了以下属性：

```
data-dismiss="modal" data-target="#myModal" 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-08-12T16:54:22.140

将类**隐藏**添加到模态

```
<!-- Modal Demo -->
<div class="modal hide" id ="myModal" aria-hidden="true" > 
```

Javascript代码

```
 <!-- Use this to hide the modal necessary for loading and closing the modal-->
 <script>
     $(function(){
         $('#closeModal').click(function(){
              $('#myModal').modal('hide');
          });
      });
 </script>

 <!-- Use this to load the modal necessary for loading and closing the modal-->
 <script>
     $(function () {
         $('#myModal').modal('show');
     });
  </script> 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-10-25T06:15:47.567

[**.modal('hide')**](http://getbootstrap.com/javascript/#modalhide)手动隐藏模式。使用以下代码关闭您的引导模型

```
$('#myModal').modal('hide'); 
```

看看[**这里的工作代码笔**](http://codepen.io/subodhghulaxe/pen/PPRzaQ)

或者

在这里试试

```
$(function () {
    $(".custom-close").on('click', function() {
        $('#myModal').modal('hide');
    });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet"/>

<!-- Button trigger modal -->
<button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
  Launch demo modal
</button>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Modal title</h4>
      </div>
      <div class="modal-body">

          <a class="custom-close"> My Custom Close Link </a>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-08T13:55:03.150

尝试准确指定按钮应使用数据目标关闭的模式。所以你的按钮应该如下所示 -

```
<button class="close" data-dismiss="modal" data-target="#myModal">×</button> 
```

此外，您应该只需要 bootstrap.modal.js 以便您可以安全地删除其他人。

编辑：如果这不起作用，则删除可见电话类并在您的 PC 浏览器而不是电话上对其进行测试。这将显示您是否收到 javascript 错误，或者它是否存在兼容性问题。

编辑：演示代码

```
<html>
<head>
    <title>Test</title>
    <link href="/Content/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <script src="/Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="/Scripts/bootstrap.modal.js" type="text/javascript"></script>

    <script type="text/javascript">
      $(document).ready(function () {
        if( navigator.userAgent.match(/Android/i)
            || navigator.userAgent.match(/webOS/i)
            || navigator.userAgent.match(/iPhone/i)
            || navigator.userAgent.match(/iPad/i)
            || navigator.userAgent.match(/iPod/i)
            || navigator.userAgent.match(/BlackBerry/i)
          ) {
          $("#myModal").modal("show");
        }

        $("#myModalClose").click(function () {
          $("#myModal").modal("hide");
        });
      });
    </script>
</head>
<body>
    <div class="modal hide" id="myModal">
      <div class="modal-header">
        <a class="close" id="myModalClose">×</a>
        <h3>text introductory<br>want to navigate to...</h3>
     </div>
     <div class="modal-body">
        <ul class="nav">
          <li> ... list of links here </li>
        </ul>
   </div>
  </div>
</body>
</html> 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-04-01T06:05:23.430

根据文档隐藏/切换应该可以工作。但事实并非如此。

这是我的做法

```
$('#modal-id').modal('toggle'); //Hide the modal dialog
$('.modal-backdrop').remove(); //Hide the backdrop
$("body").removeClass( "modal-open" ); //Put scroll back on the Body 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-06-24T07:13:53.130

试试这个。。

```
$('body').removeClass('modal-open');

$('.modal-backdrop').remove(); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-06-04T21:15:02.470

I had the same problem in the iphone or desktop, didnt manage to close the dialog when pressing the close button.

i found out that The `<button>` tag defines a clickable button and is needed to specify the type attribute for a element as follow:

```
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button> 
```

check the example code for bootstrap modals at : [BootStrap javascript Page](http://getbootstrap.com/javascript/#modals-examples)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-19T14:32:59.780

**这是一个片段，不仅用于在不刷新页面的情况下关闭模式，而且在按下 Enter 时它会提交模式并在不刷新的情况下关闭**

我在我的网站上设置了它，在那里我可以有多个模式，一些模式在提交时处理数据，而有些则没有。我所做的是为每个进行处理的模式创建一个唯一的 ID。例如在我的网页中：

**HTML（模态页脚）：**

```
 <div class="modal-footer form-footer"><br>
              <span class="caption">
                <button id="PreLoadOrders" class="btn btn-md green btn-right" type="button" disabled>Add to Cart&nbsp; <i class="fa fa-shopping-cart"></i></button>     
                <button id="ClrHist" class="btn btn-md red btn-right" data-dismiss="modal" data-original-title="" title="Return to Scan Order Entry" type="cancel">Cancel&nbsp; <i class="fa fa-close"></i></a>
              </span>
      </div> 
```

**查询：**

```
$(document).ready(function(){
// Allow enter key to trigger preloadorders form
    $(document).keypress(function(e) {       
      if(e.which == 13) {   
          e.preventDefault();   
                if($(".trigger").is(".ok")) 
                   $("#PreLoadOrders").trigger("click");
                else
                    return;
      }
    });
}); 
```

如您所见，此提交执行处理，这就是为什么我为此模式使用此 jQuery。现在假设我在此网页中有另一个模态，但没有执行任何处理，并且由于一次打开一个模态，我将另一个模态放入`$(document).ready()`所有页面都获取的全局 php/js 脚本中，并为模态的关闭按钮提供一个名为: 的类`".modal-close"`：

**HTML：**

```
<div class="modal-footer caption">
                <button type="submit" class="modal-close btn default" data-dismiss="modal" aria-hidden="true">Close</button>
            </div> 
```

**jQuery（包括 global.inc）：**

```
 $(document).ready(function(){
         // Allow enter key to trigger a particular button anywhere on page
        $(document).keypress(function(e) {
                if(e.which == 13) {
                   if($(".modal").is(":visible")){   
                        $(".modal:visible").find(".modal-close").trigger('click');
                    }
                }
         });
    }); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-04-22T14:27:38.800

如果您同时显示的模态很少，则可以为具有属性`data-toggle`和的模态按钮指定目标模态`data-target`：

```
<div class="modal fade in" id="sendMessageModal" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog modal-sm">
           <div class="modal-content">
                <div class="modal-header text-center">
                     <h4 class="modal-title">Modal Title</h4>
                     <small>Modal Subtitle</small>
                </div>
                <div class="modal-body">
                     <p>Modal content text</p>
                </div>
                <div class="modal-footer">
                     <button type="button" class="btn btn-default pull-left" data-toggle="modal" data-target="#sendMessageModal">Close</button>
                     <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#sendMessageModal">Send</button>
                </div>
           </div>
      </div>
 </div> 
```

在模态代码之外的某个地方，您可以有另一个切换按钮：

```
<a href="index.html#" class="btn btn-default btn-xs" data-toggle="modal" data-target="#sendMessageModal">Resend Message</a> 
```

隐藏这些按钮时，用户无法单击模态切换按钮，并且它与`"modal"`属性选项一起使用是正确的`data-toggle`。该方案自动生效！

# jboss6.x - 在 jboss 6 中部署 Cruisecontrol.war 时出错

> ID：10495424
> 
> 赞同：0
> 
> 时间：2012-05-08T08:49:06.137
> 
> 标签：jboss6.x

我尝试部署`cruisecontrol.war`在`jboss6`. 但它显示部署错误是这样的：

```
java.lang.LinkageError: loader constraint violation in interface itable initialization: when resolving method "net.sf.saxon.pull.PullToStax.getNamespaceContext()Ljavax/xml/namespace/Names
paceContext;" the class loader (instance of org/jboss/classloader/spi/base/BaseClassLoader) of the current class, net/sf/saxon/pull/PullToStax, and the class loader (instance of <bootloader>) for interface javax/xml/stream/XMLStreamReader have different Class objects for the type javax/xml/namespace/NamespaceContext used in the signature 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:07:50.803

类加载似乎有问题，请检查 JBoss 中的 jar/war 与类路径中的 jar 之间是否存在冲突。

# google-maps-api-3 - 如何解决 Google Maps API 密钥问题？

> ID：10495426
> 
> 赞同：1
> 
> 时间：2012-05-08T08:49:11.173
> 
> 标签：google-maps-api-3

我在使用 Google Maps API 一周时遇到了问题，但我无法解决它:(

我有一个网站已经使用 Google Maps v3 几个星期了，没有任何问题。但突然间，它开始抱怨：Google 已停用此应用程序的 Google Maps API 使用，因为提供的密钥不是有效的 Google-API-Key 或此站点不允许使用 Google Maps v3。

我仔细检查了所有内容，包括：尝试新密钥；在 API 控制台中检查域限制和激活 - 一切正常。

我正在使用简单的身份验证。每一个帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:01:06.223

## 版本处理已更改。此代码不再有效（请参阅更新中的以下代码）：

您可以立即做一件事来绕过此类问题：将您使用的 API 的版本显式设置为**3.6**：

```
<script type="text/javascript"
    src="http://maps.googleapis.com/maps/api/js?v=3.6&sensor=false">
</script> 
```

密钥是在*3.7*中引入的，因此如果您将版本设置为：*3.6* ，您不会收到任何警告。

## 使上述 JavaScript 代码无效的重要更新：

将版本设置为*3.6*将不再作为解决此问题的方法，因为您不再能够请求版本*3.6*。您不应*使用*上述代码，而应使用以下代码加载 Google Maps JavaScript *3.8*库：

```
<script type="text/javascript"
    src="http://maps.googleapis.com/maps/api/js?v=3.8&sensor=false">
</script> 
```

谷歌最近宣布了版本更新；以下是 Google 公告电子邮件的内容：

> 我们最近发布了 Google Maps API 的新次要版本。这意味着现在的版本是： 3.9：开发/每晚 3.8：功能稳定 3.7：冻结
> 
> **3.6 已被删除：如果您提出要求，您将收到 3.7。**
> 
> 在最新的 3.9 版本中，我们添加了： * 自动完成的国家/地区限制 (AutocompleteOptions?.componentRestrictions) * 地区和城市类型过滤器
> 
> 您还将获得 3.8（现为 Feature Stable）的所有功能，包括：
> 
> *   WeatherLayer 和 CloudLayer
> *   街景中的点击前往/点击缩放
> *   FusionTablesLayer 的 orderBy、limit 和 offset
> *   PlaceResult 中的 utc_offset 和 opening_hours
> *   google.maps.geometry.poly.containsLocation() 和 isLocationOnEdge()
> *   DemographicsLayer（仅限企业版地图）

# javascript - 如何在 ASP.Net MVC 应用程序中获取客户端时区

> ID：10495427
> 
> 赞同：2
> 
> 时间：2012-05-08T08:49:12.737
> 
> 标签：javascript, asp.net-mvc-3, timezone, asp.net-4.0

我想要 ASP.Net MVC 应用程序中的客户端时区名称（例如印度标准时间）。

所以，我可以使用`TimeZoneInfo.FindSystemTimeZoneById(TimeZoneName)`功能。

我试过`new Date().getTimezoneOffset()`（[参考](http://www.prideparrot.com/blog/archive/2011/9/how_to_display_dates_and_times_in_clients_timezone)）

但是，此代码中的夏令时存在问题。

在javascript中，我也尝试过`new Date().toString()`

但是，这会在不同的浏览器中产生不同的格式。

在 Firefox、chrome 和 safari 中，答案是“2012 年 5 月 8 日星期二 14:00:00 GMT+0530（印度标准时间）”

在 IE8 中，它是“Tue May 8 14:00:00 UTC+0530 2012”

歌剧也有类似的问题。

因此，此方法不适用于 IE 和 Opera。

识别客户时区的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T08:56:47.757

最好和最常用的方法是使用客户端的 ip 通过一些 3rd 方库和数据库来识别客户端位置.. 然后根据客户端的位置确定时区

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T10:04:38.940

您需要知道时区还是只知道与 UTC 的偏移量？因为时区不是 ISO 标准并且几乎可以任意更改，所以我更喜欢使用客户端与 UTC 的偏移量，并且我总是在登录时或每当他们提交我需要客户端时间的表单时从客户端获取它。有时我会计算出客户端的 GTM 偏移量，并坚持使用它以在我显示或使用时间的任何地方使用。

所以我有一个像这样的全局 JavaScript 函数，它将给定的本地日期作为通用字符串返回：

```
 function aspClientDateTime(dateObject) {
    return dateObject.getFullYear() + '-'
        + this.leadingZero((dateObject.getMonth() + 1), 2) + '-'
        + this.leadingZero(dateObject.getDate(), 2) + ' '
        + this.leadingZero(dateObject.getHours(), 2) + ':'
        + this.leadingZero(dateObject.getMinutes(), 2) + ':'
        + this.leadingZero(dateObject.getSeconds(), 2);
    } 
```

在表单提交时，我获取当前客户日期并将其存储在表单中：

```
myForm.clientTime.val(aspClientDateTime(new Date())); 
```

然后，您知道浏览器中的时间，并且可以在服务器上计算出 UTC 偏移量等。

时区的问题是任何政府都可以在明天引入一个新的时区，就像萨摩亚最近所做的那样。通常我想知道用户现在的偏移量是多少，而不是他们所在的时区。

如果你真的需要后者，你可能不得不问他们，就像 Skype 一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T12:59:33.383

有一个通过 JavaScript 检测时区的库。它会给你一个足够好的时区的名称。它不进行地理定位或 ip-lookup，因此速度非常快，但不是非常精确。例如，它将为中欧时区的任何人返回“Europe/Berlin”。但是，它对于服务器端日期时间规范化应该足够好。

[https://bitbucket.org/pellepim/jstimezonedetect](https://bitbucket.org/pellepim/jstimezonedetect)

# grails - 为 Grails 设置 STS 时出错

> ID：10495428
> 
> 赞同：2
> 
> 时间：2012-05-08T08:49:16.343
> 
> 标签：grails, sts-springsourcetoolsuite

我正在尝试安装 STS 2.9.1 *Grails 支持*和*Groovy Eclipse*扩展，但我收到了一条通知：

**以下连接器不可用： Grails 支持**

**还是继续安装？**

这是怎么回事？

我不知道它是否相关，但我有 java 1.7u4 并且我已经手动安装了 Grails 1.3.7。我有 Windows 7 64 位并安装 STS 64 位。

我试过只安装 Groovy Eclipse 扩展而忽略该消息，但安装失败。所以我清理了所有文件，重新安装了 STS，再次安装了 Groovy Eclipse 扩展。然后尝试安装 Grails 支持。该过程开始但它坏了，这是我遇到的错误：

> 收集要安装的项目时发生错误会话上下文是：（profile=com.springsource.sts.ide，phase=org.eclipse.equinox.internal.p2.engine.phases.Collect，operand=，action=）。无法在 [http://download.eclipse.org/tools/ajdt/37/milestone/plugins/org.aspectj.ajde_1.7.0.20120309122400.jar](http://download.eclipse.org/tools/ajdt/37/milestone/plugins/org.aspectj.ajde_1.7.0.20120309122400.jar)读取存储库。读取超时无法读取位于 [http://download.eclipse.org/tools/ajdt/37/milestone/plugins/org.eclipse.ajdt.core.source_2.2.0.e37x-20120314-1100.jar](http://download.eclipse.org/tools/ajdt/37/milestone/plugins/org.eclipse.ajdt.core.source_2.2.0.e37x-20120314-1100.jar)的存储库。读取超时

谢谢。

# c# - 如何在 c# 中使用开放硬件监视器源代码？我试过什么都不行

> ID：10495430
> 
> 赞同：3
> 
> 时间：2012-05-08T08:49:22.280
> 
> 标签：c#

我在 Form1 中有这段代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using OpenHardwareMonitor.Hardware.HDD;
using OpenHardwareMonitor;

namespace OpenHardwareMonitor
{
    public partial class Form1 : Form
    {

        OpenHardwareMonitor.Hardware.SensorValue sv;
        OpenHardwareMonitor.Hardware.ISensor ii;
        public Form1()
        {
            InitializeComponent();

            string y = ii.Name;
            sv = new Hardware.SensorValue();
            DateTime dt = sv.Time;
            float t = sv.Value;

        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

`ii`变量为空我不知道如何为它创建一个实例。

构造函数中的其他两个变量不返回 0。如果我不使用该`ii`变量，其他两个不会抛出错误但不会返回任何值。

我正在使用来自[http://code.google.com/p/open-hardware-monitor/downloads/detail?name=openhardwaremonitor-v0.4.0-beta.zip&can=2&q=的 openhardwaremonitor dll](http://code.google.com/p/open-hardware-monitor/downloads/detail?name=openhardwaremonitor-v0.4.0-beta.zip&can=2&q=)

c# dll 与它自己的程序一起提供。

所以我添加了dll作为参考，但我不知道如何制作代码。

有人可以根据我的代码在这里为我构建一个代码示例吗？我试图查看 openhwardwaremonitor 站点和那里的源代码，但不明白如何使用它。

我还可以做些什么 ？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-13T21:04:52.433

我已经测试了这段代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using OpenHardwareMonitor;
using OpenHardwareMonitor.Hardware;

namespace CPUTemperatureMonitor
{
    public partial class Form1 : Form
    {

        Computer thisComputer;

        public Form1()
        {

            InitializeComponent();

            thisComputer = new Computer() { CPUEnabled = true };

            thisComputer.Open();

        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            String temp = "";

            foreach (var hardwareItem in thisComputer.Hardware)
            {
                if (hardwareItem.HardwareType == HardwareType.CPU)
                {
                    hardwareItem.Update();
                    foreach (IHardware subHardware in hardwareItem.SubHardware)
                        subHardware.Update();

                    foreach (var sensor in hardwareItem.Sensors)
                    {
                        if (sensor.SensorType == SensorType.Temperature)
                        {

                            temp += String.Format("{0} Temperature = {1}\r\n", sensor.Name, sensor.Value.HasValue ? sensor.Value.Value.ToString() : "no value");

                        }
                    }
                }
            }

            textBox1.Text = temp;

        }
    }
} 
```

该表单有一个多行文本控件和一个计时器。添加对`OpenHardwareMonitorLib.dll`.

您还需要在应用程序中请求更高的执行级别，即右键单击项目，添加新的清单文件项并声明

```
requestedExecutionLevel  level="highestAvailable" uiAccess="false" 
```

# emacs - 来自 Emacs 的远程 ssh 连接

> ID：10495432
> 
> 赞同：7
> 
> 时间：2012-05-08T08:49:28.400
> 
> 标签：emacs, ssh

[包括这个](https://stackoverflow.com/questions/1668988/how-do-i-use-ssh-from-emacs/)问题在内的几个问题讨论了与 Emacs 中的 ssh 连接相关的方面。不过，我还没有找到我的问题的答案：*如何从 Emacs 中通过 ssh 连接到远程机器？*

我不想在 Emacs 中编辑远程机器上的文件。我知道`M-x` `shell`哪个会在我的本地机器上打开一个 shell，并且我知道使用 TRAMP 在远程机器上通过 ssh 编辑文件。但是，这些都与这个问题无关。

（而不是投票关闭，也许将问题迁移到另一个站点。）

编辑：相关讨论[在这里](https://groups.google.com/forum/?fromgroups#!topic/gnu.emacs.help/XO7T9pDiJuM)。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T15:00:11.253

首先，我不知道有一个原生的 elisp ssh 客户端（并且不认为有很大的动机去写一个），所以你肯定需要与一个外部的 ssh 客户端进程进行交互。

由于您希望以*交互*方式使用 ssh ，因此 ssh 进程需要连接本地端的终端。

因此问题就变成了：Emacs 是否实现了一个可以附加 ssh 进程的终端？

答案是：是的——term.el 提供了一个健壮的终端实现，通过它可以直接运行 ssh，而不需要 shell。

如果您运行`M-x` `term` `RET`，系统将提示您输入程序。（它默认为 shell，但这肯定不是您可以运行的唯一类型的进程。）

由于未知的原因，交互式`term`（和`ansi-term`）函数不支持将参数传递给指定的程序，如果您希望运行类似`ssh user@host`. 您可以改为指定一个处理参数的脚本，但我们也可以在 elisp 中管理它：

该`term`函数实际上是一个简单的包装器，它调用`make-term`以启动程序，然后设置适当的模式。正如接受`make-term` *程序*参数一样，复制和修改 的定义`term`以适合您自己的目的非常简单。

这是一个非常简单的实现：

```
(defun my-ssh (user host port)
  "Connect to a remote host by SSH."
  (interactive "sUser: \nsHost: \nsPort (default 22): ")
  (let* ((port (if (equal port "") "22" port))
         (switches (list host "-l" user "-p" port)))
    (set-buffer (apply 'make-term "ssh" "ssh" nil switches))
    (term-mode)
    (term-char-mode)
    (switch-to-buffer "*ssh*"))) 
```

或者也许这是更可取的：

```
(defun my-ssh (args)
  "Connect to a remote host by SSH."
  (interactive "sssh ")
  (let ((switches (split-string-and-unquote args)))
    (set-buffer (apply 'make-term "ssh" "ssh" nil switches))
    (term-mode)
    (term-char-mode)
    (switch-to-buffer "*ssh*"))) 
```

显然还有改进的余地，但我认为这是相当有用的。

您应该确保熟悉`term-mode`. 看：

*   `M-:` `(info "(emacs) Terminal emulator")` `RET`
*   `M-:` `(info "(emacs) Terminal Mode")` `RET`
*   `C-h``f` `term-mode` `RET`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T12:38:50.093

事实证明，有你想要的：

```
(setq rlogin-program "ssh")
(setq rlogin-process-connection-type t) 
```

然后`M-x rlogin RET <myhost> RET`会这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T18:16:20.193

也许[ssh.el](http://www.splode.com/~friedman/software/emacs-lisp/index.html#ssh)是您正在寻找的。ssh 命令提供了一种通过 ssh 在 Emacs 中创建远程 shell 的单步方式，包括以自然方式指定用户名，并在需要时启用tramp 目录跟踪。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T08:51:29.787

我不确定我是否理解。打开`M-x ansi-term`并在`ssh user@host`那里运行？

# c# - LINQ中的圆形移动平均滤波器

> ID：10495433
> 
> 赞同：4
> 
> 时间：2012-05-08T08:49:43.690
> 
> 标签：c#, .net, linq, filtering, signal-processing

我正在寻找一种在 C# 中实现移动平均过滤器的优雅方法。现在，这很容易，但是在边界处，平均窗口将环绕开始/结束。这让我的代码变得丑陋且不直观，我想知道是否有更聪明的方法可以使用 LINQ 来解决这个问题。

所以我目前拥有的是：

```
// input is a List<double> y, output is List<double> yfiltered
int yLength = y.Count;
for (int i = 0; i < yLength; i++)
{
    double sum = 0.0;
    for (int k = i - halfWindowWidth; k <= i + halfWindowWidth; k++)
    {
        if (k < 0)
        {
            // k is negative, wrap around
            sum += y[yLength - 1 + k];
        }
        else if (k >= yLength)
        {
            // k exceeds y length, wrap around
            sum += y[k - yLength];
        }
        else
        {
            // k within y.Count
            sum += y[k];
        }
    }
    yfiltered[i] = sum / (2 * halfWindowWidth + 1);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T09:18:27.883

这是一个完全不同的建议 -

我试图让它变得更好，而不是更具可读性。

您当前代码的问题在于，它在不需要时一次又一次地总结了许多数字。

> 在实现代码之后比较两种方法......

我只是第一次将一堆相加，然后一次又一次地减去尾部并添加头部：

```
double sum = 0;

// sum = Enumerable.Range(i - halfWindowWidth, halfWindowWidth * 2 + 1)
//    .Select(k => y[(k + yLength) % yLength]).Sum();

for (var i = -halfWindowWidth; i <= halfWindowWidth; i++)
{
    sum += y[(i + yLength) % yLength];
}

yFiltered[0] = sum / (2 * halfWindowWidth + 1);

for (var i = 1; i < yLength; i++)
{
    sum = sum -
          y[(i - halfWindowWidth - 1 + yLength) % yLength] +
          y[(i + halfWindowWidth) % yLength];

    yFiltered[i] = sum / (2 * halfWindowWidth + 1);
} 
```

以下是速度测试，比较了完全重新计算的方法和这个：

```
private static double[] Foo1(IList<double> y, int halfWindowWidth)
{
    var yfiltered = new double[y.Count];

    var yLength = y.Count;

    for (var i = 0; i < yLength; i++)
    {
        var sum = 0.0;

        for (var k = i - halfWindowWidth; k <= i + halfWindowWidth; k++)
        {
            sum += y[(k + yLength) % yLength];
        }

        yfiltered[i] = sum / (2 * halfWindowWidth + 1);
    }

    return yfiltered;
}

private static double[] Foo2(IList<double> y, int halfWindowWidth)
{
    var yFiltered = new double[y.Count];
    var windowSize = 2 * halfWindowWidth + 1;

    double sum = 0;

    for (var i = -halfWindowWidth; i <= halfWindowWidth; i++)
    {
        sum += y[(i + y.Count) % y.Count];
    }

    yFiltered[0] = sum / windowSize;

    for (var i = 1; i < y.Count; i++)
    {
        sum = sum -
              y[(i - halfWindowWidth - 1 + y.Count) % y.Count] +
              y[(i + halfWindowWidth) % y.Count];

        yFiltered[i] = sum / windowSize;
    }

    return yFiltered;
}

private static TimeSpan TestFunc(Func<IList<double>, int, double[]> func, IList<double> y, int halfWindowWidth, int iteration
{
    var sw = Stopwatch.StartNew();

    for (var i = 0; i < iterations; i++)
    {
        var yFiltered = func(y, halfWindowWidth);
    }

    sw.Stop();
    return sw.Elapsed;
}

private static void RunTests()
{
    var y = new List<double>();
    var rand = new Random();

    for (var i = 0; i < 1000; i++)
    {
        y.Add(rand.Next());
    }

    var foo1Res = Foo1(y, 100);
    var foo2Res = Foo2(y, 100);

    Debug.WriteLine("Results are equal: " + foo1Res.SequenceEqual(foo2Res));

    Debug.WriteLine("Foo1: " + TestFunc(Foo1, y, 100, 1000));
    Debug.WriteLine("Foo2: " + TestFunc(Foo2, y, 100, 1000));
} 
```

> 时间复杂度：
> 
> 我的方式：O（n + m）
> 
> 其他方式：O(n * m)

由于 Foo1 是 O(n * m) 而 Foo2 是 O(n + m) ，因此差异巨大也就不足为奇了。

在这个*不是很疯狂的大规模*上的结果是：

> 结果相等：真
> 
> Foo1：5.52 秒
> 
> Foo2：61.1 毫秒

并且在更大的范围内（在迭代和计数中将 1000 替换为 10000）：

> Foo1：10分钟后停止……
> 
> Foo2：6.9 秒

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T09:02:24.040

扩展我的[评论](https://stackoverflow.com/questions/10495433/circular-moving-average-filter-in-linq-c-sharp-elegant-solution#comment13566100_10495433)，您可以使用[mod ( `%`)](http://msdn.microsoft.com/en-us/library/0w4e0fzs.aspx)运算符`k`来换行
from`0`到`ylength - 1`

```
 // input is a List<double> y, output is List<double> yfiltered
    int yLength = y.Count;
    for (int i = 0; i < yLength; i++)
    {
        double sum = 0.0;
        for (int k = i - halfWindowWidth; k <= i + halfWindowWidth; k++)
        {
            sum += y[(k + yLength) % yLength];
        }
        yfiltered[i] = sum / (2 * halfWindowWidth + 1);
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T09:04:27.547

```
for (var i = 0; i < yLength; i++)
{
    var sum = Enumerable.Range(i - halfWindowWidth, halfWindowWidth * 2 + 1)
        .Select(k => y[(yLength + k) % yLength]).Sum();

    yFiltered[i] = sum / (2 * halfWindowWidth + 1);
} 
```

甚至：

```
var output = input.Select((val, i) =>
                 Enumerable.Range(i - halfWindowWidth, halfWindowWidth * 2 + 1)
                           .Select(k => input[(input.Count + k) % input.Count])
                 .Sum()).ToList(); 
```

# http-headers - 如何在 dotCMS 中设置 http 标头

> ID：10495436
> 
> 赞同：0
> 
> 时间：2012-05-08T08:50:11.380
> 
> 标签：http-headers, dotcms

我正在尝试使用 dotCMS 创建 XML 数据提要。我可以轻松地在 .dot“页面”中输出正确的 XML 文档结构，但是发送到客户端的 http 标头仍然说我的页面包含“text/html”。如何将它们更改为“text/xml”或“application/xml”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:24:31.653

显然没有办法使用管理控制台来做到这一点。我发现的唯一方法是添加这行（速度）代码

```
$response.setHeader("Content-Type", "application/xml") 
```

到页面模板的顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:43:16.227

您的解决方案是最简单的。但是，还有其他一些工作量更大的选项，但这会阻止您必须使用速度来生成 XML，这在大多数情况下更健壮。

1.  DotCMS 使用 xstream 来生成 XML 文件（反之亦然）。您也可以编写一个通用插件来使用它。
2.  JSONContentServlet 存在于 dotCMS 中，它接受查询并生成 json 或 xml（取决于您的参数）。默认情况下它没有映射到 servlet，但很容易添加。

# php - 条码 Zend Framework 2 中的错误

> ID：10495440
> 
> 赞同：1
> 
> 时间：2012-05-08T08:50:34.047
> 
> 标签：php, barcode, zend-framework2

我对 Zend Framework 2 中的条码生成有疑问。

我一直收到一个错误：

> PHP 致命错误：在第 110 行的 /var/www/vhosts/mydomain.com/httpdocs/vendor/ZendFramework/library/Zend/Validator/Barcode.php 中找不到类“Zend\Loader”

我使用的代码是：

```
 // Only the text to draw is required
    $barcodeOptions = array('text' => 'ZEND-FRAMEWORK');

    // No required options
    $rendererOptions = array();

    $imageResource = Barcode::factory(
        'code39', 'image', $barcodeOptions, $rendererOptions
    )->render();

    echo '<pre>';
    var_dump($imageResource); 
```

当我删除链接到的渲染函数时，`barcode::factory`我看到了一个`'Zend\Barcode\Renderer\Image'`对象。当我运行渲染函数时，我得到了错误。

我从 Zend Framework 文档中获得了代码。我找不到关于此的好的 ZF2 文档。以前有人遇到过这个问题吗？我能做些什么呢？

# ios - 摆脱 UIView CA 转换后未对齐的像素

> ID：10495443
> 
> 赞同：0
> 
> 时间：2012-05-08T08:50:54.370
> 
> 标签：ios, uiview, core-animation, uilabel

我有一个 UILabel，我在其上执行 CGAffineTransformConcat 以将文本倾斜一定程度。Instruments CA 分析告诉我，视图现在有未对齐的像素（忽略转换，标签很好）。

我想知道是否有任何方法可以消除此标签中未对齐的像素，或者这是否不可能，因为无论如何转换都会导致坐标中的小数值。

我对具有小数值的框架进行了 CGRectIntegral 调用，但由于某种原因，视图仍然未对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:57:59.330

当图层旋转的角度不是 90° 的倍数时，它不能进行像素对齐。

如果您想呈现倾斜的文本并且仍然需要对齐的像素，唯一的方法是自己绘制图层（视图）。您将对齐图层并使用 Quartz 进行旋转。

**编辑后注意：**设置变换时不能使用框架：

> 警告 如果变换属性不是恒等变换，则此属性的值未定义，因此应被忽略。

# c# - 在页面之间发送多个数据

> ID：10495445
> 
> 赞同：0
> 
> 时间：2012-05-08T08:51:05.360
> 
> 标签：c#, visual-studio-2010, windows-phone-7

我正在 Visual Studio 中为 Windows Phone C# 制作应用程序我在主页上有两个文本框。我想将他们的内容发送到第二页。但我做不到

我只能发送一个文本框（name1），但不能发送其他（name2）使用

```
 NavigationService.Navigate(new Uri("/Page1.xaml?msg=" + name1.Text, UriKind.Relative)); 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:55:06.283

您必须覆盖`OnNavigatedFrom`代码中的方法。看看[这里](http://www.eugenedotnet.com/2011/03/passing-values-to-windows-phone-7-pages-destination-page-instance-within-onnavigatedfrom-method/)。

对不起，错误的方法。我会写这样的东西：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{ 
Page2 page2 = e.Content as Page2;
page2.textBox.text += name1.text;
page2.textBox.text += name2.text'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:59:34.773

这个问题已经在这里问过： -

[Windows Phone Navigation - 回传到之前的页面](https://stackoverflow.com/questions/10316511/windows-phone-navigation-passing-back-to-the-page-before)

该线程提供了三种不同的方法来使数据在页面之间可访问，并消除了在查询字符串中设置数据的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T09:21:27.450

根据文本框中的值是否要创建某种形式的内部状态，我将创建一个包含当前状态的静态类。

在框中输入文本后，更新此静态类上的 2 个字符串。该类显然仍可用于从您未来的页面中提取数据，并且如果用户碰巧在应用程序中点击“返回”。当您将来扩展它以保存更多数据时，它可能会对您有所帮助。

`Uri`但是，使用您目前使用的方法传递多个值应该没有问题，您可以简单地这样做：

```
NavigationService.Navigate(new Uri("/Page1.xaml?msg=" + name1.Text + "&name2=" + name2.Text, UriKind.Relative)); 
```

请注意，`Uri`导航并不是传递参数的最佳方式。

# javascript - 使用 Razor 时出现 jquery 行的问题

> ID：10495447
> 
> 赞同：1
> 
> 时间：2012-05-08T08:51:08.620
> 
> 标签：javascript, jquery, asp.net-mvc, razor

我有以下工作正常：

```
 html: "<td>" + goalcard.Name + "</td><td>" + goalcard.Customer + "</td><td>" + goalcard.PlannedDate + "</td><td>" + goalcard.CompletedDate + "</td>" 
```

当我尝试这个时，我会显示我的 JSON。

```
html: "<td>" + goalcard.Name + "</td><td>" + goalcard.Customer + "</td><td>" + goalcard.PlannedDate + "</td><td>" + goalcard.CompletedDate + "</td><td>" +  @Html.ActionLink("Ändra", "Edit") | @Html.ActionLink("x", "Inactive", new { @class = "deleteLink" }) + "</td>" 
```

我还收到一堆错误，例如：

*   函数外的'return'语句'
*   预期的 ';'
*   语法错误
*   预期的标识符或字符串

我在这里做错了吗？

这是完整的功能：

```
 result.forEach(function (goalcard) {
                                $("#GoalcardSearchResult tbody").append(
                                    $('<tr/>', {
                                        click: function() {
                                            id = goalcard.Id;
                                            var url = '@Url.Action("AnswerForm", "AnswerNKI", new { id = "__id__"})';
                                            window.location.href = url.replace('__id__', id);

                                        },
                                        // steg Create a row for each result 
                                        html: "<td>" + goalcard.Name + "</td><td>" + goalcard.Customer + "</td><td>" + goalcard.PlannedDate + "</td><td>" + goalcard.CompletedDate + "</td><td>" +  @(Html.ActionLink("Ändra", "Edit")) | @(Html.ActionLink("x", "Inactive", new { @class = "deleteLink" })) + "</td>"
                                    }));
                            });
                            $('#GoalcardSearchResult tbody').trigger("update");                                
                            $("#GoalcardSearchResult").tablesorter();
                        });

                        return false; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:27:06.540

这段代码

```
 "</td><td>" + @(Html.ActionLink("Ändra", "Edit")) | @(Html.ActionLink("x", "Inactive", new { @class = "deleteLink" })) + "</td>" 
```

生成

```
"</td><td>" + <a href="/Examination/CertificationAnnouncements/Edit">&#196;ndra</a> | <a href="/Examination/CertificationAnnouncements/Inactive?class=deleteLink">x</a> + "</td>" 
```

请注意，生成的锚点没有字符串标识符（' 或 "），因此会出现错误。您应该将代码更改为

```
 "</td><td>" + '@(Html.ActionLink("Ändra", "Edit")) | @(Html.ActionLink("x", "Inactive", new { @class = "deleteLink" }))' + "</td>" 
```

# c# - WPF DataGrid 中的通用拖放行为

> ID：10495448
> 
> 赞同：0
> 
> 时间：2012-05-08T08:51:10.240
> 
> 标签：c#, wpf, drag-and-drop, attachedbehaviors

我做了一个行为[拖放 Beahvior](https://stackoverflow.com/questions/10493450/drag-drop-row-behavior-on-wpf-datagrid/10493869#10493869)，它采用一个集合（实现 IList，如 ObservableCollection，LIst）

它的工作正常...

但如果我使用*CollectionViewSource.View*（在 Xaml 绑定中），行为 falis....

我怎样才能使这种行为通用（就像独立于 DataGrid 的 DataSource 类型一样）

是否有可能，因为我正在使用 IList 接口的方法，例如

```
Insert(object item) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T05:35:36.067

这个问题已经有一个开源解决方案，请参阅[Wpf Drag & Drop behavior](http://www.codeproject.com/Articles/39191/Wpf-Drag-Drop-behaviour)。此行为将为任何 ItemsControl 实现拖放，它也适用于数据网格。

# c++ - 如果在 C++ 模板库中使用了禁用的库功能，则警告用户

> ID：10495450
> 
> 赞同：3
> 
> 时间：2012-05-08T08:51:25.530
> 
> 标签：c++, cross-platform, cmake, c-preprocessor

例如，我们有一个 C++ 模板库，它有一些依赖于 zlib 的特性。我们使用预处理器符号选择性地启用和禁用功能，即`-DHAVE_ZLIB=1`在命令行上设置。

我们基于 CMake 的构建系统识别已安装的 zlib 并将相应的标志添加到编译器。当然，这也可以由用户手动完成，使用他们最喜欢的 IDE 或他们的 Makefile。

该库的一个特性是使用 zlib 的代码与不使用 zlib 的代码交错，即`#include <library/header.h>`无论 zlib 是否存在，使用都应该工作。

目前，我们`#if`输出了依赖于 zlib 的代码。因此，如果用户尝试使用类似的东西`CompressedStream`，例如，根本找不到该类。这对用户来说是相当令人沮丧的。构建系统警告他们找不到 zlib，但作为用户的用户要么看不到这一点，要么很快就忘记了。我自己也掉进了这个陷阱。

现在我的问题是：如果用户尝试使用需要 zlib 的代码，那么警告用户 zlib 已禁用的最佳方法是什么？

我唯一能想到的是使用许多编译器中实现的弃用标记机制。尽管它们中的每一个都需要不同的语法，但可以使用预处理器宏轻松地将其抽象出来。有没有其他好办法？

该解决方案只需要在 VS >8、GCC >4.2 和 LLVM 中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:28:29.707

警告用户此类事情的适当位置是（IMO）构建系统。看看 Ogre3D、KDE ​​和许多其他项目——它们都在构建配置后打印出某种轮廓。本大纲包含有关发现什么、没有发现什么以及由此产生的后果的信息。

甚至 Qt 也没有解决这个问题。可以选择使用 STL 支持构建 Qt，如果不是以这种方式构建，则没有警告或其他任何内容，只会编译有关未定义方法的错误。所以，我认为，在编译阶段没有办法警告用户这些事情。

# java - java保存更改

> ID：10495453
> 
> 赞同：4
> 
> 时间：2012-05-08T08:51:37.323
> 
> 标签：java, swing, observer-pattern, jlist, savechanges

我有一个应用程序，它主要包含在`JList`屏幕上显示的内容。我希望每次我对`AbstractListModel`(添加或删除列表中的项目) 进行更改时，以某种方式通知应用程序已进行更改并将`JFrame`的标题修改为`frame_title[unsaved]`. 在我保存应用程序后，`[unsaved]`标签就会消失。

我认为也许使用观察者/可观察技术可以完成这项工作，但我不知道该怎么做。也许有更适合我的问题的东西？我是 java 新手，所以这就是我来这里寻求帮助的原因。谢谢。

更新：在我的案例中，我不能真正使用观察者模式，因为我已经在扩展`AbstractListModel`类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:10:07.077

用这个：

```
AbstractListModel model = ...;
model.addListDataListener(new ListDataListener() {
    public void intervalAdded(ListDataEvent e) {

    }

    public void intervalRemoved(ListDataEvent e) {

    }

    public void contentsChanged(ListDataEvent e) {

    }
}); 
```

# php - php解析逗号分隔的var = value对列表

> ID：10495456
> 
> 赞同：0
> 
> 时间：2012-05-08T08:51:49.117
> 
> 标签：php

我收到一个字符串

```
a=100,b=20,c=20; 
```

例如，我知道使用 , 作为分隔符将它分解成一个数组，它变成

```
a=100
b=20
c=20 
```

作为字符串，

如何将其进一步评估为 php 中的变量，以便我可以这样做

```
echo $a //100
echo $b //20
echo $c //20 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:57:08.927

试试函数“parse_str”，比如

```
$str = str_replace(','，'&',"a=100,b=10,c=20");
parse_str($str);
echo $a;
echo $b;
echo $c; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T08:55:19.753

```
$string = 'a=1,b=20,c=43';
foreach ( explode(',', $string) as $expression ) {
    list($variable,$value) = explode('=', $expression);
    $$variable = $value;
}
echo 'a = ', $a, ' and b = ', $b, ' and c = ', $c, PHP_EOL; 
```

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T08:54:40.287

取决于您希望一切都变得多么“危险”-您始终可以使用[eval](http://php.net/manual/en/function.eval.php)但是还有很多问题需要考虑。

例子：

```
eval("\$str = \"test\";");
echo $str; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T08:54:49.917

试试这个

```
$input = 'a=100,b=20,c=20';
$items = explode(',',$input);

foreach($items as $i){
  $pair = explode('=',$i);
  $$pair[0] = $pair[1];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T08:55:53.950

```
$input = 'a=100,b=20,c=20';

$statements = explode (',', $input);

foreach ($statements as $s)
  eval ('$' . $s); // THIS IS EVIL!!!! TOO MANY SECURITY PROBLEMS

echo $a; // will output 100
echo $b; // will output 20
echo $c; // will output 20 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T08:59:29.207

您可以为变量使用变量名。举个例子：

```
$var = 'var2';
$$var = 5;
echo $var2; 
```

这将 5 回显到命令行。

`$var`评估为存在`var2`，并`$var2`设置为 5。

使用您的代码，我们可以创建：

```
$string = 'a=100,b=20,c=20';
$array = explode(',',$string);
foreach($array as $element) {
     $temp = explode('=',$element);
     $$temp[0] = $temp1;
}
echo $a.' '.$b.' '.$c; 
```

这与字符串“100 20 20”相呼应。

# pdf - 对 wkhtmltopdf 使用 disable-smart-shrinking 不会影响标题字体大小

> ID：10495462
> 
> 赞同：2
> 
> 时间：2012-05-08T08:52:28.133
> 
> 标签：pdf, pdf-generation, font-size, wkhtmltopdf

使用 --disable-smart-shrinking 时，我遇到了 wkhtmltopdf 的字体大小问题。

我不确定这个标志是否真的放大了内容或缩小了它。然而，很明显的是，它对标题做的不是同样的事情。

当我们让我们的用户设计他们自己的表单时，无论是在标题还是正文中，一定的字体大小必须相同。我们还发现使用 --disable-smart-shrinking 非常重要，因为这会使我们的内容很好地填满整个页面。

我用以下代码制作了一个简单的 html 示例

```
<html>
 <head>
 </head>
 <body style='margin: 0; border: 0'>
  <h3>My H3 text</h3>
 </body>
</html> 
```

将其保存为 test.html 并使用 disable-smart-shrinking 标志运行 wkhtmltopdf

> wkhtmltopdf.exe --disable-smart-shrinking --no-outline --header-spacing 10 -T 20 --header-html test.html test.html c:\temp\disable_smart_shrinking.pdf

结果（禁用智能收缩）：

[禁用智能收缩 http://img138.imageshack.us/img138/5143/disablesmartshrinking.th.png](http://img138.imageshack.us/img138/5143/disablesmartshrinking.th.png)

请注意，正文中的 H3 比标题中的 H3 大很多。

> wkhtmltopdf.exe --enable-smart-shrinking --no-outline --header-spacing 10 -T 20 --header-html test.html test.html c:\temp\disable_smart_shrinking.pdf

结果（启用智能收缩）：

[![启用智能收缩](../Images/39891f70a984a92e051830f1a9fa18c3.png)](https://i.stack.imgur.com/YzoGT.jpg)

H3 元素的字体大小现在在标题和正文之间保持不变

问题：我们想创建一个使用整个页面宽度的 pdf， --disable-smart-shrinking 允许我们这样做。但是我们希望将相同大小的字体应用于标题。有没有人有办法做到这一点？我们做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-29T23:28:23.983

此补丁将禁用页眉/页脚的智能智能收缩：

```
 diff --git a/src/lib/pdfconverter.cc b/src/lib/pdfconverter.cc
    index e815758..1504a14 100644
    --- a/src/lib/pdfconverter.cc
    +++ b/src/lib/pdfconverter.cc
    @@ -482,6 +482,7 @@ void PdfConverterPrivate::endPage(PageObject & object, bool hasHeaderFooter, int

            if (!object.headers.empty()) {
                    QWebPage * header = object.headers[objectPage];
    +                updateWebSettings(header->settings(), object.settings.web);
                    painter->save();
                    painter->resetTransform();
                    double spacing = s.header.spacing * printer->height() / printer->heightMM();
    @@ -506,6 +507,7 @@ void PdfConverterPrivate::endPage(PageObject & object, bool hasHeaderFooter, int

            if (!object.footers.empty()) {
                    QWebPage * footer = object.footers[objectPage];
    +                updateWebSettings(footer->settings(), object.settings.web);
                    painter->save();
                    painter->resetTransform();
                    double spacing = s.footer.spacing * printer->height() / printer->heightMM();
     }

     /*! 
```

应用补丁：patch -l -p1 < ../wkhtmltopdf_smart_shrinking_header_footer_disable_fix.patch

此解决方案适用于 windows/linux。要获得精确（html 中的 1mm 等于 pdf 上的 1mm）渲染，您需要使用选项“--disable-smart-shrinking --dpi 96”运行 wkhtmltopdf

在 Mac OS X 上，可以使用“--enable-smart-shrinking”和 html body“body { width: 210mm }”上的 css 样式来实现精确渲染。此解决方案仅适用于 mac os x。

# objective-c - 在类别中添加初始化程序

> ID：10495465
> 
> 赞同：2
> 
> 时间：2012-05-08T08:52:34.643
> 
> 标签：objective-c, cocoa

我试图在这样的类别中添加一个 init 方法：

```
@interface NSError (message)

+(id)errorWithCode:(NSInteger)code message:(NSString*)message;
-(id)initWithCode:(NSInteger)code message:(NSString*)message;

@end 
```

- @implementation NSError（消息）

```
+(id)errorWithCode:(NSInteger)code message:(NSString*)message;
{
    return [[[[self class] alloc] initWithCode:code message:message] autorelease];
}

-(id)initWithCode:(NSInteger)code message:(NSString*)message;
{
    NSMutableDictionary * userInfo = [NSMutableDictionary dictionary];
    [userInfo setValue:message forKey:NSLocalizedDescriptionKey];

    self = [super initWithDomain:@"some.domain" code:code userInfo:userInfo]; // problem line

    return self;
}

@end 
```

但它对类 NSObject 的“超级”beeing 并且不响应 initWithDomain 感到不满......我尝试将 super 转换为 NSError 但编译器说这是不允许的。

如果我运行它，我会得到“无法识别的选择器发送到...”所以这不仅仅是一个转换错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T09:08:21.353

您没有*继承*自`NSError`，而是向同一个类*添加了新代码。*因此，`super`您可能应该调用`self`.

# java - 在java中用其他字符替换字符

> ID：10495469
> 
> 赞同：1
> 
> 时间：2012-05-08T08:52:51.103
> 
> 标签：java, replace, character

亲爱的stackoverflow成员，我有一个小问题，

我想用java中的其他字符替换我的字符串中的一些字符，我的代码如下，

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         

jComboBox1.removeAllItems();
String str =  new GenericResource_JerseyClient().getlist();
    String [] temp = null;
    temp = str.split(",");
     temp[1]=temp[1].replaceAll("'", "");
    temp[1]=temp[1].replaceAll(" ", "");
    temp[1]=temp[1].replace("[", "");
    temp[1]=temp[1].replace("]", "");

     for(int i =0; i < temp.length ; i++)
     {
         jComboBox1.addItem(temp[i]);
     }        // TODO add your handling code here:      // TODO add your handling code here:
                // TODO add your handling code here
    } 
```

从上面的代码可以看出，我将“'”，“[”，”]”和空白替换为空。从代码中也可以看出，我将字符串一分为二。在 string after 部分，代码运行良好，但 string before 部分，代码似乎无法正常工作。我还附上了客户端下拉列表输出的副本。

关于如何从字符串中删除 [ 和 ' 的任何帮助将不胜感激。

干杯。![带有 [ 和 ' 的客户端输出](../Images/928c4c29faee4e9823d9d79f2557d1a1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T08:55:46.600

您只是在执行替换`temp[1]`- 而问题似乎出现在下拉列表中显示的*第一*项中，这可能是来自`temp[0]`.

我怀疑您应该将删除代码提取到一个单独的方法中，然后在循环中调用它：

```
for(int i =0; i < temp.length ; i++)
{
    jComboBox1.addItem(removeUnwantedCharacters(temp[i]));
} 
```

此外，我*强烈*建议您使用`replace`而不是在您*不*明确需要正则表达式模式匹配`replaceAll`的任何情况下使用。拥有以下代码可能会非常混乱：

 *```
foo = foo.replaceAll(".", ""); 
```

*看起来*它正在删除点，但*实际上*会删除所有字符，如“。” 被视为正则表达式...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T09:10:45.003

在拆分字符串之前执行所有替换。这比在循环中执行相同的代码要好。

例如：

```
String cleanString = str.replace("'", "").replace(" ", "").replace("[", "").replace("]", "");
String[] temp = cleanString.split(",");
for(int i = 0; i < temp.length ; i++) {
    jComboBox1.addItem(temp[i]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T08:57:11.250

好吧，您只在索引为 1（第二个）的项目中执行替换。但随后将它们全部添加到组合中（实际上是两个）。尝试：

```
for(int i =0; i < temp.length ; i++){
    temp[i]=temp[i].replaceAll("'", "");
    temp[i]=temp[i].replaceAll(" ", "");
    temp[i]=temp[i].replace("[", "");
    temp[i]=temp[i].replace("]", "");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T08:57:50.410

常见问题。
我认为[此](https://stackoverflow.com/questions/2532905/string-replace-in-java-me-double-space)代码符合您的要求。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T09:00:02.653

您只是在字符串的第二部分 temp[1] 上进行替换。你也需要在 temp[0] 中做。最好创建一个函数，该函数接受一个字符串并进行替换，并在 temp[0] 和 temp[1] 上调用它。您还可以考虑使用正则表达式一次替换所有字符，而不是一次替换一个。

```
String [] temp = String.split(",")

for (int i = 0;i<temp.length;i++) {
   temp[i] = replaceSpecialChars(temp[i]);
}

public String replaceSpecialChars(String input) {
// add your replacement logic here
return input
} 
```*

# mysql - 在不使用 LIMIT 的情况下选择第 5 个最高值

> ID：10495472
> 
> 赞同：-1
> 
> 时间：2012-05-08T08:52:53.907
> 
> 标签：mysql, sql

我是 SQL 新手，我想在不使用 LIMIT 的情况下获取第 5 个最高值。这是我正在尝试的代码，但它无法正常工作。它显示的是第 5 个最低值，而不是第 5 个最高值。

```
SELECT a . * FROM user AS a 
WHERE 5 = 
(SELECT count( DISTINCT b.id ) FROM user  AS b WHERE b.id >= a.id ORDER BY a.id DESC) 
```

谁能帮我这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T08:58:47.563

你也可以这样做：

```
SET @nth := 5;
SELECT
    a.*
FROM jos_modules AS a
WHERE  @nth = ( 
    SELECT 
        COUNT(b.id) 
    FROM user AS b
    WHERE 
        a.id >= b.id
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:56:09.053

尝试这个

```
SELECT a . *
FROM user AS a
WHERE 5 = (
SELECT count( DISTINCT b.id )
FROM user AS b
WHERE a.id >= b.id ORDER BY a.id ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-01T21:32:13.787

```
select * from (
select a.* , row_number() over (order by id asc) as RANK
from a ) where RANK=5 ; 
```

如果您使用的是 Teradata DB，则可以使用限定语句：

```
select * from a 
qualify row_number () over(order by id asc)=5; 
```

# ruby-on-rails-3 - 回形针后期处理 - 如何使用 jpegoptim/optpng 压缩图像

> ID：10495478
> 
> 赞同：13
> 
> 时间：2012-05-08T08:53:48.977
> 
> 标签：ruby-on-rails-3, paperclip

我想使用`jpegoptim`或`optipng`压缩用户通过回形针上传的图像。

我有一个回形针模型配置为：

```
 has_attached_file :image,
                    :styles => {:thumb => '50x50>', :preview => '270x270>' },
                    :url => "/system/:class/:attachment/:id/:basename_:style.:extension",
                    :path => ":rails_root/public/system/:class/:attachment/:id/:basename_:style.:extension" 
```

问题1：是否可以先压缩用户上传的原图，然后让Paperclip调整大小，这样就只有一个压缩过程？怎么做？

问题2：我打算通过`after_post_process`回调来做，我可以从中获取三个文件的所有实例，`image.queued_for_write`我想通过文件扩展名触发jpegoptim/optipng，但是当我使用时`current_format = File.extname(file.path)`，我得到类似：`.jpg20120508-7991-cqcpf2`. 有没有得到扩展字符串`jpg`？或者我只检查扩展字符串是否包含在该字符串中是否安全？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T15:51:15.800

由于没有其他答案，这就是我在项目中的做法，而且似乎几个月来都可以正常工作。

```
class AttachedImage < ActiveRecord::Base
  belongs_to :attachable, :polymorphic => true

  validates_attachment_presence :image
  validates_attachment_content_type :image, :content_type=>['image/jpeg', 'image/png', 'image/gif']

  has_attached_file :image,
                    :styles => {:thumb => '50x50>', :preview => '270x270>' },
                    # :processors => [:image_compressor],
                    :url => "/system/:class/:attachment/:id/:basename_:style.:extension",
                    :path => ":rails_root/public/system/:class/:attachment/:id/:basename_:style.:extension"

  after_post_process :compress

  private
  def compress
    current_format = File.extname(image.queued_for_write[:original].path)

    image.queued_for_write.each do |key, file|
      reg_jpegoptim = /(jpg|jpeg|jfif)/i
      reg_optipng = /(png|bmp|gif|pnm|tiff)/i

      logger.info("Processing compression: key: #{key} - file: #{file.path} - ext: #{current_format}")

      if current_format =~ reg_jpegoptim
        compress_with_jpegoptim(file)
      elsif current_format =~ reg_optipng
        compress_with_optpng(file)
      else
        logger.info("File: #{file.path} is not compressed!")
      end
    end
  end

  def compress_with_jpegoptim(file)
    current_size = File.size(file.path)
    Paperclip.run("jpegoptim", "-o --strip-all #{file.path}")
    compressed_size = File.size(file.path)
    compressed_ratio = (current_size - compressed_size) / current_size.to_f
    logger.debug("#{current_size} - #{compressed_size} - #{compressed_ratio}")
    logger.debug("JPEG family compressed, compressed: #{ '%.2f' % (compressed_ratio * 100) }%")
  end

  def compress_with_optpng(file)
    current_size = File.size(file.path)
    Paperclip.run("optipng", "-o7 --strip=all #{file.path}")
    compressed_size = File.size(file.path)
    compressed_ratio = (current_size - compressed_size) / current_size.to_f
    logger.debug("#{current_size} - #{compressed_size} - #{compressed_ratio}")
    logger.debug("PNG family compressed, compressed: #{ '%.2f' % (compressed_ratio * 100) }%")   
  end                              
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-26T18:05:26.247

还有一些宝石可以优化回形针图像：

*   [回形针优化器](https://github.com/janfoeh/paperclip-optimizer)
*   [回形针压缩机](https://github.com/emrekutlu/paperclip-compression)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-04T10:11:10.557

可能是性能上的妥协，但我用 FFMPEG 或 AVCONV 更好地压缩了图像。

```
sudo apt-get install ffmpeg 
```

**= 初始化器**

```
Paperclip.options[:command_path] = "/usr/bin/" # see `which ffmpeg` 
```

**= 模态**

```
after_save :compress_with_ffmpeg

def compress_with_ffmpeg
  [:thumb, :original, :medium].each do |type|
    img_path = self.avtar.path(type)
    Paperclip.run("ffmpeg", " -i #{img_path} #{img_path}")
  end
end 
```

我把 1.7MB 的图片压缩到 302.9KB ！！！

# c# - 如何在 C# 中使用 NUnit 编写存根方法

> ID：10495480
> 
> 赞同：9
> 
> 时间：2012-05-08T08:54:02.013
> 
> 标签：c#, testing, nunit, stub

我有 2 节课：

*   FirstDeep.cs
*   SecondDeep.cs

    我做了简单的代码，例如：

```
 class FirstDeep
    {
        public FirstDeep() { }

        public string AddA(string str)
        {
            SecondDeep sd = new SecondDeep();
            bool flag = sd.SomethingToDo(str);

            if (flag == true)
                str = string.Concat(str, "AAA");
            else
                str = string.Concat(str, "BBB");

            return str;
        }
    } 

```

和

```
class SecondDeep
    {
        public bool SomethingToDo(string str)
        {
            bool flag = false;
            if (str.Length < 10)
            {
                //todo something in DB, and after that flag should be TRUE
            }
            return flag;
        }
    } 
```

然后我想为方法“AddA”编写单元测试：

```
class Tests
    {
        [Test]
        public void AddATest()
        {
            string expected = "ABCAAA";

            FirstDeep fd = new FirstDeep();
            string res = fd.AddA("ABC");

            Assert.AreEqual(expected, res);
        }
    } 
```

在那之后我遇到了麻烦，我不知道在我的测试类中为方法SomethingToDo 编写存根有多正确。我总是假的。我应该返回 TRUE。但是怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-08T09:01:40.683

允许您编写存根的一个好方法是使用**依赖注入**。`FirstDeep`取决于`SecondDeep`并且在您的测试中您想`SecondDeep`用存根替换。

首先通过提取接口来更改现有代码，`SecondDeep`然后将其注入`FirstDeep`构造函数中：

```
interface ISecondDeep {

  Boolean SomethingToDo(String str);

}

class SecondDeep : ISecondDeep { ... }

class FirstDeep {

  readonly ISecondDeep secondDeep;

  public FirstDeep(ISecondDeep secondDeep) {
    this.secondDeep = secondDeep;
  }

  public String AddA(String str) {   
    var flag = this.secondDeep.SomethingToDo(str);
    ...
  }

} 
```

注意`FirstDeep`不再创建`SecondDeep`实例。相反，在构造函数中注入了一个实例。

`ISecondDeep`在您的测试中，您可以为where`SomethingToDo`始终返回 true创建一个存根：

```
class SecondDeepStub : ISecondDeep {

  public Boolean SomethingToDo(String str) {
    return true;
  }

} 
```

在测试中，您使用存根：

```
var firstDeep = new FirstDeep(new SecondDeepStub()); 
```

在生产代码中，您使用“真实” `SecondDeep`：

```
var firstDeep = new FirstDeep(new SecondDeep()); 
```

使用依赖注入容器和存根框架可以使很多事情变得更容易。

如果您不想重写代码，可以使用诸如[Microsoft Moles](http://research.microsoft.com/en-us/projects/moles/)之类的拦截调用框架。[在下一版本的 Visual Studio 中， Fakes Framework](http://msdn.microsoft.com/en-us/library/hh549175%28v=vs.110%29.aspx)中将提供类似的技术。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T09:02:44.537

为了使您的代码可测试，请不要在您的类中实例化依赖项。使用[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)（通过构造函数、属性或参数）。还可以使用抽象类或接口来模拟依赖项：

```
class FirstDeep
{
    private ISecondDeep oa;

    public FirstDeep(ISecondDeep oa) 
    { 
        this.oa = oa;
    }

    public string AddA(string str)
    {
       return String.Concat(str, oa.SomethingToDo(str) ? "AAA" : "BBB");
    }
} 
```

依赖于抽象允许您单独测试您的类。

```
interface ISecondDeep
{
   bool SomethingToDo(string str);
}

class SecondDeep : ISecondDeep
{
    public bool SomethingToDo(string str)
    {
       bool flag = false;
       if (str.Length < 10)
       {
           // without abstraction your test will require database
       }
       return flag;
    }
} 
```

这是测试样本（使用[Moq](http://code.google.com/p/moq/wiki/QuickStart)）。它向您展示了如何`true`从调用返回到您的模拟依赖项：

```
[TestFixture]
class Tests
{
    [Test]
    public void AddAAATest()
    {
        // Arrange
        Mock<ISecondDeep> secondDeep = new Mock<ISecondDeep>();
        secondDeep.Setup(x => x.SomethingToDo(It.IsAny<string>())).Returns(true);
        // Act
        FirstDeep fd = new FirstDeep(secondDeep.Object);
        // Assert
        Assert.That(fd.AddA("ABD"), Is.EqualTo("ABCAAA"));
     }
} 
```

# php - 教义 2 创建 SQLException 约束冲突“姓氏不能为空”，但已设置

> ID：10495481
> 
> 赞同：1
> 
> 时间：2012-05-08T08:54:01.983
> 
> 标签：php, pdo, doctrine-orm

我并没有那么自大地相信《教义 2》被破坏了，但我实际上无法为我的案例找到一个完美的标题。

所以事情是这样的：
我有一个名为“Contact”的实体，它显然是使用 Doctrine 2 设置的。到目前为止一切顺利，我能够生成我的数据库，除了在其中插入数据时。我尝试设置一些fixtures.php 脚本，允许我在每次启动我的ant 脚本时插入数据。

问题是，当我尝试使用 save() 时，我得到一个 PDOException 告诉我有一个 db 约束违规：

```
[exec] PHP Fatal error:  Uncaught exception 'PDOException' with message 'SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'lastname' cannot be null' in C:\wamp\www\GPos\library\Doctrine\DBAL\Statement.php:131
[exec] Stack trace:
[exec] #0 C:\wamp\www\GPos\library\Doctrine\DBAL\Statement.php(131): PDOStatement->execute(NULL)
[exec] #1 C:\wamp\www\GPos\library\Doctrine\ORM\Persisters\BasicEntityPersister.php(226): Doctrine\DBAL\Statement->execute()
[exec] #2 C:\wamp\www\GPos\library\Doctrine\ORM\UnitOfWork.php(701): Doctrine\ORM\Persisters\BasicEntityPersister->executeInserts()
[exec] #3 C:\wamp\www\GPos\library\Doctrine\ORM\UnitOfWork.php(280): Doctrine\ORM\UnitOfWork->executeInserts(Object(Doctrine\ORM\Mapping\ClassMetadata))
[exec] #4 C:\wamp\www\GPos\library\Doctrine\ORM\EntityManager.php(328): Doctrine\ORM\UnitOfWork->commit()
[exec] #5 C:\wamp\www\GPos\library\GPos\Doctrine\ActiveEntity.php(113): Doctrine\ORM\EntityManager->flush()
[exec] #6 C:\wamp\www\GPos\scripts\fixtures.php(20): GPos_Doctrine_ActiveEntity->save()
[exec] #7 {main}
[exec]   thrown in C:\wamp\www\GPos\library\Doctrine\DBAL\Statement.php online 131 
```

如果我忘记在我的实体上设置“姓氏”属性，那可能很容易调试，但事实并非如此：

```
$contact_store1 = new GPos_Model_Contact();
$contact_store1->setFirstname('');
$contact_store1->setLastname('Barber'); //Yep, it's here!
$contact_store1->setEmail('gho@zgzg.eu');
$contact_store1->setAdress('Grang 2, Jodone');
$contact_store1->setPhone('0032484555555');
$contact_store1->setCellphone('027512121');
$contact_store1->setTva('21651-1684-15151');
$contact_store1->setDiscount(0.00);
$contact_store1->setType('store');
$contact_store1->setStatus('active');
$contact_store1->save(); //line 19 
```

我检查了 ActiveEntity.php 中的一些回声，它已经设置好了......看看我的课，也许这就是一切都出错的地方......：

```
/**
 * @Entity
 * @Table(name="Contact")
 */
class GPos_Model_Contact extends GPos_Doctrine_ActiveEntity {
    /**
     * @Id @Column(type="integer")
     * @GeneratedValue
     */
    private $id;
    /** @Column(length=50) */
    private $lastname;
    /** @Column(length=50) */
    private $firstname;
    /** @Column(length=50, nullable=true) */
    private $email;
    /** @Column(length=150, nullable=true) */
    private $adress;
    /** @Column(length=50, nullable=true) */
    private $phone;
    /** @Column(length=50, nullable=true) */
    private $cellphone;
    /** @Column(length=100, nullable=true) */
    private $tva;
    /** @Column(type="decimal", nullable=true) */
    private $discount;

    /**
     * @ManyToOne(targetEntity="GPos_Model_User")
     * @JoinColumn(name="user_id", referencedColumnName="id", nullable=true)
     **/
    private $user;
    /** @Column(name="type", type="string", columnDefinition="enum('client', 'store_admin', 'user', 'store')")  */
    private $type;
    /** @Column(name="status", type="string", columnDefinition="enum('active', 'deleted')")  */
    private $status;
} 
```

所以，就是这样......无法真正理解它为什么会发生。请注意，我之前尝试设置的另一个班级也遇到了同样的问题（我只是记得）所以我想我的问题比这更全球化......但如果你们有任何线索，那将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:06:57.537

将属性`$lastname`公开并在它为空`var_dump`后使用`$contact_store1->setLastname('Barber');`，那里正在发生一些事情，但我不知道它可能是什么。

# objective-c - 格式化 NSURL

> ID：10495482
> 
> 赞同：0
> 
> 时间：2012-05-08T08:54:02.797
> 
> 标签：objective-c, nsurl

在我的应用程序中，我需要通过 NSURL 向 google 方向服务发出 json 请求。

当 URL 是静态的时，我能够获得 JSON 响应。

```
NSURL *googleMapsURL=[NSURL URLWithString:@"http://maps.googleapis.com/maps/api/directions/json?origin=SanFrancisco,CA&destination=Dallas,TX&waypoints=Los+Angeles,CA%7CHouston,TX&mode=driving&sensor=false"];

NSData *data=[NSData dataWithContentsOfURL:googleMapsURL]; 
```

但是，当我动态指定源站和目标站时，它不起作用。

```
NSString *urlString=[NSString stringWithFormat:@"http://maps.googleapis.com/maps/api/directions/json?origin=%@&destination=%@&waypoints=Los+Angeles,CA%7CHouston,TX&mode=driving&sensor=false",sourceStation, destinationStation];

NSURL *googleMapsURL=[NSURL URLWithString:urlString];

NSData *data=[NSData dataWithContentsOfURL:googleMapsURL]; 
```

它正在生成以下错误。

```
2012-05-08 03:30:15.960 SupplyTrackerApp2[3079:16403] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'data parameter is nil'
*** First throw call stack:
(0x19a7052 0x2448d0a 0x194fa78 0x194f9e9 0xecdfbd 0x2aae6 0x2a900 0x56ffbf 0x57021b 0x5704c3 0x580b71 0x5813df 0x581986 0x5815a4 0x34650 0x19a8ec9 0x4ab5c2 0x4ab55a 0x550b76 0x55103f 0x5502fe 0x4d0a30 0x4d0c56 0x4b7384 0x4aaaa9 0x1bbefa9 0x197b1c5 0x18e0022 0x18de90a 0x18dddb4 0x18ddccb 0x1bbd879 0x1bbd93e 0x4a8a9b 0x25cd 0x2535 0x1)
terminate called throwing an exception 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:01:44.880

对我来说，它看起来像`sourceStation`or `destinationStation`is `nil`。对于调试，您可以尝试在`NSString *urlString`定义之前的行中明确设置它们。

```
NSString *sourceStation = @"SanFrancisco,CA";
NSString *destinationStation = @"Dallas,TX"; 
```

如果这行得通，那么填充相应`NSString`的s是一个问题......

# php - 数组PHP中的组字段集元素

> ID：10495487
> 
> 赞同：0
> 
> 时间：2012-05-08T08:54:29.917
> 
> 标签：php, arrays

我有 html 表单和服务器端 php。我想在 HTML 中对一些表单元素进行分组，以便它在 php 中显示为数组

```
<fieldset>
    <input name="xx[]" type="text" />
    <input name="yy[]" type="text" />
</fieldset>
<fieldset>
    <input name="xx[]" type="text" />
    <input name="yy[]" type="text" />
</fieldset> 
```

所以它会出现在php数组中

```
array (
    [0] => array(
        [xx] => Array
            (
                [0] => 
                [1] => 
            )
        [yy] => Array
            (
                [0] => 
                [1] => 
            )
    ),

    [1] => array(
        [xx] => Array
            (
                [0] => 
                [1] => 
            )
        [yy] => Array
            (
                [0] => 
                [1] => 
            )
    );
); 
```

# sql - 创建计算总数量的递归 SQL 语句

> ID：10495493
> 
> 赞同：0
> 
> 时间：2012-05-08T08:54:47.237
> 
> 标签：sql, oracle, tree, oracle11g, recursive-query

我无法找到我的问题的解决方案。我有 4 张桌子：

**BomModule：**此表代表数据库中的一个模块。

```
CREATE TABLE "BOMMODULE"
(
    "MODULEID" NUMBER(10,0) NOT NULL ENABLE,
    "ISROOTMODULE"     NUMBER(1,0) NOT NULL ENABLE,
    "MODULENAME"       VARCHAR2(255 CHAR),
    ...
) 
```

**BomItem：**这个表代表一个叶子 - 或数据库中的一个项目。

```
CREATE TABLE "BOMITEM"
(
    "ITEMID"     NUMBER(10,0) NOT NULL ENABLE,
    ...
) 
```

**ModuleConnection：**此表将一个模块映射到另一个父模块。您可以定义属于特定父模块的子模块的数量。

```
CREATE TABLE "MODULECONNECTION"
(
    "ID"       NUMBER(10,0) NOT NULL ENABLE,
    "QUANTITY"   NUMBER(10,0) NOT NULL ENABLE,
    "SUBMODULE_MODULEID"   NUMBER(10,0) NOT NULL ENABLE,
    "PARENTMODULE_MODULEID" NUMBER(10,0) NOT NULL ENABLE,
    ...
) 
```

**ItemModuleConnection：** 此表将所有离开项目映射到一个模块。此外，您可以定义一个模块的项目数量。

```
CREATE TABLE "ITEMMODULECONNECTION"
(
    "ID"       NUMBER(10,0) NOT NULL ENABLE,
    "QUANTITY" NUMBER(10,0) NOT NULL ENABLE,
    "ITEMID"   NUMBER(10,0),
    "MODULEID" NUMBER(10,0),
    ...
) 
```

从表结构中可以看出，项目和模块是相互连接的，并且具有不同的数量。由于这些连接非常灵活，我无法创建一个 SQL 语句，它将为我提供一个项目的总数量：

```
select quantity from ...... where itemId = xy; 
```

SQL 语句应该检查从项目到根模块的所有数量并将它们相乘：

```
2 x rootmodule (total 2)
-- 1x submodule 1 (total 2)
-- 2x submodule 2 (total 4)
---- 5x item 1 (total 20)
---- 6x item 2 (total 24) 
```

请帮我创建这个 sql 语句，非常感谢您的回答！

约束：
- 它必须是 SQL 语句（用于 Java 应用程序）
- 数据库是 Oracle 11g

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:29:26.313

你需要的是oracle的`connect by`and`start with`子句。抱歉没有时间真正想出一个sql语句，但是这里解释了语法：http: [//www.adp-gmbh.ch/ora/sql/connect_by.html](http://www.adp-gmbh.ch/ora/sql/connect_by.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:01:22.600

我能够通过使用 Java 而不是 SQL 来解决这个问题。这是我的方法：

```
/**
 * This recursive functions interates through the whole tree and checks if there are items and modules.
 * As soon as an item is found, it is multiplied with the module amount. The result is saved in a HashMap. 
 * This HashMap is being parsed in the end.
 */
public HashMap<Integer, Integer> updateBom(HashMap<Integer, Integer> bom, BomModule module, int amount, BomHandling bh) {
    if(bom == null) {
        bom = new HashMap<Integer, Integer>();
    }
    // get all items for this parent module
    Collection<ItemModuleConnection> items = bh.getItems(module.getModuleId());
    Iterator<ItemModuleConnection> itemIterator = items.iterator();

    while(itemIterator.hasNext()) {
        ItemModuleConnection con = itemIterator.next();

        int itemQuantity = con.getQuantity() * amount;

        // if bom item already exists in bom list, get it and update quantity
        Integer currentItemQuantity = new Integer(0);
        if(bom.containsKey(new Integer(con.getItem().getItemId()))) {
            currentItemQuantity = bom.get(con.getItem().getItemId());
            bom.remove(bom.get(con.getItem().getItemId()));
        }
        bom.put(con.getItem().getItemId(), currentItemQuantity + itemQuantity);
    }

    // get all modules for this parent module
    Collection<ModuleConnection> modules = bh.getConnections(module.getModuleId());
    Iterator<ModuleConnection> moduleIterator = modules.iterator();

    // set the quantity of the module by multiplying it with the amount
    while(moduleIterator.hasNext()) {
        ModuleConnection moduleCon = moduleIterator.next();
        int moduleQuantity = moduleCon.getQuantity();
        updateBom(bom, moduleCon.getSubModule(), moduleQuantity * amount, bh);
    }
    return bom;
} 
```

在打印单个项目之前，我调用了这个 updateBom() 函数，然后从 HashMap 中检索值：

```
HashMap<Integer, Integer> bom = updateBom(null, bomModule, 1, bh);
Iterator<Map.Entry<Integer, Integer>> entries = bom.entrySet().iterator();

while (entries.hasNext()) {

    Map.Entry<Integer, Integer> bomEntry = entries.next();
    BomItem item = bh.getBomItem(bomEntry.getKey());
    Integer itemAmount = bomEntry.getValue();

    ...
} 
```

# android - 对话框在android中未正确呈现

> ID：10495496
> 
> 赞同：0
> 
> 时间：2012-05-08T08:54:51.503
> 
> 标签：android

我有一个对话框，但有些如何有一个未知的背景图像。我怎样才能删除该图像。请指导我。

![在此处输入图像描述](../Images/78f48661e7111de81c1669848aabe8d3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:22:57.107

您必须扩展对话框类，为您的对话框构建 xml 文件，例如

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Do you Want to bookmark?" 
        android:gravity="center"/>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/button_no"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="No" />

        <Button
            android:id="@+id/button_yes"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Yes" />

    </LinearLayout>

</LinearLayout> 
```

当然你可以做一些定制

对于您的自定义对话框类，您可以这样做

```
public class CustomizeDialog extends Dialog implements OnClickListener {
 Button okButton;

 public CustomizeDialog(Context context) {
  super(context);

  /** 'Window.FEATURE_NO_TITLE' - Used to hide the title */
  requestWindowFeature(Window.FEATURE_NO_TITLE);

  setContentView(R.layout.main);
  yesButton = (Button) findViewById(R.id.button_yes);
  yesButton.setOnClickListener(this);

  noButton = (Button) findViewById(R.id.button_no);
  noButton.setOnClickListener(this);

 }

 @Override
 public void onClick(View v) {
        switch(v.getId()){

        case R.id.button_yes: 
             dismiss();
             //doSomething
             break;
            case R.id.button_no:
            dismiss();
            //doSomethingElse
            break;

 }

} 
```

希望这将帮助您必须发布代码以弄清楚为什么这些背景框会出现在您面前，但是像我提到的那样行事应该可以为您解决问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T08:58:00.510

这可能是因为您使用标准`AlertDialog`并设置了内容视图 + 无标题（尽管您没有设置标题，但它的空间将保留在对话框中）。

而是扩展`Dialog`类并根据需要构建对话框。此外，如果您想使用自己的背景，`Dialog`则实现一个扩展`Theme.Dialog`和覆盖的主题：

```
<item name="android:windowBackground">@android:drawable/panel_background</item> 
```

用你自己的drawable。

# php - 仅向注册用户显示 joomla 文章，如果未登录，则显示登录屏幕是

> ID：10495498
> 
> 赞同：6
> 
> 时间：2012-05-08T08:54:52.970
> 
> 标签：php, joomla, content-management-system, joomla1.7

在 1.6 之前的 Joomla 中，我可以将一个菜单项设置为**public**，它的内容：例如一篇文章 to **registered**。

这导致人们在未登录时可以在菜单中看到文章的链接，但在单击时会得到一个登录组件。之后他们看到了这篇文章。

在 1.7 中，这些相同的操作会导致当我单击链接时组件屏幕保持空白。

*当前端用户没有以足够的权限登录时，如何让注册文章显示登录屏幕？*以前很容易，现在我似乎无法让它工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T11:39:55.157

我要回答我自己的问题，因为我相信人们将来会需要这个，我的解决方案只涉及一些额外代码的规则，然后你可以将每篇文章等设置为已注册，你会看到一个登录字段当用户未登录时。

在您的模板 index.php 中将其放在顶部附近，它会获取您文章的访问级​​别。

```
$article =& JTable::getInstance("content");
$article->load(JRequest::getVar('id'));
$cAccLevel = $article->get("access"); 
```

然后在您的组件上方添加一个模块位置，并仅在您需要的访问级别> 1时显示它

```
<?php if($cAccLevel > 1): ?>
    <jdoc:include type="modules" name="LOGIN_MODULE_POSITION" />
<?php endif; ?> 
```

然后在模块管理器中将登录模块添加到 LOGIN_MODULE_POSITION。

瞧……不需要路由等等……一切都是开箱即用的，我选择像这样设计注销框和操作字段：

```
.logout-button,
.actions{
    display:none;
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T18:10:11.940

1.  从菜单管理器创建一个新菜单，说它被命名为“隐藏菜单”。
2.  添加只有注册用户才能访问的任何菜单项。
3.  设置这些菜单项所需的访问级别（本例中为“特殊”，但也可以是“已注册”）。不要为“隐藏菜单”创建模块。它不会显示在任何页面上，因此不需要模块。
4.  创建您的“真实”菜单（例如，“主菜单”）和将为所有用户显示的菜单项（例如“提交文章”）。菜单项将具有“别名”菜单项类型。它的“菜单项”参数将是“隐藏菜单”上的“提交文章”菜单项。此菜单项的访问级别将是“公共”，因为我们希望每个人都能看到和使用它。

5.  为这个菜单创建一个“mod_mainmenu”类型的模块，就像你为任何菜单做的那样。

6.  创建登录模块并将访问级别设置为“公共”。确保模块只显示在“公共”菜单项上而不是注册项上，并选择一个可见的位置。

现在，当访客（未登录的用户）访问“提交文章”菜单选项时，它会将他们重定向到带有“仅限注册访问者”消息的空白页面。. 如果他们成功登录，他们将被带到所需的页面（在本例中为“提交文章”）。如果已经登录，他们直接去那里。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T16:23:17.617

如果您想要的只是在访问者是注册用户的情况下显示内容，您可以使用以下代码：

```
$user =& JFactory::getUser();

    <?php
   if( !$user->guest ){ ?>

       [[what ever you want to do ]]
   <?php endif; ?> 
```

希望有帮助！！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T05:34:49.700

转到菜单内容，创建或编辑要保护的项目的部分。

您会看到一个选项：访问级别

有3个选项：

公共、注册和特殊

将其设置为：已注册

然后，您需要更改此部分的文章，仅此而已。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-08T17:45:00.443

首先，您必须将您的 joomla 安装更新到 2.5（它是 joomla 的最新版本），Joomla 社区不再支持 1.7。

有几种方法可以设置您的查看权限。[K2](http://getk2.org/)是一个有用的 CCK 组件来完成这项工作，我使用的一个有用的技术是在菜单中“链接”您文章的类别并设置菜单项的特定权限

# soap - 解析来自asp的soap响应

> ID：10495503
> 
> 赞同：1
> 
> 时间：2012-05-08T08:55:08.207
> 
> 标签：soap, vbscript

我有一个肥皂请求返回如下响应：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
    <SOAP-ENV:Body>
    <ns1:authkeyResponse xmlns:ns1="urn:authkey">
    <return xsi:type="xsd:string">ALREADY REGISTERED</return>
    </ns1:authkeyResponse>
    </SOAP-ENV:Body>
    </SOAP-ENV:Envelope> 
```

我按照[http://kapie.com/2007/sumption-soap-web-services-from-vbscript](http://kapie.com/2007/consuming-soap-web-services-from-vbscript)中的示例使用 vb 脚本调用肥皂。我在 strSoapReq 对象中获得了整个 xml，但不确定如何解析它，以便我只能弹出“已注册”的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:05:03.540

从您提供的链接的示例中，请确保您`GetResult`明确调用。

如果您按照示例并根据您的 SOAP 结果，它应该是：

`GetResult(strResult, "result")`

# css - IE7 的 CSS 修复公式

> ID：10495504
> 
> 赞同：1
> 
> 时间：2012-05-08T08:55:16.883
> 
> 标签：css, internet-explorer-7

在我的网站中，我需要支持 IE7。现在每个人都知道在 IE7 中设置样式并不是一件容易的事。人们使用 HTML 中的条件语句为特定版本的 IE 加载特定样式表。但就我而言，我不能使用这样的条件语句，因为我在 WebCenter Portal 应用程序中。在这里我需要使用皮肤。它也是一个 CSS 文件。

所以我想知道是否存在任何公式，我可以通过它为 IE7 指定特定的 css 属性值。

假设我有一堂课：

```
.filterbox{
    padding:12px 0;
    margin:12px 0
} 
```

现在这个余量对于除 IE7 之外的所有浏览器都是可以的（我没有在 IE<7 中测试它）。如果我在 IE7 中使用`margin:0;`，那么该样式将是完美的，但它会在其他浏览器中中断。

如何在 IE7 和非 IE7 的同一 css 类中指定此边距？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:01:28.783

**仅当您真的不能使用[条件注释](http://www.quirksmode.org/css/condcom.html)时才使用此技巧！**它们是解决 IE 问题的最佳解决方案。像这样的黑客会很快弄乱你的 CSS 并使其无效。

所以，这是一个针对 IE7 的 hack（当然这是在你的正常定义之后）：

```
html>body #filterbox {
*margin: 0;
} 
```

来自[CSS hacks – 在 Thought-After 上定位 IE7](http://www.thought-after.com/2006/11/css-hacks-targetting-ie7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:01:14.010

如果您将 IE7 和其他浏览器的样式表分开，您可以解决它：

```
/* other browsers */
.filterbox{
padding:12px 0;
margin:12px 0
}
/* IE 7 */
*:first-child+html .filterbox
{
 padding:12px 0;
 margin:0;
} 
```

注意力！你必须最后定义 Ie 7 的样式，因为浏览器会覆盖第一个定义。其他人将忽略最后一个。

# java - 检查和更改 TextView 文本颜色

> ID：10495509
> 
> 赞同：0
> 
> 时间：2012-05-08T08:55:36.457
> 
> 标签：java, android

我有 ScroolView，它在线性布局中。在这个线性布局中，我以编程方式添加了大约 20 个 TextView。当我按下其中任何一个 TextView 时，我将它的颜色更改为红色（起初它是白色的）。当我再次按下相同的 TextView 时，我检查他的颜色，如果是红色，我再次将其设为白色。

我想做的事：

例如，我按 1 TextView 并将其设为 RED。然后，当我按 2 TextView 时，我将其设为 RED，我想将 1 TextView 设为 WHITE。这个功能应该是TextView。

那么有什么想法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:04:40.233

你的意思是说你只需要一个文本视图是红色的。您可以使用 2 个变量来执行此操作。一个是布尔值`colored`。这表明至少有一个 TextView 是彩色的。另一个是 TextView 变量。创建一个 TextView 变量`lastColoredTextView`。最初让它为空。然后，每当单击 textview 时，将 分配`lastColoredTextView`给单击的 TextView。然后每当您单击时，只需检查是否`colored`将颜色更改`lastColoredTextView`为白色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:56:54.357

更改类名，它将正常工作。

公共类 Test_stflowActivity 扩展活动 {

```
TextView current_red_txt_box = null;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    TextView tv = null;
    LinearLayout lp = new LinearLayout(getApplicationContext());
    lp.setOrientation(LinearLayout.VERTICAL);
    View.OnClickListener txt_click = new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            current_red_txt_box.setTextColor(Color.WHITE);
            TextView tv = (TextView) v;
            tv.setTextColor(Color.RED);
            current_red_txt_box = tv;
        }
    };
    for (int i = 0; i < 20; i++) {
        tv = new TextView(getApplicationContext());
        tv.setId(i);
        tv.setTextSize(40);
        tv.setText("you text");
        tv.setTextColor(Color.WHITE);
        tv.setOnClickListener(txt_click);
        lp.addView(tv);
        current_red_txt_box = tv;
    }
    setContentView(lp);
} 
```

}

# iphone - Save for Enterprise 或 ad-hoc 部署不存在

> ID：10495516
> 
> 赞同：15
> 
> 时间：2012-05-08T08:56:10.360
> 
> 标签：iphone, xcode, ipa, archiving

鉴于一些临时企业分发，我正在尝试为我的应用程序构建一个 IPA 文件。我一直在研究如何使用我目前使用的版本 Xcode 4.3.2 来执行此操作，并且我达到了在管理器中我应该选择“保存为企业或临时部署”选项的地步。问题是这个选项实际上并没有首先出现。事实上，我只有“保存已构建产品”和“导出为 Xcode 存档”选项。

我想问题在于我的应用程序的一些配置设置，但无法通过网络找到任何帮助。因此我的问题在这里 :-) 希望能帮助我理解我的代码有什么问题。

提前感谢任何在这里提供帮助的人。

干杯。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-02T23:30:21.993

如果您的项目使用第三方库作为子项目，您可能需要更改一些设置，以便 xcode 将您的应用程序识别为单个捆绑包而不是多个产品。只能为企业或临时部署保存单捆绑应用程序，或提交到应用程序商店。

首先，在第三方库目标的*Build Settings选项卡中，将***Skip Install**设置设置为**Yes**。

其次，在第三方库目标的*Build Phases选项卡中，查看**Copy Headers阶段并确保**Public*或*Private*部分中没有标头（它们应该都在 Project 部分中）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-09T16:04:04.590

我终于解决了这个问题。事实证明，问题在于我通过包含他们的（源）Xcode 项目而不是预编译的库来使用第三方库。出于某种原因，Xcode 将它们视为不同的应用程序，并且不会让我将它们全部包装在一个 IPA 下。我删除了项目，删除了实际的静态库和头文件，生成了存档，然后……tadaaah：在这里我可以找到我最想要的导出选项。

感谢大家的帮助，特别感谢帮助我发现这一点的 The Saad。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-08T13:49:25.157

好吧，我在使用 GMGridView 时遇到了同样的问题。我没有使用 Diferdin 的解决方案，因为我仍然想将 GMGridView 项目保留在那里。我的解决方案是：转到 GMGridView 的目标，点击“Build Phases”->“Copy Headers”，然后将“Public”和“Private”下的所有头文件移动到“Project”。重做产品 -> 存档，然后您可能会找到“为企业保存或不存在临时部署”选项。这对我有用，希望对遇到与我相同问题的人有所帮助。另外我相信这个想法也可以应用于任何其他第三方项目。祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T10:45:24.647

也许你已经这样做了，但我们必须确定。

您是否在产品和目标中指定了临时分发的代码签名身份作为您的新证明。轮廓？

那么您是否尝试归档您的应用程序？（产品 -> 存档）如果它是灰色的，只需将目标指定为 iOS 设备，即使没有插入任何设备。

如果存档成功，您应该在管理器中有一个存档。选择它，然后选择照常分发。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T16:47:44.493

我今天经历了一些事情。没有导出临时文件的选项。所以通过“验证设置”来解决这个问题。

1.  转到您的项目目标，
2.  在配置列表下会有一个名为“验证设置”的时钟按钮。点击它
3.  并单击“执行更改”
4.  再次构建归档

为了解释这个问题，看起来 Xcode 将项目的文件理解为 Mac 应用程序而不是 iOS 应用程序。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T22:24:15.450

作为后续行动，我知道其他几个人已经回答了。我遇到了这个问题，这篇文章中的答案非常有帮助。一些总结性回应：

*   对我来说，这不是个人资料问题。我已经成功完成了大量的临时和分发应用程序二进制构建，所以我知道这不是我的情况下的配置文件问题。

*   我听取了一位海报的建议，并做了项目“验证设置”，并执行了一些建议的更改……但这并没有解决问题。

*   问题实际上是没有将其纳入主捆绑包的项目库。就我而言，我有一些库，它们有自己的资源包。关键是，当您进行归档构建时，请确保并选择构建，选择“在查找器中显示”，然后选择“显示包内容”以查看哪些附加内容未将其放入主应用程序包中。这就是我如何找到一些额外的资源包，这些资源包被捆绑到一些我什至不需要的库中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-24T18:21:41.313

我发现有用的事情是在您的主项目上关闭跳过安装。如果归档后您仍然看到创建的包（组织者弹出），那么子项目仍在创建产品。关闭所有子项目 Skip Install to NO 并让您的项目达到档案不会在 Organizer 中弹出的程度。然后，您可以在您的主要项目上安全地将“跳过安装”设置为“是”，您的大脑中会出现一点点成就。

# image-processing - 在 illustartor 中压缩 eps 图像大小

> ID：10495518
> 
> 赞同：2
> 
> 时间：2012-05-08T08:56:19.887
> 
> 标签：image-processing, compression, adobe-illustrator

我在 illustrator 中有一个非常高分辨率的图像，这导致 eps 文件非常大，我要求使用批处理工具或脚本来压缩 eps 图像，换句话说，在不影响宽度和高度的情况下降低其分辨率图像。我不想将图像导出为单独的 Jpg 文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T06:17:49.870

Illustrator 实际上有一个相当不错的 EPS 算法；另一个程序可能会使它变小一点，但不会小很多。我认为 EPS 没有内部压缩算法（就像我们习惯于有损 JPG 或无损 LZW TIFF）......它不是那种格式。

也就是说，您可以做一些事情来使 EPS 文件更小：

*   将所有字体转换为轮廓和/或取消选中保存对话框中的“嵌入字体”
*   简化路径细节（**对象>>路径>>简化**）
*   将花哨的位图效果（如阴影和透明度）保持在最低限度。如果您确实使用这些，请确保您的图像尺寸与您使用图像的目的相匹配：例如，如果您正在设计邮票，您的图像不应该是 8.5 x 11，这会触发全分辨率效果......本质上这会将您漂亮的矢量图像变成光栅特洛伊木马。
*   不要与图像一起保存图像预览。

# windows-phone-7 - 在 OnNavigatedTo 之后做代码

> ID：10495520
> 
> 赞同：1
> 
> 时间：2012-05-08T08:56:26.880
> 
> 标签：windows-phone-7, navigation, windows-phone-7.1

我有代码从其他页面获取 IdUsers

```
String IdUsers;

        public Main_Wallets_Page()
        {
            InitializeComponent();            
            MessageBox.Show(IdUsers);
        }

protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
        {
            String Id;
            if (NavigationContext.QueryString.TryGetValue("IdUsers", out Id))
                IdUsers = Id;
        } 
```

MessageBox 始终为 Null。我想在 OnNavigationTo 之后让 MessageBox 显示“IdUsers”（不要将 MessageBox 放在“OnNavigationTo”中）。

我该怎么做 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T16:33:47.820

您不应该在 OnNavigatedTo 中使用 MessageBoxes，因为如果用户不按下按钮，您的应用程序将崩溃，因为框架认为导航失败。构造函数中的消息框同样糟糕。

我可以想到两个选项（我将＃1用于这些事情）：

1.  在`Loaded`事件中显示 MessageBox。但要小心它可以被多次解雇。在构造函数中，您可以为 Loaded 事件添加处理程序，然后在处理程序中从处理程序中分离，以便仅调用一次。

2.  `Dispatcher.BeginInvoke`在调用周围使用`MessageBox.Show`，以免阻塞导航。这可能仍会阻塞 Dispatcher 线程。如果你真的想走这条路，你可以使用`ThreadPool.QueueUserWorkItem`或[TPL Task](http://www.nuget.org/packages/System.Threading.Tasks)。

我也使用`OnLayoutUpdated`了该`Loaded`事件的位置，但我不记得确切原因:) 似乎该页面尚未显示，`Loaded`而在另一个事件中已显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T13:01:36.880

**DO NOT** place `MessageBox` into `OnNavigatedTo` event. Try to create an empty project with `MainPage` and `Page2`. Place button on `MainPage` to navigate to `Page2`. In `Page2` place `MessageBox` in `OnNavigatedTo` event. Then everythig will work fine if you Start Debugging from VS. BUT if you deploy and run it you will see that when you navigate to `Page2` you see `MessageBox`. Then don't do anything, just wait for about 15 sec. `MessageBox` will react as `Canceled` and **APPLICATION WILL BE CRASHED!** without any navigation to `Page2` or `MainPage`. The same thing happens if you use `Dispatcher.BeginInvoke` around the `MessageBox.Show`. I assume that `OnNavigatedTo` event has a timeout which works only when app is deployed. So you should run your `MessageBox` when Navigation is competed. Everything works if you do

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e) {
    base.OnNavigatedTo(e);

    var lcTimer = new DispatcherTimer { Interval = new TimeSpan(0, 0, 0, 0, 200) };
    lcTimer.Tick += (s2, e2) => {
         (s2 as DispatcherTimer).Stop();
         if (MessageBoxResult.OK == MessageBox.Show("Test, don't push", "", MessageBoxButton.OKCancel))
             MessageBox.Show("OK");
         else
             MessageBox.Show("Cancel");
    };
    lcTimer.Start();
} 
```

**Note:** If you have some code in `OnNavigatedTo` run above code at the end of `OnNavigatedTo`.

I liked what Austin Thompson(upvote) has adviced with `ThreadPool.QueueUserWorkItem`. But note that with this approach you need to place MessageBox inside the `Dispatcher.BeginInvoke` otherwise you will receive cross-thread exception. So the code is the following

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e) {
    base.OnNavigatedTo(e);

    ThreadPool.QueueUserWorkItem((stateInfo) => {
        Dispatcher.BeginInvoke(() => {
            if (MessageBoxResult.OK == MessageBox.Show("Test don't push", "", MessageBoxButton.OKCancel))
                MessageBox.Show("OK");
            else
                MessageBox.Show("Cancel");
        });
    });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T09:04:18.423

如果此值已初始化，您可以将其存储在应用程序隔离存储中。然后，当调用构造函数时，您可以从那里读取它。在这种情况下，用户 ID 的值将被初始化并且 MessageBox 不会显示为 NULL。

# javascript - JQuery Animate .offset() .position() 返回 NULL

> ID：10495521
> 
> 赞同：0
> 
> 时间：2012-05-08T08:56:37.647
> 
> 标签：javascript, jquery, html

我正在尝试创建一个 JQuery 插件来从右向左滑动一些图像。

我试图搜索一个插件，但我想我会自己创建它。
**我有什么：**
- 像这样的几个 DIV 元素：

```
<div class="footer_image_div project">
</div> 
```

*   我想如果我检索项目的所有位置并将它们动画到左侧 260 就可以了

我试过

```
$(function(){
         $('.project').each(function() {
             alert('a');
             var elm = $(this);
             elm.find(".project").animate({}, 500, function(){
                var pos = elm.find(".project").position();
                alert(pos.top);
             });

         });
      }); 
```

我也尝试过偏移，两者都返回NULL。

我该怎么办？我应该去哪里看？我很困惑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:00:05.647

```
$(function(){
     $('.project').each(function() {
         alert('a');
         var elm = $(this);
         elm.animate({}, 500, function(){
            var pos = elm.position();
            alert(pos.top);
         });

     });
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:01:24.273

```
// This code will work right if `.project` is not nested.

.project {
    position: absolute;
}

$('.project').each(function() {
      var elm = $(this);
      elm.animate({
         left: '+=260px'
      }, 500, function(){
         var pos = elm.position();
      });
 }); 
```

# php - ExtJs 4 FilterFn：函数意外行为

> ID：10495525
> 
> 赞同：0
> 
> 时间：2012-05-08T08:56:50.483
> 
> 标签：php, extjs

我有一个 xtype:'combo'，它看起来像这样：

```
xtype: 'combo',
id: 'records_list_author_id',
emptyText: 'Filter By author',
editable: false,
store: 'FilterRecordsByAuthor',
displayField: 'firstname',
valueField: 'id',
lastQuery: '',
triggerAction: 'all',
queryMode: 'local',//'remote',
typeAhead: false,
width: 200 
```

我使用非常简单的故事，代理定义如下：

```
proxy: {
  type: 'ajax',
  actionMethods: 'POST',
  api: {
    read:  g_settings.baseUrl + 'index.php/record/getAuthorsOfRecords'
  },
  reader: {
    type: 'json',
    root: 'data',
    idProperty: 'id',
    successProperty: 'success'
    //totalProperty: 'totalCount'
  }
} 
```

在我的控制器中，我有这个：

```
var comboBoxFilterByAuthorSt = this.getFilterRecordsByAuthorStore();
comboBoxFilterByAuthorSt.clearFilter(true);
comboBoxFilterByAuthorSt.filter ({
  filterFn: function(item) {
    return item.get('category_id') == sel.raw.categoryId;
  }
}) 
```

因此，例如，当我`sel.raw.categoryId = 1`在我的商店中匹配具有 2 个不同作者的记录时，但在组合框中我只得到其中一个名称。在其他情况下，我也会得到不正确的结果。我检查了我的 sql 查询，它工作正常并返回正确的信息，但是当我过滤商店时，我没有得到匹配项，我知道它们存在。也许问题出在其他地方，但也许我在制作过滤器时错过了一些东西。所以 - 任何建议表示赞赏。

谢谢

勒龙

# python - How do I find out what version of reportlab I'm running?

> ID：10495526
> 
> 赞同：7
> 
> 时间：2012-05-08T08:56:53.373
> 
> 标签：python, reportlab

I need to know what version of reportlab I'm running.

The following doesn't seem to work.

```
import reportlab
print reportlab.__version__ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T09:02:46.487

Can you try:

```
print reportlab.Version 
```

# scala - 为什么允许匿名函数声明而这个不允许？

> ID：10495527
> 
> 赞同：1
> 
> 时间：2012-05-08T08:56:53.490
> 
> 标签：scala

为什么会这样：

```
val addOne = {a : Int => a + 1 } 
```

但这不是：

```
val addOne = a: Int => a + 1 
```

据我了解，两者都声明了一个带有一个输入参数的匿名函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T09:03:01.963

参数列表必须放在括号中。

```
val addOne = (a: Int) => a + 1 
```

有关完整语法，请参阅语言规范。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T09:14:04.753

因为您定义了一个函数并将其分配给一个值。

```
{ a: Int => a + 1 } 
```

是一个定义的函数。您也可以这样定义函数：

```
(a: Int) => a + 1 
```

或者

```
(a: Int) => { a + 1 } 
```

这是相同的。如果您不想在孔表达式周围使用括号，则只需将参数列表用括号括起来即可。

# java - XPages 中的 PDF 不使用 iText？

> ID：10495532
> 
> 赞同：1
> 
> 时间：2012-05-08T08:57:10.860
> 
> 标签：java, javascript, lotus-notes, xpages, lotus

我正在尝试制作 PDF 文件。并且注释文件也是内容。我对 iText 有一个清晰的想法。

但是有没有其他解决方案可以在不使用 iText 的情况下制作 PDF？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T02:18:19.990

使用 XSL:FO 的 Apache FOP 是一种可以从 XPages 生成 PDF（和其他格式）的方法。我正在我的博客上写[一篇文章系列](http://www.wissel.net/blog/htdocs/DominoXSLT)，详细介绍我的方法和解决方案。最终，一旦我有空闲时间，我会将所有内容打包并在 OpenNTF 上发布

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T09:36:27.457

你可以试试[Apache PDFBOX 。](http://pdfbox.apache.org/)我用它来导出文本内容，它工作得很好。它还可以在 Apache 许可下使用，因此它可以在专有软件中使用，这与 iText 不同，iText 在 Afero GPL 下可用，比 Apache 许可具有限制性。不利的一面是，Apache PDFBOX 不如 iText 成熟，因此可用的功能和文档较少。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T09:08:00.387

openntf 上有一个自定义控件，可以将数据转换为 pdf。

[http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=XPages%20PDF%20Exporter%20Custom%20Control](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=XPages%20PDF%20Exporter%20Custom%20Control)

编辑：我的错误这也使用了 iText。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T13:25:47.140

我使用 FDF 格式来填充 PDF 模板表单。

创建 yourPDFTemplate.pdf 并将其作为文件附加到数据库中添加字段“名称”，当您致电代理时，它将打开 PDF 文件并使用 MarkyRoden 填写该字段

这是 lotusscript 等价物，如果您愿意，可以像 xAgent 一样轻松完成。如果有人想要我，我可以很容易地创建一个例子。用notesdocument中的数据替换“MarkyRoden”

暗淡会话作为新的 NotesSession

```
Print |Content-type: application/vnd.fdf|
Print |%FDF-1.2|
Print |1 0 obj <<|
Print |/FDF <<|
Print |/Fields|
Print |[|
Print |<< /T (Name) /V (MarkyRoden) >>|
Print |]|
Print |/F (http://yourserver.com/mark/testing.nsf/yourPDFTemplate.pdf)|
Print |>>|
Print |>>|
Print |endobj|
Print |trailer|
Print |<< /Root 1 0 R >>|
Print |%%EOF| 
```

结束子

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T04:26:05.777

PD4ML 是一个选项，具体取决于您要执行的操作。

# android - 如何从 AlertDialog 中的 XML 布局获取 TextView 的参考？

> ID：10495535
> 
> 赞同：3
> 
> 时间：2012-05-08T08:57:26.930
> 
> 标签：android, android-alertdialog

在获取 TextView、SeekBar 和其他小部件的参考时，我遇到了一个奇怪的问题。我的 AlertDialog 如下所示：

```
public class LineDialog extends AlertDialog {
private static SeekBar seekBar1, seekBar2, seekBar3;
private static TextView textView1, textview2, textView3;

protected LineDialog(final Context context, final DrawView drawView) {
    super(context);

    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View dialogLayout = inflater.inflate(R.layout.line_dialog, null);

    setView(dialogLayout);
    setTitle("Line properties");
    textView1 = (TextView) findViewById(R.id.textView1); // TODO Code crash here :(
    setButton("Ok", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            seekBar1 = (SeekBar) findViewById(R.id.seek1);
            // some other code...
        }
    });
} 
```

当我想在 Line 中获得参考时

```
textView1 = (TextView) findViewById(R.id.textView1); 
```

Logcat 向我发送错误

```
requestFeature() must be called before adding content 
```

但是当我在 LineDiealog(AlertDialog) 中的 onClick() 方法中获得参考时，一切正常。不幸的是，这为时已晚，因为在调用 LineDialog.show() 之前我需要此参考...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-01T00:49:55.233

您几乎在原始代码中就有了它。您保存了返回的视图`LayoutInflater`，所以这是您在调用时应该使用的视图，`findViewById()`所以它必须是`dialogLayout.findViewById(...)`。我自己也有同样的问题，现在就像魅力一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:27:36.980

您必须通过 LinearLayout 或 xml 文件中的 android:id 引用您的 textView。

**线性布局示例：**

```
LinearLayout mainLinear = new LinearLayout(this);
mainLinear.addView(textBox); 
```

将文本添加到框中：

```
textBox.addText("This is the text to add to the text box"); 
```

**xml引用（必须先在xml中创建文本框！！！）：**

```
TextView text1=(TextView) findViewById(R.id.NAME);
text1.setText("Hello please pick an option below"); 
```

NAME 部分必须替换为 .xml 文件中的 android:id 名称

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T09:17:21.040

[这](http://www.helloandroid.com/tutorials/how-display-custom-dialog-your-android-application)是自定义 AlertDialogbox 的示例以及[如何实现自定义 AlertDialog 视图](https://stackoverflow.com/questions/2795300/how-to-implement-a-custom-alertdialog-view) ，您可以看到如何将视图添加到 alertdialogbox。

# android - 使用webservice android获取数据

> ID：10495536
> 
> 赞同：1
> 
> 时间：2012-05-08T08:57:32.110
> 
> 标签：android, json

我在存储名称和图像的服务器上有数据。我想从服务器中检索它并在 Android 上的表格布局中显示。

我想知道为此目的哪个是最好的 xmlparsing 或 json 解析。有什么教程吗？

```
if($_REQUEST['mode']=="get")
{
 $result = mysql_query("SELECT state,imageurl FROM `pic_upload`");

        while($row = mysql_fetch_assoc($result))
        {
                $output=$row;

                print(json_encode($output));

        }
        mysql_close;
 } 
```

使用这个我将从服务器获取数据，但是如何使用 xml 解析获取数据，任何人都知道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:05:32.823

似乎`json_encode($output)`会产生 JSON 输出，因此您应该使用 Android 的 JSON API (org.json)。

一个相当新的教程位于[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)（还展示了如何将检索到的元素放在列表中），但你会发现很多只是谷歌搜索安卓和 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:01:32.123

如果它是一个简单的项目并且没有庞大的列表，那么`org.json`Android附带的包是完美的。

查看[Lars Vogel 的教程](http://www.vogella.com/articles/AndroidJSON/article.html)以开始使用。

# c# - Telerik 表达式编辑器 - 更改返回类型

> ID：10495540
> 
> 赞同：0
> 
> 时间：2012-05-08T08:57:50.043
> 
> 标签：c#, silverlight, linq, telerik

我正在使用 Telerik 表达式编辑器控件，该控件使用具有可为空的双字段（值）的财务对象：借方 (10)、借方 (100)、贷方 (20) 和贷方 (200)。在公式中，我想做类似的事情：借记 - 贷记 + DebitYTD - CreditYTD 这工作正常并返回`LinqExpression<Func<Finances, double?>>`类型。问题是当我尝试执行 0.045 * (Debit) 之类的返回`LinqExpression<Func<Finances, decimal>>`类型的操作时。如何处理两种不同的返回类型？我可以使表达式控件始终返回`LinqExpression<Func<Finances, double?>>`类型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:32:46.487

这可能会有所帮助还是您需要知道确切的类型？

```
dynamic dynamicExpression = expressionEditor.Expression;
dynamic compiledExpression = dynamicExpression.Compile();
object executionResult = compiledExpression(myInstance); 
```

取自[这里](http://www.telerik.com/community/forums/silverlight/expression-editor/exposing-result-preview-from-expression-editor.aspx)

# java - JPA 用户注册

> ID：10495542
> 
> 赞同：0
> 
> 时间：2012-05-08T08:57:52.543
> 
> 标签：java, jpa-2.0, user-registration

我正面临 JPA 的问题。我有一个问题，我需要插入新用户并同时设置它与用户的关系。

==> 数据库设计如下：

*   系统用户：

用户名(pk) 密码

*   系统分类组：

SystemClassifiedGroupName 用户名

==> 我在 EJB 中编写了以下逻辑

```
@Override
public void addUser(SYSTEM_CLASSIFIED_USER_GROUPS systemClassifiedUserGroup,
        String userName,
        String password,
        String emailID,
        String secretQuestion,
        String secretAnswer,
        String firstName,
        String lastName,
        String profilePictureURL,
        Date birthDate,
        String address1,
        String address2,
        String cityName,
        String zipCode,
        short stateID,
        short countryID,
        String officePhoneNumber) {

    FeedBack objFeedBack = null;
    String methodName = CLASS_NAME + ".addUser";

    try {

        SystemUsers objSystemUser=new SystemUsers(userName, password, emailID, firstName, lastName, address1, cityName);
        SystemClassifiedUserGroups tempGrp=new SystemClassifiedUserGroups(systemClassifiedUserGroup.name());

        States objState = new States(stateID);
        Countries objCountry = new Countries(countryID);
        objSystemUser.setSecretQuestion(secretQuestion);
        objSystemUser.setSecretAnswer(secretAnswer);
        objSystemUser.setProfilePictureURL(profilePictureURL);
        objSystemUser.setBirthDate(birthDate);
        objSystemUser.setAddress2(address2);
        objSystemUser.setStateID(objState);
        objSystemUser.setCountryID(objCountry);
        objSystemUser.setOfficePhoneNumber(officePhoneNumber);
        objSystemUser.setZipCode(zipCode);

        ArrayList<SystemUsers> lstUser = new ArrayList<SystemUsers>();
        lstUser.add(objSystemUser);
        tempGrp.setUserName(objSystemUser);
        tempGrp.setSystemClassifiedGroupName(systemClassifiedUserGroup.name());

        em.persist(tempGrp);

        em.persist(objSystemUser);

    } catch (Exception ex) {

        ex.printStackTrace();
    }
} 
```

==> 并通过以下方式调用该方法：

asr.addUser(SYSTEM_CLASSIFIED_USER_GROUPS.ADMIN, "raj", "pass", "abc@yahoo.com", "Color", "purple", "Raj", "Champaneriya", "abj.jpg", new Date() ，“jolly1”，“jolly2”，“surat”，“395007”，（短）1，（短）1，“3201708”）；

==> 但是我在 glassfish 控制台中得到了以下异常

```
SEVERE: java.lang.IllegalArgumentException: Object: BusinessFacade.Entities.SystemUsers[ userName=raj ] is not a known entity type.
at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.registerNewObjectForPersist(UnitOfWorkImpl.java:4158)
at org.eclipse.persistence.internal.jpa.EntityManagerImpl.persist(EntityManagerImpl.java:440)
at com.sun.enterprise.container.common.impl.EntityManagerWrapper.persist(EntityManagerWrapper.java:269)
at BusinessFacade.User.UserServices.addUser(UserServices.java:95)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5366)
at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
at sun.reflect.GeneratedMethodAccessor119.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5338)
at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5326)
at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:88)
at $Proxy273.addUser(Unknown Source)
at BusinessFacade.AdminServices.addUser(AdminServices.java:47)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5366)
at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
at sun.reflect.GeneratedMethodAccessor119.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5338)
at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5326)
at com.sun.ejb.containers.EJBObjectInvocationHandler.invoke(EJBObjectInvocationHandler.java:206)
at com.sun.ejb.containers.EJBObjectInvocationHandlerDelegate.invoke(EJBObjectInvocationHandlerDelegate.java:79)
at $Proxy271.addUser(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.privateInvoke(StubInvocationHandlerImpl.java:241)
at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.invoke(StubInvocationHandlerImpl.java:152)
at com.sun.corba.ee.impl.presentation.rmi.codegen.CodegenStubBase.invoke(CodegenStubBase.java:227)
at BusinessFacade.__AdminServicesRemote_Remote_DynamicStub.addUser(BusinessFacade/__AdminServicesRemote_Remote_DynamicStub.java)
at BusinessFacade._AdminServicesRemote_Wrapper.addUser(BusinessFacade/_AdminServicesRemote_Wrapper.java)
at Admin.TestServlet.processRequest(TestServlet.java:35)
at Admin.TestServlet.doGet(TestServlet.java:74)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:734)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:636) 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:07:25.837

显示代码中发生错误的确切行。我假设它是在你调用 em.persist(tmpGrp) 的时候。必须先保存用户，否则EntityManager将无法找到用户的任何实例，或者需要通过在组类中添加以下内容来指定用户在组中的管理方式：

```
@OneToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})
SystemUsers userName; 
```

# vmware - 在 VMware 中使用 avahi @ Ubuntu ping 主机名。没有解决

> ID：10495543
> 
> 赞同：3
> 
> 时间：2012-05-08T08:57:52.967
> 
> 标签：vmware, ping, hostname, mdns, avahi

我有一个非常奇怪的问题。我有 2 台虚拟机在 VMware 播放器中运行 ubuntu 11.4。这些虚拟机与我的网络建立了桥接连接。由于他们使用 DHCP，因此让他们使用主机名而不是 IP 地址相互通信会更容易。

那就是它变成一个奇怪的情况的地方。

```
ping 192.168.0.10 //this is machine 1 
ping 192.168.0.11 //this is machine 2 
```

两者都像魅力一样工作

```
ping machine1.local  
ping machine2.local 
```

在他们自己的系统上工作得很好。但在机器 2 上 ping machine1.local 会导致“ping：未知主机 machine1.local”

在尝试并检查了所有内容后，除了 avahi-browse 中的本地机器，我什么也没得到，我安装了 wireshark 以了解真正发生了什么。

我运行了wireshark，然后运行了avahi-browse。在wireshark中，我看到了对MDNS消息的所有响应，我得到了machine1.local和machine2.local！！！

伟大的！但是当我关闭wireshark时，avahi-browse缓存又变空了......

为什么当我在虚拟机中打开wireshark时，avahi-daemon会收到MDNS消息，而当我关闭它时，消息又会丢失......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T02:27:32.430

您可能需要切换到 e1000 网络适配器以（完全）支持多播。要切换到 e1000，请在编辑器中打开 vmx 文件并找到虚拟以太网适配器的条目。更改或添加此行：

**ethernet0.virtualDev = "e1000"**

（如果您有多个适配器，请为 ethernet0、ethernet1 等中的每一个进行更改）

该线程详细介绍了一些与您的类似的多播问题：

*   [http://communities.vmware.com/message/1549658](http://communities.vmware.com/message/1549658)

本文档描述了各种可能的虚拟适配器及其限制和功能：

*   [http://kb.vmware.com/selfservice/microsites/search.do?cmd=displayKC&externalId=1001805](http://kb.vmware.com/selfservice/microsites/search.do?cmd=displayKC&externalId=1001805)

# c# - 限制asp.net中下拉列表的大小

> ID：10495546
> 
> 赞同：0
> 
> 时间：2012-05-08T08:57:58.753
> 
> 标签：c#, asp.net, list, drop-down-menu

我的 .aspx 页面上有一个下拉列表，并且在运行时从数据库中填充。它显示下拉列表中的所有记录。有什么办法可以让我启用滚动条，这样它就不会弄乱页面布局。

# objective-c - 如何剥离字符串以获取 HTML 中的 URL ？

> ID：10495550
> 
> 赞同：-1
> 
> 时间：2012-05-08T08:58:02.450
> 
> 标签：objective-c, xml-parsing

我正在 iPhone 上编写一个 RSS 项目。我想知道如何剥离此标签中的所有内容以获取图像 URL：

```
<description><![CDATA[ <a href="http://vnexpress.net/gl/xa-hoi/2012/05/lat-xe-cho-25-000-lit-xang-ca-tram-nguoi-hoi-cua/"><img src="http://vnexpress.net/Files/Subject/3b/bd/67/91/Lat-xe-xang-2.jpg"></a>Trưa 7/5, chiếc xe bồn chở 25.000 lít xăng từ Hà Tĩnh vào Quảng Bình bị lật nghiêng trên quốc lộ 1A khiến xăng chảy lênh láng ra đường. ]]></description> 
```

我只想得到字符串

```
http://vnexpress.net/Files/Subject/3b/bd/67/91/Lat-xe-xang-2.jpg 
```

请告诉我在这种情况下该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:13:37.047

**编辑：** 哦，@Ankit Srivastava 的答案是正确的。我没有发现这是一个 CDATA 块。按照他的回答，但我不会删除我的，因为这对你仍然有用。

您应该实现 NSXMLParser 委托。在你的 .h 文件`<NSXMLParserDelegate>` 中然后你必须在你的 m 文件中放入 3 个有用的方法。

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict 

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
            {
                if (element == nil) // where element is a NSMutableString
                    element = [[NSMutableString alloc] init];

                [element appendString:string];
            } 
```

这并不重要，否则它总是会调用didStart end didEnd。现在我们有 ex: :

```
elementName //contains your tag name. In this case "mytag"
element // contains text beetween tags. In this case null. But in <mytag>something</mytag> element = something.
attributeDict //This is probably most important to you. That contains NSDictionary with all your parameters. In above example this is a dictionary with key: myparam and object: test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:01:15.273

我推荐 NSXMLParser。

见这里：http: [//developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T09:08:45.630

用这个方法...

```
- (void)parser:(NSXMLParser *)parser foundCDATA:(NSData *)CDATABlock
{
    NSString *someString = [[NSString alloc] initWithData:CDATABlock encoding:NSUTF8StringEncoding];

} 
```

希望这有帮助..

# c# - How to fix "SqlException: The conversion of a datetime2 data type to a datetime data type resulted in an out-of-range value."

> ID：10495557
> 
> 赞同：19
> 
> 时间：2012-05-08T08:58:38.343
> 
> 标签：c#, asp.net, entity-framework, webforms

> SqlException: The conversion of a datetime2 data type to a datetime data type resulted in an out-of-range value.

my code is like this:

```
 using (var contxt = new realtydbEntities())
        {
            var status = GetStatus();

            var repIssue = new RepairIssue()
            {
                CreaterId = AuthorId,
                RepairItemDesc = this.txtDescription.Text,
                CreateDate = DateTime.Now,//here's the problem
                RepairIssueStatu = status
            };

            contxt.AddObject("RepairIssues", repIssue);
            contxt.SaveChanges();
        } 
```

the **CreateDate** property mapping to a column which type is **smalldatetime**.

how to make this code run?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-07T13:56:08.827

I had the same exception, but it was because a non nullable datetime property that taking the min datetime value. That wasn't a smalldatetime at DB, but the min datetime of C# exceed the limit of min datetime of SQL. The solution was obvious, set the datetime properly. BTW, the code wasn't mine, and that's why I wasn't aware of that property :)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-10T10:35:13.177

The root of your problem is that the C# DateTime object is "bigger" than SQL's smalldatetime type. Here's a good overview of the differences: [http://karaszi.com/the-ultimate-guide-to-the-datetime-datatypes](http://karaszi.com/the-ultimate-guide-to-the-datetime-datatypes)

So really your options are:

1.  Change the column type from smalldatetime to datetime (or datetime2)
2.  Instead of using EF, construct your own SQL Command (and you can use SqlDateTime)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-06-03T19:25:28.193

Add this to your model class:

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Properties<DateTime>().Configure(c => c.HasColumnType("datetime2"));
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T09:01:51.640

[SqlDateTime](http://msdn.microsoft.com/en-us/library/system.data.sqltypes.sqldatetime.aspx) will allow you to do what you need.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-12T18:00:11.350

I got this error because I had added a datetime column to my SQL table and application WITHOUT removing the old data. I found that I could update new records; but, the records that were in the table prior to the added field threw this error when an update was attempted on one of them.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-10T14:37:44.533

check your migration content. I changed my model like this"

> public DateTime? CreationDate { get; set; }

then add new migration and finally run update database

# java - 我需要帮助画纸牌

> ID：10495562
> 
> 赞同：-1
> 
> 时间：2012-05-08T08:59:12.263
> 
> 标签：java

我正在尝试画一张纸牌之手（在手牌类中），但将其洗牌。我的问题是，如果我在 initialDeal() 方法中执行 shuffleDeck() （我需要画一手牌但洗牌），它会给我一个`ArrayIndexOutOfBounds`例外。

我画了两个 narfs OF Clubs... 注意，narf 基本上是 0，只是一个占位符。它不会被使用。

```
class Card {    
int suit, rank;   
public Card () {    
    this.suit = 0; this.rank = 0;   
}       
public Card (int suit, int rank) { 
    this.suit = suit; this.rank = rank;   
}      
public int getSuit() {   
    return suit;   
}       
public int getRank() {  
    return rank; 
}       
public void printCard () { 
    String[] suits = { "Clubs", "Diamonds", "Hearts", "Spades" };    
    String[] ranks = { "narf", "Ace", "2", "3", "4", "5", "6",  
    "7", "8", "9", "10", "Jack", "Queen", "King" }; 
    System.out.println (ranks[rank] + " of " + suits[suit]); 
} //end printCard
} //end class 
```

卡片类（这基本上是做基本的东西）^

```
import java.util.Random;
class Hand {
static Card[] deck = new Card[52];
Card[] hand = new Card[10];
static int index;

public static void createDeck () {
    int m = 0;
    for (int j = 0; j < 4; j++) {
        for (int k = 1; k < 14; k++) {
            deck[m] = new Card(j,k);
            m++;
        }
    }
    index = 0;
} // end createDeck

public static Card deal () {
    Hand.index++;
    return deck[index-1];
} // end deal

public static int compareCard (Card c1, Card c2) {
    if (c1.getSuit() > c2.getSuit()) return 1;
    if (c1.getSuit() < c2.getSuit()) return -1;
    if (c1.getRank() > c2.getRank()) return 1;
    if (c1.getRank() < c2.getRank()) return -1;
    return 0;
} // end compareCard

public void printDeck (int size) {
    int j = 0;
    while (j < size) {
        deck[j].printCard();
        j++;
    }
}// end printDeck

public static void shuffleDeck () {
    Card tempCard;
    Random rd = new Random();
    for (index = 0; index < deck.length; index++) {
        int r = rd.nextInt(deck.length);
        tempCard = deck[index];
        deck[index] = deck[r];
        deck[r] = tempCard;
    }
} // end shuffleDeck

public void initialDeal() {
    hand[0] = null;
    hand[1] = null;

    hand[0] = deal();
    hand[1] = deal();
}

public void printHand() {
    initialDeal();
    index = 0;
    for(Card outputCard = new Card();  hand[index] != null;  index++) {
        outputCard.printCard();
    }
}    
} 
```

手牌^（这是我需要从洗好的牌组中抽两张牌的地方）

```
class Dealer {    
Hand dealer = new Hand();    
public Dealer () {      
    dealer.createDeck();  
    dealer.shuffleDeck();

    System.out.println("Dealer's Hand");
    System.out.println("");
    initDeal();
}

public void initDeal() {
    dealer.initialDeal();
    dealer.printHand();
}
} //end class 
```

经销商类。^ 调用 Hand 的方法

```
class Driver {     
     public static void main (String[] args) {  
         Dealer dealer = new Dealer(); 
     } //end main method 
} //end class 
```

^ 基本上运行一切

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:04:19.530

您正在修改`index`in `shuffleDeck`，因此在`shuffleDeck`完成后，`index`is `shuffleDeck.length`。

在`shuffleDeck`, 做`for (int index = 0; index < deck.length; index++)`

（注意`int index`-> 声明局部变量，而不是使用静态变量。）

或者您可以 (in `initialDeal`) 将索引设置为 0。

# android - 请帮帮我。我想从 sql server 获取数据

> ID：10495564
> 
> 赞同：-1
> 
> 时间：2012-05-08T08:59:21.713
> 
> 标签：android

```
 Connection conn = null;
        String url = "jdbc:jtds:sqlserver://192.168.1.25:1433/";
        String dbName = "Demo;Instance=MSSQLSERVER;";
        String userName = "BIT"; 
        String password = "1234";
        String driver = "net.sourceforge.jtds.jdbc.Driver";
        try {
          TextView  tv1 = (TextView) findViewById(R.id.textView1);
          TextView  tv2 = (TextView) findViewById(R.id.textView2);
          TextView  tv3 = (TextView) findViewById(R.id.textView3);
          Class.forName(driver).newInstance();
          conn = DriverManager.getConnection(url+dbName,userName,password);
          Log.w("Connection","open");
          Statement stmt = conn.createStatement();
          ResultSet rs = stmt.executeQuery("SELECT ItemDesc,Qty,NetPrice FROM TrxDetail ");
          String a ="";
      String b ="";
      String c ="";

      while (rs.next()) 
      {
           a += rs.getString("ItemDesc");
           b += rs.getString("Qty");
           c += rs.getString("NetPrice");
     }
      tv1.setText(a);
      tv2.setText(b);
      tv3.setText(c);
      conn.close();
          } 
```

xml:

为什么不是所有的信息。刚刚公布了最终数据。如何显示所有数据。如何编辑 xml 正确。我不知道该问谁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:02:26.377

```
 while (rs.next()) 
      {
           tv1.setText(rs.getString("ItemDesc"));
           tv2.setText(rs.getString("Qty"));
           tv3.setText(rs.getString("NetPrice"));
     } 
```

对于您获得的每个结果，您将 tv1、tv2 和 tv3 的内容设置为该结果的内容，**覆盖之前的内容**。如果这不是您想要的（您实际上并没有提出问题，所以很难说，但我猜您的稀疏*“为什么不是所有信息”*意味着您抱怨只看到最后一个条目？） ，你不应该覆盖它们。

您可以做的是制作一个`String`，将新值连接到当前值，然后在?之后调用`setText`一次`while`

好的，你可以这样做。顺便说一句，您可能会更好`StringBuffer`，但这需要更多解释......

```
String tv1S = "";
String tv2S = "";
String tv3S = "";

 while (rs.next()) {
      tv1S += rs.getString("ItemDesc"));
      tv2S += rs.getString("Qty"));
      tv3S += rs.getString("NetPrice"));
 }
 tv1.setText(tv1S);
 tv2.setText(tv2S);
 tv3.setText(tv3S); 
```

现在你还需要一些间距和类似的东西，但我不会为你写全部，这应该足以弄清楚......

# xpages - XPAGES 的经典表格

> ID：10495565
> 
> 赞同：0
> 
> 时间：2012-05-08T08:59:21.967
> 
> 标签：xpages

我有一个经典的莲花笔记表格，有 1800 个字段和 7 个选项卡，

1.  如果我将表单拆分为 7 个不同的表单然后绑定到 xpage 或
2.  如果我直接将表单绑定到 xpages 会有任何性能影响吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T02:45:17.950

这是一种“用你的 RDBMS 试试”的情况。拆分表单对您没有帮助，XPages 不太关心使用了多少数据源，如果绑定数量很高（并且对于许多表单，您的比率仍然 > 200） --- 而您实际上没有t 绑定到表单，您绑定到文档。形式只是“设计时的便利”。

做出一些疯狂的猜测，我认为很多字段都是重复字段（如 LineItem_1 LineItem_2 LineItem_3 ）而不是多值字段。

展望未来，您需要做出一个基本的选择：

您的数据格式是否固定，因为所有视图、报告、导入/导出例程等都依赖于它们。或者。你能重构数据模型吗（根据你的问题，我认为是前者）。

如果它是固定的，我希望将文档封装到一个托管 bean 中，该 bean 为重复的字段集和重复控件提供数据集合以显示您实际需要的条目数（经典方法是在托管字段的表格的每个单元格）。这样，您需要照顾的绑定要少得多。

可以在[IBM XPages 教程的](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/tutorial-intro-to-xpages.htm)[练习 23](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Tutorial-Introduction-to-XPages-Exercise-23)中找到如何拥有动态表的一个非常基本的想法

免责声明：[蒂姆克拉克](http://www.tc-soft.com/wordpress/?page_id=2)和我写的。

您还可以考虑仅使用特定用户当时需要的文档部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:16:06.347

对于这种情况，就我而言，您有一个包含七个选项卡和 1800 个字段的表单。但它太复杂了。但是无论我们将一个表单分成七个，每个表单将有 260 个字段。现在代码也将变得复杂。

但我的建议是您可以动态更改 xpages 中的绑定数据。如果您觉得重新设计表单非常复杂，那么您遵循上述想法。否则更改设计并在 xpages 中进行很好的查找。

# umbraco5 - Umbraco 5 - ChildAction 视图中的 GetMediaUrl？

> ID：10495570
> 
> 赞同：1
> 
> 时间：2012-05-08T08:59:41.220
> 
> 标签：umbraco5

我有一个使用 SurfaceController 的 ChildAction 宏。在此操作的视图中，我想使用 GetMediaUrl。

这可能吗？

# javascript - Spring找不到资源文件（css，jsp ...）

> ID：10495571
> 
> 赞同：4
> 
> 时间：2012-05-08T08:59:47.610
> 
> 标签：javascript, css, spring, spring-mvc, resources

我使用 jsp 文件作为控制器的模型，我想使用 css 样式和 js 库

*   项目
    *   网页内容
    *   资产
    *   网络信息
        *   jsp

在 web.xml 中：

```
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
<welcome-file-list>
    <welcome-file>/WEB-INF/jsp/index.jsp</welcome-file>
</welcome-file-list>

<!-- Processes application requests -->
<servlet>
    <servlet-name>MyProject</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>MyProject</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

 </web-app> 
```

在 applicationContext.xml 中：

```
<context:annotation-config />
<context:component-scan base-package="main.mypack.controller" />

<bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp"/>
</bean> 
```

在我的jsp文件中： href="/assets/css/jquery.mobile.fixedToolbar.polyfill.css"

没有工作，有什么帮助吗？

编辑：我使用的是 2.5 Spring 版本，并且出现以下错误：No mapping found for HTTP request with URI [/MyProject/assets/js/jqm-project.js] in DispatcherServlet with name 'MyProject'

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-08T09:26:01.500

问题是您对 CSS 和 JS 文件的请求正在通过 Dispatcher Servlet，这是不正确的。因此 Spring 不会找到那些不会加载它们的文件的映射。

您需要在 applicationContext.xml 文件中为您的应用程序添加 resourceHandler，如下所示。此配置将绕过 Dispatcher Servlet 对 CSS 和 JS 文件的请求。

```
<mvc:resources location="/assets/" mapping="/assets/**" /> 
```

希望这可以帮助你......干杯。

请将以下代码放入 web.xml

```
<servlet-mapping>
  <servlet-name>default</servlet-name>
  <url-pattern>*.css</url-pattern>
 </servlet-mapping>

 <servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.js</url-pattern>
 </servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T07:15:20.907

自动解决：

这个映射阻塞了一切，我改变了这个：

```
 <servlet-mapping>
      <servlet-name>MyProject</servlet-name>
       <url-pattern>/</url-pattern>
   </servlet-mapping> 
```

为此（我将呼叫更改为“call.do”）：

```
 <servlet-mapping>
      <servlet-name>MyProject</servlet-name>
       <url-pattern>*.do</url-pattern>
   </servlet-mapping> 
```

它有效！

# javascript - JQuery：在容器内拖放

> ID：10495573
> 
> 赞同：1
> 
> 时间：2012-05-08T08:59:51.110
> 
> 标签：javascript, jquery, drag-and-drop

由于我是 JQuery 和 JavaScript 的新手，我一直在努力创建拖放功能。

在这里，我需要将图标从一个容器拖放到另一个容器。一旦一个图标被放到右容器中，左容器中的图标必须是灰度的，一旦从右到左容器拖放图标，它应该从灰度变为正常颜色。我只需要为不应该在左容器上工作的右容器图标编写一个 onclick 函数。

有没有办法做到这一点。我尝试了很多插件，但我失败了。

注意：它不应该是 HTML5。

![在此处输入图像描述](../Images/4ec913cb8287ec30d30faf520a489cc3.png)

代码：

***HTML***

```
<div id="columns">          
        <ul id="column2" class="column"> 
           <li id="image1"><img class="widget-head" src="img/addfuel@2x.png" id="1"/></li> 
           <li id="image2"><img class="widget-head" src="img/boatclean@2x.png" id="2"/></li> 
           <li id="image3"><img class="widget-head" src="img/diveservice@2x.png" id="3"/></li> 
           <li id="image4"><img class="widget-head" src="img/fooddrain@2x.png" id="4"/></li> 
        </ul> 

        <ul id="column3" class="column"></ul> 

    </div> 
```

***JS***

```
var iNettuts = {

    jQuery : $,

    settings : {
        columns : '.column',
        widgetSelector: '.widget',
        handleSelector: '.widget-head',
        contentSelector: '.widget-content',
        widgetDefault : {
            movable: true,
            removable: true,
            collapsible: true,
            editable: true,
            colorClasses : ['color-yellow', 'color-red', 'color-blue', 'color-white', 'color-orange', 'color-green']
        },
        widgetIndividual : {
            intro : {
                movable: false,
                removable: false,
                collapsible: false,
                editable: false
            }
        }
    },

    init : function () {
        this.attachStylesheet('inettuts.js.css');
        this.addWidgetControls();
        this.makeSortable();
    },

    getWidgetSettings : function (id) {
        var $ = this.jQuery,
            settings = this.settings;
        return (id&&settings.widgetIndividual[id]) ? $.extend({},settings.widgetDefault,settings.widgetIndividual[id]) : settings.widgetDefault;
    },

    addWidgetControls : function () {
        var iNettuts = this,
            $ = this.jQuery,
            settings = this.settings;

        $(settings.widgetSelector, $(settings.columns)).each(function () {
            var thisWidgetSettings = iNettuts.getWidgetSettings(this.id);
            if (thisWidgetSettings.removable) {
                $('<a href="#" class="remove">CLOSE</a>').mousedown(function (e) {
                    e.stopPropagation();    
                }).click(function () {
                    if(confirm('This widget will be removed, ok?')) {
                        $(this).parents(settings.widgetSelector).animate({
                            opacity: 0    
                        },function () {
                            $(this).wrap('<div/>').parent().slideUp(function () {
                                $(this).remove();
                            });
                        });
                    }
                    return false;
                }).appendTo($(settings.handleSelector, this));
            }

            if (thisWidgetSettings.editable) {
                $('<a href="#" class="edit">EDIT</a>').mousedown(function (e) {
                    e.stopPropagation();    
                }).toggle(function () {
                    $(this).css({backgroundPosition: '-66px 0', width: '55px'})
                        .parents(settings.widgetSelector)
                            .find('.edit-box').show().find('input').focus();
                    return false;
                },function () {
                    $(this).css({backgroundPosition: '', width: ''})
                        .parents(settings.widgetSelector)
                            .find('.edit-box').hide();
                    return false;
                }).appendTo($(settings.handleSelector,this));
                $('<div class="edit-box" style="display:none;"/>')
                    .append('<ul><li class="item"><label>Change the title?</label><input value="' + $('h3',this).text() + '"/></li>')
                    .append((function(){
                        var colorList = '<li class="item"><label>Available colors:</label><ul class="colors">';
                        $(thisWidgetSettings.colorClasses).each(function () {
                            colorList += '<li class="' + this + '"/>';
                        });
                        return colorList + '</ul>';
                    })())
                    .append('</ul>')
                    .insertAfter($(settings.handleSelector,this));
            }

            if (thisWidgetSettings.collapsible) {
                $('<a href="#" class="collapse">COLLAPSE</a>').mousedown(function (e) {
                    e.stopPropagation();    
                }).toggle(function () {
                    $(this).css({backgroundPosition: '-38px 0'})
                        .parents(settings.widgetSelector)
                            .find(settings.contentSelector).hide();
                    return false;
                },function () {
                    $(this).css({backgroundPosition: ''})
                        .parents(settings.widgetSelector)
                            .find(settings.contentSelector).show();
                    return false;
                }).prependTo($(settings.handleSelector,this));
            }
        });

        $('.edit-box').each(function () {
            $('input',this).keyup(function () {
                $(this).parents(settings.widgetSelector).find('h3').text( $(this).val().length>20 ? $(this).val().substr(0,20)+'...' : $(this).val() );
            });
            $('ul.colors li',this).click(function () {

                var colorStylePattern = /\bcolor-[\w]{1,}\b/,
                    thisWidgetColorClass = $(this).parents(settings.widgetSelector).attr('class').match(colorStylePattern)
                if (thisWidgetColorClass) {
                    $(this).parents(settings.widgetSelector)
                        .removeClass(thisWidgetColorClass[0])
                        .addClass($(this).attr('class').match(colorStylePattern)[0]);
                }
                return false;

            });
        });

    },

    attachStylesheet : function (href) {
        var $ = this.jQuery;
        return $('<link href="' + href + '" rel="stylesheet" type="text/css" />').appendTo('head');
    },

    makeSortable : function () {
        var iNettuts = this,
            $ = this.jQuery,
            settings = this.settings,
            $sortableItems = (function () {
                var notSortable = '';
                $(settings.widgetSelector,$(settings.columns)).each(function (i) {
                    if (!iNettuts.getWidgetSettings(this.id).movable) {
                        if(!this.id) {
                            this.id = 'widget-no-id-' + i;
                        }
                        notSortable += '#' + this.id + ',';
                    }
                });
                return $('> li:not(' + notSortable + ')', settings.columns);
            })();

        $sortableItems.find(settings.handleSelector).css({
            cursor: 'move'
        }).mousedown(function (e) {
            $sortableItems.css({width:''});
            $(this).parent().css({
                width: $(this).parent().width() + 'px'
            });
        }).mouseup(function () {
            if(!$(this).parent().hasClass('dragging')) {
                $(this).parent().css({width:''});
            } else {
                $(settings.columns).sortable('disable');
            }
        });

        $(settings.columns).sortable({
            items: $sortableItems,
            connectWith: $(settings.columns),
            handle: settings.handleSelector,
            placeholder: 'widget-placeholder',
            forcePlaceholderSize: true,
            revert: 300,
            delay: 100,
            opacity: 0.8,
            containment: 'document',
            start: function (e,ui) {
                $(ui.helper).addClass('dragging');
            },
            stop: function (e,ui) {
                $(ui.item).css({width:''}).removeClass('dragging');
                $(settings.columns).sortable('enable');
            }
        });
    }

};

iNettuts.init(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:14:18.487

在我看来，您正在关注[这个 nettuts 教程](http://net.tutsplus.com/tutorials/javascript-ajax/inettuts/)。查看代码，让我感到震惊的是，它正在做很多您实际上并不需要满足您所描述的要求的东西。

本教程使用[jQuery UI](http://jqueryui.com/home)以及您特别感兴趣的[可拖动交互](http://jqueryui.com/demos/draggable/)。我鼓励您查看并尝试理解此文档。它肯定会让你实现你想要做的事情，并且对机制的理解，没有一堆无关代码分散注意力，从长远来看肯定会对你有所帮助。

# jquery - 定位到最后一个单词

> ID：10495574
> 
> 赞同：1
> 
> 时间：2012-05-08T08:59:53.713
> 
> 标签：jquery

有谁知道这是否可以在 jQuery 中实现。Target/addClass 到元素的最后一个单词，在本例中是 h1 标签内的单词“Text”。请记住，我知道我可以使用 span 标签定位最后一个单词，但我正在使用具有 %My_heading% 标记之类的 CMS。（不完全是，但我希望这被理解）

```
<h1>Some Heading Text</h1> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T09:08:10.543

如果您需要在最后一个单词中添加类，则无论如何都需要用标签将其包围。

最简单的方法之一是使用正则表达式：

```
$("h1").html(function(index, old) {
    return old.replace(/(\b\w+)$/, '<span class="myClass">$1</span>');
});​ 
```

**演示：http:** [//jsfiddle.net/Dy4vh/](http://jsfiddle.net/Dy4vh/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T09:10:59.340

```
 $('h1').html(function(index, curHTML) {
       var text = curHTML.split(/[\s-]/),
           newtext = '<span class="some">' + text.pop() + '</span>';
       return text.join(' ').concat(' ' + newtext);
     }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T09:02:25.863

就像是

```
//Split the string into words
var last_arr = $('h1').text().split(' ');
//Get the last one
var last = last_arr[last_arr.length - 1]; 
```

小提琴[http://jsfiddle.net/KZFX4/](http://jsfiddle.net/KZFX4/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T09:05:25.957

你的意思是：

```
var txt = $("h1").text();
var splitted = txt.split(" ");
var lastWord = splitted.pop();
var newTxt = splitted.join(" ") + "<span class='someclass'> " + lastWord + "</span>";
console.log(newTxt); 
```

小提琴：http: [//jsfiddle.net/7qUb6/](http://jsfiddle.net/7qUb6/)

# asp.net-mvc - 如何使用 MVC 中的视图模型创建一个显示主信息和详细信息的视图？

> ID：10495576
> 
> 赞同：2
> 
> 时间：2012-05-08T09:00:04.073
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有以下视图模型：

```
namespace WebUx
{
    public class CityViewModel
    {
        public City City { get; set; }
        public IList<CityDetail> CityDetails { get; set; }
    }
} 
```

以下大师班：

```
Class City {
     public string Name { get; set; }
     public string Type { get; set; }
} 
```

以下详细信息类：

```
Class CityDetail {
     public string   Number { get; set; }
     public string   Street { get; set; }
} 
```

我想做的是在视图中使用视图模型，其中视图中的表单将首先显示一些基本的城市信息，然后在底部有一个区域，其中有**十个**CityDetail 记录。

有没有办法可以用局部视图来做到这一点？我了解有关局部视图的一些事情，但我怎么能写这个来满足我的需要呢？我什至可以从视图中调用部分视图，同时创建带有可以填写的详细信息的空白记录，当我返回我的操作时，这将成为模型的一部分。我怎么也能处理标签。例如，我希望每条街道的标签显示为“街道 1”、“街道 2”等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:18:04.907

是的你可以。实际上你是在正确的方式，但一般来说，对于编辑器和显示，`EditorTemplates`并且`DisplayTemplates`比部分视图更受欢迎

CityViewModel 设计是正确的，我会那样做

为 CityDetail 创建 DisplayTemplate `Views/Shared/DisplayTemplates/CityDetail.cshtml`。

为 City 创建 EditorTemplate `Views/Shared/EditorTemplates/City.cshtml`。这将是类似的

```
@model City
@Html.LabelFor(model => model.Name)
@Html.EditorFor(model => model.Name)
@Html.LabelFor(model => model.Type)
@Html.EditorFor(model => model.Type) 
```

添加动作视图

```
@model CityViewModel
@using(Html.BeginForm())
{
     @Html.EditorFor(model => model.City) // this will render city editor by calling editor template above
     <input type="submit" value="ok"/>
}
@Html.DisplayFor(model => model.CityDetails) //this will render all of cities in list by calling display template above for each 
```

以及动作

```
public ActionResult CreateCity(CityViewModel cityModel)
{
    // cityModel.City is populated with values entered by user
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:12:11.447

您可以在同一个视图中同时拥有这两个实体。我使用为主实体创建一个区域，然后是详细实体的网格和用于在 ChildWindow 中打开这些详细实体以创建、编辑或删除的按钮。一切都使用相同的视图模型。

不要忘记在服务器端的对象中包含详细实体，如下所示：

```
[MetadataTypeAttribute(typeof(MasterEntity.MasterEntityMetadata))]
    public partial class MasterEntity
    {
        internal sealed class MasterEntityMetadata
        {
            private MasterEntityMetadata()
            {
            }

            [Include]
            public EntityCollection<DetailEntity> DetailEntity{ get; set; }
        }
    } 
```

然后，在您的服务上这样做：

```
public IQueryable<MasterEntity> GetMasterEntity()
        {
            return this.ObjectContext.MasterEntities.Include("DetailEntity").Where(p => SOMEFILTER).OrderBy(p => SOMEVALUE);
        } 
```

# asp.net-mvc-3 - 从 MultiSelectList 返回文本和值

> ID：10495584
> 
> 赞同：0
> 
> 时间：2012-05-08T09:00:39.847
> 
> 标签：asp.net-mvc-3, multi-select

我的观点：

```
 <div class="editor-label">
        @Html.LabelFor(model => model.UserList)
    </div>
    <div class="editor-field">
        @Html.ListBoxFor(model => model.SelectedUsers, new MultiSelectList(Model.UserList, "Key", "Value", Model.SelectedUsers))
        @Html.ValidationMessageFor(model => model.UserList)
    </div> 
```

我的视图模型：

```
public class UserListViewModel
{
    public UserListViewModel() :
        this(new List<KeyValuePair<string, string>>())
    {

    } 

    public UserListViewModel(IList<KeyValuePair<string, string>> userList)
    {
        this.UserList = userList;
        SelectedUsers = new List<string>();
    }      

    public IList<KeyValuePair<string,string>> UserList { get; set; }
    public IList<string> SelectedUsers { get; set; }
} 
```

因为现在我只得到选定的值，当我到达控制器时，我的 UserList 被清空了，所以我不能再与之比较。有什么方法可以从 MultiSelectList 返回值和文本，或者至少记住我的 UserList 的内容，直到我到达控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:19:02.503

`Html.ListBoxFor`助手渲染一个具有该属性的`<select>`元素。`multiple`在 HTML 中，当您将此标记放在表单中并提交表单时，只有选定的值会发送到服务器。这就是 HTML 的工作原理。如果您还想发送文本，则必须使用 javascript。例如，您可以订阅 select 元素的 change 事件，然后在表单中保留一个隐藏字段，该字段将使用所选文本列表进行更新。但老实说，不要那样做。在您的 POST 控制器操作中，只需从您在 GET 操作中获取它们的相同位置获取文本，以最初显示表单。

# java - 如何使用 Swing 组件的自定义子类？我需要将它安装到调色板吗？

> ID：10495585
> 
> 赞同：2
> 
> 时间：2012-05-08T09:00:42.247
> 
> 标签：java, swing, netbeans, javabeans, netbeans-plugins

如何将 NewJPanel（扩展 JPanel 的 Netbeans 生成的类）添加到 GUI 构建器的调色板？

目标是能够通过调色板添加 NewJPanel，使其具有 NewJPanel 类型而不是 JPanel 类型。但是，正如我所料，它不能通过调色板获得。

我正在跟进：

> 通过调色板管理器安装
> 
> ```
> Open the Palette Manager from main menu: Tools | Palette Manager | Swing/AWT Components
> In the Palette Manager press button according to where the component comes from. The choices are: 
> 
>     from an external JAR file
>     from a library defined in the IDE (always create a library if the components need more than one JAR)
>     from a NetBeans project 
> ```

来自[Netbeans 常见问题解答](http://wiki.netbeans.org/FaqFormUsingCustomComponent)。

此方法不起作用，因为这些类不可供选择。

但是，我能够将 NewJPane 拖到 NewJFrame 的设计视图中，在该视图中使用正确类型的 NewJPane（而不是 JPane）声明了它。

![在此处输入图像描述](../Images/e8dccb553de47f2853ea085c59a8c4b0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T23:44:20.763

您可以将自定义组件添加到 matisse GUI 调色板。

```
Build your project so the class file you want to use is part of the jar file
Open a java class that has a form, and switch to design mode. 3, Right click in the palatte and choose "palatte manager".
Choose the "add from jar" button to select your jar.
Choose the class you made, and add it to your palatte. 
```

现在您的面板已为 netbeans 所知，您可以将它拖到新面板中。

# java - ProGuard 优化还删除了 #wait() 调用

> ID：10495588
> 
> 赞同：4
> 
> 时间：2012-05-08T09:00:54.443
> 
> 标签：java, multithreading, optimization, proguard

当 Proguard 优化我的应用程序时，它会将所有调用`Object#wait()`都删除。

这样每个应该被动等待（直到通知）的线程现在都在主动等待（100% CPU 使用率）。

当优化关闭时`-dontoptimize`一切正常。

我是否需要优化以删除某些方法`-assumenosideeffects`，我正在寻找问题所在。
是否可以保留所有`Object#wait()`要优化（删除）的调用？

还有其他解决方案吗？

编辑1：例如此代码：

```
 @Override
public void run() {
    isRunning = true;
    try {
        while (isRunning) {
            if (parent.isActivate) {
                parent.updateDriveButtons();
                synchronized (this) {
                    wait(1000);
                }
            }
            else {
                synchronized (this) {
                    // Wait for that the page is activated.
                    Utils.wait(this);
                }
            }
        }
    }
    catch (Throwable e) {
        e.printStackTrace();
    }
    finally {
        isRunning = false;
    }
} 
```

正在被此代码替换（在反编译优化代码后）： `wait()`已被删除，只有同步可见`monitorenter;`...`monitorexit;`

```
 public final void run()
  {
    this.isRunning = true;
    try {
      while (this.isRunning) {
        if (this.parent.isShowing()) {
          ...
          monitorenter;
          monitorexit; continue;
        }

        monitorenter;

        monitorexit;
      }return;
    } catch (Throwable localThrowable) {
      Object Ljava/lang/Object;;
      return;
    } finally {
      this.isRunning = false; } throw localObject1;
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T13:33:04.660

您似乎正在指定`-assumenosideeffects`也匹配的选项`Object#wait()`。ProGuard 然后很高兴地为您删除这些调用。您可能不应该添加`-assumenosideeffects`ProGuard 手册中记录的选项之外的选项。

# mysql - 查询是正确的，但在 java 中给我 sqlexception

> ID：10495593
> 
> 赞同：0
> 
> 时间：2012-05-08T09:01:03.087
> 
> 标签：mysql, jdbc, syntax-error, access-violation, sqlexception

JDBC executeUpdate() 执行这个 MySqlQuery：

```
CREATE TABLE IF NOT EXISTS TaskLog 
(TaskID int NOT NULL AUTO_INCREMENT, 
NoOfLock int NOT NULL,
LastAcquired varchar(50) NOT NULL,PRIMARY KEY(TaskID)) 
```

它给了我这个：

```
SQLException: You have an error in your SQL syntax; check the manual that corresponds to your 
MySQL server version for the right syntax to use near 'PRIMARY KEY(TaskID))' at line 1 
```

我尝试在 PhpMyAdmin 中执行它，它有效！所以我不明白为什么通过java代码执行时它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:43:01.860

语法可以从一个 DBMS 到另一个不同。它可能在 MySQl 中工作，但以下一个应该在大多数系统上工作：

尝试：

```
CREATE TABLE IF NOT EXISTS TaskLog 
(TaskID int NOT NULL AUTO_INCREMENT, 
NoOfLock int NOT NULL,
LastAcquired varchar(50) NOT NULL,
CONSTRAINT pk_TaskID PRIMARY KEY(TaskID)) 
```

# ios - 单例类加载数据

> ID：10495598
> 
> 赞同：1
> 
> 时间：2012-05-08T09:01:18.750
> 
> 标签：ios, delegates, singleton, loader

我创建了一个单例类，它应该为我的应用程序处理所有数据加载，所有数据都是从 Web 界面加载的，但在不同的请求中。

```
DataModel *instance = [[[DataModel instance] init] autorelease];
[instance doRequestFromLocation:@"users" withPostType:@"GET" andData:@"data"];
[instance doRequestFromLocation:@"timezones" withPostType:@"GET" andData:@"data"]; 
```

例如，这将在一个请求中加载所有用户，然后在另一个请求中加载所有时区。

我的单例类如下所示：

```
// Send a curl request
- (void)doRequestFromLocation:(NSString *)location withPostType:(NSString *)type andData:(NSString *)data
{    
    // NSArray *keys = [NSArray arrayWithObjects:@"username", @"password", nil];
    // NSArray *objects = [NSArray arrayWithObjects:@"test", @"test", nil];
    // NSDictionary *theRequestDictionary = [NSDictionary dictionaryWithObject:objects forKey:keys];

    NSString *username = @"username";
    NSString *password = @"password";
    NSString *urlString = [url stringByAppendingFormat:@"%@", location];

    NSMutableString *loginString = (NSMutableString *)[@"" stringByAppendingFormat:@"%@:%@", username, password];
    NSLog(@"%@", loginString);

    NSString *encodedLoginData = [Base64 encode:[loginString dataUsingEncoding:NSUTF8StringEncoding]];
    NSString *authHeader = [@"Basic " stringByAppendingFormat:@"%@",encodedLoginData];

    NSLog(@"%@", authHeader);

    NSURL *url = [NSURL URLWithString:urlString];
    NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
    [theRequest setHTTPMethod:type];

    [theRequest setValue:authHeader forHTTPHeaderField:@"Authorization"];
    [theRequest setValue:@"application/xml" forHTTPHeaderField:@"Content-type"];
    [theRequest setValue:@"application/xml" forHTTPHeaderField:@"Accept"];

    NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
}

#pragma mark -
#pragma mark Responses

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"didFailWithError");
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    NSString *responseString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    NSLog(@"%@", responseString);
}

- (void) connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"connectionDidFinishLoading");
} 
```

虽然这一切都很好，但我的下一步有点卡住了。

我希望能够从任何地方调用 doRequestFromLocation（现在可以），但我希望其他类能够响应它进入 didReceiveData 的那些类。

我在想我的数据模型必须以某种方式委托其他类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:08:50.497

在这种情况下，您可以使用 NSNotificationCenter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:14:33.990

在 IOS 开发者库中，有一个名为 MVCNetworking 的示例项目，[http://developer.apple.com/library/ios/#samplecode/MVCNetworking/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/MVCNetworking/Introduction/Intro.html)

它的 NetworkManager 是一个单例类，将所有请求打包为 NSOperation，然后将其添加到 NSOperationQueue。

因此，甚至可以管理排队的网络请求，并以有限的并发数进行处理。

仅供参考，这行代码可能会导致内存泄漏：

```
NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self]; 
```

# php - PHP simple_html_dom -> 用一个新的锚标签包裹一个元素

> ID：10495600
> 
> 赞同：0
> 
> 时间：2012-05-08T09:01:25.427
> 
> 标签：php, simple-html-dom

我正在使用 simple_html_dom 管理 CMS 驱动的图像嵌入页面的方式。但是，我希望能够将尚未包装在锚标签中的任何图像包装在新的锚标签中，但我不知道如何用新标签包装 simple_html_dom 元素。

到目前为止我的代码：

```
$content = str_get_html($content);
if(is_object($content))
{
    $elements = $content->find('img');
    foreach($elements as $element)
    {
/*
GET INFORMATION ABOUT WHAT IMAGE THIS IS - ALL FINE
*/          
$classStr = $element->class;
        if(trim(strlen($classStr)) > 0)
        {
            $needle = "wp-image-";
            $after = substr($classStr, strpos($classStr, $needle) + strlen($needle));
            if(strpos($after, " "))
            {
                $imageID = substr($after, 0, strpos($after, " "));
            }
            else
            {
                $imageID = $after;
            }   
/*
Get new image to link to
*/
$image = tona_get_image_by_id($imageID, "full");

/*
CHECK IF PARENT OF IMAGE IS AN ANCHOR... IF SO CHANGE THE LINK
*/

            $elementParent = $element->parent();
            if(isset($elementParent->href)) 
            {
                $elementParent->href = $image["src"];
                $elementParent->class .= " newAnchorClass ";    
            }
/*
IF NOT ADD A NEW ANCHOR TAG ** HELP **
*/

            echo "IMG: " . $imageID . " " . $image["src"] . "<br/>";    
            $element->href = $image["src"];
        }
    }
} 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:17:07.877

从“提示”选项卡下的[文档中：](http://simplehtmldom.sourceforge.net/manual.htm#section_access)
`$e->outertext = '<div class="wrap">' . $e->outertext . '<div>'`

如果要进一步操作元素，可以使用临时变量重新创建 dom。在您的情况下，它将是：

```
// '$element' is the element to be wrapped
$tempHtml = str_get_html('<a>' . $element->outertext . '</a>');
$link = $tempHtml->find('a', 0);
// '$src' is the url of the link
$link->href = $image['src']; 
```

# tomcat - 我需要告诉 Apache Tomcat 保持 Websocket 连接打开吗？

> ID：10495601
> 
> 赞同：3
> 
> 时间：2012-05-08T09:01:26.180
> 
> 标签：tomcat, websocket

我正在尝试[Apache Tomcat Websocket 实现](http://tomcat.apache.org/tomcat-7.0-doc/web-socket-howto.html)。问题是，连接总是在最多 30 秒的空闲时间后关闭。

我是否需要配置 Tomcat 以保持连接打开？如果是这样，我该怎么做？我尝试在 server.xml 的 Connector 元素中为 HTTP 协议设置 connectionTimeout。这没有效果，但我不知道它是否不起作用，因为我没有将协议属性调整为特定于 websocket 的东西（因为我不知道该协议声明是什么样的）。

或者它可能是一个客户端问题。

谢谢你的帮助，
狮子座

**编辑：**这个问题已经用 Tomcat 7.0.28 解决了（[错误描述](https://issues.apache.org/bugzilla/show_bug.cgi?id=53074)，[更新日志](http://tomcat.apache.org/tomcat-7.0-doc/changelog.html)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T11:30:05.573

Tomcat 的 WebSocket 有[几个问题](https://github.com/Atmosphere/atmosphere/wiki/Tomcat-WebSockets-issues-and-workaround)，其中之一是它会在 20 秒后关闭连接（这是 server.xml 中的 connectTimeout 值）。增加该值以解决该问题。

——让弗朗索瓦

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T15:42:50.680

我设法让 websocket 无限打开。您需要做的就是将Apache`connectionTimeout`中的设置`server.xml`为减一 ( `connectionTimeout="-1"`)。这解决了我的问题。:) 参考：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T07:20:22.407

如果您需要保持连接打开，请 ping 客户端/服务器。这是可靠地确保连接结束时有东西的唯一方法。

互联网不是一种可靠的传输方式，因此确保您的代码可以处理断开连接是值得的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T09:07:06.593

在 SERVER.XML 中设置

```
<Connector port="8080" protocol="HTTP/1.1"
           connectionTimeout="999999"
           redirectPort="8443" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-23T09:24:45.693

除了 server.xml 中的 connectionTimeout 设置之外，另一个原因也可能是您的 websocket 消息实现类。getReadTimeout 方法是一种用于以毫秒为单位设置 websocket 超时的方法。例如，如果您想将套接字超时设置为 2 分钟 (2*60*1000)，则可以使用以下代码。注意：您可以通过返回 -1 来设置无限超时（始终打开）。

```
@Override
public int getReadTimeout() {
    return 2*60*1000;
} 
```

如需完整实施，请在我的答案中参考此示例代码。 [tomcat websocket servlet监听端口](https://stackoverflow.com/questions/17836806/tomcat-websocket-servlet-listening-port/20739008#20739008)

# objective-c - 仅在 iOS5 时有条件导入头文件

> ID：10495623
> 
> 赞同：0
> 
> 时间：2012-05-08T09:02:30.360
> 
> 标签：objective-c, ios, uinavigationbar, customization

**目标：我的 UINavigationBar 必须使用特定的背景和特定的标签字体进行自定义。**

这在 iOS5 中通过外观协议很容易实现。行。

如果我的用户运行 < iOS5 怎么办？他将看到默认的 UINavigationBar，但如果我使用覆盖 drawRect 的类别扩展 UINavigationBar，则不会。

**问题 1：**如何根据 iOS 版本在 Prefix.pch 中指定 UINavigationBar 类别扩展的条件#import？

**问题 2：**假设我设法解决了问题 1，这可行吗？我的意思是，如果设备不是 iOS5 我没有设置 [UINavigationBar] 外观] 而是只导入类别，我需要做更多的事情吗？

**编辑：**这是 Vladimir 建议的实现，我现在没有 iOS4 设备或模拟器来测试它，但我认为它可能有效。

```
@implementation UINavigationBar (iOS4Appearance)

- (void)drawRect:(CGRect)rect 
{
    if (self.isiOS5) {
        [super drawRect];
    } else {
        UIImage *background = [UIImage imageNamed: @"navigation-bar"];
        [background drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
    }
}

- (BOOL)isiOS5
{
    return [[[UIDevice currentDevice] systemVersion] floatValue] >= 5.0;
}

@end 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T09:07:49.467

我认为你不能用#import 来做到这一点，因为那是编译时，你只能将一个二进制文件上传到应用商店（应该是独立于 iOS 版本的）。相反，您可以在运行时对此进行测试。例如，您可以覆盖 drawRect，但根据[iOS 版本](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html)，您将调用 super 或运行您自己的代码。

编辑：

我的建议不适用于普通类别，因为它们取代了原始实现。至少有两种选择：

1.  继承 UINavigationBar 并覆盖 drawRect。
2.  在现有 UINavigationBar 实例上调整 drawRect 的[方法。](http://www.mikeash.com/pyblog/friday-qa-2010-01-29-method-replacement-for-fun-and-profit.html)

# git - SmartGit pull 的行为不像预期的那样

> ID：10495624
> 
> 赞同：7
> 
> 时间：2012-05-08T09:02:32.543
> 
> 标签：git, smartgit

我在 GitHub 上创建了一个仓库。

然后我通过 SmartGit 将我的 fork 克隆到本地开发环境的文件夹中。此外，我将原始存储库添加为远程。

现在，原始存储库已经添加和更改了一些文件。在继续开发之前，我想检索这些以便我了解最新情况。

我按下 SmartGit 中的 Pull 按钮并在对话框中选择原始存储库。SmartGit 将此返回给我：

```
remote: Counting objects: 24, done.
remote: Total 13 (delta 7), reused 12 (delta 6)
From github.com:Original/repo
 * [new branch]      master     -> lm/master 
```

但是，添加的文件和更改不会添加到我的本地存储库中。使用 Git Bash 手动执行此操作 -`git pull original master`一切正常。

为什么 SmartGit 不像我预期的那样拉？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T10:11:09.780

在**Pull**上，SmartGit 将执行“git fetch”，然后再合并。重新定位*跟踪的分支*。在您的情况下，`master`轨道`origin/master`，而不是`lm/master`。你现在有以下选择，总是假设你在`master`：

(1) 配置`master`为跟踪`lm/master`而不是`origin/master`：调用**Branch|Branch Manager**，选择，从上下文菜单中`master`调用**Reset Tracked Branch**`lm/master` ，然后添加到选择并调用**Set Tracked Branch**。现在，它将`lm/master`在每个**Pull**上合并（或重新定位） 。

(2) 手动合并`lm/master`：调用**Branch|Merge**和 select `lm/master`。

(3) 手动重新定位到`lm/master`：invoke `Branch|Rebase`，选择**HEAD 到选定的提交**，然后在图形页面上，选择*lm/master*。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-29T09:41:50.167

我最终在 SmartGit 中所做的是：

*   `Remote > Add`（就像你做的那样）。我打电话给我的**上游**。
*   在分支面板`Right click upstream > fetch more..`中选择分支。（通常是主人）
*   在分支面板`Double click upstream > master`中。这将要求您创建第二个分支（通常是 master-2）。我也称它为**upstream**。所以我有一个名为 upstream 的远程仓库和一个名为 upstream 的本地分支，用于跟踪上游/master。
*   在分支面板`Double click Local Branches > Master`中让您回到您的主分支。

在这一点上，我假设您只是在几分钟前才分叉了该项目，因此下一步不会很有用，但如果在稍后阶段有一些额外的提交，您将需要这样做。

*   `Remote > Pull`并选择**上游**。如果你按下小向下箭头，你会看到你**只能**做“既不合并也不变基”。这很好。
*   `Click fetch`这将允许您查看所有日志以及已更改的内容。
*   在分支面板`Right click Local Branches > upstream > Merge`中。
*   `Fast-Forward`如果你相信你可以。（我的首选方式）。
*   或者`Create Merge-Commit.`

从这一点开始，您只需要做最后 5 个步骤。第一步只是设置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-05T06:32:18.130

如果 SmartGit对您的每个*Pull执行**Fetch*，

 *然后在应用程序的菜单栏或分支窗口中找到分支选项。 ![在此处输入图像描述](../Images/3adf8a457b68abaa7ee4fb458b20b8df.png)

然后

![在此处输入图像描述](../Images/f731b71b23abf7158f197d886f47cf49.png)

或者

![在此处输入图像描述](../Images/c04c121da07ef97db2a793fb5b15a9a2.png)

瞧……享受吧

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-08T09:45:40.213

**[如果当前本地分支的上游分支](https://stackoverflow.com/a/6244487/6309)**是“ ”，您将看到新文件`lm/master`。
但是如果你在`master`，它的上游分支肯定是默认的“ `origin/master`”（即`master`你的 fork 的）

如果要合并原始存储库中的文件，请使用

```
git merge lm/master 
```

或者，[在 SmartGit 中，合并](http://www.syntevo.com/smartgit/documentation.html?page=merge)from`lm/master`到您当前的分支。*

# android - 调用意图时在选择对话框中显示多个应用程序

> ID：10495625
> 
> 赞同：1
> 
> 时间：2012-05-08T09:02:33.027
> 
> 标签：android, android-intent

通过隐式意图调用外部应用程序的常用方法是：

```
String myUri = "geo:...";
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(myUri));
startActivity(intent); 
```

在应用程序中，用户应该能够在具有不同[URI 模式的不同应用程序中进行选择，例如谷歌地图](http://developer.android.com/guide/appendix/g-app-intents.html)**和**谷歌街景。

```
// a Google maps URI may look like:
"geo:latitude,longitude"

// a Google Streetview URI looks like:
"google.streetview:cbll=lat,lng&cbp=1,yaw,,pitch,zoom&mz=mapZoom" 
```

是否可以设置一个意图，导致显示谷歌地图**和**谷歌街景的应用选择对话框？据我所知，可设置的意图只有一个 URI。还有另一种方法吗？

一种完全不同的方法是在启动应用程序中设置两个按钮，每个按钮使用适当的 URI 调用另一个意图。但现在我正在寻找一个包含各种应用程序的应用程序选择对话框。

# java - 运行 Servlet 时出现错误消息（第 1 行：“密码”附近的语法不正确。）

> ID：10495627
> 
> 赞同：0
> 
> 时间：2012-05-08T09:02:38.050
> 
> 标签：java, jakarta-ee

我正在使 servlet 与 J2ME 一起工作，但是每当运行这个时，都会出现以下错误消息。

错误：

> java.sql.SQLException：[Microsoft][ODBC SQL Server Driver][SQL Server]第 1 行：“密码”附近的语法不正确。）

```
public class GetNpostServlet extends HttpServlet
{
@Override
protected void doGet(HttpServletRequest req, HttpServletResponse res) 
                     throws ServletException, IOException
{
// Same code appears in doPost()
// Shown both places to emphasize that data is received thru
// different means (environment variable vs stream), 
// yet processed the same inside the servlet
String acct = req.getParameter("account"),
        pwd = req.getParameter("password");    

String balance = accountLookup(acct, pwd);

if (balance == null)
{
  res.sendError(HttpServletResponse.SC_BAD_REQUEST, 
 "Unable to locate  account.");            
  return;
}

res.setContentType("text/plain");    
PrintWriter out = res.getWriter();
out.print(balance);
out.close();
}

@Override
protected void doPost(HttpServletRequest req, HttpServletResponse res) 
                    throws ServletException, IOException
{
// Same code appears in doGet()
// Shown both places to emphasize that data is received thru
// different means (stream vs environment variable), 
// yet processed the same inside the servlet
String acct = req.getParameter("account"),
        pwd = req.getParameter("password");    

String balance = accountLookup(acct, pwd);

if (balance == null)
{
  res.sendError(HttpServletResponse.SC_BAD_REQUEST, 
"Unable to locate account.");            
  return;
}

res.setContentType("text/plain");    
PrintWriter out = res.getWriter();
out.print(balance);
out.close();
}

/*--------------------------------------------------
 * Lookup bank account balance in database
 *-------------------------------------------------*/
private String accountLookup(String acct, String pwd)
{
Connection con = null;
Statement st = null;
StringBuilder msgb = new StringBuilder("");

try
{
  // These will vary depending on your server/database      
  Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");  
  con = DriverManager.getConnection("jdbc:odbc:acctInfo");

  Statement stmt = con.createStatement();
  ResultSet rs = stmt.executeQuery(
                     "Select balance from acctInfo where account = " +
                     acct + "and password = '" + pwd + "'");      

  if (rs.next())
    return rs.getString(1);
  else
    return null;
   }
   catch (Exception e)
   {                  
    return e.toString();
    }
    }

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T09:05:06.237

最直接的问题：你没有引用字符串，并且它*后面*`acct`没有空格，所以你最终会得到类似的东西：

 *```
Select balance from acctInfo where account = fredand password = 'bloggs' 
```

更*重要的*问题：你不应该首先像这样在 SQL 中包含值。您应该使用参数化 SQL。目前您的代码对[SQL 注入攻击](http://bobby-tables.com)是开放的。

进一步的安全问题：您的代码表明密码以纯文本形式保存。请不要这样做。

设计问题：

*   您似乎将帐户余额视为字符串。这很奇怪。`BigDecimal`将是更自然的表示。
*   你正在捕捉`Exception`而不是特定的例外
*   您正在返回一个异常字符串表示形式*，就好像它是一个 account balance 一样*。哎呀！您可能实际上应该让`SQLException`呼叫者冒泡
*   您永远不会关闭连接、语句或结果集*

# javascript - 我可以使用easyXDM进行单域窗口到窗口通信吗

> ID：10495634
> 
> 赞同：2
> 
> 时间：2012-05-08T09:03:15.973
> 
> 标签：javascript

easyXDM 看起来有一个很棒的消息传输系统，GIT 文档中的桥接示例过于复杂，涉及 3 或 4 个 HTML 文件。可以在同一个域上使用子窗口和父窗口进行简单的窗口到窗口通信，兼容 IE8 等吗？

帮助需要一个 easyXDM 专家 - （此代码不起作用）

```
<! doctype html>
<html>
 <head>
       <!-- index.html -->
   <title>postmessage Test</title>
       <script type="text/javascript" src="easyXDM.debug.js"                                                           </
script>
       <script type="text/javascript">
easyXDM.DomHelper.requiresJSON("json2.js");             </script>

   <script type="text/javascript">
       var target;

       target = window.open("http://localhost/child.html",'popupWindow');

       var socket = new easyXDM.Socket({
               swf: "easyxdm.swf",
               onMessage: function(message, origin){
                       alert("Received '" + message + "' from '" + origin + "'");
               }
       });
       </script>

 </head>
 <body>
       Parent Window<br/>
   <button class="send-button" onclick="socket.postMessage('Msg from
Parent');">Post message</button>

 </body>
</html> 
```

* * *

```
<! doctype html>
<html>
 <head>
       <!-- child.html -->
   <title>postmessage Child</title>
       <script type="text/javascript" src="easyXDM.debug.js"                                                           </
script>
       <script type="text/javascript">
easyXDM.DomHelper.requiresJSON("json2.js");             </script>

   <script type="text/javascript">

       var socket = new easyXDM.Socket({
               remote: "http://localhost/",
               swf: "easyxdm.swf",
               onMessage: function(message, origin){
                       alert("Received '" + message + "' from '" + origin + "'");
               }
       });
       </script>

 </head>
 <body>
   Popup Window<br/>
   <button class="send-button" onclick="socket.postMessage('Msg from
child');">Post message</button>

 </body>
</html> 
```

# jquery - 停止发布事件请求

> ID：10495640
> 
> 赞同：3
> 
> 时间：2012-05-08T09:03:47.597
> 
> 标签：jquery, ajax

我有一个工具提示，其中包含从 ajax 加载的数据：

```
$('.show_tooltip').hover(
    function(){
        $.post('getdata.php', function(data)    {
            $('#tooltip').html(data);
            $('#tooltip').show()
        });
    },
    function(){
        $('#tooltip').hide(); 
    }
); 
```

有用。
但问题是 - 当我将它悬停在元素上并快速将鼠标移出时，`$('#tooltip').show()`没有任何效果，它`hide()`。但是当加载数据时，它会弹出并保持显示而没有任何悬停。

对此可以做些什么。有没有办法完全停止发布请求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T09:08:28.967

jQuery AJAX 方法返回一个[`jqXHR`](http://api.jquery.com/jQuery.ajax/#jqXHR)对象，它是本机[`XMLHttpRequest`](https://developer.mozilla.org/en/XMLHttpRequest)对象的扩展，它有一个`abort`停止请求的方法：

```
var xhr;
$('.show_tooltip').hover(
    function(){
        //Save reference to the jqXHR object
        xhr = $.post('getdata.php', function(data) {
            $('#tooltip').html(data);
            $('#tooltip').show()
        });
    },
    function(){
        xhr.abort(); //Abort the request
        $('#tooltip').hide(); 
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:06:14.930

您需要采取`.show()`AJAX 成功功能。

```
$('.show_tooltip').hover(
    function(){
        $.ajax({
            type: 'POST',
            url: 'getdata.php',
            asynch
            data: data,
            success: function(){
                $('#tooltip').html(data);
            }
            $('#tooltip').show()
        });
    },
    function(){
        $('#tooltip').hide(); 
    }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T09:09:15.363

你可以试试这个：

```
$('.show_tooltip').hover(
    function(){
        $.post('getdata.php', function(data)    {
            $('#tooltip').html(data);
            $('#tooltip').show()
        });
    }
);
$('#tooltip').bind("mouseleave", function(){
    $(this).hide();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T10:16:30.247

这篇文章一次代码`event.preventDefault();` 示例：

```
$("#formName").submit(function(event) {
    event.preventDefault(); // here using code stop post (return false;)
    $.post('processing.php', $("#formName").serialize(), function(result){ $('#LimitlessDiv').html(result); });
}); 
```

# java - 如何使用 ASK（幅移键控）调制信号

> ID：10495641
> 
> 赞同：0
> 
> 时间：2012-05-08T09:03:48.173
> 
> 标签：java, signal-processing

我写信是想知道是否可以使用 java 用 ASK 调制信号。有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T09:21:59.540

如果您只想在可听频谱内对载波信号进行幅度调制，那么您可以即时更改合成正弦波的幅度。

所以载波信号将是：

```
y = A * sin (2 * pi * f0 / Fs * n) 
```

其中`A`= 幅度，`f0`是载波频率 (Hz)，例如 10 kHz，`Fs`是采样率 (Hz)，例如 44.1 kHz，n 是采样数。

您将根据您的调制方案更改 A，例如在每个符号周期的开始（例如，每 10 毫秒，对于 100 波特的符号速率）将 A 设置为所需的值。

# c# - 使用 C# sdk 实现 paypal 定期付款

> ID：10495648
> 
> 赞同：0
> 
> 时间：2012-05-08T09:04:17.970
> 
> 标签：c#, paypal

我正在使用 paypal C# sdk 在我的站点中实现定期付款。是否可以在用户输入他的信用卡信息而不是立即付款然后在固定时间后才开始向用户收费，比如一个月或 2 个月以后继续继续付款。一旦用户使用高级会员计划注册，我基本上应该可以在一定期限后开始付款，然后继续连续付款。

我也不应该实现跟踪功能。但是我现在想知道如果试用期到期后用户不升级会发生什么。贝宝如何响应它以及我可以从应用程序中做些什么来让用户恢复正常试用期到期时的用户。

谢谢，S。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:24:52.287

不知道 paypal 是否支持这个，你可以做的是寻找直接借记支付，你可以寻找更安全支付之类的 api。否则，您将不得不在每个月的给定日期生成一笔交易（这可能看起来是欺诈性的）

问候

# android - android以编程方式设置呼叫等待

> ID：10495653
> 
> 赞同：4
> 
> 时间：2012-05-08T09:04:25.597
> 
> 标签：android

是否可以通过 api 调用禁用 android 设备的“呼叫等待”功能？我们必须在多部手机上禁用此功能，这将节省大量时间:)

谢谢你的帮助 ：）

# ios - 在 iPad 的存储空间中存储 1000 多张图像

> ID：10495658
> 
> 赞同：1
> 
> 时间：2012-05-08T09:04:57.983
> 
> 标签：ios, object

我正在为我的客户公司使用某种 iPad 目录应用程序（仅限）。他们有1000多种产品。每个产品可以有多个图像。可以从网络服务中设置每个产品是否显示在应用程序上。因此，例如，过时产品的数据和图像不会存在于应用程序中。当我的客户决定将数据与 Web 服务同步时。所有数据将被刷新，所有图像将被下载。必须删除任何过时或未使用的数据。

问题是，他希望这个应用程序即使没有互联网连接也能离线工作。

存储所有产品数据很好，因为我从 Web 服务中提取 JSON 格式的所有数据并将它们解析为 NSMutableDictionary 对象。即使它们将包含 1000 多种产品的数据，也应该没问题（我猜）。

但是对于图像，我不知道如何将它们保存在设备存储中以及引用它们的最佳方式。每个图像的大小应为 10Kb 或更小。

我目前的方法（我能想到的）是

*   将所有产品的数据存储在 NSMutableDictionary 中并使用 NSArchiver 的方法 archiveRoodObject:toFile （或者可能只是使用 [NSMutableDictionary writeToFile:atomically]）
*   以某种方式将所有图像存储在设备存储中。
*   创建一个包含所有现有图像名称和路径的数组/字典，用作参考并将其存储在 NSArchiver 中（或者也可以只使用 [NSMutableDictionary writeToFile:atomically]）。同步后不在此引用中的任何图像都将被删除。

这就是我之前对我以前客户的项目所做的方法。但该项目的应用程序包含不到一百张图片。而且，我觉得我做错了。

所以，如果你有什么好的建议，请告诉我。欢迎任何建议。

**注意：**我阅读了一些关于将图像存储到 CoreData 的封闭主题。但是，我现在真的不想尝试它，因为我以前没有任何经验，而且这个当前的项目时间紧迫。所以，如果不是真的需要，我很想稍后再试。

**最后**

我决定按照 Grager 的说法，迁移我的应用程序以使用 CoreData。但是，我可能会尝试先使用 writeToFile 来存储所有产品的信息，看看它是如何进行的。正如grager所说，尝试新事物也不错。最终，我们会得到一些东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T09:14:29.310

您唯一的改变是使用 CoreData。将产品详细信息和图片的本地路径保存在数据库中，但实际图片文件保存在存储中，即。应用程序的 Documents 目录中的一个目录。CoreData 为您提供归档所有数据永远无法实现的性能。如果您没有使用 CoreData 的经验，我认为您将节省阅读文档和实施它的时间，而不是考虑归档、跟踪文件等复杂的解决方案。您将在下一个项目中体验 CoreData :) 二合一

# physics - 使用 Havok 从文件中加载几何图形

> ID：10495659
> 
> 赞同：1
> 
> 时间：2012-05-08T09:05:01.607
> 
> 标签：physics, havok

我想知道有没有办法从这些导出文件.hkx 中加载几何图形？我无法弄清楚这一点，我在演示样本上找不到任何相关内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:58:52.543

来自 Havok 导出器的文件使用 Havok 的序列化系统，因此您需要这样做来提取信息。

一个更好的地方是英特尔的论坛： http: [//software.intel.com/en-us/forums/havok/](http://software.intel.com/en-us/forums/havok/) 这由来自 Havok 的支持工程师监控，他们可以更详细地指导您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:17:27.313

这是加载网格形状的片段，即使序列化格式更灵活，但这会让你开始。 [http://kuko.serveblog.net/2012/05/07/havok-how-to-load-a-mesh-shape-from-a-hkx-file/](http://kuko.serveblog.net/2012/05/07/havok-how-to-load-a-mesh-shape-from-a-hkx-file/)

# appcode - 是否可以手动对项目窗口的内容进行排序？（非字母顺序）

> ID：10495660
> 
> 赞同：3
> 
> 时间：2012-05-08T09:05:02.823
> 
> 标签：appcode

我想手动决定项目导航器内容的窗口顺序。

这该怎么做？

我附上一个图像文件。请打开它。

![在此处输入图像描述](../Images/791bbac9c700ece5c74eb8827a405261.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T22:22:09.767

> [目前不支持。](http://youtrack.jetbrains.com/issue/OC-3919#comment=27-328946)

您所能做的就是为[OC-1666 项目树投票：按类型排序的项目不起作用](http://youtrack.jetbrains.com/issue/OC-1666)，希望 JetBrains 实现此功能。

# sql-server - 试图查找到外部 sql 服务器的连接字符串的错误

> ID：10495664
> 
> 赞同：0
> 
> 时间：2012-05-08T09:05:17.610
> 
> 标签：sql-server, asp.net-mvc, string, connection

我正在运行 asp.mvs 网络应用程序。它已经托管，数据库也由同一托管服务提供商提供。我正在尝试（已经 3 天）使用给定`connection string`的从数据库传输数据。这是我的方法，我的方法在哪里，`connection string.` 请您看一下，看看一些潜在的错误。这很烦人，因为我不能做这个简单的事情。

```
 /// <summary>
    /// Gets connection string of Database
    /// </summary>
    /// <returns>connection string of type const</returns>
    public static string GetConnectionStringOfDatabase()
    {
        try
        {
            string cnc = @"data source=OnlineVertrag.mssql.somee.com;workstation      id=OnlineVertrag.mssql.somee.com;packet size=4096;user id="xxx";pwd="xxx";persist security info=False;initial catalog=OnlineVertrag";
            return cnc;
        }
        catch (Exception ex)
        {
            bool rethrow = ExceptionHelper.Handle(ex, "Business Logic");
            if (rethrow)
            {
                throw;
            }
        }
        return null;
    }

 public bool CheckIfUserIsActive(string username)
        {
            SqlConnection connection = new SqlConnection(SQLDataHelper.GetConnectionStringOfDatabase());

            try
            {
                connection.Open();
                SqlCommand cmd = new SqlCommand();
                cmd.Connection = connection;
                cmd.CommandType = System.Data.CommandType.Text;
                cmd.CommandText = @"SELECT IsActive "
                                + "FROM Users "
                                + "WHERE Username = @Username";
                cmd.Parameters.Add(new SqlParameter("@Username", UserName));

                SqlDataReader reader = cmd.ExecuteReader();

                bool isActiveValueFromDataBase = false;

                if (reader.HasRows)
                {
                    while (reader.Read())
                    {
                        isActiveValueFromDataBase = Convert.ToBoolean(reader["IsActive"]);
                        if (isActiveValueFromDataBase == true)
                        {
                            return true;
                        }
                        return false;
                    }
                }

                reader.Close();
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:55:16.713

错误 #1：在公共论坛上发布登录信息。

说真的 - 查看此页面并查看问题编辑历史记录的每个人现在都可以登录到您的数据库。您应该尽快更改密码。

错误 #2：在代码中存储连接字符串。正如您所看到的 - 密码更改可能会出乎意料。最简单的方法：存储在 web.config 中并使用 ConfigurationManager.ConnectionStrings 访问它们：

[http://pietschsoft.com/post/2005/12/28/ASPNET-20-How-to-get-a-specific-ConnectionString-from-the-WebConfig-by-name.aspx](http://pietschsoft.com/post/2005/12/28/ASPNET-20-How-to-get-a-specific-ConnectionString-from-the-WebConfig-by-name.aspx)

可能的错误 #3：尝试“data source=OnlineVertrag.mssql.somee.com;user id=xxx;pwd=xxx;initial catalog=OnlineVertrag”。也许“工作站”和“id”之间的空格是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:51:39.807

大卫蒂施勒所说的。

您是否有 SQL Management Studio 或其他可以使用连接字符串进行连接的交互式 SQL 应用程序？至少在 Microsoft SQL Server Management Studio for SQL Server 2008 中，您只需将连接字符串粘贴到“附加连接参数”部分即可。我不相信这在早期版本中存在。

您如何创建一个尝试连接到数据库的页面，然后将 ex.Message 显示为页面的一部分。也许这会告诉你 SQL 客户端库认为什么是错误的。

# objective-c - 非常基本的 Objective-c 内存管理

> ID：10495665
> 
> 赞同：0
> 
> 时间：2012-05-08T09:05:24.520
> 
> 标签：objective-c, memory-management, properties

我是objective-c的新手，我想知道当我像下面的代码一样返回一个对象时，我是否应该像这样自动释放它：

```
- (NSArray *)loadCategory
{
    NSArray *temp = [[[NSArray alloc] initWithObjects:c1, c2, nil] autorelease];

    return temp;
} 
```

另外，当我使用调用函数获取返回值时，是否应该保留目标？

```
- (void)viewDidLoad
{
     category = [self loadCategory];

     [category retain];

   [super viewDidLoad];
} 
```

最后，我可以替换为：

```
- (void)viewDidLoad
    {
        self.category = [self loadCategory];
       [super viewDidLoad];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:14:42.740

只要您的`category`属性定义为`retain`or `copy`，您的所有三个示例看起来都是正确的。记得在或中释放（或设置为`nil`）。`viewDidUnload``dealloc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:15:31.373

是的，你是对的，你需要在 loadCategory 方法中调用 autorelease 。这允许自动释放池处理数组对象的释放（在您的调用代码更改以保留它之前，它不会被释放）。是的，您需要保留调用代码中的数组。最后，是的，只要您的 self.category 属性声明为“保留”：

```
@property (nonatomic,retain) NSArray *category; 
```

并且因为您的属性保留了数组，所以您必须稍后释放它，例如在 dealloc 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T09:16:00.403

你的代码很好。您也可以使用...

> [NSArray arrayWithObjects: ..., nil];

这将为您返回一个自动释放实例。

如果您在不再需要它后**保留**它，也不要忘记在此数组上调用**release 。**

# javascript - SQLite DB 每次都在 phonegap 中填充

> ID：10495673
> 
> 赞同：0
> 
> 时间：2012-05-08T09:06:07.923
> 
> 标签：javascript, html, sqlite, cordova

我遵循了关于如何在我的 android 平板电脑上设置和创建 SQLite DB 的 phonegap 教程。数据库是用 javascript 编写的，应用程序是用 HTML5 编写的。

数据库最终变得非常大（只有 1200 行填充/添加数据） 我担心的一个问题是，每次我访问我的 index.html（首页）或我称为 catalog.html 的页面时，它都会填充。这是内存或时间等问题吗？应用程序在运行时不会向数据库添加任何内容。有谁知道不让它每次都填充的方法？这是一些代码：

```
document.addEventListener("deviceready", onDeviceReady, false);
var db = window.openDatabase("DBfile", "1.0", "Afghanistan", 200000);

function onDeviceReady() {
    db.transaction(populateDB, errorCB, successCB); 
}
function populateDB(tx) {
    (...
    ...
    ...)
}
function errorCB(tx, err) {
    alert("Error processing SQL: "+err.code);
}
function successCB() {
    alert("DB and tables generated with success!");
} 
```

仅“链接”到 index.html 中的 db 文件而不是所有其他页面是否有帮助？奇怪的是还有另一个页面从数据库文件中获取数据，但我没有得到“成功生成数据库和表！” 当我进入该页面时发出警报。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:23:40.813

每次启动应用程序时都会调用 populateDB 方法的代码结构方式。您将希望通过在 localStorage 中设置一个值来保护此调用。就像是：

```
function onDeviceReady() {
    if (localStorage.getItem("firstRun") == null) {
        db.transaction(populateDB, errorCB, successCB);
        localStorage.setItem("firstRun", false);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:21:44.233

我也使用 Phonegap 和相当大的数据库。我建议您查看 html5 应用程序的框架，例如 jQtouch，它模仿“原生”iphone 应用程序上的交互。就我而言，使用 jQtouch，您只需加载一次 index.html，然后使用 javascript 加载其他页面。您可以使用 ajax 加载内容，并且您的页面结构仅在 index.html 中。

我在加载时间或内存泄漏方面没有任何问题。在这里查看 jQtouch。

[http://www.jqtouch.com/](http://www.jqtouch.com/)

祝你好运！

# ios - 如何设置accessibilityHint的语言？

> ID：10495679
> 
> 赞同：0
> 
> 时间：2012-05-08T09:06:42.743
> 
> 标签：ios, accessibility

我正在编写一个在多语言环境中运行的 iOS 应用程序。因此，程序可以以不同于系统语言的语言运行。甚至可以在应用程序内更改语言，而无需重新启动应用程序。因此，我没有使用 NSLocalizedString，而是使用了这样的机制：

```
- (NSString *)stringForLanguage:(NSString*)key
{
  NSString *path;
  if(prefLanguage == 0) {
    path = [[NSBundle mainBundle] pathForResource:@"de" ofType:@"lproj"];
  } else {
    path = [[NSBundle mainBundle] pathForResource:@"fr" ofType:@"lproj"];
  }
  NSString* str=[[NSBundle bundleWithPath:path] localizedStringForKey:key value:@"" table:nil];
  return str;
} 
```

因为我想让我的程序可以访问，所以我写了这个在德语和法语之间切换的小方法：

```
- (void)setVoLanguage:(NSObject*)object
{
  if (prefLanguage == 0){
    [object setAccessibilityLanguage:@"de-DE"];
  } else {
    [object setAccessibilityLanguage:@"fr-FR"];
  }
} 
```

我正在使用这样的方法：

```
- (NSString *)accessibilityLabel {
  [appDelegate setVoLanguage:self];
  return [NSString stringWithString:[appDelegate stringForLanguage:@"UI_SPLIT_SLIDER"]];
}

- (NSString *)accessibilityHint {
  [appDelegate setVoLanguage:self];
  return [NSString stringWithString:[appDelegate stringForLanguage:@"UI_SPLIT_SLIDER_H"]];
} 
```

我的手机是英文的。第一个工作正常，这意味着该值以德语或法语读取，而提示始终以英语读取。我很困惑。

所以它适用于accessibilityLabels 和accessibilityValues，但不适用于accessibilityHints。有人知道如何设置可访问性提示的语言吗？

谢谢你。

# windows-7 - 在 Windows 7 / 8 / 10 上安装 VB6

> ID：10495680
> 
> 赞同：36
> 
> 时间：2012-05-08T09:06:44.383
> 
> 标签：windows-7, vb6, installation, legacy, legacy-code

我在 Windows 7 上安装 VB6 时遇到问题。我意识到它是一个遗留 IDE，我在网上的研究并没有太大帮助。每次我尝试在 Windows 7 上安装 VB6 时，除了通知我兼容性问题的警报外，安装程序运行并在接近尾声时失败，安装过程最终失败。当再次尝试时，某些 dll 文件可能无法访问。

这些只是我访问过的几个链接中的一些，以期获得解决方案，甚至只是看到一些面包屑：

*   [如何在 Windows 7 上安装 VB6](http://social.msdn.microsoft.com/Forums/en/vbgeneral/thread/b1340d04-220b-4e20-a827-d9c0bc8dd6c5)

*   [Windows 7 64 位上的 VB6](http://www.vbmonster.com/Uwe/Forum.aspx/vb/33424/VB6-on-Windows-7-64-bit)

在有人说“当有更新版本的 Microsoft Visual Studio 推出时，你到底为什么要在 Windows 7 上安装 VB6！”之前，仍然需要 VB6 来维护和更新已经存在的旧系统。

所以问题是，有没有办法在 Windows 7 上安装 VB6 而不会出现兼容性问题？安装虚拟机并在XP中运行VB6 IDE更好吗？或者是否有其他一些我没有遇到过的可能适用于这个困境的方法？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-05-08T15:42:25.007

VB6 在 Windows 7（和 Windows 8 / Windows 10）上安装得很好，但有一些注意事项。

以下是它的安装方法：

*   `C:\Windows`在继续下面的安装过程之前，在调用中创建一个零字节文件`MSJAVA.DLL`。安装过程将查找此文件，如果找不到，将强制安装旧的、旧的 Java，并需要重新启动。通过创建零字节文件，绕过了发霉的 Java 的安装，无需重新启动。
*   [关闭 UAC](http://windows.microsoft.com/en-gb/windows/turn-user-account-control-on-off#1TC=windows-7)。
*   插入 Visual Studio 6 CD。
*   退出自动运行设置。
*   浏览到 VS6 CD 的根文件夹。
*   右击`SETUP.EXE`，选择`Run As Administrator`。
*   在此和其他程序兼容性助手警告中，单击运行程序。
*   点击下一步。
*   单击“我接受协议”，然后单击下一步。
*   输入姓名和公司信息，单击下一步。
*   选择自定义设置，单击下一步。
*   单击继续，然后单击确定。
*   安装程序将“思考”大约 2 分钟。可以通过启动任务管理器并检查 ACMSETUP.EXE 的 CPU 使用率来验证处理过程。
*   在选项列表中，选择以下选项：
    *   微软 Visual Basic 6.0
    *   活动X
    *   数据访问
    *   图形
    *   应取消选中所有其他选项。
*   单击继续，设置将继续。
*   最后会出现一个成功完成对话框，点击确定。此时，Visual Basic 6 已安装。
*   如果您没有 MSDN CD，请清除下一个对话框中的复选框，然后单击下一步。您将收到缺少 MSDN 的警告，但只需单击“是”接受。
*   单击下一步跳过 Installshield 的安装。这是一个你不想要的非常旧的版本。
*   再次单击下一步以跳过 BackOffice、VSS 和 SNA Server 的安装。没有必要！
*   在下一个对话框中，清除“立即注册”复选框，然后单击完成。
*   向导将退出，您就完成了。您可以在“开始”、“所有程序”、“Microsoft Visual Studio 6”下找到 VB6。尽情享受吧！
*   再次[开启 UAC](http://windows.microsoft.com/en-gb/windows/turn-user-account-control-on-off#1TC=windows-7)

* * *

*   在 Windows 7 上成功安装 VB6 后，您可能会注意到在 IDE 中工作有点缓慢。例如，在表单上调整对象的大小是一件很痛苦的事情。
*   安装 VB6 后，您需要更改 IDE 可执行文件的兼容性设置。
*   使用 Windows 资源管理器，浏览安装 VB6 的位置。默认情况下，路径是 `C:\Program Files\Microsoft Visual Studio\VB98\`
*   右键单击 VB6.exe 程序文件，然后从上下文菜单中选择属性。
*   单击“兼容性”选项卡。
*   勾选以下每个复选框：
*   在 Windows XP (Service Pack 3) 的兼容模式下运行此程序
    *   禁用视觉主题
    *   禁用桌面合成
    *   在高 DPI 设置下禁用显示缩放
    *   如果您打开了 UAC，建议您选中“以管理员身份运行此程序”框

更改这些设置后，启动 IDE，一切应恢复正常，IDE 不再迟钝。

**编辑：**更新了死链接以指向具有相同说明的不同页面

**编辑：**随着链接不断消失，使用帖子中的实际说明更新了答案

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-08T09:10:49.233

我已经在 Windows 7 上多次安装和使用 VB6 来处理遗留项目。

我所做但从未遇到任何问题的是安装 VB6，忽略错误，然后继续安装最新的服务包，目前是 SP6。

在此处下载：http: [//www.microsoft.com/en-us/download/details.aspx?id=5721](http://www.microsoft.com/en-us/download/details.aspx?id=5721)

奖励：一旦您安装它并意识到滚动不起作用，请使用以下内容： http: [//www.joebott.com/vb6scrollwheel.htm](http://www.joebott.com/vb6scrollwheel.htm)

# json - 如何使用 Jersey 从 JSON 输出中省略 @XmlRootElement？

> ID：10495681
> 
> 赞同：3
> 
> 时间：2012-05-08T09:06:57.913
> 
> 标签：json, rest, jaxb, jersey

我正在尝试从简单对象列表中生成 JSON。它可以工作，但我的输出用类名包装：

```
{"classname":[{"name":"John Doe","title":"manager"} .....]} 
```

我想要的是

```
[{"name":"John Doe","title":"manager"} .....] 
```

我知道这是因为我的班级上有@XmlRootElement，但是如果我省略了它，那么我会收到一个错误：

```
A message body writer for Java class java.util.ArrayList, and Java type
java.util.List<MyClass>, and MIME media type application/json was not found 
```

我已将 com.sun.jersey.api.json.POJOMappingFeature 设置为 true，尽管我不能 100% 确定它是否在正确的位置。我正在使用 Embedded Jetty，并为 ServletHolder 设置了参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T17:15:40.420

您可以使用 gson 创建数组的字符串。那应该会给你想要的答案。

```
Gson gson = new Gson();
gson.toJson([{"name":"John Doe","title":"manager"} .....]); 
```

欲了解更多信息： http: [//www.studytrails.com/java/json/java-google-json-java-to-json.jsp](http://www.studytrails.com/java/json/java-google-json-java-to-json.jsp)

javadoc：http: [//google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/Gson.html](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/Gson.html)

# javascript - 在 javascript 中检测 XP 或 windows-7

> ID：10495682
> 
> 赞同：2
> 
> 时间：2012-05-08T09:07:03.947
> 
> 标签：javascript

如何使用 JavaScript 检测我的 Web 应用程序是在 Window XP 还是 Windows 7 上运行？

任何帮助/示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:19:57.633

对象中包含有关浏览器和操作系统的信息`navigator`。

只需在两个操作系统（win7 和 winXP）中尝试

```
window.alert(navigator.appVersion); 
```

并查看警报弹出窗口中字符串的差异。通过对此类字符串的一点解析，您将能够检索您需要的所有信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T09:21:29.143

[了解用户代理字符串](http://msdn.microsoft.com/en-us/library/ms537503%28v=vs.85%29.aspx)

要输出浏览器的用户代理，请使用：

```
javascript:alert(navigator.userAgent) 
```

这将为您提供类似以下内容的输出：

```
"Windows-RSS-Platform/2.0 (MSIE 9.0; Windows NT 6.1)" 
```

如果您解析**平台令牌**`userAgent`的数据（在上面的示例中），您将返回 Windows 的版本。只要考虑到每个浏览器都使用自己的格式，检测功能可能是更好的方法。**`Windows NT 6.1``userAgent`**

# mysql - MySQL比较运算符，空格

> ID：10495692
> 
> 赞同：11
> 
> 时间：2012-05-08T09:08:03.977
> 
> 标签：mysql, comparison-operators

如果数据库行是这样的：`country = 'usa'`并且我查询`"select * from data where country = 'usa '"`它也返回此行。所以它不是完全匹配。

为什么 MySQL 会这样做？在其他什么情况下，当它不是真的时，它也会返回 TRUE？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-08T09:16:11.443

如[手册中所述](http://dev.mysql.com/doc/en/char.html)：

> 所有 MySQL 排序规则都是 type `PADSPACE`。这意味着在比较 MySQL 中的所有`CHAR`和`VARCHAR`值时，不考虑任何尾随空格。

在[`LIKE`](http://dev.mysql.com/doc/en/string-comparison-functions.html#operator_like)运算符的定义中，它指出：

> 特别是，尾随空格很重要，对于使用运算符执行的比较[`CHAR`](http://dev.mysql.com/doc/en/char.html)或[`VARCHAR`](http://dev.mysql.com/doc/en/char.html)比较而言，这是不正确的[`=`](http://dev.mysql.com/doc/en/comparison-operators.html#operator_equal)：

如[本答案](https://stackoverflow.com/a/1947694/623041)所述：

> 此行为在 SQL-92 和 SQL:2008 中指定。为了比较的目的，较短的字符串被填充到较长字符串的长度。
> 
> 从草案（8.2 <比较谓词>）：
> 
> > 如果 X 的字符长度不等于 Y 的字符长度，则为了比较，较短的字符串被有效地替换为自身的副本，该副本已通过连接扩展到较长字符串的长度在一个或多个填充字符的右侧，其中填充字符是根据 CS 选择的。如果 CS 具有 NO PAD 特性，则填充字符是一个依赖于实现的字符，它不同于 X 和 Y 字符集中的任何字符，其排序小于 CS 下的任何字符串。否则，填充字符是 <space>。
> 
> 除了其他出色的解决方案：
> 
> ```
> select binary 'a' = 'a   ' 
> ```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T09:11:40.230

如果列的类型为`char`or ，则省略尾随空格`varchar`；使用`like 'usa '`解决问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T09:12:48.937

试试`like`这个

```
country = 'usa ' AND LENGTH(country) = LENGTH('usa ') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T09:17:52.130

如果列是 char 或 varchar 类型，则省略尾随空格，

可以在以下链接上阅读更多信息：

[http://blogs.agilefaqs.com/2011/06/22/trailing-white-spaces-are-ignored-by-mysql-for-comparison-in-a-select-statement/](http://blogs.agilefaqs.com/2011/06/22/trailing-white-spaces-are-ignored-by-mysql-for-comparison-in-a-select-statement/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T09:19:16.013

手册是这样说的：

> 所有 MySQL 排序规则都是 PADSPACE 类型。这意味着 MySQL 中的所有 CHAR 和 VARCHAR 值都会在不考虑任何尾随空格的情况下进行比较 [...] 这适用于所有 MySQL 版本，并且不受服务器 SQL 模式的影响。

[http://dev.mysql.com/doc/refman/5.5/en/char.html](http://dev.mysql.com/doc/refman/5.5/en/char.html)

如果你需要考虑空格，你基本上必须摆脱语言感知排序。一种简单的方法是强制进行二进制排序。请运行并比较：

```
SELECT 'ab'='ab ', BINARY 'ab'='ab ' 
```

# android - 如何通过android应用向保存在数据库中的联系人发送短信？

> ID：10495695
> 
> 赞同：0
> 
> 时间：2012-05-08T09:08:10.903
> 
> 标签：android

我正在开发一个应用程序，它将消息作为输入并将其发送到存储在数据库中的预定义数字！知道问题是我在**oncreate()**方法中加载应用程序时在数据库中插入数字，每次我首先发送消息时，如果它发送消息到 4 号，第二次尝试它会将短信发送到 8 号并且累了移动我的数据插入代码，这样它就不会在每次加载时只插入一次数据，但它不起作用，请任何人帮忙，谢谢！

```
 btnSendSMS.setOnClickListener(new View.OnClickListener() 
    {
        public void onClick(View v) 
        {  
            //loop++;

                 db.open();
                 //loop++;
                  long id;

                  id = db.insertTitle(
                            "5556");  
                    id = db.insertTitle(
                            "5556");  

                    id = db.insertTitle(
                            "5556");  

                    id = db.insertTitle(
                            "5556");  

                 db.close();

             message = txtMessage.getText().toString();                 
            if ( message.length()>0 && message.length()<200)                
            {
                 db.open(); 
                 Cursor c = db.getAllTitles();
                 if (c.moveToFirst())
                 { 

                     String phoneNo; 

                     do { phoneNo=c.getString(1) ;  
                        sendSMS(phoneNo,message);    
                      count++;
                        // db.DisplayTitle(c);
                        Toast.makeText(DatabaseSmsActivity.this,"sms no : "+count,Toast.LENGTH_LONG).show(); 

                     } while (c.moveToNext());
                 }
                 db.close();
                // Toast.makeText(DatabaseSmsActivity.this,"Total SMS sent : "+count,Toast.LENGTH_LONG).show(); 

            }       

            else
                {Toast.makeText(getBaseContext(), 
                    "Please enter message.", 
                    Toast.LENGTH_SHORT).show();}

        }
    }); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:49:02.340

使用此代码，每次用户单击按钮时，该数字`5556`都会被插入数据库四次。这意味着当用户再次单击该按钮时，又`5556`添加了四行。

我认为您正在尝试制作，当用户单击按钮时，只需将短信发送到数据库中的预定义数字，即 4 个数字？

如果是这样：

将静态变量添加到您的活动

```
public static final String PREFS = "prefs";
private SharedPreferences preferences; 
```

在您的活动的 onCreate 方法上调用类似的函数`enterNumbersToDatabase()`

```
public void onCreate(Bundle savedInstanceState) {  

    super.onCreate(savedInstanceState);  
    setContentView(R.layout.main);  

    preferences = getSharedPreferences(PREFS, MODE_PRIVATE);
    enterNumbersToDatabase();
} 
```

enterNumbersToDatabase 函数：

```
private void enterNumbersToDatabase(){
if(!preferences.getBoolean("isNumbersAddedToDB", false)){

db.open();
long id;

id = db.insertTitle("5556");  
id = db.insertTitle("5556");  
id = db.insertTitle("5556");  
id = db.insertTitle("5556");  
    db.close();
SharedPreferences.Editor preferencesEditor  = preferences.edit();
    preferencesEditor.putBoolean("isNumbersAddedToDB", true)
preferencesEditor.commit();
} 
} 
```

在按钮的 onClick 函数中，跳过 就`adding numbers to database part`可以了。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:11:58.903

不要在每次 onCreate() 调用时插入数字，只需插入一次，然后用前一个数字更新该数字。我认为这将解决您的问题

# objective-c - iOS 中 NSOrderedSet 的 JSON 序列化

> ID：10495698
> 
> 赞同：1
> 
> 时间：2012-05-08T09:08:21.263
> 
> 标签：objective-c, ios, json, nsorderedset

将 NSOrderedSets 序列化和反序列化为 JSON 有哪些选择？我正在使用 iOS5/Objective-C。我想我可以自己推出，但我假设那里有一些很好的现有框架......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T09:55:44.153

由于 JSON 没有`set`数据类型，并且它`Array`是有序的，因此您可以转换为 `NSArray`第一个然后序列化，如下所示：

```
NSOrderedSet *os = [NSOrderedSet orderedSetWithObjects:@"1", @"2", @"3", nil];
NSArray *jsonArr = [os array];
// JSON Data
NSData *json = [NSJSONSerialization dataWithJSONObject:jsonArr options:0 error:nil];
// JSON String representation
NSString *jsonString = [[NSString alloc] initWithData:json encoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T06:18:41.467

您唯一的选择可能是访问 OpenSource 库并查看 JSON 序列化程序是如何实现的代码。然后，您可以根据您的目的扩展库。通过“扩展”我的意思是，您应该尽可能多地利用现有库，因为从头开始制作自己的序列化器可能需要大量工作。

通常，JSON 库定义 JSON 类型和相应的 Objective-C 类型（类）之间的映射。例如，一个 JSON 数组映射到一个 NSArray/NSMutableArray，一个 JSON 对象映射到一个 NSDictionary/NSMutableDictionary，等等。

因此，“JSON 序列化器”将“知道”如何将“映射”的 Objective-C 对象序列化为 JSON 元素。实现此行为的一种方法是将 Category 添加到映射的 Objective-C 类。

因此，当“扩展库”（取决于库和实现）时，只需为您的自定义类添加一个类别并相应地实现它就足够了。

我是 JSON 库的作者。为自定义类创建类别，然后可以在 JSON 序列化器中使用这些类别并不费力。您可以在增强请求中指定您的需求，因此我可以调整库以使其更容易添加自定义类。

您的类别如下所示：

```
@interface NSOrderedSet (JPJsonWriter) <JPJsonWriterInserterProtocol>
@end

@implementation NSOrderedSet (JPJsonWriter)

- (int) JPJsonWriter_insertIntoBuffer:(NSMutableDataPushbackBuffer*)buffer 
                             encoding:(JPUnicodeEncoding)encoding
                              options:(JPJsonWriterOptions)options
                                level:(NSUInteger)level
{
    return insertJsonArray(self, buffer, encoding, options, level);
}

@end 
```

这实际上是您所要做的 - 在对我的库进行了一些调整之后。但请注意：这取决于您使用的 JSON 库。[你可以在这里](https://github.com/couchdeveloper/JPJson)找到我的 JSON 库。请提交增强请求 - 谢谢。

# android - 是否可以避免在 android Titan 中选择表格视图行

> ID：10495700
> 
> 赞同：0
> 
> 时间：2012-05-08T09:08:24.800
> 
> 标签：android, titanium

如何在 Titan 中为 Android 应用程序禁用表视图行选择？在 iphone 中可以通过

```
selectionStyle:Titanium.UI.iPhone.TableViewCellSelectionStyle.NONE 
```

在android中我试过了

```
Titanium.UI.createTableView({ allowsSelection: false }); and
row.selectionStyle = 'none'; 
```

但它不起作用..如果有人有解决方案，请帮助它将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-02T06:10:32.623

设置任一

```
 selectedColor:'transparent' 
```

或者

```
touchEnabled:false 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-27T15:28:38.280

尝试使用

```
Ti.UI.createTableViewRow({
    selectionStyle: Titanium.UI.iPhone.TableViewCellSelectionStyle.NONE
}); 
```

创建行时。这在文档中有所介绍（位于[此处](http://docs.appcelerator.com/titanium/3.0/#!/api/Titanium.UI.TableViewRow)`ctrl+f`- 尝试通过在浏览器中点击搜索“selectionStyle”一词）。单击表格行时，这应该会删除任何突出显示。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-08T09:16:11.723

在你的 xml 文件 setfocusable，setclickable 为 false。

```
 android:focusable="false"
        android:focusableInTouchMode="false"
        android:clickable="false" 
```

如果你可以使用 android 代码然后试试这个

```
 tb.setFocusable(false);
    tb.setClickable(false);
    tb.setFocusableInTouchMode(false); 
```

tb 是一个 tablerow 对象。

# java - 为什么在 ant 中编译时会出现许多缺失的类错误？

> ID：10495702
> 
> 赞同：1
> 
> 时间：2012-05-08T09:08:38.503
> 
> 标签：java, ant

让我在这里添加更多信息。我有一个 ant 构建文件。其中的代码是

```
<?xml version="1.0"?>

<project basedir="." default="full">

  <property name="jibx-home" value="C:/Jibx"/>

 <!-- make sure required jars are present -->
  <condition property="runtime-jars-found">
    <available file="${jibx-home}/lib/jibx-run.jar"/>
  </condition>
  <condition property="binding-jars-found">
    <and>
      <available file="${jibx-home}/lib/bcel.jar"/>
      <available file="${jibx-home}/lib/jibx-bind.jar"/>
      <available file="${jibx-home}/lib/jibx-run.jar"/>
    </and>
  </condition>
  <available property="extras-jar-found" file="${jibx-home}/lib/jibx-extras.jar"/>

  <!-- set classpath for compiling and running application with JiBX -->
  <path id="classpath">
    <fileset dir="${jibx-home}/lib" includes="*.jar"/>
    <pathelement location="bin"/>
  </path>

  <!-- make sure runtime jars are present -->
  <target name="check-runtime">
    <fail unless="jibx-home">JiBX home directory not found - define JIBX_HOME system property or set path directly in build.xml file.</fail>
    <fail unless="runtime-jars-found">Required JiBX runtime jar jibx-run.jar was not found in JiBX home lib directory (${jibx-home}/lib)</fail>
  </target>

  <!-- make sure extras jars are present -->
  <target name="check-extras" depends="check-runtime">
    <fail unless="extras-jar-found">Required JiBX extras jar jibx-extras.jar was not found in JiBX home lib directory (${jibx-home}/lib)</fail>
  </target>

  <!-- make sure binding jars are present -->
  <target name="check-binding" depends="check-runtime">
    <fail unless="binding-jars-found">Required JiBX binding jar jibx-bind.jar or bcel.jar was not found in JiBX home lib directory (${jibx-home}/lib)</fail>
  </target>

  <!-- clean compiled class files and output file -->
  <target name="clean">
    <delete quiet="true" dir="bin"/>
    <delete quiet="true" dir="gen"/>
  </target>

  <!-- generate as a separate step -->
  <target name="codegen" depends="check-runtime">

    <echo message="Running code generation from schema"/>
    <delete quiet="true" dir="gen"/>
    <mkdir dir="gen"/>
    <java classname="org.jibx.schema.codegen.CodeGen" fork="yes"
        classpathref="classpath" failonerror="true">
      <arg value="-t"/>
      <arg value="gen/src"/>
      <arg value="-w"/>
      <arg value="starter.xsd"/>
    </java>

  </target>

  <!-- generate using customizations as a separate step -->
  <target name="custgen" depends="check-runtime">

    <echo message="Running code generation from schema"/>
    <delete quiet="true" dir="gen"/>
    <mkdir dir="gen"/>
    <java classname="org.jibx.schema.codegen.CodeGen" fork="yes"
        classpathref="classpath" failonerror="true">
      <arg value="-c"/>
      <arg value="custom.xml"/>
      <arg value="-t"/>
      <arg value="gen/src"/>
      <arg value="-w"/>
      <arg value="starter.xsd"/>
    </java>

  </target>

  <!-- compile the classes -->
  <target name="compile" depends="check-runtime">

    <echo message="Compiling Java source code"/>
    <mkdir dir="bin"/>
    <javac srcdir="gen/src" destdir="bin" debug="on">
      <classpath refid="classpath"/>
    </javac>
    <javac srcdir="src" destdir="bin" debug="on">
      <classpath refid="classpath"/>
    </javac>

  </target>

  <!-- bind as a separate step -->
  <target name="bind" depends="check-binding">

    <echo message="Running JiBX binding compiler"/>
    <taskdef name="bind" classname="org.jibx.binding.ant.CompileTask">
      <classpath>
        <fileset dir="${jibx-home}/lib" includes="*.jar"/>
      </classpath>
    </taskdef>
    <bind binding="gen/src/binding.xml">
      <classpath refid="classpath"/>
    </bind>
  </target>

  <!-- run the included test program to read and then write to separate file -->
  <target name="run" depends="check-runtime">
    <echo message="Running the sample application..."/>
    <java classname="org.jibx.starter.Test"  fork="true" failonerror="true">
      <classpath refid="classpath" />
      <arg value="starter.xml"/>
      <arg value="out.xml"/>
    </java>
    <echo message="Generated output document out.xml"/>
  </target>

  <target name="full" depends="codegen,compile,bind,run"/>
  <target name="custom" depends="custgen,compile,bind,run"/>

  <!-- show list of targets -->
  <target name="help">
    <echo message="Targets are:"/>
    <echo/>
    <echo message="clean         delete all class files and generated code"/>
    <echo message="compile       compile class files"/>
    <echo message="codegen       generate code using defaults"/>
    <echo message="bind          compile JiBX bindings"/>
    <echo message="run           run test program"/>
    <echo message="full          full build and run using defaults"/>
    <echo message="custgen       generate code using customizations"/>
    <echo message="custom        full build and run using customizations"/>
  </target>

</project> 
```

我得到的输出是：

```
Buildfile: D:\Users\Rajesh\workspace\Jib\src\build.xml
check-runtime:
codegen:
     [echo] Running code generation from schema
    [mkdir] Created dir: D:\Users\Rajesh\workspace\Jib\src\gen
     [java] Loaded and validated 1 specified schema(s)
     [java] Generated 5 top-level classes in package org.jibx.starter
     [java] Total classes in model: 5
compile:
     [echo] Compiling Java source code
    [mkdir] Created dir: D:\Users\Rajesh\workspace\Jib\src\bin
    [javac] D:\Users\Rajesh\workspace\Jib\src\build.xml:114: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
    [javac] Compiling 5 source files to D:\Users\Rajesh\workspace\Jib\src\bin
    [javac] D:\Users\Rajesh\workspace\Jib\src\build.xml:117: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
    [javac] Compiling 1 source file to D:\Users\Rajesh\workspace\Jib\src\bin
    [javac] D:\Users\Rajesh\workspace\Jib\src\src\Test.java:33: error: cannot find symbol
    [javac]             IBindingFactory bfact = BindingDirectory.getFactory(Order.class);
    [javac]                                                                 ^
    [javac]   symbol:   class Order
    [javac]   location: class Test
    [javac] D:\Users\Rajesh\workspace\Jib\src\src\Test.java:36: error: cannot find symbol
    [javac]             Order order = (Order)uctx.unmarshalDocument(in, null);
    [javac]             ^
    [javac]   symbol:   class Order
    [javac]   location: class Test
    [javac] D:\Users\Rajesh\workspace\Jib\src\src\Test.java:36: error: cannot find symbol
    [javac]             Order order = (Order)uctx.unmarshalDocument(in, null);
    [javac]                            ^
    [javac]   symbol:   class Order
    [javac]   location: class Test
    [javac] D:\Users\Rajesh\workspace\Jib\src\src\Test.java:40: error: cannot find symbol
    [javac]             for (Iterator<Item> iter = order.getItemList().iterator(); iter.hasNext();) {
    [javac]                           ^
    [javac]   symbol:   class Item
    [javac]   location: class Test
    [javac] D:\Users\Rajesh\workspace\Jib\src\src\Test.java:41: error: cannot find symbol
    [javac]                 Item item = iter.next();
    [javac]                 ^
    [javac]   symbol:   class Item
    [javac]   location: class Test
    [javac] 5 errors

BUILD FAILED
D:\Users\Rajesh\workspace\Jib\src\build.xml:117: Compile failed; see the compiler error output for details.

Total time: 3 seconds 
```

如您所见，它无法识别其他类。这是为什么 ？我可以在这里做些什么来让它识别 main 中引用的其他类吗？这些缺失的类是在包 org.jibx.starter 中生成的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:32:40.190

ANT 中的 Java 任务与需要 .class 文件的 Java 命令相同。

因此，首先您编译 java 并将其放置在适当的文件夹中以成功执行。

学习如何[在 ANT 中使用 javac 任务](http://ant.apache.org/manual/Tasks/javac.html)

# grails - 在 Grails URL 中包含名称

> ID：10495703
> 
> 赞同：3
> 
> 时间：2012-05-08T09:08:41.343
> 
> 标签：grails, groovy, url-rewriting, seo

在我的 Grails 应用程序中，我有几个域类，比如`Author`和`Book`. 我正在使用默认的 URL 映射：

```
static mappings = {
  "/$controller/$action?/$id?"{
    constraints {
      // apply constraints here
    }
  }
} 
```

所以显示 id 为 2 的书的相对 URL 是`/book/show/2`. 为了向 id 为 5 的作者展示它是`/author/show/5`. `Author`和`Book`类都有一个属性`name`，但不能保证是唯一的。

出于 SEO 原因，我想在这些 URL 中包含这个名称，例如更改 URL 以显示一本书`/book/show/2/the+davinci+code`和 URL 以显示作者`/author/show/5/dan+brown`。

为了防止破坏任何现有的（外部）链接到我的页面，理想情况下，我希望同时支持这两种格式，这样以下任一格式都会显示 Dan Brown 的页面

*   `/author/show/5`
*   `/author/show/5/dan+brown`

从我现在的位置（仅限带有 ID 的 URL）到我想要的位置（也支持带有 ID 和名称的 URL），最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T22:55:08.560

大学教师，

你有两个选择。首先，如果您根本不打算在逻辑中使用名称（这似乎是一个选项，因为您已经拥有唯一的 id），那么您可以通过以下方式修改 url 映射：

```
static mappings = {
  "/$controller/$action?/$id?/$extra?"{
    constraints {
      // apply constraints here
    }
  }
} 
```

这将为所有请求添加额外的可选参数。如果您只想为**Author**和**Book**控制器执行此操作，那么您应该像这样修改 UrlMappings.groovy

```
static mappings = {
    "/author/show/$id?/$name?" (controller:"author", action: "show")
    "/book/show/$id?/$name?" (controller:"book", action: "show")
    "/$controller/$action?/$id?" {
          constraints {
          // apply constraints here
          }
    }
} 
```

前两个规则将匹配诸如“/author/show/10/dan+brown”之类的 URL 以及仅“/author/show/10”，您可以通过*params.name*从 show 方法访问*name*参数。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:45:28.517

我还没有尝试过，但是你能不能尝试添加另一个规则：

```
"/author/show/$id/$name"{
    constraints {
        controller='author'
        action='show'
    }
} 
```

那么您将能够在控制器参数中同时获取 id 和 name

```
def show(id, name) {

} 
```*

# c - 要找到数组之间的共同值，还需要找到计数

> ID：10495704
> 
> 赞同：-3
> 
> 时间：2012-05-08T09:08:44.317
> 
> 标签：c, arrays, string

我制作了一个程序来查找两个数组中包含的值以及这些值的计数，但是我的程序不起作用：

```
#include<stdio.h>
#define SIZE 100
void search(char arr1[10][10],char arr2[10][10])
    {       //int x = sizeof(arr1); int y = sizeof(arr2)
        int j,k;
            for( j=0;j<SIZE-1;j++)
            {   
                for( k=0;k<SIZE-1;k++)
                {   int count = 0;
                    if(arr1[j][0] == arr2[k][0])
                    {
                        count += 1;
                    }

                }
                return count;   
            printf("StudentID\t : BooksTanken\t\n");
                    printf("%c \t\t %d \t\n",arr1[j][0],count); }
    }
int main()
{
//  char array1[2][1],array2[5][1];
    char  array1[3][2]={
                                    {'ID1','srini'},
                                    {'ID2','Albie'},
                                    {'ID3','Kaasi'}};
            char array2[6][2]={
                                    {'ID1','OOPS'},
                                    {'ID2','STS'},
                                    {'ID1','STS'},
                                    {'ID1','CTC'},
                                    {'ID3','MAT'},
                                    {'ID2','MAT'}};
    printf("We're Begining the Comaprison Here !!\n\n");

    search(array1,array2);
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T09:17:47.370

您需要阅读 C 中的字符串。这应该表示为字符串，并且您应该使用 eg`strcmp()`进行比较，而不是手动循环。您还将从了解`struct`s 以及使用此类而不是裸字符数组中受益匪浅。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T09:19:55.827

片段：

```
#define SIZE 100
void search(char arr1[10][10],char arr2[10][10])
....
           for( j=0;j<SIZE-1;j++)

....
char  array1[3][2]={ 
```

你看到差异了吗？100, 10, 3

EDITH：向您展示问题：

```
for (i < 0; i < SIZE-1; i++) {
   arr[i] = 0;
} 
```

编译器可以将其扩展为：

```
arr[0] = 0;
arr[1] = 0;
arr[2] = 0;
arr[3] = 0;
arr[4] = 0;
arr[5] = 0;
arr[6] = 0;
arr[7] = 0; 
```

... arr[98] = 0;

您的数组仅分配给 arr[0]、arr[1]、arr[2] 的内存；所以引用 arr[3] 可能是一件坏事......

EDITH 2：问题：为什么是“SIZE-1”？

# wcf - 如何限制 wcf 中的数据大小

> ID：10495709
> 
> 赞同：0
> 
> 时间：2012-05-08T09:08:59.200
> 
> 标签：wcf, wcf-data-services

如何限制 wcf 中数据的大小？

假设我有一个小于 256 的字符串，我该如何执行它？例如我有：

```
[DataContract]
class  DataExample
{
    [DataMember]
    public string Name;
} 
```

我如何通知并强制客户名称应少于 256 个字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:18:05.030

通过 datamember / datacontract 标签，据我所知，你不能。您可以在数据合同上做一些事情，例如需要存在属性等，但它们非常有限。

# linux - 发送超过 25000 个时事通讯 smtp

> ID：10495710
> 
> 赞同：-1
> 
> 时间：2012-05-08T09:09:07.487
> 
> 标签：linux, email, smtp

我的时事通讯必须发送超过 25,000 封电子邮件。我想为它购买一个专用服务器，但我无法理解这个过程。

系统如何运作？

如何不出现在黑名单中？

我需要什么软件？

我需要谷歌:)，因为我找不到任何信息。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T09:12:47.153

尝试让其他人为您处理这件事。这是一个你可能不想卷入的痛苦世界。

我们在工作中使用[SendGrid](http://sendgrid.com/)，效果很好。其他流行的服务是[AWeber](http://aweber.com/)和[MailChimp](http://mailchimp.com/)。

# java - Gps轨迹检测算法

> ID：10495712
> 
> 赞同：0
> 
> 时间：2012-05-08T09:09:10.633
> 
> 标签：java, android, algorithm, gps

我正在开发一个 Android 应用程序，该应用程序将记录（使用 GPS）用户在他们的越野车上骑行的轨迹。完成骑行后，我希望能够分析这些数据并找到骑行过的轨道。

我将轨道定义为两个十字路口之间的行驶区域。交叉点是两个或多个点彼此足够接近，可以归类为一个点。显然，我需要为此确定某种阈值。

显然，我可以通过蛮力检查每个点与其他点来做到这一点，但我认为必须有一种更有效的方法。

有什么更好的方法吗？

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:31:50.583

[卡尔曼滤波器](http://en.wikipedia.org/wiki/Kalman_filter)经常用于拒绝误差（噪声）点并简化 GPS 轨迹和估计真实轨迹。Wiki 页面看起来相当复杂，所以如果能找到一些关于轨道过滤的实用文章会很不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:40:23.947

实用：

1.  GPS点必须按照你的骑行顺序，所以你只需要检查一些连续的点就可以了。
2.  对于每个点，将其作为圆心，看看圆中有多少点，然后您可以将这些点组合成一个交点。
3.  生成的交叉点也将按照您的骑行顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-26T22:35:36.183

对于像轨道简化（我称之为“streamplification”）这样的运行中流是：您保留 GPS 传感器为您提供的点的小缓冲区，每次将 GPS 点添加到缓冲区（包括高程）时，您计算缓冲区中所有点到将缓冲区的第一个点与（新添加的）最后一个点连接起来的线段的最大 XTD（跨轨道距离）。如果具有最大 XTD 的点违反了您的最大容忍 XTD 误差（25m 给了我很好的结果），那么您在该点切割缓冲区，将其注册为要附加到流放大轨道的选定点，修剪尾随部分缓冲到那个切点，然后继续。在轨道的末端，缓冲区的最后一个点也被添加/刷新到溶液中。该算法足够轻巧，可以在 AndroidWear 智能手表上运行，无论您是慢速还是快速移动，或者长时间闲置在同一个地方，都能提供最佳输出。唯一重要的是你的赛道的形状。您可以走很多分钟/公里，只要您沿直线移动（在 +/- 允许的 XTD 误差偏差范围内的走廊），streamplify 算法将仅输出 2 个点：出口形式最后一条曲线和入口的点在下一条曲线上。

检查此问答也 [简化/优化 GPS 轨迹](https://stackoverflow.com/questions/4480434/simplification-optimization-of-gps-track)

# php - Symfony2 资产：安装基础资源

> ID：10495713
> 
> 赞同：0
> 
> 时间：2012-05-08T09:09:11.837
> 
> 标签：php, symfony

在 Symfony2 中，您可以`assets:install`将资产复制到网络（或其他文件夹）。有没有办法`assets:install`为公共文件夹做一个，`app/Resources`或者你只需​​要把它们放在网络文件夹中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:46:16.617

您应该在其文件夹中创建`MainBundle`或`CoreBundle`重新组合每个常见资产。`public/`迟早你可能会需要这个捆绑包来存储公共服务等。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T02:23:28.727

最好将它们直接放在 web 文件夹中并使用此功能链接它们

```
 href="{{ asset('css/screen.css') }} 
```

# xslt - XSLT 语法错误

> ID：10495717
> 
> 赞同：0
> 
> 时间：2012-05-08T09:09:36.427
> 
> 标签：xslt

任何人都可以验证以下 xslt 语法

```
<xsl:if test="(string(Address/Country)=='US') || (string(Address/Country)=='CA')">
      <val name="PHYSICAL_ADDRESS_StateProvinceCd">
       <xsl:value-of select="normalize-space(Address/State)" />
      </val>  
     </xsl:if> 
```

当我尝试上述操作时，出现以下错误“错误：'（字符串（地址/国家）=='美国'）或（字符串（地址/国家）=='CA'）'中的语法错误。' 致命错误：'无法编译样式表'"

提前感谢拉马纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:34:28.713

> ```
> <xsl:if test="(string(Address/Country)=='US') || (string(Address/Country)=='CA')"> 
> ```

**这里有*两个*语法错误**：

1.  XPath中没有`==`运算符。您可能想要使用`=`运算符。

2.  XPath中没有`||`运算符。您可能想要使用`or`运算符。

**更正后的代码如下所示**：

```
<xsl:if test="(string(Address/Country) = 'US') or (string(Address/Country) ='CA')"> 
```

**括号不是必需的，因为`or`它的优先级低于`=`**：

```
<xsl:if test="string(Address/Country) = 'US' or string(Address/Country) ='CA'"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:16:14.410

`==`不是有效的XPath。等号运算符是单个字符，`=`.

# java - BorderLayout - 控制高度但不控制宽度

> ID：10495723
> 
> 赞同：4
> 
> 时间：2012-05-08T09:09:59.627
> 
> 标签：java, swing, awt, layout-manager

我对 Java UI 比较陌生，希望您能对我遇到的一个简单问题提供帮助。

我有一个`JPanel`类型`BorderLayout`。该`CENTER`部件包含一个组合框。

随着外框大小的调整，面板的大小也会随之改变（这是需要的），并且组合框的宽度也会发生变化（这也是需要的）。但是，组合框的高度也会随着面板大小的调整而变化。这是不希望的。

如何确保我的组合框在宽度上扩展但在高度上不扩展？

我也有一个按钮`LINE_START`。我希望这个按钮根本不拉伸。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T09:27:36.617

放组合。进入`NORTH`面板，然后添加到`CENTER`主面板`BorderLayout`。对按钮执行相同操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T09:23:05.170

我强烈建议您使用我个人最喜欢的 TableLayout。因为您可以像在表格中一样布局元素，而无需太多麻烦。

[你可以在这里读更多关于它的内容。](http://java.sun.com/products/jfc/tsc/articles/tablelayout/)

[此链接将您带到有关它的完整站点。](http://www.clearthought.info/sun/products/jfc/tsc/articles/tablelayout/)

恐怕这个布局管理器可能有点过时，当然它页面上的示例是，但即使在 1.7 版本的`Java`.

看看那里的例子。用于使框拉伸（即填充可用空间）的选项是`TableLayout.FILL`.

# solr - 使用solr，如何输入“AB”才能匹配“ABCD”

> ID：10495726
> 
> 赞同：0
> 
> 时间：2012-05-08T09:10:25.287
> 
> 标签：solr

在 solr schema.xml

我有一个领域

```
 <field name="name" type="string" indexed="true" stored="true" multiValued="false" /> 
```

这个值可以

*   abcd108-102
*   abcd107-102
*   axcd807-102

等等

如何输入*“ab”*，匹配“abcd108-102”、“abcd107-102”？

输入*“bc”*，匹配到“abcd108-102”，“abcd107-102”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:20:02.880

我能想到的两种方法：

1.  在 nGrams 上标记您的文本，其中 n=要搜索的长度，因此在您的情况下为 2。

2.  看看[条款组件](http://wiki.apache.org/solr/TermsComponent)

# java - java - 如何在java中找到ruff draw或free hand draw round或任何模糊形状的区域？

> ID：10495727
> 
> 赞同：1
> 
> 时间：2012-05-08T09:10:28.657
> 
> 标签：java, shape, area

我正在使用 Swing 技术为 Java 牙医制作应用程序。在我的应用程序中，我想测量 ruff 形状、自由手绘形状和自由手绘圆的面积。我也把我的牙齿形象。在这张图片中，我用黄色绘制了一个徒手形状，我想在 java 中测量那个圆圈的面积。那么，我该怎么做呢？如果有人对此有任何想法，请与我分享。

![在此处输入图像描述](../Images/bd83c3d700b379b83f3094a1ec28ecd7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:13:56.087

好的，您将所选线条阵列的每个点保存为 (x1,y1) 和 (x2,y2) 和 (x3,y3) .... (xN,yN) 然后[使用这个公式](http://en.wikipedia.org/wiki/Shoelace_formula)得到您的总封闭-区域：

![在此处输入图像描述](../Images/92de0ecc0ee775857371460998f7957e.png)

但要小心，这是一个近似值：“每 2 个点之间，有一条线”（线性插值）。当然，计算时间与周长成正比。

# php - 在 application.ini 中设置 PHP 配置设置

> ID：10495730
> 
> 赞同：0
> 
> 时间：2012-05-08T09:10:35.707
> 
> 标签：php, zend-framework

我忘记了如何从 Zend Framework 的 application.ini 设置 PHP 配置设置。

我想设置 max_execution_time 变量。

请帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T09:21:37.013

您可以使用 application.ini 来设置可以使用[ini_set()](http://php.net/ini_set)指令设置的任何设置，这里有一个[列表](http://us3.php.net/manual/en/ini.list.php)。

在您的情况下，您正在替换更改 max_execution_time 的[set_time_limit()](http://us3.php.net/set_time_limit)函数[。](http://us3.php.net/manual/en/info.configuration.php#ini.max-execution-time)

所以你想把它放到你的 application.ini

```
phpSettings.max_execution_time = 20 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T09:33:50.670

将此添加到您的 application.ini

```
phpSettings.max_execution_time = 30; 
```

# sql - SQL：一次查询中的计数

> ID：10495731
> 
> 赞同：0
> 
> 时间：2012-05-08T09:10:39.813
> 
> 标签：sql, count, subquery, aggregate-functions

SQL 语法中是否有一种直接的方法可以在没有子查询的情况下在单个查询中编写它？是否有任何机会以这种方式获得性能？

```
SELECT ProductCount, COUNT(*) as Occurence
FROM (
    SELECT OrderID, COUNT(DISTINCT ProductID) as ProductCount
    FROM OrderLine
    GROUP BY OrderID
) X
GROUP BY ProductCount
ORDER BY ProductCount 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:25:21.620

1.  您的问题是推荐的方法。

2.  您不太可能从任何更改中看到任何性能提升。这是一种非常常见的模式，您的数据库应该可以很好地应对。如果速度较慢，请考虑添加适当的索引。

# magento - 通用承运人运输方式集成

> ID：10495734
> 
> 赞同：0
> 
> 时间：2012-05-08T09:10:46.600
> 
> 标签：magento, methods, shipping, carrier

我想问你一件事，**“Common Carrier”一词是通用术语，还是像 FedEx、USPS 这样的特定运输方式？** 如果这是一种特定的运输方式，我应该怎么做才能将它与我的 magento v1.4.2.0 应用程序集成？这是任何可用的扩展或任何其他帮助吗？

*对我来说，这似乎是一个通用术语——据我所知，没有具有这个确切名称的运输服务。*

谢谢，
拉克什·阿尔汉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:33:26.377

正确，这只是运输承运人的通用/通配符术语。它不依赖于任何特定的人。

# android - 调用覆盖活动而不遵循活动生命周期

> ID：10495737
> 
> 赞同：1
> 
> 时间：2012-05-08T09:11:03.410
> 
> 标签：android, android-activity

我想`onCreate`从方法中调用`onPause`方法。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:14:04.517

不，您永远不应该对`onCreate`（或任何其他`Activity`生命周期方法）进行任何显式调用。系统为你管理`Activity`生命周期，显式调用这些方法只会干扰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T04:54:07.797

我在几个应用程序中都有类似的需求。创建一个单独的（可能希望它是私有的）方法来完成所有肮脏的工作并从两个地方调用。例如

```
@Override
public void onCreate(Bundle bundle) {
    super.onCreate(bundle);
    //call your init function here
    init();
    ...
}
@Override
public void onPause() {
    super.onPause(); 
    //call your init function here
    init();
}

//your init stuff
private void init(){
    //do all of the stuff you need to do in onCreate and onPause here
    ...
} 
```

# html - 黑莓中的 HTML 5 编码

> ID：10495738
> 
> 赞同：0
> 
> 时间：2012-05-08T09:11:04.207
> 
> 标签：html, blackberry, html5-video

我开始在黑莓中为 5、6 和 7 BB OS 开发和移动应用程序。

我知道 HTML 5 是我可以在我的 BB 应用程序中使用的新东西。

我正在尝试显示 HTML 5 视频，我需要编写什么类型的代码来处理来自 web 服务的代码。

请让我知道黑莓移动应用程序中与 HTML 5 相关的任何类型的编码。提前谢谢..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:17:41.867

我用它来执行 HTML5，[http://camendesign.com/code/video_for_everybody/test.html](http://camendesign.com/code/video_for_everybody/test.html)，我还发现黑莓只支持几种视频格式。

# android - Android - Freemarker 库配置初始化期间的错误

> ID：10495739
> 
> 赞同：2
> 
> 时间：2012-05-08T09:11:04.600
> 
> 标签：android, freemarker, template-engine

我想使用模板在 Android 应用程序上生成 html 页面。稍后我想打印这些准备好的页面。我以为我可以使用 Freemarker 模板库。但在初始化期间 - 在代码中：尝试 { cfg = new Configuration();

```
 cfg.setDirectoryForTemplateLoading(new File(MSprzedazSesja.folderAplikacjiNaKarcie.getAbsolutePath()+MSprzedazSesja.folderWzorcowWydruku));
            cfg.setObjectWrapper(new DefaultObjectWrapper());
            tempFaktura = cfg.getTemplate("wzorzecFaktura.ftl");
        } 
```

我收到错误：E/AndroidRuntime(7608): at freemarker.core.Configurable.(Configurable.java:139) 它在 cfg = new Configuration(); 我尝试在窗口化的 Java 应用程序中使用该代码，它工作正常。是否可以在 Android 中使用 Freemarker？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T16:27:33.610

[http://freemarker.624813.n4.nabble.com/Exception-when-using-FreeMarker-in-Android-td4654256.html](http://freemarker.624813.n4.nabble.com/Exception-when-using-FreeMarker-in-Android-td4654256.html)

我今天遇到了同样的问题。在谷歌搜索后，我找到了这个答案： **'Android is not an official support target'**。所以我正在考虑在我的项目中替换freemarker

# android - 如何在操作栏中的第一个操作项之前显示分隔线？

> ID：10495744
> 
> 赞同：2
> 
> 时间：2012-05-08T09:11:13.303
> 
> 标签：android, android-actionbar

如何在操作栏中的第一个和最后一个操作项之前显示分隔线？

正常行为：`ACTION1 | ACTION2`

我想：`| ACTION1 | ACTION2 |`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:55:25.263

一种可能的方法是使用包含适当分隔符的自定义操作布局。

# objective-c - 使用 NSMutableArray 从数据库中删除记录

> ID：10495751
> 
> 赞同：1
> 
> 时间：2012-05-08T09:11:53.597
> 
> 标签：objective-c, sqlite, nsmutablearray

所以我想从我的数据库中删除一系列对象。

它们临时存储在 NSMutableArray 中。

这是我当前的代码，我在其中循环它们。

```
+(BOOL) removeLogs:(Logs *)logs {
Database *db = [DatabaseManager sharedDatabaseManager].db;

sqlite3_exec(db.dataBase, "BEGIN", 0, 0, 0);
const char *sqlRemoveLogs = "DELETE FROM logs WHERE LogID = ?";
if(sqlite3_prepare_v2(db.dataBase, sqlRemoveLogs, -1, &removeLogStatement, NULL) != SQLITE_OK) {
    NSLog(@"Failed to prepare statement: %s", sqlite3_errmsg(db.dataBase));
    return NO;
}

for(int i = 0; i < logs.getLogs.count; i++) {
    sqlite3_bind_int(removeLogStatement, 1, [logs getLogAtIndex:i].logId);

    if(SQLITE_DONE != sqlite3_step(removeLogStatement)) {
        NSLog(@"Failed to remove logs: %s", sqlite3_errmsg(db.dataBase));
        return NO;
    }

    sqlite3_clear_bindings(removeLogStatement);
    sqlite3_reset(removeLogStatement);
}

sqlite3_finalize(removeLogStatement);

NSLog(@"Logs removed");
return YES;
} 
```

我想以我现在必须使用 for 循环遍历它们的形式得到它。对 sqlite 使用以下语句：

```
DELETE FROM logs WHERE LogID IN ? 
```

我该如何填写这个“？” 与 NSMutableArray？甚至有可能做到这一点吗？

提前谢谢了

编辑：“日志”对象是一个 NSMutableArray

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:14:20.737

让您想要删除并保存`NSArray`在.`logIds``logIdsToDeleteArray`

然后按照以下步骤操作；

第1步：

```
NSString * logIdsToDelete = [[logIdsToDeleteArray valueForKey:@"description"] componentsJoinedByString:@","]; 
```

结果：数组元素组合成一串逗号分隔的元素。

第2步：

```
NSString *logIdsToDelete = [NSString stringWithFormat:@"{%@}", logIdsToDelete]; 
```

结果：{element1, element2, element 3 ..} 作为`NSString`

第 3 步：

```
NSString *s = [NSString stringWithFormat:@"DELETE FROM logs WHERE LogID IN %@", logIdsToDelete]; 
```

结果：所需的 sql 语句为`NSString`

第4步：

```
const char *sql = [s cStringUsingEncoding:NSASCIIStringEncoding]; 
```

结果：sqlite3 兼容`const char`

您将获得要执行的 sql 语句，然后像您在代码片段中所做的那样继续。

# assembly - 可以在内联汇编中使用宏吗？

> ID：10495752
> 
> 赞同：0
> 
> 时间：2012-05-08T09:11:56.563
> 
> 标签：assembly, linux-kernel, x86, kernel

代码如下：

```
\#define CS 0x18

asm ("pushl CS"
    ); 
```

或作为输入参数的东西：

```
asm("pushl %0 \n\t"

     :"m"(CS) \

    ) 
```

可以在上面的内联 asm 代码中使用宏 CS 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:56:56.117

CS可以用在第二个例子中，而不是第一个。

宏在编译器/汇编器工作之前被替换，因此无论 C 或汇编如何，它们都可以工作。
但是宏没有在字符串中展开，所以第一个例子是行不通的。

如果要使第一个示例工作，请使用字符串化：

```
#define STR1(x) #x
#define STR(x) STR1(x)
asm ("pushl " STR(CS)); 
```

这将扩展`STR(CS)`为`"0x18"`并将其与`"pushl "`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-29T11:08:24.330

或者在 x86 asm 中构建一个

```
call macro1 ;from anywhere in asm code

.macro1
do stuff
ret 
```

# asp.net-mvc-3 - 我有两个 mvc3 项目。当一个帐户登录时，另一个帐户也使用相同的帐户名登录

> ID：10495753
> 
> 赞同：0
> 
> 时间：2012-05-08T09:11:58.033
> 
> 标签：asp.net-mvc-3, security, authentication

我有两个不同的 mvc3 项目。现在奇怪的是，当我登录其中一个网站时，另一个自动登录使用相同的帐户名。

```
 FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe); 
```

这对我来说很奇怪。有人可以解释一下，我应该如何防止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:58:21.890

FormsAuthentication 通过 Cookies 工作，浏览器不允许不同域之间共享 cookie。但允许在相同域之间共享。所以当您在本地主机上运行时会发生这种情况。为避免这种情况，只需更改 web.config 文件中的 cookie 名称。

如果您不提供 cookie 名称，它将采用默认名称，在您的 web.config 中手动提供 cookie 名称，搜索 Authentication Element 并将其块替换为

```
 <authentication mode="Forms">
       <forms name=".yourCustomCookieName" loginUrl="~/Account/Login" timeout="2880" />
    </authentication> 
```

这里 .yourCustomCookieName 是您的 cookie 名称。

# c# - 我可以使用没有定时器组件的定时器吗？

> ID：10495756
> 
> 赞同：1
> 
> 时间：2012-05-08T09:12:00.683
> 
> 标签：c#, .net, windows-services, timer

我正在使用 Windows 服务，它们很难测试，所以想将其保留为空，仅导入类。

我需要使用**Timer**每 5 分钟触发一次事件，但如果我使用计时器组件，我必须将它放在我的 Windows 服务上。

**那么是否可以建立我自己的基本计时器类？**

我该怎么办？如果可能的话，我想变得非常小和轻，几行代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T09:13:41.007

您可以使用[System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)或[System.Threading.Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)

```
// Create a timer with a ten second interval.
System.Timers.Timer aTimer = new System.Timers.Timer(10000);

// Hook up the Elapsed event for the timer.
aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);

// Set the Interval to 2 seconds (2000 milliseconds).
aTimer.Interval = 2000;
aTimer.Enabled = true; 
```

计时器经过的事件处理程序

```
// Specify what you want to happen when the Elapsed event is 
// raised.
private static void OnTimedEvent(object source, ElapsedEventArgs e)
{
    Console.WriteLine("The Elapsed event was raised at {0}", e.SignalTime);
} 
```

在这种情况下，您将不需要计时器组件

[这是 .Net 中有关计时器的完整文章](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx#S3)。此处讨论了不同类型计时器之间的完整比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T09:13:32.917

你检查过 System.Threading.Timer 或 System.Timers.Timer 吗？这应该是你正在寻找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T09:18:32.567

线程.睡眠(1000*60*5); //填充，因为我的答案太小而且太轻。

.. 或者，为了让它更“Timer-ish”，添加一个 for 循环：

```
for(;;){
  timerEvent();
  Thread.Sleep(1000*60*5);
}; 
```

# iphone - 似乎无法添加 Security.framework

> ID：10495761
> 
> 赞同：0
> 
> 时间：2012-05-08T09:12:22.850
> 
> 标签：iphone, xcode

我正在尝试使用**SFHFKeychainUtils**，但我无法编译没有错误。我在班上名列前茅：

`#import "SFHFKeychainUtils.h"`

我在方法中使用以下内容：

```
NSError *error = nil;
NSString *appName = [[[NSBundle mainBundle] infoDictionary] objectForKey:(NSString*)kCFBundleNameKey];
[SFHFKeychainUtils storeUsername:[loginData objectForKey:@"email"] andPassword:[loginData objectForKey:@"password"] forServiceName:appName updateExisting:TRUE error:&error]; 
```

然后我通过 Targets > Build Phases > Link Binary添加**Security.framework**

然后，当我去构建时，我收到以下错误：

```
Undefined symbols for architecture i386:
"_OBJC_CLASS_$_SFHFKeychainUtils", referenced from:
  objc-class-ref in ViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这与我在链接 Security.framework 之前遇到的错误相同。我已经清理并重建了我的项目，但想不出其他可以尝试的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:16:20.883

方蛙，

确保您已将 . 添加`SFHFKeychainUtils.m`到您的应用程序目标中。您可以通过选择 XCode 左侧窗格中的文件并查看“目标成员资格”部分或转到 Project->Your Target->Build Phases->Compile Sources 并检查是否`SFHFKeychainUtils.m`已添加到列表中来检查这一点的文件。

让我知道这是否有帮助！

干杯，帕维尔

# javascript - onblur 触发次数过多或根本不触发

> ID：10495766
> 
> 赞同：0
> 
> 时间：2012-05-08T09:12:50.867
> 
> 标签：javascript, jquery, html, css

我正在开发一个交互式 Web 应用程序，目前在[http://picselbocs.com/projects/goalcandy](http://picselbocs.com/projects/goalcandy)上设置（用户：demo@demo.com，密码：demo）。它允许您将项目从左列拖到右侧的工作区，并调整它们的大小/编辑它们等等。

今天我一直在研究对象的文本编辑功能，并且遇到了一些非常奇怪的行为，我找不到其来源。如果您首先单击新创建对象中的文本字段（以编辑该文本），然后单击文本框外部，则会触发警报消息（我仅将其用于测试目的）。问题是，如果您再次在同一个文本字段内单击然后在其外部单击，则警报触发的次数会越来越多。 **简而言之，随着每次新的文本编辑尝试，“blur”事件的事件处理程序触发的次数越来越多。这是为什么？我错过了什么？** 我对 Firebug 或 Chrome 的调试模块不是很有经验，至少在这种情况下可以帮助我的更微妙的功能（我假设是这样），我可以' t 找到问题的根源。但

标题中提到的另一个奇怪的问题是单击对象的图像，如果对象同时具有文本和图像，则不会触发警报...**否则说，“模糊”的事件处理程序根本不会触发除非您单击对象图像之外的任何其他内容**。知道为什么会这样吗？

这是体现“模糊”事件处理程序的代码（使用 jquery）：

```
var jqSelector = "#mesh div.mesh-obj span";
        $(document)
            .on("mouseover mouseenter", jqSelector, function(event) { 
                event.stopPropagation();
                $(this).css({'background-color':'#FF9', 'cursor':'text'});
            })
            .on("mouseout mouseleave", jqSelector, function(event) { 
                event.stopPropagation();
                $(this).css({'background-color':'transparent', 'cursor':'inherit'});
            })
            .on("mousedown", jqSelector, function(event) { 
                event.stopPropagation();    // prevent activating the parent object's "mousedown/click" event handlers
            })
            .on("click", jqSelector, function(event) { 
                event.stopPropagation();    // prevent activating the parent object's "mousedown/click" event handlers

                //alert('click');

                // Cache jQuery objects
                var jqSpan = $(this),
                    jqPre  = jqSpan.parent(),
                    jqTextarea = jqPre.parent().find('textarea').first();

                // "Replace" the <pre> element with the <textarea>
                jqPre.css('visibility','hidden');
                jqTextarea
                    .show()
                    .text(jqSpan.text())
                    .val(jqSpan.text())
                    .css('background-color','#ff9')
                    .on('click mousedown dblclick', function(event){ event.stopPropagation(); })
                    .on('blur', function(event){
                        event.stopPropagation();
                        // Hide the <textarea> element and make the <pre> visible again
                        jqSpan.text(jqTextarea.val());
                        jqTextarea.hide();
                        jqPre.css('visibility','visible');
                        alert('blur');
                        //jqTextarea.off('blur');
                    })
                    .focus();
            }); 
```

请帮忙！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:22:21.223

每次单击文本区域时，您都会重新添加模糊事件。这不会覆盖旧的，它会添加一个新的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T09:27:09.927

您必须像这样重新添加事件处理程序：

```
 jqTextarea
                    .show()
                    .text(jqSpan.text())
                    .val(jqSpan.text())
                    .css('background-color','#ff9')
                    .off('click mousedown dblclick')
                    .on('click mousedown dblclick', function(event){ event.stopPropagation(); })
                    .off('blur') // remove event listener
                    .on('blur', function(event){
                        event.stopPropagation();
                        jqSpan.text(jqTextarea.val());
                        jqTextarea.hide();
                        jqPre.css('visibility','visible');
                        alert('blur');
                    })
                    .focus(); 
```

# c# - 对哈希集.Net 3.5进行排序

> ID：10495770
> 
> 赞同：21
> 
> 时间：2012-05-08T09:13:10.453
> 
> 标签：c#, .net-3.5

如何`HashSet<string>`在 c# .Net 3.5 中对 a 进行排序？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-08T09:16:05.307

你没有。根据定义， a`HashSet`未排序。

如果你想要一个排序的哈希集，那么你应该使用[`SortedSet`](http://msdn.microsoft.com/en-us/library/dd412070.aspx). 它公开的方法本质上是 提供的方法的超集`HashSet`，包括对其内容进行排序的能力。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-08T09:17:31.600

您可以使用该`OrderBy`方法，无论是 IComparer （即[http://msdn.microsoft.com/en-us/library/bb549422.aspx](http://msdn.microsoft.com/en-us/library/bb549422.aspx)）或使用与一些 lambda 内联的比较器（我通常使用谓词进行比较，如下所示）。

按链接查看：

```
 class Pet
        {
            public string Name { get; set; }
            public int Age { get; set; }
        }

        public static void OrderByEx1()
        {
            Pet[] pets = { new Pet { Name="Barley", Age=8 },
                           new Pet { Name="Boots", Age=4 },
                           new Pet { Name="Whiskers", Age=1 } };

            IEnumerable<Pet> query = pets.OrderBy(pet => pet.Age);

            foreach (Pet pet in query)
            {
                Console.WriteLine("{0} - {1}", pet.Name, pet.Age);
            }
        }

        /*
         This code produces the following output:

         Whiskers - 1
         Boots - 4
         Barley - 8
        */ 
```

阅读更多：http: [//msdn.microsoft.com/en-us/library/bb534966.aspx](http://msdn.microsoft.com/en-us/library/bb534966.aspx)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-05-08T09:39:33.847

HashSet<string> 不是按设计排序的。如果您想对项目进行*一次*排序（〜不经常），那么您可以使用*OrderBy* LINQ 方法（因为 HashSet<string> 实现 IEnumerable<string>）：*hs.OrderBy(s => s);*

如果您需要*排序的哈希集*，那么您可以使用[SortedDictionary类 - 只需为](http://msdn.microsoft.com/en-us/library/f7fta44c%28v=vs.90%29.aspx)*TValue*泛型参数使用一些虚拟类型（即*bool*） 。

 *[SortedSet](http://msdn.microsoft.com/en-us/library/dd412070.aspx)类在.NET 3.5 中不可用。*

# java - 未知参数 -cp：Ant 的虚假错误

> ID：10495771
> 
> 赞同：1
> 
> 时间：2012-05-08T09:13:18.580
> 
> 标签：java, ant

我正在尝试使用 Apache-ant 设置 nightlybuilds。我在 openSUSE 11.4 64 位上有 apache-ant-1.8.2，带有 Java 1.6。

我已经设置了一个单独的虚拟机。它不断抛出以下错误：

```
nightlybuilds@linux-99n0:~> ant
Unknown argument: -cp
ant [options] [target [target2 [target3] ...]]

nightlybuilds@linux-99n0:~/builds> ant -v
Unknown argument: -cp
ant [options] [target [target2 [target3] ...]] 
```

我删除了`/etc/ant.conf`. 我做了`zypper install ant`并下载了大量的 jar 文件。系统说`/usr/bin/ant`我什么时候做`which ant`。并且使用该`--noconfig`选项运行它也无济于事。

问题可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:38:15.110

-cp 应该在那里。您可以按照 Mat 的建议检查别名：

`alias ant`

我建议按照此处的建议检查您的 ANT_HOME：[https ://bugs.launchpad.net/ubuntu/+source/ant/+bug/207105](https://bugs.launchpad.net/ubuntu/+source/ant/+bug/207105)

您还可以通过以下方式检查启动器正在尝试执行的内容：

```
ant --execdebug 
```

# android - Android - PhoneGap 应用程序入门

> ID：10495773
> 
> 赞同：0
> 
> 时间：2012-05-08T09:13:30.527
> 
> 标签：android, cordova

我已经开始使用 Android 的 phoneGap 应用程序。我按照以下步骤操作

[http://i-programmer.info/programming/mobile/3037-getting-started-with-phonegap.html?start=1](http://i-programmer.info/programming/mobile/3037-getting-started-with-phonegap.html?start=1)

但我收到如下错误

![在此处输入图像描述](../Images/f29b0680abaabada9e3f86bdaef374e0.png)

**问题详细信息：**在创建新的 Android 项目时，我忘记选中“创建新活动”复选框，现在我选中了该复选框，成功创建了新的 PhoneGap 应用程序。

**解决方案：**

我已按照以下步骤操作

> 1.  从以下位置下载 Android PhoneGap 应用程序
>     
>     
>     
>     [https://github.com/phonegap/phonegap-plugins/tree/master/Android](https://github.com/phonegap/phonegap-plugins/tree/master/Android)
>     
>     
> 2.  复制 Android 文件夹并粘贴到 Documents 文件夹中
>     
>     
> 3.  启动 Eclipse 并创建新的 android 应用程序
>     
>     
> 4.  在给项目名称检查“**从现有源中选择**”的同时，将位置浏览为“/document/Android/Samples”
>     
>     
> 5.  然后按**Next**并选择**AVD**，
>     
>     
> 6.  检查**CreateActivity**并按“**完成**”按钮。

现在你可以运行这个项目了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:43:47.190

查看您创建 android 项目的方式。在屏幕截图中，项目被标记为 Android 项目，据我所知，但不包含通常在创建项目时自动添加的 Android 库。这就是它找不到 Android 类的原因。

也许尝试使用本指南，它很容易遵循：

[http://phonegap.com/start#android](http://phonegap.com/start#android)

您也可以尝试运行（仅）Android Hello World，以查看是否可以正确创建 Android 项目（按照指南中的说明创建项目并运行，然后再添加 PhoneGap 的东西，会这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T09:10:18.503

这些是为任何 Windows 系统安装 Phonegap 的步骤。

1.  安装Java（在环境变量中设置路径）
2.  下载 ADT Bundle 并将其解压缩并在环境变量中设置路径。
3.  [从http://nodejs.org/](http://nodejs.org/)链接下载并安装 Node.js。（如果没有自动设置，请在环境变量中设置路径）
4.  下载 Apache ANT。提取它并在环境变量中设置路径。

完成上述操作后，在 Windows 中打开 cmd 提示符并输入“npm”。

如果它没有显示错误，则意味着您在这里很好。

现在键入以下 cmd。

C:/>npm install -g phonegap

Phonegap 将安装在您的计算机中。

现在键入以下命令。

C:/>电话间隙

如果它没有显示任何错误，您可以按照[http://phonegap.com/install/](http://phonegap.com/install/)网站上的剩余步骤进行操作。

但是如果它显示任何错误，则意味着您需要在环境变量中设置路径。

设置后，您可以继续执行其余步骤。

# php - S/MIME 下载公钥

> ID：10495776
> 
> 赞同：1
> 
> 时间：2012-05-08T09:13:38.783
> 
> 标签：php, email, encryption, smime

[如果我想使用openssl_pkcs7_encrypt](http://www.php.net/manual/en/function.openssl-pkcs7-encrypt.php)从我的网络服务器向客户列表发送 S/MIME 加密电子邮件。我从哪里获得接收者的公钥？

我读到了证书吊销列表，但不知道如何访问它。而且看起来它只包含无效的键。

如果找到此[搜索表单](https://www.trustcenter.de/fcgi-bin/Search.cgi)但不知道...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:20:21.877

您需要您的客户提供他们的公钥。没有获得这些的规范方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-08T12:46:24.370

您为什么不从受信任的 CA 购买证书并使用您的私钥加密电子邮件，而公钥将包含在与电子邮件一起发送的证书中。看看这门课，我申请了一个受信任的 CA 的 30 天试用版，并使用该证书对其进行了测试。[http://lamp-dev.com/smime-email-encryptionsigning-using-zend_mail/100](http://lamp-dev.com/smime-email-encryptionsigning-using-zend_mail/100)

# css - 元素位置，取决于其尺寸

> ID：10495778
> 
> 赞同：2
> 
> 时间：2012-05-08T09:13:42.897
> 
> 标签：css, layout, css-position

我在我的网站上遇到了一些头像问题，当有一个`35`x`35`头像时，就可以了，如您所知，当`35x35`超出像素尺寸时，问题就会出现。

我认为它与`position: absolute;`属性有关，但找不到更好的替代品。

这是我要求的现场演示：http: [//jsfiddle.net/AtJVb/0/](http://jsfiddle.net/AtJVb/0/)

如您所见，头像太大 - 但周围的元素仍然停留在它们的位置，而不是移动。

这是一个带有`35 x 35`图像的现场演示：http: [//jsfiddle.net/AtJVb/1/](http://jsfiddle.net/AtJVb/1/)

在这里，一切都很完美，我希望我的第一个示例看起来完全一样（我的意思是那些作者、日期和评论内容元素的位置），但图像尺寸更大。

等待任何解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:58:57.760

您可以简单地`float: left`使用该头像和`clear: left`评论正文。

绝对定位在这里搞砸了。

> 绝对定位的元素从流中取出，因此在放置其他元素时不占用空间。

来自[MDN - 绝对定位](https://developer.mozilla.org/en/CSS/position#Absolute_positioning)

# android - 声音记录发痒/滴答声/噪音/尖峰

> ID：10495779
> 
> 赞同：0
> 
> 时间：2012-05-08T09:13:43.270
> 
> 标签：android, audio-recording

我在 Android 2.3.4 设备上成功录制了声音（完整设置为：`AudioSource.MIC`+ `44100Hz`+ `AudioFormat.CHANNEL_IN_MONO`+ `AudioFormat.ENCODING_PCM_16BIT`）。

我还正确地将 PCM 数据写入 WAV 文件。

问题是存在使录音变得糟糕的那些噪音。

**[所附文件](http://www.sendspace.com/file/dp4niw)正是我**的意思。注意明显的尖峰。

**我已经****用市场上的一些录音应用程序**测试了相同的录音（附件中的音乐） ，它们以完美的方式录音，完全没有噪音 - 它是如何完成的？这是我应该设置的设置（我使用`AudioRecord`）吗？我应该用某种算法手动过滤这些噪音吗？我应该寻找什么？

如果由于某种原因无法下载附件或链接已损坏，请在评论中告诉我。

谢谢！

编辑#1：
我使用 Galaxy S2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T09:22:41.020

我认为 44100Hz 对于您的手机功能来说太多了，而且总的来说，对于所有手机功能：手机不是 HI-FI。
尝试使用 8000Hz。
然后您可以更改此值，直到找到可接受的录音质量。

# sql - 在 SQL Server 2008 中合并两个表

> ID：10495786
> 
> 赞同：5
> 
> 时间：2012-05-08T09:14:31.240
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

我有 2 个表，其中一个是 Stage 表，其模式与 main 完全一致，我想将数据从 stage 表更新到 main 表，并将 ID 列作为 refrential 键。我曾尝试在 SQL 中使用 Merge，但遇到了问题，因为只有很少的值需要更新，并且需要将数千个新值插入到主表中。例如：

```
MERGE TABLE tblMain AS main
USING (SELECT ID,NAME,EMAIL_ID FROM tblStage) as stage
ON main.ID=stage.ID
WHEN MATCHED THEN UPDATE SET
main.ID=stage.ID,
main.NAME=stage.NAME,
main.EMAIL_ID=stage.EMAIL_ID
WHEN NOT MATCHED THEN INSERT VALUES 
(
----I am stucked here what to write as there are thousands of values:(
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:20:45.420

您可以参考`insert`部分中的合并源，例如：

```
when not matched then insert
  (id, name, email_id) 
  values (stage.id, stage.name, stage.email_id) 
```

# javascript - 为什么 cookie 在 JavaScript 中会自动清除

> ID：10495790
> 
> 赞同：0
> 
> 时间：2012-05-08T09:14:38.293
> 
> 标签：javascript, cookies

我正在尝试通过 JavaScript 读取 cookie，但是在完成读取 cookie 被清除的过程后，我不想清除 cookie 请帮助我避免这个问题。

以下是读取 cookie 的代码，它读取 cookie 并将其值分配给页面上的文本区域元素

```
function getCookie(c_name) {
    if (document.cookie.length > 0) {
        c_start = document.cookie.indexOf(c_name + "=");
        if (c_start != -1) {
            c_start = c_start + c_name.length + 1;
            c_end = document.cookie.indexOf(";", c_start);
            if (c_end == -1) 
                c_end = document.cookie.length;
            //return unescape(document.cookie.substring(c_start, c_end));
            return decodeURIComponent(document.cookie.substring(c_start, c_end));

        }
    }
    return "";
}

try{

    var readCount=parseInt(getCookie("count_cookie"));
    var quty=document.getElementById("quantity").value;
    var custom_data=""

    for(i=1;i<=readCount;i++)
    {
        cookName="Pdf_"+i;
        pdfname=getCookie(cookName);

        pdfname=pdfname.split("::");

        custom_data=custom_data+"Sku:= "+pdfname[0]+" Pdf Name:= "+pdfname[1]+" Quantity:= "+quty+"    ";

        setCookie(cookName,"");
    }

    document.getElementById("Textarea1").innerHTML=custom_data;

    }catch(e){
        alert(e.message);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:21:52.097

也许这是一个问题？

`setCookie(cookName,"");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:22:48.957

这条线到底在做什么？

```
setCookie(cookName,""); 
```

# networking - 如果我以特定容量进行广播，我的软件将如何运行？

> ID：10495791
> 
> 赞同：0
> 
> 时间：2012-05-08T09:14:38.543
> 
> 标签：networking

我想确认一些事情，并感谢您的帮助。假设我们有三个节点，分别称为 A、B 和 C。所有节点都连接到端口支持 1 Gbps 的交换机。现在假设，节点的 A 网卡为 100 Mbps，而其余的网卡为 1 Gbps。以下是约束；

1) A 只能以最大 100 Mbps 的速率发送 B。2) A 只能以最大 80 Mbps 的速率发送 C。

现在，如果我要播放 2 GB 的文件；

1) 大约需要 2.73 分钟到达 B。2）它将在大约 3.41 分钟内达到 C。

现在，即使我将节点 A 的网卡替换为具有相同约束的 1 Gbps，我仍然会得到相同的结果。我做对了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:50:34.847

我假设您使用的是 UDP 广播之类的东西。

如果您通过文件顺序读取/广播，则持续广播流量以高于 C 可以处理的速率将在转到 C 时永远丢失一些文件组件。

在这种情况下，您会受到最小公分母的限制。在现实世界中，C 根本无法一次缓冲 20Mbps 的流量几分钟。

仅供参考，许多人使用 1024 字节来表示千字节......使用这个假设，以秒为单位的计算是......

```
>>> (2*1024*1024*1024*8)/(80*1000*1000.0)
214.74836479999999 
```

约 3.58 分钟

用比 C 容量更快的东西替换 A 的卡将无助于加快传输速度。

还要意识到现实世界会施加封装开销（来自以太网/IP/UDP 标头），因此即使在 A 和 B 之间，您也永远无法实现线速数据传输速率。您还没有告诉我们有问题的协议是什么，所以这件作品仍然是一个问题。

# java - 如何在 GWT 中的一组下添加复选框？

> ID：10495792
> 
> 赞同：1
> 
> 时间：2012-05-08T09:14:42.273
> 
> 标签：java, gwt, checkbox

我目前正在研究 GWT。我被 CheckBoxGroup 困住了 .. 我怎样才能将我的复选框放在一个名称下？就像在java中我可以使用

```
 CheckboxGroup entreeGroup = new CheckboxGroup(); 
```

然后添加.()..

但在 GWT add() 中不存在..

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:25:10.803

GWT 生成 Javascript，而后者又生成 HTML。在 HTML 中，要将复选框组合在一起，您只需在所有复选框上设置相同的名称。GWT 使用相同的技术。

`getElement().setAttribute("name","your_checkbox_group_name");`在所有复选框上使用。[http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/dom/client/Element.html#setAttribute(java.lang.String,%20java.lang.String](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/dom/client/Element.html#setAttribute(java.lang.String,%20java.lang.String) )

可能有一些代码做同样的事情，但我不知道。

编辑：

正如 Ganesh Kumar 所提到的，如果您期望一次只选择一个复选框，那么您正在寻找[RadionButtons](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/ui/RadioButton.html)。他们在构造函数中采用“名称”参数，以识别同一组 RadioButtons

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-21T09:52:35.867

就我而言，如果复选框仅限于特定功能，并且稍后您想在这些复选框中一起进行某种处理，我使用了 CheckBox 的 ArrayList，并在创建复选框时在此列表中添加了复选框。稍后我将浏览此列表并获取选定的复选框或进行某种处理。希望这可以帮助。

# jquery - Jquery在悬停时淡出所有其他榆树，直到鼠标关闭所有榆树一段时间后才淡入

> ID：10495795
> 
> 赞同：2
> 
> 时间：2012-05-08T09:14:52.537
> 
> 标签：jquery, fade

我有一个充满`article`s 的页面，它们之间有边距，包裹在 a 中`<div id="shell">`，并且正在尝试创建一种效果，如果您将鼠标悬停在一篇文章上，所有其他文章都会淡出。这很容易做到，但是当您从一篇文章移到另一篇文章时，其他所有内容都会再次淡入淡出。我希望它们仅在鼠标位于外壳中而不是在文章上 500 毫秒时才淡出，而不是让所有文章淡入，`#shell`因为外壳占据了整个窗口。

```
$('article').hover(function() {
    if ($('body').hasClass('hover')) {
        $(this).fadeTo(100,1);
    }
    else {
        $('body').addClass('hover');
        $('article').not(this).fadeTo(300, 0.6);
    }
}, function() {
    $(this).fadeTo(300,0.6);
    checkandfade();
});

function checkandfade() {
    setTimeout(function() {
        $(document).mousemove(function(e){
            if (e.target.id == 'shell' && $('body').hasClass('hover')){
                $('article').stop(true,true).fadeTo(100, 1);
                $('body').removeClass('hover');
            }
        });
    },500);
}; 
```

到目前为止，这就是我所拥有的，但我认为超时不起作用..它偶尔会起作用，但主要是将其余部分淡入然后再次淡出。我是否以完全错误的方式进行此操作，或者我的代码中是否存在故障？如果您有任何想法或更简单的解决方案，我希望得到一些反馈。

[在这里](http://archetypiccurator.tumblr.com/)跟随我微弱的进步

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T09:23:37.137

您是否尝试过类似的方法：

```
var timeout = 0;
$('article').hover(function() {
    $(this).stop(true, true).addClass('artHovered').fadeTo(100,1);
    fadeOutArticles();
}, function() {
    $(this).removeClass('artHovered');
    fadeOutArticles();
});
function fadeOutArticles(){
    clearTimeout(timeout);
    $('article').not('.artHovered').fadeTo(300,0.6, function(){
        timeout = setTimeout(function(){
            if($('article.artHovered').length==0){
                $('article').stop(true,true).fadeTo(100, 1);
            }
        }, 500);
    });     
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:22:53.483

我过去使用 hoverIntent 插件做过类似的事情（尽管是在菜单上）。这使您可以设置 mouseenter 和 mouseleave 函数，还可以指定超时时间，以精确何时触发它们。您还可以将其与布尔变量检查结合使用，即在超时后将鼠标输入设置为真，鼠标离开设置为假（实际上将其推迟到以后的时间）。然后你可以在不同的事件函数中检查这个布尔值来决定你是否想做某事。

[http://cherne.net/brian/resources/jquery.hoverIntent.html](http://cherne.net/brian/resources/jquery.hoverIntent.html)

# php - 何时在 PHP 中使用 ===、!== 而不是 ==、!=

> ID：10495796
> 
> 赞同：3
> 
> 时间：2012-05-08T09:15:29.323
> 
> 标签：php

> **可能重复：**
> [php == vs === 运算符](https://stackoverflow.com/questions/589549/php-vs-operator)

`===`我理解 PHP 中,`!==`与`==`,之间的区别，`!=`但我总是觉得自己很喜欢`===`，`!==`但我没有真正的理由。在 PHP.net 上的文档中，经常有“警告”说您应该使用它`===`来检查某些内置函数的返回值。所以我的问题是为什么我应该使用一组运算符而不是另一组？

非常感谢 ：）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T09:17:21.833

如果自动类型转换没有按照您（或将来必须维护您的代码的开发人员）期望的方式进行转换（并且类型对话的规则通常很复杂并且在语言，所以这种混淆的空间很大）。

*除非您需要*打字对话，否则请始终使用三字符版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T09:21:07.683

最常见的原因是函数返回数字/字符串，并且可能在错误时返回 false。如果 0 是有效结果，而 false 表示错误，则必须使用 === 进行区分。但是，总是使用 === 可能会导致意外行为，例如当返回 null 并且也被认为是无效值，但类型检查仅用于 false 时。因此，如果数据来自您自己的源代码/PHP 函数，并且您知道无效值正好是 1，请使用严格检查。然而，在大多数情况下，== 是一个安全的选择，尤其是在您处理外部数据时，这是您无法控制的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T09:18:08.573

`===`并且`!==`仅在您关心两个操作数属于同一类型的情况下才应使用。

否则 - 使用`==`and `!=`- 因为隐式转换是我们喜欢 php 的原因

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T09:19:58.103

`===``!==`如果您使用的函数可能成功返回 0，失败时返回 FALSE，这很重要。在 PHP 0 中也等于 FALSE，这将导致函数失败的结论。

```
if(somefunction() == 0) {
    // Do something
} 
```

假设 somefunction 成功退出时返回 0，失败时返回 FALSE，上面的代码片段将在返回码为 FALSE 时触发。

使用`===`可以防止你这样做，因为它只会在响应确实为 0 时触发。

# java - 第一页上的页面打印帮助

> ID：10495800
> 
> 赞同：1
> 
> 时间：2012-05-08T09:15:47.483
> 
> 标签：java, printing

我有一个`Printable`名为的类`myPrintableObject`，打印方法以下列方式被覆盖：

```
public int print(Graphics g, PageFormat pf, int pageIndex) throws PrinterException
      {
        if(pageIndex<5)
          {
           pf.setOrientation(PageFormat.LANDSCAPE);
           g.drawString("HELLO FRIEND",100,180);
           return PAGE_EXISTS;
          }
        else
          {return NO_SUCH_PAGE;}

     } 
```

我想在同一个文档中横向打印多页。除了第一页外，它正在打印。它总是以纵向打印。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:38:16.210

这个给你：

```
 PrinterJob job = PrinterJob.getPrinterJob();
    PageFormat pf = job.defaultPage();
    pf.setOrientation(PageFormat.LANDSCAPE);
    job.setPrintable(myPrintableObject, pf); 
```

工作示例：

```
public class MyPrintable implements Printable {

    public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException {
        if (pageIndex < 5) {
            graphics.drawString("HELLO FRIEND", 100, 180);
            return PAGE_EXISTS;
        } else {
            return NO_SUCH_PAGE;
        }
    }

    public static void main(String[] args) {
        PrinterJob job = PrinterJob.getPrinterJob();
        PageFormat pf = job.defaultPage();
        pf.setOrientation(PageFormat.LANDSCAPE);
        job.setPrintable(new MyPrintable(), pf);

        boolean ok = job.printDialog();
        if (ok) {
            try {
                job.print();
            } catch (PrinterException ex) {
                /* The job did not successfully complete */
            }
        }
    }
} 
```

# javascript - node.js 模块导出

> ID：10495801
> 
> 赞同：1
> 
> 时间：2012-05-08T09:15:52.567
> 
> 标签：javascript, node.js, commonjs

这是什么原因：

```
exports.foo = 'foo';

var bar = require('./foo');
console.log(bar); // {foo: 'foo'} 
```

但这不是：

```
var data = { foo: 'foo' };
exports = data;

var bar = require('./foo');
console.log(bar); // {}
// expected {foo: 'foo'} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T10:27:23.313

我将尝试将其作为 javascript 问题代码示例来回答

```
function a() {}
a.prototype.foo = {test:"bar"}
var d = new a();
var c = new a();
console.log(d.prototype ==== c.prototype) // Both c and d share the same prototype object
d.foo.hai = "hello"
console.log(d.prototype ==== c.prototype) // Still the they refer to the same
d.foo = {im: "sorry"}
console.log(d.prototype ==== c.prototype) // now they don't 
```

节点也一样

```
console.log(module.exports === exports);// true; They refer to the same object
exports.a = {tamil: "selvan"} 
console.log(module.exports === exports);// true even now 

exports = {sorry: "im leaving"}; // overrides modules.exports
console.log(module.exports === exports); //false now they don't
console.log(module.exports); // {a: {tamil: "selvan"}}
console.log(exports);  // {sorry: "im leaving"} 
```

export 和 module.exports 引用相同的核心对象，直到您像在 javsacript 原型对象中那样覆盖。您覆盖参考更改的那一刻。

`module.exports = {something: "works"}` 有效，因为您正在更改节点在缓存时关心的模块的属性。

即使是以上

`module.exports === exports //is false they are no more the same`

这证明反之亦然：）

另一件事`module`是对当前模块的引用，所以总是更喜欢`module.exports`使用`exports`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T09:26:32.997

`exports = data;`您可以通过替换为来修复第二个代码`module.exports = data;`。

前者不起作用的原因是它只分配给`exports`模块名称空间中的另一个对象。而后者用您的对象替换对象`exports`上的属性值。`module``data`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T09:24:04.137

好吧，在第二个代码中，您基本上是在覆盖导出对象。因此，即使您的代码可以正常工作，我想所有其他导出都会被此破坏（覆盖）。因此，节点可能有一些保护机制来避免这种情况

# c# - 如何从给定日期获取一年中的总天数

> ID：10495802
> 
> 赞同：9
> 
> 时间：2012-05-08T09:15:54.503
> 
> 标签：c#, asp.net

我想获得从给定日期起一年中剩下的总天数。假设如果用户给出`04-01-2011(MM-DD-YYYY)`我想找到剩余的天数。这个怎么做..

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-08T09:19:18.557

假设日期是今天：

```
var user = "05-08-2012";
var date = DateTime.ParseExact(user, "MM-dd-yyyy", System.Globalization.CultureInfo.InvariantCulture);
var lastdate = new DateTime(date.Year, 12, 31);
var diff = lastdate - date; 
```

`diff.TotalDays`包含天数（感谢@Tung）。`lastdate`还包含该年的最后日期。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2020-07-29T11:00:06.750

也许只是：

DateTime.IsLeapYear(DateTime.Now.Year) ? 366 : 365

对不起，读起来好像你只是想要当年的天数......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-08T09:21:31.537

应该做的伎俩

`int daysLeft = new DateTime(DateTime.Now.Year, 12, 31).DayOfYear - DateTime.Now.DayOfYear;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T09:20:15.157

`new DateTime(suppliedDate.Year, 12, 31).Subtract(suppliedDate).TotalDays`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T09:46:36.420

我认为您应该尝试 TimeSpan 之类的

```
 DateTime startTime = DateTime.Now;

 DateTime endTime = DateTime.Now.AddSeconds( 75 );

 TimeSpan span = endTime.Subtract ( startTime );
 Console.WriteLine( "Time Difference (seconds): " + span.Seconds );
 Console.WriteLine( "Time Difference (minutes): " + span.Minutes );
 Console.WriteLine( "Time Difference (hours): " + span.Hours );
 Console.WriteLine( "Time Difference (days): " + span.Days ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-26T13:46:51.727

取一些开始日期，加上一年减去一天，然后从开始日期中减去结束日期，您将得到两个日期之间的总天数。

```
var beginOfYear = new DateTime(2000, 01, 01, 0, 0, 0, DateTimeKind.Local);
var endOfYear = beginOfYear.AddYears(1).AddDays(-1);
var daysOfYear = endOfYear.Subtract(beginOfYear).TotalDays; 
```

# java - 在Java中按值复制对象列表

> ID：10495810
> 
> 赞同：8
> 
> 时间：2012-05-08T09:16:19.230
> 
> 标签：java, collections

我有一个类，它在其构造函数中获取对象列表，`List<Object>`. 每次列表都可以由**不同类型**的元素组成。这是通用的，我不知道他们的班级类型是什么。

在让用户更改其值之前，我想为自己保存一份该列表的副本。但由于副本是通过引用完成的，因此两个列表（原件和副本）都在更改......

如何按值复制我的列表？

谢谢，德沃拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:28:15.293

你的问题不清楚。

*   如果您想要一个浅表副本（即包含对原始列表中对象的引用的列表副本，那么该`clone`方法将完成这项工作，`List`实现类上的复制构造函数也是如此。

*   如果您想要一个深层副本（即包含原始对象副本的列表副本），那么您最好的选择是创建一个新列表并使用原始列表元素的克隆填充它。但是，有一个问题。`clone`默认不提供该方法。许多常见的实用程序类是可克隆的，自定义类不是......除非你已经实现了它。如果您的列表包含任何不可克隆的对象，您将在运行时遇到异常。

有其他深度复制替代方法`clone`，但就像克隆一样，它们不适用于所有类。实际上，如果您的解决方案必须是通用的，这就是问题的症结所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T09:21:07.417

您需要创建一个新`List`列表，然后将原始列表的每个元素的克隆添加到其中。

```
List<Object> copy = new ArrayList<Object>(inputList.size());
for (Object item : inputList) {
   copy.add(item.clone());
} 
```

显然，您需要检查列表中的对象是否正确，[`Cloneable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Cloneable.html)否则它们将无法正确复制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T09:32:46.150

在这些类型的情况下，有三种常见的解决方案：

(1) 如果您知道各个元素具有可以按预期工作的**clone()**方法，请创建一个新数组并用每个相应元素的 clone() 填充它。根据经验，来自 JDK 的“基本”对象，例如字符串、数字表示等应该没问题。clone() 的一个缺点是它有点“松散的大炮”：如果该方法已被特定类覆盖，您不知道“克隆”到底有多深，以及哪些引用可能会得到是否重复使用。它还具有一个特殊的**危险，即依赖于构造函数中的逻辑的可克隆对象的子类可能无法工作**。但正如我所说，简单的 JDK 对象应该没问题。

(2)将列表**序列化为**包裹在 ByteArrayOutputStream 周围的 ObjectOutputStream。然后获取生成的字节数组，并在其周围包装 ByteArrayInputStream 和 ObjectInputStream 并从中读取列表的新的深层副本。

(3) 在理想世界中，创建一个新列表，用**明确创建**的相关对象的“副本”填充它。在代码不太繁琐的情况下，这是理想的解决方案，因为您“知道实际发生了什么”：在意外重新引用而不是重新创建对象方面不会有隐藏的惊喜，因为例如 clone() 方法没有像你预期的那样工作。

由于您有一个简单的容器对象（一个数组列表），您可以轻松地重新创建其结构，因此（2）可能是矫枉过正。它可以方便地重新创建更复杂的结构。

关于(1)，您应该**特别怀疑从第三方库** 中克隆对象，因为这些对象不是专门为 clone() 设计的。问题在于，人们很容易将 JDK（可克隆）类或令牌 clone() 方法子类化，而无需真正详细考虑它——根据我的经验，clone() 有一些许多开发人员没有的微妙之处意识到（例如，构造函数不会在新对象上被调用），这可能会导致意想不到的问题。因此，如果您实际上无法看到可靠的源代码来确保 clone() 是安全的，我会避免使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T09:23:19.460

遍历传递的列表并克隆其内容以创建一个新列表，然后可以在不更改原始列表的情况下使用该列表。

```
private List<Object> clone;
public Foo(List<Object> original)
{
  this.clone = new ArrayList<Object>(list.size());
  for(Object item: original)
  { 
   clone.add(item.clone());
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T09:27:38.253

如果您的对象不包含其他对象的任何其他引用，则可以使用 Object.clone()，但如果不是这样，则需要进行深度克隆。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T09:26:37.570

Collections.copy(b,a);

这是文档： [http ://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#copy%28java.util.List,%20java.util.List%29](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#copy%28java.util.List,%20java.util.List%29)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-05-08T09:22:42.703

如果你有：

```
List<Object> objects 
```

您可以通过以下方式复制此列表：

```
List<Object> newObjects = new ArrayList<Object>(objects); 
```

[更新：添加 ArrayList 的真实实现以证明它复制了新对象]

请查看 ArrayList 的实际实现，它复制对象 - 不包含对同一对象的引用。

`public ArrayList(Collection<? extends E> c) { elementData = c.toArray(); size = elementData.length; if (elementData.getClass() != Object[].class) elementData = Arrays.copyOf(elementData, size, Object[].class); }`

`public Object[] toArray() { return Arrays.copyOf(elementData, size); }`

# eclipse - Eclipse 内容辅助，仅在返回时确认建议

> ID：10495812
> 
> 赞同：1
> 
> 时间：2012-05-08T09:16:28.947
> 
> 标签：eclipse

在 Eclipse 中使用内容辅助时，有什么方法可以配置它，以便仅在您点击返回时才插入建议？

例如，当我声明一个新变量时，它想用类名扩展名称，如果我不想为当前变量使用这个，我必须使用转义。我已经尝试调整激活延迟，它在某些情况下解决了问题，但我更愿意通过返回确认所有建议。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:29:02.503

内容辅助与当前使用的编辑器有关，其配置是特定于编辑器的，Java 编辑器默认激活内容辅助，并在您键入点时自动激活，否则您必须通过`CTRL`**+**`SPACE`调用它。

如果我很理解您正在努力自动激活内容辅助，如果是这样，您可以从以下位置停用它：

```
Preferences -> Java -> Editor -> Content Assist (Auto Activation section) 
```

无法更改 Content Assist 的行为，因为它由编辑器本身直接管理，因此更好的解决方法是停用自动激活并在需要时使用快捷方式调用它。

# actionscript-3 - 从外部应用程序获取数据（无服务器）

> ID：10495813
> 
> 赞同：0
> 
> 时间：2012-05-08T09:16:31.843
> 
> 标签：actionscript-3, flash

在闪光灯投影仪中，我需要从同一台计算机上的应用程序中检索数据。我知道我可以用 fscommand 调用这个应用程序。但是有没有办法让回复回来？例如，如果我要调用像“uptime”这样的 unix 二进制文件，我想将响应“11:14 up 1 day, 16:14, 2 users, load average: 0,47 0,73 0,88” 加载回闪光。这可能吗？

到目前为止，我只使用在后台作为守护进程运行的定制本地服务器。但是对于这个项目来说，这太贵了……

还有其他想法吗？

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T23:37:34.247

您可以使用 AIR 2.0（及更高版本）通过将应用程序打包为本机安装应用程序并使用 NativeProcess 类来实现此目的。

这个[Adob​​e 快速入门教程](http://www.adobe.com/devnet/air/flex/quickstart/articles/interacting_with_native_process.html)应该可以帮助您入门。

还有一个[示例应用程序](http://www.adobe.com/devnet/air/samples_actionscript.html)（仅限 Mac），它使用这种技术与 OS X 的本机功能进行通信。它被称为 SearchCentral，它位于页面的一半左右。

如果您出于某种原因完全赞同将应用程序作为投影仪运行的想法，那么正如 Todd 在下面指出的那样，您可以使用 Zinc 及其[System.execStdOut()](http://www.multidmedia.com/support/livedocs/4.0/index.php?url=main.php?action=methods%C2%ACclass=System%C2%ACid=10149)方法。

# jsf - 在 Web 应用程序中使用 EJB 有什么好处？

> ID：10495814
> 
> 赞同：3
> 
> 时间：2012-05-08T09:16:33.830
> 
> 标签：jsf, jakarta-ee, jsf-2, ejb, java-ee-6

我正在用 Java EE 开发一个数据库驱动的 Web 应用程序，我想知道使用 EJbs 的好处。

如果我理解正确，最好将 EJB 用于每种业务逻辑或数据库事务。

我使用 Hibernate 作为我的 JPA，这是我的问题：

使用注入的 EJB 作为 DAO 而不是使用常规 Java 类作为 DAO（从我的托管 Bean 调用）有什么好处？有什么区别？

我是 Java EE 的新手，所以这可能是初学者的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T09:23:24.683

如果您使用 EJB，则可以使用 EJB 容器提供的许多非常重要的服务。对几乎任何人都有用的最重要的是依赖注入和声明性事务。这两者都可以由 Spring 框架提供。对于非常大的应用程序，EJB 有一个定义良好的集群模型会很有用，但您可能不需要它。

# c# - SqlException 捕获模式中的错误

> ID：10495815
> 
> 赞同：0
> 
> 时间：2012-05-08T09:16:41.000
> 
> 标签：c#, sqlexception

请任何人帮助我解决我工作中发生的这些错误，这让我现在发疯了。我想知道它下面的模式元素是否正确，如果不正确，请帮助我解决这个问题。我使用 C# 编程编写了代码来运行它，当我使用方法时`adapter.Fill(ds)`，输出给出如下错误：

> SqlException 捕获：“，”附近的语法错误

```
<xs:appinfo>
  <wang:relation parent="n_person" parentKey="login" child="n_address" childKey="person_id"/>
  <wang:relation parent="n_org" parentKey="name" child="n_address" childKey="org_id"/>
  <wang:directive sql="SELECT street, city, province, postcode, sid, NULL FROM s_address,    
     s_student WHERE s_address.aid = s_student.fk_add;"/>
  <wang:directive sql="SELECT street, city, province, postcode, pid, NULL FROM s_address, 
     s_professor WHERE s_address.aid = s_professor.fk_add;"/>
  <wang:directive sql="SELECT street, city, province, postcode, NULL, name FROM s_address,  
     s_department WHERE s_address.aid = s_department.fk_add;"/>
</xs:appinfo> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:47:10.400

在查询浏览器中检查您的查询语句

# android - android中带有JSON数据的可扩展ListView

> ID：10495818
> 
> 赞同：0
> 
> 时间：2012-05-08T09:17:06.933
> 
> 标签：android, json, dynamic-data, expandablelistview

我有一个大问题，我一直在网上搜索这个问题的一个好的解决方案，但我找不到任何解决这个问题的方法，所以我需要帮助。

我需要使用从服务器（JSON 数组）获取数据的可扩展列表视图，并且我有类别`GroupData`及其项目，`ChildData`. 我不知道如何获取每个父组的子数据......我需要类似的东西，`SimpleCursorTreeAdapter`但我没有找到任何东西。

这是我到目前为止所达到的，但它不起作用，所以请帮助我：

```
 static ArrayList<HashMap<String, String>> mapList = 
          new ArrayList<HashMap<String, String>>();
  static ArrayList<HashMap<String, String>> catItemsList = 
          new ArrayList<HashMap<String, String>>();
  static ArrayList<ArrayList<HashMap<String, String>>> ItemsList = 
          new ArrayList<ArrayList<HashMap<String, String>>>();
  static   ListView order_list;
  static ExpandableListView order_items_list;
  static  SimpleAdapter adapter,ItemsAdapter;

protected void BindOrederItemList(final int order_id) 
    {
        // TODO Auto-generated method stub
        //select all categories from order items where order_id =??
        //select items where category=??

        JSONObject params = new JSONObject();
        //int    no_pepole=Integer.valueOf(noOfGest_txt.getText().toString());
            try
            {
        //  params.put("order_status",myStatus);
         int rest_id=prefs.getInt("Rest_id", 0);
            params.put("order_id", order_id);
            params.put("lang_id", 1);
            params.put("rest_id", rest_id );
            //params.put("order_status", 0);
        //  params.put("noOfpepole",number_of_guest);
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }

        String Url="http://192.168.3.113/mywebservices.php?op=GetOrderCategory";
        GetNetworkData.OnPostExecuteListener listener=new GetNetworkData.OnPostExecuteListener() 
        {

            @Override
            public void onPostExecute(String result) {
                // TODO Auto-generated method stub
                if (result!=null)
                {
                    try
                    {
                     catItemsList.clear();
                 JSONArray jArray = new JSONArray(result);
                 ArrayList<ArrayList<HashMap<String, String>>> list=new ArrayList<ArrayList<HashMap<String, String>>>();
               //  ArrayList<Integer> category=new ArrayList<Integer>();

                 for (int i = 0; i < jArray.length(); i++) 

                    {
                      HashMap<String, String> Catmap = new HashMap<String, String>();

                        JSONObject e = jArray.getJSONObject(i);
                            id=e.getInt("order_id");

                         cat_name=e.getString("cat_name");
                          cat_id=e.getInt("cat_id");
                          Catmap.put("cat_id",String.valueOf(cat_id));
                          Catmap.put("cat_name", cat_name);
                          catItemsList.add(Catmap);
                          Log.i("Insid For Loop", "order ID "+order_id);

                          list=  BindCatItems(cat_id, order_id);
                        Log.i("Insid For Loop", "Child size = "+list.size());
                    }
               // Log.i("Insid For Loop", "Group size = "+catItemsList.size());

                 SimpleExpandableListAdapter expandListAdapter= new SimpleExpandableListAdapter(getActivity(), 
                         catItemsList,  R.layout.group_item, 
                          new String[] {"cat_name"},new int[]{R.id.lbl_cat_group},
                           list, R.layout.category_row, new String[]{"item_name"}, new int[]{R.id.txt_category_row});

                 order_items_list.setAdapter(expandListAdapter);
                      //  Log.i("Bind item", "CAT SIZE "+catItemsList.size());

                        }
                    catch(Exception e)
                    {
                        e.printStackTrace();
                    }
                }

            }

        };

        try
        {
        GetNetworkData task = new GetNetworkData(Url,params,listener);
        task.execute();
        }
        catch(Exception e)
        {

            e.printStackTrace();

        }
    }

    protected ArrayList<ArrayList<HashMap<String, String>>> BindCatItems(int cat_id,int order_id)

    {
        // TODO Auto-generated method stub

        JSONObject params = new JSONObject();
        //int    no_pepole=Integer.valueOf(noOfGest_txt.getText().toString());
            try
            {
        //  params.put("order_status",myStatus);
         int rest_id=prefs.getInt("Rest_id", 0);
            params.put("order_id", order_id);
            params.put("lang_id", 1);
            params.put("cat_id",cat_id );
            //params.put("order_status", 0);
        //  params.put("noOfpepole",number_of_guest);
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }

        String Url="http://192.168.3.113/mywebservices.php?op=GetOrderItems";
        GetNetworkData.OnPostExecuteListener listener=new GetNetworkData.OnPostExecuteListener() 

        {

            @Override
            public void onPostExecute(String result) {
                // TODO Auto-generated method stub
                if (result!=null)
                {
                    try
                    {
                        Log.i("log bind","Inside Bind Category items");
                        // catItemsList.clear();
                        mapList.clear();
                        JSONArray jArray = new JSONArray(result);

                            for (int i = 0; i < jArray.length(); i++) 
                            {
                                HashMap<String, String> map = new HashMap<String, String>();
                                JSONObject e = jArray.getJSONObject(i);

                                int id=e.getInt("item_id");
                                if (id==0)
                                {

                                }

                                else
                                {

                                map.put("item_id",String.valueOf(e.getInt("item_id")));
                                map.put("oi_id", String.valueOf(e.getInt("oi_id")));
                                map.put("item_name", e.getString("item_name"));
                                map.put("quantity",String.valueOf( e.getString("quantity")));
                                map.put("price", String.valueOf("price"));
                       mapList.add(map);

                                }
                            }
                            ItemsList.add(mapList);
                         //   Log.i("Bind Item Order", "CAT SIZE "+catItemsList.size());

                           /*  ItemsAdapter=new SimpleAdapter(getActivity(), catItemsList, 
                                    R.layout.list_item,
                                    new String[] {"item_name"},
                                    new int[]{R.id.list_item_title});
                           */
                           //  Log.i("Add Section","ItemsAdapter count= "+ItemsAdapter.getCount());

                             //order_list.setAdapter(adapter);
                            //adapter.notifyDataSetChanged();
                    }
                    catch(Exception e)
                    {
                        e.printStackTrace();
                    }
                }
            }
        };

        try
        {
        GetNetworkData task = new GetNetworkData(Url,params,listener);
        task.execute();
        }
        catch(Exception e)
        {

            e.printStackTrace();

        }
        return ItemsList;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:46:22.040

根据文档， SimpleExpandableListAdapter 用于静态数据。这里发生的情况可能是您的方法在获取数据之前返回，并且在创建适配器之后调用传递给 AsyncTask 的侦听器。

因此，我建议尝试的第一件事是先获取数据，一旦执行了两个侦听器（通过检查您自己定义的布尔标志或列表的长度），定义适配器并将其传递给 ListView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:13:10.183

在所有人的帮助下，我已经解决了问题，这就是答案

```
 protected void BindOrederItemList(final int order_id) 
    {
        // TODO Auto-generated method stub
        //select all categories from order items where order_id =??
        //select items where category=??

        JSONObject params = new JSONObject();
        //int    no_pepole=Integer.valueOf(noOfGest_txt.getText().toString());
            try
            {
        //  params.put("order_status",myStatus);
         int rest_id=prefs.getInt("Rest_id", 0);
            params.put("order_id", order_id);
            params.put("lang_id", 1);
            params.put("rest_id", rest_id );
            //params.put("order_status", 0);
        //  params.put("noOfpepole",number_of_guest);
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }

        String Url="http://192.168.3.113/mywebservices.php?op=GetOrderCategory";
        GetNetworkData.OnPostExecuteListener listener=new GetNetworkData.OnPostExecuteListener() 
        {

            @Override
            public void onPostExecute(String result) {
                // TODO Auto-generated method stub
                if (result!=null)
                {
                    try
                    {
                     catItemsList.clear();
                 JSONArray jArray = new JSONArray(result);
                 ArrayList<ArrayList<HashMap<String, String>>> list=new ArrayList<ArrayList<HashMap<String, String>>>();
               //  ArrayList<Integer> category=new ArrayList<Integer>();

                 for (int i = 0; i < jArray.length(); i++) 

                    {
                      HashMap<String, String> Catmap = new HashMap<String, String>();

                        JSONObject e = jArray.getJSONObject(i);
                            id=e.getInt("order_id");

                         cat_name=e.getString("cat_name");
                          cat_id=e.getInt("cat_id");
                          Catmap.put("cat_id",String.valueOf(cat_id));
                          Catmap.put("cat_name", cat_name);
                          catItemsList.add(Catmap);
                          Log.i("Insid For Loop", "order ID "+order_id);

                          list=  BindCatItems(cat_id, order_id);

                        Log.i("Insid For Loop", "Child size = "+list.size());
                    }
               // Log.i("Insid For Loop", "Group size = "+catItemsList.size());

                 SimpleExpandableListAdapter expandListAdapter= new SimpleExpandableListAdapter(getActivity(), 
                          catItemsList,  R.layout.group_item, 
                          new String[] {"cat_name"},new int[]{R.id.lbl_cat_group},
                          BindCatItems(cat_id, order_id), R.layout.category_row, new String[]{"item_name"}, new int[]{R.id.txt_category_row});

                 order_items_list.setAdapter(expandListAdapter);
                      //  Log.i("Bind item", "CAT SIZE "+catItemsList.size());

                        }
                    catch(Exception e)
                    {
                        e.printStackTrace();
                    }
                }

            }

        };

        try
        {
        GetNetworkData task = new GetNetworkData(Url,params,listener);
        task.execute();
        }
        catch(Exception e)
        {

            e.printStackTrace();

        }
    }

    protected ArrayList<ArrayList<HashMap<String, String>>> BindCatItems(int cat_id,int order_id)

    {
        // TODO Auto-generated method stub
        ItemsList.clear();
        JSONObject params = new JSONObject();

        //int    no_pepole=Integer.valueOf(noOfGest_txt.getText().toString());
            try
            {
        //  params.put("order_status",myStatus);
         int rest_id=prefs.getInt("Rest_id", 0);
            params.put("order_id", order_id);
            params.put("lang_id", 1);
            params.put("cat_id",cat_id );
            //params.put("order_status", 0);
        //  params.put("noOfpepole",number_of_guest);
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }

        String Url="http://192.168.3.113/mywebservices.php?op=GetOrderItems";
        GetNetworkData.OnPostExecuteListener listener=new GetNetworkData.OnPostExecuteListener() 

        {

            @Override
            public void onPostExecute(String result) {
                // TODO Auto-generated method stub
                if (result!=null)
                {
                    try
                    {
                        Log.i("log bind","Inside Bind Category items");
                        // catItemsList.clear();
                         ArrayList<HashMap<String, String>> mapList = 
                                  new ArrayList<HashMap<String, String>>(); 
                        JSONArray jArray = new JSONArray(result);

                            for (int i = 0; i < jArray.length(); i++) 
                            {
                                HashMap<String, String> map = new HashMap<String, String>();

                                JSONObject e = jArray.getJSONObject(i);

                                int id=e.getInt("item_id");
                                if (id==0)
                                {

                                }

                                else
                                {

                                map.put("item_id",String.valueOf(e.getInt("item_id")));
                                map.put("oi_id", String.valueOf(e.getInt("oi_id")));
                                map.put("item_name", e.getString("item_name"));
                                map.put("quantity",String.valueOf( e.getString("quantity")));
                                map.put("price", String.valueOf("price"));
                       mapList.add(map);

                                }
                            }

                            ItemsList.add(mapList);

                         //   Log.i("Bind Item Order", "CAT SIZE "+catItemsList.size());

                           /*  ItemsAdapter=new SimpleAdapter(getActivity(), catItemsList, 
                                    R.layout.list_item,
                                    new String[] {"item_name"},
                                    new int[]{R.id.list_item_title});
                           */
                           //  Log.i("Add Section","ItemsAdapter count= "+ItemsAdapter.getCount());

                             //order_list.setAdapter(adapter);
                            //adapter.notifyDataSetChanged();
                    }
                    catch(Exception e)
                    {
                        e.printStackTrace();
                    }
                }
            }
        };

        try
        {
        GetNetworkData task = new GetNetworkData(Url,params,listener);
        task.execute();
        }
        catch(Exception e)
        {

            e.printStackTrace();

        }
        return ItemsList;

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T09:32:09.750

我把你放在这里我使用lisview处理两个json的解决方案；

```
public class ListViewer extends ListActivity{
    //Primary URL JSON1
    private static String url0 = "http:/a.com/url";
    //URL JSON2
    private static String url2 = "http:/a.com/url";

    //JSON1 Node names
    public static final String TAG_COURSES1 = "Courses";           //JSONArray from json1
    public static final String TAG_COURSEID1 = "CourseId";         //Object from json1 - Array courses
    public static final String TAG_RATING1 = "Rating";             //Object from json1 - Array courses
    public static final String TAG_STATUS1 = "Status";             //Object from json1 - Array courses  
    // JSON2 Node names
    public static final String TAG_COURSES2 = "Courses";           //JSONArray from json2
    public static final String TAG_COURSEID2 = "CourseId";         //Object from json2 - Array courses
    public static final String TAG_TITLE = "title";                //Object from json2 - Array courses
    public static final String TAG_INSTRUCTOR = "instructor";      //Object from json2 - Array courses
    public static final String TAG_LENGTH = "length";              //Object from json2 - Array courses
    public static final String TAG_RATING2 = "Rating";             //Object from json2 - Array courses
    public static final String TAG_SUBJECT = "subject";            //Object from json2 - Array courses
    public static final String TAG_DESCRIPTION = "description";    //Object from json2 - Array courses
    public static final String txt_instructor = "Instructor: ";
    public static final String txt_length = "Length: ";
    public static final String txt_minutes = "minutes";

    //Course JSONArray's from json1 & json2 = null, for now.
    JSONArray Courses1 = null;
    JSONArray Courses2 = null;

    //Lists
    public ListView list1;
    public ListView list2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.lay_main);

        // Hashmap for ListView
         ArrayList<HashMap<String, String>> coursesList1 = new ArrayList<HashMap<String, String>>();
         ArrayList<HashMap<String, String>> coursesList2 = new ArrayList<HashMap<String, String>>();
        //Getting bundles 3 & 4, from MariposaTrainingActivity.class...
        Bundle bundle1 = getIntent().getExtras();
        String userName=bundle1.getString("UN");   //Getting the userName
        Bundle bundle2 = getIntent().getExtras();
        String password=bundle2.getString("PW");   //Getting the passord
        String UR = "UserName=";                   //String for build the url1, for the request json1.
        String QTE = "&";                          //String for build the url1, for the request json1.
        String PW = "Password=";                   //String for build the url1, for the request json1.
        //Building the URL to get the json1.
        String url1 = url0 + UR + userName + QTE + PW + password;

        // Creating JSON Parser instance (json1)
        JSONParser2 jParser1 = new JSONParser2();
        // getting JSON string from URL (json1)
        final JSONObject json1 = jParser1.getJSONFromUrl(url1);

        // Creating JSON Parser instance (json2)
        JSONParser2 jParser2 = new JSONParser2();
        // getting JSON string from URL (json2)
        final JSONObject json2 = jParser2.getJSONFromUrl(url2);                                         

                try {           
                    // Getting The Array "Courses" from json1 & json2   
                    Courses1 =json1.getJSONArray(TAG_COURSES1);
                    Courses2 = json2.getJSONArray(TAG_COURSES2);
                    int x = 1;
                    //LOOP FOR JSON1
                    for(int i = 0; i < Courses1.length(); i++){
                        //LOOP FOR JSON2
                        for(int ii = 0; ii < Courses2.length(); ii++){
                            JSONObject courses1 = Courses1.getJSONObject(i);
                            JSONObject courses2 = Courses2.getJSONObject(ii);

                            // Storing each json1 item in variable
                            int courseID1 = courses1.getInt(TAG_COURSEID1);
                            //Log.e("COURSEID1:", Integer.toString(courseID1));
                            String Rating1 = courses1.getString(TAG_RATING1);
                            int Status1 = courses1.getInt(TAG_STATUS1);
                            //Log.e("Status1:", Integer.toString(Status1));      //Put the actual value for Status1 in log.             

                            // Storing each json2 item in variable
                            int courseID2 = courses2.getInt(TAG_COURSEID2);
                            //Log.e("COURSEID2:", Integer.toString(courseID2));   //Put the actual value for CourseID2 in log
                            String Title2 = courses2.getString(TAG_TITLE);                      
                            String instructor2 = courses2.getString(TAG_INSTRUCTOR);
                            String length2 = courses2.getString(TAG_LENGTH);
                            String rating2 = courses2.getString(TAG_RATING2);
                            String subject2 = courses2.getString(TAG_SUBJECT);
                            String description2 = courses2.getString(TAG_DESCRIPTION);

                            //Status1 = 5 from json1; Incomplete, Status1 =-1 Complete 
                            if(courseID2 == courseID1){             
                            int x1 = x++; //Get the count for All values.
                            //Log.e("x=", Integer.toString(x1)); //Show the value in Logcat.
                            // Get pairs/odds.
                            int Num = x1 % 2;
                            //Log.e("Num=", Integer.toString(Num)); //
                            //Creating new HashMap
                            HashMap<String, String> map = new HashMap<String, String>();
                            HashMap<String, String> map2 = new HashMap<String, String>();
                            if(Num==1){

                                    map.put(TAG_COURSEID2, Integer.toString(courseID2));
                                    map.put(TAG_TITLE, Title2);
                                    map.put(txt_instructor, "Instructor: ");
                                    map.put(TAG_INSTRUCTOR, instructor2);
                                    map.put(txt_length, "Length: ");
                                    map.put(TAG_LENGTH, length2);
                                    map.put(txt_minutes, " minutes");
                                    map.put(TAG_RATING2, rating2);
                                    map.put(TAG_SUBJECT, subject2);
                                    map.put(TAG_DESCRIPTION, description2);

                                    //adding HashList to ArrayList
                                    coursesList1.add(map);
                            }
                            if(Num==0)
                            {

                                    map2.put(TAG_COURSEID2, Integer.toString(courseID2));
                                    map2.put(TAG_TITLE, Title2);
                                    map2.put(txt_instructor, "Instructor: ");
                                    map2.put(TAG_INSTRUCTOR, instructor2);
                                    map2.put(txt_length, "Length: ");
                                    map2.put(TAG_LENGTH, length2);
                                    map2.put(txt_minutes, " minutes");
                                    map2.put(TAG_RATING2, rating2);
                                    map2.put(TAG_SUBJECT, subject2);
                                    map2.put(TAG_DESCRIPTION, description2);

                                    //adding HashList to ArrayList
                                    coursesList2.add(map2);
                             }
                            }//if
                        }//for2 (json2)
                    } //for1 (json1)                
                }//Try
                    catch (JSONException e) {
                    e.printStackTrace();                
                    }

        ListAdapter adapter2 = new SimpleAdapter(this, coursesList2,
                R.layout.list_courses_2,
                new String[] { TAG_COURSEID2, TAG_TITLE, txt_instructor, TAG_INSTRUCTOR, txt_length, TAG_LENGTH, txt_minutes, TAG_RATING2, TAG_SUBJECT, TAG_DESCRIPTION }, new int[] {
                        R.id.txt_courseid_r2, R.id.txt_title_r2, R.id.txt_text_instructor_r2, R.id.txt_instructor_r2, R.id.txt_text_length_r2,R.id.txt_length_r2, R.id.txt_text_minutes_r2,R.id.txt_rating_r2, R.id.txt_topic_r2, R.id.txt_description_r2 });
        setListAdapter(adapter2);
        colectorXML2();
        list2.setAdapter(adapter2);

        list2.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                // getting values from selected ListItem
                String courseID = ((TextView) view.findViewById(R.id.txt_courseid_r2)).getText().toString();
                String Title = ((TextView) view.findViewById(R.id.txt_title_r2)).getText().toString();
                String instructor = ((TextView) view.findViewById(R.id.txt_instructor_r2)).getText().toString();
                String length = ((TextView) view.findViewById(R.id.txt_length_r2)).getText().toString();
                String rating = ((TextView) view.findViewById(R.id.txt_rating_r2)).getText().toString();
                String subject = ((TextView) view.findViewById(R.id.txt_topic_r2)).getText().toString();
                String description = ((TextView) view.findViewById(R.id.txt_description_r2)).getText().toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(), SingleListItem.class);

                in.putExtra(TAG_COURSEID2, courseID);
                in.putExtra(TAG_TITLE, Title);
                in.putExtra(TAG_INSTRUCTOR, instructor);
                in.putExtra(TAG_LENGTH, length);
                in.putExtra(TAG_RATING2, rating);
                in.putExtra(TAG_SUBJECT, subject);
                in.putExtra(TAG_DESCRIPTION, description);
                startActivity(in);
            }
        });//lv.SetOnclickListener

        ListAdapter adapter = new SimpleAdapter(this, coursesList1,
                R.layout.list_courses,
                new String[] { TAG_COURSEID2, TAG_TITLE, txt_instructor, TAG_INSTRUCTOR, txt_length, TAG_LENGTH, txt_minutes, TAG_RATING2, TAG_SUBJECT, TAG_DESCRIPTION }, new int[] {
                        R.id.txt_courseid, R.id.txt_title, R.id.txt_text_instructor, R.id.txt_instructor, R.id.txt_text_length,R.id.txt_length, R.id.txt_text_minutes,R.id.txt_rating, R.id.txt_topic, R.id.txt_description });
        colectorXML();      
        list1.setAdapter(adapter);

        // Launching new screen on Selecting Single ListItem
        list1.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                // getting values from selected ListItem
                String courseID = ((TextView) view.findViewById(R.id.txt_courseid)).getText().toString();
                String Title = ((TextView) view.findViewById(R.id.txt_title)).getText().toString();
                String instructor = ((TextView) view.findViewById(R.id.txt_instructor)).getText().toString();
                String length = ((TextView) view.findViewById(R.id.txt_length)).getText().toString();
                String rating = ((TextView) view.findViewById(R.id.txt_rating)).getText().toString();
                String subject = ((TextView) view.findViewById(R.id.txt_topic)).getText().toString();
                String description = ((TextView) view.findViewById(R.id.txt_description)).getText().toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(), SingleListItem.class);

                in.putExtra(TAG_COURSEID2, courseID);
                in.putExtra(TAG_TITLE, Title);
                in.putExtra(TAG_INSTRUCTOR, instructor);
                in.putExtra(TAG_LENGTH, length);
                in.putExtra(TAG_RATING2, rating);
                in.putExtra(TAG_SUBJECT, subject);
                in.putExtra(TAG_DESCRIPTION, description);
                startActivity(in);
            }
        });//lv.SetOnclickListener       
    }//onCreate

    private void colectorXML() {
        list1 = (ListView)findViewById(android.R.id.list);
    }
    private void colectorXML2() {
        list2 =(ListView)findViewById(R.id.list2);  
    }   
}// Activity 
```

只需输入您的方法和您的 json 信息，在这种情况下，您只需处理 1 个 json，剩下的就做吧……希望这能给您一些想法。

# css - CSS菜单-当焦点在子节点上时父节点中的活动链接改变颜色

> ID：10495819
> 
> 赞同：0
> 
> 时间：2012-05-08T09:17:11.693
> 
> 标签：css, menu

我有一个 CSS 垂直菜单，我创建的代码如下。（测试页面位于[http://www.candyundies.com/test.php](http://www.candyundies.com/test.php)）。

我的问题是，当您将鼠标悬停在子菜单上时，父节点中突出显示的“li”正在变回非悬停颜色（#297BCE）。我希望它像悬停时一样保持白色（#FFF）。我一直在疯狂地试图找出我做错了什么。有什么我想念的想法吗？

```
<style>
#categories {
 background-color:#297BCE;
 width:214px;
 height:37px;
  -moz-border-radius-topright: 8px;
  border-top-right-radius: 8px;
  -moz-border-radius-topleft: 8px;
  border-top-left-radius: 8px;
  position:absolute;
  top:67px;
  padding-top:10px;
  z-index:3;
  font: bold 15px Arial, sans-serif; color:#FFFFFF;
 }
#navigation {  position:absolute;font-size:0.75em; width:214px;top:115px;}
#navigation ul {margin:0px; padding:0px;}
#navigation li {list-style: none;} 
/* FIRST LEVEL TEXT/BACKGROUND/BORDER SETTINGS */
ul.top-level {background:#fff;}
ul.top-level li {
 font-family: arial, sans-serif;
 font-size:14px;
 font-weight:bold;
 border:1px solid #D2D2D2; border-color:#fff #A5A5A5 #A5A5A5 #A5A5A5;
background:#fff url(images/arrow.gif) no-repeat center right;
}
/* FIRST LEVEL TEXT COLOR */
#navigation a {
 display:block;
 color: #297BCE;
 cursor: pointer;
 line-height: 25px;
 text-indent: 10px;
 text-decoration:none;
 width:214px;
}
/* FIRST LEVEL TEXT HOVER COLOR */
#navigation a:hover{
 color: #FFF;
 text-decoration:none;
}
/* FIRST LEVEL HOVER BACKGROUND COLOR */
#navigation li:hover {
 background-color:#297BCE;
 position: relative;
}
#navigation li{
 background-color:#FFF;
 position: relative;
}
/* SECOND LEVEL TEXT SETTINGS */
ul.sub-level li a{
    font-family: arial, sans-serif;
    font-size:12px;
    font-weight:normal;
    background-color:#FFF;
}
ul.sub-level {
    display: none;
}
li:hover .sub-level {
    position: absolute;
    display: block;
    background: #FFF;
    border: #A5A5A5 solid;
    border-width: 1px;
/* set the sub menu flyout position here */
    left: 207px;
    top: -15px;
    z-index:10;
}
/* SECOND LEVEL TEXT HOVER COLOR */
#navigation ul li ul li a:hover{
 color:#f90;
 background-color:#FFF;
 text-decoration:underline;
}
#navigation ul ul{
    padding-top:5px;
    padding-bottom:5px;
    border-radius: 8px;
    -moz-border-radius: 8px;
    -webkit-border-radius: 8px;
     box-shadow: 0px 3px 10px #B0B0B0;
}
#navigation ul li ul li a{
 text-indent: 20px;
 line-height: 17px;
}
ul.sub-level li {
    background:#fff;
    border:1px solid #D2D2D2;
    border-color:#FFF #FFF #FFF #FFF;
    float:left;
}
</style>

<div id="categories">See All Categories</div>
<div id="navigation">
    <ul class="top-level">
        <li><a href="#">Home</a>
            <ul class="sub-level">
                <li><a href="#">Sub Menu Item 1</a></li>
                <li><a href="#">Sub Menu Item 2</a></li>
                <li><a href="#">Sub Menu Item 3</a></li>
                <li><a href="#">Sub Menu Item 3</a></li>
            </ul>
        </li>
        <li>
            <a href="#">FAQ</a>
            <ul class="sub-level">
                <li><a href="#">Sub Menu Item 1</a></li>
                <li><a href="#">Sub Menu Item 3</a></li>
            </ul>
        </li>
        <li>
            <a href="#">News</a>
            <ul class="sub-level">
                <li><a href="#">Sub Menu Item 1</a></li>
                <li><a href="#">Sub Menu Item 2</a></li>
                <li><a href="#">Sub Menu Item 3</a></li>
            </ul>
        </li>
    </ul>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:25:47.773

当第一级 li 悬停时，您只需要将白色应用于直接子链接。所以使用子选择器语法 (>)

将此声明添加到您的 CSS：

```
#navigation li:hover > a{
    color:#fff;
} 
```

见：http: [//jsfiddle.net/MVKLC/](http://jsfiddle.net/MVKLC/)
实施

# c++ - C++ Qt：无法编译 GoldenDict

> ID：10495832
> 
> 赞同：0
> 
> 时间：2012-05-08T09:18:04.230
> 
> 标签：c++, qt, dictionary, compilation, locale

我已经从网站上下载了 GoldenDict 的源代码并使用了 Git 存储库，但我无法编译它。缺少一些我不了解它们与程序的关系的语言环境文件。该网站表示不需要第三方库。

我正在尝试使用 Visual Studio 2010 编译它。

我能做些什么来获取这些语言环境文件？请检查错误信息：

```
11:13:10: Running build steps for project goldendict...
11:13:10: Configuration unchanged, skipping qmake step.
11:13:10: Starting: "C:\QtSDK\QtCreator\bin\jom.exe" 
    C:\QtSDK\QtCreator\bin\jom.exe -f Makefile.Debug
Error: dependent 'locale\ru_RU.qm' does not exist.
jom 1.0.8 - empower your cores

jom: D:\GoldenDictSrc\goldendict-build-desktop-Qt_4_8_1_for_Desktop_-_MSVC2010__Qt_SDK__Debug\Makefile [debug] Error 2
11:13:10: The process "C:\QtSDK\QtCreator\bin\jom.exe" exited with code 2.
Error while building project goldendict (target: Desktop)
When executing build step 'Make' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T11:20:50.490

先在项目目录调用lrelease

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:44:52.200

我也遇到过这个问题并解决了。

您可以在第一次打开 GoldenDict 项目文件时禁用**Shadow build**功能，也可以稍后通过单击Qt Creator 左侧面板中的**Projects图标禁用此功能，取消选中****Shadow build**选项。

最良好的问候，

![GoldenDict 项目构建设置](../Images/ec86773575619a408d7d0e34969f3a2f.png)

# magento - MAGENTO - 不输出静态页面内容

> ID：10495835
> 
> 赞同：1
> 
> 时间：2012-05-08T09:18:05.467
> 
> 标签：magento, static

我在安装 Magento 时遇到了静态页面的大问题。

我有几个商店设置。例如，store1、store2、store3... 存储 1，静态页面似乎工作正常。存储 2 + 3，元素 'col-main' 始终为空。

我已经调试了页面控制器。页面内容在数据库中，但是当它为页面渲染布局时，内容并没有添加到输出中！

我不确定我还能做什么......有人能解释为什么会发生这种情况吗？

非常感谢肖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:29:08.867

您的页面内容是否来自 CMS 页面？我建议确保页面的“范围”设置正确，以允许它们显示在您的商店中。您可以通过转到 CMS -> 页面来执行此操作，选择您的页面之一，然后在“页面信息”选项卡上确保“商店视图”多选已选择所有适用的商店视图。

如果刷新后页面仍然没有显示，请在此处回复，我会帮助您进一步调试。

# crystal-reports - 水晶报表首次显示空白页

> ID：10495838
> 
> 赞同：0
> 
> 时间：2012-05-08T09:18:15.827
> 
> 标签：crystal-reports, crystal-reports-2008

我在我的计算机（Win XP）和我的服务器（Win Server 2003）中安装了[cr2008sp1.zip 。](https://smpdl.sap-ag.de/~sapidp/012002523100007597732011E/cr2008sp1.zip)在我的电脑中，报告在 VS2008 和 IIS 中运行良好。但是在我的服务器中，reportviewer 出现错误：显示空白页，异常之处在于第一个显示为空白，但导航到下一页，报告可见，然后我导航到返回第 1 页，报告仍然正常可见。它只隐藏在第一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:24:14.187

这是同样的问题，一些建议和他的案例的解决方案（在我看来和你一样）

[http://forums.asp.net/t/1253273.aspx/1](http://forums.asp.net/t/1253273.aspx/1)

最终解决方案： *“我找到了解决方案，我抑制了报告标题并且空白页消失了......”*

VS2008 和 IIS。报表查看器是 Windows 窗体版本还是 Web 查看器之一？

如果您使用的是网络报表查看器，则问题可能与 IE 有关。Windows Server 2003 的 IE 版本可能与 XP 中的设置不同

# java - 如何更改对象在 spring-data/hibernate/rest 中的返回方式

> ID：10495839
> 
> 赞同：2
> 
> 时间：2012-05-08T09:18:27.367
> 
> 标签：java, spring, hibernate, orm, spring-data-jpa

我正在使用 Spring-data Hibernate 等开发 REST 应用程序。我已经设置了所有基本操作，但现在我想做一些具体的事情。当我检索具有指向我的数据库中另一个表的外键的项目列表时，休眠将返回该外键的整行。例如：

```
[ {
  "id":1, 
  "school": {"id":1, "name":"De regenboog", password":"800e30e9bb3b82ce955a127650d835d0", "street":"Plantaanstraat", "number":"2", "zipCode":"1234AS", "city":"Amsterdam", "contactName":"Arends", "contactPhoneNumber":"06-45648466", "contactEmail":"arends@regenboog.nl"}, 
  "name":"Groep", 
  "dateCreated":"2012-04-25"
  }
] 
```

（顺便说一下，这些都是虚构的数据）

现在的问题是不希望学校全部归还。我只想显示school_id。我在网上搜索并阅读了一些关于“服务级别映射”的内容，但我找不到任何示例。我用一个构建了我的应用程序

控制器 -> 服务 -> dao -> 存储库

设置。

我希望你们能帮助我！（如果您还需要更多源代码，请告诉我）。

非常感谢

**编辑**

我要补充的是，我的 MySql 表如下所示：

身份证 | 学校 ID | 姓名 | 创建日期

所以我想要返回的只是普通的 school_id 而不是目标学校（在这种情况下）

**EDIT2** 我正在处理@Dandy 答案，我想展示我现在拥有的代码：

```
@ManyToOne
@JoinColumn(name = "SCHOOL_ID")
private School school;

@Column(name = "SCHOOL_ID", insertable = false, updatable = false)
private long schoolId;

public long getSchoolId() {
    return schoolId;
}

public void setSchoolId(long schoolId) {
    this.schoolId = schoolId;
}

public School getSchool() {
    return school;
}

public void setSchool(School school) {
    this.school = school;
} 
```

当我像 Danny 建议的那样更改代码时，我得到了我想要的结果......几乎。如果我现在运行查询，这就是我得到的：

```
[ {
  "id":1, 
  "school": {"id":1, "name":"De regenboog", password":"800e30e9bb3b82ce955a127650d835d0", "street":"Plantaanstraat",  "number":"2", "zipCode":"1234AS", "city":"Amsterdam", "contactName":"Arends", "contactPhoneNumber":"06-45648466", "contactEmail":"arends@regenboog.nl"},    
  "schoolId": 1  
  "name":"Groep", 
  "dateCreated":"2012-04-25"
  }
] 
```

问题是我想禁用`school`这个特定查询。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T20:30:11.340

几天过去了，我找到了一个适合我的解决方案。我做了一些新的类 IE SchoolDTO（DTO 代表数据传输对象）。在这些类中，我只将我想要显示的值添加到前端。IE：

```
public class ClassesDTO {

    private long id;
    private long schoolId;
    private String schoolName;
    private String name;
    private Date dateCreated;

    //Getters and setters...
} 
```

我没有显示整个 School 对象，而是只包括了它的 ID 和 NAME。在这个类里面只有 getter 和 setter。然后我制作了一个映射器，它将原始类映射到新的 DTO 类。IE。

```
public ClassesDTO mapToDTO(Classes classes) {
    ClassesDTO classesDTO = new ClassesDTO();
    classesDTO.setId(classes.getId());
    classesDTO.setSchoolId(classes.getSchool().getId());
    classesDTO.setSchoolName(classes.getSchool().getName());
    // etc... 
```

然后在我的服务层中，我将新映射的 DTO 对象返回给我的控制器，而不是普通的 Classes 对象。

实际上就是这样。如果我需要返回 a `java.util.List`，我也有一个映射，如果我想将数据插入我的数据库而不需要声明整个学校，我也有一个映射。我将展示一个简单的示例，只是有人想知道我是如何做到的：

```
public Classes mapFromDTOCreate(ClassesCreateDTO classesCreateDTO){
    Classes classes = new Classes();
    classes.setSchool(schoolDAO.findSchoolById(classesCreateDTO.getSchoolId()));
    classes.setName(classesCreateDTO.getName());
    classes.setDateCreated(classesCreateDTO.getDateCreated());
    return classes;
} 
```

这个新的类对象我可以安全地返回到我的 DAO，hibernate 可以将它保存到我的数据库中，因为 ORM（对象关系映射）。

如果有人有任何问题，请告诉我！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T10:34:55.260

目前，`school`可能使用`<many-to-one>`关系进行映射。

```
<many-to-one name="school" class="School">
    <column name="SCHOOL_ID" type="string" />
</many-to-one> 
```

您可以为 SCHOOL_ID 再添加一个字段。

`<property name="schoolId" column="SCHOOL_ID" type="string" insert="false" update="false"/>`

注意：`insert="false" update="false"`如果一个列被多次映射，则需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T09:55:56.077

如果您使用（默认）Jackson 映射器进行 JSON 序列化，`@JsonIgnore`如果您不希望它们被序列化，则可以在实体中注释属性。

# php - 通过关联计数订购 DQL 连接

> ID：10495844
> 
> 赞同：5
> 
> 时间：2012-05-08T09:18:46.000
> 
> 标签：php, sql, doctrine-orm, dql

我有一个像这样的 DQL 查询：

```
$dql = "SELECT p, count(u.id) as ucnt FROM IAA\Entity\Project p " .
       "JOIN p.likedByUsers u ORDER BY ucnt";
$query = $this->_em->createQuery($dql); 
```

问题是，我怎样才能坚持按计数排序，但不能得到结果？我只想获取按计数排序的项目，而不是 [project] 和 [ucnt] 的数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T12:54:39.420

从 Doctrine 2.2 开始[（来源）](http://www.michelsalib.com/2012/03/doctrine2-ninja-with-the-hidden-keyword/)：

```
SELECT a, COUNT(b.id) AS HIDDEN c [...] ORDER BY c 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-08T09:23:02.580

尝试：

```
$dql = "SELECT p FROM IAA\Entity\Project p " .
       "JOIN p.likedByUsers u ORDER BY count(u.id)";
$query = $this->_em->createQuery($dql); 
```

# javascript - 转义引号问题

> ID：10495852
> 
> 赞同：-1
> 
> 时间：2012-05-08T09:19:20.923
> 
> 标签：javascript, quotes

在 PHP 中，我创建了这个对象，并将其转换为 JSON 并发送到 JS 客户端：

```
$arr = array("img"=>"http://www.myDomain.com/imgs/pic_1.jpg","data"=>"<p>This is a paragraph <a href='#' onclick='MyFunction('myParameter');'>My Link</a></p>"); 
```

我认为我在使用引号时做错了（检查函数调用），但目前，一旦注入我的 HTML，MyFunction 就永远不会被调用。在这种情况下，哪种是逃避引号的正确方法？

**编辑**：这是生成的 JSON：

```
{"img":"http:\/\/www.myDomain.com\/imgs\/pic_1.jpg","data":"<p>Paragraph: <a href='#' onclick='localFunction('parameter');'>Link<\/a><\/p>","length":2} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:22:45.373

您在`onclick='MyFunction('myParameter');'`. 改用转义双引号：

```
onclick=\"MyFunction('myParameter');\" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T09:22:53.763

```
<a href='#' onclick='MyFunction('myParameter');'> 
```

您在“onclick”中有单引号，但“onclick”本身用单引号分隔。

尝试：

```
$arr = array("img"=>"http://www.myDomain.com/imgs/pic_1.jpg","data"=>"<p>This is a paragraph <a href='#' onclick=\"MyFunction('myParameter');\">My Link</a></p>"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T09:24:04.093

您对 JSON 的提及是一个红鲱鱼。

看代码。我已经标记了属性值的开始和结束：

```
 onclick='MyFunction('myParameter');'>
         ^           ^ 
```

您要么需要使用不同的引号，这些引号必须被转义，因为它们位于由该类型引号分隔的 PHP 字符串中：

```
 onclick='MyFunction(\"myParameter\");'> 
```

… 或者您需要使用 HTML 实体：

```
 onclick='MyFunction(&quot;myParameter&quot;);'> 
```

* * *

不过一般来说，您应该完全避免内在的事件属性，而改用 JavaScript 事件绑定（通常使用事件委托，因此您无需在每次向 DOM 添加新元素时都绑定事件）。

# objective-c - 从应用程序打开 prezi

> ID：10495853
> 
> 赞同：2
> 
> 时间：2012-05-08T09:19:23.770
> 
> 标签：objective-c, ios

我正在尝试从我的应用程序中打开 prezi.com 演示文稿。

```
NSURL *url = [ [ NSURL alloc ] initWithString: @"prezi://open?oid=ftv9hvziwqi2" ];
[[UIApplication sharedApplication] openURL:url]; 
```

这段代码会打开应用程序，但不会打开演示文稿。当您在 ipad 上访问此链接时，您会看到一个带有打开演示文稿的链接的页面。

[http://prezi.com/ftv9hvziwqi2/coca-cola-companya/](http://prezi.com/ftv9hvziwqi2/coca-cola-companya/)

但我可以找出在 prezi 应用程序中打开演示文稿的正确 URL。而且我在 prezi 网站上也找不到任何文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:16:18.777

看起来 prezi 应用程序没有可公开访问的 url 方案（即 prezi:// url）：

[http://community.prezi.com/prezi/topics/does_ipad_prezi_viewer_have_a_url_scheme_so_other_apps_can_launch_it_and_open_a_specific_prezi_via](http://community.prezi.com/prezi/topics/does_ipad_prezi_viewer_have_a_url_scheme_so_other_apps_can_launch_it_and_open_a_specific_prezi_via)

如果您查看网络链接的结构（确实可以正确打开演示文稿），最后会出现“&details=XYZ=”字段，其中 XYZ 是几百个随机字符。

您可以尝试输入完整的网址，但我怀疑这将是一个脆弱的解决方案，因为它可能是基于您的用户帐户和/或您访问它的时间的随机数。

最好的办法可能是在上面链接的社区委员会上提出另一个请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T09:56:05.857

我也是，对此很感兴趣，所以我稍微研究了一下。

如果您在 iPad 上访问超链接 (http://prezi.com/ftv9hvziwqi2/coca-cola-companya/)，它会为您提供在 Prezi 应用程序中打开演示文稿所需的链接。

就是这个：-

```
prezi://open?oid=ftv9hvziwqi2&details=eyJzaXplIjogMTIzMTE2MywgInRva2VuIjogIiIsICJ0aHVtYl91cmwiOiAiaHR0cDovLzA0MDEuc3RhdGljLnByZXppLmNvbS9wcmV2aWV3LzgvOS83L2M3M2U3NTU5YTE3ZjdkMjgyMjc1NGIwOWVkNmY2ZDJhNjNkZmFfMV92OTkucG5nIiwgImF1dGhvciI6ICJBbm5pZSBOYW0iLCAidGl0bGUiOiAiQ29jYSBDb2xhIENvbXBhbnkuQSIsICJsYXN0bW9kIjogIjA4IEFwcmlsIDIwMTIiLCAib2lkIjogImZ0djlodnppd3FpMiIsICJkZXNjIjogIkludGVybmF0aW9uYWwgbWFuYWdlbWVudCBwbGFuIn0= 
```

原来有第二个参数叫做“details”，它是base64编码的。当我解码它时，细节如下所示：-

```
{"size": 1231163, "token": "", "thumb_url": "http://0401.static.prezi.com/preview/8/9/7/c73e7559a17f7d2822754b09ed6f6d2a63dfa_1_v99.png", "author": "Annie Nam", "title": "Coca Cola Company.A", "lastmod": "08 April 2012", "oid": "ftv9hvziwqi2", "desc": "International management plan"} 
```

我猜这个 'details' 参数是必需的，所以尝试创建自己的 base64 编码。祝你好运！

**编辑：**一个更简单的可能性是将用户引导到 safari。这样他们仍然可以打开 Prezi 应用程序，而您不必自己创建任何奇怪的细节。

```
NSURL *url = [ [ NSURL alloc ] initWithString: @"http://prezi.com/ftv9hvziwqi2/coca-cola-companya/" ];
[[UIApplication sharedApplication] openURL:url]; 
```

# testing - 如何测试 IP 地址地理定位服务

> ID：10495855
> 
> 赞同：4
> 
> 时间：2012-05-08T09:19:41.350
> 
> 标签：testing, geolocation, ip-geolocation

有一个 IP 地址地理定位服务会根据 IP 地址告诉查看者所在的城市或国家/地区。我们可能会根据此定位服务的结果在菜单上设置默认国家/地区。

我想知道如何对此进行测试，例如我在泰国，但想通过刺激香港 IP 地址来测试它，以便我可以查看该网站是否根据地理位置服务提供适当的反馈。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T09:23:48.103

尝试使用 socks 代理[http://sockslist.net/](http://sockslist.net/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T12:48:01.207

我们验证 IP 地理定位服务的方式是通过[geoedge 的代理网络](http://www.geoedge.com/)。那里还有更多这样的网络，但我们发现它们具有最高的地理覆盖范围。

# jquery - MVC中jqPlot和JSON数据应该如何设置控件？

> ID：10495860
> 
> 赞同：1
> 
> 时间：2012-05-08T09:19:59.320
> 
> 标签：jquery, asp.net-mvc, json, jqplot

我目前是第一次使用 jqPlot，发现很难找到有关如何设置条形图控件的任何信息。到目前为止，我已经能够设置折线图和饼图示例，但条形图难住了我。

```
 public ActionResult PieChart()
    {
        return View();
    }

    public ActionResult PieChartJSON()
    {
        List<PieChartData> sampleData = new List<PieChartData>();
        PieChartData test = new PieChartData();
        PieChartData test2 = new PieChartData();
        PieChartData test3 = new PieChartData();
        PieChartData test4 = new PieChartData();
        PieChartData test5 = new PieChartData();

        test.Label = "tara";
        test.Value = 3;
        sampleData.Add(test);

        test2.Label = "becky";
        test2.Value = 5;
        sampleData.Add(test2);

        test3.Label = "gareth";
        test3.Value = 3;
        sampleData.Add(test3);

        test4.Label = "mark";
        test4.Value = 8;
        sampleData.Add(test4);

        test5.Label = "james";
        test5.Value = 8;
        sampleData.Add(test5);

        return Json(sampleData, JsonRequestBehavior.AllowGet);
    } 
```

这是我创建的饼图的示例。如果可能的话，有人可以给我一个应该如何格式化条形图 JSON 数据的示例吗？

这是正在输入 JSON 数据的视图：

```
 jQuery(document).ready(function () {
    urlDataJSON = '/Home/PieChartJSON';

    $.getJSON(urlDataJSON, "", function (data) {
        var dataSlices = [];
        var dataLabels = "";

        $.each(data, function (entryindex, entry) {
            dataSlices.push(entry['Value']);
            dataLabels = dataLabels + entry['Label'];
        });
        options = {
            legend: { show: true },
            title: 'Poll Results',
            seriesDefaults: {
                // Make this a pie chart.
                renderer: jQuery.jqplot.PieRenderer,
                rendererOptions: {
                    // Put data labels on the pie slices.
                    // By default, labels show the percentage of the slice.
                    showDataLabels: true
                }
            }
        }
        var plot = $.jqplot('pieChart', [dataSlices], options);
    });
}); 
```

这是我在网页上得到的图表：

编辑：嵌入屏幕截图不起作用。所以我会附上它的链接。 [http://imgur.com/xwo3E](http://imgur.com/xwo3E)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T11:14:44.493

我在这里看不到你在做什么`dataLabels`。另外我猜你不喜欢你的饼图的地方是你的图例没有显示标签，对吧？

我认为您应该以不同的方式设置数据。看看我[在此处提供](http://jsfiddle.net/Boro/NYewy/)的与使用饼图相关的其他示例之一。实际上，您的问题归结为对数据的每一行设置一对，第一个标签，然后是值，就像在链接代码中一样：

```
var row = [percentage, count];
data.push(row); 
```

因此，在您的情况下，您将拥有：

```
var dataSlices = [];
$.each(data, function (entryindex, entry) {
    var row = [entry['Label'], entry['Value']];
    dataSlices.push(row);
}); 
```

# codeigniter - CodeIgniter 中 recaptcha 安装的问题

> ID：10495862
> 
> 赞同：0
> 
> 时间：2012-05-08T09:20:05.620
> 
> 标签：codeigniter, recaptcha

我已经尝试在我的 Codeigniter 应用程序中实现 recaptcha，但它抛出了一个错误。

我已经加载了我的助手：

```
$this->load->helper('recaptchalib_helper'); 
```

我的控制器：

```
$publickey = $this->config->item('recaptchakey');
$data['recaptchakey'] = $publickey;
$return = recaptcha_check_answer($publickey, $_SERVER["REMOTE_ADDR"], $this->input->post("recaptcha_challenge_field"), $this->input->post("recaptcha_response_field"));

if($this->form_validation->run() == FALSE){
   $this->load->view('form', $data);
} else {            
   if(!$return->is_valid) {
      echo 'failed';
      $this->load->view('form', $data);
} else {
      echo 'success';
      $this->load->view('form', $data);
} 
```

反复出现的错误是“invalid-site-private-key”和“incorrect-captcha-sol”——有人能告诉我哪里出错了吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:12:59.847

`invalid-site-private-key`与您在配置文件中输入的数据有关。在此处阅读更多信息：[https ://developers.google.com/recaptcha/docs/verify](https://developers.google.com/recaptcha/docs/verify)

这`incorrect-captcha-sol`与您的视图的构建方式有关。阅读更多：[在 reCAPTCHA 方面需要帮助 - 不断收到不正确的验证码溶胶](https://stackoverflow.com/questions/1264703/need-help-with-recaptcha-keep-getting-incorrect-captcha-sol)

# java - 如何在 JEditorPane 中显示可点击的链接

> ID：10495867
> 
> 赞同：5
> 
> 时间：2012-05-08T09:20:27.293
> 
> 标签：java, swing, netbeans, jeditorpane

我正在尝试在 JEditorPane 中显示可点击链接的列表。这是我的代码：

```
import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.event.HyperlinkEvent;
import javax.swing.event.HyperlinkListener;
import javax.swing.text.BadLocationException;
import javax.swing.text.Document;
import javax.swing.text.Style;
import javax.swing.text.html.HTMLEditorKit;
import javax.swing.text.html.StyleSheet;

public class GUI extends JFrame{
    JEditorPane editorpane=new JEditorPane();
    //this is the constructor
    GUI(){
        JFrame frame=new JFrame("Frame");

        frame.add(editorpane);
        JScrollPane scroll=new JScrollPane(editorpane);

        editorpane.setContentType("text/html");
        editorpane.setEditable(false);
        editorpane.setText("<html><body>Test <a href='http://www.java.net'>"
+ "www.java.net</a></body></html>");
        StyleSheet css = ((HTMLEditorKit)
        editorpane.getEditorKit()).getStyleSheet();
        Style style = css.getStyle("body");
        editorpane.addHyperlinkListener(new HyperlinkListener() {
        public void hyperlinkUpdate(HyperlinkEvent e) {
        if (e.getEventType() ==
        HyperlinkEvent.EventType.ACTIVATED) {
        System.out.println("Open browser: " + e.getURL());
        }
        }
        });
        frame.setSize(512, 342);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().add(scroll);
        frame.show();
    }
    public void append(String s) {
    try{
        Document doc = editorpane.getDocument();
        doc.insertString(doc.getLength(), "\n", null);
        doc.insertString(doc.getLength(), s, null);

    }
    catch(BadLocationException exc){
    }
    }
    //main method
    public static void main(String args[]){

    GUI gui=new GUI();
    gui.append("<html><body>Test <a href='http://www.java.net'>"
+ "www.java.net</a></body></html>");

    }
} 
```

当我在构造函数中使用 setText() 方法时，它显示了一个可点击的链接，但是当我尝试使用 append() 显示附加链接时；方法它显示 html 标签以及文本，它不会使我的 url 成为超链接。任何想法，为什么它不能与附加一起使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T09:31:44.213

使用 HTMLEditorKit 的任一方法

```
public void insertHTML(HTMLDocument doc, int offset, String html,
               int popDepth, int pushDepth,
               HTML.Tag insertTag) 
```

或者 HTMLDocument 的方法

```
public void insertAfterEnd(Element elem, String htmlText)
public void insertAfterStart(Element elem, String htmlText)
public void insertBeforeStart(Element elem, String htmlText
public void insertBeforeEnd(Element elem, String htmlText) 
```

# java - 使用 jpa、jasper 报告的不同查询

> ID：10495872
> 
> 赞同：0
> 
> 时间：2012-05-08T09:20:40.523
> 
> 标签：java, jpa, jasper-reports

我正在使用`ireport-4.5.0,spring3.0.5RELEASE,jpa2`. 我有一个名为 User 的实体类，其属性如下 userId、userName、password.I

通过将字段指定为这三个属性名称来设计 jrxml。如果我将 jpa 查询指定为 From USer，那么它可以正常工作并给出结果。但我想要用户名的不同值（用户名列也允许重复值）所以我将 jpaQuery 设为

```
SELECT userId,DISTINCT(userName),password FROM User 
```

然后我没有得到结果。查询有什么问题。

嗨，我在这里给出我正在使用的代码

```
public User getUsers() throws Exception{
 Query uQuery = entityManager.createQuery("SELECT u.userId,u.userName,u.password FROM User u GROUP BY u.userId,u.userName,u.password");
       List <User>listOfUsers = uQuery.getResultList();
       if (listOfUsers == null) {
           throw new ResourceNotFound();
        }
       for (Iterator iterator = listOfUsers.iterator(); iterator.hasNext();) {
            User userList = (User)iterator.next();

        }

       return userList; 
```

在这里，我得到 ClassCastException：java.lang.String 无法转换为 User。它在 for 循环语句中显示此异常。我是 JPA 的新手。您能否解释一下如何迭代该对象列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:23:34.837

您不能将 DISTINCT 放在 JPQL 或 SQL 中的单个列上。

您很可能需要使用 group by，

SELECT u.userId,u.userName,u.password FROM User u group by u.userId, u.userName, u.password

# ruby-on-rails - 如何在具有正确时间的模型中使用 before_validation 过滤器覆盖 datetime_select？

> ID：10495873
> 
> 赞同：0
> 
> 时间：2012-05-08T09:20:42.970
> 
> 标签：ruby-on-rails, ruby-on-rails-3, datetime, timezone

我有一个包含两个字段日期和时间的表单，它们映射到一个数据库表列时间（日期时间）。字段日期是 datepicker 的字符串字段，时间是 datetime_select。由于我不在 UTC 时区，我必须在我的 set_date 方法中减去两个小时。

我怎样才能以更通用的方式实现这一点？

```
# Model
class Task < ActiveRecord::Base
  before_validation :set_date

  def set_date
    if self.date
      begin
        date = Date.strptime(self.date, '%d.%m.%Y')
      rescue
        errors.add(:date, "invalid date")
        return false
      end
      # can not get minutes by self.time.minute 
      self.time = DateTime.new(date.year, date.month, date.mday, self.time.hour.to_i, self.time.strftime("%M").to_i)
      # have to set local time manually
      self.time = self.time - 2.hours
    end
  end

# Form
<%= simple_form_for(@task) do |f| %>
  <%= f.input :date, :as => :string, :input_html => { :class => 'asdatepicker'} %>    
  <%= f.input :time, :as => :datetime, :minute_step => 5,  :input_html => { :class => 'input-small'}  %>
...

# application.rb
config.time_zone = 'Berlin'
config.active_record.default_timezone = :local 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:07:46.857

您可以像这样使用 [in_time_zone 方法](http://api.rubyonrails.org/classes/DateTime.html#method-i-in_time_zone)：

```
self.time = DateTime.new(2012, 1, 1, 10, 0, 0).in_time_zone("Mid-Atlantic")
# => Sun, 01 Jan 2012 08:00:00 GST -02:00 
```

您可以使用 查找所有时区`rake time:zones:all`。

问候， 多里安

# c# - 比较 2 个字符串

> ID：10495876
> 
> 赞同：8
> 
> 时间：2012-05-08T09:20:59.650
> 
> 标签：c#, asp.net, .net

我有以下两个字符串：

```
String A: Manchester United
String B: Manchester Utd 
```

两个字符串的含义相同，但包含不同的值。

我如何比较这些字符串以获得“匹配分数”，例如，在这种情况下，第一个单词相似，“曼彻斯特”，第二个单词包含相似的字母，但位置不正确。

在我提供 2 个字符串后，是否有任何简单的算法可以返回“匹配分数”？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T09:25:18.837

您可以计算两个字符串之间的[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)，如果它小于某个值（您必须定义），您可能会认为它们非常接近。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T11:14:01.920

我需要做这样的事情并使用 Levenshtein 距离。

我将它用于 SQL Server UDF，该 UDF 用于超过一百万行的查询（以及最多 6 或 7 个单词的文本）。

我发现如果分别比较每个单词，算法运行得更快，“相似度指数”更精确。即，您将每个输入字符串拆分为单词，并将一个输入字符串的每个单词与另一个输入字符串的每个单词进行比较。

请记住，Levenshtein 给出了差异，您必须将其转换为“相似性指数”。我使用了距离除以最长单词的长度之类的东西（但有一些变化）

# 第一条规则：单词的顺序和数量

您还必须考虑：

*   如果两个输入中的单词数必须相同，或者可以更改
*   如果两个输入的顺序必须相同，或者它可以改变。

根据这一点，算法会发生变化。例如，如果字数不同，应用第一条规则非常快。而且，第二条规则减少了比较的次数，特别是在比较文本中有很多单词的情况下。稍后将通过示例进行解释。

# 第二条规则：加权每个比较对的相似性

我还将长词的权重高于短词，以获得全局相似度指数。我的算法采用比较对中两个单词中最长的一个，并且赋予具有较长单词的对比具有较短单词的对更高的权重，尽管与对长度不完全成正比。

# 样品比较：相同的顺序

在这个例子中，它使用了不同数量的单词：

*   将“曼联”与“曼彻斯特联队”进行比较

如果保证两个输入中的单词顺序相同，则应比较这些对：

```
Manchester United
Manchester Utd    FC 
```

(Manchester,Manchester) (Utd,United) (FC: 未比较)

```
Manchester     United
Manchester Utd FC 
```

(Manchester,Manchester) (Utd: 未比较) (United,FC)

```
 Machester United
Manchester Utd       FC 
```

（曼彻斯特：未比较）（Manchester,Utd）（United,FC）

显然，最高分是第一组对。

## 执行

以相同的顺序比较单词。

单词数较多的字符串是一个固定向量，在本例中显示为 A,B,C,D,E。其中 v[0] 是单词 A，v[1] 是单词 B，依此类推。

对于单词数较少的字符串，我们需要创建可以与第一组进行比较的所有可能的索引组合。在这种情况下，单词数较少的字符串由 a,b,c 表示。

您可以使用一个简单的循环来创建代表要比较的对的所有向量，如下所示

```
A,B,C,D,E   A,B,C,D,E   A,B,C,D,E   A,B,C,D,E   A,B,C,D,E   A,B,C,D,E
a,b,c       a,b,  c     a,b,    c   a,  b,c     a,  b,  c   a,    b,c
0 1 2       0 1   3     0 1     4   0   2 3     0   2   4   0     3 4

A,B,C,D,E   A,B,C,D,E   A,B,C,D,E   A,B,C,D,E
  a,b,c       a,b,  c     a,  b,c       a,b,c
  1 2 3       1 2   4     1   3 4       2 3 4 
```

样本中的数字是具有第一组单词索引的向量，必须与第一组中的索引进行比较。即v[0]=0，表示将短集（a）的索引0与长集（A）的索引0进行比较，v[1]=2表示将短集（b）的索引1与索引2进行比较长集（C），依此类推。

要计算这个向量，只需从 0、1、2 开始。将可以移动的最新索引向右移动，直到不能再移动：

Strat 通过移动最后一个：

```
0,1,2 -> 0,1,3 -> 0,1,4 
No more moves possible, move the previous index, and restore the others
to the lowest possible values (move 1 to 2, restore 4 to 3) 
```

当最后一个不能再移动时，移动最后一个之前的一个，并将最后一个重置到最近的可能位置（1 移动到 2，4 移动到 3）：

```
0,2,3 -> 0,2,4
No more moves possible of the last, move the one before the last 
```

再次移动最后一个。

```
0,3,4
No more moves possible of the last, move the one before the last
Not possible, move the one before the one before the last, and reset the others: 
```

移动上一个：

```
1,2,3 -> 1,2,4 
```

等等。看图片

当您拥有所有可能的组合时，您可以比较定义的对。

# 第三条规则：停止比较的最小相似度

达到最小相似性时停止比较：根据您想要执行的操作，您可以设置一个阈值，当达到该阈值时，停止对的比较。

如果你不能设置一个阈值，至少你可以在每对单词的相似度达到 100% 的情况下停下来。这样可以节省大量时间。

在某些情况下，如果相似度至少达到 75%，您可以简单地决定停止比较。如果您想向用户显示与用户提供的字符串相似的所有字符串，则可以使用此选项。

# 示例：与单词顺序变化的比较

如果顺序可以改变，则需要将第一组的每个单词与第二组的每个单词进行比较，并为结果组合取最高分，其中包括所有排序最短的对的所有单词可能的方式，与第二对的不同单词相比。为此，您可以填充 (n X m) 个元素的矩阵的上三角形或下三角形，然后从矩阵中获取所需的元素。

# 第四条规则：标准化

您还必须在比较之前对单词进行规范化，如下所示：

*   如果不区分大小写，则将所有单词转换为大写或小写
*   如果不区分重音，请删除所有单词中的重音
*   如果你知道有常用的缩写，你也可以将它们规范化，为缩写加速（即转换united to utd，not utd to united）

# 缓存优化

为了优化该过程，我缓存了我可以缓存的任何一个，即不同大小的比较向量，例如 A 中的向量 0,1,2-0,1,3,-0,1,4-0,2,3 ,B,C,D,E 到 a,b,c 比较示例：长度为 3,5 的所有比较将在首次使用时计算，并针对所有 3 个字到 5 个字的传入比较进行回收。

# 其他算法

我尝试了汉明距离，结果不太准确。

你可以做更复杂的事情，比如语义比较、语音比较，考虑到一些字母是一样的（比如`b`和`v`，对于几种语言，比如西班牙语，没有区别）。其中一些非常容易实现，而另一些则非常困难。

*注意：我没有包括 Levenhstein 距离的实现，因为你可以很容易地发现它在不同的语言上实现*

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-08T09:26:21.877

看看这篇文章，它解释了如何做到这一点并提供了示例代码:)

[模糊匹配（Levenshtein 距离）](http://www.dotnetperls.com/levenshtein)

更新：

这是以两个字符串为参数并计算两个字符串的“Levenshtein Distance”的方法代码

```
public static int Compute(string s, string t)
    {
    int n = s.Length;
    int m = t.Length;
    int[,] d = new int[n + 1, m + 1];

    // Step 1
    if (n == 0)
    {
        return m;
    }

    if (m == 0)
    {
        return n;
    }

    // Step 2
    for (int i = 0; i <= n; d[i, 0] = i++)
    {
    }

    for (int j = 0; j <= m; d[0, j] = j++)
    {
    }

    // Step 3
    for (int i = 1; i <= n; i++)
    {
        //Step 4
        for (int j = 1; j <= m; j++)
        {
        // Step 5
        int cost = (t[j - 1] == s[i - 1]) ? 0 : 1;

        // Step 6
        d[i, j] = Math.Min(
            Math.Min(d[i - 1, j] + 1, d[i, j - 1] + 1),
            d[i - 1, j - 1] + cost);
        }
    }
    // Step 7
    return d[n, m];
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T10:10:47.640

有时检测重复项可能比计算 Levenshtein 实例复杂“一点”。考虑以下示例：

```
1\. Jeff, Lynch, Maverick, Road, 181, Woodstock  
2\. Jeff, Alf., Lynch, Maverick, Rd, Woodstock, NY 
```

这种重复可以通过复杂的聚类算法进行匹配。

有关更多信息，您可能需要查看一些研究论文，例如“Effective Incremental Clustering for Duplicate Detection in Large Databases”。

（示例来自论文）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T09:51:28.900

您正在寻找的是字符串相似性度量。有多种方法可以做到这一点：

1.  编辑两个字符串之间的距离（如答案＃1）
2.  将字符串转换为字符集（通常在二元组或单词上），然后计算两组的布鲁斯系数或骰子系数。
3.  将字符串投影到词向量（单词或二元组）并计算两个向量之间的余弦距离。

我通常发现选项 #2 是最容易实现的，如果您的字符串是短语，那么您可以简单地在单词边界上对它们进行标记。在上述所有情况下，您可能需要先删除停用词（常用词，如 and、a、the 等），然后再进行标记。 **更新：**链接

[骰子系数](http://en.wikipedia.org/wiki/Dice_coefficient)

[余弦相似度](http://en.wikipedia.org/wiki/Cosine_similarity)

[在 C# 中实现朴素相似度引擎](http://sachiniscool.blogspot.in/2011/06/dice-coefficienta-naive-similarity.html)*警告：不要脸的自我提升

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-11T19:04:09.217

这是使用 Levenshtein 距离算法的替代方法。这根据 Dice 系数比较字符串，它比较每个字符串中常见字母对的数量以生成 0 和 1 之间的值，0 表示不相似，1 表示完全相似

```
 public static double CompareStrings(string strA, string strB)
    {
        List<string> setA = new List<string>();
        List<string> setB = new List<string>();

        for (int i = 0; i < strA.Length - 1; ++i)
            setA.Add(strA.Substring(i, 2));

        for (int i = 0; i < strB.Length - 1; ++i)
            setB.Add(strB.Substring(i, 2));

        var intersection = setA.Intersect(setB, StringComparer.InvariantCultureIgnoreCase);

        return (2.0 * intersection.Count()) / (setA.Count + setB.Count);
    } 
```

像这样调用方法：

```
CompareStrings("Manchester United", "Manchester Utd"); 
```

输出是：`0.75862068965517238`

# .net - 将 gridview 绑定到来自 OracleDataReader 的数据

> ID：10495877
> 
> 赞同：0
> 
> 时间：2012-05-08T09:21:00.660
> 
> 标签：.net, visual-studio-2010, gridview, oracle10g

谁能建议我如何改变这一点？当 GetAlerts 将数据返回到 gridview 时，它似乎为“NOP_TEXT”中的每个字符添加一行，例如，如果 NOP_TEXT 包含“refer to customer”，我将在 gridview 中获得 17 行...

谢谢

```
 protected void Button2_Click(object sender, EventArgs e)
    {
            GridView1.DataSource = dal.GetAlerts(TextBox2.Text);

    }

public string GetAlerts(string partyRef)
    {
        string al_sql = "SELECT NOTEPADS_PEOPLE.NOP_TEXT "
            + "FROM FSC.PARTIES  PARTIES_PEOPLE, NOTE_TYPES  NOTE_TYPES_PEOPLE, NOTEPADS  NOTEPADS_PEOPLE "
            + "WHERE ( PARTIES_PEOPLE.PAR_REUSABLE_REFNO=NOTEPADS_PEOPLE.NOP_REUSABLE_REFNO(+)  ) "
            + "AND  ( NOTEPADS_PEOPLE.NOP_NTT_CODE=NOTE_TYPES_PEOPLE.NTT_CODE(+)  ) "
            + "AND  ( NOTE_TYPES_PEOPLE.NTT_CODE  =  'ALERT' AND PARTIES_PEOPLE.PAR_REFNO = " + partyRef + ")" ;
        string al_set = RetrieveAlert(al_sql, ":partyRef", partyRef);
        return al_set;
    }

public string RetrieveAlert(string al_sql, string cmdKey, string cmdValue)
    {
        OracleConnection al_con = null;
        OracleDataReader al_reader = null;

        al_con = new OracleConnection(Helper.HousingDBConnectionString);
        OracleCommand cmd = new OracleCommand(al_sql, al_con);
        cmd.Parameters.Add(cmdKey, cmdValue);
        al_con.Open();
        al_reader = cmd.ExecuteReader();
        string al_recset = "No Alerts";
        if (al_reader.Read())
        {
            al_recset = "ALERT: " + al_reader["NOP_TEXT"].ToString();
            return al_recset;
        }
        return al_recset;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:13:55.277

尝试：

```
protected void Button2_Click(object sender, EventArgs e)
    {
            GridView1.DataSource = new string[]{dal.GetAlerts(TextBox2.Text)};
    } 
```

# xml - 使用 XML 检索/插入数据到 SQL 数据库

> ID：10495879
> 
> 赞同：0
> 
> 时间：2012-05-08T09:21:02.440
> 
> 标签：xml, sql-server-2008

我有一些空闲时间，所以我正在阅读这里所说的 xml：

可以使用以下代码从数据库生成 XML：

```
<%
response.ContentType = "text/xml"
set conn=Server.CreateObject("ADODB.Connection")
conn.provider="Microsoft.Jet.OLEDB.4.0;"
conn.open server.mappath("/db/database.mdb")

sql="select fname,lname from tblGuestBook"
set rs=Conn.Execute(sql)

response.write("<?xml version='1.0' encoding='ISO-8859-1'?>")
response.write("<guestbook>")
while (not rs.EOF)
response.write("<guest>")
response.write("<fname>" & rs("fname") & "</fname>")
response.write("<lname>" & rs("lname") & "</lname>")
response.write("</guest>")
rs.MoveNext()
wend

rs.close()
conn.close()
response.write("</guestbook>")
%> 
```

从表中读取并更改我想要的数据后，我可以再次在 sql 表中添加新数据吗？

# events - Jquery 移动滑块触摸事件

> ID：10495884
> 
> 赞同：0
> 
> 时间：2012-05-08T09:21:14.703
> 
> 标签：events, jquery-mobile, slider

有人知道吗？如何处理 jquery mobile 滑块上的 touchstart 和 touchend 事件？我只能处理更改和启动事件，但找不到 touchend 的解决方案。

我的目标是在不被触摸时阻止跟踪滑块的变化。

任何帮助将不胜感激。谢谢，

我的代码：

HTML：

```
<input type="range" name="slider" id="slider" class="slider" value="1000" min="500" max="20000" data-highlight="true" data-mini="true" /> 
```

JS：

被触摸后开始跟踪（将继续跟踪）：

```
$('#slider').next().children('a').bind('taphold', function () {
    $('#slider').live("change", function (event, ui) {
    //do some stuff here...
    });
}); 
```

总是追踪：

```
 $('#slider').live("change", function (event, ui) {
    //do some stuff here...
    }); 
```

触摸结束后停止跟踪：

？？？我必须以某种方式停止追踪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:44:38.543

怎么用[`vmouseup`](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)。正如文档中所述，这是您必须用来处理 touchend 或 mouseup 事件的事件。

你可以结合使用[unbind](http://api.jquery.com/unbind/)来实现你的目标，不是吗？

**编辑：**

我刚刚测试了 chrome 和以下

```
$('#slider').next().children('a').bind('taphold', function() {
    console.log("bind");
    $('#slider').bind("change", function(event, ui) {
        console.log(this.value);
    });
});

$('#slider').next().children('a').bind('vmouseup', function() {
    console.log("unbind");
    $('#slider').unbind("change")
}); 
```

完全按预期工作。在控制台中，当我进行轻敲（这是笔记本电脑上的长时间点击）时，我得到一个“绑定”，然后每一步都会输出值。当我释放鼠标时，我得到一个“解除绑定”，然后在不保持不动的情况下滑动不会输出值（如果通过滑块框更改值，也不会输出）。

# r - x轴上带有字符串的ggplot

> ID：10495898
> 
> 赞同：17
> 
> 时间：2012-05-08T09:21:44.670
> 
> 标签：r, plot, ggplot2, dataframe

我正在尝试绘制一个包含多条曲线的图。x 轴不是数值，而是字符串。

这很好用（比如[如何在 R 中绘制数据框的所有列](https://stackoverflow.com/questions/4877357/how-to-plot-all-the-columns-of-a-data-frame-in-r)）：

```
require(ggplot2)
df_ok <- rbind(data.frame(x=4:1,y=rnorm(4),d="d1"),data.frame(x=3:1,y=rnorm(3),d="d2"))
ggplot(df_ok, aes(x,y)) + geom_line(aes(colour=d)) 
```

但我的数据看起来像这样：

```
require(ggplot2)
df_nok <- rbind(data.frame(x=c("four","three","two","one"),y=rnorm(4),d="d1"),data.frame(x=c("three","two","one"),y=rnorm(3),d="d2"))
ggplot(df_nok, aes(x,y)) + geom_line(aes(colour=d)) 
```

我得到错误**geom_path: 每组只包含一个观察。需要调整群体审美吗？**. 即使图形线没有出现，轴也被绘制出来，并且 x 轴包含正确的标签 - 但也以*错误的顺序排列*。

知道如何尽可能简单地绘制这个吗？（另请注意某些系列的缺失 x 值）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-08T10:42:12.323

你的问题是`x`变量是一个因素。所以，改变你的数据框并做`x`一个双：

```
df = rbind(data.frame(x=4:1,y=rnorm(4),d="d1"), 
           data.frame(x=3:1,y=rnorm(3),d="d2")) 
```

正常绘图

```
g = ggplot(df, aes(x,y)) + geom_line(aes(colour=d)) 
```

但显式更改 x 轴缩放：

```
g + scale_x_continuous(breaks=1:4, labels=c("one", "two", "three", "four")) 
```

* * *

要重命名变量，请尝试以下操作：

```
x1 = factor(df_nok$x, 
            levels=c("one", "two", "three", "four"), 
            labels=1:4)
df$x1 = as.numeric(x1) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-08T09:25:34.450

您可以通过添加一个虚拟组来说服 ggplot 画线，

```
ggplot(df_nok, aes(x,y)) + geom_line(aes(colour=d, group=d)) 
```

另请参阅[http://kohske.wordpress.com/2010/12/27/faq-geom_line-doesnt-draw-lines/](http://kohske.wordpress.com/2010/12/27/faq-geom_line-doesnt-draw-lines/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-13T04:59:22.787

添加`group`美学（有点多余，我知道，但比重新调整轴标签要简单得多）。

```
df_nok <- rbind(data.frame(x=c("four","three","two","one"),y=rnorm(4),d="d1"),data.frame(x=c("three","two","one"),y=rnorm(3),d="d2"))

ggplot(df_nok, aes(x,y, group=d)) + geom_line(aes(colour=d)) 
```

确实，您的 x 轴可能仍然不是您想要的顺序。正如@csgillespie 所指出的，您可以通过将其作为一个因素来解决此问题

```
df_nok$x <- factor(df_nok$x, 
            levels=c("one", "two", "three", "four"), 
            labels=1:4) 
```

# jquery - jQuery UI 1.9 Spinner，如果只旋转一次，则没有 Change 事件

> ID：10495901
> 
> 赞同：0
> 
> 时间：2012-05-08T09:21:59.523
> 
> 标签：jquery, jquery-ui, internet-explorer, spinner

我正在尝试将 jQuery UI 1.9 微调器用于购物车应用程序中的数量字段，并且遇到了影响 IE6 - 9（可能是 10）但不影响 Firefox 或 Chrome 的问题。

问题是，当微调器仅旋转一次时，我在微调器定义的更改事件中的代码不会在 IE 中触发，而无需首先将焦点应用于输入字段本身，即只需单击上/下旋转按钮在未选择的微调器上，然后单击微调器，不会触发任何更改事件。

* * *

编辑 - 我为此创建了一个[jsfiddle](http://jsfiddle.net/XseWc/4/)来帮助说明问题。问题出现在IE6-9，10我没试过。

在 IE 中确保焦点不在微调器输入字段上，只需单击微调器添加箭头一次，然后单击页面上的其他位置。不显示警报。有趣的是，如果您首先将焦点放在输入字段中，即单击输入字段，然后单击微调器箭头，然后单击离开，则不会出现此问题。

jsfiddle 确实显示更改事件未触发，但由于它从 jQuery Github 页面运行源代码，因此无法在 IE 中微调器的内部工作中显示额外的焦点事件触发。

* * *

为了确保这不是我做过的任何事情，我复制了[当前 1.9m7 里程碑版本](https://github.com/jquery/jquery-ui/tree/1.9m7)中的所有演示文件并进行了复制。为了确认问题，我添加了一些控制台日志消息以查看发生了什么。

在 IE9 中，一个额外的焦点事件在 _events 焦点中触发（在 jquery.ui.spinner.js 中）。

这有更新 this.previous 两次的效果，所以第一次是正确的（和其他浏览器一样），但是第二次焦点导致 this.previous 被设置为与当前值相同的值，所以当模糊事件触发并检查 this.previous !== this.element.val() 它们是否相同并且更改不会触发。

如果您旋转不止一次，则不会出现此问题，因为不会触发额外的焦点，因此先前的值保持正确。谁能帮我确定在哪里触发了额外的焦点，或者是否有解决方法？

我需要为工作中的项目解决这个问题，并且真的不想在这个阶段移除微调器。鉴于 jQuery 的跨浏览器兼容性目标，我很难相信存在这样一个基本问题会影响一个已经存在了几年的小部件的跨浏览器兼容性（当然，还不是当前版本的一部分）。以前怎么没人注意到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:49:44.920

我向 jQuery 团队提交了一份错误报告，并很快得到了修复。因此，这个问题不再是问题。

# c - openssl X509_verify_cert() 是否验证证书中的签名？

> ID：10495903
> 
> 赞同：4
> 
> 时间：2012-05-08T09:22:00.020
> 
> 标签：c, linux, openssl

openssl [X509_verify_cert()](http://www.openssl.org/docs/crypto/X509_verify_cert.html) API 是否验证证书中的 RSA 签名？

据我了解，该 API 仅检查证书有效性（如日期检查等）。

有人请澄清吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T09:32:10.643

API X509_verify_cert() 根据 X509_store 结构中设置的验证标志进行验证。使用此 API，您可以验证证书
1.Expiry
2.Issuer（信任路径）
2.1 中间证书到期，
2.2 中间证书信任链，
2.3 中间证书吊销，
3.针对 CRL 的证书吊销
3.1 CRL 到期
3.2 CRL 信任路径
（注意：验证 CRL 至少需要 store_ctx 变量中的一个证书）
4.信任链
的深度 5.证书的签名

x509_vfy.h 文件中提到了用于不同验证的标志

```
 /* Send issuer+subject checks to verify_cb */
       #define  X509_V_FLAG_CB_ISSUER_CHECK     0x1
      /* Use check time instead of current time */
       #define  X509_V_FLAG_USE_CHECK_TIME      0x2
      /* Lookup CRLs */
      #define   X509_V_FLAG_CRL_CHECK           0x4
        /* Lookup CRLs for whole chain */
      #define   X509_V_FLAG_CRL_CHECK_ALL       0x8
        /* Ignore unhandled critical extensions */
      #define   X509_V_FLAG_IGNORE_CRITICAL     0x10
     /* Disable workarounds for broken certificates */
     #define    X509_V_FLAG_X509_STRICT         0x20
     /* Enable proxy certificate validation */
      #define   X509_V_FLAG_ALLOW_PROXY_CERTS       0x40
      /* Enable policy checking */
        #define X509_V_FLAG_POLICY_CHECK        0x80
     /* Policy variable require-explicit-policy */
   #define X509_V_FLAG_EXPLICIT_POLICY      0x100
    /* Policy variable inhibit-any-policy */
    #define X509_V_FLAG_INHIBIT_ANY         0x200
     /* Policy variable inhibit-policy-mapping */
      #define X509_V_FLAG_INHIBIT_MAP           0x400
    /* Notify callback that policy is OK */
     #define X509_V_FLAG_NOTIFY_POLICY      0x800
     /* Extended CRL features such as indirect CRLs, alternate CRL signing keys */
     #define X509_V_FLAG_EXTENDED_CRL_SUPPORT   0x1000
    /* Delt1a CRL support */
    #define X509_V_FLAG_USE_DELTAS          0x2000
     /* Check selfsigned CA signature */
   #define X509_V_FLAG_CHECK_SS_SIGNATURE       0x4000 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T09:25:20.647

`X509_verify_cert()`本质上检查证书的有效性。这包括验证已签署属于 CA 的证书的签名是否有效并且是最新的——它将像这样处理整个链。

但是，它不会验证给定的 RSA 签名是否有效 - 尽管它会验证 RSA 签名作为其工作的一部分，但您不应该使用它来执行此操作。

从广义上讲，它就像您在浏览 SSL 站点时遇到证书错误时运行的功能。

# android - Admob 在 google admob 面板中找不到转账资金链接

> ID：10495904
> 
> 赞同：9
> 
> 时间：2012-05-08T09:22:02.500
> 
> 标签：android, admob

我在 google admob 中找不到转帐链接，我的余额超过 50 美元，我的付款信息已填满，但我无法转帐。请帮忙。我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T16:31:35.530

你想转移到你的帐户/贝宝？如果是这种情况，admob 只会在下个月转移 > 100 美元的资金。不需要按钮/链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T15:46:01.890

AdMob 过去允许您将收入转回您的广告支出桶中，并且他们会给您 20% 的奖金。看起来这是自 AdMob 被 Google 收购后又被删除的另一个不错的功能。

我一直在使用 MoPub 在 Millennial Media、iAd、JumpTap 和许多其他网络（包括 AdMob）之间进行广告中介。这很不错。MoPub 甚至拥有自己的 RTB 广告市场。

有趣的是，MoPub 是几年前由 AdMob 的前员工创建的，早在“不作恶”帝国收购 AdMob 之前。

# html - 如何忽略已经忽略的部分html代码

> ID：10495905
> 
> 赞同：0
> 
> 时间：2012-05-08T09:22:08.070
> 
> 标签：html

```
<body>
1
<br/>
2
<br/>
<!--3-->
<br/>
4
</body> 
```

在这个例子中，我想忽略从 1 到 4 的所有代码，就像我对 3 所做的那样，而不删除 3 忽略标记。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-08T09:28:28.660

浏览器将每个解析`<!--`为评论的开头和`-->`结尾。如果您在另一条评论中有评论，例如：

```
<!-- a
<!-- b -->
--> 
```

浏览器将解析：

```
<!-- a
<!-- b --> 
```

作为评论并打印，`-->`因为他认为以 .`<!-- a...`结尾`b -->`。

您需要在下一条评论之前关闭评论标签，然后再打开

# prestashop - Prestashop - 客户注册管理模块 - 稍作修改

> ID：10495907
> 
> 赞同：0
> 
> 时间：2012-05-08T09:22:16.263
> 
> 标签：prestashop

我正在努力修改客户注册管理模块中的一些代码。即时结帐没有按应有的方式工作。当客户注册管理模块被禁用时，即时结账工作正常，提交时没有错误，我们进入下一步/屏幕。启用客户注册模块后，一旦我们单击即时结帐下的提交按钮，我们就不会进入下一步/屏幕，而是返回相同的屏幕，表单为空，并且在 url 中我们有：authentication?back =order.php%3Fstep%3D1 我设法识别出一段代码，该代码阻止客户从即时结账表单转到以下屏幕。它是函数 hookCreateAccount($params) 中的代码

```
 function hookCreateAccount($params)
{
  require_once (dirname(__FILE__).'/ApprovedCustomer.php');
  global $cookie, $back;

  $registration_code = pSQL(Tools::getValue('registration_code'));
  if ($registration_code != '' AND $registration_code == $this->_registrationCode) {
   $customer = $params['newCustomer'];
   $customer->cleanGroups();
   $customer->addGroups ($this->_defaultGroups);

  }

  $cookie->logged = $this->_isCustomerRegistredByDefault;
  $cust = $params['newCustomer'];
  $approval = new ApprovedCustomer($cust->id);
  $approval->is_approved = $this->_isCustomerRegistredByDefault;
  $approval->privilege_request = intval(Tools::getValue('privilege_request'),0);
  $approval->privilege_message = pSQL(Tools::getValue('privilege_message'), '');;
  if (! $approval->save())
   Tools::D('Unable to save approval information');

  if ($this->_sendAdminMail)
   $this->sendMail('pending_registration', array('customer' => $cust, 'approval'=>$approval));
  if (! $approval->is_approved) {
   $back = 'modules/'.basename(__FILE__, '.php').'/messages.php?msg=noconnect&back=my-account.php';
   $cookie->logged = 0;
  $cookie->id_customer = 0;
  }

  elseif ($back == '')
   $back = 'my-account.php';
} 
```

有人知道这段代码中的原因是什么吗？任何帮助将非常感激。

究竟会发生什么：一旦用户填写即时结帐表格并单击提交，表格将重定向到同一页面：... /authentication?back=order.php%3Fstep%3D1 但它应该转到：/order?步=2

即时结帐表单操作：

```
<form action="{$link->getPageLink('authentication.php', true)}?back={$back}" method="post" id="new_account_form" class="std"> 
```

那么，我应该改变动作部分吗？这是如何运作的？有人能指出我正确的方向吗？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:11:46.833

我怀疑发生冲突是因为根据定义，您的客户没有注册为 One Page Checkout 功能的一部分（我假设这就是您所说的 Instant Checkout 的意思）。

您可以尝试将第一个代码块重构为：

```
global $cookie, $back;

$customer = $params['newCustomer'];
if ($customer->is_guest)
  return;

require_once (dirname(__FILE__).'/ApprovedCustomer.php');

$registration_code = pSQL(Tools::getValue('registration_code'));
if ($registration_code != '' AND $registration_code == $this->_registrationCode) {
  $customer->cleanGroups();
  $customer->addGroups ($this->_defaultGroups);
} 
```

# ruby - 指南针（红宝石）编码错误

> ID：10495908
> 
> 赞同：2
> 
> 时间：2012-05-08T09:22:17.633
> 
> 标签：ruby, gem, compass-sass

我在 Ubuntu Oneiric 上安装了 Compass 0.12（一个 ruby​​ gem），没有问题我已经更新为精确格式化 / 并保持 /home，所以我需要重新安装 ruby​​（1.9.3）。

我现在在编译 SCSS 文件时收到此错误：

```
compass watch --trace

            Change detected at 12:45:09 to: style.scss overwrite css/style.css

Dear developers making use of FSSM in your projects, FSSM is essentially dead at this point. Further development will be taking place in the new shared guard/listen project. Please let us know if you need help transitioning! ^_^b - Travis Tilley

>>> Compass is polling for changes. Press Ctrl-C to Stop.
ArgumentError on line ["46"] of /usr/lib/ruby/1.9.1/pathname.rb: invalid byte sequence in US-ASCII
  /usr/lib/ruby/1.9.1/pathname.rb:46:in `chop_basename'
  /usr/lib/ruby/1.9.1/pathname.rb:102:in `cleanpath_aggressive'
  /usr/lib/ruby/1.9.1/pathname.rb:90:in `cleanpath'
  /usr/lib/ruby/1.9.1/pathname.rb:452:in `relative_path_from'
  /var/lib/gems/1.9.1/gems/fssm-0.2.9/lib/fssm/path.rb:82:in `split_path'
  /var/lib/gems/1.9.1/gems/fssm-0.2.9/lib/fssm/path.rb:70:in `run_callback'
  /var/lib/gems/1.9.1/gems/fssm-0.2.9/lib/fssm/path.rb:56:in `callback_action'
  /var/lib/gems/1.9.1/gems/fssm-0.2.9/lib/fssm/path.rb:36:in `update'
  /var/lib/gems/1.9.1/gems/fssm-0.2.9/lib/fssm/state/directory.rb:39:in `block in modified'
  /var/lib/gems/1.9.1/gems/fssm-0.2.9/lib/fssm/state/directory.rb:37:in `each'
  /var/lib/gems/1.9.1/gems/fssm-0.2.9/lib/fssm/state/directory.rb:37:in `modified'
  /var/lib/gems/1.9.1/gems/fssm-0.2.9/lib/fssm/state/directory.rb:18:in `refresh'
  /var/lib/gems/1.9.1/gems/fssm-0.2.9/lib/fssm/backends/polling.rb:17:in `block (2 levels) in run'
  /var/lib/gems/1.9.1/gems/fssm-0.2.9/lib/fssm/backends/polling.rb:17:in `each'
  /var/lib/gems/1.9.1/gems/fssm-0.2.9/lib/fssm/backends/polling.rb:17:in `block in run'
  /var/lib/gems/1.9.1/gems/fssm-0.2.9/lib/fssm/backends/polling.rb:15:in `loop'
  /var/lib/gems/1.9.1/gems/fssm-0.2.9/lib/fssm/backends/polling.rb:15:in `run'
  /var/lib/gems/1.9.1/gems/fssm-0.2.9/lib/fssm/monitor.rb:26:in `run'
  /var/lib/gems/1.9.1/gems/fssm-0.2.9/lib/fssm.rb:70:in `monitor'
  /var/lib/gems/1.9.1/gems/compass-0.12.1/lib/compass/commands/watch_project.rb:89:in `perform'
  /var/lib/gems/1.9.1/gems/compass-0.12.1/lib/compass/commands/base.rb:18:in `execute'
  /var/lib/gems/1.9.1/gems/compass-0.12.1/lib/compass/commands/project_base.rb:19:in `execute'
  /var/lib/gems/1.9.1/gems/compass-0.12.1/lib/compass/exec/sub_command_ui.rb:43:in `perform!'
  /var/lib/gems/1.9.1/gems/compass-0.12.1/lib/compass/exec/sub_command_ui.rb:15:in `run!'
  /var/lib/gems/1.9.1/gems/compass-0.12.1/bin/compass:29:in `block in <top (required)>'
  /var/lib/gems/1.9.1/gems/compass-0.12.1/bin/compass:43:in `call'
  /var/lib/gems/1.9.1/gems/compass-0.12.1/bin/compass:43:in `<top (required)>'
  /usr/local/bin/compass:19:in `load'
  /usr/local/bin/compass:19:in `<main>' 
```

（“亲爱的开发人员”消息是输出的一部分）。

我第一次更改 scss 文件时不会出现此错误，而是第二次出现此错误。

此外，罗盘在某些文件中“吃掉”一个“s”，而不是将它们编译为“style.css”（文件名应该是什么），而是将它们编译为“tyle.css”。

我在这里花了 3 个小时查看类似的问题，但我无法解决。我尝试在某些文件的顶部包含 # encoding: utf-8 ，但没有成功。

请逐步解释我应该怎么做，因为我完全是 Ruby 的菜鸟（我只是因为 SASS 而使用它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T01:06:20.880

我认为路径名有问题，可能它包含无效的非 ASCII 序列；可能吃掉的“s”是问题所在，可能是无效字符，或者可能是靠近它的字符；尝试确保路径是 ASCII。

或者可能是精确 readline 包中的错误？尝试通过 RVM 安装 ruby​​ 1.9.3，RVM 应该使用与其捆绑的 readline（详见下面的评论）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T01:22:34.280

据我所知，有问题的文件`pathname.rb`包含这个似乎是问题所在的函数：

```
def chop_basename(path)
  base = File.basename(path)
  if /\A#{SEPARATOR_PAT}?\z/o =~ base
    return nil
  else
    return path[0, path.rindex(base)], base
  end
end
private :chop_basename 
```

这是具有相同问题的类似问题的链接：

[当应用程序路径中有非 ASCII 字符时，Ruby on Rails 应用程序不会开始使用Passenger](https://stackoverflow.com/questions/10175975/ruby-on-rails-application-wont-start-using-passenger-when-there-are-non-ascii-c)

所以修复显然是坚持使用 us-ascii 路径名。

这是该类文档中的一个片段：

> Pathname 表示在文件系统中定位文件的路径名。路径名取决于操作系统：Unix、Windows 等。路径名库与本地操作系统的路径名一起使用。但是，实验性地支持非 Unix 路径名。

至于为什么它以前有效而现在无效，这很难说。可能是您系统上的其他一些库发生了更改，或者升级到 ruby​​ 1.9.3 导致了导致错误的微小更改。

# sql-server - Linq to SQL 查询性能

> ID：10495909
> 
> 赞同：0
> 
> 时间：2012-05-08T09:22:18.633
> 
> 标签：sql-server, linq-to-sql

我正在使用 Linq to SQl 来查询数据。当我在 SQL Server Profiler 中使用 order by 和监视编写选择查询时，它会运行选择命令 2 次

1.  从表中选择字段
2.  订购数据。

数据量大需要时间。有什么解决方案。

**更新：**

```
from dc in dataContext.UserTable join 
m in dataContext.MonthLookups on dc.Month equals m.Month into sr 
from x in sr.DefaultIfEmpty() 
order by dc.UserName, dc.FirstName 
select new {dc, sr.MothName}; 
```

**更新：**

```
SELECT 
 [Project1].[ UserName] AS [UserName], 
[Project1].[ FirstName] AS [FirstName], 
[Project1].[ MonthName] AS [MonthName], 
[Project1].[year] AS [year]
FROM ( SELECT 
     [Extent1].[UserName] AS [UserName], 
    [Extent1].[FirstName] AS [FirstName], 
    [Extent1].[year] AS [year], 
     [Extent2].[MonthName] AS [MonthName]
    FROM  [dbo].[DutySavingFin] AS [Extent1]
    LEFT OUTER JOIN [dbo].[MonthLookup] AS [Extent2] ON [Extent1].[Month] = [Extent2].[Month]
)  AS [Project1]
ORDER BY [Project1].[UserName] ASC, [Project1].[FirstName] ASC 
```

**更新 ：**

首选方式：

```
SELECT 
     [Extent1].[UserName] AS [UserName], 
    [Extent1].[FirstName] AS [FirstName], 
    [Extent1].[year] AS [year], 
     [Extent2].[MonthName] AS [MonthName]
    FROM  [dbo].[DutySavingFin] AS [Extent1]
    LEFT OUTER JOIN [dbo].[MonthLookup] AS [Extent2] ON [Extent1].[Month] = [Extent2].[Month]
ORDER BY [Extent1].[UserName] ASC, [Extent1].[FirstName] ASC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:04:36.773

您上面的示例显示了一个查询。如果这就是您的意思，嵌套查询不会影响性能......

如果您正在处理大量数据：
1) 确保您在 DutySavingFin.Month、MonthLookup.Month 和 DutySavingFin.UserName+DutySavingFin.FirstName 上有索引。
2）添加where子句以过滤到您需要的记录，除非您*确实*需要表中的所有数据

# javascript - 如何每 2 分钟显示一个 div 内容？

> ID：10495911
> 
> 赞同：0
> 
> 时间：2012-05-08T09:22:32.237
> 
> 标签：javascript, css

我想在页面右侧每 2 分钟显示一次以下代码

```
#notification
  = link_to "Tomorrow there are <span>#{@current_user.reminders.size}</span> events".html_safe,events_path 
```

* * *

我尝试了以下代码，但它没有按我想要的方式工作......

```
function notification()
{  
   $("#notification").show("slow").delay(800).fadeout(400);
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:25:39.597

要以 2 分钟的间隔执行一项功能，请使用`setInterval`：

```
setInterval(function() {
  // do something here
}, 120000); // 2 minutes = 120000 miliseconds 
```

编辑：

从您的评论中，我猜您想要更多这样的东西：

```
function notify() {
    // show and delay for 60000 (1 minute) before hiding
    $("#notification").show("slow").delay(60000).fadeOut('slow', function() {
        // show again after 120000 (2 minutes)
        setTimeout(notify, 120000);
    });
}

notify(); 
```

注意方法上的回调函数`fadeOut`。`notify`这告诉它在 2 分钟后再次调用该函数。

这是一个例子： http: [//jsfiddle.net/vwtkh/4/](http://jsfiddle.net/vwtkh/4/) ​</p>

# dynamic - 在 JSF 中实现自己的 ActionListener

> ID：10495913
> 
> 赞同：0
> 
> 时间：2012-05-08T09:22:34.297
> 
> 标签：dynamic, jsf-2, richfaces, actionlistener

如何在 JSF 中实现自己的 ActionListener。

我要求它将此动作侦听器附加到我正在构建的动态组件..

我正在尝试像这样使用 MethodExpression：-

```
HtmlCommandLink link = new HtmlCommandLink();
        link.setId("linkId");
FacesContext context = FacesContext.getCurrentInstance();
        MethodExpression methodExpression = context.getApplication().getExpressionFactory().createMethodExpression(
            context.getELContext(), "#{bean.actionListener}", null, new Class[] { ActionEvent.class });
link.addActionListener(new MethodExpressionActionListener(methodExpression)); 
```

但是，是否有任何其他方法可以将自定义 actionListener 附加到动态生成的组件。在这种情况下，MethodExpression 的使用究竟是什么。

一点是`addActionListener`作为`MethodExpressionActionListener`参数，我们需要在其中指定methodExpression对象..

但是这背后的真正功能是什么……我浏览了 MethodExpression 的 javadoc，但我发现它没有多大用处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:24:52.423

的参数类型`addActionListener`是[ActionListener](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/api/javax/faces/event/ActionListener.html)。使用它而不是 MethodExpressionActionListener，它是一个具有单个方法的接口：

```
public void processAction(ActionEvent event) throws AbortProcessingException; 
```

（MethodExpressionActionListener 实现了这个接口）

# struts2 - Struts2：如何将值从一个动作传递到另一个动作。或者从一个 JSP 到另一个 JSP。不使用会话

> ID：10495926
> 
> 赞同：4
> 
> 时间：2012-05-08T09:23:01.863
> 
> 标签：struts2

嗨，我正在使用 Struts2 构建一个项目。然而，在开发过程中，我面临着许多问题。最大的问题是 Struts2 中的会话管理。与此相关的信息非常有限。

我一直在寻找解决问题的方法，但只获得了无法满足我需求的有限信息。

我不希望使用容器的会话（Apache Tomcat 7），因为当多个用户尝试使用该应用程序时，它将成为一种开销。

我创建了 2 个 Action 类和 2 个 JSP。在 JSP1（Login.jsp 和 LoginAction.java POJO）中输入的值应该在另一个动作（HomeAction.java POJO）中使用，然后它们应该在后续的 JSP（Home.jsp）中显示。

我也在使用瓷砖。

我尝试使用标签，但无法为其设置值。

在 Struts2 中，如何将 JSP1/Action 上的对象传递给另一个 Action/JSP2？

一个小的登录页面示例将不胜感激。例如，在文本字段中输入的用户名应该使用 2 个不同的 Action 类显示到另一个 JSP 页面。

**struts.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN" "http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>
    <constant name="struts.devMode" value="true" />
    <constant name="struts.custom.i18n.resources" value="ApplicationResources" /> 

    <package name="default" extends="struts-default">
        <result-types>
            <result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult" />
        </result-types> 

        <action name="login" class="org.myaction.LoginAction" method="validateLoginCredentials">
            <result name="autheticatedUser" type="redirect" >homePage</result>
            <result name="fail" >/jsp/Login.jsp</result>
        </action>

        <action name="homePage" class="org.myaction.HomeAction" method="execute">
            <result name="responseOK" type="tiles" >/tile.NextPage</result>
            <result name="error" type="tiles" >/tile.HomePage</result>
        </action>
    </package>
</struts> 
```

**登录操作.java**

```
 public class LoginAction extends ActionSupport {

    //private static final String SUCCESS = "success"; 
    private static final String FAIL = "fail";

    private String userName;
    private String password;

    public String getUserName() { return userName; }

    public void setUserName(String userName) { this.userName = userName; }

    public String getPassword() { return password; }

    public void setPassword(String password) { this.password = password; }

    public String validateLoginCredentials() {

          if(this.userName.equals("admin") 
                      && this.password.equals("allow")) {

         return "autheticatedUser";
              }
        addActionError(getText("error.login"));
        return FAIL;
    }
} 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">

    <display-name>Login</display-name>

    <context-param>
        <param-name>org.apache.tiles.impl.BasicTilesContainer.DEFINITIONS_CONFIG</param-name>
        <param-value>/WEB-INF/tiles.xml</param-value>
    </context-param>

    <listener>
        <listener-class>org.apache.struts2.tiles.StrutsTilesListener</listener-class>
    </listener>

    <welcome-file-list>
        <welcome-file>/jsp/Login.jsp</welcome-file>
    </welcome-file-list>

    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

</web-app> 
```

我的问题是，在 Struts2 中，如何将**用户**名从**Login.jsp/LoginAction.java 传递**给**Home.jsp/HomeAction.java**？

注意：存储到会话中不是首选选项，但如果没有其他方法可以在 Struts2 中维护用户状态，则可以使用。

一个小的登录页面示例将不胜感激。例如，在文本字段中输入的用户名应该使用 2 个不同的 Action 类显示到另一个 JSP 页面。

**已编辑**

嗨，谢谢你！我真的很感谢你的回复。我想这会奏效。还有一件事我忘了提。LoginAction.java 类中存在另一个类（JavaBean）属性。

```
public class LoginAction extends ActionSupport {

   private UserData userData;

   public void setUserData(UserData userData) {
      this.userData = userData;
   }

   public String getUserData() {
      return userData;
   }

} 
```

用户数据.java

```
public class UserData {
   private String userName;

   public void setUserName(String userName) {
      this.userName = userName;
   }

   public String getUserName() {
      return userName;
   }
} 
```

如何设置 LoginAction.java 中的 UserData 对象的 userName 属性？

我试过这个

```
<s:hidden name="userData.userName" value="userName" /> 
```

但它不工作....

你知道我在这里犯了什么错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T09:32:23.840

`redirectAction`与_`param`

```
 <action name="login" class="org.myaction.LoginAction" method="validateLoginCredentials">
      <result name="autheticatedUser" type="redirectAction">
        <param name="actionName">homePage</param>
        <param name="userName">${userName}</param>
      </result>
      <result name="fail" >/jsp/Login.jsp</result>
  </action> 
```

另外，**不要忘记**在`HomeAction`类中添加 userName getter/setter。然后在你的`Home.jsp`你可以直接使用`<s:property value="userName"/>`（或其他）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-20T11:53:00.910

这`conversation plugin`是一个很好的会话包装器，可用于管理操作之间的对象生命周期。（[https://code.google.com/p/struts2-conversation/](https://code.google.com/p/struts2-conversation/)）

当您有一些基于步骤的 jsp 页面（超过两个步骤）时，此解决方案将有很大帮助。里面的插件是注解基础，也有必要的jsp标签

# php - 从数据库中提取具有多个答案的调查

> ID：10495929
> 
> 赞同：0
> 
> 时间：2012-05-08T09:23:07.167
> 
> 标签：php, mysql

我有一个工作调查，从多个表格中提取每个问题和任何相关答案。每个问题都存储在下表中：

*   tblQuestions，包含以下字段：
*   qID
*   q文本。

相关答案存储在表中：

*   tblPossAnswers，包含以下字段：
*   援助
*   qID
*   答案文本。

因此，每个问题我都会有 3 个可能的答案。我要提取所有内容的 sql 是：

```
select * from tblQuestions, tblPossAnswers where
tblPossAnswers.qID = tblQuestions.qID
order by tblQuestions.qID ASC 
```

和我的PHP来显示它：

```
while ($row = mysql_fetch_array($result)) {

echo "<p>" . $row['qText'] . "</p><br />";
echo "<input type='radio' name='".$row['qID']."' value='".$row['aID']."' />";
echo $row['answerText'];
} 
```

问题是每次显示可能的答案时都会显示 qText。所以它看起来像：

*   问题 1
*   可能的答案 1
*   问题 1
*   可能的答案 2
*   问题 1
*   可能的答案 3

*   问题2
*   可能的答案 1
*   问题2
*   可能的答案 2
*   问题2
*   可能的答案 3

我想做的是让 qText 仅在第一个可能的答案被拉出时显示。我对 MySQL 还是有点陌生​​，所以解决方案可能非常简单，我只是没有看到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:28:13.483

无需更改 sql 中的任何内容，只需稍微更改 php，如下所示

```
while ($row = mysql_fetch_array($result)) {
  if ($row['qText'] != $lastQuestion) {
    echo "<p>" . $row['qText'] . "</p><br />";
    $lastQuestion = $row['qText'];
  }
  echo "<input type='radio' name='".$row['qID']."' value='".$row['aID']."' />".$row['answerText'];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:26:46.570

您可以测试问题是否在您的 PHP 循环中发生了变化：

```
while ($row = mysql_fetch_array($result)) {
  if ($row['qID'] != $lastQuestionID) {
    echo "<p>" . $row['qText'] . "</p><br />";
    $lastQuestionID = $row['qID'];
  }
  echo "<input type='radio' name='".$row['qID']."' value='".$row['aID']."' />";
  echo $row['answerText'];
} 
```

或者，您可以使用 将 MySQL 结果按问题分组[`GROUP_CONCAT`](http://dev.mysql.com/doc/en/group-by-functions.html#function_group-concat)，指定一个分隔符，然后在 PHP 中拆分答案：

```
select *, group_concat(answerText separator char(30)) as answers
from tblQuestions join tblPossAnswers using (qID)
group by tblQuestions.qID
order by tblQuestions.qID ASC 
```

然后：

```
while ($row = mysql_fetch_array($result)) {
  echo "<p>" . $row['qText'] . "</p><br />";
  foreach (explode(chr(30), $row['answers']) as $answer) {
    echo "<input type='radio' name='".$row['qID']."' value='".$answer."' />";
    echo $answer;
  }
} 
```

# javascript - Javascript循环+对象问题：如何使用循环获取对象中的必需项

> ID：10495930
> 
> 赞同：0
> 
> 时间：2012-05-08T09:23:17.740
> 
> 标签：javascript, object, for-loop

我在循环、对象方面遇到了一些麻烦

我有这样的json；

```
var jsonPermission = {"permissions": [
                            {"permissionId": 1, "permissionName": "Admin Permission", "roleDesc": "This is an Admin Permission"},
                            {"permissionId": 2, "permissionName": "Manager Permission", "roleDesc": "This is a Manager Permission"},
                            {"permissionId": 3, "permissionName": "User Permission", "roleDesc": "This is a user Permission"}
                        ]
                    }; 
```

我必须制作这样的对象；

```
[
    { data: "Admin Permission",        type: ["permission"] },
    { data: "Manager Permission",        type: ["permission"] },
    { data: "User Permission",      type: ["permission"] }
] 
```

所以我使用了以下代码；

```
//For Permissions
var permissions_len = jsonPermission.permissions.length;
var arr_permissions = [];
var permission_type = ["permission"];
for(var i=0;i<permissions_len;i++){
    var obj_permissions = {};
    obj_permissions["data"] = jsonPermission.permissions[i].permissionName;
    obj_permissions["type"] = permission_type;
    arr_permissions.push(obj_permissions);
} 
```

但相反，我是这样的：

```
[
    { data: "Admin Permission",        type: [1] },
    { data: "Manager Permission",        type: [1] },
    { data: "User Permission",      type: [1] }
] 
```

怎么表现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:34:25.447

我认为这是您用来评估结果的工具的问题，如果您使用 firefox console.log() 将结果记录到控制台，它会给您显示的结果。但是，如果您在代码中使用 for 循环正确检查该值，您会发现这些值是正确的。

检查如下所示的值

```
var permissions_len = jsonPermission.permissions.length;
var arr_permissions = [];
var permission_type = ["permission"];
for(var i=0;i<permissions_len;i++){
    var obj_permissions = {};
    obj_permissions["data"] = jsonPermission.permissions[i].permissionName;
    obj_permissions["type"] = permission_type;
    arr_permissions.push(obj_permissions);
}

for(var i=0;i<permissions_len;i++){
    var a = arr_permissions[i];
    console.log(a.data, a.type)
} 
```

你可以[在这里](http://jsfiddle.net/arunpjohny/qHatn/)测试它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T09:28:41.297

由于`permission_type`是一个数组字面量，`type`因此最终数组项的属性最终是一个元素的数组。如果您不打算这样做，请删除数组表示法。

例如：

```
var source = jsonPermission.permissions;
var arr_permissions = [];
for(var i=0;i<source.length;i++){
    arr_permissions.push({
        data: source[i].permissionName,
        type: ["permission"] // or type: "permission" if you didn't want an array
    });
} 
```

这个版本的代码简化了一点，但也有一个很重要的区别：每一项`type`都*不再是同一个对象了*，所以不能一次全部更改（有意无意，有发生的坏习惯）当你没想到的时候）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T09:26:55.777

怎么样：

```
obj_permissions["type"] = [ permission_type[0] ]; 
```

代替：

```
obj_permissions["type"] = permission_type; 
```

看到不同？您正在使用数组。

*[编辑：实际上没有太大区别，但这仍然澄清了。看评论。]*

# performance - 对命令窗口使用编辑器时出现奇怪的 matlab 性能

> ID：10495943
> 
> 赞同：2
> 
> 时间：2012-05-08T09:24:10.813
> 
> 标签：performance, matlab, performance-testing

我可能误解了一些东西..但我希望在编辑器和命令窗口中运行代码是相同的..

我在编辑器中有以下代码

```
display('  ');
display('script');
fac = @(n) prod(1:n);

n=20;
display(['- use of anonymous function: fac = @(n) prod(1:n); with n = ' num2str(n)]);
tic; fac(n); toc;

display(['- use of build in MatLab function: factorial(); with n = ' num2str(n)]);
tic; factorial(n); toc; 
```

在我运行之前（这叫编译还是执行？）我快速在命令窗口中输入相同的命令。这给了我这个：

![奇怪的表演时间](../Images/0967ba0c57d9c7eabc65122d48c5259f.png)

所以突然之间，编辑器中的阶乘函数在性能方面得到了提升。刚刚发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:05:42.090

首先，您尝试测量的计算速度太快，无法获得准确读数。由于系统上的其他进程和活动，它远低于使用 tic/toc 时获得的测量噪声。为了获得更准确的测量，多次重复计算......（我会重复计算，因此需要 10-20 秒）。

其次，以交互方式键入的代码和在脚本中键入的代码之间确实存在差异。我认为 JIT 仅适用于从脚本或函数 m 文件运行的代码，而不适用于在解释器中运行的东西（但我现在正在努力寻找参考 - 如果我找到它，我会添加）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T09:28:54.527

您的意思是在命令窗口中运行和从脚本运行之间的运行时间差异？我认为它们是由您的计算机上运行的其他所有东西、matlab 自己的内存管理和其他一些东西引起的......

这里有更详细的解释：http: [//www.mathworks.com/matlabcentral/newsreader/view_thread/296850](http://www.mathworks.com/matlabcentral/newsreader/view_thread/296850)

另一种测量 cpu 所用时间的方法是函数[cputime](http://www.mathworks.nl/help/techdoc/ref/cputime.html)。然而，它的精度较低。因此，请扩展您的测试用例，因为它需要更长的时间（~~n=2e7 例如~~阶乘上限为 171）才能看到 cputime 的结果。

结论：一燕不成夏

通过更多案例扩展您的测试。

```
n=200;
tic;
for ii=1:1e4
    factorial(n);
end;
toc 
```

# c# - 应用程序对象在交付服务器上丢失数据

> ID：10495944
> 
> 赞同：0
> 
> 时间：2012-05-08T09:24:12.297
> 
> 标签：c#, asp.net, web-applications, session-state

我正在用 ASP.NET 2.0 (C#) 开发 webapp。我有问题要解决问题。

应用程序应该显示在线用户，并且只有管理员应该显示用户名。我使用 Application[] 对象来存储用户名和计数，在 Globall.asax 文件中设置值。

在下面的代码中，我将显示与计数器相关的部分：

```
 protected void Application_Start(object sender, EventArgs e){
            Application["OnlineCounter"] = 0; 
    }
    protected void Session_Start(Object sender, EventArgs e){
            // Code that runs when a new session is started
            if (Application["OnlineCounter"] != null){
                Application.Lock();
                Application["OnlineCounter"] = ((int)Application["OnlineCounter"]) + 1;
                Application.UnLock();
            }
    }
    protected void Session_End(Object sender, EventArgs e){
            // Code that runs when a new session is started
            if (Application["OnlineCounter"] != null){
                Application.Lock();
                Application["OnlineCounter"] = ((int)Application["OnlineCounter"]) - 1;
                Application.UnLock();
            }
    } 
```

在我的本地机器上使用此代码，我可以正确计算在线用户。相反，当我在服务器（Windows 2003 Server 和 IIS6）上发布此代码时，我发现了以下问题：使用 3 个不同的用户（使用不同的浏览器）从我的机器访问，我将在单个页面中只看到 1 个用户（在每个浏览器中我只看到 1 个在线用户）！

这有什么问题吗？任何建议表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:10:46.307

您可以使用性能计数器来获取该数字。

这里有[ASP.NET 的性能计数器](http://msdn.microsoft.com/en-us/library/fxk122b4%28v=vs.100%29.aspx)列表。在“ASP.NET 应用程序性能计数器”下查找“会话活动”的描述。

然后，您可以使用[PerformanceCounter 类](http://msdn.microsoft.com/en-us/library/z0wssx8x.aspx)为您的应用程序获取该性能计数器的值。

问题是这需要特权：

> 要读取 Windows Vista、Windows XP Professional x64 Edition 或 Windows Server 2003 中的性能计数器，您必须是 Performance Monitor Users 组的成员或具有管理权限。

一种方法是模拟应用程序的一部分，由具有这些权限的用户运行。它可以是 .asmx 网络服务，也可以是显示所需信息的网络表单本身。您只能使用web.config 中的[位置](http://msdn.microsoft.com/en-us/library/b6x6shw7%28v=vs.100%29.aspx)和[身份模拟来模拟该服务。](http://msdn.microsoft.com/en-us/library/72wdk8cc%28v=vs.100%29.aspx)设置具有所需权限的用户并模拟该用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:45:20.603

服务器是否配置为每个应用程序池使用多个工作进程？

ASP.NET 状态管理建议：http: [//msdn.microsoft.com/en-us/library/z1hkazw7.aspx](http://msdn.microsoft.com/en-us/library/z1hkazw7.aspx)

> **应用范围**：应用状态的范围也可能是一个缺点。存储在应用程序状态中的变量仅对运行应用程序的特定进程是全局的，并且每个应用程序进程可以有不同的值。*因此，您不能依赖应用程序状态来存储唯一值或更新 Web-garden 和 Web-farm 服务器配置中的全局计数器。*

使用 IIS 6.0 配置 Web Gardens：[https ://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/659f2e2c-a58b-4770-833b-df96cabe569e.mspx?mfr=true](https://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/659f2e2c-a58b-4770-833b-df96cabe569e.mspx?mfr=true)

# asp.net-mvc - NuGet 将流氓行添加到 web.config MVC4

> ID：10495949
> 
> 赞同：3
> 
> 时间：2012-05-08T09:24:33.280
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, nuget

每次我使用 Nuget 安装任何东西时，它都会添加到我`<Runtime><asseblyBinding>`的 web.config 中的部分：

```
 <dependentAssembly>
    <assemblyIdentity name="System.Web.Razor" publicKeyToken="31bf3856ad364e35" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
  </dependentAssembly> 
```

显然我使用的是 MVC4，所以对 Razor 2.0.0.0 的引用会破坏事情，并引发以下运行时错误。

```
Could not load type 'System.Web.Razor.Parser.SyntaxTree.CodeSpan' from assembly 'System.Web.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'. 
```

它很容易修复，只需从 Web.Config 中删除 rouge 部分，但仍然非常烦人！任何人都知道为什么会发生这种情况，或者如何解决这个问题？

我正在使用 Nuget 包管理器版本 1.7.30402.9028

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:32:40.913

单个包能够提供用 PowerShell 编写的安装例程，这可能就是这里发生的情况。即使您安装了与 Razor 无关的东西，例如 JQuery，也会发生同样的事情吗？

谢谢，克莱

# jira - 如何使用脚本或代码将错误动态记录到 JIRA

> ID：10495950
> 
> 赞同：0
> 
> 时间：2012-05-08T09:24:33.920
> 
> 标签：jira, jira-plugin

我正在使用 XStudio——一个测试管理应用程序，它当前包含我的测试用例结果（通过/失败）。我计划使用 XStudio 将错误动态记录到 JIRA 中。请让我知道是否有任何插件可以做同样的事情，或者我应该编写脚本来记录缺陷。如果编写脚本是一个不错的选择，请帮助我编写脚本以记录错误并从 XStudio 调用脚本。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T07:20:22.027

您可以使用[Jira JIRA Remote API](https://developer.atlassian.com/display/JIRADEV/JIRA+Remote+API+Reference)。您应该根据您的 Jira 版本和所需的脚本语言在 REST、SOAP、XML-RPC 或 JSON-RPC 之间进行选择。

为了做类似的事情，我使用了 python 和 XML-RPC，你可以在[这里找到一个很好的例子](https://developer.atlassian.com/display/JIRADEV/Creating+an+XML-RPC+Client)。如果您需要任何帮助，请提供 Jira 的版本号、API 和语言。

祝你好运！

# java - Java BitSet 允许轻松连接 BitSet

> ID：10495953
> 
> 赞同：10
> 
> 时间：2012-05-08T09:24:41.643
> 
> 标签：java, concat, bitset

我需要一个 BitSet，它可以轻松连接多个 BitSet，创建一个新的 BitSet。[默认实现](http://docs.oracle.com/javase/6/docs/api/java/util/BitSet.html)没有这样的方法。

你们中的任何人都知道在某些外部库中是否有任何实现可以轻松连接？

例如，假设我有一个位数组 11111 和另一个位数组 010101。我想要附加功能。所以在连接之后会产生 11111010101。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T10:46:53.803

好吧，因为没有 leftshift 方法，所以没有办法实现这种非常高效的（性能*和内存）。*

您可以做的是使用明显`nextSetBit`的 for 循环 - 速度慢，但内存效率高。

可能更快的方法是`toLongArray`在一个上使用，将正确转移到一个足够大的数组中的副本，从中创建一个位集，或者与另一个一起创建一个位集。这样，您就不会对单个位进行任何位移，而是对单词大小的块进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-28T07:25:49.183

这对我有用：

```
BitSet concatenate_vectors(BitSet vector_1_in, BitSet vector_2_in) {
  BitSet vector_1_in_clone = (BitSet)vector_1_in.clone();
  BitSet vector_2_in_clone = (BitSet)vector_2_in.clone();
  int n = 5;//_desired length of the first (leading) vector
  int index = -1;
  while (index < (vector_2_in_clone.length() - 1)) {
    index = vector_2_in_clone.nextSetBit((index + 1));
    vector_1_in_clone.set((index + n));
  }
  return vector_1_in_clone;
} 
```

结果：11111010101

# android - Android：如何在操作栏中显示图标但不在选项菜单中？

> ID：10495959
> 
> 赞同：5
> 
> 时间：2012-05-08T09:25:27.820
> 
> 标签：android, android-actionbar

如何在操作栏中显示图标，但不能同时在选项菜单中显示？是否可以仅通过 XML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:49:38.483

通常，当您有可用的操作栏时，您就没有操作菜单了。菜单项不加倍。

如果您在 Android SDK > 10 上获得操作栏并且在 Android SDK <= 10 上获得选项菜单，则考虑使用 ActionBarSherlock，以使操作栏也向后兼容较旧的 Android 版本：

[http://actionbarsherlock.com/](http://actionbarsherlock.com/)

# objective-c - 即时更改 Popover 视图框架

> ID：10495965
> 
> 赞同：2
> 
> 时间：2012-05-08T09:25:59.037
> 
> 标签：objective-c, cocoa, osx-lion, popover

当弹出窗口显示时，如何根据条件检查使其大小可变？使用弹出框时是否支持此功能？

这是我更改帧大小的示例：

```
CGFloat newHeight = 200;
NSRect newFrame  = [parentView frame];
newFrame.size.height = newHeight;

NSView* childView = someView;

[parentView setFrame:newFrame];
[self.view addSubview:childView]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-14T20:38:38.960

不知道是否有任何更改，但在 10.9 中，您所要做的就是在弹出框上设置内容大小，例如：

```
[popoverView setFrame:NSMakeRect(0, 0, 581, 581)];
[thePopover setContentSize:popoverView.frame.size]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T21:25:15.893

您需要将 的`popupwindow.contentViewController`属性更改为具有不同大小视图`NSPopover`的新属性。`NSViewController`也就是说，调整视图框架的大小只会导致奇怪的绘图问题。要使弹出窗口更改大小，`contentViewController`必须更改。

理想情况下，您将设置一个新的视图控制器，它本质上是您现有的副本`NSViewController`，但包含一个更高/更短的视图。但在最坏的情况下，您可以执行以下操作：

```
gPopoverWindow.contentViewController = [[[NSViewController alloc] initWithNibName: @"tempNibName" bundle: nil] autorelease];
NSView *v = self.view;
NSRect b = [v frame];
b.size.height += 25;
[v setFrame: b];
gPopoverWindow.contentViewController = self; 
```

在我的测试中，这导致弹出框开始收缩动画（因为被设置为临时视图控制器），然后增长到新的大小。

# android - 如何在android中从sdcard显示视频？

> ID：10495966
> 
> 赞同：0
> 
> 时间：2012-05-08T09:26:01.437
> 
> 标签：android

嗨，我需要显示 sd 卡中的视频。我将视频保存在 SD 卡中并尝试使用以下代码。但是视频没有显示....请帮助我哪里出错了....

我的代码：

```
package com.videoapp;

import android.app.Activity;
import android.os.Bundle;
import android.widget.MediaController;
import android.widget.VideoView;

public class NewvideoappActivity extends Activity
{
    private VideoView vView;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    { 
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        vView = (VideoView)findViewById(R.id.myvideoview);
        vView.requestFocus();
        vView.setVideoPath("/sdcard/watch.3gp");
      vView.setMediaController(new MediaController(this));
        vView.start();
    }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   >
<TextView
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:text="@string/hello"
   />
<LinearLayout
   android:orientation="vertical"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content">
<VideoView
   android:id="@+id/myvideoview"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content" />
</LinearLayout>
</LinearLayout> 
```

日志猫：

![在此处输入图像描述](../Images/7db9d8c73bbf08c17e59139e2d453563.png)

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:34:34.373

```
vv = (VideoView) findViewById(R.id.videoView1);
vv.setVideoURI(Uri.parse("/sdcard/myvideo.3gp"));
vv.start(); 
```

[https://github.com/commonsguy/cw-advandroid/tree/master/Media/Video](https://github.com/commonsguy/cw-advandroid/tree/master/Media/Video) 看这个例子

# php - ASP.NET MVC3 C# 像在 PHP 中一样发送电子邮件

> ID：10495967
> 
> 赞同：3
> 
> 时间：2012-05-08T09:26:01.487
> 
> 标签：php, asp.net, asp.net-mvc-3, sendmail

我对从 MVC3 应用程序发送电子邮件有疑问。我已经阅读了有关 ActionMailer.Net 的示例，我已经看到了很多论坛和某人的帮助。我在任何地方都能看到 SMTP 服务器及其设置，例如在 Web.config 中或在适当的方法/函数中。是否可以在没有 smtp 设置的情况下发送电子邮件？我正在构建将由多个用户使用的应用程序，我不想让他们需要设置一些 SMTP ......

我需要发送诸如“您的密码是 xxxx，请访问 www.mysite.com，谢谢”之类的电子邮件。等等。我不需要将它放在任何邮箱中（作为历史记录），我不想回复它。

是否有可能像在 php 中使用 mail(...) 函数，而无需设置 SMTP 服务器，我可以从 -> 发送到我想要的任何内容。

所以我对某事理解不好。请帮我解决这个问题。非常感谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T10:02:00.357

你必须有一个 SMTP 服务器，否则你不能通过 SMTP 发送邮件。PHP 也是如此。

您是否需要进行设置在很大程度上取决于您的主机。大多数服务器将在配置文件中设置 SMTP 的内容更高的链，因此通常您可以将设置保留为默认值，并且 ASP.Net 仍然能够使用 SMTP 发送邮件，而无需特定设置。

但是，您的主机也可能要求您使用特定的 SMTP 设置。这是您需要与托管您网站的人员核实的事项。

如果您需要有关如何使用最少代码发送电子邮件的示例代码，这样的事情应该可以工作，前提是您的主机不希望您指定设置：

```
var message = new MailMessage(FROM ADDRESS HERE, TO ADDRESS HERE)
        {
            Subject = "Please confirm your email",
            Body = "PUT SOME BODY COPY HERE"

        };

        var client = new SmtpClient();

        client.Send(message); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T09:27:13.467

> 是否可以在没有 smtp 设置的情况下发送电子邮件？

当然这是不可能的。如果没有 SMTP 服务器，您将无法发送电子邮件。这根本没有意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T10:54:15.590

可以直接通过您的代码在没有 SMTP 服务器的情况下发送邮件，我已经这样做了，但几个月后，邮件保护之类的事情开始阻止我的 IP。只需阅读此[博客](http://dotnet-gurus.blogspot.com/2009/03/send-email-in-net-application-without.html)。;)

# c# - 带有 System.Object 对象的 XmlSerializer

> ID：10495969
> 
> 赞同：1
> 
> 时间：2012-05-08T09:26:06.387
> 
> 标签：c#, .net, serialization, exception-handling, xmlserializer

我似乎找不到对此的明确回应，这让我发疯。XmlSerializer 类似乎适用于任何已定义的内容，甚至是嵌套类。但是当其中一个类包含 System.Object 时，它会呕吐。有谁知道解决这个问题的简单方法？

```
namespace test
{
    public class SomeList
    {
        public object obj;
    }

    public class Person
    {
        public string first;
        public string last;
    }

    class Program
    {
        static void Main(string[] args)
        {
            try
            {
                Console.WriteLine("Creating object...");
                Person me = new Person();
                me.first = "MyFirst";
                me.last = "MyLast";

                Console.WriteLine("- Serialized: " + serialize_xml<Person>(me));
                Console.WriteLine("");
                Console.WriteLine("Creating object with embedded generic...");
                SomeList test = new SomeList();
                test.obj = me;
                Console.WriteLine("- Serialized: " + serialize_xml<SomeList>(test));

                Console.WriteLine("");
                Console.Write("Press ENTER to exit.");
                Console.ReadLine();
                return;
            }
            catch (Exception e)
            {
                print_exception(e);
                Console.WriteLine("");
                Console.Write("Press ENTER to exit.");
                Console.ReadLine();
                return;
            }
        }

        static string serialize_xml<T>(T obj)
        {
            XmlSerializer xmls = new XmlSerializer(typeof(T));
            using (MemoryStream ms = new MemoryStream())
            {
                XmlWriterSettings settings = new XmlWriterSettings();
                XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
                ns.Add("", "");

                settings.Encoding = Encoding.UTF8;
                settings.Indent = false;
                settings.NewLineChars = "";
                settings.NewLineHandling = NewLineHandling.None;
                settings.NewLineOnAttributes = false;
                settings.ConformanceLevel = ConformanceLevel.Document;
                settings.OmitXmlDeclaration = true;

                using (XmlWriter writer = XmlTextWriter.Create(ms, settings))
                {
                    xmls.Serialize(writer, obj, ns);
                }

                string xml = Encoding.UTF8.GetString(ms.ToArray());

                // remove the BOM character at the beginning which screws up decoding
                if (xml.Length > 0 && xml[0] != '<')
                {
                    xml = xml.Substring(1, xml.Length - 1);
                }
                return xml;
            }
        }

        static void print_exception(Exception e)
        {
            Console.WriteLine(" = Exception Type: " + e.GetType().ToString());
            Console.WriteLine(" = Exception Dat " + e.Data);
            Console.WriteLine(" = Inner Exception: " + e.InnerException);
            Console.WriteLine(" = Exception Message: " + e.Message);
            Console.WriteLine(" = Exception Source: " + e.Source);
            Console.WriteLine(" = Exception StackTrace: " + e.StackTrace);
        }
    }
} 
```

在控制台上创建以下输出：

```
 = Exception Type: System.InvalidOperationException
 = Exception Dat System.Collections.ListDictionaryInternal
 = Inner Exception: System.InvalidOperationException: The type test.Person was not expected. Use the XmlInclude or SoapInclude attribute to specify types that are not known statically.
   at System.Xml.Serialization.XmlSerializationWriter.WriteTypedPrimitive(String name, String ns, Object o, Boolean xsiType)
   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriterSomeList.Write1_Object(String n, String ns, Object o, Boolean isNullable, Boolean needType)
   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriterSomeList.Write2_SomeList(String n, String ns,SomeList o, Boolean isNullable, Boolean needType)
   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriterSomeList.Write3_SomeList(Object o)
 = Exception Message: There was an error generating the XML document.
 = Exception Source: System.Xml
 = Exception StackTrace:    at System.Xml.Serialization.XmlSerializer.Serialize(XmlWriter xmlWriter, Object o, XmlSerializerNamespaces namespaces, String encodingStyle, String id)
   at System.Xml.Serialization.XmlSerializer.Serialize(XmlWriter xmlWriter, Object o, XmlSerializerNamespaces namespaces)
   at test.Program.serialize_xml[T](T obj) in C:\Users\jchristn\Documents\Visual Studio 2010\Projects\test\test\Program.cs:line 83
   at test.Program.Main(String[] args) in C:\Users\jchristn\Documents\Visual Studio 2010\Projects\test\test\Program.cs:line 47 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T09:35:09.953

假设可以包含一组固定的对象`SomeList.obj`，并且该组在编译时是已知的，您可以使用以下命令在容器类上指定它们`XmlIncludeAttribute`：

```
[XmlInclude(typeof(Person))]
[XmlInclude(typeof(Other))]
public class SomeList
{
    public object obj;
}

public class Person
{
    public string first;
    public string last;
}

public class Other
{
    public int MyProperty { get; set; }
} 
```

`XmlSerializer`如果在编译时类型未知，则可以在构造函数的重载中指定类型数组：

```
XmlSerializer xmls = new XmlSerializer(typeof(T), new Type[] { <...types...> }); 
```

# android - 无论是否成功登录，我都不能成为消息

> ID：10495971
> 
> 赞同：-1
> 
> 时间：2012-05-08T09:26:07.397
> 
> 标签：android

```
 EditText txtUserName;
 EditText txtPassword;
 Button btnLogin;
 Button btnCancel;

    /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);

     txtUserName=(EditText)this.findViewById(R.id.txtUname);
     txtPassword=(EditText)this.findViewById(R.id.txtPwd);
     btnLogin=(Button)this.findViewById(R.id.btnLogin);

           Button  btnLogin=(Button)this.findViewById(R.id.Button01);
         btnLogin.setOnClickListener(new OnClickListener() {

             @Override
             public void onClick(View v) {
                 if((txtUserName.getText().toString()).equals(txtPassword.getText().toString())){
                     Toast.makeText(LoginappActivity.this, "Login Successful",Toast.LENGTH_LONG).show();
                    } else{
                     Toast.makeText(LoginappActivity.this, "Invalid Login",Toast.LENGTH_LONG).show(); 
                     }
                       }
                          });

           Button next = (Button) findViewById(R.id.Button01);
           next.setOnClickListener(new View.OnClickListener() {   

                public void onClick(View view) {
                Intent myIntent = new Intent(view.getContext(), AddName.class);
                startActivityForResult(myIntent, 0); 
            }});

       }

 } 
```

在模拟器上运行此应用程序时，它运行良好，没有任何错误，但**没有显示任何用户名和密码已成功记录或登录无效的消息，**但是当我单击下一步按钮时，将显示下一个屏幕

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:31:08.697

删除此行并检查它...

```
 Button  btnLogin=(Button)this.findViewById(R.id.Button01);<---------Remove it 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:32:46.987

```
 Button  btnLogin=(Button)this.findViewById(R.id.Button01); 
```

和

```
 Button next = (Button) findViewById(R.id.Button01); 
```

所以你在同一个按钮上有两个 onClickListeners。

# android - android全息主题背景

> ID：10495972
> 
> 赞同：1
> 
> 时间：2012-05-08T09:26:19.300
> 
> 标签：android, background, themes

我想知道，是否可以将使用android的holo主题时显示的背景作为drawable？（你知道，3.0+ 显示的深黑色和蓝色背景）我需要将它用作可绘制对象，所以如果有人知道这是否可以做到，请告诉我..

![在此处输入图像描述](../Images/0d9882fd943f44f6ebd9b04bc2a06ac7.png)

对不起，但我忘了提到这是在平板设备上显示的，不确定手机。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-24T18:16:14.680

# 文件的位置

**全息黑暗：**

> /path_to_sdk/platforms/android-version/data/res/drawable/background_holo_dark.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient
            android:startColor="#ff000000"
            android:endColor="#ff272d33"
            android:angle="270" />
</shape> 
```

**全息灯：**

> /path_to_sdk/platforms/android-version/data/res/drawable/background_holo_light.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient
            android:startColor="#ffe8e8e8"
            android:endColor="#ffffffff"
            android:angle="270" />
</shape> 
```

# 做你自己的

将以下代码放入*res/drawable/background.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<shape 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:shape="rectangle">
    >
<gradient 
    android:angle="270"
    android:startColor="#ff020202"
    android:endColor="#ff272D33"
    android:type="linear" />
</shape> 
```

将背景引用添加到您的父视图组

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background"> 
```

玩弄这些值，直到获得所需的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:41:05.997

如果可能，最好的办法是查看 3.0 的 android .jar（可以在 Eclipse 中使用 ADT 下载）图像可以在 /drawable/drawable-hdpi 或 /drawable 中的某个位置找到

如果没有，则可能只能在源中找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:21:10.553

在这里，也许这会有所帮助：http: [//developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

# android - Android - 一个应用程序中的两个地图

> ID：10495975
> 
> 赞同：2
> 
> 时间：2012-05-08T09:26:26.243
> 
> 标签：android, google-maps, android-mapview, android-maps

我有一个应用程序，在主屏幕上显示谷歌地图视图。但我还需要在细节视图中显示地图。

我知道同时运行两张地图是不可能的。当我想在主地图上显示某些东西时，一切都在工作，然后在详细视图中显示，但是当我回到主地图时，它停止了。

如何停止主地图并稍后返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:36:04.570

在一个应用程序中拥有两个地图会产生许多奇怪的应用程序行为。例如，我在第二张地图中显示了一张地图的叠加层。
也就是说，可以在一个应用程序中拥有两个地图，而不会发生上述情况。您需要做的是为第二个地图视图指定一个新进程：

```
<activity
        android:label="@string/app_name"
        android:name=".SecondMapActivityName"
        android:process=":SecondMapProcess"
         >
</activity> 
```

上面的代码位于清单中，用于包含第二个 MapView 的活动。这样，在同一个应用程序中为该活动启动一个新流程，并且您的两个地图都按应有的方式运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:10:52.297

我所做的是每次我想使用它时在代码中创建一个新的地图视图（是的开销，但它有效；））。

```
mMapView = new MapView(this, MAPS_KEY);
setContentView(mMapView);
mMapView.invalidate(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-04T23:53:32.050

如果您不需要与其他地图进行交互，您可以在精简模式下使用它： [https ://developers.google.com/maps/documentation/android-api/lite](https://developers.google.com/maps/documentation/android-api/lite)

它创建一个看起来像地图的位图图像。

# java - struts.serve.static=true 和 struts,serve.static.browserCache=false 不工作

> ID：10495980
> 
> 赞同：1
> 
> 时间：2012-05-08T09:26:42.627
> 
> 标签：java, struts2

`struts.serve.static=true`使用和标签的浏览器缓存`struts,serve.static.browserCache=false`不起作用我有一个要求，即使用户注销并单击后退按钮，它也会显示欢迎屏幕以避免我在其中配置`Struts.xml`

```
 <constant name="struts.serve.static" value="true" />
   <constant name="struts.serve.static.browserCache" value="false" /> 
```

但它仍然没有发生最后我尝试通过放置`struts.serve.static=true`并 `struts,serve.static.browserCache=false`在消息资源属性文件中它不起作用你能帮我解决这个问题即使它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T11:52:16.150

上面的常量将被 S2 用于服务器来自 jar 内部的静态内容，然后 S2 将写入标头以告诉浏览器缓存内容，以便后续请求浏览器不需要从服务器获取内容。这是一个加快网站速度的标准方法，它与浏览器后退按钮无关。

当您注销用户时，请确保您使会话无效。您面临的是浏览器的缓存副本。

当您请求页面浏览器的副本时，检查其缓存是否相同，如果是，则代替请求服务器从其缓存中提供内容。只需单击需要用户登录的任何链接，您将看到该链接不起作用，因为在这种情况下，浏览器正在向服务器请求内容。

如果你想控制这个，你可以设置缓存控制头来请求浏览器不要缓存你的内容，比如

```
response.setHeader("Pragma", "no-cache");
response.setHeader("Cache-Control", "no-cache");
response.setHeader("Expires", "0"); 
```

请通过此线程了解详细信息

[如何使用 struts2 禁用后退按钮](https://stackoverflow.com/questions/10497281/how-to-disable-back-button-using-struts2/10497954#10497954)

# android - phonegap android 版本(1.7) 中的问题

> ID：10495982
> 
> 赞同：0
> 
> 时间：2012-05-08T09:26:45.450
> 
> 标签：android, cordova

以前我使用过 phonegap 1.1.0 jar、1.1.0 js 和诸如 childbrowser 和系统通知之类的插件。它工作正常。我遇到了黑屏应用程序问题（[Android：应用程序中的 BlackScreen](https://stackoverflow.com/questions/10492786/android-blackscreen-in-application)）

所以我在android phonegap 应用程序中使用了cordova-1.7.0.jar 和cordova-1.7.0.js。但是插件中出现错误。

**编译时**出错****

 **上下文无法加载，许多类无法导入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:05:30.280

旧插件与当前版本不兼容，最好从头重新安装插件。

见： [http ://simonmacdonald.blogspot.co.uk/2012/04/migrating-your-phonegap-plugins-to.html](http://simonmacdonald.blogspot.co.uk/2012/04/migrating-your-phonegap-plugins-to.html)**

# android - 格式化 System.currentTimeMillis()

> ID：10495983
> 
> 赞同：2
> 
> 时间：2012-05-08T09:26:45.823
> 
> 标签：android, date, formatting

我正在尝试将以下时间格式化为 hh:mm:ss：

```
long elapsed;
elapsed = ((System.currentTimeMillis() - startTime) / 1000); 
```

这样做的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T09:32:09.063

您可以使用 Android 版本的[`DateFormat`](http://developer.android.com/reference/android/text/format/DateFormat.html)：

```
DateFormat.format("hh:mm:ss", elapsed); 
```

请注意，经过的时间应该以毫秒为单位，因此您应该删除`/1000`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T09:32:51.510

尝试这个，

```
long elapsed;
elapsed = ((System.currentTimeMillis() - startTime) / 1000);

String display = String.format("%02d:%02d:%02d", elapsed / 3600, (elapsed % 3600) / 60, (elapsed % 60));
System.out.println(display); 
```

让我知道发生了什么..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T09:30:29.133

我建议您为此使用[SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)吗？从该页面具有多种格式的示例：

```
 String[] formats = new String[] {
   "yyyy-MM-dd",
   "yyyy-MM-dd HH:mm",
   "yyyy-MM-dd HH:mmZ",
   "yyyy-MM-dd HH:mm:ss.SSSZ",
   "yyyy-MM-dd'T'HH:mm:ss.SSSZ",
 };
 for (String format : formats) {
   SimpleDateFormat sdf = new SimpleDateFormat(format, Locale.US);
   System.err.format("%30s %s\n", format, sdf.format(new Date(0)));
   sdf.setTimeZone(TimeZone.getTimeZone("UTC"));
   System.err.format("%30s %s\n", format, sdf.format(new Date(0)));
 } 
```

# javascript - 用javascript格式化console.log中的输出

> ID：10495986
> 
> 赞同：1
> 
> 时间：2012-05-08T09:26:55.013
> 
> 标签：javascript

我希望使用 console.log 以表格格式显示在 webconsole 中的输出是否可以打印出来。例如，我有两个变量 x 和 y，其值不断变化。我可以在控制台的表格中打印这些变量吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-05T04:22:06.973

```
console.table([{a:1, b:2, c:3}, {a:"foo", b:false, c:undefined}]);
console.table([[1,2,3], [2,3,4]]); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-08T09:27:57.413

利用

```
console.dir(someObject); 
```

确保您的输出是对象。

您还可以在 firebug 网站[http://getfirebug.com/logging找到其他一些控制台命令](http://getfirebug.com/logging)

谷歌浏览器见官方[文档](https://developers.google.com/chrome-developer-tools/docs/console)

# objective-c - Objective C - 让方法只调用一次

> ID：10495987
> 
> 赞同：3
> 
> 时间：2012-05-08T09:26:55.667
> 
> 标签：objective-c, cocoa

如果我有这个方法：

```
-(void) methodName
{
    action1;
    action2;
    [self methodName];
} 
```

我希望 [self methodName] 调用只执行一次，因此该方法只连续调用两次。这可以做到吗？不确定我应该在文档中的哪个位置查找。

每当调用方法“methodName”时，当 action1 和 action2 完成时，它应该再次调用自身，但只调用一次。在我编写的示例代码中完成的方式将永远持续下去（我猜）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-08T09:28:54.493

如果您的意思是在应用程序的整个生命周期中只说一次，您可以使用[`dispatch_once`](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man3/dispatch_once.3.html)，如下所示：

```
-(void)methodName
{
    action1;
    action2;

    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
       [self methodName];
    });
} 
```

但是，如果您打算执行该方法`action1`并且`action2`每次调用两次，那么您有两个选择：

1）将该功能包装在另一种方法中：

```
- (void)executeMethod {
    [self methodName];
    [self methodName];
} 
```

2）更简单，将其包装在一个循环中：

```
- (void)methodName {
   for(int i = 0; i < 2; ++i) {
      action1();
      action2();
   }

   //...
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T09:28:54.950

您可以使用静态变量：

```
-(void) methodName
{
    static BOOL called = NO;
    if (called == NO)
    {
        called = YES;
        [self methodName];
    }
    else
    {
        called = NO;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T09:32:11.343

最简单的做法是将其拆分为两种方法：

```
-(void) subMethodName
{
    action1;
    action2;
}

-(void) methodName
{
    [self subMethodName];
    [self subMethodName];
} 
```

或者使用某种形式的循环。

（您在原始代码中拥有的是无限递归 - 通常不是一件好事。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T09:31:53.373

您需要对其应用一些逻辑。这可以使用 Bool 变量或简单的计数。

拿

```
int Count=0; //as a global variable. 
```

现在只需修改您的方法如下

```
-(void) methodName
{
    Count++;
    action1;
    action2;
    if(Count==1)
       [self methodName];
} 
```

# jquery - Jquery使用ajax和appendTo id获取内容

> ID：10495996
> 
> 赞同：1
> 
> 时间：2012-05-08T09:27:32.377
> 
> 标签：jquery, ajax, appendto

我用 ajax 加载第二个页面，并希望将该页面中的特定 id 附加到当前页面上。

```
function Content() {
    $("ul.tabs li a").click(function() {
    $.ajax({ 
        url: $(this).attr('href'),
        success: function(response) {
            $(response).find('ul#image-gallery-items').appendTo('ul#image-gallery-items');
        }
    });
    return false;
    })
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:40:34.523

您还可以使用 jQuery[`load`](http://api.jquery.com/load/)函数加载页面片段：

```
$("ul.tabs li a").click(function() {
    $('#image-gallery-items').load(this.href + ' #image-gallery-items');
    return false;
})​ 
```

在这种情况下，您可以使用以下*附加元素：*

```
$("ul.tabs li a").click(function() {
    $('<div></div>').load(this.href + ' #image-gallery-items').children().appendTo('#image-gallery-items');
    return false;
})​ 
```