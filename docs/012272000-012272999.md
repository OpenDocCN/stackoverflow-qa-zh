# StackOverflow 问答 12272000-12272999

# c# - 如何处理 MSTest 中的 IDisposable 夹具成员？

> ID：12272002
> 
> 赞同：3
> 
> 时间：2012-09-04T22:08:30.270
> 
> 标签：c#, mstest

我有一个测试类，里面有一些 IDisposable 项目。这是我第一次尝试做这样的事情：

```
private MemoryStream toolExampleMs;
private MemoryStream issueClassExampleMs;
private MemoryStream issueTypeExampleMs;
private MemoryStream uniqueIdExampleMs;

private Check exampleCheck;

public SuppressionDatabaseTest()
{
    this.toolExampleMs = new MemoryStream(Encoding.UTF8.GetBytes(toolExample));
    this.issueClassExampleMs = new MemoryStream(Encoding.UTF8.GetBytes(toolExample));
    this.issueTypeExampleMs = new MemoryStream(Encoding.UTF8.GetBytes(issueTypeExample));
    this.uniqueIdExampleMs = new MemoryStream(Encoding.UTF8.GetBytes(uniqueIdExample));

    this.exampleCheck = new Check();
    this.exampleCheck.IssueClass = "FooBarClass";
    this.exampleCheck.IssueType = "FooBarType";
    this.exampleCheck.Key = "FooBarExactWith?Unicode";
}

[ClassCleanup]
public void CleanupAll() // Error: CleanupAll has the wrong signature
{
    toolExampleMs.Dispose();
    issueClassExampleMs.Dispose();
    issueTypeExampleMs.Dispose();
    uniqueIdExampleMs.Dispose();
}

[TestCleanup]
public void Cleanup()
{
    this.toolExampleMs.Seek(0, SeekOrigin.Begin);
    this.issueClassExampleMs.Seek(0, SeekOrigin.Begin);
    this.issueTypeExampleMs.Seek(0, SeekOrigin.Begin);
    this.uniqueIdExampleMs.Seek(0, SeekOrigin.Begin);
} 
```

不幸的是，ClassCleanup 方法必须`static`在 MSTest 中，这意味着没有地方可以挂钩要处置的调用。这是否意味着我需要在每次单独测试之前和之后重建这些流？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T22:18:35.733

简短的回答是肯定的。您需要在每次测试之前重建这些流，并在每次测试后处理它们。这很容易使用 [TestCleanup] 和 [TestInitialize] 属性。

因此，不要在测试类中构建流： SuppressionDatabaseTest 使用 [TestInitialize]

# sql - 使用 SQL Server 2008 删除主键约束或将主键约束更改为 UNIQUE 约束

> ID：12272006
> 
> 赞同：3
> 
> 时间：2012-09-04T22:08:53.500
> 
> 标签：sql, sql-server, database, sql-server-2008, constraints

我真的需要知道是否有任何方法可以将表的主键约束更改或删除为 UNIQUE 约束

当我尝试从`Entreprise`表中删除主要约束时：

```
ALTER TABLE Entreprise
DROP CONSTRAINT  PK__Entrepri__AABA1D8F1B0907CE 
```

我收到此错误：

> 消息 3725，级别 16，状态 0，第 1 行
> 约束“ *PK_Entrepri* _AABA1D8F1B0907CE”被表“Dossier”引用，外键约束“Cle_FDOs”。
> 消息 3727，级别 16，状态 0，行 1
> 无法删除约束。请参阅以前的错误。

所以问题是我不想删除`dossier`表中的行

这是`Entreprise`表格：

```
create table Entreprise
(
    ID_Entreprise integer ,
    Raison_Social varchar(100),/*Nom Entreprise*/
    Num_Raison_Sociale varchar(20) unique ,
    Adress varchar(100),
    Abreviation varchar(10),
    CNSS_Entreprise integer unique,
    Eligible varchar(20),/*AUTOMATIQUE par raport aux CNSS_Entreprise*/
    Effectif integer,/*NB SALARIE*/
    Ville varchar(20),
    Responsable varchar(20),
    EMAIL_Responsable varchar(20),
    Tel_Responsable varchar(20),
    Fax_Responsable varchar(20),    
    Directeur varchar(20),
    EMAIL_Directeur varchar(20),
    Tel_Directeur varchar(20),
    Fax_Directeur varchar(20),
    RIB varchar(60),/*ici non sur le dossier lo*/
    Nom_Giac varchar(50) foreign key references GIAC(Nom_Giac),
    primary key(Nom_Giac,ID_Entreprise)
)
GO 
```

这是`Dossier`表格：

```
create table Dossier
(
    ID_Dossier integer primary key,
    ID_Entreprise int,/*AUTOMATIQE par rapotrt aux la cnss de l'entreprise qui l'a donne*/
    Date_Depot datetime ,
    Type_Etude varchar(2),/*DS IF combobox*/
    Dernier_Type varchar(2),/* AUTOMATIQUE */
    Eligibile varchar(3),/*  par raport aux Dernier Type et CNSS et COTISTAION EXERCICES */
    Fiche_Information varchar(3),/*checkbox o/n */
    Buletin_Adhesion varchar(3),
    Fiche_Renseignment varchar(3),
    Attestation varchar(3),
    Date_Debut datetime,
    Date_Fin datetime,
    --Etat_Dossier varchar(3), /* hado m7aydine mn war9a*/
    --Motif text,/*en cas de rejet, peu prendre null apart le cnss et cotisation ex et dernier formation *//* hado m7aydine mn war9a*/
    ID_Cabinet integer foreign key references Cabinet(ID_Cabinet),
    Montant_Demander decimal(6,2),
    Duree integer,
    Porcentage_Taux varchar(3), /* combobox 70% 80% */
    Nom_Giac varchar(50),
    constraint Cle_FDOs foreign key(Nom_Giac,ID_Entreprise) references Entreprise(Nom_Giac,ID_Entreprise),
)
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T22:42:10.633

您无法使用一条 SQL 指令自动执行“更改”，但如果您愿意，您可以实现。

`Enterprise`首先，在您的具体情况下，您需要删除那些包含对被引用表的引用的表的外键。

您需要从 中删除外键`Dossier`，然后从 中删除主键`Enterprise`，并创建一个`UNIQUE`约束。

另一个问题是，你为什么对这样做感兴趣？

也许您可以阅读讨论此问题的[其他 SO 线程。](https://stackoverflow.com/questions/158392/primary-key-versus-unique-constraint)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T22:40:08.513

正如错误所暗示的，您需要先删除外键引用。这**不会**删除中的记录`Dossier`（请参阅我的 SQL Fiddle[示例](http://www.sqlfiddle.com/#!3/413b3/1)。）：

```
ALTER TABLE Dossier DROP CONSTRAINT Cle_FDOs; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-29T21:42:14.483

我多次遇到这个问题，最终制作了一个可以接受任何主键约束并变成唯一索引的存储过程。它删除并重新创建任何引用相关表的内容（这是高度引用表的棘手部分）。

它可以处理多部分主键。

```
CREATE PROCEDURE spPrimaryKeyToUniqueKey
    @schema VARCHAR(255),
    @tableName VARCHAR(255)
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @constraintsToDrop NVARCHAR(MAX) = '';
    DECLARE @constraintsToCreate NVARCHAR(MAX) = '';
    DECLARE @indexesToDrop NVARCHAR(MAX) = '';
    DECLARE @indexesToCreate NVARCHAR(MAX) = '';

    ;WITH _fks AS (
        SELECT  
          FkName               = fk.[name]
        , SchemaName           = sch.[name] 
        , TableName            = tab1.[name]
        , ColumnName           = col1.[name]
        , ReferencedSchema     = sch2.[name]
        , ReferencedTableName  = tab2.[name]
        , ReferencedColumnName = col2.[name]
        , ReferencedColOrder   = ic.key_ordinal
        FROM sys.foreign_key_columns fkc
        JOIN sys.foreign_keys fk ON fk.object_id = fkc.constraint_object_id
        JOIN sys.tables tab1 ON tab1.object_id = fkc.parent_object_id
        JOIN sys.schemas sch ON tab1.schema_id = sch.schema_id
        JOIN sys.columns col1 ON col1.column_id = parent_column_id AND col1.object_id = tab1.object_id
        JOIN sys.tables tab2 ON tab2.object_id = fkc.referenced_object_id
        JOIN sys.schemas sch2 ON sch2.schema_id = tab2.schema_id
        JOIN sys.columns col2 ON col2.column_id = fkc.referenced_column_id AND col2.object_id = tab2.object_id
        JOIN sys.indexes i ON fk.key_index_id = i.index_id AND i.object_id = tab2.object_id
        JOIN sys.index_columns ic ON col2.column_id = ic.column_id AND ic.object_id = tab2.object_id AND i.index_id = ic.index_id
    ) 
    , _fksWithColList AS (
        SELECT
          f.FkName    
        , f.SchemaName
        , f.TableName 
        , f.ReferencedSchema
        , f.ReferencedTableName
        , TableColNameList = STUFF(
           (SELECT  ',[' + ff.ColumnName + ']'
            FROM _fks ff
            WHERE f.FkName = ff.FkName AND f.SchemaName = ff.SchemaName AND f.TableName = ff.TableName AND f.ReferencedSchema = ff.ReferencedSchema AND f.ReferencedTableName = ff.ReferencedTableName
            ORDER BY ff.ReferencedColOrder
            FOR XML PATH('')), 1, 1, '')
        , ReferencedTableColNameList = STUFF(
           (SELECT  ',[' + ff.ReferencedColumnName + ']'
            FROM _fks ff
            WHERE f.FkName = ff.FkName AND f.SchemaName = ff.SchemaName AND f.TableName = ff.TableName AND f.ReferencedSchema = ff.ReferencedSchema AND f.ReferencedTableName = ff.ReferencedTableName
            ORDER BY ff.ReferencedColOrder
            FOR XML PATH('')), 1, 1, '')
        FROM _fks f
        GROUP BY f.FkName, f.SchemaName, f.TableName, f.ReferencedSchema, f.ReferencedTableName
    ) 
    , _commands AS (
        SELECT *, 
          DropStatement   = REPLACE(REPLACE(REPLACE('ALTER TABLE [{0}].[{1}] DROP CONSTRAINT IF EXISTS [{2}];', 
            '{0}', SchemaName), 
            '{1}', TableName),
            '{2}', FkName),
          CreateStatement = REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE('ALTER TABLE [{0}].[{1}] DROP CONSTRAINT IF EXISTS [{2}]; ALTER TABLE [{0}].[{1}] ADD CONSTRAINT [{2}] FOREIGN KEY ({3}) REFERENCES [{4}].[{5}]({6});',
            '{0}', SchemaName), 
            '{1}', TableName),
            '{2}', FkName),
            '{3}', TableColNameList),
            '{4}', ReferencedSchema),
            '{5}', ReferencedTableName),
            '{6}', ReferencedTableColNameList)
        FROM _fksWithColList
        WHERE ReferencedSchema = @schema AND ReferencedTableName = @tableName
    )
    SELECT @constraintsToDrop = @constraintsToDrop + DropStatement + CHAR(13)+CHAR(10), @constraintsToCreate = @constraintsToCreate + c.CreateStatement + CHAR(13)+CHAR(10)
    FROM _commands c

    ;WITH _indexes AS (
        SELECT 
          TableName  = t.[name]
        , SchemaName = s.[name]
        , IndexName  = i.[name]
        , ColumnName = c.[name]
        , ColOrder   = ic.key_ordinal
        , ColDesc    = ic.is_descending_key
        FROM sys.tables t
        JOIN sys.schemas s ON t.schema_id = s.schema_id
        JOIN sys.indexes i ON t.object_id = i.object_id        
        JOIN sys.columns c ON t.object_id = c.object_id
        JOIN sys.index_columns ic ON t.object_id = ic.object_id AND c.column_id = ic.column_id AND i.index_id = ic.index_id
        WHERE s.[name] = @schema AND t.[name] = @tableName AND i.is_primary_key = 1
    )
    , indexesWithColList AS (
        SELECT 
          TableName 
        , SchemaName
        , IndexName 
        , IndexColList = STUFF(
           (SELECT  ',[' + ii.ColumnName + ']' + IIF(ii.ColDesc = 1, ' DESC', '')
            FROM _indexes ii
            WHERE i.TableName = ii.TableName AND i.SchemaName = ii.SchemaName AND i.IndexName = ii.IndexName  AND ii.ColOrder > 0
            ORDER BY ii.ColOrder
            FOR XML PATH('')), 1, 1, '')
        , IndexColNameList = STUFF(
           (SELECT  '_' + ii.ColumnName
            FROM _indexes ii
            WHERE i.TableName = ii.TableName AND i.SchemaName = ii.SchemaName AND i.IndexName = ii.IndexName  AND ii.ColOrder > 0
            ORDER BY ii.ColOrder
            FOR XML PATH('')), 1, 1, '')
        FROM _indexes i
        GROUP BY i.TableName, i.SchemaName, i.IndexName
    ) 
    , _commands AS (
        SELECT *,
          DropStatement   = REPLACE(REPLACE(REPLACE('ALTER TABLE [{0}].[{1}] DROP CONSTRAINT {2};', 
            '{0}', i.SchemaName),
            '{1}', i.TableName),
            '{2}', i.IndexName),
          CreateStatement = REPLACE(REPLACE(REPLACE(REPLACE('CREATE UNIQUE NONCLUSTERED INDEX [{0}] ON [{1}].[{2}] ({3});',
            '{0}', 'UX_' + i.SchemaName + '_' + i.TableName + '_' + i.IndexColNameList),
            '{1}', i.SchemaName),
            '{2}', i.TableName),
            '{3}', i.IndexColList)
        FROM indexesWithColList i
    ) 
    SELECT @indexesToDrop = @indexesToDrop + c.DropStatement + CHAR(13)+CHAR(10), @indexesToCreate = @indexesToCreate + c.CreateStatement + CHAR(13)+CHAR(10)
    FROM _commands c

    DECLARE @sql NVARCHAR(MAX);
    SET @sql = REPLACE(REPLACE(REPLACE(REPLACE('
SET XACT_ABORT ON;

BEGIN TRAN t1

--Drop foreign keys
{0}

--Drop indexes
{1}

--Create indexes
{2}

--Recreate foreign keys
{3}

COMMIT TRAN t1
',
    '{0}', @constraintsToDrop),
    '{1}', @indexesToDrop),
    '{2}', @indexesToCreate),
    '{3}', @constraintsToCreate);

    PRINT @sql;

    EXEC sp_executesql @sql
END
GO 
```

# git - git log --follow 是否适用于多个分支？

> ID：12272011
> 
> 赞同：1
> 
> 时间：2012-09-04T22:09:07.650
> 
> 标签：git, git-log

我最近看到一些很奇怪的东西。假设我有三个分支。他们都有一个名为 A 的文件。A 然后在三个分支中独立地重命名为 B。然后将三个分支合并为一个。如果现在我使用

```
git log --follow B 
```

我想我应该看到关于重命名的三个提交

```
diff --git a/A b/B
similarity index 85%
rename from A
rename to B
index b328642..5cd437a 100644
--- a/A
+++ b/B 
```

但我实际上看到的是关于从 A 重命名为 B 的提交，其他两个正在删除 A

```
diff --git B B
deleted file mode 100644
index 5db3424..0000000
--- a/B
+++ /dev/null 
```

在我看来， --follow 忽略了分支。它只是线性地跟踪日志，而不是对不同的分支进行不同的处理。

这里会发生什么？有什么办法可以避免这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:21:53.937

默认情况下，日志遵循第一个父级。因此，通过这种方式，合并只是被视为另一个提交。

# python - 使用 urllib 登录网站

> ID：12272015
> 
> 赞同：3
> 
> 时间：2012-09-04T22:09:30.153
> 
> 标签：python, urllib2, urllib

我正在尝试使用 urllib 登录网站。这是我公司的内部网站。

登录页面如下所示：

```
<form id="login" action="/accounts/login/" method="POST">
<label for="username">Username</label>
<input name="username" type="text" class="text"><br>
<label for="password">Password</label>
<input name="password" type="password" class="text"><br>
<input name="login_submit" type="submit" value="Sign in" class="submit"> 
```

我的蟒蛇看起来像这样：

```
url = 'http://10.188.36.250/accounts/login/'
values = {'user_name':'xxxx', 'password':'xxxxx'}
data = urllib.urlencode(values)
req = urllib2.Request(url,data)
res = urllib2.urlopen(req) 
```

我回来了：

urllib2.HTTPError：HTTP 错误 403：禁止

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T22:12:28.360

你做的一切都是对的，除了使用“user_name”作为键而不是“用户名”。注意表单的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:03:29.883

这完全是因为您必须在连接中使用标头。插入最流行的网络浏览器之一。在你的标题中。Mozilla - 至少。你的代码看起来像 -

```
req = urllib2.Request( url , data, headers=headers) 
```

其中标题 =`{'User-Agent': 'Mozilla/5.0 (Windows; U; Windows NT 5.0; en-GB; rv:1.8.1.12) Gecko/20080201 Firefox/2.0.0.12'}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T22:59:43.503

默认的 urllib2 open 不能很好地支持 cookie。它实际上不能很好地支持任何东西，它是 af(##$@# 的噩梦。

要使用 urllib2 完成任务，请查看`urllib2.HTTPCookieProcessor()`和`urllib2.build_opener()`. 前者被传递给后者，您将使用后者打开页面。我不记得确切，但你的代码可能看起来像：

```
opener= urllib2.build_opener( urllib2.HTTPCookieProcessor() )
req = urllib2.Request( url , data )
res = opener.open( req ) 
```

我还建议查看`requests`使在 python 中做互联网的事情不那么糟糕的模块（[http://docs.python-requests.org/en/latest/index.html](http://docs.python-requests.org/en/latest/index.html)）

# php - 使用 MySqli 和数组返回多行

> ID：12272017
> 
> 赞同：6
> 
> 时间：2012-09-04T22:09:50.427
> 
> 标签：php, arrays, mysqli

在过去两天左右的时间里，我一直在将我的函数转换为 mysqli。我遇到了一个问题。我有一个函数，它返回一个包含数据库中一行的数组。但是，我希望数组包含多行而不是一行。此外，我将如何回应各个帖子。这是我失败的尝试，仅在数组中显示一行。

```
$mysqli = new mysqli("localhost", "user", "password", "database");   

function display_posts ($mysqli, $user_id) {

   $fields = "`primary_id`, `poster_id`, `profile_user_id`, `post`";   

   $user_id = (int)$user_id;

   $query = "SELECT DISTINCT $fields FROM `posts` WHERE `profile_user_id` = $user_id 
   LIMIT 4";                    

   if ($result = $mysqli->query($query)) {

   $row = $result->fetch_assoc();

   return $row;

   $result->free();

   $stmt->close();

}} 
```

在这里，我试图显示数据。

```
$user_id = 1;

$posts = display_posts($mysqli, $user_id);

//Not sure what to do with $posts. A While loop perhaps to display each post? 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-04T22:14:18.573

你必须使用一个循环来一次得到它们：

```
<?php
function resultToArray($result) {
    $rows = array();
    while($row = $result->fetch_assoc()) {
        $rows[] = $row;
    }
    return $rows;
}

// Usage
$query = 'SELECT DISTINCT $fields FROM `posts` WHERE `profile_user_id` = $user_id LIMIT 4';
$result = $mysqli->query($query);
$rows = resultToArray($result);
var_dump($rows); // Array of rows
$result->free(); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-12-17T14:58:50.233

为什么不直接这样使用：

```
$result = mysqli_fetch_all($mysqli->query($query), MYSQLI_ASSOC); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-04T12:49:53.440

我迟到了，但我相信这是您想要实现的目标：

```
$mysqli = new mysqli("localhost", "user", "password", "database");
$fields = "`primary_id`, `poster_id`, `profile_user_id`, `post`";

function display_posts () {

    global $mysqli;
    global $fields;

    $query = "SELECT DISTINCT $fields FROM `posts` WHERE `profile_user_id` = $user_id LIMIT 4";

    $posts = $mysqli -> query($query) or die('Error: '.$mysqli -> error);

    if ($posts -> num_rows > 0) {

        while ($row = $posts -> fetch_assoc()) {

        $value = $row['/*The table column here (You can repeat this line with a different variable e.g. $value 2, $value 3 etc and matching them with the respective table column)*/'];

        echo $value./*Concatenate the other variables ($value 1 etc) here*/'<br />';

        }

    }else {

        echo 'No records found.';

    }

}

//Call the function
display_posts (); 
```

# r - 查找完全相关/冗余的数字和字符列

> ID：12272019
> 
> 赞同：3
> 
> 时间：2012-09-04T22:10:10.480
> 
> 标签：r, correlation

我有一个包含数百列的数据集。它包含邮件列表数据，其中一些列似乎彼此完全相同，但形式不同。

例如：

```
rowNum    StateCode       StateName      StateAbbreviation
  1          01             UTAH               UT
  2          01             UTAH               UT
  3          03             TEXAS              TX
  4          03             TEXAS              TX
  5          03             TEXAS              TX
  6          44             OHIO               OH
  7          44             OHIO               OH
  8          44             OHIO               OH
 ...         ...            ...                ... 
```

我想删除重叠数据并尽可能保留数字列，以便只有一列包含相同的信息。因此，上面的示例将变为：

```
rowNum    StateCode
      1          01 
      2          01   
      3          03  
      4          03  
      5          03 
      6          44
      7          44
      8          44 
     ...         ... 
```

我试过使用`cor()`，但这仅适用于数字变量。我已经尝试过`caret::nearZeroVar()`，但这仅适用于列本身。

是否有人对查找涉及非数字数据的完全相关列有任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T22:51:49.767

这是一个有趣且快速的解决方案。它首先将 data.frame 转换为适当结构化的整数类矩阵，然后用于`cor()`识别冗余列。

```
## Read in the data
df <- read.table(text="rowNum    StateCode       StateName      StateAbbreviation
  1          01             UTAH               UT
  2          01             UTAH               UT
  3          03             TEXAS              TX
  4          03             TEXAS              TX
  5          03             TEXAS              TX
  6          44             OHIO               OH
  7          44             OHIO               OH
  8          44             OHIO               OH", header=TRUE)

## Convert data.frame to a matrix with a convenient structure
## (have a look at m to see where this is headed)
l <- lapply(df, function(X) as.numeric(factor(X, levels=unique(X))))
m <- as.matrix(data.frame(l))

## Identify pairs of perfectly correlated columns    
M <- (cor(m,m)==1)
M[lower.tri(M, diag=TRUE)] <- FALSE

## Extract the names of the redundant columns
colnames(M)[colSums(M)>0]
[1] "StateName"         "StateAbbreviation" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T22:51:52.860

这会奏效吗？我的想法是，如果您调用`table(col1, col2)`，如果列是重复的，则表中的任何列都将只有一个非零值，例如：

```
 OHIO TEXAS UTAH
  1     0     0    2
  3     0     3    0
  44    3     0    0 
```

所以是这样的：

```
dup.cols <- read.table(text='rowNum    StateCode       StateName      StateAbbreviation
  1          01             UTAH               UT
  2          01             UTAH               UT
  3          03             TEXAS              TX
  4          03             TEXAS              TX
  5          03             TEXAS              TX
  6          44             OHIO               OH
  7          44             OHIO               OH
  8          44             OHIO               OH', header=T)
library(plyr)
combs <- combn(ncol(dup.cols), 2)
adply(combs, 2, function(x) {
  t <- table(dup.cols[ ,x[1]], dup.cols[ , x[2]])
  if (all(aaply(t1, 2, function(x) {sum(x != 0) == 1}))) {
    paste("Column numbers ", x[1], x[2], "are duplicates")
  }
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T22:52:56.437

这应该为您返回一张地图，告诉您哪些变量相互匹配。

```
check.dup <- expand.grid(names(dat),names(dat)) #find all variable pairs
check.dup[check.dup$Var1 != check.dup$Var2,] #take out self-reference
check.dup$id <- mapply(function(x,y) {
        x <- as.character(x); y <- as.character(y)
            #if number of levels is different, discard; keep the number for later
        if ((n <- length(unique(dat[,x]))) != length(unique(dat[,y])))  {
            return(FALSE)
            }
            #subset just the variables in question to get pairs
        d <- dat[,c(x,y)]
            #find unique pairs
        d <- unique(d)
            #if number of unique pairs is the number of levels from before,
            #then the pairings are one-to-one
        if( nrow(d) == n ) {
            return(TRUE)
        } else return(FALSE)
    },
    check.dup$Var1,
    check.dup$Var2
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T22:25:52.553

```
 dat <- read.table(text="rowNum    StateCode       StateName     
   1          01             UTAH
   2          01             UTAH
   3          03             TEXAS
   4          03             TEXAS 
   5          03             TEXAS 
   6          44             OHIO
   7          44             OHIO
   8          44             OHIO", header=TRUE)

 dat [!duplicated(dat[, 2:3]), ]
#------------
  rowNum StateCode StateName
1      1         1      UTAH
3      3         3     TEXAS
6      6        44      OHIO 
```

# javascript - 将 Zigfu 关节位置从 Real World 转换为 Projective，就像在 OpenNI 中一样

> ID：12272021
> 
> 赞同：0
> 
> 时间：2012-09-04T22:10:14.150
> 
> 标签：javascript, kinect, openni

OpenNI 提供的功能[`ConvertRealWorldToProjective`](http://openni.org/docs2/Reference/classxn_1_1_depth_generator_a70cda9f296d0ac90088cfafc34e9edd2.html)可让您轻松地将现实世界 (x,y,z) 关节位置（以 mm 为单位）转换为给定视口的以像素为单位的投影 (x,y) 位置。这对于在网络摄像头提要上绘制“骨架”非常有用。

这个功能是由 ZigJS 公开的，是作为一个函数还是可能已经在某个地方转换了？[我在文档](http://zigfu.com/static/apidoc/files/zig-js.html)中找不到任何提及它的内容，但[我很幸运地使用了 Zigfu 以前未记录的功能](https://stackoverflow.com/questions/9543248/access-kinect-rgb-image-data-from-zigjs)。

```
user.addEventListener('userupdate', function(user) {
  var real = user.skeleton[zig.Joint.Head].position; // this is real world coordinate
  // anything exposed by zigfu to convert to real world?
}); 
```

如果 Zigfu 没有提供，有没有人知道提供这种功能的优秀 JavaScript 库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T23:37:46.953

ZigJS 公开了两个（不幸的是仍然没有记录）方法：`convertImageToWorldSpace`和`convertWorldToImageSpace`. 它们都接受一个坐标数组，其中每 3 个元素代表一个点，并返回转换后的点。

**编辑**

为了节省其他人的试验和错误，它是嵌入的对象，而不是`zig`它本身具有未记录的方法。例子：

```
var zigObj = zig.findZigObject();

user.addEventListener('userupdate', function(user) {
  var real = user.skeleton[zig.Joint.Head].position;
  var projective = zigObj.convertWorldToImageSpace(real);
  // do something with the converted position, like drawing it over the webcam
}); 
```

# php - WordPress子导航：当前样式

> ID：12272023
> 
> 赞同：1
> 
> 时间：2012-09-04T22:10:24.620
> 
> 标签：php, css, wordpress, nav

我目前正在为客户开发一个网站 - 一切正常，但在导航中，我使用以下代码设置了子链接

```
<div id="sub_nav_del">
                    <h4>Take a seat</h4>
                    <?php
                    $subnav_parent = ($post->post_parent) ? $post->post_parent : $post->ID;
                    $pages = get_pages('child_of=' . $subnav_parent . '&sort_column=menu_order');
                    $count = 0;
                    foreach($pages as $page)
                    { ?>

                    <ul>
                        <li>
                        <h5 class="del">
                            <a href="<?php echo get_page_link($page->ID)  ?>" ><?php echo  $page->post_title ?></a>
                        </h5>
                        </li>
                        </ul>
                    <?php
                    }   
                    ?>
                </div> 
```

[您可以在http://www.lagourmetteria.co.uk/take-a-seat/wine-room/](http://www.lagourmetteria.co.uk/take-a-seat/wine-room/)看到一个示例，对于该页面，我希望当前页面链接为橙色。

我希望它使当前链接在子导航中成为不同的颜色。有没有一种简单的方法可以做到这一点，不幸的是我的 PHP 技能并不出色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:15:57.427

您已经拥有了作为课程所需的东西`<body>`（`wine-room`可能是蛞蝓）。因此，在您的 CSS 中，您可以执行以下魔法：

```
body.wine-room a[href*="wine-room"],
body.tasting-room a[href*="tasting-room"],
body.food-drink-menu a[href*="food-drink-menu"],
body.have-it-all-private-parties a[href*="have-it-all-private-parties"]
{
    color: orange !important;
} 
```

**更新**

在该子菜单上添加了所有 slug。

**更新 2**

添加`!important`以取代任何其他样式。

# coldfusion - 如何处理对非常常见的关键字的搜索

> ID：12272027
> 
> 赞同：3
> 
> 时间：2012-09-04T22:10:48.167
> 
> 标签：coldfusion, solr, coldfusion-9

如果用户搜索在 solr 索引中非常非常常见的关键字，我希望能够返回有用的记录。例如`education`.

在这种情况下，接近 99% 的记录中都会包含该词。所以搜索这个词或类似词需要很长时间。

这是针对**ColdFusion 上的 solr 的，**但我对仅与 solr 隔离的解决方案持开放态度。

现在我正在考虑提出一个停用词列表，并完全阻止这些搜索发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:57:18.253

如果搜索需要很长时间，可能是因为您没有限制返回的结果数量。`<cfsearch>`标签有一个`maxrows`属性，也有一个属性`startrow`，你可以用它来限制或分页数据。或者，您可以通过调用直接调用 Solr 的 Web 服务`<cfhttp>`：

```
<cfhttp url="http://localhost:8983/solr/<collection_name>/select/?q=<searchterm>&fl=*,score&rows=100&wt=json" /> 
```

Solr 默认会返回 10 行；您可以使用`rows`参数更改它。您也可以使用该`start`参数（请注意，Solr 以 0 而不是 1 开始计数）。我相信这个解决方案更灵活，特别是如果您使用的是 CF 9，因为它允许您在对分数以外的字段进行排序时进行分页。

您可以在此处找到更多详细信息： [http ://www.thefaberfamily.org/search-smith/coldfusion-solr-tutorial/](http://www.thefaberfamily.org/search-smith/coldfusion-solr-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T03:48:05.960

如果用户只搜索一个非常常见的术语，那么您需要限制搜索结果并告知用户匹配项太多。

在更一般的情况下，您希望执行两次（至少）方法。获取您的搜索词并执行查找以确定它们的“共同点”。您希望首先根据最不常用的术语进行过滤，最后根据最常用的术语进行过滤。

例如，用户搜索`serendipitous education`。您确定您有 11 个匹配`serendipitous`项和 900000 个匹配项`education`。因此，您`serendipitous`首先应用过滤器，得到 11 个匹配项。然后应用`education`过滤器，得到 7 个匹配项。

快速搜索的关键是索引和预先计算的统计信息。如果您手头有这样的统计数据，您可以动态创建优化的方法。

# javascript - 为什么 $.when().pipe().then() 有效，但 $.when().then().then() 无效？

> ID：12272032
> 
> 赞同：7
> 
> 时间：2012-09-04T22:11:18.943
> 
> 标签：javascript, jquery, jquery-deferred

我仍在尝试使用 JQuery 的 Deferred 对象来解决问题，并且正在为一个特定的问题挠头。在下面的代码中，我最初尝试链接`deferred.then()`但它从未成功。所有三个函数同时执行。只有在我的同事向我指出该`pipe`功能之后，事情才落实到位。问题是，为什么`pipe()`有效，但不是`then()`？

```
var otherDefer = function(msg){return function(){return testDefer(msg)}};
var there = otherDefer("there,");
var guy = otherDefer("guy.");                       

function testDefer(msg) {
    var deferred = $.Deferred();
    pretendAjaxCall( function() {
        $('<li>'+msg+'</li>').appendTo('#msgOut');
        deferred.resolve();
    });
    return deferred.promise();  
}

function pretendAjaxCall(callback) {
    setTimeout(callback,1500);
} 

$.when(testDefer("Hi")).pipe(there).then(guy);​ 
```

我也尝试过`return deferred`，而不是`return deferred.promise()`在使用`when().then().then()`.

上面代码的 jsFiddle：http: [//jsfiddle.net/eterpstra/yGu2d/](http://jsfiddle.net/eterpstra/yGu2d/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-12T18:32:57.567

由于 jQuery 1.8 then() 返回一个新的 Promise（与 pipe() 相同）而不是与 when() 返回的相同 Deferred。

在您的示例中将 jQuery 版本更改为 1.8.3 或更高版本：

[http://jsfiddle.net/eterpstra/yGu2d](http://jsfiddle.net/eterpstra/yGu2d)

和

`$.when(testDefer("Hi")).then(there).then(guy);`

将工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T00:09:51.150

这是您的示例中的工作方式`then()`和工作方式：`pipe()`

`then()`返回*Deferred*并通过调用`then()`同**一个** *Deferred*，您只需向它添加第二个回调，它将与第一个**同时调用**

`pipe()`, 相反，返回**新的** *Promise*允许你建立一个链，这就是你在这种情况下得到**顺序**调用的原因

* * *

查看以下资源以获取有关 pipe/then 的更多信息：

[什么时候应该使用 jQuery deferred 的“then”方法，什么时候应该使用“pipe”方法？](https://stackoverflow.com/questions/9583783/when-should-i-use-jquery-deferreds-then-method-and-when-should-i-use-the-pip)

[JavaScript 中的 Promise 管道](http://sitr.us/2012/07/31/promise-pipelines-in-javascript.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T00:07:12.513

您正在`.then`以一种不应该使用的方式使用它——您正在为它争论一个 Deferred ，而[所有`.then`期望只是一个简单的函数作为回调添加](http://api.jquery.com/deferred.then/)。

该`.then`方法返回已解决的原始 Deferred。当 Deferred 解决时，所有添加的回调都会`.then`立即执行。

另一方面，该`.pipe`函数采用一组函数或一个 Promise（这是您发送的内容），并根据原始 Deferred 的状态进行解析。的功能`.pipe`实际上是您正在寻找的！

# asp.net-mvc - 模型编辑器

> ID：12272033
> 
> 赞同：0
> 
> 时间：2012-09-04T22:11:20.290
> 
> 标签：asp.net-mvc, attributes, editorfor

我正在使用 @Html.EditorFor(m => Model.... 编辑我的模型。

我需要强制其中一个属性为管理员或用户，

我可以在我的模型属性上放置什么属性来强制出现带有这两个选项的下拉框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:17:49.073

为枚举创建以下扩展

```
public static class EnumExtensions
{
    public static IEnumerable<SelectListItem> ToSelectListItems<TEnum>(this TEnum enumObj)
    {
        var values = from TEnum e in Enum.GetValues(typeof(TEnum))
                     select new SelectListItem() { Value = e.ToString(), Text = Enum.GetName(typeof(TEnum), e) };

        return values;
    }
} 
```

然后添加以下自定义编辑器模板（在 Views/Shared/EditorTemplates 下）

```
@model Enum

@Html.DropDownListFor(m => m, Model.ToSelectListItems()) 
```

然后将您的属性设为枚举，并将用户和管理员作为选项。

您还可以创建自定义属性来为枚举值添加显示名称（以处理空格等）。

# android - 如何在广播接收器的后台线程中进行 FTP 传输

> ID：12272034
> 
> 赞同：0
> 
> 时间：2012-09-04T22:11:22.987
> 
> 标签：android, ftp, android-asynctask, alarmmanager

我正在尝试使用 AlarmManager 在广播接收器中进行自动 FTP 传输，它在我的 HTC 上运行良好，但在我朋友的 Galaxy S3 上崩溃了。这似乎是一个 ICS 问题，因为当我模拟它时，LogCat 中有一个“主线程上的网络”异常。

看来我将不得不使用 AsyncTask。是否可以在广播接收器中实现 AsyncTask？我在网上找不到任何关于它的信息。有人知道吗？

以下是 FTP 下载方法的相关部分：

```
 public void getFTP(Context context)
 {
  //
  // Download config.txt file from server
  //
   FTPClient ftpClient = new FTPClient();

 try{

 ftpClient.connect(InetAddress.getByName(ipAddress));  
 ftpClient.enterLocalPassiveMode();
 ftpClient.login(user, pass);
 ftpClient.setFileType(FTP.ASCII_FILE_TYPE);

 BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream("/sdcard/config.txt"),8*1024);

 boolean status=ftpClient.retrieveFile("config.txt", bos);

 if(status){
     //Toast toast = Toast.makeText(context, "Downloaded config.txt!", Toast.LENGTH_SHORT);
     //toast.show();
     }
     else {
     Toast toast = Toast.makeText(context, "Cannot download config.txt!", Toast.LENGTH_SHORT);
     toast.show();  
     return;
     }

 bos.flush();
 bos.close();

 ftpClient.logout();
 ftpClient.disconnect();

 }

 catch (IOException e){
     Toast.makeText(context,"Connection error!" , Toast.LENGTH_LONG).show();
 return;
 } 
```

它是使用 onReceive() 方法调用的

```
getFTP(context); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:22:05.693

我已经从广播接收器调用了对 AsyncTask 实现的执行，没有问题。只要从应用程序的主线程调用 task.execute() 就应该没问题（这在接收器中是正常情况）。

但是，如果您确实有问题，您也可以尝试将您的 ftp 会话包装在 Runnable 中，然后执行以下操作：

```
new Thread(new FtpRunnable()).start(); 
```

FWIW，这里有更多关于[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)的信息。因此，这种行为本身不是*问题*，而是设计使然。

# java - Groovy 2.0.1，我自己的课程上的 GroovyCastException？

> ID：12272035
> 
> 赞同：8
> 
> 时间：2012-09-04T22:11:36.347
> 
> 标签：java, groovy

我在我的网络应用程序项目中广泛使用 groovy 类。我可以创建一个类型的实例（定义为 groovy 类），但以后永远不能再转换回它（`GroovyCastException`发生）。

> org.codehaus.groovy.runtime.typehandling.GroovyCastException：无法将具有类“com.company.role.delegation.ProfileModel”的对象“com.company.role.delegation.ProfileModel@49ee6848”转换为类“com.company.role”。委托.ProfileModel'

根据上面的错误信息，源类和目的类类型是一样的。嗯？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T23:33:58.317

最可能的原因是该类已通过不同的类加载器加载了两次。检查两个实例的 getClass().getClassLoader() 是否相同。

# jquery - “mouseenter”和“mouseleave”上的 CSS 图像交换动画

> ID：12272040
> 
> 赞同：0
> 
> 时间：2012-09-04T22:12:17.163
> 
> 标签：jquery, jquery-hover

我正在尝试做一些事情，我昨天才开始阅读有关 jQuery 的内容，所以对我来说还不太顺利:)

但是，我要做的是在 mouseenter/leave 或 hover 上交换我的徽标图像，这取决于更好的...

所以这是我做的，它肯定很糟糕，但是......

```
 $(document).ready(function() {
    var logo = $('#logo');

    logo.on('mouseenter', function() {
        logo.css('background-image', 'url("img/logo2.png")');
    });
    logo.on('mouseleave', function() {
        logo.css('background-image', 'url("img/logo.png")');
    });
}); 
```

这很好用，它可能也不是很好的代码......但是没有像fadeIn和fadeOut这样的动画......我不知道如何制作它。

请帮我做这个，并在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:26:19.453

In order to fade in the image you will have to load both images to begin with, one on top of the other with absolute positioning and appropriate z-index.

Then you just have to make the image 'on-top' fade-out when you hover over it, to reveal the one underneath. So you never actually have to adjust the background-image of the element.

```
<div id="logo-container" style="position:relative;">
    <div id="logo-above" style="position:absolute;z-index:2">
        <img src="img/logo1.png" />
    </div>
    <div style="position:absolute;z-index:1">
        <img src="img/logo2.png" />
    </div>
</div>

<script>
    $(document).ready(function() {
        var $logoContainer = $('#logo-container');
        var $logoAbove = $('#logo-above');

        $logoContainer.on('mouseenter', function() {
            $logoAbove.fadeOut();
        });
        $logoContainer.on('mouseleave', function() {
            $logoAbove.fadeIn();
        });
    });
</script> 
```

p.s. its good practice to prefix variables that are 'jqueryfied' with $ so you know not to call jquery on them again. eg `$logoContainer`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T22:29:37.860

您可以使用[CSS3 过渡](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_transitions?redirectlocale=en-US&redirectslug=CSS/CSS_transitions)来交叉淡入淡出。只需将 -vendor-transition 属性添加为 CSS：

```
#logo
{ 
    background: url('img/logo.png');
    -webkit-transition: all 1s ease;
} 
```

[演示](http://jsfiddle.net/6tbLp/5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T22:29:39.723

Have a look at this [**DEMO**](http://jsfiddle.net/xVfQx/4/).

Instead of editing one image's CSS, this technique changes the layering of two images.

Here's the JS:

```
var $img1 = $('#image1'),
    $img2 = $('#image2');

$('#logo').on('mouseenter', function() {
    $img1.stop(true, true).prependTo(this).show();
    $img2.fadeOut();
}).on('mouseleave', function() {
    $img2.stop(true, true).prependTo(this).show();
    $img1.fadeOut();
});​ 
```

# grails - 对具有瞬态属性的域进行单元测试

> ID：12272041
> 
> 赞同：1
> 
> 时间：2012-09-04T22:12:19.737
> 
> 标签：grails, grails-2.0

我正在尝试对 Spring Security Core Plugin 生成的用户域的控制器进行单元测试。控制器是使用 grails generate-all 生成的。该域有一个名为 springSecurityService 的瞬态属性。在我的单元测试中，我试图模拟该服务并将这个瞬态变量分配给我的模拟版本。但是，我收到此错误：

```
No such property: springSecurityService for class: com.myapp.security.SecUser Possible solutions:
springSecurityService groovy.lang.MissingPropertyException: No such property: springSecurityService for class: 
com.myapp.security.SecUser at com.myapp.security.SecUserControllerTests.setUp(SecUserControllerTests.groovy:26) 
```

这是我的域的样子：

```
class SecUser {
    transient springSecurityService
    String username
    String password
    boolean enabled
    boolean accountExpired
    ....
    def beforeInsert() {
        encodePassword()
    }
    protected void encodePassword() {
        password = springSecurityService.encodePassword(password)
    }
} 
```

这是我的测试的样子：

```
 package com.myapp.security

 import org.junit.*
 import grails.test.mixin.*
 import com.myapp.system.*
 import grails.plugins.springsecurity.*

 @TestFor(SecUserController)
 @Mock([SecUser,SpringSecurityService])
 class SecUserControllerTests {

    @Before void setUp() { 
       def service = mockFor(SpringSecurityService)
       service.demand.encodePassword(1..2) { a -> return 'd3jk3j4ls234'}
       def control = service.createMock()
       SecUser.springSecurityService = control
   } 
```

不确定我做错了什么，甚至我什至可以用瞬态属性做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T07:40:07.363

可能是样机情况，看看这是否有效：

```
@Before void setUp() { 
    def service = mockFor(SpringSecurityService)
    // using the groovy MetaClass runtime
    service.metaclass.encodePassword = {def a -> 'd3jk3j4ls234'}
    SecUser.springSecurityService = service
} 
```

或更静态的解决方案：

```
@Before void setUp() { 
    secUser.springSecurityService = [
        encodePassword : {def a -> 'd3jk3j4ls234'}
    ] as SpringSecurityService
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T08:20:27.903

您正在尝试将您的模拟分配给`springSecurityService`该类`SecUser` *（*就好像它是一个静态的），当它是一个实例变量时它将不起作用。我不是新 Grails 2 测试注释的专家，但我相信如果你更换

```
SecUser.springSecurityService = control 
```

和

```
SecUser.metaClass.getSpringSecurityService = {-> control} 
```

那么它应该做你想做的事。

# jquery - 通过 jQuery 构建选择列表

> ID：12272043
> 
> 赞同：1
> 
> 时间：2012-09-04T22:12:37.430
> 
> 标签：jquery

我正在尝试`<select>`使用 jQuery 创建一个列表。这是我所拥有的：

```
$('<select />')
    .attr('name', 'location')
    .val("Location 1")
    .appendTo(this); 
```

该值`.val("Location 1")`不会出现在下拉列表中。我想在我的列表中有 3 个位置。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T22:14:38.027

只需在`<option>`里面添加元素：

```
$('<select />')
    .attr('name', 'location')
    .append('<option>Location 1</option>',
            '<option>Location 2</option>',
            '<option>Location 3</option>')
    .appendTo(this); 
```

**演示：http:** [//jsfiddle.net/KUDJ6/](http://jsfiddle.net/KUDJ6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T22:16:01.417

属性是诸如大小、颜色等之类的东西。如果要附加到选择，则需要将选项附加到选择标记中，如下所示：

```
$('#mySelect').append($('<option>', { value : key }).text(value)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T22:54:40.263

只需在页面上创建一个选择元素并将位置添加到它..

```
$(function(){
    var html = '';
    for(var i =1;i<=3;i++){
       html += '<option value="'+ i +'"> Location ' + i + '</option>'; 
    }
    $('#dropdown1').append(html);
}); 
```

检查这个例子[http://jsfiddle.net/sushanth009/wMC6j/](http://jsfiddle.net/sushanth009/wMC6j/)

# javascript - 如果监听器附加到父元素，是否可以区分点击发生在哪个子元素上？

> ID：12272044
> 
> 赞同：0
> 
> 时间：2012-09-04T22:12:41.350
> 
> 标签：javascript

如果我有一个附加到 li 元素的 onClick 侦听器，那么如果该 li 有多个不同类型的子元素，那么在侦听器中，我可以通过检查 event.target.tagName 或 event.target 来判断单击发生的元素类型。节点名。

但是如果有两个具有相同标签名的孩子，例如两个图像呢？是否可以确定事件与哪一个相关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:26:14.457

`event.target` is the same object you can get with `document.getElementById`. So, you can do all the same things with it. Take an id, name, class or any other attribute which may help you to find out which element is clicked.

# php - 将正则表达式与 Mod 重写一起使用

> ID：12272046
> 
> 赞同：0
> 
> 时间：2012-09-04T22:12:55.650
> 
> 标签：php, regex, .htaccess, mod-rewrite

这是我在 htaccess 文件中使用的规则：

RewriteRule ^([a-zA-Z0-9]+)/?$ profile.php?user=$1 [NC,L]

（我希望规则允许字母和/或数字的“用户”值，仅此而已）

profile.php 的开头：

$userid = filter($_GET['user']); //这会转义并清理字符串

回显$用户ID；//想看看 RegExp 是否允许变量“user”通过

测试以下内容： [http ://www.mysite.com/johnconnor](http://www.mysite.com/johnconnor)

profile.php 没有为 $userid 回显任何内容

现在测试以下内容： [http ://www.mysite.com/Johnconnor](http://www.mysite.com/Johnconnor)

profile.php 将 $userid 回显为“Johnconnor”

为什么 RegExp 不允许全小写的“johnconnor”通过？？？我在没有“NC”的情况下也试过这个，但没有运气。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:29:29.070

想通了，我在主目录中有一个名为 johnconnor.sql 的文件，它把事情搞砸了。

# css - “不是 A 而不是 B”的 CSS3 选择器？

> ID：12272047
> 
> 赞同：5
> 
> 时间：2012-09-04T22:12:59.310
> 
> 标签：css, css-selectors, boolean-logic

我有这段代码，它使每个段落的类都不同于“ `cl2`”红色。

```
<head>
<style type="text/css">
p{ color:#000000; }
:not(.cl2){ color:#ff0000; }
</style>
</head>
<body>
<p class="cl1">This is a paragraph.</p>
<p class="cl2">This is second paragraph.</p>
<p class="cl2">This is third paragraph.</p>
<p class="cl3">This is fourth paragraph.</p>
<p class="cl2">This is fifth paragraph.</p>
<p class="cl2">This is sixth paragraph.</p>
<p class="cl4">This is seventh paragraph.</p>
<p class="cl5">This is eigth paragraph.</p>
<p class="cl1">This is nineth paragraph.</p>
</body> 
```

如何扩展我的`:not`选择器以忽略例如类“ `cl2`”和“ `cl4`”？我试过了：`:not(.cl2, .cl4){ color:#ff0000; }`但它不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T22:17:15.300

```
:not(.cl2):not(.cl4){ color:#ff0000; } 
```

[http://jsfiddle.net/nottrobin/WFwtP/](http://jsfiddle.net/nottrobin/WFwtP/)

[请注意CSS3 和 jQuery 中的选择器](https://stackoverflow.com/questions/10711730/whats-the-difference-in-the-not-selector-between-jquery-and-css)之间存在[差异`:not`](https://stackoverflow.com/questions/10711730/whats-the-difference-in-the-not-selector-between-jquery-and-css)- 由于在 CSS4 规范中收敛（感谢@BoltClock）

# php - PHP随机链接不重复

> ID：12272050
> 
> 赞同：2
> 
> 时间：2012-09-04T22:13:06.980
> 
> 标签：php, random

我的PHP很差，但我正在努力改进！

我正在尝试编写一个非常简单的 php 脚本，该脚本从文本文件列表中加载随机 html 页面。

一旦人们查看了 html 页面，他们就会链接回 random.php 文件并加载另一个页面......这可以永远持续下去。

我正在使用文本文件列表，因为我会定期添加更多页面。我的问题是我的代码中没有地方可以防止重复访问！现在我只有大约 8 个链接，而且不止一次我有相同的链接“随机”连续出现 3 次 :( 希望我可以添加一些简单的东西来防止重复，如果已查看所有链接，然后重置。非常感谢 :)

```
 <body>

    <?php
    $urlist=file("randomlinks.txt");
    $nl=count($urlist);
    $np=rand(0,$nl-1);
    $url=trim($urlist[$np]);
    header("Location: $url");
    exit;
    ?>

    </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T22:24:37.467

Since the user does not know in what order the links are in the text file, if you were to read said links in sequence they would seem "random" (and you can shuffle them when first creating the file).

So you can:

*   save in session the index of the last link seen
*   link the link index to system time. This does not prevent repetitions, but guarantees that no two links come out equal, unless you hit 'refresh' after exactly the right amount of time.

**Method 1:**

```
$urlist=file("randomlinks.txt");
$nl=count($urlist);

session_start();
if (!isset($_SESSION['link'])) // If link is not in session
    $_SESSION['link'] = 0;    // Start from 0 (the first)
$np = $_SESSION['link']++;    // Next time will use next
$_SESSION['link'] %= $nl;     // Start over if nl exceeded

$url=trim($urlist[$np]);
Header("Location: $url"); 
```

**Method 2:**

```
...
$nl=count($urlist);
$np = time() % $nl;           // Get number of seconds since the Epoch,
                              // extract modulo $nl obtaining a number that
                              // cycles between 0 and $nl-1, every $nl seconds
$url=trim($urlist[$np]);
Header("Location: $url"); 
```

Another method would be to remember the last N links seen - but for this, you *need* a session variable - so as not to get them again too soon.

```
session_start();
if (!isset($_SESSION['urlist']))       // Do we know the user?
    $_SESSION['urlist'] = array();     // No, start with empty list
if (empty($_SESSION['urlist']))        // Is the list empty?
{
    $_SESSION['urlist'] = file("randomlinks.txt");   // Fill it.
    $safe = array_pop($_SESSION['urlist']);
    shuffle($_SESSION['urlist']);           // Shuffle the list
    array_push($_SESSION['urlist'], $safe);
}
$url = trim(array_pop($_SESSION['urlist'])); 
```

If you have five URLS 1, 2, 3, 4 and 5, you might get:

```
1 5 3 4 2 1 4 2 5 3 1 2 3 5 4 1 4 3 2 5 1 4 ... 
```

...the list is N-1 random :-), all links appear with equal frequency, and the same link may reappear at most at a 2-remove, like the "4" above (...4 1 4...); if it does, you'll never see it again for at least `$nl` visits.

**ALSO**

1.  You should not use `Header()` from within a `<BODY>` tag. Remove `<BODY>` altogether.
2.  You don't need to use `exit()` if you are at the natural end of the script: the script will exit by itself.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T22:16:52.533

我能想到的最简单的方法是使用 cookie。

网上到处都是这样的教程：http: [//www.w3schools.com/php/php_cookies.asp](http://www.w3schools.com/php/php_cookies.asp)

例如：

```
<?php
if (isset($_COOKIE["vistList"]))
  $visited = split(","$_COOKIE["visitList"]);
  foreach ($visited as &$value) {
    if ($value == /* new site url */) {
      //Find a new one
    }
  }
else
  $expire=time()+60*60*24*30;
  setcookie("vistList", "List-of-visited-URLs, separated-by-commas", $expire);
?> 
```

我还没有机会测试这段代码，但希望它能给你一些想法。

正如评论中所指出的，同样的事情可以使用 php 会话来完成：

```
<?php
session_start();
if (isset($_SESSION["vistList"]))
  $visited = split(","$_SESSION["visitList"]);
  foreach ($visited as &$value) {
    if ($value == /* new site url */) {
      //Find a new one
    }
  }
else
  $_SESSION['vistList']=/* new site URL */
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T22:42:52.023

我会使用 PHP 会话来做到这一点。看看[这个例子](http://codepad.org/W8E37r8P)。

将可用页面数组存储在会话变量中。每次获得一个页面时，都会从数组中删除该页面。当数组为空时，您再次从原始源重置它。

您的代码可能如下所示：

```
session_start();
if (empty($_SESSION["pages"]))
    $_SESSION["pages"] = file("randomlinks.txt");

$nl = count($_SESSION["pages"]);
$np = mt_rand(0, $nl-1);

// get the page, remove it from the array, and shift all higher elements down:
list($url) = array_splice($_SESSION["pages"], $page, 1);

die(header("Location: $url")); 
```

# javascript - 如何在 Javascript 和 Jsp 中包含文件？

> ID：12272056
> 
> 赞同：0
> 
> 时间：2012-09-04T22:13:22.243
> 
> 标签：javascript, jsp, include

好的，我知道在 PHP 中你可以使用包含一个 PHP 文件......例如......

```
include("array.php"); 
```

有没有办法在 Javascript 和 Jsp 中做到这一点？

从我读到的我不能使用例如`include("array.javascript");`或`include("array.jsp");`

我想从不同的文件加载数组，我知道如何使用 Php，但不使用 Javascript 或 Jsp。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T23:13:36.750

我认为您有点困惑，JSP 是一种在服务器端执行的基于 XML 的语言，它在第一次转换为 Java 时由 servlet 容器（服务器）处理，而 JavaScript 是一种由用户浏览器执行的解释语言，而不是服务器。PHP 也在服务器端执行，该`include`函数与 JavaScript 无关。

现在，要将该行为移植到 JSP，您将使用[JSP 标签](http://www.google.com/url?sa=t&rct=j&q=jsp%20tags&source=web&cd=4&cad=rja&ved=0CEYQFjAD&url=http://www.jsptut.com/tags.jsp&ei=MopGUIGgC9Ok0AX0yIGQBA&usg=AFQjCNFLdEoszg2ewhWSEJ0b1aEjf0XwLQ)，更具体地说，该[`<jsp:include />`](http://java.sun.com/products/jsp/syntax/1.2/syntaxref1214.html)标签：

```
<jsp:include page="array.jsp" /> 
```

但是，如果您要尝试将 JSP 与 JavaScript 文件链接，那么您应该使用更好的选项，包括使用标准 HTML`<script>`标记：

```
<script type="text/javascript" src="array.js" /> 
```

# javascript - 在javascript中重置倒计时

> ID：12272058
> 
> 赞同：1
> 
> 时间：2012-09-04T22:13:32.667
> 
> 标签：javascript, jquery

我希望用户每次在输入运行重置倒计时后键入，我添加`clearTimeout`但它不起作用。我该怎么办？（请在我的代码中帮助我，我不想要新代码。）

**演示：http:** [//jsfiddle.net/qySNq/](http://jsfiddle.net/qySNq/)

html:

```
<input id="MizMah">
<div id="Seconds" style="font-size: 80px;">5</div>​ 
```

js代码：

```
$('#MizMah').live('keyup', function () {
    function render(n) {
        var digits = [],
            r;
        do {
            r = n % 10;
            n = (n - r) / 10;
            digits.unshift([r].join(''));
        } while (n > 0);
        $('#Seconds').html(digits.join(''));
    }

    (function timer(current) {
        render(current);
        if (current > 0) {
            myTimeout = setTimeout(function () {
                timer(current - 1);
            }, 1100);
            clearTimeout(myTimeout);
        }
    }(5));
})​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T22:17:40.087

您在设置超时后立即清除它。尝试这个：

```
var myTimeout = null;

$('#MizMah').live('keyup', function () {
    function render(n) {
        var digits = [],
            r;
        do {
            r = n % 10;
            n = (n - r) / 10;
            digits.unshift([r].join(''));
        } while (n > 0);
        $('#Seconds').html(digits.join(''));
    }

    (function timer(current) {
        render(current);
        if (current > 0) {
            clearTimeout(myTimeout);
            myTimeout = setTimeout(function () {
                timer(current - 1);
            }, 1100);
        }
    }(5));

}) 
```

# python - 菜鸟 Python While 循环

> ID：12272060
> 
> 赞同：0
> 
> 时间：2012-09-04T22:14:06.723
> 
> 标签：python

我正在尝试制作一个程序，要求用户输入一个数字，然后询问他们是否要输入另一个数字。根据他们输入的数字，程序将对它们求和并给出它们的平均值。

这是我到目前为止所拥有的，但我知道它不起作用。任何帮助是极大的赞赏。

```
a = int(input("Enter a number: "))
more = input("Please enter Y or N if you want to add more numbers: ")

def funct(more):
    while more == "Y":
        b = int(input("Enter another number: "))
        abSum = a + b
        abMean = a + b / 2
        if more == "Y":
            return b
        else:
            break

    print(abSum)
    print(abMean) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T22:26:51.003

Simplified, your program could look like this:

```
abSum = int(raw_input("Enter a number: "))

while raw_input("Please enter Y if you want to add more numbers or anything else to finish: ") == 'Y':
    b = int(raw_input("Enter another number: "))
    abSum = abSum + b
    abMean = abSum / 2

print(abSum)
print(abMean) 
```

Basically you loop until user enters and empty line, or anything else in the second prompt, and then fix your sums/means.

You don't necessarily need a separate function for the task you're trying to accomplish. If you want a function for, say, a homework - then you can rewrite the piece to pass the value of `b` to a separate function that will update the `abSum` and `abMean` and call that from within the `while` loop.

Umm, and pardon me, my example doesn't actually calculate a mean, you need to count the number of entered values into, for instance, a third variable and then divide by that amount. Another answerer proposed a solution with a list of entered values that could work in your case.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T22:27:56.673

我清理了它并将它变成了一个独立的脚本给你：

```
#!/usr/bin/env python

def ask_for_some_numbers():
    numbers = []
    more = 'y'
    while more.lower() == 'y':
        number = int(raw_input("Enter a number: "))
        numbers.append(number)
        more = raw_input("Please enter Y if you want to add more numbers: ")
    print (sum(numbers))
    print (sum(numbers)/len(numbers))
if __name__ == '__main__':
    ask_for_some_numbers() 
```

以下是不同之处：

*   我使用一个列表来存储数字 ( `numbers = []`) - 这样您就可以轻松拥有任意大量的数字。
*   我调用该函数开始提示输入数字。
*   我使用`raw_input`而不是`input`. 输入[文档](http://docs.python.org/library/functions.html#input)建议使用 raw_input 作为用户的输入，因为`input`它将评估输入的内容（如果您有恶意用户，这可能会给您带来问题）。
*   我使用内置`sum`方法来总结列表中的项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T22:32:21.527

try something like:

```
a = int(input("Enter a number: "))
more = input("Please enter Y or N if you want to add more numbers: ")
summ=a          #intialize sum to a
count=1         # no. of integers entered, to calculate mean
while more.lower()=="y":
    b = int(input("Enter another number: "))
    count+=1          #increase count by 1
    summ+= b          #add b to sum
    abMean = summ/float(count)         #used float(count) to get actual value

    print("sum=",summ)
    print("mean=",abMean)    
    more = input("Please enter Y or N if you want to add more numbers: ") #ask for user input
print("sum=",summ)
print("mean=",abMean) 
```

**output:**

```
Enter a number: 5
Please enter Y or N if you want to add more numbers: y
Enter another number: 5
sum= 10
mean= 5.0
Please enter Y or N if you want to add more numbers: y
Enter another number: 2
sum= 12
mean= 4.0
Please enter Y or N if you want to add more numbers: y
Enter another number: 15
sum= 27
mean= 6.75
Please enter Y or N if you want to add more numbers: y
Enter another number: 10
sum= 37
mean= 7.4
Please enter Y or N if you want to add more numbers: n
sum= 37
mean= 7.4 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T22:34:18.267

这是一段简单的循环代码，它将询问数字，直到它得到一个空白条目，之后它将打印输入的总和和平均值：

```
total = 0
count = 0

num = input("Enter a number: ")

while (num):
    total += int(num)
    count += 1
    num = input("Enter another number (or a blank line to quit): ")

print("Total =", total)
print("Average =", total/count) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T22:22:29.153

您不需要在某处调用该函数吗？

类似（未经测试）：

```
if a and more=="Y":
    funct(more) 
```

# android - OAuth2 请求中缺少参数 access_token

> ID：12272064
> 
> 赞同：3
> 
> 时间：2012-09-04T22:14:21.657
> 
> 标签：android, oauth-2.0

我正在使用 Apache Amber 库尝试从我控制的网站中检索 OAuth2 访问令牌。我的客户端代码在 Android 下运行。

我的代码以以下示例为模板：

[https://cwiki.apache.org/confluence/display/AMBER/OAuth+2.0+Client+Quickstart](https://cwiki.apache.org/confluence/display/AMBER/OAuth+2.0+Client+Quickstart)

在第一步中，我可以通过使用 WebView 浏览器提交 GET 请求来检索“代码”：

```
OAuthClientRequest request = OAuthClientRequest
 .authorizationLocation(AUTHORIZE_URL)
 .setClientId(CLIENT_ID)
 .setRedirectURI(REDIR_URL)
 .setResponseType(CODE_RESPONSE)
 .buildQueryMessage();

 webview.loadUrl(request.getLocationUri()); 
```

我使用 WebViewClient 回调来捕获带有“code”参数的重定向 URL。到目前为止，一切都很好。

使用该代码，我尝试检索我的访问令牌：

```
OAuthClient oAuthClient = new OAuthClient(new URLConnectionClient());

OAuthClientRequest request = OAuthClientRequest
  .tokenLocation(ACCESS_TOKEN_URL)
  .setGrantType(GrantType.AUTHORIZATION_CODE)
  .setClientId(CLIENT_ID)
  .setClientSecret(CLIENT_SECRET)
  .setRedirectURI(REDIR_URL)
  .setCode(code)
  .buildBodyMessage();

GitHubTokenResponse oAuthResponse = 
  oAuthClient.accessToken(request, GitHubTokenResponse.class); 
```

每次我运行我的代码时，我都会收到一个 OAuthProblemException，其中的消息是由于缺少参数 access_token，我有一个无效的请求。

另一个 StackOverflow 帖子从类似的 OAuth2 请求中提到了这个异常，在这种情况下，这是由于 OAuth 请求中的重定向 URI 不同引起的。但是我通过使用命名常量来确保我的重定向 URI 是相同的。这是该帖子的链接：

[OAuthProblem，缺少参数 access_token](https://stackoverflow.com/questions/10212708/oauthproblem-missing-parameter-access-token)

现在，我可以打印出第一个请求返回的代码，并将其粘贴到从我的台式机运行的 curl 命令中：

curl -d "code=...&client_id=...&client_secret=...&grant_type=...&redirect_uri=..." [http://my_website.com](http://my_website.com)

我从我的网站获得了一个带有 access_token 的不错的 JSON 响应。

为什么来自 Java 的调用失败，而我的手动命令行成功了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-21T16:42:16.550

我在实现客户端和服务器时遇到了同样的问题，问题是关于 Apache Amber (Oltu) 项目中客户端示例中的一个错误：

首先，您有 Auth 代码请求（有效）：

```
OAuthClientRequest request = OAuthClientRequest
    .authorizationLocation(AUTHORIZE_URL)
    .setClientId(CLIENT_ID)
    .setRedirectURI(REDIR_URL)
    .setResponseType(CODE_RESPONSE)
    .**buildQueryMessage**(); 
```

其次是关于访问令牌的请求（不起作用）：

```
OAuthClientRequest request = OAuthClientRequest
    .tokenLocation(ACCESS_TOKEN_URL)
    .setGrantType(GrantType.AUTHORIZATION_CODE)
    .setClientId(CLIENT_ID)
    .setClientSecret(CLIENT_SECRET)
    .setRedirectURI(REDIR_URL)
    .setCode(code)
    .**buildBodyMessage**(); 
```

错误是关于`buildBodyMessage()`第二个请求中的。改变它`buildQueryMessage()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-26T00:57:33.880

在我的情况下解决了。

Amber/Oltu“缺少参数 access_token”错误可能意味着 GitHubTokenResponse 或 OAuthJSONAccessTokenResponse 因任何原因无法翻译响应正文。在我的情况下（使用 Google+ oAuth2 身份验证），响应正文未正确解析为内部参数映射。

例如： **GitHubTokenResponse**

```
 parameters = OAuthUtils.decodeForm(body); 
```

解析表单 urlencoded 结果体

...并且**OAuthJSONAccessTokenResponse**具有下一个解析功能

```
 parameters = JSONUtils.parseJSON(body); 
```

这个 JSONUtils.parseJSON 是一个自定义 JSON 解析器，它不允许我使用来自 GOOGLE+ 的 JSON 响应正文并抛出 JSONError（未记录控制台），

解析此参数时抛出的每个错误，控制台不可见，然后总是抛出注定“缺少参数：access_token”或另一个“缺少参数”错误。

如果您编写自定义 OAuthAccessTokenResponse，您可以查看响应正文，并编写一个适用于您的响应的解析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T06:21:32.023

这是我遇到的以及我为使其正常工作所做的工作：

我很快整理了一个类似的例子： [https](https://cwiki.apache.org/confluence/display/OLTU/OAuth+2.0+Client+Quickstart) ://cwiki.apache.org/confluence/display/OLTU/OAuth+2.0+Client+Quickstart 和：svn.apache.org/repos/asf/oltu/trunk/oauth -2.0/client/src/test/java/org/apache/oltu/oauth2/client/OAuthClientTest.java

这是我执行它的命令：

```
java -cp .:./org.apache.oltu.oauth2.client-1.0.1-20150221.171248-36.jar OAuthClientTest 
```

我还遇到了上面提到的预期 access_token 的错误。我最终在 intellij 中进行了调试，并使用 if 条件跟踪了一个异常，该条件检查字符串是否以“{”字符开头。

为此，我还将以下 jar 添加到我的类路径中，以便我可以更深入地调试跟踪。./java-json.jar（从[http://www.java2s.com/Code/Jar/j/Downloadjavajsonjar.htm](http://www.java2s.com/Code/Jar/j/Downloadjavajsonjar.htm)下载）

在下一个调试会话期间，代码实际上开始工作。我和我的伙伴最终发现根本原因是没有包含 JSON jar。

这是有效的命令：

```
java -cp .:./java-json.jar:./org.apache.oltu.oauth2.client-1.0.1-20150221.171248-36.jar OAuthClientTest 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-15T08:25:55.193

尝试从 fitbit OAuth2 获取访问令牌时遇到了同样的问题。`buildBodyMessage()`并且`buildQueryMessage()`都给了我`missing parameter, access_token`。

我相信这与 apache oauth2 客户端库有关。我最终使用 spring 的 RestTemplate 发出了简单的发布请求，它工作正常。

```
HttpHeaders headers = new HttpHeaders();
headers.setContentType(MediaType.APPLICATION_FORM_URLENCODED);
headers.set("Authorization", "Basic " + "MjI5TkRZOjAwNDBhNDBkMjRmZTA0OTJhNTE5NzU5NmQ1N2ZmZGEw");

MultiValueMap<String, String> map = new LinkedMultiValueMap<>();
map.add("client_id", FITBIT_CLIENT_ID);
map.add("grant_type", "authorization_code");
map.add("redirect_uri", Constants.RESTFUL_PATH + "/fitbit/fitbitredirect");
map.add("code", code);

HttpEntity<MultiValueMap<String, String>> request = new HttpEntity<>(map, headers);

RestTemplate restTemplate = new RestTemplate();
ResponseEntity<String> response = restTemplate.postForEntity(FITBIT_TOKEN_URI, request, String.class);

log.debug("response.body: " + response.getBody()); 
```

# macos - sed 在 MacOS 上的“未定义标签”

> ID：12272065
> 
> 赞同：11
> 
> 时间：2012-09-04T22:14:31.027
> 
> 标签：macos, sed

我最近发现这个简单的`sed`表达式在 Linux 或 Cygwin 下工作正常，但在 Mac 上失败，出现“未定义标签”错误：

```
$ sed '/SUCCESSFUL/d ; /\[java\]/!b label; s/\s\+\[java\]//; /^\s*$$/d; /Compiling/!d; :label /^\s*$$/d; s/^/monitor: /'
sed: 1: "/SUCCESSFUL/d ; /\[java ...": undefined label 'label; s/\s\+\[java\]//; /^\s*$$/d; /Compiling/!d; :label /^\s*$$/d; s/^/monitor: /' 
```

`sed`MacOS 上的 BSD 变体具有与 GNU 对应的不同选项。不过`man sed`明明MacOS版本`sed`支持标签，为什么会出现这个错误，最重要的是如何解决呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T23:06:34.720

标签的名称以第一个文字换行符结尾，而不是分号。有两种简单的方法可以解决这个问题。添加文字换行符：

```
 sed '/SUCCESSFUL/d 
    /\[java\]/!b label
    s/\s\+\[java\]//
    /^\s*$$/d; /Compiling/!d
    :label
    /^\s*$$/d
    s/^/monitor: /' 
```

或使用多个`-e`选项：

```
sed -e '/SUCCESSFUL/d ; /\[java\]/!b label' \
  -e 's/\s\+\[java\]//; /^\s*$$/d; /Compiling/!d' \
  -e':label' -e'/^\s*$$/d; s/^/monitor: /' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T22:14:31.027

SO上有很多类似的问题，但其中大多数是由于`-i`平台之间的行为不同，所以这是不同的。

在这种情况下，问题相当简单：似乎标签引用在 BSD 版本中只能向后使用`sed`，而 GNU 版本允许使用前向引用。那是在 MacOS 上，必须`:label`出现*在*`b label`.

解决方案是重写表达式以在分支之前定义标签，或者在上面的表达式的情况下实现分支是一种“如果不存在这种模式......跳转”。在这种情况下，表达式可以扩展为首先不需要标签：

```
sed '/SUCCESSFUL/d ; /\s+\[java\]\s*/d; /\[java\]/s/\s\+\[java\]//; /Compiling/!d; /^\s*$$/d; s/^/monitor: /' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-13T15:40:11.537

对于其他有类似问题的人（在**MacOS**上）的快速修复可能是：

**在你的字符串表达式前面加上一个空字符串：`''`**

例如：代替

```
sed -i 's/foo/bar/g' text.txt 
```

写：

```
sed -i '' 's/foo/bar/g' text.txt 
```

# css - CSS Calc() 的替代品？LESS 或 SASS 可以对像素进行百分比计算吗？

> ID：12272071
> 
> 赞同：4
> 
> 时间：2012-09-04T22:15:06.957
> 
> 标签：css, sass, less, stylus

我一直在寻找一种在不使用 calc() 的情况下对像素进行百分比计算的方法。我希望能够使用 calc，但目前移动 safari (ios) 在 ios6 之前不支持它。有没有办法在LESS中做到这一点？我知道你可以做计算，但据我所知，你不能做 100% - 20px 之类的事情。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T22:22:30.180

不。

当我第一次发现LESS时，我花了一段时间寻找这个，恐怕这是不可能的。LESS 不包含渲染引擎，因此无法准确计算出父元素的百分比宽度。特别是因为该父元素通常可能具有可变宽度。

如果父级是固定宽度，您当然可以使用 LESS 为您计算像素：

```
@containerWidth: 500px;
.container {width: @containerWidth;}
.child {width: @containerWidth / 5;} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-04T22:23:39.060

LESS 和 SASS 都不能在渲染后进行计算。他们所做的计算是呈现浏览器随后解释的初始 CSS 文件。它们都生成 100% 有效的 CSS。CSS 可以做的任何事情，SASS 和 LESS 都可以输出（但通常不那么冗长和费力）；但是，如果 CSS 没有办法做到这一点，那么 SASS 或 LESS 也没有办法做到这一点。

您也许可以摆脱使用 Javascript：

```
$('some-element').css('margin-left', $('.my-element').width() - 15) 
```

# c++ - C/C++ 查找指针

> ID：12272072
> 
> 赞同：-1
> 
> 时间：2012-09-04T22:15:15.583
> 
> 标签：c++, c, memory, pointers, architecture

我最近完成了一个基本的内存扫描仪，并且像所有曾经这样做过的人一样......我意识到每次程序启动时扫描值是一种痛苦！

计算出这些值的基指针会很有用，这样它们就可以硬编码到应用程序中。为了弄清楚如何做到这一点，我使用 Visual c++ 作为我的“目标”创建了这个简短的控制台应用程序。

```
int main(int argc, char *argv[], char *envp[])
{
    unsigned int * Pointer1;
    Pointer1 = (unsigned int *)malloc(sizeof(unsigned int));
    char s[20];
    while(1)
    {
        std::cout<<"(Pid:"<<GetCurrentProcessId()<<") Please enter a value to be stored in memory (type 'q' to exit): \n";
        std::cin>>s;
        std::cout<<"\n";
        if(s[0] =='q')
        {
            break;
        }
        *Pointer1 = str2int(s);
        std::cout<<"Value:"<<*Pointer1<<" addr:0x"<<Pointer1<<"\n";
    }
    free(Pointer1);

return 0;
} 
```

然后我根据我的内存扫描仪使用这个应用程序来计算指针的地址和指针指向的内存地址。我这样做了几次以整理以下数据。（使用“|”作为分隔符粘贴到excel中）

```
pid |P Hex|P Val|PHx to Dec|M Hex|M Val|MHx To Dec
7028|002afcfc|216032|2817276|00034BE0|10|216032
6312|0032fa70|4541408|3340912|00454BE0|20|4541408
1512|0043fb1c|3242304|4455196|00317940|30|3242304
8140|0036f9fc|1997096|3602940|001E7928|30|1997096 
```

但是我无法找到一种可靠的方法来计算指针将是什么内存地址，我可以执行哪些方法/计算来做到这一点？我知道存在更多类似生活的指针链示例，但这似乎是一个很好的起点，然后再让它变得更难。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T22:21:23.490

内存地址是`malloc`返回的任何内容。没有可靠的方法来计算它将返回什么。这完全取决于您的`malloc`库的工作方式、操作系统（通过或其他方式）提供的虚拟地址范围`sbrk`等`mmap`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:38:51.347

您在问如何预测将从中返回的地址`malloc`。

没关系。

如果您**可以**预测将从 中返回的内容`malloc`，则`malloc`不需要返回任何内容。

实际上，从 malloc 返回的地址无关紧要，除了`NULL`. 调用 malloc 意味着您需要一些字节的内存。malloc 会给你那个。你得到了你需要的东西。

相反，如果您可以确定从 malloc 中返回的地址，您将永远不需要调用 malloc。您可以只使用您预测的地址。

**简而言之，`malloc`存在是因为预测哪些内存可能可用并非易事。**

# jquery - 包含标签的按钮可能导致双重触发

> ID：12272073
> 
> 赞同：2
> 
> 时间：2012-09-04T22:15:32.340
> 
> 标签：jquery, html, javascript-events

我对按钮内的标签有问题，因为单击标签也会导致按钮单击触发。

所以我接连发生了两个被触发的事件，这当然是我不想要的。

我的带有标签的按钮如下所示：

```
<button id="b" name="Button" class="btn btn-primary btn-large">
    <label id="b_button_label" class="fontf">
        Click me
    </label>
</button> 
```

是否有任何快速的解决方案，也许是使用 jquery，来防止双重触发？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T22:18:06.143

是的，解决方案是不要在按钮*内放置标签。*

标签用于描述控件本身，单击控件标签的行为就像单击控件本身一样。

从规范：

> 标签代表用户界面中的标题。标题可以与特定的表单控件相关联，称为标签元素的标签控件，可以使用 for 属性，也可以将**表单控件放在标签元素**本身中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T22:19:03.893

我不认为这是一个有效的 HTML 代码。不能在 BUTTON 内添加 LABEL。向按钮添加文本的一种简单方法是：

`<button id="b" name="Button" class="btn btn-primary btn-large">click me</button>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T22:21:37.077

您可以在 jQuery 中使用 stopPropagation 事件来冒泡事件

```
$(function() {
    $('#b_button_label').on('click' , function(e) {
       e.stopPropagation();

       // Your code goes here
    });
});​ 
```

另外，当您有值字段来显示其文本时，为什么要在按钮内添加标签。

# ruby-on-rails-3 - 我将如何在 Rails 中设计我的模型，其中两个属性访问同一个类？

> ID：12272083
> 
> 赞同：0
> 
> 时间：2012-09-04T22:16:36.630
> 
> 标签：ruby-on-rails-3, activerecord, model

我创建了一个具有以下属性的团队模型：

```
team_name
mascot 
```

我现在想创建一个具有以下属性的游戏模型：

```
game_date
away_team
away_team_score
home_team
home_team_score 
```

我希望 away_team 和 home_team 都是 Team 类的外键。我很确定我不能在生成器中使用 away_team:references 来执行此操作，除非有专门选择 Team 类的选项。因此，如果我使用 away_team 和 home_team 设置为整数创建我的模型，我如何设置我的 has_many 和 belongs_to 关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:32:30.370

[See the Rails 3 Associations Guide](http://guides.rubyonrails.org/association_basics.html#has_one-association-reference):

```
has_one :home_team, :class_name => "Team"
has_one :away_team, :class_name => "Team" 
```

It's similar for the other relationships; you can override the convention-based... uh... conventions.

# perl - 如何使用命令行参数从 bash 运行 perl 脚本？

> ID：12272084
> 
> 赞同：5
> 
> 时间：2012-09-04T22:16:40.127
> 
> 标签：perl, bash, rt

我正在尝试创建一个脚本来批量标记一组用户在 RT 中具有特权。我在 RT wiki 上找到了一个脚本，用于将用户添加到组并赋予他们特权状态，然后删除了与添加到组有关的部分内容。我剩下的 perl 脚本是：

```
#!/usr/bin/perl
# Usage: ./rt_set_privileged.pl <username>

use strict;
use lib "/var/www/ticket.ourcompany.com/lib";
use RT;
use RT::User;
use RT::Interface::CLI;

RT::LoadConfig();
RT::Init();

# Create RT User Object
my $user = new RT::User($RT::SystemUser);

# Instantiate the user object with the user passed as parameter
my $usertoadd = $ARGV[0];
$user->Load( $usertoadd );

# Set the privileged flag (1=privileged, 0=unprivileged)
$user->SetPrivileged(1);

exit 1 
```

我将用户放在一个文件中，每行一个用户名。我还不知道 perl，所以我尝试创建一个小 bash 脚本来遍历文件并为每个名称运行一次 perl 脚本。Bash 脚本现在的样子：

```
#!/bin/bash

touch commands.sh
cat usernames.txt | while read LINE ; do
        N=$((N+1))
        echo /home/chris/RT/bin/rt_set_privileged.pl \"$LINE\" >> commands.sh
        /home/chris/RT/bin/rt_set_privileged.pl \"$LINE\"
        perl /home/chris/RT/bin/rt_set_privileged.pl \"$LINE\"
        perl -w /home/chris/RT/bin/rt_set_privileged.pl \"$LINE\"
        eval /home/chris/RT/bin/rt_set_privileged.pl \"$LINE\"
        perl "/home/chris/RT/bin/rt_set_privileged.pl $LINE"
done
echo "Processed $N users" 
```

如您所见，我尝试了很多方法来运行命令，但无济于事。烦人的是，我可以在之后从 commands.sh 文件中获取任何命令并将它们直接粘贴到终端中而没有问题，这工作正常。但是，当它们通过 bash 脚本运行时，我只会收到一堆这样的消息：

```
[Tue Sep  4 07:43:56 2012] [critical]: _AddMember called with a parameter that's not an integer. (/var/www/ticket.ourcompany.com/lib/RT/Group.pm:912)
[Tue Sep  4 07:43:58 2012] [warning]: Use of uninitialized value $principal in pattern match (m//) at /var/www/ticket.ourcompany.com/lib/RT/Group.pm line 970\. (/var/www/ticket.ourcompany.com/lib/RT/Group.pm:968)
[Tue Sep  4 07:43:58 2012] [error]: Group::HasMember was called with an argument that isn't an RT::Principal or id. It's (undefined) (/var/www/ticket.ourcompany.com/lib/RT/Group.pm:973)
[Tue Sep  4 07:43:58 2012] [warning]: Use of uninitialized value $principal in pattern match (m//) at /var/www/ticket.ourcompany.com/lib/RT/Group.pm line 970\. (/var/www/ticket.ourcompany.com/lib/RT/Group.pm:968)
[Tue Sep  4 07:43:58 2012] [error]: Group::HasMember was called with an argument that isn't an RT::Principal or id. It's (undefined) (/var/www/ticket.ourcompany.com/lib/RT/Group.pm:973)
[Tue Sep  4 07:43:58 2012] [warning]: Use of uninitialized value in concatenation (.) or string at /var/www/ticket.ourcompany.com/lib/RT/User.pm line 341\. (/var/www/ticket.ourcompany.com/lib/RT/User.pm:341)
[Tue Sep  4 07:43:58 2012] [critical]: User  is neither privileged nor unprivileged. something is drastically wrong. (/var/www/ticket.ourcompany.com/lib/RT/User.pm:341)
[Tue Sep  4 07:43:58 2012] [warning]: Use of uninitialized value $new_member in pattern match (m//) at /var/www/ticket.ourcompany.com/lib/RT/Group.pm line 911\. (/var/www/ticket.ourcompany.com/lib/RT/Group.pm:911) 
```

暗示该命令在没有任何参数的情况下运行。在这一点上，在我试图解决它的时候，我实际上可以为每个用户运行一次命令，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T05:59:18.910

Arrgh，我很遗憾我花了这么长时间才意识到这么简单的问题。问题是字符串格式之一 - 文件 usernames.txt 是由使用 Windows 的人创建的，并且具有 dos 格式 (CRLF)。我猜这个参数是作为 [username][LF] 到达的，并且搞砸了 $User 变量的实例化。

我敢肯定，如果不来这里讨论，我永远不会得到这个，我只是在兜圈子，只是自己尝试。

该决议只是为了：

```
sudo apt-get install tofrodos
sudo fromdos usernames.txt 
```

然后原始脚本起作用了

非常感谢各位的帮助。

编辑：现在已经有足够的时间让我把它从原始问题的编辑移到它自己的答案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T23:11:37.560

你在那个 Perl 代码中有一堆编程错误——你得到的错误消息都是编译器消息。所以调用是正确的，但是 Perl 代码是错误的。

您要做的是编辑 Perl 代码，直到所有错误消息和警告都消失。

编辑：Perl 代码在当时运行的环境中是错误的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T22:24:04.250

```
perl /home/chris/RT/bin/rt_set_privileged.pl "$LINE" 
```

If the file was made executable, you can also do:

```
/home/chris/RT/bin/rt_set_privileged.pl "$LINE" 
```

* * *

For example,

```
$ cat usernames.txt 
ikegami
Chris O'Kelly

$ cat script.pl 
#!/usr/bin/env perl
print "arg=<<$ARGV[0]>>\n";

$ while read LINE ; do script.pl "$LINE"; done <usernames.txt
arg=<<ikegami>>
arg=<<Chris O'Kelly>> 
```

You could use `xargs` instead of `while read`:

```
$ xargs -n1 -d\\n script.pl <usernames.txt 
arg=<<ikegami>>
arg=<<Chris O'Kelly>> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T23:38:29.520

另一种解决方案：不要使用 bash 脚本，而是直接编辑 perl 脚本，打开您的 usernames.txt 文件并逐行阅读 - 这也可以解决您的问题。

像这里[http://www.perlfect.com/articles/perlfile.shtml](http://www.perlfect.com/articles/perlfile.shtml)：

```
my $file = "usernames.txt";
open USERS, "<$file" or die "Can't open $file ($!)";

while(<USERS>) {
 my $usertoadd = $_;
 chomp $usertoadd;
 $user->Load( $usertoadd );
 $user->SetPrivileged(1);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T22:27:23.073

更新：由于[Peniwize 博客的](http://peniwize.wordpress.com/2011/04/09/how-to-read-all-lines-of-a-file-into-a-bash-array/)宝贵提示，现在考虑了用户名中可能存在空格的问题。

```
OLD_IFS=$IFS
IFS=$'\n'    
priveleged=( $( cat usernames.txt) )
for i in "${priveleged[@]}"
do
    perl /home/chris/RT/bin/rt_set_privileged.pl $i
done
IFS=$OLD_IFS 
```

# android - Android 视图动画和硬件层

> ID：12272094
> 
> 赞同：15
> 
> 时间：2012-09-04T22:17:38.187
> 
> 标签：android, animation, hardware-acceleration

我目前正在尝试研究如何在动画视图时正确使用[硬件层。](https://developer.android.com/reference/android/view/View.html#LAYER_TYPE_HARDWARE)

我正在实现一个 ViewGroup ，它使用户能够拖动一个子视图，之后我将其动画到他们释放时的某个位置（就像 ViewPager 将如何安置在页面上一样）。[本文](http://developer.android.com/guide/topics/graphics/hardware-accel.html)指出，您应该只在动画期间启用硬件层。

我遇到的问题是，启用硬件层后，Android 必须创建层，这在 Galaxy Nexus 上需要 70-100 毫秒。这意味着我不能在开始动画之前立即执行此操作，因为拖动和动画之间的延迟会非常明显。出于同样的原因，我在开始拖动时也无法启用它。

现在，这种延迟仅在第一次创建硬件层时出现，所以理想情况下，我希望在视图添加到布局后立即创建它们。我被指向[View.buildLayer()](https://developer.android.com/reference/android/view/View.html#buildLayer())，但我不确定如何处理这个问题。

*   实现这一目标的正确方法是什么？
*   我的 ViewGroup 中是否有任何方法可以覆盖并在子视图上调用 buildLayer()？
*   硬件层能否以某种方式失效，导致另外 70-100ms 的延迟？我该如何处理？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T22:36:03.570

当缓存中没有层时会发生延迟，对于后续调用 setLayerType(NONE)/setLayerType(HARDWARE)，您应该不会看到此延迟。您可以从 onSizeChanged() 调用 buildLayer() 来强制构建图层，然后将其放入缓存中（调用 setLayerType(NONE) 将图层移动到缓存中。）

请注意，您看到的延迟很大程度上取决于您运行的设备。

您不应该启用图层的原因是，每次视图更新时，绘图工作量都会增加一倍。例如，如果您将 ListView 移动到层中，然后滚动列表，则滚动动画期间的每一帧更新都会导致：（a）列表重新绘制到层中（b）要在屏幕上绘制的层。这非常浪费，并且可能会导致性能问题，具体取决于您的 UI 的复杂性。

# php - PHP finfo 将 m4a 音频检测为视频

> ID：12272098
> 
> 赞同：4
> 
> 时间：2012-09-04T22:18:00.573
> 
> 标签：php

在 2 台不同的 AMP 服务器（一台 Linux，一台 Windows）上，PHP 的 finfo 函数为 m4a 音频文件返回 mime 类型的“video/mp4”。

```
$path = '/path/to/some/audio.m4a';
$finfo = finfo_open(FILEINFO_MIME_TYPE);        
$mime = finfo_file($finfo, $path);
print $mime;  // video/mp4 
```

我相信这可以通过 Apache 的 mime.types 文件来控制，但是在找到“audio/mp4”行并添加 m4a 扩展名之后：

```
audio/mp4                   mp4a m4a 
```

并重新启动 Apache，它仍然报告 video/mp4。

如何获取 finfo 以检测 .m4a 音频文件的正确（音频）mime 类型？

蒂亚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T22:22:25.430

使用的“魔法”文件与 Apache 无关。它用作[文件签名表](http://en.wikipedia.org/wiki/Magic_number_%28programming%29)，根据您的系统，它可以是随 PHP 分发的“魔术”文件（`magic`或`magic.mime`在 PHP 的目录中，大多数情况下），或者是系统的“魔术”文件[`file`（](http://linux.die.net/man/1/file)由Unix）。

您还可以要求使用特定的“魔术”文件，如下所示：

```
<?php 
  $finfo = new finfo(FILEINFO_MIME, "/usr/share/misc/magic.mgc");
?> 
```

您可以更改系统的“魔术”文件或制作自定义文件。

MPEG-4 音频和视频的[标准文件签名](http://www.garykessler.net/library/file_sigs.html)是：

```
00 00 00 18 66 74 79 70
33 67 70 35     ....ftyp
3gp5
MP4     MPEG-4 video files

00 00 00 18 66 74 79 70
6D 70 34 32     ... ftyp
mp42
M4V     MPEG-4 video/QuickTime file

00 00 00 20 66 74 79 70
4D 34 41 20     ... ftyp
M4A
M4A     Apple Lossless Audio Codec file 
```

您可能需要先检查这些是否在您的“魔术”文件中。

据我所知，m4a（音频）和 m4v（视频）可能具有相同的 mp4 签名（由于编码器错误），因此您不能总是使用“魔术”文件来区分两者。然后，您可以根据文件扩展名（就像 Windows 一样）放置一些 PHP 代码来确定它是视频还是音频 mp4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T22:20:28.603

这与 Apache 无关。

该文件是本地的。finfo 将返回它将返回的内容。如果您认为您需要特定类型的文件扩展名，只需返回它。

# android - 作为 MenuItem 的微调器未由 findViewById 初始化

> ID：12272104
> 
> 赞同：3
> 
> 时间：2012-09-04T22:18:27.267
> 
> 标签：android, android-spinner, android-menu

我的操作栏上有一个微调器。它是一个菜单项（不是导航模式）。它在我从 spinnerNumber 调用方法的行上返回了一个 nullpointerexception。我认为我对 xml 做错了，或者我不应该在 OnCreateOptionMenu 上对其进行初始化（但我认为当菜单 xml 仍未膨胀时，在 OnCreate 上调用它也是不正确的）。

act_main.xml：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/numberSpinner"
    android:actionLayout="@layout/spin_number"
    android:showAsAction="always">
</item>
<item
    android:id="@+id/menu_settings"
    android:orderInCategory="100"
    android:showAsAction="ifRoom"
    android:title="@string/menu_settings">
</item> 
```

spin_number.xml

```
 <Spinner xmlns:android="http://schemas.android.com/apk/res/android"

android:layout_width="wrap_content"
android:layout_height="wrap_content" /> 
```

我的 SherlockFragmentActivity 中的方法：

```
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.act_main, menu);

    spinnerNumber= (Spinner)findViewById(R.id.numberSpinner);

    mAdapter = new SimpleCursorAdapter(this,
            android.R.layout.simple_list_item_2, null,
            new String[] { MyContentProvider.Data.N_TITLE, MyContentProvider.Data.N_NUMBER, MyContentProvider.Data.N_ID },
            new int[] { android.R.id.text1, android.R.id.text2 },
            CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);

    this.getSupportLoaderManager().initLoader(NUMBERS_LOADER, null, this);

    spinnerNumber.setAdapter(mAdapter);
    spinnerNumber.setOnItemSelectedListener(this);
    spinnerNumber.setSelection(setSpinPosition());

    return true;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T03:24:00.220

findViewbyId 将尝试从活动的 contentView 中查找 id。

代替

```
spinnerNumber= (Spinner)findViewById(R.id.numberSpinner); 
```

尝试这个

```
MenuItem item = menu.findItem(R.id.numberSpinner);
spinnerNumber = (Spinner)item.getActionView() 
```

# c++ - 解析http post数据的伪步骤

> ID：12272107
> 
> 赞同：0
> 
> 时间：2012-09-04T22:18:37.610
> 
> 标签：c++, http-headers, http-post

我正在使用 c++ 编写 CGI 脚本，我从客户端获取后期数据如果我有这样的后期数据

```
sam=1&sam2=3&sam5=65 
```

解析选项的步骤是什么，我将把每一对放在 C++ 中的地图对象中？

我曾想过用“&”将值拆分为向量数组，然后用“=”拆分向量数组中的每个条目并将它们放入映射对象中，你怎么看？另外我想知道我能做些什么来处理格式错误的后期数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:35:12.243

您的前两个步骤是正确的。在 处分隔名称/值对，`&`并将名称与 处的值分开`=`。但是在将它们插入地图之前，您必须对名称进行 URL 解码，并对值进行 URL 解码[。](http://www.w3schools.com/tags/ref_urlencode.asp)

例如，`+`名称或值中的 a 应更改为空格。A`%2B`应替换为空格。`%3D`带等号的 A。

至于格式错误的帖子数据，它实际上取决于您的应用程序您认为格式错误的内容。您可能应该检查一个模棱两可的值，例如`x=2=3`. 是价值`2=3`还是`3`？您可以检查缺少的名称，例如`=3`或只是`3`.

但其余的取决于您的特定应用程序中合法的细节。

# asp.net - 我可以只在 web.debug.config 中指定连接字符串吗？

> ID：12272111
> 
> 赞同：4
> 
> 时间：2012-09-04T22:19:04.457
> 
> 标签：asp.net, .net, web-config

我有一组应用程序从 IIS 根目录中的 web.config 继承其连接字符串。这意味着我不需要在应用程序的根目录中指定连接字符串，但我在本地调试时确实需要指定连接字符串。

我的问题是，如何在 web.debug.config 中设置仅在调试时使用的连接字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T22:26:23.380

You could specify the connectionstring in the normal web.config and then in the web.release.config add a transform that simply removes the connection string all together.

That way it should exist in the debug one but not in the web.release.config.

Of course this assumes you are using those configs with transforms and not doing a simple copy/paste of the code when you deploy

[MSDN](http://msdn.microsoft.com/en-us/library/dd465326.aspx) has a good example of this

> The following example shows how to select all the connection string add elements in the development Web.config file. In the deployed Web.config file, only the first connection string element is removed.

```
<configuration xmlns:xdt="...">
  <connectionStrings>
    <add xdt:Transform="Remove" />
  </connectionStrings>
</configuration> 
```

EDIT: I guess alternatively you could also create a transform in web.debug.config that adds it while in debugging, which might help to keep it out of the original web.config if you aren't appying transforms when deploying

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-05T08:29:41.593

将您的调试连接字符串保留在 Web.Config 中，并使用定位器替换 Web.Release.Config 中的发布连接字符串，如下所示 `<connectionStrings> <add name="DefaultConnection" connectionString="Release Connections tring" providerName="System.Data.SqlClient" xdt:Transform="SetAttributes" xdt:Locator="XPath(configuration/connectionStrings)"/> </connectionStrings>`

# matlab - matlab中两个向量的协方差

> ID：12272114
> 
> 赞同：6
> 
> 时间：2012-09-04T22:19:33.513
> 
> 标签：matlab, covariance

我正在尝试计算matlab中两个向量之间的协方差：

```
x = [1:10]
y = [21:30]
cov(x,y) 
```

这将返回协方差和方差矩阵。我只想要 1 个数字：两个向量之间的协方差。如何在matlab中得到这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T22:33:50.683

如果您只有两个一维向量，则您要查找的数字是 的输出的 (1,2) 元素`cov`。根据定义，协方差矩阵包含对角线的方差和非对角线的协方差值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T22:34:33.210

我猜`x`在随机变量的一种实现中，`y`. 然后`cov(x',y')`会给你协方差矩阵，其中对角元素是 和 的方差，`x`非`y`对角元素是它们的协方差。注意`cov(x',y')`是对称矩阵。

# javascript - 带有集合的 Backbone.js 不起作用。是 JSON 问题吗？

> ID：12272115
> 
> 赞同：0
> 
> 时间：2012-09-04T22:19:38.250
> 
> 标签：javascript, json, backbone.js, javascript-framework, backbone.js-collections

大家好，我是 Backbone.js 的新手。我正在尝试让我的收藏与基于 RESTful python 谷歌应用引擎的后端一起工作。这是服务器上使用的代码：

```
def getJson():
    tweets_out = []

    tweets = getModTweets()
    for tweet in tweets:
        temp = {}
        temp["screen_name"] = tweet.screen_name
        temp["text"] = tweet.text
        temp["profile_image_url"] = tweet.profile_image_url
        temp["id"] = tweet.id
        temp["created_at_time"] = tweet.created_at_time
        temp["created_at_epoch"] = tweet.created_at_epoch
        temp["time_lapsed"] = tweet.time_lapsed
        tweets_out.append(temp)

    a = json.dumps(tweets_out)

    return a 
```

生成的 JSON 如下：

```
[{"screen_name": "spolsky", "text": "@greeleygeek I'm going to start doing that", "profile_image_url": "http://a0.twimg.com/profile_images/1770014670/image1327118364_normal.png", "time_lapsed": "3 days ago", "created_at_epoch": 1346464678, "created_at_time": "2012-9-1 01:57:58", "id": 15948437}, {"screen_name": "spolsky", "text": "@phlix google analytics.", "profile_image_url": "http://a0.twimg.com/profile_images/1770014670/image1327118364_normal.png", "time_lapsed": "4 days ago", "created_at_epoch": 1346439185, "created_at_time": "2012-8-31 18:53:05", "id": 15948437}, {"screen_name": "spolsky", "text": "@AdityaAthalye we make it up in volume!", "profile_image_url": "http://a0.twimg.com/profile_images/1770014670/image1327118364_normal.png", "time_lapsed": "4 days ago", "created_at_epoch": 1346425278, "created_at_time": "2012-8-31 15:01:18", "id": 15948437}] 
```

我尝试使用以下两种方法尝试通过以下两种方式填充我的集合，但均未成功：

```
 var Tweet = Backbone.Model.extend({
        urlRoot : '/tweets.json'
    });

  var Tweets = Backbone.Collection.extend({
        model: Tweet,
        url: '/bulktweets.json'
  });

     var tweets2 = new Tweets();    

    //method 1
tweets2.reset(JSON STRING LISTED ABOVE);
    //Yes tweets2.reset([{"screen_name": "spolsky", "text": "@greeleygeek I'm going to          start doing that", "profile_image_url": "http://a0.twimg.com/profile_images/1770014670/image1327118364_normal.png", "time_lapsed": "3 days ago", "created_at_epoch": 1346464678, "created_at_time": "2012-9-1 01:57:58", "id": 15948437}, {"screen_name": "spolsky", "text": "@phlix google analytics.", "profile_image_url": "http://a0.twimg.com/profile_images/1770014670/image1327118364_normal.png", "time_lapsed": "4 days ago", "created_at_epoch": 1346439185, "created_at_time": "2012-8-31 18:53:05", "id": 15948437}, {"screen_name": "spolsky", "text": "@AdityaAthalye we make it up in volume!", "profile_image_url": "http://a0.twimg.com/profile_images/1770014670/image1327118364_normal.png", "time_lapsed": "4 days ago", "created_at_epoch": 1346425278, "created_at_time": "2012-8-31 15:01:18", "id": 15948437} 
```

]);

```
 //method 2
    tweets2.fetch(); 
```

溢出者可能会指出我正确的方向吗？提前致谢。

**更新：** 我能够与服务器通信，但整个集合不只解析第一个元素。

为什么我会得到集合，即 tweets2.length 返回长度为 1 而不是预期的 5？有人可以阐明一些吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T00:08:39.950

假设你的意思是`tweets2.fetch()`这里可能会发生什么。

首先，这一行：

```
tweets2.reset(JSON STRING LISTED ABOVE); 
```

你是传入一个 json 字符串还是一个 json 数组？使用重置，如果您只是传入模型属性，则应将其作为 json 数组/对象传入。

```
tweets2.reset("[{'name':'bluejay'},{'name':'cardinal'}]");  // STRING, no good.

tweets2.reset( [{'name':'bluejay'},{'name':'cardinal'}] );  // as json object array, okay! 
```

对于您`tweets.fetch()`，您尚未定义或实例化变量`tweets`。我想你的意思是...

```
tweets2.fetch(); 
```

如果你的服务器设置正确，返回一个 json 对象，那么你应该很高兴。

# javascript - 用于虚构视频游戏世界的 Google Maps api 自定义图块

> ID：12272119
> 
> 赞同：10
> 
> 时间：2012-09-04T22:20:29.437
> 
> 标签：javascript, google-maps, google-maps-api-3

我想使用 Google Maps v3 api 生成交互式 Google Map 界面，该界面使用自定义图块作为视频游戏中的地图。该应用程序需要能够放大并为每个缩放级别显示适当的图块。

我正在寻找有关如何完成此任务的一些资源或教程。Google Maps v3 API 似乎只讨论使用位于普通 Google 地图图块之上的自定义图块。这在我的应用程序中没有意义，因为我的地图是针对虚构世界的，并且不会与现实世界地图中的任何内容对齐。也许我只是没有在 API 指南中看到我需要的东西......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T03:51:01.313

查看参考资料中的[ImageMapType](https://developers.google.com/maps/documentation/javascript/reference#ImageMapType)类。有一个很好的例子展示了[月球](https://google-developers.appspot.com/maps/documentation/javascript/examples/maptype-image)瓷砖。

我最喜欢的应用程序之一是[Internet 地图](http://internet-map.net)，开发人员写了[一篇](http://the-internet-map.blogspot.com.au/2012/08/the-internet-maps-web-architecture.html)关于它是如何开发的非常精彩的文章。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T03:24:31.383

您需要将自定义游戏地图图像切割成适当的文件/目录结构，以便轻松集成到 Maps API（[这里是](http://facepunch.com/showthread.php?t=1184658 "这里是")使用 Photoshop 的示例和一些示例 HTML/JS 代码）。或者使用更友好的工具，如[TileMill](http://mapbox.com/tilemill/docs/manual/exporting/ "瓷砖磨")，但这需要标准空间数据格式的数据，并且您可能没有以这种格式存储游戏地图。如果你能走这条路，他们还提供了一个名为[TileServe](https://github.com/mapbox/tilestream "瓦片流")的基于 Node.js 的服务器，它使集成变得轻而易举。

如果您期待大量流量，那么也许可以查看[Google Maps Engine](http://www.google.com/enterprise/mapsearth/products/mapsengine.html "谷歌地图引擎")以将您的自定义游戏地图图像直接托管在 Google 的基础架构中。

# php - 在 PHP 中将值设置为 $_REQUEST 变量

> ID：12272120
> 
> 赞同：0
> 
> 时间：2012-09-04T22:20:31.243
> 
> 标签：php

是否可以在 PHP 中为 $_REQUEST 变量赋值？例如：

```
if ($_REQUEST['name'] == "") {
  $_REQUEST['name'] = "John";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:22:12.340

是的。`$_REQUEST`是一个和其他变量一样的变量，但可以预先填充并且是超全局的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T01:08:30.267

似乎该变量是只读的，如果要保存全局变量，可以尝试在全局范围内创建一个新变量，如下所示：

```
$GLOBALS['some_var'] = 'new var'; 
```

然后您可以在代码中的任何位置获取值，如下所示：

```
$your_var = $GLOBAS['some_var']; 
```

# mongodb - mongodb java插入嵌入文档

> ID：12272121
> 
> 赞同：4
> 
> 时间：2012-09-04T22:20:38.170
> 
> 标签：mongodb, mongodb-java, mongodb-query

我有一个包含嵌入文档的集合。

```
 System
  {
    System_Info: ...,

   Tenant: [ 
    { 
        Tenant_Id: ..., 
        Tenant_Info: ..., 
        Prop_Info: ...
    }, 
    { 
        Tenant_Id: ..., 
        Tenant_Info: ..., 
        Prop_Info: ...
    } ] 
```

}

如果我需要像这样插入另一个租户信息

```
 Tenant { Tenant_Id:2,Tenant_Info:"check",prop_info:"client"}. 
```

插入嵌入式文档的 mongodb 查询是什么？以及如何使用java来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T07:18:16.633

使用以下代码插入数组：

```
BasicDBObject query = new BasicDBObject();
query.put( "System_Info", "...." );

BasicDBObject tenant = new BasicDBObject();
tenant.put("Tenant_Id", 2);
tenant.put("Tenant_Info", "check");
tenant.put("Prop_Info", "client");

BasicDBObject update = new BasicDBObject();
update.put("$push", new BasicDBObject("Tenant",tenant));

coll.update(query, update,true,true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T22:55:37.530

您是否尝试将另一个租户添加到阵列中？如果是这样，您需要创建一个表示租户的 DBObject，然后将其 $push 到数组上。

在 Java 中，嵌入式文档由 DBObjects 表示（BasicDBObject 是其子类）。这是从文档中插入嵌入式文档的示例：

[http://www.mongodb.org/display/DOCS/Java+Tutorial#JavaTutorial-InsertingaDocument](http://www.mongodb.org/display/DOCS/Java+Tutorial#JavaTutorial-InsertingaDocument)

此外，这是一个在 Java 中使用 $push 的示例：

[使用 Java 驱动程序更新 MongoDB 中的数组](https://stackoverflow.com/questions/6802742/updating-an-array-in-mongodb-using-java-driver)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-26T08:28:54.817

...这是使用 mongo-driver version >= 3.1 的方法（我的是 3.2.2）：

```
 Document tenant = new Document("Tenant_Id", 2)
            .append("Tenant_Info", "check")
            .append("Prop_Info", "client");

    Bson filter = Filters.eq( "System_Info", "...." ); //get the parent-document
    Bson setUpdate = Updates.push("Tenant", tenant);

    coll.updateOne(filter, setUpdate); 
```

希望对某人有所帮助。

# java - 在休眠中加入复合主键的某个属性

> ID：12272122
> 
> 赞同：3
> 
> 时间：2012-09-04T22:20:41.493
> 
> 标签：java, hibernate, jpa, persistence, composite-key

我正在使用休眠，并且我有两个表（旧的，它们不能重组），如下所示

表 A

```
@Entity
@Table(name = "tableA")
public Class TableA implements Serializable {
    @EmbeddedId private TableAId tableAId;

    @OneToOne(mappedBy = "tableA")
    private TableB tableB;

    // getters, setters, hashCode and equals ommited
} 
```

表 A 的复合 ID

```
@Embeddable
public class TableAId implements Serializable {
    protected int id1;
    protected String id2;
    protected int id3;
    // getters, setters, hashCode and equals ommited
} 
```

表 B

```
@Entity
public class TableB implements Serializable {
    @OneToOne
    @JoinColumn(name = "tableB", referencedColumnName = "id3")
    protected TableA tableA;
    // getters, setters, hashCode and equals ommited
} 
```

从上面的代码可以看出，我需要表 B 使用表的复合键的一个或多个（不是全部）属性来连接表 A。我已经用这三种方法尝试过，但没有成功：

1.  和上面的代码一模一样。
2.  像这样更改 referencedColumnName 值

    ```
    referencedColumName = "tableAId.id3" 
    ```

3.  在 TableA 的 pojo 实体中添加复合复合键的属性，如下所示：

    ```
    // TableA
    @Column(name = "id1", insertable = false, updatable = false)
    private Integer id1; 
    ```

如果这甚至是可能的？？如果有任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:18:04.733

我认为 JPA 注释 @MapsId 可能在这里为您工作：

[http://docs.oracle.com/javaee/6/api/javax/persistence/MapsId.html](http://docs.oracle.com/javaee/6/api/javax/persistence/MapsId.html)

在 TableA 类中，对 tableB 属性试试这个：

```
@MapsId("id3")
@OneToOne(mappedBy = "tableA")
private TableB tableB; 
```

也从 TableB 类的 tableA 属性中删除 @JoinColumn 注释。

# javascript - 为什么表单元素不应该命名为提交？

> ID：12272123
> 
> 赞同：3
> 
> 时间：2012-09-04T22:20:48.117
> 
> 标签：javascript

我通过调试发现我不应该命名任何 Form Elements `name="submit"`，但即使在搜索之后我也没有找到任何好的解释为什么？

请参见下面的简单代码示例：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
    </head>
    <body>
        <form action="javascript:alert('submitted');" method="post" id="test-form">
            <label>Name</label>
            <input type="text" name="name-field" value="" />
            <input type="submit" name="submit" value="Submit Button" /> <!-- name should not be "submit" -->
            <p><a href="javascript: document.getElementById('test-form').submit();">Submit Link</a></p>
        </form>
    </body>
</html> 
```

*   如果您在任何表单元素上按 Enter 或单击 **提交****按钮***，*它将起作用。
*   如果你**点击**提交*链接*，将会有错误

    未处理的错误：'document.getElementById('test-form').submit' 不是函数

如果您只是**将**您的*提交按钮*重命名为除此之外的任何其他名称`name="submit"`（即使您只是将其中的某些部分大写）或只是**删除**该`name="submit"`属性，那么*提交按钮*和*提交链接*都将起作用。

我在最新版本的 Internet Explorer、Firefox、Opera、Chrome 和 Safari 中进行了尝试。他们在这方面都有一致的行为。

正如您在我的代码示例中看到的，没有 jQuery 或任何其他 JavaScript 库的参与。

我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T22:27:52.303

如果您在此处查看 Mozilla 文档：[https ://developer.mozilla.org/en-US/docs/DOM/HTMLFormElement](https://developer.mozilla.org/en-US/docs/DOM/HTMLFormElement)

你会看到表单有一个`.submit()`方法。

此外，表单还填充了表单中的字段。

（这里有一个例子： http: [//www.devbay.com/articles/javascript/accessing-form-elements-array-with-javascript/](http://www.devbay.com/articles/javascript/accessing-form-elements-array-with-javascript/) 我找不到任何*应该*发生的参考，只有它确实发生了。）

因此，当您创建一个称为`submit`它的元素时，它会覆盖表单的内置`submit()`方法——并且由于该元素*不是*函数，因此您会收到该错误消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T22:27:52.697

假设您的表单已命名`"foo"`并且您有一个字段`"firstName"`。

`foo.firstName`是表单中的那个字段。

`foo.submit()`将提交该表单，因为`submit`它是表单上的一种方法。

如果您重新定义`submit`为表单域，您将覆盖该`submit`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T22:27:11.487

submit 将是表单输入类型，我认为它也用作 javascript 中的标识符。因此，将提交按钮命名为“提交”会使 javascript 中“提交”的使用变得模棱两可

# iphone - 有没有办法知道使用什么技术来构建 iPad 应用程序？

> ID：12272124
> 
> 赞同：-2
> 
> 时间：2012-09-04T22:20:54.637
> 
> 标签：iphone, ipad, mobile

我必须开发一个 iPhone/iPad 应用程序，我已经对这个主题进行了大量研究，并决定使用什么。我还被要求审查我们行业中的一些移动应用程序，我一直在这样做。

现在我希望能够了解这些其他各种产品中使用了哪些技术，这样我就可以将我对应用程序的感觉与它的制作方式（原生、PhoneGap、MonoTouch 等）进行比较。我知道任何人都可以用一个好的平台制作一个糟糕的应用程序，反之亦然，但这至少会让我对这项技术有一些感觉。

所以问题是：有没有办法判断使用什么技术来构建 iPhone/iPad 应用程序？

**注意：**让我强调一下，我不想对应用程序进行逆向工程或窃取他们的秘密或任何东西，我只想知道他们使用什么工具来构建它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:38:35.727

如果您仔细查看您知道在特定框架中制作的应用程序，您通常可以交叉引用以找出其他应用程序框架。

它只需要经验和对细节的关注。

# c++ - 查找最多进行 2 次交易可以赚到的最大资金（在列表中查找两个最大的非重叠增量）

> ID：12272131
> 
> 赞同：3
> 
> 时间：2012-09-04T22:21:17.877
> 
> 标签：c++, algorithm, dynamic-programming

注意：没有重叠，第二次买入应该晚于第一次卖出。

给定最后一个交易日的股票报价流。假设它已经按时间排序。通过进行 2 次交易，找出您可以在该股票上赚到的最大金额。买入和卖出算作一次交易。

例子：

```
time Price 
1 10 
2 11 
3 7 
4 15 
5 8 
6 17 
7 16 
```

答案是 8 + 9 3 买入，4 卖出，5 买入，6 卖出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:23:21.477

动态规划

d[i][j].b = 第 i 次后的收入，进行了 j 次交易，第 j 次交易只购买 d[i][j].s = 第 i 次后的收入，进行了 j 次交易，第 j 笔交易的买卖基数 d[i][j].b = d[i][j].v = -inf; d[0][0].s = 0;

在这种特殊情况下， j 仅为 1-2

```
d[i][j].b = max(d[i-1][j-1].s - price[i], d[i-1][j].b)
d[i][j].s = max(d[i-1][j].b + price[i], d[i-1][j].s) 
```

像这样的东西

O(n*k) 其中 k - 事务数，因此在这种情况下为 O(n)

# javascript - IE9 - 添加和删除 DOM 元素会破坏父 keydown 事件

> ID：12272132
> 
> 赞同：1
> 
> 时间：2012-09-04T22:21:21.913
> 
> 标签：javascript, jquery, internet-explorer, dom, javascript-events

我们正在构建一个相当复杂的 UI 控件（实际上是一个数据网格），并在用户滚动网格时从 DOM 树中动态添加/删除节点（并尝试以尽可能高的性能进行操作）。

我们在 IE9 和 IE10 中注意到，当我们从节点添加/删除子元素时，它会停止触发其 keydown 事件：

看到这个小提琴：http: [//jsfiddle.net/T2Lt8/13/](http://jsfiddle.net/T2Lt8/13/)

您可以看到，在两个左右的 keydown 事件之后，父级停止触发。但是，如果我取消注释`$(child).focus()`keydown 处理程序中的行 - 一切正常。

发生了什么，这是解决此问题的最佳方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T02:47:00.450

在玩了一段时间后，我发现了以下内容：

1.  如果您添加`child.style.border = "1px solid red";`，您会看到第二个孩子被创建，因为第一个孩子没有被删除。这是由于[parent 中有空格](https://developer.mozilla.org/en-US/docs/DOM/Node.firstChild?redirectlocale=en-US&redirectslug=firstChild)。

2.  孩子比父母大。如果您将父级设置为 150 像素 x 150 像素并且只单击父级而不是子级，则关键事件会正确且重复地工作。看来 IE9 确实保留了绑定。

3.  如果孩子是像 a 这样“不透明”的东西`textarea`，它似乎会让 Firefox 的行为类似于我们在 IE9 中看到的行为。

# c# - Memcached .Net 客户端 BufferedStream 错误

> ID：12272134
> 
> 赞同：3
> 
> 时间：2012-09-04T22:21:26.670
> 
> 标签：c#, c#-4.0, memcached

我正在*尝试*使用 Memcached.ClientLibrary。我能够使它正常工作，但是在几次点击之后（甚至在我第一次看到页面之前），我得到了这个奇怪的错误，我在搜索它时找不到任何信息。

错误信息：

> 如果基础流不可查找，则在读取缓冲区不为空时无法写入 BufferedStream。确保此 BufferedStream 下的流可以在此 BufferedStream 上寻找或避免交错读取和写入操作。

堆栈跟踪：

```
[NotSupportedException: Cannot write to a BufferedStream while the read buffer is not empty if the underlying stream is not seekable. Ensure that the stream underlying this BufferedStream can seek or avoid interleaving read and write operations on this BufferedStream.]
System.IO.BufferedStream.ClearReadBufferBeforeWrite() +10447571
System.IO.BufferedStream.Write(Byte[] array, Int32 offset, Int32 count) +163
Memcached.ClientLibrary.SockIO.Write(Byte[] bytes, Int32 offset, Int32 count) in C:\devroot\memcacheddotnet\trunk\clientlib\src\clientlib\SockIO.cs:411
Memcached.ClientLibrary.SockIO.Write(Byte[] bytes) in C:\devroot\memcacheddotnet\trunk\clientlib\src\clientlib\SockIO.cs:391
Memcached.ClientLibrary.MemcachedClient.Set(String cmdname, String key, Object obj, DateTime expiry, Object hashCode, Boolean asString) in C:\devroot\memcacheddotnet\trunk\clientlib\src\clientlib\MemCachedClient.cs:766
Memcached.ClientLibrary.MemcachedClient.Set(String key, Object value, DateTime expiry) in C:\devroot\memcacheddotnet\trunk\clientlib\src\clientlib\MemCachedClient.cs:465
Yuusoft.Julian.Server.Models.Utils.Caching.CacheWrapper.Add(CacheKey key, T o, CacheDependency dependencies, Nullable`1 expirationTime, CacheItemRemovedCallback callBack) 
```

我的初始化代码（静态构造函数）：

```
 SockIOPool pool = SockIOPool.GetInstance();
        pool.SetServers(CacheWrapper.Servers);

        pool.InitConnections = 3;
        pool.MinConnections = 1;
        pool.MaxConnections = 50;

        pool.SocketConnectTimeout = 1000;
        pool.SocketTimeout = 3000;

        pool.MaintenanceSleep = 30;
        pool.Failover = true;

        pool.Nagle = false;
        pool.Initialize(); 
```

// 要设置的代码（第二个是错误的 - 但不是在第一次命中？！）

```
 MemcachedClient mc = new MemcachedClient();
        mc.Set(key, o, expirationTime.Value); 
```

//获取代码

```
 MemcachedClient mc = new MemcachedClient();
        object o = mc.Get(key); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-28T04:17:11.443

除了这个异常之外，我的 Memcached.ClientLibrary (和) 的 memcached **log4net**日志中也出现了以下两个异常，我能够通过确保 memcached 键不包含任何空格来解决所有这三个异常。`Error storing data in cache for key:<key with spaces>``Exception thrown while trying to get object from cache for key:<key with spaces>`

**参考：**[https ://groups.google.com/forum/#!topic/memcached/4WMcTbL8ZZY](https://groups.google.com/forum/#!topic/memcached/4WMcTbL8ZZY)

**Memcached 版本：** memcached-win32-1.4.4-14

# vba - 在 VBA 中缩短 GoToSlide 命令？

> ID：12272135
> 
> 赞同：2
> 
> 时间：2012-09-04T22:21:33.870
> 
> 标签：vba, powerpoint

我正在制作一个 PowerPoint，我不断地使用这个命令来跳转幻灯片：

```
With SlideShowWindows(1)
    .View.GoToSlide (.Presentation.Slides(x).SlideIndex)
End With 
```

我想通过编写一个可以缩短它的模块来缩短它，但由于我是一个新手并且真的不知道如何，我真的需要帮助。这是我编写的“SlideControl”模块：

```
Public Intro As String, BIOS As String, OSBegin As String, InitialSetup As String, LogIn As String, Desktop As String

Public Sub GoToSlide(Slide)

Intro = SlideShowWindows(1).Presentation.Slides(1).SlideIndex
BIOS = SlideShowWindows(1).Presentation.Slides(2).SlideIndex
OSBegin = SlideShowWindows(1).Presentation.Slides(5).SlideIndex
InitialSetup = SlideShowWindows(1).Presentation.Slides(6).SlideIndex
LogIn = SlideShowWindows(1).Presentation.Slides(9).SlideIndex
Desktop = SlideShowWindows(1).Presentation.Slides(11).SlideIndex

SlideShowWindows(1).View.GoToSlide (Slide)

End Sub 
```

那是整个模块，最后没有别的了。当然，我是编码新手，所以如果代码看起来不对，请帮助我纠正它。我想我应该可以使用以下命令进入介绍幻灯片：

```
GoToSlide (Intro) 
```

然后当我调用它时出现此错误：

```
Compile error:

Only comments may appear after End Sub, End Function, or End Property 
```

谁能帮我解决这个问题？我会非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:56:40.113

你真的很亲近。

根据您显示的内容，您只需要确保列出以下内容：

```
Intro = SlideShowWindows(1).Presentation.Slides(1).SlideIndex
BIOS = SlideShowWindows(1).Presentation.Slides(2).SlideIndex
OSBegin = SlideShowWindows(1).Presentation.Slides(5).SlideIndex
InitialSetup = SlideShowWindows(1).Presentation.Slides(6).SlideIndex
LogIn = SlideShowWindows(1).Presentation.Slides(9).SlideIndex
Desktop = SlideShowWindows(1).Presentation.Slides(11).SlideIndex 
```

在需要调用值之前运行的过程中。

或者，由于您基本上是对值进行硬编码，我认为您可以通过枚举合理地完成此操作。请注意，枚举必须在任何方法之前位于模块的顶部。

```
Public Enum slideNum
    Intro = 1
    Bios = 2
    OSBegin = 5
    InitialSetup = 6
    Login = 9
    Desktop = 11
End Enum
Public Sub GoToSlide(slide As slideNum)
    SlideShowWindows(1).View.GoToSlide (slide)
End Sub
Sub example()
    GoToslide(Login)
End sub 
```

当您将 GoTo Slide 子程序编码到程序中时，使用第二种方法，它会自动建议有效的幻灯片编号 IE Intro、Bios、OSBegin、InitialSetup、Login 或 Desktop。

# sql - 包含分号的 SQL 语句导致错误

> ID：12272143
> 
> 赞同：7
> 
> 时间：2012-09-04T22:22:06.093
> 
> 标签：sql, sqlite

一些人已经报告过，带引号的字符串中的分号会导致 SQL 错误。

我当前的设置是一个 SQLite 3 数据库，我正在尝试执行插入，我的新数据字段之一包含一些 HTML，作为其中的一部分，我有以分号结尾的 html 实体，例如 -`&egrave;`

我正在尝试的一个简单的精简示例查询如下：

```
insert into my_table (some_field) values ('Hello; world'); 
```

我得到的错误是：

1)

```
insert into my_table (some_field) values ('Hello
Error : unrecognized token: "'Hello" 
```

2)

```
world')
Error : near "world": syntax error 
```

因此，SQL 引擎显然看到了分号`Hello; world`并将其解释为语句的结尾。我已经请其他几个人对此进行了测试，并且有些人在使用 SQLite GUI 时发现了这项工作，这让我相信这只是一个需要更改的 SQL 设置。

似乎至少在默认情况下，SQL 引擎只需要半冒号作为语句的结尾，有人知道如何更改吗？

这很奇怪，请尝试以下查询：

```
DROP TABLE IF EXISTS djp;
CREATE Table djp ("mykey" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, "name" VARCHAR(25));
INSERT INTO djp (name) VALUES ('This is test two; OK?');
SELECT * FROM djp; 
```

请注意，如果我在没有指定要插入的字段的情况下插入（使我的自动增量有点毫无意义），则不会发生错误...

```
INSERT INTO djp VALUES (1, 'This is test two; OK?'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T23:04:52.687

如评论中所述，我在独立`sqlite3.exe`引擎中运行了您的代码示例，并且它像任何其他文本一样执行（带或不带分号）。既然你指出了`INSERT INTO Foo VALUES ()`和`INSERT INTO Foo (column) VALUES ()`怪癖，我同意这不是你的代码的问题，它是 Navicat 的一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T04:58:35.213

正如 Sam 的回答中提到的，问题是 SQLite 编辑器，而不是 SQLite 本身。在这个问题的情况下，问题出在 Navicat（注意：现在从 10.1.2 开始修补）。我遇到了同样的问题，但对我来说这是与 SqlQuery 相同的问题。

我一直在为此苦苦挣扎，直到我意识到许多免费的 SQLite 客户端/编辑器在字符串支持中没有分号！

我最终找到[了 MesaSQLite](http://www.desertsandsoftware.com)，它支持字符串中的分号并且是免费的（但还有一些其他的小缺点）。

我发布这个答案是因为我在搜索引擎时很容易找到这个*问题*，但我没有那么容易找到答案。祝其他遇到这种情况的人好运。

其他可能有帮助的问题：

[Mac SQLite 编辑器](https://stackoverflow.com/questions/100959/mac-sqlite-editor)

[什么是好的开源 GUI SQLite 数据库管理器？](https://stackoverflow.com/questions/1507506/what-are-good-open-source-gui-sqlite-database-managers)

请记住，问题不在于 SQLite！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T22:34:15.537

我相信你只需要在 SQL 语句的末尾告诉 SQLite 你的转义字符是什么。例如：

```
SELECT * FROM MyTable WHERE RevenueChange LIKE '%0\%' ESCAPE '\' 
```

LIKE 将匹配 30%、140% 等值。我认为您使用的`PHP`正确吗？为什么不使用**[PDO](http://php.net/manual/en/book.pdo.php)**或**[MYSQLI](http://php.net/manual/en/book.mysqli.php)**

使用 PDO 扩展的示例：

```
<?php

    $name = 'one';
    $value = 1;

    $stmt = $dbh->prepare("INSERT INTO REGISTRY (name, value) VALUES (?, ?)");
    $stmt->bindParam(1, $name);
    $stmt->bindParam(2, $value);

    $stmt->execute();

?> 
```

这将允许您插入带有特殊字符的记录。

# java - 创建一个小游戏

> ID：12272145
> 
> 赞同：0
> 
> 时间：2012-09-04T22:22:09.233
> 
> 标签：java, game-physics

嘿，我有点卡住了，我一直在寻找创建此类迷你游戏的最佳方法，基本上玩家将进入大厅（他们现在存储在地图或数组中），然后当游戏开始时，游戏将从中随机选择 1 个人被感染的地图或阵列（现在将此玩家从地图/阵列移除到受感染的地图/阵列）

我将如何去做我之前尝试过但我最终失败了。

到目前为止，我有类似这样的设置只是为了测试它

```
 private static HashMap<String, Integer> infected = new HashMap<String, Integer>();

private static HashMap<String, Integer> survivors = new HashMap<String, Integer>();

private static HashMap<String, Integer> lobby = new HashMap<String, Integer>(); 
```

我正在尝试在我们说话时在其中存储随机名称并将对其进行测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:39:52.277

我可能会保留所有可用玩家的“主”列表。从那里我只需创建一个“受感染”玩家的参考列表。

然后，您只需调用`contains`“受感染”列表即可确定玩家是否被感染。

虽然需要更多信息...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T23:21:09.057

我认为这不是`HashMap`真正正确的数据结构，也许考虑制作一个包含“Buffs”集合的玩家类别，您`Game`可以维护多个受感染玩家的列表，但在单个列表中找到该玩家可能更简单.

```
interface Moveable {
    public void forward;
    public void back;
    public void left;
    public void right;
}

interface Buffable {
    public void addBuff(Buff buff);
    public void removeBuff(Buff buff);
    public boolean hasBuff(Buff buff);
}

class Player implements Moveable, Buffable {
    private String name;
    private int health;
    private List<Buff> buffs;

    /*
     contructor etc
     */

    public void addBuff(Buff buff) {
        buffs.add(buff);
    }

    public void removeBuff(Buff buff) {
        buffs.remove(buff);
    }

    public void hasBuff(Buff buff) {
        return buffs.contains(buff);
    }
}

class Game {
    private List<Player> players;
    private List<Player> infected;

    /*
     constructor etc
     */

    public void infect(int player) {
        Player p = players.get(player);
        p.addBuff(new Infection());
        infected.add(p); // see or
    }
    // or
    public List<Player> getInfectedPlayers() {
        List<Player> ret = new List<Player>();
        Buff b = new Infection();

        for (Player p : players) {
            if (p.hasBuff(b)) {
                ret.add(p);
            }
        }

        return ret;
    }
} 
```

# android - 使用带有 FragmentAcivity 的 FragmentPagerAdpater 使用 ViewPager 初始化视图

> ID：12272147
> 
> 赞同：0
> 
> 时间：2012-09-04T22:22:11.953
> 
> 标签：android, android-fragments, android-viewpager, android-fragmentactivity

我在 FragmentActivity 中使用带有 FragmentPagerAdapter 的 ViewPager（说快五倍 - 我敢说：）

无论如何，我的东西显示正确，但我需要能够初始化我的视图。在片段之前，它很容易：为视图分配一个 id，然后使用 FindViewById - 但 FragmentPagerAdapter 会延迟加载视图（应该如此）。

我的问题：如何访问这些视图来初始化它们。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:25:22.883

> How can I access those view to initialise them.

Use `findViewById()` in `onCreateView()`, `onActivityCreated()`, etc. of your fragment.

# javascript - 如何在 window.onbeforeunload 中显示是或否窗口？

> ID：12272149
> 
> 赞同：0
> 
> 时间：2012-09-04T22:22:21.983
> 
> 标签：javascript, jquery, asp.net

如果他想离开页面，我正在尝试警告用户保存数据。消息应显示简单的“是否要保存数据？” , 如果是调用代码后面的方法（asp:button click），如果是从页面离开页面。

但是现在它在我的消息中显示了不需要的消息字符串（见下文）。

![在此处输入图像描述](../Images/bf58df49cb6c2f32532bcef4491c1d32.png)

```
 var form_has_been_modified = 0;
    $(function () {

        $("input").keyup(function () {
            form_has_been_modified = 1;
        })
        window.onbeforeunload = function (e) {
            if (!form_has_been_modified) {
                return;
            }

            var message = "Do you want to save the data before leave the page?";

            return message;
        }

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:28:07.703

不幸的是，这是浏览器行为，您无法更改它。您可能需要重新措辞您的消息，以便它在浏览器预定义消息的上下文中有意义。此外，请确保您测试其他浏览器，因为消息和行为可能会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T22:28:50.050

这是 Internet Explorer（作为客户端 Web 浏览器）的一种特殊行为，您对此无能为力。它是仅用于 onbeforeunload() 的特殊框。如果您在 JS 的其他地方显示是/否对话框，您将得到正常的框。但是对于 onbeforeunload() 你会得到这样的对话框。

在 IE9 中，它被更复杂的框所取代，它具有“离开页面”和“留在页面上”按钮。这样做是为了保护用户免受欺诈网站的侵害。

# javascript - “elseif”Javascript 附近的语法错误

> ID：12272152
> 
> 赞同：3
> 
> 时间：2012-09-04T22:22:28.593
> 
> 标签：javascript, syntax-error

我最近开始需要开始学习 Java Script。我的应用程序是 MVC 3，VB.NET。在我的一个观点中，我有以下 javascript 片段，它只是从 SignalR 消息中查看 clientName，并根据字符串是否包含某个字符串来决定显示该消息的正确颜色。代码片段如下：

```
 chat.addMessage = function (myClientName, message) {
        if (myClientName.indexOf("System") != -1) {
        $('#messages').append('<br><b style="color:red">'+ myClientName + message + '</b>');
        }

        elseif (myClientName.indexOf("devloper") != -1) {
        $('#messages').append('<br><b style="color:Blue">'+ myClientName + message + '</b>');
        }
        else
        {
        $('#messages').append('<br>' + myClientName + ' : ' + message);
                    }

        if (autoScroll) {
            $('#messages').animate({ scrollTop: $('#messages').prop('scrollHeight') })
        }
    }; 
```

问题是 elseIf 行不喜欢最后的法式大括号......它说我需要一个“;” 我想我可以取消 elseIf 并只使用 if 但似乎很蹩脚的方式来解决这个问题......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T22:23:46.107

You want to use

```
} else if ( /*... */ ) { 
```

instead of the single-word "elseif"

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T22:25:19.007

It should not be `elseif` it should be `else if` So your code becomes

```
else if (myClientName.indexOf("devloper") != -1) { 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T22:23:49.467

It's `else if`, separated with a space, not `elseif`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T22:23:53.393

There is no `elseif` in JavaScript. Instead you should use `else if`

# php - 将 php 结果回显到两个单独的 div

> ID：12272159
> 
> 赞同：1
> 
> 时间：2012-09-04T22:23:19.633
> 
> 标签：php, javascript

我有一个通过 javascript 接收下拉变量的 php 函数。变量通过函数处理，函数返回两个结果。我想在页面顶部的 div 'one' 中显示一个结果，而在同一页面底部的 div 'two' 中显示另一个结果。我怎样才能做到这一点？

我正在使用这个 jScript 函数将变量从下拉列表传递到 php 页面

```
function getRunners() {
var awayRunner = document.getElementById('awayRunner').value;
var homeRunner = document.getElementById('homeRunner').value;

if(window.XMLHttpRequest) {
    xmlhttp13 = new XMLHttpRequest();

}
else {
    xmlhttp13 = new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp13.onreadystatechange = function() {
    if(xmlhttp13.readyState == 4 && xmlhttp13.status == 200) {
        document.getElementById("one").innerHTML = xmlhttp13.responseText;
    }
}
xmlhttp13.open("GET", "/Modules/process.php?awayRunner=" + awayRunner + "&homeRunner=" + homeRunner, true);
xmlhttp13.send(); 
```

}

在php页面中，我有这样的东西

```
function getResults($homeRunner,$awayRunner){
  process info...
  echo $homeResult;
  echo $awayResult;
}

getResults($homeRunner,$awayRunner);
?> 
```

我理解上面的 jScript 代码只返回 div "one"。我如何将 div“二”合并到其中？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T22:27:37.353

分解响应。我个人会使用 JSON，但你可以使用更原始的东西。

```
function getResults($homeRunner,$awayRunner) {
    // do stuff
    echo $homeResult."---SEPARATOR---".$awayResult;
} 
```

然后在你的 JavaScript 中：

```
xmlhttp13.onreadystatechange = function() {
    // if readyState and status correct
    var parts = xmlhttp13.responseText.split("---SEPARATOR---");
    // now put parts[0] in one div and parts[1] in the other
} 
```

只要您的分隔符是没有出现在结果中的任何内容，它就可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T22:30:21.890

最好的方法是拥有一个包含 div 1 和 2 的 div，并让您的 php 页面返回：

```
<div id="1">
Div 1 content
</div>
<div id="2">
Div 2 content
</div> 
```

你的大 div 应该是这样的：

```
<div id="encompassing">
<div id="1">
Div 1
</div id="2">
Div 2
</div>

</div> 
```

而不是设置 div 1 的 innerHTML 值，而是将其设置为 div 包含。

```
document.getElementById("encompassing").innerHTML = xmlhttp13.responseText; 
```

# c++ - 静态嵌套布尔值会帮助我禁用对某些类型的调用还是有更清洁的方法？

> ID：12272162
> 
> 赞同：1
> 
> 时间：2012-09-04T22:23:40.133
> 
> 标签：c++, templates, boost

我有一个模板类，说：

```
template<class T>
class someClient
{
void someCallbackA() {foo_->onA();}
void someCallbackB() {foo_->onB();}

private:
T* foo_;
}; 
```

我可以用一堆支持`onA`and`onB`接口的不同类型 T 来实例化它。我碰巧有一种情况，`T`我使用的几种不同类型中的两种需要控制一个特定的行为，`someClient`所以我需要`doBar()`为这两种类型添加一些功能（调用它们`Edge1`和`Edge2`）。`someClient`然后我想要调用一部分代码，`foo_->doBar()`但当类型没有时不会中断`foo_`。有没有一种方法可以`boost::enable_if`让 a `someClient::doBar()`which 只调用这两种类型，但不存在，或者`foo_->doBar()`如果类型不存在，则扩展为空？`Edge1``Edge2`

我的思路是：

```
template <class T, enable_if<mpl_or<is_same<T,Edge1>, is_same<T,Edge2> > >
someClient<T>::doBar() {foo_->doBar();} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T22:43:01.833

如果您只是不*调用*没有意义的成员函数，则根本不需要任何特殊技巧。模板成员函数仅在需要时才被特化（除非您添加显式特化）。所以下面的代码工作正常：

```
template <typename T> struct Foo
{
    void do_foo() { p->foo(); }
    void do_bar() { p->bar(); }
    T * p;
};

struct A { void foo() {} };

int main()
{
    A a;
    Foo<A> x = { &a };
    x.do_foo();
} 
```

`Foo<A>::do_bar`不会编译的事实不是问题，因为成员函数永远不会被实例化。并且`p->bar`不是编译器错误，因为`p`具有依赖类型，因此仅在第二个查找阶段（永远不会发生）解析该行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T23:16:39.743

我认为这可以满足您的要求。我使用 C++11`<type_traits>`而不是 boost：

```
struct Edge {
    void doBar() { std::cout << "did Bar."; }
};

template<typename T>
class someClient
{
public:

    template<typename U = T>
    typename
    std::enable_if<std::is_same<U, Edge>::value, void>::type
    doBar() { foo_->doBar(); }

    template<typename U = T>
    void doBar( typename std::enable_if<!std::is_same<U, Edge>::value, void>::type* = 0 )
    { /* do nothing */ }

private:
    T* foo_;
};

int main()
{
    someClient<int> i;
    someClient<Edge> e;
    i.doBar();
    e.doBar();  // outputs "did Bar."
} 
```

`doBar()`需要模板本身才能工作，这里解释：[std::enable_if 有条件地编译成员函数](https://stackoverflow.com/questions/6972368/stdenable-if-to-conditionally-compile-a-member-function)

# ssl - Issuer details are not valid. Issuer details should be registered in advance

> ID：12272171
> 
> 赞同：0
> 
> 时间：2012-09-04T22:24:42.667
> 
> 标签：ssl, wso2, saml-2.0

I am trying to run a test of the SAML2 SSO using WSO2 Identity Server 4.0.0 M7 but am not successful.

I tried to use the 3.2.3 binary but ran into the bug about long hostnames and the identity.xml file (http://stackoverflow.com/questions/9600392/unable-to-configure-wso2-identity-server-for-openid).

These are the examples I'm using: [http://sureshatt.blogspot.com/2012/08/saml20-sso-with-wso2-identity-server.html](http://sureshatt.blogspot.com/2012/08/saml20-sso-with-wso2-identity-server.html) http://wso2.org/library/articles/2010/07/saml2-web-browser-based-sso-wso2-identity-server

I've stood up a new Tomcat7 server and configured it for HTTPS, which works cleanly in the browser. The certs are signed by our trusted enterprise CA and both the private key and chain certs are installed.

Same for the WSO2-IS host which has a new wso2carbon.jks with the private key signed by the same CA. I've exported the host cert from wso2carbon.jks and imported same into the client-truststore.jks. The trusted CA-signed certs are also in client-truststore.jks (at this point just to be sure). They are also in wso2carbon.jks (used to trust the CA reply).

I've changed the HostName and MgtHostName in carbon.xml to match the CN in the private key; the Carbon console comes up cleanly with no SSL issues and I can log in using the 'admin' user with no problem. From there I've updated the SSO configuration using the above example links as guides. That works with no errors.

When I go to each site (e.g., saml2.demo, avis.com, etc.) they redirect perfectly to IS to authenticate. However when I log in I get the error in the log "Issuer details are not valid. Issuer details should be registered in advance". And then I'm stuck.

What have I missed?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T04:02:57.377

您是否完成了主题 2 配置 WSO2 身份服务器的第 5 步？请检查您注册为颁发者的值是否与 SAML 身份验证请求消息中的值相同。

# c++ - How would you declare a large number in GMP?

> ID：12272174
> 
> 赞同：1
> 
> 时间：2012-09-04T22:25:13.173
> 
> 标签：c++, gmp

How would you declare a large number that is 128 bits in GMP with the `#include <gmp.h>`? This number is an integer.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T22:28:41.063

用于`mpz_set_str`初始化为 ascii 值。

```
mpz_t N;
mpz_init(N);
mpz_set_str(N, "55555555555555555555555555555"); 
```

# javascript - add multiple objects to javascript array - from one single DataBase string value - WITHOUT using loop

> ID：12272179
> 
> 赞同：0
> 
> 时间：2012-09-04T22:25:34.177
> 
> 标签：javascript, arrays

Thanks for taking a look : )

I know that I can add multiple objects at once in a javascript array like this:

```
<script>

    var myCarsArray = ["Saab","Volvo","BMW"];

    alert("The second element in my array = "+myCarsArray[1]);

</script> 
```

This alerts 'The second element in my array = Volvo'.

I want to simply store the array values in the database as a string - so in the database would be a field called 'My_Cars_Array_Database_String_Value' and I will place my array values there the exact same way I would place them in the array with javascript - so the string would look like this:

"Saab","Volvo","BMW"

Now I get the string value using MySQL and echo the value using PHP, like this

```
<script>

    var myCarsArray = [<?php echo $My_Cars_Array_Database_String_Value; ?>];

    alert("The second element in my array = "+myCarsArray[1]);

</script> 
```

This alerts 'The second element in my array = S' !? It's treating the whole string as an array.

So the only way I could get this to work was to use 'eval' this way :

```
<script>

   var myCarsArray = eval("["+<?php echo $My_Cars_Array_Database_String_Value; ?>+"]");

   alert("The second element in my array = "+myCarsArray[1]);

</script> 
```

This alerts correctly 'The second element in my array = Volvo'.

* * *

My question is: How do I save the string to the database so that I can just insert it into the javascript array as is, using:

```
myCarsArray = [<?php echo $My_Cars_Array_Database_String_Value; ?>]; 
```

?

WITHOUT using a loop of any kind - I understand how to achieve this with a loop - I don't want to use a loop. Or is the 'eval' method the only way?

* * *

Clarification:

The question on this post is how to save javascript usable array values - as a string to MySQL - that can later be easily inserted into an array via -

```
myCarsArray = [<?php echo $My_Cars_Array_Database_String_Value; ?>]; 
```

method.

AND Can this be done without using loops or the 'eval' statement?

Thanks in advance - I look forward to your replies.

Regards, Ken

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:01:01.373

你不想用循环使事情复杂化吗？它们是基本且有效的流量控制工具，您已经通过尝试使用 eval 技巧使自己变得多么复杂？

eval 是邪恶的，避免它。您正在尝试从服务器评估 JavaScript，但您不知道它会做什么。

明确说明您要做什么，这不仅会使将来的维护更容易，而且如果其他人继承了您的工作，他们就不会想追捕您并对您做坏事以使他们的工作成为噩梦.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T22:55:48.047

我的 PHP 语法有点生疏，但你应该可以这样说：

```
<php
  <script>
  echo "var array = " . json_encode($My_Cars_Array_Database_String_Value) . ";";
  </script>
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T22:57:07.383

```
MultiDimeArray = { SomeOtherValues:"SomeValue", 
                   myCarsArray:"<?php echo $My_Cars_Array_Database_String_Value; ?>" 
                 }; 
```

假设它应该是

```
MultiDimeArray = { SomeOtherValues:"SomeValue", 
                   myCarsArray:[<?php echo $My_Cars_Array_Database_String_Value; ?>] 
                 }; 
```

在您的输出中： myCarsArray: **"** 'Saab','Volvo",'BMW' **"**而不是 myCarsArray: **[** 'Saab','Volvo",'BMW' **]**

# java - Lotus Domino 8.5.2 Java 代理，将元数据写入提取的附件？

> ID：12272181
> 
> 赞同：0
> 
> 时间：2012-09-04T22:25:43.453
> 
> 标签：java, lotus-domino, lotus

我正在使用 Lotus Domino 服务器 8.5.2。使用 Java 调度代理，我可以将几个 Lotus Domino 文档的附件提取到文件系统中（win 32）。想法是提取后我需要向文件添加一些元数据并将文件上传到另一个系统。

有人知道，或者可以给我一些提示（最好使用 Java）我如何将一些元数据写入提取的文件？我需要添加一些关键字，更改作者，等等。我了解[Lotus Domino 8.5.2 支持 Java 6](https://www-304.ibm.com/support/docview.wss?uid=swg21188789)

谢谢你！

亚历克斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T22:09:41.197

根据[这个答案](https://stackoverflow.com/questions/5159620/how-to-get-an-user-name-from-a-file-metadata-permissions-java)，Java 7 具有操作 Windows 元数据的本机能力，但 Java 6 没有。

它确实说您可以使用 Java Native Access (JNA) 来调用本地 DLL，这意味着您应该能够使用[dsofile.dll](http://support.microsoft.com/?id=224351)来操作元数据。[此处](http://www.scriptol.com/programming/jna.php)使用 JNA 从 msvcrt.dll 访问“puts”函数的示例（找不到任何特定于 dsofile.dll 的示例）：

界面

```
package CInterface; 

import com.sun.jna.Library; 

public interface CInterface extends Library 
{ 
      public int puts(String str);
} 
```

示例类

```
// JNA Demo. Scriptol.com
package CInterface; 
import com.sun.jna.Library; 
import com.sun.jna.Native;
import com.sun.jna.Platform;

public class hello 
{ 
  public static void main(String[] args) 
  { 
    String mytext = "Hello World!";  
     if (args.length != 1) 
    { 
      System.err.println("You can enter your own text between quotes..."); 
      System.err.println("Syntax: java -jar /jna/dist/demo.jar \"myowntext\"");
    }
    else
       mytext = args[0]; 

    // Library is c for unix and msvcrt for windows
    String libName = "c"; 
    if (System.getProperty("os.name").contains("Windows")) 
    { 
      libName = "msvcrt";  
    } 

    // Loading dynamically the library
    CInterface demo = (CInterface) Native.loadLibrary(libName, CInterface.class); 
    demo.puts(mytext);
  } 
} 
```

# ios - 将多张照片导入保存的相册

> ID：12272184
> 
> 赞同：1
> 
> 时间：2012-09-04T22:26:01.437
> 
> 标签：ios, insert, uiimagepickercontroller, nsdata, bulk

我正在尝试将多张照片（在应用程序的沙箱中）导入相机胶卷（保存的相册）。

我在后台执行一个选择器，从文件路径中读取数据，然后使用 UIImageWriteToSavedPhotosAlbum 完成操作。我现在正在使用 Instruments 对大图像进行测试，但我看不到任何显着的内存增加（最大活字节约为 8MB），但如果我尝试导入约 20 个图像，应用程序仍然会崩溃。它给了我一个内存警告，但我无法找出问题所在。

我还在从磁盘读取文件（并解密）的代码周围使用了@autoreleasepool。

在我的代码的另一部分中，我使用几乎相同的过程（加密数据）从 ALAssetsLibrary 导入图像，并且可以很好地处理 200 多个图像。没有内存警告，没有崩溃。

关于如何将图像批量写入保存的照片库的任何想法？

PS：我的导入方法中基本上有这个：

```
UIImageWriteToSavedPhotosAlbum(decryptedImage, self, @selector(image:didFinishSavingWithError:contextInfo:), nil); 
```

然后在 didFinishSaving 回调中，我再次调用导入方法，该方法通过要导入的文件路径数组。

它适用于较小的文件，但较大的文件会导致崩溃。

谢谢！

编辑：刚刚尝试加载大图像，`[UIImage imageNamed:]`应用程序仍然崩溃。所以我猜这是 UIImageWriteToSavedPhotosAlbum 方法的问题？我应该如何导入更大的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T08:16:42.207

我最终使用了`ALAssetsLibrary`'s 方法`writeImageDataToSavedPhotosAlbum:metadata:completionBlock:`，它完美无缺！没有内存警告和/或崩溃。

# perl - perl expect running 30 commands remotely

> ID：12272191
> 
> 赞同：1
> 
> 时间：2012-09-04T22:26:47.143
> 
> 标签：perl, expect

following loop does not produce the output IF I do not have the last exp->expect(5) line (kind of sleep). I guess this is because the loop is running 'too fast' for the 'sent' command to finish. How can i make sure the next command is run only when previous one is finished? I am collecting output in log file.

any advice, pl.

ty.

```
use Expect;
...
...
foreach my $cmd (@cmd_array){
$exp->expect(3,
    [ qr/($|#)/ => sub { shift->send("$cmd");}]
       );
exp->expect(5);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T01:12:38.380

也许你需要使用`exp_continue`like-

```
use Expect;
...
...
foreach my $cmd (@cmd_array){
$exp->expect(3,
    [ qr/($|#)/ => sub { shift->send("$cmd\n");
                         exp_continue;}]
       );
} 
```

另外，我认为里面的语句`sub{...}`只有在模式匹配时才会运行`qr/($|#)/`。另外，我认为在您输入输入或命令后，您通常会按回车键来执行命令，因此`$cmd\n`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:58:27.463

你有什么理由不能让 Net::OpenSSH 为你做这件事吗？

从其文档中，您可以使用 capture() / capture2() 方法（取决于您是否需要从进程中仅捕获 STDOUT 或 STDOUT 和 STDERR）。

例如：

```
for my $command (@commands) {
    my $result = $ssh->capture($command);
} 
```

我相信这应该有效，不是吗？

（我刚刚用一个非常简单的脚本对此进行了测试，它对我来说效果很好。）

# c# - Command Binding with WPF

> ID：12272195
> 
> 赞同：0
> 
> 时间：2012-09-04T22:26:56.283
> 
> 标签：c#, wpf

Im a complete Noob to this so im having a really hard time wrapping my head around how this works.

Basically I have a Main Page that im using, and within the XAML i have created a menu

What I have is a Document (DummyDoc) that contains a TextBox within it that i am trying to send the find command to.

Ive tried this every which way and googled it but i just cant seem to get it to work for me and could use some help with a push in the right direction

Main form

```
 <Window>

        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:i="clr-namespace:DMC_Robot_Editor"
        xmlns:local="clr-namespace:DMC_Robot_Editor.GUI" 

    <Menu>
    <MenuItem Header="_Edit">
     <MenuItem Header="_Cut"/>
    </MenuItem>
    <MenuItem/>
    <Grid>
     <local:DummyDoc x:Name="_Editor"/>
    </Grid>
    </Window> 
```

That is the main form that i am using. then i have my second document "DummyDoc"

```
<ad:DocumentContent x:Name="document" x:Class="DMC_Robot_Editor.Controls.DummyDoc"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ad="clr-namespace:AvalonDock;assembly=AvalonDock"
        xmlns:local="clr-namespace:DMC_Robot_Editor.Controls" 
        xmlns:ed="schemas.microsoft.com/expression/2010/drawing"
        Title="Window1" Height="300" Width="300"
        IsVisibleChanged="Is_VisibleChanged"  PropertyChanged="document_PropertyChanged">
    <Grid>

        <Menu >
            <MenuItem Header="_File">
                <MenuItem Header="was here"/>
            </MenuItem>

        </Menu>
        <local:Editor x:Name="source" IsVisibleChanged="Is_VisibleChanged" TextChanged="TextChanged" UpdateFunctions="raiseupdated" />
        <local:Editor x:Name="data" Visibility="Hidden"  IsVisibleChanged="Is_VisibleChanged" TextChanged="TextChanged"      UpdateFunctions="raiseupdated"/>
    </Grid>
    </ad:DocumentContent> 
```

DummyDoc is a window that has an Inherited Editor in it.

```
<avalonedit:TextEditor
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:avalonedit="http://icsharpcode.net/sharpdevelop/avalonedit" 
             x:Class="DMC_Robot_Editor.Controls.Editor" 
             x:Name="editor"
             mc:Ignorable="d" 
             d:DesignHeight="300"
    d:DesignWidth="300" 

    TextChanged="Text_Changed"
    IsVisibleChanged="raiseUpdate"
    MouseMove="Mouse_Move"
    MouseHover="Mouse_Hover"

    MouseHoverStopped="Mouse_Hover_Stopped" KeyUp="editor_KeyUp">

    </avalonedit:TextEditor> 
```

My Ultimate Question is how do i use WPF Binding to make the "Cut" Action from the main form initiate the cut() method of the textbox?

I wrote textbox in it because in code behind, im doing the following

```
 partial class DummyDoc:DocumentContent
    {
    public Editor TextBox{get;set;}
     private void Is_VisibleChanged(object sender, DependencyPropertyChangedEventArgs e)
        {
            if (sender is Editor)
                this.TextBox = sender as Editor;

            if ((VisibilityChanged != null) && (TextBox != null))
                raiseupdated(TextBox, new FunctionEventArgs(this.TextBox.Text));
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:19:27.777

`ElementName`通过查找使用您指定的字符串标识符的元素来查找元素。

你把`x:Name="local:TextBox"`你的文本框标签？

我认为您已经通过使用“local：TextBox”来解决问题。

对于初学者......这是用于引用命名空间中元素类型的语法......它的意思是“`TextBox`本地命名空间中的类型”......它无效（或者说不一样） ) 在您使用的上下文中......您应该只分配一个“标识符”字符串。

所以....

```
CommandTarget="{Binding ElementName=textboxFind}" 
```

...

```
<TextBox x:Name="textboxFind"  ..... /> 
```

会更合适。

* * *

更新（鉴于问题正在澄清）：

您应该在您的菜单项中指定一个“命令”，当您选择该菜单项时该命令将被提升。

然后，如果 TextEditor 具有焦点（......因此是命令目标......）......那么它应该看到 Cut 命令。

我希望 Avalon 编辑器能够处理众所周知的“应用程序命令”，即剪切、复制、粘贴等。

```
<MenuItem Header="_Cut" Command="ApplicationCommands.Cut"> 
```

# django - 与 django 应用程序并行托管 wordpress 博客

> ID：12272199
> 
> 赞同：0
> 
> 时间：2012-09-04T22:27:11.930
> 
> 标签：django, wordpress, apache

我想在我的域的子文件夹中托管一个博客，该子文件夹由 django 应用程序覆盖。我已经走了大部分路，但我需要一些帮助才能越过终点线。

目前，如果我去`domain.com`， django 应用程序将正确提供。如果我去`domain.com/blog/`，则博客服务正确。但是，如果我转到`domain.com/blog`（注意缺少的斜杠），urlconf 会返回 URL not found 错误。

我尝试了几件事，包括：

*   在我的 Apache 配置中重新排序`Alias`、`Directory`和`WSGIScriptAlias`语句
*   让 django urlconf 捕获`domain.com/blog`条件并重定向到`domain.com/blog/`（可能会导致无限循环的重定向）

我的下一步是什么？

这是我的 Apache conf 的相关部分：

```
Alias /blog/ /var/www/blog/

<Directory /var/www/blog/>
AllowOverride All
Order deny,allow
Allow from all
</Directory> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:56:12.327

我已经好几年没用过 Apache 了，但尝试使用别名 /blog 而不是 /blog/。目前的问题是 Apache 没有捕捉到它，所以它被传递给了 Django。如果这不起作用，您还可以尝试在 Apache conf 中设置 301 重定向以重定向到斜杠版本，从而完全避免使用 Django。

# c# - 我需要一些帮助来指定在我的 XPathExpression AddSort() 方法调用中使用的排序键

> ID：12272205
> 
> 赞同：0
> 
> 时间：2012-09-04T22:27:32.610
> 
> 标签：c#, .net, xml-parsing

我的 C# .NET 应用程序根据每个节点中的时间对 XML 文档的节点进行排序时遇到问题。我认为我的问题是我不知道如何正确构造 XPathExpression 来指定要对其进行排序的项目。

XML 包含有关已运行的批处理作业的信息，包括每个作业的名称、运行状态、开始时间和结束时间。

我的 XML 文档采用以下格式：

```
<results> 
    <result>
        (Info on one job)
    </result>
</results> 
```

以下是单个作业的结果节点示例：

```
<result offset='14'>
    <field k='job_name'>
        <value h='1'><text>Y_RUNNING_3</text></value>
    </field>
    <field k='job_did_start'>
        <value><text>08-01-2012 04:00:00</text></value>
    </field>
</result> 
```

我省略了几个不相关字段的值。每个字段被命名为“field”，并具有使用属性“k”指定的字段名称。（我没有设计 XML 格式。）

在我的代码中，我成功地使用 XPathDocument 和 XPathNavigator 来加载 XML 文档而不对其进行排序。但是，我需要对字段值上的节点进行排序，并将“k”属性设置为“job_did_start”。

以下是部分代码：

```
 XPathDocument doc = new XPathDocument(strFilepath);
        XPathNavigator nav = doc.CreateNavigator();

        XPathExpression selectExpression = nav.Compile("/results/result"); // QQQ not sure about this

        // XPathExpression sortExpression = nav.Compile("//@k='job_did_start'"); 

        // selectExpression.AddSort(sortExpression, new DateTimeComparer());

        foreach (XPathNavigator item in nav.Select(selectExpression))
        {
            item.MoveToFirstChild();

            do
            {

                **I’ve omitted the code here because it works and probably is not relevant.**

            } while (item.MoveToNext());
        } 
```

我已经注释掉了设置 sortExpression 并将 sortExpression 添加到 selectExpression 的行，因为它们不起作用。

我想我需要做的就是找出在设置 sortExpression 的语句中传递给 nav.Compile() 的字符串的值*。*

顺便说一下，这是我从网上其他地方借来的 DateTimeComparer。我在 Compare() 方法中设置了一个断点，以确认对象 x 和 y 不是表示日期的字符串，但这就是它们所需要的。

```
public class DateTimeComparer : IComparer 
{ 
    public int Compare(object x, object y) 
    { 
        DateTime dt1 = DateTime.Parse(x.ToString()); 
        DateTime dt2 = DateTime.Parse(y.ToString()); 
        return dt1.CompareTo(dt2); 
    } 
} 
```

由于 'job_did_start' 值可以是一个空字符串，我可能需要在 Compare() 方法中考虑这种可能性。

**那么有人可以帮我正确设置排序键吗？**

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:50:02.557

我想到了。以下作品：

```
XPathExpression sortExpression = nav.Compile("./field[@k='job_did_start']"); 
```

# python - 如何在python中查找svn命令是否成功执行

> ID：12272217
> 
> 赞同：1
> 
> 时间：2012-09-04T22:28:21.377
> 
> 标签：python, svn, exit-code

我正在以以下方式（例如）从我的 python 脚本中执行 svn 命令（假设我不想使用 pysvn）：

```
cmd = 'svn update http://myserver/myrepo'
p = subprocess.Popen(cmd, shell=True, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
    output, stderr = p.communicate()      
    status = p.returncode
    if status != 0: 
        logging.error('A fatal has error occurred while executing command: ' + cmd)
        exit(-1) 
```

假设服务器上不存在 myrepo。在这种情况下，SVN 将默默地产生如下输出：

```
Skipped http://myserver/myrepo 
```

并且状态变量的值为“0”。有没有一种方法可以通过返回代码来检查是否跳过了 SVN 更新，或者实际上是否成功更新了 repo？

目前，我正在使用以下解决方案，但不确定它是否是一个优雅的解决方案：

```
if 'Skipped' in output:
    logging.error('SVN update failed!')
    exit(-1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:39:29.733

优雅与否，如果它有效，它就有效！但是我认为你应该研究 pysvn，它可能会做你需要的事情。但是它似乎使用的是 svn 1.6 而不是 1.7： http: [//pysvn.tigris.org/docs/pysvn_prog_guide.html](http://pysvn.tigris.org/docs/pysvn_prog_guide.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T07:22:19.797

所以看起来这将是一个很好的解决方案，考虑到大卫的建议：

```
cmd = 'svn update http://myserver/myrepo'
p = subprocess.Popen(cmd, shell=True, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
output, stderr = p.communicate()      
status = p.returncode
if output.strip().startswith('Skipped'):
    logging.error('A fatal has error occurred while executing command: ' + cmd)
    exit(-1) 
```

# c - 如何加快这个 mex 代码？

> ID：12272218
> 
> 赞同：1
> 
> 时间：2012-09-04T22:28:33.317
> 
> 标签：c, performance, matlab, optimization, mex

我正在用 mex 重新编程一段 MATLAB 代码（使用 C）。到目前为止，我的 C 版本的 MATLAB 代码的速度大约是 MATLAB 代码的两倍。现在我有三个问题，都与下面的代码有关：

1.  我怎样才能加快这段代码的速度？
2.  你看到这段代码有什么问题吗？我问这个是因为我不太了解 mex 并且我也不是 C 大师 ;-) ...我知道代码中应该有一些检查（例如，如果在使用时仍有堆空间`realloc`，但为了简单起见，我暂时离开了这个）
3.  是否有可能，MATLAB 优化得如此之好，以至于我真的无法在 C 中获得比两倍快的代码......？

代码应该或多或少独立于平台（Win、Linux、Unix、Mac、不同的硬件），所以我不想使用汇编程序或特定的线性代数库。所以这就是我自己编程员工的原因......

```
#include <mex.h>
#include <math.h>
#include <matrix.h>

void mexFunction(
    int nlhs, mxArray *plhs[],
    int nrhs, const mxArray *prhs[])
{
    double epsilon = ((double)(mxGetScalar(prhs[0])));
    int strengthDim = ((int)(mxGetScalar(prhs[1])));
    int lenPartMat = ((int)(mxGetScalar(prhs[2])));
    int numParts = ((int)(mxGetScalar(prhs[3])));
    double *partMat = mxGetPr(prhs[4]);
    const mxArray* verletListCells = prhs[5];
    mxArray *verletList;

    double *pseSum = (double *) malloc(numParts * sizeof(double));
    for(int i = 0; i < numParts; i++) pseSum[i] = 0.0;

    float *tempVar = NULL;

    for(int i = 0; i < numParts; i++)
    {
        verletList = mxGetCell(verletListCells,i);
        int numberVerlet = mxGetM(verletList);

        tempVar = (float *) realloc(tempVar, numberVerlet * sizeof(float) * 2);

        for(int a = 0; a < numberVerlet; a++)
        {
            tempVar[a*2] = partMat[((int) (*(mxGetPr(verletList) + a))) - 1] - partMat[i];
            tempVar[a*2 + 1] = partMat[((int) (*(mxGetPr(verletList) + a))) - 1 + lenPartMat] - partMat[i + lenPartMat];

            tempVar[a*2] = pow(tempVar[a*2],2);
            tempVar[a*2 + 1] = pow(tempVar[a*2 + 1],2);

            tempVar[a*2] = tempVar[a*2] + tempVar[a*2 + 1];
            tempVar[a*2] = sqrt(tempVar[a*2]);

            tempVar[a*2] = 4.0/(pow(epsilon,2) * M_PI) * exp(-(pow((tempVar[a*2]/epsilon),2)));
            pseSum[i] = pseSum[i] + ((partMat[((int) (*(mxGetPr(verletList) + a))) - 1 + 2*lenPartMat] - partMat[i + (2 * lenPartMat)]) * tempVar[a*2]);
        }

    }

    plhs[0] = mxCreateDoubleMatrix(numParts,1,mxREAL);
    for(int a = 0; a < numParts; a++)
    {
        *(mxGetPr(plhs[0]) + a) = pseSum[a];
    }

    free(tempVar);
    free(pseSum);
} 
```

所以这是改进版，比MATLAB版快12倍左右。转换的事情仍然占用了很多时间，但我暂时放弃了，因为我必须为此在 MATLAB 中进行一些更改。所以首先关注剩下的 C 代码。你在下面的代码中看到了更多的潜力吗？

```
#include <mex.h>
#include <math.h>
#include <matrix.h>

void mexFunction(
    int nlhs, mxArray *plhs[],
    int nrhs, const mxArray *prhs[])
{
    double epsilon = ((double)(mxGetScalar(prhs[0])));
    int strengthDim = ((int)(mxGetScalar(prhs[1])));
    int lenPartMat = ((int)(mxGetScalar(prhs[2])));
    double *partMat = mxGetPr(prhs[3]);
    const mxArray* verletListCells = prhs[4];
    int numParts = mxGetM(verletListCells);
    mxArray *verletList;

    plhs[0] = mxCreateDoubleMatrix(numParts,1,mxREAL);
    double *pseSum = mxGetPr(plhs[0]);

    double epsilonSquared = epsilon*epsilon;

    double preConst = 4.0/((epsilonSquared) * M_PI);

    int numberVerlet = 0;

    double tempVar[2];

    for(int i = 0; i < numParts; i++)
    {
        verletList = mxGetCell(verletListCells,i);
        double *verletListPtr = mxGetPr(verletList);
        numberVerlet = mxGetM(verletList);

        for(int a = 0; a < numberVerlet; a++)
        {
            int adress = ((int) (*(verletListPtr + a))) - 1;

            tempVar[0] = partMat[adress] - partMat[i];
            tempVar[1] = partMat[adress + lenPartMat] - partMat[i + lenPartMat];

            tempVar[0] = tempVar[0]*tempVar[0] + tempVar[1]*tempVar[1];

            tempVar[0] = preConst * exp(-(tempVar[0]/epsilonSquared));
            pseSum[i] += ((partMat[adress + 2*lenPartMat] - partMat[i + (2*lenPartMat)]* tempVar[0]);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T07:28:51.500

*   您无需将 pseSum 分配给本地使用，然后再将数据复制到输出。您可以简单地分配一个 MATLAB 对象并获取指向内存的指针：

    ```
    plhs[0] = mxCreateDoubleMatrix(numParts,1,mxREAL);
    pseSum  = mxGetPr(plhs[0]); 
    ```

因此，您不必将 pseSum 初始化为 0，因为 MATLAB 已经在 mxCreateDoubleMatrix 中完成了它。

*   从内部循环中删除所有 mxGetPr 并将它们分配给之前的变量。

*   不要将双精度数转换为整数，而是考虑在 MATLAB 中使用 int32 或 uint32 数组。将 double 转换为 int 是昂贵的。内部循环计算看起来像

    ```
    tempVar[a*2] = partMat[somevar[a] - 1] - partMat[i]; 
    ```

    您在代码中使用此类结构

    ```
    ((int) (*(mxGetPr(verletList) + a))) 
    ```

    您这样做是因为 varletList 是一个“双”数组（在 MATLAB 中默认就是这种情况），它保存整数值。相反，您应该使用整数数组。在 MATLAB 中调用 mex 文件类型之前：

    ```
    varletList = int32(varletList); 
    ```

    那么你就不需要上面的类型转换为 int 了。你会简单地写

    ```
    ((int*)mxGetData(verletList))[a] 
    ```

    或者更好的是，更早分配

    ```
    somevar = (int*)mxGetData(verletList); 
    ```

    然后写

    ```
    somevar[a] 
    ```

*   在所有循环之前预先计算 4.0/(pow(epsilon,2) * M_PI) ！这是一个昂贵的常数。

*   pow((tempVar[a*2]/epsilon),2)) 就是 tempVar[a*2]^2/epsilon^2。您刚刚计算 sqrt(tempVar[a*2]) 。你为什么现在把它摆平？

*   一般不要使用 pow(x, 2)。只需写 x*x

*   我会在参数上添加一些完整性检查，特别是如果您需要整数。要么使用 MATLABs int32/uint32 类型，要么检查你得到的实际上是一个整数。

**在新代码中**编辑****

 ***   在循环之前计算 -1/epsilonSquared 并计算 exp(minvepssq*tempVar[0])。请注意，结果可能略有不同。取决于你需要什么，但如果你不关心操作的确切顺序，那就去做吧。

*   定义一个寄存器变量 preSum_r 并使用它对内部循环中的结果求和。在循环之后将其分配给 preSum[i]。如果您想要更多乐趣，可以使用 SSE 流式存储（_mm_stream_pd 编译器内在）将结果写入内存。

*   确实将 double 删除为 int cast

*   很可能不相关，但尝试将 tempVar[0/1] 更改为正常变量。无关紧要，因为编译器应该为您执行此操作。但同样，这里不需要数组。

*   将外部循环与 OpenMP 并行化。微不足道（至少是最简单的版本，没有考虑 NUMA 架构的数据布局），因为迭代之间没有依赖关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T00:46:27.820

您能否提前估计最大大小是多少，`tempVar`并在循环之前为其分配内存而不是使用 realloc？重新分配内存是一项耗时的操作，如果你的内存`numParts`很大，这可能会产生巨大的影响。看看[这个问题](https://stackoverflow.com/questions/5471510/is-realloc-a-bad-practice)。**

# ruby - ruby 从查询结果创建数组

> ID：12272219
> 
> 赞同：0
> 
> 时间：2012-09-04T22:28:37.480
> 
> 标签：ruby

从查询结果游标创建数组的最佳方法是什么？

```
results = @db.query("SELECT * FROM mytable") 
```

我想将 results.each 转换为一个数组并将其存储回结果中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:37:14.410

您没有提供太多上下文（您正在使用哪个 db gem 等）。

但是，我可以想到几种方法：

```
reuslts.to_a # might not work (depends on how you're accessing the db)

a = []
results.each { |r| a << r } # will definitely work assuming `each` is defined 
```

请记住，该`#query`方法可能出于充分的理由返回生成器。将结果转换为数组将是毫无意义的内存消耗（并且耗时）。使用`#each`绝对是可取的，因为它会更有效。

# mysql - MySQL 在触发器中正确使用 From_Unixtime

> ID：12272221
> 
> 赞同：0
> 
> 时间：2012-09-04T22:28:43.753
> 
> 标签：mysql, triggers

我有以下触发器，它在表 A 更新时将记录插入表 B。这很好用，但是**TableA_date**是 unix 时间格式，我想在触发器将记录插入表 B 时对其进行转换。

```
DELIMITER $$
CREATE TRIGGER MyTrigger
AFTER INSERT
ON TableA
FOR EACH ROW 
BEGIN
    INSERT INTO TableB SET 
    TableB_id = NEW.TableA_id, 
    TableB_date = FROM_UNIXTIME(NEW.TableA_date, '%d/%m/%y %r'),
    TableB_comment = NEW.TableA_comment;
END $$
DELIMITER ; 
```

在我的结果中，我得到的转换日期不是“01/01/70 03:00:05 AM”，而是“5”——我知道格式字符串是正确的，因为我可以在选择语句中使用它。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:32:05.817

You are working too hard. Just leave out the format string entirely. Dates are stored as dates, not a strings.

In fact, don't even use the conversion at all! Just directly assign the date column, and MySQL will do any conversion it needs.

I'm assuming that TableA_date is stored using the `timestamp` datatype, and that TableB_date is `datetime`. (Although you may want `timestamp` for that one too.)

If you are using other datatypes like int, or char, then fix it. That's not the correct way to structure a database.

* * *

Just to answer your actual question (instead of telling you the correct way to do it) the date format you want is `yyyy-mm-dd hh:mm:ss` not what you have.

# node.js - 测试在节点中使用 mocha/supertest 重定向的请求

> ID：12272228
> 
> 赞同：39
> 
> 时间：2012-09-04T22:29:30.663
> 
> 标签：node.js, express, mocha.js, supertest

我似乎无法让以下集成测试通过使用[mocha](http://visionmedia.github.com/mocha/)、[supertest](https://github.com/visionmedia/supertest)和[should](https://github.com/visionmedia/should.js/)（和 coffeescript）的快速项目。

* * *

**考试**

```
should  = require('should')
request = require('supertest')
app     = require('../../app')

describe 'authentication', ->
  describe 'POST /sessions', ->
    describe 'success', (done) ->
      it 'displays a flash', (done) ->
        request(app)
          .post('/sessions')
          .type('form')
          .field('user', 'username')
          .field('password', 'password')
          .end (err, res) ->
            res.text.should.include('logged in')
            done() 
```

* * *

**相关应用代码**

```
app.post '/sessions', (req, res) ->
  req.flash 'info', "You are now logged in as #{req.body.user}"
  res.redirect '/login' 
```

* * *

**失败**

```
1) authentication POST /sessions success displays a flash:
   AssertionError: expected 'Moved Temporarily. Redirecting to //127.0.0.1:3456/login' to include 'logged in' 
```

* * *

显然，应用程序代码没有做任何有用的事情。我只是想通过考试。

将期望 ( `res.text.should.include('logged in')`) 放在 end 函数之外和函数内部会`expect`产生相同的结果。我还尝试了函数调用的变体，例如删除`.type('form')`调用，并使用`.send(user: 'username', password: 'password')`而不是两个`.field()`调用。

如果它意味着什么，当应用程序在本地运行时向应用程序发送一个 curl POST 请求会产生相同的输出 ( `Moved Temporarily. Redirecting to //127.0.0.1:3456/login`)

我有一种感觉，这是一个微不足道的错误。可能是我在应用程序代码或测试代码中忘记的东西。

有什么建议么？

**编辑 1：**还值得注意的是，在浏览器中单击提交按钮时，我得到了预期的结果（一条消息）。

**编辑 2：**进一步调查显示响应正文中*任何*重定向结果的输出。`Moved Temporarily. Redirecting to ...`这让我想知道我在 app.js 中导出应用程序的方式是否存在问题。

```
var express = require('express')
var app = express();

module.exports = app; 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-11-11T13:50:49.580

对此有内置断言`supertest`：

```
should  = require('should')
request = require('supertest')
app     = require('../../app')

describe 'authentication', ->
  describe 'POST /sessions', ->
    describe 'success', ->
      it 'redirects to the right path', (done) ->
        request(app)
          .post('/sessions')
          .send(user: 'username', password: 'password')
          .expect(302)
          .expect('Location', '/home')
          .end(done) 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-09-06T01:34:45.513

对于遇到此页面的任何人来说，这个问题的答案都非常简单。`Moved Temporarily.`响应正文是从 supertest 返回的内容。有关更多详细信息，请参阅[问题](https://github.com/visionmedia/supertest/issues/21)。

总而言之，我最终做了这样的事情。

```
should  = require('should')
request = require('supertest')
app     = require('../../app')

describe 'authentication', ->
  describe 'POST /sessions', ->
    describe 'success', ->
      it 'redirects to the right path', (done) ->
        request(app)
          .post('/sessions')
          .send(user: 'username', password: 'password')
          .end (err, res) ->
            res.header['location'].should.include('/home')
            done() 
```

只需检查响应标头`location`是否符合您的预期。应使用另一种方法完成对 flash 消息和查看特定集成测试的测试。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-12-23T04:38:25.337

```
describe 'authentication', ->
  describe 'POST /sessions', ->
    describe 'success', (done) ->
      it 'displays a flash', (done) ->
        request(app)
          .post('/sessions')
          .type('form')
          .field('user', 'username')
          .field('password', 'password')
          .redirects(1)
          .end (err, res) ->
            res.text.should.include('logged in')
            done() 
```

将`redirects()`遵循重定向，因此您可以进行通常的视图测试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-25T00:49:53.830

我试图为重定向的请求编写一些集成测试，并在[这里](https://github.com/visionmedia/supertest/issues/14#issuecomment-24024540)找到了模块作者本人的一个很好的例子。

在 TJ 的例子中，他使用了链接，所以我也使用了类似的东西。

考虑这样一个场景，其中登录用户在他或她注销时被*重定向*到主页。

```
it('should log the user out', function (done) {
  request(app)
    .get('/logout')
    .end(function (err, res) {
      if (err) return done(err);
      // Logging out should have redirected you...
      request(app)
        .get('/')
        .end(function (err, res) {
          if (err) return done(err);
          res.text.should.not.include('Testing Tester');
          res.text.should.include('login');
          done();
        });
    });
}); 
```

根据您有多少重定向，您可能需要嵌套一些回调，但 TJ 的示例就足够了。

# php - PhoneGap Build API : CURL Command Line to PHP

> ID：12272232
> 
> 赞同：1
> 
> 时间：2012-09-04T22:29:52.943
> 
> 标签：php, cordova, file-upload, curl, syntax-error

I am working on PhoneGap Build API to upload file and create its apk. You can check it here [https://build.phonegap.com/docs/write_api](https://build.phonegap.com/docs/write_api)

I am facing problem in implementing curl using php. The following curl statement on command line is working fine.

$ curl -F file=@/Users/alunny/index.html -u andrew.lunny@nitobi.com -F 'data={"title":"API V1 App","package":"com.alunny.apiv1","version":"0.1.0","create_method":"file"}' [https://build.phonegap.com/api/v1/apps](https://build.phonegap.com/api/v1/apps)

I am getting errors when I try to write this code using php. I have written the following code.

```
$username = "email";
$password = "password";
$target_url = "https://build.phonegap.com/api/v1/apps";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $target_url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
curl_setopt($ch, CURLOPT_POST, TRUE);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/x-www-form-urlencoded'));
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
$post = array(
        "file"=>"@www.zip",
        "data"=>json_encode(array("title"=>"My Test App","package"=>"com.alunny.apiv1","version"=>"0.1.0","create_method"=>"file"))
    );
curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");

$result = curl_exec($ch);
curl_close ($ch); 
```

By running this code, I am getting this error "no create_method specified: file, remote_repo, or hosted_repo "

Please help me solving this issue.

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:34:52.457

试试 shell_exec() 函数：

```
$cmd = "https://build.phonegap.com/api/v1/apps";
$out = shell_exec($cmd);
$data = json_decode($out); 
```

# meteor - How to debug template in Meteor/handlebars?

> ID：12272234
> 
> 赞同：6
> 
> 时间：2012-09-04T22:30:13.497
> 
> 标签：meteor, handlebars.js

According to this [blog post](http://blog.teamtreehouse.com/handlebars-js-part-3-tips-and-tricks), I should register a helper to better debug handlebars templates, but is not working:

`ReferenceError: Handlebars is not defined`

So, how can I `{{debug}}` in Meteor/handlebars?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-21T00:15:17.840

这是我在自己的项目中用于调试的辅助函数：

```
Template.registerHelper("debug", function(optionalValue) { 
  console.log("Current Context");
  console.log("====================");
  console.log(this);

  if (optionalValue) {
    console.log("Value"); 
    console.log("===================="); 
    console.log(optionalValue); 
  } 
}); 
```

然后，您可以在模板中调用它，`{{debug}}`它会显示您当前所在的上下文。在[http://docs.meteor.com/#/full/template_registerhelper](http://docs.meteor.com/#/full/template_registerhelper)阅读更多内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-07T01:32:54.517

在 Meteor 0.4.0 中，您可以像这样注册处理程序：

```
Template.myTemplate.helpers({
  helper: function () {
    // some code here
    console.log(arguments);
  }
}); 
```

无需直接调用 Handlebars。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-05T10:18:25.937

确保您在客户端（或共享）流星代码中注册了您的助手。

```
Handlebars.registerHelper('helper', function() {
  // Do stuff
}); 
```

这应该可以`{{helper}}`在您的模板中调用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-17T22:03:27.397

为了完整起见：您也可以使用

```
Template.registerHelper('helper', helperFunc); 
```

代替`Handlebars.regsterHelper('h',f);`

这样做更好的一个小原因是，如果您决定在某个地方使用其他东西而不是 Handlebars（即[Spacebars](https://github.com/meteor/meteor/blob/devel/packages/spacebars/README.md)，流星适应的真实名称），例如[玉用于流星](https://github.com/mquandalle/meteor-jade)，那么您的应用程序将不需要那么多重构.

这确实是对已[接受答案](https://stackoverflow.com/a/13484415/2531091)的评论。期待有一天能达到 50 次。

# cmd - CMD delete files

> ID：12272235
> 
> 赞同：1
> 
> 时间：2012-09-04T22:30:20.370
> 
> 标签：cmd, delete-file

Perhaps someone can be of help; I have several files with the following naming convention:

```
fooR1.txt, fooR2.txt, fooR3.txt, . . . , fooR1000.txt 
```

I wish to delete all the files greater than R500\. I have several folders and I know how to pass through each folder, but I am not sure how to capture and delete the files with replication 501 and greater. How can I do such?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T00:26:56.193

这将删除`fooR###.txt`### 大于 500 的所有文件。

```
@echo off

setlocal EnableDelayedExpansion

for %%f in (fooR*.txt) do (
  set num=%%~f
  set num=!num:~4,-4!
  if !num! gtr 500 del /q "%%~f"
)

endlocal 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T22:38:15.440

简单地说：

```
ren foo500.txt foo499bis.txt
del fooR5??.txt fooR6??.txt fooR7??.txt fooR8??.txt fooR9??.txt fooR10??.txt 
ren foo499bis.txt foo500.txt 
```

不优雅，但高效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:35:25.300

因为您的范围是开放的，所以我颠倒了您的标准：删除不在 1-499 范围内的任何内容。请注意，这**并不完全等同**于您的，例如它还会删除一个名为的文件`fooR001.txt`，或者`fooR_something_else.txt`
它也很慢。

```
@echo off
for %%F in (fooR*.txt) do (
  echo %%F | findstr  /v /r "fooR[1-9]\.txt fooR[1-9][0-9]\.txt  fooR[1-4][0-9][0-9]\.txt" >nul  && echo del %%F
) 
```

第一行 ( `for`) 枚举以 开头的文件`fooR`，然后为每个文件`findstr`检查它是否**不**匹配模式（`/v`选项），最后如果检查（即不匹配）为正则执行命令（`&&`意味着*仅在前一个命令成功时执行*） .
上面的代码只会回显命令，而不是执行它们，因此您可以安全地运行它来验证它实际上是否正常运行。要实际运行删除，只需`echo`在它前面删除即可。

注意：您实际上可以直接从命令行以以下形式运行它：

```
@for %F in (fooR*.txt) do @echo %%F | findstr  /v /r "fooR[1-9]\.txt fooR[1-9][0-9]\.txt  fooR[1-4][0-9][0-9]\.txt" >nul  && echo del %F 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-04T22:47:06.900

您需要为此制作一个批处理脚本。然后在批处理文件中你可以写。

```
DEL "fooR500.txt" 
```

要删除所有以 .txt 结尾的文件，您只需编写：

```
DEL "*.txt" 
```

这就是我所知道的，但如果你想得到它，所以它执行文件 500 和更高的文件，你必须在 Batch 中创建一个变量来保存值 500，使用：

```
set Value = 500 
```

然后让它删除文件“fooR”+索引+“.txt”所以你必须这样做：

```
set "FilePre = fooR"
set "FileW  = %FilePre% %Value%"
set "Ex = .txt"
set "FileX = %FileW% %Ex%"
del FileX 
```

然后你必须让 Value 上升 1 并重复这个过程 500 次，直到它达到 1000。

# php - "No connection could be made because the target machine actively refused it." from external client

> ID：12272238
> 
> 赞同：0
> 
> 时间：2012-09-04T22:30:29.140
> 
> 标签：php, sockets, ubuntu, xampp

I have a small home server (Ubuntu+XAMPP) and 2 PHP scripts: `server.php` and `client.php`, which both communicate to each other via sockets.

When I run `server.php` / `client.php` on the same machine (`localhost`), it works fine. Also, when I run `server.php` on the server, and `client.php` on the same server but from other local PC (i.e. `local_server_ip`/`client.php`), all works fine as well.

However, when I run `server.php` on the server and `client.php` on the other PC on the same network (replacing `localhost` with `local_server_ip_addr` in the `client.php` script), it fails with the `actively refused connection` error.

All necessary ports are forwarded in the router. I guess it is kind of security block on XAMPP/Linux and can be eliminated by some configuration file. I replaced `Deny from all` in the `New XAMPP security concept` with `Allow from all` in `httpd-xamp.conf` file, but it still fails.

Any help would be much appreciated.

(PS: server/client scripts examples taken from [http://i-novice.net/sokety-v-php/](http://i-novice.net/sokety-v-php/) )

**UPD: Have modified port 8080 (the one is dedicated for sockets in my system) to XXXXX. All works fine!**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-20T07:12:37.277

如果这种情况可靠地发生，它实际上意味着机器存在，但是它没有在预定端口上侦听的管理员，或者有防火墙阻止你。

如果它定期发生 - 您“不时地”使用 - 并且重试成功，则很可能是因为服务器具有完全的“过剩”。

当您在聆听附件上坚持要得到承认时，您就会陷入困境。这种过剩是有限的，而且很短 - 1、2 或 3 的估计并不奇怪 - 因此操作系统可能无法满足您对“确认”的请求。

构建是监听能力的一个参数 - 所有方言和阶段都以这种方式具有基本相同的 API，即使是 C# 也是如此。如果您控制服务器，则此参数通常是可配置的，并且可能从一些设置文档或注册表中读取。研究如何安排您的服务器。

如果您编写了服务器，您可能会在确认您的附件时进行大量准备，这可以更好地转移到不同的专家字符串，以便您的确认随时准备获得关联。您可以研究不同的结构工程决策，以减轻排队和依次处理客户的麻烦。

尽管您是否可以构建服务器构建，但您确实需要在客户代码中重试基本原理以适应此问题 - 因为即使构建时间很长，服务器也可能会在那时对该端口产生大量不同的需求。

如果用于映射的端口耗尽，NAT 交换机极有可能出现这种错误。我认为我们可以把这个概率作为一个很长的镜头，但是，因为交换机在厌倦之前有 64K 并发关联与相同的目标位置/端口。

# javascript - JavaScript: function returning an object

> ID：12272239
> 
> 赞同：102
> 
> 时间：2012-09-04T22:30:38.887
> 
> 标签：javascript

I'm taking some JavaScript/jQuery lessons at codecademy.com. Normally the lessons provide answers or hints, but for this one it doesn't give any help and I'm a little confused by the instructions.

It says to make the function makeGamePlayer return an object with three keys.

```
//First, the object creator
function makeGamePlayer(name,totalScore,gamesPlayed) {
    //should return an object with three keys:
    // name
    // totalScore
    // gamesPlayed
} 
```

I'm not sure if i should be doing this

```
//First, the object creator
function makeGamePlayer(name,totalScore,gamesPlayed) {
    //should return an object with three keys:
    // name
    // totalScore
    // gamesPlayed

         this.name =  name;
         this.totalScore = totalScore;
         this.gamesPlayed = gamesPlayed;
} 
```

or something like this

```
 //First, the object creator
    function makeGamePlayer(name,totalScore,gamesPlayed) {
        //should return an object with three keys:
        // name
        // totalScore
        // gamesPlayed

         var obj = {
             this.name =  name;
             this.totalScore = totalScore;
             this.gamesPlayed = gamesPlayed;
          }
    } 
```

I have to be able to modify the properties of the object after its created.

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2012-09-04T22:34:21.713

在 JavaScript 中，大多数[函数](http://www.ecma-international.org/ecma-262/6.0/#sec-ecmascript-function-objects)都是可调用和可实例化的：它们同时具有[[[Call]]](http://www.ecma-international.org/ecma-262/6.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist)和[[[Construct]]](http://www.ecma-international.org/ecma-262/6.0/#sec-ecmascript-function-objects-construct-argumentslist-newtarget)内部方法。

作为可调用对象，您可以使用括号来调用它们，可选地传递一些参数。作为调用的结果，函数可以[返回一个值](http://www.ecma-international.org/ecma-262/6.0/#sec-return-statement)。

```
var player = makeGamePlayer("John Smith", 15, 3); 
```

上面的代码调用函数`makeGamePlayer`并将返回值存储在变量中`player`。在这种情况下，您可能希望像这样定义函数：

```
function makeGamePlayer(name, totalScore, gamesPlayed) {
  // Define desired object
  var obj = {
    name:  name,
    totalScore: totalScore,
    gamesPlayed: gamesPlayed
  };
  // Return it
  return obj;
} 
```

此外，当你调用一个函数时，你还在底层传递了一个额外的参数，它决定了[`this`](http://www.ecma-international.org/ecma-262/6.0/#sec-this-keyword)函数内部的值。在上述情况下，由于`makeGamePlayer`没有作为方法调用，因此`this`值将是草率模式下的全局对象，或严格模式下的 undefined。

作为构造函数，您可以使用[`new`运算符](http://www.ecma-international.org/ecma-262/6.0/#sec-new-operator)来实例化它们。该运算符使用[[[Construct]]](http://www.ecma-international.org/ecma-262/6.0/#sec-ecmascript-function-objects-construct-argumentslist-newtarget)内部方法（仅在构造函数中可用），它执行如下操作：

1.  创建一个继承自`.prototype`构造函数的新对象
2.  调用将这个对象作为`this`值传递的构造函数
3.  如果它是一个对象，则返回构造函数返回的值，否则返回在步骤 1 中创建的对象。

```
var player = new GamePlayer("John Smith", 15, 3); 
```

上面的代码创建了一个实例`GamePlayer`并将返回的值存储在变量中`player`。在这种情况下，您可能希望像这样定义函数：

```
function GamePlayer(name,totalScore,gamesPlayed) {
  // `this` is the instance which is currently being created
  this.name =  name;
  this.totalScore = totalScore;
  this.gamesPlayed = gamesPlayed;
  // No need to return, but you can use `return this;` if you want
} 
```

按照惯例，构造函数名称以大写字母开头。

使用构造函数的优点是实例继承自`GamePlayer.prototype`. 然后，您可以在那里定义属性并使它们在所有实例中可用

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-09-04T22:33:10.387

You can simply do it like this with an [object literal](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Object_literals):

```
function makeGamePlayer(name,totalScore,gamesPlayed) {
    return {
        name: name,
        totalscore: totalScore,
        gamesPlayed: gamesPlayed
    };
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-12-10T09:13:34.630

使用 ES2016 JavaScript 执行此操作的最新方法

```
let makeGamePlayer = (name, totalScore, gamesPlayed) => ({
    name,
    totalScore,
    gamesPlayed
}) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-04T22:36:26.043

两种风格，稍加调整，都会起作用。

第一种方法使用 Javascript 构造函数，它与大多数事物一样有利有弊。

```
 // By convention, constructors start with an upper case letter
function MakePerson(name,age) {
  // The magic variable 'this' is set by the Javascript engine and points to a newly created object that is ours.
  this.name = name;
  this.age = age;
  this.occupation = "Hobo";
}
var jeremy = new MakePerson("Jeremy", 800); 
```

另一方面，如果我没记错的话，您的另一种方法称为“显示闭包模式”。

```
function makePerson(name2, age2) {
  var name = name2;
  var age = age2;

  return {
    name: name,
    age: age
  };
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-04T22:34:23.383

我认为这些指示的意思是：

```
 function makeGamePlayer(name,totalScore,gamesPlayed) {
        //should return an object with three keys:
        // name
        // totalScore
        // gamesPlayed

         var obj = {  //note you don't use = in an object definition
             "name": name,
             "totalScore": totalScore,
             "gamesPlayed": gamesPlayed
          }
         return obj;
    } 
```

# unicode - Using OpenType features with ImageMagick or GraphicsMagick

> ID：12272245
> 
> 赞同：0
> 
> 时间：2012-09-04T22:32:00.090
> 
> 标签：unicode, imagemagick, graphicsmagick, opentype

Does anyone know if it's possible to use OpenType features in ImageMagick or GraphicsMagick? Specifically, I'm looking to use glyphs that are not assigned to Unicode points (glyphs are sometimes placed outside of the Unicode range, since they are intended to act as embellishments to other characters). In OpenType-aware desktop applications, you would usually need to open a glyph table and select the glyph manually; I'm not sure how you would do this using ImageMagick.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:22:29.227

恐怕， ImageMagick（还）***不***支持这种高级（并且：不知何故晦涩难懂）OTF 功能——至少可用文档中没有任何内容（我不知道 GraphicsMagick）。

但是，从开发人员那里获得明确、权威的答案的最佳选择是：[在此处注册并在 ImageMagick 官方](http://www.imagemagick.org/discourse-server/viewforum.php?f=14)*用户*列表中再次询问。

# javascript - change css link and wait till new css is loaded

> ID：12272248
> 
> 赞同：10
> 
> 时间：2012-09-04T22:32:08.497
> 
> 标签：javascript, jquery, css

I wonder whether it's possible to change stylesheet link of the loaded document, then wait till the new css is loaded, and then run appropriate js code

thanks for any suggestions

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T22:34:24.787

html:

```
<link id="mystylesheet" href="/path/to/css.css" /> 
```

代码：

```
$("#mystylesheet").load(function(){
  //Your javascript
}).attr("href", "/new/path/to/css.css"); 
```

这将**替换**您当前的 CSS，并在`.load()`获取新的 CSS 文件后执行处理程序中的任何代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-02T20:55:28.600

@ahren 几乎是正确的。但是，当通过动态更改链接元素上的 href 完成加载 css 文件时使用回调似乎不适用于大多数移动设备。

而是尝试使用 load .. 将样式直接注入样式元素中，最终得到包括移动浏览器在内的大多数现代浏览器的支持

更新以包括对 IE 8- 的支持；注意这需要你在你的css中注入一个虚拟规则来验证css何时被加载（在这种情况下使用body {ready:true;}）

css

```
body {ready:true;}
... 
```

html

```
<style id="your-style-element"></style> 
```

javascript

```
if (document.createStyleSheet) {

    //Wait for style to be loaded
    var wait = setInterval(function(){
      //Check for the style to be applied to the body
      if($('body').css('ready') === 'true') {
        clearInterval(wait);

        //CSS ready
      }
    }, 300);

    document.createStyleSheet(url);
} else {
    //Dynamically load the css for this doc
    $("#your-style-element").load(url,function(){

       //CSS ready
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-05T07:09:50.593

你可以试试我专门为这个案例写的[插件。](https://github.com/sturmgeist/jquery-onloader)

不确定的`.load()`方法`jQuery`，它似乎不是跨浏览器。只有 IE 支持`onload=""`链接元素上的事件，afaik。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T22:34:23.397

试试这个人：http: [//forum.jquery.com/topic/loading-stylesheets-on-the-fly](http://forum.jquery.com/topic/loading-stylesheets-on-the-fly)

或：[http ://www.rickardnilsson.net/post/2008/08/02/Applying-stylesheets-dynamically-with-jQuery.aspx](http://www.rickardnilsson.net/post/2008/08/02/Applying-stylesheets-dynamically-with-jQuery.aspx) *或* [使用 jQuery 更改样式表](https://stackoverflow.com/questions/2011176/changing-a-stylesheet-using-jquery)

希望它适合原因`:)`

**代码**

```
var link = $("<link>");
link.attr({
        type: 'text/css',
        rel: 'stylesheet',
        href: <your CSS file url>
});
$("head").append( link ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-14T01:41:46.650

这是我写的一个要点，它在 47 LOC 中完美运行：

[https://gist.github.com/aleclarson/ac6456c75edae9fe9d9b6938142a065b](https://gist.github.com/aleclarson/ac6456c75edae9fe9d9b6938142a065b)

它用于`requestAnimationFrame`检查`document.styleSheets`每一帧，直到每个给定的 URL 片段都已加载。

例子：

```
const styles = require('./styles')
const promise = styles.onLoad('foo.css', 'bar.css')
promise.then(() => console.log('Styles loaded!')) 
```

纯javascript，太！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-30T20:29:21.117

[TeaCoder 在https://stackoverflow.com/a/35644406/20774](https://stackoverflow.com/a/35644406/20774)上有一个很好的答案。

基本上使用 elements`onload`方法并将您想要在样式加载后发生的逻辑放在那里。

这是使用内置 DOM 功能的好方法，但回调语法有点尴尬。以下是我使用 Promises 的方法：

```
const createOnLoadPromise = (htmlElement) =>
  new Promise((resolve) => {
    htmlElement.onload = resolve;
  });
const link1 = document.head.appendChild(createStyleLink(href1));
const link2 = document.head.appendChild(createStyleLink(href2));
await Promise.all([
  createOnLoadPromise(link1),
  createOnLoadPromise(link2),
]);
// do whatever you need to do after the await 
```

# android - 是否可以更改此表？

> ID：12272249
> 
> 赞同：1
> 
> 时间：2012-09-04T22:32:12.197
> 
> 标签：android, database, sqlite, android-sqlite

在我之前的应用程序版本中，我创建了一个表格，如下所示：

```
public static final String CREATE_DATABASE = "CREATE TABLE " + TABLE_NAME
        + "(_id INTEGER PRIMARY KEY AUTOINCREMENT," + COLUMN_NAME_TITLE + " TEXT, "
        + COLUMN_NAME_LOGIN + " TEXT, " + COLUMN_NAME_PASSWORD + " TEXT, " + COLUMN_NAME_NOTES
        + " TEXT);"; 
```

在当前版本中，我创建了一个表，如下所示：

```
public static final String CREATE_DATABASE = "CREATE VIRTUAL TABLE " + TABLE_NAME + " USING fts3 "
        + "(_id INTEGER PRIMARY KEY AUTOINCREMENT," + COLUMN_NAME_TITLE + " TEXT, "
        + COLUMN_NAME_LOGIN + " TEXT, " + COLUMN_NAME_PASSWORD + " TEXT, " + COLUMN_NAME_NOTES
        + " TEXT, " + COLUMN_NAME_FAV + " INTEGER DEFAULT 0, " + KEY_WORD + ");"; 
```

所以现在是`VIRTUAL`，创建`USING fts3`并添加了两个新列`COLUMN_NAME_FAV`和`KEY_WORD`.

升级时有可能以某种方式改变表吗？如果没有，我应该怎么做才能让用户不会丢失他们的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:57:46.617

无法运行将常规表转换为表的简单 alter 命令`VIRTUAL`。

取而代之的是，您应该：

1.  将表中的数据加载到内存中/复制表。
2.  `DROP`旧表。
3.  `CREATE`新表。
4.  使用步骤 1 中的数据填充新表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T22:47:40.180

通常，将新列添加到现有表是安全的，只要它们可以为空和/或具有默认值。为什么不创建现有表的副本并尝试更改它（副本）以检查会发生什么。
PS 您可能必须设置一些 DB 标志以允许在 DB 运行时更改表。

# mysql - mysql underperforming on ec2

> ID：12272257
> 
> 赞同：0
> 
> 时间：2012-09-04T22:32:45.430
> 
> 标签：mysql, amazon-ec2

we are trying to transfer from our data center to aws. In both situations we have a few web servers with one master and two slave databases. We had to pull the switch monday back to the data center though. The ec2 mysql slaves were taking between 40 and 140 seconds to execute the homepage queries that take 1s tops from our data center. We are using 1 large and 1 xl slave, which should be actually a little more powerful than what we have in the datacenter. During that time our slave ec2s had a solid 100% cpu level. They have mounted ebs volumes. Anyone have any ideas what's going on here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T21:06:37.670

如果您的主页使用 SQL 子查询，则 EC2 实例可能会非常慢，因为默认情况下它使用 MySQL 5.5（有关详细信息，请查看[MySQL 在 EC2 上非常慢](https://stackoverflow.com/questions/17255238/mysql-is-extremely-slow-on-ec2/17255263)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:48:14.717

EBS 不保证吞吐量（直到去年）。您将要尝试使用预置的 IOPS 挂载卷。这样可以保证您的磁盘 io，然后您可以排除 EBS 的问题。

[http://aws.typepad.com/aws/2012/08/fast-forward-provisioned-iops-ebs.html](http://aws.typepad.com/aws/2012/08/fast-forward-provisioned-iops-ebs.html)

（假设您已确保所有索引都在表上，并且所有应用程序级别的东西都是相同的）

# sql-server-2008 - INSTEAD OF UPDATE,DELETE,INSERT ：确定每个命令

> ID：12272261
> 
> 赞同：0
> 
> 时间：2012-09-04T22:33:15.410
> 
> 标签：sql-server-2008, triggers, updating

我需要在触发器 [UPDATE,DELETE,INSERT] 中确定这 3 个命令中的每一个。对于最后 2 个，我接下来要做：

```
 IF EXISTS (SELECT * FROM inserted)
      BEGIN 

      END
    ELSE IF EXISTS (SELECT * FROM deleted)
      BEGIN 

      END 
```

如何获取更新行？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T22:36:44.363

不完全确定您要完成什么，但您可以测试它`UPDATE`是否*同时* `inserted`存在（更新*后*的值）和`deleted`（更新*前*的值）。从[文档](http://msdn.microsoft.com/en-us/library/ms191300.aspx)中：

> **删除的表在 DELETE 和****UPDATE**语句期间存储受影响行的副本。在执行 DELETE 或 UPDATE 语句期间，行会从触发器表中删除并转移到已删除的表中。删除的表和触发器表通常没有共同的行。
> 
> **插入的表在 INSERT 和****UPDATE**语句期间存储受影响行的副本。在插入或更新事务期间，新行会同时添加到插入表和触发器表中。插入表中的行是触发器表中新行的副本。

因此，如果`inserted`存在但不存在`deleted`，则它是`INSERT`; 如果`deleted`存在但不存在`inserted`，则为`DELETE`; 如果它们都存在，则为`UPDATE`.

# android - 延迟精度

> ID：12272265
> 
> 赞同：2
> 
> 时间：2012-09-04T22:33:49.670
> 
> 标签：android, delay

我对用于 Android (Java) 的这段代码有疑问

```
handler.postDelayed(new Runnable(){
public void run(){
    // Your code goes here...
}
}, 500); 
```

如果延迟大约为 500 毫秒，那么程序似乎会在 0.5 秒时重复该任务，但如果我更改为小于 100 毫秒甚至更短，它就不再跟随了。我测试了亮度变化，有一段时间它可以以该速率重复亮度变化，但随后减慢并再次恢复正常闪光速率。似乎不稳定。无论手机 CPU 的负载如何，您是否有任何代码可以提供精确的延迟。

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T22:39:56.687

不是来自 Java，不；股票 Java 不是实时系统。

计时精度取决于 JVM*和*操作系统的调度程序。您可能能够逐步提高精度，但无法保证您正在寻找的精度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T23:04:58.283

如果您使用具有周期性滴答声的 CountDownTimer，您可能可以做一些更精确的事情。本质上，您将其设置为倒计时一段时间，如果需要，可以是几小时，并且有两种方法，一种方法在每次滴答时调用，另一种方法在计时器结束时开始另一个方法。无论如何，您可以将滴答声设置为非常快，然后通过检查点击中的实际时间差仅在延迟点启动代码。我认为这是你能做的最好的事情。基本上在滴答声内，如果实际经过了正确的时间，您将发出信号。该信号将启动线程或释放已经运行的线程正在等待的东西。CountDownTimer 的值是多少，我想它只是您可以进行非常频繁的轮询和经过时间检查。虽然不能保证，但您可以将滴答之间的时间设置为高频率并非常频繁地检查/轮询。这可以带来流畅的性能，与实时系统不同。它更可能是准确的，因为它只是发出信号，而不是仅仅为了发出信号而占用线程资源。您也可以尝试使用 IntentService 来执行任务，并在每次调用时调用 startService(intentToIntentService)。看看线程是否在像 IntentService 这样的服务中工作得更好，我相信它确实将它们排队。它更可能是准确的，因为它只是发出信号，而不是仅仅为了发出信号而占用线程资源。您也可以尝试使用 IntentService 来执行任务，并在每次调用时调用 startService(intentToIntentService)。看看线程是否在像 IntentService 这样的服务中工作得更好，我相信它确实将它们排队。它更可能是准确的，因为它只是发出信号，而不是仅仅为了发出信号而占用线程资源。您也可以尝试使用 IntentService 来执行任务，并在每次调用时调用 startService(intentToIntentService)。看看线程是否在像 IntentService 这样的服务中工作得更好，我相信它确实将它们排队。

```
 Date startDate = new Date();
 long startTime = startDate.getTime();
 // Tick called every 10th of a second.  OnFinish called at Signal.
 CountDownTimer ctDownTimer = new CountDownTimer(30000, 100) {
 long startIntervalTime=startTime;
 public void onTick(long millisUntilFinished) {

     Date now = new Date();
     long nowTime = now.getTime();
     if ((startIntervalTime - nowTime) > 100)
     {
        issueSignal();
        intervalStartTime=nowTime;
     }
     now=null;
 }

 public void onFinish() {
     Log.d("MyClass", "Done")  // Maybe start out.
 }
}.start(); 
```

# python - Django 多租户 URL 配置

> ID：12272268
> 
> 赞同：0
> 
> 时间：2012-09-04T22:34:01.243
> 
> 标签：python, django, multi-tenant

我正在尝试向应用程序添加一些简单的租户支持，创建一个帐户模型，该模型具有要从请求 url 中读取的字符串“租户”并识别系统中的租户：

**租户**.example.com/* -> www.example.com/**租户**/*（由 apache 重写）

我编写了一个简单的中间件来从 request.path 捕获这个 /tenant/ 并添加一个 request.account 对象来使用。

我的问题是我的网址映射。

我试过这个：

```
url(r'^(?P<tenant_id>[\w\-]+)/', include('project.urls_tenant')), 
```

并在 urls_tenant.py 中定义了一些简单的 url：

```
url(r'^app1/', include('project.app1.urls')),

url(r'^app2/', include('project.app2.urls')), 
```

当我尝试访问任何页面时，我收到一条错误消息：

> generic_view_method() 得到了一个意外的关键字参数“tenant_id”

因为它不（也不应该）期望tenant_id 作为参数。

如果我将**urls.py**文件中的tenant_id 硬编码为**/** **test_tenant/**一切正常。

 ****我做错了什么以及如何解决它，以便正常处理请求和响应？

非常感谢你们。我以此作为参考：[django 上多租户应用程序的最佳架构](https://stackoverflow.com/questions/7194341/optimal-architecture-for-multitenant-application-on-django)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:47:31.837

如果我正确理解您的设置，您已定义：

```
url(r'^(?P<tenant_id>[\w\-]+)/', include('project.urls_tenant')), 
```

在我们的主 urls.py 文件和 urls_tenant.py 文件的其他行中？

从那里获取它不会通过 urls_tenant.py 文件传递​​任何匹配 ^(?P[\w-]+)/ 的请求吗？您在那里定义的两行只能匹配 /app1 或 /app2。

但我只是猜测我没有完全理解你的设置？

我认为如果您将租户 url 映射到特定视图而不是包含不同的 urls.py 文件会更好（我什至不知道这是可能的）。

```
url(r'^(?P<tenant_id>[\w\-]+)/', TenantView.as_view(), name="tenant-view"), 
```

像上面这样的东西对我来说看起来更像 django。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:53:08.577

当您显然不需要时，您正在捕获 url 模式中的命名参数tenant_id。尝试删除括号以避免执行捕获：

```
url(r'^[\w\-]+/', include('project.urls_tenant')), 
```

此页面通常有用： [https ://docs.djangoproject.com/en/dev/topics/http/urls/#how-django-processes-a-request](https://docs.djangoproject.com/en/dev/topics/http/urls/#how-django-processes-a-request)****

# machine-learning - 机器学习和m估计

> ID：12272269
> 
> 赞同：1
> 
> 时间：2012-09-04T22:34:05.173
> 
> 标签：machine-learning, artificial-intelligence

我正在研究一个机器学习问题，并且我的数据中有一些异常值，并希望对其进行平滑处理。我读了一些关于使用 m-estimate 解决此类问题的内容。我在 Web 和 stackoverflow 上都进行了详尽的搜索，但找不到一个很好的例子。有人可以建议一些资源，我可以在其中阅读有关此主题的更多信息吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-10T22:09:56.080

如果我没记错的话，M-estimator 源自 Huber 的工作。他研究了使估计器稳健的方法。然而，为了衡量稳健性，我们考虑了一种非常特定类型的稳健性。它被称为“细分点”，简单来说就是异常值与该方法可以处理的点的总数相比的百分比。又多了一个异常值，它就崩溃了。

请注意，这种类型的鲁棒性与计算机视觉中的鲁棒性完全不同。在计算机视觉中，异常值可能并不多，但它们可能会合谋（以结构化点的形式）分解最稳健的估计量。出于这个原因，在计算机视觉中，您将遇到[Hough 变换](https://en.wikipedia.org/wiki/Hough_transform)和[RANSAC](https://en.wikipedia.org/wiki/RANSAC)来执行稳健的线估计。

此外，一种对异常值非常有弹性的 M 估计器是一种 M 估计器，它限制了分配给极端异常值的值。这些是所谓的[重新下降 M 估计量](https://en.wikipedia.org/wiki/Redescending_M-estimator)。它们非常稳健，因为极端异常值（称为`gross outliers`）的权重为零，或者换句话说，在回归中根本没有考虑在内。

如果你想知道单个异常值的影响，我挑战你编写一个简单的线性最小二乘八度程序。或者，如果您认为它更容易，则可以使用总最小二乘程序（您可以只进行奇异值分解并且`svd`是内置的）。

# c++ - 程序不等待 cin

> ID：12272277
> 
> 赞同：7
> 
> 时间：2012-09-04T22:34:34.613
> 
> 标签：c++, loops, input, console

```
int x=0;
string fullname = "";
float salary;
float payincrease;
float newsal;
float monthlysal;
float retroactive;
while(x<3){
    cout << "\n What is your full name?";
    cin >> fullname;
    cout << "\n What is your current salary? \t";
    cin >> salary;
    cout << "\n What is your pay increase? \t";
    cin >> payincrease;
    newsal = (salary*payincrease)+salary;
    monthlysal = newsal/12.00;
    retroactive = (monthlysal*6)-(salary/2);
    cout << "\n" << fullname << "'s SALARY INFORMATION";
    cout << "\n New Salary \t Monthly Salary \t Retroactive Pay";
    cout << "\n \t" << newsal << "\t" << monthlysal << "\t" << retroactive;
    x++;
} 
```

每次询问 cin 时，我的循环似乎都不会停止，而是立即自行执行循环 3 次。当询问输入时如何让它停止？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-05T00:03:12.087

如果调用 cin 时输入流不为空，则 cin 使用缓冲区中已有的数据，而不是等待用户提供更多数据。您正在使用提取运算符，因此当 cin 向您的变量发送值时，它会跳过缓冲区中的前导空格并在下一个空格处停止。

在这一行设置断点：

```
cout << "\n What is your current salary? \t"; 
```

运行程序，然后输入 Bob Smith。当您到达断点时，将光标悬停在您的字符串全名上。你会看到它只存储“Bob”而不是“Bob Smith”。“Bob Smith”被放入缓冲区，但是当您将 cin 与提取运算符一起使用时，它会跳过任何前导空格，将找到的下一个值放入您的变量中，然后在下一个空格处停止。为了证明这一点，请尝试运行：

```
#include <iostream>
#include <string>
using namespace std;
int main()
{
    string str1,str2;
    cin >> str1;
    cin >> str2;
    cout << str1 << " " << str2 << "\n\n";
    return 0;
} 
```

如果您输入“Bob Smith”，即使您调用 cin 两次，它也只会输入一次。但是，您会看到“Bob”和“Smith”都被字符串 str1 和 str2 捕获。

因此，您可以得出结论，当 cin 到达 Bob 和 Smith 之间的空格时，它会停止填充您的字符串全名。在您下次调用 cin 时，缓冲区仍然包含“Smith”，因此它不会从用户那里获取更多输入，而是尝试用“Smith”填充您的可变薪水。显然这不是你想要做的。您可以在每次使用 cin 之前在 cin 上调用 flush 和 ignore 来清除缓冲区，或者您可以修复您的逻辑并使用 getline 获取全名，包括空格。

要解决您的问题，您需要做的就是使用 getline 而不是 cin >>，因此替换此行：

```
cin >> fullname; 
```

有了这个：

```
getline(cin,fullname,'\n'); 
```

其次，您正在使用 while 循环来执行一组操作特定次数。这通常是你会使用 for 循环的东西。

顺便说一句，您还可以编写微小的输入验证循环，以帮助您调试或避免尝试将无效输入放入变量中（例如“史密斯”放入浮点数）。像这样的东西可以工作：

```
for(;;)
{
    if(cin >> salary)
        break;
    cin.clear();
    cin.ignore(INT_MAX,'\n');
} 
```

请注意，cin 返回一个值，因此您可以在 if 语句中使用它。如果它得到有效的输入，它将返回 true。如果不是，它将返回 false。为了使其更明确，您也可以只使用不带 if 语句的正常调用 cin，然后检查 if cin.good()，这相当于基本相同的净效果。如果您未使用 Visual Studio 并收到有关 INT_MAX 的错误，您可能需要 #include limits.h 来解决它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T04:46:37.240

如果您在预期的位置输入 a `char`，就会发生这种情况。`int`

使用 `cin.clear();` and `cin.ignore(numeric_limits<streamsize>::max(), '\n');`将输入限制为`int`'s only。

除此之外，如果输入了正确的数据类型，它不会跳过。

```
#include <string>
#include <iostream>
#include <limits>
using namespace std ;

int main(void)
{

    int x=0;
    string fullname = "";
    float salary;
    float payincrease;
    float newsal;
    float monthlysal;
    float retroactive;

    while(x<3)
    {
        cout << "\n What is your full name?";
        cin >> fullname;
    cin.ignore( 1000, '\n' );

        cout << "\n What is your current salary? \t";
        cin >> salary;
    cin.clear();
    cin.ignore(numeric_limits<streamsize>::max(), '\n');

        cout << "\n What is your pay increase? \t";
        cin >> payincrease;
    cin.clear();
    cin.ignore(numeric_limits<streamsize>::max(), '\n');

        newsal = (salary*payincrease)+salary;
        monthlysal = newsal/12.00;
        retroactive = (monthlysal*6)-(salary/2);
        cout << "\n" << fullname << "'s SALARY INFORMATION";
        cout << "\n New Salary \t Monthly Salary \t Retroactive Pay";
        cout << "\n \t" << newsal << "\t" << monthlysal << "\t" << retroactive;
        x++;
    }

      cout<<" \nPress any key to continue\n";
      cin.ignore();
      cin.get();

   return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-05T20:52:29.837

检查你的变量类型，我注意到我的接受数字而不是字符，有同样的问题（没有停止，循环一直在继续）。

```
> std::cin >> this->controls.button

> DETOX_NUMBER button; // (int) 
```

改成：

```
> char button; 
```

# emacs - 在 Emacs 中，如何在匹配某个正则表达式的 C 模式缓冲区中语法高亮显示文本？

> ID：12272278
> 
> 赞同：1
> 
> 时间：2012-09-04T22:34:40.710
> 
> 标签：emacs, syntax-highlighting

默认情况下，Emacs 不会突出显示常量、结构成员、函数调用等（除非在定义中）。我在这里谈论的是 C 大调模式。

我想要一些基本的突出显示，只是基于文本匹配。例如，仅包含大写和下划线的单词 [A-Z_]+，例如 SOME_CONST，是一个常量（除非另有突出显示）。同样，我可以匹配 [a-zA-Z_][a-zA-Z0-9_] *\s* ( 作为函数调用; ->[a-zA-Z_][a-zA-Z0-9_]* 作为结构成员等

我该怎么做这个 emacs ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:10:13.850

我认为您想要的 elisp 功能是 font-lock-add-keywords。我已将以下内容添加到我的 .emacs 中，并获得了我认为您想要的大写单词：

```
(font-lock-add-keywords 'c-mode '("\\<\[A-Z_\]\+\\>")) 
```

您必须添加更多内容来处理整数常量。一些有关此的[文档](http://www.gnu.org/software/emacs/manual/html_node/elisp/Search_002dbased-Fontification.html)警告说，如果您对正则表达式不了解，它可能会大大减慢速度，并且您应该使用 regexp-opt 匹配多个关键字。

让我有点困惑的部分是 font-lock-add-keywords 的参数可以是正则表达式。

# .net - 控制错误的数据绑定

> ID：12272279
> 
> 赞同：4
> 
> 时间：2012-09-04T22:34:41.510
> 
> 标签：.net, wpf, entity-framework-4, sql-server-ce, visual-studio-2012

我在 Windows 7 Pro 上使用 Visual Studio Ultimate 2012 RC 来设计带有 SQL CE 4.0 的简单 WPF 4.5 应用程序我已经将数据库建模为实体，这工作得很好，但是当我尝试从数据源窗口拖放实体属性时Visual Studio 生成已知错误：

*将数据绑定到控件
无法将控件添加到设计图面或绑定到控件，因为无法解析类型。请尝试构建项目或添加必要的程序集引用。*

好吧，我当然尝试过清理和重建解决方案。一些答案建议我应该将我的项目移动到 C:\ 驱动器，所以**我确实将我的项目移动到了 C:\ 驱动器**。我什至尝试使用 SQL CE 数据库在 C:\ 驱动器上创建一个全新的项目。我尝试将目标框架从 4.5 更改为 4.0，因为我可以在我的 Visual Studio 2010 中毫无问题地执行此操作，但这**也没有帮助**。我无法在 VS2010 中生成实体，因为我的 VS2010 无法连接 SQL CE 4.0 :(

可能是 VS2012 错误还是我遗漏了什么？感谢您的任何回复！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T10:25:00.090

好的，这很奇怪，但有帮助。如果您遇到这种情况，您必须手动将 XML 命名空间添加到您自己的项目中 - 如下所示：

```
<Window ....
       xmlns:yourAlias="clr-namespace:WpfApplication1"
 ... /> 
```

然后清理您的项目并重新编译。过了一会儿，数据源的可视化拖放开始像魔术一样工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-10T16:26:42.963

有同样的问题，我通过转到**构建**菜单来重建我的项目，它解决了我的问题

# java - 如何使用 JasperReports 从 Oracle 中的 blob 列中查看图像？

> ID：12272283
> 
> 赞同：4
> 
> 时间：2012-09-04T22:35:06.300
> 
> 标签：java, oracle, jasper-reports

我尝试在报告布局中定义一个图像元素并将类型设置为 java.io.Inputstream 但这不起作用，我也尝试设置为 java.awt.Image 并且两者都不起作用，我得到的例外是

```
java.lang.ClassCastException: oracle.sql.BLOB cannot be cast to java.awt.Image 
```

或者

```
java.lang.ClassCastException: oracle.sql.BLOB cannot be cast to java.io.InputStream 
```

我也试着用谷歌搜索，但结果就是我现在正在做的事情。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T22:39:25.720

没有看到您如何调用 blob 以将图像嵌入到您的报告代码中......

1.  使用[`blob.getBinaryStream()`](http://docs.oracle.com/cd/E11882_01/appdev.112/e13995/oracle/sql/BLOB.html#getBinaryStream__).
2.  使用 转换流[`javax.imageio.ImageIO.read( InputStream )`](http://docs.oracle.com/javase/1.4.2/docs/api/javax/imageio/ImageIO.html#read%28java.io.InputStream%29)。

例如：

```
javax.imageio.ImageIO.read( blob.getBinaryStream() ) 
```

这将返回 的实例[`BufferedImage`](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/BufferedImage.html)，它是 的子类`java.awt.Image`，并且应该是嵌入报告中的合适对象。

示例中显示的`blob`变量必须使用报告中的适当变量（表示来自所需列的数据）。

也可以看看：

*   [https://forums.oracle.com/forums/thread.jspa?threadID=2081381](https://forums.oracle.com/forums/thread.jspa?threadID=2081381)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T09:12:06.877

```
InputStream is = new ByteArrayInputStream((byte[]) yourBlobData);
myImage = new DefaultStreamedContent(is, "image/png"); 
```

在jsf页面中；

```
<p:graphicImage value="#{controller.myImage}" style="width:200px;width:500px" /> 
```

# javascript - 如何让 firefox 使用 style['attribute-name'] = 设置样式属性？

> ID：12272288
> 
> 赞同：4
> 
> 时间：2012-09-04T22:36:05.020
> 
> 标签：javascript, css, firefox

在这个[**例子**](http://jsfiddle.net/c9cb2/)中，Chrome 将背景设置为红色，而 firefox 和 IE 则没有。

试：

```
document.getElementById("firefoxDiv").style['backgroundColor'] = "Red"; 
```

和

```
document.getElementById("firefoxDiv").style['background-color'] = "Red"; 
```

我宁愿能够使用外部 CSS 中使用的相同语法 `background-color`与使用 javascript 的内联`.style.backgroundColor =`

谢谢你的帮助！

*注意：请* **不要**使用 jQuery。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T22:40:54.347

使用[`.style.setProperty(propertyName, value [, priority])`](http://www.w3.org/TR/DOM-Level-2-Style/css.html#CSS-CSSStyleDeclaration-setProperty)而不是 expando 属性。

例子：

```
document.getElementById("firefoxDiv").style.setProperty('background-color', 'red'); 
```

# java - Eclipse 错误：多个项目中 Manifest 主要属性的签名文件摘要无效

> ID：12272291
> 
> 赞同：1
> 
> 时间：2012-09-04T22:36:12.733
> 
> 标签：java, eclipse, manifest

我用谷歌搜索，但我找不到有类似问题的人。在我自己的几个项目以及像这样的 Eclipse jar 中，我在 Eclipse 中遇到了这个错误。由于这些问题，我的项目无法编译。

> !ENTRY org.eclipse.core.resources 4 2 2012-09-04 17:17:18.695 !MESSAGE 从插件调用代码时出现问题：“org.eclipse.core.resources”。!STACK 0 java.lang.SecurityException：在 sun.security.util.SignatureFileVerifier.process(SignatureFileVerifier.java:193) 的 sun.security.util.SignatureFileVerifier.processImpl(SignatureFileVerifier.java:240) 的 Manifest 主要属性的签名文件摘要无效) 在 java.util.jar.JarVerifier.processEntry(JarVerifier.java:305) 在 java.util.jar.JarVerifier.update(JarVerifier.java:216) 在 java.util.jar.JarFile.initializeVerifier(JarFile.java: 341）在 java.util.jar.JarFile.getInputStream(JarFile.java:406) 在 org.eclipse.pde.internal.core.ExternalLibraryCache.extractJar(ExternalModelManager.java:320) 在 org.eclipse.pde.internal.core .

webernets 告诉我特定的 jar 文件存在问题，但我没有遇到在多个 jar 文件上存在此问题的解释。我正在使用 Helios 服务包 2，并且在另一台机器上使用相同的 zip（用于 Helios）（并且没有出现这些错误），因此我认为问题不是下载中的损坏文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:19:43.350

检查 Eclipse 使用的 JRE 的版本。安全异常由运行时处理，因此您用于运行 Eclipse 的 JRE 可能与 Eclipse 用于编译的库不匹配。

# php - PHP按钮删除MYSQL表输出中的一行

> ID：12272293
> 
> 赞同：0
> 
> 时间：2012-09-04T22:36:28.967
> 
> 标签：php, mysql, html-table, delete-row

我的目标是显示整个表格，例如 SELECT * FROM 运动员并在表格输出中包含每一行的按钮，按下该按钮时将从数据库中删除该行。

我关注了另一篇文章，下面显示的是我到目前为止但不起作用的内容：

```
//if(isset($_POST['delete_id']) && (!empty($_POST['delete_id']))) 
if(isset($_POST['Delete'])){ 

$delete_id = mysql_real_escape_string($_POST['delete_id']); 
echo("deletebutton" . $delete_id);
//mysql_query("DELETE FROM KeepScores WHERE `id`=".$delete_id); 
//header('Location: main.php'); 
} 

else
{
$query = 'SELECT * FROM athlete';
$result = mysql_query($query);

$self = $_SERVER['PHP_SELF'];
$self = htmlentities($_SERVER['PHP_SELF']); // strip tags to improve security

echo("<table> 
<tr> 
<td> id </td> 
<td>last name</td> 
<td>first name</td> 
<td>delete data</td> 
</tr>");

while($row = mysql_fetch_array($result))
{ 
$id = $row['id'];

echo("<tr>");
        echo("<td>" . $row['id'] . "</td>");
        echo("<td>" . $row['lastName'] . "</td>");
        echo("<td>" . $row['firstName'] . "</td>");
        echo("<td> <form action='$self' method='post'> 
                <input type='hidden' name='delete_id value='$id' /> 
                <input type='submit' value='Delete' />  
            </form> 
        </td>
    </tr>");
}
mysql_free_result($result);
echo("</table>");

} 
```

但是，这不起作用。有谁知道为什么。注意：我没有留下我的登录凭据，但我正在连接到文件中其他地方的数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:45:46.983

最可能的原因是您对 $_POST['Delete'] 的检查没有为任何提交按钮提供“删除”的属性“名称”。但是，您在上面注释掉的那行应该有效吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T18:30:48.690

我认为你应该研究这个领域

```
//if(isset($_POST['delete_id']) && (!empty($_POST['delete_id']))) 
```

if(isset($_POST['删除'])){

和

```
<input type='submit' value='Delete' /> 
```

你应该包括：`<input type='submit' name="Delete" value='Delete' />`

那应该可以解决问题。

# php - 如何找到 Zend 在我的服务器上的安装位置？

> ID：12272295
> 
> 赞同：2
> 
> 时间：2012-09-04T22:36:44.580
> 
> 标签：php, zend-framework, include, runtime-error

我试图在我的 php 脚本中使用 Zend 的“Zend_Service_Amazon”类，但我不确定它的安装位置。我假设在尝试基于此错误调用方法之前，我需要包含 Zend 的路径：

```
Fatal error: Class 'Zend_Service_Amazon' not found in /public_html/path/zend.php on line 3 
```

我知道 Zend 是根据以下`php -v`输出安装的：

```
Zend Engine v2.2.0, Copyright (c) 1998-2010 Zend Technologies
    with the ionCube PHP Loader v4.2.2, Copyright (c) 2002-2012, by ionCube Ltd., and
    with Zend Optimizer v3.3.9, Copyright (c) 1998-2009, by Zend Technologies 
```

那么如何找出它所在的位置以及如何将它包含在我的 php 脚本中呢？

如果它有所作为，我正在使用 cPanel。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T22:45:13.157

1.  根据`php -v`输出，我们可以说`Zend Optimizer`已安装。那里什么都`Zend Framework`没有
2.  Zend Framework 是一组 php 脚本，仅此而已。您不需要在服务器上安装它
3.  如果 ZF 安装在某处，除了查找所有文件系统外，别无他法
4.  只要依赖特定的软件版本是个好主意 - 只需*使用*zend 框架分发您的脚本

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T22:46:33.167

[Zend Engine](http://en.wikipedia.org/wiki/Zend_Engine)是 PHP的解释器，与 Zend Framework 无关。

Zend Framework 可能没有安装在您的服务器上，除非您自己安装了它。有关在何处以及如何安装 Zend Framework 的更多信息和说明，请参阅[快速入门。](http://framework.zend.com/manual/en/learning.quickstart.intro.html)

# c# - 32 位快速统一哈希函数。使用 MD5 / SHA1 并切断 4 个字节？

> ID：12272296
> 
> 赞同：3
> 
> 时间：2012-09-04T22:36:45.937
> 
> 标签：c#, .net

> **可能重复：**
> [短字符串（标签名称）的最佳 32 位哈希函数是什么？](https://stackoverflow.com/questions/2351087/what-is-the-best-32bit-hash-function-for-short-strings-tag-names)

我需要将许多字符串散列为 32 位（uint）。

我可以只使用 MD5 或 SHA1 并从中获取 4 个字节吗？还是有更好的选择？

不需要安全性或关心一个是否被破解等等。我只需要快速和统一地散列到 32 位。MD5 和 SHA1 应该是统一的。

但是我可以使用更好（更快）的替代方案吗？如果不是，您会使用两者中的哪一个？

这里有人问哪个更好，但不是替代品，还有一个安全问题（我不关心安全性）：
[How to Use SHA1 or MD5 in C#?（Which One is Better in Performance and Security for Authentication）](https://stackoverflow.com/questions/1756188/how-to-use-sha1-or-md5-in-cwhich-one-is-better-in-performance-and-security-fo?rq=1)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T23:23:24.437

你需要一个加密强度的哈希吗？如果您只需要 32 位，我敢打赌。

试试 Fowler-Noll-Vo 哈希。它速度快，具有良好的分布和雪崩效应，通常可以用于哈希表、校验和等：

```
 public static uint To32BitFnv1aHash(this string toHash, 
       bool separateUpperByte = false)
    {
        IEnumerable<byte> bytesToHash;

        if (separateUpperByte)
            bytesToHash = toHash.ToCharArray()
                .Select(c => new[] { (byte)((c - (byte)c) >> 8), (byte)c })
                .SelectMany(c => c);
        else
            bytesToHash = toHash.ToCharArray()
                .Select(Convert.ToByte);

        //this is the actual hash function; very simple
        uint hash = FnvConstants.FnvOffset32;

        foreach (var chunk in bytesToHash)
        {
            hash ^= chunk;
            hash *= FnvConstants.FnvPrime32;
        }

        return hash;
    }

public static class FnvConstants
{
    public static readonly uint FnvPrime32 = 16777619;
    public static readonly ulong FnvPrime64 = 1099511628211;
    public static readonly uint FnvOffset32 = 2166136261;
    public static readonly ulong FnvOffset64 = 14695981039346656037;
} 
```

这对于基于每个对象的字符串摘要（自定义 ToString() 或其他）为 GetHashCode 创建语义上等价的哈希非常有用。您可以重载它以`IEnumerable<byte>`使其适合校验和流数据等。如果您需要 64 位哈希 (ulong)，只需复制函数并将使用的常量替换为 64 位常量。哦，还有一件事；哈希（和大多数人一样）依赖于未经检查的整数溢出；永远不要在“已检查”块中运行此哈希，否则几乎可以保证抛出异常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T22:41:36.157

如果安全性不起作用，则使用加密散列函数（例如 MD5 或 SHA1）生成散列并从中获取 4 个字节是可行的。但它们比各种非加密哈希函数慢，因为这些函数主要是为安全而设计的，而不是速度。

查看非加密哈希函数，例如[FNV](http://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function)或[Murmur](http://en.wikipedia.org/wiki/MurmurHash)。

*   ~~非加密哈希函数 Zoo~~
    *   ~~性能图~~
*   [MurMurHash3，一种用于 C# / .NET 的超快速哈希算法](http://blog.teamleadnet.com/2012/08/murmurhash3-ultra-fast-hash-algorithm.html)

**编辑：** floodyberry.com 域现在由域停放服务注册 - 删除了死链接

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T23:14:21.003

字符串最简单但又很好的算法如下：

```
int Hash(string s)
{
  int res = 0; 
  for(int i = 0; i < str.Length; i++)
  {
     res += (i * str[i]) % int.MaxValue;
  }
  return res;
} 
```

显然，这绝对不是一个安全的哈希算法，但它很快（非常快）返回 32 位，并且据我所知，它是统一的（我已经尝试过许多算法挑战，结果很好）。

不用于散列密码或任何敏感数据。

# ios - iOS：将 Admob 广告添加到应用程序中会出现错误

> ID：12272298
> 
> 赞同：1
> 
> 时间：2012-09-04T22:36:55.520
> 
> 标签：ios, admob

我的应用程序在模拟器和物理设备上都成功运行。[但是，按照此视频中](http://www.youtube.com/watch?v=1bFU46D-4t8)的说明将 AdMob 添加到我的应用程序后，应用程序在构建时出现错误。我已经尝试了几个小时来寻找解决此错误的方法，但找不到。你对此有什么建议吗？谢谢

```
ld: duplicate symbol _OBJC_CLASS_$_AppDelegate in /Users/joe/Library/Developer/Xcode/DerivedData/playSound-dxljeytitbiylehchltjsxksklbh/Build/Intermediates/playSound.build/Debug-iphoneos/playSound.build/Objects-normal/armv7/AppDelegate-B7F42A95B6FCD25F.o and /Users/joe/Library/Developer/Xcode/DerivedData/playSound-dxljeytitbiylehchltjsxksklbh/Build/Intermediates/playSound.build/Debug-iphoneos/playSound.build/Objects-normal/armv7/AppDelegate-B9769CE7F9C30755.o for architecture armv7
Command /Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/clang failed with exit code 1 
```

**更新：**

即使我没有修改我的应用程序中的任何代码，只需在我的项目资源管理器中添加“GoogleAdMobAdsSdkiOS-6.1.4”的所有文件夹，就像视频中一样，它会立即产生错误。我正在使用 xCode 4.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T18:10:47.643

这可能是因为 6.1.4 还附带了一个 Google Analytics xcode 项目。尝试确保从项目中引用的“附加组件”文件夹下删除所有内容（除非您正在使用它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T01:45:51.317

`AppDelegate`您在 下有多个条目`Targets-Compiled Sources`。检查它并确保只有一个在`Compiled Sources`.

# php - 如何构建一个离线工作的 php mysql 应用程序

> ID：12272302
> 
> 赞同：11
> 
> 时间：2012-09-04T22:37:10.293
> 
> 标签：php, mysql, offline

我有一个将数据在线存储在 MySQL 数据库中的 Web 应用程序。它还使用 PHP 代码检索数据，在服务器上执行计算并将结果发送回用户。

数据非常简单：名称、描述、价格、增值税、从数据库中读取并在服务器端进行操作的每小时费用。

客户通常在互联网连接较差或不可用的环境中工作。在这种情况下，我希望客户能够离线工作：输入新名称、描述、价格并使用最后的增值税进行计算。然后在连接可用时立即同步所有数据。

现在的问题是我不知道实现这一目标的最佳方式或技术是什么。别担心，我不是要求为我编写代码。您能否向我解释一下构建这样一个系统的正确方法是什么？

有没有一种简单的方法可以在本地使用我的在线 MySQL 和 PHP 代码？

我是否应该将所需的数据保存在本地文件中，在 JavaScript 中重建计算，在本地执行它们，然后在数据库可用时同步数据。

我应该使用两个 MySQL 数据库，一个本地数据库，一个在线数据库，并在数据可用时在两者之间进行同步？如果是，我应该使用哪种技术（语言）来执行此操作？

如果可能的话，我想从过去从事类似项目的 PHP 编码员那里得到答案，并且可以给我有关框架结构和要使用的技术的详细信息。请记住，我是这种编写应用程序的新手，如果您能抽出几分钟时间向我解释一切，就像我六岁或愚蠢（我就是！）

我非常感谢任何帮助和建议。

再见，

多纳托

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T22:57:39.400

基本上有3种方法：

**版本 1：“老派”：PHP-Gtk+ 和 bcompiler**

*   首先，如果您还没有这样做，您需要将业务逻辑与表示层（HTML、模板引擎等）和数据库层分开
*   然后调整您的数据库层，以便它可以使用备用数据库（想到本地 SQlite）并在再次联机时执行同步
*   最后使用 PHP-Gtk+ 创建一个新的 UI 并用 bcompiler 打包所有这些

**版本 2：“标准”：随身携带服务器**

*   看看 Server2Go、WampOnCD 和朋友们创建一个“可双击的网络服务器”（从[Z-WAMP](http://zwamp.sourceforge.net/)开始）
*   您仍然需要像版本 1 一样调整您的 DB 层

**版本 3：“Web 2.x”：将应用程序从服务器移动到浏览器**

*   将您的应用程序逻辑从服务器端 (PHP) 移动到客户端 (JS)
*   使您的服务器部分 (PHP) 仅作为数据访问或同步层
*   如果您处于离线状态，请使用 HTML5 离线功能将您的数据访问替换为本地数据，并在在线时重新同步

**哪个最好？**

这取决于你有什么和你想要什么。如果您的大部分业务逻辑都在 PHP 中，那么将其移入浏览器可能会非常昂贵 - 请注意，这也会产生全新的安全噩梦。我个人不建议以这种方式**移植**，但如果后备数据库不太大，我建议将其用于新应用程序。

如果您选择保留您的 PHP 业务逻辑，那么 1 和 2 之间的决定通常是您的应用程序有多少 UI 的问题 - 如果它只有几个 CRUD 表单，1\. 可能是个好主意 - 它绝对是最便携（在随身携带的意义上）。如果没有，请选择 2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T22:56:03.343

我曾为船舶使用过类似的系统。互联网在海洋中很昂贵，因此他们安装了本地 Web 服务器，并通过电子邮件进行数据库同步。

我们还创建了简单的 .exe 包，让没有经验的人可以安装系统或更新系统...

# javascript - 通过 Chrome 扩展返回文档内的所有属性名称？

> ID：12272306
> 
> 赞同：1
> 
> 时间：2012-09-04T22:37:27.140
> 
> 标签：javascript, html, google-chrome-extension, getelementsbyclassname, roblox

我正在为一个名为**[Roblox](http://www.roblox.com/)**的网站开发 Chrome 扩展程序。

论坛有很多优点，也有一些缺点。该站点还有其他 Chrome 扩展程序，但它们似乎无法满足我的需求。

这是我第一次遇到制作合法的 Chrome 扩展程序，所以我继续阅读了整个 wiki。

但是当我测试我的代码时它不起作用。这有点奇怪，因为错误日志没有显示任何错误或`console.log()`行。

我做错了什么？

清单.json：

```
{
    "name": "Roblox ID Display", 
    "version": "1.0", 
    "manifest_version": 2, 
    "description": "Roblox ID Display displays the ID of forum posts.",
    "browser_action": { 
        "default_icon": "icon.png"
    }, 
    "permissions": [
        "http://www.roblox.com/" 
    ],
    "content_scripts": [
        {
            "matches": ["http://www.roblox.com/Forum/ShowPost.aspx"],
            "js": ["content.js"]
        }
    ]
} 
```

内容.js：

```
var elements = Array.filter(document.getElementsByTagName('a'), function(elem){
    n = elem.getAttribute("name");
    x = n.replace([0-9]i, ""); 
    console.log(n); 
    console.log(x); 
    console.log(x == n); 
    return x == n;
});
var names = []; 
for (var i = 0; i < elements.length; i++) {
    console.log(elements[i]); 
    names.push(elements[i].getAttribute("name")); 
}
for (var i = 0; i < names.length; i++) { 
    console.log(names[i]); 
} 
```

# .net - 一个项目中的故事板和垂直进度条

> ID：12272311
> 
> 赞同：2
> 
> 时间：2012-09-04T22:38:18.233
> 
> 标签：.net, wpf, progress-bar

我有一个同时使用垂直进度条和动画对象的项目。

问题：以我想要的方式制作动画（同时改变宽度和高度）在 .NET Framework 4 中不起作用，但在 3.5 中会起作用。然而，我的垂直进度条将在 Framework 4 中有效，但在 3.5 中无效。

我要问的是，通过查看这两个代码部分，你们中的任何人是否可以建议一种解决方法，通过以不同的方式对任一操作进行编码以在任一/任何 .NET Framework 中工作。

首先，这是我的垂直进度条 XAML。

```
<ControlTemplate TargetType="ProgressBar" x:Key="ProgressBarWin">
        <Border
                        x:Name="Root"
                        BorderBrush="#BBC6C4"
                        BorderThickness="1" 
                        Padding="1">
            <Grid x:Name="PART_Track">
                <Rectangle
                        x:Name="PART_Indicator"
                        Fill="#6cd133"
                        RadiusX="5"
                        RadiusY="5"
                        HorizontalAlignment="Left" />
            </Grid>
        </Border>

        <ControlTemplate.Triggers>
                        <Trigger Property="Orientation" Value="Vertical">
                            <Setter TargetName="Root" Property="LayoutTransform">
                                <Setter.Value>
                                    <RotateTransform Angle="270" />
                                </Setter.Value>
                            </Setter>

                            <Setter TargetName="Root" Property="Width"
                Value="{Binding RelativeSource={RelativeSource TemplatedParent}, 
Path=Height}"/>
                            <Setter TargetName="Root" Property="Height"
                Value="{Binding RelativeSource={RelativeSource TemplatedParent}, 
Path=Width}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate> 
```

现在，这是我在 XAML 中打开窗口的故事板。

```
<Window.Triggers>
    <EventTrigger RoutedEvent="Window.Loaded">
        <BeginStoryboard>
        <Storyboard>
                <DoubleAnimation Storyboard.TargetProperty="(Window.Height)" 
From="0" To="300" BeginTime="0:0:0" Duration="0:0:2"/>
                <DoubleAnimation Storyboard.TargetProperty="(Window.Width)" 
From="0" To="300" BeginTime="0:0:0" Duration="0:0:2"/>
            </Storyboard>
        </BeginStoryboard>
    </EventTrigger>
</Window.Triggers> 
```

# javascript - 如何定义将组件添加到 DataItem 的顺序

> ID：12272313
> 
> 赞同：3
> 
> 时间：2012-09-04T22:38:21.490
> 
> 标签：javascript, sencha-touch-2

我已经阅读了有关为 Store 中的每个元素创建自定义组件的[教程。](http://docs.sencha.com/touch/2-0/#!/guide/dataview)`DataView`它说关于将记录字段映射到 中的组件`DataItem`，但我的问题是如何定义将组件添加到的顺序`DataItem`。

例如，我有这样的 DataItem：

```
Ext.define('demo.view.CottageItem', {
    extend: 'Ext.dataview.component.DataItem',
    requires: ['Ext.Label', 'Ext.Array', 'Ext.Img'],
    xtype: 'listitem',

    config: {
        layout: {
            type: 'hbox',
            align: 'center',
            pack: 'start',
        },
        title: {
            flex: 1
        },
        photo: {
            width: '140px',
            height: '140px'
        },

        dataMap: {
            getTitle: {
                setHtml: 'title'
            },
            getPhoto: {
                setSrc: 'photo'
            }
        },
        styleHtmlContent: true
    },

    applyTitle: function(config) {
        return Ext.factory(config, Ext.Label, this.getTitle());
    },

    updateTitle: function(newTitle, oldTitle) {
        if (oldTitle) {
            this.remove(oldTitle);
        }

        if (newTitle) {
            this.add(newTitle);
        }
    },

    applyPhoto: function(config) {
        return Ext.factory(config, Ext.Img, this.getPhoto());
    },

    updatePhoto: function(newImage, oldImage) {
        if (oldImage) {
            this.remove(oldImage);
        }

        if (newImage) {
            this.add(newImage);
        }
    },
}); 
```

它有 layout type `hbox`，所以我想先添加照片然后添加标题。因此，该标题将位于照片的右侧。我怎样才能做到这一点？

另一个问题是，有没有办法在这个里面添加另一个容器`DataItem`，可以在其中插入我的标签和图像？

**更新：** 现在我的布局如下所示：

|标签(标题)| |图片(照片)|

我希望它看起来像这样：

|图片(照片)| |标签(标题)|

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T19:19:59.440

最后我明白了如何解决我的问题，这是我的代码：

```
Ext.define('demo.view.CottageItem', {
    extend: 'Ext.dataview.component.DataItem',
    requires: ['Ext.Label', 'Ext.Array', 'Ext.Img'],
    xtype: 'listitem',

    config: {
        layout: {
            type: 'hbox',
            align: 'center',
            pack: 'start',
        },
        title: {
            style: {
                'font-weight': 'bold'
            }
        },
        photo: {
            width: '140px',
            height: '140px'
        },
        desc: {},

        dataMap: {
            getTitle: {
                setHtml: 'title'
            },
            getPhoto: {
                setSrc: 'photo'
            },
            getDesc: {
                setHtml: 'desc'
            },
        },
        styleHtmlContent: true,
        items: [
            {
                xtype: 'panel',
                itemId: 'photoContainer',
            },
            {
                xtype: 'panel',
                layout: {
                    type: 'vbox'
                },
                itemId: 'textContainer',
                flex: 1,
            }
        ],
    },

    applyTitle: function(config) {
        return Ext.factory(config, Ext.Label, this.getTitle());
    },

    updateTitle: function(newTitle, oldTitle) {
        if (oldTitle) {
            this.getComponent('textContainer').remove(oldTitle);
        }

        if (newTitle) {
            this.getComponent('textContainer').add(newTitle);
        }
    },

    applyPhoto: function(config) {
        return Ext.factory(config, Ext.Img, this.getPhoto());
    },

    updatePhoto: function(newImage, oldImage) {
        if (oldImage) {
            this.getComponent('photoContainer').remove(oldImage);
        }

        if (newImage) {
            this.getComponent('photoContainer').add(newImage);
        }
    },

    applyDesc: function(config) {
        return Ext.factory(config, Ext.Label, this.getDesc());
    },

    updateDesc: function(newDesc, oldDesc) {
        if (oldDesc) {
            this.getComponent('textContainer').remove(oldDesc);
        }

        if (newDesc) {
            this.getComponent('textContainer').add(newDesc);
        }
    },
}); 
```

我没有将组件添加到根目录，而是在`DataItem`. 我使用`getComponent`方法访问它们并将我的组件添加到所需的位置。这里唯一的问题是添加到的项目的顺序`textContainer`是未定义的，但在我的情况下，我得到了想要的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T23:02:41.350

更改后端存储的排序顺序？我不确定基于组件的 DataView，但基于元素的匹配存储排序。

要正确设置（或更改）排序，您必须阅读 Store 的[config sorters](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Store-cfg-sorters)属性或[排序](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Store-method-sort)函数

干杯，奥列格

# ruby - Ruby TCPServer：接受已知的套接字

> ID：12272317
> 
> 赞同：4
> 
> 时间：2012-09-04T22:39:09.063
> 
> 标签：ruby, sockets, ruby-1.9

我有一种情况，我的服务器可能会关闭`TCPServer`并重新启动，将所有用户保存到一个文件中，然后立即重新加载它们；他们的连接不会断开。

问题是我似乎无法重新初始化他们的流。

当我们重新启动（并尝试保持连接）时，我重新初始化 TCPServer，并加载我的已连接用户数组 -*因为这些每个都有一个现有的套接字地址，存储为`<TCPSocket:0x00000000000000>`，我可以用 TCPServer 重新初始化这些地址吗？*

通常，每个用户都连接并被接受：

```
$nCS = TCPServer.new(HOST, PORT)

begin
  while socket = $nCS.accept
    Thread.new( socket ) do |sock|
      begin
        d = User.new(sock)
        while sock.gets
          szIn = $_.chomp
          DBG( "Received '" + szIn + "' from Client " + sock.to_s )
          d.parseInput( szIn )
        end
      rescue => e
        $stdout.puts "ERROR: Caught error in Client Thread: #{e} \r\n #{e.backtrace.to_s.gsub(",", ",\r\n")}"
        sock.write("Sorry, an error has occurred, and you have been disconnected."+EOL+"Please try again later."+EOL)
        d.closeConnection
      end
    end
  end
rescue => e
  $stdout.puts "ERROR: Caught error in Server Thread: #{e} \r\n #{e.backtrace.to_s.gsub(",", ",\r\n")}"
  exit
end 
```

为了给它一个热重启的命令，我们`exec('./main --copyover')`用来标记正在发生复制。

如果`$connected`包含所有用户的数组，并且每个用户都有一个套接字，我如何重新初始化在重新启动之前打开的套接字（假设另一端仍然连接）？

我怀疑 using`exec("./main", "--copyover", *$nCS, *$connected)`让我更接近，因为这只是替换了进程，并且应该维护文件（而不是关闭它们）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:52:31.210

你不能。套接字仅在进程的生命周期内有效：当进程退出时它被操作系统关闭。这反过来又使连接无效，因此另一端仍未连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:49:42.300

## 如何在 Ruby 中热重启 TCPServer

热重启（又名复制）是管理员可以在不丢失客户端连接的情况下重新加载应用程序（以及自上次启动以来所做的任何新更改）的过程。这对于管理客户期望很有用，因为应用程序在使用时不需要遭受严重的停机和中断。

我在下面提出的建议可能不是最佳实践，但它正在发挥作用，并且可能会引导其他人采用类似的解决方案。

***命令***

我使用一种特殊的编码风格，利用命令表来查找函数及其可访问性。所有命令函数都以`cmd`. 我将清理杂项以提高可读性：

```
def cmdCopyover
  #$nCS is the TCPServer object
  #$connected holds an array of all users sockets
  #--copyover flags that this is a hot reboot.
  connected_args = $connected.map do |sock|
    sock.close_on_exec = false if sock.respond_to?(:close_on_exec=)
    sock.fileno.to_s
  end.join(",")
  exec('./main.rb', '--copyover', $nCS.fileno.to_s, connected_args)
end 
```

我们传递的是字符串；`$nCS.fileno.to_s`为我们提供主 TCPServer 对象的文件描述符，同时`connected_args`是每个连接的用户的文件描述符的逗号分隔列表。当我们重新启动时，`ARGV`将是一个包含每个参数的数组：

*   `ARGV[0] == "--copyover"`
*   `ARGV[1] == "5"`（或者无论 TCPServer 的文件描述符是什么）
*   `ARGV[2] == "6,7,8,9"`（例如，假设有 4 个连接的用户）

***当您期待时会期待什么（复制）***

在正常情况下，我们可能有一个基本服务器（`main.rb`看起来像这样：

```
puts "Starting Server"
$connected = Array.new
$nCS = TCPServer.new("127.0.0.1",9999)

begin
  while socket = $nCS.accept
    # NB: Move this loop to its own function, threadLoop()
    Thread.new( socket ) do |sock|
      begin
        while sock.gets
          szIn = $_.chomp
          #do something with input.
        end
      rescue => e
        puts "ERROR: Caught error in Client Thread: #{e}"
        puts #{e.backtrace.to_s.gsub(",", ",\r\n")}"
        sock.write("Sorry, an error has occurred, and you have been disconnected."+EOL+"Please try again later."+EOL)
        sock.close
      end
    end
  end
rescue => e
  puts "Error: Caught Error in Server Thread: #{e}"
  puts "#{e.backtrace.to_s.gsub(",", ",\r\n")}"
  exit
end 
```

我们想将该主循环移动到它自己的函数中以使其可访问——我们重新连接的用户将需要重新插入循环中。

因此，让我们`main.rb`准备好接受热重启：

```
def threadLoop( socket )
  Thread.new( socket ) do |sock|
    begin
      while sock.gets
        szIn = $_.chomp
        #do something with input.
      end
    rescue => e
      puts "ERROR: Caught error in Client Thread: #{e}"
      puts #{e.backtrace.to_s.gsub(",", ",\r\n")}"
      sock.write("Sorry, an error has occurred, and you have been disconnected."+EOL+"Please try again later."+EOL)
      sock.close
    end
  end
end

puts "Starting Server"
$connected = Array.new
if ARGV[0] == '--copyover'
  $nCS = TCPServer.for_fd( ARGV[1].to_i )
  $nCS.close_on_exec = false if $nCS.respond_to?(:close_on_exec=)
  connected_args = ARGV[2]
  connected_args.split(/,/).map do |sockfd|
  $connected << sockfd

  $connected.each {|c| threadLoop( c ) }
else
  $nCS = TCPServer.new("127.0.0.1",9999)
  $nCS.close_on_exec = false if $nCS.respond_to?(:close_on_exec=)
end

begin
  while socket = $nCS.accept
    threadLoop( socket )
  end
rescue => e
  puts "Error: Caught Error in Server Thread: #{e}"
  puts "#{e.backtrace.to_s.gsub(",", ",\r\n")}"
  exit
end 
```

## 警告

我的实际使用要复杂得多，所以我尽力去除所有垃圾；然而，当我在这里结束时，我意识到你可能没有这样做`$connected`（它对我来说是一个更大系统的一部分）。可能有一些错误，所以如果你发现它们请评论，我会更正。

希望这对找到它的人有所帮助。

# expression-blend - MS Expression Blend 4 免费版 Windows Phone 教程或示例

> ID：12272318
> 
> 赞同：0
> 
> 时间：2012-09-04T22:39:09.227
> 
> 标签：expression-blend

我正在使用来自 Windows Phone SKD7.1 的 MS Expression Blend 4 for Windows Phone 免费版。我在网上搜索以了解如何使用该软件。但是，我总是得到 MS Expression Blend 项目或示例，MS Expression Blend 4 for Windows Phone 无法支持它。有人知道仅适用于 Windows Phone 的 MS Expression Blend 4 的示例或教程吗？目前，我想为按钮的按下状态创建一个模板。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:07:24.313

只需通过下面给出的链接：

[http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/tags/WindowsPhone/default.aspx](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/tags/WindowsPhone/default.aspx)

# jquery - jQuery .live 有时只能工作

> ID：12272319
> 
> 赞同：0
> 
> 时间：2012-09-04T22:39:15.553
> 
> 标签：jquery

我有一个文本框和一个 DropDownList。DropDownList 是根据文本框中的输入填充的。我遇到了一些问题，DropDownList 没有正确填充。

一种是当我在文本框中输入一些内容时，我可以选择 DropDownList 并正确填充它。但是，如果我决定要更改文本框中的内容并在其中键入其他内容，然后尝试再次使用 Tab 键切换到 DropDownList，它不会更新。

另一个问题是，当我开始在文本框中输入内容时，我会弹出一个自动完成列表，我可以单击一个选项让它为我填充文本框，但是当我这样做时，DropDownList 没有被填充。

这是我必须填充 DropDownList 的 javascript。

```
$('#textFrame').live('change', function (event) {
    $.ajax({
        type: 'POST',
        url: '@Url.Action("GetDirectors", "HostScan")',
        data: { frame: $(this).val() },
        success: function (data) {
            var markup = '';
            for (var x = 0; x < data.length; x++) {
                markup += '<option value="' + data[x].Value + '">' + data[x].Text + '</option>';
            }
            $('#DirectorList').html(markup).show();
        }
    }); 
```

});

我应该改变什么才能使这项工作？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:49:03.590

首先是 .live 从 jQuery 1.7.0 开始被弃用。尝试使用 .on 代替。

其次使用 google cdn 托管的 jQuery 文件。这将有助于减少您网站的带宽。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 
```

至于代码，请在附加新值之前尝试清除选项。这可确保您不会在以前的选项中添加新选项。

```
$(function(){

    $('#textFrame').on('change', function () {
        $.ajax({
            type: 'POST',
            url: '@Url.Action("GetDirectors", "HostScan")',
            data: { frame: $(this).val() },
            success: function (data) {
                if(data != null){
                var markup = '';
                $('#DirectorList').find('option').remove();
                    for (var x = 0; x < data.length; x++) {
                        markup += '<option value="' + data[x].Value + '">' + data[x].Text + '</option>';
                    }
                $('#DirectorList').append(markup).show();
                }
            }
        });
    });
}); 
```

# apache - Mod_rewrite 不能在 Ubuntu 服务器上运行（虽然可以在本地运行）

> ID：12272328
> 
> 赞同：1
> 
> 时间：2012-09-04T22:40:17.090
> 
> 标签：apache, .htaccess, mod-rewrite, ubuntu, wamp

我的本地环境运行良好。在 .htaccess 中粘贴了一条测试路线，它按预期工作（将我重新路由到谷歌）。

```
RewriteEngine on
RewriteRule testpage\.html http://www.google.com [R] 
```

我在我的开发服务器（Unbutu 12.04）上粘贴了同样的东西，它只是给了我一个 Not Found 页面。当我通过运行在开发服务器上验证它时：

```
sudo a2enmod rewrite 
```

它说“模块重写已启用”。

编辑：它也出现在 phpinfo() 的“加载模块”部分中，自从安装 apache 服务器以来，我已经多次重新启动它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T22:47:44.963

很可能是因为 mod_rewrite 已启用，但 .htaccess 文件已通过以下方式禁用

```
AllowOverride None 
```

禁用检查 .htaccess 文件（这会给你一些性能提升，但你必须将你的 mod_rewrite 代码直接放在 apache 配置文件中）

将您的虚拟主机更改为：

```
AllowOverride All 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-26T08:43:02.707

对于不明白的人 - [http://victorpotapov.ru/blog/vkljuchaem_mod_rewrite_v_apache/2013-11-03-61](http://victorpotapov.ru/blog/vkljuchaem_mod_rewrite_v_apache/2013-11-03-61)

在此页面上，您可以逐步看到您在 ubuntu 上的终端中输入

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-14T16:29:10.987

**启用 mod_rewrite**

激活 mod_rewrite 模块

> sudo a2enmod 重写

并重新启动apache

> sudo 服务 apache2 重启

编辑虚拟主机以在 .htaccess 中使用 mod rewrite

> 须藤纳米/etc/apache2/sites-available/000-default.conf

搜索“DocumentRoot /var/www/html”并添加以下行

```
<Directory "/var/www/html">
AllowOverride All
</Directory> 
```

保存并退出 CTRL-X、“Y”并回车

重启阿帕奇

> sudo 服务 apache2 重启

# msmq - 将消息发送到我机器上的消息队列.....错误“无效的队列路径名”

> ID：12272330
> 
> 赞同：11
> 
> 时间：2012-09-04T22:40:18.263
> 
> 标签：msmq, message-queue

我正在向运行 Windows Server 2008 R2 的机器上创建的非常标准的消息队列发送消息。

```
QueueName:
directionsTest
MachineName:
usernameDev 
```

当我尝试将消息发送到队列时，我收到了错误。：

> 队列路径名无效。

我感到困惑的是，我实际上是通过 SSMS 查询窗口发送此消息，我们有将这些消息发送到队列的存储过程，我们只提供机器名称、队列名称和消息。所以，这基本上是一个我用过很多次的保存查询，事实上我在上周末使用了这个完全相同的查询。从那以后我没有改变查询/我的机器/队列/并且创建和发送这些消息的存储过程没有改变。所以，我不确定为什么这会给我这个错误。

我已经尝试了几乎所有的事情，我尝试在我的计算机上创建新队列并收到相同的错误。我还确保每个人都可以访问这些队列。关于什么会导致此错误弹出的任何想法？我已经搜索了网络，但没有发现任何可能导致此问题的线索。（**我还测试了发送到不同服务器上的队列，这可以正常工作）

感谢您提前提供任何建议/指导。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-10T07:31:02.890

检查队列名称格式的拼写。

如果你使用类似的东西

```
YOURMACHINENAME\private$\YourQueueName 
```

你应该试试这个：

```
FormatName:DIRECT=OS:YOURMACHINENAME\private$\YourQueueName 
```

请注意，第一部分可能区分大小写。

# php - 如何获取每个用户的所有帖子？

> ID：12272334
> 
> 赞同：1
> 
> 时间：2012-09-04T22:40:39.197
> 
> 标签：php, mysql, sql, join, count

我有一个`users`包含每个用户信息的表格。然后是包含`posts`文章信息的表格`user_posts`，最后是包含以下列的表格：

```
user_id
post_id
... 
```

我正在尝试获取帖子数量最多的用户图表。我做了这个查询：

> SELECT u.id as uid, u.name as uname, count(up.id) as up_count FROM users as u JOIN user_posts as up ON up.user_id = u.id ORDER BY vcount DESC LIMIT 25

这个查询只返回一个用户和表中所有行的总数`user_posts`。

我究竟做错了什么？我需要按发布每个用户的文章数排序 25 个用户的列表。

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T22:42:38.050

您的查询需要有`GROUP BY`子句，因为您使用了`COUNT()`函数。

```
SELECT   u.id as uid, 
         u.name as uname, 
         count(up.id) as up_count 
FROM     users as u 
           LEFT JOIN user_posts as up  
              ON up.user_id = u.id 
GROUP BY u.id, u.name
ORDER BY up_count DESC LIMIT 25 
```

您必须将它们分组，`ID`否则您将对所有记录进行单一的总计数结果。还有一件事，使用`LEFT JOIN`这样即使没有帖子的用户仍然会在你的结果中可见，分数为`0`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T22:42:23.367

```
SELECT 
    u.id as uid, u.name as uname, count(up.id) as up_count 
FROM users as u 
    JOIN user_posts as up ON up.user_id = u.id 
GROUP BY 
    u.id, u.name
ORDER BY 
    vcount 
DESC LIMIT 25 
```

# ruby-on-rails - 通过id而不是查找添加rails关系？

> ID：12272336
> 
> 赞同：0
> 
> 时间：2012-09-04T22:40:53.503
> 
> 标签：ruby-on-rails, activerecord, orm

目前，我有一些代码可以为一个看起来像这样的游戏生成一组集换式卡牌；

```
class Pack < ActiveRecord::Base
  belongs_to :user
  belongs_to :release
  has_and_belongs_to_many :cards

  after_create :fill_pack

  private

  # Randomly generate pack contents
  def fill_pack
    ids = self.release.cards.pluck(:id)
    (15).times do |i|
      self.cards << Card.find(ids[rand(ids.length)])
    end
  end
end 
```

与我有关的特定部分是`self.cards << Card.find(ids[rand(ids.length)])`. 那就是进行 15 次 SELECT 查询！这可能是个坏主意。;)

我已经有了一个以前用 pluck 抓取的 id 列表。一定有某种方法可以让我使用它们，对吧？我曾尝试过`self.cards.create :card_id => ids[rand(ids.length)]`，但 self.cards.create 用于创建新卡，而不是新参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T22:45:09.247

为什么不使用`in`（未经测试但接近）：

```
self.cards = Card.where('id in (?)', ids.sample(15)) 
```

或者直接设置 ID：

```
self.card_ids = ids.sample(15) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T22:48:00.797

`card_ids`您可以通过使用添加到您的`Pack`类的参数来执行此操作，而无需查找模型`has_and_belongs_to_many`，如下所示：

```
self.card_ids << ids[rand(ids.length)] 
```

设置后`card_ids`，`self.cards`将是映射到这些 ID 的所有卡片。

# c# - 新的 UTF8Encoding(false) 仍在写 utf8 BOM

> ID：12272338
> 
> 赞同：3
> 
> 时间：2012-09-04T22:40:59.073
> 
> 标签：c#, xml, utf-8, byte-order-mark

我在我的代码中关闭了 BOM，它仍然在我的 xml 文档中打印它。我不明白。我已经查看了许多来源，但仍然一无所获，应该从

我的代码是这样的

```
XDocument xmlDoc = XDocument.Load(CompDir + File.Name);

AppendToFile(xmlDoc, aDataRow);

using (var writer = new XmlTextWriter
    (FilePrep.CompletedDirectory + File.Name, new UTF8Encoding(false))) 
    { 
    xmlDoc.Save(writer);
    writer.Close();
    }
break; 
```

并且附加到文件看起来像这样

```
private void AppendToFile(XDocument xmlDoc, DataRow aDataRow)
{
    //String StrName = aDataRow.ItemArray.GetValue(5).ToString() + ' ' + aDataRow.ItemArray.GetValue(6).ToString();

    try
    {
        XElement foundEl = xmlDoc.Descendants("CreditScoreInfo").First();
        foundEl.Add(new XElement("CreditScore", aDataRow.ItemArray.GetValue(2)),
                    new XElement("CreditScoreDt", aDataRow.ItemArray.GetValue(1)));
                    //,new XElement("ScoredName", StrName)); 
    }
    catch
    {
       XElement persPolicy = xmlDoc.Descendants("PersPolicy").First();
                persPolicy.Add(new XElement("CreditScoreInfo",
                    new XElement("CreditScore", aDataRow.ItemArray.GetValue(2)),
                    new XElement("CreditScoreDt", aDataRow.ItemArray.GetValue(1))));
                    //,new XElement("ScoredName", StrName)));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T23:59:16.400

你可以试试这个作为另一种方式：

```
XmlWriterSettings settings = new XmlWriterSettings();
settings.Encoding = new UTF8Encoding(false);

using (XmlWriter writer = XmlWriter.Create(FilePrep.CompletedDirectory + File.Name, settings))
{
    xmlDoc.Save(writer);
    writer.Close();
} 
```

*   [http://msdn.microsoft.com/en-us/library/bb336977.aspx](http://msdn.microsoft.com/en-us/library/bb336977.aspx)

# ldap - LDAP 因分段错误而未能“进行测试”

> ID：12272342
> 
> 赞同：0
> 
> 时间：2012-09-04T22:41:21.083
> 
> 标签：ldap, openldap

我正在尝试在虚拟主机上安装 LDAP。按照快速入门指南，我正在 CentOS 版本 5.6（最终版）上构建 openldap。在配置过程中，它抱怨我的 BerkleyDB。所以我构建了 Berkeley DB 4.8.3 并运行

```
env CPPFLAGS=-I/usr/local/BerkeleyDB.4.8/include LDFLAGS=-L/usr/local/BerkeleyDB.4.8/lib ./configure 
```

成功完成我失败的工作`make test`

```
>>>>> Starting test060-mt-hot for bdb...
running defines.sh
Running slapadd to build slapd database...
Running slapindex to index slapd database...
Starting slapd on TCP/IP port 9011...
      /var/www/vhosts/poooblic.com/ldap/openldap-2.4.32/tests/../servers/slapd/slapd -s0 -f /var/www/vhosts/poooblic.com/ldap/openldap-2.4.32/tests/testrun/slapd.1.conf -h ldap://localhost:9011/ -
Testing basic monitor search...
Monitor searches
Testing basic mt-hot search: 1 threads (1 x 50000) loops...
./progs/slapd-mtread -H ldap://localhost:9011/ -D cn=Manager,dc=example,dc=com -w secret -e cn=Monitor -m 1 -L 1 -l 50000
Testing basic mt-hot search: 5 threads (1 x 10000) loops...
./progs/slapd-mtread -H ldap://localhost:9011/ -D cn=Manager,dc=example,dc=com -w secret -e cn=Monitor -m 5 -L 1 -l 10000
Testing basic mt-hot search: 100 threads (5 x 100) loops...
./progs/slapd-mtread -H ldap://localhost:9011/ -D cn=Manager,dc=example,dc=com -w secret -e cn=Monitor -m 100 -L 5 -l 100 
Random searches
Testing random mt-hot search: 1 threads (1 x 50000) loops...
./progs/slapd-mtread -H ldap://localhost:9011/ -D cn=Manager,dc=example,dc=com -w secret -e dc=example,dc=com -f (objectclass=*) -m 1 -L 1 -l 50000
Testing random mt-hot search: 5 threads (1 x 10000) loops...
./progs/slapd-mtread -H ldap://localhost:9011/ -D cn=Manager,dc=example,dc=com -w secret -e dc=example,dc=com -f (objectclass=*) -m 5 -L 1 -l 10000
Testing random mt-hot search: 100 threads (5 x 100) loops...
./progs/slapd-mtread -H ldap://localhost:9011/ -D cn=Manager,dc=example,dc=com -w secret -e dc=example,dc=com -f (objectclass=*) -m 100 -L 5 -l 100 
./scripts/test060-mt-hot: line 190: 15747 Segmentation fault      $SLAPDMTREAD -H $URI1 -D "$MANAGERDN" -w $PASSWD -e "$BASEDN" -f "(objectclass=*)" -m $THR -L $OUTER -l $INNER >> $MTREADOUT 2>&1
slapd-mtread failed (139)!
>>>>> test060-mt-hot failed for bdb 
(exit 139)
make[2]: *** [bdb-yes] Error 139 
make[2]: Leaving directory `/var/www/vhosts/poooblic.com/ldap/openldap-2.4.32/tests'
make[1]: *** [test] Error 2
make[1]: Leaving directory `/var/www/vhosts/poooblic.com/ldap/openldap-2.4.32/tests'
make: *** [test] Error 2 
```

我不是系统管理员，也没有完全概念化构建过程。我可以阅读哪些文档来帮助我理解它失败的原因以及我可以做些什么来工作？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:35:25.693

请按照以下说明进行操作 - 如有任何问题，请反馈给我。

cd db-4.7.25.NC

```
cd build_unix/
   ../dist/configure
    make
   make install
  export CPPFLAGS="-I/usr/local/BerkeleyDB.4.7/include"
  export LDFLAGS="-L/usr/local/BerkeleyDB.4.7/lib"
  export LD_LIBRARY_PATH=/opt/db-4.7.25.NC/build_unix/.libs       ( change this path as per your)

  ./configure

   make depend
  make
  make test 
```

问候纳文

# php - pg_send_query_params 返回 TRUE 但失败

> ID：12272346
> 
> 赞同：0
> 
> 时间：2012-09-04T22:41:51.260
> 
> 标签：php, postgresql, postgis

我有一个 PHP 脚本，它在 Postgres DB 中插入一行。它在我的测试服务器（Postgres 9.1）上运行良好，但在我的新共享主机（Postgres 8.4）上失败。

```
$query = "INSERT INTO " . $table . " VALUES (DEFAULT, $1, $2, CURRENT_TIMESTAMP::TIMESTAMP(0), $3, $4, ST_Point($4, $3))";
$result = pg_send_query_params($dbconn, $query, array($is_happy, $rate, $lat, $lon)); 
```

`$result`始终为 TRUE，但不插入任何行。

我也试过：

```
$result = pg_get_result($dbconn); 
```

但经历了同样的行为。

按照下面@CraigRinger 的交易建议，我也尝试了这两种方法：

```
$query = "BEGIN;INSERT INTO " . $table . " VALUES (DEFAULT, $1, $2, CURRENT_TIMESTAMP::TIMESTAMP(0), $3, $4, ST_Point($4, $3));COMMIT;";
$result = pg_send_query_params($dbconn, $query, array($is_happy, $rate, $lat, $lon)); 
```

和

```
pg_send_query($dbconn, "BEGIN;");
$query = "INSERT INTO " . $table . " VALUES (DEFAULT, $1, $2, CURRENT_TIMESTAMP::TIMESTAMP(0), $3, $4, ST_Point($4, $3));";
$result = pg_send_query_params($dbconn, $query, array($is_happy, $rate, $lat, $lon));
pg_send_query($dbconn, "COMMIT;"); 
```

并且仍然有相同的行为。

如果我在 phpPgAdmin 中运行 INSERT 查询，则会插入一行。我还可以在 PHP 脚本中从此查询中获取结果：

```
"SELECT relid FROM pg_stat_user_tables" 
```

当 INSERT 查询结果为真但没有插入行时，这意味着什么？可能是什么问题，我该如何解决这个问题？

**编辑**

我可以`INSERT`使用 phpPgAdmin 行，然后使用`SELECT`PHP 脚本中的这些行。

这是一个失败的完整 PHP 脚本（它被剥夺了在我的完整脚本中存在的 POST 收集和验证）。该`rest.php`脚本仅包含连接变量和响应函数。该`rest.php`脚本适用于我的`SELECT`脚本：

```
<?php
require "KLogger.php";
require "rest.php";

ini_set("error_reporting", E_ALL ^ E_NOTICE);
ini_set("display_errors", 0);
ini_set("log_errors", 1);

$log   = KLogger::instance(dirname(__FILE__), KLogger::DEBUG);
$log_id = "AM".time();
$log->logInfo($log_id . " *** " . $_SERVER['REMOTE_ADDR']);

$lat = '51.510199';
$lon = '-0.129654';
$rate = '10';
$is_happy = 't';

$dbconn = pg_connect("host=" . $host . " dbname=" . $db . " user=" . $user . " password=" . $pw);
if(!$dbconn)
{
    $log->logInfo($log_id . " No connection: " . pg_last_error());
    sendResponse(500, "Internal Server Error");
}
else
{
    $query = "INSERT INTO " . $table . " VALUES (DEFAULT, $1, $2, CURRENT_TIMESTAMP::TIMESTAMP(0), $3, $4, ST_Point($4, $3));";
    $result = pg_send_query_params($dbconn, $query, array($is_happy, $rate, $lat, $lon));
    if(!$result)
    {
        $log->logInfo($log_id . " No Result: " . pg_last_error());
        sendResponse(500, "Internal Server Error");
    }
    else
    {
        $log->logInfo($log_id . " sendResponse(200)");
        sendResponse(200, "OK");
    }
}
pg_close($dbconn);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T22:53:48.620

此类问题的最常见原因是开放的、未提交的事务。

如果您`BEGIN`（或通过在数据库驱动程序中关闭自动提交来隐式地这样做）然后做一些工作，只有完成工作的事务才能看到更改，直到它结束`COMMIT`。

如果是这种情况，那么来自同一脚本中使用同一连接的立即后续查询将看到更改的行，但不会看到其他任何内容。

您还可以通过启用以下方式进行检查：

```
log_statement = 'all'
log_line_prefix = 'db=%d pid=%p vtxid=%v txid=%x' 
```

`vtxid`并通过查找具有 a`BEGIN`和不匹配的虚拟事务 ID ( ) 来查找不匹配的事务`COMMIT`。

如果您不能修改`postgresql.conf`，因为它是共享主机，您应该能够`ALTER USER myuser SET log_statement = 'all';`或`ALTER DATABASE mydatabase SET log_statement = 'all';`. 你不能在`log_line_prefix`外面设置，`postgresql.conf`但你的主人可能已经有了合理的设置。

* * *

另一种可能性 - 并且可能由版本差异解释 - 是您稍后通过使用仅在 9.1 中可用的功能在事务中触发错误，并且您没有检测到该错误。您之前的`INSERT`成功，但是当后面的语句失败时，整个事务就会回滚。再次检查服务器日志以查看。

* * *

另一个常见原因是您使用脚本连接到的数据库与您在测试是否插入时连接的数据库不同。在插入后尝试`SELECT`从脚本中插入您希望插入的行。还值得通过您的管理工具创建一个虚拟表（在您的情况下似乎是 phpPgAdmin），然后测试以查看脚本是否可以看到虚拟表。

# jquery - 在 pjax 容器加载时保留脚本

> ID：12272353
> 
> 赞同：2
> 
> 时间：2012-09-04T22:42:30.687
> 
> 标签：jquery, ajax, wordpress, pjax

我有第一次使用 pjax 的 wordpress 网站。我希望能够更新#main 容器，以及主容器外部的 div，我将其用于拉伸背景滑块。

背景滑块写入 html，以及为滑块分配设置的脚本标记。通过使用innerHTML（我选择它而不是jquery的html()来保留脚本），我能够将滑块的html移动到#main容器之外的适当位置。那时我注意到脚本标签似乎根本没有在 pjax 请求中返回。

是否有任何解决方法可以保留脚本标签，或者以某种方式在调用中检索它？在 pjax 加载后是否需要单独的 ajax 调用来获取我的脚本标签信息？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-11T21:14:50.147

这是一个很好的问题，也让我头疼了一段时间。

不幸的是，PJAX 不会导致页面重新解析或重新编译 JavaScript，尽管它会遍历新的 DOM 并注册新的事件处理程序。

这意味着，如果您在使用 PJAX 加载的内容中有 JavaScript 调用，则需要将它们调用的函数加载到原始文档中。

因此，您可以使用 onClick 加载图像以在灯箱中弹出更大的版本，但前提是您在加载原始页面时加载灯箱 JavaScript 函数。

非常简单的例子：

在原始 HTML 页面中：

```
<script type="text/javascript" src="lightbox.js" /> 
```

在 PJAX 加载的内容中：

```
<img src="small-image.jpg" onClick="javascript:show_lightbox('big0image.jpg');" /> 
```

但是，如果您在原始页面中没有脚本元素并尝试使用 PJAX 加载它，它将无法正常工作。

# python - 为什么“返回自我”返回无？

> ID：12272357
> 
> 赞同：1
> 
> 时间：2012-09-04T22:42:45.133
> 
> 标签：python, return-value

我正在尝试获取链的顶部节点`getTopParent()`。当我打印出来时`self.name`，它确实打印出父实例的名称；但是，当我返回时`self`，它返回无。为什么是这样？

```
class A:
    def __init__( self, name ):
        self.name = name
        self.owner = None
    def setChild( self, l ):
        l.owner = self
    def getTopParent( self ):
        if( self.owner == None ): # None == top parent
            print( "Got top: %s" % self.name )
            return self
        else:
            print( "checking %s" % self.name )
            self.owner.getTopParent()

a = A( "parent" )
b = A( "child1" )
c = A( "child2" )
d = A( "child3" )
a.setChild( b )
b.setChild( c )
c.setChild( d )

print( d.getTopParent() )
>>> checking child3
    checking child2
    checking child1
    Got top: parent
    None 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T22:43:52.763

你需要*回来* `self.owner.getTopParent()`！

在 Python 中，您必须实际使用`return`语句从函数中返回某些内容，否则`None`返回。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T22:44:52.787

用于`return`_

```
else:
    print( "checking %s" % self.name )
    return self.owner.getTopParent() 
```

和`None`默认返回值一样，然后它会输出：

```
checking child3
checking child2
checking child1
Got top: parent
<__main__.A instance at 0xb77a628c> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T23:40:41.423

我对您的代码做了一些细微的修改：

```
class A:
    def __init__( self, name ):
        self.name = name
        self.owner = None
    def setChild( self, l ):
        l.owner = self
    def getTopParent( self , depth=0):
        if( self.owner == None ): # None == top parent
            print( '  ' * depth + "Got top: %s" % self.name )
            print( '  ' * depth + "Returning: %s" % self)
            return self
        else:
            print( '  ' * depth + "checking %s" % self.name )
            tmp = self.owner.getTopParent(depth=depth + 1)
            print( '  ' * depth + "returned from call while checking %s" % self.name)
            print( '  ' * depth + "returned value was: %s" % tmp)

a = A( "parent" )
b = A( "child1" )
c = A( "child2" )
d = A( "child3" )
a.setChild( b )
b.setChild( c )
c.setChild( d )

d_top_parent = d.getTopParent()
print('----------------')
print d_top_parent 
```

现在您可以在调用 时看到发生了什么`d.getTopParent()`。这是输出：

```
checking child3
  checking child2
    checking child1
      Got top: parent
      Returning: <__main__.A instance at 0x0000000002DE8DC8>
    returned from call while checking child1
    returned value was: <__main__.A instance at 0x0000000002DE8DC8>
  returned from call while checking child2
  returned value was: None
returned from call while checking child3
returned value was: None
----------------
None 
```

在中间，您可以看到它找到了顶级父级并将其返回。但`return`返回到从 [1] 调用此函数的地方。所以这只返回到“检查child1”调用。

回到“检查 child1”调用中，它被称为`self.owner.getTopParent()`，它返回了最高父级。在您的原始版本中，此后没有更多代码，因此执行“从函数的末尾掉线”。在我的版本中，它将返回的值存储`self.owner.getTopParent()`到一个变量`tmp`中并打印出来，这样我们就可以看到它是什么。但随后它也会退出函数的末尾。

在 Python 中，到达函数的末尾相当于`return None`，所以这就是返回给“检查 child1”的调用者的内容。因此“检查 child2”调用获取`None`从`self.owner.getTopParent()`. 然后退出函数的末尾，返回`None`给它的调用者。 [2] 等等。

如果您添加`return tmp`到我的版本，在`else`分支中打印后，您会得到以下输出：

```
checking child3
  checking child2
    checking child1
      Got top: parent
      Returning: <__main__.A instance at 0x0000000002E68DC8>
    returned from call while checking child1
    returned value was: <__main__.A instance at 0x0000000002E68DC8>
  returned from call while checking child2
  returned value was: <__main__.A instance at 0x0000000002E68DC8>
returned from call while checking child3
returned value was: <__main__.A instance at 0x0000000002E68DC8>
----------------
<__main__.A instance at 0x0000000002E68DC8 
```

现在每个“检查 childN”调用都会从调用中接收一个值`self.owner.getTopParent()` **并将其返回**给下一个最外层的调用者。

如果你调用某个东西，并且你希望它的返回值去任何地方，你必须告诉它去哪里。这可以用赋值语句将它存储在某个地方，或者直接将它作为参数传递给另一个调用，或者直接返回它。如果您只是有这样的电话：

```
self.owner.getTopParent() 
```

然后返回的值无处可去，不能用于任何目的[3]。

您调用的函数恰好与您所在的函数同名这一事实无关紧要。递归调用的工作方式与非递归调用**完全相同。**我总是对很多人对递归的困惑感到惊讶，但这可能只是因为我不记得学习它是什么感觉了。:)

* * *

[1] 如果您考虑一下，`return` **必须**以这种方式工作。如果当它们返回时返回值一直跳到最外层的调用（如果您在交互式解释器中运行，则显示为输出），您如何编写一个调用其他函数的函数？

[2] 这与接收来自 的调用`None`无关。`None``self.owner.getTopParent()`

[3] 除非您直接在交互式解释器中输入，否则 Python 会为您打印返回值，以便您查看它是什么。它还秘密地将它保存在变量`_`中，所以如果你在看到它之后决定你确实需要它，你就可以得到它是什么。但原则上，在任何其他情况下，如果你不对你调用的东西的返回值做任何事情，那么你就会失去价值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T22:45:43.073

返回`self`工作`True`在`if`. 但是，`else`侧面的递归调用不会返回任何内容。改为使用`return self.owner.getTopParent()`。

# ckeditor - jquery对话框中的ckeditor在关闭后不显示

> ID：12272361
> 
> 赞同：0
> 
> 时间：2012-09-04T22:43:05.280
> 
> 标签：ckeditor

我试图在 jQuery 对话框中打开 ckeditor 第一次打开 ckeditor 框完美我再次单击它 jQuery 对话框加载 textarea 没有编辑器。

我假设它是因为我没有正确销毁它或重新初始化我不知道这是我尝试过的一些片段。

```
<script type="text/javascript">
if (CKEDITOR.instances['ContentText']) {
CKEDITOR.remove(CKEDITOR.instances['ContentText']);
}

CKEDITOR.replace('ContentText',
{

disableObjectResizing: true,
resize_enabled: false,
shiftEnterMode: CKEDITOR.ENTER_BR,
toolbarCanCollapse: false,
forcePasteAsPlainText: true
});
</script>

<script type="text/javascript">
if (CKEDITOR.instances.ContentText) {
CKEDITOR.instances.ContentText.destroy();

}

CKEDITOR.replace('ContentText',
{

disableObjectResizing: true,
resize_enabled: false,
shiftEnterMode: CKEDITOR.ENTER_BR,
toolbarCanCollapse: false,
forcePasteAsPlainText: true
});
</script> 
```

这是部分视图中表单末尾的代码，我在视图中尝试编辑器销毁的对话框关闭功能中尝试过。如果您想查看实际代码，我可以部署它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:07:39.507

可能发生的情况是您第二次打开对话框时没有初始化 CKeditor。第一次发生在页面加载时。但是第二次模态对话框可能会刷新 dom (html) 元素，而这些新元素并没有附加 ckeditor。

您可以通过在单击打开对话框时运行初始化代码来解决此问题。最好的方法是将您的 ckeditor 代码放入一个函数中，并将其添加到触发对话框的单击事件中。

但是由于您没有发布打开对话框的代码，所以我可能是错的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T23:09:28.950

尝试使用：

```
CKEDITOR.editor.prototype.destroy 
```

代替

```
CKEDITOR.remove 
```

此外，您应该编写一个在打开包含您的 CKE 代码的对话框时调用的函数（销毁和重新实例化实例）。

如果这两件事都没有帮助，您可以重命名 textarea 并使用您创建的新名称调用它：

```
var newCKname = "ContentText" + Math.floor((Math.random()*50)+1);
$('#ContentText').attr('id',newCKname);
[instantiate CKE again with the newCKname] 
```

# grails - 使用 grails 映射表字段

> ID：12272368
> 
> 赞同：0
> 
> 时间：2012-09-04T22:44:03.933
> 
> 标签：grails, groovy

我有一个业务需求，我需要根据预定义的规则集映射几对表。这些表包含相同的数据，但具有不同的模式。例如：表中的字段与`name`表`abc`中的字段相同。我的业务需求需要我映射几个这样的表。我想到了使用 grails 'DRY' 原则。`fullname``def`

为了尝试一个示例，我在 Grails 中创建了两个域类`Abc`和`Def`一个名为`AbcDefMapping`. 然后在 Controller 模板中，我创建了一个名为`convert`where I split `AbcDefMapping`string into `Abc`,`Def`和`Mapping`strings 的方法。现在我想`Abc.list()`在我生成的控制器中调用方法。我怎么做？（编辑：我解决了这个问题，请看我的另一个问题，即是否有更好的方法来做到这一点）

这是我的代码：

```
 def convert(){

    def cn = "${className}"

    def lis = []
    def str = ""
    for (i in cn){

        if (i == i.toUpperCase() && str!=""){
            lis.add(str)
            str = i
        }
        else{

            str = str +i
        }
    }
    lis.add(str)

    def inputs = \${lis[0]}.list() // lis[0] = "Abc"
} 
```

我希望输入`Abc.list()`与生成的代码一样。

否则，你能告诉我一个更好的方法来实现我想要在这里做的事情吗？

# cocos2d-iphone - 如何使 box2d 主体沿贝塞尔曲线/圆弧路径移动

> ID：12272369
> 
> 赞同：3
> 
> 时间：2012-09-04T22:44:05.790
> 
> 标签：cocos2d-iphone, box2d, physics, game-physics, box2d-iphone

我已经广泛搜索了如何使 Box2d 主体沿着贝塞尔曲线或弧形路径移动，其中包含起点、终点和可能的另一个控制点。我知道 cocos2d 对象可以使用 ccBezier 移动，但如何为 Box2d 主体完成呢？请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T02:00:52.333

我尝试使用曲线移动 box2d 主体（让蜘蛛绕小行星行走）。我发现使用 SetTransform 每一帧都有效，但它使引擎中的碰撞响应失败。

通过使用棱柱接头，我能够找到更好的解决方案。您从要开始的位置 (p0) 创建一个关节，并指向下一个航路点 (p1)。然后让关节使用电机将身体从 p0 推到 p1。当身体非常接近下一个点时，破坏关节并为接下来的两个点形成一个新的关节。身体仍然有它的速度，所以运动看起来很平滑。

[我在 Stack Overflow 上发表了一篇更完整的文章](https://stackoverflow.com/questions/7987983/allowing-a-character-to-walk-on-walls-and-the-ceiling-in-box2d/19919049#19919049)。

这个有帮助吗？

# javascript - 登录后重定向，缓存页面问题 - Javascript

> ID：12272370
> 
> 赞同：0
> 
> 时间：2012-09-04T22:44:19.900
> 
> 标签：javascript, wordpress, jquery, redirect

我在登录 ajax 后创建重定向时遇到问题，基本上是在正确登录后（例如，从主页），我被重定向到一个新页面。当我在这个新页面中时，如果我单击将我带回主页的链接，则主页处于非登录版本。好像浏览器维护一个缓存版本。事实上，只需使用 F5 更新此页面，页面就会刷新，然后我就登录了。

你有什么建议吗？

**编辑：我正在使用 Wordpress LoginWithAjax 插件**

```
/Make Ajax Call
    $.post(url, postData, function(data){
        lwaAjax( data, 'LoginWithAjax_Status', '#login-with-ajax' );
        if(data.result === true){
            //Login Successful - Extra stuff to do
            if( data.widget != null ){
                $.get( data.widget, function(widget_result) {
                    $('#LoginWithAjax').replaceWith(widget_result);
                    $('#LoginWithAjax_Title').replaceWith($('#LoginWithAjax_Title_Substitute').text());
                });
            }else{
                if(data.redirect == null){
                    window.location.reload();
                }else{
                    window.location = data.redirect;
                }
            }
        }
    }, "json");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:16:09.807

如果您正确设置会话，就像您在评论中提到的那样，它可能是浏览器缓存。您可以尝试在页面中添加标题，要求浏览器不要缓存：

```
<meta http-equiv='cache-control' content='no-cache'>
<meta http-equiv='expires' content='0'>
<meta http-equiv='pragma' content='no-cache'> 
```

阅读此论坛帖子的更多信息： [http ://www.webmasterworld.com/forum21/10628.htm](http://www.webmasterworld.com/forum21/10628.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T19:37:56.420

好的，这似乎有效！谢谢托什。

```
<?php 
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
// HTTP/1.1
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
// HTTP/1.0
header("Pragma: no-cache");
?> 
```

# css - 如何设置 Font Awesome Icons 的图标颜色、大小和阴影

> ID：12272372
> 
> 赞同：404
> 
> 时间：2012-09-04T22:44:32.013
> 
> 标签：css, twitter-bootstrap, icons, styles, font-awesome-4

我如何设置[Font Awesome 图标](http://fortawesome.github.com/Font-Awesome/#overview)的颜色、大小和阴影？

例如，[Font Awesome 的网站](http://fortawesome.github.com/Font-Awesome/#overview)将显示一些白色的图标和一些红色的图标，但不会显示`CSS`如何以这种方式设置它们的样式......

![不同颜色的按钮和链接，旁边有红色、白色和黑色图标](../Images/ac9acd30015728f55dacfc8ffa082d7e.png)

* * *

## 回答 #1

> 赞同：524
> 
> 时间：2012-09-04T22:50:45.070

鉴于它们只是字体，那么您应该能够将它们设置为字体：

```
#elementID {
    color: #fff;
    text-shadow: 1px 1px 1px #ccc;
    font-size: 1.5em;
} 
```

* * *

## 回答 #2

> 赞同：188
> 
> 时间：2013-03-11T19:03:20.837

您也可以只添加样式内联：

```
<i class="icon-ok-sign" style="color:green"></i>

<i class="icon-warning-sign" style="color:red"></i> 
```

* * *

## 回答 #3

> 赞同：129
> 
> 时间：2014-10-21T18:05:45.673

如果你同时使用 Bootstrap，你可以使用：

```
<i class="fa fa-check-circle-o fa-5x text-success" ></i> 
```

除此以外：

```
<i class="fa fa-check-circle-o fa-5x" style="color:green"></i> 
```

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2012-09-27T01:41:52.210

看起来 FontAwesome 图标颜色响应文本信息、文本错误等。

```
<div style="font-size: 44px;">
   <i class="icon-umbrella icon-large text-error"></i>
</div> 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2013-09-12T16:47:31.167

在你的.css 文件中：

```
 *.icon-white {color: white}
    *.icon-silver {color: silver} 
```

在your.html 文件中：

```
 <a><i class="icon-book icon-white"></i> Book</a>
    <a><i class="icon-ok-sign icon-silver"></i> OK</a> 
```

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2018-07-25T21:45:15.317

```
For Size : fa-lg, fa-2x, fa-3x, fa-4x, fa-5x.

For Color : <i class="fa fa-link fa-lg" aria-hidden="true"style="color:indianred"></i>

For Shadow : .fa-linkedin-square{text-shadow: 3px 6px #272634;} 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2017-04-16T05:11:44.583

有一种非常简单的方法可以更改 Font Awesome 图标的颜色。

```
<!-- Font Awesome insert code -->
<script src="https://use.fontawesome.com/49b98aaeb5.js"></script>
<!-- End -->
<i class="fa fa-thumbs-up fa-5x" aria-hidden="true" style="color:#00cc6a"></i>
<i class="fa fa-thumbs-up fa-4x" aria-hidden="true" style="color:#00cc6a"></i>
<i class="fa fa-thumbs-up fa-3x" aria-hidden="true" style="color:#00cc6a"></i>
<i class="fa fa-thumbs-up fa-2x" aria-hidden="true" style="color:#00cc6a"></i>
<i class="fa fa-thumbs-up" aria-hidden="true" style="color:#00cc6a"></i>
```

您可以根据自己的喜好更改十六进制代码。注意：文本颜色也会改变图标颜色，除非标签中`style="color:#00cc6a"`有一个。`i`

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2015-09-12T22:33:57.613

使用 FA 4.4.0 添加

```
.text-danger
    color: #d9534f 
```

到文档 css 然后使用

```
 <i class="fa fa-ban text-danger"></i> 
```

将颜色更改为红色。您可以为任何颜色设置自己的颜色。

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2013-07-09T13:25:19.770

[http://fortawesome.github.io/Font-Awesome/examples/](http://fortawesome.github.io/Font-Awesome/examples/)

```
<i class="icon-thumbs-up icon-3x main-color"></i> 
```

在这里，我在我的 CSS 中定义了一个全局样式，其中 main-color 是一个类，在我的例子中它是一种浅蓝色调。我发现在带有 Font Awesome 的图标上使用内联样式效果很好，尤其是在您从语义上命名颜色的情况下，即 nav-color 如果您想要单独的颜色等。

在他们网站上的这个示例中，以及我在示例中的编写方式，最新版本的 Font Awesome 稍微改变了调整大小的语法。之前它曾经是：

```
icon-xxlarge 
```

现在我必须在哪里使用：

```
icon-3x 
```

当然，这一切都取决于您在环境中安装的 Font Awesome 版本。希望这可以帮助。

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2013-12-16T18:59:44.937

在 FontAwesome 4.0 中，类更改为“fa-2x”、“fa-3x”。

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2017-01-10T06:33:12.260

只需在 css 文件中定义一个类并将其级联到 html 文件中，例如

```
<i class="fa fa-plus fa-lg green"></i> 
```

现在用css写下来

```
.green{ color:green} 
```

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2018-02-02T16:41:31.450

只针对字体真棒预定义类名

例如：

HTML

```
<i class="fa fa-facebook"></i> 
```

CSS

```
i.fa {
    color: red;
    font-size: 30px;
} 
```

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2016-10-28T06:50:34.633

请参考链接 [http://www.w3schools.com/icons/fontawesome_icons_intro.asp](http://www.w3schools.com/icons/fontawesome_icons_intro.asp)

```
<i class="fa fa-car"></i>
<i class="fa fa-car" style="font-size:48px;"></i>
<i class="fa fa-car" style="font-size:60px;color:red;"></i>

<i class="fa fa-car fa-lg"></i>
<i class="fa fa-car fa-2x"></i>
<i class="fa fa-car fa-3x"></i>
<i class="fa fa-car fa-4x"></i>
<i class="fa fa-car fa-5x"></i> 
```

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2013-07-26T02:21:14.830

当我尝试直接从 BootstrapCDN 使用图标（最简单的方法）时，我遇到了同样的问题。然后我下载了 CSS 文件并将其复制到我网站的 CSS 文件夹中，CSS 文件（在字体真棒文档中的“简单方法”下描述），一切都开始正常工作。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2013-07-04T13:54:57.510

信用：[我可以更改 Font Awesome 图标颜色的颜色吗？](https://stackoverflow.com/questions/14474452/can-i-change-the-color-of-font-awesomes-icon-color)

（这个答案*建立*在那个答案的基础上）

（对于书签图标，例如：）

在你的.css 文件中：

```
.icon-bookmark.icon-white {
    color: white;
} 
```

在your.html 文件中：

```
<div class="icon-bookmark icon-white"></div> 
```

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2016-04-19T03:06:09.003

将 i 标签包裹在 p 或 span 中，然后可以使用 bootstrap css 类

```
<p class="text-success"><i class="fa fa-check"></i></p> 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2018-04-09T19:53:11.563

对于**Font Awesome 5 SVG**版本，使用

```
filter: drop-shadow(0 0 3px rgba(0,0,0,0.7)); 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-08-09T17:20:08.333

正如已经指出的那样，字体真棒图标是文本，因此您可以使用适当的 CSS 属性对其进行样式设置。例如：

```
.fa-twitter-square {
    font-size: 15px;
    color: red;
} 
```

如果在我身上发生了很多事情，图标大小根本没有改变，请将“！important”添加到 font-size 属性。

```
.fa-twitter-square {
    font-size: 15px !important;
    color: red;
} 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2019-06-14T20:36:04.897

调整图标大小

我们的 Web Fonts + CSS 和 SVG + JS 框架都包含一些基本控件，用于在页面 UI 的上下文中调整图标大小。

你可以使用喜欢

```
<i class="fas fa-camera fa-xs"></i>
<i class="fas fa-camera fa-sm"></i>
<i class="fas fa-camera fa-lg"></i>
<i class="fas fa-camera fa-2x"></i>
<i class="fas fa-camera fa-3x"></i>
<i class="fas fa-camera fa-5x"></i>
<i class="fas fa-camera fa-7x"></i>
<i class="fas fa-camera fa-10x"></i> 
```

[https://fontawesome.com/how-to-use/on-the-web/styling/sizing-icons](https://fontawesome.com/how-to-use/on-the-web/styling/sizing-icons)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-08-29T05:02:26.913

动态改变 .fa-xxx 图标的 css 属性：

```
<li class="nws">
<a href="#NewsModal" class="urgent" title="' + title + '" onclick=""><span class="label label-icon label-danger"><i class="fa fa-bolt"></i></span>' 
</a>
</li>
<script>
  $(document).ready(function(){
   $('li.nws').on("focusin", function(){
    $('.fa-bolt').addClass('lightning');
   });
 });
</script>

<style>
.lightning{ /*do something cool like shutter*/}
</style> 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-03-13T18:55:30.213

```
text-shadow: 1px 1px 3px rgba(0,0,0,0.5); 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-07-13T13:08:37.127

尝试简单地使用类似 fa-lg,fa-2x,fa-3x,fa-4x,fa-5x 来增加图标相对于其容器的大小

例如：-

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2017-12-11T16:37:46.613

我不建议您使用 fa-5x 等内置的字体很棒的样式；因为担心他们可能会更改它，您将不得不继续链接您的应用程序代码以符合最新标准。您只需为每个要统一样式的字体真棒类提供相同的类，即可避免这种情况说：

```
<i class="fa fa-facebook-square fa-sabi-social-icons" aria-hidden="true"></i>
<i class="fa fa-twitter-square fa-sabi-social-icons" aria-hidden="true"></i>
<i class="fa fa-google-plus-square fa-sabi-social-icons" aria-hidden="true"></i> 
```

这里的类是 fa-sabi-social-icons

然后在您的 css 中，您可以使用与普通字体样式相同的 css 规则来设置字体样式。例如

```
.fa-sabi-social-icons {
     color: //your color;
     font-size: // your font-size in px, em or %;
     text-shadow: 2px 2px #FF0000;
} 
```

这应该让你的字体真棒字体样式

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2021-10-21T11:55:09.433

这是一个如何设置字体真棒样式的示例：

```
.arrow i.fa {
  color: white !important;
  font-size: 2.2rem;
  opacity: .3;
}
```

```
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<div class="arrow d-none d-md-block">
  <i class="fa fa-angle-down"></i>
</div>
```

就是这样。

# jquery - 仅在选择单选按钮时如何忽略验证？

> ID：12272374
> 
> 赞同：1
> 
> 时间：2012-09-04T22:44:56.570
> 
> 标签：jquery

仅在选择单选按钮时如何忽略验证？

我有一个文本字段和一个单选按钮。这是文本字段验证的代码：

```
$("#first_digits").validate({
      expression: "if (!isNaN(VAL) && VAL) return true; else return false;",
      message: "Please enter a valid number"
}); 
```

当我选择单选按钮时，如何忽略上述验证？

# mysql - 维度数组 - HTML 中的 3 个表格

> ID：12272375
> 
> 赞同：-1
> 
> 时间：2012-09-04T22:44:57.017
> 
> 标签：mysql, arrays, dimensional

我正在尝试显示来自 3 个不同的 mysql 表、客户端、订单的内容。html结构的产品：

```
 Product 1        Product 2      Product 3 .....
client 1       quantityOrder     quantityOrder        -
client 2            -            quantityOrder    quantityOrder
client 3        quantityOrder        -                 - 
```

我正在使用多维数组，但不知何故它不起作用。

试图按照这篇文章的说明进行操作，但也没有运气： [PHP 二维数组转换为 HTML](https://stackoverflow.com/questions/10571346/php-two-dimensional-array-into-html)

任何想法？

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:07:27.153

根本不要使用数组。你有一个二维数组，可以直接建表：

```
SELECT client.id, client.name, product.name as productname, SUM(order.quantity) AS qty
    FROM client CROSS JOIN product
         LEFT JOIN order ON ( order.product_id = product.id AND order.client_id = client.id)
    GROUP BY client.id, product.id ORDER BY client.name, product.code; 
```

这将为每个客户和产品输出一个单元格，如果该（客户，产品）和订单之间没有 JOIN，则可能为 NULL。

然后你可以在 PHP 中迭代表（当然你可以将它保存在一个多维数组中，使用客户端和产品 ID 作为键）：

```
print "<table>";
$customer_id = -1;
while($tuple = SQLFetchTuple($exec))
{
    if ($tuple['id'] != $customer_id)
    {
        if (-1 != $customer_id)
            print "</tr>"; // Close previous row
        print "<tr><td>{$tuple['name']</td>"; // Output row header
        $customer_id = $tuple['id'];
    }
    if ($tuple['qty'])
        print "<td>{$tuple['qty']</td>";
    else
        print "<td>-</td>";
}
print "</table>"; 
```

# cakephp - cakephp HABTM 协会

> ID：12272384
> 
> 赞同：3
> 
> 时间：2012-09-04T22:45:47.380
> 
> 标签：cakephp, many-to-many, cakephp-model

嗨，我有一个用 cakephp 开发的网站。我有两个表：成分属性

表之间的关系是 HasAndBelongsToMany(HABTM)。这是我的模型：

```
class Ingredient extends AppModel {
    public $name = 'Ingredient';
    public $useTable = 'ingredients';
    public $belongsTo = 'User';

    public $hasAndBelongsToMany = array (
        'Property' => array (
            'className'             => 'Property',
            'joinTable'             => 'ingredients_properties',
            'foreignKey'            => 'ingredient_id',
            'associationForeignKey' => 'property_id',
            'unique'                => false
        )
    );

}

class Property extends AppModel{
        public $name = 'Property'; 
        public $useTable = 'properties';

} 
```

在我的成分控制器中，我必须添加一个我在这种模式下尝试过的新属性：

```
$this->Ingredient->Property->create();
                $this->Ingredient->Property->set('user_id',$this->Session->read('Auth.User.id'));
                $this->Ingredient->Property->set('ingredient_id',$ing['IngredientAlias']['ingredient_id']);
                if ($this->Ingredient->Property->save($this->request->data)){
                    $this->set('flash_element','success');
                    $this->Session->setFlash ('Ingrediente modificato con successo.');
                    $this->redirect(array('action'=>'edit',$alias));
                }
                else{
                    $this->set('flash_element','error');
                    $this->Session->setFlash('Errore di salvataggio activity');
                } 
```

向数据库中插入一条新记录，但如果我想要在成分属性（连接表）中插入一条记录的成分之间的关​​系，我该怎么做？在这种模式下，就像 Ingredients hasMany Properties 但不正确。我该如何解决？或者我必须手动将记录创建到成分属性中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:22:04.377

您可以查看以下链接以实现相同的目的：

[http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-related-model-data-habtm](http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-related-model-data-habtm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T17:48:53.950

解决方案是：

```
class Ingredient extends AppModel {
    public $name = 'Ingredient';
    public $useTable = 'ingredients';
    public $belongsTo = 'User';

    public $hasAndBelongsToMany = array (
        'Property' => array (
            'className'             => 'Property',
            'joinTable'             => 'ingredients_properties',
            'foreignKey'            => 'ingredient_id',
            'associationForeignKey' => 'property_id',
            'unique'                => false
        )
    );

}

class Property extends AppModel{
        public $name = 'Property'; 
        public $useTable = 'properties';
        public $hasAndBelongsToMany = array (
        'Ingredient' => array (
            'className'             => 'Ingredient',
            'joinTable'             => 'ingredients_properties',
            'foreignKey'            => 'property_id',
            'associationForeignKey' => 'ingredient_id',
            'unique'                => false
        )
    );

} 
```

# php - 当 bcrypt 不可用时，我应该在 PHP 中使用什么密码单向哈希？

> ID：12272387
> 
> 赞同：0
> 
> 时间：2012-09-04T22:46:43.933
> 
> 标签：php, bcrypt

我必须为客户端部署一个 php 应用程序，但他的服务器不支持 bcrypt。我没有办法改变这一点。我应该使用什么而不是 bcrypt 来散列用户的密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:53:39.383

**bcrypt**是密码散列的理想选择，因为它很慢，此外还有其他有用的属性。

对于大多数密码散列目的，使用 SHA256 或什至具有适当加盐值的 SHA1 应该可以很好地完成这项工作。

--

另见：[http ://www.openwall.com/phpass/](http://www.openwall.com/phpass/)

# jquery-mobile - jQuery mobile：在与标题标题相同的行中搜索输入

> ID：12272388
> 
> 赞同：0
> 
> 时间：2012-09-04T22:46:48.540
> 
> 标签：jquery-mobile

![在此处输入图像描述](../Images/6f7e5d0b7bf57b93e36fd0326c361a63.png)

无论如何要使搜索输入与标题对齐？我意识到只有按钮可以与标题在同一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:21:30.330

使用“data-role=fieldcontain”属性将 div 包裹在您的输入周围。

# iphone - 从 UITableViewCell 动画到模态视图控制器

> ID：12272393
> 
> 赞同：1
> 
> 时间：2012-09-04T22:47:36.170
> 
> 标签：iphone, objective-c, ios, ipad, uitableview

我有一个水平 UITableView，它有一个 UITableViewCell 的子类。我正在尝试制作一个动画，如果有人点击 UITableViewCell，则单元格会执行后空翻动画并将大小调整为模态视图。如何以及最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T23:00:40.323

为此，您实际上可以使用 UIView 的类方法完全执行您想要的操作：

```
transitionFromView:toView:duration:options:completion: 
```

[http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

您可以执行以下操作：

*   创建已按下的 UITableViewCell 的克隆
*   将其覆盖在表格视图上与按下的单元格完全相同的位置
*   使用“from”视图作为克隆的单元格视图和“to”视图作为新的“modal”视图（填充屏幕的视图）调用上述方法。

我建议您创建一个克隆，否则该单元格将从 tableview 中删除：

> 过渡的起始视图。默认情况下，此视图作为过渡的一部分从其父视图中删除。

编辑：我忘了提，你要找的动画是`UIViewAnimationOptionTransitionFlipFromBottom`

# php - 连接单个表中的两个列

> ID：12272396
> 
> 赞同：0
> 
> 时间：2012-09-04T22:47:46.033
> 
> 标签：php, mysql, sql

我很好奇是否有一种简单的方法可以做到这一点。我在一个表中有一堆列。我想将其中两个字段作为一个来阅读：描述、材料。有没有一种简单的方法可以通过 sql 对其进行编码？我需要一个 JOIN，UNION，...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T22:50:02.943

使用[`CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)功能：

```
SELECT CONCAT(column1, column2) merged_column
FROM table 
```

`merged_column`然后，从结果集中获取命名的列：

```
$result = mysqli_query("SELECT CONCAT(column1, column2) merged_column FROM table");
while($row = mysqli_fetch_array($result)) {
  $merged_column = $row["merged_column"];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T22:51:14.293

concat函数可以连接同一张表的两列示例

```
 SELECT CONCAT(column1 name, column2 name)
  FROM table 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T22:50:42.923

我想你正在寻找**[`CONCAT()`](http://www.tutorialspoint.com/mysql/mysql-concat-function.htm)**

前任

```
SELECT CONCAT('Hello', ' ', 'World') 
```

将导致

```
Hello World 
```

# android - Android 向后兼容性，但仍使用最新的 API 功能

> ID：12272397
> 
> 赞同：5
> 
> 时间：2012-09-04T22:47:46.563
> 
> 标签：android, backwards-compatibility

我在 Android Market 中注意到，许多流行的应用程序都向后兼容更早版本的 Android。例如

```
Evernote - 1.6
Faceobook Messenger - 2.2 
```

这些应用程序看起来和工作都很棒，但它们如何做到这一点并支持更旧的 API 级别？他们是否仅使用存在于支持的最低操作系统版本中的 API 功能，几乎没有？我假设他们必须使用更高 API 级别的某些功能来提供出色的 UI 和功能列表。

我可以看到两种可能的解决方案：

`Use Min/Target API levels in build. Then through code you check the OS version and implement the features using a supported method and degrade gracefully. This seems like a lot of work.`

`Have multiple app versions targeting various OS versions. E.g. A release for 2.2 and another for 4.0\. Is this possible?`

问的原因是我正在计划一个应该支持 2.2 的新应用程序，但我担心我可能需要仅在以后版本中可用的 API 功能？我应该只针对 2.2 吗？

编辑：另外，兼容性库扮演什么角色？这是关键吗？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-05T23:05:13.940

我们（Evernote）做了额外的工作来支持 1.6 并尽可能多地使用新的 API。支持 1.6 的主要问题是 Dalvik 对您的类进行了贪婪搜索。这使得无法使用类似的代码

```
if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD) {
    prefEditor.apply();
} else {
    prefEditor.commit();
} 
```

因为它会抛出一个类验证错误。这是当 dalvik 看到您的方法并尝试在运行时访问它时引起的。

相反，您需要使用帮助类来为 SDK 实例化适当的类。是的，这是更多的工作

```
public abstract class SharedPreferenceEditor {

  private static SharedPreferenceEditor sInstance;

  public static SharedPreferenceEditor getInstance() {
    if (sInstance == null) {

      /*
      * Check the version of the SDK we are running on. Choose an
      * implementation class designed for that version of the SDK.
      */
      @SuppressWarnings("deprecation")
      int sdkVersion = Build.VERSION.SDK_INT;
      if(Evernote.DEBUG)Log.d("SharedPreferenceEditor", "sdkVersion=" + sdkVersion);
      if (sdkVersion < Build.VERSION_CODES.GINGERBREAD) {
        sInstance = new CommitSharedPreferenceEditor();
      } else  {
        sInstance = new ApplySharedPreferenceEditor();
      }
    }
    return sInstance;
  }

  public abstract void save(SharedPreferences.Editor editor);
} 
```

然后你有一个姜饼+ api级别

```
public class ApplySharedPreferenceEditor extends SharedPreferenceEditor {
  public void save(SharedPreferences.Editor editor) {
    editor.apply();
  }
} 
```

一个用于<姜饼级别

```
public class CommitSharedPreferenceEditor extends SharedPreferenceEditor{
  public void save(SharedPreferences.Editor editor) {
    editor.commit();
  }
} 
```

我建议支持 2.1 及更高版本，这样您就可以利用对 Dalvik 的改进并使用我列出的第一个示例。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-04T22:59:09.300

有几种不同的策略可以将向后支持与最新功能混合。Android 文档中有很多参考资料，但可能从这里开始： [Android 应用程序的向后兼容性](http://android-developers.blogspot.com/2009/04/backward-compatibility-for-android.html)。

但总的来说，我强烈建议您尽可能避免发布多个版本。使用您应用的清单来定位适当范围的操作系统版本和相应的代码。

是的，还有标准的[Android Support (Compatibility) Library](http://developer.android.com/tools/extras/support-library.html)。通常，兼容库的目的是允许您的应用程序使用一些最新的操作系统功能，同时为旧平台提供一些类似的实现。你绝对应该调查一下。

还有一些很棒的 3rd 方兼容性库。以下是我在项目中使用过的一些，绝对推荐：

*   [动作条夏洛克](http://actionbarsherlock.com/)
*   [九老机器人](http://nineoldandroids.com/)
*   [全息无处不在](https://github.com/ChristopheVersieux/HoloEverywhere)

请注意，NineOldAndroids 实际上包含在 ActionBarSherlock 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T00:25:52.700

您可以做一些事情来支持旧版本的 Android 平台，同时仍然利用新版本中的功能。[支持不同平台版本](http://developer.android.com/training/basics/supporting-devices/platforms.html)的 Android 培训指南概述了一些，并有示例代码向您展示如何实现它们。

没有特别的顺序：

*   您可以设置单独的“minSdkVersion”和“targetSdkVersion”。minSdkVersion 是您想要支持的最早的 Android 版本。targetSdkVersion 是您测试过的最新版本，也是您打算在应用程序中包含的最新功能/行为集。

*   您可以在运行时检查系统版本，并且仅当设备上运行所需的 Android 平台版本时才实施功能。这看起来像：

    ```
    private void setUpActionBar() {
        // Make sure we're running on Honeycomb or higher to use ActionBar APIs
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
          ActionBar actionBar = getActionBar();
          actionBar.setDisplayHomeAsUpEnabled(true);
        }
    } 
    ```

*   支持库（通常也称为兼容性库）包含来自新版本 Android 的功能，以这样一种方式编写，您可以将它们包含在您的应用程序中，并且它们甚至可以在*旧*版本的 Android 上工作。例如，在 Honeycomb (Api 11) 中引入了 Fragments。但是您可以在回到 Donut (Api 4) 的设备上使用支持库中包含的 Fragments 版本！

# windows-8 - 从 Metro 应用程序检测桌面可用性（检测 ARM，检测 Windows RT 系统）

> ID：12272399
> 
> 赞同：3
> 
> 时间：2012-09-04T22:48:25.940
> 
> 标签：windows-8, arm, microsoft-metro, windows-runtime, desktop

这是一个与[Get OS-Version in WinRT Metro App C#](https://stackoverflow.com/questions/10125324/get-os-version-in-winrt-metro-app-c-sharp)相关的问题，但不是它的副本。

是否有任何选项可以从 Metro 应用程序中检测系统上是否有可用的桌面功能？我知道不支持检测操作系统版本，这没关系。

但是，我的 Metro 应用程序需要知道它运行的系统上是否有可用的桌面。

桌面是指可扩展桌面 - 桌面，可以安装第 3 方桌面应用程序。正如我们所知，基于 ARM 的单元也将拥有桌面，但仅限于 Microsoft 内置程序。

我能否区分我的 Metro 应用程序是在具有不可扩展桌面的基于 ARM 的平板电脑上运行，还是在具有可扩展桌面的所有其他（基于英特尔的）设备上运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T16:19:44.223

经过更广泛的搜索后，我找到[了 GetNativeSystemInfo](http://msdn.microsoft.com/en-us/library/windows/apps/ms724340.aspx)方法。提示立即出现在 SO 网站上 - 这个[问题](https://stackoverflow.com/questions/10115283/how-can-i-get-the-number-of-logical-cpus-on-winrt)。Windows 应用商店应用程序似乎完全支持这种方法 - 尽管使用了 pinvoke，但 App Cert Kit 测试运行顺利。

我最终得到以下代码：

```
 [DllImport("kernel32.dll")]
    internal static extern void GetNativeSystemInfo(ref SystemInfo lpSystemInfo);

    internal static bool IsArmBased()
    {
        var sysInfo = new SystemInfo();
        GetNativeSystemInfo(ref sysInfo);
        return sysInfo.wProcessorArchitecture == ProcessorArchitectureArm; //ushort 5
    } 
```

这似乎是我一直在寻找的解决方案。如果不是，请告诉我，或者让我知道与这种方法相关的任何问题。谢谢你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T00:53:17.003

如果这是 HTML，您可以使用`window.cpuClass`它来获取它是 ARM、x86 还是 amd64。

非动态版本是使用特定于目标的架构而不是 AnyCPU，然后使用带有#ifdefs 的风格在构建时对其进行硬编码。但是，您必须向商店提交 3 个包裹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T23:54:06.387

使用 try {} catch(){} 访问这些库，如果出现任何问题，假设 ARM 版本。

# jquery - 通过单击页面中的任何位置隐藏菜单

> ID：12272402
> 
> 赞同：0
> 
> 时间：2012-09-04T22:48:35.627
> 
> 标签：jquery, events, drop-down-menu, event-bubbling, stoppropagation

我有这段代码，但它似乎总是触发附加到的事件`'html'`，因为当我单击`.optTrigger`然后菜单显示并再次单击它时，它会做闪烁的事情，它会隐藏菜单一秒钟并再次显示它，所以我猜它会触发`'html'`点击事件。

* * *

**试试看**：这是上传的网站，你要添加一个新任务，然后点击选项触发器，它是新任务中检查按钮旁边的箭头按钮，最右边。 [这里](http://check.staticloud.com/)

* * *

这是我的代码：

**html:**

```
<div class="mainTaskWrapper clearfix">
    <div class="mainMarker"></div>
    <label class="mainTaskLabel"></label>
    <div class="mainHolder"></div>
    <div class="subTrigger opened"></div>
    <div class="checkButton"></div>
    <div class="optTrigger"></div>
    <div class="addSubButton"></div>
    <div class="dateInfo"></div>
    <div class="mainOptions">
        <ul>
            <li id="mainInfo">Details</li>
            <li id="mainEdit">Edit</li>
            <li id="mainDelete">Delete</li>
        </ul>
    </div>
</div> 
```

**脚本：**

```
$("#tasksWrapper").on("click", ".mainTaskWrapper .optTrigger", function(evt){
    $(this).siblings(".mainOptions").fadeToggle(100);
    $(this).toggleClass("active");
    evt.stopPropagation();      
});

$("html").on("mousedown",function(){            
    $(".optTrigger").siblings(".mainOptions").hide();
    $(".optTrigger").removeClass("active");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:23:13.243

问题在于将不同类型的事件处理程序附加到 DOM 元素：

```
$("#tasksWrapper").on("click", ...
...
$("html").on("mousedown", ... 
```

即使`click`阻止了事件的传播，点击也会触发`mousedown`事件。

所以与其`$("html").on("mousedown", ...`更好地做`$("html").on("click", ...`

# c# - IIS / MVC 应用程序将所有出站 WebRequest(s) 重定向到 localhost (127.0.0.1)

> ID：12272403
> 
> 赞同：3
> 
> 时间：2012-09-04T22:48:36.683
> 
> 标签：c#, .net, iis, httpwebrequest, webrequest

构建了一个简单的 MVC3 Web 应用程序来 ping 我们的一些服务器以获取少量 JSON 数据并在快速 UI 中报告作为监控解决方案，部署在 Windows 2008 到 IIS 7 上。

通过 WebRequest 类的所有出站 HTTP 请求最终都会出错：`System.Net.Sockets.SocketException: No connection could be made because the target machine actively refused it 127.0.0.1:25946`

当在同一台服务器上的控制台应用程序上运行，或者作为在开发机器上运行的控制台或 Web 应用程序时，代码可以正常工作。只有在生产服务器上的 IIS 中作为 Web 应用程序运行时才会发生此错误。

Web 应用程序可以连接到 SQL 服务器和 MongoDB，但在任何纯 HTTP 请求时都会失败。**使用设置为localhost**的空 WebProxy 。（带句点）将报告的错误更改为 404。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:35:36.023

尝试查看主机（或 LMHost）文件并确保它们没有问题。

# ios - 自定义ios相机快门

> ID：12272406
> 
> 赞同：0
> 
> 时间：2012-09-04T22:49:35.550
> 
> 标签：ios, camera, avfoundation

ios相机有没有现成的自定义光圈/快门视图？

我将使用 AVFoundataion 实现相机应用程序，其中没有快门。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T06:35:50.273

不，如果您纯粹使用 AVFoundation 进行捕获，则需要自己构建它。

如果您的相机应用程序足够简单，另一种方法是使用`UIImagePickerController`自定义。`cameraOverlayView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:01:27.580

但是 UImagePickerController 无法正常工作。因为在中断的呼叫或后台应用程序中未打开快门。

# r - 在 ggplot2 中绘制图形

> ID：12272407
> 
> 赞同：4
> 
> 时间：2012-09-04T22:49:35.717
> 
> 标签：r, graph, ggplot2

我正在用 ggplot2 在 R 中制作一堆折线图，我想将它们保存为 jpeg。但是，我想让图表更大或更高分辨率，这样如果您在查看图表时放大图表，它们看起来不会那么像素化。

这是一个代码片段：

```
library("ggplot2")

p <- ggplot(df1)

p <- p +
  geom_line(aes(time, ee_amt, colour="ee_amt"), size = 2) + 
  geom_point(aes(time, ee_amt, colour="ee_amt"), size = 2)

jpeg("G:\\Auto Parts\\sample.jpg")
  print(p)
dev.off() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T23:01:31.847

使用`ggsave`并指定`dpi`您想要的。

```
library(ggplot2)
df <- data.frame(x = 1:10, y = rnorm(10))
my_plot <- ggplot(df, aes(x,y)) + geom_point(size = 4)
ggsave(my_plot, file="sample.jpg", dpi = 600) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T23:05:18.653

将绘图保存为 PostScript，并使用[ImageMagick](http://www.imagemagick.org/script/index.php) `convert`以所需的密度转换为 JPEG，例如：

```
ggsave(my_plot, file="foo.ps") 
```

然后，制作 300 dpi JPEG 版本：

```
$ convert foo.ps -density 300 foo.jpeg 
```

您将拥有一个较小的文件，可以以任何所需的分辨率和 ImageMagick 支持的任何位图格式进行渲染。

如果这是针对网络的，请考虑转换为 SVG 或 PDF 格式：

```
$ convert foo.ps foo.svg 
```

您可以非常轻松地将 SVG 嵌入`iframe`其中，与高分辨率位图相比，这有助于以小文件大小进行平滑缩放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T08:24:32.163

我不推荐 png()：ggsave() 或 jpeg() 是更好的选择。要使用 png() 直接控制分辨率，请使用：

```
library("ggplot2")

p <- ggplot(df1)

p <- p +
geom_line(aes(time, ee_amt, colour="ee_amt"), size = 2) + 
geom_point(aes(time, ee_amt, colour="ee_amt"), size = 2)

W = 1680
H = 1050

png("test.png", width = W, height = H)
print(p)
graphics.off() 
```

这同样适用于 jpeg()。

# python - Numpy破碎的“For”循环？

> ID：12272408
> 
> 赞同：-1
> 
> 时间：2012-09-04T22:49:38.290
> 
> 标签：python, for-loop, numpy

我一直在编写一个 Numpy 脚本，但它突然开始起作用了。我在开始时写了 For 循环行，并且已经测试了大约 20 次左右的脚本，没有遇到任何问题。现在我认为其他问题已经解决，Python 告诉我“for”语法是错误的。有人有什么想法吗？确切的 Python 输出是：

```
File "Test.py", line 17
    for t in range(10):
      ^ 
```

脚本代码为：

```
#!/Library/Frameworks/EPD64.framework/Versions/7.3

import numpy as np
import scipy as sp

tau = 10

c = sp.recfromtxt("test.txt")
binsmax = np.max(c)

f, dummy = np.histogram(c, bins=(np.arange(binsmax+1))

for t in range(tau):

    if t==0:
        a = c[:len(c)-1]
    else:
        a = c[:-(t+1)]

    d = c[1:]
    b = d
    c = a + b
    newmax = np.max(c)

    if binsmax < newmax:
        binsmax = newmax

    hist, dummy2 = np.histogram(c, bins=[np.arange(binsmax+1)])

    if binsmax < newmax:
        difference = newmax - binsmax
        np.append(f, np.zeros(difference)) 
    else:
        difference = binsmax - newmax
        np.append(hist, np.zeros(difference))
    e = f
    f = hist + e                   # 'f' is the running histogram

    sp.savetxt(str(t)+"c.txt", c)
    sp.savetxt(str(t)+"f.txt", f) 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T22:51:30.607

您在这一行中缺少一个紧密的括号：

```
f, dummy = np.histogram(c, bins=(np.arange(binsmax+1)) 
```

# objective-c - 如何删除关系中的所有子实体？

> ID：12272411
> 
> 赞同：1
> 
> 时间：2012-09-04T22:49:43.957
> 
> 标签：objective-c, ios, core-data

我有一个正在开发的聊天应用程序，但我不太了解我应该使用什么关系。这是设置：

```
 / Folder 1 \
Account > Mailbox >- Folder 2 - > Message
                   \ Folder 3 / 
```

如您所见，我将收到很多消息，但其他实体中只有一个。我应该在这里设置什么关系，以便在`Account`删除 a 时，它也会删除所有后续内容？当然，当一条消息被删除时，它不应该删除该帐户。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T22:57:40.847

在您项目的数据模型中，您只需对受影响的关系设置正确的“删除规则”。

在这种情况下，听起来您正在寻找“级联”删除规则。如果您要选择您的邮箱实体，然后选择它与邮件的关系，并将该关系的删除规则设置为“级联” - 这将导致当父（在本例中为邮箱）为时删除子关系删除。

您绝对应该查看[核心数据编程指南](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)，它可以让您深入了解每个不同的删除规则设置的确切作用（我个人认为名称非常明显，但仍然值得回顾）。

# python - 在 Flask 中，设置一个 cookie，然后重定向用户

> ID：12272418
> 
> 赞同：42
> 
> 时间：2012-09-04T22:50:54.547
> 
> 标签：python, flask

似乎在 Flask 中，cookie 是通过直接修改响应对象来设置的。

如何返回响应对象，同时在成功登录后将用户重定向到不同的页面？我想专门重定向用户而不是呈现不同的页面，以防用户点击 REFRESH。

这是我当前的代码，它只显示相同的页面 login.html：

```
@app.route('/login', methods=['POST', 'GET'])
def login():
  errors = []

  if request.method == 'POST':

    email = request.form['email']
    password = request.form['password']

    #Check the user's e-mail
    try:
      u = User(email)
    except UserError, e:
      errors.append(e)
    else:

      #Check the user's password
      if not u.authenticatePassword(password):
        errors.append(('password','Invalid password'))
        return render_template('login.html',error=errors)

    #Set the session
    s = Session()
    s.user_id = u.user_id
    s.ip = request.remote_addr

    #Try to set the cookie
    if s.setSession():
      response = make_response( render_template('login.html',error=errors))
      response.set_cookie('session_id', s.session_id)
      return response

  return render_template('login.html',error=errors) 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-09-04T23:08:00.293

您应该将代码更改为：

```
from flask import make_response
if s.setSession():
    response = make_response(redirect('/home'))
    response.set_cookie('session_id', s.session_id)
    return response 
```

# sql - 带有子查询或连接的 SQL 查询

> ID：12272421
> 
> 赞同：0
> 
> 时间：2012-09-04T22:51:30.273
> 
> 标签：sql, join, subquery

我需要一些关于如何编写查询的指导。

有以下表格：

tbl工作组计划

1.  工作组 ID
2.  节目编号

工作组

1.  工作组 ID
2.  工作组名称

tbl用户

1.  用户身份
2.  工作组 ID

tbl用户程序

1.  用户身份
2.  节目编号

要求是找到所有那些 Workgroup 名称不是 '%Insight%' 但 ProgrammeID 等于 59 的用户 ID，因为 ProgrammeID 59 必须只分配给那些 Workgroup 为 '%Insight%' 的用户</p>

一直在尝试所有可能的连接和子查询，但无法得到它。所以，任何帮助，在正确的方向上都会有很大的用处

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:57:35.807

在这里，试试这个。

```
SELECT      a.UserID
FROM        tblUser a
                INNER JOIN tblWorkGroupProgramme b
                    ON a.WorkgroupID = b.WorkGroupID
                INNER JOIN tblUserProgramme c
                    ON c.ProgrammeID = b.ProgrammeID
                INNER JOIN tblWorkGroup d
                    ON b.WorkGroupID = d.WorkGroupID
WHERE       NOT (d.WorkGroupName LIKE '%Insight%') AND
            c.ProgrammeID = 59 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:07:46.630

这是我想出的答案：

```
select a.UserID, c.WorkGroupName
from dbo.tblUserProgramme a 
where a.ProgrammeID = 59 AND 
a.UserID  IN (SELECT UserID  FROM tblUser a WHERE a.WorkGroupID IN
(SELECT WorkGroupID FROM tblWorkGroup
WHERE WorkGroupName like '%Insight%') 
```

# mysql - MySQL 连接表，如果不满足条件仍返回为 null

> ID：12272423
> 
> 赞同：4
> 
> 时间：2012-09-04T22:51:45.250
> 
> 标签：mysql, sql

我有这个 MySQL 查询

```
SELECT perms.permission_id, perms.long_title, perms.category, gperms.value FROM
acl_permissions AS perms JOIN acl_group_permissions AS gperms ON
(perms.permission_id = gperms.permission_id AND gperms.group_id = 1) WHERE
perms.type IN ('adm', 'cs') AND perms.simple_title NOT IN ('adm_', 'cs_')
ORDER BY perms.long_title 
```

基本上导致问题的位在`ON`. 我希望查询根据 where 条件返回所有行，`perms`而不管是否有行匹配`gperms.group_id = 1`。

`gperms.value`如果没有行匹配，理想情况下只是一个空字符串`gperms.group_id = 1`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T23:03:25.823

您想要`LEFT OUTER JOIN`（或`LEFT JOIN`简称）gperms 而不仅仅是直接连接

```
SELECT perms.permission_id, perms.long_title, perms.category, gperms.value 
FROM acl_permissions AS perms 
LEFT JOIN acl_group_permissions AS gperms 
    ON (perms.permission_id = gperms.permission_id AND gperms.group_id = 1) 
WHERE perms.type IN ('adm', 'cs') 
    AND perms.simple_title NOT IN ('adm_', 'cs_')
ORDER BY perms.long_title 
```

`NULL`对于在给定条件下不加入 gperms 的任何行，它将返回gperms.value。

如果你想要一个空字符串而不是`NULL`你可以使用`IFNULL()`：

```
SELECT perms.permission_id, perms.long_title, perms.category, IFNULL(gperms.value,'') 
```

# c# - 我能否仅通过配置更改来修复 DB2 查询超时？

> ID：12272428
> 
> 赞同：2
> 
> 时间：2012-09-04T22:52:08.243
> 
> 标签：c#, .net-2.0, db2

我能否仅通过配置更改来修复 DB2 连接超时？

请注意，我正在运行以下版本的 db2 客户端连接软件：

```
Y:\>db2level
DB21085I  Instance "DB2" uses "32" bits and DB2 code release "SQL08015" with
level identifier "02060106".
Informational tokens are "DB2 v8.1.5.449", "s040212", "WR21334", and FixPak
"5". 
```

我注意到，当我启动配置助手时，似乎有一个用于设置 QueryTimeout 值的连接级别选项：

![在此处输入图像描述](../Images/7aeaa9a9749cc84f03ef1089c5ac6f27.png) 但是，我想更改值。由于没有“更新”按钮，只有一个添加，我想我可能必须删除设置并重新添加才能修改它。但是，当我重新添加它时，QueryTimeOout 设置不在我的列表中。

![在此处输入图像描述](../Images/27bf5ac717e93666f85a35b5c42cf625.png)

可能是我在某处更新了配置文件，这就是首次引入设置的方式。我不记得了。

1.  我想知道在哪里可以找到包含这些设置的文件的位置。

2.  此设置*可*在其他人的 PC 上使用，该 PC 具有较新版本的 db2 客户端。在他的 PC 上将其设置为 0 会覆盖程序中的任何默认 CommandTimeout 设置吗？请注意，查询不会在我的 PC 上超时，仅在其他用户的 PC 上。

3.  我试图在这个 WinForm 应用程序的 app.config 文件中更改我的 ConnectionString 以包含选项“QueryTimeout = 0”

connectionString="Database=MyServer;Server=MyHost.MyCompany.com:MyPortNumber;UID=MyuserId;PWD=MyPassword;QueryTimeout=0"

但我收到以下错误：

附加信息：无效参数

[这](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=/com.ibm.swg.im.dbclient.adonet.ref.doc/doc/DB2ConnectionClassConnectionStringProperty.html)是有关此 ConnectionString 设置的文档。我究竟做错了什么？

获取或设置 QueryTimeout 关键字的值。QueryTimeout 指示在尝试取消执行并将控制权返回给应用程序之前等待 SQL 语句或 XQuery 表达式完成执行的默认秒数。此属性覆盖默认的 30 秒 DB2Command.CommandTimeout 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T00:27:48.760

从 db2 命令行 (db2cmd) 尝试以下操作。

```
 db2"update cli configuration for section common using querytimeoutinterval 60" 
```

将时间设置为 60 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-29T19:31:00.260

您应该在 app.config 文件中设置“QueryTimeout=30”以在执行 30 秒后取消查询。QueryTimeout 不是 CLI 关键字，因此您不能使用配置帮助或 db2 命令行工具将其设置为 CLI 参数。您可以在 app.config 文件或 db2dsdriver.cfg 文件中设置它，也可以通过设置语句属性 SQL_ATTR_QUERY_TIMEOUT 来设置它。

QueryTimeoutInterval 的默认值为 1 秒。它将每 1 秒检查一次是否发生超时。它是一个 CLI 关键字，您可以将其添加到 db2cli.ini 文件中，但对 .NET 程序无效。.NET 应用程序不读取 db2cli.ini 文件。

# javascript - 无法在 PaperScript / Javascript 中创建图像？

> ID：12272429
> 
> 赞同：0
> 
> 时间：2012-09-04T22:52:39.227
> 
> 标签：javascript, html, canvas, html5-canvas, paperjs

我似乎无法`var imageObj = new Image();`在 [Paperscript][1] 中为 HTML5 画布创建图像。Paperscript 应该建立在 Javascript 之上，所以我不明白为什么它不起作用。

@ Alex Wayne - 我的画布上没有弹出图像。如果我将 "script type="text/paperscript" canvas='canvas'" 更改为 "script type="text/javascript" canvas='canvas'" 图像就会出现背部

@James - 你能给我一个链接来帮助我更好地理解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T04:18:58.197

我必须用来自[http://paperjs.org/tutorials/images/working-with-rasters/的基本代码来回答这个问题](http://paperjs.org/tutorials/images/working-with-rasters/)

// 使用 id='mona' 的图像标签创建一个光栅项 var raster = new Raster('mona');

// 将光栅移动到视图的中心 raster.position = view.center;

// 将栅格缩放 50% raster.scale(0.5);

// 将光栅旋转 45 度：raster.rotate(45);

# asp.net-mvc - 与云集成捆绑的建议策略和库

> ID：12272437
> 
> 赞同：2
> 
> 时间：2012-09-04T22:55:07.553
> 
> 标签：asp.net-mvc, asp.net-mvc-4, bundling-and-minification

我正在优化我的 ASP.net MVC 4 网站。我目前正在使用运行时捆绑来组合和缩小我的 JavaScript 和 CSS 内容。我想在创建时自动将缩小的内容发布到 CDN（特别是 Amazon Cloudfront）。

我正在尝试确定将捆绑文件与 CDN 集成的最佳策略。我的具体问题是：

*   是否有任何可用的库允许将捆绑的文件保存到 CDN 而不是我的本地 Web 服务器？
*   静态文件应该在捆绑之前从 CDN 中提取，还是应该在捆绑之前从本地 Web 服务器中提取？
*   是否有任何机制可以仅从我的网络农场（而不是公众）启用 CDN 写入控制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T23:09:13.770

我个人并不认同“将 CDN 用于一切静态！！” 心态，所以我拒绝担心将本地脚本复制到 CDN，如您所述。当然，可以从现有的主要 CDN（雅虎、微软、谷歌）中引用大型库，但对于本地脚本，这真的不值得麻烦，IMO。

按照这种思路，我变得非常喜欢[SquishIt](https://github.com/jetheredge/SquishIt)。无需使用额外的 XML 配置或预初始化。只需将其包含在主文件或布局文件中，如下所示：

```
<%= Bundle.Css()
        .Add("~/Content/Reset.less")
        .Add("~/Content/Site.less")
        .Add("~/Scripts/rcarousel/widget/css/rcarousel.css")
        .Add("~/Scripts/jquery.fancybox-1.3.4/fancybox/jquery.fancybox-1.3.4.css")
        .Add("~/Content/Fonts/Karla/stylesheet.css")
        .Render("~/Cache/Bundle.css") %>

<%= Bundle.JavaScript()
        .Add("~/Scripts/jquery-1.7.2.js")
        .Add("~/Scripts/jquery-ui-1.8.19.js")
        .Add("~/Scripts/modernizr-2.5.3.js")
        .Add("~/Scripts/rcarousel/widget/lib/jquery.ui.rcarousel.js")
        .Add("~/Scripts/jquery.fancybox-1.3.4/fancybox/jquery.fancybox-1.3.4.js")
        .Add("~/Scripts/jquery.youtubelite.js")
        .Render("~/Cache/Bundle.js") %> 
```

话虽如此，但更重要的是：

1) 我不知道有任何支持自动 CDN 部署的捆绑库。这里通常的思路是从您的网站目录中提取 CDN 并将其缓存。通过这种方式，部署是通过拉机制而不是推送来建立的。[本文](http://macintoshhowto.com/advanced/how-to-use-amazon-cloudfront-to-serve-your-wordpress-site.html)介绍如何使用 CloudFront 和 word press 站点设置源拉取。我确信 ASP.NET 的配置是相似的。

2）从本地副本捆绑。您可能已经在开发中引用了本地副本，那么为什么要在上线之前将 CDN 添加到组合中呢？

3) 大多数云存储系统（Amazon S3、Azure Storage、Rackspace Cloud Files）都提供了一种将文件发布到云的方式，这些文件对公众保持只读状态。这取决于 API，因此该方法因您的云存储提供商而异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T15:57:18.767

经过更多研究后，我发现了[Squishit.S3](https://github.com/AlexCuse/SquishIt.S3)库，它完全符合我的需要。本质上，它搭载了 squishit，使捆绑的文件能够在运行时复制到 S3/Cloudfront 存储桶。配置轻而易举，因为它使用 Amazon 的 API，所以使用凭证写入 CDN。如果您已经使用 Squishit，只需在 global.asax 中添加几个*默认配置*行，其余的会为您处理

# html - 控制 Soundcloud HTML5 小部件播放器音量

> ID：12272441
> 
> 赞同：5
> 
> 时间：2012-09-04T22:55:41.733
> 
> 标签：html, html5-audio, soundcloud, volume, web-widget

我一直在尝试使用[Soundcloud 博客页面](http://developers.soundcloud.com/blog/html5-widget-api)上给出的示例，以便将音量设置得更低。

我只更改了`iframe`大小和`src=`播放列表，并将音量设置为 10，这样我就可以注意到它是否有效。到目前为止，我观察到没有任何变化，音量仍为 100%。

我已经尝试过，无论是否将以下内容放在我的模板头部。这似乎无关紧要。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

这是我从 Soundcloud 示例中调整的代码：

```
 <iframe id="sc-widget" width="350" height="332" scrolling="no" frameborder="no" src="http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Fplaylists%2F1417174&auto_play=true&show_artwork=false&color=37415f"></iframe>

  <script src="http://w.soundcloud.com/player/api.js" type="text/javascript"></script>
  <script type="text/javascript">
  (function(){
    var widgetIframe = document.getElementById('sc-widget'),
        widget       = SC.Widget(widgetIframe);

    widget.bind(SC.Widget.Events.READY, function() {
      widget.bind(SC.Widget.Events.PLAY, function() {
        // get information about currently playing sound
        widget.getCurrentSound(function(currentSound) { 
          console.log('sound ' + currentSound.get('') + 'began to play');
        });
      });
      // get current level of volume
      widget.getVolume(function(volume) {
        console.log('current volume value is ' + volume);
      });
      // set new volume level
      widget.setVolume(10);
    });

  }());
  </script> 
```

[此代码位于 Joomla 网站上。](http://mediaservicesnyc.com/)

有人可以帮我了解我在控制音量方面缺少什么吗？

这是一个jquery冲突吗？如果是这样，关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-10T11:10:13.493

音量范围实际上是从 0 到 1，这在文档中是错误的。因此，如果您想将音量设置为 10%，则需要：

```
var widgetIframe = document.getElementById('sc-widget'),
widget       = SC.Widget(widgetIframe);

widget.setVolume(0.1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-23T20:27:28.230

以前的答案不再准确。setVolume() api 已修复/更改为采用 0 到 100 之间的 int。

我偶然发现了这个问题，试图使用 chrome 控制台快速更改嵌入式 SoundCloud iframe 的音量。我为自己创建了一个快速要点。 [https://gist.github.com/propagated/78aaedfbc0c23add7691bb975b51a3ff](https://gist.github.com/propagated/78aaedfbc0c23add7691bb975b51a3ff)

```
//load soundcloud js api if needed
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = 'http://w.soundcloud.com/player/api.js';
document.head.appendChild(script);

//get the id of the player iframe or inject it using chrome
var id = 'scplayer',
    widgetIframe = document.getElementById(id),
    fixWidget = SC.Widget(widgetIframe);
fixWidget.setVolume(50); //% between 1 and 100 
```

# android - 如何使用 Cordova 检查 Android 设备中是否存在摄像头？

> ID：12272442
> 
> 赞同：1
> 
> 时间：2012-09-04T22:55:40.863
> 
> 标签：android, camera, cordova-2.0.0

我可以知道如何测试 Android 设备中是否存在摄像头吗？我想将此选项设为可选，因此如果有摄像头，则某些功能应该可以工作，否则它们应该显示摄像头不存在，因此此功能不可用。或者如果相机不可用，至少隐藏该选项。

我不想做任何 Java 编码，因为 Apache Cordova 纯粹基于 javascript。我想签入javascript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T23:06:09.477

试试这些，使用最适合您需求和目标平台的

**1）这不是很好的方法，因为它必须打开相机。但它应该工作，**

```
private android.hardware.Camera mCameraDevice;

try {
  mCameraDevice = android.hardware.Camera.open();
} catch (RuntimeException e) {
  Log.e(TAG, "fail to connect Camera", e);
  // Throw exception
} 
```

或者**这是最好的方法**

```
import android.content.pm.PackageManager;

PackageManager pm = context.getPackageManager();

if (pm.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
} 
```

或[getNumberOfCameras](http://developer.android.com/reference/android/hardware/Camera.html#getNumberOfCameras%28%29)

```
import android.hardware.Camera;

int numCameras = Camera.getNumberOfCameras();
if (numCameras > 0) {
  hasCamera = true;
} 
```

# .net - .NET Regex Lookbehind Not Greedy

> ID：12272445
> 
> 赞同：5
> 
> 时间：2012-09-04T22:56:06.867
> 
> 标签：.net, regex, lookbehind

如何让后向变得贪婪？
在这种情况下，我希望后向使用 : if is present。

```
m = Regex.Match("From: John", @"(?i)(?<=from:)....");
// returns ' Jon' what I expect not a problem just an example

m = Regex.Match("From: John", @"(?i)(?<=from:?)....");
// returns ': Jo'
// I want it to return ' Jon' 
```

我找到了解决方法

```
@"(?i)(?<=\bsubject:?\s+).*?(?=\s*\r?$)" 
```

只要你在后面加上一些肯定的？然后它消除了可选的贪婪。出于同样的原因，我不得不将 $ 放在前瞻中。
但是，如果您需要以可选的贪婪结束，那么必须使用下面接受的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T23:17:05.017

有趣的是，我没有意识到他们在 .NET 中并不贪婪。这是一种解决方案：

```
(?<=from(:|(?!:))) 
```

这表示：

```
(
  :     # match a ':'
  |
  (?!:) # otherwise match nothing (only if the next character isn't a ':')
) 
```

这会强制它匹配“：”（如果存在）。

# facebook - Facebook 像 XFBML 一样双倍

> ID：12272446
> 
> 赞同：0
> 
> 时间：2012-09-04T22:56:10.217
> 
> 标签：facebook, button, facebook-like, xfbml

我想使用这个 XFBML 在我的页面中添加一个 facebook like 按钮：

```
<fb:like send="false" width="90" show_faces="false" layout="button_count" href="http://www.google.fr"><fb:like> 
```

但它出现了 2 行类似按钮：

```
[Like] Be the first of your friends to like this.
[Like]{176k] 
```

我只想保留第二个。我怎么能这样做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:01:34.373

你没有`<fb:like>`用 a 关闭你的标签`/`：

```
<fb:like send="false" width="90" show_faces="false" layout="button_count" 
   href="http://www.google.fr"></fb:like> 
```

# xml - 如何在 Alfresco/Share 表单中添加新字段？

> ID：12272458
> 
> 赞同：1
> 
> 时间：2012-09-04T22:57:50.457
> 
> 标签：xml, forms, customization, share, alfresco

好的，所以我们知道 Alfresco 有标准的表格，它随附。例如，默认的 ad-hoc 表单如下所示：

![在此处输入图像描述](../Images/e60dae19e1a312ccaba8218455dacc58.png)

现在，如果我想自定义该表单，比如添加一个单独的**Items**字段，我将如何去做呢？我的意思是，我想要一个只显示当前项目的字段。另一个字段显示同一空间中的所有相关项目。我有脚本可以将空间中的所有项目显示到单个项目字段中，所以我认为我应该能够操纵它，但我首先需要附加项目字段才能这样做。

我一直在尝试弄乱一些 XML 文件，并且我设法获得了一个额外的**Items**标签以显示在表单上，​​但不是可以使用**Add**填充或使用**Remove All 取消**填充的实际框。

我通过首先修改*/opt/alfresco-4.0.d/tomcat/webapps/share/WEB-INF/classes/alfresco/form-config.xml**来***做到这一点：

```
<alfresco-config>

   <plug-ins>
      <element-readers>
         <element-reader element-name="forms" class="org.alfresco.web.config.forms.FormsElementReader"/>
      </element-readers>
      <evaluators>
         <evaluator id="node-type" class="org.alfresco.web.config.forms.NodeTypeEvaluator" />
         <evaluator id="model-type" class="org.alfresco.web.config.forms.ModelTypeEvaluator" />
         <evaluator id="task-type" class="org.alfresco.web.config.forms.TaskTypeEvaluator" />
         <evaluator id="aspect" class="org.alfresco.web.config.forms.AspectEvaluator" />
      </evaluators>
   </plug-ins>

   <config>
      <forms>
         <default-controls>
            <type name="text" template="/org/alfresco/components/form/controls/textfield.ftl" />
            <type name="mltext" template="/org/alfresco/components/form/controls/textarea.ftl" />
            <type name="int" template="/org/alfresco/components/form/controls/number.ftl" />
            <type name="float" template="/org/alfresco/components/form/controls/number.ftl" />
            <type name="double" template="/org/alfresco/components/form/controls/number.ftl" />
            <type name="long" template="/org/alfresco/components/form/controls/number.ftl" />
            <type name="boolean" template="/org/alfresco/components/form/controls/checkbox.ftl" />
            <type name="date" template="/org/alfresco/components/form/controls/date.ftl" />
            <type name="datetime" template="/org/alfresco/components/form/controls/date.ftl">
               <control-param name="showTime">true</control-param>
            </type>
            <type name="period" template="/org/alfresco/components/form/controls/period.ftl" />
            <type name="any" template="/org/alfresco/components/form/controls/textfield.ftl" />
            <type name="category" template="/org/alfresco/components/form/controls/category.ftl" />
            <type name="content" template="/org/alfresco/components/form/controls/content.ftl" />
            <type name="association" template="/org/alfresco/components/form/controls/association.ftl" />
            <type name="association:cm:person" template="/org/alfresco/components/form/controls/authority.ftl" />
            <type name="association:cm:authority" template="/org/alfresco/components/form/controls/authority.ftl" />
            <type name="association:cm:authorityContainer" template="/org/alfresco/components/form/controls/authority.ftl" />
            <type name="association:packageItems" template="/org/alfresco/components/form/controls/workflow/packageitems.ftl" />
            <type name="association:singlePackageItem" template="/org/alfresco/components/form/controls/workflow/packageitems.ft" />
        <type name="transitions" template="/org/alfresco/components/form/controls/workflow/transitions.ftl" />
            <type name="taskOwner" template="/org/alfresco/components/form/controls/workflow/taskowner.ftl" />
            <type name="mbean_operations" template="/org/alfresco/components/form/controls/jmx/operations.ftl" />
            <!-- Data types that should always be rendered read-only -->
            <type name="qname" template="/org/alfresco/components/form/controls/readonly.ftl" />
            <type name="noderef" template="/org/alfresco/components/form/controls/readonly.ftl" />
            <type name="childassocref" template="/org/alfresco/components/form/controls/readonly.ftl" />
            <type name="assocref" template="/org/alfresco/components/form/controls/readonly.ftl" />
            <type name="path" template="/org/alfresco/components/form/controls/readonly.ftl" />
            <type name="locale" template="/org/alfresco/components/form/controls/readonly.ftl" />
         </default-controls>
         <constraint-handlers>
            <constraint type="MANDATORY" validation-handler="Alfresco.forms.validation.mandatory" event="keyup" />
            <constraint type="NUMBER" validation-handler="Alfresco.forms.validation.number" event="keyup" />
            <constraint type="MINMAX" validation-handler="Alfresco.forms.validation.numberRange" event="keyup" />
            <constraint type="LIST" validation-handler="Alfresco.forms.validation.inList" event="blur" />
            <constraint type="REGEX" validation-handler="Alfresco.forms.validation.repoRegexMatch" event="keyup" />
            <constraint type="LENGTH" validation-handler="Alfresco.forms.validation.length" event="keyup" />
         </constraint-handlers>
      </forms>
   </config>

</alfresco-config> 
```

这里唯一真正的变化是增加了`<type name="association:singlePackageItem" template="/org/alfresco/components/form/controls/workflow/packageitems.ft" />`.

接下来，我进入*/opt/alfresco-4.0.d/tomcat/webapps/share/WEB-INF/classes/alfresco/share-workflow-form-config.xml **，***修改如下：

```
<alfresco-config>

   <!-- ************************************** -->
   <!-- Workflow Definition Form Configuration -->
   <!-- ************************************** -->

   <!--
      When workflows are started some bpm:workflowXxx properties are copied to the task and named bpm:xxx
      I.e The bpm:workflowDueDate workflow property becomes the bpm:dueDate task property. 
   -->

   <!-- Ad Hoc Workflow Definition -->
   <config evaluator="string-compare" condition="jbpm$wf:adhoc">
      <forms>
         <form>
            <field-visibility>
               <show id="bpm:workflowDescription" />
               <show id="bpm:workflowDueDate" />
               <show id="bpm:workflowPriority" />
               <show id="bpm:assignee" />
               <show id="packageItems" /> 
                 <show id="singlePackageItem" />
               <show id="bpm:sendEMailNotifications" />
            </field-visibility>
            <appearance>
               <set id="" appearance="title" label-id="workflow.set.general" />
               <set id="info" appearance="" template="/org/alfresco/components/form/2-column-set.ftl" />
               <set id="assignee" appearance="title" label-id="workflow.set.assignee" />
               <set id="items" appearance="title" label-id="workflow.set.items" /> 
                 <set id="thisOneItem" appearance="title" label-id="workflow.set.items" />
               <set id="other" appearance="title" label-id="workflow.set.other" />

               <field id="bpm:workflowDescription" label-id="workflow.field.message">
                  <control template="/org/alfresco/components/form/controls/textarea.ftl">
                     <control-param name="style">width: 95%</control-param>
                  </control>
               </field>
               <field id="bpm:workflowDueDate" label-id="workflow.field.due" set="info" />
               <field id="bpm:workflowPriority" label-id="workflow.field.priority" set="info">
                  <control template="/org/alfresco/components/form/controls/workflow/priority.ftl" />
               </field>
               <field id="bpm:assignee" label-id="workflow.field.assign_to" set="assignee" />
               <field id="packageItems" set="items" /> 
                 <field id="singlePackageItem" set="thisOneItem" />
               <field id="bpm:sendEMailNotifications" set="other">
                  <control template="/org/alfresco/components/form/controls/workflow/email-notification.ftl" />
               </field>
            </appearance>
         </form>
      </forms>
   </config>

   <!-- Activiti Ad Hoc Workflow Definition -->
   <config evaluator="string-compare" condition="activiti$activitiAdhoc">
      <forms>
         <form>
            <field-visibility>
               <show id="bpm:workflowDescription" />
               <show id="bpm:workflowDueDate" />
               <show id="bpm:workflowPriority" />
               <show id="bpm:assignee" />
               <show id="packageItems" /> 
                 <show id="singlePackageItem" />
               <show id="bpm:sendEMailNotifications" />
            </field-visibility>
            <appearance>
               <set id="" appearance="title" label-id="workflow.set.general" />
               <set id="info" appearance="" template="/org/alfresco/components/form/2-column-set.ftl" />
               <set id="assignee" appearance="title" label-id="workflow.set.assignee" />
               <set id="items" appearance="title" label-id="workflow.set.items" /> 
                 <set id="thisOneItem" appearance="title" label-id="workflow.set.items" />
               <set id="other" appearance="title" label-id="workflow.set.other" />

               <field id="bpm:workflowDescription" label-id="workflow.field.message">
                  <control template="/org/alfresco/components/form/controls/textarea.ftl">
                     <control-param name="style">width: 95%</control-param>
                  </control>
               </field>
               <field id="bpm:workflowDueDate" label-id="workflow.field.due" set="info" />
               <field id="bpm:workflowPriority" label-id="workflow.field.priority" set="info">
                  <control template="/org/alfresco/components/form/controls/workflow/priority.ftl" />
               </field>
               <field id="bpm:assignee" label-id="workflow.field.assign_to" set="assignee" />
               <field id="packageItems" set="items" /> 
                 <field id="singlePackageItem" set="thisOneItem" />
               <field id="bpm:sendEMailNotifications" set="other">
                  <control template="/org/alfresco/components/form/controls/workflow/email-notification.ftl" />
               </field>
            </appearance>
         </form>
      </forms>
   </config>

</alfresco-config> 
```

同样，这里唯一真正的变化是在 的`<show id="singlePackageItem" />`任何实例之后`<show id="packageItems" />`添加，在 的`<set id="thisOneItem" appearance="title" label-id="workflow.set.items" />`任何实例之后`<set id="items" appearance="title" label-id="workflow.set.items" />`添加，以及在 的`<field id="singlePackageItem" set="thisOneItem" />`任何实例之后添加`<field id="packageItems" set="items" />`。

但这是结果：

![在此处输入图像描述](../Images/987c0732984861b57a579cd790036b2a.png)

现在，我不认为这会那么容易。但是，我在**share-workflow-form-config.xml**文件中尝试了一些不同的配对，但这似乎是唯一导致至少可见显示额外标签**Items**的配对，尽管没有其余标签组件。我只是想知道是否有人有自定义这些表单的经验，和/或可能知道我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T09:05:21.293

您能否发布一些您正在努力实现的目标的图片，也许是您已经取得的成就？只是为了说清楚。我不明白当你已经有一个字段在做它的工作时，你为什么要添加另一个字段“项目”。无论如何，临时表单是工作流的一部分，您是否要更改工作流表单或其他一些东西，例如节点的上传和更改属性？这些是不同的东西。在这两种情况下，您都应该使用**share-workflow-form-config.xml**或**share-config-custom.xml 之类的文件**。无论如何，你不能只添加一个像“singlePackageItem”这样的组件而不在某处声明它。id packageItems 和 set Items 正在调用一个名为 packageItems.ftl 的文件，该文件公开您看到的表单。您可以在以下位置找到该文件：

```
/alfresco/tomcat/webapps/share/WEB-INF/classes/alfresco/site-webscripts/org/alfresco/components/form/controls/workflow 
```

与所有其他 ftl 文件一起公开您在工作流中看到的表单。如果您想自定义表单并公开一些自定义属性或字段，您应该首先使用一些（工作流）内容建模，您可以在此处找到一个 wiki： [自定义共享工作流 UI](http://wiki.alfresco.com/wiki/Custom_Share_Workflow_UI)

如果您可以更具体地说明您想要实现的目标，请询问，我可以看看是否可以帮助您。

好吧，也许我误解了，但这是我的想法。您应该有一个带有脚本的控制器**js**文件，以及一个在字段中公开这些文档的模板文件**ftl 。**编辑* 如果您使用**packageItems**表单字段，则使用 Alfresco 提供的即用型表单。您应该实现自己的 freemarker 模板文件，该文件读取您的脚本并公开此列表和您需要的单个文件。您可以从查看 Share 中默认表单控件中的代码开始：'/Alfresco/tomcat/webapps/share/WEB-INF/classes/alfresco/site-webscripts/org/alfresco/components/form/controls/' 然后，您可以从**share-workflow-form-config.xml**中调用您自己的 ftl 表单控件，如下所示：

```
 <config evaluator="string-compare" condition="jbpm$wf:adhoc">
      <forms>
         <form>
            <field-visibility>
               <show id="bpm:workflowDescription" />
               <show id="bpm:workflowDueDate" />
               <show id="bpm:workflowPriority" />
               <show id="bpm:assignee" />
               <show id="my:ListFiles" />
               <show id="packageItems" />
               <show id="wf:notifyMe" />
            </field-visibility>
            <appearance>
               <set id="" appearance="title" label-id="workflow.set.general" />
               <set id="info" appearance="" template="/org/alfresco/components/form/2-column-set.ftl" />
               <set id="assignee" appearance="title" label-id="workflow.set.assignee" />
               <set id="items" appearance="title" label-id="workflow.set.items" />
               <set id="other" appearance="title" label-id="workflow.set.other" />

               <field id="bpm:workflowDescription" label-id="workflow.field.message">
                  <control template="/org/alfresco/components/form/controls/textarea.ftl">
                     <control-param name="style">width: 95%</control-param>
                  </control>
               </field>
               <field id="bpm:workflowDueDate" label-id="workflow.field.due" set="info" />
               <field id="bpm:workflowPriority" label-id="workflow.field.priority" set="info">
                  <control template="/org/alfresco/components/form/controls/workflow/priority.ftl" />
               </field>
**<field id="my:ListFiles" set="items">
                  <control template="/org/alfresco/components/form/controls/workflow/customListItems.ftl" />
               </field>**
               <field id="packageItems" set="items" />
               <field id="wf:notifyMe" set="other" />
            </appearance>
         </form>
      </forms>
   </config> 
```

# c# - 如何在屏幕上显示当前的相机分辨率

> ID：12272459
> 
> 赞同：0
> 
> 时间：2012-09-04T22:58:09.897
> 
> 标签：c#, windows-phone-7

我正在尝试在屏幕上显示当前的相机分辨率，以便用户知道当前的分辨率是多少，并在必要时随意调整。在我的应用程序中，所有相机功能都有效，但由于某种原因，每当我尝试访问当前相机分辨率并将其显示在文本框中时，都会收到 UnauthorizedAccessException。我尝试在 OnNavigatedTo 事件和我的 camera_Initialized 事件中查询分辨率值。我做错了什么，我该如何更改我当前的实现以使其正常工作？

MainPage.xaml.cs

```
protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        if ((PhotoCamera.IsCameraTypeSupported(CameraType.Primary) == true) ||
             (PhotoCamera.IsCameraTypeSupported(CameraType.FrontFacing) == true))
        {
            // Initialize the camera, when available.
            if (PhotoCamera.IsCameraTypeSupported(CameraType.Primary))
            {
                // Use front-facing camera if available.
                camera = new PhotoCamera(CameraType.Primary);

                camera.Initialized += camera_Initialized;

                viewfinderBrush.SetSource(camera);

                //display current resolution
                resolutionValueTextBlock.Text = "resolution: " + camera.Resolution.ToString();  //UnauthorizedAccessException occurs here
            }
        }
        ...
    }

void camera_Initialized(object sender, CameraOperationCompletedEventArgs e)
    {
        if (e.Succeeded)
        {
            if (Settings.firstRun.Value)
            {
                //Set highest camera resolution on first run and by default
                Size resolution = camera.AvailableResolutions.OrderByDescending(s => s.Width).First();
                camera.Resolution = resolution;

                //display current resolution
                resolutionValueTextBlock.Text = "resolution: " + camera.Resolution.ToString();  //UnauthorizedAccessException

                ...

            }
            else
            {
                Size resolution = camera.AvailableResolutions.ElementAt(Settings.tempResolutionIndex.Value);
                camera.Resolution = resolution;

                //display current resolution
                resolutionValueTextBlock.Text = "resolution: " + camera.Resolution.ToString(); //UnauthorizedAccessException
            }                     
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T00:13:39.780

由于您尝试在 UI 上显示某些内容，因此您需要使用 Dispatcher 来执行此操作。

```
Deployment.Current.Dispatcher.BeginInvoke( ()=> { resolutionValueTextBlock.Text = "resolution: " + camera.Resolution.ToString(); }); 
```

# jquery - 为什么 _init 或 _create 没有在自己的 jQuery Widget 中触发？

> ID：12272466
> 
> 赞同：1
> 
> 时间：2012-09-04T22:59:40.043
> 
> 标签：jquery, widget

我尝试开发我的第一个 jQuery 小部件：

```
 (function( $ ) {
            $.widget( "ui.weekCalendar", {

                options: { 
                    start : new Date(),
                    end : new Date(),
                },

                // Set up the widget
                _create: function() {
                    alert('GNAAA');
                },

                _setOption: function( key, value ) {
                    switch( key ) {
                        case "clear":
                        break;
                    }

                    $.Widget.prototype._setOption.apply( this, arguments );
                    this._super( "_setOption", key, value );
                },

                destroy: function() {
                    $.Widget.prototype.destroy.call( this );

                }
            });
        }( jQuery ) );      

        $('#calendar').weekCalendar(); 
```

我按照[http://wiki.jqueryui.com/w/page/12138135/Widget%20factory](http://wiki.jqueryui.com/w/page/12138135/Widget%20factory)上的说明进行操作。但我不明白为什么 _create 函数没有触发。即使这样 _init 函数也不会被触发。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:27:28.280

多么愚蠢的错误：

```
$('#calendar').weekCalendar(); 
```

应该

```
$(document).ready(function(){
    $('#calendar').weekCalendar();          
}); 
```

花费了我生命中的 3 个小时 :(

# mysql - SQL（mysql）查询改进

> ID：12272468
> 
> 赞同：0
> 
> 时间：2012-09-04T23:00:14.667
> 
> 标签：mysql, sql, performance

首先，让我解释一下我的数据结构。

我有一个名为 profile 的模型，witch 是服务提供商的配置文件。服务提供商可以从两种不同类型的“旅行”中进行选择（两者都有，也没有任何一种）。第一种出行方式是“我可以去客户那里”。为此，服务提供商需要输入他可以前往的所有城市（多对多）。第二种“旅行”模式是“我的客户可以来找我”。那些，他从列表中选择他所在的城市（一对多）。

对于“我可以去客户”旅行模式，我有一个带有 profile_id 和一个 local_id 的 locals_profile 表以及一个带有城市名称的 locals 表。

对于“我的客户可以来找我”，我有一个带有 profile_id 和 city_id 的位置表和一个带有城市名称的城市表。

在您问之前，由于项目建模中的其他事情，我不能在两种情况下都使用同一张表作为城市名称（如果可以的话，性能会提高吗？）。

此外，配置文件属于许多子类别，请给我们带来另一个名为 profiles_sub_categories 的表，其中包含 sub_category_id 和 profile_id 字段。

我想要的是，给定一个子类别，显示我在每个城市有多少物品。例如：

*   对于“设计师”子类别：
    *   纽约 (100)
    *   旧金山 (50)
    *   迈阿密 (10)
    *   ...（最多 10 个城市）

我已经通过以下查询完成了我想要的内容：

```
select q1.city_name, if(q1.city_count is null, 0, q1.city_count) + if(q2.city_count is null, 0, q2.city_count) city_count
from
  (select l.name as city_name, count(*) as city_count from locals_profiles lp
  inner join locals l on l.id = lp.local_id
  inner join profiles p on p.id = lp.profile_id
  inner join profiles_sub_categories ps on ps.profile_id = p.id
  where ps.sub_category_id = 97 and l.level = 2
  group by 1) q1
left join
  (select c.name as city_name, count(*) as city_count from cities c
  inner join locations lo on lo.city_id = c.id
  inner join profiles p on lo.profile_id = p.id
  inner join profiles_sub_categories ps on ps.profile_id = p.id
  where ps.sub_category_id = 97
  group by 1) q2
on q1.city_name = q2.city_name
order by 2 DESC
limit 10; 
```

但是查询需要很长时间才能执行。由于它是一个网络应用程序，我需要它几乎是即时的。有谁知道更好的方法来做我正在尝试的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:55:39.917

我发现 mysql 在优化查询方面做得不好。简单的解决方案是编写两个查询并将它们合并到应用程序层。令人惊讶的是，它可能会更快......

或者，您可以尝试消除视图 (q1,q2) 并多次为相同的表设置别名。可能很难做到正确......

# javascript - javascript websocket客户端

> ID：12272470
> 
> 赞同：1
> 
> 时间：2012-09-04T23:00:21.710
> 
> 标签：javascript, websocket

一个带有嵌入式 javascript 的 html 页面是否可以拥有一个以上的 websocket 客户端？还是每个 javascript 线程一个套接字？我似乎找不到任何关于此的文档，所以我想我会问这个小组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T23:11:28.873

[是的，Firefox 有限制。](https://bugzilla.mozilla.org/show_bug.cgi?id=664305) WebSockets*全局*（跨所有打开的页面）限制为 200 个并发连接。

Chrome 目前似乎没有[限制](http://blog.dennis-boldt.de/?p=177)，但他们正在重构 WebSocket 代码，看起来[他们将为每个“组”添加 30 个连接的限制](http://code.google.com/p/chromium/issues/detail?id=118268#c3)，我假设这意味着每个 Origin 30 个连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T23:05:53.643

尽可能多地制作：

```
var Socket = new WebSocket(url); 
```

# facebook - 打开图形对象类别。

> ID：12272473
> 
> 赞同：0
> 
> 时间：2012-09-04T23:00:56.797
> 
> 标签：facebook, object, facebook-opengraph, categories

使用多个对象的文档将某些对象的创建描述为“类别”，同时使用自定义属性来分配它们。

它还说：

> 注意：Facebook 只读取三个深度的对象关系，因此无需为每个对象映射超过 3 个关系。

如果一个对象有超过 3 个引用其他对象的自定义属性，这些关系是如何确定的？

它是列表中的前 3 个吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:11:14.173

它只读取 3 **deep** not **wide**。您可以（并且应该）在一个对象上拥有它需要的尽可能多的属性。

# python - 在不安装 MySQL 的情况下使用 Python 查询 MySQL 数据库

> ID：12272479
> 
> 赞同：1
> 
> 时间：2012-09-04T23:02:04.923
> 
> 标签：python, mysql, database

我想使用 Python 查询 MySQL 数据库，但显然 MySQLdb 包需要单独安装一个巨大的 MySQL 工具链。

如何使用 Python 脚本查询 MySQL 数据库而不安装一堆不必要的 MySQL 东西，包括在客户端机器上赋予 MySQL 服务器功能？

我不喜欢 Perl，但似乎 DBI 包允许 Perl 脚本与 MySQL 交互，而不需要包外部的任何 MySQL 内容。我正在为 Python 寻找类似的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T23:21:20.240

你需要找一个纯mysql的python库。在过去的几个月里，我见过一对夫妇。一个快速的谷歌搜索 yoeld pymysql。它在 github 上有大量的追随者。看起来很有希望。Pymysql 是一个纯python mysql 客户端。
[https://github.com/petehunt/PyMySQL](https://github.com/petehunt/PyMySQL)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T23:24:24.367

MySQLdb 只是可用的数据库驱动程序之一。它需要所有额外的安装东西，因为它编译 c 扩展并且是更快的选项之一。

还有一些其他的数据库驱动程序，其中一些是纯 Python 的。

SqlAlchemy 项目拥有更新的数据库驱动程序集合之一：

[http://docs.sqlalchemy.org/en/latest/core/engines.html](http://docs.sqlalchemy.org/en/latest/core/engines.html)

PyMysql 是一个纯 python 驱动程序，因此不需要针对本地 MySql 库构建它。

# unix - 使用 wget 从谷歌学者搜索结果中下载所有 pdf 文件

> ID：12272488
> 
> 赞同：8
> 
> 时间：2012-09-04T23:03:02.163
> 
> 标签：unix, wget, web-crawler

我想写一个简单的网络蜘蛛或者只是用来`wget`从谷歌学者下载 pdf 结果。这实际上是一种获取研究论文的好方法。

我已阅读有关 stackoverflow 的以下页面：

[使用 wget 抓取网站并限制抓取的链接总数](https://stackoverflow.com/q/4973152/957560)

[网络蜘蛛与 Wget 的蜘蛛有何不同？](https://stackoverflow.com/q/762235/957560)

[从网站下载所有 PDF 文件](https://stackoverflow.com/q/9744570/957560)

[如何使用 wget 从网站下载所有文件（但不是 HTML）？](https://stackoverflow.com/q/8755229/957560)

最后一页可能是最鼓舞人心的。我确实尝试按照[此](https://stackoverflow.com/q/8755229/957560)`wget`建议使用。

[因此](http://scholar.google.com/scholar?hl=en&q=liquid%20films%20pdf&btnG=&as_sdt=1,23&as_sdtp=)，我的谷歌学者搜索结果页面是但没有下载任何内容。

鉴于我对 webspider 的了解程度很低，我应该怎么做才能做到这一点？我确实意识到编写蜘蛛可能非常复杂，并且是我可能不想承担的项目。如果可以使用`wget`，那绝对很棒。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-05T12:24:02.530

```
wget -e robots=off -H --user-agent="Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.3) Gecko/2008092416 Firefox/3.0.3" -r -l 1 -nd -A pdf http://scholar.google.com/scholar?q=filetype%3Apdf+liquid+films&btnG=&hl=en&as_sdt=0%2C23 
```

需要注意的几点：

1.  在搜索查询中使用 filetyle:pdf
2.  一级递归
3.  - 仅接受 pdf 的 pdf
4.  -H 跨越主机
5.  -e robots=off 并使用 --user-agent 将确保获得最佳结果。Google Scholar 拒绝空白用户代理，并且 pdf 存储库可能不允许使用机器人。

当然，限制是这只会打到结果的第一页。您可以扩展递归的深度，但这会很疯狂并且会永远持续下去。我建议使用[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)和 wget 子流程之类的组合，以便您可以策略性地解析和遍历搜索结果。

# javascript - 试图理解 js call()

> ID：12272495
> 
> 赞同：0
> 
> 时间：2012-09-04T23:04:18.867
> 
> 标签：javascript, jquery

我试图理解这行代码。它来自 blueimp jquery 文件上传。我已经在这一行提取了我需要的部分（它用我已经拥有的图像填充我的页面）。我不清楚为什么需要这样称呼它。我理解 call() 方法，只是不清楚这一点 - 似乎更加复杂：

```
$('#fileupload').fileupload('option', 'done').call($('#fileupload'), null, {result: data.images}); 
```

data.images 是一组 JSON 图像。该代码有效，只是不清楚为什么我需要按原样调用事物。

这是原始代码 - 为看起来像的多个字段制作）

[https://github.com/blueimp/jQuery-File-Upload/blob/master/js/main.js#L53](https://github.com/blueimp/jQuery-File-Upload/blob/master/js/main.js#L53)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:49:47.387

`$('#fileupload').fileupload('option', 'done')`读取`done`选项的值，这似乎是一个回调函数。由于该函数没有作为`$('#fileupload')`元素的属性被调用，因此代码必须为`call`它提供预期值`this`。

# maven - Maven：“运行时”范围的目的是什么？

> ID：12272499
> 
> 赞同：123
> 
> 时间：2012-09-04T23:05:05.023
> 
> 标签：maven

> **可能的重复：**
> [了解编译与运行时的依赖关系](https://stackoverflow.com/questions/7070570/understanding-compile-vs-run-time-dependencies)

我知道具有“运行时”范围的依赖项将在运行时而不是在编译时可用。但我不明白你为什么想要那个！为什么不简单地使用“编译”范围呢？

[文档](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)并没有真正帮助。任何的想法？

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2012-09-05T02:02:11.763

runtime 对于单元测试和运行时所需的依赖项很有用，但在编译时则不然。这通常可能是动态加载的代码，例如 JDBC 驱动程序，它们在程序代码中没有直接引用。

将依赖项设置为运行时可确保不会意外依赖代码，并且还可以防止依赖项具有传递性。因此，例如，如果模块 A 对库 X 有运行时依赖，而模块 B 依赖于模块 A，则它*不会*继承对库 X 的依赖。使用“提供”或“编译”*将*导致 B 依赖于 X .

# mysql - 可以使用复合索引对 MySQL 中的更新查询进行排序吗？

> ID：12272501
> 
> 赞同：1
> 
> 时间：2012-09-04T23:05:09.297
> 
> 标签：mysql, sql-update, indexing

我们有一个更新查询，它需要使用“order by”子句来确保我们更新正确的行，如下所示：

```
UPDATE `plugin_name_codes`
USE|FORCE INDEX abc
SET `plugin_name_entry_id` = 2
WHERE `plugin_name_codes`.`plugin_name_form_id` = 3
AND (plugin_name_entry_id IS NULL) 
ORDER BY /*plugin_name_form_id asc, plugin_name_entry_id asc,*/ id ASC
LIMIT 1 
```

我们想使用索引对 ID 列进行排序，但是：

1.  UPDATE 查询中不使用索引提示（根据 MySQL 文档）。

2.  无论我如何创建索引（即
    使用所有三个查询的列（plugin_name_entry_id、plugin_name_form_id 和 id）或
    仅使用前 2 列），ORDER BY 子句似乎都忽略了索引。

3.  并且无论我在 ORDER BY 子句中包含哪些列，查询总是忽略索引。

这个 ORDER 子句为每个查询增加了整整 1 秒，这是非常不可接受的。任何人都知道我如何使用索引按 ID 或其他解决方法排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T00:28:38.583

简单介绍一下综合指数；首先要考虑的是查询数据的方式。如果您有一个复合键，例如`(col1, col2)`并且您尝试查询`SELECT * FROM tbl WHERE col2 = 5`，则不会使用索引，因为您需要`SELECT`先从左侧开始所有键。

使用`UPDATE`时，唯一一次使用索引是使用`WHERE`子句（也可能是`ORDER BY`）。考虑到上述信息，您需要确保使用了索引的最左侧列 ( `plugin_name_form_id`)。如果您有 的复合键`(col1, plugin_name_form_id)`，则该更新语句不会使用索引。您还可以反转索引的顺序`(plugin_name_form_id, col1)`以使其有用。

希望这可以帮助。

# javascript - Javascript函数中的“this”指的是什么

> ID：12272503
> 
> 赞同：7
> 
> 时间：2012-09-04T23:05:27.033
> 
> 标签：javascript

我了解`this`关键字背后的一般概念，但我无法弄清楚它在实践中实际指的是什么。例如，在这两个示例练习中，我都猜错了数字。

对于问题1，我说警报将是'5'，因为它指的是函数中匿名函数之外的this.x。

在 question2 中，我认为警报会是 5，因为这条线

```
var alertX = o.alertX; 
```

将变量 o 内的属性 x 的值 5 绑定到新变量 'alertX' ，该变量将成为下一行中的函数调用：alertX();

你能解释我为什么错了吗？

```
var question1 = function() {
    this.x = 5;
     (function() {
        var x = 3;
        this.x = x;
    })();
    alert(this.x);
};
var answer1 = 3; 

var question2 = function() {
    this.x = 9;
    var o = {
        'x':5,
        'alertX':function() { alert(this.x); }
    };
    var alertX = o.alertX;
    alertX();
}
var answer2 = 9; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T23:11:13.010

在第一种情况下，当您调用没有显式接收器的方法时`this`，全局对象是全局对象（`window`在 Web 浏览器中）。

在第二种情况下类似：即使该函数是在对象上定义的，并且您在另一个对象中，通过调用该函数并将`alertx()`其`this`设置为 Global/ `window`。

简而言之：

*   因为`foo.bar()`，`this`里面的`bar`会`foo`。
*   对于`bar()`，`this`将是全局对象。
    *   *这包括所谓的“自调用 lambdas”，即`(function(){ ... })()`.*
*   对于`bar.call(whee)`and `bar.apply(whee)`，`this`将是`whee`（因为这就是这些方法的作用）。

另一个例子：

```
var o1 = { name:"o1", f:function(){ console.log(this.name) } };
var o2 = { name:"o2" };
o2.gogogo = o1.f;
o2.gogogo(); // Will output "o2" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T23:19:33.483

这些很好的例子说明了**这**在 Javascript 中变得多么有趣。**this**总是指它被*调用/调用*的上下文，而不仅仅是它当时的位置！question2 就是一个很好的例子。

我假设您正在像这样全局调用这些：

```
question1();
question2(); 
```

**在问题1：**

您有一个匿名函数，在您第一次将 x 设置为 5 后运行。如果该匿名函数未设置为变量、函数内部等，*则会*将此设置为 window 的全局变量。但是您将它放在一个函数中并设置为变量 question1。因此，当它自行运行时，它将**this**（即 question1 函数）**x**变量设置为 3。

**在问题2中：**

X 最初设置为 9，在**本**例中为 question2。现在让你失望的是，即使在你设置的**o {}**对象中`x : 5`。你的 alertX 函数正在调用 this.x。所有这些都会让你认为它会警告 5！**但是您在o {}**对象之外调用警报函数，因此*this*再次引用 question2 函数！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T23:32:16.003

将以下内容放入浏览器的控制台

```
var x = -1, log = function(){ // set up some stuff
if(console) if(console.log) return console.log.apply(console, arguments),undefined;
return alert(arguments.join(', ')),undefined;
},
question1 = function() {
    this.x = 5; // question1.x is 5
     (function() { // anonymous function fires in global 'window'
        var x = 3; // so window.x is now 3
        this.x = x; // this is window
    })();
    log('ans1',this.x,this); // see below
},
question2 = function() {
    this.x = 9; // question2.x is 9
    var o = {
        'x':5,  // o.x is 5
        'alertX':function() { log('ans2',this.x,this); }
    };
    var alertX = o.alertX; // alertX === o.alertX
    alertX(); // being called in global scope

    // to make alertX have scope of question2
    this.alertX = o.alertX; // this is question2
    this.alertX(); // so we're calling from question2
},
a1 = new question1(), // note the new operator
a2 = new question2();
undefined; 
```

你会得到

```
ans1 5 question1
ans2 3 Window
ans2 9 question2 
```

# sql - 使用存储过程获取其中一列值的 SELECT 查询？

> ID：12272509
> 
> 赞同：1
> 
> 时间：2012-09-04T23:06:27.950
> 
> 标签：sql, sql-server-2008-r2

我有一个存储过程，它根据记录中包含的信息和其他表中的一些信息计算给定记录的特殊值。我想编写一个查询，该查询返回一个包含每条记录的常规信息的结果表，并在新列中添加每条记录的计算值。例如，我想要这样的东西：

```
SELECT
   [id]     as Name,
   [shape]  as Shape,
   [color]  as Color,
   EXEC FindCode
       @id = [id]
       @shape = [shape]
       @color = [color] 
   as Code
FROM Shapes 
```

使用与上述“伪”代码等效的情况，我希望得到这样的结果集：

```
Name |  Shape  | Color | Code
-----+---------+-------+-----
AB   |  Circle | Blue  | 4276
BC   |  Square | Red   | 9825
CD   |  Rect   | Gray  | 3723 
```

其中名称、形状和颜色已作为 id、形状和颜色包含在表中，但“代码”是使用存储过程计算的。在 SQL Server 2008 R2 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:11:38.190

如果计算代码的算法完全基于（依赖）同一行中的其他列，那么最好的选择是将计算列添加到表中

```
Alter Table MyTable Add Column
   Code as [Enter expression here that calculates the code] 
```

例如，

```
 Alter Table MyTable Add Column
   Code as Case id 
           When 'AB' Then Case Shape
                             When 'Circle' Then 4176
                             When 'Square' Then 4177
                             When 'Rect'   Then 4178 End
           When 'BC Then  Case Shape
                             When 'Circle' Then 9825
                             When 'Square' Then 9826
                             When 'Rect'   Then 9827 End

           End 
```

如果此算法依赖于其他行或其他表中的数据，则需要使用用户定义函数 [UDF]。如果可能，使其成为一个相关的[InLine Table 生成 UDF](http://msdn.microsoft.com/en-us/library/ms191165%28v=sql.105%29.aspx)，而不是一个标量 UDF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T23:12:12.550

您需要创建一个与您的过程执行相同操作的函数，然后在查询中使用 CROSS APPLY。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T23:28:11.430

以下是使用此线程中的一些建议的查询可能看起来像的几个示例。

**1.`CROSS APPLY`使用标量值用户定义函数**：

```
SELECT
     s.[id]     as Name
    ,s.[shape]  as Shape
    ,s.[color]  as Color
    ,c.[code]   as Code
FROM 
    [Shapes] s
CROSS APPLY
    fnFunctionThatCalculatesCodeAsAScalarValue(s.[id], s.[shape], s.[color]) c 
```

**2\. 将表定义更改为具有计算列：**

```
CREATE TABLE Shapes AS
(
    [id] int NOT NULL,
    [shape] varchar(40) NOT NULL,
    [color] varchar(40) NOT NULL,
    [code] AS fnFunctionThatCalculatesCodeAsAScalarValue ([id], [shape],[color])
) 
```

**3.`JOIN`使用表值用户定义函数：**

```
SELECT
     s.[id]     as Name
    ,s.[shape]  as Shape
    ,s.[color]  as Color
    ,c.[code]   as Code
FROM 
    [Shapes] s
JOIN
    fnFunctionThatCalculatesCodesAsATable() c
    ON
    s.[id] = c.[id]
    AND
    s.[shape] = c.[shape]
    AND
    s.[color] = c.[color] 
```

或者**4.**您可以**预先填写一个不同的表格，将所有可能的颜色代码**（如果可行）。

在示例 1 和示例 2 中按原样使用标量值函数将执行最差，尤其是在它必须跟踪其他表时，因为它将每行执行一次。

`PERSISTED`您可以通过在列定义之后添加关键字来提高计算列示例的性能。**这可能是*我*会做**的。持久化的值将在插入时计算一次，在行更新时自动更新，但从其持久化位置提取以用于选择语句。

# ipad - 在 iPad 上为嵌入的 pdf 添加书签

> ID：12272513
> 
> 赞同：1
> 
> 时间：2012-09-04T23:06:47.657
> 
> 标签：ipad, pdf, web

我有一个嵌入了 pdf 文件的网页。我可以使用查询字符串为 pdf 中的页面添加书签并将这些值传递给源标签。虽然这在桌面浏览器上运行良好，但我似乎无法让书签在 iPad 上工作。两指滚动有效，但书签无效。

有人有想法么？

# javascript - Extjs 4：饼图显示来自商店的groupField

> ID：12272515
> 
> 赞同：0
> 
> 时间：2012-09-04T23:07:00.957
> 
> 标签：javascript, extjs, extjs4, javascript-framework

我正在寻找一个饼图来显示来自商店的组字段。例如，如果我商店中的每个学生都有一个“年级”字段，我希望饼图显示每个年级学生的相对数量。这可能吗？或者饼图是否必须显示字段我的商店：

```
Ext.define('AM.store.Users', {
    extend: 'Ext.data.Store',
    model: 'AM.model.User',
    data: [
        {Name: 'derp', Grade: 'FR'},
        {Name: 'herp', Grade: 'SR'},
                 ....
        {Name: 'beavis', Grade: 'SR'}
    ],
    groupField: 'Grade',
 }); 
```

我对图表的尝试：

```
Ext.define('AM.view.user.Chart' , {
    extend: 'Ext.chart.Chart',
    alias: 'widget.userchart',
    width: 500,
    height: 600,
    animate: true,
    store: 'Users',
    shadow: true,
    legend: { position: 'right'},
    insetPadding: 25,
    series: [{
            type: 'pie',
            angleField: 'PreReq',
            showInLegend: true,
            highlight: {
                    segment: {
                            margin: 20
                    }
            }
            animate: true
    }]
}); 
```

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:21:14.327

在您的商店中，您可以使用过滤、排序和分组，然后动态地反映在您的图表中。您需要将结果分组为一系列数据以显示在图表中。

# c - 在 Automake 中指定要链接的确切库

> ID：12272518
> 
> 赞同：0
> 
> 时间：2012-09-04T23:07:32.017
> 
> 标签：c, ld, autoconf, automake

我在交叉编译与 gstreamer 相关的项目时遇到了极大的麻烦。我正在尝试将它链接到我的交叉编译机上的库`/usr/lib`

如果我执行标准链接器标志`-L{FILESYS_DIR}/usr/lib -lGLESv2`，我会从我的交叉编译工具链中收到 pthread 投诉。因此，我试图在不使用`-L`标志的情况下链接到这个库。

无论我做什么，我都会得到`undefined symbol glFramebuffer2D.` 但是快速`readelf -Wc $FILESYS_DIR/usr/lib/libGLESv2.so | glFrame`向我展示了一个 glFramebuffer2D 符号。

我正在拉扯我的头发，因为无论我为 autoconf 指定什么标志，除非我使用这种方法，否则名为 libtool 的东西会丢弃我的链接请求`-L -l`......

**编辑：** 我有另一个想法，我尝试`-Wl, $FILESYS_DIR/usr/lib/libGLESv2.so`过在编译和链接中起作用，但在运行时不起作用……对我来说很明显（现在），因为主机根目录是 $FILESYS_DIR。无论如何，这是正确的方法，但我想我需要相对名称。

* * *

```
libtool: link:  arm-none-linux-gnueabi-gcc -shared  .libs/libgstbla_la-gstblaoverlay.o
  .libs/libgstbla_la-gstblastabilize.o .libs/libgstbla_la-gles2_utilities.o   -Wl,-
  rpath -Wl,/home/z3/z3-netra/filesys/fs//opt/gstreamer-0.4/lib -Wl,-rpath -
  Wl,/home/z3/z3-netra/filesys/fs//opt/gstreamer-0.4/lib -L/home/z3/z3-
  netra/filesys/fs/opt/gstreamer/lib /home/z3/z3-netra/filesys/fs//opt/gstreamer-
  0.4/lib/libgstbase-0.10.so /home/z3/z3-netra/filesys/fs//opt/gstreamer-
  0.4/lib/libgstreamer-0.10.so /home/z3/z3-netra/filesys/fs//opt/gstreamer-
  0.4/lib/libgstvideo-0.10.so /home/z3/z3-netra/filesys/fs//opt/gstreamer-
  0.4/lib/libgobject-2.0.so /home/z3/z3-netra/filesys/fs//opt/gstreamer-
  0.4/lib/libgmodule-2.0.so /home/z3/z3-netra/filesys/fs//opt/gstreamer-
  0.4/lib/libgthread-2.0.so -lrt /home/z3/z3-netra/filesys/fs//opt/gstreamer-
  0.4/lib/libglib-2.0.so    -pthread -Wl,-soname -Wl,libgstbla.so -Wl,-version-script -
  Wl,.libs/libgstbla.ver -o .libs/libgstbla.so 
```

如果需要，也可以在一行中：

```
libtool: link:  arm-none-linux-gnueabi-gcc -shared  .libs/libgstbla_la-gstblaoverlay.o .libs/libgstbla_la-gstblastabilize.o .libs/libgstbla_la-gles2_utilities.o   -Wl,-rpath -Wl,/home/z3/z3-netra/filesys/fs//opt/gstreamer-0.4/lib -Wl,-rpath -Wl,/home/z3/z3-netra/filesys/fs//opt/gstreamer-0.4/lib -L/home/z3/z3-netra/filesys/fs/opt/gstreamer/lib /home/z3/z3-netra/filesys/fs//opt/gstreamer-0.4/lib/libgstbase-0.10.so /home/z3/z3-netra/filesys/fs//opt/gstreamer-0.4/lib/libgstreamer-0.10.so /home/z3/z3-netra/filesys/fs//opt/gstreamer-0.4/lib/libgstvideo-0.10.so /home/z3/z3-netra/filesys/fs//opt/gstreamer-0.4/lib/libgobject-2.0.so /home/z3/z3-netra/filesys/fs//opt/gstreamer-0.4/lib/libgmodule-2.0.so /home/z3/z3-netra/filesys/fs//opt/gstreamer-0.4/lib/libgthread-2.0.so -lrt /home/z3/z3-netra/filesys/fs//opt/gstreamer-0.4/lib/libglib-2.0.so    -pthread -Wl,-soname -Wl,libgstbla.so -Wl,-version-script -Wl,.libs/libgstbla.ver -o .libs/libgstbla.so 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T01:07:13.643

`/usr/lib`应该已经在库搜索路径上，因此您不需要指定 RPATH。但是，您需要做的是告诉您的（交叉）链接器在哪里可以找到库。我认为这包括传递依赖，例如 libpthread。你有`$FILESYS_DIR/usr/lib/libpthread.so`吗？它指向`/lib/libpthread.so.N`? 哦，等等，我现在看到了一些我写出来的东西：注意那里（可能）不`$FILESYS_DIR`存在：所以你的链接器可能正在寻找 libGLESv2 传递需要的 libpthread，但没有找到它，因为`$FILESYS_DIR/lib`它不在库包含路径中. 添加`-L $FILESYS_DIR/lib`到您的链接器标志并重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:51:30.047

所有，这与以下问题有关：[设置全局 gcc 默认搜索路径](https://stackoverflow.com/questions/7476625/set-global-gcc-default-search-paths)

这里的问题与 pthread.so（也是 glib.so）有关。许多系统上的 /usr/lib/pthread.so 是一个 ASCII 脚本，然后进一步链接到系统的 /lib/pthread.so.0（这是一个软链接）。编译时，我的 $(FILESYS_DIR) 是正确的，但是那里的 libpthread.so 指向主机系统 pthread.so

我在这里犯了一个巨大的错误，通过正确的交叉编译管理可以轻松避免。为目标系统编译时，不要使用目标系统文件系统上的文件（如果它像我一样是 NFS。）使用为该目标系统编译的本地库。进一步，指定`-Wl,-rpath-link=/[local location where your *.so reside]`

该编译器/链接器标志允许在编译和链接期间运行时路径位于本地系统上，但在运行时保持标准运行时路径....希望这是有道理的。

# java - Java - 德比 - 无符号整数

> ID：12272520
> 
> 赞同：0
> 
> 时间：2012-09-04T23:07:51.587
> 
> 标签：java, derby, unsigned

我希望我在特定表中的一列不会得到负数。有没有办法在 derby DB 中声明一个 unsigned int ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:14:03.393

问：有没有办法在 Derby DB 表中声明列“unsigned int”？

A：我相信答案是“否”：

*   [http://db.apache.org/derby/docs/10.0/manuals/reference/sqlj124.html](http://db.apache.org/derby/docs/10.0/manuals/reference/sqlj124.html)

*   [http://db.apache.org/derby/docs/10.0/manuals/reference/sqlj124.html](http://db.apache.org/derby/docs/10.0/manuals/reference/sqlj124.html)

... 然而 ...

您应该能够轻松地“投射”任何查询中的存储值：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T23:31:18.663

答案是不。Java（不幸的是）不支持无符号算术。

但是您仍然可以使用 Java`int`并制作自己的方法来执行无符号算术，就像[这样](http://www.javamex.com/java_equivalents/unsigned_arithmetic.shtml)。更好的是创建一个`UnsignedInteger`类并让它处理所有的算术。

我不知道这是否值得。您可以`long`按照 jtahlborn 的建议使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-27T23:16:27.807

Java 不支持 type `unsigned int`，而不是 C 或 C++。

另一方面，有一种简单的方法可以通过使用以下方法来规避此限制：

*   中间`long`变量/文字
*   演员表`(int)`

首先，让我们注意有符号和无符号 int 具有相同的位数；它们的大小都是 32 位。

主要区别在于，对于有符号整数，MSB（最高有效位）或位 0 用于指示实际整数是负数还是正数。

如果该位设置为 1，则整数为负，如果设置为 0，则整数为负。因此，您最终将得到 31 位的整数值和 1 位的符号。

对于无符号整数，所有 32 位都用于表示整数的值。您现在可以拥有更大的数字。

`signed integers`范围从`-2^31`到`(2^31 - 1)`

`unsigned integers`范围从`0`到`(2^32 - 1)`

要显示大小限制问题，请尝试编译以下代码段：

```
 public static void main (String[] args){

        int i = 2_147_483_648;//This line will generate a compiler error
    }
} 
```

编译器会抱怨说`integer number too large`.

让我们看看如何规避这个问题并仍然将这个数字存储在一个 Java 整数中，然后再取回它。

提议的解决方案背后的想法源于这样一个事实，即一系列位被解释为意味着什么。它可以是图像、Java 对象、C 结构、字符等的表示。

您根据您“期望”该系列位要表示的内容“解释”该系列位。如果您期待一个字符，您可能希望将该系列与 ASCII 表进行匹配。如果您期待图像，您可能希望解码 JPEG。

现在，回到整数，如果您正在寻找，`signed integers`您会将 MSB 解释为符号位。如果您正在寻找，`unsigned integers`您会将 MSB 解释为值的一部分。

举个例子，让我们假设您有以下 32 位系列：

*   十六进制 0x8000_0000 或二进制 0b1000_0000_0000_0000_0000_0000_0000_0000

MSB 设置为 1，所有其他位为 0。

如果您正在寻找/期望`signed integer`这些 32 位将被解释为负十进制数的表示`-2_147_483_648`

如果您正在寻找/期望`unsigned integer`这些相同的 32 位将被解释为正十进制数的表示`2_147_483_648`

因此，解决方案是将值存储在带符号的 32 位整数中，并将它们解释为无符号的 32 位整数。

这是我们将如何修改前面的代码片段并将其保存`2_147_483_648`为整数值并能够正确打印的方法。

为此，我们将：

*   首先，使用`long`中间数据类型/值
*   然后将该值转换为`int`以保存它
*   最后，屏蔽/忽略`&`多余的位并显示它

```
 public static void main (String[] args){
        //1\. cast a 64-bit long value that fits into a 32-bit int
        int i = (int)2_147_483_648L;
        //2\. Mask the extra long bits
        System.out.println(i & 0x0000_0000_FFFF_FFFFL);
    }
} 
```

该`long`变量可以保存 64 位，其 MSB 或符号位不受其前 32 位的影响。您会注意到这里发生了按位运算：

```
i & 0x0000_0000_FFFF_FFFFL 
```

这告诉编译器忽略或屏蔽超出我们感兴趣的前 32 位的所有位。我们的整数是 32 位的。

如果您想`int`在保存之前对值进行一些算术运算，您可以再次求助于`long`中间变量。

以下是方法，这将是建议的解决方案：

```
 public static void main (String[] args){
        int i = (int)2_147_483_648L;
        int j = 1_000_000;
        long tempL = i + j;//Use a temp long to perform the operations
        i = (int)tempL; //We save back into i and store in a DB for example

        //Now we use the saved value to display it, for example
        System.out.println(i & 0x0000_0000_FFFF_FFFFL);
    }
} 
```

祝你好运，希望以上内容有所帮助！

# c - 如果需要调用 copy_to_user，如何使用自旋锁？

> ID：12272527
> 
> 赞同：7
> 
> 时间：2012-09-04T08:30:40.213
> 
> 标签：c, linux, linux-kernel, locking, spinlock

我编写了一个小驱动程序来读取一些数据并将其提供给用户。我的驱动程序可以被多个应用程序使用，即它是一个可重入驱动程序，因此使用自旋锁。但我发现不`copy_to_user`应该在持有自旋锁的情况下调用它。`char_device_buf`以下代码中是共享数据；我必须保护它。除了互斥锁之外，还有什么机制可以使用自旋锁和使用`copy_to_user`吗？

```
static ssize_t char_dev_read(struct file *file,
                                char *buf,
                                size_t lbuf,
                                loff_t *ppos)
    {
            int maxbytes; /* number of bytes from ppos to MAX_LENGTH */
            int bytes_to_do; /* number of bytes to read */
            int nbytes; /* number of bytes actually read */

            maxbytes = MAX_LENGTH - *ppos;

            if( maxbytes > lbuf ) bytes_to_do = lbuf;
            else bytes_to_do = maxbytes;

            if( bytes_to_do == 0 ) {
                    printk("Reached end of device\n");
                    return -ENOSPC; /* Causes read() to return EOF */
            }

       /* Tesing for accidental release */
    //              accidental_release(); 

            printk(KERN_DEBUG "READER: trying for critical region lock \n");

            spin_lock(&myspin);/*begin of critical region */

                    printk(KERN_DEBUG "READER : acquired lock: executing critical code\n");
                    nbytes = bytes_to_do -
                             copy_to_user( buf, /* to */
                                           char_device_buf + *ppos, /* from */
                                           bytes_to_do ); /* how many bytes */

            spin_unlock(&myspin); /* end of critical region */
            *ppos += nbytes;
            return nbytes;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T04:58:19.183

之所以`copy_{to,from}_user`不应该在自旋锁内部使用，是因为这些函数可以休眠。想象一下这种情况（在单处理器机器上）：

1.  处理`mmap()`一个文件
2.  该过程调用您的驱动程序，将地址提供到该`mmap()`ed 区域
3.  您的代码运行，锁定，然后`copy_to_user`在该地址上导致页面错误 - 内存不存在，因此进程进入睡眠状态，直到数据来自磁盘。
4.  内核调度进程 B，它以相同的方式调用您的驱动程序。
5.  *死锁*- 进程 A 正在等待 IO 在锁内返回，但不会被调度，因为 B 正在等待 CPU 等待解锁同一个锁。

除非有 100% 的保证`copy_{to,from}_user`不会导致段错误，否则您不能使用自旋锁，而必须使用*睡眠*锁，例如“mutex_lock”。睡眠锁将控制权交给调度程序，而自旋锁则不会。

# python - python 在添加新行之前检查现有行时出错

> ID：12272529
> 
> 赞同：0
> 
> 时间：2012-09-04T23:10:20.620
> 
> 标签：python, mysql

我编写了一些代码来检查表中是否存在现有行，然后如果 id 不存在，则代码插入新行。这是代码

```
x.execute("SELECT id FROM headlines WHERE id="+ pid)
numrows = int (x.rowcount)
if numrows<1:
    sql = '''insert into headlinesUS (id,feed_url,item_title,item_date,fetch_date) 
                       values ("%s","%s","%s","%s","%s");'''
    x.execute(sql, (pid,url,title,date,fetch))
    connection.commit()
    print("\n- " + title) 
```

但是当我运行它时，我收到此错误：

```
numrows = int (x.rowcount)
                         ^
IndentationError: unindent does not match any outer indentation level 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T00:02:00.263

我通常发现不将括号与它们关联的函数分开是一个好习惯，因此编写而不是在and`numrows = int(x.rowcount)`之间放置空格可能是个好主意，尽管这不应该影响您的代码。检查以确保您的标签正确对齐，并且您只有空格或标签，而不是两者。`int``(x.rowcount)`

# c# - 区域和路线

> ID：12272535
> 
> 赞同：3
> 
> 时间：2012-09-04T23:11:10.150
> 
> 标签：c#, asp.net-mvc-3-areas

我很困惑我可能会说尽管在网站上找到了所有其他帖子。

我的解决方案有两个区域 Front 和 Back，我不想使用默认提供的默认根控制器和视图。

我的**FrontAreaRegistration.cs**就像：

```
public override void RegisterArea(AreaRegistrationContext context)
{
    context.MapRoute(
        "Front",
        "Front/{controller}/{action}/{id}",
        new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        , new[] { "Show.Areas.Front.Controllers" }
    );
} 
```

我的**BackAreaRegistration.cs**就像：

```
public override void RegisterArea(AreaRegistrationContext context)
{
    context.MapRoute(
        "Back_default",
        "Back/{controller}/{action}/{id}",
        new { controller = "Account", action = "LogOn", id = UrlParameter.Optional }
        , new[] { "Show.Areas.Back.Controllers" }
    );
} 
```

和**Global.asax**一样：

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
); 
```

得到以下异常：

> 找到了与名为“Home”的控制器匹配的多种类型。如果服务此请求的路由 ('{controller}/{action}/{id}') 未指定命名空间来搜索与请求匹配的控制器，则可能会发生这种情况。如果是这种情况，请通过调用采用“namespaces”参数的“MapRoute”方法的重载来注册此路由。
> 
> 'Home' 的请求找到了以下匹配的控制器： Show.Areas.Front.Controllers.HomeController Show.Areas.Back.Controllers.HomeController

问题是我无法从 Front 区域到达 Home 控制器。即使将正确的命名空间添加到 context.MapRoute 方法重载...

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:26:13.717

引发错误是因为您没有在请求中指定区域名称。由于“默认”路由（来自 Global.asax）与请求匹配，并尝试搜索“主页”控制器的“索引”操作。只要有两个匹配项（两个区域）就会抛出异常。
解决这个问题的方法很少。一种可能是修改 Global.asax：

```
routes.MapRoute(
   "Default", // Route name
   "{controller}/{action}/{id}", // URL with parameters
   new { controller = "Home", action = "Index", id = UrlParameter.Optional }, // Parameter defaults
   new[] { "Show.Areas.Front.Controllers" }
).DataTokens.Add("Area", "Front"); 
```

但在这种情况下，“默认”路线仅适用于 Front 区域。

# python - Python readline - 如何链接主目录中内置的 ncurses？

> ID：12272544
> 
> 赞同：1
> 
> 时间：2012-09-04T23:12:01.930
> 
> 标签：python, readline, ncurses

我没有对我正在使用的 Linux 服务器的 root 访问权限。

我正在尝试安装[`readline`](http://pypi.python.org/pypi/readline/)到我的主目录中的 Python 安装中，但构建它需要 ncurses 库。

我已经构建了前缀设置为我的主目录的 ncurses，但现在我一直试图链接它以便`ld -lncurses`找到它。我尝试将我的导出`$HOME/lib`到`LD_LIBRARY_PATH`; 它没有帮助。

setup.py 是否有一个选项来指定搜索相应库的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:52:46.717

啊，想通了！

很简单： `export LDFLAGS=-L/$HOME/lib`

不确定是否需要： `export CFLAGS=-I/$HOME/include` `export CPATH=-I/$HOME/include`

# javascript - 在 BackBone 模型 Ajax 函数中自动传递 Certian 值

> ID：12272550
> 
> 赞同：1
> 
> 时间：2012-09-04T23:13:17.937
> 
> 标签：javascript, jquery, ajax, backbone.js, underscore.js

我正在使用 Backbone js 创建一个类似服务的应用程序。每个应用程序都有一个 user_id 和一个已设置的 application_id。每次主干调用 fetch()、save() 或任何其他 RESTful/ajax 函数时，我希望 user_id 和 application_id 自动与模型数据一起传递。

我知道我将不得不扩展主干模型，然后确保我的所有模型都从这个模型扩展，但是我要修改什么以及如何调用父模型？

伪示例（不太确定）

```
MyModel = Backbone.Model.extend({
    save : function(data) {
        data.application_id = 3;
        data.user_id = 5;
        parent.save(data);
}
});

Scores = MyModel.extend({
      default : {
      score : 0
}
});

//This should automatically grab the application id and user id
scores = new Scores();
scores.set('score', 5);
score.save() 
```

我如何正确地做到这一点？通过完成，我的意思是代码中的一个点将适用于 save()、fetch() 和 destroy() ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T07:52:45.017

如何修改您的 Backbone 同步？如果您确定要在每个模型上通过`user_id`and ，那么您可以做这样的事情，我相信...`application_id``save() fetch() and destroy()`

```
/* alias away the sync method */
Backbone._sync = Backbone.sync;

/* new Backbone.sync method */
Backbone.sync = function(method, model, options) {

    // For example purpose, this will only run on POST, PUT, and DELETE requests
    // If you want you can also set it for method == 'read' for your fetch()

    if (method == 'create' || method == 'update' || method == 'delete') {
        model.set('user_id', userID);
        model.set('application_id', appID);
    }

    /* proxy the call to the old sync method */
    return Backbone._sync(method, model, options);
}; 
```

我为我的 CSRF 令牌检查做了类似的事情，以防止跨站点注册伪造。除了操作模型之外，我确保我的所有 POST、PUT 和 DELETE 请求都有一个带有我唯一令牌的特殊 X-CSRF 标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:48:29.957

如果您的值（appid 和 userid）是预先确定的，您可以在`initialize`模型的方法中执行此操作

```
MyModel = Backbone.Model.extend({
  this.set('application_id', appID);
  this.set('user_id', userID);
}); 
```

这些值现在是您的模型的一部分，因此是每个 CRUD 操作的一部分。

# service-broker - 从 SQL Server 的服务代理中的队列中读取多行

> ID：12272558
> 
> 赞同：0
> 
> 时间：2012-09-04T23:15:10.627
> 
> 标签：service-broker

我正在使用以下命令从队列中读取。但它只返回一行。我注意到 conversation_handle 对于所有消息都是唯一的。如何从 sql server 的队列中读取前 100 行或所有行？

接收 *-- @handle=conversation_handle, --@xml=CAST(message_body AS XML) 来自 EventData_Destination_Queue

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T08:36:36.313

正如[文档](http://msdn.microsoft.com/en-us/library/ms186963)所说：

> WHERE 指定接收消息的对话或对话组。如果省略，则返回来自下一个可用对话组的消息。

这意味着 - 如果下一个对话组包含 1 条消息，它只返回 1 条消息。因此，也许您想要的是在发送消息时将消息分组到一个对话组中。

# arrays - 如何在Matlab中将嵌套for循环生成的值存储在数组中？

> ID：12272559
> 
> 赞同：0
> 
> 时间：2012-09-04T23:15:24.687
> 
> 标签：arrays, matlab, for-loop, store

```
y = find(sA);
l = y + sA;

for i=1:10
  for j=1
      l = l + sA;
  end
  y = y + length(y);
end 
```

我想知道如何将`l`每次迭代生成的值存储在数组中。

当我尝试做类似 l(l) = l + sA; 我得到了“奇怪”的结果。

注意：请阅读我在下面发表的评论。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:07:17.013

试试这样：

```
y = find(sA); %This is incredibly strange! What exactly are you trying to achieve with this line?
l = y + sA;

for i=1:10
  l = l + sA;
  StoredL(i, :) = l;
  y = y + length(y); %This line does nothing??? Why is it here?
end 
```

我删除了你的内部循环，因为它什么都不做，因为 j = 1 只会运行一次，那有什么意义呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T23:54:10.913

对于一个复杂的循环，通常我会这样做：

```
results = zeros(expectedLength,1);
ixNextResult = 1;

for ixForLoop1 = 1:10
    for ixForLoop2 = 20:30
        ..
        results(ixNextResult) = calculationResult;
        ixnextResult = ixNextResult + 1;
    end
end 
```

我很难理解你的代码试图完成什么，所以我不确定要改变什么。例如，该片段`l(l) = l+sA`对我来说没有多大意义。

# javascript - 如何乘以一个变量？

> ID：12272561
> 
> 赞同：0
> 
> 时间：2012-09-04T23:15:54.343
> 
> 标签：javascript, multiplication

```
<script type = "text/javascript">
//Add spaces between menu links
//Placement: Global Header
//Coded by Game

var spaces = "2";  //Edit number of spaces between menu links (1,2 or 3)

var a = document.getElementsByTagName("a");
for (i = 0; i < a.length; i++) {
    if (a[i].parentNode.parentNode.className == "menubg" && a[i].innerHTML.match(/Home|new topics|help|search|members|calendar|admin|profile|logout|register|login/i)) {
        if (spaces == "1") {
        a[i].innerHTML += "&nbsp;";
        }
        if (spaces == "2") {
        a[i].innerHTML += "&nbsp;&nbsp;";
        }
        if (spaces == "3") {
        a[i].innerHTML += "&nbsp;&nbsp;&nbsp;";
        }
    }   
}
</script> 
```

上面的代码是为了让用户在他们的菜单项之间添加空格。它工作正常。但是我怎样才能让它可以添加任意数量的空格，而不是限制为 3 个呢？也许他们会以某种方式将他们的数字添加到 var 'spaces' 中，并且代码会将   乘以那个数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T23:20:28.947

只需使用一个循环：

```
var spaces = 2; 

[..]

for(var i = 0; i < spaces; ++ i)
    a[i].innerHTML += "&nbsp"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T23:33:05.040

我会在一个单独的方法中生成字符串，比如：

```
function getSpaces(count) {
var spaces = "";
for(var i = 0; i < count; i++) {
       spaces += "&nbsp";
}
return spaces;
} 
```

接着

```
a[i].innerHTML = getSpaces(2); //etc 
```

这样你就可以设置 innerHTML 并只访问一次数组，也没有重复的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T23:32:44.353

尽可能避免`innerHTML`，因为它会删除并重新创建元素的全部内容。宁可`appendChild`取而代之`createTextNode`。例如：

```
a[i].appendChild(document.createTextNode(new Array(spaces + 1).join("\u00A0"))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T23:22:13.407

你为什么不在你的`if`子句中创建一个循环，`&nbsp;`每次你通过循环时添加一个循环？

# function - 编译器如何将函数消除应用于不纯函数？

> ID：12272563
> 
> 赞同：7
> 
> 时间：2012-09-04T23:16:11.490
> 
> 标签：function, optimization, language-agnostic, compiler-construction, compiler-optimization

通常在编写代码时，我发现自己多次使用来自特定函数调用的值。我意识到一个明显的优化是在变量中捕获这些重复使用的值。这（伪代码）：

```
function add1(foo){ foo + 1; }
...
do_something(foo(1));
do_something_else(foo(1)); 
```

变成：

```
function add1(foo){ foo + 1; }
...
bar = foo(1);
do_something(bar);
do_something_else(bar); 
```

但是，根据我的经验，明确地这样做会使代码的可读性降低。我假设如果我们选择的语言允许函数具有副作用，编译器就无法进行这种优化。

最近我研究了这个，如果我理解正确的话，这种优化是/可以对函数必须是纯的语言进行。这并不让我感到惊讶，但据说这也可以用于不纯函数。通过一些快速的谷歌搜索，我发现了这些片段： [GCC 4.7 Fortran 改进](http://gcc.gnu.org/gcc-4.7/changes.html "GCC 4.7 更改")

> 在执行前端优化时，-faggressive-function-elimination 选项允许删除重复的函数调用，即使对于不纯函数也是如此。

[编译器优化（维基百科）](http://en.wikipedia.org/wiki/Compiler_optimization "关于编译器优化的维基百科页面")

> 例如，在某些语言中，函数不允许有副作用。因此，如果一个程序使用相同的参数多次调用同一个函数，编译器可以立即推断该函数的结果只需要计算一次。在允许函数具有副作用的语言中，另一种策略是可能的。优化器可以确定哪个函数没有副作用，并将此类优化限制为无副作用的函数。仅当优化器可以访问被调用函数时，才可能进行此优化。

根据我的理解，这意味着优化器可以确定函数何时是纯函数或非纯函数，并在函数为纯函数时执行此优化。我这样说是因为如果一个函数在给定相同的输入时总是产生相同的输出，并且没有副作用，那么它将满足这两个条件被认为是纯的。

这两个片段向我提出了两个问题。

1.  如果函数不是纯函数，编译器如何能够安全地进行这种优化？（如-faggressive-function-elimination）
2.  编译器如何确定一个函数是否是纯函数？（如维基百科文章中建议的策略）

最后：

*   这种优化可以应用于任何语言，还是仅在满足某些条件时应用？
*   即使对于极其简单的功能，这种优化是否值得？
*   从堆栈中存储和检索值会产生多少开销？

如果这些是愚蠢或不合逻辑的问题，我深表歉意。它们只是我最近一直好奇的一些事情。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:59:48.373

免责声明：我不是编译器/优化器的人，我只是倾向于偷看生成的代码，并且喜欢阅读这些东西 - 所以这不是自动的。快速搜索并没有在 -faggressive-function-elimination 上找到太多，所以它可能会做一些这里没有解释的额外魔法。

* * *

优化器可以

*   尝试内联函数调用（通过链接时间代码生成，这甚至可以跨编译单元）
*   执行公共子表达式消除，并可能进行副作用重新排序。

稍微修改您的示例，并在 C++ 中进行：

```
extern volatile int RW_A = 0;  // see note below

int foo(int a)  { return a * a; }
void bar(int x) { RW_A = x; }

int _tmain(int argc, _TCHAR* argv[])
{
   bar(foo(2));
   bar(foo(2));
} 
```

解析为（伪代码）

```
<register> = 4;
RW_A = register;
RW_A = register; 
```

（注意：读取和写入 volatile 变量是“可观察到的副作用”，优化器必须按照代码给出的相同顺序保存。）

* * *

修改示例`foo`以产生副作用：

```
extern volatile int RW_A = 0;
extern volatile int RW_B = 0;
int accu = 1;

int foo(int a)  { accu *= 2; return a * a; }
void bar(int x) { RW_A = x; }

int _tmain(int argc, _TCHAR* argv[])
{
   bar(foo(2));
   bar(foo(2));

   RW_B = accu;
   return 0;
} 
```

生成以下伪代码：

```
registerA = accu;
registerA += registerA;
accu = registerA;

registerA += registerA;
registerC = 4;
accu = registerA;

RW_A = registerC;
RW_A = registerC;

RW_B = registerA; 
```

我们观察到公共子表达式消除仍然完成，并与副作用分开。内联和重新排序允许将副作用与“纯”部分分开。

请注意，编译器读取并急切地写回`accu`，这不是必需的。我不确定这里的理由。

* * *

总结：

编译器不需要测试纯度。它可以识别需要保留的副作用，然后根据自己的喜好转换其余的。

这种优化是值得的，即使对于微不足道的函数，因为除其他外，

*   CPU和内存是共享资源，你用的可能会从别人那里拿走
*   电池寿命
*   次要优化可能是通向较大优化的途径

堆栈内存访问的开销通常约为 1 个周期，因为堆栈顶部通常已经在 1 级缓存中。请注意，通常应该用粗体表示：它可能“更好”，因为读/写可能会被优化掉，或者它可能更糟，因为 L1 缓存上增加的压力会将一些其他重要数据刷新回 L2。

极限在哪里？

理论上，编译时间。在实践中，优化器的可预测性和正确性是额外的权衡。

* * *

使用 VC2008 进行的所有测试，“Release”构建的默认优化设置。

# excel - 将手写数字转换为文本

> ID：12272572
> 
> 赞同：1
> 
> 时间：2012-09-04T23:17:20.210
> 
> 标签：excel, ocr

我需要将包含手写数字列的 pdf 表单转换为文本并填充 Excel 电子表格。

有谁知道解决这个问题的程序或解决方案？

提前致谢。

编辑：

我尝试过像 pdfcompressor 这样的程序，但它返回给我随机符号。我假设数字应该比随机字母更容易转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:35:13.440

如果您拥有从 XP 到 2007 的 Microsoft Office 版本，则可以使用 Microsoft Office Document Imaging。它是一个类似 PDF 查看器的程序。打开图像文件后，您可以使用鼠标图标裁剪和突出显示图像的各个部分。然后，您可以使用内置的 OCR 软件将突出显示的部分复制并粘贴到 Excel 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T23:36:21.897

您需要一个 OCR 程序（谷歌 OCR）来解释手写文本/数字。但这只会给你一个原始文本或 .doc 文件，而不是一个 Excel 表。您需要手动移动数字 - 如果您正在查看一个非常大的列表，可能仍然比键入它们更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T23:56:36.847

Abbyy Finereader 将是第一个开始的地方。它支持机器打印和手工打印的 OCR，并带有漂亮的 GUI 界面。您应该可以从 www.abbyy.com 下载试用版。它将能够导出为各种格式。如果您需要 SDK，那么 www.rerecognition.com 的 Kadmos 支持手动和机器打印 OCR。

# java - 为什么拖放停止在 chrome 中工作：错误（不太可能）或者我错过了什么（很可能）？

> ID：12272574
> 
> 赞同：1
> 
> 时间：2012-09-04T23:17:31.380
> 
> 标签：java, testing, drag-and-drop, webdriver, automated-tests

webdriver版本是2.25，chromedriver是23.0版本，chrome浏览器是最新的（目前是21.0.180.89）

被测应用程序是 GWT 应用程序，我有执行拖放的测试用例。
由于某种原因，拖放功能在 Chrome 中停止工作，而 IE 和 Firefox 工作正常。以下是失败的代码（不幸的是，我无法提供对该应用程序的公共访问权限。如果您需要更多详细信息，请告诉我）：

```
public void dragPropertyToCustomSection(String propertyName) {
    WebElement source = driver.findElement(By.id(propertyName));;
    WebElement target = driver.findElement(By.cssSelector("div.drop-target"));
    (new Actions(driver)).dragAndDrop(source, target).build().perform();
    clickSaveChangesButton();
} 
```

我已经尝试了我所知道的一切，但仍然无法让它在 Chrome 中工作。任何想法为什么这不起作用？

这与[http://code.google.com/p/selenium/issues/detail?id=4455](http://code.google.com/p/selenium/issues/detail?id=4455)相同吗？

# php - PHP + CodeIgniter：ImageCreateFromJPEG 不加载图像

> ID：12272576
> 
> 赞同：1
> 
> 时间：2012-09-04T23:17:55.187
> 
> 标签：php, image, codeigniter

嗨，我是 PHP 和 CodeIgniter 的新手，我遇到以下问题

我有一个控制器，我想在其中调用在另一个 .php 上定义的 PHP 函数。

这是功能：

```
function createNote($note_text){
     header('Content-type: image/jpeg');
     $note = "./application/controllers/notes/note.jpg";
     $rImg = ImageCreateFromJPEG($note);
     imagejpeg($rImg);

    //After this I want to use the "imagettftext" function to insert the $note_text in
    //the image   
} 
```

这应该加载该图像并显示它（我猜）但它没有，而是显示以下内容：

![在此处输入图像描述](../Images/24c4f0e14de6da8541505eae318cb209.png) 我知道图像的路径是正确的，因为如果我更改它，ImageCreateFromJPEF 会返回一个错误，指出找不到图像......

有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T00:07:54.183

故障排除提示：

1.  您应该检查输出以确保您没有在输出之前或之后添加任何字符。
2.  在 imageJPEG() 之后添加“exit”以防止进一步执行（它会在某处寻找视图）。
3.  执行 var_dump($rImg) 并查看（作为普通文件，注释掉标题行）以检查图像对象是否正确加载。正如 Umair 在评论中所说，使用绝对路径或应用程序根目录以确保您正确加载文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T03:39:17.957

在 VictorKilo 回答后，我搜索了如何设置 .htaccess 文件。

这个问题对我帮助很大：[How do I write a .htaccess file to make CodeIgniters URL routing work?](https://stackoverflow.com/questions/1397014/how-do-i-write-a-htaccess-file-to-make-codeigniters-url-routing-work)

之前，我的 .htaccess 有“拒绝所有人”，现在看起来像这样：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|stylesheets|scripts|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

希望这对其他人有帮助。感谢您抽出宝贵时间回答 Umair Iqbal、VictorKilo 和 Robbie。

# html - 动态视口元标记 ios

> ID：12272579
> 
> 赞同：0
> 
> 时间：2012-09-04T23:18:23.717
> 
> 标签：html, ios, ipad, viewport, meta

我有一个显示电子邮件通讯的 iPad 应用程序。此 HTML 内容被提取并嵌入到 WebView 中。大多数时事通讯宽度为 650 像素，但有些则为 900 像素左右。

默认情况下，它们显示得太小（iPad 设备宽度为 768 像素）所以我想让它缩放以填充页面（我只关心宽度 - 垂直滚动是可以的）。

使用视口元标记，如果我将 650 像素硬编码为设备宽度，它将切断 900 像素宽的时事通讯。此外，设置显式宽度会禁用调整视口的大小：

```
<meta name="viewport" content="width=650, initial-scale=1"> 
```

但是，如果我将其设置为可变设备宽度，则广告系列会被屏幕“挤压”并偏离中心显示：

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

有没有办法动态指定宽度，如果活动 <= 650 则将其设置为 650，否则设置为 900？本质上，我试图根据时事通讯的宽度动态设置一个固定的视口。我可以改用@viewport CSS 规则吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-30T08:37:12.530

我最终使用其他类似问题中的策略解决了这个问题：

[拉伸/适合 HTML 模板和子窗口](https://stackoverflow.com/questions/15730252/stretch-fit-html-template-and-children-to-window)

在我的案例中，与其更改视口元数据，不如在加载时使用 JS 动态缩放时事通讯。

# android - Android - 如果页面不合适，如何设置页面滚动？

> ID：12272580
> 
> 赞同：2
> 
> 时间：2012-09-04T23:18:33.917
> 
> 标签：android, scroll

我的一个屏幕有一个按钮，它不会在低于一定宽度的屏幕上显示。如果是这种情况，有没有办法让屏幕滚动以便可以访问按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T23:19:53.533

只需将您的布局包装在[ScrollView](http://developer.android.com/reference/android/widget/ScrollView.html)中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T23:19:58.777

当然，将您的布局嵌入到[ScrollView](http://developer.android.com/reference/android/widget/ScrollView.html)中。

# javascript - 为什么 JavaScript 不允许你直接调用数字上的方法？

> ID：12272581
> 
> 赞同：13
> 
> 时间：2012-09-04T23:18:50.023
> 
> 标签：javascript

在 Ruby 中，您可以这样做：

```
3.times { print "Ho! " } # => Ho! Ho! Ho! 
```

我尝试在 JavaScript 中做到这一点：

```
Number.prototype.times = function(fn) {
    for (var i = 0; i < this; i++) {
        fn();
    }
} 
```

这有效：

```
(3).times(function() { console.log("hi"); }); 
```

这不

```
3.times(function() { console.log("hi"); }); 
```

Chrome 给了我一个语法错误：“Unexpected token ILLEGAL”。为什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-04T23:20:14.217

数字后面的`.`代表数字的小数点，您必须使用另一个来访问属性或方法。

```
3..times(function() { console.log("hi"); }); 
```

这仅对十进制文字是必需的。对于八进制和十六进制文字，您只能使用一个`.`.

```
03.times(function() { console.log("hi"); });//octal
0x3.times(function() { console.log("hi"); });//hexadecimal 
```

也是指数的

```
3e0.times(function() { console.log("hi"); }); 
```

您也可以使用空格，因为数字中的空格是无效的，因此没有歧义。

```
3 .times(function() { console.log("hi"); }); 
```

尽管如`wxactly`评论中所述，缩小器会删除导致上述语法错误的空间。

# c# - 你如何在 Nhibernate 中进行版本控制？

> ID：12272586
> 
> 赞同：11
> 
> 时间：2012-09-04T23:19:33.237
> 
> 标签：c#, .net, asp.net-mvc, sql-server-2008, nhibernate

我不敢相信让某人向我展示一个简单的工作示例是如此困难。这让我相信每个人都只能像他们知道该怎么做一样说话，但实际上他们不知道。

我将帖子缩短为仅我希望示例执行的操作。也许这个帖子太长了，把人们吓跑了。

为了获得这个赏金，我正在寻找一个可以在 VS 2010 中复制并运行的工作示例。

示例需要做什么。

1.  在 mssql 2008 中将版本的版本显示为我的域中的数据类型作为**时间戳**
2.  显示 nhibernate 自动抛出“StaleObjectException”
3.  向我展示这 3 个场景的工作示例

**方案 1**

用户 A 来到站点并编辑 Row1。用户 B 来（注意他可以看到第 1 行）并单击编辑第 1 行，用户 B 应该被拒绝编辑行，直到用户 A 完成。

**方案 2**

用户 A 来到站点并编辑 Row1。用户 B 30 分钟后来，点击编辑第 1 行。用户 B 应该能够编辑此行并保存。这是因为用户 A 编辑该行的时间过长，失去了编辑权限。

**方案 3**

用户 A 从离开中回来。他单击更新行按钮，应该会收到 StaleObjectException。

我正在使用 asp.net mvc 和流利的 nhibernate。寻找要在这些中完成的示例。

* * *

**我试过的**

我尝试构建自己的，但我无法让它抛出 StaleObjectException，也无法让版本号增加。我厌倦了打开 2 个单独的浏览器并加载了索引页面。两种浏览器都显示相同的版本号。

```
public class Default1Controller : Controller
{
    //
    // GET: /Default1/

    public ActionResult Index()
    {
        var sessionFactory = CreateSessionFactory();

        using (var session = sessionFactory.OpenSession())
        {
            using (var transaction = session.BeginTransaction())
            {
                var firstRecord = session.Query<TableA>().FirstOrDefault();
                transaction.Commit();
                return View(firstRecord);
            }

        }

    }

    public ActionResult Save()
    {
        var sessionFactory = CreateSessionFactory();
        using (var session = sessionFactory.OpenSession())
        {
            using (var transaction = session.BeginTransaction())
            {
                var firstRecord = session.Query<TableA>().FirstOrDefault();
                firstRecord.Name = "test2";
                transaction.Commit();
                return View();
            }
        }
    }

    private static ISessionFactory CreateSessionFactory()
    {
        return Fluently.Configure()
            .Database(MsSqlConfiguration.MsSql2008
                .ConnectionString(c => c.FromConnectionStringWithKey("Test")))
            .Mappings(m => m.FluentMappings.AddFromAssemblyOf<TableA>())
                             //  .ExposeConfiguration(BuidSchema)
            .BuildSessionFactory(); 
    }

    private static void BuidSchema(NHibernate.Cfg.Configuration config)
    {
        new NHibernate.Tool.hbm2ddl.SchemaExport(config).Create(false, true);
    }

}

public class TableA
{
    public virtual Guid Id { get; set; }
    public virtual string Name { get; set; }

    // Not sure what data type this should be for timestamp.
    // To eliminate changing to much started with int version
    // but want in the end timestamp.
    public virtual int Version { get; set; } 
}

public class TableAMapping : ClassMap<TableA>
{
    public TableAMapping()
    {
        Id(x => x.Id);
        Map(x => x.Name);
        Version(x => x.Version);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T23:51:09.553

> nhibernate 会停止检索该行吗？

不可以。锁只在事务的范围内放置，在 Web 应用程序中，事务在请求结束时结束。此外，事务隔离模式的默认类型是已[提交读](http://en.wikipedia.org/wiki/Isolation_%28database_systems%29)，这意味着一旦选择语句终止，就会释放读锁。如果您在同一个请求和事务中读取和编辑，您可以在手头的行上放置读写锁，这将阻止其他事务写入或读取该行。但是，这种类型的并发控制在 Web 应用程序中效果不佳。

> 或者用户 B 是否仍能看到该行但如果他试图保存它会崩溃？

如果使用 [乐观并发]，就会发生这种情况。在 NHibernate 中，乐观并发通过添加一个[版本字段](http://nhforge.org/blogs/nhibernate/archive/2009/04/15/nhibernate-mapping-concurrency.aspx)来工作。保存/更新命令与更新所基于的版本一起发出。如果这与数据库表中的版本不同，则不会更新任何行并且 NHibernate 将抛出。

> 如果用户 A 说取消并且不编辑会发生什么。我必须自己释放锁还是可以设置超时来释放锁？

不，锁在请求结束时被释放。

总的来说，你最好的选择是选择 NHibernate 管理的版本字段的乐观并发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T17:33:33.627

> 它在代码中看起来如何？我是否在我的流利的 nhibernate 中设置以生成时间戳（不确定我是否会时间跨度数据类型）。

我建议使用版本列。如果您将 FluentNhibernate 与自动映射一起使用，那么如果您创建一个名为 Version 类型为 int/long 的列，默认情况下它将使用该列进行版本化，或者您可以使用映射中的 Version() 方法来执行此操作（类似时间戳）。

> 所以现在我以某种方式生成了时间戳，并且用户正在编辑一行（通过 gui）。我应该将时间戳存储在内存中吗？那么当用户从内存中提交调用时，该行的时间戳和ID并检查？

当用户开始编辑一行时，您检索它并存储当前版本（版本属性的值）。我建议将当前版本放在表单的隐藏字段中。当用户保存他的更改时，您可以手动检查数据库中的版本（检查它是否与隐藏字段中的版本相同），或者您可以将版本属性设置为隐藏字段中的值（如果您使用数据绑定，您可以自动执行此操作）。如果您设置了版本属性，那么当您尝试保存实体时，NHibernate 将检查您保存的版本是否与数据库中的版本匹配，如果不匹配则抛出异常。

NHibernate 将发出更新查询，例如：

更新 xyz SET ，版本 = 16 其中 Id = 1234 AND 版本 = 15

（假设您的版本是 15） - 在此过程中，它还将增加版本字段

> 如果是这样，这意味着业务逻辑正在跟踪“行锁定”，但理论上有人仍然可以去 Where(x => x.Id == id) 并随意抓取该行并进行更新。

如果其他人通过 NHibernate 更新该行，它将自动增加版本，因此当您的用户尝试使用错误的版本保存它时，您将收到一个异常，您需要决定如何处理（即尝试显示一些合并屏幕，或告诉用户使用新数据重试）

> 当行被更新时会发生什么？您是否将 null 设置为时间戳？

它会自动更新版本或时间戳（时间戳将更新为当前时间）

> 如果用户从未真正完成更新并离开会发生什么。每行如何再次解锁？

该行本身没有锁定，而是使用乐观并发，您假设没有人会同时更改同一行，如果有人这样做，那么您需要重试更新。

> 是否仍然存在竞争条件，或者这几乎不可能发生？我只是担心 2 个人尝试编辑同一行，他们都在他们的 gui 中看到它进行编辑，但实际上一个人最终会被拒绝，因为他们失去了竞争条件。

如果 2 个人尝试同时编辑同一行，如果您使用乐观并发，其中一个会丢失。好处是他们会知道存在冲突，而不是丢失他们的更改并认为它已更新，或者在不知道的情况下覆盖其他人的更改。

> 所以我做了这样的事情
> 
> var test = session.Query.Where(x => x.Id == id).FirstOrDefault(); // 发送给用户进行编辑。有版本控制。用户编辑并在 30 分钟后发回数据。
> 
> 代码确实
> 
> 测试.Id = vm.Id; test.ColumnA = vm.ColumnA; test.Version = vm.Version;
> 
> 会话.更新（测试）；session.Commit(); 所以上面的工作对吗？

如果其他人进入并更改了行，则上述内容将引发异常。这就是重点，所以您知道出现了并发问题。通常，您会向用户显示一条消息，说“其他人已更改此行”，其中包含新行以及他们的更改，因此用户必须选择哪些更改获胜。

> 但如果我这样做
> 
> 测试.Id = vm.Id; test.ColumnA = vm.ColumnA;
> 
> ```
> session.Update(test);
> session.Commit(); it would not commit right? 
> ```

只要您没有重新加载测试就正确（即您做了 test = new Xyz()，而不是 test = session.Load() ），因为行上的时间戳不匹配

> 如果其他人通过 NHibernate 更新该行，它将自动增加版本，因此当您的用户尝试使用错误的版本保存它时，您将收到一个异常，您需要决定如何处理（即尝试显示一些合并屏幕，或告诉用户使用新数据重试）
> 
> 我可以做到这一点，当记录被抓住这个检查。一开始我想保持简单，一次只有一个人可以编辑。其他人甚至无法访问记录进行编辑，而正在编辑它。

这不是乐观的并发。作为一个简单的答案，您可以添加一个 CheckOutDate 属性，您在有人开始编辑它时设置该属性，并在他们完成时将其设置为 null。然后，当他们开始编辑时，或者当您向他们展示要编辑的行时，您可以排除 CheckOutDate 比过去 10 分钟更新的所有行（那么您不需要计划任务来定期重置它）

> 该行本身没有锁定，而是使用乐观并发，您假设没有人会同时更改同一行，如果有人这样做，那么您需要重试更新。
> 
> 我不确定你说的这意味着我能做什么
> 
> session.query.Where(x => x.id == id).FirstOrDefault(); 一整天，它会不断让我记录（认为它会不断增加版本）。

查询不会增加版本，只有对它的更新才会增加版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:54:59.227

对您的问题的简短回答是您不能/不应该在具有 nhibernate 乐观（版本）和悲观（行锁）锁定的简单 Web 应用程序中执行此操作。您的交易仅在请求时才进行这一事实是您的限制因素。

您可以做的是创建另一个表和实体类，以及管理这些“锁”的映射。在最低级别，您需要正在编辑的对象的 Id 和执行编辑的用户的 Id，以及获取锁的日期时间。我会将正在编辑的对象的 Id 作为主键，因为您希望它是独占的...

当用户单击要编辑的行时，您可以尝试获取锁（在该表中创建一条带有 id 和当前日期时间的新记录）。如果另一个用户的锁已经存在，那么它将失败，因为您试图违反主键约束。

如果获取了锁，当用户单击保存时，您需要在执行实际保存之前检查他们是否仍然拥有有效的“锁”。然后，执行实际保存并删除锁定记录。

我还建议使用后台服务/进程定期清除这些锁并删除已过期或超过您的时间限制的锁。

这是我在 Web 环境中处理“锁”的规定方式。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T14:22:59.923

你看过 ISaveOrUpdateEventListener 接口吗？

```
public class SaveListener : NHibernate.Event.ISaveOrUpdateEventListener
{

    public void OnSaveOrUpdate(NHibernate.Event.SaveOrUpdateEvent e)
    {
        NHibernate.Persister.Entity.IEntityPersister p = e.Session.GetEntityPersister(null, e.Entity);
        if (p.IsVersioned)
        {
            //TODO: check types etc...
            MyEntity m = (MyEntity) e.Entity;
            DateTime oldversion = (DateTime) p.GetVersion(m, e.Session.EntityMode);
            DateTime currversion = (DateTime) p.GetCurrentVersion(m.ID, e.Session);

            if (oldversion < currversion.AddMinutes(-30))
                throw new StaleObjectStateException("MyEntity", m.ID);
        }
    } 
```

}

然后在您的配置中，注册它。

```
 private static void Configure(NHibernate.Cfg.Configuration cfg)
    {
        cfg.EventListeners.SaveOrUpdateEventListeners = new NHibernate.Event.ISaveOrUpdateEventListener[] {new SaveListener()};

    }

    public static ISessionFactory CreateSessionFactory()
    {
        return Fluently.Configure().Database(...).
                    .Mappings(...)
                    .ExposeConfiguration(Configure)                       
                    .BuildSessionFactory();
    } 
```

并在 Mapping 类中对要版本化的属性进行版本化。

```
public class MyEntityMap: ClassMap<MyENtity>
{
    public MyEntityMap()
    {
        Table("MyTable");

        Id(x => x.ID);
        Version(x => x.Timestamp);
        Map(x => x.PropA);
        Map(x => x.PropB);

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T14:19:26.377

我对 nHibernate 本身知之甚少，但是如果您准备在数据库上创建一些存储过程，它可以>排序<完成。

您将需要一个额外的数据列和对象模型中的两个字段来存储每一行​​的信息：

*   除散列字段本身和 EditTimestamp 字段之外的所有字段值的“散列”（使用 SQL Server CHECKSUM 2008 及更高版本或 HASHBYTES 用于早期版本）。如果需要，可以使用 INSERT/UPDATE 触发器将其持久化到表中。
*   日期时间类型的“编辑时间戳”。

更改您的程序以执行以下操作：

*   'select' 过程应该包括一个类似于 'edit-timestamp < (Now - 30 minutes)' 的 where 子句，并且应该将 'edit-timestamp' 更新为当前时间。在更新行之前使用适当的锁定运行选择我正在考虑一个带有保持锁定的存储过程，例如[这里](http://www.sqlteam.com/article/row-locking) 的使用持久日期/时间而不是像 GETDATE() 这样的东西。

示例（使用固定值）：

```
BEGIN TRAN

DECLARE @now DATETIME 
SET @now = '2012-09-28 14:00:00'

SELECT *, @now AS NewEditTimestamp, CHECKSUM(ID, [Description]) AS RowChecksum
FROM TestLocks
WITH (HOLDLOCK, ROWLOCK)
WHERE ID = 3 AND EditTimestamp < DATEADD(mi, -30, @now)

/* Do all your stuff here while the record is locked */
UPDATE TestLocks
SET EditTimestamp = @now
WHERE ID = 3 AND EditTimestamp < DATEADD(mi, -30, @now)

COMMIT TRAN 
```

如果您从该过程中返回一行，那么您“拥有”“锁”，否则，将不会返回任何行，也没有可编辑的内容。

*   “更新”过程应添加类似于“哈希 = 先前返回的哈希”的 where 子句

示例（使用固定值）：

```
BEGIN TRAN

    DECLARE @RowChecksum INT
    SET @RowChecksum = -845335138

    UPDATE TestLocks
    SET [Description] = 'New Description'
    WHERE ID = 3 AND CHECKSUM(ID, [Description]) = @RowChecksum

    SELECT @@ROWCOUNT AS RowsUpdated

COMMIT TRAN 
```

所以在你的场景中：

1.  用户 A 编辑一行。当您从数据库返回此记录时，“编辑时间戳”已更新为当前时间，并且您有一行，因此您知道可以编辑。用户 B 不会得到一行，因为时间戳仍然太新。

2.  用户 B 在 30 分钟后编辑该行。因为时间戳已经过去了 30 多分钟，所以他们得到了回击。字段的哈希值将与 30 分钟前用户 A 的哈希值相同，因为没有写入任何更新。

3.  现在用户 B 更新。先前检索到的散列仍然与行中字段的散列匹配，因此更新语句成功，并且我们返回行计数以表明该行已更新。但是，用户 A 尝试下一步更新。因为描述字段的值发生了变化，散列值也发生了变化，因此 UPDATE 语句没有更新任何内容。我们得到“零行更新”的结果，因此我们知道该行已被更改或该行已被删除。

在所有这些锁进行的情况下，可能存在一些关于可伸缩性的问题，并且可以优化上述代码（例如，使用 UTC 可能会遇到时钟前进/后退的问题），但我编写这些示例只是为了解释它是如何工作的。

除此之外，如果不使用 select 事务中的数据库级行锁定，我看不出如何做到这一点。可能您可以通过 nHibernate 请求这些锁，但这超出了我对 nHibernate 的了解。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T09:58:03.480

是的，可以用 nhibernate 锁定一行，但如果我理解得很好，你的场景是在 web 上下文中，那么这不是最佳实践。

如您所述，最好的做法是使用带有自动版本控制的乐观锁定。在页面打开时锁定一行并在页面卸载时释放它会很快导致死锁行（javascript问题，页面未正确终止......）。乐观锁定将使 NHibernate 在刷新包含由另一个会话修改的对象的事务时抛出异常。如果您想对相同的信息进行真正的并发修改，您可以尝试考虑一个将许多用户输入合并到同一个文档中的系统，但它是一个独立的系统，不受 ORM 管理。

您将不得不选择一种方式来处理 Web 环境中的会话。 [http://nhibernate.info/doc/nh/en/index.html#transactions-optimistic](http://nhibernate.info/doc/nh/en/index.html#transactions-optimistic)

> 与高并发和高可伸缩性一致的唯一方法是带有版本控制的乐观并发控制。NHibernate 提供了三种可能的方法来编写使用乐观并发的应用程序代码。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-05T15:30:50.200

嘿，你可以试试这些网站

[http://thesenilecoder.blogspot.ca/2012/02/nhibernate-samples-row-versioning-with.html](http://thesenilecoder.blogspot.ca/2012/02/nhibernate-samples-row-versioning-with.html)

[http://stackingcode.com/blog/2010/12/09/optimistic-concurrency-and-nhibernate](http://stackingcode.com/blog/2010/12/09/optimistic-concurrency-and-nhibernate)

# javascript - 几个菜鸟 Javascript 问题

> ID：12272590
> 
> 赞同：0
> 
> 时间：2012-09-04T23:20:05.820
> 
> 标签：javascript, html, css

好吧，所以我有一个网站，这一切都在一个静态页面 index.php 上工作。页面上的内容由 URL 中的变量决定。

*   index.php?site=home
*   index.php?site=论坛
*   index.php?site=news

然后我有一些更长的

*   index.php?site=news&action=archive

我正在尝试制作一个脚本来更改我当前所在页面的导航按钮的颜色。

我正在处理的脚本获取页面的 url，使用 .search 来抓取 ? 之后的所有内容。然后我将字符串拆分并抓取第二部分（等号之后的部分），但这仅适用于具有 1 个变量的部分。

我在想一些类似 if 语句的东西，检查解析的字符串中是否有多个“=”，以及它是否确实在最后一个之后抓取了文本。类似的东西——我是个菜鸟。

另外，无论如何我可以在头部使用javascript setAttribute，还是需要在声明ID/类之后？

```
<html>
<head>
<title>Test</title>
<style type="text/css">
.test {
color: yellow;
font-size: 5em;
}
</style>
<script type="text/javascript">
function parseUrl(url) {
    var a = document.createElement('a');
    a.href = url;
    return a;
}

var page=parseUrl('').search;
var site=page.split("=")[1];

</script>
</head>
<body>
<ul>
<li id ="nav_home"><a href="testtest.html?site=home">Home</a>
<li id ="nav_forum"><a href="testtest.html?site=forum"/>Forum</a>
<li id ="nav_help"><a href="testtest.html?site=help"/>Help</a>
<li id ="nav_roster"><a href="testtest.html?site=roster"/>Roster<a/>
<li id ="nav_news"><a href="testtest.html?site=news"/>News<a/>
<li id ="nav_archive"><a href="testtest.html?site=news&action=archive"/>Archive<a/>
<script type="text/javascript">
document.getElementById("nav_" + site).setAttribute("class", "test");
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:31:54.067

只是想回顾一下备受赞誉的解决方案： -- [如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)

您可能很快就想开始使用 jQuery。少跨浏览器问题，多做，少写。

最后，将脚本放在结束 body 标记之前被认为是一种很好的做法。你可以考虑一下。-- [页面中脚本标记的位置如何影响其中定义的 JavaScript 函数？](https://stackoverflow.com/questions/496646/how-does-the-location-of-a-script-tag-in-a-page-affect-a-javascript-function-tha)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T23:30:17.530

当您可以只制作 PHP 文档并执行`$_GET["site"]`. 这些 get 变量是通过服务器传递的，您应该利用它们。

这是一个关于 PHP 的[教程](http://www.tutorialspoint.com/php/php_get_post.htm)，更深入地解释了我所说的内容，但只是为了让您了解有两种不同的方法可以使用 PHP 通过服务器传递变量。有`$_GET`和`$_POST`。两者之间的主要区别在于您现在在网站上看到的内容。之后的一切？在 URL 中代表一个变量。如果您想在另一个 PHP 文档中获取该变量，您只需执行以下操作：

`$variable = $_GET['site'];`

您谈论的问题之一是当您处理多个变量时。那么使用 PHP 这不是一个真正的问题......你只需将它存储在一个不同的变量中。

`$variable2 = $_GET['action'];`

我认为你应该能够从那里处理它。如果您需要更多帮助，请询问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T23:30:47.063

不知道拆分的确切功能，但有两种选择：1）拆分只进行一次拆分，在它第一次找到“=”的地方。2）split 将字符串拆分为多个部分，每次它找到一个“=”。

假设它是第二个选项，那么您将得到一个包含所有子字符串的数组。示例：假设您有字符串“?Variable1=this&variable2=that&variable3=somethingDifferent”。如果拆分，您将得到一个包含 4 个字符串的数组：

*   “？变量1”
*   “这个&变量2”
*   “那个&变量3”
*   “有些不同”

所以你真正应该做的是使用“&”作为分隔符进行拆分。然后，遍历结果数组中的所有字符串并以“=”作为分隔符进行拆分。该结果数组的第一个字符串将是您的参数（即“variable1”、“variable2”），第二个字符串是该参数的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T23:32:01.717

我以前使用过这个脚本来获取 URL 中的变量。（这是jquery）

```
 $.extend({
    getUrlVars: function(){
        var vars = [], hash;
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
        for(var i = 0; i < hashes.length; i++)
        {
          hash = hashes[i].split('=');
          vars.push(hash[0]);
          vars[hash[0]] = hash[1];
        }
        return vars;
      },
    getUrlVar: function(name){
    return $.getUrlVars()[name];
  } 
});
var site = $.getUrlVar('site');
var news = $.getUrlVar('news'); 
```

我在 stackoverflow 和[http://www.backbonetechnology.com/blog/jquery/jquery-get-url-variables上看到了这个脚本](http://www.backbonetechnology.com/blog/jquery/jquery-get-url-variables)

在头部设置属性应该没有任何问题。只需使用选择器。

```
document.getElementById("nav_" + site).css("class", "test"); 
```

# android - as3 air 获取设备上文件的特定路径

> ID：12272591
> 
> 赞同：1
> 
> 时间：2012-09-04T23:20:11.740
> 
> 标签：android, actionscript-3, flash, air

我正在使用 as3 air 并在 android 上进行测试。

我需要能够通过浏览功能加载 sd 卡，或者 **我需要通过路径直接指向该文件夹。**

我已成功从服务器下载了一个 zip 文件。我可以在桌面上测试时解压缩它，因为我可以在桌面上浏览到正确的路径，但不能在手机上浏览。但我现在不需要浏览功能。我只需要能够指向 applicationStorgeDirectory 和其中的文件。:)

我需要文件 var :)

```
var reader:ZipFileReader = new ZipFileReader();
    reader.open(file); /// Help :) 
```

**更新 2012 年 9 月 4 日下午 5 点**

* * *

我试过这段代码：

```
var file:File = File.applicationStorageDirectory.resolvePath("myFile.zip");
trace(file.url); //path to the file
//assuming that function takes a string path
reader.open(file.url); 
```

我得到了这个错误：

```
Scene 1, Layer 'Layer 1', Frame 1, Line 46
1067: Implicit coercion of a value of type String
to an unrelated type flash.filesystem:File. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T23:27:27.257

这应该给你一个现有文件的 url

[文件网址](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html#url)

你可以尝试这样的事情：

```
var file:File = File.applicationStorageDirectory.resolvePath("myFile.zip");
trace(file.url); //path to the file
//assuming that function takes a string path
reader.open(file.url); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T02:29:35.133

试试下面的。我已经测试过了。

```
var file:File = File.applicationStorageDirectory.resolvePath("myFile.zip");
trace(file.url);
reader.open(file); 
```

# wcf - 使用 wsHttpBinding

> ID：12272595
> 
> 赞同：1
> 
> 时间：2012-09-04T23:20:34.397
> 
> 标签：wcf, transactions, wcf-binding, wcf-security

在阅读了有关它的更多信息并尝试实现 wshttpbinding 之后，它就不会发生。无论我尝试什么，我都会收到以下错误消息（安全模式已被注释掉）。我理解为什么绑定之间的 SOAP 版本不同。

“(415) 无法处理消息，因为内容类型 'application/soap+xml; charset=utf-8' 不是预期的类型 'text/xml; charset=utf-8'”

我在以下链接中阅读了有关 TransportWithMessageCredentials 的更多信息：

[http://msdn.microsoft.com/en-us/library/ms789011.aspx](http://msdn.microsoft.com/en-us/library/ms789011.aspx)

但仍然无法让它工作。

我可以将 basicHttpBinding 用于内部应用程序并且效果很好（如果我不包含任何事务），但我在 WCF 层中的应用程序仍然需要支持事务（见下文），据我了解 basicHttpBinding 不支持，因为它不包含 transactionflow 属性。

```
[OperationContract]

[TransactionFlow(TransactionFlowOption.Allowed)]

using (TransactionScope ts = new TransactionScope(TransactionScopeOption.Required)) 
```

当我尝试在包含安全模式的情况下运行以下命令时，svc 配置编辑器甚至没有启动并引发以下错误：“System.InvalidOperationException：找不到与具有绑定 WSHttpBinding 的端点的方案 https 匹配的基地址.注册的基地址方案是[http]。”

我知道它需要某种 SSL/https 安全性，但我的网站（如下所示是 http）。这对于面向公众的网站来说很好，但对于内部网站，目前，我想做的就是支持交易。

这是我的 wsHttpBinding 服务器端设置：

```
<bindings>
      <wsHttpBinding>
        <binding name="WsHttpBinding_IYeagerTechWcfService" closeTimeout="00:02:00" openTimeout="00:02:00" receiveTimeout="24.20:31:23.6470000" sendTimeout="00:10:00" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" transactionFlow="true">
          <security mode="Transport" >
            <transport clientCredentialType = "Windows" />
          </security>
        </binding>
      </wsHttpBinding>
</bindings>

<?xml version="1.0"?>
<services>
  <clear />

  <service name="YeagerTechWcfService.YeagerTechWcfService">
    <endpoint address="" binding="wsHttpBinding" contract="YeagerTechWcfService.IYeagerTechWcfService" >
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="http://abc.com/yeagerte/YeagerTechWcfService.YeagerTechWcfService.svc" />
      </baseAddresses>
    </host>
  </service>
</services> 
```

这是我的客户端设置：

```
<?xml version="1.0"?>
<client>
  <endpoint address="http://abc.com/yeagerte/YeagerTechWcfService.YeagerTechWcfService.svc"
    binding="wsHttpBinding" contract="YeagerTechWcfService.IYeagerTechWcfService"
    name="WsHttpBinding_IYeagerTechWcfService" />
</client> 
```

有人可以提供以下内容：

是否有另一种方法来支持 WCF 中的 basicHttpBinding 事务或任何其他方式？

如果是这样，我该如何实施？

如果没有，我有什么选择？

对于上述问题，我可能已经找到了答案，但想由在这件事上更有经验的人来运行它。

我建议不要让 WCF 层处理事务（如上所述），而是在控制器将数据传递到 WCF 层时使用 basicHttpBinding 和以下代码：

```
// method here
using (TransactionScope ts = new TransactionScope(TransactionScopeOption.Required))
                        {
                            db.EditCategory(cat);
                           // the above code would execute the EditCategory method below in the WCF layer  and keep the transaction alive                                                   ts.Complete();
                            ts.Dispose();
                        }
                        return Json(new GridModel(db.GetCategories()));
// end method 
```

WCF 层：

```
public void EditCategory(Category cat)
        {
            try
            {
              using (YeagerTechEntities DbContext = new YeagerTechEntities())
                {
                    Category category = new Category();

                    category.CategoryID = cat.CategoryID;
                    category.Description = cat.Description;

            // do another db update here or in another method...

                    DbContext.Entry(category).State = EntityState.Modified;
                    DbContext.SaveChanges();
                }
             }

            catch (Exception ex)
            {
                throw ex;
            }
        } 
```

对于使用 SSL 的面向公众的网站，如何正确实现 wsHttpBinding？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-22T05:06:18.600

我在使用 WCF 事务时遇到了同样的问题，我将消息安全与 Windows 身份验证一起使用，并且不必设置任何证书。

```
<wsHttpBinding>
        <binding name="WSHttpBinding_Transactional" 
           transactionFlow="true">
          <security mode="Message">
            <transport clientCredentialType="Windows" proxyCredentialType="None" />
          </security>
        </binding>
 </wsHttpBinding> 
```

# c++ - c ++确定多边形轮廓中的图像

> ID：12272601
> 
> 赞同：0
> 
> 时间：2012-09-04T23:21:21.363
> 
> 标签：c++, polygon, convolution, gpc

我正在使用 GPC ( [General Polygon Clipper](http://www.cs.man.ac.uk/~toby/alan/software//) ) 创建图像集。我无法确定这些图像是否来自不相交的集合。

我正在使用`gpc_polygon`上面链接中定义的结构，从图像数据（角的纬度/经度）中读取顶点列表......并将图像顺序添加到多边形。

分离属于不同区域的图像很重要。虽然我不能确定相交区域是否不为零（这将是一个完美的测试），但我注意到`num_contours`完成的多边形与不同区域的数量一致。

我想我可以用它`num_contours`来确定一个图像是否属于一个集合。

然而，当我添加图像时，我可以看到，在一张图像上，num_contours=1，在第二张之后，它增加到 2（无论图像是否在同一部分，这是有道理的）......但它没有在那之后不要增加，直到脱节图像的模式真的消失了——所以我不能真正用它来测试，至少不能单独使用。

这与我使用 DIFF 运算符从多边形中删除图像相同。

如果其他人使用过 GPC 或其他多边形卷积方法，也许你可以给我一些建议，告诉我我可以用什么来识别哪些图像属于每个轮廓，这样我就可以在多边形创建之前或之后将它们分开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:50:53.577

我使用了 num_contours，其限制值为 2 而不是 1，并且不得不迭代地返回，并尝试重新添加轮廓，直到我无法再添加它们。该解决方案是次优的，可能非常慢，并且在某些情况下，不属于一起的多边形最终会出现在同一轮廓中。

# dom - jquery.on() 事件处理程序不会在动态添加的 $element 上触发

> ID：12272608
> 
> 赞同：0
> 
> 时间：2012-09-04T23:22:20.750
> 
> 标签：dom, dynamic, jquery

[为了说明我的问题，我在这里](http://jsfiddle.net/7HZvS/)创建了一个 jsfiddle 页面

[http://jsfiddle.net/7HZvS/](http://jsfiddle.net/7HZvS/)

为什么面板滑动后没有触发警报功能？单击标有“swiperee”的灰色框并观看一个灰色面板滑入。然后单击标有“swiperee2”的那个。没有。应该引起警报。:(

由于当您单击“swiperee”灰色按钮时第一个面板会滑动，我看不出为什么第二个灰色按钮“swiperee2”不处理其 .on() 事件 - 它的生成方式相同。

谢谢。

**编辑：** Gabe 在下面的回答并不完全正确，恕我直言。首先，他的代码使用 .on() 事件列表而不是事件映射，但这只是语法。他的观点是应该*委托*事件，因为我正在动态添加元素。

我实际上不确定这是否真的是正确的想法，因为我实际上已经加载了所有元素，它们只是没有显示 - 这里没有 ajax。所发生的只是元素在 DOM 层次结构中移动。

下面是上面 jsFiddle 的示例代码，根据要求。

```
$(function(){
    var g = {
        func : {
            swipeLeft    : function($el)
            {
                $RIGHT = $('<div id="right">')
                    .appendTo('body')
                    .addClass('scrollable hwaccel')
                    .css({
                        'position'    : 'absolute',
                        'z-index'    : '2',
                        'top'        : '0px',
                        'left'        : '640px',
                        'width'        : '640px',
                        'height'    : '960px',
                        'border'    : '1px solid #ccf'
                    })
                ;
                $el.appendTo($RIGHT);
                $('#right, #main').animate(
                    {
                        left    : '-=640px'
                    },
                    500,
                    function(){
                        $MAIN.empty();
                        $el.appendTo($MAIN);
                        $MAIN.css('left','0px');
                        $RIGHT.remove();
                    }
                );
            }
        }
    };

    $MAIN = $('<div id="main">')
        .appendTo('body')
        .addClass('scrollable hwaccel')
        .css({
            'position'    : 'absolute',
            'z-index'    : '1',
            'top'        : '0px',
            'left'        : '0px',
            'width'        : '640px',
            'height'    : '960px',
            'border'    : '1px solid #009'
        })
    ;
    $start = $('<div id="start">')
        .appendTo($MAIN)
        .css({
            'position'    : 'absolute',
            'top'        : '0px',
            'left'        : '0px',
            'width'        : '640px',
            'border'    : '1px solid #900'
        })
        .html(
            'hello<br/>456'
        )
        .append(
            $('<div id="swiperee">')
            .css({
                'position'    : 'absolute',
                'top'        : '10px',
                'left'        : '10px',
                'width'        : '100px',
                'height'    : '40px',
                'background': '#ccc',
                'cursor'    : 'pointer'
            })
            .html('swiperee')
            .on({
                click    : function(){
                    g.func.swipeLeft($next);
                }
            })
        )
    ;
    $next = $('<div id="next">')
        .css({
            'position'    : 'absolute',
            'top'        : '0px',
            'left'        : '0px',
            'width'        : '640px',
            'height'    : '960px',
            'background': '#ddd'
        })
        .html(
            'sdfjkgh sdklfjgh sdklfjgh skldfj ghskldjgh'
        )
        .append(
            $('<div id="swiperee2">')
            .css({
                'position'    : 'absolute',
                'top'        : '10px',
                'left'        : '10px',
                'width'        : '100px',
                'height'    : '40px',
                'background': '#ccc',
                'cursor'    : 'pointer'
            })
            .html('swiperee2')
            .on({
                click    : function(){
                     alert('sdf');// WHY DOES NOT CALL??
                }
            })
        )
    ;
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:42:04.437

问题是`$MAIN.empty()`动画回调中的行。删除它，它的工作原理。

该`.empty()`调用显然做了一些清理，它解除了事件处理程序的绑定。

# xml-serialization - 如何访问对象数组

> ID：12272610
> 
> 赞同：-1
> 
> 时间：2012-09-04T23:22:49.430
> 
> 标签：xml-serialization, xsd, linq-to-xml, deserialization, xml-deserialization

我有一个从 xml 自动生成的类，如下所示：

```
public partial class XmlClass {

private decimal num1;

private ClassA[] classField;

/// <remarks/>
public decimal num1 {
    get; 
    set; 
    }
}

/// <remarks/>
[System.Xml.Serialization.XmlElementAttribute("classA")]
public ClassA[] classA {
    get{...};
    set{...}; 

} 
```

}

```
public partial class ClassA {

private object[] itemsField;

private string typeField;

[System.Xml.Serialization.XmlElementAttribute("commands", typeof(classACommands))]

[System.Xml.Serialization.XmlElementAttribute("minVersion", typeof(string))] 
public object[] Items {
    get {
        return this.itemsField;
    }
    set {
        this.itemsField = value;
    }
}

[System.Xml.Serialization.XmlAttributeAttribute()]
public string type {
    get {
        return this.typeField;
    }
    set {
        this.typeField = value;
    }
} 
```

}

ClassA 将字符串和命令类作为`Object[]`. 我可以看到一切都被完美地反序列化并通过: 获取它们`(commands)myXmlClass.classA.ElementAt(i).Items[3]`，其中`i`来自 ClassA 数组的索引。但是如何在不使用“3”的情况下获取或设置它们？在不同的 ClassA 元素中可能会有所不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:31:03.080

不确定我是否完全理解您的问题，但您可以使用 foreach 循环：

```
foreach(ClassA a in myXmlClass.classA) {
  Console.WriteLine(a.num1.ToString());
} 
```

# ios5 - 我的 iOS 应用程序中的所有 UISteppers 都已禁用

> ID：12272615
> 
> 赞同：1
> 
> 时间：2012-09-04T23:23:39.927
> 
> 标签：ios5, uikit, uistepper

我的应用在几个不同的视图中使用 UIStepper 控件。我发布了一个应用程序的小更新，它根本不应该影响这些视图，并且我开始收到报告说应用程序中的所有 UISteppers 现在都已禁用。一位用户发送了一个屏幕截图，并且步进器控件看起来好像它的 enabled 属性设置为 NO。但是，我的代码中根本没有设置此属性的位置，默认值为 YES。我已经在我的应用程序中搜索了“启用”一词的实例，以确保我不会以某种方式意外禁用它，而我不是。

我认为可能在 iOS 版本之间启用属性的默认值发生了变化，但报告此问题的用户正在运行 iOS 5.1.1，与我的开发设备相同。我才开始听说这个应用程序更新的问题。

除了设置启用属性，我发现如果最小值和最大值设置为相同的值，步进器将被禁用。我很确定这不会发生在我的应用程序中。这些值是硬编码的并传递给一个设置方法，自从许多应用程序版本之前我就没有更改过这个代码。

你知道发生这种情况的任何其他原因吗？我自己无法重现问题，而且它只影响部分用户，因此很难解决。

这是我创建 UISteppers 的代码，值得：

```
- (UIStepper *)makeStepperInput:(float )currentValue minValue:(float)minValue maxValue:(float)maxValue increment:(float)increment {
    int stepperWidth = 94;
    int stepperHeight = 27;
    CGRect stepperFrame = CGRectMake(0, 0, stepperWidth, stepperHeight);

    UIStepper *stepperInput = [[[UIStepper alloc] initWithFrame:stepperFrame] autorelease];
    stepperInput.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin;

    [stepperInput setValue:currentValue];
    [stepperInput setMinimumValue:minValue];
    [stepperInput setMaximumValue:maxValue];
    [stepperInput setStepValue:stepValue];
    [stepperInput setContinuous:NO];

    NSLog(@"making stepper with values %f, %f, %f, %f (%i)", currentValue, minValue, maxValue, stepValue, stepperInput.enabled);

    [stepperInput addTarget:self action:@selector(onChange:) forControlEvents:UIControlEventValueChanged];

    return stepperInput;
} 
```

更新：我有一个用户愿意使用上面的 NSLog 行安装调试版本。他向我发送了控制台输出，它显示步进器的最小值和最大值是正确的（在一种情况下为 1 和 20）并且启用的属性为 YES。不幸的是，这消除了我关于这里可能发生的事情的两个理论......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T01:19:53.087

好的，这就是发生的事情。上面发布的方法是我真实方法的简化版本，它为 iOS 5 之前的设备提供了一些分支。为了帮助支持 iOS 5 之前的版本，我实际上将 stepperInput 声明为 UIControl，然后在不支持 UIStepper 的 iOS 版本上返回不同的内容。

现在有趣的部分。我回滚了我的项目并开始查看我的构建设置，并记得在我上次发布之前，Xcode 给了我一个关于我的构建设置已过期的警告消息。我单击了按钮以允许 Xcode 进行所有推荐的更改。这一次，我一次执行一项更改，并在每次更改后测试我的应用程序。

建议的第一个更改是“将编译器配置升级到 LVVM”。（“编译器配置设置为 'com.apple.compilers.llvmgcc42'。这将升级到 'Apple LLVM compiler 4.0'，这是 iOS 目标的推荐设置。”）一旦我进行了更改，问题就出现了出现在我的测试设备上。因此，似乎旧编译器允许我在声明为 UIControl 的对象上设置 UIStepper 属性，而新编译器则不允许。实际上，当我更改上面的 NSLog 行以输出步进器的实际值时，而不是传递给方法的值，它们都返回 0。将其最小值和最大值都设置为 0 是使步进器看起来像的原因禁用。

我不认为这会影响所有用户，因为我无法重现它，但我正在使用较旧的构建设置而不是用于发布的构建设置进行测试。所以现在我认为这可能会影响所有用户，并且只有一些用户注意到它。

无论如何，解决方案是重新组织我的代码，以便我可以将 UIStepper 声明为真正的 UIStepper，因为较新的编译器不允许我以前做的那种捏造。

# android - Android 联系人图片问题

> ID：12272616
> 
> 赞同：0
> 
> 时间：2012-09-04T23:23:41.627
> 
> 标签：android, contacts, android-contacts

我在检索联系人图片时遇到了问题。在我的 Galaxy Nexus（运行 JB，4.1.1）上，当我获得联系人图片时，它们显示得非常小。当我在我的 Droid 2（运行 GB，2.3.7）上运行相同的代码时，我总是得到我的默认图像。

这是我的代码：

```
Cursor cursor;

    cursor = getContentResolver().query(
            ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
            null,
            ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",
            new String[]{id}, null);

    cursor.moveToFirst();

    contactName = cursor.getString(cursor.getColumnIndex((ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME)));

    pictureID = Uri.withAppendedPath(result, ContactsContract.Contacts.Photo.CONTENT_DIRECTORY).toString();

    if(contactPicture(Uri.parse(pictureID)))
    {
        contactsEditor.putString(""+id+ "Picture", pictureID);
    }
    else
        contactsEditor.putString("" + id + "Picture", "" + R.drawable.ic_contact_picture);

    contactsEditor.commit();

    contactNumber = cursor.getString(cursor.getColumnIndex((ContactsContract.CommonDataKinds.Phone.NUMBER)));

    cursor.close(); 
```

所有变量/常量都已正确定义（如果您想查看定义，请询问，我会发布它们）

这是我要放入的xml：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal"
        >
    <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical">
        <ImageView
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:contentDescription="@string/contactPhotoDesc"
                android:id="@+id/contactPic"/>
    </LinearLayout>
    <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical">
        <TextView
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:id="@+id/contactName"/>
        <TextView
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:id="@+id/contactNumber"/>
    </LinearLayout>
</LinearLayout> 
```

我的默认图像显示正常，但是当我从联系人检索图像时，它在 GNex 上显示得非常小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:54:52.300

问题是 Galaxy Nexus 是高分辨率设备，而且图片似乎不是，所以（如果不缩放）它看起来会更小。

您可以将 ImageView 设置为固定大小，而不是 wrap_content，它会按比例放大。

您也可以使用此方法：

> 公共静态 InputStream openContactPhotoInputStream (ContentResolver cr, Uri contactUri, boolean preferHighres)

[http://developer.android.com/reference/android/provider/ContactsContract.Contacts.html#openContactPhotoInputStream(android.content.ContentResolver,%20android.net.Uri,%20boolean](http://developer.android.com/reference/android/provider/ContactsContract.Contacts.html#openContactPhotoInputStream(android.content.ContentResolver,%20android.net.Uri,%20boolean) )

似乎它将返回高分辨率联系人图片（如果有）。无论如何，您仍然需要在 ImageView 中设置固定大小，因为在低分辨率设备中，如果 Android 仍然返回高分辨率图片，它看起来会很大。

# sql-server-ce - SqlServerCE Select 语句本机异常

> ID：12272622
> 
> 赞同：0
> 
> 时间：2012-09-04T23:25:18.353
> 
> 标签：sql-server-ce, windows-mobile

WinMobile 6.1 教授 CE 操作系统 5.2.20269 SqlserverCE 3.5。调试和部署时问题很严重。

从表中选择 count(*) ，您将获得预期的有效结果和代码流。

从表中选择字段名称，executereader 会抛出本机异常。即错误在执行代码之外，'catch' 语句不执行。

深入研究移动设备上的错误详细信息显示错误 dll 是 SqlCeDataReader.FillMetaData 处的 sqlceqp35.dll（从 initializeDataReader 调用）

其他答案表明在设备上使用 sqlce.repl.ppc.wce4.armv4.CAB 和朋友。我使用默认的“设备”选项安装了这些，但没有任何区别。

WinMobile 经验很少，所以也许我错过了一些简单的东西。

有趣的是，我写到上游的数据库没有问题。

连接字符串是：

```
 private const string MsConn = @"Data Source=Program Files\Inspector\Inspector.sdf;Persist Security Info=False;"; 
```

数据类函数如下：

```
public int GetLogonId()
    {
        SqlCeConnection conn = new SqlCeConnection(MsConn);
        conn.Open();

        SqlCeCommand cmdSelect = conn.CreateCommand();
        SqlCeDataReader r = null;
        try
        {
            const string sqlSelect = "select inspector from Inspector"; 
            //const string sqlSelect = "Select count(*) from Inspector"; This works
            cmdSelect.CommandText = sqlSelect;
            //cmdSelect.Prepare();
             r = cmdSelect.ExecuteReader();//Native error here
            return r.Read() ? r.GetInt32(0) : 0;
        }
        catch (Exception ex)
        {

            throw new Exception("GetLogonId " + ex.Message);
        }
        finally
        {
            conn.Close();
            cmdSelect.Dispose();

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-24T23:25:08.297

我在智能设备应用程序中遇到了同样的错误。请访问以下 [链接](http://www.wiki-errors.com/wiki-errors.php?wiki=0xc0000005)

您可以硬重置/冷启动您的设备并重新安装 sql ce cab 文件：

1.  sqlce.ppc.wce5.armv4i.CAB
2.  sqlce.repl.ppc.wce5.armv4i.CAB
3.  sqlce.dev.ENU.ppc.wce5.armv4i.CAB

# cakephp - 如何在 Util 插件中使用 CakeDC 的 csvUpload 行为中的固定字段

> ID：12272624
> 
> 赞同：0
> 
> 时间：2012-09-04T23:25:47.877
> 
> 标签：cakephp, plugins, cakephp-2.0, cakephp-2.1, cakedc

我在 CakePHP 2.2.1 安装上使用 CakeDC 的 Utils 插件的 csvUpload 行为。

我让它工作得很好，它成功地处理了一个相当大的 csv。但是，我的表/模型中有两个字段被认为是固定的，因为它们基于来自不一致的关联模型的 ID。所以我需要通过变量来获得这些固定值，这很容易。

所以我的问题是，如何使用 csvUpload 的固定字段方面？我已经尝试了以下和许多小的变化，这显然没有用。

```
public function upload_csv($Id = null) {
    $unique_add = 69;
    if ( $this->request->is('POST') ) {
        $records_count = $this->Model->find( 'count' );
        try {
            $fixed = array('Model' => array('random_id' => $Id, 'unique_add' => $unique_add));
            $this->Model->importCSV($this->request->data['Model']['CsvFile']['tmp_name'], $fixed);
        } catch (Exception $e) {
            $import_errors = $this->Model->getImportErrors();
            $this->set( 'import_errors', $import_errors );
            $this->Session->setFlash( __('Error Importing') . ' ' . $this->request->data['Model']['CsvFile']['name'] . ', ' . __('column name mismatch.')  );
            $this->redirect( array('action'=>'import') );
        }

        $new_records_count = $this->Model->find( 'count' ) - $records_count;
        $this->Session->setFlash(__('Successfully imported') . ' ' . $new_records_count .  ' records from ' . $this->request->data['Model']['CsvFile']['name'] );
        $this->redirect(array('plugin'=>'usermgmt', 'controller'=>'users', 'action'=>'dashboard'));
    }
} 
```

任何帮助将不胜感激，因为我在搜索时只找到了 1 篇关于此行为的帖子......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:32:56.787

我做了我的自定义方法来完成同样的任务。在中定义以下方法`app\Plugin\Utils\Model\Behavior`

```
public function getCSVData(Model &$Model, $file, $fixed = array())
{
    $settings = array(
              'delimiter' => ',',
              'enclosure' => '"',
              'hasHeader' => true
            );
    $this->setup($Model, $settings);
    $handle = new SplFileObject($file, 'rb');       
    $header = $this->_getHeader($Model, $handle);
    $db = $Model->getDataSource();
    $db->begin($Model);
    $saved = array();
    $data = array();
    $i = 0;
    while (($row = $this->_getCSVLine($Model, $handle)) !== false)
    {
        foreach ($header as $k => $col)
        {
            // get the data field from Model.field              
            $col = str_replace('.', '-', trim($col));
            if (strpos($col, '.') !== false)
            {
                list($model,$field) = explode('.', $col);
                $data[$i][$model][$field] = (isset($row[$k])) ? $row[$k] : '';
            }
            else
            {
                $col = str_replace(' ','_', $col);
                $data[$i][$Model->alias][$col] = (isset($row[$k])) ? $row[$k] : '';
            }
        }
        $is_valid_row = false;

        foreach($data[$i][$Model->alias] as $col => $value )
        {
            if(!empty($data[$i][$Model->alias][$col]))
            {
                $is_valid_row = true;                   
            }
        }
        if($is_valid_row == true)
        {
            $i++;
            $data = Set::merge($data, $fixed);  
        }
        else
        {
            unset($data[$i]);
        }
    }
    return $data;
} 
```

你可以使用它：

```
 $csv_data = $this->Model->getCSVData($this->request->data['Model']['CsvFile']['tmp_name'], $fixed); 
```

这里`$csv_data`将包含来自 csv 文件的所有非空记录的数组，并且每个记录索引中都有固定字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:36:07.160

所以当我告诉 Arun 时，我回答了我自己的问题并弄清楚了。我正在寻找广阔而不是真正检查我面前的东西。我开始进行一些调试并弄清楚了。

首先，$unique_add = 69 被视为一个 int，呵呵。为了将其添加到 csv 中，需要将其视为字符串。所以它就变成了，$unique_add = '69'。

我无法将 $Id 的值直接输入到固定数组中。所以我只需要执行一个简单的查找来获得我需要的值。

```
$needed_id = $this->Model->find('first', array(
            'condition'=>array('Model.id'=>$Id)
        )
    );

    $random_id = $needed_id['Model']['id']; 
```

希望这不需要帮助任何人，因为希望没有其他人会犯这个愚蠢的错误。但是还有一个优点……现在互联网上实际上不止一篇文章记录了 CakeDC Utils 插件中固定字段的使用。

# css - 防止背景图像缩放

> ID：12272629
> 
> 赞同：0
> 
> 时间：2012-09-04T23:26:28.107
> 
> 标签：css, image, background, resize, zooming

我希望达到与我发现的这个网站类似的效果：[http ://www.august.com.au/](http://www.august.com.au/)

在此网站上，如果您放大/缩小 ctrl +/-，背景不会改变。只有内容缩放。

我希望能够为我的网站设置背景图像并拥有它，以便背景图像始终填满屏幕，无论屏幕分辨率或缩放选项如何。

我知道您可以使用 width:100% 使其填充页面，但是我的理解是这在页面加载时应用，并且如果用户在加载图像后缩放将不会重新调整大小。

有人对从哪里开始有任何建议吗？我曾尝试在网上搜索信息，但找不到太多信息。

另外我猜这将使用JavaScript而不是css之类的东西来实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-24T11:00:33.790

```
This worked for me in chrome, firefox

.someImage {
    width: 7%;
    height: 0;
    padding-bottom: 7%;
    background-image: url('../img/myImage.png');
    background-repeat: no-repeat;
    position: fixed;
    bottom: 5%;
    left: 5%;
    background-size: 100% 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T00:05:15.003

原来有一个不错的 Jquery 插件：

[http://bavotasan.com/2011/full-sizebackground-image-jquery-plugin/](http://bavotasan.com/2011/full-sizebackground-image-jquery-plugin/)

似乎按我的预期工作。

# backbone.js - 路由器主干.js 处理事件

> ID：12272630
> 
> 赞同：1
> 
> 时间：2012-09-04T23:26:37.827
> 
> 标签：backbone.js, backbone-events

我有一个非常复杂的 Backbone 应用程序，其中包含许多视图/模型和集合。

有时当用户单击按钮时，我需要更新多个集合并更新某些视图。

为了管理集合，我处理了路由器中的大多数事件。事件顺序如下：

用户单击链接/按钮并查看触发事件：

```
 this.model.trigger('someEvent'); 
```

监听事件的模型，必要时更新自身并通过我的事件总线通知路由器

```
eventbus.trigger('globalEVent'); 
```

我的路由器正在侦听全局事件，从缓存存储中获取集合/模型并更新必要的集合和模型。

到目前为止，这工作得很好，但是

我有太多事件，我的路由器代码变得难以管理。我的问题是有没有办法处理路由器外部的事件并且仍然访问路由器内部的方法？我的方法是正确的还是我没有考虑过更优雅的解决方案？

**更新：**

这是我现在的做法：

在路由器中，我在 initialize() 中调用此方法：

```
 registerModules : function() {
           var self = this;
           Backbone.trigger(Events.RegisterModule, function(moduleRoutes) {

           _.each(moduleRoutes, function(moduleRoute) {
               self.routeDetails[moduleRoute.name] = {
                  buildPageUrl: moduleRoute.buildPageUrl,
                  fragment :  moduleRoute.fragment
               }
               self.route(moduleRoute.fragment, moduleRoute.name, moduleRoute.action);
           });

           });
        }, 
```

然后，我为每个自我注册的模块/页面（简化版）设置了常规的自我执行块：

```
(function() {

   var module = {

            loadAndDisplay: function() {},
            saveAndContinue: function(model) {

                Backbone.trigger(Events.ChangePage, model.get('nextPage'));

            },
            registerEvents: function() {},
            _init: function() {
                module.registerEvents();
                var self = this,
                    routes =  [{
                        fragment: Constants.FRAGMENT,
                        name: Constants.PAGE_NAME,
                        buildPageUrl:  function() {
                            return Constants.FRAGMENT;
                        },
                        action: module.loadAndDisplay
                    }];

                Backbone.on(Events.RegisterModule, function(registerCallback) {
                    registerCallback.call(registerCallback, routes);
                });
            }
        };

    module._init();    

})(); 
```

当然，您的路由器脚本应该在您的模块代码之前加载。它非常适合我的需求。通过这种设计，我完全分离了路由器/模块，它们彼此也不了解。每个都将处理它自己的事件/数据等。共享逻辑进入路由器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:13:08.790

您应该将路由器功能分成不同的类。在我们基于 Marionette 的应用程序中，我们使用 RegionManager 来处理所有与视图相关的内容，例如在不同区域更改视图、打开叠加层等和 StateMachine。路由器本身只是触发不同的事件，例如管理器类监听的 state:change 或 region:change。

这样做，你可以有一个不同的管理器类来处理你的应用程序的一个特殊方面。让路由器执行他的构建目标：监听位置变化事件并通知应用程序。路由器不应该有其他逻辑然后这个。

# javascript - 如何创建一组谷歌地图地理坐标

> ID：12272638
> 
> 赞同：0
> 
> 时间：2012-09-04T23:28:19.477
> 
> 标签：javascript, google-maps, geocoding

在 Javascript 中，我有两个数组，称为 latitude 和 longitude，它们具有适当的 long 和 lat 值（作为最初来自 asp.net 控制器的字符串，我通过解析 XML 提要获得它们）。

我想做的是创建一个名为 points 的新数组，其中包含 lat/lng 值，因此我可以在地图上显示这些值。这是我认为应该起作用的方法，但绝对没有做任何事情：

```
 var points=new Array();

       for(var i=0; i<latitude.length; i++){
       points=new google.maps.LatLng(latitude[i], longitude[i]);
       } 
```

纬度和经度数组的长度相同，我认为这不是问题。谢谢，阿曼达

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T23:29:40.130

您不是向数组*添加*元素，而是在每次循环迭代 ( )中为变量*分配*一个新`LatLng`对象。要将元素添加到数组中，请为数组位置 ( ) 下标并将对象分配给它：`points``points = new``points[index] = value`

```
var points=new Array();
for (var i=0; i < latitude.length; i++) {
  points[i] = new google.maps.LatLng(latitude[i], longitude[i]);
} 
```

或使用[`Array#push()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)：

```
var points = [];
for (var i=0; i < latitude.length; i++) {
  points.push(new google.maps.LatLng(latitude[i], longitude[i]));
} 
```

# python - 在 Python 中使用 BSON 将浮点数组序列化/反序列化为二进制文件

> ID：12272642
> 
> 赞同：2
> 
> 时间：2012-09-04T23:28:49.427
> 
> 标签：python, numpy, deserialization, binaryfiles, bson

我习惯使用 JSON 和 Numpy 在 python 中存储数组、列表和字典，但我想使用 BSON，因为浮点数只占用 4 个字节，从而减少文件大小。

使用 Json，我执行以下操作：

```
import numpy
import json

a = numpy.random.rand(12).reshape((3,4))

with open('out.json', 'w') as out:
    json.dump(a.tolist(), out)

with open('out.json') as inp:
    b = numpy.array(json.load(inp))

print b 
```

我没有找到一种明显的方法来对 BSON 做同样的事情。我试过这个：

```
import numpy
from bson import BSON

a = numpy.random.rand(12).reshape((3,4))

b = BSON.encode({'a': a.tolist()})

with open('out.bson', 'wb') as out:
    out.write(b)

with open('out.bson', 'rb') as inp:
    print BSON().decode(inp.read()) 
```

但是得到这个错误：

```
Traceback (most recent call last):
  File "apaga.py", line 12, in <module>
    print BSON().decode(inp.read())
  File "/usr/lib/python2.7/dist-packages/bson/__init__.py", line 539, in decode
    (document, _) = _bson_to_dict(self, as_class, tz_aware)
bson.errors.InvalidBSON: not enough data for a BSON document 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T23:49:24.580

我安装的 BSON 版本不会如图所示导入，所以也许我使用的是不同的版本。要在导入后在 python 类型 help(bson) 中查看您的文档...

像这样的东西应该工作：

```
import bson
>>> a = numpy.random.rand(12).reshape((3,4))
>>> b = bson.dumps({'a':a.tolist()})
>>> print bson.loads(b)
{u'a': [[0.033390565943162254, 0.7282666963459123, 0.03719924011978737, 0.2664821209717694], [0.6145164300761253, 0.3662769247564551, 0.5973843055182299, 0.42908933503924207], [0.05901830243140804, 0.31533731904861184, 0.7158207045507905, 0.12686922689849378]]} 
```

# php - 带有 compress.zlib:// 的 PHP flock() 不起作用？

> ID：12272645
> 
> 赞同：2
> 
> 时间：2012-09-04T23:29:19.667
> 
> 标签：php

尝试使用flock 锁定流，但它不起作用。

```
$handle = fopen('/path/to/file.txt', 'r');
flock($handle, LOCK_EX); // Returns true

$handle = fopen('compress.zlib:///path/to/file.txt', 'r');
flock($handle, LOCK_EX); // Returns false 
```

为什么想法为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T23:48:39.977

因为您通常不能锁定流——虽然`compress.zlib`流确实（通常*）引用一个文件，但大多数其他类型的流（例如`http://`流）并不代表不同的文件，因此锁定它们通常没有意义.

*：一个例外是嵌套流（例如，`compress.zlib://http://example.com/`）。

# php - PHP Regex 将两个斜杠 (//) 替换为新行

> ID：12272646
> 
> 赞同：3
> 
> 时间：2012-09-04T23:29:20.867
> 
> 标签：php, regex, replace, comments

我在这里要做的是获取一个可能包含通常是代码注释的字符串，并将其替换为其他内容，尤其是将其包装在其他内容中。我很确定这个`preg_replace`功能在这里可以工作，但我不知道从哪里开始使用正则表达式。例如：

```
Hello world //this is a comment
Testing //not testing
Test again 
```

会变成

```
Hello world %//this is a comment%
Testing %//not testing%
Test again 
```

`preg_replace('???', '%$1%', $matches);`尽我所能，任何帮助都非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T23:33:05.550

```
preg_replace('~//.*$~m', '', $str); 
```

这将删除（包括）`//`到行尾的所有内容

[http://ideone.com/Xhmpd](http://ideone.com/Xhmpd)

```
preg_replace('~//.*$~m', 'foo \\0 bar', $str); 
```

这将把它们包裹`foo bar`起来

[http://ideone.com/IqkWM](http://ideone.com/IqkWM)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T23:35:48.323

尝试这个：

```
$string = "Hello world //this is a comment";
preg_replace('/\/\/.*/', '%$0%', $string); 
```

# javascript - 当 pjax 完成工作时加载脚本

> ID：12272647
> 
> 赞同：1
> 
> 时间：2012-09-04T23:29:28.683
> 
> 标签：javascript, ajax, codeigniter, pjax, script-tag

我在 MVC CodeIgniter 框架中有项目，我为每个视图都有它的 javascript，它位于该视图的末尾。

现在当 pjax 加载该页面时，它应该加载脚本，但它没有。脚本标签在那里，但它没有加载，需要以某种方式将它加载到 pjax 上？

```
<script>
    $(document).ready(function() {
        $('body').on('change', '#grad, #adresa', function() {
            adresa = getAddress();
            marker.codeAddress(adresa);
        });
        $('#form').validator({message : ''});
        .
        .
        . // more functions

    } );
</script> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-09T13:44:01.570

我有点晚了，但对于其他通过谷歌找到这个的人：

在 PJAX 请求中加载的脚本不应该在`.ready`包装器中，因为文档不会触发加载的事件。主文档保留在原处，仅替换了一个片段。

这意味着您应该在 PJAX 请求完成后再次初始化插件和东西。这有时会变得很棘手。

`pjax:success`听听这样做将是一个很棒的活动。

# binding - 剔除虚拟元素并使用没有容器元素的“with”

> ID：12272649
> 
> 赞同：1
> 
> 时间：2012-09-04T23:29:39.207
> 
> 标签：binding, knockout.js

有人可以告诉我为什么会这样：

```
<div data-bind="with: selectedItem">
    <div id="dialog" data-bind="jqDialog: {title: drugName}">
        //contents of a jquery ui modal
    </div>
</div> 
```

但是尝试对 KO 虚拟元素做同样的事情是行不通的：

```
<!-- ko with: selectedItem -->
    <div id="dialog" data-bind="jqDialog: {title: drugName}">
        //contents of a jquery ui modal
    </div>
<!-- /ko --> 
```

我收到以下错误：

```
Error: Unable to parse bindings.
Message: ReferenceError: drugName is not defined;
Bindings value: jqDialog: {title: drugName} 
```

我想摆脱只包含 data-bind 属性的 div 包装器。我认为虚拟元素会让这变得轻而易举。

**编辑**：这是页面的核心（虽然它不会在小提琴中运行），[http://jsfiddle.net/B8g5J/](http://jsfiddle.net/B8g5J/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:06:02.930

我不确定您是否已经解决了这个问题，但是您的服务器是否可能配置为删除评论？

请参阅：[Knockout.js 虚拟元素在本地工作，但不在远程工作](https://stackoverflow.com/questions/13474682/knockout-js-virtual-elements-work-locally-but-not-remotely)

# regex - 对列分隔文件使用正则表达式

> ID：12272652
> 
> 赞同：1
> 
> 时间：2012-09-04T23:30:21.610
> 
> 标签：regex

我想知道如何使用正则表达式重新格式化以下格式。我有一个包含以下样式列的文件：

```
AG2912  
3760        3913  
3293        3920

AG2102  
3209        0201  
3021        0383 
```

但我希望它采用以下格式：

```
AG2912  
3760        3913        3293        3920  

AG2102   
3209        0201        3021        0383 
```

此外，每列的行数各不相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:35:54.227

由于您没有指定任何语言，因此我将仅放置搜索和替换表达式。

搜索：`\n` 替换：`\t`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T23:46:41.470

一种使用方式`awk`：

```
awk '/^AG/ { print } /^[0-9]/ { printf "%s\t", $0 } /^$/ { printf "\n\n" } END { printf "\n" }' file.txt 
```

结果：

```
AG2912
3760        3913    3293        3920    

AG2102
3209        0201    3021        0383 
```

# javascript - jQuery 加载方法字符集

> ID：12272653
> 
> 赞同：3
> 
> 时间：2012-09-04T23:30:25.377
> 
> 标签：javascript, jquery

我在 jQuery 中使用 .load() 方法，但我意识到对我的服务器的请求应该使用 ISO-8859-1 字符集而不是 UTF-8。问题是我找不到如何设置加载方法以使用不同的编码。我读到 .ajax 方法具有“内容类型”设置来执行此操作，但是加载方法呢？当我需要从某些 div 更新数据而不刷新页面时，我发现 load 非常有用。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T23:44:32.533

Using[`ajaxSetup`](http://api.jquery.com/jQuery.ajaxSetup/)允许您为新的 ajax 调用指定设置。

> 使用任何函数的所有后续 Ajax 调用都将使用新设置，除非被单独的调用覆盖，直到下一次调用 $.ajaxSetup()。

您可以提供`beforeSend`一个回调函数来在发送之前修改 XMLHttpRequest 对象。[*jQuery 参考*](http://api.jquery.com/jQuery.ajax/)

[Mozilla](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest?redirectlocale=en-US&redirectslug=XMLHttpRequest#overrideMimeType)提供有关以下内容的文档`overrideMimeType()`：

> 覆盖服务器返回的 MIME 类型。例如，这可以用于强制将流视为 text/xml 并将其解析为文本/xml，即使服务器未将其报告为此类。此方法必须在 send() 之前调用。

[从这个答案](https://stackoverflow.com/a/330398/1063730)中借用代码你可以这样做：

```
$.ajaxSetup({
    'beforeSend' : function(xhr) {
        xhr.overrideMimeType('text/html; charset=ISO-8859-1');
    },
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-30T16:35:29.263

```
//$('body').append('<div id=qqq>dfsdfsdf</div>')
//$('#qqq').load2('/index.php?showtopic=925 #post-29397','','','text/html; charset=utf-8')
//$('#qqq').load2('/index.php?showtopic=925 #post-29397','','','text/plain; charset=windows-1251')
//

jQuery.fn.load2 = function( url, params, callback, overrideMimeTypeVar) {
    if ( typeof url !== "string" && _load ) {
        return _load.apply( this, arguments );
    }

    var selector, type, response,
        self = this,
        off = url.indexOf(" ");

    if ( off >= 0 ) {
        selector = jQuery.trim( url.slice( off ) );
        url = url.slice( 0, off );
    }

    // If it's a function
    if ( jQuery.isFunction( params ) ) {

        // We assume that it's the callback
        callback = params;
        params = undefined;

    // Otherwise, build a param string
    } else if ( params && typeof params === "object" ) {
        type = "POST";
    }

    // If we have elements to modify, make the request
    if ( self.length > 0 ) {
        jQuery.ajax({
            url: url,

            // if "type" variable is undefined, then "GET" method will be used
            type: type,
            dataType: "html",
            data: params,
            // ++++++++++++++++++++++++++++++++++++++++++++++++++
            beforeSend: function(x) {
                if(x && x.overrideMimeType && overrideMimeTypeVar!=''){
                    x.overrideMimeType(overrideMimeTypeVar);
                    }}
            // +++++++++++++++++++++++++++++++++++++++++++++++++++      
        }).done(function( responseText ) {

            // Save response for use in complete callback
            response = arguments;

            self.html( selector ?

                // If a selector was specified, locate the right elements in a dummy div
                // Exclude scripts to avoid IE 'Permission Denied' errors
                jQuery("<div>").append( jQuery.parseHTML( responseText ) ).find( selector ) :

                // Otherwise use the full result
                responseText );

        }).complete( callback && function( jqXHR, status ) {
            self.each( callback, response || [ jqXHR.responseText, status, jqXHR ] );
        });
    }

    return this;
}; 
```

# java - 只有一个自定义视图正在绘制

> ID：12272658
> 
> 赞同：0
> 
> 时间：2012-09-04T23:31:06.123
> 
> 标签：java, android

我正在尝试在屏幕上显示几个相同的自定义视图。这是我的视图类：

```
public class DraggableText extends View {
private int cStart;
private int cEnd;
private Paint mTextPaint, mBgPaint;
private RectF mRect;
private Point mPos;

public DraggableText(Context context, AttributeSet attrs) {
    super(context, attrs);
    TypedArray a = context.getTheme().obtainStyledAttributes(attrs,
            R.styleable.DraggableText, 0, 0);

    try {
        cStart = Color.parseColor(a
                .getString(R.styleable.DraggableText_gradientStart));
        cEnd = Color.parseColor(a
                .getString(R.styleable.DraggableText_gradientEnd));
    } finally {
        a.recycle();
    }
    init();
}

private void init() {
    mBgPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
    mTextPaint = new Paint(Paint.ANTI_ALIAS_FLAG);

    Shader s = new LinearGradient(0, 0, 0, getHeight(), cStart, cEnd,
            Shader.TileMode.CLAMP);
    mBgPaint.setShader(s);

    mRect = new RectF();
    mPos = new Point(0, 0);
}

public void setPos(Point p){
    mPos = p;
    invalidate();
    requestLayout();
}

public Point getPos(){
    return mPos;
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    int widthMode = MeasureSpec.getMode(widthMeasureSpec);
    int widthSize = MeasureSpec.getSize(widthMeasureSpec);
    int heightMode = MeasureSpec.getMode(heightMeasureSpec);
    int heightSize = MeasureSpec.getSize(heightMeasureSpec);

    int desiredWidth = (widthSize / 2) - 80;
    int desiredHeight = 65;

    int width;
    int height;

    if (widthMode == MeasureSpec.EXACTLY) {
        width = widthSize;
    } else if (widthMode == MeasureSpec.AT_MOST) {
        width = Math.min(desiredWidth, widthSize);
    } else {
        width = desiredWidth;
    }

    if (heightMode == MeasureSpec.EXACTLY) {
        height = heightSize;
    } else if (heightMode == MeasureSpec.AT_MOST) {
        height = Math.min(desiredHeight, heightSize);
    } else {
        height = desiredHeight;
    }

    setMeasuredDimension(width, height);
}

@Override
protected void onDraw(Canvas c) {
    super.onDraw(c);
     mRect.set(mPos.x, mPos.y, getWidth(), getHeight());
     c.drawRoundRect(mRect, 8, 8, mBgPaint);
} 
```

}

在`onCreate`回调中的活动中，我这样做：

```
 word1 = (DraggableText) findViewById(R.id.word1);
    word2 = (DraggableText) findViewById(R.id.word2);
    word3 = (DraggableText) findViewById(R.id.word3);
    word4 = (DraggableText) findViewById(R.id.word4);

    word1.post(new Runnable() {
        @Override
        public void run() {
            word1.setPos(new Point(20, 20));
            word2.setPos(new Point(word1.getWidth() + 20, 20));
            word3.setPos(new Point(20, word1.getHeight() + 10));
            word4.setPos(new Point(word1.getWidth() + 20, word1.getHeight() + 10));
        }
    }); 
```

我发布此可运行文件以访问`getWidth`和`getHeight`查看视图。这不是重点。如果我删除此代码并仅使用`setPos`任何值，我总是会得到相同的值。屏幕上只有一个视图（或全部，但在模型之上）。

导致仅绘制一个视图的错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:46:56.703

问题是您的视图在您的 post() 可运行文件执行时实际上还没有完成膨胀和初始布局。您想与 ViewTreeObserver 进行交互。在 Activity 的 onResume 中，试试这个：

```
@Override
public void onResume(){
    super.onResume();
    findViewById(R.id.word1).getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
                @Override public void onGlobalLayout() {
                        DraggableText word1 = (DraggableText) findViewById(R.id.word1);
                        DraggableText word2 = (DraggableText) findViewById(R.id.word2);
                        DraggableText word3 = (DraggableText) findViewById(R.id.word3);
                        DraggableText word4 = (DraggableText) findViewById(R.id.word4);
                        word1.setPos(new Point(20, 20));
                        word2.setPos(new Point(word1.getWidth() + 20, 20));
                        word3.setPos(new Point(20, word1.getHeight() + 10));
                        word4.setPos(new Point(word1.getWidth() + 20, word1.getHeight() + 10));
                        word1.getViewTreeObserver().removeGlobalOnLayoutListener(this);
                    }
                }
            });
} 
```

[这是有关ViewTreeObserver](http://developer.android.com/reference/android/view/ViewTreeObserver.html)的更多信息。

跟进：啊，我的错。我猜我没有仔细阅读你的代码。我实际上不确定是否有一种方便的 100% 框架方式来执行您的要求。requestLayout() 仅将视图的下一个布局排队，它不会强制同步。你可以尝试两件事：

1 - 创建两个不同的可运行文件：第一个将位置更改发布到 word1。第二张贴剩余的位置变化。

2 - 不依赖于框架的 getWidth\getHeight，而是在自定义视图中跟踪您自己的成员变量中的位置和尺寸。这样，您可以在调用 setPos() 时手动更新它们。

此外，您可以考虑完全使用不同的布局机制。与其深入细节，不如尝试使用 RelativeLayout 容器。然后，例如，您可以只更改 word1 的页边距，其他单词会相应地跟随。

# javascript - 谷歌浏览器扩展可以检测到所有脚本何时完成加载吗？

> ID：12272659
> 
> 赞同：1
> 
> 时间：2012-09-04T23:31:08.573
> 
> 标签：javascript, google-chrome, javascript-events, google-chrome-extension

我想开发一个 chrome 扩展，从页面上刮下数据。但这只有在所有页面 ajax 完成加载其远程内容后才会发生。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:57:51.867

通常，您无法检测到所有脚本何时完成加载。页面在“onload”事件后等待几秒钟以请求另一轮脚本是相当常见的 - 例如，如果您想延迟加载广告但不想减慢初始页面呈现.

但是，扩展确实有一个在“document_idle”运行的标志。据说这个标志让 Chrome 在注入扩展脚本之前等到页面“空闲”。但是，它不会等待延迟加载的脚本，甚至可能不会等待缓慢的 XHR。

更多信息可以在[http://developer.chrome.com/extensions/content_scripts.html找到](http://developer.chrome.com/extensions/content_scripts.html)

# php - MAMP 2.1.1 (Mac OS X lion) 上的 pcntl 安装问题

> ID：12272661
> 
> 赞同：1
> 
> 时间：2012-09-04T23:31:41.917
> 
> 标签：php, macos, mamp, php-extension, pcntl

我在安装 pcntl 时遇到问题。我的 PHP 版本是 5.4.4，我遵循了本教程： [http ://cyberpunx.com/2011/11/pcntl-so-on-osx-lion-and-mamp/](http://cyberpunx.com/2011/11/pcntl-so-on-osx-lion-and-mamp/)

但是 Pcntl 不加载。在 php 错误日志中，我看到：

> [04-Sep-2012 22:58:16 UTC] PHP 警告：PHP 启动：pcntl：无法初始化模块 使用模块 API=20090626 编译的模块 使用模块 API=20100525
> 编译的 PHP 这些选项需要匹配

如何正确编译 pcntl？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:13:32.077

最可能的情况是升级后您忘记更新您`php.ini`的`extension_dir`.

如果您已按照本教程进行操作，那么您`extension_dir`应该是：

```
/usr/local/lib/php/extensions/no-debug-non-zts-20100525 
```

另外，不要忘记在`php.ini`更改后重新启动 Apache。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T13:41:18.943

最后，我的解决方案完全不同。我删除了 MAMP 并激活了 OSX 内置 apache 并安装了 MySQL。

本教程对我帮助很大： [https ://apple.stackexchange.com/questions/23751/how-to-turn-mac-os-x-lion-into-a-web-server](https://apple.stackexchange.com/questions/23751/how-to-turn-mac-os-x-lion-into-a-web-server)

然后我跟着这个： [http ://cyberpunx.com/2011/11/pcntl-so-on-osx-lion-and-mamp/](http://cyberpunx.com/2011/11/pcntl-so-on-osx-lion-and-mamp/)

...终于让 pcntl 工作了！

//编辑：

另一个非常简单的解决方案是为 mac 下载预编译的 PHP：http: [//php-osx.liip.ch/](http://php-osx.liip.ch/)

# c++ - 使用 boost:asio 和选择？阻塞 TCP 输入或文件更新

> ID：12272666
> 
> 赞同：6
> 
> 时间：2012-09-04T23:32:17.407
> 
> 标签：c++, boost, boost-asio

我本来打算在我的程序中有一个线程，它将等待两个文件描述符，一个用于套接字，另一个用于描述文件系统的 FD（特别是等待查看是否将新文件添加到目录中）。由于我希望很少看到添加的新文件或传入的新 TCP 消息，因此我希望有一个线程等待任一输入并在发生时处理检测到的任何输入，而不是打扰单独的线程。

然后，我（终于！）获得了“老板”的许可，可以使用 boost。所以现在我想用 boost:asio 替换基本的套接字。只有我遇到了一个小问题。似乎 asio 隐含了它自己的 select 版本，而不是提供我可以直接与 select 一起使用的 FD。这让我不确定如何在新文件和 TCP 输入这两种情况下阻塞，同时一个只适用于 select 而另一个似乎不支持使用 select。有一个简单的解决方法来解决我想念的问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T03:45:13.387

ASIO 最好异步使用（这就是它的含义）：您可以为 TCP 读取和文件描述符活动设置处理程序，并且将为您调用处理程序。

这是一个让您入门的演示示例（为支持 inotify 的 Linux 编写）：

```
#include <iostream>
#include <boost/asio.hpp>
#include <boost/bind.hpp>
#include <sys/inotify.h>

namespace asio = boost::asio;
void start_notify_handler();
void start_accept_handler();

// this stuff goes into your class, only global for the simplistic demo
asio::streambuf buf(1024);
asio::io_service io_svc;
asio::posix::stream_descriptor stream_desc(io_svc);
asio::ip::tcp::socket sock(io_svc);
asio::ip::tcp::endpoint end(asio::ip::tcp::v4(), 1234);
asio::ip::tcp::acceptor acceptor(io_svc, end);

// this gets called on file system activity
void notify_handler(const boost::system::error_code&,
                    std::size_t transferred)
{
    size_t processed = 0;
    while(transferred - processed >= sizeof(inotify_event))
    {
        const char* cdata = processed
                            + asio::buffer_cast<const char*>(buf.data());
        const inotify_event* ievent =
                                 reinterpret_cast<const inotify_event*>(cdata);
        processed += sizeof(inotify_event) + ievent->len;
        if(ievent->len > 0 && ievent->mask & IN_OPEN)
            std::cout << "Someone opened " << ievent->name << '\n';
    }
    start_notify_handler();
}

// this gets called when nsomeone connects to you on TCP port 1234
void accept_handler(const boost::system::error_code&)
{
    std::cout << "Someone connected from " 
              << sock.remote_endpoint().address() << '\n';
    sock.close(); // dropping connection: this is just a demo
    start_accept_handler();
}

void start_notify_handler()
{
    stream_desc.async_read_some( buf.prepare(buf.max_size()),
        boost::bind(&notify_handler, asio::placeholders::error,
                    asio::placeholders::bytes_transferred));
}

void start_accept_handler()
{
    acceptor.async_accept(sock,
        boost::bind(&accept_handler, asio::placeholders::error));
}

int main()
{
    int raw_fd = inotify_init(); // error handling ignored
    stream_desc.assign(raw_fd);
    inotify_add_watch(raw_fd, ".", IN_OPEN);
    start_notify_handler();
    start_accept_handler();
    io_svc.run();
} 
```

# c - 字符数组内存分配

> ID：12272672
> 
> 赞同：1
> 
> 时间：2012-09-04T23:33:15.947
> 
> 标签：c

我想知道`memcpy()`相对于内存分配的结果。

```
#include<stdio.h>
#include<string.h>

typedef struct {
  char myname[7] ; 
} transrules;

trans typedef struct {
  char ip ;
  int udp;
  transrules rules[256];
} __attribute__ ((__packed__)) myudp;

myudp __attribute__ ((__packed__)) udpdata ;

char arr[400] ;

int main() {            
  memset (&udpdata , 0 ,sizeof(udpdata));
  udpdata.ip = 'a' ;
  udpdata.udp = 13 ;
  udpdata.rules[0].myname = "lalla\0" ;
  memcpy (&arr , &udpdata, sizeof(udpdata));
  printf("%c",arr[0]);
  return 0;
} 
```

关于代码，我们如何打印出结构体中的字符数组`transrules`？

PS：是的，这段代码会引发错误，哎呀`char`！

由于定义的数组是类型`char`，为什么 arr [1] 仍然接受整数值`memcpy()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T00:07:09.290

`memcpy`不分配任何内存。在您的`memcpy`调用中，目标的内存是在定义`arr`变量时分配的`arr`( `char arr[400]`)。

那里有一个问题，就是你没有分配足够的空间。`sizeof(updata)`您将字节复制到`arr`中，这可能是 1+4+7*256=1797 （这可能会有所不同，具体取决于`sizeof(int)`是否`__packed__`实际忽略了平台上所有未使用的字节）。如果你真的需要`arr`（你可能不需要），至少让它变`sizeof(updata)`大。定义它`char arr[sizeof(updata)]`很好。

如果结构的布局是由某种外部格式定义的，则应该使用固定大小的类型而不是`int`（取决于平台，它是 2 或 4 个字节，并且可能是其他大小，但您不太可能遇到它们）。

如果结构的布局是由某种外部二进制格式定义的，并且您想以这种格式打印出 1797 个字节，请使用`fwrite`.

```
fwrite(updata, sizeof(updata), 1, stdout); 
```

如果您想对数据进行人工表示，请使用`printf`适当的格式规范。

```
printf("ip='%c' udp=%d\n", updata.ip, updata.ip);
for (i = 0; i < sizeof(updata.rules)/sizeof(updata.rules[0]); i++) {
    puts(updata.rules[i].myname);
} 
```

尽管有名字，`char`实际上是字节的类型。C 中的字符没有单独的类型。类似的字符常量`'a'`实际上是一个整数值（在几乎所有系统上都是 97，根据[ASCII](http://en.wikipedia.org/wiki/ASCII)）。`putchar`就像用或`printf("%c", …)`将字节解释为字符一样编写它。

另一方面，如果在将*指针*（例如）与整数混合时编译器没有发出错误信号，请调高警告级别。`char*`使用 Gcc，至少使用`gcc -O -Wall`.

* * *

在实际编译您的代码后，我看到了主要错误（您应该在您的问题中复制粘贴了来自编译器的错误消息）：

```
udpdata.rules[0].myname = "lalla\0" ; 
```

`udpdata.rules[0].myname`是一个字节数组。您不能分配给 C 中的数组。您需要一个一个地复制元素。由于这是一个 的数组`char`，并且您想将一个字符串复制到其中，您可以使用它`strcpy`来复制字符串的所有字节。一般来说，对于一堆字节，你会使用`memcpy`.

```
strcpy(udpdata.rules[0].myname, "lalla"); 
```

（请注意，这`"lalla\0"`等效于`"lalla"`，所有字符串文字在 C 中都以零结尾。¹）由于`strcpy`不执行任何大小验证，因此您必须确保字符串（包括其最终的空字符）适合您分配的内存为目标。您可以使用其他功能，例如，`strncat`如果`strlcpy`您想指定最大尺寸。

¹[有一个例外（只有这个例外）`"lalla"`不会以零结尾：当初始化一个 5 字节的数组时，例如`char bytes[5] = "lalla"`. 如果数组大小至少为 6 或未指定，则将有一个终止零字节。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T23:56:07.290

```
// 这真的很糟糕
udpdata.rules[0].myname = "lalla\0" ;

// 改为这样做。您希望在您的字段中使用文字字符串。
memcpy(udpdata.rules[0].myname, "lalla\0", 6);

……

// 这是错误的。arr 已经是一个指针。
memcpy (&arr , &udpdata, sizeof(udpdata));

// 改为这样做
mempcy (arr, &udpdata, sizeof(udpdate));

```

关于打印，我不知道你的机器上有多大的整数，但如果它们是 4 个字节，那么

`printf("%.7s", &arr[1+4]);`

如果要打印内容，我不确定为什么要将所有内容都转换为 char 数组。只需使用结构和**for**循环。无论如何，我认为您可能想阅读 C 数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T00:08:02.283

*关于代码，我们如何打印出结构体transrules中的字符数组？*

```
/* incorrect -> udpdata.rules[0].myname = "lalla\0" ; */
strcpy(udpdata.rules[0].myname,"lalla") ;
printf("%s\n",udpdata.rules[0].myname); 
```

*由于定义的数组是 char 类型，为什么 arr [1] 仍然接受 memcpy 的整数值？*

memcpy 不知道也不关心它复制到的底层数据类型可能是什么。它采用 void 指针并将一个或多个字节中的值复制到一个或多个其他字节：

```
void * memcpy ( void * destination, const void * source, size_t num ); 
```

# java - IndexOutOfBounds 带摆动 gui 的跟踪鼠标

> ID：12272674
> 
> 赞同：0
> 
> 时间：2012-09-04T23:33:41.457
> 
> 标签：java, swing, listener, mouse-listeners

我不明白为什么我编写的这个简单程序在鼠标离开跟踪区域（白色 JPanel）时尝试更新鼠标坐标时会出现 IndexOutOfBounds 异常。我认为第 38 行的检查会处理它。有什么建议么？谢谢！

```
import java.awt.*;

import javax.swing.JFrame;

public class MainFrame extends JFrame {

    private static final long serialVersionUID = 1L;

    Label coorLabel;
    Panel coorPanel, content;

    public MainFrame(String s){

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Container cont = getContentPane();

        coorLabel = new Label("Mouse Coordinates: ");

        coorPanel = new Panel();
        coorPanel.setPreferredSize(new Dimension(400,400));
        coorPanel.setBackground(Color.WHITE);
        /**
        content = new Panel();
        content.add(coorPanel, BorderLayout.PAGE_START);
        content.add(coorLabel, BorderLayout.PAGE_END);
        **/

        cont.add(coorPanel, BorderLayout.PAGE_START);
        cont.add(coorLabel, BorderLayout.PAGE_END);

        pack();
        setVisible(true);

    }

    public void updateCoor(){

        if(coorPanel.getMousePosition()!=null){
            coorLabel.setText("Mouse Coordinates: "+getMousePosition().x+", "+getMousePosition().y);
            coorLabel.repaint();
        }

    }

    public static void main(String[]args){

        MainFrame frame = new MainFrame("Coor App");
        while(true){
            frame.updateCoor();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T23:55:30.020

看一下[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)教程。您完全使用循环占用*初始* 线程并在*Event Dispatch Thread*`while(true)`之外更新用户界面。

 *请参阅[事件侦听器简介以](http://docs.oracle.com/javase/tutorial/uiswing/events/intro.html)熟悉 Swing 事件模型和[如何编写鼠标运动侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/mousemotionlistener.html)，特别是鼠标运动侦听器示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T23:45:15.013

您检查是否`coorPanel.getMousePosition()`不为空，然后引用 (this.) `getMouseLocation()`；尝试将其更改为仅在支票中说 getMousePosition，并添加打印：

```
if( this.getMousePosition() != null ){
    System.out.println(getMousePosition());
    coorLabel.setText("Mouse Coordinates: "+getMousePosition().x+", "+getMousePosition().y);
    coorLabel.repaint();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T23:54:46.573

这是你应该做的：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionListener;
import javax.swing.*;

public class Stack extends JFrame implements MouseMotionListener{
    int x;
    int y;
    JPanel p = new JPanel();
    JPanel detectPanel = new JPanel();
    JTextField t = new JTextField(10);
    JLabel l = new JLabel("Position's inside of bordered panel: ");
    public Stack(){
        setLayout(new BorderLayout());
        t.setEditable(false);
        p.add(l);
        p.add(t);
        detectPanel.setBorder(BorderFactory.createLineBorder(Color.BLACK));
        add(p,BorderLayout.NORTH);
        add(detectPanel,BorderLayout.CENTER);
        detectPanel.addMouseMotionListener(this);

    }

    public static void main(String[] a){
        SwingUtilities.invokeLater(new Runnable(){
            public void run(){
                Stack s = new Stack();
                s.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                s.setLocationByPlatform(true);
                s.setPreferredSize(new Dimension(640,480));
                s.pack();
                s.setVisible(true);
            }
        });
    }

    public void mouseDragged(MouseEvent e) {

    }

    public void mouseMoved(MouseEvent e) {
        x= e.getX();
        y= e.getY();
        t.setText(x+", "+y);
    }
} 
```*

# linux - 使用 MS Sync Framework 将 SQL Server 2012 同步到 Postgres 9

> ID：12272676
> 
> 赞同：0
> 
> 时间：2012-09-04T23:34:02.653
> 
> 标签：linux, postgresql, sql-server-2012, microsoft-sync-framework

这里有没有人成功使用[Microsoft Sync Framework](http://msdn.microsoft.com/en-us/sync/bb736753.aspx)（请参阅[文档](http://msdn.microsoft.com/en-us/sync/bb821992.aspx)）在 MS SQL Server 2012 和 PostgreSQL 9.x 之间进行同步？

当 postgreSQL 服务器驻留在 Linux 环境中时，它可以工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:55:25.147

没有开箱即用的 PostgreSQL 同步提供程序，因此您必须自己编写。

在此处查看示例 Oracle 同步提供程序：数据库同步：[Oracle 和 SQL Compact 2-Tier](http://social.msdn.microsoft.com/Database-Sync-Oracle-and-037fb083)

PostgreSQL 是否在 Linux 中并不重要，因为您只是连接到它。您不必为 Linux 端的同步安装任何东西。

# mongodb - mongodb 将数据转储到另一个目录

> ID：12272677
> 
> 赞同：0
> 
> 时间：2012-09-04T23:34:24.950
> 
> 标签：mongodb

我知道我可以用这个常见的转储数据

```
mongodump --db mydb 
```

此命令会将所有 mydb 集合数据转储到 ./dump/mydb。但我想将数据转储到我命名的另一个目录（比如 /home/user/mydb）

我尝试过使用 --dbpath 和 --directoryperdb 选项，但这似乎不是我想要的

有没有办法做到这一点？

./mongodump --help

将 MongoDB 数据导出到 BSON 文件。

选项：

```
 --help                   produce help message
  -v [ --verbose ]         be more verbose (include multiple times for more
                           verbosity e.g. -vvvvv)
  --version                print the program's version and exit
  -h [ --host ] arg        mongo host to connect to ( <set name>/s1,s2 for
                           sets)
  --port arg               server port. Can also use --host hostname:port
  --ipv6                   enable IPv6 support (disabled by default)
  -u [ --username ] arg    username
  -p [ --password ] arg    password
  --dbpath arg             directly access mongod database files in the given
                           path, instead of connecting to a mongod  server -
                           needs to lock the data directory, so cannot be used
                           if a mongod is currently accessing the same path
  --directoryperdb         if dbpath specified, each db is in a separate
                           directory
  --journal                enable journaling
  -d [ --db ] arg          database to use
  -c [ --collection ] arg  collection to use (some commands)
  -o [ --out ] arg (=dump) output directory or "-" for stdout
  -q [ --query ] arg       json query
  --oplog                  Use oplog for point-in-time snapshotting
  --repair                 try to recover a crashed database
  --forceTableScan         force a table scan (do not use $snapshot) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T23:53:55.610

你想要 -o 选项：

```
 -o [ --out ] arg (=dump) output directory or "-" for stdout 
```

这将让您指定输出的去向。

# java - 将日期/时间添加到 JFreeChart 图表

> ID：12272679
> 
> 赞同：3
> 
> 时间：2012-09-04T23:34:44.103
> 
> 标签：java, jfreechart

我目前有一种方法可以查询数据库中的值，并将它们绘制成图表。唯一的问题是，`time`变量很长，导致我的图表如下所示：

![图形](../Images/cf5f35011245af30a269ce72e02556e5.png)

我想将其转换为日期格式，然后将其添加到图表中。

我怎样才能做到这一点？

这是我的图形代码：

```
private Long time;
private Long intensity;
public XYSeries series = new XYSeries("Sensor");
private XYDataset xyDataset;
public JFreeChart chart;

xyDataset = new XYSeriesCollection(series);
chart = ChartFactory.createXYLineChart("Sensor Data", "Time", "Intensity", xyDataset, PlotOrientation.VERTICAL, true, true, false); 
```

这是我添加到图表的方法：

```
public void GetDustLevels() {
    series.clear();
    try {
        currentSensor = Application.getInstance().getMinesite().getSensors().get(sensorID);
    } catch (Exception e1) {
        e1.printStackTrace();
    }

    if (currentSensor != null) {
        sensorKDTree = currentSensor.getSensorData();
        Iterator<Map.Entry<GenericPoint<Long>, String>> allPoints = sensorKDTree.iterator(sensorKDTree.getMin(null), sensorKDTree.getMax(null));

        while (allPoints.hasNext()) {
            GenericPoint<Long> timeIntensityPair = allPoints.next().getKey();
            time = timeIntensityPair.getCoord(0);
            intensity = timeIntensityPair.getCoord(1);
            System.out.println("CURRENT SENSOR" + currentSensor);
            System.out.println("TIME: " + time + " " + "INTENSITY: " + intensity);
            series.add(time, intensity);
        }

    }

} 
```

任何帮助将不胜感激！谢谢！

编辑：我已将代码更改为：

```
public TimeSeries series = new TimeSeries("Sensor", Date.class);
public JFreeChart chart;
private Long time;
private Long intensity;

TimeSeriesCollection xyDataset = new TimeSeriesCollection(series);
chart = ChartFactory.createTimeSeriesChart("Sensor Data", "Time", "Intensity", xyDataset, true, true, false); 
```

还有我的新 GetDustLevels() 方法：

```
 public void GetDustLevels() {
    series.clear();
    try {
        currentSensor = Application.getInstance().getMinesite().getSensors().get(sensorID);
    } catch (Exception e1) {
        e1.printStackTrace();
    }

    if (currentSensor != null) {
        sensorKDTree = currentSensor.getSensorData();
        Iterator<Map.Entry<GenericPoint<Long>, String>> allPoints = sensorKDTree.iterator(sensorKDTree.getMin(null), sensorKDTree.getMax(null));

        while (allPoints.hasNext()) {
            GenericPoint<Long> timeIntensityPair = allPoints.next().getKey();
            time = timeIntensityPair.getCoord(0);
            intensity = timeIntensityPair.getCoord(1);
            System.out.println("CURRENT SENSOR" + currentSensor);
            System.out.println("TIME: " + time + " " + "INTENSITY: " + intensity);
            XYPlot plot = (XYPlot) chart.getPlot();
            DateAxis axis = (DateAxis) plot.getDomainAxis();
            axis.setDateFormatOverride(new SimpleDateFormat("dd-MMM-yyyy"));
            series.add(new Date(time.longValue()), intensity);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T00:40:32.887

如果没有[sscce](http://sscce.org/)或所需的格式，我只是在猜测。

```
XYPlot plot = (XYPlot) chart.getPlot();
DateAxis axis = (DateAxis) plot.getDomainAxis();
axis.setDateFormatOverride(new SimpleDateFormat("dd-MMM-yyyy")); 
```

附录：仔细观察，您正在使用`ChartFactory.createXYLineChart()`，它为域创建了一个`NumberAxis`。而是使用`ChartFactory.createTimeSeriesChart()`，它为域创建一个`DateAxis`。

附录：如果`time`代表与 Java 相同纪元的毫秒[`Date`](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#Date%28long%29)数，您可以使用它`new Date(time.longValue())`来构建数据集的`RegularTimePeriod`. [这里](https://stackoverflow.com/a/5522583/230513)有一个相关的例子。

# jquery - jQuery Bootstrap - 在从输入中删除事件后更新预输入

> ID：12272680
> 
> 赞同：3
> 
> 时间：2012-09-04T23:34:58.253
> 
> 标签：jquery, twitter-bootstrap, typeahead, jquery-events

我有一个现有的事件重页，我正在尝试添加预先输入支持。typeahead 功能按需要工作，只是它似乎只能附加到输入项一次。

问题在于，为简单起见，在某些操作之后，现有页面会删除所有附加到特定输入的事件 `$('input').off()`，然后根据新上下文重新附加新的事件处理程序。

这会导致一个问题，即重新附加的 typeahead 函数似乎永远不会触发。（这里讨论了一个类似但不同的问题：[Trouble updated Bootstrap's typeahead data-source with post response](https://stackoverflow.com/questions/9477095/trouble-updating-bootstraps-typeahead-data-source-with-post-response)但这在这里不相关，因为我可以很好地更新源 - 我无论如何都无法触发 type-ahead我尝试什么）

***编辑****：为了澄清 - 更改源（如链接的问题）**不是**问题 - 实际页面上的源是向服务器发出请求的 js 函数。问题是调用`.off()`似乎会永久中断预先输入，并且我无法删除调用`.off()`而不必重写大部分页面......下面的代码和 jsfiddle 只是我可以设计的最短的代码来演示这个问题*

这里有一个有效的 jsfiddle 记录问题：http: [//jsfiddle.net/hz5P3/8/](http://jsfiddle.net/hz5P3/8/)

为了将来参考，完整的代码如下。简要记录一下：`input.works`text_field 只有一个 typeahead 声明并且工作正常。`input.no_works`调用了 typeahead 函数，然后调用`$('.no_works').off()`以删除此输入上的所有事件。重新附加到此功能的 typeahead 根本无法正常工作。

有什么方法可以使第二次提前输入的调用按预期工作？

谢谢

**html**

```
<div class="container">
    <div class="hero-unit">
        <h1>Bootstrap jsFiddle Skeleton</h1>

         <p>this is a test typeahead that will work</p>         
        <input type="text" class="works" style="margin: 0 auto;">

        <p>this is a test typeahead that is updated and will not work</p>
        <input type="text" class="no_works" style="margin: 0 auto;">
    </div>
</diV>​ 
```

**Javascript**

```
$('.no_works').typeahead({
  source: ["cat", "dog", "mouse"]
});
$('.no_works').off();

$('.no_works').typeahead({
  source: ["cat", "dog", "mouse"]
});

$('.works').typeahead({
  source: ["cat", "dog", "mouse"]
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T00:00:35.300

**编辑：**好的，我现在明白了。

因此，您需要从该元素的 jQuery 对象中清除“typeahead”数据。这可能不是 100% 正确的方法，但它很容易并且有效：

[http://jsfiddle.net/feXM3/](http://jsfiddle.net/feXM3/)

```
$('.no_works').typeahead({
  source: ["cat", "dog", "mouse"]
});

$('.no_works').off();

//amir75 added a line here:
$('.no_works').data('typeahead', (data = null))

$('.no_works').typeahead({
  source: ["frog", "cow", "horse"]
}); 
```

* * *

**我最初的回答：** 我不认为“关闭”方法会像您期望的那样删除旧的提前输入功能。

你可以这样做：

```
//1\. store the typeahead object in a variable
var tah= $('.no_works').typeahead({
  source: ["cat", "dog", "mouse"]
});

//2\. update the data source
tah.data('typeahead').source = ["frog", "cow", "horse"]; 
```

更新了 jsfiddle：http: [//jsfiddle.net/Skp5R/](http://jsfiddle.net/Skp5R/)

# ruby - Rails_admin 过滤关联问题

> ID：12272681
> 
> 赞同：2
> 
> 时间：2012-09-04T23:35:13.357
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.1, rubygems, rails-admin

我在弄清楚如何在 Rails_Admin 界面中的模型列表视图中搜索关联时遇到问题。

背景资料：

*   模型：帖子、用户、中心和组织。
*   目标：用户使用通过集线器设备将 http 请求发布到数据库的设备进行发布。该数据库显示用户的帖子。帖子属于用户，用户通过属于集线器的设备发送帖子，集线器属于组织。
*   我想要完成的事情：在 rails admin 中，我想要一个 Post 模型的自定义字段来显示发布帖子的用户所属的组织。
*   当前问题：我可以使用 Post 模型的组织方法将 Post 的用户组织显示为字段中的字符串，但我无法在 Rails_admin 中创建可以使其可搜索的过滤器。在 Rails_Admin 中，将行添加`searchable :organization`到`config.model Post do...field :organization do{}end...end`不起作用。

我真的很感激关于这个问题的任何建议。谢谢！

岗位型号：

```
class Post < ActiveRecord::Base

  belongs_to :user
  belongs_to :hub

  attr_accessible :hub_id, :user_id

  before_validation :set_count

  validates :hub_id, :presence => true
  validates :user_id, :presence => true
  validates :count, :presence => true, :numericality => {:greater_than_or_equal_to => 0}

  before_create :update_redis

  def organization
    self.hub.organization.name
  end

  def user_email
    self.user.email
  end

  private

  def user_email
    self.user.email
  end

end 
```

用户型号：

```
class User < ActiveRecord::Base

  belongs_to :organization
  has_many :posts, :extend => User::Posts

  accepts_nested_attributes_for :organization

  attr_accessible :email, :password, :password_confirmation, :remember_me, :as => [:default, :admin]
  attr_accessible :device_id, :organization_id, :role_ids, :as => :admin
  attr_accessible :organization_attributes, :as => [:admin, :manager]

  after_save :update_total

end 
```

集线器型号：

```
class Hub < ActiveRecord::Base

  devise :token_authenticatable, :trackable

  belongs_to :organization, :inverse_of => :hubs
  has_many :posts

  attr_accessible :location, :organization_id, :as => :admin

  validates :organization, :presence => true
  validates :location, :presence => true

  before_save :ensure_authentication_token

end 
```

组织模式：

```
class Organization < ActiveRecord::Base

  attr_accessible :name, :street_address_1, :street_address_2, :city, :state, :zip_code, :goal_per_hour, :as => [:admin, :manager
  ]
  has_many :hubs
  has_many :posts, :through => :hubs, :extend => Organization::Posts
  has_many :users

  validates :name, :presence => true, :uniqueness => true

end 
```

rails_admin.rb 初始化器：

```
config.model Post do
  list do
    filters [:user, :hub]
    items_per_page 200
    field :id do
      column_width 50
    end
    field :count do
      column_width 35
    end
    field :user do
      column_width 50
    end
    field :user_email
    field :hub do
      column_width 50
    end
    field :organization do
      label "Organization"
      # searchable :organization # This line doesn't work!!
    end
    field :created_at do
      strftime_format "%m/%d/%y %H:%M"
      column_width 90
    end
    #field :updated_at do
    #  strftime_format "%m/%d/%y %H:%M"
    #  column_width 90
    #end
  end
  show do
    include_all_fields
    field :user_email
    field :organization_name, :string do
      label "Organization"
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T19:39:57.347

看起来记录在案的答案确实有效 - 你的行

```
searchable :organization 
```

应该

```
searchable :name 
```

这将为组织（在“添加过滤器”菜单下）添加一个搜索名称字段的选项，但它不会将该字段的搜索添加到快速“过滤器”输入中。

# backbone.js - 如何从模块外部的选择框中从requirejs模块中的主干集合中重新获取数据？

> ID：12272682
> 
> 赞同：0
> 
> 时间：2012-09-04T23:35:13.230
> 
> 标签：backbone.js, requirejs

我最近构建了一个 requirejs/backbonejs 模块，它在我的页面上构建了一个表格。该集合获取数据并以 JSON 格式返回，我正在对其进行解析和渲染。到目前为止它工作正常，并且表格在页面上呈现精美。

我用来获取数据的 API 要求我在一个时间范围内传递。所以对于表格的第一次绘制，我传入一个 MS 值来获取最近 30 天的数据。

我在页面顶部还有一个过滤器部分，允许我选择要获取多少天的数据，1 周或 1 个月。

我如何让这个过滤器重新加载集合而不重绘整个页面？还是我只是错误地实施骨干/要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T00:20:47.647

砰。您的最后评论完全正确。

您甚至不需要使用此设置设置事件触发器。当您获取集合时，Backbone 会自动为您触发重置事件。

假设您有整个页面的 parentView。在该父视图中的某处是触发`fetch()`事件的下拉过滤器。您获取适当的数据（1 周或 1 个月）并重置您的集合。

您的子视图（子视图）有一个事件侦听器正在侦听您的集合重置：

```
// Inside child view
// (the view that houses all the individual model views of the collection)

this.collection.on('reset', this.render, this); 
```

当它听到你重置你的收藏时，它只是重新渲染自己。

注意：一旦您开始创建子视图和子视图的子视图，请不要忘记在删除父视图时正确清理这些子视图（这意味着确保它们已从 DOM 中删除并与它们的任何事件侦听器分离）重新绑定。）否则你会得到讨厌的僵尸视图，它们会消耗资源并导致奇怪的混乱。这是一个流行的反复出现的问题。;-)

# php - mysql中的昨天和今天日期

> ID：12272683
> 
> 赞同：0
> 
> 时间：2012-09-04T23:35:15.810
> 
> 标签：php, mysql, time

我数据库中的日期列采用以下格式：`date('Y-M-j H:i:s');`. 我正在尝试运行一个查询来完成今天的所有事务，另一个查询昨天完成的所有事务。请帮助最好的方法来做到这一点。

我尝试了以下但它不起作用

```
 $yesterday = date("Y-M-j 00:00:01", strtotime("-1 day"));
$yesterday2 = date("Y-M-j 23:59:59", strtotime("-1 day"));

$query_syesterday = "SELECT sum(amount), sum(amtnaira) FROM transactions WHERE transtype = 'buy' AND batch !='' AND date BETWEEN '$yesterday' AND '$yesterday2'";
$syesterday = mysql_query($query_syesterday, $egold1) or die(mysql_error());
$row_syesterday = mysql_fetch_assoc($syesterday);
$totalRows_syesterday = mysql_num_rows($syesterday); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T00:28:43.953

这应该这样做：

```
$query_last_two_days = "SELECT sum(amount), sum(amtnaira) 
   FROM transactions 
      WHERE transtype = 'buy' 
        AND batch !='' 
        AND date < DATE_SUB(NOW(), INTERVAL 2 DAY)"; 
```

您可以像这样轻松获得最后两天。您可以更改`NOW()`为您选择的日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T23:40:51.900

您使用了错误的日期格式。改用这个：

```
$yesterday = date("Y-m-d", strtotime("-1 day")); 
```

此外，只需比较日期，而不是时间：

```
SELECT SUM(amount), 
       SUM(amtnaira) 
FROM   transactions 
WHERE  transtype = 'buy' 
       AND batch != '' 
       AND DATE(date) = $yesterday 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T23:39:01.520

尝试这个：

```
$yesterday= date("Y-m-d", time()-86400)." 00:00:00";
$yesterday2= date("Y-m-d", time()-86400)." 23:59:59"; 
```

# jquery - jquery 验证器不接受我的姓名字段的任何输入。为什么？

> ID：12272685
> 
> 赞同：0
> 
> 时间：2012-09-04T23:35:43.393
> 
> 标签：jquery, regex, validation

请参阅下面的代码... jquery 验证器似乎拒绝在名称字段中输入的任何输入。它要求匹配指定的格式。有没有默认格式之类的？我难住了！！！

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#signupform").validator();
    });
</script>

<body>

<form id="signupform">
    <fieldset>

    <p><input type="text" name="name" value="Name*" minlength="1" maxlength="40" pattern="[A-Za-z]" required /></p>
    <p><input type="email" name="email" value="Email*" required /></p>
    <button type="submit">Submit</button>
    <button type="reset">Reset</button>
    </fieldset>
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:40:37.353

该模式`[A-Za-z]`匹配***单个***字符，因此如果您键入多个字符，您将收到验证错误。改用`[A-Za-z]+`，表示范围内的*一个或多个*字符`A-Z`或`a-z`。

`Name*`此外，由于星号，此模式与初始值不匹配。

# html - 为什么我的 CSS3 box-sizing 中的最后一个元素太宽了？

> ID：12272688
> 
> 赞同：1
> 
> 时间：2012-09-04T23:35:57.613
> 
> 标签：html, css

[活生生的例子](http://codepen.io/cereallarceny/pen/eHEmJ)

所以我正在使用[Chris Coyier 的 CSS3 box-sizing grid setup](http://css-tricks.com/dont-overthink-it-grids/)。而且我的网格设置得很完美。在每个模块内部，我都有一个`div`将背景设置为 CSS3 RGBA 线性渐变。一切都很好，显示也很好，但是由于我使用`padding`的是 ，最后一个元素的背景占用了模块的宽度**加上** `padding`. 如果您查看可能进一步解释它的示例，最后一个模块是有问题的模块。我试图将最后一个元素重置为`padding-right: 30px`形成正确宽度的元素，但它并没有在容器宽度上 100% 隔开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T23:48:34.857

*请注意，此答案有多个编辑以反映问题和需求的演变*

你告诉浏览器每个元素是可用宽度的 25%，然后你告诉它从每个元素的右侧减去 30px 以将它们隔开。然后你告诉它“除了最后一个，不要从右边扣除任何东西”，所以前 3 个实际上是 25%-30px，最后一个是唯一一个真正是 25% 的。

如何解决这个问题将取决于你在最终布局中想要什么，但我会去掉最后一项的右填充为 0px 的位，并将所有元素设置为左填充为 15px 和15px 的右内边距。

**编辑1**

在澄清需求后，这个答案更适合 OP：http: [//jsfiddle.net/Az3eH/](http://jsfiddle.net/Az3eH/)

HTML：

```
<div class="grid">
  <div class="col-1-4">
    <div class="tan-trans">
      1/4
    </div>
  </div>
  <div class="col-1-4">
    <div class="tan-trans">
      1/4
    </div>
  </div>
  <div class="col-1-4">
    <div class="tan-trans">
      1/4
    </div>
  </div>
  <div class="col-1-4">
    <div class="tan-trans">
      1/4
    </div>
  </div>
</div>​ 
```

CSS：

```
.tan-trans {
    background: #282816;
    background: -moz-linear-gradient(top, rgba(40,40,38,1) 0%, rgba(0,0,0,0) 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(40,40,38,1)), color-stop(100%,rgba(0,0,0,0)));
    background: -webkit-linear-gradient(top, rgba(40,40,38,1) 0%,rgba(0,0,0,0) 100%);
    background: -o-linear-gradient(top, rgba(40,40,38,1) 0%,rgba(0,0,0,0) 100%);
    background: -ms-linear-gradient(top, rgba(40,40,38,1) 0%,rgba(0,0,0,0) 100%);
    background: linear-gradient(to bottom, rgba(40,40,38,1) 0%,rgba(0,0,0,0) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#282826', endColorstr='#00000000',GradientType=0);
    border-radius: 10px;
    padding: 20px;
}
.grid:after {
    content: "";
    display: table;
    clear: both;
}

*, *:after, *:before {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}

[class*='col-']{float:left;padding-left:1%;padding-right:1%; padding-top: 30px; }

.col-1-1 { width: 100%; }
.col-1-3 { width: 33.33%; }
.col-2-3 { width: 66.66%; }
.col-1-2 { width: 50%; }
.col-1-4 { width: 25.5%; }
.col-1-8 { width: 12.5%; }
.col-3-8 { width: 37.5%; }
.col-5-8 { width: 62.5%; }
.col-7-8 { width: 87.5%; }
.col-1-16 { width: 6.25%; }
.col-3-16 { width: 18.75%; }
.col-5-16 { width: 31.25%; }
.col-7-16 { width: 43.75%; }
.col-9-16 { width: 56.25%; }
.col-11-16 { width: 68.75%; }
.col-13-16 { width: 81.25%; }
.col-15-16 { width: 93.75%; }
[class*='col-']:first-of-type {padding-left:0; padding-right: 1%; width: 24.5%}
[class*='col-']:last-of-type { padding-left: 1%; padding-right:0;width: 24.5%}​ 
```

**编辑 2** 在与 OP 进一步询问后，似乎他真正需要的是纯 HTML/ CSS 解决方案。考虑到这一点，我认为他按照[960.gs](http://960.gs)采用固定布局，这将允许更好的选择来确定每个百分比应该是什么宽度。即：100% == 960px，所有细分都是固定宽度的一部分。

# excel - 通过 OleDb 在 Asp.net 应用程序中将数据写入 Excel

> ID：12272690
> 
> 赞同：1
> 
> 时间：2012-09-04T23:36:05.530
> 
> 标签：excel, oledb, export-to-excel

因此，我可以使用 OleDbConnection 将行插入到 Excel 工作表中的命名范围中，如下所示：

```
string con_string = string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=\"Excel 12.0 Xml;HDR=NO;\";", tempfilename) 
```

然后我在命名范围中插入行，以便应用程序的用户可以下载生成的 Excel 工作簿，在其中输入对数据的一些更改，然后稍后将这些更改上传并让应用程序将它们读取到数据库中。

当我在我的工作站上运行应用程序时，一切都很好。但是当我在我们的测试服务器上运行它时，构建的工作表中没有任何命名范围，这很疯狂，因为它只是通过插入这个命名范围来构建所有数据，但它没有，所以当用户尝试上传带有更改的工作簿时，由于 OleDb 驱动程序未找到该命名范围，他们会收到错误消息。

关于为什么这在工作站上有效但在服务器上无效的任何线索？

# jinja2 - 如果变量和变量被定义 - jinja2

> ID：12272695
> 
> 赞同：13
> 
> 时间：2012-09-04T23:36:25.963
> 
> 标签：jinja2

我试图显示`div`s 取决于是否已创建数据库条目：

```
<table class="info-table">
<tr><td>
<div class="info-table_titlebox">
{% if post.wrk_1_title is defined %}
    <div class="info-title_title">
    <h2>{{post.wrk_1_title}}</h2>
    <h3>Facilitator: {{post.wrk_1_facilitator}}</h3>
    <h4>Location: {{post.wrk_1_locate}}</h4>
    <h4>Max participants: {{post.wrk_1_max}}</h4>
    </div>
    <div class="info-title_list">
        <ul>
        <li>{{post.eventday}} - <b>Week {{post.eventweek}}</b></li>
        <li class="info-title_listright">{{post.wrk_1_time}}</li>
        </ul>
    </div>
    <p>{{post.wrk_1_description}}</p>
{% endif %}
</div>
</td>
<td>
<div class="info-table_titlebox">
{% if post.wrk_1_title is defined and post.wrk_2_title is defined %} 
    <div class="info-title_title">
    <h2>{{post.wrk_2_title}}</h2>
    <h3>Facilitator: {{post.wrk_2_facilitator}}</h3>
    <h4>Location: {{post.wrk_2_locate}}</h4>
    <h4>Max participants: {{post.wrk_2_max}}</h4>
    </div>
    <div class="info-title_list">
        <ul>
        <li>{{post.eventday}} - <b>Week {{post.eventweek}}</b></li>
        <li class="info-title_listright">{{post.wrk_2_time}}</li>
        </ul>
    </div>
    <p>{{post.wrk_2_description}}</p>
{% endif %}
</div>
</td> 
```

这是一个简化的片段 - 模式继续。基本上，如果标题在数据库中，则仅当`div1`两者都在数据库中时才显示，依此类推。`title 1``title 2``div1``div2`

目前，这种作品显示了`div`我想显示的内容，但由于某种原因，它也显示了下一个。如果我有它的标题，`div 1`它会显示`1`，`2`如果我有一个标题`div 1`，`2`它会显示`1, 2, and 3`

我真的很困惑，因为我对 Jinja2 真的很陌生。我不确定这是否是我在 html 中的语法定位，或者语法是否错误，或者您是否无法检查两个变量......任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-07T03:16:00.997

与 Python 中一样`0`，`None`、`[]`、`{}`和`""`为 False。除此之外的任何事情都是真实的。

> “Jinja 中的 if 语句可以与 Python 中的 if 语句相媲美。以最简单的形式，您可以使用它来测试变量是否已定义，不为空或不为假：”

```
{% if post and post.wrk_1_title %}

{% endif %} 
```

文档：http: [//jinja.pocoo.org/docs/templates/#if](http://jinja.pocoo.org/docs/templates/#if)

# mysql - 将mysql推送到heroku

> ID：12272696
> 
> 赞同：0
> 
> 时间：2012-09-04T23:36:35.320
> 
> 标签：mysql, heroku, taps

我成功地将Django应用移植到heroku，现在我只需要推送数据库。我试过：

```
heroku db:push mysql://root@localhost:themedb 
```

并得到以下错误：

```
Loaded Taps v0.3.23
 !    Invalid database url 
```

我很确定 mysql://root@localhost:themedb 是错误的，但我不知道它是什么部分。数据库没有密码，所以我跳过了密码。

我很感激任何帮助。

更新：按照 hgmnz 的建议，我做了：

```
heroku db:push mysql://root@localhost/themedb 
```

但得到以下信息：

```
Failed to connect to database:
  Sequel::AdapterNotFound -> LoadError: no such file to load -- mysql 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T00:52:08.847

试试看`heroku db:push mysql://root@localhost/themedb`，我想向你指出[valkyrie](https://github.com/ddollar/valkyrie)，它可能是水龙头的继任者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T00:34:59.100

尝试`heroku config`在命令行上运行 - 你`DATABASE_URL`的数据库有配置变量吗？如果是这样，请尝试使用它来推动。

如果您没有`DATABASE_URL`config var，您是否已将 mysql 数据库添加到您的应用程序？如果不是，您应该首先从[https://addons.heroku.com/](https://addons.heroku.com/)添加一个数据库（或者从命令行，如果您愿意的话）。如果您已经添加了数据库，则可能需要从命令行`heroku addons:add {addon-name}`再次运行以确保添加了 config var。

# java - 为什么 maven 给我的 utf-8 字符与 eclipse 不同（在 eclipse 中测试运行，在 maven 中失败）？

> ID：12272698
> 
> 赞同：4
> 
> 时间：2012-09-04T23:36:40.720
> 
> 标签：java, eclipse, maven, encoding

我目前的项目涉及解析自然语言。一项测试从文件中读取文本，删除某些字符，并将文本标记为单个单词。该测试实际上比较了唯一词的数量。在eclipse中，这个测试是“绿色的”，在maven中，我得到的单词数量比预期的要多。比较单词列表，我看到以下附加单词：

*   收购方⊙s
*   卡片⊙s
*   机构⊙s
*   发行人⊙s
*   提供者⊙s
*   psam⊙s
*   ⊜来自⊝</li>
*   ⊜插槽⊝</li>
*   ⊜to⊝</li>

查看文本源，它包含以下应过滤掉的字符：“ ” '</p>

这适用于eclipse，但不适用于maven。我正在使用 utf-8。这些文件似乎编码正确，在 maven pom 中我指定以下内容：

```
<properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <org.apache.lucene.version>3.6.0</org.apache.lucene.version>
</properties> 
```

编辑：这是读取文件的代码（根据eclipse，编码为UTF-8）。

```
 BufferedReader reader = new BufferedReader(
                new FileReader(this.file));
        String line = "";
        while ((line = reader.readLine()) != null) {
            // the csv contains a text and a classification
            String[] reqCatType = line.split(";");
            String reqText = reqCatType[0].trim();
            String reqCategory = reqCatType[1].trim();
            // the tokenizer also removes unwanted characters:
            String[] sentence = this.filter.filterStopWords(this.tokenizer
                    .tokenize(reqText));
            // we use this data to train a machine learning algorithm
            this.dataSet.learn(sentence, reqCategory);
        }
        reader.close(); 
```

编辑：以下信息可能对分析问题有用：

```
mvn -v
Apache Maven 3.0.3 (r1075438; 2011-02-28 09:31:09-0800)
Maven home: /usr/share/maven
Java version: 1.6.0_33, vendor: Apple Inc.
Java home: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
Default locale: en_US, platform encoding: MacRoman
OS name: "mac os x", version: "10.6.8", arch: "x86_64", family: "mac" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T05:41:47.257

因此，您的数据文件采用 UTF-8 格式。该文件上的 eclipse 设置没有任何影响，因为正在运行的 Java 程序将是解释含义的指令。

FileReader 总是使用平台默认编码，这通常是个坏主意。Eclipse 可能会为您设置“平台默认值”，而 Maven 不是。

修复您的代码以指定编码。

请参阅 JavaDoc：

```
To specify these values yourself, construct an InputStreamReader on a FileInputStream. 
```

# php - 客户属性，不排序选择选项

> ID：12272699
> 
> 赞同：0
> 
> 时间：2012-09-04T23:36:52.047
> 
> 标签：php, magento, entity-attribute-value

制作了一个创建一些**客户 EAV 属性**的模块。其中一个属性是**Select**，我将一堆选项放入它们各自的表中。一切都排成一行，并且在前端和后端都可以访问。

在调用这部分事情完成之前的最后一件事是选项的排序顺序。它们都是乱码的，而不是明显的默认值或字母顺序（似乎是随机的……非常奇怪）。

我正在使用 Mage v1.11（专业版/企业版）。

**配置文件**

```
<config>
    <modules>
        <WACI_CustomerAttr>
            <version>0.1.0</version>
        </WACI_CustomerAttr>
    </modules>
    <global>
        <resources>
            <customerattr_setup>
                <setup>
                    <module>WACI_CustomerAttr</module>
                    <class>Mage_Customer_Model_Entity_Setup</class>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </customerattr_setup>
        </resources>
        <models>
            <WACI_CustomerAttr>
                <class>WACI_CustomerAttr_Model</class>
            </WACI_CustomerAttr>
        </models>
        <fieldsets>
            <customer_account>
                <agency><create>1</create><update>1</update></agency>
                <title><create>1</create><update>1</update></title>
                <phone><create>1</create><update>1</update></phone>
                <mailing_address><create>1</create><update>1</update></mailing_address>
                <city><create>1</create><update>1</update></city>
                <state><create>1</create><update>1</update></state>
                <zip><create>1</create><update>1</update></zip>
                <fed_id><create>1</create><update>1</update></fed_id>
                <ubi><create>1</create><update>1</update></ubi>
            </customer_account>
        </fieldsets>
    </global>
</config> 
```

**mysql4-install-0.1.0.php**

```
<?php

    Mage::log('Installing WACI_CustomerAttr');

    echo 'Running Upgrade: '.get_class($this)."\n <br /> \n"; 
    //die ( 'its running' );

    $installer = $this;
    /* @var $installer Mage_Customer_Model_Entity_Setup */

    $installer->startSetup();

// bunch of attributes

    // State
    $installer->addAttribute('customer','state',
                array(
                    'type'          => 'varchar',
                    'group'         => 'Default',
                    'label'         => 'State',
                    'input'         => 'select',
                    'default'       => 'Washington',
                    'source'        => 'WACI_CustomerAttr/customer_attribute_data_select',
                    'global'        => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_STORE,
                    'required'      => true,
                    'visible'       => true,
                    'user_defined'  => 1,
                    'position'      => 67
                )
            );
    $attrS = Mage::getSingleton('eav/config')->getAttribute('customer', 'state');
    $attrS->addData(array('sort_order'=>67));
    $attrS->setData('used_in_forms', array('adminhtml_customer','customer_account_edit','customer_account_create'))->save();

    $state_list = array('Alabama','Alaska','Arizona','Arkansas','California','Colorado','Connecticut','Delaware','Florida','Georgia',
        'Hawaii','Idaho','Illinois','Indiana','Iowa','Kansas','Kentucky','Louisiana','Maine','Maryland','Massachusetts','Michigan',
        'Minnesota','Mississippi','Missouri','Montana','Nebraska','Nevada','New Hampshire','New Jersey','New Mexico','New York',
        'North Carolina','North Dakota','Ohio','Oklahoma','Oregon','Pennsylvania','Rhode Island','South Carolina','South Dakota',
        'Tennessee','Texas','Utah','Vermont','Virginia','Washington','West Virginia','Wisconsin','Wyoming');

    $aOption = array();
    $aOption['attribute_id'] = $installer->getAttributeId('customer', 'state');

    for($iCount=0;$iCount<sizeof($state_list);$iCount++){
        $aOption['value']['option'.$iCount][0] = $state_list[$iCount];
    }
    $installer->addAttributeOption($aOption);

// a few more 

$installer->endSetup(); 
```

**app/code/local/WACI/CustomerAttr/Model/Customer/Attribute/Data/Select.php**

```
<?php

class WACI_CustomerAttr_Model_Customer_Attribute_Data_Select extends Mage_Eav_Model_Entity_Attribute_Source_Abstract{

    function getAllOptions(){

        if (is_null($this->_options)) {
            $this->_options = Mage::getResourceModel('eav/entity_attribute_option_collection')
                ->setAttributeFilter($this->getAttribute()->getId())
                ->setStoreFilter($this->getAttribute()->getStoreId())
                ->setPositionOrder('asc')
                ->load()
                ->toOptionArray();
        }
        $options = $this->_options;
        return $options;

    }
} 
```

**主题/变体/模板/持久性/客户/表单/register.phtml**

```
 <li>
            <?php
                $attribute = Mage::getModel('eav/config')->getAttribute('customer','state');
            ?>
            <label for="state" class="<?php if($attribute->getIsRequired() == true){?>required<?php } ?>"><?php if($attribute->getIsRequired() == true){?><em>*</em><?php } ?><?php echo $this->__('State') ?></label>
            <div class="input-box">
                <select name="state" id="state" class="<?php if($attribute->getIsRequired() == true){?>required-entry<?php } ?>">
                    <?php
                         $options = $attribute->getSource()->getAllOptions();
                         foreach($options as $option){
                    ?>
                        <option value='<?php echo $option['value']?>' <?php if($this->getFormData()->getState() == $option['value']){ echo 'selected="selected"';}?>><?php echo $this->__($option['label'])?></option>
                    <?php } ?>
                </select>
            </div>
        </li> 
```

所有选项都`eav_attribute_option`很好地加载到 table 中（尽管没有`sort_order`定义），以及 table `eav_attribute_option_value`。

在**adminhtml / customer->manage customers->account information**中，这个选择显示得很好（但它是由系统自动提供的）。

**似乎我应该能够在创建属性选项时设置排序顺序，或者，当然，在`data/select`类中定义排序顺序。但是我尝试过的没有任何效果。我也不想做前端黑客......**

哦，我如何设置这个选择的默认值？（不同的问题，我知道，但相关）。设置属性 'default' => 'washington' 似乎无济于事。

似乎有很多方法可以设置这样的属性选择选项。有没有比我在这里概述的更好的方法？也许我搞砸了。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:25:27.983

……嗯，这很荒谬。

```
<div class="input-box">
    <select name="state" id="state" class="<?php if($attribute->getIsRequired() == true){?>required-entry<?php } ?>">
        <?php
             $options = $attribute->getSource()->getAllOptions();
             sort($options);
             foreach($options as $option){
        ?>
            <option value='<?php echo $option['value']?>' <?php if($option['label'] == 'Washington'){ echo 'selected="selected"';}?>><?php echo $this->__($option['label'])?></option>
        <?php } ?>
    </select>
</div> 
```

...只是假设事情比他们更复杂。

我把它归结为“我的大脑是糊状的”

# c# - 在 ipad chrome 浏览器上为 ASP.NET 站点请求桌面站点选项

> ID：12272701
> 
> 赞同：0
> 
> 时间：2012-09-04T23:37:00.560
> 
> 标签：c#, asp.net-mvc, ipad, google-chrome, forms-authentication

iPad chrome 浏览器上的“请求桌面站点”是什么意思？为什么 ASP.NET 网站在启用此选项之前无法运行？

如果我的网站在 iPad Chrome 上加载，则登录不起作用，而是重定向到一个奇怪的 URL。

![在此处输入图像描述](../Images/64b1ac3a6380515a16ee59d8f8643f9e.png)

如果用户选择“请求桌面站点”，则登录工作正常。我可以向我的 ASP.NET MVC 站点添加什么来更改它，以便用户不必单击“请求桌面站点”选项？

编辑：刚刚意识到生成的 URL 是因为它试图使用无 cookie 表单身份验证。一定是 iPad Chrome 默认不接受 cookie 吧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T00:29:26.557

是的，很多人报告说 iOS 上的 Chrome 似乎不接受 cookie。有多种方法可以绕过它，最简单的方法是在无 cookie 模式下强制使用 cookie。

```
<authentication mode="Forms" >
   <forms loginUrl="~/Account/LogOn" timeout="3600" cookieless="UseCookies" />
</authentication> 
```

# linux - 通过 egrep 过滤 CSV 中的值

> ID：12272702
> 
> 赞同：0
> 
> 时间：2012-09-04T23:37:44.127
> 
> 标签：linux, grep

我有一个 CSV 文件，需要将值分成单独的 CSV 文件。

它已经有一个现有的代码：\

1.  第一个子文件需要一个包含第一个和第二个字段中的值的文件

    `egrep "^[^,]+,[^,]+," orig.csv > suba.csv`

2.  第二个子包含第一个包含值但第二个为空的文件

    `egrep "^[^,]+,," orig.csv > subb.csv`

据我了解，`^[^,]+,`手段必须以一个值开头，但该值不能是逗号，然后是逗号。

我们有一个新要求，即第五列不能为空白：

这是我认为应该的，但不幸的是它仍然收到第五列的值，没有值

```
egrep "^[^,]+,[^,]+,[^,]+,[^,]+,[^,]+" orig.csv > suba_2.csv 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T03:17:36.027

你有没有理由不能使用`awk`？

```
$ awk -F, '{out="subb.csv"} $2{out="suba.csv"} $5{print > out}' orig.csv 
```

**这是如何运作的？**

让我们分解一下：

*   `-F,`将分隔符设置为逗号。
*   `{out="subb.csv"}`设置默认输出文件。
*   `$2{out="suba.csv"}`测试第二个字段。如果它不为空，则设置不同的输出文件。
*   `$5{print > out}`测试第五个字段是否为空，如果不是，则将输出打印到之前指定的任何输出文件。

请注意，这些简单的“空”测试并不完全是万无一失的。如果一个字段为“0”，它将评估为假。如果您的数据可能包含“0”但必须评估为真的字段，则可以调整（加长）此脚本以解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T00:07:49.960

尝试：

```
egrep "^[^,]+,[^,]+,[^,]+,[^,]+,[^, ]+" orig.csv 
```

我怀疑你的第五个元素中有空格。

您的正则表达式通过以下输入为我工作：

```
% cat orig.csv
1,2,3,4,5,6,7,8,9,10
1,2,3,4,,6,7,8,9,10
1,2,3,4,5
1,2,3,4,
% egrep "^[^,]+,[^,]+,[^,]+,[^,]+,[^,]+" orig.csv
1,2,3,4,5,6,7,8,9,10
1,2,3,4,5
% 
```

但不是当我在最后一行 1,2,3,4, 的末尾放置一个空格时。

# r - 使用净堆积条形图可视化李克特反应：如何在组之间进行比较？

> ID：12272704
> 
> 赞同：2
> 
> 时间：2012-09-04T23:37:58.270
> 
> 标签：r, graph, plot, data-visualization

我借鉴了这篇关于**如何使用 R 可视化李克特响应的优秀条目：**

[ [https://stats.stackexchange.com/questions/25109/visualizing-likert-responses-using-r-or-spss](https://stats.stackexchange.com/questions/25109/visualizing-likert-responses-using-r-or-spss) ]

尽管问题的答案非常有帮助，但我无法**在一个情节中比较组**。（如果这不起作用）如果您帮助我将多个图组合成一个整体图，我将不胜感激。

非常感谢！

*#需要的包裹#*

```
install.packages(c('devtools', 'roxygen2', 'RSQLite', 'ipeds','reshape'), repos=c('http://cran.r-project.org', 'http://r-forge.r-project.org'))
require(devtools)
require(roxygen2)

library(ggplot2)
library(HH)
library(reshape)
library(gridExtra) 
```

*#生成类似于我使用的样本数据的代码，即通过 5 点李克特量表 (col2) 测量的多个陈述项目 (col1)，具有分组变量 (col3) 和频率响应 (col4; I设置 mean 和 sd 使数字为正）。#*

```
mydata1<-expand.grid(col1=c('item1', 'item2', 'item3', 'item4'), col2=c('0', '1', '2', '3', '4'), col3=c('T1'))
m<-2:7
s<-0:1
mydata1$col4=sapply(rnorm(20,m,s), function(x) {round(x,2)})
mydata1$col2<-factor(mydata1$col2, levels=c(0,1,2,3,4), labels=c("strongly disagree", "disagree", "neutral", "agree", "strongly agree"), ordered=TRUE)
mydata1<-reshape(mydata1, direction="wide", v.names="col4", timevar="col2", idvar="col1")

mydata2<-expand.grid(col1=c('item1', 'item2', 'item3', 'item4'),col2=c('0', '1', '2', '3', '4'),col3=c('T0'))
m<-2:7
s<-0:1
mydata2$col4=sapply(rnorm(20,m,s), function(x) {round(x,2)})
mydata2$col2<-factor(mydata2$col2, levels=c(0,1,2,3,4),labels=c("strongly disagree", "disagree", "neutral", "agree", "strongly agree"), ordered=TRUE)
mydata2<-reshape(mydata2, direction="wide", v.names="col4", timevar="col2", idvar="col1")

mydata3<-expand.grid(col1=c('item1', 'item2', 'item3', 'item4'),col2=c('0', '1', '2', '3', '4'),col3=c('C1'))
m<-2:7
s<-0:1
mydata3$col4=sapply(rnorm(20,m,s), function(x) {round(x,2)})
mydata3$col2<-factor(mydata3$col2,levels=c(0,1,2,3,4),labels=c("strongly disagree", "disagree", "neutral", "agree", "strongly agree"), ordered=TRUE)
mydata3<-reshape(mydata3, direction="wide", v.names="col4", timevar="col2", idvar="col1")

mydata4<-expand.grid(col1=c('item1', 'item2', 'item3', 'item4'),col2=c('0', '1', '2', '3', '4'),col3=c('C0'))
m<-2:7
s<-0:1
mydata4$col4=sapply(rnorm(20,m,s), function(x) {round(x,2)})
mydata4$col2<-factor(mydata4$col2,levels=c(0,1,2,3,4), labels=c("strongly disagree", "disagree", "neutral", "agree", "strongly agree"), ordered=TRUE)
mydata4<-reshape(mydata4, direction="wide", v.names="col4", timevar="col2", idvar="col1")

mydata<-rbind(mydata1, mydata2, mydata3, mydata4)
summary(mydata) 
```

*#准备资料#*

```
mydata$col4.neutral<-NULL
colnames(mydata)[colnames(mydata)=="col4.strongly disagree"]<-"Strongly disagree"
colnames(mydata)[colnames(mydata)=="col4.disagree"]<-"Disagree"
colnames(mydata)[colnames(mydata)=="col4.agree"]<-"Agree"
colnames(mydata)[colnames(mydata)=="col4.strongly agree"]<-"Strongly agree" 
```

***＃阴谋＃***

```
items<-mydata[, c("Strongly disagree", "Disagree", "Agree", "Strongly agree")]
itemsg=likert(items, grouping =mydata$col3) 
plot(itemsg) 
```

**问题：**代码产生一个单一的情节，但不进行组间比较。似乎它绘制了在**mydata**中出现的每个项目，因此如果我们设法重新排序行，我们可能能够生成一个允许在项目和组之间进行轻松比较的图。

```
> ro.mydata
            col1 col3 Strongly disagree Disagree Agree Strongly agree
item1 (T1) item1   T1              2.00     6.00  2.00           6.00
item1 (T0) item1   T0              2.00     6.00  2.00           6.00
item2 (T1) item2   T1              1.90     6.59  2.67           8.33
item2 (T0) item2   T0              3.57     6.76  3.23           9.03
item3 (T1) item3   T1              4.00     2.00  4.00           2.00
item3 (T0) item3   T0              4.00     2.00  4.00           2.00
item4 (T1) item4   T1              7.02     2.66  6.31           2.76
item4 (T0) item4   T0              3.56     3.63  4.74           3.21
item1 (C1) item1   C1              2.00     6.00  2.00           6.00
item1 (C0) item1   C0              2.00     6.00  2.00           6.00
item2 (C1) item2   C1              4.01     6.87  2.62           6.23
item2 (C0) item2   C0              2.95     5.95  3.69           5.36
item3 (C1) item3   C1              4.00     2.00  4.00           2.00
item3 (C0) item3   C0              4.00     2.00  4.00           2.00
item4 (C1) item4   C1              4.10     2.54  6.12           2.62
item4 (C0) item4   C0              4.57     1.94  3.64           2.86
> 
```

![在此处输入图像描述](../Images/2082a8b6ae9ff3406f226fe73217b5cb.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T14:18:41.583

所以，这有点超出我的专业知识，因为底层函数使用 R 中的格子绘图功能，而我并没有真正使用它。`by()`话虽如此，我相信有一种方法可以通过处理每个调用来完成您想要的事情`likert()`，然后使用布局参数将它们绘制在一个图中。

从...开始：

```
items_byg <- by(data=mydata[3:6],
                INDICES=mydata[2],
                FUN=likert,
                main="",xlab="",auto.key=list(columns=1,space="right")) 
```

这会按组处理您的数据框 - 数据是四个变量`mydata[3:6]`，索引是`mydata[2]`，函数是`likert()`（来自 HH 包）。然后，将附加参数传递给`likert()`- 即，使主图标题为空白，x-labels 为空白，并将自动生成的密钥更改为右侧。我并不完全熟悉 auto.key 的参数，但`?barchart`会提供一些信息。

下一个：

```
print(items_byg[[1]],position=c(0,0.75,1,1),more=TRUE)
print(items_byg[[2]],position=c(0,0.5,1,0.75),more=TRUE)
print(items_byg[[3]],position=c(0,0.25,1,0.5),more=TRUE)
print(items_byg[[4]],position=c(0,0,1,0.25)) 
```

的输出`by()`将是一个列表，其中每个元素都是该组变量的网格对象。因此，我们只是将它们中的每一个打印到一个图上。如您所见，前三个有`more=TRUE`，它告诉 R 期待额外的情节。每个也有一个论点`position=c(x1,y1,x2,y2)`。基本上，每个位置参数都给出了每个图的左下角和右上角的坐标。[可以从这个 SO answer](https://stackoverflow.com/questions/2540129/lattice-multiple-plots-in-one-window)获得更多信息。

其结果是所附的情节。到目前为止，它并不完美，但我认为这是一个开始。请注意`by()`，如果您想直观地比较各组之间的每个问题，您可以将组更改为按问题分组，而不是按组。

显然，您仍然需要解决一些问题，例如使所有内容排列整齐并消除重复的键-那里存在一些挑战-但原则上，我相信这可以实现您想要的-很好地分组和堆叠的条形图。

![使用格子的堆积图示例](../Images/3dbe55d2b8790cefd920cf81c24078d5.png)

**编辑添加**

在查看了您所说的内容后，我做了一些我认为对您有用的调整。从按项目排序数据开始：

```
mydata <- mydata[order(mydata[1]),] 
```

接下来，我们仍将使用`by()`来获取组，但有一些更改。首先，我们使用项目作为索引，而不是组（因为您想直观地比较组）。因此，生成的每个图都将围绕一个项目。我们设置`ylab`为“组”，并使用比例尺用组名称标记 y 轴。

```
items_byg <- by(data=mydata[3:6],
                INDICES=mydata[1],
                FUN=likert,
                main="",xlab="",ylab="Groups",auto.key=list(columns=1,space="right"),
                scales=list(y=list(labels=mydata[[2]]))) 
```

现在，我们可以使用循环来运行绘图。我们从 1 循环到倒数第二个图（因为它是最后一个图，我们需要删除`more=TRUE`。位置是棘手的部分，但即使这样也不算太糟糕。x1 总是为零，x2 总是在为 1（左下角和右上角）。我们通过取 1（项目的顶部）并减去 得到 y1 的值`x*1/dim(items_byg)`。因此，如果您有 5 个项目，第一个项目的下角位于 1-( 1) *(1/5)，即 0.8。第二个在 1-(2)* (1/5)，即 0.6，依此类推。y2 仅比 y1 大一维（因此，如果 y1 为 0.8 , y2 应该是 1.0，以此类推）。我们还根据 x 为每个项目添加一个项目标题，然后将所有内容提供给打印。

```
for(x in 1:(dim(items_byg)-1)) {

    x1 <- 0
    y1 <- 1-(x*(1/dim(items_byg)))
    x2 <- 1
    y2 <- y1+(1/dim(items_byg))

    items_byg[[x]]$main <- paste("Item",x,sep=" ")
    print(items_byg[[x]],position=c(x1,y1,x2,y2),more=TRUE)
} 
```

最后一点是完成最后的情节——创建一个项目编号，然后做最后的`print()`（这需要分开，这样你就不会得到另一个`more=`.

```
items_byg[[dim(items_byg)]]$main <- paste("Item",dim(items_byg),sep=" ")
print(items_byg[[dim(items_byg)]],position=c(0,0,1,0+(1/dim(items_byg)))) 
```

运行这个，我得到下面的图像，它应该很容易推广到多个项目。

![在此处输入图像描述](../Images/36ea9085e03de0e9a9f17d8341857c9a.png)

# jquery - 使用 @font-face 动态添加 CSS

> ID：12272707
> 
> 赞同：1
> 
> 时间：2012-09-04T23:38:50.247
> 
> 标签：jquery, html, css

我需要动态更改css的链接。在新加载的 css 中（更改路径后）有这样的组件：

```
 @font-face 
{
    font-family:"DejaVu_Serif";
    font-style:normal;
    font-weight:normal;
    src:url(../fonts/DejaVu_Serif/font001.ttf);
} 
```

但不幸的是，这些字体没有加载，有什么想法我能做什么？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-30T20:07:19.913

您是否尝试过使用 PHP 创建要导入的 CSS 文件，然后通过快速 jQuery 调用将其加载到您的站点中...

```
var css = jQuery("<link>");
css.attr({
  rel:  "stylesheet",
  type: "text/css",
  href: "YOUR-PHP-FILE"
});
$("head").append(css); 
```

我在我之前的一个 PhoneGap 项目中使用了类似的东西，我希望为每个用户定制主题......也许这对你也有用。

# objective-c - 如何以编程方式移动到另一个 UIViewController？

> ID：12272710
> 
> 赞同：2
> 
> 时间：2012-09-04T23:39:37.303
> 
> 标签：objective-c, ios, uiviewcontroller

我目前正在执行一个方法，当我到达当前正在执行的方法的末尾时`CurrentViewController`，我想移动到我的（这是我想要移动到的 ViewController 的实际名称）`FirstViewController`

**当前视图控制器.m**

```
-(void)methodExecutingOnCurrentViewController
{
    //some code..

    // what method do I call in order to load and move to my FirstViewController at this point?

    // do I first initialize an instance of the ViewController I want to move to?
    UIViewController *firstViewController = [[FirstViewController alloc] init];

    // but now how do I actually move to this instance I've just created? 
    // I couldn't find the appropriate method in the class reference documentation

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:42:57.760

看看`- (void)presentModalViewController:(UIViewController *)modalViewController animated:(BOOL)animated`[Doc](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)。

还有许多其他方法可以完成您正在寻找的事情，您是否使用导航控制器？然后`- (void)pushViewController:(UIViewController *)viewController animated:(BOOL)animated`就是你想要的。您也可以将该控制器的视图作为子视图添加到您当前的 viewController。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T23:43:21.253

如果您使用的是 UINavigationController（如果不是，则应该这样做），您可以这样做：

```
[self.navigationController.pushViewController pushViewController: firstViewController animated:YES]; 
```

这会将视图控制器推送到导航堆栈上。

您还可以模态显示视图控制器。你应该在[这里](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/AboutViewControllers/AboutViewControllers.html)阅读并决定什么是最适合你的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T23:45:08.770

将您的项目基于导航控制器并简单地推送

> SecondViewController *secondVC = [[SecondViewController alloc] init];
> 
> ```
>  [self.navigationController secondVC animated:YES]; 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-17T07:47:00.087

如果你不使用 UINavigationController，你可以通过这种方式移动到其他 UIViewcontroller：

```
NewViewController *newVC = [[NewViewController alloc] init];
[self dismissViewControllerAnimated:YES completion:^{[self presentViewController:newVC animated:YES completion:^{}];}]; 
```

# regex - 正则表达式到变量赋值在 Perl 中失败

> ID：12272712
> 
> 赞同：2
> 
> 时间：2012-09-04T23:40:06.603
> 
> 标签：regex, perl

我想知道为什么以下内容在匹配后无法将正则表达式匹配的值（IP 地址）分配给 $ipaddress 变量。我尝试了许多推荐的方法（显然我是 Perl 的新手），但都失败了。在执行匹配时，不是每个匹配都存储在 $1 变量中，范围为 1-9，因此第一个默认为 $1？

代码是：

```
sub block_match {

  my $line_instance_b = $_[0];
  my $ipaddress;

  if ( $line_instance_b =~ /banned_ip|Found UltraSurf Signature|ip_block / ) {
    $ipaddress = $1 if ($line_instance_b =~ /\b(?:[0-9]{1,3}\.){3}[0-9]{1,3}\b/);
    print "Found ip address: ", $ipaddress, "in the following line: \n",
    $line_instance_b;
  }
  else {
    print "Not a block line: \n", $line_instance_b, "\n"
  }
} 
```

它匹配的行是：

```
INIT: banned_ip add 208.67.219.132 for FreeGate 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T23:44:03.080

您正在使用一个非捕获组，`(?:...)`它永远不会分配给匹配变量。

`(?:[0-9]{1,3}\.){3}`将要捕获的表达式部分包装`()`成`$1`：

```
$ipaddress = $1 if $line_instance_b =~ /\b((?:[0-9]{1,3}\.){3})[0-9]{1,3}\b/;
#                                         ^~~~~~~~~~~~~~~~~~~~^ 
```

# java - 场景构建器导入到 Eclipse

> ID：12272715
> 
> 赞同：3
> 
> 时间：2012-09-04T23:40:13.683
> 
> 标签：java, eclipse, eclipse-plugin, javafx

我最近发现您可以使用 JavaFx Scene builder 来构建您的 GUI

我已经厌倦了 Eclipse 提供的 gui builder 中的构建

所以我想尝试 Scene builder 但我不确定如何将它导入到我的 Eclipse 项目中并在我的程序中实际使用它？

我一直在寻找分步指南，但到目前为止，我还没有找到一个用于 Eclipse 的指南（对于 netbeans，有很多负载，但到目前为止我没有找到用于 Eclipse 的指南）

我希望你们中的一些人能够帮助我或指导我完成我需要采取的步骤

最好的问候马克拉斯穆森

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T00:12:07.007

一些背景资料：

1.  SceneBuilder 用于构建[JavaFX](http://docs.oracle.com/javafx/)应用程序。
2.  [e(fx)clipse](http://efxclipse.org/)是 Eclipse 的非官方 JavaFX 工具。
3.  目前 SceneBuilder 作为一个独立的应用程序运行。
4.  SceneBuilder 输出[fxml](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html)文件。
5.  SceneBuilder 可以选择嵌入到 NetBeans 中。
6.  e(fx)clipse 的未来版本也可能提供在 Eclipse 中嵌入 SceneBuilder。
7.  e(fx)clipse 将编译和构建 javafx 应用程序 - 包括输入已由 SceneBuilder 输出的 fxml 的应用程序。
8.  将 JavaFX 应用程序和 SceneBuilder 生成的 fxml 联系在一起的关键类是[FXMLLoader](http://docs.oracle.com/javafx/2/api/javafx/fxml/FXMLLoader.html)。

使用 SceneBuilder 和 e(fx)clipse 构建应用程序的教程轨道：

1.  分别安装[SceneBuilder](http://www.oracle.com/technetwork/java/javase/downloads/index.html)（在“其他资源”下下载）和[e(fx)clipse](http://efxclipse.org/install.html)以及[jdk7u6+](http://www.oracle.com/technetwork/java/javase/downloads/index.html)。
2.  使用 e(fx)clipse，尝试编译和运行[基本的 JavaFX 示例应用程序](http://docs.oracle.com/javafx/2/get_started/jfxpub-get_started.htm)，尤其是 fxml 相关示例。
3.  运行[SceneBuilder 示例 入门](http://docs.oracle.com/javafx/scenebuilder/1/get_started/jsbpub-get_started.htm)，但使用 e(fx)clipse 而不是 NetBeans 来编译和运行代码。
4.  尝试[掌握 FXML 教程](http://docs.oracle.com/javafx/2/fxml_get_started/jfxpub-fxml_get_started.htm)- 但在 SceneBuilder 中创建 FXML 并使用 e(fx)clipse 构建您的项目。

# gmail - 是否可以通过中键在新标签页中打开 Gmail 线程？

> ID：12272719
> 
> 赞同：7
> 
> 时间：2012-09-04T23:40:37.320
> 
> 标签：gmail, mouseevent

在它全部 ajaxy 之前（很久以前），您只需中键单击一封电子邮件即可在新选项卡中打开它。现在，可以按 ctrl+click，但所有其他链接都可以通过中键单击，所以以某种方式恢复它会很好。也许与油脂猴？

这在带有 Chrome 或 Firefox 的 Linux 上。

# ios - Cocos2D setDisplayFrame 在视图更改后不起作用？

> ID：12272724
> 
> 赞同：0
> 
> 时间：2012-09-04T23:41:24.077
> 
> 标签：ios, image, cocos2d-iphone, sprite

在我的 Cocos2D 应用程序中，我有一个包含所有游戏对象的精灵表。在 CCLayer 类的 init 方法中，我这样做：

```
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"Objects.plist"];
objectsSheet = [CCSpriteBatchNode batchNodeWithFile:@"Objects.pvr.ccz"];
[self addChild:objectsSheet]; 
```

我像这样创建我的主角精灵：

```
mySprite = [[CCSprite spriteWithSpriteFrameName:@"MainImage.png"] retain]; 
```

它加载良好。当角色在我离开视图***之前***死亡时，我会这样做：

```
CCSpriteFrameCache* cache = [CCSpriteFrameCache sharedSpriteFrameCache];
CCSpriteFrame* frame = [cache spriteFrameByName:@"NewImage.png"];
[mySprite setDisplayFrame:frame]; 
```

这甚至效果很好。现在我离开视图，然后我回到游戏视图。

所以现在我必须将角色图像改回其原始图像，所以我这样做：

```
[mySprite setDisplayFrame:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"MainImage.png"]]; 
```

*但是发生了一些奇怪的事情*，mySprite 只是空白，上面的最后一个代码肯定会被调用但没有做任何事情。奇怪的是，如果我将它加载到在我切换回游戏视图后创建的新精灵中，我会看到图像。所以这与不记得旧图像或其他东西有关。

有谁知道为什么会发生这种情况或我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:23:17.220

返回游戏视图后检查

```
[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"MainImage.png"] 
```

不是`nil`。帧可能会从 spriteframe 缓存中卸载

# php - 如何在我的表单处理程序中使用 PHP 来查看输入表单的图像文件是否已经在我的文件系统中

> ID：12272726
> 
> 赞同：0
> 
> 时间：2012-09-04T23:41:45.123
> 
> 标签：php, filesystems, file-exists

这是我的代码，但它永远不会返回 true。

```
 $image = $_FILES['image'];

    $filename = $image['name'];
    $filepathname = "/$membername/"."$filename";

    if (file_exists($filepathname)) {
       throw new Exception('Image already exists');
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T02:02:37.347

“$membername”是否包含 $_SERVER['DOCUMENT_ROOT'] 路径？

阅读更多 @ [PHP 的 file_exists() 对我不起作用？](https://stackoverflow.com/questions/1287837/phps-file-exists-will-not-work-for-me)

（如果它确实包含 $_SERVER['DOCUMENT_ROOT'] 那么您可能需要检查文件权限 - 假设您使用的是 LAMP）

# ruby-on-rails - Rails 验证未在嵌套模型上运行

> ID：12272727
> 
> 赞同：3
> 
> 时间：2012-09-04T23:41:47.657
> 
> 标签：ruby-on-rails, ruby, forms, validation, nested-attributes

我在 Rails 3.2.8 和 Ruby 1.9.3 上。

我无法弄清楚为什么嵌套属性的验证没有运行或返回任何错误。当我提交未填写任何内容的表单时，我会收到父模型（用户）的错误，而不是子模型（帐户）的错误。

在下面的代码中，我有一个拥有一个拥有的帐户（帐户模型）的用户模型和一个属于所有者的帐户模型（用户模型）。Account 模型有一个子域字符串的文本字段。

似乎当我提交不包含子域字段的表单时，帐户模型上的验证根本没有运行。关于如何在这里进行验证的任何想法？提前感谢您的任何帮助或指示。

**用户.rb**

```
class User < ActiveRecord::Base
  attr_accessible :owned_account_attributes
  has_one :owned_account, :class_name => 'Account', :foreign_key => 'owner_id'

  validates_associated :owned_account
  accepts_nested_attributes_for :owned_account, :reject_if => proc { |attributes| attributes['subdomain'].blank? }
end 
```

**帐号.rb**

```
class Account < ActiveRecord::Base
  attr_accessible :owner_id, :subdomain
  belongs_to :owner, :class_name => 'User'

  validates :subdomain, 
    :presence => true, 
    :uniqueness => true,
    :format => { ...some code... }
end 
```

**新的.haml**

```
= form_for @user do |f|
  ... User related fields ...
  = f.fields_for :owned_account_attributes do |acct|
    = acct.label :subdomain
    = acct.text_field :subdomain
  = submit_tag ... 
```

**users_controller.rb**

```
class UsersController < ApplicationController
  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])

    if @user.save
      ...
    end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T03:57:44.337

您需要将该`accepts_nested_attributes_for`方法添加到 User 模型中。像这样：

```
class User < ActiveRecord::Base
  attr_accessible :owned_account_attributes, # other user attributes 
  has_one :owned_account, :class_name => 'Account', :foreign_key => 'owner_id'

  accepts_nested_attributes_for :owned_account
  validates_associated :owned_account
end 
```

然后您应该看到与父模型（用户）上的嵌套模型有关的验证错误：

```
["Owned account subdomain can't be blank", "Owned account is invalid"] 
```

**编辑**

罪魁祸首是在子域属性为空时有效地指示 Rails 忽略嵌套帐户对象`:reject_if`的`accepts_nested_attributes_for`那一行（参见评论中的讨论）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T19:48:10.147

看起来嵌套表单正在为owned_account_attributes 生成字段，这不是关联，而不是owned_account。您是否尝试过在 Rails 控制台上使用嵌套属性执行 User.create 以查看它是否在那里工作？

# c# - 为什么接口定义中需要参数名称？我可以在实施期间选择新的参数名称

> ID：12272729
> 
> 赞同：28
> 
> 时间：2012-09-04T23:42:19.203
> 
> 标签：c#

不确定这是否是一个愚蠢的问题，但我刚刚注意到这一点：

```
public interface IActivityDao : IDao<Activity>
{
    IList<Activity> GetAllSinceSequence(long sequence, int count);
}

public class ActivityDao : AbstractNHibernateDao<Core.Domain.Activity>, IActivityDao
{        
    public IList<Activity> GetAllSinceSequence(long sequence, int maxRecords)
    {

    }
} 
```

在我的实现中，我将第二个参数称为“maxRecords”。然而，在界面中，它被定义为“计数”。编译器仍然考虑实现的接口，这很好，但可能会导致一些歧义。显然，我应该重命名其中一个参数以匹配另一个。

在重命名之前我玩了一会儿，发现了一些有趣的东西。我不允许将我的接口声明为：

```
public interface IActivityDao : IDao<Activity>
{
    IList<Activity> GetAllSinceSequence(long, int);
} 
```

这仅仅是编译器对 C# 语义的过度保护吗？除了使代码更具可读性之外，接口方法中的参数名称还有什么用途？在我看来，如果参数名称不是强制执行的，它会引起歧义。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-04T23:45:54.980

为了实现的清晰和参考，接口声明中需要参数名称。如果有人在使用您的接口，则方法参数的名称应该是自记录的，因此接口的使用者了解要传递给方法的内容（例如，通过 IntelliSense 查看方法描述时）

是的，当您实现接口时，您可以随意命名参数。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-05T00:19:57.907

历史。这可以追溯到 .NET 的早期阶段，也就是 COM 统治世界的时候。能够与 COM 互操作在当时*非常*重要，没有人会为了采用全新的编程风格而抛弃一切。

这使得 COM 互操作通常在 .NET 中得到强烈支持。除了需要为接口方法命名参数外，类型库也需要它们。

有趣的极端案例永远是 C++/CLI 语言。它采用了许多 C++ 语法规则，包括在声明中省略参数名称的能力。换句话说，这是合法的：

```
 public interface class IFoo
    {
        void bar(int, long, double);
    }; 
```

类型库导出器生成此声明：

```
 HRESULT bar(
                    [in] long p1, 
                    [in] long p2, 
                    [in] double p3); 
```

如果您在 C# 类中实现接口，则结果非常相似，由 IntelliSense 自动生成：

```
class FooImpl : cpptemp36.IFoo {
    public void foo(int __p1, int __p2, double __p3) {
        throw new NotImplementedException();
    }
} 
```

这让任何人都不高兴。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T23:47:55.477

让我问你，.net 框架中是否还有其他任何地方允许你定义没有参数名称的方法签名？

归根结底，一切皆有可能，但大多数事情都是有原因的，在这种情况下，我想这是框架和编译器设计的限制，这真的很重要吗？

毕竟，您正在定义一份使用合同，人们会期望它们真的存在。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-18T17:33:39.617

在代码质量的新世界中，实现级别的参数名称必须与接口级别相同。

在 sonarqube 中，有一条规则，例如*“参数名称应与基本声明和其他部分定义匹配”*，并将其称为*“不合规代码”*：

```
interface IFoo
{
  void Bar(int i);
}

class Foo : IFoo
{
  void Bar(int z) // Noncompliant, parameter name should be i
  {
  }
} 
```

有趣的是它指的是这个不包括的文件`interface`： [https ://wiki.sei.cmu.edu/confluence/display/c/DCL40-C.+Do+not+create+incompatible+declarations+of+the +相同+功能+或+对象](https://wiki.sei.cmu.edu/confluence/display/c/DCL40-C.+Do+not+create+incompatible+declarations+of+the+same+function+or+object)

我个人喜欢这样的代码：

```
public interface IExtractor<TInput, TOutput>{
    TOutput Extract(TInput input);
}

public class CustomerExtractor : IExtractor<Order, Customer>
{
    public Customer Extract(Order order)
    {
        // ...
    }
} 
```

但是该工具迫使我使用以下声明它是一个**关键**问题：

```
 public Customer Extract(Order input)
    {
        // ...
    } 
```

`input`与本例中的含义不同`order`。

为了摆脱噪音，

*   如果不涉及 DI，则对此类类使用静态实用程序类（Map、Extract、Combine，...）
*   如果涉及 DI，请通过添加辅助变量来欺骗工具

```
 public Customer Extract(Order input)
    {
       var order = input;

       // use order from here on
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T23:45:23.657

我想这是由于 C# 中的*命名参数*功能。即，您需要能够按名称指定参数，而不仅仅是按默认顺序：

```
IActivityDao dao;
dao.GetAllSinceSequence(count: 1, sequence: 2); 
```

当然，如果将对象转换为您的实例，则参数名称会有所不同。

```
var concreteDao = (ActivityDao) dao;
concreteDao.GetAllSinceSequence(maxRecords: 1, sequence: 2); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-04T23:48:52.097

许多语言（如 C# 和 VB）支持[方法的命名参数和选项参数](http://msdn.microsoft.com/en-us/library/dd264739.aspx)。如果没有接口中的参数名称，就不可能使用命名参数和可选参数。命名参数也有助于读者理解接口的意图和功能。

# php - 将 mod_rewrite 与 XAMPP 和 windows 7 - 64 位一起使用？

> ID：12272731
> 
> 赞同：6
> 
> 时间：2012-09-04T23:42:35.670
> 
> 标签：php, apache, mod-rewrite, xampp

我有一个简单的 mod_rewrite 规则，它允许我将任何不是实际文件或目录的请求重定向到 index.php 文件

```
 Options +SymLinksIfOwnerMatch 
    RewriteEngine On 
    RewriteCond %{REQUEST_FILENAME} !-f 
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L] 
```

在 PHP 文件中，我放了这个简单的代码来处理这个导航

```
<?php
$navString = $_SERVER['REQUEST_URI']; // Returns "/Mod_rewrite/edit/1/"
$parts = explode('/', $navString); // Break into an array
// Lets look at the array of items we have:
print_r($parts);
?> 
```

我的开发环境是 XAMPP 和 Windows 7 - 64 位 httpd.conf 文件

```
<Directory />
    Options FollowSymLinks
    AllowOverride All
    Order deny,allow
    Deny from all
</Directory>

<Directory "C:/xampp/cgi-bin">
    AllowOverride All
    Options None
    Order allow,deny
    Allow from all
</Directory> 
```

我的问题是，例如，当我将任何变量传递给脚本时

```
http://locahost/test/somethinghere/andhere 
```

它将我重定向到本地主机默认页面，即

```
http://locahost/xampp 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-08-12T09:38:11.363

以下是有关如何在 xampp 中启用 .htaccess mod_rewrite 的说明。

1.  在文本编辑器中打开并编辑 C:\xampp\apache\conf\httpd.conf

2.  找到包含的行

    ```
    #LoadModule rewrite_module modules/mod_rewrite.so 
    ```

    和（取消注释）更改为

    ```
    LoadModule rewrite_module modules/mod_rewrite.so 
    ```

3.  查找所有出现的

    ```
    AllowOverride None 
    ```

    并更改为

    ```
    AllowOverride All 
    ```

4.  重启 xampp

就是这样，你应该好好去。

帮助： http: [//www.leonardaustin.com/blog/technical/enable-mod_rewrite-in-xampp/](http://www.leonardaustin.com/blog/technical/enable-mod_rewrite-in-xampp/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T00:32:21.117

解决了我刚刚将文件夹添加到 .htaccess 并删除 Options +SymLinksIfOwnerMatch

```
RewriteBase /test/ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-03T22:15:44.230

可以通过**httpd.conf**或**.htaccess**文件启用重写规则。
关于如何在 wamp/xampp中启用**.htaccess mod_rewrite的说明**

**步骤 1：**转到安装目录：
`C:\xampp>\apache\conf` 或`C:\wamp\bin\apache\Apache2.2.11\conf`
**步骤 2：**在文本编辑器中打开**httpd.conf**
**步骤 3：**找到包含的行 `#LoadModule rewrite_module modules/mod_rewrite.so`
**Step 4:** Remove (#) from使模块启用的行首
**第 5 步：**现在更改所有出现`AllowOverride None` 并替换为`AllowOverride All`
**第 6 步：**现在重新启动**wamp/xampp**服务器

# wordpress - Woocommerce 获得变化的产品价格

> ID：12272733
> 
> 赞同：24
> 
> 时间：2012-09-04T23:43:16.607
> 
> 标签：wordpress, woocommerce

我试图在变体下拉列表中显示产品变体价格。当您在下拉列表中选择变体时，我试图更改价格显示在 div 内的默认行为。

问题是我找不到那个 div 在哪里得到变化的价格。我搜索了所有 javascript 但找不到它

如果我使用：

```
add_filter('woocommerce_variation_option_name' ,'add_price_to_dropdown');

function add_price_to_dropdown($name){

    global $product;
    return $name.' '.$product->get_price_html();
} 
```

我只是得到所有选项的最小变化价格。我想得到每个变化的价格。有什么线索吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-05T21:26:27.747

这是您要查找的代码

```
add_filter( 'woocommerce_variation_option_name', 'display_price_in_variation_option_name' );

function display_price_in_variation_option_name( $term ) {
    global $wpdb, $product;

    if ( empty( $term ) ) return $term;
    if ( empty( $product->id ) ) return $term;

    $id = $product->get_id();

    $result = $wpdb->get_col( "SELECT slug FROM {$wpdb->prefix}terms WHERE name = '$term'" );

    $term_slug = ( !empty( $result ) ) ? $result[0] : $term;

    $query = "SELECT postmeta.post_id AS product_id
                FROM {$wpdb->prefix}postmeta AS postmeta
                    LEFT JOIN {$wpdb->prefix}posts AS products ON ( products.ID = postmeta.post_id )
                WHERE postmeta.meta_key LIKE 'attribute_%'
                    AND postmeta.meta_value = '$term_slug'
                    AND products.post_parent = $id";

    $variation_id = $wpdb->get_col( $query );

    $parent = wp_get_post_parent_id( $variation_id[0] );

    if ( $parent > 0 ) {
         $_product = new WC_Product_Variation( $variation_id[0] );
         return $term . ' (' . wp_kses( woocommerce_price( $_product->get_price() ), array() ) . ')';
    }
    return $term;

} 
```

希望这会有用。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-12-03T18:45:07.993

这可能对你们有帮助；在搜索如何对新版本的 WC 执行相同操作时：

```
global $woocommerce;
$product_variation = new WC_Product_Variation($_POST['variation_id']);
$regular_price = $product_variation->regular_price; 
```

我正在使用 ajax 并使用 post 方法传递变体的 ID。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-03-29T12:48:41.140

我的问题与 OP 完全相同，但我的情况有点不同。这是我的解决方案，它可能会帮助其他也登陆此页面的人。

```
function get_product_variation_price($variation_id) {
    $product = new WC_Product_Variation($variation_id);
    return $product->product_custom_fields['_price'][0];
} 
```

**WooCommerce 2.2.10 更新：** 上述代码不适用于当前版本的 WooCommerce。下面的这段代码可以工作并且值得考虑，因为它使用了 WooCommerce API，它避免了手动 SQL 查询并且非常简单......

```
/*
 * You can find the $variation_id in the Product page (go to Product Data > Variations, and it is shown with a preceeding "#" character)
 */
function get_product_variation_price($variation_id) {

    global $woocommerce; // Don't forget this!
    $product = new WC_Product_Variation($variation_id);
    //return $product->product_custom_fields['_price'][0]; // No longer works in new version of WooCommerce
    //return $product->get_price_html(); // Works. Use this if you want the formatted price
    return $product->get_price(); // Works. Use this if you want unformatted price

} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-17T05:41:51.277

我一直在 Woocommerce 上使用此代码来显示我的变体价格，当我更新到 Woocommerce 2.0 时，我注意到每当我编辑产品时 wp-admin/error-log 中都会出现数据库错误。我不确定在更新到 2.0 之前是否也发生了错误，因为我在更新之前很久没有使用 Woocommerce 并且认为我直到今天才检查错误日志。

变化价格按预期显示，但每次我打开产品进行编辑时，错误日志都会填满以下错误。与我正在编辑的产品相关的每个变体都有一个错误。

```
WordPress database error You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 8 for query SELECT postmeta.post_id AS product_id
            FROM wp_postmeta AS postmeta
                LEFT JOIN wp_posts AS products ON ( 

products.ID = postmeta.post_id )
            WHERE postmeta.meta_key LIKE 'attribute_%'
                AND postmeta.meta_value = '12'
                AND products.post_parent =  made by 

include('wp-admin/edit-form-advanced.php'), do_meta_boxes, call_user_func, woocommerce_product_data_box, do_action('woocommerce_product_write_panels'), call_user_func_array, variable_product_type_options, include('/plugins/woocommerce/admin/post-types/writepanels/variation-admin-html.php'), apply_filters('woocommerce_variation_option_name'), call_user_func_array, display_price_in_variation_option_name 
```

我在您的代码中更改了以下行： AND products.post_parent = $product->id"; 到此 AND products.post_parent = '$product->id' ";

现在，没有更多的错误。错误日志保持良好和空。

只是想分享以防其他人遇到问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-25T18:16:39.657

我对这个问题的看法，在最新的 Woocommerce 中工作：3.2.1（2017 年 10 月） **价格将显示在下拉列表的变化旁边。**

```
add_filter( 'woocommerce_variation_option_name', 'display_price_in_variation_option_name' );

function display_price_in_variation_option_name( $term ) {
    global $wpdb, $product;

    $result = $wpdb->get_col( "SELECT slug FROM {$wpdb->prefix}terms WHERE name = '$term'" );

    $term_slug = ( !empty( $result ) ) ? $result[0] : $term;

    $query = "SELECT postmeta.post_id AS product_id
                FROM {$wpdb->prefix}postmeta AS postmeta
                    LEFT JOIN {$wpdb->prefix}posts AS products ON ( products.ID = postmeta.post_id )
                WHERE postmeta.meta_key LIKE 'attribute_%'
                    AND postmeta.meta_value = '$term_slug'
                    AND products.post_parent = $product->id";

    $variation_id = $wpdb->get_col( $query );

    $parent = wp_get_post_parent_id( $variation_id[0] );

    if ( $parent > 0 ) {
        $_product = new WC_Product_Variation( $variation_id[0] );
        $_currency = get_woocommerce_currency_symbol();
        return $term . ' ('.$_currency.' '. $_product->get_price()  . ')';
    }
    return $term;

}
```

希望这个可以帮助某人。 **将此添加到您的子主题functions.php中**

# php - 日历日一日

> ID：12272742
> 
> 赞同：0
> 
> 时间：2012-09-04T23:44:05.567
> 
> 标签：php

是否会从这个论坛获得一些帮助，我已经设法让每周的日历正常运行。我注意到的唯一问题是所有的日子都是一天。周二的所有日子都显示为一周的开始

```
$display_week_ts = floor(time() / (3600 * 24)) * 3600 * 24;

$week_start = date('d-m-Y', $display_week_ts);
$week_number = date("W", $display_week_ts);
$year = date("Y", $display_week_ts);

for ($i = 0; $i < 7; $i++){
  $current_day_ts = $display_week_ts + ($i * 3600 *24);
  $daily_date = date('d-m-Y', $current_day_ts);
  $StartDate =  date('d', $current_day_ts);
  $MonthName = date('m', $current_day_ts);
  $Year = date('Y', $current_day_ts);
  echo $daily_date;
 } 
```

每周开始的日期 ($daily_date) 都是星期二，但当然它们必须是星期一（虽然我更喜欢星期天，但这不是危机）。

如果我回显 $week_start 似乎 $display_week_ts 是错误的。

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:59:46.977

`$display_week_ts`只是当前日期向下舍入。要获得一周的开始，您应该使用`strtotime("Monday midnight")`.

# php - 将函数返回的字符串作为代码执行

> ID：12272745
> 
> 赞同：0
> 
> 时间：2012-09-04T23:44:32.190
> 
> 标签：php, string, function, eval

我正在尝试创建一个用户定义的函数来查询我的数据库中的一个表，评估字段的数量，并将每个字段分配给一个变量。我已经能够做到这一点，但是当我实际上希望它作为代码执行时，返回的是一个仅显示为文本的字符串。

这是代码：

```
function query_function() { 
    $client_selected = "1";
    $name = "";
    $result = mysql_query("SELECT * FROM client_table WHERE client_id = '$client_selected'"); 
    $row = mysql_fetch_array($result);
    $num=mysql_num_fields($result);
    $i = 0;
    while ($i < $num) { 
        $name .= "$" . mysql_field_name($result, $i);
        $name .= " = $" . "row['" . mysql_field_name($result, $i) . "'];"; 
        $i++;
    } 
    return $name;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:47:52.710

只需：

```
extract(mysql_fetch_assoc($result), EXTR_SKIP); 
```

[http://php.net/manual/en/function.extract.php](http://php.net/manual/en/function.extract.php)

同样，您可以按照以下方式进行操作：

```
$name = mysql_field_name($result, $i);
$$name = $row[$name]; 
```

例如：

```
$row = array(
    'a' => 1,
    'b' => 2,
    'c' => 3,
);
extract($row, EXTR_SKIP);
var_dump($a, $b, $c);

$name = 'd';
$$name = 4;
var_dump($d); 
```

[http://codepad.org/yvW0G8xc](http://codepad.org/yvW0G8xc)

另请注意，这些`mysql_*`功能已弃用。您应该使用`mysqli`or `PDO`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T23:48:00.170

我相信你正在寻找的是[`eval()`](http://php.net/manual/en/function.eval.php)

但是，在使用 eval 时要非常小心。仅当您 100% 确定您的查询将哪些内容拉入`$name`变量时才使用它。

# php - 将选定的复选框值插入数据库

> ID：12272752
> 
> 赞同：0
> 
> 时间：2012-09-04T23:45:42.283
> 
> 标签：php

这部分代码很好，我没有看到任何问题，但我仍然无法将其插入数据库，出现以下消息。

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“检查（数量）值（'2'）”附近使用正确的语法

```
<?php
     if(isset($_POST['submit'])){
          $checkBox = $_POST['mycheck_box'];    
          for($i=0; $i< sizeof($checkBox); $i++){    
          echo $query = "INSERT INTO check (quantity) VALUES ('".$checkBox[$i]."')";
          echo "<br/>";
                        mysql_query($query) or die(mysql_error());
          }
       }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:54:21.553

尝试

```
$query = "INSERT INTO `check` (quantity) VALUES ('".$checkBox[$i]."')"; 
```

CHECK 是创建表时的 MySQL 关键字。

附带说明一下，在对数据库进行任何操作之前，您应该过滤从表单收到的任何 $_POST 值。

# yui - YUI3 - 为什么事件处理程序没有在 GET 请求上触发？

> ID：12272756
> 
> 赞同：0
> 
> 时间：2012-09-04T23:46:23.310
> 
> 标签：yui, yui3

我正在使用 YUI3 执行 GET 请求，但是当我尝试执行 GET 请求时事件处理程序没有触发。注释应该在每个事件处理程序中记录到控制台。这是我的代码：

```
YUI({ filter: 'raw' }).use("io-xdr", "substitute", "json-parse", "node", function(Y) {

  var url = "http://localhost:8000/scripts/test.php";

  var output = Y.one("#container");  

  var cfg = {
    method: "GET",
    xdr: {
      use: 'native'
    },  
    on: {
      start: handleStart,
      success: handleSuccess,
      failure: handleFailure,
    }
  };

  var handleStart = function(id, a) {
    output.set("innerHTML", "YES");
    console.log("Inside of handleStart");
    Y.log("a");
  };

  var handleSuccess = function(id, o, a) {
    var results = Y.JSON.parse(o.responseText);
    console.log(results.count);
    console.log(results);
    Y.log("b");
  };

  var handleFailure = function(id, o, a) {
    console.log("Inside of handleFailure");
    Y.log("c");
  };

  var obj = Y.io(
    url, cfg
  );

}); 
```

控制台中没有任何错误。网址是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T23:58:53.060

在定义 cfg 的地方声明您的处理程序。JavaScript 使用提升，因此变量在技术上将是“可用的”，尽管在您尝试使用它们的桥上未定义。

您可以看到这个 jsbin 显示功能有效：http: [//jsbin.com/owemib/1/edit](http://jsbin.com/owemib/1/edit)

虽然使用 CORS 它不起作用，但它至少可以记录！

# css - 定位div并排问题？

> ID：12272762
> 
> 赞同：0
> 
> 时间：2012-09-04T23:46:58.293
> 
> 标签：css, html

我正在尝试将这些 div 并排对齐，但不能。我该怎么做？

```
 <center>

    <div class="lgsn">

        <div class="login"></div>

        <div class="signup"></div>

    </div>

<center> 
```

和 CSS

```
.lgsn
{
    width: 100%;
    height: 100%; 
    position: fixed;
}

.login, .signup
{
    background-color: #000;
    width: 450px;
    height: 350px; 
    border-radius: 4px; 
    opacity: 0.50; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T01:21:04.850

`float:left|right|none|inherit;`有效，但你必须小心。除非您将其与`clear:both|left|right|none|inherit;`属性一起使用，否则这可能会很痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T02:29:05.537

你应该考虑的几件事。

1.  我建议摆脱那个`center`标签。它被贬低了并且违反了分离规则（保持简单......标记的语义和决策；CSS中的样式、颜色和字体）。作为中心标签的替代方案，您将希望`text-align: center;`在 CSS 端用作声明。请记住，`text-align: center;`将文本与其父级的中心对齐，因此如果显示父级`inline`，该解决方案仍将*居中*您的文本，但您不会注意到它的效果。换句话说，要在显示的`block`父项中居中文本，请使用`text-align: center;`. 要使显示元素的整体居中`div`（**注意**：居中*div* ...**而不是文本），请使用**`block``margin: 0 auto;`.
2.  您有多种选择如何获取显示`block`的元素并将它们并排放置。在大多数情况下，您最好的选择是使用`float`（另一个有时有用的选项是`display: inline-block`）。起初它可能看起来并不明显，因为学习的用途是浮动在杂志和新闻报纸上看到的图像以使文本环绕图像，但是，浮动 div*可以将*一个 div 包裹在另一个 div 周围。的值`float`可以是`left`、`right`或`inherit`默认值`none`。
3.  记住 a 的`float`实际作用也非常重要。它使事情**包装起来**。这意味着当您开始注意到浮动 div 的“奇怪”行为时，那是因为您忘记了浏览器对浮动的看法。（IE，浏览器正在包装您不打算包装的东西，例如浮动应用的 div 下方的 div 或块）通常，这很好地表明您的浮动必须是`cleared`. 为此，您使用语法`clear: both`. `both`（替代`right`或者`left`如果您只想清除右侧的浮点数或左侧的浮点数）应用于通常为空的（它确实不需要为空，但似乎这样做已成为惯例) 元素放置在需要的地方。`clear``left`, `right`,或. `none`_`inherit``both`

## 好资源。

建议您使用以下资源进一步深入了解浮点数的真正功能。请花点时间浏览以下链接。

*   [http://css-tricks.com/all-about-floats/](http://css-tricks.com/all-about-floats/)
*   (TLDR:) [http://css-tricks.com/video-screencasts/42-all-about-floats-screencast/](http://css-tricks.com/video-screencasts/42-all-about-floats-screencast/)
*   [https://developer.mozilla.org/en-US/docs/CSS/float](https://developer.mozilla.org/en-US/docs/CSS/float)
*   在此页面的乘车方面，有大量与浮动相关的问题。在发布浮动问题之前花点时间查看它们，它之前可能已经被覆盖过。

# c# - C# 中的 WebRequest/WebResponse 阻塞

> ID：12272765
> 
> 赞同：1
> 
> 时间：2012-09-04T23:47:20.140
> 
> 标签：c#, .net, tcp

我正在尝试从 C# 本地触发信号。目标是向 localhost/serv?stream=SOME_STREAM 发出请求。我不在乎从服务器获得响应，我只需要让服务器接收请求。现在我正在使用以下代码，尽管我并不真正关心使用这些对象——任何解决方案都可以：

```
 private void updateStreams(string streamname)
    {
        WebRequest myWebRequest = WebRequest.Create(new Uri("http://localhost/serv?stream=" + streamname));
        WebResponse myWebResponse = myWebRequest.GetResponse();
        myWebResponse.Close();
    } 
```

我尝试了一些调试，阻塞调用似乎是 myWebRequest.GetResponse()，但这一行很关键，因为没有它就不会发出请求。我还尝试了以下代码，它们在同一点阻塞：

```
 var myWebRequest = (System.Net.HttpWebRequest)WebRequest.Create(new Uri("http://localhost/serv?stream=" + sesh.session_name));
        using (var myWebResponse = (System.Net.HttpWebResponse)myWebRequest.GetResponse())
        {
            var responseStream = myWebResponse.GetResponseStream();
            responseStream.ReadTimeout = 2; 
            responseStream.Close();
            responseStream.Dispose();
            myWebResponse.Close();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:52:29.650

你可以`WebClient.DownloadStringAsync()`这样使用：

```
WebClient wc = new WebClient();
wc.DownloadStringCompleted += new  DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);
wc.DownloadStringAsync(new Uri("http://localhost/serv?stream=" + streamname)); 
```

这将触发请求并`wc_DownloadStringCompleted`在请求完成时调用该方法，而不会阻塞主线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T23:59:25.267

如果您只是不希望代码阻塞并且正在使用 .Net 4.5，请尝试使用[WebRequest.GetResponseAsync()](http://msdn.microsoft.com/en-us/library/system.net.webrequest.getresponseasync.aspx)或早期版本的框架中的[WebRequest.BeginGetResponse() 。](http://msdn.microsoft.com/en-us/library/system.net.webrequest.begingetrequeststream)

# javascript - 使用淡入淡出转换更改背景图像

> ID：12272766
> 
> 赞同：1
> 
> 时间：2012-09-04T23:47:32.263
> 
> 标签：javascript, background, fade, transition, rollover

我为我的网站设置了一个非常基本的启动页面。使用 Javascript 我已经设置了它，因此当用户将鼠标悬停在输入站点链接上时，正文背景会发生变化。我现在要做的是在转换之间添加一个淡入淡出过渡（此时它只是跳跃）

这是我下面的脚本

```
<!--

var backImage = new Array(); 
backImage[0] = "splashbackground.jpg";
backImage[1] = "backgroun3.jpg";

function setBackground() { <!--sets the default background for the page//-->
  if (document.body) {
  document.body.style.backgroundImage = 'url("splashbackground.jpg")';
 }
}
function changeBGImage(whichImage){ <!--fist background change onMouseOver event//-->
  if (document.body){
  document.body.style.backgroundImage = 'url("backgroun3.jpg")';

}
}

function changeBGImage2(whichImage){<!-- changes background back onMouseOut event//-->
if (document.body){
document.body.style.backgroundImage = 'url("splashbackground.jpg")';

}
} 
```

# python - PyQt - 加载多个 UI 文件

> ID：12272767
> 
> 赞同：1
> 
> 时间：2012-09-04T23:47:37.677
> 
> 标签：python, qt4, pyqt, maya

我有多个 ui 文件，每个文件都是在 Qt Designer 中创建的。我有一个调用第一个 UI 的函数（main）。第一个 UI 上有一个按钮，它调用第二个 UI 并关闭第一个。

```
from PyQt4 import QtGui,QtCore, uic

uifile_1 = '/Users/Shared/Autodesk/maya/scripts/python/Intro_UI.ui'
form_1, base_1 = uic.loadUiType(uifile_1)

uifile_2 = '/Users/Shared/Autodesk/maya/scripts/python/objtemplate_tuner.ui'
form_2, base_2 = uic.loadUiType(uifile_2)

class CreateUI_2(base_2, form_2):
    def __init__(self):
        super(base_2,self).__init__()
        self.setupUi(self)

class CreateUI_1(base_1, form_1):
    def __init__(self):
        super(base_1,self).__init__()
        self.setupUi(self)
        self.Establish_Connections()

    def Do_ButtonPress(self):        
        UI_2=CreateUI_2()
        UI_2.show()
        self.close()
    def Establish_Connections(self):
        QtCore.QObject.connect(self.noncharactermeshes_Button, QtCore.SIGNAL("clicked()"),self.Do_ButtonPress)      

def main():       
    UI_1 = CreateUI_1()
    UI_1.show()

main() 
```

问题是当我运行 main() 时没有任何反应。另请注意，我正在为 Maya 创建此脚本并使用 PyQt4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:50:56.850

我找到了答案，原来我需要为我的 ui 使用全局变量。

```
 def Do_ButtonPress(self):
        global UI_2
        UI_2=CreateUI_2()
        UI_2.show() 
```

...

```
def main():
    global UI_1
    UI_1 = CreateUI_1()
    UI_1.show() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T00:05:11.920

根据您的 Maya 版本，Qt 可能已经或可能尚未作为应用程序运行。

Autodesk 几年前开始将 Qt 引入他们的软件，而最新的 Maya 几乎完全由 Qt 驱动。

从您可以运行代码而不会崩溃的事实来看，我假设 QApplication 已经存在于引擎盖下的某个地方。重要的是要注意，如果不首先创建 QApplication，就不能创建任何 QtGui 组件（嗯，QPaintDevice 的 - 所以 QWidget、QDialog、QMainWindow 等），否则会崩溃。

您没有看到任何内容的事实意味着您处于使用 Qt（并初始化 QApplication）但未运行其事件循环的 Maya 版本中 - 或者存在育儿问题。

我首先将您的主要功能切换为如下所示：

```
def main():
    app = None
    # there needs to be 1 and only 1 application instance
    if ( not QtGui.QApplication.instance() ):
        app = QtGui.QApplication([])

    UI_1 = CreateUI_1()
    UI_1.show()

    # see if you can parent to a window (maya)
    UI_1.setParent(QtGui.QApplication.activeWindow()) 
```

如果这不起作用，那么您将需要在 Maya 的事件循环中更新 Qt 事件循环。我不记得它的语法......但最终你将需要使用 Maya 的回调系统来更新 Qt 事件：

```
 QtGui.QApplication.instance().processEvents() 
```

# trigger.io - trigger.io - 未调用 forge.geolocation.getCurrentPosition()

> ID：12272771
> 
> 赞同：1
> 
> 时间：2012-09-04T23:48:07.970
> 
> 标签：trigger.io

我使用工具包 trigger.io 来开发我的应用程序，现在我需要用户的当前位置。因此，我想使用 forge.geolocation.getCurrentPosition 方法，不幸的是它不起作用。我在 pageinit 事件中调用它，如下所示：

```
 $(document).bind('pageinit',function(event){
 forge.geolocation.getCurrentPosition(function(position) {
        alert("ok");    
      }, function(error) {
      alert("error");   
     });
 }); 
```

不幸的是，我总是收到一条错误消息。

非常感谢任何帮助。

谢谢，

安内

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:45:27.137

所以问题是 getCurrentPosition() 可以在真实设备上工作，但不能在模拟器上工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T23:06:04.497

您需要重置您的位置服务，因为从您上面的评论来看，您似乎在某个时候禁用了它。该线程将有助于：

[重新启用 iPhone Simulator 定位服务](https://stackoverflow.com/questions/3337569/re-enable-iphone-simulator-location-services)

# javascript - Javascript 下拉框

> ID：12272773
> 
> 赞同：0
> 
> 时间：2012-09-04T23:48:22.083
> 
> 标签：javascript, php, html, client-side, jquery-events

我正在为一个网站创建一个注册页面，并在一个下拉框中进行编码，告诉用户我们为什么需要生日。出于某种原因，我的代码无法正常工作。

这是代码：

```
<script language="javascript" type="text/javascript">
function toggleSlideBox(x) {
        if ($('#'+x).is(":hidden")) {
            $('#'+x).slideDown(300);
        } else {
            $('#'+x).slideUp(300);
        }
}
</script> 
```

这是HTML代码：

```
<a href="#" class="mouseover" onclick="return false" onmousedown="javascript:toggleSlideBox('why');">why?</a>
          <div id="why" style="background-color:#E6F5FF; border:#999 1px solid; padding:12px; display:none; margin-top:8px;"> Sometime down the road we may offer content that is only suitable for people over 18\. We require this information to check your age. <br />
            <br />
            We can also use this information to alert your friends to when your birthday is. </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:52:03.427

您是否将脚本放置在 的位置下方`<a>`？如果没有，您需要确保`a`在脚本开始之前加载标签。尝试将此添加到您的脚本中：

```
<script language="javascript" type="text/javascript">
function toggleSlideBox(x) {

  $(document).ready(function(){      // ADD THIS

    if ($('#'+x).is(":hidden")) {
            $('#'+x).slideDown(300);
        } else {
            $('#'+x).slideUp(300);
        }
    }

  });                                // ADD THIS

</script> 
```

## 还要确保在运行脚本之前已包含 jQuery 库...

# linux - 如何/在哪里可以找到要修复的 Linux 内核错误？

> ID：12272778
> 
> 赞同：39
> 
> 时间：2012-09-04T23:48:59.353
> 
> 标签：linux, kernel, patch

我试图找到需要在 Linux 内核中修复的错误，但我不知道去哪里找。我在 Youtube 上观看了 Greg Kroah-Hartman 的视频“如何提交你的第一个 Linux 内核补丁”，但他并没有真正提到在哪里可以找到需要修复的错误。

在视频中，他简要提到了邮件列表并查看了内核代码中的 TODO。有谁知道我在哪里可以加入邮件列表？另外，我找到了内核 Bugzilla，但根据 Kernel.org，那里只列出了 2.6 的错误。我实际上注册了，但是我是否只是在那里找到了一个我感兴趣的错误并尝试修复它，如果它尚未在最新内核上修复？如果它已经分配给某人，这有关系吗？

如果我能找到一个列出所有现有 bug 列表的站点，那就太好了，然后我可以寻找低优先级和低严重性的东西。我真的在寻找一个相对容易修复的错误，这样我就可以学习绳索并努力向上。

任何人的任何建议、输入、要阅读的网站等都将不胜感激。感谢您阅读/回答。=)

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-06T06:59:27.620

1\. 是的，你是对的，其中一个地方就是[内核错误跟踪器](https://bugzilla.kernel.org/query.cgi?format=advanced)。

搜索 Linux 内核邮件列表以及与子系统相关的邮件列表也可能会有所帮助，但可能更困难。

2\. 主要内核邮件列表在[这里](http://vger.kernel.org/vger-lists.html#linux-kernel)。您可以在那里找到订阅说明。

3\. 在内核文档中还有一个关于为 Linux 内核和一般开发过程做出贡献的非常有用的信息：请参阅[Documentation/development-process](http://www.mjmwired.net/kernel/Documentation/development-process/)。

4\. 如果已经分配了一个错误，这并不总是意味着受让人实际上很快就会着手处理它。这可能意味着他（她）只负责一个特定的子系统。所以，我想，如果你找到了你想自己修复的分配的错误，你可以联系这个错误当前分配给的人并提供你的帮助。如果使用邮件列表地址而不是受让人的个人电子邮件地址，您可以写信到该邮件列表，询问是否有人已经在处理该错误，然后再次提供您的帮助。

5\. 查看错误是否已修复的方法之一是尝试在报告的内核和特定子系统的最新内核变体上重现它。它并不总是那么容易，但对于让您进入开发过程仍然非常有用。

# javascript - javascript中的字符串搜索无法找到当前字符串

> ID：12272781
> 
> 赞同：0
> 
> 时间：2012-09-04T23:49:31.413
> 
> 标签：javascript, string, parsing

这有效：

```
var str ='<input id="a_49519498" type="radio" name="answers[10903336]" value="49519498" />cat,dog       ';

if(str.search('cat,dog')!=-1)
    {
    alert("found ");
    } 
```

虽然这不是：

```
var str ='<input id="a_49519498" type="radio" name="answers[10903336]" value="49519498" />Rock (Foreigner, Nickelback, etc...)       ';

if(str.search('Rock (Foreigner, Nickelback, etc...)')!=-1)
    {
    alert("found ");
    } 
```

我猜这与存在的括号有关

> （外国人、Nickelback 等……）

为什么 JavaScript 找不到这个字符串？我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T23:54:41.833

似乎[`.search` *^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/search)将参数转换为正则表达式：

> 如果传递了一个非 RegExp 对象`obj`，它会`RegExp`通过使用隐式转换为 a `new RegExp(obj)`。

然后括号被解释为捕获组，而不是字面意思。

看来您不想使用正则表达式，所以您可以使用[`.indexOf` *^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf)代替：

```
if(str.indexOf('Rock (Foreigner, Nickelback, etc...)') != -1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T23:54:20.223

您需要在括号前添加转义符，通常是 1 个括号，但在这种情况下`()`创建一个**组**，所以我们需要使用`\\`两个。

```
\\(
\\)

str.search('Rock \\(Foreigner, Nickelback, etc...\\)') 
```

[jsFiddle 演示](http://jsfiddle.net/Wevtk/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T23:55:28.277

`String.search`搜索正则表达式，而不是字符串文字（请参阅[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/search](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/search)）。只需转义括号：

```
str.search('Rock \\(Foreigner, Nickelback, etc...\\)' 
```

# objective-c - 当一个块在执行过程中设置为 nil 时会发生什么？

> ID：12272783
> 
> 赞同：5
> 
> 时间：2012-09-04T23:49:53.580
> 
> 标签：objective-c, automatic-ref-counting, objective-c-blocks

假设我有一个对块有强引用的对象。在该块执行期间的某个时间，强引用设置为 nil。该块是否保证完成其执行，或者这会导致崩溃？我见过 exc-bad-access 错误，但我无法可靠地生成它们，所以我不知道它们为什么会弹出。

例如：

```
-(void)method
{
    self.block = ^{
        //code
        self.block = nil;
        //more code - crash here?
    }
}

-(void)otherMethod
{
    block();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-25T14:54:22.813

我相信我终于对这个问题有了一个满意的答案。请注意，这都是在 ARC 的上下文中。

块可以在其执行期间被释放。该块将继续正常执行，但其任何指向捕获变量的指针都变得可疑（并且具有潜在危险）。

假设 ObjectA 有一个名为 completion 的块复制属性：

```
@property (nonatomic, copy) void (^completion)(); 
```

...作业看起来像这样：

```
__weak ObjectA * weakSelf = self;
self.completion = ^{
    weakSelf.completion = nil;
    [weakSelf doSomethingElse];
}; 
```

如果块被这样调用......

```
-(void)method
{
    _completion(); //directly uses ObjectA's instance of the block
} 
```

...然后，假设没有其他任何东西引用该块的此实例，它会被释放，并且其捕获的变量 weakSelf 变为 nil。doSomethingElse 永远不会被调用。解决这个问题的最好方法是使用它的访问器简单地调用块——这将在堆栈上分配一个新副本。原始副本将被释放，但新副本及其所有捕获的变量将在当前上下文中继续存在。

```
-(void)method
{
    self.completion(); //uses new copy of the block
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T00:42:24.540

这些文件似乎不能保证在执行时会保留一个块。相反，诸如 GCD 调用的文档`dispatch_async`确实做出了这样的保证。由此看来，您似乎不能假设对块的普通调用会保留它。

所以在你的代码中你可能想要：

```
-(void)otherMethod
{
    dispatch_block_t localBlock = Block_copy(block);
    localBlock();
    Block_release(localBlock);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T23:57:54.170

当执行块的方法没有首先检查是否仍然存在对块的引用时，可能会发生崩溃。您可能已经在方法中遇到了这些崩溃，因为缺少这样的检查。

```
- (void)methodWithBlock:(void (^)(void))block
{
   if (block) // this check is to prevent crashes when calling to a released block pointer ...
   {
      block();
   }
} 
```

您可能遇到过缺少此类检查的代码，这可能会导致您遇到崩溃。我当然也有同样的经历。

# regex - 执行任意正则表达式的安全性

> ID：12272784
> 
> 赞同：1
> 
> 时间：2012-09-04T23:50:03.553
> 
> 标签：regex, security

我真的想不出，但是允许用户运行任意正则表达式会不会有恶意？

例如，假设我有一个网站，人们可以在其中试用一段文本的正则表达式——有什么我必须以与 SQL 语句相同的方式“清理”的内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T00:12:35.803

一些正则表达式的计算可能非常复杂和/或需要大量内存，并且运行其中的许多可能会降低性能或导致拒绝服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T23:57:10.940

Perl 正则表达式可以执行任意代码片段。即使没有该功能，恶意正则表达式也可能会耗尽服务器上的所有 CPU/RAM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:34:55.257

[https://www.owasp.org/index.php/Regular_expression_Denial_of_Service_-_ReDoS](https://www.owasp.org/index.php/Regular_expression_Denial_of_Service_-_ReDoS)

# python - Python：将列表写入文本文件并显示为列表

> ID：12272786
> 
> 赞同：0
> 
> 时间：2012-09-04T23:50:50.323
> 
> 标签：python

[在“A byte of Python”](http://www.swaroopch.org/notes/Python)的帮助下，我刚开始用 Python编程，这个网站对我帮助很大。我的任务是找出一串日语单词中的所有[平假名符号。](http://en.wikipedia.org/wiki/Hiragana)输出应该是一个文本文件，其中所有平假名序列都堆叠在一个列表中。给我的是以下代码：

```
# -*- coding: utf-8 -*-
import re
import codecs  

prompt = unicode('alotofjapanesesymbols')
out = codecs.open("output.txt", "w", "utf-8")

#Japanese uses 4 major writing systems that are intermixed in Japanese texts.
#Your task is to find all connected sequences of Hiragana symbols in the
# "prompt" Unicode string above and write them out into separate lines
# using the file handle "out".
# The result should be 40 lines looking like this (excluding the # symbol):
#な
#や
#に
#されている
#はその
Etc. 
```

到目前为止，我来到了这个：

```
# -*- coding: utf-8 -*-

import re
import codecs

s = '受信可能な放送局や、リストに登録されている放送局はその放送局の名前をお使いいただけます 例えばFMヨコハマが受信可能な場合放送局FMヨコハマと言うことでFMヨコハマをお聞きいただけます アドレス帳の検索は音声コマンド登録先を検索のあとに登録されているお名前をお話しください アドレス帳に登録されている方に電話をするときは例えばアドレス帳の鈴木太郎に電話するとお話しください 音声コマンドが認識されにくい場合は同じコマンドを繰り返すかヘルプシステムをご利用ください'

m = re.findall(u'[\u3040-\u309F]', s.decode('utf-8')) # Using regular expressions findall function and unicode of all Hiragana symbols to find them. 

# for char in m:                     
#     print char, hex(ord(char))  # For every character in m, print the character and its unicode using the ord function (unicode is hexadecimal). This is not relevant, but it showed me that i am on the right way.

out = codecs.open( 'output.txt', 'w', 'utf-8' ) 
for char in m:
    out.write(char)
else: 
    out.close()         # Write the Hiragana symbols to a text file as long as there are characters in m, else close file. 
```

最困难的是整个 unicode-utf-8-encoding-decoding 部分，但我喜欢使用 re.findall 函数和平假名的 unicode 找到平假名符号后的感觉。我现在面临的问题是，我有一个包含所有符号的文本文件，但它们显示在字符串中而不是列表中。我做错了什么，你能帮帮我吗？我已经经历了几个主题，但这对我没有帮助。感谢您在本网站上给我的帮助。

扎瓦蓬加

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T00:20:15.283

编写时编码为 JSON。

```
json.dump(m, out) 
```

此外，[使用`unicode`文字](http://farmdev.com/talks/unicode/)以避免解码。

```
chars = u'あいうえお' 
```

# php - php中的空函数无法正常工作

> ID：12272787
> 
> 赞同：1
> 
> 时间：2012-09-04T23:50:55.317
> 
> 标签：php

您好，由于某种原因，我无法让我的程序查看我的文件是否为空，如果选择了某些内容，它不应该通过，但它是。这是代码

```
if (empty($_FILES['file'] ) )
    {
        echo "testing";
        $seterror =1;
        returnBack();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T00:15:18.733

从您在评论中提供的 var_dump($_FILES) 看来，它似乎没有回显“测试”（即它不起作用），因为 $_FILE['file'] 不为空。

根据您提供给我的内容：

$_FILES['file'] = array(5) { ["name"]=> string(0) "" ["type"]=> string(0) "" ["tmp_name"]=> string(0) "" ["错误"]=> int(4) ["size"]=> int(0) }

我不完全确定 empty() 如何处理数组（[文档](http://www.php.net/manual/en/function.empty.php)只是说它将为空数组返回 true），但至少你需要摆脱 $_FILES['file'][' error'] （它不是空的，因为它是一个 int(4)），或者使用 empty() 来检查类似 $_FILES['file']['name']

因此，使用我的建议，代码如下所示：

```
if (empty($_FILES['file']['name'])) {
    echo "testing";
    $seterror = 1;
    returnBack();    
} 
```

或者（因为我对 PHP 数组的理解可能有问题），试试这个：

```
if(empty($_FILES['file']['name'])) {
    echo "testing";
    $seterror = 1;
    returnBack();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T23:55:49.433

如果你输出文件数组，你会得到什么？（即`print_r($_FILES);`）

您的代码不会告诉您调用的文件的内容是否`file`为空，它会告诉您的值是否`$_FILES['file']`为空，这可能不是您想要的。你也可能不想要这样的逻辑`empty`——你试过这个看看是否有区别吗？

```
if (array_key_exists('file', $_FILES)) {
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T00:15:16.020

我想你可以试试这个

```
if(empty($_FILES['file']['name']))
{
    // not uploaded
}
else
{
    // uploded
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T00:23:34.730

PHP 中的语言结构`empty()`和数组不能很好地混合。此外，如果您`<input type='file' name='file' />`的表单中有 a，您*将*获得一个`$_FILES[]`数组。你应该做`if( !array_key_exists('file', $_FILES) ) { // no file uploaded }`的开始。

实际上，您应该进行几项检查：

*   如果`file`元素被填充`$_FILES`
*   如果没有错误（即`$_FILES['file']['error']`== 0）
*   如果上传文件的临时位置有文件名
*   如果 PHP 认为它是一个上传的文件和/或它可以移动它

只有*所有*这些都是真实的，您才有要处理的文件。否则你不会。

我发现在文件上传处理程序上认真执行这些步骤是完全可靠的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T00:01:13.740

如果您正在测试空文件，这里是代码

```
$file = 'test.txt';

if(filesize($file) == NULL) {
    echo "empty"; 
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T00:35:08.630

好的，所以我必须做的是检查它是否出错 - 所以如果它出错了，它就不会通过，因为这意味着它是空的

代码：

```
if (!empty($_FILES['file']['error'] ) )
    {

        echo "file";
        $seterror =1;
        returnBack();

    } 
```

非常感谢你们的帮助！

# java - Android：每次我想登录时都打开文件资源吗

> ID：12272788
> 
> 赞同：4
> 
> 时间：2012-09-04T23:51:02.863
> 
> 标签：java, android, file-io

我正在通过写入文件在android中做我自己的记录器。目前，我调用打开文件并向其附加字符串的函数。但是，我在某处读到，每次登录时打开文件都过分（操作繁重）。这是真的？这里有什么替代方案？我应该打开一个文件，让它在应用程序期间保持打开状态并附加到它上面吗？或者你有什么建议？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T00:40:17.240

这取决于您正在执行多少日志记录 - 每秒有多少日志，大约有多少数据，日志的重要性等。如果您每分钟只将某些内容放入文件中，那么只要它是没有发生在主线程上并减慢其他东西的速度，你可能没问题。如果您确实需要实现更高效的东西，您可能想尝试一些简单的缓存。

您可以保留日志数据的内存缓存，并在达到一定大小（每 100 行）或经过一定时间（每 5 分钟）时将其保存到文件中。

如果您采用这种方法，请记住覆盖 onPause 和 onDestroy 并确保在离开应用程序之前将缓存的日志数据写入文件，以防用户不回来。

# java - Java ME 通过网络通知推送技术

> ID：12272791
> 
> 赞同：1
> 
> 时间：2012-09-04T23:51:45.550
> 
> 标签：java, java-me, push-notification, midp

有没有什么方法可以在 Java ME 中实现推送技术，即没有 SMS？

我知道基于流/基于网络的通知是解决方案，但是如何配置将通知发送到客户端的服务器？我们如何获取要发送通知的收件人（客户）地址？

有一个 SMS 教程[https://www.ibm.com/developerworks/java/tutorials/wi-midpreg/](https://www.ibm.com/developerworks/java/tutorials/wi-midpreg/)但我需要通过 http 实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:58:28.200

> 我们如何获取要发送通知的收件人（客户）地址？

这就是事情通常的运作方式。当电话不使用数据服务时，它没有 IP 地址。当手机请求数据时，它将接收一个动态 IP 地址并在数据通道处于活动状态时保留该地址。该地址在电信网络中是唯一的，并且代理将使其与互联网的其余部分一起使用。

您可以使用的一种方法是在应用程序和服务器之间建立永久套接字连接，但这不能很好地扩展。

我的看法？如果你让它与 SMS 一起工作，用它来唤醒你的应用程序，然后让你的应用程序打开与服务器的连接并下载它需要的数据。有些手机甚至允许应用程序在没有 UI 的情况下运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T05:44:17.770

不幸的是，没有标准的方式来推送所有 j2me。

由于无法为所有 j2me 提供后台应用程序/进程，因此您自己也很难实现。

他们现在正在推动诺基亚“NNA”的解决方案。但这仅适用于某些最新的操作系统版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T05:51:39.203

PushRegistry API 文档（[可在线获取](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/io/PushRegistry.html)）不限于 SMS。

特别是，数据报和套接字被明确列为示例：

> ### 示例描述符文件声明性表示法
> 
> 以下是一个示例描述符文件条目，它将在端口 79 保留一个流套接字，并在端口 50000 保留一个数据报连接。（端口号由 IANA 维护，涵盖众所周知的、用户注册的和动态端口号）[参见[IANA 端口号码登记](http://www.iana.org/numbers.html#P)]
> 
> ```
> MIDlet-Push-1: socket://:79, com.sun.example.SampleChat, *
> MIDlet-Push-2: datagram://:50000, com.sun.example.SampleChat, * 
> ```

请注意，MIDP 2 规范声明特定协议支持是可选的，是否为 MIDlet 启用它取决于实现：

> ### 连接与推送注册支持
> 
> 并非所有通用连接都适合用作推送应用程序传输。即使设备上支持作为入站连接类型的协议，也不需要将其启用为有效的推送机制。例如，平台可能支持 a 中的服务器套接字连接`MIDlet`，但可能不支持用于推送启动功能的入站套接字连接。当平台不支持该可选功能时，从方法和方法`ConnectionNotFoundException`中抛出A。`registerConnection``registerAlarm`

# javascript - Sombody 在 wordpress 网站中注入了一些链接。可能是什么起源？它是怎么发生的？

> ID：12272793
> 
> 赞同：3
> 
> 时间：2012-09-04T23:52:02.507
> 
> 标签：javascript, css, wordpress, security, code-injection

我的一个网站（maximumsportperformance.com）在顶部有这个脚本：

```
<div onmousemove="this.style.display='block'" id=xtg style="DISPLAY: none" onmouseout="this.style.display='none'"> <a href="http://www.watcheslaw.com/">replica watches</a>  <a href="http://www.penwatches.org/">fake watches</a>   <a href="http://www.watcheslaw.com/">replica watches</a><a href="http://www.penwatches.org/">fake watches</a </div> 
```

我试图找到来源，但在页眉、页脚或任何插件以及主题文件中找不到任何内容。

另一件事是，由于我备份了数据库并在主机上重新安装了 WP，因此该脚本仅显示在 IE 的源代码中，但未显示在 Mozilla 的 Firebug 中。

我用谷歌搜索了同样的问题，发现这些网站有同样的问题

法律网

webdeveloper.net.au

hyderalaska.com

所有网站都有相同类型的链接，用 js 包裹在 div 中。

请帮助我找到保护它免受未来威胁的缺陷和漏洞。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T04:29:54.660

尝试提高他们的谷歌排名是一个相当聪明的技巧。幸运的是，如果这就是剩下的一切，那么除了破坏您的一些 SEO 工作之外，它对您的用户相对无害。

就我个人而言，我会去焦土。一旦有人闯入，就无法知道他们是否在某个地方留下了后门，以便日后再次进入*

重新开始，从他们的在线资源重新安装插件，恢复内容。然后，执行本指南中的步骤，以加强安装以抵御像这样的进一步攻击：http: [//codex.wordpress.org/Hardening_WordPress](http://codex.wordpress.org/Hardening_WordPress)

* 好的，所以实际上有一些方法可以知道文件是否使用加密哈希进行了修改。甚至 NSA 赞助的一个不错的 Linux 实用程序会执行此操作并吐出有关更改的报告。然而，这需要照顾和喂养，所以这可能不是很好地利用你的时间。

# javascript - 为什么 pushstate 不保存 dom 状态？

> ID：12272794
> 
> 赞同：0
> 
> 时间：2012-09-04T23:52:07.153
> 
> 标签：javascript, pushstate

有人可以解释为什么 pushstate 不会导致 dom 状态被保存吗？

例如。我转到一个页面，单击一个导致 pushstate 的链接，我导航到一个完全不同的页面（没有 pushstate）并点击后退按钮。我希望看到 dom post pushstate，而不是看到原始渲染的 dom。这不是更符合更改 URL 的实际作用吗？

我知道在大多数情况下，人们正在构建使用 JSON 数据 + 客户端渲染的 Web 应用程序，所以通常没关系，但为什么不保存 dom 状态？

# jquery - 当我尝试打印使用 jQuery Mobile 创建的页面时，它总是会打印一个额外的空白页面。我怎样才能阻止这个？

> ID：12272797
> 
> 赞同：2
> 
> 时间：2012-09-04T23:52:37.717
> 
> 标签：jquery, css, jquery-mobile, printing

当我尝试打印使用 jQuery Mobile 创建的页面时，所有页面都打印得很好，但总是有 1 个额外的页面打印，除了“正在加载”这个词之外什么都没有。我认为它可以通过使用 CSS 来隐藏，所以我创建了一个打印样式表并在其中添加了以下内容：

```
.ui-loading,
.ui-icon-loading,
.ui-loading .ui-loader,
.ui-loader,
.ui-loader-default,
.ui-loader-verbose,
.ui-loader-default,
.ui-loader-verbose,
.ui-loader .ui-icon,
.ui-loader-verbose,
.ui-loader-textonly,
.ui-loader-textonly,
.ui-loader-fakefix {
    display:none;
} 
```

这可以隐藏“正在加载”这个词，但是现在，仍然会创建“加载”这个词所在的额外页面。所以每当我打印页面时，总会有一个额外的页面打印空白，无论第一页上的文字有多少。

关于如何阻止这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:18:10.500

这与 CSS 或 jQuery Mobile 无关。这是由我正在调用的另一个 jQuery 插件引起的。删除了对该插件的调用，现在一切正常。

# jquery - JQuery UI CSS样式表不起作用

> ID：12272800
> 
> 赞同：0
> 
> 时间：2012-09-04T23:53:24.063
> 
> 标签：jquery, css, jquery-ui

不管我做什么，CSS 样式表都不起作用。我已经尝试了几天没有运气。即使我下载了一个演示，有些样式也不起作用。看这里：

[http://i.imgur.com/DsgMK.png](http://i.imgur.com/DsgMK.png)（在 Chrome 和 Firefox 中测试）

因此，我使用 Google 的 CDN 制作了这个测试代码，希望其他人可以看到我做错了什么。

```
<html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<head>
    <meta http-equiv="content-type" content="text-html; charset=utf-8" />
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/themes/sunny/jquery-ui.css" type="text/css" />
    <title>JQuery UI Test</title>
</head>
<body>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js" type="text/javascript"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js" type="text/javascript"></script>
<script type="text/javascript">
</script>

    <!-- Accordion -->
    <h2 class="demoHeaders">Accordion</h2>
    <div id="accordion">
        <div>
            <h3><a href="#">First</a></h3>
            <div>Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet.</div>
        </div>
        <div>
            <h3><a href="#">Second</a></h3>
            <div>Phasellus mattis tincidunt nibh.</div>
        </div>
        <div>
            <h3><a href="#">Third</a></h3>
            <div>Nam dui erat, auctor a, dignissim quis.</div>
        </div>
    </div>

    <!-- Button -->
    <h2 class="demoHeaders">Button</h2>
    <button id="button">A button element</button>
    <form style="margin-top: 1em;">
        <div id="radioset">
            <input type="radio" id="radio1" name="radio" /><label for="radio1">Choice 1</label>
            <input type="radio" id="radio2" name="radio" checked="checked" /><label for="radio2">Choice 2</label>
            <input type="radio" id="radio3" name="radio" /><label for="radio3">Choice 3</label>
        </div>
    </form>

</body>
</html> 
```

这是我从上面的代码中得到的：http: [//i.imgur.com/j09RY.png](http://i.imgur.com/j09RY.png)

我认为这应该很简单，但我一定做错了什么。非常感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T00:06:14.667

要创建任何 jQuery UI 元素，您必须编写 JavaScript 代码来创建它们。

像这样的东西：

```
<script type="text/javascript">
    $(function() {
        $("#accordion").accordion();
        $("#button").button();
    });
</script> 
```

查看 jQuery UI 的文档以获取更多信息：http: [//jqueryui.com/demos/](http://jqueryui.com/demos/)

# oracle - v$sqlarea：为什么 elapsed_time 小于 user_io_time + cpu_time？

> ID：12272802
> 
> 赞同：2
> 
> 时间：2012-09-04T23:53:27.217
> 
> 标签：oracle, performance

运行时：

```
select user_io_wait_time, cpu_time, elapsed_time, user_io_wait_time + cpu_time
from v$sqlarea where /* filter */ 
```

我得到如下输出。你能解释一下为什么 cpu_time 和 user_io_wait_time 的总和大于 elapsed_time 吗？我认为 elapsed_time 将是查询花费的总时间，包括 user_io、cpu、系统 io、并发等。所有返回的行都代表长时间运行的更新语句。甲骨文 10g。谢谢，托马斯。

```
USER_IO_WAIT    CPU_TIME    ELAPSED_TIME    USER_IO_WAIT+CPU_TIME
721189651        32450000      742860743    753639651
719109237        32540000      740826171    751649237
720330754        32540000      741987150    752870754
725473348        32670000      747215507    758143348
720799316        32540000      742501530    753339316
725361991        33000000      747416902    758361991
725387023        32830000      747236752    758217023
720383321        32210000      741849457    752593321 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T00:49:36.337

`ELAPSED_TIME`只是`elapsed time used by the cursor for parsing, executing, and fetching`。

`CPU_TIME`是个`CPU time (in microseconds) used by this cursor for parsing, executing, and fetching`

显然`CPU_TIME`不包括用户 io 时间、并发和应用程序等待时间等，以同样的方式和`USER_IO`时间不考虑 cpu 时间、并发和应用程序等待时间等，而且很难（但并非不可能）找出的组成部分`ELAPSED_TIME`。

[这](http://docs.oracle.com/cd/B19306_01/server.102/b14237/dynviews_2129.htm)应该让您对`v$sqlarea`.

# php - 同时显示字符串和图像

> ID：12272807
> 
> 赞同：0
> 
> 时间：2012-09-04T23:54:11.847
> 
> 标签：php, image, header

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

```
echo "how";

$im = imagecreatetruecolor(120, 20);
$text_color = imagecolorallocate($im, 233, 14, 91);
imagestring($im, 1, 5, 5,  'A Simple Text String', $text_color);
header('Content-Type: image/jpeg');
imagejpeg($im);
imagedestroy($im); 
```

我想同时显示字符串“how”和图像，但我不想将此图像保存在文件中。

上面的代码不起作用。如果我去掉**echo "how"**行，它工作正常。那么如果我想同时显示字符串和图像怎么修改呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:20:06.563

正如 Nile 已经指出的那样，您希望对图像使用 Data-URI。

使用您的代码的工作代码示例如下：

```
echo "how";

$im         = imagecreatetruecolor(120, 20);
$text_color = imagecolorallocate($im, 233, 14, 91);
$tmpImg     = tempnam('/tmp', 'image');

imagestring($im, 1, 5, 5,  'A Simple Text String', $text_color);
imagejpeg($im, $tmpImg);
imagedestroy($im);

echo '<img src="data:image/jpeg;base64,' . base64_encode(file_get_contents($tmpImg)) . '">';

unlink($tmpImg); 
```

发生什么了？它或多或少是您使用的代码，但图像被写入临时文件而不是直接发送到浏览器 - 这是 imagejpeg 的第二个参数。然后使用 Base64-Encoding 将临时文件的内容放入 Data-URI 中，然后将 DataUri 设置为图像标签的 src。

最后您将要删除临时文件！

如果要省略临时文件，可以使用输出缓冲来捕获图像。这将类似于以下内容：

```
echo 'how';

$im         = imagecreatetruecolor(120, 20);
$text_color = imagecolorallocate($im, 233, 14, 91);

imagestring($im, 1, 5, 5,  'A Simple Text String', $text_color);

ob_start();
imagejpeg($im);
imagedestroy($im);
$image = ob_get_contents();
ob_end_clean();

echo '<img src="data:image/jpeg;base64,' . base64_encode($image) . '">'; 
```

# java - 将 Json 对象存储到数据库

> ID：12272814
> 
> 赞同：0
> 
> 时间：2012-09-04T23:54:50.237
> 
> 标签：java, mysql, nosql, report

我从数据库运行非常复杂的报告。到目前为止，我正在返回一个复杂的 json 对象，而 javscript 正在呈现报告。但是随着它越来越多地创建这个 json 对象需要很长时间。

我正在考虑用另一种方法代替它。用户将创建一个生成报告的请求，服务器端进程可以生成 json 并将其存储以供以后使用，用户将通过电子邮件收到一个链接。

将 json 对象存储在数据库中是否安全？存储它的主要原因是用户要运行报告的列永远不会固定。我应该选择 NoSql 吗？

提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T00:12:58.447

在您提到的特定情况下，您应该考虑使用 Redis 等键值存储。你可以存储，比如 user_id -> json_object。键值存储非常适合缓存，这基本上就是您正在做的事情。

在一般情况下，存储 JSON 是可能的，但它失去了一件重要的事情：如何在 SQL 查询中使用数据的语义并不明显。例如，假设我们存储如下记录：

```
{'color': blue, 'height': '40px'}  
{'color': blue, 'height': '50px'}  
{'color': red, 'height': '40px'} 
```

作为数据库中的字符串。

如果我们想识别所有颜色为“蓝色”的元素，那么我们唯一的选择是在每个字符串元素中搜索字符串“%blue%”。这既昂贵又容易出错。您可能会考虑分解 JSON 并将其存储为数据库，或者转移到某种键值对或其他存储中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T23:59:43.903

在数据库中存储 JSON 应该是安全的。JSON 是简单的文本，所以从这个意义上说，我认为这种方法没有任何问题。

# matlab - 将矩阵拆分为列向量并将其存储在数组中

> ID：12272826
> 
> 赞同：0
> 
> 时间：2012-09-04T23:55:53.233
> 
> 标签：matlab, matrix, indexing, split

我的问题有两个部分：

1.  将给定矩阵拆分为其列
2.  这些列应该存储到一个数组中

例如，

```
A = [1 3 5 
     3 5 7
     4 5 7
     6 8 9] 
```

现在，我知道第一部分的解决方案：

这些列是通过获得的 `tempCol = A(:,iter), where iter = 1:end`

关于问题的第二部分，我想要（类似这样，可能是对 arraySplit 数组的不同索引），但是 A 的一整列应该存储在 splitArray 中的单个索引处：

```
arraySplit(1) = A(:,1)
arraySplit(2) = A(:,2) 
```

等等...

对于示例矩阵`A`，

`arraySplit(1)`应该给我 `[ 1 3 4 6 ]'`

`arraySplit(2)`应该给我`[ 3 5 5 8 ]'`

当我尝试将列向量分配给我的数组时，出现以下错误。

```
In an assignment  A(I) = B, the number of elements in B and I must be the same. 
```

我在做`arraySplit`错误的分配和访问，请帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T01:22:05.970

真的，这听起来就像`A`你想要的——我无法想象你通过拆分它们获得任何东西的场景。但如果你这样做了，那么你最好的选择可能是一个单元阵列，即。

```
C = cell(1,3);
for i=1:3
   C{i} = A(:,i);
end 
```

编辑：请参阅下面的@EitanT 评论，了解更优雅的方法。访问向量也使用与设置它相同的语法，例如`v = C{2};`将第二列`A`放入`v`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T00:20:31.537

您可以尝试以下方法：

```
A = [1 3 5; 
3 5 7;
4 5 7;
6 8 9]

arraySplit = zeros(4,1,3);

for i =1:3
    arraySplit(:,:,i) = A(:,i);
end 
```

然后调用`arraySplit(:,:,1)`以获取第一个向量，但这似乎是不必要的步骤，因为您可以通过访问与`A(:,1)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T00:07:25.613

在 Matlab 数组中，每个元素必须具有相同的类型。在大多数情况下，这是一个浮点类型。您的示例 A(:, 1) 是一个 4 x 1 数组。如果将其分配给 B(:, 2)，则 B(:, 1) 也必须是 4 x 1 数组。

一个可能会让您感到困扰的常见错误是 4 x 1 阵列和 1 x 4 阵列*不是*一回事。一个是列向量，一个是行向量。尝试转置 A(:, 1) 以获得 1 x 4*行*数组。

# wcf - Biztalk Server 2009 - 如何修改 MaxConcurrentSessions？

> ID：12272828
> 
> 赞同：2
> 
> 时间：2012-09-04T23:56:00.363
> 
> 标签：wcf, asp.net-3.5, biztalk, biztalk-2009

我们在 WCF 跟踪日志中收到以下错误。

系统达到了为油门“MaxConcurrentSessions”设置的限制。此限制的限制设置为 10。可以通过修改 serviceThrottle 元素中的属性“maxConcurrentSessions”或通过修改行为 ServiceThrottlingBehavior 的“MaxConcurrentSessions”属性来更改限制值

如果不使用 WCF 适配器上的自定义绑定，我们找不到修改“MaxConcurrentSessions”属性的好答案。

看了下面的文章但不想改变现有的绑定

[http://msdn.microsoft.com/en-us/library/dd203050%28v=bts.10%29.aspx](http://msdn.microsoft.com/en-us/library/dd203050%28v=bts.10%29.aspx)

**还有一点：**工作一段时间，当我们得到负载时，一切都会锁定

谢谢，克里希纳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:22:07.717

您没有提及您正在使用哪个绑定，但我猜测它是`WCF-wsHttpBinding`（`basicHttpBinding`不支持 Sessions AFAIK）。

我建议您切换到 WCF-Custom，因为它有更多的配置选项。只需将绑定类型选择为 wsHttBinding，它将与 WCF-wsHttpBinding 一样工作（我们已经使用 Wcf Custom 配置了所有基本和 wsHttp 接收位置，没有任何问题，FWIW）

您需要在`serviceThrottling`接收位置的行为选项卡上手动添加行为。来自[MSDN](http://msdn.microsoft.com/en-us/library/ee377035%28v=bts.10%29.aspx)

> 在可以修改 ServiceThrottlingBehavior 服务行为的任何元素之前，您必须首先将 serviceThrottling 行为扩展添加到 WCF-Custom* 传输属性对话框的行为选项卡中。要将 serviceThrottling 添加到 Behaviors 列表中，请选择 WCF-Custom* Transport Properties 对话框的 Behaviors 选项卡，右键单击 Behavior 下的 ServiceBehavior，单击 Add extension，选择 serviceThrottling，然后单击 OK。然后单击以选择 ServiceThrottlingElement 下可用的属性，并根据需要更改属性的值。

您可能还需要同时增加`maxConcurrentCalls`and `maxConcurrentInstances`。

The default recommendation in .NET 4 is at least [16*Cores](http://msdn.microsoft.com/en-us/library/ee377061%28v=bts.10%29.aspx), although the above link recommends >= 200 for `maxConcurrentCalls`.

也就是说，您可能会发现 BizTalk*主机在持续一段时间的大量传入负载后开始节流*，这可能会导致您所描述的感知锁定。使用 WMI 或[perfmon 计数器](http://msdn.microsoft.com/en-us/library/aa578302%28v=bts.20%29.aspx)检查主机的发布和传递限制状态，如果是这种情况，您将需要开始长期[调整](http://msdn.microsoft.com/en-us/library/aa954063.aspx)服务器、主机和编排以避免/限制限制的影响。BTS 主机限制对于 WCF 等同步接收是致命的，因为响应消息可能会显着延迟，导致客户端超时，并且一旦 BTS 开始处理它们，也会导致响应暂停。

# qt - Qt - 如何使用 Qt 接口列出 PostgreSQL 服务器上的所有现有数据库

> ID：12272831
> 
> 赞同：3
> 
> 时间：2012-09-04T23:56:35.730
> 
> 标签：qt, postgresql

有人可以解释如何使用 Qt 获取用户已经有权访问的 PostgreSQL 服务器上所有现有数据库的列表吗？PostgreSQL 文档建议以下查询：

```
SELECT datname FROM pg_database WHERE datistemplate = false; 
```

以下函数的正确参数是什么：

```
QSqlDatabase::setDatabaseName(const QString & name) //"postgres" or "pg_database"?
QSqlDatabase::setUserName(const QString & name) //actual user name?
QSqlDatabase::setPassword(const QString & password) //no password? or user password? 
```

非常感激。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T00:11:54.153

您似乎已经回答了问题的第一部分。连接到 postgres 或 template1 数据库并发出您在上面引用的查询以获取数据库列表。我猜 - 在字里行间阅读 - 你不知道如何连接到 PostgreSQL 来发送那个查询，这就是你问题的第二部分。对？

如果是这样，`QSqlDatabase`您提到的访问器函数用于设置连接参数，因此“正确”值取决于您的环境。

如果您想发出上面的查询 - 列出数据库 - 那么您可能希望连接到`postgres`数据库，因为它始终存在并且通常不用于任何特定的事情，它只是为了连接到那里。这意味着你会打电话给`setDatabaseName("postgres");`. 传递`pg_database`给`setDatabaseName`将是荒谬的，因为`pg_database`是`pg_catalog.pg_database`表，它不是您可以连接的数据库。`pg_database`是每个数据库中都存在的那些奇怪的表之一，这可能会让您感到困惑。

使用其他两个访问器为您的环境指定适当的用户名和密码，就像您用于`psql`; 我不可能告诉你使用哪些。

请注意，如果您设置了密码但不需要密码，因为身份验证是通过 unix 套接字标识、信任或其他非密码方案完成的，则密码将被忽略。

如果这不能涵盖您的问题，请考虑对其进行编辑并更详细地解释您的问题。你试过什么？什么没有按您的预期工作？错误信息？Qt版本？

# python - Cmake将python编译到构建文件夹中

> ID：12272832
> 
> 赞同：3
> 
> 时间：2012-09-04T23:56:37.840
> 
> 标签：python, compilation, cmake

我认为一个例子将是证明我的问题的最佳方式：

假设我有一个名为 src 的源目录。该目录有两个文件，一个 CMakeLists.txt 文件和一个名为 blah 的 python 文件。在存储 src 的同一个地方，有一个名为 build 的文件夹。现在，我希望能够运行 cmake 并使其编译我的 python 文件 blah 并将其放入我的构建目录中。目前，我的 CMakeLists.txt 只是使用调用将未编译的代码直接复制到我的构建目录中：

```
CONFIGURE_FILE(${PATH_TO_SOURCE}/blah.py ${PATH_TO_BUILD}/blah.py COPYONLY) 
```

然后我在终端中运行 make 来编译实际文件。这会将未编译的 python 文件留在我的构建目录中，这不好。我尝试过使用 ADD_EXECUTABLES，创建自定义目标并使用 COMMAND，但我的语法必须在某处关闭。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T09:44:33.527

CMake 不支持开箱即用的 Python，AFAIK。因此，您需要编写规则来构建 python 文件，如下所示：

```
macro(add_python_target tgt)
  foreach(file ${ARGN})
    set(OUT ${CMAKE_CURRENT_BINARY_DIR}/${file}.pyo)
    list(APPEND OUT_FILES ${OUT})
    add_custom_command(OUTPUT ${OUT}
        COMMAND <python command you use to byte-compile .py file>)
  endforeach()

  add_custom_target(${tgt} ALL DEPENDS ${OUT_FILES})
endmacro() 
```

定义好之后就可以这样使用了：

```
add_python_target(blabla blah.py) 
```

如果您想进行调整或需要更多信息，请参阅[CMake 文档](http://cmake.org/cmake/help/v2.8.9/cmake.html)。

# android - 我有一个 EditText 字段，我想在再次打开应用程序时保存它

> ID：12272834
> 
> 赞同：1
> 
> 时间：2012-09-04T23:56:45.953
> 
> 标签：android, android-edittext, save, restore

我有一个名为 ed 的 EditText 字段。它将存储一些用户在应用程序重新启动时需要的文本。我需要保存文本，以便在再次打开应用程序时它会回到 EditText 字段中。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T00:11:02.407

SharedPreference 是一种方法。

**SharedPreferences 类提供了一个通用框架，允许您保存和检索原始数据类型的持久键值对。您可以使用 SharedPreferences 保存任何原始数据：布尔值、浮点数、整数、长整数和字符串。此数据将在用户会话中持续存在（即使您的应用程序被终止）。**

这是实现 SharedPreferences 的示例。

[http://android-er.blogspot.com/2011/01/example-of-using-sharedpreferencesedito.html](http://android-er.blogspot.com/2011/01/example-of-using-sharedpreferencesedito.html)

或者

[http://marakana.com/forums/android/examples/63.html](http://marakana.com/forums/android/examples/63.html)

或者

您可以查找的另一项基本内容是 android 的 APIDemos 中给出的示例实现。APIDemos 示例应用程序包含所有需要了解的基本示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T00:00:40.113

最简单的方法是将其作为键值存储在首选项（putString/getString）中：

[http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

# javascript - Javascript 中的 const 关键字作用域

> ID：12272836
> 
> 赞同：15
> 
> 时间：2012-09-04T23:57:13.703
> 
> 标签：javascript, constants

```
1\. >>> const a = 2
2\. >>> var a = 3
3\. >>> a = 4
4\. >>> a // print 2 
```

为什么允许运行3号线？const 似乎比没有任何关键字更“全局”...

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2017-05-14T12:10:41.850

**`const`范围被定义为“块范围”**（其范围仅限于声明它的块）。

[MDN 文档](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const)：

> 常量是**块范围**的，很像使用**let** 语句定义的变量。常量的值不能通过重新赋值改变，也不能重新声明。

关于您的具体问题：首先正如评论所说`const`的与 ES6 相关。我不了解你，但我得到（输入你的第 2 行`var a = 3;`：）：SyntaxError: Identifier 'a' has already been declared 所以你的例子不太可能。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-05T00:02:18.533

这就是[工作`const`方式](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/const)（或不工作）：

> 创建一个常量¹，该常量对于声明它的函数可以是全局的或局部的。*常量遵循与变量相同的范围规则 [.. 并且不能与同一范围内的函数或变量共享名称]。*
> 
> ^(如果您重新声明2) [与重新分配不同] 常量，Firefox [..] 会引发 TypeError 。**如果您**为常量[..]***分配*****另一个值****，则主要浏览器都不会产生任何通知或错误^(2,3)** **，但重新分配（仅）在 Firefox 和 Chrome 中不成功（至少从版本 20 开始）。**

 *请注意，这*不是*`const`ECMAScript 5 规范的一部分，JavaScript 1.5 语义将在 ECMAScript 6中*重新定义。*

 **在支持和重新声明/重新分配语义方面，浏览器实现的行为*会有所不同。*

* * *

¹在 IE 9 中，使用`const a = 2`结果

> “语法错误”

²在 FF 14 中`const a = 2; var a = 3; a = 4; a`，当作为单个程序评估时，会导致

> TypeError：重新声明 const a

这与在 REPL 中一次执行每一行*不同。*我*怀疑*这是因为`var`它被*提升到*了`const`并且因为 const “不能与同一范围内的函数或变量共享名称”。

³在 Chrome 21 中，`const a = 2; var a = 3; a = 4; a`计算结果为 2，没有警告或消息。***

# php - Is it possible to hide ALL default routes in CakePHP?

> ID：12272839
> 
> 赞同：1
> 
> 时间：2012-09-04T23:57:48.037
> 
> 标签：php, cakephp, routing, routes

I find the routes engine extremely useful in CakePHP, and the documentation outlines how to 'disable the default routes', referring to the two that are present on a vanilla installation (one for the *home* page display, another for any other page display under the */pages* path).

Disabling these does not appear to disable other routes though. For example, a Post model is still accessible via **/posts**, **/posts/view/1**, etc, whereas I was hoping to hide all these default views from public, only allowing specific content to display in the routes of my choosing.

Could search engines index two pages for the same content if my configuration remained with default routes turned on? If not, I still don't really like the idea of the public figuring out the core route for a page and being able to access it through a non-public, yet still accessible, URL.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T08:10:43.723

If I understand correctly, remove the `require` from `APP/routes.php` (Cake 2.x only)

```
/**
 * Load the CakePHP default routes. Remove this if you do not want to use
 * the built-in default routes.
 */
    //require CAKE . 'Config' . DS . 'routes.php'; 
```

to disable the default routes, assuming you have fully customised all of your other routes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T00:19:41.153

The best, most appropriate and robust solution to ensuring that search engines and users don't view content that you don't want them to view is to block access to those controllers and actions you want protected.

If you don't want `/posts/view` to be accessed, then make the method private, or remove the method. If you want it accessible only to certain users, then you need to check for authorization and authentication prior to the action (maybe in a beforeFilter).

# php - 来自所需网址的嵌套 ID

> ID：12272841
> 
> 赞同：3
> 
> 时间：2012-09-04T23:57:52.570
> 
> 标签：php, jquery, url

我需要得到一个`ID`显示在`URL`. 我可以`ID's`通过使用`$_GET`in来访问，`php`但是当它们嵌套如下例所示时，我无法得到`ID`...

例子：

```
index.php?id[sub1]=1789&id[sub2]=1789 
```

`php`如果有人可以帮助使用或`jQuery`寻求解决方案，我将非常高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T00:02:23.290

```
<?php
$str="index.php?id[sub1]=1789&id[sub2]=1789";

$x=parse_str($str,$out);

print_r($out); //loop through this

Array
(
    [index_php?id] => Array
        (
            [sub1] => 1789
        )

    [id] => Array
        (
            [sub2] => 1789
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:28:01.343

假设 ID 始终相同：

```
if (isset($_GET['id'])) {
    $id = is_array($_GET['id']) ? current($_GET['id']) : $_GET['id'];
} 
```

# jquery - jquery ajax 修改响应

> ID：12272844
> 
> 赞同：1
> 
> 时间：2012-09-04T23:58:06.740
> 
> 标签：jquery, ajax

我想用修改后的 AJAX 响应替换 id = test 里面的内容

javascript:

```
('.test').bind('ajax:success', function()
{
    $.ajax({
          success: function(html){
            $('.test').text($(html).find("#test"));  // returns [object Object]

          }
    });
}); 
```

但是`$(html).find("#test")`返回一个`[object Object]`并`$(html).find("#test").html()`返回`null`

如何在 ajax 响应中获取 id 为“test”的 div 的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T00:17:56.847

根据此博客 [链接](http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/)，答案在第二个参数中：

```
jQuery(function($) {
  // create a convenient toggleLoading function
  var toggleLoading = function() { $("#loading").toggle() };

  $("#tool-form")
    .bind("ajax:loading",  toggleLoading)
    .bind("ajax:complete", toggleLoading)
    .bind("ajax:success", function(event, data, status, xhr) {
      $("#response").html(data);
    });
}); 
```

然后，您的代码将是：

```
$('.test').bind('ajax:success', function(event, data, status, xhr) {

   // this is $('.test')
   $(this).text($(data).find("#test"));

}); 
```

# css - 嵌套 div 中的第 n 个孩子

> ID：12272847
> 
> 赞同：3
> 
> 时间：2012-09-04T23:58:36.150
> 
> 标签：css

我正在尝试使用以下方法隐藏具有类名的最后 3 个`.latest-item`div `nth-child`：

```
<div class="latest-group">

            <div class="latest-1 latest-item latest-sort-1">
              <h3>Title</h3>
              <p>Paragraph</p>
            </div><!--end latest-1-->

            <div class="latest-2 latest-item latest-sort-2">
              <h3>Title</h3>
              <p>Paragraph</p>
            </div><!--end latest-2-->

            <div class="latest-3 latest-item latest-sort-3">
              <h3>Title</h3>
              <p>Paragraph</p>
            </div><!--end latest-3-->

          </div><!--end latest-group-->

          <div class="latest-group">

            <div class="latest-4 latest-item latest-sort-1">
              <h3>Title</h3>
              <p>Paragraph</p>
            </div><!--end latest-4-->

            <div class="latest-5 latest-item latest-sort-2">
              <h3>Title</h3>
              <p>Paragraph</p>
            </div><!--end latest-5-->

            <div class="latest-6 latest-item latest-sort-3">
              <h3>Title</h3>
              <p>Paragraph</p>
            </div><!--end latest-6-->

          </div><!--end latest-group-->​ 
```

和CSS：

```
.latest-item:nth-child(n+3) { 
           display:none;
       }​ 
```

我无法使用类名正确定位 div `.latest-item`。在 jQuery 中，我可以执行以下操作：

> $(".latest-item").slice(3).hide();

这是一个小提琴：

[http://jsfiddle.net/nMbm5/](http://jsfiddle.net/nMbm5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T00:06:05.333

我认为你需要使用[`nth-last-child`](http://www.w3.org/TR/css3-selectors/#nth-last-child-pseudo)，[`last-child`](http://www.w3.org/TR/css3-selectors/#last-child-pseudo)而不是：http: [//jsfiddle.net/nMbm5/1/](http://jsfiddle.net/nMbm5/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T19:08:58.267

听起来这是目前 CSS 的一个缺点。改用javascript：

```
$(".latest-item").slice(3).hide(); 
```

# c++ - C ++：每个策略的策略模式+迭代器

> ID：12272850
> 
> 赞同：1
> 
> 时间：2012-09-04T23:58:58.677
> 
> 标签：c++, strategy-pattern

假设我有一个策略模式，其中有 2 个实现该策略的类，每个类都有一组值，但这些值存储在不同的容器中，比如一个向量和一个列表。

我想要一个迭代器，允许我遍历每个类中的每个值。我还希望能够使用标准迭代器方式，这意味着以这种方式遍历值：

```
Strategy s = //Some initialization.
Strategy :: iterator it;
for (it = s.begin(); it != s.end() ; ++it){
//Do something with *it.
} 
```

目前我唯一的解决方案是：另一种策略模式，其中 Strategy 类具有上下文迭代器。另一个策略迭代器和每个“策略实现类”都有它自己的 - 类 selfIterator ：公共策略迭代器。

但这似乎很麻烦，也许别人比我更有创造力。所以我真的很感激一些想法:)，谢谢！

它适用于操作多项式的程序，其中策略是多项式的表示，一个带有向量，另一个带有列表的策略。

这也是我要用于的程序的 H 文件：

```
#include <iostream>
#include <vector>
#include <list>

using namespace std;

#ifndef MYPOLY_H
#define MYPOLY_H

class PolyRep;
class RegIterator;

typedef enum Poly
{
    REG_POLY = 1, SPARSE_POLY = 2
};

/* =============================================================================
 * MyPoly class.
 * =============================================================================*/

class MyPoly
{
public:

    MyPoly(double arr[], unsigned int arrSize);

    MyPoly(double num);

    MyPoly(double X[], double Y[], int arrSize);

    MyPoly(string sPoly);

    ~MyPoly();

    string toString();

    double evaluate(double x) const;

    MyPoly derive(int n);

    MyPoly & operator =(const MyPoly &rhs);

    MyPoly & operator +=(const MyPoly &rhs);

    MyPoly & operator -=(const MyPoly &rhs);

    MyPoly & operator *=(const MyPoly &rhs);

    MyPoly operator +(const MyPoly& other);

    MyPoly operator -(const MyPoly& other);

    MyPoly operator *(const MyPoly& other);

    bool operator ==(const MyPoly& b) const;

    MyPoly operator -() const;

private:
    PolyRep * _poly;

};

/* =============================================================================
 * PolyRep class.
 * =============================================================================*/

class PolyRep
{
public:

    virtual double evaluate(const double &x) const = 0;

    //virtual iterator begin () = 0;
    //virtual PolyRep * derive(int n) = 0;

protected:
    int _degree;
};

/* =============================================================================
 * RegPoly class.
 * =============================================================================*/

class RegPoly : public PolyRep
{
public:
    RegPoly(double arr[], int degree);
    ~RegPoly();
    double evaluate(const double &x) const;

private:
    vector <double> _values;
};

/* =============================================================================
 * SparsePoly class.
 * =============================================================================*/

class SparsePoly : public PolyRep
{
public:
    SparsePoly(double arr[], int degree);
    ~SparsePoly();
    double evaluate(const double &x) const;

private:

    /*A class to represent a node in the SaprsePoly list.*/
    class SparseNode
    {
    public:
        SparseNode(int n = 0, double value = 0);
        int getN() const;
        double getValue() const;
    private:
        int _n;
        double _value;
    };
    /*End of sparse node class.*/

    list <SparseNode*> _values;
};
#endif  /* MYPOLY_H */ 
```

# java - 从 Apache HtmlEmail 中删除所有收件人地址

> ID：12272854
> 
> 赞同：0
> 
> 时间：2012-09-04T23:59:27.267
> 
> 标签：java, email, memory, apache-commons

所以最初我正在编写一个营销电子邮件应用程序，它可以向成千上万的收件人发送电子邮件。我天真地做着这样的事情：

```
for(all emails)
{
    HtmlEmail email = new HtmlEmail();
    email.setBody(theHtml);
    email.addTo(currentEmail);
    email.send();
} 
```

上面的问题是，在收到这么多邮件之后，垃圾收集器必须启动并删除陈旧的 HtmlEmail 对象，这些对象会占用大量 CPU。我现在正在尝试执行以下操作：

```
HtmlEmail email = new HtmlEmail();
email.setBody(theHtml);

for(all emails)
{
    //Option1: Use below line of code but need to remove the previous "current email"; that is, not send this to all the previous recipients AND the new one
    //Line to remove previous email from HtmlEmail object
    email.addTo(currentEmail, currentName);
    //or option 2: email.setTo(new String[]{currentEmail});
} 
```

未注释方法的问题是 addTo 不会删除以前添加的电子邮件地址。我当然不想将相同的电子邮件发送给相同的收件人。非常非常灾难。因此，如果我采用这种方法，我需要一种删除以前电子邮件的方法。我想做类似的事情

```
email.setTo(Arrays.asList(new String[]{})); 
```

问题在于 api 声明所有包含的字符串必须是有效的电子邮件地址，否则会引发异常。另一种选择是`email.setTo`每次都使用，但不能包含收件人姓名。任何人都可以建议一种方法来执行上述操作吗？如果您需要澄清，我知道这有点难以用语言表达。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:49:43.913

这很难看，但似乎 HtmlEmail 在 getToAddresses() 方法中公开了内部列表。因此，email.getToAddresses().clear() 实际上会清除所有收件人，然后您可以再次使用 addTo()。

但这依赖于 HtmlEmail 类的内部，这绝对不是好的编码实践。

# c# - 游戏网络射弹实施/概念问题

> ID：12272855
> 
> 赞同：9
> 
> 时间：2012-09-04T23:59:30.083
> 
> 标签：c#, networking, xna, network-programming, game-engine

我试图找到某种解决方案来解决同步弹丸射击和游戏网络的常见问题，但我不确定什么是最合适的。

这是一个带有多个射弹（没有即时命中武器）的 2D 动作横向卷轴，并且已经有很多框架（C# XNA 框架和 Lidgren 库）。

目前我认为该架构将被建模为类似于半衰期源引擎。客户端将在过去 100 毫秒或大约 3 帧（固定步长 30 fps）内插入远程实体，并使用客户端预测。服务器对模拟具有权限。考虑用运动来编写实现似乎很好，但是当涉及到射弹时，我不确定如何才能最好地为所有玩家提供最佳游戏玩法。

## 示例问题：

客户端 A
客户端 B
服务器

1.  客户 A 和 B 只是面对面站着。
2.  客户端 B 开始向 A 开火，并像往常一样向服务器发送输入。服务器检测到火力输入并在其模拟中开始发射武器，同时将事件转发给客户端 A。
3.  客户端 A 接收到消息，但过去仍在对客户端 B 进行插值（同时弹丸现在在服务器和客户端 Bs 机器上向 A 射去）。
4.  客户端 A 的渲染最终到达 B 发射弹丸并开始渲染的地步。
5.  客户 A 看到它并跳了起来，很容易在他的屏幕上清除它。然而，弹丸在服务器和客户端 B 的角度击中了他。

这也是 2D 横向卷轴，所以一切都是可见的。

这似乎是使用插值的基本副作用（我认为这是必须的，但我愿意接受建议），因为即使没有任何网络延迟，也存在固有的插值延迟。

## 问题：

我知道它不可能是完美的，但是我可以实施更多或更好的方法来混淆或改善它，使其*看起来*不错/无缝，或者我是否遗漏了任何明显的东西？武器的开火在射弹实际开火之前*确实*有很短的动画时间，我意识到我们可以利用这段时间来隐藏一些延迟，但武器不是即时开火，无论我怎么看它总是有客户试图躲避弹丸和其他客户看到他们的弹丸击中他们，这将是一个巨大的差距。

对于玩家移动的情况，我们可以在服务器上使用延迟补偿，但我认为这对这种情况没有帮助吗？

如果弹丸击中导致客户端 A 的位置改变，我将不得不倒带客户端 A 并使用新数据重播他的输入，或者如果没有，我必须从半空中移除弹丸（也许他们会死），丑陋无论哪种方式 ：（。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T12:15:30.090

有趣的是你应该提到半衰期，valve 居然发表了一篇关于这个的文章，[Latency Compensating Methods in Client](https://developer.valvesoftware.com/wiki/Latency_Compensating_Methods_in_Client/Server_In-game_Protocol_Design_and_Optimization)

航位推算是网络游戏中非常普遍使用的技术，因此您应该能够在网上找到有关此的更多信息。

谷歌给我带来了这篇 gamasutra 文章，它也可能对你有所帮助，航位[推算延迟隐藏](http://www.gamasutra.com/view/feature/3230/dead_reckoning_latency_hiding_for_.php)

# python - 为什么我不能“string”.print()？

> ID：12272856
> 
> 赞同：7
> 
> 时间：2012-09-04T23:59:30.037
> 
> 标签：python, ruby

我对`print()`Python 和 Ruby（以及其他语言）的理解是它是一个字符串（或其他类型）的方法。因为它是如此常用的语法：

> 打印“嗨”

作品。

那么为什么`"hi".print()`在 Python 或`"hi".print`Ruby 中不起作用呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T00:01:49.440

当您执行类似的操作时`"hi".print()`，您是在暗示字符串对象`"hi"`有一个方法`print`。不是这种情况。相反，`print`它是一个将字符串（或其他类型）作为输入的函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T05:31:08.910

Ruby 确实有一个方法`Object#display`（[此处为 doc](http://www.ruby-doc.org/core-1.9.3/Object.html#method-i-display)），它将对象的表示发送到当前输出流，或指定为参数的输出流。

`;`（如果我在行尾使用来抑制返回值的打印，我发现很难在 irb 中使用；如果我这样做`display`，即使我刷新流，也不会显示 ' 的输出。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T00:02:19.170

为什么它应该起作用？字符串类很少有 void`print`方法——而且你永远不需要它们，因为标准的静态`print`函数无论如何都可以打印这些字符串。需要注意`method(someObject)`的是：**不一定**与`someObject.method()`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-05T00:04:29.630

它***不是***字符串上的方法。在[Python 3](http://docs.python.org/release/3.0.1/whatsnew/3.0.html)之前，它是一个**语句**（就像`break`or一样`import`），您可以同时使用`print "hi"`and `print("hi")`。从 Python 3 开始，它被[替换](http://docs.python.org/release/3.0.1/whatsnew/3.0.html)为**function**，因此您不能再使用`print "hi"`：

> 打印是一个函数
> 
> print 语句已替换为 print() 函数，使用关键字参数替换旧 print 语句 (PEP 3105) 的大部分特殊语法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-05T00:09:10.823

你建议`str.print`应该怎么做？

打印到标准输出？标准错误怎么样？还是文件？还是串口？

打印到标准输出确实是一种特殊情况，但它无处不在，有时会被忽视。

那么我们每次创建字符串时都必须指定 str 应该打印到哪里？

至少我们不得不说

```
"foo".print(sys.stdout) 
```

希望这对你来说也很糟糕。这是责任混淆

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T00:02:37.050

`print`不是 Python 中字符串的方法（我相信在 Ruby 中）。这是一个语句（在 Python 3 中它是一个全局函数）。为什么？一方面，并​​非您可以打印的所有内容都是字符串。怎么样`print 2`？

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-05T08:45:33.293

如果您更喜欢在 Ruby 中使用方法而不是语句，您可以使用方法 display( `"test".display`) 来实现此目的或轻松定义新方法，例如

```
class String
  def print
    puts self
  end
end 
```

并像这样使用它

```
"test".print 
```

# linux - Linux 上的链接器错误：“未定义的引用”

> ID：12272864
> 
> 赞同：15
> 
> 时间：2012-09-05T00:01:04.787
> 
> 标签：linux, gcc, build, linker

我能够毫无问题地制作一个共享库。我创建了 libcbitcoin.so（没有错误）并尝试使用可执行文件和 OpenSSL 库链接它。我使用这个命令：

```
gcc -L/media/sf_BitEagle_Projects/cbitcoin/build/bin -lcbitcoin \
-Wl-rpath,/media/sf_BitEagle_Projects/cbitcoin/build/bin -lssl -lcrypto \
-L/usr/local/ssl/lib/ -o /media/sf_BitEagle_Projects/cbitcoin/build/bin/testCBAddress \
/media/sf_BitEagle_Projects/cbitcoin/build/obj/testCBAddress.o \
/media/sf_BitEagle_Projects/cbitcoin/build/obj/CBOpenSSLCrypto.o 
```

bin 目录是库的位置。obj 目录包含我希望链接到可执行文件的目标文件。在命令中，我使用了 -L、-l 和 -rpath 选项，我认为这些选项是在 linux 中链接所需的全部内容。似乎我错了，因为我收到如下错误：

```
/media/sf_BitEagle_Projects/cbitcoin/test/testCBAddress.c:40:
undefined reference to `CBNewByteArrayFromString' 
```

在库中可以找到 CBNewByteArrayFromString。由于某种原因，它没有被链接。OpenSSL 也是：

```
/media/sf_BitEagle_Projects/cbitcoin/dependencies/crypto/CBOpenSSLCrypto.c:37:
undefined reference to `SHA1' 
```

如何使链接正常工作？

GCC 版本：gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3

在 Linux Mint 13 上

谢谢你。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-05T00:04:04.933

将库放在链接命令行上的目标文件之后：

```
gcc /media/sf_BitEagle_Projects/cbitcoin/build/obj/testCBAddress.o \
    /media/sf_BitEagle_Projects/cbitcoin/build/obj/CBOpenSSLCrypto.o \
    -L/media/sf_BitEagle_Projects/cbitcoin/build/bin \
    -lcbitcoin -Wl-rpath,/media/sf_BitEagle_Projects/cbitcoin/build/bin \
    -L/usr/local/ssl/lib/ -lssl -lcrypto \
    -o /media/sf_BitEagle_Projects/cbitcoin/build/bin/testCBAddress 
```

如果你不这样做，链接器可能会在它扫描库的链接阶段决定它不需要来自特定库的任何内容，然后在它找到一些未定义的符号后它不会重新扫描库。目标文件。如果你把目标文件放在第一位，你就不会遇到这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T01:41:14.277

我认为它是由找不到符号引起的，gcc会先从左到右，尝试将lib文件放在最后

# sql-server - 定期将访问数据库复制到 SQL 服务器

> ID：12272865
> 
> 赞同：3
> 
> 时间：2012-09-05T00:01:04.900
> 
> 标签：sql-server, database, ms-access

我有一个 access 2003 数据库，其中包含我所有的业务数据。该访问数据库在白天每隔几个小时更新一次。

我们目前正在编写一个需要使用访问数据库中的数据的网站。该网站（暂时）将仅具有*只读*功能。这意味着只需要一种数据传输方式（Access -> SQL）。

我正在想象有一种方法可以以编程方式执行从访问 SQL 服务器的数据迁移。有没有人有我能读到的东西的链接？

如果这种做法听起来很奇怪，并且您想建议另一种方法来执行此操作（或者数据可以双向传输（Access -> SQL，SQL -> Access）的情况，那很好。

该公司将继续使用 Access 2003 来实现其业务功能。没有办法解决这个问题。但我想在 SQL Server 之上构建（只读）网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:30:57.863

您概述的策略可能非常具有挑战性。`INSERT`如另一个答案中所述， 您可以使用查询将新的 Access 行复制到 SQL Server。

但是，如果您对现有的 Access 行进行了更改，并且还希望将这些更改传播到 SQL Server，那么事情就不会那么简单了。如果您也想从 SQL Server 中删除已删除的 Access 行，这将更加复杂。

对我来说，使用不同的方法似乎更合理。将数据迁移到 SQL Server 一次。然后用指向 SQL Server 表的 ODBC 链接替换 ​​Access 数据库中的表。此后，从 Access 应用程序中对数据的更改将不需要单独的同步步骤……它们已经在 SQL Server 中。而且您不需要编写任何代码来同步它们。

如果您担心 Web 服务器和 SQL Server 之间的连接是只读的，只需按这种方式设置它们。您仍然可以单独授予 Access 应用程序的读写权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T00:43:23.567

要进行初始数据迁移并自动设置 SQL Server，我会使用[SQL Server Migration Assistant](http://www.microsoft.com/en-us/download/details.aspx?id=28763)。我能想到的唯一绝对应该改变的事情是关闭任何具有它的列上的 Identity 属性 - 将在下面解释（MS Access 调用 Identity autonumber）。一旦你加载了你的表，你就可以建立一个到你刚刚创建的数据库（和表）的[dsnless 连接。](http://support.microsoft.com/kb/892490)

我没有使用刚刚链接的方法，但我相信它允许您使用 SQL Server 身份验证连接到数据库。使用此方法的好处是您可以轻松更改要连接到哪个 SQL Server 实例和/或数据库以进行开发和测试。

可能有更好的自动化方法，但您可以创建多个插入查询，执行从 Access 表的主键到 SQL Server 表的左连接，并放置一个`WHERE`指定 SQL Server PrimaryKey 必须为空的子句。这就是为什么您需要关闭 SQL Server 表中的 Identity 属性，以便您可以插入新数据。

最后，将每个查询的名称放在一个函数中，然后定期运行该函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T00:17:02.950

我使用 Microsoft 的免费[SQL Server 迁移助手 (SSMA)](http://www.microsoft.com/sqlserver/en/us/product-info/migration-tool.aspx)将 Access 迁移到 SQL Server。该工具使用起来非常简单。我在使用该工具时遇到的唯一问题是迁移时数据类型过载。我的意思是`NVARCHAR(MAX)`在某些情况下，一个小字符串会被转换为 a 。否则，该工具非常方便，可以在设置“配置文件”后重复使用。

# php - php使用匿名函数即时计算变量

> ID：12272867
> 
> 赞同：5
> 
> 时间：2012-09-05T00:01:23.887
> 
> 标签：php, anonymous-function

有时在初始化变量时，您希望向它们传递太复杂而无法在单个命令中计算的值，因此您通常要么先计算一个虚拟变量然后传递它的值，要么在别处定义一个函数，然后将它的返回值传递给我们的变量。

我的问题（希望）是，是否可以使用匿名函数动态计算变量？

例如，而不是使用这个：

```
$post = get_post();
$id = $post->ID;

$array = array(
    'foo' => 'hi!',
    'bar' => $id
); 
```

让我们使用这样的东西：

```
$array = array(
    'foo' => 'hi!',
    'bar' => (function(){
        $post = get_post();
        return $post->ID;
    })
); 
```

代码是完全随机的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T00:13:29.190

在您的示例中，以下内容会很好：

```
$array = array('foo'=>'hi!','bar'=>(get_post()->ID)); 
```

但是，考虑到您的问题更加开放并且不特定于您的代码片段，您可能会发现这个[stackoverflow 答案可以接受](https://stackoverflow.com/questions/3568410/anonymous-functions-that-execute-immediately)。

```
$a = array('foo' => call_user_func(
    function(){
        $b = 5;
        return $b;
    })
);
var_dump($a); 
```

# view - 如何更改文档视图的 bkcolor

> ID：12272869
> 
> 赞同：1
> 
> 时间：2012-09-05T00:01:26.020
> 
> 标签：view, mfc, background-color

编辑文档时如何更改文档视图的bkcolor，就像visual studio一样我可以为背景颜色选择收藏夹颜色，有没有一些api？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T00:34:10.300

我假设您谈论的是带有语法着色的编辑控件。因此，例如，简单的着色[控制](http://www.codeproject.com/Articles/28619/CUltraPadWnd-A-Simple-Syntax-Coloring-Control-Base)：

或如何在您的 MFGC 项目中使用[Scintilla ：](http://www.codeproject.com/Articles/4440/Using-Scintilla-for-syntax-coloring-in-MFC)

# public-key-encryption - ComponentSpace Saml 2.0 从哪里获取加密断言的密钥

> ID：12272870
> 
> 赞同：1
> 
> 时间：2012-09-05T00:01:35.523
> 
> 标签：public-key-encryption, saml-2.0

当我运行以下代码（使用 ComponentSpace Saml 2.0 lib）时，Fiddler 向我显示 SAMLRequest 的值是这样加密的，`<input type="hidden" name="SAMLRequest" value="PHNhbWxwOkF1dGhu....">`这是非常预期的行为。[该代码实现了SSO SAML 2.0 POST](http://en.wikipedia.org/wiki/SAML_2.0#SP_POST_Request.3B_IdP_POST_Response)配置文件的第一步。请注意，代码中没有指定证书密钥来进行任何类型的加密，所以我想知道 ComponentSpace lib 如何决定选择哪一个？

```
 var authnRequest = new AuthnRequest
        {
            Destination = @"https://idpserver/...",
            Issuer = new Issuer(@"https://sp/..."),
            ForceAuthn = false,
            NameIDPolicy = new NameIDPolicy(null, null, true), 
            ProtocolBinding = SAMLIdentifiers.BindingURIs.HTTPPost,
            AssertionConsumerServiceURL = @"https://sp/..."
        };

        var relayState = RelayStateCache.Add(new RelayState(@"https://sp/...", null));

        ServiceProvider.SendAuthnRequestByHTTPPost(
            new HttpResponseWrapper(_context.Response), 
            @"https://idpserver/...", 
            authnRequest.ToXml(), 
            relayState); 
```

维基百科所说的只是“ *SAMLRequest 参数的值是 base64 编码*”。没有关于密钥用于编码的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:26:14.717

很抱歉误解了你的问题。您的示例代码构造并发送了一个身份验证请求。听起来您在询问 SAML 响应中包含的 SAML 断言。

身份提供者使用服务提供者的公钥加密 SAML 断言。服务提供商将使用其私钥解密断言。

如果您想查看这方面的示例，请查看 AssertionExample 项目，该项目演示了加密/解密 SAML 断言。

您提供的链接中的第 2 步描述了 SP 通过 HTTP/POST 向 IdP 发送 AuthnRequest。发送 AuthnRequest 不涉及 XML 加密。XML 使用 deflate 和 base-64 编码，但没有加密。此编码在您调用 ServiceProvider.SendAuthnRequestByHTTPPost 时为您完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T04:25:33.257

签署授权请求是可选的。

要签署请求，在调用 ServiceProvider.SendAuthnRequestByHTTPPost 之前，您需要执行以下操作：

```
// Serialize to XML
XmlElement authnRequestElement = authnRequest.ToXml();

// Sign the authn request
SAMLMessageSignature.Generate(authnRequestElement, x509Certificate.PrivateKey, x509Certificate);

// Send the authn request to the IdP
ServiceProvider.SendAuthnRequestByHTTPPost(..., authnRequestElement, ...); 
```

您始终使用您的私钥签名，收件人将使用您的公钥/证书验证签名。

# javascript - javascript 如果失败

> ID：12272871
> 
> 赞同：1
> 
> 时间：2012-09-05T00:01:39.110
> 
> 标签：javascript, html, dom, if-statement

我看不到我的错误在哪里，如果有的话

```
<!DOCTYPE html> <html> <head>
        <script type="text/javascript">
            //http://stackoverflow.com/questions/10251149/using-javascript-to-detect-google-chrome-to-switch-css
            //provera brosera
            function check_chrome_ua() {
                var ua = navigator.userAgent.toLowerCase();
                var is_chrome = /chrome/.test(ua);
                alert("func check_chrome_ua() " + is_chrome);
                return is_chrome;
            }
            //promena nadpisa
            function check() {
                //alert("check1");

                var check = check_chrome_ua();
                alert("var check " + check + "; func check_chrome_ua() " + check_chrome_ua());

                if (check == "false") {
                    alert("change text");
                    document.getElementById("opomena").style.color = "red";
                    document.getElementById("opomena").innerHTML = 'Warning you are not using Google Chrome';
                }
            }
        </script>
        </head>
        <body onmousemove="check()">
    <div id="opomena">Thank you for using Google Chrome.</div>

</body>
 </html> 
```

Google Chrome 上的弹出窗口说是真的，在 Firefox 上说假的弹出窗口“更改文本”不会在 Firefox 中显示，但 var 检查是假的。

提前感谢您的建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T00:03:18.210

改变

```
if (check == "false") { 
```

至

```
if (!check) { 
```

或者

```
if (check == false) { 
```

如果您真的想检查布尔值，`false`.

您调用的正则表达式`test`方法`/chrome/.test(ua)`返回一个布尔值，但`check == "false"`将该布尔值与字符串进行比较。两者不相等。

在 JavaScript 中，在将字符串与对象进行比较时`==`是[允许](http://es5.github.com/#x11.9.3)的，但不如 Perl 的`eq`运算符那么允许。

*   `0 == false`
*   `false == false`
*   `"false" == [false]`
*   `false != "false"`
*   `0 != "false"`

尝试使用哪些是定义明确的运算符来比较原始值是一个好`!==`习惯`===`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T00:05:08.440

您必须检查布尔值是否为假，而不是“假”（它是一个字符串）。

只有`if (!check)`就足够了（或更详细的版本`if (check == false)`）。

# authentication - 在 Ember.JS 应用程序中强制执行用户/身份验证状态的最佳方法

> ID：12272881
> 
> 赞同：37
> 
> 时间：2012-09-05T00:02:26.330
> 
> 标签：authentication, ember.js

开发我的第一个 EmberJS 应用程序。整个应用程序要求用户登录。我试图围绕强制用户现在（最初加载页面时）和将来（当用户注销时）登录的最佳方式并且没有刷新）。

我已经处理了用户身份验证挂钩 - 现在我有一个 ember-data 模型和关联的存储，它连接处理授权用户和创建用户“会话”（使用 sessionStorage）。

我不知道如何做的是强制用户在跨路由转换时进行身份验证，包括根路由中的初始转换。我把这个逻辑放在哪里？如果我有一个身份验证状态管理器，我如何将它连接到路由中？我应该有一个根路由之外的身份验证路由吗？

注意：如果这个问题措辞不当或者我需要更好地解释什么，请告诉我，我很乐意这样做。

**编辑：** 我最终做了一些我认为更像灰烬的事情，尽管可能是一个混乱的实现。我有一个身份验证状态管理器，它存储当前用户的身份验证密钥以及当前状态。

每当有东西需要身份验证时，它只需向 authmanager 请求它并传递一个回调函数以使用身份验证密钥运行。如果用户没有登录，它会拉出一个登录表单，在用户登录之前暂停回调函数。

这是我正在使用的代码的一些选择部分。需要清理，我遗漏了一些东西。[http://gist.github.com/3741751](http://gist.github.com/3741751)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T14:15:26.053

如果您需要在初始状态转换之前执行检查，则`Ember.Application`类上有一个特殊功能，称为`deferReadiness()`. 源代码中的注释：

> 默认情况下，一旦浏览器发出`DOMContentReady`事件，路由器就会开始尝试将当前 URL 转换为应用程序状态。如果需要延迟路由，可以调用应用程序的`deferReadiness()`方法。一旦可以开始路由，调用该`advanceReadiness()`方法。

请注意，在撰写本文时，此功能仅在[ember-latest中可用](http://cloud.github.com/downloads/emberjs/ember.js/ember-latest.js)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T08:06:47.453

在重新检查路由转换之间的身份验证方面，您可以在 的`enter`和`exit`方法中添加钩子`Ember.Route`：

```
var redirectToLogin = function(router){
    // Do your login check here.
    if (!App.loggedIn) {
        Ember.run.next(this, function(){
            if (router.currentState.name != "login") {
                router.transitionTo('root.login');
            }
        })
    }
};

// Define the routes.
App.Router = Ember.Router.extend({
    root: Ember.Route.extend({
        enter: redirectToLogin,
        login: Ember.Route.Extend({
            route: 'login',
            exit: redirectToLogin,
            connectOutlets: function(router){
                router.get('applicationController').connectOutlet('login');
            }
        }),
        ....
    })
}); 
```

这种解决方案的问题在于，Ember 实际上会在转换回您的登录路由之前转换到新路由（并因此加载所有数据等）。因此，这可能会暴露您不希望他们再看到的应用程序的某些部分。然而，现实情况是所有这些数据仍然加载在内存中，并且可以通过 JavaScript 控制台访问，所以我认为这是一个不错的解决方案。

还要记住，由于 Ember.Route.extend 返回一个新对象，您可以创建自己的包装器，然后在整个应用程序中重用它：

```
App.AuthenticatedRoute = Ember.Route.extend({
    enter: redirectToLogin
});
App.Router = Ember.Router.extend({
    root: Ember.Route.extend({
        index: App.AuthenticatedRoute.extend({
            ...
        })
    })
}); 
```

如果您使用上述解决方案，那么您可以准确挑选您验证的路线。您还可以删除“检查他们是否正在转换到登录屏幕”签入`redirectToLogin`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-14T18:09:39.257

我整理了一个超级简单的包来管理会话和身份验证，名为 Ember.Session [https://github.com/andrewreedy/ember-session](https://github.com/andrewreedy/ember-session)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-29T19:37:23.003

也请看一下： [http ://www.embercasts.com/](http://www.embercasts.com/)

那里有两个关于身份验证的截屏视频。

谢谢。

# c# - CouchBase .NET API——为特定存储桶设置键、值

> ID：12272885
> 
> 赞同：1
> 
> 时间：2012-09-05T00:03:12.763
> 
> 标签：c#, couchbase

我正在编写一个包装器 api 来提供一个 Set 方法，类似于：

```
Set(string bucket, string key, object value) 
```

我需要的是，如果提供的存储桶不可用——我需要使用默认存储桶，否则将其存储到特定存储桶。

我能想到的一种方法是在 try...catch 块中使用提供的存储桶实例化 CouchbaseClient，如果失败将其存储在*默认*存储桶中。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T21:42:18.213

一般来说，您不想实例化每个请求的客户端。第一次连接到集群的开销并不小。因此，建议您为每个存储桶、每个应用程序域创建一个静态实例。客户端也具有存储桶亲和性，因此您无法在不重新实例化客户端的情况下切换存储桶。

有关配置多个存储桶的信息，请参阅[http://www.couchbase.com/wiki/display/couchbase/Couchbase+.NET+Client+Library](http://www.couchbase.com/wiki/display/couchbase/Couchbase+.NET+Client+Library)。

如果您按照上述方式创建多个存储桶配置部分，您的方法可能类似于：

```
private static Dictionary<string, CouchbaseClient> _clientDict = new Dictionary<string, CouchbaseClient>();

public IStoreResult Set(string key, object value, string bucketName, string bucketPassword = "") 
{
    if (! _clientDict.ContainsKey(bucketName))
    {
        _clientDict[bucketName] = new CouchbaseClient(bucketName); //assume this matches the config section name
    }

   return _clientDict[bucketName].ExecuteStore(StoreMode.Set, key, value);
} 
```

我实际上并没有运行这段代码，但是这样的东西应该可以工作。请记住，您必须有一个匹配的配置部分。因此，使用 wiki 示例，您的字典中有两个键 - “bucket-a”和“bucket-b”。

客户端的下一个版本将支持通过 REST API 查询存储桶，但这会稍微影响性能。这些位应该很快就会作为 Developer Preview 4 删除。在这种情况下，您将能够添加对新 CouchbaseCluster 对象的 ListBuckets 方法的调用并检查返回列表中的存储桶。如果该存储桶存在，您可以缓存其关联的 CouchbaseClient。

# prolog - 默认 Prolog 谓词排序

> ID：12272888
> 
> 赞同：1
> 
> 时间：2012-09-05T00:03:35.350
> 
> 标签：prolog

如果我在数据库中有一个简单的谓词，有没有一种方法可以请求以特定顺序（asc/desc）返回结果，而不必将它们全部读入内存并执行 sort/2 或执行 setof /3？

例如，考虑这个数据库：

```
animal(dog).
animal(cat).
animal(elephant).
animal(bird).
animal(aardvark). 
```

我想以某种方式在第一个术语中将动物声明为已排序的 ASC，以便我可以像这样简单地查询它：

```
?- animal(X).
X = aardvark ;
X = bird ;
X = cat ;
X = dog ;
X = elephant ;
No. 
```

能够做到这一点对于将我的知识库更像传统数据库来处理会非常方便。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T00:13:08.953

不，如果您不阅读它们，就无法对它们进行排序。

Ofc 您可以编写排序的谓词或生成排序的谓词：

```
findall(sorted_animal(X),animal(X),Animals),
sort(Animals,SAnimals),
maplist(assertz(X),SAnimals),
compile_predicates([sorted_animal]/1). 
```

或者

```
findall(animal(X),animal(X),Animals),
sort(Animals, SAnimals),
retractall(animal(X)),
maplist(assertz(X),SAnimals),
compile_predicates([sorted_animal]/1). 
```

但是您必须将谓词声明`animal/1`为动态的：

```
:-dynamic(animal/1).
animal(dog).
.... 
```

（在代码文件中）

我曾经`compile_predicates/1`提高速度；但是，这意味着您不能在该谓词上使用`assert/1`or`retract/1`再次，因此如果您添加/删除动物，请跳过它。

或者，您可以使用[有序集](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.17%27,swi%28%27/doc/Manual/ordsets.html%27%29%29)并将其作为参数传递

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T05:28:41.563

Prolog 掩盖了复杂的排序问题，为 DB 访问、FIFO 或 LIFO 规定了严格的时间顺序模型，默认为 FIFO。这是合理的，因为这种访问*定义*了计算模型。

所以没有标准的方法来改变子句检索顺序。

我认为[goal_expansion](http://www.swi-prolog.org/pldoc/doc_for?object=goal_expansion/2) /2 可以用来引入这样的特性，我会尝试一个原型。但我不确定我会得到任何有用的东西......

**编辑**

第一次尝试，但使用缓慢（但更简单）的收回/断言。

```
/*  File:    order_by.pl
    Author:  Carlo,,,
    Created: Sep  5 2012
    Purpose: sort fact
*/
:- module(order_by,
      [order_by/2
      ]).

order_by(PredicateIndicator, Argument) :-
    (   PredicateIndicator = Module:Functor/Arity
    ;   PredicateIndicator = Functor/Arity, Module = user
    ),
    length(EmptyArgs, Arity),
    P =.. [Functor|EmptyArgs],
    findall(P, retract(Module:P), L),
    predsort(by_arg(Argument), L, S),
    maplist(assert_in_module(Module), S).

assert_in_module(Module, P) :-
    assertz(Module:P).

by_arg(Argument, Delta, E1, E2) :-
    arg(Argument, E1, A1),
    arg(Argument, E2, A2),
    (   A1 @< A2
    ->  Delta = <
    ;   Delta = >
    ). 
```

测试文件（我只在用户模块中测试过），请注意：-动态声明是强制性的：

```
/*  File:    order_by_test.pl
    Author:  Carlo,,,
    Created: Sep  5 2012
    Purpose:
*/
:- [order_by].
:- dynamic animal/1.

animal(dog).
animal(cat).
animal(elephant).
animal(bird).
animal(aardvark).

test :-
    order_by(animal/1, 1),
    forall(animal(X), writeln(X)). 
```

测试结果：

```
?- test.
aardvark
bird
cat
dog
elephant 
```

# android - 如何在android上使用wifi和3g（HSDPA，GPRS）连接发送电子邮件（Gmailsend，JSSEProvider）

> ID：12272889
> 
> 赞同：0
> 
> 时间：2012-09-05T00:03:41.853
> 
> 标签：android

我创建了一个向某个收件人发送电子邮件的自动化应用程序，我在具有 Internet 连接的电脑上使用模拟器（eclipse indigo AVD），它将发送一封电子邮件，收件人将收到它，但我的**问题是当我在具有 Internet（wifi 连接和 3g（HSDPA，GPRS））的设备（电话）上使用我的应用程序，它不发送电子邮件。它非常奇怪，在 pc 模拟器上它运行正常，但在我的设备上它不发送。**（我的设备是 Galaxy S2）

这是我对 Vinayak.B 爵士创建和发送电子邮件的参考。见链接

[在不使用默认/内置应用程序的情况下使用 JavaMail API 在 Android 中发送电子邮件](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)

我通过谷歌搜索了我的问题，发现 wifi 和 3g 连接被阻止到 smtp 端口 465。

是否有任何端口或端口可用于通过 wifi 或 3g 连接发送电子邮件？

请帮忙。

这是我的 smtp 属性

```
 private String mailhost = "smtp.gmail.com";
    Properties props = new Properties();   
    props.setProperty("mail.transport.protocol", "smtp");   
    props.setProperty("mail.host", mailhost);   
    props.put("mail.smtp.auth", "true");   
    props.put("mail.smtp.port", "465");   
    props.put("mail.smtp.socketFactory.port", "465");   
    props.put("mail.smtp.socketFactory.class",   
            "javax.net.ssl.SSLSocketFactory");   
    props.put("mail.smtp.socketFactory.fallback", "false");   
    props.setProperty("mail.smtp.quitwait", "false"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:24:21.377

我已经使用此链接得到了答案

[http://www.jondev.net/articles/Sending_Emails_without_User_Intervention_%28no_Intents%29_in_Android](http://www.jondev.net/articles/Sending_Emails_without_User_Intervention_%28no_Intents%29_in_Android)

我刚刚为谷歌使用了相同的 smtp 端口，我只是重建了我的代码。我的应用程序现在正在发送电子邮件。

# actionscript-3 - AS3 错误 #1065

> ID：12272892
> 
> 赞同：3
> 
> 时间：2012-09-05T00:04:05.493
> 
> 标签：actionscript-3, flashdevelop

我必须在这里遗漏一些简单的东西，但在我的主应用程序中，我导入了我的 Pages 类，该类又导入并动态实例化两种页面类型之一。不幸的是，它只会导致错误：**ReferenceError: Error #1065: Variable PageA is not defined。**（当我调用*Pages.load("A");*时）

**页面**

```
package pages 
{
    import pages.PageA;
    import pages.PageB;
    import flash.display.Sprite;
    import flash.utils.getDefinitionByName;

    public class Pages 
    {
        public static function load(pageType:String):void
        {
            var pageClass:Class = getDefinitionByName("pages.Page"+pageType) as Class;
        }
    }
} 
```

**页面A**

```
package pages 
{
    import flash.display.Sprite;

    public class PageA extends Sprite 
    {
        public function PageA()
        {
            trace("PageA init");
        }
    }
} 
```

**页面B**

```
package pages 
{
    import flash.display.Sprite;

    public class PageB extends Sprite 
    {
        public function PageB()
        {
            trace("PageB init");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T03:56:01.343

确切地说，编译器显然没有在编译的 SWF 中包含这些类。当我尝试通过生成的字符串（在我的情况下为'Gem'+一个整数）进行实例化时，我曾在某处碰过这堵墙，并收到了大约相同的错误。我通过创建一个虚拟常量来绕过它，枚举我计划使用的所有类，这让编译器意识到了这一点。因此，请执行以下操作：

```
private static const PAGES:Array=[PageA, PageB]; 
```

并编译。应该做。此外，您不需要导入“pages”包的一部分，它们已经在您的项目中可见，因为您的“Pages”类属于同一个包。

# facebook - Facebook Wordpress 错误提要说明

> ID：12272895
> 
> 赞同：2
> 
> 时间：2012-09-05T00:04:10.330
> 
> 标签：facebook, wordpress, facebook-graph-api

我在使用 Facebook 和 Wordpress 时遇到了令人沮丧的问题

**我正在使用** WP 版本 3.4.1 FB 插件版本 1.0.2

我安装了插件。创建了一个 Facebook 应用程序。

发生的事情是我正在使用 Facebook 的共享按钮、发送按钮和订阅按钮在 Facebook 上共享页面。即使我复制并粘贴帖子，我也会在提要描述中得到以下内容。

> 您可以使用这些 HTML 标记和属性：<​a href="" title=""> <​abbr title=""> <​acronym >title=""> <​b> <​blockquote cite=""> <​cite> <​code> <​del datetime=""> <​em> <​i> <​q cite=""> <​>strike> <​strong>

我认为它在 Facebook PHP 文件中，但我看过那里。至少可以说我有点难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T00:29:39.650

是的。出于某种原因，Facebook for Wordpress 插件将评论说明作为它在 og:meta 标签中使用的默认描述，特别是当没有与您的帖子相关联的文本或没有设置摘录时。

在我的网站上，我使用 Facebook for Wordpress 插件进行连接，但我已经放弃让它生成我的元标记。我改用[Wordpress SEO](http://wordpress.org/extend/plugins/wordpress-seo/)，因为您可以在描述、标题等中指定应包含的文本。还有其他插件也可以这样做。

要禁止 Facebook for Wordpress 元标记，请将其添加到主题的 functions.php 中：

```
//Remove the Facebook for WP tags until they get their s**t together.
remove_action('wp_head', 'fb_add_og_protocol', 10); 
```

# symfony - PHP 致命错误：在第 47 行的 /var/www/znata.com/app/AppKernel.php 中找不到类 'Application\Sonata\MediaBundle\ApplicationSonataMediaBundle'

> ID：12272899
> 
> 赞同：13
> 
> 时间：2012-09-05T00:04:32.320
> 
> 标签：symfony, symfony-2.1, symfony-sonata, sonata-admin

我按照[这个](http://sonata-project.org/bundles/media/master/doc/reference/installation.html)文档安装了 SonataMediaBundle 但我收到了这个错误：

```
PHP Fatal error:  Class 'Application\Sonata\MediaBundle\ApplicationSonataMediaBundle' not found in /var/www/znata.com/app/AppKernel.php on line 47 
```

使用奏鸣曲命令 t 生成应用程序后：

```
php app/console sonata:easy-extends:generate SonataMediaBundle 
```

新目录生成于：

```
apps/Application/Sonata/MediaBundle 
```

一切都完成了，但是当我在我的 AppKernel.php 中注册生成的应用程序时，我得到了那个错误。

```
public function registerbundles()
{
    return array(
        ...
        new Application\Sonata\MediaBundle\ApplicationSonataMediaBundle(),
        ...
    );
} 
```

你知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T21:08:40.640

默认情况下，项目根目录不在自动加载路径中，只有“src”目录。您可以使用

```
php app/console sonata:easy-extends:generate --dest=src SonataMediaBundle 
```

在 src 中生成包或简单地将其复制到 src。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-05T18:39:07.010

调试了这个问题后，我发现namspace应用程序没有注册。

在 SF2.0 中，文档说我们应该像这样注册这个命名空间：

```
<?php
$loader->registerNamespaces(array(
    ...
    'Application'   => __DIR__,
    'Imagine'       => __DIR__.'/../vendor/imagine/lib',
    'Gaufrette'     => __DIR__.'/../vendor/gaufrette/src',
    'Buzz'          => __DIR__.'/../vendor/buzz/lib',
    ...
)); 
```

但在 SF2.1 中，他们确实谈到了这一点。

所以我在 autoload.php 中注册了命名空间应用程序，它工作正常。

所以，autoload.php 看起来像这样：

```
<?php

// file: app/autoload.php

use Doctrine\Common\Annotations\AnnotationRegistry;
$loader = require __DIR__.'/../vendor/autoload.php';

//custom for Application
$loader->add("Application", __DIR__);

// intl
if (!function_exists('intl_get_error_code')) {
    require_once __DIR__.'/../vendor/symfony/symfony/src/Symfony/Component/Locale/Resources/stubs/functions.php';

    $loader->add('', __DIR__.'/../vendor/symfony/symfony/src/Symfony/Component/Locale/Resources/stubs');
}

AnnotationRegistry::registerLoader(array($loader, 'loadClass'));

return $loader; 
```

有了这个新配置，一切都很好。但在 SF2.0 中，他们还谈到了“Imagine”、“Guffrette”和“Buzz”命名空间。所以也许，在使用它们时，我们也应该像应用程序命名空间一样注册它们。

我希望这对你有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-03T12:19:51.180

使用作曲家我在composer.json中做了这个： `"autoload": { "psr-0": { "": "src/", "Application": "app/" } },`

我添加了映射“应用程序”：“app/”。然后运行 `composer update`

这产生了需要的额外自动加载。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-04T10:57:05.603

1.  在你的`composer.json`文件中，有：

    ```
    "autoload": {
        "psr-4": {
            "AppBundle\\": "src/AppBundle",
            "Application\\": "src/Application"
        },
    } 
    ```

2.  做一个简单的：

    ```
    composer dump-autoload 
    ```

    重新生成自动加载文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T22:53:27.437

正如 skonsoft 提到的，您需要将命名空间加载到`autoload.php`. 我对 FOQ.Elastica 有同样的问题，并通过添加以下内容解决了它。

`$loader->add('FOQ', __DIR__.'/../vendor/bundles');`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T00:18:33.513

```
new Application\Sonata\MediaBundle\MediaBundle(), 
```

或者

```
new Application\Sonata\MediaBundle\SonataMediaBundle(), 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-22T18:37:50.043

您还可以使用您的应用程序命名空间前缀，以便该包属于您的命名空间

`bin/console sonata:easy-extends:generate --dest=src SonataMediaBundle --namespace_prefix=App`

# css - IE7 CSS：带有媒体查询的第一个子选择器

> ID：12272901
> 
> 赞同：0
> 
> 时间：2012-09-05T00:04:58.800
> 
> 标签：css, internet-explorer-7, css-selectors

我在媒体查询中有以下 CSS（对于最小宽度 768px）：

```
.formHolder-section {width: 235px; position: relative; float: left; margin:0;}
.formHolder-section:first-child { margin: 0 20px 0 40px; } 
```

覆盖（对于 :first-child）适用于除 IE7 之外的所有浏览器。我想知道这是否有任何充分的理由......我还尝试了反转边距值（将其应用于所有（2）.formHolder-section div，然后使用不同的选择器：

```
.formHolder-section {width: 235px; position: relative; float: left; margin: 0 20px 0 40px;}
.formHolder-section + .formHolder-section { margin: 0; } 
```

这也不起作用。我已经解决了我的问题，只给两个 div 一些边距（而不是只给第一个 div）。奇怪的是……除了第一个子选择器之外，所有其他 CSS 都在这里工作。我想知道是否有人知道问题的原因。

下面是一些 HTML（不过，HTML/CSS 在除 IE7 之外的任何地方都可以使用）：

```
<div class="formContainer">
    <div class="formHolder-section">
        <span class="form-required">*Denotes field as required</span>
        <ul class="form-list">
            <li>
                <label>First:*</label>
                <input type="text" value="" class="form-input-full" name="firstName" id="firstName">
            </li>
            <li>
                <label>Last:*</label>
                <input type="text" value="" class="form-input-full" name="lastName" id="lastName">
            </li>
            <li>
                <label>Email Address:*</label>
                <input type="text" value="" class="form-input-full" name="email" id="email">
            </li>
            <li>
                <label class="listOptionPadding">Are you 18 years old?*</label>
                <input type="radio" value="true" class="form-radio" name="over18" id="over181"> <span class="italic">Yes</span>
                <br>
                <input type="radio" value="true" class="form-radio" name="over18" id="over182"> <span class="italic">No</span>
            </li>
            [...]
        </ul>
    </div>
    <div class="formHolder-section">
        <ul class="form-list">
            <li>
                <label class="listOptionPaddingBottom">When Do You Intend to Purchase a New Vehicle?</label>
                <input type="radio" value="1_MONTH" class="form-radio" name="nextPurchase" id="nextPurchase1"> <span class="italic">Within a Month</span>
                <br>
                <input type="radio" value="3_MONTH" class="form-radio" name="nextPurchase" id="nextPurchase2"> <span class="italic">Within the next 3 Months</span>
                <br>
                <input type="radio" value="6_MONTH" class="form-radio" name="nextPurchase" id="nextPurchase3"> <span class="italic">Within the next 6 Months</span>
                <br>
                <input type="radio" value="WITHIN_YEAR" class="form-radio" name="nextPurchase" id="nextPurchase4"> <span class="italic">Within a Year</span>
                <br>
                <input type="radio" value="OVER_YEAR" class="form-radio" name="nextPurchase" id="nextPurchase5"> <span class="italic">More than 1 Year</span>
            </li>
            <li class="interested-in">
                <label>What Toyota vehicles are you interested in?</label>
            </li>
            [...]
        </ul>       
        <input type="submit" value="Submit" class="form-button rounded">
        <a class="form-terms" href="/ToyotaMotorApp/mobile/tyw/terms.html">View all the terms and conditions</a>
    </div>
</div> 
```

这是 DOCTYPE（这里使用 HTML5 ——毫无疑问，我已经看到了一些带有 quirksmode 的奇怪东西——但是，不要认为这是这里的问题）。使用现代化工具进行媒体查询（这是一个响应式网站）：

```
<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head> 
```

*   顺便说一句，我是从 IE8 中获取的（所以 IE7 的 html 标记会有所不同——但是，我现在正在不同的 VM 中进行测试）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T00:14:11.310

两个字——怪癖模式。在您使用 IE9 之前，第一个子伪选择器并不能很好地工作。

[http://www.quirksmode.org/css/contents.html#t17](http://www.quirksmode.org/css/contents.html#t17)

# django - 由于在部署到 EC2 实例后按 url 名称调用链接，Django 中的模板语法错误

> ID：12272902
> 
> 赞同：2
> 
> 时间：2012-09-05T00:05:04.613
> 
> 标签：django, url, deployment, amazon-ec2

我收到以下错误：

```
TemplateSyntaxError at /accounts/login/
Caught ImportError while rendering: No module named urls 
```

由于模板中的这段代码：

```
<a href="{% url index %}">{% trans "Home" %}</a> 
```

它发生在尝试将我的 django 项目部署到亚马逊 ec2 实例之后。我很困惑为什么会发生这种情况。

这是完整的跟踪：

```
TemplateSyntaxError at /accounts/login/
Caught ImportError while rendering: No module named urls
Request Method: GET
Request URL:    http://ec2-67-202-59-6.compute-1.amazonaws.com:8000/accounts/login/
Django Version: 1.3
Exception Type: TemplateSyntaxError
Exception Value:    
Caught ImportError while rendering: No module named urls
Exception Location: /opt/bitnami/apps/django/lib/python2.6/site-packages/django/utils/importlib.py in import_module, line 35
Python Executable:  /opt/bitnami/python/bin/.python.bin
Python Version: 2.6.5
Python Path:    
['/opt/bitnami/projects/Project',
 '/opt/bitnami/python/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg',
 '/opt/bitnami/python/lib/python2.6/site-packages/MySQL_python-1.2.3c1-py2.6-linux-i686.egg',
 '/opt/bitnami/python/lib/python2.6/site-packages/haystack-0.16-py2.6.egg',
 '/opt/bitnami/python/lib/python2.6/site-packages/argparse-1.2.1-py2.6.egg',
 '/opt/bitnami/python/lib/python2.6/site-packages/python_ptrace-0.6.4-py2.6.egg',
 '/opt/bitnami/python/lib/python2.6/site-packages/jsonfield-0.9-py2.6.egg',
 '/opt/bitnami/python/lib/python2.6/site-packages/django_pagination-1.0.7-py2.6.egg',
 '/opt/bitnami/python/lib/python2.6/site-packages/django_picklefield-0.2.0-py2.6.egg',
 '/opt/bitnami/python/lib/python2.6/site-packages/django_registration-0.7-py2.6.egg',
 '/opt/bitnami/python/lib/python2.6/site-packages/django_jsonfield-0.8.5-py2.6.egg',
 '/opt/bitnami/python/lib/python2.6/site-packages/South-0.7.3-py2.6.egg',
 '/opt/bitnami/python/lib/python2.6/site-packages/django_haystack-1.2.6-py2.6.egg',
 '/opt/bitnami/apps/django/lib/python2.6/site-packages',
 '/opt/bitnami/projects/Project',
 '/opt/bitnami/python/lib/python26.zip',
 '/opt/bitnami/python/lib/python2.6',
 '/opt/bitnami/python/lib/python2.6/plat-linux2',
 '/opt/bitnami/python/lib/python2.6/lib-tk',
 '/opt/bitnami/python/lib/python2.6/lib-old',
 '/opt/bitnami/python/lib/python2.6/lib-dynload',
 '/opt/bitnami/python/lib/python2.6/site-packages',
 '/opt/bitnami/python/lib/python2.6/site-packages/PIL',
 '/opt/bitnami/projects/Project/cookbook']
Server time:    Tue, 4 Sep 2012 18:56:56 -0500
Template error

In template /opt/bitnami/projects/Project/templates/registration/base.html, error at line 56
Caught ImportError while rendering: No module named urls
46      </div><!--left_pane-container-->
47  </div><!--left_pane-->
48      
49  {% block container %}   
50  <div id="container">    
51      <div id="container_header">
52          <div id="header-content-container">
53                  <div id="container_header-items">
54                          {% block header_items %}
55                          {% endblock %}
56                          <a href="{% url index %}">{% trans "Home" %}</a> | 
57                          {% if user.is_authenticated %}
58                          {{ user.username }} 
59                          (<a href="{% url auth_logout %}">{% trans "Log out" %}</a> | 
60                          <a href="{% url auth_password_change %}">{% trans "Change password" %}</a>)
61                          <form action="/search/" method="get">
62                              <label for="id_q">Search:</label>
63                              <input id="id_q" name="q" type="text">
64                              <input type="submit" value="Submit">
65                          </form>
66                          {% else %} 
```

这是完整的回溯：

```
Environment:

Request Method: GET
Request URL: http://ec2-67-202-59-6.compute-1.amazonaws.com:8000/accounts/login/

Django Version: 1.3
Python Version: 2.6.5
Installed Applications:
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.comments',
 'django.contrib.sites',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'pagination',
 'cookbook',
 'registration',
 'ajax_validation',
 'south',
 'django.contrib.humanize',
 'accounts',
 'haystack',
 'json']
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'pagination.middleware.PaginationMiddleware')

Template error:
In template /opt/bitnami/projects/Project/templates/registration/base.html, error at line 56
   Caught ImportError while rendering: No module named urls
   46 :     </div><!--left_pane-container-->

   47 : </div><!--left_pane-->

   48 :     

   49 : {% block container %}   

   50 : <div id="container">    

   51 :     <div id="container_header">

   52 :         <div id="header-content-container">

   53 :                 <div id="container_header-items">

   54 :                         {% block header_items %}

   55 :                         {% endblock %}

   56 :                         <a href=" {% url index %} ">{% trans "Home" %}</a> | 

   57 :                         {% if user.is_authenticated %}

   58 :                         {{ user.username }} 

   59 :                         (<a href="{% url auth_logout %}">{% trans "Log out" %}</a> | 

   60 :                         <a href="{% url auth_password_change %}">{% trans "Change password" %}</a>)

   61 :                         <form action="/search/" method="get">

   62 :                             <label for="id_q">Search:</label>

   63 :                             <input id="id_q" name="q" type="text">

   64 :                             <input type="submit" value="Submit">

   65 :                         </form>

   66 :                         {% else %}

Traceback:
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/utils/decorators.py" in _wrapped_view
  93\.                     response = view_func(request, *args, **kwargs)
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/views/decorators/cache.py" in _wrapped_view_func
  79\.         response = view_func(request, *args, **kwargs)
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/contrib/auth/views.py" in login
  69\.                               context_instance=RequestContext(request, current_app=current_app))
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/shortcuts/__init__.py" in render_to_response
  20\.     return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs)
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/template/loader.py" in render_to_string
  188\.         return t.render(context_instance)
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/template/base.py" in render
  123\.             return self._render(context)
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/template/base.py" in _render
  117\.         return self.nodelist.render(context)
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/template/base.py" in render
  744\.                 bits.append(self.render_node(node, context))
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/template/debug.py" in render_node
  73\.             result = node.render(context)
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/template/loader_tags.py" in render
  127\.         return compiled_parent._render(context)
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/template/base.py" in _render
  117\.         return self.nodelist.render(context)
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/template/base.py" in render
  744\.                 bits.append(self.render_node(node, context))
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/template/debug.py" in render_node
  73\.             result = node.render(context)
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/template/loader_tags.py" in render
  64\.             result = block.nodelist.render(context)
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/template/base.py" in render
  744\.                 bits.append(self.render_node(node, context))
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/template/debug.py" in render_node
  73\.             result = node.render(context)
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/template/loader_tags.py" in render
  64\.             result = block.nodelist.render(context)
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/template/base.py" in render
  744\.                 bits.append(self.render_node(node, context))
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/template/debug.py" in render_node
  73\.             result = node.render(context)
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/template/defaulttags.py" in render
  437\.             url = reverse(view_name, args=args, kwargs=kwargs, current_app=context.current_app)
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/core/urlresolvers.py" in reverse
  391\.             *args, **kwargs)))
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/core/urlresolvers.py" in reverse
  312\.         possibilities = self.reverse_dict.getlist(lookup_view)
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/core/urlresolvers.py" in _get_reverse_dict
  229\.             self._populate()
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/core/urlresolvers.py" in _populate
  208\.                     for name in pattern.reverse_dict:
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/core/urlresolvers.py" in _get_reverse_dict
  229\.             self._populate()
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/core/urlresolvers.py" in _populate
  197\.         for pattern in reversed(self.url_patterns):
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/core/urlresolvers.py" in _get_url_patterns
  279\.         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/core/urlresolvers.py" in _get_urlconf_module
  274\.             self._urlconf_module = import_module(self.urlconf_name)
File "/opt/bitnami/apps/django/lib/python2.6/site-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)

Exception Type: TemplateSyntaxError at /accounts/login/
Exception Value: Caught ImportError while rendering: No module named urls 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T02:25:21.110

我重新启动了我的亚马逊实例并重新完成了所有操作，并且第二次成功了

谢谢

# iphone - convertRect 获取超级视图中的相对位置

> ID：12272906
> 
> 赞同：3
> 
> 时间：2012-09-05T00:05:18.137
> 
> 标签：iphone, objective-c, ios, ipad, uiview

我有一堆放置在 UIViewController1 中的水平 UITableView。我想找到被点击的 UITableViewCell 的位置，我想根据 UIViewController1 获得位置。所以这就是我在 didSelectRowAtIndexPath 中所做的：

```
MyCell *cell = (MyCell *)[tableView cellForRowAtIndexPath:indexPath];

                UIView *animatedView = [[UIView alloc] initWithFrame:cell.frame];
 [animatedView setFrame:[animatedView convertRect:animatedView.frame toView:self.newsRackController.view]]; 
```

但是，这似乎不能正确转换它。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T00:28:39.497

您需要从 UITableView 的视图转换 UITableViewCell 的 CGRect，然后将其再次转换为您的视图控制器视图。

但不是所有这些，也许你可以只使用 UITableView 的方法

```
- (CGRect)rectForRowAtIndexPath:(NSIndexPath *)indexPath 
```

获取此 CGRect 并将其转换为您的 UIViewController 的视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T00:35:07.040

这是因为`animatedView`不属于任何父母，而您正在使用`frame`as `bounds`。您应该首先找到框架并`animatedView`相应地进行初始化。

```
MyCell *cell = (MyCell *)[tableView cellForRowAtIndexPath:indexPath];
CGRect animatedViewFrame = [tableView convertRect:cell.frame toView:self.newsRackController.view];
UIView *animatedView = [[UIView alloc] initWithFrame:animatedViewFrame]; 
```

# python - 无法让 Python 图片重命名程序正常工作

> ID：12272907
> 
> 赞同：1
> 
> 时间：2012-09-05T00:05:34.520
> 
> 标签：python, rename

该程序应该像这样从命令行运行：

```
python Filename Folder_photos_are_in New_Prefix 
```

它应该只是重命名文件，但它不起作用，所以我让它在运行时分别打印出每个函数。它似乎可以正常工作，直到 SortByMTime 函数从我的列表中删除除最后一个文件之外的所有文件。

**这是代码：**

```
 import sys
    import os
    import random

    def filterByExtension(root, allfiles, extensions):
        files = []
        for f in allfiles:
            hasExt = f.rfind('.')
            if(hasExt > 0):
                ext = f[hasExt+1::].lower()
                if(ext in extensions):
                    f2 = os.path.join(root, f)
                    if(os.path.isfile(f2)):
                        files.append(f)
                    else:
                        print "Matching irregular file " + f
        return files

    def sortByMTime(root, matching):
        photos = []
        for f in matching:
            path = os.path.join(root, f)
            mtime = os.path.getmtime(path)
            photos.append((mtime, f))
            photos.sort()
        return photos

    def assignNames(prefix, inorder):
        kount = str(len(inorder))
        digits = len(kount)
        template = '%%0%dd' % digits
        newnames={}
        kount = 0
        for i in inorder:
            kount += 1
            s = template % kount
            newnames [i[1]] = prefix+s+'.'+i[1].split('.')[1]
        return newnames
        print newnames

    def makeTempName(allfiles):
        r = random.randrange(0,1000000000)
        name = "__temp%i__" % r
        while name in allfiles:
            r+=1
            name = "__temp%i__" % r
        return name

    def makeScript(inorder, newnames, tempname):
        chain = []
        inthechain = {}
        script = []
        for i in inorder:
            if i not in newnames:
                continue
            if newnames[i] == id:
                del newnames[i]
                continue
            if newnames[i] not in newnames:
                target = newnames[i]
                script.append( (i,target) )
                del newnames[i]
                    continue
            else:
                link = i
                while True:
                    target = newnames[i]
                    chain.append( (link, target) )
                    inthechain[link] = True
                    link = target
                    if link not in newnames:
                        break
            chain.reverse()
            for (a, b) in chain:
                print "This is in the chain: "
                print chain
                script.append(a,b)
                del newnames[a]
        return script

    def doRenames(root, script):
        for (old, new) in script:
            print "%s -> %s" %(old, new)
            fulloldpath=os.path.join(root, old)
                fullnewpath = os.path.join(root, new)
            if os.path.exists(fullnewpath):
                print "File already exists"
                os.exit(1)
            else:
                os.rename(fulloldpath, fullnewpath)

    def main():
        usrdir = []
        allfiles = []
        path = []
        prefix = ''
        args = sys.argv
        args.pop(0)  #remove first thing from list
        if len(args) == 2: #Directory and Prefix are provided
            print "Directory: ", args[0]
            print "Prefix: ", args[1]
            usrdir = args[0]
            path = os.path.abspath(usrdir)
            prefix = os.path.basename(path)
        if len(args) == 1: #Only directory is provided
            args.append(args[0]) #Makes the directory name the prefix as well
            print "Directory: ", args[0]
            print "Prefix: ", args[1]
            usrdir = args[0]
            path = os.path.abspath(usrdir)
            prefix = os.path.basename(path)
        if len(args) == 0 or len(args) > 2:  #ends the programs because wrong number of arguments.
            print "INVALID Number of Arguments:"
            print "Usage: python bulkrename.py <directory> [<prefix>]"    
            exit(1)
        allfiles = os.listdir(usrdir)
        print "Printout of allfiles"
        print allfiles
        print
        root = os.path.abspath(args[0])
        print "root: ", root
        print
        extensions = ['jpeg', 'jpg', 'png', 'gif']   
        print "What Extensions should be able to be used: " 
        print extensions
        print
        matching = filterByExtension(root, allfiles, extensions)
        print "What comes out of filterByExtension"
        print matching
        print
        inorder = sortByMTime(path, matching)
        print "What comes out of sortByMTime"
        print inorder
        print

        newnames = assignNames(prefix, inorder)
        print "What comes out of assignNames"
        print newnames
        print
        tempname = makeTempName(allfiles)
        print "What comes out of makeTempName"
        print tempname
        print
        script = makeScript(inorder, newnames, tempname)
        print "What comes out of makeScript"
        print script
        print
        doRenames(path, script)
        print "What comes out of doRenames"
        print doRenames
        print

    main() 
```

**这是终端的输出**

```
 virus-haven:CS1410 chrislebaron$ python bulkrenamer.py bulkrename test
    Directory:  bulkrename
    Prefix:  test
    Printout of allfiles
    ['.DS_Store', '20120902Snow_Canyon02.JPG', '20120902Snow_Canyon03.JPG',         '20120902Snow_Canyon05.JPG', '20120902Snow_Canyon06.JPG', '20120902Snow_Canyon08.JPG',         '20120902Snow_Canyon09.JPG', '20120902Snow_Canyon11.JPG', '20120902Snow_Canyon12.JPG',         'airplane.png', 'BackNoText.jpg', 'blah', 'FrontNoText.jpg', 'glitchbusters.jpg',         'IMG_7663.JPG', 'IMG_7664.JPG', 'Pomegranates.jpg', 'rccar.png']

    root:  /Users/chrislebaron/Documents/School/CS1410/bulkrename

    What Extensions should be able to be used: 
    ['jpeg', 'jpg', 'png', 'gif']

    What comes out of filterByExtension
    ['20120902Snow_Canyon02.JPG', '20120902Snow_Canyon03.JPG', '20120902Snow_Canyon05.JPG', '20120902Snow_Canyon06.JPG', '20120902Snow_Canyon08.JPG', '20120902Snow_Canyon09.JPG', '20120902Snow_Canyon11.JPG', '20120902Snow_Canyon12.JPG', 'airplane.png', 'BackNoText.jpg', 'FrontNoText.jpg', 'glitchbusters.jpg', 'IMG_7663.JPG', 'IMG_7664.JPG', 'Pomegranates.jpg', 'rccar.png']

    What comes out of sortByMTime
    [(1322960835.0, 'rccar.png')]

    What comes out of assignNames
    {'rccar.png': 'bulkrename1.png'}

    What comes out of makeTempName
    __temp55210675__

    What comes out of makeScript
    []

    What comes out of doRenames
    <function doRenames at 0x100dede60>

    virus-haven:CS1410 chrislebaron$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T00:14:08.763

你搞砸了你的缩进，混合了空格和制表符。用于`python -tt`验证。

# c++ - QtPushButton 不会点击

> ID：12272910
> 
> 赞同：1
> 
> 时间：2012-09-05T00:05:59.667
> 
> 标签：c++, qt, user-interface

您好，我正在学习 Qt[教程](http://zetcode.com/gui/qt4/firstprograms/)，我已经复制了本教程通信部分的代码。代码编译并显示，但我的按钮都不可点击。

主窗口.h

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
class QPushButton;
class QLabel;

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();
private slots:
    void OnPlus();
    void OnMinus();
private:
    Ui::MainWindow *ui;
    QLabel *label;
};

#endif // MAINWINDOW_H 
```

主窗口.cpp

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <QtGui>

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    QPushButton *plus = new QPushButton("+", this);
    plus->setGeometry(50, 40, 75, 30);

    QPushButton *minus = new QPushButton("-", this);
    minus->setGeometry(50, 100, 75, 30);

    label = new QLabel("0", this);
    label->setGeometry(190, 80, 20, 30);

    connect(plus, SIGNAL(clicked()), this, SLOT(OnPlus()));
    connect(minus, SIGNAL(clicked()), this, SLOT(OnMinus()));

    ui->setupUi(this);
}

void MainWindow::OnPlus()
{
  int val = label->text().toInt();
  val++;
  label->setText(QString::number(val));
}

void MainWindow::OnMinus()
{
  int val = label->text().toInt();
  val--;
  label->setText(QString::number(val));
}

MainWindow::~MainWindow()
{
    delete ui;
    } 
```

主文件

```
#include <QtGui/QApplication>
#include "mainwindow.h"
#include <QPushButton>
#include <QLabel>

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    MainWindow window;
    window.show();

    return app.exec();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T00:24:36.243

您的问题出在这一行：

```
ui->setupUi(this); 
```

它为您的主窗口创建了一个不可见的中央小部件，它阻止了所有发往您的按钮的事件，这就是为什么当您单击它们时它们不会被按下的原因。将此行移动到构造函数的开头，`MainWindow`问题就会消失。

# php - 如何使用php从flash重定向页面

> ID：12272915
> 
> 赞同：2
> 
> 时间：2012-09-05T00:07:06.320
> 
> 标签：php, flash, web-applications

你好社区我有以下场景。

我有一个带有按钮的 swf，可将 URL 请求发送到 php 文件。以下是哪个。

```
 <?php
      session_start();

      if(isset($_SESSION['user'])){

        header ('Location: http://mydomain.com/test/reroute.php');
        exit();
      }
   ?> 
```

但是，php 文件不会重新路由到所需的页面。我错过了什么吗？

非常感谢你，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:42:45.180

要从 Flash 转到页面，您需要执行[`navigateToURL`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/package.html)以下操作：

```
navigateToURL(new URLRequest("http://mydomain.com/test/reroute.php"), "_self"); 
```

**编辑** 要对重定向网址进行软编码，我建议您这样做（我怀疑这与您要查找的内容更相关）

```
private var loader:URLLoader=new URLLoader();

private function init():void {
    //In the class initialize handler
    loader.addEventListener(Event.COMPLETE, redirectReceived);
}

private function redirectReceived(e:Event):void {
    if(StringUtil.trim(e.target.data).length > 0) {
        navigateToURL(new URLRequest(e.target.data), "_self");
    }
}

private function buttonClick(e:MouseEvent):void {
    loader.load(new URLRequest("http://path_to_the_php_which_tells_you_where_to_redirect"));
} 
```

告诉你重定向到哪里的 php 将是这样的：

```
<?php
      session_start();

      if(isset($_SESSION['user'])){

        echo('Location: http://mydomain.com/test/reroute.php');

      }
?> 
```

# javascript - Javascript 无法在 IE 上编译，但可以在 Chrome 上运行

> ID：12272919
> 
> 赞同：0
> 
> 时间：2012-09-05T00:07:27.793
> 
> 标签：javascript, cross-browser

我正在使用 Javascript 编写一个搜索功能，该功能已接近完成并且在 chrome 上运行良好，但在资源管理器中却不行。我使用了资源管理器开发工具，它告诉我这是它无法处理的行：

```
if (compareElement.indexOf(compareString)!== -1 &&
    processFindings.indexOf(processes[i]) === -1) 
```

错误是 Object 不支持此属性或方法。

用于读取的行：

```
if(compareElement.indexOf(compareString)!== -1) 
```

它工作得很好，只有当我添加了资源管理器无法处理的额外条件时。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T00:16:16.507

并非所有版本的 IE 都有 . `indexOf()`数组的方法。有一个 polyfill 可以很好地工作。

见这里： [https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

但是，这可能会导致无法正确迭代数组的代码出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T00:27:58.200

您可以复制该方法（如果它不存在），但使用原型将要求它在对其进行任何调用之前存在。一个例子：

```
if (!Array.prototype.indexOf) {
    Array.prototype.indexOf = function(searchElement,fromIndex) {
        fromIndex = parseInt(fromIndex || 0);
        for (var i = 0; i < this.length; i++) {
            if (this[i] == searchElement) return i;
        }
        return -1;
    }
} 
```

# c# - C#谷歌驱动sdk。如何获取谷歌驱动器文件夹列表？

> ID：12272920
> 
> 赞同：2
> 
> 时间：2012-09-05T00:07:26.973
> 
> 标签：c#, google-drive-api

我正在编写一个程序以允许用户将文件上传到他们的 Google Drive 帐户。我有上传部分工作并且正在使用 OAuth2。我目前遇到的问题是从用户云端硬盘帐户获取文件夹列表。

我发现了一些应该使用 .setUserCredentials 方法执行此操作的代码，但它不起作用：

```
DocumentsService service1 = new DocumentsService("project");            
        service1.setUserCredentials("user","pass");

        FolderQuery query1 = new FolderQuery();

        // Make a request to the API and get all documents.
        DocumentsFeed feed = service1.Query(query1);

        // Iterate through all of the documents returned
        foreach (DocumentEntry entry in feed.Entries)
        {
            var blech = entry.Title.Text;
        } 
```

什么都没有返回。理想情况下，我想使用 OAuth2 来做到这一点。我一直在尝试使用以下代码，尝试设置身份验证令牌，但我总是被拒绝访问：

```
String CLIENT_ID = "clientid";
String CLIENT_SECRET = "secretid";

var docprovider = new NativeApplicationClient(GoogleAuthenticationServer.Description, CLIENT_ID, CLIENT_SECRET);
var docstate = GetDocAuthentication(docprovider);

DocumentsService service1 = new DocumentsService("project");

service1.SetAuthenticationToken(docstate.RefreshToken);
FolderQuery query1 = new FolderQuery();

DocumentsFeed feed = service1.Query(query1); //get error here

        // Iterate through all of the documents returned
        foreach (DocumentEntry entry in feed.Entries)
        {
            // Print the title of this document to the screen
            var blech = entry.Title.Text;
        } 
```

..

```
 private static IAuthorizationState GetDocAuthentication(NativeApplicationClient client)
    {
        const string STORAGE = "storagestring";
        const string KEY = "keystring";
        string scope = "https://docs.google.com/feeds/default/private/full/-/folder";            
        // Check if there is a cached refresh token available.
        IAuthorizationState state = AuthorizationMgr.GetCachedRefreshToken(STORAGE, KEY);
        if (state != null)
        {
            try
            {
                client.RefreshToken(state);
                return state; // Yes - we are done.
            }
            catch (DotNetOpenAuth.Messaging.ProtocolException ex)
            {

            }
        }

        // Retrieve the authorization from the user.
        state = AuthorizationMgr.RequestNativeAuthorization(client, scope);
        AuthorizationMgr.SetCachedRefreshToken(STORAGE, KEY, state);
        return state;
    } 
```

具体来说，我得到“请求执行失败：[https](https://docs.google.com/feeds/default/private/full/-/folder) ://docs.google.com/feeds/default/private/full/-/folder - 远程服务器返回错误：（401）未经授权”。

我也试过：

```
var docauth = new OAuth2Authenticator<NativeApplicationClient>(docprovider, GetDocAuthentication);
DocumentsService service1 = new DocumentsService("project");
service1.SetAuthenticationToken(docauth.State.AccessToken); 
```

但“状态”总是为空，所以我得到一个空对象错误。我做错了什么，这是怎么做的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T04:26:27.843

您应该使用[Drive SDK](https://developers.google.com/drive)，而不是 Documents List API，它允许您[列出文件夹](https://developers.google.com/drive/v2/reference/children/list)。如果要列出根目录，可以使用“root”作为文件夹 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-19T08:09:07.513

我实际上为 .NET 实现了 GDrive SDK 的 v3 版本，并且还需要搜索文件夹。

我更喜欢请求唯一的所有文件夹，而不是获取所有文件，然后执行 LinQ 查询以仅保留文件夹。

这是我的实现：

```
private async Task<bool> FolderExistsAsync(string folderName)
{
    var response = await GetAllFoldersAsync();
    return response.Files
                   .Where(x => x.Name.ToLower() == folderName.ToLower())
                   .Any();
}

private async Task<Google.Apis.Drive.v3.Data.FileList> GetAllFoldersAsync()
{
    var request = _service.Files.List();
    request.Q = "mimeType = 'application/vnd.google-apps.folder'";
    var response = await request.ExecuteAsync();
    return response;
} 
```

`Q`您也可以通过这种方式请求名称：

```
request.Q = $"mimeType = 'application/vnd.google-apps.folder' and name = '{folderName}'"; 
```

这将导致并简化事情（避免`null`检查）：

```
private async Task<bool> FolderExistsAsync(string folderName)
{
    var response = await GetDesiredFolder(folderName);
    return response.Files.Any();
}

private async Task<FileList> GetDesiredFolder(string folderName)
{
    var request = _service.Files.List();
    request.Q = $"mimeType = 'application/vnd.google-apps.folder' and name = '{folderName}'";
    var response = await request.ExecuteAsync();
    return response;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-28T10:25:48.633

```
private IEnumerable<DocumentEntry> GetFolders(string id) {
    if (IsLogged) {
        var query = new FolderQuery(id)
        {
            ShowFolders = true
        };

        var feed = GoogleDocumentsService.Query(query);

        return feed.Entries.Cast<DocumentEntry>().Where(x => x.IsFolder).OrderBy(x => x.Title.Text);
    }

    return null;
}

    ...
var rootFolders = GetFolders("root");
if (rootFolders != null){
    foreach(var folder in rootFolders){
        var subFolders = GetFolders(folder.ResourceId);
        ...
    }
} 
```

where`GoogleDocumentsService`是一个实例，`DocumentsService`并且`IsLogged`是一个成功记录的标志。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-04T11:48:05.463

我有这种方式从谷歌驱动器获取文件夹列表

```
 FilesResource.ListRequest filelist= service.Files.List();
  filelist.Execute().Items.ToList().Where(x => x.MimeType == "application/vnd.google-apps.folder").ToList() 
```

# debugging - 如何在 WinDBG 中为 aS 命令使用参数

> ID：12272932
> 
> 赞同：1
> 
> 时间：2012-09-05T00:10:04.720
> 
> 标签：debugging, windbg

当我使用以下方式时，win32.hlp可以正确打开。

```
0:000> aS api .shell -x winhlp32.exe -k createfile win32.hlp
0:000> w 
```

但是，当我想使用参数 $arg1 时，如下所示，

```
0:000> aS api .shell -x winhlp32.exe -k ${$arg1} win32.hlp
0:000> w createfile 
```

显示错误消息：

"**找不到 win32.hlp createfile 文件。您要自己尝试查找此文件吗？** "

有任何想法吗？

**[更新]**

snoone 的方式大部分时间都可以正常工作，但有时会显示以下对话框。

显然，文件名“win32.hlp”被误认为是搜索词的一部分。我究竟做错了什么？

![在此处输入图像描述](../Images/f563fb1c633843d5fe172ddc0742c32e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:26:19.560

我不认为这是可能的。这看起来像是别名和脚本之间的混淆。

> 在调试器命令窗口中使用别名
> 
> 定义别名后，您可以在任何命令条目中使用它。别名会自动替换为等效的别名。因此，您可以将别名用作表达式或宏。

因此，别名是简单的文本替换，它们不会像脚本文件那样将参数传递给它们。

我最接近让你的别名工作的是

```
0:000> aS api .shell -x notepad.exe -k 
0:000> api c:\temp\j.txt 
```

这启动了notepad.exe 打开`c:\temp\j.txt`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:17:59.417

杰森是对的，你不能传递这样的论点。为了实现这一点，您需要通过脚本文件间接执行此操作。

例如，创建一个文件 e:\hlplaunch.wbs 并在其中放入以下行：

```
.shell -x winhlp32.exe -k ${$arg1} win32.hlp 
```

然后创建别名来启动脚本，而不是直接创建 shell：

```
aS ${/v:api} "$$>a<e:\\hlplaunch.wbs" 
```

然后，您可以使用您使用的相同命令启动帮助查看器：

```
api createfile 
```

# iphone - NSMutableData 错误 (iPhone)

> ID：12272934
> 
> 赞同：1
> 
> 时间：2012-09-05T00:10:43.543
> 
> 标签：iphone, cocoa

我使用 NSMutableData 对象来存储代表系列数据的 32 字节结构列表。这些系列可能被扩展、添加、对齐等。为了节省不必要对象的分配，我尝试将字节扩展和附加到现有对象而不是分配新对象。

我今天注意到模拟器中有一些奇怪的行为：1）使用 setLength 和 increaseByLength 并不总是将所有新字节归零，2）在修改后使用这些对象会导致崩溃。崩溃都发生在非常不同的区域，但总是 EXC_BAD_ACCESS。经过相当多的调试后，我最终通过 mutableCopy 分配了新对象以供使用，并在完成后将它们分配给我的对象属性。这解决了我遇到的所有问题。

***我在后台线程中处理这些对象，但已将所有操作包装在一个同步块中，并且无法观察到相关对象的任何竞争条件。

有没有人注意到类似的怪事？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:03:48.710

我还没有收到这个答案，所以我想我会跟进我的解决方案。我最终根据需要重新分配了新的 NSData / NSMutableData 对象，并在将其包装在 NSData 对象中之前直接使用内存。

# javascript - Jquery 动画导航

> ID：12272935
> 
> 赞同：0
> 
> 时间：2012-09-05T00:10:52.540
> 
> 标签：javascript, jquery

在浏览不同页面时，我正在尝试复制该网站[http://fivetailors.com/#!home的动画/隐藏属性。](http://fivetailors.com/#!home)每个“页面”都表示为自己的 div，因此该网站只有一个页面。当前的“页面”和用户正在访问的“页面”是唯一应该可见的两个 div。当用户点击一个新的“页面”时，它会使用滚动和动画来显示该内容。

在当前状态下，当前 div 和它们正在访问的 div 之间的所有 div 都会显示，但它们应该被隐藏。有什么建议么？

```
$(document).ready(function(){
    $(".page").hide();
    $("#page0").show();

    var lastPage = "#page0";

    $('#nav ul li a').click(function(){

        var el = $(this).attr('href');
        var elWrapped = $(el);

        $(el).show();

        scrollToDiv(elWrapped,40);
        sleep(500);

        $(lastPage).hide();
        lastPage=el;
        return false;

    });

    function scrollToDiv(element,navheight){

        var offset = element.offset();
        var offsetTop = offset.top;
        var totalScroll = offsetTop-navheight;

        $('body,html').animate({
                scrollTop: totalScroll
        }, 500);

    }   
});

$(window).bind('scroll',function(e){
    parallaxScroll();
}); 
```

# pug - 是否可以在 Jade 文件中使用内嵌 Stylus 代码的 Stylus 插件？

> ID：12272936
> 
> 赞同：5
> 
> 时间：2012-09-05T00:10:52.440
> 
> 标签：pug, stylus

我希望能够创建一个网页临时文件目录，其中每个文件都是一个独立的页面。

使用常规的 HTML/CSS/JS 这很容易：

```
<head>
    <style>
        p {
            color: red;
        }
    </style>
</head>
<body>
    <p>lololol</p>
</body> 
```

使用 Jade/Stylus/CoffeeScript 也同样简单：

```
head
    :stylus
        p
            color red
body
    p lololol 
```

问题是，以这种方式使用 Stylus 插件没有明确的方法。具体来说，我想使用**[colorspaces.js](http://boronine.com/colorspaces.js/#stylus_support)**和**nib**更有效地试验颜色：

```
head
    :stylus
        @import 'nib'
        p
            color CIELCH(20.470, 74.265, 314.113)
            background-color linear-gradient(white, black)
body
    p lololol 
```

# 我目前正在使用的解决方法

* * *

你可以通过改变[这些行](https://github.com/visionmedia/jade/blob/66fc35f9093f7721ac354815c804f944e3027a31/lib/filters.js#L28-41)来分叉 Jade ：

```
 /**
   * Transform stylus to css, wrapped in style tags.
   */

  stylus: function(str, options){
+   colorspaces = require('colorspaces');
+   nib = require('nib');
    var ret;
    str = str.replace(/\\n/g, '\n');
    var stylus = require('stylus');
-   stylus(str, options).render(function(err, css){
+   stylus(str, options).use(colorspaces()).use(nib()).render(function(err, css){
      if (err) throw err;
      ret = css.replace(/\n/g, '\\n');
    });
    return '<style type="text/css">' + ret + '</style>'; 
  }, 
```

如果您安装 Jade 的依赖项（我必须`npm install commander`和`npm install mkdirp`），您可以导航到`/jade_fork/bin/`并执行`./jade name_of_file.jade`.

* * *

但出于维护原因，我更愿意留在 Jade 的主要分支上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:27:28.617

**更新：**

这是我发现的最好方法：

另存为例如`~/bin/jade`：

```
#!/usr/bin/env node

var jade = require('jade');

jade.filters.stylus = // your code from above

require('jade/bin/jade'); 
```

它将与 完全一样`/usr/local/bin/jade`，除了它将使用您的代码来编译手写笔，使用 nib 等。

* * *

**老答案：**

我建议你这样做：

```
var jade = require('jade');

jade.filters.stylus = // your code from above

jade.compile( /* ... */ ); 
```

你失去了jade命令行脚本，但你应该能够以这种方式编译你的文件，同时依赖于jade master。

# ruby-on-rails - 匹配运行匹配器时Rspec自定义失败消息错误

> ID：12272938
> 
> 赞同：0
> 
> 时间：2012-09-05T00:10:59.703
> 
> 标签：ruby-on-rails, rspec, capybara

我正在使用 Steak 进行验收测试，因为我根本不喜欢 Cucumber，尽管我在测试的方式中使用了一些 Cucumber 概念。我喜欢声明式和命令式的测试风格，我将一些期望抽象到精心设计的自定义 rspec 匹配器中，这些匹配器在 match 方法中使用其他匹配器，这里有一个例子：

```
RSpec::Matchers.define :show_post do |post|
  match do |page|
    within '.post' do
      page.should have_content post.title
      page.should have_content post.tagline
      page.should have_content post.body
      page.should list_author  post.author
    end
  end
end 
```

我遇到的唯一问题是，如果我的匹配器失败，我会收到一条通用消息，它不会让我了解丢失的内容，而我真正想要的是现在不满足构成自定义匹配器的期望之一.

我已经忍受这种麻烦有一段时间了，因为我真的很喜欢能够做到的表现力：

```
page.should show_post Post.last 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T00:55:23.533

知道了：

```
class ShowsPost
  include Capybara::RSpecMatchers

  def initialize post
    @post = post
  end

  def matches? page
    page.should have_content @post.title
    page.should have_content @post.tagline
    page.should have_content @post.body
    page.should list_author  @post.author
  end
end

def show_post post
  ShowsPost.new(post)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:22:51.407

更好的是：

```
module DefineMatcher
  def define_matcher name, &block
    klass = Class.new do
      include Capybara::RSpecMatchers

      attr_reader :expected

      def initialize expected
        @expected = expected
      end

      define_method :matches?, &block
    end

    define_method name do |expected|
      klass.new expected
    end
  end
end

module PageMatchers
  extend DefineMatcher

  define_matcher :show_notice do |page|
    within '.alert-notice' do
      page.should have_content expected
    end
  end
end

RSpec.configuration.include PageMatchers, :type => :acceptance 
```

# sql - SQL Server DateTimeOffset 匹配相同的“天”

> ID：12272945
> 
> 赞同：8
> 
> 时间：2012-09-05T00:12:17.990
> 
> 标签：sql, tsql, datetimeoffset

我的应用程序需要收集全球所有地点的“星期二”购买，其中“星期二”是该地点的星期二（不考虑时区）。如果用户下周需要重新运行报告，我仍然需要获取“上周二”的数据。我们所有的数据都使用 DateTimeOffset 存储。

所以 9/4/12 00:00:00 -7 到 9/4/12 23:59:59 -7 必须匹配 9/4/12 00:00:00 +11 到 9/4/12 23:59： 59 +11 当我执行我的 WHERE 子句时。

我无法在 WHERE 子句中转换为 UTC，因为这将获取伦敦“星期二”的数据（取决于 DST），而不是该位置的星期二。

我尝试从 DateTimeOffset 转换为 DateTime，但这似乎转换为 UTC。（在我的测试中，通过 9/1/12 到 9/30/12 获取 8/31/12 数据。）

用 TSQL 做这样的事情有诀窍吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T00:51:45.993

恕我直言

DateTimeOffset = DateTime+Offset（来自 UTC）

因此，您的数据已经代表了客户的本地日期和时间。只需将其转换为 DateTime，您将获得客户端的本地日期和时间。

但是，如果您想将偏移量添加到日期时间并想要生成的日期时间，那么

```
DECLARE @PurchaseDate DATETIMEOFFSET(7) = CAST('2007-05-08 12:30:29.1234567 +5:00' AS  datetimeoffset(7)) 

SELECT  CAST(SWITCHOFFSET (@PurchaseDate , '+00:00') AS DATETIME) 
```

查看此博客以获取更多信息。

[http://blogs.msdn.com/b/bartd/archive/2009/03/31/the-death-of-datetime.aspx](http://blogs.msdn.com/b/bartd/archive/2009/03/31/the-death-of-datetime.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T20:27:00.890

当转换 a 时`DATETIMEOFFSET`，`DATETIME`它将日期和时间*作为值中的偏移量，*并简单地删除时区。`DATE`转换为or时也是如此`TIME`。因此，我认为您可以简单地将列转换为`DATE`并将其与您希望匹配的仅日期值进行比较：

```
DECLARE @targetDate DATETIME2 = '2012-09-04' --Or we could use DATE here
SELECT [PurchaseId], [PurchaseTime], CAST([PurchaseTime] AS DATE) AS "PurchaseDate"
FROM [Purchases]
WHERE CAST([PurchaseTime] AS DATE) = @targetDate 
```

我不确定这会有多有效（如果提供者真的很聪明，希望不会很糟糕——SQL Server 可能会这样），但您也可以通过限制原始列值来改进它：

```
DECLARE @targetDate DATETIME2 = '2012-09-04' --DATETIME2 so we can adjust by hours
SELECT [PurchaseId], [PurchaseTime], CAST([PurchaseTime] AS DATE) AS "PurchaseDate"
FROM [Purchases]
WHERE CAST([PurchaseTime] AS DATE) = @targetDate --Keep only the local-date matches
    AND [PurchaseTime] >= DATEADD(hh, -14, @targetDate) --Up to 14-hour time zone offset
    AND [PurchaseTime] <= DATEADD(hh, 38, @targetDate) --24 hours later plus 14 
```

这应该有效地索引到一组可能性，然后在转换为本地日期时正确过滤。请注意，时区偏移最长可达 14 小时（我知道新西兰最远的时间是 +13:00，但根据[MSDN](http://msdn.microsoft.com/en-us/library/bb630289.aspx) ，它们可以达到 +/- 14:00 ），@targetDate 将在天，因此它与 14 小时前和 24+14=38 小时后进行比较。DATETIME2 与 DATETIMEOFFSET 具有相同的范围和精度，因此它比原始 DATETIME 更好（但它也可以与 DATETIME 一起使用）。

# android - 从视图中调用新意图时会发生什么？

> ID：12272948
> 
> 赞同：1
> 
> 时间：2012-09-05T00:12:36.717
> 
> 标签：android, loops, android-activity, surfaceview, lag

我尝试`intent`使用这种方法从我的 gameView 开始一个新的：

```
 if(happy.getHP() <= 0){ //if my main-character dies
            thread.setRunning(false);
            Context context = getContext();
            Intent intent = new Intent("nielsen.happy.activities.ENDSCREEN");
            context.startActivity(intent); 
```

}

如果我不这样做`thread.setRunning(false);`，endScreen 会出现，但它的按钮不起作用，但如果我停止我的 mainThread，它们会起作用。

无论如何，这段代码的问题在于，当我的角色死亡时，它会冻结 3-4 秒，然后画面会闪烁一秒钟，然后 gameView 会闪烁一秒钟，然后画面会真实出现，并且按钮可以正常工作。

当我从另一个活动开始一个活动时，比如当我在菜单中按“开始游戏”时，我没有遇到这个问题。我真的不明白这里发生了什么使它像这样滞后。

在下面添加我的线程：

```
 public void run() {
    Canvas canvas;
    Log.d(TAG, "Starting game loop");
    // initialise timing elements for stat gathering
    initTimingElements();

    long beginTime;     // the time when the cycle begun
    float time1 = System.currentTimeMillis();
    float time2;
    //long timeDiff;        // the time it took for the cycle to execute
    int sleepTime;      // ms to sleep (<0 if we're behind)
    int framesSkipped;  // number of frames being skipped 

    sleepTime = 0;

    while (running) {
        canvas = null;
        // try locking the canvas for exclusive pixel editing
        // in the surface
        try {
            canvas = this.surfaceHolder.lockCanvas();
            synchronized (surfaceHolder) {
                beginTime = System.currentTimeMillis();
                framesSkipped = 0;  // resetting the frames skipped
                // update game state 
                this.gamePanel.update();
                // render state to the screen
                // draws the canvas on the panel
                this.gamePanel.render(canvas);              
                // calculate how long did the cycle take
                timeDiff = System.currentTimeMillis() - beginTime;
                // calculate sleep time
                sleepTime = (int)(FRAME_PERIOD - timeDiff);

                if (sleepTime > 0) {
                    // if sleepTime > 0 we're OK
                    try {
                        // send the thread to sleep for a short period
                        // very useful for battery saving
                        Thread.sleep(sleepTime);    
                    } catch (InterruptedException e) {}
                }

                while (sleepTime < 0 && framesSkipped < MAX_FRAME_SKIPS) {
                    // we need to catch up
                    this.gamePanel.update(); // update without rendering
                    sleepTime += FRAME_PERIOD;  // add frame period to check if in next frame
                    framesSkipped++;
                }

                // for statistics
                framesSkippedPerStatCycle += framesSkipped;
                // calling the routine to store the gathered statistics
                storeStats();
            }
        } finally {
            // in case of an exception the surface is not left in 
            // an inconsistent state
            if (canvas != null) {
                surfaceHolder.unlockCanvasAndPost(canvas);
            }
        }   // end finally
    }
} 
```

在下面添加整个方法：

```
 private void checkCollision(Canvas canvas) {
    Rect h1 = happy.getBounds();
    for (int i = 0; i < enemies.size(); i++) {
        Rect e1 = enemies.get(i).getBounds();
        if (h1.intersect(e1)){
            if(enemies.get(i).getX() < controls.pointerPosition.x){
                enemies.get(i).setX(-20);
            }else if (enemies.get(i).getX() > controls.pointerPosition.x){
                enemies.get(i).setX(20);
            }else if(enemies.get(i).getY() < controls.pointerPosition.y){
                enemies.get(i).setY(-20);
            }else if(enemies.get(i).getY() > controls.pointerPosition.y){
                enemies.get(i).setY(20);
            }
            if(enemies.get(i).getCooldown() <= 0){
            happy.damageHP(10);
            score.incScore(-10);
            enemies.get(i).setCooldown();
            }
        }
        if(happy.getHP() <= 0){

            thread.setRunning(false);
            try {
                thread.join();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Context context = getContext();
            Intent intent = new Intent("nielsen.happy.activities.ENDSCREEN");
            context.startActivity(intent);
            //end-screen                           !!!!!!!
        }
        if(enemies.get(i).getHP() <= 0){
            enemies.get(i).death(canvas, enemies);
            score.incScore(5);
            break;
        }   
        for (int j = 0; j < bullets.size(); j++) {
            Rect b1 = bullets.get(j).getBounds();
            if (b1.intersect(e1)) {
                enemies.get(i).damageHP(5);
                bullets.remove(j);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T00:18:11.827

我必须看看你的线程在做什么才能确定，但​​我很确定这样的事情正在发生：

*   您调用 setRunning(false) 在线程类中设置一些标志。

*   您启动了新意图，但线程尚未停止，因为它尚未到达检查运行标志的部分

*   线程（尚未暂停）开始对 gui 进行更改，这混淆了认为视图应该处于非活动状态的 android UI

*   线程到了等待 setRunning(true) 的地步，一切又恢复了快乐。

如果这是真的，您可以通过等待线程在 setRunning(true) 上被阻塞，然后创建新意图来修复。

# asp.net-mvc-3 - MVC3 - 从 GET 请求调用登录方法

> ID：12272956
> 
> 赞同：0
> 
> 时间：2012-09-05T00:13:43.400
> 
> 标签：asp.net-mvc-3, authentication

我需要能够从 GET 请求中调用内置的 [HttpPost] Logon 方法（在帐户控制器中）。基本上，一个新帐户将被分配一个临时密码，通过电子邮件发送。用户单击电子邮件中的链接（在 URL 中包含用户 ID 和临时密码），这将在 MVC 应用程序的帐户控制器中处理。我不知道如何处理这个。是否可以从控制器上的 GET 操作方法重定向到 POST 登录操作方法？在维护 HttpContext 对象的同时如何做到这一点？除了使用用户和密码字符串参数创建一个新的 GET 登录方法并重新创建 POST 方法中的逻辑（使用 MembershipServer 和 FormsService 对象）之外，这似乎是不可行的。

**编辑：**对于任何关注这篇文章的人，我最终实施的解决方案是：

*   在评论中使用@Shyju 的建议，我创建了一个新的 GET 操作方法来响应电子邮件链接，该方法返回一个“注册新用户”视图，其中包含传递的用户\pw 的隐藏输入和一个提交按钮。
*   视图回发到正常的登录方法。如果用户或密码没有被改变，用户将被认证
*   我添加了一个全局操作过滤器，用于测试用户对象属性“MustChangePassword”。如果为真，它会重定向到更改密码操作方法。这将发生在任何控制器的任何方法上，除了帐户控制器（因此您实际上可以点击登录、chg pw 和其他方法）
*   然后在“ChangePassword”POST 方法中，成功的密码更改会将“MustChangePassword”属性重置为 false。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T00:21:14.573

您可以为每个用户创建一个唯一的字符串（使用 Guid）并将其作为电子邮件中链接的查询字符串发送。在 GET 操作中验证用户表和临时密码表并获取用户记录并将该用户视为已登录用户。

# excel - Powershell Excel 自动化按日期保存工作簿

> ID：12272960
> 
> 赞同：0
> 
> 时间：2012-09-05T00:14:54.663
> 
> 标签：excel, date, powershell, save

我正在创建一个 powershell 脚本，以使用 SCVMM 中的“get-vm”命令中的信息填充 excel 工作簿。

保存文件路径目前正在进行中。我想每天或每周运行脚本，并使用该日期作为文件名保存生成的 Excel 工作簿。这可能吗？如何生成日期并将其用作保存 excel 输出的文件名？任何帮助都会很棒。

```
#run below line once and then comment out if not in VMM Command Shell. Will import modules for ISE/Powershell.
#Import-Module "C:\Program Files\Microsoft System Center 2012\Virtual Machine Manager\bin\psModules\virtualmachinemanager\virtualmachinemanager"

$server = Get-VMMServer -ComputerName "server"

$vminfo = Get-VM -VMMServer $server 

$xl=New-Object -ComObject "Excel.Application"
$wb=$xl.Workbooks.Add()
$ws=$wb.ActiveSheet
$cells=$ws.Cells
$xl.Visible=$True

$cells.item(1,1)="{0} VMM Server Report" -f $server.Name
$cells.item(1,1).font.bold=$True
$cells.item(1,1).font.size=18

#define some variables to control navigation
$row=3
$col=1

#insert column headings
"Name", "Description", "OperatingSystem", "CPUCount","Memory (GB)", "Status", "Hostname" | foreach {
$cells.item($row,$col)=$_
$cells.item($row,$col).font.bold=$True
$col++
}

foreach ($vm in $vminfo) {
$row++
$col=1
$cells.item($row,$col)=$vm.Name
$col++
$cells.item($row,$col)=$vm.Description
$col++
$cells.item($row,$col)=$vm.OperatingSystem.Name
$col++
$cells.item($row,$col)=$vm.CPUCount
$col++
$cells.item($row,$col)=$vm.Memory/1024
$col++
$cells.item($row,$col)=$vm.Status
$col++
$cells.item($row,$col)=$vm.HostName
}
$objRange = $ws.UsedRange 
$objRange.EntireColumn.Autofit() 

$date = get-date -DisplayHint date 

$filepath="C:\Users\paulm\Documents\"

if ($filepath) {
$wb.SaveAs($filepath)

} 
```

完成的保存脚本如下所示：

```
$date = Get-Date -Format yyyy-MM-dd 

$wb.SaveAs("C:\Users\paulm\Documents\$date")+ ".xls" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T01:02:27.160

其功能是`Get-Date`。不带参数调用它将返回当前日期。像这样的东西

```
(Get-Date -Format yyyy-MM-dd) + ".xls" 
```

会给你一个可用的文件名。

# c# - 在 Page.Load 期间确定是否要处理按钮单击事件

> ID：12272961
> 
> 赞同：2
> 
> 时间：2012-09-05T00:14:56.183
> 
> 标签：c#, asp.net, .net, event-handling

我有 ASPX 网页，上面有一个按钮。一旦用户单击此按钮，请求将提交到服务器并执行按钮单击事件处理程序。

我有一些必须驻留在 Page.Load 上的逻辑，但此逻辑取决于请求是否已通过按钮单击提交。基于[页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)的事件处理程序在页面加载后执行。

**问题**：如何在页面加载中找出页面加载后将执行哪些事件处理程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T01:36:09.370

@akton 的答案可能是您应该做的，但如果您想取消预订并确定在生命周期早期导致回发的原因，您可以查询回发数据以确定点击了什么。但是，这不会为您提供在事件处理期间将执行的实际函数/处理程序。

首先，如果不是`Button`/`ImageButton`引起了回发，控件的 ID 将位于`__EVENTTARGET`. 如果 a`Button`引起了回发，那么 ASP.NET 会做一些“可爱的”事情：它会忽略所有其他按钮，因此只有单击的按钮会显示在表单上。An`ImageButton`有点不同，因为它会发送坐标。您可以包括的实用功能：

```
public static Control GetPostBackControl(Page page)
{
    Control postbackControlInstance = null;

    string postbackControlName = page.Request.Params.Get("__EVENTTARGET");
    if (postbackControlName != null && postbackControlName != string.Empty)
    {
        postbackControlInstance = page.FindControl(postbackControlName);
    }
    else
    {
        // handle the Button control postbacks
        for (int i = 0; i < page.Request.Form.Keys.Count; i++)
        {
            postbackControlInstance = page.FindControl(page.Request.Form.Keys[i]);
            if (postbackControlInstance is System.Web.UI.WebControls.Button)
            {
                return postbackControlInstance;
            }
        }
    }
    // handle the ImageButton postbacks
    if (postbackControlInstance == null)
    {
        for (int i = 0; i < page.Request.Form.Count; i++)
        {
            if ( (page.Request.Form.Keys[i].EndsWith(".x")) || (page.Request.Form.Keys[i].EndsWith(".y")))
            {
                postbackControlInstance = page.FindControl(page.Request.Form.Keys[i].Substring(0, page.Request.Form.Keys[i].Length-2) );
                return postbackControlInstance;
            }
        }
    }
    return postbackControlInstance;
} 
```

话虽如此，如果您可以重构您的控件/页面以延迟执行，那么如果您使用@akton 建议的范例，您的代码将更加清晰/更加健壮。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T00:19:57.193

这个问题可能有更好的解决方案。您是否希望代码仅在页面首次加载并且您正在使用回发时运行？如果是这样，请检查[Page.IsPostBack](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx)属性。如果代码不需要在其他事件处理程序之前运行，请将其移至[OnPreRender](http://msdn.microsoft.com/en-us/library/system.web.ui.control.onprerender.aspx)，因为它会在事件处理程序之后触发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-21T10:19:37.040

这些对我帮助很大：我想从我的网格视图中保存值，它正在重新加载我的网格视图/覆盖我的新值，因为我的 PageLoad 中有 IsPostBack。

```
if (HttpContext.Current.Request["MYCLICKEDBUTTONID"] == null)

{ //Do not reload the gridview.

}

else { reload my gridview. } 
```

来源：[http ://bytes.com/topic/asp-net/answers/312809-please-help-how-identify-button-clicked](http://bytes.com/topic/asp-net/answers/312809-please-help-how-identify-button-clicked)

# excel - CDate 识别澳大利亚日期格式？

> ID：12272962
> 
> 赞同：2
> 
> 时间：2012-09-05T00:15:05.097
> 
> 标签：excel, date, vba

我有一个我在 8 月中旬创建的电子表格，其中有一个表格，从那时起每天都有一列。列标题是当天的日期。日期以我希望的方式显示：“dd/mm/yyyy”

但是，我有宏需要读取这些日期才能执行其工作。因为我使用的是表格，所以日期似乎是文本而不是 5 位数字（当我将标题单元格的格式设置为“常规”时，它仍然是“dd/mm/yyyy”格式而不是更改为 5 位数字。直到 9 月 1 日这才成为问题，之后 CDate（在宏中）开始将这些日期读取为“mm/dd/yyyy”

有没有办法让 CDate 识别澳大利亚日期格式而不是美国日期？或者如果做不到这一点，让表格标题保留为日期而不是文本？我宁愿避免将表转换回范围，因为宏旨在使用表属性、ListColumns 等。

更新：

我已经缩小了问题的范围。这不是日期，而是 ListColumn.Name 属性。出于某种原因，它正在重新转换我的日期。我`Format()`用来设置日期格式，如下所示：

```
CreateHistoryColumn.Name = Format(headerDate, "dd/mm/yyyy")

MsgBox Day(headerDate) & "/" & Month(headerDate) & "/" & Year(headerDate)
MsgBox Format(headerDate, "dd/mm/yyyy")
MsgBox CreateHistoryColumn.Name 
```

`CreateHistoryCol`类的对象在哪里`ListColumn`。3 个 MsgBox 调用显示以下内容：

> 2012 年 6 月 9 日 2012 年 6 月 9 日 2012 年 9 月 6 日

所以`Format()`调用正确地格式化了日期，但调用`ListColumn.Name`用于将格式更改为“mm/dd/yyyy”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T08:09:41.003

从帮助文件：

> **CDate**根据系统的区域设置识别日期格式。如果提供的格式不是已识别的日期设置之一，则可能无法确定正确的日、月和年顺序。

我讨厌依赖语言环境，因为大多数时候它似乎与我的意图相反，而且它使代码的可移植性降低。

我通常会尽可能明确地处理日期：

1.  将您的字符串拆分为各个部分（年、月、日，以及相关的小时、分钟、秒）
2.  粘贴功能中的各个部分`DateSerial`。这将返回一个`Date`类型。（如果适用，您可以添加 的输出`TimeSerial`。）
3.  如果出于显示目的需要，请使用返回字符串`Date`的函数将其格式化为适当的格式。`Format`

[这是一个有效的例子。](https://stackoverflow.com/a/12191525/119775)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T04:26:28.810

正如我在更新中所展示的， ListColumn.Name 方法负责进行不需要的转换。我仍然不知道为什么，但是有任何简单的解决方法：

```
CreateHistoryColumn.Name = CLng(headerDate) 
```

这会强制将标题视为数字，因此可以将其识别为正确的日期。我无法再进一步解释了。

# haskell - 更新 haskeline 中的输出文本

> ID：12272966
> 
> 赞同：9
> 
> 时间：2012-09-05T00:15:42.150
> 
> 标签：haskell, command-line, haskeline

Haskeline 提供函数`outputStr`和`outputStrLn`，输出到`stdout`，但是有没有办法更新已经输出的文本？例如，我在考虑当安装程序显示当前安装百分比时——百分比数字更新。

我需要使用`curses`绑定吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T00:27:36.383

```
delete n = putStr (replicate n '\b') 
```

这（本质上）是 QuickCheck 的工作方式，并且运行良好。我在自己的代码中使用它作为进度指标，它给了我很好的结果。更复杂的东西需要一个 curses 绑定（或等效）。

# cuda - 编写一个在一些压缩数组上运行的简单推力函子

> ID：12272968
> 
> 赞同：1
> 
> 时间：2012-09-05T00:16:10.983
> 
> 标签：cuda, thrust

我正在尝试执行`thrust::reduce_by_key`使用 zip 和排列迭代器。即在几个“虚拟”排列数组的压缩数组上执行此操作。我在编写 functor 的语法时遇到了麻烦`density_update`。

但首先是问题的设置。

这是我的函数调用：

```
thrust::reduce_by_key(  dflagt,
                        dflagtend,
                        thrust::make_zip_iterator( 
                            thrust::make_tuple(
                                thrust::make_permutation_iterator(dmasst, dmapt), 
                                thrust::make_permutation_iterator(dvelt, dmapt),
                                thrust::make_permutation_iterator(dmasst, dflagt),
                                thrust::make_permutation_iterator(dvelt, dflagt)
                            )
                        ),
                        thrust::make_discard_iterator(),
                        danswert,
                        thrust::equal_to<int>(),
                        density_update()
                  ) 
```

`dmapt`,`dflagt`属于`thrust::device_ptr<int>`和`dvelt`,`dmasst`并且`danst`属于 `thrust::device_ptr<double>`.

（它们是我原始 cuda 数组的推力包装器）

数组`mapt`和`flagt`都是索引向量，我需要从中执行从数组`dmasst`和`dvelt`.

在减少步骤之后，我打算将我的数据写入`danswert`数组。由于在减少中使用了多个数组，显然我使用的是 zip 迭代器。

我的问题在于编写`density_update`二元运算的函子。

```
struct density_update
{
  typedef thrust::device_ptr<double> ElementIterator;
  typedef thrust::device_ptr<int>   IndexIterator;
  typedef thrust::permutation_iterator<ElementIterator,IndexIterator> PIt;

  typedef thrust::tuple< PIt , PIt , PIt, PIt> Tuple;
  __host__ __device__
  double operator()(const Tuple& x , const Tuple& y)
  {   
      return    thrust::get<0>(*x) * (thrust::get<1>(*x) - thrust::get<3>(*x)) + \
                thrust::get<0>(*y) * (thrust::get<1>(*y) - thrust::get<3>(*y));
  }
}; 
```

返回的值是**double**。为什么二元运算看起来像上面的仿函数并不重要。我只想知道我将如何在语法上更正上述内容。如上所示，代码引发了许多编译错误。我不确定我哪里出错了。

我在 Ubuntu 10.10 上的 GTX 570 上使用 CUDA 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T03:00:47.607

`density_update`不应该接收迭代器元组作为参数——它需要迭代器引用的元组。

原则上，您可以`density_update::operator()`根据各种迭代器的特定`reference`类型来编写，但让编译器推断参数的类型更简单：

```
struct density_update
{
  template<typename Tuple>
  __host__ __device__
  double operator()(const Tuple& x, const Tuple& y)
  {   
    return thrust::get<0>(x) * (thrust::get<1>(x) - thrust::get<3>(x)) + \
           thrust::get<0>(y) * (thrust::get<1>(y) - thrust::get<3>(y));
  }
}; 
```

# ajax - AJAX 请求停止工作

> ID：12272973
> 
> 赞同：0
> 
> 时间：2012-09-05T00:17:56.977
> 
> 标签：ajax

我有这个 ajax 请求工作，现在它已经停止了。我不相信我更改了任何代码，但谁知道呢。我确实下载并上传了一些新的 jquery，但 ajax 请求不使用 jquery。无论如何，这是一个足球比赛挑选网站，我需要快速修复它。我已经浏览了所有代码，如果有人可以修复它，那么他们一定是上帝。无论如何，只要图片符合截止日期，用户就会点击图片。单击图像时，它会进入功能“teamback”。它进入那里，但它不处理 ajax 请求。当用户选择图像时，它应该使用传递给函数的信息来更新数据库。我已经发布了所有的代码。请帮忙！！

这是用户进行选择的页面......（对不起，有这么多，在此之前还有更多的 php，但我 99% 确定没有必要。）

```
<?php
 // this starts the session 
 session_start();
 $id = $_SESSION['userid'];

  $var = "";
 $varcontact = "<a href='JavaScript:newPopup(\"http://www.yourfantasyfootballreality.com/contact.php\");' class='three'>Contact</a>";
 // echo variable from the session, we set this on our other page 
 if ($_SESSION['userid'] == "") {
        $var = "<a href='JavaScript:newPopup(\"http://www.yourfantasyfootballreality.com/register.html\");' class='two'>Register</a> | <a href='JavaScript:newPopup(\"http://www.yourfantasyfootballreality.com/signin.php\");' class='two'>Sign In</a>";
    } else {
    $var = "Hello, ".$_SESSION['userid'] ."! | " . "<a href=\"http://www.yourfantasyfootballreality.com/logout.php\" class='two'>Log Out</a>";
    }

 //this gets the name of the person selected in the league
 $uniqueid = $_GET["id"];
 $time = time();
 $timedeadline = 1344700055;

 //this connects to the database
$con = mysql_connect("localhost","credential","credential");
mysql_select_db("yourfan_demo", $con);
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <script type="text/javascript" src="jquery-1.8.1.js"></script>
        <script type="text/javascript" src="js/jquery-1.2.6.min.js"></script>
        <script type="text/javascript" src="js/jquery-easing-1.3.pack.js"></script>
        <script type="text/javascript" src="js/jquery-easing-compatibility.1.2.pack.js"></script>
        <script type="text/javascript" src="js/coda-slider.1.1.1.pack.js"></script>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="icon" href="http://www.indiana.edu/favicon.ico" />
        <title>YourFantasyFootballReality</title>
        <link rel="stylesheet" type="text/css" href="stylenewarticle.css" />

        <script type="text/javascript">
        //*******COUNTDOWN TIMER******************//
        CountDownTimer('09/05/2012 8:30 PM', 'newcountdown');

    function CountDownTimer(dt, id)
    {
        var end = new Date(dt);

        var _second = 1000;
        var _minute = _second * 60;
        var _hour = _minute * 60;
        var _day = _hour * 24;
        var timer;

        function showRemaining() {
            var now = new Date();
            var distance = end - now;
            if (distance <= 0) {
                //document.getElementById("newcountdown").style.font-size="1em";
                clearInterval(timer);
                document.getElementById("newcountdown").innerHTML = '00:00:00:00';
                document.getElementById("newcountdown").style.color="red";
                document.getElementById("newcountdown").style.border="3px dashed red";
                document.getElementById("newcountdown").style.bgColor="#FF63AC";

                return;
            }
            var days = Math.floor(distance / _day);
            var hours = Math.floor((distance % _day) / _hour);
            var minutes = Math.floor((distance % _hour) / _minute);
            var seconds = Math.floor((distance % _minute) / _second);

            document.getElementById("newcountdown").innerHTML = days + ':';
            document.getElementById("newcountdown").innerHTML += hours + ':';
            document.getElementById("newcountdown").innerHTML += minutes + ':';
            document.getElementById("newcountdown").innerHTML += seconds + '';
        }

        timer = setInterval(showRemaining, 1000);
    }
    //****************************END OF COUNTDOWN TIMER****************//////
        //this is the user id session stored as a javascript variable
        var userid = "<?=$id?>";
        var uniqueid = "<?=$uniqueid?>";

        // Popup window code
        function newPopup(url) {
            popupWindow = window.open(url,'popUpWindow','height=450,width=600,left=10,top=10,resizable=no,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes')
        }
        function bigimg(x) {
            if (userid == uniqueid) {
            var myDate = new Date(); // Your timezone! 
            var myEpoch = myDate.getTime()/1000; 
            var deadline = '1344700055.000'; 
                //determines if user was on time..if not on time hover enlarge won't work
                if(myEpoch > deadline) {
                    x.style.height="65px";
                    x.style.width="85px";
                    //x.style.opacity="0.5";
                } else {}
            } else {}   
        }
        function defaultimg(x) {
            x.style.height="60px";
            x.style.width="80px";
            x.style.opacity="1.0";
        }
        function teamback(x, act) {
            if (uniqueid == userid) {
            var myDate = new Date(); // Your timezone! 
            var myEpoch = myDate.getTime()/1000; 
            var deadline = '1344700055.000';
                //determines if user was on time..if not on time submitting won't work
                if(myEpoch > deadline) {
                    // update the "actualone" image's source to the sending-image's source
                    var tn = x.id;
                    var sc = x.name;
                    //THIS MUST BE CHANGED BASED ON THE WEEK!!!!!!!!!!!!
                    var week = 1;
                    document.getElementById(act).src = x.src;
                    document.getElementById("curtime").innerHTML = myEpoch;
                    document.getElementById("team").innerHTML = x.id;
                    document.getElementById("scenario").innerHTML = x.name;

                    //AJAX PART
                    var ajaxRequest;  // The variable that makes Ajax possible!
                    try{
                        // Opera 8.0+, Firefox, Safari
                        ajaxRequest = new XMLHttpRequest();
                    } catch (e){
                        // Internet Explorer Browsers
                    try{
                        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
                    } catch (e) {
                    try{
                        ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                    } catch (e){
                        // Something went wrong
                        alert("Your browser broke!");
                        return false;
                    }}}
                    // Create a function that will receive data sent from the server
                    ajaxRequest.onreadystatechange = function(){
                    if(ajaxRequest.readyState == 4){
                        //document.myForm.time.value = ajaxRequest.responseText;
                    }
                    }
                    //here is where we will use the variables userid, tn, and sc
                    var queryString = "?userid=" + userid + "&tn=" + tn + "&sc=" + sc + "&week=" + week;
                    ajaxRequest.open("GET", "makepick.php" + queryString, true);
                    ajaxRequest.send(null); 

                } else {}           
            } else {}   
        }
        </script>

    </head>

                <body class="body">
                <!--Container to hold everything in the middle of page-->
                <div class="container">

                    <!--Facebook Like button-->
                    <iframe class="fb" src="" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100px; height:21px;" allowTransparency="true"></iframe>                         

                    <!--Login and Register links-->
                    <div class="enter">
                        <?=$var?>
                    </div>

                    <!--Contains everything in the menu-->
                    <div class="menutest">
                    <!--the main menu links-->
                    <div id="navigation">
                        <ul>
                        <a class="topic" href="index.php"><li>Home</li></a>
                        <a class="topic" href="pickem.php"><li>Pick Em</li></a>
                        <a class="topic" href="projections.php"><li>Projections</li></a>
                        <a class="topic" href="stats.html"><li>Scoring Leaders</li></a>
                        <a class="topic" href="newarticle.php"><li>Articles</li></a>
                        </ul>
                    </div>
                    <!--the list of scores-->
                    <table id="schedule" border="1">
                    <tr>
                    <td><a class="one" href="http://espn.go.com/nfl/boxscore?gameId=311002003">&nbsp;&nbsp;DAL @NYG</a></td>
                    <td><a class="one" href="http://espn.go.com/nfl/boxscore?gameId=311002003">&nbsp;&nbsp;IND @CHI</td>
                    <td><a class="one" href="http://espn.go.com/nfl/boxscore?gameId=311002003">&nbsp;&nbsp;ATL @KC</td>
                    <td><a class="one" href="http://espn.go.com/nfl/boxscore?gameId=311002003">&nbsp;&nbsp;PHI @CLE</td>
                    <td><a class="one" href="http://espn.go.com/nfl/boxscore?gameId=311002003">&nbsp;&nbsp;WAS @NO</td>
                    <td><a class="one" href="http://espn.go.com/nfl/boxscore?gameId=311002003">&nbsp;&nbsp;STL @DET</td>
                    <td><a class="one" href="http://espn.go.com/nfl/boxscore?gameId=311002003">&nbsp;&nbsp;NE @TEN</td>
                    <td><a class="one" href="http://espn.go.com/nfl/boxscore?gameId=311002003">&nbsp;&nbsp;JAC @MIN</td>
                    <td><a class="one" href="http://espn.go.com/nfl/boxscore?gameId=311002003">&nbsp;&nbsp;BUF @NYJ</td>
                    <td><a class="one" href="http://espn.go.com/nfl/boxscore?gameId=311002003">&nbsp;&nbsp;MIA @HOU</td>
                    <td><a class="one" href="http://espn.go.com/nfl/boxscore?gameId=311002003">&nbsp;&nbsp;SEA @ARI</td>
                    <td><a class="one" href="http://espn.go.com/nfl/boxscore?gameId=311002003">&nbsp;&nbsp;SF @GB</td>
                    <td><a class="one" href="http://espn.go.com/nfl/boxscore?gameId=311002003">&nbsp;&nbsp;CAR @TB</td>
                    <td><a class="one" href="http://espn.go.com/nfl/boxscore?gameId=311002003">&nbsp;&nbsp;PIT @DEN</td>
                    <td><a class="one" href="http://espn.go.com/nfl/boxscore?gameId=311002003">&nbsp;&nbsp;CIN @BAL</td>
                    <td><a class="one" href="http://espn.go.com/nfl/boxscore?gameId=311002003">&nbsp;&nbsp;SD @OAK</td>
                    </tr>
                    </table>

                    </div>

                    <!--the espn ticker-->
                    <div class="ticker">
                    <!--<script type="text/javascript" src="http://cdn.widgetserver.com/syndication/subscriber/InsertWidget.js"></script><script type="text/javascript">if (WIDGETBOX) WIDGETBOX.renderWidget('61d83c1a-939a-460b-8075-91c9e1473aff');</script>
<noscript>Get the <a href="http://www.widgetbox.com/widget/espns-bottom-line-version-20">ESPN's Bottom Line -  Version 2.0</a> widget and many other <a href="http://www.widgetbox.com/">great free widgets</a> at <a href="http://www.widgetbox.com">Widgetbox</a>! Not seeing a widget? (<a href="http://support.widgetbox.com/">More info</a>)</noscript>                    
                    --></div>

            <center><h1>Week 1</h1></center>
            <center><div style="font-size:1.5em; font-weight:bold;">Time Remaining to Make Picks</div></center>
            <center><div id="newcountdown" style="height:40px; width:300px; border:1; background-color:#BABABA; font-size:2em; border:2px ridge gray;"></div></center>
            <!--<center><iframe style="background-color:pink;" src="http://free.timeanddate.com/countdown/i38ik9yz/n417/cf12/cm0/cu4/ct1/cs1/ca0/co1/cr0/ss0/cac000/cpc000/pct/tc66c/fs100/szw320/szh135/tatTime%20Remaining%20to%20Make%20Picks/tac000/tptTime%20Remaining%20to%20Make%20Picks/tpc000/iso2012-08-11T13:00:00/bas2/bat2/bacf00" frameborder="0" width="268" height="40"></iframe></center>-->
            <center><h4><a href="leaguehome.php"><?=$leaguename?></a> : <?=$id?></h4><?echo "Viewing " . $uniqueid . "'s Profile...";?></center>

        <center><div style="width:500px; color:white; font-weight:bold;">Week: <a class="two" href="2012week1.php?id=<? echo $uniqueid?>">1 </a><a class="two" href="2012week2.php?id=<? echo $uniqueid?>">2 </a><a class="two" href="2012week3.php?id=<? echo $uniqueid?>">3 </a>
        <a class="two" href="2012week4.php?id=<? echo $uniqueid?>">4 </a><a class="two" href="2012week5.php?id=<? echo $uniqueid?>">5 </a><a class="two" href="2012week6.php?id=<? echo $uniqueid?>">6 </a><a class="two" href="2012week7.php?id=<? echo $uniqueid?>">7 </a>
        <a class="two" href="2012week8.php?id=<? echo $uniqueid?>">8 </a><a class="two" href="2012week9.php?id=<? echo $uniqueid?>">9 </a><a class="two" href="2012week10.php?id=<? echo $uniqueid?>">10 </a><a class="two" href="2012week11.php?id=<? echo $uniqueid?>">11 </a>
        <a class="two" href="2012week12.php?id=<? echo $uniqueid?>">12 </a><a class="two" href="2012week13.php?id=<? echo $uniqueid?>">13 </a><a class="two" href="2012week14.php?id=<? echo $uniqueid?>">14 </a><a class="two" href="2012week15.php?id=<? echo $uniqueid?>">15 </a>
        <a class="two" href="2012week16.php?id=<? echo $uniqueid?>">16 </a><a class="two" href="2012week17.php?id=<? echo $uniqueid?>">17 </a><a class="two" href="2012weekwc.php?id=<? echo $uniqueid?>">WC </a><a class="two" href="2012weekdiv.php?id=<? echo $uniqueid?>">DIV </a>
        <a class="two" href="2012weekconf.php?id=<? echo $uniqueid?>">CONF </a><a class="two" href="2012weeksb.php?id=<? echo $uniqueid?>">SB </a> </div></center>

            <center><table border="1" style="background-color:white;">
                <tr>
                <th>Game</th>
                <th>Your Pick</th>
                <th>Picks Correct</th>
                <th>Points Earned</th>
                </tr>
                <tr>
                <td><img id="cowboys" name="One" onmouseover="bigimg(this)" onclick="teamback(this, 'actualone')" onmouseout="defaultimg(this)" src="cowboys.gif"> vs <img id="giants" name="One" onmouseover="bigimg(this)" onclick="teamback(this, 'actualone')" onmouseout="defaultimg(this)" src="giants.gif">
                <br><div style="background-color:gray; width:180px; height:20px"><center>2 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ODDS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</center></div></td>
                <td><img src="<?=$One?>" id="actualone" style="width:85px; height:65px;"></td>
                <td><center><?=$Ones?></center></td>
                <td><center><?=$Onep?></center></td>
                </tr>
                <tr>
                <td><img id="colts" name="Two" onmouseover="bigimg(this)" onclick="teamback(this, 'actualtwo')" onmouseout="defaultimg(this)" src="colts.gif"> vs <img id="bears" name="Two" onmouseover="bigimg(this)" onclick="teamback(this, 'actualtwo')" onmouseout="defaultimg(this)" src="bears.gif">
                <br><div style="background-color:gray; width:180px; height:20px"><center>5 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ODDS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</center></div></td>
                <td><img src="<?=$Two?>" id="actualtwo" style="width:85px; height:65px;"></td>
                <td><center><?=$Twos?></center></td>
                <td><center><?=$Twop?></center></td>
                </tr>
                                <tr>
                <td><img id="eagles" name="Three" onmouseover="bigimg(this)" onclick="teamback(this, 'actualthree')" onmouseout="defaultimg(this)" src="eagles.gif"> vs <img id="browns" name="Three" onmouseover="bigimg(this)" onclick="teamback(this, 'actualthree')" onmouseout="defaultimg(this)" src="browns.gif">
                <br><div style="background-color:gray; width:180px; height:20px"><center>1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ODDS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4</center></div></td>
                <td><img src="<?=$Three?>" id="actualthree" style="width:85px; height:65px;"></td>
                <td><center><?=$Threes?></center></td>
                <td><center><?=$Threep?></center></td>
                </tr>
                                <tr>
                <td><img id="patriots" name="Four" onmouseover="bigimg(this)" onclick="teamback(this, 'actualfour')" onmouseout="defaultimg(this)" src="patriots.gif"> vs <img id="titans" name="Four" onmouseover="bigimg(this)" onclick="teamback(this, 'actualfour')" onmouseout="defaultimg(this)" src="titans.gif">
                <br><div style="background-color:gray; width:180px; height:20px"><center>1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ODDS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3</center></div></td>
                <td><img src="<?=$Four?>" id="actualfour" style="width:85px; height:65px;"></td>
                <td><center><?=$Fours?></center></td>
                <td><center><?=$Fourp?></center></td>
                </tr>
                                <tr>
                <td><img id="falcons" name="Five" onmouseover="bigimg(this)" onclick="teamback(this, 'actualfive')" onmouseout="defaultimg(this)" src="falcons.gif"> vs <img id="chiefs" name="Five" onmouseover="bigimg(this)" onclick="teamback(this, 'actualfive')" onmouseout="defaultimg(this)" src="chiefs.gif">
                <br><div style="background-color:gray; width:180px; height:20px"><center>1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ODDS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</center></div></td>
                <td><img src="<?=$Five?>" id="actualfive" style="width:85px; height:65px;"></td>
                <td><center><?=$Fives?></center></td>
                <td><center><?=$Fivep?></center></td>
                </tr>
                                <tr>
                <td><img id="jaguars" name="Six" onmouseover="bigimg(this)" onclick="teamback(this, 'actualsix')" onmouseout="defaultimg(this)" src="jaguars.gif"> vs <img id="vikings" name="Six" onmouseover="bigimg(this)" onclick="teamback(this, 'actualsix')" onmouseout="defaultimg(this)" src="vikings.gif">
                <br><div style="background-color:gray; width:180px; height:20px"><center>2 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ODDS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</center></div></td>
                <td><img src="<?=$Six?>" id="actualsix" style="width:85px; height:65px;"></td>
                <td><center><?=$Sixs?></center></td>
                <td><center><?=$Sixp?></center></td>
                </tr>
                                <tr>
                <td><img id="redskins" name="Seven" onmouseover="bigimg(this)" onclick="teamback(this, 'actualseven')" onmouseout="defaultimg(this)" src="redskins.gif"> vs <img id="saints" name="Seven" onmouseover="bigimg(this)" onclick="teamback(this, 'actualseven')" onmouseout="defaultimg(this)" src="saints.gif">
                <br><div style="background-color:gray; width:180px; height:20px"><center>5 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ODDS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</center></div></td>
                <td><img src="<?=$Seven?>" id="actualseven" style="width:85px; height:65px;"></td>
                <td><center><?=$Sevens?></center></td>
                <td><center><?=$Sevenp?></center></td>
                </tr>
                                <tr>
                <td><img id="bills" name="Eight" onmouseover="bigimg(this)" onclick="teamback(this, 'actualeight')" onmouseout="defaultimg(this)" src="bills.gif"> vs <img id="jets" name="Eight" onmouseover="bigimg(this)" onclick="teamback(this, 'actualeight')" onmouseout="defaultimg(this)" src="jets.gif">
                <br><div style="background-color:gray; width:180px; height:20px"><center>1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ODDS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</center></div></td>
                <td><img src="<?=$Eight?>" id="actualeight" style="width:85px; height:65px;"></td>
                <td><center><?=$Eights?></center></td>
                <td><center><?=$Eightp?></center></td>
                </tr>
                                <tr>
                <td><img id="rams" name="Nine" onmouseover="bigimg(this)" onclick="teamback(this, 'actualnine')" onmouseout="defaultimg(this)" src="rams.gif"> vs <img id="lions" name="Nine" onmouseover="bigimg(this)" onclick="teamback(this, 'actualnine')" onmouseout="defaultimg(this)" src="lions.gif">
                <br><div style="background-color:gray; width:180px; height:20px"><center>4 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ODDS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</center></div></td>
                <td><img src="<?=$Nine?>" id="actualnine" style="width:85px; height:65px;"></td>
                <td><center><?=$Nines?></center></td>
                <td><center><?=$Ninep?></center></td>
                </tr>
                                <tr>
                <td><img id="dolphins" name="Ten" onmouseover="bigimg(this)" onclick="teamback(this, 'actualten')" onmouseout="defaultimg(this)" src="dolphins.gif"> vs <img id="texans" name="Ten" onmouseover="bigimg(this)" onclick="teamback(this, 'actualten')" onmouseout="defaultimg(this)" src="texans.gif">
                <br><div style="background-color:gray; width:180px; height:20px"><center>4 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ODDS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</center></div></td>
                <td><img src="<?=$Ten?>" id="actualten" style="width:85px; height:65px;"></td>
                <td><center><?=$Tens?></center></td>
                <td><center><?=$Tenp?></center></td>
                </tr>
                                <tr>
                <td><img id="49ers" name="Eleven" onmouseover="bigimg(this)" onclick="teamback(this, 'actualeleven')" onmouseout="defaultimg(this)" src="49ers.gif"> vs <img id="packers" name="Eleven" onmouseover="bigimg(this)" onclick="teamback(this, 'actualeleven')" onmouseout="defaultimg(this)" src="packers.gif">
                <br><div style="background-color:gray; width:180px; height:20px"><center>2 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ODDS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</center></div></td>
                <td><img src="<?=$Eleven?>" id="actualeleven" style="width:85px; height:65px;"></td>
                <td><center><?=$Elevens?></center></td>
                <td><center><?=$Elevenp?></center></td>
                </tr>
                                <tr>
                <td><img id="seahawks" name="Twelve" onmouseover="bigimg(this)" onclick="teamback(this, 'actualtwelve')" onmouseout="defaultimg(this)" src="seahawks.gif"> vs <img id="cardinals" name="Twelve" onmouseover="bigimg(this)" onclick="teamback(this, 'actualtwelve')" onmouseout="defaultimg(this)" src="cardinals.gif">
                <br><div style="background-color:gray; width:180px; height:20px"><center>1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ODDS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</center></div></td>
                <td><img src="<?=$Twelve?>" id="actualtwelve" style="width:85px; height:65px;"></td>
                <td><center><?=$Twelves?></center></td>
                <td><center><?=$Twelvep?></center></td>
                </tr>
                                <tr>
                <td><img id="panthers" name="Thirteen" onmouseover="bigimg(this)" onclick="teamback(this, 'actualthirteen')" onmouseout="defaultimg(this)" src="panthers.gif"> vs <img id="buccaneers" name="Thirteen" onmouseover="bigimg(this)" onclick="teamback(this, 'actualthirteen')" onmouseout="defaultimg(this)" src="buccaneers.gif">
                <br><div style="background-color:gray; width:180px; height:20px"><center>1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ODDS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</center></div></td>
                <td><img src="<?=$Thirteen?>" id="actualthirteen" style="width:85px; height:65px;"></td>
                <td><center><?=$Thirteens?></center></td>
                <td><center><?=$Thirteenp?></center></td>
                </tr>
                                <tr>
                <td><img id="steelers" name="Fourteen" onmouseover="bigimg(this)" onclick="teamback(this, 'actualfourteen')" onmouseout="defaultimg(this)" src="steelers.gif"> vs <img id="broncos" name="Fourteen" onmouseover="bigimg(this)" onclick="teamback(this, 'actualfourteen')" onmouseout="defaultimg(this)" src="broncos.gif">
                <br><div style="background-color:gray; width:180px; height:20px"><center>1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ODDS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</center></div></td>
                <td><img src="<?=$Fourteen?>" id="actualfourteen" style="width:85px; height:65px;"></td>
                <td><center><?=$Fourteens?></center></td>
                <td><center><?=$Fourteenp?></center></td>
                </tr>
                                <tr>
                <td><img id="bengals" name="fifteen" onmouseover="bigimg(this)" onclick="teamback(this, 'actualfifteen')" onmouseout="defaultimg(this)" src="bengals.gif"> vs <img id="ravens" name="Fifteen" onmouseover="bigimg(this)" onclick="teamback(this, 'actualfifteen')" onmouseout="defaultimg(this)" src="ravens.gif">
                <br><div style="background-color:gray; width:180px; height:20px"><center>2 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ODDS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</center></div></td>
                <td><img src="<?=$Fifteen?>" id="actualfifteen" style="width:85px; height:65px;"></td>
                <td><center><?=$Fifteens?></center></td>
                <td><center><?=$Fifteenp?></center></td>
                </tr>
                                <tr>
                <td><img id="chargers" name="Sixteen" onmouseover="bigimg(this)" onclick="teamback(this, 'actualsixteen')" onmouseout="defaultimg(this)" src="chargers.gif"> vs <img id="raiders" name="Sixteen" onmouseover="bigimg(this)" onclick="teamback(this, 'actualsixteen')" onmouseout="defaultimg(this)" src="raiders.gif">
                <br><div style="background-color:gray; width:180px; height:20px"><center>1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ODDS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</center></div></td>
                <td><img src="<?=$Sixteen?>" id="actualsixteen" style="width:85px; height:65px;"></td>
                <td><center><?=$Sixteens?></center></td>
                <td><center><?=$Sixteenp?></center></td>
                </tr>
                <tr><td><center>Totals</center></td><td></td><td><center><?=$Week_Selections?></center></td><td><b><center><?=$Week_Points?></center></b></td></tr>
            </table></center>
            </div>
        </body>
</html> 
```

这里是 makepick.php ajax 请求更新数据库的地方......

```
<?php
//this connects to the database
$con = mysql_connect("localhost","yourfan_jeengle","armyjoe");
mysql_select_db("yourfan_demo", $con);

$userid = $_GET["userid"];
$tn = $_GET["tn"];
$sc = $_GET["sc"];
$wk = $_GET["week"];

mysql_query("UPDATE `Week{$wk}_Picks` SET `$sc` = '$tn' WHERE UserID = '$userid'");
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:13:44.477

您正在尝试获取不存在的 curtime、团队和场景的 ID。这是停止执行 ajax。去掉那些线，你会很好的。

```
 function teamback(x, act) {
        if (uniqueid == userid) {
        var myDate = new Date(); // Your timezone! 
        var myEpoch = myDate.getTime()/1000; 
        var deadline = '1344700055.000';
            //determines if user was on time..if not on time submitting won't work
            if(myEpoch > deadline) {
                // update the "actualone" image's source to the sending-image's source
                var tn = x.id;
                var sc = x.name;
                //THIS MUST BE CHANGED BASED ON THE WEEK!!!!!!!!!!!!
                var week = 1;
                document.getElementById(act).src = x.src;
                document.getElementById("curtime").innerHTML = myEpoch;
                document.getElementById("team").innerHTML = x.id;
                document.getElementById("scenario").innerHTML = x.name;

                //AJAX PART
                var ajaxRequest;  // The variable that makes Ajax possible!
                try{
                    // Opera 8.0+, Firefox, Safari
                    ajaxRequest = new XMLHttpRequest();
                } catch (e){
                    // Internet Explorer Browsers
                try{
                    ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
                } catch (e) {
                try{
                    ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                } catch (e){
                    // Something went wrong
                    alert("Your browser broke!");
                    return false;
                }}} 
```

# python-sphinx - 合并多个 sphinx 文档站点

> ID：12272974
> 
> 赞同：8
> 
> 时间：2012-09-05T00:18:07.223
> 
> 标签：python-sphinx, searchable

我想将多个 sphinx 生成的文档站点合并到一个位置（站点）。我不想复制这项工作，而只想从一个中心位置索引/搜索它。

**要求**：

1.  从主站点跨所有站点的可搜索文档
2.  搜索到的链接将您带到目标站点/位置
3.  链接到所有其他网站（应该很容易）

**主站**

*   站点 1
*   站点 2
*   站点 n

我正在考虑以某种方式组合来自各个站点的索引数据库，但不知道这是否可能。我发现关于这样做的信息很少。

我曾考虑使用专门针对所需网站的谷歌搜索，但希望保持 Sphinx 的外观和易用性。这甚至可能吗？有什么想法吗？谢谢

# ruby-on-rails - 新记录的路由错误

> ID：12272976
> 
> 赞同：0
> 
> 时间：2012-09-05T00:18:16.913
> 
> 标签：ruby-on-rails, routes

我有一个从新脚手架生成的 index.html.haml，当我尝试单击新记录链接时，它给了我一个错误。

错误是；

> 没有路由匹配 {:action=>"show", :controller=>"accounts"}

令我困惑的是为什么动作是“表演”而不是“新”？

我把它比作一个工作脚手架，一切看起来都还不错。

这是haml视图代码；

```
= link_to 'New Account', new_account_path, :class => 'btn btn-primary' 
```

路由文件中的条目：

```
 resources :accounts 
```

我正在使用 Rails 3.2.8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:33:45.560

谢谢cheeseweasel，我在表单中有account_path 而不是accounts_path。

# c++ - 使用浮点数的系列总和

> ID：12272977
> 
> 赞同：5
> 
> 时间：2012-09-05T00:18:21.670
> 
> 标签：c++, floating-point, series

我计算了该系列的前 20 个元素——

![在此处输入图像描述](../Images/470cebdb61b70c1a0d6b6f4d1a2936bb.png)

在 2 种方式，第 1 前进，第 2 后退。为此我做了-

```
#include <iostream>
#include <math.h>
using namespace std;

float sumSeriesForward(int elementCount) {
    float sum = 0;
    for (int i = 0; i < elementCount; ++i) {
        sum += (float) 1 / (pow(3, i));
    }
    return sum;
}

float sumSeriesBack(int elementCount) {
    float sum = 0;
    for (int i = (elementCount - 1); i >= 0; --i) {
        sum += (float) 1 / (pow(3, i));
    }
    return sum;
}

int main() {
    cout.precision(30);
    cout << "sum 20 first elements - forward: " << sumSeriesForward(20) << endl;
    cout << "sum 20 first elements - back: " << sumSeriesBack(20) << endl;
} 
```

我得到了 -

```
sum 20 first elements - forward: 1.5000001192092896
sum 20 first elements - back: 1.5 
```

有人可以解释为什么这两种方式之间有区别吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T00:29:32.237

一般来说，浮点数不能准确地表示值。当您对值进行操作时，错误会传播。在您的示例中，当向后计算时，您将小值添加到更大的数字中，到目前为止，小数字的总和很有可能对更大的数字产生影响。另一方面，当您向前计算时，您从大数字开始，而较小的数字对其影响越来越小。也就是说，在求和时，您总是希望将最小到最大相加。

只需考虑将总和保持在固定位数。例如，保留 4 位数字并将这些数字从上到下和从下到上相加：

```
values   top to bottom   bottom to top
10.00      10.00            10.01
0.004      10.00            0.010
0.003      10.00            0.006
0.002      10.00            0.003
0.001      10.00            0.001 
```

浮点数的工作方式相同，使用固定数量的 [二进制] 数字。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T01:59:15.617

为了提高数字求和时的准确性，请考虑[Kahan summation algorithm](http://en.wikipedia.org/wiki/Kahan_summation_algorithm)。与显而易见的方法（包括从最小到最大的数字相加）相比，这显着减少了错误。

# ruby-on-rails - 如果关联不存在，如何不求和？

> ID：12272978
> 
> 赞同：1
> 
> 时间：2012-09-05T00:18:29.670
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

`undefined method 'amount' for nil:NilClass`如果税 ( `tax_id`) 不存在于任何产品上，我会收到错误消息。

```
class Product < ActiveRecord::Base
  attr_accessible :amount, :tax_id
  belongs_to :tax

  def self.total_with_tax
    self.sum(:amount) + all.map(&:tax).map(&:amount).sum
  end
end

class Tax < ActiveRecord::Base
  attr_accessible :amount
  has_many :products
end 
```

有没有办法可以做到，所以如果在搜索所有产品时没有税号，它会将其呈现为 nil 并执行`self.sum(:amount)`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T01:57:42.053

或者，您可以将产品范围限定为仅映射那些实际具有`tax_id`. 就像是：

```
self.sum(:amount) + self.where("tax_id IS NOT NULL").map(&:tax).map(&:amount).sum 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T00:35:34.307

您可以[`compact`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-compact-21)在`all.map(&:tax)`then 之后添加一个，它将是一个空数组，它不会进入`map(&:amount)`so no 错误，然后它的总和将为 0。

```
self.sum(:amount) + all.map(&:tax).compact.map(&:amount).sum

>> [nil].map(&:amount).sum
# NoMethodError: undefined method `amount' for nil:NilClass
>> [nil].compact.map(&:amount).sum
#=> 0 
```

# javascript - 带有 Twitter 引导程序的水平滚动表

> ID：12272981
> 
> 赞同：2
> 
> 时间：2012-09-05T00:19:47.927
> 
> 标签：javascript, css, twitter-bootstrap, scroll

我有一个包含不同列数的表格的页面。这是产品比较页面，用户最多可以选择10个产品进行比较。

我正在使用具有固定布局 + 响应式的 twitter bootstrap v2.1。如何使表格在容器 div 中水平滚动？理想情况下，我还希望第一列始终可见（冻结）。

可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-05T00:49:54.203

实际上我通过这种方式解决了主要问题：

```
<div class="row">
    <div class="span12" style="overflow: auto">
        <table class="table table-bordered">
            <thead>
                <th>Column 1</th><th>Column 2</th><th>Column 3</th><th>Column 4</th><th>Column 5</th>
                <th>Column 6</th><th>Column 7</th><th>Column 8</th><th>Column 9</th><th>Column 10</th>
            </thead>
            <tbody>
                <tr>
                    <td>Row1 Column1</td><td>Row1 Column2</td><td>Row1 Column3</td><td>Row1 Column4</td><td>Row1 Column5</td>
                    <td>Row1 Column6</td><td>Row1 Column7</td><td>Row1 Column8</td><td>Row1 Column9</td><td>Row1 Column10</td>
                </tr>
                <tr>
                    <td>Row2 Column1</td><td>Row2 Column2</td><td>Row2 Column3</td>    <td>Row2 Column4</td><td>Row2 Column5</td>
                    <td>Row2 Column6</td><td>Row2 Column7</td><td>Row2 Column8</td><td>Row2 Column9</td><td>Row2 Column10</td>
                </tr>
                <tr>
                    <td>Row3 Column1</td><td>Row3 Column2</td><td>Row3 Column3</td><td>Row3 Column4</td><td>Row3 Column5</td>
                    <td>Row3 Column6</td><td>Row3 Column7</td><td>Row3 Column8</td><td>Row3 Column9</td><td>Row3 Column10</td>
                </tr>
                <tr>
                    <td>Row4 Column1</td><td>Row4 Column2</td><td>Row4 Column3</td><td>Row4 Column4</td><td>Row4 Column5</td>
                    <td>Row4 Column6</td><td>Row4 Column7</td><td>Row4 Column8</td><td>Row4 Column9</td><td>Row4 Column10</td>
                </tr>
                <tr>
                    <td>Row5 Column1</td><td>Row5 Column2</td><td>Row5 Column3</td><td>Row5 Column4</td><td>Row5 Column5</td>
                    <td>Row5 Column6</td><td>Row5 Column7</td><td>Row5 Column8</td><td>Row5 Column9</td><td>Row5 Column10</td>
                </tr>
            </tbody>
        </table>
    </div>
</div> 
```

因此，如果有人知道如何冻结第一列，我将不胜感激

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T06:54:36.683

对于数据表的固定列和滚动条

获取`FixedHeader plug-in` 然后

> ```
> $(document).ready( function () {
>     var oTable = $('#example').dataTable( {
>         "sScrollX":       "100%",
>         "sScrollXInner":  "150%",
>         "sScrollY":       "250px",
>         "bScrollCollapse": true,
>         "bPaginate":       false
>     } );
>      new FixedColumns( oTable, {
>          "iColumns": 2
>      } );
> } ); 
> ```

[参考](http://www.datatables.net/extras/fixedcolumns/options)

# nagios - 监控 URL 以指示服务已启动

> ID：12272989
> 
> 赞同：0
> 
> 时间：2012-09-05T00:20:59.020
> 
> 标签：nagios, health-monitoring

如何监控 URL，例如：[https](https://www.example.com/status) ://www.example.com/status并查找数字“1”作为服务已启动的指示符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:05:47.857

check_mk_active-http -H www.example.com -u '/status?depth=0' -s "1"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:45:51.300

这可以使用标准插件[check_http轻松完成。](http://nagiosplugins.org/man/check_http)

查看 -u 和 -s 选项，尽管没有理由将您的状态代码限制为“0”或“1”。

所以，像这样：

```
/path/to/check_http --ssl -H www.example.com -u /status -s "1" 
```

# node.js - 是否可以在 node.js 中使用 java 类（用于模型、控制器）？

> ID：12272992
> 
> 赞同：0
> 
> 时间：2012-09-05T00:21:37.853
> 
> 标签：node.js, playframework

我目前有一个使用 Play 框架（1.2.4）和 Java 构建的 Web 应用程序。我正在寻找使用 node.js 重建它。我想知道是否可以使用相同的 Java 类，或者是否所有代码都必须在 javascript 中？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T00:49:52.797

简短的回答：不，您需要用 javascript 重写该代码。既然你说你“正在寻找使用 node.js 重建它”，那么你就去吧。全速前进。

更长的答案：好吧，您可以运行 2 个应用程序，1 个在 JVM 中的 java 和 1 个在节点中的 javascript，并让它们通过一些进程间通信机制（例如 REST/HTTP API）进行通信。这是一种相当常见的模式，node.js 非常适合用作连接到一个或多个后端 API 以支持服务的 Web 应用程序服务器。这将允许您维护现有的 java 代码库。这种模式有时被称为“面向服务的架构”。

# python - 将参数从 shell 脚本传递到 jython 脚本

> ID：12272994
> 
> 赞同：0
> 
> 时间：2012-09-05T00:21:39.260
> 
> 标签：python, shell, jython, command-line-arguments

我正在使用一个 shell 脚本来调用 jython 脚本。当我调用 shell 脚本时，我想传递最终应该传递给 jython 脚本的参数。
示例命令如下

```
./passarg.sh -m 12345 -p 'hello' 
```

passarg.sh 代码如下。

```
#!/bin/bash
#check whether jython exist or not.
if  which jython >/dev/null; then
    echo " "
else
    echo "Jython does't exist on your system, install it first"
    echo "   Command: sudo apt-get install jython"
    exit 1
fi

# The dependent
export CLASSPATH=.:\
./lib/javaee.jar:\

jython myJythonscript.py  -a  #how to passed arguments to myJythonscript.py 
```

在 jython 脚本中，我使用 getopt 来解析参数。myJythonscript.py 类似于如下所示。

```
#!/usr/bin/env jython

import unittest
import java
import time
import os
import sys, getopt
def authenticateAccount(verizionAmImp, mdn, password):
    if verizonAMImp.authenticateAccount(mdn, password):
        print mdn, " is registered"
    else:
         print mdn, " is not registered"    
def getRole(verizonAmImp, mdn):
     role = verizonAMImp.getRole(mdn)
     print mdn, " role is ", role

def main():
    URL = "http://localhost:8080/verizon-am-mock/ws/onlinedevice/service"

    password = "verizon0"
    methodCall = 0

    #for Debugging
    print " System Arguments ", sys.argv
    opts, operand = getopt(sys.argv[1:],"ar:m:p:u")

    for o,v in opts:
        if o == "-a":
            methodCall = 1
        elif o == "-r":
            methodCall = 2
        elif o == "-m":
            mdn = v
        elif o == "-p":
            password = v
        elif o == "-u":
            URL = v

    if (mdn is None) or (len(mdn) == 0):
        print "Please provide MDN in the argument"
        exit(1)       

    verizonAMImp = makePortFactory(URL);    

    if methodCall == 1:
        authenticateAccount(verizonAMImp, mdn, password)
    elif methodCall == 2 :    
        getRole(verizonAMImp, mdn)    
    else:
        print "Please check the arguments"
        exit(1) 
if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T00:24:02.583

一直如此。

```
./someprog "$@" 
```

# javascript - 如何摆脱 PHP 页面底部的“压缩/块”注释？

> ID：12272996
> 
> 赞同：0
> 
> 时间：2012-09-05T00:22:27.507
> 
> 标签：javascript, json

我正在使用 Javascript 在 php 页面上执行 GET 请求，但是当我尝试将 php 页面解析为 JSON 时，出现以下错误：

```
Uncaught SyntaxError: Unexpected token < 
```

我想是因为在 PHP 页面的底部，存在以下注释：

```
<!-- url here compressed/chunked Tue Sep  4 17:15:42 PDT 2012 --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T00:43:33.930

PHP 文件中的注释是 HTML 注释，不应在 JSON 响应中发送（它应该只包含纯 JSON）

你可以

a) 从 PHP 文件中完全删除注释或

b) 将其放在 PHP 部分中（使用 PHP 样式的注释）

```
<?php /* url here compressed/chunked Tue Sep  4 17:15:42 PDT 2012 */ ?>

<?php
// url here compressed/chunked Tue Sep  4 17:15:42 PDT 2012
?> 
```

我不认为，您将需要 JSON 中的这些信息，对吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T00:27:41.337

假设您无法控制数据提供者。此外，将 HTML 注释放在 json 响应中也是一种糟糕的形式。任何类似的元定义都应该在实际的标头信息中。

在 JS 中，只需在索引处拆分字符串

```
function(data){

      var jsonString = data.substring( 0, data.indexOf("<!"));    
      var jsonObject = JSON.parse( jsonString);

} 
```

如果 < 是数据中的有效字符，请为 HTML 注释执行正则表达式。看到[这个](https://stackoverflow.com/questions/5653207/remove-html-comments-with-regex-in-javascript)帖子。

# wordpress - Wordpress：尝试按标签获取帖子

> ID：12272997
> 
> 赞同：16
> 
> 时间：2012-09-05T00:22:49.820
> 
> 标签：wordpress, tags

我编写了一些代码，它会自动创建一些帖子并为其添加标签。我可以在“所有帖子”管理面板中看到标签，我可以点击帖子“标签”链接来获取那些带有标签的帖子。

但是，在我使用 $wp_query 编写的插件中，无论我传入什么参数，我都会返回完整的帖子列表，无论它们是否具有我正在寻找的标签。

这是我的代码：

```
// Now retrieve all items matching this brand name . . .
$query=new WP_Query(array('posts_per_page=5', array('tag' => array($brand_name))));

// The Loop
while ( $query->have_posts() ) : $query->the_post();
    echo '<li>';
    the_title();
    echo '</li>';
endwhile;

// Reset Post Data
wp_reset_postdata(); 
```

当我告诉它只返回 5 个时，这会产生 10 个结果。实际上我应该只得到 2 个帖子，因为这是带有标签的总数。

在网上四处寻找似乎有很多人遇到同样的问题但没有解决方案。我一定尝试了大约 10 种不同的方式来指定标签，但返回的帖子数量错误的事实表明我要么完全错误，要么存在某种错误。如果有帮助的话，Wordpress 版本是 3.4.1。

任何 Wordpress 专业人士都可以阐明这一点吗？

提前致谢 ！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-06-27T15:22:56.730

在这里找到了答案 - [https://codex.wordpress.org/Template_Tags/get_posts](https://codex.wordpress.org/Template_Tags/get_posts)

> 以下示例显示使用“tax_query”在“流派”自定义分类下标记为“爵士乐”的帖子

```
$args = array(
    'tax_query' => array(
        array(
            'taxonomy' => 'genre',
            'field' => 'slug',
            'terms' => 'jazz'
        )
    )
);
$postslist = get_posts( $args ); 
```

**所以对你来说**

```
$args = array( 
        'posts_per_page' => 5,
        'tax_query'      => array(
            array(
                'taxonomy'  => 'post_tag',
                'field'     => 'slug',
                'terms'     => sanitize_title( $brand_name )
            )
        )
    );

$postslist = get_posts( $args ); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-05T01:09:21.093

试试这个

```
$original_query = $wp_query;
$wp_query = null;
$args = array('posts_per_page' => 5, 'tag' => $brand_name);
$wp_query = new WP_Query($args);

if (have_posts()) :
    while (have_posts()) : the_post();
        echo '<li>';
        the_title();
        echo '</li>';
    endwhile;
endif;

$wp_query = null;
$wp_query = $original_query;
wp_reset_postdata(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-11T13:05:15.143

在您的代码中，尝试：

```
$query=new WP_Query(array('posts_per_page=5', 'tag' => $brand_name)); 
```

代替：

```
$query=new WP_Query(array('posts_per_page=5', array('tag' => array($brand_name)))); 
```

有关更多详细信息，请参阅[https://codex.wordpress.org/Class_Reference/WP_Query#Tag_Parameters](https://codex.wordpress.org/Class_Reference/WP_Query#Tag_Parameters) （如最近的重复帖子中所述）。

**注意：** $brand_name 可以是字符串数组，也可以是逗号分隔值等，上面的代码应该可以工作。

或者，尝试：

```
$myPosts = get_posts(array('tag' => $brand_name)); 
```

见[https://codex.wordpress.org/Template_Tags/get_posts](https://codex.wordpress.org/Template_Tags/get_posts)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-07T21:58:05.333

花了我一段时间。这就是您如何从帖子中获得 3 个具有相同标签的随机帖子

```
$post = get_post(); // if you don't have $post->ID already
$tag_ids = wp_get_post_tags( $post->ID, array( "fields" => "ids" ) ); // current tags
$args = array(
    "numberposts" => 3,
    "orderby" => "rand",
    "post__not_in" => array( $post->ID ), //exclude current
    "tax_query" => array(
        array(
            "taxonomy" => "post_tag",
            "field"    => "term_id",
            "terms"    => $tag_ids
        )
    )
);
$posts = get_posts( $args ); // getting posts 
```

# nginx - 让 Nginx 从多个来源提供静态文件

> ID：12272999
> 
> 赞同：12
> 
> 时间：2012-09-05T00:23:29.823
> 
> 标签：nginx, static-files

我有一个 Nginx 配置，可以正常工作并正确提供静态文件：

```
location /static/ {
    alias /tmp/static/;
    expires 30d;
    access_log off;
} 
```

但是我现在要做的是，如果静态文件不存在`/tmp/static`，Nginx 会在`/srv/www/site/static`. 我不知道如何实现这一点，我已经尝试了一些东西`try_files`，但我不知道如何正确使用它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T11:33:29.130

您可以将根设置为您要使用的两个路径的公共前缀（在本例中为 /），然后只需在 try_files 参数中指定其余路径：

```
location /static/ {
  root /;
  try_files /tmp$uri /srv/www/site$uri =404;
  expires 30d;
  access_log off;
} 
```

在某个位置使用 root / 似乎令人不安，但 try_files 将确保不会提供 /tmp/static 或 /srv/www/site/static 之外的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T11:40:19.417

以下应该可以解决问题：

```
location /static/ {
  expires 30d;
  access_log off;
  try_files tmp/static/$uri tmp/static/$uri/ tmp/static2/$uri tmp/static2/$uri/;
} 
```

有关 try_files 使用的文档和示例，请参见[http://nginx.org/en/docs/http/ngx_http_core_module.html#try_files](http://nginx.org/en/docs/http/ngx_http_core_module.html#try_files)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-20T21:13:44.990

您可以使用带有“root”的命名位置来处理一系列后备位置。请注意，您不能在命名位置内使用“别名”。

```
location / {
    root /path/to/primary/html;
    try_files $uri $uri/ @fallback;
}
location @fallback {
    root /path/to/secondary/html;
    try_files $uri $uri/ =404;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-05T00:52:01.697

[使用SlowFS Cache Module](http://labs.frickle.com/nginx_ngx_slowfs_cache/)似乎可以满足您的需求。它将您的静态内容缓存在一个临时目录中，该目录可能存储在更快的磁盘上，并为您管理回退。