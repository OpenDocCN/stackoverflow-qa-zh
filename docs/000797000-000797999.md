# StackOverflow 问答 000797000-000797999

# c# - 不会阻止重绘的同步计算繁重的方法调用

> ID：797000
> 
> 赞同：1
> 
> 时间：2009-04-28T09:29:43.187
> 
> 标签：c#, .net, multithreading

新手 C#/.NET 线程问题在这里：

是否有可能有一个同步（如果这是正确的术语）方法在完成某些计算之前不会返回，但同时不会阻止应用程序重绘或进入“无响应”。

我想答案可能是线程，但是如何使它们成为同步（如果这仍然是正确的术语）方法调用的一部分，而不是在完成后发送事件。

作为附加要求，我添加的代码对 Winforms 没有任何依赖关系，它旨在从控制台应用程序*或*Winforms 应用程序运行。

谢谢，对不起，如果这是一个愚蠢的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T09:36:00.130

我假设您想在执行计算方法时阻止任何用户输入。如果是这样，这可以通过[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)类来完成。将`Enabled`表单的属性设置为`false`，在处理程序中执行所有计算逻辑`DoWork`，并在处理程序中重新启用表单`RunWorkerCompleted`。

# mercurial - 如何从 Bitbucket 存储库中检索可用分支？

> ID：797010
> 
> 赞同：2
> 
> 时间：2009-04-28T09:30:47.350
> 
> 标签：mercurial, bitbucket

可以使用 .从本地存储库中检索本地分支`hg branches`。是否也可以通过编程方式使用远程存储库来执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-28T19:20:07.773

不幸的是，如果不拉入存储库，就无法确定远程 Mercurial 存储库中的分支。您可以通过使用 获取所需的信息来避免将数据保存在磁盘上`hg incoming`，但是该命令无论如何都通过提取整个存储库数据来工作 - 可能不是您想要的。不幸的是，您最好的选择可能只是执行签出，然后查询您现在的本地存储库。

[如果这确实不可接受，您还有两个额外的解决方案：您可以使用BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)或[lxml](http://codespeak.net/lxml/)之类的工具为您的存储库屏幕显示 Bitbucket 页面，或者您可以等到 Bitbucket 发布他们的 API，这可能会提供此功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-04-30T19:25:15.333

使用 bitbucket API

curl [http://api.bitbucket.org/1.0/repositories/:username/:repo_slug/branches/](http://api.bitbucket.org/1.0/repositories/:username/:repo_slug/branches/)

在这里阅读更多：http: [//api.bitbucket.org/1.0/doc/repositories/](http://api.bitbucket.org/1.0/doc/repositories/)

# javascript - 当代码在单独的 JS 文件中时如何在 Firebug 中调试？

> ID：797012
> 
> 赞同：8
> 
> 时间：2009-04-28T09:31:09.377
> 
> 标签：javascript, firebug

我从 Firebug 开始。

我有一个 JS 文件，其中包含一些 JQuery。

当呈现的 HTML 页面没有任何 JavaScript 仅引用我的文件时，我如何调试该代码。

谢谢马尔科姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-28T09:35:10.973

如果您转到脚本选项卡，将会有一个小下拉框，您可以在其中选择页面中链接到的任何脚本。如果它们被缩小，对你没有多大帮助......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-28T09:35:46.230

打开萤火虫。单击“脚本”，然后从下拉菜单中选择您的外部 JS 文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-28T09:40:38.837

您可以添加“调试器；” 要调试的行之前的字符串。

这将调用 Firebug 的 JS 调试器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-01T08:43:05.800

在新的 firebug 中，您需要单击文件列表才能访问外部 js 文件。它不再位于“脚本选项卡”中。更改为要设置断点的 js 文件后，只需单击左侧的行号并重新加载页面。

[替代文字 http://rival-studios.com/Portals/0/so-firebug.gif](http://rival-studios.com/Portals/0/so-firebug.gif)

# asp.net-mvc - ASP.NET MVC 如何在 POST 方法中指定附加参数？

> ID：797017
> 
> 赞同：0
> 
> 时间：2009-04-28T09:32:23.210
> 
> 标签：asp.net-mvc, http-post

在我的 MVC 应用程序中，我有一个控制器（ProjectController），它有一个动作（创建）。create 函数接受 projectEntity（自定义 3d 方数据层组件）作为参数。框架自动将输入的表单值绑定到 projectEntity 对象。

这是创建函数签名：

```
<AcceptVerbs(HttpVerbs.Post)> _
Function Create(<Bind(Exclude:="Id")> ByVal projectToCreate As BLL.projectEntity) As ActionResult
End Function 
```

我在表单中有一个名为“requestDate”的字段。如何指定 POST 方法，以便它传递 projectToCreate 对象和表单中的附加“requestDate”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T22:18:10.063

只需在第一个（对象）参数之后添加额外的 1-1 参数...

```
 _
Function Create( ByVal projectToCreate As BLL.projectEntity, ByVal requestData As Nullable(Of Int)) As ActionResult
End Function
```

我通常会将类型设置为可空的输入参数。只有第一个对象会在没有其他参数名称的情况下被映射...如果您的表单中有一个带有 say (object A, object B) 的签名，您可以使用 name="someprop" 它将自动映射到 A.someprop，或者您可以使用 name="B.someprop" 它会自动映射到名称中的属性。

# web-services - 我在哪里/如何本地化 Web 服务中引发的异常？

> ID：797022
> 
> 赞同：2
> 
> 时间：2009-04-28T09:34:25.513
> 
> 标签：web-services, localization, error-handling

假设我有一个 Web 服务，它根据传入的用户返回一组图像。现在我使用无效用户调用 Web 服务。该调用引发 UnauthorizedAccessException 并显示一条消息，指出用户无权获取该集合。

我希望将此消息本地化。在客户端根据错误代码在哪里本地化此消息？还是我首先将“语言”参数传递给该方法？我是否使用 HTTP 状态代码以便客户端可以本地化消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T10:05:21.633

Web 服务返回错误代码与一般情况一样糟糕，并且出于同样的原因 - 如果您要求所有调用者在调用服务后检查错误代码，那么*一些*调用者将无法这样做。

您应该在服务中抛出异常。这些异常将变成 SOAP 错误。在客户端上，这些将显示为异常（至少对于 .NET 客户端而言）。如果您选择显示这些异常的 Message 属性，这取决于您。如果您选择显示它，那么您也可以在客户端上对其进行本地化。

考虑一下 - 否则，您必须告诉服务客户端的文化，只是让服务可以将本地化文本发送回客户端。最好将这些信息简单地保留在客户端上。

# iphone - 在 XML 解析后提取 URl 的一部分？

> ID：797023
> 
> 赞同：2
> 
> 时间：2009-04-28T09:34:39.913
> 
> 标签：iphone, objective-c, xml

我正在尝试解析一个 XML 文件，其中一个名为“description”的元素如下所示：

```
<description>
    <![CDATA[
        <a href='http://www.okmagazine.com/posts/view/13756/'>
            <img src='http://www.okmagazine.com/img/photos/thumbs/27044' />
        </a>
        <br />
        Ashlee and Pete take their tiny tot to FAO Schwarz in NYC for some new toys. 
        <p> <strong>Pete Wentz</strong> and <strong>Ashlee Simpson Wentz</strong> made the new parent pilgrimage to New Yorkâ€™s FAO Schwarz today, where 6-month old <strong>Bronx Mowgli </strong>was the...]]>
</description> 
```

我想要的是获取标签中的链接`<img src='http://www.okmagazine.com/img/photos/thumbs/27044'>`，我可以使用它在我的图像视图中显示图像......如何将此字符串与描述标签的内容分开？

解析时的部分代码如下

```
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
    //NSLog(@"found characters: %@", string);
    // save the characters for the current item...
    if ([currentElement isEqualToString:@"title"]) {
        [currentTitle appendString:string];
    } else if ([currentElement isEqualToString:@"link"]) {
        [currentLink appendString:string];
    } else if ([currentElement isEqualToString:@"description"]) {
        [currentSummary appendString:string];
    } else if ([currentElement isEqualToString:@"pubDate"]) {
        [currentDate appendString:string];
    }
} 
```

请帮忙

问候

阿伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T09:52:34.083

我从未使用过那个确切的框架，但您必须记住的是，虽然它会在找到 CDATA 时通知您，但其中的任何内容对于解析器来说都只是纯文本。所以看起来你想实现[foundCDATA](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html#//apple_ref/doc/uid/20001984-BBCJGHHE)。您将获得一个 NSData 块，然后您必须从那里解析内容。现在，您可以使用另一个解析器来执行此操作，但仅执行手动子字符串可能更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T10:22:23.997

```
NSString *str = @"<![CDATA[<a href='http://www.okmagazine.com/posts/view/13756/'><img src='http://www.okmagazine.com/img/photos/thumbs/27044' /></a><br />Ashlee and Pete take their tiny tot to FAO Schwarz in NYC for some new toys. <p> <strong>Pete Wentz</strong> and <strong>Ashlee Simpson Wentz</strong> made the new parent pilgrimage to New Yorkâ€™s FAO Schwarz today, where 6-month old <strong>Bronx Mowgli </strong>was the...]]>";

    NSRange range = [str rangeOfString: @"<img src='"];
    str = [str substringFromIndex: range.location + range.length];
    range = [str rangeOfString: @"'"];
    str =[str substringToIndex: range.location];
    CFShow(str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T09:58:59.560

您是否考虑过使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T19:30:57.000

属性作为由属性名称键入的字符串字典传递给解析器的 didStartElement 委托方法。因此，您可以使用 NSDictionary 的 objectForKey: 从属性中提取所需的 url：以属性名称作为键。IE：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if([elementName compare: @"img"] == NSOrderedSame)    // check for <img  ...> element
    {
        NSString* url = [attributeDictionary objectForKey:@"src"]; 
        // url now contains the url you require from the HTML 
```

# .net - n-Tiered .NET 应用程序本地化指南

> ID：797024
> 
> 赞同：3
> 
> 时间：2009-04-28T09:34:40.723
> 
> 标签：.net, sql, localization, naming-conventions

我想听听你的一些想法

*   **资源名称/分类**
*   **资源地**

让我给你应用程序的范围：

*   3 种或更多支持的语言
*   3个MVC网站[有很多共享资源，也有一些独特的资源]
*   1 个共享 MVC 扩展库
*   1个核心业务库，具有共享功能和业务对象[还包含资源]
*   3 个业务库，具有三个网站的特定业务逻辑 [也有资源]
*   1 SQL 2008 数据库在所有网站之间共享，有时会发送本地化电子邮件。

我希望它易于维护（因此也易于导出/导入以进行翻译），不重复（因为我们有共同的资源），并且对于与代码接触的每个人都可以理解

**资源地点：**

*   我应该创建一个包含所有翻译的程序集吗？并在我的项目中创建对该程序集的引用（即使可能将其添加到 SQL 服务器）？
*   或者我应该使用源代码控制来保持所有资源文件同步？
*   其他一些想法？

**资源名称/分类：**

所以我们有本地化的电子邮件、按钮上的文本（类似文本的命令）、标签、错误消息、信息消息等。

您如何将这些项目分类到资源文件中，是否将它们全部转储到一个文件中？或者您是否将它们分类为*字符串*和*电子邮件*资源文件，您使用哪种分类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-29T05:09:43.007

正如 Groo 所提到的，一个大型组件将不是一个好主意，因为它会导致耦合问题。例如，如果您想更改网站 1 中的按钮文本，则必须更新该程序集，这会导致网站 2 和 3 的更新，即使 2 和 3 根本不需要任何更改. 就像其他任何事情一样，您希望尽可能隔离您的更改，以便如果出现问题，它会尽可能少地中断。

我将定义您的程序集，以便您可以根据需要共享一些程序集，但让其他程序集包含仅用于单个项目的资源。根据您给出的描述，我将如何构建您的资源：

*   1 跨网站共享的UI相关资源文件
*   3 个特定于站点的 UI 相关资源文件
*   1 核心库中业务逻辑相关的资源文件
*   3个站点特定的业务逻辑相关资源文件，存放在各自的业务逻辑项目中

在上面的某些情况下，我可能混淆了你只需要一个资源文件和你需要一个完整的独立程序集，但资源的划分本质上是相同的。当然，您需要每种语言的上述每个文件的一份副本。

我绝对建议将这些文件存储在源代码管理中。它们是您的应用程序源代码的一部分，就像代码一样，源代码控制将为您带来同样的好处。

关于 SQL Server，当您说它发送本地化电子邮件时，您的意思是它通过存储过程执行此操作，还是其他代码使用数据库中的数据发送电子邮件？无论哪种方式，我都没有太多答案。我不知道 SQL Server 本身如何处理本地化，如果它是一个发送电子邮件的应用程序，它很大程度上取决于本地化文本需要来自哪里。

最后，关于您对资源分类的问题，这实际上仅取决于您和（我假设）您的团队认为最自然的内容。根据您的描述，听起来您可能希望将资源拆分为将显示在网页上的文本和将包含在电子邮件中的文本，但这很难说。这是一个非常个人的选择，除了让每个人都更容易找到他们正在寻找的资源之外，它对代码没有任何影响，所以只选择对你最有意义的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-01T18:59:40.623

我们有类似的系统设置；我们使用的是仅用于文本的数据库。然后我们有一个通用程序集，它提供获取本地化字符串的方法以及自定义表达式提供程序，因此我们可以在 aspx/ascx 文件中使用标准 <%$ Resources:zzzz %> 语法。

我们的数据库已设置好，因此我们可以为标记提供默认文本，以及本地化版本和应用程序（例如，简化我们的“翻译”表具有以下列：（标记、区域设置、应用程序、本地文本））。这样，如果需要，我们可以为特定应用程序提供覆盖。

这样做的好处是我们还可以提供翻译编辑器（我们目前没有，但它可能是未来的选择），并且导出/导入翻译也不错（不是声称它没有错误 - 我认为无论如何，翻译将是一个很难的话题）。

我们仍然使用标准资源文件，但仅用于真正特定于应用程序且不太可能更改的字符串；我建议不要这样做。这只是意味着我们无法轻松创建要翻译的字符串列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T11:03:57.030

一个包含所有翻译的程序集是一个问题，因为这意味着您的所有程序集都与该单个程序集耦合。

我们通常做的是让每个程序集都有自己的资源，然后从所有引用的项目中生成和翻译一个 .pot 文件（有一个 nant 脚本可以做到这一点）。

# testing - 测试驱动开发书籍

> ID：797026
> 
> 赞同：50
> 
> 时间：2009-04-28T09:35:24.920
> 
> 标签：testing, tdd

你会推荐什么书来学习测试驱动开发？最好是语言不可知论者。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-04-28T09:57:18.160

*   [通过示例进行测试驱动开发](http://www.amazon.co.uk/Test-Driven-Development-Addison-Wesley-Signature/dp/0321146530/ref=pd_sim_b_1)
*   [重构：改进现有代码的设计](http://www.amazon.co.uk/Refactoring-Improving-Design-Existing-Technology/dp/0201485672/ref=pd_sim_b_4)
*   [极限编程：拥抱变化](http://www.amazon.co.uk/Extreme-Programming-Explained-Embrace-Change/dp/0321278658/ref=sr_1_1?ie=UTF8&s=books&qid=1240912339&sr=8-1)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2011-02-16T22:05:01.293

[在 Addison-Wesley的测试指导下不断发展的面向对象软件](https://rads.stackoverflow.com/amzn/click/com/0321503627)- 它是关于模拟框架的 - 特别是 JMock 和 Hamcrest。

从书的描述来看：

> Steve Freeman 和 Nat Pryce 描述了他们使用的流程、他们努力实现的设计原则以及帮助他们完成工作的一些工具。通过一个扩展的工作示例，您将了解 TDD 如何在多个级别上工作，使用测试来驱动代码的功能和面向对象的结构，以及使用 Mock Objects 来发现并描述对象之间的关系。在此过程中，本书系统地解决了开发团队在使用 TDD 时遇到的挑战——从将 TDD 集成到您的流程中，到测试您最困难的特性。

编辑：我现在正在阅读Michael Feathers 的[《Working Effectively with Legacy Code》](https://rads.stackoverflow.com/amzn/click/com/0131177052)，这非常好。从书的描述来看：

> *   了解软件变更的机制：添加功能、
>     修复错误、改进设计、优化性能
> *   将遗留代码放入测试工具
> *   编写测试以防止引入新问题
> *   本书还包含 24 种依赖破坏技术的目录，可帮助您单独处理程序元素并进行更安全的更改。

我已经读过了，它是我读过的最好的编程书籍之一（我个人认为它必须被称为 Refactoring to Testability - 它描述了使您的代码可测试的过程）。因为可测试的代码是好的代码。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-04-28T09:38:27.987

对我来说，这是最好的：

*   [测试驱动开发：](https://rads.stackoverflow.com/amzn/click/com/0321146530)以 Kent Beck为例

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-23T13:41:44.867

最近写得比较合理的书[《单元测试的艺术》](http://www.manning.com/osherove/)。我很惊讶这里没有提到它。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-28T13:49:27.510

[Astels 的书](https://rads.stackoverflow.com/amzn/click/0131016490)是一个扎实的介绍，[Beck 的书](https://rads.stackoverflow.com/amzn/click/com/0321146530)很好地介绍了底层概念，[Lasse Koskela 有一本新书（Test Driven: TDD and Acceptance TDD for Java Developers）](https://rads.stackoverflow.com/amzn/click/com/1932394850)。正如他所说，[Osherove 的书是关于单元测试的，而不是 TDD。](https://rads.stackoverflow.com/amzn/click/com/1933988274)我不确定 Pragmatics 的 TDD 书是否已经过时以及他们的原书。

大多数东西都是 Java 或 C#，但您应该能够自己弄清楚。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-05T12:45:28.210

我是[Pragmatic Bookshelf](http://www.pragprog.com/)中几乎所有内容的忠实粉丝，但这两个确实帮助我明白了这一点：

[务实的程序员：从熟手到大师](http://www.pragprog.com/titles/tpp/the-pragmatic-programmer)。这年龄真的很好。我会向任何开发人员推荐它。

[使用 NUnit 的 C# 中的实用单元测试，第 2 版](http://www.pragprog.com/titles/utc2/pragmatic-unit-testing-in-c-with-nunit)。不要让标题吓到你。这些概念与语言无关，即使是 C# 示例也是如此。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-28T23:47:22.657

Dave Astels 的[测试驱动开发：实用指南](https://rads.stackoverflow.com/amzn/click/com/0131016490)

# sql - SQLite - 如何获得平均值？

> ID：797053
> 
> 赞同：26
> 
> 时间：2009-04-28T09:42:57.117
> 
> 标签：sql

我的表中有一个具有 FLOAT 类型值的列。如何获得此列中所有元素的平均值？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-04-28T09:47:43.830

```
select avg( columnname) from table; 
```

这将平均所有行。要平均子集，请使用`where`子句。为每组（某物）平均使用`group`by 子句。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-28T09:46:47.090

```
select avg(col1) from table; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-28T09:46:33.037

```
SELECT AVG(column) FROM ... 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-28T09:46:46.157

```
select avg(column) from table; 
```

# c# - XML 序列化问题 - 如何从一个对象中序列化元素、属性和文本

> ID：797055
> 
> 赞同：33
> 
> 时间：2009-04-28T09:43:14.120
> 
> 标签：c#, xml-serialization

我是使用 .NET 进行 XML 序列化的新手，在使用了一段时间之后，我现在很困惑。我可以用包含其他元素的属性来序列化元素，但是我怎样才能序列化类似的东西

```
<myElement name="foo">bar</myElement> 
```

我为 myElement 使用了一个类，其“名称”为 XmlAttribute，但是如何引用 XML 元素的值？

提前致谢。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2009-04-28T09:48:13.267

[`[XmlText]`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmltextattribute.aspx)，像这样：

```
using System;
using System.Xml.Serialization;
[Serializable, XmlRoot("myElement")]
public class MyType {
    [XmlAttribute("name")]
    public string Name {get;set;}

    [XmlText]
    public string Text {get;set;}
} 
static class Program {
    static void Main() {
        new XmlSerializer(typeof(MyType)).Serialize(Console.Out,
            new MyType { Name = "foo", Text = "bar" });
    }
} 
```

# asp.net - 对于 AJAX 实施：请建议

> ID：797060
> 
> 赞同：0
> 
> 时间：2009-04-28T09:44:04.320
> 
> 标签：asp.net, asp.net-ajax

应该使用哪一个我有以下可用选项

1.  ASP.NET ajax 及其 ajax 控件工具包控件

2.  带有 jQ​​uery 的 ASP.NET ajax

3.  Ajax Pro [http://www.ajaxpro.info/](http://www.ajaxpro.info/)

请根据性能和页面大小建议使用哪一个。

请如果有人可以阐明上述各项的利弊

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T10:05:08.920

一个月前，我会选择 Ajax Control 工具包，但在花时间在 JQuery 的幕后花时间之后，我会选择它。特别是如果使用 MVC，但是我在重构使用 Framework 2.0 开发的旧 Ajax 网站方面取得了巨大成功。

JQuery 提供了比 Ajax 控件工具包更多的功能，并且它提供了更大的灵活性，如果您遵循 Microsoft 做出的承诺，我们将来肯定会看到更多的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T09:57:09.703

对于性能 + 页面大小，Asp.net MVC + jQuery 是最好的。但是根据您的选择，我认为 #1 页面大小可以通过 g-zip 减小。就个人而言，我喜欢 Ajax 控制工具包，因为它易于实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T09:58:31.480

无论您使用哪种，只要避免使用任何发布所有表单值的东西。更新面板就是其中之一。

这意味着：

1.  带有 ajax 控制工具包的扩展器。这些对您的代码施加了限制。
2.  jQuery + JSON。简单的服务调用。在客户端利用与其他平台相同的技能。
3.  阿贾克斯专业版。不知道，所以不能说它的优点/缺点。

我会坚持使用 JQuery。它工作得很好，并且你获得了在其他平台上工作的技能:)。

# mysql - 在 MySQL 存储过程中检查局部变量是否为空

> ID：797069
> 
> 赞同：2
> 
> 时间：2009-04-28T09:46:40.790
> 
> 标签：mysql, stored-procedures

使用以下示例存储过程

```
DECLARE Variable DOUBLE;
DECLARE Variable2 DOUBLE;
SELECT Something FROM Somewhere INTO Variable;

SELECT Something FROM SomewhereElse INTO Variable 2;

SELECT (Variable + Variable2); 
```

如果Variable 或Variable2 为NULL，那么最终的SELECT 将返回null，我想要的是，如果它们为null，则应在最终SELECT 之前将它们转换为0.00，您如何做到这一点？我已经尝试添加

```
SELECT 0.00 INTO Variable WHERE Variable IS NULL; 
```

就在最终选择之上，但这不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-28T09:51:24.833

```
SELECT COALESCE(variable, 0) + COALESCE(variable2, 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T09:59:38.293

如果您希望将每个变量 null 转换为 0，请使用 Quassnoi 发布的解决方案

```
SELECT COALESCE(variable, 0) + COALESCE(variable2, 0) 
```

如果您想要 0 如果任一变量为空，则使用

```
SELECT COALESCE(variable + variable2, 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T09:57:22.697

Quassnoi 是正确的，但合并结果更简单（也更快）：

```
 SELECT coalesce( Variable + Variable2, 0 ); 
```

这是有效的，因为对于几乎所有运算符，任何空操作数都会使操作为空：

```
 select 1 + null ; -- null
   select null + 1 ; -- null
   select null + null ; -- null 
```

表达式中：`SELECT coalesce( Variable + Variable2, 0 );`加法表达式的结果`Variable + Variable2`是`coalesce`第一个参数；如果为 null，则 coalesce 返回其第二个参数 ，`0`否则返回其第一个参数的（非 null）值，即我们想要的总和。

少数不为空操作数返回 null 的运算符和函数是那些旨在处理空值的运算符和函数：`coalesce`, `is null`, `is not null`.

正如下面的 kristof 所指出的，`select`使用 Quassnoi 的表达式，表达式的值是不同的，如果只有一个变量为空：如果一个为空，他将返回非空变量的值；*如果任一*变量为空，我的将返回零。哪个“正确”取决于您的意图。

# sql - Anything better than P6Spy?

> ID：797076
> 
> 赞同：15
> 
> 时间：2009-04-28T09:47:58.180
> 
> 标签：sql, database, p6spy

I am planning to use P6Spy to intercept database statements within our architecture. However, I noticed on the P6Spy website that the last release of the software was back in 2003\. Is there anything out there that is better or should I just stick with P6Spy?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-04-14T13:55:39.847

Some other tools and libraries that are similiar to P6Spy.

*   [Craftsman Spy](http://zer0.free.fr/craftsman/spy.php) appears to overlap quite a bit with the feature set in log4jdbc. This library hasn't been updated in 2 years and depends on Jakarta Commons Logging.

*   [JAMon](http://jamonapi.sourceforge.net/) (Java Application Monitor) is a comprehensive application monitor and monitoring API which includes JDBC/SQL monitoring as part of it's very large feature set.

*   [JdbcProxy](http://sourceforge.net/projects/jdbcproxy/) The driver can also emulate another JDBC driver to test the application without a database.

*   [LogDriver](http://rkbloom.net/logdriver/index.html) appears to be similiar to log4jdbc and the author has written a nice article on JDBC logging in general and his motivation and experience of writing LogDriver.

*   yet another [JDBC logger](http://jdbclogger.sourceforge.net/)

*   [log4jdbc-remix](http://code.google.com/p/log4jdbc-remix/) an experimental fork of log4jdbc with some interesting features.

*   [jdbcdslog](http://code.google.com/p/jdbcdslog/) Another new jdbc wrapper with a lot of crossover with log4jdbc features.

*   [SqlRecorder](https://github.com/gokulesh/SqlRecorder) A library that is a wrapper around a JDBC driver to record all executed queries to different locations like a file,console or any other remote server via plugins.

*   [log4jdbc-log4j2](https://code.google.com/p/log4jdbc-log4j2/) Another fork of log4jdbc that includes the log4jdbc-remix fork and other features of it's own.

Source: [https://code.google.com/archive/p/log4jdbc/](https://code.google.com/archive/p/log4jdbc/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-07T06:15:17.747

P6Spy has been under active development ago for a while now. The 2.0 version has also just been released. It now supports use without any configuration file for some use cases. It has also been updated to the JDBC 4.0 API and is fully compatible is Java 6 & 7.

The project is also being developed on [GitHub](https://github.com/p6spy/p6spy) now. [Updated documentation](http://p6spy.github.io/p6spy/) is available as well.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2011-08-25T23:59:25.233

I started using [log4jdbc](http://code.google.com/p/log4jdbc/) when p6spy wouldn't work on a precompile project that did its own driver discovery. log4jdbc has you change the DB connection url which we found simpler to setup. It also doesn't require a separate configuration file (spy.properties) and it is actively worked on. I'm not going to touch p6spy again.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T10:02:20.847

We still use P6Spy with our Weblogic 8.1.5 with EJB2.0 and it works charms. I'm about to try and integrate it with Weblogic 10.3 and EJB3.0

# c++ - 如何在 C++ 中声明一个字符串数组？

> ID：797079
> 
> 赞同：4
> 
> 时间：2009-04-28T09:48:21.847
> 
> 标签：c++, string

在 C++ 中，如何声明一个字符串数组？我试图将其声明为数组，`char`但这是不正确的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-28T09:49:39.910

```
#include <string>

std::string my_strings[100]; 
```

那是 C++，使用 STL。在 C 中，你会这样做：

```
char * my_strings[100]; 
```

这读作“我的字符串是一个包含 100 个指向 char 的指针的数组”，后者是字符串在 C 中的表示方式。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-04-28T10:01:09.133

我宁愿建议在几乎所有情况下都使用字符串向量：

```
#include <string>
#include <vector>
std::vector<std::string> strings; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T05:12:39.433

常规单串：

```
char foo[100] // foo is a 100 character string 
```

您需要的可能是：

```
char foobar[100][100] // foobar is a 100 member array of 100 character strings 
```

# c# - 使用 C# 在 Word 2003 中导入 HTML

> ID：797080
> 
> 赞同：0
> 
> 时间：2009-04-28T09:48:32.313
> 
> 标签：c#, asp.net, ms-word

我正在尝试将网页内容导出到 Word。在 word 2007 中，数据以正确的格式显示。但是在 word 2003 的情况下，显示格式不正确。这是什么原因？我应该怎么做才能纠正这个问题？

我正在显示一个文本框和一些矩阵形式的复选框控件。实际上，在网页中，这些控件是使用 table 属性显示的。在 word 2003 中，表格属性反映在 word page 中。但是在 word 2007 中， table 属性被删除并提供了预期的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T11:35:39.060

*   **这是我的 .CS 代码**

使用系统；

使用 System.Data；

使用 System.Configuration；

使用 System.Collections；

使用 System.Web；

使用 System.Web.Security；

使用 System.Web.UI；

使用 System.Web.UI.WebControls；

使用 System.Web.UI.WebControls.WebParts；

使用 System.Web.UI.HtmlControls；

使用 System.Text；

使用 System.IO；

使用 System.Text.RegularExpressions；

公共部分类测试词：System.Web.UI.Page

{

```
#region "Var Delaration"

public string gh;

public string strResponsePageContent = string.Empty;

public string strIndividualResponsePagesLocation = string.Empty;

StreamReader srDefaultIndiResponsePage = null;

#endregion

protected void Page_Load(object sender, EventArgs e)

{

}

protected void GenerateMsWordDoc(object sender, EventArgs e)

{

}

protected void Button1_Click(object sender, EventArgs e)
{
    //strIndividualResponsePagesLocation = HttpRuntime.AppDomainAppPath + "Survey/IndividualResponseWordCss.txt";
    //srDefaultIndiResponsePage = new StreamReader(strIndividualResponsePagesLocation);
    //strResponsePageContent = srDefaultIndiResponsePage.ReadToEnd();  
    //System.Web.HttpResponse oResponse = System.Web.HttpContext.Current.Response;

    Response.Clear();
    Response.Buffer = true;
    Response.ContentEncoding = System.Text.Encoding.UTF7;
    System.Text.StringBuilder SB = new System.Text.StringBuilder();
    System.IO.StringWriter SW = new System.IO.StringWriter();
    System.Web.UI.HtmlTextWriter htmlTW = new System.Web.UI.HtmlTextWriter(SW);
    tbl.RenderControl(htmlTW);
    string strBody = "<html>" +
        "<body>" + "<div><b>" + htmlTW.InnerWriter.ToString() + "</b></div>" +
        "</body>" +
        "</html>";
    //string strBody = "<html>" + "<body>" + strResponsePageContent.ToString() + htmlTW.InnerWriter.ToString() + "</body>" +
    //   "</html>";      
    string fileName = "MsWordSample.doc";
    // You can add whatever you want to add as the HTML and it will be generated as Ms Word docs
    Response.AppendHeader("Content-Type", "application/msword");
    Response.AppendHeader("Content-disposition", "attachment; filename=" + fileName);
    Response.ContentEncoding = System.Text.Encoding.UTF7;

    string fileName1 = "C://Temp/Excel" + DateTime.Now.Millisecond.ToString();
    BinaryWriter writer = new BinaryWriter(File.Open(fileName1, FileMode.Create));
    writer.Write(strBody);
    writer.Close();
    FileStream fs = new FileStream(fileName1, FileMode.Open, FileAccess.Read);
    byte[] renderedBytes;
    // Create a byte array of file stream length 
    renderedBytes = new byte[fs.Length];
    //Read block of bytes from stream into the byte array 
    fs.Read(renderedBytes, 0, System.Convert.ToInt32(fs.Length));
    //Close the File Stream 
    fs.Close();
    FileInfo TheFile = new FileInfo(fileName1);
    if (TheFile.Exists)
    {
        File.Delete(fileName1);
    }
    Response.BinaryWrite(renderedBytes);
    Response.Flush();
    Response.End();

} 
```

}

*   **这是我的 ASPx 页面**

```
<title>Untitled Page</title>

<%-- <%Response.Write(gh);%>--%> 
```

```
<form id="form1" runat="server">

    <div id="divAji" runat="server">

        <table border="0" id="tbl" runat="server">

            <tr id="fvIndividualSurveyResponse_trQuestionBindings">

                <td colspan="6">

                    <table id="fvIndividualSurveyResponse_tbQuestions" cellpadding="0" cellspacing="0"
                        style="width: 100%" border="0">
                        <tr>
                            <td id="fvIndividualSurveyResponse_tdQuestions" style="width: 100%">
                                <table id="tblCtrlContent" width="100%" cellpadding="0" cellspacing="0" border="0">
                                    <tr>
                                        <td colspan="6" style="width: 100%">
                                            <table id="Table1" width="100%" cellpadding="0" cellspacing="0" border="0">
                                                <tr>
                                                    <%--<td style="width: 1%">
                                                       <%-- <span>--%>
                                                       <%-- <span id="spnWhatisyourfavouritecolor?">
                                                        *--%>
                                                      <%--  </span>--%>
                                                  <%--      </span>
                                                    </td>--%>
                                                    <td style="width: 98%">
                                                        <span>1\. What is your favourite color?</span></td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 100%">
                                            <span>NA</span></td>
                                    </tr>
                                </table>
                                <table id="Table2" width="100%" cellpadding="0" cellspacing="0" border="0">
                                    <tr>
                                        <td colspan="5" style="width: 100%">
                                            <table id="Table3" width="100%" border="0">
                                                <tr>
                                                    <%--<td style="width: 1%">
                                                        <span ></span>
                                                    </td>--%>
                                                    <td style="width: 98%">
                                                        <span>2\. List the top three school ?</span></td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 40%">
                                            <span>one </span>
                                        </td>
                                        <td style="width: 60%">
                                            <span>National</span></td>
                                    </tr>
                                    <tr>
                                        <td style="width: 40%">
                                            <span>two</span></td>
                                        <td style="width: 60%">
                                            <span>Devs</span></td>
                                    </tr>
                                    <tr>
                                        <td style="width: 40%">
                                            <span>three</span></td>
                                        <td style="width: 60%">
                                            <span>PS</span></td>
                                    </tr>
                                </table>
                                <table id="Table6" width="100%" cellpadding="0" cellspacing="0" border="0">
                                    <tr>
                                        <td colspan="6" style="width: 100%">
                                            <table id="Table7" width="100%" cellpadding="0" cellspacing="0" border="0">
                                                <tr>
                                                    <%-- <td style="width: 1%">
                                                <span ></span>--%>
                                                    <%--   </td>--%>
                                                    <td style="width: 98%">
                                                        <span>4\. My family likes the following type(s) of chicken?</span></td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr id="trCheckBoxRadios_1000000411_55010">
                                        <td colspan="6" style="width: 100%">
                                            <table width="100%" cellpadding="0" cellspacing="0" border="0">
                                                <thead>
                                                    <tr>
                                                        <th width="12%">
                                                            &nbsp;</th>
                                                        <th scope="col" width="12%">
                                                            Crispy</th>
                                                        <th scope="col" width="12%">
                                                            Fried</th>
                                                        <th scope="col" width="12%">
                                                            Thandoori</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr id="htmlChkBox_1000000411_55010_56010">
                                                        <th scope="row">
                                                            Ginger</th>
                                                        <td align="center">
                                                            <input name="htmlChkBox_1000000411_55010_56010" type="checkbox" id="htmlChkBox_1000000411_55010_56010_0"
                                                                value="Crispy|6058" checked="checked" /></td>
                                                        <td align="center">
                                                            <input name="htmlChkBox_1000000411_55010_56010" type="checkbox" id="htmlChkBox_1000000411_55010_56010_1"
                                                                value="Fried|6059" checked="checked" /></td>
                                                        <td align="center">
                                                            <input name="htmlChkBox_1000000411_55010_56010" type="checkbox" id="htmlChkBox_1000000411_55010_56010_2"
                                                                value="Thandoori|6060" /></td>
                                                    </tr>
                                                    <tr id="htmlChkBox_1000000411_55010_57010">
                                                        <th scope="row">
                                                            Pepper</th>
                                                        <td align="center">
                                                            <input name="htmlChkBox_1000000411_55010_57010" type="checkbox" id="htmlChkBox_1000000411_55010_57010_0"
                                                                value="Crispy|6058" /></td>
                                                        <td align="center">
                                                            <input name="htmlChkBox_1000000411_55010_57010" type="checkbox" id="htmlChkBox_1000000411_55010_57010_1"
                                                                value="Fried|6059" checked="checked" /></td>
                                                        <td align="center">
                                                            <input name="htmlChkBox_1000000411_55010_57010" type="checkbox" id="htmlChkBox_1000000411_55010_57010_2"
                                                                value="Thandoori|6060" checked="checked" /></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            </tr>                           
                    </table>
              </td>
            </tr>
        </table>
    </div>
    <asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" />
</form> 
```

如果您使用 word 2003 和 word 2007 运行此代码，您就会知道我想问什么

# .net - 关于代码访问安全的几个问题

> ID：797081
> 
> 赞同：0
> 
> 时间：2009-04-28T09:48:44.810
> 
> 标签：.net, security, code-access-security

我在亚马逊上买了一本书，目的是为我准备 70-536 考试。我发现了一些对我来说有点混乱的信息。让我引用它 - 我将把我的问题放在一起。

> 要了解如何使用安全策略，请考虑一位应用程序开发人员，他想使用从 Internet 下载的程序集。开发人员已将程序集下载到她的本地计算机**，因此（？）** 它将在我的电脑区域中运行。

是这样吗？我认为代码组成员身份（我的电脑区）取决于在程序集中硬编码的**证据**。我们如何知道程序集正在使用 Zone: MyComputer 证据，这在这种情况下是必要的？

> 开发人员的计算机是 AD DS 域的成员，并且域管理员在企业安全策略中创建了一个代码组，该代码组授予本地计算机上的程序集 Everything 权限集。这比机器安全策略授予“我的电脑”区域中的程序集的 FullTrust 权限集更具限制性，因此 Everything 权限集优先。
> 
> 但是，开发人员不确定程序集是否可以安全运行，**因此她想应用 Internet 权限集来防止程序集写入磁盘或通过网络进行通信**。她没有以管理员身份登录到她的计算机，但她仍然可以启动 .NET Framework 2.0 配置工具并修改用户安全策略。（不允许标准用户修改计算机安全策略。）**通过修改用户安全策略，她可以将“我的电脑”区域中的程序集限制为 Internet 权限集。** 她运行的程序集将受到限制，而不会影响同一台计算机的其他用户。

假设我在用户策略级别（以**All__Code**作为父级）创建嵌套代码组“ **test** ”并将其成员资格条件分配给区域：MyComputer。这是否意味着我还需要将**All__Code**的权限集从**Full Trust**更改为**Nothing**？

 ******亲切的问候 PK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T09:56:17.910

第一个问题：

该区域是根据运行程序集的位置应用的。由于程序集有效负载在本地计算机上执行并位于本地硬盘驱动器上，而不是网络或 Internet 位置，因此“我的电脑区”安全性将应用于程序集。在这一点上，证据不适用。但是，如果我对我的程序集进行了明确编码以要求例如管理员访问权限，这仍然会被强制执行。

第二个问题：

不，您不需要更改 All_Code 设置。这两项政策将有效合并，并适用最严格的政策。

# sas - 以编程方式编译 SAS SCL 代码

> ID：797085
> 
> 赞同：3
> 
> 时间：2009-04-28T09:51:21.637
> 
> 标签：sas, sas-af

是否有在 Windows 中编译 SAS 9.1.3 SCL 代码（NB 不是普通 SAS 代码）的编程方式？我发现这样做的唯一方法是使用 SAS GUI：我们有一个 Perl 脚本，它将击键发送到 UI。虽然这可行（有点），但它很丑陋且容易出错，而且太脆弱而无法添加到我们的自动构建脚本中。

编辑：我最初的问题可能有点不清楚。我知道`proc build`；我的问题是首先将一些纯文本作为 SCL 条目放入 SAS 目录中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-29T10:52:50.560

我发现这是一个先有鸡还是先有蛋的问题。我发现只能通过使用已经存在的 SCL 条目将纯文本输入 SCL 条目......

我有一个设置，我在目录条目中从纯文本文件读取和写入 SCL 代码。我将其用于修订控制目的 (CVS)。

虽然 CVS 主要用于纯文本代码，但它也可以处理二进制文件。因此，我创建了一个 SCL 条目（称为 FILE2SCL），可以将纯文本导入其他 SCL 条目。然后我将这个 SCL 条目 PROC CPORT'ed 到一个二进制文件中，并将它检入 CVS。

这样，我总是可以以编程方式从 CPORT 文件中获取此 SCL 条目，并使用此 SCL 条目将 SCL 代码从纯文本导入其他 SCL 条目。之后我可以使用 PROC BUILD 来编译 SCL 条目，就像你提到的那样。

我的 FILE2SCL 条目如下所示：

```
INIT:
  /***************************************************************/
  /*                                                             */
  /* Call this SCL like this:                                    */
  /* %let srcFile=D:\work\dummy.scl;                             */
  /* %let dstEntry=WORK.NEW.DUMMY.SCL;                           */
  /* proc display catalog=work.cat.file2scl.scl;                 */
  /* run;                                                        */
  /*                                                             */
  /***************************************************************/

  length Rc           8;
  length theFile  $ 200;
  length theEntry $ 128;

  theFile=symget('SRCFILE');   * Source file *;
  theEntry=symget('DSTENTRY'); * Destination entry *;

  * Assign filename *;
  Rc=filename('temp',theFile);

  * Include external file into preview buffer *;
  Rc=PREVIEW('INCLUDE','temp');
  * Save contents of preview buffer to SCL entry *;
  Rc=PREVIEW('SAVE',theEntry);
  Rc=PREVIEW('CLEAR');
  Rc=PREVIEW('CLOSE');

  * Deassign filename *;
  Rc=filename('temp','');
return; 
```

注释说明了如何使用它：首先设置一个 SAS 宏变量“srcFile”，以包含 SCL 源代码文件的路径，另一个宏变量“dstEntry”包含您想要的入口路径SCL条目要。然后 PROC DISPLAY FILE2SCL 入口，它会将你的 SCL 源代码导入到指定的 SCL 入口，然后你可以使用 PROC BUILD 编译它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-11T15:21:26.070

此外，您还可以使用[**Eclipse**](http://www.eclipse.org "Eclipse IDE")和[**ESLink 插件**](http://sourceforge.net/project/showfiles.php?group_id=254574 "Eclipse SAS 链接插件")进行检查。它是专门为此目的而设计的（将 SCL 代码保存在常规文件中以进行版本控制，并能够编译成目录）。

# continuous-integration - 操作方法：Teamcity + GitHub

> ID：797090
> 
> 赞同：35
> 
> 时间：2009-04-28T09:52:12.103
> 
> 标签：continuous-integration, ssh, teamcity, github

是否有人成功配置 Teamcity 以从 GitHub 监控、提取和构建？

我似乎无法弄清楚如何在哪里以及如何为 Teamcity 配置 SSH 密钥。我在系统帐户下将 Teamcity 作为系统服务运行。那么 Teamcity 将其 SSH 配置存储在哪里呢？

**编辑**

为了让它工作，我需要阻止代理在系统帐户下运行。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-05-01T20:14:48.740

好的...我让这个开始在我的 Windows 服务器上工作。以下是我配置[TeamCity 4.5 Professional](http://www.jetbrains.com/teamcity/)的步骤：

1.  下载了[JetBrains Git VCS 插件](http://www.jetbrains.net/confluence/display/TW/Git)
2.  将下载的 zip 文件复制到`.BuildServer\plugins`
3.  在 Administration > Edit Build Configuration > Edit VCS Root configuration 屏幕中，我选择了“Git (JetBrains)”
4.  从 GitHub 项目页面输入我的 Clone Url
5.  设置身份验证方法“默认私钥”——这很重要
    1.  TeamCity BuildAgent 应该作为标准用户运行，并为该用户正确配置了 SSH 安装。
    2.  按照[GitHub SSH 说明进行 SSH 配置](http://github.com/guides/providing-your-ssh-key#msysGit)
6.  将用户名留空。这应该已经在您的 GitHub 克隆 URL 中提供

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-13T22:34:10.453

我获得了“默认私钥”以与在 Windows 上以 SYSTEM 用户身份运行的代理一起工作。对我来说，答案是拥有身份文件

`C:\Windows\SysWOW64\config\systemprofile\.ssh\id_rsa`

而不是在

`C:\Windows\System32\config\systemprofile\.ssh\id_rsa`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-16T21:56:49.513

您的问题是针对 SSH 的，但使用 TLS 上的 HTTP 肯定更容易、更快捷，因为 GitHub 和 TeamCity 现在都支持 HTTP 身份验证。此外，GitHub 还支持具有有限权限的[个人 api 令牌](https://github.com/blog/1509-personal-api-tokens)，您可以根据自己的喜好进行配置，或者根据需要创建新用户。

请参阅下面的 TeamCity 设置图片。

![团队城市配置](https://i.stack.imgur.com/Eu0x3.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-07T11:42:16.790

从 TeamCity 8.1 开始，官方支持 SSH 密钥管理，请阅读此文档：[https ://confluence.jetbrains.com/display/TCD9/SSH+Keys+Management](https://confluence.jetbrains.com/display/TCD9/SSH+Keys+Management)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-01-21T03:39:20.007

对于私钥，用户名必须为空。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-03T16:12:14.203

（这是对旧问题的最新答案）

我得到了与 github/gitlab 和 teamcity 7 一起使用的基于 ssh 的构建，如下所示：

登录到 teamcity 机器并使用 puttygen/ssh-keygen 生成 rsa 密钥对并将 openssh 密钥保存在合理的位置。（知道了 - 使用 puttygen？确保私钥是 openssh 格式 - puttygen > 转换 > 导出 openssh 密钥）

我建议您将私钥保存在

```
C:\.ssh\id_rsa 
```

现在在teamcity中设置“默认私钥” - 创建一个文件

```
C:\.ssh\config 
```

并在其中放置：

```
Host * IdentityFile c:\.ssh\id_rsa 
```

登录到您的 gitlab/guthub 帐户并粘贴您的 teamcity 私钥的 openssh 公钥。

您现在应该能够在 teamcity 中创建一个 git vcs root，它可以使用默认私钥来拉取您的源代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-28T12:18:00.083

[您可能需要像这样](http://github.com/chrisortman/git-teamcity/tree/master)的第三方插件

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-12T07:23:02.557

我不知道为什么，但选择`Default Private Key`对我来说失败了。

然后我选择`Custom Private Key`如下截图： [![在此处输入图像描述](https://i.stack.imgur.com/IDAj7.png)](https://i.stack.imgur.com/IDAj7.png)

该`Username`字段必须为空。

该`Passphrase`字段是您的私钥的密码

（假设您已经在 git 中添加了此私钥的公钥。）

希望没有人像我一样被卡住！

# c# - 使用 Mono 进行 C# 开发的可行性

> ID：797093
> 
> 赞同：12
> 
> 时间：2009-04-28T09:54:34.750
> 
> 标签：c#, linux, ubuntu-9.04

最近，我在 Ubuntu linux 中遇到了 Mono 和 MonoDevelop 包。他们声称拥有符合 CLI 的 .NET 运行时。在自己安装软件包之前，我想知道以下内容：

1.  单声道有多强大？

2.  我可以像为 Windows 开发 WinForm 应用程序一样为 linux 开发 GUI 应用程序吗？

3.  MonoDevelop IDE 是否与 Visual Studio IDE 兼容。我可以将 VS 2008 解决方案导入 MonoDevelop 并工作吗？

4.  它是否支持 .NET 2.0 及更高版本？

编辑：再增加一个疑问

有没有办法在 Linux 中运行 .NET exe（winform 应用程序的）而不在 linux 中构建代码？事实上，我没有之前开发的一些小型实用程序的代码，我想在 linux 中运行它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-28T10:02:52.000

1.  （奇怪，markdown 以 1 开始枚举，尽管我从 2 开始......）

2.  是的，你可以，但是你受限于 3rd-party 组件，因为内部实现不同，上次我检查（不久前），Mono WinForms 实现让我的测试应用看起来很奇怪（所有者绘制列表显示）。虽然 Mono 声称它现在完全兼容 WinForms-2.0，但并不真正推荐它。

3.  MonoDevelop 是/曾经是 SharpDevelop 分支，后者具有解决方案支持。我不知道 MonoDevelop 有没有。但很酷的是，您可以使用 Visual Studio 进行开发并在 Mono 上运行已编译的应用程序。顺便说一下，Mono 也可用于 Windows。

4.  是的，就 CLR 而言，确实如此。正如 Marc Gravell 已经写的那样，缺少 Windows Foundation 库以及其他一些库（例如 System.Management）。但大多数情况下应该都能正常工作，包括 ASP.NET 2.0。[Mono 的应用程序可移植性指南](http://mono-project.com/Guidelines:Application_Portability)是一本很好的读物。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T10:00:00.197

1：其实很好。并非所有完整的框架都在那里，因此如果您正在编写应该在 MS .NET 和 mono 上构建的代码，您需要针对这两个平台尽早构建和测试

4：是的 - 尽管 WPF/WCF/WF (3.0) 之类的东西缺失或精简了

*我对开发*环境了解不多，因为我使用 VSTS（在 Windows 上）并且只使用 NANT 脚本在单声道上进行构建......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-28T11:12:48.790

1.  定义“强大”。
2.  Mono 有一个 WinForms 实现，以允许某种程度的源代码兼容性。但是，根据您的需要，您可能希望将 Mono 绑定之一用于 Linux 本机框架，例如[Gtk#](http://www.mono-project.com/GtkSharp "gtk#")或[Qyoto](http://ekarchive.elikirk.com/david/qyoto/ "清东")
3.  不会知道。
4.  取决于您所指的 .NET 的哪些部分。C# 语言似乎很流行，越接近前面提到的企业特性，事情就越模糊。

总而言之，如果您将使用 Mono 作为单独的目标平台，您可能会得到很好的结果。如果您想要一个不需要代码更改的 .NET 兼容层，那就少这样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T10:07:52.953

1.  很强大。核心实现中没有重大错误。这不是一个科学项目。不足之处主要在你所期望的地方，即最新的 API（微软在这方面天生就有先发优势）。

2.  是的。我们刚刚完成了一个项目，其中大部分 GUI 代码都是在 Windows 上的 WinForms 中开发的。我能够使用 Ubuntu 来处理它，而不会感到头疼。也就是说，这是 API 中最难的部分之一，并且仍然存在问题。有关详细信息，请参阅[http://mono-project.com/WinForms](http://mono-project.com/WinForms)。

3.  不知道，因为我没用过。
4.  是的，但同样，运行时中可能缺少一些 API。

注意，我使用的是 Ubuntu Hardy (8.04)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-07T09:15:37.997

1.  Mono 非常强大。它在一个非常强大的开源骨架上拥有所有 .Net 肌肉。

2.  当您说“为 linux 开发 GUI 应用程序，就像为 Windows 开发 WinForm 应用程序一样”时，我理解您是在询问一个可以让您快速创建 UI 的可视化设计器。是的，有可能。MonoDevelop 有 Stetic - Gtk# 的内置视觉设计器。还有[QyotoDevelop](http://wiki.github.com/FireRabbit/qyotodevelop)可以在 MonoDevelop 中启用 QT 支持。

3.  是的，MonoDevelop 原生支持 VS 项目/解决方案文件格式。您可以使用相同的代码库在 Windows 上使用 .Net 中的 VS 编译您的应用程序，并在 Linux 上使用 Mono 中的 win MD。

4.  目前，Mono 支持 C# 3.0，除了已经实现的一些东西，还有很多正在开发中。

5.  是的，在许多情况下，可以在 Mono 中运行 .Net 编译的应用程序，但是有了 MonoDevelop 对 VS 解决方案的支持，这并不重要。重建整个项目只需要按F7，所以付出的努力真的可以忽略不计。检查您的应用程序是否可以在 Mono 中运行的最佳工具是[MoMA](http://www.mono-project.com/MoMA)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-28T10:04:06.317

1.  Mono 非常强大，有时甚至比 Microsoft 的实现更强大。[链接文本](http://tirania.org/blog/archive/2008/Nov-03.html)
2.  [是的你可以。](http://mono-project.com/WinForms)支持 Winforms 2.0
3.  我相信是这样。
4.  是的，它确实。[支持 C# 3](http://mono-project.com/CSharp_Compiler)，只需查看 winforms 和 asp.net 实现即可了解每个项目的支持程度。看[http://mono-project.com](http://mono-project.com)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-29T17:04:25.207

我在单声道中使用 WinForms。2.x 版本非常好。

我在 windows 上的 visual-studio 中开发表单，并在 Linux 中运行它们，代码更改为零。是的，表单看起来与 XP 上的有点不同，但话说回来，在 GNOME 中以 XP 为主题的 GUI 看起来有点奇怪。

如果您刚刚开始，请坚持使用 WinForms，同时熟悉 Mono/Linux。但是在某些时候，您可能想要调查 GTK。

# java - 从 SQLQuery 结果中的 id 列获取 Hibernate Entity 实例

> ID：797096
> 
> 赞同：0
> 
> 时间：2009-04-28T09:55:33.153
> 
> 标签：java, sql, hibernate

我有（非休眠）数据库表，其中包含休眠实体的 id。我可以查询它们（使用`createSQLQuery`），它给了我 id，然后我可以从中加载实体。

我想一步一步做到这一点，我想我可以做到这一点`addEntity`，但我不确定具体如何。（Hibernate 的文档网站已关闭。再次。）`addEntity`当实体表的所有列都存在时，我可以使用，但我现在只有 id。

这抱怨缺少列：

```
return (List<MyEntity>) session.createSQLQuery(
            "select entity_id from the_table where foreign_key_value = ?")
            .addEntity("entity_id", MyEntity.class)
            .setLong(0, foreignKey).list(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T13:14:23.897

我想你想要这样的东西：

```
session.createSQLQuery("select {entity.*} from entity_table {entity} where ....")
  .addEntity("entity", Entity.class).(bind-parameters).list(); 
```

Hibernate 会将“{entity.*}”扩展为 entity_table 中的相关列。

虽然如果您已经有了 ID，您可以简单地使用 session.load() 将它们转换为实际实例（好吧，延迟加载代理）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T10:46:33.873

我会使用连接

```
select * 
from entity_table 
where entity_id = (select entity_id
                   from non_hibernate_table
                   where id = ?) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T13:19:18.283

对于甲骨文方言。如果您在将数据库列类型映射到 java 数据类型时遇到问题，您可以像这样手动设置它：`.addScalar("integerFieldName", Hibernate.INTEGER)`

```
public class LookupCodeName
{
    private String code;
    private String name;

 /*... getter-setters ... */
}

public class someBL {

public List<LookupCodeName> returnSomeEntity() {
      SQLQuery sqlQuery =  (SQLQuery)((HibernateSession)em).getHibernateSession()
                .createSQLQuery( "SELECT st.name as name, st.code as code FROM someTable st")
                .addScalar("code")
                .addScalar("name")
.setResultTransformer(Transformers.aliasToBean(LookupCodeName.class));
    }
return (List<LookupCodeName>)sqlQuery.list();
} 
```

# mysql - 备份 MySql 数据库并在某个时间通过电子邮件将它们发送到某个地方

> ID：797103
> 
> 赞同：0
> 
> 时间：2009-04-28T09:57:00.547
> 
> 标签：mysql, apache, shell, backup

我们正在运行一个带有很多 MySql 数据库 atm 的 CentOS 服务器，我需要的是一种非常简单的方法来备份它们。因为他们中的许多人都在几个兆之下。倾倒、压缩它们然后将它们发送到安全的 Google Apps 帐户听起来是个不错的主意。

所以我需要的是：一个脚本，它将转储和压缩数据库，然后通过电子邮件发送到某个地方，如果它在其他地方发送电子邮件失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T10:04:39.217

我使用以下脚本将小转储发送到专用邮件帐户。`mail`这当然假设您可以使用该命令从您的机器发送邮件。

```
#!/bin/bash
gzdate=`/bin/date +%Y-%m-%d_%H%M`;
gzfile=dump_${gzdate}.sql.gz
mailrecpt=recipient@domain.com
dumpuser=username
dbname=mydb
mysqldump --single-transaction --opt -u ${dumpuser} ${dbname} | gzip > ${gzfile}
if [ $? == 0 ]; then    
    ( echo "Database Backup from ${gzdate}:"; uuencode ${gzfile} ${gzfile} ) | mail -s "Database Backup ${gzdate}" ${mailrecpt};
else
    ( echo "Database Backup from ${gzdate} failed." ) | mail -s "FAILED: Database Backup ${gzdate}" ${mailrecpt};
fi 
```

您只需要调整顶部的变量。

# javascript - setTimeout - 如何避免使用字符串进行回调？

> ID：797115
> 
> 赞同：12
> 
> 时间：2009-04-28T09:59:14.660
> 
> 标签：javascript, settimeout

使用时`setTimeout`，必须将要执行的代码放入字符串中：

```
setTimeout('alert("foobar!");', 1000); 
```

但是，我想执行一个在变量中有引用的函数。我希望能够做到这一点：

```
var myGreatFunction = function() { alert("foobar!"); };
// ...
setTimeout('myGreatFunction();', 1000); 
```

（虽然在现实生活中，警报是一段较长的代码，并`myGreatFunction`作为参数传递给其他函数，在其中`setTimeout`调用 。）

当然，当超时触发时，`myGreatFunction`它不是一个可识别的函数，因此它不会执行。

我希望javascript让我这样做，但它不会：

```
setTimeout(function() { myGreatFunction(); }, 1000); 
```

有没有一个很好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-04-28T10:02:29.473

如果您不需要`myGreatFunction`使用任何参数调用，则应该能够传递`setTimeout`函数引用：

```
setTimeout(myGreatFunction, 1000); 
```

此外，您应该始终避免传递`setTimeout`需要评估的代码（当您将代码用引号括起来时会发生这种情况）。相反，将代码包装在一个匿名函数中：

```
setTimeout(function() {
    // Code here...
}, 1000); 
```

有关更多信息，请参阅[Mozilla 开发中心的 setTimeout 页面](https://developer.mozilla.org/en/DOM/window.setTimeout#Syntax)。

史蒂夫

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-04-28T10:02:06.510

谁说它不让你做？

确实如此，代码 -

```
setTimeout(function() { myFunction(); }, 1000); 
```

是完全有效的。

# oop - 什么是真正的面向对象（ROO）？

> ID：797119
> 
> 赞同：0
> 
> 时间：2009-04-28T09:59:26.140
> 
> 标签：oop, spring-roo

我最近听到很多关于“真正面向对象”的 ROO。

那是怎么回事？它从何而来 ？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2010-01-06T20:02:21.043

Spring Roo 不再是 Real Object Oriented (ROO) 的首字母缩写词。我们将案例从 ROO 更改为 Roo 以反映这一变化。鼓励对 Spring Roo 项目历史感兴趣的人阅读我们的参考指南的[历史部分](http://static.springsource.org/spring-roo/reference/html/background.html#background-history)，其中更深入地介绍了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T20:34:49.530

ROO是Spring Source本周发布的一个工具：[http ://www.springsource.org/roo](http://www.springsource.org/roo)

通过简短的调查，我了解到您可以使用最少的配置集动态生成 Java 应用程序。

这是一个非常早期的 alpha 版本的代码。有一个描述其功能的博客条目位于[http://stsmedia.net/introducing-spring-roo/](http://stsmedia.net/introducing-spring-roo/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T10:05:49.450

Roo 似乎更像是一种方法论，一种软件工程而非新技术。

它看起来像一个萌芽的流行词。

我想说，很好地尝试带有*roo*和*面向真实对象的*标签的`Taxonomist`徽章。

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T10:40:11.877

在这里查看信息：[http ://raibledesigns.com/rd/entry/tse_hop_into_real_object](http://raibledesigns.com/rd/entry/tse_hop_into_real_object)

# spring - Spring中有多少个模块？这些是什么？

> ID：797120
> 
> 赞同：4
> 
> 时间：2009-04-28T09:59:32.320
> 
> 标签：spring, module, count

只是我想知道 Spring 中有多少个模块？这些是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T10:07:24.560

你说的模块是什么意思？这是SpringSource 中的项目[列表](http://www.springsource.org/projects/)。主要的 Spring Framework 有很多[特性](http://www.springsource.org/about)，它们是相互独立的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-21T17:28:56.960

我`Spring Framework`从上次开始就开始工作了`4+ years`，我研究了大部分模块。这是我知道的模块的列表/名称：

```
1) Spring MVC
2) Spring Core
3) Spring REST
4) Spring Boot
5) Spring JDBCTemplates
6) Spring XD
7) Spring Grails
8) Spring Batch
9) Spring Roo
10) Spring Security
11) Spring Data JPA (Hibernate)
12) Spring Data Mongo (MongoDB,Couchbase etc..)
13) Spring Groovy
14) Spring Reactor
15) Spring WebFlow
16) Spring Transaction
17) Spring AOP
18) Spring WebFlow
19) Spring Remote Services
20) Messaging in Spring
21) Sending Emails with Spring
etc.. 
```

# c# - 带有构建操作的 VSTemplate

> ID：797124
> 
> 赞同：6
> 
> 时间：2009-04-28T09:59:48.200
> 
> 标签：c#, visual-studio, visual-studio-2008

您如何创建一个 VSTemplate 以便它自动将构建操作设置为“内容”而不是默认的“无”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-12-15T23:56:57.473

根据这篇[文章](https://stackoverflow.com/questions/1067247/how-do-i-associate-a-custom-default-build-action-to-a-custom-file-type-in-visual)`SubType`，您应该将`ItemType`属性指定为“内容” ，而不是指定。

```
<ProjectItem ItemType="Content" ... > ... </ProjectItem> 
```

我试过了，它有效！（是的，它不是很直观）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T10:31:41.600

您是否尝试过将 ProjectItem 的 SubType 属性设置为 Content？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-08-25T03:53:45.937

看起来这不能从 .vstemplate 文件中完成，但是看起来[您可以使用 .pkgdef 文件](http://blog.andreloker.de/post/2010/07/02/Visual-Studio-default-build-action-for-non-default-file-types.aspx)来完成您想要的。

# perl - Perl 中系统和反引号和管道之间有什么区别？

> ID：797127
> 
> 赞同：29
> 
> 时间：2009-04-28T10:00:09.337
> 
> 标签：perl, system, pipe, backticks

Perl 支持三种运行外部程序的方式（据我所知）：

`system`：

```
 system PROGRAM LIST 
```

如：

```
system "abc"; 
```

反引号如：

```
`abc`; 
```

通过管道运行它，如下所示：

```
open ABC, "abc|"; 
```

它们之间有什么区别？这是我所知道的：

1.  您可以使用反引号和管道轻松获取命令的输出。
2.  就是这样（在未来的编辑中更多？）

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-04-28T10:09:17.320

*   `system()`: 运行命令并返回命令的**退出状态**
*   反引号：运行命令并返回命令的**输出**
*   管道：运行命令并允许您将**它们用作句柄**

反引号也将执行程序的 STDOUT 重定向到一个变量，系统将它发送到你的主程序的 STDOUT。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T18:21:42.377

[perlipc](http://perldoc.perl.org/perlipc.html)文档解释了您可以从 Perl 与其他进程交互的各种方式，而[perlfunc 的开放文档](http://perldoc.perl.org/functions.html)解释了管道文件句柄。

*   系统将其输出发送到标准输出（和错误）
*   反引号捕获标准输出并将其返回（但不是标准错误）
*   管道打开允许您捕获输出并从文件句柄中读取它，或者打印到文件句柄并将其用作外部命令的输入。

还有一些模块通过跨平台边缘案例处理这些细节。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-28T10:11:42.010

系统还返回应用程序的退出值（Windows 中的 ERRORLEVEL）。管道使用起来有点复杂，因为从它们读取并关闭它们会添加额外的代码。最后，它们有不同的实现，旨在做不同的事情。使用管道，您可以与已执行的应用程序进行通信，而其他命令则不允许这样做（很容易）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T17:50:26.710

获取程序的退出状态不限于`system()`. 当您调用时`close(PIPE)`，它会返回退出状态，您可以从 中获取所有 3 个方法的最新退出状态`$?`。

另请注意

```
readpipe('...') 
```

是相同的

```
`...` 
```

# python - 字符串格式化

> ID：797132
> 
> 赞同：0
> 
> 时间：2009-04-28T10:01:34.933
> 
> 标签：python, string, format

我不明白为什么结肠第二次左移

```
>>> print '%5s' %':'
    :
>>> print '%5s' %':' '%2s' %':'
 : : 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-28T10:08:15.260

在 Python 中，并列的字符串是串联的：

```
>>> t = 'a' 'bcd'
>>> t
'abcd' 
```

所以在你的第二个例子中，它相当于：

```
>>> print '%5s' % ':%2s' % ':' 
```

根据 Python 的 % 运算符的优先规则，它是：

```
>>> print ('%5s' % ':%2s') % ':' 
```

或者

```
>>> print ' :%2s' % ':'
 : : 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T10:05:45.487

你想做什么？

```
>>> print '%5s' % ':'
    :
>>> print '%5s%2s' % (':', ':')
    : : 
```

您可以通过将它们混合到单个字符串格式表达式中来实现您想要的。

# .net - .Net CF 在应用程序的生命周期内运行线程

> ID：797136
> 
> 赞同：2
> 
> 时间：2009-04-28T10:02:21.267
> 
> 标签：.net, multithreading, compact-framework, threadpool

我正在用 C# 开发一个 .Net Compact 框架应用程序，它利用设备上安装的一些第三方消息队列软件。

我对这个环境相当陌生，想知道我是否可以通过一些更明智的眼睛运行架构的一些关键概念，看看我是否走在正确的轨道上或如何改进它。

在我的应用程序运行时，我需要保持消息队列库在后台运行，以便它可以发出通知并通知我的应用程序任何传入消息并处理我的应用程序生成的消息。它需要在我的应用程序的整个生命周期中运行，所以我认为最好的方法是在我的应用程序启动时在自己的线程中运行它？

我不想用代码淹没这篇文章，所以我把我认为重要的部分放在了上面，如果我需要澄清更多，请告诉我。

当应用程序像这样启动时，我在单独的线程中启动消息进程，

```
[MTAThread]
static void Main()
{
    //Run the message processor in its own thread
Thread messagingThread = new Thread(new ThreadStart(msgProcessorStart));
messagingThread.Priority = ThreadPriority.Highest;
messagingThread.Start();

…..
Application.Run(splashForm);
}

private static void msgProcessorStart()
{
MessageProcessor.Start();                      
} 
```

MessageProcessor 是消息传递库的一个外观，用于简化交互并保留它的单个实例。我在下面发布了其中的一部分，它会引发未送达事件并在收到消息时通知。

```
public static class MessageProcessor
    {
        #region Declarations

//private static reference to the MessageProvider as specified in the configuration files.
private static readonly IMessageProcessor _messageProcessor = MessageAccess.MessageProvider;

        #endregion

        #region Constructor

        /// <summary>
        /// Static constructor, connects to the events on the messageProcessor instance which 
        /// relate to messages received, notifications received and exceptions raised.
        /// </summary>
        static MessageProcessor()
        {
            //Connect up events specifed on the IMessageProcessor interface. 
            _messageProcessor.MessageReceived += messageReceived; 
        }

        #endregion

        #region Public Methods

        /// <summary>
        /// Sends a request based data message.
        /// </summary>
        /// <typeparam name="T">Message which implements RequestBase</typeparam>
        /// <param name="message">The message to send</param>
        public static void SendMessage<T>(T message) where T : RequestBase
        {
            _messageProcessor.SendMessage(message);
        }

        /// <summary>
        /// Starts the Message Processor. 
        /// </summary>
        /// <returns>bool, true if started successfully.</returns>
        public static void Start()
        {
            _messageProcessor.Start();
        }

        #endregion

        #region Private methods

        //Registered listener of the IMessageProcessor.MessageReceived event
        private static void messageReceived(object sender, MsgEventArgs<IMessage> message)
        {
            ThreadPool.QueueUserWorkItem(new WaitCallback(processMessage),(object)message.Value);
        }

        //Invoked via messageReceived.
        private static void processMessage(object msg)
        {            
            //process the message
        }

        #endregion
    } 
```

首先调用 Start 方法并建立会话；然后我们将开始接收通知并能够发送消息。

收到消息后，我目前正在通过 ThreadPool 在单独的线程中管理事件处理，以便继续并响应其他通知和消息。

这看起来是一种合理的方法吗？它能否确保我的消息队列库能够独立于我的应用程序进行处理？

任何建议将不胜感激，感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-06-28T08:32:20.970

从概念上讲，将其放入单独的线程中是正确的选择。

后台线程可以停止运行有几种情况：

1.  整个应用程序已关闭（收到 WM_CLOSE 消息）
2.  抛出异常并且未在后台线程上下文中捕获
3.  由于内存限制，操作系统必须关闭整个应用程序

在您的代码中，您只能防止条件编号 2。

另一方面，如果您想要完美的隔离，您可以编写一个 Windows 服务并将其安装在设备上。但我认为没有原生可用的 .NET CF 服务。[然而，有](http://managedserviceswm.codeplex.com/)一些实现可以用来克服这个障碍。

另一种方法是使用带有该循环和隐藏主窗口的单独应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-06-28T14:00:42.930

似乎完全合理。因为我通常使用 DI 框架，所以我在实现上做了一些不同的事情，但概念是一样的。我要添加的一件事是将`IsBackground`线程的属性设置为`true`.

# wpf - WPF中属性触发器相对于数据触发器的优势是什么

> ID：797138
> 
> 赞同：0
> 
> 时间：2009-04-28T10:02:37.117
> 
> 标签：wpf, triggers

我试图了解属性触发器相对于 WPF 中的数据触发器的优势。似乎属性触发器只能由依赖属性中更改的值触发，而数据触发器既可以由依赖属性中更改的值触发，也可以由实现 INotifyPropertyChange 的 .Net 对象中更改的值触发。所以我的问题是，为什么不总是使用数据触发器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T10:40:33.267

`Trigger`查看您正在样式/模板化的项目中的属性，而默认情况下`DataTrigger`查看当前`DataContext`。

例子：

```
<Style TargetType="ListBoxItem">
    <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
            <!-- applied when mouse is over the ListBoxItem -->
        </Trigger>
        <DataTrigger Binding="{Binding Name}" Value="Kent">
            <!-- applied when the ListBoxItem's data has a Name property set to "Kent" -->
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

# javascript - 使用 jQuery 向文本框添加属性

> ID：797145
> 
> 赞同：3
> 
> 时间：2009-04-28T10:04:37.250
> 
> 标签：javascript, jquery, asp.net-mvc

我正在使用 asp.net MVC。

我有控制权

`<%= Html.TextBox("username") %>`

我希望该控件失去焦点事件。

所以像这样的代码

```
$(document).ready(function() {
  $("#username").Attributes.Add("onblur", "alert('losing focus');");
}); 
```

但它不工作，

最终目标是检查密码并确认密码匹配

帮我！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-28T10:13:48.710

看起来您正在尝试在 jQuery 中使用 C# 代码？

在 jQuery 中将事件绑定到 onblur 的最简单方法是：

```
$("#username").blur(function() { alert('losing focus'); }); 
```

有关 blur() 的更多信息，请访问[http://docs.jquery.com/Events/blur](http://docs.jquery.com/Events/blur)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T10:16:38.970

```
$(document).ready(function() {
  $("#username").blur(function() {
    alert('byebye focus');
  });
}); 
```

[http://docs.jquery.com/Events/blur](http://docs.jquery.com/Events/blur)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T10:17:08.593

您可以尝试使用另一种方式附加到此事件，如下所示：

```
$("#username").bind("blur", function(e){
  alert('hello');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T10:15:54.137

我相信你的 jQuery 语法是错误的，

您想绑定一个触发警报的事件“onBlur”，因此请尝试

```
$("#username").blur(function(){
  alert("loosing focus");
}); 
```

- 更新，看起来有人在我回答时回答了这个问题

# mysql - 为什么我可以对内联 SELECT 值进行排序但不能在 WHERE 子句中使用它？

> ID：797147
> 
> 赞同：1
> 
> 时间：2009-04-28T10:04:41.417
> 
> 标签：mysql, sql, mysql-error-1054

我有这个小的 SQL 查询。

```
SELECT a.`id` , a.`title` , a.`date` , 
(
    SELECT MAX( grade )
    FROM tests
    WHERE userid = 41
    AND presid = a.`id`
) AS grade
FROM `presentations` a
WHERE a.`visible` = 1
AND `grade` >= 5
ORDER BY `grade` DESC 
```

这给了我错误

> 1054 - 'where 子句'中的未知列'grade'

但是，如果我删除最后第二行，它工作正常。我已经尝试过`AND a.grade`，甚至给测试表命名并将该名称附加到成绩但仍然没有运气。

如何在 WHERE 子句中使用此内联查询？

我发现这行得通，但这是唯一的方法吗？

```
SELECT a.`id` , a.`title` , a.`date` , 
(
    SELECT MAX( grade )
    FROM tests
    WHERE userid = 41
    AND presid = a.`id`
) AS grade
FROM `presentations` a
WHERE a.`visible` = 1
AND (
    SELECT MAX( grade )
    FROM tests
    WHERE userid = 41
    AND presid = a.`id`
) >= 5
ORDER BY `grade` DESC 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T10:09:12.483

Sql 语句在某种程度上按以下顺序进行评估：

*   从
*   在哪里
*   选择
*   团体
*   拥有
*   命令

因此，您在 SELECT 子句中定义的内容在 WHERE 子句中不可用。您需要将该约束放入 HAVING 子句中：

```
SELECT a.`id` , a.`title` , a.`date` , 
(
    SELECT MAX( grade )
    FROM tests
    WHERE userid = 41
    AND presid = a.`id`
) AS grade
FROM `presentations` a
WHERE a.`visible` = 1
HAVING `grade` >= 5
ORDER BY `grade` DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T10:08:04.670

```
SELECT  a.`id` , a.`title` , a.`date` , 
        (
        SELECT  MAX( grade )
        FROM    tests
        WHERE   userid = 41
                AND presid = a.`id`
       ) AS grade
FROM    `presentations` a
WHERE   a.`visible` = 1
HAVING  `grade` >= 5
ORDER BY
        `grade` DESC 
```

# installation - 如何自定义 WIX 的安装对话框？

> ID：797148
> 
> 赞同：1
> 
> 时间：2009-04-28T10:04:44.880
> 
> 标签：installation, wix

如何自定义 WIX 安装对话框中的文本。

要求是在安装时有对话框，如下所示：

```
+-----------------------------------------------------------------+
| Cotoso ABC Product                                              |
+-----------------------------------------------------------------+
|                                                                 |
|     Please wait while the XXXX version of ABC is configured     |
|                                                                 |
|                                                                 |
|                                                 Cancel          |
+-----------------------------------------------------------------+ 
```

标题栏有“Cotoso ABC Product”，即公司和产品名称。对话框内容为“配置{Product Name}的{XXXX version}”的int格式。

如何在 WIX 中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T10:19:56.310

[您可以更改进度条对话框的文本](http://wix.sourceforge.net/manual-wix3/wix_xsd_progresstext.htm)，还可以更改标题。
为什么要添加弹窗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T23:50:25.427

包括默认的进度/错误消息可能会完成您所需要的（这让我很困惑，因为它不是很明显地[放在文档中](http://wix.sourceforge.net/manual-wix3/WixUI_localization.htm)）。只需添加：

```
 <UIRef Id="WixUI_ErrorProgressText" /> 
```

至于标题栏，我认为这只是默认为 Product/@Name 属性。

# reporting-services - SSRS 中运行时的动态图表

> ID：797149
> 
> 赞同：0
> 
> 时间：2009-04-28T10:04:48.657
> 
> 标签：reporting-services, ssrs-2008, dynamic-reports

我需要在 SQL 报告服务 2008 中创建一个报告（rdl）。我需要在运行时创建。报告有图表。我将在运行时指定图表的类型、字体、对齐方式和所有这些内容。

是否有任何选项可以在 SSRS 2008 中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-01T01:02:16.313

您可以根据需要生成 RDL，它只是一个 XML 文件。但是您只能在本地运行报告。要在服务器上运行，您需要先部署报表，因为服务器不直接运行 RDL 文件。

我想这仍然是可能的，但它会很慢，并且报告不会出现在报告管理器或任何手头的东西中。

但是，您可能使这个问题比它需要的更复杂。我在一些项目中工作，我们生成 RDL 并每天使用自定义应用程序进行部署，但这几乎总是不值得的。通常有更好的方法。

您可以使用表达式设置图表的几乎所有参数。唯一不能设置的是图表类型，但也有办法绕过它。就像在页面上创建您需要的所有图表类型一样，但除了您想要的之外，其他所有图表类型都是可见的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T10:28:27.193

rdlc 只是一个 xml 文件，因此您可以在运行时对其进行操作，但这并不是一件容易的事。[您可以在http://download.microsoft.com/download/6/5/7/6575f1c8-4607-48d2-941d-c69622e11c32/RDL_spec_08.pdf](http://download.microsoft.com/download/6/5/7/6575f1c8-4607-48d2-941d-c69622e11c32/RDL_spec_08.pdf)找到 rdl 规范。

[在http://www.gotreportviewer.com/](http://www.gotreportviewer.com/)上有一个为表格和矩阵动态创建 rdlc 的可下载示例，以及许多其他有用的报告查看器信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:34:10.703

是的...

为此，您需要有一个现有的 rdl 文件来修改，或者您需要完全从代码生成它。

所有 SSRS xml 都存储在数据库中一个名为 catalog 的表中。您必须使用该报告的 GUID 来访问它，或者插入一个新行来创建一个新报告。

完成更换报表服务器 xml 后，报表服务器将有一个“新”报表，然后您可以通过您的网页或通过 SSRS url 参数调用该报表。

如果您认为有必要，请清理目录表。

不过，老实说，这与最佳实践相去甚远，我知道的最佳实践是以小部件的形式嵌入您需要在网页中显示的数据。

# vb.net - 启动应用程序并将其发送到第二个监视器

> ID：797154
> 
> 赞同：3
> 
> 时间：2009-04-28T10:05:26.470
> 
> 标签：vb.net, multiple-monitors

在 VB 2008 中，我使用“进程”类来启动和使用一些参数的外部应用程序。有谁知道我如何以编程方式将其发送到第二台显示器？

另外，有没有办法知道有多少显示器被激活？

谢谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2009-04-28T10:14:15.170

您可以在不同的屏幕上找到您的表单。

```
form.Location = Screen.AllScreens(1).Bounds.Location + new Point(100, 100) 
```

启动应用程序时，使用进程句柄获取窗口 (hWnd)。Windows API 使用的就是这个 hWnd 值。

您将需要使用从 User32.dll 导入的 SetWindowRect 方法（参见最后一个链接）

也可以看看

*   [屏幕类](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen(VS.71).aspx)
*   [VB .NET 双显示器](http://social.msdn.microsoft.com/forums/en-US/vbgeneral/thread/d867a0cd-1f08-4f16-a8aa-db6ff77b3656)
*   [在 vb.net 中获取与进程关联的窗口句柄](http://kellychronicles.spaces.live.com/blog/cns!A0D71E1614E8DBF8!217.entry)
*   [蛋头笼 - hwnd 位置](http://www.eggheadcafe.com/conversation.aspx?messageid=33748717&threadid=33748670)
*   [MSDN - SetWindowRect API 调用](http://msdn.microsoft.com/en-us/library/aa188455(office.10).aspx)

# crystal-reports - 我需要 vb.net 2008 水晶报告的帮助

> ID：797158
> 
> 赞同：0
> 
> 时间：2009-04-28T10:05:53.473
> 
> 标签：crystal-reports

我被要求为应用程序构建水晶报表，我使用工具中的 Microsoft Report Viewer 控件，并且可以构建一个报表，根据参数从数据源获取数据并在报表查看器中查看，我需要知道是否我做得对还是不对？这是水晶报告吗？如果没有，我在哪里可以找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-29T14:46:21.870

您必须使用 Crystal Report Viewer 并创建 Crystal Reports。Microsoft Report Viewer 不一样。

# firebug - 在 Firebug“脚本”菜单中看不到任何脚本

> ID：797159
> 
> 赞同：17
> 
> 时间：2009-04-28T10:05:56.420
> 
> 标签：firebug

我已经为我的站点启用了 Firebug 的 scipts。

但我在 Script dropdwon 菜单中看不到任何内容。

网络选项卡将它们列为正常。

我尝试了另一个网站不是我的相同的东西？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-11-30T23:40:38.850

正如@SebastianZartner 所说：

## 从 Firefox 50 开始，脚本面板不再工作！

> **[一旦启用多进程 Firefox](https://developer.mozilla.org/en-US/Firefox/Multiprocess_Firefox)并且脚本面板等功能已经开始中断，**Firebug**将不再工作。**

 **因此，我们似乎被邀请：

## Firefox[开发者版](https://www.mozilla.org/en-US/firefox/developer/)`DevTools`中的Firefox

*它提供了一个 Firebug 主题，使过渡不会太难*

[![在此处输入图像描述](https://i.stack.imgur.com/eVhRD.png)](https://i.stack.imgur.com/eVhRD.png)

* * *

**看起来不错，但`Firefox`团队应该努力工作！**

当我在 Firefox 开发者版中比较`Google Chrome Web Inspector`时`Firefox DevTools`，`Chrome Web Inspector`获胜！但我喜欢 Firefox，我对其进行了更新，以便在其下一个版本中将其视为超级强大的调试器。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2010-04-08T00:29:55.247

过去几天我在做一些 javascript 开发时遇到了 Firebug 的问题。大多数情况下，javascript 文件在脚本选项卡上可用，但有时它们不可用（即使它们列在其他选项卡上）。我发现如果我禁用然后重新启用脚本选项卡，然后刷新页面，那么脚本会再次开始显示。

希望你觉得这很有帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-30T09:50:20.823

[Firebug FAQ](http://getfirebug.com/faq#Why_does_the_Script_panel_claim_there.27s_no_JavaScript_on_the_page_when_there_obviously_is_code)中给出了这个问题的答案。在较旧的 Firefox 版本中，这通常是由于脚本中的语法错误造成的。因此，您应该检查[*控制台*面板](https://getfirebug.com/wiki/index.php/Console_Panel)是否存在与您的代码相关的错误。

但请注意，自 Firefox 50 以来，*脚本*面板不再起作用。即，即使脚本没有任何语法错误，它也总是显示该消息。这显然是由于 Firefox 代码的更改。而且因为[Firebug 不再被维护](http://getfirebug.com/)，这个 bug 将不再得到修复。因此，建议 Firebug 用户切换到[Firefox DevTools](https://developer.mozilla.org/en-US/docs/Tools)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-30T15:44:39.523

我遇到了同样的问题，解决方案是“清除激活列表”（萤火虫菜单）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-07-21T18:24:48.270

这些解决方案都没有帮助我。但我找到了另一个解决方案。在 Net 选项卡中，右键单击要查看/调试的脚本，然后单击“Inspect in Script Tab”。这立即提出了我需要在“脚本”选项卡中调试的脚本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-28T10:09:04.807

[编辑] 我错了；外部 JS 是这样引用的：`<script type="text/javascript" src="/content/js/master.js></script>`

解决方案是：“脚本”菜单只允许启用或禁用站点的 JavaScript 调试（因为它会使 Firefox 变得非常慢）。

要查看实际脚本，您必须使用“脚本”菜单正上方的隐藏下拉菜单。“脚本”下拉列表上方的一行中有四个按钮：Firebug（只是徽标）、“检查”、“全部”以及您可以选择要检查的脚本的按钮。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-09-20T18:00:50.737

I had this problem for 2nd page under tabbed browsing. Solution: After I closed the first tab I was able to debug scripts on the 2nd tab.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-28T10:08:46.587

这些文件位于“脚本”选项卡正上方的下拉列表中。它看起来像一个普通的按钮，但是当您单击它时，会显示文件列表。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-01-20T16:24:57.350

我也有这个问题。就我而言，问题在于 HTML 不正确 - 在输出早期从其他代码插入的某些内容具有未关闭的脚本标记。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-02-28T15:07:12.090

我认为 Javascript 面板不适用于新版本的 Firefox！所以，如果你想使用 Firebug。使用火狐49！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-11-29T08:21:52.640

它是旧帖子，但无论如何它可能对某人有所帮助。我对 Firebug 和脚本有一些问题。脚本 dropdwon 菜单不显示我的脚本。首先检查 Html 部分代码中脚本的所有路径是否正确。其次，我发现 Firebug 不会显示有错误的脚本。如果您可以在萤火虫中看到脚本，然后看不到。这意味着脚本中的错误。

# c# - C# 中的 if(a==5) 或 if(5==a) 有什么区别吗？

> ID：797162
> 
> 赞同：3
> 
> 时间：2009-04-28T10:07:39.023
> 
> 标签：c#

只是我想知道，有什么区别

> 如果 (a==5) 或如果 (5==a)

在 C# 中，哪个更好？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-28T10:09:09.113

没有区别 - 假设“a”是一个整数。

我知道有些人更喜欢`if (5==a)`，因为在 c 和 c++ 中，如果你`if (5=a)`写错了，你会得到一个编译器错误，同时`if (a=5)`会导致一个错误。

C# 在后一种情况下会引发编译器错误，因此这不是问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-28T10:20:20.210

我实际上会说有区别，但它不是技术性的（因为每个人都已经很好地涵盖了） -**可读性**。这很重要，第一种形式*更加*自然。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-28T10:17:26.923

该`if(5 == a)`构造在 C/C++ 中很常见，因为布尔值使用整数表示。因此，如果你`a = 5`写错了，这可以在 的上下文中进行评估`if`，这很可能不是你想要的。

在 C# 中没有从`int`to的隐式转换`bool`，所以如果你键入`=`而不是`==`你会得到一个编译错误。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-28T10:09:34.417

没有区别，在 c/c++ 中避免使用 if(a=5) 是一个老习惯。

这些问题/答案大致相同：

*   [(0 == variable) 或 (null == obj)：C# 中过时的做法？](https://stackoverflow.com/questions/655657/0-variable-or-null-obj-an-outdated-practice-in-c/655668#655668)
*   [检查null，哪个更好？“空==”或“==空”](https://stackoverflow.com/questions/424842/checking-for-null-which-is-better-null-or-null/424852#424852)
*   [为什么在 C# 中经常看到“null != variable”而不是“variable != null”？](https://stackoverflow.com/questions/271561/why-does-one-often-see-null-variable-instead-of-variable-null-in-c/271575#271575)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-28T10:24:38.700

两者是等价的。我记得当我用 C 编写代码时，我更喜欢 'if (5==a)'，因为它保证我没有意外键入 5=a，因为编译器会抛出错误。如果我们写 'if (a=5)' 就不会发生这种情况。虽然这是一个错字，但它不会产生任何编译器错误并且不会被注意到。

但是，在 C# 中并非如此。写“if (5==a)”没有逻辑上的理由。如果我们写了'if(a=5)'，编译器会抛出一个错误。所以在 C# 中使用 'if(a==5)'！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-28T10:28:33.340

通过正确的设计，“a == 5”和“5 == a”之间没有区别。但是有一些特殊情况，“a == 5”和“5 == a”有不同的行为。这是非常不可行的，但它是可能的。

不过这个例子是为了演示情况而构建的，我**不建议**这样做。

例子：

```
public class BadClass {
    public int Value;

    public static implicit operator int( BadClass c ) {
        return c.Value;
    }
    //public static implicit operator BadClass( int n ) {
    //    return new BadClass { Value = n };
    //}

    public static bool operator ==( BadClass c, int n ) {
        return (c.Value + 1 == n);
    }
    public static bool operator !=( BadClass c, int n ) {
        return (c.Value + 1 != n);
    }

    public override bool Equals( object obj ) {
        if ( obj is int ) {
            return (this == (int)obj);
        }
        else {
            return base.Equals( obj );
        }
    }

    public override int GetHashCode() {
        return base.GetHashCode();
    }
}
...
BadClass a = new BadClass { Value = 13 };
var rslt_1 = (13 == a); //there will be true
var rslt_2 = (a == 13); //there will be false 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-28T10:10:06.100

除了安全`if (5==a)`给你，不。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-28T10:10:46.863

唯一的区别是如果您忘记了第二个等于，第一个版本仍然是有效的语句，而第二个版本将引发编译时错误。

高温高压

干杯，

# c# - 从类库访问用户上下文

> ID：797166
> 
> 赞同：0
> 
> 时间：2009-04-28T10:08:10.707
> 
> 标签：c#, asp.net, design-patterns, class

**背景：**

*   我有一个 win 应用程序和一个 Web 应用程序以及一个共享类库。
*   在我的类库中，我有一些用于获取 SQL 连接字符串的 SQL 查询的静态方法
*   我将我的 SQL 连接字符串存储在 Session 变量中，因为它是在登录时设置的，在此期间确定要使用哪个数据库。
*   我的类库无法访问我的会话变量（是的，我当然可以使用 HttpContext.Current...，但这在我的 winapp 中不起作用）

**解决方案？**

我设想了一种解决方案，其中我为当前的用户/上下文创建了一个类，并在创建它时注入了首选行为，如下所示：

```
UserContex current = new UserContext();
current.SessionHandler = new AspNetSessionHandler(); 
```

但是，我想要一个静态类，我可以使用它而不必一直传递它，然后如果在 Web 应用程序中使用，它会从会话中或从其他地方获取它的变量（我不是 winapp 开发人员) 如果在 winform 中使用。

我会试着想出这种东西，但如果我找到一个已经可行的解决方案那就太好了，这就是为什么我呼吁你们共同疯狂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-29T05:00:46.960

Csla 包含使用静态 ApplicationContext 类的类似设置，该类在 Rockford Lhotka 的书 Expert C# Business Objects 中进行了讨论...为了处理连接字符串问题，我建议创建一个 DataConnection 类，该类以这种方式从配置文件返回静态连接字符串连接字符串来自 Web.config 还是 App.config 无关紧要

```
public class DataConnection
{

    public static string NameOfConnection
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["NameOfConnection"].ConnectionString;
        }
    }
} 
```

# html - 没有服务器的自定义 404 错误

> ID：797172
> 
> 赞同：0
> 
> 时间：2009-04-28T10:09:16.833
> 
> 标签：html, browser

是否可以在不使用 Web 服务器（浏览文件系统中的 html 文件）的情况下拦截 404 错误？

我尝试使用一些 javascript，使用隐藏的 iframe 预加载目标页面并检查结果，然后触发自定义错误或重定向到正确的页面。

这项工作很好，但性能不佳。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-28T10:12:40.633

404 错误是 HTTP 状态响应。因此，除非您尝试使用 HTTP 请求/响应来检索此文件，否则您不会遇到真正的 404 错误。你只能按照你建议的方式模仿一个。无论如何处理 404 错误的任何“标准”方式都取决于您的 Web 服务器的风格......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T10:13:05.360

你为什么不想使用服务器？

我不相信可以在客户端处理 404 错误，因为 404 错误是*server-side*。

每当您加载网页时，都会向服务器发出请求。因此，当您请求一个不存在的文件时，它是处理错误的服务器。常规 HTML/CSS/JavaScript 仅在服务器发回响应告诉您它找不到文件时才会出现。

史蒂夫

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T10:20:07.463

404 是一个 HTTP 响应代码，因此只能由使用它的服务器通过 HTTP 协议传递。file:// 扩展名本身并不是真正的协议响应，它是内置于客户端（如浏览器）中的 hack，可启用本地文件支持，但是取决于浏览器/客户端本身是否公开其文件中的任何响应代码： // 执行。例如，理论上它们可以在 DOM 中报告它们，但它们将是暴露给自己的响应代码，因此很少实现。大多数都没有，也没有标准的方法。您可能会查看浏览器扩展程序，如 Firefox，看看它们是否支持它，但是，这是非常不标准的，如果您在网络上弹出它可能会中断。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-19T17:27:39.967

因为我今天正在寻找这个。您现在可以在没有服务器的情况下使用 Service Worker 缓存自定义 404 页面，然后在获取请求状态为 404 时提供它。按照[google cache lab](https://developers.google.com/web/ilt/pwa/lab-caching-files-with-service-worker#5_optional_respond_with_custom_404_page)上的说明，工作文件如下所示：

```
const filesToCache = [
  '/',
  '404.html'
];

const staticCacheName = 'pages-cache-v1';

self.addEventListener('install', event => {
  console.log('Attempting to install service worker and cache static assets');

  event.waitUntil(
    caches.open(staticCacheName).then(cache => {
      return cache.addAll(filesToCache);
    });
  );
});

self.addEventListener('fetch', event => {
  console.log('Fetch event for ', event.request.url);

  event.respondWith(
    caches.match(event.request).then(response => {
      if (response) {
        console.log('Found ', event.request.url, ' in cache');
        return response;
      }

      console.log('Network request for ', event.request.url);

      return fetch(event.request).then(response => {
        console.log('response.status:', response.status);

        // fetch request returned 404, serve custom 404 page
        if (response.status === 404) {
          return caches.match('404.html');
        }
      });
    });
  );
}); 
```

# c - 转换：uid_t 到字符串，off_t 到字符串

> ID：797180
> 
> 赞同：1
> 
> 时间：2009-04-28T10:11:13.633
> 
> 标签：c, casting, type-conversion, systems-programming

我目前正在编写系统编程作业，其中一部分我需要获取目录中文件的一些信息。

对于文件的统计信息，我们有`ctime()`将`time_t`类型转换为`string`并返回指向它的指针的函数。

但是`uid_t`和`off_t`类型呢？我通过互联网搜索并找不到任何功能..或者如果不存在任何功能，您能告诉我如何实现这样的功能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T10:22:48.520

两者都被定义为算术类型（[http://www.opengroup.org/onlinepubs/009695399/basedefs/sys/types.h.html](http://www.opengroup.org/onlinepubs/009695399/basedefs/sys/types.h.html)），并且在实践中是正整数。因此，您可以只转换为 unsigned long long，并使用带有“%llu”的 sprintf 转换为字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T10:15:11.000

`size_t`并且`off_t`只是无符号整数类型。（编辑：`off_t`很长？看，教训是，检查你的标题！）

所以使用`sprintf`（或其他）使用“%i”格式说明符来转换它们。

编辑时：废话，您在我回答时更改`size_t`为。定义在; 看这里。（它也是一个无符号整数类型，但是一个.）`uid_t``uid_t``types.h``unsigned short`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T10:16:06.630

Linux 的[snprintf()](http://linux.die.net/man/3/sprintf)支持 type 值的 'z' 格式说明符`size_t`。不确定它的便携性，您需要仔细检查“符合”部分。

对于`off_t`，您可能需要转换为最大的无符号整数类型，即`unsigned long`并使用“lu”说明符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T10:15:41.017

`off_t`是一个`long int`：格式=“％ld”

`size_t`是一个`unsigned int`：格式=“％u”

您可以在函数中使用这些格式`sprintf`转换为 char*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-22T08:07:00.303

使用 gcc 5.4.0 以下行：

`printf("user #%ld did this or that!\n", uid);`

提出以下警告：

`..main.c:133:9: warning: format ‘%ld’ expects argument of type ‘long int’, but argument 2 has type ‘uid_t {aka unsigned int}’ [-Wformat=]`

我建议您也这样做并检查编译器的输出。=)

# asp.net - 在没有完整回发的 AJAX 更新面板中上传文件

> ID：797190
> 
> 赞同：19
> 
> 时间：2009-04-28T10:13:51.550
> 
> 标签：asp.net, ajax, file-upload, updatepanel, asynchronous-postback

我有一个更新面板，在更新面板中我有文件上传控件和按钮控件，单击按钮时，我需要在更新面板的文件上传控件中上传的文件。

确切的情况，我在页面上有 8 个选项卡，每个选项卡都包含太多信息，其中一个选项卡是附件，当用户单击显示的添加新附件模式弹出窗口时，模式包含更新面板中的详细信息视图，并且在详细信息视图中我有文件上传控制，当用户点击**保存**按钮，**触发 detailsview 插入事件**，在插入事件中我需要我上传的文件。
请注意，我的页面很重，我不想要完整的 postBack。

有没有人有这个问题的解决方案？

提前感谢您的帮助......

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-04-28T10:27:18.540

要解决此问题，请参阅以下步骤。

1.  **将 ajax-upload 添加到您的详细信息视图中。**
    *   *基于 iframe 的上传器*，例如 Resource#1。
    *   *基于 Silverlight 和基于 Flash 的上传器。*我喜欢这种技术，因为它不需要任何服务器端脚本来显示当前上传状态。但是在 HTML5 中，您可以在不使用任何 Web 浏览器插件的情况下创建它。
    *   *像 Resource#2 这样的商业上传器。*使用隐藏的 iframe 进行上传。
2.  **将文件上传到临时位置。**

    *   *系统响应临时位置。*接下来，客户将临时位置以详细形式隐藏在输入中。
    *   *使用 session_id 保留临时位置。*您可以将其存储在数据库或 Session 变量中，具体取决于您的框架。
3.  当您点击保存按钮时，系统会将文件移动到它们的真实位置

笔记。系统会自动从临时位置删除过期文件。

*资源*

1.  [*带有实时*进度条的ASP.NET 文件上传](http://mattberseth.com/blog/2008/07/aspnet_file_upload_with_realti_1.html)
2.  [ASP.NET 文件上传，如 GMail（商业）](http://ajaxuploader.com/Demo/default.aspx)

**更新**

将近一年后，我刚刚为这个问题找到了一个很好的第三方控制。这是一个jQuery的开源插件。它命名为 Plupload，允许您使用 HTML5、Silverlight、Flash 或普通表单上传文件，并提供一些独特的功能，例如上传进度、图像大小调整和分块上传。

[您可以点击此处尝试和测试 Plupload。](http://www.plupload.com/example_all_runtimes.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-28T10:19:21.227

如果没有在客户端上安装合作的二进制文件，就无法完成。AJAX 框架没有安全的机制来读取文件的内容并因此能够将其发送到服务器。浏览器仅支持作为来自文件输入框的多部分表单发布。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-09T20:08:22.833

问题在于 HTML 文件上传控件的工作方式，与 ASP.net 无关，要使文件上传控件工作，您需要完整发布表单数据。您只能通过在执行实际上传的隐藏 iframe 中执行所有操作来模拟您没有进行完整回发

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-08T10:31:07.320

您看到的提供此功能的站点通常使用 Flash 或 iframe，以便回发发生在 iframe 中并给人一种 ajax 请求的错觉。

高温高压

OneSHOT

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-11T18:41:21.280

我已经尝试过 swfupload ( [http://swfupload.org/](http://swfupload.org/) )，但请记住，如果您在非 IE 浏览器中使用表单身份验证，则必须跳过障碍。这显然是一个 flash 错误，并且在 flash 10 中没有修复。因为这个错误，我决定不在我们的框架中使用它，但它在其他方面是一个很棒的产品。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-12T03:01:07.320

我推荐来自 YUI 的上传器小部件。见[http://developer.yahoo.com/yui/uploader/](http://developer.yahoo.com/yui/uploader/)

我认为你可以用它来实现你的目标。在完成上传后，您的 javascript 需要将文件从服务器返回到客户端。但是页面不会刷新——上传是通过 Flash 和隐藏的 iframe 进行的。向用户显示文件内容的下载将通过 ajax 进行。

如果用户不“批准”上传，那么只需对服务器进行另一个 ajax 调用以删除文件。

# vbscript - 在 VBScript 中将秒转换为周、天、小时、分钟、秒

> ID：797200
> 
> 赞同：0
> 
> 时间：2009-04-28T10:16:55.443
> 
> 标签：vbscript, time, duration

是否有将指定的秒数转换为 vbscript 中的周/日/小时/分钟/秒时间格式的功能？

例如：969234 秒 = 1 周 4 天 5 小时 13 分钟 54 秒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T10:19:25.860

```
Dim myDate
dim noWeeks
dim noDays
dim tempWeeks
dim pos 
myDate = DateAdd("s",969234,CDate(0))

tempWeeks = FormatNumber(myDate / 7,10)
pos = instr(tempWeeks, ".")
if pos > 1 then
    tempWeeks = left(myDate, pos -1)
end if
noWeeks = Cint(tempWeeks)

noDays = Cint(((myDate / 7) - noWeeks) * 7)

wscript.echo noWeeks & "wk " & noDays & "days " & datepart("h", myDate) & "hrs " & datepart("n", myDate) & "mins " & datepart("s", myDate) & "secs" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T10:49:22.450

没有内置功能可以做到这一点。

这是一个快速而肮脏的：-

```
Function SecondsToString(totalSeconds)

    Dim work : work = totalSeconds

    Dim seconds
    Dim minutes
    Dim hours
    Dim days
    Dim weeks

    seconds = work Mod 60
    work = work \ 60
    minutes = work Mod 60
    work = work \ 60
    hours = work Mod 24
    work = work \ 24
    days = work Mod 7
    work = work \ 7
    weeks = work

    Dim s: s = ""
    Dim renderStarted: renderStarted = False

    If (weeks <> 0) Then
        renderStarted = True
        s = s & CStr(weeks)
        If (weeks = 1) Then
            s = s & "wk "
        Else
            s = s & "wks "
        End If
    End If

    If (days <> 0 OR renderStarted) Then
        renderStarted = True
        s = s & CStr(days)
        If (days = 1) Then
            s = s & "day "
        Else
            s = s & "days "
        End If
    End If

    If (hours <> 0 OR renderStarted) Then
        renderStarted = True
        s = s & CStr(hours)
        If (hours = 1) Then
            s = s & "hr "
        Else
            s = s & "hrs "
        End If
    End If

    If (minutes <> 0 OR renderStarted) Then
        renderStarted = True
        s = s & CStr(minutes)
        If (minutes = 1) Then
            s = s & "min "
        Else
            s = s & "mins "
        End If
    End If

    s = s & CStr(seconds)
    If (seconds = 1) Then
        s = s & "sec "
    Else
        s = s & "secs "
    End If

    SecondsToString = s

End Function 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-10-11T12:42:36.320

你想使用`timer`伪变量：

```
start = timer
Rem do something long
duration_in_seconds = timer - start
wscript.echo "Duration " & duration_in_seconds & " seconds." 
```

# wpf - 自定义控件的集合属性的 DataBinding 失败

> ID：797203
> 
> 赞同：0
> 
> 时间：2009-04-28T10:17:19.920
> 
> 标签：wpf, data-binding, custom-controls

我有一个用户控件 - 说“ControlBase”。它具有“SomeItems”属性，这是一个`ObservableCollection<InheritedFromDO>`从`InheritedFromDO`“DependencyObject”继承的类。
当我为子类创建标记时，`ControlBase`我想启动“SomeItems”集合。但不知何故，我无法在该标记中使用绑定，尽管控件具有非常正常的 DataContext 并且绑定在正常情况下有效。

它看起来像这样：

```
<local:ControlBase
   ...
   >
   <local:ControlBase.SomeItems>
     <SomeItem
       DepPropertyOne={Binding Id} <!-- Does NOT work here -->
       />
     <SomeItem
       DepPropertyOne={Binding Name} <!-- Does NOT work here -->
       />
   <local:ControlBase.SomeItems>

   <Grid>
     <TextBlock
       Text={Binding Id} <!-- Works here -->
       />
   </Grid>
</local:ControlBase> 
```

输出说：

`System.Windows.Data Error: 2 : Cannot find governing FrameworkElement or FrameworkContentElement for target element. BindingExpression:Path=Id; DataItem=null; target element is 'SomeItem' (HashCode=26965808); target property is 'DepPropertyOne' (type 'Object')`

任何想法如何使它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T10:34:00.783

That's because the items in the collection are not part of the logical tree. You need to [customize the logical children](http://kentb.blogspot.com/2008/10/customizing-logical-children.html) of your control if you want that to work, or subclass a control that does it for you (eg. [`ItemsControl`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.aspx)).

# iis - 有没有办法让 Web Farm 使用 IIS 7 为两个不同的应用程序版本提供服务

> ID：797207
> 
> 赞同：0
> 
> 时间：2009-04-28T10:17:46.190
> 
> 标签：iis

我有一个 ASP.NET 应用程序。我希望能够向我们的客户（所有用户登录）无形地推出新版本。我想要一个“旧”站点和一个“新”站点。

用户有一个 url。一旦它们通过身份验证，它们就会被发送到“旧”或“新”站点，具体取决于它们的数据库版本。

这对 IIS 7 可行吗？怎么做最好？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T10:43:13.603

不确定我是否完全理解这个问题，但我会做出一些假设。我假设用户通过表单身份验证登录，并且确定用户数据库版本是微不足道的？

如果是这样，那么您可以简单地将旧版本和新版本托管在单独的虚拟目录中，然后确保它们可以[共享身份验证 cookie](http://aspalliance.com/901_How_To_Share_Authentication_Cookies_across_ASPNET_V11_and_ASPNET_V20_Applications)。一旦用户被成功验证（大概是在新版本的网站上），如果他们应该使用旧网站，您将他们重定向到该网站的默认页面而不是新版本。我相信进行重定向的方法是 RedirectFromLogonPage()

除了防止用户使用书签转到错误的站点之外，您还可以在其中添加一些`Session_Start()`内容`Global.asax`来查找用户应该使用的基本 URL 并适当地重定向他们的请求，您必须这样做网站的新版本和旧版本。

# java - Maven 可以生成 exe 文件和 mac os x 应用程序吗？

> ID：797209
> 
> 赞同：9
> 
> 时间：2009-04-28T10:18:25.503
> 
> 标签：java, windows, macos, maven-2

假设您创建了一个带有 jar 和一些依赖项以及可能的许可证文本文件的小型 Java 桌面应用程序。我知道有很多 Ant 任务可以生成安装程序、可执行文件和适当的 Mac OS X 应用程序，包括将它们打包为“.dmg”文件。例如[JarBundler](http://www.informagen.com/JarBundler/)和[Launch4j](http://launch4j.sourceforge.net/index.html)

Maven是否存在类似的事情？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-28T10:19:29.400

[OSX appbundle 插件](http://mojo.codehaus.org/osxappbundle-maven-plugin/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-28T10:31:06.907

我也认为launch4j有一个maven插件

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-06-02T13:25:30.940

要在 maven 构建中生成 windows 可执行文件，您可以使用 launch4j-maven-plugin。我刚刚回答了一个相关的问题，[尝试使用 Alakai 插件将 Launch4j 集成到 Maven 项目中](https://stackoverflow.com/questions/6060560/trying-to-integrate-launch4j-in-a-maven-project-using-alakai-plugin)，展示了如何实现这一点。它非常简单，比 JSmooth 更简单，它总是有一个 maven 插件。

希望能帮助到你！

# javascript - 使用javascript自定义下拉框？

> ID：797210
> 
> 赞同：-2
> 
> 时间：2009-04-28T10:18:25.877
> 
> 标签：javascript, html, css

我们可以使用 javascript、html、css 编写自定义下拉框吗？并为此放置背景图像。

任何示例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-11T09:09:43.623

是的你可以。使用**css**是这样的。

向您的 CSS 页面添加几个类，如下所示：

```
.cmdUnbelievable
{
    width:200px;
    font-family:Trebuchet MS;
    background-color:#0b5925;
    color:#d4d5d4;  
    border:dashed 2px #f2f2f2;
}
.cmdUnbelievable option
{
    color:#f2f2f2;
    border-bottom:solid 0px white;
    border:dashed 2px #f2f2f2;
    margin-left:15px;
} 
```

然后给你的选择框上课：

```
 <select class="cmdUnbelievable">
        <option>We are</option>
        <option>the knights</option>
        <option>who say Ni.</option>
    </select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T10:39:46.777

是的，您可以创建一个自定义下拉框，如元素。您可以为此目的使用 div 并为该 div 设置 background-image 属性。您可以将 ul 添加为菜单项。

但是你必须为 mouseclick、mouseover、mouseout、keydown 等事件编写代码

# video - 以不同格式编码视频文件

> ID：797224
> 
> 赞同：2
> 
> 时间：2009-04-28T10:21:01.020
> 
> 标签：video, encoding

我正在开发一个允许用户上传视频的网站，我的网站将编码为 3 种格式，wmv、iPod 和 zune。是否有任何第三方工具/API 可用于执行此操作？我不确定[http://channel9.msdn.com/](http://channel9.msdn.com/)、[http://www.hanselman.com/blog/](http://www.hanselman.com/blog/)等网站是如何得到这个的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-28T10:24:52.740

尝试[libavcodec/ffmpeg](http://www.ffmpeg.org/)。

编辑：由于您使用的是 .NET，因此除了您已经提到的[Media Handler Pro](http://www.mediasoftpro.com/)之外，您还可以尝试[FFmpeg.NET](http://ffmpegdotnet.codeplex.com/)或[FFLib.net 。](http://www.intuitive.sk/fflib/post/fflib-net-released.aspx)但是，我个人没有使用过任何这些绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T10:36:33.307

您可以使用诸如[encoding.com](http://www.encoding.com/)之类的外部服务，尽管这可能会更昂贵。

表达式编码器也将编码为这些格式，如果您愿意，它有一个很好的、易于使用的 SDK 或命令行界面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T14:06:42.817

一些更强大的商业产品是：

[Adobe Flash 媒体编码服务器](http://www.adobe.com/products/flashmediaencoding/)

[Wowza 媒体服务器专业版](http://www.wowzamedia.com/products.html)

[Rhozet 碳编码器](http://www.rhozet.com/carbon_coder.html)

[主要概念参考](http://www.mainconcept.com/site/prosumer-products-4.html)

这些解决方案价格昂贵，但质量极高。在我看来，你得到了你所付出的。

# c++ - Qt4 现有插槽无法识别

> ID：797230
> 
> 赞同：0
> 
> 时间：2009-04-28T10:23:46.567
> 
> 标签：c++, qt, qt4, signals-slots

我目前正在尝试使用 Qt4 和 C++ 完成一个项目。我正在使用按钮在状态之间切换。在尝试将按钮的 clicked() 信号连接到 textEdit 以显示相关状态时，我遇到了一个错误：

> Object::connect 没有这样的插槽 QTextEdit::append("move state") Object::connect 没有这样的插槽 QTextEdit::append("link state")

只是，QTextEdit 肯定有一个 append(QString) 插槽。

有任何想法吗？

一些代码示例：

```
QPushButton *move = new QPushButton("Move");
connect(move, SIGNAL(clicked()), textEdit, SLOT(append("move state"))); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-28T11:28:27.767

在进行信号到插槽连接时，您不能将参数（字面意思）传递给 append() 插槽。

您将其称为方法签名：

```
SLOT(append(QString)) //or const QString, I'm not sure 
```

如果每次单击该按钮时都需要文本框附加“移动状态”字样，那么您应该定义自己的插槽来进行附加。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-28T12:02:49.073

简而言之，克里斯有它。

这是我更喜欢 boost::signals 的众多原因之一（您可以使用 boost::bind）。您基本上需要创建另一个函数来捕获信号然后执行附加。

```
...

QPushButton *move = new QPushButton("Move");
connect(move, SIGNAL(clicked()), textEdit, SLOT(MoveState()));
}

...

void MyTextEdit::MoveState()
{
    append("move state");
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-07T00:06:07.130

使用 a`QSignalMapper`将硬编码参数传递给文本编辑的插槽。

例子：

```
QSignalMapper* signalMapper = new QSignalMapper(this);
QPushButton* move = new QPushButton("Move");
signalMapper->setMapping(move, QString("move state"));
connect(move, SIGNAL(clicked()), signalMapper, SLOT(map()));
connect(signalMapper, SIGNAL(mapped(QString)), textEdit, SLOT(append(QString))); 
```

请注意上述代码中的错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-06T23:43:56.497

假设您将有其他`QPushButton`s 会导致其他状态发生，您可以将它们放在 a`QButtonGroup`中。然后，您可以使用枚举，例如`{ MOVE_ID, STOP_ID, ... }`引用可能的状态。

```
QPushButton* move = new QPushButton( "Move" ) ;
QPushButton* stop = new QPushButton( "Stop" ) ;
QButtonGroup* buttonGroup = new QButtonGroup() ;
buttonGroup->addButton( move, MOVE_ID ) ;
buttonGroup->addButton( stop, STOP_ID ) ;

// Connecting QButtonGroup to writing function
connect( buttonGroup, SIGNAL( buttonClicked( int ) ),
         textEdit, SLOT( append( int ) ) ) ; 
```

在`textEdit`中，您将定义一个函数，该函数根据您获得的状态附加适当的文本。

```
void append( int i )
{
   switch ( i )
   {
      case MOVE_ID:
         textEdit->append( "move state" ) ;
         break ;
      case STOP_ID:
         textEdit->append( "stop state" ) ;
         break ;
   }
} 
```

# mysql - 从 vbs 导入 csv 文件到 mysql 和访问时遇到问题

> ID：797239
> 
> 赞同：1
> 
> 时间：2009-04-28T10:25:30.883
> 
> 标签：mysql, ms-access, vbscript, csv

我正在使用以下代码，基于 Remou 和 Anthony Jones 以前的帖子和答案。

```
Dim db: db = "C:\Dokumente und Einstellungen\hom\Anwendungsdaten\BayWotch4\baywotch.db5"
Dim exportDir: exportDir = "C:\Dokumente und Einstellungen\hom\Desktop"
Dim exportFile: exportFile=NewFileName(exportDir)

Dim cn: Set cn = CreateObject("ADODB.Connection")

cn.Open _
    "Provider = Microsoft.Jet.OLEDB.4.0; " & _
    "Data Source =" & db

cn.Execute "SELECT * INTO [text;HDR=No;Database=" & exportDir & _
   ";CharacterSet=65001]." & exportFile & " FROM tblAuction"

'Export file

'Support functions

Function NewFileName(ExportPath)
Dim fs 
Dim NewFileTemp

Set fs = CreateObject("Scripting.FileSystemObject")

NewFileTemp = "CSV" & Year(Date) _
    & Month(Date) & Day(Date) & ".csv"

NewFileName = NewFileTemp
End Function 
```

我遇到的问题是，当我导出文件时，csv 文件包含标题，尽管 HDR 设置为 No。它会在实际数据之前将我的列的名称放在引号中，这会在尝试导入时导致问题。

我的第二个问题是特殊字符似乎没有被转义。

我正在将数据加载到mysql中：

```
LOAD DATA LOCAL INFILE 'file' INTO TABLE MYTABLE FIELDS TERMINATED BY ';' ENCLOSED BY '"' ESCAPED BY '\\' 
```

我也尝试过不使用 ESCAPED BY 子句。

问题是其中一个字段包含 html 数据，这意味着引号、斜杠等。这会导致数据导入不正确，日期字段被插入用户名字段等。我怎样才能逃脱以阻止这种情况发生或正确导入？

我正在使用如下的 scheme.ini：

```
[CSV2009427.csv]
ColNameHeader=No
CharacterSet=65001
Format=Delimited(;)
Col1=article_no Char Width 19 
```

并且列标题仍然被导出。难道不需要schema.ini就可以做到这一点吗？即能够以可移植的方式使用脚本，其中 schema.ini 可能并不总是存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T12:51:54.557

> 我遇到的问题是，当我导出文件时，csv 文件包含标题，尽管 HDR 设置为 No。

我认为您需要包含`ColNameHeader=False`在[Schema.ini 文件](http://msdn.microsoft.com/en-us/library/ms709353.aspx)中。

例子：

C:\schema.ini

```
[blah.csv]
ColNameHeader=False
CharacterSet=1252
Format=CSVDelimited
Col1=pence_amount Integer 
```

SQL 代码：

```
SELECT * INTO [text;Database=C:\].blah#csv FROM Coins; 
```

`Database`请注意，schema.ini 文件保存在与 SQL 中的连接字符串中指定的目录相同的目录中。

结果：没有标题。

# python - 一个模块的导入语句失败

> ID：797241
> 
> 赞同：2
> 
> 时间：2009-04-28T10:26:05.343
> 
> 标签：python

好的，我发现了问题，这是一个环境问题，我在 sys.path 上有相同的模块（减去 options.py），而是从那里导入。感谢大家的帮助。

我有一系列导入语句，其中最后一个不起作用。知道为什么吗？options.py 与其他所有内容位于同一目录中。

```
from snipplets.main import MainHandler
from snipplets.createnew import CreateNewHandler
from snipplets.db import DbSnipplet
from snipplets.highlight import HighLighter
from snipplets.options import Options 
```

ImportError：没有名为选项的模块

我在 snipplets 目录中的 __init__.py 文件是空白的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T10:48:42.090

我怀疑您的其他导入之一是`snipplets`用赋值语句重新定义的。或者您的其他模块之一已更改`sys.path`。

* * *

**编辑**

“所以流程是这样的：将snipplets包添加到路径导入......”

不。

不要修改`sys.path`——那样就会有问题。修改`site.path`会导致路径上存在或不存在什么以及它们的顺序不明确。

最简单、最可靠、最明显、最可控的事情就是下面这些。选择一个。

*   定义`PYTHONPATH`（一次，在您的程序外部）。一个简单的环境变量，几乎与站点包上的安装相同。

*   在站点包中安装您的包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T10:58:38.213

您的[主分支](http://github.com/woodenbrick/snipplets/tree/68e40dcfa1195cc63d4e1155b8353bb1aa1f8797/snipplets)没有`options.py`. 会不会是你的 dev 和 master 分支有冲突？

[如果这是您的实际代码](http://github.com/woodenbrick/snipplets/blob/2c13a6de0ae5c6cb752bbc37e2620e823e498c97/bin/snipplets)，那么您`option`在第 21 行有变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T11:05:06.920

下面的工作吗？

```
import snipplets.options.Options 
```

如果是这样，您的其他 snipplets 文件之一可能会设置一个名为 options 的全局变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T11:50:12.490

你在窗户上吗？您可能想尝试在您的init .py 文件中定义一个`__`all`__`列表，如此[处](http://docs.python.org/tutorial/modules.html#importing-from-a-package)所述。除非您要导入 *，否则它不应该有所作为，但我已经看到模块不会导入，除非它们在那里定义。`__``__`

其次，您可以尝试设置一个[virtualenv](http://pypi.python.org/pypi/virtualenv)。使用大量站点范围的 python 包可能会导致这些事情。

最后，确保选项的权限设置正确。我花了几个小时试图弄清楚这些事情，却发现这是我没有权限导入它的问题。

# sifr - SIFR 3 文本调整大小以适应宽度

> ID：797244
> 
> 赞同：0
> 
> 时间：2009-04-28T10:26:59.617
> 
> 标签：sifr

我正在使用 sifr 3 并试图将 h1 放在一条线上，但在 400px 的设定宽度内。默认情况下，如果文本过多，则会放到下一行。我使用了 forceSingleLine: true 但随后文本仅延伸到 400px 宽度。有没有一种方法可以调整文本大小以适应宽度并保持在一行？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-10T07:57:36.893

但是 sIFR3 属性“fitExactly”呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T18:13:58.790

这是 sIFR 2 的行为，导致字体大小不一致。这已在 sIFR 3 中得到修复，因此您想要实现的目标只能在 sIFR 2 中实现。

# web-services - 从子文件夹调用 Web 服务

> ID：797248
> 
> 赞同：0
> 
> 时间：2009-04-28T10:28:33.013
> 
> 标签：web-services, subdirectory

我正在使用 ASP.net，并且正在尝试从 jquery 执行 webmethod。我有以下文件结构：

/MyWebService.asmx
/MyPage1.aspx（引用在 MyWebService.asmx 中调用 web
方法的 javascript 文件） /MySubFolder/MyPage2.aspx（MyPage2.aspx 引用相同的 javascript 文件）

我的问题是 MyPage1.aspx 可以调用 web 服务中的 web 方法，但 MyPage2.aspx 不能。任何想法为什么？它必须与 MyPage2.aspx 位于子文件夹中的事实有关。如果我只是将 MyPage2.aspx 移动到根目录，它就可以工作。

我正在使用 jquery，javascript 文件中的代码如下所示：

$.ajax({
type: "POST",
url: "MyWebService.asmx/MyWebMethod",
data: "{}",
contentType: "application/json; charset=utf-8",
dataType: "json",
成功：功能（味精）
等

我尝试将 url 更改为：/MyWebService.asmx/MyWebMethod（MyWebService 前面有一个斜杠），但这没有任何区别。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T11:28:05.710

我认为值得尝试传递相对 URL，例如“../MyWebService.asmx/MyWebMethod”。

就个人而言，我更喜欢在 AJAX 命中期间传递绝对 URL。

# php - 在 PHP 中转置多维数组

> ID：797251
> 
> 赞同：80
> 
> 时间：2009-04-28T10:29:37.660
> 
> 标签：php, arrays, higher-order-functions

你将如何在 PHP 中翻转 90 度（转置）多维数组？例如：

```
// Start with this array
$foo = array(
    'a' => array(
       1 => 'a1',
       2 => 'a2',
       3 => 'a3' 
    ),
    'b' => array(
       1 => 'b1',
       2 => 'b2',
       3 => 'b3' 
    ),
    'c' => array(
       1 => 'c1',
       2 => 'c2',
       3 => 'c3' 
    )
);

$bar = flipDiagonally($foo); // Mystery function
var_dump($bar[2]);

// Desired output:
array(3) {
  ["a"]=>
  string(2) "a2"
  ["b"]=>
  string(2) "b2"
  ["c"]=>
  string(2) "c2"
} 
```

你将如何实施`flipDiagonally()`？

编辑：这不是家庭作业。我只是想看看是否有任何 SOers 有比最明显的路线更有创意的解决方案。但是由于一些人抱怨这个问题太简单了，那么一个更通用的解决方案如何处理第 n^维数组呢？

即你将如何编写一个函数，以便：

```
$foo[j][k][...][x][y][z] = $bar[z][k][...][x][y][j] 
```

？（ps。在这种情况下，我认为 12 嵌套`for loops`不是最好的解决方案。）

* * *

## 回答 #1

> 赞同：264
> 
> 时间：2010-08-06T12:22:47.707

```
function transpose($array) {
    array_unshift($array, null);
    return call_user_func_array('array_map', $array);
} 
```

或者，如果您使用的是 PHP 5.6 或更高版本：

```
function transpose($array) {
    return array_map(null, ...$array);
} 
```

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2009-04-28T10:39:03.627

有 2 个循环。

```
function flipDiagonally($arr) {
    $out = array();
    foreach ($arr as $key => $subarr) {
        foreach ($subarr as $subkey => $subvalue) {
            $out[$subkey][$key] = $subvalue;
        }
    }
    return $out;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-04-28T10:47:00.583

我认为您指的是数组[转置](http://en.wikipedia.org/wiki/Transpose)（列变为行，行变为列）。

这是一个为您执行此操作的函数[（来源）](http://www.weberdev.com/get_example-4718.html)：

```
function array_transpose($array, $selectKey = false) {
    if (!is_array($array)) return false;
    $return = array();
    foreach($array as $key => $value) {
        if (!is_array($value)) return $array;
        if ($selectKey) {
            if (isset($value[$selectKey])) $return[] = $value[$selectKey];
        } else {
            foreach ($value as $key2 => $value2) {
                $return[$key2][$key] = $value2;
            }
        }
    }
    return $return;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-28T12:17:43.640

转置一个 N 维数组：

```
function transpose($array, &$out, $indices = array())
{
    if (is_array($array))
    {
        foreach ($array as $key => $val)
        {
            //push onto the stack of indices
            $temp = $indices;
            $temp[] = $key;
            transpose($val, $out, $temp);
        }
    }
    else
    {
        //go through the stack in reverse - make the new array
        $ref = &$out;
        foreach (array_reverse($indices) as $idx)
            $ref = &$ref[$idx];
        $ref = $array;
    }
}

$foo[1][2][3][3][3] = 'a';
$foo[4][5][6][5][5] = 'b';

$out = array();
transpose($foo, $out);

echo $out[3][3][3][2][1] . ' ' . $out[5][5][6][5][4]; 
```

真的很老套，可能不是最好的解决方案，但嘿，它有效。

基本上它递归地遍历数组，在数组中累积当前索引。
一旦到达引用的值，它就会获取索引的“堆栈”并将其反转，将其放入 $out 数组中。（有没有办法避免使用 $temp 数组？）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-04-07T13:34:31.580

如果您尝试使用 splat 运算符 ( `...`) 解压缩 OP 的示例数据，您将生成：

> 致命错误：未捕获的错误：无法使用字符串键解压数组

[证明](https://3v4l.org/koHhn)

要克服此错误，请`array_values()`在解包之前调用以索引第一级键。

```
var_export(array_map(null, ...array_values($foo))); 
```

输出：

```
array (
  0 => 
  array (
    0 => 'a1',
    1 => 'b1',
    2 => 'c1',
  ),
  1 => 
  array (
    0 => 'a2',
    1 => 'b2',
    2 => 'c2',
  ),
  2 => 
  array (
    0 => 'a3',
    1 => 'b3',
    2 => 'c3',
  ),
) 
```

关于使用这种技术进行转置的另一个特性/惊喜是，`null`当子数组的大小不同时，将生成元素……但可能不是您所期望的。

从这样的样本数据：

```
$foo = array(
    'a' => array(
       1 => 'a1',
       2 => 'a2'
    ),
    'b' => array(
       1 => 'b1',
       3 => 'b3' 
    ),
    'c' => array(
       1 => 'c1',
       2 => 'c2',
       3 => 'c3' 
    )
); 
```

输出是：

```
array (
  0 => 
  array (
    0 => 'a1',
    1 => 'b1',
    2 => 'c1',
  ),
  1 => 
  array (
    0 => 'a2',
    1 => 'b3',
    2 => 'c2',
  ),
  2 => 
  array (
    0 => NULL,
    1 => NULL,
    2 => 'c3',
  ),
) 
```

请注意该功能所表现出的水平护理（类似于将您的行李从机腹中取出的行李搬运工）。没有注意原始子数组值的 id（如果`1`, `2`, &`3`是`x`, `y`, & 则无关紧要`z`）；任何从传送带上掉下来的东西都会被扔到最低的可用插槽中。

这种行为在交付完整矩阵时是一致且可靠的。`foreach()`循环替代方案本身不会从不同大小的子数组中传递元素`null`，并且在大多数实现中，它访问所有子数组值的能力取决于第一个子数组的长度。

```
$foo = array(
    'a' => array(
       1 => 'a1',
       2 => 'a2'
    ),
    'b' => array(
       1 => 'b1',
    ),
    'c' => array(
       1 => 'c1',
       2 => 'c2',
       3 => 'c3' 
    )
);

foreach (current($foo) as $column => $not_used) {
    $result[] = array_column($foo, $column);
}
var_export($result); 
```

输出：

```
array (
  0 => 
  array (
    0 => 'a1',
    1 => 'b1',
    2 => 'c1',
  ),
  1 => 
  array (
    0 => 'a2',
    1 => 'c2',
  ),
) 
```

如上所示，如果您想确保从输入数组中提取了所有数据，则必须编写添加逻辑以将所有唯一列 id 传递到 foreach 循环。

* * *

ps 在我了解这种速记转置语法之前，我写[了一个更丑陋、更冗长的功能转置器，它受到了一些批评](https://stackoverflow.com/a/43950486/2943403)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-05-23T13:20:26.257

我需要一个支持关联数组的转置函数：

```
 $matrix = [
        ['one' => 1, 'two' => 2],
        ['one' => 11, 'two' => 22],
        ['one' => 111, 'two' => 222],
    ];

    $result = \array_transpose($matrix);

    $trans = [
        'one' => [1, 11, 111],
        'two' => [2, 22, 222],
    ]; 
```

回来的路：

```
 $matrix = [
        'one' => [1, 11, 111],
        'two' => [2, 22, 222],
    ];

    $result = \array_transpose($matrix);

    $trans = [
        ['one' => 1, 'two' => 2],
        ['one' => 11, 'two' => 22],
        ['one' => 111, 'two' => 222],
    ]; 
```

这个`array_unshift`技巧没有奏效，也没有`array_map`......

所以我编写了一个`array_map_join_array`函数来处理记录键关联：

```
/**
 * Similar to array_map() but tries to join values on intern keys.
 * @param callable $callback takes 2 args, the intern key and the list of associated values keyed by array (extern) keys.
 * @param array $arrays the list of arrays to map keyed by extern keys NB like call_user_func_array()
 * @return array
 */
function array_map_join_array(callable $callback, array $arrays)
{
    $keys = [];
    // try to list all intern keys
    array_walk($arrays, function ($array) use (&$keys) {
        $keys = array_merge($keys, array_keys($array));
    });
    $keys = array_unique($keys);
    $res = [];
    // for each intern key
    foreach ($keys as $key) {
        $items = [];
        // walk through each array
        array_walk($arrays, function ($array, $arrKey) use ($key, &$items) {
            if (isset($array[$key])) {
                // stack/transpose existing value for intern key with the array (extern) key
                $items[$arrKey] = $array[$key];
            } else {
                // or stack a null value with the array (extern) key
                $items[$arrKey] = null;
            }
        });
        // call the callback with intern key and all the associated values keyed with array (extern) keys
        $res[$key] = call_user_func($callback, $key, $items);
    }
    return $res;
} 
```

并`array_transpose`变得明显：

```
function array_transpose(array $matrix)
{
    return \array_map_join_array(function ($key, $items) {
        return $items;
    }, $matrix);
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-19T13:33:15.607

这是[Codler/Andreas 解决方案](https://stackoverflow.com/a/3423692/3143771)的变体，适用于关联数组。有点长但是~~无环~~纯功能：

```
<?php
function transpose($array) {
    $keys = array_keys($array);
    return array_map(function($array) use ($keys) {
        return array_combine($keys, $array);
    }, array_map(null, ...array_values($array)));
} 
```

例子：

```
<?php
$foo = array(
    "fooA" => [ "a1", "a2", "a3"],
    "fooB" => [ "b1", "b2", "b3"],
    "fooC" => [ "c1", "c2", "c3"]
);

print_r( transpose( $foo ));
// Output like this:
Array (
    [0] => Array (
        [fooA] => a1
        [fooB] => b1
        [fooC] => c1
    )

    [1] => Array (
        [fooA] => a2
        [fooB] => b2
        [fooC] => c2
    )

    [2] => Array (
        [fooA] => a3
        [fooB] => b3
        [fooC] => c3
    )
); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-09-09T06:36:56.333

**我们可以通过使用两个 foreach 来做到这一点。遍历一个数组和另一个数组以创建新数组
像这样：**

```
$foo = array(
    'a' => array(
       1 => 'a1',
       2 => 'a2',
       3 => 'a3' 
    ),
    'b' => array(
       1 => 'b1',
       2 => 'b2',
       3 => 'b3' 
    ),
    'c' => array(
       1 => 'c1',
       2 => 'c2',
       3 => 'c3' 
    )
);

$newFoo = [];
foreach($foo as $a => $k){
   foreach($k as $i => $j){
       $newFoo[$i][]= $j;
   }
} 
```

**检查输出**

```
echo "<pre>";
print_r($newFoo);
echo "</pre>"; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2022-01-21T15:12:46.227

Codler 对单行矩阵（例如`[[1,2]]`）和空矩阵（`[]`）的回答都失败了，它必须是特殊情况：

```
function transpose(array $matrix): array {
    if (!$matrix) return [];
    return array_map(count($matrix) == 1 ? fn ($x) => [$x] : null, ...$matrix);
} 
```

（注意：PHP 7.4+ 语法，很容易适应旧版本）

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-02-16T16:31:37.907

我遇到了同样的问题。这是我想出的：

```
function array_transpose(array $arr)
{
    $keys    = array_keys($arr);
    $sum     = array_values(array_map('count', $arr));

    $transposed = array();

    for ($i = 0; $i < max($sum); $i ++)
    {
        $item = array();
        foreach ($keys as $key)
        {
            $item[$key] = array_key_exists($i, $arr[$key]) ? $arr[$key][$i] : NULL;
        }
        $transposed[] = $item;
    }
    return $transposed;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-03-05T14:06:26.203

这是与@codler 的回答完全相同的另一种方法。我不得不在 csv 中转储一些数组，所以我使用了以下函数：

```
function transposeCsvData($data)
{
    $ct=0;
    foreach($data as $key => $val)
    {
        //echo count($val);
        if($ct< count($val))
            $ct=count($val);
        }
    //echo $ct;
    $blank=array_fill(0,$ct,array_fill(0,count($data),null));
    //print_r($blank);

    $retData = array();
    foreach ($data as $row => $columns)
    {
        foreach ($columns as $row2 => $column2) 
        {
            $retData[$row2][$row] = $column2;
            }
        }
    $final=array();
    foreach($retData as $k=>$aval)
    { 
        $final[]=array_replace($blank[$k], $aval);
       }
    return $final;
    } 
```

测试和输出参考：[https ://tutes.in/how-to-transpose-an-array-in-php-with-irregular-subarray-size/](https://tutes.in/how-to-transpose-an-array-in-php-with-irregular-subarray-size/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-07-30T10:43:10.253

在开始之前，我想再次**感谢**@quaazardus 发布他的通用解决方案，用于转置任何二维关联（或非关联）数组！

由于我习惯于尽可能简洁地编写代码，因此我继续将他的代码“最小化”一点。这*很可能* **不**符合每个人的口味。但以防万一有人感兴趣，这是我对他的解决方案的看法：

```
function arrayMap($cb, array $arrays) // $cb: optional callback function
{   $keys = [];
    array_walk($arrays, function ($array) use (&$keys) 
                        { $keys = array_merge($keys, array_keys($array)); });
    $keys = array_unique($keys); $res = [];
    foreach ($keys as $key) {
      $items = array_map(function ($arr) use ($key)
                         {return isset($arr[$key]) ? $arr[$key] : null; },$arrays);
      $res[$key] = call_user_func(
        is_callable($cb) ? $cb 
                         : function($k, $itms){return $itms;},
        $key, $items);
    }
    return $res;
} 
```

现在，类似于 PHP 标准函数`array_map()`，当您调用

```
arrayMap(null,$b); 
```

您将获得所需的转置矩阵。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-04-02T10:07:05.360

这是实现此目的的 array_walk 方法，

```
function flipDiagonally($foo){
    $temp = [];
    array_walk($foo, function($item,$key) use(&$temp){
        foreach($item as $k => $v){
            $temp[$k][$key] = $v;     
        }
    });
    return $temp;
}
$bar = flipDiagonally($foo); // Mystery function 
```

[演示](http://sandbox.onlinephpfunctions.com/code/8f5f923bf39fe38a982cebbc38c2d02ed73ffc64)。

* * *

## 回答 #14

> 赞同：-4
> 
> 时间：2017-06-17T01:24:04.060

```
<?php

$tableau_init = [
    [
        "prenom" => "med",
        "age" => 1
    ],
    [
        "prenom" => "hassan",
        "age" => 2
    ],
    [
        "prenom" => "ali",
        "age" => 3
    ]
];

function transpose($tableau){
    $out = array();

    foreach ($tableau as $key => $value){
        foreach ($value as $subKey => $subValue){
            $out[$subKey][$key] = $subValue;
        }
    }

    echo json_encode($out);
}

transpose($tableau_init); 
```

像这样试试

# url - 从您的网站中删除 WWW 前缀

> ID：797257
> 
> 赞同：13
> 
> 时间：2009-04-28T10:33:54.827
> 
> 标签：url, web

当作为 URL 的一部分输入时，Stack Overflow（和其他网站）如何删除“www”前缀？

它是重定向，重写还是完全其他的东西？

更新：我特别想知道在 IIS 6 的上下文中

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-28T10:38:12.163

在 Apache 上，它看起来像这样（在 .htaccess 文件中）：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www.example.com$ [NC]
RewriteRule ^(.*)$ http://example.com/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-04-28T10:43:12.993

一个简单的方法是使用 Apache“重定向”指令：

```
<VirtualHost *:80>
    ServerName www.example.com
    Redirect permanent / http://example.com/
</VirtualHost>

<VirtualHost *:80>
    ServerName example.com
    # remainder of server configuration goes here
</VirtualHost> 
```

重定向指令会自动保留`/`URL 中的任何内容。我发现这种方法比 Rewrite 方法更容易阅读和理解。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-04-28T10:53:40.050

启动[Fiddler](https://www.fiddler2.com/)，我们可以看到**服务器**以“301 Moved Permanently”状态响应并将其引用到[http://stackoverflow.com](http://stackoverflow.com)。由于 StackOverflow 托管在 Windows 2k8 **IIS7**上，他们直接在 IIS7 中设置了这个重定向。

供参考：

[HTTP 状态列表](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

如果您是 .NET 开发人员，您可能知道 "Respose.Redirect" ，这会创建 302 Object Moved 状态。在这种情况下，搜索引擎更喜欢 301 状态代码，因为他们知道他们将来不应该回到 www.stackoverflow.com。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-28T10:38:16.297

您可以通过多种方式进行操作，使用 mod_rewrite 和重定向是我的最爱。像这样的东西：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www.cuenca.co$ [NC]
RewriteRule ^(.*)$ http://cuenca.co/$1 [R=301,L] 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-28T10:35:24.853

重定向。子域“www.stackoverflow.com”将简单地重定向到“stackoverflow.com”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-28T11:04:01.493

您需要添加一个指向您的 Web 服务器的默认 dns 条目。

ping site.com 并验证 ip 是否指向网络服务器，如果不是，则需要添加默认 DNS 条目。

对于基本设置：

您必须添加主机标头[http://www.visualwin.com/host-header/](http://www.visualwin.com/host-header/)

创建 1 个站点，其主机标头为 www.site.com

在主目录选项卡中，将其设置为永久重定向到[http://site.com](http://site.com)

使用 site.com 的主机标头创建第二个站点

如果您希望 www.site.com/file.html 重定向到 site.com/file.html，您将需要更高级的设置，例如 ISAPI_Rewrite 或使用自定义 404 页面来执行此操作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-28T10:48:20.780

这要追溯到很久以前，但据我所知，这是一个 DNS 设置。我认为您不需要指定主机地址（WWW 是该站点所在的主机（或计算机/集群...）的名称。）。

我认为您可以将其设置为将所有请求发送到默认主机。

不是 100% 肯定，但看看 DNS 有什么可能。

希望这有助于或至少让你朝着正确的方向前进。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-07-15T01:18:02.670

你可以做 mod_rewrite 为 Apache 做的事情，为 IIS 提供一个类似的 URL 重写器。一个很好的是[IIRF](http://iirf.codeplex.com)。规则是：

```
RewriteCond  %{HTTP_HOST}  ^www\.example\.com$     [I]
RedirectRule ^(.*)$        http://example.com/$1   [R=301] 
```

您还可以像这样通配主机名：

```
RewriteCond  %{HTTP_HOST}  ^(.+)\.example\.com$    [I]
RedirectRule ^(.*)$        http://example.com/$1   [R=301] 
```

IIRF 可以免费使用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-06-17T21:22:52.373

对于阿帕奇

```
<VirtualHost *:80>
ServerName yourdomain.tld
ServerAlias www.yourdomain.tld 
```

# .net - 在 wcf 服务调用上设置 CultureInfo？

> ID：797259
> 
> 赞同：6
> 
> 时间：2009-04-28T10:35:08.270
> 
> 标签：.net, wcf, cultureinfo

我有一个 WCF 服务正在运行，需要解析一些数据。事实证明，数据（点、大小）在不同 CultureInfo 中的转换方式不同，并且解析分布在许多类和方法中。由于所有解析都是在没有传递任何 CultureInfo 的情况下完成的，因此解析的成功取决于线程文化。

由于没有 CultureInfo 的编程设置，该服务会以某种方式从机器中选择当前的文化信息。我不知道它是从哪里得到的，因为对区域和语言选项的更改似乎对 wcf 服务的文化信息没有任何影响。对 web.config 的更改（是的，服务托管在 iis 中）似乎也不起作用。

我真的只有一个选择吗？以编程方式设置 CultureInfo？我可以找到所有的转换调用并传入 CultureInfo，或者我可以在 Thread.CurrentThread.CurrentCulture 上设置它。有没有办法一劳永逸地设置 CultureInfo - 对所有暴露的 wcf 方法有影响？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-12T19:01:30.323

关于在 web.config 中使用标签的答案仅在启用 Asp.net 兼容模式时才有效。您还需要以下内容：

```
<serviceHostingEnvironment aspNetCompatibilityEnabled="true"/> 
```

如果没有 Asp.Net 兼容模式，则不使用 http 模块并忽略标记。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T10:42:41.403

你应该看看这篇博文......

[http://blogs.msdn.com/drnick/archive/2008/02/26/using-call-context-initializers-for-culture.aspx](http://blogs.msdn.com/drnick/archive/2008/02/26/using-call-context-initializers-for-culture.aspx)

...它显示了如何定义设置文化的行为。

但是，web.config 应该是你的朋友。您应该能够从这里设置您的服务使用的“默认”文化。

全球化元素...

[http://msdn.microsoft.com/en-us/library/hy4kkhe0.aspx](http://msdn.microsoft.com/en-us/library/hy4kkhe0.aspx)

...应该允许您设置文化和 UICulture ...

```
<globalization
    enableClientBasedCulture="true|false"
    requestEncoding="any valid encoding string"
    responseEncoding="any valid encoding string"
    fileEncoding="any valid encoding string"

    responseHeaderEncoding = "any valid encoding string" 
    resourceProviderFactoryType = string
    enableBestFitResponseEncoding = "true|false"

    culture="any valid culture string"
    uiCulture="any valid culture string"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T11:03:32.087

您可以像上面提到的 Martin 一样使用配置文件，但作为一种好的做法，您绝对应该在必要的地方为 InvariantCulture 设置文化信息，以适应在不同语言环境中发送的数据。即日期、字符串、数字

# c# - 表达混合颜色区域

> ID：797269
> 
> 赞同：5
> 
> 时间：2009-04-28T10:39:10.693
> 
> 标签：c#, silverlight, xaml, expression-blend

我正在使用表达式混合和 c# 创建一个 silverlight 站点。我想创建一个包含许多区域的世界地图。单击该区域时，颜色会发生变化。我已经创建了区域。

有谁知道这是怎么做到的吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T16:31:10.473

由于您已经创建了区域，因此当您获得点击事件时，您需要更改区域的颜色。通常这将是控件的背景属性，尽管它可能取决于您用来表示区域的控件？

**编辑以回应评论**

由于您使用的是矩形和其他形状**Fill**是您将要更改的属性。

# java - Java - DocumentBuilder 关闭套接字连接

> ID：797273
> 
> 赞同：1
> 
> 时间：2009-04-28T10:40:45.013
> 
> 标签：java, sockets, connection

我有一个`Socket`连接关闭太快的问题。有人告诉我我需要临时加载数据`Socket`并解析它。这是我的代码：

```
ServerSocket listen = new ServerSocket(this.port);
Socket server;

while(i < this.maxConnections)
{
    server = listen.accept();
    processRequest(server);
    i++;
} 
```

## 处理请求

```
protected void processRequest(Socket server) throws IOException
{
    ProcessXML response = new ProcessXML(server.getInputStream());

    new PrintWriter(server.getOutputStream(), true).println("response text");
} 
```

## 处理XML

```
public ProcessXML(InputStream is)
{
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    factory.setValidating(false);
    factory.setNamespaceAware(false);

    Document doc = factory.newDocumentBuilder().parse(new InputSource(is));
    ....
} 
```

# 错误

```
[Fatal Error] :2:1: Premature end of file.
org.xml.sax.SAXParseException: Premature end of file.
at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(Unknown Source)
at ProcessXML.<init>(ProcessXML.java:22)
at Bank.processRequest(Bank.java:41)
at Bank.listen(Bank.java:25)
at BankStart.main(BankStart.java:6) 
```

* * *

现在我可以将 的内容存储`server.GetInputStream()`到文件中，然后将其提供给`DocumentBuilder`，但我认为这是一个糟糕的解决方案。我怎样才能将内容存储到一些临时存储中，并且还能够在`.parse()`不关闭套接字的情况下提供该内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T10:49:12.650

我认为您使用的解决方案期望数据在构建时可用。您将需要使用流解析器。找到一个 STAX 实现，你应该能够做到这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T11:53:14.697

看起来不像是套接字的东西......否则你会看到一个套接字关闭异常或类似的东西。作为测试，只需读取字节并将其保存到某个地方的文本文件中，不要担心构建文档。检查文件是否是格式正确的 XML，并且编码是否与文档中指定的匹配。在文件末尾寻找任何有趣的字符，可能是客户端插入了一些奇怪的 EOF 字符或类似字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T04:50:30.603

`FilterInputStream`为自己编写一个忽略的派生类`close()`并将套接字输入流包装在其中，然后再将其提供给`DocumentBuilder.parse().`

# .net - 组装证据

> ID：797275
> 
> 赞同：5
> 
> 时间：2009-04-28T10:41:06.227
> 
> 标签：.net, security, code-access-security

以下代码的目的是什么？：

```
object[] hostEvidence = {new Zone(SecurityZone.Internet)}; 
Evidence internetEvidence = new Evidence(hostEvidence, null);
AppDomain myDomain = AppDomain.CreateDomain("MyDomain");
myDomain.ExecuteAssembly("SecondAssembly.exe", internetEvidence); 
```

据我所知，CLR**自动**（它要求 Windows）根据程序集的运行位置（本地机器、互联网等）分配区域。我猜这是为了减少程序集的权限，但是当我们有两个证据时，我们也有两个代码组，它们在给定的策略级别内**求和。**

亲切的问候 PK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T11:11:00.773

根据 .NET Framework 基础书籍（我还没有完全记住它以备考试），证据是用户指定的（.NET 配置工具）或开发人员指定的。因此，通过这种方式，您可以明确定义所需的区域。

尽管我可能错了，但我不知道 CLR 会自动分配区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T11:18:26.653

我希望 ExecuteAssembly 方法的这种重载使用提供的证据**，而不是**自动分配新的证据。否则，有什么意义呢？

# c# - 抑制生成代码的结果

> ID：797282
> 
> 赞同：3
> 
> 时间：2009-04-28T10:45:51.350
> 
> 标签：c#, auto-generate

我创建了一个项目，并在其属性中选中了“抑制生成代码的结果”。当我添加服务引用时，自动生成的代理类 (reference.cs) 添加以下属性：

```
[System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.Runtime.Serialization", "3.0.0.0")] 
```

当我在发布模式下编译时，因为我启用了 xml 注释的生成，我收到警告，因为没有任何代理方法被注释。据我了解，我不应该得到它，因为我抑制了自动生成的代码。

此外，reference.cs 类不符合 cls。

有没有人知道如何在不使用编译指示禁用/启用的情况下解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T11:03:23.193

“抑制生成代码的结果”选项仅用于代码分析。要禁止来自编译器的警告，您必须使用 pragma disable。

# database-design - 数据库设计：从城市列表定义数据访问

> ID：797284
> 
> 赞同：1
> 
> 时间：2009-04-28T10:46:36.417
> 
> 标签：database-design

我正在尝试构建一个提供各个城市数据的 API。

目前，有一个名为*APIPriv*的表，其中包含以下列：

```
===================================================
  idApiPriv | idClient | Daily | Hourly | DevKey
===================================================
      1     |    23    |  'Y'  |  'N'   |[MD5 Hex] 
```

*idClient*是客户端表的外键。

*Daily*和*Hourly*是数据类型——“ **Y** ”表示客户/开发人员可以访问数据，“ **N** ”表示他/她没有。

*DevKey*是一个自动生成的 MD5 字符串，提供给开发者，用作开发者密钥。

现在，对于每个可以访问 API 的开发人员，数据库还需要存储与每个开发人员关联的城市列表。开发商只会收到这些城市的数据。

我如何在数据库中定义它？列表中的城市数量不固定。一个开发者可以访问 5 个城市，另一个可以访问 10 个，另一个可以访问 7 个。

（已经有一个主*City*表，其中包含 1500 个城市的列表，当然，每个开发人员的城市列表需要是该数据的子集。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T11:02:47.847

您需要一个城市关联表，其效果如下：

```
 idDevCityPriv | idApiPriv | idCity
====================================
      1              1         34
      2              1         42 
```

然后，要获取您的城市列表，它会是这样的（假设您有一个 DevKey）：

```
select
    c.*
from
    APIPriv a
    inner join DevCityPriv d on a.idAPIPriv = d.idAPIPriv
    inner join City c on d.idCity = c.idCity
where
    a.DevKey = [DevKeyVariable] 
```

干杯，
埃里克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T11:01:11.670

添加另一个包含 2 列的表 - idClient 和 Cities 表中的 id。

然后对于开发人员有权访问的每个城市，在此表中添加一个条目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T11:03:54.583

您将需要另一个表，其中包含两列，一列用于 DevKey，一列用于 CityID。这将允许您进行从开发人员到城市的一对多连接。

我还建议您将 Daily 和 Hourly 更改为布尔值 [true|false] 而不是 char 或位 [0|1]。这些将更好地适应逻辑条件并具有一组更严格的可能值，即只有两个而不是'y'、'Y'、'n'、'N'、'x'等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T11:04:04.287

我建议使用所谓的连接表或链接表：

```
DevKey       CityId
101          1 
101          7
101          4 
```

该表定义了哪些开发商可以访问哪些城市，从而提供了开发商与城市之间的多对多关系的基础，无法直接建模。

您可能希望在此表中保留一些额外的信息，例如角色开始和结束日期，从而您可以结束开发人员访问某个城市的日期。

# .net - xsd 验证针对 xsd 生成的类级别验证

> ID：797285
> 
> 赞同：0
> 
> 时间：2009-04-28T10:46:50.707
> 
> 标签：.net, performance, validation, xsd.exe

在我的项目中，我有一个非常大的 XSD 文件，我用它来验证一些 XML 请求和对第 3 方的响应。

对于上述情况，我可以有 2 种方法

1) 创建 XML，然后针对给定 XSD 进行验证 2) 在 XSD gen 工具的帮助下从 XSD 创建类，添加额外的属性并使用它们进行验证。

第二种方式的验证将以这种方式工作，a) 使用 XML 序列化将 xml 请求/响应转换为对象 b) 使用在每个属性上设置的自定义属性验证对象，即将对象传递给将通过以下方式验证对象的方法遍历属性及其在每个属性上设置的自定义属性，如果对象验证并确定 xml 请求是否有效，这将返回一个布尔值？

现在关心哪种方法在性能和其他方面都好？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T11:02:03.667

如果您主要关心的是**性能**，您应该使用附加了 XSD 架构的[XmlReader](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)进行验证。这是一个例子：

```
// Store a reference to this object
// to reuse the compiled XSD schema
// for multiple parsing operations
XmlReaderSettings settings = new XmlReaderSettings();
settings.Schemas.Add("http://www.contoso.com/books", "books.xsd");
settings.ValidationType = ValidationType.Schema;

using (XmlReader reader = XmlReader.Create("books.xml", settings))
{
    while (reader.Read())
    {
        // Do parsing logic
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T10:59:26.980

我不确定将您的 XML 反序列化为一个对象是否会为您提供所需的验证。

举个例子，一个 XSD 定义了一个字符串字段，然后约束可以出现在该字段中的文本以匹配某个正则表达式。您生成的类会遵守该约束吗？有许多像这样的微妙问题可能会让您处于接受无效 xml 或拒绝其他有效 xml 的情况。

如果您的第 3 方给了您一个 XSD 来验证，那么您最好坚持这个合同定义，而不是寻找捷径。

但是，您可能会发现有一些常见的错误和错误可以快速过滤掉。这完全取决于您的信噪比，但您可以考虑创建一个简单的 XSD 或一个可以“快速失败”的程序测试，然后再花时间运行完整的 XSD。但是，只有当您遇到很多故障并且使用 XSD 进行完全验证的成本很高时，这才有意义。

此外，请确保您为您的方案使用最快的 XSD 验证。您没有说这是否是 .NET 环境，但如果是，那么您可以使用 XmlDocument、XmlValidatingReader 和 XElement 作为读取 XML 并根据方案验证它的 3 种方式。根据您从何处获取 XML、您之后使用它做什么等，您应该评估哪些机制可以为您提供最佳性能。

# sqlite - SQLite - 排序问题

> ID：797291
> 
> 赞同：0
> 
> 时间：2009-04-28T10:49:00.967
> 
> 标签：sqlite

我正在使用以下查询按字母顺序显示数据库行：

```
SELECT word_id FROM table1 ORDER BY word ASC 
```

但是我想从 table2 中获取值，其中我没有列“word”，并按 table1 中的列“word”对其进行排序。

我想要这样的东西：

```
SELECT word_id FROM table2 ORDER BY table1.word ASC 
```

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T10:53:13.797

您必须使用连接连接两个表：

```
SELECT t2.word_id
FROM table2 t2
   , table1 t1
WHERE t2.word_id = t1.word_id  -- this is the join
ORDER BY t1.word ASC 
```

# java - Java ThreadFactory 的问题

> ID：797295
> 
> 赞同：4
> 
> 时间：2009-04-28T10:50:12.867
> 
> 标签：java, threadpool

在我的应用程序中，我使用带有自定义 ThreadFactory 的线程池。

我的代码如下所示：

```
pool = Executors.newScheduledThreadPool(10, new TF());

class TF implements ThreadFactory {
    AtomicInteger count = new AtomicInteger(1);
    public synchronized Thread newThread(Runnable r) {
        Thread t = new Thread(r) ;
        t.setName("ThreadPool Thread[" + count.getAndIncrement() + "]");
        t.setUncaughtExceptionHandler(new UEHLogger());
        return t;
    }
} 
```

但是，在将各种 Runnables 提交到线程池之后，如果我转储当前线程（来自 IDE，Intellij IDEA），我会得到：

```
"ThreadPool Thread[1]" daemon prio=6 tid=0x0334e000 nid=0x1130 waiting on condition [0x0377f000..0x0377fc94]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x22fa7838> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1925)
    at java.util.concurrent.DelayQueue.take(DelayQueue.java:160)
    at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:583)
    at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:576)
    at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
    at java.lang.Thread.run(Thread.java:619)

"ThreadPool Thread[1]" daemon prio=6 tid=0x0333e400 nid=0x128 waiting on condition [0x0372f000..0x0372fd14]
   java.lang.Thread.State: TIMED_WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x22edb9e0> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1963)
    at java.util.concurrent.DelayQueue.take(DelayQueue.java:164)
    at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:583)
    at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:576)
    at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
    at java.lang.Thread.run(Thread.java:619) 
```

（以及线程 2-9 的类似堆栈跟踪）

所以基本上不是得到线程编号 1,2,3,4,5,6,7,8,9,10 我得到线程编号 1,1,2,3,4,5,6,7,8,9

一切似乎都运行良好，但显然令人不安。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-28T11:01:51.310

您没有无意中创建了两个线程池（或两个 ThreadFactories），对吗？

通过让每个线程输出其线程工厂的 id 以及它自己的 id 来确认这一点可能是一个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T11:05:14.250

嗯，无法重现 OpenJDK 和以下（高度简化的）测试代码的问题。下面给你什么？

```
class TF implements ThreadFactory {

    class UEHLogger implements Thread.UncaughtExceptionHandler
    {
    public void uncaughtException(Thread t, Throwable e) {
        System.out.println(t + " threw exception: " + e);
    }
    }

    AtomicInteger count = new AtomicInteger(1);
    public synchronized Thread newThread(Runnable r) {
        Thread t = new Thread(r) ;
        t.setName("ThreadPool Thread[" + count.getAndIncrement() + "]");
        t.setUncaughtExceptionHandler(new UEHLogger());
        return t;
    }

    public static void main(String[] a)
    {
    TF myTF = new TF();
    Thread[] threads = new Thread[10];
    for(int i = 0; i < threads.length; i++)
        threads[i] = myTF.newThread(new Runnable(){public void run(){}});
    for(Thread t : threads)
        System.out.println(t);
    }
} 
```

# architecture - Lattix 架构分析工具

> ID：797303
> 
> 赞同：4
> 
> 时间：2009-04-28T10:54:58.940
> 
> 标签：architecture, analysis, lattix

我通过研究代码来分析架构时遇到了[Lattix](http://www.lattix.com)。它支持 C/C++、Java、.Net 等。可以定义一定的规则来维护定义的架构。该工具可以在构建时标记任何违规行为。

有人用过这个或任何其他类似的工具吗？我在开发中看到了这个工具的一些好处，但不确定是否必须拥有这种工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-05-13T17:45:35.287

我们使用 Lattix 和 NDepends 来跟踪程序集的依赖关系。

这两种工具都支持通过依赖结构矩阵 (DSM) 来静态可视化程序集和类之间的依赖关系。DSM 使您能够展示应用程序的架构。例如，如果您使用分层，这应该在 DSM 中可见。循环依赖也将在 DSM 中可见。

[在OOPSLA05-dsm.pdf](http://sdg.csail.mit.edu/pubs/2005/oopsla05-dsm.pdf)中可以找到一个很好的实用介绍

NDepends 专门针对 .Net 并具有 Visual Studio 集成。Lattix 还能够为其他语言创建 DSM。两者都支持构建集成，它允许您在构建中创建规则以防止不正确的依赖关系。

只需尝试这两种工具，看看生成的 DSM 是否符合您的预期。检查循环依赖，看看是否有无效的依赖。例如，直接使用数据访问层而不是使用业务层的用户界面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-10-13T14:43:12.107

好吧，该工具看起来又大又好，并且在呈现时效果很好。
在那之后，所有那些从 C++ 进行逆向工程的工具（根据我对 Rational Rose、StarUML、Sparx（更好的一个）、Understand 的几个版本的经验）都遇到了麻烦。
我明白了原因——C++ 中的代码比 C# 更复杂且顺序更少，具有库、模块和 COM 的链接等等。
在我们的实际项目中，它的（基于理解数据库）逆向工程被立即完全冻结（我的意思是硬重置冻结）。
可能我们需要在 WS 或服务器上运行它。
可能是理解的错。
重置后，当它的矩阵在下面打开约 200 个模块时，它变得非常慢。好吧，我从来没有说过我们的项目开发得很好，对吧。我们希望对其进行研究以使其变得更好。我仍然相信从长远来看它会非常有帮助（如果您的公司同意为持续返工支付支票），但作为所有这些工具，最好从头开始并一直持续使用它。注意我们尝试将它与 bsc（Microsoft 数据库）一起使用，但它也失败了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-21T23:55:38.020

[NDepend](http://ndepend.com/)是一个非常完整的工具，用于分析 .Net 程序的软件架构。这种工具非常方便跟踪依赖关系和测量各种代码指标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-14T03:38:21.640

我使用 Lattix 主要分析 C++、.NET、Java 和 Fortran 代码。它有助于新应用程序的开发和改进现有软件的架构。该工具支持直接导入 .NET dll、Java 类或 jar 文件以及 SQL 连接。如果您正在查看 C++ 或 Fortran，则需要像 Klockwork、Understand 或 Clang 这样的解析器。可以为您的 Lattix 项目设置每次软件构建的持续更新 - 这将确保您拥有更新的 DSM 以持续监控您的软件架构。这可以让您知道您的软件如何随时间变化，以及是否有任何代码违反了您在设计开始时设置的规则，或者是否需要修改任何规则等。查看现有软件，该工具可以为您快速分解系统并确定存在周期性依赖关系的位置。有一些算法可以根据与其他子系统（例如类）的接近程度来划分系统，或者根据依赖模式对子系统进行分组。如果您希望改进现有软件的架构并使其模块化，这将很有帮助。

kb.lattix.com 上有大量信息 - 只需注册即可阅读文章。另外，我认为他们提供了一个评估版本，您可以探索它以查看该工具是否对您有用。

# visual-studio-2008 - Visual Studio 上下文

> ID：797304
> 
> 赞同：3
> 
> 时间：2009-04-28T10:55:10.517
> 
> 标签：visual-studio-2008, mylyn

在 Eclipse 中，我们使用 Mylyn 来概览我们的 Trac 票证。一个不错的功能是附加到票证的上下文。例如，它会记住您在该票处于活动状态时所从事的课程。如果您在一个月后打开那张票，那么 Mylyn 会打开所有课程。

Visual Studio 中有类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T11:01:27.397

当您关闭项目/解决方案时，Visual Studio 会将您打开的文件保存到项目设置中。下次打开它时，这些将默认打开。VS 不包含您描述的确切行为，但您可以搜索可以为您执行此操作的插件，或者自己编写。

# css - css ":focus" 伪类和选择器

> ID：797309
> 
> 赞同：1
> 
> 时间：2009-04-28T10:59:07.947
> 
> 标签：css, css-selectors, pseudo-class

我一直在努力做到这一点......基本上我有以下 HTML 设置：

```
<div class="box10">
   <span class="label01">Name:</span>
   <input class="tboxes" type="textbox" />
</div> 
```

“span.label01”是一个内联元素，出现在文本框“input.tboxes”的左侧。当文本框获得焦点时，我正在尝试将一些样式附加到“span.label01”和“div.box10”。

我尝试了以下 CSS 代码：

```
input.tboxes:focus span.label01 {
   color:#FF9900;
   ...
} 
```

但什么也没发生。我知道这是一个 CSS 选择器问题，但我似乎无法正确处理。我什至尝试过相邻的兄弟选择器，但什么也没有。有人能帮我一下吗？蒂亚！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-08-19T13:33:18.593

这完全可以通过使用同级选择器来实现。

```
input.tboxes:focus + span.label01 {
   color:#FF9900;
   ...
} 
```

每当输入聚焦时，此规则将应用于 label01。

*但是*，这仅在跨度位于输入右侧时才有效，因此您必须切换元素的位置。div 上的快速“位置：相对”和跨度上的“浮动：左”会将它们移回原位。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-28T11:08:17.240

不——你不能用 CSS 选择器做到这一点。引用自[维基百科](http://en.wikipedia.org/wiki/Cascading_Style_Sheets#Limitations)：

> **选择器无法上升**
> 
> CSS 无法选择满足特定条件的元素的父级或祖先。更高级的选择器方案（例如 XPath）将支持更复杂的样式表。然而，CSS 工作组拒绝 > 父选择器提案的主要原因与浏览器性能和增量渲染问题有关。

但是，您可以使用一些简单的 JavaScript 来做到这一点：

```
// with jQuery:
$('input.tboxes').focus(function() {
    $(this).parent().find('span.label01').addClass('active');
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-28T11:04:03.223

您的选择器目前正在寻找输入中的跨度。据我所知，在 CSS 选择器支持的当前状态下，您尝试做的事情并不可靠。

我很想用一些 jQuery 来做到这一点，如下所示：

```
$("input.tboxes").focus(function() {
    $(this)
    .parent("div:first")
        .addClass("focussed")
        .find("span")
            .addClass("focussed");
}); 
```

如果您随后为 .label01.focussed 和 .box10.focussed 设置样式，那应该可以满足您的要求。

# visual-studio - 让 Visual Studio 忽略解决方案中的源代码管理绑定

> ID：797311
> 
> 赞同：5
> 
> 时间：2009-04-28T10:59:33.033
> 
> 标签：visual-studio, visual-studio-2005

有没有办法告诉 Visual Studio 2005 在打开解决方案时忽略源代码控制绑定？我有时需要加载一个我无权访问源代码控制服务器的解决方案，但 Visual Studio 仍然坚持尝试连接，这意味着我必须为解决方案中的每个项目单击“在断开连接模式下暂时脱机工作” （其中大约有 20 个）加载时。出于某种原因，它还尝试在我告诉它离线工作后立即检查每个项目，所以我也必须点击该对话框。

由于我永远不需要在此解决方案中编辑任何内容，有什么方法可以打开它并让 Visual Studio 忽略它包含源代码控制绑定的事实？

编辑：理想情况下，我想要一种无需更改项目/解决方案文件的方法。它们更改相当频繁，因此每次有新版本时我都必须重做任何更改（否则我只需解除绑定一次就不会出现问题）。

感谢您到目前为止的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T11:18:59.943

源代码管理绑定存储在 Visual Studio 解决方案文件 (.sln) 中。例如，对于 TFS，它包含 TFS 信息的全局部分以及添加到 TFS 的解决方案项目。您可以编辑解决方案文件以手动删除这些绑定。我建议先复制解决方案文件。但是，我建议通过 Visual Studio 删除绑定。打开您的解决方案并完成离线场景。然后转到文件/源代码控制/更改源代码控制 (VS 2008) 以调出显示解决方案中的源代码控制绑定的 UI。在那里您可以管理绑定，包括解除绑定。一旦解除绑定，下次打开解决方案时，VS 应该不需要访问源代码管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-11T17:49:04.490

我一直在寻找一种方法来禁用 SourceSafe 2005 和 Visual Studio 2008 之间的集成。我们被迫在企业环境中使用 SourceSafe。如果您像对待婴儿一样对待 SourceSafe，它本身就很好。一旦你尝试做任何接近有用的事情，它就会开始崩溃。上帝禁止你尝试使用与 Visual Studio 的集成。由于我不希望“移除绑定”，以免让团队中的其他开发人员感到困惑，因此我需要能够告诉 Studio 忽略解决方案和项目绑定并继续以愉快的方式进行。

我遵循以下帖子中建议的注册表黑客 [从 Visual Studio 6 中删除 SourceSafe 集成](https://stackoverflow.com/questions/471056/removing-sourcesafe-integration-from-visual-studio-6)

工作室做了我想要的......有点。它删除了 SourceSafe 集成。但是，当我打开源代码控制解决方案时，它询问我是否要删除绑定。
“项目将被视为不受源代码控制”

不，我不希望您从文件中删除绑定，我希望您忽略它们。每次打开解决方案/项目文件时都会弹出此对话框，并且无法绕过它。

我目前的解决方案似乎已经奏效......现在。

文件->源代码管理->更改源代码管理...->断开连接

我希望这可以帮助其他需要使用 SourceSafe 但无法从文件本身中删除绑定的人。为什么，Microsoft，为什么要将绑定放在文件本身中？/咆哮

# drupal - Drupal 6 视图：约束不是“主”节点的字段

> ID：797313
> 
> 赞同：2
> 
> 时间：2009-04-28T11:00:36.167
> 
> 标签：drupal, drupal-6, drupal-views

我正在制作一个自定义节点列表及其评论。我希望既能限制节点的数量（简单：在这种情况下，每页的项目数指的是节点），但也能限制每个节点显示的评论数量（例如最近的 5 个）：

*   *一号节点*
    *   评论 1-3
    *   评论 1-2
    *   评论 1-1
*   *节点二*
    *   评论 2-7
    *   评论 2-6
    *   评论 2-5
    *   评论 2-4
    *   评论 2-3
*   *三号节点*

所以*第一个节点*有三个评论。美好的。第三*个节点*没有评论。也很好。但是第二个*节点*有七个评论；但我只想显示最近的五个。

有没有办法在视图中做到这一点？例如，如果可以将这样的视图包含在另一个视图中，那么制作一个包含注释和提供节点 ID 的参数的视图就很容易了。

我是 Drupal 的新手，如果这是一个明显的问题，我深表歉意。我已经用谷歌搜索了它，但是当你刚开始时很难知道你是否在谷歌搜索正确的东西。

任何建议表示赞赏！

抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-31T13:20:54.413

根据这里的意见开发者[http://drupal.org/node/353872](http://drupal.org/node/353872)

> 仅在一个查询中几乎不可能完成，因此 Views 无法支持。

但是，您可能会对这些模块感兴趣： [Views Group By](http://drupal.org/project/views_groupby)或[Views Attach](http://drupal.org/project/views_attach)，并且可能更接近解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T14:44:11.587

我想不出一个简单的方法来单独在视图中做到这一点。您可能需要结合使用视图和一些自定义代码来获得最终结果：/

# asp.net - jQuery插件未加载-脚本失败

> ID：797317
> 
> 赞同：3
> 
> 时间：2009-04-28T11:01:49.127
> 
> 标签：asp.net, jquery, overlay, colorbox

我已经用几个不同的插件尝试过这个，所以我确定不是它们。我也有一个在我的个人机器上运行，它工作得很好。

我正在加载 jQuery，然后再加载插件。然后下一行代码通过以下方式调用插件：

```
$("a[rel]").colorbox(...) 
```

或者

```
$("a[rel]").overlay(...) 
```

我得到“对象不支持属性或方法”。它不在 html 对象上，我将其缩小到对 jQuery 插件的实际函数调用—— $("a[rel]") 选择器单独工作正常。就好像插件从未真正加载过。

你们有人见过吗？我在 XP 上运行，所以 IIS6 (5?) 最新的 jQuery 1.3.2 虽然我尝试了 1.3.1 和 1.2.6。

非常感激！！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-28T11:16:32.727

我昨天遇到了同样的问题，那是因为我有两次这条线：

```
<script src="jqueryScripts/jquery-1.3.1.js" type="text/javascript"></script> 
```

它在一个 ASP 项目中，我包含了另一个 .asp 页面，该页面也有参考，所以我花了 2 个小时才弄清楚..

也许你有同样的问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T11:12:50.380

您是否尝试在浏览器中启用 JavaScript 调试，也许您会发现一些错误，这就是浏览器不加载插件文件的原因。您还可以尝试使用 jQuery 的 getScript 方法动态加载插件，并在完成事件时运行您的函数。

```
$.getScript("http://dev.jquery.com/view/trunk/plugins/color/jquery.color.js", function(){
  $("#go").click(function(){
    $(".block").animate( { backgroundColor: 'pink' }, 1000)
      .animate( { backgroundColor: 'blue' }, 1000);
  });
}); 
```

# c - 如何在 C / Objective-C 中将字符串文字拆分为多行？

> ID：797318
> 
> 赞同：350
> 
> 时间：2009-04-28T11:01:50.687
> 
> 标签：c, objective-c, string-literals

我有一个很长的 sqlite 查询：

```
const char *sql_query = "SELECT statuses.word_id FROM lang1_words, statuses WHERE statuses.word_id = lang1_words.word_id ORDER BY lang1_words.word ASC"; 
```

如何将它分成多行以使其更易于阅读？如果我执行以下操作：

```
const char *sql_query = "SELECT word_id
                        FROM table1, table2
                        WHERE table2.word_id = table1.word_id
                        ORDER BY table1.word ASC"; 
```

我收到一个错误。

有没有办法在多行中编写查询？

* * *

## 回答 #1

> 赞同：609
> 
> 时间：2009-04-28T11:10:34.770

有两种方法可以将字符串拆分为多行：

1.  每个字符串在其自己的行上。仅适用于字符串：

    *   普通C：

        ```
        char *my_string = "Line 1 "
                          "Line 2"; 
        ```

    *   目标-C：

        ```
        NSString *my_string = @"Line1 "
                               "Line2";    // the second @ is optional 
        ```

2.  使用`\`- 可用于任何表达式：

    *   普通C：

        ```
        char *my_string = "Line 1 \
                           Line 2"; 
        ```

    *   目标-C：

        ```
        NSString *my_string = @"Line1 \
                                Line2"; 
        ```

* * *

第一种方法更好，因为没有很多空格。然而，对于 SQL 查询，两者都是可能的。

注意：使用 a `#define`，您必须添加一个额外的`\`来连接两个字符串：

普通C：

```
#define kMyString "Line 1"\
                  "Line 2" 
```

* * *

## 回答 #2

> 赞同：123
> 
> 时间：2013-08-01T14:30:19.500

你可以用预处理器做一个技巧。
它有可能会折叠空白，并且可能会使阅读代码的人感到困惑。
但是，它的好处是您不需要在其中转义引号字符。

```
#define QUOTE(...) #__VA_ARGS__
const char *sql_query = QUOTE(
    SELECT word_id
    FROM table1, table2
    WHERE table2.word_id = table1.word_id
    ORDER BY table1.word ASC
); 
```

预处理器把它变成：

```
const char *sql_query = "SELECT word_id FROM table1, table2 WHERE table2.word_id = table1.word_id ORDER BY table1.word ASC"; 
```

当我编写一些包含 JSON 的大型文字字符串的单元测试时，我使用了这个技巧。这意味着我不必转义每个引号字符 \"。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2010-06-15T23:08:47.010

您也可以进入 XCode -> Preferences，选择 Indentation 选项卡，然后打开 Line Wrapping。

这样，您就不必输入任何额外的内容，并且它适用于您已经编写的内容。:-)

不过，一件烦人的事是……

```
if (you're long on indentation
    && short on windows) {
            then your code will
                end up squished
                     against th
                         e side
                             li
                              k
                              e

                              t
                              h
                              i
                              s
} 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2012-06-27T02:14:09.610

我一直有这个问题，所以我做了一个小工具来将文本转换为转义的多行 Objective-C 字符串：

[http://multilineobjc.herokuapp.com/](http://multilineobjc.herokuapp.com/)

希望这可以节省您一些时间。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2014-04-30T12:05:28.080

扩展Objective-C的[报价理念：](https://stackoverflow.com/a/17996915/439096)

```
#define NSStringMultiline(...) [[NSString alloc] initWithCString:#__VA_ARGS__ encoding:NSUTF8StringEncoding]

NSString *sql = NSStringMultiline(
    SELECT name, age
    FROM users
    WHERE loggedin = true
); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-06-02T20:49:24.053

另一种解决方案，将您的 .m 文件更改为 .mm ，使其变为 Objective-C++ 并使用 C++ 原始文字，如下所示：

```
const char *sql_query = R"(SELECT word_id
                           FROM table1, table2
                           WHERE table2.word_id = table1.word_id
                           ORDER BY table1.word ASC)"; 
```

原始文字忽略所有内容，直到终止序列，在默认情况下是括号引号。

如果括号-引号序列必须出现在字符串中的某个位置，您也可以轻松地指定自定义分隔符，如下所示：

```
const char *sql_query = R"T3RM!N8(
                                  SELECT word_id
                                  FROM table1, table2
                                  WHERE table2.word_id = table1.word_id
                                  ORDER BY table1.word ASC
                         )T3RM!N8"; 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-02-07T14:56:24.930

**GCC 添加 C++ 多行原始字符串文字作为 C 扩展**

C++11 具有原始字符串文字，如下所述：[https ://stackoverflow.com/a/44337236/895245](https://stackoverflow.com/a/44337236/895245)

但是，GCC 也将它们添加为 C 扩展，您只需使用`-std=gnu99`而不是`-std=c99`. 例如：

主程序

```
#include <assert.h>
#include <string.h>

int main(void) {
    assert(strcmp(R"(
a
b
)", "\na\nb\n") == 0);
} 
```

编译并运行：

```
gcc -o main -pedantic -std=gnu99 -Wall -Wextra main.c
./main 
```

例如，这可以用于将多行内联汇编插入 C 代码：[如何在 GCC C++ 中编写多行内联汇编代码？](https://stackoverflow.com/questions/3666013/how-to-write-multiline-inline-assembly-code-in-gcc-c/54575948#54575948)

现在您只需要退后一步，等待它在 C20XY 上标准化。

C++ 被问到：[C++ 多行字符串文字](https://stackoverflow.com/questions/1135841/c-multiline-string-literal)

在 Ubuntu 16.04、GCC 6.4.0、binutils 2.26.1 上测试。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2010-06-09T15:44:22.633

你也可以这样做：

```
NSString * query = @"SELECT * FROM foo "
                   @"WHERE "
                     @"bar = 42 "
                     @"AND baz = datetime() "
                   @"ORDER BY fizbit ASC"; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-02-06T16:34:21.300

另一种方法是使用任何工具来删除换行符。使用任何文本编辑器编写字符串，完成后，将文本粘贴[到此处](https://www.textfixer.com/tools/remove-line-breaks.php)并在 xcode 中再次复制。

# linq - 使用 Linq to SQL 的默认排序列

> ID：797326
> 
> 赞同：0
> 
> 时间：2009-04-28T11:03:07.267
> 
> 标签：linq, linq-to-sql

我正在为自己构建一个简单的 Linq to SQL 存储库模式。

我想知道的是，是否可以设置默认排序列，这样我就不必调用 orderby。从我读过的内容来看，我认为不是，如果是这种情况，建议解决这个问题。

最好的主意是在我的模型的部分类上使用属性吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T11:11:17.560

默认顺序是您从中提取的表上的聚集索引。

你想对什么进行排序（不排序）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T11:51:37.493

如果您需要的不是按主键排序的东西，您可以考虑为表提供一个选择语句，而不是使用运行时生成的语句。查看设计器中表上的属性——您应该能够覆盖运行时生成的选择、删除和更新语句。不过，我个人并不推荐这个，因为我不确定它会如何与其他订单交互。我认为其意图更多是允许您根据需要使用存储过程。

另一种选择是创建一个表值函数或存储过程，以您想要的方式进行排序，并具有与表相同的模式。如果在设计器中将它拖到表上，您将在数据上下文中获得一个强类型方法，您可以使用该方法根据函数/过程的定义而不是标准选择来获取这些实体。就我个人而言，我认为这会减少维护方面的麻烦，因为它使它更加可见，但是您必须记住使用该方法而不是该实体的 Table 属性。

# php - mysql 计入 PHP 变量

> ID：797335
> 
> 赞同：6
> 
> 时间：2009-04-28T11:04:46.297
> 
> 标签：php, mysql, count

假设我们有以下查询：

```
SELECT DISTINCT COUNT(`users_id`) FROM `users_table`; 
```

此查询将返回表中的用户数。我需要将此值传递给 PHP 变量。我正在使用这个：

```
$sql_result = mysql_query($the_query_from_above) or die(mysql_error());

if($sql_result)
{
    $nr_of_users = mysql_fetch_array($sql_result);
}
else
{
    $nr_of_users = 0;
} 
```

请在您认为有必要的地方更正我的代码。

这是最好的方法。你建议如何做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-04-28T11:08:16.257

像这样：

```
// Changed the query - there's no need for DISTINCT
// and aliased the count as "num"
$data = mysql_query('SELECT COUNT(`users_id`) AS num FROM `users_table`') or die(mysql_error());

// A COUNT query will always return 1 row
// (unless it fails, in which case we die above)
// Use fetch_assoc for a nice associative array - much easier to use
$row = mysql_fetch_assoc($data);

// Get the number of uses from the array
// 'num' is what we aliased the column as above
$numUsers = $row['num']; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-28T11:26:46.743

此外，使用 mysqli 的替代方法，无论如何你都应该使用它来进行参数插值：

```
$statement = $connection->prepare($the_query_from_above);
$statement->execute();
$statement->bind_result($nr_of_users);
$statement->fetch(); 
```

# iphone - 如何引用自动释放池中的对象？

> ID：797350
> 
> 赞同：1
> 
> 时间：2009-04-28T11:10:12.150
> 
> 标签：iphone, cocoa-touch, memory-management, autorelease

我想知道自动释放池是否持有对其持有的对象的强引用或弱引用。我猜他们很弱。当我将对象添加到自动释放池时，它不会立即释放，而是会在池耗尽时释放，对吗？所以引用应该是弱的，即当我将对象添加到自动释放池时引用计数（或保留计数）保持不变？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-28T12:22:55.813

在垃圾回收内存管理环境（弱指针即使被引用也会自动释放和清除）的上下文中，谈论强引用和弱引用是有道理的。启用 GC 后，所有的 retain/release/autorelease 调用基本上都是什么都不做的操作（尽管 NSAutoreleasePool -drain 方法会触发垃圾回收）。

现在，由于您已将此问题标记为与 iPhone 相关，并且 iPhone 上没有垃圾收集，我假设您指的是常规引用计数，强表示增加引用对象的保留计数，弱表示您意味着只存储指针值。

该`autorelease`方法本质上是将对象的所有权从调用代码移动到当前的自动释放池中，您可以认为调用代码调用释放和池调用保留。

所以引用实际上很强大，但是您的代码失去了所有权和发布责任。`release`释放/耗尽自动释放池时将调用对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T12:12:03.217

自动释放池的全部意义在于它是一个延迟释放。例如，您可以对将在方法中返回的本地对象调用 autorelease，以便即使在方法返回时丢失对该对象的引用，它也会被释放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T11:28:41.060

是的。保留计数保持不变，您可以检查一下：

```
id obj = [[NSObject alloc]init];
    NSLog([NSString stringWithFormat: @"%d", [obj retainCount]]);
    [obj autorelease];
    NSLog([NSString stringWithFormat: @"%d", [obj retainCount]]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-05T10:43:06.757

保留计数保持不变，基本上在对象上触发自动释放消息使开发人员无需拥有所有权和释放责任。

这就是自动释放池的工作原理——每次创建自动释放池的实例时，它都会添加到堆栈顶部，因此系统将使用最新的自动释放池。并且每当您在自动释放池中添加任何对象时，它都会添加到堆栈中的顶部自动释放池中。自动释放池基本上是一个数组，其中添加了自动释放的对象。当特定的自动释放池被释放（/耗尽）时，自动释放池中添加的每个对象都会被释放。在系统开始处理任何事件之前首先创建一个自动释放池，并且它会一直保留在那里直到当前事件循环的执行结束。当系统看到当前事件循环完成时，它会获取与该事件循环关联的最顶层自动释放池并释放它。

# c# - 如何将一行值从二维数组复制到一维数组中？

> ID：797354
> 
> 赞同：17
> 
> 时间：2009-04-28T11:11:05.890
> 
> 标签：c#, .net, arrays, multidimensional-array

我们有以下对象

```
int [,] oGridCells; 
```

仅与固定的第一个索引一起使用

```
int iIndex = 5;
for (int iLoop = 0; iLoop < iUpperBound; iLoop++)
{
  //Get the value from the 2D array
  iValue = oGridCells[iIndex, iLoop];

  //Do something with iValue
} 
```

.NET 中有没有办法将固定第一个索引处的值转换为一维数组（除了循环值）？

如果数组只循环一次，我怀疑它会加快代码速度（而且它可能会变慢）。但是如果数组被大量操作，那么单维数组将比多维数组更有效。

我提出这个问题的主要原因是看看它是否可以完成以及如何完成，而不是将其用于生产代码。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-04-28T11:17:56.920

以下代码演示了将 16 个字节（4 个整数）从二维数组复制到一维数组。

```
int[,] oGridCells = {{1, 2}, {3, 4}};
int[] oResult = new int[4];
System.Buffer.BlockCopy(oGridCells, 0, oResult, 0, 16); 
```

您还可以通过提供正确的字节偏移量来选择性地仅复制数组中的 1 行。此示例复制 3 行 2-D 数组的中间行。

```
int[,] oGridCells = {{1, 2}, {3, 4}, {5, 6}};
int[] oResult = new int[2];
System.Buffer.BlockCopy(oGridCells, 8, oResult, 0, 8); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T11:16:04.570

编辑：

我意识到有办法！诚然，这可能不值得。使用[不安全的代码](https://docs.microsoft.com/dotnet/csharp/language-reference/language-specification/unsafe-code)。完整的例子，显示两种方式，下面是不安全的：

```
public class MultiSingleUnsafe
{
    public static unsafe void Main(String[] a)
    {
    int rowCount = 6;
    int iUpperBound = 10;
    int [,] oGridCells = new int[rowCount, iUpperBound];

    int iIndex = rowCount - 2; // Pick a row.

    for(int i = 0; i < iUpperBound; i++)
    {
        oGridCells[iIndex, i] = i;
    }

    for (int iLoop = 0; iLoop < iUpperBound; iLoop++)
    {
        //Get the value from the 2D array
        int iValue = oGridCells[iIndex, iLoop];
        Console.WriteLine("Multi-dim array access iValue: " + iValue);
        //Do something with iValue
    }

    fixed(int *lastRow = &(oGridCells[iIndex,0]))
    {   
        for (int iLoop = 0; iLoop < iUpperBound; iLoop++)
        {
        int iValue = lastRow[iLoop];
        Console.WriteLine("Pointer access iValue: " + iValue);
        }
    }
    }
} 
```

我不知道在 C# 中将多维数组转换为一维数组。当然，您可以创建一个新的一维数组并复制到其中。但我认为即使您多次循环这些值，这也不会带来性能优势。正如达伦所说，无论如何，内部都是指针算术。如果您想确定，请对其进行概要分析。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T11:14:31.717

如果可能的话，我会感到惊讶：我敢打赌`oGridCells[iIndex, iLoop]`，它只是 的一种简写（在内部，在 MSIL 中）`oGridCells[iIndex * iLoop]`，而多维数组是它的语法糖。

要回答您的问题：不。您将不得不循环这些值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T11:20:25.213

您无法获得对每个数组的引用。但是，您可以使用[锯齿状数组](http://msdn.microsoft.com/en-us/library/2s05feca.aspx)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-28T11:24:04.317

“但如果数组被大量操作，那么单维数组将比多维数组更有效。”

去年夏天，我对此进行了一些分析，并惊讶地发现 2D 和 1D 阵列之间的性能没有显着差异。

我没有测试锯齿状阵列的性能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-18T03:50:22.757

你可以试试这个：

```
 int[,] twoD = new int[2,2];
 twoD[0, 0] = 1;
 twoD[0, 1] = 2;
 twoD[1, 0] = 3;
 twoD[1, 1] = 4;

 int[] result = twoD.Cast<int>().Select(c => c).ToArray(); 
```

结果将是一个包含数据的整数数组：

```
1, 2, 3, 4 
```

# php - 如何从 MYSQL/PHP 中的数据中提取匹配的短语？

> ID：797359
> 
> 赞同：0
> 
> 时间：2009-04-28T11:13:00.160
> 
> 标签：php, mysql, search

我正在尝试在我的网站中实现搜索功能。我有以下类型的数据。

```
Title                Descr  
-----                ----- 
World News           World news, news from across the world, all world news events covered
World Sports         World sports news, for all of sports people, sports is a famous world 
```

现在我想如果用户搜索“世界新闻”，那么结果将显示如下，

```
World News (title)
... all world news events covered ... (descr) 
```

基本上我想随机显示一些短语。就像当用户搜索“世界新闻”时，有时他会得到类似上面的结果，有时会得到下面的结果，

```
World News (title)
World news, news from across the world, ... (descr) 
```

请告诉我我们如何使用 mysql 查询获得这种功能，或者如果不能直接通过 mysql 查询实现，那么如何使用 PHP。

谷歌有时会做同样的事情，谷歌从中间显示短语，有时它显示起始文本。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-07T23:14:38.650

不确定是否有 MySQL 方法可以实现您的目标。我会从数据库中提取字段，然后使用 PHP 的 explode() 函数来随机化一个短语：

```
$desc_field_result = "World news, news from across the world, all world news events covered"; // The "Desc" field from your MySQL Query

$desc_field_array = explode(",",$desc_field_result);

$selected_desc = $desc_field_array[rand(0,sizeof($desc_field_array)-1)];

echo $selected_desc; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T23:31:08.190

谷歌不只是返回一些随机的句子。它返回一个（或两个）包含您搜索的单词的片段。MySQL 无法为您做到这一点。您需要在 PHP 中手动执行此操作（在返回的数据库行中手动搜索关键字并显示相关片段）或使用可以为您执行此操作的搜索引擎（例如 Xapian、Sphinx 或 Apache Lucene）。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2009-04-28T11:29:33.820

如果您的 mysql 表中存储了标题和描述，请尝试以下操作：

```
SELECT descr FROM yourTable WHERE title='World News' ORDER BY RAND() 
```

条件将`ORDER BY RAND()`随机从其中`World news`匹配标题条件的行之一中选择

# ms-word - 以编程方式获取 Linux 上 Microsoft Word 文档中的页数

> ID：797362
> 
> 赞同：2
> 
> 时间：2009-04-28T11:13:16.370
> 
> 标签：ms-word

我需要从word文档中获取页数。我测试了许多库和脚本（apache poi、perl 脚本、一些适用于 linux 的应用程序等等），唯一可行的解​​决方案是使用 Wine 安装 Microsoft Office 并使用 perl 访问 OLE。我已经设法做到了，但由于许可问题，我似乎无法在服务器上使用它......

apachepoi 和其他提供对 word 文档信息的访问的解决方案的问题与某些文档的不完整性有关。文档摘要中的 pageCount 属性有时会丢失（通常将 odt 文档保存为 doc 和旧文档）。

有没有办法在服务器上不安装 Microsoft Office 的情况下实际计算页面数（不仅从摘要中获取信息）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T11:30:41.413

我本来想说[wvSummary](http://wvware.sourceforge.net/)，但我认为这使用了您所指的元数据。我不确定是否有一种方法可以在不实际布置文档的情况下获取页数。因此，您可能不得不求助于使用 API 来驱动真正的 Office 兼容应用程序，如 OpenOffice 或 AbiWord。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-12-09T23:01:02.010

如果您信任文档摘要，而不是使用 wvSummary，您可以打开文件并执行正则表达式搜索“nofpages(\d+)”。Groups[1] 将包含页数。

由于 Word 总是在保存摘要时保存摘要，如果您知道文档上次使用 Word 保存，我认为这是非常安全的，根据我的经验，这是 99% 的时间。

# java - Java HashMap 在 2 个键上建立索引

> ID：797367
> 
> 赞同：4
> 
> 时间：2009-04-28T11:14:39.877
> 
> 标签：java, data-structures, map, hashmap

我想在 java 中为有偏好的用户创建一个 HashMap。这在数据库中很容易做到，但不幸的是我不能使用数据库。我需要的是一种在 HashMap 中按名称查找用户的方法，并找到所有具有特定兴趣的用户（例如高尔夫）。如果我删除一个用户，那么他们的所有兴趣都应该被删除。

有人知道制作这种数据结构的好方法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-28T11:20:17.040

我建议您创建自己的数据结构来保存信息。在该类中，您可以有两个存储相关信息的 HashMap。然后编写自己的方法来插入和删除用户。

这样您就可以控制插入/删除操作，同时能够分别查询每个属性。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-28T20:18:17.527

你知道你真的需要第二个索引吗？您可能会发现搜索每个用户都足够快，除非您拥有数百万用户。

以下示例需要 51 微秒来扫描 1,000 个用户。扫描 10,000 个用户需要 557 微秒。

在您知道它是否会有所作为之前，我不建议优化集合。

```
import java.util.*;
import java.io.*;

public class TestExecutor {
    public static void main(String[] args) throws IOException {
        Map<String, User> users = new LinkedHashMap<String, User>();
        generateUsers(users, 1000, 0.1);

        // warmup.
        int count = 10000;
        for(int i=0;i< count;i++)
            getAllUsersWithInterest(users, Interest.Golf);

        long start = System.nanoTime();
        for(int i=0;i< count;i++)
            getAllUsersWithInterest(users, Interest.Golf);
        long time = System.nanoTime() - start;
        System.out.printf("Average search time %,d micro-seconds%n", time/ count/1000);
    }

    private static Set<User> getAllUsersWithInterest(Map<String, User> users, Interest golf) {
        Set<User> ret = new LinkedHashSet<User>();
        for (User user : users.values()) {
            if (user.interests.contains(golf))
                ret.add(user);
        }
        return ret;
    }

    private static void generateUsers(Map<String, User> users, int count, double interestedInGolf) {
        Random rand = new Random();
        while(users.size() < count) {
            String name = Long.toString(rand.nextLong(), 36);
            EnumSet<Interest> interests = rand.nextFloat() < interestedInGolf
                    ? EnumSet.of(Interest.Golf) : EnumSet.noneOf(Interest.class);
            users.put(name, new User(name, interests));
        }
    }

    static class User {
        private final String name;
        private final Set<Interest> interests;

        User(String name, Set<Interest> interests) {
            this.name = name;
            this.interests = interests;
        }
    }

    enum Interest {
        Golf
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-28T11:23:23.787

最简单的解决方案是使用 Commons Collection [MultiKeyMap](http://commons.apache.org/collections/api-release/org/apache/commons/collections/map/MultiKeyMap.html)，即使它缺少泛型。

...检查这个线程太[genericized-commons-collection](https://stackoverflow.com/questions/296133/genericized-commons-collection)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-28T13:00:45.720

似乎您可以使用双向地图之类的东西来实现这样的东西。查看[http://google-collections.googlecode.com/svn/trunk/javadoc/index.html?com/google/common/collect/BiMap.html](http://google-collections.googlecode.com/svn/trunk/javadoc/index.html?com/google/common/collect/BiMap.html)获取一些文档。

尽管它并不能准确地为您提供您在问题中所需要的东西，但它已经完成了一半。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-28T12:27:54.520

只需将用户放在一个 ArrayList 中，然后遍历它，直到找到所需的用户。给每个用户一组兴趣。一旦你获得足够多的用户而需要很长时间，就对它们进行排序。

一旦时间太长，请看一下利益分配。如果您有少量不同的，请将它们存储在位图中。如果您的兴趣组合有限，请将它们单独存储并提供给用户其中一个。

开始简单，计算机速度很快。但是隐藏实现，所以你可以改变它。

[嗯，对此投反对票]。看看这个问题：在这段代码像数据库一样慢之前，你需要很多用户。（在目前的硬件上，至少有几十万）

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-04-28T14:41:00.333

这可能对您的需求来说有点过头了，但我不知道您的需求有多复杂和速度敏感，所以我会把它扔在那里......

您是否考虑过查看内存（甚至是基于本地磁盘，如 SQLite）的数据库来处理您的数据。这样做可以让您以一种可以在搜索/索引数据方面提供更多功能的方式存储数据，而无需编写自己的代码的许多成本。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-04-28T11:44:14.563

我将实施以下

包含用户作为键和值的 HashMap 可以是包含用户首选项的任何对象。例如，用户偏好将包括感兴趣的列表。

以及一个附加的 HashMap，以兴趣为键和对此感兴趣的用户列表。

当你删除一个用户时，你可以获得他所有的兴趣，并从兴趣HashMap列表中删除用户名。当兴趣 HashMap 列表为空时，您可以从 HashMap 中删除兴趣。

当 2 个或更多用户有相同的兴趣时，请小心。仅删除一个用户时，您不能删除兴趣。

不利的一面是，您将拥有多余的信息。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-09-23T07:57:25.227

您可以使用 2 个 HashMap。但只搜索低谷偏好可能会很复杂。

```
HashMap <String,Hashmap> users;

//save data
//create new user
HashMap <String,String> prefs;
//save prefs
prefs.put(pref1,value1);
prefs.put(pref2,value2);
//save user
users.put(user1,prefs);

//get data
String x = users.get(user1).get(pref1); 
```

也许你不再需要这个解决方案了，但是很多人仍然有同样的问题。

# c# - 当我尝试从另一个系统的 iis 访问文件时出现此错误

> ID：797370
> 
> 赞同：0
> 
> 时间：2009-04-28T11:15:15.850
> 
> 标签：c#, iis

您无权使用您提供的凭据查看此目录或页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-12-08T14:35:52.147

我遇到了同样的问题，但既没有授予网络服务访问权限，也没有授予 IUSR 帮助我。我试图在 Windows Server 2008 上的 IIS7 上部署带有表单身份验证的 ASP.Net 4.0 Web 应用程序。解决问题的方法是为处理程序提供读取和脚本权限，这可以通过打开处理程序映射然后选择“编辑功能”来完成权限”从右侧菜单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T11:31:48.837

看起来您正试图通过 IIS 通过网络访问文件，但要做到这一点，您还需要在网络共享中添加 IUSER_ 、 IWAM_ 或 ASPNET 用户权限。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-04-28T11:20:18.927

可能是因为您没有权限...如果这是意外情况，请提供更多信息，我们可以提供帮助。

# c# - 对 AJAX 请求使用带有百分比的进度条

> ID：797374
> 
> 赞同：0
> 
> 时间：2009-04-28T11:16:06.893
> 
> 标签：c#, ajax, asp.net-ajax

如何为页面上的每个 AJAX 请求使用百分比进度条？我已经问过如何[在这里](https://stackoverflow.com/questions/796792/ajax-progress-bar-dispaying-loading-progress-percentage-for-page-load)加载带有一个进度条的整个页面 但是，现在我想知道是否可以为同一页面上的每个 AJAX 请求使用单独的进度条？有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T12:18:46.430

试试下面这些演示

*   [西风](http://www.west-wind.com/wconnect/webcontrols/progressBar.wcsx)
*   [马特·伯塞斯](http://mattberseth2.com/demo/Default.aspx?Name=ASP.NET+AJAX+Progress+Bar+Control&Filter=All)
*   [歌唱鳗鱼](http://www.singingeels.com/Articles/RealTime_Progress_Bar_With_ASPNET_AJAX.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T11:26:36.103

又不可能了。根据 W3C，您可以管理 5 种状态。

*   0 未初始化就绪状态
*   1 开放就绪状态
*   2 发送就绪状态
*   3 接收就绪状态
*   4 加载就绪状态

此外，Web 服务器每 1 个请求仅响应 1 次。所以你不能从网络服务器发送进度状态。但是，您可以通过发送另一个请求（如 ajax-upload）来获取状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T12:30:05.623

**具有百分比**的进度条在很大程度上取决于您的服务器环境。%age 不会作为正常 HTTP 请求过程的一部分返回，因此您需要同时轮询服务器以获取有关 %age 传输过程的响应。

这就是上面的一些示例所做的。其他的似乎只是为了欺骗 %age？

显然，这需要一个能够传递此信息的服务器。您还通过使用连续请求轮询服务器来增加负载 - 如果您有多个进度条，那么您正在谈论多个请求 + 多个轮询，这将导致相当多的额外负载。特别是同时 HTTP 连接在浏览器中受到限制。

您还可以研究 COMET 类型的方法，这些方法通过保持请求活动并以这种方式异步提供数据来做各种事情。

# java - java NIO中的文件打开过多错误

> ID：797375
> 
> 赞同：0
> 
> 时间：2009-04-28T11:16:08.703
> 
> 标签：java, sockets

您好我已经使用 java NIO 创建了一个套接字和客户端程序。我的服务器和客户端在不同的计算机上，服务器有 LINUX 操作系统，客户端有 WINDOWS 操作系统。每当我在客户端上创建了 1024 个套接字时，我的客户端机器都支持，但在服务器中，我收到太多文件打开错误。那么如何在服务器中打开 15000 个套接字而不会出现任何错误。或者有没有其他方法可以同时连接15000个客户端？

谢谢巴皮

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-03-27T19:23:43.827

好吧，质疑他为什么需要 15K 套接字是一个单独的讨论。

答案是您正在达到用户的文件描述符限制。

使用您将在侦听器中使用的用户登录并执行 $ulimit -n 以查看当前限制。

最有可能是 1024。

使用root编辑文件 `/etc/security/limits.conf`

并设置->

```
{username} soft nofile 65536
{username} hard nofile 65536 
```

65536 只是一个建议，您需要从您的应用程序中弄清楚。

注销，再次登录并使用 ulimit -n 重新检查，看看它是否有效。

您可能需要超过 15 个 fds 才能完成所有这些工作。使用 lsof 监控您的应用程序。

像这样：

```
$lsof -p {pid}   <- lists all file descriptors
$lsof -p {pid}  | wc -l    <- count them 
```

顺便说一句，您可能还达到了系统范围的 fd 限制，因此您需要检查它：

```
$cat /proc/sys/fs/file-max 
```

要增加那个，将此行添加到 /etc/sysctl.conf

```
#Maximum number of open FDs
fs.file-max = 65535 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T11:19:15.823

为什么一台机器需要15000个socket？无论如何，看看[ulimit](http://www.ss64.com/bash/ulimit.html) -n

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T12:28:58.090

如果您将有 15,000 个客户端与您的服务器通信（根据您的评论，将来可能有 200,000 个），那么我怀疑一旦连接这些客户端（如果它们连接），您将在为这些客户端提供服务时遇到可伸缩性问题。

我认为您可能需要退后一步，看看如何构建您的应用程序和/或部署以成功实现这些数字。

# php - 如何在php中的类中包含变量

> ID：797380
> 
> 赞同：4
> 
> 时间：2009-04-28T11:16:55.923
> 
> 标签：php

我有一些文件 test.php

```
<?PHP
    $config_key_security = "test";
?> 
```

我有一些课

test5.php

```
 include test.php
       class test1 {
                function test2 {
                   echo $config_key_security;
             }
        } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-04-28T11:19:16.557

```
 class test1 {
            function test2 {
               global $config_key_security;
               echo $config_key_security;
         }
    } 
```

或者

```
 class test1 {
            function test2 {
               echo $GLOBALS['config_key_security'];
         }
    } 
```

让你的类依赖全局变量并不是真正的最佳实践——你应该考虑将它传递给构造函数。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-04-28T15:58:04.937

让您的配置文件创建一组配置项。然后将该文件包含在类的构造函数中，并将其值保存为成员变量。这样，您的所有配置设置都可供班级使用。

测试.php：

```
<?
$config["config_key_security"] = "test";
$config["other_config_key"] = true;
...
?> 
```

测试5.php：

```
<?
class test1 {
    private $config;

    function __construct() {
        include("test.php");
        $this->config = $config;
    }

    public function test2{
        echo $this->config["config_key_security"];
    }
}
?> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-04-28T11:45:16.917

另一种选择是将 test.php 包含在 test2 方法中。这将使变量的范围对函数是本地的。

```
 class test1 {
            function test2 {
               include('test.php');
               echo $config_key_security;
         }
    } 
```

虽然仍然不是一个好习惯。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-28T12:58:22.153

使用 __construct() 方法。

```
include test.php;
$obj = new test1($config_key_security);
$obj->test2();

class test1
{
    function __construct($config_key_security) {
        $this->config_key_security = $config_key_security;
    }

    function test2() {
        echo $this->config_key_security;
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2010-06-03T18:23:35.997

我喜欢这样做的方式是：

在 test.php 中

```
define('CONFIG_KEY_SECURITY', 'test'); 
```

进而：

在 test5.php

```
include test.php
   class test1 {
            function test2 {
               echo CONFIG_KEY_SECURITY;
         }
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-24T09:15:38.933

您可以使用 $GLOBALS 变量数组并将全局变量作为元素放入其中。

*例如：* 文件：configs.php

```
<?PHP
    $GLOBALS['config_key_security'] => "test";
?> 
```

*文件：MyClass.php*

```
<?php
require_once 'configs.php';
class MyClass {
  function test() {
    echo $GLOBALS['config_key_security'];
  }
} 
```

# c# - 如何使 subonic 将字符串转换为我的自定义类型

> ID：797399
> 
> 赞同：1
> 
> 时间：2009-04-28T11:22:16.333
> 
> 标签：c#, subsonic, types

我试图在谷歌上搜索它，但找不到答案，所以我会在这里尝试。我正在使用 Subonic 并尝试使用以下方法填充对象：

```
Model.Object o = new Select()
            .From<Object>()
            .Where("Id")
            .IsEqualTo(id)
            .ExecuteSingle<Model.Object>(); 
```

这样做时出现错误： *“System.String”类型的对象无法转换为“CustomType”类型* 其中一个属性作为 varchar 存储在数据库中。在 Model.object 中，此属性定义为 CustomType。我已经为这种类型添加了一个隐式运算符，如下所示：

```
public static implicit operator CustomType(String value)
    {
        return new CustomType(value);
    } 
```

我在这里做错了什么？还是我错过了什么？任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T18:21:37.727

如果这是我的项目，我可能会为 Model.Object 构建一个部分类，然后在那里弹出一个工厂方法，或者可能是另一个需要 Reader 的构造函数重载。然后，您可以使用该阅读器根据需要加载属性，转换您的 CustomType。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T11:25:50.193

尝试实现您自己的[TypeConverter](http://msdn.microsoft.com/en-us/library/system.componentmodel.typeconverter.aspx)，以便可以重新创建您`Model.Object`的字符串表示形式。

**编辑**。在挖掘了 SubSonic 代码后，我发现这无济于事（请参阅[此](http://code.google.com/p/subsonicproject/source/browse/trunk/SubSonic/SqlQuery/SqlQuery.cs), `BuildTypedResult<T>`）。`IBaseRecord`如果您愿意，请尝试实施，并实施`Load()`方法。

# windbg - 如何确定哪些是来自 WinDBG 的前台 .NET 线程？

> ID：797400
> 
> 赞同：6
> 
> 时间：2009-04-28T11:22:38.297
> 
> 标签：windbg

如何确定哪些是来自 WinDBG 的前台 .NET 线程？使用 !threads 命令，SOS 扩展告诉我们前台线程的数量，但不告诉我们是哪些。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-28T12:03:05.173

您可以使用此[链接](http://msdn.microsoft.com/en-us/library/Ee817657%28pandp.10%29.aspx)中给出的线程状态值来确定线程是否为后台线程。

> TS_Background 0x00000200 线程是后台线程

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-28T11:31:18.540

输出中的状态标志`!threads`包含很多信息。如果`0x00000200`设置了标志，则线程是后台线程。

在 .NET 4 和 PSSCOR2 的 SOS 中，有一个`!threadstate`命令将列出给定标志值的文本。如果您没有，可以查看转子源代码和 John Robbins 调试 .NET 2.0 应用程序中的标志的概述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-30T13:56:57.780

[Netext](https://netext.codeplex.com/)的命令`!wthreads`显示类型和状态信息：

```
0:011> !wthreads
   Id OSId Address  Domain   Alloc Start:End   COM  GC Type  Locks Type / Status             Last Exception
    1 1854 0074f580 00748cd0 02c19308:02c1b2e8 STA  Preemptive   0                          
    2 1890 0075ab18 00748cd0 00000000:00000000 MTA  Preemptive   0 Background|Finalizer     
    3 1bac 080ecb98 00748cd0 00000000:00000000 MTA  Preemptive   0 Background|Worker        
    4 ---- 08106068 00748cd0 00000000:00000000 MTA  Preemptive   0 Worker|Terminated        
    5 ---- 0810e988 00748cd0 00000000:00000000 MTA  Preemptive   0 Worker|Terminated        
    6 ---- 080eb1d0 00748cd0 00000000:00000000 MTA  Preemptive   0 Worker|Terminated        
    7 081c 080fcb48 00748cd0 00000000:00000000 MTA  Preemptive   0 Background|IOCPort 
```

# xml - Excel：映射的 XML 数据和“数字存储为文本”错误

> ID：797403
> 
> 赞同：3
> 
> 时间：2009-04-28T11:23:34.160
> 
> 标签：xml, excel

我的一位同事有一个 XML 文档，她使用“获取外部数据/从 XML 数据导入”在 Excel 2007 中打开该文档。

Excel 自动将 XML 映射到列。但是，某些元素存储数字数据，Excel 拒绝将其视为数字：

```
<SOME_NUMBER>68.12</SOME_NUMBER> 
```

相反，单元格显示“数字存储为文本”错误。

目前没有 XML Schema 附加到文档中，如果可能的话，我想避免创建一个。还有哪些其他选择？

PS：尝试不同的区域设置是不成功的。数据似乎总是被视为文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:16:35.727

刚刚看到这个（旧）问题，并认为我仍然可以回答：

当您说“当前没有 XML Schema 附加到文档”时，您并不完全正确。尽管大部分时间都是由 Excel 为您隐式创建的，但始终存在 XML 模式。在提取和调整这个模式时——这并不难——你可能会得到最简单的结果。

有关如何执行此操作的提示（在此示例中，问题是日期字段）： [Exporting XML from Excel and Keeping Date Format](https://stackoverflow.com/questions/7918347/exporting-xml-from-excel-and-keeping-date-format/8153747#8153747)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T11:27:01.093

那么你可以只选择单元格，右键单击，格式化单元格，将格式类型更改为“数字”

**编辑**

使用这个测试 XML 文件

```
<NODES>
<A>
   <B>1.23</B>
   <C>2.34</C>
   <D>3.45</D>
   <SOME_NUMBER>ASDF</SOME_NUMBER>
</A>
<A>
   <B>1.23</B>
   <C>2.34</C>
   <D>3.45</D>
   <SOME_NUMBER>4.56</SOME_NUMBER>
</A>
<A>
   <B>1.23</B>
   <C>2.34</C>
   <D>3.45</D>
   <SOME_NUMBER>4.56</SOME_NUMBER>
</A>
</NODES> 
```

由于初始列中的文本，除了后两个 SOME_NUMBER 之外，所有列都显示为数字

所以我选择这两个单元格，突出显示错误框（感叹号）并选择第二个选项“转换为数字”

格式单元格的东西似乎有点愚蠢，因为它不会将格式应用于有错误的单元格，直到您单击单元格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T11:46:23.763

我相信默认情况下单元格格式适用于整个列，因此在您的示例中，可能有一些存储文本或数字的实例，但在“1.5”之类的配额中是默认文本格式。

当我测试 XML 数据导入时，它会将所有文本列格式化为文本，将数字列格式化为一般

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-26T21:44:40.487

我感觉到你的痛苦，我多年来一直有同样的问题。这是我想出的唯一解决方案。

```
Function ConvertText2Num(RangeToConvert As Range)
    RangeToConvert.ClearFormats
    RangeToConvert.TextToColumns
End Function 
```

# c# - 如何以编程方式区分 WSS 和 MOSS

> ID：797407
> 
> 赞同：3
> 
> 时间：2009-04-28T11:25:12.393
> 
> 标签：c#, sharepoint, moss, sharepoint-api

在使用 SP API 时，我需要知道我使用的是 SharePoint Services 还是 SharePoint Portal Server。有没有办法在代码（C#）中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T15:12:08.340

您可以使用 SPFarm.BuildVersion 检查构建版本是否不同：

[http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.administration.spfarm.buildversion.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.administration.spfarm.buildversion.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T12:50:02.813

查看 Karine Bosch 的博客文章[“通过检查注册表项确定是否安装了 MOSS”](http://www.u2u.info/Blogs/karine/Lists/Posts/Post.aspx?ID=29)。这应该会有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-28T20:08:44.490

请记住，即使在服务器上安装了 MOSS，也很可能只有 WSS 功能会为您的代码必须处理的站点/站点集激活。因此，另一种方法是检查某些 MOSS 特定功能在服务器上是否可用，甚至可能检查它们是否已被激活。一个很好的候选者是发布功能，它只与 MOSS 一起提供。

# iphone - 将 -release 或 -drain 发送到自动释放池有什么区别？

> ID：797419
> 
> 赞同：19
> 
> 时间：2009-04-28T11:28:35.270
> 
> 标签：iphone, cocoa, cocoa-touch, memory-management, autorelease

在许多书籍和许多网站上，我看到 -drain。好吧，对于一个听起来很酷的自动释放池。但它除了发布之外还有其他作用吗？我猜 -drain 只是让 Pool 释放它的所有对象，而不释放 Pool 本身。只是一个猜测。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-04-28T18:25:51.227

请注意，关于 oxigen 答案的评论说 -drain 不会释放 NSAutoreleasePool 是不正确的。NSAutoreleasePool的[文档](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSAutoreleasePool_Class/Reference/Reference.html)清楚地表明 -drain 释放（并因此破坏）NSAutoreleasePool。

-drain 是对 NSAutoreleasePool 对象使用 -release 的替代品，唯一的区别是它为垃圾收集系统提供了提示。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-28T11:33:55.477

如果您的系统有垃圾收集，则 -drain 发送消息 (objc_collect_if_needed) 用于 GC

如果你没有 GC，那么 drain = release

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-04-28T11:45:03.000

Oxigen 是对的，请参阅[NSAutoreleasePool](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSAutoreleasePool_Class/Reference/Reference.html#//apple_ref/occ/instm/NSAutoreleasePool/drain)`drain`方法的文档：

> 在引用计数环境中，释放和弹出接收器；在垃圾收集环境中，如果自上次收集后分配的内存大于当前阈值，则触发垃圾收集。

# c# - 打开的 SerialPort 使 C# 应用程序崩溃

> ID：797426
> 
> 赞同：0
> 
> 时间：2009-04-28T11:31:00.570
> 
> 标签：c#, .net, serial-port, objectdisposedexception

计算机通过物理 COM1 连接到测量设备。我有一个简单的表格，我打开一个串口，告诉设备我还活着，偶尔设备会发送数据。（每隔几分钟）

```
Thread _readThread = new Thread(Read);
SerialPort _serialPort = new SerialPort("COM1", 9600);
_serialPort.Parity = Parity.None;
_serialPort.DataBits = 8;
_serialPort.StopBits = StopBits.One;
_serialPort.Handshake = Handshake.None;
_serialPort.DtrEnable = true;
_serialPort.Open();
_readThread.Start();
_serialPort.Write("#listening"); 
```

读取功能（有效）：

```
public void Read()
{
    string message = _serialPort.ReadLine();
} 
```

大约一分钟后，应用程序崩溃（即使在调试时）。它报告一个 ObjectDisposedException （对于底层流？）。该消息表明 SafeHandle 已关闭。堆栈跟踪如下：

*在 Microsoft.Win32.UnsafeNativeMethods.GetOverlappedResult(SafeFileHandle hFile, NativeOverlapped* lpOverlapped, Int32& lpNumberOfBytesTransferred, Boolean bWait) 在 System.IO.Ports.SerialStream.EventLoopRunner.WaitForCommEvent() 在 System.Threading.ThreadHelper.ThreadStart_Context(Object state) 在 System. System.Threading.ThreadHelper.ThreadStart() 处的 Threading.ExecutionContext.Run（ExecutionContext executionContext，ContextCallback 回调，对象状态）*

有任何想法吗？该问题被广泛报道，但通常涉及设备与 PC 物理分离。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T18:04:47.660

在阅读之前尝试检查 IsOpen。

此外，是否有可能包含 _serialPort 的对象已被取消引用并被垃圾收集？如果您从未从另一个线程访问 _serialPort，请尝试在 Read() 中将其设为私有变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-10T18:21:22.077

似乎 RS232 电缆（适配器）导致了底层串行端口流的崩溃。切换到 FTDI 电缆，这工作。

查看 .NET Framework 源代码有很大帮助。但我认为抛出的 ObjectDisposedException 应该由 SerialPort 捕获，而不是由用户捕获。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T11:39:30.940

ObjectDisposedException 表示有人在对象上调用了 Dispose。启动读线程后你在做什么？您是否在退出程序之前等待读取线程完成？否则，程序退出时，可能读取线程仍在运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T12:26:28.970

大约一年前，我也发生过类似的事情。出于某种原因，读取缓冲区末尾的某些字符会导致串行端口的 C# 接口自行关闭。它通常发生在`\r\n`缓冲区的末尾，尽管它也可能是其他一些字符。

最后只是购买了商业串行端口 DLL 的许可证。

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-28T18:27:13.767

您在线程启动代码中将 _serialPort 声明为本地 SerialPort ，那么 Read() 中的 _serialPort 指的是什么？

尝试在 Read() 方法中创建 _serialPort 对象，以确保它位于同一线程的上下文中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-07-02T18:59:36.220

1) 线程_readThread = new Thread(Read);

```
// is this a local definition of _readThread var in constructor? 
// if so, after some time  gabbage collector clear this var from memory, a disposed object 
// shouldnot work (there is no such an object in memory). 
// The same with SerialPort local var 
// To work properly you should somewhere in class define a member 

class foo
{
   // ...
   Thread _readThread;
   SerialPort _serialPort;
   bool bRunningReadTrhead=false;

   //...

   // which is static or instanced, than

   public foo()
   {
      // ...
      _serialPort = new SerialPort("COM1", 9600);
      _serialPort.Parity = Parity.None;
      _serialPort.DataBits = 8;
      _serialPort.StopBits = StopBits.One;
      _serialPort.Handshake = Handshake.None;
      _serialPort.DtrEnable = true;
      _serialPort.Open();
      _readThread = new Thread(Read);

      bRunningReadTrhead=true;

      _readThread.Start();

      //...
   }

   // creates a thread which will live a long time in loop:
   private void Read()
   {
      while(bRunningReadTrhead)
      {
          try
          {
              string message = _serialPort.ReadLine();
          }
          catch(Exception e)
          {
             Console.Write(e);
          }
       }

      // exits a worker thread when you set global bool in false
     }

    // ...
}

// if you do not set a loop the thread  also finish   all jobs and become disposed 
```

# iis - 是否应该使用 DFS 来同步 wwwroot？

> ID：797428
> 
> 赞同：4
> 
> 时间：2009-04-28T11:31:40.770
> 
> 标签：iis, windows-server-2003, microsoft-distributed-file-system

我想知道使用 DFS 在网络场中同步内容是否是个好主意？有没有人有这方面的经验？我们过去使用过 Robocopy，但发现它有点不完整和笨重。本质上，我们希望避免每次更改一个文件时都必须对内容进行十次更改（这种情况经常发生，因为我们的网站很旧并且使用经典的 ASP。）

据我所知，DFS 通常用于地理上分离的位置，用于使 UNC 共享对用户来说更简单且更易于管理。

我想用它实现的只是将内容更改复制到将成为集线器的十台服务器之一。然后，我将使用 FRS 将其他九台服务器配置为辐条。

对此方法的任何想法或更好设置的建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T11:40:55.740

出于性能原因，请勿将网站指向 UNC 路径。与几乎任何其他文件访问方法相比，SMB 文件访问效率极低且速度很慢。

您可以使用 DFS-R（通过 Windows 2003 R2）在启用了 DFS 的共享之间启用复制，但必须将 IIS 设置为指向共享的本地路径，而不是 UNC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T11:37:12.647

如果您使用的是 Win2003，请确保安装 R2，DFS 复制得到很大改进，并且不使用 FRS。它会做你想做的事，即使是在局域网上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T11:44:37.823

不要为此使用 FRS，它可能会混淆。使用 DFS 和其他同步技术（例如 [Symantec Replication Exec](http://www.symantec.com/business/replication-exec)）可以正常工作。确保在 Active Directory 中使用 IP 范围创建正确的站点结构，以便 DFS 选择正确的服务器。

几年前我在 FRS 上尝试过，当时 Windows 2003 是新的（在 SP1 之前，从那时起情况可能会变得更好，但我不确定）。FRS 两次完全发疯并删除了我们的文件，更不用说它只是堵塞并且无法自行恢复的次数。FRS 也只同步关闭的文件，不同步打开的文件（例如，在收集日志文件时）。FRS 在您拥有中等数量的相对较小文件且服务器上没有太多更改的环境中很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-04T03:54:00.180

我最近禁用了 UNC DFS 作为服务器上的站点根目录；在重负载下，该站点将无法响应请求。将站点 wwwroot 指向本地驱动器并重新启动 IIS 可以快速恢复站点速度。我必须建议，如果您采用 DFS 路线，只需将其复制到本地驱动器，而不是使用 UNC 路径作为 wwwroot。

# c# - 我该如何解决这个错误：“列'资产'不属于表。”？

> ID：797430
> 
> 赞同：2
> 
> 时间：2009-04-28T11:32:28.787
> 
> 标签：c#, .net, asp.net

我该如何解决这个错误：“列'资产'不属于表。” ? 我真的知道它属于这张桌子：我想这样做：

```
if(mydataset.hasgot(dr["asset"].tostring())) <br>
{<br>
// do something<br>
}<br> 
```

```
for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
            {
                DataRow dr_ = tbl.NewRow();

                if (ds.Tables[0].Columns.Contains(dr_["ASSET"].ToString()))
                         dr_["ASSET"] = ds.Tables[0].Rows[i]["ASSET"].ToString(); //dr["ASSET"].ToString();
                  tbl.Rows.Add(dr_);
            }

            DataSet ds_ = new DataSet();
            ds_.Tables.Add(tbl);
```

我的错误：“列‘资产’不属于表。”。

敬请期待：

```
ds.Tables[0].Columns.Contains(dr_["ASSET"].ToString()) 
```

如何控制包含“资产”的列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T11:35:54.647

`dr_["ASSET"].ToString()`返回`dr_`名为“ASSET”的列中发生在 DataRow 中的任何内容的字符串表示形式，这显然不是您所需要的。因此，这是正确的：

```
if(ds.Tables[0].Columns.Contains("ASSET")) 
```

# iis-7 - 重命名 Windows Server 2008 (IIS7) 上的虚拟目录

> ID：797431
> 
> 赞同：42
> 
> 时间：2009-04-28T11:33:02.610
> 
> 标签：iis-7, windows-server-2008

如何在 Windows Server 2008 的 IIS7 中重命名虚拟目录（即更改虚拟路径名称）？

在服务器管理器中，我单击应用程序，选择基本设置，但显示当前别名的框显示为灰色，我无法对其进行编辑。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2010-09-02T20:22:10.363

我找到了一种使用内置 appcmd.exe 工具执行此操作的方法。如果您想更改应用程序“OldApplicationName”中的虚拟目录“Images”，请在命令行中输入。

```
%systemroot%\system32\inetsrv\appcmd set vdir "Default Web Site/OldApplicationName/Images" -path:/Images2 
```

更多详细信息，包括如何在此处重命名应用程序：[http ://www.foliotek.com/devblog/rename-applications-and-virtual-directories-in-iis7/](http://www.foliotek.com/devblog/rename-applications-and-virtual-directories-in-iis7/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-04-28T11:35:59.387

据我所知，没有办法做到这一点。您只能删除虚拟目录，然后使用相同的设置重新创建它。

或者至少，你不能通过 GUI 来做到这一点。例如，可能有一些方法可以通过 PowerShell 中的脚本来实现。但我不知道怎么做。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-03-18T15:00:40.110

如果您还尝试重命名应用程序，则上下文几乎相同，除了使用“set app”而不是“set vdir”

```
appcmd set app "Default Web Site/OriginalSite" -path:/RenamedSite 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T12:05:39.457

你可能想在[这里查看这篇文章](https://stackoverflow.com/questions/264826/rename-virtual-directory-in-iis)

来自阿迪莱...

> 试试 PowerShell，我认为 IIS7 引入了看起来相当强大的新管理工具。我认为您还可以使用这些脚本通过 WMI 远程管理 IIS。
> 
> 它不应该比 VBScript 更复杂。
> 
> 另一种方法是使用 VBScript 来编辑 IIS 配置文件或创建管理对象，但这似乎并不是真正的方法。

从jwmiller5 ...

> 您想在 IIS 中重命名它，还是更改虚拟路径？adsutil 都可以。它应该安装在 c:\inetpub\AdminScripts
> 
> adsutil.vbs SET W3SVC/svcnum/Root/AppName/AppFriendlyName "新友好名称" adsutil.vbs SET W3SVC/svcnum/Root/AppName/AppRoot "新应用程序路径"

# css - CSS 格式化 A4 打印

> ID：797432
> 
> 赞同：4
> 
> 时间：2009-04-28T11:33:11.440
> 
> 标签：css, printing

如何编码 CSS 样式以在打印时强制网页的特定页边距，并且对 IE 和 Firefox 有效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T11:55:37.033

使用媒体类型“打印”（@media print）。

不要设置固定宽度或最大宽度。而是让内容变得流畅。如果你用 (px, em, pt, cm) 指定任何一个，你总是会遇到一个或另一个问题，因为不同的浏览器会添加不同的边距。

A4，信，A3，这不是你关心的问题。你的文件不在乎。用户可以在任何可用的纸张上打印您的文档，因为您的内容是流动的。

[在此处查找有关用于打印的 css 的一些提示。](http://css-discuss.incutio.com/?page=PrintStylesheets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-09T03:34:04.477

一种解决方法是改用 SVG。使用 SVG，您可以使用如下内容：

```
<svg width="19cm" height="26.5cm" viewBox="0 0 1900 2650" xmlns="http://www.w3.org/2000/svg" version="1.2"> 
```

然后，您只需确保所有元素都在 1900x2650 视图内。

不幸的是，这确实涉及在 SVG 中“重新创建”您的页面，这很不方便。不过，这似乎是必要的。HTML 和 CSS 解决方案不能保证内容不会溢出到您打算将其作为单个页面的多个页面中。

# javascript - 如何使用 WMI 枚举所有 ActiveX 元素？

> ID：797435
> 
> 赞同：2
> 
> 时间：2009-04-28T11:34:14.073
> 
> 标签：javascript, windows, scripting, activex, wmi

是否可以使用 WMI 脚本枚举所有（或仅启用的）ActiveX 元素（*.dll、*.ocx）？

动机：[ActiveXHelper](http://www.nirsoft.net/utils/axhelper.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-29T11:30:59.453

[Scritomatic V2](http://www.microsoft.com/downloads/details.aspx?familyid=09dfc342-648b-4119-b7eb-783b0f7d1178&displaylang=en)工具有一些这样的示例：

```
`On Error Resume Next

Const wbemFlagReturnImmediately = &h10
Const wbemFlagForwardOnly = &h20

arrComputers = Array("*")
For Each strComputer In arrComputers
   WScript.Echo
   WScript.Echo "=========================================="
   WScript.Echo "Computer: " & strComputer
   WScript.Echo "=========================================="

Set objWMIService = GetObject("winmgmts:\" & strComputer & "\root\CIMV2")
   Set colItems = objWMIService.ExecQuery("SELECT * FROM Win32_ClassicCOMClass", "WQL", _
                                          wbemFlagReturnImmediately + wbemFlagForwardOnly)

For Each objItem In colItems
      WScript.Echo "Caption: " & objItem.Caption
      WScript.Echo "ComponentId: " & objItem.ComponentId
      WScript.Echo "Description: " & objItem.Description
      WScript.Echo "InstallDate: " & WMIDateStringToDate(objItem.InstallDate)
      WScript.Echo "Name: " & objItem.Name
      WScript.Echo "Status: " & objItem.Status
      WScript.Echo
   Next
Next` 

`Function WMIDateStringToDate(dtmDate)
WScript.Echo dtm: 
    WMIDateStringToDate = CDate(Mid(dtmDate, 5, 2) & "/" & _
    Mid(dtmDate, 7, 2) & "/" & Left(dtmDate, 4) _
    & " " & Mid (dtmDate, 9, 2) & ":" & Mid(dtmDate, 11, 2) & ":" & Mid(dtmDate,13, 2))
End Function` 
```

# `html - 是否有用于生成 HTML 的 Emacs Lisp 库？`

 `> ID：797442
> 
> 赞同：17
> 
> 时间：2009-04-28T11:37:49.743
> 
> 标签：html, macros, code-generation, elisp

我正在寻找一种解决方案，允许我编写本机 Emacs Lisp 代码并在编译时将其转换为 HTML，例如[Franz 的 htmlgen](https://github.com/franzinc/aserve/blob/master/doc/htmlgen.md)：

```
(html
 ((:div class "post")
  (:h1 "Title")
  (:p "Hello, World!"))) 
```

当然我可以[编写自己的宏](http://www.gigamonkeys.com/book/practical-an-html-generation-library-the-interpreter.html)，但是如果有任何项目围绕这个问题我很感兴趣。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-10-08T17:35:49.530

如您[所见](https://stackoverflow.com/questions/1532311/cgi-programming-in-elisp/1532530#1532530)，[`xmlgen`](http://www.emacswiki.org/emacs/XmlGen)从列表结构生成 XML。令我失望的是 ``xmlgen` 包，它支持的格式与 Emacs 的[xml 解析器](http://cvs.savannah.gnu.org/viewvc/emacs/emacs/lisp/xml.el)并不完全相反。

我确实将此添加到我的 xmlgen 副本中：

```
;; this creates a routine to be the inverse of what xml-parse does
;;;###autoload
(defun xml-gen (form &optional in-elm level)
  "Convert a sexp to xml:
  '(p :class \"big\")) => \"<p class=\\\"big\\\" />\""
  (let ((level (or level 0)))
    (cond
     ((numberp form) (number-to-string form))
     ((stringp form) form)
     ((listp form)
      (destructuring-bind (xml attrs) (xml-gen-extract-plist form)
        (let ((el (car xml)))
          (unless (symbolp el)
            (error "Element must be a symbol (got '%S')." el))
          (setq el (symbol-name el))
          (concat "<" el (xml-gen-attr-to-string attrs)
                  (if (> (length xml) 1)
                      (concat ">" (mapconcat
                                   (lambda (s) (xml-gen s el (1+ level)))
                                   (cdr xml)
                                   "")
                              "</" el ">")
                    "/>"))))))))

(defun xml-gen-attr-to-string (plist)
  (reduce 'concat (mapcar (lambda (p) (concat " " (symbol-name (car p)) "=\"" (cdr p) "\"")) plist)))

(defun xml-gen-extract-plist (list)
  (list (cons (car list) (let ((kids (xml-node-children list)))
                           (if (= 1 (length kids))
                               kids
                             (remove-if-not 'listp kids))))
        (xml-node-attributes list))) 
```

*注意：*这个接口是`xml-gen`（不是`xmlgen`原来的解析）。

使用此接口，以下内容成立：

```
(string-equal (xml-gen (car (xml-parse-region <some-region-of-xml>)))
              <some-region-of-xml>) 
```

和

```
(equal (car (xml-parse-region (insert (xml-gen <some-xml-form>))))
       <some-xml-form>) 
```

新的`xml-gen`并没有努力保留`xml-parse-region`例程生成的空白。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T14:09:48.613

这可能是一个起点：[http ://www.emacswiki.org/emacs/HtmlLite](http://www.emacswiki.org/emacs/HtmlLite)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T14:01:05.373

这不是您要寻找的，但是有一个 20 分钟的视频，其中一个人使用 UCW（UnCommon Web 应用程序框架）创建了一个简单的网站。这一切都是在 Emacs 中使用 lisp 完成的......

这是一个[成绩单](http://www.pchristensen.com/blog/articles/transcript-of-marco-barringers-ucw-hello-world-movie/)的链接（所有代码（约 25 行）都在成绩单的末尾）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T14:12:06.830

同时，我发现了一些包含我想要的类似内容的[代码。](http://www.cs.bham.ac.uk/research/projects/attmeta/DatabankDCA/simple.el)现在我可以写：

```
(views-with-html
 ((body)
  (h1 "Title")
  ((p (class . "entry")) "Hello, World!"))) 
```

该实现有一些限制（例如硬编码元素列表），但它似乎是一个很好的起点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-08T15:00:57.957

我有一个类似的要求，能够使用 xml-parse 函数解析 xml，对其进行转换，然后将其作为 xml 字符串输出。

Trey 的解决方案几乎奏效了，只是我需要保留空白 xml 元素。所以我在这里写了自己的实现：

[https://github.com/upgradingdave/xml-to-string](https://github.com/upgradingdave/xml-to-string)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-23T06:49:47.377

你考虑过yaclml吗？yaclml (Yet Another Common Lisp Markup Language) 是一个 HTML 生成器和 HTML 模板库。yaclml 用作 ucw Web 框架的 html 模板后端。 [https://www.cliki.net/yaclml](https://www.cliki.net/yaclml)

它是常见的 lisp。不是省略。但， ...

# c# - 软件公司保护知识产权（代码）的方法

> ID：797445
> 
> 赞同：3
> 
> 时间：2009-04-28T11:39:23.920
> 
> 标签：c#, security

你如何保护非开源代码不被泄露？

如今，随着 USB 驱动器、互联网驱动器和电子邮件等技术的出现，人们如何保护软件资产？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-28T11:46:39.613

版权和合同法似乎适用于大多数公司。技术修复并不总是正确的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-28T11:48:40.607

与 unwind 的回答相反，我会说限制互联网访问和禁止使用 USB 驱动器等有用的工具包正是会让您的员工士气低落和加剧窃取您的 IP 的事情。最终，如果您组织内部的某个人想要窃取您的 IP，他们会的。

我认为更好的方法是**尊重你的员工，**让他们没有理由窃取知识产权。如果他们想在一家公司工作，他们也会想保护自己的公司。

然后认识到你的 IP 的价值很少体现在软件本身（它会很快变得陈旧和惰性），而通常体现在编写它的人的头脑中，更多地体现在人们的集体思想和经验中。所有的。

弯曲的不是勺子。是你自己。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-28T11:42:11.777

嗯......这是一个相当广泛的问题，这里有一些明显的方法：

*   禁止用户/员工使用 USB 驱动程序。有时候是这样的。在一些工作场所，端口在物理上被禁用（即胶合关闭）。
*   不允许用户随意上网。
*   对电子邮件使用积极的过滤，删除附件，或者至少将其大小限制为非常小的东西。

我不是说“这样做就没有问题”，它仍然是一个大问题，也可能成为一个人的问题，因为上述情况也会让你的员工感到不值得信赖，这反过来*可能*会让他们中的一些人更可能会做他们不应该做的事情，作为抗议。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-28T11:48:40.590

通常代码库是如此庞大和复杂，以至于如果没有作者/维护者，所有这些都在手边是毫无用处的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-28T12:08:04.240

由于这是标记为 C#，我想知道您是否在谈论混淆代码或以其他方式使其更难反编译或实际上保护员工不窃取它？

在费尽心思保护员工不被盗之前，可能值得考虑一下这是否是一个值得的过程。我的意思是，如果你有一个新的交易算法，以及一个可以最快进入市场的平台，那么肯定需要不惜一切代价保护它。但是，如果您的一名员工在内部内容管理系统中复制了您的小型网店的来源，这真的很重要吗？您的软件可能只是您对客户的感知价值的一小部分——还有支持、维护等。如果你的员工试图接近你的客户，以更便宜的价格向他出售软件，你会起诉他而被遗忘。

如上所述，过分地锁定您的系统可能只会让员工觉得自己像无人机，并可能让他们更有可能做您不希望他们做的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-01T17:12:17.557

使用身份验证和授权功能难以规避的源代码控制解决方案。这将允许您按项目隔离存储库，并且一次只会泄露一个项目。

我同意其他答案，即来源盗窃和泄漏的技术解决方案只会减慢恶意用户的速度，而不是阻止他们。最好进行一些威胁分析并建立一个社交环境，使恶意用户一开始就不会被创建或授予访问权限。

# wcf - 64 位 Windows 服务器上的 WCF 自托管应用程序

> ID：797455
> 
> 赞同：0
> 
> 时间：2009-04-28T11:42:23.850
> 
> 标签：wcf, 64-bit

我有一个 Windows 应用程序，它充当我在 32 位 Windows Server 2008 机器上开发的 WCF 服务。我已经测试了该应用程序，并且在我的开发机器以及我的 32 位工作站上运行它时一切正常。但是，当尝试在 64 位 Windows 2008 Server 上运行该应用程序时，该应用程序不会运行，并且会生成一个 Windows 错误报告，说明该应用程序已停止工作。我试图在我的 32 位开发工作站上构建应用程序，同时针对 x86 和 x64，但无济于事。唯一能让应用程序运行的情况是注释掉启动 WCF 服务的代码。所以我的问题是，我是否需要在 64 位工作站上开发和/或构建此应用程序以允许应用程序在 64 位机器上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T11:52:28.990

好的，我想通了，没关系...需要在该服务器上以管理员身份运行应用程序...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T12:17:52.190

您需要使用 httpcfg 实用程序配置 http.sys 以接受您的 url。Windows Server 2003 也有类似的情况。

*   [如何在 Windows Vista 中添加 URL ACL 并避免 AddressAccessDeniedException](http://www.casadehambone.com/HowToAddAURLACLAndAvoidAddressAccessDeniedExceptionInWindowsVista.aspx)
*   [Httpcfg 示例：Internet 信息服务 (IIS)](http://technet.microsoft.com/en-us/library/cc786389.aspx)

# registry - 注册表编辑器对话框未打开

> ID：797458
> 
> 赞同：0
> 
> 时间：2009-04-28T11:44:21.020
> 
> 标签：registry, regedit

我正在尝试从 Winxp 上的运行对话框打开 regedit。我试图从任务管理器、IE 等其他地方启动它。我以管理员身份运行

论坛显示这是一种病毒。但没有什么具体可以让它工作

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-30T14:31:08.453

它曾经发生在我身上...
只需进入您的 Windows 目录：例如：c:\windows
您可能会发现没有 regedit.exe！
只需从任何其他电脑复制并粘贴到那里！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T11:46:24.450

这不完全是一个编程问题，所以这可能不是这个地方......但是尝试在没有网络的情况下以安全模式启动并从那里打开注册表。

干杯，
埃里克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T11:58:41.550

如果它是阻止您启动 regedit.exe 的病毒，请尝试使用不同的文件名制作 regedit.exe 的副本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T12:38:28.427

试试这个：开始->运行-> **gpedit.msc**

输入“组策略/用户配置/管理模板/系统”。

勾选“阻止访问注册表”

可能是没有选择这个设置。

# c# - 在单元测试中使用 RowTest 是一个好习惯吗

> ID：797464
> 
> 赞同：2
> 
> 时间：2009-04-28T11:45:39.007
> 
> 标签：c#, .net, unit-testing

NUnit 和 MbUnit 有一个 RowTest 属性，允许您将不同的参数集发送到单个测试中。

```
[RowTest]
[Row(5, 10, 15)]
[Row(3.5, 2.7, 6.2)]
[Row(-5, 6, 1)]
public void AddTest(double firstNumber, double secondNumber, double result)
{
  Assert.AreEqual(result, firstNumber + secondNumber);
} 
```

我曾经是这个功能的忠实粉丝。我到处都用它。但是，最近我不确定在单元测试中使用 RowTest 是否是一个好主意。以下是更多原因：

单元测试必须非常简单。如果有错误，您不希望花费大量时间来弄清楚您的测试测试什么。当您使用多行时，每一行都有不同的发送参数集并测试不同的东西。

我也在使用[TestDriven.NET](http://www.testdriven.net/)，它允许我从我的 IDE、Visual Studio 运行我的单元测试。使用 TestDrivent.NET，我无法指示运行特定行，它将执行所有行。因此，当我调试时，我必须注释掉所有其他行，只留下我正在使用的行。

这是一个示例，今天将如何编写我的测试：

```
[Test]
public void Add_with_positive_whole_numbers()
{
   Assert.AreEqual(5, 10 + 15);
}

[Test]
public void Add_with_one_decimal_number()
{
   Assert.AreEqual(6.2, 3.5 + 2.7);
}

[Test]
public void Add_with_negative_number()
{
   Assert.AreEqual(1, -5 + 6);
} 
```

说我仍然偶尔使用 RowTest 属性，但只有当我相信当我以后需要处理它时它不会减慢我的速度时。

你认为在单元测试中使用这个特性是个好主意吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-28T12:04:04.563

**是的。**它基本上是用不同的输入一遍又一遍地执行相同的测试......省去了为每个不同的输入组合重复自己的麻烦。
从而坚持**“一次且仅一次”或 DRY 原则**。因此，如果您需要更新此测试，您只需更新一个测试（相对于多个）测试。

每一行都应该是来自不同集合的代表性输入——即这个输入与这个函数的行为的所有其他输入不同。RowTest 实际上是 NUnit 的一个非常需要的功能——起源于 MBUnit……我认为 Schlapsi 将它写为 NUnit 扩展，然后被提升为标准分发状态。NUnit GUI 还将所有 RowTests 分组在 GUI 中的一个节点下，并显示哪个输入失败/通过.. 这很酷。

The minor disadvantage of the 'need to debug' is something I personally can live with.. It's after all commenting out a number of Row attributes temporarily (First of all most of the time I can eyeball the function once I find ScenarioX failed and solve it without needing a step-through) or conversely just copy the test out and pass it fixed (problematic) inputs temporarily

# visual-studio-2008 - 如何在调试 VS.NET 2008 期间不在解决方案中启动 Web 应用程序项目

> ID：797466
> 
> 赞同：1
> 
> 时间：2009-04-28T11:46:02.687
> 
> 标签：visual-studio-2008, web-applications

我有一个 WinForms 和一个 ASP.NET 应用程序的解决方案。

我的启动项目是 WinForms，但每次我运行该项目时，它都会启动 ASP.NET Webserver，即使我不想使用它。

我查看了“属性页”中的所有内容，但找不到阻止此操作的选项。此外，如果不将其从解决方案中删除，则无法卸载该项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T12:58:18.830

远非理想，但是如果您将 WebSite 项目的启动选项下的属性从“使用默认 Web 服务器”更改为“使用自定义服务器”并将基本 URL 设置为“ [http://localhost/](http://localhost/) ”，它将不再加载调试 Windows 应用程序时的开发服务器。

不幸的是，当您想调试网站时，您需要将其重新设置...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T12:09:28.107

您可能需要检查[启动项目](http://msdn.microsoft.com/en-us/library/09138bex.aspx)设置（右键单击解决方案 --> 设置启动项目）并确保 Web 项目未设置为在调试时启动。我现在正在使用我的 Mac 笔记本电脑，所以我无法检查这是否会阻止 Web 服务器启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T12:09:56.890

为什么不创建不同的解决方案？一个用于 WinForm 应用程序，另一个用于 ASP.NET 应用程序。这有各种优势： - 您使用特定的解决方案或代码库视图，其中不包括您不需要的项目。- 加快您的本地构建。

# wpf - 当您丢失 .sln 和 .csproj 文件时，如何构建新的 VS2008 WPF 解决方案/项目？

> ID：797470
> 
> 赞同：-2
> 
> 时间：2009-04-28T11:48:04.383
> 
> 标签：wpf, visual-studio-2008

我有一个旧的 VS2008 解决方案，其中有一个项目。

当我双击 .sln 文件时，它说什么都找不到（**我已经重命名了一些目录**）。

那么现在获取我的主文件（Window1.xaml、App.xaml、Properties 文件夹和大约 10 个其他类文件）并**再次为这些主文件重新创建解决方案和项目**的最佳方法是什么？

# 回答：

谢谢 Gerrie，你是对的，手动是唯一的方法：

*   创建了新的 WPF 解决方案
*   重新创建所有文件夹
*   右键项目，添加现有项目，改为`*.*`，一次性全部添加
*   对于每个文件夹，按上述步骤添加文件

所以在我的情况下，我在 5 分钟内完成，但对于更大的解决方案，人们希望有一个开源工具或 VS2008/VS2010 功能来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T11:55:47.047

创建一个新的解决方案并添加所有内容。

简而言之：手动完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T11:53:17.240

为什么不在记事本中打开 .sln 文件并修复项目的路径？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T11:55:35.457

尝试文件 -> 新项目 -> 现有代码中的项目

或者简单地说，在同一文件夹中创建一个具有您选择的名称的新项目，然后将现有项目添加到该项目中！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T11:54:17.143

创建新解决方案、新项目、新类，并复制和粘贴内容。手动完成 10 节课并不是一项艰巨的工作。

或者

还原 TFS 中的更改

# c# - 是否可以只包含所需的 dll 而不是整个 .Net 框架？

> ID：797471
> 
> 赞同：6
> 
> 时间：2009-04-28T11:48:27.003
> 
> 标签：c#, .net, visual-studio

我如何只包含在我的程序中使用的 .Net 框架的某些 dll 以及安装项目，而不是安装整个框架？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-28T11:52:11.173

您想将 .NET 应用程序部署到没有安装 .NET 并且只安装您的应用程序所需的特定 System.* dll 的服务器？

我很确定你不能这样做。框架不仅仅是 GAC 中的一堆 DLL。（例如 CLR、注册表项等...）。您需要在客户端机器上安装框架

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-28T11:52:12.733

我很确定这是不可能的。C# 是托管代码，因此需要 CLR 和框架来支持它。

与编译为二进制的其他语言不同，.NET 代码被编译为 MSIL（Microsoft 中间语言），因此它不能直接由硬件运行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-28T12:35:31.430

我会推荐 .NET 客户端配置文件，[在此处](http://msdn.microsoft.com/en-us/library/cc656912.aspx)描述。“.NET Framework 客户端配置文件是面向客户端应用程序的完整 .NET Framework 3.5 SP1 的子集。它提供了Windows Presentation Foundation (WPF)、Windows 窗体、Windows Communication Foundation (WCF) 和 ClickOnce 功能的简化**子集**。这为针对 .NET Framework 客户端配置文件的 WPF、Windows 窗体、WCF 和控制台应用程序启用了快速部署方案。”

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-28T12:09:33.223

从 .Net 3.5 SP1 开始，就有了使用[.NET Framework Client Profile](http://msdn.microsoft.com/en-us/library/cc656912.aspx)的选项。这使您能够在某些受支持的场景中分发完整 .Net 包的子集。不过，它仍然需要您使用安装程序——您不能只分发单个程序集。好处是大大减少了包大小和部署时间。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-28T11:53:17.613

不可以。为了让您的程序能够运行，目标机器上必须安装适当版本的 .Net 框架。您不需要将整个 SDK 与您的应用程序捆绑在一起，但您确实需要为您的应用程序包含可再分发的适当 .Net 框架。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-28T11:53:03.980

我知道[蝾螈工具](http://www.remotesoft.com/linker/)……但没用过。

从他们的网站：“Salamander .NET 链接器、本机编译器和小型部署工具；部署 .NET w/o Framework”

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-28T11:54:09.343

您可以使用[Xenocode](http://www.xenocode.com/Products/Postbuild-for-NET/?gclid=CIrrtq_Bk5oCFRaA3godOWOrNQ)等工具来链接程序集。

有一个免费的链接器（我认为来自微软），但它的名字让我无法理解。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-28T12:01:37.143

这是不可能的。您必须在目标机器上安装适当的 .Net 框架运行时。您所要求的可以通过 3rd 方库/程序集实现，但不能通过 .Net 运行时实现。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-28T11:53:19.597

你看过ngen吗？

[http://msdn.microsoft.com/en-us/library/6t9t5wcf(VS.80).aspx](http://msdn.microsoft.com/en-us/library/6t9t5wcf(VS.80).aspx)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-28T11:58:36.573

可以使用反射来识别依赖程序集并将它们与您的部署“链接”。我在 Java 领域使用过类似的技术。

# silverlight - 使用 Silverlight 2 WebClient 按需打开图像

> ID：797479
> 
> 赞同：0
> 
> 时间：2009-04-28T11:51:50.223
> 
> 标签：silverlight, webclient, ondemand

每当用户想要时，我都会尝试在我的 silverlight 应用程序上显示一些图像。这些图像位于我的 silverlight 项目的一个文件夹中，我不希望用户在他/她第一次加载网页时下载所有这些图像。

我尝试了 OpenReadAsync 方法，该方法具有图像文件的相对地址，该文件位于名为 images 的文件夹中，其 Build Action 设置为 Content，并且其“复制到输出 Direcoty”属性设置为 Always。

但是我在 OpenReadCompleted 事件中得到以下异常： **URI 前缀无法识别。**

这是我使用的代码：

```
Dim webClient As New WebClient
AddHandler webClient.OpenReadCompleted, AddressOf webClient_OpenReadCompleted
WebClient.AllowReadStreamBuffering = True
WebClient.OpenReadAsync(New Uri("images/myimage.jpg", UriKind.Relative)) 
```

谁能告诉我如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T17:16:35.187

首先从 silverlight 项目中取出图像。您希望图像位于 Web 项目中，然后您可以使用带有空源的普通图像标记，然后当您需要下载图像时，将源设置为 uri。

# delphi - 我应该使用无符号整数来计算成员吗？

> ID：797484
> 
> 赞同：9
> 
> 时间：2009-04-28T11:52:39.333
> 
> 标签：delphi, integer-overflow

我应该为我的计数类成员使用无符号整数吗？

**回答**

例如，假设一个类

```
TList <T> = class
private
  FCount : Cardinal;
public
  property Count : Cardinal read FCount;
end; 
```

这确实有道理，不是吗？存储在列表中的项目数不能为负数，那么为什么不使用无符号整数类型呢？我认为总是尽可能使用最不通用（因此最特殊）的类型通常是一个很好的原则。

现在，遍历列表如下所示：

```
for I := 0 to List.Count - 1 do
  Writeln (List [I]); 
```

当列表中存储的项目数为零时，编译器会尝试评估

```
List.Count - 1 
```

这导致了一个很好的整数溢出（确切地说是下溢）。结合调试器没有显示发生异常的适当位置的事实，这对我来说很难找到。

让我补充一点，如果您关闭了溢出检查，那么由此产生的错误将更难跟踪，因为您将经常访问不属于您的内存 - 这会导致未定义的行为。

从现在开始，我将为我的所有计数成员使用纯整数，以避免这种情况。

如果这完全是胡说八道，请指出来给我:)

（我只花了一个小时跟踪我的代码中的整数溢出，所以我决定分享一下——当然，这里的大多数人都知道，但也许我可以节省一些时间。）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-28T12:03:19.853

不，绝对不是。Delphi 的习惯用法是在这里使用整数。不要与语言抗争。在 32 位环境中，列表中不会有更多元素，除非您尝试构建位图。

让我们明确一点：每个将不得不使用您的代码的程序员都会讨厌您使用 Cardinal 而不是整数。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-28T14:09:52.700

无符号整数几乎总是比它们的价值更麻烦，因为您通常最终会在某个时候在表达式中混合有符号和无符号整数。这意味着需要扩展类型（并且可能会影响性能）以获得正确的语义（理想情况下，编译器会根据语言定义执行此操作），否则您需要非常小心地检查范围。

以 C/C++ 为例：`size_t`它是内存大小和分配的整数类型，并且是无符号的，但是`ptrdiff_t`是当您从另一个指针中减去一个指针时得到的偏移量的类型，并且必然是有符号的。想知道您在数组中分配了多少个元素？`first`也许您从元素地址中减去`last+1`元素地址并除以`sizeof(element-type)`？好吧，现在您刚刚混合了有符号和无符号整数。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-04-28T12:01:35.503

关于您的陈述，*“我认为始终使用尽可能不通用（因此最特殊）的类型通常是一个很好的原则。”* - 实际上，我认为使用最不引起您的焦虑和麻烦的数据类型是一个很好的原则。

通常对我来说这是一个有符号的整数，因为：

1.  我通常没有包含 2 ^(31)个或更多元素的列表。
2.  你也不应该有那么大的列表:-)
3.  我不喜欢在我的代码中有特殊边缘情况的麻烦。

但这确实是一个风格问题。如果代码的“纯度”对您来说比代码的简洁更重要，那么您的方法是最好的（通过修改以捕捉边缘情况）。我自己，我更喜欢简洁，因为边缘情况往往会使代码混乱并减少理解。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-04-28T21:02:54.237

不。

这不仅仅是违反编程习惯，它是对编译器使用无符号算术的明确请求，这要么容易出现异常行为（如果你不防范溢出）或不相关的运行时异常（如果你防范溢出，临时溢出将是致命的，即使最终结果是肯定的，即使最终结果是正数，当您在添加之前进行减法时也是如此，而且我指的是 CPU 操作码级别的操作顺序，这可能与您的内容无关紧要代码）。

请记住，“无符号”不会**转化**为“正面”，它会转化为“没有符号”，这是不同的。选择“未签名”一词是有充分理由的（在 Delphi 中将其命名为“Cardinal”是一个糟糕的选择 IMO）。

无符号类型用于原始存储规范、按位运算、ASM 代码、嵌入式控制器和其他特殊用途。当您进行高级编程时，您应该忘记您曾经听说过无符号类型。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-28T11:57:18.760

道德：尽可能使用迭代器`foreach`，因为它完全避免了这个问题。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-28T11:58:42.953

边界条件经常会出现问题。允许一种可能变为负面的类型可能只会改变问题。也许它以一种更容易调试的方式改变它，也许不是。我开始使用整数来计算这样的循环，但后来改用基数来帮助我捕捉错误。

# web-services - Web 服务与表单发布

> ID：797491
> 
> 赞同：3
> 
> 时间：2009-04-28T11:53:27.630
> 
> 标签：web-services

我有 2 个网站（www.mysite1.com 和 myweb2.com，这两个网站都在 ASP.NET 中，使用 SQL 服务器作为后端），我想将数据从一个站点传递到另一个站点。现在我很困惑是否使用 Web 服务或表单发布（从 mysite1 到 myweb2 中的页面）

谁能告诉我两者的优缺点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-28T11:59:47.973

通过网络服务，我假设您的意思是基于 SOAP 的网络服务？

无论如何，两者都是平等的，优势很少。发布更轻量级，而 SOAP 是标准化的（有点）。我会采用更安静的方法，因为我认为 SOAP 对于简单任务来说开销太大，而没有提供太多优势。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T12:07:20.467

Web 服务是[SOAP 消息](http://en.wikipedia.org/wiki/SOAP)（SOAP 协议使用 XML 来回传递消息），因此两端的服务器必须了解 SOAP 以及您想在它们之间谈论的任何扩展，它们可能（但不一定）是能够理解 WMDL 文件（“解释”各种服务端点和可用的远程功能）。通常我们将其称为 SOAP / WS-* 堆栈，强调“堆栈”，因为有一些软件需要可用，并且 SOAP 调用越复杂，该堆栈的可用和维护就越多.

另一方面，使用 POST 主要与[RESTful 行为](http://en.wikipedia.org/wiki/Representational_State_Transfer)相关联，作为此类协议的示例，请查看 HTTP。在 POST 中您当然可以发布复杂的 XML，但人们倾向于使用普通 POST 来简化调用，并使用[HTTP 响应](http://en.wikipedia.org/wiki/Http)作为回复。您可能不需要任何额外的软件，因为大多数（如果不是所有）webkits 都支持 HTTP。如果您想知道，我自己的偏见倾向于 REST。通过使用 HATEOAS，您可以为具有自我意识的系统创建非常好的基础架构，这些系统可以通过负载和可用性实时修改自身，而不是 SOAP 方式，这是争论的*中心*它; HTTP 专为大型分布式网络而设计，处理性能和稳定性。SOAP 往往是一站式的，如果它坏了，你就塞满了东西。（再次记住我的偏见。我在博客上写过很多关于这方面的文章，尤其[是架构方面](http://shelter.nu/blog/2007/01/soa-roa-woa-rest-soap-point-about-what.html)以及[SOA 与 ROA 的影响](http://shelter.nu/blog/2006/05/knee-deep-in-soa.html)。:)

关于哪个“更好”存在很大的争论，对此我只能说“这完全取决于你想做什么，你喜欢怎么做，你需要做什么，你的环境，你的经验，太阳和月亮的位置，以及我猫的心情。” 嗯，意思，很多。

我完全赞成对此进行有益的辩论，但我倾向于认为 SOAP 是一种再发明；SOAP 是一个带有标题和正文的信封，如果这听起来很熟悉，那正是 HTML 的设计方式，很少有人会看到这一事实。HTTP 只是一种用于转移内容的协议，得到了很好的理解和极好的支持，而 SOAP 使用它来转移他们的 XML 信封。转换 SOAP 和 HTML 之间有真正的区别吗？嗯，是的，最大的不同是 SOAP 重新发明了 HTTP 的所有细节（缓存、可寻址性、状态、缩放），然后只使用 HTTP 来传递消息而不是其他任何东西，让堆栈本身必须处理提到的那些细节早些时候。因此，HTTP 的许多优点被忽略并在另一层重新创建（因此，您需要一个 SOAP 堆栈来处理它），

接下来是你想做的事情。对于非常复杂的事情，webservices 标准堆栈中有很多（我认为现在大约有 1200 个页面）可以帮助您，但是如果您的需求更适度（例如，对非常复杂的安全性并不*那么*疯狂，例如) 一个简单的 POST（或 GET）请求和一个带有结果的信封可能就足够了。正如您可能知道的那样，HTTP 中的结果是 HTTP 内容类型，因此已经支持很多，但是您可以创建自己的，例如 application/xml+myformat （或者更准确地说，如果我没记错的话，application/x-xml+myformat ）。获取请求，如果它是响应代码 200，然后解析。

两者都会起作用。一个很重（WS-* 堆栈），具体取决于您的需求，另一个更轻量级并且已经受支持。正如他们所说，剩下的就是胶水。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T12:00:25.350

我会说网络服务绝对是最好的选择。一些专业人士：

*   如果将来您需要添加另一个网站，您的基础设施（网络服务）已经存在
*   跨站点表单发布可能会在使用 cookie 时给您带来问题，或者可能会触发浏览器隐私限制
*   如果您使用表单发布，则必须一遍又一遍地编写相同的代码，而使用 Web 服务时，您只需编写一次代码，然后在多个位置使用它。更容易维护，更少的代码编写。
*   可维护性（这与上述一点有关）当然，与交换数据相关的所有代码都在一个位置（您的 Web 服务）

可能还有更多。就像设计时支持/代码完成一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T11:58:44.903

根据我的小经验，我会说您最好使用 Web 服务，因为一旦您在接收端创建了它，您就可以在代码中看到服务的方法和结构。

此外，使用表单发布方法会使您不得不伪造表单提交，这不像进行 Web 服务调用那样简洁。

您的第三种方法是让数据库说话，尽管我猜它们是不同的并且不能“看到”对方？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-28T12:01:04.087

我建议使用 Web 服务（或 WCF）。正如 Beanie 所说，通过服务，您可以看到服务的方法和类型（您公开的），这将使数据移动更加容易和清洁。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-28T12:22:29.980

我同意 AlexanderJohannesen 的观点，即 SOAP Web 服务或 RESTful api 是否更好是有争议的，但是如果这两个站点都在您的控制之下并使用 asp.net 完成，那么肯定会使用 SOAP Web 服务。Visual Studio 提供的用于创建和使用 Web 服务的工具非常棒，只需几分钟即可创建两个站点之间的链接。

在要接收通信的站点中，通过选择 VS 中的添加项目来创建 Web 服务。选择 Web 服务并适当命名。然后只需创建一个具有您要实现的逻辑的方法并添加属性 [WebMethod]，例如。

```
[网络方法]
public void AddComment(int UserId, string Comment) {
  // 做东西
}

```

将其部署在您的测试服务器上，例如 tst.myweb2.com。

现在在消费端（www.myweb1.com），选择添加 Web 引用，将 url 指向我们刚刚创建的 Web 服务的地址，为其命名并单击添加引用。你有一个代理类，你可以像本地类一样调用它。非常简单。

# asp.net - 如何访问中继器中的元素属性？

> ID：797500
> 
> 赞同：0
> 
> 时间：2009-04-28T11:55:39.653
> 
> 标签：asp.net, list, repeater, datasource

我有一个*Repeater*控件，它的dataSource 设置了一个类型化的对象列表，并且在内联代码中我想访问它在*ItemTemplate*标记内的元素属性。我用 eval 表达式尝试了这个，但它不起作用：

```
<ItemTemplate>
  <tr>
    <td><%# Eval("code") %></td>
    <td><%# Eval("description") %></td>
  </tr>
</ItemTemplate> 
```

有任何想法吗？
谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T11:57:48.087

您可以使用：`<%# DataBinder.Eval(Container.DataItem, "field name") %>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T12:00:21.903

您的对象是否具有称为“代码”的属性。记住它是区分大小写的。

例如，如果您的对象是...

```
public class MyObj
{
    public string Code { get; set; }
    public string Description { get; set; }
} 
```

你正在将 a 绑定`Collection<MyObj>`到你的数据源，

然后你的中继器看起来像......

```
<asp:repeater id="Repeater1" runat="server">
    <headertemplate>
      <table border="1">
        <tr>
          <td><b>Code</b></td>
          <td><b>Description</b></td>
        </tr>
    </headertemplate>

    <itemtemplate>
      <tr>
        <td> <%# Eval("Code") %> </td>
        <td> <%# Eval("Description") %> </td>
      </tr>
    </itemtemplate>

    <footertemplate>
      </table>
    </footertemplate>
  </asp:repeater> 
```

# php - PHP Mail（）函数失败

> ID：797511
> 
> 赞同：0
> 
> 时间：2009-04-28T11:58:45.993
> 
> 标签：php

我试图向多个地址发送一封电子邮件，所以我编写了从数据库中提取电子邮件的函数，并用逗号分隔每封邮件，但邮件部分一直失败。然而，与 getmails() 类似的功能正在另一个页面上运行，所以我真的不知道自己做错了什么。这是我的代码，任何帮助将不胜感激。

谢谢大家。

```
function getmails()
    {
    $id = mysql_query("SELECT * FROM subscribes ORDER BY subscribe_id DESC") or die(mysql_error());
$elements = array();
while( $activeArray=mysql_fetch_array($id) )
{
    $elements[] = $activeArray['subscribe_email'] ;
}
$main = implode(', ', $elements);
print $main;

}

 function announce() {

if( isset( $_POST['announce'])) {
    $ToEmail = getmails(); 
$EmailSubject = "".$_POST['title']."";
$mailheader .= "From: newsletter@subdomain.domain.com\r\n";
$mailheader = "Reply-to:".$_POST['author']."@subdomain.domain.com\r\n";
$mailheader = "Content-type: text/html; charset=iso-8859-1\r\n";
$MESSAGE_BODY = "Author: ".$_POST['author']."<br>";
$MESSAGE_BODY = "Newsletter: ".$_POST['content']."<br>";
mail($ToEmail, $EmailSubject, $MESSAGE_BODY, $mailheader) or die ("Failure");

  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T12:07:06.973

除了 RichieHindle 的意见外，您的邮件无法正常工作的原因是因为您在函数中打印结果而不是返回结果。你应该改变这个：

```
$main = implode(', ', $elements);
print $main; 
```

对此：

```
return implode(', ', $elements); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T12:04:53.203

我不知道这是否是您的问题，但是构建的两行`$mailheader`正在丢弃以前的值，因为您使用的是`$mailheader = ...`而不是`$mailheader .= ...`

# .net - Window 从最小化状态恢复/激活后的 WPF 焦点文本框

> ID：797512
> 
> 赞同：0
> 
> 时间：2009-04-28T11:59:13.873
> 
> 标签：.net, wpf, windows, event-handling, focus

我有一个简单的 WPF 应用程序，用户可以在其中最小化我的应用程序窗口。

用户从最小化状态恢复 Window 后，我需要将焦点设置为某些 TextBox。

如果用户在最小化窗口之前没有改变焦点，那么在恢复应用程序之后一切都很好。

但是当用户改变焦点时问题就来了。

我的窗口已激活事件处理程序。代码如下：

```
private void Window_Activated(object sender, EventArgs e)
{
   if (isFullView)
       tbSearch.Focus();
   else
       tbSearch2.Focus();            
} 
```

Window 从最小化状态恢复后，事件处理程序被触发，但 TextBox tbSearch 没有收到焦点。

我做错了什么？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-12-25T00:24:09.720

你需要认识上一个。赢。状态。看到这篇文章的信息：http: [//blogs.microsoft.co.il/blogs/maxim/archive/2009/12/24/daily-tip-how-to-activate-minimized-window-form.aspx](http://blogs.microsoft.co.il/blogs/maxim/archive/2009/12/24/daily-tip-how-to-activate-minimized-window-form.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T12:08:46.110

很难说不知道`isFullView`设置什么，但我可以告诉你，`Focus()`设置逻辑焦点，而不是键盘焦点。如果控件的焦点范围是活动的焦点范围，则该控件将仅具有键盘焦点。

请阅读[本文](http://msdn.microsoft.com/en-us/library/aa969768.aspx)以获取有关 WPF 中焦点的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T21:24:46.480

尝试确保在调用处理程序时 TextBox 是否可见。也许您有一些触发器或其他一些东西在设置焦点之后显示 TextBox。

# java - 如何从动作类中的速度页面获取数据？

> ID：797524
> 
> 赞同：1
> 
> 时间：2009-04-28T12:01:35.597
> 
> 标签：java, struts2, velocity

如何从动作类中的速度页面获取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-29T01:55:03.270

它在客户端都是 HTML，当用户提交 HTML 表单时，它的工作就像从 HttpServletRequest 对象获取参数一样简单。我希望你明白我的意思。

所以，不要将自己与 Velocity 之类的东西混淆。

# c# - 是否可以将覆盖的方法标记为最终方法

> ID：797530
> 
> 赞同：48
> 
> 时间：2009-04-28T12:02:53.457
> 
> 标签：c#, .net, inheritance

在 C# 中，是否可以将覆盖的虚拟方法标记为最终方法，以便实现者无法覆盖它？我该怎么做？

一个例子可能更容易理解：

```
class A
{
   abstract void DoAction();
}
class B : A
{
   override void DoAction()
   {
       // Implements action in a way that it doesn't make
       // sense for children to override, e.g. by setting private state
       // later operations depend on  
   }
}
class C: B
{
   // This would be a bug
   override void DoAction() { }
} 
```

有没有办法修改 B 以防止其他子 C 在编译时或运行时覆盖 DoAction？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2009-04-28T12:07:05.803

是的，使用“密封”：

```
class A
{
   abstract void DoAction();
}
class B : A
{
   sealed override void DoAction()
   {
       // Implements action in a way that it doesn't make
       // sense for children to override, e.g. by setting private state
       // later operations depend on  
   }
}
class C: B
{
   override void DoAction() { } // will not compile
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-28T12:07:20.263

您可以将方法标记为`sealed`。

[http://msdn.microsoft.com/en-us/library/aa645769(VS.71).aspx](http://msdn.microsoft.com/en-us/library/aa645769(VS.71).aspx)

```
class A
{
   public virtual void F() { }
}
class B : A
{
   public sealed override void F() { }
}
class C : B
{
   public override void F() { } // Compilation error - 'C.F()': cannot override 
                                // inherited member 'B.F()' because it is sealed
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-04-28T12:07:16.113

你需要“密封”。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-04-28T12:09:53.550

单个方法可以标记为密封的，这大致相当于在 java 中将方法标记为 final。因此，在您的示例中，您将拥有：

```
class B : A
{
  override sealed void DoAction()
  {
    // implementation
  }
} 
```

# air - 从 html AIR 应用程序打印时出现问题 - 错误和打印输出被裁剪

> ID：797533
> 
> 赞同：0
> 
> 时间：2009-04-28T12:03:32.800
> 
> 标签：air

我正在尝试从 html/javascript AIR 应用程序进行打印。我正在使用的代码是：

```
var pjob = new window.runtime.flash.printing.PrintJob;
if (pjob.start()) {
    var poptions = new window.runtime.flash.printing.PrintJobOptions;        
    poptions.printAsBitmap = true;
    pjob.addPage(window.htmlLoader, null, poptions);
    pjob.send();
} 
```

我从这个声称有一个工作应用程序的博客复制了它：http: [//anirudhs.chaosnet.org/blog/2008.02.15.html](http://anirudhs.chaosnet.org/blog/2008.02.15.html)

在我自己的代码和博客上的示例代码中，当我运行打印它的函数时，会弹出页面设置框，当我在其中单击确定时，adl 会向控制台输出以下错误：

```
2009-04-28 22:00:33.950 adl[19891:10b]  ERROR 
```

它仍然会继续启动最终的打印对话框，但是当我单击打印时，它只会打印出应用程序窗口的左上角四分之一。我尝试过的两个应用程序都做同样的事情，产生错误然后裁剪输出。

我在 Mac 上使用 CLI 开发工具。我知道 mac 不支持矢量打印，但我选择了 Bitmap 选项。这个错误是什么意思，为什么将打印作业裁剪到前几百个像素 x 和 y ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-08-20T16:38:59.137

我不是专家，并且由于其他原因正在为打印作业而苦苦挣扎，但尝试给出打印矩形（addPage 的第二个参数）

# c# - Changing WCF Service reference URL based on environment

> ID：797539
> 
> 赞同：8
> 
> 时间：2009-04-28T12:06:18.630
> 
> 标签：c#, .net, wcf, web-config

I have a web application that uses a number of WCF Services. I deploy my web application in various environments (dev, UAT, production etc). The URL of each WCF Service is different for each environment. I am using .NET 3.5 and`basicHttpBinding`s

The web application uses a framework to support machine-specific settings in my web.config file. When instantiating an instance of a WCF Service client I call a function that creates the instance of the WCF Service client using the constructor overload that takes the arguments:

```
System.ServiceModel.Channels.Binding binding,
System.ServiceModel.EndpointAddress remoteAddress 
```

In essence the `<system.serviceModel><bindings><basicHttpBinding><binding>` configuration in web.config has been replicated in C# code.

This approach works well.

However, I now have to enhance this approach to work with a WCF service that uses an X509 certificate. This means that I have to replicate the following additional settings in web.config in C# code:

```
<!-- inside the binding section -->
<security mode="Message">
  <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
  <message clientCredentialType="Certificate" algorithmSuite="Default" />
</security>

<behaviors>
  <endpointBehaviors>
    <behavior name="MyServiceBehaviour">
      <clientCredentials>
        <clientCertificate storeLocation="LocalMachine" storeName="My"
          x509FindType="FindByThumbprint" findValue="1234abcd" />
        <serviceCertificate>
          <defaultCertificate storeLocation="LocalMachine" storeName="My"
            x509FindType="FindByThumbprint" findValue="5678efgh" />
          <authentication trustedStoreLocation="LocalMachine"
            certificateValidationMode="None" />
        </serviceCertificate>
      </clientCredentials>
    </behavior>
  </endpointBehaviors>
</behaviors> 
```

I am having some difficulty figuring out how to code this configuration in C#.

Two questions

*   Can anyone recommend a better approach for managing WCF Service reference URLs across multiple environments?
*   Alternatively, any suggestions on how to replicate the above web.config section in C# will be welcomed

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-28T12:25:47.957

One possible approach would be to "externalize" certain parts of your <system.serviceModel> configuration into external files, one per environment.

E.g. we have "bindings.dev.config" and "bindings.test.config", which we then reference in our main web.config like this:

```
<system.serviceModel>
  <bindings configSource="bindings.dev.config" />
</system.serviceModel> 
```

That way, all you need to change from DEV to PROD is this one line of config XML.

Basically, in .NET 2.0 config, any configuration element can be "externalized". You cannot however externalize configGroups (such as "system.serviceModel") directly - you have to be on the "configuration element" level.

Marc

EDIT: OK, so *NO* config edit changes to switch between environments..... In that case, you probably have to dream up a naming scheme, e.g. name your bindings, behaviors and endpoints in such a way, that you can distinguish them at runtime.

Something like:

```
<bindings>
  <binding name="Default_DEV">
    .....
  </binding>
  <binding name="Default_PROD">
    .....
  </binding>
</bindings> 
```

that way, you could build up the name of the element you want (e.g. binding "Default_PROD") from your code and the environment you're running in, and then grab the according config from the config file which contains all the config settings for all environments.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T13:13:15.020

We don't use web.config files at all, we specify everything programmatically and load all configuration from a centralized database.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T09:18:32.680

The following code replicates the configuration in my original question:

```
myClient.ClientCredentials.ClientCertificate.SetCertificate(
    StoreLocation.LocalMachine,
    StoreName.My,
    X509FindType.FindByThumbprint,
    "1234abcd");

myClient.ClientCredentials.ServiceCertificate.SetDefaultCertificate(
    StoreLocation.LocalMachine,
    StoreName.My,
    X509FindType.FindByThumbprint,
    "5678efgh");

myClient.ClientCredentials.ServiceCertificate.Authentication.TrustedStoreLocation = StoreLocation.LocalMachine;
myClient.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = X509CertificateValidationMode.None; 
```

In the production code the two thumbprint values are stored in `appSettings` in the web.config file.

# wpf - WPF ListBox 的填充问题

> ID：797540
> 
> 赞同：3
> 
> 时间：2009-04-28T12:06:20.360
> 
> 标签：wpf, listbox, padding

在我的应用程序中，我为 a 定义了一个 DataTemplate，它`ListBox`是一个带有拉伸边框的网格，并且里面有一个标签。出于某种原因，我得到了以下结果：

[替代文字 http://dl.getdropbox.com/u/829214/q1.gif](http://dl.getdropbox.com/u/829214/q1.gif)

如您所见，`ListBox`边框和项目边框之间有一个填充，并且在选择项目时会标记此“填充”。我应该改变什么属性来解决它？

编辑：

Kent 的回答让我意识到，我的 DataTemplate 中的边框放置在项目容器（列表框项目）内，而不是像我想的那样替换它。最终，我将项目容器样式中的填充设置为 0，我的问题就解决了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T12:11:44.747

由于代理问题，我看不到图像，但我认为您只需要设置容器的背景：

```
<ListBox>
    <ListBox.ItemContainerStyle>
        <Setter Property="Background" Value="White"/>
    </ListBox.ItemContainerStyle>
</ListBox> 
```

如果您希望选择突出显示在填充区域之外，只需在子容器中设置`Background`back 即可。`null`

# javascript - 谷歌地图 - 添加两个标记（方向）

> ID：797541
> 
> 赞同：2
> 
> 时间：2009-04-28T12:06:26.583
> 
> 标签：javascript, google-maps, click, maps

这些天在玩谷歌地图，有一些方向。

我有一张地图，可以在拖放标记时获取方向和地址（反向地理编码）。

如果地图上有两个节点（[http://dev.korebogen.dk/gmap/](http://dev.korebogen.dk/gmap/)）脚本工作正常（点击设置方向） - 但我需要添加一个点击事件，以便我可以放置这两个标记而不是手动硬编码位置，但仍然可以拖动它们 - 或通过新的点击放置新的。但我只需要 A 到 B 标记。

我一直在玩一些点击事件，但我似乎无法完成我正在寻找的东西 - 希望在这里看到一些帮助。非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T15:13:29.817

此代码将允许您单击并放置两个标记，然后您可以使用它们来加载 GDirections，并删除原始标记。请注意，您必须对查询字符串使用以下格式：“from: marker@35,-25 to: marker@-20,15”。

```
var markerArray = [];

var listener = GEvent.addListener(map, "click", function(overlay, latlng) {
    var marker = new GMarker(latlng, { draggable: true });
    map.addOverlay(marker);
    markerArray.push(marker);
    if (markerArray.length > 1) {
        GEvent.removeListener(listener);
        var marker1 = markerArray[0];
        var marker2 = markerArray[1];

        gdir.load("from: marker1@" + marker1.getLatLng() + " to: marker2@" + marker2.getLatLng());

        map.removeOverlay(marker1);
        map.removeOverlay(marker2);
    }
}); 
```

# java - 在java中获取登录用户名

> ID：797549
> 
> 赞同：103
> 
> 时间：2009-04-28T12:08:04.427
> 
> 标签：java, authentication

如何在 Java 中获取用户名/登录名？

这是我尝试过的代码...

```
try{
    LoginContext lc = new LoginContext(appName,new TextCallbackHandler());
    lc.login();
    Subject subject = lc.getSubject();
    Principal principals[] = (Principal[])subject.getPrincipals().toArray(new Principal[0]);

    for (int i=0; i<principals.length; i++) {
        if (principals[i] instanceof NTUserPrincipal || principals[i] instanceof UnixPrincipal) {
            String loggedInUserName = principals[i].getName();
        }
    }

}
catch(SecurityException se){
    System.out.println("SecurityException: " + se.getMessage());
} 
```

`SecurityException`当我尝试运行此代码时，我得到了一个。有人可以告诉我我是否朝着正确的方向前进，并帮助我理解问题。

* * *

## 回答 #1

> 赞同：248
> 
> 时间：2009-04-28T12:11:45.947

```
System.getProperty("user.name"); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2009-04-28T23:35:05.773

在 Unix 中：

```
new com.sun.security.auth.module.UnixSystem().getUsername() 
```

在 Windows 中：

```
new com.sun.security.auth.module.NTSystem().getName() 
```

在 Solaris 中：

```
new com.sun.security.auth.module.SolarisSystem().getUsername() 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-06-05T15:37:38.770

受**@newacct**答案的启发，可以在任何平台上编译的代码：

```
String osName = System.getProperty( "os.name" ).toLowerCase();
String className = null;
String methodName = "getUsername";

if( osName.contains( "windows" ) ){
    className = "com.sun.security.auth.module.NTSystem";
    methodName = "getName";
}
else if( osName.contains( "linux" ) ){
    className = "com.sun.security.auth.module.UnixSystem";
}
else if( osName.contains( "solaris" ) || osName.contains( "sunos" ) ){
    className = "com.sun.security.auth.module.SolarisSystem";
}

if( className != null ){
    Class<?> c = Class.forName( className );
    Method method = c.getDeclaredMethod( methodName );
    Object o = c.newInstance();
    System.out.println( method.invoke( o ) );
} 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2010-02-18T16:48:16.690

System.getProperty("user.name") 不是一个好的安全选项，因为该环境变量可能是伪造的： C:\ set USERNAME="Joe Doe" java ... // 将为您提供 System.getProperty("user. name") 你应该这样做：

```
com.sun.security.auth.module.NTSystem NTSystem = new com.sun.security.auth.module.NTSystem();
System.out.println(NTSystem.getName()); 
```

JDK 1.5 及更高版本。

我在小程序中使用它，并且必须对其进行签名。 [信息来源](http://www.rgagnon.com/javadetails/java-0048.html)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-11-18T15:53:51.650

使用 JNA 很简单：

```
String username = Advapi32Util.getUserName();
System.out.println(username);

Advapi32Util.Account account = Advapi32Util.getAccountByName(username);
System.out.println(account.accountType);
System.out.println(account.domain);
System.out.println(account.fqn);
System.out.println(account.name);
System.out.println(account.sidString); 
```

[https://github.com/java-native-access/jna](https://github.com/java-native-access/jna)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-06-01T13:30:06.843

' *set Username="Username" '*是一个临时覆盖，仅在 cmd 窗口仍在运行时才存在，一旦它被杀死，变量就会失去价值。所以我认为

> System.getProperty("user.name");

仍然是一个简短而精确的代码。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-11T14:11:28.840

`System.getenv().get("USERNAME");` - 适用于窗户！

在环境属性中，您可以获得有关计算机和主机的信息！我再说一遍！在 WINDOWS 上工作！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-14T12:46:42.440

以下是仅适用于 WINDOWS 的解决方案

在应用程序（如 Tomcat）作为 Windows 服务启动的情况下，System.getProperty("user.name") 或 System.getenv().get("USERNAME") 返回启动服务的用户，而不是当前登录的用户名。

同样在 Java 9 中，将无法访问 NTSystem 等类

所以Windows的解决方法：您可以使用*wmic*，因此您必须运行以下命令

```
wmic ComputerSystem get UserName 
```

如果可用，这将返回表单的输出：

```
UserName
{domain}\{logged-in-user-name} 
```

注意：windows 需要使用 cmd /c 作为前缀，下面以一个粗略的程序为例：

```
 Process exec = Runtime.getRuntime().exec("cmd /c wmic ComputerSystem get UserName".split(" "));
    System.out.println(exec.waitFor());
    try (BufferedReader bw = new BufferedReader(new InputStreamReader(exec.getInputStream()))) {
        System.out.println(bw.readLine() + "\n" + bw.readLine()+ "\n" + bw.readLine());
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-01T15:57:44.347

我在linux centos中测试过

```
Map<String, String> env = System.getenv();   
for (String envName : env.keySet()) { 
 System.out.format("%s=%s%n", envName, env.get(envName)); 
}

System.out.println(env.get("USERNAME")); 
```

# c# - 如何从 DateTime 数据类型中获取时间值

> ID：797553
> 
> 赞同：4
> 
> 时间：2009-04-28T12:08:57.560
> 
> 标签：c#

我有 DateTime 变量，我只需要从该变量中获取时间值。

我怎么能在 C# 中做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-28T12:10:53.843

检查对象`TimeOfDay`的属性`DateTime`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-28T12:11:11.893

`dt.TimeOfDay`将时间作为`TimeSpan`对象返回。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-28T12:17:27.340

或者，您也可以使用字符串格式来很好地获取输出

```
string.Format("{0: hh:mm:ss}", DateTime.Now) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-28T12:31:56.320

你可以试试这个......

```
someDateTime.ToString("hh:mm:ss"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-28T12:19:04.137

如果您需要时间的字符串表示，您可以使用：

```
dt.ToShortTimeString()
dt.ToLongTimeString() 
```

# git - 为什么 git 会留下修改过的文件？如何调整我的工作流程以做得更好？

> ID：797562
> 
> 赞同：6
> 
> 时间：2009-04-28T12:10:03.363
> 
> 标签：git, version-control, workflow, patch, git-patch

这将是一个长的，但我希望你能忍受我。

我正在尝试使用 git 将我团队的源代码置于版本控制之下。在尝试找到适合我的不同方法后，我最终决定使用`git format-patch`功能。FWIW，该产品是在 Windows 中运行的 ASP.NET Web 应用程序，我目前正在使用*msysgit*。

**背景：**
我有一个包含所有 aspx 文件的登台服务器（镜像生产服务器）。然后我在我的根文件夹中使用*init-db*创建了一个 git repo并`git add .`跟踪所有文件。

为了让我在我的笔记本电脑上有一个本地副本，我实际上从登台服务器上压缩了“.git”文件夹并将其通过 FTP 传输到我的本地计算机。将其重命名为“staging.git”并`git clone staging.git webappfolder`针对我的开发做了一个。

在为 feature1 和 feature2 做了 2 次提交之后，是时候将更改应用回登台服务器了。我做了一个`git format-patch -2`输出到文件`0001blah.patch`和`0002blah.patch`.

然后将这两个补丁文件发送到登台服务器，我`git am 0001blah.patch`在登台服务器本身上做了一个。做一个`git log`展示提交经过。但是当我做一个`git status`，它显示`Changed but not updated: modified: file1.aspx`。

这到底是什么意思？我也尝试过做 a`git apply 0001blah.patch`但我得到的只是一个`error" patch failed: file1.aspx: patch does not apply`.

我的工作流程有问题吗？有关正确方法或帮助的任何见解都将非常有帮助。同样，修补模型现在对我们来说是最可行的，因为我们不会很快设置 SSH 服务器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-28T13:23:37.150

我刚试过这个：

```
rm -rf clone?

# clone 1 is the working copy
mkdir clone1
(
    cd clone1
    git init
    echo foo >> file1
    git add file1
    git commit -m "Initial state"
)

# clone 2 is the staging repo
git clone clone1 clone2

# create patches
(
    cd clone1
    git tag staging # tag to track what's in staging

    echo feature1 >> file1
    git add file1
    git commit -m "Feature 1"

    echo feature2 >> file1
    git add file1
    git commit -m "Feature 2"

    rm *.patch
    git format-patch staging
)

# apply patches
(
    cd clone2
    git am ../clone1/*.patch
    # Cygwin/msysgit line ending weirdness when patching. Aborting and
    # reapplying clears it up.
    git am --abort 
    git am ../clone1/*.patch
    git log
    git status
) 
```

如果不执行两次 am ，补丁没有明确应用，但我最终在克隆 2 中得到了一个干净的工作目录，文件 1 的内容正确。因此，您的工作流程本身似乎没有任何问题。

Git apply 只会更新工作树，不会执行提交。

也就是说，我不会使用 git 存储库进行暂存。我的工作流程可能会创建（或不）开发存储库的发布分支/分支，并且只需部署完整的干净副本。

对于暂存环境的增量更新，只需`git tag staging`在发布分支中使用“git diff staging..HEAD > update.patch”到电子邮件，标准的 unix “patch -p1”应用它应该可以工作。那是除非您真的需要在登台服务器上实际拥有更改历史记录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T13:11:04.010

你试过一个

```
git am -3 
```

? 从[git-am 文档](http://www.kernel.org/pub/software/scm/git/docs/git-am.html)，

```
-3
--3way

When the patch does not apply cleanly, fall back on 3-way merge 
```

* * *

注意：从[Git Google Summer of Code 2009](http://git.or.cz/gitwiki/SoC2009Ideas#head-b58bf34ec32e086d9daadaa3930aae00cd745810)中，有一个项目“教 git-apply the 3-way merge fallback git-am know”：

> `git-apply`修补文件时，文件可能无法干净地修补。在这种情况下，`git-apply`当前拒绝补丁。
> 如果从那里调用它，`git-am`则尝试通过以下方式进行 3 路合并：
> 
> *   从补丁中获取“index ...”数据并
> *   构建一棵临时树，
> *   应用补丁，然后
> *   将临时树合并到当前分支。
> 
> 由于各种原因，最好直接在 git-apply 内部进行整个临时树舞，因为它可以说 git-sequence 的“应用”命令，通过减少分叉来加速 git-am 处理等

# php - Zend_Search_Lucene 在索引期间崩溃

> ID：797570
> 
> 赞同：0
> 
> 时间：2009-04-28T12:12:01.033
> 
> 标签：php, zend-framework, lucene

我想为我的网页创建搜索引擎，但是在服务器上建立索引期间它崩溃并出现错误：

```
Warning: opendir(/admin/lucene/) [function.opendir]: failed to open dir: Too many     open files in /admin/includes/Zend/Search/Lucene/Storage/Directory/Filesystem.php on line 159

Warning: readdir(): supplied argument is not a valid Directory resource in /admin/includes/Zend/Search/Lucene/Storage/Directory/Filesystem.php on line 160

Warning: closedir(): supplied argument is not a valid Directory resource in /admin/includes/Zend/Search/Lucene/Storage/Directory/Filesystem.php on line 167

Fatal error: Ignoring exception from Zend_Search_Lucene_Proxy::__destruct() while an exception is already active (Uncaught Zend_Search_Lucene_Exception in /admin/includes/Zend/Search/Lucene/Storage/File/Filesystem.php on line 66) in /admin/test.php on line 549 
```

我正在使用最新版本的 ZF。是否有针对此类错误的代码解决方案 - 我在 localhost 上运行脚本并且效果很好。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T18:30:31.247

似乎问题在于索引中的大量段。

你能检查一下索引文件夹包含多少文件吗？

有两种方法可以解决这个问题： a) 更频繁地优化索引。b) 使用另一个 MaxBufferedDocs/MergeFactor 参数。有关详细信息，请参阅[Zend_Search_Lucene 文档](http://framework.zend.com/manual/en/zend.search.lucene.index-creation.html#zend.search.lucene.index-creation.optimization)。

如果没有帮助，请为该问题注册 JIRA 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T12:20:38.250

PHP 已经达到了一次可以打开的文件数量的限制，这似乎是在 php.ini 中更改的一个选项，可能是操作系统（配额）限制，或者您可以告诉索引器放慢速度并没有那么多文件同时打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T15:56:40.400

这绝对是 Linux/内核强加的限制。在您的机器上以 root 身份使用以下命令：

```
cat /proc/sys/fs/file-nr 
```

返回值定义为：

1.  分配的文件描述符总数
2.  总空闲分配的文件描述符
3.  最大打开文件描述符

我还要猜测一下，说您在共享主机上。如果是这样的话，我想这种问题可能会经常出现。

最后，下面的文章提供了大量关于 Linux 和打开文件描述符的信息，即使它有点过时了。

[http://www.netadmintools.com/art295.html](http://www.netadmintools.com/art295.html)

# c++ - C++ 模板资源

> ID：797574
> 
> 赞同：4
> 
> 时间：2009-04-28T12:13:24.977
> 
> 标签：c++, templates

我是 C++ 模板的新手，发现很难理解和调试它们。有什么好的资源可以同时做这两个/任何一个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-28T12:16:45.780

我推荐 Vandevoorde 和 Josuttis 的优秀书籍[C++ Templates - The Complete Guide](http://www.josuttis.com/tmplbook/tmplbook.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-28T12:25:27.880

[Alexandrescu](http://erdani.org/publications/)是一个模板向导。他有很多文章（其中许多可以在他的网站和其他网站上免费获得）和一些书籍。

Boost [Documentation](http://www.boost.org/doc/)和[Boost Cookbook](http://www.boostcookbook.com/)是一个很好的网站，一旦您对模板感到满意并想从 Boost 开始学习。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T12:22:35.000

模板只是一种减少开发类时需要编写的代码量的方法。

例如 STL 向量

```
std::vector<int> intList;
std::vector<float> floatList; 
```

这将导致编译器实际上在幕后创建两个类，类似于复制和粘贴代码但将所有对 int 的引用替换为 float 的情况。

如果没有模板，您将需要为要处理的每种类型创建一个矢量类。类有更复杂的用途，但这是最容易使用、创建和理解的一种。

一旦编译了这两组代码`vector<int>`，`vector<float>`它们就完全分开了，但是 IDE 在调试时会单步执行模板类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T13:38:54.303

我有两个快速提示可能会在将来为您节省一些问题。

**模板必须在头文件中定义和实现，因为它们是在编译时翻译/创建的**

如果您有以下代码：

```
// Foo.h
template <typename T>
class Foo
{
    ...
};

// Bar.cpp
#include "Foo.h"
void func()
{
    Foo<int> fooInt;
    Foo<double> fooDouble;
} 
```

处理 Bar.cpp 文件时，编译器将“创建” Foo 类的新定义，其中每个 T 替换为 fooInt 实例的 int 类型，以及 Foo 类的新定义，每个 T 替换为 double 类型对于 fooDouble 实例。

简而言之，C++ 不支持模板类，编译器模拟它们在编译时替换类型并创建普通类。所以，fooInt 和 fooDouble 的编译类型是不同的。

因为它们是在编译时翻译的，而不是单独编译的，所以它们*必须*在头文件中定义和实现。

如果您将模板类实现为普通类（头文件和源文件），编译器（实际上是链接器）抛出的错误是没有实现方法（这是因为源文件被忽略）。

**您仍然可以创建前向声明以避免循环依赖**

只是您必须像这样转发声明它们：

```
template <typename T>
class Foo; 
```

而且，与正常的前向声明一样，您必须确保包含所有必要的标题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-28T12:23:10.600

它们可供您根据需要进行扩展和修改。请记住，它是一个模板，而不是一个解决方案。

高温高压

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-02-25T16:57:38.830

这是一篇非常好的和近乎简洁的文章来了解 C++ 模板
[http://www.codeproject.com/Articles/257589/An-Idiots-Guide-to-Cplusplus-Templates-Part](http://www.codeproject.com/Articles/257589/An-Idiots-Guide-to-Cplusplus-Templates-Part)

我将在这里带来重要的部分：

**1.功能模板：**

简单的函数模板：

```
template<class TYPE>
void PrintTwice(TYPE data)
{
    cout<<"Twice: " << data * 2 << endl;
} 
```

请注意，“TYPE”可以是任何其他有效名称。

> 最好使用能反映类型参数含义的名称，并提高代码的可读性。

现在你可以这样称呼它：

```
PrintTwice(5.5);//TYPE is 'float'
PrintTwice(5);//TYPE is 'int' 
```

您可以强制编译器为您显式传递的类型实例化函数：

```
PrintTwice<double>(5); 
```

如果您不传递任何类型，编译器会确定类型是什么。

你可以有多个参数的模板和（可选）返回类型相同的类型：

```
template<class T>
T Add(T n1, T n2)
{
    return n1 + n2;
} 
```

但请注意，您不能例如传入`n1`和传入双倍！两个参数应该是相同的类型，并且返回类型也是那个类型。`int``n2`

如果你想要一个可能不同类型参数的模板函数：

```
template<class T1, class T2>
double Add(T1 t1Data, T2 t2Data)
{
     return t1Data + t2Data;
} 
```

并像这样使用它：

```
cout<<Add(5,7.0);//T1=int T2=double
cout<<Add(5.5,7);//T1=double T2=int
cout<<Add<double,double>(5,7);//T1=double T2=double by passing types explicitly 
```

当函数模板采用模板类型，但不是来自其函数参数时，例如：

```
template<class T>
void PrintSize()
{
   cout << "Size of this type:" << sizeof(T);
} 
```

您不能简单地调用这样的函数模板：

```
PrintSize(); 
```

由于这个函数模板需要模板类型参数说明，编译器不能自动推导出来。正确的调用是：

```
PrintSize<float>(); 
```

**2.class模板：**

定义几乎相似：

```
template<class T>
class Item
{
    T Data;
public:
    Item() : Data( T() )
    {}

    void SetData(T nValue)
    {
        Data = nValue;
    }

    T GetData() const
    {
        return Data;
    }

    void PrintData()
    {
        cout << Data;
    }
}; 
```

但是在使用它时，您应该明确指定类型：

```
Item<int> item1; 
```

棘手的部分是，您不能在头文件中实现声明，并在一个或多个源文件中实现各自的实现。（请参阅文章了解原因）

类模板也允许一些非类型模板参数：

```
template<class T, int SIZE>
class Array
{
 static const int Elements_2x = SIZE * 2;
void DoSomething(int arg = SIZE); 
// Non-const can also appear as default-argument...
private:
   T TheArray[SIZE];
}; 
```

还有很多其他的部分和更多的解释，我不能带到这里。

我建议你花几个小时阅读那篇文章和那篇文章的第二部分。即使你认为你知道模板在 C++ 中是如何工作的。

# c - 在 OS X 上通过 ucontext 访问 EIP 和 EBP

> ID：797575
> 
> 赞同：4
> 
> 时间：2009-04-28T12:13:38.097
> 
> 标签：c, linux, macos, freebsd

我正在尝试将一个工具移植到 osx，该工具旨在在 linux 和 freebsd 上运行。程序中存在需要访问 EIP 和 EBP 的情况。这是通过 ucontext 完成的。

因此，我为 __APPLE__ 添加了一个案例，以便对 ucontext 结构进行适当的访问。

```
 9887 #if defined(__FreeBSD__)
 9888         *paddr = uc->uc_mcontext.mc_eip;
 9889 #elif defined(__dietlibc__)
 9890         *paddr = uc->uc_mcontext.eip;
 9891 #elif defined(__APPLE__)
 9892         *paddr = uc->uc_mcontext.ss.eip;
 9893 #else
 9894         *paddr = uc->uc_mcontext.gregs[REG_EIP];
 9895 #endif 
```

但是 uc->uc_mcontext.ss.eip 不能编译。不确定如何从 ucontext 访问 EIP。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-28T12:25:30.953

OS X 10.5 中的命名方案似乎发生了变化，它应该是`uc->uc_mcontext->__ss.__eip`. 在以后的版本中，这是`uc->uc_mcontext->__ss.__rip`针对 x86_64 的。

通过快速[谷歌搜索](http://www.google.co.il/search?hl=en&client=firefox-a&rls=com.ubuntu%3Aen-US%3Aunofficial&hs=sxR&q=uc_mcontext+osx&btnG=Search&meta=)找到，[参考](http://gperftools.googlecode.com/svn/trunk/m4/pc_from_ucontext.m4)： [1、2](http://www.winehq.org/pipermail/wine-cvs/2007-March/031021.html)

# java - 什么是struts中的switch action和forwardAction

> ID：797576
> 
> 赞同：0
> 
> 时间：2009-04-28T12:13:58.143
> 
> 标签：java, struts

什么是struts中的switch action和forwardAction

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-29T02:05:41.747

在网上搜索时发现了一篇博客文章。这是[链接](http://thinkstruts.blogspot.com/2008/06/advanced-actions-in-struts-difefrences.html)。

# c++ - 从文件读取后的奇怪输出

> ID：797582
> 
> 赞同：0
> 
> 时间：2009-04-28T12:17:15.093
> 
> 标签：c++

使用此代码，以下执行会产生奇怪的结果：

```
C 100
R
W 
```

文本文件的第一行定义了要从中读取的元素的数量，它包含一些小于 15 的值，但是每次我运行它时，我的数组中的第一个值总是打印为 87（'W 的 ASCII 值'）。如果我将“W”功能更改为“X”，那么数组中的第一个结果是 88。

```
#include <iostream>
#include <fstream>

using namespace std; 

int arrayLength;

class ELEMENT
{
    public:
        int key;
};

class HEAP
{
    public:
        int capacity;
        int size;
        ELEMENT H [];
};

HEAP initialize(int n)
{
    HEAP h;
    h.capacity = n;
    h.size = 0;
    return h;
}

void buildHeap(HEAP &h, ELEMENT *a)
{
    h.size = arrayLength;
    for (int i = 1; i <= arrayLength; i++)
    {
        h.H[i] = a[i];
    }

    for (int i = h.size/2; i >= 1; i--)
    {
        // HEAPIFY HERE
    }
}

void printHeap(HEAP &h)
{
    cout << "Capacity:\t" << h.capacity << endl;
    cout << "Size:\t\t" << h.size << endl;
    cout << "|";
    for (int i = 1; i <= h.size; i++)
    {
        cout << " ";
        cout << h.H[i].key << " |";
    }
    cout << endl;
}

int main()
{
    char c;
    int val;
    HEAP h;

    while (c != 'S')
    {
        cin >> c;
        switch (c)
        {
            case 'S':
                break;
            case 'C':
                cin >> val;
                h = initialize(val);
                break;
            case 'W':
                printHeap(h);
                break;
            case 'R':
                {
                    ifstream infile;
                    infile.open("HEAPinput.txt");
                    infile >> arrayLength;
                    ELEMENT* a = new ELEMENT[arrayLength];
                    for (int i = 1; i <= arrayLength; i++)
                        infile >> a[i].key;
                    infile.close();
                    buildHeap(h, a);
                }
                break;
        }
    }

    return 0;
} 
```

它是在 Unix 服务器上使用 g++ 编译的。

编辑：澄清：使用具有以下内容的文本文件（空格=换行）：

```
12 9 10 11 12 8 7 6 5 4 3 2 1 
```

输出是：

```
Capacity: 100

Size: 12

| 87 | 10 | 11 | 12 | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 
```

所以除了第一个元素之外它正在工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T12:21:52.133

随你怎么想

```
 ELEMENT H []; 
```

正在做，它可能不是。C++ 不支持动态数组 - 您需要使用 std::vector 类。

顺便说一句，C++ 按照惯例使用大写来命名预处理器宏和常量。您应该使用混合大小写来命名您的类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T12:34:53.023

除了错误地使用数组之外：将 initialize()、buildHeap() 和 printHeap() 设为堆的成员函数也不错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T12:23:29.883

可能是因为当你说

```
cout << h.H[i].key << 
```

H[] 是一个 ELEMENT 数组，键是一个 int。如果在 cout 语句中 key 是 char 或强制转换为 char，您将看到 int 的 char 表示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T12:28:24.067

[尼尔说了什么](https://stackoverflow.com/questions/797582/c-strange-output-after-reading-from-a-file/797597#797597)。此外，C++ 中的数组是从零开始的。因此，例如您的循环`main()`：

```
for (int i = 1; i <= arrayLength; i++) 
```

应该是：

```
for (int i = 0; i < arrayLength; i++) 
```

如果您使用基于 1 的数组，则二进制堆构造的算法可能更容易实现——在这种情况下，您需要分配足够的空间：

```
ELEMENT* a = new ELEMENT[arrayLength + 1];    // Note the "+ 1" 
```

目前，最后一次循环迭代正在写入数组末尾。

# c++ - 编译器何时可以推断模板参数？

> ID：797594
> 
> 赞同：36
> 
> 时间：2009-04-28T12:21:11.667
> 
> 标签：c++, templates

有时有效，有时无效：

```
template <class T> 
void f(T t) {}

template <class T>
class MyClass {
public:
  MyClass(T t) {}
};

void test () {
  f<int>(5);
  MyClass<int> mc(5);
  f(5);
  MyClass mc(5); // this doesn't work
} 
```

有没有办法破解上面的例子？即强制编译器从构造函数参数推断模板参数。

将来会解决这个问题，还是有充分的理由不解决？

编译器可以推断模板参数的一般规则是什么？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2009-04-28T12:28:01.947

当参数类型可以从模板参数中推断出来时，可以为*函数模板推断模板参数*

所以这里可以推断：

```
template <typename T>
void f(T t);

template <typename T>
void f(std::vector<T> v); 
```

但不是在这里：

```
template <typename T>
T f() {
  return T();
} 
```

而不是在*类模板*中。

因此，解决问题的通常方法是创建一个包装函数，类似于标准库函数`std::make_pair`：

```
 template <class T>
    class MyClass {
    public:
        MyClass(T t) {}
        void print(){
            std::cout<<"try MyClass"<<std::endl;
        }
    };

    template <typename T>
    MyClass<T> MakeMyClass(T t) { return MyClass<T>(t); } 
```

然后调用`auto a = MakeMyClass(5);`实例化类。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-28T12:30:56.167

阅读[模板参数推导](http://accu.org/index.php/journals/409)（和[ADL 或 Koenig 查找](http://en.wikipedia.org/wiki/Argument_dependent_name_lookup)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-25T18:04:54.893

从 C++20 开始，可以使用以下方法[推断函数参数的](https://stackoverflow.com/a/60355539/975097)类型`auto`：

```
#include <iostream> 
#include <string>

auto print_stuff(auto x, auto y) 
{ 
    std::cout << x << std::endl;
    std::cout << y << std::endl;
}

int main() 
{ 
    print_stuff(3,"Hello!");
    print_stuff("Hello!",4);
    return 0; 
} 
```

# html - 展开 DIV 内的图像

> ID：797595
> 
> 赞同：7
> 
> 时间：2009-04-28T12:21:37.313
> 
> 标签：html

调整大小后如何将图像扩展为与 div 相同的高度？或者如何用颜色填充图像留下的空白？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-28T12:36:45.873

我认为这会给你你想要的结果：

```
<style>
    div {
    width:50px;
    height:100px;
    }

    div img {
    height:100%;
    }
</style>
<div>
    <img src='path/to/img.gif' />
</div> 
```

图像现在将填充到容器 div 的高度，并根据其纵横比缩放其宽度。这可能会导致图像超出容器 div 的预期宽度边界，但要小心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-29T21:01:55.073

在 CSS3 中有一种方法可以做到这一点：

```
div {background-image: url(path/to/image); background-size: 100%} 
```

background-size 属性仅在较新版本的 Safari 和 Opera 中受支持。对于其他浏览器，您可以使用 background-color 属性用颜色填充图像周围的空白，如下所示：

```
div {
  background-image: url(path/to/image);
  background-size: 100%;
  background-color: #000000;
  } 
```

或者，简而言之：

```
div {background:#000000 url(path/to/image) no-repeat; background-size:100%} 
```

使用此代码将导致图像在支持 CSS3 的浏览器（最新的 Opera、Safari 和可能的 Firefox）中拉伸。较旧的浏览器和 IE 将在图像周围的空白处填充指定的背景颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T12:24:04.453

为容器 div 设置背景颜色

# startup - 由软件开发人员驱动的初创公司常见的陷阱是什么？

> ID：797596
> 
> 赞同：44
> 
> 时间：2009-04-28T12:21:51.807
> 
> 标签：startup

我和一个朋友创建了一家初创公司，但我们都是软件开发人员。我们很快意识到我们将不得不处理和理解所有错综复杂的业务。

是否有任何资源可以帮助我们避免非商业人士遇到的常见问题？您如何在创建产品与保持切合实际的目标以缩短上市时间之间取得平衡。

这就像您需要摘下程序员的帽子并戴上商务帽，反之亦然。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2009-04-28T15:01:11.250

我的软件业务处于一个非常非常小的利基市场，主要集中在硬盘驱动器磁层的计算机辅助设计（www.micromagnetica.com - 请注意，我正在关闭我的业务，​​因为潜在的数量客户已经萎缩到使业务无法生存的地步。网站反映了这一点）。我做生意已经10年了，做得很好。我的竞争是一系列商业和开源程序（主要是大学或政府赞助的），所以，虽然市场很小，但我能够创造出一种畅销的独特产品。

陷阱：

1.  **将您的需求置于客户之上**- 客户至上 - 始终倾听客户的需求，并确保您的开发遵循他们的需求而不是您的需求。每个程序员都有一份他们想要学习或做的事情的清单。不要将此列表用作您的开发指南，除非它可以解决问题或帮助创建客户想要/需要的功能。这一点可以成就或破坏您的公司。

2.  **不澄清你的商业想法**- 制定商业计划 - 这将有助于澄清你在做什么。阅读[Guy Kawasaki 的《创业的艺术》](https://rads.stackoverflow.com/amzn/click/com/1591840562)一书，了解创业的商业视角。如果你需要钱，那么你可以用它来帮助从天使投资者或风险投资家那里获得融资。否则，它将有助于澄清你在做什么。

3.  **不推销自己**- 执行以下操作：

    *   (a) 为您的公司找到一个好名称并保护您的域名。即使公司名称的错误选择不会杀死你（我的第一家公司被称为“Euxine Technologies”，它并没有比这更糟），但我的产品自行销售并且不受名称的阻碍。

    *   (b) 尽快建立一个对您的产品有良好描述的网站。谷歌最终会找到您，流量将开始流入您的网站。

    *   (c) 一旦你有了一个工作原型，就创建一个机制，潜在的热情客户可以下载它并开始帮助你发现错误。您可以将其设为限时完整版或不限时限时版。我已经完成了这两项工作。确保用户知道它是该软件的 beta（或 alpha）版本。创建 Beta 用户关系最重要的部分是他们会要求您提供您没有考虑过的功能，这可能会使开发沿着一条原本无法预见的（且有利可图的）路径进行。这也将为您提供一种掌握潜在用户脉搏的方法。

    *   (d) 如果您的产品适用于特定行业，请参加相关会议
        （获得展位或与潜在客户联系）并通过演示、传单和分发您的软件的 CD 上的免费有限版本来销售您的产品。

4.  **不给自己打上品牌**- 想出一个标志，你将用它来识别你和你的产品。此徽标将显示在您的网站、商务文具和名片上。

5.  **不管理你的资金**——最初在资金开始流入之前会有很长一段时间。对你的种子资金要非常节俭。在您认为软件准备好出售的那一刻，钱不会开始到来。从人们对您的软件表现出兴趣到销售开始之间可能至少有几个月的时间差。这取决于您的软件成本。软件成本越高，时滞越长。

    一旦您开始进行销售，收入的多少就会出现季节性变化。请始终尝试将至少 6 个月的钱存入银行，以支付工资和运营成本。

6.  **不知道您的客户是谁**- 一旦您开始销售软件，请确保您知道您的客户是谁 - 他们可能与您认为的不同。当我创办我的软件公司时，我认为我的客户都是从事磁层研究的研发工程师。一段时间后，我发现我的大多数用户都属于这个群体的子集，他们不会编程，但了解软件背后的物理原理。

7.  **不以专业的方式行事**- 在与客户互动时保持专业 - 以专业的方式行事和着装。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2009-04-28T12:25:47.677

*   创造产品是因为技术很酷，而不是因为有市场。

*   创造产品是因为你想要它，而不是因为有市场。

*   创建一个列出产品功能而不是好处的网站。

*   假设 Google AdWords 上的广告对您有用。

*   “建造它，他们就会来。”

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2009-04-28T12:27:21.807

创业俱乐部的第一条规则：每个创业公司都应该有书呆子和商人。

大多数计算机书呆子对如何经营企业或市场以及销售产品一无所知。您的高层应该至少有一个商人（但要像鹰一样看着他们，以免他们偷走您的劳动成果:-)。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-04-28T18:26:38.527

1.  不了解/不知道您在与谁竞争。
2.  不了解/不了解您的目标市场。
3.  在设计阶段不包括您的客户。
4.  没有花足够的时间收集产品需求。
5.  花太多时间收集产品需求（分析瘫痪）。
6.  营销不够。
7.  拥有一支强大的团队，这样您就可以信任您雇用的人来完成他们的工作。
8.  准备好为成功做任何事情（当然是道德上的）。
9.  没有方向（商业计划）。
10.  没有目标或无法达到的目标。
11.  不了解现金流。由于冲突流问题，有大量盈利的企业没有成功。仅仅因为您卖出了 1000 台并不意味着您有能力支付员工和/或其他费用。正如我之前听到的“现金为王！”

这些只是可能会妨碍您的一些事情。我建议不仅要担心业务方面，还要担心软件项目失败的原因是什么。关于如何收集需求、生成高质量代码、测试代码（例如 TDD）、项目方法（例如 XP、敏捷……）以及更多主题的书籍有很多。

如果您无法交付产品或无法交付无法解决问题的产品，您的创业公司可能会失败。

最后，如果你不定义成功意味着什么，就很难判断成功。是继续经营，在 1 年内将您的收入翻一番，突破 250,000 美元大关，还是将您的员工人数翻一番。您需要定义不仅在您的业务中，而且在您创建的每个产品中取得成功意味着什么。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-04-28T12:25:59.050

做你的作业。如果你在美国，小企业协会是寻找资源的好地方。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-04-28T13:07:27.093

努力成为所有人的一切。

通常在试图创造一种吸引所有人的产品时，产品变得如此普遍，以至于没有人会对此感到兴奋。

在我看来，最好将您的产品定位到具有非常特定需求的人群的利基社区，然后比其他任何人都更好地满足该需求。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-04-28T12:45:06.867

这是一个常见的陷阱，但不仅限于小公司：管理层缺乏多样性。重要的多样性是*经验*的多样性。我见过几家遭受这种陷阱困扰的小公司。他们通常可以在一段时间内做出正确的决定。问题是他们几乎不可能知道他们什么时候做出了错误的决定。这并不一定意味着他们会失败，它只是在不同程度上削弱了他们。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-04-28T12:51:39.877

公司发展——在软件行业，你可以在很短的时间内赚很多钱（相对于其他行业）。大多数人往往变得贪婪，想要更多的钱，所以接受更多的项目并雇用很多人——但他们不开发他们的基础设施、他们的通信线路、他们的责任、他们的开发人员等。因为它需要钱，而你不需要'没有直接的好处，你失去了你冷静的“扁平的层次结构——每个人都是老板”的形象（无论如何都不是这样） . 所以请留意那个。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-04-28T17:58:21.857

闪亮的！不要让开发人员在互联网上追逐引起他们注意的最新闪亮事物。让开发人员专注于公司的核心战略需求，而不是因为他们的兴趣被其他事物所吸引而将您的产品转向不同的方向。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-04-28T18:10:43.137

[OnStartups](http://onstartups.com/)上有一个充满技巧的博客。最近的一些相关帖子：[向内裤侏儒](http://onstartups.com/home/tabid/3339/bid/8608/Startup-Lessons-From-The-Underpants-Gnomes-PROFIT.aspx)学习：拥有商业模式，这里有[一些营销技巧](http://onstartups.com/home/tabid/3339/bid/9008/Startup-Marketing-Tactical-Tips-From-The-Trenches.aspx)。作者本人就是一名开发企业家，这听起来正是您的观点。

更新：Dharmesh 刚刚为这类问题建立了一个 StackOverflow 支持的网站：http: [//answers.onstartups.com/](http://answers.onstartups.com/)

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2009-04-28T13:03:39.460

确保您*了解*您的目标用户及其需求。

我在一家非常酷的初创公司工作，我们认为我们有一个很棒的产品，但是我们无法生成那个很棒的用户故事来真正展示我们的产品如何满足他们的一些需求。这个缺点使他们无法以令人兴奋的方式与我们的产品“联系”。

在我看来，这种脱节是因为我们不了解我们的目标用户，也没有像我们应该了解的那样了解他们的问题。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-04-28T15:10:15.427

销售销售和更多销售。加上愿意在代码“完美”之前发布并逐步发布功能。关于这个主题和这个网站实际上有一个非常好的 Hanselminutes ( [http://www.hanselminutes.com/default.aspx?showID=152](http://www.hanselminutes.com/default.aspx?showID=152) )

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-04-28T19:14:10.520

团队中没有一些具有不同想法/背景/个性的人。

如果每个人一直都在互相达成一致意见，并且没有任何摩擦，那么您将无法完成任何事情。哦，你可能暂时没事，但如果每个人都这么想，当你被卡住时（你会的），你就会被卡住。当您在滚动时，曲线球会分散注意力。当您陷入车辙或靠墙时，曲线球可以让您朝着不同的方向前进。这可能是错误的方向，但至少它是**一个**方向。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-04-30T06:33:48.223

没有足够的营销知识和经验。虽然卖好产品很容易。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-09-24T16:14:45.187

问题是我所说的 IBM OS 2 - 天才打造了一款非常好的产品，但该产品的营销效果不佳，也没有为有效地按摩买家的耳朵而量身定制。我鄙视商业工作者的一些事情，比如短期思维，偏爱快速而肮脏的开发人员而不是缓慢但伟大的开发人员和其他问题——但他们才是赚钱并将软件推向客户手中的人。如果一家初创公司没有能够有效地解决业务问题的开发人员，那么它就需要找一个可以做到的人。未能做到这一点使 Windows 95 成为热门，IBM 的 OS 2 成为恐龙。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-10-10T23:27:57.200

开发产品时没有考虑特定的市场。我工作的几个地方试图做任何事情，导致在一个市场上没有足够的努力首先获得盈利，因此业务仍然可以运行。

[微型 ISV 链接](http://www.dotnetcalgary.com/Default.aspx?tabid=214&forumid=3&threadid=107&scope=posts)有一些链接显示在我不久前参加的绝密演示中，这些链接也可能有用。

# c# - SSRS：具有两个数据源的主从报表

> ID：797601
> 
> 赞同：8
> 
> 时间：2009-04-28T12:22:21.773
> 
> 标签：c#, reporting-services, report, objectdatasource

我有两个本地数据源可以推送到报告中。工作没问题。但是如何设置报告？一个数据源包含员工列表以及有关他们的信息。另一个包含每个员工的大量工作时间。

我想为员工列表使用一个表格，然后在每个员工下方的工作时间（以及他们的工作时间）下使用另一个表格。

这甚至可能吗？我必须使用子报告吗？我是否必须将它们合并到一个数据源中？=/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-01T15:55:38.647

据我所知，如果不使用子报表，就不可能将一个数据集嵌套在另一个数据集中。

这意味着您需要做以下两件事之一：

1.  将您的两个数据源重构为一个数据源。例如，在员工和每个员工的工作时间之间执行联接。然后，您可以使用 Table 对象的分组属性以您想要的方式格式化列表。

2.  如果连接两个数据源不切实际，您可以使用子报表来完成您想要的操作。创建一个包含工作时间数据源的子报表，并为其提供当前员工的参数。按此参数过滤工作时间。

    在您的父报表中，您可以将子报表放在列表中，并将当前行的员工 ID 作为参数传递。

    请注意，使用子报表会涉及一些格式问题。在大多数情况下，我已经能够解决它们，但首选方法肯定是上面的第一名。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-04T15:10:47.793

添加新答案以确保为其发送通知。

使用子报表是最简单的方法。您可以简单地将子报表拖放到表格单元格上，它将填充该单元格的内容区域。右键单击子报表将允许您编辑子报表的参数。与 SSRS 中的大多数值一样，可以将参数设置为使用表中字段的表达式。

在子报表中，只需过滤您的结果以仅显示与作为参数传入的员工关联的记录。

您可以采取的另一条路线是使用联接合并您的两个数据源。这将为您提供如下数据：

```
employee1 time1.1
employee1 time1.2
employee1 time1.3
employee1 time1.4
employee2 time2.1
employee2 time2.2
employee2 time2.3 
```

然后，您可以在重复的列（本示例中为员工）上创建一个组，并在这些列上启用 HideDuplicates 属性。结果将如下所示：

```
employee1 time1.1
          time1.2
          time1.3
          time1.4
employee2 time2.1
          time2.2
          time2.3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T12:49:26.403

要设置多个数据源...您需要将两个单独的列表对象放入报表中。转到设计器，在工具箱中，您可以将新的“列表”放入其中。然后，你可以做另一个报告。将第二个列表链接到您通过辅助数据源实现的辅助数据集。

这有点牵强，但基本思想是报表中的每个列表对象只能链接到一个数据源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-06-01T16:11:24.563

在报表文档类中有一个名为“Database”的属性，它有一个表的集合。您可以在这些表中的每一个上使用“SetDataSource”，以便将单独的对象列表放入报告中。

# c# - 属性更改时更新字段

> ID：797602
> 
> 赞同：1
> 
> 时间：2009-04-28T12:22:26.763
> 
> 标签：c#, wpf, xaml

这可能是一个基本问题，因为我是 WPF 新手。

我有一个包含 TextBox 和 Button 的 UserControl（此问题的代码已简化）：

```
<UserControl x:Name="this">
    <TextBox Text="{Binding ElementName=this, Path=MyProperty.Value}"/>
    <Button x:Name="MyButton" Click="Button_Click"/>
</UserControl> 
```

在后面的代码中，我已将“MyProperty”注册为 DependencyProperty：

```
public static readonly DependencyProperty MyPropertyProperty = DependencyProperty.Register("MyProperty", typeof(MyProperty), typeof(MyPropertyNumeric), new UIPropertyMetadata(null)); 
```

“MyProperty”是我定义的一个类，它实现了 INotifyPropertyChanged。“MyProperty.Value”是对象类型。

单击按钮时，我在代码隐藏中更改 MyProperty.Value。我想让 TextBox 自动显示新值。我希望上述方法会起作用，因为我已经实现了 INotifyPropertyChanged - 但它没有......任何人都知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T12:25:41.843

您是否在更新时使用属性名称调用 OnPropertyChanged 事件？

例如，

```
public class MyProperty : INotifyPropertyChanged {
  private string _value;

  public string Value { get { return _value; } set { _value = value; OnPropertyChanged("Value"); } }

  public event PropertyChangedEventHandler PropertyChanged;

  protected void OnPropertyChanged(string name) {
    PropertyChangedEventHandler handler = PropertyChanged;
    if(handler != null) {
      handler(this, new PropertyChangedEventArgs(name));
    }
  }
} 
```

确保使用要更新的属性的名称触发 PropertyChanged 事件很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T12:25:52.623

尝试添加到 Binding Mode="OneWay"，我不确定默认是什么

# c# - 从 C# 在 Microsoft Dynamics C5 中插入数据

> ID：797605
> 
> 赞同：2
> 
> 时间：2009-04-28T12:22:53.037
> 
> 标签：c#

我需要将一些数据从我们的 CRM 系统传输到[Microsoft Dynamics C5](http://en.wikipedia.org/wiki/Microsoft_Dynamics_C5)会计系统。

这可能吗？直接在 SQL 数据库中编写，这样的 hack 对我来说也很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-12-08T10:02:18.993

将数据直接插入 Dynamics C5 SQL 数据库 - 如果您不记得使用正确的 LXBENUMMER/ROWNUMBER，将会给您带来问题。您必须为每一行使用一个唯一编号。行号由表 XALSEQ 管理。请记住，空字符串必须包含 CHAR(2)。

否则，您可以查看 XU4N - 这将为您提供 Dynamics C5 应用程序（而不是数据层）的 .NET 条目。www.dns-it.dk/xu4n

问候 Erling Damsgaard

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T14:41:26.540

我很惊讶没有人有这种需要。

无论如何，在与顾问交谈后，我发现有两种方法可以解决它。

1.  在您直接管理和操作数据的 SQL 服务器上安装 C5。
2.  默认 C5 安装有 Native DB 并购买 C5 ODBC 模块，这使得通过 ODBC 操作数据成为可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T12:30:22.160

您可以将 CRM 系统中的数据导出到 Excel 文件中。然后将相同的 Excel 文件导入您的 C5 系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T10:15:20.760

也可以选择从供应商处购买解决方案（是的，我正在为一个解决方案工作，只是为了记录......所以我可能会喜欢我们的产品而不是其他产品）。

我们的概念是“设计器”，您可以在其中创建从 c5 到“whatever”的映射，目前我们已经映射到 C# 和其他 C5 版本，这个概念可能会扩展到 Ax 并连接到其他编程语言。

我们运行一个响应我们的“映射”的 C5，带有一点魔力；）是的，这样做当然是有成本的，但是正如我们告诉所有的客户......为什么要复制业务逻辑。

所以最后......您可以在不直接运行到数据库的情况下将数据插入C5......如果人们在将数据插入C5时发生触发器或其他事情，这可能会非常糟糕。

# tsql - 删除表中的 N 个最旧条目

> ID：797609
> 
> 赞同：2
> 
> 时间：2009-04-28T12:23:17.403
> 
> 标签：tsql, sybase

如何删除 N 个最旧的条目。我是有限的Sybase。我需要编写一个接受数字 X 的存储过程，然后在表中只留下 X 个最新条目。

例如：说 ID 是自动递增的。它越小，这个条目越旧。

```
ID  Text
=========
1   ASD
2   DSA
3   HJK
4   OIU 
```

我需要一个像这样执行的程序。

```
execute CleanUp 2 
```

结果将是

```
ID  Text
=========
3   HJK
4   OIU 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T12:33:17.143

注意：SQL Server 语法，但应该可以工作

```
Delete from TableName where ID in 
    (select top N ID from TableName order by ID ) 
```

如果您希望 N 成为参数，则必须构造语句字符串并执行它

```
declare @query varchar(4000)
set @query = 'Delete from TableName where ID in '
set @query = @query + '(select top ' + @N + ' ID from TableName order by ID )'
exec sp_executesql @query 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-29T13:03:09.950

我最喜欢 Eduardo 的选项，因为它是最简单的解决方案，但由于 Sergej 提到它很慢，这里有一个替代解决方案：

创建执行以下操作的存储过程：

1.  创建一个与原始表结构相同的临时表。
2.  将前 N 行插入临时表。
3.  截断原始表。
4.  将临时表中的行复制回原始表。

通常这会快得多，特别是如果表中有很多行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-07T07:02:47.943

如果您在 id 上有一个聚集索引，则执行[**删除顶部**](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc00641.1502/html/nfg1502/CHEHFFJJ.htm)查询是安全的。

```
delete top 2 from TableName; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-31T13:05:58.710

我知道这是一个老问题，但这可以在不使用 CTE 构建语句作为最佳答案的情况下完成：

```
WITH MyCTE AS
(
    SELECT Field1, Field2, ROW_NUMBER() OVER (ORDER BY Field1 ASC) AS RowNum
    FROM MyTable
    WHERE Field2 = @WhatIWant
)
DELETE FROM MyCTE WHERE RowNum <= @NbRowsToDelete; 
```

# css - 如何设置 div 以填充动态大小的元素占据的剩余位置

> ID：797612
> 
> 赞同：1
> 
> 时间：2009-04-28T12:23:59.773
> 
> 标签：css

我有这个代码：

```
<div id="body" style="height: 295px; width: 427px; position: absolute; top: 261px; left: 284px;">

   <div id="header">
        Some dynamic text<br/>
        Some dynamic text<br/>
   </div>

    <div id="Content"> 
        <textarea id="text" style="width: 100%"> </textarea>

        <input type="file" style="width: 100%">
    </div>

   <div>
</div> 
```

我想设置内容 div 以填充其父级的剩余空间。文本是在服务器端生成的，它会导致标题的高度发生变化。

输出应如下所示：文件输入应位于内容的底部，文本输入填充内容的剩余部分。内容本身填充了 Body 的剩余部分，其高度受动态文本的影响。

我只对 CSS 解决方案感兴趣，因为这很容易用 JS 完成。此外，只有 Body div 的宽度和高度可以硬编码。

编辑：一些澄清：

1.  # 身体是固定大小的

2.  # 标题是动态大小，可以是任意高度。如果它的高度 > #Body.height，其余部分将被裁剪，#Content 高度将为 0。或者，如果可能，#Header 可以限制为 #Body 的最大一半，其余部分被裁剪或可滚动。

3.  # 内容不需要任何特别说明。它包含固定文件输入和动态高度文本区域

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T12:39:08.253

这是一个显示有问题的 html 的测试页面：

[http://programmingdrunk.com/test.htm](http://programmingdrunk.com/test.htm)

我冒昧地添加了彩色边框，看看发生了什么。

**编辑：**现在上面的链接有一个解决方案。在Firefox中看起来有点奇怪，我看看我能不能解决这个问题

**编辑 2：** 在上面的链接中可以看到最终解决方案是这样的（如果我误读了您的规范，请告诉我）

```
#text, #Content  {
    height:86%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-29T08:33:20.457

我无法理解像控制锚定（或停靠）这样的基本事情在 CSS 中是无法做到的。用于演示的语言没有基本的东西简直是疯了......

无论如何，上面的事情可能无法在 CSS 中完成，因为 CSS 元素不知道其他元素。或者也许可以，但这样的解决方案肯定会包括 CSS hack。

我现在选择了[JQuery LayoutManager 框架](http://www.rajeeshcv.com/projects/layoutmanager-jquery-plugin/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T12:39:38.113

你的 html 让你真的很难做你想做的事。此外，您还没有告诉我们如果内容太高而无法容纳一个屏幕会发生什么。

你的描述听起来有点像你想要的东西： [http ://www.sitepoint.com/blogs/2005/10/18/the-catfish-part-1/](http://www.sitepoint.com/blogs/2005/10/18/the-catfish-part-1/)

为了得到好的回复，请考虑改变html结构。

编辑：好的，如果你想表现得那么你想要的就是不可行的。如果我们放弃 ie 或 no-js 的限制，那么使用表格样式布局的可能性很小。但这确实是一个奇怪的要求，您应该认真考虑一下为什么要这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T12:58:51.747

添加`float:left`到#header 将导致#content 填充剩余空间，但不确定如何实现文本区域。

# eclipse - 如何防止 Eclipse 在包资源管理器中显示打开的文件

> ID：797615
> 
> 赞同：33
> 
> 时间：2009-04-28T12:24:20.270
> 
> 标签：eclipse, navigation, package-explorer

不知何故，我遇到了这样一种情况，当我使用 Eclipse 浏览源文件时，Eclipse 总是使用包资源管理器选择（并展开）打开的文件。有了这个我结束了

*   在 Package Explorer 上丢失我的位置
*   让我的包资源管理器扩展并且非常混乱。

通过简短的谷歌搜索/探索偏好，我找不到这个..

Eclipse 版本是 3.4，如果这很重要。

在此先感谢， Touko

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2009-04-28T12:34:49.013

关闭 Package Explorer 工具栏中的“Link with Editor”选项。

![包资源管理器](https://i.stack.imgur.com/CVOQY.png)（左/右箭头图标，在此处打开）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T12:29:31.960

选择一个源文件，右键单击它，选择“打开方式”，然后选择“Java 编辑器”。Java 编辑器应该是所有 java 文件的默认设置。

# iphone - 我应该使用什么技术来复制 iPhone 应用程序中的撰写电子邮件视图？

> ID：797619
> 
> 赞同：3
> 
> 时间：2009-04-28T12:25:42.763
> 
> 标签：iphone, objective-c, uitableview, uiscrollview

所以我有一个涉及通过 API 发送电子邮件的应用程序。我想要的是在手机上已经拥有相同或相似的撰写电子邮件界面。

不幸的是，在所有的苹果中，Goodness 没有任何观点可以做到这一点。

> [AppleComposeMailViewController 分配];

会做得很好。

所以我开始了使用 UItableViewController 的策略。我已经成功了，直到我尝试在内容的末尾添加一个动态扩展的单元格。

我应该保持这条路还是尝试从 UIScrollView Base 实现？

如果表格视图是要走的路，我将如何将 TextView 放入随着用户键入而扩展的最后一个单元格。

如果我使用 UIScrollView，我可以使用哪些策略来更轻松地实现顶表之类的视图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-28T14:20:55.390

In App Email 在 iPhone OS 3.0 中可用，并且应该按照您的描述进行。查看 MessageUI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T12:34:24.163

[查看Three20 框架](http://github.com/joehewitt/three20/tree/master)中出色的“电子邮件”作曲家（[截图](http://farm4.static.flickr.com/3462/3378171111_666173111d_o.jpg)）

# security - 使用“盐”真的好吗？

> ID：797626
> 
> 赞同：0
> 
> 时间：2009-04-28T12:26:43.243
> 
> 标签：security, passwords, hash

我并不声称自己是安全专家，但在我看来，添加盐并没有真正产生巨大的影响。

例如，如果用户的密码是 john1970，salt 是 123456，这意味着密码是 123456john1970，虽然这对攻击者来说更难（如果使用字典攻击，例如彩虹表），攻击者很可能猜测第一部分是盐。我发现使用非标准方法（例如用一些键进行异或运算或对字符代码应用一些简单的数学运算）要有效得多。我知道你们中的大多数人可能不会同意我的观点，但这对我来说似乎更有意义。

你的意见？

**复制：**

*   [需要一些帮助来理解密码盐](https://stackoverflow.com/questions/420843/)
*   [密码哈希的非随机盐](https://stackoverflow.com/questions/536584)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-04-28T12:38:37.350

添加盐不是为了在前端更难猜测密码，添加它们是为了确保密码的存储不会泄露额外的信息。

事实上，盐是为每个密码随机生成的，并且在没有任何形式的混淆的情况下与密码一起存储。

密码永远不会存储在数据库中，只存储哈希（MD5、SHA1、SHA2* 等）。

“密码”的 MD5 始终为 286755fad04869ca523320acce0dc6a4。如果您只是将 MD5 存储在密码数据库中，您只需查找该字符串并知道那里的密码是“密码”。

通过添加“84824”盐，总和变为 2ca20e59df3a62e5dc4a3a0037372124。但是如果你有另一个数据库（或另一个用户使用相同的密码），他们可能有一个随机的盐'8999'，给出：4e7a210a07958cfe24138a644cbb7f84

关键是，如果攻击者要获得密码数据库的副本，密码哈希将毫无意义；您甚至无法判断 2 个或更多用户是否使用相同的密码。

编辑：

相比之下-您应用的数学公式可以颠倒。如果您选择盐，然后将盐与密码散列进行异或运算，那么攻击者可以撤消异或操作并获得原始散列，此时彩虹表非常有用。

如果您认为数学公式无法反转，那么您实际上可能会丢失数据，并且您正在将多个密码映射到相同的最终哈希值。这实际上增加了攻击者找到哈希密码的机会，因为任何适当的密码都可以使用。

如果您正在异或并保持 XOR 值的安全，那么它只是一个需要保存在某个地方的额外秘密，并且泄露该秘密实际上会丢失您的所有密码（同样由于彩虹表）。使用盐没有额外的秘密，操作不能逆转，但可以重复，每个密码都需要单独攻击。

编辑：当然这现在完全相关：[我刚刚以你的身份登录](https://blog.codinghorror.com/i-just-logged-in-as-you-how-it-happened/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-04-28T12:30:30.990

安全公理：永远不要在数据库中存储纯文本密码。

考虑到这一点，salt 突然有了很大的不同：因为有了这种 salt，攻击者预先计算的哈希值（前面提到的彩虹表）就没有价值了。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-04-28T12:33:40.437

盐与加密哈希一起使用，而不仅仅是添加在密码的前面。您不存储加盐密码或密码，而是存储加盐密码的哈希值。盐的目的是保护用户免受“错误”密码选择的影响，而不是模糊密码。你永远不会只使用盐。

澄清一下：盐不能防止字典攻击。它可以防止彩虹表式攻击，其中生成一个大的散列表和相应的输入文本。好的密码可以防止猜测（字典攻击），盐有助于防止有人获得您的散列密码，因为使用预先计算的表变得昂贵。当我说“坏”时，我的意思是可能存在于现有表格中的密码。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-04-28T12:32:04.260

盐的设计目的是防御彩虹桌，但它的美妙之处在于，知道它是盐*绝不*会削弱它作为防御措施的作用。这是因为盐并不是有什么神奇的特性或任何东西——而是因为它是添加到攻击者输入的密码中的额外信息，并且特定于他正在攻击的密码——这不是可以重复用于多个帐户 - 甚至不是同一服务器上的多个帐户。

当然，攻击者可以将盐添加到他的彩虹表中，但是您刚刚使他的彩虹表必须比您用作盐的任何数据的因子更大。

如果添加两个随机字节，则攻击者的彩虹表必须是 65536 倍大。这不是微不足道的。添加四个随机字节，因子在 40 亿以上。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-04-28T12:29:48.807

由于您提到的原因，它会有所不同：它使使用字典攻击的攻击者更难。

看看[你想加盐吗？](http://www.developerfusion.com/article/4679/you-want-salt-with-that/)一个很好的解释。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-04-28T12:44:31.640

你说的没有任何意义。让我们用一个简化的例子来演示。假设您使用的是 MD5，并且攻击者有一个表。该表包括：

约翰1970->D3 88 99 BC 0C B5 DC 0E D1 7F BB F7 EB F4 EA B2

如果他们随后窃取您的未加盐数据库并看到哈希 D3...B2，他们将知道（忽略冲突）密码是 john1970，然后他们可以在您的站点和可能的其他站点上使用该密码。但是，如果您使用盐 123456（显然，随机的会更好），他们将看到一个哈希：

2A CA 76 59 03 23 35 61 E0 20 49 11 8F FE F3 0E

反而。即使他们在获得哈希时能够破坏盐（您应该尝试通过单独存储它们来防止这种情况），他们将留下：

md5(x+123456) = 2A...0E

并且无法轻松确定 x。盐是一种非常强大的技术，应尽可能使用。另一方面，您所谓的“非标准方法”似乎是在发明自己未经证实的散列算法时半途而废的尝试。忘记那个。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-04-28T12:29:54.703

如果你的盐足够大，那么创建彩虹表是不切实际的。

[http://en.wikipedia.org/wiki/Salt_(密码学)](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)

它还涉及使用多种因素来加密您的密码。虽然有人可能会窃取您的数据库，但他们可能会遗漏盐，从而成为 SOL。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-28T12:30:48.943

加盐确实有很大的不同，但是您使用的是哪种哈希算法？请记住，盐总是会添加到该字段中的任何内容中，因此即使发现冲突，如果他在表单上的该字段中键入它，盐就会被添加并且冲突不再匹配。

就我个人而言，我 hash(hash(salt1)+hash(pass)+hash(salt2)); 但是，salt 仅在可以从数据库中获取哈希值时提供保护。如果一个人真的无法获得哈希值，那么最好的方法就是在表单中输入随机的东西。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-04-28T12:33:55.583

盐的真正价值不仅在于保护单个记录免受攻击，还在于使如果多个用户具有相同的密码，他们的散列形式会显得不同。为了使其有效，您必须使用每条记录的盐。

如果您的安全加密/散列机制导致具有相同密码的用户在您的数据库中具有相同的表示，那么您已经为攻击者提供了一次破解多个帐户的简单方法。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-28T12:34:34.113

“攻击者很可能猜到第一部分是盐。”

真的吗？如何？他们如何知道盐的结束位置和用户提供的密码开始的位置？从密码中解析盐的规则是什么？

你是说它是“显而易见的”，因为盐是数字的吗？然后使用base64盐。现在它有多“明显”？

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-28T12:31:10.347

我不能谈论这个问题背后的数学，但我会使用一个物理隐喻。只是因为我知道我家门把手上的锁可以用碰撞工具或喷灯来破解，所以我仍然锁上了我的门。我在一栋公寓楼里，还有另一扇门可以进入大楼，我也锁上了那扇门，尽管你可以说那扇门是浪费时间，因为很多人都有钥匙，而且经常把它撑开。

安全是一组同心的防御，有些比其他的更有趣。这是一个关于哪些防御工作比收益更多的判断电话，例如哈希+盐+ROT13可能会增加更多的工作而不是收益。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-28T12:33:01.187

“1-2-3-4-5？这是我这辈子听过的最愚蠢的组合！这就是白痴行李上的那种东西！”

啊，太空球……

无论如何，是的，如果你使用 123456 作为你的“盐”，007，安全性可能不如它所能达到的那么好。尽管如此，你还是让消除字典攻击作为破解它的一种手段变得更加困难（除非他们知道盐......）。当然，它仍然可以被蛮力强迫，但诚实的事实是没有什么是不可破解的。你所做的一切都是为了让它更难破解，因为不可能破解是不可能的。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-28T12:34:09.560

盐的目的不仅仅是混淆密码，而是增加密码的长度。如果黑客不知道盐是什么，他猜测有盐也无济于事。如果盐使密码的长度加倍，则将可能的单词数提高到二次方。您的 XOR 方法不会这样做。

# silverlight-3.0 - 如何在 Silverlight 中处理 WCF 错误异常

> ID：797633
> 
> 赞同：0
> 
> 时间：2009-04-28T12:28:12.350
> 
> 标签：silverlight-3.0

如何处理 Silverlight 3.0 中的 WCF 错误异常。任何内置对象模型支持错误异常处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T12:48:45.283

由于您对 Web 服务的所有调用都是异步的。当异步调用完成时，对您的 WCF 项目的服务引用将在客户端上自动为您创建“已完成”事件。

这些事件总是包含一个“Result”属性和一个“Exception”属性。一旦处理了异常，您就可以用它做您想做的事情。

你是这个意思吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T14:22:08.243

尝试这个：

[http://www.codeproject.com/KB/silverlight/SilverlightExceptions.aspx](http://www.codeproject.com/KB/silverlight/SilverlightExceptions.aspx)

不支持 SOAP 错误是对的，这种技术将它们包装在服务器端，然后在客户端解开它们，以便您可以巧妙地处理它们。

# latex - 在其他人中包含完整的 LaTeX 文档

> ID：797648
> 
> 赞同：18
> 
> 时间：2009-04-28T12:31:02.423
> 
> 标签：latex, pdflatex

我目前正在完成我的论文，并希望能够在我的 LaTeX 文档中包含一些文档。

我想包含的文件是用 LaTeX 向我的主管提交的每周报告。显然，所有文件都是单独编号的。我希望将它们包含在最终文件中。

我可以使用 GhostScript 或其他工具连接所有最终的 PDF，但我希望在整个文档中保持一致的编号。

我已经尝试在主文档中包含每个文档中的 LaTeX，但是序言等会导致问题，并且我在每个报告中的小标题占据了一整页......

总之，我正在寻找一种在大型报告中包含许多 1 或 2 页自完成 LaTeX 文件的方法，保持其原始布局，但更改页码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-29T06:12:45.117

对于`\input`在跳过它们的序言时 -ing 原始 LaTeX 文件的可能解决方案，[newclude](http://www.ctan.org/pkg/newclude)包可能会有所帮助。

否则，您可以使用[pdfpages](http://www.ctan.org/pkg/pdfpages)将预先存在的 PDF 插入到您的论文中。我似乎记得它具有通过用白框覆盖原始页码来“抑制”原始页码的功能。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2011-02-01T13:13:59.317

@Will Robertson 的建议效果很好。我只想为所有懒惰的人添加一个示例：

```
\usepackage{pdfpages}

...

% Insert _all_ pages from some_pdf.pdf:
\includepdf[pages=-]{some_pdf}   % the .pdf extension may be omitted 
```

从包的文档中：

*   要包含特定范围的页面，您可以执行`pages={4-9}`. 如果省略 start，则默认为第一页，如果省略 end，则默认为最后一页。
*   要将其包含在横向模式中，请执行`landscape=true`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-28T12:51:22.547

如果他们使用不同的格式，维护每个文档的原始格式将很困难。例如，连接不同的文档类几乎是不可能的。

我建议您稍微改变一下 GhostScript 解决方案。例如，Latex 允许您使用 \setcounter{page}{13} 设置起始页码。如果您能找到一个可以计算 PDF 文档页数的应用程序（pdfjam Ubuntu 软件包中的 pdfinfo 就是一个示例），那么您可以执行以下操作：

*   将下一个文档编译为 PDF
*   将最新的 PDF 与当前的完整 PDF 连接起来
*   查找完整 PDF 的页数
*   使用 sed 将 \setcounter{page}{N} 命令插入下一个乳胶文件
*   回到起点

如果您需要进行任何其他处理，请再次使用 sed。您应该（假设您修复了上述算法中的无限循环；-)）最终得到一个包含所有原始 PDF 连接和连续行号的最终 PDF 文档。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2010-05-27T12:18:00.103

看看[combine](http://www.ctan.org/tex-archive/macros/latex/contrib/combine/)包，这似乎正是您正在寻找的。由于它在源代码级别合并文档，我猜页码是正确的。

# c# - 如何在 C# 中将 Color Lut 应用于位图图像

> ID：797659
> 
> 赞同：1
> 
> 时间：2009-04-28T12:33:05.413
> 
> 标签：c#, imaging

我正在打开不同类型的图像，例如（8 位和 16 位），它们是（单色、RGB、调色板颜色）。

我有这些图像的原始像素数据。我为 8 位图像创建这样的位图。

```
 //for monocrome images i am passing PixelFormat.Format8bppIndexed.
          //for RGB images i am passing PixelFormat.Format24bppRgb
           PixelFormat format = PixelFormat.Format8bppIndexed;
           Bitmap bmp = new Bitmap(Img_Width, Img_Height,format);

           Rectangle rect = new Rectangle(0, 0, Img_Width, Img_Height);

           //locking the bitmap on memory
           BitmapData bmpData = bmp.LockBits(rect, ImageLockMode.ReadWrite, format);

           // copy the managed byte array to the bitmap's image data
           Marshal.Copy(rawPixel, 0, bmpData.Scan0, rawPixel.Length);
           bmp.UnlockBits(bmpData); 
```

* * *

问题是，当我绘制该 bmp 图像时，它的颜色与原始图像不同。那么有什么方法可以在彩色图像上应用 lut（查找表）。

我想要任何不安全的代码，因为我尝试了 getixel 和 setPixel 并且它们非常慢。我也不想要 Image.fromSource() 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T13:33:37.077

看一下位图的[`Image.Palette`](http://msdn.microsoft.com/en-us/library/system.drawing.image.palette.aspx)属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T13:39:52.133

据我所知，.NET 不支持 ICC 颜色配置文件，因此，例如，如果您打开使用 Adob​​eRGB 颜色配置文件的图像，与打开相同图像相比，颜色会显得更暗淡且更“灰色”文件在 Photoshop 或其他颜色配置文件感知软件中。

[这篇文章讨论了一些颜色配置文件问题](https://stackoverflow.com/questions/38295/apply-an-icc-color-profile-to-an-image-in-c-dotnet)；你可能会在那里找到一些有趣的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T13:44:49.733

GetPixel 和 SetPixel 确实很慢。如果要对单个像素进行操作，请考虑使用[FastBitmap](http://www.koders.com/csharp/fid6CB7C8C7E03A6E0FCE7B30E360E77F0AF6B23DF0.aspx)。它允许快速着色像素。使用这个不安全的位图将大大提高您的速度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-29T10:33:11.807

我解决了这个问题，看看如何。我在某处读到 GDI+ 返回 BGR 值而不是 RGB。所以我颠倒了顺序，一切都很好。但它有点慢。

```
 PixelFormat format = PixelFormat.Format8bppIndexed;
       Bitmap bmp = new Bitmap(Img_Width, Img_Height,format);

       Rectangle rect = new Rectangle(0, 0, Img_Width, Img_Height);

       //locking the bitmap on memory
       BitmapData bmpData = bmp.LockBits(rect, ImageLockMode.ReadWrite, format);
       Marshal.Copy(rawPixel, 0, bmpData.Scan0, rawPixel.Length);

       int stride = bmpData.Stride;
       System.IntPtr Scan0 = bmpData.Scan0;

       unsafe
       {
           byte* p = (byte*)(void*)Scan0;
           int nOffset = stride - bmp.Width * SAMPLES_PER_PIXEL ;
           byte red, green, blue;

           for (int y = 0; y < bmp.Height; ++y)
            {
                for (int x = 0; x < bmp.Width; ++x)
                {
                    blue = p[0];
                    green = p[1];
                    red = p[2];
                    p[0] = red;
                    p[1] = green;
                    p[2] = blue;
                    p += 3;
                }
                p += nOffset;
            }
        }

        ////unlockimg the bitmap
        bmp.UnlockBits(bmpData); 
```

谢谢

任何人都可以拥有比这更快的代码吗？

# c# - Linq to SQL vs 序列化

> ID：797662
> 
> 赞同：2
> 
> 时间：2009-04-28T12:33:24.303
> 
> 标签：c#, sql-server, linq-to-sql, serialization

假设我在 MSSQL 数据库中有几个表，每个表大约有 5-10 个属性。表之间有一些简单的关联，但每个表都有 500,000 到 1,000,000 行。

有一种算法可以在该数据（全部）上运行，因此在运行算法之前，我必须从数据库中检索所有数据。该算法不改变数据，只读取它，所以我只需要检索数据。

我正在使用 LINQ to SQL。检索所有数据大约需要两分钟。我想知道的是序列化到文件然后反序列化（在需要时）是否实际上会更快地加载数据。

数据约为 200 MB，我不介意将其保存到磁盘。那么，如果对象从文件中反序列化或使用 LINQ 2 SQL DataContext 会更快吗？

有这方面的经验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T12:51:31.860

您应该尝试直接使用 ADO.NET，而无需在其之上使用 LINQ to SQL 层，即使用 an`SqlDataReader`来读取数据。

如果您按顺序处理数据，则可以在需要时从读取器获取记录，而无需先将它们全部读入内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T13:00:59.170

我认为 LINQtoSQL 可能不是此类应用程序的最佳选择。当您谈论这么多对象时，创建对象实例（您的持久类）会产生相当多的开销。

我会选择一个解决方案，其中存储过程仅通过 ADO.NET 检索必要的数据，应用程序将其存储在内存中（现在内存很便宜，200MB 应该不是问题）并且分析算法在内存数据上运行.

我认为您不应该将数据存储在文件中。最后，您的数据库也只是数据库引擎读取的一个或多个文件。所以你要么

*   让数据库引擎读取您的数据并进行分析，或者
*   让数据库引擎读取您的数据，将其写入文件，读取文件（再次读取相同的数据，但现在您自己做）然后分析数据

据我所知，后一种选择涉及大量开销，没有任何优势。

编辑：如果您的数据很少更改，您可以考虑在分析和缓存预处理数据之前对数据进行预处理（在数据库或文件系统中）。仅当您的预处理数据可以比原始数据更快地分析（很多）时，这才有意义。也许可以在数据库本身中进行一些预处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T13:03:33.687

如果您有一个对数据库中的大部分数据进行操作的进程……那么这听起来像是存储过程的工作。它不会是面向对象的，但它会更快，更不脆弱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T06:40:01.187

由于您在 C# 中执行此操作，并且您的数据库是 MsSql（因为您使用 Linq to Sql），所以您不能在托管存储过程中运行您的代码吗？这将允许您保持当前代码不变，但加载数据会更快，因为代码是在 sql server 中运行的。

# c# - 我可以通过在 C# 中使用更多静态方法来获得函数式编程 (F#) 的相同好处吗？

> ID：797674
> 
> 赞同：7
> 
> 时间：2009-04-28T12:35:12.757
> 
> 标签：c#, f#, static-methods

我承认我还没有深入了解 F#。但是在 30,000 英尺的描述中，他们一直在谈论易于测试且没有可变状态的代码。这和静态方法一样吗？

我可以通过在具有所有静态方法的类中编写一些代码来获得 F# 的好处吗？

我只是在寻找简短的答案，我知道有关该主题的整本书都存在。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-28T12:38:15.790

绝对不，不变性与静态或实例方法无关。`String`作为一个不可变的类，它有很多实例方法，它们以一种非常实用的方式返回一个新的`String`类实例，而不是修改任何东西。

您可以尝试使用功能分解来模拟 F#，但这仍然是非常命令式的代码。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-28T12:40:12.667

您当然可以不可变地编写 C# 代码，但这与静态函数无关。不变性是诸如拥有一个结构或对象之类的东西，这些结构或对象只能通过制作自身的副本并让副本不同来“改变状态”。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-29T04:02:40.640

除了静态、功能模块与对象之外，您还可以尝试通过使用 C# 3 和 lambdas、LINQ 等来获得 F# 的一些好处。但是，这并没有走得太远。我觉得 F# 的优点是：

*   无处不在的推理
*   自动泛化（添加类型参数，所以我不必手动整理）
*   简单的不变性
*   模块和类之间的轻松混合
*   歧视工会等类型
*   模式匹配
*   嵌套函数（轻量级）
*   一流的函数（不，C# 的命名委托不算在内）
*   一切都是一种表达
*   简单的功能组合

因此，您可以尝试在 C# 中执行其中的一些操作。其中一些根本不受支持并且无法正常工作。其余的变得非常丑陋，非常快。

因此，如果您远离 LINQ 和 Enumerable 扩展的老路，您可能最终会陷入痛苦的世界。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-29T07:26:52.770

我希望与迄今为止的所有其他答案有所不同。不变性和静态方法在技术上可能并不严格相关，但我发现使用 F# 鼓励我尽可能将 C# 方法设为静态。

这种想法是类比的，因为处理不可变对象更容易，因为您不必担心它会改变状态。同样，使用静态方法时您不必担心状态（除非您使用全局单例或其他东西......）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-28T12:37:38.740

不，它与静态方法不同。如果在初始化后不分配任何内容（局部变量、函数参数、静态字段、实例字段），则您没有可变状态。您可以通过将类设计为不可变来获得一些好处。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-28T12:38:27.757

不，这两个概念无关。C# 中的静态方法仍然可以正常修改传入的对象，并使用 ref 或 out 修改其他变量。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-07-07T17:58:03.307

这是真的。仅仅通过在 C# 中使用更多的静态函数是无法获得函数式编程的好处的。但是，如果您要深入了解（例如使用 Reflector），我理解一个简单的 let 语句是一个静态函数。换句话说，

```
//F#
let a = 2 
```

就像 C# 中的函数

```
//C#
static int a()
{
    return 2;
} 
```

我能理解这种困惑。

解释来自 Leon Bambrick 的“F# Eye for the C# Guy 演示文稿”。

# data-structures - 什么是四元链表？

> ID：797687
> 
> 赞同：6
> 
> 时间：2009-04-28T12:39:30.873
> 
> 标签：data-structures

我目前正在工作中实现一个列表类型的结构，我需要它非常有效。在我寻找有效数据结构的过程中，我偶然发现了四重列表的专利，这激发了我的兴趣，让我忘记了当前的任务，转而开始研究四重列表。不幸的是，互联网对整个事情非常保密，谷歌在可用结果方面并没有产生太多。我得到的唯一解释是专利描述：

*一种四元链接数据结构，可为单个记录中的多个相关字段提供双向搜索功能。通过以 N 个数据条目的间隔提供一组指针来搜索数据库，以适应指针的二进制搜索，然后对结果范围进行线性搜索以定位感兴趣的项目及其相关字段。*

不幸的是，这让我更加困惑，因为我无法理解非门外汉的解释。因此，因此我向你们所有人求助，希望你们能向我解释这个四联历史到底是什么，因为我知道不知道会很快把我赶上墙。

你知道什么是四元链表吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-28T12:47:38.310

我不能确定，但​​听起来有点像[跳过列表](http://en.wikipedia.org/wiki/Skip_list)。

即使不是这样，您也可能会发现跳过列表很方便。（据我所知，它们是单向的。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-28T12:50:32.500

我以前没有正式遇到过这个词，但从专利描述中，我可以做出有根据的猜测。

链表是每个节点都有到下一个节点的链接...

```
a -->-- b -->-- c -->-- d -->-- null 
```

双向链表意味着每个节点也拥有到其前身的链接。

```
 --<--   --<--   --<--  
|       |       |       |
a -->-- b -->-- c -->-- d -->-- null 
```

假设列表已排序。如果我想执行二分搜索，我通常会在列表的一半处找到中间节点，然后进入适当的间隔并重复。但是，链表遍历总是 O(n) - 我必须遵循所有的链接。从描述中，我认为他们只是从一个节点添加额外的链接以“跳过”列表中前面的固定数量的节点。就像是...

```
 --<--   --<--   --<--  
|       |       |       |
a -->-- b -->-- c -->-- d -->-- null
|                       |
|----------->-----------|
 -----------<----------- 
```

现在我可以更快地遍历列表，特别是如果我仔细选择了额外的链接目标（即确保它们总是向后/向前移动它们在列表长度中指向的项目的偏移量的一半）。然后我通过这些链接找到我想要的粗略间隔，并使用普通链接来查找项目。

这是我讨厌软件专利的一个很好的例子。这是非常明显的东西，用华丽的散文包裹着迷惑人们。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-28T12:47:42.367

我不知道这是否完全是一个“四链表”，但它听起来像这样：

```
struct Person {
    // Normal doubly-linked list.
    Customer *nextCustomer;
    Customer *prevCustomer;

    std::string firstName;

    Customer *nextByFirstName;
    Customer *prevByFirstName;

    std::string lastName;

    Customer *nextByLastName;
    Customer *prevByLastName;
}; 
```

也就是说：您通过您的收藏维护多个订单。您可以轻松地按名字顺序或姓氏顺序导航。使链接保持最新是昂贵的，但它使导航非常快。

当然，这可能是完全不同的事情。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-28T12:50:32.500

我对它的理解是四链表是一个可以在 O(n) 中以两种不同的方式遍历（向后或向前）的链表，即根据 FieldX 或 FieldY 排序：

> **(a)生成第一组和第二组链接指针，其中当记录相对于固定ID字段**排序时，第一组链接指针指向相关记录集的后继元素，第二组链接指针指向当记录相对于固定 ID 字段排序时，到相关记录集的前导元素；
> 
> **(b)生成第三组和第四组链接指针，其中当记录相对于变量ID字段**排序时，第三组链接指针指向相关记录集的后继元素，第四组链接指针指向当记录相对于变量 ID 字段排序时，到相关记录集的前导元素；

因此，如果您有一个员工的四元链表，您可以将其存储为按姓名排序并按年龄排序，并在 O(n) 中枚举。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-28T12:57:27.057

专利的一个来源是[这个](http://www.freepatentsonline.com/5333318.html)。似乎有两个主张，其中第二个更接近相关：

> 一种用于组织和搜索一组相关记录的计算机实现方法，其中每个记录包括：
> 
> i) 一个固定的 ID 字段；和
> 
> ii) 可变 ID 字段；该方法包括以下步骤：
> 
> (a)生成第一组和第二组链接指针，其中当记录相对于固定ID字段排序时，第一组链接指针指向相关记录集的后继元素，第二组链接指针指向当记录相对于固定 ID 字段排序时，到相关记录集的前导元素；
> 
> (b)生成第三组和第四组链接指针，其中当记录相对于变量ID字段排序时，第三组链接指针指向相关记录组的后继元素，第四组链接指针指向当记录相对于变量 ID 字段排序时，到相关记录集的前导元素；
> 
> (c)生成第一组和第二组字段指针，其中第一组字段指针包括有序的指针组，当记录相对于固定ID字段排序时，指向每第N个固定ID字段的指针，以及第二组指针的数量包括一组有序的指针，当记录相对于变量 ID 字段进行排序时，这些指针指向每个第 N 个变量 ID 字段；
> 
> (d) 当通过参考其固定ID字段搜索特定记录时，对第一组字段指针进行二进制搜索以确定定义特定记录所在范围的初始指针和最终指针；
> 
> (e)通过线性搜索检查步骤(d)中确定的范围内的固定ID字段以定位特定记录；
> 
> (f) 在通过引用其可变 ID 字段搜索特定记录时，对第二组字段指针进行二进制搜索以确定定义特定记录所在范围的初始指针和最终指针；
> 
> (g)通过线性搜索检查在步骤(f)中确定的范围内的变量ID字段以定位特定记录。

When you work through the patent gobbledegook, I think it means approximately the same as having two skip lists (one for forward search, one for backwards search) on each of two keys (hence 4 lists in total, and the name 'quad-list'). I don't think it is a very good patent - it looks to be an obvious application of skip lists to a data set where you have two keys to search on.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-28T12:47:41.197

描述不是特别好，但据我所知，这听起来像是一个效率较低的[跳过列表](http://en.wikipedia.org/wiki/Skip_list)。

# algorithm - 如何确定字符串 dna 是否与另一个相似

> ID：797688
> 
> 赞同：12
> 
> 时间：2009-04-28T12:39:37.970
> 
> 标签：algorithm, string, hash, comparison

我希望我的措辞正确，以了解我正在寻找的内容。

我需要比较两段文字。如果两个字符串相似，我希望得到非常相似的分数，如果字符串非常不同，我需要非常不同的分数。

如果我对一封电子邮件进行 md5 哈希并更改一个字符，则哈希会发生巨大变化，我希望某些内容不会发生太大变化。我需要在不存储字符串的情况下比较两个内容的相似程度。

**更新**：我现在正在考虑结合人们提供的各种链接的一些想法。理想情况下，我希望使用单个输入函数来创建我的分数，因此我正在考虑使用参考字符串来始终比较我的输入。我也在考虑采用 asci 字符并总结这些字符。仍在阅读提供的所有链接。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-28T12:43:18.227

您正在寻找的是[LCS](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)算法（另请参阅[Levenshtein distance](http://en.wikipedia.org/wiki/Levenshtein_distance)）。您也可以尝试[Soundex](http://en.wikipedia.org/wiki/Soundex)或其他一些[语音算法](http://en.wikipedia.org/wiki/Phonetic_algorithm)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-28T13:54:10.553

Reading your comments, it sounds like you are actually trying to compare entire documents, each containing many words.

This is done successfully in information retrieval systems by [treating documents as N-dimensional points in space](http://en.wikipedia.org/wiki/Vector_space_model). Each word in the language is an axis. The distance along the axis is determined by the number of times that word appears in the document. Similar documents are then "near" each other in space.

This way, the whole document doesn't need to be stored, just its word counts. And usually the most common words in the language are not counted at all.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T12:44:00.973

检查他们的[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)

在 PHP 中，您甚至可以使用[levenshtein() 函数](http://us2.php.net/manual/en/function.levenshtein.php)来实现这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T12:47:23.740

> 我需要比较两段文字。如果两个字符串相似，我希望得到非常相似的分数，如果字符串非常不同，我需要非常不同的分数。

这实际上取决于您所说的“相同”或“不同”。例如，如果有人在您的字符串中将“United States of America”替换为“USA”，那大部分是相同的字符串（因为 USA 只是更长的缩写），还是非常不同（因为很多字符都改变了)?

您基本上需要设计一个描述如何计算“相同性”的函数或使用其预先存在的定义。例如，前面提到的**[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein%5Fdistance)**根据您必须对原始字符串进行的更改次数来测量总差异。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-28T13:32:09.313

Since the Levenshtein distance needs both input strings to produce a value, you would have to store all strings.

You could, however, use a small number of strings as markers and only store these as strings.

You would then calculate the Levenshtein distance from a new string to each of these marker strings and store these values. You could then guess that two strings that have a similar Levenshtein distance to all markers are also similar to each other. It would likely be sensible to "engineer" these markers in such a way that *their* mutual Levenshtein distance is as large as possible. I don't know whether there has been some research in this direction.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-28T13:51:16.927

Many people have suggested looking at distance/metric like approaches, and I think the wording of the question leads that way. (By the way, a hash like md5 is trying to do pretty much the opposite thing that a metric does, so it's hardly surprising that this wouldn't work for you. There are similar ideas that don't change much under small deltas, but I suspect they don't encode enough information for what you want to do)

Particularly given your update in the comments though, I think this type of approach is not very helpful.

What you are looking for is more of a clustering problem, where you want to generate a signature (i.e. feature vector) from each email and later compare it to new inputs. So essentially what you have is a machine learning problem. Deciding what "close" means may be a bit of a challenge. To get started though, assuming it actually is emails you're looking at you may do well to look at the sorts of feature generation done by many spam-filters, this will give you (probably Euclidean, at least to start) a space to measure distances in based on a signature (feature vector).

Without knowing more about your problem it's hard to be more specific.

# c# - 实体框架对象查询 .包含过滤能力

> ID：797690
> 
> 赞同：0
> 
> 时间：2009-04-28T12:39:56.443
> 
> 标签：c#, linq, entity-framework, ado.net

我正在使用 ObjectQuery.CreateQuery() 创建 eSQL 查询。我想使用 ObjcetQuery.Include 加载相关数据，例如 Customer => Orders 所以让 EF 同时加载客户的所有订单。问题是我不想要所有相关的对象，我想用条件获取结果。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T13:00:13.100

如果您打算实现仅具有一些相关子实体（订单）的主实体（客户），则包含将不起作用。实体框架不会实现部分完成的类型。相反，我建议投影到一种新的匿名类型。然后，您可以包含您喜欢的任何订单。

# c# - Linq To Sql - 如何获取插入的记录数

> ID：797698
> 
> 赞同：3
> 
> 时间：2009-04-28T12:42:36.793
> 
> 标签：c#, sql, linq, linq-to-sql, insert

如何获取插入的记录数？

有没有比 L2S 更简单的方法，而不是先数后数并取差值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T12:46:51.573

您可以尝试使用此功能吗？

```
_db.GetChangeSet().Inserts.Count(); 
```

在哪里 _db - 您的数据上下文，它需要在汇总您的更改之前做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T12:53:00.733

分贝。[SubmitChanges](http://msdn.microsoft.com/en-us/library/bb292162.aspx)不会为您提供受数据库插入、删除和更新影响的实际记录。看看 db.GetChangeSet.Count() 确实给了你真相。只有在 SubmitChanges 调用过程中发生错误时，GetChangeSet.Count() 中的数字才会与 db 中的实际情况不同。

# tracking - 软件项目的财务跟踪

> ID：797701
> 
> 赞同：3
> 
> 时间：2009-04-28T12:43:11.160
> 
> 标签：tracking, accounting, financial, invoices

我所在的团队管理着许多软件项目——我们所做的大部分工作都是端到端的，从需求跟踪到项目管理再到采购和设置——一个很大的痛苦是跟踪财务，因为我们有一个整体处理我们的财务状况。目前，我们使用电子表格并将所有发票和采购订单存储在一个共享文件夹中。很难捕获费用并将其与正在进行或已完成的项目相关联。有人有更好的想法吗？希望这个话题是相关的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T13:32:00.577

我只是把它扔在那里，但 Scrum 似乎是一种可以轻松跟踪这类东西的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T09:33:48.950

你说的是簿记。您最好的选择可能是与以前为软件公司组织书籍的会计师交谈。或者，您可以阅读簿记基础知识。

这个问题与软件开发并不严格相关，尽管软件业务有一些使其不同的特征，即缺乏原材料。

祝你的问题好运，我个人觉得它很有趣，但我不相信它属于 stackoverflow。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T23:49:08.410

我将 JIRA 的时间跟踪方面与一堆自定义字段一起使用，这些字段让我可以将问题记录为已计费（完成针对 JIRA 问题存储发票编号详细信息）。将工作时间与计费时间联系起来很容易。如果您按功能而不是按小时计费，可能无法正常工作，但对于 $/hr 的工作，它是完美的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T11:32:19.237

你可以试试[http://projectsputnik.com](http://projectsputnik.com)这个软件结合了项目管理和计费

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-22T00:29:31.813

如果您正在使用 Jira，您可以尝试**[Clerk — Jira 开票和计费](https://helloclerk.io/)**应用程序。Jira 具有项目和时间跟踪功能，此插件在此基础上进行开票和计费。我希望这会有所帮助。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-03T14:18:14.250

使用 wiki 怎么样，比如 Confluence？然后您可以导出到电子表格。并再次导入...

# iphone - 为什么我收到 sqlite3error？

> ID：797704
> 
> 赞同：0
> 
> 时间：2009-04-28T12:44:27.943
> 
> 标签：iphone, objective-c, sqlite

我正在尝试在我的应用程序中以一种方法重用 sqlite 语句。这是相关代码

```
if(getsets_statement == nil){
    const char *sql = "SELECT DISTINCT num,roll FROM mytable WHERE cls like ? and divname like ?";
    if(sqlite3_prepare_v2(database, sql, -1, &getsets_statement, NULL) != SQLITE_OK){
        NSAssert1(0, @"Error: Failed to prepare stmt with message '%s'", sqlite3_errmsg(database));
    }       
}

sqlite3_bind_text(getsets_statement, 1, [cls UTF8String], -1, SQLITE_TRANSIENT);
sqlite3_bind_text(getsets_statement, 2, [divname UTF8String], -1, SQLITE_TRANSIENT);

while(sqlite3_step(getsets_statement) == SQLITE_ROW){

    setNumber= sqlite3_column_int(getsets_statement, 0);        

    roll = sqlite3_column_int(getsets_statement, 1);

    [numArr addObject:[NSNumber numberWithInt:setNumber]];
    [rollArr addObject:[NSNumber numberWithInt:roll]];
}

sqlite3_reset(getsets_statement); 
```

该语句在第一次调用时完美执行。但是下次我调用这个方法时，我得到一个`sqlite3error`. `divname`和的值`cls`存在（做了`NSLog`和检查），但我不明白为什么我会收到这个错误。我在第一个`bind_text`语句中得到错误。

这是在 gdb 控制台中

```
Program received signal:  “EXC_BAD_ACCESS”.
(gdb) where
#0  0x9041857f in sqlite3Error ()
#1  0x9041acea in vdbeUnbind ()
#2  0x9041b2c8 in bindText () 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T13:45:18.017

确保实际上没有其他问题（数据库是否在其他地方关闭？`getsets_statement`指向同一个对象吗？它是否已完成？）。然后尝试使用 NULL 或 SQLITE___STATIC 而不是 SQLITE_TRANSIENT。由于`[NSString UTF8String]`返回不需要（由您）释放的数据，它显然不需要析构函数，并且它将保持有效，直到您的函数退出之后，此时您已经完成了运行该语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T13:00:17.610

我相信您需要在准备好的语句上调用[sqlite3_reset](http://www.sqlite.org/capi3ref.html#sqlite3_reset)和[sqlite3_clear_bindings](http://www.sqlite.org/capi3ref.html#sqlite3_clear_bindings)，然后再尝试重用它。此外，您应该真正检查您的返回码。

# c# - 在 .net 应用程序中嵌入流程图设计图面

> ID：797705
> 
> 赞同：4
> 
> 时间：2009-04-28T12:44:30.283
> 
> 标签：c#, user-interface, flowchart

我需要将流程图设计表面整合到我们正在开发的应用程序中，以允许用户创建本质上是工作流/时间表的内容。我需要能够创建自己的“形状”，在它们上设置自定义属性，并且可能还有一些逻辑（如果，同时等）。

我知道我需要看看在应用程序中托管 WF，它看起来很合适，但有谁知道我可以使用的其他设计师组件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-28T13:25:33.227

看看这些资源，它们都是免费的解决方案，但与商业的（Mindfusion、GoDiagram）相比，它们需要你做更多的开发工作：

*   [WPF 图表设计器 @ CodeProject](http://www.codeproject.com/KB/WPF/WPFDiagramDesigner_Part4.aspx)（需要 WPF）
*   [Netron 库](http://www.orbifold.net/default/?page_id=1272)（没有 WPF）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T13:02:50.443

您应该尝试[Visual Studio Extension](http://msdn.microsoft.com/en-us/vsx2008/products/default.aspx)。您可以*免费*使用 VS.NET IDE ，创建图表，导出为 xml/webservice/custom 格式等。

> 例如，您可以创建一个工具来描述特定于您的组织如何建模业务流程的概念。如果您正在构建状态图工具，您可以描述状态是什么，状态具有哪些属性，存在哪些类型的状态，如何定义状态之间的转换等等。描述保险公司合同状态的状态图表面上类似于描述网站页面之间用户交互的状态图。但是，两个状态图之间的基本概念会有很大不同。通过创建您自己的特定领域语言和自定义生成的设计器，您可以准确指定您在工具中需要的状态图概念。

[从这里开始](http://msdn.microsoft.com/en-us/vsx/cc677260.aspx)。这里的例子：

*   [故事板设计师样本](http://www.codeplex.com/storyboarddesigner)
*   [DSL 工具实验室](http://code.msdn.microsoft.com/DSLToolsLab)

    [![VSE](https://i.stack.imgur.com/63N9Z.jpg)](https://i.stack.imgur.com/63N9Z.jpg)
    [（来源：[microsoft.com](http://i.msdn.microsoft.com/bb933751.bb510103_storyboarddesigner_isolated_thumb(en-us,MSDN.10).jpg)）]

# php - 使用 PDO 连接到 SQL Server 2008

> ID：797707
> 
> 赞同：0
> 
> 时间：2009-04-28T12:44:35.307
> 
> 标签：php, sql-server, pdo

我正在尝试在 Windows XP sp2 上使用 PHP 5.2.9-2 连接到 SQL Server 2008（不是 express）。我可以从同一台机器上的 SQL Server Management Studio 很好地连接到远程 SQL Server。

我的第一次尝试是这样的：

```
$conn = new PDO("mssql:host={$host};dbname={$db}", $user, $pass); 
```

这给出了这个错误：

```
PHP致命错误：  
带有消息的未捕获异常“PDOException”
'SQLSTATE[0100] 无法连接：SQL Server 不可用或不存在。  
拒绝访问。（严重性 9）'
```

第二次尝试（在[专家交流](http://www.google.co.uk/search?q=Q_23833867%20experts%20exchange)中找到）

```
$conn = new PDO("odbc:Driver={SQL Server Native Client 10.0};Server={$host};Database={$db};Uid={$user};Pwd={$pass}", 
                         $user, $pass); 
```

这有效，但我不能使用`PDO::lastInsertId()`，我希望能够：

```
驱动不支持这个函数：驱动不支持lastInsertId()
```

你有什么建议吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T13:50:30.173

我很确定带有 mssql 数据服务器类型的 pdo 需要 dblib 才能连接。你的机器上安装了 dblib 吗？确保您可以在系统路径中的某处找到 ntwdblib.dll。我知道这与您收到的错误消息不符，但我不确定我是否相信错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T14:06:41.240

[我按照这里](http://www.theregister.co.uk/2008/04/24/database_connection_php/)的建议更新了 ntwdblib.dll，现在它可以工作了。

不幸的是我仍然不能使用`PDO::lastInsertId()`，因为显然这个驱动程序也不支持它，所以它真的不值得麻烦。但是，我可以使用等效的`SELECT @@IDENTITY as Id`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T13:28:07.730

> 您不能使用 SQL Server 身份验证，因为只允许 Windows 身份验证。

检查服务器是否[正在运行混合模式身份验证。](http://www.hostmysite.com/support/vps/windows/mixedmode/)

还要检查[这个 SO 问题是否](https://stackoverflow.com/questions/634197/zend-framework-and-sql-server)对您有帮助。

# sql - SQL Server - 按情况排序

> ID：797710
> 
> 赞同：0
> 
> 时间：2009-04-28T12:46:30.280
> 
> 标签：sql, sql-server

我有以下动态运行的查询

```
SELECT *
FROM Vehicles
WHERE (DKID IN (69954))
ORDER BY case when ImageName1 = 'na' then 0 else 1 end, Make , Model, Year DESC 
```

这将返回以下错误：

> 执行数据库查询时出错。[Macromedia][SQLServer JDBC 驱动程序][SQLServer]'na' 附近的语法不正确。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-28T12:52:04.917

您是否正在动态运行此查询？如果是这样，您可能需要转义“na”周围的引号：

```
SELECT *
FROM Vehicles
WHERE (DKID IN (69954))
ORDER BY case when ImageName1 = ''na'' then 0 else 1 end, Make , Model, Year DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T12:52:04.493

为我工作

这是回购脚本

```
use tempdb
go

create table Vehicles(DKID int,ImageName1 varchar(50),
                          Make int, Model int, Year int)

insert Vehicles values (69954,'na',1,1,2007)
insert Vehicles values(69954,'bla',1,1,2008)
go

SELECT *
FROM Vehicles
WHERE (DKID IN (69954))
ORDER BY case when ImageName1 = 'na' then 0 else 1 end, 
Make , Model, Year DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T13:22:00.070

您正在使用 JDBC。可能有来自 JDBC 的转换/解释吗？尝试将“na”作为参数。检查 JDBC 中是否有特定语法用于查询中的字符串常量。我不使用 JDBC，所以我可能完全错了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T12:51:33.887

尝试将`case`语句括在括号中。

```
SELECT *
FROM Vehicles
WHERE (DKID IN (69954))
ORDER BY 
    (case when ImageName1 = 'na' then 0 else 1 end), Make , Model, Year DESC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-28T12:53:22.773

您的查询在 SQL Mgmt Studio 中对我来说效果很好......也许可以试试这种方式，看看它是否能让您到达任何地方：

```
SELECT
    case when ImageName1 = 'na' then 0 else 1 end as OrderCol,
    *
FROM Vehicles
WHERE (DKID IN (69954))
ORDER BY OrderCol,Make,Model,Year DESC 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-28T21:07:51.837

正如 KMike 所说，看起来您没有正确逃脱。

基本上，当您运行语句时，它并没有从动态 SQL 生成语法正确的 SQL 语句。

一般我在写动态sql的时候，都会使用print语句来打印生成的sql。然后，我可以直观地查看生成的 sql 是否存在明显的错误，然后执行它以确保它按预期工作。

如果我在动态SQL中犯了错误，通常会在这里显示出来。

# java - Web 应用程序稳定性的良好标准指标是什么？

> ID：797713
> 
> 赞同：1
> 
> 时间：2009-04-28T12:46:56.130
> 
> 标签：java, web-applications, tomcat, stability

我们目前在开发 Web 应用程序产品时面临一些稳定性问题。该产品部分由我们的合作伙伴承包商构建，我们希望有一个良好的稳定性标准指标。我们一直面临的问题是不断崩溃。Web 应用程序无法识别何时有超过它可以处理的请求，它会建立内存（如内存泄漏），然后它会在没有任何可能恢复的情况下死掉。

我们想为我们的合作伙伴承包商编写一个非常简单的测量方法。我们想了几个主意：

*   能够识别高负载请求并为服务器不可用的系统提供重试页面，直到它从高负载中恢复。
*   一组并发用户或页面浏览量，这将使我们能够清楚地衡量何时使用负载均衡器和缓存等可扩展性选项。

此时，我们必须使用缓存和负载平衡，以便能够每 x 小时（取决于负载）回收 Web 应用程序，这样它们就不会经常死掉。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-28T12:53:13.947

“高负载”真的很难定义。

确定最低可接受的服务水平对您来说要容易得多。

1.  最小并发请求数。

2.  服务请求的最长时间。

3.  每小时的最小请求数。

像这样的简单服务水平易于衡量、易于模拟并且易于写入合同。任何律师或会计师都可以查看负载测试的结果，并说他们是否达到了最低要求。根本不需要深厚的技术知识。

请注意，当您这样做时，“最小值变为最大值”。如果您说他们必须每小时至少处理 10,000 个请求，那么您的测试通常也会显示这也是最大值。

因此，从您的业务模型中定义您的最小值和最大值。你需要多少人才能让人们快乐和富有成效？要求更多是愚蠢的。要求更少意味着用户不满意或效率低下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T12:54:21.960

通常，我已经看到规范中内置了这些性能类型要求……“系统应支持 x 数量的并发用户”或“每小时 x 数量的请求”。

可以使用 LoadRunner 之类的东西轻松测试和验证这些东西，或者您可以使用 HttpUnit 之类的东西推出自己的类似负载测试器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T14:09:25.993

您需要以下参数：

1.  负载测试：

    i）估计您的应用程序使用行为..（即）不。预期的并发用户数，典型的用户活动

    ii) 逐渐加载应用程序并查看 CPU 使用率、响应时间、吞吐量等参数。

2.  可持续性：

    加载应用程序（以最佳负载）相当长的时间（12-24 小时）并查看相同的参数 cpu 使用情况、错误级别等。

您还可以尝试可扩展性，即逐步添加硬件并监控应用程序的行为。

这应该使您对系统的行为有一个不错的了解。

# visual-studio - 用于关闭 IDE 中当前选定文件的 Visual Studio 或 resharper 快捷方式

> ID：797714
> 
> 赞同：12
> 
> 时间：2009-04-28T12:47:13.663
> 
> 标签：visual-studio

VS 2005 或 resharper 中是否有关闭当前文件的快捷方式。或“保存并关闭”会更好

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-28T12:49:44.763

`Ctrl`+`F4`

保存并关闭将 `Ctrl`+`S`后跟`Ctrl`+`F4`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-02-18T13:32:49.810

### Visual Studio 2015 + Resharper

这个问题有点老了。只是想用当前的解决方案更新它。
如下所示，您还可以完全自定义快捷方式：

*   只需导航到***工具 > 选项***

[![在此处输入图像描述](https://i.stack.imgur.com/UNORh.png)](https://i.stack.imgur.com/UNORh.png)

*   在左侧窗格中，转到***环境 > 键盘***

[![在此处输入图像描述](https://i.stack.imgur.com/oIguH.png)](https://i.stack.imgur.com/oIguH.png)

*   现在使用字段***显示命令包含***搜索*file.close*

*   在列表中选择*File.Close*

*   单击字段***按快捷键***

*   输入您想要的快捷方式，例如，`<Ctrl> + W`

*   最后，点击***分配***

你很高兴去！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-28T12:49:47.387

`Ctrl`+ `S`, `Ctrl`+`F4`将保存并关闭当前文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-20T22:34:39.313

工具 -> 选项 -> 键盘

找到“Windos.CloseDocumentWindow”

对我来说，需要将“使用新快捷方式”设置为“文本编辑器”以覆盖旧的 ctrl+w 而无需删除

# c# - 如何将 C# 代码转换为目标代码？

> ID：797720
> 
> 赞同：-1
> 
> 时间：2009-04-28T12:47:42.727
> 
> 标签：c#

大家好，可以帮我如何将c#代码转换为编译器代码或目标代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T12:51:18.270

如果您的意思是 MSIL（.NET 字节码），将 C# 转换为 C# 的最简单方法是……编译它？在 Visual Studio 中按 build 应该可以工作。如果问题更清楚一点可能会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T12:50:33.593

不完全清楚你在问什么，但我认为你在问如何编译 C# 代码。

C# 的编译器是 csc.exe。有很多[命令行选项](http://msdn.microsoft.com/en-us/library/ms379563(VS.80).aspx)，但这里是一个非常简单的 DLL 的示例命令行：

```
csc /t:library /out:MyCodeLibrary.dll myCode.cs

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T12:52:42.450

如果您是指将 C# 代码转换为 MSIL（中间语言），您应该使用 csc.exe（或下载[Visual Studio Express 2008）](http://www.microsoft.com/Express/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T12:53:17.970

如果您正在寻找一种可以让您编辑、编译和运行 C# 代码的工具，那么[Visual Studio Express](http://www.microsoft.com/Express/)是标准[IDE](http://en.wikipedia.org/wiki/Integrated_development_environment)的免费版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-28T12:57:21.657

如果您想将您的 C# 转换为“真正的目标代码”，而不是 MSIL，那么您需要按照其他响应中的说明进行编译，然后使用本[机图像生成器](http://msdn.microsoft.com/en-us/library/6t9t5wcf(VS.80).aspx)将 MSIL 转换为目标代码。

# c# - 当图像为 16bppGrayscale 时从位图中获取彩色图像

> ID：797721
> 
> 赞同：2
> 
> 时间：2009-04-28T12:48:15.737
> 
> 标签：c#, bitmap, imaging

问题 1。 [我自己的相关问题](https://stackoverflow.com/questions/797659/how-apply-color-lut-over-bitmap-image-in-c)

我在这里问了下一个问题

现在第二个问题是。

当我尝试从原始像素数据中打开 16 位（Monocrome）图像时，我收到错误消息。因为我在创建 Bitmap 时使用 PixelFormat.Format16bppGrayscale

```
Bitmap bmp = new Bitmap(Img_Width, Img_Height,PixelFormat.Format16bppGrayscale); 
```

所以用谷歌搜索并发现不支持 Format16bppGrayscale 所以我修改了我的代码，如下所示。

```
 PixelFormat format = PixelFormat.Format16bppRgb565;
 Bitmap bmp = new Bitmap(Img_Width, Img_Height, format);
 Rectangle rect = new Rectangle(0, 0, Img_Width, Img_Height);
 BitmapData bmpData = bmp.LockBits(rect, ImageLockMode.ReadWrite, format);
 Marshal.Copy(rawPixel, 0, bmpData.Scan0, rawPixel.Length);
 bmp.UnlockBits(bmpData); 
```

令人惊奇的是，我现在正在获取图像，因为我更改了 pixelFormat。但问题是我的单色（灰度）图像看起来有各种颜色。

我怎样才能得到原来的样子。我尝试了几种灰度方法但不成功请给我一些不安全的代码。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T12:57:01.410

[BobPowell 的 GDI+ FAQ 有一点关于灰度的内容](https://web.archive.org/web/20141230145627/http://bobpowell.net/grayscale.aspx)。.NET 中的 16 bpp 不起作用。我必须以 32 bpp 的速度完成所有操作，并借助外部工具进行转换。幸运的是（？）我大部分时间都坚持使用 TIFF 图像。此外，[这个线程](http://bytes.com/groups/net-c/270353-format16bppgrayscale-not-supported)可能会有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-07-02T10:32:13.773

您需要将托盘更改为灰度托盘。8bppIndexed 的默认托盘是 256 色。您可以像这样更改它：

```
ColorPalette pal = myBitmap.Palette;

for (int i = 0; i < pal.Entries.Length; i++)
    pal.Entries[i] = Color.FromArgb(i, i, i);

myBitmap.Palette = pal; 
```

# c# - 访问 Windows Media Player 的播放速度控件

> ID：797723
> 
> 赞同：3
> 
> 时间：2009-04-28T12:48:23.007
> 
> 标签：c#, .net, vb.net, vb6, wmp

有没有办法在 dotnet 应用程序中访问 WMP10+ 的播放速度控件？

[播放控制信息上的用户级别信息](http://www.microsoft.com/windows/windowsmedia/knowledgecenter/howto/PlayFaster_how_to.aspx)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-04T00:03:47.193

将**AxWMPLib**添加到您的 VB/C# 项目中。将**AxWindowsMediaPlayer**控件添加到您的窗体。

使用以下方法访问播放速率：

```
AxWindowsMediaPlayer1.URL = "e:\song.mp3"
AxWindowsMediaPlayer1.Ctlcontrols.play()
AxWindowsMediaPlayer1.settings.rate = 0.5 
```

*请注意，根据媒体类型，费率可能并不总是可用。访问速率的更安全方法如下所示：

```
If (player.settings.isAvailable("Rate")) Then
    player.settings.rate = 0.5
End If 
```

如果这不是您要查找的内容，则还存在 MediaPlayer COM 对象。我没有彻底调查它，但智能感知产生了：

```
Dim mpMediaPlayer As New MediaPlayer.MediaPlayer
mpMediaPlayer.FileName = "e:\song.mp3"
mpMediaPlayer.Rate = 0.5
mpMediaPlayer.Play() 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T13:34:38.740

如果您使用的是 MediaElement 对象，我建议您调整[SpeedRatio 属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.speedratio.aspx)。这是[来自 Microsoft 的示例](http://msdn.microsoft.com/en-us/library/ms748248.aspx)。

根据您的评论，听起来 SpeedRatio 是正确的选择。因为它允许您调整播放速度。MediaElement 或 MediaPlayer 基本上只是一个 Windows 媒体播放器。

# c# - 一个属性上的多个故事板

> ID：797741
> 
> 赞同：8
> 
> 时间：2009-04-28T12:51:02.437
> 
> 标签：c#, wpf, xaml, animation, storyboard

我有多个故事板访问相同的属性（不是同时）。在一个故事板更改属性后，另一个故事板似乎无法访问它并且没有改变任何东西..我能做些什么呢？

样本：

```
<ListBox>
    <ListBox.ItemContainerStyle>
        <Style TargetType="ListBoxItem">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ListBoxItem}">
                        <Border Name="Border" BorderBrush="DarkGray" BorderThickness="1" Margin="3">
                            <ContentPresenter />
                            <Border.Background>
                                <SolidColorBrush />
                            </Border.Background>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <ColorAnimation Storyboard.TargetName="Border" Storyboard.TargetProperty="Background.Color" To="#3e8bff" Duration="0:0:0.1" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>
                                <Trigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <ColorAnimation Storyboard.TargetName="Border" Storyboard.TargetProperty="Background.Color" To="White" Duration="0:0:0.1" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.ExitActions>
                            </Trigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsMouseOver" Value="True" />
                                    <Condition Property="IsSelected" Value="False" />
                                </MultiTrigger.Conditions>
                                <MultiTrigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <ColorAnimation Storyboard.TargetName="Border" Storyboard.TargetProperty="Background.Color" To="Orange" Duration="0:0:0.1" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </MultiTrigger.EnterActions>
                                <MultiTrigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <ColorAnimation Storyboard.TargetName="Border" Storyboard.TargetProperty="Background.Color" To="White" Duration="0:0:0.1" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </MultiTrigger.ExitActions>
                            </MultiTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </ListBox.ItemContainerStyle>
    <ListBox.Items>
        <sys:String>hey</sys:String>
        <sys:String>du</sys:String>
        <sys:String>dux</sys:String>
        <sys:String>duy</sys:String>
        <sys:String>dua</sys:String>
    </ListBox.Items>
</ListBox> 
```

这是我能做的最小的示例代码。悬停一个项目后，它在被选中时不会变成蓝色（尝试单击一个项目，然后使用箭头键选择项目而不悬停它们）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-11-27T18:26:31.513

我有办法！！！触发器和动作顺序确实很重要......答案是不要同时播放一个以上的故事板，只需停止其他故事板。

```
<ControlTemplate.Triggers>
    <MultiTrigger>
        <MultiTrigger.Conditions>
            <Condition Property="IsMouseOver" Value="True"/>
            <Condition Property="Selector.IsSelected" Value="False" />
        </MultiTrigger.Conditions>
        <MultiTrigger.EnterActions>
            <StopStoryboard BeginStoryboardName="SelectedBegin" />
            <StopStoryboard BeginStoryboardName="UnselectBegin" />
            <BeginStoryboard x:Name="EnterBegin" Storyboard="{StaticResource MouseEnterSb}"/>
        </MultiTrigger.EnterActions>
        <MultiTrigger.ExitActions>
            <BeginStoryboard x:Name="LeaveBegin" Storyboard="{StaticResource MouseLeaveSb}"/>
        </MultiTrigger.ExitActions>
    </MultiTrigger>
    <Trigger Property="Selector.IsSelected" Value="True">
        <Trigger.EnterActions>
            <StopStoryboard BeginStoryboardName="LeaveBegin" />
            <StopStoryboard BeginStoryboardName="EnterBegin" />
            <BeginStoryboard x:Name="SelectedBegin" Storyboard="{StaticResource SelectedSb}"/>
        </Trigger.EnterActions>
        <Trigger.ExitActions>
            <BeginStoryboard x:Name="UnselectBegin" Storyboard="{StaticResource UnselectSb}"/>
        </Trigger.ExitActions>
    </Trigger>
</ControlTemplate.Triggers> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T04:05:13.420

我已经能够使用以下代码重现您的错误结果（我也很难过）：

```
<ListBox>
<ListBox.ItemContainerStyle>
    <Style TargetType="ListBoxItem">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ListBoxItem}">
                    <ControlTemplate.Resources>
                        <Storyboard x:Key="BorderAnimationToRed">
                            <ColorAnimation Storyboard.TargetName="Border" Storyboard.TargetProperty="Background.Color" To="Red" Duration="0:0:0.1" />
                        </Storyboard>
                        <Storyboard x:Key="BorderAnimationToBlue">
                            <ColorAnimation Storyboard.TargetName="Border" Storyboard.TargetProperty="Background.Color" To="Blue" Duration="0:0:0.1" />
                        </Storyboard>
                        <Storyboard x:Key="BorderAnimationToOrange">
                            <ColorAnimation Storyboard.TargetName="Border" Storyboard.TargetProperty="Background.Color" To="Orange" Duration="0:0:0.1" />
                        </Storyboard>
                        <Storyboard x:Key="BorderAnimationToWhite">
                            <ColorAnimation Storyboard.TargetName="Border" Storyboard.TargetProperty="Background.Color" To="White" Duration="0:0:0.1" />
                        </Storyboard>
                    </ControlTemplate.Resources>
                    <Border Name="Border" BorderBrush="DarkGray" BorderThickness="1" Margin="3">
                        <ContentPresenter />
                        <Border.Background>
                            <SolidColorBrush />
                        </Border.Background>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Trigger.EnterActions>
                                <BeginStoryboard Storyboard="{StaticResource BorderAnimationToOrange}"/>
                            </Trigger.EnterActions>
                            <Trigger.ExitActions>
                                <BeginStoryboard Storyboard="{StaticResource BorderAnimationToWhite}"/>
                            </Trigger.ExitActions>
                        </Trigger>
                        <Trigger Property="IsSelected" Value="True">
                            <Trigger.EnterActions>
                                <BeginStoryboard Storyboard="{StaticResource BorderAnimationToBlue}"/>
                            </Trigger.EnterActions>
                            <Trigger.ExitActions>
                                <BeginStoryboard Storyboard="{StaticResource BorderAnimationToWhite}"/>
                            </Trigger.ExitActions>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ListBox.ItemContainerStyle>
<ListBox.Items>
    <sys:String>hey</sys:String>
    <sys:String>du</sys:String>
    <sys:String>dux</sys:String>
    <sys:String>duy</sys:String>
    <sys:String>dua</sys:String>
</ListBox.Items> 
```

这段代码更容易阅读，因为视觉效果、资源和触发器是分开声明的。也许您可以尝试使用 EventTriggers 来实现您的目标（使用“ListBoxItem.MouseEnter”和“ListBoxItem.MouseLeave”路由事件）。祝你好运！

# c# - 如何使用 Visual Studio 2005 / resharper 自动向文件夹、命名空间或项目中的每个文件添加“使用”语句

> ID：797749
> 
> 赞同：9
> 
> 时间：2009-04-28T12:51:56.833
> 
> 标签：c#, visual-studio, resharper

我正在使用 resharper 进行大重构，我不断从一个文件转到另一个文件，并在“使用”部分一遍又一遍地添加相同的命名空间

是否有向文件夹、命名空间或项目中的每个文件添加“使用”语句？尽管有些文件不需要引用，但大多数文件都需要，因此可以节省大量时间。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-28T13:04:19.240

我会在“查找和替换”对话框中尝试正则表达式：

代替

```
^using System;$ 
```

和

```
using System;\nusing xxx; 
```

这仅适用于使用 System 命名空间的文件，但也许您会找到另一个常见的命名空间或结构元素。这样做之后，您可以使用 resharper 重构解决方案（/文件夹）中的所有文件。这将消除双重使用。

**更新**：您是否为现有类型引入了新的命名空间？有一个名为“move”的重构函数。它会将您的类型移动到新的命名空间并保留引用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-29T11:11:38.300

*   打开 ReSharper 选项/语言/C#/命名空间导入
*   添加“应始终导入的命名空间”
*   针对解决方案或项目运行代码清理。您可能希望仅使用 Optimize Using Directives 模块创建配置文件（选项/工具/代码清理）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-28T13:04:13.590

VS 会为你添加它们。当您在引用的程序集中添加一个符号，但没有对该符号的 using 语句时，您将获得一个针对该符号的标记。按 control-period（或使用鼠标），第一个选项将为您添加 using 语句。

否则，您可以编写一个 VS 宏来依次打开每个项目源文件并插入语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-27T13:48:06.363

我觉得值得为这个老问题添加一个答案，因为我们在 C#10 中有“全局使用指令”。对于针对 C#10 及更高版本的较新代码库，它使此要求没有实际意义。

我们现在可以将一个全局使用放在一个文件中，以便在解决方案中的任何地方都可以访问它。

`global using yournamespace`

请参阅此处的文档[https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-10#global-using-directives](https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-10#global-using-directives)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-29T01:38:21.190

当您一个接一个地遇到文件时，请按 CTRL+ALT+SHIFT+F 进行自动文件清理例程。它只需要一秒钟的时间运行，并且会做你正在寻找的东西，但不仅仅是为了 System.

不确定 R# 是否有办法进行解决方案范围的文件清理。

# c# - 这是 C# 中将分隔字符串转换为 int 数组的最佳方法吗？

> ID：797750
> 
> 赞同：18
> 
> 时间：2009-04-28T12:52:00.733
> 
> 标签：c#, string

给定下面的字符串：

```
string str = "1,2,3"; 
```

这是否是将其转换为`int`数组的最佳扩展？

```
static class StringExtensions
{
    public static int[] ToIntArray(this string s)
    {
        return ToIntArray(s, ',');
    }
    public static int[] ToIntArray(this string s, char separator)
    {
        string[] ar = s.Split(separator);
        List<int> ints = new List<int>();
        foreach (var item in ar)
        {
            int v;
            if (int.TryParse(item, out v))
                ints.Add(v);
        }
        return ints.ToArray();
    }
} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-04-28T12:57:26.743

这真的取决于你想用非整数字符串做什么。此刻你默默地放下它们。就个人而言，我希望它出错。这也让你可以使用更简洁的：

```
public static int[] ToIntArray(this string value, char separator)
{
    return Array.ConvertAll(value.Split(separator), s=>int.Parse(s));
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-28T12:57:13.297

这种方法非常简洁，`FormatException`如果拆分字符串包含任何无法解析为 int 的值，则会抛出（信息量不大）：

```
int[] ints = str.Split(',').Select(s => int.Parse(s)).ToArray(); 
```

如果您只想静默删除任何非 int 值，可以尝试以下操作：

```
private static int? AsNullableInt(string s)
{
    int? asNullableInt = null;

    int asInt;

    if (int.TryParse(s, out asInt))
    {
        asNullableInt = asInt;
    }

    return asNullableInt;
}

// Example usage...
int[] ints = str.Split(',')
    .Select(s => AsNullableInt(s))
    .Where(s => s.HasValue)
    .Select(s => s.Value)
    .ToArray(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-28T13:02:01.180

如果列表中的一个元素没有解析为 int，这将爆炸，这可能比静默失败要好：

```
public static int[] ToIntArray(this string value, char separator)
{
    return value.Split(separator).Select(i => int.Parse(i)).ToArray();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T12:58:50.687

看起来不错，如果其中一项无法转换而不是静默失败，我也会抛出异常。

# python - 如何在 pyscripter 中调试多个脚本？

> ID：797754
> 
> 赞同：0
> 
> 时间：2009-04-28T12:52:22.357
> 
> 标签：python, ide, debugging, pyscripter

我在我的 USB 驱动器上安装了便携式 python，我非常喜欢 pyscripter。问题是，在我开始调试脚本后，IDE 会冻结（等待代码到达断点）。这意味着我不能用它做任何事情（我什至不能保存文件）。一次能够调试多个脚本将非常有用。

我什至尝试启动一个新的 IDE 实例，但它又回到了打开的那个。我可以做些什么来在给定时间调试多个脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-29T12:02:23.077

要解决您的问题，请使用[远程解释器和调试器](http://pyscripter.googlepages.com/remotepythonengines)，PyScripter 将变得更加灵敏。即使出现问题，IDE 也不会崩溃 - 只需重新初始化远程解释器并恢复工作。

# xaml - XAML中矩形内ImageBrush的动画不透明度

> ID：797757
> 
> 赞同：0
> 
> 时间：2009-04-28T12:52:46.443
> 
> 标签：xaml

我在一个矩形中有一个 ImageBrush，我试图通过将不透明度从 0 增加到 100 来淡入加载。

这是我所拥有的：

```
 <Rectangle HorizontalAlignment="Left" Width="200" Stroke="#FF000000" StrokeThickness="0" Fill="{DynamicResource MyImageBrush}" >            
        <Rectangle.Resources>
            <ImageBrush x:Name="ImgBrush" x:Key="MyImageBrush" ImageSource="tower.jpg" Stretch="UniformToFill" Opacity="0" >
            </ImageBrush>                
        </Rectangle.Resources>   
        <Rectangle.Triggers>
            <EventTrigger RoutedEvent="Rectangle.Loaded">
                <BeginStoryboard>
                    <Storyboard>
                        <DoubleAnimation x:Name="FadeIn" Storyboard.TargetName="ImgBrush"  Storyboard.TargetProperty="Opacity" From="0" To="100" Duration="0:0:5"/>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>                              
        </Rectangle.Triggers>
    </Rectangle> 
```

抛出的错误是：

在“System.Windows.Shapes.Rectangle”的名称范围内找不到“ImgBrush”名称

（在 Storyboard.TargetName 中指定了 ImgBrush）

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T13:08:30.117

通过为整个矩形的不透明度设置动画来解决这个问题，而不是尝试为整个 imageBrush 设置动画。

```
 <Rectangle Name="LeftRectangle" Opacity="0" HorizontalAlignment="Left" Width="200" Stroke="#FF000000" StrokeThickness="0" Fill="{DynamicResource MyImageBrush}" >            
        <Rectangle.Resources>
            <ImageBrush x:Name="ImgBrush" x:Key="MyImageBrush" ImageSource="tower.jpg" Stretch="UniformToFill" Opacity="100" >
            </ImageBrush>                
        </Rectangle.Resources>   
        <Rectangle.Triggers>
            <EventTrigger RoutedEvent="Rectangle.Loaded">
                <BeginStoryboard>
                    <Storyboard>
                        <DoubleAnimation x:Name="FadeIn" Storyboard.TargetName="LeftRectangle"  Storyboard.TargetProperty="Opacity" From="0" To="100" Duration="0:4:5"/>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>                              
        </Rectangle.Triggers>
    </Rectangle> 
```

# c# - ASP.NET 中的警报消息

> ID：797758
> 
> 赞同：1
> 
> 时间：2009-04-28T12:52:46.847
> 
> 标签：c#, asp.net, .net-2.0

我是 ASP.NET 编程的新手。`RadioButton`如果未单击，我需要显示一条消息。我已经为`onclick`事件编写了 JavaScript 来处理单选。

我的代码：

```
if(rbTest.Checked == true)
{
        //my code
}
else
{
    string message = "Please select case to download";
    lnkbtnDownload.Attributes.Add("onclick", "alert('" + message + "');return false;");
} 
```

即使我选择了单选按钮，它也会继续显示警报消息。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T12:59:56.160

您必须检查在 lnkbtnDownload 的 onclick 处理程序中是否单击了单选按钮。

```
lnkbtnDownload.Attributes.Add("onclick","if(!document.getElementById('rbTest').checked))alert('message')"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T13:13:36.377

您需要了解服务器端代码和客户端代码之间的区别。您的代码是用在服务器上运行的 C# 编写的。这是我假设正在发生的事情：

一个。您的页面第一次呈现并且用户没有选择相关的单选按钮。然后他/她提交页面（可能通过链接按钮）。

湾。您的页面提交并且您粘贴的代码在服务器上运行。您检查单选按钮是否被选中。如果没有，则向 LinkBut​​ton 添加一个属性，以便在单击 LinkBut​​ton 时，它会发出警报。

C。您的页面*在*回发后呈现，并将新属性添加到 LinkBut​​ton。

d。单击 LinkBut​​ton 时，您会收到带有消息的警报。由于您已将其设置为返回 false，因此该页面将不会再次提交，并将继续向您显示警报。

你看到这里发生了什么吗？您的警报条件需要在客户端本身上进行检查。@Phoenix 提供的代码片段应该是一个很好的起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T13:00:10.403

利用

```
var r = documet.getElementById("rbTest") 
```

然后与`r[0].checked`

使用索引，因为单选按钮 r 可以是一个数组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T13:01:35.563

这相对难看，但可以解决问题：

```
<script>
  var rbSelected = false;
</script>

<form onsubmit="if (!rbSelected) { alert('You must select something!";return false}">
 <input type="radio" name="rbTest" onclick="rbSelected=true" value=1>a
 <input type="radio" name="rbTest" onclick="rbSelected=true" value=2>b
 <input type="radio" name="rbTest" onclick="rbSelected=true" value=3>c
 <input type="submit value="Submit">
</form> 
```

如果你有多个单选按钮（我希望你这样做），那么如果没有所有这些额外的循环逻辑等，你真的不能使用 getElementById ......这样可以避免循环。

见例子：http: [//jsbin.com/edoke](http://jsbin.com/edoke)

# .net - ASP.NET 中的用户身份验证，管理员或中间人甚至无法读取用户数据

> ID：797764
> 
> 赞同：0
> 
> 时间：2009-04-28T12:54:02.023
> 
> 标签：.net, asp.net, security, authentication, membership-provider

假设您有一个基于 ASP.NET 的网站，用户必须对其进行身份验证才能访问。用户数据（如用户名、密码和与网站相关的其他信息）存储在 Microsoft Sql 数据库中。

我知道可以编写自定义成员资格提供程序来创建自己的身份验证方法。

但是，最好的方法是什么

*   通过监听客户端和服务器之间的网络流量，确保用户名和密码不会被截获
*   以某种方式存储数据，以便只有用户自己可以访问它，甚至任何管理员都无法看到这些信息

如果有任何类型的教程、操作方法、截屏视频或任何您可以指出的内容，或者您​​甚至有一个简单的解释，那就太好了！

谢谢，克里斯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-28T13:02:14.407

为了保护网络上的用户名和密码，让您的用户通过[SSL](http://en.wikipedia.org/wiki/Secure_Sockets_Layer)连接。

为确保无法在数据库中读取密码，请[对密码进行哈希处理](http://www.aspcode.net/Storing-passwords-in-your-ASPNET-application-part-1-1.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T18:23:42.577

As already mentioned ,Hash the passwords in the database ,and to be safe from mitm attacks always try to use https://

# python - Python“受保护”属性

> ID：797771
> 
> 赞同：47
> 
> 时间：2009-04-28T12:55:50.570
> 
> 标签：python

如何从子类访问父类的私有属性（不公开）？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2009-04-28T13:03:31.533

我对 Python 约定的理解是

*   _member 受保护
*   __member 是私有的

如果您控制父类的选项

*   将其设为受保护而不是私有，因为这似乎是您真正想要的
*   使用 getter (@property def _protected_access_to_member...) 来限制受保护的访问

如果你不控制它

*   撤消名称修改。如果您使用 dir(object) ，您将看到类似 _Class__member 的名称，这是 Python 引导 __ 将其“设为私有”的方式。python中没有真正的私有。这可能被认为是邪恶的。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2014-01-19T13:06:06.747

# 两种保护理念

一些语言设计者赞同以下假设：

> *“许多程序员不负责任，愚蠢，或两者兼而有之。”*

`private`这些语言设计者会很想通过在他们的语言中引入说明符来保护程序员免受彼此的伤害。不久之后，他们意识到这通常过于僵化，因此也引入了`protected`这一点。

相比之下，诸如 Python 的 Guido van Rossum 之类的语言设计者假定程序员是负责任的成年人并且能够做出良好的判断（也许并非总是如此，但通常如此）。他们发现，如果需要，每个人都应该能够访问程序的元素，这样语言就不会妨碍做正确的事情。（唯一可以可靠地阻止*做错*事的编程语言是[NULL](http://www.netfunny.com/rhf/jokes/new90/nullang.html)语言）

因此，`_myfield`在 Python 中的意思是“这个模块的设计者正在用这个属性做一些不明显的事情，所以请不要修改它，如果可以的话，甚至不要阅读它——访问相关信息的合适方法已经提供（或者我们希望如此）。”

如果您无法避免访问`_myfield`（例如在子类中的特殊情况下），您只需访问它。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2011-04-15T21:39:30.463

使用`@property`并`@name.setter` 做你想做的事

例如

```
class Stock(object):

    def __init__(self, stockName):

        # '_' is just a convention and does nothing
        self.__stockName  = stockName   # private now

    @property # when you do Stock.name, it will call this function
    def name(self):
        return self.__stockName

    @name.setter # when you do Stock.name = x, it will call this function
    def name(self, name):
        self.__stockName = name

if __name__ == "__main__":
      myStock = Stock("stock111")

      myStock.__stockName  # It is private. You can't access it.

      #Now you can myStock.name
      N = float(raw_input("input to your stock: " + str(myStock.name)+" ? ")) 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-08-27T11:31:31.187

似乎没有人回答最初的问题

> 如何从子类访问父类的私有属性

所以这是一个简单的用例，展示了两个选项 - 访问父类[__private 变量](https://docs.python.org/2/tutorial/classes.html#private-variables-and-class-local-references)和使用[@property 装饰器](https://docs.python.org/2/library/functions.html#property)：

```
class Family:

    def __init__(self, name):
        self.__family_name = name

    @property
    def name(self):
        return self.__family_name

class Child(Family):

    def __init__(self, first_name, last_name):
        super(Child, self).__init__(last_name)
        self.__child_name = first_name

    @property
    def name(self):
        return (self.__child_name, super(Child, self).name)

if __name__ == '__main__':
    my_child = Child("Albert", "Einstein")

    # print (my_child.__child_name)         # AttributeError - trying to access private attribute '__child_name'
    # print (my_child.__family_name)        # AttributeError - trying to access private attribute '__family_name'
    print (my_child._Child__child_name)     # Prints "Albert" - By accessing __child_name of Child sub-class
    print (my_child._Family__family_name)   # Prints "Einstein" - By accessing __family_name in Family super-class
    print (" ".join(my_child.name))         # Prints "Albert Einstein" - By using @property decorators in Child and Family 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-28T13:00:58.340

如果变量名是“__secret”并且类名是“MyClass”，您可以在名为“var”的实例上像这样访问它

var._MyClass__secret

建议/模拟保护的约定是使用前导下划线命名它：self._protected_variable = 10

当然，任何人都可以根据需要对其进行修改。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-10-22T05:51:53.150

我认为这段代码比史蒂夫的要清晰一些。史蒂夫的回答对我想做的事情最有帮助，所以谢谢！我用 python 2.7 和 python 3.6 对此进行了测试。

```
#! /usr/bin/python
#
# From https://stackoverflow.com/questions/797771/python-protected-attributes
from __future__ import print_function
import sys

class Stock(object):

    def __init__(self, stockName):

        # '_' is just a convention and does nothing
        self.__stockName  = stockName   # private now

    @property # when you do Stock.name, it will call this function
    def name(self):
        print("In the getter, __stockName is %s" % self.__stockName, file=sys.stderr)
        return self.__stockName

    @name.setter # when you do Stock.name = x, it will call this function
    def name(self, name):
        print("In the setter, name is %s will become %s" % ( self.__stockName, name), file=sys.stderr)
        self.__stockName = name

if __name__ == "__main__":
    myStock = Stock("stock111")

    try:
        myStock.__stockName  # It is private. You can't access it.
    except AttributeError as a:
        print("As expect, raised AttributeError", str(a), file=sys.stderr )
    else:
        print("myStock.__stockName did did *not* raise an AttributeError exception")

    #Now you can myStock.name
    myStock.name = "Murphy"
    N = float(input("input to your stock: " + str(myStock.name)+" ? "))
    print("The value of %s is %s" % (myStock.name, N) ) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-28T12:57:45.510

制作一个访问器方法，除非我遗漏了什么：

```
def get_private_attrib(self):
  return self.__privateWhatever 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-07T17:51:55.830

从[geeksforgeeks修改的代码](https://www.geeksforgeeks.org/protected-variable-in-python/#:%7E:text=Protected%20variables%20are%20those%20data,data%20member%20in%20a%20class.)

```
# program to illustrate protected
# data members in a class 

# Defining a class
class Geek: 
    # private
    __name = "R2J"
    # protected data members 
    _roll = 1706256
    def __init__(self, value):
        value1 = value
        self.value2 = value
    # public member function 
    def displayNameAndRoll(self): 

        # accessing protected data members 
        print("Name: ", self.__name) 
        print("Roll: ", self._roll) 

# creating objects of the class         
obj = Geek(1)
obj.__name = 'abc'
obj._roll = 12345

# calling public member 
# functions of the class 
obj.displayNameAndRoll() 
```

请注意，我可以在不设置受保护属性的情况下进行修改，但不能修改私有属性。

```
Name:  R2J
Roll:  12345 
```

OBS：在 python 3.8 中运行

# python - Django缓存 - 可以先发制人吗？

> ID：797773
> 
> 赞同：5
> 
> 时间：2009-04-28T12:56:05.873
> 
> 标签：python, django, caching

我有一个 Django 视图，它从外部网站接收部分数据，我使用 urllib2/BeautifulSoup 对其进行解析。

此操作相当昂贵，因此我使用低级缓存 API 将其缓存约 5 分钟。但是，当我去外部站点解析新数据时，缓存数据过期后访问该站点的每个用户都会收到几秒钟的显着延迟。

有什么办法可以懒惰地加载新数据，这样用户就不会得到那种延迟？还是这是不可避免的？

*请注意，我在共享托管服务器上，因此请记住您的答案。*

**编辑：**感谢到目前为止的帮助。但是，我仍然不确定如何使用我将调用的 python 脚本来完成此操作。我做的一个基本测试表明 django 缓存不是全局的。这意味着如果我从外部脚本调用它，它不会看到框架中正在进行的缓存数据。建议？

**另一个编辑：**想到它，这可能是因为我仍在使用本地内存缓存。我怀疑如果我将缓存移动到 memcached、DB 等等，这将得到解决。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-28T13:17:09.003

所以你想安排一些东西定期运行？以一些 CPU 时间为代价，您可以使用[这个简单的应用程序](http://code.google.com/p/django-cron/wiki/Install)。

或者，如果您可以使用它，每 5 分钟的[cron 作业](http://www.thesitewizard.com/general/set-cron-job.shtml)是：

```
*/5 * * * * /path/to/project/refresh_cache.py 
```

Web 主机提供了不同的设置方式。对于 cPanel，请使用 Cron 管理器。对于 Google App Engine，请使用[`cron.yaml`](http://code.google.com/appengine/docs/python/config/cron.html). 对于所有这些，您需要首先设置[环境](http://superjared.com/entry/django-and-crontab-best-friends/)。`refresh_cache.py`

顺便说一句，响应用户的请求被认为是惰性缓存。这是抢先缓存。并且不要忘记缓存足够长的时间以重新创建页面！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-28T15:09:15.927

“我仍然不确定如何使用我将调用的 python 脚本来完成此操作。”

问题是您的“我去外部站点解析新数据时的几秒钟的显着延迟”与 Django 缓存完全无关。

你可以在任何地方缓存它，当你去重新解析外部站点时，会有延迟。诀窍是在用户等待他们的页面时不解析外部站点。

诀窍是在用户请求页面*之前*解析外部站点。由于无法及时返回，因此必须定期解析外部站点并将解析结果留在本地文件或数据库或其他东西中。

当用户提出请求时，您已经获取并解析了结果，而您所做的只是呈现。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-29T23:55:33.720

I have no proof, but I've read BeautifulSoup is slow and consumes a lot of memory. You may want to look at using the lxml module instead. lxml is supposed to be much faster and efficient, and can do much more than BeautifulSoup.

Of course, the parsing probably isn't your bottleneck here; the external I/O is.

First off, use memcached!

Then, one strategy that can be used is as follows:

*   Your cached object, called `A`, is stored in the cache with a dynamic key (`A_<timestamp>`, for example).
*   Another cached object holds the current key for `A`, called `A_key`.
*   Your app would then get the key for `A` by first getting the value at `A_key`
*   A periodic process would populate the cache with the `A_<timestamp>` keys and upon completion, change the value at `A_key` to the new key

Using this method, all users every 5 minutes won't have to wait for the cache to be updated, they'll just get older versions until the update happens.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-29T16:20:31.880

您还可以使用 python 脚本调用您的视图并将其写入文件，然后使用 lightpd 静态传递它，例如：

```
request = HttpRequest()
request.path = url # the url of your view
(detail_func, foo, params) = resolve(url)
params['gmap_key'] = settings.GMAP_KEY_STATIC
detail = detail_func(request, **params)
out = open(dir + "index.html", 'w')
out.write(detail.content)
out.close() 
```

然后用 cron 调用你的脚本

# python - 如何让两个python程序交互？

> ID：797785
> 
> 赞同：2
> 
> 时间：2009-04-28T12:58:44.820
> 
> 标签：python, multithreading, ipc, process, interaction

我在一个程序中有一个 HTTP 服务器，在另一个程序中有我的基本应用程序。它们都是循环，所以我不知道如何：

1.  编写一个脚本来启动应用程序，然后是 HTTP 服务器；
2.  使这些程序在运行中交换数据。

这些事情通常是怎么做的？我真的很喜欢 Python 解决方案，因为我的脚本是用 Python 编写的。

1.  用户是否发出 http 请求来查询应用程序以获取某些数据并返回结果？**是的**

2.  应用程序是否收集数据并将其存储在某个地方？**该应用程序和 HTTP 服务器都使用 SQLite 数据库。但是 DB 可能不同。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T13:01:40.757

a) 您可以使用**os.system**启动应用程序：

```
 os.system("command") 
```

或者您可以使用**subprocess**模块。更多信息[在这里](http://docs.python.org/library/subprocess.html)。

b) 使用套接字

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T13:07:42.507

好吧，您可能只使用[subprocess](http://docs.python.org/library/subprocess.html#module-subprocess)模块。对于交换数据，您可能只能使用 Popen.stdin 和 Popen.stdout 流。当然，你/可以/做的方式没有限制。 [CORBA](http://omniorb.sourceforge.net/)、[DBUS](http://dbus.freedesktop.org/doc/dbus-python/doc/tutorial.html)、[共享内存](http://semanchuk.com/philip/sysv_ipc/)、[DCOP](http://www.kdedevelopers.org/node/124)，不胜枚举。但首先尝试简单的方法，在这种情况下是常规的 python 管道/流。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-28T13:05:31.107

在回答之前，我认为我们需要更多信息：

1.  这里有可定义的信息管道吗？
    1.  用户是否发出 http 请求来查询应用程序以获取某些数据并返回结果？
    2.  应用程序是否收集数据并将其存储在某个地方？

有几个选项取决于您实际使用它们的方式。套接字是一个选项或通过文件或数据库传递信息。

**[编辑]**根据您的回复，我认为有几种方法可以做到：

1.  如果您可以从 Web 服务器访问应用程序的数据库，则可以轻松地从那里提取您想要的信息。同样，这取决于您要交换的信息是什么。
2.  如果您的应用程序只需要给 http 服务器一些结果，您可以将它们写入 http 服务器数据库中的结果表中。
3.  正如其他人建议的那样，使用管道或子进程直接与后台应用程序交换数据。
4.  使用您的应用程序可以写入的日志文件和您的 http 服务器读取的日志文件。

还有一些问题：

1.  您在这里需要双向通信还是 http 服务器只是显示结果？
2.  你用的是什么网络服务器？
3.  你有哪些可用的处理语言？

根据这两个部分的依赖程度，最好编写一个新应用程序来检查应用程序的数据库是否有更改（使用挂钩或轮询或其他方式）并将相关信息发布到 http 服务器自己的数据库中。这样做的好处是使两个部分的耦合度降低，这通常是一件好事。

我有一个使用 fastcgi 模块与 Django 应用程序对话的网络服务器（Apache 2）。查看[djangobook 中关于 fastcgi 的部分](http://www.djangobook.com/en/2.0/chapter12/)。Apache 使用套接字（或常规 tcp）与后台应用程序（Django）通信。

**[编辑 2]**糟糕——刚刚发现您的网络服务器本身就是一个 python 进程。如果都是 python，那么您可以[在它自己的线程中启动每个线程](http://www.tutorialspoint.com/python/python_multithreading.htm)并将它们传递给两个[Queue](http://docs.python.org/library/queue.html)对象，这允许两个进程以阻塞或非阻塞方式相互发送信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T13:04:44.247

根据您想要做什么，您可以使用 os.mkfifo 创建一个命名管道以在两个程序之间共享数据。

[http://mail.python.org/pipermail/python-list/2006-August/568346.html](http://mail.python.org/pipermail/python-list/2006-August/568346.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-28T13:42:09.477

也许[扭曲](http://twistedmatrix.com/trac/)是你要找的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-28T13:28:34.640

当我用 Python 编写 Web 应用程序时，我总是将我的 Web 服务器与我的后台任务保持在同一个进程中。我不知道您使用的是什么网络服务器，但我个人使用的是[CherryPy](http://cherrypy.org/)。您的应用程序可以有一堆线程作为 Web 服务器，而您喜欢的其他线程也可以作为后台任务。这样，您就不需要任何复杂的 IPC 与套接字、命名管道等。相反，您只需访问共享的、全局的、同步的数据结构来传递信息，并且您的不同模块可以直接调用彼此的函数。

编辑：为了澄清，您可以使用[线程模块](http://docs.python.org/library/threading.html)在与其他阻塞服务器不同的线程中运行您的 CherryPy 服务器。例如：

```
def listener():
    sock = get_socket_from_somewhere()
    while True:
        client, addr = sock.accept()
        # send data back to client, etc

from threading import Thread
t1 = Thread(target=listener)
t1.setDaemon(True)
t1.start()

cherrypy.quickstart() # you'd need actual arguments here 
```

这个例子展示了如何在与 Web 服务器相同的进程中的一个线程中拥有一个阻塞服务器（在本例中为 CherryPy，尽管它可以是任何东西）。

# c# - DataBinding：“System.Data.DataRowView”不包含名为“image”的属性

> ID：797786
> 
> 赞同：1
> 
> 时间：2009-04-28T12:58:48.363
> 
> 标签：c#, .net, asp.net

我收到一个错误：

```
DataBinding: 'System.Data.DataRowView' does not contain a property with the name 'image'. 
```

我使用 xml 和 asp.net。

```
<%@ Import Namespace="System.Xml"%>
<%@ Import Namespace="System.Xml.Xsl" %>
<%@ Import Namespace="System.Xml.XPath" %>
<%@ Import Namespace="System.Data" %>
<%@ Import Namespace="System.IO" %>

<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
<script runat="server">

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            binddata();
            binddata2();
        }

        if (Session["userlevel"] == null)
            Response.Redirect("AdminLogin.aspx");
        if (Session["error_msg"] != null)
        {
            ErrorMessage.Text = Session["error_msg"].ToString();
            Session["error_msg"] = null;
            ErrorMessage.Visible = true;
        }
    }

    void binddata()
    {
        DataSet ds = new DataSet();
        try
        {
            ds.ReadXml(Server.MapPath("../App_Data/DefaultImage.xml"));
            gv.DataSource = ds;
            gv.DataBind();
        }

        catch (Exception e)
        {
            ErrorMessage.Text = e.Message;
            ds = null;
        }
    }
    protected void Editdata(object s, GridViewEditEventArgs e)
    {
        gv.EditIndex = e.NewEditIndex;
        binddata();
    }
    protected void Deletedata(object s, GridViewDeleteEventArgs e)
    {
        binddata();
        DataSet ds = gv.DataSource as DataSet;
        ds.Tables[0].Rows[gv.Rows[e.RowIndex].DataItemIndex].Delete();
        ds.WriteXml(Server.MapPath("../App_Data/DefaultImage.xml"));
        binddata();

        Session["error_msg"] = "The welcome image was deleted successfully";
        Response.Redirect("AdminDefault.aspx");
    }
    protected void Canceldata(object s, GridViewCancelEditEventArgs e)
    {
        gv.EditIndex = -1;
        binddata();
    }
    protected void Updatedata(object s, GridViewUpdateEventArgs e)
    {

        int i = e.RowIndex;
        string id = (gv.Rows[e.RowIndex].FindControl("txtimage") as TextBox).Text;
        string name = (gv.Rows[e.RowIndex].FindControl("txttext") as TextBox).Text;
        gv.EditIndex = -1;
        binddata();
        DataSet ds = (DataSet)gv.DataSource;
        ds.Tables[0].Rows[i]["image"] = id;
        ds.Tables[0].Rows[i]["text"] = name;
        ds.WriteXml(Server.MapPath("../App_Data/DefaultImage.xml"));
        binddata();

        Session["error_msg"] = "The welcome image was updated successfully";
        Response.Redirect("AdminDefault.aspx");
    }
    protected void pageddata(object s, GridViewPageEventArgs e)
    {
        gv.PageIndex = e.NewPageIndex;
        binddata();
    }

    protected void insert(object sender, EventArgs e)
    {
        binddata();
        DataSet ds = gv.DataSource as DataSet;
        DataRow dr = ds.Tables[0].NewRow();
        dr[0] = Image1.Text;
        dr[1] = Text1.Text;
        ds.Tables[0].Rows.Add(dr);
        ds.AcceptChanges();
        ds.WriteXml(Server.MapPath("../App_Data/DefaultImage.xml"));
        binddata();
        Image1.Text = string.Empty;
        Text1.Text = string.Empty;

        Session["error_msg"] = "The welcome image was added successfully";
        Response.Redirect("AdminDefault.aspx");
    }

    //---------------------------------------------------------

    void binddata2()
    {
        DataSet ds2 = new DataSet();
        try
        {
            ds2.ReadXml(Server.MapPath("../App_Data/DefaultBefore.xml"));
            gv2.DataSource = ds2;
            gv2.DataBind();
        }

        catch (Exception e)
        {
            ErrorMessage.Text = e.Message;
            ds2 = null;
        }
    }
    protected void Editdata2(object s, GridViewEditEventArgs e)
    {
        gv2.EditIndex = e.NewEditIndex;
        binddata2();
    }
    protected void Deletedata2(object s, GridViewDeleteEventArgs e)
    {
        binddata2();
        DataSet ds2 = gv2.DataSource as DataSet;
        ds2.Tables[0].Rows[gv2.Rows[e.RowIndex].DataItemIndex].Delete();
        ds2.WriteXml(Server.MapPath("../App_Data/DefaultBefore.xml"));
        binddata2();

        Session["error_msg"] = "The before-after image was deleted successfully";
        Response.Redirect("AdminDefault.aspx");
    }
    protected void Canceldata2(object s, GridViewCancelEditEventArgs e)
    {
        gv2.EditIndex = -1;
        binddata2();
    }
    protected void Updatedata2(object s, GridViewUpdateEventArgs e)
    {

        int i = e.RowIndex;
        string id = (gv2.Rows[e.RowIndex].FindControl("txtimagebefore") as TextBox).Text;
        gv2.EditIndex = -1;
        binddata2();
        DataSet ds2 = (DataSet)gv2.DataSource;
        ds2.Tables[0].Rows[i]["image"] = id;
        ds2.WriteXml(Server.MapPath("../App_Data/DefaultBefore.xml"));
        binddata2();

        Session["error_msg"] = "The before-after image was updated successfully";
        Response.Redirect("AdminDefault.aspx");
    }
    protected void pageddata2(object s, GridViewPageEventArgs e)
    {
        gv2.PageIndex = e.NewPageIndex;
        binddata2();
    }

    protected void insert2(object sender, EventArgs e)
    {
        binddata2();
        DataSet ds2 = gv2.DataSource as DataSet;
        DataRow dr2 = ds2.Tables[0].NewRow();
        dr2[0] = ImageBefore.Text;
        ds2.Tables[0].Rows.Add(dr2);
        ds2.AcceptChanges();
        ds2.WriteXml(Server.MapPath("../App_Data/DefaultBefore.xml"));
        binddata2();
        ImageBefore.Text = string.Empty;

        Session["error_msg"] = "The before-after image was added successfully";
        Response.Redirect("AdminDefault.aspx");
    }    

</script>
<div id="content">
    <div class="about">

 <b><i><asp:Label ID="ErrorMessage" runat="server" ForeColor="Red" /></i></b> 
 <h3>Add a welcome image and text</h3>  <br />
    <asp:Label ID="lblImage" runat="server" Text="Image Path" />
    <asp:TextBox ID="Image1" runat="server" />
    <asp:RequiredFieldValidator ID="RequiredFieldValidator3" 
    ControlToValidate="Image1" Font-Italic="true"
    Display="Dynamic" runat="server" ErrorMessage="(Required)" 
    ForeColor="Red" ValidationGroup="AddWelcome" />
 <br />

    <asp:Label ID="Label1" runat="server" Text="Image Text" />
    <asp:TextBox ID="Text1" runat="server" />
    <asp:RequiredFieldValidator ID="RequiredFieldValidator4" 
    ControlToValidate="Text1" Font-Italic="true"
    Display="Dynamic" runat="server" ErrorMessage="(Required)" 
    ForeColor="Red" ValidationGroup="AddWelcome" />

    <asp:Button ID="btninsert" runat="server" Text="Insert" onclick="insert" ValidationGroup="AddWelcome" />
    <br /><br />

    <asp:GridView ID="gv" Width="80%" runat="server" OnRowEditing="Editdata" AllowSorting="true"
    OnPageIndexChanging="pageddata" OnRowDeleting="Deletedata" BorderColor="Black"
    OnRowUpdating="Updatedata" OnRowCancelingEdit="Canceldata" AllowPaging="True"
    AutoGenerateColumns="False" PageSize="3" ForeColor="Black" GridLines="Both" >
        <RowStyle BackColor="white" />
        <Columns>
            <asp:TemplateField HeaderText="Image name">
                <ItemTemplate>
                    <asp:Label ID="lblimage" runat="server" Text='<%#Eval("image") %>' />
                </ItemTemplate>
                <EditItemTemplate >
                    <asp:TextBox ID="txtimage" runat ="server" Text='<%#Eval("image") %>' />
                    <asp:RequiredFieldValidator ID="RequiredFieldValidator1" 
                    ControlToValidate="txtimage" Font-Italic="true"
                    Display="Dynamic" runat="server" ErrorMessage="(Required)" 
                    ForeColor="Red" ValidationGroup="Welcome" />
                </EditItemTemplate>
            </asp:TemplateField>

            <asp:TemplateField HeaderText="Image text" >
                <ItemTemplate>
                    <asp:Label ID="lbltext" runat="server" Text='<%#Eval("text") %>' />
                </ItemTemplate>
                <EditItemTemplate >
                    <asp:TextBox ID="txttext" runat ="server" Text='<%#Eval("text") %>' />
                    <asp:RequiredFieldValidator ID="RequiredFieldValidator2" 
                    ControlToValidate="txttext" Font-Italic="true"
                    Display="Dynamic" runat="server" ErrorMessage="(Required)" 
                    ForeColor="Red" ValidationGroup="Welcome" />

                </EditItemTemplate>
            </asp:TemplateField>

            <asp:CommandField ShowEditButton="True" ValidationGroup="Welcome" />
            <asp:CommandField ShowDeleteButton="True" ValidationGroup="Welcome" />
        </Columns>

        <PagerStyle ForeColor="Maroon" HorizontalAlign="Center" Font-Bold="true"/>
        <SelectedRowStyle BackColor="Crimson" Font-Bold="True" ForeColor="White" />
        <EditRowStyle BackColor="White" Font-Bold="true" ForeColor="Maroon" />
        <HeaderStyle ForeColor="White" BackColor="Maroon" Font-Bold="true" />
        <AlternatingRowStyle BackColor="AntiqueWhite" />

    </asp:GridView>
    <br />
    <br /><br /><br />

xml file

DefaultBefore.xml

<?xml version="1.0" standalone="yes"?>
<images xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <image>
    App_Themes/theme/html/images/beforeafter1.jpg
  </image>
  <image>
    App_Themes/theme/html/images/beforeafter3.jpg
  </image>
  <image>
    App_Themes/theme/html/images/beforeafter5.jpg
  </image>
</images>

DefaultImage.xml

<?xml version="1.0" standalone="yes"?>
<NewDataSet>
  <images>
    <image>
    App_Themes/theme/html/images/title1.jpg
  </image>
    <text>
    A dog is a man's best friend... Dog Club is a dogs best friend.
  </text>
  </images>
</NewDataSet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T13:45:42.493

尝试重构您的 XML：

```
<images>
    <image>
        <path>
            App_Themes/theme/html/images/beforeafter1.jpg
        </path>
    </image>
    <image>
        <path>
            App_Themes/theme/html/images/beforeafter3.jpg
        </path>
    </image>
    <image>
        <path>
            App_Themes/theme/html/images/beforeafter5.jpg
        </path>
    </image>
</images> 
```

然后修改您的数据绑定表达式：

```
<%# Eval("path") %> 
```

# java - 如何在 Java 中自定义 ThreadFactory 的子线程的所有名称？

> ID：797790
> 
> 赞同：0
> 
> 时间：2009-04-28T12:59:37.847
> 
> 标签：java, multithreading

如果我正在扩展现有的 ThreadFactory 实现，我将如何确保创建的所有线程都具有相同的前缀？我厌倦了查看`Thread-9`日志，并希望更轻松地区分线程。

有人对如何解决这个问题有任何建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-28T13:03:15.030

提供您自己的 ThreadFactory 接口实现：

```
pool = Executors.newScheduledThreadPool(numberOfThreads, new TF());

class TF implements ThreadFactory {
    public synchronized Thread newThread(Runnable r) {
        Thread t = new Thread(r) ;
        t.setName("Something here....");  
        return t;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-12T11:04:36.070

您应该使用自己的自定义线程工厂。默认工厂用处不大。实现 ThreadFactoryBuilder 来创建自定义线程工厂，允许您执行以下操作：

1.  有自定义线程名称
2.  可以选择线程 - 用户线程或守护线程
3.  可选择线程优先级
4.  可以灵活地设置未捕获的异常处理程序

您可以使用以下帖子中的示例 ThreadFactoryBuilder 实现。

[http://wilddiary.com/understanding-java-threadfactory-creating-custom-thread-factories/](http://wilddiary.com/understanding-java-threadfactory-creating-custom-thread-factories/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T13:04:01.173

你能提供你自己的[ThreadFactory](http://java.sun.com/javase/6/docs/api/java/util/concurrent/ThreadFactory.html)吗？这将允许您使用所需的任何命名约定创建线程。

# language-agnostic - 如何让开发者遵循编码标准？

> ID：797807
> 
> 赞同：21
> 
> 时间：2009-04-28T13:02:07.793
> 
> 标签：language-agnostic, coding-style

如何让开发人员遵循编码标准？

在我们公司：

1.  我已经提供了文件，他们没有耐心阅读和遵循它。
2.  我试着一遍又一遍地告诉他们“请这样做”，他们点头，但仍然以错误的方式做
3.  我们正在第三次做一个项目，但他们似乎仍然没有正确地遵循它。

我现在厌倦了这个。设置编码标准并确保他们遵循这些标准的最佳方式是什么？

### 编辑：

我的团队中只有大约 10 名开发人员。他们压力过大，没有花时间发表评论和整齐地编写代码，因为我们管理层对完成产品的压力更大。解决方案是什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-04-28T13:03:59.833

自动化它。

您可以将**StyleCop**和**FxCop**（VS2008 中的代码分析）集成到您的构建过程中。

因此，当有人检查违反规则的东西时，构建将中断，他们将不得不修复它。如果您没有支持此功能的自动构建过程，您始终可以在代码审查等之前手动运行这些工具。

你可能找不到与你的编码标准完美匹配的东西，但你应该能够得到非常接近的东西。

风格警察

[http://code.msdn.microsoft.com/sourceanalysis](http://code.msdn.microsoft.com/sourceanalysis)

外汇警察：

[http://blogs.msdn.com/fxcop/](http://blogs.msdn.com/fxcop/)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-04-28T13:10:15.323

编写标准时是否咨询了开发人员？我讨厌必须遵循某人突然提出的指导方针，并且没有咨询一些开发人员。它一直在发生。

让我感到困扰的另一件事是有人给了我要遵循的指导方针，这实际上不适用于生产代码。理论上的正确做事方式和实际正确的做事方式是有很大区别的。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-04-28T13:06:15.410

去找更听话的开发者。

严肃地说：我可以对自己说，我倾向于忽略（或不愿遵循）我认为完全不合理、过于专制或愚蠢的做法。试着和你的人谈谈，问他们不喜欢医生的什么。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-04-28T13:03:21.143

你有标准。你有一个流程让他们遵循。如果他们不遵守，终止他们并寻找可以遵守标准的合格人员。

进一步来说，

1.  在项目开始时，与团队一起审查标准。告知他们必须遵守。
2.  在项目结束时，进行审查以确保其得到遵守。如果不是，请与负责不追随的个人一起工作。询问原因等问题。
3.  给他/她第二次机会。
4.  如果重复，终止个人。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-04-28T13:08:58.900

他们是无能、懒惰还是无知？

我对这种事情的经验是，它始于领导力和优先权。优先级，这意味着人们弄清楚线的位置，然后他们就在那里闲逛。我能想到的一个例子是一位新程序员进入了一份由同一个人担任了 12 年的工作。他必须维护的代码是一团糟。所以他知道他可以逃脱谋杀......因为最后一个人是自愿离开的，在 12 年的无能后从未被解雇。

如果你已经把这条线划得太远了，那就把它控制住。明确地解雇他们中的一个，因为他们不遵守标准。

听起来你已经试图治愈无知的人，只留下懒惰和无能的人......这两者都不值得治愈。如果我是你，我会赶尽杀绝。如果这不起作用，请寻找管理之外的工作。

编辑：为了响应您的“加压”添加，项目经理应尽最大努力吸收尽可能多的压力。最好的经理知道他们的团队有什么能力，并且知道如何告诉管理层这一点。您需要成为团队和管理层之间的联络人，如果管理层匆忙行事，您应该向他们明确表示质量会受到影响。如果有钱的人对质量的关注不如对完成工作的关注……好吧，你不能对标准挑剔。如果他们想要质量，他们会听一位自信的经理告诉他们，如果不执行标准，他的程序员就无法创建高质量、可维护的应用程序。

如果他们感到压力是这样做的原因，那么你需要自己努力吸收更多的压力，而不是让它进入你的团队。这是作为项目经理的重要组成部分。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-04-28T13:04:10.300

听起来你不够尊重。

进行代码审查，并与团队讨论编码标准。也许他们不遵守是因为他们不同意。变通。

也许如果你第三次做一个项目，那是你做错了。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2009-04-28T13:08:32.317

如果您对他们有资历，那么请进行代码审查，并因不遵守编码标准而使他们失败。如果它继续，你可以给他们一个正式的警告。如果它继续下去，你可以解雇他们，让人们在他们的生活中花 20 分钟阅读编码标准文档一次。

我不知道您使用什么 IDE，但 Eclipse 允许您设置代码格式化程序，您可以分发给您的开发人员，所以这也可能是一个想法。

然而，可能存在一个潜在的问题——其他开发人员不喜欢你的编码标准。最好先查明是否是这种情况。如果您的编码标准实际上不是您的语言中的通用标准，那么只要他们能够摆脱它，他们可能只是被动攻击。也许您应该让他们参与开发他们都非常满意的编码标准。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2010-05-26T13:25:49.250

你需要[学会平静](http://www.google.com/search?source=ig&hl=en&rlz=&=&q=serenity+prayer&aq=f&aqi=n1g10&aql=&oq=&gs_rfai=CEsuh6yD9S6C2O5v4ygS4ir2lBQAAAKoEBU_Q9txn)！这是一种常见的情况。即使你变得更高级并且更有能力影响事物，你也无法做出完美的编码情况。只要努力做到最好，自己做一个好榜样。

无所不知的超级明星同事也是永远不会消失的东西。 [不过，您可以做一些事情](https://stackoverflow.com/questions/1844632/how-do-deal-with-developers-that-over-complicate-projects/1844687#1844687)。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-04-28T13:12:42.370

摆脱它们并找到新的。如果他们懒得把事情做好，他们就不值得被雇用。在这种经济环境下，到早上你手上就会有 100 份简历。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-04-28T13:05:50.640

**技术解决方案** 如果您使用的是 Team System，您可以使用[签入策略](http://msdn.microsoft.com/en-us/magazine/cc163320.aspx)来执行它。其他版本控制系统无疑支持类似的东西。为此，您需要[TFS Server Power 工具](http://msdn.microsoft.com/en-us/teamsystem/bb980963.aspx#checkin)。

**非技术性** 除了技术解决方案之外，您可能还想解释您需要这些编码标准的原因（质量、法律等）。他们可能会觉得该政策过于严格或根本不了解必要性。如果你能说服他们这样做的必要性，你将不再需要强迫他们。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-04-28T13:19:38.983

我同意安东。你需要他们的支持，否则编码标准只是武断的规则，旨在给他们带来不便（最好的情况）或扼杀他们的创造力（最坏的情况）。

我还建议使编码标准简洁明了，并且在大多数情况下，告诉您的开发人员他们*不应*该做什么，而不是提供他们*应*该做什么的详尽清单。找到他们合理同意的东西（比如“避免使用像瘟疫这样的空 catch 块，因为它们只是掩盖错误”）。让人们知道*他们*是开发标准的受益者，以实现大多数人的认可。

急于解雇不服从的员工不是答案。将这变成对您的开发人员的**积极体验，每个人都会获胜。**

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-04-28T13:25:47.657

> 编辑：我的团队中只有大约 10 名开发人员。他们压力过大，没有花时间发表评论和整齐地编写代码，因为我们的管理层有更大的压力来完成产品。对此有什么解决方案？

根据我的经验，需要一个非常强大的人来“培训”高层管理人员了解软件开发的实际工作方式并与他们抗衡。很明显，您对自己的情况感到非常沮丧，但不幸的是，这可能无法解决。你可能不会得到你需要的资源或合作。我曾在那种环境中工作过，我的解决办法是另谋高就。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2009-04-28T14:39:36.653

编码指南很重要，但请注意不要：

*   太迂腐了。易于遵循/易于记忆的规则很好。公共（例如：对您的客户）接口标准很好。如果必须将内部变量称为 num_of_elements 或 number_of_elements 或 nelem，则强加太多。
*   从标准化到他们的创造力。例如，决定禁止 Singletons 就太过分了。成为一名程序员与成为一名艺术家并没有什么不同。你必须留下一定程度的创造力。

此外：

*   进行同行评审。当一个开发人员提交一些代码时，另一个开发人员必须对其进行审查并批准它，这也是在编码标准方面。如果发现错误，您不会将责任归咎于一个人，这从来都不是好事，但是您会将错误同时发生在两个（愿意或不愿意）开发人员身上的机会分开。
*   如果您是经理，请务必抽出时间进行此审查，甚至与他们一起编写代码。一个好的经理是团队的一部分，分担团队的任务和负担。如果你只是一个“邮件、文件和订单”类型的经理，你将不会得到你的团队的尊重，特别是如果你是由狂热者组成的，而不是盲目的打字猴子。当你是一个更有经验的团队成员时，和他们一起弄脏你的手。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2010-05-26T13:29:43.203

如果这真的很重要，你将不得不向他们证明他们为什么错了。

> 他们捕捉并`Throwable`压制

想出一些导致灾难的测试输入应该不是很难。

> 返回`null`_

这不像抑制那么严重`Throwable`，但仍然会导致问题。向他们展示导致他们的代码`NullPointerException`被抛出的位置。您还应该向他们展示要返回什么而不是`null`（空数组、[Null Object](http://en.wikipedia.org/wiki/Null_Object_pattern)等）以及在调用代码中使用它有多容易。

> `String`在大循环中连接s

这几乎没有那么糟糕。如果是我，你必须向我表明，有问题的循环是系统中的瓶颈，并且连接正在显着减慢速度。对应用程序进行基准测试并找出答案。

对于您认为有问题的任何练习，您需要能够证明两件事：

1.  为什么是错的。
2.  正确的方法。

如果你不能同时做到这两点，那么你就没有给他们足够的理由来改变他们的习惯。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2010-05-26T13:41:54.603

如果你的同事和管理层不关心代码质量，你不能强迫他们关心。如果您真诚地试图说服他们，但您被忽视了，那么您实际上并不能更进一步。

> 我实际上已经厌倦了自己重写那些糟糕的代码。

我认为是时候悄悄地开始寻找新工作了。同时，抵制出于修复错误以外的原因重写垃圾代码的诱惑。并尝试让罪魁祸首修复他们自己的错误。

话虽如此，团队负责人可能比他所表现出的更关心这一点。他可能根本无法采取必要的行动来处理低质量的文化。例如，如果项目落后，解雇员工可能不是一种选择。或者，也许他在人员配备问题上没有任何真正的影响力……而罪魁祸首知道这一点。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-04-28T13:06:32.570

我同意乔的观点。作为持续集成过程的一部分，尽可能多地自动化它。越容易遵守而不失去手头任务（编程）的注意力，就会有越多的人遵守。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2009-04-28T13:20:25.410

自动化可能是问题的最佳答案，前面提到的 fxcop 或团队系统解决方案运行良好。

这里可能还有另一个问题，我知道当我还是一名初级开发人员时，我收到了一份巨大的编码标准文档，并要求构建与之匹配的所有内容。我记得我被大量的项目压得喘不过气来，我根本不记得要全部完成，尤其是在试图让某件事情在最后期限前完成的时候。

如果您的标准很冗长，那么可能值得挑选出您最希望看到固定的项目并专注于这些项目，然后逐步加入其他项目，这可能比期望他们立即改变所有坏习惯更好。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2009-04-28T13:27:16.500

也许您的标准过于严格，编码标准很好，但有时更多就是更少。给他们一份关于他们的代码外观的一页摘要，进行代码审查并让那些不符合标准的人失败。我也喜欢自动化的建议。

向他们解释为什么编码标准是一件好事。

我在 Visual Studio 中使用 Code Style 执行器，而 eclipse 执行编码标准。

[http://joel.fjorden.se/static.php?page=CodeStyleEnforcer](http://joel.fjorden.se/static.php?page=CodeStyleEnforcer)

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2009-04-28T14:00:06.390

您应该在高级开发人员审查其他开发人员的代码的地方设置代码审查。如果他们不遵守约定，他们将无法通过代码审查，并且不会进入存储库。

这需要一点人工工程，因为它更多地基于流程而不是基于软件。

哦，紧迫的最后期限并不是糟糕代码的借口。作为程序员，我们的工作是编写可被团队其他成员维护的可靠质量代码。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2009-04-28T14:25:30.043

听起来你不像他们的经理。如果没有，您需要做的第一件事就是获得管理层的支持。让您的开发经理将开发人员对标准的遵守情况整合到他们的员工审查中。你应该有足够的数据点来向你的老板推销这个概念……编码标准的好处在网络上有很好的记录。

其次，开发人员自己对编码标准有某种输入是很重要的。否则，感觉就像您在真空中规定标准。如果开发人员对公司编码指南中的内容有发言权，他们更倾向于遵循它。

最后，使用前面的答案中提到的自动化工具将减少代码审查的痛苦，因为您至少可以期望最低限度的合规性。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2009-05-12T15:02:41.180

我将首先改写您的问题：“我如何让开发人员相信遵循编码标准会使他们的生活变得更好？”

答案至少有两个部分：

1.  作为倡导者，举证责任在你身上：如果你不能提出商业案例来说明为什么采用这些标准会以可衡量的方式让生活变得更好，那么你的编码标准就不值得采用。这是你的主要绊脚石：你已经有一个组织，人们被雇用来工作，所以企业显然已经取得了一些成功。你的标准如何让事情变得更好？你的答案应该用美元或人们生活的时间来表达（这在工作场所实际上是一样的）。

2.  简单更好。如果您的标准文档很长，那么忙碌的开发人员会立即忽略它。在我的世界里，最好的文件不超过一页。对于编码标准，我倾向于创建一张示例代码。如果我成功地制作了上面的商业案例，我就会对团队说，“请让你的代码看起来像这样。”

如果你错误地让更多的高级管理人员参与了这个讨论，那么第 1 点就更重要了。在准确了解您的编码标准将为组织节省多少美元时，他们会出人意料地残酷。如果你仔细考虑，你可以赢得这个论点：例如，减少调试时间可以减少每小时的成本，因为人们能够快速检查错误列表。那是节省的现金。

如果你犯了威胁工程师的错误（例如，上面的终止建议），你很有可能最终会出现在 Daily WTF 上。

如果您设法在第 1 点和第 2 点取得成功，那么对标准验证的实际支持已经很好理解了。确保尽可能多地在 IDE 中处理（control-shift-F 以正确格式化等）、自动检查工具等。

技术方法是最简单的部分。人的问题总是最难的（也是最重要的）。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2009-05-12T15:19:45.973

您可以尝试为他们提供徽章和声誉积分。;)

不过说真的，也许某种“金星/皱眉脸”系统会通过相互竞争来激励他们，也许会减轻一些情绪……我并不是说给他们金星或皱眉脸，因为那太傻了。只是一些一般的奖励制度。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2010-05-26T13:20:38.507

在我成为团队负责人并获得报酬来担心这些事情之前，我不会担心它。如果他写了糟糕的代码，那就顺其自然，做你自己的事，你可能没有得到足够的报酬来担心它。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2009-04-28T13:07:35.923

你试过在指关节上用木尺吗？在学校为我工作：P

不过说真的，标准是要遵守的，如果没有遵守，而你有能力通过培训和纪律处分，那么请遵守纪律程序。如果你不是，并且你不能说服你的上级应该遵循这一点，那么你似乎有两个选择：

*   吸吮它并充分利用它
*   开始寻找另一份工作

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2009-04-28T13:08:28.603

使用智能代码格式化程序和可能的分析工具来检查是否遵循标准。

使用一些会议来介绍标准。

每月为最符合标准的程序员推出一种奖励。

如果一切都失败了，请摆脱它们。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2009-04-28T13:08:31.817

根据我的经验，人们不遵守标准是因为他们不了解或不关心标准。有时，即使它们是新的并且被认为很重要，编码标准的沟通也很差。

此类问题应通过以下方式解决

*   **训练**
*   **沟通**
*   **评论**

如果人们不听，团队负责人应该关心它并帮助迫使指导方针被认真对待。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2009-04-28T13:11:17.100

开会讨论与编码标准实施相关的利弊。听取每个同行的不同意见并过滤掉所有建议。

传达遵循标准的重要性及其好处，以完全理解它们。

让它们成为一种习惯。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2009-04-28T13:27:51.350

说话，说话，和他们说话，我想如果你知道那是一个优秀的程序员，你就不能失去他/她。你写代码的方式不容易碰巧，当你更担心写下你的想法时很容易忘记新标准。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2009-04-28T13:32:16.690

每个开发人员都有自己的编程风格，这取决于他在各种语言或各种工作环境中的经验。每个人都会根据许多因素发展自己的风格。你不能让某人遵循严格的编码准则。

一种可能的解决方案（尽管成功率有限）是**收集他们并讨论**需求，从他们那里获得关于他们自己风格的**反馈**，并尝试在这些之间找到折衷方案。尝试将此折衷方案提交给您的上级或为您的公司编写编码标准的人。

此外，应该告诉开发人员编码标准化的重要性，而不是强迫他们采用您的标准并阅读整页关于他们应该如何编写代码的内容。沟通是解决问题和摆在桌面上的解决方案的最佳方式。没有沟通，就只有混乱。

正如建议的那样，您还可以在修订之前尝试使用代码样式格式化程序。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2009-04-28T14:01:06.340

在查看您在 SO 提出的问题时，我想说您的开发人员存在验收问题。您不应该被视为应该告诉高级开发人员如何完成工作的人。

因此，专注于需要什么，而不是如何。他们应该能够理解拥有编码标准的重要性。但这应该是他们的标准，而不是你的标准。让他们下定决心，确保他们有足够的时间谈论他们并做出决定，然后写下他们的决定。然后你可以在他们不遵循标准时做一些事情。

[编辑] 更换或教育管理层。管理层不在乎，所以他们为什么要关心。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2009-04-28T19:00:43.470

虽然我完全同意自动化您的标准，但我真的很好奇贵公司的标准是什么，以及这里有多少人会做与您的开发人员正在做的事情完全相同的事情。

我曾与一些人一起工作，他们将他们认为是标准的完整文件打了出来，并试图将它们传递给他们的同事。这是他们失败的地方：

1.  他们在泡沫中创造了它们。未咨询团队。
2.  它们基于我们没有使用的语言。
3.  大多数规则都有一个被大多数人认为是缺陷的基础。“如果你有一个大的方法/类”是变量前缀的理由；为什么不只是有小方法/类而不担心你命名的东西呢？
4.  评论方法基于他们的学术规则。过于冗长的函数头等。
5.  他们专注于错误的事情。这些主要集中在变量、方法和类的命名上，因此它们将遵循某种形式（某些前缀）而不是内容——“它们是否准确地说明了它们是/做什么？” 是唯一与命名有关的问题（除了它的语言......）。
6.  他们只是没有影响力让人们关心。

最好的办法是每周召开一次代码审查会议，将符合标准***的***代码放在屏幕上，并获得同事的批评。你会看到你的标准在哪里失败，你会在他们面前得到“好”的代码。看到良好的实践实践应该会影响未来的决策。

只要准备好谦卑——问题可能出在你身上。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2009-04-28T22:31:45.613

如果没有更多信息，很难解决这样的问题，但根据我的经验，我看到人们出于多种原因偏离了既定的代码标准。

以下是一些常见的原因：

*   截止日期不断变化导致[技术债务](http://martinfowler.com/bliki/TechnicalDebt.html)（转移目标职位），
*   “把事情做好”的心态（通常由管理层驱动）
*   缺乏同行评审
*   缺乏责任感
*   对编码标准或标准的分歧过于细化/限制性
*   标准不够明确或没有正确理解

您的第一步应该是尝试了解人们为什么不遵守标准，然后再找出执行标准的方法——如果这是第三个项目，显然有些问题不会轻易解决。

归根结底，您需要能够证明执行标准的成本（时间/精力）是合理的——即，如果标准非常细化，那么它的成本会比更宽松的标准更昂贵。

其次，如果你想让人们认真对待它们，你需要在公司内部有一些影响力来执行标准。您可能需要举一个不遵守商定标准的人的例子（见下文）。

最后，无论您认为他们是否有足够的经验，您都确实需要征求开发团队的意见。如果有的话，你真的需要能够通过说你给每个人提供反馈和输入的机会来证明编码标准的合理性——即它是一个公认的标准。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2009-04-28T22:35:12.533

简单地告诉他们这样做，说你的方式是正确的方式肯定会失败。几乎 100% 保证它会失败。我没有看到任何例外。（你可以引用尽可能多的书籍和网站以及该主题的专家，结果是一样的）

根据公司的年龄，工程师的动力是使该公司成为现在这样的公司的原因，因此，如果他们追随这种动力，那么他们就是以正确的方式做事的人。

如果你想成功

1）你必须有大量的支持，这意味着团队必须致力于解决方案，而不是被要求

2) 大的改变会失败，如果公司已经存在足够长的时间，你必须努力打磨，而不是重新开始。做一些小的调整，一开始只做一两个调整。如果你成功了，那么你可以尝试另一个，如果你失败了，那么放弃......当在罗马......

如果它让您如此困扰，那么您可能是在错误的工作或在错误的公司从事正确的工作。

标准、流程等通常与堕胎和宗教一样敏感，你推动的越多，他们挖掘的越多，你取得任何进展的可能性就越小。

使用或引用 tqm、cmm、5s、iso、6 sigma 等时尚是失败的秘诀。现在作为一名承包商，从一家公司到另一家公司教授这些时尚，这会让你变得富有，也许你应该研究一下。

如果您在没有团队的情况下这样做，那么团队中就没有我，那么您将失败。让管理层支持而不是团队支持会导致叛乱，然后是失败或裁员、失败或罢工和失败，失去关键员工和失败。您必须加入他们而不是与他们战斗，此时您必须撤消已经进行的战斗，这将是一场山上的战斗。

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2009-05-19T11:02:27.040

根据编码标准文档强制执行代码审查，如果不遵循编码标准则拒绝，并在标准构建过程中包含代码美化器 ( [http://sourceforge.net/projects/gcgreatcode )。](http://sourceforge.net/projects/gcgreatcode)干净编译后（没有错误，没有编译器警告，没有 lint 警告，..）调用 greatcode。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2009-08-09T11:52:15.830

我负责在我们公司内推出标准。有很多事情奏效了，我学到了很多教训。遵循这些标准的开发社区大约有 25 人。首先要确定的是文化和对标准的兴趣，因为这将决定您的方法。您需要做的第一件事就是管理层的支持。可能有些项目经理对标准的唯一看法是认为标准会导致截止日期的延误。从根本上说，您需要高级技术经理的支持，他们认识到代码审查和标准是解决“技术债务”的基本工具。有许多理由和资源来描述这一点，

如果技术债务是一个问题，那么您的组织已经存在开发时间表、测试、迅速增加的支持积压，甚至可能出现高员工流动率的问题。如果您需要强调高级管理层面临的挑战，这些都应该可以（大致）量化。

您需要说服的下一个人是开发人员自己。你会有一些人是积极的，一些人是反对的。在我们公司，我们成立了一个“标准”小组，并邀请了跨部门的开发人员参与其中。当标准文件被引入时，标准组在推出之前讨论并同意了它们。

我们发现传达包容和积极的信息很重要。“我们”会这样做，而不是“你”必须这样做。诸如“这些标准将帮助我们所有人了解更多，并且从长远来看将使我们的生活更轻松”之类的陈述也有帮助。将标准作为学习和掌握新技能的工具（您总是会这样做）。

标准的背后是正式的代码审查。执行此操作的过程很可能已根据您组织的个人需求量身定制，但最重要的是要表明代码审查不是批评。同样重要的是不要将个人表现与他们失败的代码审查次数联系起来。对他们支持这一进程的普遍意愿进行一般性观察就足够了。

在我们的组织中，标准引入后（尤其是早期）发现它们相当不稳定并且会发生变化（随着我们对它们的相关性和适用性了解得更多），因此我们遇到了向开发社区传达变化的问题。我们没有为开发人员找出一份文件让他们在闲暇时仔细阅读，而是举办了培训日和简报会。这些是开发人员离开办公桌的时候，帮助个人感觉他们有机会挑战和质疑。在这些培训课程中，我们还展示了新的技术和想法，再次传达了“这真​​的很有用，它将让我们的生活更轻松”的信息。

我们会定期举行标准审查会议，每个人都可以反馈他们认为什么有效和无效。这一切都传达了这样一个信息，即开发人员并没有被强制执行，从长远来看，我们只是想让他们的生活更轻松。当然，对标准和最佳实践（以及参与其中）的良好掌握会在任何人的简历上看起来不错！

对时间尺度的任何估计都应考虑代码审查，并且管理层应认识到，至少在引入标准之后的短时间内，“输出”可能会下降。

你遇到的任何阻力几乎肯定是被动的，人们会拒绝遵循标准或代码审查。这很难处理（如果您对他们友好，有时可能会令人不快）。如果您有一个足够的系统来记录代码审查和参与，那么您将有一些指标用于反馈到性能审查中（尽管我只主张将其作为最后的手段）。这是您的管理层支持最重要的地方。

最后，在某些情况下，当芯片出现故障时，我们必须低头疯狂地编码。这些经常看到标准消失了。在这里要做的重要事情是将标准和评论嵌入到您的流程中，以至于这是不可能的。

我可能可以就此写一篇完整的文章，并详细说明。我希望以上内容是有道理的，因为它是一个脑残！

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2010-04-11T12:22:39.107

首先要有一个由每个人都尊重的资深人士批准的编码明智的编码标准。不要把这份工作交给那些对编程一无所知或想要执行他/她在 Internet 上找到的第一个文档的 MBA 质量保证人员。最重要的是，听取团队中每个人的意见和建议。

接下来，请注意没有人会阅读该文档。不仅编码风格对我们大多数人来说是一个宗教问题，而且无论如何我们都有太多要阅读的内容，而且通常会在这件事上拖延。

最好的方法是让它成为构建过程的一部分。如果代码无法编译，您的程序员将修复它。如果他们必须做更多的点击......你也可以有一个预提交脚本（svn 有那些预挂钩）。基本上，这是一个可以自动化的过程，这正是每个人都避免手动做的事情。

然而！意识到：

*   如果该工具正在强制执行其他样式（配置错误）
*   项目清单

遗留代码

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2010-05-26T13:29:37.510

员工？就是这样——我派这些人去人力资源部讨论职业道德，威胁解雇。

遵循标准不是可选的。作为员工或承包商，必须遵循编码风格。故意不这样做，就是违约。包括让他们为清理烂摊子的外部顾问付费。包括 - 在重复时 - 因违反合同而终止。

这很简单——如果我聘用你作为我团队的程序员，而你不听从命令，让自己在团队中毫无用处，你就没有资格加入该团队。

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2010-05-26T13:51:02.237

[http://en.wikipedia.org/wiki/Dunning%E2%80%93Kruger_effect](http://en.wikipedia.org/wiki/Dunning%E2%80%93Kruger_effect)

[http://psycnet.apa.org/?fa=main.doiLanding&doi=10.1037/0022-3514.77.6.1121](http://psycnet.apa.org/?fa=main.doiLanding&doi=10.1037/0022-3514.77.6.1121)

也解释了为什么大多数司机认为自己高于平均水平。基本问题是，要准确评估自己的能力，您需要有足够的能力才能做到这一点。最不称职的人也最不知道自己缺乏的技能。

在你的位置上，我也会考虑上面的一些建议。

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2010-05-26T14:19:50.690

我可能会间接地攻击这个*问题*。与其指向他的代码并说它需要变得更好（或按此顺序进行），您可以回到规范以了解您应该做什么。它可能已经有他违反的要求（或至少是指导方针）；如果是这样，你有真正的根据说他所做的事情确实*不太*好。

如果它尚未包含任何此类要求，则取决于规范的流畅程度，您可能能够努力添加一些此类要求（或至少是指南）。

另一种可能性是考虑一套公司范围的编码指南。如果已经有一个，他可能违反了它的要求。如果是这样，你（再次）有一个真正的基础说他需要改变他的方式。如果还*没有*一个到位，您可以考虑尝试将一个到位。

就像总有至少一个程序员做的很糟糕一样，也总有至少一个官僚会欢迎更多的规则和规定。稍微看一下，你几乎肯定能找到至少一个这样的。很有可能你能找到这样的人，在他的职责范围内，这样一套指导方针至少在某种程度上是合理的。

向他提出一个建议（根本不直接提及当前的问题），公司确实*应该*有一套关于如何完成编码的指导方针。销售此类产品的一种方法是提及 ISO 9000（和相关）标准，并指出这些对于企业来说确实*是*最佳实践，即使它们不打算被认证为符合标准。

不过要做好准备：当/如果你这样做了，你几乎肯定会（有效地）自愿努力制定指南。如果您足够年轻，他们可能会决定正式让其他人负责，但他们可能会将其视为“您的想法”，因此您很可能仍然会做大部分工作。既然如此，如果你要走这条路，请准备好“真正地”去做。如果你真的制定了一份全公司范围的指导方针，你真的需要从适合整个公司的角度来思考，而不仅仅是处理你对相关人员编码的烦恼。

还要注意，这类事情会对你的职业生涯产生重大影响——如果你最想要的是成为一个坐在他的隔间里独自编写代码的人，这可能不是一个好主意。它几乎肯定会让你更加引人注目，并且作为一个或多或少的管理类型的人，而不仅仅是一个编码器（当你/如果你搬家时，这很可能会跟随你到你的下一份工作）。这并不总是坏事，但你需要考虑它是否是你真正想要的。

* * *

## 回答 #40

> 赞同：0
> 
> 时间：2010-05-27T11:10:27.800

给他们自己的（彼此的）旧代码来修复、扩展、维护、修改、重构、优化等等。最好是每几段代码来自多个其他。

请求有关他们必须使用的代码质量的报告。

将报告交给代码的原始作者。

* * *

## 回答 #41

> 赞同：0
> 
> 时间：2010-05-27T11:14:57.400

在他们的年度审查中将其作为工作描述的一部分，如果他们成功，将其与他们的年度奖金挂钩。

# asp.net - 为什么Sql Server连接超时

> ID：797816
> 
> 赞同：0
> 
> 时间：2009-04-28T13:03:37.947
> 
> 标签：asp.net, sql-server, timeout, enterprise-library, connection-string

我正在为我的 Sql 数据库使用 Enterprise Library Data。我使用的是 3.1 版。我正在使用此代码执行长时间运行的 sp（大约 1 分钟）。

```
Dim db As SqlDatabase = New SqlDatabase(System.Web.Configuration.WebConfigurationManager.ConnectionStrings("portalConnection").ConnectionString)
                    db.ExecuteNonQuery("spnametoexecute") 
```

连接字符串看起来像这样

```
<add name="portalConnection" connectionString="Server=IP;Database=DBName;uid=User;pwd=PWD; Timeout=180;"
  providerName="System.Data.SqlClient" /> 
```

Provlem 是我总是得到一个超时异常。这是为什么 ？

```
System.Data.SqlClient.SqlException: Timeout expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T13:07:30.557

嗯，有几种可能：

*   您的查询太复杂且耗时太长（尝试编写更好的 TSQL、添加索引或增加超时）
*   您被另一个 SPID 阻止（可能是您自己在另一个连接上）

通常，第二个是问题。查看阻塞等 (sp_who / sp_who2) 以查看是否有任何阻塞。并使用跟踪/分析器来调查第一个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T13:06:49.140

我认为您设置了不正确的服务器 ip，或者您的服务器也没有配置好。检查您的服务器配置中是否允许管道和 tcp/ip。它经常忘记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T16:30:28.213

我对企业数据库不太熟悉，但我想看看 SqlDatabase 对象是否具有超时属性。尝试在代码中设置超时并测试行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T13:13:40.823

您总是超时，还是仅在长时间运行的查询执行时才超时？当您手动运行它时 - 即在 Management Studio 中，需要多长时间？您的连接设置为在 3 分钟后超时，这是一个非常长的时间。

您需要在几个级别上对此进行攻击：

1.  分析和优化查询
2.  用非常简单的查询进行测试，看看是否存在连接问题

# sql-server - 如何在创建索引时对字段进行排序（SQL Server 2005 +）？

> ID：797830
> 
> 赞同：0
> 
> 时间：2009-04-28T13:06:29.030
> 
> 标签：sql-server, sql-server-2005, indexing, performance

正如[本文](http://msdn.microsoft.com/en-us/magazine/cc135978.aspx)的图 4 所示，SQL Server 2005 + 可以返回缺失索引的列表。它存储了关于缺失索引的 2 个重要信息：

[EqualityUsage],[InequalityUsage]

如果我缺少索引，其中：

[EqualityUsage]='col1',[InequalityUsage]='col2'

我是否应该使用索引键列创建索引：

'col1，col2'

或者

'col2，col1'

?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T14:16:12.780

col1, col2

[创建索引](http://msdn.microsoft.com/en-us/library/ms345434.aspx)

> 要将 sys.dm_db_missing_index_details 返回的信息转换为 CREATE INDEX 语句，**应将相等列放在不等列之前**，它们一起构成索引的键。应使用 INCLUDE 子句将包含的列添加到 CREATE INDEX 语句中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T13:14:52.677

如果您只有两个中的一个可以搜索，那会是哪个？首先列出

# resources - RESTful 'PUT' 操作是否应该返回一些东西......

> ID：797834
> 
> 赞同：519
> 
> 时间：2009-04-28T13:07:01.383
> 
> 标签：resources, rest, service, put

我想知道人们对`PUT`在响应正文中不返回任何内容（null）的 RESTful 操作有何看法。

* * *

## 回答 #1

> 赞同：705
> 
> 时间：2009-05-05T21:44:54.577

HTTP 规范 ( [RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616.html) ) 有许多适用的建议。这是我的解释：

*   `200 OK`成功 PUT 更新现有资源的HTTP 状态代码。不需要响应体。（根据[第 9.6 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.6)，`204 No Content`更合适。）
*   新资源成功 PUT 的HTTP 状态代码`201 Created`，在 Location 标头字段中返回新资源的最具体 URI，在响应正文中回显该资源的任何其他相关 URI 和元数据。（[RFC 2616 第 10.2.2 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.2)）
*   `409 Conflict`由于第 3 方修改而失败的 PUT 的^(HTTP)状态代码，并在响应正文中列出了尝试更新与当前资源之间的差异。（[RFC 2616 第 10.4.10 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.10)）
*   不成功 PUT 的HTTP 状态代码`400 Bad Request`，响应正文中的自然语言文本（例如英语）解释了 PUT 失败的原因。（[RFC 2616 第 10.4 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4)）

* * *

## 回答 #2

> 赞同：207
> 
> 时间：2009-04-28T14:13:25.093

与这里的大多数答案相反，我实际上认为 PUT 应该返回更新的资源（当然除了 HTTP 代码）。

您之所以希望将资源作为 PUT 操作的响应返回是因为当您向服务器发送资源表示时，服务器也可以对该资源进行一些处理，因此客户端想知道该资源是如何处理的请求成功完成后的样子。（否则它将不得不发出另一个 GET 请求）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-12-31T10:00:35.620

我认为服务器可以返回内容以响应 PUT。如果您正在使用允许侧载数据的响应信封格式（例如 ember-data 使用的格式），那么您还可以包含可能已通过数据库触发器等修改的其他对象。（侧载数据明确用于减少# 个请求，这似乎是一个优化的好地方。）

如果我只是接受 PUT 并且没有要报告的内容，我会使用没有正文的状态代码 204。如果我有什么要报告的，我会使用状态码 200，并包含一个正文。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-28T13:13:01.527

[HTTP/1.1 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)（第9.6 节）讨论了适当的响应/错误代码。但是它没有解决响应内容。

你会期待什么？一个简单的 HTTP 响应代码（200 等）对我来说似乎很简单明了。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-02-05T20:30:13.477

如果 REST API 的后端是 SQL 关系数据库，那么

1.  您应该在可以更新的每条记录中都有**RowVersion （以避免**[丢失更新问题](https://www.mssqltips.com/sqlservertip/1501/optimistic-locking-in-sql-server-using-the-rowversion-data-type/)）
2.  您应该*始终*在 PUT 之后返回记录的新副本（以获取新的**RowVersion**）。

如果您不关心丢失的更新，或者如果您想强制您的客户在 PUT 之后立即执行 GET，那么不要从 PUT 返回任何内容。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-07-24T05:55:44.020

Http 方法“PUT”可能根据传递的请求 URI 上的执行状态具有不同的 Http 状态。下表可能有助于理解 - [![在此处输入图像描述](https://i.stack.imgur.com/JwL5C.png)](https://i.stack.imgur.com/JwL5C.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-31T18:37:08.147

“已创建”的 201 的 Http 响应代码以及“位置”标头指向客户端可以找到新创建的资源的位置。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-29T12:32:27.777

我在我的服务中使用了 RESTful API，以下是我的观点：首先我们必须得到一个共同的观点：`PUT`用于更新资源而不是创建或获取。

`Stateless resource`我用：和`Stateful resource`：定义资源

*   无状态资源对于这些资源，只要返回一个空体的HttpCode，就足够了。

*   有状态的资源 例如：资源的版本。对于这种资源，要更改时必须提供版本，因此返回完整资源或将版本返回给客户端，因此客户端在更新操作后无需发送获取请求。

***但是***`simple`，对于一个服务或系统来说`clearly`，保留它`easy to use and maintain`是最重要的。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2009-04-28T13:10:17.943

似乎没问题...虽然我认为成功/失败/发布时间/收到的#字节/等的基本指示。会更好。

编辑：我在考虑数据完整性和/或记录保存；接收时间的元数据（例如 MD5 哈希或时间戳）可能对大型数据文件有帮助。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2009-04-28T13:13:33.100

正如空的请求体符合 GET 请求的原始目的，而空的响应体符合 PUT 请求的原始目的。

* * *

## 回答 #11

> 赞同：-5
> 
> 时间：2009-04-28T13:10:05.933

理想情况下，它将返回成功/失败响应。

* * *

## 回答 #12

> 赞同：-5
> 
> 时间：2009-04-28T13:15:09.523

HTTP 响应的标头和正文之间存在差异。PUT 永远不应返回正文，而必须在标头中返回响应代码。成功就选200，不成功就选4xx。没有空返回码之类的东西。你为什么要这样做？

# hibernate - 与关系休眠

> ID：797835
> 
> 赞同：1
> 
> 时间：2009-04-28T13:07:04.210
> 
> 标签：hibernate

我有一个关系数据库，包含表和各种关系（1>n、n>1、1>1 和 n>n）..

让我们以其中一张表为“部门”表，该表是我的数据库中最复杂的表，因为它与数据库中的大多数表都有关系。

XML 映射文件“Department.hbm.xml”如下所示：

```
<hibernate-mapping>
 <class catalog="MOIDB"
  name="com.ebla.moi.correspondence.model.entity.db.Department"
  schema="dbo" table="Department">
  <id name="id" type="java.lang.Integer">
   <column name="Id"/>
   <generator class="increment"/>
  </id>
  <many-to-one
   class="com.ebla.moi.correspondence.model.entity.db.Department"
   fetch="select" name="department">
   <column name="Parent"/>
  </many-to-one>
  <many-to-one
   class="com.ebla.moi.correspondence.model.entity.db.ApplicationUser"
   fetch="join" lazy="false" name="applicationUserByManagerId">
   <column name="Manager_Id"/>
  </many-to-one>
  <many-to-one
   class="com.ebla.moi.correspondence.model.entity.db.ApplicationUser"
   fetch="join" lazy="false" name="applicationUserByAssistantId">
   <column name="Assistant_Id"/>
  </many-to-one>
  <property generated="never" lazy="false" name="description" type="java.lang.String">
   <column length="80" name="Description" not-null="true"/>
  </property>
  <property generated="never" lazy="false" name="type" type="java.lang.Integer">
   <column name="Type" not-null="true"/>
  </property>
  <property generated="never" lazy="false" name="prefix" type="java.lang.String">
   <column length="20" name="Prefix" unique="true"/>
  </property>
  <property generated="never" lazy="false" name="serialPrefix" type="java.lang.String">
   <column length="20" name="Serial_Prefix"/>
  </property>
  <property generated="never" lazy="false" name="telephoneNumbers" type="java.lang.String">
   <column length="100" name="Telephone_Numbers"/>
  </property>
  <property generated="never" lazy="false" name="faxNumbers" type="java.lang.String">
   <column length="100" name="Fax_Numbers"/>
  </property>
  <property generated="never" lazy="false" name="smsMaxTime" type="java.lang.Integer">
   <column default="30" name="SMS_Max_Time"/>
  </property>
  <property generated="never" lazy="false" name="emailMaxTime" type="java.lang.Integer">
   <column default="30" name="Email_Max_Time"/>
  </property>
  <property generated="never" lazy="false" name="hasCorrespondence" type="java.lang.Boolean">
   <column name="Has_Correspondence" not-null="true"/>
  </property>
  <property generated="never" lazy="false" name="email" type="java.lang.String">
   <column length="50" name="Email"/>
  </property>
  <property generated="never" lazy="false" name="logoImageName" type="java.lang.String">
   <column length="50" name="Logo_Image_Name"/>
  </property>
  <set inverse="true" name="departmentDocumentTypeSerials" sort="unsorted">
   <key>
    <column name="Department_Id" not-null="true"/>
   </key>
   <one-to-many class="com.ebla.moi.correspondence.model.entity.db.DepartmentDocumentTypeSerial"/>
  </set>
  <set inverse="true" name="departmentGlobalVariableses" sort="unsorted">
   <key>
    <column name="Department_Id" not-null="true"/>
   </key>
   <one-to-many class="com.ebla.moi.correspondence.model.entity.db.DepartmentGlobalVariables"/>
  </set>
  <set inverse="true" name="departmentFiles" sort="unsorted">
   <key>
    <column name="Department_Id" not-null="true"/>
   </key>
   <one-to-many class="com.ebla.moi.correspondence.model.entity.db.DepartmentFile"/>
  </set>
  <set catalog="MOIDB" name="applicationUsers" schema="dbo"
   sort="unsorted" table="Application_User_Department">
   <key>
    <column name="Department_Id" not-null="true"/>
   </key>
   <many-to-many class=""
    entity-name="com.ebla.moi.correspondence.model.entity.db.ApplicationUser" unique="false">
    <column name="Application_User_Id" not-null="true"/>
   </many-to-many>
  </set>
  <set inverse="true" name="departments" sort="unsorted">
   <key>
    <column name="Parent"/>
   </key>
   <one-to-many class="com.ebla.moi.correspondence.model.entity.db.Department"/>
  </set>
  <set inverse="true" lazy="false" name="departmentClassifications" sort="unsorted">
   <key>
    <column name="Department_Id" not-null="true"/>
   </key>
   <one-to-many class="com.ebla.moi.correspondence.model.entity.db.DepartmentClassification"/>
  </set>
  <set inverse="true" lazy="false" name="depCorrespondenceSites" sort="unsorted">
   <key>
    <column name="Department_Id" not-null="true"/>
   </key>
   <one-to-many class="com.ebla.moi.correspondence.model.entity.db.DepCorrespondenceSite"/>
  </set>
 </class>
</hibernate-mapping> 
```

有时我需要找没有任何关系的部门。其他时候，我需要找一些有关系的部门……

最好的方法是什么.. 考虑性能和 DB 命中数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T15:25:32.783

通过设置lazy="true" 启用延迟加载是最好的方法。您在整个映射过程中将其设置为 false 是否有原因？

另一种方法是不对对象模型中的所有关系进行建模。

# javascript - 如何在文本框中仅显示两位小数并仍读取 5 位小数？

> ID：797845
> 
> 赞同：0
> 
> 时间：2009-04-28T13:08:31.943
> 
> 标签：javascript, jquery, asp.net-ajax

我正在使用一个 ASP.NET`GridView`控件，`TemplateColumn`其中`TextBox`的`ItemTemplate`. 我将`Text`的`TextBox`与数据库中的值绑定。数据库保存这些带有五个小数点的值，对于界面，我只想显示两个小数点。

用户可以更改此网格。当我保存时，我希望能够为未更改的值获取所有五位小数。由于它显示为两位小数，我只能在回发时读取两位小数？除了将实际值保存在隐藏变量中之外，还有其他方法吗？

谢谢，

斯里达尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T14:10:16.117

我有一个[formatCurrency](http://bendewey.wordpress.com/2008/11/11/jquery-formatcurrency-plugin/)插件可以帮助你。您要做的是在文本框中显示数据并使用隐藏字段绑定数据。这样，您不仅可以保留小数位，而且可以接受两个以上的小数位作为输入。

这是一个应该工作的示例。

```
<script type="text/javascript" src="http://jqueryjs.googlecode.com/files/jquery-1.3.2.min.js">
</script>
<script type="text/javascript" src="jquery.formatCurrency.js">
</script>
<script type="text/javascript">
    $(document).ready(function() {
        $('.editNumber').formatCurrency();
        $('.editNumber').blur(function(e) {
            var val = $(this).toNumber();
            $(this).next('input:hidden').val(val)
                .end().formatCurrency();

        });
    });
</script>
<asp:GridView runat="server" ID="GridView1" AutoGenerateColumns="false">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:TextBox runat="server" CssClass="editNumber" ID="EditNumber" Text='<%# Eval("Price") %>' />
                <asp:HiddenField runat="server" ID="HiddenNumber" Value='<%# Bind("Price") %>' />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T13:14:53.923

在更新数据之前，您始终可以验证该列中的数据确实发生了变化。

您可能会添加某种存储的 SQL 过程来代替列名，以便事先进行比较？好像有点牵强。

否则，是的，为隐藏/修改该字段的原始数据而进行的一些额外处理的隐藏字段似乎是唯一的答案。无论如何，您都会在某个地方出现一些古怪的逻辑（无论是在数据库中，还是在您执行帖子时运行的代码，或在某个隐藏字段中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T13:25:04.273

将文本框文本与该网格行上绑定该文本框的 DataKey 的舍入（2 位小数）值进行比较。

**注意：确保你得到了正确的四舍五入！！！**

如果它们相等，则意味着用户没有更改值，您按原样保存 datakey 值。（即使他改变了值，在逻辑上也无关紧要）

如果不是，则意味着用户已更改文本框的值，您需要在保存时使用他的值。

# .net - 如何让 UdpClient 对 DNS 更新做出反应

> ID：797851
> 
> 赞同：0
> 
> 时间：2009-04-28T13:10:04.623
> 
> 标签：.net, dns, udpclient

我正在使用 UdpClient 将数据包发送到服务器。我正在使用 (hostname, port) 构造函数在构造我的 Sender 对象时初始化 UdpClient。当以这种方式构造时，UdpClient 将主机名解析为 IP 地址。对 UdpClient 对象的后续调用使用 IP 地址。

不幸的是，如果使用的 DNS 别名通过 DNS 系统更新以指向不同的 IP 地址，则此更改不会反映在我的 Sender 对象中，除非重新创建它。

让我的 Sender 对象及时响应 DNS 更改的最佳方式是什么？性能非常重要。我可以想到几个解决方案：

1.  对每次调用进行 DNS 解析（即使用接受主机名参数的发送重载）。由于 Windows DNS 缓存，这实际上可能非常快，我不知道。
2.  在计时器线程上运行某种 DNS 检查器，以定期检查 DNS 别名是否解析为不同的 IP。如果是这样，它会以某种方式更新 UdpClient 以使用新的 IP 地址。但是，我真的不想在每次调用时都锁定 UdpClient 对象——正如我所说，性能很重要。

有人有这样做的经验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T13:29:21.003

我会将地址解析与`UdpClient`.

1.  使用[`Dns`](http://msdn.microsoft.com/en-us/library/system.net.dns.aspx)类来[解析](http://msdn.microsoft.com/en-us/library/ms143998.aspx) `IPaddress`（并存储在局部变量中）
2.  使用 的无参数构造函数`UdpClient`，
3.  不要连接`UdpClient`
4.  将显式`Send`与`IPEndPoint`参数一起使用。

在后台线程上：

1.  每 X 秒检查一次更新的 DNS
2.  替换`IPEndPoint`您传递给`UdpClient.Send`调用的局部变量。

无需`UdpClient`每次执行此操作时都破坏您的。此外，更新时无需锁定`IPEndPoint`。更糟糕的情况是你有一个脏发送到一个旧地址，但是由于你没有立即收到更新通知，所以无论如何你都会有脏发送。

# c# - 如何在 C# 中的 dataGrid 中添加事件

> ID：797875
> 
> 赞同：0
> 
> 时间：2009-04-28T13:14:18.403
> 
> 标签：c#

考虑我有一个动态创建的dataGrid。现在我需要添加一个事件，即当我单击dataGrid 中的特定单元格时加载另一个表单。我如何在 C# VS 2005 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T13:16:35.653

您可以使用`yourobject.NameOfEvent += new NameOfEventHandler(method);`

# mysql - 检查数据库中是否存在 ID

> ID：797879
> 
> 赞同：10
> 
> 时间：2009-04-28T13:16:15.137
> 
> 标签：mysql, exists

当给定一个`ID`数字时，我想检查它是否存在于数据库中。`true`如果找到则返回`ID`，如果没有，则返回`false`。

我对 MySQL 的了解非常低，但我假设这可能与该`COUNT(*)`功能有关？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-04-28T13:20:01.323

```
select id from table where id = $id 
```

没必要花里胡哨。将 exists 与子查询一起使用似乎只会产生较差的性能，但如果另有显示，我很高兴得到纠正。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-28T13:21:35.267

只是添加另一个例子。

```
SELECT COUNT(id) FROM table WHERE id = 123 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T13:20:58.857

```
SELECT ID FROM TABLE WHERE ID = 'number'; 
SELECT count(*) FROM TABLE WHERE ID = 'number'; 1 - exists, 
```

在您的 PHP 或其他代码中，您必须检查这些查询之一是否返回值。

# .net - 如何在应用程序启动和关闭时自动调用静态类中的方法？

> ID：797881
> 
> 赞同：1
> 
> 时间：2009-04-28T13:16:47.587
> 
> 标签：.net, multithreading, logging, static

我正在编写一个用于记录的静态类，以便在我开发的解决方案中使用。有几个组件将使用它，例如控制台应用程序、ASP.NET 应用程序等......

为了使日志记录工作，它需要在使用之前进行一些初始启动配置，并且在每个应用程序完成后还需要进行一些清理。

有没有办法在 .NET 中执行此操作，而无需从解决方案中的每个应用程序显式调用 StartLog() 和 FinishLog() 方法？或者也许是完全不同的看待这个问题的方式？

我一直在考虑在每个 Log() 方法中使用锁来检查日志记录类是否已初始化，但是性能和复杂性方面的潜在开销让我感到害怕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T13:22:48.070

您可以将类型初始化器（例如静态构造器）用于事物的启动方面 - 当您第一次使用该类时会自动调用它。

检测关机更难......有[`AppDomain.ProcessExit`](http://msdn.microsoft.com/en-us/library/system.appdomain.processexit.aspx)并且[`AppDomain.DomainUnload`](http://msdn.microsoft.com/en-us/library/system.appdomain.domainunload.aspx)可能对*你*来说已经足够了......只需订阅事件并做出相应的反应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T13:23:11.313

阅读单身人士，Jon Skeet 有一篇[很棒的文章](http://www.yoda.arachsys.com/csharp/singleton.html)。使用它可以确保类型只构造一次。当他谈到锁的性能时，看看最后。只是一些思考的食物。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T13:27:40.947

[单例](http://en.wikipedia.org/wiki/Singleton_pattern)模式可能最适合您。静态 _instance 变量在开始时被初始化，因此它的 Log() 构造函数被调用，您可以在此处进行初始化。由于它实现了[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)并覆盖了 Finalize ，因此它将具有 Dispose() 方法，该方法将在应用程序退出并释放静态实例变量时调用。

```
public class Log : IDisposable {
  private Log() {
    // Initialize logic
  }

  public LogMessage(string wah) {
    // Write
  }

  public void Dispose() {
    // Clean up
  }

  public override void Finalize() {
    Dispose();
  }

  private static Log _instance = new Log();
  public static Log Instance { get { return _instance; } }

  // You can also implement helper methods on static level if you want to keep the usage same.
  public static Message(string wah) {
    _instance.LogMessage(wah);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T13:23:13.670

一种单例模式，您不必每次都重新实例化 Log 类，而是使用 getInstance() 方法

# mysql - 未提交读取的 InnoDB 死锁！- Java - Glassfish - EJB3 (JPA/休眠)

> ID：797883
> 
> 赞同：2
> 
> 时间：2009-04-28T13:17:15.290
> 
> 标签：mysql, jpa, transactions, deadlock, innodb

几天前，我在使用 Glassfish 的 Java 应用程序上遇到死锁问题 - EJB3 和 Mysql InnoDB

配置：Mysql InnoDB：Ver 14.12 Distrib 5.0.51a，适用于 debian-linux-gnu (i486)，使用 readline 5.2

应用服务器：Glassfish v2.1

EJB3 的持久性 - JPA - Hibernate

为了简单起见，我有一个带有 servlet 的 SOA 系统，用于处理用户对服务的订阅、登录、注销、支付和注册等......生成“低信用”警告、付款验证等...

我的问题：在负载测试期间我到处都是死锁（100 000 个用户模拟 - 30 个请求/秒）

**返回的堆栈样本：**

```
Message ID: 
Could not synchronize database state with session org.hibernate.exception.LockAcquisitionException

Complete Message:   
Could not execute JDBC batch update at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:105) at 
org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66) at
org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:275) at 
org.hibernate.jdbc.AbstractBatcher.prepareStatement(AbstractBatcher.java:114) at 
org.hibernate.jdbc.AbstractBatcher.prepareStatement(AbstractBatcher.java:109) at 
org.hibernate.jdbc.AbstractBatcher.prepareBatchStatement(AbstractBatcher.java:244) at 
org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2382) at 
org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:2335) at 
org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2635) at 
org.hibernate.action.EntityUpdateAction.execute(EntityUpdateAction.java:115) at 
org.hibernate.engine.ActionQueue.execute(ActionQueue.java:279) at 
org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:263) at 
org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:168) at 
org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321) at 
org.hibernate.event.def.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:64) at
org.hibernate.impl.SessionImpl.autoFlushIfRequired(SessionImpl.java:996) at 
org.hibernate.impl.SessionImpl.list(SessionImpl.java:1141) at 
org.hibernate.impl.QueryImpl.list(QueryImpl.java:102) at 
org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:67) at
net.xxx.server.dao.impl.PaymentDAOImpl.listPaymentsByStateAndCompany(PaymentDAOImpl.java:270) 
```

注意结尾，这是我完成的代码：**net.xxx.server.dao.impl.PaymentDAOImpl.listPaymentsByStateAndCompany(PaymentDAOImpl.java:270)**

**这个功能：**

```
private static final String QUERY_FOR_PAYMENTS_BY_STATE_AND_COMPANY = " FROM " + Payment.class.getName()
        + " p WHERE p.serviceDefinition.company=:company"
        + " AND p.state = :state";

    @SuppressWarnings("unchecked")
    public List<Payment> listPaymentsByStateAndCompany(Company company,Constants.PaymentState state) {
        List<Payment> payments = this.getEntityManager()
        .createQuery(QUERY_FOR_PAYMENTS_BY_STATE_AND_COMPANY)
        .setParameter("state",state.ordinal())
        .setParameter("company",company)
        .getResultList();
        return payments;
    } 
```

此功能在不进行负载测试时运行良好，例如我们每 5 秒有 1 个请求。

在负载测试期间，我们的作业运行频率很高（例如每 5 秒）。

我不仅得到这个错误，还有其他一些其他工作的错误（仍然死锁）！

**在 MYSQL 上：**

> 死锁示例：

```
------------------------
LATEST DETECTED DEADLOCK
------------------------
090428 12:21:11
*** (1) TRANSACTION:
TRANSACTION 0 14286818, ACTIVE 0 sec, process no 21872, OS thread id 802850 starting index read
mysql tables in use 1, locked 1
LOCK WAIT 13 lock struct(s), heap size 1024, undo log entries 2
MySQL thread id 298, query id 11843357 localhost 127.0.0.1 root Updating
/*  */ update service set balance=40.0, company_id=2, last_on='2009-04-28 12:19:55', modified_by='server', modified_on='2009-04-28 12:21:11', service_definition_id=3, state=1, subscriber_id=13578, valid_until='2010-02-22 12:13:52' where service_id=693
*** (1) WAITING FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 0 page no 62 n bits 176 index `PRIMARY` of table `xxx/service` trx id 0 14286818 lock_mode X locks rec but not gap waiting
Record lock, heap no 98 PHYSICAL RECORD: n_fields 12; compact format; info bits 0
 0: len 8; hex 80000000000002b5; asc         ;; 1: len 6; hex 000000d9faa0; asc       ;; 2: len 7; hex 0000000cc91e70; asc       p;; 3: len 4; hex 00001c42; asc    B;; 4: len 8; hex 80001245aad4e363; asc    E   c;; 5: len 6; hex 736572766572; asc server;; 6: len 8; hex 80001245aad4e3c9; asc    E    ;; 7: len 1; hex 81; asc  ;; 8: len 8; hex 80001247f200df08; asc    G    ;; 9: len 8; hex 8000000000000002; asc         ;; 10: len 8; hex 8000000000000003; asc         ;; 11: len 8; hex 800000000000350a; asc       5 ;;

*** (2) TRANSACTION:
TRANSACTION 0 14286798, ACTIVE 1 sec, process no 24963, OS thread id 393239 starting index read, thread declared inside InnoDB 500
mysql tables in use 1, locked 1
17 lock struct(s), heap size 1024, undo log entries 16
MySQL thread id 253, query id 11843359 localhost 127.0.0.1 root Updating
/*  */ update payment set credit=1.0, currency='EUR', modified_by='9999900092', modified_on='2009-04-28 12:21:11', payment_definition_id=7, price=1.0, service_definition_id=3, state=0, subscriber_id=13578, transaction_id=11463 where payment_id=15914
*** (2) HOLDS THE LOCK(S):
RECORD LOCKS space id 0 page no 62 n bits 176 index `PRIMARY` of table `xxx/service` trx id 0 14286798 lock mode S locks rec but not gap
Record lock, heap no 47 PHYSICAL RECORD: n_fields 12; compact format; info bits 0
 0: len 8; hex 8000000000000286; asc         ;; 1: len 6; hex 000000d9ffce; asc       ;; 2: len 7; hex 0000000cc90683; asc        ;; 3: len 4; hex 0000f841; asc    A;; 4: len 8; hex 80001245aad4e3b2; asc    E    ;; 5: len 6; hex 736572766572; asc server;; 6: len 8; hex 80001245aad4e3ff; asc    E    ;; 7: len 1; hex 81; asc  ;; 8: len 8; hex 80001245d450fed8; asc    E P  ;; 9: len 8; hex 8000000000000002; asc         ;; 10: len 8; hex 8000000000000003; asc         ;; 11: len 8; hex 80000000000034db; asc       4 ;; 
```

**事务隔离**

我在互联网上阅读了有关事务隔离的内容。

在 glassfish 上，我们可以设置事务隔离级别，我把它设置为未提交的。

它没有用，然后我在mysql中设置了相同的级别：

```
mysql> SELECT @@global.tx_isolation;
+-----------------------+
| @@global.tx_isolation |
+-----------------------+
| READ-UNCOMMITTED      | 
+-----------------------+
1 row in set (0.00 sec)

mysql> SELECT @@tx_isolation;
+------------------+
| @@tx_isolation   |
+------------------+
| READ-UNCOMMITTED | 
+------------------+
1 row in set (0.00 sec) 
```

SVP 有人可以告诉我可能是什么问题吗？我真的不知道！！！！

顺便说一句，我在互联网上看到您可以为每个请求选择事务隔离级别...是否可以直接为 JPA 上的方法设置事务隔离级别？因为我认为只有进行全局数据更新的工作（比如减少 15000 个服务）应该是未提交的，我错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T03:00:39.200

对于您的问题，我没有确切的答案，但这可能会帮助您缩小范围。

死锁可能发生在任何事务隔离级别，因为即使在“未提交读取”时，innodb 也会对更新设置锁定。

您可以使用这个简单的场景进行测试：

```
CREATE TABLE locktest (a INT(11), b INT(11), PRIMARY KEY (a)) ENGINE=INNODB;
INSERT INTO locktest VALUE (1, 1);
INSERT INTO locktest VALUE (2, 1); 
```

然后，打开 2 个 mysql 控制台（C1 和 C2）并按顺序运行这些命令：

```
C1> BEGIN;
C2> BEGIN;
C1> UPDATE locktest SET b = b + 1 WHERE a = 1;
C2> UPDATE locktest SET b = b + 1 WHERE a = 2;
C1> UPDATE locktest SET b = b + 1 WHERE a = 2;
C2> UPDATE locktest SET b = b + 1 WHERE a = 1; 
```

您将看到 C2 上出现死锁，并且即使未提交读取，C1 也会成功完成。如果您检查引擎日志，您将看到类似的报告。

如果您删除表上的主键，命令会更早地阻塞，这是因为如果有一个索引覆盖正在设置锁定的查询，innodb 锁定会更好地工作。

所以，回到你的问题。

您应该检查以死锁结束的事务中涉及的所有查询，并确保存在适当的索引。如果 MySQL 必须进行全表扫描，它将结束锁定超过它的需要。

这些[技巧](http://dev.mysql.com/doc/refman/5.0/en/innodb-deadlocks.html)帮助我解决了我的应用程序中的一些死锁。防止死锁的一个好方法是使用“SELECT ... FOR UPDATE”设置写锁来锁定某些父行。

因此，例如，如果您有多个事务试图更新某些特定的客户数据，您可以发出“SELECT id FROM customer WHERE id=123 FOR UPDATE”，他们将在此时按顺序等待，而不是结束持有彼此需要的锁.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-10-25T16:37:38.370

我在使用 Oracle 数据库的 Java 应用程序中遇到了类似的问题。

我发现数据库缺少外键索引，这导致数据库锁定的行数多于所需的行，并导致高并发测试中的死锁。

这是一篇非常好的诊断文章。这篇文章的大部分内容是特定于 Oracle 的，但有些内容也适用于其他关系数据库： [http ://www.oratechinfo.co.uk/deadlocks.html](http://www.oratechinfo.co.uk/deadlocks.html)

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2009-05-31T17:34:47.753

您应该理所当然地认为，无论您做什么，任何事务数据库都会发生死锁。您应该优雅地处理它们并重复失败的事务一些固定次数（通常 3 次是可以的） - Glassfish 中的某处应该有一个参数负责。

# windows - 如何更改任务栏按钮的顺序？

> ID：797884
> 
> 赞同：7
> 
> 时间：2009-04-28T13:17:25.480
> 
> 标签：windows, winapi, button, taskbar

有一些免费软件工具（例如，Taskbar Shuffle、XNeat 等）能够更改任务栏上按钮的顺序，而无需实际关闭或打开任何窗口。不幸的是，它们似乎都不是开源的。

更改任务栏中按钮的顺序需要哪些 API 调用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-28T16:03:48.777

答案是`TB_MOVEBUTTON`在调用中使用`SendMessage()`，如此处[的 WinAPI 文档](http://msdn.microsoft.com/en-us/library/bb787387(VS.85).aspx)中所述。

`SendMessage()`( )的第一个参数`hWndControl`需要是对包含任务栏按钮的工具栏的引用。这不是微不足道的检索，但克里斯克拉克的答案中提到的[CodeProject 条目具有检索此句柄所需的所有代码。](http://www.codeproject.com/KB/shell/taskbarsorter.aspx)

`wParam`并且`lParam`需要分别设置为要移动的按钮的按钮ID，以及要移动到的位置。这些 ID 是结构中代表每个按钮的`idCommand`字段；`TBBUTTON`如何检索按钮的这些结构也可以从上面的[CodeProject 条目](http://www.codeproject.com/KB/shell/taskbarsorter.aspx)中获取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T14:08:43.967

Windows API 不公开重新排列任务栏按钮的方法是有意的。没有支持的方法来执行此操作。

请参阅[这篇](http://blogs.msdn.com/oldnewthing/archive/2005/05/06/415158.aspx)文章（以及它链接到的文章），了解为什么 shell 开发人员不公开此功能背后的想法。

*但是，*足智多谋的人已经设计了实现此目的的技巧（请参阅其他答案）。我怀疑这些方法会随着 Windows 的发展（Windows 7、64 位等）而分崩离析。当这些技术停止工作时，不要感到惊讶。

# installation - 在启动设置而不是结束时提取文件

> ID：797888
> 
> 赞同：5
> 
> 时间：2009-04-28T13:19:10.140
> 
> 标签：installation, deployment, inno-setup

我正在使用最新版本的 inno，它在安装过程中执行以下操作：

1.  执行依赖检查以查看安装的内容

2.  安装尚未安装的依赖项（.net、sql server、directx 等）

3.  从 [Files] 部分安装应用程序和文件 (wpReady)

4.  检查 SQL Server 以前安装的数据库并创建/更新表等

步骤 [4] 创建数据库和表等，并且仅在已经安装 SQL Server 的情况下才有效，这就是在步骤 [2] 中完成它的原因。

输出目录包含创建的 setup.exe，我手动放置了包含上述步骤 [1,2 和 4] 所需文件的附加依赖项文件夹。

这很好用，但我想只创建一个包含所有依赖项的单个 exe，`wpReady`并在上面的步骤 [1] 之前和之前提取依赖项。

依赖项在该部分中，但在安装程序完成所有表单并尝试安装文件后， `[Files]`直到安装程序执行消息后才会提取这些文件。`wpReady`

我使用以下内容将我需要的内容添加到 setup.exe

```
[Files]
Source: Output\Dependencies\*; DestDir: {tmp}; Flags: deleteafterinstall 
```

在之前将文件提取到临时目录的最佳方法是什么，`wpReady`或者我应该先执行这些操作，`wpReady`然后再安装依赖项（虽然不理想）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-28T13:27:35.110

您可以使用事件函数`ExtractTemporaryFile()`中的`PrepareToInstall`函数将任何文件从该`[Files]`部分提取到`{tmp}`更早的部分，并在设置完成时将其删除。连同脚本和各种钩子，Inno Setup 为您提供了几乎所有可以实现的东西。

查看 Inno Setup 帮助的“Pascal Scripting”部分，特别是“Support Functions Reference”。在那里你会找到`ExtractTemporaryFile()`更多的文档。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2010-12-11T18:50:17.123

{tmp}

安装程序或卸载程序使用的临时目录。这不是用户的 TEMP 环境变量的值。它是由安装程序或卸载程序在启动时创建的用户临时目录的子目录（名称类似于“C:\WINDOWS\TEMP\IS-xxxxx.tmp”）。当安装程序或卸载程序退出时，此目录中的所有文件和子目录都将被删除。在安装期间，这主要用于提取要在 [Run] 部分执行但在安装后不需要的文件。

# c# - 具有 StandardValuesSupported 和自动完成功能的 StringConverter

> ID：797892
> 
> 赞同：1
> 
> 时间：2009-04-28T13:20:25.410
> 
> 标签：c#, winforms, propertygrid

我想开发一个具有标准值的 StringConverter，在将其附加到 PropertyGrid 之后，它的作用就像带有自动完成功能的组合框。下面的示例将给我一个组合框，但没有自动完成功能 - 用户必须展开它并手动选择其中一项。有没有办法让用户输入其中一个选项的开头，所以组合框会自动选择匹配的选项？

```
 public class ConverterSample : System.ComponentModel.StringConverter
   {        
      public override bool GetStandardValuesSupported(ITypeDescriptorContext context)
      {
         //true means show a combobox
         return true;
      }

      public override bool GetStandardValuesExclusive(ITypeDescriptorContext context)
      {
         return false;
      }

      public override TypeConverter.StandardValuesCollection GetStandardValues(ITypeDescriptorContext context)
      {         
         return new StandardValuesCollection(new List<string>(){"Stack", "overflow", "rules");

  } 
```

GetStandardValues 返回的列表必须是动态的，所以我不能在那里使用任何枚举。我从上面的例子：http: [//www.codeproject.com/KB/cpp/dropdownproperties.aspx](http://www.codeproject.com/KB/cpp/dropdownproperties.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-04-08T12:19:18.123

我不是专家，但听起来你需要一个 UITypeEditor。一个例子可以在这里找到：http: [//www.codeproject.com/Messages/1020184/Re-combobox-values.aspx](http://www.codeproject.com/Messages/1020184/Re-combobox-values.aspx)

# java - 动态改变spring bean

> ID：797894
> 
> 赞同：6
> 
> 时间：2009-04-28T13:20:34.783
> 
> 标签：java, spring, javabeans

如何使用 java spring 在运行时动态更改 bean 的属性？我有一个 bean mainView，它应该使用“class1”或“class2”作为属性“class”。这个决定应该基于一个属性文件，其中属性“withSmartcard”是“Y”或“N”。

应用上下文：

```
<bean id="mainView"
    class="mainView">
    <property name="angebotsClient" ref="angebotsClient" />
    <property name="class" ref="class1" />
</bean>

<bean id="class1"
    class="class1">
    <constructor-arg ref="mainView" />
</bean>

<bean id="class2"
    class="class2">
    <constructor-arg ref="mainView" />
</bean> 
```

属性文件：

withSmartcard=Y

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-28T13:27:55.780

使用 PropertyPlaceHolder 管理您的属性文件..

```
<bean id="myPropertyPlaceHolder" 
class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
  <description>The service properties file</description> 
  <property name="location" value="classpath:/some.where.MyApp.properties" /> 
  </bean> 
```

并更改您的 ref 属性如下：

```
<bean id="mainView"
    class="mainView">
    <property name="angebotsClient" ref="angebotsClient" />
    <property name="class" ref="${withSmartCardClassImplementation}" />
</bean> 
```

在您的属性文件 some.where.MyApp.properties 中，添加一个名为**withSmartCardClassImplementation**的键，该键将具有 class1 或 class2（您选择）作为值。

```
withSmartCardClassImplementation=class1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-28T13:55:34.060

您需要[PropertyPlaceholderConfigurer](http://static.springframework.org/spring/docs/2.5.x/reference/beans.html#beans-factory-placeholderconfigurer)。手册的那部分比我在现场更好地展示了它。

在您的示例中，您需要将属性的值更改为`class1`或`class2`（spring 上下文中所需 bean 的名称）。

或者，您的配置可能是：

```
<bean id="mainView"
    class="mainView">
    <property name="angebotsClient" ref="angebotsClient" />
    <property name="class">
        <bean class="${classToUse}">
            <constructor-arg ref="mainView"/>
        </bean>
    </property>
</bean> 
```

配置文件包含：classToUse=fully.qualified.name.of.some.Class

在用户可编辑的配置文件中使用 bean 或类名是不可接受的，您确实需要使用“Y”和“N”作为配置参数值。在这种情况下，您只需要在 Java 中执行此操作，Spring 并不意味着是图灵完备的。

mainView 可以直接访问应用程序上下文：

```
if (this.withSmartCards) {
    this.class_ = context.getBean("class1");
} else {
    this.class_ = context.getBean("class2");
} 
```

一个更干净的解决方案是将用户配置的处理封装在它自己的类中，这样可以减少需要 ApplicationContextAware 的类的数量，并根据需要将其注入到其他类中。

使用[BeanFactoryPostProcessor](http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/beans/factory/config/BeanFactoryPostProcessor.html)，您可以通过编程方式注册类属性的定义。使用[FactoryBean](http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/beans/factory/FactoryBean.html)，您可以动态创建一个 bean。两者都是 Spring 的高级用法。

顺便说一句：鉴于 mainView 和 class1 / class2 之间的循环依赖关系，我不确定您的示例配置是否合法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T13:29:43.420

我相信您可以编写一个实现[BeanFactoryPostProcessor](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/config/BeanFactoryPostProcessor.html)的类。如果 XML 配置文件中存在此类的 bean（与您的其他 bean 一起），Spring 将自动调用其[postProcessBeanFactory(ConfigurableListableBeanFactory)](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/config/BeanFactoryPostProcessor.html#postProcessBeanFactory(org.springframework.beans.factory.config.ConfigurableListableBeanFactory))方法。传递给此方法的[ConfigurableListableBeanFactory](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/config/ConfigurableListableBeanFactory.html)对象可用于在 Spring 开始初始化它们之前更改任何 bean 定义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T14:00:28.400

同意上面的@Olivier。

有很多方法可以做到这一点。

1.  使用 PropertyPlaceHolderConfigurer..
2.  使用 BeanPostProcessor..
3.  使用 Spring AOP，创建建议并操作属性。

我会推荐上面的第 1 项。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-28T13:23:45.790

使用类工厂。它可以根据您的属性返回实例。

# c# - 哪个声明更好？

> ID：797897
> 
> 赞同：1
> 
> 时间：2009-04-28T13:21:13.643
> 
> 标签：c#, oop

我将改变我在编程中的 C# 风格（我一直在使用“公共静态”来表示变量、方法 - 一切）。

我的问题：

```
public class WinSock
{
    public Socket sock;
    public byte[] data;
    .....
}

var data = new byte[2058];
data = WinSock.data; 
```

或者这个：

```
private class WinSock
{
    private Socket sock;
    private byte[] data;
    .....
    public byte[] getdata()
    {
        get {return data;}
    }
}

WinSock ws = new WinSock();
var data = new byte[2058];
data = ws.getdata(); 
```

在这两种情况下，数据和 sock 变量都可以从其他类访问。

这两个声明哪个更好？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-28T13:23:38.787

一般来说，公开字段从来都不是一个好主意。

由于 getdata 是一个属性，所以它应该被称为 Data。

```
private class WinSock
{
    private Socket sock;
    private byte[] data;
    .....
    public byte[] Data
    {
        get { return data; }
    }
} 
```

由公共属性和方法组成的公共接口应确保状态（字段）永远不会不一致。该类负责字段。它不应该允许任何人直接写入它。这就是封装的意义所在。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-28T13:25:46.613

从纯粹的“声明”方面来看，第二个稍微好一点。但是，从设计的角度（以及可以看到的）来看，这并不好。具体来说，返回对作为类中私有字段的数组的引用是一个很大的禁忌。考虑：

```
private class WinSock
{
    private Socket sock;
    private byte[] data;
    .....

    // Read at most length bytes of data to buffer starting at offset
    // and return the number of bytes read
    public int Read(byte[] buffer, int offset, int length)
    {
        // ...
    }
}

WinSock ws = new WinSock();
var data = new byte[2058];
int bytesRead = ws.Read(data, 0, data.Length); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-28T13:28:24.407

第二个更接近通常被认为更好的东西。在面向对象的编程中，我们将变量封装在类中，并且只在类外部公开尽可能少的变量。

使用首字母大写命名您的属性，并作为数据成员而不是方法，即`Data`而不是`getdata`.

```
public class WinSock {

    private Socket _socket;
    private byte[] _data;

    public Socket Socket {
       get { return _socket; }
    }

    public byte[] Data {
        get { return _data; }
    }

} 
```

（命名私有成员变量的一种方法是使用下划线。还有一些其他常用的约定，但重要的是真的要选择一个并坚持下去。）

在 C# 3 中，还有一个属性的快捷语法：

```
public class WinSock {

    public Socket Socket { get; private set; }

    public byte[] Data { get; private set; }

} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-28T13:24:11.530

第二。它被称为“封装”。您隐藏并保护您的数据不受外界影响。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-28T13:26:20.073

*   一个类只能`private`是嵌套的 - 然后访问仅限于外部类。`internal`会更常见（并且是非嵌套类的默认值）
*   不要使用公共字段 ( `public Socket sock;`)
*   请考虑自动实现的属性（`public Socket Socket {get; private set;}`例如）
*   决定`getdata`是方法还是属性；-p

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-28T13:26:06.520

怎么样：

```
public Socket Sock { get; private set; }
public byte[] Date { get; private set; } 
```

如果您的 getter 和 setter 不需要任何验证逻辑，那么自动实现的属性是可行的方法。这提供了封装，并允许您稍后根据需要将实现更改为手动实现的属性，而无需强制重新编译引用您的 .dll 的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-28T13:27:07.623

两者都不是，而不是使用 GetMethod()，您应该将私有字段包装在属性中。

```
public class WinSock
{
    private Socket sock;
    private byte[] data;

    public byte[] Data
    {
       get { return data; }
       set { data = value; }
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-28T13:37:03.387

我还要保证第二个代码位，修改为您将字段包装到属性中并正确命名它们。因此，您可以将属性命名为“Data”而不是“getdata”。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-28T14:25:20.183

补充几点：

1.  如果您计划对使用 WinSock 类的代码进行单元测试，您应该考虑将类设为公共而不是内部，并考虑将方法设为虚拟。这种类型的类往往需要被mock或者stubb来给调用者返回不同的数据，这样调用者代码中的不同路径才能被执行。
2.  您应该考虑如何构造此类的对象。例如，您将传递 Socket，还是将一些数据传递给类，以便它可以创建 Socket？您的目标应该是传递创建处于有用状态的对象所需的任何数据。
3.  You should consider how you will test this class. In particular, how will this class obtain any other classes it needs to use to accomplish its task. For that you should search on Dependency Injection. That will start you down a useful path.

# php - 在 CakePHP 1.2 中自定义 $session->flash 输出的样式和位置

> ID：797898
> 
> 赞同：1
> 
> 时间：2009-04-28T13:21:25.500
> 
> 标签：php, cakephp, cakephp-1.2

我正在使用 CakePHP 1.2 版（最新版）编写一个简单的 Web 应用程序，并且在显示来自 Session 帮助程序的 flash 消息时遇到问题。在我的布局中，存在以下代码：

```
<?php echo $this->renderElement('flash'); ?> 
```

呈现以下元素：

```
<?php if($session->check('Message.flash')): ?>
     <?php $class = isset($error) ? 'contentError' : 'contentSuccess'; ?>
     <div class="contentBlockWrapper <?php echo $class; ?>">
         <div class="contentBlock">
             <div id="flashMessage" class="flash">
                 <?php $session->flash(); ?>
             </div>
         </div>
     </div>
<?php endif; ?> 
```

期望的行为是，如果要显示一条 Flash 消息，则将其显示在 DOM 中的上述位置，以便按照我的意愿对其进行样式设置和定位。

问题是，如果有一个 flash 消息，CakePHP 会在开始`<body>`标记之后立即呈现它。现在，它还将上述容器呈现在正确的位置，但根本没有将文本写入我想要的位置。

我尝试将输出缓冲区刷新到我视图中的变量中并回显它，但无济于事。我还读到一些人尝试使用命名键来指示他们想要显示的特定消息，但这在这里不合适，因为我想要显示的文本正在显示，只是在错误的位置。

任何帮助将不胜感激 - 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-29T09:53:26.240

我认为您的布局中可能有剩余内容

```
$session->flash(); 
```

所以闪光灯在那里渲染并清除。这就是为什么它没有在您的元素中呈现的原因。

检查您的`~/app/views/layouts/default.ctp`（或其他，如果您不使用默认设置）并让我们知道它是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-02-14T02:05:43.917

确保如果您在控制器中调用 setFlash() 时使用了转换函数，则将“true”作为第二个参数传递给它。像这样：

$this->Session->setFlash(__('My Message Here', TRUE));

否则，消息将被回显，不返回！您只会在页面的 HTML 代码前看到它，并且发送到 setFlash 的消息将是未定义的，因此不会显示在您期望的位置。

# wcf - WCF + SSL 未找到端点

> ID：797903
> 
> 赞同：12
> 
> 时间：2009-04-28T13:22:02.083
> 
> 标签：wcf, web-services, ssl

我现在花了几个小时来解决这个问题。

我有一个在 II7 上托管的 wcf 服务，当我使用普通的 http 协议时一切正常。

我添加了 SSL 功能，从那时起我无法从代码中访问它。我可以创建一个客户端，但不能运行它的任何方法。

这就是我所拥有的

```
 <system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding name="WSHttp0">
                <security mode="Transport">
                    <transport realm ="" clientCredentialType="None" />
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>
    <client>
        <endpoint address="https://serverName.domname.local/WCFTest/MyWebServicec.svc"
            binding="wsHttpBinding" bindingConfiguration="WSHttp0" contract="SSLWebService.IMyWebService"
            name="WSEP">
            <identity>
                <dns value="serverName.domname.local" />
            </identity>
        </endpoint>
    </client>
</system.serviceModel> 
```

我为我的项目添加了服务引用

我就这样使用它

```
Dim client As MyWebServiceClient = New MyWebServiceClient()
Try
    client.GetDocumentByDocID(5)
Catch ex As Exception
    MessageBox.Show(ex.Message)
End Try 
```

这就是我得到的

> 在[https://serverName.domname.local/WCFTest/MyWebService.svc](https://serverName.domname.local/WCFTest/MyWebService.svc)上没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。

谁可以帮我这个事？我真的不明白这是怎么回事……

注意：我可以使用 Internet Explorer 正确访问 web 服务（所以我猜我的证书没问题）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T14:49:41.857

我认为服务器 web.config 可能是这里的错误。我在客户端使用以下 app.config 通过 SSL 使用 WCF。

```
<configuration>
  <system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="WSHttpBinding_IService" >
          <security mode="Transport">
            <transport realm ="" clientCredentialType="Windows" />
          </security>
        </binding>

      </wsHttpBinding>
    </bindings>
    <client>
      <endpoint address="https://mycomputer/Service/Service.svc"
          binding="wsHttpBinding"
          bindingConfiguration="WSHttpBinding_IService"
          contract="ServiceProxy.IService" name="WSHttpBinding_IService">
        <identity>
          <dns value="mycomputer" />
        </identity>
      </endpoint>
    </client>
  </system.serviceModel>
</configuration> 
```

唯一明显的区别是我设置为 Windows 的 ClientCredentialType，因为我想使用集成的 Windows 身份验证。服务器 web.config 包括以下几行来设置客户端可以使用的服务。

```
 <system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="WindowsBinding">
          <security mode="Transport">
            <transport proxyCredentialType="Windows" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
    <services>
      <service behaviorConfiguration="Service.Service1Behavior"
               name="Service.Service">
        <endpoint address="" binding="wsHttpBinding"
                  bindingConfiguration="WindowsBinding"
                  contract="ServiceInterface.IService">
          <identity>
            <dns value="mycomputer" />
          </identity>
        </endpoint>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Service.Service1Behavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

您能否将其与服务器端的 web.config 进行比较，看看有什么不同？或者将您的 web.config 添加到问题中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T14:59:54.467

你是对的，

sg在服务器端出错。

这是我如何使它工作的

```
<system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding name="wsHttpEndpointBinding">
                <security mode="Transport">
                    <transport clientCredentialType ="None"/>
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>
    <services>
        <service behaviorConfiguration="App_WcfWebService.AppWebServiceBehavior" name="App_WcfWebService.AppWebService">
            <endpoint address="" binding="wsHttpBinding" bindingConfiguration ="wsHttpEndpointBinding" contract="App_WcfWebService.IAppWebService">

            </endpoint>
            <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange"/>
        </service>
    </services>
    <behaviors>
        <serviceBehaviors>
            <behavior name="App_WcfWebService.AppWebServiceBehavior">
                <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
                <serviceMetadata httpsGetEnabled="true"/>
                <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
                <serviceDebug includeExceptionDetailInFaults="true"/>
                <serviceThrottling maxConcurrentSessions="90" />                    
            </behavior>
        </serviceBehaviors>
    </behaviors>
</system.serviceModel> 
```

# c# - 在 WPF 中，创建类似于 Outlook 2007 的日历视图的最佳方法是什么？

> ID：797915
> 
> 赞同：2
> 
> 时间：2009-04-28T13:24:17.270
> 
> 标签：c#, .net, wpf, wpf-controls

我正在编写一个 WPF 桌面应用程序，并且有一个需要看起来像日历的视图。我只需要展示四个星期（固定）。每周都会有一个项目列表（可能用 ListView 表示）。我在两种方法之间进行辩论：

1.  使用布局控件 - 每个“单元格”都包含一个 ListView 的 Grid 控件

2.  使用 ListView + GridView，然后自定义样式看起来更像日历

在我看来，布局控件会更容易实现，但感觉有些脏。我基本上会硬编码 28 个单元格，每个单元格都包含一个 ListView。但同样，这很简单。

我在想 ListView/GridView 会更优雅，但我仍然需要为每个单元格创建一个 ListView，然后我必须弄清楚如何设置控件的样式，使其看起来更像日历而不像一张桌子。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T13:34:39.930

您可以使用带有 UniformGrid 的 ListBox。这将负责构建基本布局。当显示的日期不在当月时，在当月触发一点，实现样式的改变。

然后，每天都可以将 ListView 或 ListBox 作为其模板的一部分，用于显示任务/会议/任何内容。

整个事情将绑定到代表“天”及其内容的对象集合。

ListBox 通常是 ItemsControl 基础的不错选择。

您还应该看看日历控件是如何在 WPF 中构建的，它可能会帮助您提供一些想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T14:56:53.460

也许，以下示例可以帮助您： http: [//www.codeproject.com/KB/WPF/WPFOutlookCalendar.aspx](http://www.codeproject.com/KB/WPF/WPFOutlookCalendar.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T17:41:46.390

看看它可能在 WPF 中工作的[Silverlight Toolkit的源代码](http://www.codeplex.com/Silverlight)

# asp.net-mvc - ASP.NET MVC 母版页：“‘模型’不是‘System.Web.UI.Page’的成员”

> ID：797916
> 
> 赞同：4
> 
> 时间：2009-04-28T13:24:24.073
> 
> 标签：asp.net-mvc, master-pages

我的视图被强类型化为具有布尔属性 ShowMenu 的 ADO.NET 实体框架类。

```
<%@ Page ... MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage(Of Thing)" %>
... 
```

我想在我的母版页上做这样的事情......

```
<%@ Master ... Inherits="System.Web.Mvc.ViewMasterPage" %>
...
<div id="menu" runat="server" visible="<%= Me.Page.Model.ShowMenu %>">
    <asp:ContentPlaceHolder ID="MenuContent" runat="server" />
</div> 
```

但是，我得到这个错误：

> “模型”不是“System.Web.UI.Page”的成员

如何从其母版页访问视图的模型？

* * *

## 更新

哎呀：

> 服务器标签不能包含 <% ... %> 结构。

必须使用 If...Then 代替。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-28T13:37:07.570

你不能那样做。您需要做的是设置母版页视图模型，如下所示：

```
Inherits="System.Web.Mvc.ViewMasterPage<BaseModel>" 
```

...`BaseModel`您将在每个视图中使用的一些基类在哪里。由于这个限制，它非常脆弱，你可能不想这样做。

在任何情况下，每个视图都必须具有派生自 BaseModel 的模型类型。

然后在您的母版页中，您可以简单地执行以下操作：

```
<%= Model.ShowMenu %> 
```

另一种选择是使用 ViewData 字典并具有合理的默认值，以防操作未设置它。

```
<% if( (bool)(ViewData["showmenu"] ?? false) ) { %>
    ... render menu here ...
<% } %> 
```

这很丑陋，因此您可能会选择使用帮助程序：

```
<% if(this.ShouldRenderMenu()) { %>
   .....
<% } %> 
```

在你的助手中：

```
public static class MyExtensions
{
   public static bool ShouldRenderMenu(this ViewMasterPage page)
   {
      return (bool)(page.ViewData["rendermenu"] ?? false);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T13:45:12.387

我不确定他为什么删除它，但[Rajesh Pillai](https://stackoverflow.com/users/34644/rajesh-pillai)的回答有效：

```
Me.ViewData.Model.ShowMenu 
```

# .net - VisualStudio 生成的数据集异常

> ID：797925
> 
> 赞同：2
> 
> 时间：2009-04-28T13:26:52.430
> 
> 标签：.net, visual-studio

除了查看生成的代码之外，是否有任何方法可以确定由 VisualStudio 生成的 DataSet 中的方法可以抛出的异常（使用“数据”>“添加新数据源”菜单选项）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T14:42:52.510

您可以使用[Exception Hunter](http://www.red-gate.com/products/Exception_Hunter/index.htm)之类的工具来追踪它们。（我自己没试过，但我用过其他红门产品，质量很好。）

# subsonic - 构建错误：“System.Array”不包含“列”的定义，

> ID：797935
> 
> 赞同：2
> 
> 时间：2009-04-28T13:28:05.843
> 
> 标签：subsonic

我正在为我的 Web 应用程序使用 SubSonic 2.1。它一直运行良好，直到最近我在我的 SQL Server 2005 数据库中添加了一个表来存储用户文件（例如 MS Word、PDF、Jpeg、Gif、Tiff 文件）。这些文件存储在名为 ReportFile varbinary(max) 的列中。

在 SubSonic 生成代码后，我构建它，并得到这个错误：

“System.Array”不包含“Columns”的定义，并且找不到接受“System.Array”类型的第一个参数的扩展方法“Columns”（您是否缺少 using 指令或程序集引用？）

违规方法：

```
public MyWebApp.ReportFileCollection ReportFiles()
{
    return newMyWebApp.ReportFileCollection().Where(ReportFile.Columns.ReportID, ReportID).Load();
} 
```

然后，我检查了文件 ReportFile.cs，确实看到 Columns 被定义为结构：

```
#region Columns Struct
public struct Columns
{
     public static string ReportFileID = @"ReportFileID";
     public static string FileName = @"FileName";
     public static string ReportID = @"ReportID";
     public static string MimeType = @"MimeType";
     public static string FileSize = @"FileSize";
     public static string FileData = @"FileData";
     public static string UploadDate = @"UploadDate";

}
#endregion 
```

我曾认为它可能与 varbinary(max) 列有关，因此我使用 Test 数据库测试了生成代码，该数据库还包含一个带有 varbinary(max) 列的表，并且效果很好。

由于这个错误，我不得不注释掉这个 ReportFiles 方法。有人知道吗？这对我来说很神秘。任何解决方法？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-24T17:36:45.017

在我看来，这听起来像是与已声明的命名空间之一的命名冲突。也许你看到的错误并没有告诉你全部真相。您可能需要在 web.config 中使用[regexDictionaryReplace](http://www.subsonicproject.com/docs/2.0_Configuration)将列重命名为不冲突的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-01T10:55:07.253

要解决此服务器端错误，您只需添加以下命名空间，

```
using System.Linq; 
```

在源代码的顶部，并确保您有对*System.Core*程序集的引用。

# version-control - 如何列出我在 Team Foundation Server 中签入的所有文件？

> ID：797941
> 
> 赞同：2
> 
> 时间：2009-04-28T13:29:23.500
> 
> 标签：version-control, tfs

如何列出我最近`x`签入到 TFS 的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-29T15:13:52.740

使用 TFS PowerToys ¹随附的 TFS PS 管理单元...

```
Get-TfsItemHistory "$/" -recurse -stop 50 -user "my-username" | % { Get-TfsChangeset $_.Changesetid} |select -expand changes | select -first 20 
```

第一`-stop 50`阶段是避免每次更改都被检索到，这将减慢重要存储库的速度。另请注意，这并不能消除同一文件属于多个变更集的重复项。

¹信息[在这里](http://blogs.msdn.com/bharry/archive/2008/10/01/preview-of-the-next-tfs-power-tools-release.aspx)，[在这里](http://blogs.msdn.com/bharry/archive/2008/11/08/oct-08-tfs-power-tools-are-available.aspx)和[下载](http://www.microsoft.com/downloads/details.aspx?FamilyId=FBD14EEA-781F-45A1-8C46-9F6BA2F68BF0&displaylang=en)。使用自定义安装添加 PSSnapin。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-28T10:07:59.220

tf 历史 /user:myusername /stopafter:10 /recursive /noprompt $/

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-28T13:52:49.887

安装[Team Foudation SideKick](http://www.attrice.info/downloads/)，你将有很多过滤器来搜索你想要在 TFS 中的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T13:31:04.417

在源代码资源管理器中，右键单击项目并单击查看历史记录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-16T10:40:06.693

登录到 TFS 服务器的网站并查看变更集。

# c# - 如何测试依赖于 IP 地址的 ASP.NET 应用程序

> ID：797944
> 
> 赞同：1
> 
> 时间：2009-04-28T13:30:08.507
> 
> 标签：c#, .net, http, ip-address

我编写了一个 ASP.NET 应用程序，并在此应用程序中记录了请求 IP 地址。而且我还根据不同的IP范围提供不同的内容。

我的问题是，在我有限的测试环境中，我只有5台机器，每台机器只有1个IP地址，我想全面测试一下我的IP地址基于ASP.NET的功能，所以在我的情况下如何创建HTTP请求哪个包含超出我的测试机器的5个IP地址的任意IP地址？

.Net/C# 中的解决方案值得赞赏。但是任何现有的工具也很受欢迎。

EDIT1：我正在编写一个学校教育网络应用程序，它为来自不同城市的学生提供不同的内容。不同的城市有不同的课程/研讨会/培训，我想根据特定城市的学校分支机构的（代理）地址显示最相关的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T13:53:22.757

一种选择是更改逻辑以查看 IP 地址或[X-Forwarded-For](http://en.wikipedia.org/wiki/X-Forwarded-For)标头。当请求通过代理服务器时，此标头通常用于指示原始 IP 地址。虽然是的，你不需要在这里考虑代理，但这样做会给你一个非常简单的方法来测试你的逻辑。

我认为这将是您最快的路线，而不是试图欺骗 IP 地址。

**编辑**

```
 Uri uriObj = new Uri("http://localhost");
        HttpWebRequest request =
         (HttpWebRequest)WebRequest.CreateDefault(uriObj);

        request.Headers.Add("X-Forwarded-For", "125.125.125.125");

        WebResponse response = request.GetResponse();
        StreamReader reader = new StreamReader(response.GetResponseStream());
        Console.WriteLine(reader.ReadToEnd()); 
```

**编辑**

您需要将服务器端逻辑更改为：

```
 string ip = Request.Headers.Get("X-Forwarded-For");
    if (string.IsNullOrEmpty(ip))
    {
        ip = Request.UserHostAddress;
    } 
```

这基本上表示如果包含标头，则使用它们，否则使用他们告诉我的 IP 地址。这样你的测试代码和真实用户都会被选中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T13:41:43.347

您不应依赖 IP 地址。如果您的其中一个客户端位于任何类型的代理服务器或网络地址转换设备之后，那么他们将不会拥有您期望的 IP 地址范围。即使您当前的网络没有此类设备，您的应用程序也没有必要限制未来网络可以更改的方式。

您应该使用真正的身份验证机制来确定您的客户的真实身份。IP 地址明确不是设计用于识别计算机。

* * *

**编辑**以回应乔治的编辑。

您的场景是*绝对*不应该依赖 IP 地址的场景。您希望依赖 IP 地址作为地理位置的替代。那只是懒惰的设计。IP地址碰巧与地理位置有一些间接对应的事实只不过是（当前）分配它们的过程的产物。

相反，如果地理位置很重要，那么您的客户端应该告诉服务器他们的位置是什么！然后它总是准确的，即使网络发生变化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-28T13:55:57.117

在工作中，我们使用虚拟机。您可以拥有任意数量的 ip。它们是周围的几种产品。我们主要使用[http://www.virtualbox.org/](http://www.virtualbox.org/)（它是免费的……哈哈）。

只需构建一个，然后复制/粘贴。配置固定ip。就是这样；您甚至可以在同一台物理 PC 上测试所有内容！

希望这有帮助... :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T13:36:44.463

IP 来自 TCP/IP 标头，而不是 HTTP 请求的“真实”正文。因此，伪造并非易事。但是，如果您在 LAN 上，则可以使用静态 IP 进行测试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-28T13:44:03.090

由于原始套接字限制......等原因，在 Windows 中欺骗 IP 地址是不可能的（或至少根本不容易）。

你可能会使用linux 下的[hping](http://www.hping.org/)工具，或windows 的[WinPcap](http://www.winpcap.org/)库来生成原始数据包，但你会花很多时间白费。

我想最好的方法是将您的 5 台机器的 IP 手动设置为不同的 IP（您使用的每个范围中的一个）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-28T13:54:42.487

在局域网上设置您的站点，创建虚拟机，并在局域网上为这些机器分配不同的静态 IP 地址。将应用程序中的 IP 范围更改为局域网上的 IP 范围，确保其正常工作，然后将范围设置为您在应用程序的生产版本中所需的范围。您应该拥有该站点的开发版本，并且没有理由不能在局域网上。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-28T13:59:39.260

哎呀。错误的东西

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-28T14:01:40.537

也许您可以通过简单地发送一个 http“referer”标头来测试您的逻辑。例如：

```
Dim request As System.Net.HttpWebRequest = System.Net.HttpWebRequest.Create("www.MySite.com")
request.Referer = "http://1.2.3.4"
Dim response As System.Net.HttpWebResponse = request.GetResponse() 
```

# iphone - iPhone 应用程序中所有预安装的自动释放池在哪里？

> ID：797945
> 
> 赞同：0
> 
> 时间：2009-04-28T13:30:20.033
> 
> 标签：iphone, cocoa-touch, memory-management, uikit

我想知道有多少，它们在哪里。正如我在斯坦福视频中看到的那样，在 iPhone 应用程序的事件循环中安装了一个自动释放池。但我想我错过了确切的地方？还有其他我应该知道的自动释放池吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T13:32:44.287

在 main.m 文件中（在 X-code 中它位于“Other Sources”文件夹中）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T13:37:46.757

应用程序的自动释放池在每次通过运行循环时都会耗尽。你可以在任何你想要的地方添加你自己的池，如果你有一个创建大量对象的大循环，那么在那里放置一个池以限制内存使用是一个好主意。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-28T14:51:23.803

您创建的每个线程都需要自己的自动释放池。有关详细信息，请查看文档`NSThread`。

默认情况下，您的主应用程序线程将使用在`main.m`. 除非您像 Marc Charbonneau 所说的那样进行大量大型操作，否则您通常不需要创建其他操作。如果你真的在做这么多的操作，那么在一个单独的线程中做它们可能是个好主意。

# c# - 在用户按键上搜索 datagridview

> ID：797946
> 
> 赞同：7
> 
> 时间：2009-04-28T13:30:41.313
> 
> 标签：c#, .net, winforms, datagridview, keypress

我正在尝试选择单元格值以用户按下的相同 keychar 开头的第一行。这就是给我带来麻烦的部分。

这是我处理事件的方式（**使用工作解决方案更新**）：

```
private void dataGridView1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (Char.IsLetter(e.KeyChar))
    {
        for (int i = 0; i < (dataGridView1.Rows.Count); i++)
        {
            if (dataGridView1.Rows[i].Cells["Name"].Value.ToString().StartsWith(e.KeyChar.ToString(), true, CultureInfo.InvariantCulture))
            {
                dataGridView1.Rows[i].Cells[0].Selected = true;
                return; // stop looping
            }
        }
    }
} 
```

我敢肯定，我忽略了一些简单的事情，但是对于我的生活，我无法弄清楚它是什么。

## 编辑

更新了代码并应用了解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T13:41:49.053

可能是一个案例问题，单元格中的值[“名称”]是否以大写字母开头？尝试在两者上使用 ToUpper 或 ToLower；或者您可以尝试 StartsWith(e.KeyChar, true) 来忽略大小写。如果您尝试选择行，则需要执行 dataGridView1.Rows[i].Selected = true

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T13:53:55.033

```
if (Char.IsLetterOrDigit(e.KeyChar))
{
    foreach (DataGridViewRow dgvRow in myDgv.Rows)
    {
        if (dgvRow.Cells["ColumnName"].FormattedValue
            .ToString().StartsWith(e.KeyChar.ToString(), true, CultureInfo.InvariantCulture))
        {
            dgvRow.Selected = true;
            break;
        }
    }
} 
```

如果 DGV 设置为允许多选，那么您显然希望取消选择任何现有的选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-23T07:14:01.120

如果有多个名称以同一个字母开头的实例，则原始问题中的编辑答案不支持跳转到下一个字母。这是支持此功能的已编辑答案：

```
private void dataGridView1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (Char.IsLetter(e.KeyChar))
    {
        int index = 0;
        // This works only if dataGridView1's SelectionMode property is set to FullRowSelect
        if (dataGridView1.SelectedRows.Count > 0 )
        {
            index = dataGridView1.SelectedRows[0].Index + 1
        }
        for (int i = index; i < (dataGridView1.Rows.Count + index); i++)
        {
            if (dataGridView1.Rows[i % dataGridView1.Rows.Count].Cells["Name"].Value.ToString().StartsWith(e.KeyChar.ToString(), true, CultureInfo.InvariantCulture))
            {
                foreach (var row in dataGridView1.Rows.Cast<DataGridViewRow>().Where(t => t.Selected))
                {
                    row.Selected = false;
                }
                dataGridView1.Rows[i % dataGridView1.Rows.Count].Cells[0].Selected = true;
                return; // stop looping
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-29T21:50:38.933

这是一个 VS2008 VB.NET DataGridView 扩展，旨在完成您正在做的事情，但使用 TextBox 来搜索信息（设计时不考虑大小写，但可以轻松添加）。这个扩展有效，所以也许有些东西可能会有所帮助。我确实注意到您的代码使用 select 选择了一行，而我使用的是 CurrentCell。

```
 <Runtime.CompilerServices.Extension()> _
Public Function PartSeek(ByVal GridView As DataGridView, ByVal ColumnName As String, ByVal Value As String, ByVal Part As Boolean) As Boolean
    Dim Located As Boolean = False

    If GridView.Columns.Contains(ColumnName) Then
        Dim SingleRow As DataGridViewRow
        If Part Then
            SingleRow = (From Rows In GridView.Rows.Cast(Of DataGridViewRow)() _
                         Where Rows.Cells(ColumnName).Value.ToString().Contains(Value)).FirstOrDefault
        Else
            SingleRow = (From Rows In GridView.Rows.Cast(Of DataGridViewRow)() _
                         Where Rows.Cells(ColumnName).Value.ToString() = Value).FirstOrDefault
        End If
        If Not IsNothing(SingleRow) Then
            If GridView.CurrentCell.RowIndex <> SingleRow.Index Then
                GridView.CurrentCell = GridView(0, SingleRow.Index)
            End If
            DirectCast(GridView.Parent, Form).ActiveControl = GridView
            Located = True
        End If
        Return Located
    Else
        Throw New Exception("Column '" & ColumnName & "' not contained in this DataGridView")
    End If

End Function 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-09T21:04:50.167

我在 VB.NET 中使用它。您可以使用[http://www.developerfusion.com/tools/](http://www.developerfusion.com/tools/)转换为 C Sharp。

我写了一个方法来选择输入的行字母。该函数在 DataGridView 的 KeysPress 事件处理程序中调用。

方法：

```
'user types letter in dgv, method will select the column starting with that letter if it exists or else next letter existing in dgv
Public Shared Sub GoToLetterTypedInDataGridView(ByVal dgv As DataGridView, ByVal columnName As String, ByVal columnPosition As Integer, ByVal letterTyped As Char)
    Try
        Dim dt As DataTable = dgv.DataSource
        Dim letter As Char = letterTyped
        Dim dv As DataView = New DataView(dt)
        Dim hasCount As Boolean = False

        While (Not hasCount)
            dv.Sort = columnName
            dv.RowFilter = columnName & " like '" & letter & "%'"
            If dv.Count > 0 Then
                hasCount = True
                Dim x As String = dv(0)(columnPosition).ToString()
                Dim bs As New BindingSource
                bs.DataSource = dt
                dgv.BindingContext(bs).Position = bs.Find(columnName, x)
                dgv.CurrentCell = dgv(0, bs.Position)
            Else
                If letter = "z" Then
                    letter = "a"
                ElseIf letter = "Z" Then
                    letter = "A"
                Else : letter = Chr(Asc(letter) + 1)
                End If
            End If
        End While
    Catch ex As Exception
        Dim stackframe As New Diagnostics.StackFrame(1)
        Throw New Exception("An error occurred in routine, '" & stackframe.GetMethod.ReflectedType.Name & "." & System.Reflection.MethodInfo.GetCurrentMethod.Name & "'." & Environment.NewLine & "  Message was: '" & ex.Message & "'")
    End Try
End Sub 
```

然后调用：

```
Private Sub dgvNew_KeyPress(sender As Object, e As System.Windows.Forms.KeyPressEventArgs) Handles dgvNew.KeyPress
Try
    If dgvNew.RowCount > 0 Then
        GoToLetterTypedInDataGridView(dgvNew, "columnName", 0, e.KeyChar)
    End If
Catch ex As Exception
    Dim stackframe As New Diagnostics.StackFrame(1)
    Throw New Exception("An error occurred in routine, '" & stackframe.GetMethod.ReflectedType.Name & "." & System.Reflection.MethodInfo.GetCurrentMethod.Name & "'." & Environment.NewLine & "  Message was: '" & ex.Message & "'")
End Try 
```

结束子

希望这可以帮助！琥珀色

# c# - 远程处理和套接字有此断开/重新连接问题

> ID：797947
> 
> 赞同：1
> 
> 时间：2009-04-28T13:30:48.410
> 
> 标签：c#, sockets, remoting

为什么sockets/remoting在反复断开重连时没有能力顺利工作？我被迫杀死服务器和客户端应用程序并再次重新打开它们。

这个问题的解决方法是什么？

谢谢

编辑：这个问题没有任何问题。出现不同的错误...有时，应用程序崩溃，有时没有响应

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T13:34:29.477

操作系统将在定义的时间段内保存套接字引用，以处理保留在网络上/从客户端发送的任何消息。要在关闭后重新绑定到特定端口号，您应该在定义套接字时查看指定[SO_REUSEADDR选项。](http://msdn.microsoft.com/en-us/library/ms740621%28VS.85%29.aspx)

# javascript - 在 javascript 中扩展 ActiveXObject

> ID：797960
> 
> 赞同：8
> 
> 时间：2009-04-28T13:33:44.363
> 
> 标签：javascript, proxy, activex

我想添加一些功能来跟踪 JavaScript 中对 ActiveX 对象方法的某些调用。

我通常像这样创建我的 activeX 对象： var tconn = new ActiveXObject("Tconnector");

每次在 tconn 和该 activeX 控件的所有其他实例上调用**open方法时，我都需要记录。**

我不能修改 tconn 的原型，因为它没有！

我认为我可以创建一个虚拟 ActiveXObject 函数，该函数创建一个代理对象来代理对真实对象的调用。你能帮我做吗？

注意：编写直接包装器是没有问题的，因为在应用程序中已经有 1000 次调用此 activeX。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-28T15:44:10.103

您实际上可以覆盖`ActiveXObject()`.

这意味着您可以尝试围绕实际对象构建透明代理对象并挂钩方法调用。这意味着您必须围绕 ActiveX 对象具有的每个方法和属性构建代理，除非您绝对确定没有任何代码调用特定方法或属性。

我为该`"MSXML2.XMLHTTP"`对象构建了一个小包装器。您可能会遇到各种各样的问题，因此请谨慎对待：

```
var ActualActiveXObject = ActiveXObject;

var ActiveXObject = function(progid) {
  var ax = new ActualActiveXObject(progid);

  if (progid.toLowerCase() == "msxml2.xmlhttp") {
    var o = {
      _ax: ax,
      _status: "fake",
      responseText: "",
      responseXml: null,
      readyState: 0,
      status: 0,
      statusText: 0,
      onReadyStateChange: null
      // add the other properties...
    };
    o._onReadyStateChange = function() {
      var self = o;
      return function() {
        self.readyState   = self._ax.readyState;
        self.responseText = self._ax.responseText;
        self.responseXml  = self._ax.responseXml;
        self.status       = self._ax.status;
        self.statusText   = self._ax.statusText;
        if (self.onReadyStateChange) self.onReadyStateChange();
      }
    }();
    o.open = function(bstrMethod, bstrUrl, varAsync, bstrUser, bstrPassword) {
      varAsync = (varAsync !== false);
      this._ax.onReadyStateChange = this._onReadyStateChange
      return this._ax.open(bstrMethod, bstrUrl, varAsync, bstrUser, bstrPassword);
    };
    o.send = function(varBody) {
      return this._ax.send(varBody);
    };
    // add the other methods...
  }
  else {
    var o = ax;
  }

  return o;
}

function Test() {
  var r = new ActiveXObject('Msxml2.XMLHTTP');

  alert(r._status);  // "fake"

  r.onReadyStateChange = function() { alert(this.readyState); };
  r.open("GET", "z.xml");
  r.send();

  alert(r.responseText);
} 
```

免责声明：尤其是 async/onReadyStateChange 处理可能不正确，代码也可能存在其他问题。正如我所说，这只是一个想法。小心轻放。

PS：当涉及到方法和属性名称时，COM 对象不区分大小写。这个包装器（与所有 JavaScript 一样）区分大小写。例如，如果您的代码碰巧同时调用了`"Send()"`and `"send()"`，那么您还需要在包装器中添加一个骨架“Send()”方法：

```
o.Send = function() { return this.send.apply(this, arguments); }; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-02-05T10:47:36.477

非常感谢你的包装。在您的帮助下，我能够为 IE 和 FF 以及其余部分创建 xmlrequest 检测器。

我添加了一个适用于 FF 、 IE 和其他人的版本（结合另一个示例），

```
if(window.XMLHttpRequest)
{
var XMLHttpRequest = window.XMLHttpRequest;

// mystery: for some reason, doing "var oldSend = XMLHttpRequest.prototype.send;" and 
//  calling it at the end of "newSend" doesn't work...
var startTracing = function () {
    XMLHttpRequest.prototype.uniqueID = function() {
        // each XMLHttpRequest gets assigned a unique ID and memorizes it 
        //  in the "uniqueIDMemo" property
        if (!this.uniqueIDMemo) {
            this.uniqueIDMemo = Math.floor(Math.random() * 1000);
        }
        return this.uniqueIDMemo;
    }

    // backup original "open" function reference
    XMLHttpRequest.prototype.oldOpen = XMLHttpRequest.prototype.open;

    var newOpen = function(method, url, async, user, password) {
        console.log("[" + this.uniqueID() + "] intercepted open (" + 
                    method + " , " + 
                    url + " , " + 
                    async + " , " + 
                    user + " , " + 
                    password + ")");
        this.oldOpen(method, url, async, user, password);
    }

    XMLHttpRequest.prototype.open = newOpen;

    // backup original "send" function reference
    XMLHttpRequest.prototype.oldSend = XMLHttpRequest.prototype.send;

    var newSend = function(a) {
        console.log("[" + this.uniqueID() + "] intercepted send (" + a + ")");
        var xhr = this;
        var onload = function() { 
            console.log("[" + xhr.uniqueID() + "] intercepted load: " + 
                    xhr.status + 
                    " " + xhr.responseText); 
        };

        var onerror = function() { 
            console.log("[" + xhr.uniqueID() + "] intercepted error: " + 
                    xhr.status); 
        };

        xhr.addEventListener("load", onload, false);
        xhr.addEventListener("error", onerror, false);

        this.oldSend(a);
    }
    XMLHttpRequest.prototype.send = newSend;
}

startTracing();
}
else if (window.ActiveXObject) {
var ActualActiveXObject = ActiveXObject;

var ActiveXObject = function(progid) {
    var ax = new ActualActiveXObject(progid);

    if (progid.toLowerCase() == "msxml2.xmlhttp") {

        var o = {
            _ax: ax,
            _status: "fake",
            responseText: "",
            responseXml: null,
            readyState: 0,
            status: 0,
            statusText: 0,
            onReadyStateChange: null
        };
        o._onReadyStateChange = function() {
            var self = o;
            return function() {
            self.readyState   = self._ax.readyState;
            if (self.readyState == 4) {
                self.responseText = self._ax.responseText;
                self.responseXml  = self._ax.responseXml;
                self.status       = self._ax.status;
                self.statusText   = self._ax.statusText;
            }
                if (self.onReadyStateChange) self.onReadyStateChange();
            }
        }();
        o.open = function(bstrMethod, bstrUrl, varAsync, bstrUser, bstrPassword) {
            console.log("intercepted open (" + 
                bstrMethod + " , " + 
                bstrUrl + " , " + 
                varAsync + " , " + 
                bstrUser + " , " + 
                bstrPassword + ")");
            varAsync = (varAsync !== false);
            this._ax.onReadyStateChange = this._onReadyStateChange
            return this._ax.open(bstrMethod, bstrUrl, varAsync, bstrUser, bstrPassword);
        };
        o.send = function(varBody) {
            return this._ax.send(varBody);
        };
    }
    else
        var o = ax;
    return o;
}
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-04-07T10:03:27.543

IE6 中“完成此操作所需的数据尚不可用”的小修复 - 在填充响应属性之前等待完整性：

```
self.readyState   = self._ax.readyState;
 if (self.readyState == 4) {
  self.responseText = self._ax.responseText;
  self.responseXml  = self._ax.responseXml;
  self.status       = self._ax.status;
  self.statusText   = self._ax.statusText;
 }
 if (self.onReadyStateChange) self.onReadyStateChange(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-07T18:08:19.847

这里的问题是，IE 似乎不允许保存原始的 activXObject 构造函数，并且会在创建 ActualActiveXObject 时产生堆栈溢出 (;-)。似乎这对于 ActivX 来说是特殊的，因为它在与其他 javascript 对象一起执行此操作时起作用。

# linq-to-sql - 如何使用 LINQ 设置 RecordCount、TOP 和 NOLOCK？

> ID：797963
> 
> 赞同：1
> 
> 时间：2009-04-28T13:35:17.947
> 
> 标签：linq-to-sql

是否可以编写一个在 LINQ 中也有`NOLOCK`and的 select 语句`TOP`？

`RowCount`在查询之前设置呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T13:43:57.723

在查询中添加 .Take(5) 与 Top 5 相同

添加 .Skip(5) 将开始在第 6 行返回结果

不确定如何将 NOLOCK 添加到查询中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T13:46:15.067

这是一篇很好的文章`TransactionScope`：

[http://www.madprops.org/blog/linq-to-sql-and-nolock-hints/](http://www.madprops.org/blog/linq-to-sql-and-nolock-hints/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T13:51:42.243

TGnat 说明了如何做`TOP`（通过`.Take(n)`）。但是，没有像`(NOLOCK)`特定表一样添加精细提示（等）的内置方法。有几种方法可以解决这个问题：

*   编写一个存储过程并通过数据上下文公开它
*   编写一个 udf 并通过数据上下文公开它
*   与[`ExecuteQuery`](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.executequery.aspx)具有`NOLOCK`

在这 3 个中，UDF 会得到我的投票：

*   它不会给您留下 C# 中的文字查询
*   元数据被强定义
*   它是可组合的（与`.Skip`/ `.Take`/`.Where`等）

# java - Java中静态字段的确切含义是什么？

> ID：797964
> 
> 赞同：36
> 
> 时间：2009-04-28T13:35:42.330
> 
> 标签：java, static, jvm

我想在同一类对象的各种实例之间共享一个对象。

从概念上讲，当我的程序运行时，A 类的所有对象都访问 B 类的同一个对象。

我已经看到它`static`是系统范围的，并且不鼓励使用它。这是否意味着如果我在同一个 JVM 上运行另一个程序来实例化 A 类的对象，这些对象可能会访问与前一个程序中访问的对象相同的 B 对象？

使用静态字段通常有哪些缺陷？

是否有任何替代方案（不需要大量实施）？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2009-04-28T13:39:58.920

静态并不完全意味着“由所有实例共享” - 它的意思是“根本与特定实例无关”。换句话说，您可以在不创建*任何*实例的情况下获得类 A 中的静态字段。

至于在同一个 JVM 中运行两个程序 - 这实际上取决于您所说的“运行两个程序”是什么意思。静态字段*有效地*与类对象相关联，而类对象又与类加载器相关联。因此，如果这两个程序使用单独的类加载器实例，您将拥有两个独立的静态变量。如果他们都使用相同的类加载器，那么只有一个，所以他们会看到彼此的变化。

至于替代方案 - 有多种选择。一种是将对“共享”对象的引用传递给您创建的每个需要它的对象的构造函数。然后它将需要存储该引用以供以后使用。与静态方法相比，这可能会有点痛苦并且会占用更多的内存，但它确实使可测试性变得容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T13:39:45.270

不鼓励使用静态方法和成员，因为它们经常被误用，但这听起来像是静态是正确方法的情况。至于跨多个程序共享的静态，情况并非如此。每个程序都在完全独立的环境中运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T13:40:12.677

您正在寻找的是所谓的[Singleton Pattern](http://en.wikipedia.org/wiki/Singleton_pattern)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-28T14:18:34.973

假设一切都在同一个类加载器中，那么为什么不使用[单](http://c2.com/cgi/wiki?MonostatePattern)态模式来做到这一点呢？

您的共享静态隐藏在单态中：

```
  公共类单态{

      私有静态字符串str =“默认”；

      公共字符串 getString() {
          返回字符串；
      }

      公共无效 setString(String s) {
          str = s;
      }
  }

```

然后，您可以随意创建任意数量的单态实例，但由于静态引用，它们都共享相同的底层对象。

```
   单态 mono = new Monostate();
   mono.setString("弗雷德");
   System.out.println(mono.getString());

```

# wpf - 在 WPF 中，如何在右键单击时选择光标下的树视图项？

> ID：797966
> 
> 赞同：18
> 
> 时间：2009-04-28T13:35:59.350
> 
> 标签：wpf, treeview, treeviewitem

在 WPF 中，当我右键单击树视图项时，我希望在显示上下文菜单之前选择/激活它。

这听起来很简单，但是包含 hierachicalDataTemplate 会使事情变得有些复杂。

我有以下树视图：

```
<TreeView 
            x:Name="trv"
            ContextMenu="{StaticResource contextMenu}"
            ItemTemplate="{StaticResource treeHierarchicalDataTemplate}"
            ItemsSource="{Binding Source={StaticResource meetingItems}}" >

            <TreeView.ItemContainerStyle>
                <Style TargetType="{x:Type TreeViewItem}">
                    <EventSetter Event="TreeViewItem.PreviewMouseRightButtonDown" Handler="trv_PreviewMouseRightButtonDown"/>
                    <Setter Property="IsExpanded" Value="True"></Setter>
                </Style>
            </TreeView.ItemContainerStyle>
        </TreeView> 
```

这是我的事件处理程序...

```
private void trv_PreviewMouseRightButtonDown(object sender, MouseButtonEventArgs e)
{
    TreeViewItem item = sender as TreeViewItem;
    if (item != null)
    {
        item.Focus();
        e.Handled = true;
    }

} 
```

请注意我如何在上面添加 EventSetter。这几乎有效。但它只选择根级树视图节点（即我右键单击的节点的根父节点）。这可能是因为我的分层数据模板？此模板可以包含相同类型的子级。

这是我的分层数据模板...

```
<HierarchicalDataTemplate x:Key="treeHierarchicalDataTemplate" 
                          ItemsSource="{Binding Path=ChildMeetingItems}">
    <HierarchicalDataTemplate.Triggers>
        <DataTrigger Binding="{Binding Path=Red}" Value="True">
            <Setter TargetName="img" Property="Image.Source" Value="pack://siteoforigin:,,,/images/bookRed.png"></Setter>
        </DataTrigger>
    </HierarchicalDataTemplate.Triggers>
    <StackPanel 
        x:Name="treeViewItemPanel"
        Background="Transparent"
        Orientation="Horizontal">
        <Image Width="16" Height="16"  x:Name="img" Margin="0,0,4,0" Source="pack://siteoforigin:,,,/images/bookGreen.png"></Image>
        <TextBlock Foreground="DarkGray" Text="{Binding DisplayIndex}" Margin="0,0,5,0"></TextBlock>
        <TextBlock Text="{Binding Summary}"></TextBlock>
    </StackPanel>
</HierarchicalDataTemplate> 
```

关于为什么当我右键单击时只选择根节点而不是子节点的任何想法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-28T13:39:46.110

这是因为 ItemContainerStyle 不被子节点继承。您需要在 HierarchicalDataTemplate 的 ItemContainerStyle 上添加相同的 EventSetter。

```
<HierarchicalDataTemplate x:Key="treeHierarchicalDataTemplate" 
                          ItemsSource="{Binding Path=ChildMeetingItems}">
    <HierarchicalDataTemplate.Triggers>
        <DataTrigger Binding="{Binding Path=Red}" Value="True">
            <Setter TargetName="img" Property="Image.Source" Value="pack://siteoforigin:,,,/images/bookRed.png"></Setter>
        </DataTrigger>
    </HierarchicalDataTemplate.Triggers>
    <StackPanel 
        x:Name="treeViewItemPanel"
        Background="Transparent"
        Orientation="Horizontal">
        <Image Width="16" Height="16"  x:Name="img" Margin="0,0,4,0" Source="pack://siteoforigin:,,,/images/bookGreen.png"></Image>
        <TextBlock Foreground="DarkGray" Text="{Binding DisplayIndex}" Margin="0,0,5,0"></TextBlock>
        <TextBlock Text="{Binding Summary}"></TextBlock>
    </StackPanel>

<HierarchicalDataTemplate.ItemContainerStyle>
                <Style TargetType="{x:Type TreeViewItem}">
                    <EventSetter Event="TreeViewItem.PreviewMouseRightButtonDown" Handler="trv_PreviewMouseRightButtonDown"/>                    
                </Style>
            </HierarchicalDataTemplate.ItemContainerStyle>
</HierarchicalDataTemplate> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2011-11-15T07:21:13.723

只需`e.Handler=true`从您的事件处理程序中评论。

像这样：

```
private void trv_PreviewMouseRightButtonDown(object sender, MouseButtonEventArgs e)
{
    TreeViewItem item = sender as TreeViewItem;
    if (item != null)
    {
        item.Focus();
       // e.Handled = true;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-16T08:26:26.707

我遇到了同样的问题 - 无法获得正确的选定树项。而不是使用`PreviewMouseRightButtonDown`事件，我使用了同样的事件 a`StackPanel`也存储了所有需要的数据：

```
<StackPanel DataContext="{Binding}" MouseLeftButtonDown="StackPanel_MouseLeftButtonDown">
....
</StackPanel> 
```

以及事件处理程序代码隐藏：

```
 private void StackPanel_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
        {
            StackPanel panel = sender as StackPanel;
            if(panel==null)return;
            MyTreeViewItem myClicked = panel.DataContext as MyTreeViewItem;
            if (myClicked == null) return;
...
} 
```

`MyTreeViewItem`是我的数据自定义类型；`myClicked`现在存储与单击的树项关联的数据。希望它会帮助像我这样的人。

# c++ - 如何停止EnumWindows无限运行win32

> ID：797967
> 
> 赞同：4
> 
> 时间：2009-04-28T13:36:07.337
> 
> 标签：c++, windows, winapi

该代码一直有效。不知何故，我设法让 Visual C++ Express 没有在最后的 return 语句上遇到断点，它似乎永远运行。

在下面的示例代码中，EnumWindows 无限枚举。在枚举完所有窗口后如何让它停止。

```
#include <Windows.h>

BOOL CALLBACK EnumWindowsProc(HWND hWnd, long lParam) {
    TCHAR buff[255];

    if (IsWindowVisible(hWnd)) {
        GetWindowText(hWnd, (LPWSTR) buff, 254);
        printf("%S\n", buff);
    }
    return TRUE;
}

int _tmain(int argc, _TCHAR* argv[]) {
    EnumWindows(EnumWindowsProc, 0);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-28T13:43:29.253

一旦我删除了宽字符的内容并添加了`#include <stdio.h>`以获取 printf() 声明，您的代码就对我有用。它在您的系统上产生什么输出？

对我有用的代码是：

```
#include <windows.h>
#include <stdio.h>

BOOL CALLBACK EnumWindowsProc(HWND hWnd, LPARAM lParam) {
    char buff[255];

    if (IsWindowVisible(hWnd)) {
        GetWindowText(hWnd, (LPSTR) buff, 254);
        printf("%s\n", buff);
    }
    return TRUE;
}

int main() {
    EnumWindows(EnumWindowsProc, 0);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T13:59:20.573

`EnumWindowsProc`永远不应该无限运行。

它应该运行到：

*   您的回调返回 FALSE
*   没有更多的顶级窗口可以枚举

所以我怀疑它似乎因为内存损坏或内存访问冲突而无限运行。

您的 printf 应该使用 %s 而不是 %S。

```
BOOL CALLBACK EnumWindowsProc(HWND hWnd, long lParam) {
    TCHAR buff[255];

    if (IsWindowVisible(hWnd)) {
        GetWindowText(hWnd, (LPWSTR) buff, 254);
        printf("%s\n", buff);//<--- %s means use TCHAR* which is WCHAR* in your case
    }
    return TRUE;
} 
```

此外，您不需要将您的 buff 施放为 LPWSTR。如果您的 buff 在某种程度上是一个 CHAR 缓冲区，那么您需要使用 Unicode 字符集进行编译。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-28T13:41:44.983

从文档中：

> EnumWindows 一直持续到枚举最后一个顶级窗口或回调函数返回 FALSE。
> 
> 要继续枚举，回调函数必须返回 TRUE；要停止枚举，它必须返回 FALSE。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T13:44:18.020

嗯，我不明白为什么会这样。我运行它，它工作得很好。它显示了我拥有的所有窗口，然后停止了。当 enumWindowsProc 返回 false（您将其编码为始终返回 true）或用完要枚举的顶级窗口时， enumWindows 将停止。-大学教师

# jquery - jQuery Autocomplete 验证选择的值

> ID：797969
> 
> 赞同：22
> 
> 时间：2009-04-28T13:36:39.253
> 
> 标签：jquery, autocomplete, event-handling

我们正在使用[Jörn Zaefferer](http://docs.jquery.com/Plugins/Autocomplete)编写的自动完成 jQuery 插件，并尝试验证是否输入了有效选项。

该插件具有 result() 事件，该事件在进行选择时触发。这没关系，但是当用户也单击时，我需要检查文本框中的值。所以我们尝试了 .change() 和 .blur() 事件，但它们都带来了一个问题：当您单击结果 div（“建议”列表）中的条目时，.change() 和 .blur()事件触发，这是在插件向文本框写入值之前，因此此时无需验证。

有人可以帮我配置事件，以便每当有人点击离开但不在结果框中，我可以检查框中的有效值。如果这是错误的方法，请告诉我正确的方法。我们最初使用这个插件是因为它的“mustMatch”选项。此选项似乎不适用于所有情况。很多时候，一个有效的条目会被写入文本框，然后被插件清除为无效，我无法确定原因。

基本代码示例：

```
<html>
<head>
<title>Choose Favorite</title>
<script language="JavaScript" src="jquery-1.3.2.min.js" ></script>
<script language="JavaScript" src="jquery.autocomplete.min.js" ></script>
<script>
    $(".suggest").autocomplete("fetchNames.asp", {
        matchContains:false,
        minChars:1, 
        autoFill:false,
        mustMatch:false,
        cacheLength:20,
        max:20
    });

    $(".suggest").result(function(event, data, formatted) {
        var u = this;
        // Check value here

    });

    /* OR */

    $(".suggest").change(function(me) {
        //check value here
    });

</script>
</head>
<body>
    <label for="tbxName">Select name (I show 10):</label><br />
    <INPUT type="text" id="tbxName" name="tbxName" class="suggest"><br />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-10-16T07:55:57.927

我认为与其编写自己的函数来验证数据是否匹配，不如调用`search()`. 如果`result()`使用 null`data`参数调用，则您知道未使用自动完成功能，并且通过调用`search()`blur，您可以保证`result()`至少被调用一次。

我已经为[类似的问题](https://stackoverflow.com/questions/1267149/how-to-detect-when-user-ignores-jquery-autocomplete-suggestions/1576668#1576668)发布了此代码，它在这里也可能有所帮助。

```
autocompleteField.result(function(event, data, formatted) {
    if (data) {
        //auto-complete matched
        //NB: this might get called twice, but that's okay
    }
    else {
        //must have been triggered by search() below
        //there was no match
    }
});

autocompleteField.blur(function(){
    autocompleteField.search(); //trigger result() on blur, even if autocomplete wasn't used
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-28T16:29:52.940

**更新：**这应该有效。我正在将名称列表加载到一个名为 ListOfNames 的数组中，这在 onBlur() 事件中用于验证根据数据输入的名称。您可能需要进行一些调整，但我认为它应该可以满足您的需求。

```
var listOfNames = [];
$(document).ready(function(){
   $.get("fetchNames.asp", function(data){
     listOfNames = data.split("\r\n");    
   });
   $(".suggest").autocomplete("fetchNames.asp", {
        matchContains:false,
        minChars:1, 
        autoFill:false,
        mustMatch:false,
        cacheLength:20,
        max:20
    });
    $("#tbxName").blur(function(){
        if(!listOfNames.containsCaseInsensitive(this.value)){
          alert("Invalid name entered");
        }
    });        
});

Array.prototype.containsCaseInsensitive = function(obj) {
  var i = this.length;
  while (i--) {
    if (this[i].toUpperCase() === obj.toUpperCase()) {
      return true;
    }
  }
  return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-11T18:07:50.757

这是我过去使用的代码。非常干净和简单。

```
var availableTags = [
  "ActionScript",
  "AppleScript",
  "Asp",
  "BASIC",
  "C",
  "C++",
  "Clojure",
  "COBOL",
  "ColdFusion",
  "Erlang",
  "Fortran",
  "Groovy",
  "Haskell",
  "Java",
  "JavaScript",
  "Lisp",
  "Perl",
  "PHP",
  "Python",
  "Ruby",
  "Scala",
  "Scheme"
];
$( "#currentSelectedLevel" ).autocomplete({
  source: availableTags,
  change: function( event, ui ) {
        val = $(this).val();
        exists = $.inArray(val,availableTags);
        if (exists<0) {
          $(this).val("");
          return false;
        }
      }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-29T01:42:07.223

我使用全局数据结构来跟踪找到的值

```
var ac_sent = {}; 
```

.result() 事件处理程序在 .change() 事件处理程序之前调用，因此在 .result(event, data, formatted) 中我将数据添加到结构中：

```
ac_sent[ data ] = true; 
```

然后在 .change( event ) 事件处理程序中检查 ac_sent[ data ] 处是否有项目，如果没有，我知道找不到该词：

```
$( "#textbox" ).change( function( event ) {

  var data = event.target.value;

  if ( !ac_sent[ data ] ) {
    // result was not found in autocomplete, do something...
    ac_sent[ data ] = true;  // remember that we processed it
  }

  return false;
}); 
```

# wpf-controls - 矩阵（报告服务）在 WPF 中看起来很像控件

> ID：797974
> 
> 赞同：1
> 
> 时间：2009-04-28T13:37:22.310
> 
> 标签：wpf-controls

如何在 WPF 中创建一个看起来像控件的矩阵？

我想创建一些类似的，如以下链接中显示的。 [http://msdn.microsoft.com/en-us/library/ms157334.aspx](http://msdn.microsoft.com/en-us/library/ms157334.aspx)

谢谢沙拉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-11-02T14:55:34.687

在 WPF [http://www.codeproject.com/KB/WPF/WpfMatrix.aspx中显示数据矩阵](http://www.codeproject.com/KB/WPF/WpfMatrix.aspx)

将 ListView 绑定到数据矩阵 [http://www.codeproject.com/KB/WPF/WPF_DynamicListView.aspx](http://www.codeproject.com/KB/WPF/WPF_DynamicListView.aspx)

# svn - 在svn的存储库中搜索文件的全文？

> ID：797980
> 
> 赞同：3
> 
> 时间：2009-04-28T13:38:28.563
> 
> 标签：svn, version-control, tortoisesvn

有没有办法搜索颠覆存储库的所有修订（或只是特定修订）的全文？

我的意思是我知道像谷歌代码搜索这样的工具必须以某种方式做到这一点（或者至少索引文本），我只是想知道是否有任何方法可以只用一个颠覆客户端来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T14:13:13.830

在设置方面可能有点重量级，但[OpenGrok](http://opengrok.github.io/OpenGrok/)对我的开发团队来说是一个非常宝贵的工具。每次构建后我们都会触发[Hudson的更新，我们会立即搜索 1M+ 行](http://hudson-ci.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T13:44:48.720

不需要任何魔法。只需查看 repo，然后执行 grep -r （或者您通常搜索文件）。如果要搜索旧版本的 repo，请执行以下操作：

svn export -r revID /path/to/checkout /export/to

然后搜索 /export/to。当然，可能有更优化的方法，但这可能足以满足您的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T14:07:10.150

你试过[SupoSE 吗](http://supose.soebes.de/wiki/supose)？这是一种基于 Java 的方法，用于在完整的 Subversion 存储库中进行真正的搜索。

[或者查看 Subversion Links/Books/Tools](http://svn.apache.org/repos/asf/subversion/trunk/www/links.html?p=900404)的完整列表。

# database - 如何更改 SQL Server Compact Edition 表架构中的列顺序？

> ID：797992
> 
> 赞同：10
> 
> 时间：2009-04-28T13:41:21.350
> 
> 标签：database, visual-studio-2008, sql-server-ce

我正在使用 Visual Studio 2008 设计**SQL Server Compact Edition**数据库 (*.sdf)。我不得不更改我的一个表的架构，添加一个新列。

我想**将该新列**从底部“移动”到字段列表中的不同位置。如何在 Visual Studio 设计器中执行此操作？

*编辑：我知道从纯粹的技术角度来看，列的顺序并不重要。我正在对应用程序进行原型设计，因此我必须多次更改架构。例如，如果我必须更改主键，那么最后最重要的列将是“丑陋的”。我认为其他查看代码的开发人员会感到困惑。这是美学问题。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-28T13:52:35.783

你不能只在设计器中移动它。您必须创建一个新列，删除旧列，生成脚本并编辑从旧表插入临时表的脚本，使旧列值（在选择中）进入新列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T14:05:37.797

我同意帕克斯。如果出于特定原因，您需要在查询中以特定顺序返回字段，只需更改查询，将字段放在您需要的位置。

如果出于某种原因，您需要**不惜一切代价**移动该字段，则可以使用如下脚本执行此操作，这使*FIELD3成为名为**TestTable*的表中的第一列：

```
/* Original sample table with three fields */
CREATE TABLE [dbo].[TestTable](
    [FIELD1] [nchar](10) NULL,
    [FIELD2] [nchar](10) NULL,
    [FIELD3] [nchar](10) NULL
) ON [PRIMARY]

/* The following script will make FIELD3 the first column */
CREATE TABLE dbo.Tmp_TestTable
    (
    FIELD3 nchar(10) NULL,
    FIELD1 nchar(10) NULL,
    FIELD2 nchar(10) NULL
    )  ON [PRIMARY]
GO
IF EXISTS(SELECT * FROM dbo.TestTable)
     EXEC('INSERT INTO dbo.Tmp_TestTable (FIELD3, FIELD1, FIELD2)
        SELECT FIELD3, FIELD1, FIELD2 FROM dbo.TestTable WITH (HOLDLOCK TABLOCKX)')
GO

DROP TABLE dbo.TestTable
GO

EXECUTE sp_rename N'dbo.Tmp_TestTable', N'TestTable', 'OBJECT' 
GO 
```

但是，我坚持认为您的问题可能可以通过不需要重组表的不同方法来解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-22T05:22:16.963

按着这些次序：

1.  删除原表的所有外键和主键
2.  重命名原始表
3.  使用 CTAS 按您想要的顺序创建原始表
4.  放下旧桌子。
5.  将所有约束应用回原始表

# perl - 如果我有 Perl 4，我如何 chomp 字符串？

> ID：797993
> 
> 赞同：2
> 
> 时间：2009-04-28T13:41:24.110
> 
> 标签：perl, syntax, perl4

我正在连接到远程服务器的个人计算机上编写脚本。我认为远程服务器安装了 Perl 4.0 或更低版本，这就是它无法识别的原因。`chomp`该命令有替代方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-28T13:45:00.840

这不是一个确切的替代品，但您可以尝试：

```
$var =~ s/\r?\n?$// 
```

这将剥离 CRLF (DOS)、LF (Unix)、CR (Mac?)。

普通的 chomp 操作符总是去掉当前`$INPUT_RECORD_SEPARATOR`为当前 O/S 定义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T17:05:50.843

不建议采用印章路线，我会使用正则表达式，它们对其他人来说更具可维护性和透明性。习惯性地修改记录变量最终最终会污染一些糟糕的包并导致奇怪的事情发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T13:50:26.787

我相信在 pre-5 perl 中使用了chop()。当然不如 chomp() 有用。如果您正在处理随机输入，您可能最好使用正则表达式，但如果您总是解析 unix 格式的文件：

```
while (<F>) {
  chop();
  do_stuff();
} 
```

正如下面的评论所述，chop() 总是删除左值的最后一个字符，而不仅仅是换行符（或行尾 var 中的内容）。我知道这一点（因此“不如 chomp() 有用”评论）但不知何故忘记实际输入它。

# perl - 我可以在没有系统调用的情况下从 Perl 脚本中使用 ffmpeg 吗？

> ID：797998
> 
> 赞同：2
> 
> 时间：2009-04-28T13:42:02.113
> 
> 标签：perl, video, audio, ffmpeg

我想将 mp3 转换为较低的比特率，以及可能使用 Perl 将视频转换为 mp3。我查看了 ffmpeg 模块，但它似乎不支持转换文件，我看到的唯一示例是从视频流中抓取图片。有没有办法在 Perl 中做到这一点而不使用 system() 来调用 ffmpeg？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T20:12:26.447

试过[FFmpeg 模块](http://search.cpan.org/dist/FFmpeg/FFmpeg.pm)吗？该[`transcode()`](http://search.cpan.org/dist/FFmpeg/FFmpeg/StreamGroup.pm#transcode())方法看起来会做你想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T20:43:31.333

有一个名为的项目[`pacpl`](http://pacpl.sourceforge.net/)可以进行各种音频和至少一些视频转换。查看源代码，它确实使用该`system()`命令来运行第三方实用程序，例如`ffmpeg`. 我有兴趣进行类似于您所询问的转换，并且我计划`pacpl`自己尝试。

到目前为止，似乎还没有纯粹的 Perl 答案。所有方法都使用其他一些转换软件。这告诉我使用其他用 C 编写的程序可能更有效。

所以我会把问题转回给你：你不想使用的原因是什么`system()`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T20:16:53.363

如果您在基于 unix 的平台上，我会考虑使用 Gstreamer。它具有 perl 绑定，并且设置用于转换音频视频数据的 Gstreamer 管道相当简单。

请参阅[Gstreamer perl 绑定和将 ogg 转换为 mp3](http://lizards.opensuse.org/2009/03/10/gstreamer-perl-bindings-and-converting-ogg-to-mp3/)作为示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-29T14:29:29.073

为什么要避免另一个过程？我有一个 Perl 脚本可以为我执行此操作，并且我为每个要转换的视频创建一个进程。这样我就可以同时转换多个视频，让我的 Perl 主程序做它需要做的任何事情。

你不需要使用系统，它会阻塞直到它完成。还有许多其他方式可以与外部进程进行通信。有关详细信息，请参阅[perlipc](http://perldoc.perl.org/perlipc.html)文档。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-29T14:40:57.640

有关与外部程序交互的方法列表，请参阅[Perl backtics vs system vs exec](https://stackoverflow.com/questions/799968)的答案。如果您正在寻找该程序的 Perl 接口，我建议您查看[CPAN](http://search.cpan.org)。`**********