# StackOverflow 问答 11030000-11030999

# xml - 没有相同结构的2个不同域之间的XMLHttpRequest

> ID：11030003
> 
> 赞同：0
> 
> 时间：2012-06-14T09:12:07.270
> 
> 标签：xml, cross-browser, xmlhttprequest, cross-domain

我有一个具有这种结构的域：

**1/ [http://name.name.com](http://name.name.com)**

另一个具有这种结构的

**2/ [http://www.othername.tm.fr](http://www.othername.tm.fr)**

我想通过 XMLHttpRequest 检索第二个域 (http://www.othername.tm.fr) 的 XML 文件并将数据检索到第一个域 (http://name.name.com)

我已经尝试了很多代码，但没有任何效果，非常感谢任何帮助！

PS：我尝试了一种在 Chrome 中完美运行但在 IE 中无法正常运行的解决方案：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:15:11.480

您是否想到了名为[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)的安全功能。这就是开发像 JSON 这样的解决方案并经常包含在 API 中的原因之一。

# ios - iOS 如何获取一年中的天数？

> ID：11030006
> 
> 赞同：2
> 
> 时间：2012-06-14T09:12:16.693
> 
> 标签：ios, numbers, nsdate, days, leap-year

> **可能重复：**
> [您如何计算目标 C 中特定日期的一年中的哪一天](https://stackoverflow.com/questions/2080927/how-do-you-calculate-the-day-of-the-year-for-a-specific-date-in-objective-c)

我需要得到一年中的天数，不知道哪个是最好的方法。

例子：

2012 年 1 月 21 日 -> 21

2012 年 2 月 2 日 -> 33

2012 年 3 月 2 日 -> 62

2011 年 3 月 2 日 -> 61

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-14T09:41:54.573

我参加聚会有点晚了，但无论如何，这里是：

```
 NSDate *today = [NSDate date];
 NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"DDD"];
 NSInteger dayInYear = [[dateFormat stringFromDate:today] integerValue];
 NSLog(@"today is %d. day in year", dayInYear); 
```

2012 年 6 月 14 日的结果：*今天是 166 天。*

编辑：我很惊讶在谷歌上没有容易找到的例子。

您还可以使用格式`@"DD"`来获​​取月中的一天或`@"D"`一周中的一天。

EDIT2：请注意：创建`NSDateFormatter`可能是非常*昂贵的*操作。如果你的类经常使用这个函数，你可能想要创建一个静态格式化程序 ivar。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T09:17:57.977

看看 NSTimeInterval。您可以获得两个日期之间经过的秒数：

```
NSTimeInterval secondsElapsed = [secondDate timeIntervalSinceDate:firstDate]; 
```

所以你的 firstDate 可以是年初。然后你可以除以 3600*24（每天的秒数）来得到天数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-14T09:35:24.247

查看以下解决方案您必须使用**timeIntervalSinceDate**：为此

```
 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init] ;
    [dateFormatter setDateFormat:@"yyyy-MM-dd"];

    NSDate *date1 = [dateFormatter dateFromString:@"2012-01-01"];
    NSDate *date2 = [NSDate date]; 
    NSLog(@"date %@ ", date2);

    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"yyyy-MM-dd"];

    NSDateFormatter *timeFormat = [[NSDateFormatter alloc] init];
    [timeFormat setDateFormat:@"HH:mm:ss"];

    NSDate *now = [[NSDate alloc] init];

    NSString *theDate = [dateFormat stringFromDate:now];
    NSDate *dt = [dateFormat dateFromString:theDate];

    NSTimeInterval diffDays = [dt timeIntervalSinceDate:date1];
    NSLog(@"Date %f ^^^^ ", diffDays/(24*60*60)); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-14T09:17:03.017

首先，您创建一个字典，例如：

```
[Jan => 30,
Feb =>  28,
 ...] 
```

每个月的所有日子。

*   其次是您的日期，例如：2012 年 6 月 13 日。
*   您将添加 6 月前一个月的所有值（在您的字典中一段时间​​）。
*   最后加上一天（这里：13）。

# excel - 在 excel 列上创建公式，所有准备好的都有一个公式

> ID：11030011
> 
> 赞同：0
> 
> 时间：2012-06-14T09:12:57.737
> 
> 标签：excel

我正在使用 Excel 2010。

我有字段 A1 和 A2。

字段 A3 具有以下公式

```
=CONCATENATE(A1,A2) 
```

现在我想在 A1 和 A2 上放置一个公式，如果值不等于“000”，则使用公式使字段背景变为红色。

但是我现在不能在 A1 或 A2 中添加公式，因为我在字段 A3 中使用它。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:25:31.357

您可以为此使用条件格式。

1.  选择要应用条件格式的单元格
2.  单击“条件格式”并选择“新规则...”（图 01）
3.  选择“仅格式化包含的单元格”（图片 02）
4.  将条件更改为“单元格值”、“不等于”和“000”（图 02）
5.  选择您的格式（图片 02）

**图片 01**
![条件格式](../Images/866b2ef7624b2683545fc9f361afc4cf.png)

**图片 02**
![格式化规则](../Images/c2fd8b37ce9a14fe2a2feee31dbec61c.png)

# javascript - 在使用 javascript 创建的 div 中附加 jQuery 选项卡

> ID：11030013
> 
> 赞同：2
> 
> 时间：2012-06-14T09:13:09.450
> 
> 标签：javascript, jquery, jquery-ui, tabs, jquery-tabs

我想在使用javascript 创建的 div 中使用 jQuery 选项卡 ( [http://jsfiddle.net/43FcS/2/ )。](http://jsfiddle.net/43FcS/2/)

现在我正在为我正在工作的商店创建一个商店定位器。我正在使用由 Bjorn ( [http://www.bjornblog.com/web/jquery-store-locator-plugin](http://www.bjornblog.com/web/jquery-store-locator-plugin) ) 创建的 jQuery 商店定位器插件。

当用户点击搜索时，将列出搜索结果（与输入地址最近的 4 个商店）。在每个 li 中，我都想创建一个带有“shoptab”类的 div。在每个 div 中，我希望显示 2 个选项卡（地址和营业时间），如上面的链接所示。我的 javascript 使用以下函数创建 li：

```
$('<li />').html("<div class=\"shoptab\"><h2 class=\"loc-name\"> Shop " + storeName + "<\/h2> <ul><li><a href=\"#tabs-1\">Address<\/a><\/li> <li><a href=\"#tabs-2\">Opening hours<\/a><\/li><\/ul> <div id=\"tabs-1\"><p>" + storeAddress1 + "<\/p> <p>" + storeAddress2 + "<\/p> <p>" + storeCity + ", " + storeState + " " + storeZip + "<\/p> <p>" + storePhone + "<\/p> <\/div> <div id=\"tabs-2\"><p>" + storeHours1 + "<\/p> <p>" + storeHours2 + "<\/p> <p>" + storeHours3 + "<\/p> <\/div><\/div>") 
```

我知道我不能使用 ids tabs-1 和 tabs-2 因为它们会被多次使用，但现在我只是希望它们至少出现，然后调整代码以提供 div 的 ids 1、2、3， 4等

我的 jQuery 选项卡函数与我的 shoplocator 函数一起写在文档的底部。

```
$(function() {
        $(".shoptab").tabs();
    }); 
```

jQuery ui 脚本没有将类应用于其中的 shoptab div 和 ul/li，我不知道如何使其工作。

我希望有了这些信息，你可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:23:34.033

我认为问题在于 `$(".shoptab").tabs();`在文档中存在所需的 html 之前调用它。

您应该 `$(".shoptab").tabs();`在文档中插入 HTML 之后调用，即在所有

```
$('<li />').html("<div class=\"shoptab\"><h2 class=\"loc-name\"> Shop " + storeName + "<\/h2> <ul><li><a href=\"#tabs-1\">Address<\/a><\/li> <li><a href=\"#tabs-2\">Opening hours<\/a><\/li><\/ul> <div id=\"tabs-1\"><p>" + storeAddress1 + "<\/p> <p>" + storeAddress2 + "<\/p> <p>" + storeCity + ", " + storeState + " " + storeZip + "<\/p> <p>" + storePhone + "<\/p> <\/div> <div id=\"tabs-2\"><p>" + storeHours1 + "<\/p> <p>" + storeHours2 + "<\/p> <p>" + storeHours3 + "<\/p> <\/div><\/div>") 
```

已执行

# android - Android，如何从列表中动态地在另一个位图图层上添加位图图层？

> ID：11030014
> 
> 赞同：1
> 
> 时间：2012-06-14T09:13:17.113
> 
> 标签：android, listview, bitmap, overlay, bit-manipulation

在我的应用程序中，我有一个列表适配器。每行在左侧包括一个 imageView，在右侧包括两个 textView。为了获取图像，我正在使用[Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)库。

我的 getView() 方法是这样的：

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;        

        if (convertView == null) {
            convertView     = myInflater.inflate(R.layout.list_news_adapter, null);
            holder          = new ViewHolder();
            holder.ivIcon   = (ImageView) convertView.findViewById(R.id.list_news_icon);
            holder.tvTitle  = (TextView)  convertView.findViewById(R.id.list_news_title);
            holder.tvDate   = (TextView)  convertView.findViewById(R.id.list_news_date);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.tvTitle.setText(video.getTitle().get(position));
        holder.tvDate.setText(localTime.get(position));

        // Load and display image
        String imageUrl = (video.getDefaultImage128x96().get(position));
        imageUrl = imageUrl.trim().replaceAll(" ", "%20");
        imageLoader.displayImage(imageUrl, holder.ivIcon, options);

        holder.ivIcon.buildDrawingCache();
        Bitmap image = holder.ivIcon.getDrawingCache();
        if(image != null) {
            image = putOverlay(image, holder.ivIcon.getWidth(), holder.ivIcon.getHeight());
            holder.ivIcon.setImageBitmap(image);
            holder.ivIcon.destroyDrawingCache();
        }

        return convertView;
    } 
```

在下面的代码中，我给出了要在不同线程中下载的库的 URL 列表。

```
// Load and display image
String imageUrl = (video.getDefaultImage128x96().get(position));
imageUrl = imageUrl.trim().replaceAll(" ", "%20");
imageLoader.displayImage(imageUrl, holder.ivIcon, options); 
```

在下面的代码之后，我正在获取 imageView 的当前图像（已下载）并要求其他方法在此图像之上添加一个图层。

```
holder.ivIcon.buildDrawingCache();
Bitmap image = holder.ivIcon.getDrawingCache();

if(image != null) {
        image = putOverlay(image, holder.ivIcon.getWidth(), holder.ivIcon.getHeight());
        holder.ivIcon.setImageBitmap(image);
        holder.ivIcon.destroyDrawingCache();
} 
```

putOverlay() 方法是这样的：

```
public Bitmap putOverlay(Bitmap bmp, int width, int height) {
        Bitmap overLay = BitmapFactory.decodeResource(context.getResources(), R.drawable.video_overlay);

        Bitmap bmBackground = Bitmap.createBitmap(bmp.getWidth(), bmp.getHeight(), bmp.getConfig());
        Canvas canvas = new Canvas(bmBackground);
        Paint paint = new Paint(Paint.FILTER_BITMAP_FLAG);
        canvas.drawBitmap(bmp, 0, 0, paint); 
        canvas.drawBitmap(overLay, width*3/8, height*3/8, paint);

        return bmBackground;
    } 
```

这是功能部分。结果呢！只要主图像正在下载，通用图像加载器库就会使用预定义的图像。我的代码可以合并这两层。 ![在此处输入图像描述](../Images/77be4a5f548a2b15ff69a334a816612a.png)

但是，当下载主图像时，它会覆盖以前的图像，而我希望我的叠加图像位于该图像之上。 ![在此处输入图像描述](../Images/734f1c5f2b93590c75e6b58e4bd04425.png)

但是，滚动屏幕后，我可以看到我添加的图像（大多数图像有，其中一些没有我添加的图像）。 ![在此处输入图像描述](../Images/7d35a61f27390935a6253d489aa412b9.png)

任何建议/意见将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:10:10.067

解决方案比我想的要容易。

首先我删除了那些

```
holder.ivIcon.buildDrawingCache();
Bitmap image = holder.ivIcon.getDrawingCache();
if(image != null) {
    image = putOverlay(image, holder.ivIcon.getWidth(), holder.ivIcon.getHeight());
    holder.ivIcon.setImageBitmap(image);
    holder.ivIcon.destroyDrawingCache();
} 
```

和`putOverlay()`方法来自我的列表适配器，然后在行 ( `list_news_adapter`) 的 XML 文件中，我添加了另一个 imageView 并使用我的图像设置其源属性。

哇，它工作得很好。

# android - 从列表视图中打开未确定数量的项目的活动

> ID：11030015
> 
> 赞同：0
> 
> 时间：2012-06-14T09:13:20.013
> 
> 标签：android, listview, numbers, undefined, items

另一个问题。好的，所以我有一个用于 android 应用程序的 sax 解析器，解析器从网站获取数据（标题、url、数据等......）（我不知道我从网站获得了多少项目）所以使用获得的数据我创建了一个列表视图，列表视图中的每个项目都会打开一个 URL，当我知道列表视图中的项目的确切数量时，我知道如何从列表视图打开 web 视图，但在这种情况下，我不知道如何我得到了很多东西。所以我的问题是如何在不知道我从网站收到多少项目的情况下从列表视图打开新活动（我的网络视图）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:15:46.517

You can use [`Never Ending ListView`](http://p-xr.com/android-tutorial-dynamicaly-load-more-items-to-the-listview-never-ending-list/) and get it working. You will probably `adapter.getCount()` from the Adapter that will give you the number of Items in the ListView.

# android - 覆盖后退按钮 android phonegap 1.8 jqmobile 1.1.0 jquery 1.7.1

> ID：11030016
> 
> 赞同：0
> 
> 时间：2012-06-14T09:13:24.177
> 
> 标签：android, jquery, jquery-mobile, cordova, back-button

我最近开始在 Phonegap 1.8 + Jquerymobile 1.1.0 + jquery 1.7.1 中为 Android 2.3.3 开发一个移动应用程序。我的问题是：我尝试以多种方式覆盖 Android 中的后退按钮，但没有任何效果。我试过使用

```
document.addEventListener("backbutton", handleBackButton, false);
function handleBackButton() {//do sth} 
```

然后我刚刚在 Application.java 代码中覆盖了它。它的工作原理......几乎。我的第一个页面 (index.html) 仅用于登录，之后有主页 (main.html) 与其他页面的链接。除了登录和主页面之外，我已经覆盖了后退按钮以返回所有其他页面。在这两个页面上，它应该在 AlertDialog 中单击“是”后退出应用程序。好吧，在 MainPage 中它显示 AlertDialog 然后直接返回登录页面，甚至无需等待我的响应。在登录页面上，它只显示 AlertDialog 并等待我的反应。不知道为什么。这是我的一些代码。

```
public void onBackPressed() {

  AlertDialog.Builder builder = new AlertDialog.Builder(this);
  builder.setMessage("Are you sure you want to exit?")
  .setCancelable(false)
  .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
         public void onClick(DialogInterface dialog, int id) {
             SampleApplication.this.finish();
         }
     })
     .setNegativeButton("No", new DialogInterface.OnClickListener() {
         public void onClick(DialogInterface dialog, int id) {
              dialog.cancel();
         }
     });
  AlertDialog alert = builder.create();
  String testUrl = appView.getUrl();      

  if(testUrl.equals("file:///android_asset/www/index.html"))
  {
      alert.show();
  }
  if (testUrl.equals("file:///android_asset/www/main.html"))
  {
      alert.show();
  }
  if ((!testUrl.equals("file:///android_asset/www/index.html")) && (!testUrl.equals("file:///android_asset/www/main.html")))
  { 
      this.appView.goBack();

  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T02:13:30.647

您可以做的是在您想要常规后退按钮行为的所有页面上使用常规后退按钮，但为需要不同行为的页面创建一个单独的按钮，并使其看起来像正常的后退按钮：

在您的标题栏中，只需添加一个锚点，您可以在其中添加自定义数据相关（并将其连接到您想要的任何功能），例如

```
<a data-rel="custombackbtn">Back</a> 
```

然后将该 data-rel 添加到您的常规后退按钮样式（您的主题的 css 或常规 css）的任何位置，因此，只要提到 a[data-rel='back'] 添加 data-rel='custombackbtn' 例如

```
a[data-rel='back'], .ui-header a[data-rel='back'] {
*/Styling*/
} 
```

改为

```
a[data-rel='back'], .ui-header a[data-rel='back'], a[data-rel='backbtn'], .ui-header a[data-rel='backbtn'] {
*/Styling*/
} 
```

# sql - 如何从 Select sum 语句中仅返回非零值

> ID：11030019
> 
> 赞同：1
> 
> 时间：2012-06-14T09:13:32.447
> 
> 标签：sql, select, sum, firebird

我有一个查询返回 2 列和多行。如何只返回一个不为 0 或 null 的总和值？

表“ `audit`”是这样的：

```
parent_link   integer;
dr            smallint
amount        decimal(18,2)

select parent_link, sum(case dr when 1 then amount else -amount end)
from audit where books = 3 group by parent_link 
```

我正在检查放入金额列中的值是否平衡了 dr 列中的 1 和 0 值。

此查询有效并返回几千行，其中 0 作为总和结果，2 作为总和结果。我只想返回具有总和值的行。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T09:18:07.717

使用`having`：

```
select parent_link, sum(case dr when 1 then amount else -amount end)
from audit
where books = 3
group by parent_link
having sum(case dr when 1 then amount else -amount end) <> 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T09:20:49.527

另外，尝试这样的查询：（它不需要任何额外的计算）

```
SELECT _inner._SUM FROM
(
    SELECT parent_link, SUM(CASE dr WHEN 1 THEN amount ELSE -amount END) AS _SUM
      FROM audit WHERE books = 3 GROUP BY parent_link
) AS _inner
WHERE _inner._SUM <> 0 
```

# windows-phone-7 - 如何防止 Windows Phone 的主题资源

> ID：11030021
> 
> 赞同：3
> 
> 时间：2012-06-14T09:13:36.957
> 
> 标签：windows-phone-7, design-patterns, themes, settings, expression-blend

我试图避免将 WP7 的方案设置应用于我的应用程序中的 UI。我应该怎么做才能使处于禁用、重音状态的 UI 元素独立于主题切换？

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:36:43.140

显然您需要创建自己的自定义主题。

这是来自[http://windowsphonegeek.com/articles/Windows-Phone-Mango-Custom-application-Theme-Step-by-Step](http://windowsphonegeek.com/articles/Windows-Phone-Mango-Custom-application-Theme-Step-by-Step)的引用：“当您希望应用程序看起来像时，创建自定义应用程序主题是一个很好的解决方案在所有主题中以相同的方式，即独立于主题。”

# javascript - JavaScript 中的可选参数

> ID：11030022
> 
> 赞同：32
> 
> 时间：2012-06-14T09:13:37.267
> 
> 标签：javascript

## 问题

为可选参数分配默认值的好方法是什么？

## 背景

我正在玩 JavaScript 中的*可选*参数，以及在未指定参数时分配默认值的想法。我的方法接受两个参数，我认为后者是可选的，如果未指定，则默认为`false`. 我的方法看起来像这样......

```
// selects the item, appropriately updating any siblings
// item to select [, toggle on / off]
this.selectItem = function(item, toggle)
{
    toggle = toggle && typeof toggle === 'boolean';
    if (toggle)
    {
       // ...
    }
} 
```

## 测试

在[此 jsFiddle](http://jsfiddle.net/nLAAt/2/)上运行一些测试后，使用以下主体进行默认值分配：

```
function checkParamIsBoolean(param)
{
    param = param && typeof param === 'boolean';
}

checkParamIsBoolean('me'); // boolean
checkParamIsBoolean([]); // boolean
checkParamIsBoolean(true); // boolean
checkParamIsBoolean(false); // boolean
checkParamIsBoolean(1 == 1); // boolean
checkParamIsBoolean(1); // boolean
checkParamIsBoolean(null); // object
checkParamIsBoolean(undefined); // undefined
​ 
```

如您所愿，结果会有所不同，并且不是所希望的。

## 预期的

`null`= `false`
`undefined`=`false`

## 实际的

`null`= `object`
`undefined`=`undefined`

## 概括

如果未指定，是否有任何替代方法可以为可选参数分配默认值？将其`_toggle`用作参数然后将值分配给`var toggle`方法内会更好吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-14T09:24:00.770

更好的解决方案是使用包装在对象中的命名参数。它使您的代码保持干净并防止出现复杂函数（具有许多默认和非默认参数）的错误。否则，您需要记住参数的顺序并根据存在的参数类型分配默认值（这就是您想要做的）。

该方法是传递参数[jQuery 和 jQuery's plugins](http://jquery-howto.blogspot.de/2009/01/how-to-set-default-settings-in-your.html)的主要方法。

```
function test(options) { 

  // set up default options 
  var defaults = { 
    param1:      'test', 
    param2:      100
  }; 

  // combine options with default values
  var options = $.extend({}, defaults, options); // If you're not using jQuery you need different function here

  alert(options.param1)
  alert(options.param2)

}

test({'param2': 200}) // Call the function with just the second param 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-14T09:30:05.383

您可以将此构造用于代码中的可选参数：

```
//...
optionalParam = optionalParam || 'some default value'; 
```

在你的具体例子中，它会是这样的：

```
this.selectItem = function(item, toggle)
{
    toggle = toggle || false;
   // ...
} 
```

但是在您的情况下，您可以直接在 if 语句中使用 toogle （可选参数）（因为您只想检查它的存在。或者您可以选择强制执行这样的布尔值`toogle = !!toogle`（双重否定）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-14T09:16:29.560

检查切换是否未定义的一种非常简单的方法，如果未定义，则设置默认值：

`if (toggle === undefined) toggle = "<your default value>";`

`toggle`请注意，如果它被指定但与您预期的类型不同，这不会改变。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-14T09:20:44.177

换个方式试试：

```
param = typeof param === 'boolean' && param; 
```

这将确保所有都是布尔值，请参阅[this fiddle](http://jsfiddle.net/nLAAt/3/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T09:20:24.767

如果您期望其他结果，为什么要检查参数是否为布尔值？通常的方法是检查`typeof toggle != "undefined"`，但在你的情况下

```
toggle = Boolean(toggle); 
```

应该做的任务。您也可以使用快捷方式`!!toggle`，或直接在 if 子句中使用：

```
if (toggle) { // will evaluate to "false" for undefined
    ... 
```

顺便说一句，不需要`_toggle`参数；你可以重新分配给`toggle`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-14T09:24:37.633

你可以更换

```
param = param && typeof param === 'boolean'; 
```

和

```
param = !!(param && typeof param === 'boolean'); 
```

这会将语句的结果转换为布尔否定，然后再次否定它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-14T10:12:52.293

**如果**您认为`null`（以及没有传递参数）`undefined`和`""`（空字符串）为“*没有参数已传递给我的函数*”，请使用以下语句：

```
toggle = toggle&&toggle||default_value 
```

`null`现在，如果您将`undefined`或`""`作为`toggle`arg 传递给您的函数，则此行将用`default_value`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-14T09:28:28.503

看看[jQuery 扩展](http://api.jquery.com/jQuery.extend/)以及它们如何处理可选参数。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-12T16:38:24.450

它可以通过 ArgueJS 轻松[完成](https://github.com/zvictor/ArgueJs)：

```
this.selectItem = function()
{
  arguments = __({item: undefined, toggle: [Boolean, false})
  if (arguments.toggle)
  {
     // ...
  }
} 
```

* * *

您还可以`item`通过更改`undefined`所需的类型来检查类型。

# windows-phone-7 - WP7 (windows phone 7) PhotoCamera 放大后如何保存图像？

> ID：11030025
> 
> 赞同：-2
> 
> 时间：2012-06-14T09:14:01.683
> 
> 标签：windows-phone-7

我正在将 PhotoCamera 用于应用程序，并且我已经完成了放大/缩小。但我不知道如何在相机胶卷中保存这个放大或缩小图像，它总是会保存为正常大小的图像而不进行缩放。

有没有人知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:40:18.503

`PhotoChooserTask`已经具有裁剪功能，您可以在其中放大和缩小。您需要在拍摄照片后设置`ImageWidth`并启用裁剪。`ImageHeight`

# php - 在 div 中加载多个表单，但是当我单击提交时，每个表单都会消失

> ID：11030036
> 
> 赞同：0
> 
> 时间：2012-06-14T09:14:41.877
> 
> 标签：php, javascript, jquery

我有一个索引页面，我通过单击链接在该页面的 div 中加载多个页面，其中一些是表单（页面）。当我点击提交时，信息被正确处理并存储在数据库中，但页面消失，因此我无法看到一些有用的信息，例如表单验证后生成的错误。我希望页面在加载后不应该消失。只有当我单击该页面的链接时，该页面才能显示在同一 div 中。

我正在使用 php、javascript、jquery、MySqL。

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:17:55.177

That is the default behavior of forms submit. If I am not mistaken you need to prevent the default behavior on that form submit callback. If the considering form have an id of `formID` then You can do this

```
$('#formID').submit(function(e){
   //prevent default Behaviour
   e.preventDefault();

}); 
```

And in that case you have to use [`$.ajax`](http://api.jquery.com/jQuery.ajax/) to submit form data into server without reloading the page.

# apache - Apache 重启后运行，但不工作

> ID：11030037
> 
> 赞同：1
> 
> 时间：2012-06-14T09:14:47.953
> 
> 标签：apache, configuration, bind, reboot

我在 Ubuntu 上运行 Apache，它工作得很好。但是，如果我发出“shutdown -r now”并等到服务器成功启动，则该网站将不会显示在浏览器中。然后，如果我发出： service apache2 start，它将显示：

```
[Thu Jun 14 11:08:38 2012] [error] (EAI 2)Name or service not known: Could not resolve host name *.443 -- ignoring!
[Thu Jun 14 11:08:38 2012] [warn] The ScriptAlias directive in /etc/apache2/sites-enabled/default2 at line 18 will probably never match because it overlaps an earlier ScriptAlias.
[Thu Jun 14 11:08:38 2012] [warn] The Alias directive in /etc/apache2/sites-enabled/default2 at line 34 will probably never match because it overlaps an earlier Alias.
[Thu Jun 14 11:08:38 2012] [warn] _default_ VirtualHost overlap on port 443, the first has precedence
(98)Address already in use: make_sock: could not bind to address [::]:80
(98)Address already in use: make_sock: could not bind to address 0.0.0.0:80
no listening sockets available, shutting down
Unable to open logs
Action 'start' failed.
The Apache error log may have more information.
 * Starting web server apache2                                                      FAIL 
```

但是，当我发出 service apache2 stop 时，它会显示：

```
[Thu Jun 14 11:09:34 2012] [error] (EAI 2)Name or service not known: Could not resolve host name *.443 -- ignoring!
[Thu Jun 14 11:09:34 2012] [warn] The ScriptAlias directive in /etc/apache2/sites-enabled/default2 at line 18 will probably never match because it overlaps an earlier ScriptAlias.
[Thu Jun 14 11:09:34 2012] [warn] The Alias directive in /etc/apache2/sites-enabled/default2 at line 34 will probably never match because it overlaps an earlier Alias.
[Thu Jun 14 11:09:34 2012] [warn] _default_ VirtualHost overlap on port 443, the first has precedence
 * Stopping web server apache2              OK 
```

但是，之后 netstat -tulpn| grep :80 仍然显示：

```
tcp6       0      0 :::80                   :::*                    LISTEN      23561/apache2 
```

无论如何，当我杀死上面显示的进程时，例如，kill -9 23561，我可以使用 service apache2 start 成功启动 apache2 并在浏览器中再次看到我的网站。所以，对我来说，看起来有另一个 apache2 正在运行，它使用完全不同的配置。顺便说一句，我已经保证我只有一个 apache2 安装。你能帮我解决这个问题吗？提前谢谢了！！！:-)

# iphone - how to remove push notification badge while installing an app

> ID：11030050
> 
> 赞同：0
> 
> 时间：2012-06-14T09:15:33.327
> 
> 标签：iphone, ios, push-notification

my app uses push notification. When I install the app to my device the app icon shows a push notification badge. The badge number remains the same and doesn't update with new notifications.

Is there any way not to show the badge just after installing the app and only when my app receives an actual push notification?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-01-04T01:03:40.357

```
func applicationDidBecomeActive(_ application: UIApplication) {
    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
    application.applicationIconBadgeNumber = 0

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:18:55.940

由于安装后没有呼叫您的应用程序，因此您无法执行此操作。

您可能可以在`application:didFinishLaunchingWithOptions:`方法中做到这一点。在这里您可以检查您的应用程序是否更新或清除图标徽章。

# .net - 如何为枚举执行 asp.net mvc 4 模型绑定？

> ID：11030052
> 
> 赞同：8
> 
> 时间：2012-06-14T09:15:36.540
> 
> 标签：.net, asp.net-mvc-4, model-binding

asp.net mvc 团队是否为枚举实现了默认模型绑定？开箱即用，无需为枚举创建自定义模型绑定器。

更新：
假设我有一个将接收视图模型的操作，并且 JSON 对象将发布到该操作。

```
jsObj{id:2, name:'mike', personType: 1} 
```

和视图模型：

```
class ViewModel
{
    public int id {get;set;}
    public string name {get;set;}
    public PersonType personType{get;set;}
}

public enum PersonType : int
{
   Good = 1,
   Bad = 2,
   Evil = 3
} 
```

人类型会被绑定吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T09:19:00.133

它甚至在早期版本中也存在。此 html 和`Gender = Male`表单值正确绑定到`Gender`枚举属性。

```
<select id="Gender" name="Gender">
     <option value="Male">Male</option>
     <option value="Female">Femal</option>
</select> 
```

对于服务器端，我发现在我的视图模型中使用选择列表最容易

```
public class User
{
    public UserType UserType { get; set; }

    public IEnumerable<SelectListItem> UserTypesSelectList { get; set; }

    public User()
    {
        UserTypesSelectList = Enum.GetNames(typeof(UserType)).Select(name => new SelectListItem()
        {
            Text = name,
            Value = MakeEnumMoreUserFriendly(name)
        });
    }
}

public enum UserType
{
    First,
    Second
} 
```

并且在视图中

```
@Html.DropDownListFor(model => model.UserType, Model.UserTypesSelectList) 
```

# c# - Selenium.WebDriver！如何使用 C# 获取下拉菜单的子菜单？

> ID：11030058
> 
> 赞同：0
> 
> 时间：2012-06-14T09:15:53.733
> 
> 标签：c#, selenium, webdriver, selenium-webdriver

我无法获取下拉菜单的子菜单项，因为子菜单仅在主菜单项的 mouseOver 事件中可见。

**我的代码：**

*主菜单项上的 mouseOver 事件*

```
 IWebElement element = WebDriver.FindElement(By.Id(elementID));

     Actions action = new Actions(WebDriver);
     action.MoveToElement(element).Build().Perform(); 
```

当我尝试获取菜单的子菜单项时，出现以下错误：“ ... ***OpenQA.Selenium.ElementNotVisibleException：无法单击元素***”。

你建议我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:04:25.957

我进行了谷歌搜索，发现一篇文章**SELENIUM WEBDRIVER – 如何点击隐藏的链接或菜单**，其中包含我的问题的解决方法。
[这是这篇文章。](http://www.anitpatel.net/2012/02/25/selenium-webdriver-how-to-click-on-a-hidden-link-or-menu/)

使用**.mouseover()**方法：

```
 js.ExecuteScript("return $(\"a:contains('Fruits')\").mouseover();"); // Mouse hove to main menu  
 webDriver.FindElement(By.LinkText("Banana")).Click(); 
```

或使用**.hover()**方法：

```
 ((JavascriptExecutor)driver).executeScript("$('div#Fruits').hover();");  
  webDriver.FindElement(By.LinkText("Banana")).Click(); 
```

或使用**.mouseenter()**方法：

```
((JavascriptExecutor)driver).executeScript("$('div#Fruits').mouseenter();")  
webDriver.FindElement(By.LinkText("Banana")).Click(); 
```

# java - 我可以在 Windows 7 下并行运行 Java 32 位和 64 位吗

> ID：11030063
> 
> 赞同：3
> 
> 时间：2012-06-14T09:16:14.933
> 
> 标签：java, eclipse, 32bit-64bit

我想运行两个版本的 Eclipse。一个仅在 32 位下稳定（在我的机器上），另一个仅在 64 位下稳定。

有什么经验吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T09:18:32.693

完美运行。您可以安装多个 JDK 和 JRE 并在 中定义，`eclipse.ini`每次安装使用哪一个。

# objective-c - Delete column from Sqlite database

> ID：11030065
> 
> 赞同：0
> 
> 时间：2012-06-14T09:16:17.483
> 
> 标签：objective-c, sqlite, sql-delete

Basically I have to enter all textfield values in database then have to use for sending to webservice. So when the one column details send to service then have to delete that column. I have done this:

```
-(void)deleteTableDataFromSavedDataTable:(NSString *)lastID {
    NSString *sql_str=[NSString stringWithFormat:@"DELETE FROM FormInfoValues where Phone = %@",lastID];

    const char *sql = [sql_str UTF8String];

    if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK)
    {
        NSLog(@"sql delete statement is ");

        sqlite3_stmt *deleteStmt;
        if(sqlite3_prepare_v2(database, sql, -1, &deleteStmt, NULL) == SQLITE_OK)
        {
            NSLog(@"sql delete statement is %@", deleteStmt);
            if(sqlite3_step(deleteStmt) != SQLITE_DONE )
            {
                NSLog( @"Error: %s", sqlite3_errmsg(database) );
            }
            else
            {
                NSLog( @"row id = %lld", (sqlite3_last_insert_rowid(database)+1));
                NSLog(@"No Error");
            }
        }
        sqlite3_finalize(deleteStmt);
    }
    sqlite3_close(database);
} 
```

but its not deleting after sending. Why its not calling? give me ideas..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:40:15.700

很可能我没有正确理解您的问题 - 所以如果是这样，我提前道歉。

**关于：“......然后必须删除该列。”**

-- 如果要清除列中的数据（通过将其设置为零、空字符串或 NULL），则需要在 SQL 中使用 UPDATE 命令。DELETE 命令总是删除 ROWS。

-- 如果你真的必须从表的模式中删除一列，你必须在 sqlite 中创建一个新表。（Sqlite 允许您通过 ALTER TABLE 命令添加列，而其他一些数据库也允许您使用 ALTER TABLE 删除列。）您可以通过以下方式快速复制表（没有约束等）：

CREATE TABLE MyOutput as SELECT a,b,d,f,h,z from MyOriginal;

-- 如果您的输出是由 SELECT 语句创建的，请避免使用“*”并仅指定要包含的列。

# ios - How to implement Sprite with Buttons

> ID：11030070
> 
> 赞同：0
> 
> 时间：2012-06-14T09:16:33.540
> 
> 标签：ios, cocos2d-iphone

So I'm making a game, and in this game I need to have a certain sprite to appear multiple times.

It's simply an image, with two buttons. One button underneath the image, and one above.

I am using Cocos2d, so any mention of sprite will be the CCSprite class. And the image is actually just a line.

Is there an easy way to implement something like this? I don't want to have to make a separate sprite for the image, and then add each button. Is there a way I can do this all in one sprite?

I'm assuming that I'll probably have to manually add everything (create a method that will create an image and position the buttons relative to the image), but I'm hoping I'm wrong and there is an easier/more efficient way of doing this.

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:44:25.680

我想你正在寻找[`CCMenuItem`](http://www.cocos2d-iphone.org/api-ref/1.0.0/interface_c_c_menu_item.html)和[`CCMenu`](http://www.cocos2d-iphone.org/api-ref/0.99.2/interface_c_c_menu.html)

```
CCSprite *enabledSprite = [CCSprite spriteWithFile:@"myButtonSprite.png"];
CCSprite *selectedSprite = [CCSprite spriteWithFile:@"myButtonSprite.png"];
CCSprite *disabledSprite = [CCSprite spriteWithFile:@"myButtonSprite.png"];

CCMenuItemSprite *item [[[CCMenuItem alloc] initWithNormalSprite:enabledSprite 
                                                  selectedSprite:selectedSprite
                                                  disabledSprite:disabledSprite
                                                          target:delegate
                                                        selector:selector] autorelease];
item.position = ccp(240, 160);

CCMenu *menu = [CCMenu menuWithItems:item, nil];
menu.position = ccp(0, 0);
[self addChild:menu]; 
```

# spring-mvc - Spring tries to bind form post parameters once for each model attribute

> ID：11030075
> 
> 赞同：1
> 
> 时间：2012-06-14T09:16:53.317
> 
> 标签：spring-mvc

I have a controller with the following:

```
@ModelAttribute("searchCriteria")
public abstract SearchableCommand searchCriteria();

@ModelAttribute("searchList")
public PaginatedListAdapter searchList() {
    return new PaginatedListAdapter(defaultSortColumn, searchableService);
}

@RequestMapping
public String doSearch(
        @ModelAttribute("searchCriteria") SearchableCommand searchableCommand, 
        Errors errors,
        @RequestParam(value="sort", required=false) String sort, 
        @RequestParam(value="pageSize", required=false) Integer pageSize, 
        @RequestParam(value="dir", required=false) String dir, 
        @RequestParam(value="page", required=false) Integer page, 
        @ModelAttribute("searchList") PaginatedListAdapter searchList) {

    //some logic here
}; 
```

And in my JSP I have the following for test purpose:

```
<form:form id="searchForm" commandName="searchCriteria">
    <form:input path="searchCriteria[0].searchOperand"/>
    <input id="submitButton" type="submit"/>
</form:form> 
```

When submitting the form, I trace through my code and `searchableCommand.getSearchCriteria[0] .setSearchOperand(...)` is called correctly. However once this is done I recieve the exception:

```
org.springframework.beans.NullValueInNestedPathException: Invalid property 'searchCriteria[0]' of bean class [com.domain.web.command.PaginatedListAdapter]: Cannot access indexed value of property referenced in indexed property path 'searchCriteria[0]': returned null 
```

This because it is also trying to call `PaginatedListAdapter.getSearchCriteria[0] .setSearchOperand(...)`. Co-incidentally this class also has a method called `getSearchCriteria`, but regardless it makes no sense to me as to why spring is trying the bind the form post parameters to both `@ModelAttribute` arguments, when my form explicitly states `commandName="searchCriteria` for which only one `@ModelAttribute` has that name.

# cordova - PhoneGap 应用程序的最佳数据库选项？

> ID：11030076
> 
> 赞同：4
> 
> 时间：2012-06-14T09:16:54.157
> 
> 标签：cordova, local-storage, phonegap-plugins, web-sql

我正在为 PhoneGap 应用程序寻找一个进化的、稳定的和经过验证的数据库解决方案，它的大小不受限制。

我已经使用 LocalStorage 一年多了，而且效果很好。至少如果您没有达到 5 MB 的限制。

这就是我的担忧：我目前计划的应用程序将不得不处理更多的数据，我不想说“抱歉，我们达到了 5 MB 的限制，无法完成您的操作！” 给刚刚购买了 64 GB iPhone 的用户。

有什么建议吗？

谢谢！

托马斯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-17T18:35:53.957

这个问题的答案是使用 SQLite 数据库。请参阅下面的链接 -

[SQLite 数据库](https://stackoverflow.com/questions/9118757/max-size-of-websql-sqlite-database-inside-uiwebview-phonegap)

[SQLiteDatabase PhoneGap](https://stackoverflow.com/questions/8987238/sqlite-database-on-phonegap-ios-more-than-5mb-possible)

希望能帮助到你。

# java - MongoDB Query by Date in Java

> ID：11030077
> 
> 赞同：5
> 
> 时间：2012-06-14T09:16:57.063
> 
> 标签：java, mongodb, date

I`m trying to query mongodb for documents where "date" is betwen two dates. Sample data is:

```
{
        "_id" : ObjectId("4fad0af6709fbc1d481c3e05"),
        "ID" : NumberLong("200930746205085696"),
        "text" : "Forgot my charger...:(",
        "date" : ISODate("2012-06-14T10:49:57Z"),
        "sentiment" : "NEG"
} 
```

My Java code is:

```
DBCursor cursor = null;
DB db = connect();

    Date startDate = new Date(System.currentTimeMillis() - (long)(numOfTimePeriods+1)*time);
    Date endDate = new Date(System.currentTimeMillis() - (long)numOfTimePeriods*time);
    DBObject query = new BasicDBObject();
    query.put("date", new BasicDBObject("$gt", startDate).append("$lte", endDate));

    cursor = db.getCollection("status").find(query); 
```

but the cursor object has no results.

Query object looks like this:

```
{ "date" : { "$gt" : { "$date" : "2012-05-15T00:16:15.184Z"} , "$lte" : { "$date" : "2012-06-14T10:16:15.184Z"}}} 
```

I suspect the problem is the date representation in DB. Any suggestions on this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:10:15.893

$date 表示只是 Java 驱动程序中的 toString 表示，即 Date。它使用严格的 JSON/BSON 表示，而不是扩展的 10gen BSON，其中值可以像在 shell 中一样表示为对象。您不应该尝试使用这样的 toString 输出在 shell 中进行查询，因为它在很多情况下都不起作用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T09:48:32.417

您不应该在查询中使用[and 运算符吗？](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24and)

```
db.foo.find( { $and: [ { date: { $gt: startDate } }, {date : { $lt: endDate} }  ] } ) 
```

# sql - SQL 中（实际值 - 所有行的平均值）的总和

> ID：11030080
> 
> 赞同：0
> 
> 时间：2012-06-14T09:17:03.413
> 
> 标签：sql, oracle

假设我有一张统计表：

```
Page | Action | Time
--------------------
Home | Logon  |  12
Home | Logon  |  11
Home | Search |  20
About| Comment|  10 
```

我可以编写一个查询来获取每个页面的平均操作时间：

```
select Page, avg(Time) from statistics group by Page 
```

但我想更聪明一点。为了突出显示哪些页面的操作最*慢*，我想获得（时间 - 所有页面上所有操作的平均时间）的总和。我可以在单独的查询中做到这一点：

```
select avg(Time) from statistics
-> 15
select Page, sum(Time - 15) from statistics group by Page 
```

问题是，有没有办法在一个查询中做到这一点？

显然`select Page, sum(Time - avg(Time)) from statistics group by Page`行不通。Oracle 抛出“ORA-00937: not a single-group group function”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T09:31:14.013

您可以使用窗口功能：

```
SELECT  DISTINCT 
        Page, 
        AVG(Time) OVER(PARTITION BY Page) - AVG(Time) OVER() AS Variance
FROM    Statistics 
```

为了稍微扩展，您可以在一个查询中获得许多不同的平均值：

```
SELECT  Page, 
        Action,
        Time,
        AVG(Time) OVER(PARTITION BY Page, Action) AS AverageActionTime,
        AVG(Time) OVER(PARTITION BY Page) AS AveragePageTime,
        AVG(Time) OVER() AS AverageTime
FROM    Statistics 
```

[http://sqlfiddle.com/#!4/42a5f/8](http://sqlfiddle.com/#!4/42a5f/8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T09:23:14.283

您可以使用子查询来计算平均时间：

```
select  stat.Page
,       sum(stat.Time - avg_stat.time) 
from    statistics stat
cross join    
        (
        select  avg(Time) as time
        from    statistics
        ) avg_stat
group by 
        stat.Page 
```

# java - java.sql.SQLException: error occurred during batching: batch must be either executed or cleared

> ID：11030081
> 
> 赞同：1
> 
> 时间：2012-06-14T09:17:06.547
> 
> 标签：java, jakarta-ee, jdbc

I am getting

> java.sql.SQLException: error occurred during batching: batch must be either executed or cleared

in the below code. I want to execute two queries.

```
String sql_query="insert into m_status values(20,'test');select * from m_user";
String query1 = sql_query.toUpperCase();

String[] results = query1.split(";");

stmt = conn1.createStatement();
conn1.setAutoCommit(false); 
for (int i = 0; i < results.length; i++) {
    if(results[i].startsWith("SELECT")) {
        rs1 = stmt.executeQuery(results[i]);
    }
    else if(results[i].startsWith("INSERT")){
        stmt.addBatch(results[i]);
    }
}
int [] updateCounts = stmt.executeBatch();
conn1.commit(); 
if (rs1 != null)
    rs1.close();
if (stmt != null)
    stmt.close();
if (conn1 != null)
    conn1.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:20:15.513

使用两条语句，一条用于选择查询，另一条用于更新。`executeQuery`检查是否有批次，如果有`Statament`，则抛出该错误。此外，将您的查询包装在一个`try-catch-finally`块中并关闭 finally 块中的资源。事实上，您的代码可能会导致连接泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:23:20.223

您测试您的查询是否以大写 SELECT 开头，但事实并非如此。因此，您的两个查询被添加到批处理语句中。你可以使用

```
com.mysql.jdbc.StringUtils.startsWithIgnoreCase(results[i], "select"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T09:21:41.430

确保[`PreparedStatement#executeBatch()`](http://download.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeBatch%28%29)在使用批次时使用。

还要确保你执行

```
int n = preparedStatement.executeUpdate(); 
```

# cassandra - Cassandra row cache size discrepancy

> ID：11030082
> 
> 赞同：0
> 
> 时间：2012-06-14T09:17:06.487
> 
> 标签：cassandra

In cassandra.yaml I configured the row_cache_size_in_mb: 1920

On startup the log says the cache is initialized with 1920mb. But the JMX interface says RowCacheCapacityInMB as 1024mb . Why this discrepancy?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:25:06.437

这已在 1.1.1 版本中修复：[https](https://issues.apache.org/jira/browse/CASSANDRA-4150) ://issues.apache.org/jira/browse/CASSANDRA-4150 ；你应该升级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T07:21:48.323

我看了一下代码，这就是原因。

最大大小只能是 1024MB 。他们使用旧版本的 concurrentlrucache 库，将容量限制为 1024MB。

不幸的是，由于方法签名不匹配，我无法使用更新版本的库，除非我自定义构建 cassandra

# java - Selecting an option in a CSS-based menu with WebDriver

> ID：11030084
> 
> 赞同：4
> 
> 时间：2012-06-14T09:17:16.017
> 
> 标签：java, drop-down-menu, selenium, hover, webdriver

I have a simple [CSS-based dropdown menu](https://www.servage.net/blog/2009/03/20/create-a-cool-css-based-drop-down-menu/), and I'm trying to click on one of the menu items in a Java Selenium (WebDriver) test.

![enter image description here](../Images/8f938438af7625ee2aebbdaec5868b5c.png)

Both the menu (`<ul>` element) and the items (`<a>`) have IDs and creating corresponding `WebElement` objects works fine. I'm trying to click on one of the items with code like:

```
 hoverOver(transfersMenu);
   transferLink.click(); 
```

In `hoverOver()`, **I've tried [all three answers from this question](https://stackoverflow.com/q/6232390/56285), but none of them work**. I keep getting:

```
org.openqa.selenium.ElementNotVisibleException: 
    Element is not currently visible and so may not be interacted with 
Command duration or timeout: 2.06 seconds 
```

(I've tried calling `transferLink.click()` also *before* `hoverOver()`, in the hope that the implicit wait would make it work, but nope.)

**Any idea how to make the hovering work so that the link can be clicked?**

Selenium version 2.21.0\. I'm running the tests on Linux (Ubuntu), using Firefox 13.0\. A colleague just tried on Windows (using Firefox 12.0), and it didn't work for him either.

**Update**: As per Slanec's tip in comments, and [these instructions](http://code.google.com/p/selenium/wiki/AdvancedUserInteractions#Native_events_versus_synthetic_events), I tried `setEnableNativeEvents(true)` on the `FirefoxProfile`. At first this failed:

```
org.openqa.selenium.InvalidElementStateException: 
    Cannot perform native interaction: Could not load native events component. 
```

...but after I **upgraded to Selenium 2.23.1**, I no longer get that complaint.

Still, the hovering doesn't work (with native events on or off). :-/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T10:34:13.963

你如何运行你的测试类？我发现通过 ANT 运行 WebDriver 使悬停操作变得不可能，而从命令行 (TestNG JAR) 或从 Eclipse 运行测试类就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:25:16.200

在单击链接之前，我使用以下代码将鼠标悬停在我们的菜单上 1 秒钟，就像您正在使用的那样：

```
action = new SeleniumActionHelper(driver);

WebElement currentUser = findElementByLinkText("testing1");
action.mouseHover(currentUser);
Thread.sleep(1000); 
```

值得注意的是，鼠标光标需要保留在浏览器窗口中才能保持悬停。如果鼠标光标在浏览器窗口之外，我会体验到菜单的快速闪烁，但它不会保持可见

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T06:12:57.623

试试这个例子：

```
WebElement menuHoverLink= driver.findElement(By.id("test"));
actions.moveToElement(menuHoverLink).perform();
driver.findElement(By.id("test")).click();
Thread.sleep(6000); 
```

# php - Download CSV file in jquery mobile framewrok with zend

> ID：11030086
> 
> 赞同：0
> 
> 时间：2012-06-14T09:17:17.237
> 
> 标签：php, zend-framework, jquery-mobile

I am doing project with jquery mobile framework using zend framework.I have the page to download report in csv format. I can downloaded it from desktop version. But the same page in mobile version runs in ajax due to jquery mobile result `undefined` with `blank page`.

for example, i call this [http://www.test.com/report/downloadtransaction](http://www.test.com/report/downloadtransaction) when i click download button. This calls downloadtransactionAction in reportcontroller ,then finally gives csv file. Call is happening in mobile version but not able to see download file window.

Below is the code

```
 public function downloadtransactionAction(){
                    $preview_result = getmySessionData('preview_result')->preview_key;
                    //print_obj($preview_result);        
                    $myFile = "TRANSACTION_" . time() . ".csv";
                    header("Content-Disposition: attachment; filename=\"$myFile\"");
                    header("Content-Type: application/vnd.ms-excel; charset=UTF-16LE");
                    $out = fopen("php://output", 'w');
                    //$csvData = array('Warehouse Id', 'Name','Item No','Minimun Stock','Current Stock');
                    $csvData = array('No','DATE','USER', 'TRADE TYPE','AMOUNT');
                    $o = fputcsv($out, $csvData, ',', '"');
                    $count = 1;;
                    foreach($preview_result as $key => $value)
                    {

                        $csvData = array();
                        $csvData = array($count,date('Y/m/d',strtotime($value['date'])),$value['current_admin_name'],($value['trade_type'])?'WithDraw' : 'Deposit',$value['amount']);
                        $o = fputcsv($out, $csvData, ',', '"');
                        $count++;
                    }
                    fclose($fh);
                    // DOWNLOAD CSV
                    echo $out;
                    die;
    } 
```

I need to download csv in mobile version as like in desktop version What i done wrong on this ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:17:12.620

我使用下面的代码来禁用 jquery 移动框架中的 ajax，

```
 <script type="text/javascript">
            // do not handle links via ajax by default
            $(document).bind("mobileinit", function () { $.mobile.ajaxEnabled = false; });
        </script> 
```

这将禁用页面中的 ajax 并重定向到单击的页面。

# iphone - Simple JSON Framework for iOS 5 SDK

> ID：11030087
> 
> 赞同：-2
> 
> 时间：2012-06-14T09:17:20.583
> 
> 标签：iphone, objective-c, ipad, xcode4, ios5

i need to parse simple JSON php in my tableview for that i searched and tried loy but didnt get it. please suggest me proper link from where i can download the same.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:18:58.933

我希望我以前的一篇文章可以帮助你。我认为这就是您的意图：[json_encode 等效于objective-c](https://stackoverflow.com/questions/10821272/json-encode-equivalent-for-objective-c/10821637#10821637)

请注意，这**仅适用于 iOS 5 及更高版本**。如果您需要其他解决方案，则必须使用类似的[东西](http://blog.zachwaugh.com/post/309924609/how-to-use-json-in-cocoaobjective-c)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:19:55.043

Personnaly 我正在使用 SBJson

[http://stig.github.com/json-framework/](http://stig.github.com/json-framework/)

它工作得很好

您可以在此处查看使用示例：http: [//jasarien.com/ ?p=428](http://jasarien.com/?p=428)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T09:32:30.927

JSONKit：[https ://github.com/johnezang/JSONKit](https://github.com/johnezang/JSONKit)

MTJSON：[https ://github.com/mysterioustrousers/MTJSON](https://github.com/mysterioustrousers/MTJSON)

# c - How to edit graphs by graphviz?

> ID：11030088
> 
> 赞同：4
> 
> 时间：2012-06-14T09:17:42.827
> 
> 标签：c, open-source, graphviz

Is any one familiar with any c open source code that does graph manipulation (point and click) using the layout algorithms of graph viz? I would like to use the algorithms to lay out a graph which I could later manipulate in a GUI.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:28:29.050

graphviz C 代码和架构相当复杂。你可以看看[canviz](http://code.google.com/p/canviz/)。它是您可以移植到 C 的 Javascript 渲染引擎。

前段时间我尝试了 qt 方式，按照[这篇](http://mupuf.org/blog/article/34/)文章，但这不是一条简单的路线。

# java - OpenId authentication in struts 2 web application

> ID：11030093
> 
> 赞同：0
> 
> 时间：2012-06-14T09:17:58.577
> 
> 标签：java, struts2, openid, google-openid

This is related to OpenId authentication. I have implemented the google and yahoo openId auth with java in struts2 but it is achieved through page redirection to openId provider auth page and then back to my own success web-page. But what i wanted was same as facebook auth. were in json object is passed from fb and fb authentication is done in a pop-up. so that redirection can be avoided. Plz help me out.

I have somewhat implemented which is mentioned in this post part1-part4: [http://javadeveloperjournal.blogspot.in/2011/08/integrating-openid-into-my-struts-2-app.html](http://javadeveloperjournal.blogspot.in/2011/08/integrating-openid-into-my-struts-2-app.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T04:56:57.057

首先，我不建议为 Facebook 使用 OpenID，而且 Facebook 不为 OpenID 提供自己的实现，而是依赖于某些第三方的实现。

使用 OAuth 的最佳方式与 OpenID 非常相似，只是在安全性和身份验证级别上有所不同。

在构造 OAuth Dialog 的 URL 时，您可以指定一个参数，即`display`指示您是否想要页面重定向或弹出页面，默认情况下该参数的值设置为`page`

请浏览 Facebook 文档以实现 OAuth

[使用 Facebook 的 oauth](https://developers.facebook.com/docs/reference/dialogs/oauth/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T04:18:49.977

正如其他答案所表明的那样，将您传递给 OpenID 提供程序进行登录是规范的一部分。同样与上述 Umesh 一致，Facebook 提供了 Facebook Connect，它不是 OpenId，但允许您使用此方法对用户进行身份验证。

请参阅：[Facebook 是 OpenID 提供商吗？](https://stackoverflow.com/questions/1827997/is-facebook-an-openid-provider)

然而，我想补充的是，您不只是跑掉并创建一个基于 OAuth 的身份验证系统，因为 OpenID 不是您想要使用的。OAuth 为您提供的不仅仅是登录身份验证，还有更强大的功能——奇怪的是用户并没有意识到这一点。OpenId 传递您的凭据，OAuth 传递对您数据的访问权限。因此，使用 OpenId，网站可以对我进行身份验证，使用 OAuth，网站可以对我进行身份验证，并且可能可以访问我的所有电子邮件或 Google Drive 中的文档。好消息是您的用户必须明确允许此访问。

但是在隐私方面犯了错误，您可能希望为需要 OAuth 功能的应用程序构建一个令人信服的案例。就像下面文章中的图片一样，要求公证信证明您的身份与要求代客钥匙证明您的身份是不同的。

代客是 OAuth，我需要他们把我的车停在停车场，所以我给了他们一把代客钥匙。它无法打开杂物箱或行李箱，但他们可以打开驾驶员侧的车门并启动点火装置——这就是我需要他们做的所有事情，仅此而已。但是，当我使用个人支票付款时，我不会给杂货店的收银员我的代客钥匙，她只需要查看带照片的身份证件，任何政府颁发的身份证件都可以使用。从技术上讲，我的代客钥匙可以让她打开我的汽车并读取我的 VIN 并可能根据 DMV 数据库对其进行身份验证，但这也应该可以工作，但这可能是矫枉过正。

OpenId、OAuth 和联合登录有很好的用途，但作为开发人员，我们需要了解何时何地应该使用它们。

[http://en.wikipedia.org/wiki/OAuth#OpenID_vs._pseudo-authentication_using_OAuth](http://en.wikipedia.org/wiki/OAuth#OpenID_vs._pseudo-authentication_using_OAuth)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T08:59:13.670

该重定向是 OpenID 规范的强制性部分。无论如何，以这种方式对用户进行身份验证，OpenID 提供者应该支持它。但据我所知，Facebook 并没有。使用 Oauth，facebook 支持它并且它是一个开放标准，所以使用开放标准总是更好。

# javascript - 具有类似功能时简化 Javascript

> ID：11030095
> 
> 赞同：2
> 
> 时间：2012-06-14T09:18:07.063
> 
> 标签：javascript, jquery, tabs, simplify, simplification

我终于在这里拼凑了一些适用于我的问题的[代码](https://stackoverflow.com/questions/10933751/reflecting-changes-in-class-for-back-forward)。但是，它看起来很长，因为我已经为刷新具有特定哈希的页面以及通过单击选项卡访问同一页面时创建了单独的函数。

```
$(document).ready(function () {
    $(function () {
        var loc = window.location.href; // For when Hazel is refreshed
        if (/Hazel/.test(loc)) {
            $("#tab1,#tab2,#tab3,#tab4").removeClass("r p c").addClass("h");
            $("#tab2").removeClass("tail");
            $("#tab3, #tab4").addClass("tail");
        }
    });
    $(function () {
        var loc = window.location.href; // For when Red is refreshed
        if (/Red/.test(loc)) {
            $("#tab1,#tab2,#tab3,#tab4").removeClass("h p c").addClass("r");
            $("#tab3, #tab2").removeClass("tail");
            $("#tab4").addClass("tail");
        }
    });
    $(function () {
        var loc = window.location.href; // For when Pink is refreshed
        if (/Pink/.test(loc)) {
            $("#tab1,#tab2,#tab3,#tab4").removeClass("h r c").addClass("p");
            $("#tab3, #tab4").removeClass("tail");
            $("#tab2").addClass("tail");
        }
    });
});
$(function () {
    var loc = window.location.href; // For when Cyan is refreshed
    if (/Cyan/.test(loc)) {
        $("#tab1,#tab2,#tab3,#tab4").removeClass("h r p").addClass("c");
        $("#tab4").removeClass("tail");
        $("#tab3, #tab2").addClass("tail");
    }
});
$("#tab1").click(function () {
    $(window).bind("hashchange", function () {
        var loc = window.location.href; // For when Hazel tab is clicked
        if (/Hazel/.test(loc)) {
            $("#tab1,#tab2,#tab3,#tab4").removeClass("r p c").addClass("h");
            $("#tab2").removeClass("tail");
            $("#tab3, #tab4").addClass("tail");
        }
    });
});
$("#tab2").click(function () {
    $(window).bind("hashchange", function () {
        var loc = window.location.href; // For when Red tab is clicked
        if (/Red/.test(loc)) {
            $("#tab1,#tab2,#tab3,#tab4").removeClass("h p c").addClass("r");
            $("#tab3, #tab2").removeClass("tail");
            $("#tab4").addClass("tail");
        }
    });
});
$("#tab3").click(function () {
    $(window).bind("hashchange", function () {
        var loc = window.location.href; // For when Pink tab is clicked
        if (/Pink/.test(loc)) {
            $("#tab1,#tab2,#tab3,#tab4").removeClass("h r c").addClass("p");
            $("#tab3, #tab4").removeClass("tail");
            $("#tab2").addClass("tail");
        }
    });
});
$("#tab4").click(function () {
    $(window).bind("hashchange", function () {
        var loc = window.location.href; // For when Cyan tab is clicked
        if (/Cyan/.test(loc)) {
            $("#tab1,#tab2,#tab3,#tab4").removeClass("h r p").addClass("c");
            $("#tab4").removeClass("tail");
            $("#tab3, #tab2").addClass("tail");
        }
    });
});
}); 
```

可以简化吗？我已经尝试过，但到目前为止，在我的尝试中，代码只是中断了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:28:58.380

我假设您正在使用某种 JS 路由库。

尝试这个：

```
$(document).ready(function () {
    var tabInfo = {
            Hazel: {nonTail:'#tab2',tail:'#tab3, #tab4'},
            Red: {nonTail:'#tab3,#tab2',tail:'#tab4'},
            Pink: {nonTail:'#tab3,#tab4',tail:'#tab2'},
            Cyan: {nonTail:'#tab4',tail:'#tab2,#tab3'}
    };
    function makeChanges() {
       var loc = window.location.href; 
       for(var tab in tabInfo){
           if(loc.indexOf(tab) !== -1){
             $("#tab1,#tab2,#tab3,#tab4").removeClass("h r p c").addClass(tab.toLowerCase().charAt(0));
             $(tabInfo[tab].nonTail).removeClass("tail");
             $(tabInfo[tab].tail).addClass("tail");
             break;
           }
        }
    }
    makeChanges();
    $(window).bind("hashchange", function () {
         makeChanges();
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:01:18.650

这是未经测试的伪代码，因为我不确定如何测试位置部分。我尝试采用面向对象的方法来解决您的问题，将所有选项卡配置移动到对象中。

```
var tabs = [{
    "id": "#tab1",
    "color": "hazel",
    "removeTabIds": "#tab1,#tab2,#tab3,#tab4",
    "removeClasses": "r p c",
    "addClasses": "h",
    "removeTailIds": "#tab2",
    "addTailIds": "#tab3 #tab4"
}, { //Other tab configs go here ...
}];

$(document).ready(function(){
    var loc = window.location.href;
    var tab = getTab(loc);
    changeClasses(tab);
});

function getTab(loc){
    for (var i = 0; i < tabs.length; i++) {
        if (/tabs[i].color/.test(loc)) {
            return tab[i];
        }
    }
};

function changeClasses(tab){
    $(tab.removeTabIds).removeClass(tab.removeClasses).addClass(tab.addClasses);
    $(tab.removeTailIds).removeClass("tail");
    $(tab.addTailIds).addClass("tail");
};

function bindTab(tab){
    $(tab.id).click(function(){
        $(window).bind("hashchange", function(){
            var loc = window.location.href;
            var tab = getTab(loc);
            changeClasses(tab);
        });
    });
} 
```

# wpf - TreeView 模板：绑定返回 null

> ID：11030097
> 
> 赞同：1
> 
> 时间：2012-06-14T09:18:18.680
> 
> 标签：wpf, binding

我正在尝试`TreeView`使用[此示例](http://msdn.microsoft.com/en-us/library/ms752048.aspx)设置 a 样式，并且一切正常，直到我尝试将绑定添加到我的`DataContext`. 即，我将箭头的 替换为`Fill`当前主题。下面是相关代码：`Paths``MultiBinding`

```
<Path x:Name="Collapsed" HorizontalAlignment="Left" VerticalAlignment="Center"
      Margin="1" Data="M 4 0 L 8 4 L 4 8 Z">
   <Path.Fill>
       <SolidColorBrush>
           <SolidColorBrush.Color>
               <MultiBinding Converter="{StaticResource ThemeToColorConverter}"
                             ConverterParameter="Foreground">
                   <Binding Path="Themes" />
                   <Binding Path="ThemeIndex" />
               </MultiBinding>
           </SolidColorBrush.Color>
       </SolidColorBrush>
   </Path.Fill>
</Path> 
```

我在转换器中设置了断点，问题似乎是两者`Bindings`都找不到他们的`Paths`，因为它们都发送`null`到转换器中。但是，我`Button`在代码前面设置样式时使用了相同的代码，并且按钮完美显示。

我唯一能想到的是，在 中`TreeView Style`，`Bindings`它们来自不同的来源。我只是不知道他们将如何做到这一点或如何解决它。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:56:08.707

好的，我明白了，所以我发布了我的解决方案，这样有同样问题的其他人可以（希望）找到它。问题是绑定绑定到`TreeView Items`，而不是`UserControl's DataContext`，所以我命名了`UserControl`并将 设置`Bindings' ElementNames`为：

```
<Path x:Name="Collapsed" HorizontalAlignment="Left" VerticalAlignment="Center"
      Margin="1" Data="M 4 0 L 8 4 L 4 8 Z">
   <Path.Fill>
       <SolidColorBrush>
           <SolidColorBrush.Color>
               <MultiBinding Converter="{StaticResource ThemeToColorConverter}"
                             ConverterParameter="Foreground">
                   <Binding ElementName="Control" Path="Themes" />
                   <Binding ElementName="Control" Path="ThemeIndex" />
               </MultiBinding>
           </SolidColorBrush.Color>
       </SolidColorBrush>
   </Path.Fill>
</Path> 
```

# c# - 查看服务中的内容占用 CPU 编辑：（许多线程...）

> ID：11030098
> 
> 赞同：0
> 
> 时间：2012-06-14T09:18:31.593
> 
> 标签：c#, database, multithreading, service, cpu

我有一个相当大的 C# 服务，它作为一个服务器应用程序同时与几个（大约 5 个）客户端进行通信。每个客户端都是一个线程，主要将数据放入 Access 数据库并从 Access 数据库中取出数据。该服务在启动时运行良好，但几天后 CPU 变得疯狂（上升 99%）并且服务开始变慢很多。我不知道是什么原因造成的......无论如何，有没有看到占用 CPU 的服务中的什么，什么函数 och 线程？不知道如何更好地描述它，但如果您需要更多信息来帮助，请提出问题！:)

/缺口

编辑：添加了关于我如何创建线程以及它们做什么的代码......（在我使用 Process Expolorer 之后，我注意到我已经运行了很多）

```
private void ListenForClients()
{
            this.tcpListener.Start();

            while (true)
            {
                TcpClient client = this.tcpListener.AcceptTcpClient();

                Connection c = new Connection(this.parent);
                Thread clientThread = new Thread(new ParameterizedThreadStart(c.HandleClientComm));

                threadCollection.Add(clientThread);
                clientThread.Start(client);
            }
}

public void HandleClientComm(object client)
    {
        try
        {

            TcpClient server = (TcpClient)client;

            NetworkStream ns = server.GetStream();
            byte[] data = new byte[1024];
            string input, stringData;

            while (true)
            {
                try
                {
                    data = new byte[1024];
                    if (ns.DataAvailable && ns.CanRead)
                    {
                        int recv = ns.Read(data, 0, data.Length);
                        if (recv > 0)
                        {
                            if ((byte)data[recv - 1] == (byte)255)
                            {
                                int cnt = -1;
                                for (int i = 0; i < recv; i++)
                                {
                                    if (data[i] == (byte)254)
                                        cnt = i;
                                }

                                int nr = recv - cnt - 2;
                                byte[] tmp = new byte[nr];

                                for (int i = 0; i < nr; i++)
                                {
                                    tmp[i] = data[cnt + i + 1];
                                }
                                string crc = Encoding.UTF8.GetString(tmp);
                                stringData = Encoding.UTF8.GetString(data, 0, cnt);

                                MsgStruct msgs = new MsgStruct(stringData);
                                msgs.setCrc(crc);
                                Thread.Sleep(200);

                                addTodo(msgs);
                            }
                        }

                    }
                    if (parent.cStructHandler.gotMsg(this.ID))
                    {
                        MsgStruct tmpCs = parent.cStructHandler.getNextMsg(this.ID);

                        if (tmpCs.getMsg().Length != 0 && ns.CanWrite)
                        {
                            byte[] ba = Encoding.UTF8.GetBytes(tmpCs.getMsg());

                            if (tmpCs.getCrc() == "")
                            {
                                ulong tmp = CRC.calc_crc(ba, ba.Length);
                                tmpCs.setCrc(tmp.ToString("X"));
                            }

                            if (tmpCs.canSendByTimeout())
                            {
                                string crcStr = "?" + tmpCs.getCrc() + "?";
                                byte[] bb = Encoding.UTF8.GetBytes(crcStr);
                                crcStr = Encoding.UTF8.GetString(bb);
                                byte[] fullMsg = new byte[ba.Length + bb.Length];
                                bb[0] = 254;
                                bb[bb.Length - 1] = 255;

                                ba.CopyTo(fullMsg, 0);
                                bb.CopyTo(fullMsg, ba.Length);
                                string s = System.Text.UTF8Encoding.ASCII.GetString(fullMsg);

                                ns.Write(fullMsg, 0, fullMsg.Length);
                                Thread.Sleep(200);
                                if (!tmpCs.isAckNeeded())
                                    parent.cStructHandler.removeNextMsg(this.ID);
                            }
                        }
                    }

                    Thread.Sleep(100);
                }
                catch (Exception e)
                {
                    break;
                }

            }
            ns.Close();
            server.Close();

        }
        catch (Exception e)
        {
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:06:32.890

我建议您使用某种跟踪，只是为了看看您的应用程序在做什么：

[这是一个简单的dot net log 4 net教程](http://www.codeproject.com/Articles/140911/log4net-Tutorial)的日志框架

并且：正如您所说，这是一个长时间运行的服务器进程，我建议使用滚动日志（即，如果日志文件有一定数量的行，则使用新文件）。log4net RollingFileAppender 派上用场了。

您应该对标准情况使用高级跟踪（即，当一切正常时）并能够在需要时（即当您的服务器进程失控时）切换到具有更多输出的较低级别。

而且，当然，您可以通过[jetbrains 工具查看](http://www.jetbrains.com/profiler/)

同样强烈推荐的是那些 RedGate 工具：[ANTS 性能分析器](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/index-1?utm_expid=53846-2&utm_referrer=http://www.red-gate.com/)和[点网反射器](http://www.reflector.net/)

**编辑**

差点忘了提：我最喜欢的工具之一：[Process Explorer](http://technet.microsoft.com/de-de/sysinternals/bb896653.aspx)

**编辑2**

如果工作完成，我认为你需要休息一下才能让这段时间保持真实

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:26:00.593

尝试检查打开的句柄（文件）。我打赌你忘了释放原生资源（忘了`using`建设）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T16:35:58.257

您的代码中的主要问题是您无限期地生成线程并且可能根本没有在 threadCollection 中释放它们。

也许[ThreadPool.QueueUserWorkItem](http://msdn.microsoft.com/en-us/library/kbf0f1ct) "fire & forget" 在你的情况下更好？

# javascript - Three.js：相机在球体周围飞行？

> ID：11030101
> 
> 赞同：4
> 
> 时间：2012-06-14T09:18:33.583
> 
> 标签：javascript, three.js

在 Three.js（使用 JavaScript/WebGL）中，如何创建一个相机以固定高度、固定前进速度和相对于球体的固定方向围绕球体飞行，而用户只能向左和正确的？

想象一架飞机在一根看不见的绳子上飞到地球的中心，在地面附近飞行，并且总是看到球体的一部分：

![在此处输入图像描述](../Images/84db6be3f4bff8ffbf01ec6fb0e7832f.png)

（我目前有旋转球体的代码，因此它看起来像在飞行的相机 - 左右转向尚未实现 - 但我认为在我走得更远之前，移动相机/飞机可能更清洁，而不是球体团体。）

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T09:55:32.287

你的意思是像我的[Ludum Dare 23 游戏](http://tinyshipping.librador.com)一样？我发现这比我预期的要复杂一些。不过，这并不难。

在这里，我假设您知道相机的经纬度以及它与球体中心的距离（称为`radius`），并希望为相机创建一个变换矩阵。

仅创建一次以下对象以避免在游戏循环中创建新对象：

```
var rotationY = new Matrix4();
var rotationX = new Matrix4();
var translation = new Matrix4();
var matrix = new Matrix4(); 
```

然后每次相机移动时，创建矩阵如下：

```
rotationY.setRotationY(longitude);
rotationX.setRotationX(-latitude);
translation.setTranslation(0, 0, radius);
matrix.multiply(rotationY, rotationX).multiplySelf(translation); 
```

在此之后只需设置相机矩阵（假设相机是您的相机对象）：

```
// Clear the camera matrix.
// Strangely, Object3D doesn't have a way to just SET the matrix(?)
camera.matrix.identity();
camera.applyMatrix(matrix); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T16:53:38.313

感谢马丁的回答！我现在用另一种方法让它运行良好，如下所示（Martin 的方法可能也很完美；也非常感谢 Lmg！）：

开始时将相机设置为球体顶部的一条直线（即高 y 值，略超出半径，在我的情况下为 200）；让它看起来低一点：

```
camera.position.set(0, 210, 0);
camera.lookAt( new THREE.Vector3(0, 190, -50) ); 
```

创建一个空组（Object3D）并将相机放入：

```
camGroup = new THREE.Object3D();
camGroup.add(camera);
scene.add(camGroup); 
```

以相对于屏幕一半的百分比跟踪鼠标位置：

```
var halfWidth = window.innerWidth / 2, halfHeight = window.innerHeight / 2;
app.mouseX = event.pageX - halfWidth;
app.mouseY = event.pageY - halfHeight;
app.mouseXPercent = Math.ceil( (app.mouseX / halfWidth) * 100 );
app.mouseYPercent = Math.ceil( (app.mouseY / halfHeight) * 100 ); 
```

在动画循环中，将此百分比应用于旋转，同时自动向前移动：

```
camGroup.matrix.rotateY(-app.mouseXPercent * .00025);
camGroup.matrix.rotateX(-.0025);
camGroup.rotation.getRotationFromMatrix(camGroup.matrix);

requestAnimationFrame(animate);
renderer.render(scene, camera); 
```

# visual-studio-2010 - 如何在 Visual Studio 中删除格式？

> ID：11030106
> 
> 赞同：0
> 
> 时间：2012-06-14T09:18:44.097
> 
> 标签：visual-studio-2010

我粘贴了一些看起来像这样的代码：

```
Dto = new MyDto()
       {
           SessionId = sessionId.ToString(),
           UserName = username,
           License = allocateLicense
        }, 
```

但粘贴的版本看起来像：

```
Dto = new MyDto
       ()
       {
           SessionId = 
              sessionId.
              ToString(),
           UserName =
              username,
           License = 
              allocateLicense
        }, 
```

我尝试了 control-z （撤消），有时使用简单的代码可以正确重新格式化，但对于其他代码，它与上面一样，带有换行符。

那么有没有办法我可以选择粘贴的代码并重新格式化它，以便删除额外的换行符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:34:48.393

如果问题是粘贴时自动格式化，您当然可以禁用它。如果是相反的方式，您也可以这样做..

Visual Studio > 工具 > 选项 > 文本编辑器 > C# > 格式化

适当设置**粘贴时自动格式化**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:31:14.573

当您从 PDF 文件或网页复制代码时，经常会发生这种情况。
我通常通过将代码粘贴到记事本等纯文本编辑器上来删除不需要的格式，然后从记事本粘贴到 Visual Studio。

# clojure - 在 Clojure 中，如何从变量或函数中获取名称字符串？

> ID：11030107
> 
> 赞同：9
> 
> 时间：2012-06-14T09:18:47.343
> 
> 标签：clojure

我想得到一个变量的字符串表示。例如，

```
(def my-var {}) 
```

如何`"my-var"`从符号中获取字符串`my-var`？和

```
(defn my-fun [] ...) 
```

如何`"my-fun"`从函数中获取字符串`my-fun`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T09:29:04.827

```
user=> (def my-var {})
#'user/my-var
user=> (defn my-fun [] )
#'user/my-fun
user=> (name 'my-var)
"my-var"
user=> (name 'my-fun)
"my-fun"
user=> (doc name)
-------------------------
clojure.core/name
([x])
  Returns the name String of a string, symbol or keyword.
nil 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-15T11:47:09.757

Clojure 中的每个 Var 都附加了 :name 元数据。

```
user> (def my-var {})
#'user/my-var
user> (:name (meta #'my-var))
my-var
user> (let [a-var #'my-var]
        (:name (meta a-var)))
my-var 
```

但是，通常如果您已经拥有 Var，那么无论如何您已经知道名称，并且通常您不会在程序中使用 Vars（即，您只需传递 my-var 或 my-fun 而不是 #'my-var 和#'我的乐趣）。

没有什么可以获取函数的 Var（或 var-name）或恰好是某个 Var 的值的值。Var 知道它的值，但反之则不然。这当然是有道理的，因为例如，相同的函数可能是零值（对于局部函数）或多个变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T06:13:57.623

这个怎么样？

```
(defn symbol-as-string [sym] (str (second `(name ~sym)))

=> (def my-var {})
#'user/my-var
=> (symbol-as-string my-var)
"my-var"
=> (symbol-as-string 'howdy)
"howdy" 
```

但不适用于函数或宏名称，也许有人可以帮助我

```
=> (symbol-as-string map)
"clojure.core$map@152643"
=> (symbol-as-string defn)
java.lang.Exception: Can't take value of a macro: #'clojure.core/defn (NO_SOURCE_FILE:31) 
```

# c# - LINQ 中的聚合与总和性能

> ID：11030109
> 
> 赞同：34
> 
> 时间：2012-06-14T09:18:55.547
> 
> 标签：c#, performance, linq, sum, aggregate

下面给出了查找**IEnumerable <int> 源**的总和的三种不同实现，以及源具有 10,000 个整数时所用的时间。

```
source.Aggregate(0, (result, element) => result + element); 
```

需要 3 毫秒

```
source.Sum(c => c); 
```

需要 12 毫秒

```
source.Sum(); 
```

需要 1 毫秒

我想知道为什么第二个实现比第一个贵四倍。它不应该与第三个实现相同。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-06-14T10:51:07.267

注意：我的计算机运行的是 .Net 4.5 RC，因此我的结果可能会受到此影响。

只测量一次执行一个方法所花费的时间通常不是很有用。它很容易被 JIT 编译之类的东西所支配，而这些东西在实际代码中并不是真正的瓶颈。因此，我测量了每个方法的执行次数为 100 次（在没有附加调试器的发布模式下）。我的结果是：

*   `Aggregate()`: 9 毫秒
*   `Sum(lambda)`: 12 毫秒
*   `Sum()`: 6 毫秒

最快的事实`Sum()`并不奇怪：它包含一个没有任何委托调用的简单循环，这真的很快。`Sum(lambda)`和之间的差异`Aggregate()`并不像您测量的那样突出，但它仍然存在。可能是什么原因？让我们看一下这两种方法的反编译代码：

```
public static TAccumulate Aggregate<TSource, TAccumulate>(this IEnumerable<TSource> source, TAccumulate seed, Func<TAccumulate, TSource, TAccumulate> func)
{
    if (source == null)
        throw Error.ArgumentNull("source");
    if (func == null)
        throw Error.ArgumentNull("func");

    TAccumulate local = seed;
    foreach (TSource local2 in source)
        local = func(local, local2);
    return local;
}

public static int Sum<TSource>(this IEnumerable<TSource> source, Func<TSource, int> selector)
{
    return source.Select<TSource, int>(selector).Sum();
} 
```

如您所见，`Aggregate()`使用循环但`Sum(lambda)`使用`Select()`，而后者又使用迭代器。使用迭代器意味着有一些开销：创建迭代器对象和（可能更重要的是）为每个项目再调用一次方法。

让我们通过编写我们自己的两次来验证 using`Select()`实际上是原因，一次 using ，其行为应该与框架中的行为相同，一次不使用 using ：`Sum(lambda)``Select()``Sum(lambda)``Select()`

```
public static int SlowSum<T>(this IEnumerable<T> source, Func<T, int> selector)
{
    return source.Select(selector).Sum();
}

public static int FastSum<T>(this IEnumerable<T> source, Func<T, int> selector)
{
    if (source == null)
        throw new ArgumentNullException("source");
    if (selector == null)
        throw new ArgumentNullException("selector");

    int num = 0;
    foreach (T item in source)
        num += selector(item);
    return num;
} 
```

我的测量结果证实了我的想法：

*   `SlowSum(lambda)`: 12 毫秒
*   `FastSum(lambda)`: 9 毫秒

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-13T07:44:26.357

仅仅晚了十年，但...

我已经研究过 Linq 替换（[nuget](https://www.nuget.org/packages/Cistern.ValueLinq)，[github](https://github.com/manofstick/Cistern.ValueLinq)），它（主要是！）替代 System.Linq （只需添加 nuget 包，然后更改`using System.Linq`为`using Cistern.ValueLinq`），但使用值类型和一些技巧.

无论如何，就目前`Sum`而言，它在可能的地方使用了 SIMD 指令（仍然尊重溢出）。

下面的结果运行在与原始 stackoverflow 问题一样旧的机器上，因此现代机器甚至应该有更好的结果（尽管对于非 SIMD 能够 IEnumerable，您确实会获得一些开销）

```
public enum ContainerTypes { Enumerable, Array, List, }

[MemoryDiagnoser]
public class Benchmarks
{
    IEnumerable<int> _data;

    [Params(ContainerTypes.Array, ContainerTypes.Enumerable, ContainerTypes.List)]
    public ContainerTypes ContainerType { get; set; } = ContainerTypes.Enumerable;

    [GlobalSetup]
    public void SetupData()
    {
        var data = System.Linq.Enumerable.Range(0, 1000);
        _data = ContainerType switch
        {
            ContainerTypes.Enumerable => data,
            ContainerTypes.Array => System.Linq.Enumerable.ToArray(data),
            ContainerTypes.List => System.Linq.Enumerable.ToList(data),
            _ => throw new Exception("Unknown ContainerType")
        };
    }

    [Benchmark(Baseline = true)] public int System_Linq_Sum() => System.Linq.Enumerable.Sum(_data);
    [Benchmark] public int System_Linq_Sum_Predicate() => System.Linq.Enumerable.Sum(_data, c => c);
    [Benchmark] public int System_Linq_Aggregate() => System.Linq.Enumerable.Aggregate(_data, 0, (result, element) => result + element);
    [Benchmark] public int Cistern_ValueLinq_Sum() => Cistern.ValueLinq.Enumerable.Sum(_data);
    [Benchmark] public int Cistern_ValueLinq_Sum_Predicate() => Cistern.ValueLinq.Enumerable.Sum(_data, c => c);
    [Benchmark] public int Cistern_ValueLinq_Aggregate() => Cistern.ValueLinq.Enumerable.Aggregate(_data, 0, (result, element) => result + element);

    static void Main(string[] args) => BenchmarkRunner.Run<Benchmarks>();
} 
```

| 方法 | 容器类型 | 意思是 | 错误 | 标准差 | 中位数 | 比率 | 比率标准差 | 0代 | 第一代 | 第 2 代 | 已分配 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| System_Linq_Sum | 可枚举 | 6.025 我们 | 0.1155 我们 | 0.1501 我们 | 6.041 我们 | 1.00 | 0.00 | 0.0076 | - | - | 40乙 |
| System_Linq_Sum_Predicate | 可枚举 | 8.731 我们 | 0.1727 我们 | 0.3681 我们 | 8.742 我们 | 1.45 | 0.08 | - | - | - | 40乙 |
| System_Linq_Aggregate | 可枚举 | 8.534 我们 | 0.1683 我们 | 0.3514 我们 | 8.657 我们 | 1.42 | 0.07 | - | - | - | 40乙 |
| Cistern_ValueLinq_Sum | 可枚举 | 6.907 我们 | 0.1369 我们 | 0.3061 我们 | 6.911 我们 | 1.15 | 0.07 | 0.0076 | - | - | 40乙 |
| Cistern_ValueLinq_Sum_Predicate | 可枚举 | 9.769 我们 | 0.1907 我们 | 0.1784 我们 | 9.823 我们 | 1.62 | 0.04 | - | - | - | 40乙 |
| Cistern_ValueLinq_Aggregate | 可枚举 | 9.295 我们 | 0.1847 我们 | 0.4962 我们 | 9.396 我们 | 1.52 | 0.08 | - | - | - | 40乙 |
|  |  |  |  |  |  |  |  |  |  |  |  |
| System_Linq_Sum | 大批 | 6.731 我们 | 0.1343 我们 | 0.3653 我们 | 6.814 我们 | 1.00 | 0.00 | 0.0076 | - | - | 32乙 |
| System_Linq_Sum_Predicate | 大批 | 9.432 我们 | 0.1873 我们 | 0.5065 我们 | 9.685 我们 | 1.41 | 0.11 | - | - | - | 32乙 |
| System_Linq_Aggregate | 大批 | 9.494 我们 | 0.1890 我们 | 0.4707 我们 | 9.759 我们 | 1.41 | 0.11 | - | - | - | 32乙 |
| Cistern_ValueLinq_Sum | 大批 | 1.404 我们 | 0.0279 我们 | 0.0710 我们 | 1.436 我们 | 0.21 | 0.02 | - | - | - | - |
| Cistern_ValueLinq_Sum_Predicate | 大批 | 4.064 我们 | 0.0811 我们 | 0.0996 我们 | 4.087 我们 | 0.61 | 0.04 | - | - | - | - |
| Cistern_ValueLinq_Aggregate | 大批 | 3.549 我们 | 0.0709 我们 | 0.1496 我们 | 3.584 我们 | 0.53 | 0.04 | - | - | - | - |
|  |  |  |  |  |  |  |  |  |  |  |  |
| System_Linq_Sum | 列表 | 11.779 我们 | 0.2344 我们 | 0.3048 我们 | 11.854 我们 | 1.00 | 0.00 | - | - | - | 40乙 |
| System_Linq_Sum_Predicate | 列表 | 14.227 我们 | 0.2842 我们 | 0.6919 我们 | 14.601 我们 | 1.22 | 0.05 | - | - | - | 40乙 |
| System_Linq_Aggregate | 列表 | 13.852 我们 | 0.2761 我们 | 0.7418 我们 | 14.249 我们 | 1.17 | 0.06 | - | - | - | 40乙 |
| Cistern_ValueLinq_Sum | 列表 | 1.437 我们 | 0.0288 我们 | 0.0835 我们 | 1.471 我们 | 0.12 | 0.01 | - | - | - | - |
| Cistern_ValueLinq_Sum_Predicate | 列表 | 3.672 我们 | 0.0732 我们 | 0.1941 我们 | 3.771 我们 | 0.32 | 0.02 | - | - | - | - |
| Cistern_ValueLinq_Aggregate | 列表 | 3.597 我们 | 0.0718 我们 | 0.1880 我们 | 3.698 我们 | 0.31 | 0.02 | - | - | - | - |

# actionscript-3 - 检测对象是否有孩子

> ID：11030113
> 
> 赞同：0
> 
> 时间：2012-06-14T09:19:02.940
> 
> 标签：actionscript-3

我有以下问题，我必须知道一个元素是否有孩子。如果对象看起来被跟随：

```
Object [
    Object[["name" : "lisa"], ["age" : "14"], ["gender" : "female"]],
    Object[["name" : "bjorn"], ["age" : "40"], ["gender" : "male"]],
    Object[["name" : "zoe"], ["age" : "24"], ["gender" : "female"]]
] 
```

如果如下所示，它应该遵循 1 条路线：

```
 Object[["name" : "lisa"], ["age" : "14"], ["gender" : "female"]] 
```

它应该遵循另一条路线。通常，第一个示例对象是第二个示例对象的集合。换句话说：

```
if (example 1) {
 ...do this...
} else if (example 2) {
 ...do that...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:39:35.273

你的语法看起来很奇怪。定义对象（例如哈希图）的正常方式是

```
var myObj:* = {}
//Or if it's an array, as in your case;
var myArr:Array = [{name: "lisa", age:14, gender:"female"}, {...etc}] 
```

但是，没有简单的方法可以查看对象是否有条目。这就是我通常的做法；

```
var hasEntries:Boolean = false;
for(var key:String in myObj) {
  hasNodes = true;
  break;
} 
```

# iphone - UIActionSheet 需要很长时间才能响应

> ID：11030114
> 
> 赞同：6
> 
> 时间：2012-06-14T09:19:13.293
> 
> 标签：iphone, objective-c, ios, uiview, uiactionsheet

我正在创建一个`UIActionSheet`on actionSheet:clickedButtonAtIndex 委托方法。

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex     
 if(buttonIndex == 1){

        [self.myFirstView removeFromSuperview]; 

        if (!self.mySecondView) {
            [[NSBundle mainBundle] loadNibNamed:@"MySecondView" owner:self options:nil];
        }
        [self.mySecondView setFrame:CGRectMake(0, 0, 320, 480)];

        [[UIApplication sharedApplication].keyWindow addSubview: self.mySecondView];

        UIActionSheet * action = [[UIActionSheet alloc]initWithTitle:@""
                                                            delegate:self
                                                   cancelButtonTitle: nil
                                              destructiveButtonTitle: deleteContacts
                                                   otherButtonTitles: cancel, nil];
        action.tag = 102;
        [action showInView:self.view];
        [action release];

    } 
```

`UIActionSheet`我以与上述完全相同的方法处理此点击事件。

```
if(actionSheet.tag == 102){

    if(buttonIndex == 0){
        if([[NSBundle mainBundle] loadNibNamed:@"MyThirdView" owner:self options:nil]) { 
            [self.myThirdView setFrame:CGRectMake(0, 0, 320, 480)];
            [[UIApplication sharedApplication].keyWindow addSubview:self.myThirdView];
        }
        [self.mySecondView removeFromSuperview]; 

        [self.doneButton.target performSelector:self.doneButton.action withObject:self.doneButton.target];

        [self performSelector:@selector(RemoveView) withObject:self afterDelay:3.0];

    }
} 
```

我面临的问题是，`UIActionSheet`需要太多时间来响应。当我点击`UIActionSheet`按钮时，它在`myThirdView`加载前处于冻结状态 2 或 3 秒。我无法理解，这种情况下的响应延迟是什么，因为我在`UIActionSheet`按钮单击事件方法中做的第一件事就是加载`myThirdView`。其余代码仅在加载 myThirdView 的代码之后执行。但即使是第一行代码似乎也会在延迟后执行。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T13:12:56.483

用户界面操作在主线程中运行，并且仅在您的方法结束时发生。因此，`MyThirdView`在其他指令完成之前不会出现。我唯一能想到的就是延迟：

```
[self.doneButton.target performSelector:self.doneButton.action withObject:self.doneButton.target]; 
```

如果您正在做任何繁重的计算或净连接，那肯定是原因。

OTOH，我认为您最好修改该行：

```
[self.doneButton.target performSelector:self.doneButton.action withObject:self.doneButton]; 
```

如果要模拟按钮触摸动作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T09:33:19.787

这也许是由于这个

```
[self performSelector:@selector(RemoveView) withObject:self afterDelay:3.0]; 
```

制作其他方法并在该方法中执行此操作。像这样

```
[self viewRemover]; 
```

并在 viewRemover

```
-(void) viewRemover
{
    [self performSelector:@selector(RemoveView) withObject:self afterDelay:3.0];

} 
```

所以你的代码现在会是这样的

```
if(actionSheet.tag == 102){

    if(buttonIndex == 0){
        if([[NSBundle mainBundle] loadNibNamed:@"MyThirdView" owner:self options:nil]) { 
            [self.myThirdView setFrame:CGRectMake(0, 0, 320, 480)];
            [[UIApplication sharedApplication].keyWindow addSubview:self.myThirdView];
        }
        [self.mySecondView removeFromSuperview]; 

        [self.doneButton.target performSelector:self.doneButton.action withObject:self.doneButton.target];

    [self performSelectorInBackground:@selector(viewRemover) withObject:nil];

    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T19:12:17.340

问题。UIActionSheet 是否冻结，或者它是否消失并且第三个视图在 2-3 秒内不可见？

这可能是由于 2 个问题中的 1 个。

1.  如果整个操作表冻结，那么当您初始化第三个视图时，您正在做一些繁重的工作，您正在加载一些核心数据，或者大量资产，或者需要很长时间的东西。如果是这种情况，您需要重新格式化加载第三个视图的方式。我建议将任何繁重的负载推到后台（这意味着如果您的 xib 中有很多图像，您可能需要在代码中加载它们）。

2.  另一种可能性是，您要在第二个视图下方添加第三个视图，然后在 3 秒内不隐藏第二个视图（通过延迟执行选择器来完成）。如果是这种情况，只需删除延迟。

我做了几个类来帮助我计时执行并找到我的代码中的瓶颈，现在它们似乎可以帮助你。 [http://forrst.com/posts/Code_Execution_Timer_for_iOS_Development-dSJ](http://forrst.com/posts/Code_Execution_Timer_for_iOS_Development-dSJ)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T22:39:51.617

你的第三个视图有多大。如果 nib 文件需要加载太多，您可能会等待很多事情发生，此外，如果您必须更改一些 UI 元素并阻塞 UI 线程，您将拖拉您的应用程序，直到发生超时并且应用程序将转移有些东西要补偿。。

我采取的路线是 dispatch_async 和 dispatch_sync

```
// This will release the UI thread which may be blocking your calls.
// You can use any of the DISPATCH_QUEUE_PRIORITY_.... values to set how important this block is.
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
    // this command will get added to the stack and return without a hitch.
    // the block will be run the next time the main runloop ends.
    dispatch_async(dispatch_get_main_queue(), ^{
        // do some UI work that can happen without a hitch, and does not impact the calling block
    });

    // this command will act much the same. but will pause the background execution 
    // of this block until the runloop has executed this and returned.
    dispatch_sync(dispatch_get_main_queue(), ^{
        // do some UI work that must be completed to continue.
    });

}); 
```

在 UI 线程中做太多事情会暂停执行堆积在队列中的事情。将所有代码发送到后台线程并仅在您需要更改 UI 时才跳到 UI 线程，这是编写 iPhone 应用程序的更好且响应速度更快的方式。

我希望这有帮助 ：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-11T06:37:47.423

在 Swift 4 中：我用这个块包装了代码

```
DispatchQueue.main.async {

// your code to show action sheet.

} 
```

例如

```
DispatchQueue.main.async {

            let alert = UIAlertController(title: "Options", message: String("What do want to do?"), preferredStyle: UIAlertController.Style.actionSheet)

            alert.addAction(UIAlertAction(title: "Open", style: UIAlertAction.Style.default, handler: {(action:UIAlertAction!) in
                self.myOpen(code: self.codes[indexPath.row])
            }))
            alert.addAction(UIAlertAction(title: "Delete", style: UIAlertAction.Style.default, handler: {(action:UIAlertAction!) in
                self.myDelete(indexPath: indexPath)
            }))
            alert.addAction(UIAlertAction(title: "Cancel", style: UIAlertAction.Style.default, handler: {(action:UIAlertAction!) in
                print("Cancel")
            }))

            self.present(alert, animated: true, completion: nil)

        } 
```

# xaml - Intellisense 不适用于 VS2012 中的 XAML，并且仅部分适用于 Blend

> ID：11030118
> 
> 赞同：1
> 
> 时间：2012-06-14T09:19:53.380
> 
> 标签：xaml, intellisense, visual-studio-2012

我正在尝试让 Visual Studio 2012 的 RC 用于 XAML 文件。我似乎无法获得任何 XAML Intellisense，并且“工具”中的选项显示为灰色。

我也尝试过使用 Blend 来运行该解决方案，但是我只获得了用于自定义控件（例如 Telerik）的 Intellisense。

![Blend中的部分智能感知](../Images/bc69798668be47ee40a450f5116d5e8f.png)

每当我将控件拖到设计图面上时，我都会收到“对象引用未设置为对象的实例”异常，但该控件仍会添加到图面。

我读过这是 VS11 中的一个错误，并已在 Visual Studio 2012 RC 中修复。

我创建了一个新的 Silverlight 应用程序并且智能感知正在工作，所以我想知道它是否与我的项目设置方式有关。

我的所有样式都在一个单独的主题项目中，其他所有其他项目都引用了该项目。在设计器中，这些引用显示为错误，但当应用程序运行时，它们会被很好地解决。

设计时未解决的资源会影响 Intellisense 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T01:41:22.290

单击“构建 -> 清洁解决方案”，然后单击“构建 -> 构建解决方案”。（“重建解决方案”单独不起作用。）[[来源]](http://connect.microsoft.com/VisualStudio/feedback/details/730869/xaml-intellisense-not-working-in-vs11-beta)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T08:27:19.930

如果您引用了任何用于交互的表达式混合 dll，并且您使用的是 silverlight5，则需要更新以下 dll：

*   Microsoft.Expression.Controls.dll
*   Microsoft.Expression.Effects.dll
*   Microsoft.Expression.Interactions.dll
*   System.Windows.Interactivity.dll

适用于 Microsoft Visual Studio 2012 的 Blend + SketchFlow 预览 [http://www.microsoft.com/en-us/download/details.aspx?id=30702](http://www.microsoft.com/en-us/download/details.aspx?id=30702)

参考位置：C:\Program Files (x86)\Microsoft SDKs\Expression\Blend\Silverlight\v5.0\Libraries

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T16:31:01.443

这里完全相同的问题，使用 WPF。

就我而言，删除：

```
<Page.Resources>
    <vm:AnyViewModel x:Key="anyViewModel" />
</Page.Resources> 
```

解决我的问题...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T00:38:31.947

XAML Intellisense 失败的一个已知原因是`System.Windows.Controls.Toolkit`项目引用之一。我已经看到删除该引用可以立即解决问题的地方。该问题在 VS2012 Beta 的[此 Connect 错误](http://connect.microsoft.com/VisualStudio/feedback/details/730869/xaml-intellisense-not-working-in-vs11-beta)的评论中进行了描述，但它也适用于 7 月更新的 RC。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-09T19:53:51.537

我发现某些控件的 xaml 设计器存在此问题，而其他控件则很好。

问题（在我的情况下）似乎是参数是否为空或事件调用未初始化的单例。设计师给你一个堆栈跟踪和其他计时器渲染没有问题。

我发现通过更改没有 Intelli-sense 的页面的后端代码以包含 DesignerProperties 始终可以解决问题（在我的情况下）。

```
public Homing()
{
    InitializeComponent();

    if (DesignerProperties.GetIsInDesignMode(this))
        return;

    // some other code here that may have uninitialized members
} 
```

吨

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-02T14:46:53.997

我不确定我是否有同样的问题，但 Intellisense 神秘地停止在 XAML 文件中为我工作。我尝试按照某人的建议清理构建，但这没有用。

在我重新启动 Visual Studio 2013 后，XAML 页面中的 Intellisense 再次开始工作。

# objective-c - 检查 iOS XCode 项目文件：openGL Particle Emitter for GLKit

> ID：11030128
> 
> 赞同：1
> 
> 时间：2012-06-14T09:20:26.013
> 
> 标签：objective-c, ios, opengl-es-2.0, eaglview, particle-system

我正在尝试将 Michael Daley 的 Particle Emitter 移植到 GLKView 并找到了一个[XCode 项目，他在 github 上做了这个](https://github.com/71squared/GLKit_TD3D)- 不幸的是，它被严重绑定在一个不错的小游戏中。

现在我尝试只将粒子发射器从他的游戏项目中取出来重新使用它（我需要它在 2D 中）并且我将它设置为没有任何编译错误的状态 - 但什么也看不到......

[这是项目文件](https://dl.dropbox.com/u/2896178/openGL_Particle_Emitter.zip)。谁能告诉我为什么没有可见的粒子发射器？谢谢！

# ruby-on-rails - Ruby 的 Mix-in 链接无法正常工作

> ID：11030129
> 
> 赞同：2
> 
> 时间：2012-06-14T09:20:35.267
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在 Windows 上使用 Ruby 1.9.3。所以我想通过`Kernel`类添加在控制台中可用的方法。启动控制台。

```
module Foo
  def bar
    puts "Method is in scope!!!"
  end
end 
```

将其添加到`Kernel`（这是`Object`类的一部分）之后

```
irb(main):008:0> Kernel.send(:include, Foo)
=> Kernel
irb(main):009:0> bar
"NameError: undefined local variable or method `bar' for main:Object"
# did not work, we need to re-include Kernel in Object class
irb(main):010:0> Object.send(:include, Kernel)
=> Object
irb(main):011:0> bar
Method is in scope!!!
=> nil
irb(main):012:0> 
```

这应该只适用于`Kernel.send(:include, Foo)`还是我错了？我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T09:27:13.387

是的，在这种情况下，您应该`Object`直接扩展。但是，如果您愿意，可以扩展`Kernel`，只是不要忘记再次将其重新包含到 Object 中。

```
module Foo
  def bar
    puts "Method is in scope!!!"
  end
end

Kernel.send :include, Foo
# bar at this point will generate error

Object.send :include, Kernel
bar
# >> Method is in scope!!! 
```

另外，请参阅[此答案](https://stackoverflow.com/a/9240443/125816)以获得更全面的解释。

# core-data - 如何将 CoreData 模型文件 .momd 添加到 MonoTouch 项目中

> ID：11030135
> 
> 赞同：1
> 
> 时间：2012-06-14T09:20:55.010
> 
> 标签：core-data, binding, xamarin.ios

MonoTouch 解决方案包括两个项目。

*   MonoTouch Binding Project：链接原生 ObjC 库的 API 合约接口
*   测试客户端应用程序

本机 ObjC 库需要包含核心数据模型文件 (.momd)。我已将其添加到 Test App 的项目中。

但是应用程序崩溃并出现以下错误：

```
 Unhandled Exception: MonoTouch.Foundation.MonoTouchException: Objective-C exception thrown.  Name: NSInvalidArgumentException Reason: Cannot create an NSPersistentStoreCoordinator with a nil model
  at (wrapper managed-to-native) MonoTouch.ObjCRuntime.Messaging:void_objc_msgSendSuper_IntPtr_bool (intptr,intptr,intptr,bool)
  at MonoTouch.UIKit.UIViewController.PresentModalViewController (MonoTouch.UIKit.UIViewController modalViewController, Boolean animated) [0x00038] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIViewController.g.cs:261 
  at CombinedControllerApp.MainController.<ViewDidLoad>m__2 (System.Object , System.EventArgs ) [0x0003d] in /Users/mahmood1/Documents/Projects/TouchNote-Prototype/CombinedControllerApp/MainController.cs:96 
  at MonoTouch.UIKit.UIControlEventProxy.Activated () [0x00000] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIControl.cs:30 
  at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication:UIApplicationMain (int,string[],intptr,intptr)
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x00042] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:29 
  at CombinedControllerApp.Application.Main (System.String[] args) [0x00000] in /Users/mahmood1/Documents/Projects/TouchNote-Prototype/CombinedControllerApp/Main.cs:17 
[ERROR] FATAL UNHANDLED EXCEPTION: MonoTouch.Foundation.MonoTouchException: Objective-C exception thrown.  Name: NSInvalidArgumentException Reason: Cannot create an NSPersistentStoreCoordinator with a nil model
  at (wrapper managed-to-native) MonoTouch.ObjCRuntime.Messaging:void_objc_msgSendSuper_IntPtr_bool (intptr,intptr,intptr,bool)
  at MonoTouch.UIKit.UIViewController.PresentModalViewController (MonoTouch.UIKit.UIViewController modalViewController, Boolean animated) [0x00038] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIViewController.g.cs:261 
  at CombinedControllerApp.MainController.<ViewDidLoad>m__2 (System.Object , System.EventArgs ) [0x0003d] in /Users/mahmood1/Documents/Projects/TouchNote-Prototype/CombinedControllerApp/MainController.cs:96 
  at MonoTouch.UIKit.UIControlEventProxy.Activated () [0x00000] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIControl.cs:30 
  at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication:UIApplicationMain (int,string[],intptr,intptr)
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x00042] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:29 
  at CombinedControllerApp.Application.Main (System.String[] args) [0x00000] in /Users/mahmood1/Documents/Projects/TouchNote-Prototype/CombinedControllerApp/Main.cs:17 
```

如何将此所需的 CoreData 模型文件添加到测试应用程序中，以便对本机库可见？

谢谢！

（来源在这里：[http](http://www.axifile.com/en/71EC96914A) ://www.axifile.com/en/71EC96914A ）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:47:29.507

根据我的评论：

`Build Action`使用of将大多数这样的文件添加到您的项目`Content`中将解决该问题。

# ruby - 为什么这个未使用的字符串没有被垃圾收集？

> ID：11030139
> 
> 赞同：4
> 
> 时间：2012-06-14T09:21:30.133
> 
> 标签：ruby, string, garbage-collection

为什么unused_variable_2 和unused_variable_3 会被垃圾回收，但unused_variable_1 不会？

```
# leaky_boat.rb
require "memprof"

class Boat
  def initialize(string)
    unused_variable1 = string[0...100]
    puts unused_variable1.object_id
    @string = string
    puts @string.object_id
  end
end

class Rocket
  def initialize(string)
    unused_variable_2 = string.dup
    puts unused_variable_2.object_id
    unused_variable_3 = String.new(string)
    puts unused_variable_3.object_id
    @string = string
    puts @string.object_id
  end
end

Memprof.start

text = "a" * 100
object_id_message = "Object ids of unused_variable_1, @string, unused_variable_2, unused_variable_3, and another @string"
before_gc_message = "Before GC"
after_gc_message = "After GC"
puts object_id_message
boat = Boat.new(text)
rocket = Rocket.new(text)
puts before_gc_message
Memprof.stats
ObjectSpace.garbage_collect
puts after_gc_message
Memprof.stats
Memprof.stop 
```

运行程序：

```
$ uname -a
Linux [redacted] 3.2.0-25-generic #40-Ubuntu SMP Wed May 23 20:30:51 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux
$ ruby --version # Have to use Ruby 1.8 - memprof doesn't work on 1.9
ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux]
$ ruby -rubygems leaky_boat.rb 
Object ids of unused_variable_1, @string, unused_variable_2, unused_variable_3, and another @string
70178323299180
70178323299320
70178323299100
70178323299060
70178323299320
Before GC
      2 leaky_boat.rb:6:String
      2 leaky_boat.rb:26:String
      1 leaky_boat.rb:9:String
      1 leaky_boat.rb:7:String
      1 leaky_boat.rb:32:Rocket
      1 leaky_boat.rb:31:Boat
      1 leaky_boat.rb:29:String
      1 leaky_boat.rb:28:String
      1 leaky_boat.rb:27:String
      1 leaky_boat.rb:20:String
      1 leaky_boat.rb:18:String
      1 leaky_boat.rb:17:String
      1 leaky_boat.rb:16:String
      1 leaky_boat.rb:15:String
After GC
      1 leaky_boat.rb:6:String
      1 leaky_boat.rb:32:Rocket
      1 leaky_boat.rb:31:Boat
      1 leaky_boat.rb:29:String
      1 leaky_boat.rb:28:String
      1 leaky_boat.rb:27:String
      1 leaky_boat.rb:26:String 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T20:31:46.320

这种行为是因为您的 ruby​​ for substr 版本的字符串实现有一个特殊情况来节省内存分配，当您采用作为源字符串尾部的 substr 并且字符串长度足够大而不能将字符串值存储在基础对象结构。

如果您跟踪代码，您会看到范围下标`string[0...100]`将通过[rb_str_substr 中的此子句](https://github.com/ruby/ruby/blob/v1_8_7_352/string.c#L628)。因此，新字符串将通过[str_new3](https://github.com/ruby/ruby/blob/v1_8_7_352/string.c#L139)分配，它分配一个新的对象结构（因此不同的 object_id），但将字符串值`ptr`字段设置为指向源对象的扩展存储的指针，并设置`ELTS_SHARED`标志以指示新对象与另一个对象。

在您的代码中，您获取这个新的子字符串对象并将其分配给实例 var `@string`，当您运行垃圾收集时，它仍然是一个实时引用。由于对原始字符串的分配存储有实时引用，因此无法收集它。

在 ruby​​ 主干中，这种在兼容的尾子字符串上共享存储的优化似乎仍然存在。

另外两个 var`unused_variable_2`并`unused_variable_3`没有这种扩展存储共享问题，因为它们是通过确保不同存储的机制设置的，因此当它们的引用超出范围时，它们会按预期进行垃圾收集。

String#dup 运行[rb_str_replace](https://github.com/ruby/ruby/blob/v1_8_7_352/string.c#L2308)（通过[initialize_copy 绑定](https://github.com/ruby/ruby/blob/v1_8_7_352/string.c#L4936)），它将源字符串的内容替换为源字符串内容的副本，并确保不共享存储。

String#new(source_str) 通过[rb_str_init](https://github.com/ruby/ruby/blob/v1_8_7_352/string.c#L337)运行，它同样确保在提供的初始值上使用 rb_str_replace 进行不同的存储。

# c# - 从 jQuery 调用 web 方法时出错

> ID：11030140
> 
> 赞同：0
> 
> 时间：2012-06-14T09:21:36.500
> 
> 标签：c#, jquery, json

我正在从 jQuery 调用 WebMethod，执行以下操作：

```
 function WebMethod(fn, paramArray, successFn, errorFn) {
    var paramList = {};
    if (paramArray.length > 0) {
        for (var i = 0; i < paramArray.length; i += 2) {
            paramList[paramArray[i]] = paramArray[i + 1];
        }
    }

    var params = $.toJSON(paramList);

    $.ajax({
        type: 'POST',
        url: '../../PricingEngine/ContractView.aspx' + '/' + fn,
        contentType: 'application/json; charset=utf-8',
        data: params,
        dataType: 'json',
        success: successFn,
        error: function(xhr, status, error) {
            // Display a generic error for now.
            alert("AJAX Error!");
        }
    });
}

// Used returned object to populate every field
function updateTextFields(result) {
    //do some processing here
}

function failed(result) {
    alert('failed');

}

// EVENTS
// ------------------------------------------------------------

$(".editableField").keydown(function(e) {

    WebMethod('PriceContract',
                    [
                     'AQ', aq.val(),
                     'SOQ', soq.val()
                    ], updateTextFields, failed);

}); 
```

.toJSON 之后的 JSON 字符串已被调用：

> {"AQ":"140000","SOQ":"1169"}

**C#方法**

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public static ContractsListPricing PriceContract(string AQ, string SOQ)
{
    ContractsListPricing clp = new ContractsListPricing();

    clp.Aq = 1;
    clp.Soq = 2;

    return clp;
} 
```

这将返回以下错误：

> 无效的 JSON：（后跟当前页面的完整 HTML）。

请不要注意 C# 中的逻辑，因为这还没有实现。我正在使用 jquery-json 插件来解析 JSON。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:26:28.743

您确定确切的网址是 '../../PricingEngine/ContractView.aspx' + '/' + fn 吗？

因为 ContractView.aspx 是您当前的网页

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T15:53:27.483

我已经运行了您的代码演示并使其正常工作。您是否检查过您的 web.config 中正确设置了 ScriptModule 处理程序？

# ios - iOS 中的 UITextField 和键盘管理问题

> ID：11030142
> 
> 赞同：1
> 
> 时间：2012-06-14T09:21:41.830
> 
> 标签：ios, keyboard, return, hide

（我目前的目标是 iOS 2.0。）

我有一个子类 UITextField 并实现 UITextFieldDelegate 协议。

一开始我没有设置类为自己的委托，当我在字段中点击时，键盘自动弹出。到目前为止，一切都很好。

我使用 UIReturnKeyDone 发送 setReturnKeyType: 消息，因此它会将右下角的按钮更改为“完成”。

问题是，当我点击完成或按下 [Return] 时，什么都没有发生 - 键盘不会消失。

我尝试将 self 添加为结束编辑通知的观察者，但单击完成时它从未被调用；从谷歌搜索来看，似乎只有当该字段辞去第一响应者时才会被解雇——这是我无法做到的。

然后我在这里找到了建议添加 self 作为委托并处理 textFieldShouldReturn: 的答案。问题是，一旦我将 self 添加为委托，当您单击该字段时键盘不再弹出（并且它没有获得焦点） - 它似乎没有成为第一响应者。

我尝试处理 textFieldShouldBeginEditing: 并返回 YES （文档说如果没有被覆盖应该是默认值），这被调用了，但没有任何区别。在我的无知中，我尝试了 [textField becomeFirstResponder] 并获得了堆栈溢出的奖励（现在我知道这是为了响应*试图*成为第一响应者而调用的）。

我现在彻底卡住了！

任何人都可以帮忙吗？我只希望当用户单击完成或按 [Return] 时键盘消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:26:54.203

您是使用 xib 还是以编程方式进行操作？如果您使用的是 xib，那么您可能忘记在 File's Owner 中连接委托。

```
(BOOL)textFieldShouldReturn:(UITextField *)textField   
{
    [textField resignFirstResponder];
    return YES;
} 
```

试试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:05:40.933

我的错。事实证明，您不应该将文本字段的委托设置为自身 - 由于未处理的选择器被转发给其委托，因此存在复杂性。如果它没有响应选择器，则消息将发送给它的委托……这就是它本身，我们已经知道它没有响应。因此，无限循环。

使用单独的对象作为委托非常有效。

希望这将帮助其他人避免同样的问题。

# ruby-on-rails - Rails mobile-fu 如何为特定控制器呈现 html 视图

> ID：11030143
> 
> 赞同：0
> 
> 时间：2012-06-14T09:21:41.770
> 
> 标签：ruby-on-rails, mobile

在我的 Rails 应用程序中，我使用 mobile-fu 插件来呈现移动视图。对于特定的控制器，我还需要在移动浏览器的 .html 视图中显示数据。如何切换特定控制器的桌面视图。

导轨版本 3.2.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:14:35.757

添加以下行以更改特定控制器中的格式

```
...
before_filter :clear_mobile_format

...
private
  def clear_mobile_format
    request.format = :html
  end 
```

# excel - 在excel中根据日期和名称求和数字

> ID：11030144
> 
> 赞同：1
> 
> 时间：2012-06-14T09:21:46.667
> 
> 标签：excel

总结第三列（数字o公司）我用过这个
`=SUM(1/COUNTIF(Names;Names))`

Names 是 C 列和 CTRL+SHIFT+ENTER 中数组的名称，它工作得很好。

现在我想对每家公司的收益进行一次汇总，并使用最新数据。例如，结果应该是这样的

`=C4+C6+C7+C8+C9+C10`
(93)

谢谢

```
 A     B         C         D 
1    #  company    earnings  date
2    1    ISB       12    10/11/2011
3    2    DTN       15    11/11/2011
4    3    ABC       13    12/11/2011
5    4    ISB       17    13/11/2011
6    5    RTV       18    14/11/2011
7    6    DTN       22    15/11/2011
8    7    PVS       11    16/11/2011
9    8    ISB       19    17/11/2011
10   9    ANH       10    18/11/2011
Sum        6        93 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T10:53:41.993

假设升序日期，您可以尝试在 C11 中使用 CTRL+SHIFT+ENTER：

```
=SUM((MAX(A2:A10)-MATCH(B2:B10,LOOKUP(MAX(A2:A10)-A2:A10,A2:A10-1,B2:B10),0)=A2:A10-1)*C2:C10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:13:05.617

我建议使用帮助列作为最简单的方法。在 E2 中使用这个公式

`=IF(COUNTIF(B2:B$1000,B2)=1,C2,"")`

并复制该列。现在对 D 列求和以获得所需的答案。

请注意，上面的公式假设最多 1000 行数据，如果需要，可以增加。

# android - 如何在平板电脑上禁用 select2 jQuery 插件？

> ID：11030145
> 
> 赞同：5
> 
> 时间：2012-06-14T09:21:50.350
> 
> 标签：android, jquery, ios, detection, tablet

我正在使用[Select2](http://ivaynberg.github.com/select2/) jQuery 插件来增强`<select>`我们项目中的元素。但是，在移动设备（智能手机、平板电脑）上，Select2 实际上会降低体验。在我看来，本机选择元素更好。

我们已经使用来自[http://detectmobilebrowser.com/](http://detectmobilebrowser.com/)的正则表达式进行智能手机检测，但这些与平板电脑不匹配（我们希望将智能手机和平板电脑检测分开）。有没有关于像detectmobilebrowswer.com这样的平板电脑正则表达式的参考，或者其他检测平板电脑的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-06T08:08:54.227

```
$(document).ready(function() {
    // run test on initial page load
    checkSize();

    // run test on resize of the window
    $(window).resize(checkSize);
});

function checkSize(){
  if (window.matchMedia("(min-width: 1024px)").matches) {
    $("select").select2();
  } else {
    $("select").select2("destroy");
  }
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-14T09:38:08.553

你可以自己研究一下表的用户代理是什么。

如果您知道表格的用户代理，您可以通过 PHP 或其他方式相应地包含适当的 Javascript 文件。

[按照此链接查找平板电脑用户代理](http://tinyurl.com/cuj8fag)

# jquery - 加载内容ajax jquery

> ID：11030147
> 
> 赞同：1
> 
> 时间：2012-06-14T09:21:50.713
> 
> 标签：jquery, ajax

目前，当我使用 jQuery Ajax 加载一些内容时。这会加载整个页面并仅返回我的内容。问题是我不想加载整个页面。我只想加载此页面的此内容而不加载整个页面。

```
 $('#single').load(href+' #single-content', function() { 

  }); 
```

此函数加载整个`href`页面并返回`#single-content`.

有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T09:27:48.303

**不可能**只加载页面的一小部分然后返回那一小部分。`#single-content`这是因为如果请求没有完全加载页面并且它是否位于页面中，则请求无法知道“ ”在页面中的位置。

`#single-content`如果您出于性能原因只想加载“ ”，我建议您**创建一个新页面**，在其中加载仅包含“ `#single-content`”的内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:31:35.667

您在 Web 服务器上选择的语言是什么？你的工作必须达到那个水平。因此，如果您使用 PHP，则必须修改页面逻辑，以便可以返回内容的谨慎部分而不是整个页面。

理想的方法是在服务器端创建模板。您将拥有一个包含整个 HTML 页面的主模板，然后在其中包含相关内容。然后，您的站点中的每个页面都将拥有更小的视图文件。这将允许您在服务器端语言中使用逻辑，可以选择使用包含页面内容的模板返回整个页面，或者只返回没有外部主模板的页面内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-02T15:10:12.350

```
 <!doctype html>
    <html lang="en">
    <head>
    <meta charset="utf-8">
    <title>load demo</title>
    <style>
    body {
    font-size: 12px;
    font-family: Arial;
    }
    </style>
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    </head>
    <body>
    <b>Projects:</b>
    <ol id="new-projects"></ol>
    <script>
    $( "#new-projects" ).load( "/resources/load.html #projects li" );
    </script>
    </body>
    </html>
```

此代码执行您想要的操作，它来自官方 jQuery 文档[http://api.jquery.com/load/](http://api.jquery.com/load/)（第一个示例），您可以像这里 http://api.jquery.com/load/ 一样加载和获取另一个页面（在同一域上）的[一部分/api.jquery.com/resources/load.html](http://api.jquery.com/resources/load.html)

# c++ - C/C++/ObjectiveC 之间的内存差异，程序在 codepad.org 上崩溃，但在 Linux 上没有

> ID：11030148
> 
> 赞同：0
> 
> 时间：2012-06-14T09:21:51.583
> 
> 标签：c++, objective-c, c, memory-management

前段时间我问自己，当我写这样的东西时：

```
 char* first(int howMany){
      return (char*)malloc(howMany);
   } 

   int main(){
      char*t;
      int one=20;
      t=first(20);  
   } 
```

此代码在[codepad.org](http://codepad.org/)崩溃，但在 Mepis Linux 11.04 中它只会引发一些警告。

但是如果我为 C++ 写这样的东西：

```
char* first(int howMany){
    return new char [howMany];
   }

int main(){
    char*t;
    int one=20;
    t=first(20);  
} 
```

此代码工作正常。

我的问题是：

为什么 C 代码不起作用以及发生了什么，当我尝试

`return (char*)malloc(howMany)`?

PS：如果我尝试在 Objective-C 中使用这个函数会发生什么？

```
(NSArray*) first(){
    return [NSArray array];
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T09:23:51.520

我在 codepad.org中没有*崩溃，它*[运行](http://codepad.org/TK9Rstyl)，但程序的退出状态指示错误。退出状态是未定义的，只是碰巧[在堆栈上](http://www.tenouk.com/Bufferoverflowc/Bufferoverflow2a.html)，退出值[（它恰好是 codepad.org 上的 120）](http://codepad.org/TK9Rstyl)来自您的程序没有从 main() 正确**返回**任何东西，就像它应该做的那样.

传统上，在 C 和 C++ 中，您必须从 main()显式**返回一些内容。**在后来的 C 和 C++ 标准中，这发生了变化，因此如果您在没有 return 语句的情况下退出 main()，它将自动返回 0。（0 表示成功。）

似乎发生的事情是你有一个尊重这个标准的 C++ 编译器，（标准 C++ 有这个规则比标准 C 更长的时间），如果 main() 没有返回任何东西，它默认返回 0。

相比之下，[codepad.org](http://codepad.org/)上的 C 编译器似乎遵循较旧的标准，其中 main() 必须具有显式的 return 语句才能使程序有效。因此，有人可能会争辩说您的程序失败是因为[codepad.org](http://codepad.org/)没有最新的 C 编译器，或者有人可能会争辩说您的程序应该更加保守，而不是假设现代编译器，而是从 main() 显式**返回。**

这就是 Mepis Linux 上的编译器向您发出警告的原因。它可能未配置为遵循最新标准，因此警告您应该使用**return**语句结束 main() 函数。

因此，如果您想编写适用于任何地方的保守代码，您的 main() 函数应[*始终*以**return**语句](https://stackoverflow.com/questions/204476/what-should-main-return-in-c-c)结尾。您的问题证明，如果您希望您的代码在“现实世界”中工作，依赖新标准的功能可能是危险的。

更改为 Objective C 可能会改变其他内容，但主要问题（双关语）仍然是您没有显式地从 main() 返回值以及 Objective C 的 C 部分在特定编译器中遵循的标准。

您没有释放内存，很可能会导致内存泄漏，但不是程序本身的错误，也不会影响您观察到的问题。（确实，在 Linux 上，退出程序会自动释放所有内存，这可能是一种草率的编程，但并非不正确。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T09:41:04.477

在这种情况下`C`和之间的一个重要区别是，在 中，如果没有显式返回，则函数返回。您的代码示例就是这种情况，因此无论任何代码错误如何，它都被视为在 C++ 中成功退出。`C++``C++``main``0`

# ios - 使用 url-scheme 从 iOS 中的浏览器在 Adob e Reader 中打开 pdf

> ID：11030151
> 
> 赞同：0
> 
> 时间：2012-06-14T09:22:00.460
> 
> 标签：ios, url-scheme

如果我检查这个：[http](http://schemes.zwapp.com/) ://schemes.zwapp.com/ iPad 中 Adob​​e Reader 的 url 方案是：com.adobe.Adobe-Reader：

所以我在我的网页中创建了一个指向：com.adobe.Adobe-Reader://mysite.com/sample.pdf

单击该链接会启动 Adob​​e Reader，但它不会从指定的 url 下载和打开 pdf。我尝试了链接的各种变体，包括：

com.adobe.Adobe-Reader://http://mysite.com/sample.pdf

com.adobe.Adobe-Reader://edit?url=http://mysite.com/sample.pdf

但这些都不起作用。Adobe Reader 打开，但没有打开 pdf（pdf 的链接很好，我通过在浏览器中单独打开检查）。

我究竟做错了什么？如何通过在浏览器锚链接中使用其 url 方案使应用程序打开特定文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:20:35.600

我不认为你做错了什么。根据[这个 Adob​​e 线程](http://forums.adobe.com/message/4418300)，Reader 应用程序不（尚）支持对特定 PDF 的链接引用，但可能会在未来的版本中。（或者如果确实如此，他们还没有告诉任何人如何）。

在该线程的底部有一个与 Adob​​e 的电子邮件联系人，可能会提供更多帮助和/或您可能会遇到错误，以便尽早而不是稍后实现此功能。

# jquery - 数据表中的列对齐

> ID：11030152
> 
> 赞同：2
> 
> 时间：2012-06-14T09:22:04.547
> 
> 标签：jquery, alignment

我正在使用`p:columnGroup`中的标题列`p:dataTable`。我在这个表中实现了一个垂直和水平滚动条。现在，当我将水平滚动到最右边时，由于垂直滚动条呈现在标题列下方，因此包含数据的列不会与标题列垂直对齐。因此对齐方式存在差异（间隙=垂直滚动条的宽度）

这是代码

```
<p:columnGroup id="columnGroup" type="header">
             <p:row>
        <p:column id="emptyColumnHeader">&nbsp;</p:column>
        <p:column colspan="3" headerText="General" />
        <p:column colspan="4" headerText="Article" />
        <p:column colspan="5" headerText="Sample" />
         </p:row> 
```

使用jquery实现滚动

```
var oTable2 = $($currentTableId).find('table').dataTable({

            "sScrollX" : "100%",
            "sScrollY" : "350",
            "bAutoWidth" : false,

            "bScrollCollapse" : true,
            "bPaginate" : false,
            "bSort" : false,
            "sInfo" : "",
            "sInfoEmpty" : ""
        });
        oTable2.height("200");
        var oFC = new FixedColumns(oTable2, {
            "iLeftColumns" : 4,
            "sHeightMatch" : "auto",
            "iLeftWidth" : 500
        }); 
```

任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T06:40:01.720

我遇到过类似的问题。并且几乎没有时间来解决它。这是一个帮助我的快速解决方案。

渲染数据表后，写下这两行：

```
// Considering your datatable id as 'myTableId'
$('#myTableId_next').click();
$('#myTableId_previous').click(); 
```

注意：这不是最好的解决方案，但绝对是一个快速的解决方案。

# c# - Windows 8 中的 USB 设备删除

> ID：11030157
> 
> 赞同：0
> 
> 时间：2012-06-14T09:22:28.323
> 
> 标签：c#, winforms, usb, wndproc

我有以下代码来检测基于 Prolific Serial 的 USB 设备的到达和移除。

```
 protected override void WndProc(ref Message m)
    {
        DBT changeType = (DBT)m.WParam;
        string portName;

        if (m.Msg == WM_DEVICECHANGE)// && changeType != DBT.OTHER)
        {
            switch (changeType)
            {
                case DBT.DEVICEREMOVAL:
                    portName = Marshal.PtrToStringAuto((IntPtr)((long)m.LParam + 12));
                    // Device Removal
                    break;
                case DBT.DEVICEARRIVAL:
                    portName = Marshal.PtrToStringAuto((IntPtr)((long)m.LParam + 12));
                    // Device Arrival
                    break;
            }
        }

        base.WndProc(ref m);
    }

    enum DBT
    {
        DEVICEARRIVAL = 0x8000,
        DEVICEREMOVAL = 0x8004,
        OTHER = 0x0007,
    } 
```

我的问题是，似乎 Removal 事件似乎永远不会在 Windows 8 中发送？此代码完美适用于 WinXp、Win2000、Vista 和 Win7。

在插拔设备时监控消息后，Win8似乎从未传递正确的移除消息？

下面是Win8下的结果：

检测：

```
HWnd=1770298, LParam=0, WParam=7, Result=0, Msg=537
HWnd=1770298, LParam=98820448, WParam=32768, Result=0, Msg=537
HWnd=1770298, LParam=0, WParam=7, Result=0, Msg=537 
```

移动：

```
HWnd=1770298, LParam=0, WParam=7, Result=0, Msg=537 
```

我所期待的：

检测：

```
HWnd=590440, LParam=0, WParam=7, Result=0, Msg=537
HWnd=590440, LParam=1241588, WParam=32768, Result=0, Msg=537
HWnd=590440, LParam=0, WParam=7, Result=0, Msg=537 
```

移动：

```
HWnd=590440, LParam=0, WParam=7, Result=0, Msg=537
HWnd=590440, LParam=1241588, WParam=32772, Result=0, Msg=537 
```

这最后一条消息永远不会到达Win8？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T16:31:12.460

我只是通过修改我的 USB 串行驱动程序解决了这个问题。通过正确配置在标准 usbser.sys 帮助上添加上层过滤器“serenum.sys”，因此问题消失了。

像这样的东西。来自生产代码的示例。

```
[Version]
Signature="$Windows NT$"
Class=Ports
ClassGuid={4D36E978-E325-11CE-BFC1-08002BE10318}
Provider=%MFGNAME%
LayoutFile=layout.inf
CatalogFile=%MFGFILENAME%.cat
DriverVer=08/29/2013,5.1.2600.10

[Manufacturer]
%MFGNAME%=DeviceList, NTamd64

[SourceDisksNames]

[DestinationDirs]
DefaultDestDir=12

;------------------------------------------------------------------------------
; Windows 2000/XP/Vista-32bit Sections
;------------------------------------------------------------------------------
[DriverInstall.nt]
include=mdmcpq.inf
CopyFiles=DriverCopyFiles.nt
AddReg=DriverInstall.nt.AddReg

[DriverInstall.nt.HW] 
AddReg=DriverInstall.nt.HW.AddReg 

[DriverInstall.nt.HW.AddReg]
HKR,,NTMPDriver,,*ntkern
HKR,,NTMPDriver,,usbser.sys
HKR,,PortSubClass, 0x00010000, "01"
HKR,,"UpperFilters",0x00010000,"serenum" 

[DriverCopyFiles.nt]
usbser.sys,,,0x20
serenum.sys,,,0x20

[DriverInstall.nt.AddReg]
HKR,,EnumPropPages32,,"MsPorts.dll,SerialPortPropPageProvider"

[DriverInstall.nt.Services]
AddService=usbser,  0x00000002, DriverService.nt
AddService=serenum, 0x00000000, SerenumService.nt

[DriverService.nt]
DisplayName="Driver name"
ServiceType=1
StartType=3
ErrorControl=1
ServiceBinary=%12%\%DRIVERFILENAME%.sys
LoadOrderGroup = Base

[SerenumService.nt]
DisplayName="Filter name"
ServiceType=1
StartType=3
ErrorControl=1
ServiceBinary=%12%\serenum.sys
LoadOrderGroup = PNP Filter

;------------------------------------------------------------------------------
; Vista-64bit Sections
;------------------------------------------------------------------------------

[DriverInstall.NTamd64]
include=mdmcpq.inf
CopyFiles=DriverCopyFiles.NTamd64
AddReg=DriverInstall.NTamd64.AddReg

[DriverCopyFiles.NTamd64]
usbser.sys,,,0x20
serenum.sys,,,0x20

[DriverInstall.NTamd64.AddReg]
HKR,,EnumPropPages32,,"MsPorts.dll,SerialPortPropPageProvider"

[DriverInstall.NTamd64.Services]
AddService=usbser, 0x00000002, DriverService.NTamd64
AddService=serenum, 0x00000000, SerenumService.NTamd64

[DriverService.NTamd64]
DisplayName="Driver display name"
ServiceType=1
StartType=3
ErrorControl=1
ServiceBinary=%12%\usbser.sys

[DriverInstall.NTamd64.HW] 
AddReg=DriverInstall.nt.HW.AddReg 

[DriverInstall.NTamd64.HW.AddReg]
HKR,,NTMPDriver,,*ntkern
HKR,,NTMPDriver,,usbser.sys
HKR,,PortSubClass, 0x00010000, "01"
HKR,,"UpperFilters",0x00010000,"serenum" 

[SerenumService.NTamd64]
DisplayName="Filter display name"
ServiceType=1
StartType=3
ErrorControl=1
ServiceBinary=%12%\serenum.sys

;------------------------------------------------------------------------------
; Vendor and Product ID Definitions
;------------------------------------------------------------------------------
; When developing your USB device, the VID and PID used in the PC side
; application program and the firmware on the microcontroller must match.
; Modify the below line to use your VID and PID. Use the format as shown below.
; Note: One INF file can be used for multiple devices with different VID and PIDs.
; For each supported device, append ",USB\VID_xxxx&PID_yyyy" to the end of the line.
;------------------------------------------------------------------------------
;[SourceDisksFiles]
;[SourceDisksNames]

[DeviceList]
%DESCRIPTION%=DriverInstall, USB\VID_XXXX&PID_XXXX

[DeviceList.NTamd64]
%DESCRIPTION%=DriverInstall, USB\VID_XXXX&PID_XXXX

;------------------------------------------------------------------------------
; String Definitions
;------------------------------------------------------------------------------
;Modify these strings to customize your device
;------------------------------------------------------------------------------
[Strings]
FullCompanyName="Your company name"
FullProductName="Your product name"
ShortProductName="Short name"
MFGFILENAME="FileName"
DRIVERFILENAME ="usbser"
MFGNAME="Manufacturer name"
INSTDISK="Installation disk"
DESCRIPTION="Description of the driver"
SERVICE="Name of the serenum service" 
```

您可以查看 Prolific 驱动程序以找到此类部分。我也找到了它们，它们使用了 Upper Filter 和 Serenum，因此检测到设备插入成功。您也可以从 Prolific 查看更新的驱动程序。

# iphone - 在 iphone tableview 中显示用户的公共 Facebook 提要

> ID：11030161
> 
> 赞同：0
> 
> 时间：2012-06-14T09:22:53.200
> 
> 标签：iphone, facebook-graph-api, facebook-access-token

我是 iPhone 新手。我正在开发一个 iPhone 应用程序，它将向 tableView 显示 London2012（伦敦奥运会官方 Facebook 页面）facebook 公共提要。我正在使用[https://graph.facebook.com/259479457407/feed?access_token=AAACEdEose0cBAF8ePSI8e9Sjpx8W19FMZC64oB0hD0ARj1cN6fIYsGZBYq6WdKNMza0e5URvwDQqZBiORm6CzPgRmaueyP7gaCvS6l65sVxgZC](https://graph.facebook.com/259479457407/feed?access_token=AAACEdEose0cBAF8ePSI8e9Sjpx8W19FMZC64oB0hD0ARj1cN6fIYsGZBYq6WdKNMza0e5URvwDQqZBiORm6CzPgRmaueyP7gaCvS6l65sVxg9eZAdFIZC) 每 2 小时获取 JSON 但它会过期链接。所以我需要一个新的访问令牌。

london2012的Facebook页面是：[-https://www.facebook.com/London2012](https://www.facebook.com/London2012)

***有什么方法可以将 facebook 用户的公共提要显示到 iPhone tableview 中。***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T02:59:41.013

这类似于与此处相同的问题：[https ://stackoverflow.com/a/11388605/1105863](https://stackoverflow.com/a/11388605/1105863)

我转发答案

通过此链接获取您的页面 json 提要：

[http://www.facebook.com/feeds/page.php?id=259479457407&format=json](http://www.facebook.com/feeds/page.php?id=259479457407&format=json)

解析并享受...

快乐编码。

# salesforce - 无法获得显示错误消息

> ID：11030162
> 
> 赞同：0
> 
> 时间：2012-06-14T09:22:59.503
> 
> 标签：salesforce, apex-code

我无法在 VF 页面上显示错误消息

我的代码：

```
VF page 
<apex:page contr
<apex:pageMessages /> 
```

控制器

```
ApexPages.addMessage(new ApexPages.Message(ApexPages.Severity.ERROR,'Error')); 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:09:06.390

根据[apex:pageMes​​sage](http://www.salesforce.com/us/developer/docs/pages/index_Left.htm#CSHID=pages_compref_outputText.htm%7CStartTopic=Content/pages_compref_outputText.htm%7CSkinName=webhelp)您缺少必填字段之一 - **severity**。

至于我这里是我的代码：

页：

```
<apex:page >

    <apex:pageMessage rendered="{!(errorMessage != null)}" summary="{!errorMessage}" severity="warning" strength="2" />

    <apex:form > 
```

控制器：

> 公共字符串错误消息 {get;set;}
> 
> if(error) { errorMessage = '这里有一些错误文本'; }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:58:50.000

您需要将`<apex:message/>`元素添加到 Visualforce 页面以显示 Apex 页面消息，如下所示：

```
<apex:page controller="VFPagecontroller">
  <apex:message/>
</apex:page> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T00:41:44.777

我遇到了困难`<apex:message/>`。如果这不起作用，您可以尝试以下方法。

包括`<apex:pageMessages />`在您的 VF 页面中，如下所示：

```
<apex:page controller="Yourcontroller">
    <apex:pageMessages/>
</apex:page> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-24T11:14:00.797

```
if(opp.stagename=='closed won'&& opp.close_date__c==null) {
  ApexPages.Message msg = new ApexPages.Message(ApexPages.Severity.info, 'please select closed date.');
  pexPages.addMessage(msg);

} 
```

# linux - 用于计算文件中单词的 Shell 命令

> ID：11030163
> 
> 赞同：0
> 
> 时间：2012-06-14T09:22:59.493
> 
> 标签：linux, shell

我想运行一个命令，它将计算所有文件中的字数。（从选定的文件数）

如果我喜欢`find ABG-Development/ -name "*.php" | grep "<?" | wc -l`，它只会搜索文件名而不是文件内容。

我尝试了另一种方式，比如

`find ABG-Development/ -name "*.php" -exec grep "<?" {} \; | wc -l`，我有错误。

在上面的例子中，我需要多少时间“

请帮忙..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:26:27.150

使用[xargs](http://linux.die.net/man/1/xargs)

```
find ABG-Development/ -name "*.php" -print0 | xargs -0 grep "<?" | wc -l 
```

# python - 我有一个下面给出的 Python 代码，当我运行这个全局名称 PDBAttributes 时没有定义

> ID：11030165
> 
> 赞同：0
> 
> 时间：2012-06-14T09:23:08.180
> 
> 标签：python

```
#!/usr/bin/env python2.7 
##-*- mode:python;tab-width:2;indent-tabs-mode:t;show-trailing-whitespace:t;rm-trailing-spaces:t;python-indent:2 -*-'

import noesy
import argparse
import library

parser =argparse.ArgumentParser(description="read pdb file",
                                add_help=True)

parser.add_argument("file",help="protein pdb file")

library.add_standard_args( parser )
args = parser.parse_args()

def read_structure(pdbfile):
        struct=[]
        for line in pdbfile:
                if len(line):
                        struct.append(PDBAttributes.read_from_line(line))
        return struct

pdb=read_structure(open(args.file,'r'))

class PDBAttributes:
    def __init__(self, atomindex=1, atom=noesy.Atom(), atomx=1, atomy=1, atomz=1):
        self._atomindex=atomindex
        self._atom=atom
        self._atomx=atomx
        self._atomy=atomy
        self._atomz=atomz

        def __str__(self):
        s='ATOM %(_atomindex)d %(_atom)s at %(_atomx)8.3f %(_atomy)8.3f %(_atomz)8.3f'%self.__dict__
        return s

    def atom(self):
        return self._atom

    def atomindex(self):
        return self._atomindex

    def atomx(self):
        return self._atomx

    def atomy(self):
        return self._atomy

    def atomz(self):
        return self._atomz

    @classmethod
    def read_from_line(obj,line):
        tags=line.split()
        atomindex=int(tags[1])
        atom=noesy.Atom(tags[2],int(tags[5]))
        atomx=float(tags[6])
        atomy=float(tags[7])
        atomz=float(tags[8])
        obj=PDBAttributes(atomindex, atom, atomx, atomy, atomz)
        print obj

class AtomDistance(PDBAttributes):

    def distance(self, atom1,atom2):
        pass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:39:39.783

移动您的调用`read_structure`以遵循`PDBAttributes`类的定义。

此外，在重新格式化您的帖子的过程中，我看到您的缩进混合了制表符和空格。尝试重新格式化您的代码以使用所有空格进行缩进，推荐的形式是 4 空格缩进。

您对所有这些 getter 函数的定义看起来就像用 Python 编写的 Java - 这是在 Python 中通常不需要的大量额外代码。推荐的方法是省略这些 all-they-do-is-assign-a-value-to-an-attribute-with-the-same-name-but-with-a-leading-underscore 方法，只使用属性公开名称。请参阅[Python 不是 Java](http://dirtsimple.org/2004/12/python-is-not-java.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:50:01.097

The `NameError` you are getting is due to the order you have placed the code in your file.

When you call `read_structure` to create a value for the `pdb` variable, it tries to look for `PDBAttributes`, but it has not been defined yet. If you move that line lower down in the file (below the class definition) you'll avoid that error. Note that it is OK to have the declaration of `read_structure` above the `PDBAttributes` class definition, though you might want to move it lower too to make the code easier to understand.

Here's a very simple bit of code that demonstrates the same error:

```
def foo():
    print(foo_text)

foo() # raises a NameError

foo_text = "foo" 
```

Here's a fixed version:

```
def foo():
    print(foo_text)

foo_text = "foo"

foo() # no error, prints "foo" 
```

# jquery - 如何在表单内获取字段键位和更改

> ID：11030168
> 
> 赞同：1
> 
> 时间：2012-06-14T09:23:19.867
> 
> 标签：jquery

我正在尝试获取在键入过程中更改了所有字段（输入，选择）并在表单内更改。

我确实喜欢这个。但我需要 keyup 和 change...（该字段上的任何更改都需要通过 ajax 更新）

```
$("form#frm_job").find('input,select').change(function() {
   var field_value = $(this).val();
    ....
    ....

}); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:43:23.013

您可以使用**on()** + 多个事件绑定：

```
$("form#frm_job").find('input,select').on('change keyup', function() {... 
```

# jquery - jQuery .closest() 在自定义 jQuery 插件中返回多个结果

> ID：11030171
> 
> 赞同：5
> 
> 时间：2012-06-14T09:23:35.447
> 
> 标签：jquery, closest

在破解我的业余项目时，我偶然发现了一个令人费解的 jQuery 行为。

我有一个自定义验证插件编写并工作。在插件中，我想使用 .closest() 方法实现一些功能。奇怪的是，这个方法返回多个元素。

这是一个示例代码：

```
this.closest(".control-group")
$(this).closest(".control-group"); 
```

上面两行代码都选择了类“control-group”的所有四个元素。放在我的插件中的这段代码有效：

```
var element_ID = this.attr("id");
$("#" + element_ID).closest(".control-group") 
```

上面选择了正确且只有一个具有“控制组”类的元素。

我不能使用这个“hack”，因为并非我想要验证的所有元素都设置了“id”属性，所以它不会在所有情况下都有效。

使用 jQuery 1.7.2（似乎是最新的稳定版）。任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T09:27:17.400

`this`是一个包含至少 4 个 DOM 元素的 jQuery 对象，调用`.closest`它会检索所有这些元素中最接近的`.control-group`元素。

`this.attr("id")`将检索 jQuery 对象中第一个 dom 元素的 id，因此您可以完成`$(this[0]).closest...`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T09:26:49.460

你可能没有所有元素的 id，但你确实有`this`

代替

```
var element_ID = this.attr("id");
$("#" + element_ID).closest(".control-group") 
```

尝试

```
$(this).closest(".control-group") 
```

**更新**

jQuery 网站说：

> 给定一个表示一组 DOM 元素的 jQuery 对象，.closest() 方法在 DOM 树中搜索这些元素及其祖先，并从匹配的元素构造一个新的 jQuery 对象。.parents() 和 .closest() 方法的相似之处在于它们都向上遍历 DOM 树。两者之间的差异虽然微妙，但意义重大：
> 
> . **close()** : 返回的 jQuery 对象包含零个或一个元素
> 
> . **parents()**：返回的 jQuery 对象包含零个、一个或多个元素

这是链接：[http ://api.jquery.com/closest/](http://api.jquery.com/closest/)

所以你原来的问题可能没有回答

# android - 根据屏幕宽度动态添加按钮

> ID：11030172
> 
> 赞同：0
> 
> 时间：2012-06-14T09:23:36.383
> 
> 标签：android, button, dynamic

我正在尝试根据屏幕宽度动态添加按钮。

即，如果我有 6 个按钮，那么我需要相应地定位它们，以便按钮出现在中心，左父和右父的间距相等。

这是我正在尝试但没有结果的一段代码：

```
private void btmBarBtns(int position) {

    RelativeLayout rlLayout;
    RelativeLayout.LayoutParams layoutParams;

    int leftMargin = scrWidth/pageCount;

    CommonMethods.getSystemOutput("Left Margin::::"+leftMargin);

    for (int i = 0; i < pageCount; i ++ ) {

        rlLayout = (RelativeLayout) findViewById(R.id.ivBottomBar);

        layoutParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

        layoutParams.leftMargin = leftMargin;

        ib = new ImageButton(this);
        ib.setId(i);
        ib.setLayoutParams(layoutParams);
        ib.setBackgroundResource(R.drawable.white_circle_32x32);

        rlLayout.addView(ib);
        leftMargin = leftMargin + 70;

        if (ib.getId() == position) {
            ib.setBackgroundResource(R.drawable.black_circle_32x32);
        }

    }
} 
```

在上面的代码中，我有一个相对布局，高度为 25dp，宽度为 fill_parent。我可以添加按钮，但它们没有位于中心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:53:46.753

如果您只想将`ImageButtons`左右空间相等的那些居中，那么您可以简单地将它们包装在 a 中`LinearLayout`，然后将其居中`LinearLayout`在 parent 中`RelativeLayout`：

```
 RelativeLayout rlLayout = (RelativeLayout) findViewById(R.id.parent);
    LinearLayout container = new LinearLayout(this);
    for (int i = 0; i < 5; i++) {
        LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        ImageButton ib = new ImageButton(this);
        ib.setId(i);
        ib.setLayoutParams(layoutParams);
        ib.setBackgroundResource(R.drawable.ic_launcher);
        container.addView(ib);

        if (ib.getId() == position) {
            ib.setBackgroundResource(R.drawable.black_circle_32x32);
        }
    }
    RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    layoutParams.addRule(RelativeLayout.CENTER_HORIZONTAL,
            RelativeLayout.TRUE);
    rlLayout.addView(container, layoutParams); 
```

如果您想编写更多代码来完成上述操作，那么您可以修改当前布局并将此元素添加为锚点：

```
<View
    android:layout_width="0dp"
    android:layout_height="0dp"
    android:layout_centerHorizontal="true"
    android:id="@+id/anchor" /> 
```

然后在`ImageButtons`该锚点的左侧和右侧的代码位置中`View`：

```
int anchorId = R.id.anchor;     
        int btnsNr = 6; // this is the number of Buttons
        RelativeLayout rlLayout = (RelativeLayout) findViewById(R.id.parent);
        if (btnsNr % 2 != 0) {
            anchorId = 1000;
            btnsNr--;
            ImageButton imgb = new ImageButton(this);
            imgb.setImageResource(R.drawable.shop_open);
            imgb.setId(anchorId);
            RelativeLayout.LayoutParams rlp = new RelativeLayout.LayoutParams(
                    RelativeLayout.LayoutParams.WRAP_CONTENT,
                    RelativeLayout.LayoutParams.WRAP_CONTENT);
            rlp.addRule(RelativeLayout.CENTER_HORIZONTAL, RelativeLayout.TRUE);
            rlLayout.addView(imgb, rlp);
        }
        int whichPart = 1;
        while (whichPart >= 0) {
            int previousId = anchorId;
            for (int i = 0; i < (btnsNr / 2); i++) {
                RelativeLayout.LayoutParams tmp = new RelativeLayout.LayoutParams(
                        RelativeLayout.LayoutParams.WRAP_CONTENT,
                        RelativeLayout.LayoutParams.WRAP_CONTENT);
                if (whichPart == 1) {
                    tmp.addRule(RelativeLayout.LEFT_OF, previousId);
                } else {
                    tmp.addRule(RelativeLayout.RIGHT_OF, previousId);
                }
                ImageButton imgb = new ImageButton(this);
                previousId += whichPart == 1 ? -1 : 1;
                imgb.setId(previousId);
                imgb.setImageResource(R.drawable.shop_open);
                rlLayout.addView(imgb, tmp);
            }
            whichPart--;
        } 
```

如果您想计算`ImageButtons`适合屏幕的数量（并将它们水平居中），您应该提到。

# postgresql - 修复损坏的数据库 postgresql

> ID：11030173
> 
> 赞同：16
> 
> 时间：2012-06-14T09:23:40.053
> 
> 标签：postgresql, corrupt-data

我的 postgresql 数据库有多个错误，这是在电涌后导致的：

我无法从我的数据库中访问大多数表。例如`select * from ac_cash_collection`，当我尝试时，我得到了愚蠢的错误：

```
错误：pg_toast_2619 中的 toast 值 118486855 缺少块号 0
```

当我尝试 pg_dump 时，出现以下错误：

```
来自服务器的错误消息：错误：关系“public.st_stock_item_newlist”不存在
pg_dump：命令是：LOCK TABLE public.st_stock_item_newlist IN ACCESS SHARE MODE

```

我继续尝试运行整个数据库的重新索引，实际上我让它运行，去睡觉，我发现它早上没有做任何事情，所以我不得不取消它。

我需要一些帮助以尽快解决此问题，请帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T15:17:24.783

如果您有备份，只需从它们恢复。

如果没有 - 您刚刚了解了为什么需要定期备份。如果硬件出现异常，PostgreSQL 将无能为力。

此外，如果您再次遇到这种情况，请先停止 PostgreSQL 并对所有内容（所有表空间、WAL 等）进行完整的文件级备份。这样您就有了一个已知的起点。

所以 - 如果你仍然想恢复一些数据。

1.  尝试转储单个表。以这种方式得到你能得到的。
2.  如果索引导致问题，请删除它们
3.  转储表的部分（id=0..9999、1000..19999 等） - 这样您就可以确定某些行可能损坏的位置并转储更小的部分以恢复仍然好的部分。
4.  尝试只转储某些列 - 大文本值被离线存储（在 toast 表中），因此避免它们可能会获取其余数据。
5.  如果您的系统表已损坏，那么您将投入大量工作。

这是很多工作，然后您需要仔细检查并审核您恢复的内容，并尝试找出丢失/不正确的内容。

您可以做更多的事情（在某些情况下创建空块可以让您转储部分数据）但它们都更加复杂和繁琐，除非数据特别有价值，否则不值得付出努力。

从中删除的关键信息 - 确保定期备份，并确保它们正常工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-14T19:34:16.753

在你做*任何*其他事情之前，[http://wiki.postgresql.org/wiki/Corruption](http://wiki.postgresql.org/wiki/Corruption) *并按照说明行事*。不这样做可能会使问题变得更糟。

* * *

[Fine Manual](http://www.postgresql.org/docs/current/interactive/runtime-config-developer.html)中列出了两个可能有用的配置参数：`ignore_system_indexes`和`zero_damaged_pages`. 我从未使用过它们，但如果我绝望的话，我会使用它们...

我不知道他们是否有助于反对烤面包桌。在任何情况下，如果设置它们会导致您的数据库再次可用，我会 {backup + drop + restore} 让所有表和目录再次恢复为新的形状。成功！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T04:09:26.683

在您执行任何其他操作之前，请获取损坏数据库的完整文件系统级副本。

[http://wiki.postgresql.org/wiki/Corruption](http://wiki.postgresql.org/wiki/Corruption)

不这样做会破坏导致腐败的证据，这意味着如果您的修复工作不顺利并使事情变得更糟，您将无法撤消它们。

*立即*复制！

# javascript - blackberry webworks：触控板滚动

> ID：11030174
> 
> 赞同：1
> 
> 时间：2012-06-14T09:23:40.040
> 
> 标签：javascript, html, blackberry, blackberry-webworks

我的应用程序中有几个可聚焦元素，因此当我聚焦可滚动 div 时，焦点转到另一个可聚焦元素，而不是在使用触控板时滚动该 div。我怎样才能防止这种情况？我希望它首先滚动该 div，如果它不能再滚动，则跳转到下一个元素。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T01:39:51.303

看看用于滚动 Div 的 Kitchen Sink 示例：http: [//blackberry.github.com/WebWorks-Samples/kitchenSink/html/css3/overflow.html](http://blackberry.github.com/WebWorks-Samples/kitchenSink/html/css3/overflow.html)

注意：使用 Firebug/Chrome 开发者工具来查看所有工作的 javascript。

# text - 如何在 cxGrid 中显示汉字

> ID：11030180
> 
> 赞同：1
> 
> 时间：2012-06-14T09:24:01.863
> 
> 标签：text, character, tcxgrid

我有一个 Cinese 数据库和一个连接到它的 cxGrid。中文数字显示为“？” 在网格中。我绑更改网格的 CharSet 但没有成功。请你帮帮我好吗？

# git - git pull 致命错误

> ID：11030181
> 
> 赞同：3
> 
> 时间：2012-06-14T09:24:07.323
> 
> 标签：git, virtualbox, git-pull, ubuntu-12.04

当我尝试触发**git pull**命令时，它返回如下错误：

> mert@eren-VirtualBox:~/restoranya/restoranya$ git pull origin master
> 
> 错误：目标文件 .git/objects/2a/0836034919f0cfe0f8f1ab98037884dd1c93de 为空
> 
> 致命：松散对象 2a0836034919f0cfe0f8f1ab98037884dd1c93de（存储在 .git/objects/2a/0836034919f0cfe0f8f1ab98037884dd1c93de 中）已损坏
> 
> mert@eren-VirtualBox:~/restoranya/restoranya$ 致命：远程端意外挂断

这种错误的原因是什么？我该怎么做才能恢复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:20:26.790

出于某种原因，该对象在您的原始远程中已损坏。

您需要此存储库的另一个克隆，您可以在其中运行

```
git cat-file -t 2a0836034919f0cfe0f8f1ab98037884dd1c93de 
```

没有错误，并且您想将该对象的一个​​好的版本注入到源的对象数据库中。

描述修复可能很棘手，因为我们正在讨论可能驻留在不同主机上并且可能由不同用户拥有的多个克隆。以下步骤假定您作为拥有源存储库的用户具有对源主机的 shell 访问权限。下面的提示`origin$`指示要在托管您的源的计算机上运行的命令。

原点上的坏对象是松散格式，因此还原的最后一步是简单的复制。

假设好克隆中的对象也是松散的，然后运行

```
origin$ cp /path/to/good-repo/.git/objects/\
2a/0836034919f0cfe0f8f1ab98037884dd1c93de \
/path/to/origin/objects/2a 
```

如果您的来源是裸存储库或

```
origin$ cp /path/to/good-repo/.git/objects/\
2a/0836034919f0cfe0f8f1ab98037884dd1c93de \
/path/to/origin/.git/objects/2a 
```

除此以外。

如果在好的克隆中这个对象被存储在一个包中，那么你必须把它拿出来。我建议在一次性克隆中执行此操作。

```
origin$ git clone file:///path/to/good-repo /tmp/restore-repo 
```

如果`good-repo`在另一台机器上，则克隆 URL 将不同。

```
origin$ git clone user@other-machine:src/foo/.git /tmp/restore-repo 
```

切换到保存临时存储库的目录。

```
origin$ cd /tmp/restore-repo 
```

将打包文件移出对象数据库，因为如果 git 认为它已经拥有这些对象，它不会解压缩这些对象。

```
origin$ mkdir /tmp/restore-packs
origin$ mv .git/objects/pack/* /tmp/restore-packs 
```

现在您可以打开包装了。

```
origin$ for pack in /tmp/restore-packs/*.pack; do
  git unpack-objects -r < $pack
done 
```

该`-r`选项告诉`git-unpack-objects`即使遇到坏对象也要继续解包。

此时，`/tmp/restore-repo`现在应该包含 2a08360... 作为松散对象，所以运行

```
origin$ cp /tmp/restore-repo/.git/objects\
2a/0836034919f0cfe0f8f1ab98037884dd1c93de \
/path/to/origin/objects/2a 
```

或者

```
origin$ cp /tmp/restore-repo/.git/objects\
2a/0836034919f0cfe0f8f1ab98037884dd1c93de \
/path/to/origin/.git/objects/2a 
```

取决于 origin 是否是一个裸存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:37:02.113

你试过重新包装吗？

```
git-repack is used to combine all objects that do not currently reside in a "pack",
into a pack. It can also be used to re-organize existing packs into a single, more
efficient pack.
A pack is a collection of objects, individually compressed, with delta compression 
applied, stored in a single file, with an associated index file. Packs are used 
to reduce the load on mirror systems, backup engines, disk storage, etc. 
```

有一些命令可以清理你的回购..

```
$ git-prune
$ git-gc --aggressive
$ git-repack
$ git-repack -a
$ git-prune-packed 
```

# c# - 从 C# 代码将数据插入 SQL Server

> ID：11030183
> 
> 赞同：4
> 
> 时间：2012-06-14T09:24:32.423
> 
> 标签：c#, asp.net, sql-server

我有一张桌子`student`（`id, name`）。然后我有一个文本框，用于输入名称，当单击提交按钮时，它将数据插入数据库。那么我怎样才能只插入名称，而不是 id，因为 id 是自动递增的？

我试过这个

```
insert into student(id, name) values(,name) 
```

但它没有插入我的桌子。

这是我的代码：

```
protected void Button1_Click(object sender, EventArgs e)
{
    string test = txtName.Text;

    SqlConnection conn = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Person.mdf;Integrated Security=True;User Instance=True");

    string sql = "insert into student(name) values ('test')";

    try
    {
        conn.Open();
        SqlCommand cmd = new SqlCommand(sql, conn);
        cmd.ExecuteNonQuery();
    }
    catch (System.Data.SqlClient.SqlException ex)
    {
        string msg = "Insert Error:";
        msg += ex.Message;
    }
    finally
    {
        conn.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-14T09:25:56.133

```
INSERT INTO student (name) values ('name') 
```

完全省略该`id`列，它将自动填充。要使用您的变量，您应该参数化您的 SQL 查询。

```
string sql = "INSERT INTO student (name) values (@name)";
conn.Open();
SqlCommand cmd = new SqlCommand(sql, conn);
cmd.Parameters.Add("@name", SqlDbType.VarChar);
cmd.Parameters["@name"].Value = test;
cmd.ExecuteNonQuery(); 
```

您永远不应尝试通过构造包含输入值的 SQL 字符串来执行此操作，因为这会使您的代码暴露于 SQL 注入漏洞。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T09:45:30.980

插入数据时最好使用参数。

```
try
{
    string sql = "insert into student(name) values (@name)";
    using (SqlConnection conn = new SqlConnection(connectionString))
    {
        conn.Open();
        using (SqlCommand cmd = new SqlCommand(sql, conn))
        {
            cmd.Parameters.AddWithValue("@name", test); // assign value to parameter 
            cmd.ExecuteNonQuery();
        }
    }
}
catch (SqlException ex)
{
    string msg = "Insert Error:";
    msg += ex.Message;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T09:26:02.160

您无需在第一部分提及 ID。

```
insert into student(name) values('name') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T11:06:45.793

```
string sql = "INSERT INTO student (name) values (@name)";
conn.Open();
SqlCommand cmd = new SqlCommand(sql, conn);
cmd.Parameters.Add("@name", SqlDbType.VarChar);
cmd.Parameters["@name"].Value = test;
cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T04:11:32.883

我遇到了这个问题，在尝试了堆栈溢出时发现的各种解决方案后，我可以将经验总结如下：在 mssql 的命令 shell 中执行的命令如下：

`insert into table_name (val1,val2,val3,val4) VALUES ("val1","val2",0,"val4")`

`go`

或者

`insert into table_name VALUES ("val1","val2",0,"val4")`

```
go 
```

直接在 mssql 数据库提示符中键入时工作，

但是当需要使用 c# 中的 insert 语句时，需要记住，字符串需要被一对额外的单句包围，围绕字符串，例如：

```
SqlConnection cnn;

string connetionString = "Data Source=server_name;Initial Catalog=database_name;User ID=User_ID;Password=Pass_word";

cnn = new SqlConnection(connetionString);

SqlCommand myCommand = new SqlCommand("insert into table_name (val1,val2,val3,val4) VALUES ('val1','val2',0,'val4');", cnn);

//or
//SqlCommand myCommand = new SqlCommand(insert into table_name VALUES ('val1','val2',0,'val4');", cnn);

cnn.Open();

myCommand.ExecuteNonQuery();

cnn.Close(); 
```

这里的问题是，像我这样的大多数人都尝试使用 <\"> 代替双引号 <">，这在上述命令行案例中实现，而 SQL 执行器无法理解其含义。

即使在需要替换字符串的情况下，也要确保字符串被单**引号**包围，其中字符串连接看起来是一种可行的解决方案，例如：

```
SqlCommand myCommand = new SqlCommand("insert into table_name (val1,val2,val3,val4) VALUES ('"+val1+"','val2',0,'val4');", cnn); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T09:26:50.597

尝试以下查询，

```
insert into student(name) values(name) 
```

当您插入数据时，SQL Server 在内部自动递增 id 列，因为您说它是自动递增的。如果它不起作用，你必须检查数据库中的标识列。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-22T09:06:08.903

使用关键字“identity”自动增加 id 列

参考：[http ://technet.microsoft.com/en-us/library/aa933196(v=sql.80).aspx](http://technet.microsoft.com/en-us/library/aa933196(v=sql.80).aspx)

```
create table table_name( id int PRIMARY KEY IDENTITY ) 
```

并且您无需在插入查询中提及“id”

# java - 黑莓 Http Push 应用程序连接被拒绝

> ID：11030186
> 
> 赞同：1
> 
> 时间：2012-06-14T09:24:42.303
> 
> 标签：java, blackberry, connection, push

我正在尝试在 Blackberry 上开发一个 http 推送应用程序。我正在使用黑莓文档 (HttpPushDemo) 中的示例应用程序。

当我测试在本地主机上运行它并发送消息时，控制台告诉连接被拒绝。这是错误消息：

```
Sending to http://localhost:8080/push?DESTINATION=2100000A&PORT=100&REQUESTURI=localhost
Waiting for notification on port 7778...
java.net.ConnectException: Connection refused: connect 
```

客户端应用程序（在黑莓模拟器中）已经在监听。

仅供参考，这是我遵循的文档：http: [//docs.blackberry.com/en/developers/deliverables/7649/Setting_up_for_JDE_organizer_1009971_11.jsp](http://docs.blackberry.com/en/developers/deliverables/7649/Setting_up_for_JDE_organizer_1009971_11.jsp)

# android - 如何动态更新列表视图背景

> ID：11030187
> 
> 赞同：-2
> 
> 时间：2012-06-14T09:24:45.717
> 
> 标签：android, listview, handler

我尝试了各种方法，但没有一个有效，我是什么改变了listview单元格的背景图像，为此我有不同的单元格图像。内容保持不变。这是我已经尝试过的。

```
 CountryList.post(new Runnable(){
        public void run() {
             CountryList.invalidateViews();    
        } 
    }); 
```

// 还有这个。

```
 runOnUiThread(new Runnable() {
        public void run() {
             CountryList.invalidateViews(); 
         }
    }); 
```

因为我不满足于重新加载。

![在此处输入图像描述](../Images/a9d46001ceb1b75a5608a518c63de449.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T04:16:23.810

为此，您可以遍历列表视图的子组件并获取每个组件的背景并更改其背景，例如获取子组件等。

# lotus-notes - 为类别线设置颜色

> ID：11030189
> 
> 赞同：1
> 
> 时间：2012-06-14T09:24:55.433
> 
> 标签：lotus-notes

我有一个视图显示来自多个类别的数据，其中类别（在我的情况下为错误严重性）以颜色编码为各个条目的背景颜色。现在我想对类别行本身应用相同的背景颜色。

由于为该行的其余部分设置背景颜色的列未显示在类别行中，因此不应用该设置。有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:11:35.790

取自：[http ://www-10.lotus.com/ldd/nd6forum.nsf/0/2765b9380021c666852572d800589f9d?OpenDocument](http://www-10.lotus.com/ldd/nd6forum.nsf/0/2765b9380021c666852572d800589f9d?OpenDocument)

> 这是一种笨拙的方法，可以为您的类别行着色不同。
> 
> 1.  在所有分类列之前放置一列。这将是您的颜色列。检查列属性的使用值作为颜色属性。
>     
>     
> 2.  使用以下功能之一：
>     
>     
>     
>     @If(@IsCategory("any")="any";any;1:1:1) @If(@IsCategory("x")="y";z;1:1:1)
>     
>     
> 
> 注意：在上面的函数中，出现“any”这个词，或者“x”“y”和“z”的地方，它可以是任何东西，匹配或不匹配。它总是评估为假。如果你只尝试@IsCategory，它会出错，因为它不会返回 true。您尝试的任何匹配都不会引起真正的比较。
> 
> 也就是说，如果它们不是类别，则结果是所有行都将被涂成黑色。这会覆盖默认文本颜色。如果您想要黑色以外的其他颜色，则相应地调整 1:1:1（红色：绿色：蓝色每个位置最多 255，红色 = 255:0:0）
> 
> 现在转到任意列并将文本颜色设置为您希望分类行出现的行，然后单击全部应用。瞧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T15:33:11.500

我试图弄清楚如何以编程方式执行此操作，然后我想知道，为什么不直接从邮件模板中借用呢？我想建议您检查一下如何使用 ColorProfile 以允许用户根据字段值（发件人姓名）更改他们的颜色首选项，看看是否可以为您的情况完成。

或者，让他们通过浏览器客户端或 Notes 客户端中的 XPage 访问视图，并根据严重性为该视图分配一个类。

您可以使用 HTML 构建类别列公式，以便在严重时值是`"<tr class='severe'><td>CategoryNameValueHere</td></tr>"`或类似的东西，对吗？

# php - 如何从PHP中的多维数组中获取具有条件的前两个元素

> ID：11030190
> 
> 赞同：0
> 
> 时间：2012-06-14T09:24:57.400
> 
> 标签：php, arrays, multidimensional-array

无论如何要使用php获取每个profile_id的前两个元素

```
array(
    array(['type'] => album,['profile_id'] => 1),
    array(['type'] => video,['profile_id'] => 1),
    array(['type'] => image,['profile_id'] => 1),

    array(['type'] => album,['profile_id'] => 2),
    array(['type'] => video,['profile_id'] => 2),
    array(['type'] => scenes,['profile_id'] => 2),
    array(['type'] => image,['profile_id'] => 2),

    array(['type'] => album,['profile_id'] => 3),
    array(['type'] => video,['profile_id'] => 3),
    array(['type'] => album,['profile_id'] => 3),
) 
```

预期结果

```
array(
    array(['type'] => album,['profile_id'] => 1),
    array(['type'] => video,['profile_id'] => 1),

    array(['type'] => album,['profile_id'] => 2),
    array(['type'] => video,['profile_id'] => 2),

    array(['type'] => album,['profile_id'] => 3),
    array(['type'] => video,['profile_id'] => 3),
) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:32:45.790

*   循环数组
*   如果 profile_id == next profile_id，则放入新数组最多计数 2
*   如果 profile_id != next profile_id 重置计数并重复步骤 2。

最好不要发布确切的代码。:D

# java - MigLayout 使用 JScrollPane 调整大小

> ID：11030191
> 
> 赞同：4
> 
> 时间：2012-06-14T09:25:02.053
> 
> 标签：java, swing, miglayout

我搜索了一下，并没有找到一个很好的答案来解决我的问题。

我正在开发一个必须可调整大小的 gui。它包含一个`JTextArea`位于`JScrollPane`. 这是我的问题。只要我不手动调整 JFrame 的大小，就会保留“初始”布局并且一切看起来都很好。一旦我手动调整大小（如果`JTextArea`已经处于滚动模式），布局就会变得混乱。

这是一个 SSCCE（我在保留代码结构的同时去掉了大部分部分。我希望这样更具可读性）：

```
import java.awt.Color;
import java.awt.Font;

import javax.swing.BorderFactory;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JSeparator;
import javax.swing.JSlider;
import javax.swing.JTabbedPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.border.TitledBorder;

import net.miginfocom.swing.MigLayout;

public class Tab extends JFrame {
  private static final long serialVersionUID = 1L;
  private JTextArea messageTextArea;
  private JPanel optionPanel, messagePanel;
  private JTabbedPane plotTabPane;

  public static void main(String[] args) {
    final Tab tab = new Tab();
    tab.setSize(1000, 600);
    tab.setVisible(true);
    new Thread(new Runnable() {
      @Override
      public void run() {
        int count = 0;
        tab.printRawMessage("start");
        while (true) {
          try {
            Thread.sleep(200);
          } catch (InterruptedException e) {}
          tab.printRawMessage("\ntestMessage" + count++);
        }
      }
    }).start();
  }

  public Tab() {
    super();
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    initComponents();
  }

  private void initComponents() {
    JPanel mainPanel = new JPanel();
    mainPanel.setLayout(new MigLayout("insets 0", "", ""));
    mainPanel.add(getLeftTopPanel(), "shrinky, top, w 450!");
    mainPanel.add(getRightPanel(), "spany 5, wrap, grow, pushx, wmin 400");
    mainPanel.add(getMessagePanel(), "pushy, growy, w 450!");

    JScrollPane contentScrollPane = new JScrollPane(mainPanel);
    contentScrollPane.setBorder(BorderFactory.createEmptyBorder());
    setContentPane(contentScrollPane);
  }

  protected JPanel getLeftTopPanel() {
    if (optionPanel == null) {
      optionPanel = new JPanel();
      optionPanel.setBorder(BorderFactory.createTitledBorder(null, "Configuration", TitledBorder.LEFT, TitledBorder.TOP, new Font("null", Font.BOLD, 12), Color.BLUE));
      optionPanel.setLayout(new MigLayout("insets 0", "", "top, align 50%"));

      JLabel label = new JLabel("Choose");
      label.setHorizontalAlignment(JLabel.RIGHT);
      optionPanel.add(label, "w 65!");
      optionPanel.add(new JSeparator(JSeparator.VERTICAL), "spany 5, growy, w 2!");
      optionPanel.add(new JComboBox(new String[] {"option1", "option2", "option3"}), "span, growx, wrap");

      optionPanel.add(new JLabel("Type"), "right");
      optionPanel.add(new JTextField("3"), "w 65!, split 2");
      optionPanel.add(new JLabel("Unit"), "wrap");

      optionPanel.add(new JLabel("Slide"), "right");
      optionPanel.add(new JSlider(0, 100), "span, growx, wrap");
    }
    return optionPanel;
  }

  protected JTabbedPane getRightPanel() {
    if (plotTabPane == null) {
      plotTabPane = new JTabbedPane();
      plotTabPane.add("Tab1", new JPanel());
      plotTabPane.add("Tab2", new JPanel());
    }
    return plotTabPane;
  }

  protected JPanel getMessagePanel() {
    if (messagePanel == null) {
      messagePanel = new JPanel();
      messagePanel.setBorder(BorderFactory.createTitledBorder(null, "Status Console", TitledBorder.LEFT, TitledBorder.TOP, new Font("null", Font.BOLD, 12), Color.BLUE));
      messagePanel.setLayout(new MigLayout("insets 0", "", "top, align 50%"));
      messagePanel.add(new JScrollPane(getMessageTextArea()), "push, grow");
    }
    return messagePanel;
  }

  protected JTextArea getMessageTextArea() {
    if (messageTextArea == null) {
      messageTextArea = new JTextArea();
      messageTextArea.setEditable(false);
      messageTextArea.setFont(new Font(null, Font.PLAIN, 20));
      messageTextArea.setBorder(BorderFactory.createEmptyBorder(4, 4, 4, 4));
    }
    return messageTextArea;
  }

  public void printRawMessage(String rawMessage) {
    getMessageTextArea().append(rawMessage);
    getMessageTextArea().setCaretPosition(getMessageTextArea().getText().length());
  }
} 
```

布局的东西基本上发生在`initComponents()`.

**要查看问题：**

1.  启动应用程序（我使用 miglayout-4.0-swing.jar）。
2.  稍等一下（不要调整窗口大小），直到有足够的消息在状态文本区域中创建滚动条。
3.  现在这就是我想要的。`JTextArea`一直到 JFrame 的底部，并在必要时滚动。
4.  现在调整窗口大小。如您所见，一切都变得一团糟。如果窗口最大化，它只会很好。

这是两个屏幕截图。第一个是我想要的样子： ![调整大小之前：好！](../Images/97fa5f336a328677e89f9cc79b1052ca.png) 第二个是调整大小后： ![调整大小后：不好！](../Images/21db724e839370a856d7405e1c79bf44.png)

**我的问题：**有人能告诉我，我如何在调整大小之前保持布局不变？我想一直`JTextArea`走到窗口的底部。如果有必要，滚动条应该会出现。唯一的办法是，如果窗口太小（因为配置面板有固定的高度），状态面板可以低于窗口底部。

我希望我说清楚了。如果没有，请询​​问。;)

编辑：如果您删除顶部 JScrollPanel（包含所有组件的那个），您可以看到我想要的行为。只是改变

```
JScrollPane contentScrollPane = new JScrollPane(mainPanel);
contentScrollPane.setBorder(BorderFactory.createEmptyBorder());
setContentPane(contentScrollPane); 
```

至

```
setContentPane(mainPanel); 
```

看看我的意思。不幸的是，如果窗口很小，这样我就会松开滚动条。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T20:02:43.433

专注于您的状态区域并使用嵌套布局会产生如下所示的结果。特别注意，

*   用于`invokeLater()`在 EDT 上构建 GUI。
*   用于`javax.swing.Timer`更新 EDT 上的 GUI。
*   用于`pack()`使窗口适合其子组件的首选大小和布局。
*   使用更新策略`DefaultCaret`来控制滚动。
*   避免在公共访问器中进行不必要的惰性实例化。
*   避免[`setXxxSize()`](https://stackoverflow.com/q/7229226/230513)；`getXxxSize()`明智地超越。
*   严格审查延长的决定`JFrame`。

![图片](../Images/89f29ea571aec39def62ced852ba66db.png)

```
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.Font;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.BorderFactory;
import javax.swing.Box;
import javax.swing.BoxLayout;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JSeparator;
import javax.swing.JTabbedPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.Timer;
import javax.swing.border.TitledBorder;
import javax.swing.text.DefaultCaret;

public class Tab extends JFrame {

    private JTextArea messageTextArea;
    private JPanel optionPanel, messagePanel;
    private JTabbedPane plotTabPane;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {

                final Tab tab = new Tab();
                tab.setVisible(true);
                Timer t = new Timer(200, new ActionListener() {

                    int count = 0;

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        tab.printRawMessage("testMessage" + count++);
                    }
                });
                t.start();
            }
        });
    }

    public Tab() {
        initComponents();
    }

    private void initComponents() {
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel mainPanel = new JPanel(new GridLayout(1, 0));
        Box leftPanel = new Box(BoxLayout.Y_AXIS);
        leftPanel.add(getLeftTopPanel());
        leftPanel.add(getMessagePanel());
        mainPanel.add(leftPanel);
        mainPanel.add(getRightPanel());
        this.add(mainPanel);
        this.pack();
        this.setLocationRelativeTo(null);
    }

    protected JPanel getLeftTopPanel() {
        optionPanel = new JPanel();
        optionPanel.setBorder(BorderFactory.createTitledBorder(null,
            "Configuration", TitledBorder.LEFT, TitledBorder.TOP,
            new Font("null", Font.BOLD, 12), Color.BLUE));
        JLabel label = new JLabel("Choose");
        label.setHorizontalAlignment(JLabel.RIGHT);
        optionPanel.add(label);
        optionPanel.add(new JSeparator(JSeparator.VERTICAL));
        optionPanel.add(new JComboBox(
            new String[]{"option1", "option2", "option3"}));
        optionPanel.add(new JLabel("Type"));
        optionPanel.add(new JTextField("3"));
        return optionPanel;
    }

    protected JTabbedPane getRightPanel() {
        plotTabPane = new JTabbedPane();
        plotTabPane.add("Tab1", new JPanel());
        plotTabPane.add("Tab2", new JPanel());
        return plotTabPane;
    }

    protected JPanel getMessagePanel() {
        messagePanel = new JPanel(new GridLayout());
        messagePanel.setBorder(BorderFactory.createTitledBorder(null,
            "Status Console", TitledBorder.LEFT, TitledBorder.TOP,
            new Font("null", Font.BOLD, 12), Color.BLUE));
        final JScrollPane sp = new JScrollPane(getMessageTextArea());
        sp.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        messagePanel.add(sp);
        return messagePanel;
    }

    protected JTextArea getMessageTextArea() {
        messageTextArea = new JTextArea("", 10, 19);
        messageTextArea.setEditable(false);
        messageTextArea.setFont(new Font(null, Font.PLAIN, 20));
        messageTextArea.setBorder(BorderFactory.createEmptyBorder(4, 4, 4, 4));
        DefaultCaret caret = (DefaultCaret) messageTextArea.getCaret();
        caret.setUpdatePolicy(DefaultCaret.ALWAYS_UPDATE);
        return messageTextArea;
    }

    public void printRawMessage(String rawMessage) {
        messageTextArea.append(rawMessage + "\n");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:34:11.343

`mainPanel`在方法中添加大小约束`initComponents`。例如 ：

```
 mainPanel.setMinimumSize(new Dimension(400, 400));
    mainPanel.setPreferredSize(new Dimension(400, 400));
    mainPanel.setMaximumSize(new Dimension(400, 400)); 
```

# java - 在java中提取私钥

> ID：11030195
> 
> 赞同：3
> 
> 时间：2012-06-14T09:25:28.573
> 
> 标签：java, private-key

我有使用 java 类 CertAndKeyGen 和 X500Name 创建的证书，我能够生成字节数组中的证书。现在我想要我在证书中使用的私钥并将其转换为可读格式。下面是我用来创建证书的代码，

```
 CertAndKeyGen keypair = new CertAndKeyGen("RSA", "SHA1WithRSA", null); 
    X500Name x500Name = new X500Name(commonName, organizationalUnit, organization, city, state, country);
    keypair.generate(keysize);
    PrivateKey privKey = keypair.getPrivateKey();
    PKCS10 certReq = keypair.getCertRequest(x500Name);
    X509Certificate[] chain = new X509Certificate[1];
    chain[0] = keypair.getSelfCertificate(x500Name, new Date(), (long) validity * 24 * 60 * 60);
    keyStore.setKeyEntry(alias, privKey, keyStorePassword.toCharArray(), chain);                    
    ByteArrayOutputStream bs = new ByteArrayOutputStream();
    PrintStream ps = new PrintStream(bs);
    certReq.print(ps);
    byte[] certReqPrintable = bs.toByteArray(); 
```

我没有任何线索，请帮助我朝着正确的方向前进以获取私钥并将其转换为可读格式。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:43:52.840

如果要将私钥保存到文件中，请使用

```
byte[] privateKeyBytes = privKey.getEncoded(); 
```

这将返回 DER 编码（二进制）格式的密钥。

如果您只想在控制台上显示包含的值，只需使用 toString() 打印它：

```
System.out.println(privKey); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:01:48.853

BouncyCastle 具有有用的[PEMWriter](http://www.cs.berkeley.edu/~jonah/bc/org/bouncycastle/openssl/PEMWriter.html)类，您可以使用它来将私钥写入 PEM 格式的文件（这是 OpenSSH 和 curl 等工具所期望的）。

```
PEMWriter privatepemWriter = new PEMWriter(new FileWriter(filename)));
privatepemWriter.writeObject(privKey);
privatepemWriter.close(); 
```

否则，您可以从私钥保存字节数组，这是许多工具也使用的 DER 格式。

最后，您可以使用以下方法将其写入其他 java 程序使用的 JKS 密钥库：

```
KeyStore keyStore = KeyStore.getInstance("JKS");
keyStore.load(null);
keyStore.setKeyEntry("some alias", privKey, somePassword.toCharArray(), chain[0]));
FileOutputStream fos = new FileOutputStream(filename);
keyStore.store(fos, somePassword.toCharArray());
fos.close(); 
```

# facebook - 如何在cakephp中使用facebook connect实现注销，同时保留facebook登录？

> ID：11030197
> 
> 赞同：1
> 
> 时间：2012-06-14T09:25:33.970
> 
> 标签：facebook, cakephp

您如何在 facebook api 中从您的网站注销用户，同时仍然让用户使用 cakephp 登录 facebook？（我找到了答案，所以想和大家分享）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T09:25:34.313

[在阅读CakePHP facebook integration logout issue with CakePHP-Facebook-Plugin](https://stackoverflow.com/q/9137728/1133577)之后，我刚刚想到了这一点。

基本上，虽然在带有 webtechnick 示例的演示中，他将“Facebook.Connect”组件放在 AppController 中，但如果您想要选择性注销部分，最好的放置位置实际上是在您想要使用它的实际控制器中in. 或者将其留在 AppController 中并传递`noAuth=> true`给 Facebook.Connect 组件。

无论哪种方式，无论您选择哪种方式，您都设置了一个控制器（facebook_controller.php？）来处理 facebook 登录，并将其组件设置为 noauth 设置为 false（这是默认设置，意味着 DO 验证 [阅读 connect.php 以了解这]）。这样，您可以完全控制用户何时登录到站点，并且您实际上可以将它们注销（使用常规`redirect($this->Auth->logout()`），而无需让连接组件在重定向时立即将它们重新登录。下面是一个实现：

让我给你一个想法：

app_controller.php

```
class AppController extends Controller {
    var $components = array('Auth', 'Acl', 'Session');
       //or if you want access to "$this->Connect" universally:
       //   array('Auth', 'Facebook.Connect' => 
       //                      array('noauth'=>'true'), 'Acl', 'Session');
} 
```

users_controller.php：

```
class UsersController extends AppController{
var $helpers = array('Facebook.Facebook');
        //an example of the users controller, enabling connect, but
        // not authorizing the user (because logout() used by Auth is here)
    var $components = array('Email', 'Session', 'Facebook.Connect' => array('createUser'=>false, 'noauth'=>true));

        //login() doesnt need to be shown and can be left alone for your traditional users

        function logout(){
              //if there is no fb user, do the logout normal
              if ($this->Connect->FB->getUser() == 0){
                    $this->redirect($this->Auth->logout());
        }else{
                //ditch FB data for safety
                $this->Connect->FB->destroysession();
                //hope its all gone with this
        session_destroy();
                //logout and redirect to the screen that you usually do.
        $this->redirect($this->Auth->logout());
        }
        }
} 
```

你的 "facebook_controller.php": class FacebookaController extends AppController { ... // 我个人不喜欢让他的作品创建我的用户，所以： var $components = array('Facebook.Connect' => array('createUser'=>错误的））; ...

```
function login(){
//just need this stub function for later
$this->autoRender = false;
}

//you also need this for deauths or they will still be able to get into the site after deauth (against policy or whatever)
    function deauthorize(){
    //get user id from facebook API
    $uid = $this->Connect->FB->getUser();
    $record = $this->User->findByFacebookId($uid);
    $this->User->delete($record['id'], FALSE);  
    }
} 
```

现在你的 users/login.ctp 文件：

```
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'your app id', // App ID
      channelUrl : '//'+window.location.hostname+'/facebook/channel', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
    FB.Event.subscribe('auth.statusChange', function(response){
        if (response.status == "connected"){
            alert('redirecting you to auto facebook login');
                //here is out default place for login
            window.location.href = "http://"+window.location.hostname + "/facebook/login";
        }
    });
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script>
<?php e($this->Facebook->login(array('registration-url'=>'http://www.yoursite.com/facebook/signup'))); ?> 
```

这应该差不多了。我希望这对阅读本文但仍需要帮助的人有所帮助。

# php - 按月显示日期

> ID：11030200
> 
> 赞同：0
> 
> 时间：2012-06-14T09:25:51.940
> 
> 标签：php, mysql, date

我从数据库中选择了一些日期并按月显示这些日期。我正在使用以下代码

```
$work_res = mysql_query("(SELECT DISTINCT date FROM `work_details` WHERE  employee_id='" . $emp_id . "' and date between  '" . $qsdate . "' and '" . $qedate . "') UNION (SELECT holy_date from holiday where holy_date between  '" . $qsdate . "' and '" . $qedate . "')");

    while ($row = mysql_fetch_array($work_res)) {
 echo date("F", $test_date).'<br>';
        while ((date("Y-m-d", $test_date) < $row['date']) && ($flag = 0)) {

            if (!(date('N', strtotime(date("Y-m-d", $test_date))) >= 6)) {

                echo "<tr ><td align=center class=fontclass style=color:FF0000>" . date("Y-m-d F", $test_date) . "</td></tr>";
            }
            $test_date = $test_date + ($day_incrementer * 60 * 60 * 24);
        }
        $flag = 1;

        while ((date("Y-m-d", $test_date) != $row['date'])) {

            if (!(date('N', strtotime(date("Y-m-d", $test_date))) >= 6)) {
                echo "<tr><td align=center class=fontclass style=color:FF0000>" . date("Y-m-d F", $test_date) . "</td></tr>";
            }
            $test_date = $test_date + ($day_incrementer * 60 * 60 * 24);
        }
        $test_date = $test_date + ($day_incrementer * 60 * 60 * 24);
    }

    while (date("Y-m-d", $test_date) <= date("Y-m-d", $end_date)) {
        if (!(date('N', strtotime(date("Y-m-d", $test_date))) >= 6)) {
            echo "<tr><td align=center class=fontclass style=color:FF0000>" . date("Y-m-d F", $test_date) . "</td></tr>";
        }
        $test_date = $test_date + ($day_incrementer * 60 * 60 * 24);
    }

    return;
} 
```

得到像这样的结果

```
2012-01-16 January
2012-01-26 January
2012-01-27 January
2012-02-02 February
2012-03-21 March
2012-03-22 March 
```

我想显示这些日期

```
 January (3)
    2012-01-16
    2012-01-26
    2012-01-27
February (1)
    2012-02-02 
March(2)
    2012-03-21 
    2012-03-22 
```

这可能吗？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:06:13.467

这是可行但需要测试的东西。您需要在 ***dateIsValid()***函数中插入您的逻辑。

```
<?php

$work_res = mysql_query("(SELECT DISTINCT date FROM `work_details` WHERE  employee_id='" . $emp_id . "' and date between  '" . $qsdate . "' and '" . $qedate . "') UNION (SELECT holy_date from holiday where holy_date between  '" . $qsdate . "' and '" . $qedate . "')");

 //Group all dates into their Months
 while($result =  @mysql_fetch_array($work_res))
  {
    $date = $result['date'];
    $month = date("F",$date );

    //Your complex logic in between...
    if(dateIsValid())
       $output[$month][] = date("Y-m-d", $date);
  }

 //Display as required
 foreach($output as $month => $dates)
  {
    echo $month." (".count($dates).")"; //Echo the month heading
    foreach($dates as $date) echo $date; //Echo the date
  } 
```

**备注：**

1.  这种分组在 SQL 中是可能的，并且很可能应该在那里完成。
2.  将所有逻辑移至单独的函数
3.  对于数据库访问，使用 PHP 的[PDO API](http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/)或像 redBean 这样的 ORM
4.  在你的代码中写注释 注释应该解释已经实现了什么逻辑。
5.  使用更好的变量名。
6.  使用 DateTime 而不是 date() （见下面的评论）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:12:03.647

您需要一个数组，其中键是完整的月份名称。你会想做这样的事情......

* * *

## 这是一个示例脚本：[http ://codepad.org/pJOpDr17](http://codepad.org/pJOpDr17)

```
$dateArray=array();

while (($row = mysql_fetch_array($work_res)){
    $d = new DateTime($row['date']);
    $monthName = $d->format('F');
    //$monthName = $d->format('F_Y'); (If you want month_year)
    $dateArray[$monthName][] = $row['date'];
} 
```

* * *

## 样本输出

```
array(3) {
  ["January"]=>
  array(3) {
    [0]=>
    string(10) "2012-01-16"
    [1]=>
    string(10) "2012-01-26"
    [2]=>
    string(10) "2012-01-27"
  }
  ["February"]=>
  array(1) {
    [0]=>
    string(10) "2012-02-02"
  }
  ["March"]=>
  array(2) {
    [0]=>
    string(10) "2012-03-21"
    [1]=>
    string(10) "2012-03-22"
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T10:19:27.377

而不是在将日期添加到数组时打印日期，例如

无论您在哪里使用 echo $test_date 附加到一个数组说

```
$leavesTakes[]=$date("Y-m-d F", $test_date) 
```

现在使用循环显示日期

```
for($i=0;$i<count($leavesTakes);$i++)
{
  $cnt=0;
  for($j=$i;$j<count($leavestaken);$j++)
  {
    if($leavesTaken[$i]!=$leavesTaken[$j])
        break;

     $cnt++;
  }

  //print month name
  echo '<tr><td> month name (' + $cnt + ')'; //print month name

  for(;$i<$j;$i++)        
    echo '<br/>$date("Y-m-d F", $leavesTaken[$i]);

   echo '</td></tr>';

} 
```

我不知道从日期打印月份名称的格式。所以请忽略打印月份名称并替换为实际的php函数来打印月份名称

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T09:57:07.810

你可以做这样的事情来得到你正在寻找的东西

像 Dutchie432 建议的那样使用 DateTime

```
result = array();
while ($row = mysql_fetch_array($work_res))
{
  $tmp_time = strtotime(row['date']);
  $tmp_month = date('F',$tmp_time);
  $tmp_date = date('Y-m-d', $tmp_time);
  if(!is_array($result[$tmp_month]))
  {
    $result[$tmp_month] = array();
  }
  array_push(result[$tmp_month], $tmp_date);
}

# this will print something similar to your req
foreach($result as $month => $dates)
{
  echo $month . " (" . $result[$month].length . ")";
  foreach($dates as $date)
  {
    echo $date;
  }
} 
```

# java-me - 如何在 J2ME for S60 中停止声音/音乐

> ID：11030202
> 
> 赞同：0
> 
> 时间：2012-06-14T09:25:55.733
> 
> 标签：java-me, s60, mmapi

当用户通过按 Series 60 中的挂断键退出应用程序时，我试图停止声音。但应用程序进入后台并且声音仍在播放。

当用户单击设备的挂断键时，我想停止声音。我调用了 的`stop()`方法`Player`。我还在 ; 处调用了该`stop()`方法`hidNotify()`。

```
{
    Player p;

    p.start();
    p.stop();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:07:36.533

当用户退出时，AMS 调用（或应该调用）MIDlet 的 destroyApp() 方法。

尝试将您的 p.stop() 命令放在那里。（以及其他清理代码）。

# android - Android 如何在操作栏中制作可点击的徽标图标？

> ID：11030204
> 
> 赞同：7
> 
> 时间：2012-06-14T09:25:57.323
> 
> 标签：android, android-actionbar

我正在为我的应用程序使用 SherlockActionBar。在我的清单中，我为徽标和启动定义了图标。

```
 android:icon="@drawable/ic_launcher" 
```

如何使其可点击并处理它的按下事件？我希望能够通过按徽标返回我的仪表板。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-14T09:33:01.360

采用

```
actionBar.setDisplayHomeAsUpEnabled(true); 
```

和

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        //Do stuff
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T10:25:02.207

您可以在此处阅读有关主页按钮的更多信息[http://developer.android.com/guide/topics/ui/actionbar.html#Home](http://developer.android.com/guide/topics/ui/actionbar.html#Home)

它解释了如何清除以前的活动堆栈，并提供了更多指向使用主页按钮导航的最佳实践的链接。

# objective-c - 如何在目标 c 中绘制大量线条和形状？

> ID：11030208
> 
> 赞同：1
> 
> 时间：2012-06-14T09:26:13.707
> 
> 标签：objective-c, performance, drawing, lines

我在过去 5 个月使用目标 c。所以现在我想制作一个用户能够通过交互（例如手指滑动）绘制大量线条的应用程序。

所以我开始使用drawrect方法和Core图形库。因此，我创建了一个包含 CGPoints 的数组，并在调用 [self setNeedsDisplay] 时，appi 从一开始就重新绘制了整个屏幕（drawrect 中的 for 循环，因为我需要在 TouchesMoved 中能够在手指移动期间绘制和擦除线条）。例如，当阵列超过 1000 行时，就会出现问题，因为响应速度很慢。

除了寻求更好的性能外，我还做了一些方法来绘制视图中的每一行，然后添加这个视图（使用 CGBitmapContextCreate、uiimageview），（对于 TouchesMOved，appi 每次都删除前一个视图并添加新视图）。

不幸的是，结果是一样的。在画布上添加越来越多的上下文（线条、形状等）时，性能很差。

如果您能回答这个问题，我将不胜感激。哪种技术最适合在画布上绘制大量线条？Cocos 2d 是一个选项？Open gl 是我最后的选择，我更喜欢 coreGraphics 库附近的解决方案。有没有办法使用核心图形在绘制第一行和绘制第 1000 行时具有相同的性能？

对不起我的英语不好..：（

下面更新 15/06/12 是代码。我从这篇文章中使用了 Dimitris 的一些想法：

[在 UIView (iPhone) 中增量绘图](https://stackoverflow.com/questions/1798414/drawing-incrementally-in-a-uiview-iphone)

```
- (BOOL) initContext:(CGSize)size {

    int bitmapByteCount;
    int bitmapBytesPerRow;

    bitmapBytesPerRow = (size.width * 4);
    bitmapByteCount = (bitmapBytesPerRow * size.height);

    cacheBitmap = malloc( bitmapByteCount );

        cacheBitmapSwiped= malloc( bitmapByteCount );

    ctx = CGBitmapContextCreate (cacheBitmap, size.width, size.height, 8,   bitmapBytesPerRow, CGColorSpaceCreateDeviceRGB(), kCGImageAlphaNoneSkipFirst);

        //for finger sweaping
       cacheContextSwiped = CGBitmapContextCreate (cacheBitmapSwiped, size.width,      size.height, 8, bitmapBytesPerRow, CGColorSpaceCreateDeviceRGB(), kCGImageAlphaNoneSkipFirst);

    return YES;
}

//method which draw a line on TouchesEND action

- (void) drawLine:(id)sender {

    UIColor *color = [UIColor colorWithRed:0.0 green:0.0 blue:1.0 alpha:1.0];

    CGContextSetStrokeColorWithColor(ctx, [color CGColor]);
    CGContextSetLineWidth(ctx, 4);

    //outArray:array which holds cgpoints
    if ([outArray count] > 0)
    {

        CGPoint point1  = [(NSValue *)[[outArray objectAtIndex:[outArray count] -1 ] objectAtIndex: 0] CGPointValue];
        CGPoint point2  = [(NSValue *)[[outArray objectAtIndex:[outArray count] -1 ] objectAtIndex: 1] CGPointValue];

        ///ADDON
        CGRect rectPoint1 = CGRectMake(point1.x-10, point1.y-10, 20, 20);
        CGRect rectPoint2 = CGRectMake(point2.x-10, point2.y-10, 20, 20);
        CGRect newRect = CGRectUnion(rectPoint1, rectPoint2);

        ///ADD NEW CHECK
    if (CGRectContainsPoint(newRect, point1) && CGRectContainsPoint(newRect, point2))             {    
            CGContextMoveToPoint(ctx, point1.x, point1.y);
            CGContextAddLineToPoint(ctx, point2.x, point2.y);
            CGContextStrokePath(ctx);
    }

        [self setNeedsDisplayInRect:newRect];

    }    

}

//method which draws lines on TouchesMoved action
//draw in rect

-(void)drawLineSwiped:(id)sender{

    //size of main image RECT
    CGSize mainImageRectSize = mainImageRect.size;

    int bitmapByteCount;
    int bitmapBytesPerRow;

    // Declare the number of bytes per row. Each pixel in the bitmap in this
    // example is represented by 4 bytes; 8 bits each of red, green, blue, and
    // alpha.
    bitmapBytesPerRow = (mainImageRectSize.width * 4);
    bitmapByteCount = (bitmapBytesPerRow * mainImageRectSize.height);

    // Allocate memory for image data. This is the destination in memory
    // where any drawing to the bitmap context will be rendered.
    //bitmap data

    //bitmap data for finger sweaped
    cacheBitmapSwiped= malloc( bitmapByteCount );

    //for finger sweaping
    cacheContextSwiped = CGBitmapContextCreate (cacheBitmapSwiped, mainImageRectSize.width, mainImageRectSize.height, 8, bitmapBytesPerRow, CGColorSpaceCreateDeviceRGB(), kCGImageAlphaNoneSkipFirst);

    UIColor *color = [UIColor colorWithRed:0.0 green:0 blue:1.0 alpha:1.0];

    CGContextSetStrokeColorWithColor(cacheContextSwiped, [color CGColor]);
   CGContextSetLineWidth(cacheContextSwiped, 2);

    if ([outArray count] > 0)
    {

        CGPoint point1  = [(NSValue *)[[outArray objectAtIndex:[outArray count] -1 ] objectAtIndex: 0] CGPointValue];
        CGPoint point2  = [(NSValue *)[[outArray objectAtIndex:[outArray count] -1 ] objectAtIndex: 1] CGPointValue];

        CGRect rectPoint1 = CGRectMake(point1.x-10, point1.y-10, 20, 20);
        CGRect rectPoint2 = CGRectMake(point2.x-10, point2.y-10, 20, 20);

        CGRect newRect = CGRectUnion(rectPoint1, rectPoint2);

        if (CGRectContainsPoint(newRect, lastPoint1) && CGRectContainsPoint(newRect, newPoint)) {
            //draw line into the screen

            CGContextMoveToPoint(cacheContextSwiped, point1.x, point1.y);
            CGContextAddLineToPoint(cacheContextSwiped, point2.x, point2.y);
            CGContextStrokePath(cacheContextSwiped);

        }

        free(cacheBitmapSwiped);

        [self setNeedsDisplayInRect:newRect];

    }    

}

- (void)drawRect:(CGRect)rect {

    context = UIGraphicsGetCurrentContext();

    if (mouseEnded) {
        CGImageRef cacheImage;
        cacheImage= CGBitmapContextCreateImage(ctx);
        CGContextDrawImage(context, self.bounds, cacheImage);
        CGImageRelease(cacheImage);
   }

    else if(mouseSwiped ){

        CGImageRef cacheImageSwiped;

        cacheImageSwiped= CGBitmapContextCreateImage(cacheContextSwiped);
        CGContextDrawImage(context, self.bounds, cacheImageSwiped);
        CGImageRelease(cacheImageSwiped);
    } 
```

另外我不得不说我有一个在 TouchesBegan、TouchesMoved、TouchesEnded 中运行的方法（在 outArray 中添加 cgpoints）。

所以我试图在手指移动期间画一条线（在移动过程中也删除了前一条线），但底层（或以前的 -end- 线）从我的屏幕上消失了。我还尝试在手指移动期间添加一个子视图（在此模型中），同时删除以前的子视图，但也增加了应用程序的延迟。

到现在为止，绘画的情况对我来说太混乱了。在 android 中，这是一个绘制 (onDraw) 的方法，此方法更新视图并且不会覆盖它（使用 invalidate() 调用）。你有什么建议吗？我必须重复一遍，我想在没有（光学）延迟的情况下以良好的性能绘制第 1200 条线。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:59:01.763

您应该做的第一个优化是只重绘需要更新的区域。而不是`setNeedsDisplay`in `touchesMoved:withEvent:`，计算您需要更新的区域（基本上是一个包含最后两个触摸位置的矩形）并`setNeedsDisplayInRect:`使用该区域进行调用。

然后，在您的`for`循环中`drawRect:`，确定任何给定的形状是否落入此矩形，如果是，则仅绘制它。

# css - 网站中的“可滚动”区域和“不可滚动”区域

> ID：11030210
> 
> 赞同：0
> 
> 时间：2012-06-14T09:26:21.313
> 
> 标签：css, html, block

**照片（请查看）：[示例](http://i.imgur.com/KHmb8.png)**

嘿伙计们，我是新来的。我也是网站设计的新手。另外，我知道“可滚动”这个词是无效的。

我正在创建一个照片库，这就是它的外观。那里有黑块，基本上它们是有目的的。我希望菜单（左侧）始终保持原位，即使在滚动时也是如此，这意味着用户唯一能做的就是在照片区域向下滚动。在我看来，这些块可以以某种方式给我这个选项，虽然我不确定。这就是我在这里问它的原因。

我怎样才能将菜单变成稳定的内容，而照片的区域不会那样？如果您逐步指导我，我将非常感激（但不会花费您的时间超过需要的时间）！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:28:40.600

像这样写：

```
.menu{
 position:fixed;
 left:0;
 top:0;
} 
```

检查这个[http://jsfiddle.net/ewBk4/1/](http://jsfiddle.net/ewBk4/1/)

阅读此[http://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/](http://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/)

# asp.net - 如何在我的网站中添加 bbc 天气？

> ID：11030223
> 
> 赞同：-10
> 
> 时间：2012-06-14T09:26:56.543
> 
> 标签：asp.net

我正在使用 dotnetnuke cms 在 asp.net 中开发一个网站。我需要在我的网站上添加天气投射报告。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T09:42:17.443

我再次同意上述所有内容，您没有提供有关您正在做什么或您尝试过的任何代码或信息......您尝试过任何事情还是希望我们为您提供解决方案？无论如何，咆哮，不再讽刺......这些可能会有所帮助，但是 BBC Backstage API 已经停止：

[使用 BBC 后台天气](http://www.cordinc.com/blog/2008/11/using-bbc-backstage-weather.html)

[入侵 BBC](http://backstage.bbc.co.uk/)

[BBC 新闻和天气 Vista 小工具](http://backstage.bbc.co.uk/prototypes/)

# ajax - 在 DOM 中引用 JSF 组件

> ID：11030224
> 
> 赞同：0
> 
> 时间：2012-06-14T09:27:07.747
> 
> 标签：ajax, jsf, dom

使组件在 DOM 中永久可用的最佳方法是什么？我目前有以下内容：

```
<h:form id="navigationForm">
           <pou:menu id="navigationMenu">  
                    <pou:submenu label="#{web['NavigationMenuLabel']}">  

                        <pou:menuitem value="#{web['NavigationMenuDashboard']}"
                                      action="#{accountData.viewAccountDashboard()}"
                                      update=":accountForm:accounts"/>

                        <pou:menuitem value="#{web['NavigationMenuRoleOneAccounts']}"
                                      action="#{accountData.viewRoleOneAccounts()}"
                                      update=":accountForm:accounts"/>

                    </pou:submenu>   
          </pou:menu> 
</h:form>

<h:form id="accountForm" rendered="#{accountData.renderTables()}">  

                #{accountData.populateDataTable()}

                <pou:dataTable id="accounts" 
                               var="account"
                               paginator="true" 
                               rows="10"
                               emptyMessage="#{web['NoAccountsData']}"
                               selection="#{accountData.selectedAccounts}"
                               rowKey="#{account.uuid}"
                               value="#{accountData.accountDataModel}"> 
... 
```

问题是......毫不奇怪，accountForm 并不总是存在（这就是重点），因此它不会更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:07:43.233

我不知道为什么我以前没有想到这个！您需要做的就是包装永久存在的 UI 组件。我用过，`<h:panelGroup>`但我想你可以使用适合你情况的。所以在我的情况下：

```
<h:form id="navigationForm">
       <pou:menu id="navigationMenu">  
                <pou:submenu label="#{web['NavigationMenuLabel']}">  

                    <pou:menuitem value="#{web['NavigationMenuDashboard']}"
                                  action="#{accountData.viewAccountDashboard()}"
                                  update=":example"/>

                    <pou:menuitem value="#{web['NavigationMenuRoleOneAccounts']}"
                                  action="#{accountData.viewRoleOneAccounts()}"
                                  update=":example"/>

                </pou:submenu>   
      </pou:menu> 
</h:form>

<h:panelGroup id="example" layout="block">
    <h:form rendered="#{accountData.renderTables()}">  

            #{accountData.populateDataTable()}

            <pou:dataTable id="accounts" 
                           var="account"
                           paginator="true" 
                           rows="10"
                           emptyMessage="#{web['NoAccountsData']}"
                           selection="#{accountData.selectedAccounts}"
                           rowKey="#{account.uuid}"
                           value="#{accountData.accountDataModel}"> 
    ...
</h:panelGroup> 
```

# java - 如何在jsp页面而不是xml格式中显示solr的结果？

> ID：11030225
> 
> 赞同：1
> 
> 时间：2012-06-14T09:27:10.860
> 
> 标签：java, solr, nutch, requesthandler, websolr

我是 solr 的新手。

我想要将solr的结果输出成jsp格式或者页面

默认情况下，它以 xml 格式显示结果。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:43:22.387

基本上你需要在你的java代码上解析xml。
在执行此操作之前，您需要找到在代码中调用 solr url 的方法。有几种方法可以做到这一点，最基本的一种是使用`org.apache.http.client.HttpClient`执行 post 方法。
然后，您可以解析返回的数据、xml 格式数据并将其加载到您的 jsp 页面上。

请参考以下教程：
1\. [HttpClient使用概述](http://hc.apache.org/httpclient-3.x/tutorial.html)
2.[使用Java解析XML](http://www.java-samples.com/showtutorial.php?tutorialid=152)

# actionscript-3 - 如何将 scaleX scaleY 设置为高级数据网格中的特定行

> ID：11030232
> 
> 赞同：0
> 
> 时间：2012-06-14T09:27:17.637
> 
> 标签：actionscript-3, apache-flex, flex4, flex3

是否可以将 scaleX scaleY 赋予高级数据网格中的特定行。我有一个高级数据网格，因为我为每一列使用了单独的 itemrenderers。现在要求从行中，一个特定的行应该像 scalex 一样有效。我搜索了在谷歌中，我没有找到任何解决方案，而是找到了如何设置行背景颜色，但我需要对选定行以外的特定行进行一些缩放效果。请给我一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:22:25.117

对于您的问题，您需要在 datagrid 单元格中添加子显示对象（作为项目），并且您必须将数据放入特定的显示对象中。并且您可以在作为单元格子级呈现的显示对象上应用缩放。

直接您不能将缩放应用于数据网格的单元格...。

请参阅此答案以获取[代码示例](https://stackoverflow.com/questions/1395016/add-movieclips-and-controlling-them-in-a-datagrid-in-as)

另一个相同的例子：[点击这里](http://www.kirupa.com/forum/showthread.php?307322-Attach-Movieclip-to-Datagrid-Cell-%28and-detect-mouse-click-on-cellRenderer%29)

UI 组件或任何其他呈现为单元格项目的显示对象，褶皱对其应用缩放

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:39:04.653

您需要覆盖渲染器并向其添加自定义样式。当该样式获得一个值时，使用该值设置 scaleX、scaleY。然后，您可以使用 ADG 上的 styleFunction 来设置该值。您可以看到[这里](http://flexdiary.blogspot.com/2008/09/extended-datagrid-with-stylefunction.html)演示的概念，使用我的 DataGrid_withStyleFunction 类，我在 DataGrid 之上添加了 styleFunction。

# ravendb - 我应该如何从每日提要中更新多个 RavenDB 文档？

> ID：11030235
> 
> 赞同：0
> 
> 时间：2012-06-14T09:27:27.230
> 
> 标签：ravendb, ravenhq

我正在使用 RavenDB 来保存数千个文档。数据来自每日 xml 提要，我将通过运行 C# 控制台应用程序对其进行更新。下面是处理提要以使数据库与任何更改保持同步的代码。我对此有很多问题，所以我想知道我是否选择了错误的策略。以下是一些需要注意的重要事项。

1.  新项目可能已添加到提要中，现有项目可能已更改，因此每次运行时，我都想添加或更新文档，具体取决于它是否是新的。
2.  xml 提要不包含对我的 RavenDB ID 的任何引用，仅包含每个项目的内部密钥。因此，在检索要更新的现有文档时，我只能通过检查文档上的“SourceID”属性来做到这一点。
3.  我使用“take”一次只能处理 500 个文档，部分原因是我的数据库限制为 1000 个文档，部分原因是没有 Take() 我似乎只能检索 128 个文档。
4.  就目前而言，此代码因“在一个会话中不能进行超过 30 次更新”错误而失败，我认为是因为每次我尝试从 dbItems 检索现有记录时，它实际上都会再次访问数据库。
5.  我可以通过在项目上调用 ToList() 来解决上面 (4) 的问题，但是如果我这样做，则在我调用 session.SaveChanges() 时现有项目不会得到更新（我想象这就像一个断开连接的记录集） .

谁能给我一些指示？

```
 public void ProcessFeed(string rawXml)
        {
            XDocument doc = XDocument.Parse(rawXml);
            var items = ExtractItemsFromFeed(doc).OrderBy(x => x.SourceId).Take(500);
            using (IDocumentSession session = _store.OpenSession())
            {
                var dbItems = session.Query<AccItem>().OrderBy(x => x.SourceId).Take(500);
                foreach (var item in items)
                {
                    var existingRecord = dbItems.SingleOrDefault(x => x.SourceId == item.SourceId);
                    if (existingRecord == null)
                    {
                        session.Store(item);
                        _logger.Info("Saved new item {0}.", item.ShortName);
                    }
                    else
                    {
                        // update just one field for now
                        existingRecord.Village = item.Village;
                        _logger.Info("Updated item {0}.", item.ShortName);
                    }
                }
                session.SaveChanges();
            }            
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:31:40.777

下面是我最终得到的代码。我认为原始版本的最初问题只是我试图对每个项目使用相同的会话，打破了 30 个限制。

在 TekPub 截屏视频中，屏幕上的一些代码提示我通过将整个过程批处理成 15 个组（以允许一次读取和一次写入，因此每批总共 30 个请求）来解决此问题。这很慢，但并不像我预期的那样慢。我预计一次可能有 10,000 条记录，所以我会一直等到它完成。

```
public void ProcessFeed(string rawXml)
{
    XDocument doc = XDocument.Parse(rawXml);
    var items = ExtractItemsFromFeed(doc).OrderBy(x => x.SourceId);
    int numberOfItems = items.Count;
    int batchSize = 15;
    int numberOfBatchesRequired = numberOfItems / batchSize;
    int numberOfBatchesProcessed = 0;
    int numberOfItemsInLastBatch = numberOfItems - (numberOfBatchesRequired * batchSize); 
    for (var i = 0;i <= numberOfBatchesRequired;i++)
    {
        using (IDocumentSession session = _store.OpenSession())
        {
            var numberOfItemsProcessedSoFar = numberOfBatchesProcessed * batchSize;
            var numberOfItemsRemaining = numberOfItems - numberOfItemsProcessedSoFar;
            int itemsToTake = 15;
            if (numberOfItemsRemaining > 0 && numberOfItemsRemaining < 15)
            itemsToTake = numberOfItemsRemaining;
            foreach (var item in items.Skip(numberOfItemsProcessedSoFar).Take(itemsToTake))
            {
            var existingRecords = session.Query<AccItem>().Where(x => x.SourceId == item.SourceId).ToList();
            if (!existingRecords.Any())
            {
                session.Store(item);
                _logger.Info("Saved new item {0}.", item.ShortName);
            }
            else
            {
                if (existingRecords.Count() > 1)
                _logger.Warn("There's more than one item in the database with the sourceid {0}", item.SourceId);
                existingRecords.First().Village = item.Village;
                _logger.Info("Updated item {0}.", item.ShortName);
            }
            session.SaveChanges();
            }
        }            
        numberOfBatchesProcessed++;
    }
} 
```

# jquery - 如何防止在 jquery $.getJSON() 上重新排序字典

> ID：11030238
> 
> 赞同：1
> 
> 时间：2012-06-14T09:27:32.593
> 
> 标签：jquery, dictionary

我正在使用 JQuerys 检索字典 $.getJSON(); 通过网络发送的数据是

> {"0":"Item1","82":"Item2","1":"Item3","4":"Item4"}

然后我尝试使用循环构建一个选择列表

```
for (var key in data) {
    var item = new Option(data[key], key);
    target.options.add(item);
} 
```

选择列表以错误的顺序结束，因为从字典中出来的值的顺序是键值的顺序。换句话说，它们按以下顺序出现

```
0: Item1
1: Item3
4: Item4
82: Item2 
```

我期待他们遇到电线的顺序。

```
0: Item1
82: Item2
1: Item3
4: Item4 
```

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T09:32:33.453

对象的属性（实际上就是这样）没有特定的顺序。

改用数组：

```
[{"id":"0","name":"Item1"},{"id":"82","name":"Item2"},{"id":"1","name":"Item3"},{"id":"4","name":"Item4"}]

for (var item in data) {
  var opt = new Option(item.id, item.name);
  target.options.add(opt);
} 
```

# java - 使用没有套接字的java将图像文件发送到客户端

> ID：11030245
> 
> 赞同：0
> 
> 时间：2012-06-14T09:27:46.653
> 
> 标签：java, cordova

我在客户端（ipad）中使用文件下载 phonegap 从互联网下载图像文件。现在我需要通过我的 java 服务器发送图像。我将图像发送为`stream`，但客户端需要一个文件。如果我将图像文件作为流发送，则意味着它没有下载图像文件。如何在不使用的情况下将图像文件作为文件发送`sockets`？

我的服务器端代码是：

```
String file_location=request.getQueryString();
String[] splitable=file_location.split("&");
String[] document_name=splitable[0].split("=");
String[] document_page=splitable[1].split("=");

PDFDocumentManag er documentManager;
try
{
    ServletOutputStream out = response.getOutputStream();
    //String location=loadClass.fileLocation(document_name[1]);
    String location="D:/Processing/893210.pdf";
    documentManager = new PDFDocumentManager(new File(location));
    documentManager.setPageNum(Integer.parseInt(document_page[1]));
    response.setContentType("image/gif"); 
    ImageIO.write(documentManager.getImage(), "gif", new File("D:/testing/out.gif"));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:32:06.807

我不确定我是否正确理解了您的问题，但您可能需要“内容处置”尝试

```
response.setHeader("Content-Disposition", "attachment; filename=\"" + fileName + "\""); 
```

# iphone - 如何在 iOS 中将图像加载到 UITableView 中？

> ID：11030249
> 
> 赞同：0
> 
> 时间：2012-06-14T09:27:55.577
> 
> 标签：iphone, ios, uitableview

我有一个 tableView，我想用来自 iOS 设备的相机/库源的图像填充表格的行。imagePicker 类提供了一个模式视图，一次可以选择和处理一个图像。但我想要的是访问存储在 iOS 设备中的图像并将它们加载到 tableView 对象。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:30:42.487

Apple 有一个很好的官方示例：http: [//developer.apple.com/iphone/library/samplecode/LazyTableImages/index.html](http://developer.apple.com/iphone/library/samplecode/LazyTableImages/index.html)我想你会在那里找到正确的方法......

# matlab - Libsvm 中的决策值

> ID：11030253
> 
> 赞同：1
> 
> 时间：2012-06-14T09:28:19.743
> 
> 标签：matlab, svm, libsvm, prediction

我是 SVM 的新手。我将 Libsvm 用于 Matlab，在预测阶段之后，我得到了一个决策值数组。从 SVM 理论：如果每个测试记录 z 被分配为正

> f(z)=1

其中 f(z) 定义为

> f(z)=符号(w*z+b)

那么如何将实例 z 的数组中的决策值与 f(z) 关联起来呢？基于决策值的预测是否是这样的：如果 dec_value>0 则 z 为正，否则 z 为负？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-14T21:18:36.360

是的，你是对的，如果 f(z) 为正，则实例属于 +1 类，如果为负，则属于 -1 类。f(z) 的值是不可解释的。

而功能：

f(z) = 符号(w*z+b)

看起来像超平面的方程，不同之处在于 w 不是法向量 - 它的长度不是 1，所以 f(z) 的值不是到超平面的距离，这就是为什么它被指定为符号（ ..)，以明确该值仅用于确定实例落在超平面的哪一侧。

**一些背景：**

目标是找到在两个类之间给出最大边距的超平面：

![在此处输入图像描述](../Images/47868fc89ccf200a09eccc0d48bb89d0.png)

因此，目的是最大化边际，![在此处输入图像描述](../Images/3353468537ea6d4f0a136667b347c919.png)因此最小化![在此处输入图像描述](../Images/478ff1567419e3e434828f04f8ac6353.png)。请记住，通常当**w**用于将超平面表示为法线向量时，![](../Images/478ff1567419e3e434828f04f8ac6353.png)为 1。这里的情况显然不是这样，因为不会有优化问题。我们没有保持![](../Images/478ff1567419e3e434828f04f8ac6353.png)= 1 并改变边距的宽度，而是将边距的宽度固定为 2，并允许![](../Images/478ff1567419e3e434828f04f8ac6353.png)改变大小。

这给了我们[原始优化问题](http://en.wikipedia.org/wiki/Duality_%28optimization%29)（具有软边距）：

![在此处输入图像描述](../Images/8a0a894ce8cd90e5756b8f4d0583840c.png)

这似乎是你所指的。然而，这个方程来自基本的软最大边距分类器，它是 SVM 的基础。真正的 SVM 被表述为[拉格朗日对偶](http://en.wikipedia.org/wiki/Duality_%28optimization%29)，以允许使用内核。SVM 的巧妙之处在于，当上述问题（及其约束）用拉格朗日公式表示时，除拉格朗日乘数外的所有变量都退出了，给我们留下了以下问题：

![在此处输入图像描述](../Images/c19a03245b16400873cd40fe3eb7a1bb.png)

注意没有**w**。训练点*x*（*y*是标签，1 或 -1）现在仅作为点积一起出现，允许我们使用[核技巧](http://en.wikipedia.org/wiki/Kernel_trick)来获得非线性模型。

但是如果我们没有**w**我们的决策函数是什么？它成为我们的*支持向量*和我们发现的拉格朗日乘数的函数。

![在此处输入图像描述](../Images/9cb32a1285d6eac7cf417aac2a665f8c.png)

这就是 libsvm 生成的内容以及它作为您训练的模型存储的内容。它存储支持向量和相关的 alpha。对于线性支持向量机，您可以获得原始**w**，[这在 LibSVM 常见问题解答中进行了解释](http://www.csie.ntu.edu.tw/~cjlin/libsvm/faq.html#f804)，但它不会是您从 LibSVM 自动返回的，这只能用于线性内核。

基于拉格朗日乘数和支持向量的 SVM 决策函数的值也只能由其符号来解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T12:50:42.593

阅读文档告诉我：

> 第三个 [返回值] 是一个包含决策值或概率估计的矩阵（如果指定了“-b 1”）。如果 k 是训练数据中的类数，对于决策值，每行包括预测 k(k-1)/2 个二元类 SVM 的结果。

所以对于一个二类问题，你得到的是一个包含决策值的向量`f(z)`，所以这意味着属于第一类的所有东西都有 d<0，而属于第二类的所有东西都有 d>0。

一般来说：libsvm 认为它的第一个类是它获得的第一个标签，依此类推。因此，为了获得可靠的结果，您需要先对数据进行排序。

在二进制情况下也是如此：无论您为 svmtrain 提供什么标签，它都会将遇到的第一个标签作为 1 类，将第二个标签作为 -1 类。这可以通过提供一个简单的数据集来简单地验证：

```
Y = [-ones(100,1);ones(100,1)];
m = svmtrain(Y,Y); % train with all labels as data (never do this in practices, not the "all" part, not the training on labels part ;)
[a,b,c] = svmpredict(Y,Y,m); % of course this will give 100% accuracy.
b' % you can see that the first label will always have an internal representation of 1. 
```

对于多类分类，这是不同的：它包含 k(k-1)/2 个条目，对应于每个像素的所有类场景。这意味着例如。一个 4 类问题，每个样本有 4*3/2 = 6 个值：

```
[ f12(z) f13(z) f14(z) f23(z) f24(z) f34(z)] 
```

现在，这些函数值如何通过一对一的方式映射到类，我无法通过查看代码轻松推断出......但我猜你最感兴趣的是 2 类案例，不是吗？

# android - 获取请求令牌时的Android Flickr Oauth invalid_signature

> ID：11030258
> 
> 赞同：2
> 
> 时间：2012-06-14T09:28:35.453
> 
> 标签：android, oauth, flickr

我正在尝试在 android 上创建一个 flickr 应用程序，但被困在请求请求令牌的身份验证中。

生成签名

API 密钥：-496a8ac6ca46325e6cef* ***** ******

API 秘密：-685682a92* ******

基本字符串：- `GET&http%3A%2F%2Fwww.flickr.com%2Fservices%2Foauth%2Frequest_token&oauth_callback%3Dsoft%253A%252F%252Fcom.alice.testflickr%26oauth_consumer_key%3D496a8ac6ca46325e6cef%26oauth_nonce%3D394e61453f7b82cd633d229ac9b6454b%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1339654651%26oauth_version%3D1.0`

生成签名的方法：-

```
 public String computeSignature(String baseString,String key)throws IllegalStateException, UnsupportedEncodingException, NoSuchAlgorithmException, InvalidKeyException{
            //here key is the appsecret+"&"
            byte[] byteHMAC = null;
     Mac mac = Mac.getInstance("HmacSHA1");
     SecretKeySpec spec = new SecretKeySpec(key.getBytes(),"HmacSHA1");
     mac.init(spec);
     byteHMAC = mac.doFinal(baseString.getBytes("UTF-8"));

     return new String(Base64.encode(byteHMAC,Base64.NO_WRAP));
} 
```

时间戳是`(System.currentTimeMillis)/1000`

随机数是`Long.toString(System.nanoTime());`

我请求这样的请求令牌：-

```
http://www.flickr.com/services/oauth/request_token?oauth_nonce=12190496931948&oauth_timestamp=1339664498&oauth_consumer_key=496a8ac6ca46325e6cef&oauth_signature_method=HMAC-SHA1&oauth_version=1.0&oauth_signature=jg8CCdKb8gw%2BMJK0aJ6Brpba0G0%3D&oauth_callback=soft%3A%2F%2Fcom.alice.testflickr 
```

但我总是最终得到

```
oauth_problem=signature_invalid&debug_sbs=GET&http%3A%2F%2Fwww.flickr.com%2Fservices%2Foauth%2Frequest_token&oauth_callback%3Dsoft%253A%252F%252Fcom.alice.testflickr%26oauth_consumer_key%3D496a8ac6ca46325e6cef%26oauth_nonce%3D12190496931948%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1339664498%26oauth_version%3D1.0 
```

我生成签名的方式有问题还是这里有任何其他问题。编辑：basestring中timestamp的值和请求是一样的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:24:54.140

Flickr 文档说签名过程应该是这样的：

> 所有使用身份验证令牌的 API 调用都必须经过签名。此外
> ，还必须对 flickr.auth.* 方法的调用和到
> flickr 上的身份验证页面的重定向进行签名。
> 
> 签约流程如下。
> 
> *   根据参数名称将参数列表按字母顺序排序。
>     例如
>     foo=1, bar=2, baz=3 排序为 bar=2, baz=3, foo=1
>     
>     
> *   连接共享密钥和参数名称-值对，
>     例如
>     SECRETbar2baz3foo1
>     
>     
> *   计算这个字符串的 md5() 哈希
>     
>     
> *   将此值附加到名称为 api_sig 的参数列表中，采用十六进制字符串形式，
>     例如
>     api_sig=1f3870be274f6c49b3e31a0c6728957f

# iphone - 将照片从照片库导入 xcode 的资源文件夹（目标 C）

> ID：11030259
> 
> 赞同：0
> 
> 时间：2012-06-14T09:28:37.700
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在 xcode 中开发一个 iPad 应用程序。在 iPad 模拟器中，我在其照片库中有一些照片。如何将其中一张照片添加到 xcode 的资源文件夹中？有可能吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:36:22.460

它与驻留在硬盘上的任何其他文件一样。模拟器的路径如下所示：

```
Users/INSERT_YOUR_USER_HERE/Library/Application Support/iPhone Simulator/ 
```

挖掘这些目录，直到找到您的应用程序，复制文件，然后将其添加到您的 XCode 项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:37:19.503

看到这些线程

[捆绑和文件访问](https://stackoverflow.com/questions/916824/iphone-bundles-and-file-access)

[https://discussions.apple.com/thread/1731074?start=0&tstart=0](https://discussions.apple.com/thread/1731074?start=0&tstart=0)

# php - Mysql 结果是资源但不显示

> ID：11030261
> 
> 赞同：-1
> 
> 时间：2012-06-14T09:28:41.893
> 
> 标签：php, mysql

好的，所以我有这个代码：

```
if (isset($_GET['book'])) {

$query= "SELECT  book_id, title, authors.`author` , publishers.`publisher` , formats.`format` , genres.`genre` , usersdb.users.username, pages, isbn, description, DATE_FORMAT( books.`release_date` ,  '%M, %d, %Y' ) AS  `release_date` 
    FROM books
    INNER JOIN  `authors` ON (  `authors`.`author_id` =  `books`.`author_id` ) 
    INNER JOIN  `publishers` ON (  `publishers`.`publisher_id` =  `books`.`publisher_id` ) 
    INNER JOIN  `formats` ON (  `formats`.`format_id` =  `books`.`format_id` ) 
    INNER JOIN  `genres` ON (  `genres`.`genre_id` =  `books`.`genre_id` ) 
    INNER JOIN usersdb.users ON ( usersdb.users.user_id = bookdb.books.user_id ) 
    WHERE books.book_id= ".$_GET['book']."";
    $query=@mysql_query ($query, $dbc1);

if ($query) {
var_dump ($query);
while($row=mysql_fetch_assoc($query)){

echo '<h1>'.$row['title'].'</h1>
  <p>'.$row['author'].'</p>
  <p>'.$row['publisher'].'</p>
  <p>'.$row['format'].'</p>
  <p>'.$row['genre'].'</p>
  <p>'.$row['pages'].'</p>
  <p>'.$row['isbn'].'</p>
  <p>'.$row['release_date'].'</p>
  <p>'.$row['description'].'</p>
  <p>'.$row['username'].'</p>';
}
}
} 
```

对于某些条目，它绝对可以正常工作，并且所有信息都可以正确显示并且很好，但是对于新条目，由于某种原因，信息根本不会显示。

mysql 查询运行正确，正如您所看到的，我已经完成了一个 var_dump() 并返回`resource(11, mysql result)`，所以资源肯定在那里，它似乎没有通过 while 语句运行。

如果您能明白为什么会发生这种情况，那将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:32:12.953

如果您只是删除“@”，您会看到可能有错误。在 PHP 中，使用“@”是一个错误。你可能永远不会使用它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T09:35:03.560

尝试`echo mysql_num_rows($query)`是否正在获取任何记录。

如果它返回一些值，请尝试删除@，这可能是错误的原因

# spring - Spring工厂bean返回多个对象

> ID：11030263
> 
> 赞同：1
> 
> 时间：2012-06-14T09:28:50.957
> 
> 标签：spring

我想读取一个不是标准 spring xml 格式的外部配置文件，并基于该文件创建 FooBean(s)。

Spring BeanFactory 接口只能创建一个对象，我想返回零个或多个对象，具体取决于外部配置文件。

我应该在 FooBeansHolder 是持有 FooBean(s) 的虚拟类的情况下实现 FactoryBean 吗？还是应该在调用 getObject() 时实现 FactoryBean、ApplicationContextAware 并将 bean 注入 BeanFactory ？特别是在这种情况下，我对 SpringConfig 不感兴趣（请不要使用 @Bean）

依赖类请求将所有 FooBean(s) 注入其中：

```
@Autowired(required = true)
private FooBean[] foobeans; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:22:16.470

`FactoryBean`有一个方法-如果您希望工厂生产多个 bean，`isSingleton()`它应该返回。`false`查看其 javadocs 以获取更多详细信息（它提到`SmartFactoryBean`）

# jquery - jQuery datepicker 与 Twitter Bootstrap 不兼容吗？

> ID：11030266
> 
> 赞同：4
> 
> 时间：2012-06-14T09:29:00.367
> 
> 标签：jquery, twitter-bootstrap

我有想要在页面上显示的日期选择器。我尝试过使用 JQ 1.6.4 和 1.7.2。我在 Ubuntu 上使用带有 Chromium 的 playframework v1.2.4。

这是我正在使用的代码。这是我试图展示选择器的视图。

```
#{extends 'main.html' /} #{set title:'Download Team Data' /}

<table align="center">
    <tr>
        <td height="50px">&nbsp;</td>
    </tr>
</table>

<div class="page-header">
    <a href="@{Application.downloadAttendanceData()}">Download
        your team's data for this cycle.</a>
</div>
<div class="demo">
    <p>
        Date: <input type="text" id="datepicker">
    </p>
</div>
<script>
    $(function() {
        $("#datepicker").datepicker();
    });
</script> 
```

加载 JavaScript 和 CSS 文件，`main.html`其中是在所有视图中扩展的视图。此外，我尝试在上述视图中引用这些文件。这些是参考：

```
<head>
<title>#{get 'title' /}</title>
<meta http-equiv="Content-Type" content="text/html"
    charset="${_response_encoding}">
<link rel="stylesheet" media="screen"
    href="@{'/public/stylesheets/main.css'}">
<link rel="stylesheet" media="screen"
    href="@{'/public/stylesheets/demo.css'}">
<link rel="stylesheet" href="@{'public/bootstrap/css/bootstrap.css'}">
<link rel="stylesheet"
    href="@{'public/bootstrap/css/bootstrap.min.css'}">
<link rel="stylesheet"
    href="@{'public/bootstrap/css/bootstrap-responsive.css'}">
<link rel="stylesheet" href="@{'public/bootstrap/less/bootstrap.less'}">

#{get 'moreStyles' /}
<link rel="shortcut icon" type="image/png"
    href="@{'/public/images/favicon.png'}">
<script src="@{'/public/javascripts/jquery-1.7.2.min.js'}"
    type="text/javascript"></script>
<script src="@{'/public/javascripts/jquery-ui-1.8.21.custom.min.js'}"
    type="text/javascript"></script>
<script src="@{'/public/javascripts/jquery.ticker.js'}"
    type="text/javascript"></script>
#{get 'moreScripts' /}
<script src="@{'/public/javascripts/testapp.js'}" type="text/javascript"></script>
<script src="@{'/public/bootstrap/js/bootstrap-alert.js'}"
    type="text/javascript"></script>
<script src="@{'/public/bootstrap/js/bootstrap-collapse.js'}"
    type="text/javascript">
</script>
<script>
function loaded(){
}
</script>

</head> 
```

单击输入框不会显示日期选择器。我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T14:22:31.300

将 jQuery UI 与 Twitter Bootstrap 一起使用并不是一个好主意。主要是因为 CSS 类很容易被覆盖并导致显示各种组件时出现问题。有些事情可能会奏效，有些可能不会，这不是一个全有或全无的事情。

话虽如此，您可能想看看[这个 Bootstrap datepicker](http://www.eyecon.ro/bootstrap-datepicker/)插件。

如果它不满足您的需求，您将不得不找出 jQuery UI 和 Bootstrap 之间有哪些类冲突并修复它们。Chrome 的 CSS 查看器可让您查看哪些类对元素的样式有贡献（或缺少）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:32:37.850

您拥有`test_input`身份，但将日期选择器绑定到`input_test`

# entity-framework - 使用 Entity Framework 4.3 更新实体 - 代码优先

> ID：11030269
> 
> 赞同：1
> 
> 时间：2012-06-14T09:29:04.860
> 
> 标签：entity-framework

我很难在实体框架中更新实体。

场景： - 我使用 new DbContext().GetById(guid) 加载实体 - 我尝试使用扩展方法保存该实体，然后使用 new DbContext()

这是我的更新方法：

```
 public virtual void Update(IEntity entityToUpdate)
    {
        var dbEntry = Context.Entry(entityToUpdate);
        if (dbEntry == null) return;

        if (Context.Entry(entityToUpdate).State == EntityState.Detached)
            DbSet.Attach(entityToUpdate);
        else
        {
            dbEntry.CurrentValues.SetValues(entityToUpdate);
            Context.Entry(entityToUpdate).State = EntityState.Modified;
        }

        Context.SaveChanges();
    } 
```

这是我的尝试集合。如果我使用 SetValues，我会被告知实体已分离，因此不可能，如果我使用附加，则会收到以下错误：'ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。

我显然在做一些根本错误的事情。有人可以在正确的方向上帮助我吗？

更新：

```
 protected void TransferClubs(object sender, EventArgs e)
    {
        var clubHelper = new ClubHelper();
        var club = clubHelper.GetClub(new Guid("A009D0CD-71C4-42E8-88E2-037F059B12EE"));
        club.AddUser(Guid.NewGuid(), ClubRoleType.Admin);
        club.AddUser(Guid.NewGuid(), ClubRoleType.Admin);

        club.Save();
    }

    public static bool Save(this ClubItem item)
    {
        var clubHelper = new ClubHelper();
        clubHelper.AddOrUpdate(item);
        return true;
    }

    public ClubItem AddOrUpdate(ClubItem item)
    {
        if (item.Id == Guid.Empty)
            Insert(item);
        else
            Update(item);

        return item;
    } 
```

还有你在我原来的帖子中看到的 Update() 方法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:10:03.933

在我看来，如果您在`TransferClubs`最后一行替换`club.Save();`为

```
clubHelper.SaveChanges(); 
```

该方法应该简单地调用`Context.SaveChanges();`并保存对加载实体的更改，即创建两个新用户，并将外键设置为加载的`club`.

老实说，您更新实体的方法相当奇怪和复杂。我不知道为什么您的代码会引发“ *ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象*”异常。但是有几个缺陷和没有意义的事情：

*   您没有处理实例化的上下文。如果`ClubHelper`创建了一个新的上下文，它应该在超出范围时处理它。因此，`ClubHelper`应该实施`IDisposable`并且实施`Dispose`应该调用`context.Dispose()`. 然后您可以使用`using`在最后自动处理实例化对象的 a：

    ```
    protected void TransferClubs(object sender, EventArgs e)
    {
        using (var clubHelper = new ClubHelper())
        {
            // stuff...
        } // Dispose called here automatically
    } 
    ```

*   这些行没有意义：

    ```
    var dbEntry = Context.Entry(entityToUpdate);
    if (dbEntry == null) return; 
    ```

    If `entityToUpdate`is an entity of your object model `dbEntry`is never . 如果是您的对象模型的实体，则永远不会`null`。它只能有 state `Detached`。If `entityToUpdate`is not an entity of your object model`Entry`抛出异常但不返回`null`。

*   这个`if`案子没有意义：

    ```
    if (Context.Entry(entityToUpdate).State == EntityState.Detached)
        DbSet.Attach(entityToUpdate);
    // ...
    Context.SaveChanges(); 
    ```

    `Attach`在 state 中将实体添加到上下文中`Unchanged`。如果您只是`SaveChanges`在此之后调用，则不会发生任何事情并将被写入数据库，因为没有任何变化。

*   这个`else`案子也没有意义：

    ```
    dbEntry.CurrentValues.SetValues(entityToUpdate);
    Context.Entry(entityToUpdate).State = EntityState.Modified; 
    ```

    `SetValues`如果属性具有相同的名称，则将 的属性复制`entityToUpdate`到具有相同键且已附加到上下文的实体的属性。如果属性值不同，则将属性标记为`Modified`。如果您之后将整个实体设置为`Modified`您将*所有*属性标记为`Modified`之前`SetValues`冗余。

    此外，这两行都不会帮助您创建所需的 UPDATE 语句，因为它们不会将*关系*标记为已修改，并且仅影响标量（和复杂）属性，而不影响导航属性。但是更新关系 - 即`club`两个新用户之间的关系 - 正是您在示例中所需要的。

*   最后，在全新的上下文中执行更新是没有意义的......

    ```
    var clubHelper = new ClubHelper();
    clubHelper.AddOrUpdate(item); 
    ```

    ...当您在另一个上下文中仅在之前的行中加载和更改实体时。Entity Framework 已经完成了所有工作来跟踪您在第一个上下文中的更改以生成所需的 SQL 语句。如果您在此之后创建一个新的上下文，您希望在其中保存更改，则您放弃所有工作并且必须从头开始告诉 EF 您对原始实体做了哪些更改。

# sql-server - 使用 SQL Server Report Builder 执行类似 SUMIF 的操作

> ID：11030273
> 
> 赞同：21
> 
> 时间：2012-06-14T09:29:31.957
> 
> 标签：sql-server, reporting-services, reportbuilder

我正在尝试在 SQL Server Report Builder 3.0 中生成条件总和。

我的表情是这样的：

```
=Sum(Iif(Fields!ProjectTypeID.Value=2,Fields!kWp.Value,0)) 
```

我希望这个表达式会产生所有类型 2 项目的 kWp 的总和。

不幸的是，事实并非如此。我似乎无法弄清楚为什么。它只返回 0 结果，即使我知道 kWp 列中有非零值，并且该列不包含空值。

一位同事确实设法通过更换

```
Fields!kWp.Value 
```

和

```
1 * Fields!kWp.Value 
```

但是我们不知道为什么会这样，因此不能真正相信答案。

我怎样才能得到这个条件总和来表现自己？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-14T14:29:27.160

'kWp' 列的数据类型是 Decimal，因此您需要将默认值转换为 0.00 或将该列转换为 double

```
 SUM(iif(Fields!ProjectTypeID.Value = 2,cdbl(Fields!kWp.Value),0.00)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:15:22.527

要得到类型**2**的所有项目`sum`的**kWp**，表达式如下：

 **```
=IIf(Fields!ProjectTypeID.Value=2,sum(Fields!kWp.Value),0) 
```

我希望这会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-14T14:49:11.253

我有类似的问题，这对我有用：

```
=Sum(iif(Fields!date_break.Value = "0001-01-01",Fields!brkr_fee.Value, nothing)) 
```

zb

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-29T13:08:07.677

要获得条件总和，您可以尝试此表达式

```
=sum(IIf(Fields!balance.Value > 0,(Fields!balance.Value),0)) 
```

它只对正数求和，否则它会将 0 添加到总数中，反之亦然。**

# python - 哪种技术的内存消耗最低：全局变量或函数参数？

> ID：11030274
> 
> 赞同：0
> 
> 时间：2012-06-14T09:29:42.283
> 
> 标签：python, memory, memory-management, garbage-collection, duplicate-data

我现在正在编写的程序制作了一个非常庞大的数据项列表。

现在，我可以使这个列表成为全局的（使其他模块中的其他功能可用）并且可以在所有其他模块中使用。或者，我也可以将它们作为模块中函数的函数参数传递。

请注意，我正在谈论的这个巨大的数组不会在其他模块的函数中被修改，它们只是读取数据并将其用于计算和数据统计等。

那么，两种内存消耗最少的方法呢？

如果通过传递给函数，如果语言在本地复制巨大的列表，即使函数没有修改它..那将是内存消耗的两倍，这不是一件好事。如果发生这种情况，我可以将其设为全局并使用它。我对 python 的内存管理产生了这个疑问，因为当我曾经写过一种玩具语言时，我包含了这个特定的问题.. 即参数数据只有在它被编辑时才会被复制.. 否则，它总是指向原始数据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T09:39:38.387

首先，Python 中不存在“全局”变量（从某种意义上说，它自动可用于所有模块）。

其次，Python 在传递给函数时不会复制对象。Python 变量实际上只是指向对象的名称——当您将变量传递给函数时，所发生的只是函数创建了一个指向原始对象的新名称。您可以读取或修改该对象的内容，而无需制作任何副本。（请注意，如果您将名称重新绑定到不同的对象，则原始引用不会更改。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T09:39:25.743

这两种方法将具有相同的内存占用。在 python 中使用全局变量被认为是不好的做法，所以你应该避免它。

现在要使用 python，您需要了解它的对象语义。但一个简单的例子是：

```
def modify(aList):
    aList[1] = 18

a = [1, 2, 3]
modify(a)
print a # [1, 18, 3]
b = a
b[2] = 12
print a [1, 18, 12]
print a is b # true 
```

在 modify 内部，aList 与 a 引用相同的对象。与 b 相同。每次使用指向它的任何标签修改列表元素时，都会修改对象。函数调用只传递标签，而不传递对象。

`a is b`允许您测试 a 和 b 标签是否引用该对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T09:40:30.517

Python 变量是引用，因此请传递数组的名称 - 尽管严格来说您应该将其称为列表（这就是 Python 中调用的数组）。但是，我对您的措辞感到不安，这意味着您可以将其设为全局并将其作为参数传递。做一件事或另一件事。如果它是全局的，则将其用作全局，不要混合使用这两种方法（如果我误解了，请见谅）。

对于垃圾收集，一个好的开始是查看`gc`模块的标准库文档。

Python/C API 标准文档中有一些关于内存管理的内容。搜索“内存管理”。

# iphone - 制作框架并被他人使用后如何避免警告

> ID：11030275
> 
> 赞同：0
> 
> 时间：2012-06-14T09:29:43.700
> 
> 标签：iphone, objective-c, ios, ipad

我做了一个框架，并在另一个应用程序中使用它。功能在我的框架中按预期工作，完全没有错误。但是，在编译时，我在控制台中打印了一些警告，例如**"Could not load the "colourpal_red_selected.png" 图像，该图像是从带有标识符的包中的笔尖引用的"**。基本上我在框架源代码中使用的日志没有在控制台中打印，但仅显示警告。

问题：有没有办法通过使用 xcode 的任何设置来停止警告。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:36:36.260

我的建议是解决问题本身。

在您检查了有问题的源图像*确实*包含在框架中之后，重新编译框架。您可以通过转到项目设置，然后转到*Build Phases*，然后转到*Copy Bundle Resources*并确保将图像添加到那里来执行此操作。如果没有，只需添加它。如果项目中有许多目标，请确保您确实在检查**框架目标**。

# gridview - 如何以编程方式使用 ObjectDataSource 更新 ASP.NET GridView 行和代码背后的代码

> ID：11030291
> 
> 赞同：0
> 
> 时间：2012-06-14T09:30:52.830
> 
> 标签：gridview, objectdatasource

我在使用 CodeBehind 上的 ObjectDataSource 实现可编辑的 GridView 时遇到问题；我想知道我需要在后面的代码中添加哪些缺失的部分（事件）：

**ASPX 代码：**

```
<asp:GridView ID="grdPlayer" runat="server" AutoGenerateColumns="False" 
            AutoGenerateEditButton="true" AutoGenerateDeleteButton="true" 
            onrowediting="grdPlayer_RowEditing" 
            onrowcancelingedit="grdPlayer_RowCancelingEdit" 
onrowupdating="grdPlayer_RowUpdating">
          <Columns>
                <asp:BoundField DataField="ID" Visible="false"/>
                <asp:BoundField DataField="FirstName" HeaderText="First Name" 
                    SortExpression="FirstName" />  
                <asp:BoundField DataField="LastName" HeaderText="LastName"   
                    SortExpression="LastName" />  
                <asp:BoundField DataField="Age" HeaderText="Age"   
                    SortExpression="Age" />  

          </Columns>  

        </asp:GridView> 
```

**ASPX.CS 代码背后：**

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Web.UI;
    using System.Web.UI.WebControls;
    using System.Data;

    public partial class _Default : System.Web.UI.Page
    {
        ObjectDataSource dataSource = new ObjectDataSource();

        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {

                dataSource.TypeName = "Cricket.CricketBL";
                dataSource.UpdateMethod = "UpdatePlayer";
                Parameter p1 = new Parameter("ID", DbType.Int32);
                Parameter p2 = new Parameter("FName", DbType.String);
                Parameter p3 = new Parameter("LName", DbType.String);
                Parameter p4 = new Parameter("Age", DbType.Int32);
                dataSource.UpdateParameters.Add(p1);
                dataSource.UpdateParameters.Add(p2);
                dataSource.UpdateParameters.Add(p3);
                dataSource.UpdateParameters.Add(p4);

                bindGridView();

            }
        }

        #region Grid Events
        protected void grdPlayer_RowEditing(object sender, GridViewEditEventArgs e)
        {
            grdPlayer.EditIndex = e.NewEditIndex;
        }

        protected void grdPlayer_RowUpdating(object sender, GridViewUpdateEventArgs e)
        {
            grdPlayer.EditIndex = -1;
            bindGridView();

        }

        protected void grdPlayer_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
        {
            grdPlayer.EditIndex = -1;
            bindGridView();
        }
        #endregion

        void bindGridView()
        {
            dataSource.SelectMethod = "GetAllPlayer";
            dataSource.TypeName = "Cricket.CricketBL";
            grdPlayer.DataSource = dataSource;
            grdPlayer.DataBind();
        }
    } 
```

1.  我应该把 UpdateMethod 代码放在哪里（目前在 Page_Load 中）？
2.  我应该在后面的代码中实现哪些事件，以便我编辑的网格行使用正确的 NewValues 调用 UpdateMethod？
3.  当我单击编辑链接时，它不会在编辑模式下呈现 GridView（文本框等）；我必须单击它两次才能这样做；为什么？
4.  大问题：单击更新链接不会调用 ObjectDataSource UpdateMethod？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-21T02:49:24.253

泽，

您的方法仅适用于学习阶段。对于最佳实践或在生产阶段，我们应该始终在应用程序的几个层之间进行明确的分离。它们主要是数据访问层（DAL）、业务逻辑层（BLL）和表示层（在网页中）。这种概念通常被称为持久性无知。正如[这里所解释的](http://www.asp.net/web-forms/tutorials/continuing-with-ef/using-the-entity-framework-and-the-objectdatasource-control-part-2-adding-a-business-logic-layer-and-unit-tests)

> 调用存储库类和两个构造函数的 CRUD 方法使您可以将业务逻辑类与您选择的任何后端数据存储一起使用。业务逻辑类不需要知道它调用的类是如何保存数据的。（这通常被称为持久性无知。）

我强烈建议您阅读这个[很棒的教程](http://www.asp.net/web-forms/tutorials/continuing-with-ef/using-the-entity-framework-and-the-objectdatasource-control,-part-1-getting-started)并继续进一步工作，您将会受到启发！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T17:00:41.537

泽，

回答你的4个问题。

**1 和 4：**

将“onRowUpdated”添加到 .aspx 文件中的 gridview 属性。说 onRowUpdated="grdPlayer_RowUpdated"。在此处添加您的更新代码。

**2 和 3：**

与其使用 BoundField，不如使用 TemplateField。它会有这样的 EditItemTemplate 和 ItemTemplate：

```
<asp:TemplateField HeaderText="FirstName">
    <EditItemTemplate>
        <asp:TextBox ID="FName" runat="server" Text='<%# Bind("FirstName")%>'></asp:TextBox>
    </EditItemTemplate>
    <ItemTemplate>
        <asp:Label ID="Label2" runat="server" Text='<%# Bind("FirstName") %>'></asp:Label>
    </ItemTemplate>
</asp:TemplateField>

<asp:TemplateField HeaderText="LastName">
    <EditItemTemplate>
        <asp:TextBox ID="LName" runat="server" Text='<%# Bind("LastName") %>'></asp:TextBox>
    </EditItemTemplate>
    <ItemTemplate>
        <asp:Label ID="Label2" runat="server" Text='<%# Bind("LastName") %>'></asp:Label>
    </ItemTemplate>
</asp:TemplateField>
<asp:TemplateField HeaderText="Age">
    <EditItemTemplate>
        <asp:TextBox ID="Age" runat="server" Text='<%# Bind("Age") %>'></asp:TextBox>
    </EditItemTemplate>
    <ItemTemplate>
        <asp:Label ID="Label2" runat="server" Text='<%# Bind("Age") %>'></asp:Label>
    </ItemTemplate>
</asp:TemplateField> 
```

在您的“grdPlayer_RowUpdating”方法中，添加以下内容：

```
int index = grdPlayer.EditIndex;

GridViewRow row = grdPlayer.Rows[index];
Int64 ID = (Int64)grdPlayer.DataKeys[index].Value;

TextBox FirstName = (TextBox)row.FindControl("FName");
TextBox Lastname = (TextBox)row.FindControl("LName");
TextBox Age = (TextBox)row.FindControl("Age");

e.NewValues["FirstName"] = FirstName.Text;
e.NewValues["LastName"] = Lastname.Text;
e.NewValues["Age"] = Age.Text; 
```

我希望这有帮助。

# java - paintComponent 中的 while 语句

> ID：11030297
> 
> 赞同：2
> 
> 时间：2012-06-14T09:31:09.273
> 
> 标签：java, swing, java-2d, paintcomponent

我正在尝试为我的游戏制作一个简单的瓷砖系统。我做了一个测试瓷砖，我正在尝试将 5 个瓷砖彼此相邻绘制。我在我的`paintComponent`地方做了一个 while 语句，它从 5 开始倒计时，每次它绘制一个图块并将 10（图块的大小）添加到当前 x 值。但由于某种原因，没有一个瓷砖出现。如果我注释掉 while 语句，就会出现一个图块。所以图像正在加载。出于某种原因，while 语句把画弄乱了。非常感谢一些帮助。

这是我的paintComponents中的代码

*   变量 numOfTiles = 5
*   变量 tileStartx = 100;
*   变量 selectedTile 是我的图像。

* * *

```
public void paintComponent(Graphics g){
    super.paintComponent(g);
    if(tileToDraw != null){
        while(numOfTiles > 0){
            System.out.println(tileStartx);
            g.drawImage (chosenTile, tileStartx, tileStarty, this);
            tileStartx += 10;
            numOfTiles--;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T10:00:04.150

改变

```
while(numOfTiles > 0){ 
```

到

```
// or the more modern variant shown by Kumar
for (int count=0; count<numOfTiles; count++) { 
```

并删除：

```
 numOfTiles--; 
```

解释。我怀疑`numOfTiles`在第一次油漆中被减少到 0 并且永远不会被重置。`for`循环通过从不改变值来解决这个问题。

还要注意沃尔特的调整：

```
 g.drawImage (chosenTile, tileStartx + (count * 10), tileStarty, this); 
```

代替：

```
 g.drawImage (chosenTile, tileStartx, tileStarty, this);
    tileStartx += 10; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T10:06:11.317

试试这个，

```
for (int i : numOfTiles){

            System.out.println(tileStartx);
            g.drawImage (chosenTile, tileStartx, tileStarty, this);
            tileStartx += 10;

        } 
```

# excel - Excel中下拉列表的大小限制？

> ID：11030304
> 
> 赞同：2
> 
> 时间：2012-06-14T09:31:50.597
> 
> 标签：excel, vba

通过 VBA 可以在 Excel 中的下拉列表中构建的项目数量是否有限制？

我收到“应用程序定义或对象定义”错误，我相信我列表中的字符非常好 - 除非我的下拉列表中有 ~530 个值？

编辑：我通过反复试验发现有 1861 个字符的字符限制。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T21:32:59.913

MS 说： *您可以在下拉列表中拥有的最大条目数是 32,767*

我发现限制（在 VSTO C# Excel 功能区下拉菜单中）是 1,000 个项目。这些项目是各种大小的字符串，从几个字符到 50 个字符不等。

# sql - 根据表格数据替换文本

> ID：11030306
> 
> 赞同：3
> 
> 时间：2012-06-14T09:32:00.200
> 
> 标签：sql, oracle, oracle10g

我想编写一个程序，根据表中给出的数据用文本替换每个特定的字母。

```
create table jap (
alpha varchar2(1),
conv varchar2(5)
);

insert into jap(alpha,conv) values ( 'A' , 'ka' );
insert into jap(alpha,conv) values ( 'B' , 'tu' );
insert into jap(alpha,conv) values ( 'C' , 'mi' );
insert into jap(alpha,conv) values ( 'D' , 'te' );
insert into jap(alpha,conv) values ( 'E' , 'ku' );
insert into jap(alpha,conv) values ( 'F' , 'lu' );
insert into jap(alpha,conv) values ( 'G' , 'ji' ); 
```

例如，输入`DEC`应该导致输出`tekumi`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T09:55:23.113

试试这个：

```
SELECT xmlagg(xmlelement(e, conv)
              ORDER BY l).extract('//text()') .getstringval()
FROM
  (SELECT DISTINCT LEVEL l,
                         substr('DEC', LEVEL, 1) letter
   FROM dual CONNECT BY LEVEL <= length('DEC'))
INNER JOIN jap ON alpha = letter
ORDER BY l ; 
```

[这](http://www.sqlfiddle.com/#!4/afa7e/43)是一个小提琴

# php - 如何在外部网站上提交表单并获取生成的 HTML？

> ID：11030307
> 
> 赞同：5
> 
> 时间：2012-06-14T09:32:02.080
> 
> 标签：php, javascript, parsing, form-submit

我想使用 PHP（可能需要 JS）制作一个脚本来将 POST 数据发送到另一个网页并取回结果。

例如，域 A 将有一个带有文本框和提交按钮的表单，域 B 将有一个脚本，它将填充文本框并按下提交按钮并返回生成的 HTML 页面。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T09:47:08.720

以下代码行可以写在另一个 php 脚本上，

```
//set POST variables
$url = 'the website from which you need data through post';
$fields = array(
            //post parameters to be sent to the other website
            'text'=>urlencode($_POST['text']), //the post request you send to this  script from your domain.
        );

//url-ify the data for the POST
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string,'&');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_POST,count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch); 
```

现在 $result 将包含从其他网站收到的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:34:40.813

用 JS：出于安全原因，没有。阅读[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。

使用 PHP，您可以做任何您想做的事，包括`POST`连接其他服务器。例如使用[CURL](http://www.php.net/manual/en/book.curl.php)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-23T08:56:29.007

--- 2012 年原始答案 ---

使用jQuery；只需使用 $.ajax() 调用加载页面。如果需要，您可以使用“jsonp”，它可以解决来自不同域的调用页面之间的限制。

使用 javascript 的好处是您不需要任何服务器端语言。

--- 2018 年编辑 ---

我现在意识到您不能使用 jsonp 进行 POST（因为它本质上是只读的）所以这只有在网站接受表单作为 GET（即 URL 中的参数）时才有效。否则，最好按照其他答案中的建议使用 Curl 或类似方法。

# c++ - 向导中的必填字段

> ID：11030308
> 
> 赞同：0
> 
> 时间：2012-06-14T09:32:04.013
> 
> 标签：c++, qt

我使用 GUI 创建了一个向导，因此我的页面都是 UI 的一部分。

现在，在其中一个页面上，我想将这些字段设为必填。从查看 API 来看，似乎有一个`registerField()`函数还可以确保在填写字段之前下一个按钮不可用。但是，该函数受到保护，`QWizardPage`这意味着我无法设置它。有没有办法在不需要创建新类的情况下执行这种行为？

我知道我可以创建一个新类，但我正在考虑是否创建更多页面，然后我需要为我拥有的每个页面创建类。我还认为对于这样一个简单的案例，感觉有点矫枉过正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:42:54.620

Qt 以这种方式设计 QWizardPage 是因为它是负责字段逻辑的页面，而不是其他类。但是如果你仍然想使用这个（设计不好的）模式，你可以简单地创建带有公共成员的 QWizardPage 包装器，它调用受保护的成员，并使用它来代替 QWizardPage。请记住，页面有一些逻辑，将这些逻辑与其他类分开会更好。此外，如果您有一些类似的页面，您可以重用一个带有一些参数的类

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-08T12:41:27.207

要使用 registerField 将字段设置为必填项，您只需将其名称设置为以“*”结尾。

前任：

```
QLineEdit* nameLineEdit = new QLineEdit();    
registerField("name*", nameLineEdit); 
```

这样，只有当您在 nameLineEdit 中写入内容时，才会启用继续按钮。请检查文档[QWizardField#registerField。](http://doc.qt.io/qt-5.4/qwizardpage.html#registerField)

# java - JInternalFrame 的状态未保留

> ID：11030318
> 
> 赞同：0
> 
> 时间：2012-06-14T09:32:26.307
> 
> 标签：java, swing, jframe, jinternalframe, maximize

我正在处理一个与我认为的这个错误有关的问题：[DefaultDesktopManager 没有按预期处理 InternalFrame 状态更改。](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4424247)

我有以下情况：

我的应用程序由一个`JFrame`可以有几个`JInternalFrame`s 组成。作为一个概览对话框，我有一个`JInternalFrame`最大化并显示数据表的对话框。用户可以打开表中实体的详细信息对话框。详细信息对话框也是一个`JInternalFrame`.

1.  问题：因为概览对话框被最大化，所以细节对话框也被最大化（不像预期的那样）。

2.  问题：当详细对话框关闭时，概览对话框失去其最大化状态。如果用户单击此对话框中的任何点，它将返回最大化。这对用户来说非常丑陋和困惑。如果我在关闭之前“取消最大化”详细信息对话框，则概览对话框也会失去其最大化状态并保持在此状态。

在我看来，它的所有s`JFrame`只能保持一个全局状态。`JInternalFrame`我不知道如何为此创建一个简单的解决方法。也许过去有人遇到过这个问题并且可以指导我。

提供 SSCCE 有点困难，也许这就足够了，我通过这个来显示详细对话框：

```
DetailDialog detailDialog = new DetailDialog();
applicationFrame.getDesktopPane().add(detailDialog);
detailDialog.setVisible(true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:42:05.210

可能是问题

1.  [没有看到你的SSCCE](http://sscce.org/)就很难写出明智的东西

2.  您期望从[JInternalFrame[] getAllFrames()](http://docs.oracle.com/javase/7/docs/api/javax/swing/JDesktopPane.html#getAllFrames%28%29)得到什么输出，有吗？

3.  您期望[内部帧侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/internalframelistener.html)的输出是什么，有吗？？？

4.  你把 JInternalFrame 放到 JLayeredPane 了吗？？？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:27:55.250

我发现了我的错误。我正在为对话框使用控制器类，并将对话框的关闭委托给该类。例如，在控制器中，我必须进行一些验证，然后调用`dispose()`对话框。现在我打电话给`setClosed(true)`哪个有效。我认为那里缺少一些已触发的事件，这些事件现在已被触发。

# clojure - Clojure 中的动态记录

> ID：11030319
> 
> 赞同：2
> 
> 时间：2012-06-14T09:32:28.227
> 
> 标签：clojure, macros, record

当我尝试从 REPL 运行以下代码时（使用动态记录）：

```
(defrecord (symbol "rec2") (vec (map symbol ["f1" "f2"]))) 
```

我收到错误`CompilerException java.lang.ClassCastException: clojure.lang.PersistentList cannot be cast to clojure.lang.Symbol, compiling:(NO_SOURCE_PATH:23)`

我问自己我在哪里生成这个 PersistentList 考虑到：

```
user=> (symbol "rec2")
rec2
user=> (vec (map symbol ["f1" "f2"]))
[f1 f2] 
```

但我真正的问题是为什么以下代码有效：

```
user=> (defrecord rec2 [f1 f2])
user.rec2 
```

我也试过：

```
user=> (clojure.core/defrecord (clojure.core/symbol "rec1") (vec (clojure.core/map clojure.core/symbol ["f1" "f2"])))
CompilerException java.lang.RuntimeException: Can't refer to qualified var that doesn't exist, compiling:(NO_SOURCE_PATH:40) 
```

(qualified var？唯一的区别是我完全限定了函数名 WHICH EXIST, BTW) 显然我在理解 Clojure defrecord 宏时遗漏了一些东西，但我认为宏只是 AST 修饰符，所以如果我给它一个符号或解析为符号的东西是同一件事，所以我想有人解释一下为什么正常形式有效而其他形式无效！

蒂亚！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T09:53:52.723

问题如下：`defrecord`是一个宏，所有参数都没有被评估。他们传递给宏，所以它得到`(symbol "rec2")`- 包含 2 个元素的列表：符号和字符串，而不是`rec2`您期望的。您可以尝试以下操作：

```
(eval `(defrecord ~(symbol "rec2") ~(vec (map symbol ["f1" "f2"])))) 
```

它创建列表`(defrecord rec2 [f1 f2])`，然后对其进行评估。
但我不认为动态评估一些代码是个好主意。可能还有其他方法可以做到这一点。

# c# - C# Control.Cursor 和 Form.Cursor...

> ID：11030328
> 
> 赞同：1
> 
> 时间：2012-06-14T09:32:52.307
> 
> 标签：c#, winforms, cursor

好的，据我了解（我可能在这里错了），Windows 窗体具有 Cursor 属性，所有子控件也是如此。这个光标令人惊讶地默认为 Cursors.Default，即箭头指针。到现在为止还挺好。

现在，如果我想在控件未覆盖的表单区域上使用不同的光标，我可以检查表单鼠标移动事件并在其中更改光标。所以现在我期望的是，当光标移到窗体上时，光标会变为我在 Form.MouseMove_Handler 中设置的任何值，但是当光标移到窗体的子控件上时，它会变为子控件。光标。

然而，这不是我所看到的。我看到光标在表单上移动时发生了变化，但是当它在子控件上移动时，它在父表单上移动时保持不变。Control.Cursor 属性似乎根本没有受到尊重。

我是否必须为表单上的所有控件处理 MouseMove、MouseEnter 和 MouseLeave 事件才能使其正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:39:10.283

**来自 MSDN**

将 Cursor 分配给控件的 Cursor 属性以更改鼠标指针悬停在控件上时显示的光标。要临时更改应用程序上所有控件的鼠标光标，请设置 Cursor.Current 属性。通常，在填充 ComboBox 或保存或加载文件时，您会将 Cursor.Current 属性设置为等待光标。

Cursor 属性是**环境属性**。**环境属性是控件属性，如果未设置，则从父控件中检索。**例如，默认情况下，Button 将具有与其父 Form 相同的 BackColor。有关环境属性的更多信息，请参阅 AmbientProperties 类或 Control 类概述。

**继承人须知**

在派生类中重写 Cursor 属性时，使用基类的 Cursor 属性来扩展基实现。否则，您必须提供所有实现。您不需要同时覆盖 Cursor 属性的 get 和 set 方法；如果需要，您只能覆盖一个。

# sharepoint - SharePoint Web 服务 UpdateListItems 任务附件

> ID：11030330
> 
> 赞同：0
> 
> 时间：2012-06-14T09:33:02.187
> 
> 标签：sharepoint

我目前正在使用 SharePoint Web 服务来创建更新或删除任务。为此，我使用带有相应 XML 的 UpdateListItems 方法。这适用于每个文本字段，但我想知道是否可以将附件添加到这种方法的任务中。

我发现了一些使用 GetListItems 来检索附件的帖子，但我没有找到创建它的方法。如果您有任何想法，它将很有用。

提前致谢

# asp.net - js图表dotnetcharting - 如何删除背景网格

> ID：11030331
> 
> 赞同：0
> 
> 时间：2012-06-14T09:33:03.560
> 
> 标签：asp.net, charts

有谁知道如何使用 dotnetcharting 删除 javascript 图表的背景网格线？

（Chart.DefaultSeries.Type = SeriesType.Spline）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:58:04.327

不确定您是否能够解决它，但这就是您可以做到的。

Chart.YAxis.ShowGrid = False Chart.XAxis.ShowGrid = False

或者

Chart.DefaultAxis.ShowGrid = False

# ios - 从 UITableCell 子视图中释放的引用

> ID：11030334
> 
> 赞同：0
> 
> 时间：2012-06-14T09:33:14.327
> 
> 标签：ios

在我的一个中`UIViewControllers`，我有一个`UITableView`，它只有两行，并且都始终在屏幕上可见。这是历史上的表格视图（另一位开发人员这样做了 - 我没有坚持下去）。因为表格的两行总是可见的，所以当`cellForRowAtIndexPath`调用 my 时，我从 XIB 创建一个单元格并存储对其中一个子视图 ( `UITextView`) 的引用。当我需要从中获取文本时`UITextView`，我只需使用本地参考。这很好用 - 大多数时候。

在一个特定情况下，我从这个导航到另一个`UIViewController`（使用`pushViewController:animated`）。那个新的视图控制器使用了相当多的内存，所以在内部 iOS 会从第一个视图控制器中取消分配表行（它不再可见，因为另一个视图控制器处于活动状态） - 当我返回到第一个视图控制器时，它只是调用`cellForRowAtIndexPath`再次。当该行被释放时，我在内部存储的引用自然不再有效 - 如果我尝试使用它，应用程序崩溃（“选择器发送到释放的实例”）。

我的问题是：当 iOS 内部释放表格单元格时，我如何才能捕捉到，以便我可以将我的引用设置`nil`为稍后重新分配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:44:37.707

在 iOS 5.0+ 中，最简单的解决方案是使用`__weak`对文本字段的引用。`nil`当对象被释放时，它会自动设置。

在早期的 iO​​S 版本中，没有简单的解决方案。您可以继承`UITextField`or `UITableViewCell`，覆盖子类中的`release`or`dealloc`方法，然后从那里发送通知，告诉您的视图控制器有关该事件的信息。但这对我来说听起来像是一个非常晦涩的黑客攻击。更好地确保您的参考始终有效 - 通过将其设置为`nil`in`viewDidUnload`并在以后需要时重新创建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T18:36:22.080

在 iOS MVC 世界中，无论如何，您通常不应该依赖从 UITextView 检索数据来实现相关视图之外的目的。当您转到其他视图时，您永远不知道操作系统会对视图执行什么操作。您可能希望将 UITextView 中的字符串存储在某个对象中，该对象要么传递给那些视图控制器，可供其他视图控制器访问（例如，单例或应用程序委托的属性），要么存储在某个持久存储中。

顺便说一句，即使由于内存不足而释放视图，或者由于您在其他表格视图中使用相同的单元格标识符而导致单元格出列，它的视图控制器仍然存在，因此您不必担心关于丢失您在那里设置的任何属性，除非您在 didReceiveMemoryWarning 中明确执行某些操作来释放它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:58:58.100

显然，我发现处理这个问题的唯一方法是包括

```
- (void)didReceiveMemoryWarning; 
```

回调并将引用设置到`nil`那里。不确定这是否是处理这种情况的最佳方法，但它确实有效。

# android - Android中需要在GridView旁边放置常量图片

> ID：11030336
> 
> 赞同：0
> 
> 时间：2012-06-14T09:33:16.603
> 
> 标签：android, gridview, android-linearlayout

如何并行排列恒定图像。我正在使用 gridview 来显示图像。但是，无法做到这一点：将常量图像放在 Gridview 旁边（两侧，即左右两侧）请帮助我如何正确使用布局..

目前我的网格布局正在占用恒定图像的空间......请帮助我......

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:58:59.587

在您的应用程序中创建两个单独的片段。在我相信的网格视图中，您可能想要动态更改。在另一个片段中，保持应该保持不变的图像并保持该片段不变，因为您希望保持图像不变。

有关 Fragments 的简单教程，请按照以下说明操作：[http ://www.linuxforu.com/2011/05/android-fragments-api/](http://www.linuxforu.com/2011/05/android-fragments-api/)

# jquery - 我可以在 CSS 中为带有属性选择器和类的输入定义样式吗？

> ID：11030341
> 
> 赞同：0
> 
> 时间：2012-06-14T09:33:37.227
> 
> 标签：jquery, css

我可以在 CSS 中为带有属性选择器和类的输入定义样式吗？

```
input[type=text].focus 
```

上面的 css 不起作用。但是有没有办法实现这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T09:34:35.040

尝试`input[type="text"].focus`（在属性值周围加上引号）

小提琴示例：http: [//jsfiddle.net/dn3wU/](http://jsfiddle.net/dn3wU/)

无论如何，特定的未引用值也应该起作用，[如此处所述](http://mothereff.in/unquoted-attributes)

> CSS 中有效的不带引号的属性值是任何不是空字符串的文本字符串，由转义字符和/或完全匹配 /[-_\u00A0-\u10FFFF]/ 的字符组成，并且不以数字或开头两个连字符或一个连字符后跟一个数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T09:46:38.490

试试[这个](http://jsfiddle.net/dn3wU/1/)：

```
input[type=text]:focus 
```

# tomcat - stop tomcat web application 优雅地关闭所有 servlet 连接

> ID：11030342
> 
> 赞同：0
> 
> 时间：2012-06-14T09:33:41.353
> 
> 标签：tomcat, web-applications, servlets

我们想创建数据库的备份，但需要知道所有连接都在我们的 Web 应用程序后面关闭。

因此，如果我向 Tomcat 中的特定 Web 应用程序发送停止，它会等待并优雅地关闭其后面的所有作业/进程（与 H2 DB 的连接）并且不再接受任何传入请求吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:11:39.623

Tomcat 不会终止您可能已打开到数据库的任何连接：您必须自己终止这些连接。当您的 web 应用程序关闭时，尝试使用 a`ServletContextListener`关闭所有数据库连接。

# ruby - 用于 nginx 日志的 java 正则表达式

> ID：11030345
> 
> 赞同：0
> 
> 时间：2012-06-14T09:33:58.460
> 
> 标签：ruby, regex, nginx, rlike

我希望使用正则表达式脚本转换我的 nginx 日志，如下所示：

原始日志：

```
07.21.99.178 - - [01/Jun/2012:12:06:23 +0530] "GET /api?playSessionId=live_21_bc206d95-113f-4b49-989b-7dff77af51c410.190.217.2111338532565422 HTTP/1.1" 200 71 "-" "Jakarta Commons-HttpClient/3.1" 
```

我希望 playSessionId 作为我使用以下脚本的输出：

```
#!/usr/bin/env ruby

mon={"Jan" => '01',"Feb" => '02',"Mar" => '03',"Apr" => '04',"May" => '05',"Jun" =>        '06',"Jul" => '07',"Aug" => '08',"Sep" => '09',"Oct" => '10',"Nov" => '11',"Dec" => '12'}

STDIN.each_line do |line|
if line =~ /([\d+|\.]+) (\d+)\/(\w+)\/(\d+):(\d+):\d+:\d+ \+\d+] "GET \/api\?playSessionId=(^&*)/
d = "#{$3}-#{mon$2}-#{$1}"
h = $4
pid = $5
puts "#{d}\t#{h}\t#{pid}"
end
 end 
```

但这似乎不起作用:(有人可以告诉我java正则表达式，以便我可以在hive上起诉rlike吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:40:09.503

我想你想要这个：

```
/([\d+|\.]+) (\d+)\/(\w+)\/(\d+):(\d+):\d+:\d+ \+\d+] "GET \/api\?playSessionId=([^ &]+)/ 
```

您可能希望使用标准的 unix 工具来代替这项工作（grep + sed）：

```
grep 'playSessionId=' foo.log | sed 's/^.*playSessionId=\([^ ]*\).*$/\1/' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:43:53.853

我认为你的正则表达式太复杂了。这将完成这项工作：

```
playSessionId=(.*)\s 
```

# ios5 - 如何将 ios 5 故事板从 ipad 转换为 iphone？

> ID：11030348
> 
> 赞同：4
> 
> 时间：2012-06-14T09:34:32.547
> 
> 标签：ios5, storyboard

我在运行 iOS5 的 iPad 上使用代码和界面生成器设计了一组视图。IB 使用 MainStoryBoard_iPad.storyboard。现在，我想在 iPhone 上使用该应用程序。我不认为我会做这个移植，但现在我想做。

**选项 1** 我尝试复制 MainStoryBoard_iPad.storyboard，重命名为 MainStoryBoard_iPhone.storyboard，然后启动应用程序。这适用于代码，但 IB 具有不同的比率、位置和大小，并且界面看起来不太好。

**选项 2** 我尝试从 ipad 复制视图、元素并粘贴到 iphone 故事板上，但这是不可能的，我认为会发生同样的事情，即尺寸问题。

有人知道是否存在一种半自动的方法来做到这一点？

我考虑对所有应用程序大小和位置应用缩减因子，但我有很多值要更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T20:03:13.710

我认为您对半自动方法不走运。

这是一个描述 iPhone 到 iPad 翻译的教程。 [http://www.raywenderlich.com/1111/how-to-port-an-iphone-application-to-the-ipad](http://www.raywenderlich.com/1111/how-to-port-an-iphone-application-to-the-ipad)

希望能帮助到你。

# php - php echo 可捕获的致命错误：类的对象...无法转换为字符串

> ID：11030352
> 
> 赞同：0
> 
> 时间：2012-06-14T09:34:45.133
> 
> 标签：php, echo

我在尝试显示一些变量时收到错误，如下所示：

```
echo "id is $url->model->id"; 
```

问题似乎是 echo 只喜欢以这种方式显示的简单变量（如 $id 或 $obj->id）。

```
class url {
    public function  __construct($url_path) {
        $this->model = new url_model($url_path);
    }
}

class url_model {
    public function  __construct($url_path) {
        $this->id = 1;
    }
} 
```

进而

```
$url = new url();
echo "id is $url->model->id"; // does not work

$t = $url->model->id;
echo "id is $t";  //works

$t = $url->model;
echo "id is $t->id";  //works

echo "id is {$url->model->id}"; //works. This is the same syntax used to display array elements in php manual.

//php manual example for arrays
echo "this is {$baz['value']}"; 
```

我不知道它为什么起作用，我只是猜到了语法。

在 php 手册中它没有说明如何使用`echo "..."`对象。还有一些奇怪的行为：在简单的变量上回显，有效；对对象的简单属性的回应；在另一个对象内部的对象的简单属性上回显不起作用。

这`echo "id is {$url->model->id}";`是正确的方法吗？有没有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:48:02.260

**更新 ：**

也许我错了，回显`$url->model`或`$url->model->id`仅尝试将其转换为字符串并返回它以便您可以执行此操作，但您`__toString`的模型中必须具有功能

我做了一个例子来澄清我的观点：

```
class url {
    public function  __construct($url_path) {
        $this->model = new url_model($url_path);
    }
}

class url_model {
    public function  __construct($url_path) {
        $this->id = 1;
    }

    public function __toString()
    {
        return (string) $this->id ; 
    }
}

$url = new url("1");
echo "id is $url->model->id"; // it will  convert $url->model to "1" , so the string will be 1->id
echo "id is $url->model"; // this will  work now too 
$t = $url->model->id;
echo "id is $t";  //works
$t = $url->model;
echo "id is $t->id";  //works
echo "id is {$url->model->id}"; //works. This is the same syntax used to display array elements in php manual 
```

但我不知道是`echo "this is {$baz['value']}";`为了什么？？？？？？

检查[__toString](http://www.php.net/manual/en/language.oop5.magic.php#object.tostring)以获取有关魔术方法的更多信息

但我宁愿坚持`{$url->model->id}`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:39:47.700

`"{$var}"`是通用字符串变量插值语法。对于诸如一维数组之类的事物，有一些[称为简单语法的语法快捷方式：](http://php.net/manual/en/language.types.string.php#language.types.string.parsing)

```
echo "$arr[foo]"; 
```

但是，这不适用于多维数组，例如`"$arr[foo][bar]"`. 这只是一个硬编码的特殊情况。对象也是如此。`"$obj->foo"`是一种有效的硬编码特殊情况，而更复杂的情况必须由[复杂的`"{$obj->foo->bar}"`语法](http://php.net/manual/en/language.types.string.php#language.types.string.parsing.complex)来处理。

# node.js - 如何将 node.js/geddy 与 cookie 一起使用

> ID：11030353
> 
> 赞同：1
> 
> 时间：2012-06-14T09:34:46.587
> 
> 标签：node.js, geddy

我正在研究 node.js 的框架 geddy。
在做小事时遇到很多问题。我不知道 cookie/session/mysql 查询在 node.js 中是如何工作的。
我什至没有得到像样的文档。我对像我指定的主题相关的像样的文档链接或解释很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:02:07.097

Geddy 提供了一些开箱即用的基本会话和 cookie 内容。查看[https://github.com/mde/geddy/wiki/Sessions](https://github.com/mde/geddy/wiki/Sessions)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T01:21:06.083

在 Geddy 的[GitHub 存储库](https://github.com/mde/geddy)中打开一个[问题](https://github.com/mde/geddy/issues)，您的查询将在那里得到很好的处理，即使是框架创建者。

如果您的问题与 Node.js 有关，请尝试具体说明问题所在，您肯定会得到帮助。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-15T12:07:15.293

他们没有任何像样的文档。这就是为什么我必须进行大量搜索才能完成如此简单的任务。
我确实找到了，

```
npm search cookie 
```

安装合适的模块，我已经安装了

```
npm install cookies 
```

然后转到安装节点模块的目录，在我的情况下

> /home/调试器/node_modules/

会有它的目录，里面有例子目录。(/home/debugger/node_modules/cookies/test)

# php - PHP 内存使用量增加了 50mb，但结果集只有 ~7mb

> ID：11030355
> 
> 赞同：0
> 
> 时间：2012-06-14T09:34:48.160
> 
> 标签：php, wordpress, memory-management

我偶然发现了一些关于 PHP 的有趣的记忆事情考虑这段代码（sql-result 大约是 18000 行）

```
echo memory_get_usage() . PHP_EOL;

echo 'Querying mysql' . PHP_EOL;
$result = $wpdb->get_results($sql);

echo memory_get_usage() . PHP_EOL;

echo PHP_EOL;
echo 'Size of result set' . PHP_EOL;
echo strlen(serialize($result)) . PHP_EOL; 
```

输出：

```
33309232
Querying mysql
86203976

Size of result set
6838278 
```

为什么内存使用高峰会这样？是不是有点奇怪？

也许最重要的问题是，我能做些什么来降低使用率吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:06:40.917

数据库的每一行都被打包成一个对象/散列，每个值都有一个散列键和值本身，所以这会产生很多开销。

你可以做些什么来减少开销：1）确保只选择你真正需要的列，不要只做`select *`

2) `get_results()`有第二个参数，用于控制返回的内容。如果你使用`ARRAY_N`，你会得到数组数组的结果，这应该有最小的开销。

[wpdb#SELECT_Generic_Results](http://codex.wordpress.org/Class_Reference/wpdb#SELECT_Generic_Results "get_result 在 wordpress 法典中")

3）如果这还不够，您需要分批获取数据，例如1000行。`offset`您可以为此使用 sql 修饰符`limit`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:27:25.847

只有使用 xdebug 进行基本分析才能查明实际内存使用情况。

没有分析，大胆猜测，你有多种选择：

*   **对结果进行分页**，即发送多个查询而不是一个大查询
*   使用**ARRAY_N**作为`$wpdb->get_results($sql, ARRAY_N)`更轻更紧凑格式的输出格式

**奖励**（如 Meier 所说）：检查您是否需要 SELECT 子句中的每个字段，并且没有`select *`

希望这可以帮助 ！

# java - 是否可以在第三方类上进行切入点以及如何切入点？

> ID：11030358
> 
> 赞同：0
> 
> 时间：2012-06-14T09:34:52.467
> 
> 标签：java, spring, aop, ibatis, pointcut

我在我的项目中使用了spring和ibatis，这是我的问题。

我想跟踪所有更改`add/update/delete`并将它们记录到 table 中`T_TRACE_LOG`。该表有列：`operation_type, object_type, log_content, log_date`。

这是一个示例记录：

```
"add", "customer", "name='andy',age=23,...", 2012-06-14 17:04:57.410 
```

log_content 来自`Customer.toString()`，我希望这个过程自动进行，所以我想到了 AOP。

我无法控制客户端代码，因为一些用途`addCustomer()`和一些用途`insertCustomer()`和其他用途`createCustomer()`。但他们最后都打电话`getSqlMapClientTemplate().insert("inserCustomer", Customer)`了。所以我想切入点`getSqlMapClientTemplate().insert()`来匹配它们。

这是我的尝试，但它不起作用：

```
 <aop:pointcut  expression="execution(* org.springframework.orm.ibatis.SqlMapClientTemplate.insert(..))" id="insertLogPointCut"/> 
```

如果我将表达式更改如下：

```
<aop:pointcut expression="execution(* com.xxx.CustomerDaoImpl.insert(..))" id="logPointCut"/> 
```

因为AOP是根据源码把“切入点信息”编译成类字节码，所以我认为不可能在ibatis类上切入点。如果错了，我的情况如何处理？

这是配置：

```
<aop:aspectj-autoproxy proxy-target-class="true"/>
<bean id="traceLogger" class="com.xx.TraceLogger"/>
<aop:config>
    <aop:pointcut expression="execution(* com.xx.CustomerDaoImpl.insert(..))" id="insertLogPointCut"/>
    <aop:aspect id="logAspect" ref="traceLogger">
        <aop:after-returning method="logAfterReturning" pointcut-ref="insertLogPointCut"/>
    </aop:aspect>
</aop:config> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:40:13.457

Spring 中的默认 AOP 行为仅适用于接口（因为它使用 Java 的动态代理）。如果切入点设置在具体类上，它将不起作用。

SqlMapClientTemplate，如果我没记错的话，是一个类。

您可以选择

1.  使用 cg-lib 创建代理，或
2.  将您的 bean 更改为使用 SqlMapClientOperations 而不是 SqlMapClientTemplate，并将切入点写为“execution(* org.springframework.orm.ibatis.SqlMapClientOperations.insert(..))”

我将推荐方法2。

而且，你的猜测是错误的。AOP 相关的东西没有编译成相应的字节码。它们都是在运行时完成的（对于 Spring 的情况）

# extjs - ExtJS 4.1 中的分页问题

> ID：11030360
> 
> 赞同：0
> 
> 时间：2012-06-14T09:34:56.953
> 
> 标签：extjs, paging, extjs4.1

我发现当网格具有分页属性时，您不应该第二次从服务器发送元数据属性。因为如果您第二次发送分页中断。我只需要先发送。我应该如何克服这个问题？问题来自我在文档中找到的这段代码。

```
listeners: { //under the store
            'metachange': function(store,meta){
            grid.reconfigure(store,meta.columns);
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:44:47.553

一份提案：

```
listeners: { //under the store
    'metachange': function(store,meta){
     if ( !this.meta )
     {
         this.meta = meta;
         grid.reconfigure(store,meta.columns);
     }
} 
```

# .net - 在模板化列表控件中丢失 Alt-Gr 字符

> ID：11030364
> 
> 赞同：1
> 
> 时间：2012-06-14T09:35:16.477
> 
> 标签：.net, wpf, unicode

我们正在编写需要输入波兰语和中文等语言字符的软件。这些语言广泛使用 Alt-Gr 键，例如 Alt-Gr-OemQuestion 用于西班牙语中的 } 或 Alt-Gr-s 用于波兰语中的 ß 字符。

问题：

这在普通文本框等中工作正常。但是，如果我在列表控件内的数据模板内有一个文本框，则上面西班牙语案例中的 } 字符会丢失，因为列表控件吸收了击键，因为 Alt-Gr 是实际上是 Left-Ctrl+Right-Alt 并结合 OemQuestion 触发相当于 Ctrl-A 并选择列表控件中的所有项目！

波兰语中的 Alt-Gr-s 存在类似问题，其中基本的 Left-Ctrl+Right-Alt-s 实际上执行 Ctrl-s 并触发保存！

我们找到了一个解决方案，通过使用 pinvoke 在 KeyDown 事件中使用 ToUnicode 函数来获取正确的字符并将其插入到文本框中，但这违反了使用在隔离存储等中运行的 Click-Once 应用程序的权限（我认为，这东西有点生锈）。

有任何想法的人吗？

# javascript - 如何使用jquery检查日期不能小于当前日期？

> ID：11030366
> 
> 赞同：3
> 
> 时间：2012-06-14T09:35:26.430
> 
> 标签：javascript, jquery, asp.net, jquery-validate, datepicker

我在文本框中使用 jquery 日期选择器，我希望用户不能选择小于当前的日期。我是 jquery/javascript 的新手。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:37:20.250

将 datepickers minDate 变量设置为当前日期（[http://jqueryui.com/demos/datepicker/#option-minDate](http://jqueryui.com/demos/datepicker/#option-minDate)）

`$( ".selector" ).datepicker({ minDate: new Date() });`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T09:37:42.560

如果您的意思是要禁用过去的日期，那么：

```
$("#datepicker").datepicker({ minDate: 0 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T09:37:16.990

这里[http://jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)

您可以看到 datepicker 有以下选项

```
maxDateDate: Number, StringDefault:null
minDateDate: Number, StringDefault:null 
```

# jquery - jQuery 通过海星和谷歌域获取额外内容？为什么？

> ID：11030369
> 
> 赞同：0
> 
> 时间：2012-06-14T09:35:38.520
> 
> 标签：jquery, cdn

jQuery 推荐 CDN 托管或自托管的 jQuery 库。这是缩小版的下载路径：http: [//code.jquery.com/jquery-1.7.2.min.js](http://code.jquery.com/jquery-1.7.2.min.js)

我将其部署到我的 CDN，并在我的网站中使用它。但是对于两者，我的 CDN 路径，或上面提到的 jQuery 路径，脚本都会使 http 调用海星，谷歌域以下载更多内容：

![在此处输入图像描述](../Images/4062d29a09c838271cba1e6f7b09d343.png)

1.  为什么要下载这些组件，我使用 jQuery 的方法有什么不正确的地方吗？
2.  这些组件是强制性的吗？
3.  如果这些是可选组件，我能否以不下载这些组件的方式配置 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:41:53.887

加载 jQuery 不会自行触发任何进一步的 HTTP 请求。如果您看到其他请求，它们来自其他东西，而不是来自 jQuery。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:41:50.767

我没有收到这些额外的请求。这让我相信是您的浏览器发出了这些额外的请求，而不是脚本。

也许是你的 Firefox 扩展？尝试禁用它们，重新启动 Firefox 并重试（您正在使用 Firebug 进行检查，因此您必须保持启用状态，我之前从未见过 Firebug 自己发出这些请求）。

# html - 使用 CSS/HTML 的“冻结窗格”样式效果

> ID：11030371
> 
> 赞同：4
> 
> 时间：2012-06-14T09:35:56.557
> 
> 标签：html, css

是否有可能/容易创建一个网页，该网页就像应用了“冻结窗格”的 Microsoft Excel 电子表格？通过这个，我的意思是标题和侧边栏应该保持固定在它们的位置，但在页面滚动时向下/向右滚动。

我需要这样的东西[，](http://www.coastworx.com/freezepains_table.html)除了我希望它应用于整个页面而不是表格。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T09:42:40.543

这可以通过切换到`position: fixed`.

例如带有类的 div

```
#fixed-div {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 100px;
  background-color: #000;
} 
```

滚动时，将在浏览器视口的最高 100 像素处保持固定。

这个小提琴演示了垂直和水平方向的效果。 [http://jsfiddle.net/ukzYf/1/](http://jsfiddle.net/ukzYf/1/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T09:43:39.427

你在找`position: fixed`吗？

这是一个简单的工作示例：

```
.header {
    position: fixed;
    top: 0;
    left: 0;
    height: 50px;
    background: red;
    width: 100%;
}
.sidebar {
    position: fixed;
    top: 50px;
    left: 0;
    width: 100px;
    background: blue;
    height: 100%;
}
.content {
    margin: 50px 0 0 100px;
    padding: 10px;
    width: 2000px;
}
```

```
<div class="header"></div>
<div class="sidebar"></div>
<div class="content">
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec a diam lectus. Sed sit amet ipsum mauris. Maecenas congue ligula ac quam viverra nec consectetur ante hendrerit. Donec et mollis dolor. Praesent et diam eget libero egestas mattis sit amet vitae augue. Nam tincidunt congue enim, ut porta lorem lacinia consectetur. Donec ut libero sed arcu vehicula ultricies a non tortor. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean ut gravida lorem. Ut turpis felis, pulvinar a semper sed, adipiscing id dolor. Pellentesque auctor nisi id magna consequat sagittis. Curabitur dapibus enim sit amet elit pharetra tincidunt feugiat nisl imperdiet. Ut convallis libero in urna ultrices accumsan. Donec sed odio eros. Donec viverra mi quis quam pulvinar at malesuada arcu rhoncus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. In rutrum accumsan ultricies. Mauris vitae nisi at sem facilisis semper ac in est.<br>
    Vivamus fermentum semper porta. Nunc diam velit, adipiscing ut tristique vitae, sagittis vel odio. Maecenas convallis ullamcorper ultricies. Curabitur ornare, ligula semper consectetur sagittis, nisi diam iaculis velit, id fringilla sem nunc vel mi. Nam dictum, odio nec pretium volutpat, arcu ante placerat erat, non tristique elit urna et turpis. Quisque mi metus, ornare sit amet fermentum et, tincidunt et orci. Fusce eget orci a orci congue vestibulum. Ut dolor diam, elementum et vestibulum eu, porttitor vel elit. Curabitur venenatis pulvinar tellus gravida ornare. Sed et erat faucibus nunc euismod ultricies ut id justo. Nullam cursus suscipit nisi, et ultrices justo sodales nec. Fusce venenatis facilisis lectus ac semper. Aliquam at massa ipsum. Quisque bibendum purus convallis nulla ultrices ultricies. Nullam aliquam, mi eu aliquam tincidunt, purus velit laoreet tortor, viverra pretium nisi quam vitae mi. Fusce vel volutpat elit. Nam sagittis nisi dui.
    Suspendisse lectus leo, consectetur in tempor sit amet, placerat quis neque. Etiam luctus porttitor lorem, sed suscipit est rutrum non. Curabitur lobortis nisl a enim congue semper. Aenean commodo ultrices imperdiet. Vestibulum ut justo vel sapien venenatis tincidunt. Phasellus eget dolor sit amet ipsum dapibus condimentum vitae quis lectus. Aliquam ut massa in turpis dapibus convallis. Praesent elit lacus, vestibulum at malesuada et, ornare et est. Ut augue nunc, sodales ut euismod non, adipiscing vitae orci. Mauris ut placerat justo. Mauris in ultricies enim. Quisque nec est eleifend nulla ultrices egestas quis ut quam. Donec sollicitudin lectus a mauris pulvinar id aliquam urna cursus. Cras quis ligula sem, vel elementum mi. Phasellus non ullamcorper urna.<br>    
    Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. In euismod ultrices facilisis. Vestibulum porta sapien adipiscing augue congue id pretium lectus molestie. Proin quis dictum nisl. Morbi id quam sapien, sed vestibulum sem. Duis elementum rutrum mauris sed convallis. Proin vestibulum magna mi. Aenean tristique hendrerit magna, ac facilisis nulla hendrerit ut. Sed non tortor sodales quam auctor elementum. Donec hendrerit nunc eget elit pharetra pulvinar. Suspendisse id tempus tortor. Aenean luctus, elit commodo laoreet commodo, justo nisi consequat massa, sed vulputate quam urna quis eros. Donec vel.<br>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec a diam lectus. Sed sit amet ipsum mauris. Maecenas congue ligula ac quam viverra nec consectetur ante hendrerit. Donec et mollis dolor. Praesent et diam eget libero egestas mattis sit amet vitae augue. Nam tincidunt congue enim, ut porta lorem lacinia consectetur. Donec ut libero sed arcu vehicula ultricies a non tortor. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean ut gravida lorem. Ut turpis felis, pulvinar a semper sed, adipiscing id dolor. Pellentesque auctor nisi id magna consequat sagittis. Curabitur dapibus enim sit amet elit pharetra tincidunt feugiat nisl imperdiet. Ut convallis libero in urna ultrices accumsan. Donec sed odio eros. Donec viverra mi quis quam pulvinar at malesuada arcu rhoncus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. In rutrum accumsan ultricies. Mauris vitae nisi at sem facilisis semper ac in est.<br>
    Vivamus fermentum semper porta. Nunc diam velit, adipiscing ut tristique vitae, sagittis vel odio. Maecenas convallis ullamcorper ultricies. Curabitur ornare, ligula semper consectetur sagittis, nisi diam iaculis velit, id fringilla sem nunc vel mi. Nam dictum, odio nec pretium volutpat, arcu ante placerat erat, non tristique elit urna et turpis. Quisque mi metus, ornare sit amet fermentum et, tincidunt et orci. Fusce eget orci a orci congue vestibulum. Ut dolor diam, elementum et vestibulum eu, porttitor vel elit. Curabitur venenatis pulvinar tellus gravida ornare. Sed et erat faucibus nunc euismod ultricies ut id justo. Nullam cursus suscipit nisi, et ultrices justo sodales nec. Fusce venenatis facilisis lectus ac semper. Aliquam at massa ipsum. Quisque bibendum purus convallis nulla ultrices ultricies. Nullam aliquam, mi eu aliquam tincidunt, purus velit laoreet tortor, viverra pretium nisi quam vitae mi. Fusce vel volutpat elit. Nam sagittis nisi dui.<br>
    Suspendisse lectus leo, consectetur in tempor sit amet, placerat quis neque. Etiam luctus porttitor lorem, sed suscipit est rutrum non. Curabitur lobortis nisl a enim congue semper. Aenean commodo ultrices imperdiet. Vestibulum ut justo vel sapien venenatis tincidunt. Phasellus eget dolor sit amet ipsum dapibus condimentum vitae quis lectus. Aliquam ut massa in turpis dapibus convallis. Praesent elit lacus, vestibulum at malesuada et, ornare et est. Ut augue nunc, sodales ut euismod non, adipiscing vitae orci. Mauris ut placerat justo. Mauris in ultricies enim. Quisque nec est eleifend nulla ultrices egestas quis ut quam. Donec sollicitudin lectus a mauris pulvinar id aliquam urna cursus. Cras quis ligula sem, vel elementum mi. Phasellus non ullamcorper urna.<br>
    Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. In euismod ultrices facilisis. Vestibulum porta sapien adipiscing augue congue id pretium lectus molestie. Proin quis dictum nisl. Morbi id quam sapien, sed vestibulum sem. Duis elementum rutrum mauris sed convallis. Proin vestibulum magna mi. Aenean tristique hendrerit magna, ac facilisis nulla hendrerit ut. Sed non tortor sodales quam auctor elementum. Donec hendrerit nunc eget elit pharetra pulvinar. Suspendisse id tempus tortor. Aenean luctus, elit commodo laoreet commodo, justo nisi consequat massa, sed vulputate quam urna quis eros. Donec vel.
</div>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-23T09:31:00.380

我想你看起来像这样。

可能这会有所帮助：angular-table-freezepane [https://jatinmarwah.github.io/angular-table-freezepane/app/#/](https://jatinmarwah.github.io/angular-table-freezepane/app/#/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T09:46:46.380

我相信您正在寻找在[这个固定布局示例](http://bpratik.in/dev/FixedLayout/layout.html)中演示的东西。

如果是这样，请参阅[此处的代码和教程](http://www.innovativephp.com/fixed-positioning-html-elements-with-css-and-jquery/)：

> 我们可以使用 css position 属性来固定一个 html 元素。此外，为了使元素固定，我们需要从上、左、下、右给出至少一个坐标点。制作固定位置元素的语法如下所示。在下面提供的这些示例中，我使用位置固定的 div 在窗口滚动时以静态位置显示元素。

```
.fixed_elements{
    position:fixed;
    top:100px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-24T19:51:55.750

我用这个：

```
tbody{
  overflow-y: auto;
  height: 350px;
  width: 102%;
}
thead,tbody{
    display: block;
} 
```

我使用引导 css col-md-xx 定义列宽。如果不定义列宽，则 的自动宽度与 . 102% 是因为溢出会丢失一些空间

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-16T17:52:37.453

众所周知的css规则

```
position: fixed; 
```

应用于表头通常会将它们与相应列之间的匹配制动到表的 tbody 部分，因为它有点将目标 html 元素从 DOM 正常流中“分离”并使其充当独立元素。这意味着如果编辑任何 td 元素中的任何表格正文文本并且相应列的宽度会根据新文本长度而变化，则thead 不会保持同步宽度，从而产生错误的列对齐。要解决它，您必须为每列添加固定宽度，以防止由于列未对齐而导致布局损坏。

所以我想添加一个没有这种缺点的进一步的 CSS 解决方案：

```
.stickyClass > th
{
  position: sticky;
  top: 0;
} 
```

插入以下代码

```
class = "stickyClass" 
```

到 HTML tr 元素中，你要定位什么。

它是如何工作的？它将使所有嵌套的元素（标题单元格）像往常一样表现，直到达到第二个 css 规则中指示的滚动顶部（可以设置一个不同于 0 的值以满足您的需要）。在该滚动量之后，元素机会其行为并充当固定元素。粘性规则的优点是它保持了 thead-tbody 列的宽度对应关系，因此即使编辑了 td 内容文本并更改了列本身的宽度，表格布局也不会中断。因此，它是用于弹性表格布局的绝佳替代方案。

此外，如果您有一个包含表格甚至其他内容的长文档，使用固定的 css 解决方案可以使表格头部保持可见，即使在其他不正确相关的内容上也是如此。换句话说，表格的固定元素保持固定且不可滚动，即使该特定表格不再是屏幕上可见的元素，导致其自身在表格边界上滚动页面。粘性方法没有这个缺点，因为被卡住的元素只有在相关表格（主要父元素）在屏幕上可见之前才会保持可见。一旦相关表格滚动离开并且不再可见，卡住的头部元素就会相应地消失。因此，您可以在同一页面中包含不同的内容（普通文本、段落、图像、甚至越来越多不同的表格），而不会与不相关的元素造成任何混乱，这些元素在不需要时仍然可见。当然，使用 js 可以修复“固定”解决方案的这种不需要的行为，但“粘性”解决方案更易于实现，即使浏览器关闭了 js，它也会起作用。

在这里您可以查看浏览器支持：[https ://caniuse.com/#feat=css-sticky](https://caniuse.com/#feat=css-sticky)

缺点：不幸的是，粘性 css 规则不能直接在 thead 和 tr 元素上起作用（它仍然有点错误），因此您需要将其瞄准第 th 个子元素，并将**> th**添加到类的名称中。

这意味着此答案不会取代本主题的其他答案，而是将它们集成在一起，让您可以选择最适合您自己需求的答案。

# performance - COCOMO 中的分析师能力 (ACAP) 计算

> ID：11030373
> 
> 赞同：1
> 
> 时间：2012-06-14T09:36:03.323
> 
> 标签：performance

我在 COCOMO 文档中看到以下信息：

> 分析师是从事需求、高级设计和详细设计工作的人员。在这个评级中应该考虑的主要属性是分析和设计能力、效率和彻底性，以及沟通和合作的能力。评级不应考虑分析师的经验水平；用AEXP评级。落在第 15 个百分位的分析师被评为非常低，而那些落在第 95 个百分位的分析师被评为非常高
> 
> *   第 15 个百分位 - 非常低
> *   第 35 个百分位 - 低
> *   第 55 个百分位 - 正常
> *   75% 高
> *   第 90 个百分位 - 非常高

我不知道，如何计算百分位数。也许有一些例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:12:17.147

我认为答案非常主观，并且因公司而异。衡量“分析与设计能力、效率与彻底性、沟通与合作能力”需要综合*自我评价和同行评价*、*绩效评价*和*专家判断*。您还可以使用一种发展阶梯来评估某人应该在百分位数范围内的哪个位置。以[这个](http://www.construx.com/professionaldevelopment)为例。

# python - 传递两个变量参数列表

> ID：11030383
> 
> 赞同：2
> 
> 时间：2012-06-14T09:36:46.057
> 
> 标签：python

我知道这很好用：

```
def locations(city, *other_cities): 
    print(city, other_cities) 
```

现在我需要两个变量参数列表，比如

```
def myfunction(type, id, *arg1, *arg2):
    # do somethong
    other_function(arg1)

    #do something
    other_function2(*arg2) 
```

但是 Python 不允许使用这个两次

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T09:38:57.113

这是不可能的，因为从该位置开始`*arg`捕获*所有位置参数*。所以根据定义，一秒钟`*args2`总是空的。

一个简单的解决方案是传递两个元组：

```
def myfunction(type, id, args1, args2):
    other_function(args1)
    other_function2(args2) 
```

并这样称呼它：

```
myfunction(type, id, (1,2,3), (4,5,6)) 
```

如果这两个函数需要位置参数而不是单个参数，您可以这样调用它们：

```
def myfunction(type, id, args1, args2):
    other_function(*arg1)
    other_function2(*arg2) 
```

这样做的好处是您可以在调用时使用**任何**可迭代对象，甚至是生成器，`myfunction`因为被调用的函数永远不会与传递的可迭代对象接触。

* * *

如果你真的想使用两个变量参数列表，你需要某种分隔符。以下代码`None`用作分隔符：

```
import itertools
def myfunction(type, id, *args):
    args = iter(args)
    args1 = itertools.takeuntil(lambda x: x is not None, args)
    args2 = itertools.dropwhile(lambda x: x is None, args)
    other_function(args1)
    other_function2(args2) 
```

它将像这样使用：

```
myfunction(type, id, 1,2,3, None, 4,5,6) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:39:57.660

您可以改用两个字典。

# c# - 通过资源释放内存

> ID：11030385
> 
> 赞同：-3
> 
> 时间：2012-06-14T09:37:12.840
> 
> 标签：c#, .net

我在 c# 中有一个程序，它使用我的本地网络摄像头来捕获和存储图像。我有按钮可以点击开始、停止、继续等。当我运行程序时，它在我打开系统后第一次正常工作，但在同一件事的连续执行中我得到一个错误（在 pop-上窗口）：

> 捕获视频图像时发生错误。现在将终止视频捕获。对象引用未设置为对象的实例。

我认为这可能是因为相机设备，没有释放它使用的内存。那么，当我单击退出按钮时，如何以编程方式释放它？下面是程序的一部分，我在 webcam.start(0) 方法中遇到错误

命名空间 WinFormCharpWebCam {

```
class WebCam
{

    private WebCamCapture webcam;
    private System.Windows.Forms.PictureBox _FrameImage;
    private int FrameNumber = 30;
    public void InitializeWebCam(ref System.Windows.Forms.PictureBox ImageControl)
    {
        webcam = new WebCamCapture();
        webcam.FrameNumber = ((ulong)(0ul));
        webcam.TimeToCapture_milliseconds = FrameNumber;
        webcam.ImageCaptured += new WebCamCapture.WebCamEventHandler(webcam_ImageCaptured);
        _FrameImage = ImageControl;
    }

    void webcam_ImageCaptured(object source, WebcamEventArgs e)
    {
        _FrameImage.Image = e.WebCamImage;
    }

    public void Start()
    {
        webcam.TimeToCapture_milliseconds = FrameNumber;
        webcam.Start(0); //error pops up when the execution comes to this method

    }

    public void Stop()
    {
        webcam.Stop();

    }

    public void Continue()
    {
        // change the capture time frame
        webcam.TimeToCapture_milliseconds = FrameNumber;

        // resume the video capture from the stop
        webcam.Start(this.webcam.FrameNumber);
    }

    public void ResolutionSetting()
    {
        webcam.Config();
    }

    public void AdvanceSetting()
    {
        webcam.Config2();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:50:21.463

You have a `NullReferenceException` thrown, not `OutOfMemoryException`.

Check your call stack to pinpoint where it originates. You can debug your app with debugger set to break on exception thrown, so it will break right where your exception occurs (press CRTL+D, E to open exceptions window in VS.NET).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:52:51.700

根据您收到的错误，我猜您下载了 EasyWebCam 库。
如果这是正确的，那么我就是这样解决它的：
1\. 我在我的机器上安装了 Cyber​​link 的 Youcam 软件。
2\. 每当我启动我自己的应用程序时，EasyWebCam 库都会检测到机器上的 Youcam WebSplitter，并提示我选择那个或默认的网络摄像头驱动程序。
3\. 我选择了 YouCam WebSplitter，该应用程序可以正常工作。

此时，出现了另一个问题：当我的应用程序关闭时，Youcam 进程并没有终止。
我是怎么修的？
当我的应用程序窗口即将退出时，我必须获取 Youcam 进程并 Kill() 它。
这个丑陋的解决方案奏效了。

# xtk - XTK 构建问题

> ID：11030386
> 
> 赞同：0
> 
> 时间：2012-06-14T09:37:13.373
> 
> 标签：xtk

当我尝试构建最新的代码 [master]。我收到很多如下警告，并且生成的 xtk.js 无法正常工作。

*----------------------* 编译代码/home/george/XTK4_0_217/lib/closure-library/closure/bin/build/closurebuilder.py：扫描路径... /home/george/XTK4_0_217/lib/closure-library/closure/bin/build/closurebuilder .py：扫描了 958 个源。/home/george/XTK4_0_217/lib/closure-library/closure/bin/build/closurebuilder.py：构建依赖树.. /home/george/XTK4_0_217/lib/closure-library/closure/bin/build/closurebuilder.py ：使用以下命令编译：java -jar /home/george/XTK4_0_217/lib/closure-library/compiler-latest/compiler.jar --js /home/george/XTK4_0_217/lib/closure-library/closure/goog/ base.js --js /home/george/XTK4_0_217/lib/csg/vector.js --js /home/george/XTK4_0_217/X.js --js /home/george/XTK4_0_217/lib/closure-library/closure /goog/string/string.js --js /home/george/XTK4_0_217/lib/closure-library/closure/goog/useragent/useragent。js --warning_level=VERBOSE --compilation_level=ADVANCED_OPTIMIZATIONS --jscomp_warning=missingProperties --jscomp_warning=checkTypes --define=goog.DEBUG=false /home/george/XTK4_0_217/injects/constructable.js:60: WARNING - Property _points never在 X.constructable var numberOfPoints = this._points.count 上定义；^

/home/george/XTK4_0_217/injects/constructable.js:67：警告 - 属性 _points 从未在 X.constructable var point1 = this._points.get(p) 上定义；^

/home/george/XTK4_0_217/injects/constructable.js:68：警告 - 属性 _points 从未在 X.constructable var point2 = this._points.get(p + 1) 上定义；^

/home/george/XTK4_0_217/injects/constructable.js:69：警告 - 属性 _points 从未在 X.constructable var point3 = this._points.get(p + 2) 上定义；^

/home/george/XTK4_0_217/injects/constructable.js:71：警告 - 属性 _normals 从未在 X.constructable var normal1 = this._normals.get(p) 上定义；^

/home/george/XTK4_0_217/injects/constructable.js:72：警告 - 属性 _normals 从未在 X.constructable var normal2 = this._normals.get(p + 1) 上定义；^

/home/george/XTK4_0_217/injects/constructable.js:73：警告 - 属性 _normals 从未在 X.constructable var normal3 = this._normals.get(p + 2) 上定义；^

/home/george/XTK4_0_217/injects/constructable.js:79：警告 - 属性 _colors 从未在 X.constructable 上定义 if ((this._colors.length > 0)) { ^

/home/george/XTK4_0_217/injects/constructable.js:83：警告 - 属性 _colors 从未在 X.constructable color = this._colors.get(p) 上定义；^

/home/george/XTK4_0_217/injects/constructable.js:122：警告 - 属性 _points 从未在 X.constructable this._points.clear() 上定义；^

/home/george/XTK4_0_217/injects/constructable.js:123：警告 - 属性 _normals 从未在 X.constructable this._normals.clear() 上定义；^

/home/george/XTK4_0_217/injects/constructable.js:124：警告 - 属性 _colors 从未在 X.constructable this._colors.clear() 上定义；^

/home/george/XTK4_0_217/injects/constructable.js:234：警告 - 属性 toCSG 从未在 csg 上定义 csg = csg.toCSG(); ^

/home/george/XTK4_0_217/injects/constructable.js:240：警告 - 从未在 X.object result.fromCSG(this.toCSG().union(csg)) 上定义来自 CSG 的属性；^

/home/george/XTK4_0_217/injects/constructable.js:269：警告 - 属性 toCSG 从未在 csg 上定义 csg = csg.toCSG(); ^

/home/george/XTK4_0_217/injects/constructable.js:275: 警告 - 从未在 X.object result.fromCSG(this.toCSG().subtract(csg)) 上定义 fromCSG 的属性；^

/home/george/XTK4_0_217/injects/constructable.js:304：警告 - 属性 toCSG 从未在 csg 上定义 csg = csg.toCSG(); ^

/home/george/XTK4_0_217/injects/constructable.js:310：警告 - 从未在 X.object result.fromCSG(this.toCSG().intersect(csg)) 上定义 fromCSG 的属性；^

/home/george/XTK4_0_217/injects/constructable.js:327：警告 - 从未在 X.object result.fromCSG(this.toCSG().inverse()) 上定义 fromCSG 的属性；^

/home/george/XTK4_0_217/objects/cube.js:265: 警告 - 从未在 X.cube 上定义来自 CSG 的属性 this.fromCSG(new CSG.cube({ ^

/home/george/XTK4_0_217/objects/cylinder.js:207：警告 - 从未在 X.cylinder this.fromCSG 上定义来自 CSG 的属性（新 CSG.cylinder（{ ^

/home/george/XTK4_0_217/objects/object.js:151：警告 - 为命名空间 X 创建的不完整别名 this._children.push(new Xclassname); ^

/home/george/XTK4_0_217/objects/sphere.js:173：警告 - 从未在 X.sphere 上定义来自 CSG 的属性 this.fromCSG(new CSG.sphere({ ^

0 个错误，23 个警告，94.4% 键入 /home/george/XTK4_0_217/lib/closure-library/closure/bin/build/closurebuilder.py：JavaScript 编译成功。

> > 输出：xtk.js 代码编译 *-----------* *-------- -* 请访问 goxtk.com 访问我们！！！联系我们：dev@goxtk.com 享受XTK *------------------------*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:42:02.647

23个警告没问题。编译后的 xtk.js 应该可以正常工作 - 刚刚针对 master 进行了测试。

# sql-server - 根据同一表中的其他行选择行

> ID：11030390
> 
> 赞同：0
> 
> 时间：2012-06-14T09:37:18.927
> 
> 标签：sql-server

在 SQL Server 中，我有一个表（我们称之为`TransList`），如下所示：

```
TPN    Start    End    TDate                      DoneBy
10     6        7      2003-03-17 14:48:42.750    User2 *
10     1        6      2003-03-13 08:02:09.317    User3
11     3        6      2003-03-21 08:15:45.410    User3 ** yes
11     6        3      2003-03-13 08:13:13.920    User4 <--
11     5        6      2003-03-08 17:39:51.460    User4
12     13       3      2003-03-19 10:58:23.187    User8 *
12     6        13     2003-03-17 14:48:42.750    User7
12     3        6      2003-03-13 08:02:09.317    User6
12     1        3      2003-03-01 14:09:17.167    User1
13     3        6      2003-03-19 10:58:23.187    User1 *** no
13     1        3      2003-03-01 14:09:17.167    User2 <--
14     3        6      2003-03-21 08:15:45.410    User5 ** yes
14     13       3      2003-03-13 08:13:13.920    User6 <--
14     6        13     2003-03-08 17:39:51.460    User7
15     6        3      2003-03-17 14:48:42.750    User2 *
15     1        6      2003-03-13 08:02:09.317    User3 
```

这是一个非常复杂的查询的结果，它连接了两个单独的 SELECT 语句，每个语句连接了几个表。行按 排序`TPN ASC, TDate DESC`。

我现在想过滤这个表并获得：

```
TPN    Start    End    TDate                      DoneBy
10     6        7      2003-03-17 14:48:42.750    User2
11     3        6      2003-03-21 08:15:45.410    User3
12     13       3      2003-03-19 10:58:23.187    User8
14     3        6      2003-03-21 08:15:45.410    User5
15     6        3      2003-03-17 14:48:42.750    User2 
```

那是：

*   每个选定 TPN 的最新交易
*   TPN 是根据其最新交易和/或其两个最新交易的条件选择的

标有 的行在`*`那里，因为`(Start=6 and End=7) or (Start=13 and End=3) or (Start=6 and End=3)`因此我不关心这些 TPN 的其他交易

标有 的行在`**`那里是因为`(Start=3 and End=6) and for previous transaction (Start=6 and End=3)`

标有`***`的行**不**存在，因为`(Start=3 and End=6) but for previous transaction is not (Start=6 and End=3)`

我可能需要根据哪个用户进行了先前的交易和/或对 and 有更复杂的逻辑条件`*`（`**`状态机很复杂，我还没有完成检查），但`***`始终是`not **`.

我总是只需要检查每个 TPN 的前 2 个交易。

我是 SQL 新手，我已经花了几天时间来尝试弄清楚如何实现这一点。我考虑过自我加入`TransList`，使用 LIMIT 或 TOP 或走过桌子，但我没有设法使任何这个解决方案发挥作用。

任何人都可以帮忙吗？

**编辑：**
上面的表格是一个“摘录”，但为了响应安德烈的请求，这里是查询：

```
SELECT Items.[TPN],
       [StartStatus],
       [EndStatus],
       [TransactionDate],
       [TransDoneBy],
       [CurrentStatus],
       [Title],
       [Severity],
       [LastChangeDate],
       [ChangeDoneBy],
       [Planned],
       [Remaining]
FROM
(SELECT WORKITEM as 'TPN',
       TFIELDCHANGE.NEWSYSTEMOPTIONID as 'StartStatus',
       TFIELDCHANGE.OLDSYSTEMOPTIONID as 'EndStatus',
       THISTORYTRANSACTION.LASTEDIT as 'TransactionDate',
       trans_person.LASTNAME as 'TransDoneBy'
FROM dbo.THISTORYTRANSACTION JOIN dbo.TFIELDCHANGE ON (dbo.THISTORYTRANSACTION.OBJECTID = dbo.TFIELDCHANGE.HISTORYTRANSACTION)
                             JOIN dbo.TPERSON  trans_person ON (dbo.THISTORYTRANSACTION.CHANGEDBY = trans_person.PKEY)
WHERE dbo.TFIELDCHANGE.FIELDKEY = 4 -- Only transactions regarding status
) Transactions
JOIN
(SELECT WORKITEMKEY as 'TPN',
       TSTATE.LABEL as 'CurrentStatus',
       PACKAGESYNOPSYS as 'Title',
       TSEVERITY.LABEL as 'Severity',
       TWORKITEM.LASTEDIT as 'LastChangeDate',
       item_person.LASTNAME as 'ChangeDoneBy',
       max(CASE TATTRIBUTEVALUE.FIELDKEY WHEN 60 THEN TATTRIBUTEVALUE.INTEGERVALUE END) as 'Planned',
       max(CASE TATTRIBUTEVALUE.FIELDKEY WHEN 72 THEN TATTRIBUTEVALUE.INTEGERVALUE END) as 'Remaining'
FROM dbo.TWORKITEM JOIN dbo.TSTATE ON (dbo.TWORKITEM.STATE = dbo.TSTATE.PKEY)
                   JOIN dbo.TSEVERITY ON (dbo.TWORKITEM.SEVERITYKEY = dbo.TSEVERITY.PKEY)
                   JOIN dbo.TPERSON item_person ON (dbo.TWORKITEM.CHANGEDBY = item_person.PKEY)
                   JOIN dbo.TATTRIBUTEVALUE ON (dbo.TWORKITEM.WORKITEMKEY = dbo.TATTRIBUTEVALUE.WORKITEM)
WHERE dbo.TWORKITEM.STATE = 2 OR -- Current state: analyzed
      dbo.TWORKITEM.STATE = 3 OR -- Current state: assigned
      dbo.TWORKITEM.STATE = 4 OR -- Current state: suspended
      dbo.TWORKITEM.STATE = 6 OR -- Current state: implemented
      dbo.TWORKITEM.STATE = 7 OR -- Current state: verified
      dbo.TWORKITEM.STATE = 13   -- Current state: verifying
GROUP BY WORKITEMKEY,
         TSTATE.LABEL,
         PACKAGESYNOPSYS,
         TSEVERITY.LABEL,
         TWORKITEM.LASTEDIT,
         item_person.LASTNAME
) Items
ON Items.TPN = Transactions.TPN
ORDER BY Items.[TPN] ASC, [TransactionDate] DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:13:03.573

您似乎正在寻找一种通用方法来比较组的最新交易与其前身。

This can be done using the `ROW_NUMBER()` function and a self join like this:

```
SELECT foo
FROM   (SELECT foo,
               Row_number() OVER (PARTITION BY TRN ORDER BY TDate) AS RN
        FROM   TranTable) AS Latest
       LEFT JOIN (SELECT foo,
                         Row_number() OVER (PARTITION BY TRN ORDER BY TDate) AS RN
                  FROM   TranTable) AS Previous
         ON Latest.RN = Previous.RN - 1
WHERE  Latest.RN = 1 /* Get only the latest */
       OR (/* your criteria for two latest */ AND Latest.RN IN (1,2)) 
```

# textbox - 如何在 Google Apps 中使用动态 e.parameter？

> ID：11030392
> 
> 赞同：1
> 
> 时间：2012-06-14T09:37:19.520
> 
> 标签：textbox, widget, google-apps-script

我在 doGet() 函数中创建了一个网格。此网格包含用户选择的动态行数。在每一行中我都有一些文本框。一旦用户单击提交按钮，我希望能够获取用户在文本框中插入的所有数据。

所以我给每个 textBox 一个动态 ID：

```
app.createTextBox().setName('gridText'+countRow);
countRow ++;
 ......... 
```

我的问题是我不知道如何在提交功能上动态访问我的 TextBox。

我试过这样的事情：

```
for( i = 0 ; i < countRow ; i++){
var buffer  = e.parameter[e.parameter.gridText]+i;
 .........
} 
```

基于此：[http ://productforums.google.com/forum/#!category-topic/apps-script/services/nWN14AQ-9gQ](http://productforums.google.com/forum/#!category-topic/apps-script/services/nWN14AQ-9gQ)

但它不起作用......而这有效：

```
 var buffer = e.parameter.gridText3; 
```

知道我做错了什么吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T04:31:17.250

尝试

```
var buffer  = e.parameter['gridText' + i.toString()]; 
```

# scp - 是否可以让 SCP 在复制过程中忽略符号链接？

> ID：11030394
> 
> 赞同：86
> 
> 时间：2012-06-14T09:37:20.770
> 
> 标签：scp

我需要重新安装我们的一台服务器，作为预防措施，我想将`/home`、`/etc`、`/opt`和移动`/Services`到备份服务器。

但是，我有一个问题：由于大量的符号链接，很多文件被复制了多次。

是否可以`scp`忽略符号链接（或者实际上将链接复制为链接而不是目录或文件）？如果没有，还有其他方法吗？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-06-14T10:56:22.883

我知道这是可能的，我只是拿错了工具。我用*rsync做到了*

```
rsync --progress -avhe ssh /usr/local/  XXX.XXX.XXX.XXX:/BackUp/usr/local/ 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-11-05T17:06:41.987

我发现[该`rsync`方法](https://stackoverflow.com/a/11031611)对我不起作用，但是我在该网站上找到了另一种方法（[www.docstore.mik.ua/orelly](http://docstore.mik.ua/orelly)）。

特别[是“O'Reilly：SSH：安全外壳。权威指南”的第 7.5.3](http://docstore.mik.ua/orelly/networking_2ndEd/ssh/ch07_05.htm)节。

> **7.5.3\. 目录的递归副本**
> 
> ...
> 
> 虽然 scp 可以复制目录，但不一定是最好的方法。如果您的目录包含硬链接或软链接，它们将不会被复制。链接被复制为普通文件（链接目标），更糟糕的是，循环目录链接会导致 scp1 无限循环。（scp2 检测符号链接并复制它们的目标。）其他类型的特殊文件，例如命名管道，也不能正确复制。更好的解决方案是使用 tar，它可以正确处理特殊文件，并将其发送到远程机器通过 SSH 解压：

```
$ tar cf - /usr/local/bin | ssh server.example.com tar xf - 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-03-31T11:29:32.410

使用`tar`over`ssh`作为发送者和接收者也可以做到这一点：

```
cd $DEST_DIR
ssh user@remote-host 'cd $REMOTE_SRC_DIR; tar cf - ./' | tar xvf - 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-30T20:52:37.950

一种解决方案是使用壳管。我有一种情况，我得到了一些 *.gz 文件和由某些软件生成的符号链接，以链接到名称稍短的相同 *.gz 文件。如果我只是使用 scp，那么符号链接将被复制为常规文件并导致重复。我知道 rsync 可以忽略符号链接，但是我的 gz 文件没有使用可同步选项进行压缩，并且同步在复制这些 gz 文件时非常慢。所以我只是使用以下脚本来复制文件：

```
find . -type f -exec scp {} target_host:/directory/name/data \; 
```

-f 选项将仅查找常规文件并忽略符号链接。您需要在源主机上发出此命令。希望这可以帮助一些用户在我的情况。如果我错过了什么，请告诉我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-26T08:33:36.350

一种可以在客户端执行以使用 tar + ssh 命令从服务器复制文件夹的单线解决方案。

```
ssh user@<Server IP/link> 'mkdir -p <Remote destination directory;cd <Remote destination directory>; tar cf - ./' | tar xf - C <Source destination directory> 
```

注意：mkdir 是必须的，如果远程目标目录不存在，那么该命令将简单地压缩远程服务器的整个主目录并将其解压缩到客户端。

# sql - Sql Server 查询按名称分组

> ID：11030395
> 
> 赞同：1
> 
> 时间：2012-06-14T09:37:20.890
> 
> 标签：sql, sql-server, join

我有来自 2 个表 Notes（左）和扫描（右）的以下数据：

![在此处输入图像描述](../Images/557b87fabf0f4e473dc6bca924b12abf.png)

想象一下，拣货员和打包员都各不相同，就像您可以拥有的一样`JOHN, JANE`。

我需要一个这样输出的查询：

在给定的`date range`：

```
Name - Picked (units) - Packed (units)
MASI - 15 - 21
JOHN - 21 - 32 
```

等等

我什至不知道如何开始，任何提示都会有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:46:14.460

```
SELECT name, SUM(nbPicked) Picked, SUM(nbPacked) Packed
FROM
(SELECT n.Picker name, SUM(n.Units) nbPicked, 0 nbPacked 
FROM Notes n
INNER JOIN scans s ON s.PickNote = n.Number
--WHERE s.ProcessedOn BETWEEN x and y
GROUP BY n.Picker

UNION ALL

SELECT n.Packer name, 0 nbPicked, SUM(n.Units) nbPacked
FROM Notes n
INNER JOIN scans s ON s.PickNote= n.Number
--WHERE s.ProcessedOn BETWEEN x and y
GROUP BY n.Packer)

GROUP BY name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:46:14.740

如果没有单独列出每个 Picker/Packer 的“工人”，我认为你需要这样的东西......

```
SELECT
      CASE WHEN action.name = 'Picker' THEN scans.Picker ELSE scans.Packer END  AS worker,
  SUM(CASE WHEN action.name = 'Picker' THEN notes.Units  ELSE 0            END) AS PickedUnits,
  SUM(CASE WHEN action.name = 'Packer' THEN notes.Units  ELSE 0            END) AS PackedUnits
FROM
  notes
INNER JOIN
  scans
    ON scans.PickNote = notes.Number
CROSS JOIN
(
            SELECT 'Picker' AS name
  UNION ALL SELECT 'Packer' AS name

)
  AS action
GROUP BY
  CASE WHEN action.name = 'Picker' THEN scans.Picker ELSE scans.Packer END 
```

*（这实际上只是@RaphaëlAlthaus 与我同时发布的答案的代数重新安排。两者都用于`UNION`分别计算 Picker 值和 Packer 值。如果您有单独的索引`scans.Picker`，`scans.Packer`那么我会期待我的可能是最慢的。如果您没有这两个索引，那么我希望我的索引最快。我建议创建索引并在真实数据集上进行测试。）*

**编辑**

实际上，我建议完全更改扫描表；规范化它。

*   您的去规范化集每个 PickNote 有一行，带有字段`picker`和`packer`.
*   一个规范化的集合每个 PickNote 将有两行，其中包含字段`role`和`worker`.

```
 id  | PickNote | Role | Worker
------+----------+------+--------
  01  | PK162675 | Pick |  MASI
  02  | PK162675 | Pack |  MASI
  03  | PK162676 | Pick |  FRED
  04  | PK162676 | Pack |  JOHN 
```

这允许您创建简单的索引和简单的查询。

您最初可能会拒绝额外*不必要*的行，但它会产生更简单的查询、更快的查询、更好的可维护性、更高的灵活性等。

简而言之，这种标准化可能会花费一些额外的空间，但它会永远回报红利。

# objective-c - 使用 nscoding 归档 UIVIew 及其子视图

> ID：11030396
> 
> 赞同：-2
> 
> 时间：2012-06-14T09:37:23.903
> 
> 标签：objective-c, ios, cocoa-touch, uiview, nskeyedarchiver

如何使用 NSCoding 协议和 NSKeyedAchiever 归档 UIView 及其子视图？我已经看到了许多归档 NSObject 类对象的示例，但我无法归档 UIView 及其子视图及其属性和状态。有谁能够帮我？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:47:45.970

`NSObject`示例是 for还是无关紧要`UIView`，因为 iOS 中的每个对象都继承自`NSObject`. 因此，您可以在 iOS 中使用相同的教程`UIView`或任何其他“对象”。

这个先前提出的问题有答案，其中包含示例代码。

[如何序列化 UIView？](https://stackoverflow.com/questions/1169061/how-to-serialize-a-uiview-iphone)

&

当然，您可以查看非常棒的[Apple 文档](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Archiving/Archiving.html#//apple_ref/doc/uid/10000047i)

祝你好运！

# asp.net - 将 ASP.NET 网站 + 数据库发布到 Windows Azure 网站

> ID：11030401
> 
> 赞同：3
> 
> 时间：2012-06-14T09:37:38.910
> 
> 标签：asp.net, azure, azure-sql-database, azure-web-app-service

我已经在 Windows Azure 上注册了一个测试帐户来测试它。我构建了一个 Hello world ASP.NET Web 应用程序 + 数据库，仅用于测试。

我安装了 Visual Studio 2012 RC 并安装了 Windows Azure 软件。

在 Windows Azure 中，我创建了一个新的网站 e+ 数据库，我认为它运行良好 ( [http://azuretest.azurewebsites.net](http://azuretest.azurewebsits.net) )

我从 Windows Azure 下载了发布配置文件并将其导入 Visual Studio。当我发布网站时，我选择发布数据库，选择正确的连接字符串（来自发布配置文件）。

发布后我收到此错误：

> 错误 1 ​​Web 部署任务失败。（使用 Web 管理服务进行连接时，无法使用指定的提供程序（“dbSqlPackage”）完成操作。如果服务器管理员未授权用户执行此操作，则可能会发生这种情况。dbSqlPackage [http://go.microsoft.com/ fwlink/?LinkId=178034](http://go.microsoft.com/fwlink/?LinkId=178034) 了解更多信息：http: [//go.microsoft.com/fwlink/](http://go.microsoft.com/fwlink/?LinkId=221672#ERROR_USER_NOT_AUTHORIZED_FOR_DEPLOYMENTPROVIDER) ?LinkId=221672#ERROR_USER_NOT_AUTHORIZED_FOR_DEPLOYMENTPROVIDER .) 0 0 azuretest

此错误消息中的 url 链接到 2008 年和 2010 年的文章。我认为我在那里找不到任何好的信息。

错误说

> 如果服务器管理员未授权用户执行此操作，则可能会发生这种情况

但我认为我不能在共享的 Windows Azure 网站上授权任何内容，可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T19:06:10.173

我刚刚在[http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/thread/3f99e1e3-e030-47e0-9e43-f029663ca806](http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/thread/3f99e1e3-e030-47e0-9e43-f029663ca806)回答了这个问题。

您好 Marcel，我在 Visual Studio Web 团队工作。当我们发布 VS 2012 RC 时，我们希望能够在 RC 发布时完成更新数据库复选框的服务器端组件。不幸的是，我们无法做到这一点，因此 VS 2012 RC 中的更新数据库复选框仅在您发布到 localhost 时才有效。

我们正在努力准备好服务器端的部分，但我们还不能提交时间表。我在[http://blogs.msdn.com/b/webdevtools/archive/2012/06/14/vs-publish-dialog-update-database-dialog-disabled.aspx](http://blogs.msdn.com/b/webdevtools/archive/2012/06/14/vs-publish-dialog-update-database-dialog-disabled.aspx)上写了一篇关于这个的博客。

# f# - 从 TestDriven.NET 运行 F# xUnit Fact 报告“看起来您正在尝试执行 xUnit.net 单元测试。”

> ID：11030404
> 
> 赞同：2
> 
> 时间：2012-06-14T09:38:07.397
> 
> 标签：f#, testdriven.net, xunit.net

我正在尝试使用 TestDriven.NET 运行 xUnit 测试（从 F# 模块，如果它有任何区别），但无论我做什么，我都会收到此错误：

```
It looks like you're trying to execute an xUnit.net unit test.

For xUnit 1.5 or above (recommended):
Please ensure that the directory containing your 'xunit.dll' reference also contains xUnit's
test runner files ('xunit.dll.tdnet', 'xunit.runner.tdnet.dll' etc.)

For earlier versions:
You need to install support for TestDriven.Net using xUnit's 'xunit.installer.exe' application.

You can find xUnit.net downloads and support here:
http://www.codeplex.com/xunit 
```

我尝试按照建议进行操作，即我复制了文件

```
xunit.dll.tdnet
xunit.extensions.dll
xunit.gui.clr4.exe
xunit.runner.tdnet.dll
xunit.runner.utility.dll
xunit.runner.utility.xml
xunit.xml 
```

到带有 xunit.dll 的文件夹，然后我运行`xunit.installer.exe`. 我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T10:20:45.617

我刚刚发现我忘记在 F# 中使测试成为一个函数（所以它只是一个值）。但是，错误消息不能更具误导性！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-03T02:58:31.167

你有两个问题：

1.  *你的事实被打破了*：-

    如果您将鼠标悬停在

    `please work`

    位，你会看到类似的东西：`unit -> int`

    对于`Fact`要被 xUnit 运行器拾取的 a，它需要产生 `unit (void)。

    因此，首先要做好的一个关键是不返回任何东西。换句话说，将您的替换`123`为`()`（或断言）。

    您可以通过在测试中做出规定来防止这种情况`:unit`：-

    ```
    [<Fact>]
    let ``please work`` () : unit = 123 
    ```

    这将强制编译错误。

2.  *TestDriven.NET*报告它找不到 xunit.tdnet 模块

    首先正确完成第 1 步至关重要。然后重试，问题应该消失了

    如果还剩...

    尝试使用基于 VS 的运行程序，只要它已安装并且 xunit.dll 进入您的输出目录就可以工作，或者查看您的 TD.NET 版本的文档以获取详细的故障排除说明（执行摘要是 .tdnet 文件在你的输出目录中，或者你从包含它应该工作的包的文件夹中撤消并重做 xunit.installer，尤其是如果你是最新的）

# magento - Magento：Ubuntu中的安装问题

> ID：11030407
> 
> 赞同：1
> 
> 时间：2012-06-14T09:38:20.640
> 
> 标签：magento, ubuntu

PHP & MySql 配置是：

```
**MySql**   
Server: Localhost via UNIX socket
Server version: 5.1.63-0ubuntu0.11.10.1
Protocol version: 10
User: root@localhost
MySQL charset: UTF-8 Unicode (utf8)

**Web Server** 
Apache/2.2.20 (Ubuntu)
MySQL client version: 5.1.63
PHP extension: mysqli Documentation 
```

我正在使用 Ubuntu 11.10 当我尝试安装 Magento 1.7.0.0 时，我收到以下错误消息：

```
The requested URL /magento17/index.php/install/ was not found on this server. 
```

有人可以建议我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:01:33.700

如果你是从 root 终端安装，你可以对包使用sandard debian 命令。您可以尝试查找未正确安装的原因。首先尝试找到正确安装的依赖项：

```
dpkg -s magento17 | grep Depends: 
```

当您看到结果时，请尝试查找是否所有依赖项都安装在正确的版本中，如下例所示：

```
dpkg -l  apache2.2-comm 
```

如果它是正确的，你会看到这样的答案：

```
ii  apache2.2-comm 2.2.16-6+squee Apache HTTP Server common files 
```

如果安装正确，那么您应该尝试检查问题是否出在使用正确的相对链接上！

尝试使用

```
magento17/index.php/install/ 
```

# css - vaadin 表单验证？

> ID：11030408
> 
> 赞同：0
> 
> 时间：2012-06-14T09:38:44.370
> 
> 标签：css, vaadin

我在 vaadin 中有一个表格，其中包含一些必需的文本字段。当我单击提交按钮时，它会验证文本字段。当字段无效时，它将有红色边框。

```
if(!field.isValid()) {
    valid = false;
    field.setStyleName("error"); 
} 
```

现在我的问题：

当我单击文本字段时，边框会变回深蓝色，当我单击字段外时，它会再次变为红色。

如何确保单击文本字段时边框保持红色？有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:21:21.317

只是一个猜测，但尝试`!important`在边框颜色声明的末尾添加，即。`border-color: red !important;`. 然后，您可以使用 firebug 检查样式是否会保留在该字段中。

# c#-4.0 - 合并两个字典列表

> ID：11030410
> 
> 赞同：0
> 
> 时间：2012-06-14T09:38:48.787
> 
> 标签：c#-4.0

我有两个字典列表。两者都不为空。如何合并这些列表？以下哪个是更好的方法？

1.  dicA.Concat(dicB).ToDictionary(kvp => kvp.Key, kvp => kvp.Value)

2.  字典 Mydictionary = new Dictionary(); Mydictionary.Union(secondDictionary).ToDictionary(pair => pair.Key, pair => pair.Value);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:48:21.760

试试这个：-

```
var finalList = list1.Union(list2).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:59:21.930

您可以使用 linq 的 SelectMany 运算符，但您的合并处理很复杂

# https - Google 协作平台 HTTPS 问题

> ID：11030411
> 
> 赞同：2
> 
> 时间：2012-06-14T09:38:48.847
> 
> 标签：https, google-sites

我想知道是否有人可以提供帮助。

我正在使用 Google 协作平台为客户创建网站（他们设定的要求）。

他们的要求之一是在网站上嵌入联系表格。我看了一下，那里有很多，但是，如果用户从任何版本的 IE 访问，由于安全设置，内容不会显示。

所有其他浏览器都运行良好。我知道另一种方法是简单地链接到外部资源，但这并不理想。

我的问题是三重的。1\. 是否可以编写一个适用于具有非安全内容的 IE 的小工具（如果可以的话）？2\. 有没有我可以使用的 HTTPS 联系表格？3\. 有没有人使用过 Google 网站并尝试加载不安全的内容并有任何提示？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T00:35:03.020

对于任何感兴趣的人，我已经回答了我的问题。

1.  是否可以编写一个适用于具有非安全内容的 IE 的小工具（如果可以的话）？这是可能的，但您需要有一个 SSL 托管服务器。

2.  有没有我可以使用的 HTTPS 联系表格？对此有付费解决方案。或者，编写您自己的 html 代码以发布到这些解决方案之一（免费解决方案是[http://www.emailmeform.com/](http://www.emailmeform.com/)）

3.  是否有人对 Google 网站有任何经验并尝试加载不安全的内容并有任何提示？还在等有经验的人......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T06:52:57.337

你试过 JotForm.com 吗？他们拥有与 emailmeform.com 相同的（免费和高级）计划。另外，他们有一个特定的环形交叉路口，可以将您的表单嵌入 Google 协作平台（他们有一个专为 Google 协作平台设计的小工具）。是的，如果您希望将 JotForm 作为 iframe 嵌入，JotForm 的表单具有 https url。

-- 另一种解决方案是使用 Google Docs 表单。

> 是否有人对 Google 网站有任何经验并尝试加载不安全的内容并有任何提示？还在等有经验的人......

-- 是的，我在尝试将一些社交媒体脚本放入我的 Google 协作平台网站时遇到过这种情况，而最好的办法就是让我的网站摆脱那些不安全的内容。

# android - SL4A 在我的 android 的终端 ide 中不起作用

> ID：11030412
> 
> 赞同：0
> 
> 时间：2012-06-14T09:38:49.487
> 
> 标签：android, python, root, scapy, sl4a

我有 HTC One X，Android 4。我已经在我的智能手机上安装了 sl4a、python、scapy 和终端 IDE。一切都好，终端 IDE 中的 python 在 scapy 作为 root 下运行良好。

问题发生在我使用 SL4A 时。

```
droid=android.Android(('127.0.0.1', '58322'))
droid.makeToast('Hello, Android!') 
```

当我运行脚本时没有错误，但是在解释 makeToast() 时程序停止并且没有任何反应。

任何人都可以帮助我在终端中使用 SL4A 以 root 身份运行 python 脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T15:20:29.853

这可能会有所帮助：[https ://groups.google.com/forum/?fromgroups=#!searchin/python-for-android/socket.gaierror/python-for-android/s1rX9fTYPQQ/6_pHEm13gQwJ](https://groups.google.com/forum/?fromgroups=#!searchin/python-for-android/socket.gaierror/python-for-android/s1rX9fTYPQQ/6_pHEm13gQwJ)

此外，您的端口不应使用单引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:36:17.133

我可以告诉你如何以 root 身份运行它，但首先让我提一下，我不相信这是你的问题。为确保，请尝试运行此脚本：

```
# author: Matthew Downey
# purpose: Hello World.py script for android with SL4A

import android #this makes sure you can run android functions

droid = android.Android()

droid.makeToast('Hello, Android!') #uses the android module to display a user message 
```

这应该可以正常运行，并且不需要 root。但是，如果您在需要 root 的 android 上运行 python 脚本（例如，您正在使用 subprocess.call(command) 执行需要 root 的命令），请尝试以下操作（从您的 android 终端）：

```
app_148@cdma_spyder:/ $ cd filepath_to_mypythonprogram/myProgram.py
app_148@cdma_spyder:/ $ su
app_148@cdma_spyder:/ # python myProgram.py 
```

假设您的手机已植根，这应该有效地以 root 身份运行 python 脚本！

# c# - 通过 TCP 发送数据

> ID：11030413
> 
> 赞同：0
> 
> 时间：2012-06-14T09:38:55.033
> 
> 标签：c#, tcp, bytebuffer

我有一个客户端服务器情况，客户端将数据（例如电影）发送到服务器，服务器将该数据保存到 HDD。

它通过固定的字节数组发送数据。发送完字节后，服务器会询问是否还有更多，如果有，则发送更多等等。一切进展顺利，所有数据都得到了传递。

但是当我尝试播放电影时，它无法播放，如果我查看每部电影（客户端和服务器）的文件长度，则服务器电影大于客户端电影。当我查看最后的命令屏幕时在发送/接收数据中，跨越的字节数超过 100%。

我唯一能想到的可能是错误的事实是，我的服务器在流中读取直到固定缓冲区数组已满，因此最后的字节数比客户端多。但是，如果这是问题，我该如何解决？

我刚刚添加了两种发送方法，因为 tcp 连接有效，欢迎任何帮助。

客户

```
public void SendData(NetworkStream nws, StreamReader sr, StreamWriter sw)
{
    using (FileStream reader = new FileStream(this.path, FileMode.Open, FileAccess.Read))
    {                
         byte[] buffer = new byte[1024];
         int currentBlockSize = 0;

         while ((currentBlockSize = reader.Read(buffer, 0, buffer.Length)) > 0)
         {
             sw.WriteLine(true.ToString());
             sw.Flush();
             string wait = sr.ReadLine();
             nws.Write(buffer, 0, buffer.Length);
             nws.Flush();
             label1.Text = sr.ReadLine();
         }
         sw.WriteLine(false.ToString());
         sw.Flush();                
    }
} 
```

服务器

```
 private void GetMovieData(NetworkStream nws, StreamReader sr, StreamWriter sw, Film filmInfo)
    {
        Console.WriteLine("Adding Movie: {0}", filmInfo.Titel);
        double persentage = 0;

        string thePath = this.Path + @"\films\" + filmInfo.Titel + @"\";
        Directory.CreateDirectory(thePath);

        thePath += filmInfo.Titel + filmInfo.Extentie;

        try
        {
            byte[] buffer = new byte[1024]; //1Kb buffer

            long fileLength = filmInfo.TotalBytes;
            long totalBytes = 0;

            using (FileStream writer = new FileStream(thePath, FileMode.CreateNew, FileAccess.Write))
            {
                int currentBlockSize = 0;
                bool more;
                sw.WriteLine("DATA");
                sw.Flush();
                more = Convert.ToBoolean(sr.ReadLine());

                while (more)
                {
                    sw.WriteLine("SEND");
                    sw.Flush();
                    currentBlockSize = nws.Read(buffer, 0, buffer.Length);
                    totalBytes += currentBlockSize;
                    writer.Write(buffer, 0, currentBlockSize);

                    persentage = (double)totalBytes * 100.0 / fileLength;
                    Console.WriteLine(persentage.ToString());

                    sw.WriteLine("MORE");
                    sw.Flush();
                    string test = sr.ReadLine();
                    more = Convert.ToBoolean(test);                       
                }
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:54:12.070

返回读取的字节数是有原因`Read()`的：它可能会返回小于缓冲区的大小。因此，您应该执行类似`nws.Write(buffer, 0, currentBlockSize);`in 的操作`SendData()`。但这会破坏您的协议，因为这些块将不再具有大小。

但我发现很难相信您的代码实际上会按照您描述的方式运行。那是因为`Read()`in`GetMovieData()`也可能不会填满整个缓冲区。此外，`StreamReader`允许将一些数据保存在内部缓冲区中，这意味着您可以读取一些完全伪造的数据。

我认为像这样的代码，你将`Stream`s 和`StreamReader`s/ `StreamWriter`s 结合起来是一个非常糟糕的主意。很难让它真正正确。相反，您应该做的是使您的协议完全基于字节（而不是基于字符），即使这些字节是 ASCII 编码的`"SEND"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:56:31.130

让我**试一试**，但**如果它不起作用，请不要向我开枪**。

我看到您的缓冲区大小为 1024，无论您发送的文件中还剩下多少字节。假设您有一个 2900 字节的文件，需要发送 3 次，最后一次发送将只剩下 852 字节要发送。然而，您创建了一个 1024 的缓冲区并发送了超过 1024 个字节。这意味着您的服务器接收到 852 个字节的真实数据和 172 个零填充字节。尽管如此，所有这 172 个字节都保存到服务器上的电影文件中。

我想有一个简单的解决方法：当您将数据写入服务器时，使用`currentBlockSize`as 参数作为长度。因此，`SendData`在客户端的方法中，在 while 循环内，更改：

```
nws.Write(buffer, 0, buffer.Length); 
```

对此：

```
nws.Write(buffer, 0, currentBlockSize); 
```

# php - 如何在 IE (PHP) 中下载服务器文件的更新版本？

> ID：11030416
> 
> 赞同：2
> 
> 时间：2012-06-14T09:39:04.077
> 
> 标签：php, internet-explorer, caching, csv, download

Internet Explorer 让我非常头疼...

我想要做的是 - 在单击将 .csv 文件下载到客户端时创建一个按钮。此 .csv 文件包含存储在我在页面上生成的结果表之一中的信息。

在创建此按钮之前，我将调用一个内部函数来根据当前显示的表格创建 .csv 文件。我在服务器上创建了这个 .csv 文件。为了以防万一，我将在此处包含此功能，但我认为它没有任何帮助。就像我说的，我在创建按钮之前创建了这个文件。

```
/*
/ Creates a .csv file including all the data stored in $records
/   @table_headers  - array storing the table headers corresponding to $records
/   @records        - two dimensional array storing the records that will be written into the .csv file
/   @filename       - string storing the name of the .csv file created by this from
*/
public function export_table_csv( $table_headers, $records, $filename )
{       
    // Open the $filename and store the handle to it in $csv_file
    $csv_file = fopen( "temp/" . $filename, "w" );

    // Write the $table_headers into $csv_file as a first row
    fputcsv( $csv_file, $table_headers );       
    // Iterate through $records and write each record as one line separated with commas to $csv_file
    foreach ( $records as $row )
        fputcsv( $csv_file, $row );

    // Close $csv_file 
    fclose( $csv_file );
} // end export_table_csv() 
```

我的工作正常。我得到了“导出”按钮，我正在使用它的 onClick() 事件，我正在使用单线：

```
window.open( 'temp/' . $export_filename ); 
```

现在，它可以在除 IE 之外的所有浏览器中正常工作。该文件仍然被下载，但是当我在页面上显示的表格上执行一些过滤时（每当应用新过滤器时页面都会重新加载），然后再次按下“导出”按钮，它以某种方式下载旧版本应用旧过滤器的 .csv 文件，而不是当前过滤器，即使每次应用新过滤器并重新加载页面时都会重写此 .csv 文件。

就好像我正在导出的 .csv 文件存储在 IE 的缓存或其他东西中......这真的很烦人，因为导出在所有其他浏览器中都可以正常工作...... Chrome 和 FF 总是从服务器，IE随机更新文件，有时只有在我提交了几次不同过滤器的页面后...

我没有包含太多代码行，因为我宁愿认为我只是缺少某种元标记或代码中的某些内容，而不是在我已经编写的行中有逻辑错误。

我对此感到非常困惑，至少可以说是恼火......我现在真的开始不喜欢IE了......

我很感激关于这个问题的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T09:43:04.553

您可以使用“缓存破坏器”来防止 IE 缓存资源。

如果你向 URL 添加一个 GET 参数（每次加载页面时值都会改变），IE（或者更确切地说：任何浏览器）会认为它是一个不同的文件，所以请执行以下操作：

```
window.open( 'temp/" . $export_filename . "?cachebuster=" . uniqid(true) . "' ); 
```

如果每次单击时都需要更改值（而不是在页面加载时）：

```
window.open( 'temp/" . $export_filename . "?cachebuster="' + Math.random() ); 
```

# mvvm - MVVM View 事件 Viewmodel 命令绑定

> ID：11030417
> 
> 赞同：2
> 
> 时间：2012-06-14T09:39:07.433
> 
> 标签：mvvm, prism, viewmodel, commandbinding

我正在寻找一个关于如何使用 Prism 实现事件聚合器的好（阅读：简单）示例。我从未使用过 Prism，而且我对 MVVM 本身也很陌生。

我有一个 WPF 画布作为视图，我想在 Viewmodel 的画布上处理 MouseUp 事件。现在我们组织的权力要我使用 Prism，显然 Prism 建议使用事件聚合器，这就是为什么我需要一个样本来帮助我开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T08:45:33.057

为此，您只需要来自 MVVMLight 或 System.Windows.Interactivity (Blend SDK) 的 EventToCommand 行为。我建议您使用 MVVMLight 版本，因为它有一些有用的特色：）

```
<Canvas>
<i:Interaction.Triggers>
    <i:EventTrigger EventName="MouseUp" >
        <i:InvokeCommandAction Command="{Binding YourMouseUpViewModelCommand}" />
    </i:EventTrigger>
</i:Interaction.Triggers>
</Canvas> 
```

来自 Prism 的 EventAggregator 主要用于解耦 Viewmodel 到 Viewmodel 的通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:32:44.420

我不知道 PRISM 的 EventAggregator 允许 event->command 绑定。

在这种情况下，您的另一个选择是使用“行为”。这是一个不错的概述行为：[http](http://wpftutorial.net/Behaviors.html) ://wpftutorial.net/Behaviors.html 。您可以忽略本教程的 Blend 部分；重要的是您至少安装了 Blend 3 SDK。我是这样做的：

```
public class ButtonDoubleClickCommandBehavior : Behavior<Button>
{
    public ICommand DoubleClickCommand
    {
        get { return (ICommand)GetValue(DoubleClickCommandProperty); }
        set { SetValue(DoubleClickCommandProperty, value); }
    }

    public static readonly DependencyProperty DoubleClickCommandProperty =
        DependencyProperty.Register("DoubleClickCommand", typeof(ICommand), typeof(ButtonDoubleClickCommandBehavior));

    protected override void OnAttached()
    {
        this.AssociatedObject.MouseDoubleClick += AssociatedObject_MouseDoubleClick;
    }

    protected override void OnDetaching()
    {
        if (this.AssociatedObject != null)
        {
            this.AssociatedObject.MouseDoubleClick -= AssociatedObject_MouseDoubleClick;
        }
    }

    void AssociatedObject_MouseDoubleClick(object sender, MouseButtonEventArgs e)
    {
        if (DoubleClickCommand != null && DoubleClickCommand.CanExecute(null))
        {
            DoubleClickCommand.Execute(null);
        }
    }
} 
```

您可以将另一个依赖属性添加到行为以绑定命令参数，以便您可以使用该参数执行命令；我只是在我的示例中使用了 null 。

还有我的 XAML：

```
<Button Content="{Binding Path=Description}" VerticalAlignment="Center" HorizontalAlignment="Stretch" Template="{StaticResource TextBlockButtonTemplate}" Style="{StaticResource ZynCommandButton}" Tag="DescriptionButton">
    <e:Interaction.Behaviors>
        <ZViewModels:ButtonDoubleClickCommandBehavior DoubleClickCommand="{Binding Path=ItemDescriptionCommand}"/>
    </e:Interaction.Behaviors>
</Button> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:29:07.630

[AttachedCommandBehavior V2 aka ACB](http://marlongrech.wordpress.com/2008/12/13/attachedcommandbehavior-v2-aka-acb/)提出了一种更通用的使用行为方式，它甚至支持多个事件到命令的绑定，

这是一个非常基本的使用示例：

```
<Border local:CommandBehavior.Event="MouseDown"  
        local:CommandBehavior.Command="{Binding DoSomething}"
        local:CommandBehavior.CommandParameter="From the DarkSalmon Border"
/> 
```

# ruby-on-rails - 连接被拒绝 - 在 Mongodb 上使用 rake db:seed 连接（2）

> ID：11030418
> 
> 赞同：6
> 
> 时间：2012-06-14T09:39:09.400
> 
> 标签：ruby-on-rails, mongodb, ruby-on-rails-3, mongoid, database

我正在使用`rails 3.2`和`mongoid`。

我做了这些步骤来设置我的数据库：

```
// Add an Admin User (to the admin db)
use admin
db.addUser("theadmin", "anadminpassword")

// Use your database
use superuser

// Add a user (to your database)
db.addUser("John", "passwordForJohn")

// show all users:
db.system.users.find()

// add readonly user (kinda cool)
db.addUser("readonly", "passwordForJohn", true) 
```

在我的`mongo.yml`我有：

```
production:
  host: localhost
  port: 27017
  username: John
  password: passwordForJohn
  database: namedatabase 
```

您可以在[http://www.mongodb.org/display/DOCS/Security+and+Authentication中看到](http://www.mongodb.org/display/DOCS/Security+and+Authentication)

我的问题是现在我尝试运行：

```
rake db:seed 
```

我现在得到这个错误：

```
rake aborted!
Connection refused - connect(2) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T10:22:34.323

问题已解决：

问题出在 solr 服务器上：

如果您的项目中有 solr 服务器：

1º 确保在播种之前启动 Solr 服务器：

```
rake sunspot:solr:start
rake sunspot:reindex 
```

2º运行你的种子：

```
rake db:seed 
```

问候

# android - 应用程序因强制关闭而意外停止？

> ID：11030420
> 
> 赞同：-1
> 
> 时间：2012-06-14T09:39:15.463
> 
> 标签：android, exception-handling

当我在 android 2.1 中运行程序时。我收到错误**应用程序已意外停止**然后强制关闭。我一次又一次地清理项目然后构建但问题仍然存在。该程序需要在 ListView 上显示来自模拟器的所有联系人的**电子邮件地址。**

**代码**

```
public class Trial3 extends Activity {

ListView lvItem;
private Button btnAdd;
String displayName="", emailAddress="", phoneNumber="";
ArrayList<String> contactlist=new ArrayList<String>();
ArrayAdapter<String> itemAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
   lvItem = (ListView)this.findViewById(R.id.listview);  
   btnAdd = (Button)this.findViewById(R.id.btn);
   itemAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,contactlist);
   lvItem.setAdapter(itemAdapter);
   btnAdd.setOnClickListener(new View.OnClickListener() {
       public void onClick(View v) {
           GetEmails();
           Toast.makeText(Trial3.this, "working...", Toast.LENGTH_SHORT).show();
       }
   }); 
}

private void GetEmails()
{
    ContentResolver cr =getContentResolver();
    Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
    while (cursor.moveToNext()) 
    {       
        String id = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
        Cursor emails = cr.query(Email.CONTENT_URI,null,Email.CONTACT_ID + " = " + id, null, null);
        while (emails.moveToNext()) 
        {               
            emailAddress = emails.getString(emails.getColumnIndex(Email.DATA));
            contactlist.add(emailAddress);
            itemAdapter.notifyDataSetChanged();
        }
        emails.close();

    }
    cursor.close(); 
}
} 
```

**日志猫**

```
 06-14 15:03:17.339: D/AndroidRuntime(502): Shutting down VM
 06-14 15:03:17.339: W/dalvikvm(502): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
 06-14 15:03:17.339: E/AndroidRuntime(502): Uncaught handler: thread main exiting due to uncaught exception
 06-14 15:03:17.349: E/AndroidRuntime(502): java.lang.SecurityException: Permission Denial: reading com.android.providers.contacts.ContactsProvider2 uri content://com.android.contacts/contacts from pid=502, uid=10028 requires android.permission.READ_CONTACTS
 06-14 15:03:17.349: E/AndroidRuntime(502):     at android.os.Parcel.readException(Parcel.java:1218)
 06-14 15:03:17.349: E/AndroidRuntime(502):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:160)
 06-14 15:03:17.349: E/AndroidRuntime(502):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:114)
 06-14 15:03:17.349: E/AndroidRuntime(502):     at android.content.ContentProviderProxy.bulkQuery(ContentProviderNative.java:326)
 06-14 15:03:17.349: E/AndroidRuntime(502):     at android.content.ContentProviderProxy.query(ContentProviderNative.java:345)
 06-14 15:03:17.349: E/AndroidRuntime(502):     at android.content.ContentResolver.query(ContentResolver.java:202)
 06-14 15:03:17.349: E/AndroidRuntime(502):     at com.abhi.Trial3.GetEmails(Trial3.java:45)
 06-14 15:03:17.349: E/AndroidRuntime(502):     at com.abhi.Trial3.access$0(Trial3.java:42)
 06-14 15:03:17.349: E/AndroidRuntime(502):     at com.abhi.Trial3$1.onClick(Trial3.java:36)
 06-14 15:03:17.349: E/AndroidRuntime(502):     at android.view.View.performClick(View.java:2364)
 06-14 15:03:17.349: E/AndroidRuntime(502):     at android.view.View.onTouchEvent(View.java:4179) 
```

如何解决这个问题呢 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:40:05.400

将读取联系人数据的权限添加到您的应用程序清单中，如下所示：

```
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:41:49.673

缺少权限

```
49: E/AndroidRuntime(502): java.lang.SecurityException: Permission Denial: reading com.android.providers.contacts.ContactsProvider2 uri content://com.android.contacts/contacts from pid=502, uid=10028 requires android.permission.READ_CONTACTS 
```

添加清单

```
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T09:44:49.193

获取安卓权限

```
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

在 AndroidManifest.xml 文件之前的`<manifest>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T09:46:19.330

在清单中添加权限

```
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

并检查以下 [http://developer.android.com/reference/android/Manifest.permission.html#READ_CONTACTS](http://developer.android.com/reference/android/Manifest.permission.html#READ_CONTACTS)

# web-services - 如何使用 JAX-WS aadn 取消发布 Web 服务绑定到不同的地址

> ID：11030421
> 
> 赞同：1
> 
> 时间：2012-06-14T09:39:15.493
> 
> 标签：web-services, jax-ws, embedded-jetty

我已将 JAX-WS Web 服务部署到嵌入式 Jetty 服务器中我需要更改与端点关联的 IP 地址

为了发布我做：

```
Service service = new Service();

Endpoint.publish(address, service); 
```

发生的情况是，当我停止并重新启动服务器时，服务再次发布并绑定到我提供的新地址，但我收到如下警告：

```
WARNING: "GMBAL901: JMX exception on registration of MBean MBeanImpl[type=WSEndpoint,name=MyServiceService-myservice_servicePort,oname=com.sun.metro:pp=/,type=WSEndpoint,name=MyServiceService-myservice_servicePort]" 
```

如果我同时查询旧地址（例如 127.0.0.1）和新地址（例如 192.168.XX），它们都仍在回答（使用 myService 的两个不同实例。我不会有这种行为，我希望 WS 不受约束旧地址。

我能怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T08:59:51.987

发现我只需要创建 EndpointObject，发布它，当我需要重新启动时足以停止 ep（它将确保不会重新发布相同的 ep），而不是创建一个新的并重新发布它。

```
Endpoint ep;
...
if (ep != null && ep.isPublished()){
        ep.stop();
}

ep = Endpoint.create(service);
ep.publish(getEndpointAddress(port, service)); 
```

直到最好等待半秒钟，然后重新启动发布 WS 的服务器，因为它有时会卡住

# java - 在 Maven 中成功构建仍然在 Eclipse 中显示错误

> ID：11030422
> 
> 赞同：41
> 
> 时间：2012-06-14T09:39:16.913
> 
> 标签：java, eclipse, maven, ejb-3.0

我在这里遇到了一些很奇怪的事情，当我键入“mvn clean install”时，我的构建在 maven 中成功，但是一旦导入 Eclipse，它就会显示错误。

你自己看：

![mvn 干净安装](../Images/89cce2d0a9bf934e6534340033b9cc1b.png)

![蚀](../Images/769c1305975a1aa1b611c8797c3c5e75.png)

我想从 `pom.xml 中排除石英解决了这个问题，但我想知道为什么。

* * *

PS：`pom.xml`如果你想看的话，这里是：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.nantes.mpclient</groupId>
  <artifactId>MyClient</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>MyClient</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>com.nantes.mp</groupId>
        <artifactId>MyEjb</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.jbossas</groupId>
        <artifactId>jboss-as-client</artifactId>
        <version>5.1.0.GA</version>
        <type>pom</type>
    </dependency>
  </dependencies>
</project> 
```

###EDIT 如您所见，石英在这里： ![石英](../Images/08c7a41526aacedae58aac230ba4f755.png)

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2015-11-11T11:04:29.770

导入后更新 maven 项目为我解决了这个问题：

右键单击项目 --> Maven --> 更新项目。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-14T13:17:18.393

有时我也会遇到这些类型的问题。

一般来说，使用 Eclipse 和 Maven 最适合我的是：

*   使用最新的 m2e Eclipse 插件
*   使用 Maven 3
*   确保 m2e 使用与您在命令行上使用的版本相同的 Maven 版本（不是内部版本）
*   将项目导入为 Maven 项目以生成 Eclipse 项目文件

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-09-29T15:34:22.153

使用这些版本的其他赞成的答案对我不起作用：

*   日食霓虹灯
*   Maven 3
*   平方米 1.7

这是我必须做的：

1.  从 Eclipse 界面删除 Eclipse 项目（不要删除磁盘上的项目内容）
2.  在文件资源管理器或终端中转到项目的根目录
3.  删除这些文件：`.classpath`、`.project`和`.settings`目录
4.  返回 Eclipse，文件 -> 导入... -> Maven -> 现有的 Maven 项目

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-03-14T04:04:51.500

如果您在 Eclipse 项目中没有看到任何错误，但它一直在您的项目名称上显示红色图标。试试`mvn eclipse:eclipse`。

然后选择 Eclipse 中的所有项目，右键单击 > Maven > 更新项目

希望能帮助到你。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-06-14T09:47:11.580

你应该试试`mvn eclipse:eclipse`

然后确保该`M2_REPO`变量指向您的本地存储库。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-05-30T10:52:22.220

有时 Maven 更新也不是以上所有工作。所以检查哪个 import 语句给你错误，然后去特定的 lib 文件，通常在 c:user/ur-PC-NAME/.m2 进入包删除那个 .jar 文件。

然后在eclipse中，右键单击项目> maven>更新maven。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-06-14T09:55:18.970

有时，m2e“维护”的 eclipse 项目与 POM 中的实际项目不同步（有很多原因）。假设你使用的是 m2e 0.8 或更高版本，右键单击项目，在 Maven 下，有两个通常有用的条目。它们是更新依赖项和更新项目配置

试一试，在你点击之后等待一段时间，让 Eclipse 更新项目并构建。通常它可以解决类似的问题。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-06-14T09:47:30.327

当 m2eclipse 没有更新构建路径以对应于修改后的 POM 文件所说的内容时，通常会发生这种情况。Maven 上下文菜单中有一个条目来更新配置。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-10-17T09:52:02.200

就我而言，

1.  我刚刚从 Eclipse 中删除了项目（没有勾选从项目位置删除的复选框）。

2.  再次将项目作为“现有 Maven 项目”打开。

它解决了我的问题。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-11-19T22:16:12.417

我发现我的项目使用的是项目特定的 Java 编译器设置，设置为 Java 1.5。此外，当 Maven、m2e、Eclipse 通用 Java 编译器设置都设置为 Java 1.8 时，项目方面仍然引用 Java 1.5。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-12-08T22:40:45.300

在我的情况下，Java 构建路径也存在如下问题：“构建路径指定执行环境 J2SE-1.5。工作空间中没有安装与此环境严格兼容的 JRE。” 修复此解决的编译错误。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-06-13T23:00:39.840

尝试使用不同/旧版本的 JRE。在我的情况下，从 JRE8 切换回 JRE7 消除了这个问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-06-14T09:46:51.267

您有一个库（quartz-1.5.2.jar），它引用您的 m2 本地存储库，如果您只是从构建路径中删除石英并在内部更新您的依赖项（在 Eclipse 中），则该库不存在，这将解决问题

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-02-05T15:55:46.430

在eclipse中删除并重新导入项目（当然不删除文件）。与其他答案不同，我没有研究为什么会发生这种情况，但它确实有效。poof - 编译错误消失

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-12-07T13:56:42.720

对我来说，右键单击项目 --> Maven --> 更新项目，勾选“强制更新快照/发布”工作。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-01-19T15:14:40.097

有时，eclipse 的验证会导致这些错误。您可以通过转到菜单>窗口>首选项>验证来禁用它们，然后取消选中暂停所有验证器或为构建一个一个地禁用它们。例如，每次您构建项目时，eclipse 都不会验证您的文件，也不会显示这些错误。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-02-25T10:06:39.250

它可能会有所帮助：升级 eclipse 或更改它或类似的东西后，旧的 eclipse 特定文件（.classpath、.project 和 .settings）可能与新版本的 eclipse 不兼容。因此，您可能必须使用 Maven 重新生成此 Eclipse 特定文件。所以在你的 Eclipse 项目根目录中试试这个

```
mvn eclipse:eclipse 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-04-03T20:54:40.560

就我而言，在我更改 pom.xml 中的某些版本的依赖项后，eclipse 开始显示所有错误，但是命令行 mvn clean install build 成功

1.  我从 .m2 存储库中删除了我手动更改的依赖项的文件夹（在我的情况下，所有内容都在 org.apache.beam 下），因为我也有损坏的依赖项问题。
2.  mvn clean 构建项目，这再次下载了依赖项
3.  右键项目：maven -> 更新项目
4.  从 Eclipse 中删除项目（但不是从磁盘中）并重新导入（这实际上给我留下了 1 个错误，然后我删除并再次重新导入）

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-12-11T10:31:32.690

这对我有用

1.  从 Eclipse 界面删除 Eclipse 项目（不要删除磁盘上的项目内容）
2.  在文件资源管理器或终端中转到项目的根目录
3.  删除这些文件：.classpath、.project 和 .settings 目录
4.  返回 Eclipse，文件 -> 导入... -> Maven -> 现有的 Maven 项目

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-04-20T10:06:21.720

转到 Eclipse> 项目（菜单）> 清理...> 选择要清理的项目

这也从 Eclipse 中删除了无效错误。

# c++ - 将布尔值从 C++ 返回到 C# 时出现 AccessViolation 异常

> ID：11030423
> 
> 赞同：-1
> 
> 时间：2012-06-14T09:39:18.067
> 
> 标签：c++, .net-4.0, pinvoke, swig, access-violation

我正在使用第三方专有 DLL，我无法获得其源代码。但是，我可以使用似乎是使用 SWIG 1.3.39 自动生成的包装器代码。包装器代码包含一个 C++ 文件（使用一些描述 DLL 的头文件）编译为 DLL 和一个 C# 项目，该项目对 C++ 包装器 DLL 进行 PInvoke 调用。

检查 StackTrace 后，我得到以下信息：

```
at org.doubango.tinyWRAP.tinyWRAPPINVOKE.MediaSessionMgr_consumerSetInt64(HandleRef jarg1, Int32 jarg2, String jarg3, Int64 jarg4)
at Deskcon_ABL.NotificationHandler.sipService_onInviteEvent(Object sender, InviteEventArgs e)
at BogheCore.Events.EventHandlerTrigger.TriggerEvent[T](EventHandler`1 handler, Object source, T args) 
at BogheCore.Services.Impl.SipService.MySipCallback.OnDialogEvent(DialogEvent e)
at org.doubango.tinyWRAP.SipCallback.SwigDirectorOnDialogEvent(IntPtr e) 
```

所以这是有问题的 C# 代码：

```
//in the C# Wrapper

    public bool consumerSetInt64(twrap_media_type_t media, string key, long value) {
    bool ret = tinyWRAPPINVOKE.MediaSessionMgr_consumerSetInt64(swigCPtr, (int)media, key, value);
    return ret;
  }

//In tinyWRAPPINVOKE Class in another file in the C# wrapper:

  [DllImport("tinyWRAP", EntryPoint="CSharp_MediaSessionMgr_consumerSetInt64")]
  public static extern bool MediaSessionMgr_consumerSetInt64(HandleRef jarg1, int jarg2, string jarg3, long jarg4); 
```

以及来自 C++ 包装器的 C++ 代码：

```
SWIGEXPORT unsigned int SWIGSTDCALL CSharp_MediaSessionMgr_consumerSetInt64(void * jarg1, int jarg2, char * jarg3, long long jarg4) {
  unsigned int jresult ;
  MediaSessionMgr *arg1 = (MediaSessionMgr *) 0 ;
  twrap_media_type_t arg2 ;
  char *arg3 = (char *) 0 ;
  int64_t arg4 ;
  bool result;

  arg1 = (MediaSessionMgr *)jarg1; 
  arg2 = (twrap_media_type_t)jarg2; 
  arg3 = (char *)jarg3; 
  arg4 = (int64_t)jarg4; 
  result = (bool)(arg1)->consumerSetInt64(arg2,(char const *)arg3,arg4);
  jresult = result; 
  return jresult;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:18:04.330

奇怪的是它是 DllImport 中的第一个 (void *) 或第三个 (char *) 参数。您能否显示您正在创建的代码并分配您为这两者传递的内容？

您可以尝试更改其中之一或两者的编组，可能类似于以下内容：

```
[DllImport("tinyWRAP", EntryPoint="CSharp_MediaSessionMgr_consumerSetInt64")]
public static extern bool MediaSessionMgr_consumerSetInt64(IntPtr jarg1, int jarg2, StringBuilder jarg3, long jarg4); 
```

但是，如果您有更多关于每个参数的用途的信息，也可能有助于识别问题。

# encryption - Sonar 中的密码加密

> ID：11030426
> 
> 赞同：0
> 
> 时间：2012-06-14T09:39:29.767
> 
> 标签：encryption, sonarqube, salt

我正在使用耶鲁大学的 CAS 来集成我的声纳系统，但在验证我的登录用户名和密码时遇到问题，因为我知道声纳使用 crypted_pa​​ssword 和 salt 来存储原始密码，但我无法弄清楚声纳如何使用原始密码生成 crypted_pa​​ssword密码和随机盐。我需要的是加密算法和加密策略。

您的任何回复将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:28:15.610

所有与加密相关的类都位于 sonar-plugin-api 模块中。见[https://github.com/SonarSource/sonar/tree/master/sonar-plugin-api/src/main/java/org/sonar/api/config](https://github.com/SonarSource/sonar/tree/master/sonar-plugin-api/src/main/java/org/sonar/api/config)

# xml - 在 XML 标签中搜索的 Oracle 函数

> ID：11030432
> 
> 赞同：0
> 
> 时间：2012-06-14T09:39:48.287
> 
> 标签：xml, oracle

我有一张桌子：

```
create table app_instr(
deal        NUUMBER
XML_DATA    SYS.XMLTYPE
); 
```

并在 XML_DATA 列中有以下 2 行：

```
<INSTR>
<EXTREFERENCE xmlns:xs="http://www.w3.org/2001/XMLSchema-instance">
    <REFERENCE REFSYSTEM="SYSTEM1" AUTOCAPTURED="false" READONLY="false">42852
    </REFERENCE>
</EXTREFERENCE>
</INSTR>

<INSTR>
<EXTREFERENCE xmlns:xs="http://www.w3.org/2001/XMLSchema-instance">
    <REFERENCE REFSYSTEM="SYSTEM2" AUTOCAPTURED="false" READONLY="false">42852
    </REFERENCE>
</EXTREFERENCE>
</INSTR> 
```

我的要求是仅在 REFERENCE REFSYSTEM="SYSTEM1" 时提取 int 值 42852。你能帮我用什么oracle函数来做这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:20:49.830

我可以通过运行以下查询来做到这一点：

```
select x.deal,
       x.xml_data.extract('/INSTR/EXTREFERENCE/REFERENCE/text()').getStringVal()
from app_instr x 
where x.deal_no = 12334
and x.xml_data.extract('/INSTR/EXTREFERENCE/*').getStringVal() like '%SYSTEM1%'; 
```

有没有更好的方法来做到这一点，因为这会给我带来性能问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:57:10.293

你可以试试：

```
SELECT deal,
       extract(xml_data, '//REFERENCE/text()').getstringval()
FROM app_instr
WHERE extract(xml_data, '//REFERENCE[@REFSYSTEM="SYSTEM1"]/text()') IS NOT NULL; 
```

[这](http://www.sqlfiddle.com/#!4/766d7/14)是一个小提琴

# openstack - Horizo n 是否与 Keystone 和 Swauth 一起使用？

> ID：11030436
> 
> 赞同：0
> 
> 时间：2012-06-14T09:40:09.583
> 
> 标签：openstack

我已经使用 Swift 设置了一个一体化服务器并使用 Swauth 进行身份验证。它工作。我可以使用 Cyber​​Duck 或 CloudBerry explorer 之类的工具在 Swift 上管理我的对象。但我可以使用 Swauth 创建的帐户登录 Horizo​​n。

Horizo​​n 是否与 Swauth 一起使用？如果是，那么我该如何配置？

谢谢！

这个问题也发布在[openstack](https://answers.launchpad.net/horizon/+question/200382)中。我的一个朋友发布了它。我们正在合作:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T22:57:13.177

Horizo​​n 本身并不针对 swauth（现在在 swift 项目中称为“tempauth”）进行身份验证，它使用 Keystone（[http://keystone.openstack.org](http://keystone.openstack.org)）作为 OpenStack 的预期共享身份验证系统。

# php - 每 2 周显示不同的日期

> ID：11030439
> 
> 赞同：0
> 
> 时间：2012-06-14T09:40:13.853
> 
> 标签：php, date

我的第一个问题是这段代码是否有效？

其次，有没有办法改进它，所以它会每两周更改一次日期，而我必须做出新的 if 语句？如果小于 6 月 20 日回显 6 月 20 日，如果小于 7 月 4 日回显 7 月 4 日，以此类推。

```
if(date("d")<=20 && date("m")<=6){
    $text = '20 june';
}
else if(date("d")<=4 && date("m")<=7){
    $text = '4 july';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:10:43.837

我的变种。

```
$StartDate = strtotime('2012-06-06'); //Start date from which we begin count
$CurDate = date("Y-m-d"); //Current date.
$NextDate = date("Y-m-d", strtotime("+2 week", $StartDate)); //Next date = +2 week from start date
while ($CurDate > $NextDate ) { 
  $NextDate = date("Y-m-d", strtotime("+2 week", strtotime($NextDate)));
}
echo date("d F", strtotime($NextDate)), "\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:08:16.837

如我错了请纠正我。您基本上想将一年分成 2 周的间隔。每个间隔都由一个日期表示（在您的情况下，日期是 2 周的结束时间）。

正如您所指出的，这根本行不通。您别无选择，只能写下全年的 if else 条件。

相反，您可以做的是维护一个 $date 变量。

```
//Initialize this part once on the first run of your code.
//Say you want to start on the 1st of June
$pivotDate = "2012-06-01"; 
```

然后，您可以通过一个简单的条件来完成您想要的操作，以在每次代码运行时进行检查：

```
$diff = abs(strtotime(date(c)) - strtotime($datePivot));
$days= floor($diff/(60*60*24));
if(days>14){
  $pivotDate=date(c);

} 
```

# .net - Visual Studio 安装项目 - .net 4 可以与项目一起部署吗？

> ID：11030446
> 
> 赞同：3
> 
> 时间：2012-06-14T09:40:39.190
> 
> 标签：.net, visual-studio-2010, setup-project

我正在使用 Visual Studio 2010 为我的 .NET 4.0 Winforms 应用程序创建一个安装项目。

当部署的设置在未安装 .NET 4.0 运行时的机器上运行时，安装程​​序会从 MS 下载并安装相同的设置。这一切都很好..它工作正常。

但是，我的应用程序很可能是由没有互联网连接的用户安装的（实验室计算机通常没有连接）。因此，我想将 .NET 4.0 运行时与我的项目捆绑在一起，并从本地文件安装而不是下载。

这是否仍然可以让安装程序使用本地捆绑文件进行自动检查和安装？如果是这样，请问它是如何实现的？

赞赏地，巴扎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T09:51:41.873

[这个 MSDN 指南应该可以帮助你](http://msdn.microsoft.com/en-us/library/ee942965.aspx)——它涵盖了我认为几乎所有的场景——包括你需要在哪里打包整个可再发行组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:03:41.470

为什么不提供独立于设置的 .NET Framework Stand Alone 安装程序作为软件先决条件的一部分？

我的意思是，下载以下版本之一：

Microsoft .NET Framework 4（独立安装程序）- 48 MB

[http://www.microsoft.com/en-us/download/details.aspx?id=17718](http://www.microsoft.com/en-us/download/details.aspx?id=17718)

或者

Microsoft .NET Framework 4 客户端配置文件（独立安装程序）- 41 MB

[http://www.microsoft.com/en-us/download/details.aspx?id=24872](http://www.microsoft.com/en-us/download/details.aspx?id=24872)

并将 2 个安装程序文件发送给您的用户。其中之一加上您的 setup.msi。这样做的好处是不会使您的 setup.msi 增长那么多，因为它嵌入了另一个。

我们以前曾将必备软件（如 Crystal Merge 模块）嵌入到我们的设置安装程序中，但我们通过为用户提供单独的安装程序来运行它进行了改进，这样我们就不需要自己维护它了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T09:49:24.043

[您需要先决条件对话框](http://msdn.microsoft.com/en-US/library/7tx0bw8y%28v=vs.100%29.aspx)中的“从与我的应用程序相同的位置下载先决条件” 。

确保使用 setup.exe 安装，而不是直接使用 msi。

# javascript - 加载页面时如何选择文本框中的内容？

> ID：11030447
> 
> 赞同：4
> 
> 时间：2012-06-14T09:40:41.443
> 
> 标签：javascript, wicket, copy-paste

我正在开发一个应用程序，我希望在加载页面时选择一个文本字段，以便当用户使用 Ctrl + v 时，它将内容粘贴到文本框中。有谁知道该怎么做？文本字段是

```
<div>
    <input wicket:id="email-address" type="text" id="textbox-email" />
</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T10:29:38.247

3p3r 的答案当然是完全正确的。如果您希望它可以通过检票口重复使用和控制，请查看[检票口维基页面](https://cwiki.apache.org/confluence/display/WICKET/Request+Focus+on+a+Specific+Form+Component)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T10:22:34.317

您可以使用 HTML5 的`autofocus`属性：

```
<input type="text" autofocus /> 
```

当然只适用于一个领域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T09:46:06.970

您应该将重点放在您的输入上：

```
document.forms['your_form'].elements['your_textbox'].focus(); 
```

对于上面的示例：

```
document.getElementById('textbox-email').focus() 
```

* * *

获得焦点后，您应该选择它：

要么将此`onfocus`属性添加到您的输入中（更好）

```
<input type="text" onfocus="this.select()" /> 
```

或者使用这个 jQuery 片段（最好的）：

```
$(document).ready(function() {
    $("#textbox-email").focus(function() { $(this).select(); } );
}); 
```

纯Javascript：

```
var element = document.getElementById('textbox-email');
element.onfocus = function() {element.select();}
document.getElementById('textbox-email').focus(); 
```

将整个事物添加到标签`window.onload`的`onload`属性中。`body`

# php - 将两个数组相互组合并从 MySQL 数据库中获取名称

> ID：11030449
> 
> 赞同：1
> 
> 时间：2012-06-14T09:40:48.037
> 
> 标签：php, mysql, arrays, database-design, variables

**问题：**

将两个数组相互组合并使用 MySQL 表中的数据构建一个数组。在一张表 ( **betyg_answers** ) 中，我有两列分别称为类别和项目。

*   **类别**包含：1,5,9,13,16
*   **项目**包含：2,3,4,6,7,8,10,11,12,14,15,17,18

这些值存储在变量中：$categories 和 $items。

在另一个表（**betyg_category**）中，我存储每个类别的名称和名称，如下所示：

![在此处输入图像描述](../Images/ea255e4e2940015e77b83bbff73d0d8f.png)

**问题：**

我将如何构建一个大数组，该数组以超级别的类别开始并下降到较低级别的项目？

换句话说，我希望数组看起来像：

```
Litteratur (Category = 1)
    Integration av källorna (Item = 2)
    Belysning av egna resultat (Item = 3)
    Referenser (Item = 4)
Validitet (Category = 2)
    Huvudsyfte (Item = 5)
    Oberoende och beroende variabler (Item = 6)
    Analysmetoderna (Item = 7)

    and so forth.. 
```

在此先感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:38:47.197

假设并希望您正在使用 PDO：

```
$sql = '
    SELECT
        a.CID,
        a.Item,
        a.Parent,
        IF(NOT a.Parent, (SELECT GROUP_CONCAT(CID) FROM betyg_category WHERE Parent = a.CID), NULL) AS catitems
    FROM
        betyg_category a
    ORDER BY
        a.CID';
$stmt = $pdo->query($sql);
$resultset = $stmt->fetchAll(PDO::FETCH_GROUP|PDO::FETCH_ASSOC);
$itemarray = array();

foreach($resultset as $row)
{
    if(!empty($row[0]['catitems']))
    {
        foreach(explode(',', $row[0]['catitems']) as $cid)
        {
            $itemarray[$row[0]['Item']][$cid] = $resultset[$cid][0]['Item'];
        }
    }
    elseif(!$row[0]['Parent']) // Account for categories with no items in it
    {
        $itemarray[$row[0]['Item']] = array();
    }
} 
```

然后，您可以使用以下命令可视化数组：

```
echo '<pre>';
print_r($itemarray);
echo '</pre>'; 
```

这给了你：

```
Array
(
    [Litteratur] => Array
        (
            [2] => Integration av källorna
            [3] => Belysning av egna resultat
            [4] => Referenser
        )

    [Validitet] => Array
        (
            [6] => Huvudsyfte
            [7] => Oberoende och beroende variabler
            [8] => Analysmetoderna
        )

    [Reliabilitet] => Array
        (
            [10] => Metodval
            [11] => Metodbeskrivning
            [12] => Databearbetning
        )

    [Språk, stil och struktur] => Array
        (
            [14] => Språk och stil
            [15] => Struktur
        )

    [Arbetssätt] => Array
        (
            [17] => Försvar och opposition
            [18] => Etiska och samhälleliga aspekter
        )

    [Etik] => Array
        (
            [20] => Test 1
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:53:10.413

```
$result = mysql_query("select * from betyg_category where CID IN($categories)");
$array = array();
while($mainrow = mysql_fetch_array($result)) {
$array[] = $mainrow['Item'] . "(Category = " .$mainrow['CID']. ")";
$child = mysql_query("select * from betyg_category where Parent = " .$mainrow['CID'] . "");
while($childrow = mysql_fetch_array($child)) {
$array[] = $childrow['Item'] . "(Item = " .$childrow['CID']. ")";
}
} 
```

# silverlight - 单个实体（客户端）上的 WCF DataService 5 Any

> ID：11030451
> 
> 赞同：0
> 
> 时间：2012-06-14T09:41:05.743
> 
> 标签：silverlight, wcf-data-services

根据 WCF Data Services 5.0.1 Any/All-Features，我有一个问题。我想在 Silverlight 5 应用程序中使用它，并且我想查询一个名为“Employee”的实体（具有唯一的 EmpNo=personalNr）并检查它是否已经存在（因此，我检查是否存在具有相同 personNrfor 的 Employee验证目的）..

在旧版本中，无法在客户端上执行此操作。我必须在返回布尔值的服务器上调用自定义服务操作。

有没有办法在喜欢这个的客户上做到这一点（并得到一个布尔值）：

```
bool result = this.Context.Employees.Any(e => e.PersonalNr.Equals(personalNr, StringComparison.OrdinalIgnoreCase)); 
```

提前致谢！

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:43:13.163

any/all 功能仅在过滤器表达式中可用，用于根据相关实体或集合属性进行查询。如果您只想检查是否存在没有任何关系的员工，您可以在没有任何/全部的情况下执行此操作。这个想法是简单地过滤给定条件下的所有员工，看看你是否至少得到 1 个结果。

现在，由于您在 Silverlight 中执行此操作，因此操作必须是异步的，因此像上面这样的简单语句将不起作用。您可以执行以下操作：

```
var query = (DataServiceQuery<Employee>)this.Context.Employees.Where(e => e.PersonalNr.ToLower() == personalNr.ToLower()).Take(1);
query.BeginExecute((ar) =>
    {
        var results = query.EndExecute(ar);

        // The usage of Any here is simply because it's the easiest way to do this
        // and it is not used over OData/WCF DS, this is simply checking if the results returned
        // from the service contain at least one result.
        bool employeeExists = results.Any();
    }, null); 
```

关于上面代码的几点说明：

WCF 数据服务不支持带有比较选项的 Equals 方法，OData 协议也不支持不区分大小写的字符串比较。因此，要解决此问题，只需在比较之前将所有值转换为小写即可。

Take(1) 仅用于请求与条件匹配的第一个值。由于无论如何我们只会使用结果的存在性，因此我们不需要向服务询问所有结果（小优化）。

# asp.net - ASP.NET MVC 页面验证失败（值无效。）

> ID：11030459
> 
> 赞同：2
> 
> 时间：2012-06-14T09:41:45.493
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework-4.1

我正在尝试使用具有一对多关系的实体框架创建 ASP.NET MVC 应用程序。为此，我已成功地将适当的项目列表加载到下拉控件（在创建视图中），但是当我单击创建按钮（在创建视图中）页面验证失败时，验证错误消息为`The value '1' is invalid.`.

**错误**

![](../Images/4f1f797e6a9d2edba23b7afca1e7b039.png)

**模型**

```
public class Post
{
    public int Id { get; set; }
    ...
    public virtual Person Author { get; set; }
} 
```

**数据库上下文**

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
    modelBuilder.Entity<Post>()
                .HasOptional(p => p.Author);
} 
```

**控制器**

```
public ActionResult Create()
    {
        PopulateAuthorDropDownList();
        return View();
    }

    [HttpPost]
    public ActionResult Create(Post post)
    {
        if (ModelState.IsValid)
        {
            db.Posts.Add(post);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        PopulateAuthorDropDownList(post.Author);
        return View(post);
    }

    private void PopulateAuthorDropDownList(object selectedPerson = null)
    {
        var personQuery = from d in db.People
                          orderby d.Name
                          select d;
        ViewBag.Author = new SelectList(personQuery, "Id", "Name", selectedPerson);
    } 
```

**看法**

```
 <div class="editor-label">
        @Html.LabelFor(model => model.Author)
    </div>
    <div class="editor-field">
        @Html.DropDownList("Author", String.Empty)
        @Html.ValidationMessageFor(model => model.Author)
    </div> 
```

当我检查数据库中的作者表时，有 ID 为 1 的记录，所以我猜 1 是一个有效值。我在这里想念什么？

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:05:05.337

你没有展示`Author`物体的样子，

假设如果是这样，

```
public class Author
{ 
   public int Id{get;set;}
   public string Name{get;set;}
} 
```

试试这个，

```
<div class="editor-label">
    @Html.LabelFor(model => model.Author)
</div>
<div class="editor-field">
    @Html.DropDownListFor(model => model.Author.Id, ViewBag.Author, "Select an Author")
    @Html.ValidationMessageFor(model => model.Author)
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:51:27.937

你应该有这样的东西：

```
<div class="editor-label">
    @Html.LabelFor(model => model.Author.Name)
</div>
<div class="editor-field">
    @Html.DropDownListFor(model => model.Author.Name, (SelectList)ViewBag.AuthorList)
    @Html.ValidationMessageFor(model => model.Author.Name)
</div> 
```

请注意，您应该命名 ViewBag.AuthorList 而不是 ViewBag.Author

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T04:00:37.193

设法解决了这个问题

将**模型**更改为

```
public class Post
{
    public int Id { get; set; }
    ...
    public int Author { get; set; } // changed type to int
} 
```

将**视图**更改为

```
 <div class="editor-label">
        @Html.LabelFor(model => model.Author)
    </div>
    <div class="editor-field">
        @Html.DropDownList("AuthorId", String.Empty)
        @Html.ValidationMessageFor(model => model.Author)
    </div> 
```

将**控制器**更改为

```
private void PopulateAuthorDropDownList(object selectedPerson = null)
    {
        var personQuery = from d in db.People
                          orderby d.Name
                          select d;
        ViewBag.AuthorId = new SelectList(personQuery, "Id", "UserName", selectedPerson); //Changed Author to AuthorId
    } 
```

并删除

```
 modelBuilder.Entity<Post>()
                .HasOptional(p => p.Author); 
```

从**数据库上下文**

无论如何感谢您的答案... :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T10:08:16.037

您必须提供`DropDownList`您刚刚经过的选项列表`string.empty`。

我你应该使用强类型版本`DropDownListFor`：

```
@Html.DropDownListFor(model => model.Author.Name, Model.AuthorList) 
```

或者不使用名称而是使用 ID 可能会更好：

```
@Html.DropDownListFor(model => model.Author.Id, Model.AuthorList) 
```

你的模型：

```
class Model {
    ...
    public SelectList AuthorList {get;set;}
} 
```

在你的控制器中：

```
model.AuthorList = new SelectList(fetchAuthors()
                         .Select(a => new SelectListItem {
                                          Text = a.Name,
                                          Value = a.Id 
                                      }, "Value", "Text"); 
```

# asp.net - 抓取 asp.net 页面时出现 EVENTVALIDATION 错误

> ID：11030460
> 
> 赞同：2
> 
> 时间：2012-06-14T09:41:48.427
> 
> 标签：asp.net, python, beautifulsoup, urllib2

我需要从这个[网站](http://www.uninor.in/UninorConnAssist/locate-a-store/Pages/locate-a-store.aspx)获得一些价值。基本上我需要获得每个城市的区域。我为此使用 Python 和 beautifulsoup。我正在做的是：

1.  首先向此页面发出 Get 请求并获取 __VIEWSTATE 和 __EVENTVALIDATION 以发出 POST 请求以获取特定州的城市。直到这里它的工作，我正在获取每个州的城市。

2.  要获得区域，我需要使用新的 __VIEWSTATE 和 __EVENTVALIDATION 进行另一个 POST，这一次我需要发送城市以及其他参数。但我在这里遇到错误：

> ```
> 505|error|500|Invalid postback or callback argument.  Event validation
> is enabled using <pages enableeventvalidation="true"> in configuration
> or <%@ Page EnableEventValidation="true" %> in a page.  For security
> purposes, this feature verifies that arguments to postback or callback
> events originate from the server control that originally rendered
> them.  If the data is valid and expected, use the
> ClientScriptManager.RegisterForEventValidation method in order to
> register the postback or callback data for validation.|</pages> 
> ```

我已经检查了我需要发送以获取相应城市的区域但没有成功的 firebug 中的每个参数/参数。在我看来，问题可能出在 __VIEWSTATE 或 __EVENTVALIDATION 上。

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:48:02.960

您必须在一个会话调用中获取并传递`__VIEWSTATE`and`__EVENTVALIDATION`变量，否则在重新打开与服务器的连接时进行第二次 POST 调用时，它希望已经收到另一个`__VIEWSTATE`and `__EVENTVALIDATION`！

所以基本上逻辑应该如下：

*   curl_init()
*   curl GET __VIEWSTATE 和 __EVENTVALIDATION
*   ***这里有一些逻辑***
*   curl POST 解析出 __VIEWSTATE 和 __EVENTVALIDATION
*   ***这里有一些逻辑***
*   curl_close();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:32:05.420

尝试添加`__REQUESTDIGEST`表单字段，它是 Sharepoint 使用的验证字段。此外，添加带有状态的选择元素的名称作为`__EVENTTARGET`字段的值：

```
__EVENTTARGET   ctl00$ctl25$g_4828177f_5427_4b0f_a968_ad02dc3674ec$ctl01$ddlState
__REQUESTDIGEST 0xDF6A6E14C550004C4A8533A9F5D...,14 Jun 2012 10:13:34 -0000 
```

# parameters - 从文件夹和命令提示符运行可执行文件之间的区别？

> ID：11030468
> 
> 赞同：1
> 
> 时间：2012-06-14T09:42:02.777
> 
> 标签：parameters, executable, exe, command-prompt

我遇到了一个奇怪的问题，我无法正确运行可执行文件。

如果我双击或使用图标回车，就好像应用程序尝试使用参数 /help 运行可执行文件。（更确切地说是 socrm.exe /help）（没有为文件设置参数）

如果我尝试在不带任何参数的情况下通过命令提示符运行 socrm.exe，则效果很好。

我的问题是：从文件夹运行可执行文件和在不带任何参数的命令提示符下运行它有什么区别？

这个错误似乎只发生在 WinXP 32 位机器上，当在 Win7 32/64 上尝试完全相同的应用程序时，它工作正常。

会不会是某些 .dll 文件没有正确注册？

提前致谢。

感谢任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:50:13.837

Looks like there is something in your registry that opens this file with a parameter each time or the `"socrm.exe"` executes itself again with the /help parameter. How do you know it opens with the /help parameter? Anyway, there is actually no big difference between `"the user click"` and open an executable with the commandline. Behind the scenes, your program get's executed as a child process of CMD and I think your program also gets it's user-rights from it's parent process. Hope I could help a little.

# php - Magento - 以编程方式保存静态块内容

> ID：11030470
> 
> 赞同：2
> 
> 时间：2012-06-14T09:42:11.450
> 
> 标签：php, magento, static-block

我有一个静态块，我想通过一个通过 cron 运行的脚本来更新它。

我发现了如何以编程方式创建或检索块，但不知道如何编辑现有块。

这适用于检索块：

```
// Retrieve the layout object
$layout = Mage::getSingleton('core/layout');

// Generate a CMS block object
$block = $layout->createBlock('cms/block');

// Set the block ID of the static block
$block->setBlockId('my_block_id');

// Write the static block content to screen
echo $block->toHtml(); 
```

我想我在这里遗漏了一些简单的东西，但是在这个块上执行 setContent() 然后 save() 只会导致“Invalid method Mage_Cms_Block_Block::save”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T10:03:33.563

按块 ID：

```
Mage::getModel('cms/block')->load($id)
  ->setData('content', 'Example content')
  ->save(); 
```

按标识符：

```
Mage::getModel('cms/block')
  ->getCollection()
  ->addFieldToFilter('identifier', 'my_block_id')
  ->load()
  ->setData('content', 'Example content')
  ->save(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-14T10:09:16.697

```
$identifier = 'footer_links';
Mage::getModel('cms/block')
    ->load($identifier, 'identifier')
    ->setData('content', 'Your new block content')
    ->save()
; 
```

或者，如果您知道块 ID：

```
$id = 1;
Mage::getModel('cms/block')
    ->load($id)
    ->setData('content', 'Your new block content')
    ->save()
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-05T01:17:16.920

使用 magento 脚本更新和添加静态块

```
function createBlock($blockData) {

$block = Mage::getModel('cms/block')->load($blockData['identifier']);
$block->setTitle($blockData['title']);
$block->setIdentifier($blockData['identifier']);
$block->setStores(array($blockData['storeId']));
$block->setIsActive($blockData['active']);
$block->setContent($blockData['content']);
$block->save(); 
```

}

请参考我的博客一步一步的解释

[http://www.pearlbells.co.uk/how-to-create-and-update-the-static-blocks-using-magento-script/](http://www.pearlbells.co.uk/how-to-create-and-update-the-static-blocks-using-magento-script/)

# jquery - 鼠标悬停时翻转停止

> ID：11030472
> 
> 赞同：2
> 
> 时间：2012-06-14T09:42:15.820
> 
> 标签：jquery, hover, flip, mouseout

我正在使用jQuery翻转，我想在悬停时停止翻转，并在鼠标悬停时反转它并停止它，如果我将鼠标放在它上面也保持停止......

```
 $(document).ready(function(){

  $('.sponsorFlip').hover(function(){

    var elem = $(this);

        elem.flip({
            direction:'bt',
            speed: 350,
            onBefore: function(){

                elem.html(elem.siblings('.sponsorData').html());
            }

        });

  }, function() {$(this).revertFlip();});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:26:21.283

```
$('.sponsorFlip').mouseover(function(){
    var elem = $(this);
    elem.flip({
      direction:'bt',
      speed: 350,
      onBefore: function(){
        elem.html(elem.siblings('.sponsorData').html());
      }
     });

  }).mouseout(function() {$(this).revertFlip();}); 
```

# jquery - twitter bootstrap jquery下拉菜单如何延迟切换

> ID：11030474
> 
> 赞同：0
> 
> 时间：2012-06-14T09:42:18.593
> 
> 标签：jquery, twitter-bootstrap

[http://twitter.github.com/bootstrap/javascript.html#dropdowns](http://twitter.github.com/bootstrap/javascript.html#dropdowns) 中的out`

```
ul.nav li.dropdown:hover ul.dropdown-menu{
   display: block;    
} 
```

但问题是当 U 不在云和菜单点（这是黑白之间的这个地方）时，菜单被切换

![在此处输入图像描述](../Images/80b73df9c724db27ab138ed04197c5c5.png)

如何更改脚本以在 mouseove 和 mouseout 上而不是在 click 上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:36:57.613

```
.navbar .dropdown-menu {
   margin-top: 0px;
 } 
```

# extjs4 - 带时钟的 Ext JS 状态栏

> ID：11030477
> 
> 赞同：0
> 
> 时间：2012-06-14T09:42:33.323
> 
> 标签：extjs4, extjs4.1

我正在尝试用时钟创建一个状态栏。我在 sencha 示例中找到了示例，但我正在尝试以更面向对象的方式构建它。

```
Ext.define('Urlopy.Components.Statusbar', {
extend : 'Ext.ux.statusbar.StatusBar',
id : 'basic-statusbar',
defaultText : 'Wczytane...',
defaultIconCls : 'x-status-valid',
iconCls : 'x-status-valid',
autoClear : 3000,
initComponent : function() {

    this.currentUserDisplay = Ext.create('Ext.toolbar.TextItem');
    this.currentUserDisplay.setText('Not logged in!');
    this.timeDisplay = Ext.create('Ext.toolbar.TextItem');
    this.timeDisplay.setText(Ext.Date.format(new Date(), 'Y-m-d H:i:s'));

    Ext.apply(this, {
                items : [this.currentUserDisplay, {
                            xtype : 'tbseparator'
                        }, this.timeDisplay],
                listeners : {
                    render : {
                        fn : function() {
                            Ext.TaskManager.start({
                                        run : function() {
                                            this.timeDisplay.setText(Ext.Date.format(new Date(),'Y-m-d H:i:s'));
                                        },
                                        interval : 1000
                                    });
                        },
                        delay : 100
                    }
                }
            });
    this.callParent();
},
setCurrentUser : function(username) {
    this.currentUserDisplay.setText('Logged as' + ": " + username);
},
startLoad : function(message) {
    if (message !== null) {
        this.showBusy({
                    text : message,
                    iconCls : "x-status-busy"
                });
    } else {
        this.showBusy();
    }
},
endLoad : function() {
    this.clearStatus({
                useDefaults : true
            });
} 
```

});

第一个时间组件显示它显示正确的日期和时间，但它不更新。

问题可能是 TaskManager 或我的听众。

而不是他们，我试过这样做：

```
initComponent : function() {

            this.currentUserDisplay = Ext.create("Ext.toolbar.TextItem");
            this.currentUserDisplay.setText('Nie jesteś zalogowany!');
            this.timeDisplay = Ext.create("Ext.toolbar.TextItem");
            this.timeDisplay.setText(Ext.Date.format(new Date(), "Y-m-d H:i:s"));

            Ext.apply(this, {
                        items : [this.currentUserDisplay, {
                                    xtype : 'tbseparator'
                                }, this.timeDisplay]
                    });

            this.callParent();

            var task = {
                run : function() {
                    this.timeDisplay.setText(Ext.Date.format(new Date(), "Y-m-d H:i:s"));
                },
                interval : 1000
            }
            Ext.TaskManager.start(task);
        }, 
```

但没有运气:(

我知道这可能是一个小错误，但找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:28:52.560

您所拥有的是范围问题，您的 run 函数中的 this 并不指向状态栏。您需要在间隔之后添加一个范围： this 。

参见示例[http://jsfiddle.net/nscrob/kR9ev/17/](http://jsfiddle.net/nscrob/kR9ev/17/)

# facebook - 如何获取朋友的照片总数

> ID：11030479
> 
> 赞同：0
> 
> 时间：2012-06-14T09:42:35.743
> 
> 标签：facebook, facebook-graph-api

我想获取朋友的照片总数，因为当我使用

```
$photos = $friend_id.'/photos'; 
```

我没有得到所有的照片。例如，如果一个朋友有 600 张照片，我只得到 180 左右或类似的数量，刷新页面后，我得到了更多照片，但没有得到所有照片。

所以我尝试使用

```
$photos = $friend_id.'/photos?limit=600'; 
```

并得到以下错误

```
Notice: Undefined index: data in *\friends-photos.php on line 107
0
Notice: Undefined index: data in *\friends-photos.php on line 115

Warning: Invalid argument supplied for foreach() in *\friends-photos.php on line 115

Notice: Undefined index: paging in *\friends-photos.php on line 132 
```

错误行中的代码如下

```
 $var = $dp["data"] ; ------107  
 foreach ($dp["data"] as $value) ---------115 
 $next_page = $dp["paging"]["next"]; --------132 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:08:20.167

根据[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

用户 ID 的“照片”连接是“用户（或朋友）**被标记的**照片”。

在这种情况下，您会得到用户被标记的照片数量。而不是他相册中的照片总数。

* * *

在[https://developers.facebook.com/docs/reference/fql/photo/](https://developers.facebook.com/docs/reference/fql/photo/)

“所有者”列不可索引。所以我们不能直接按所有者ID选择所有照片。

目前我还没有找到一种简单的方法来获取照片的总数。我可以做的是选择朋友的所有相册并遍历所有相册以获取每个相册中的照片数量。但是真的很慢......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:01:56.847

您需要使用`until`and`limit`字段或`limit`and`offset`字段

```
if($user_id) {
    $the_photos = array();
    $friend_id = '4'; // user id

    $friend_photos = $facebook->api($friend_id."/photos");

    while ($friend_photos['data'])
    {
        $the_photos = array_merge( $the_photos, $friend_photos['data'] );

        $paging = $friend_photos['paging'];
        $next = $paging['next'];

        $query = parse_url($next, PHP_URL_QUERY);
        parse_str($query, $par);

        $friend_photos = $facebook->api(
            $friend_id."/photos", 'GET', array(
                'limit' => $par['limit'],
                'until'  => $par['until'] ));
    }

    echo count($the_photos);
} 
```

我想想象一下，您在朋友个人资料上看到的照片编号包含对其具有某些隐私限制的照片，因此很可能与此处的编号不匹配。

有关更多信息，请参阅

*   [http://developers.facebook.com/docs/reference/api/user/#photos](http://developers.facebook.com/docs/reference/api/user/#photos)
*   [http://developers.facebook.com/docs/reference/api/photo/](http://developers.facebook.com/docs/reference/api/photo/)

# document - SAP，如何签入文档文件？

> ID：11030481
> 
> 赞同：1
> 
> 时间：2012-06-14T09:42:47.800
> 
> 标签：document, sap, bapi, function-module, saprfc

我想在 SAP 中创建一个新文档。另外我有一些属于这个文档的文件，这些文件我想上传到 SAP knwolegde 库。

我正在使用 BAPI_DOCUMENT_CREATE2 创建或 BAPI_DOCUMENT_CHECKIN2 将文件添加到文档信息数据中。一切正常，除了文件上传或签入。

我正在使用 DOCUMENTFILES 表。我为每个文件添加一行，目前我只设置了三个字段：

```
 row["STORAGECATEGORY"] = "DMS_C1_ST";
  row["DOCFILE"] = "c:\temp\bom.pdf";
  row["WASAPPLICATION"] = "PDF"; 
```

BAPI 错误消息：“签入和存储 c:/temp/bom.pdf 时出错”

我设置参数

```
 PF_FTP_DEST = "SAPFTPA";
  PF_HTTP_DEST = "SAPHTTPA"; 
```

我查看了日志数据（slg1）。我发现以下条目：

```
 ERRMSG: Error in opening file "..." for reading (No such file or directrory)
  V1:     SCMS_DOC_CREATE_FILES
  V2:     13 
```

如果有人有想法并且可以为这个问题带来一些启发，那就太好了。提前感谢托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:03:59.320

请记住，BAPIS 在应用程序服务器内部运行，并且不允许对客户端做出任何假设。这也意味着他们无法回调 SAP GUI 并从那里上传文件。C:\temp\bom.pdf 必须是应用服务器上的文件，而不是本地机器上的文件！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:03:23.377

您是否考虑过使用

```
row["DOCFILE"] = "bom.pdf";
row["DOCPATH"] = "c:\temp\"; 
```

让我知道它是如何进行的，或者如果您已经完成了它，那么请粘贴您的解决方案。

# html - 有 2 个父母的树：像 familyecho 一样构建家谱 HTML/javascript

> ID：11030483
> 
> 赞同：0
> 
> 时间：2012-06-14T09:42:56.397
> 
> 标签：html, family-tree

我想显示没有 Flash 的家谱树。在 HTML/javascript/css 中。

由于以下原因，我在显示我的树时遇到了一个大问题：

*   难以显示两个父母之间的婚姻联系
*   子节点

您知道任何可以像 www.familyecho.com 一样构建家谱的 api 吗？我要疯了？？？？

这里有一个例子

```
 Father --- Mother
         |
|--------|------------|
Child1   Child2     Child3 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T23:17:21.420

见[http://www.outten.org/?id=46](http://www.outten.org/?id=46)

主要基于我也喜欢的家庭回声外观。

数据是来自 MySQL 的动态数据，可拖动页面 gfx 是在本地用 javascript 构建的。有点与表一起散列，但在移动设备上以一种方式工作。

亚历克斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T15:41:27.370

您可能想以[http://www.myheritage.nl](http://www.myheritage.nl)为例，与此相比，familiecho 显得苍白无力。对 500 名家庭成员免费开放，但不幸的是，它是用 Flash 制作的，所以没有机会在那里借用一些代码或库。

如果您只想使用 HTML，可以使用[http://www.starkeffect.com/ged2html/](http://www.starkeffect.com/ged2html/)，但有点过时。

据我所知，有几个用于 javascript bun 的绘图库都不是针对家谱的，任何想出一个的人都会感激不尽。[http://raphaeljs.com/](http://raphaeljs.com/)上的Raphael是最广为人知的矢量图形库，请参阅[http://javascript.open-libraries.com/utilities/drawing/10-best-javascript-drawing-and-canvas-libraries/](http://javascript.open-libraries.com/utilities/drawing/10-best-javascript-drawing-and-canvas-libraries/)比较一下，看看这个[Javascript 绘图库？](https://stackoverflow.com/questions/96486/javascript-drawing-library)问题。基本上，您将不得不在矢量（例如 SVG）方法和渲染图形（例如 Canvas）之间做出选择，它们中的每一个都有自己的优势、库和追随者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-25T15:39:17.200

如果您正在寻找作为 Familyecho 的 API。Familyecho.com 已经有一个 API 支持，您可以使用它，他们还提供开发人员示例代码以便快速集成。导航到他们的网站以获取更多信息。

> 这是链接：[https ://www.familyecho.com/?page=api](https://www.familyecho.com/?page=api)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-02-04T16:29:45.237

韦斯，该链接指向嵌入了代码的页面，而不仅仅是输出示例。数据从 MySQL 中提取并转换为 js 对象（此处：[https](https://www.outten.org/data.php?id=46) ://www.outten.org/data.php?id=46 ）。

否则 javascript 在文档源的底部是不言自明的，否则使用标准 JS jQuery 等。此代码没有许可，只有其他人使用过的代码，可以根据需要使用。有很多可以改进的地方。

顺便说一句，链接已更改并更新为： [https ://www.outten.org/newTree.html?id=46](https://www.outten.org/newTree.html?id=46)

几十年来我一直在寻找一个 JS 模块来做到这一点，但甚至没有一个 Node.js

带着敬意

Xander (Alex) 丢失旧堆栈交换登录 :(

# jquery-ui - 如何在点击表格时获取特定的行和列值

> ID：11030484
> 
> 赞同：1
> 
> 时间：2012-06-14T09:42:59.267
> 
> 标签：jquery-ui

我创建了一个动态表，现在我想要单击如何获取的特定行和列的值。以下是我的代码

```
var theader = '<table border="1">\n';
        var tbody = '';

        for (var out = 1;out<substr.length-1;out++)
        {
            //alert(substr[out]);

            tbody += '<tr>';

            var pra = substr[out].split('|^');
            //alert('pra.length is: '+pra.length);
            for (var i=0;i<pra.length-1;i++)
            {
                tbody += '<td>';
                tbody += pra[i];                    
                tbody += '</td>' 

            }
            tbody += '</tr>\n';

        }

        //createTable();
        var tfooter = '</table>';
        document.getElementById('wrapper').innerHTML = theader + tbody + tfooter; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:49:41.760

为表分配一个 id

```
var theader = '<table border="1" id=\"tableId\">\n'; 
```

然后像这样写jquery

**演示** [http://jsfiddle.net/75zFX/4/](http://jsfiddle.net/75zFX/4/)

```
$(function(){
    $("#tableIdtr td").on("click",function() {
       alert($(this).html());
       //OR $(this).text()

    });
});​ 
```

# c# - 为桌面操作系统构建有吸引力的 GUI 的最佳 GUI 制作软件

> ID：11030485
> 
> 赞同：-7
> 
> 时间：2012-06-14T09:43:00.640
> 
> 标签：c#, c++, visual-studio-2010, user-interface

请告诉我什么是设计 GUI 的最佳软件 这是设计交互式 GUI 的最佳软件，如您所见 Adob​​e GUI MS Visual Studio GUI Panda 和 Bitdefender GUI 以及所有其他交互式软件 我想要最适合我的 GUI基于桌面的软件软件应该可以在 Windows 操作系统上运行，但操作系统不是主要问题，但外观应该很有吸引力而且我的软件使用数据库访问 C++ C# 中的一些代码，并且软件是基于桌面的我希望你告诉最好的一个有一些书要掌握那个软件

简而言之，我想要最好的用于软件开发的 GUI Maker 软件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T09:47:18.563

如果您正在谈论 .NET，则可以使用 WPF，并使用 Visual Studio、Expression Blend 或 KaXaml 来构建 GUI，主要使用鼠标。

您还可以将 Qt 用于 C++（或在 Qt 中使用 QML）并使用 QtCreator 构建 GUI

# vb6 - 在 vb6 项目中使用 True DB grid control pro 6.0 时出现“该控件尚未获得此机器的许可”错误

> ID：11030492
> 
> 赞同：-1
> 
> 时间：2012-06-14T09:43:28.240
> 
> 标签：vb6

我在 xp 机器上的 vb6 项目中使用 True DB grid control pro 6.0 并且没有遇到任何问题。我正在尝试在 Windows 7 上的 vb6 项目中使用相同的控件，同时访问我得到的工具，我得到的错误控件还没有被这台机器许可。请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:00:48.607

您是否运行了 TrueGrid 软件包的安装？

查看控制面板，添加/删除程序，您应该会看到列出的“APEX True DBGrid Pro 6.0”。

# asp.net - 搜索查询格式，asp.net

> ID：11030493
> 
> 赞同：0
> 
> 时间：2012-06-14T09:43:33.993
> 
> 标签：asp.net

我有一个学校的搜索门户。我有一个高级搜索表单，用户可以在其中选择课程、学校所在城市等。

单击搜索按钮后，我有以下查询：

```
select * from tbl_xxx 
where state = 'xxx' and city = 'xxx' and area = 'xxx' 
      and ( course LIKE 'x' or course LIKE 'Std 10') 
      and gender ='xxx' 
```

其实我的问题是选课。课程字段表中的值将类似于以下任何选项：

```
std 1, std 2 ,std3, std 4
std 10, std 11&12 commerce
std 10, std 11&12 science
std 1, std 2 ,std3, std 4, std 5, std 6, std 7, std 8, std 9, std 10, std 11&12 commerce
std 1, std 2 ,std3, std 4, std 5, std 6, std 7, std 8, std 9, std 10, std 11&12 science 
```

如果我从课程字段中删除所有数据并仅添加“std 10”，则只显示结果。
如果我使用类似运算符进行搜索，例如上面给出的查询，我应该得到最后四个字段，因为它包含“std 10”，但我没有得到任何结果。

我知道仅在搜索查询中存在一些问题。但我不知道任何运营商，而不是`LIKE`用于这样的问题。

我的应用程序位于 asp.net (C#) 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:48:56.863

您应该考虑使用存储过程进行查询，然后使用可能[`ADO.NET to query the DB`](http://support.microsoft.com/kb/310070)...

此外，`like`语句需要**通配符**，例如

`select....where course like 'Std 1%'`<- 这将获得前 5 个字符作为标准 1 的所有课程。

# android - 如何在 Android xml 中维护侧面图像？

> ID：11030494
> 
> 赞同：0
> 
> 时间：2012-06-14T09:43:37.320
> 
> 标签：android, xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >
    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent" android:layout_height="fill_parent"
        android:background="#00FFFF"
            >
//Relative Layout for entire controls

           <LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/LinearLayout02" 
        android:layout_height="wrap_content" 
        android:layout_width="fill_parent" 
        android:paddingTop="7dip"
        >
        <ImageView 
            android:id="@+id/Button02" 
            android:layout_width="95dip" 
            android:layout_height="45dip" 
            android:paddingTop="8dip"
            android:src="@drawable/homeicon"
            >
        </ImageView>
        <Button 
            android:id="@+id/Button03" 
           android:layout_width="230dip" 
            android:layout_height="60dip" 
             android:paddingTop="15dip"
             android:layout_marginLeft="105dip"
             android:text="Appoiments">
        </Button>
    </LinearLayout>
    //within linear-layout i am using the button and image view for displaying the image and button control

    <LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/LinearLayout02" 
        android:layout_height="wrap_content" 
        android:layout_width="fill_parent" 
        android:paddingTop="70dip"
        >
        <ImageView 
            android:id="@+id/Button02" 
            android:layout_width="95dip" 
            android:layout_height="45dip" 
            android:paddingTop="8dip"
            android:src="@drawable/appoiments"
            >
        </ImageView>
        <Button 
            android:id="@+id/Button03" 
           android:layout_width="230dip" 
            android:layout_height="60dip" 
             android:paddingTop="15dip"
             android:layout_marginLeft="105dip"
             android:text="Service Type">
        </Button>
    </LinearLayout>

    <LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/LinearLayout02" 
        android:layout_height="wrap_content" 
        android:layout_width="fill_parent" 
        android:paddingTop="140dip"
        >
        <ImageView 
            android:id="@+id/Button02" 
            android:layout_width="95dip" 
            android:layout_height="45dip" 
            android:paddingTop="8dip"
            android:src="@drawable/carstatus"
            >
        </ImageView>
        <Button 
            android:id="@+id/Button03" 
           android:layout_width="160dip" 
            android:layout_height="60dip" 
             android:paddingTop="15dip"
             android:layout_marginLeft="105dip"
             android:text="Enter Time">
        </Button>

        <Button 
            android:id="@+id/Button03" 
           android:layout_width="160dip" 
            android:layout_height="60dip" 
             android:paddingTop="15dip"
             android:layout_marginLeft="105dip"
             android:text="Enter Date">
        </Button>
    </LinearLayout>

    <LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/LinearLayout02" 
        android:layout_height="wrap_content" 
        android:layout_width="fill_parent" 
        android:paddingTop="190dip"
        >
        <ImageView 
            android:id="@+id/Button02" 
            android:layout_width="95dip" 
            android:layout_height="45dip" 
            android:paddingTop="8dip"
            android:src="@drawable/waitinglounge"
            >
        </ImageView>
        </LinearLayout>

    <LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/LinearLayout02" 
        android:layout_height="wrap_content" 
        android:layout_width="fill_parent" 
        android:paddingTop="240dip"
        >
        <ImageView 
            android:id="@+id/Button02" 
            android:layout_width="95dip" 
            android:layout_height="45dip" 
            android:paddingTop="8dip"
            android:src="@drawable/pricelist"
            >
        </ImageView>
        </LinearLayout>

    <LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/LinearLayout02" 
        android:layout_height="wrap_content" 
        android:layout_width="fill_parent" 
        android:paddingTop="280dip"
        >
        <ImageView 
            android:id="@+id/Button02" 
            android:layout_width="95dip" 
            android:layout_height="45dip" 
            android:paddingTop="8dip"
            android:src="@drawable/soffers"
            >
        </ImageView>
            <EditText
            android:id="@+id/Button03" 
           android:layout_width="230dip" 
            android:layout_height="65dip" 
             android:paddingTop="15dip"
             android:layout_marginLeft="105dip"
             android:text="Enter Special Instructions">
        </EditText>
        </LinearLayout>
        <LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/LinearLayout02" 
        android:layout_height="wrap_content" 
        android:layout_width="fill_parent" 
        android:paddingTop="325dip"
        >
        <ImageView 
            android:id="@+id/Button02" 
            android:layout_width="95dip" 
            android:layout_height="45dip" 
            android:paddingTop="8dip"
            android:src="@drawable/caracess"
            >
        </ImageView>

        </LinearLayout>

         <LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/LinearLayout02" 
        android:layout_height="wrap_content" 
        android:layout_width="fill_parent" 
        android:paddingTop="365dip"
        >
        <ImageView 
            android:id="@+id/Button02" 
            android:layout_width="95dip" 
            android:layout_height="45dip" 
            android:paddingTop="8dip"
            android:src="@drawable/testdrive"
            >
        </ImageView>

        </LinearLayout>

          <LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/LinearLayout02" 
        android:layout_height="wrap_content" 
        android:layout_width="fill_parent" 
        android:paddingTop="410dip"
        >
        <ImageView 
            android:id="@+id/Button02" 
            android:layout_width="95dip" 
            android:layout_height="45dip" 
            android:paddingTop="8dip"
            android:src="@drawable/referfriend"
            >
        </ImageView>

        </LinearLayout>

          <LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/LinearLayout02" 
        android:layout_height="wrap_content" 
        android:layout_width="fill_parent" 
        android:paddingTop="425dip"
        >
        <ImageView 
            android:id="@+id/Button02" 
            android:layout_width="95dip" 
            android:layout_height="45dip" 
            android:paddingTop="8dip"
            android:src="@drawable/feedback"
            >
        </ImageView>

        </LinearLayout>

          <LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/LinearLayout02" 
        android:layout_height="wrap_content" 
        android:layout_width="fill_parent" 
        android:paddingTop="465dip"
        >
        <ImageView 
            android:id="@+id/Button02" 
            android:layout_width="95dip" 
            android:layout_height="45dip" 
            android:paddingTop="8dip"
            android:src="@drawable/carmaitananceguide"
            >
        </ImageView>
        <Button 
            android:id="@+id/Button03" 
           android:layout_width="180dip" 
            android:layout_height="60dip" 
             android:paddingTop="15dip"
             android:textStyle="bold"
             android:background="#959090"
             android:layout_marginLeft="105dip"
             android:text="Submit">
        </Button>
    </LinearLayout>

           <LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/LinearLayout02" 
        android:layout_height="wrap_content" 
        android:layout_width="fill_parent" 
        android:paddingTop="510dip"
        >
        <ImageView 
            android:id="@+id/Button02" 
            android:layout_width="100dip" 
            android:layout_height="40dip" 
            android:paddingTop="8dip"
            android:src="@drawable/alerts"
            >
        </ImageView>

        </LinearLayout>

    </RelativeLayout>
    </ScrollView>

 but the images is not aligned properly my need is the side images bar is continues to the through out the application when i am move any screen the side images view is constant how can i achieve it in the Android xml.the side bar images is show in the all the screen whenever i select the any of the services from the side bar .the images is came from app draw-able folder

Thanks in Advance 
```

# c# - 程序集绑定错误：绑定结果：hr = 0x80070002。该系统找不到指定的文件

> ID：11030500
> 
> 赞同：9
> 
> 时间：2012-06-14T09:44:05.637
> 
> 标签：c#, .net-assembly, assembly-resolution

我有一个 Visual Studio 2010 解决方案，其中包含一个类库 (ProjectA) 和两个 Sharepoint 项目（ProjectB 和 ProjectC）。依赖顺序是 ProjectB 引用 ProejctA 和 ProjectC 引用 ProjectA 和 ProjectB。

在一台特定的开发机器上，尝试构建 ProjectC 时出现以下错误：

> 编译失败。无法加载一种或多种请求的类型。检索 LoaderExceptions 属性以获取更多信息。

在查看融合日志时，我注意到以下错误：

> *** 装配活页夹日志条目 (14/06/2012 @ 09:38:32) ***
> 
> 操作失败。
> 
> 绑定结果：hr = 0x80070002。该系统找不到指定的文件。
> 
> 从以下位置加载的程序集管理器：C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
> 
> 在可执行文件 C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe 下运行
> 
> --- 详细的错误日志如下。
> 
> === 预绑定状态信息 === LOG: User = DOMAIN\username
> 
> 日志：DisplayName = ProjectB，版本 = 0.0.0.0，文化 = 中性，PublicKeyToken = aaaaaaaaaaaaaaa，处理器架构 = MSIL（完全指定）
> 
> 日志：Appbase = file:///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/
> 
> 日志：初始 PrivatePath = NULL
> 
> 日志：动态基础 = NULL
> 
> 日志：缓存基础 = NULL
> 
> 日志：AppName = devenv.exe
> 
> 调用程序集：（未知）。
> 
> LOG：此绑定在默认加载上下文中开始。
> 
> LOG：使用应用程序配置文件：C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe.Config
> 
> LOG：使用主机配置文件：
> 
> LOG：使用 C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config 中的机器配置文件。
> 
> 日志：策略后参考：ProjectB，版本=0.0.0.0，文化=中性，PublicKeyToken=aaaaaaaaaaaaaaaa，处理器架构=MSIL
> 
> 日志：GAC 查找不成功。
> 
> 日志：正在尝试下载新的 URL file:///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/ProjectB.DLL。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/ProjectB/ProjectB.DLL。日志：正在尝试下载新的 URL file:///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/PublicAssemblies/ProjectB.DLL。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/PublicAssemblies/ProjectB/ProjectB.DLL。日志：尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/PrivateAssemblies/ProjectB.DLL。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/PrivateAssemblies/ProjectB/ProjectB.DLL。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Microsoft/TemplateProviders/ProjectB.DLL。日志：尝试下载新的 URL file:///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Microsoft/TemplateProviders/ProjectB/ProjectB.DLL。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/PrivateAssemblies/DataCollectors/ProjectB.DLL。日志：尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/PrivateAssemblies/DataCollectors/ProjectB/ProjectB.DLL。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/PrivateAssemblies/DataCollectors/x86/ProjectB.DLL。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/PrivateAssemblies/DataCollectors/x86/ProjectB/ProjectB.DLL。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Microsoft/Editor/ProjectB.DLL。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Microsoft/Editor/ProjectB/ProjectB.DLL。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Platform/Debugger/ProjectB.DLL。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Platform/Debugger/ProjectB/ProjectB.DLL。日志：尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/ProjectB.EXE。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/ProjectB/ProjectB.EXE。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/PublicAssemblies/ProjectB.EXE。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/PublicAssemblies/ProjectB/ProjectB.EXE。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/PrivateAssemblies/ProjectB.EXE。日志：正在尝试下载新的 URL file:///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/PrivateAssemblies/ProjectB/ProjectB.EXE。日志：正在尝试下载新的 URL 文件：///C：/程序文件 (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Microsoft/TemplateProviders/ProjectB.EXE。日志：尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Microsoft/TemplateProviders/ProjectB/ProjectB.EXE。日志：正在尝试下载新的 URL file:///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/PrivateAssemblies/DataCollectors/ProjectB.EXE。日志：正在尝试下载新的 URL file:///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/PrivateAssemblies/DataCollectors/ProjectB/ProjectB.EXE。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/PrivateAssemblies/DataCollectors/x86/ProjectB.EXE。日志：正在尝试下载新的 URL 文件：///C：/程序文件 (x86)/Microsoft Visual Studio 10.0/Common7/IDE/PrivateAssemblies/DataCollectors/x86/ProjectB/ProjectB.EXE。日志：正在尝试下载新的 URL file:///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Microsoft/Editor/ProjectB.EXE。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Microsoft/Editor/ProjectB/ProjectB.EXE。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Platform/Debugger/ProjectB.EXE。日志：正在尝试下载新的 URL file:///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Platform/Debugger/ProjectB/ProjectB.EXE。LOG：所有探测 URL 都已尝试并失败。0/Common7/IDE/PrivateAssemblies/DataCollectors/x86/ProjectB/ProjectB.EXE。日志：正在尝试下载新的 URL file:///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Microsoft/Editor/ProjectB.EXE。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Microsoft/Editor/ProjectB/ProjectB.EXE。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Platform/Debugger/ProjectB.EXE。日志：正在尝试下载新的 URL file:///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Platform/Debugger/ProjectB/ProjectB.EXE。LOG：所有探测 URL 都已尝试并失败。0/Common7/IDE/PrivateAssemblies/DataCollectors/x86/ProjectB/ProjectB.EXE。日志：正在尝试下载新的 URL file:///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Microsoft/Editor/ProjectB.EXE。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Microsoft/Editor/ProjectB/ProjectB.EXE。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Platform/Debugger/ProjectB.EXE。日志：正在尝试下载新的 URL file:///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Platform/Debugger/ProjectB/ProjectB.EXE。LOG：所有探测 URL 都已尝试并失败。正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Microsoft/Editor/ProjectB.EXE。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Microsoft/Editor/ProjectB/ProjectB.EXE。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Platform/Debugger/ProjectB.EXE。日志：正在尝试下载新的 URL file:///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Platform/Debugger/ProjectB/ProjectB.EXE。LOG：所有探测 URL 都已尝试并失败。正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Microsoft/Editor/ProjectB.EXE。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Microsoft/Editor/ProjectB/ProjectB.EXE。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Platform/Debugger/ProjectB.EXE。日志：正在尝试下载新的 URL file:///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Platform/Debugger/ProjectB/ProjectB.EXE。LOG：所有探测 URL 都已尝试并失败。/程序文件 (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Microsoft/Editor/ProjectB/ProjectB.EXE。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Platform/Debugger/ProjectB.EXE。日志：正在尝试下载新的 URL file:///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Platform/Debugger/ProjectB/ProjectB.EXE。LOG：所有探测 URL 都已尝试并失败。/程序文件 (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Microsoft/Editor/ProjectB/ProjectB.EXE。日志：正在尝试下载新的 URL 文件：///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Platform/Debugger/ProjectB.EXE。日志：正在尝试下载新的 URL file:///C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Platform/Debugger/ProjectB/ProjectB.EXE。LOG：所有探测 URL 都已尝试并失败。/程序文件（x86）/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Platform/Debugger/ProjectB/ProjectB.EXE。LOG：所有探测 URL 都已尝试并失败。/程序文件（x86）/Microsoft Visual Studio 10.0/Common7/IDE/CommonExtensions/Platform/Debugger/ProjectB/ProjectB.EXE。LOG：所有探测 URL 都已尝试并失败。

我试过了：

1.  删除对 ProjectB 的引用并重新添加它：
    *   a) 作为项目参考
    *   b) 作为手动参考，直接到 projectB 的 debug 文件夹
2.  手动将 ProjectB.dll 放入 GAC
3.  将“复制本地”选项从 True 更改为 False（并返回 True）

只有 (2) 将程序集放在 GAC 中才能构建 ProjectC。为什么它没有找到应有的程序集（并且在其他机器上）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T22:46:18.083

PublicKeyToken=aaaaaaaaaaaaaaaa 可以不同，也可能是程序集的版本号不同。我认为您应该按照描述使用[Fusion Log Viewer 进行调试](http://www.hanselman.com/blog/BackToBasicsUsingFusionLogViewerToDebugObscureLoaderErrors.aspx)，并希望您能完全解决您的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T09:21:22.990

所以事实证明，无法找到程序集的原因是因为我们[延迟签署](http://msdn.microsoft.com/en-us/library/t07a3dye.aspx)程序集，这意味着：

> 因为程序集没有有效的强名称签名，所以必须关闭对该签名的验证。您可以通过使用带有强名称工具的 –Vr 选项来执行此操作。

我已经为所有必需的公钥完成了此操作，但仅在 x64 Visual Studio 命令提示符下。我还需要在 x86 版本的 Visual Studio 命令提示符中添加跳过 x86 的验证。

我之所以设法找到它，是因为尝试使用基于特定命令的构建/部署脚本时，我注意到其中一个测试程序集出现以下异常：

> 无法加载文件或程序集 'ProjectC.Tests, Version=0.0.0.0, Culture=neutral, PublicKeyToken=e72f8d3506b83180' 或其依赖项之一。强名称验证失败。（来自 HRESULT 的异常：0x8013141A）

# alfresco - 在 alfresco 中限制特定用户的文档访问权限

> ID：11030502
> 
> 赞同：3
> 
> 时间：2012-06-14T09:44:09.443
> 
> 标签：alfresco

有什么方法可以只向特定用户显示特定文档？在 alfresco 中，一个站点的所有用户都可以看到所有文档。我只想向某些用户显示特定文档。我正在使用露天社区版。有人可以帮我吗？？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T11:38:22.990

站点只是一个文件夹。站点文件夹包含用于文档库、wiki、数据列表等内容的“容器”文件夹。您可以像在 Alfresco 中的任何文件夹一样设置这些文件夹的权限。同样，文档可以单独设置其权限。

产生混淆是因为当您在特定站点的上下文中使用共享时，权限设置不提供精细设置。但是，如果您通过“存储库”视图导航到您的站点（请参阅页面顶部的链接），您可以完全控制权限。

假设我们在该站点的文档库中有一个名为 test-site 的站点和一个名为 test 的文件夹，其中包含一个文档 testdoc.pdf。你应该能够：

1.  单击页面顶部的“存储库”链接。
2.  单击“站点”文件夹。
3.  单击“测试站点”文件夹。
4.  单击“documentLibrary”文件夹。
5.  单击“测试”文件夹。
6.  单击 testdoc.pdf 打开其详细信息页面。
7.  点击“管理权限”。

默认情况下，对象继承其父级的权限。所以 testdoc.pdf 具有其父文件夹的权限。如果您想删除所有权限并在 testdoc.pdf 上设置显式“本地”权限...

1.  单击“继承权限”以关闭继承。
2.  单击“添加用户或组”以添加具有您希望他们拥有的访问级别的特定用户或组。

# javascript - 当#已经添加到url中时，如何使用javascript或jquery将焦点设置在div上？

> ID：11030503
> 
> 赞同：14
> 
> 时间：2012-06-14T09:44:09.880
> 
> 标签：javascript, jquery, html, focus, setfocus

我想使用 jquery 或 javascript 将焦点放在特定的 div 上。我刚刚使用`document.getElementById("pack_0").focus();`了“pack_0”是我的 div id，但它不起作用。我注意到由于一些弹出编码，我的 url 中已经添加了 '#'，所以我的 url 是 'http://localhost/website/book#'

那么，当 # in url 时，任何人都可以帮助我强制完全专注于 div 吗？

提前致谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-14T09:58:33.150

从这个问题来看，我认为“聚焦 div”的实际意思是“改变窗口的垂直滚动位置，使 div 可见”。如果是这种情况，您可以使用以下 jQuery 代码：

```
$(window).scrollTop($('#pack_0').offset().top); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-12T18:01:20.110

Anthony Grist 的假设在您的情况下可能是正确的。*但是，如果希望的焦点*对象是一个 DIV，它可能会帮助其他搜索该主题的人知道，该 DIV 应该有一个*tabindex*集，例如 tabindex="9999"。否则，大多数浏览器不会分配焦点。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-03-30T10:37:36.737

要首先将焦点设置为 div，我们需要为特定 div 定义 tabindex，如下所示

```
<div class="leftbar-btn-module" tabindex="-1">'Content'</div> 
```

和 jquery 设置焦点

```
jQuery(".leftbar-btn-module").attr("tabindex",-1).focus(); 
```

# c++ - 函数中的参数数量未知

> ID：11030517
> 
> 赞同：4
> 
> 时间：2012-06-14T09:44:58.140
> 
> 标签：c++, argument-passing, variadic-functions

我有班级成员：

```
LineND::LineND(double a ...)
{
    coefficients.push_back(a);
    va_list arguments;
    va_start(arguments, a);
    double argValue;
    do
    {
        argValue = va_arg(arguments, double);
        coefficients.push_back(argValue);
    }while(argValue != NULL);   // THIS IS A PROBLEM POINT!
    va_end(arguments);
} 
```

我不知道将使用多少参数。我需要获取每个参数并将其放入名为`coefficients`. 我该怎么做？我理解，在这种情况下，该陈述`while(argValue != NULL)`是不正确的。例如，我不能使用这个签名：

```
LineND::LineND(int numArgs, double a ...) 
```

像这样改变条件：

```
while(argValue != numArgs); 
```

关键是我无法更改方法的签名。需要用另一种方式解决这个问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-14T10:00:36.210

变量参数列表有几个缺点：

*   调用者可以传递他们想要的一切。
*   如果传递了非 POD 对象，则会调用未定义的行为
*   您不能依赖参数的数量（调用者可能会出错）
*   您为您的客户承担了很多责任，您希望为他们更轻松地使用您的库代码（实际示例：格式字符串错误/错误）

与可变参数模板相比：

*   编译时间列表大小是已知的
*   类型在编译时已知
*   你应该对事情负责，而不是你的客户，这是应该的。

例子：

```
void pass_me_floats_impl (std::initializer_list<float> floats) {
    ...
} 
```

您可以将其放入类声明的私有部分或某些详细名称空间中。注意：`pass_me_floats_impl()`不必在标头中实现。

然后这是为您的客户提供的好东西：

```
template <typename ...ArgsT>
void pass_me_floats (ArgsT ...floats) {
    pass_me_floats_impl ({floats...});
} 
```

他现在可以做到：

```
pass_me_floats ();
pass_me_floats (3.5f);
pass_me_floats (1f, 2f, 4f); 
```

但他不能：

```
pass_me_floats (4UL, std::string()); 
```

因为这会在您的 pass_me_floats-function 中发出编译错误。

如果您*至少*需要2 个参数，那么请这样做：

```
template <typename ...ArgsT>
void pass_me_floats (float one, float two, ArgsT... rest) {} 
```

当然，如果你想要一个完整的内联函数，你也可以

```
template <typename ...ArgsT>
void pass_me_floats (ArgsT... rest) {
    std::array<float, sizeof...(ArgsT)> const floaties {rest...};

    for (const auto f : floaties) {}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T09:48:31.017

可变参数在 C++ 中非常不受欢迎，这是有充分理由的。其中一个原因是无法知道列表的结束位置，因此如果无法更改函数的签名，则*必须*指定某种标记值来指示列表的结束位置。如果你不能做这两件事，你就完蛋了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T09:49:40.843

在这种情况下，您无法确定代码中的参数数量。您必须让此类函数的调用者将`double`s 的数量传递给您（我假设第一个`a`参数不包含参数的数量）。例如。：

```
LineND::LineND(unsigned count, ...)
{
    va_list arguments;
    va_start(arguments, a); 
```

并且条件变为

```
while (a--) { ... } 
```

在 C++11 中，您可以使用两个更好的设备来传递未指定数量的双精度数。

1.  [传递 a`vector`并使用初始化列表对其进行初始化](http://ideone.com/bvaQl)
2.  [可变参数模板](http://ideone.com/fE4g4)

请注意，两者之间存在差异；当转发源自`{...}`不是 C++ 中的表达式这一事实时，前者有一些问题。后者可能会导致代码膨胀，因为它会为每个参数类型组合生成一个函数。

在 C++03 中，您只能使用辅助对象（例如[Boost.Assignment](http://www.boost.org/doc/libs/1_49_0/libs/assign/doc/index.html)库提供的对象）来传递未知数量的参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T09:51:37.080

您应该重写要采取的方法`std::initializer_list<double>`。

如果您不能这样做，并且无法添加`count`参数，则解决方法是采用终止参数列表的**标记**值，例如`0.0`or `NaN`（或任何在您的函数上下文中没有意义的值）。

例如，采用可变数量指针的函数用作标记`NULL`值；采用结构列表的函数将初始化为 0 的结构作为标记。这在 C API 中相当常见。请参阅[http://c-faq.com/varargs/nargs.html](http://c-faq.com/varargs/nargs.html)给出的示例是`execl("/bin/sh", "sh", "-c", "date", (char *)NULL);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T09:54:44.207

使参数列表的第一个双精度为参数的实际计数。

# session - 仅在 Magento 的一个 Storeview 中出现内部服务器错误 500

> ID：11030519
> 
> 赞同：-1
> 
> 时间：2012-06-14T09:45:05.457
> 
> 标签：session, magento

我正在运行 Magento 1.7.0.0 多存储，一天几次，我在浏览器中收到著名的“内部服务器错误 500”。

*   当导航到 Magento 后端或不同的 Magento Storeview 时，后端和 Storeview 仍然可用并且没有显示内部服务器错误。
*   访问主页或任何类别页面、产品页面或 cms 页面并没有什么不同。
*   刷新 /var/sessions 后，前端再次可用。

所以，我已经做了什么：

*   我认为这与权限无关，因为这些设置正确。我运行了 Magento-Cleanup.php 几次，这并没有改变或帮助。
*   我检查了htaccess中的设置。这些似乎都不错。
*   SID 已关闭。有或没有 SID 没有区别
*   日志显示没有可能导致此问题的问题。

帮助！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-15T09:39:40.250

你能改变你的 PHP 设置以使用 Apache 而不是 fastCGI 吗？我以前在某些服务器上使用 FastCGI 看到过这个错误

# c# - 使用 LINQ 从数组中查询 Int Id

> ID：11030522
> 
> 赞同：10
> 
> 时间：2012-06-14T09:45:14.680
> 
> 标签：c#, linq

我有一组 Id，我想通过 Linq 查询将其传递给实体框架以返回任何匹配项

我编写了可以将 Id 转换为字符串并使用“包含”运算符的 Linq 查询，例如：

模型

```
public class Order {
  public long OrderId { get; set; }
  public string Name { get; set; } ...}

Order[] orders = { new Order { OrderId = 123, Name = "Order1" }, new Order {...},...}; 
```

我可以使用类似的东西：

```
long[] testArray = {123, 456}; 
```

进而

```
var result = orders.Where(i => testArray.ToString().Contains(i.OrderId.ToString())); 
```

但我真的需要继续将 Id 转换为字符串吗？如果我将它们保留为整数，似乎我无法访问“包含”。

最终，我希望能够将其用作访问实体框架的查询的一部分，因此将查询作为 IQueryable<> 的一部分传递，以确保当我只想要一把时我不会返回大量数据，例如作为：

```
var orders = _repo.Orders().Where(i => orderArray.Contains(i.OrderId)); 
```

因此，如果通过 EF 查询参数（int 数组）而不是获取所有数据然后在内存中检查它，那么任何解决方案都会很有用。

干杯!

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-14T09:48:54.257

> 但我真的需要继续将 Id 转换为字符串吗

绝对不。目前尚不清楚是什么`bars`，但假设它确实应该是`orders`，您可以使用：

```
var result = orders.Where(i => testArray.Contains(i.OrderId)); 
```

或执行连接：

```
var result = orders.Join(testArray, o => o.OrderId, id => id, (o, id) => o); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:52:40.937

您可以改用 Intersect 运算符，为什么要使用数组而不是列表？代码示例：

```
 public class Order {
  public long OrderId { get; set; }
  public string Name { get; set; }}

    public class Rep
    {
        private List<Order> orders { get; set; }

        public void Q()
        {
            long[] testArray = {123, 456};
            var res  = orders.Intersect(orders);
        }
    } 
```

# cakephp - CakePHP 递归查找方法

> ID：11030523
> 
> 赞同：0
> 
> 时间：2012-06-14T09:45:15.710
> 
> 标签：cakephp

在我的 CakePHP 应用程序中，我有以下模型关联：

> 优惠 -> 订单 -> 优惠券

然后，在`OffersController.php`，我需要编写一个 find 方法来输出每个优惠所售出的优惠券数量，假设某些订单可以有多个优惠券。

问题是我在 中`OffersController`，所以当我尝试使用时`find('count')`，我只会得到优惠条目的数量。我想计算优惠券条目的数量。

我试图做类似的事情`$this->Offer->Order->Coupon->find('count')`，但它不起作用。

我也尝试使用 ContainableHelper，但遇到了计算错误条目的相同问题。

我该如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:14:10.687

`COUNT`您需要生成的 SQL 查询来使用和做一些魔术`GROUP BY`。尝试添加这样的字段（未经测试）：

```
$this->Offer->Order->Coupon->find(
     'all',
     array(
        // Generate a field that counts the coupons per Order
        'fields' => array(
            'COUNT(Coupon.id) AS coupon_count'
        ),
        // Only look at Orders for the given Offer
        'conditions' => array(
            'Order.offer_id' => $id
        ),
        // This is important: group by Order.
        'group' => ('Coupon.order_id')
     )
); 
```

如果您的 Order -> Coupon 具有简单的 hasMany 关系，则更方便的方法是使用额外`coupon_count`字段和[counterCache 函数跟踪每个 Order 记录中现有的 Coupon 计数。](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)CakePHP 可以自动为您更新该计数器字段。

# python - 如何在 IPython 中为 markdown 链接设置基本 url？

> ID：11030525
> 
> 赞同：3
> 
> 时间：2012-06-14T09:45:22.713
> 
> 标签：python, html, markdown, ipython

我很高兴地设置

```
<head>
<base href="http://complex_url_to_local_wiki:port/path/" target="_blank" />
</head> 
```

在我的 IPython html 笔记本（IPython 0.12）的 Markdown 单元格中，以便能够像`[wiki documentation](doc.html)`Markdown 单元格一样缩写链接。

但这使得保存笔记本变得不可能（保存由 恢复`<base href='/'/>`）。

有什么（替代）方法可以实现我的目标吗？我知道如何通过使用`IPython.core.display.HTML`[1] 从 Python 代码生成 URL，但是内联 Markdown 文档中的链接要方便得多

谢谢，

阿尔瓦罗。

[1] 从 Python 生成链接的非最佳解决方案粘贴在下面，以防它对某人有用或您有改进建议

```
def wurl(x, text="Node {} in wiki",
            baseurl="http://complex_url_to_local_wiki:port/path/{}"):
    """Render a link on a base URL as html."""

    from IPython.core.display import HTML
    url_t = '<a href="{baseurl}" target="_blank">{text}</a>'
    return HTML(url_t.format(baseurl=baseurl.format(x), text=text.format(x))) 
```

# php - 如何确定使用 PHP 下载需要多长时间？

> ID：11030530
> 
> 赞同：2
> 
> 时间：2012-06-14T09:45:43.417
> 
> 标签：php, time, download

我已经在不同地理位置的 2 台服务器上上传了同一个文件，现在，我想计算使用 PHP 分别下载它们所需的时间。有什么解决办法吗？
例如我需要有这样的东西：

> 您的下载将持续大约 30 秒。从服务器＃1，从服务器＃2 50 秒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:06:05.880

您实际上是在尝试通过您正在做的事情来编写内容分发网络 (CSN)。

CDN 本质上极其复杂，并且使用多种策略来确定传输数据的最短路径。

实现这种方式的一种简单的服务器端方法可能是使用 IP 地址对用户进行地理定位，从而允许您确定用户所在的国家或城市。然后您可以将用户重定向到离他们最近的服务器。

如果您想从多台服务器计算时间，您可以通过使用客户端从两台服务器下载一个小文件并使用传输时间来计算带宽来实现此目的。

**使用 AJAX 计算时间**

我假设您使用的是 jquery，但您可以使用prototypeJS 等轻松地做到这一点。

```
var date = new Date();
var startTime = date.getMilliseconds();

//Known file size in KB
var fileSize = 100;

$.ajax({
  url: "http://www.example.com"
}).done(function() { 
    alert(calculateBandwidth());
});

function calculateBandwidth(){
    var date = new Date();
    var end = date.getMilliseconds();
    var secondsTaken = (end - start)/1000;
    var KBps = fileSize/secondsTaken;
    return KBps;
} 
```

请注意，这是每秒千字节。千位将是 (filesize*8)/secondsTaken

# javascript - keypress 和 keyup - 为什么 keyCode 不同？

> ID：11030532
> 
> 赞同：50
> 
> 时间：2012-06-14T09:46:01.433
> 
> 标签：javascript, keyboard

相关：[JavaScript KeyCode 与 CharCode](https://stackoverflow.com/questions/4285627/javascript-keycode-vs-charcode-utter-confusion)

这是一些您可以在家中或在[jsfiddle](http://jsfiddle.net/Ralt/7zSUw/4/)中尝试的代码：

```
el.addEventListener( 'keyup', function( e ) { 
    console.log( 'Keyup event' );
    console.log( e.keyCode );
} ); 
el.addEventListener( 'keypress', function( e ) { 
    console.log( 'Keypress event' );
    console.log( e.keyCode );
} ); 
```

为什么 keyCode 不同？

我可以理解为什么一个人应该只使用按键，但我不明白的是，在给定键盘上相同的按键的情况下，两个按键事件如何给出不同的 keyCodes。

PS：我不担心旧版浏览器的支持，我在 Chrome 中尝试过，很惊讶，但找不到解释。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-14T10:00:45.990

这些事件的目的完全不同。使用`keyup`和`keydown`来识别物理键和`keypress`识别键入的字符。两者是具有不同事件的根本不同任务；不要试图将两者混为一谈。特别是，`keyCode`on`keypress`事件通常是多余的，不应该使用（旧版 IE 除外，但请参阅下面的链接文档了解更多信息）；`which`对于可打印的按键，它通常与和相同`charCode`，尽管浏览器之间存在一些差异。

[Jan Wolter 关于 key events 的文章](http://unixpapa.com/js/key.html)已经链接到另一个答案，对我来说是这个主题的权威词，并且有表格描述了每种类型的关键事件和每个浏览器的每个不同属性返回的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T09:51:26.437

[quirksmode.org 上](http://www.quirksmode.org/js/keys.html)有一篇很好的文章准确地回答了这个问题。您可能还想查看[Unixpapa 的结果](http://unixpapa.com/js/key.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-02T22:58:24.697

好吧，当我试图将用户的输入从表单的一个输入复制到表单的其他部分时，我偶然发现了一个差异，我已将其锁定以供用户编辑。我发现，每当用户在完成输入后使用键移动到下一个标签时，当我使用 eventListener 按键时，复制的条目中会丢失最后一个键盘条目，这在使用 keyup 时得到解决。

因此，总而言之， Keypress 会在按键被按下的瞬间监听状态，而将 keypress**的结果放在一边**，而 keyup 会在按键被按下后监听系统状态并**包括按键的结果。**

# android - 安卓闹钟不工作

> ID：11030534
> 
> 赞同：3
> 
> 时间：2012-06-14T09:46:07.470
> 
> 标签：android, android-alarms

我正在做一个警报应用程序，我使用我在互联网上找到的示例代码，但它不起作用，我不知道为什么。

这是我的 AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="iiriondo.activity"
  android:versionCode="1"
  android:versionName="1.0">

<application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".LoginActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver android:name=".OnAlarmReceiver" ></receiver>

</application>
</manifest> 
```

这里听警报的类：

```
public class OnAlarmReceiver extends BroadcastReceiver{

private static int NOTIFICATION_ID = 1;

@Override
public void onReceive(Context context, Intent intent) {

    Toast.makeText(context, "La Alarma está sonando",Toast.LENGTH_LONG).show();

}

} 
```

最后我使用此代码设置警报：

```
 Intent intent = new Intent(getApplicationContext(),OnAlarmReceiver.class);
 PendingIntent pendingIntent = PendingIntent.getBroadcast(getApplicationContext(), 0, intent, 1);
 AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
 alarmManager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()+ (5 * 1000), pendingIntent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:13:09.237

您的代码非常好。

只有确保您的 java 文件位于同一个包中`package="iiriondo.activity"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:55:48.503

写在意图代码下面而不是你的意图代码。

```
Intent intent = new Intent(MainActivity.this, OnAlarmReceiver.class);
PendingIntent pendingIntent = PendingIntent.getBroadcast(MainActivity.this, 192837, intent, PendingIntent.FLAG_UPDATE_CURRENT);
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
alarmManager.set(AlarmManager.RTC_WAKEUP,System.currentTimeMillis() + (5 * 1000),pendingIntent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T09:58:00.443

可以尝试通过传递“this”来代替 getApplicationContext()

```
new Intent(this,OnAlarmReceiver.class); 
```

# jquery - 如何在 JsTree 中重新打开节点时刷新子节点？

> ID：11030543
> 
> 赞同：2
> 
> 时间：2012-06-14T09:46:28.737
> 
> 标签：jquery, jstree

我在 JQuery JsTree 插件中为子节点使用 ajax 加载。如果我在 Web 浏览器中重新打开加载的节点，我需要刷新所有子节点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T01:21:19.653

您可以使用类似这样的方法，在关闭时将新类添加到节点，导致节点在打开时刷新。如果班级在场。因此，您可以删除 on close_node 部分并为需要在打开时刷新的节点添加您自己的类名

```
$(function () {
    var tree_id="#jstree"
    var ajax_again="to-be-refreshed";

    $(tree_id).bind("open_node.jstree close_node.jstree", function (e,data) {
        var currentNode = data.args[0];
        if(e.type === "close_node") {
            currentNode.addClass(ajax_again);
        }   
        if(e.type === "open_node") {
            if (currentNode.hasClass(ajax_again)) { 
                var tree = $.jstree._reference(tree_id);
                tree.refresh(currentNode);
            }  
        }
    })  .jstree({ 
```

或者您可以在所有节点都在打开时刷新时使用简化版本

```
$(function () {
    var tree_id="#jstree"

    $(tree_id).bind("open_node.jstree close_node.jstree", function (e,data) {
        var currentNode = data.args[0];
        if(e.type === "open_node") {
            var tree = $.jstree._reference(tree_id);
            tree.refresh(currentNode);
        }
    })  .jstree({ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-21T07:48:07.377

我找不到执行此操作的 jstree API，因此我查看了源代码。

如果您使用`children: true`，它将在第一次打开时使用点击加载。它会检查`node.state.loaded`是否第一次加载它。

所以这个事件处理程序对我很有效：

```
 .on('after_close.jstree', function (event, data) {
            // Flag it to be reloaded on reopen:
            data.node.state.loaded = false;
        }); 
```

该`after_close.jstree`事件在关闭动画完成时发生。

谢谢！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-14T09:56:38.210

以上代码都不适合我。下面是我的代码，它可以工作：

```
$('.tree-container').on('close_node.jstree', function (event, data) {
    var tree = $.jstree.reference('.tree-container');
    tree.refresh(data.node);
}); 
```

# linux - 脚本查杀进程过长

> ID：11030544
> 
> 赞同：0
> 
> 时间：2012-06-14T09:46:35.180
> 
> 标签：linux, bash, shell, process

我是一个虚拟主机所有者，我现在不知道为什么，但是我有一些 php 脚本启动了好几个小时（作为个人已知的客户），所以我认为某处存在错误。

这些脚本正在消耗 RAM 和交换...所以我正在寻找一种方法来列出进程，找到执行时间，如果执行时间超过 10 或 20 分钟，则一个接一个地杀死它们。

我不是 bash 大师，但我知道 bash 和管道。我唯一不知道的是如何列出进程（执行时间和带有参数的完整命令行）。实际上，即使在顶部（然后是 c）中，php 中也没有参数：/

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T10:33:06.740

如果您使用 mod_php 运行 Apache，您将看不到单独的 PHP 进程，因为该脚本实际上是在 Apache 进程中运行的。如果您作为 FastCGI 运行，您也可能看不到实际脚本执行的可区分 PHP 进程，尽管我没有使用 PHP/FastCGI 的经验并且可能在这方面是错误的。

您可以设置该[`max_execution_time`](http://www.php.net/manual/en/info.configuration.php#ini.max-execution-time)选项，但[`set_time_limit()`](http://www.php.net/manual/en/function.set-time-limit.php)除非您在[Safe Mode 下](http://www.php.net/manual/en/ini.sect.safe-mode.php#ini.safe-mode)运行，否则它可以在运行时通过调用来覆盖。然而，安全模式已在 PHP 5.3 中被弃用并在 5.4 中*被删除*，因此如果您使用 5.4 或计划升级，则不能依赖它。

如果您可以与现有客户一起管理它（因为在某些情况下，它需要对 PHP 代码进行重大更改），[将 PHP 作为 CGI 运行](http://www.php.net/manual/en/install.unix.commandline.php)应该允许您监控实际的脚本执行，因为每个 CGI 请求都会产生一个单独的 PHP 解释器进程并且您应该能够区分它们正在执行的脚本。但是请注意，CGI 是最不有效的设置（其他是 mod_php 和 FastCGI）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:57:45.533

您可以使用该`ps -aux`命令列出包含一些详细信息的进程。

您还可以查看[`ps`手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?ps)。

[这](https://stackoverflow.com/questions/6134/how-do-you-find-the-age-of-a-long-running-linux-process)也可能会有所帮助。

# c# - 将 LINQ to XML 与来自 SQL Server 的 xml 响应一起使用

> ID：11030545
> 
> 赞同：0
> 
> 时间：2012-06-14T09:46:35.600
> 
> 标签：c#, asp.net, linq, tsql, linq-to-xml

我在使用 LINQ TO XML 和 XMLReader 时遇到问题。问题是我无法将 XMLReader 响应加载到 LINQ 对象中并始终获取空对象，并且没有将对象设置为对象异常的实例。

代码：

```
XmlReader xDr = SqlHelper.ExecuteXmlReader(
                                            new SqlConnection(ConnectionString),
                                            CommandType.StoredProcedure,
                                            "SP"
                                           );

XDocument xDoc = XDocument.Load(xDr);
            var Jobs = from Job in xDoc.Descendants("Job")
                       select new {...} 
```

我现在将 xml 从服务器获取到 XmlReader，但是当我查看 xDoc 对象时，它是空的....

有人能帮忙吗？

谢谢你，埃雷兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:41:57.313

找到了答案....对不起，伙计们，问题不在于加载，这是我得到的结果，但问题在于 XML 中的一些属性，我错过了注意到某些工作中缺少的地方。 ...

现在一切正常。

谢谢你，埃雷兹

# java - 何时在 java 中打包私有（无显式修饰符）？

> ID：11030546
> 
> 赞同：2
> 
> 时间：2012-06-14T09:46:36.290
> 
> 标签：java, class-visibility

我一直在阅读教程[Controlling Access to Members of a Class](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)。我很困惑什么可能是使用包私有的好用例。因为据我了解，您始终可以将您的包声明更改为此类的任何包声明，并将其视为公共类。我知道这不是一件好事，但什么阻止了我？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T09:51:00.500

> ***因为据我了解，您始终可以将您的包声明更改为此类的任何包声明，并表现得好像这是一个公共类***

好吧，一方面，访问修饰符可以*帮助*开发人员。总有办法绕过它们，例如[通过反射](https://stackoverflow.com/questions/880365/any-way-to-invoke-a-private-method)。

> ***我知道这不是一件好事，但什么阻止了我？***

真的不多！

但是，作为开发人员，您可以在**密封的 .jar 文件**中分发您的类，这基本上意味着您不会让其他任何人进入您的包。

从[密封 JAR 文件中的包](http://docs.oracle.com/javase/tutorial/deployment/jar/sealman.html)

> **在 JAR 文件中密封包**
> 
> JAR 文件中的包可以选择密封，这意味着该**包中定义的所有类都必须归档在同一个 JAR 文件**中。例如，您可能希望密封一个包，以确保软件中类之间的版本一致性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-14T10:08:26.120

使用包私有类/方法的几个原因：

1.  实现类是库的一部分，但不是库 API 的一部分。这允许您仍然拥有模块化代码，并向 API 用户表明实现类不用作 API 的一部分。
2.  使东西可用于测试。有时（特别是在使用遗留代码时）您需要使类或成员更加可见，以便您可以更轻松地对它们进行单元测试。一个示例可能是使用执行资源密集型操作的方法测试一个类，您希望在测试中使用无操作版本覆盖该方法。另一个例子是只在一个地方使用的类：它不希望对整个应用程序可见，但需要进行单元测试。

在这两种情况下，使用包私有可见性有助于使您的代码更易于使用（使用它的人对类/成员的预期用途有更好的了解），同时允许您仍然拥有模块化代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T09:51:43.020

关于“是什么阻止了我”：

Java 安全机制可能会阻止您。*如果*“目标”包被密封和签名，那么 Java 将不允许除原始包之外的任何源在该包中声明类。

# java - 特定目录中的java servlet下载文件

> ID：11030551
> 
> 赞同：0
> 
> 时间：2012-06-14T09:47:02.110
> 
> 标签：java, html, servlets, download

我想知道是否可以从servlet下载文件并直接将其保存在客户端的特定目录中（不要求用户选择保存文件的目录，实际上不提示任何内容）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:52:32.850

**No**, That will break the security, by the way how would server know about the client file system ?

# linux - 点文件中的“rc”是什么意思

> ID：11030552
> 
> 赞同：375
> 
> 时间：2012-06-14T09:47:06.330
> 
> 标签：linux, rc

在我的 Linux 主文件夹中，我有几个以“rc”作为文件扩展名的配置文件：

```
$ ls -a ~/|pcregrep 'rc$'
.bashrc
.octaverc
.perltidyrc
.screenrc
.vimrc 
```

这些名称中的“rc”是什么意思？

* * *

## 回答 #1

> 赞同：375
> 
> 时间：2012-06-14T09:50:29.497

It looks like one of the following:

*   run commands
*   resource control
*   run control
*   runtime configuration

* * *

Also I've found a [citation](http://www.catb.org/~esr/writings/taoup/html/ch10s03.html):

> The ‘rc’ suffix goes back to Unix's grandparent, CTSS. It had a command-script feature called "runcom". Early Unixes used ‘rc’ for the name of the operating system's boot script, as a tribute to CTSS runcom.

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-06-14T09:53:56.733

运行时配置通常在`config`目录中。我认为它们是资源文件。如果您`rc`在文件名中看到这可能是版本，即候选版本。

**编辑**：不，我正式收回......“运行命令”

> [Unix：来自 CTSS 系统 1962-63 上的 runco​​m 文件，通过启动脚本 /etc/rc]
> 
> 包含应用程序（或整个操作系统）的启动指令的脚本文件，通常是一个文本文件，其中包含可能在系统运行时手动调用但每次系统启动时自动执行的命令。
> 
> 因此，“rc”部分似乎代表“runco​​m”，我相信它可以扩展为“运行命令”。事实上，这正是文件包含的内容，bash 应该运行的命令。

**引**自[.bashrc 中的“rc”代表什么？](https://unix.stackexchange.com/questions/3467/what-does-rc-in-bashrc-stand-for)

我学到了新东西！:)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-08-01T06:43:06.193

> 在类 Unix 系统的上下文中，术语**rc 代表短语“运行命令”。它用于任何包含命令启动信息的文件**。据信它起源于 1965 年的某个地方，来自 MIT 兼容分时系统 (CTSS) 的一个运行通信设施。

参考：[https ://en.wikipedia.org/wiki/Run_commands](https://en.wikipedia.org/wiki/Run_commands)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-07-04T03:07:54.390

在 Unix 世界中，RC 代表“运行控制”。

[http://www.catb.org/~esr/writings/taoup/html/ch10s03.html](http://www.catb.org/~esr/writings/taoup/html/ch10s03.html)

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2017-01-20T05:02:52.820

要了解 rc 文件，了解 Ubuntu 引导到几个不同的*运行级别会有所帮助。*它们是 0-6，0 表示“暂停”，1 表示“单用户”，2 表示“多用户”（默认运行级别），等等。这个系统现在已经被大多数 Linux 中的*Upstart*和*initd*程序过时了发行版。它仍然保持向后兼容性。

该`/etc`目录中有几个文件夹，从 rc6.d 到标记为“rc0.d、rc1.d”等。这些是内核引用的目录，以了解它应该为该运行级别运行哪些*初始化脚本。*它们是驻留在`/etc/init.d`目录中的系统服务脚本的符号链接。

在您使用它的上下文中，您似乎正在列出名称中带有 rc 的任何文件。这些文件中的代码将设置服务/任务在初始化时启动和运行的方式。

# gps - 使用 GPGSV NMEA 消息处理方位角、仰角和 SNR 的哪个值？

> ID：11030555
> 
> 赞同：0
> 
> 时间：2012-06-14T09:47:10.983
> 
> 标签：gps, elevation, nmea, azimuth

我正在研究 GPS 的解析逻辑。我正在尝试解析 GPGSV 消息，我能够找到 12 颗卫星的 4 个参数的信息，如 PRN、SNR、方位角和仰角。但我不确定这 12 个值中的哪一个是要发送的有效信息。而且我不确定，如果我计算这些值的平均值，是否可以使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:21:43.780

它们都是有效的。如果您想总结信息，那么我会建议报告的卫星数量和平均 SNR。

# java - 使用滚动条清除屏幕（Java）

> ID：11030557
> 
> 赞同：1
> 
> 时间：2012-06-14T09:47:12.810
> 
> 标签：java, swing, console-application, jscrollpane

我正在浏览[这个线程](https://stackoverflow.com/questions/1682212/clear-screen-option-in-java#1682278)，我想知道，我们是否可以使用滚动条来做到这一点？

[How to Use Scroll Panes](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)描述了如何使用滚动条来做事。如果我正在为 Linux 操作系统使用 Java 制作基于终端的应用程序，那么我不能使用将终端旋钮/滚动条进一步向下移动的代码吗？我的意思是，这就是 BASH“清除”的工作方式，对吧？那么，也许这个基于控制台的 Java 应用程序可以将控制台向下滚动并假装清除屏幕？

现在，我的问题是我无法在这个“滚动窗格 API”文档中找到任何可以帮助我做到这一点的类。如果有人以前使用过此 API 可以帮助我，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:07:19.517

> ..也许我们可以使用滚动条来做到这一点？

不可以。您不能“将 CLI 包装在一个`JScrollPane`（或添加任何`JScrollBar`实例）中”。它是一个本机组件，不受 Java 的控制（超出文本输出）。

# ios - iOS 在一段时间后开始寻找 image~ipad.png 而不是 image.png

> ID：11030564
> 
> 赞同：0
> 
> 时间：2012-06-14T09:47:29.953
> 
> 标签：ios, image, ipad, xib

我有一个非常奇怪的问题：一段时间后，我的 UI 中使用的图像停止在我的 iPad 上显示（不是全部，只有 80%）。

我用仪器检查过，没有内存泄漏，应用程序的总分配为 5MB，所以内存应该不是问题。

我正在使用名为 SomeViewController~ipad 的 xib。

当我使用仪器检查 I/O 活动时，我注意到应用程序停止查找 background.png 但会查找 background~ipad.png 并返回“没有此类文件或目录”错误。

我能做些什么来防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:06:34.420

最后我发现这是 iOS 5.0.x 版本中的某种错误。升级到 5.1.1 后，该错误消失了。

# jquery - 使用 jquery 我无法使链接正常工作并为锚点的背景设置动画

> ID：11030567
> 
> 赞同：1
> 
> 时间：2012-06-14T09:47:54.803
> 
> 标签：jquery, html

使用 jquery，我无法使链接正常工作并为锚点的背景设置动画。似乎其中一个或另一个有效。

这是标记：

```
 <ul class="nav">
   <li> <span id="background"> </span><span id="active"></span><a href="page1.html"     
   class="active">page 1</a> </li>
   <li> <a href="page2.html">page 2</a> </li>
   </ul> 
```

这是点击动作发生但不是动画效果的jquery代码：

```
$("ul.nav a").click(function () {
     $("span#background").fadeIn(800, function () {});
     $("#active").animate({left: "+=2410"}, 950)     
   }); 
```

“跨度”元素通过 css 具有背景图像，动态放置在活动列表元素中。因此，活动链接会获得背景和动画图像。插入“return false;”时 在 jquery 代码的末尾，动画确实运行但单击动作被杀死。

这是最基本的测试页： [链接到测试页](http://www.vuyk.eu/testsite/page1.html)

感谢任何可以提供帮助的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:34:18.273

我查看了您上面的**代码片段**以及您的**测试页**，问题是您希望单击一下，允许锚点跟随 href 并同时显示动画。

有一个更好的解决方案。`.hover()`那是通过 jQuery方法在鼠标悬停期间发生动画。参考[**这里**](http://api.jquery.com/hover/)

**使用.hover** ()的测试页示例在这里：[**jsFiddle**](http://jsfiddle.net/jgPF8/)

我冒昧地对动画进行了一些更改，但是您应该了解这个想法以及我为理解流程/概念而发表的许多评论。

如果该`.hover()`方法不可接受，那么仍然可以对所有内容使用单个 onclick，但是在鼠标悬停期间不会发生动画。这个[**jsFiddle 改为**](http://jsfiddle.net/UmnEC/1/)使用`.click()`。

因为`.hover()`然后用于动画，所以`anchor tag`点击后仍然可以正常运行。

# visual-studio-2010 - 在 TFS 2010 中编辑构建定义

> ID：11030569
> 
> 赞同：1
> 
> 时间：2012-06-14T09:48:02.700
> 
> 标签：visual-studio-2010, build-definition

当我尝试编辑构建时，主要是为了安排它，Visual Studio 2010 崩溃。

它给出了错误：`an unhandled win32 exception occurred in devenv.exe(5692)`

有人知道这是什么一回事吗？

尝试过创建一个新的构建定义，但得到相同。

使用 TFS 2010 和 VS Professional 2010。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:12:02.857

Microsoft 提供的以下修补程序可能会有所帮助：

[http://connect.microsoft.com/VisualStudio/feedback/details/650386/vs2010-sp1-crashes-on-build-details-from-team-foundation-server-2008-build-explorer](http://connect.microsoft.com/VisualStudio/feedback/details/650386/vs2010-sp1-crashes-on-build-details-from-team-foundation-server-2008-build-explorer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:16:21.793

要验证其中一个扩展是否可能导致崩溃，请使用[Devenv 命令行开关](http://msdn.microsoft.com/en-us/library/xee0c8y7.aspx)：

[`devenv /ResetSettings`](http://msdn.microsoft.com/en-us/library/ms241273)和[`devenv /SafeMode`](http://msdn.microsoft.com/en-us/library/ms241278.aspx)

# ruby-on-rails - 将个人资料与多个横幅相关联的最佳方式

> ID：11030570
> 
> 赞同：1
> 
> 时间：2012-06-14T09:48:09.937
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我正在寻找一个应用程序，允许我将多个个人资料图片与多个广告相关联。

我相信这将是一个 has_and_belongs_to_many 关联，因为我希望一个广告具有多个配置文件，并且配置文件可以属于多个广告。但是，我对这将如何与我的数据库表一起使用感到有些困惑。

如果广告在我的广告表中有一行，那么它将如何将多个个人资料图片（存储在我的个人资料表中）关联到一个 profile_id 单元格中？我是否需要设置一个单独的第三个模型和数据库表来处理关联的那些？

我也很困惑是否必须设置嵌套资源以使 HABTM 关联成功运行 - 目前我将它们分开如下：

```
 resources :ads
 resources :profiles 
```

很抱歉这个基本问题，但我似乎找不到任何有助于解决我的问题的信息，而且关于 HABTM 协会的 rails 指南很短。

提前感谢您提供的任何帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:56:21.240

当您创建 HABTM 关联时，您必须手动创建关联表。在您的情况下是 ads_profiles。

```
rails g migration create_table_ads_profiles 
```

此表将包含 ad_id 和 profile_id，您现在可以在其中关联多条记录。还有一个问题，在迁移时，不要忘记添加一个 :id => false 给它

```
class CreateTableAdsProfiles < ActiveRecord::Migration
  def change
    create_table :ads_profiles, :id => false do |t|
      t.integer :ad_id
      t.integer :profile_id
    end
  end
end 
```

如果您还有其他问题，请随时提问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:02:13.623

你不需要嵌套资源来让它“工作”。您确实需要另一个将您的模型连接在一起的表，名为 ads_profiles（复数并按约定按字母顺序排列）。该表包含两列（ad_id 和 profile_id）。使用广告对象，您可以获得配置文件 (ad.profiles)，使用配置文件可以获得广告 (profile.ads)。

这会让你开始： http: [//guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

~查尔斯~

# jquery - if span is found then how to find its current tr and make that tr yellow

> ID：11030580
> 
> 赞同：0
> 
> 时间：2012-06-14T09:48:46.207
> 
> 标签：jquery, html, css

i am finding span text throughout table using below code. i have to find span text for current tr and background that tr with yellow

```
 $("#tableAppointment tr").each(function ()
                        {

                            $('td', this).each(function ()
                            {
                                var value = $(this).find("span").text();

                                if (!value)
                                {

                                } else
                                {
                                    $(this).parent().prev('tr').css('background', 'yellow');

                                }

                            })

                        })

                        return false;
                    });

<table id="tableAppointment" cellspacing="1" width="50%" bgcolor="#cccccc" align="center">
        <thead>
            <tr>
                <td bgcolor="#ffffff" width="70px">
                </td>
                <td class="csstablelisttd" width="70px">
                    <b>Time Slot&nbsp;</b>
                </td>
                <td class="csstablelisttd">
                    <b>&nbsp;Patient Name</b>
                </td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="csstablelisttd" valign="top" width="70px">
                    8:00AM
                </td>
                <td class="csstablelisttd">
                    0
                </td>
                <td class="csstablelisttd">
                    <span></span>
                </td>
            </tr>
            <tr>
                <td class="csstablelisttd">
                </td>
                <td class="csstablelisttd">
                    15
                </td>
                <td class="csstablelisttd">
                    <span></span>
                </td>
            </tr>
            <tr>
                <td class="csstablelisttd">
                </td>
                <td class="csstablelisttd">
                    30
                </td>
                <td class="csstablelisttd">
                    <span></span>
                </td>
            </tr>
            <tr>
                <td class="csstablelisttd">
                </td>
                <td class="csstablelisttd">
                    45
                </td>
                <td class="csstablelisttd">
                    <span></span>
                </td>
            </tr></tbody>
    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:49:52.523

Try this;

```
$('tr').has(this).css('background', 'yellow'); 
```

**[Working sample](http://jsfiddle.net/yj9KM/3/)**

**OR**

```
$(this).closest('tr').css('background', 'yellow'); 
```

**[Working sample](http://jsfiddle.net/yj9KM/2/)**

**OR**

```
 $(this).parent().css('background', 'yellow'); 
```

**[Working sample](http://jsfiddle.net/yj9KM/7/)**

# javascript - 引用其他页面上的对象

> ID：11030584
> 
> 赞同：1
> 
> 时间：2012-06-14T09:49:00.307
> 
> 标签：javascript, iframe

我已经编写了一个删除 iFrame 的函数，但是我要删除的 iFrame 在另一个 php 脚本中被调用。我想知道如何参考这个脚本。这是 iFrame 在同一脚本中时的代码：

```
function removeFrame(framename,action){
    iFrameObject = document.getElementById(framename);
    iFrameObject.style.display = action;
} 
```

所以我想要'otherpage.php.document.getElementbyId(framename)'之类的东西，但我真的不知道该怎么做..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:36:21.147

在我回答你的问题之前，我强烈建议避免这种情况 - 帧之间的通信 - 如果可能的话，因为它很快就会变得混乱。

但是，您可以通过对代码进行少量修改来完成您的要求。修改后的函数将在`iframe`从父窗口本身或从父窗口本身调用时。但请记住，窗口间通信受[相同来源策略](https://en.wikipedia.org/wiki/Same_origin_policy)的约束。

```
function removeFrame(framename,action){
    iFrameObject = window.parent.document.getElementById(framename);
    iFrameObject.style.display = action;
} 
```

此更改涉及指向 current`window`的父级，在这种情况下`iframe`是嵌入它的页面。当当前`window`没有真正的父窗口时，`window.parent`引用当前窗口（这解释了为什么这个函数在父页面或 iframe 中起作用）。

# xslt - XSLT 。使用 xsl:param 调用另一个模板

> ID：11030585
> 
> 赞同：0
> 
> 时间：2012-06-14T09:49:01.280
> 
> 标签：xslt

我是 xslt 的新手并试图创建一个 XSLT ，我正在调用另一个模板并将参数值传递给它但是不知何故，目标模板的参数变量中出现了空白值。

这是简化的示例 xml 文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<TCXML xmlns="http://www.tcxml.org/Schemas/TCXMLSchema">
 <BOMWindow elemId="id62" revision_rule="id60" top_line="id2">

    <GSIdentity elemId="id1" label="a00pC7EtM1CZ7D"/>

</BOMWindow>

 <IMAN_Drawing elemId="id78" owning_site="id4" primary_object="#id21" secondary_object="#id25" user_data="">

    <GSIdentity elemId="id50" label="R8D9sTvgBT4jNA"/>

</IMAN_Drawing>
  <IMAN_Drawing elemId="id79" owning_site="#id4" primary_object="#id22" secondary_object="#id26" user_data="">

    <GSIdentity elemId="id56" label="R8D9sTfVBT4jNA"/>

</IMAN_Drawing>
  <IMAN_Drawing elemId="id80" owning_site="#id4" primary_object="#id20" secondary_object="#id24" user_data="">

    <GSIdentity elemId="id44" label="R8A9sTu6BT4jNA"/>

</IMAN_Drawing>

<UGPART creation_date="2012-06-05T09:25:30Z" date_released="2012-06-05T09:25:33Z" ead_paragraph="" elemId="id117" format_used="PART" gov_classification="" object_name="Test"  owning_organization=""  >

    <GSIdentity elemId="id21" label="RXM9sPifBT4jNA"/>

</UGPART>
 <UGPART creation_date="2012-06-05T09:25:30Z" date_released="2012-06-05T09:25:33Z" ead_paragraph="" elemId="id117" format_used="PART" gov_classification="" object_name="Test2"  owning_organization=""  >

    <GSIdentity elemId="id20" label="R3K9sPifBT4jNA"/>

</UGPART>
 <UGPART creation_date="2012-06-05T09:25:30Z" date_released="2012-06-05T09:25:33Z" ead_paragraph="" elemId="id117" format_used="PART" gov_classification="" object_name="Test3"  owning_organization=""  >

    <GSIdentity elemId="id22" label="xuO9sPifBT4jNA"/>

</UGPART> 
```

在 XML 中有 3 个 IMAN_Drawing 标记和 3 个 UGPART 标记

这是我的xslt

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  xmlns:plm="http://www.tcxml.org/Schemas/TCXMLSchema" version="1.0">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
<xsl:template match="/plm:TCXML/plm:IMAN_Drawing">  
<xsl:copy>
    <xsl:copy-of select="@*" />
    <xsl:for-each select="/plm:TCXML/plm:IMAN_Drawing">
        <xsl:variable name="currentSecObjectId" select="@secondary_object"/>
        <xsl:variable name="RefSecObjectId" select="substring($currentSecObjectId,2)"/>
        <xsl:variable name="currentPrimaryObjectId" select="/plm:TCXML/plm:IMAN_Drawing/@primary_object"/>
        <xsl:variable name="RefPrimaryObjectId" select="substring($currentPrimaryObjectId,2)"/>
        <xsl:call-template name="UGPart">
            <xsl:with-param name="PriId" select="$RefPrimaryObjectId"/>
        </xsl:call-template>
    </xsl:for-each>

    <xsl:apply-templates/>  

</xsl:copy> 
</xsl:template> 
    <xsl:template match="/plm:TCXML/plm:UGPART" name="UGPart">
    <xsl:param name="PriId"/>
    <xsl:copy>
    <xsl:if test="@object_name="'Test'">
        <xsl:attribute name="owning_organization">
            <xsl:value-of select="$PriId"/>
        </xsl:attribute>        
    </xsl:if>
      <xsl:copy-of select="@*[not(name()='owning_organization')]" /> 
    <xsl:apply-templates /> 
    </xsl:copy>

</xsl:template>
</xsl:stylesheet> 
```

但输出是： owning_organization=""

预期结果是：它应该更新我从模板 1 传递的 owning_organization 属性，当它的 @object_name="'Test'" 时，UGPART 的 value = $RefPrimaryObjectId

这里出了什么问题？为什么 $RefPrimaryObjectId" 值没有出现在第二个模板中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:14:18.733

您应该真正提供预期的输出，否则很难理解您想要什么。我正在根据您提供的样式表对您的预期输出进行一些猜测。

我的意思不是不尊重，我只是想提供帮助，但是您的样式表指出了很多误解，与其选择我的解决方案（如下提供），从长远来看，放下笔可能会更好并阅读一些已发布的教程，或阅读一本书。

反正 ...

这个样式表...

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:plm="http://www.tcxml.org/Schemas/TCXMLSchema" >
<xsl:output method="xml" indent="yes"/>

<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="plm:IMAN_Drawing">
 <xsl:variable name="id" select="substring(@primary_object,2)" /> 
 <xsl:copy>
  <xsl:apply-templates select="@*"/>
 </xsl:copy>
  <xsl:for-each select="../plm:UGPART[plm:GSIdentity/@elemId=$id]" >
   <xsl:copy>
     <xsl:apply-templates select="@*[name()!='owning_organization' or ../@object_name!='Test']"/>
     <xsl:if test="@object_name='Test'">
      <xsl:attribute name="owning_organization"><xsl:value-of select="$id" /></xsl:attribute>
    </xsl:if>  
    <xsl:apply-templates select="node()"/>
   </xsl:copy>
 </xsl:for-each>  
</xsl:template >

<xsl:template match="plm:UGPART" />

</xsl:stylesheet> 
```

...当应用于您的样本输入时，将产生输出...

```
<?xml version="1.0" encoding="utf-8"?>
<TCXML xmlns="http://www.tcxml.org/Schemas/TCXMLSchema">
 <BOMWindow elemId="id62" revision_rule="#id60" top_line="#id2">
    <GSIdentity elemId="id1" label="a00pC7EtM1CZ7D" />
</BOMWindow>
 <IMAN_Drawing elemId="id78" owning_site="#id4" primary_object="#id21" secondary_object="#id25" user_data="" /><UGPART creation_date="2012-06-05T09:25:30Z" date_released="2012-06-05T09:25:33Z" ead_paragraph="" elemId="id117" format_used="PART" gov_classification="" object_name="Test" owning_organization="id21">
    <GSIdentity elemId="id21" label="RXM9sPifBT4jNA" />
</UGPART>
  <IMAN_Drawing elemId="id79" owning_site="#id4" primary_object="#id22" secondary_object="#id26" user_data="" /><UGPART creation_date="2012-06-05T09:25:30Z" date_released="2012-06-05T09:25:33Z" ead_paragraph="" elemId="id117" format_used="PART" gov_classification="" object_name="Test3" owning_organization="">
    <GSIdentity elemId="id22" label="xuO9sPifBT4jNA" />
  </UGPART>
  <IMAN_Drawing elemId="id80" owning_site="#id4" primary_object="#id20" secondary_object="#id24" user_data="" /><UGPART creation_date="2012-06-05T09:25:30Z" date_released="2012-06-05T09:25:33Z" ead_paragraph="" elemId="id117" format_used="PART" gov_classification="" object_name="Test2" owning_organization="">
    <GSIdentity elemId="id20" label="R3K9sPifBT4jNA" />
</UGPART>
</TCXML> 
```

如果我误解了您的预期输出，请告诉我们。

# tridion - 无法使用 Coreservice 创建组件

> ID：11030587
> 
> 赞同：2
> 
> 时间：2012-06-14T09:49:05.690
> 
> 标签：tridion, tridion-2011

我正在尝试使用以下代码使用 coreservice 创建组件，当我执行 exe 时，出现错误“无法找到 uuid:”“64c7e56a-161d-4698-a76b-7fd96227948d:Content”。

我已经打开了链接到这个组件的架构，我也在那里看到了这个 UUID。

截至目前，我只是试图通过提供硬线的文件夹、架构、标题来创建一个组件。

如果您能指导我如何在组件中添加字段值，那就太好了。（例如，假设我的架构中有一个“文本”字段链接到该组件，并且我想使用相同的程序在我的组件的该字段中添加“这是文本”。

你能帮我解决这个问题吗？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using DctmToSDLMigration.SDLCoreServiceReference;

namespace DctmToSDLMigration
{
    class Program
    {
        static DctmToSDLMigration.SDLCoreServiceReference.SessionAwareCoreService2010Client client = new SessionAwareCoreService2010Client();
        static ReadOptions readoptions = new ReadOptions();
        static void CreateComponent()
        {
            try
            {
                string TargetFolderTcmId = "tcm:148-1263-2";
                string LinkSchemaTcmId = "tcm:148-11460-8";
                ComponentData CurrentMigrationComponent = client.GetDefaultData(ItemType.Component, TargetFolderTcmId) as ComponentData;                
                LinkToSchemaData SchemaToUse = new LinkToSchemaData();
                SchemaToUse.IdRef = LinkSchemaTcmId.ToString();
                CurrentMigrationComponent.Schema = SchemaToUse ;
                CurrentMigrationComponent.Title = "Test component";
                client.Create(CurrentMigrationComponent, readoptions);                
                Console.WriteLine(CurrentMigrationComponent.Id);
                Console.ReadLine();
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
                Console.ReadLine();
            }
        }
        static void Main(string[] args)
        {
            CreateComponent();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T10:06:52.780

您需要设置组件的内容属性。

`XmlDocument doc = new XmlDocument();`

 ````
doc.LoadXml(string.Format(@"<Content xmlns='{0}'><Test>Hello</Test></Content>",     SchemaToUse.NamespaceUri));

CurrentMigrationComponent.Content = doc.DocumentElement; 
````

# ruby-on-rails-3 - 任何人都知道设计禁用 /users 路由的方法吗？

> ID：11030589
> 
> 赞同：1
> 
> 时间：2012-06-14T09:49:19.673
> 
> 标签：ruby-on-rails-3, devise, routes

是否可以禁用 /users 路由？我不希望任何人访问 /users

尝试了几种方法，例如：

```
 resources :users, :skip => [:users] do
    resources :profiles
    resources :account
  end 
```

用户模型是我设计的用于存储用户登录详细信息的模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:01:27.277

所以你不希望`/users/`其他路线`/users/:id/`等`/users/:id/profiles`仍然在这里？如果我是对的，那么您不希望`index`采取行动。所以你也是`resources :users, :except => [:index] do ...`

# r - 将二分图加载到 igraph

> ID：11030590
> 
> 赞同：0
> 
> 时间：2012-06-14T09:49:22.577
> 
> 标签：r, igraph

我有以下用于二分（两种模式）图的加权边列表，其中`A`和`B`是两种节点类型，并且`W`是边的权重......（只有 6 个节点`g`）

```
g <- read.table(text="

 A  B   W

 1  55  3
 2  55  5
 3  99  6 ",header=TRUE) 
```

我想在`igraph`. 然而，从这种格式加载图表并不简单。我正在使用 `tnet`它有一个很好的导出`igraph`功能，我通常使用它：

```
tnet_igraph(sample, type="weighted one-mode tnet") 
```

当我们有一个像`g`上面这样的加权二分图时，这会失败。`g`有没有一种直接的方法可以从into格式获取数据`igraph`？

如果人们喜欢与`igraph`绘制二分图不同的东西，其他选项是非常受欢迎的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T19:47:46.327

有一个调用的函数`graph.data.frame`似乎`igraph`可以为我加载表格：

```
> g
  A  B W
1 1 55 3
2 2 55 5
3 3 99 6
> g <- graph.data.frame(g)
> vcount(g)
[1] 5
> ecount(g)
[1] 3
> E(g)$W
[1] 3 5 6 
```

# codeigniter - Codeigniter datamapper is not loaded upon 404 overrides

> ID：11030599
> 
> 赞同：0
> 
> 时间：2012-06-14T09:50:05.813
> 
> 标签：codeigniter, codeigniter-datamapper

When a 404 override caused by nonexistent action (only action, not controller) is being handled by Codeigniter, the [datamapper](http://datamapper.wanwizard.eu/) fails to load, thus causing any database functionality impossible.

My usage case is: I want to register data about who/when/where encountered a 404 on the site.

Version info: codeigniter 2.1.0; datamapper 1.8.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:33:47.463

我认为问题在于 datamapper “扩展” db 类的方式。定义要使用的 db 类的名称的文件只包含一次，因此当重新构造 codeigniter 对象时，该名称保持未被覆盖。要解决此问题，您必须自费破解数据映射器文件。

第 143 行之后的文件“application/third_party/datamapper/system/DB.php”：

```
// load Datamappers DB interceptor class
require_once(APPPATH.'third_party/datamapper/system/DB_driver.php'); 
```

把这些行：

```
// HACK to make datamapper load correctly after codeigniter has been reconstructed in
// cases of invalid actions (404 overrides)
$driver = 'DM_DB_Driver'; 
```

# javascript - Chrome 和 IE 中的 ajaxing 怎么可能比 Mozilla 慢得多？

> ID：11030602
> 
> 赞同：5
> 
> 时间：2012-06-14T09:50:16.080
> 
> 标签：javascript, jquery, ajax

我想请您找出重点，为什么我正在开发的网站速度很慢。

问题的条件：

*   大行数（所以我认为问题可能与此有关。）
*   有 ajaxing 事件（我已经厌倦了评论它并且问题消失了）
*   使用非 Mozilla（这种冻结效果出现在 IE 和 Chrome 中）

问题描述（见图）：

*   我改变输入的值
*   在有一个ajax调用之后（为了计算奖金）并且**它需要大约30毫秒的FF，否则超过1秒**
*   在 ajax 完成之前会冻结（但 ajax 未设置为 async:false）
*   只有在那之后我才能更改下一个输入

我已经厌倦了重现错误，但我不能。所以请看原网站：

~~网站：foto/fotokidolgozas/elohivas-beallitasok.php~~

~~登录并通过：d838292@rtrtr.com~~

**更新**：它现在工作正常，诀窍如下：

我使用隐藏的输入字段，它们的值是 json_encode-d 字符串。我可以随时用js处理它们。

![在此处输入图像描述](../Images/8734c85651319f7d5c1100c213f5d333.png)

感谢您的任何帮助！

代码：

```
$('#cikkek,#magic_bar').on("change","select,textarea,input[type!=hidden]",function(event_object){
    if( $(this).attr('name') == "kijelolve" && !$(this).parents('#magic_bar').length)return true;

    var cikk_id = $(this).parents('.cikk').attr('id');
    var cikk_tipus = $("input[name=cikk_tipus]").val();
    var tulajdonsag = $(this).attr('name');     
    var ertek = $(this).val();
    if(ertek == "-1")return false;      
    if($(this).is('[type=checkbox]'))ertek = $(this).prop("checked")?'1':'0';

    if(cikk_tipus=='fotokidolgozas' && (tulajdonsag=='meret'||tulajdonsag=='vagas'))
        {
            var sor = $(event_object.target).parents('.cikk');
            var act_meret = sor.find('select[name=meret]').val();
            var act_fill = sor.find('select[name=vagas]').val();
            var act_zold_class = sor.find("input[name=zold_"+act_meret+"]").val()=="1" ?"zold":"feher" ;
            var name = "src_"+act_meret+"_"+act_fill;                   
            var name2 = "szoveges_uzenet_"+act_meret+"_"+act_fill;                  
            sor.find(".img_cont").find("img").attr("src",sor.find("input[name="+name+"]").val());   
            sor.find(".szoveges_uzenet").text(sor.find("input[name="+name2+"]").val());
            sor.find(".dpi_megfelel").text(sor.find("input[name=minoseg_"+act_meret+"]").val()+" ("+sor.find("input[name=dpi_"+act_meret+"]").val()+" dpi)");
            sor.find("select[name=meret]").removeClass("feher zold").addClass(act_zold_class);
        }

    var before = now();

    //this is the ajax part
    if(ajax_modositaskor)
    $.post('/_fn/cikk/mod.php',{
        'cikk_tipus':cikk_tipus,
        'cikk_id':cikk_id,
        'tulajdonsag':tulajdonsag,
        'ertek':ertek
        },function(a){
            var elapsed = now() - before;
            if(a[0]!="1")
            {
                //error
                alert(a[0]);
                return;
            }
            if(a[1]!="-1")
            {
                //there is new price
                $(event_object.target).parents('.cikk').find('.ar').text(a[1]);     
            }
            if(a[2]!="-1")$('#cikkek_ara').text(a[2]);
            osszegzest_frissit(a[3]);               
            var php_time = Math.round(a[4])
            a_min = Math.min(a_min,elapsed);
            p_min = Math.min(p_min,parseFloat(php_time));
            a_max = Math.max(a_max,elapsed);
            p_max = Math.max(p_max,parseFloat(php_time));
            if(!a_avg)a_avg = elapsed;else a_avg= Math.round((a_avg+elapsed)/2);
            if(!p_avg)p_avg = php_time;else p_avg = Math.round((p_avg+php_time)/2);             
            trace("ajax="+elapsed+"\tphp="+php_time+"\tajax_min="+a_min+"\tphp_min="+p_min+"\tajax_max="+a_max+" \tphp_max="+p_max+"\tajax_avg="+a_avg+" \tphp_avg="+p_avg);                

        },"json").error(function() { postHiba() });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:42:23.647

问题是隐藏数据太大（[见我的另一个问题](https://stackoverflow.com/q/11047383/669677)），它减少了处理时间。（Firefox 似乎编码良好，因为这无关紧要）

现在问题已解决。

# iphone - How to perform some Action on imageview clicked?

> ID：11030604
> 
> 赞同：1
> 
> 时间：2012-06-14T09:50:21.730
> 
> 标签：iphone, objective-c, ios

I'm working on a photo Collage application. I want to perform an action on image view so any one can help me to solve my problem. when i pick image from photo library and shown on image view after when double click on image view i want to push or present a new view to crop this image .....so anyone tell me what i do to solve my problem...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T09:53:26.407

使用自定义类型的 UIButton 并将图像放入其中。你完成了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T10:00:40.880

为 ImageView 添加手势

```
UITapGestureRecognizer *sg=[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(HandleEvent)];
    sg.numberOfTapsRequired=2;
    [BottomBar addGestureRecognizer:sg];
    [sg release]; 
```

并在这里完成您的任务：

```
-(void)HandleEvent
{

// your task
} 
```

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T09:52:36.017

You should use a UIButton instead of an UIImageView. You can set its style to custom and then asign it an image. UIButton provides all the methods for double tap already built in.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-21T05:55:29.380

如果你使用 UIImageView 类，首先设置 setUserInteractionEnabled:YES 。然后将 UITapGestureRecognizer 事件设置为图像视图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T09:53:14.283

制作一个按钮，并清除它的颜色。在按钮的背面，放置您的图像视图，以便您的图像视图似乎可见而按钮不可见。现在将事件附加到按钮。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-21T06:12:46.587

尝试这个

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
 CGPoint locationPoint = [[touches anyObject] locationInView:self.view];
    CGPoint viewPoint = [imageView convertPoint:locationPoint fromView:self.view];
    if ([imageView pointInside:viewPoint withEvent:event]) {
       //do something
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-14T09:55:49.370

如果您使用的是 UIImageView，请确保使用`setUserInteractionEnabled:YES`. 然后你需要在 touchesBegan,ended, (canceled) 中检查你的触摸。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-14T09:56:39.437

您已设置好使用 UIImageView，您必须继承 UIImageView 并覆盖您想要拦截的触摸方法。例如：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
   // Call super to make sure you don't lose any functionality
   [super touchesBegan:touches withEvent:event];

   // Perform the actions you want to perform with the tap.
} 
```

使用 UIButtons 作为 UIImageViews 的替代品是一个好主意，您只需将连接从每个按钮拖到视图控制器中的插座并处理操作即可。您可以像当前使用 UIImageViews 一样在按钮上设置背景图像。将您的按钮类型设置为自定义，您会很好

# google-app-engine - java.lang.NoClassDefFoundError: java.io.FileOutputStream is a restricted class

> ID：11030606
> 
> 赞同：3
> 
> 时间：2012-06-14T09:50:29.060
> 
> 标签：google-app-engine, gwt, gwt2

I am Using GWT SDK 2.4.0 Google appengine 1.6.3

I am trying to create a application where a file is uploaded to external repository.

The max size of file is 5 MB.

With help of formPanel, formupload and servlet i send the file to server.

On server Side this file is send to external repository.

```
fileName = item.getName();
mimetype = item.getContentType();

int len;

        while ((len = stream.read(buffer, 0, buffer.length)) != -1) {
            output.write(buffer, 0, len);
        }
        ByteArrayInputStream input = new ByteArrayInputStream(output.toByteArray());
        Session session =getSession();
    ContentStream contentStream = session.getObjectFactory()
                .createContentStream(fileName, output.size(), mimetype, input);

        FilenetDocument document = new FilenetDocument(fileName);
        Folder folder =getFolderSession();
        folder.createDocument(document.addDocumentProperty(),
                contentStream, VersioningState.MAJOR); 
```

with this procedure i create document in external repository. and on refresh i can see the file on my GWT client GUI.

Now i want to download the same file from external repository. So on server side i wrote this code (FileUtils.download method for downloading from external repositrry.)

```
System.out.println(" id " +docId);
FileUtils.download(docId,"C:/FilenetDownload",session);  <--line 55 
```

but this gives me Error

PrintStack :

```
java.lang.NoClassDefFoundError: java.io.FileOutputStream is a restricted class. Please see the Google  App Engine developer's guide for more details.
    at com.google.appengine.tools.development.agent.runtime.Runtime.reject(Runtime.java:51)
    at org.apache.chemistry.opencmis.client.util.FileUtils.download(FileUtils.java:241)
    at org.apache.chemistry.opencmis.client.util.FileUtils.download(FileUtils.java:263)
    at com.filenet.server.CmisFileDownload.doPost(CmisFileDownload.java:55)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:122)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:78)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:363)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218) 
```

Plz Can any one explain what is wrong .. or What should i Do..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:07:04.293

[Google App Engine 有一些限制，您可以在此处](https://stackoverflow.com/questions/8090670/google-appengine-not-supporting-fileoutputstream)阅读有关您遇到的问题的更多信息。而不是使用`FileUtils.download`您应该使用较低级别的 api，然后将内容存储在一些可用的存储位置（普通文件系统不是 GAE 中的选项）。例如，使用[BlobStore API](https://developers.google.com/appengine/docs/java/blobstore/)：

```
CmisObject object = session.getObject(session.createObjectId(docId));
Document document = (Document) object;
String filename = document.getName();
InputStream stream = document.getContentStream().getStream();
BlobStoreContext context = new BlobStoreContextFactory().createContext("aws-s3", identity, credential);
Map<String, InputStream> map = context.createInputStreamMap("my_content");
map.put(document.getId(), stream);
context.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:07:11.487

在应用程序引擎上，您不能直接访问文件系统，这是不允许的。

下面是一个关于如何使用应用引擎 blobstore 上传文件的示例： [Blobstore Java API Overview](https://developers.google.com/appengine/docs/java/blobstore/overview#Complete_Sample_App)

# html - HTML 表格列的宽度分配取决于行数

> ID：11030609
> 
> 赞同：0
> 
> 时间：2012-06-14T09:50:31.903
> 
> 标签：html, css

我发现 HTML 表格的一个非常奇怪的行为，其中单元格的宽度分配取决于行数。如果我有 2 行，则单元格的宽度都相同，但是当我插入另一行时，第一列会扩大一点，第二列比其他列窄。我在[fiddle](http://jsfiddle.net/aPPAL/)上上传了一个示例。当您删除 HTML 中第三行周围的注释时，您会看到此行为。

这种行为从何而来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:55:55.053

表格单元格将扩展到内容，除非它们具有固定宽度。在您的示例中，您在表格中有表格。表格往往具有默认值，例如填充和单元格间距。

为了解决这个问题，您可以使用重置样式表并根据您的选择修改表格及其单元格的 CSS

如果您真的希望它是像素完美的，您可能还需要执行 CSS 声明，例如折叠边框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T09:57:21.680

实际上，列在标题或单元格内的内容基础上扩展和收缩

**演示：http:** [//jsfiddle.net/aPPAL/1/](http://jsfiddle.net/aPPAL/1/)

看到结果。

# javascript - 设置值时的 Javascript 语法

> ID：11030611
> 
> 赞同：0
> 
> 时间：2012-06-14T09:50:36.083
> 
> 标签：javascript, syntax, highcharts

我在看这个问题：[Add additional data to a Highcharts series for use in formatters](https://stackoverflow.com/questions/8752141/add-additional-data-to-a-highcharts-series-for-use-in-formatters)

我也想添加 hasCustomFlag 变量，但我希望它是动态的。

我试过这样：

```
this.series[0].setOptions("hasCustomFlag ",data.someList); 
```

但它不起作用。这就是我设置数据的方式：

```
chart1.series[0].setData(data.someList); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:53:30.667

这是解决方案：

```
chart1.series[0].hasCustomFlag = data.someList; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:01:03.953

当您在图表对象中定义系列时，它最初从 0 开始计数，因此您无需解析其中的系列名称，

```
chart.series[0].setData(array); 
```

# r - 如何最好地将 data.table 的一列与同一 data.table 的另一列连接起来？

> ID：11030614
> 
> 赞同：10
> 
> 时间：2012-06-14T09:51:04.090
> 
> 标签：r, data.table

## 我的数据

我有一个 data.table `DT`，其中当前 ( `F0YR`) 和下一个 ( `F1YR`) 财政年度结束 (FYE) 编码为整数。由于每个下一个 FYE 最终都会成为当前的 FYE，因此整数将同时在列`F1YR`和`F0YR`中。此外，我的数据包含每月观察结果，因此相同的 FYE 将多次出现在数据集中：

```
library(data.table)
DT <- data.table(ID     = rep(c("A", "B"), each=9),
                 MONTH  = rep(100L:108L, times=2),
                 F0YR   = rep(c(1L, 4L, 7L), each=3, times=2),
                 F1YR   = rep(c(4L, 7L, 9L), each=3, times=2),
                 value  = c(rep(1:5, each=3), 6, 6, 7),
                 key    = "ID,F0YR")
DT
      ID MONTH F0YR F1YR value
 [1,]  A   100    1    4     1
 [2,]  A   101    1    4     1
 [3,]  A   102    1    4     1
 [4,]  A   103    4    7     2
 [5,]  A   104    4    7     2
 [6,]  A   105    4    7     2
 [7,]  A   106    7    9     3
 [8,]  A   107    7    9     3
 [9,]  A   108    7    9     3
[10,]  B   100    1    4     4
[11,]  B   101    1    4     4
... 
```

## 我想做的事

对于每个`ID`and`F1YR`组合，我想获得`ID`and`F0YR`组合的值。例如：A 公司的`2`值为`FOYR==4`。现在，我想要一个用于所有组合的附加列，`ID=="A"`它`F1YR==4`设置为 2，在已经存在的值 1 旁边。

## 我试过的

```
intDT <- DT[CJ(unique(ID), unique(F0YR)), list(ID, F0YR, valueNew = value), mult="last"]
setkey(intDT, ID, F0YR)
setkey(DT, ID, F1YR)
DT <- intDT[DT]
setnames(DT, c("F0YR.1", "F0YR"), c("F0YR", "F1YR"))
DT
      ID F1YR valueNew MONTH F0YR value
 [1,]  A    4        2   100    1     1
 [2,]  A    4        2   101    1     1
 [3,]  A    4        2   102    1     1
 [4,]  A    7        3   103    4     2
 [5,]  A    7        3   104    4     2
 [6,]  A    7        3   105    4     2
 [7,]  A    9       NA   106    7     3
 [8,]  A    9       NA   107    7     3
 [9,]  A    9       NA   108    7     3
[10,]  B    4        5   100    1     4
[11,]  B    4        5   101    1     4
... 
```

（请注意，我`mult="last"`在这里使用是因为，虽然值应该只随着 F0YR 或 F1YR 的变化而变化，但有时它们不会变化，这只是我的决胜局）。

## 我想要的是

这看起来可以改进。首先，我必须复制我的 DT。其次，由于我加入的基本相同`data.table`，所以所有列名都具有相同的名称，我必须重命名它们。我认为这`self join`将是前进的道路，但我尝试了又尝试，无法得到一个好的解决方案。我希望那里有一些我看不到的简单的东西……有人知道吗？还是我的数据设置方式实际上很难（可能是因为我有每月观察，但只想加入每季度或每年变化的值）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T16:04:45.357

在这样的用例中，“先聚合，然后加入”的口头禅通常会有所帮助。因此，从您的`DT`, 开始并使用 v1.8.1 ：

```
> agg = DT[,last(value),by=list(ID,F0YR)]
> agg
   ID F0YR V1
1:  A    1  1
2:  A    4  2
3:  A    7  3
4:  B    1  4
5:  B    4  5
6:  B    7  7 
```

我之所以叫它，`agg`是因为我想不出更好的名字。在这种情况下，您想要`last`的并不是真正的聚合，但您知道我的意思。

然后`DT`按组引用更新。在这里，我们按 分组`i`。

```
setkey(DT,ID,F1YR)
DT[agg,newcol:=V1]
    ID MONTH F0YR F1YR value newcol
 1:  A   100    1    4     1      2
 2:  A   101    1    4     1      2
 3:  A   102    1    4     1      2
 4:  A   103    4    7     2      3
 5:  A   104    4    7     2      3
 6:  A   105    4    7     2      3
 7:  A   106    7    9     3     NA
 8:  A   107    7    9     3     NA
 9:  A   108    7    9     3     NA
10:  B   100    1    4     4      5
11:  B   101    1    4     4      5
12:  B   102    1    4     4      5
13:  B   103    4    7     5      7
14:  B   104    4    7     5      7
15:  B   105    4    7     5      7
16:  B   106    7    9     6     NA
17:  B   107    7    9     6     NA
18:  B   108    7    9     7     NA 
```

是对的吗？不确定我是否完全遵循。这些操作应该非常快，没有任何副本，并且应该扩展到大数据。至少，这是本意。

# java - How to use javassist to replace a class on runtime

> ID：11030622
> 
> 赞同：3
> 
> 时间：2012-06-14T09:51:29.917
> 
> 标签：java, javassist

don't know anyone use javassist here, I want a sample code. I have a user-input java source string, I can compile it and my question is how to use javassist to replace this new class with the old one in memory, anyone can show the sample code? Thanks.

# sql-server-2008 - sql server cant enter int 00X as 3 digits, but only as 1digit

> ID：11030631
> 
> 赞同：0
> 
> 时间：2012-06-14T09:51:58.107
> 
> 标签：sql-server-2008

I am using sql server 2008\. I want to keep my PK's in the form 001,002 etc. MS SQL is not allowing me to do that. How can i stop it from converting 001 to 1 ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:03:54.560

使用 varchar 数据类型而不是 Int 数据类型。

或者

将您的 Pk 保持为 int，并在查询中使用时将其转换为 varchar，然后在其上使用左填充 00X。

```
Declare @id int
Set @id = 1

Select RIGHT(REPLICATE('0',2) + CAST(@id AS VARCHAR(3)),3) 
```

# nsmutabledata - How to assign different data types to NSMutableData

> ID：11030632
> 
> 赞同：0
> 
> 时间：2012-06-14T09:52:10.670
> 
> 标签：nsmutabledata

I'm trying to create a vertex attribute array for storing vectors and indices in a mesh. I realise that vertex attributes can be made up from vector2, vector3 and/or vector4 so i'd like to create a class that caters for them all without constraining methods to return a certain type of object. As a test, i've written the following class making use of `NSMutableData`:

```
//VertexAttributeArray.h

@interface VertexAttributeArray : NSObject
{
    NSMutableData *vertexData;
}

- (void *)data;
- (CGRect *)rect;

//VertexAttributeArray.m

- (id)init
{
    self = [super init];

    if(self)
    {
        vertexData = [[NSMutableData alloc] initWithLength:0];
    }

    return self;
}

- (void *)data
{
    return [vertexData mutableBytes];
}

- (CGRect *)rect
{
    return [vertexData mutableBytes];
}

- (void)dealloc
{
    if(vertexData)
    {
        [vertexData release];
        vertexData = nil;
    }

    [super dealloc];
} 
```

From within my mesh class, i'd like to be able to call something like:

```
VertexAttributeArray *vertexAttributeArray = [[VertexAttributeArray alloc] init];

[vertexAttributeArray data][0] = CGRectMake(0.0, 0.0, 0.0, 0.0); //doesn't work - compiler error
[vertexAttributeArray rect][0] = CGRectMake(0.0, 0.0, 0.0, 0.0); //works fine 
```

The first method accessing `data` would be preferred as this doesn't constrain the class to work with a specific type of struct but Xcode just throws the warning "Incomplete type 'void' is not assignable."

I don't want to have multiple methods for different types of data structures but I can't see any way to get around this currently. Having methods that return pointers to different types doesn't look very elegant and adds a lot of vestigial unused (and unwanted) code.

Is there a way to work around this to create an agnostic data store? I'd prefer for my mesh class to have different `VertexAttributeArray` objects to store vertices, indices, normals and colours etc so storing vector2, vector3 and vector4 is ideally where i'd like to be. How would I work around achieving this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:20:54.880

没有办法做你想做的事。在编译时不知道内部对象的大小`data`。`((void *)foo)[x]`在 C 中也是非法的。编译器必须知道数组中存储了什么结构，您才能对其进行索引。

您可以将调用更改为：

```
((CGRect *)[vertexAttributeArray data])[0] = CGRectMake(0.0, 0.0, 0.0, 0.0); 
```

如果您愿意，从那时起就知道里面`sizeof(CGRect)`的物体之间有距离`data`。

# javascript - Custom checkbox not working in Chrome and Safari browser

> ID：11030636
> 
> 赞同：0
> 
> 时间：2012-06-14T09:52:48.670
> 
> 标签：javascript, google-chrome, checkbox, safari

i used below code for custom checkbox,

HTML

```
<div class="agree">
                                      <label for="agree_check" class="label_check"><input type="checkbox" class="agree_check" id="agree_check" />Agree</label>
                                  </div> 
```

CSS

```
.has-js .label_check { padding-left: 34px; }
.has-js .label_check { background: url(../images/box1.png) no-repeat; }
.has-js label.c_on { background: url(../images/box1-with-mark.png) no-repeat; }
.has-js .label_check input { position: absolute; left: -9999px; } 
```

Script

```
<script type="text/javascript">
var d = document;
var safari = (navigator.userAgent.toLowerCase().indexOf('safari') != -1) ? true : false;
var gebtn = function(parEl,child) { return parEl.getElementsByTagName(child); };
onload = function() {

    var body = gebtn(d,'body')[0];
    body.className = body.className && body.className != '' ? body.className + ' has-js' : 'has-js';

    if (!d.getElementById || !d.createTextNode) return;
    var ls = gebtn(d,'label');
    for (var i = 0; i < ls.length; i++) {
        var l = ls[i];
        if (l.className.indexOf('label_') == -1) continue;
        var inp = gebtn(l,'input')[0];
        if (l.className == 'label_check') {
            l.className = (safari && inp.checked == true || inp.checked) ? 'label_check c_on' : 'label_check c_off';
            l.onclick = check_it;
        };
        if (l.className == 'label_radio') {
            l.className = (safari && inp.checked == true || inp.checked) ? 'label_radio r_on' : 'label_radio r_off';
            l.onclick = turn_radio;
        };
    };
};
var check_it = function() {
    var inp = gebtn(this,'input')[0];
    if (this.className == 'label_check c_off' || (!safari && inp.checked)) {
        this.className = 'label_check c_on';
        if (safari) inp.click();
    } else {
        this.className = 'label_check c_off';
        if (safari) inp.click();
    };
};
var turn_radio = function() {
    var inp = gebtn(this,'input')[0];
    if (this.className == 'label_radio r_off' || inp.checked) {
        var ls = gebtn(this.parentNode,'label');
        for (var i = 0; i < ls.length; i++) {
            var l = ls[i];
            if (l.className.indexOf('label_radio') == -1)  continue;
            l.className = 'label_radio r_off';
        };
        this.className = 'label_radio r_on';
        if (safari) inp.click();
    } else {
        this.className = 'label_radio r_off';
        if (safari) inp.click();
    };
};
       </script> 
```

now i need to check the checkbox is checked or not.. it is works in FF but not works in Chrome and Safari browser.

```
if (jQuery('#agree_check').is(':checked')) {
alert("checked");
}
else
{
alert("Not checked");
} 
```

when i checked the checkbox it displays "checked" in FF.. but in Chrome and safari it displays "not checked".

what is the issue?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T07:52:43.280

我的解决方案也在服务器端工作 - 代码隐藏（标签和复选框的 runat="server" 属性）包括为关键浏览器添加选中/未选中状态。也许这适用于所有浏览器，清除`if`声明。

```
 var check_it = function () {
     var inp = gebtn(this, 'input')[0];
     if (this.className == 'label_check c_off' || (!safari && inp.checked)) {
         this.className = 'label_check c_on';
         if (chrome) inp.checked = true;
         if (safari) inp.click();
     } else {
         this.className = 'label_check c_off';
         if (chrome) inp.checked = false;
         if (safari) inp.click();
     }; 
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T06:44:07.550

最后我找到了答案，它只是以另一种方式检查以使该条件为真，

```
if (jQuery('#agree_check').is(':checked') || (jQuery('div.agree label').hasClass('c_on'))) {
alert("checked");
}
else
{
alert("Not checked");
} 
```

现在它在所有浏览器中都可以正常工作。

谢谢， 拉维钱德兰

# ruby-on-rails - 站点在heroku上运行，本地ActiveRecord错误

> ID：11030637
> 
> 赞同：0
> 
> 时间：2012-06-14T09:52:51.090
> 
> 标签：ruby-on-rails, ruby, postgresql, heroku

我正在尝试在 Heroku 上部署我的第一个站点。我已经完成了所有设置，我推送到 Heroku 的东西运行良好。但是，当我在本地运行 foreman 进行测试时，我得到：

```
ActiveRecord::ConnectionNotEstablished 
```

完整的跟踪是：

```
activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:398:in `retrieve_connection'
activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_specification.rb:168:in `retrieve_connection'
activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_specification.rb:142:in `connection'
activerecord (3.2.3) lib/active_record/query_cache.rb:67:in `rescue in call'
activerecord (3.2.3) lib/active_record/query_cache.rb:61:in `call'
activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `_run__106420346196994475__call__674805951980893958__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.3) lib/rails/engine.rb:479:in `call'
railties (3.2.3) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
thin (1.3.1) lib/thin/connection.rb:80:in `block in pre_process'
thin (1.3.1) lib/thin/connection.rb:78:in `catch'
thin (1.3.1) lib/thin/connection.rb:78:in `pre_process'
thin (1.3.1) lib/thin/connection.rb:53:in `process'
thin (1.3.1) lib/thin/connection.rb:38:in `receive_data'
eventmachine (0.12.10) lib/eventmachine.rb:256:in `run_machine'
eventmachine (0.12.10) lib/eventmachine.rb:256:in `run'
thin (1.3.1) lib/thin/backends/base.rb:61:in `start'
thin (1.3.1) lib/thin/server.rb:159:in `start'
rack (1.4.1) lib/rack/handler/thin.rb:13:in `run'
rack (1.4.1) lib/rack/server.rb:265:in `start'
railties (3.2.3) lib/rails/commands/server.rb:70:in `start'
railties (3.2.3) lib/rails/commands.rb:55:in `block in <top (required)>'
railties (3.2.3) lib/rails/commands.rb:50:in `tap'
railties (3.2.3) lib/rails/commands.rb:50:in `<top (required)>'
script/rails:6:in `require'
script/rails:6:in `<main>' 
```

我是rails和heroku的新手，无法弄清楚。该网站非常基本。没有数据库，只是一个简单的 html 页面，带有来自 twitter bootstrap 的导航栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:34:43.953

默认情况下，Rails 将创建与数据库的连接。有几种方法可以删除该连接（通过从 Rails 中删除 ActiveRecord）。

如果您正在创建新的 Rails 项目，您可以使用 --skip-activerecord 命令禁用 ActiveRecord。如果你想转换已经创建的项目，你必须手动重新配置它。[有关http://mikewilliamson.wordpress.com/2011/03/21/running-rails-3-with-no-activerecord](http://mikewilliamson.wordpress.com/2011/03/21/running-rails-3-with-no-activerecord)的更多信息

关于 Heroku，它之所以有效，是因为 Heroku 将数据库连接注入到您的项目中。

# java - Android Scroller 简单示例

> ID：11030639
> 
> 赞同：10
> 
> 时间：2012-06-14T09:52:53.350
> 
> 标签：java, android, scroll, scroller

谁能给我关于 Scroller 类的简单示例？据我了解，它封装了滚动，所以我需要开始计算，然后手动更新必须 ScrollView 到新位置。所以我只是尝试

```
 Scroller scroller = new Scroller(getApplicationContext());
    scroller.startScroll(0, 0, 10, 10, 500);
    for (int i = 0; i < 100; i++) {
        Log.d("scroller", scroller.getCurrX()+" "+ scroller.getCurrY());
    } 
```

我的输出只有零。我的错误在哪里？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T10:16:34.990

```
private class Flinger implements Runnable {
    private final Scroller scroller;

    private int lastX = 0;

    Flinger() {
        scroller = new Scroller(getActivity());
    }

    void start(int initialVelocity) {
        int initialX = scrollingView.getScrollX();
        int maxX = Integer.MAX_VALUE; // or some appropriate max value in your code
        scroller.fling(initialX, 0, initialVelocity, 0, 0, maxX, 0, 10);
        Log.i(TAG, "starting fling at " + initialX + ", velocity is " + initialVelocity + "");

        lastX = initialX;
        getView().post(this);
    }

    public void run() {
        if (scroller.isFinished()) {
            Log.i(TAG, "scroller is finished, done with fling");
            return;
        }

        boolean more = scroller.computeScrollOffset();
        int x = scroller.getCurrX();
        int diff = lastX - x;
        if (diff != 0) {
            scrollingView.scrollBy(diff, 0);
            lastX = x;
        }

        if (more) {
            getView().post(this);
        }
    }

    boolean isFlinging() {
        return !scroller.isFinished();
    }

    void forceFinished() {
        if (!scroller.isFinished()) {
            scroller.forceFinished(true);
        }
    }
} 
```

取自[https://stackoverflow.com/a/6219382/1351347](https://stackoverflow.com/a/6219382/1351347)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T14:48:40.833

最后一个参数`startScroll()`是持续时间。可能您的`for`-loop 在滚动条完成任何操作之前完成:) 而且您应该调用`computeScrollOffset()` Try this code，它可以工作：

```
Scroller scroller = new Scroller(getApplicationContext());
scroller.startScroll(0, 0, 100, 100, 500);
while (!scroller.isFinished()) {
    Log.d("scroller", scroller.getCurrX() + " " + scroller.getCurrY());
    scroller.computeScrollOffset();
} 
```

# c++ - 如何确定 OpenCV 版本

> ID：11030640
> 
> 赞同：27
> 
> 时间：2012-06-14T09:52:59.527
> 
> 标签：c++, opencv, version

如何确定我安装了哪个版本的 OpenCV？

*我最感兴趣的是知道一种以编程方式（和跨平台）执行它的方法*，但我什至找不到从代码外部确定已安装版本的方法。

我在 Fedora 上使用 C++03。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-14T09:59:40.040

您可以检查`CV_VERSION`宏。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-14T09:57:31.043

您可以检查以下宏变量：

```
CV_MAJOR_VERSION
CV_MINOR_VERSION 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-04-26T21:05:39.277

如果您还想获取构建信息，可以使用以下代码：

```
 printf("OpenCV: %s", cv::getBuildInformation().c_str()); 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-03-31T23:10:04.597

版本字符串位于：

[https://github.com/opencv/opencv/blob/master/modules/core/include/opencv2/core/version.hpp](https://github.com/opencv/opencv/blob/master/modules/core/include/opencv2/core/version.hpp)

```
Top of version.hpp, below the BSD license:
#define CV_VERSION_MAJOR    3
#define CV_VERSION_MINOR    2
#define CV_VERSION_REVISION 0 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-08-14T13:26:34.673

我想使用 version.hpp 定义来增强答案之一。

请注意该解决方案的潜在问题：

v. 2.4.13.6 定义：

```
#define CV_VERSION_EPOCH 2
#define CV_VERSION_MAJOR 4
#define CV_VERSION_MINOR 13
#define CV_VERSION_REVISION 6
#if CV_VERSION_REVISION
#  define CV_VERSION    CVAUX_STR(CV_VERSION_EPOCH) "." CVAUX_STR(CV_VERSION_MAJOR) "." CVAUX_STR(CV_VERSION_MINOR) "." CVAUX_STR(CV_VERSION_REVISION)
#else
#  define CV_VERSION        CVAUX_STR(CV_VERSION_EPOCH) "." CVAUX_STR(CV_VERSION_MAJOR) "." CVAUX_STR(CV_VERSION_MINOR)
#endif 
```

v. 3.4.2 定义：

```
#define CV_VERSION_MAJOR 3
#define CV_VERSION_MINOR 4
#define CV_VERSION_REVISION 2
#define CV_VERSION    CVAUX_STR(CV_VERSION_MAJOR) "." CVAUX_STR(CV_VERSION_MINOR) "." CVAUX_STR(CV_VERSION_REVISION) CV_VERSION_STATUS 
```

因此，*CV_VERSION_MAJOR*没有可比性。更安全的解决方案是解析 *CV_VERSION*并使用*点*之前的第一个值。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-09-21T12:11:42.497

pkg-config --modversion opencv

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-14T10:05:28.553

如果您从 svn 存储库安装，您可以看到准确的修订版本，如下所示：

```
# in the opencv.svn directory
svn info 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-14T19:01:14.693

如果您在 Windows 下工作并且需要配置 Codeblocks 或任何其他 IDE（因此，您还不能发出任何命令，也不能编译程序），您可以简单地转到 OpenCV 安装文件夹并查看最后的文件子文件夹“/lib”中的库。所有库都以反映主要、次要和 OpenCV 构建版本的模式命名。例如，如果您偶然发现名为*opencv_ts300.lib*或*opencv_world300.lib*的文件那么major是3，minor是0，revision是0。

（注意：这个方法很可能会失败我的意思是当这些信息不符合真实版本时，但这可能是修订版，但不太可能是专业版）

# .net - 带有列表视图的 MVVM 按钮事件未获取所选项目

> ID：11030641
> 
> 赞同：1
> 
> 时间：2012-06-14T09:53:03.707
> 
> 标签：.net, wpf, mvvm, mvvm-light, mvvm-toolkit

我正在尝试从我的列表视图中获取 selectedItem。我在按钮上使用 MVVM 灯光工具包和 EventToCommand。

我的 listView 绑定到正确绑定的 ObservableCollection。这是 listView xaml：

```
 <ListView   Name="serverListView"
                    Grid.Row="3"
                    Grid.Column="0"
                    Grid.ColumnSpan="2"
                    ItemsSource="{Binding Servers}"
                    ItemTemplate="{StaticResource ServerList}"
                    SelectionMode="Single"
                    BorderThickness="0"/> 
```

然后我有一个按钮，我正在使用带有 mvvm EventToCommand 的 Interaction.Triggers，我不确定 selectedItem 绑定是否正确。该事件通过中继命令（mvvm light toolkit）正确触发，但我每次都得到空值。

这是我的按钮 xaml；

```
<Button x:Name="LoadButton"
                Content="Load Server"
                Grid.Column="0"
                Grid.Row="4"
                Grid.ColumnSpan="2">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="Click">
                    <mvvm:EventToCommand  Command="{Binding ButtonClick, Mode=OneWay}"
                                            CommandParameter="{Binding SelectedItem, ElementName=serverListView}"
                                            MustToggleIsEnabledValue="True"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </Button> 
```

中继命令：

```
 this.ButtonClick = new RelayCommand<object>(new Action<object>(this.GetClickEvent)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:41:09.627

摆脱命令参数绑定，在视图模型中创建 SelectedServer 属性，在视图模型中创建不带参数的命令

```
<ListView   Name="serverListView"
                Grid.Row="3"
                Grid.Column="0"
                Grid.ColumnSpan="2"
                ItemsSource="{Binding Servers}"
                ItemTemplate="{StaticResource ServerList}"
                SelectedItem="{Binding SelectedServer}"
                SelectionMode="Single"
                BorderThickness="0"/>

<Button Command="{Binding MyCommand}" /> 
```

在您的视图模型中，您拥有执行命令逻辑所需的所有信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:15:40.000

您还应该将列表视图的 SelectedItem 属性绑定到视图模型的属性（SelectedServer），并更改您的 EventToCommand

```
CommandParameter="{Binding SelectedItem, ElementName=serverListView}" 
```

到

```
CommandParameter="{Binding SelectedServer}" 
```

# python - 如何在python中只拆分和存储一些值？

> ID：11030653
> 
> 赞同：1
> 
> 时间：2012-06-14T09:53:58.090
> 
> 标签：python, arrays, string, split

有这个文本文件：

```
Breathing 1:-29.9396 9:-32.0895 13:-35.6787 2:-36.8527 17:-37.3622 8:-38.0584 14:-38.5265 18:-38.7567 16:-38.7663 12:-39.1036 7:-39.5838 4:-40.653 15:-41.2627 3:-42.5983 5:-43.5966 10:-48.5747 11:-48.8823 6:-241.384
Breathing 1:-30.3629 9:-30.9582 17:-34.2767 13:-34.2944 14:-35.9349 16:-36.4528 2:-36.5194 18:-37.2092 8:-37.425 12:-37.5344 15:-38.001 3:-38.4113 7:-38.8753 5:-40.2013 4:-42.5538 10:-43.9502 11:-44.9487 6:-227.162
Breathing 1:-30.3253 9:-36.9927 8:-38.0383 4:-39.9291 13:-40.0669 2:-40.3448 18:-40.8734 14:-40.8901 16:-41.7204 12:-42.6082 7:-43.1386 17:-44.0876 3:-48.8257 15:-48.8814 5:-51.2907 11:-58.4311 10:-59.1803 6:-266.998
Breathing 15:-35.338 9:-35.8658 17:-38.6632 12:-39.154 13:-40.9085 3:-42.836 1:-43.3277 11:-43.684 2:-43.8531 8:-45.7809 18:-46.9128 16:-47.028 14:-47.6292 5:-49.7012 7:-49.8664 4:-61.5319 10:-93.743 6:-215.678
Breathing 18:-27.0995 14:-29.5464 1:-30.6396 9:-30.9543 13:-33.1009 
```

如何将值存储在`:-`数组的元素中？

我知道这段代码：

```
for line in lines:
    items = line.split()[1:]
    items = [item.split(':')[0] for item in items]
    items = map(int,items)
    rows.append(items) 
```

存储之前的那些`:`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T09:58:46.823

更改`[0]`为`[1]`第 3 行。这将从溢出而不是第一个元素中获取第二个元素。

另外，因为第二个数字不是整数，所以`map(int, items)`会失败。您可能想使用`float`. 这是一个完整的 python 脚本，您可以作为测试运行

```
#!/usr/bin/env python
lines = """Breathing 1:-29.9396 9:-32.0895 13:-35.6787 2:-36.8527 17:-37.3622 8:-38.0584 14:-38.5265 18:-38.7567 16:-38.7663 12:-39.10
Breathing 1:-30.3629 9:-30.9582 17:-34.2767 13:-34.2944 14:-35.9349 16:-36.4528 2:-36.5194 18:-37.2092 8:-37.425 12:-37.5344 15:-38.00
Breathing 1:-30.3253 9:-36.9927 8:-38.0383 4:-39.9291 13:-40.0669 2:-40.3448 18:-40.8734 14:-40.8901 16:-41.7204 12:-42.6082 7:-43.138
Breathing 15:-35.338 9:-35.8658 17:-38.6632 12:-39.154 13:-40.9085 3:-42.836 1:-43.3277 11:-43.684 2:-43.8531 8:-45.7809 18:-46.9128 1
Breathing 18:-27.0995 14:-29.5464 1:-30.6396 9:-30.9543 13:-33.1009""".split('\n')

rows = []

for line in lines:
    items = line.split()[1:]
    items = [item.split(':')[1] for item in items]
    items = map(float,items)
    rows.append(items)

from pprint import pprint
pprint(rows) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:14:08.250

```
>>> import re
>>> rows = []
>>> for line in s.split('\n'):
    for item in line.split():
        m = re.match(r'\d+:-([\d\.]+)', item)
        if m:
            rows.append(m.groups()[0])

>>> rows
['29.9396', '32.0895', '35.6787', '36.8527', '37.3622', '38.0584', '38.5265', '38.7567', '38.7663', '39.1036', '39.5838', '40.653', '41.2627', '42.5983', '43.5966', '48.5747', '48.8823', '241.384', '30.3629', '30.9582', '34.2767', '34.2944', '35.9349', '36.4528', '36.5194', '37.2092', '37.425', '37.5344', '38.001', '38.4113', '38.8753', '40.2013', '42.5538', '43.9502', '44.9487', '227.162', '30.3253', '36.9927', '38.0383', '39.9291', '40.0669', '40.3448', '40.8734', '40.8901', '41.7204', '42.6082', '43.1386', '44.0876', '48.8257', '48.8814', '51.2907', '58.4311', '59.1803', '266.998', '35.338', '35.8658', '38.6632', '39.154', '40.9085', '42.836', '43.3277', '43.684', '43.8531', '45.7809', '46.9128', '47.028', '47.6292', '49.7012', '49.8664', '61.5319', '93.743', '215.678', '27.0995', '29.5464', '30.6396', '30.9543', '33.1009']
>>> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T11:17:59.900

使用 re 模块！

```
import re
import numpy as np

fobj=open.("yourFile", "r")
data=fobj.read()
fobj.close()

r=re.findall(r":-[0-9]{1,3}.[0-9]{1,5}", data)
for i in xrange(len(r)):
    r[i]=r[i].lstrip(":")
array=np.array(r).astype(float) 
```

如果您的所有值都是负数，您可以通过删除语句`:`中的 the`re.findall`和以下`for`循环来简化代码。输出：

```
array([ -29.9396,  -32.0895,  -35.6787,  -36.8527,  -37.3622,  -38.0584,
    -38.5265,  -38.7567,  -38.7663,  -39.1036,  -39.5838,  -40.653 ,
    -41.2627,  -42.5983,  -43.5966,  -48.5747,  -48.8823, -241.384 ,
    -30.3629,  -30.9582,  -34.2767,  -34.2944,  -35.9349,  -36.4528,
    -36.5194,  -37.2092,  -37.425 ,  -37.5344,  -38.001 ,  -38.4113,
    -38.8753,  -40.2013,  -42.5538,  -43.9502,  -44.9487, -227.162 ,
    -30.3253,  -36.9927,  -38.0383,  -39.9291,  -40.0669,  -40.3448,
    -40.8734,  -40.8901,  -41.7204,  -42.6082,  -43.1386,  -44.0876,
    -48.8257,  -48.8814,  -51.2907,  -58.4311,  -59.1803, -266.998 ,
    -35.338 ,  -35.8658,  -38.6632,  -39.154 ,  -40.9085,  -42.836 ,
    -43.3277,  -43.684 ,  -43.8531,  -45.7809,  -46.9128,  -47.028 ,
    -47.6292,  -49.7012,  -49.8664,  -61.5319,  -93.743 , -215.678 ,
    -27.0995,  -29.5464,  -30.6396,  -30.9543,  -33.1009]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T09:58:37.637

如果

```
items = [item.split(':')[0] for item in items] 
```

存储之前的值`:`，然后

```
items = [item.split(':')[1] for item in items] 
```

将值存储在`:`.

# jquery - 从输入加载谷歌地图

> ID：11030656
> 
> 赞同：0
> 
> 时间：2012-06-14T09:54:04.567
> 
> 标签：jquery, html, google-maps, google-maps-api-3, google-maps-markers

我正在研究 google maps apiv3 [http://briancray.com/posts/how-to-calculate-the-distance-between-two-addresses-with-javascript-and-google-maps-api的示例](http://briancray.com/posts/how-to-calculate-the-distance-between-two-addresses-with-javascript-and-google-maps-api)

但是当我在生成 API 密钥后加载页面时，我收到的消息为

`Google has disabled use of the Maps API for this application. The provided key is not a valid Google API Key, or it is not authorized for the Google Maps Javascript API v2 on this site. If you are the owner of this application, you can learn about obtaining a valid key here: http://code.google.com/apis/maps/documentation/javascript/v2/introduction.html#Obtaining_Key`

如果您看到我的代码，我已经从 Google 地图为 APi 3 版本生成了一个密钥，并且在脚本标签中也指出了相同的内容。

我还应该在这里做什么才能让这个工作..谢谢

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml">
    <head>
      <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
      <title>Google Maps JavaScript API Example: Extraction of Geocoding Data</title>
      <script src="http://maps.google.com/maps?file=api&v=3&key=ABQIFI4V2HxQYPm-xtd00hTQOC0OXpAMO40FHAxT29dNBGfxqMPq5zwdeiDSHEPL89A" type="text/javascript"></script>

  <!-- According to the Google Maps API Terms of Service you are required display a Google map when using the Google Maps API. see: http://code.google.com/apis/maps/terms.html -->
      <script type="text/javascript">

      var geocoder, location1, location2;

      function initialize() {
          geocoder = new GClientGeocoder();
      }

      function showLocation() {
          geocoder.getLocations(document.forms[0].address1.value, function (response) {
              if (!response || response.Status.code != 200)
              {
                  alert("Sorry, we were unable to geocode the first address");
              }
              else
              {
                  location1 = {lat: response.Placemark[0].Point.coordinates[1], lon: response.Placemark[0].Point.coordinates[0], address: response.Placemark[0].address};
                  geocoder.getLocations(document.forms[0].address2.value, function (response) {
                      if (!response || response.Status.code != 200)
                      {
                          alert("Sorry, we were unable to geocode the second address");
                      }
                      else
                      {
                          location2 = {lat: response.Placemark[0].Point.coordinates[1], lon: response.Placemark[0].Point.coordinates[0], address: response.Placemark[0].address};
                          calculateDistance();
                      }
                  });
              }
          });
      }

      function calculateDistance()
      {
          try
          {
              var glatlng1 = new GLatLng(location1.lat, location1.lon);
              var glatlng2 = new GLatLng(location2.lat, location2.lon);
              var miledistance = glatlng1.distanceFrom(glatlng2, 3959).toFixed(1);
              var kmdistance = (miledistance * 1.609344).toFixed(1);

              document.getElementById('results').innerHTML = '<strong>Address 1: </strong>' + location1.address + '<br /><strong>Address 2: </strong>' + location2.address + '<br /><strong>Distance: </strong>' + miledistance + ' miles (or ' + kmdistance + ' kilometers)';
          }
          catch (error)
          {
              alert(error);
          }
      }

      </script>
    </head>

    <body onload="initialize()">

      <form action="#" onsubmit="showLocation(); return false;">
        <p>
          <input type="text" name="address1" value="Address 1" class="address_input" size="40" />
          <input type="text" name="address2" value="Address 2" class="address_input" size="40" />
          <input type="submit" name="find" value="Search" />
        </p>
      </form>
      <p id="results"></p>

    </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:03:43.547

包含 Google maps Javascript v3 的正确语法如下：

```
<script type="text/javascript"
  src="http://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=SET_TO_TRUE_OR_FALSE">
</script> 
```

# php - 类定义中的 Mongo _id

> ID：11030659
> 
> 赞同：1
> 
> 时间：2012-06-14T09:54:14.673
> 
> 标签：php, mongodb-php

这是我第一次将对象推入 Mongo - 我正在使用 PHP。我知道 MongoDB在使用函数`_id`插入时将变量添加到数组中。`MongoCollection::insert()`问题是这样的：

如果我定义了一个名为该变量的公共变量，则在插入时`_id`保留`NULL`

```
class MognoTest {
    public _id;
    public foo;

    public function __construct(){
        $this->foo = 'bar';
    }
}

$obj = new MongoTest();
$Mongo->collection->insert($obj);
var_dump($obj)
$found_obj = $Mongo->collection->findOne();
var_dump($found_obj); 
```

`var_dump()`s on`$obj`和`$found_obj`都返回一个带有 的对象`_id=NULL`。如果我在类定义中注释掉 _id，代码运行正常，并且都`var_dump()`打印一个 MongoID。

我想在类中定义一个 _id 以使我的代码更清晰，并使我在 Netbeans 上的代码提示正常工作。有什么我忽略的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:32:30.467

好的，所以我得到了一个解决方案，尽管老实说我不喜欢它——对我来说这似乎不优雅。

```
class MognoTest {
    public _id;
    public foo;

    public function __construct($load = NULL){
        $this->foo = 'bar';
        if ($load != NULL && isset($load['_id']))
            $this->_id = $load['_id'];
    }
    public function insertPrep(){
        if ($this->_id === NULL)
            unset($this->_id);
    }
}

//create object, prep, insert
$obj = new MongoTest();
$obj->insertPrep();
$Mongo->collection->insert($obj);
var_dump($obj)

//get object back and reload as object
$found_obj = $Mongo->collection->findOne();
$new_obj = new MongoTest($found_obj);
var_dump($new_obj); 
```

我认为这个解决方案不优雅，因为程序员现在必须记住在每次 insert 之前添加一行代码`MongoTest::insertPrep()`。我还尝试添加一个`public function __insert()`魔术功能，但没有成功:(

我仍在寻找更好的解决方案。但是对于任何有这个问题的人，这里有一个修复，即使这个修复不是我所希望的优雅。

# facebook-graph-api - 新闻提要中未显示应用发布的操作

> ID：11030660
> 
> 赞同：1
> 
> 时间：2012-06-14T09:54:35.597
> 
> 标签：facebook-graph-api, feed

我有一个带有自定义打开图形操作和对象的移动应用程序。我已经批准了该操作（活动）并尝试发布了几次。这些操作会显示在活动日志和时间线上，但不会显示在我的新闻提要中。我怎样才能让他们也出现在新闻提要/股票行情上？

# javascript - javascript无限向前滚动

> ID：11030661
> 
> 赞同：0
> 
> 时间：2012-06-14T09:54:39.073
> 
> 标签：javascript, html, user-experience

我正在研究一个无限的实现。目前，我可以向下滚动，并且代码会执行此检查应该执行的操作：

```
if ($(window).scrollTop() > $(document).height() - $(window).height() - 300) {
  //do stuff
} 
```

当我前进时，我也需要**做一些事情。**我遇到的问题是，当页面首次加载时，滚动条位于页面顶部，是否有事件或方式知道用户在页面首次加载时向上滚动？

目前，用户必须向下滚动然后向上滚动才能触发事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:44:22.887

我有同样的问题，我用

```
 window.onload = loadSubPage; 
```

希望这是你正在寻找的:)

# cocos2d-iphone - 使用 cocos2d-iphone 启用 2D 投影的充分理由是什么？

> ID：11030664
> 
> 赞同：4
> 
> 时间：2012-06-14T09:54:48.170
> 
> 标签：cocos2d-iphone, projection, zbuffer, depth-testing

在 cocos2d-iphone 中，默认的投影类型是“3D”投影。但您也可以将投影设置为“2D”，如下所示：

```
[[CCDirector sharedDirector] setProjection:CCDirectorProjection2D]; 
```

在幕后，3D 投影使用透视投影，而 2D 投影是 OpenGL 正交投影。[这两种投影模式的技术细节可以在这里查看](http://www.songho.ca/opengl/gl_projectionmatrix.html)，这**不是**我感兴趣的。

**二维投影对于 cocos2d 用户有什么好处和坏处？切换到 2D 投影的充分理由是什么？**

就我个人而言，我使用 2D 投影能够将深度缓冲用于等距平铺地图。等距平铺地图需要此功能才能正确在平铺地图上对平铺和对象进行 z 排序。

我还在非 tilemap 项目中使用了带有深度缓冲的 2D 投影，以通过 vertexZ 属性获得完整的 z 顺序控制。该项目使用伪等距显示，其中对象的 vertexZ 基于其 Y 坐标。

这意味着我一直使用 2D 投影只是为了能够使用 vertexZ 属性，这也需要启用深度缓冲。是否还有其他原因可能想要切换到 2D 投影？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T06:33:26.077

在以下情况下，切换到 2D 投影可以挽救生命：

1.  你创建了一个大的 CCRenderTexture

2.  您可以使用 [... 访问] 或 OpenGL 绘图函数在其上绘制一堆东西

3.  您将渲染纹理添加到您的图层，例如，为了将您在第 2 点中绘制的东西用作游戏的背景。

使用 3D 投影，将使用垂直和/或水平断层线渲染纹理。参见例如[http://www.cocos2d-x.org/boards/6/topics/16197](http://www.cocos2d-x.org/boards/6/topics/16197)，它适用于 cocos2d-x 但我也观察到 cocos2d-iphone 的相同效果并将投影设置为 2D 摆脱了问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T14:18:20.410

I have switched to 2D projection as the only means to resolve font rendering issues with CClabels, both font file and TTF-based labels. This is not always the cause of a font issue, but it has resolved some problems for me when all else failed.

# regex - 确保字符串是给定格式的正则表达式是什么？

> ID：11030665
> 
> 赞同：0
> 
> 时间：2012-06-14T09:55:01.407
> 
> 标签：regex

我对正则表达式非常不熟悉，所以我不知道从哪里开始。我需要将时间范围值存储在文件中。我想在保存之前根据正则表达式对其进行验证。

格式必须是：

```
00:00-00:00 
```

其中数字的最小值可以为 0，最大值可以表示为

```
23:59-23:59 
```

如何确保字符串与此约束匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:12:06.257

**试试这个**

```
\b((?:(?:[01][0-9]|2[0-3]):(?:[0-5][0-9]))-(?:(?:[01][0-9]|2[0-3]):(?:[0-5][0-9])))\b 
```

**解释**

```
\b                   # Assert position at a word boundary
(                    # Match the regular expression below and capture its match into backreference number 1
   (?:                  # Match the regular expression below
      (?:                  # Match the regular expression below
                              # Match either the regular expression below (attempting the next alternative only if this one fails)
            [01]                 # Match a single character present in the list “01”
            [0-9]                # Match a single character in the range between “0” and “9”
         |                    # Or match regular expression number 2 below (the entire group fails if this one fails to match)
            2                    # Match the character “2” literally
            [0-3]                # Match a single character in the range between “0” and “3”
      )
      :                    # Match the character “:” literally
      (?:                  # Match the regular expression below
         [0-5]                # Match a single character in the range between “0” and “5”
         [0-9]                # Match a single character in the range between “0” and “9”
      )
   )
   -                    # Match the character “-” literally
   (?:                  # Match the regular expression below
      (?:                  # Match the regular expression below
                              # Match either the regular expression below (attempting the next alternative only if this one fails)
            [01]                 # Match a single character present in the list “01”
            [0-9]                # Match a single character in the range between “0” and “9”
         |                    # Or match regular expression number 2 below (the entire group fails if this one fails to match)
            2                    # Match the character “2” literally
            [0-3]                # Match a single character in the range between “0” and “3”
      )
      :                    # Match the character “:” literally
      (?:                  # Match the regular expression below
         [0-5]                # Match a single character in the range between “0” and “5”
         [0-9]                # Match a single character in the range between “0” and “9”
      )
   )
)
\b                   # Assert position at a word boundary 
```

# wordpress - WordPress foreach 循环按标签提取 3 个视频

> ID：11030669
> 
> 赞同：0
> 
> 时间：2012-06-14T09:55:23.100
> 
> 标签：wordpress, foreach

我正在尝试获取我在 WordPress 中使用标签“视频”标记的 3 个视频。

我得到的主题中的代码不起作用，我试图编辑它，但我无法再进一步了。

```
global $post;

$tag = get_term_by( 'name', 'video', 'post_tag', 'ARRAY_A' );
$videos = get_posts(array('tag__in' => $tag, 'showposts' => '3'));

foreach($videos as $post) :
    setup_postdata($post);
    echo "<div class=\"videoframe\" id=\"videoframe\">".woo_get_embed('embed', '520', '293')."</div>";
endforeach; 
```

所以，我正在填写`$tag`“视频”标签 ( `post_tag`) 并将其设为`array_a`. 然后，我正在填写`$videos`带有我放入标签的帖子，`$tag`我想要最新的 3 个。

然后，我想通过使用该功能嵌入`foreach`我得到的帖子。`$videos``woo_get_embed`

不幸的是，不知何故，标签比较并不顺利，因为它会回显没有视频标签的帖子，因此它根本不会回显任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:20:53.767

`tag__in`需要一个带有 ID 的数组
您正在给它一个包含有关视频的所有信息的数组。

你要`'tag_id' => $tag['term_id']`

# iphone - 为表格中新添加的行设置动画

> ID：11030670
> 
> 赞同：0
> 
> 时间：2012-06-14T09:55:30.007
> 
> 标签：iphone, objective-c, ios, xcode, cocoa

是否可以让 IndexPath 当前将新行插入表中。表数据通过核心数据加载。数据按部分排序。我想在表格中添加一个新行以进行动画处理，如下图链接所示。

[http://i45.tinypic.com/2ykjj7n.png](http://i45.tinypic.com/2ykjj7n.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:22:57.283

您可以使用以下方法：

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];

[self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

代码已经过测试，肯定会为你工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:11:38.923

```
[tblMainView beginUpdates];
[tblMainView reloadRowsAtIndexPaths:<#(NSArray *)#> withRowAnimation:UITableViewRowAnimationLeft];
[tblMainView endUpdates]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T10:00:35.887

那这个呢？这是你要收集的吗？我不知道。

```
[yourTableView beginUpdates];
[yourTableView moveRowAtIndex:firstStateIndex toIndex:endStateIndex];
[yourTableView endUpdates]; 
```

当然，您必须首先插入特定行，以便以后移动它。动画可能是这样发生的。

# java - 在 Mac OSX Lion 中使用 JPS 以 Java 打印

> ID：11030675
> 
> 赞同：1
> 
> 时间：2012-06-14T09:55:46.797
> 
> 标签：java, printing

我正在尝试使用 JPS 以下教程将 JPG 图像打印到打印机，但它总是在 mac osx 中给我一个错误。它总是说，“无法转换 PostScript 文件”。

这是我用来打印的代码：

```
final PrintRequestAttributeSet photoAttr = createPhotoPaperPrintAttributes(copies);
PrintService printerService = findPrintService(photoAttr);
        try {
            DocAttributeSet das = new HashDocAttributeSet();
            das.add(new PrinterResolution(300, 300, PrinterResolution.DPI));
            das.add(MediaSizeName.ISO_A6);
            final Doc doc = new SimpleDoc(new FileInputStream(new File(imageFile)), DocFlavor.INPUT_STREAM.JPEG, das);

            DocPrintJob printJob = printerService.createPrintJob();
            printJob.print(doc, photoAttr);
        } catch (Exception e) {
            throw new PrintException(e);
        } 
```

有谁知道可能出了什么问题？

我设法让它使用 Printable 界面进行打印，但我无法以高于 72 DPI 的分辨率打印图像。我尝试了一些建议，例如缩放图形 2d，但它似乎不起作用。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T01:06:48.853

仅使用 JPS，Mac 会出现问题。我的建议是使用 Java 2 Print API + Java Print Service。

Java 2 Print API 有点像 1990 年的风格。为避免使用 Java 2 Print API 创建代码，您可以使用 PDFBox [http://pdfbox.apache.org](http://pdfbox.apache.org)作为框架。

使用 PDFBox，您可以创建一个 PDF 文档（[http://pdfbox.apache.org/cookbook/documentcreation.html](http://pdfbox.apache.org/cookbook/documentcreation.html)），但不是保存，而是使用该代码打印它：

```
PrinterJob printJob = PrinterJob.getPrinterJob();
PrintService service = PrintServiceLookup.lookupDefaultPrintService(); 
printJob.setPrintService(service);      
document.silentPrint(printJob); 
```

它在我的 Mac 上运行良好。

# ruby-on-rails - 将 Rails 应用程序部署到 VPS

> ID：11030684
> 
> 赞同：3
> 
> 时间：2012-06-14T09:56:18.800
> 
> 标签：ruby-on-rails, deployment, vps

我一直在使用 Rails 构建我的第一个站点，我想让它上线。到目前为止，我只是通过 FTP 将所有文件放到我的 VPS 上来使网站上线，而且我知道这不是 Rails 应用程序的工作方式。

我什至不知道从哪里开始确保在我的 VPS 上安装 Rails（它是基于 Linux 的，我从 Webfusion 购买了一个包），然后如何部署它并让它正常运行。我的 VPS 上安装了 Plesk 10，根据我的阅读，我需要在 Plesk 旁边安装 Rails？我可能有错误的一端，所以如果我说的是愚蠢的话，请不要退缩。

我意识到这是一个非常绿色的问题，但我已经在论坛上搜索了一个我可以理解的解决方案，但一无所获，所以希望这里的人能提供帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T10:57:59.283

我从来没有使用过像 Plesk 这样的控制面板，但我在 linode.com 上有一个 VPS。为了让我的 rails 站点启动并运行，我从一篇 smasingmagazine[博客文章](http://coding.smashingmagazine.com/2011/06/28/setup-a-ubuntu-vps-for-hosting-ruby-on-rails-applications-2/)和[pro railscast 插曲](http://railscasts.com/episodes/335-deploying-to-a-vps)中获得了帮助。railscast 剧集不是免费的，但它有很好的信息。

在 VPS 上运行 Rails Web 服务器的每个步骤都有很多细节，因此请查看博客或 railscast 视频。但这些步骤的高级概述是：

1.  安装 rvm
2.  安装红宝石和红宝石宝石
3.  安装导轨
4.  安装 Rails Web 服务器（常见的选项是乘客和 nginx）
5.  安装数据库（postgres 是常用选项）
6.  用于部署的 capistrano

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-19T08:59:33.433

我写了一本关于这个主题的电子书。在解释了如何从头开始设置服务器之后，它重点介绍了如何手动部署应用程序，帮助您了解这个过程在后台是如何工作的（我故意将自动化排除在外）。

它涵盖了 nginx/Unicorn/MySQL/rbenv 设置。如果您认为这适合您，您可以在[这里](http://www.relativkreativ.at)获取（我的邮件列表中的人可以免费使用）。

# objective-c - Xcode 组层次结构未在文件结构中模仿

> ID：11030691
> 
> 赞同：0
> 
> 时间：2012-06-14T09:56:47.177
> 
> 标签：objective-c, xcode, cocos2d-iphone

使用 Cocos2d 项目模板（针对目标 c）

我在 Xcode 中有一个很好的小层次结构设置，例如文件夹分类，多层次，但是在文件结构中，它只是一个大的文件目录，我应该这样吗？我应该手动复制文件结构中的层次结构吗？是否应该自动化我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:58:38.293

正如 Protheus 所说，XCode 中的组结构仅用于组织目的，不与文件系统同步。但是对于某些项目，保持 XCode 的组结构和文件系统同步可能是值得的。例如，我有时喜欢在命令行中使用 VIM 编辑我的文件。在具有数百个文件的大型项目中，如果文件系统中有逻辑结构，则查找特定文件要容易得多。

我在[这篇博客文章](http://www.making-software.com/2012/10/18/xcode-groupfile-system-structure/)中更详细地讨论了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:58:57.620

据我所知，xcode 中的结构和项目文件夹中的结构都不会影响程序。你只是为了你的方便而构建它。

# javascript - Aptana JavaScript 库代码辅助

> ID：11030692
> 
> 赞同：1
> 
> 时间：2012-06-14T09:56:50.123
> 
> 标签：javascript, google-maps-api-3, backbone.js, aptana

我正在使用 Aptana 3 进行 Web 开发，有没有办法为 jQuery、Google Maps API v3、Backbone.js 等提供语法自动完成功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:27:36.073

就 jquery 而言，请转到：命令 -> Bunde 开发 -> 安装包 -> Jquery

# hibernate - p6spy 日志与休眠日志

> ID：11030697
> 
> 赞同：2
> 
> 时间：2012-06-14T09:57:06.980
> 
> 标签：hibernate, logging, p6spy

p6spy 对于调试休眠查询非常有用，但是，有什么方法可以使用与休眠相同的逻辑来格式化查询？：

```
<property name="hibernate.format_sql" value="true" /> 
```

p6spy 日志示例： `p6spy - 1339663561390|15|0|statement|select personne0_.id as id5_,personne0_.dateNaissance as dateNais2_5_, personne0_.nom as nom5_, personne0_.prenom as prenom5_, personne0_.type as type5_ from Personne personne0_ where personne0_.nom=?|select personne0_.id as id5_, personne0_.dateNaissance as dateNais2_5_, personne0_.nom as nom5_, personne0_.prenom as prenom5_, personne0_.type as type5_ from Personne personne0_ where personne0_.nom='example'`

休眠日志示例：

```
Hibernate: 
    insert 
    into
        TABLE
        (COLUMN_1, COLUMN_2) 
    values
        (?, ?) 
```

我认为hibernate格式更具可读性，我想要p6spy这样的东西。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-20T17:59:46.203

P6Spy 捕获 SQL 语句并“按原样”记录它。它根本不尝试进行任何格式的格式化。但是，P6Spy 可以很容易地扩展为具有您正在寻找的行为。它的工作方式在 1.3 和 2.0 版本之间有所不同（在 2.0 中更容易）。

1.3 - 子类您当前使用的任何记录器并覆盖 logSQL(...) 方法。例如，如果您使用 FileLogger，您的子类可能类似于下面的示例。一旦你在类路径上有编译的类，只需更新 spy.properties 以使用新的记录器实现。

```
public class MyLogger extends FileLogger {
  public void logSQL(int connectionId, String now, long elapsed, String category, String prepared, String sql) {
    super.logSQL(connectionId,now,elapsed,category,reformat(prepared),reformat(sql));
  }
  private String reformat(final String sql) {
    // formatting logic goes here
  }
} 
```

2.0 - 在 2.0 中，我们添加了一个新的策略接口来处理日志消息格式。这与提供新记录器的工作量大致相同，但它将被所有记录器使用。您只需要提供一个实现 MessageFormattingStrategy 接口的类。要使 p6spy 使用新策略，您只需在 spy.properties 中配置它或设置系统属性。有关详细信息，请参阅[配置文档](http://p6spy.github.io/p6spy/2.0/configandusage.html "配置文档")。例如，看看[MultiLineFormat](http://p6spy.github.io/p6spy/apidocs/com/p6spy/engine/spy/appender/MultiLineFormat.html)。

顺便说一句 - 如果您确实创建了新的格式化策略并想分享它，请向我们发送拉取请求。P6Spy 现在在[GitHub 上](https://github.com/p6spy/p6spy/)进行维护。

# php - Codeigniter 转义数据

> ID：11030700
> 
> 赞同：1
> 
> 时间：2012-06-14T09:57:19.853
> 
> 标签：php, security, codeigniter

我正在使用以下代码允许我将数据添加到我的数据库中，但它似乎`$this->db->escape();`不起作用，因为我可以添加 html 标签，它们将在视图中运行:(

**代码：**

```
$this->form_validation->set_rules('aPartyLocation','A Party Location', 'required|trim|prep_for_form|max_length[35]|xss_clean');
        $this->form_validation->set_rules('aPartyPhone','A Party Phone', 'required|trim|numeric|max_length[35]|xss_clean');

        if($this->form_validation->run() === TRUE)
            {
                $userData = array(
                    'location' => $this->input->post('aPartyLocation', TRUE),
                    'phone' => $this->input->post('aPartyPhone', TRUE));

                $this->db->escape($userData);
                $this->party_model->addAParty($userData); 
```

**更新：**

**控制器：**

```
$userData = array(
    'id' => $id,
    'location' => html_escape($this->input->post('aPartyLocation', TRUE)),
    'phone' => html_escape($this->input->post('aPartyPhone', TRUE))
    ); 
```

**模型：**

```
function addAParty($userData = NULL)
{
    $this->db->insert('aParty',$userData);
    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T10:03:57.787

我建议你使用[CodeIgniter 的 Active Record](http://codeigniter.com/user_guide/database/active_record.html)类。这会自动为您转义数据。

例如，插入语句如下所示：

```
$this->db->insert('yourTable',array(
                 'location' => $this->input->post('aPartyLocation',TRUE),
                 'phone' => $this->input->post('aPartyPhone')
           )); 
```

第二个参数是一个数组，其中键对应于数据库中的列。

* * *

**编辑**

我相信 Active Record 只会清理 SQL 注入攻击的数据。将第二个参数传递给`$this->input->post()`TRUE 可以保护您免受 XSS 攻击。但是，这些都没有转义 HTML 标记。为此，您可以使用该[`htmlspecialchars`](http://php.net/manual/en/function.htmlspecialchars.php)功能。

```
 $this->db->insert('yourTable',array(
                     'location' => htmlspecialchars($this->input->post('aPartyLocation',TRUE)),
                     'phone' => htmlspecialchars($this->input->post('aPartyPhone'))
                )); 
```

* * *

```
$location = $this->input->post('aPartyLocation',TRUE);
$phone = $this->input->post('aPartyPhone');

 $this->db->insert('yourTable',array(
                     'location' => htmlspecialchars($location),
                     'phone' => htmlspecialchars($phone)
                )); 
```

# matlab - Matlab如何对我的数据进行排序？

> ID：11030704
> 
> 赞同：1
> 
> 时间：2012-06-14T09:57:50.843
> 
> 标签：matlab, sorting

我正在尝试对 mydata 进行排序：

```
mydata = 

  Columns 1 through 3

  [11512x2 double]    [17330x2 double]    [15044x2 double] 
```

我想按长度（mydata（1）），长度（mydata（2））和长度（mydata（3））对其进行排序（升序），

所以，排序后我必须得到：

```
mydata = 

  Columns 1 through 3

  [11512x2 double]     [15044x2 double]     [17330x2 double] 
```

如果它是一个结构，我可以这样做：

```
[blah, order] = sort([mydata(:).Area],'ascend'); 
```

进而：

```
sortedStruct = mydata(order);
mydata = sortedStruct; 
```

但它没有..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:01:45.420

您可以生成长度向量，对其进行排序并使用索引：

```
 l = cellfun(@length ,mydata);
  [unused,order] = sort(l);
  sortedStruct = mydata(order); 
```

# c# - C# 快速像素渲染

> ID：11030706
> 
> 赞同：8
> 
> 时间：2012-06-14T09:57:56.333
> 
> 标签：c#, graphics, drawing, rendering, kinect

我正在使用 OpenNI 开发深度处理（Xbox Kinect、Asus Xtion 等）应用程序。

当传感器提供新的深度数据（30 或 60 fps 取决于分辨率）时，我需要一种非常简单且快速的方式在 Windows 窗体上绘图。

目前，当数据可用时，我正在从单独的线程中使双缓冲面板无效，然后在面板的绘制方法中设置位图的像素，从而产生可预测的糟糕的 5fps。

System.Drawing.Graphics 似乎缺乏设置单个像素的快速方法，除非有人可以另行指示。

我实际上只需要设置像素颜色，所以如果可能的话，我想避免使用第三方高速渲染 API，最好使用尽可能原生的东西。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T15:44:15.663

如果您使用的是位图，那么您应该使用 LockBits 和 UnlockBits 直接访问内存中的数据。在 C# 中，您可以通过使用不安全的代码块和指针来获得一些额外的性能。

有关更多信息，请参阅此链接：http: [//web.archive.org/web/20150227183132/http ://bobpowell.net/lockingbits.aspx](http://web.archive.org/web/20150227183132/http://bobpowell.net/lockingbits.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T10:27:41.083

`image.SetPixel()`当您每帧替换很多像素并且每秒需要很多帧时，速度非常慢。

使用[WriteableBitmap](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.aspx)并调用[CopyPixels会快很多](http://msdn.microsoft.com/en-us/library/ms616043.aspx)

这样，您可以使用多个线程用像素数据填充数组，并在一次调用中简单地将数组blit 到图像。

**编辑**

请注意，WriteableBitmap 是一个 WPF 类。如果您绑定到 WinForms，您可能需要创建自己的实现。[WPF/WinForms/GDI 互操作：将 WriteableBitmap 转换为 System.Drawing.Image？](https://stackoverflow.com/questions/3239449/wpf-winforms-gdi-interop-converting-a-writeablebitmap-to-a-system-drawing-image)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T16:30:05.057

您可以尝试使用我的[LINQ 图像处理库](http://codeblocks.codeplex.com/wikipage?title=Linq%20Image%20Processing%20sample&referringTitle=Home)来处理您的“缓冲区位图”。它使用非常易于访问的语法，但对于大型位图非常有效。它在[Nuget](https://www.nuget.org/packages/linqimageprocessing)上作为单个文件包含在您的项目中。

希望有帮助！

# c# - Listview无法选择最后一行

> ID：11030711
> 
> 赞同：0
> 
> 时间：2012-06-14T09:58:24.623
> 
> 标签：c#, visual-studio, listview, select

我有一个 asp.net ListView，当我单击选择链接按钮以选择行并将数据的 id 传递给详细信息视图时，我想要。它传递除最后一条记录之外的所有记录的 id。有什么理由吗？

```
 <asp:ListView ID="ListView1" runat="server" DataKeyNames="AnswerID" OnSelectedIndexChanging="ListView1_SelectedIndexChanging">
    <EmptyDataTemplate>
        <table runat="server" style="">
            <tr>
                <td>
                    No data was returned.
                </td>
            </tr>
        </table>
    </EmptyDataTemplate>
    <ItemTemplate>
        <tr style="">
            <td>
                <asp:LinkButton ID="SelectButton" runat="server" CommandName="Select" Text="Select" />
            </td>
            <td>
                <asp:Label ID="Label1" runat="server" Text='<%# Eval("AnswerID") %>'></asp:Label>
            </td>
            <td>
                <asp:Label ID="Question" runat="server" Text='<%# Eval("QuestionText") %>' />
            </td>
            <td>
                <asp:Label ID="UserAnswer" runat="server" Text='<%# Eval("UserAnswerTxt") %>' />
            </td>
            <td>
                <asp:Label ID="CorrectAns" runat="server" Text='<%# Eval("CorrectAnswerTxt") %>' />
            </td>
            <td>
                <asp:Image ID="Image1" ImageUrl='<%# Eval("ImagePath") %>' Width="48" Height="48"
                    runat="server" />
            </td>
        </tr>
    </ItemTemplate>
    <LayoutTemplate>
        <table runat="server">
            <tr runat="server">
                <td runat="server">
                    <table id="itemPlaceholderContainer" runat="server" border="0" style="">
                        <tr runat="server" style="">
                            <th runat="server">
                            </th>
                            <th runat="server">
                                AnswerID
                            </th>
                            <th runat="server">
                                QuestionText
                            </th>
                            <th runat="server">
                                UserAnswerTxt
                            </th>
                            <th runat="server">
                                CorrectAnswerTxt
                            </th>
                            <th runat="server">

                            </th>
                            <th runat="server">

                            </th>
                        </tr>
                        <tr id="itemPlaceholder" runat="server">
                        </tr>
                    </table>
                </td>
            </tr>
            <tr runat="server">
                <td runat="server" style="">
                </td>
            </tr>
        </table>
    </LayoutTemplate>
    <SelectedItemTemplate>
        <tr style="">
            <td>
                <asp:LinkButton ID="SelectButton" runat="server" CommandName="Select" Text="Select" />
            </td>
            <td>
                <asp:Label ID="Label1" runat="server" Text='<%# Eval("AnswerID") %>'></asp:Label>
            </td>
            <td>
                <asp:Label ID="Question" runat="server" Text='<%# Eval("QuestionText") %>' />
            </td>
            <td>
                <asp:Label ID="UserAnswer" runat="server" Text='<%# Eval("UserAnswerTxt") %>' />
            </td>
            <td>
                <asp:Label ID="CorrectAns" runat="server" Text='<%# Eval("CorrectAnswerTxt") %>' />
            </td>
            <td>
                <asp:Image ID="Image1" ImageUrl='<%# Eval("ImagePath") %>' Width="48" Height="48"
                    runat="server" />
            </td>
        </tr>
    </SelectedItemTemplate>
</asp:ListView>
<asp:DetailsView ID="DetailsView1" runat="server" Height="50px" Width="125px" AutoGenerateRows="False"
    DataSourceID="SqlDataSource1">
    <Fields>
        <asp:BoundField DataField="AnswerID" HeaderText="AnswerID" SortExpression="AnswerID" />
        <asp:BoundField DataField="AnswerExplanation" HeaderText="AnswerExplanation" SortExpression="AnswerExplanation" />
        <asp:BoundField DataField="SuggestionText" HeaderText="SuggestionText" SortExpression="SuggestionText" />
        <asp:BoundField DataField="LessonID" HeaderText="LessonID" SortExpression="LessonID" />
    </Fields>
</asp:DetailsView>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
    SelectCommand="SELECT [ErDiagID], [AnswerID], [LessonID], [AnswerExplanation], [SuggestionText] FROM [ErrorDiagnosis] WHERE ([AnswerID] = @AnswerID)">
    <SelectParameters>
        <asp:ControlParameter ControlID="ListView1" Name="AnswerID" PropertyName="SelectedValue"
            Type="Int32" />
    </SelectParameters>
</asp:SqlDataSource>
protected void Page_Load(object sender, EventArgs e)
{
     Panel p = (Panel)Master.FindControl("Panel1");

    if (p != null)
    {
        p.Visible = false;
    }

    ArrayList al = (ArrayList)Session["AnswerList"];

    if (!Page.IsPostBack)
    {
        ListView1.DataBind();

    }

    if (al == null)
    {
        Response.Redirect("~/Default.aspx");
    }

    SqlConnection connection = null;
    try
    {
        ListView1.DataSource = al;
        //ListView1.SelectedIndex = ListView1.Items.Count - 1;
        ListView1.DataBind();
        //ListView1.SelectedIndex = ListView1.Items.Count - 1;
        ListView1.SelectedIndex = -1;

        if (IsPostBack == false)
        {
            double questions = al.Count;
            double correct = 0.0;

            for (int i = 0; i < al.Count; i++)
            {
                Answer a = (Answer)al[i];

                if (a.Result == Answer.ResultValue.Correct)
                {
                    correct++;
                }

            }

            //foreach (ListViewItem item in resultGrid.Items)
            //{
            //    Label cor = (Label)item.FindControl("CorrectAns");
            //    Label useran = (Label)item.FindControl("UserAnswer");

            //    if (cor.Text != useran.Text)
            //    {
            //        useran.Font.Bold = true;
            //    }
            //}

            double score = (correct / questions) * 100;

            Scorelbl.Text = string.Format("{0:0.##}", score) + "%";
            if (score >= 80 && score < 100)
            {
                resultext.Text = "Μπράβο " + Profile.UserName + "!!!";

            }

            connection = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
            connection.Open();

            SqlDataSource userQuizDataSource = new SqlDataSource();
            userQuizDataSource.ConnectionString = ConfigurationManager.ConnectionStrings["ConnectionString"].ToString();
            userQuizDataSource.InsertCommand = "INSERT INTO [UserQuiz] ([QuizID], [DateTimeComplete], [Score], [UserName]) VALUES (@QuizID, GETDATE(), @Score, @UserName)";
            userQuizDataSource.InsertParameters.Add("QuizID", Session["QuizID"].ToString());
            userQuizDataSource.InsertParameters.Add("Score", score.ToString());
            userQuizDataSource.InsertParameters.Add("UserName", User.Identity.Name);

            int rowsAffected = userQuizDataSource.Insert();
            connection.Close();

            if (rowsAffected == 0)
            {

                errorLabel.Text = "";
            }

        }
    }
    catch (Exception exp)
    {
        //throw new Exception(exp.ToString(), exp);
        Response.Redirect("~/Default.aspx");
    }

}
 protected void ListView1_SelectedIndexChanging(object sender, ListViewSelectEventArgs e)
{
    ListView1.SelectedIndex = e.NewSelectedIndex;
    string id = ListView1.SelectedDataKey.Value.ToString();
    SqlDataSource1.SelectParameters["AnswerID"].DefaultValue = id;
    ListView1.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:04:29.957

试试这个来获取选定的行值

```
ListView1.SelectedIndex = e.NewSelectedIndex;
string id=ListView1.SelectedDataKey.Value.ToString();
//Then pass the id's value
ListView1.DataBind(); 
```

希望能帮助到你。

# database - 灵活的方式/数据库来保存大量数据

> ID：11030717
> 
> 赞同：3
> 
> 时间：2012-06-14T09:58:39.117
> 
> 标签：database, sqlite, database-design, data-structures

我有一个非常大的 SQLite 数据库（~10MB）。目前我在本地主机上使用这个数据库和一个自定义的 PHP 界面，但我也在寻找不同的存储和不同的界面。里面的数据变化不大，所以优先读取数据。

我对当前的设置不是很满意，因为数据库模式是“自定义”的，我不想在将来更改它（因为也许我会找到“更好的方法”）。我认为这不是标准的，将来可能会困扰我。

我的问题是：**存储非常灵活的数据的好方法是什么？**我正在寻找一种标准的数据存储，我只会填充一次。SQLite 仍然是最佳选择吗？

## 这个数据库里面有什么：

我将大致描述结构如何。

*   表A充满了问题；
*   表 B 充满了答案。每个问题都有不同的答案；
*   C 中的表格充满了关于问题 Y 的答案 X 的数据。每个答案都有许多不同的元数据可用。

## 什么是极其重要的：

*   快速查询；
*   通过 *NIX 实现可移植性，无需安装大量软件；
*   不太复杂的查询，我仍然需要一些连接；
*   不必每两个月更改一次架构。

## 什么*不重要*：

*   频繁更新（我每年更新一次数据库，或多或少）。

我想过使用文件和文件夹，但我不确定这是最好的选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T10:13:00.767

您的问题可以很好地建模为图问题。像 Orient DB 或 Neo4j 这样的基于图形的数据库呢？在 Graph 的一部分中可以有 2 个节点：一个代表问题 A，一个代表答案 B，​​连接它们的边可以包含表 c 数据或元数据。每个答案节点可以有来自多个问题节点的多个传入边，并且单个问题可以有多个答案。您不需要任何架构，我提到的数据库是 NoSQL 数据库。搜索将非常快，因为即使它们可以与 Lucene 搜索引擎集成以进行全文搜索，我相信因为您有问答，所以您需要全文搜索。

这是一个例子： ![在此处输入图像描述](../Images/b9068d1c3505f4946d67ae67b6c0d726.png)

# c - 目标文件缺少函数符号

> ID：11030722
> 
> 赞同：0
> 
> 时间：2012-06-14T09:58:52.137
> 
> 标签：c, linker, makefile, function-pointers, xenomai

我目前正在编写一个简短的测试应用程序。编译给了我这些错误：

```
CC main.c
Building ../bin/pmono
./main.o:(.data+0x18): undefined reference to `busy'
./main.o:(.data+0x58): undefined reference to `busy'
./main.o:(.data+0x98): undefined reference to `busy'
./main.o:(.data+0xd8): undefined reference to `busy'
./main.o:(.data+0x118): undefined reference to `busy'
./main.o:(.data+0x158): more undefined references to `busy' follow
collect2: ld a retourné 1 code d'état d'exécution 
```

我将尝试将代码缩小到特定部分。

这是我使用的包含所需参考的结构：

```
/*
 * Chained list of blocks from a frame of the cyclic executive
 */
typedef struct block {
   long c;                    /* Worst case execution time */
   long d;                    /* Deadline */
   long p;                    /* Period */
   void (*action) (long);       /* Action performed by this frame */
   struct block * next;       
} *Frame; 
```

函数指针是尚未编写的通用函数的占位符，在同一个 .h 文件中声明如下：

```
/*
 * Load the CPU for a determined time expressed in nanosecond
 */
void busy(long t); 
```

该函数目前在 c 文件中是空的：

```
void busy(long t) {
} 
```

最后，这是我在测试中使用的示例默认结构：

```
struct block D = {8,20,20,busy,0};
struct block C = {2,20,20,busy,&D};
struct block B = {3,10,10,busy,&C};
struct block A = {1,10,10,busy,&B};
Frame sequence0 = &A; 
```

所有这些部分都包含在一个公共源文件中，这些文件在许多周期性任务的实现之间共享。目标文件的编译似乎很好。当我尝试编译给定的实现时，我首先包含 .h 文件，编译 .o 文件，然后尝试使用 makefile 链接整个内容。这里有一个 makefile 可以给你一个想法：

```
BIN = ../bin/pmono
CC = gcc

SUBDIR = .
SRC = $(foreach dir, $(SUBDIR), $(wildcard $(dir)/*.c))
OBJ = $(SRC:.c=.o) $(wildcard ../common/*.o)
INCLUDES = 
WARNINGS = 
OPTIMISATION =
DEBUG =

XENO_CONFIG = /usr/xenomai/bin/xeno-config
XENO_POSIX_CFLAGS = $(shell $(XENO_CONFIG) --skin=posix --cflags)
XENO_POSIX_LDFLAGS = $(shell $(XENO_CONFIG) --skin=posix --ldflags)

CFLAGS = $(INCLUDES) $(XENO_POSIX_CFLAGS) $(WARNINGS) $(OPTIMISATION)
LDFLAGS = -lm $(XENO_POSIX_LDFLAGS) $(DEBUG)

all:.depend $(BIN)

%.o:%.c
    @echo "CC $<"
    @$(CC) -c $(CFLAGS) $< -o $@

$(BIN): $(OBJ)
    @echo "Building ${BIN}"
    @$(CC) $(OBJ) -o $@ $(LDFLAGS)

clean:
    rm -f $(OBJ)

distclean: clean
    rm -f $(BIN)
    rm -f ./.depend

.depend: $(SRC)
    @echo "Génération des dépendances"
    @$(CC) $(CFLAGS) -MM $(SRC) > .depend

-include .depend 
```

所以，我是这方面的初学者，这是我的理解：main.o中缺少busy函数的符号，而它存在于cyclic_executive.o文件中。我不明白这是怎么可能的，因为我包含了 cyclic_executive.h 文件，从而给出了正确的声明和原型。

我认为我做错了，但我缺乏想法。另外，我真的不喜欢我如何声明我的“默认”序列。我知道有一种正确的方法可以做到这一点，但我不记得了……有人有名字可以帮助搜索吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:58:46.290

您没有将文件与`busy()`函数调用链接。

从命令行试试这个：

```
gcc main.c cyclic_executive.c 
```

如果它有效，或者至少没有给出`busy()`函数错误，那将确认问题。然后尝试

```
make all 
```

这应该在执行所有命令时打印它们。如果您仍然在黑暗中，请尝试

```
make -d 
```

这将为您提供有关 make 实际操作的大量诊断信息。

# ruby-on-rails - 带有设计的 Pinterest 邀请系统

> ID：11030724
> 
> 赞同：0
> 
> 时间：2012-06-14T09:58:54.640
> 
> 标签：ruby-on-rails, web-services, devise, invite, invitation

**使用Devise 2.1**构建像 Pinterest 一样的简单邀请系统的最佳实践是什么？

换句话说，我想允许新用户使用邀请表进行注册。然后，我想这样：

1.  首先，Devise 发送一封“*感谢您加入 Fuu 等候名单*”的电子邮件。
2.  为了完成，也许每 3 小时有一个 cron 任务，Devise 发送一封“*你已被邀请加入 Fuu* ”的电子邮件。

我正在使用带有可确认模块的设计 2.1。我认为`devise_invitable`gem 在我的情况下没有用，因为受邀用户不应该能够邀请新用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:17:00.443

我之前问过一个类似的问题，也许对你有用：

[rails beta 请求注册并获得社交媒体分享奖励](https://stackoverflow.com/questions/10920466/rails-beta-request-signup-with-social-media-sharing-reward)

基本上，您要做的是将用户的电子邮件存储在“请求”模型中，这样您就可以得到一个表，您可以在其中存储电子邮件并创建一个字段类型为布尔值并处理。这导致：

```
|email         |processed|
john@doe.com    true
alex@google.com false 
```

然后在 /lib/tasks/ 中创建一个新的 rake 任务，它循环真实的所有请求并分批处理它们。这是一个粗略的想法，但它应该让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:23:53.887

让您入门的粗略想法：您基本上想要的是用户在您的邀请系统上注册的商店。Stackoverflow 不适用于完整的锻炼，它可以让您朝着正确的方向前进；）这太复杂了，无法完全写出来。

路线：

```
 get '/signup/:code' => "devise/registrations#new" 
```

控制器：

```
params[:code]

unless params[:code] 
   .. check if the code is correct
   .. render your form here
else
  .. you need an invitation code to join our site
end 
```

模型

```
on_create :set_processed
def set_processed
  .. set processed to true
end 
```

# html - 同一行上的图像文本

> ID：11030726
> 
> 赞同：1
> 
> 时间：2012-06-14T09:58:56.717
> 
> 标签：html, css, image

我一直在尝试在文本旁边显示图像。我想在与成本相同的行中显示 resources/rupee.png 图像，但成本出现在图像的底部。这是我的php代码：

```
...
    $display_query = mysql_query("SELECT * FROM eportal");

                        echo "<table id='pageTable'><thead><tr><th>Item code</th><th>Image</th><th>Description</th><th>Cost</th></tr></thead>";
                        echo "<tbody>";
                        while($row = mysql_fetch_array($display_query)){
                            echo "<tr><td>".$row['itemid']."</td><td>";
                            echo '<img src="resources/wh/'.$row['itemid'].'.png" title="'.$row['itemid'].'"/>';
                            echo "</td><td>".$row['description']."</td><td><span>";
                            echo '<img src="resources/rupee.png" />';
                            echo '</span><span class="cost">'.$row['cost'].'</span></td></tr>';
                        }
                        echo "</tbody>";
                        echo "</table>";
... 
```

和相关的CSS：（我可能已经搞砸了我的CSS代码，试图这样做很长时间）

```
#pageTable span{
    float:left
}
#pageTable .cost{
    float:left;
}
#pageTable span img{
    padding:3px 0 0 0;
    display : inline !important;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T10:33:11.367

尽管这可能不会直接回答您的特定查询，但我认为您不应该尝试以这种方式完成任务（如果您仍然希望在当前标记中使用 'img' 元素，一些其他建议的解决方案应该可以正常工作）。

如果我正在创建这个应用程序，我要么使用相关的 Unicode 符号来表示货币（[http://en.wikipedia.org/wiki/Indian_rupee_sign](http://en.wikipedia.org/wiki/Indian_rupee_sign)），要么只使用文本（“印度卢比”或其他）。如果您*确实*想使用特殊的图像符号，我倾向于不鼓励您在每一笔钱之前都使用“img”，因为这会造成很多重复，而且在我看来不是很干净。一个不错的解决方案可能是在一些自定义类上使用一些 CSS 伪元素：

**HTML：**

```
​&lt;span class="currency rupee">500</span>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**CSS：**

```
.currency:before {
    vertical-align:-2px;
    margin-right:5px;
    width: 16px;
    height: 16px;
}
.rupee:before {
    content: url(resources/rupee.png); /* Little 16x16 currency symbol */
} 
```

​</p>

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T10:12:44.923

你不能像这样简单地对齐它们吗？我不认为你需要一些花哨的 CSS，除非你的布局需要它。

```
<img src="resources/rupee.png" style="vertical-align: middle"> COST_TEXT_HERE 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-14T10:14:33.370

在图像标签上使用对齐

```
<img src="" align="texttop" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T10:15:39.127

您似乎只想将货币符号用作文本中的图像。然后使用更简单的方法：

```
<img src="resources/rupee.png" alt="Rs " style="height: 1em" />42.00 
```

（用您用来插入实际数字的任何代码替换 42.00）。

根据图像的设计，您可能需要使用 CSS 调整其垂直位置（`vertical-align`或者，更好的是相对定位），以使符号看起来位于文本的基线上。要获得有关此类调整的帮助，请发布图像的 URL。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T10:03:08.563

您当然可以将图像和文本放在单独的 tds 中...

比如：（省略所有属性等）

```
<tr>
    <td><img /></td>
    <td><span></span></td>
    <td><img /></td>
    <td><span></span></td>
    <td><img /></td>
</tr> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T10:38:35.057

```
 <html>
    <head>
    <style>
    img{
        display : inline !important; 
    }
    </style>
    </head>
    <body>
    <table>
    <tr>
    <td><img src="img.png"><span class="cost">cost</span></td>
    </tr>
    </table>
    </body>
    </html> 
```

# javascript - 在 Google Maps API 中获取标记的坐标

> ID：11030730
> 
> 赞同：52
> 
> 时间：2012-06-14T09:33:39.783
> 
> 标签：javascript, google-maps

我正在使用谷歌地图 API。我正在使用下面的代码来获取标记的坐标。

```
var lat = homeMarker.getPosition().$a;
var lng = homeMarker.getPosition().ab; 
```

我使用谷歌地图构建的应用程序一切正常。但是我今天对其进行了测试，但在获取正确坐标时遇到了问题。只是发现上面的代码变得未定义。在我 console.log(homeMarker.getPosition()) 之后，我发现这现在是他们用于坐标的变量。

```
var lat = homeMarker.getPosition().ab;
var lng = homeMarker.getPosition().cb; 
```

我不会问为什么谷歌地图会这样做，但您也可以将其包含在您的答案中。我的问题是，每次谷歌地图更改他们正在使用的变量时，如何在不更改代码的情况下正确获取坐标。

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-06-14T10:03:54.463

```
var lat = homeMarker.getPosition().lat();
var lng = homeMarker.getPosition().lng(); 
```

请参阅[google.maps.LatLng](https://developers.google.com/maps/documentation/javascript/reference#LatLng)文档和[google.maps.Marker](https://developers.google.com/maps/documentation/javascript/reference#Marker) `getPosition()`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-11-07T12:34:18.387

另一种选择

```
var map = new google.maps.Map(document.getElementById('map_canvas'), {
    zoom: 1,
    center: new google.maps.LatLng(35.137879, -82.836914),
    mapTypeId: google.maps.MapTypeId.ROADMAP
});

var myMarker = new google.maps.Marker({
    position: new google.maps.LatLng(47.651968, 9.478485),
    draggable: true
});

google.maps.event.addListener(myMarker, 'dragend', function (evt) {
    document.getElementById('current').innerHTML = '<p>Marker dropped: Current Lat: ' + evt.latLng.lat().toFixed(3) + ' Current Lng: ' + evt.latLng.lng().toFixed(3) + '</p>';
});

google.maps.event.addListener(myMarker, 'dragstart', function (evt) {
    document.getElementById('current').innerHTML = '<p>Currently dragging marker...</p>';
});

map.setCenter(myMarker.position);
myMarker.setMap(map); 
```

和html文件

```
<body>
    <section>
        <div id='map_canvas'></div>
        <div id="current">Nothing yet...</div>
    </section>
</body> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-06-09T14:59:42.067

此外，您可以通过“拖动”侦听器显示当前位置并将其写入可见或隐藏字段。您可能还需要存储缩放。这是工作工具的复制和粘贴：

```
 function map_init() {
            var lt=48.451778;
            var lg=31.646305;

            var myLatlng = new google.maps.LatLng(lt,lg);
            var mapOptions = {
                center: new google.maps.LatLng(lt,lg),
                zoom: 6,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            var map = new google.maps.Map(document.getElementById('map'),mapOptions);   
            var marker = new google.maps.Marker({
                position:myLatlng,
                map:map,
                draggable:true
            });

            google.maps.event.addListener(
                marker,
                'drag',
                function() {
                    document.getElementById('lat1').innerHTML = marker.position.lat().toFixed(6);
                    document.getElementById('lng1').innerHTML = marker.position.lng().toFixed(6);
                    document.getElementById('zoom').innerHTML = mapObject.getZoom();

                    // Dynamically show it somewhere if needed
                    $(".x").text(marker.position.lat().toFixed(6));
                    $(".y").text(marker.position.lng().toFixed(6));
                    $(".z").text(map.getZoom());

                }
            );                  
            } 
```

# c# - FluentNhibernate：在 XML 中配置数据库

> ID：11030731
> 
> 赞同：2
> 
> 时间：2012-06-14T09:59:27.900
> 
> 标签：c#, nhibernate, fluent-nhibernate

是否可以以经典方式配置数据库连接`hibernate.cfg.xml`，但使用 FluentNhibernate 映射实体？

我尝试的是以`configuration.Configure();`某种方式将经典与 结合起来`Fluently.Configure()`，但我还想不出办法。

我为什么要那个？因为我想将相同的二进制文件部署到运行来自不同供应商的数据库的不同客户。因此，我想避免为每种支持的数据库方言编译二进制文件。也许还有比上述方法更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:03:37.773

您可以正常加载 nhibernate 配置，与 Fluently.Configure 一起使用：

```
 // read hibernate.cfg.xml
 Configuration config = new Configuration().Configure();
 // load mappings from this assembly
 Fluently
      .Configure(config)
      .Mappings(
           m => m.FluentMappings.AddFromAssemblyOf<Program>())
      ); 
```

# view - 沙发数据库查询

> ID：11030737
> 
> 赞同：1
> 
> 时间：2012-06-14T09:59:55.383
> 
> 标签：view, map, couchdb

我是一个 couchDB 菜鸟，我没有运气从我的观点中获得过滤响应。无论查询如何，我总是能得到整个视图，这是没有意义的。

例如在用户数据库中......我尝试了这个地图功能，只是为了了解它是如何工作的。

```
 login: {
        map: function(doc){
            if (doc.firstName && doc.lastName)
                emit(doc.firstName, doc.lastName);
        }
    } 
```

教科书的东西对吗？

但是当我发布一个看起来像这样的查询时......

```
 {key: ["Mo"]} ... or ... {key:"Mo"} 
```

我拿回了一切……全貌！甚至这...

```
 {startkey:["Mo"], endkey:["Mo"]} ... or ... {startkey:"Mo", endkey:"Mo"} 
```

将查询编码到 url 并执行 GET 会给我同样的响应！！

我该怎么做才能完成这项工作？有什么特别的酱汁？我需要牺牲动物吗？还是我只是不够放松？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:20:20.360

因此，为了清楚起见，您的 URL 应如下所示：

```
http://your.server/your_db/_design/view_id/_view/view_name?key="Mo" 
```

大多数浏览器会将这些`"`s 正确编码为`%22`s

# css - 缩略图中的轮播标题？

> ID：11030739
> 
> 赞同：0
> 
> 时间：2012-06-14T09:59:59.710
> 
> 标签：css, twitter-bootstrap

我想在[此处](http://twitter.github.com/bootstrap/javascript.html#carousel)的轮播标题中的图像上使用标题，但在缩略图中的图像上。

我尝试使用“carousel-caption”类复制在缩略图中插入 div 来测试这一点。我更改了样式，使位置不是绝对的，并且边距为负，因此它覆盖了图像，但标题失去了背景。

这是示例 css

```
.carousel-caption {
background: none repeat scroll 0 0 rgba(0, 0, 0, 0.75);
margin-top: -30px;
padding: 10px 15px 5px; 
```

}

这是我所做的一个例子 [http://jsfiddle.net/vXMMA/73/](http://jsfiddle.net/vXMMA/73/)

如何让标题像在轮播中一样覆盖图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T10:08:14.700

据我了解，这就是您想要的[http://jsfiddle.net/vXMMA/162/](http://jsfiddle.net/vXMMA/162/)。像这样写：

```
legend {
    position:absolute;
    left:0;
    right:0;
    bottom:5px;
    text-align:center;
    background:rgba(0, 0, 0, 0.75);

}

.media-grid a {position:relative;} 
```

# dojo - 从 XmlStore 构建排序的道场数字树

> ID：11030740
> 
> 赞同：1
> 
> 时间：2012-06-14T10:00:00.100
> 
> 标签：dojo, dijit.tree, xmlstore

是否可以使用 XmlStore 中的数字树在 DOJO 中创建排序树？XML 中的数据并不总能保证排序。

如果可能的话，请帮助我一些指示。

# android - ActionBar.selectTab 在紧凑模式下不刷新微调器

> ID：11030744
> 
> 赞同：3
> 
> 时间：2012-06-14T10:00:31.143
> 
> 标签：android, android-actionbar

在应用程序中，我将选项卡与 ActionBar 一起使用，有时我使用 ActionBar.selectTab() 方法以编程方式切换选项卡。

这很好用，但是当 ActionBar 的宽度太小时，选项卡会进入紧凑模式，并显示为下拉菜单。当我使用 ActionBar.selectTab() 方法时，微调器中显示的项目不会改变。

是否有官方解决方案或已知的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T21:49:25.257

这是 Android 中的一个已知错误。请在[此处查看 Jake Wharton 建议的解决方法：](https://code.google.com/p/android/issues/detail?id=38500)并为问题加注星标，以便解决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T06:49:38.190

这个问题已经在[ActionBarSherlock github](https://github.com/JakeWharton/ActionBarSherlock/pull/512)上被问过了。ICS ActionBar 上似乎也存在这个问题。

可以通过更改链接中所述的来源来避免使用 ABS。对于本机 ActionBar，我设法使用反射来访问操作栏的下拉微调器。

# c# - 在foreach（单词中的字符串）中，如果（if-> true）C＃，我该如何转到下一个单词？

> ID：11030748
> 
> 赞同：3
> 
> 时间：2012-06-14T10:00:38.307
> 
> 标签：c#, .net, string

这个想法是他输入一个文本文件和一个单词编号。该软件将在一个新文件中写入文本，但每行包含单词数（他输入的），以及其他一些细节。

想法是这样的，我把他列入了黑名单。黑名单从文件加载到richbox，并在关闭应用程序时保存。

问题是我已经设置好了所有东西（一个检查单词是否在黑匣子中的功能）。

该软件如下所示：

```
foreach (string word in words)
{
     int blacklist = 0;

     if (FindMyText(word))
     {
           blacklist = 1;
           MessageBox.Show("Current word: " + word + " is blacklisted!");
     }
     else
           MessageBox.Show("Word: " + word);               

     // the code here ... for writing in file and all that

     } 
```

函数 FindMyText(word) 告诉我这个词是否在黑名单中。

如果该函数返回 true，我想跳到下一个单词，但真的不知道该怎么做。

如果你有一些想法，真的会帮助我。

谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:05:46.277

在 foreach 循环或任何其他循环中，您可以使用`continue`跳到下一次迭代，所以在您的情况下，您可以这样做

```
foreach (string word in words)
{
  var blacklist = 0;
  if (FindMyText(word))
  {
    blacklist = 1;
    MessageBox.Show("Current word: " + word + " is blacklisted!");
    continue;
  } else {
     //...
  }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:06:43.933

您可以只添加“继续”键以跳到 foreach 迭代中的下一个元素。

```
foreach (string word in words)
{
    int blacklist = 0;
    if (FindMyText(word))
    {
        blacklist = 1;
        MessageBox.Show("Current word: " + word + " is blacklisted!");
        // skip to the next element
        continue;
    }

    MessageBox.Show("Word: " + word);
    // the code here ... for writing in file and all that

} 
```

或者您可以拆分 foreach 正文：

```
foreach (string word in words)
{
    int blacklist = 0;
    if (FindMyText(word))
    {
        blacklist = 1;
        MessageBox.Show("Current word: " + word + " is blacklisted!");
    }
    else
    {
        MessageBox.Show("Word: " + word);
        // the code here ... for writing in file and all that
    }
} 
```

这完全取决于“其他”部分的长度。如果真的很长，使用 continue 更易读，重点放在跳过的部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T10:06:48.923

您已经有了逻辑，只需添加`continue`：

continue 语句将控制权传递给它出现的封闭迭代语句的下一次迭代。它采用以下形式：

```
if (FindMyText(word))
{
  blacklist = 1;
  MessageBox.Show("Current word: " + word + " is blacklisted!");
  continue;
}
else
{
   MessageBox.Show("Word: " + word);
  AddWordToFile(word); // not black listed;
} 
```

[http://msdn.microsoft.com/en-us/library/923ahwt1(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/923ahwt1(v=vs.71).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T10:07:31.933

我不是 100% 确定我理解，但我认为你想要的是“继续”关键字。

一旦循环的迭代完成，它将重新开始，直到迭代结束。

所以在你的 IF/Else 语句中，你想强制循环进入下一个单词，你输入 continue;。这将忽略循环中所有前面的代码并跳转到下一次迭代。

那有意义吗？

# javascript - JavaScript 通过引用/链接/等更改对象值

> ID：11030757
> 
> 赞同：0
> 
> 时间：2012-06-14T10:01:16.917
> 
> 标签：javascript

是否可以不直接更改对象的值？

例如

```
a = {x: 5}

b = a.x
b = 100

a.x // => 5 
```

我想得到 100，但实际上`a.x`仍然是 5。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T10:03:26.863

不像你要去，不。你可以这样做：

```
a = { x: 5 };
b = a;
b.x = 100;
a.x // => 100 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:05:43.180

是的你可以。对对象的所有引用都是相等的，无论它是否是第一个。但是，`a.x`它不是一个对象，它是对象的属性`a`，所以当`b = a.x`你复制该属性的一个值时，它恰好是一个简单的数字`b`。`b`没有以`a`任何方式链接到，分配其他东西对.`b`将无济于事`a`。您需要分配`b = a`，然后您可以将`.x`两个变量引用的对象的属性修改为`a.x`或`b.x`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T10:31:47.637

只需将数字用作对象，而不是文字：

```
a = {x: {v: 5}}

b = a.x
b.v = 100

a.x​​.v // => 100 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T10:04:38.040

在 JavaScript 中不可能实现这一点。5 是一个数字类型，它是一个值类型。与函数、对象或数组不同，无法通过引用访问它。

# uipickerview - 获取 UIPicker 第一行的值

> ID：11030758
> 
> 赞同：0
> 
> 时间：2012-06-14T10:01:18.850
> 
> 标签：uipickerview

首先，抱歉，因为我看过一些关于此的帖子，但我无法理解。我的问题是这样的：我有一个从 NSArray 获取值的 UIPickerView。除非我得到选择器第一行的值，否则一切正常。我已经读过方法 - (void) pickerView: (UIPickerView *) pickerView didSelectRow: (NSInteger) row inComponent: (NSInteger) 组件仅在用户在选择器中向上或向下滚动时运行。那么如何在 NSString 中获取选择器的第一个值呢？这是我的方法：

```
 - (Void) pickerView: (UIPickerView *) pickerView didSelectRow: (NSInteger) row     inComponent: (NSInteger) component
{

 NSLog (@ "are in line% i", row);

 NSLog (@ "You've selected,% @", [array objectAtIndex: row]);

} 
```

我有一个名为“数组”的数组，他包含数据；

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:09:21.140

很多人都面临过类似的问题（如果人们在 UIPickerView 中选择默认值怎么办），您可能需要查看以下帖子以解决您的特定问题：
[https ://stackoverflow.com/a/789633/200272](https://stackoverflow.com/a/789633/200272)

# css - IE9渐变+图片

> ID：11030759
> 
> 赞同：1
> 
> 时间：2012-06-14T10:01:22.110
> 
> 标签：css, internet-explorer

我想将`filter`CSS 属性用于渐变和图像。我发现并尝试了以下内容：

```
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/Controls/Calendar/Events/email.png'), progid:DXImageTransform.Microsoft.gradient( startColorstr='#D9D9D9', endColorstr='#989898',GradientType=0 ); /* IE6-9 */ 
```

问题是只有过滤器的第一部分适用。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:12:17.940

根据[Microsoft Developer Network](http://msdn.microsoft.com/en-us/library/ms532847%28v=vs.85%29.aspx#CSS_Filters)，您可以通过用空格分隔它们来“应用多个过滤器”。

使用以下代码（两个过滤器之间没有逗号）应该可以工作：

```
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/Controls/Calendar/Events/email.png') progid:DXImageTransform.Microsoft.gradient( startColorstr='#D9D9D9', endColorstr='#989898',GradientType=0 ); /* IE6-9 */ 
```

# ruby-on-rails - 查看 ActiveRecord::Relation 对象的内容

> ID：11030760
> 
> 赞同：1
> 
> 时间：2012-06-14T10:01:23.813
> 
> 标签：ruby-on-rails

我生成了一个 AR 查询，它返回了上述类型的对象。该对象的名称为`#<Review id: 26>`

我正在学习如何进行高级连接查询，我想知道我是否已经生成了所需的对象。必须将对象分配给一个变量，然后慢慢弄清楚如何使用您希望包含在其中的数据来迭代它的内容，这是一件令人头疼的事情。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:01:45.893

可能您正在寻找`variable_name.to_json`.

# backbone.js - Backbone.js：获取集合后引发模型更改事件？

> ID：11030762
> 
> 赞同：3
> 
> 时间：2012-06-14T10:01:28.650
> 
> 标签：backbone.js

我有一个带有 name 属性的模型，该属性具有在属性更改时要调用的绑定函数：

```
var Workitem = Backbone.Model.extend({
                                 initialize: function(){
                                 this.bind('change:name', function() {
                                           alert('name');
                                           }
                                           });
                                 },
                                 defaults: {
                                 name: 'Name'
                                 }
                                 }); 
```

如果我获取单个模型，这将起作用，并且当我设置属性和获取数据时会触发更改事件。

但后来我创建了一个集合，我希望在 fetch 方法期间为每个提取的模型触发事件到集合中：

```
var WorkitemList = Backbone.Collection.extend({
                                       model: Workitem,
                                       });

var workitemsList = new WorkitemList();
workitemsList.fetch(); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:50:49.153

导入完成后，Fetch 会触发集合上的“重置”事件。听着，然后开火/弄乱模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T15:11:22.000

您可以覆盖集合的`fetch`-function 以分别在每个模型上调用 fetch 。但这是非常蛮力的。

```
fetch: function() {
  for (var model: this.models) {
    model.fetch();
  }
} 
```

任何人都有更好的方法来实现这一点？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:07:34.947

获取集合会用服务器响应替换集合中的模型。它不会更新集合中的每个模型，这是您想要的。最简单的解决方法是遍历集合以获取每个模型，然后您对服务器有多个请求并错过任何新添加的模型..

我认为对于您想要实现的目标，您需要创建并获取您的集合的另一个实例，然后将其中的模型与您的原始集合进行比较并根据需要进行更新.. 不是很漂亮..

# salesforce - 如何创建链接

> ID：11030763
> 
> 赞同：0
> 
> 时间：2012-06-14T10:01:29.390
> 
> 标签：salesforce, apex-code

在我的 VF 页面中，我想添加一个指向另一个对象的链接，以创建该对象的新记录。谁能帮我找到这个问题的解决方案。谢谢阿努

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:31:01.777

如果您正在寻找对象的标准“新记录”页面，您可以使用全局`$Action`变量，`URLFOR`如下所示：

```
<apex:page>
  <apex:outputLink value="{! URLFOR( $Action.Account.New ) }">New Account</apex:outputLink>
</apex:page> 
```

此语法还支持动态绑定：

```
<apex:page>
  <apex:repeat var="object" value="objects">
    <apex:outputLink value="{! URLFOR( $Action[object].New ) }">New {! object}</apex:outputLink>
  </apex:repeat>
</apex:page> 
```

您还可以使用以下可选参数将参数传递给新页面`URLFOR`：

```
<apex:page>
  <apex:outputLink value="{! URLFOR( $Action.Account.New, null, [acc2='Account Name'] ) }">New Account</apex:outputLink>
</apex:page> 
```

如果您想直接导航到另一个 Visualforce 页面，您可以使用`$Page`全局变量：

```
<apex:page>
  <apex:outputLink value="{! $Page.MyVfPage }">Go to my VF Page</apex:outputLink>
</apex:page> 
```

# python - 一个带socat的虚拟串口

> ID：11030766
> 
> 赞同：1
> 
> 时间：2012-06-14T10:01:40.023
> 
> 标签：python, pyserial, socat

如何用socat创建一个虚拟端口？

我想测试 pyserial 通过一个端口进行读写

我已经尝试过：

```
socat -d -d pty,raw,echo=1 pty,raw,echo=1 
```

它创建两个虚拟端口 /dev/pts/9 和 /dev/pts/10

当我尝试时：

```
ser.write('test\n') 
```

在另一个控制台中，我尝试阅读：

```
ser2.readline() 
```

超时时，pyserial 将 '\n' 读取为 '^J'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:38:46.187

`^J`是一样的`\n`，见[维基百科](http://en.wikipedia.org/wiki/Control_character)。我无法重现您遇到的阻塞：

```
$ socat -d -d pty,raw,echo=1 pty,raw,echo=1
2012/06/14 14:29:13 socat[28866] N PTY is /dev/pts/3
2012/06/14 14:29:13 socat[28866] N PTY is /dev/pts/5
2012/06/14 14:29:13 socat[28866] N starting data transfer loop with FDs [3,3] and [5,5] 
```

1号航站楼：

```
>>> import serial
>>> s = serial.Serial('/dev/pts/5')
>>> s.readline()
'hello\r\n'
>>> s.readline()
'hello\n' 
```

2号航站楼：

```
>>> import serial
>>> s = serial.Serial('/dev/pts/3')
>>> s.write('hello\r\n')
7
>>> s.write('hello\n')
6 
```

`readline()`一旦我在另一个终端中执行 write，调用就会返回。

# magento - 块上的操作方法什么都不做

> ID：11030768
> 
> 赞同：1
> 
> 时间：2012-06-14T10:01:45.403
> 
> 标签：magento, magento-1.5

我有以下块定义，它可以很好地输出“my/type”块：

```
<block type="my/type" template="my/template.phtml">
  <action method="setMyFlag"><value>MyValue</value></action>
</block> 
```

只有一个问题： setMyFlag 没有被调用。我之前在其他自定义块上成功使用过这种方法，但由于一些未知的原因，我无法让它工作。

我实际上依赖于魔法设置器，但我也刚刚将 setMyFlag 方法添加到 My_Type 并在其中放置了一个断点。一切都无济于事。

关于这里可能出现什么问题的任何线索？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T10:03:55.947

经过一些调试，似乎有一个名称是块能够在其上调用方法的先决条件。因此，只需添加一个名称即可解决我的问题：

```
<block type="my/type" template="my/template.phtml" name="my_name">
  <action method="setMyFlag"><value>MyValue</value></action>
</block> 
```

# c++ - 有没有办法在考虑到崩溃的情况下同步进程？

> ID：11030771
> 
> 赞同：3
> 
> 时间：2012-06-14T10:01:52.370
> 
> 标签：c++, multithreading, winapi, synchronization

我正在做一个涉及两个进程的项目，让它们成为 A 和 B。A 有两个线程：T1 和 T2。

A 和 B 分别运行。

在某个时刻，T1 向 B 发送一条消息（这是一个 COM 调用，一个搜索请求）。当 B 处理了一些数据后，它通过将结果（同样，它是一个 COM 调用，搜索结果）直接发送给 T2 来返回。我需要 T1 阻止，直到 T2 处理完 B 的数据。到目前为止，我使用了以下解决方案：

初始化： `searchSyncSempahore = ::CreateSemaphore(NULL, 0, 1, NULL);`

T1：

```
B_handle->search(searchString);
::WaitForSingleObject(searchSyncSempahore, INFINITE);
// Use searchResult variable 
```

T2：

```
searchResult = _some_data_from_B;
::ReleaseSemaphore(searchSyncSempahore, 1, NULL); 
```

到目前为止，这有效。即使 B 如此之快以至于 T2 在 T1 到达 WaitForSingleObject 行之前调用 ReleaseSemaphore，它也可以工作。

我的问题是：如果 B 崩溃会发生什么？T1 将永远等待。我必须指定超时时间，但如果 T2 收到结果时它太低，它只会搞砸信号量，弄乱下面的搜索。

那么考虑到 T2 永远不会被调用（即如何实现“中止搜索”），我如何正确同步这两个线程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T10:14:35.320

可能的解决方案是创建一个**看门狗线程，该线程将使用**[手动重置事件](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682655%28v=vs.85%29.aspx)来处理这种情况。所以逻辑会改变一点：你可以等待事件，而不是等待互斥体。看门狗线程可以检查线程是否卡住了很长时间，只是自己设置事件，并且可以设置一个额外的事件来说明出现了危急情况。我的意思是这第三个线程可以充当**看门狗计时器**。

另一种变体是在第三个线程中使用**[条件变量](http://msdn.microsoft.com/en-us/library/ms682052%28v=vs.85%29)**。因此，您可以简单地启动条件变量之一，它会唤醒等待它的线程。我必须承认，我对这种方法不是很熟悉。

**更新**：考虑使用[SignalObjectAndWait](http://msdn.microsoft.com/en-us/library/ms686293%28VS.85%29.aspx)函数。该函数向一个对象发出信号并作为单个操作等待另一个对象。此外，您可以设置等待超时，如果时间间隔过去，即使对象的状态是非信号状态，该函数也会返回。

使用线程看门狗的另一个好处是，您可以在其中执行其他操作：记录到文件甚至 MS EventLog 中，或者可以提供更改应用程序行为的逻辑。另一个例子是看门狗线程可以实现“线程冗余”功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T11:26:47.640

比显式看门狗更简单的方法可能是等待进程句柄。

Windows 等待函数可以等待几乎所有作为句柄的东西（文件、套接字、线程、进程、事件……）。

因此，使用*信号*`WaitForMultipleObjects`量和进程句柄（或主线程句柄）并将其放入等待集中。如果信号量发出信号或进程终止（无论出于何种原因），则等待函数应相应返回。

 *您可以从返回值中区分是哪个对象导致等待函数返回（应该是`WAIT_OBJECT_0`或`WAIT_OBJECT_0 + 1`）。*如果在您调用等待函数之前*已经发生崩溃，则句柄无效，在这种情况下，等待函数应该返回`WAIT_FAILED`，所以这是另一个应该检查的条件。*

# java - Line2D 厚度（太厚）

> ID：11030775
> 
> 赞同：3
> 
> 时间：2012-06-14T10:02:20.067
> 
> 标签：java, graphics, 2d, awt, java-2d

我得画个图。我使用 AWT 库来做到这一点。

问题是，我需要画出非常细的线。但我总是得到太粗的线条。

在这里你可以看到，我的意思。

![在此处输入图像描述](../Images/c4e6b60e8f6a863e680d51d4e9c4dd0d.png)

这是绘制这些线条的代码

```
BufferedImage image = new BufferedImage(300, 60, BufferedImage.TYPE_INT_ARGB);
Graphics g = image.createGraphics();
Graphics2D g2 = (Graphics2D) g;
g2.setColor(Color.BLACK);
g2.setStroke(new BasicStroke(0.001f,BasicStroke.CAP_BUTT, BasicStroke.JOIN_MITER));
Shape s = new Line2D.Double(new Point2D.Double(x_pos, unten - 9),
                            new Point2D.Double(x_pos, unten - 4));
g2.draw(s); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:11:02.080

代替

```
Shape s = new Line2D.Double(new Point2D.Double(x_pos, unten - 9),
                            new Point2D.Double(x_pos, unten - 4));
g2.draw(s); 
```

尝试使用

```
g2.drawLine(x_pos, unten - 9, x_pos, unten - 4); 
```

这些`Shape`东西并不能真正应对低于 1 的厚度......（据我所知）

并且请不要在编码时混合使用不同的语言，这会让我患上眼癌（即使它是德语）：P。最好的是，坚持使用英文变量名，因为所有关键字也是英文的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-08T06:48:28.900

尝试：

```
g2.setStroke(new BasicStroke(0.5f)); 
```

或任何其他适合您需要的值。

# iphone - 如何在 cocos2d 中设置基于计时器的重生系统？

> ID：11030776
> 
> 赞同：0
> 
> 时间：2012-06-14T10:02:21.660
> 
> 标签：iphone, xcode, ios5, cocos2d-iphone, sprite

我想根据计时器重生敌人的精灵，任何建议都将不胜感激。如果您向我展示一些代码示例，那就太好了。

```
 -(void)addEnemyAtX:(int)x y:(int)y {
  CCSprite *enemy = [CCSprite spriteWithFile:@"enemy1.png"];
  enemy.position = ccp(x, y);
  [self addChild:enemy];
  [self animateEnemy: enemy];}

  - (void) enemyMoveFinished:(id)sender {
CCSprite *enemy = (CCSprite *)sender;

    [self animateEnemy: enemy];
 }// a method to move the enemy 10 pixels toward the player
 - (void) animateEnemy:(CCSprite*)enemy
    {
    // speed of the enemy
     ccTime actualDuration = 0.3;

     // Create the actions
        id actionMove = [CCMoveBy actionWithDuration:actualDuration
                                                    position:ccpMult(ccpNormalize(ccpSub(player.position,enemy.position)), 10)];
     id actionMoveDone = [CCCallFuncN actionWithTarget:self
                                         selector:@selector(enemyMoveFinished:)];
          [enemy runAction:
                 [CCSequence actions:actionMove, actionMoveDone, nil]];

         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:20:27.983

我认为你应该先学习 Cocos2D 的基础知识 ;) 《学习 Cocos2D》一书中对它进行了很好的介绍——我推荐它！尽管如此，这是您想要的代码行，但我怀疑它是否有用；）

```
action = [CCSpawn actions:
          [CCAnimate actionWithAnimation:animation
break;
restoreOriginalFrame:NO],
[CCMoveTo actionWithDuration:2.4f
 position:ccp([self position].x +
 nil];
xPositionOffSet,
[self position].y)], 
```

# asp.net - ItemDataBound 在删除命令上调用了两次

> ID：11030778
> 
> 赞同：0
> 
> 时间：2012-06-14T10:02:29.367
> 
> 标签：asp.net, vb.net, listview, itemdatabound

我有一个列表视图的问题。

我在列表视图中单击删除按钮时这样做：（代码简化，它应该删除）

```
Protected Sub rlvCarts_ItemCommand(sender As Object, e As RadListViewCommandEventArgs)
        If e.CommandName = RadListView.DeleteCommandName Then
                           mylistItem.items.RemoveAt(e.CommandArgument.ToString)                    
            BindData()            
        End If
End Sub

 Protected Sub BindData()
     rlvCarts.DataSource = mylistItem.items
     rlvCarts.DataBind()
 End Sub 
```

删除时会出现问题，它将执行 itemdatabound 两次（但 listview prerender 一次）。

它是怎么来的？我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:15:49.923

已解决：我必须添加`e.Canceled = True`

```
Protected Sub rlvCarts_ItemCommand(sender As Object, e As RadListViewCommandEventArgs)
        If e.CommandName = RadListView.DeleteCommandName Then
                           mylistItem.items.RemoveAt(e.CommandArgument.ToString)   
            e.Canceled = True     
            BindData()            
        End If
End Sub 
```

调用命令时防止**“自动重新绑定”**

# heroku - 如何在 Procfile 中声明 PHP (web) 和 ruby (worker)

> ID：11030781
> 
> 赞同：3
> 
> 时间：2012-06-14T10:02:52.357
> 
> 标签：heroku

我正在尝试创建一个 facebook web 应用程序（我需要 web 是 PHP）和一个工人来处理任务 vie 消息队列添加（我需要它在 Rube - 我认为..）。

当我添加 Gemfile 时，heroku 完全停止将我的应用程序识别为 PHP。

所以我希望在procfile中添加'web：“PHP声明”'可以解决我的问题，但似乎找不到关于如何做到这一点的文档。

[http://blog.heroku.com/archives/2011/6/20/the_new_heroku_1_process_model_procfile/](http://blog.heroku.com/archives/2011/6/20/the_new_heroku_1_process_model_procfile/)

[https://devcenter.heroku.com/articles/procfile](https://devcenter.heroku.com/articles/procfile)

有没有不同的方法来实现我的目标？任何建议都非常受欢迎:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:06:05.323

ruby 代码是否与 php 分开？它们在同一个文件中吗？

# php - 执行功能上的MongoDB错误

> ID：11030785
> 
> 赞同：-1
> 
> 时间：2012-06-14T10:03:15.087
> 
> 标签：php, mongodb, database

我有以下代码用于运行 mongo 查询，其中“mongotester”是数据库名称，“类别”是集合名称

我正在使用 PECL mongodb 库

```
$m = new Mongo();
$db = $m->selectDB('mongotester');
$a = $db->execute('return mongotester.categories.count();');
echo "<pre>";
var_dump($a);
echo "<pre>"; 
```

当我运行它时，我收到以下错误，

```
array(3) {
   ["errno"]=>
   float(-3)
  ["errmsg"]=>
     string(78) "invoke failed: JS Error: ReferenceError: mongotester is not defined     nofile_a:0"
  ["ok"]=>
  float(0)
} 
```

请帮我纠正这个问题。

谢谢

[phpqa.in](http://phpqa.in)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:08:39.707

您可以直接引用集合，而不是尝试执行（）javascript 来计算，例如：

```
$m = new Mongo();
$db = $m->selectDB('mongotester');
$a = $db->categories->count();
echo "<pre>";
var_dump($a);
echo "<pre>"; 
```

在这种情况下 var_dump 只会显示 int(0) ，除非您实际上已将一些数据插入到*类别*集合中。

# facebook - 自定义 facebook 之类按钮/粉丝数 - 不使用 facebook 之类的按钮生成代码

> ID：11030788
> 
> 赞同：0
> 
> 时间：2012-06-14T10:03:21.717
> 
> 标签：facebook, facebook-like, facebook-javascript-sdk, facebook-php-sdk

这可能是一个简单的解决方案，但我能找到的只是 facebook 之类的按钮和共享 URL，这对我不起作用。

我想在我的网站上有一个按钮来喜欢这个 URL ... [http://facebook.com/examplepage](http://facebook.com/examplepage) ...并且还检索粉丝数。

是否可以使用 facebooks PHP 或 Javascript SDK 来创建我自己的？我已经将 facebook php SDK 加载到我的网站中。

因为如果当前登录的 facebook 用户已经喜欢该页面，我需要我的按钮图形更改为“喜欢”，如果登录用户不喜欢该页面，则说“喜欢我们”？

是否可以在单独的 div 中检索 facebook 页数？

如果有人分享您用来实现类似目标的任何指针、教程链接或代码……那将是很棒的。

请看下面我试图实现的设计，你就会明白为什么我需要自己做。

![在此处输入图像描述](../Images/c796226ef04ebadb399a10cda2a41ad7.png)

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:09:50.047

在画布/页面选项卡应用程序之外，您必须先获得用户许可才能阅读他的喜好。如果您的应用程序通常需要登录并授予权限，您可以包含 user_likes 权限，然后询问 Graph API 用户是否已经喜欢您的页面/网址。但如果没有，或者用户是未知的（只是一个随机的站点访问者），那么这是不切实际的/甚至是不可能的。

对于一个页面的点赞数，您可以单独从 API 中查询，但它还需要一个页面访问令牌。

（如果您不熟悉这些技术/术语，请开始阅读有关这些问题的 Facebook 文档。）

# java - Hibernate Validator 3.1.0.GA 忽略 ValidationMessages.properties（包括测试项目）

> ID：11030789
> 
> 赞同：1
> 
> 时间：2012-06-14T10:03:24.327
> 
> 标签：java, bean-validation, hibernate-validator

我遇到了 Hibernate Validator 3.1.0.GA 的问题，它没有在属性文件 ValidationMessages.properties 中查找自定义验证消息。

为了说明这个问题，我创建了一个小示例项目，您可以通过 git 获取它：

```
git clone https://bitbucket.org/sstein/validation-example.git 
```

获得源代码树后，您可以通过运行我创建的单元测试来测试问题：

```
mvn test 
```

有 3 个测试用例， validateDescriptionTest(com.example.MyClassTest) 失败：

> 预期：<[描述的长度必须在 1 到 10 个字符之间。]> 但是是：<[{descriptionMsg}]>

我还添加了一个测试用例，验证资源包是否可以通过单元测试访问，并且可以正常工作。

有谁知道为什么这个失败？

PS：我完全重写了我最初的问题，添加了示例，以便您可以自己尝试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:25:22.417

ValidationMessages.properties 的最终位置应该在 WEB-INF/classes 中。它如何到达那里取决于您使用的构建系统以及您如何配置它。在 NetBeans IDE 中，当我创建 Web 应用程序时，我可以将 ValidationMessages.properties 放入默认的 Java 包中。

如果您使用 Maven 作为构建工具，请将属性放入 /src/main/resources 目录，这样 Maven 会将其复制到 WEB-INF/classes 中。

要确保属性文件就位，请将 .war 文件作为 ZIP 打开并查看一下。另一种判断方法是检查 JSF 是否接收到内部的验证器消息。

对于像@Size 这样的JSR-303 消息，上面的属性键应该是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:45:39.750

所以解决方案很简单，[由 Hibernate 的 Hardy Ferentschik 发现](https://forum.hibernate.org/viewtopic.php?f=9&t=1016107)：

在 Hibernate Validator 3.1.0.GA 中，bundle 必须称为**ValidatorMessages.properties**而不是**ValidationMessages.properties**。

# javascript - 在 javascript 中使用 razor 语法时出现条件编译错误/警告（cc_on 在此上下文中不存在）

> ID：11030792
> 
> 赞同：1
> 
> 时间：2012-06-14T10:03:29.910
> 
> 标签：javascript, asp.net-mvc-3, razor, conditional-comments

我在 JavaScript 代码内的 ASP.NET MVC3 视图中使用 Razor 语法，但我收到“条件编译已关闭”警告。我搜索了它，发现 `/*@cc_on @*/`在代码打开它之前使用。但我收到一个错误“当前上下文中不存在名称 'cc_on'”。有任何想法吗？我到底应该在哪里给`/*@cc_on @*/`？

**示例代码：**

```
<script type ="text/javascript">
     @*
          - some multi-line comment stuff here
          - apparently the at signs cause syntax errors --argh!
     *@ 
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:13:15.880

让我猜猜...尝试以下操作：

```
/*@("@cc_on @")*/ 
```

或者

```
@("/*@cc_on @*/") 
```

无论你喜欢什么

我希望它是正确的 Razor 语法。一个想法是将此值呈现为`@`razor 使用的字符串（在您的情况下，编译器认为您想要输出`@cc_on`未声明的变量）

# asp.net-mvc-3 - 使用 MVC 构建大型项目软件

> ID：11030794
> 
> 赞同：4
> 
> 时间：2012-06-14T10:03:37.180
> 
> 标签：asp.net-mvc-3, design-patterns, architecture

我正在用MVC构建一个大项目，它的结构最好的方式划分，包括Backend和客户。我可以用产品管理制作一个示例项目。开发高手能帮帮我吗？ [链接相关](https://stackoverflow.com/questions/7474267/mvc3-and-entity-framework)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T12:13:09.787

这个问题没有正确或错误的答案。但是，我强烈建议您阅读以下帖子以获得更好的想法：

1）[对于大型企业项目来说，ASP.NET MVC 是不是一个糟糕的选择？](https://stackoverflow.com/q/570705/1437962)

2)[一个开源asp.net mvc项目的项目结构推荐](https://stackoverflow.com/q/1363955/1437962)

3）[企业ASP.NET MVC 3架构大纲](https://stackoverflow.com/q/6036692/1437962)

4)[在 Visual Studio 中设置“企业”项目的最佳实践？](https://stackoverflow.com/q/557261/1437962)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:05:25.140

我有时也会纠结于在我的项目解决方案中放置某些东西的位置。我通常会浏览一些开源项目的源代码，例如[Kigg](http://kigg.codeplex.com/)、[Shrinkr](http://shrinkr.codeplex.com/)、[Orchard CMS](http://www.orchardproject.net/)、[Nop Commerce](http://www.nopcommerce.com/default.aspx)等，并尝试实现类似于这些人的解决方案结构。从事这些解决方案的开发人员是专业人士，他们知道什么对他们最有利。

每个项目都是不同的，应该有相应的结构。我喜欢 Kigg 的结构方式，简单明了，易于理解，我建议你看看它。

下载这些项目的源代码，浏览并处理代码，看看他们是如何做的。

一切顺利 ：）

# c++ - 关于重载“=”以及是否可以避免它

> ID：11030796
> 
> 赞同：0
> 
> 时间：2012-06-14T10:03:37.837
> 
> 标签：c++, operator-overloading

我有一个二叉搜索树，我使用模板向其中添加任何类对象。

我有一个返回所述类对象或 NULL 的搜索功能

我需要重载“=”来返回这个对象吗？我希望如果我返回对象，它会知道检查：如果相同类型将存储在 LHS 中的值替换为存储在 RHS 中的值，并且如果 NULL 将第一个对象标记为 NULL。

我的错误是否可能在其他地方（我返回的只是完整对象或 NULL，仅此而已）还是我实际上必须重载它？

我的时间有限（非常）所以如果需要我该怎么做？这是一个快速的过程还是会涉及很多修改。

抱歉缺少代码，但我想不出任何相关的代码。

**编辑**我也使用了很多 NULL 所以我可以将 NULL 返回到一个对象中吗？例子：

```
class Matrix {
   private:
     int col;
     int line;
     int value;
}

Matrix mat; mat = NULL; 
```

一些代码：

```
template <typename Type>
Type BST<Type>::search(int key) {
    if (this->root == NULL)
        return NULL;
    else
        return root->search(key); 
```

这里类型是矩阵。我可以返回 NULL 还是进一步搜索并返回 Type，这又是 Matrix？

**注意：这是出于家庭作业目的，泄漏内存是我最后关心的问题。到目前为止，简单和速度是我的第一个问题**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:09:02.327

不，您不能分配`NULL`给对象。

```
Matrix mat; mat = NULL; 
```

在你的情况下是非法的。如果您希望能够拥有`NULL`，则可以使用指针（原始或智能）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:08:01.003

要从函数返回对象，它必须具有可访问的副本或移动构造函数。它不需要赋值运算符；这只需要分配。当然，如果您将函数结果分配给先前声明的变量，您将需要它。

请注意，如果您不自己处理它们，则会自动生成公共复制构造函数和复制赋值运算符。

但是，如果您的对象正在管理在其析构函数中释放的资源，那么您需要考虑[三法则](https://stackoverflow.com/questions/4172722)。您应该实现或删除复制构造函数和赋值运算符；否则，很容易意外引入内存泄漏，更糟糕的是，两个对象都试图释放相同的资源。

要回答新问题，您不能返回空指针来代替对象。您可以返回一个指针（可以是指向树中包含的内容的原始指针，也可以是指向`std::unique_ptr<Type>`新分配副本的智能指针，以降低内存泄漏的可能性），或者可以为空的对象类型，例如`boost::optional<Type>`.

# flash - 用于闪存的 box2d 2.1 中的碰撞掩码位出现问题

> ID：11030802
> 
> 赞同：0
> 
> 时间：2012-06-14T10:03:54.657
> 
> 标签：flash, box2d, mask, collision, bit

Salut，我目前正在使用 box2d 进行 Flash 中的台球游戏，我被碰撞过滤所困。

我尝试做的是在球进入口袋时更改球的碰撞掩码位，这样它就不会碰撞其他球（我不想删除物理对象，因为我需要先做一些效果）。

碰撞掩码位似乎更改得很好，但它不会立即生效，因为袋装球在完全不可碰撞之前仍然会碰撞一段时间。

我不知道为什么，真的可以在运行时更改掩码位吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:04:14.723

当两个灯具彼此靠近时（特别是当它们的 AABB 开始重叠时），会创建一个 b2Contact 来管理它们之间的交互。碰撞的相关数据（摩擦、恢复等）被复制到这个 b2Contact 中，并一直存在到 AABB 停止重叠为止。这样做是为了提高效率，但副作用是只要两个 AABB 保持重叠，就不再检查碰撞掩码位。

解决此问题的一种方法是通过在 PreSolve 回调中调用 contact->SetEnabled(false) 手动取消默认的碰撞响应，以处理与袋装球的任何碰撞。每次接到 PreSolve 电话时都需要这样做。

# java - 使用 JAXB 创建不可变对象

> ID：11030805
> 
> 赞同：16
> 
> 时间：2012-06-14T10:04:01.550
> 
> 标签：java, jaxb, pojo

我正在使用 JAXB 从 XSD 文件创建 Java 对象。我正在创建不可变包装器来隐藏由 JAXB 生成的对象（之前我正在更新 JAXB 对象以实现不可变接口并将接口返回给客户端。但意识到更改自动生成的类是不好的，因此使用包装器）

目前我正在将这些不可变的包装器返回给客户端应用程序。是否有任何选项可以使自动生成的类是不可变的，并且可以避免创建不可变包装器的额外工作。鼓励任何其他方法。

*   谢谢

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-11T20:13:14.057

从 JSR-133（Java 1.5 依赖项）开始，您可以使用反射来设置未初始化的最终变量。因此您可以在私有构造函数中初始化为 null 并在没有任何 XMLAdapter 的情况下干净地使用 JAXB + 不可变。

来自[https://test.kuali.org/svn/rice/sandbox/immutable-jaxb/](https://test.kuali.org/svn/rice/sandbox/immutable-jaxb/)的示例，来自 Blaise 博客[http://blog.bdoughan.com/2010/12/jaxb-and-immutable的评论-objects.html#comment-form_584069422380571931](http://blog.bdoughan.com/2010/12/jaxb-and-immutable-objects.html#comment-form_584069422380571931)

```
package blog.immutable;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name="customer")
@XmlAccessorType(XmlAccessType.NONE)
public final class Customer {

    @XmlAttribute
    private final String name;

    @XmlElement
    private final Address address;

    @SuppressWarnings("unused")
    private Customer() {
        this(null, null);
    }

    public Customer(String name, Address address) {
        this.name = name;
        this.address = address;
    }

    public String getName() {
        return name;
    }

    public Address getAddress() {
        return address;
    }

} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-20T12:03:45.373

您可以使用这些 XJC 编译器插件直接生成不可变类：

*   [https://github.com/sabomichal/immutable-xjc](https://github.com/sabomichal/immutable-xjc)
*   [https://github.com/danielwegener/xjc-immutable-plugin](https://github.com/danielwegener/xjc-immutable-plugin)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T08:02:50.113

JAXB 可以使用非公共构造函数/方法，因此唯一可行的方法是保护无参数构造函数和设置器，最终得到“伪不可变”对象。

每次手动编写带有 JAXB 注释的类时，我都会选择这种方法，但您可以检查这是否也适用于生成的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T07:54:30.807

根据 Blaise Doughan（对 JAXB 非常了解）的这篇博客文章[http://blog.bdoughan.com/2010/12/jaxb-and-immutable-objects.html](http://blog.bdoughan.com/2010/12/jaxb-and-immutable-objects.html)，看起来对不可变对象没有原生支持，所以你的包装对象是必要的。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-02-11T22:09:21.590

您可以在将 bean 返回给客户端之前为它们创建一个代理。您将需要[javassist](http://www.csg.is.titech.ac.jp/~chiba/javassist/)从类创建代理（从接口创建代理可以直接使用 Java SE 完成）。

然后，如果调用以“set”开头的方法，则可以抛出异常。

这是一个可重用的类，它的方法可以包装“任何”POJO：

```
import java.lang.reflect.Method;

import javassist.util.proxy.MethodFilter;
import javassist.util.proxy.MethodHandler;
import javassist.util.proxy.Proxy;
import javassist.util.proxy.ProxyFactory;

public class Utils {

 public static <C> C createInmutableBean(Class<C> clazz, final C instance)
        throws InstantiationException, IllegalAccessException {
    if (!clazz.isAssignableFrom(instance.getClass())) {
        throw new IllegalArgumentException("given instance of class "
                + instance.getClass() + " is not a subclass of " + clazz);
    }
    ProxyFactory f = new ProxyFactory();
    f.setSuperclass(clazz);
    f.setFilter(new MethodFilter() {
        public boolean isHandled(Method m) {
            // ignore finalize()
            return !m.getName().equals("finalize");
        }
    });
    Class c = f.createClass();
    MethodHandler mi = new MethodHandler() {
        public Object invoke(Object self, Method m, Method proceed,
                Object[] args) throws Throwable {
            if (m.getName().startsWith("set")) {
                throw new RuntimeException("this bean is inmutable!");
            }

            return m.invoke(instance, args); // execute the original method
                                                // over the instance
        }
    };
    C proxy = (C) c.newInstance();

    ((Proxy) proxy).setHandler(mi);
    return (C) proxy;
 }
} 
```

这是一个示例代码。让 Employee 成为你的 bean：

```
public class Employee{
  private String name="John";
  private String surname="Smith";
  public String getName() {
    return name;
  }
  public void setName(String name) {
    this.name = name;
  }
  public String getSurname() {
    return surname;
  }
  public void setSurname(String surname) {
    this.surname = surname;
  }
}; 
```

这里有一个测试用例，显示您可以为 POJO 创建代理，使用它的 getter，但不能使用它的 setter

```
@Test
public void testProxy() throws InstantiationException, IllegalAccessException{
    Employee aBean = new Employee();

    //I can modify the bean
    aBean.setName("Obi-Wan");
    aBean.setSurname("Kenobi");

    //create the protected java bean with the generic utility
    Employee protectedBean = Utils.createInmutableBean(Employee.class, aBean);

    //I can read
    System.out.println("Name: "+protectedBean.getName());
    System.out.println("Name: "+protectedBean.getSurname());

    //but I can't modify
    try{
        protectedBean.setName("Luke");
        protectedBean.setSurname("Skywalker");
        throw new RuntimeException("The test should not have reached this line!");
    }catch(Exception e){
        //I should be here
        System.out.println("The exception was expected! The bean should not be modified (exception message: "+e.getMessage()+")");
        assertEquals("Obi-Wan", protectedBean.getName());
        assertEquals("Kenobi", protectedBean.getSurname());
    }
} 
```

# exception - 重新抛出异常并在循环中处理它......？

> ID：11030806
> 
> 赞同：1
> 
> 时间：2012-06-14T10:04:03.763
> 
> 标签：exception, c#-4.0, exception-handling, rethrow

我尝试了很多重新抛出异常并得出以下结论：

1）如果我们想提供更多关于异常的细节，比如（内部异常），我们可能想重新抛出

2）我们可能会重新抛出以完全终止程序..

3）如果我们想重新抛出并且不想终止程序，那么我将不得不在循环中处理重新抛出的异常......

我在执行此操作时尝试了以下操作：

```
 public void input()
        {
            char opt;
            int id;
            int qty;
            int ind = -1;

            do
            {
                Console.WriteLine("Add item to  cart:   ");
                opt = Convert.ToChar(Console.ReadLine());
                if (opt == 'n' || opt == 'N')
                    break;
                else
                {
                    cashier.showProductList();
                    Console.WriteLine("Enter Product ID from above list:    ");
                    id = Convert.ToInt32(Console.ReadLine());
                    foreach (Products item in cashier.ProductList)
                    {
                        if (id == item.ProductID)
                        {
                            BoughtItems.Add(item);
                            ind = Cashier.ProductList.IndexOf(item);                        
                        }
                    }

                    Console.WriteLine("Enter The quantity required:     ");
                    qty = Convert.ToInt32(Console.ReadLine());
                    try
                    {
                        if (qty < 0)
                        {
                            throw new BuisnessException("Qty can not be -ve...", new Exception("enter a valid +ve amount"));
                        }
                        else if (qty < cashier.ProductList[ind].Quantity)
                        {
                            BoughtItems[BoughtItems.Count - 1].Quantity = qty;
                            TotalPrice = TotalPrice + (BoughtItems[BoughtItems.Count - 1].Quantity * BoughtItems[BoughtItems.Count - 1].price);
                        }
                        else if (qty >= cashier.ProductList[ind].Quantity)
                        {
                            throw new QuantityExceedingStockException("Item not in sufficient amount", new Exception("Enter quantity less than" + Cashier.ProductList[ind].Quantity));
                        }
                    }
                    catch (BuisnessException ex)
                    {

                        BoughtItems.RemoveAt(BoughtItems.Count - 1);
                        Console.WriteLine(ex.Message);
                        throw;
                        //throw; //Re throwing terminating the i/p loop if re thrown exception not handled in loop! :/
                    }
                    catch (QuantityExceedingStockException ex)
                    {
                        BoughtItems.RemoveAt(BoughtItems.Count - 1);
                        Console.WriteLine(ex.Message);
                        throw;
                    }
                }

            } while (true);
        }

        public void showCartItems()
        {
            foreach (Products item in _boughtItems)
            {
                Console.WriteLine(item.ProductID + "  " + item.name + "  " + item.price + "  " + item.Quantity);
            }
        } 
```

然后在 main() 中：

```
 do
        {
            try
            {
                cashier1.Customr.input();
            }
            catch (BuisnessException ex)
            {
                //Console.WriteLine(ex.Message);
                Console.WriteLine(ex.InnerException.Message);
            }
            catch (QuantityExceedingStockException ex)
            {
                Console.WriteLine(ex.InnerException.Message);
            }
            //catch
            //{
            //    Console.WriteLine("Press y below to continue shopping");
            //}
            Console.Write("Continue Shopping ?");
            opt = Convert.ToChar(Console.ReadLine());
            if (opt == 'n')
                break;
            else
                continue;
        } while (true);
        Console.WriteLine("Total Price is:  " + cashier1.Customr.TotalPrice); 
```

如果我不处理循环中重新抛出的异常，我的程序将终止......那么这是否意味着**我提出的以上三个关于重新抛出异常的结论**是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T23:00:29.003

你的结论是正确的。我假设在结论 1 中您的意思是重新抛出异常使您有机会记录错误。

但是你的方法是非常规的。通常异常不用于处理业务逻辑案例。为什么不像这样修改你的循环（替换你的“try/catch”块）？

```
if (qty < 0)
{
    BoughtItems.RemoveAt(BoughtItems.Count - 1);
    // The code below has been EDITED to show throwing an exception in the same block
    // as the related logic.
    string message = "Qty can not be -ve, enter a valid +ve amount"; // EDITED
    Console.WriteLine(message);
    throw new BusinessException(message); // EDITED
}
else if (qty < cashier.ProductList[ind].Quantity)
{
    BoughtItems[BoughtItems.Count - 1].Quantity = qty;
TotalPrice = TotalPrice + (BoughtItems[BoughtItems.Count - 1].Quantity * BoughtItems[BoughtItems.Count - 1].price);
}
else if (qty >= cashier.ProductList[ind].Quantity)
{
    BoughtItems.RemoveAt(BoughtItems.Count - 1);
    Console.WriteLine("Item not in sufficient amount, enter quantity less than " + Cashier.ProductList[ind].Quantity);
} 
```

# r - 合并列表元素？

> ID：11030808
> 
> 赞同：4
> 
> 时间：2012-06-14T10:04:08.910
> 
> 标签：r, list, element

我有两个长列表 A 和 B，它们的长度相同，但包含不同数量的等效元素：
列表 A 可以包含许多元素，这些元素也可以在同一字段中重复出现。
列表 B 要么只包含一个元素，要么包含一个空字段，即“character(0)”。
A 还包含一些空字段，但是对于这些记录，B 中始终存在一个元素，因此 A 和 B 中没有带有空字段的记录。
我想将 A 和 B 的元素组合成一个相同长度的新列表， C、按照以下规则：

*   A 中的所有元素都必须存在于 C 中——包括它们在同一字段中的潜在重复。
*   如果 B 包含同一记录的 A 中尚不存在的元素，则它也将被添加到 C 中。
*   但是如果 B 包含一个已经存在于同一记录的 A 中的元素，它将被忽略。
*   如果 A 有一个空字段，则该记录的 B 中的元素将添加到 C。
*   如果 B 有一个空字段，则该记录的 A 中的元素将添加到 C。

这是这些列表如何开始的示例：

```
> A  
 [1] "JAMES" "JAMES"  
 [2] "JOHN" "ROBERT"  
 [3] "WILLIAM" "MICHAEL" "WILLIAM" "DAVID" "WILLIAM"  
 [4] character(0)  
...  
> B  
 [1] "RICHARD"  
 [2] "JOHN"  
 [3] character(0)  
 [4] "CHARLES"  
... 
```

这是我正在寻找的正确输出：

```
> C  
 [1] "JAMES" "JAMES" "RICHARD"  
 [2] "JOHN" "ROBERT"  
 [3] "WILLIAM" "MICHAEL" "WILLIAM" "DAVID" "WILLIAM"  
 [4] "CHARLES"  
... 
```

我试过了，例如：

```
C <- sapply(mapply(union, A,B), setdiff, character(0)) 
```

但是，不幸的是，这删除了 ​​A 的重复：

```
> C  
 [1] "JAMES" "RICHARD"  
 [2] "JOHN" "ROBERT"  
 [3] "WILLIAM" "MICHAEL" "DAVID"  
 [4] "CHARLES"  
... 
```

谁能告诉我，如何组合这两个列表，保留 A 的重复，并实现我想要的输出？

非常感谢您！

**更新：**机器可读数据：

```
A <- list(c("JAMES","JAMES"),
          c("JOHN","ROBERT"), 
          c("WILLIAM","MICHAEL","WILLIAM","DAVID","WILLIAM"),  
          character(0))
B <- list("RICHARD","JOHN",character(0),"CHARLES") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T10:14:35.483

这是您的数据片段，以可重现的形式：

```
A <- list(c("JAMES","JAMES"),
          c("JOHN","ROBERT"), 
          c("WILLIAM","MICHAEL","WILLIAM","DAVID","WILLIAM"),  
          character(0))
B <- list("RICHARD","JOHN",character(0),"CHARLES") 
```

你很亲密`mapply()`。我通过使用`c()`连接列表元素获得了所需的输出`A`，`B`但必须操作提供的向量的元素，所以我想出了这个：

```
foo <- function(...) {
    l1 <- length(..1)
    l2 <- length(..2)
    out <- character(0)
    if(l1 > 0) {
        if(l2 > 0) {
            out <- if(..2 %in% ..1)
                ..1
            else
                c(..1, ..2)
        } else {
            out <-  ..1
        }
    } else {
        out <-  ..2
    }
    out
} 
```

我们可以参考`...`使用`..n`占位符的各个元素；`..1`是`A`和`..2`是`B`。当然，`foo()`仅适用于两个列表，但不强制执行此操作或进行任何检查，只是为了保持简单。还`foo()`需要处理我现在认为的`A`情况。`B``character(0)``foo()`

当我们在`mapply()`通话中使用它时，我得到：

```
> mapply(foo, A, B)
[[1]]
[1] "JAMES"   "JAMES"   "RICHARD"

[[2]]
[1] "JOHN"   "ROBERT"

[[3]]
[1] "WILLIAM" "MICHAEL" "WILLIAM" "DAVID"   "WILLIAM"

[[4]]
[1] "CHARLES" 
```

一个`lapply()`版本可能比摘要更有意义，`..n`但使用基本相同的代码。这是一个可以直接使用的新函数，`A`但`B`我们迭代`A`( `1, 2, 3, length(A)`) 的元素的索引，由 生成`seq_along()`：

```
foo2 <- function(ind, A, B) {
    l1 <- length(A[[ind]])
    l2 <- length(B[[ind]])
    out <- character(0)
    if(l1 > 0) {
        if(l2 > 0) {
            out <- if(B[[ind]] %in% A[[ind]]) {
                A[[ind]]
            } else {
                c(A[[ind]], B[[ind]])
            }
        } else {
            out <- A[[ind]]
        }
    } else {
        out <- B[[ind]]
    }
    out
} 
```

像这样调用：

```
> lapply(seq_along(A), foo2, A = A, B = B)
[[1]]
[1] "JAMES"   "JAMES"   "RICHARD"

[[2]]
[1] "JOHN"   "ROBERT"

[[3]]
[1] "WILLIAM" "MICHAEL" "WILLIAM" "DAVID"   "WILLIAM"

[[4]]
[1] "CHARLES" 
```

# html - MooEditable : 暂时禁用编辑

> ID：11030810
> 
> 赞同：0
> 
> 时间：2012-06-14T10:04:18.130
> 
> 标签：html, css, iframe, mootools

我正在寻找一种（简单的？）方法来临时禁用我的 MooEditable 块。

使用 a `reset.css`，它放下一些基本的内联标签，如`<strong>`，我想保持 MooEditable iframe 样式，没有任何可能编辑内容（如`<textarea disabled="disabled">`.

不确定是否足够清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:11:28.100

最后，我找到了一个解决方案，查看了 MooEditable 最深的文件。

对于可能想要这个解决方案的人：MooEditable 接受选项，那么这是你的电话：

```
$$('.mooeditable.enabled').mooEditable({enabled:true});
$$('.mooeditable.disabled').mooEditable({enabled:false}); 
```

`attach`您必须在函数中修改一些代码：

```
attach: function(){
    var self = this;
    this.mode = 'iframe';
    this.editorDisabled = !this.options.enabled;
    ...
} 
```

您还可以（推荐）隐藏 ui-toolbar，添加一个`hidden`类到：

```
MooEditable.UI.Toolbar= new Class({ 
    initialize: function(options){
        this.setOptions(options); 
        this.el = new Element('div', 
                              {'class': 'mooeditable-ui-toolbar ' + 
                                        (this.options.enabled ? '' : 'hidden') +
                                        this.options['class']
                              }); 
    } 
} 
```

当然有相应的 CSS ：

```
.mooeditable-ui-toolbar.hidden {
    visibility: hidden;
} 
```

# java - 为什么有人要在 Java 的接口中放入接口？

> ID：11030814
> 
> 赞同：4
> 
> 时间：2012-06-14T10:04:35.170
> 
> 标签：java

我正在阅读接口包含的内容，并且我理解除了通常它们还可以包含内部类或其他接口。

任何人都可以解释为什么或出于什么目的将接口放入接口中。还有为什么有人会在里面放一个内部类。我在网上查看过，但除了指向标准 java 类之一的链接外，没有找到任何好的解释。我真正需要帮助我理解的是一个简单的例子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T10:10:40.423

这是我使用内部类的接口的摘录：

```
public interface EmailService {

    void send(EmailDetails details);

    class EmailDetails {
        private String from;
        private List<String> to = Lists.newArrayList();
        private String messageTemplate;
        //...
    }
} 
```

你看 - 关键是接口需要一些额外的定义（在这种情况下 - 它的方法接受的参数）。内部接口也是一样的。

它可能是一个单独的类/接口，但由于它只与这个接口相关，所以我把它放在那里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T10:37:34.153

您不会用仅与一个特定类或接口相关的事物来污染命名空间。

然而，内部类（如果不是静态的）比内部接口更相关，因为它们包含指向包含类实例的隐藏链接；因此内部类的实例总是隐式绑定到外部类的实例：

```
class OuterClass {

   int someField;

   class InnerClass {

      void doSomething () {
         someField += 1; // you can access someField from here
      }

   };

   void methodUsingInnerClass () {
      InnerClass obj = new InnerClass (); // obj knows to which instance of OuterClass it belongs
      someField = 0;
      obj.doSomething ();
      // now someField == 1
   }
}; 
```

这通常与匿名类（根据定义为内部类）结合使用，例如提供事件处理程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T10:08:21.407

为了建立牢固的`Composition`关系，我们追求`inner classes`。

**编辑：**

`heart`当人的对象被构​​造的同时，心的对象也被构造时，人就有了。`Heart`对象范围在人的身体之外没有任何意义，所以`Heart`类应该是`inner`类的`Man`类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T10:10:18.550

由于 Java 没有多重继承，内部类可以非常方便。例如：

```
class Vehicle{
}

class Transporter{
}

//you cant create class like this
//class Car extends Vehicle, Transporter {}

//but you can create something like that
class Car extends Vehicle{

    class InnerTransporter extends Transporter{}

} 
```

这不是一个完美的例子（为什么`Transporter`不扩展 Vehicle？），但我希望你明白了。

那么内部接口呢？例如

```
class View{

    public static interface OnClickListener{ //this interface associated with View, so it's more readable
        public void onClick();
    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T10:15:54.977

之前已经解决了这个问题，让我引用一个[很好的理由](https://stackoverflow.com/a/209158/522150)：

> 使用内部接口的一个很好的理由是它的功能是否与它所在的类[或接口]直接相关。一个很好的例子就是监听器。如果您有一个类 [或接口] Foo，并且您希望其他类 [或接口] 能够侦听其上的事件，则可以声明一个名为 FooListener 的接口，这可以，但声明可能会更清楚一个内部接口并让那些其他类 [接口] 实现 Foo.Listener

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-14T10:26:06.460

一个样品：

[http://docs.oracle.com/javase/7/docs/api/java/util/Map.html](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)

[http://docs.oracle.com/javase/7/docs/api/java/util/Map.Entry.html](http://docs.oracle.com/javase/7/docs/api/java/util/Map.Entry.html)

我猜是因为 entry 接口确实和 Map 紧密相关，所以 API 设计者决定让 Entry 成为 Map 的内部接口，而不是顶层接口。

但实际上，内部接口是例外而不是规则。

# c++ - 在不超出范围的情况下传递指向线程的指针

> ID：11030817
> 
> 赞同：4
> 
> 时间：2012-06-14T10:04:48.283
> 
> 标签：c++, multithreading

我得到了一个预定义类/函数的预定义 .lib 文件。

我将需要创建一个：

```
 Cdefined *p = new Cdefined;
    p->Init(); 
```

在 main() 程序中在调用我的线程之前初始化我的类对象。

但是我意识到，在我的每个线程中，我都必须调用：

```
 p->doProcess(); 
```

为每个线程运行一段代码。

但是，除非我调用，否则此功能将不起作用`p->Init()`。

由于现在我至少有 2 个 p 范围（一个在 中创建`main()`，N 个在 N 个线程中），我该如何设计我的线程，以便可以在没有范围错误的情况下传入该类？[我的限制是`p->Init()`必须调用`main()`]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T10:57:44.007

如果对象的生命周期只是绑定到 的范围`main`，那么这很容易 - 只需确保在销毁对象之前已停止并加入所有线程。这可以通过使用范围内的智能指针管理对象来更好地执行，`main`或者更简单地说，通过在 内赋予对象自动生命周期`main`：

```
void thread_func(Cdefine *);

int main()
{
    Cdefine thing;
    thing.Init();

    std::thread thread1(thread_func, &thing);
    std::thread thread2(thread_func, &thing);

    // do stuff

    thread1.join();
    thread2.join();

    // Now it's safe to destroy the object
} 
```

在更复杂的情况下，您不能简单地将对象绑定到比线程更广泛的范围，您可以考虑使用`std::shared_ptr`（`std::tr1::shared_ptr`或者`boost::shared_ptr`如果您坚持使用 2011 年之前的语言）来管理它。例如：

```
void thread_func(std::shared_ptr<Cdefine> p);

void spawn_threads()
{
    std::shared_ptr<Cdefine> p = std::make_shared<Cdefine>();
    p->Init();

    std::thread thread1(thread_func, p);
    std::thread thread2(thread_func, p);

    thread1.detach();
    thread2.detach();

    // The threads can carry on doing their thing, and it's safe to
    // drop our shared pointer. The object will be deleted when the
    // last thread drops its pointer to it.
} 
```

顺便说一句，为什么在`Init`构造对象之后需要调用函数？为什么不在构造函数中初始化它，因为那是构造函数的用途？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:17:40.443

`Cdefined`为每个线程创建一个实例，调用其`Init`方法，并将其作为参数传递给线程。

就像是：

```
for (int i = 0; i < NUM_THREADS; i++)
{
    Cdefined *p = new Cdefined;
    p->Init();
    create_thread(thread_func, p);
} 
```

和线程函数：

```
void *thread_func(void *data)
{
    Cdefine *p = reinterpret_cast<Cdefine*>(data);

    for (;;)
    {
        // Do stuff...
        p->doProcess();
        // Do other stuff
    }

    return 0;
} 
```

# ruby-on-rails - 基于 Ajax 的 Web 应用程序和身份验证：会话还是令牌？

> ID：11030820
> 
> 赞同：3
> 
> 时间：2012-06-14T10:04:57.880
> 
> 标签：ruby-on-rails, ajax, authentication, devise

我正在使用 Rails 构建一个 Web 应用程序，用于在客户端提供 json 和 JS 框架。

为了处理登录，我发现了两种方法：

1.  使用身份验证令牌并将其附加到每个 ajax 请求，然后在后端使用它来验证用户
2.  使用会话和 cookie，因为它们会自动附加到每个 ajax 请求

第二个选项似乎更简单，但有理由使用第一个吗？

PS我正在使用设计进行身份验证

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T20:10:16.110

通常，您会创建一个 cookie/会话，以便在用户重新访问您的网站后保持登录状态。

# c# - 根据执行的命令启用/禁用命令

> ID：11030822
> 
> 赞同：1
> 
> 时间：2012-06-14T10:05:09.250
> 
> 标签：c#, visual-studio, visual-studio-addins

我已经有一段时间了这个问题，我无法在任何地方找到解决方案。我目前正在为 Visual Studio 2010 编写一个加载项（使用 C#）。我在 VS 菜单栏中添加了一个新菜单。在这个菜单中有几个命令，例如“login”和“logout”。我想强制执行的行为是两个命令都是可见的，但最初只会启用“登录”而最初禁用“注销”。

我通过 OnConnection() 方法中的以下代码实现了这一点：

```
 LoginCommand = applicationObject.Commands.AddNamedCommand(
                           addInInstance, 
                           LOGIN_NAME,
                           LOGIN_CAPTION,  
                           LOGIN_TOOLTIP, 
                           true, 59, 
                           ref contextUIGuids,
                           (int)(vsCommandStatus.vsCommandStatusSupported | 
                                vsCommandStatus.vsCommandStatusEnabled)
                        );

    LogoutCommand = applicationObject.Commands.AddNamedCommand(
                            addInInstance, 
                            LOGOUT_NAME,
                            LOGOUT_CAPTION, 
                            LOGOUT_TOOLTIP, 
                            true, 59, 
                            ref contextUIGuids,
                            (int)(vsCommandStatus.vsCommandStatusSupported)
                        ); 
```

当我发出“登录”命令并成功登录时，我希望它反过来，以便在菜单中禁用“登录”命令并启用“注销” - 直到我注销。

这就是我卡住的地方。我只是不知道在哪里以及如何准确地实现命令的状态切换。我想我必须在 QueryStatus() 方法中处理这个问题，但微软关于这个主题的文档不太有用或令人大开眼界。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:02:58.867

您需要将`AfterExecute`事件添加到您的`LoginCommand`事件中。在方法中添加以下内容`OnConnection`：

```
Events events = (EnvDTE.Events) applicationObject.Events;
CommandEvents LoginEvent = events.get_CommandEvents(LoginCommand.Guid, LoginCommand.ID);
cmdEvent.AfterExecute += new _dispCommandEvents_AfterExecuteEventHandler(LoginEvent_AfterExecute); 
```

并创建`LoginEvent_AfterExecute`方法：

```
private void LoginEvent_AfterExecute(string guid, int id, object customIn, object customOut)
{
    //Delete the LoginCommand from the commands2 object and recreate it
    LoginCommand.Delete();

    LoginCommand = applicationObject.Commands.AddNamedCommand(
                       addInInstance, 
                       LOGIN_NAME,
                       LOGIN_CAPTION,  
                       LOGIN_TOOLTIP, 
                       true, 59, 
                       ref contextUIGuids,
                       (int)(vsCommandStatus.vsCommandStatusSupported)
                    );

    //Delete the LogoutCommand and recreate it
    LogoutCommand.Delete();  

    LogoutCommand = applicationObject.Commands.AddNamedCommand(
                        addInInstance, 
                        LOGOUT_NAME,
                        LOGOUT_CAPTION, 
                        LOGOUT_TOOLTIP, 
                        true, 59, 
                        ref contextUIGuids,
                        (int)(vsCommandStatus.vsCommandStatusSupported| 
                            vsCommandStatus.vsCommandStatusEnabled)
                    );

} 
```

资源：

*   [HOWTO：控制 Visual Studio 加载项中的命令状态](http://www.mztools.com/articles/2007/mz2007025.aspx)
*   [有关 Visual Studio .NET 可扩展性的资源](http://www.mztools.com/resources_vsnet_addins.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:05:00.010

好吧，我想出了一个解决方案，虽然我不太确定它是否优雅。执行命令（例如`LoginCommand`）后，该`QueryStatus()`方法会被多次调用，但 . 的值不同`commandName`。

```
public void QueryStatus(string commandName, vsCommandStatusTextWanted neededText, ref vsCommandStatus status, ref object commandText)
    {
        if(neededText == vsCommandStatusTextWanted.vsCommandStatusTextWantedNone)
        {
            if (loginOkay == 0)
            {
                if (commandName == addInInstance.ProgID + "." + LOGIN_NAME)
                {
                    status = (vsCommandStatus)vsCommandStatus.vsCommandStatusSupported;
                }
                if (commandName == addInInstance.ProgID + "." + LOGOUT_NAME ||
                    commandName == addInInstance.ProgID + "." + LOCK_NAME ||
                    commandName == addInInstance.ProgID + "." + UNLOCK_NAME ||
                    commandName == addInInstance.ProgID + "." + CHECKIN_NAME ||
                    commandName == addInInstance.ProgID + "." + CHECKOUT_NAME)
                {
                    status = (vsCommandStatus)vsCommandStatus.vsCommandStatusSupported | vsCommandStatus.vsCommandStatusEnabled;
                }
            }
            else if (loginOkay == 1)
            {
                if (commandName == addInInstance.ProgID + "." + LOGIN_NAME)
                {
                    status = (vsCommandStatus)vsCommandStatus.vsCommandStatusSupported | vsCommandStatus.vsCommandStatusEnabled;
                }
                if (commandName == addInInstance.ProgID + "." + LOGOUT_NAME ||
                    commandName == addInInstance.ProgID + "." + LOCK_NAME ||
                    commandName == addInInstance.ProgID + "." + UNLOCK_NAME ||
                    commandName == addInInstance.ProgID + "." + CHECKIN_NAME ||
                    commandName == addInInstance.ProgID + "." + CHECKOUT_NAME)
                {
                    status = (vsCommandStatus)vsCommandStatus.vsCommandStatusSupported;
                }
            }
            else
            {
                status = vsCommandStatus.vsCommandStatusUnsupported;
            }
        }
    } 
```

无论如何，感谢[Schaliasos](https://stackoverflow.com/users/1160259/schaliasos)的帮助。我很乐意为您的答案投票，但由于我落后于声誉点，所以我不能。

# session - CakePHP 2.1 在插件组件中调用会话组件

> ID：11030823
> 
> 赞同：0
> 
> 时间：2012-06-14T10:05:10.627
> 
> 标签：session, plugins, cakephp-2.1

我创建了一个插件，其中包含一个组件。所以在那个插件组件中，我必须包含会话组件来调用他们的方法写入和读取。如何调用这些方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T08:14:37.773

插件仍然使用底层的 Cake 核心，因此在插件的 AppController() 中，您应该能够`SessionComponent`在变量中`$components`加载 。这是一个示例`$components`设置：

```
public $components = array(
        'DebugKit.Toolbar',
        'Session',
        'Auth' => array(
            'loginRedirect' => array('controller' => 'users', 'action' => 'index'),
            'logoutRedirect' => array('controller' => 'users', 'action' => 'login')
            ),
        'RequestHandler'
    ); 
```

你试过这个吗？

# html - 在 HTML 中提供和嵌入视频？

> ID：11030826
> 
> 赞同：0
> 
> 时间：2012-06-14T10:05:22.400
> 
> 标签：html, apache, video

假设我们有 apache 设置服务于基本的 HTML index.html：

```
<html>
    <body>
        <p>Hello, World!</p>

        <!-- INSERT HERE -->

        <p>The quick brown fox jumps over the lazy dog</p>

    </body>
</html> 
```

我们有一个 5 分钟的视频剪辑，我们想在网页上嵌入。

我假设我们将视频文件放在 /var/www 中的 index.html 旁边，然后在页面上插入一些 html。

我们希望视频的单帧显示中间有一个 PLAY 图标，点击后我们希望它默认在其帧内播放，但也有一个全屏按钮。（就像嵌入的 YouTube 视频一样）

问题：

*   我们应该以哪种视频格式对文件进行编码？
*   我们应该用什么 HTML 片段替换“INSERT HERE”？
*   这个问题一般是怎么解决的？

如果有多种解决方案，我们希望在浏览器、操作系统和桌面/移动设备方面最兼容的一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:08:39.593

您需要的是创建一个自定义播放器。您可以使用 Flash 构建一个或查找一个，[这](http://www.google.co.il/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=6&ved=0CHwQFjAF&url=http://www.communitymx.com/abstract.cfm?cid=4E1D8&ei=-7fZT66OKYbitQaQtZWtCA&usg=AFQjCNEk8kZzJ80g1RTwZnE4j_q8kz83UA&sig2=GVeCBwY2dQ5z2fnv30HkJg)是教程的链接

你可以在 HTML 5 中构建或寻找一个，试试[这个](http://videojs.com/)

视频格式取决于运行它的播放器，因此如果您构建自定义格式，您可以自行决定。

# joomla - Joomla，注册访问仅适用于注册用户

> ID：11030829
> 
> 赞同：0
> 
> 时间：2012-06-14T10:05:36.317
> 
> 标签：joomla

当我创建一篇文章并将其访问权限注册时，这意味着只有注册用户才能看到它，我的意思是我必须登录才能看到文件，在我的情况下，即使我没有登录，它仍然向我显示带有注册访问权限的文章，怎么回事，不应该只供登录用户查看注册访问权限集。

我认为以前可以工作，但我不知道我改变了什么，现在它出现了问题。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:21:39.830

而不是文章只需转到菜单选项，然后为注册用户设置相应的菜单。我希望这个对你有用。谢谢。

# ruby - 未初始化的常量 ::ActiveResource

> ID：11030834
> 
> 赞同：4
> 
> 时间：2012-06-14T10:05:48.727
> 
> 标签：ruby, activeresource, initialization

我尝试调用 API。我只想使用活动资源，所以我将这段代码放在一个简单的文件 .rb 中：

```
class Order < ActiveResource::Base
    self.site = "http://localhost:3000/api/"
    self.element_name = "order"
    self.format = ActiveResource::Formats::XmlFormat
end 
```

当我调用这个文件谁应该做初始化时，他给我一个错误：

```
$ ruby test/test_order.rb 
test/test_order.rb:1:in `<main>': uninitialized constant ActiveRessource (NameError) 
```

我尝试创建一个新的 rvm gemset 并安装 activeresource

```
rvm gemset create delete_me
rvm use 1.9.3@delete_me
gem install activeresource 
```

他给我同样的错误。我尝试使用 ruby​​ 1.9.2 相同的错误。

我尝试过的activeresource版本是3.1.3和3.2.6

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T10:25:23.883

您需要需要 ActiveResource。你可以这样做：

```
require 'active_resource' 
```

您可能还需要在 require activeresource 之前需要 ruby​​gems：

```
require 'rubygems'
require 'active_resource' 
```

# android - Android 我怎样才能在按钮之间创建这么薄的间隙？

> ID：11030835
> 
> 赞同：1
> 
> 时间：2012-06-14T10:05:49.893
> 
> 标签：android, android-actionbar

看看这个著名应用程序的操作栏。我怎样才能在按钮之间创建这么薄的间隙？

![在此处输入图像描述](../Images/af928829138ef4de00451eafe98e98a8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:13:23.153

尝试在您的 xml 中添加属性`android:padding`以及`android:margin`使用 a`TableLayout`或 a`GridLayout`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:08:55.490

在 Android 中这个仪表板用户界面。请查看[链接](http://blahti.wordpress.com/2011/03/14/build-dashboard-ui-for-android/)

我认为它对你有帮助。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T10:17:25.287

在包含按钮的 xml 文件中，根据需要指定 android:layout_marginLeft / android:layout_marginRight （用于按钮）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T10:31:55.453

首先，[IOschede 应用程序的源代码是开源](http://code.google.com/p/iosched/)的，因此您可以轻松查看它的内部并了解它是如何工作的。

顺便说一句，这里是对问题的描述以及您可以采取的解决方案，当然这完全取决于您的`minSdk`属性。

**Android 3.0> 带有原生 ActionBar**

如果是在谈论原生 3.0> ActionBar 那么看看[这个](https://stackoverflow.com/questions/9131954/is-there-a-way-to-reduce-the-spacing-between-the-action-item-icons-on-action-bar)问题。

您可以在应用程序样式中使用此属性。

`<item name="android:actionButtonStyle">@style/ActionButtonStyle</item>`

并在此处定义样式并放置带有左侧垂直条纹的自定义 9patch 背景

```
<style name="ActionButtonStyle" parent="@android:style/Widget.Holo.Light.ActionButton">
    <item name="android:background">@drawable/custom_bg</item>             
</style> 
```

**安卓 <3.0**

您可以决定使用[ActionBarSherlock](http://actionbarsherlock.com/)并解决您所有的兼容性问题，或者查看*IOsched*解决方案，如果我没记错的话，他们采用的按钮样式与它适用于具有应用程序主题属性的本机 ActionBar 的方式相同。

# android - 800*480 mdpi 集的布局

> ID：11030836
> 
> 赞同：1
> 
> 时间：2012-06-14T10:05:50.363
> 
> 标签：android, android-layout

我正在开发一个正在 800*480 分辨率的设备上测试的应用程序，但它是一个 mdpi 集，并且像 Micromax Funbook（便宜的东西）一样选择资源。[http://www.micromaxfunbook.com/](http://www.micromaxfunbook.com/)

所有的布局都搞砸了在该设备上测试我如何相应地设计我的布局。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T12:01:56.223

`Layout`您可以在`Rec`文件夹中创建自定义。

创建文件夹`layout-large-mdpi`并将xml放入其中。并将图像放入文件夹中`drawable-large-mdpi`

这是使用 mdpi 处理 800 * 480 分辨率的工作。

更多参考[链接](http://developer.android.com/guide/practices/screens_support.html#testing)

# javascript - Chrome 扩展 WebSQL - 需要背景和内容页面来访问相同的数据库，但他们不需要

> ID：11030837
> 
> 赞同：4
> 
> 时间：2012-06-14T10:05:51.060
> 
> 标签：javascript, google-chrome, google-chrome-extension, web-sql

我目前正在为 Chrome 开发一个小型扩展。我需要相同的 websql 数据库用于扩展，但我会根据创建它们的位置获得不同的数据库。

如果我在内容页面中创建数据库，我会为用户所在的特定页面创建数据库。

如果我在后台页面中创建数据库，那么我将获得扩展程序自己的数据库。但它对内容页面是不可见的。

我希望我可以从内容页面访问*EXTENSION 的*数据库，而无需求助于笨拙的消息传递机制。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:12:39.017

这是不可能的，与`localStorage`. 不同的脚本代表不同的上下文。

不过，所有扩展脚本都可以与后台页面[通信。](http://code.google.com/chrome/extensions/messaging.html)尝试在后台页面上为数据库创建代理 API。这应该很简单。

我会像这样实现它（内容脚本）：

```
chrome.extension.sendRequest({
      method: 'executeSql', 
      sql: 'SELECT title, author FROM docs WHERE id=?',
      params: [10]
   },
   function(response) {
      //do stuff
   }
); 
```

在另一端（背景页面）：

```
chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
    console.log(request);

    if(request.method == 'executeSql' && request.sql) {
        db.readTransaction(function (t) {
            t.executeSql(request.sql, request.params, function (t, r) {
               //send result with sendResponse
            }, function (t, e) {
               //send error with sendResponse
            });
        });
    } else if(...) { //some other method etc.
    } ...
} 
```

以上代码未经测试，只是一个草图。

# scroll - 如何在应用 iframe 包装器上获取滚动 =“no”

> ID：11030843
> 
> 赞同：0
> 
> 时间：2012-06-14T10:06:11.467
> 
> 标签：scroll, facebook-apps, facebook-iframe

我正在尝试从我的 facebook 应用程序中删除滚动条。我尝试了 js 解决方案，在 html 和 body 标签上使用以下 js 代码和一些 css (overflow:hidden)。

```
<div id="fb-root"></div>
<script type="text/javascript">  
 window.fbAsyncInit = function() {
        FB.init({
         appId: 'My_App_Id', 
         status: true, 
         cookie: true, 
         xfbml: true
        });

        FB.Canvas.setAutoResize(7);
       };
       (function() {
        var e = document.createElement('script');
        e.async = true;
        e.src = document.location.protocol + 
         '//connect.facebook.net/it_IT/all.js';
        document.getElementById('fb-root').appendChild(e);   
       }());

      </script> 
```

如果我看到其他应用程序，我注意到它们将 iframe 包装器的滚动属性设置为“no”，这对所有浏览器来说都是神奇的。

我无法在任何模式下将滚动值设置为“否”。

我能怎么做？

谢谢你的帮助！安东尼奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:18:30.060

您是否在应用程序设置中将*画布高度*设置为*固定？*否则 setAutoResize 将不起作用。

（您是否检查过浏览器的错误控制台是否有任何消息？）

# php - 向 iframe 发送值

> ID：11030845
> 
> 赞同：0
> 
> 时间：2012-06-14T10:06:12.763
> 
> 标签：php, javascript

我有一个使用 POST 值来启动它的 php 程序。我想使用 iframe 在我的其他网站上运行该程序。我有一个表单链接到使用 POST 方法运行 iframe 的页面。无论如何，我在那里让 iframe 阅读帖子而不是它的父母？

否则有没有办法使用 JavaScript 向 iframe 发送值，iframe 将读取为 POST 值？

如果这些都不可能，有没有其他方法或者我必须创建另一个适合从 iframe 开始的程序副本。如果我必须这样做，是否有办法让 iframe 检测到正在运行它的父页面，以便我可以禁用该程序，除非父页面是我的网站以阻止人们劫持链接？

# javascript - jQuery.parseJSON \u0092 字符未解析

> ID：11030851
> 
> 赞同：3
> 
> 时间：2012-06-14T10:06:35.700
> 
> 标签：javascript, jquery, json

我有一个从 php 编码的文本，带有一个带有 de php utf8_encode 的 ajax 函数。如果我直接在控制台中打印它，则文本显示如下：

```
"projects":[
    {
        "id": "1",
        "title": "CURSOS DE PERIODISME",
        "description": "Els cursos tenen l\u0092objectiu d\u0092aprofundir en l\u0092actitud period\u00edstica dels alumnes."
    }
] 
```

当我使用 jquery.parseJSON 并将文本再次打印到描述中时，文本被解析如下：

Els cursos tenen lobjectiu daprofundir en lactitud periodística dels alumnes。

所有其他 unicode 字符都被很好地解析了，但是为什么 \u0092 没有被解析呢？我做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:18:09.673

[U+0092](http://unicode.org/cldr/utility/character.jsp?a=0092)是一个控制字符，也许它正在被解析，但由于您使用字符串的方式，您没有看到它。

例如，这段代码根本不进行 JSON 解析：

```
(function() {

  var strWith = "Els cursos tenen l\u0092objectiu d\u0092aprofundir";
  var strWithout = "Els cursos tenen lobjectiu daprofundir";

  display("With    (" + strWith.length + "): " + strWith);
  display("Without (" + strWithout.length + "): " + strWithout);

  function display(msg) {
    var p = document.createElement('pre');
    p.innerHTML = String(msg);
    document.body.appendChild(p);
  }
})(); 
```

[现场复制](http://jsbin.com/igocof)| [来源](http://jsbin.com/igocof/edit)

输出：

```
与 (40): Els cursos tenen lobjectiu daprofundir
没有 (38): Els cursos tenen lobjectiu daprofundir
```

如您所见，无论有无控制字符，它们看起来都一样，但我们可以从字符串*中*包含控制字符的长度看出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:06:35.980

它由 jQuery 解析。一个简单的测试可以告诉你：

```
> $.parseJSON('"\\u0092"').length 
1
> $.parseJSON('"\\u0092"').charCodeAt(0)
146
> $.parseJSON('"\\u0092"').charCodeAt(0).toString(16)
"92" 
```

它只是不会显示，请参阅@TJCrowders 的答案。

# php - 为什么您没有选择要上传的文件在上传文件时发生错误

> ID：11030852
> 
> 赞同：-4
> 
> 时间：2012-06-14T10:06:41.310
> 
> 标签：php, codeigniter-2, image-uploading

我正在尝试使用代码点火器框架上传图像，因为我的控制器类代码如下

```
public function addNewSlider()
{
    if($this->session->userdata('logged_in'))
    {

        $this->form_validation->set_rules('title','Title','required');

        if($this->form_validation->run()===FALSE)
        {
            $data['content']=$this->input->get_post('content');
            $data['file']=$this->input->get_post('file');
            $data['status']=$this->input->get_post('status');

            $this->load->view('admin/templates/header',array('sessionArray'=>$this->sessionArray));
            $this->load->view('admin/sliders/addNewSlider',$data);
            $this->load->view('admin/templates/footer');
        }
        else
        {
            /*$title=$this->input->get_post('title');
            $content=$this->input->get_post('content');
            $image=$this->input->get_post('file');
            $status=$this->input->get_post('status');
            $this->sliders_model->insertNewMenu($title,$content,$image,$status);
            redirect('sliders','refresh');*/
        }

    }
    else
    {
        redirect('index','refresh');
    }
}
function do_upload()
{
    $name=time();
    $config['upload_path'] = './uploads/';
    $config['allowed_types'] = 'gif|jpg|png';
//  $config['max_size'] = '100';
//  $config['max_width']  = '1024';
    //$config['max_height']  = '768';
    $config['file_name']=$name;
    $this->load->library('upload', $config);

    if ( ! $this->upload->do_upload())
    {
        $error = array('error' => $this->upload->display_errors());
        print_r($error);exit;
        //$this->load->view('upload_form', $error);
    }
    else
    {
        $data = array('upload_data' => $this->upload->data());

        //$this->load->view('upload_success', $data);
    }

    $config['image_library'] = 'gd2';
    $config['source_image'] = './uploads/'.$name.'.jpg';
    $config['new_image']    = './uploads/'.$name.'.jpg';
    $config['create_thumb'] = FALSE;
    $config['maintain_ratio'] = FALSE;
    $config['width']     = 1000;
    $config['height']   = 400;
    $this->image_lib->resize();
    $config['new_image']    = './uploads/'.$name.'.jpg';
    $config['width']     = 1000;
    $config['height']   = 400;
    $this->image_lib->initialize($config);
    $this->image_lib->resize();

    $title=$this->input->get_post('title');
    $content=$this->input->get_post('content');
    $image=$name.'.jpg';
    $status=$this->input->get_post('status');
    $this->sliders_model->insertNewSlider($title,$content,$image,$status);
    redirect('sliders','refresh');

}
**and my view file is code is as follows**

<?php echo form_open_multipart('sliders/do_upload',array('class'=>'search_form general_form'));?>
                                                <!--[if !IE]>start fieldset<![endif]-->
                                                <fieldset>
                                                    <!--[if !IE]>start forms<![endif]-->
                                                    <div class="forms">                                                     
                                                    <!--[if !IE]>start row<![endif]-->
                                                    <div class="row">
                                                        <label>Title:</label>
                                                        <div class="inputs">
                                                            <span class="input_wrapper"><input class="text" name="title" id="title" type="text" value="<?php //echo $title?>"/>
                                                         </span>

                                                        </div>
                                                    </div>
                                                    <!--[if !IE]>end row<![endif]-->

                                                    <!--[if !IE]>start row<![endif]-->
                                                    <div class="row">
                                                        <label>Image Path:</label>
                                                        <div class="inputs">
                                                            <!--<input type="file" name="file" id="file" /> -->
                                                            <input type="file" name="file"/>

                                                        </div>
                                                    </div>
                                                    <!--[if !IE]>end row<![endif]-->

                                                    <!--[if !IE]>start row<![endif]-->
                                                    <div class="row">
                                                        <label>Content:</label>
                                                        <span class="input_wrapper textarea_wrapper">
                                                        <textarea rows="5" cols="5" class="text" name="content"><?php //echo $content?></textarea>
                                                        </span>
                                                        </div>
                                                    </div>
                                                    <!--[if !IE]>end row<![endif]-->

                                                    <!--[if !IE]>start row<![endif]-->
                                                    <div class="row">
                                                        <label>Status:</label>
                                                        <div class="inputs">
                                                            <span class="input_wrapper blank">
                                                                <select name="status">
                                                                <?php if(isset($_POST['status']))
                                                                {
                                                                    $one='1';
                                                                    $zero='0';
                                                                    if($_POST['status']==$one)
                                                                    { echo "InIF";?>
                                                                    <option value="1" selected="selected" >Active</option>
                                                                    <option value="0" >Inactive</option>

                                                                    <?php }else if($_POST['status']==$zero){echo "InElseIF";?>
                                                                        <option value="0" selected="selected" >Inactive</option>
                                                                        <option value="1">Active</option>

                                                                    <?php }
                                                                    } 
                                                                    else
                                                                    {
                                                                        echo "InElse"; ?>
                                                                    <option value="1"  >Active</option>
                                                                    <option value="0"  >Inactive</option>
                                                            <?php   }?>
                                                                </select>
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <!--[if !IE]>end row<![endif]-->

                                                    <!--[if !IE]>start row<![endif]-->
                                                    <div class="row">
                                                        <div class="buttons">
                                                            <ul>
                                                                <li><span class="button send_form_btn"><span><span>SEND FORM</span></span><input value="upload" type="submit" /></span></li>
                                                                <li><a href="<?php echo base_url()?>sliderTable.php" class="button uncheck_all"><span><span>Cancel</span></span></a></li>

                                                            </ul>
                                                        </div>
                                                    </div>
                                                    <!--[if !IE]>end row<![endif]-->
                                                    </div>
                                                    <!--[if !IE]>end forms<![endif]-->
                                                </fieldset>
                                                <!--[if !IE]>end fieldset<![endif]-->                                               
                                            </form> 
```

我的主要问题是，当我按下提交按钮错误消息***时，您没有选择要上传的文件。***显示。任何人都可以帮助我快速克服这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T10:22:33.723

在 CodeIgniter 中，如果您使用上传库/帮助程序，则默认情况下您必须将文件命名为 input `userfile`。

为了解决这个问题，您可以将文件输入的名称传递给`do_upload`方法。

IE

```
<input type="file" name="my_file" />

$this->upload->do_upload('my_file'); 
```

# c++ - CImg 编译器错误

> ID：11030854
> 
> 赞同：0
> 
> 时间：2012-06-14T10:06:46.600
> 
> 标签：c++, c, image, image-processing

我想在我的应用程序中集成用于图像处理的 CImg 库。当我尝试编译示例应用程序时，出现编译时错误。错误消息如下所示。 **未解决的包含：X11/Xlib.h** 当我将 CImg.h 文件中的 cimg_display 变量从 Windows 的 1 更改为 2 时，我将收到以下错误。 **'va_list' 未在此范围内声明** 我在 CImg.h 文件中手动将 cimg_display 变量的值从 1 更改为 2。

所以请帮助我如何使用 CImg.h 文件运行我的项目。是否需要在 Windows 上安装 Microsoft Visual C++ 才能运行 CImg 库的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:01:47.493

如果您不需要 CImg 的显示功能，只需定义

```
#define cimg_display 0
#include "CImg.h" 
```

在包含头文件之前，不需要第三方库。

# cakephp - 如何在 cakephp 中保存继承的对象

> ID：11030870
> 
> 赞同：1
> 
> 时间：2012-06-14T10:07:29.863
> 
> 标签：cakephp, cakephp-2.1

我已经在 cakephp 中实现了继承。我有两个模型 Person 和 Employee。员工继承人

```
Person: id, name, age, address
Employee: id, person_id 
```

当我执行**$this->Employee->savAll($this->request->data)**时，Person 和 Employee 正在保存但**person_id 没有**在数据库中设置，它被 NULL 填充，有什么方法可以保存一键正确继承对象，模型如下所示

```
Class Person extends AppModel{
 var $name="Person";
}

App::import('model', 'Person')
Class Employee extends Person{
  var $name="Employee";
  public $actsAs = array( 'Inherit' ); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T23:36:34.513

从[保存您的数据](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveall-array-data-null-array-options-array "保存您的数据")文档中，

> saveAll 函数只是 saveMany 和 saveAssociated 方法的包装

您既没有保存一个模型，也没有保存关联的模型。您将需要保存父模型，检索 ID，并使用它来保存继承模型。

# windows-phone-7 - 为什么图像没有出现在 WP7 的以下布局中？

> ID：11030871
> 
> 赞同：0
> 
> 时间：2012-06-14T10:07:30.283
> 
> 标签：windows-phone-7

以下是单击图钉时显示以下布局时的布局设计。在该图像不可见？请告诉我

```
<Style x:Key="MenuItemsStyle" TargetType="sltkit:MenuItem">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="sltkit:MenuItem">
                            <StackPanel>
                                <TextBlock Text="{Binding Name}" 
                                           TextWrapping="Wrap" 
                                           Margin="24,0" 
                                           FontSize="26"/>
                                <TextBlock Text="{Binding Description}" 
                                           TextTrimming="WordEllipsis" 
                                           Margin="24,0" 
                                           FontSize="22"/>
                                <TextBlock Text="{Binding DatetimeAdded}" 
                                           TextTrimming="WordEllipsis" 
                                           Margin="24,0" 
                                           FontSize="22"/>
                                <Image  Source="/MyBuddies;component/Images/decline.png" Height="20" Width="20" Margin="200,0" Stretch="Fill" Name="imgDecline" >
                                </Image>
                            </StackPanel>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style> 
```

所有文本块值都是绑定的，但图像没有出现在布局中。请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:24:29.997

如果您的图像的构建操作是“资源”，那么您可以按照您指定的方式访问它。

检查此[链接](http://www.windowsphonegeek.com/tips/wp7-working-with-images-content-vs-resource-build-action)以了解有关构建类型及其用法的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:19:57.833

您需要将图像设置为项目中的资源才能显示。

我认为它们通常作为内容项添加。

HTH 鲁珀特

# android - 按纬度和经度查找地址，而不是按 Geocoder.getFromLocation()

> ID：11030873
> 
> 赞同：0
> 
> 时间：2012-06-14T10:07:31.283
> 
> 标签：android

我对如何在 android 4.0.3 中获取设备当前位置的地址有疑问。

在android v2.3 ~ < 4.0.3: 我可以通过GeoCoder by method 获取地址`getFromLocation(latitude, longitude, 1)`，但是在android 4.0.3 中，这个方法不起作用，导致异常：`Services is not available`.

我知道有些应用程序可以在 4.0.3 中获取地址，但我不知道他们如何做到这一点。所以请帮我通过另一种方法获取地址，或者帮我修复异常：`Service is not available`来自GeoCoder。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:22:34.553

> 但在 android 4.0.3 中，此方法不起作用，导致异常“服务不可用”。

这是任何平台都可能发生的常见错误。这是一个[链接](https://stackoverflow.com/questions/6894533/geo-coder-error)

> 帮我用另一种方法获取地址

[以下](http://www.geonames.org/export/reverse-geocoding.html)是提供此功能的 Web 服务列表。

我最喜欢的一个是[这个](http://www.geonames.org/export/web-services.html#findNearbyPlaceName)

你为什么不试试打。

[http://api.geonames.org/findNearbyPlaceName?lat=18.975&lng=72.825833&username=demo](http://api.geonames.org/findNearbyPlaceName?lat=18.975&lng=72.825833&username=demo)

它返回以下输出。（确保你把你的纬度和经度放在 URL 中）

![在此处输入图像描述](../Images/c9e941ab016d88f3fd970aeafe012aa7.png)

你也可以试试这个

[http://maps.googleapis.com/maps/api/geocode/json?latlng=19.172431,72.957019&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?latlng=19.172431,72.957019&sensor=false)

# c++ - stl 容器中的搜索元素

> ID：11030879
> 
> 赞同：0
> 
> 时间：2012-06-14T10:07:37.833
> 
> 标签：c++, boost, stl

所以我一直在寻找一种在字符串列表中搜索字符串的方法。我编写了以下代码

```
bool contains(const std::list<std::string>& data, const std::string& str)
{
        std::list<std::string>::iterator i;
        for(i=data.begin(); i!=data.end(); ++i)
        {   
                if (str == *i) 
                        return true;
        }   

        return false;

} 
```

这只是一个非常基本的代码。我知道[find](http://www.cplusplus.com/reference/algorithm/find/) 方法，但它需要 start 和 end 。理想的解决方案是使用整个容器。有一些相同的提升方法，但我不知道如何使用它们。你能举一些例子来提升查找元素的通用搜索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T10:10:10.283

`std::find`can 接受 start 和 end 迭代器，它们基本上决定了整个容器：

```
std::find(data.begin(), data.end(), str); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T10:50:31.240

使用[Boost.Range](http://www.boost.org/doc/libs/1_49_0/libs/range/doc/html/range/reference.html)：

```
#include <boost/range/algorithm/find.hpp>

auto i = boost::find(container, value);
if (i != boost::end(container))
  doSomething(*i); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T10:10:58.910

为什么不使用类似的东西：

```
template <typename container, typename T>
bool contains(container& container, T& elt)
{
   return (std::find(container.begin(), container.end, elt) != container.end();
} 
```

# java - 如何在android中获取主机IP地址？

> ID：11030882
> 
> 赞同：3
> 
> 时间：2012-06-14T10:07:49.327
> 
> 标签：java, android

问：-现在我在使用编程获取 android 设备的 IP 地址时遇到问题。任何人都可以给ma一个解决这个问题的代码。我已经阅读了很多关于它的主题，但没有从中得到可靠的答案。请给我任何关于它的建议。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T10:47:38.843

问题是您无法知道您当前使用的网络设备是否真的有公共 IP。但是，您可以检查是否是这种情况，但您需要联系外部服务器。

在这种情况下，我们可以使用[www.whatismyip.com](http://www.whatismyip.com)来检查（[几乎是从另一个 SO 问题中复制的](https://stackoverflow.com/questions/10322506/how-to-get-external-ip-succesfully)）：

```
public static InetAddress getExternalIp() throws IOException {
    URL url = new URL("http://automation.whatismyip.com/n09230945.asp");
    URLConnection connection = url.openConnection();
    connection.addRequestProperty("Protocol", "Http/1.1");
    connection.addRequestProperty("Connection", "keep-alive");
    connection.addRequestProperty("Keep-Alive", "1000");
    connection.addRequestProperty("User-Agent", "Web-Agent");

    Scanner s = new Scanner(connection.getInputStream());
    try {
        return InetAddress.getByName(s.nextLine());
    } finally {
        s.close();
    }
} 
```

要检查此 ip 是否绑定到您的网络接口之一：

```
public static boolean isIpBoundToNetworkInterface(InetAddress ip) {

    try {
        Enumeration<NetworkInterface> nets = 
            NetworkInterface.getNetworkInterfaces();

        while (nets.hasMoreElements()) {
            NetworkInterface intf = nets.nextElement();
            Enumeration<InetAddress> ips = intf.getInetAddresses();
            while (ips.hasMoreElements())
                if (ip.equals(ips.nextElement()))
                    return true;
        }
    } catch (SocketException e) {
        // ignore
    }
    return false;
} 
```

测试代码：

```
public static void main(String[] args) throws IOException {

    InetAddress ip = getExternalIp();

    if (!isIpBoundToNetworkInterface(ip))
        throw new IOException("Could not find external ip");

    System.out.println(ip);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T10:10:38.690

对于无线网络：

```
WifiManager wifiManager = (WifiManager) getSystemService(WIFI_SERVICE);
WifiInfo wifiInfo = wifiManager.getConnectionInfo();
int ipAddress = wifiInfo.getIpAddress(); 
```

或者更复杂的解决方案：

```
public String getLocalIpAddress() {
    try {
        for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
            NetworkInterface intf = en.nextElement();
            for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                InetAddress inetAddress = enumIpAddr.nextElement();
                if (!inetAddress.isLoopbackAddress()) {
                    return inetAddress.getHostAddress().toString();
                }
            }
        }
    } catch (SocketException ex) {
        Log.e(LOG_TAG, ex.toString());
    }
    return null;
} 
```

# selenium - 如何保证TestNG.xml中指定的顺序被保留？

> ID：11030885
> 
> 赞同：9
> 
> 时间：2012-06-14T10:08:04.497
> 
> 标签：selenium, webdriver, selenium-webdriver, testng

在使用 TestNG+Selenium 时，我无法确保类的执行顺序。下面指定的顺序（在 testng.xml 中）不起作用->首先执行 ClassTwo，然后执行 ClassOne。

```
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd">
<suite name="ABC" parallel="">
  <test verbose="2" name="xyz" annotations="JDK" preserve-order="true">
    <classes>
      <class name="script.ClassOne"/>
      <class name="script.ClassTwo"/>
    </classes>
  </test>
</suite> 
```

如何确保保留 TestNG.xml 中指定的顺序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-03-12T13:19:56.307

您只需将并行值设置为无

```
<suite name="ABC" parallel="none"> 
```

这个对我有用 ！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-14T11:47:12.733

根据[TestNG 文档](http://testng.org/doc/documentation-main.html#testng-xml)：

> 默认情况下，TestNG 将按照它们在 XML 文件中的顺序运行您的测试。如果您希望此文件中列出的类和方法以不可预知的顺序运行，请将 preserve-order 属性设置为 false

我建议将`preserve-order`属性排除在外，因为它是默认设置的。

但是，您还有其他两个选项可以强制测试方法/类的特定顺序：

1.  以编程方式调用测试。
2.  实现[方法拦截器](http://testng.org/doc/documentation-main.html#methodinterceptors)，它将对测试列表进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:02:32.887

....Quite a bit after the event but I had the same problem and found myself here.

In the end it was because the individual tests had been marked with a priority in the `@Test` annotation, so in my case but your example `script.ClassTwo` had a higher priority than `script.ClassOne`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T00:53:22.130

你`@Test( dependsOnGroups= { "dummyGroupToMakeTestNGTreatThisAsDependentClass" } )`在课堂上试过吗？

请参阅此线程： [TestNG 和 Selenium：将测试分成“组”，在每个组内按顺序运行](https://stackoverflow.com/questions/7956521/testng-selenium-separate-tests-into-groups-run-ordered-inside-each-group)

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-26T09:53:33.623

在 TestNG 中，执行顺序是基于字母顺序的，因此我们可以使用 TestNG 属性 Priority ，我们可以在此处提及您要首先执行的类->方法。这是您可以在 @Test 注释中给出的 Priority 注释属性。

示例：@Test(优先级=-1)

较小的数值将首先执行。

# mysql - CREATE TABLE LIKE 在 InfiniDB 上不起作用？

> ID：11030886
> 
> 赞同：1
> 
> 时间：2012-06-14T10:08:06.070
> 
> 标签：mysql, database, infinidb

我正在尝试自动化替换 InfiniDB 表的过程。我的想法是创建一个与原表结构相同的表，用新数据加载它，然后用这个新表替换原表。

问题是当你这样做时：

```
CREATE TABLE temp_table LIKE original_table; 
```

服务回复好老：

```
ERROR 138 (HY000): The syntax or the data type(s) is not supported by InfiniDB. Please check the InfiniDB syntax guide for supported syntax or data types. 
```

我正在考虑做一个`SHOW CREATE TABLE`，替换名称，然后运行结果，但是......这有点难看。

你知道更好的方法吗？

提前致谢！！

# css - 放两个 并排

> ID：11030895
> 
> 赞同：0
> 
> 时间：2012-06-14T10:08:28.770
> 
> 标签：css

我想把两个并排放在另一个上（我有三个）这是我的代码：

```
<div class=Mheader >
<div class=theader>
Meine Route !
</div>
<div class=imgcss>
 <img src="Images/Route1.png" width=600 height=100 />
</div> 
```

但图像总是在文字下方。我该如何解决这个问题？我的 CSS 是：

```
.Mheader
{
    font-family: 'Trebuchet MS';
    font-size: larger;
    font-weight: bold;
    font-style: italic;
    text-transform: capitalize;
    color: #FFFFFF;
    background-color: #008800;
    width: auto;
    height: 100px;
}
.theader
{
    font-family: 'Franklin Gothic Demi';
    font-size: xx-large;
    font-weight: bold;
    font-style: italic;
    line-height: normal;
    width: 250px;
    text-align: left;
    height: 100px;
}
.imgcss
{
    text-align: right;
    width: 600px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:10:11.343

你必须`float:left;`在`.theader`和 `.imgcss`类中使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:10:19.473

给`float`他们。像这样写：

```
.imgcss,
.theader{
 float:left;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T10:10:46.973

只是`float: left`和 元素，`.theader`并`.imgcss`确保父元素至少`850px`大*（600px + 250px）*

```
.imgcss, .theader{
    ...
    float    : left;
}

.Mheader {
    ...
    min-width : 850px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T10:17:23.493

我假设您希望绿色标题跨越屏幕，并且图像/徽标应该浮动在此标题内的右侧。为达到这个：

1.  关闭`.Mheader`. 与失踪 `</div>`
2.  添加`float: left`到 .theaeder。保持`width: auto`
3.  添加`float: right`到 .imgcss

在此处查看演示：

[http://jsfiddle.net/mtbwD/](http://jsfiddle.net/mtbwD/)

# php - jquery UI进度条，表单提交后需要显示（php和jquery）

> ID：11030896
> 
> 赞同：1
> 
> 时间：2012-06-14T10:08:33.323
> 
> 标签：php, jquery, jquery-ui, progress-bar

我有一个涉及 Jquery UI 进度条和 PHP 的问题。剧情是这样的

1) 用户选择 html 表单中的一些字段，然后使用 php 发布

2）从帖子中检索数据，这些数据可能足够大，页面需要几分钟才能加载（这就是我实现进度条的原因）

3）当页面加载 Jquery UI 进度条增加进度。

到目前为止，我已经安装了 jquery 进度条，但它只在页面加载时出现，而不是在加载过程中出现。

有什么帮助吗？

这是我的源代码示例

```
 <?php

 echo "<div id='progress-bar'></div>";
 if (isset($_POST['submit']))   {

 if(!empty($_POST['startdate']) && !empty($_POST['enddate']))   {

        $accountdetails = GetAccountDetails("SELECT Account_Name,         Account_Project_X, Account_Number FROM Accounts WHERE Account_Name = '".$_POST['accountnames']."'"); 
        echo "<div id='data-table'>";

   ?> 
```

数据表包含将要加载的数据，

然后数据表 div 结束，然后对 css 和 jquery 文件的文件引用与 javascript 代码一起添加到进度条。

```
 <link type="text/css" href="css/smoothness/jquery-ui-1.8.20.custom.css"    rel="Stylesheet" />    
  <link type="text/css" href="css/style.css" rel="Stylesheet" />    

 <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
 <script type="text/javascript" src="js/jquery-ui-1.8.20.custom.min.js"></script>

 <script    type="text/javascript">
 $('#startdate').datepicker({ dateFormat: "yy-mm-dd" });
 $('#enddate').datepicker({ dateFormat: "yy-mm-dd" });
 </script>

 <script    type="text/javascript">
$(function() {
    $( "#progress-bar").progressbar();
});
</script> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:26:55.873

据我了解，当表格发布时；页面重新加载（通常的 PHP 方式）。
要使用进度条，需要考虑以下几点：

1.  需要编辑的内容`POST`需要`POST`使用jQuery进行编辑（即使用AJAX）
2.  您需要有一种方法来识别加载的内容量以及剩余量，以便了解更新进度条的数量

如果这些都完成了，那么你应该能够让它工作

# c# - C# Timer - 需要帮助禁用计时器，直到代码执行然后重新启动计时器。当前最大 CPU :(

> ID：11030897
> 
> 赞同：0
> 
> 时间：2012-06-14T10:08:35.027
> 
> 标签：c#, timer, cpu

基本上我对我试图放在一起的这个计时器程序有一个问题。在启动程序时，它将使用稳定的 25% CPU，我不介意，但每次计时器触发时，它都会在 CPU 上再增加 25%，所以在第 4 次通过时，我完全耗尽了。

我认为我没有在它触发后正确处理计时器，但我对 c# 很陌生，并且不确定如何去做。

我的计划的应对基本上是：

*   执行一些程序 - 一旦完成启动计时器
*   等到计时器结束，然后再次启动程序，禁用计时器直到完成

任何帮助将不胜感激 ：）

```
private static void OnTimedEvent(object source, ElapsedEventArgs e)
{
    IpCheck();
}

private static void EnableTimer()
{
    System.Timers.Timer aTimer = new System.Timers.Timer();
    // Set the Interval to x seconds.
    aTimer.Interval = 10000;
    aTimer.Enabled=true;
    aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);
    aTimer.Enabled = false;
    aTimer.Dispose();
} 
```

好的修订版如下 - 简化并排除了 ip 检查，所以它现在所做的只是显示一个消息框 - 这甚至不会再执行了:(

```
public class Timer1        
{

    System.Timers.Timer aTimer = new System.Timers.Timer();
    public static void Main()
    {

        Timer1 tTimer = new Timer1();
        tTimer.EnableTimer();

       }

    private void OnTimedEvent(object source, ElapsedEventArgs e)
    {
        aTimer.Enabled = false;
        MessageBoxPrint();
        aTimer.Enabled = true;

    }
    private void EnableTimer()
    {

        // Set the Interval to x seconds.
        aTimer.Interval = 10000;
        aTimer.Enabled=true;
        aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);

    }

    public static void MessageBoxPrint()
    {
        MessageBox.Show("Testing");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:14:13.633

您可能正在寻找这样的东西：

```
private static System.Timers.Timer aTimer = new System.Timers.Timer();

// This method will be called at the interval specified in EnableTimer
private static void OnTimedEvent(object source, ElapsedEventArgs e)
{
    aTimer.Enabled = false;  // stop timer
    IpCheck();
    aTimer.Enabled = true;   // restart timer so this method will be called in X secs
}

private static void EnableTimer()
{
    // Set the Interval to x seconds.
    aTimer.Interval = 10000;
    aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);

    aTimer.Enabled=true;  // actually starts timer
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:14:46.690

我不放弃，为什么你有 cpu 负载，但我会这样做：

```
private static void OnTimedEvent(object source, ElapsedEventArgs e)
{
    ((Timer)source).Enabled = false;
    IpCheck();
    ((Timer)source).Enabled = true;
} 
```

并且不要在方法调用中处理计时器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T10:18:27.247

```
static System.Timers.Timer aTimer = new System.Timers.Timer();

    private static void OnTimedEvent(object source, ElapsedEventArgs e)
        {

aTimer.Enabled=false;

            IpCheck();

aTimer.Enabled=true;
        }

        private static void EnableTimer()
        {
            // Set the Interval to x seconds.
            aTimer.Interval = 10000;
            aTimer.Enabled=true;
            aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);

        }
private static void DisableTimer()
{

aTimer.Elapsed -= new ElapsedEventHandler(OnTimedEvent);
aTimer.Enabled = false;

} 
```

未测试未编译，只是我会在你的地方做的一个示例，所有添加的行都在那里，没有标签

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T11:23:16.063

问题是他在 Timer1 类中创建了一个 Timer1，因此当您加载 Timer1 时，它会加载另一个 Timer1，该 Timer1 会加载另一个 Timer1，该 Timer1 会加载....它认为您明白了

```
public class Timer1        
{

System.Timers.Timer aTimer = new System.Timers.Timer();
public static void Main()
{

    Timer1 tTimer = new Timer1();//<-this line right here is killing you 
                                 //remove it, as I don't see anyuse for it at all 
```

然后在这一行

```
 tTimer.EnableTimer(); 
```

说啊

```
EnableTimer();
//or
this.EnableTimer(); 
```

您不需要实例化您正在使用的类，就它而言，它已经实例化了。

# r - knitr - 如何对齐代码并并排绘制

> ID：11030898
> 
> 赞同：10
> 
> 时间：2012-06-14T10:08:35.323
> 
> 标签：r, knitr

有没有一种简单的方法（例如，通过块选项）来获取块的源代码和它并排生成的图，如[本文档](https://github.com/baptiste/talks/blob/master/ggplot/presentation.pdf)的第 8 页（以及其他） ？

我尝试使用`out.width="0.5\\textwidth", fig.align='right'`，它使绘图正确地仅占据页面的一半并向右对齐，但源代码显示在它的顶部，这是正常行为。我想把它放在情节的左边。

谢谢

示例代码：

```
<<someplot, out.width="0.5\\textwidth", fig.align='right'>>=
plot(1:10)
@ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-30T19:46:04.820

好吧，这最终比我预期的要棘手。

在 LaTeX 方面，[**adjustbox**包](http://ctan.org/pkg/adjustbox)让您可以很好地控制并排框的对齐方式，这在 tex.stackexchange.com 上[的这个优秀答案中得到了很好的证明。](https://tex.stackexchange.com/a/34200/9456)所以我的一般策略是用 LaTeX 代码包装指定的 R 块的格式化、整理、彩色输出：（1）将其放置在调整框环境中；(2) 在右侧的另一个调整框环境中包含块的图形输出。为此，我需要将**knitr**的默认块输出挂钩替换为自定义的`(2)`，在文档`<<setup>>=`块的部分中定义。

Section `(1)`of`<<setup>>=`定义了一个块挂钩，可用于在`options("width")`每个块的基础上临时设置 R 的任何全局选项（特别是这里， ）。[有关仅处理此设置的一部分的问题和答案，请参见此处](https://stackoverflow.com/questions/23349525/how-to-set-knitr-chunk-output-width-on-a-per-chunk-basis)。

最后，Section`(3)`定义了一个 knitr “模板”，这是一组需要在每次生成并排的代码块和图形时设置的选项。一旦定义，它允许用户通过简单地输入`opts.label="codefig"`块的标题来触发所有必需的操作。

```
\documentclass{article}

\usepackage{adjustbox}            %% to align tops of minipages
\usepackage[margin=1in]{geometry} %% a bit more text per line

\begin{document}

<<setup, include=FALSE, cache=FALSE>>=
## These two settings control text width in codefig vs. usual code blocks
partWidth <- 45
fullWidth <- 80
options(width = fullWidth)

##  (1) CHUNK HOOK FUNCTION
##   First, to set R's textual output width on a per-chunk basis, we
## need to define a hook function which temporarily resets global R's
## option() settings, just for the current chunk
knit_hooks$set(r.opts=local({
    ropts <- NA
    function(before, options, envir) {
        if (before) {
            ropts <<- options(options$r.opts)
        } else {
            options(ropts)
        }
    }
}))

## (2) OUTPUT HOOK FUNCTION

##   Define a custom output hook function. This function processes _all_
## evaluated chunks, but will return the same output as the usual one,
## UNLESS a 'codefig' argument appeared in the chunk's header.  In that
## case, wrap the usual textual output in LaTeX code placing it in a
## narrower adjustbox environment and setting the graphics that it
## produced in another box beside it.

defaultChunkHook <- environment(knit_hooks[["get"]])$defaults$chunk

codefigChunkHook <- function (x, options) {
        main <- defaultChunkHook(x, options)
        before <-
            "\\vspace{1em}\n
             \\adjustbox{valign=t}{\n
             \\begin{minipage}{.59\\linewidth}\n"
        after <-
            paste("\\end{minipage}}
                   \\hfill
                   \\adjustbox{valign=t}{",
                   paste0("\\includegraphics[width=.4\\linewidth]{figure/",
                           options[["label"]], "-1.pdf}}"), sep="\n")
    ## Was a codefig option supplied in chunk header?
    ## If so, wrap code block and graphical output with needed LaTeX code.
    if (!is.null(options$codefig)) {
      return(sprintf("%s %s %s", before, main, after))
    } else {
      return(main)
    }
}

knit_hooks[["set"]](chunk = codefigChunkHook)

## (3) TEMPLATE
##   codefig=TRUE is just one of several options needed for the
## side-by-side code block and a figure to come out right. Rather
## than typing out each of them in every single chunk header, we
## define a _template_ which bundles them all together. Then we can
## set all of those options simply by typing opts.label="codefig".

opts_template[["set"]](
codefig = list(codefig=TRUE, fig.show = "hide",
               r.opts = list(width=partWidth),
               tidy = TRUE,
               tidy.opts = list(width.cutoff = partWidth)))
@

A chunk without \texttt{opts.label="codefig"} set...
<<A>>=
1:60
@

\texttt{opts.label="codefig"} \emph{is} set for this one

<<B, opts.label="codefig", fig.width=8, cache=FALSE>>=
library(raster)
library(RColorBrewer)

## Create a factor raster with a nice RAT (Rast. Attr. Table)
r <- raster(matrix(sample(1:10, 100, replace=TRUE), ncol=10, nrow=10))
r <- as.factor(r)
rat <- levels(r)[[1]]
rat[["landcover"]] <- as.character(1:10)
levels(r) <- rat

## To get a nice grid...
p <- as(r, "SpatialPolygonsDataFrame")

## Plot it
plot(r, col = brewer.pal("Set3", n=10),
     legend = FALSE, axes = FALSE, box = FALSE)
plot(p, add = TRUE)
text(p, label =  getValues(r))
@

\texttt{opts.label="codefig"} not set, and all settings back to ``normal''.
<<C>>=
lm(mpg ~ cyl + disp + hp + wt + gear, data=mtcars)
@

\end{document} 
```

![在此处输入图像描述](../Images/de59e1a44104566a21c36987432e508c.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-26T09:02:52.913

我看到了 3 种可能性

*   对于`beamer`演示文稿，我也会去`\begin{columns}`...。`\end{columns}`
*   如果它只是一个这样的情节：Minipages
*   [这里](http://hyperspec.r-forge.r-project.org/blob/plotting.pdf)我使用了一个表格（列代码和列结果）。*（这个例子是“正常的”Sweave）*

对于所有这三个，块选项将具有`include = FALSE`，并且情节将“手动”放置到正确的位置`\includegraphics[]{}`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T07:11:56.027

您可以在包 PerformanceAnalytics 或 gplots 中的“textplot”中显示文本。

（小）缺点：据我所知，没有语法高亮可能。

示例代码：

```
```{r fig.width=8, fig.height=5, fig.keep = 'last', echo=FALSE}
suppressMessages(library(PerformanceAnalytics))
layout(t(1:2))
textplot('plot(1:10)')
plot(1:10)
``` 
```

# python - 如何使用 Python 将图形数字化？

> ID：11030902
> 
> 赞同：10
> 
> 时间：2012-06-14T10:08:57.770
> 
> 标签：python, image-processing, graph

我想将图形（绘图）的图像转换为相应的数据。是否有任何 python 库可以做到这一点，或者可能有一些示例代码可以学习？如果没有，那么我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-07T11:22:13.757

您还可以使用数字化软件应用程序，将图形图像转换为数据，即数字。im2graph 是免费的，可用于 Linux 和 Windows。见[http://www.im2graph.co.il](http://www.im2graph.co.il)。

# android - 运行从 code.google.com 下载的源代码时出错

> ID：11030904
> 
> 赞同：0
> 
> 时间：2012-06-14T10:09:05.980
> 
> 标签：android, eclipse

我从`code.google.com`.
当我将应用程序导入 eclipse 时，它​​会在应用程序中显示很多错误，其中包括导入无效、使用的方法尚未定义等错误。
作为示例`com.google.android.apps.mytracks.content.TracksColumns;`已导入其中一个 java 文件，但这给出了无法解决此导入的错误。

# valgrind - 了解从源代码构建 Valgrind 的错误修复

> ID：11030908
> 
> 赞同：1
> 
> 时间：2012-06-14T10:09:21.343
> 
> 标签：valgrind

我正在尝试从源代码构建 Valgrind，但遇到了[其他人在我面前](https://stackoverflow.com/questions/10518734/valgrind-doesnt-accept-newest-version-of-glibc)遇到的同样问题。但是，提出的解决方案都非常老套，这不是我喜欢做事的方式。我还在[Ubuntu bugtracker 中为 Valgrind 包](https://bugs.launchpad.net/ubuntu/+source/valgrind/+bug/934127)找到了一些东西：

```
Proposed fix:

valgrind (1:3.7.0-0ubuntu2) precise; urgency=low

  * Allow glibc 2.15 in the configure checks. (LP: #934127)
      - Add 0009-glibc-215.patch, cherry-picked from upstream.
      - Add 0010-automake-1.11.2.patch by Gregorio Guidi.
      - Use dh-autoreconf instead of autotools-dev.

      -- Felix Geyer <email address hidden> Fri, 17 Feb 2012 12:14:44 +0100 
```

这被接受为修复错误，所以我认为它可能是真正的解决方案。然而我不能就这样应用它。

*   什么意思`cherry-picked from upstream`？
*   在 google 和下载的源包中搜索都没有找到这些补丁文件。
*   最后一点`Use dh-autoreconf instead of autotools-dev`我也不清楚。

有人可以将解决方案翻译成更适用的形式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:32:11.860

最简单的方法是查看您是否可以通过包管理器安装相应的版本。[如果你真的需要自己构建它，你会在`[..].debian.tar.gz`档案](http://packages.ubuntu.com/quantal/valgrind)中找到提到的补丁。

如果您查看[Ubuntu 跟踪器](https://launchpadlibrarian.net/93158534/valgrind_3.7.0-0ubuntu2.debdiff)，您会发现：

```
diff -Nru valgrind-3.7.0/debian/patches/0009-glibc-215.patch valgrind-3.7.0/debian/patches/0009-glibc-215.patch
--- valgrind-3.7.0/debian/patches/0009-glibc-215.patch  1970-01-01 01:00:00.000000000 +0100
+++ valgrind-3.7.0/debian/patches/0009-glibc-215.patch  2012-02-17 12:14:29.000000000 +0100
@@ -0,0 +1,30 @@
+Description: add support for glibc 2.15
+Origin: upstream, http://sourceforge.net/mailarchive/forum.php?thread_name=20111229082456.D5FE6108870%40jail0086.vps.exonetric.net&forum_name=valgrind-developers
+
+Modified: trunk/configure.in
... 
```

[上面的 SourceForge URL](http://sourceforge.net/mailarchive/forum.php?thread_name=20111229082456.D5FE6108870@jail0086.vps.exonetric.net&forum_name=valgrind-developers)告诉你这个补丁是在 r.12323 中提交给 Valgrind 存储库的。

（关于 autotools 的最后一句话是特定于 Debian 软件包构建过程的，很可能与您的问题无关。）

# javascript - String.split() JavaScript 方法在 firefox 中不起作用

> ID：11030912
> 
> 赞同：4
> 
> 时间：2012-06-14T10:09:35.370
> 
> 标签：javascript, string, firefox, string-split

我正在尝试在 javascript 中拆分字符串。它在 chrome 中运行良好，但在 Firefox 中无法运行

代码

```
var a="1#abc";
var b=a.split('#'); 
```

科尔的错误是`TypeError: response.split is not a function`

Firefox 中的响应不是字符串。就像`[Object XMLDocument]`它没有被`toString()`方法转换一样。我如何将其转换为字符串

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-14T10:16:39.687

我不知道发生了什么，但您可以尝试在拆分之前将变量转换为字符串：

```
var a="1#abc";
var b=a.toString().split('#'); 
```

# asp.net - IIS 停止使用 ASP WEB API 工作

> ID：11030914
> 
> 赞同：2
> 
> 时间：2012-06-14T10:09:41.843
> 
> 标签：asp.net, asp.net-mvc-3, c#-4.0, iis-7

我正在使用 (C#) 和 (ASP.NET Web API) 和 MS SQL 2008 R2 开发 Web 应用程序，并在 Windows Server 2008 的 IIS7 上托管，所有 API 都以 JSON 格式返回数据

当我从任何网络浏览器调用任何 API 并在第一次调用完成之前刷新页面以再次调用时，它会在事件查看器中给我警告，并且在 0 到 5 分钟后 II7 中的工作进程停止了大约 2 分钟（挂起）和在这 2 分钟内来自所有用户的所有 API 调用都不起作用，事件查看器给我一个错误：

**事件查看器中的警告**

```
Event code: 3005 
Event message: An unhandled exception has occurred. 
Event time: 6/5/2012 3:29:10 PM 
Event time (UTC): 6/5/2012 1:29:10 PM 
Event ID: 63adcb812864465cab58e9f870bcbb92 
Event sequence: 5 
Event occurrence: 1 
Event detail code: 0 

Application information: 
    Application domain: /LM/W3SVC/2/ROOT/AAA-2-129833765408950000 
    Trust level: Full 
    Application Virtual Path: /AAA
    Application Path: C:\inetpub\wwwroot\AAA\ 
    Machine name: MyMachine

Process information: 
    Process ID: 9860 
    Process name: w3wp.exe 
    Account name: NT AUTHORITY\NETWORK SERVICE 

Exception information: 
    Exception type: HttpException 
    Exception message: The remote host closed the connection. The error code is 0x800704CD.
   at System.Web.Http.WebHost.HttpControllerHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.Http.WebHost.HttpControllerHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

Request information: 
    Request URL: My API URL
    Request path: API Path 
    User host address: My IP 
    User:  
    Is authenticated: False 
    Authentication Type:  
    Thread account name: NT AUTHORITY\NETWORK SERVICE 

Thread information: 
    Thread ID: 8 
    Thread account name: NT AUTHORITY\NETWORK SERVICE 
    Is impersonating: False 
    Stack trace:    at System.Web.Http.WebHost.HttpControllerHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.Http.WebHost.HttpControllerHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

**事件查看器中的错误**

```
An unhandled exception occurred and the process was terminated.

Application ID: /LM/W3SVC/2/ROOT/AAA

Process ID: 9860

Exception: System.AggregateException

Message: A Task's exception(s) were not observed either by Waiting on the Task or accessing its Exception property. As a result, the unobserved exception was rethrown by the finalizer thread.

StackTrace:    at System.Threading.Tasks.TaskExceptionHolder.Finalize()

InnerException: System.Web.HttpException

Message: The remote host closed the connection. The error code is 0x800704CD.

StackTrace:    at System.Web.Http.WebHost.HttpControllerHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.Http.WebHost.HttpControllerHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

**背后的代码**

公共类内容控制器：ApiController { 动态 json = new JsonObject();

```
 // GET /api/v1/content      
    [HttpGet]
    public IEnumerable<ME_API_V1.Models.Content> GetContent()
    {
        Request.Headers.Add("Accept", "application/json");
        List<ZMSLibrary.ME.Models.Content> contentList = new List<ZMSLibrary.ME.Models.Content>() ;
        try
        {
            //DateTime CurrentDateTime = DateTime.Now;

            var querystring = this.Request.RequestUri.Query;
            var parameters = HttpUtility.ParseQueryString(querystring);

            string userID = parameters["userID"];
            string countryCode = parameters["countryCode"];
            string language = parameters["language"];
            string categoryName = parameters["categoryName"];
            string subcategoryID = parameters["subcategoryID"];
            string count = parameters["count"];
            string start = parameters["start"];
            string platform = parameters["platform"];
            string imageSize = parameters["imageSize"];

            //Check IP Restiriction
            Restriction restiriction = new Restriction(ConfigurationManager.ConnectionStrings["AppSQLConnection"].ToString());
            bool allowedCheck = restiriction.IsUserAllowed(userID);
            if (!allowedCheck)
            {
                dynamic json = new JsonObject();
                json.message = "Authorized Only for Mobinil in Egypt";
                var msg = new HttpResponseMessage(System.Net.HttpStatusCode.Forbidden);
                msg.Content = new StringContent(json.ToString());
                msg.Content.Headers.ContentType.MediaType = "application/json";
                throw new HttpResponseException(msg);
            }
            else
            {

                //Validate input data
                if (InputValidation.isValidUserid(userID) &&
                    InputValidation.isValidCountryCode(countryCode) &&
                    InputValidation.isValidLanguage(language) &&
                    InputValidation.isValidCategory(categoryName) &&
                    InputValidation.isValidUserid(subcategoryID) &&
                    InputValidation.isValidPlatform(platform)
                    )
                {
                    if (!InputValidation.isValidImageSize(imageSize))
                    {
                        imageSize = "high";
                    }

                    if (!InputValidation.isValidUserid(count) || !InputValidation.isValidUserid(start))
                    {
                        start = WebConfigurationManager.AppSettings["DefaultStart"];
                        count = WebConfigurationManager.AppSettings["DefaultCount"];
                    }

                    ContentOperations contentOperations = new ContentOperations();
                    contentList = contentOperations.getContent(subcategoryID, categoryName, count, start, countryCode, userID, ConfigurationManager.ConnectionStrings["AppSQLConnection"].ToString(), WebConfigurationManager.AppSettings["FileFolderName"], imageSize, language, platform);
                    if (contentList != null)
                    {
                        List<ME_API_V1.Models.Content> contentOutputList = new List<ME_API_V1.Models.Content>();
                        foreach (ZMSLibrary.ME.Models.Content c in contentList)
                        {
                            File tempFile = new File();
                            ME_API_V1.Models.Content cTemp = new ME_API_V1.Models.Content();
                            cTemp.contentID = int.Parse(c.ContentID);
                            if (c.Rating == "1")
                                cTemp.userRating = "Like";
                            else if (c.Rating == "0")
                                cTemp.userRating = "Dislike";

                            cTemp.date = String.Format("{0:G}", c.ContentDate);

                            //if (c.Provider.ContentProviderName != "")  //to make the value null instead of ""
                            cTemp.providerName = c.Provider.ContentProviderName;
                            //if (c.Provider.ContentProviderIcon != "")
                            cTemp.providerIconURL = c.Provider.ContentProviderIcon;
                            //if (c.Provider.ContentProviderImage != "")
                            cTemp.providerImageURL = c.Provider.ContentProviderImage;

                            if (language == "AR")
                            {
                                //if (c.ContentArabicTitle != "")
                                cTemp.title = c.ContentArabicTitle;
                                //if (c.ContentArabicSubTitle != "")
                                cTemp.subtitle = c.ContentArabicSubTitle;
                                //if (c.ContentArabicDescription != "")
                                cTemp.description = c.ContentArabicDescription;
                            }
                            else
                            {
                                //if (c.ContentEnglishTitle != "")
                                cTemp.title = c.ContentEnglishTitle;
                                //if (c.ContentEnglishSubTitle != "")
                                cTemp.subtitle = c.ContentEnglishSubTitle;
                                //if (c.ContentEnglishDescription != "")
                                cTemp.description = c.ContentEnglishDescription;
                            }

                            if (categoryName == "Music")
                            {
                                foreach (ContentFile cf in c.ContentFiles)
                                {
                                    if (cf.FileType.FileTypeName == "Icon")
                                        tempFile.iconURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "Image")
                                        tempFile.imageURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "Clip_High")
                                        tempFile.highVideoURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "Clip_Low")
                                        tempFile.lowVideoURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "Tone")
                                        tempFile.toneURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "Song")
                                        tempFile.songURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "YouTube")
                                        tempFile.youtubeID = cf.ContentFileName;

                                }

                            }
                            else if (categoryName == "News")
                            {
                                foreach (ContentFile cf in c.ContentFiles)
                                {
                                    if (cf.FileType.FileTypeName == "Icon")
                                        tempFile.iconURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "Image")
                                        tempFile.imageURL = cf.ContentFileName;

                                }

                            }
                            else if (categoryName == "Videos")
                            {
                                foreach (ContentFile cf in c.ContentFiles)
                                {
                                    if (cf.FileType.FileTypeName == "Icon")
                                        tempFile.iconURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "Image")
                                        tempFile.imageURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "Video_High")
                                        tempFile.highVideoURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "Video_Low")
                                        tempFile.lowVideoURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "YouTube")
                                        tempFile.youtubeID = cf.ContentFileName;

                                }

                            }
                            else if (categoryName == "Applications")
                            {
                                foreach (ContentFile cf in c.ContentFiles)
                                {
                                    if (cf.FileType.FileTypeName == "Icon")
                                        tempFile.iconURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "Image")
                                        tempFile.imageURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "App_Android" || cf.FileType.FileTypeName == "App_Nokia" || cf.FileType.FileTypeName == "App_Blackberry" || cf.FileType.FileTypeName == "App_iPhone")
                                    {                                           
                                            tempFile.appURL = cf.ContentFileName;                                               
                                    }

                                }

                            }

                            cTemp.files = tempFile;
                            contentOutputList.Add(cTemp);
                        }
                        return contentOutputList;

                    }

                }

                if (contentList == null)
                    throw new Exception();
                else
                {
                    json.message = "Wrong or missing data";
                    var msg = new HttpResponseMessage(System.Net.HttpStatusCode.BadRequest);
                    msg.Content = new StringContent(json.ToString());
                    msg.Content.Headers.ContentType.MediaType = "application/json";
                    throw new HttpResponseException(msg);
                }
            }

        }       
        catch (Exception ex)
        {
            if (ex is HttpResponseException)
            {
                throw;
            }
            else
            {
                json.message = "Error in System";
                var msg = new HttpResponseMessage(System.Net.HttpStatusCode.InternalServerError);
                msg.Content = new StringContent(json.ToString());
                msg.Content.Headers.ContentType.MediaType = "application/json";
                throw new HttpResponseException(msg);
            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:23:33.350

我看到你有两个 foreach 循环，如果这是一个大循环，并且你的程序在那里循环堆栈，那么这就是你的挂起。

您可以尝试类似的方法来检测断开连接并停止此延迟。

```
foreach (ZMSLibrary.ME.Models.Content c in contentList)
{
    if (!Response.IsClientConnected){
        HttpContext.Current.Response.End();
        return;
    }

    foreach (ContentFile cf in c.ContentFiles)
    {

    }
} 
```

另外我不知道您是否打开了会话，如果您不使用它，请将其关闭，如果您添加数据，请使用其他同步 - 例如使用互斥锁，互斥锁名称是工作的唯一代码。

## 关于错误信息

```
The remote host closed the connection. 
```

这实际上只是说您按照您的描述进行了刷新，而没有先获取结果，所以线程完成后，并尝试将输出发送回他发现连接关闭。

# doctrine-orm - 在 Doctrine 结果集合中进行过滤的方法？

> ID：11030919
> 
> 赞同：4
> 
> 时间：2012-06-14T10:09:57.440
> 
> 标签：doctrine-orm

我对 Doctrine 很陌生，所以对于那些更有经验的人来说，这似乎是一个相当明显的问题。

我正在编写一个数据导入工具，它必须检查导入的每一行是否包含有效数据。例如，Row 引用了产品代码，我需要检查该代码是否存在预先存在的 Product 对象。如果不是，则将该行标记为无效。

现在我可以很容易地为每一行做这样的事情。

```
$productCode = $this->csv->getProductNumber();
$product = $doctrine->getRepository('MyBundle:Product')->findOneBy(array('code' => $productCode )); 
```

但这似乎效率低得可怕。所以我考虑返回整个产品集合，然后在其中进行迭代。

```
$query = $this->getEntityManager()->createQuery('SELECT p FROM MyBundle\Entity\Product p');
$products = $query->getResult(); 
```

一切都很好，但是我必须编写混乱的循环来搜索。

两个问题：

1）。我想知道我是否遗漏了一些实用方法，例如 Magento Collections 中的一些实用方法，您可以在其中搜索 Collection 结果，而不会产生额外的数据库命中。例如，在 Magento 中，这将在 code 属性上迭代集合和过滤器。

```
$collection->getItemByColumnValue("code","FZTY444"); 
```

2）。目前我正在使用下面的查询，它返回一个“矩形数组”。效率更高，但可能会更好。

```
$query = $this->getEntityManager()->createQuery('SELECT p.code FROM MyBundle\Entity\Product p');
$products = $query->getResult(); 
```

有没有一种方法可以返回一维数组而不必重复结果集并转换为平面数组，所以我可以在结果上使用 in_array() ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T16:16:24.437

如果我正确理解您的问题，您想要过滤由 getResult() 返回的实体数组。我有一个类似的问题，我想我已经想出了两种方法。

## 方法一：数组

对变量使用[array_filter](http://php.net/manual/en/function.array-filter.php)方法。`$products`是的，这相当于背景中的“循环”，但我认为这是一种通常可以接受的过滤数组的方式，而不是自己编写。您需要提供回调（首选 5.3 中的匿名函数）。这是一个例子

```
$codes = array_filter($products, function($i) {
    return $i->getCode() == '1234';
}); 
```

基本上在您的函数中，如果您希望返回结果，则返回 true，`$codes`否则返回 false（不确定是否需要 false，或者 void 返回值是否足够）。

## 方法二：Doctrine 的 ArrayCollection

在您的自定义存储库或任何您返回 getResult() 方法的地方，您可以改为返回 ArrayCollection。这可以在 Doctrine 命名空间中找到`Doctrine\Common\Collections\`。有关此方法背后的接口的更多文档可以在[这里](http://www.doctrine-project.org/api/common/2.3/class-Doctrine.Common.Collections.Collection.html#_filter)找到。所以在这种情况下你会有

```
$query = $this->getEntityManager()->createQuery('SELECT p FROM MyBundle\Entity\Product p');
$products = new ArrayCollection($query->getResult()); 
```

然后，您可以在数组集合上使用 filter() 方法。以与 array_filter 非常相似的方式使用它。除了它不需要第一个参数，因为你这样称呼它：`$products->filter(function($i) { ... });`

ArrayCollection 类是一个迭代器，因此您可以在`foreach`循环中使用它来满足您的需求，并且它与您的产品数组应该没有什么不同。除非您的代码明确使用`$products[$x]`，否则它应该是即插即用*。

*注意：我还没有实际测试过这个代码或概念，但根据我读过的所有内容，它似乎是合法的。如果事实证明我错了，我会更新我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:22:08.080

您可以使用另一种补水模式。$query->getResult() 通常返回对象水合的结果。看看$query->getScalarResult()，应该更适合你的需求。

更多信息请访问[Doctrine 2 网站](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#query-result-formats)。

# javascript - HTML 在客户端对输入类型文本（TextBox）的内容进行编码（使用 Jquery 等）

> ID：11030920
> 
> 赞同：0
> 
> 时间：2012-06-14T10:10:05.353
> 
> 标签：javascript, jquery, html

我正在使用 Ajax 发布网站的评论。

不，用户也可以在文本框中编写一些脚本。

问题是**我想对它进行 HTML 编码 (REMOVE html tags,scripts ETC)**。

表示删除 html 元素。

就目前而言，我做了一次不成功的尝试：

```
 var textData = $("'" +  $('#textBox').val() + "'").text(); 
```

但这对我来说是一个荒谬的尝试。虽然它有时会起作用，但它可能会因特殊符号等而失败。

任何帮助是这方面的深表感谢。

谢谢你。

编辑：

每当用户发布评论时，我都会将评论发送到服务器，并在服务器端对其进行编码并将其保存到数据库，并在客户端更新我的 HTML。我不想从服务器取回编码消息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T10:39:32.390

正如其他人所说，*请*不要这样做。在服务器上解决。

但是，仅对发送的任何内容进行 HTML 编码的最短方法（即实际打印输出`<b>x</b>`是这样的：

```
var yourText = $('#textbox').val(); // or whatever
var yourTextHTML = $('<span></span>').text(yourText).html(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:27:10.087

你真的不应该做这个客户端。攻击者可以只发表评论，使用调试工具（如[Fiddler](http://fiddler2.com) ）拦截请求，修改它以使其包含一些禁止字符 - 你是[XSS](https://www.owasp.org/index.php/XSS) ed。

强烈建议您改为在服务器上执行此操作。在将其写入文档之前，只需在 PHP（或您正在使用的任何服务器端脚本语言的等效函数）中传递每个注释`htmlentities`，这将使[所有 XSS](http://ha.ckers.org/xss.html)尝试无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T10:28:10.983

当您在博客页面中而不是在客户端显示评论时，您应该进行编码，这将有助于避免 XSS 攻击和其他攻击。编码不是关于删除 html、脚本标签，而是关于将尖括号表示为字符实体名称。

例如。

```
you have written a nice article<script></script> 
```

编码后

```
"you have written a nice article&lt;script&gt;&lt;/script&gt;" 
```

# java - Hibernate Criteria 中区分大小写的搜索

> ID：11030921
> 
> 赞同：5
> 
> 时间：2012-06-14T10:10:08.187
> 
> 标签：java, sql-server, hibernate

我正在使用带有 SQL Server 2008 的 Hibernate 3。我想在 Hibernate Criteria 中进行区分大小写的搜索。我无法实现它。我的代码如下：

```
Criteria criteria = session.createCriteria(User.class); /*line 1*/
criteria.add(Restrictions.eq("userName", userName));    /*line 2*/ 
```

我有一个类**User.java**，其中包含一个`String userName`.

数据库条目：

```
id | user_name
--------------
1  | abc
2  | xyz 
```

现在，如果我在第 2 行中传递，`"abc"`那么`userName`它应该从数据库返回第一条记录。但是，如果我像第 2 行一样通过`"Abc"`,等`"ABC"`，则不应获取任何记录。`"aBC"``userName`

我已经访问过这个[链接](https://stackoverflow.com/questions/9066143/case-sensitive-on-restrictions-equals-id-in-hibernate-restrictions)，但它对我没有帮助，因为我不想将排序规则与 hql 或 SQL Server 一起使用。我愿意使用排序规则，`Criteria`但不知道该怎么做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-08T04:40:11.873

```
Criteria criteria = s.createCriteria(User.class);
criteria.add(
    Expression.sql("userName = ? collate Latin1_General_CS_AS_KS_WS", userName, new StringType())
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T10:27:17.997

你不能用休眠。问题出在 MS SQL 中 - 默认情况下它使用不区分大小写的排序规则。可以有两种解决方法：

1 使用休眠选择并对结果进行程序过滤

2 为字段创建表使用区分大小写的排序规则时，您需要搜索：COLLATE SQL_Latin1_General_CP850_BIN2 或为您的服务器指定的其他内容（从 SYSTEMPROPERTY 读取）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T12:40:02.280

你可以试试这个（在 Restrictions API 中使用 ilike）

```
Criteria criteria = s.createCriteria(User.class);   
criteria.add(Restrictions.ilike("userName", userName)); 
```

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-14T11:51:09.600

我添加了同样的问题，并直接在 mariadb 服务器中更改了数据库表中的排序规则类型。

我用“COLLATE latin1_general_cs”创建表字段

因此，对该字段的每次搜索都将区分大小写。

我的表字段看起来像这样。

'case_sensitive_key' varchar(255) CHARACTER SET latin1 COLLATE latin1_general_cs NOT NULL DEFAULT '',

希望它会帮助你们中的一些人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-05T10:19:27.360

如果您使用 sql 路由，那么在 HQL/Criterion 查询中引用别名时会遇到问题。所需要的只是继承 LikeExpression 或其他任何东西并提供您自己的 toSqlString() 方法。在 MySql 中测试。

```
private static class CaseSensitiveLike extends LikeExpression {

    protected CaseSensitiveLike(final String propertyName,
            final String value, final MatchMode mode) {
        super(propertyName, value, mode);
    }

    @Override
    public String toSqlString(final Criteria criteria,
            final CriteriaQuery criteriaQuery) {
        String sql = super.toSqlString(criteria, criteriaQuery);
        return sql + " collate utf8_bin";
    }
} 
```

然后以下调用可以互换：

```
Criterion insensitive = Restrictions.like(myProperty, myValue, MatchMode.ANYWHERE);
Criterion sensitive =  new CaseSensitiveLike(ldProperty, value, MatchMode.ANYWHERE); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-29T09:48:27.397

这可能不适合您，但最好将 lucene/solr 用于此类查询。除了不区分大小写的查询之外，它还会为您处理其他常见场景。

# postgresql - Postgresql 查询这种情况？

> ID：11030926
> 
> 赞同：1
> 
> 时间：2012-06-14T10:10:11.403
> 
> 标签：postgresql, jdbc

我正在使用以下语句

```
select * 
from table 
where column1 in(groups) 
```

其中“groups”是一个大小为 n 的字符串数组。如果我按原样使用它，它不会被执行，所以任何人都可以建议确切的查询来执行这个吗？
**编辑 1**
如果我使用以下代码

```
try{
   System.out.println("before execute query");
  ps1.setArray(1,conn.createArrayOf("text",gs));
  ps1.setArray(2,conn.createArrayOf("text",gs));
  System.out.println("after execute query");
  }
  catch(Exception e)
  {
   System.out.println("hrer----"+e);
  } 
```

首先，它打印“执行查询之前”，然后给出以下异常

```
javax.servlet.ServletException:servlet execution threw an exception 
```

**注意：**它不会在 catch(Exception e) 块中打印“hrer-----”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:12:16.010

这应该有效：

```
PreparedStatement stmt = conn.prepareStatement(
    "SELECT * FROM users WHERE username = any(?)");

String[] usernames = {"admin", "guest"};
stmt.setArray(1, conn.createArrayOf("varchar", usernames)); 
```

归功于鲍里斯在[https://stackoverflow.com/a/10240302上的回答](https://stackoverflow.com/a/10240302)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T10:13:59.533

```
select * from table where column1 in (?, ?) 
```

除了你有`n`问号。

```
StringBuilder q = new StringBuilder("select * from table where column1 in (");
for(int i=0; i<groups.length; i++) {
    q.append("?");
    if(i != groups.length - 1) {
        q.append(",");
    }
}
q.append(")");
PreparedStatement query = con.prepareStatement(q.toString());
for(int i=1; i<=groups.length; i++) {
    query.setString(i, groups[i-1]);
}
ResultSet rs = query.getResultSet(); 
```

# junit - WSO2 JUnit/集成测试

> ID：11030931
> 
> 赞同：2
> 
> 时间：2012-06-14T10:10:30.140
> 
> 标签：junit, wso2

我正在使用新的 WSO2 Developer Studio 构建 Carbon Archive。我正在尝试研究如何在 JUnit 测试中包装组件（序列/代理等）。这些测试需要作为 CI 构建过程 (Jenkins) 的一部分运行，以检测任何修改代码的错误。我已经进行了一些研究，但似乎找不到任何能立即突出如何实现这一目标的东西。我确实找到了这个链接[https://wso2.org/jira/browse/TOOLS-855](https://wso2.org/jira/browse/TOOLS-855) 这表明它尚未实施。任何人都可以确认何时实施，或者目前是否有任何方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:59:27.290

目前没有直接的方法来实现这个场景，这个特性将在未来的版本中得到支持。

我能想到的一种机制是，添加一个单独的测试模块作为构建的一部分，该模块在构建 C-Apps 后执行。

所以这里发生的是，首先 Jenkins 为 C-Apps 生成 CAR 文件。然后 Maven 开始执行 JUnit 测试套件。在执行测试套件之前，您可以配置 maven 将 CAR 文件复制到服务器并启动服务器。然后针对启动的服务器执行测试用例。

这样您就可以在您的 Carbon 服务器中部署新的 CAR 文件，并针对服务器中的新配置执行测试。

谢谢并恭祝安康，

哈沙娜

# javascript - 显示内容 div onclick 的导航项

> ID：11030934
> 
> 赞同：-3
> 
> 时间：2012-06-14T10:10:38.563
> 
> 标签：javascript

问题：初级代码：纯Javascript

我创建了一个网页，我在其中通过 javascript 中的 for 循环呈现主要导航项目。在主导航下方，我创建了一些内容，为每个主要内容 div 分配了不同的 id。

现在我想点击任何导航项目，应该显示相应的内容 div。请找到 jsfiddle 链接：http: [//jsfiddle.net/shabirgilkar/GKLJz/1/](http://jsfiddle.net/shabirgilkar/GKLJz/1/)

我可以知道如何在纯javascript中做到这一点。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:06:07.260

如果导航框中的文本与 div.contents 的 id 匹配，则此代码应该可以工作。希望我有所帮助。

```
old="home";
        function init() {
            document.getElementById('about').style.display = 'none';
            document.getElementById('products').style.display = 'none';
            document.getElementById('services').style.display = 'none';
            document.getElementById('career').style.display = 'none';
            document.getElementById('faq').style.display = 'none';
            document.getElementById('contact').style.display = 'none';
        var pages = document.querySelectorAll('a.box');
        for(i=0;i<pages.length;i++){
          pages[i].onclick=function(e){
              document.getElementById(old).style.display='none';
              old=e.target.innerHTML.toLowerCase();
              document.getElementById(old).style.display='inline-block';
              }
        }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:18:36.717

好的，我更新了你的小提琴：http: [//jsfiddle.net/GKLJz/3/](http://jsfiddle.net/GKLJz/3/)

诀窍是您将 id 分配给数组中的菜单项，然后调用`onClick`根据您单击的内容切换 css 类的函数...

如果你想让它漂亮，使用一些 js 动画效果而不是改变类，就像[这里描述的 jQuery slide](https://stackoverflow.com/questions/4590403/jquery-how-make-div-slide-in-and-out)

顺便说一句，您可以完全省略 init() 函数，只需将其分配`.hidden`给其他 div 作为默认值

# backbone.js - 事件冒泡 JQuery FullCalendar + Backbone

> ID：11030942
> 
> 赞同：0
> 
> 时间：2012-06-14T10:11:12.743
> 
> 标签：backbone.js, event-bubbling

我目前正在使用 Backbone.js 和一些 JQuery 库制作应用程序。今天我使用[JQuery FullCalendar](http://arshaw.com/fullcalendar/)处理日历，但我遇到了一个小问题：

如果我点击一天然后关闭表格然后点击另一天然后我关闭等等......然后我提交表格。我发送了很多点击事件的表单。

我做错了什么？这是我的[代码](https://gist.github.com/0de8fe98ce80bc2d06c2)。

请给我一个解决方法:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:15:04.720

我通过从 JQuery FullCalendar 事件中退出提交事件来修复它。现在我的代码看起来像[这样](https://gist.github.com/0de8fe98ce80bc2d06c2)。

# javascript - 当一系列jquery ajax调用完成时执行一个函数（！）

> ID：11030946
> 
> 赞同：3
> 
> 时间：2012-06-14T10:11:22.013
> 
> 标签：javascript, jquery, ajax

我需要进行一系列 (1-20) ajax 调用，并且在它们全部完成后我需要调用另一个函数。完成我的意思是当 $.ajax({ complete: ...}) 被调用时。

Iv 研究过使用 $.when，但是在 jsfiddle 上摆弄它之后，我遇到了 2 个问题。1\. 在我所有的完整回调之前调用 $.then 和 $.done。2.如果一个单一的ajax调用失败，它根本不会被调用。基本上，似乎 $.done 被称为成功，而不是完成。

我想肯定有一些好的 ajax 管理器/队列可以处理这种事情。或者甚至可能是一些通用的异步任务处理东西.. ;)

小提琴：http: [//jsfiddle.net/zvSgX/2](http://jsfiddle.net/zvSgX/2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T07:18:37.520

如果您不喜欢`$.ajax` 调用解析延迟对象时的默认 jQuery 选项，您可以编写自己的包装器；

```
var my_ajax = function (options) {

    var deferred = $.Deferred();
    var user_complete = options.complete;

    options.complete = function (jqXHR, textStatus) {
        if (user_complete) user_complete(jqXHR, textStatus);
        deferred.resolve();
    };

    $.ajax(options);

    return deferred.promise();
}; 
```

这是[您的 JSFiddle](http://jsfiddle.net/goggin13/zvSgX/5/)的一个分支，它使用您的示例代码对其进行了演示。

由于`my_ajax`从不调用， 如果所有参数都是调用，则`deferred.reject()`链接 a`.fail`将毫无意义。`$.when``$.when``my_ajax`

希望这有帮助！如果我能澄清任何事情，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:39:58.937

您可以使用 Promise 模式来解决此问题您可以使用 when.js 库来解决此类问题 教程和示例可在以下位置获得

[https://github.com/cujojs/when](https://github.com/cujojs/when)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T10:28:23.490

我最近使用的一个解决方案效果不错。通过一个 for 循环，我调用了一个方法，该方法又使用了一个 window.setTimeout 函数，该函数使用正确的数据执行 ajax 调用。我使用了一个 max 和 counter 变量来检查所有 ajax 调用是否正确执行（在成功函数的末尾增加计数器）。另一个 setTimeout 调用的函数检查计数器是否等于最大值。如果不是，则在新的 setTimeout 中再次调用该方法，否则调用最后必须执行的函数。

所以在代码中：

```
var count = 0, max = 0;

function batchCall() {
var a = [{
    method: "DoThis",
    params: { param1: 1, param2: 2 }
}, {
    method: "DoThat",
    params: { param1: 3 }
}]

max = a.length;

for (var i = 0; i < max; i++) {
    callAjax(a[i]);
}

window.setTimeout(checkAllFinished, 100);
}

function callAjax(o) {
    window.setTimeout(function() {
        // do ajax call here 
    }, 0);
}

function checkAllFinished() {
    if (count == max) {
        // do what you need to do when all are called
    }
    else {
        window.setTimeout(checkAllFinished, 100);
    }
} 
```

# .net - .NET Socket.BeginReceive：什么时候触发回调

> ID：11030947
> 
> 赞同：1
> 
> 时间：2012-06-14T10:11:27.130
> 
> 标签：.net, sockets, asynchronous

我一直想知道什么时候触发了 BeginRecieve 调用提供的回调。

*   是在它接收到缓冲区可以容纳的数据时吗？如果是这样 - 如果数据小于缓冲区怎么办）
*   是它收到一个 TCP/IP 数据包的时候吗？
*   是别的吗？

我发现了一个类似的问题，我将重复一遍，因为我不能说得更清楚：

> 现在所有文档都说，一旦“接收到数据”，就会调用 BeginReceive 中指定的回调。但这相当模糊：如果您不知道其他进程如何准确地提供数据，那么那个时刻究竟是什么时候？
> 
> 一个标准是当状态对象中的缓冲区被填充到指定的缓冲区大小时，认为 BeginReceive() 已完成（因此调用了 callbask）。但是，如果“交付”过程以未知数量和不规则模式提供数据怎么办？例如，如果它首先连续发送 100 个字节，然后有 1 毫秒的时间间隔，然后是另外 200 个字节：BeginReceive 是否完成了 100 个字节的传入数据？还是300？

[http://www.pcreview.co.uk/forums/exactly-beginreceive-socket-considered-completed-t2899270.html](http://www.pcreview.co.uk/forums/exactly-beginreceive-socket-considered-completed-t2899270.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:14:17.940

假设您的套接字是 TCP 套接字。然后当任何数据可用时触发回调，但它在回调中传递的最大值与缓冲区大小一样多。无论如何，您都需要一个成帧协议（意味着您需要多次调用 BeginReceive(..) 并检测和组装您发送的帧）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:24:34.960

我的经验是，任何数据都需要立即可用。这意味着读取可以相当小，例如 1400 字节左右，因为它是 MTU 大小的数量级。

读取可以是它的倍数，因为如果数据包无序到达，则在逻辑上第一个到达的那一刻，所有这些都对应用程序可见。在这种情况下，您可以一次读取所有连续排队的数据包。

我猜你的读取大小会在极快的连接上增加，因为你的应用程序可能无法像网络传递单个数据包一样快地出列字节。

旁注：BeginReceive-callback 在 Receive 返回的同时被调用。你不能以这种方式减少延迟。（延迟实际上会增加一点点，因为异步操作可能比阻塞操作具有更高的开销）。

# android - 向服务器发送 gps 数据

> ID：11030948
> 
> 赞同：0
> 
> 时间：2012-06-14T10:11:30.673
> 
> 标签：android, gps

我做了一个GPS程序。我想将当前地址发送到服务器。我被困在字符串部分。你能纠正一下吗？我的代码是：

```
 try {
        Geocoder mGC = new Geocoder(this, Locale.ENGLISH);
        addresses = mGC.getFromLocation(mLocation.getLatitude(),
                mLocation.getLongitude(), 1);
        if (addresses != null) {
            Address currentAddr = addresses.get(0);
            StringBuilder mSB = new StringBuilder("Address:\n");
            for (int i = 0; i < currentAddr.getMaxAddressLineIndex(); i++) {
                mSB.append(currentAddr.getAddressLine(i)).append("\n");
                String a=mSB.toString();
       if(a!=null){

                        HttpClient httpclient = new DefaultHttpClient();
                        HttpPost httppost = new HttpPost(
                                "URL");

                        try {

                            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(
                                    1);
                            nameValuePairs.add(new BasicNameValuePair(
                                    "data",a));
                            httppost.setEntity(new UrlEncodedFormEntity(
                                    nameValuePairs));
                            HttpResponse response = httpclient
                                    .execute(httppost);
                            Toast.makeText(getBaseContext(),
                                    response.toString(),
                                    Toast.LENGTH_LONG).show();
                            continue; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:27:15.500

1-不确定但http连接不应该是循环的

2-您创建了 mSB 但未使用

```
StringBuilder mSB = new StringBuilder("Address:\n");
            for (int i = 0; i < currentAddr.getMaxAddressLineIndex(); i++) {
                mSB.append(currentAddr.getAddressLine(i)).append("\n");
               } <----------------- loop should end here 
                String a= mSB.toString() ;<-------------------------- carete string from mSB 
```

# c# - 无法在数据库 SQL Server 2005 中检索或存储图像

> ID：11030952
> 
> 赞同：0
> 
> 时间：2012-06-14T10:11:50.420
> 
> 标签：c#, asp.net, sql-server-2005

我正在尝试从 ASP.Net 的后端检索图像。使用 SQL SERVER 2005 作为后端。我已经尝试了许多代码，包括在线可用的代码。谁能指导我解决这个问题。

我的代码如下

表设计：-

```
create table Image
 (
ImageId Int identity (1,1),ImageName Varchar(50), Image image   
) 
```

代码：-

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            BindGridData();
        }
    }
    string strcon = "Data Source=SUJITHA\\SQLEXPRESS;Initial Catalog=master;Integrated Security=True";
    protected void Button1_Click(object sender, EventArgs e)
    {
        if (FileUpload1.HasFile)
        {
            //getting length of uploaded file
            int length = FileUpload1.PostedFile.ContentLength;
            //create a byte array to store the binary image data
            byte[] imgbyte = new byte[length];
            //store the currently selected file in memeory
            HttpPostedFile img = FileUpload1.PostedFile;
            //set the binary data
            img.InputStream.Read(imgbyte, 0, length);
            string imagename =TextBox1.Text;
            //use the web.config to store the connection string
            SqlConnection connection = new SqlConnection(strcon);
            connection.Open();
            SqlCommand cmd = new SqlCommand("INSERT INTO Image (ImageName,Image) VALUES (@imagename,@imagedata)", connection);
            cmd.Parameters.Add("@imagename", SqlDbType.VarChar, 50).Value = imagename;
            cmd.Parameters.Add("@imagedata", SqlDbType.Image).Value = imgbyte;
            int count = cmd.ExecuteNonQuery();
            connection.Close();
            if (count == 1)
            {
                BindGridData();
                TextBox1.Text = string.Empty;
                ScriptManager.RegisterStartupScript(this, this.GetType(), "alertmessage", "javascript:alert('" + imagename + " image inserted successfully')", true);
            }
        }
    }

    private void BindGridData()
    {
        SqlConnection connection = new SqlConnection(strcon);
        SqlCommand command = new SqlCommand("SELECT ImageName,Image  from [Image]", connection);
        SqlDataAdapter daimages = new SqlDataAdapter(command);
        DataTable dt = new DataTable();
        daimages.Fill(dt);
       GridView1.DataSource = dt;
       GridView1.DataBind();
       GridView1.Attributes.Add("bordercolor", "black");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:39:22.540

```
SqlConnection con = new SqlConnection(@"Data Source=AMAR-PC\SQLEXPRESS;Initial Catalog=a;User ID=sa;Password=amar");
string path = Server.MapPath("Images/");

if (FileUpload1.HasFile)
{
    byte[] img = new byte[FileUpload1.PostedFile.ContentLength];
    HttpPostedFile myimage = FileUpload1.PostedFile;
    myimage.InputStream.Read(img, 0, FileUpload1.PostedFile.ContentLength);
    SqlCommand cmd = new SqlCommand("insert into images values ('" + TextBox1.Text + "','" + FileUpload1.PostedFile + "')", con);

    con.Open(); 
```

这就是我所做的......而且我也知道还有很多其他上传文件的方法......现在我希望上传的图片应该在图像控制中显示......你现在可以帮助我吗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:16:27.600

```
 */Your code Like this*         

    **//Insert the file into database**

            string strQuery = "insert into tblFiles(Name, ContentType, Data) values (@Name, @ContentType, @Data)";

            SqlCommand cmd = new SqlCommand(strQuery);

            cmd.Parameters.Add("@Name", SqlDbType.VarChar).Value = filename;

            cmd.Parameters.Add("@ContentType", SqlDbType.VarChar).Value = "application/vnd.ms-word";

            cmd.Parameters.Add("@Data", SqlDbType.Binary).Value = bytes;

            InsertUpdateData(cmd);

    **//Select the file from database**
        string strQuery = "select Name, ContentType, Data from tblFiles where id=@id";

        SqlCommand cmd = new SqlCommand(strQuery);

        cmd.Parameters.Add("@id", SqlDbType.Int).Value = 1;

        DataTable dt = GetData(cmd);

        if (dt != null)

        {

            download(dt);

        }

        private void download (DataTable dt)

        {

            Byte[] bytes = (Byte[])dt.Rows[0]["Data"];

            Response.Buffer = true;

            Response.Charset = "";

            Response.Cache.SetCacheability(HttpCacheability.NoCache);

            Response.ContentType = dt.Rows[0]["ContentType"].ToString();

            Response.AddHeader("content-disposition", "attachment;filename="

            + dt.Rows[0]["Name"].ToString());

            Response.BinaryWrite(bytes);

            Response.Flush();

            Response.End();

        }
private DataTable GetData(SqlCommand cmd)
    {
        DataTable dt = new DataTable();
        String strConnString = System.Configuration.ConfigurationManager.ConnectionStrings["conString"].ConnectionString;
        SqlConnection con = new SqlConnection(strConnString);
        SqlDataAdapter sda = new SqlDataAdapter();
        cmd.CommandType = CommandType.Text;
        cmd.Connection = con;
        try
        {
            con.Open();
            sda.SelectCommand = cmd;
            sda.Fill(dt);
            return dt;
        }
        catch 
        {
            return null;
        }
        finally
        {
            con.Close();
            sda.Dispose();
            con.Dispose();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:18:56.507

有几件事让我担心

*   你使用`master`数据库

*   您的表名是`image`SQL Server 中的保留字

如果您需要使用保留名称命名表，则需要用方括号将它们引用：`INSERT INTO [Image] ...`

*   [类似的](https://stackoverflow.com/questions/12853804/image-from-sql-server-table-to-asp-net-image-control/12854143#12854143) [问题](https://stackoverflow.com/questions/21877/dynamically-rendering-aspimage-from-blob-entry-in-asp-net?lq=1)已经在这里被[问过并回答](https://stackoverflow.com/search?q=asp.net%20upload%20image)了很多次

*   你的接受率为0%

# php - 追踪非常慢的脚本

> ID：11030953
> 
> 赞同：-1
> 
> 时间：2012-06-14T10:11:57.317
> 
> 标签：php, performance, caching, facebook-graph-api, photo

我正在使用一种简单的方法在我的网站上显示我的 Facebook 图片。它被称为[Facebook 相册画廊](http://codecanyon.net/item/facebook-album-gallery/400462)，来自[CodeCanyon](http://codecanyon.net/)。

尽管他们声称缓存数据并且[他们的示例](http://codecanyon.net/item/facebook-album-gallery/full_screen_preview/400462)相当快（5 秒），但与他们的示例相比，[我](http://www.dejeuzel.be/new/index.php?page=fotos)的示例非常慢（15-20 秒）。

他们是提高加载速度的一种方法，还是有什么方法可以找出为什么我的页面加载缓慢而示例不是...
我不熟悉缓存，所以如果您需要更多信息，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:34:23.043

Xdebug 有一个[分析器](http://xdebug.org/docs/profiler)。尝试确定瓶颈在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:13:44.683

*   首先从我的连接开始，照片/网站的加载速度非常快。
*   如果 PHP 是问题所在，那么 Elszo 指出的 Xdebug 分析器可以帮助您找到它。怀疑是现在的问题。。
*   [使用Yslow](http://developer.yahoo.com/yslow/) / [Google Page speed](https://developers.google.com/speed/pagespeed/)测试您的网站 并阅读他们的信息。
*   如果 javascript 是问题，请使用 Javascript 分析器，例如 Firebug 或 Google Chrome 的内置分析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T10:24:02.293

*   您显示的照片比示例多得多。
*   您的服务器可能较慢。
*   您的图像可能比示例中使用的图像大。

并确保您正确实现代码并启用缓存，我真的不知道他们的代码是如何工作的，寻找常见问题解答或一些文档。

# php - 如何将命名空间添加到返回 WSDL/SOAP 的所有元素

> ID：11030955
> 
> 赞同：0
> 
> 时间：2012-06-14T10:12:04.120
> 
> 标签：php, zend-framework, soap, wsdl, zend-soap

我对 SOAP 和 WSDL 世界还很陌生。我该怎么做才能确保命名空间始终位于返回元素中？

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://someurl.com">
    <SOAP-ENV:Body>
        <ns1:sayHelloResponse>
            <return>Say Hello Kelvin</return>
        </ns1:sayHelloResponse>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我想要的是：

```
<ns1:sayHelloResponse>
    <ns1:return>Say Hello Kelvin</ns1:return>
</ns1:sayHelloResponse> 
```

我正在使用 PHP 和 Zend 框架。WSDL 由**Zend_Soap_AutoDiscovery**生成。但这不应该是一个障碍，因为无论如何我都会修改它的输出。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:36:59.433

休息了一段时间后，我再次接近这个问题。不过这一次，我偶然发现了这篇不错的[文章](http://www.ibm.com/developerworks/webservices/library/ws-tip-namespace/index.html#efd)（感谢我的前同事迈克）。如果未在模式标记中声明属性**elementFormDefault**，则假定 unqualified 作为其值。通过赋予它“合格”的值，将发生以下情况：

> 但是，如果您将 elementFormDefault="qualified" 添加到文档/文字包装的 WSDL 中的所有模式，那么消息中的所有元素都将使用它们的父名称空间来限定。
> 
> 通常，您不想使用 elementFormDefault="qualified"，因为它会使消息膨胀，但一年或更早之前，不同供应商之间存在互操作性问题，设置此属性有时可以解决问题。

即使我没有使用文档/文字，我也想尝试一下。我将该属性添加到我的模式标记中，并向另一个调用发出请求。这是我得到的回复：

```
 <ns1:getUserResponse>
     <return>
        <ns1:firstname>First</ns1:firstname>
        <ns1:lastname>Last</ns1:lastname>
     </return>
  </ns1:getUserResponse> 
```

如您所见，“return”元素的子元素以命名空间为前缀。在这一点上，我真的很兴奋，因为我终于离我想去的地方更近了。不幸的是，返回元素没有命名空间前缀。我再次尝试了较早的电话（请参阅问题帖子），但响应与以前相同。

我不能在这个问题上花更多时间。毕竟这只是一个原型。这就是为什么我决定挂钩 Zend_Soap_Server 的句柄函数，在输出之前修改响应。

```
class Custom_Soap_Server extends Zend_Soap_Server 
{
    public function __construct($wsdl = null, array $options = null)
    {
        parent::__construct($wsdl, $options);

        // Response of handle will always be returned
        $this->setReturnResponse(true); 
    }

    public function handle($request = null)
    {
        $response = parent::handle($request);
        echo str_replace(array('<return>', '</return>'), array('<ns1:return>', '</ns1:return>'), $response);
        return;
    }
} 
```

老实说，这是一个令人讨厌的黑客行为。我总是假设只有一个命名空间。替换函数可以写得更好。但它毕竟是一个原型，这是我第一个想到让它工作的想法。

在使用新的自定义类而不是 Zend_Soap_Server 之后，所有返回元素都以 ns1 为前缀。

# java - 如何使用 Jena 在本体中仅实例化一个概念？

> ID：11030958
> 
> 赞同：1
> 
> 时间：2012-06-14T10:12:06.053
> 
> 标签：java, jena, ontology

我正在研究如何使用 Jena 自动实例化一个本体。我对实例化从一组数据中发现的概念感兴趣。

我的问题是，有时我只需要实例化本体的一个概念。我很困惑，因为在耶拿，我们需要一个完整的语句来实例化一个本体。

假设我有以下本体。

![在此处输入图像描述](../Images/44612df309749a3a2b9c95f8a3ec99c2.png)

例如，仅在本体上实例化一个概念的陈述是什么`EventType`？

是否有必要`Statement`实例化一个本体？

还是我的本体不够表达？

**版本：我的耶拿代码**

```
public static void manageOntologies() throws FileNotFoundException{     

    int i,inFrame, lineSize;
    int frameNum = 0;

    Individual individu;
    Resource   resource;
    Statement  statement;
    OntModel   domainModel;

    Vector<String> lines = readFile("data/Trace.dat");

    String[] parts = null;
    String   event = null;

    domainModel = ModelFactory.createOntologyModel(ProfileRegistry.OWL_DL_LANG);
    domainModel.read((new FileInputStream(ontopath)), null);

    lineSize = lines.size(); 

    for(i = 0; i < lineSize; i++){
        parts = lines.elementAt(i).split(" ");
        event = parts[parts.length - 1];            
        resource = domainModel.createResource(xmlbase + "frame" + frameNum);//, domainModel.getOntClass(xmlbase + "Event"));
        domainModel.add(resource, RDF.type, domainModel.getOntClass("Event"));

    }

    System.out.println("Numbre de frame = " + frameNum);

    domainModel.write(System.out);
} 
```

这是遇到的问题

```
Exception in thread "main" java.lang.NullPointerException
    at com.hp.hpl.jena.rdf.model.impl.ModelCom.add(ModelCom.java:929)
    at soctrace.Intology.manageOntologies(Intology.java:87) -- domainModel.add(...)
    at soctrace.Intology.main(Intology.java:38) 
```

**第 2 版：我的 OWL/XML 代码**

```
<?xml version="1.0"?>
<!DOCTYPE rdf:RDF [
    <!ENTITY xsd "http://www.w3.org/2001/XMLSchema#" >
    <!ENTITY rdfs "http://www.w3.org/2000/01/rdf-schema#" >
    <!ENTITY rdf "http://www.w3.org/1999/02/22-rdf-syntax-ns#" >
    <!ENTITY tima "http://www.soctrace.org/ontologies/tima.owl#" >
]>

<rdf:RDF xmlns="http://www.w3.org/2002/07/owl#"
     xml:base="http://www.w3.org/2002/07/owl"
     xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
     xmlns:tima="http://www.soctrace.org/ontologies/tima.owl#"
     xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
     xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
    <Ontology rdf:about="http://www.soctrace.org/ontologies/tima.owl">       
</Ontology>

<!-- http://www.soctrace.org/ontologies/tima.owl#Event -->

<Class rdf:about="&tima;Event">
    <rdfs:subClassOf rdf:resource="http://www.w3.org/2002/07/owl#Thing"/>
</Class>

<!-- http://www.soctrace.org/ontologies/tima.owl#EventDuration -->

<Class rdf:about="&tima;EventDuration">
    <rdfs:subClassOf rdf:resource="&tima;ValuePartition"/>
</Class>

<!-- http://www.soctrace.org/ontologies/tima.owl#EventType -->

<Class rdf:about="&tima;EventType">
    <rdfs:subClassOf rdf:resource="&tima;ValuePartition"/>
</Class>

<!-- http://www.soctrace.org/ontologies/tima.owl#ValuePartition -->

    <Class rdf:about="&tima;ValuePartition"/>
</rdf:RDF> 
```

感谢您的回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:02:40.200

您是正确的，您在 RDF 中存储语句，而不是单个术语或概念。然而，一切都有一个类型，即使它只是`rdfs:Resource`（或通常在 owl`owl:Individual`或`owl:Class`）。因此，你们总是通过表单的声明添加一些东西`thing rdf:type Type`，只需选择适当的类型。

在这种情况下想必`EventType`是一个类？在这种情况下：

```
Resource eventTypeResource = model.createResource(eventTypeURI);
model.add(eventTypeResource, RDF.type, OWL.class); 
```

但是，这是您可以使用的常见模式：

```
Resource eventTypeResource = model.createResource(eventTypeURI, OWL.class); 
```

甚至更好地使用 Jena 本体 API：

```
OntClass eventTypeResource = ontModel.createClass(eventTypeURI); 
```

（`OntClass`仍然是一个`Resource`，但添加了一些非常有用的方法）

Jena 很好[地介绍了本体 api](http://jena.apache.org/documentation/ontology/index.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T23:43:21.270

很难准确，因为您没有提供数据或本体（因此我们无法尝试您的代码）。但是，这很可能是问题所在：

```
domainModel.getOntClass("Event") 
```

`"Event"`不是 URI，因此您的本体不太可能具有该名称的事件类（如果有，您应该将其更改为使用完整的 URI！）。

您将需要提供完整的 URI `getOntClass`，否则它将返回`null`，因为它无法识别该类。假设您为 提供合适的值`EVENT_NS`，则：

```
domainModel.getOntClass( EVENT_NS + "Event") 
```

# asp.net-mvc - MVC3 和 MVC4 在同一个解决方案中

> ID：11030962
> 
> 赞同：1
> 
> 时间：2012-06-14T10:12:18.097
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, incompatibility

我参考了旧问题，发现人们在同一台机器上安装 mvc3 和 MVC4 后会遇到很多问题。

我的问题是你最近的经历如何，以及这种混合物对你们有什么作用。

我想创建一个解决方案，其中有四个项目，其中两个是 MVC 项目。一个是 MVC3，另一个是 MVC4。

让我知道你对此的看法。

谢谢， 吉格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:33:15.523

简而言之-不应该有问题。一旦安装了 3 和 4，两者使用不同的项目模板，并且对 MVC 程序集的引用专门针对正确的版本。

除此之外，两个站点的 web.configs 然后确定使用的其他程序集 - 因为它们是由项目模板播种的，所以它们将是正确的。

现在，如果您询问在同一个*项目*中是否有 3 和 4 ，那将是另一回事。但是你不会那样做。

Razor 编辑器确实存在一些已知问题以及类似的问题 - 但这些问题都不是阻碍因素，几乎可以肯定在 v4 RTM 时已经修复。

# c++ - 通过迭代器调用函数？

> ID：11030964
> 
> 赞同：3
> 
> 时间：2012-06-14T10:12:25.913
> 
> 标签：c++, function, iterator

在课堂上，我有一组科目。我想通过这个集合并在每个主题上调用一个将学生添加到该主题的函数。这是我的功能的外观。

```
void Faculty::addStudent(Student* n) {
    this->Students.insert(n);
    set<Subject*>::iterator it;

    for(it = this->Subjects.begin(); it != this->Subjects.end(); it++) {
        (*it)->addStudent(n);
    }
} 
```

问题是我得到一个错误：

```
Unhandled exception at 0x01341c6d in University.exe: 0xC0000005: Access violation reading location 0x1000694d. 
```

我正在使用 Microsoft Visual 2010。

我是 C++ 新手。

我可以提供任何其他必要的信息，只是不知道是哪个。请告诉我是否需要什么。

```
class Student: public Human {
    friend class University;
    friend class Faculty;
    friend class Subject;
public:
    Student(string name, string surname);
    ~Student();
    void Index(int n);
private:
    int index;
}; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T11:30:45.377

在大多数情况下，更好的做法是在两个或多个类之间共享数据时使用[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)而不是原始数据指针。

例子。首先，我们像这样包装指针：

```
typedef shared_ptr<Student> StudentSPtr;
typedef shared_ptr<Subject> SubjectSPtr; 
```

在此之后，我们在整个代码中用这些指针（`StudentSptr n`而不是）替换原始指针。`Student* n`因此，您的函数可能如下所示：

```
void Faculty::addStudent(StudentSptr n){
  this->Students.insert(n);
  vector<SubjectSPtr>::iterator it;  //in your case vector is more proper, I think

  for(it = this->Subjects.begin(); it != this->Subjects.end(); it++){
    (*it)->addStudent(n);
    }
} 
```

# excel - Excel表格丢失路径

> ID：11030966
> 
> 赞同：0
> 
> 时间：2012-06-14T10:12:35.473
> 
> 标签：excel, path

在我的文件服务器中，一些 excel 文件丢失了路径，

例子：

```
=if(A2='\\172.168.1.1\SHARING\LANAIM\Gest_Qual\05__REG\04__Gest\[file1.xlsx]data'!$A2;2;False) 
```

会发生什么并保持这种状态：

```
=if(A2='\\172.168.1.1\04__Gest\[file1.xlsx]data'!$A2;2;False) 
```

我怎么解决这个问题？如果有人可以帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:35:31.457

您可以有一个隐藏（或不隐藏）的工作表，其中包含要链接到的文件的名称。然后使用 VLOOKUP 来处理名称。这样，您可以更改查找表中的文件名，并且链接将根据需要重定向。

有人可能会回答“是”来更新链接，这会导致它们发生变化。

- - 编辑 - -

我刚想到一件事：

1.  将 \172.168.1.1\SHARING\LANAIM\Gest_Qual\05_REG *\04* _Gest\ **file1.xlsx**重命名 为**file2.xlsx**

2.  打开 \172.168.1.1\04__Gest\ **file1.xlsx**（如果不存在则在此处创建）

3.  打开包含链接的文件。

4.  验证对**file1.xslx**的更改是否出现在链接文件中

5.  您现在应该打开 2 个文件（链接文件和虚拟文件**file1.xslx**）。

6.  使用“另存为”将**file1.xlsx**保存到您希望链接指向的位置 (\172.168.1.1\SHARING\LANAIM\Gest_Qual\05_ *REG\04* _Gest\ **file1.xlsx** )。

7.  关闭**file1.xlsx**然后关闭链接的文件。

8.  将 \172.168.1.1\SHARING\LANAIM\Gest_Qual\05_REG *\04* _Gest\ **file2.xlsx**重命名 为原始**file1.xlsl**（在此过程中删除虚拟**file1.xslx**）。

9.  打开您的链接文件，链接现在应该指向正确的 **file1.xslx**。

# mysql - 需要将我的相同应用程序与一个数据库连接

> ID：11030970
> 
> 赞同：0
> 
> 时间：2012-06-14T10:12:55.807
> 
> 标签：mysql, database, amazon-ec2, amazon-rds, amazon-dynamodb

我有 3 台服务器，用于使用 MySql 数据库的 aws ec2 上的三个应用程序，现在每个应用程序都有一个成员，即客户端订阅应用程序，它与在每个实例中创建的 sql 数据库连接，因此每个 amamber 应用程序都有不同的数据库在每台服务器中，现在我们正在使用设备 ROKU，我们需要将 XML 属性从成员传递给它以验证用户，以便他可以观看在线流媒体电视。

现在的目标是我需要创建一个数据库，该数据库将使用 amember 与每台服务器连接，以便每台服务器访问一个数据库。

选项

我的选择是 aws RDS , dynamoDb

现在任何人都可以把我引向正确的方向，为此。

简而言之，需要将我的多个应用程序（同一个应用程序）与一个数据库 HELLLLP 连接起来

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T23:29:35.810

我认为最好坚持使用 MySQL 等关系数据库。
Amazon RDS 是一种托管 MySQL 解决方案，但您不必根据自己的需要使用它。
您可以使用一个 EC2 实例或一个新的 EC2 实例作为中央数据库，并将所有其他服务器连接到它以进行查询。选择 RDS 而不是自己的 SQL 服务器有利有弊。如果您有任何问题，请随时编辑您的问题并添加它们。

根据评论编辑以便将您的应用程序与本地 MySQL 连接。您可能正在使用指向“localhost”或“127.0.0.1”的连接字符串...这是您本地计算机的 IP。您必须将其更改为远程存储数据库的机器的远程 IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T23:09:43.083

如果您需要连接到 mysql 数据库，DynamoDB 不是答案。它不是一个mysql数据库。

RDS是一个mysql数据库。它像任何其他 mysql 数据库一样连接。但是，您没有提到您使用的是什么语言。谷歌搜索“使用 [语言] 连接到 mysql”应该会有所帮助。

# xpath - 如何使用 XPath 选择页面上的所有链接

> ID：11030975
> 
> 赞同：3
> 
> 时间：2012-06-14T10:13:11.263
> 
> 标签：xpath, xpointer

我想编写一个函数来识别特定 HTML 页面上的所有链接。我的想法是使用 XPath，通过使用诸如`//body//a[x]`增加 x 之类的路径来通过页面上的第一个、第二个、第三个链接。

在 Chrome 中尝试此操作时，我加载页面[http://exoplanet.eu/](http://exoplanet.eu/)并在 Chrome 开发人员工具 JS 控制台中调用`$x("//body//a[1]")`. 我希望页面上的第一个链接，但这会返回多个锚元素的列表。调用`$x("//body//a[2]")`返回两个锚元素。调用`$x("//body//a[3]")`什么也不返回。

我希望`[x]`每次增加都会给我页面上的每个唯一链接，但它们似乎是分组的。我怎样才能重写这条路径，以便我一个接一个地选择每个锚标记？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T13:27:06.367

如果您想选择页面上的第一个链接，您`//body//a[1]`应该这样做。`(//body//a)[1]`前一个表达式选择作为其父元素的第一个子元素的任何元素。

但无论如何，这似乎是一件很奇怪的事情。为什么你需要一个一个的链接？只需选择所有这些，作为节点列表或节点集，使用`//body//a`，然后迭代集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:04:17.293

如果使用 path等`//body/descendant::a[1]`，`//body/descendant::a[2]`则可以选择该元素`a`的所有后代元素`body`。或者在您尝试时，您需要大括号，例如`(//body//a)[1]`，`(//body//a)[2]`等等。

但是请注意，在使用 Javascript 的浏览器内部，`document.links`对象模型中有一个集合，因此不需要 XPath 来访问这些链接。

# command-prompt - Windows 相当于 find -cmin +24

> ID：11030979
> 
> 赞同：2
> 
> 时间：2012-06-14T10:13:33.620
> 
> 标签：command-prompt

与以下命令等效的窗口（命令提示符）是什么？

```
find -cmin +24 | xargs rm 
```

此命令查找所有“状态已在 24 分钟前更改”的文件，然后将其删除。

在 php.ini 配置文件中建议作为清除旧会话文件的一种方式，但我的服务器是 windows 系统。

我发现 'dir' 有 /T:A 选项，但这只能让我到目前为止.. 我将如何删除超过 24 分钟的文件？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:59:11.760

虽然这不是命令，但如果您在机器上安装了 Powershell，则以下脚本将起作用。

```
$oldest = [system.datetime]::Now.AddMinutes(-1)
# Directory to clean up
$directory = "C:\Temp\test2"

# This lists the files it would delete
dir $directory | where-object {$_.LastWriteTime -lt $oldest}

# Uncomment this line to delete them
#dir $directory | where-object {$_.LastWriteTime -lt $oldest} | erase 
```

# jquery - jQuery load() 在 IE 上不起作用

> ID：11030983
> 
> 赞同：0
> 
> 时间：2012-06-14T10:13:42.147
> 
> 标签：jquery, internet-explorer

我已经使用 jquery 加载方法进行网站分页这是我的代码

```
function next_page(page)
{   

$('.aloder').fadeIn(100);
$('.maindiv .product-big').fadeOut(400); 
$('.maindiv').load('http://www.tehrantbl.ir/productlist.php?neshani=<?php echo $_REQUEST['neshani']; ?>&page='+page+' .maindiv');

} 
```

出于某种原因，它在 IE 中不起作用，但在 FF 中运行良好，页面在使用表格而不是 div 来显示项目方面具有糟糕的 html 设计，
但我认为这不是问题所在。

这是现场直播

[http://www.tehrantbl.ir/](http://www.tehrantbl.ir/)

要查看问题，请搜索此单词并转到第 2 页

```
همت 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:26:57.530

尝试使用 to encodeURIComponent() 对用户输入进行编码：

```
$('.maindiv')
 .load('http://www.tehrantbl.ir/productlist.php?neshani='+encodeURIComponent('<?php echo $_REQUEST['neshani']; ?>')+'&page='+page+' .maindiv'); 
```

结果将是：
[http](http://www.tehrantbl.ir/productlist.php?neshani=%D9%85%D8%AA&page=2) ://www.tehrantbl.ir/productlist.php?neshani=%D9%85%D8%AA&page=2 （对我有用）

而不是：（ `http://www.tehrantbl.ir/productlist.php?neshani=همت&page=2`没用）

# serialization - 使用 ServiceStack Redis/TextSerializer 序列化父类字段

> ID：11030986
> 
> 赞同：1
> 
> 时间：2012-06-14T10:13:59.993
> 
> 标签：serialization, redis, servicestack

我有两节课

```
public class ClassOne {
  public Guid Id { get; set; }
}

public class ClassTwo : ClassOne {
} 
```

当我将 ClassTwo 的实例发送到 Redis（通过其 TypeSerializer 使用 ServiceStack）时，超类属性（例如 Id）不会序列化，因为它位于父类上。

有没有办法让这个工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:01:56.170

只有抽象类、接口或后期绑定对象发出继承工作所需的必要 __type 信息。因此，如果您必须使用继承（这在 DTO 中是一个坏主意），请将 ClassOne 更改为抽象。

# php - 业务页面的 PHP Facebook API 问题

> ID：11030992
> 
> 赞同：-1
> 
> 时间：2012-06-14T10:14:14.883
> 
> 标签：php, facebook, facebook-graph-api

我有一个 Facebook 应用程序，可以将公司网站上的新闻发布到公司的 Facebook 业务页面。

当我用我的开发者帐户的 id 或我的私人帐户 id 测试它时，它工作得很好。但是，当我使用业务页面的 id 时，慢性病上不会显示任何新闻。

这是我的代码：

```
<?php
require_once 'library/facebook.php';

$facebook = new Facebook(array(
  'appId'  => FACEBOOK_APP_ID,
  'secret' => FACEBOOK_APP_SECRET,
  'cookie' => true,
));

if(is_null($facebook->getUser())){
    header("Location:{$facebook->getLoginUrl(array('req_perms' =>    'user_status,publish_stream,user_photos,offline_access,publish_checkins'))}");
    exit;
}

if($facebookpost){
    try {
      $facebook->setFileUploadSupport("http://" . $_SERVER['SERVER_NAME']);   
      $img = $sitepath.$gfxpath.$filename;

      $arguments = array(
        'source' => '@' . $img,
        'message' => utf8_encode(html_entity_decode(strip_tags($text))),

      );

      $facebook->api("/".FACEBOOK_PROFILE_ID."/photos", 'post', $arguments);

    } catch (FacebookApiException $e) {
      print $e;
    }
}
?> 
```

该应用程序在配置文件设置中正确显示（图片） ![应用权限](../Images/969f0a404d8ce728cc5bbeb6dde9540b.png)

业务页面有一些不同的设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:15:32.813

您需要使用页面的访问令牌将更新发布到您的页面。您可以通过调用以下 API 端点获取页面的访问令牌： `/me/accounts`，然后查找您的页面 ID/名称。

# html - ttf文件未在css3中显示自定义字体

> ID：11030995
> 
> 赞同：1
> 
> 时间：2012-06-14T10:14:21.373
> 
> 标签：html, css

我的 html 页面中有一个文本框。我想在此文本框中输入自定义字体（区域语言）。我添加 TTF 文件并将字体系列更改为此自定义字体。但是当我进入这个文本框时，它只是以英文（默认）显示。

## CSS代码

```
@font-face
{
    font-family:Anjali;
    src: url ('AnjaliOldLipi.ttf');

}
.font-face
{
    display:block;
    font-family:Anjali;
} 
```

## HTML 代码

```
<input type="text" class="font-face"/> 
```

怎么可能输入英文，并且在输入空格时它会转换为自定义字体（区域语言）？我正在尝试实现与[http://www.google.com/transliterate](http://www.google.com/transliterate)中的相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T18:04:07.123

Google Transliterate 使用以下`font-family`声明：

```
html, input, textarea {
font-family: arial,sans-serif;
} 
```

要将字符翻译成指定的字母表，请使用从英语代码点到 Anjali 代码点的 JavaScript [Unicode 映射](https://superuser.com/questions/622944/how-do-i-add-a-unicode-search-to-the-javascript-console-of-a-desktop-mobile-or)，如下所示：

*   [马拉雅拉姆语的 Unicode 实体](http://symbolcodes.tlt.psu.edu/bylanguage/malayalamchart.html)
*   [墨芝-详细规范](https://sites.google.com/site/cibu/mozhi/mozhi2)

# javascript - jQuery 引导选项卡在自定义模式下不起作用（不是引导模式，而是我自己的版本）

> ID：11030996
> 
> 赞同：1
> 
> 时间：2012-06-14T10:14:29.143
> 
> 标签：javascript, jquery, twitter-bootstrap

我在自定义模式（我自己的版本）上使用引导选项卡。第一次打开模态时单击选项卡会打开，但在第二次打开模态时不再起作用。

这是选项卡的 HTML 代码：

```
<div class="tabbable"> <!-- Only required for left/right tabs -->    
  <ul class="nav nav-tabs">
    <li class="active"><a href="#tab1" data-toggle="tab">Section 1</a></li>
    <li><a href="#tab2" data-toggle="tab">Section 2</a></li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="tab1">
      <p>I'm in Section 1.</p>
    </div>
    <div class="tab-pane" id="tab2">
      <p>Howdy, I'm in Section 2.</p>
    </div>
  </div>
</div> 
```

我正在做的是：

我的页面中有一个按钮，单击它时，将打开一个模式（如 Lightbox），其中包含选项卡。

第一次打开时，选项卡工作正常；单击选项卡时，将显示相应的内容。但是当它关​​闭并再次打开时，选项卡*不起作用*；单击选项卡时，不会显示相应的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:31:30.143

在这里，我在单击按钮时向 DOM 动态添加元素，但在单击 CLOSE 时我没有删除元素，因此，在单击关闭后删除元素是解决方案。

# jquery - 查找表中的重复行

> ID：11030997
> 
> 赞同：2
> 
> 时间：2012-06-14T10:14:30.497
> 
> 标签：jquery, html-table

我有一个像这样的表的小应用程序：

```
<tr>
<td><img class='DeleteButton' alt=delete src='images/delete_icon.png'/></td>
<td class='toHide'>some Data</td>
<td class='toHide'>some Data</td>
<td class='toHide'>some Data</td>
<td>some Data</td>
<td class='toHide'>some Data</td>
<td>some Data</td>
<td>some Data</td>
<td class='toHide'>some Data</td>
<td class='toHide'>some Data</td>
<td class='toHide'>some Data</td>
<td class='toHide'>some Data</td>
</tr> 
```

当我在表中添加新数据时，我会创建一个包含“建议”的列表 - 来自其他数据表的数据。

但是如果我有3个表（A，B，C），并且一些数据（D）在A和B中，当我想将D添加到C时，在建议列表中有两次D。

那么如何在表中找到重复的行以及如何以最有效的方式进行呢？

（只有没有类 toHide 的 td-tags 很重要）

到目前为止，我已经使用 jQuery 来获取建议列表

```
 $("all the tables").not(myTable).each(function(){
       $(".suggestData table").append($(this).html());
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T13:01:56.783

阅读这篇文章：[这个](https://stackoverflow.com/questions/8234107/remove-duplicate-trs-through-jquery)

根据帖子，这是一个示例：

```
function removeD(w){
    var seen = {};
    if(w == 'val'){
        $('table tr td').each(function() {
            var txt = $(this).text();
            if (seen[txt])
                $(this).remove();
            else
                seen[txt] = true;
        });
    }else{
        $('table tr td').each(function() {
            var id = $(this).attr('id');
            if (seen[id])
                $(this).remove();
            else
                seen[id] = true;
        });
    }
}

$('#removeID').click(function(){
    removeD('id');
});

$('#removeVal').click(function(){
    removeD('val');
}); 
```

[小提琴](http://jsfiddle.net/XHT7A/)