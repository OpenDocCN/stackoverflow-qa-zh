# StackOverflow 问答 000892000-000892999

# java - Struts 2 是否可以作为 OSGi 包提供？

> ID：892000
> 
> 赞同：4
> 
> 时间：2009-05-21T09:04:41.180
> 
> 标签：java, struts, osgi

我有一个服务器应用程序，它包含多个 OSGi 包，一些是我的，一些是第三方的。其中一个包提供了一个使用 Struts 的 Web 前端。必要的 Struts 库位于 Web 前端包中。

现在我想添加第二个包，它提供另一个 Web 前端，具有不同的依赖项和非常不同的用例。我也想为那个包使用 Struts，但我不想将相同的库放入两个包中。

使用 OSGi，将 Struts 库分离到它们自己的包中并从我的两个包中使用它应该没有问题。但是，我找不到以这种方式打包的 Struts。

一些快速的谷歌搜索和查看[Struts 主页](http://struts.apache.org/2.1.2/)并没有产生任何结果。我可以为 Struts 找到一个插件来在 Struts 中运行 OSGi 容器，但这不是我想要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-25T03:53:08.597

[查看http://repo2.maven.org/maven2/org/apache/struts/struts2-core/2.1.6/](http://repo2.maven.org/maven2/org/apache/struts/struts2-core/2.1.6/)上的当前 struts 包。

例如，如果您下载 struts2-core-2.1.6.jar，将其解压缩并查看 META-INF/MANIFEST.MF，您会发现它确实包含 OSGI 标头（Import-Package、Export-Package、Bundle- *):

```
C:\TMP\META-INF>more MANIFEST.MF
Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Created-By: 1.5.0_10 (Sun Microsystems Inc.)
Built-By: musachyb
Build-Jdk: 1.5.0_10
Bundle-License: http://www.apache.org/licenses/LICENSE-2.0.txt
Import-Package: com.opensymphony.xwork2;version="2.1",com.opensymphon
 <SNIP>
Bnd-LastModified: 1231185746365
Export-Package: org.apache.struts2.views.xslt;uses:="javax.servlet.ht
Bundle-Version: 2.1.6
 <SNIP>
Bundle-Description: Apache Struts 2
Bundle-Name: Struts 2 Core
Bundle-DocURL: http://www.apache.org
Bundle-ManifestVersion: 2
Bundle-Vendor: Apache Software Foundation
Bundle-SymbolicName: org.apache.struts.struts2-core
Tool: Bnd-0.0.255 
```

不知道你如何在 OSGi 应用程序中使用它们——但理论上你至少可以引用它们并做“东西”！:)

# .net - 如何在 Visual Studio 的 ASP.NET MVC 视图旁边添加代码？

> ID：892007
> 
> 赞同：1
> 
> 时间：2009-05-21T09:06:13.860
> 
> 标签：.net, asp.net, asp.net-mvc, visual-studio

我想在我的 ASP.NET MVC 项目中为我的视图使用文件旁边的代码。Visual Studion 2008 中是否有任何简单的方法如何将文件旁边的代码添加到视图中？

*注意：我知道除了文件之外的代码在 ASP.NET MVC 中不是首选，但我的原因是我想将 .aspx 文件提供给设计人员，并且不想让他尽可能少地混淆非 HTML 代码。[可以在这里](https://stackoverflow.com/questions/108320/code-behind-in-asp-net-mvc/527189#527189)找到更多这样做的理由。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T09:17:01.747

将一个类添加到您的视图文件夹并将其命名（例如）Foo 并确保此类继承 ViewPage 或 ViewPage 以防您的视图是强类型的。

然后在 aspx 标记中将 @page 指令的继承自属性更改为 Foo.cs

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="Foo" CodeBehind="~/Views/Home/Foo.cs" %> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T15:46:25.993

更好的选择可能是让您的 ViewPage 继承一个自定义类，该类将您想要的东西公开为受保护的成员或扩展方法或其他任何东西。

也就是说，如今大多数体面的设计师都明白“不要混淆 <% ... %> 顶部的那个部分”。

# vba - 有没有办法从命令行访问 VBA 帮助文件

> ID：892010
> 
> 赞同：0
> 
> 时间：2009-05-21T09:07:44.840
> 
> 标签：vba, chm, scite

我将不得不为我正在处理的项目编写许多 vba 模块，并且更愿意将 SciTe 用于 Office 中的内置编辑器。

SciTe 允许您将按 F1 的效果重定向到以所选文本作为参数的任意命令。无论如何使用此功能来搜索相关的 .chm 文件？

我猜不是，因为 vba 的帮助分布在多个文件中，但我希望有人能证明我错了......

如果有人可以建议一种方法来找出特定库帮助所在的 chm 文件，我特别感兴趣，只需从函数的完全分隔名称中即可。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-07-08T19:09:39.687

另一种方法是使用 HTML 帮助命令行程序 HH.EXE 来显示特定页面，或将特定 CHM 反编译为 HTML 文件。

在命令窗口中转到 Lunatik 提到的文件夹并输入以下命令：

```
hh -decompile html vbaac10.chm
                      ^^
# ac is for Access; use xl for Excel, wd for Word, etc 
```

这将在其下方创建一个“html”文件夹，并在其中填充用于创建 CHM 文件的大部分文件。生成的 HTML 文件可以直接在您的浏览器中打开，尽管它们不会在 CHM 文件中找到它们的相关样式表或脚本。样式表和脚本确实会被提取出来，因此您也可以使用它们。

另请查看 1033 文件夹中的 XML 文件，例如 VB_ACTOC.XML - 这是 Access VBA 帮助的目录。它包含帮助文件中每个项目的标签和 URL 的主题节点：

```
<topic>
  <label>CheckBox Object</label>
  <url>mk:@MSITStore:vbaac10.chm::/html/acobjCheckBox.htm</url>
</topic> 
```

mk:etc... url 可以放在 HH 命令行上以在常规 HTML 帮助窗口中打开该主题。此外，它还显示源 CHM 文件名，以及反编译时文件的相对路径。

```
hh mk:@MSITStore:vbaac10.chm::/html/acobjCheckBox.htm 
```

根据这些文件，您可以编写一个脚本来按关键字查找/grep 文件并在浏览器中显示它们，或者您可以将文件重新设计为某种数据库或其他查找功能，以使用 SciTe 基于命令的帮助系统。

一些提供有关使用 HH.EXE 的更多信息的网站：

*   [HTMLHelp 命令行](http://www.help-info.de/en/Help_Info_HTMLHelp/hh_command.htm)

    使用 HH 命令行和其他站点链接的提示

*   [KeyHH 1.1](http://www.keyworks.net/keyhh.htm)

    HH.EXE 的备用/补充程序，用于处理 CHM 文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T10:34:31.047

主要文件（无论如何对于 Office 2003）都保存在 中`Program Files\OFFICE11\1033`，但访问其中的页面可能有点棘手，因为多年来，由于安全问题，Microsoft 逐渐不得不掌握深入研究 CHM 文件的能力。 [这个页面](http://helpware.net/htmlhelp/linktochm.htm)（[下载](http://www.2shared.com/file/5882936/c265dcde/Linking_to_a_CHM_Window.html)）有一些关于链接到 CHM 中特定页面的可能仍然可能的信息

话虽如此，我不认为这个文件是当今大多数用户显示的默认帮助，但它已经足够接近，大部分时间只缺少 Office 2007 拉皮条。联机帮助似乎设置为默认值，除非您在 Office 安装期间专门禁用它。我认为这些 URL 对 SEO 不太友好，因此无法猜到。我想你可以从骗子那里借用一个偷偷摸摸的把戏，然后制作指向 Google 顶部链接的 URL，即：[Range](http://www.google.co.uk/search?hl=en&q=vba+reference+range+property&btnG=Google+Search&meta=&aq=f&oq=&btnI=745)。

编辑：[谷歌缓存链接？](http://209.85.229.132/search?q=cache:LDLtfm7YWHAJ:helpware.net/htmlhelp/linktochm.htm&cd=1&hl=en&ct=clnk&gl=uk)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T11:00:06.393

深受 Lunatik 回答的启发，并补充说：

```
command.help.$(file.patterns.vb)=http://www.google.co.uk/search?hl=en&newwindow=1&q=site%3Amsdn.microsoft.com+%222003+VBA%22+$(CurrentWord)
command.help.subsystem.$(file.patterns.vb)=2 
```

我的 vb.properties 文件给了我一个合理的解决方法（加载一个谷歌搜索结果页面，搜索条件为：

```
site:msdn.microsoft.com "2003 VBA" $(CurrentWord) 
```

显然不能保证它会把我带到一个有用的页面，但是 VBA 编辑器中的内联帮助在那个页面上也不是那么可靠......

任何更了解 SciTe 的人都可以提出更优雅的解决方案吗？

# iphone - iphone cocoa：如何沿路径拖动图像

> ID：892011
> 
> 赞同：1
> 
> 时间：2009-05-21T09:08:22.390
> 
> 标签：iphone, cocoa-touch, drag-and-drop, core-animation

我试图弄清楚如何在限制图像沿特定路径移动的同时拖动图像。

我尝试了几种技巧，包括沿路径制作动画，但无法让动画播放、暂停和向后播放 - 所以这似乎是不可能的。

有任何想法吗 ？任何人 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T17:38:22.173

您基本上要做的是将手指运动与“翻译”过渡相匹配。

当用户向下触摸并开始移动他们的手指时，您希望使用当前的触摸点值来创建一个平移变换，您可以将其应用于您的`UIImageView`. 以下是您的操作方法：

1.  触地时，保存 imageview 的起始 x,y 位置。

2.  在移动中，计算从旧点到新点的增量。这是您可以钳位值的地方。因此，您可以忽略 y 变化而只使用 x 增量。这意味着图像只会从左向右移动。如果您忽略 x 并使用 y，那么它只会上下移动。

3.  一旦你有了“新的”计算/固定的 x,y 值，使用它来创建一个使用`CGAffineTransformMakeTranslation`(x, y) 的新变换。将此转换分配给 UIImageView。图像移动到那个地方。

4.  手指抬起后，找出原始起始 x、y、点和抬起点的增量，然后调整 ImageView 的边界并将变换重置为`CGAffineTransformIdentity`. 这不会移动对象，但会对其进行设置，以便对 ImageView 的后续访问使用实际位置，而不必继续调整变换。

在网格上移动也很容易。只需将第 2 步中的 x,y 值四舍五入，使其成为网格大小的倍数（即四舍五入到每 10 个像素），然后再将其传递以进行平移变换。

如果您想让它更加平滑，请在您分配过渡的代码周围加上 UIView 动画块。弄乱缓动和时间设置。图像应该从一个触摸点拖到下一个触摸点的后面一点但平滑的“橡皮筋”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-07-18T11:04:20.303

请参阅此示例代码：[Move Me](http://developer.apple.com/library/ios/#samplecode/MoveMe/Introduction/Intro.html)

# eclipse - Eclipse 3.3 Europa JDT TextHover

> ID：892014
> 
> 赞同：1
> 
> 时间：2009-05-21T09:09:54.150
> 
> 标签：eclipse, plugins, eclipse-jdt

我想在 Eclipse 中显示我自己的文本悬停在某些特定的单词上？请给我一些例子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-12T16:47:17.787

最好的办法是先使用 java 编辑器插件和 eclipse。取 eclipse help ->welcome->Samples->Java Editor plugin

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T10:10:51.640

您可以从查看[Koder 示例](http://www.koders.com/?s=ITextHover&p=)开始。

例如这个 [CEditorTextHoverDispatcher](http://www.koders.com/java/fid530207B6126EC285990C517DEBCC5726EDF6B98E.aspx?s=ITextHover#L11)或这个 [UCTextHover](http://www.koders.com/java/fidC066F0660105FB8FF130D12AD233B6B6BD9E44FD.aspx?s=ITextHover#L15)

```
package com.ut2003.uceditor;

import org.eclipse.jface.text.BadLocationException;
import org.eclipse.jface.text.IRegion;
import org.eclipse.jface.text.ITextHover;
import org.eclipse.jface.text.ITextViewer;
import org.eclipse.jface.text.Region;
import org.eclipse.swt.graphics.Point;

public class UCTextHover implements ITextHover
{

    /* (non-Javadoc)
     * Method declared on ITextHover
     */
    public String getHoverInfo(ITextViewer textViewer, IRegion hoverRegion)
    {
        if (hoverRegion != null)
        {
            try
            {
                if (hoverRegion.getLength() > -1)
                    return textViewer.getDocument().get(hoverRegion.getOffset(), hoverRegion.getLength());
            }
            catch (BadLocationException x)
            {
            }
        }
        return "Empty Selection";
    }

    /* (non-Javadoc)
     * Method declared on ITextHover
     */
    public IRegion getHoverRegion(ITextViewer textViewer, int offset)
    {
        Point selection = textViewer.getSelectedRange();
        if (selection.x <= offset && offset < selection.x + selection.y)
            return new Region(selection.x, selection.y);
        return new Region(offset, 0);
    }
} 
```

* * *

你会设置一个 TextHover`SourceViewerConfiguration`这样 [`GasSourceViewerConfiguration`](http://www.koders.com/java/fid441801AFBF843A71F77B2AD1DCF4FE3FEED01A64.aspx?s=ITextHover#L20)或这样[`CalcSourceViewerConfiguration`](http://www.koders.com/java/fid7881D97684780311E7421E2E078A43DF10815CCE.aspx?s=ITextHover#L9)

```
package com.example.calc.ui.editors;

import org.eclipse.jface.text.ITextHover;
import org.eclipse.jface.text.reconciler.IReconciler;
import org.eclipse.jface.text.reconciler.MonoReconciler;
import org.eclipse.jface.text.source.ISourceViewer;
import org.eclipse.jface.text.source.SourceViewerConfiguration;

/**
 * @author cdaly
 *
 * To change the template for this generated type comment go to
 * Window&gt;Preferences&gt;Java&gt;Code Generation&gt;Code and Comments
 */
public class CalcSourceViewerConfiguration extends SourceViewerConfiguration {

    private CalcEditor _editor;

    public CalcSourceViewerConfiguration(CalcEditor editor){
        _editor = editor;
    }

    /* (non-Javadoc)
     * @see org.eclipse.jface.text.source.SourceViewerConfiguration#getReconciler(org.eclipse.jface.text.source.ISourceViewer)
     */
    public IReconciler getReconciler(ISourceViewer sourceViewer) {
        return new MonoReconciler(_editor.getReconcilingStrategy(), false);
    }

    /* (non-Javadoc)
     * @see org.eclipse.jface.text.source.SourceViewerConfiguration#getTextHover(org.eclipse.jface.text.source.ISourceViewer, java.lang.String)
     */
    public ITextHover getTextHover(
        ISourceViewer sourceViewer,
        String contentType) {
        ITextHover hover;
        if (_editor != null && _editor instanceof CalcEditor) {
            hover = new CalcTextHover((CalcEditor)_editor);
        } else {
            hover = null;
        }
        return hover;
    }

} 
```

* * *

除此之外，我没有更多信息：我发现的示例比声明式（即“ `plugin.xml`”）更具程序性，因此您可能想探索更多代码。

另一个很好的例子：[Eclipse：Rich Hovers Redux](http://www.outofwhatbox.com/blog/2009/05/eclipse-rich-hovers-redux/)（虽然它适用于 eclipse3.4，但完整的例子可以给你另一个提示，说明如何将自定义 ITextHover 添加到当前编辑器）

# c# - C# - 确定是否列表 是脏的？

> ID：892020
> 
> 赞同：4
> 
> 时间：2009-05-21T09:11:27.953
> 
> 标签：c#, compact-framework, c#-2.0, hash, generic-list

我正在序列化作为我的数据实体的类列表。我有一个包含列表的 DataProvider。

我总是直接在集合中修改项目。

确定列表中的任何项目是否已更改的最佳方法是什么？我正在使用紧凑型框架。

我目前唯一的想法是在加载列表时创建列表的哈希（如果可能的话）。然后，当我进行保存时，我重新获取列表的哈希值并查看它们是否是不同的值。如果它们不同，我保存然后更新存储的哈希以便稍后进行比较，如果它们相同，那么我不保存。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-21T10:23:08.480

如果您添加到列表中的项目实现了该[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)接口，您可以构建自己的通用列表，该列表在该接口中为您添加到列表中的所有对象挂钩事件，并在从列表中删除项目时取消挂钩事件。

框架中有一个[`BindingList<T>`](http://msdn.microsoft.com/en-us/library/ms132679.aspx)类可以使用，也可以自己编写。

这是一个示例 add 方法，假设类型已声明为`where T: INotifyPropertyChanged`：

```
public void Add(T item)
{
    // null-check omitted for simplicity
    item.PropertyChanged += ItemPropertyChanged;
    _List.Add(item);
} 
```

和`this[index]`索引器属性：

```
public T this[Int32 index]
{
    get { return _List[index]; }
    set {
        T oldItem = _List[index];
        _List[index] = value;
        if (oldItem != value)
        {
            if (oldItem != null)
                oldItem.PropertyChanged -= ItemPropertyChanged;
            if (value != null)
                value.PropertyChanged += ItemPropertyChanged;
        }
    }
} 
```

如果您的项目不支持`INotifyPropertyChanged`，但它们是您的类，我会考虑添加该支持。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-21T09:15:27.197

您可以创建自己的`IList<T>`课程，例如`DirtyList<T>`可以记录列表何时更改。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-21T10:09:06.823

如果您愿意使用反射，则`List<T>`该类有一个名为的私有字段`_version`，每次列表更改时都会递增。它不会告诉您哪些项目已更改，但您可以将其与原始值进行比较`_version`以检测未修改的列表。

作为参考，该字段用于确保在修改列表时枚举数变为无效。`List<T>`因此，除非实际托管代码进行更改，否则您应该能够相当可靠地将其用于您的目的。

要获得你的价值，`_version`你可以使用这样的东西：

```
List<T> myList;
var field = myList.GetType().GetField("_version", BindingFlags.Instance | BindingFlags.NonPublic);
int version = field.GetValue(myList); 
```

不过，一般来说，这不是最好的方法。但是，如果您无法使用`List<T>`其他人创建的产品，那么它可能是您拥有的最佳选择。请注意，对 .NET 框架的更改可能会更改字段的名称（或将其完全删除），并且不能保证在 Mono 等第三方 CLR 实现中存在。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-21T12:00:25.867

这样的事情怎么样？

```
public class ItemChangedArgs<T> : EventArgs
{
    public int Index { get; set; }
    public T Item { get; set; }
}

public class EventList<T> : IList<T>, ICollection<T>, IEnumerable<T>, IEnumerable
{
    private List<T> m_list;
    public event EventHandler<ItemChangedArgs<T>> ItemAdded;
    public event EventHandler<ItemChangedArgs<T>> ItemRemoved;
    public event EventHandler<ItemChangedArgs<T>> ItemChanged;
    public event EventHandler ListCleared;

    public EventList(IEnumerable<T> collection)
    {
        m_list = new List<T>(collection);
    }

    public EventList(int capacity)
    {
        m_list = new List<T>(capacity);
    }

    public EventList()
    {
        m_list = new List<T>();
    }

    public void Add(T item)
    {
        Add(item, true);
    }

    public void Add(T item, Boolean raiseEvent)
    {
        m_list.Add(item);
        if (raiseEvent) RaiseItemAdded(this.Count - 1, item);
    }

    public void AddRange(IEnumerable<T> collection)
    {
        foreach (T t in collection)
        {
            m_list.Add(t);
        }
    }

    private void RaiseItemAdded(int index, T item)
    {
        if (ItemAdded == null) return;

        ItemAdded(this, new ItemChangedArgs<T> { Index = index, Item = item });
    }

    public int IndexOf(T item)
    {
        return m_list.IndexOf(item);
    }

    public void Insert(int index, T item)
    {
        m_list.Insert(index, item);
        RaiseItemAdded(index, item);
    }

    public void RemoveAt(int index)
    {
        T item = m_list[index];
        m_list.RemoveAt(index);
        RaiseItemRemoved(index, item);
    }

    private void RaiseItemRemoved(int index, T item)
    {
        if(ItemRemoved == null) return;
        ItemRemoved(this, new ItemChangedArgs<T> { Index = index, Item = item });
    }

    public T this[int index]
    {
        get { return m_list[index]; }
        set 
        { 
            m_list[index] = value;
            RaiseItemChanged(index, m_list[index]);
        }
    }

    private void RaiseItemChanged(int index, T item)
    {
        if(ItemChanged == null) return;
        ItemChanged(this, new ItemChangedArgs<T> { Index = index, Item = item });
    }

    public void Clear()
    {
        m_list.Clear();
        RaiseListCleared();
    }

    private void RaiseListCleared()
    {
        if(ListCleared == null) return;
        ListCleared(this, null);
    }

    public bool Contains(T item)
    {
        return m_list.Contains(item);
    }

    public void CopyTo(T[] array, int arrayIndex)
    {
        m_list.CopyTo(array, arrayIndex);
    }

    public int Count
    {
        get { return m_list.Count; }
    }

    public bool IsReadOnly
    {
        get { return false; }
    }

    public bool Remove(T item)
    {
        for (int i = 0; i < m_list.Count; i++)
        {
            if(item.Equals(m_list[i]))
            {
                T value = m_list[i];
                m_list.RemoveAt(i);
                RaiseItemRemoved(i, value);
                return true;
            }
        }
        return false;
    }

    public IEnumerator<T> GetEnumerator()
    {
        return m_list.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return m_list.GetEnumerator();
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-21T12:04:55.200

假设列表中包含的每个成员的 GetHashCode() 都已正确实现（因此在元素更改时会发生更改），我会想象以下内容：

```
public class DirtyList<T> : List<T> {
    private IList<int> hashCodes = new List<int> hashCodes();
    public DirtyList() : base() { }
    public DirtyList(IEnumerable<T> items) : base() {
        foreach(T item in items){
            this.Add(item); //Add it to the collection
            hashCodes.Add(item.GetHashCode());
        }
    }

    public override void Add(T item){
        base.Add(item);
        hashCodes.Add(item);
    }
    //Add more logic for the setter and also handle the case where items are removed and indexes change and etc, also what happens in case of null values?

    public bool IsDirty {
       get {
           for(int i = 0; i < Count: i++){
               if(hashCodes[i] != this[i].GetHashCode()){ return true; }
           }
           return false;
       }
    }
} 
```

*请注意，我在 SO 上输入了这个并且没有编译器，所以上述代码绝不保证工作，但希望它会显示这个想法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-21T09:31:27.490

你可以实现你自己的列表来维护2个内部列表......以及实例化版本和跟踪版本......例如

```
//Rough Psuedo Code
public class TrackedList<T> : List<T>
{
    public bool StartTracking {get; set; }
    private List<T> InitialList { get; set; }

    CTOR
    {
        //Instantiate Both Lists...
    }

    ADD(item)
    {
        if(!StartTracking)
        {
            Base.Add(item);
            InitialList.Add(item);
        }
        else
        {
            Base.Add(item);
        }
    }

    public bool IsDirty
    {
       get
       {
           Check if theres any differences between initial list and self.
       }
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-21T11:56:18.557

确保 T 是具有脏标志的对象的后代，并让 IList 实现检查遍历列表的脏标志的对象。

# vb.net - List(Of T).ForEach 中 Visual Basic 中的 Action(Of T)

> ID：892021
> 
> 赞同：10
> 
> 时间：2009-05-21T09:12:13.957
> 
> 标签：vb.net, generics, foreach

我已经搜索了有关如何使用此功能的文档。*虽然我可以*编写的循环很简单而且不需要时间，但我真的很想学习如何使用它。

基本上我有一个类，比如说，`Widget`一个`Save()`不返回任何内容的子类。所以：

```
Dim w as New Widget()
w.Save() 
```

基本上保存了小部件。现在假设我有一个通用集合`List(Of Widget)`名称`widgetList(Of Widget)`，我想`Save()`在该列表中的每个项目上运行一个。它说我可以做一个

```
widgetList.ForEach([enter Action(Of T) here]) 
```

....但是在 F 中这是如何工作的？？？intrablags 上的任何地方都没有文档。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2010-04-07T22:22:33.740

好吧，我现在真的已经过时了...... :-) 但在 VB 中它是：

```
widgetList.ForEach(Sub(w) w.Save()) 
```

或者，更复杂：

```
widgetList.ForEach(New Action(Of Widged)(Sub(w As Widged) w.Save())) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-05-21T09:29:32.440

如果您使用的是 VB9 (VS2008)，我*认为*您无法轻松使用匿名函数——据我所知，VB9 中的匿名函数*必须*是真实函数（即它们必须返回一个value)`Action<T>`而不返回任何东西。C# 2 的匿名方法和 C# 3 的 lambda 表达式更通用，这就是为什么您会看到大量使用`List<T>.ForEach`C# 的示例而很少使用 VB 的原因:(

您可能会编写一个*接受*a并返回a 的`MakeAction`包装器，但我怀疑对 VB9 匿名函数的其他限制会使这不切实际。*`Function<T,TResult>``Action<T>`*

 *好消息是[VB10有更多的匿名功能支持](http://www.thinqlinq.com/default/Delegates-and-Lambdas-in-VB-10.aspx)。（C#4 和 VB10 正在获得彼此的功能 - 我相信 MS 从现在开始尝试在语言上进行平等，比以前更大。）

在那之前，要使用`List<T>.ForEach`你需要编写一个适当的`Sub`并使用`AddressOf`它来创建一个委托。这是一个小例子：

```
Imports System
Imports System.Collections.Generic

Public Class Test

    Shared Sub Main()
        Dim names as New List(Of String)
        names.Add("Jon")
        names.Add("Holly")
        names.ForEach(AddressOf PrintMe)

    End Sub

    Shared Sub PrintMe(ByVal text as String)
        Console.WriteLine(text)
    End Sub

End Class 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-08-15T08:24:54.823

```
new Action(Of T)(AddressOf Widget.Save) 
```

如果 Widget 有一个名为`Save`.

当我尝试时，所有其他评论都是错误的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T09:29:38.103

假设 VB 不支持 lambda 表达式，您可以使用以下语法在 VB 中创建 Action(of T) 委托的实例：

```
new Action(Of T)(AddressOf Widget.Save) 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-05-21T09:18:12.197

尽管我没有跟上 VB.Net 的速度，但下面的内容应该可以工作，因此您可能需要相应地进行调整。

```
widgetList.ForEach(w => w.Save()) 
```

# c# - C# 隐式转换和 == 运算符

> ID：892024
> 
> 赞同：8
> 
> 时间：2009-05-21T09:13:04.737
> 
> 标签：c#, operators, type-conversion, equals-operator

一些上下文代码：

```
class a
{

}

class b
{
    public a a{get;set;}
    public static implicit operator a(b b)
    {
        return b.a;
    }
}

  a a=null;
  b b=null;
  a = b;

  //compiler: cannot apply operator '==' to operands of type tralala...
  bool c = a == b; 
```

是否可以在不同类型的实例上使用 == 运算符，其中一个可以隐式转换为另一个？我错过了什么？

**编辑：**
如果类型必须是相同的调用 ==，那么为什么

```
int a=1;
double b=1;
bool c=a==b; 
```

作品？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-21T09:26:57.593

`implicit`运算符仅适用于赋值。

您想重载等式 ( `==`) 运算符，如下所示：

```
class a
{
    public static bool operator ==(a x, b y)
    {
        return x == y.a;
    }

    public static bool operator !=(a x, b y)
    {
        return !(x == y);
    }
}

class b
{
    public a a{get;set;}
    public static implicit operator a(b b)
    {
        return b.a;
    }
} 
```

然后，这应该允许您比较两个类型的对象，`a`并`b`按照您的帖子中的建议。

```
var x = new a();
var y = new b();
bool c = (x == y); // compiles 
```

**笔记：**

正如编译器警告的那样，我建议简单地覆盖`GetHashCode`and`Equals`方法，但是当您似乎想要抑制它们时，您可以按如下方式进行操作。

将您的类声明更改`a`为：

```
#pragma warning disable 0660, 0661
class a
#pragma warning restore 0660, 0661
{
    // ...
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-21T15:37:42.760

> 是否可以在不同类型的实例上使用 == 运算符，其中一个可以隐式转换为另一个？

是的。

> 我错过了什么？

这是规范的相关部分。您错过了突出显示的单词。

> 预定义的引用类型相等运算符要求 [that] 两个操作数都是引用类型值或文字 null。此外， 存在从任一操作数类型到另一操作数类型的**标准隐式转换。**

根据定义，用户定义的转换不是标准转换。这些是引用类型。因此，预定义的引用类型相等运算符不是候选对象。

> 如果类型必须是相同的调用 ==，那么为什么 [double == int] 有效？

您认为类型必须相同的假设是不正确的。有一个从 int 到 double 的标准隐式转换，并且有一个相等运算符需要两个双精度，所以这是可行的。

我想你也错过了这一点：

> 使用预定义的引用类型相等运算符比较在编译时已知不同的两个引用是编译时错误。例如，如果操作数的编译时类型是两个类类型 A 和 B，并且如果 A 和 B 都不是从另一个派生的，那么这两个操作数就不可能引用同一个对象。因此，该操作被认为是编译时错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T09:27:06.017

我想你需要为你感兴趣的类型实际覆盖 == 运算符。即使类型是隐式可转换的，编译/运行时是否仍然会抱怨是你必须试验的东西。

```
public static bool operator ==(a a, b b)
    {
        //Need this check or we can't do obj == null in our Equals implementation
        if (((Object)a) == null)
        {
            return false;
        }
        else
        {
            return a.Equals(b);
        }
    } 
```

或者，只需使用 ole6ka 建议的 Equals 实现，并确保该实现执行您需要的类型转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T09:24:05.837

[http://msdn.microsoft.com/en-us/library/8edha89s.aspx](http://msdn.microsoft.com/en-us/library/8edha89s.aspx)

> 在每种情况下，一个参数必须与声明运算符 (...) 的类或结构的类型相同

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-21T09:23:00.737

用这个

```
 bool c = a.Equals(b); 
```

# c# - 在返回将在其他地方使用的对象之前确保设置所有必要的类属性的最佳方法是什么

> ID：892029
> 
> 赞同：1
> 
> 时间：2009-05-21T09:15:45.760
> 
> 标签：c#

我有一个类，它需要在被其他对象使用之前调用一个特定的方法，这个方法实现了所有必需的逻辑并将类的属性设置为它们各自的值。如何确保在返回对象以供其他对象使用之前调用此类的方法？我听说在构造函数中实现逻辑是个坏主意，所以我不能在构造函数中调用这个方法。这种实现的代码示例如下：

```
SomeClass myClass = new SomeClass("someName");
//Class must call this method if object is to be of any use
myClass.ConvertNameToFunnyCharacters();
return myClass; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-21T09:21:01.397

如果正确构造对象至关重要，那么将逻辑放在构造函数中并不是一个坏主意。您应该考虑将逻辑放在另一种方法中 -`public`如果您希望能够将对象“重置”回其默认状态，则应该采用这种方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-21T09:20:16.250

如果在使用该类之前需要调用该方法，那么在我看来这很像构造函数应该做的事情。而构造函数也只是一种特殊的方法，那么“在构造函数中实现逻辑”应该有什么问题呢？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-21T09:30:26.900

根据您的需要将您的构造函数设置为内部的、受保护的或私有的，并实现工厂模式。当您需要一些对象初始化以避免高对象依赖性时，这是如何进行的。

[http://msdn.microsoft.com/en-us/library/ms954600.aspx](http://msdn.microsoft.com/en-us/library/ms954600.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-21T09:18:35.147

不建议在 c'tor 中有很多逻辑的原因是，虽然在 c'tor 中，对象仍然无效。如果这就是您的“其他”方法所做的，那么作为 c'tor 的一部分就可以了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-21T09:22:49.053

根据我的说法，我会在构造函数中调用它，否则你会给类用户带来负担，在使用它之前调用这个方法

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-21T09:36:17.030

在构造函数中放置大量逻辑可能会导致一些问题：

*   If the constructor calls methods of the object, those methods run in a partially constructed object. This can really bite you when you override the method in subclasses: in Java and C# the subclass' implementation will run before the subclass' constructor has initialised the extended state of the object and so fail with null pointer exceptions. C++ works more "correctly" but can cause different confusing effects.
*   It makes unit testing with mock objects a bit more complicated if the constructor calls back out to objects passes as parameters.

So, I prefer to keep constructors as simple as possible: just assign parameters to instance variables. If I need to perform more complex logic to initialise an object I write a static factory function that calculates the constructor parameter values and passes them to a simple constructor.

# websphere - 了解 Websphere 6 的最低要求

> ID：892033
> 
> 赞同：-1
> 
> 时间：2009-05-21T09:16:34.807
> 
> 标签：websphere

我失业了，明天我有一个工作面试，需要有关 Websphere 5.x 和 Websphere 6.x 的知识。我只使用 Tomcat 和 Glassfish。

了解 Websphere 的最低限度是什么？他们会问我是否曾经使用过它，我会说没有，但我想有几句话要说，以减少不知道它的影响。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T09:47:25.197

您需要知道的足够多的知识才能将其撕掉并替换它:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T09:54:08.803

除了显而易见的（它的文件结构、部署应用程序等）之外，您还可以通过提及[6 版合并的一些功能](http://www.ibm.com/developerworks/websphere/library/techarticles/0606_petersonr/0606_petersonr.html)来让面试官感到惊讶。我发现阅读变更日志以了解软件版本的功能非常有用

# javascript - 谷歌分析如何收集数据？

> ID：892049
> 
> 赞同：25
> 
> 时间：2009-05-21T09:20:45.343
> 
> 标签：javascript, google-analytics, tracking

是的，我知道您必须将谷歌分析 javascript 嵌入到您的页面中。

但是收集到的信息是如何提交到谷歌分析服务器的呢？

例如，由于浏览器的安全设置（跨域脚本），无法进行 AJAX 请求。

也许有人已经看过令人困惑的 google javascript 代码？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-05-21T09:26:20.373

当 html 页面请求 ga.js 文件时，http 协议会发送大量数据，包括 IP、引用、浏览器、语言、系统。没有必要使用ajax。

但是还是有些数据不能这样实现，所以 GA 脚本把图片放到了 html 中加上了额外的参数，看看这个例子：

`[http://www.google-analytics.com/__utm.gif?utmwv=4.3&utmn=1464271798&utmhn=www.example.com&utmcs=UTF-8&utmsr=1920x1200&utmsc=32-bit&utmul=en-us&utmje=1&utmfl=10.0%20r22&utmdt=Page](http://www.google-analytics.com/__utm.gif?utmwv=4.3&utmn=1464271798&utmhn=www.example.com&utmcs=UTF-8&utmsr=1920x1200&utmsc=32-bit&utmul=en-us&utmje=1&utmfl=10.0%20r22&utmdt=Page) title&utmhid=1805038256&utmr=0&utmp=/&utmac=cookie value`

这是GA 放入 HTML的空白图像，有时称为[跟踪像素。](http://en.wikipedia.org/wiki/Web_bug)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-11-17T16:38:25.947

这里有一些很好的答案，它们各自倾向于使用一种或另一种方法来发送数据。不过，我觉得上述答案中缺少有价值的参考，并且涵盖了所有方法。

谷歌提到了发送数据的不同方法“传输机制”

在 Analytics.js 文档中，Google 提到了它用于发送数据的[三种主要传输机制。](https://developers.google.com/analytics/devguides/collection/analyticsjs/field-reference#transport)

> 这指定了发送命中的传输机制。选项是“信标”、“xhr”或“图像”。默认情况下，analytics.js 将尝试根据命中大小和浏览器功能找出最佳方法。如果您指定 'beacon' 并且用户的浏览器不支持该`navigator.sendBeacon`方法，它将根据命中大小回退到 'image' 或 'xhr'。

1.  将一些数据发送到 Google（如 Thinker 的回答中所示）的一种常见和标准方法是将数据作为 GET 参数添加到跟踪像素。这将属于谷歌称之为“图像”传输的类别。
2.  其次，如果客户端的浏览器支持，Google 可以使用“信标”传输方法。这通常是我的首选方法，因为它会尝试立即发送信息。或者用谷歌的话来说：

> 如果您希望在用户导航离开您的站点之前跟踪事件，而不会延迟导航，这非常有用。

3.  “xhr”传输机制是 Google Analytics 可以将数据发送回国内的第三种方式，使用的特定传输机制可能取决于诸如命中大小等因素。（我不确定 GA 决定使用的最佳传输机制还有哪些其他因素）

如果您想知道如何强制 GA 使用特定的传输机制，这里有一个示例代码片段，它强制将此事件命中作为“信标”发送：

```
ga('send', 'event', 'click', 'download-me', {transport: 'beacon'}); 
```

希望这可以帮助。

* * *

另外，如果您对这个主题感到好奇，因为您也想捕获这些数据并将其发送到您自己的站点，我建议您创建一个到 Google Analytics 发送的绑定，它允许您获取有效负载并将其 AJAX 发送到您自己的站点服务器。

```
 ga(function(tracker) {

       // Grab a reference to the default sendHitTask function.
       originalSendHitTask = tracker.get('sendHitTask');

       // Modifies sendHitTask to send a copy of the request to a local server after
       // sending the normal request to www.google-analytics.com/collect.
       tracker.set('sendHitTask', function(model) {
         var payload = model.get('hitPayload');
         originalSendHitTask(model);

         var xhr = new XMLHttpRequest();
         xhr.open('POST', '/index.php?task=mycollect', true);
         xhr.send(payload);
       });
    }); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-21T09:24:47.397

在不查看代码的情况下，我假设他们的数据是从他们在异步请求中收到的 HTTP 标头中收集的。

请记住，大多数浏览器都会发送诸如操作系统、平台、浏览器、版本、区域设置等数据......而且它们确实有 IP，因此它们可以猜测您的位置。我假设他们有某种聪明的算法来决定你是否是唯一的访问者。

网站上的时间可能是通过使用`onUnload()`事件来计算的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2011-04-07T05:53:17.737

谷歌分析网页提供了谷歌分析服务器如何收集数据的详细信息。[http://code.google.com/apis/analytics/docs/concepts/gaConceptsOverview.html](http://code.google.com/apis/analytics/docs/concepts/gaConceptsOverview.html)

所有 Google Analytics 数据都被收集并打包到请求 URL 的查询字符串中，然后发送到 Google Analytics 服务器。http 请求由 Google Analytics JS 激活的 gif 图像（http://www.google-analytics.com/__utm.gif）发出。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-21T09:24:18.753

使用 Firebug 的 Net 选项卡之类的东西很容易分辨。

不需要 Ajax - 因为没有从 Google 获取数据。他们只是将信息编码为查询字符串，然后使用它加载透明 gif。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-03-21T09:39:11.273

为了扩展其他非常好的答案，谷歌确实提供了一个 API 来跟踪网站作者自己在他们的脚本中向谷歌报告的异步“虚拟浏览量”。

```
_gaq.push(['_trackPageview', 'my_unique_action']); 
```

他们提供了它，因此可以跟踪不属于常规页面视图和 http 请求的操作。

异步跟踪指南： [http ://code.google.com/apis/analytics/docs/tracking/asyncUsageGuide.html#Syntax](http://code.google.com/apis/analytics/docs/tracking/asyncUsageGuide.html#Syntax)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-21T09:23:24.513

使用*httpfox*或*firebug* Firefox 扩展来确定浏览器发送的 HTTP 请求和接收到的响应。

我不知道 Google Analytics 是如何工作的，但一种可能性是让浏览器下载图像：（`<img src="http://my-analytics.com" width="1" height="1">`带有单个透明像素），并`Referer:`在服务器端记录所有 HTTP 请求标头（例如 ）。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-05-21T09:49:28.330

//编辑：见底部的评论

*好的，在与我的朋友讨论时找到答案 :-) 谷歌分析的信息通过三种方式提交：

1.  项目清单
2.  可以使用 http 标头的所有信息来分析 HTTP 请求。
3.  cookie 被谷歌分析服务器识别。
4.  **ajax 调用在嵌入的 javascript 中完成，以提交显示分辨率、flash 播放器版本等信息。** **这些信息不通过 h​​ttp 标头传输。** *这是可能的，因为 ajax 调用是在嵌入的 javascript 的上下文中完成的，所以它没有跨域脚本。这是我的推理错误。**

# c++ - 可选功能的设计模式？

> ID：892057
> 
> 赞同：0
> 
> 时间：2009-05-21T09:23:25.260
> 
> 标签：c++, design-patterns, inheritance, derived-class

我有一个派生子类继承自的基本类，它具有在所有派生类中应该相同的基本功能：

```
class Basic {
public:
    Run() {
        int input = something->getsomething();
        switch(input)
        {
            /* Basic functionality */
            case 1:
                doA();
                break;
            case 2:
                doB();
                break;
            case 5:
                Foo();
                break;
        }
    }
}; 
```

现在，基于派生类，我想向 switch 中“添加”更多 case 语句。我在这里有什么选择？我可以声明虚函数，并且只在要使用它们的派生类中定义它们：

```
class Basic {
protected:
    virtual void DoSomethingElse();
public:
    Run() {
        int input = something->getsomething();
        switch(input)
        {
            /* Basic functionality */
            ...

            case 6:
                DoSomethingElse();
        }
    }
};

class Derived : public Basic {
protected:
    void DoSomethingElse() { ... }
} 
```

但这意味着当更改任何派生类中的函数时，我必须编辑我的基类以反映这些更改。

是否有专门针对此类问题的设计模式？我购买了许多关于设计模式的书籍，但我正在“按需”研究它们，所以我不知道是否有我正在寻找的这种模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-21T09:29:12.863

我认为您需要的模式是**责任链**或**策略**与动态调用表相结合......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-21T09:35:17.187

您可能会发现阅读[责任链模式](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)并以这种方式重新考虑您的解决方案很有用。

您也可以将“doRun”声明为受保护方法并在基本默认情况下调用它。

```
default:
   doRun(input); 
```

并在派生类中定义 doRun 。

这就是所谓的[模板方法模式](http://en.wikipedia.org/wiki/Template_method_pattern)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T09:28:47.590

处理这个问题的正常方法是使用工厂。概述：

*   创建提供功能的相关类的层次结构。
*   创建一个工厂类，该类接受输入并根据输入创建正确的类的实例

现在获得额外的奖励积分：

*   创建一个在工厂中重新注册类的方案 - 您需要指定输入和类的类型来处理它

现在，当需要新输入时，您只需派生一个新类并将其注册到工厂。不再需要 switch 语句。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-21T09:29:38.900

> 但这意味着当更改任何派生类中的函数时，我必须编辑我的基类以反映这些更改。

为什么这是真的？

我注意到您的评论 - 如果您选择这种方法，您将遇到这些问题。其他人已经发布了建议其他解决方案的答案 - 我会检查这些以查看它们是否对您有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-21T09:38:12.127

如果您的选择器值只是小整数，我会用查找表替换 case 语句。（案例中的每个动作都需要编码为一个函数，因此您可以将函数指针放在表中）。然后继承的类可以只向表中添加条目。（我猜该表必须是一个实例属性，它不能是静态的）。

科林

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-21T09:48:11.827

А 简单的解决方案：

```
class Basic {
  public:
    void Run() {
      const int input = ...
      if (!(BaseProcess(input) || Process(input))) ...
    }

    vitual bool Process(int input) { return false; }

    bool BaseProcess(int input) {
      switch(input) {
    ...
        default: return false;
      }
      return true;
    }
... 
```

...然后在子类的 Process() 中实现其他案例。如果您需要支持超过 2 个级别（即添加更多案例的子类），那么您将需要一个动态调度表。

# sql-server - 我们可以在安装vs2005之前安装sqlserver2005吗？

> ID：892072
> 
> 赞同：0
> 
> 时间：2009-05-21T09:28:15.657
> 
> 标签：sql-server, visual-studio

我想在我的 server2003 机器上安装 sqlserver2005。听说要在visualstudio2005之前安装sqlserver2005。是对还是错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T09:29:49.087

*我们可以在安装vs2005之前安装sqlserver2005吗？*- 是的

*我听说sqlserver2005应该在visualstudio2005之前安装。是对还是错？*- 不一定，但这取决于您使用的 SQL 的哪些部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T09:39:04.170

[这个链接](http://geekswithblogs.net/ingrid/archive/2006/02/03/68116.aspx)应该会给你答案

简而言之

> 问题是，如果您先安装 Visual Studio，如果尚未安装本地 SQL 实例，则会安装 SQL Server Express。当您稍后尝试安装 SQL Server 2005 工作站工具时，它将失败，但您并没有明显地意识到这一事实。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T09:37:48.803

它们彼此独立。首先安装哪个不应该有所不同。

# c# - 强制我的应用使用特定版本的 dll

> ID：892073
> 
> 赞同：3
> 
> 时间：2009-05-21T09:28:18.637
> 
> 标签：c#, .net, dll

我的应用程序需要使用经过政府机构独立验证的 dll（也是我编写的）。由于需要重新验证，我们计划很少修改 dll。我想防止我的应用程序无意中修改了这个 dll。有没有办法为 dll 创建哈希码并将我的应用程序设置为仅使用此特定版本。

这样，如果有人修改了 dll 的一些代码，当我们构建和运行应用程序时，应用程序将无法加载 dll（因为它已更改）。

有什么想法/建议吗？

干杯，

詹姆士

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-21T09:33:57.313

使用强名称是其中的一部分，可以防止其他人篡改您的程序集，但不会阻止您意外地这样做然后辞职。

我们使用一个独立的进程来启动我们的主应用程序。在启动主应用程序之前，启动应用程序 MD5 的所有程序集，并将它们与它希望看到的列表进行比较，如果发生了变化，MD5 会失败并且不会加载主应用程序。

如果您真的想要编译时检查，您可能会编写一个预构建步骤，该步骤进行相同的 MD5 比较，如果发生更改则构建失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T09:32:36.367

我知道，如果您单击项目中的 dll 引用，您可以在其属性中选择“特定版本”并将其设置为 True，这不会满足您的需求吗？

菲尔

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T14:03:41.513

正如 Colin 提到的，强命名您的程序集将是关键，因为这包括版本控制和对程序集进行签名。以下几篇博客文章可以帮助您进行强大的命名和版本控制：

[http://www.csharp411.com/net-assembly-faq-part-3-strong-names-and-signing/](http://www.csharp411.com/net-assembly-faq-part-3-strong-names-and-signing/)（可能也值得阅读下一部分关于全局程序集缓存的内容）

[http://philippetruche.wordpress.com/2008/08/12/net-assembly-versioning-lifecycle/](http://philippetruche.wordpress.com/2008/08/12/net-assembly-versioning-lifecycle/)

# c# - 在 C# 中创建时间戳的函数

> ID：892074
> 
> 赞同：102
> 
> 时间：2009-05-21T09:28:34.457
> 
> 标签：c#, timestamp, compact-framework, database-agnostic, time-precision

我想知道，有没有办法在 c# 中从日期时间创建时间戳？我需要一个毫秒精度值，它也适用于 Compact Framework（说因为 DateTime.ToBinary() 在 CF 中不存在）。

我的问题是我想以与数据库无关的方式存储这个值，这样我可以稍后对其进行排序并找出哪个值更大等等。

* * *

## 回答 #1

> 赞同：207
> 
> 时间：2009-05-21T09:37:27.650

我总是使用类似以下的东西：

```
public static String GetTimestamp(this DateTime value)
{
    return value.ToString("yyyyMMddHHmmssfff");
} 
```

这将为您提供一个类似 200905211035131468 的字符串，因为该字符串从时间戳的最高位到最低位 如果您在数据库中粘贴值，则可以使用 SQL 查询中的简单字符串排序来按日期排序

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2010-06-18T03:08:56.520

我相信您可以使用以下方法创建精确到一秒的 unix 样式日期戳

```
//Find unix timestamp (seconds since 01/01/1970)
long ticks = DateTime.UtcNow.Ticks - DateTime.Parse("01/01/1970 00:00:00").Ticks;
ticks /= 10000000; //Convert windows ticks to seconds
timestamp = ticks.ToString(); 
```

调整分母可以让您选择您的精度水平

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2009-05-21T09:32:13.247

您可以使用 DateTime.Ticks 属性，它是一个长期且通用的可存储属性，并且始终在紧凑框架上增加和使用。只需确保在 9999 年 12 月 31 日之后不使用您的代码；）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-06-30T18:31:46.357

你也可以使用

```
Stopwatch.GetTimestamp().ToString(); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-03-02T07:31:09.823

当您需要以秒为单位的时间戳时，您可以使用以下内容：

```
var timestamp = (int)(DateTime.Now.ToUniversalTime() - new DateTime(1970, 1, 1)).TotalSeconds; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-16T23:23:01.367

如果您想要与实际实时相对应的时间戳但也希望它们是唯一的（对于给定的应用程序实例），您可以使用以下代码：

```
public class HiResDateTime
{
   private static long lastTimeStamp = DateTime.UtcNow.Ticks;
   public static long UtcNowTicks
   {
       get
       {
           long orig, newval;
           do
           {
               orig = lastTimeStamp;
               long now = DateTime.UtcNow.Ticks;
               newval = Math.Max(now, orig + 1);
           } while (Interlocked.CompareExchange
                        (ref lastTimeStamp, newval, orig) != orig);

           return newval;
       }
   }
} 
```

# mysql - 没有网络服务器的 mysql 访问（例如 Apache）

> ID：892081
> 
> 赞同：1
> 
> 时间：2009-05-21T09:29:09.493
> 
> 标签：mysql, apache, webserver, database-connection

我想知道是否有一种方法可以访问远程计算机上的数据库服务，而无需在该计算机上安装网络服务器？

MYSQL DBMS 是否提供了一些可以直接连接的接口（端口），或者是一个网络服务器（转发通信）是强制性的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-21T09:35:03.570

默认情况下，可以在端口 3306 上访问 MySQL。通常，此端口会被防火墙阻止，因为让外部世界访问您的数据库服务器并不是一个好习惯。

如果您想通过命令行访问远程数据库，您可以使用[mysql 客户端](http://dev.mysql.com/doc/refman/5.0/en/mysql.html)。

如果您通过 Internet 执行此操作，您可能应该使用隧道或 VPN 来确保安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T09:34:56.890

您可以使用 ODBC 连接到 MySQL。默认端口 3306

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T09:52:36.137

正如他们所说。您可以使用（默认 por 3306）与 mysql 连接。您可以使用 mysql 客户端，或 ODBC、JDBC 或 ADO.Net 接口。大多数主要编程语言都有连接器。

如果您正在寻找一个用户友好的工具来使用像 PHPmyAdmin 这样的 mysql，您可能会喜欢 MYSQL GUI Tools [http://dev.mysql.com/downloads/gui-tools/5.0.html](http://dev.mysql.com/downloads/gui-tools/5.0.html)

# php - php 可以检测客户端浏览器监视器的大小/分辨率吗？

> ID：892089
> 
> 赞同：9
> 
> 时间：2009-05-21T09:30:31.253
> 
> 标签：php, resolution, detect

php可以检测IP、主机名、客户端代理等。php可以检测客户端浏览器监视器的大小/分辨率吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-05-21T09:34:48.297

不，它不能。PHP 在服务器上运行，因此它无法检测客户端设置，除非您采取特定的客户端步骤将信息传递给服务器上的 PHP 脚本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-21T09:53:02.597

请注意，我们中的一些人喜欢我们的浏览器未最大化。也许您最好尝试检测浏览器大小而不是屏幕分辨率。我认为要执行的 JS 将非常相似，但我实际上并不知道会是这种情况。

另外，盲人的屏幕阅读器的分辨率是多少？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-21T09:33:52.400

您必须将 PHP 与 JavaScript 一起使用，如下[例所示](http://web.archive.org/web/20090727114717/http://www.daniweb.com/code/snippet413.html)：

```
$url = $_SERVER['PHP_SELF'];

if( isset($HTTP_COOKIE_VARS["res"]) )
    $res = $HTTP_COOKIE_VARS["res"];

else {
    ?>
    <script language="javascript">
    <!--
    go();

    function go() 
    {
        var today = new Date();
        var the_date = new Date("August 31, 2020");
        var the_cookie_date = the_date.toGMTString();
        var the_cookie = "res="+ screen.width +"x"+ screen.height;
        var the_cookie = the_cookie + ";expires=" + the_cookie_date;
        document.cookie=the_cookie
            location = '<?echo "$url";?>';
    }
    //-->
    </script>
    <?php
}

//Let's "split" the resolution results into two variables
list($width, $height) = split('[x]', $res);

//Take the width and height minus 300
$tb_width = $width-300;
$tb_height = $height-300;

//Make the table
print("<table align=center border=1 width=" .$tb_width . " height=" . $tb_height . " >
    <tr><td align=center>Your screen resolution is " . $width . " by " . $height . ".<br>
    The width/height of this table is " . $tb_width . " by " . $tb_height . ".</td></tr>
    </table>"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-27T17:25:04.713

我也在寻找这个，但发现这些答案都没有真正回答这个问题！事实上，PHP 无法知道屏幕分辨率，因为它是在服务器端运行的。由于该信息未在 HTTP 环境变量中传递，因此我们需要另一个路由。Javascript 是一种选择。

下面的示例是一个 PHP 页面，用于检查`resolution`HTTP 请求中传递的变量。如果它没有找到那个`resolution`变量，那么它会在页面上创建一个简短的 JavaScript 代码，将那个变量和高度和宽度传递给重定向回它自己。当然，当页面在重定向后再次加载时，所有变量都会被设置，PHP 会知道分辨率。

```
<?php
    if(!isset($_GET['resolution'])) {     
        echo "<script language=\"JavaScript\">     
<!--      
    document.location=\"$PHP_SELF?resolution=1&width=\"+screen.width+\"&height=\"+screen.height;     
//-->     
</script>";     
    } else {
        // Code to be displayed if resolution is detected     
        if(isset($_GET['width']) && isset($_GET['height'])) {     
            echo "Width: " . $_GET['width'] . " and Height: " . $_GET['height'] . "<br />";
        } else {     
            echo "Resolution not detected.";
        }     
    }
?> 
```

最后我发现这是一个非常不令人满意的解决方案。它可以工作，但很丑陋，会在 URL 中添加杂乱无章的内容并需要重定向。不过，它可能会激发某人发布更好的答案。仅供参考，信用到期，这个答案受到[这篇文章的](http://en.kioskea.net/faq/1251-php-detect-the-display-resolution)启发。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-10T12:37:07.683

我知道这不是最好的答案，所以不要投反对票。

```
<script>
/*
    JAVASCRIPT IS ON TELL THE DEVELOPER#
*/
// GET BROWSER WIDTH AND HEIGHT
var bh=screen.height;
var bw=screen.width;
window.location="?doSubmit=do&js=yes&bh="+bh+"&bw="+bw+"";
</script>

<noscript>
    <!--
        JAVASCRIPT IS OFF TELL THE DEVELOPER#
    -->
    <meta http-equiv='refresh' content='0;url=?doSubmit=do&js=off&bh=off&bw=off'>

</noscript>

<?

if($_GET["doSubmit"]=="do"){

    // VARS

        $bh=$_GET["bh"];
        $bw=$_GET["bw"];
        $js=$_GET["js"];

    // PRINT HTML ?>

<table>

    <tr><td><strong>Browser Width:</strong></td><td><?=$bw;?>px</tr>
    <tr><td><strong>Browser Height:</strong></td><td><?=$bh;?>px</tr>
    <tr><td><strong>JavaScript Detection (y/n):</strong></td><td><?=$js;?></tr>

</table> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-10-29T15:24:47.327

有些人需要浏览器大小来进行移动开发。在某些情况下，这是必不可少的信息。

使用 WURFL 和 WALL 可以解决这个问题，因为大多数手机不支持 JS。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-21T09:35:55.190

使用JS无法获取监视器大小，您必须进行投票:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-21T11:46:40.603

请注意，JS 可以检查浏览器的窗口大小，但这个大小包括用户工具栏、滚动条等。浏览器中的实际工作区区域取决于这些工具栏的大小。

# sql - EWS - 将电子邮件导入 sql 数据库

> ID：892098
> 
> 赞同：0
> 
> 时间：2009-05-21T09:32:54.867
> 
> 标签：sql, import, email, exchange-server, exchangewebservices

我一直在尝试将正文从电子邮件导入到 SQL 2005 数据库中的字段中，但它一直丢失格式（回车、制表符等）

无论如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T08:34:18.187

这是我用来去除 html 格式的电子邮件正文和所有字符的代码，以便您得到实际的电子邮件内容。它看起来像一团糟，但它有效：

```
foreach (Item item in findResults.Items)
            {
                MessageBody messageBody = new Microsoft.Exchange.WebServices.Data.MessageBody();
                List<Item> items = new List<Item>();
                if (findResults.Items.Count > 0) // Prevent the exception
                {
                    foreach (Item item2 in findResults)
                    {
                        items.Add(item2);
                    }
                }
                service.LoadPropertiesForItems(items, PropertySet.FirstClassProperties);
                messageBody = item.Body.ToString().Replace("<html dir=", "").Replace("<head>", "").Replace("<meta http-equiv=", "").Replace("content=", "")
                              .Replace("<style type=", "").Replace("</style>", "").Replace("</head>", "").Replace("<body fpstyle=", "").Replace("ocsi=", "")
                              .Replace("<div style=", "").Replace("direction: ltr;font-family: Tahoma;color: #000000;font-size: 10pt;", "").Replace("</div>", "")
                              .Replace("<div>", "").Replace("</body>", "").Replace("</html>", "").Replace("<br>", "").Replace(">", "").Replace("\"Content-Type", "")
                              .Replace("\"text/html; charset=utf-8", "").Replace("\"0", "").Replace("\"", "").Replace("text/css", "")
                              .Replace("id=owaParaStyle", "").Replace("ltr", "").Replace("<meta name=GENERATOR MSHTML 9.00.8112.16470", "").Replace("<style P {", "")
                              .Replace("MARGIN-TOP: 0px; MARGIN-BOTTOM: 0px", "").Replace("<p", "").Replace("</p>", "").Replace("</p", "").Replace("&nbsp;", "")
                              .Replace("<body fPStyle= ", "").Replace("%", "").Replace("<", "").Replace(">", "").Replace("}", "").Replace("\"","").Replace("body fPStyle=1",""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T09:37:16.013

如果你的字段在 SQL 中是什么数据类型？如果您使用的是“文本”字段（nvarchar 或类似字段），那么这很可能是原因。

如果您确实需要完整的电子邮件正文，那么您可能需要将其存储为 blob（二进制）字段。这将产生影响（您应该阅读有关在 SQL 中存储二进制对象的内容），但它将允许您存储消息的正文。

大概你有充分的理由为什么这些消息需要存储在 SQL 中而不是外部（例如在文件系统上），只有指向 SQL 中的消息的指针？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T07:48:49.203

我设法找到了问题所在。我使用的数据集将值作为字符串传递。我已更改为 char 并保留所有格式。非常感谢你的帮助。

# asp.net - 哪个用户控件事件出现在数据绑定（其他控件）和渲染之间？

> ID：892100
> 
> 赞同：1
> 
> 时间：2009-05-21T09:33:08.067
> 
> 标签：asp.net, data-binding, repeater, user-controls

我目前正在构建一个用户控件，当中继器为空时会显示一条消息。

这个想法很简单，为用户控件提供中继器的 ID。当呈现用户控件时，查找中继器并检查`Items.Count`. 如果为零，则显示消息。

不过，我想再添加一项功能。如果没有项目，我希望能够**隐藏中继器。**

显然我不能这样做，`protected override void Render(HtmlTextWriter writer)`因为中继器（可能）已经被渲染。当Repeater ID分配给用户控件时，我也不能这样做，因为数据绑定还没有发生。

所以我的问题是.. 我可以在我的用户控件中覆盖哪些事件**发生了数据绑定**，但**渲染没有**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T09:44:48.650

考虑页面的 PreRender 事件。这种方式绑定已经发生，但尚未呈现任何内容，尽管它们即将呈现。

# django-admin - 内联-django

> ID：892101
> 
> 赞同：3
> 
> 时间：2009-05-21T09:33:41.840
> 
> 标签：django-admin, django-forms

我有 2 个模型。我想让模型 2 与模型 1 内联。在管理页面上，我想将模型 2 的一些字段显示为内联，并将它们全部显示为只读。当我单击内联的值时，我应该将我链接到具有该值的 model2

**显示字段只读的内联。我想将内联模型字段显示为只读**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-02T09:32:17.390

多亏了 newforms 管理员，这（大部分）很容易做到。基本上，您需要创建一个自定义内联子类并覆盖用于在管理员中呈现它的模板。假设您有一个名为`app`and models`Model1`的应用程序`Model2`，您将执行以下操作：

首先，创建您的`admin.py`文件：

```
from django.contrib import admin
from app.models import Model1, Model2

class Model2Admin(admin.ModelAdmin):
    list_display = (...)

class Model2Inline(admin.TabularInline):
    model = Model2
    extra = 0
    template = 'admin/app/model2/inline.html'

class Model1Admin(admin.ModelAdmin):
    list_display = (...)
    inlines = (Model2Inline,)

admin.site.register(Model1, Model1Admin)
admin.site.register(Model2, Model2Admin) 
```

然后，`inline.html`在以下位置创建模板`admin/app/model2`：

```
{% load i18n %}
<div class="inline-group">
  <div class="tabular inline-related {% if forloop.last %}last-related{% endif %}">
    {{ inline_admin_formset.formset.management_form }}
    <fieldset class="module">
      <h2>{{ inline_admin_formset.opts.verbose_name_plural|capfirst|escape }}</h2>
      {{ inline_admin_formset.formset.non_form_errors }}
      <table>
        <thead>
          <tr>
            <th colspan="2">Field1</th>
            <th>Field2</th>
            <th>Field3</th>
          </tr>
        </thead>

        {% for inline_admin_form in inline_admin_formset %}
          <tr class="{% cycle row1,row2 %}">
            <td class="original">
              <!-- Render all form fields as hidden fields: -->
              {{ inline_admin_form.pk_field.field }}
              {% spaceless %}
              {% for fieldset in inline_admin_form %}
                {% for line in fieldset %}
                  {% for field in line %}
                    {{ field.field.as_hidden }}
                  {% endfor %}
                {% endfor %}
              {% endfor %}
              {% endspaceless %}
            </td>

            <!-- then display just the values of the fields you're interested in: -->
            <td class="field1">
              <!-- Make this a link to the change detail page for this object: -->
              <a href="{% url admin:app_model2_change inline_admin_form.original.pk %}">{{ inline_admin_form.original.field1 }}</a>
            </td>
            <td class="field2">
              {{ inline_admin_form.original.field2 }}
            </td>
            <td class="field3">
              {{ inline_admin_form.original.field3 }}
            </td>
        </tr>
      {% endfor %}
      </table>
    </fieldset>
  </div>
</div> 
```

接下来，将您的应用程序添加到`INSTALLED_APPS`-`settings.py`不要忘记添加`django.contrib.admin`:)。

最后，编辑您的根目录`urls.py`以包含以下行：

```
from django.conf.urls.defaults import *
from django.contrib import admin

admin.autodiscover()

urlpatterns = patterns('',
   ...
   (r'^admin/', include(admin.site.urls))
) 
```

那应该这样做。请注意`admin.site.urls`，这使得 url 反转成为可能，仅在 django 1.1 之后有效。

# crontab - 如何授予 cron 作业文件的权限？

> ID：892104
> 
> 赞同：5
> 
> 时间：2009-05-21T09:34:31.977
> 
> 标签：crontab

我已经为我的网站设置了 cron 选项卡。但是我的邮件 ID 中有这样的消息，例如脚本的“权限被拒绝”。谁能帮我告诉我可能是什么问题。

谢谢......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-21T09:40:38.643

您在设置 crontab 时遇到此错误？还是从 cron 运行的脚本？

如果在设置 crontab 时，试试这个：

> 你输入：crontab -e 你得到：-bash: /usr/bin/crontab: Permission denied
> 
> 问题：您的用户不在 cron 组中。
> 
> 解决方案：以 root 身份编辑 /etc/group 文件，找到 cron 组并将您的用户添加到该行（用户名以逗号分隔）。然后以您的用户身份重新登录。
> 
> 验证：运行命令“组”。你应该在那里看到“cron”。

（来自[http://www.parseerror.com/argh/crontab-e-Permission-denied.txt](http://www.parseerror.com/argh/crontab-e-Permission-denied.txt)）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-04-14T08:22:14.360

朋友，如果有人想从其他用户那里安排 crons，就这样做

根用户：-

```
ls /usr/bin/crontab
chmod 4755 /usr/bin/crontab

echo PATH
vi /etc/crontab

SHELL=/bin/bash
PATH=/usr/java/jdk1.5.0_22/bin:/root/bin:/usr/java/jdk1.5.0_22/bin:/usr/lib/qt-3.3/bin:/usr/kerberos/sbin:/usr/kerberos/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/X11R6/bin
MAILTO=root
HOME=/

cd /etc/cron.d 
```

如果不存在，则创建 cron.allow 文件

```
vi cron.allow
root
other username 
```

保存并存在

```
su – username
/usr/bin/crontab -e 
```

在这里安排………………。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-01T23:50:43.663

我今天遇到了这个问题并且很困惑，直到我意识到被拒绝的命令是 SSH 命令。我忘记了我正在使用需要密码的 SSH 密钥进行连接，所以在我的情况下，真正的问题与 cron 无关。

我的解决方案是为此脚本创建一个不带密码的附加密钥（使用`ssh-keygen`），将其安装在远程服务器上，并在脚本中使用 ssh 命令的 -i 标志指定它。

```
ssh -i /path/to/id_rsa.no-passphrase user@remote command-to-run 
```

# visual-studio-2010 - 有没有办法从 VS2010 中的建模项目生成代码？

> ID：892105
> 
> 赞同：3
> 
> 时间：2009-05-21T09:34:36.487
> 
> 标签：visual-studio-2010

有没有办法从 VS2010 中的建模项目生成代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-10-29T19:46:13.773

看起来这个功能即将到来，但在 Beta2 中还没有。

微软的 Ramesh Rajagopal在 8 月 9 日[回答了类似的问题](http://social.msdn.microsoft.com/Forums/en-US/vstsprerelease/thread/62eea855-af4a-4821-9843-3ef2377aebc2)。

*   类似的帖子/回复[在这里](https://stackoverflow.com/questions/1269414/code-stubbing-with-visual-studio-2010-uml-modeling)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-02-18T19:40:28.417

尝试 RC 文档中的以下主题：[如何：从 UML 模型生成文件](http://msdn.microsoft.com/en-us/library/ee329480%28VS.100%29.aspx)。

另外，看看 Tim Fischer 的这篇博文是否有帮助：“[如何：在 VS 2010 Team System Beta 2（更新 4）中从 Team System UML 图生成代码](http://blogs.msdn.com/timfis/archive/2009/10/31/how-to-generate-code-from-uml-diagrams-in-vs-2010-team-system-beta-2.aspx)”

# java - Swing 组件的 ActionMap 中默认动作的名称是否标准化？

> ID：892113
> 
> 赞同：6
> 
> 时间：2009-05-21T09:35:38.730
> 
> 标签：java, swing

假设我有一个像 JSlider 这样的标准 Swing 组件，但我想稍微调整输入映射。默认输入映射和动作映射是通过外观安装的，我想重用一些已经在 ActionMap 中可用的动作。为此，我需要将 ActionMap 条目的键放入 InputMap 条目的值中。

我可以在运行时使用调试器轻松查找 ActionMap 键（始终为字符串），并重用它。*它会在我的 JDK 和 L&F 版本上*工作 - 保证。

所以问题是，默认 Swing 组件操作的键是否记录在任何地方，它们是否可以“合法地”随着时间而改变（即从 JDK 版本到 JDK 版本或从 L&F 到 L&F），您在实践中看到过这种变化吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-29T13:50:32.703

好的，我花了一段时间来搜索这个。

简而言之，它们似乎没有被标准化（很多），也没有被记录（很多）。

LookAndFeel 类是关键。这是层次结构：

*   观感

*   基本外观和感觉

    *   金属外观和感觉
    *   主题外观和感觉
    *   视窗观感
*   多重观感

在 BasicLookAndFeel 类中，您可以找到操作和键绑定的默认映射，这些映射将被所有其他类继承。所以你可以认为这个类是*标准*的。您可以在创建对象“默认值”时看到这一点，类似于 Java 1.4.2_17 的 498。

可以在实现器上找到其他键绑定和覆盖，例如 WindowsLookAndFeel。

一些*标准化*名称可以在 DefaultEditorKit 类中作为静态字段找到。这些似乎可以安全使用和重新映射。在 WindowsLookAndFeel 和 MotifLookAndFeel 类中可以看到它们的用法。假设这些行动将保持不变，我会感到安全。

所以简而言之，DefaultEditorKit 中定义的 Actions 不太可能改变。但是，键绑定在 L&F 实现之间完全改变。使用 DefaultEditorKit.something 从地图中检索操作，它应该可以跨版本工作。您可以与 JSlider 一起使用的 DefaultEditorAction 示例：

```
/**
 * Name of the Action for extending the selection
 * by moving the caret logically forward one position.
 * @see #getActions
 */
public static final String selectionForwardAction = "selection-forward"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-25T10:02:22.533

`ActionMap`并且`InputMap`有`getParent()`and `setParent()`，所以解决方案是：

1.  使用您想要进行的一些更改创建一个新地图。
2.  查询你的组件的地图
3.  将该地图设置为新地图的父地图
4.  在组件中安装新地图

这样，您的修改将覆盖并扩展现有映射。

[编辑] 我不知道任何地方都有所有键的列表。但是像这样的东西`maxScroll`应该是“稳定的”，即它们应该存在于未来的版本中（并不是说 Swing 在过去 10 年中发生了很大变化......）

因此，如果您需要替换某个映射，请使用上述方法。这样，您就可以保留 L&F 的所有现有映射（即使您犯了错误也可以保持组件可用）。如果您依赖于覆盖某个键，那么我建议检查该键是否存在并在它突然消失时抛出错误。

这样，您的代码将可以正常工作（可能很多年），如果它发生故障，它会主动告诉您有关更改的信息。

# c# - 如何将任意 DataTable 保存到新的 SQL 表

> ID：892124
> 
> 赞同：2
> 
> 时间：2009-05-21T09:38:37.850
> 
> 标签：c#, sql-server, ado.net

***假设我有一个 ADO.NET DataTable，我要通过将其保存到 SQL Server 数据库中的新***表中来“保留”它——有没有一种快速的方法来做到这一点？

我意识到我可以编写代码，通过循环遍历 DataColumns 集合并计算出正确的类型映射等来为“CREATE TABLE”语句生成 DDL……但我想知道是否有现有的方法可以做到这一点，还是某人编写的框架？

（注意：我需要能够处理任意列，没有什么像 blob 那样花哨的；只是常见的列类型，如字符串、数字、guid 和日期。程序在运行时才会知道 DataTable 中的列是什么，所以它们不能被硬编码。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T14:56:32.943

ADO.net 不能直接在 SQL Server 中创建表，但是，SMO 可以使用 Table 类的 .Create 方法来做到这一点。不幸的是，没有内置方法可以使用 DataTable 来定义 SMO Table 对象。

幸运的是，Nick Tompson 早在 2006 年就编写了这样一个 DataTable-to-SMO.Table 例程。它作为对这个 MSDN 论坛主题[http://social.msdn.microsoft.com/forums/en-US的回复之一发布/adodotnetdataproviders/thread/4929a0a8-0137-45f6-86e8-d11e220048c3/](http://social.msdn.microsoft.com/forums/en-US/adodotnetdataproviders/thread/4929a0a8-0137-45f6-86e8-d11e220048c3/)（编辑：我现在可以制作超链接）。

另请注意，回复帖子显示了如何向其中添加 SQLBulkCopy。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T09:48:52.323

如果表存在，您可以使用[`SqlBulkCopy`](http://msdn.microsoft.com/en-us/library/ex21zs8x.aspx)（它将接受 a `DataTable`）以最快的方式将数据放入表中（比通过适配器快得多）。我认为它不会创建表格。您可能必须自己编写 DDL，或者找到一些现有的代码来循环`DataTable.Columns`执行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T09:57:37.970

我认为这篇[文章](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataproviders/thread/4929a0a8-0137-45f6-86e8-d11e220048c3)可以提供帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T15:04:04.420

我可能更容易将您的 DataTable 存储为 XML。只需创建一个带有 XML 列的表。

# visual-studio - “整个解决方案”的搜索停止工作

> ID：892126
> 
> 赞同：358
> 
> 时间：2009-05-21T09:39:17.007
> 
> 标签：visual-studio

不知何故，Visual Studio 搜索已停止为我工作。每当我在“整个解决方案”中搜索某些文本时，我都会得到以下结果：

> 查找所有“[无论我在搜索什么]”、子文件夹、查找结果 1、“整个解决方案”没有找到要查找的匹配文本。查找已停止。

为什么它突然说“没有找到要查看的文件”？

我在 Google 上找到了许多链接，上面写着要按`Ctrl`+`Break`或`Ctrl`+ `Scroll Lock`，但它们似乎都不适合我。

* * *

## 回答 #1

> 赞同：595
> 
> 时间：2009-05-21T12:44:26.870

我偶尔会遇到这个问题。我发现的一个看似荒谬的解决方案是在“查找结果”窗口（而不是“输出”窗口）内单击。一旦闪烁的文本光标可见，点击`Ctrl`+`Break`四到五次。这似乎“解锁”了导致问题的任何原因。

有报告可能需要使用 `Ctrl`+而不是+ 。如果这些都不起作用，请单独尝试。`ScrLk``Ctrl``Break``Break`

来自 Codeguard 的注释：我找到了对此问题的[解释和确定性解决方案](https://stackoverflow.com/a/28219093/147805)

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2012-02-28T23:20:22.493

Windows 7 Pro SP1 64 位，Visual Studio 9.0.30729.1

**没有工作：**

*   `Ctrl`+`Break`
*   `Ctrl`+`Scroll Lock`
*   重新启动 Visual Studio

**工作过：**

*   `Break`（在查找结果 1 和 2 中）（仅按下一次）

资料来源：戈登链接中的评论...

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2015-01-29T15:58:40.717

**错误来源**

这既不是 Visual Studio 也不是 Windows 相关的错误。事实上，错误就在你的键盘上！据报道，来自不同供应商的许多键盘存在故障。

**问题**

如果您先按`Ctrl`+`Break`并释放`Ctrl`，则 Break 会卡在有问题的键盘上。如果您曾经按`Ctrl`+ `Break`“错误”方式，您将遇到搜索被中断的问题。

**细节**

根据扫码规范，`Break`+`Ctrl`是`Break`特殊的。他们会在您按下的那一刻发送“make”（按下）和“break”（释放）扫描代码`Break`。当您发布时，他们什么也不发送`Break`。有问题的键盘将发送以下序列：

1.  `Ctrl`“制作”扫码
2.  `Ctrl`+ `Break`“制作”扫码
3.  `Ctrl`“破”扫码
4.  `Pause`“破”扫码

也就是说，`Ctrl`+`Break`永远不会被释放，而是`Pause`被释放。

**再生产**

例如，您可以使用 Visual Studio 工具中的旧 Spy++。将它附加到任何东西上，例如 Windows 记事本和监控消息（我建议您只选择键盘消息）。按`Ctrl`+ `Break`，先松开`Ctrl`。检查 Spy++ 的输出。您将看到我在详细信息部分中显示的序列。

我在同一台计算机上尝试了两种不同的键盘。Logitech K120 有这个 bug，而其他一些 Mitsumi 键盘的行为符合规范并且没有这个 bug。

如果你仔细想想，很容易理解正确的行为需要特殊情况处理，而错误的行为是幼稚的。这就是为什么许多不同的键盘可能有问题的原因。

**解决方案**

更换你的键盘:)

**解决方法**

您只需按`Ctrl`+ `Break`，注意先释放`Break`。哪个应用程序处于活动状态并不重要。

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2011-12-16T15:06:06.913

这个错误在 Visual Studio 中已经存在很长时间了，而且似乎从未得到修复。

请参阅 2004 年的这个 MS Connect 项目：~~[http ://connect.microsoft.com/VisualStudio/feedback/details/105511/find-in-files-says-no-files-were-found-to-look-in-find-被停止](http://connect.microsoft.com/VisualStudio/feedback/details/105511/find-in-files-says-no-files-were-found-to-look-in-find-was-stopped)~~

我不敢相信他们仍然没有在 VS2010 中修复它 - 但它仍然存在 :(

Connect 项目已标记为**已关闭 - 无法修复**：[https ://connect.microsoft.com/VisualStudio/feedback/details/718217/find-was-stopped-in-progress-while-performing-search-in-视觉工作室](https://connect.microsoft.com/VisualStudio/feedback/details/718217/find-was-stopped-in-progress-while-performing-search-in-visual-studio)

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2013-10-03T19:38:47.863

`Ctrl`+`Break`或`Ctrl`+`ScrLk`取消查找操作。尝试一下。发生的事情是某些软件层（可能是 Windows）认为这些键仍然被按下，即使它们没有被按下。按下并释放它们会清除标志。

它可以是以下任何一种组合：

`Ctrl`+`Break`

`Alt`+`Break`

`Break`

`Ctrl`+`ScrLk`

*请记住，您的键盘上有多个 control 和 alt 键*- 尝试使用它们中的每一个。如果是右键`Ctrl`+ `ScrLk`，按左键`Ctrl`不会解决问题。

[这](http://connect.microsoft.com/VisualStudio/feedback/details/718217/find-was-stopped-in-progress-while-performing-search-in-visual-studio)是 Microsoft 关闭为“不会修复”的 Connect 问题。

如果这对您来说是一个反复出现的问题，则有[一个 Visual Studio 扩展](http://visualstudiogallery.msdn.microsoft.com/23d270a7-c74c-47e4-ba14-d9341e9017ff)可以抑制导致问题的虚拟键。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2015-10-24T10:44:57.440

`Ctrl`+`F`和`Ctrl`+ `Shift`+`F`已停止在 Visual Studio 2015 社区版上工作。

我的朋友告诉我要去：

1.  **工具 → 导入和导出设置：** [![在此处输入图像描述](https://i.stack.imgur.com/t8JbI.png)](https://i.stack.imgur.com/t8JbI.png)

2.  **选择：重置所有设置→下一步** [![在此处输入图像描述](https://i.stack.imgur.com/Exa7Q.png)](https://i.stack.imgur.com/Exa7Q.png)

3.  **选择：不，只是重置设置，覆盖我当前的设置→下一步** [![在此处输入图像描述](https://i.stack.imgur.com/3BLA6.png)](https://i.stack.imgur.com/3BLA6.png)

4.  **选择：常规→完成** [![在此处输入图像描述](https://i.stack.imgur.com/Z9azs.png)](https://i.stack.imgur.com/Z9azs.png)

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2018-10-18T14:56:20.760

就我而言，我在搜索窗口的“查看这些文件类型：”字段中有一个虚假字符。

删除字符解决了这个问题。

视觉工作室 2017

[![在此处输入图像描述](https://i.stack.imgur.com/7XrID.png)](https://i.stack.imgur.com/7XrID.png)

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2012-04-17T16:55:36.250

我尝试了所有以前的选项。它们对我不起作用，但阅读它们让我确信这是一个错误，我将不得不尝试一些未知的方法来让它工作。所以，我在 Visual Studio 2010 中尝试了一个*简单的文件搜索：*

1.  当前文件
2.  所有打开的文档

两者都有效。

然后我尝试*在文件中查找*，哇！它开始工作了。

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2013-05-04T22:09:12.773

Visual Studio 2012 中的搜索解决方案已损坏。我在三台机器上测试过，在两台机器上都没有。我发现哪个有效的是单击搜索字段旁边的下拉箭头并选择全部查找。这有点痛苦，因为每次搜索解决方案时都必须选择下拉菜单。

![在此处输入图像描述](https://i.stack.imgur.com/bVNkD.png)

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2013-01-05T20:08:18.760

不幸的是，这些特殊的击键都不适合我。只有重新启动 Visual Studio 2010 似乎对我有用。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2014-10-09T19:09:25.817

我在 Visual Studio 2013（更新 3）中遇到了同样的问题。以前列出的所有组合键都不适合我。我`*.cs`在 FileTypes 中选择了。

为了让它工作，我把它改成了`*.*`，然后又改回来`*.cs`- 现在它工作了。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2015-08-20T14:14:51.127

几年来我一直在使用 Visual Studio 13 没有这个问题，我在应用 Update 5 后开始遇到这个问题，或者它可能是我在不知不觉中按下的奇怪按键组合触发了它，我不确定。

Echelon_Force 的解决方案对我有用。谢谢！

**没有工作：**

`Ctrl`+`Break`

`Ctrl`+`Scroll Lock`

**工作过：**

`Break`（在查找结果 1 和 2 窗口中 - 仅按下一次）

在文件中找到快乐！

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-12-13T18:44:02.603

`Scroll Lock`和的所有组合`Break`对我没有任何作用。作为一种解决方法，我将解决方案目录添加到“搜索文件夹”（第二个省略号按钮），然后将“查找范围”字段更改为解决方案目录。根本问题仍然存在，但对我来说，这在功能上是一样的。

（Visual Studio 2013、Windows 8.1、x64）

![截图什么](https://i.stack.imgur.com/jseqx.png)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2020-01-16T08:24:57.693

在将 Visual Studio 2019 更新到 16.4.3 后，我今天遇到了与 glenneroo 相同的问题。[在这里](https://developercommunity.visualstudio.com/content/problem/683843/find-and-replace-window-not-working-in-2019-latest.html)找到了对我有用的解决方案。

打开并检查文本字段`Find Options`中是否有（特殊）字符。`Look at these file types`如果是这样，请将其删除。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-10-08T13:44:04.163

我在虚拟机中运行 Visual Studio 2012 Professional，使用 Linux 机器上的 rdesktop 进行连接。

其他建议均无效，但解决问题的是：

*   转到“查找和替换”屏幕。（`ctrl`- `shift`-`f`在我的情况下）
*   输入搜索文本并选择“整个解决方案”
*   点击“查找下一个”，它应该会找到一个结果。
*   点击“查找全部”，现在可以正常工作而不会中止。（请注意，我真的很用力地打了我的鼠标，并且还涉及到一些咒骂，但我认为除了心理方面之外没有任何相关性：D）

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2014-10-21T22:59:53.517

在更新 3 之后的 Visual Studio 2013 中，我遇到了同样的问题。以前，我可以将“.cs”或“.cshtml”放在“**查看这些文件类型：** ”中，这样​​就可以了。但是在更新 3 之后，我现在必须输入“ *.cs”或“* .cshtml”（或我想要搜索的任何文件类型），它工作正常。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2014-11-07T18:02:55.123

`Ctrl`如果我使用+ `F`（*在整个解决方案中查找*），它似乎只会锁定，而如果我使用`Ctrl`+ `Shift`+ `F`（*在文件中查找*）则永远不会锁定。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2015-02-24T14:34:21.223

在其他一切都没有或仅在某些时候起作用之后，这对我有用：

进行搜索，并在搜索时一直**按住** `CRTL`并按住`Break`。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2015-02-27T18:52:30.163

如果您要搜索多种文件类型，它们必须用 ; 分隔。字符，而不是空格。

这将返回正确的结果：

> *.cs;*.vb;*.js;*.aspx

这根本不返回任何内容：

> *.cs *.vb *.js *.aspx

这不是原始海报的问题，但对于其他无法弄清楚他们的搜索为什么不起作用的人来说，这可能是原因。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2015-10-30T21:23:12.763

另一个迟到的答案，但我为这个问题找到了另一个“解决方案”。

当它看起来好像 Visual Studio 应用程序已在搜索中冻结时......不要理会它。不要关闭它。不要重新启动它。只需让它等待大约 10-15 分钟，问题可能会自行纠正，就像在我的具体案例中一样。我不确定为什么不理会它会解决问题，尽管我**完全没有受过教育的猜测**是 Visual Studio 正在构建某种索引以便能够搜索文件并遇到障碍。一旦 10-15 分钟结束并且 VS 完成搜索，之后似乎就好了。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2016-07-29T11:53:56.103

可能不适用于大多数情况，但为我解决的问题是在搜索窗口中关闭“使用正则表达式”。我以前一直在使用正则表达式进行一些棘手的替换，完成后并没有关闭。我认为它可能将简单替换文本的一部分（见下文 - 有一些特殊字符）解释为不完整或格式错误的正则表达式的开始，因此实际上无法进行任何匹配。如果它告诉你就好了！

[![禁用使用正则表达式](https://i.stack.imgur.com/7g0Lh.png)](https://i.stack.imgur.com/7g0Lh.png)

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2017-06-07T07:22:51.637

这个`Ctrl`+`Break`技巧为我工作了多年，终于明白[为什么会发生这种情况](https://stackoverflow.com/a/28219093/468725)真的很有趣。对于 VS2015，我在搜索方面遇到了一些相关问题：我的++`Ctrl`根本不起作用，当我按下它时，这个组合键似乎被忽略了。我什至尝试重新安装 VS 2015，但我仍然遇到同样的问题。`Shift``F`

如果有人遇到同样的问题，原因如下：

我发现无论出于何种随机原因，VS2015 在连接到我的 PC 的另一台显示器上显示“在文件中查找”对话框。另一台显示器是 4K 三星电视，通常保持“关闭”状态，我不知道为什么 VS 2015 会将该搜索对话框发送到该显示器。令人惊讶的是，当我打开电视时，搜索对话框会自行移动到主显示器！

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2020-12-03T11:05:02.933

尝试了所有的解决方案，但我的固定是我不小心在我的 Windows 上换了另一种语言键盘，在我换回英文键盘后，它工作了，终于我可以了`ctrl + shirt + f`

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2020-12-11T00:31:41.100

我目前正在使用 VS2019 16.7.7，并且，如果我尝试在整个解决方案中找到某些内容，VS 永远不会找到所有出现的地方，有时只有一个，或者没有。

在最近发布的 VS2019（可能是 16.5 或 16.6）中，旧的“查找和替换”对话框被新的“在文件中查找”对话框取代，而这个新对话框对我来说失败了。对我有用的一种解决方案是禁用新的“在文件中查找”并通过签`Use previous Find In Files`入来继续使用旧的“查找和替换”对话框`Tools > Options > Environment > Preview features`。

但是，我观察到这仅在我打开的一个 Visual Studio 实例中失败，因此我尝试了简单的“关闭 VS 并再次打开它”，启用了新的“在文件中查找”功能，它开始工作。

两种可能的解决方案，以防简单的“关闭并再次打开”失败。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2016-06-17T01:54:31.233

以下对我有用。Visual Studio → 菜单*Windows* →*重置窗口面板*。Visual Studio 的大小调整使其隐藏了该选项。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2017-01-10T09:14:56.940

这是我在使用 Visual Studio 时遇到的最大问题之一。对我来说（Windows 10、Visual Studio 2015），“在所有文件中查找”窗口被白屏锁定，猜猜是什么，点击`print screen`解决了它。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2018-02-22T07:56:05.990

`Ctrl`+`Break`适用于 Visual Studio 2008

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2018-08-15T08:27:48.977

没有什么对我有用。我也使用 Resharper。所以我不得不重置我的 VS 键绑定并重新应用 Resharper 快捷方式。只有这让我工作。

1.  重置当前键盘配置（工具 | 选项 | 环境 | 键盘 | 重置）。
2.  转到 ReSharper | 选项 | 环境 | 键盘和菜单 | “视觉工作室” | 申请方案。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2018-10-26T13:27:50.260

随着 Visual Studio 版本 15.8.8 的更新，这已经开始发生在我身上。以上步骤均无效。没有错误。似乎是“卡住”的搜索。

我最近安装了 ApexSQL Refactor 2018.03.0331。卸载它并没有解决问题，而且似乎不是原因。它似乎与 Visual Studio 更新的 15.8.8 版本有关。

我完全卸载了 Visual Studio 并再次重新安装了 15.8.8 版。Ctrl-Shift-F 搜索整个解决方案的问题不再是问题。无论是什么导致的问题*，*在卸载和安装后都会解决。

我再次安装了 ApexSQL Refactor 2018.03.0331，一切仍然运行良好。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2019-07-02T00:28:21.523

我在 Visual Studio Community 2017 和现在的 2019 中遇到了类似的情况（已修补至 16.1.4）。就我而言，它没有显示任何结果，它只是永远搜索而没有找到任何东西。我的解决方案是取消停靠“查找和替换”对话框并将其移动到浮动位置的任何位置。脱离后它似乎工作正常，即使在将其再次对接回到原来的位置后也是如此。

# c# - 关闭 Windows Mobile 控制台应用程序

> ID：892129
> 
> 赞同：2
> 
> 时间：2009-05-21T09:39:38.100
> 
> 标签：c#, .net, windows-mobile, console-application

在 Windows Mobile 上关闭控制台应用程序的最佳和最干净的方法是什么？

默认情况下该应用程序是不可见的，您在正在运行的程序中看不到它，这对于运行后台进程非常有用，但有时用户可能需要关闭它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T11:58:09.100

退出主。严重地。如果您需要某人能够手动退出，则需要一些机制，例如外壳图标和菜单或程序文件夹中的某个程序。否则用户怎么会知道它正在运行？然后，这些视觉提示中的任何一个都会设置一个命名的系统事件，并且在您的控制台应用程序中，您将有一些东西在监听同一事件（可能是一个工作人员）。设置好后，您将采取关闭所需的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T09:54:09.177

这是一个很好的问题。我曾经花了*很长时间*试图弄清楚这一点。当然，我们假设您不能（轻松）从 Main 返回。桌面上的正确答案是[System.Environment.Exit](http://msdn.microsoft.com/en-us/library/system.environment.exit.aspx)；但是CF不支持这种方法。

一个明显的第二个选项是[Application.Exit](http://msdn.microsoft.com/en-us/library/ms157894.aspx)。那是在 CF 上，但仅适用于 WinForms，实际上并不能保证退出您的应用程序。

所以，抛出一个未处理的异常。;)

编辑：要从另一个应用程序以编程方式杀死它，您可以查看[Process.GetProcessById](http://msdn.microsoft.com/en-us/library/76fkb36k.aspx)和[Process.Kill](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.kill.aspx)。这两个都在 CF 上可用。您将不得不以某种方式让“杀手”应用程序找出“受害者”的 ID。CF 上没有更方便的方法，例如[Process.GetProcessesByName 。](http://msdn.microsoft.com/en-us/library/z3w4xdc9.aspx)但是，这种技术并不是那么优雅，并且可能存在权限问题。

您还可以考虑某种 IPC（进程间通信），可能在[之前的 Windows Mobile 答案](https://stackoverflow.com/questions/200225/easy-ipc-on-windows-mobile#answer-200899)中进行了概述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T11:04:34.700

如果应用程序在 UI 中不可见，用户将如何关闭它？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-04T07:47:50.107

我决定在配置文件中读取一个布尔值（保持活动状态），并在我想退出时让另一个应用程序将其设置为 false。

它不是那么敏感，但至少我可以干净地退出..

# c++ - 我应该更喜欢成员数据中的指针还是引用？

> ID：892133
> 
> 赞同：148
> 
> 时间：2009-05-21T09:42:01.137
> 
> 标签：c++, reference, class-members

这是一个简化的例子来说明这个问题：

```
class A {};

class B
{
    B(A& a) : a(a) {}
    A& a;
};

class C
{
    C() : b(a) {} 
    A a;
    B b; 
}; 
```

所以 B 负责更新 C 的一部分。我通过 lint 运行代码，它对引用成员抱怨：[lint#1725](http://gimpel-online.com/MsgRef.html#1725)。这谈到了照顾默认副本和分配这很公平，但是默认副本和分配对于指针也很糟糕，所以那里几乎没有优势。

我总是尽可能地尝试使用引用，因为裸指针不确定地引入了谁负责删除该指针。我更喜欢按值嵌入对象，但如果需要指针，我会在拥有指针的类的成员数据中使用 auto_ptr，并将对象作为引用传递。

当指针可能为空或可能更改时，我通常只会在成员数据中使用指针。是否有任何其他理由更喜欢指针而不是数据成员的引用？

是否可以说包含引用的对象不应该是可分配的，因为引用一旦初始化就不应更改？

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2009-05-21T10:59:09.203

我自己的经验法则：

*   **当您希望对象的生命周期依赖于其他对象的生命周期时，请使用引用成员**：这是一种明确的说法，即在没有另一个类的有效实例的情况下不允许对象处于活动状态 - 因为没有赋值和通过构造函数获取引用初始化的义务。**这是一种设计类的好方法，无需假设它的实例是否属于另一个类。**您只假设他们的生活与其他实例直接相关。它允许您稍后更改使用类实例的方式（使用新的、作为本地实例、作为类成员、由管理器中的内存池生成等）
*   **在其他情况下使用指针**：当您希望稍后更改成员时，请使用指针或 const 指针以确保仅读取指向的实例。**如果该类型应该是可复制的，那么无论如何您都不能使用引用。**有时您还需要在特殊函数调用（例如 init() ）之后初始化成员，然后您别无选择，只能使用指针。**但是：在所有成员函数中使用断言来快速检测错误的指针状态！**
*   **如果您希望对象生命周期依赖于外部对象的生命周期，并且您还需要该类型是可复制的，则在构造函数中使用指针成员但引用参数**这样您在构造时表明该对象的生命周期取决于在参数的生命周期中，但实现使用指针仍然是可复制的。只要这些成员仅通过副本更改，并且您的类型没有默认构造函数，该类型就应该满足这两个目标。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2009-05-21T10:41:37.397

避免引用成员，因为它们限制了类的实现可以做什么（包括，正如你提到的，阻止赋值运算符的实现）并且对类可以提供的功能没有任何好处。

示例问题：

*   您被迫在每个构造函数的初始化列表中初始化引用：无法将此初始化分解到另一个函数中（~~直到 C++0x，无论如何~~ **编辑：** C++ 现在有[委托构造函数](https://thenewcpp.wordpress.com/2013/07/25/delegating-constructors)）
*   引用不能被反弹或为空。这可能是一个优势，但如果代码需要更改以允许重新绑定或成员为空，则成员的所有用途都需要更改
*   与指针成员不同，引用不能轻易地被智能指针或迭代器替换，因为重构可能需要
*   每当使用引用时，它看起来像值类型（`.`运算符等），但表现得像一个指针（可以悬空） - 例如[谷歌样式指南](https://google.github.io/styleguide/cppguide.html#Reference_Arguments)不鼓励它

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2009-05-21T09:53:56.137

对象很少应该允许分配和其他类似比较的东西。如果您考虑一些具有“部门”、“员工”、“主管”等对象的业务模型，则很难想象将一名员工分配给其他员工的情况。

因此，对于业务对象，将一对一和一对多关系描述为引用而不是指针是非常好的。

也许可以将一或零关系描述为指针。

所以没有'我们不能分配'然后因素。
许多程序员只是习惯了指针，这就是为什么他们会找到任何参数来避免使用引用。

将指针作为成员将迫使您或您的团队成员在使用前一次又一次地检查指针，并带有“以防万一”的注释。如果指针可以为零，那么指针可能被用作一种标志，这很糟糕，因为每个对象都必须扮演自己的角色。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2009-05-21T10:00:38.337

[尽可能使用引用，必要时使用指针。](http://www.parashift.com/c++-faq-lite/references.html#faq-8.6)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-05-21T09:55:00.720

在一些重要的情况下，根本不需要可分配性。这些通常是轻量级算法包装器，可以在不超出范围的情况下方便计算。此类对象是引用成员的主要候选对象，因为您可以确定它们始终拥有*有效*的引用并且永远不需要复制。

在这种情况下，请确保使赋值运算符（通常还有复制构造函数）不可用（通过继承`boost::noncopyable`或声明它们为私有）。

然而，正如用户 pts 已经评论的那样，对于大多数其他对象来说，情况并非如此。在这里，使用引用成员可能是一个大问题，通常应该避免。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-05-21T11:08:42.647

由于每个人似乎都在发布一般规则，我将提供两个：

*   永远不要使用使用引用作为类成员。我从来没有在我自己的代码中这样做过（除了向自己证明我在这条规则中是正确的）并且无法想象我会这样做的情况。语义太混乱了，这真的不是引用的设计目的。

*   在将参数传递给函数（基本类型除外）或算法需要副本时，始终使用引用。

这些规则很简单，对我很有帮助。我将使用智能指针（但请不要使用 auto_ptr）作为类成员的规则留给其他人。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-05-21T09:47:24.153

是的：*是否说包含引用的对象不应该是可分配的，因为引用一旦初始化就不应更改？*

我对数据成员的经验法则：

*   永远不要使用引用，因为它会阻止分配
*   如果您的班级负责删除，请使用 boost 的 scoped_ptr（比 auto_ptr 更安全）
*   否则，使用指针或常量指针

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-21T10:19:07.583

> 当指针可能为空或可能更改时，我通常只会在成员数据中使用指针。是否有任何其他理由更喜欢指针而不是数据成员的引用？

是的。代码的可读性。指针使成员更明显是一个引用（讽刺的是:)），而不是一个包含的对象，因为当您使用它时，您必须取消引用它。我知道有些人认为这是过时的，但我仍然认为它只是防止混淆和错误。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-02-05T16:12:32.493

我建议不要引用数据成员，因为您永远不知道谁将从您的类中派生以及他们可能想要做什么。他们可能不想使用被引用的对象，但是作为一个引用你已经强迫他们提供一个有效的对象。我已经对自己做了足够多的事情来停止使用引用数据成员。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-12-16T18:35:26.267

如果我正确理解了这个问题...

**作为函数参数而不是指针的引用：** 正如您所指出的，指针并不清楚谁拥有指针的清理/初始化。当你想要一个指针时首选一个共享点，它是 C++ 11 的一部分，当在接受指向数据的类的生命周期内不能保证数据的有效性时，首选一个 weak_ptr。也是 C++ 11 的一部分。使用引用作为函数参数可以保证引用不为空。你必须颠覆语言特性来解决这个问题，我们不关心松散的大炮编码器。

**引用 aa 成员变量：** 如上关于数据有效性。这保证了指向的数据，然后引用，是有效的。

将变量有效性的责任转移到代码中的更早一点不仅可以清理后面的代码（您的示例中的 A 类），而且还可以让使用的人清楚。

在您的示例中，这有点令人困惑（我真的会尝试找到更清晰的实现），B 使用的 A 在 B 的生命周期内得到保证，因为 B 是 A 的成员，所以参考加强了这一点并且（也许）更清楚。

并且以防万一（这是一个很低的可能性，因为它在您的代码上下文中没有任何意义），另一种选择是使用非引用的非指针 A 参数，将复制 A，并使范式无用 - 我真的不认为你的意思是这个作为替代。

此外，这还保证您无法更改引用的数据，其中可以修改指针。只有当引用/指向数据的指针不可变时，const 指针才会起作用。

如果 B 的 A 参数不能保证设置或可以重新分配，则指针很有用。有时弱指针对于实现来说过于冗长，很多人要么不知道弱指针是什么，要么只是不喜欢它们。

请撕开这个答案:)

# asp.net-mvc - 如何将字符串传递给 ASP.NET MVC 中的局部视图？

> ID：892136
> 
> 赞同：4
> 
> 时间：2009-05-21T09:42:17.767
> 
> 标签：asp.net-mvc

我有一个搜索页面，如果列表中有结果，它会将这个列表传递给视图。但是，如果没有结果，我想将搜索到的文本发送到未找到结果的视图。我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-21T09:48:37.270

您需要将搜索到的文本作为返回到视图的模型的一部分提供。然后你有两个选择 -

使用 RenderPartial 会将返回的视图传递给局部视图，以便您可以从那里访问所需的值。

```
Html.RenderPartial("PartialView"); 
```

或者，您可以使用字符串作为局部视图的模型传递

```
Html.RenderPartial("PartialView", Model.SearchedText); 
```

如果您想对不同模型使用无结果部分视图，这可能是有意义的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-21T09:44:23.907

```
<%Html.RenderPartial("SimpleTrustGridViewer", ViewData["departmentGrid"]); %> 
```

这将一个对象 ViewData["departmentGrid"]（来自非局部视图的视图数据）传递给局部视图 SimpleTrustGridViewer。

简化：

```
<%Html.RenderPartial("myUserControl", myString); %> 
```

您的局部视图继承如下：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<string>" %> 
```

然后，在您的局部视图中，“模型”将是传递的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T09:52:23.393

从控制器传递到视图的 ViewDataDictionary 将与从视图传递到部分视图相同。因此，如果您要传递的字符串在 ViewDataDictionary 中，则不必传递它。

```
<%=Html.RenderPartial("NorResultFound")) %> 
```

但是无论有没有结果，您都可以使用相同的视图：

```
<%if (Model.ResultCount!=0){ %>
<%foreach(var result in Model){ %>
<%= // display results %>
<%}}%>

<%else {%>
<p>There is no results for <%=ViewData["keyword"]%> </p>
<%} %> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-24T14:50:38.060

我试过这个，但无法让它工作。说我有

```
 <div id="SearchBar"> 

<% using (Html.BeginForm("IndexNoJavaScript", "Home"))  
{%>  
<%= Html.TextBox("SearchTextBox", ViewData["SearchText"]) %>
  <input type="submit" value="Search" />  <% } %>
  </div> 
 <% Html.RenderPartial("SearchResults"); %> 
```

当我尝试在此视图中显示搜索文本时，如下所示：

```
<%= Html.TextBox("SearchedText", ViewData["SearchText"] ) %> 
```

我的文本框是空白的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-09-26T18:53:23.113

您可以在 div 标签上使用 jquery 和`load()`action，而不是使用 partial；结果是相似的。使用`load()`您想要的文本在控制器上调用 ajax 方法。像：

```
$('#divId').load('url/'+ serch content ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-21T09:49:05.537

除非您明确地将其他内容传递给部分视图，否则它与父视图具有相同的模型。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-21T09:53:12.657

两种方法（你在谈论视图，而不是部分视图对吗？）1）在你的控制器中调用不同的视图，以防没有结果将字符串作为模型传递 2）创建一个包含搜索状态的模型（找到 x 项，没有找到匹配等...）和结果列表到同一个视图，允许视图使用 switch 语句呈现不同的结果。

# visual-studio-2008 - 查找我的 IE 会话的进程 ID 以在 VS 2008 中进行调试？

> ID：892138
> 
> 赞同：1
> 
> 时间：2009-05-21T09:43:16.390
> 
> 标签：visual-studio-2008, debugging, internet-explorer

刚刚从eclipse切换到vs 2008来调试javascript，当我使用vs 2008 for c#时，我感觉更自在，当我来到“附加到进程”时，我看到3个iexplorer进程，其中2个带有“脚本”，

我只打开了 1 个 IE 窗口..

如何确定我需要使用哪个进程 ID？有人知道吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T10:19:02.700

如果您只在单独的 IE 窗口中打开您的应用程序，您将看到 2 个 IExplore 进程。一个会有一个窗口标题，这将是容器，而不是您感兴趣的那个。您将要附加到另一个进程。

当然，如果您还希望加载其他有用的站点并且您更喜欢 IE（我在 FF 中加载 SO 之类的站点，但 MSDN，至少在过去，在 IE 中工作得更好），这可能会有些限制。

这里有用的 sysinternal 工具是[TcpView](http://technet.microsoft.com/en-us/sysinternals/bb897437.aspx)，通过观察每个 iexplore 进程连接到的内容，您可以确定您需要哪个进程。请注意，您需要在短时间内进行任何导航，IE 将在一段时间后丢弃空闲连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T09:59:03.457

使用[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)，您将看到 2 个进程（一个嵌套在树中，即您的页面）。您看到 3 是因为您打开了更多选项卡（IE8 每个选项卡使用一个进程），因此只需关闭其他选项卡并一次调试 1 个页面。

# xml - ASP 经典 - XML Dom

> ID：892161
> 
> 赞同：5
> 
> 时间：2009-05-21T09:49:53.070
> 
> 标签：xml, asp-classic, vbscript

我有一个在经典 ASP 站点 (VBSCRIPT) 上工作的令人不快的任务，并且需要在循环中解析出以下信息。

```
<xml>
  <product ref="xxx">
    <xxx/>
    <xxx/>
    <xxx/>
    <images>
      <image ref="JCCCCCC" />
      <image ref="JCCCCCD" />
    </images>
  </product>
  <product ref="xxx">
    <xxx/>
    <xxx/>
    <xxx/>
    <images>
      <image ref="JCCCCCC" />
      <image ref="JCCCCCD" />
    </images>
  </product>
</xml> 
```

我正在尝试获取产品参考，然后是图像（第 4 个主节点向下）

我已经为此烦恼了一段时间，并且在 2 年多没有使用 ASP 后遭受脑阻塞。

```
<%
 Set objXML = Server.CreateObject("Microsoft.XMLDOM")
 Set objLst = Server.CreateObject("Microsoft.XMLDOM")
 Set objHdl = Server.CreateObject("Microsoft.XMLDOM")

 objXML.async = False
 objXML.Load (Server.MapPath("\") & "\xmlupdate\product.xml")

 If objXML.parseError.errorCode <> 0 Then
     'handle the error
 End If

 Set objLst = objXML.getElementsByTagName("Product")
 SizeofObject = objLst.length-1
 response.Write(SizeofObject&"<br><br>")

 For i = 0 To (SizeofObject-1)

    Set objHnd = objLst.item(i)
    Response.Write(objHdl.childNodes(0).text)
 Next

%> 
```

在我对 ASP 失去理智之前，任何帮助都会很棒

- - 额外的 - -

使用它可以提供完整的输出，因为我希望它是我似乎无法获取的节点属性。

```
<%
Set objLst = objXML.getElementsByTagName("Product")
SizeofObject = objLst.length-1
response.Write(SizeofObject&"<br><br>")

For each elem in objLst
    set childNodes = elem.childNodes
    for each node in childNodes
        Response.Write node.nodeName & "  =  " & node.text & "<br />" & vbCrLf
    next
    Response.Write "<hr>" & vbCrLf
Next
%> 
```

* * *

## 转储 XML 的最终代码（下面的 Cerebrus）

```
<%
Set objLst = objXML.getElementsByTagName("Product")
SizeofObject = objLst.length-1
response.Write(SizeofObject&"<br><br>")

For each elem in objLst
    set childNodes = elem.childNodes
    for each node in childNodes

        Response.Write node.nodeName & "  =  " & node.text & "<br />" & vbCrLf
        If lcase(node.nodeName)="images" then 
            Response.Write("<B>Images Hit</B></br>")
            set xattchildnodes = node.childNodes
            For Each attchildnodes in xattchildnodes
                For Each att in attchildnodes.Attributes
                    Response.Write att.Name & "  =  " & att.text & "<br />" & vbCrLf
                Next
            Next
        End If
    next
    Response.Write "<hr>" & vbCrLf
Next

%> 
```

* * *

## 工作 XPATH 版本（从下面的 Pete Duncanson 修改）

```
<%
Set objXML = Server.CreateObject("Microsoft.XMLDOM")
objXML.Load (Server.MapPath("\") & "\Product.xml")
'etc'

Dim nodes
set nodes = objXML.selectNodes("//xml/Product")

Dim images

For each node in nodes
    Response.Write("<ul>")
    Response.Write("<li>Ref: " & node.getAttribute("ref") & "</li>")
    Set images = node.selectNodes("Images/Image")
    For each image in images
       Response.Write( "<li>Image:"& image.getAttribute("ref") &"</li>" )
    Next
    Response.Write( "</ul>" )
Next

%> 
```

* * *

Anthony Jones 指出，最好是具体的，所以你可能想要改变

```
Set objXML = Server.CreateObject("Microsoft.XMLDOM") 
```

到

```
Set objXML = Server.CreateObject("MSXML2.DOMDocument.3.0") 
```

这仍然适用于最终代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-21T10:06:08.543

是的，不得不在经典的 ASP 中工作偶尔也会让我回到石器时代......我感受到了你的痛苦！

IIRC，在您的第二个代码片段中，您只需要添加：

```
for each node in childNodes
  Response.Write node.nodeName & "  =  " & node.text & "<br />" & vbCrLf
  '***Add the following:
  For Each att in node.Attributes
    Response.Write att.Name & "  =  " & att.text & "<br />" & vbCrLf
  Next
next 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T10:02:06.323

改用 xpath 会容易得多。

```
Dim nodes
nodes = objXML.selectNodes( "//products" )

Dim images

For each node in nodes
    Response.Write( "<ul>" )
    Response.Write( "<li>Ref: " + node.selectNodes( "@ref" ).Text + "</li>" )
    images = node.selectNodes( "images/image" )
    For each image in images
        Response.Write( "<li>Image: " + image.selectNodes( "@ref" ).Text + "</li>" )
    Next
    Response.Write( "</ul>" )
Next 
```

我是一名 JScript ASP 编码员，就像你很久没有做过 VBScript 一样，所以上面的“可能”需要一点润色（我必须去掉所有行末尾的所有“;”，这就是添加它们的习惯），但至少应该为您指明正确的方向。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T10:03:20.610

尝试以下命令来获取图像节点的属性值：

```
node.Attributes.getNamedItem("ref").Text 
```

# unix - 在 unix 环境中拦截系统调用的可能方法是什么？

> ID：892162
> 
> 赞同：6
> 
> 时间：2009-05-21T09:50:06.877
> 
> 标签：unix, system-calls

在 unix 环境中拦截系统调用的可能方法是什么？我正在寻找在 AIX 中做的事情。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T10:32:41.533

不熟悉 AIX，但以下适用于 Linux 和 Solaris。您可以使用 LD_PRELOAD 环境变量，它告诉 ld.so 在 libc 之前加载一个共享库，然后编写您自己的系统调用版本，并可选择调用原始版本。`man ld.so`了解更多信息。类似的东西

```
#include <dlfcn.h>

typedef int (*ioctl_fn)(int, int, void*);

static 
int
my_ioctl(int      fildes,
         int      request,
         void*    argp,
         ioctl_fn fn_ptr)

{
    int result = 0;

    /* call original or do my stuff */
    if (request == INTERESTED)
    {
        result = 0;
    }
    else
    {
        result = (*fn_ptr)(fildes, request, argp);
    }

    return result;
}

/*
 * override ioctl() - on first call get a pointer to the "real" one
 * and then pass it onto our version of the function
 */
int
ioctl(int fildes,
      int request,
      void* argp)
{
    static ioctl_fn S_fn_ptr = 0;

    if (S_fn_ptr == 0)
    {
        S_fn_ptr = (ioctl_fn)dlsym(RTLD_NEXT, "ioctl");
    }

    return my_ioctl(fildes, request, argp, S_fn_ptr);
} 
```

从我周围的一些代码中雕刻出来，如果我做错了，请道歉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T14:49:29.820

好吧，总是有[systrace](http://www.provos.org/index.php?/categories/2-Systrace)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-29T06:53:52.953

我不确定 AIX，但我在 Linux 上做过。在 Linux 上，系统调用表包含在`sys_call_table`数组中。我们需要先找出这张表的地址。现在，这是一件棘手的事情，有多种方法可以做到这一点。

我们可以通过查看 sysmap 文件找到它的地址：

```
punb200m2labs08vm1:/ # cat /boot/System.map-4.4.21-69-default | grep sys_call_table
ffffffff81600180 R sys_call_table 
```

因此，`ffffffff81600180`是`sys_call_table`我机器上的地址。在您的内核模块中，您可以更改与特定系统调用号（您正在更改的）对应的默认函数并将其分配给您自己的函数。

例如，假设您要拦截编号`__NR_open`在 Linux 上的“打开”系统调用。从上面获得 sys_call_table 地址后，只需将您的函数分配给`index __NR_open`of `sys_call_table`：

```
sys_call_table[__NR_open] = your_function; 
```

你在哪里`your_function`实现拦截“开放”系统调用。从现在开始，每一个打开的系统调用都会经过这个函数。

AIX 上的细节会有所不同，但我猜总体思路是相似的。您只需要找出 AIX 特定的过程来实现这一点。

# php - 我在哪里“setcookie”在 Drupal 6 中记录 http_referer？

> ID：892178
> 
> 赞同：1
> 
> 时间：2009-05-21T09:55:58.783
> 
> 标签：php, drupal, drupal-6, cookies, http-referer

我已经让我的 php 设置一个存储访问者来自的 http_referer 的 cookie，但是我如何（或在哪里）将此代码放在我的 Drupal 主题/安装中，以使其在访问者第一次登陆我的 Drupal 时设置 cookie地点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T14:11:16.133

在使用函数 hook_init() 的自定义模块中

# .net - NET 代码“监听”办公应用程序（获取用户提出的事件）

> ID：892187
> 
> 赞同：0
> 
> 时间：2009-05-21T10:01:43.547
> 
> 标签：.net, automation, ms-office, office-2007

我即将重新制作电子学习应用程序。但现在我想把这个新版本提升到一个新的水平。

所以这是场景：用户打开我的应用程序。然后，他/她选择接受最常见的 MS Office 应用程序之一（Word、Excel、Outlook 等）的培训。

我的应用程序将向用户提供操作说明：创建一个新文档、输入一些文本、将其变为粗体、插入图片等。如果操作正确，用户将获得积分。如果不是，记过。

但是（总是有一个但是）要我做到这一点，我必须能够“看到”用户在做什么。我正在使用 NET（2.0 - C# 或 VB，无所谓）。谁能告诉如何做到这一点？我需要处理打开的 Office 应用程序或启动一个新应用程序，然后我必须倾听并评估用户所做的一切。如果用户做错了，我还需要向 Office 应用程序发送说明并为他做/她。

这可能吗？有没有人有一些关于如何执行此操作或类似操作的代码示例？

提前致谢

PS：我真的不想有一个Office插件来完成这个！

编辑：我不想进入 VBA 的原因是我想确保它是可重用的，以帮助用户进一步使用其他应用程序。所以我想要一些方法来创建一个应用程序的监听器并解码用户与它的交互。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T20:28:30.520

Office 的自动化 API 是一个 COM API。您可以从托管 (.NET) 代码中调用它，但这只是增加了一个额外的层并使事情变得更加复杂。我使用 VB/VBA 和 C# 完成了大量的 Office 自动化工作，虽然我喜欢 C# 作为一种语言，但我不得不说，以这种方式驱动 Office 要困难得多。*很多*。（很容易让它在你的机器上工作，至少一次 - 但不要让它愚弄你）。

API 确实允许您捕获某些事件，例如菜单选择、命令栏按钮单击、窗口激活、文档打开/关闭等。您还可以捕获“选择更改”事件，理论上您可以使用它来确定用户的内容是在做。但是，用户可以执行许多您无法捕获的直接操作任务（例如拖放、调整图片大小等），出于您的目的，我想说的是成为一个大问题。

我不得不说我非常怀疑你是否能够按照你的建议去做——至少，还不足以让它变得无缝。而且我认为考虑到您的用户群，它必须非常防弹。

对不起。:-(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T05:36:46.997

实际上有一个为基于计算机的培训应用程序设计的 Windows 钩子，称为 WH_CBT，它在窗口被激活、最小化、移动、调整大小、执行命令、鼠标/键盘事件等时提供通知。

不过，我不会对您撒谎，挂钩是一个相当复杂的主题，但在 .NET 中肯定是可以理解的。请查看以下 MSDN 文章，该文章解释了如何在 .NET 中使用消息挂钩，然后查看以下两个链接以获取有关 WH_CBT 的更多信息。

[前沿：.NET 框架中的 Windows 挂钩](http://msdn.microsoft.com/en-us/magazine/cc188966.aspx)

[MSDN 库：SetWindowsHookEx 函数](http://msdn.microsoft.com/en-us/library/ms644990(VS.85).aspx)

[MSDN 库：CBTProc 函数](http://msdn.microsoft.com/en-us/library/ms644977(VS.85).aspx)

# .net - dotnet：有没有办法直接获取字典中值集合的引用？

> ID：892191
> 
> 赞同：0
> 
> 时间：2009-05-21T10:02:22.717
> 
> 标签：.net, sorting, collections, dictionary

我想根据每个字典项的值对字典进行排序。但是如果我使用排序字典搜索时间复杂度将从常量增加到 log2(n)。所以我想直接将字典中值列表的引用分配给一个列表。然后我可以对该列表进行排序并获得结果。我不想迭代字典的每个元素以将其值添加到列表中，这会增加复杂性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T10:17:34.933

`Dictionary<>.Values`您可以按属性获取值集合。在下面的示例中，您不会循环遍历值，但框架会为您完成。

```
Dictionary<int, Item> items = new Dictionary<int, Item>();
List<Item> values = new List<Item>(items.Values);
values.Sort(); 
```

您还可以为值保留另一个列表，您可以将项目添加到字典和列表中。

# security - 头脑风暴：如何快速为大量垃圾邮件创建蜜罐？

> ID：892193
> 
> 赞同：4
> 
> 时间：2009-05-21T10:03:36.990
> 
> 标签：security, spam, spam-prevention

**问题仍然是开放的...**

对于这里的 IT 人员来说，这可能不是那么难的问题。可能不仅是乍一看；）欢迎所有想法！

对于启动反垃圾邮件项目，每天需要大约 10000 封垃圾邮件，甚至更多。而且（对于 shingle 算法）我们需要六个或更多修改过的邮件来处理同一个垃圾邮件。

请，如果您有想法，请简单地写下您的想法！Аanything 好和不太好，乍一看，想法。这将是头脑风暴！

感谢所有回复！

PS。还要非常感谢 Joel Spolsky 和 ​​Jeff Atwood 的站点，将高级 IT 人员团结在一个互联网位置！这确实是一个可以开始此类主题的最佳站点。

**我们每天需要大约 10000 封垃圾邮件，甚至更多（100 000、1 000 000）！！它必须是工业规模的蜜罐创建技术！**

***请以工业量考虑！！解决方案必须易于扩展！***

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-21T10:44:59.853

一天一万？简单，我会把我得到的发给你。

说真的，虽然在便宜的注册商上注册了一堆域，并使用一个包罗万象的地址 *@domain 来获取任何用户的电子邮件（无论它们是否存在于系统中）。许多垃圾邮件发送者使用常见帐户名称列表访问域：“信息”、“销售”、“网站管理员”等。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-21T10:08:06.153

好吧，我很遗憾地发现，在谷歌上获取您的电子邮件地址是获取大量垃圾邮件的一种非常快速的方法。我在一个站点上以明文形式保存了它，这足以让垃圾邮件发送者抓取它。我想我的地址现在在他们的列表中循环，因为垃圾邮件的数量正在慢慢增加。

也有包含垃圾邮件的免费档案，其中许多可以在[http://www.annexia.org/spam/](http://www.annexia.org/spam/)的链接部分找到。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-21T10:39:33.470

首先，在此处发布您的电子邮件 ID。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-06-19T23:05:47.267

请 Mailinator 或 Project Honeypot 与您分享。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-21T10:51:24.570

许多垃圾邮件都有“退订”链接。我很确定，如果您关注它并输入您的电子邮件地址，您将收到大量新电子邮件的轰炸。

尤其是因为你费心阅读垃圾邮件，你可能是一个很好的目标

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-21T10:34:05.290

过去，我收到了很多出于类似目的的垃圾邮件，通过将电子邮件地址发布到一堆与营销、业务、图像等有关的 usenet 组。但后来我怀疑任何垃圾邮件发送者都不再为 usenet 烦恼了。

另一件事是耐心，一旦您的电子邮件进入列表，垃圾邮件发送者就需要购买它。这可能需要一个月的时间，并且收到的垃圾邮件会随着它的分发而增长一段时间。

另一件事是最终将电子邮件地址放在不安全的 Windows 机器上的邮件文件夹中，然后等待它最终成为僵尸网络的一部分。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-05-21T10:37:01.040

*   注册狡猾的网站（色情等）。如果它们属于狡猾的顶级域，那就更好了。
*   将您的电子邮件以明文形式放在网页上。爬虫将完成剩下的工作。

**编辑**：当我说“狡猾”的顶级域时，我的意思是来自没有反垃圾邮件法律的国家（例如尼日利亚）

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-05-21T10:38:09.493

对于该卷，您可能希望启动一个网络邮件启动并放弃电子邮件帐户。保证您可以访问大量垃圾邮件，但都以您用户的名义。如果您将使用自动化工具处理垃圾邮件，您可能会很清楚隐私（免责声明：我不是律师！），但无论如何您都应该明确您的服务条款。

让人们注册的关键是提供有用的服务：例如，为那些讨厌的“需要注册”网站提供一次性电子邮件地址服务。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-05-21T10:53:16.797

设置一个虚假的 Exchange 服务器，并将其放在没有服务包的网络上。一定会有人来破解它以获得帐户列表。

这似乎是一种复杂而牵强的方法，但具有讽刺意味的是，我曾在一家 ISP 工作过，实际上发生了这种情况（6 年后我仍然收到垃圾邮件）！

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-05-21T11:03:07.977

我猜一个电子邮件地址的平均每天大约是 20 个，所以也许您可以在 Google 群组中发布相当长的电子邮件列表。我想它们都会被垃圾邮件发送者接收。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-05-21T16:45:04.060

您尚未指定是否准备好支付或提供服务以换取大量垃圾邮件。如果是这样，您可能会发现 ISP 愿意转发您被其网络捕获的垃圾邮件。我认识一位 ISP 所有者，他将所有公司 Sophos 安装中的垃圾邮件退回给 Sophos。我们谈论的是每周 10 封或更多的垃圾邮件。这笔钱可能会克服敏感电子邮件泄露的担忧，特别是如果您签署了一些样板的保密和数据处理协议（基本上同意不允许公司以外的任何人阅读您收到的消息，诸如此类）。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-05-21T10:16:26.637

这听起来像是一个人为的答案，但将自己注册到工作网站（带有非常棒但虚假的简历/简历）每天会给你带来相当数量的垃圾邮件。

在许多论坛、新闻组上发布电子邮件并使用它制作一些博客页面。离开 1 个月，然后看着那些慷慨的尼日利亚王子填满你的收件箱。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2009-05-21T16:56:33.740

垃圾邮件发送者交易和出售电子邮件，一旦你在一个名单上，你最终会在所有名单上。回复垃圾邮件也可以保证让你传播得更快，因为它让垃圾邮件发送者知道你是一个“活”的帐户，也很容易回复垃圾邮件。由于您正在寻找可扩展的东西，您甚至可以设计某种自动回复系统，该系统可以简单到“我收到了您的这条消息并且对更多细节感兴趣，请您进一步回复我信息？” 这可能足以引起诈骗者的兴趣，尽管它不会对僵尸网络垃圾邮件做任何事情（因为它大多只是使用电子邮件作为感染媒介或将您重定向到做同样事情的网站）。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2009-05-21T10:58:17.863

在此处发布您的电子邮件地址，我可以将所有垃圾邮件自动转发给您。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-05-21T16:30:31.063

一个词。**使用网**。

垃圾邮件的发源地。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-08-15T21:03:09.907

另一种方法是下载大量垃圾邮件，获取发件人的所有电子邮件地址并回复所有邮件。我不确定它的效率如何，但我确信这是在他们的数据库中获得索引的好方法。如果有人知道在哪里可以下载？，我在这个网站上找到了一些：[http ://www.annexia.org/spam/](http://www.annexia.org/spam/)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2009-05-21T10:46:07.340

使用 Outlook。

您的联系人列表很快就会被盗。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2010-01-02T13:35:54.700

注册一些 419 反诈骗论坛

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2011-06-14T21:15:12.840

我想您可以通过在尽可能多的地方发布电子邮件地址来吸引大量垃圾邮件。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2011-03-06T16:41:35.207

一步步

1.  获取便宜的域名并创建contact@domain.com
2.  在 Google 上搜索“warez”、“性”、“赚钱”、“免费”、“伟哥”、“遇见爱”和“购买学位”，并关闭“安全搜索”。使用此电子邮件注册尽可能多的服务和免费交易或样品。关注附属广告。注册他们的免费优惠。
3.  在 Google 群组、论坛和博客评论中发布您的电子邮件。
4.  收到第一封垃圾邮件时，请点击链接并注册。
5.  Anwser 使用空邮件（这会验证您在他们的系统中的地址）。

如果你花一整天时间这样做，你会很容易地击中 10 000 封垃圾邮件。

# visual-studio - 检出文件 (TFS) 以进行预构建操作

> ID：892195
> 
> 赞同：15
> 
> 时间：2009-05-21T10:04:07.737
> 
> 标签：visual-studio, tfs, tfsbuild

我为 ASP.NET Web 控件（服务器控件）项目添加了预构建操作，该操作在一组 Javascript 文件上运行 jsmin.exe。这些输出文件是源代码控制树的一部分并嵌入到程序集中。

问题是当预构建运行时，jsmin 无法写入文件，因为它是只读的。是否可以事先检查文件？或者我是否被迫在命令行中设置文件的属性。

欢迎对该问题的任何改进解决方案。

**更新** Mehmet 回答的一个小问题 - 您需要在 VS 目录前面添加：

```
"$(DevEnvDir)tf" checkout /lock:none "$(ProjectDir)myfile" 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-21T10:13:35.440

如果您使用的是 Team Foundation Server，则可以使用 Team Foundation[命令行实用程序](http://msdn.microsoft.com/en-us/library/z51z7zy0(VS.80).aspx)(tf.exe) 在预构建期间签出文件，然后在构建后期间重新签入。如果您使用其他东西进行源代码控制，您可以检查他们是否有像 tf.exe 这样的命令行工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T18:26:34.820

如果您不想在构建过程中检查文件（您通常不会这样做），那么我只需在 .js 文件上运行 jsmin 之前设置它们的属性。将文件设置为可读写的最简单方法是使用[MSBuild 社区扩展](http://msbuildtasks.tigris.org/)提供的 Attrib 任务。相同的社区扩展还提供了一个 JSCompress 任务，以便从 MSBuild 轻松调用 JSMin。

因此，您将拥有以下内容（未经测试）：

```
<Import Project="$(MSBuildExtensionsPath)\MSBuildCommunityTasks\MSBuild.Community.Tasks.Targets" />

<!-- rest of TFSBuild.proj file -->

<Target Name="AfterGet">    
  <Message Text="Compressing Javascript files under &quot;$(SolutionRoot)&quot;." />   
  <CreateItem Include="$(SolutionRoot)\**\*.js">
    <Output TaskParameter="Include" ItemName="JsFiles"/>
  </CreateItem>
  <Attrib Files="@(JsFiles)" ReadOnly="false"/>
  <JSCompress Files="@(JsFiles)" />
</Target> 
```

请注意，如果您尝试迁移到增量构建，则在获取文件后修改文件可能会导致问题。

# python - 如何在 python 中构建一个 smtp 客户端？

> ID：892196
> 
> 赞同：0
> 
> 时间：2009-05-21T10:04:53.540
> 
> 标签：python, smtp

在 python 中构建一个 smtp 客户端。它可以发送邮件，还可以显示邮件已通过任何邮件服务（例如 gmail）收到！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T10:43:14.303

[使用email](http://docs.python.org/library/email.html)创建邮件消息（可能带有多部分附件）。

> 该`email`包是一个用于管理电子邮件消息的库，包括 MIME 和其他基于 RFC 2822 的消息文档。

[使用smtplib](http://docs.python.org/library/smtplib.html)发送邮件

> 该`smtplib`模块定义了一个 SMTP 客户端会话对象，该对象可用于将邮件发送到具有 SMTP 或 ESMTP 侦听器守护程序的任何 Internet 机器。

如果您有兴趣浏览远程邮箱（例如，查看您发送的消息是否已到达），您需要可通过已知协议访问的邮件服务。一个流行的例子是[`imaplib`](http://docs.python.org/library/imaplib.html)实现[`IMAP4`协议](http://en.wikipedia.org/wiki/IMAP4)的模块。`IMAP`由[支持`gmail`](http://mail.google.com/support/bin/topic.py?hl=en&topic=12806)。

> 这个 ( `imaplib`) 模块定义了三个类，IMAP4、IMAP4_SSL 和 IMAP4_stream，它们封装了与 IMAP4 服务器的连接并实现了 RFC 2060 中定义的 IMAP4rev1 客户端协议的一个大子集。它向后兼容 IMAP4 (RFC 1730) 服务器，但请注意，IMAP4 不支持 STATUS 命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T10:17:32.767

如果您希望 Python 标准库为您完成工作（推荐！），请使用[smtplib](http://docs.python.org/library/smtplib.html)。要查看发送邮件是否有效，只需打开您的收件箱；）

如果您想自己实现协议（这是作业吗？），请阅读[SMTP 协议](http://www.ietf.org/rfc/rfc0821.txt)并使用例如[套接字](http://docs.python.org/library/socket.html)模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T10:30:51.367

取决于您所说的“收到”是什么意思。可以验证消息“传递”到服务器，但没有 100% 可靠的保证，它实际上最终进入了邮箱。smtplib 将在某些条件下抛出异常（例如远程端报告用户未找到），但远程端通常会接受邮件，然后过滤它或稍后发送退回通知。

# python - 在 Python 中检测和录制音频

> ID：892199
> 
> 赞同：108
> 
> 时间：2009-05-21T10:05:32.587
> 
> 标签：python, wav, audio-recording

我需要将音频剪辑捕获为 WAV 文件，然后我可以将其传递给另一位 python 进行处理。问题是我需要确定何时存在音频然后记录它，当它静音时停止，然后将该文件传递给处理模块。

我认为应该可以使用 wave 模块检测何时有纯静音并丢弃它，然后一旦检测到静音以外的东西开始录制，然后当线路再次静音时停止录制。

只是无法完全理解它，任何人都可以让我从一个基本示例开始。

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2011-07-19T07:24:04.710

As a follow up to Nick Fortescue's answer, here's a more complete example of how to record from the microphone and process the resulting data:

```
from sys import byteorder
from array import array
from struct import pack

import pyaudio
import wave

THRESHOLD = 500
CHUNK_SIZE = 1024
FORMAT = pyaudio.paInt16
RATE = 44100

def is_silent(snd_data):
    "Returns 'True' if below the 'silent' threshold"
    return max(snd_data) < THRESHOLD

def normalize(snd_data):
    "Average the volume out"
    MAXIMUM = 16384
    times = float(MAXIMUM)/max(abs(i) for i in snd_data)

    r = array('h')
    for i in snd_data:
        r.append(int(i*times))
    return r

def trim(snd_data):
    "Trim the blank spots at the start and end"
    def _trim(snd_data):
        snd_started = False
        r = array('h')

        for i in snd_data:
            if not snd_started and abs(i)>THRESHOLD:
                snd_started = True
                r.append(i)

            elif snd_started:
                r.append(i)
        return r

    # Trim to the left
    snd_data = _trim(snd_data)

    # Trim to the right
    snd_data.reverse()
    snd_data = _trim(snd_data)
    snd_data.reverse()
    return snd_data

def add_silence(snd_data, seconds):
    "Add silence to the start and end of 'snd_data' of length 'seconds' (float)"
    silence = [0] * int(seconds * RATE)
    r = array('h', silence)
    r.extend(snd_data)
    r.extend(silence)
    return r

def record():
    """
    Record a word or words from the microphone and 
    return the data as an array of signed shorts.

    Normalizes the audio, trims silence from the 
    start and end, and pads with 0.5 seconds of 
    blank sound to make sure VLC et al can play 
    it without getting chopped off.
    """
    p = pyaudio.PyAudio()
    stream = p.open(format=FORMAT, channels=1, rate=RATE,
        input=True, output=True,
        frames_per_buffer=CHUNK_SIZE)

    num_silent = 0
    snd_started = False

    r = array('h')

    while 1:
        # little endian, signed short
        snd_data = array('h', stream.read(CHUNK_SIZE))
        if byteorder == 'big':
            snd_data.byteswap()
        r.extend(snd_data)

        silent = is_silent(snd_data)

        if silent and snd_started:
            num_silent += 1
        elif not silent and not snd_started:
            snd_started = True

        if snd_started and num_silent > 30:
            break

    sample_width = p.get_sample_size(FORMAT)
    stream.stop_stream()
    stream.close()
    p.terminate()

    r = normalize(r)
    r = trim(r)
    r = add_silence(r, 0.5)
    return sample_width, r

def record_to_file(path):
    "Records from the microphone and outputs the resulting data to 'path'"
    sample_width, data = record()
    data = pack('<' + ('h'*len(data)), *data)

    wf = wave.open(path, 'wb')
    wf.setnchannels(1)
    wf.setsampwidth(sample_width)
    wf.setframerate(RATE)
    wf.writeframes(data)
    wf.close()

if __name__ == '__main__':
    print("please speak a word into the microphone")
    record_to_file('demo.wav')
    print("done - result written to demo.wav") 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2009-05-21T10:39:35.437

我相信 WAVE 模块不支持录制，只是处理现有文件。您可能想查看[PyAudio](http://people.csail.mit.edu/hubert/pyaudio/)以进行实际录制。WAV 是世界上最简单的文件格式。在 paInt16 中，您只会得到一个表示级别的有符号整数，并且越接近 0 越安静。我不记得WAV文件是先高字节还是低字节，但是这样的东西应该可以工作（对不起，我不是真正的python程序员：

```
from array import array

# you'll probably want to experiment on threshold
# depends how noisy the signal
threshold = 10 
max_value = 0

as_ints = array('h', data)
max_value = max(as_ints)
if max_value > threshold:
    # not silence 
```

PyAudio 录音代码留作参考：

```
import pyaudio
import sys

chunk = 1024
FORMAT = pyaudio.paInt16
CHANNELS = 1
RATE = 44100
RECORD_SECONDS = 5

p = pyaudio.PyAudio()

stream = p.open(format=FORMAT,
                channels=CHANNELS, 
                rate=RATE, 
                input=True,
                output=True,
                frames_per_buffer=chunk)

print "* recording"
for i in range(0, 44100 / chunk * RECORD_SECONDS):
    data = stream.read(chunk)
    # check for silence here by comparing the level with 0 (or some threshold) for 
    # the contents of data.
    # then write data or not to a file

print "* done"

stream.stop_stream()
stream.close()
p.terminate() 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-05-05T15:14:56.073

感谢 cryo 的改进版本，我基于以下测试代码：

```
#Instead of adding silence at start and end of recording (values=0) I add the original audio . This makes audio sound more natural as volume is >0\. See trim()
#I also fixed issue with the previous code - accumulated silence counter needs to be cleared once recording is resumed.

from array import array
from struct import pack
from sys import byteorder
import copy
import pyaudio
import wave

THRESHOLD = 500  # audio levels not normalised.
CHUNK_SIZE = 1024
SILENT_CHUNKS = 3 * 44100 / 1024  # about 3sec
FORMAT = pyaudio.paInt16
FRAME_MAX_VALUE = 2 ** 15 - 1
NORMALIZE_MINUS_ONE_dB = 10 ** (-1.0 / 20)
RATE = 44100
CHANNELS = 1
TRIM_APPEND = RATE / 4

def is_silent(data_chunk):
    """Returns 'True' if below the 'silent' threshold"""
    return max(data_chunk) < THRESHOLD

def normalize(data_all):
    """Amplify the volume out to max -1dB"""
    # MAXIMUM = 16384
    normalize_factor = (float(NORMALIZE_MINUS_ONE_dB * FRAME_MAX_VALUE)
                        / max(abs(i) for i in data_all))

    r = array('h')
    for i in data_all:
        r.append(int(i * normalize_factor))
    return r

def trim(data_all):
    _from = 0
    _to = len(data_all) - 1
    for i, b in enumerate(data_all):
        if abs(b) > THRESHOLD:
            _from = max(0, i - TRIM_APPEND)
            break

    for i, b in enumerate(reversed(data_all)):
        if abs(b) > THRESHOLD:
            _to = min(len(data_all) - 1, len(data_all) - 1 - i + TRIM_APPEND)
            break

    return copy.deepcopy(data_all[_from:(_to + 1)])

def record():
    """Record a word or words from the microphone and 
    return the data as an array of signed shorts."""

    p = pyaudio.PyAudio()
    stream = p.open(format=FORMAT, channels=CHANNELS, rate=RATE, input=True, output=True, frames_per_buffer=CHUNK_SIZE)

    silent_chunks = 0
    audio_started = False
    data_all = array('h')

    while True:
        # little endian, signed short
        data_chunk = array('h', stream.read(CHUNK_SIZE))
        if byteorder == 'big':
            data_chunk.byteswap()
        data_all.extend(data_chunk)

        silent = is_silent(data_chunk)

        if audio_started:
            if silent:
                silent_chunks += 1
                if silent_chunks > SILENT_CHUNKS:
                    break
            else: 
                silent_chunks = 0
        elif not silent:
            audio_started = True              

    sample_width = p.get_sample_size(FORMAT)
    stream.stop_stream()
    stream.close()
    p.terminate()

    data_all = trim(data_all)  # we trim before normalize as threshhold applies to un-normalized wave (as well as is_silent() function)
    data_all = normalize(data_all)
    return sample_width, data_all

def record_to_file(path):
    "Records from the microphone and outputs the resulting data to 'path'"
    sample_width, data = record()
    data = pack('<' + ('h' * len(data)), *data)

    wave_file = wave.open(path, 'wb')
    wave_file.setnchannels(CHANNELS)
    wave_file.setsampwidth(sample_width)
    wave_file.setframerate(RATE)
    wave_file.writeframes(data)
    wave_file.close()

if __name__ == '__main__':
    print("Wait in silence to begin recording; wait in silence to terminate")
    record_to_file('demo.wav')
    print("done - result written to demo.wav") 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-04-09T08:01:54.823

```
import pyaudio
import wave
from array import array

FORMAT=pyaudio.paInt16
CHANNELS=2
RATE=44100
CHUNK=1024
RECORD_SECONDS=15
FILE_NAME="RECORDING.wav"

audio=pyaudio.PyAudio() #instantiate the pyaudio

#recording prerequisites
stream=audio.open(format=FORMAT,channels=CHANNELS, 
                  rate=RATE,
                  input=True,
                  frames_per_buffer=CHUNK)

#starting recording
frames=[]

for i in range(0,int(RATE/CHUNK*RECORD_SECONDS)):
    data=stream.read(CHUNK)
    data_chunk=array('h',data)
    vol=max(data_chunk)
    if(vol>=500):
        print("something said")
        frames.append(data)
    else:
        print("nothing")
    print("\n")

#end of recording
stream.stop_stream()
stream.close()
audio.terminate()
#writing to file
wavfile=wave.open(FILE_NAME,'wb')
wavfile.setnchannels(CHANNELS)
wavfile.setsampwidth(audio.get_sample_size(FORMAT))
wavfile.setframerate(RATE)
wavfile.writeframes(b''.join(frames))#append frames recorded to file
wavfile.close() 
```

我认为这会有所帮助。这是一个简单的脚本，它将检查是否有静音。如果检测到静音，它将不会记录，否则它将记录。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-28T23:01:19.967

pyaudio 网站有许多非常简短明了的示例：http: [//people.csail.mit.edu/hubert/pyaudio/](http://people.csail.mit.edu/hubert/pyaudio/)

2019 年 12 月 14 日更新 - 来自 2017 年上述链接网站的主要示例：

```
 """PyAudio Example: Play a WAVE file."""

import pyaudio
import wave
import sys

CHUNK = 1024

if len(sys.argv) < 2:
    print("Plays a wave file.\n\nUsage: %s filename.wav" % sys.argv[0])
    sys.exit(-1)

wf = wave.open(sys.argv[1], 'rb')

p = pyaudio.PyAudio()

stream = p.open(format=p.get_format_from_width(wf.getsampwidth()),
                channels=wf.getnchannels(),
                rate=wf.getframerate(),
                output=True)

data = wf.readframes(CHUNK)

while data != '':
    stream.write(data)
    data = wf.readframes(CHUNK)

stream.stop_stream()
stream.close()

p.terminate() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-21T11:08:23.553

您可能还想查看[csounds](http://www.csounds.com/)。它有几个 API，包括 Python。它可能能够与 AD 界面交互并收集声音样本。

# php - Postgresql 和 PHP：currval 是在多用户应用程序中检索最后一行插入 id 的有效方法吗？

> ID：892200
> 
> 赞同：3
> 
> 时间：2009-05-21T10:05:50.370
> 
> 标签：php, postgresql, insert-id

我想知道我用来检索插入到 postgresql 表中的最后一行的 id 的方式是否有效..

显然，它可以工作，但是当我有许多用户同时在同一个表中添加行时，引用串行序列 currval 值可能会出现问题。

我的实际方法是：

```
$pgConnection = pg_connect('host=127.0.0.1 dbname=test user=myuser password=xxxxx')or die('cant connect');

$insert = pg_query("INSERT INTO customer (name) VALUES ('blabla')");
$last_id_query = pg_query("SELECT currval('customer_id_seq')");
$last_id_results = pg_fetch_assoc($last_id_query);
print_r($last_id_results);
pg_close($pgConnection); 
```

好吧，它只是一个测试自动取款机。但无论如何，我可以通过这种方式看到 3 个问题：

1.  参考customer_id_seq，如果两个用户同时做同样的事情，可能会发生他们都通过这种方式获得相同的ID......或者不是？
2.  我*必须知道*表的序列名称。因为 pg_get_serial_sequence 对我不起作用（我是 postgresql 的新手，可能是配置问题）

有什么建议/更好的方法吗？

ps：我不能使用 PDO，因为似乎缺少事务保存点；我不会使用 zend，最后，我更喜欢使用 php pg_* 函数（也许我会在最后建立我的类）

**编辑：**

@SpliFF（删除了他的答案）：这会更好吗？

```
$pgConnection = pg_connect('host=127.0.0.1 dbname=test user=myuser password=xxxxx')or die('cant connect');

pg_query("BEGIN");

$insert = pg_query("INSERT INTO customer (name) VALUES ('blabla')");

$last_id_query = pg_query("SELECT currval('customer_id_seq')");

$last_id_results = pg_fetch_assoc($last_id_query);

print_r($last_id_results);

//do somethings with the new customer id

pg_query("COMMIT");

pg_close($pgConnection); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-21T10:19:56.817

如果您使用更新版本的 PostgreSQL (> 8.1)，您应该使用 INSERT (和 UPDATE) 命令的 RETURNING 子句。

OTOH 如果您坚持使用其中一种序列操作功能，请阅读[精美手册](http://www.postgresql.org/docs/current/static/functions-sequence.html)。一个指针：“请注意，因为这是返回一个会话本地值，所以它给出了一个可预测的答案，即自当前会话以来其他会话是否已执行 nextval。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T11:42:31.487

在一个事务中插入并检查 curval(seq)。在提交事务之前，您将看到查询的 curval(seq) 并且无论同时插入的其他人。

不记得确切的语法 - 阅读手册（大约 3 年前最后一次使用 pgsql），但通常它看起来像这样：

```
BEGIN TRANSACTION;
INSERT ...;
SELECT curval(seq);
COMMIT; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2010-10-13T15:38:53.430

前任。minsert into log (desc,user_id) values ('drop her mind',6) 返回 id

# eclipse - 如何删除已卸载插件的 Eclipse 透视图？

> ID：892203
> 
> 赞同：37
> 
> 时间：2009-05-21T10:08:14.407
> 
> 标签：eclipse

我正在评估 Eclipse 的 Enterprise IDE 插件，最终决定不购买它。卸载插件后，我留下了一堆无法删除的透视按钮（位于最右上角的按钮）。如何在不破坏我的工作区的情况下手动摆脱？

**编辑**：要清楚，右键单击并“关闭”什么都不做。甚至没有错误消息。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2009-10-10T16:55:18.297

单击`Window ► Preferences ► General ► Perspectives`。选择要删除的透视图并将其移除。其中一些是不可移除的。我不知道为什么。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2009-05-21T10:27:27.987

你是怎么卸载那个插件的？

正如[丹尼尔在](https://stackoverflow.com/users/299199/anonymous-coward)[他的回答](https://stackoverflow.com/a/2494054/6309)中所详述的那样，`Help-> Install new software`-> 点击`"Whats already installed?"`是卸载插件的正确方法，并且也应该摆脱视角。

如果插件安装在`dropins`目录或`<eclipse>/plugins`and`<eclipse>/features`中，你是否删除了 all `directories/jar`in `<eclipse>/features`，因为如果该插件被打包为产品​​，它确实在[产品扩展点](http://help.eclipse.org/ganymede/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/product_def_extpt.htm)中定义了一个[plugin_customization.ini](https://stackoverflow.com/questions/708502/eclipse-rcp-how-to-order-perspective-buttons-belonging-to-different-plugins/708547#708547)，它可以指示一些透视按钮。

如果没有，唯一的解决方案是仔细查看您的工作区元数据，查找与该插件相关的所有最新文件并删除它们。
不过，请先复制您的工作区。

作为仔细查看您的工作区元数据的示例”，[user900975在](https://stackoverflow.com/users/900975/user900975)[他的回答](https://stackoverflow.com/a/7110633/6309)中指出了文件**`<your workspace folder>/.metadata/.plugins/org.eclipse.ui.workbench/workbench.xml`**，其中包含您可以删除的`<perspectives>`元素和子元素。`<perspective>`

* * *

注意：[Eightball在](https://stackoverflow.com/users/187715/eightball)[他的回答](https://stackoverflow.com/a/1548470/6309)（赞成）中提到了列出和删除视角的可能性。

![删除透视](https://i.stack.imgur.com/U7SiJ.png)

由于他提到“其中一些是不可移除的。我不知道为什么”，我上面的原始答案仍然有效。

* * *

[亚历山德罗斯](https://stackoverflow.com/users/309816/alexandros)[在评论中](https://stackoverflow.com/questions/892203/how-do-i-delete-an-eclipse-perspective-for-a-plugin-i-uninstalled/892258#comment84910567_892258)补充道：

> 这帮助我解决了这个问题，但在我的情况下，我在 Eclipse 关闭时必须编辑的文件是：
> 
> ```
> .metadata\.plugins\org.eclipse.e4.workbench\workbench.xmi 
> ```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-06-15T13:06:41.357

我在使用 SVN 存储库探索的剩余透视按钮时遇到了同样的问题。使用关闭选项它不会消失。但是，从 Window -> Close All Perspectives 中选择后它确实消失了。

问候，

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-08-18T16:12:38.050

<您的工作区文件夹>/.metadata/.plugins/org.eclipse.ui.workbench/workbench.xml 包含一个带有 <perspective> 子元素的 <perspectives> 元素。您可以删除 <perspective> 元素，它们将不再出现在工具栏中。Eclipse 在退出时会写入此文件，因此如果您不先退出 Eclipse，您的更改将被覆盖。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-01-05T09:53:25.617

如果您安装了插件，请单击`Help ► Install new software`，然后单击`What's already installed?`右下角的 。卸载你想要的，透视图也将被删除。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-21T13:53:35.480

您也可以尝试使用`-clean`命令行参数启动 Eclipse。这会清除 Eclipse 运行时缓存，因此它也可能会解决您的问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-03-22T16:43:03.963

安装插件后我遇到了同样的问题。答案很简单，即使不是很明显。

1.  开窗 | 优先
2.  单击常规节点
3.  点击观点

在列表中找到透视图，然后选择右侧的删除命令。

列表将刷新，您的视角将被删除。

# css - 如何使用asp的每个页面附加外部样式表

> ID：892205
> 
> 赞同：0
> 
> 时间：2009-05-21T10:08:52.050
> 
> 标签：css, asp-classic

我有一个名为 mystyle.css 的 CSS 文件。我想在 asp 中附加我的应用程序的每一页。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T10:16:05.030

在您的 asp 页面顶部，然后您的页眉页包含 CSS、Javascript 等

通常你会在一个单独的文件中有页眉、页脚，而我的方法曾经是创建一个单一的 asp 页面，然后将代码分成 3 段。

1.  标题
2.  这页纸
3.  我的页脚

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T10:16:49.803

看看[ASP.NET 母版页概述](http://msdn.microsoft.com/en-us/library/wtxbf3hh.aspx)，它可能是您正在寻找的。

> ASP.NET 母版页允许您为应用程序中的页面创建一致的布局。单个母版页定义了您希望应用程序中所有页面（或一组页面）的外观和标准行为。然后，您可以创建包含您要显示的内容的单个内容页面。当用户请求内容页时，他们会与母版页合并以生成将母版页的布局与来自内容页的内容相结合的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T13:37:43.720

你不能这样做。ASP 不支持母版页。

# c# - 单击子报表时的数据库登录提示

> ID：892211
> 
> 赞同：1
> 
> 时间：2009-05-21T10:10:34.947
> 
> 标签：c#, crystal-reports

我有一份报告，当单击链接子报告时，我得到数据库登录表单。我已经提供了所有必要的连接字符串，但它仍然要求登录信息。子报告在我的本地系统中打开，但是当安装在客户端系统中时，我遇到了这个问题。我错过了什么或我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T10:29:14.113

我发现在为水晶报表设置代码中的数据库连接时，您需要在报表数据库定义中的每个表上设置连接。你可以这样做：

```
private static void SetConnectionInfo(ReportClass report, string ReportServer, string ReportDatabase)
{
    TableLogOnInfo tInfo = new TableLogOnInfo();
    ConnectionInfo connectionInfo = tInfo.ConnectionInfo;
    connectionInfo.IntegratedSecurity = true;
    connectionInfo.ServerName = ReportServer;
    connectionInfo.DatabaseName = ReportDatabase;

    foreach (Table t in report.Database.Tables)
    {
        t.ApplyLogOnInfo(tInfo);
    }

    foreach (ReportClass subReport in report.Subreports)
    {
        SetConnectionInfo(subReport, ReportServer, ReportDatabase);
    }
} 
```

# oracle - Oracle 存储过程 OUT 参数

> ID：892215
> 
> 赞同：3
> 
> 时间：2009-05-21T10:11:44.087
> 
> 标签：oracle, stored-procedures, plsql

我有一个带有 IN OUT 参数的存储过程，声明如下：

```
create or replace PROCEDURE RIFATT_SEGN0_INS(pIdRifattSegn0  in  OUT NUMBER,
                           pNumDossier IN VARCHAR2 ,
                           pNumConsegna IN NUMBER,
                           pDtConsegna IN DATE,
[..]

)  AS
[..] 
```

每当我从另一个过程中调用它时，我如何获取也输出的 pIdRifattSegn0 参数？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-21T10:16:08.447

你的问题并不完全清楚。顾名思义，IN OUT 参数是双向传递的。这意味着它必须传递一个变量，而不是文字，你需要一个声明块来做到这一点。例如：

```
declare
  l_segn number;
begin
  l_segn := 1;
  -- procedure will have received value = 1
  rifatt_segn0_ins(l_segn, 'x', 2, sysdate);
  -- procedure may have changed value of l_segn from 1 to something else
  dbms_output.put_line(l_segn); 
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T10:25:44.730

这是一个例子：

```
SQL> create or replace PROCEDURE RIFATT_SEGN0_INS
  2  ( pIdRifattSegn0 IN OUT NUMBER
  3  , pNumDossier    IN     VARCHAR2
  4  , pNumConsegna   IN     NUMBER
  5  , pDtConsegna    IN     DATE
  6  )
  7  as
  8  begin
  9    dbms_output.put_line(pNumDossier);
 10    dbms_output.put_line(to_char(pNumConsegna));
 11    dbms_output.put_line(to_char(pDtConsegna,'yyyy-mm-dd'));
 12    pIdRifattSegn0 := sqrt(pIdRifattSegn0);
 13  end;
 14  /

Procedure is aangemaakt.

SQL> create or replace procedure another_procedure
  2  as
  3    l_IdRifattSegn0 number := 4;
  4  begin
  5    rifatt_segn0_ins
  6    ( pIdRifattSegn0 => l_IdRifattSegn0
  7    , pNumDossier    => '1A'
  8    , pNumConsegna   => 42
  9    , pDtConsegna    => sysdate
 10    );
 11    dbms_output.put_line('from another_procedure: l_IdRifattSegn0 = ' || to_char(l_IdRifattSegn0));
 12  end;
 13  /

Procedure is aangemaakt.

SQL> exec another_procedure
1A
42
2009-05-21
from another_procedure: l_IdRifattSegn0 = 2

PL/SQL-procedure is geslaagd. 
```

问候，罗布。

# iphone - iPhone应用程序开发在基于视图的应用程序中添加子视图

> ID：892217
> 
> 赞同：0
> 
> 时间：2009-05-21T10:12:29.967
> 
> 标签：iphone

我有一个滚动视图，在滚动视图上方有 6 个视图（滚动视图上有 6 个子视图）每个视图都有标签。如何将所有这些视图添加到我的应用程序中，我使用界面构建器来设计这些视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-04-09T21:01:42.453

转到界面生成器，并将六个视图拖到滚动视图中。

# nhibernate - NHibernate 拦截器审计插入的对象 ID

> ID：892220
> 
> 赞同：5
> 
> 时间：2009-05-21T10:13:49.543
> 
> 标签：nhibernate, audit, interceptor

我正在使用 NHibernate 拦截器将有关更新/插入/删除的信息记录到我的各种实体中。

记录的信息中包括实体类型和已修改实体的唯一 ID。`<generator class="identity">`唯一 ID在 NHibernate 映射文件中标记为 a 。

明显的问题是当使用 IInterceptor.OnSave() 记录插入操作时，尚未分配实体的 ID。

如何在记录审计信息之前获取插入实体的 ID？

（我已经查看了 NHibernate Listeners PostSave 事件，但无法让它们与正在使用的 Spring.net 配置一起工作，所以如果可能的话，我想坚持使用拦截器）

代码：

```
 // object id parameter is null...
    public override bool OnSave(object entity, object id, object[] state, 
        string[] propertyNames, IType[] types)
    {            
        AddAuditItem(entity, INSERT);
        return false;            
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-22T15:35:21.740

我通过向我的拦截器类添加一个列表来解决这个问题，该类在`OnSave`实现期间填充了对象。

在`PostFlush`实现中，列表被迭代，每个元素都被审计为插入。此列表中的对象已被持久化`PostFlush()`，因此已生成 ID。

这似乎工作正常，但如果指出任何潜在的陷阱，我将不胜感激:-)

```
public class AuditInterceptor : EmptyInterceptor
{       
    // To hold inserted items to be audited after insert has been flushed
    private IList<object> insertItems = new List<object>();

    public override void PostFlush(System.Collections.ICollection entities)
    {            
        foreach (var entity in insertItems)
        {
            AddAuditItem(entity, INSERT);
        }
        insertItems.Clear();

        base.PostFlush(entities);
    }

    public override bool OnSave(object entity, object id, object[] state, 
        string[] propertyNames, IType[] types)
    {            
        var auditable = entity as IAuditable;
        if (auditable != null) 
            insertItems.Add(entity);

        return false;            
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T10:41:11.313

试试这个`OnFlushDirty`方法..或者也许`PostFlush`

编辑：另外，你可以发布你的代码吗？你不把 Id 作为参数`OnSave`吗？

# php - PHP die() 返回什么

> ID：892222
> 
> 赞同：10
> 
> 时间：2009-05-21T10:15:08.387
> 
> 标签：php, die

在 PHP`die()`中，当我们使用它时是否会给予任何回报？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-05-21T10:19:37.457

在 PHP 中，函数 die() 只是退出运行脚本并打印出参数（如果有的话）。

[http://php.net/die](http://php.net/die)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-21T10:19:39.577

为什么不看看 PHP 的精彩文档呢？它甚至包含有关[die()的信息](http://php.net/die)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-23T02:35:14.640

显然，[`die()`](http://php.net/die)或其等价物[`exit()`](http://php.net/exit)不会向脚本本身返回任何内容；准确地说，这段代码没有多大意义：

```
if (die())) {
    echo 'are we dead yet?';
} 
```

但是，根据您作为`die()`or的（可选）参数传递的内容`exit()`，它*确实*会向调用者返回一些内容，即导致脚本运行的命令。但它的实际用途通常仅限于`cli`SAPI，当您从命令行使用`php /path/to/script.php`.

观察：

```
die('goodbye cruel world'); 
```

此代码将打印`goodbye cruel world`然后返回[退出状态代码](http://en.wikipedia.org/wiki/Exit_status)，`0`向调用者发出进程正常终止的信号。

另一个例子：

```
die(1); 
```

当您传递整数值而不是字符串时，不会打印任何内容，退出状态代码将为`1`，向调用者发出进程未正常终止的信号。

最后，`die()`没有任何参数与`die(0)`.

可以更改进程的退出状态以指示可能发生的不同类型的错误，例如`1`表示一般错误、`2`表示无效用户名等。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-21T10:20:33.477

[它与 exit() 相同](http://mx.php.net/die)，根据文档，它[什么也不返回](http://mx.php.net/manual/en/function.exit.php)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-21T10:20:17.923

它不返回。该脚本被终止，并且不执行任何其他操作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-21T11:35:06.027

没有理由在死亡/退出中返回某些东西。此函数终止内部的 php 解释器进程并将退出代码返回给 shell。因此，在调用 die() 之后，只要没有执行脚本的解释器进程，就没有脚本执行，这就是为什么无法处理函数返回的原因。

# java - 如何在 iPhone 中使用 Base64 解码数据

> ID：892223
> 
> 赞同：3
> 
> 时间：2009-05-21T10:15:27.107
> 
> 标签：java, iphone, decoding

嗨，我的朋友在 java 中使用 Base64 编码标准。

我正在使用 iPhone 如何解码数据。反之亦然。java中有org.apache.commons.codec.binary.Base64.decodeBase64

谢谢迪帕克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T11:01:03.863

TouchCode 有[http://touchcode.googlecode.com/hg/Support/Common/Base64Transcoder.c](http://touchcode.googlecode.com/hg/Support/Common/Base64Transcoder.c) (和.h)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T12:29:36.890

您还可以在这里使用一些非常简单的代码：

[http://www.cocoadev.com/index.pl?BaseSixtyFour](http://www.cocoadev.com/index.pl?BaseSixtyFour)

另一种有趣的方法是使用 OpenSSL：

[http://www.dribin.org/dave/blog/archives/2006/03/12/base64_cocoa/](http://www.dribin.org/dave/blog/archives/2006/03/12/base64_cocoa/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-25T14:05:09.737

使用此代码 [base64](http://github.com/nicklockwood/Base64) (github.com/nicklockwood/Base64)

# windows-ce - CeRunAppAtTime 有效吗？

> ID：892224
> 
> 赞同：3
> 
> 时间：2009-05-21T10:15:28.977
> 
> 标签：windows-ce

我已经在这件事上待了几天，我只是看不到 CeRunAppAtTime 工作。我只想问有没有人让他工作？

任何人都可以发布一个工作代码示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-01-20T10:20:42.230

如果您查看定义 CeRunAppAtTime 的 notify.h，您可能会注意到它已过时且不受支持：

```
//
//Obsolete; provided to maintain compatibility only
//
HANDLE CeSetUserNotification (HANDLE hNotification,
                              TCHAR *pwszAppName,
                              SYSTEMTIME *lpTime,
                              PCE_USER_NOTIFICATION
                              lpUserNotification);
BOOL   CeRunAppAtTime (TCHAR *pwszAppName, SYSTEMTIME *lpTime);
BOOL   CeRunAppAtEvent(TCHAR *pwszAppName, LONG lWhichEvent);
BOOL   CeHandleAppNotifications (TCHAR *pwszAppName); 
```

即使在大多数情况下，它也可能会起作用，但你自己在那里。

建议改用 CeSetUserNotificationEx。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-05T03:27:53.547

CeRunAppAtTime 确实有效，但不幸的是它似乎相当依赖于平台。在某些设备上，它非常不可靠。您可以使用 CeSetUserNotificationEx 来完成同样的事情。我发现它在较新的设备上更可靠，但在某些设备上它也不能很好地工作。我不知道这项特殊任务有什么困难，但许多 OEM 似乎无法正确完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-08T22:51:07.693

似乎必须在您的应用程序启动后将设备设置为完全开机状态，否则它会返回“睡眠”状态。您可以通过调用 SetSystemPowerState 来完成此操作，详见[此处](http://www.koushikdutta.com/2008/07/cerunappattime-cesetusernotificationex.html)

# sharepoint - 在控制台应用程序中执行 SPDatasource 查询？

> ID：892232
> 
> 赞同：0
> 
> 时间：2009-05-21T10:17:46.010
> 
> 标签：sharepoint

是否可以在控制台应用程序中执行`SPDataSource`对象查询以进行测试？

例如：

```
SPDataSource source = new SPDataSource
{
    UseInternalName = true,
    DataSourceMode = SPDataSourceMode.List,
    SelectCommand = "<View/>"
};

source.SelectParameters.Add("WebId", TypeCode.String, "rootweb");
source.SelectParameters.Add("ListName", TypeCode.String, "Contacts");
var c = source.GetView(); 
var d = c.Select(); 
```

我认为上下文信息丢失但不知道如何添加它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T12:55:32.277

我只是在Reflector 中查看了它，它最终创建了一个名为SPDataSourceView 的类，它依赖于SPContext。

由于标记为内部的构造函数，我从未能够从控制台应用程序创建 SPContext。

一种选择是将您的课程放入部署到您的 SharePoint 场的 Web 服务中。然后让您的控制台应用程序调用此 Web 服务。但是，您最好使用开箱即用的 SharePoint Web 服务之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-23T10:55:21.273

我不确定你在这里追求什么，我的意思是

1.  在控制台应用程序中测试您的 SPDataSource（没有像 JD 所说的那样做）
2.  以数据源方式从共享点获取数据。

如果您要使用解决方案 2，则可以使用 linqdatasource 而不是 spdatasource。如果那是你要找的，请参阅我[的帖子。](http://johanleino.spaces.live.com/blog/cns!6BE273C70C45B5D1!328.entry)

# design-patterns - 哪种设计模式可以做到这一点？

> ID：892235
> 
> 赞同：3
> 
> 时间：2009-05-21T10:19:01.450
> 
> 标签：design-patterns, workflow

我有一个类似于工作流程的过程，假设它是这样的：

1.  准备
2.  吃
    *   把你的东西扔进垃圾桶
    *   收拾桌子

现在我想要做的是，即使用户取消了我希望他们“清理桌子”的“吃”事件，“准备”和“把你的东西放到垃圾箱”阶段也是如此。

目前在我的实现中，我必须进行多次检查，有时我最终喜欢调用“清理表”两次，以及当我添加更多步骤时出现的其他一些分支问题。

是否有任何定义明确的设计模式来处理这种流？（*AFAIR有一个我只是不记得它的名字了。*）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-21T10:26:37.880

这可以通过[State 模式](http://www.dofactory.com/Patterns/PatternState.aspx)解决。如果您测试驱动逻辑，它将顺利进行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-21T10:22:50.477

听起来像[模板方法模式](http://en.wikipedia.org/wiki/Template_method_pattern)。

或者你可以通过组合和[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)来做到这一点。

如果你开始有复杂的逻辑，那么[状态模式](http://en.wikipedia.org/wiki/State_pattern)可能会更好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-21T10:24:25.327

如果您在 C++ 中工作：[Resource Acquisition is Initialization](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)。

在没有某种确定性终结的语言（C#、Java 等）中，这个问题通常没有得到很好的解决。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-21T10:23:00.587

在 C#/.NET 中，我们有这种[`IDisposable`](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)模式。我相信你可以用另一种语言实现类似的东西，不管它是否有垃圾收集器（尽管实现会略有不同）。

关于这方面的工作流程，我将遵循 WCF 中 Web 服务的设计模式（即`Begin`和`Cancel`方法）。如果您不认为它对您的情况来说太过分了，那么[Windows Workflow Foundation](http://msdn.microsoft.com/en-us/netframework/aa663328.aspx)可能是最好的选择。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-21T10:34:58.627

状态模式我的朋友是什么将最终使这项工作。

# jquery - 将数组发送到 jQuery UI 对话框

> ID：892242
> 
> 赞同：0
> 
> 时间：2009-05-21T10:20:15.677
> 
> 标签：jquery, asp.net-mvc

我正在创建一个具有邮政编码查找功能的 ASP.NET MVC 应用程序。我从用户那里捕获邮政编码并将其发送到 Web 服务并返回一组地址。我想在 jQuery UI 对话框之类的东西中显示地址数组。然后，用户可以选择返回的正确地址并填充地址字段。这可以使用对话框吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T14:36:42.727

您可以使用 jQuery 注入 HTML，然后弹出对话框，如下所示：

```
function displayAddressList() {
    var url = '<%= Url.Action("List", "Address") %>';
    $.get(url, function(data) {
        $("#PopUp").html(data);
        $("#PopUp").dialog('open');
    });
} 
```

HTML：

```
<div id="PopUp" title="Address List"></div> 
```

因此，如果您的控制器中的后处理程序代码返回一个视图（一个控件），您可以注入它然后弹出对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T10:29:17.453

例如，您需要将数组格式化为 JSON 对象，然后使用 $.getJSON 读取它。使用数组的内容填充组合框很容易。

您可以在 UI 对话框中使用组合框 - 就像组合框始终可见一样。事实上，对话框只是被显示和隐藏的 DOM 的一部分。它与其他 DOM 元素没有任何不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T10:30:36.717

您可以考虑使用文本框控件，如Ben Scheirman 的[“使用 ASP.NET MVC 的 jQuery 自动完成文本框”一文中所述。](http://flux88.com/blog/jquery-auto-complete-text-box-with-asp-net-mvc/)

# model-view-controller - 俄罗斯方块和漂亮的图形

> ID：892244
> 
> 赞同：2
> 
> 时间：2009-05-21T10:20:23.570
> 
> 标签：model-view-controller, graphics, encapsulation

假设您正在构建俄罗斯方块游戏。作为任何合适的程序员，您的视图逻辑在一侧，业务逻辑在另一侧；可能是一个完整的 MVC 正在进行。

当模型发送它的`update()`时，视图会按预期重绘自己。

但是……如果你想添加一个动画来消失一条线，你将如何在视图中实现它？

做出你想要的任何假设——除了“一切都被正确封装”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-21T10:37:40.947

就个人而言，我会尽可能多地单独绘制屏幕，​​即使没有更新块位置。所以我会有一个带有**“更新”**和**“渲染”**部分的循环。更新根据执行或不执行任何位置更新和/或块移除的逻辑进行处理。Render 将球传给图形部分，该部分将块绘制到它们应该在的位置。

现在，如果有要擦除的行，逻辑知道并可以标记这些要删除的行。我在这里假设每一块都由 4 个单个块组成，并且这些块中的任何一个都是一个对象。现在，当此块设置了“die”标志时，您可能需要一些渲染部件来使该块消失（假设 500 毫秒爆炸）。在此时间之后，可以处理对象并且上面一行的块落下。为什么是 500 毫秒？好吧，您绝对应该使用**基于时间的移动**，因为这可以使不同计算机上的游戏速度保持相同。

顺便说一句，已经有所谓的游戏引擎提供这样的更新渲染循环。例如 XNA，如果您使用 .NET 行。您也可以编写自己的引擎，但要注意，这不是一件容易的事，而且非常耗时。我做过一次，没想到它会是像 Source Engine 这样的引擎；-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T10:31:29.693

大多数游戏都会执行一个循环，尽可能快地不断重绘游戏视图，而不是等待模型状态发生变化然后刷新视图。

如果您喜欢模型视图模式，那么视图在某些类型的对象从模型中移除后继续绘制它们并在几毫秒内淡出它们可能会很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T13:48:23.260

另一种方法是将 MVC 类与差异执行之类的东西结合起来——“视图”是所呈现内容的模型，但绘图代码将“视图”创建的事件流与来自先前渲染的流进行比较。因此，如果在一个流中有一条线，而下一条没有，则绘图代码可以为差异设置动画。这允许将绘图从视图中抽象出来。MVC 中的“视图”通常是小部件的集合，而不是直接绘制显示的东西，所以无论如何你最终都会得到嵌套的 MVC 层次结构：应用程序是 MVC（数据模型、视图对象、应用程序控制器），其中视图对象有一个小部件集合，每个小部件都是 MVC（小部件状态（例如按钮按下）、外观/工具包绑定、工具包事件映射 ->

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-31T09:21:46.150

我自己也经常这样想。

我自己的想法一直沿着这条线：

1）视图被赋予了块的状态（形状，yada-yada），但带有额外的“过渡”数据：

2）必须删除一行的事实是在状态中编码的，而不是在视图中计算的。

3) 视图现在知道如何绘制过渡：

*   无变化：此特定块的状态相同
*   从“下降”变为“锁定”：状态“锁定”（通过下降块）
*   从“锁定”更改为“删除”：状态为“已删除”（通过行完成）
*   从“falling”变为“remove”：状态为“removed”，但旧状态为“falling”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-31T09:42:14.767

将游戏视为 MVC 很有趣。这是我从未采取过的观点（出于某种奇怪的原因），但绝对是一个有趣的观点，很有意义。假设您确实使用 MVC 实现了俄罗斯方块游戏，我认为在控制器和视图之间的通信方面您可能需要考虑两件事：状态和事件。

您的控制器显然是用户交互的中心点。当他们发出键盘命令时，您的控制器将解释它们，并进行适当的状态调整。然而，有时游戏会进入与特定事件相吻合的状态......例如用现在应该移除的块填充一行。

Scoregraphic 为您打下了良好的基础。您的视图应该以固定的周期运行，以保持跨计算机的一致速度。但除了更新屏幕以呈现新状态之外，它还应该有一个事件队列，它可以执行动画来响应。在俄罗斯方块中填充线条的情况下，您的控制器可以将派生自某种基本事件类型的强类型事件对象发布到视图事件队列中，然后视图可以使用该对象来执行适当的动画响应。

# c# - 生成 pgp 密钥的问题？

> ID：892249
> 
> 赞同：2
> 
> 时间：2009-05-21T10:24:14.513
> 
> 标签：c#, bouncycastle

我正在使用 RSACryptoServiceProvider 我已经生成了公钥和私钥。它生成的密钥格式如下：

公钥：

```
<RSAKeyValue>
    <Modulus>m9bAoh2...eGNKYs=</Modulus>
    <Exponent>AQAB</Exponent>
</RSAKeyValue> 
```

私钥：

```
<RSAKeyValue>
    <Modulus>m9bAo...ZAIeGNKYs=</Modulus>
    <Exponent>AQAB</Exponent>
    <P>xGj/UcXs...R1lmeVQ==</P>
    <Q>yx6e18aP...GXzXIXw==</Q>
    <DP>NyxvnJ...1xAsEyQ==</DP>
    <DQ>La17Jycd...FhApEqwznQ==</DQ>
    <InverseQ>JrG7WCT...Hp3OWA==</InverseQ>
    <D>RdWsOFn....KL699Vh6HK0=</D>
</RSAKeyValue> 
```

但是使用 PGP Desktop 我已经生成了这样的密钥-

公钥：

```
mQCNBEoOlp8BBACi/3EvBZ83ZduvG6YHu5F0P7Z3xOnpIsaPvTk0q+dnjwDUa5sU 
lEFbUZgDXSz7ZRhyiNqUOy+IG3ghPxpiKGBtldVpi33qaFCCEBiqsxRRpVCLgTUK 
HP2kH5ysrlFWkxTo 
=a4t9 
```

私钥：

```
lQHgBEoOlp8BBACi/3EvBZ83ZduvG6YHu5F0P7Z3xOnpIsaPvTk0q+dnjwDUa5sU 
lEFbUZgDXSz7ZRhyiNqUOy+IG3ghPxpiKGBtldVpi33qaFCCEBiqsxRRpVCLgTUK 
waBnEitQti3XgUUEZnz/rnXcQVM0QFBe6H5x8fMDUw== 
=CVPD 
```

因此，当我传递 PGP Desktop 生成的密钥时，它能够完美地进行加密和解密，但是当我传递 RSACryptoServiceProvider 生成的密钥时，我无法加密和解密？

谁能告诉我如何在 PGP 生成的模式中生成密钥？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-21T15:39:26.673

使用 bouncycastle c# 库这就是我生成密钥对的方式。

```
 public void GenerateKey(string username, string password, string keyStoreUrl)
        {
            IAsymmetricCipherKeyPairGenerator kpg = new RsaKeyPairGenerator();
            kpg.Init(new RsaKeyGenerationParameters(BigInteger.ValueOf(0x13), new SecureRandom(), 1024, 8));
            AsymmetricCipherKeyPair kp = kpg.GenerateKeyPair();

            FileStream out1 = new FileInfo(string.Format("{0}secret.asc", keyStoreUrl)).OpenWrite();
            FileStream out2 = new FileInfo(string.Format("{0}pub.asc", keyStoreUrl)).OpenWrite();

            ExportKeyPair(out1, out2, kp.Public, kp.Private, username, password.ToCharArray(), true);

        }

private static void ExportKeyPair(
            Stream secretOut,
            Stream publicOut,
            AsymmetricKeyParameter publicKey,
            AsymmetricKeyParameter privateKey,
            string identity,
            char[] passPhrase,
            bool armor)
        {
            if (armor)
            {
                secretOut = new ArmoredOutputStream(secretOut);
            }

            PgpSecretKey secretKey = new PgpSecretKey(
                PgpSignature.DefaultCertification,
                PublicKeyAlgorithmTag.RsaGeneral,
                publicKey,
                privateKey,
                DateTime.Now,
                identity,
                SymmetricKeyAlgorithmTag.Cast5,
                passPhrase,
                null,
                null,
                new SecureRandom()
                //                ,"BC"
                );

            secretKey.Encode(secretOut);

            secretOut.Close();

            if (armor)
            {
                publicOut = new ArmoredOutputStream(publicOut);
            }

            PgpPublicKey key = secretKey.PublicKey;

            key.Encode(publicOut);

            publicOut.Close();
        } 
```

它以装甲的 ASCII 格式生成私钥和公钥，例如。

```
-----开始 PGP 公钥块-----
版本：BCPG v1.32

米塞舒7ywEEAKtxKTtGTyUaVxFuWBpziA2l7qDKhe6jznre3DMPuzDnN4Ax573a
7s/bPOkzkK9tEUGFw+BW6F4DkKydv8SQfSN5Vvc0RFMha8X1E8jki1oXTIPA8bKK
dg8ZewZt8+Zwpt5IPAkIydmxDhMjwd71ay3p1ypOfROFPOfc2dBPx/0JAAUTtAdo
YW1zbWFuiJwEEAECAAYFAkoVdAsACgkQEz/ESPB1tojuIQP8CjAzJx8PoIN33pxQ
AfGF+fMCZx8/m7dDBE113aiio25BCvNKOpFwye2UK4ioKN70k24pzkyi8AZO22/s
u6GL7XEiiBZLPynBxJR4A7PzvD3KNqdQUqesu9IkPFyXz3UFH3clR0hnZtZtgnbk
L9dvj5RYVuGiS3Dcf1zoLMOiCdc=
=dfg
-----结束 PGP 公钥块-----

```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-21T10:39:21.380

RSA 和 PGP 是不同的。

你本质上要问的是我如何用柴油运行我的汽油车？答案是你不能。

* * *

您应该查看 PGP CommandLine - 这允许您从命令行执行 PGP 命令。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-04-23T10:00:43.887

感谢您提供的好方法，很长一段时间以来一直在网上为他们服务，

一些更正...

致电后

```
ExportKeyPair(out1, out2, kp.Public, kp.Private, username, password.ToCharArray(), true); 
```

也请致电

```
out1.Close();
out2.Close(); 
```

从上述例程生成的示例私钥

```
-----BEGIN PGP PRIVATE KEY BLOCK-----
Version: BCPG C# v1.6.1.0

lQHqBEvhYOcBBACa5HjZ14ULRvZLKj+rwscQh63Zd9rnfZmVKN5fNsK+ocxxV8rc
TWa6P3knIWCra1lqZ1onNtM8tL1XRuK9pagu7XPjjHUR37ajYv/e0/w9IHlOBtM4
1T3oMM48FBH5WGZswOQnTCHoHpZilx7zeJgcyoUayM9uaWGWVLb6PqAE2QAFE/8D
AwL4BEE4Y+mD6GB0ctnbN4tZuctydODYJUNOK3p+UdgEh5rj5nOelB5h3kqFWdwq
8F3EBxB4guRnLOxIeSjzvFoFpqb4QSrM4brdisaHoK0qgrsyCaQhdepVlz662hSD
5bxJPQqmJ4c9X7x6tTMwDAseoz+VUK9U91iN9jv72hp2dXJYjJvBbkTX9euz2i4P
HrlLV2DuOeGWipsb+sIOuYqpZoK5aMq5AAGTTmmApYam/+0d2lXTt+Cw0FkoN1U+
CWriVFE+x58/MmpqKttlrHyp/c7aRmdxeKheY7QAnKPmTRFZAu6HR/DnLSya6+Qz
MqsYBZAocDs7Bg9U6N79Ynl7mkChoVR4ZwJE/OXgHDRSYlcBwT++frHI06cn1l8t
f0CWU/Z6EuYj/rmgL/v5ln7EQ2H+SRypPxYJKK8dTcu2uk5Ev1x4EOQ2nF1BxBB1
CceSVEimc2TDcVj0K7QIc3BhcmVraDOInAQQAQIABgUCS+FS1wAKCRBHXl7hbFhY
BLInA/9TPwmivxofs7/y4xmrl0X+Ruish0l+KC45/MQGU1bT2MYCR5jefyaUIHMK
gH8bX4DHobBFxtkTXoTgpZmm5JNHGiSQoOXqW7iqHOkp6q6rkwV9BYvfsbjMsfAB
bV7l29CMoMDj1qB3k9CJDP4MuorEI5Qx30x07Mm2+uwcYC2+Ag==
=jh9t
-----END PGP PRIVATE KEY BLOCK----- 
```

再次感谢上述方法。

```
-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: BCPG C# v1.6.1.0

mIsES+Fg5wEEAJrkeNnXhQtG9ksqP6vCxxCHrdl32ud9mZUo3l82wr6hzHFXytxN
Zro/eSchYKtrWWpnWic20zy0vVdG4r2lqC7tc+OMdRHftqNi/97T/D0geU4G0zjV
PegwzjwUEflYZmzA5CdMIegelmKXHvN4mBzKhRrIz25pYZZUtvo+oATZAAUTtAhz
cGFyZWtoM4icBBABAgAGBQJL4VLXAAoJEEdeXuFsWFgEsicD/1M/CaK/Gh+zv/Lj
GauXRf5G6KyHSX4oLjn8xAZTVtPYxgJHmN5/JpQgcwqAfxtfgMehsEXG2RNehOCl
mabkk0caJJCg5epbuKoc6SnqrquTBX0Fi9+xuMyx8AFtXuXb0IygwOPWoHeT0IkM
/gy6isQjlDHfTHTsybb67BxgLb4C
=ZyOZ
-----END PGP PUBLIC KEY BLOCK----- 
```

# asp.net - MembershipUser.ChangePassword 在没有警告的情况下失败

> ID：892256
> 
> 赞同：1
> 
> 时间：2009-05-21T10:26:37.520
> 
> 标签：asp.net, asp.net-membership

如果我调用 user.ChangePassword(oldpass,newpass) 时，旧密码错误，或者新密码不符合提供者的复杂度要求，该方法会在没有警告的情况下失败。有什么办法可以找出是否有错误以及错误是什么。

我总是可以将这些检查放在我的代码中，但应该有一种方法可以使用 Membership APIs

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-21T10:37:34.567

不幸的是没有。该[`ChangePassword`](http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.changepassword.aspx)方法只返回一个简单的布尔值来表示成功/失败。

失败的最佳选择是向用户显示一条通用消息，说明所有可能的失败原因......例如

更改密码失败。
这可能是因为：

*   旧密码不正确
*   新密码未能满足所需的复杂性
*   新密码的长度必须为 8 个字符，并且至少包含 2 个数字字符。（管他呢）

如果您想提供更具体的信息，那么正如您所说，您需要在自己的代码中实现规则检查器，并根据该检查将信息传递给用户。

# oracle - Oracle 中的数据加载

> ID：892262
> 
> 赞同：2
> 
> 时间：2009-05-21T10:29:51.540
> 
> 标签：oracle

我在加载数据时遇到问题。我必须将 800,000 行从一个表复制到 Oracle 数据库中的另一个。

我先尝试了 10,000 行，但花费的时间并不令人满意。我尝试使用“BULK COLLECT”和“INSERT INTO SELECT”子句，但这两种情况的响应时间约为 35 分钟。这不是我想要的响应。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-21T10:43:33.150

阿尼尔班，

使用“INSERT INTO SELECT”是填充表格的最快方法。您可能希望使用以下一两个提示来扩展它：

*   APPEND：使用直接路径加载，绕过缓冲区缓存
*   PARALLEL：如果您的系统有多个 cpu，并且这是一次性操作或在一个“自私”进程消耗更多资源无关紧要时发生的操作，则使用并行处理。

只需在我的笔记本电脑上使用附加提示，即可在 5 秒以下复制 800,000 个非常小的行：

```
SQL> create table one_table (id,name)
  2  as
  3   select level, 'name' || to_char(level)
  4     from dual
  5  connect by level <= 800000
  6  /

Tabel is aangemaakt.

SQL> create table another_table as select * from one_table where 1=0
  2  /

Tabel is aangemaakt.

SQL> select count(*) from another_table
  2  /

  COUNT(*)
----------
         0

1 rij is geselecteerd.

SQL> set timing on
SQL> insert /*+ append */ into another_table select * from one_table
  2  /

800000 rijen zijn aangemaakt.

Verstreken: 00:00:04.76 
```

您提到在您的情况下此操作需要 35 分钟。您能否发布更多详细信息，以便我们了解 35 分钟究竟需要多少时间？

问候，罗布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T10:48:40.207

我同意罗布的观点。Insert into () select 是最快的方法。

你具体需要做什么？如果您尝试通过复制到新表然后删除旧表来重命名表，则最好进行表重命名：

```
alter table
   table
rename to
   someothertable; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T10:53:45.360

INSERT INTO SELECT 是最快的方法。

如果可能/必要，首先禁用目标表上的所有索引。

如果目标表中没有现有数据，也可以尝试 CREATE AS SELECT。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T11:58:31.110

与上面一样，我建议使用`Insert INTO ... AS select ....` or`CREATE TABLE ... AS SELECT ...` 作为在两个表之间复制大量数据的最快方法。

您想在 oracle 文档中查找直接加载插入。这会在您的语句中添加两项：并行和无日志记录。重复测试，但执行以下操作：

```
CREATE TABLE Table2 AS SELECT * FROM Table1 where 1=2;
ALTER TABLE Table2 NOLOGGING;
ALTER TABLE TABLE2 PARALLEL (10);
ALTER TABLE TABLE1 PARALLEL (10);
ALTER SESSION ENABLE PARALLEL DML;
INSERT INTO TABLE2 SELECT * FROM Table 1;
COMMIT;
ALTER TABLE 2 LOGGING: 
```

这将关闭插入到表中的回滚日志记录。如果系统崩溃，则无法恢复，并且您无法对事务进行回滚。PARALLEL 使用 N 个工作线程以块的形式复制数据。您必须试验并行工作线程的数量才能在系统上获得最佳结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-26T21:28:24.710

您要复制的表是否与其他表的结构相同？它有数据还是您正在创建一个新数据？你可以使用 exp/imp 吗？Exp 可以给出一个查询来限制它导出的内容，然后导入到数据库中。您要从中复制的表的总大小是多少？如果您将大部分数据从一个表复制到第二个，您是否可以使用 exp/imp 复制整个表，然后删除不需要复制的行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-27T07:38:36.290

尝试删除目标表上的所有索引/约束，然后在数据加载后重新创建它们。

如果您使用 NOARCHIVELOG 模式，请使用`/*+NOLOGGING*/`提示，或考虑在操作后立即进行备份。

# python - 从 Google App Engine 发送电子邮件

> ID：892266
> 
> 赞同：0
> 
> 时间：2009-05-21T10:31:09.430
> 
> 标签：python, django, google-app-engine, mail-server

我有一个带有 Django 的 Web 服务器，由 Apache 服务器托管。我想为电子邮件服务器配置 Google App Engine。我的网络服务器应该能够使用 Google App Engine，当它使用 EmailMessage 或 Google Mail API 的 sendmail 基础架构发送任何电子邮件时。

我了解到，通过使用 Remote API，我可以从我的主 Web 服务器访问 Google App Engine 服务器。但是，我无法访问 Google App Engine 支持的邮件 API。

远程 API 是否严格用于数据存储？如果是这样，只能从数据库中读取，而其他 API 调用不能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T11:18:57.993

远程 APi 的示例代码为您提供了一个交互式控制台，您可以从中访问应用程序中的*任何*模块。我认为不需要它们只是数据存储操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T17:47:33.573

您可能想要使用第三方 SMTP 中继服务。[这是一个清单](http://www.birds-eye.net/article_archive/smtp_mail_relay_services.htm)。

他们中的大多数都有一个简单的 API，可让您将电子邮件转发到他们的服务。这样，您就不会受到 AppEngine 的限制。更有信誉的还负责处理必要的标头，因此您的应用不会被标记为垃圾邮件发件人（希望它不是:-)

# objective-c - 如何终止等待 @synchronized 目标 C 的线程

> ID：892268
> 
> 赞同：0
> 
> 时间：2009-05-21T10:31:30.180
> 
> 标签：objective-c, multithreading, synchronization

我有一些这样的代码：

```
doDatabaseFetch {
   ...
   @synchronized(self) {
      ...
   }
} 
```

以及许多在用户使用视图时调用 doDatabaseFetch 的对象。

我的问题是，我有一个操作（导航到下一个视图）也需要数据库提取。我的问题是它遇到了相同的同步块并等待轮到它！理想情况下，我希望此操作能够杀死所有等待的线程或赋予该线程更高的优先级，以便它可以立即执行。

苹果这么说

> 退出线程的推荐方法是让它正常退出其入口点例程。尽管 Cocoa、POSIX 和 Multiprocessing Services 提供了直接杀死线程的例程，但强烈建议不要使用此类例程。

所以我不认为我应该杀死线程......但是如果它们正在等待同步块，我怎样才能让它们正常退出？我是否必须编写自己的信号量来处理这种行为？

谢谢！缺口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T13:36:44.360

这里要问的第一个问题——你需要这么大的关键部分，这么多线程等待进入吗？您在这里所做的是序列化并行执行，即再次使您的程序单线程（但速度较慢）。尽可能减少锁定范围，考虑减少应用程序级别的争用，使用适当的同步工具（等待/信号） - 你会发现你几乎不需要杀死线程。我知道这是一个非常笼统的建议，但这样思考确实很有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T13:51:06.657

通常，您不能终止在同步块上等待的线程，如果您需要这种行为，您应该使用定时等待和信号范例，以便线程处于睡眠状态等待并且可以被中断。另外，如果您使用定时等待和信号范例，则每次定时等待到期时，您的线程都有机会不回到睡眠状态，而是退出或采用其他路径（即，即使您不选择终止它们）。

同步块是为无竞争的锁设计的，在无竞争的锁上，同步应该非常接近 noop，但是一旦锁变得有竞争，它们就会对应用程序性能非常不利，甚至不仅仅是因为它们正在序列化你的并行程序。

我无论如何都不是 Objective C 专家，但我确信有一些更高级的同步模式，例如障碍、条件、原子等。

# c# - 如何获得已安装编解码器的列表？

> ID：892277
> 
> 赞同：1
> 
> 时间：2009-05-21T10:36:47.220
> 
> 标签：c#, windows, codec

我正在开发一种软​​件，可以帮助检测看电视的客户上网的问题。我需要知道他们有什么编解码器。如何获取客户的编解码器列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T10:51:34.600

[在 C++ 中有MSDN 上](http://msdn.microsoft.com/en-us/library/aa391078(VS.85).aspx)的示例代码。这不应该太难转换为 C#。

这里有来自某人的示例代码，并在 Windows XP 上进行了[测试](http://www.codeproject.com/KB/audio-video/CCodecList.aspx)。

跟进：[示例 MSDN 代码已移至此处](http://msdn.microsoft.com/en-us/library/dd743771%28v=VS.85%29.aspx)，它现在分别显示音频和视频编解码器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T11:05:07.957

不是直接的答案，而是一种解决方法：无论是否有所需的编解码器（即[K-lite](http://www.codecguide.com/download_kl.htm)），都安装它们。这将修复任何丢失、损坏或过时的编解码器。基本包（实际上不是那么基本）只有 5Mb，对于具有 IP-TV 所需带宽的人来说，这是鸡饲料。

# c# - 条件样式：if (0 == resultIndex) vs if (resultIndex ==0)

> ID：892284
> 
> 赞同：1
> 
> 时间：2009-05-21T10:37:35.190
> 
> 标签：c#

我们大多数人都会写这样的条件：

```
if (resultIndex == 0) 
```

...但偶尔我会遇到有人这样写它们：

```
if (0 == resultIndex) 
```

...有趣的是，这些人都是作家和看似非常热门的编码员。

那么为什么有些人会选择“向后”的风格呢？这背后有什么历史吗？可读性？

* * *

重复：[为什么在 C# 中经常看到“null != variable”而不是“variable != null”？](https://stackoverflow.com/questions/271561/why-does-one-often-see-null-variable-instead-of-variable-null-in-c).

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-21T10:40:30.097

它是 C 的遗留物，其中一个常见的错误是编写

```
if (x = 0) {...} 
```

如果您自学以相反的方式编写这些测试，那么当您输入 == 错误时编译器会抱怨，而不是默默地添加错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-21T10:41:55.493

尽管我似乎找不到 Dup，但之前已经多次询问过这个问题。

从本质上讲，这种风格是 C 的遗留物，其中一个常见的错误是

```
if (c == 5) //Comparison 
```

曾是

```
if (c = 5) //Assignment 
```

在后一种情况下，编译不会抱怨，所以人们这样写是为了减少发生这种情况的可能性

```
if (5 == c) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-21T10:40:00.113

因为（在 C 中，大多数程序员可能都学过；我不记得这在 C# 中是否成立）如果您`=`在“常规”样式中留下一个字符，您将覆盖您尝试比较的值（并且您将检查分配的布尔值）。如果您以“向后”样式执行此操作，则会出现编译器错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-21T10:43:31.340

在 C# 中，整数值不会隐式转换为布尔值，因此会`if (a = 0)`产生编译器错误并且无法编译。因此，这种做法在 C# 中已经过时且完全没有必要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-21T10:43:39.030

我认为这背后的主要原因是为了防止以下错误：

```
if (variable = 0) 
```

您在条件中分配而不是比较的位置。反过来，这会失败的原因是因为表达式的左侧有一个常量。

因此，如果您错误地写：

```
if (0 = variable) 
```

尝试将某些内容分配给常量时会出现编译错误。

在我看来，这更多地与编程风格有关，但对于新程序员来说仍然可能是一个很好的提示。但是，一旦您更有经验，就不会发生诸如此类的错误，如果发生了，您应该能够很容易地找到它们。

# javascript - COMET 相对于长请求轮询的优势？

> ID：892287
> 
> 赞同：6
> 
> 时间：2009-05-21T10:38:25.000
> 
> 标签：javascript, ajax, comet

我一直想知道使用 COMET / push-technologies 是否有真正的优势，而不是更简单的长请求轮询，在这种情况下，服务器将等待某个最长时间让新事件发生，然后再告诉客户端什么都没有发生。

两种技术都有相似的客户端延迟，虽然普遍的看法是长请求更糟糕，因为它们需要建立一个新的连接，还有一个事实是 HTTP 保持活动 - 所以最后，两者似乎都产生了非常相似的流量/负载量。

那么使用 COMET 有什么明显的优势吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-21T11:10:05.357

带有长请求的 AFAIK 轮询几乎是彗星。短请求轮询不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T10:51:31.993

我能想到的一些优点：

*   使客户端编程更容易。
*   真实事件与到达客户端的通知之间的最小延迟。对于轮询，这具有 [POLL TIME]/2 的平均时间和 [POLL TIME] 的最坏情况。
*   可以最小化服务器所需的资源。例如，请参阅这篇[文章](http://www.ibm.com/developerworks/web/library/wa-aj-hiperform/index.html)。为此，需要使用新的服务器技术。

# python - 用鼻子进行单元测试：编译时的测试？

> ID：892297
> 
> 赞同：3
> 
> 时间：2009-05-21T10:40:21.173
> 
> 标签：python, unit-testing, nose

鼻子单元测试框架是否可以在模块的编译阶段执行测试？

事实上，我想用以下结构测试一些东西：

```
x = 123
# [x is used here...]
def test_x():
  assert (x == 123)
del x  # Deleted because I don't want to clutter the module with unnecessary attributes 
```

nosetests 告诉我 x 是未定义的，因为它显然在导入模块后运行 test_x() 。有没有办法在编译阶段让鼻子执行测试，同时让模块在使用它们后释放不必要的资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T11:14:36.893

处理这个问题的一个简单方法是有一个 TESTING 标志，然后写：

```
if not TESTING:
    del x 
```

但是，您不会真正正确地测试您的模块，因为测试将在与您的代码不同的环境下运行。

正确的答案是您不应该真正为手动清理变量而烦恼，除非您实际上因此而遇到了一些主要的性能问题。阅读[Premature Optimization](http://c2.com/cgi/wiki?PrematureOptimization)，这是一个重要的概念。解决您遇到的问题，而不是您可能有一天会遇到的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-24T20:23:12.557

根据nose 的主要开发者Jason Pellerin 的说法，nose 单元测试框架[在编译期间无法运行测试](http://groups.google.com/group/nose-users/browse_thread/thread/5fd8e112fe8f5c88?hl=en)。如果模块“构造”和测试例程都需要访问某个变量（在没有测试的情况下将被删除），这将是一个潜在的烦恼。

一种选择是通过在名称前加上“__”来阻止用户使用任何这些不必要的保存变量（这也适用于类构造中使用的变量：它们可以是这些“私有”全局变量之一）。

另一个可能更干净的选择是将模块专用于该任务：该模块将包含由模块“本身”（即没有测试）及其测试共享的变量（如果不是为了测试）。

这些选项的问题在于，如果没有测试，可以删除的变量被保留在内存中，只是因为测试代码使用它们更好。至少，通过以上两个选项，用户不应该试图使用这些变量，也不应该觉得有必要去想它们是什么！

# jaxb - 为 JAXB 生成的类添加前缀

> ID：892298
> 
> 赞同：12
> 
> 时间：2009-05-21T10:40:26.853
> 
> 标签：jaxb, xjc, class-names

我有这个 Maven“任务”来使用 JAXB 从 XSD 文件生成 Java 类。

```
 <!-- XML to Java classes -->
        <plugin>
            <groupId>com.sun.tools.xjc.maven2</groupId>
            <artifactId>maven-jaxb-plugin</artifactId>
            <executions>
                <execution>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <generatePackage>nl.compay.service</generatePackage>
                <schemaDirectory>src/main/webapp/compay</schemaDirectory>
            </configuration>
        </plugin> 
```

对于 XSD 类型“User”，它会生成一个名为“User”的类 (duh)。但是，我还有一个名为“User”的 JPA 实体类（尽管在不同的包中）。我可以更改上面的 XML 配置，让 JAXB 在生成的类前面加上“XML”之类的前缀吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-24T12:01:42.863

这是一个常见的要求。您可以通过提供一个附加的 JAXB 绑定文件来自定义 JAXB 如何将模式类型名称转换为 Java 类名称来做到这一点。

这些文件通常以扩展名“.xjb”结尾。您需要为您的架构创建一个，例如：

```
<jxb:bindings version="1.0" 
  xmlns:jxb="http://java.sun.com/xml/ns/jaxb" 
  xmlns:xs="http://www.w3.org/2001/XMLSchema" 
  xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc" 
  jxb:extensionBindingPrefixes="xjc">

    <jxb:bindings schemaLocation="nl.company.service.xsd" node="/xs:schema">
        <jxb:schemaBindings>
            <jxb:nameXmlTransform>
                <jxb:typeName prefix="XML"/>
                <jxb:anonymousTypeName prefix="XML"/>
            </jxb:nameXmlTransform>
        </jxb:schemaBindings>
    </jxb:bindings>

</jxb:bindings> 
```

完成后，将 xjb 文件放在构建目录中的某个位置，并告诉 Maven 在翻译过程中使用它：

```
<includeBindings>
    <includeBinding>mybindings.xjb</includeBinding>
</includeBindings> 
```

这里有一个提示：如果您位于包含空格的路径中（例如“Documents and Settings\user\project”），那么 JAXB 将因奇怪的错误而崩溃。

# asp.net-mvc - ASp.NET MVC：TryUpdateModel 不会更新所有属性

> ID：892300
> 
> 赞同：0
> 
> 时间：2009-05-21T10:40:50.177
> 
> 标签：asp.net-mvc, modelbinder

我有以下动作：

```
public ActionResult Create()
{
    var entity = new Employee();
    TryUpdateModel(entity, new[] { "Person.Name", "Code", "CompanyID" });
    if (ModelState.IsValid)
    {
        var result = Service.MergeEmployee(entity);
        return RedirectToAction("List", new { success = true });
    }
    return View("Edit", new SupplierEmployeeModel() { Employee = entity });
} 
```

发生的情况是 TryUpdateModel 没有填充属性“Person.Name”。

这是我的表格：

```
 <fieldset>
    <p>
        <label for="Name"><%=Strings.NAME %></label>
        <%= Html.TextBox("Person.Name", Model.Employee.Person.Name, new { Class = "text" })%>
        <%= Html.ValidationMessage("Name", "*") %>
    </p>
    <p>
        <label for="CompanyID"><%=Strings.SUPPLIER %></label>
        <%= Html.DropDownList("CompanyID") %>
        <%= Html.ValidationMessage("CompanyID", "*")%>
    </p>
    <p>
        <label for="Code"><%=Strings.CODE %></label>
        <%= Html.TextBox("Code", Model.Employee.Code)%>
        <%= Html.ValidationMessage("Code", "*") %>
    </p>
    <p>
        <%= Html.Hidden("ID", Model.Employee.ID)%>
    </p>
    <div id="tabs-DE-actions" class="ui-dialog-buttonpane  ui-helper-clearfix" style="display: block;">
        <button class="ui-state-default ui-corner-all" type="submit"><%=Strings.SAVE%></button>
    </div>
</fieldset> 
```

关于为什么会发生这种情况的任何想法？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-07-23T13:34:38.757

确保 Person 对象在 Employee 构造函数中被初始化；如果它一开始是空的，它可能没有正确更新。

```
public Employee()
{
    Person = new Person();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T12:41:40.353

为了填写 Person.Name，模型绑定器必须创建一个新的 Person。您是否为模型绑定器提供了足够的信息来做到这一点？或者，在绑定之前尝试自己创建 Person。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T10:52:44.877

尝试这个：

```
 TryUpdateModel(entity,"Person", new[] { "Name", "Code", "CompanyID" }); 
```

# c# - Sharepoint 和 .Net 开发的区别？

> ID：892302
> 
> 赞同：2
> 
> 时间：2009-05-21T10:41:31.203
> 
> 标签：c#, .net, sharepoint, project-planning

使用 .Net Framework、Asp.net 开发应用程序和使用 Sharepoint（MOSS 或 WSS）开发应用程序有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T10:45:06.593

Sharepoint 是建立在 .NET 和 ASP.NET 之上的协作工具。为 Sharepoint 开发应用程序意味着您仍然需要熟悉 ASP.NET 和 .NET 框架，还需要熟悉 Sharepoint 基础结构/API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T13:01:16.147

我强烈建议您查看此线程以了解各种痛点：

[https://stackoverflow.com/questions/256407](https://stackoverflow.com/questions/256407)

由于 SharePoint 是基于 ASP.NET 构建的，因此可以说您可以使用 ASP.NET 做的任何事情都可以使用 SharePoint 做，但现实情况是，为 SharePoint 开发应用程序不适合胆小的人，您应该期待更长的时间开发周期，特别是如果您是该平台的新手。我建议您对 Google、StackOverflow 和 .NET Reflector 非常熟悉，因为您需要了解的很多内容不在文档中或很难找到。

但这并不全是坏事。您可以获得许多开箱即用的基础设施，例如身份验证、数据版本控制（如果您将数据存储在列表中）以及传入/传出电子邮件连接等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T21:12:31.180

取决于你真正想做什么样的事情。SharePoint 中有许多要点可供您构建。对于简单的要求，这些开发点之一就足够了，但对于 SharePoint 上的典型业务应用程序，您可以使用工作流、事件接收器、计时器作业、Web 部件、网站和列表等功能的组合。C# 代码可以在工作流、事件接收器、附加到信息路径表单的代码隐藏库中运行。

本质上，SharePoint 为您提供了一个协作平台，可以在此基础上进行开发以实现各种功能。请注意，它肯定不像直接 C# 开发那样轻松，并且需要大量技术，因此需要大量新的学习。然而，这对我来说是一次非常有益的经历。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T10:50:24.367

SharePoint 正在使用具有非常长的功能列表的系统内部的罐装但可修改的网站模板 (WSP)，包括对数据存储（列表）、模板引擎、工作流功能等的抽象。

另一种是从头开始定制开发网站。

你可以同时拥有它。SharePoint 本身是使用 ASP.NET 2.0 构建的，因此您可以在 SharePoint 内部托管 aspx 和一些努力的 ascx 页面。一旦进入 SharePoint，任何自定义编写的 .NET 代码都可以利用 SharePoint 对象模型。如果从一开始就计划将自定义应用程序托管在 SharePoint 中，则此方法效果最佳。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-21T10:45:21.383

部署您的解决方案。SharePoint 使用 WSP 文件，而 ASP.Net 支持复制/粘贴。

将 SharePoint 视为位于 ASP.Net 之上的框架。使用这个框架是有规则的，尽量遵守规则。

# java - 如何在序列化世界中保证 Java 实例控制（没有枚举）？

> ID：892304
> 
> 赞同：4
> 
> 时间：2009-05-21T10:41:47.787
> 
> 标签：java

在 Java 1.5 之前的世界中（所以 no `enum`）并且我的对象被序列化，我如何才能强制执行正确的实例控制？我说的是这样的类，据我所知，我不确定 instance0 和 instance1 是否永远是唯一的实例。

```
import java.io.Serializable;

public final class Thing implements Serializable {

    private static final long serialVersionUID = 1L;

    public static final Thing instance0 = new Thing();
    public static final Thing instance1 = new Thing();

    private Thing(){};
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-21T10:45:55.250

你真的应该看看[Effective Java](https://rads.stackoverflow.com/amzn/click/com/0201310058)。关于 Singleton 的章节在某种程度上解决了这个问题，并且有一章关于 Typesafe Enum 模式，这绝对是对`enum`实现方式的影响。

简短的回答是您必须实施`readResolve`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T10:48:51.720

如果我对您的理解正确，那么您正在寻找的是接受 Joshua Bloch 的建议并实现 readResolve 方法以返回您的常量实例之一。

```
private Object readResolve() throws ObjectStreamException {
  return PRIVATE_VALUES[ordinal];  // The list holding all the constant instances
} 
```

# c# - 在 C# 中创建大型二进制文件的 Delta Diff 补丁

> ID：892310
> 
> 赞同：6
> 
> 时间：2009-05-21T10:43:42.447
> 
> 标签：c#, .net, diff

我正在寻找一种方法来创建大型二进制文件（VMWare 虚拟磁盘文件）的 Delta Diff 补丁。是否有 C# 中的实现或 .NET Framework 中的任何有用方法。

任何帮助表示赞赏。谢谢。

雷特

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-12-30T00:12:45.270

[bsdiff](http://www.daemonology.net/bsdiff/)旨在为二进制文件创建非常小的补丁。

如其页面所述，它需要`max(17*n,9*n+m)+O(1)`字节的内存并`O((n+m) log n)`及时运行（其中`n`是旧文件`m`的大小，是新文件的大小），因此需要很长时间并使用大量内存来创建虚拟磁盘文件的差异。

最初的实现是用 C 语言实现的，但是这里描述了一个 C# 端口[，](http://code.logos.com/blog/2010/12/binary_patching_with_bsdiff.html)并且可以[在此处](https://github.com/LogosBible/bsdiff.net)获得。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-21T10:46:36.997

框架中没有内置任何内容来执行此操作。

您将不得不寻找商业或免费的第 3 方解决方案，或者自己编写。

一个常见的算法是[VCDiff](http://www.faqs.org/rfcs/rfc3284.html)算法，它被相当多的产品使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-02-23T21:59:54.870

这是一个实现 Meyers O(ND) 差分算法的 C# 类：

[http://www.mathertel.de/Diff/default.aspx](http://www.mathertel.de/Diff/default.aspx)

享受！

# algorithm - 具有验证的唯一 CD-KEY 生成算法

> ID：892314
> 
> 赞同：5
> 
> 时间：2009-05-21T10:45:11.057
> 
> 标签：algorithm, primary-key, unique

我正在尝试创建一个独特的 CD-KEY 放入我们产品的包装盒中，就像用户用来注册产品的标准软件盒中的普通 CD-KEY 一样。

但是，我们不销售软件，我们销售用于犯罪和医疗目的的 DNA 采集工具包。用户将通过邮件收到带有 CD-KEY 的唾液收集工具包，他们将使用该 CD-KEY 在我们的网站上创建一个帐户并获得结果。测试结果将链接到 CD-KEY。这是我们必须将结果与患者联系起来的唯一方法。因此，重要的是它不会失败:)

其中一项要求是 CD-KEY 列表必须充分“分散”开，这样就不可能有人输入了错误的 CD-KEY 并且仍然将其批准用于其他工具包，从而混淆了两个工具包。这可能会让我们承担数千美元的责任。

比如不能是
00001
00002
00003这样的递增的数字序列
……
原因是如果有人收到了00002套件，但不小心注册为000003，那么他的结果会匹配到其他人。所以它必须像信用卡号码......除非输入有效序列，否则您随机命中有效号码的机会是百万分之一......

此外，我们每年向各种供应商销售超过 50,000 个套件（他们将使用我们的算法生成自己的 CD-KEYS），因此我们无法维护所有先前发行的 CD-KEYS 的列表以检查是否重复。该算法必须生成唯一的 CD-KEY。

我们还需要能够使用快速检查算法验证 CD-KEY 是否有效，以便我们可以通知用户他输入的代码是否无效。这留下了我相信的许多散列或 MD5 算法。它不可能是 128 位，因为谁会花时间在电脑屏幕上输入它？

到目前为止，这就是我认为最终 CD-KEY 结构的样子

（4 个字符产品代码）-（4 个字符经销商代码）-（12 个字符唯一，可验证的 CD-KEY）

例如。384A - GTLD - {4565 - FR54 - EDF3}

为了确保 KEYS 的唯一性，我可以将当​​前日期 (20090521) 作为来源的一部分。我们每周生成唯一键的次数不会超过一次，因此这个值经常变化，足以达到唯一初始值的目的。

我可以使用什么算法来生成唯一密钥？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-21T16:48:48.247

创建字符串`<providername>000001`,`<providername>000002`等或其他任何内容并使用公钥对其进行加密，这就是用户输入的“CD-KEY”。使用私钥解密 CD-KEY 并验证在解密时您是否获得了具有有效提供者名称的有效字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T10:59:00.497

信用卡号码使用[Luhn 算法](http://en.wikipedia.org/wiki/Luhn_algorithm)，您可能想查看类似的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T11:16:58.900

我使用 SeriousBit Ellipter[链接](http://ellipter.com/)进行软件保护，但我看不出有任何理由您可以每周生成一组唯一密钥，并且当您进入您的网站时，我们的库会验证密钥的有效性。您还可以将可选服务编码到密钥中，以便您控制如何从密钥处理样本（如果您有不同的服务级别）。

由于它首先使用加密的密钥生成方法并且相对便宜，因此我会说它当然值得一看。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-02-04T05:36:10.217

我终于选择了这种形式的 cd-key

```
<TIMESTAMP>-<incremented number>-<8 char MD5 hash>-<checksumdigit> 
```

我使用了 mod 11 ISBN 校验和数字算法。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-21T12:04:36.573

生成 GUID 并为其连接一个随机数。GUID 保证是唯一的，随机数将使其不可能意外命中代码。只是不要以任何方式修改 GUID，否则您可能会损害其唯一性。

[http://msdn.microsoft.com/en-us/library/aa475087.aspx](http://msdn.microsoft.com/en-us/library/aa475087.aspx)

# javascript - 是否有内置的 JavaScript 函数来处理时间字符串？

> ID：892319
> 
> 赞同：0
> 
> 时间：2009-05-21T10:46:18.057
> 
> 标签：javascript, datetime

制作像“2009-05-02 00:00:00”到“2009-05-02”这样的时间。

我知道我可以通过正则表达式来实现这一点，但是有没有内置函数可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T10:53:48.027

没有内置的日期函数可以做到这一点。事实上，如果您在 JavaScript 中使用该日期格式创建一个新的 Date 对象，则会收到 Invalid Date 错误。

在这种情况下，您使用正则表达式或字符串操作是正确的。

这是所有[JavaScript 日期函数](http://www.w3schools.com/jsref/jsref_obj_date.asp)的列表。

简单地获取字符串的日期部分并显示它而不转换为日期对象。你可以简单地这样做：

```
var dateString = "2009-05-02 00:00:00"
alert(dateString.substring(0,10)); // Will show "2009-05-02" 
```

要将此字符串转换为正确的 JavaScript 日期对象，您可以使用[以下代码段](http://snippets.dzone.com/posts/show/4132)：

```
function sqlTimeStampToDate(timestamp) {
    // This function parses SQL datetime string and returns a JavaScript Date object
    // The input has to be in this format: 2007-06-05 15:26:02
    var regex=/^([0-9]{2,4})-([0-1][0-9])-([0-3][0-9]) (?:([0-2][0-9]):([0-5][0-9]):([0-5][0-9]))?$/;
    var parts=timestamp.replace(regex,"$1 $2 $3 $4 $5 $6").split(' ');
    return new Date(parts[0],parts[1]-1,parts[2],parts[3],parts[4],parts[5]);
  } 
```

格式为“ddd MMM dd YYYY hh:mm:ss”+ TimeOffSet，但您可以使用任何标准的 JavaScript 日期函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T14:37:11.040

请参阅下面的两种简单方法来从初始格式“ *2009-05-02 00:00:00 ”获取日期格式“* *2009-05-02* ”。

 *```
<script type="text/javascript">
var mydate, newdate1, newdate2;

mydate = "2009-05-02 00:00:00";

newdate1 = (mydate.split(/ /))[0];
alert('newdate 1: ' + newdate1);

newdate2 = mydate.substr(0,10);
alert('newdate 2: ' + newdate2);
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T11:03:42.390

您可能会发现这很有帮助：

> 返回今天的日期和时间
> 如何使用 Date() 方法获取今天的日期。
> 
> getTime()
> 使用 getTime() 计算自 1970 年以来的年数。
> 
> setFullYear()
> 如何使用 setFullYear() 设置特定日期。
> 
> toUTCString()
> 如何使用 toUTCString() 将今天的日期（根据 UTC）转换为字符串。
> 
> getDay()
> 使用 getDay() 和一个数组来写一个工作日，而不仅仅是一个数字。

这是来自 www.w3schools.com 的复制粘贴，因为我无法发布指向它的链接...

或者只是在 Google 上搜索“JavaScript 日期函数”或相关内容。正则表达式用于匹配字符串的特定部分，这在搜索、提取和替换中很有用，实际上并不能帮助您格式化日期。

# javascript - 如何隐藏某个类没有下一个元素的元素？

> ID：892325
> 
> 赞同：0
> 
> 时间：2009-05-21T10:48:10.877
> 
> 标签：javascript, jquery, html

我有以下 html ，我想使用 jquery 隐藏所有没有下一个元素的 lsHeader 与类联系人。

```
<div id="B" class="lsHeader">B</div>
  <div id="contact_1" class="contact"> B.Contact1</b/>
  <div id="contact_2" class="contact"> B.Contact2</b/>
  <div id="contact_3" class="contact"> B.Contact3</b/>
  <div id="contact_4" class="contact"> B.Contact4</b/>
  <div id="contact_5" class="contact"> B.Contact5</b/>
<div id="C" class="lsHeader">C</div>
  <div id="contact_6" class="contact"> C.Contact6</b/>
  <div id="contact_7" class="contact"> C.Contact7</b/>
  <div id="contact_8" class="contact"> C.Contact8</b/>
  <div id="contact_9" class="contact"> C.Contact9</b/>
  <div id="contact_10" class="contact"> C.Contact10</b/>
<div id="D" class="lsHeader">D</div>
<div id="F" class="lsHeader">F</div> 
```

**笔记**

lsHeader 没有孩子，我想根据下一个元素进行检查。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-21T11:14:46.270

那这个呢：

```
$(".lsHeader").each(function() {
    if (!$(this).next().is("div.contact")) {
        $(this).hide();
    }
}); 
```

根据您的具体需求，您可能希望将 next 替换为 nextAll。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T11:22:10.513

您是否正在生成 (X)HTML？如果是这样，那么：

```
<style>.IsHeader.empty {display: none;}</style>
<div id="D" class="lsHeader empty">D</div> 
```

# jquery - 检查 div 是否包含 jQuery 中的元素

> ID：892329
> 
> 赞同：7
> 
> 时间：2009-05-21T10:49:34.293
> 
> 标签：jquery, html, drag-and-drop

我在 jQuery 中构建了一些拖放小部件，一旦它们被删除，我需要检查我的可拖放小部件是否在另一个 div 中。

```
<div id="droptarget">
    <div class="widget">I'm a widget!</div>
</div> 
```

我看过`$('#droptarget').each`但似乎无法弄清楚。有任何想法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-21T10:59:40.607

如果要选择外部 div：

```
$("#droptarget:has(div.widget)") 
```

如果要选择小部件：

```
$("#droptarget > div.widget") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T10:58:09.610

我会从

```
if ($ ('#droptarget .widget')) {
  // do something
} 
```

# asp.net-mvc - 强类型视图差异（MVC 源与程序集）

> ID：892332
> 
> 赞同：1
> 
> 时间：2009-05-21T10:50:09.190
> 
> 标签：asp.net-mvc, view, views, strong-typing

我正在尝试创建一个强类型的局部视图

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master"     Inherits="System.Web.Mvc.ViewPage<IEnumerable<Pt.Data.Services>>" %>
<table>
  <% foreach (Pt.Data.Services item in Model)
       { Html.RenderPartial("ServiceItem",item); } %>
</table> 
```

在控制器中：

```
IEnumerable<Services> Model=null;
using (tl ctx = new tl(Config.ConnectionString))
{
    Model = ctx.Services.ToList();
}
return View("List",Model); 
```

在引用二进制程序集的项目中运行时，这很有效`System.Web.Mvc`。

但是，如果我删除二进制程序集并添加一个带有 MVC 源代码的项目进行调试，它就会停止识别强类型视图。

它的工作方式`ViewPage`类似于`ViewPage<TModel>`

结果我得到了错误：

> 编译器错误消息：CS1579：foreach 语句无法对“object”类型的变量进行操作，因为“object”不包含“GetEnumerator”的公共定义`

为什么这适用于已编译的 MVC，但不适用于源代码？以及如何使源正确运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-21T18:01:36.183

您是否在 ~/Views/Web.config 中更改了这一行：

```
<pages validateRequest="false"
       pageParserFilterType="System.Web.Mvc.ViewTypeParserFilter,
                             System.Web.Mvc, Version=1.0.0.0, Culture=neutral,
                             PublicKeyToken=31BF3856AD364E35"
       pageBaseType="System.Web.Mvc.ViewPage, System.Web.Mvc, Version=1.0.0.0,
                     Culture=neutral, PublicKeyToken=31BF3856AD364E35"
       userControlBaseType="System.Web.Mvc.ViewUserControl,
                            System.Web.Mvc, Version=1.0.0.0, Culture=neutral,
                            PublicKeyToken=31BF3856AD364E35"> 
```

对此？：

```
<pages validateRequest="false"
       pageParserFilterType="System.Web.Mvc.ViewTypeParserFilter,
                             System.Web.Mvc, Version=1.0.0.0, Culture=neutral,
                             PublicKeyToken=NULL"
       pageBaseType="System.Web.Mvc.ViewPage, System.Web.Mvc, Version=1.0.0.0,
                     Culture=neutral, PublicKeyToken=NULL"
       userControlBaseType="System.Web.Mvc.ViewUserControl,
                            System.Web.Mvc, Version=1.0.0.0, Culture=neutral,
                            PublicKeyToken=NULL"> 
```

实际上这个史蒂夫桑德森的[帖子](http://blog.codeville.net/2009/02/03/using-the-aspnet-mvc-source-code-to-debug-your-app/)可能会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T10:58:14.977

我不知道可能导致引用的源项目的行为与其自己的构建输出（程序集）不同的原因。**我仍然可以推荐：**
1-确保您使用的源与组件的构建源相同。
2-确保您添加了对源项目的引用。
3- RC 在您的解决方案文件上，选择干净的解决方案，然后重建并重试。

# c# - 是否有用于解析 .MSG 文件的免费库？

> ID：892339
> 
> 赞同：1
> 
> 时间：2009-05-21T10:51:42.383
> 
> 标签：c#, email

我看过一些使用 Apose.Network 库的示例，但每次只需 599 美元，我的客户不会同意

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T11:08:28.310

好建议：[从 .msg 文件中读取](https://stackoverflow.com/questions/15880/read-from-msg-files)。

# process - 开发和业务团队 - 您是如何成功弥合差距的？

> ID：892344
> 
> 赞同：-2
> 
> 时间：2009-05-21T10:53:40.867
> 
> 标签：process, project-management, development-process

我希望对此进行一些健康的讨论，而不是`specific`解决方案，因此我将在社区 Wiki 上讨论它，因为它是一个相当主观的话题。感谢它是否可以作为有用的资源保持开放。

最近，我接任了一个小型技术团队的开发经理。

业务/营销/设计团队与技术团队的比例大约为 4:1，因此您可以想象，尝试将技术团队与一连串的需求隔离开来需要做很多工作。

为此，我们制定了一些适当的流程，使用 SCRUM 进行项目开发，要求业务团队成员填写适当的需求文档、用例等......

在我们第一个主要版本发布后的几周内，我们将向业务团队介绍正确的 UAT 流程、问题报告和变更请求流程以及我们自己改进我们的问题分类和错误修复程序。但正如您可以想象的那样，对于所有相关人员来说，这是一个非常陡峭的学习曲线和思维方式的转变。

只是从技术社区（开发人员、团队领导和开发经理）那里寻找一些一般性的反馈，他们经历过类似的事情以及他们如何处理任何特定的障碍。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T11:48:19.320

一个关键问题是如何确定请求的优先级，每个用户都希望他们的请求首先完成。解决方案是某种定价机制。如果您的部门被视为自助餐，他们昨天会想要所有东西，他们的要求将没有限制。另一方面，如果他们需要在工作开始之前提交请求并为其分配价格，他们会在提出无聊和琐碎的请求之前三思而后行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T11:49:43.500

这是第 1 个障碍点。

> 我的要求对于你的小障碍和箍来说太重要了。我懒得浏览您令人费解的“流程”和“文档”。我只是有一个简单的事情，我只需要现在就告诉开发人员。

这个障碍点几乎是无法避免的。 *每个人都*知道，他们的需求超越了流程、工程、纪律、治理和质量保证。

敏捷性的重点是让这种情况以可控的方式发生。

鼓励对话。让他们发泄。积极地创建、更新和优先处理积压工作。

通过关注积压工作，您可以——在一定程度上——规避营销人员跑进开发人员的工作空间，立即对生产代码进行“紧急手术修复”。这是一场危机。每个人都恐慌！

**战争故事。**

我们正在竞标重新设计一个糟糕的代码泥潭。在与用户会面期间，用户想知道新应用程序是否允许立即修复。

我想说“嘿 dingbat！由于立即修复，您现在陷入困境！”

相反，我说，“根据最佳质量保证实践，我们将尽快做出改变。我们希望做出响应。但是......”

文化很难改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T15:45:53.680

第一件事是永远不要例外，做一些没有正确提交到新系统的事情。除非您强制执行，否则他们将永远学不会使用新系统。尤其是在过程开始时，确实需要坚固性。令人惊讶的是，一旦他们实际上需要做更多的工作而不仅仅是一个电话，那么请求的数量就会减少。

二是公布优先名单。如果需要将优先级列表向上移动，客户端（在这种情况下为内部客户端）可以仅将其移动到他自己的东西之上（当然假设如果任务 A 没有首先完成，它可以完成）。如果他需要它超越其他人，他必须得到所有其他工作在他之前的人的同意。这不是你做的，而是他做的。这将减少优先事项的转移。它还将节省您的时间和争论。每个内部客户都可以单独与您交谈以设置他们自己的优先级，但您可以控制整个列表。一旦开发人员开始了一项任务，如果可能的话（并且不亚于生产问题导致系统瘫痪），请确保他在转移到下一个最高优先级之前完成了该任务。

您应该保留确定是否存在需要改变优先级的真正紧急情况的权利。这应该只发生在生产停止并且系统不能被很多人使用的情况下（一个人无法登录并不是紧急情况，除非它是 CEO！）。在这种情况下，请务必告诉内部客户他们的工作被推迟了。沟通是关键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T15:36:09.447

我是一名在业务方面工作了一段时间的工程师。

关键是让商业人士经常与您互动。倾听，提出问题，内化他们正在讨论的内容的价值。你想让每个人都觉得你是他们的私人礼宾，在整个过程中帮助 Shepard 提出他们的要求。

有了这些信息，您就可以更有效地开展敏捷开发流程——您的业务团队将对流程和功能管道开发充满活力和信心。

# java - 是否有针对 Java 中 XA 事务文件访问的开源解决方案？

> ID：892349
> 
> 赞同：7
> 
> 时间：2009-05-21T10:55:35.543
> 
> 标签：java, file, transactions, filesystems, jta

是否可以对 Java 中的文件系统进行 XA 事务访问？我想在事务边界内操作文件，并且我的事务必须通过 JTA 参与分布式事务（所以我猜文件系统需要作为 XAResource 访问）。我不需要支持细粒度的读/写文件访问；将每个文件视为记录足以满足我的需求。

有人知道已经这样做的开源项目吗？我不想为了发现它已经完成而实施这个烂摊子......

我听到一些传言说 JBoss Transcations 会增加对此的支持（例如参见[这个讨论](http://jboss.org/community/wiki/TransactionalFileIO)），但找不到关于这个的官方声明。

顺便说一句，如果您需要事务文件访问但不需要事务参与两阶段提交，我建议您查看[Apache Commons Transaction](http://commons.apache.org/transaction/file/index.html)

可以在[这里](http://java.sys-con.com/node/37798)找到一篇关于所涉及的复杂性的好文章。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-03-16T20:50:38.813

[XADisk](http://xadisk.java.net/)可以为您提供所需的内容。它是免费和开源的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-21T13:30:45.403

在 JBoss Transactions 实习生开始工作时，还没有支持 XA 的 Java 文件系统驱动程序。我最近没有检查过，但我也没有看到任何关于类似工作的消息。Ioannis 在实习期间所做的工作，如果您想使用，可以使用，但目前尚未在积极开发中。除非您想成为开源贡献者 :-)

在未来某个时候，当我们有时间和/或客户需求时，我们可能会将此功能集成到产品中。同时它在[www.jboss.org/jbosstm/fileio/](http://www.jboss.org/jbosstm/fileio/)和原始项目讨论在[www.jboss.org/community/wiki/JBossTSProjects](http://www.jboss.org/community/wiki/JBossTSProjects)

Jonathan Halliday
JBossTS 开发团队

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-11-30T13:08:34.917

最近我解决了完全相同的问题。最后，我将[Bitronix](http://docs.codehaus.org/display/BTM/Home)与 XADisk 一起使用。

您可以在我的博客文章中找到更多详细信息：[JTA 事务管理器 – Atomikos 还是 Bitronix？](http://blog.trixi.cz/2011/11/jta-transaction-manager-atomikos-or-bitronix/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T20:44:00.520

在 Atomikos，我们大约在 10 年前就这样做了，但由于缺乏需求而放弃了这个想法。

如果有足够的理由，我们可以恢复我们的努力。

# svn - 开发服务器上的 SVN

> ID：892350
> 
> 赞同：1
> 
> 时间：2009-05-21T10:56:01.597
> 
> 标签：svn, deployment, development-environment, production-environment

嗨，我是 SVN 的新手，想知道一些事情，或者是否有人可以为我指出正确的方向，或者建议或阅读一些网站。

我已经安装了 subversion 和 tortoise，并且正确安装了 subversion，但我想知道如何从我的机器上处理我的 htdocs 文件夹中的文件，然后提交文件，一旦我提交，它们就会转移到我的 htdocs 文件夹并准备好当我去本地主机时查看。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-21T11:04:44.153

这个问题并不完全清楚，但我认为它的意思是您想要处理本地计算机上 htdocs 文件夹中的数据副本，通过本地计算机上的 Web 服务器查看它们，当您满意时，提交更改并在生产机器上推出它们。

如果是这样，恭喜！这是一种极好的工作方式。

这正是我们所做的（到运行整个动态应用程序的本地版本）。我们定期提交，然后，要发布，只需转到服务器并在服务器上的 htdocs（或其他）结帐时执行 svn 更新。这可以通过 cron 作业自动完成，但我们喜欢手动完成，因为它可以确保头部首先得到健全性检查，如果更新出现异常情况，就会有人来处理它。

开始：

*   在您的开发机器上创建一个 htdocs 和一些文件
*   `svn import`那个目录
*   转到您的生产机器和`svn checkout`htdocs 目录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T11:03:48.943

我不确定你是否掌握了 SVN 为你做的事情。它通过您在每次提交时创建的检查点来维护您对文件所做的更改的历史记录。文件本身保留在文件结构中的位置。

听起来您正在寻找一种部署工具，它将您的工作文件放入您的开发服务器（在您的机器上）准备好进行测试，这不是 SVN 的用途。我不确定解决方案可能是什么，但我相信这里有人可以给你你需要的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T11:05:35.040

对于像带有 Nant 的 CruiseControl.NET 这样的成熟 CI 来说似乎太少了。最简单的方法是创建一个提交和复制到 htdocs 的批处理文件。就像是

```
svn ci %message
robocopy . c:\htdocs 
```

命名 commit.bat 并调用它`commit "this is my message"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T11:06:00.233

当您提交时，文件将被传输到 SVN 服务器的内部存储库，并且无法直接查看。但是，任何客户都可以更新他/她的内容，并且更改将是可见的。

无论如何从[SVN书](http://svnbook.red-bean.com/)开始。这篇[文章](http://www.codeproject.com/KB/work/XTortoiseSVN.aspx)也很有用。

# sql - SQL Server 2005 和临时表范围

> ID：892351
> 
> 赞同：46
> 
> 时间：2009-05-21T10:56:03.513
> 
> 标签：sql, sql-server, tsql

我已经阅读了临时表和范围的主题，我看到的所有答案似乎都没有谈论我的担忧之一。

我了解本地临时表的范围仅在存储过程或子存储过程的生命周期内有效。但是，关于并发性的情况如何。即，如果我有一个存储过程创建一个临时表，该表是从两个不同的进程调用但从相同的用户/连接字符串调用的，该临时表是否会在对该存储过程的两次调用之间共享，还是会出现以下情况对存储过程的每次调用都会创建一个唯一的临时表实例。

我会假设临时表属于对存储过程的调用范围，但我想在我走这条路之前确定。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2009-05-21T11:00:29.013

本地临时表（以 # 开头）仅限于您的会话；其他会话，即使来自相同的用户/连接字符串，也看不到它们。生命周期的规则取决于本地临时表是否是在存储过程中创建的：

*   在存储过程中创建的本地临时表在过程结束时被删除；其他存储过程或调用进程看不到它们。
*   会话结束时会删除其他本地临时表。

全局临时表（以## 开头）在会话之间共享。它们在以下情况下被丢弃：

*   创建它们的会话结束
*   并且没有其他会话提到他们

此命令可以方便地查看存在哪些临时表：

```
select TABLE_NAME from tempdb.information_schema.tables 
```

如果您不确定临时表是否存在，这很方便删除临时表：

```
if object_id('tempdb..#SoTest') is not null drop table #SoTest 
```

有关详细信息，请参阅此[MSDN 文章](http://msdn.microsoft.com/en-us/library/aa258255(SQL.80).aspx)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-21T11:12:04.497

临时表将可访问创建它的过程的实例

以下脚本

```
Exec ('Select 1 as col Into #Temp Select * From #Temp')
Exec ('Select 2 as col Into #Temp Select * From #Temp') 
```

退货

```
Col
1

Col
2 
```

不是

```
Col
1
2 
```

或者因为表已经存在而报错。

初始过程也运行的任何“子”过程也可以访问临时表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-21T13:43:48.793

您可能还考虑使用表变量。它们具有非常明确的范围，并且有时比它们的临时表对应物更快。表变量的唯一问题是它们不能被索引，因此尽管它们的性质可能会损失一些性能。 [在这里](http://msdn.microsoft.com/en-us/library/aa175774(SQL.80).aspx)查看有关该主题的更多信息。

# java - 如何保护速度模板不被篡改？

> ID：892356
> 
> 赞同：0
> 
> 时间：2009-05-21T10:58:14.820
> 
> 标签：java, velocity

我们有一个收据的 Velocity 模板。该模板包括税号，其值将在收据生成时被替换。这是为了确保真实执照持有人的 TIN 印在收据上。

我们如何防止最终用户在模板本身中硬编码 TIN 号码？如果在合并时在模板中找不到字段，Velocity 有没有办法抛出异常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-21T11:07:23.023

保护模板本身可能会更好，而不是试图让 Velocity 报告不正确的操作。Velocity 可以很好地容忍缺失的字段等，所以我怀疑它不会做你想要的。

您可以通过签名或类似的方式保护模板吗？这样一来，如果有人干扰了它，它应该可以立即被检测到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T11:06:34.553

是否允许用户自定义模板的其他部分？

如果没有，您可以在程序中包含模板的 md5 校验和，并检查文件是否已被篡改。

不过，不确定这是否值得。恶意用户还有许多其他方法可以伪造收据，您无法阻止所有这些方法。

# javascript - X-UA 兼容 JavaScript 和 CSS 文件

> ID：892363
> 
> 赞同：1
> 
> 时间：2009-05-21T10:59:23.897
> 
> 标签：javascript, css, internet-explorer-8

为了与 IE8 兼容，我们已将`X-UA-Compatible: IE=EmulateIE7`标头添加到 IIS 响应标头列表中。

出于某种原因，这些标头被发送给 ASPX 等，而不是用于静态文件 - JS/CSS。

此标头是否与链接到 HTML 内容的 JS/CSS 内容有任何相关性？我的猜测是，只要收到的 HTML 带有此响应标头，IE8 就应该尊重此标头并根据 EmulateIE7 兼容模式显示内容。是这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T11:05:34.620

> 此标头是否与链接到 HTML 内容的 JS/CSS 内容有任何相关性？

不，您只需发送带有 HTML 文件的标题。浏览器然后切换到向后兼容模式并以“ie7 方式”处理所有链接资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T11:47:53.613

您是否考虑过将代码更新为标准，然后应用[IE8-js 之](http://code.google.com/p/ie7-js/)类的 IE7 修复？把那个标题放进去只是说“这个网站是被设计破坏的”，这对其他浏览器或未来版本的 IE 没有帮助。

# java - 类型安全：类对象之间的未经检查的强制转换

> ID：892368
> 
> 赞同：7
> 
> 时间：2009-05-21T11:01:11.867
> 
> 标签：java, generics, class, casting

我对泛型之类的东西很满意，但在这种特殊情况下，我有一个关于“类型安全：从.. 到.. 的未经检查的强制转换”警告的问题。

基本上我有一个类对象的列表，现在我想获得一个实现特殊接口的子集，但生成的列表也应该有那个特殊的类型：

```
...
private List<Class<?>> classes;

public List<Class<? extends Concrete>> getConcreteClasses() {

    List<Class<? extends Concrete>> concreteClasses = new LinkedList<Class<? extends Concrete>>();

    for (Class<?> clazz: this.classes) {
        for (Class<?> i : clazz.getInterfaces()) {
            if (i.equals(Concrete.class)) {
                concreteClasses.add((Class<? extends Concrete>) clazz);
            }
        }
    }

    return concreteClasses;

} 
```

警告当然与类型转换有关：

```
Type safety: Unchecked cast from Class<?> to Class<? extends Concrete> 
```

我可以摆脱类型转换还是应该使用@SuppressWarnings("unchecked") 抑制警告？

感谢您的回答！

PS：环境是Java 6。

**解决方案：**代替

```
concreteClasses.add((Class<? extends Concrete>) clazz); 
```

采用

```
concreteClasses.add(clazz.asSubclass(Concrete.class)); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-21T11:07:33.087

[`Class.asSubclass`](http://java.sun.com/javase/6/docs/api/index.html?java/lang/Class.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T11:07:39.933

您可以取消警告，因为您确定演员表会起作用，因为您添加的所有类都实现了 Concrete 接口......

# c# - 如何在 WinForms 中显示显示轨迹栏值的工具提示

> ID：892369
> 
> 赞同：7
> 
> 时间：2009-05-21T11:01:13.177
> 
> 标签：c#, winforms, tooltip

我是 C# 和 WinForms 的新手，所以请原谅这是一个新手问题。

我正在尝试向我的 TrackBar 控件添加一个工具提示，它会在您拖动它时显示该栏的当前值。我已经实例化了一个 ToolTip 对象并尝试了以下处理程序代码，但它没有显示任何工具提示：

```
private void trackBar1_Scroll(object sender, EventArgs e)
{
   toolTip1.SetToolTip(trackBar1, trackBar1.Value.ToString());
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-21T11:29:35.287

亚当我刚刚实现了一个非常简单的版本，它完全按预期工作......

这是用于比较的初始化代码

```
 private void InitializeComponent()
    {
        this.components = new System.ComponentModel.Container();
        this.toolTip1 = new System.Windows.Forms.ToolTip(this.components);
        this.trackBar1 = new System.Windows.Forms.TrackBar();
        ((System.ComponentModel.ISupportInitialize)(this.trackBar1)).BeginInit();
        this.SuspendLayout();
        // 
        // trackBar1
        // 
        this.trackBar1.Location = new System.Drawing.Point(12, 166);
        this.trackBar1.Name = "trackBar1";
        this.trackBar1.Size = new System.Drawing.Size(268, 42);
        this.trackBar1.TabIndex = 1;
        this.trackBar1.Scroll += new System.EventHandler(this.trackBar1_Scroll);
        // 
        // Form1
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.ClientSize = new System.Drawing.Size(292, 273);
        this.Controls.Add(this.trackBar1);
        this.Name = "Form1";
        this.Text = "Form1";
        ((System.ComponentModel.ISupportInitialize)(this.trackBar1)).EndInit();
        this.ResumeLayout(false);
        this.PerformLayout();

    }

    private void trackBar1_Scroll(object sender, EventArgs e)
    {
        toolTip1.SetToolTip(trackBar1, trackBar1.Value.ToString());

    } 
```

当我将代码移动到每个额外的增量时，它就会起作用......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T11:12:33.637

你是如何初始化 toolTip1 类的？您设置工具提示文本的方式看起来不错，也许您在组件完成工作之前设置了一些常规属性？

MSDN 说

```
// Create the ToolTip and associate with the Form container.
ToolTip toolTip1 = new ToolTip();

// Set up the delays for the ToolTip.
toolTip1.AutoPopDelay = 5000;
toolTip1.InitialDelay = 1000;
toolTip1.ReshowDelay = 500;
// Force the ToolTip text to be displayed whether or not the form is active.
toolTip1.ShowAlways = true; 
```

# c# - 在 C# 中选择 RichTexbox 中的文本会删除文本

> ID：892370
> 
> 赞同：1
> 
> 时间：2009-05-21T11:01:23.270
> 
> 标签：c#, richtextbox

我在从 Richtextbox 派生的控件中输入了以下文本

“世界是{美丽}”。

我的主要目的是为美丽这个词创建一个链接。我可以使用 CFE_LINK 创建它，但那是我选择文本的时候。

**当我使用 Select (4,9) 时，4 到 9 范围内的文本被删除。**

有人可以帮我解决我错过的问题吗？

代码 ：

我正在创建一个从 Richtextbox 派生的用户控件。

我在下面给出了确切的代码；我没有做任何颜色更改。我认为 Select 命令默认将所选文本设置为蓝色。

```
protected override void OnKeyPress(KeyPressEventArgs e)
{
   String keypressed =  e.KeyChar.ToString();
   if(keypressed == "}")
      Select(4,9)        
   base.OnKeyPress(e);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T13:18:13.743

我怀疑按下“}”键时，您的代码会在字符发送到文本框之前运行。

因此，您选择文本，然后将“}”字符发送到文本框，覆盖所选内容。

**编辑：**是的，复制它。

我不确定如何解决它。也许实施起来会更好`OnTextChanged`。您可以扫描整个文本框以查找未链接的{大括号内的单词}。如果文本很大，它可能会更慢，但它会自动处理复制和粘贴之类的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T13:26:34.413

起初，当我开始搞砸这个时，我也很困惑。但是后来它击中了我，很有可能您按下的键被发送到文本框以在 KeyUp 处呈现。果然，当我将您的代码更改为此时，它起作用了：

```
 protected override void OnKeyUp(KeyEventArgs e)
    {
        base.OnKeyUp(e);
        if (e.KeyCode == Keys.Oem6)
        {
           Select(4, 9);
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T13:45:19.477

根据[Blorgbeard](https://stackoverflow.com/questions/892370/selecting-text-in-richtexbox-in-c-deletes-the-text/892888#892888)的回答，您首先选择文本，然后在`}`文本框中输入“”，替换您的选择。也许您想要的是先键入“ `}`”，*然后再*进行选择。

```
protected override void OnKeyPress(KeyPressEventArgs e)
{
   // type "}" into textbox
   base.OnKeyPress(e);

   String keypressed =  e.KeyChar.ToString();

   if(keypressed == "}")
      Select(4,9)        
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T13:37:35.140

我投票支持 BFree 的答案，但是如果由于某种原因您必须使用 OnKeyPress 方法，您可以调用 select 方法，因此它会在事件完成后发生。

```
 protected delegate void SelectAfterKeyPress(int start, int length);

    protected override void OnKeyPress(KeyPressEventArgs e)
    {
        base.OnKeyPress(e);
        String keypressed = e.KeyChar.ToString();
        if (keypressed == "}")
        {
            this.BeginInvoke(new SelectAfterKeyPress(Select), new object[] { 4, 9 });
        }
    } 
```

# c# - 哪些语言支持没有样板代码的返回值缓存？

> ID：892371
> 
> 赞同：5
> 
> 时间：2009-05-21T11:02:40.257
> 
> 标签：c#, java, performance, language-agnostic, caching

对于...的方法

*   输入和输出之间存在静态的一对一映射，并且
*   创建输出对象的成本相对较高，并且
*   使用相同的输入重复调用该方法

...需要缓存结果值。

在我的代码中，以下结果值缓存模式重复了很多次（Java 中的伪代码，但问题与语言无关）：

```
private static Map<Input, Output> fooResultMap = new HashMap<Input, Output>();
public getFoo(Input input) {
  if (fooResultMap.get(input) != null) {
    return fooResultMap.get(input);
  }
  Output output = null;
  // Some code to obtain the object since we don't have it in the cache.
  fooResultMap.put(input, output);
  return output;
} 
```

一直重复这种结构显然违反了 DRY 原则。

理想情况下，我希望将上面的代码简化为以下内容：

```
@CacheResult
public getFoo(Input input) {
  Output output = null;
  // Some code to obtain the object since we don't have it in the cache.
  return output;
} 
```

理论上的 CacheResult 注释将负责我目前正在手动进行的缓存。

这种缓存的通用术语是“[记忆](http://en.wikipedia.org/wiki/Memoization)化”。

我正在寻找的确切功能的一个很好的例子是[Perl 核心模块 "Memoize"](http://perldoc.perl.org/Memoize.html)。

**在哪些语言中存在这种类似 Memoize 的缓存解决方案（在语言级别或库级别）？特别是 - 任何主要平台（如 Java 或 .NET）都存在这样的解决方案吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-21T11:17:41.973

不是内置语言，我认为 CPAN 模块[Memoize](http://search.cpan.org/~mjd/Memoize-1.01/Memoize.pm)在 Perl 领域相当流行，我认为：

```
 # Compute Fibonacci numbers
    sub fib {
      my $n = shift;
      return $n if $n < 2;
      fib($n-1) + fib($n-2);
    }

    use Memoize;
    memoize('fib'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-11-11T15:55:09.233

.Net '企业库'中的缓存处理程序

[http://msdn.microsoft.com/en-us/library/cc511757.aspx](http://msdn.microsoft.com/en-us/library/cc511757.aspx)

```
[CachingCallHandler(0, 0, 30)]
public decimal GetSavingsBalance(int accountNumber)
{
  // Code here to extract balance from database.
  return balance;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T11:14:39.670

Python 有许多装饰器配方，例如[装饰器模块](http://pypi.python.org/pypi/decorator/3.0.0)，适用于此（*如果*参数都是不可变的），并且它在 JVM 和 .NET 上都有实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-22T11:31:45.943

Spring 的孵化区**[springmodules](https://springmodules.dev.java.net)**正是 Java 的这个功能。

**[Springmodules 缓存](https://springmodules.dev.java.net/docs/reference/0.8/html/cache.html)**仍处于 0.8 版本级别，但当我去年尝试时，它通常运行良好。有一些选项可以在 spring 配置文件以及注释中配置缓存 - 这看起来与您的示例非常相似。从他们的文档中：

```
public class TigerCacheableService implements CacheableService {

  @Cacheable(modelId = "testCaching")
  public final String getName(int index) {
    // some implementation.
  }
...
} 
```

您可以选择缓存的后端实现。当我尝试它时，我将它连接到[ehcache](http://ehcache.sourceforge.net/)有很好的结果，它也有很好的 spring 集成。您可以以声明方式设置 ehcache 以缓存（在内存和/或磁盘中）您使用**`@Cacheable`**注释标记的方法的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-21T11:29:09.190

您可以`@CacheResult`在 Java 中实现注释，例如使用[ASM 转换](http://www.ibm.com/developerworks/java/library/j-cwt06075/)[方法](http://asm.ow2.org/)以添加记忆代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-21T12:01:07.237

Microsoft T-SQL 可以在 pr 上缓存 CLR 函数的返回值。查询依据...

（在 CLR 中编写方法时，除了方法上的正确属性外，没有样板。）

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-05-21T11:36:58.643

[这个问题/答案](https://stackoverflow.com/questions/633508/two-argument-memoization)解决了 C# 中的记忆。它不缓存结果，但可以很容易地更改为使用 ReaderWriterLock 使地图成为静态。

[这是给定链接](http://blogs.msdn.com/wesdyer/archive/2007/01/26/function-memoization.aspx)的示例：

```
public static Func<A, R> Memoize<A, R>(this Func<A, R> f)
{
  var map = new Dictionary<A, R>();
  return a =>
    {
      R value;
      if (map.TryGetValue(a, out value))
        return value;
      value = f(a);
      map.Add(a, value);
      return value;
    };
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-05-21T11:19:13.390

不是您问题的直接答案，但如果您要维护许多缓存，则可能值得使用[OSCache](http://www.opensymphony.com/oscache/) (Java) 来管理这些缓存。驱逐陈旧的对象等，成为您不必担心的问题。

不过，您仍然必须使用“检查缓存”、“返回缓存”或“创建并添加到缓存”的基本模式。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-05-21T11:22:44.833

尽管 Java 的语法仍然冗长，但可以像在 Java 中那样分解代码

```
private static final Cache<Input, Output> fooCache = Caches.newInstance(
    new Factory<Input, Output>() { public Output create(Input input) {
        return ... some code ...;
    }}
);
public static Output getFoo(Input input) {
    return fooCache.get(input);
} 
```

有了对匿名内部类更好的语法支持，这可能变成：

```
private static final Cache<Input, Output> fooCache =
    (Input input) (... some code ...);
public static Output getFoo(Input input) {
    return fooCache.get(input);
} 
```

这是 AOP 解决方案可以做的一件事，但代价是必须处理一些魔法。

# emacs - 如何在 Emacs 中将光标固定到屏幕中间，以便页面移动，而不是光标？

> ID：892378
> 
> 赞同：13
> 
> 时间：2009-05-21T11:03:53.077
> 
> 标签：emacs, scroll, elisp

我想将光标固定在屏幕的中心线上，这样当我按下 Ctrl-N 或 Ctrl-P 时，页面本身会向上或向下移动，并且光标保持不动。

有没有人对如何实现这一目标有任何提示？

谢谢

埃德

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-21T13:10:50.153

尝试居中光标模式：

[http://www.emacswiki.org/emacs/centered-cursor-mode.el](http://www.emacswiki.org/emacs/centered-cursor-mode.el)

如果您使用的是[MELPA](http://melpa.milkbox.net/)，它可以通过`M-x` `package-install` `RET` `centered-cursor-mode`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-21T11:09:36.060

`M-x scroll-lock-mode`，这也可以用来很好地使用 Scroll Lock 键：

```
(global-set-key (kbd "<Scroll_Lock>") 'scroll-lock-mode) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-21T11:15:41.680

[SmoothScrolling](http://www.emacswiki.org/emacs/SmoothScrolling)上的 EmacsWiki 页面提供了一些可能的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-14T12:20:36.013

您可以使用内置的[centerer](https://www.gnu.org/software/emacs/manual/html_node/emacs/Recentering.html)滚动自己的：

```
(global-set-key (kbd "C-n")
        (lambda (n)
          (interactive "p")
          (next-line n)
          (recenter)))

(global-set-key (kbd "C-p")
        (lambda (n)
          (interactive "p")
          (previous-line n)
          (recenter))) 
```

# wpf - 将控件集中在 Tabcontrol 中

> ID：892393
> 
> 赞同：0
> 
> 时间：2009-05-21T11:06:53.010
> 
> 标签：wpf, focus, tabcontrol, tabitem

在 tabcontrol 中选择 tabitem 时如何聚焦控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T12:56:28.450

不确定我是否完全理解您的要求，但您可能希望为 TabControl 捕获 SelectionChanged 事件：

```
 public Window1()
{
  InitializeComponent();

  TabControl1.SelectionChanged += TabControl1_SelectionChanged;
}

private void TabControl1_SelectionChanged(object sender, EventArgs e)
{
  TabItem item = (TabItem)TabControl1.SelectedItem;
  // Find the first control in the TabItem content and focus it?
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-10T05:31:49.237

您应该捕获 TabControl 的 Selection changed 事件，并在其中关注您需要的控件。正如

```
private void TabControl1_SelectionChanged(object sender, EventArgs e)
{
    control1.Focus();
} 
```

# ruby-on-rails - 将布尔参数传递给rails中的命名路由

> ID：892394
> 
> 赞同：1
> 
> 时间：2009-05-21T11:06:55.210
> 
> 标签：ruby-on-rails, parameters, boolean, params

我想明确地将布尔值 false 传递给 params[:closed] 并且我有这样的东西：

```
= link_to 'appointments', appointments_path(:closed => false) 
```

但这不起作用，因为 rails 正在处理一个错误的布尔值，因为我不想为这个参数设置任何东西，有没有办法解决这个问题？

更新：我传入的 false 是一个布尔值，我想要一个这样的 url

```
\appointments?closed=false 
```

但我得到的只是\约会。希望这更清楚一点。

附带问题，将布尔值作为参数传递是一种好习惯吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-10-03T19:53:30.820

现在可能为时已晚，但请尝试使用字符串：

```
appointments_path(:closed => 'false') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T15:37:37.940

这将导致？close=false。`params[:closed]`然后将返回`"false"`，这是一个字符串，并将评估为真。

我会为此使用命名路由，而不是狂躁的 if/else 检查“索引”操作。

```
# routes.rb
map.resources :appointments, :collection => {:closed => :get, :open => :get}

# controller
def closed
  @appointments = Appointment.closed
end

def open
  @appointments = Appointment.open
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-30T20:12:01.567

听起来你需要 3 个不同的选项。关闭未选中，关闭设置为 true 或设置为 false。

如果您需要区分已关闭与未被选中并像这样设置为 false，则只需使用字符串和`params[:closed] == 'false'`. 如果 rails 有一些可以将 url 字符串转换为布尔值的捕获，那么您将无法将字符串`"false"`作为参数传递，这会很奇怪。

如果您的关闭参数始终为真或假（没有未选择的选项），那么像您正在做的那样做就可以了。

您在 _path 方法中使用`:closed => true`or指定它，`:closed => false`然后使用`params[:closed]`如下所示对其进行测试：

```
if params[:closed]
  blah
else
  other_blah
end 
```

# python - 突破 Google App Engine Python 锁定？

> ID：892411
> 
> 赞同：18
> 
> 时间：2009-05-21T11:12:59.330
> 
> 标签：python, google-app-engine, open-source, lock-in

[编写Google App Engine](http://en.wikipedia.org/wiki/Google_App_Engine) Python 代码时是否有任何指南，无需 Google 的基础架构即可在其​​他平台上运行？

是否有任何已知的尝试来创建一个可以在其他平台上运行为 Google App Engine 设计的应用程序的开源框架？

编辑：

为了澄清，问题实际上是：

如果我现在在 Google App Engine 上开发一个应用程序，我以后可以迁移到另一个平台，还是被锁定？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-05-21T19:09:25.810

使应用程序完全可移植需要许多组件：

*   运行时环境本身。这可以通过设置模拟 App Engine 环境（其本身基本上是略微增强的 CGI）的 CGI 或 FastCGI 服务器来相对简单地移植。大部分执行此操作的代码已经在 SDK 中。不幸的是，目前还没有简单的预打包工具包。
*   数据存储。迄今为止最复杂的移植 API。正在进行许多努力：[AppScale](http://appscale.cs.ucsb.edu/)在 EC2/Eucalyptus/Xen 上运行并使用 HyperTable 或 HBase 后端；它仍然是测试版质量，并且他们不会单独分发数据连接器（这是完整的 run-your-app-on-your-own-cloud 解决方案的开始）。Jens 正在/正在编写一个[SQLite 后端](http://blog.appenginefan.com/2008/09/appengine-and-sqlite-getting-values-out.html)，还有我自己的项目[BDBDatastore](http://arachnid.github.com/bdbdatastore/)，它使用 BDB-JE 作为后端，并且功能齐全（尽管是 beta 质量）。[其他人提到的AppDrop](http://jchrisa.net/drl/_design/sofa/_show/post/announcing_appdrop_com__host_go)只是将开发服务器用作后端，因此不适合生产使用。
*   用户 API 需要替换为其他东西，例如基于 OpenID 的 API。同样，相当简单，但还没有预制的解决方案。
*   Memcache API 需要一个使用标准 C memcache 后端的后端。
*   作为 SDK 的一部分，其他 API 具有功能完善的后端，因此不需要移植。
*   Cron 支持也需要实现，后台处理、XMPP 等在可用时也需要实现。

正如您所看到的，还有很多工作要做，但让您的 App Engine 应用程序在 Google 环境之外运行没有根本障碍。事实上，如果您有兴趣，我们非常欢迎您参与 - 我和其他人计划将各个部分的解决方案组合成一个单一的“OpenEngine”解决方案，以托管您自己的应用程序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-21T11:34:51.737

使用适用于 App-Engine 的高级框架。这样，您可以在需要时将代码移植到其他服务器。

django 已经打补丁并移植到[Appengine 补丁](http://code.google.com/p/app-engine-patch/)项目中，并且是 appengine 上使用最多的 FW。

您可能想参考此逐步介绍[在 App 引擎上运行 django 应用程序](http://uswaretech.com/blog/2009/04/develop-twitter-api-application-in-django-and-deploy-on-google-app-engine/)

就运行应用程序引擎应用程序的并行基础架构而言，这还很遥远。App Engine 本身并没有像人们想象的那样流行，也没有谷歌希望的那样流行。另外，在内置 WebApp 框架上开发比在 django 上更难。

至少在未来几年内，它不太可能看到运行应用程序引擎应用程序的并行基础架构。相反，很可能会看到 django 和其他流行的框架在应用程序引擎上开箱即用，而这方面的工作目前正在参考项目中进行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-21T11:29:56.923

到目前为止，我找到了一个名为[app-drop](http://jchrisa.net/drl/_design/sofa/_show/post/announcing_appdrop_com__host_go)的实验主机，它能够托管 google app-engine 项目。这应该意味着至少*可以*在谷歌基础设施之外运行应用引擎项目。

然而，这显然还不适合生产。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-21T11:33:44.733

您可以使用 Django python 框架构建 AppEngine 应用程序（尽管支持的版本比最新的 Django 版本稍逊一筹）。您失去可移植性的地方（至少现在是这样）是在使用 GQL/BigTable 进行持久性时。这是谷歌专有的数据库平台。正如 Hank 所说，这是实际使用 AppEngine 的最大原因之一，但它也是最大的单一锁定点。

以下是 AppEngine 和 GQL/BigTable 中 Django 支持的几个链接：

*   [http://code.google.com/appengine/articles/django.html](http://code.google.com/appengine/articles/django.html)
*   [http://code.google.com/appengine/docs/python/datastore/gqlreference.html](http://code.google.com/appengine/docs/python/datastore/gqlreference.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-21T11:20:45.603

代码应该大部分是可移植的（它们很好地指出了哪些模块不能在 AppEngine 上使用，哪些 AppEngine 特定代码对应于哪些禁止模块），但 AppEngine 的全部意义在于访问 Google 的基础架构. 如果您不打算使用 AppEngine 的基础架构，那么将代码写入 AppEngine 限制没有多大意义。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-21T11:35:57.943

AppDrop是2008年4月完成的AppEngine到Amazon Web Services / Elastic Computing的概念验证端口。它使用平面文件而不是BigTable并且在单个实例中运行，因此存在扩展问题；但它的开发者说他只用了四天，也许这些限制可以由其他人解决。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-07-21T14:13:47.420

我最近通过使用 WHIFF 资源非常轻松地完成了从 vanilla Unix 到应用程序引擎的反向迁移。基本上将任何依赖于平台的东西配置为资源，然后在不同的配置上交换/替换资源。

[http://piopio.appspot.com/W1000_1000.resources](http://piopio.appspot.com/W1000_1000.resources)

也见

[http://aaron.oirt.rutgers.edu/myapp/docs/W1100_1200.wwiki](http://aaron.oirt.rutgers.edu/myapp/docs/W1100_1200.wwiki)

有关资源交换/配置的详细示例。（注意：链接最终可能会消失，应用程序是实验性的。）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-05-09T17:48:12.403

检查[台风](http://code.google.com/p/typhoonae/)。它处于测试阶段，但非常有用——我们将其中一个应用程序移至运行此堆栈的内部服务器。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-17T20:48:14.893

AppScale 是 Google App Engine 最成熟的开源实现。它自 2008 年开始开发，目前支持所有四种语言：Python、Java、Go 和 PHP。它让用户今天在生产中运行他们的应用程序。

常见问题解答解释了支持哪些 API 以及缺少哪些 API： [https ://github.com/AppScale/appscale/wiki/FAQs](https://github.com/AppScale/appscale/wiki/FAQs)

（免责声明：我从事该项目）

# javascript - 是否有 javascript 指南针 html 小部件？

> ID：892414
> 
> 赞同：1
> 
> 时间：2009-05-21T11:13:46.210
> 
> 标签：javascript, html

对于我正在进行的项目，用户需要输入一个方向，如“北”（即 N）、NE 等。最好在网页上有一个小罗盘，用户可以点击罗盘上的各个点，它会代表适当的方向。

是否有一些现有的 javascript html 片段可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T11:29:37.893

获取指南针图像并在其上放置图像地图可能更快更容易。如果您使用以下方法平铺 8 个图像，这个概念甚至可以在没有 JS 的情况下工作：

```
<input type="image"> 
```

更好的是将单选按钮绝对定位在背景图像的罗盘点上。那么您不必立即提交。

# ms-access - 如何在 MS Access 中设置开发环境

> ID：892415
> 
> 赞同：8
> 
> 时间：2009-05-21T11:14:05.303
> 
> 标签：ms-access, testing, multi-user

我创建了一个 MS Access 2003 应用程序，设置为分离的前端/后端配置，用户组约为 5 人。前端 .mdb 位于网络文件服务器上，它包含所有查询、表单、报告和 VBA 代码，以及指向后端 .mdb 中所有表的链接以及一些指向 ODBC 数据源（如 AS/）的链接400。后端位于同一网络文件服务器上，其中只有表数据。

这一直运行良好，直到我“上线”并且我的少数用户开始提出增强请求、错误报告等。我一直在通过在我自己的前端 .mdb 副本中开发/测试来推出新代码另一个网络文件夹（链接到相同的后端 .mdb），然后将我完成的文件发布到“come-and-get-it”文件夹中，提醒用户，然后他们去复制/粘贴新的前端文件到他们自己在网络上的文件夹中。这样，每个用户都可以在他们处于“停止点”时更新他们的前端，而无需立即启动每个人。

我发现现在在开发时，有时Access会变得非常慢。就像，当我正在开发表单并尝试单击属性框上的下拉菜单时，下拉箭头将推入，但需要几秒钟才能出现选项列表。或者在表单上选择和移动控件时存在大量滞后。或者很多键盘滞后。

然后，在其他时候，根本没有滞后。

我想知道是否是因为我与其他用户链接到同一个后端。我确实做出了合理的努力来设置查询、表单、报告等，并根据需要使用最少的记录锁定（如果有的话）。但是我可能遗漏了一些东西，或者可能还有其他一些我需要解决的性能问题。

但是我想知道是否有更好的方法来设置我自己的开发后端.mdb，这样我就可以在“安全”数据上测试我的代码，而不是与其他用户相同的实时数据. 恐怕我破坏一些数据只是时间问题，可能是在最糟糕的时刻。

显然，我可以只设置一个单独的后端 .mdb 并每次使用链接表管理器手动重新配置前端中的表链接。但我希望有一个比这更优雅的解决方案。

而且我想知道在这个多用户拆分数据库配置中是否还有其他性能问题我应该考虑。

编辑：我应该补充一点，我坚持使用 MS Access（不是 MS-SQL 或任何其他“真实”后端）；有关更多详细信息，请参阅我对这篇文章的评论。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-21T21:05:28.260

如果您的所有用户都共享前端，那就是错误的配置。

每个用户都应该拥有一份单独的前端副本。共享前端肯定会导致共享前端的频繁损坏，以及前端中表单和模块的奇怪损坏。

我不清楚如何在最终用户使用的前端副本中进行开发，因为从 A2000 开始，这是被禁止的（因为“整体保存模型”，整个 VBA 项目都存储在其中在其中一个系统表的单个记录中的单个 BLOB 字段中）。

我真的不认为这些问题是由使用生产数据引起的（尽管正如其他人所说，针对生产数据进行开发可能不是一个好主意）。我认为它们是由糟糕的编码实践和前端代码缺乏维护造成的。

1.  在 VBE 选项中关闭 COMPILE ON DEMAND。

2.  确保您需要 OPTION EXPLICIT。

3.  每隔几行代码就频繁地编译你的代码——为了简单起见，将编译按钮添加到你的 VBE 工具栏（当我在它的时候，我还添加了 CALL STACK 按钮）。

4.  定期备份您的前端并反编译和重新编译代码。这是通过使用 /decompile 开关启动 Access，打开前端，关闭 Access，使用 Access 打开前端（按住 SHIFT 键绕过启动代码），然后压缩反编译的前端（使用 SHIFT键），然后编译整个项目并最后一次压缩。您应该在任何主要代码发布之前执行此操作。

其他一些想法：

1.  你没有说它是否是 Windows 服务器。通过 SAMBA 访问的 Linux 服务器过去曾出现过问题（尽管有些人对它们发誓并说它们比 Windows 服务器快得多），并且从历史上看，Novell 服务器需要调整设置以使 Jet 文件能够被可靠地编辑。还有一些设置（如 OPLOCKS）可以在 Windows 服务器上进行调整，以使事情更好地工作。

2.  将您的 Jet MDB 存储在具有短路径的共享中。\Server\Data\MyProject\MyReallyLongFolderName\Access\Databases\ 读取数据将比 \Server\Databases 慢得多。这真的有很大的不同。

3.  链接表存储可能会过时的元数据。有两个简单的步骤和一个激烈的步骤来修复它。先压缩后端，再压缩前端。那是最容易的。如果这没有帮助，请完全删除链接并从头开始重新创建它们。

4.  您也可以考虑将 MDE 分发给最终用户而不是 MDB，因为它不能反编译（MDB 可以）。

5.  有关其他通用性能信息，请参阅[Tony Toews 的性能常见问题解答。](http://www.granite.ab.ca/access/performancefaq.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-22T03:20:07.023

1) 从代码 [http://www.mvps.org/access/tables/tbl0009.htm重新链接访问表](http://www.mvps.org/access/tables/tbl0009.htm)

一旦我准备好向用户发布新的 MDE，我重新链接表，制作 MDE 并将 MDE 复制到服务器。

2) 我专门创建了免费的 Auto FE Updater 实用程序，以便我可以根据需要随时更改 FE MDE，并且非常有信心下次有人运行该应用程序时它会引入最新版本。有关错误或 Auto FE Updater 实用程序的更多信息，请参阅我网站上[http://www.granite.ab.ca/access/autofe.htm](http://www.granite.ab.ca/access/autofe.htm)上的免费 Auto FE Updater 实用程序，以使每台 PC 上的 FE 保持最新.

3) 现在，在客户现场工作时，我会在每个人都离开系统的几个小时后更新表结构。请参阅如何：检测 Access 2000 中的用户空闲时间或不活动 (Q210297) [http://support.microsoft.com/?kbid=210297](http://support.microsoft.com/?kbid=210297) ACC：如何检测用户空闲时间或不活动 (Q128814) [http://support.microsoft .com/?kbid=128814](http://support.microsoft.com/?kbid=128814)

但是我们发现，在定时器事件上运行的代码必须为程序员禁用。否则，当您编辑代码时，就会发生奇怪的事情。

此外，打印预览有时不允许用户运行菜单项以将报告导出到 Excel 或其他。因此，您必须右键单击 Previewed 报告以使某种类型的内部焦点重新回到报告上，以便他们可以将其导出。这也有助于将计时器延长到五分钟。

将计时器延长至五分钟的不利之处在于，如果一个人在一天中的相当长的时间里保持相同的形式和相同的控制，即某人进行相同的查询，例程并没有意识到他们实际上已经做了某事。每当他们在程序中执行某些操作时，我会在某个时候添加一些逻辑来重置此计时器。

4）关于另一个人评论脚本等更新架构，请参阅Compare'Em [http://home.gci.net/~mike-noel/CompareEM-LITE/CompareEM.htm](http://home.gci.net/~mike-noel/CompareEM-LITE/CompareEM.htm)。虽然它有其怪癖，但它确实创建了 VBA 代码来更新表、字段、索引和关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T11:26:46.930

从 dev 切换到 prod 时，使用 VBA 取消链接并将表重新链接到新目标。我已经很多年才记住语法——我只知道这个函数写起来很简单。

或者使用 MS-Access 通过 ODBC 或其他位于客户端 mdb 之外的数据连接与 MS-Access 对话。

与所有基于文件的数据库一样，您最终会遇到峰值使用问题，或者当您超过 2 到 30 之间的一个小神奇数字时。

此外，Access 往往会经常损坏，因此需要经常进行备份、压缩和修复。曾经存在的第 3 方工具可以自动执行此任务。

就性能而言，数据是在客户端处理的，因此您可能希望使用 netmeter 之类的东西来观察有多少数据通过网络传输。关于索引和避免表扫描的相同原则也适用于文件基础数据库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-21T12:23:39.297

其他人的许多好建议。这是我的 2 美分。我的后端数据位于通过驱动器映射访问的服务器上。就我而言，Y 驱动器。生产用户使用活动目录通过登录脚本获取映射。然后通过批处理文件轻松完成以下场景：

*   通过在批处理文件中执行 subst 命令针对本地计算机进行开发
*   通过将 Y 指向备份服务器来针对昨晚的数据运行报告（只读）
*   通过指向正确的目录运行月末数据报告
*   通过保留一个特殊目录来针对特殊场景进行测试

在我的环境中（平均 5 个并发用户，1000 行，而不是 10,000 行。）发生了损坏，但它很少见且易于管理。在过去的几年中，我们只有一次求助于前几天的备份。我们使用 SQL Server 来处理更高容量的东西，但开发起来不太方便，可能是因为我们现场没有 SQL 管理员。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-23T08:02:18.370

如果您想在向客户端发布新的 FE 时自动更新后端 MDB 架构，请参阅 Compare'Em [http://home.gci.net/~mike-noel/CompareEM-LITE/CompareEM.htm](http://home.gci.net/~mike-noel/CompareEM-LITE/CompareEM.htm)会很高兴地生成VBA 代码需要重新创建 MDB。或者创建两个 MDB 之间差异的代码，以便您可以对现有的 BE MDB 进行版本升级。这有点古怪，但有效。

我用它所有的时间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-21T11:36:35.867

您可能还会发现[这个问题的一些答案（如何从访问中提取模式）](https://stackoverflow.com/questions/698839/how-to-extract-the-schema-of-an-access-mdb-database/700852#700852)也很有用。使用建议的一种技术提取模式后，您将获得一系列新选项，例如对模式使用源代码控制的能力，以及能够轻松构建“干净”测试环境的能力。

编辑以回应评论：没有简单的方法可以以本机格式对 Access 数据库进行源代码控制，但架构文件就像任何其他文件一样只是文本文件。因此，您可以将它们签入和签出您选择的源代码控制软件，以便于版本控制/回滚。

或者，当然，它依赖于您设置了一系列脚本来从模式中重新构建您的数据库。一旦你这样做了，创建一个在不同位置重建它的选项/替代版本通常相当简单，允许你从任何以前提交的模式版本构建测试环境。我希望澄清一点！

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-05-21T11:39:35.267

您需要了解数据的共享 mdb 文件不是一个可靠的解决方案。Microsoft 会建议 SQL Server 或其他一些基于服务器的数据库将是一个更好的解决方案，并允许您使用相同的访问前端。如果您想这样做，迁移向导将帮助您进行转换。

正如另一个用途所指出的那样，会发生腐败。这只是一个频率问题，而不是是否。

要了解性能问题，您需要了解对于服务器而言，其中包含数据的 mdb 文件就是一个文件。由于服务器上没有运行代码，服务器不理解事务、记录锁定等。它只知道有一个文件是一堆人同时试图读写的。

拥有SQL Server、Oracle、DB2等数据库系统。MySQL 等数据库程序在服务器上运行，并将服务器视为访问数据库文件的单个程序。它是数据库程序（在服务器上运行），它处理记录锁定、事务、并发、日志记录、数据备份/恢复以及人们希望从数据库中获得的所有其他好处。

由于设计为在服务器上运行的数据库程序旨在做到这一点，并且只做到这一点，因此它可以比 Access 读取和写入共享文件 (mdb) 之类的程序做得更好、更有效。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2009-05-21T11:26:05.950

针对实时数据进行开发有两条规则

> 第一条规则是。. . 永远不要针对实时数据进行开发。永远不会。
> 
> 第二条规则是。. .从不针对实时数据进行开发。永远不会。

您可以以编程方式更改链接表的绑定，因此您可以编写一个宏来在部署新版本时更改链接。

该应用程序很慢，因为它是 MS Access，并且它不喜欢很多并发用户（其中​​许多是任何数字 > 1）。

# nhibernate - 我可以为两个类写一个 hbm 文件吗

> ID：892417
> 
> 赞同：1
> 
> 时间：2009-05-21T11:14:39.063
> 
> 标签：nhibernate

我有两个表都与主外键关系相关，我有两个对应的 pojo

现在我可以为这两个类编写单个属性文件（hbm）吗

如果可以，请提供典型的 hbm 文件示例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T08:02:21.170

我们可以在单个 hbm 文件中编写任意数量的类

# ruby-on-rails - RoR：AuthenticatedSystem 未正确重定向回 Safari

> ID：892422
> 
> 赞同：0
> 
> 时间：2009-05-21T11:15:43.147
> 
> 标签：ruby-on-rails, authentication, redirect, safari

这几天我一直在用头撞这个：

我有一个使用 AuthenticatedSystem 的 RoR 应用程序来要求对某些资源进行身份验证。before_filter 检查用户是否已登录。如果没有，它会抓取 request.request_uri 并将其放入会话变量 (session[:return_to])，然后通过 302 重定向消息将用户发送到登录页面。然后在登录后，用户被重定向回 session[:return_to] 中的 url。

这在 IE 和 Firefox 中效果很好。在 Safari 中，初始 before_filter 上的 request.request_uri 是空白的，并且会话控制器总是重定向到主页。

有没有人遇到过这个？我唯一的线索是 Safari 的 Web Inspector 甚至不显示初始页面的请求，只显示登录请求。在 Firefox 中，我看到了这两个请求。

这是 before_filter：

```
def login_required
  if !authorized?
    session[:return_to] = request.request_uri
    redirect_to new_session_path
  end
end 
```

这是会话/创建：

```
def create
  self.current_user = User.authenticate(params[:login], params[:password])
  if logged_in?
    if params[:remember_me] == "1"
      current_user.remember_me unless current_user.remember_token?
      cookies[:auth_token] = { :value => self.current_user.remember_token , :expires => self.current_user.remember_token_expires_at }
    end
    redirect_back_or_default('/')
    flash[:notice] = "Logged in successfully"
  else
    flash.now[:error] = "Authentication failed."
    render :action => 'new'
  end
end 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T17:49:25.817

所以，以防万一有人遇到这个......

答案似乎在于 Safari 对 3rd 方 cookie 的积极阻止。这个错误发生在书签中，它基本上是当用户决定使用它时添加到第三方网站的 DOM 中的 iframe（别担心，它类似于 FriendFeed 的书签 - 基本上是用户添加内容的一种方式从其他网站，而无需离开这些网站）。

无论如何，在这种情况下，Safari 会将 Rails 尝试设置的会话 cookie 视为第三方，即使它是从 iframe 内部设置的。因此，在重定向时，所有会话变量都将丢失。

出现了两种可能的解决方案

*   告诉用户允许第三方 cookie（对此选项不满意）
*   将“return_to”url 与表单数据一起传递并在会话控制器中检索它（更好的选择）

# .net - 在一个基本表单中可以访问多个“应用程序”

> ID：892426
> 
> 赞同：0
> 
> 时间：2009-05-21T11:17:42.300
> 
> 标签：.net, winforms

我有两个本质上独立的应用程序来配置这家公司销售的两个硬件。

我被要求将这两个应用程序放在一起，以便可以从同一个程序中访问它们，从而使两者都可以访问。这个想法的一个类比是打开一个程序，选择一个要打开的文件，然后根据文件的类型打开一个文档编辑器或电子表格编辑器。

对于应用程序的大多数方面来说，这并不是特别困难，但我的问题主要来自整合应用程序的主工具栏。两个不同的应用程序中的每一个都有自己的一组与一组公共按钮相关的功能，以及拥有自己的一组按钮。

我可以通过类型检查将代码中的按钮响应分开，即

```
If documentOpened.isSpreadsheet
  spreadSheetFunction()
Else
  documentFunction() 
```

但这对我来说似乎很乱，将两个类的功能合并到一个臃肿的接口类中。

鉴于这两个接口如此不同，有什么方法可以实现更大程度的封装吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T11:39:34.330

我不知道.Net，所以这是一般的面向对象编程建议。但是，您看起来像是在问一个一般的 OO 设计问题。

看起来您正在尝试进行[双重调度](http://en.wikipedia.org/wiki/Double_dispatch)；也就是说，根据两个不同事物的运行时类型选择实际执行的代码。

实现双重调度的传统 clean-OO 方式是使用[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)。不要被名称或描述模式的示例所迷惑，以走某种包含结构；即使您一次只有一个对象，它也非常有用！

基本上，您要做的是定义一些接口 - CommonButtonHandler - 然后为电子表格和文档实现一个实现。单击常见的“旋转”按钮时，您可以：

```
// Inside CommonTwiddleButton.onClick()
currentCommonButtonHandler.twiddleButtonClicked() 
```

网上有一些很好的例子，使用访问者模式进行双重调度；请务必搜索这两个术语，否则您最终会得到一堆假设您需要遍历某种异构集合的访问者模式示例，或者是一堆 lisp 小鬼吹嘘他们的对象系统如何进行多次调度默认情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T11:43:22.560

浮现在脑海中的是访问者设计模式（尽管它可能在最严格的意义上并不适用）。如果您定义了一个包含工具栏上所有按钮的界面，然后为每种文档类型实现了一个类，这将按照 Daniel 的建议正常工作。大纲代码将是

```
public interface IToolbarHandler {
  void ButtonOne;
  void ButtonTwo;
  //etc
}

public class SpreadsheetToolbarHandler : IToolbarHandler {
   public void ButtonOne {
      //Do Some action
   }
   public void ButtonTwo {
      //Do Some action
   }
}

public class DocumentToolbarHandler : IToolbarHandler {
   public void ButtonOne {
      //Do Some action
   }
   public void ButtonTwo {
      //Do Some action
   }
} 
```

然后只需有一个 IToolbarHandler 类型的表单级变量，并设置为当前正在查看的文档的相关处理程序的实例。然后您的工具栏事件处理程序只需调用该变量的相关方法。

# sql - oracle subselect 与动态表和列

> ID：892429
> 
> 赞同：0
> 
> 时间：2009-05-21T11:19:31.127
> 
> 标签：sql, oracle

我想运行以下 SQL 选择：

`SELECT ID,
NUMERATOR,
(SELECT m.COLUMNNAME FROM m.TABLENAME p WHERE p.numerator = m.numerator
) VALUE,
TABLENAME,
COLUMNNAME
FROM MainTable m;`

在当前状态下，它根本不运行，自然，因为 oracle 根本无法识别 m.TABLENAME。有可能以某种方式做这种事情吗？相同的`COLUMNNAME`- 即使我暂时将表替换为我拥有的某个“真实”表，在当前语法下，它只是`m.COLUMNNAME`在名称为 的列处输出内部值而不是 p 内部的值`m.COLUMNNAME`。
希望我能弄清楚这一点。

我想我的另一种方法是创建一个迭代第一个查询结果的过程，并为每个查询执行另一个选择以填充`VALUE`列。这是我能做到的最好的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T11:28:59.813

您将不得不使用[动态 SQL](http://www.cs.umbc.edu/help/oracle8/server.815/a68022/dynsql.htm)即 PL/SQL 或在您的应用程序中动态构建您的 SQL 语句。正如您所注意到的，Oracle 不支持这种行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T12:00:53.743

**使用 cletus 的解决方案可能更容易。**

但也不是完全不可能做到这一点，你可以使用`dbms_xmlgen.getxml(' ')`, using`dbms_xmlgen.getxml(' ')`使得在 sql 语句中创建动态 sql 语句成为可能。

不要指望有好的表现！！

参见示例：[在 Oracle 中识别具有最大行数的表](https://stackoverflow.com/questions/390945/identify-a-table-with-maximum-rows-in-oracle/391026#391026)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T02:11:48.610

如果只有少数可能的表名/列名，您可以执行类似的操作

```
SELECT ID,
      NUMERATOR,
      case 
        when m.table_name = 'A' and m.column_name = 'B' then
          (SELECT b FROM a WHERE a.numerator = m.numerator)
        when ....
      end VALUE,
      TABLENAME,
      COLUMNNAME
FROM MainTable m; 
```

任何超过 3 或 4 的东西都会让这变得非常难看

# asp.net - 是否可以使用 Javascript 禁用服务器端按钮的提交行为

> ID：892430
> 
> 赞同：3
> 
> 时间：2009-05-21T11:20:26.570
> 
> 标签：asp.net, javascript

是否可以使用 Javascript 禁用服务器端按钮的提交行为？注意：我不想禁用该按钮，用户将单击该按钮，但它不会从服务器提交/获取任何值。

设想：

```
 <asp:Button ID="Button1" runat="server" Text="Submit"  onclick="Button1_Click"  OnClientClick="Check()" /> 
```

javascript:

```
function Check() 
{
  var res = confirm(" Are u sure whatYou have selected ")
  if (res) 
  {
    alert("yes");
  }
  else {
    //Here I need to disable the submit behavoiur                        
  }
 }
}
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-21T11:23:26.657

您需要确保在标记中将 UseSubmitBehavior 设置为 false，然后您需要确保在调用回发 javascript 之前返回 false。

* * *

编辑：

你应该返回你的函数的值，如果你想要回发，则在函数中返回 true，如果你不想要，则返回 false。

```
<asp:Button ID="Button1" runat="server" Text="Submit"  onclick="Button1_Click"  
  OnClientClick="return Check();" UseSubmitBehavior="false" /> 
```

Javascript：

```
function Check()
{
     return confirm(" Are u sure whatYou have selected ");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-21T11:21:40.110

确定：从提交按钮的单击处理程序返回 false。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T11:25:52.550

```
<input type='submit' onclick='return false;' /> 
```

像这样的事情（如果不是在 asp.net 中以不同的方式完成的话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-03-18T18:37:53.160

对我来说使用

**OnClientClick="if (!confirm('are you sure?')) return false;"**

代替

1-OnClientClick="return Confirm('你确定吗？'))"

或者

2-OnClientClick="confirm('你确定吗？'))"

解决了问题

```
<asp:Button UseSubmitBehavior="false" OnClientClick="if (!confirm('are you sure?')) return false;" > 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-21T11:34:54.683

```
<%@ Page Language="C#" AutoEventWireup="true"  CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Untitled Page</title>
    <script>
    function dostuff() {
    alert('hello');
    }
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <% =DateTime.Now.ToString() %>
        <asp:Button ID="Mybutton" runat="server" UseSubmitBehavior="false" Text="Click"
        OnClientClick="dostuff(); return false;" />
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-21T12:03:00.867

我不会推荐其他方法，因为它们有两个问题：

1.  Javascript 不应嵌入 HTML 中。这只是一种糟糕的形式，现在它是一种神秘的做法。有很多关于这个的讨论。
2.  单击提交按钮并不是提交表单的唯一方法。如果用户点击回车按钮，您仍然会遇到问题，因为 onclick 处理程序根本不会被触发。

在您的情况下，您只需要在您的`else`块中包含以下内容：

```
document.getElementById("YourFormId").onsubmit = function() { return false; } 
```

因此，该事件在您的表单上而不是您的按钮上，它是一个 onsubmit 事件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-08-13T09:35:23.087

只是说返回 false，在客户端点击事件中执行，这将不会继续提交（或 asp.net 中的 __doPostBack()）

# asp.net - 如何制作由 XmlDocument() 创建的可下载文件

> ID：892436
> 
> 赞同：3
> 
> 时间：2009-05-21T11:21:45.367
> 
> 标签：asp.net, xml

我创建了一个文件

```
XmlDocument xmldoc = new XmlDocument(); 
```

我可以将此文件设置为可下载吗？不保存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T11:31:50.570

您可以执行以下操作：

```
XmlDocument doc = new XmlDocument();
doc.LoadXml(@"<xml>myxml</xml>");
Response.Clear();
Response.AddHeader("Content-Disposition", "attachment;filename=MyXmlDocument.xml");
Response.AddHeader("Content-Length", doc.OuterXml.Length.ToString());
Response.ContentType = "application/octet-stream";
Response.Write(doc.OuterXml); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T11:30:48.780

这是如何：

```
xmldoc.Save(Response.OutputStream) 
```

不要忘记设置响应 mime 类型和其他相关属性，以便客户端浏览器将其理解为文件下载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T11:33:23.360

您需要响应它的请求，将文档保存到响应中。当然，您需要能够以某种方式*获得*`XmlDocument`- 如果您在一个请求中创建了它（例如，对于一个页面），您需要能够根据参数重新创建它，或者将它缓存在会话（带有所有正常的警告）。

对于写出它的示例，在正常情况下`Page`您可能会这样做：

```
xmldoc.Save(Response.OutputStream); 
```

或者

```
xmldoc.Save(Response.Output); 
```

您可以轻松地创建一个 .ashx 文件和关联的代码隐藏（新的“通用处理程序”项），然后在实现的代码隐藏中`IHttpHandler`使用`ProcessRequest`：

```
public void ProcessRequest(HttpContext context)
{
    XmlDocument doc = ...;

    doc.Save(context.Response.OutputStream);
} 
```

您可能还想设置适当的内容类型（可能是“text/xml”，除非它是您希望以不同方式解释的特定 XML 格式）等。如果您希望客户端默认保存它，您应该设置内容处置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T11:28:16.740

你会想看看编写一个**自定义 HTTP 处理**程序（一个实现 的类`IHttpHandler`）并简单地在 web.config 中注册它。有关如何设置的一个很好的示例，请参阅[MSDN 上的这篇文章。](http://msdn.microsoft.com/en-us/library/ms228090.aspx)

这是一个基本示例，说明如何实现一个以返回`XmlDocument`.

```
using System.Web;

public class MyXmlDocumentHandler : IHttpHandler
{
    public static XmlDocument XmlDoc
    {
        get;
        set;
    }

    public MyXmlDocumentHandler()
    {
    }

    public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "text/xml"; // Set the MIME type.
        XmlDoc.WriteTo(context.Response.OutputStream); // Write the XML markup to the respone stream.
    }

    public bool IsReusable
    {
        // To enable pooling, return true here.
        // This keeps the handler in memory.
        get { return false; }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-21T11:32:48.743

与 Noldorin 发布的内容不同，您不必创建自定义 HTTP 处理程序。

如果要下载由 XmlDocument 类创建的 XML 文档，可以随时将其直接保存到流中，将其内容类型设置为`text/xml`.

或多或少类似于以下代码：

```
XmlDocument xmldoc = new XmlDocument();

/*
 * ... more code ...
 */

this.Response.ContentType = "text/xml";

xmldoc.Save(this.Response.OutputStream); 
```

# svn - svn 复制后文件最终位于错误的目录中

> ID：892439
> 
> 赞同：3
> 
> 时间：2009-05-21T11:22:29.373
> 
> 标签：svn, copy

我想将一个项目的主干复制到另一个项目，所以我使用以下命令：

svn copy -m "test" (项目地址来自)/Trunk/ (项目地址地址)/Trunk/

这些文件最终出现在 (url of project to)/Trunk/Trunk/ 而不是 (url of project to)/Trunk/ 我希望它们去的地方。

我做错了什么吗？如果我想要（项目的url到）/Trunk/中的文件我该怎么办？执行以下操作似乎没有意义：

svn copy -m "test" (项目地址)/Trunk/ (项目地址)/

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-12-24T15:40:53.797

此外，在创建分支（或“分支”，对于 svn，只是复制的一个花哨术语）时，如果您主动并首先创建分支目录，您会遇到同样的问题。
假设您想从旧的“单目录”方法转移到“主干分支”方法。
您开始`http://my/path`
并希望进入这样的结构
`http://my/path/trunk`：
`http://my/path/branches/foo`和
`http://my/path/branches/bar`

因此，如果您首先创建分支目录：
`# svn mkdir http://my/path/branches`
`# svn mkdir http://my/path/branches/foo`
`# svn mkdir http://my/path/branches/bar`
然后试试这个：
`# svn copy http://my/path/trunk http://my/path/branches/foo`

**`'trunk'`被复制到分支中**：
`# http://my/path/branches/foo/trunk/...`

如果您尝试使用通配符，那么**通配符不起作用**：
`# svn copy http://my/path/trunk/* http://my/path/branches/foo`

**唯一可行**的方法是**不`mkdir branches/foo`**直接这样做：
`# svn copy http://my/path/trunk http://my/path/branches/foo`

这行得通。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T11:32:18.900

您应该`svn copy -m "test" (url of project from)/Trunk/ (url of project to)/`将主干复制到项目，因为您正在复制整个文件夹。

我不确定 svn 副本中是否允许使用通配符，要执行 /trunk/* 之类的操作，您应该查看文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T11:38:08.500

如果您的目的地中的某些内容已经存在，您需要在复制其他内容之前将其删除。在您的情况下，这也可能`svn copy`不是正确的做法，但很难猜测。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-04-19T00:30:56.293

我发生的事情是由于SVN在目录中复制而存在目标路径

我删除了目标目录执行了一个副本，这似乎完成了这项工作。

也许我应该使用强制选项完成 svn 复制，但我去了 svn rm 然后 svn 复制。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-21T11:51:17.570

当我开始使用 SVN 时，我遇到了很多这个问题。

恕我直言，您可能对您的 URL 和工作目录感到困惑。如果你分支

```
svn copy -m "I want a branch man" http://theproject/proj/trunk http://theproject/proj/branches/today 
```

那么主干将在今天结束，这就是你想要的。然后，当您切换时，您将使用

```
svn switch http://theproject/proj/branches/today . 
```

**但是按照你指定的方式，整个事情会有所不同**

```
svn copy -m "I need another trunk yo" http://theproject/proj/trunk http://theproject/anotherproj/trunk 
```

那么你需要切换到正确的目录

```
svn switch http://theproject/anotherproj/trunk . 
```

我在上面的例子中使用了句号，但是你必须小心去正确的地方......

换句话说，这种trunk/trunk 事情一直在发生，但是当您检查存储库URL 和工作目录（在OSX 上使用SVNX 或在Windows 上使用TortoiseSVN）时，您会发现这只是您的困惑:)

# nsis - 如何从 NSIS 安装程序“刷新”Windows 7 开始菜单？

> ID：892442
> 
> 赞同：3
> 
> 时间：2009-05-21T11:23:05.550
> 
> 标签：nsis, uninstallation, startmenu

我有一个在开始菜单中创建快捷方式的安装程序 (NSIS)。当我删除程序时，卸载会从以下位置删除文件夹：

```
C:\Users\<username>\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\ 
```

不幸的是，该文件夹仍在开始菜单中。也许这只是刷新开始菜单的问题 - 但是如何从 NSIS 卸载程序中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-21T14:26:25.070

Win7 可能和Vista 一样，在不告诉你的情况下将快捷方式复制/移动到所有用户的开始菜单。通过在脚本中使用 RequestExecutionLevel 来停止此操作。

请参阅[http://nsis.sourceforge.net/Shortcuts_removal_fails_on_Windows_Vista](http://nsis.sourceforge.net/Shortcuts_removal_fails_on_Windows_Vista)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T11:41:21.630

我没有 Windows 7 的副本，所以我不能肯定地说，但是您确认您删除的文件夹是开始菜单中的实际文件夹（我假设它是因为您最初创建它）。

您可以转到开始菜单中的文件夹，右键单击并打开它。

虽然可能是一个愚蠢的建议。:)

# ruby - 抓取鼠标移动

> ID：892446
> 
> 赞同：0
> 
> 时间：2009-05-21T11:24:29.823
> 
> 标签：ruby, qt, keyboard, mouse

我正在使用 qt 在 ruby​​ 上为我写一些实用程序。如何访问全局鼠标移动和键盘输入事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T21:09:25.117

如果您需要在未单击任何按钮时跟踪鼠标移动，则需要在要跟踪鼠标的小部件上打开鼠标跟踪。[`QWidget::setMouseTracking()`](http://doc.qtsoftware.com/4.5/qwidget.html#mouseTracking-prop)所有 s 上都可用的功能`QWidget`将让您做到这一点。

要捕获鼠标移动，您需要捕获`QMouseMoveEvent`s. 有两种方法可以做到这一点：

*   如果您要定义自己的小部件，请重新实现[`QWidget::mouseMoveEvent()`](http://doc.qtsoftware.com/4.5/qwidget.html#mouseMoveEvent).
*   如果您使用的是股票小部件，那么您可以创建一个事件过滤器类并在您想要跟踪鼠标移动的小部件上安装一个事件过滤器。见[`QObject::installEventFilter()`](http://doc.qtsoftware.com/4.5/qobject.html#installEventFilter)。

对于官方 Qt 文档，请单击感兴趣的函数上的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T11:43:26.540

使用[QWidget::grabMouse()](http://doc.trolltech.com/4.4/qwidget.html#grabMouse)并注意它是一个非常**危险**的函数，请谨慎使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-24T11:00:07.540

对于鼠标位置，您是否尝试[过 QCursor::pos()](http://doc.trolltech.com/4.5/qcursor.html#pos)？

# css - SharePoint 开发人员应如何与图形设计师合作处理他们的项目？

> ID：892455
> 
> 赞同：2
> 
> 时间：2009-05-21T11:27:50.347
> 
> 标签：css, sharepoint, sharepoint-designer

我在 SharePoint 项目中合作过的图形设计师并不了解/了解很多 SharePoint。特别是他们不知道开发发布网站基本上需要的 SharePoint Designer。

为了解决这个问题，我发现通常会发生以下工作流程：

1.  使用网络浏览器保存站点中“主要”页面的副本。
2.  将副本发送给设计师。
3.  Designer 进行更改并将更新的文件发回。
4.  开发人员在原始副本和更改副本之间执行差异，并将 CSS 和 HTML 的更改合并到母版页和页面布局中。
5.  发现问题，从步骤 1 重新开始。

这样做存在问题，例如：

*   设计者不知道他们所做的某些更改无法轻松地反映在 SharePoint 中。这是由于控制渲染不容易更改。
*   从 Web 浏览器保存页面时，SharePoint 网站的某些动态部分无法正常工作/运行。
*   开发人员需要完成一些设计工作才能合并更改。

对于在 SharePoint 网站上与 CSS/图形设计师合作以获得快速、准确的结果，您有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T12:37:20.703

我认为你的过程几乎和它一样好。如果设计师不知道 sharepoint，您所能做的就是鼓励他们尽可能多地对 css 进行更改。（然后做你的差异并应用它）。

使用 ASP.Net 和 Sharepoint，如果您希望利用某些组件，您将受限于如何更改标记。

您可以说服设计师使用 Expression Blend。但最有可能的是，除非他们有开发经验或者你愿意对他们进行一些培训，否则必须有一些开发人员参与。

我训练我的设计师使用 Visual Studio，它让我的生活变得轻松了许多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-23T12:38:01.457

在Diantha van Marion撰写的[这篇 SharePoint 杂志文章](http://sharepointmagazine.net/technical/development/sharepoints-branding-limitations-part-1)中，对开发人员/设计人员交互如何发挥最佳效果进行了很好的讨论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T12:43:23.063

我要补充一点，您的清单应以：

#0。最好询问设计师他们希望页面使用什么标记

虽然他们的一些请求可能是不可能的，正如你所说，由于控制渲染，这意味着当页面来到他们面前进行设计时，他们想要更改标记的实例将更少。

此外，要从 Web 浏览器保存页面，请尝试使用[save complete](https://addons.mozilla.org/en-US/firefox/addon/4723) firefox 扩展

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-21T12:46:04.620

我建议让设计人员使用 SharePoint Designer 在沙盒环境中处理标记。然后，当他们对设计感到满意时，将其移交给开发团队以在 SharePoint 解决方案中实施。

# .net - 关于 .NET 程序集的公钥令牌的说明

> ID：892456
> 
> 赞同：1
> 
> 时间：2009-05-21T11:28:06.990
> 
> 标签：.net

来自 Wikipedia 的引述：“公钥令牌。这是公钥的 64 位散列，对应于用于签署[1](http://en.wikipedia.org/wiki/.NET_assemblies)程序集的私钥。签名的程序集据说具有强名称。” [来源： [http](http://en.wikipedia.org/wiki/.NET_assemblies) ://en.wikipedia.org/wiki/.NET_assemblies ]

它是否正确？我觉得这与下面的解释不一致：“签署程序集涉及获取程序集重要部分的哈希，然后用私钥加密哈希。签名的哈希与公钥一起存储在程序集中。 "

第一个报价是否正确。能否请您简单地解释一下签名的过程。

编辑： **我的问题是散列的公钥还是使用密钥加密的散列？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T11:38:59.950

MSDN 始终是此类事情的最佳（并且几乎总是完全准确）的来源。从[创建和使用强命名程序集](http://msdn.microsoft.com/en-us/library/xwb8f617.aspx)的页面：

> 强名称由程序集的标识（其简单的文本名称、版本号和文化信息（如果提供））以及公钥和数字签名组成。它是使用相应的私钥从程序集文件生成的。（程序集文件包含程序集清单，其中包含构成程序集的所有文件的名称和哈希值。）

所以维基百科似乎是模糊正确的，但没有在那里讲述完整的故事。

该 MSDN 页面还链接到一些更深入地了解 .NET 程序集的强名称签名的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T12:09:51.790

公钥令牌基于用于签署程序集的密钥，因此如果您获取两个程序集并使用相同的密钥对它们进行签名，则它们的公钥令牌将相同。

但是，它们的签名（通过签名过程添加到程序集的数据）将不一样，因为这是基于程序集内容和密钥的。

# .net - 无法从“WCHAR”转换为“WCHAR [260]”

> ID：892458
> 
> 赞同：0
> 
> 时间：2009-05-21T11:28:17.240
> 
> 标签：.net, c++, visual-c++

我正在尝试修改 amcap，这是 Windows SDK 示例中的一个应用程序，用于从分辨率为 1600x1200px 的 UVC 网络摄像头捕获视频。

我正在尝试在这里硬编码一些变量，例如文件名、默认分辨率、格式类型等。

```
WCHAR wszCaptureFile[260]; 

gcap.wszCaptureFile = (WCHAR)"Capture.avi\0"    //modified 
```

gettnig 错误：

> 1>.\amcap.cpp(3887)：错误 C2440：“=”：无法从“WCHAR”转换为“WCHAR [260]”

我能做些什么来纠正这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-21T11:36:25.353

您不能用 = 分配数组 wszCaptureFile （就像您所做的那样）。您可以使用[strcpy](http://msdn.microsoft.com/en-us/library/kk6xf663(VS.80).aspx)等复制方法。

> wcscpy 和 _mbscpy 是 strcpy 的宽字符和多字节字符版本

前任：

wcscpy(gcap.wszCaptureFile, L"Capture.avi");

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-21T11:45:53.633

提供文字宽字符串并使用安全复制功能：

```
wcscpy_s(gcap.wszCaptureFile, L"Capture.avi"); 
```

文字字符串提供终止的零字节。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-21T11:36:06.880

根据对答案的评论进行更新......并考虑 wstrcpy_s 。

```
wstrcpy ( wszCaptureFile, L"Capture.avi" ); 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2009-05-21T11:38:26.363

您将字符串转换为 WCHAR 元素，而不是您希望的 WCHAR 数组。尝试：

```
wszCaptureFile = L"Capture.avi\0"; 
```

# postgresql - postgreSQL 服务器中的连接尝试失败

> ID：892461
> 
> 赞同：2
> 
> 时间：2009-05-21T11:29:00.857
> 
> 标签：postgresql, tomcat, jdbc

在我们的项目中，我们使用 postgresSql(8.3) 作为数据库服务器，但我们很少遇到问题（偶尔）。在日志文件中我看到错误喜欢

```
 ****Connection attempt failed**** 
```

这对我来说意味着，应用程序正在尝试从数据库服务器获取连接对象，但没有成功。

奇怪的是，当我重新启动数据库服务器或 Webserver(Tomcat) 时，它会正常工作。我很少会收到此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-23T21:11:07.220

这里有一些可能导致这种情况的事情，没有更多细节我不能说更多。

1.网络错误。连接字符串的一部分有可能没有传递给 PostgreSQL。见第 2 项。

2.连接字符串损坏。连接字符串是动态创建的吗？

3.连接池问题。不过，这应该会在您的连接池中引发错误。在不知道您使用的是什么类型的连接池的情况下，我不能排除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-11-29T08:27:19.753

您可能超过了最大连接数。查看 postgresql.conf 中的 max_connections 参数，大多数版本的默认值为 100。

```
netstat -tn | grep -c 5432 
```

应该为您提供当前打开的连接数的近似值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T11:39:35.720

当用户取消请求并且服务器在请求中间终止连接时，这在 web 应用程序中很常见。听起来它实际上并没有停止服务器吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-29T15:29:45.740

确保`finally`在打开块后关闭资源（连接、语句、结果集）。如果您使用的是连接池，还要确保它的 maxsize 没有设置得太高。

# c++ - 字符编码混乱！

> ID：892462
> 
> 赞同：3
> 
> 时间：2009-05-21T11:29:07.177
> 
> 标签：c++, unicode, character, encoding

在理解 UTF-8、UTF-16、ASCII 和 ANSI 之间的差异时遇到了一些问题。在做了一些研究之后，我有了一些想法，但如果有人能准确地解释它们之间的区别（包括每个字符的典型字符的字节表示），那将非常有用。

我想我的问题归结为

> ```
> 1) How do each of the above store characters as bytes
> 2) What are the differences between the above standards
> 3) What is a code page
> 4) Method of converting characters between the various types. 
> ```

非常感谢 ：）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-21T11:32:23.020

我发现[Joel](http://www.joelonsoftware.com/articles/Unicode.html)关于 Unicode 的文章很好地解释了这一点。具体来说，它涵盖了历史（本主题所必需的）、编码（UTF-8/16 等）和代码页。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-21T12:13:05.823

快速尝试回答您的具体问题。

1：某种位组合代表某个字符。单个字符可以存储在多个字节中。

2：您提到的编码的简要信息和差异。

**ASCII**
包括 128 个字符的定义。

**ANSI**
具有比 ASCII 更多的字符，但仍适合八位字节。需要代码页。

**UTF-8**
这可用于表示任何 Unicode 字符。Unicode 字符比 ASCII 字符多得多。它将每个字符存储在一到四个八位字节的数据中。

**UTF-16**
与 UTF-8 类似，但基本单位是 16 位。如果您只是使用英语，那么您在每个字符上浪费了 8 位。

3：代码页是向计算机指定哪个（位组合）指代哪个字符。Unicode 不需要代码页，因为每个字符都有自己独特的位组合。ANSI 有代码页，因为它只有 256 个可用字符。例如，如果您使用的是阿拉伯语计算机，您会将阿拉伯语设置为代码页，并且可以显示阿拉伯语字符。

4：转换方法取决于您要转换的字符集和使用的代码页（如果有）。有些转换可能是不可能的。UTF-8 向后兼容 ASCII，这意味着如果您的文本仅包含前 128 个美国字符，则它与 ASCII 编码中的相同文本完全相同。

这个答案是临时的，可能有错误，欢迎指正。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-21T11:33:19.523

[从每个软件开发人员绝对、肯定必须了解 Unicode 和字符集的绝对最小值](http://www.joelonsoftware.com/articles/Unicode.html)开始（没有任何借口！） （来自 Joel on Software 博客）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T11:55:28.183

O'Reilly CJKV 信息处理包含很多关于字符集和字符编码的背景知识：当然，特别关注 CJKV 数据。我发现让我的理解超越“如何让 !*!**#@ 欧元符号正确显示？”很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-21T11:56:38.103

在 Unix 上，使用名为`recode`or的程序`iconv`将文本文件转换为另一种编码，或者在 C 或 C++ 程序中使用`iconv`函数 ( )。`man 3 iconv`

如果您使用 Perl，请使用该`Encode`模块进行转换（例如`use Encode; print encode("utf-8", "\xabfoo")`）。如果您使用 Python，请使用`unicode.encode`和/或`str.decode`（例如`print u'\xabfoo'.encode('utf-8')`）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-03-26T13:52:20.573

一些有用的随机点：

*   关于 UTF-8 和 ASCII 的一个有趣的事情是 127 个 ASCII 字符在 UTF-8 中以完全相同的方式编码（这也可能是其他 UTF 方案的情况，我不确定）换句话说，在ASCII 范围或字符，ASCII 和 UTF-8 是完全可以互换的。

    出现这种情况的方式是 UTF-8 是可变长度的；“第一个”127 个字符分别由一个字节表示。除此之外，它开始使用多个字节。解码器如何知道是将字节解释为单个 ASCII 字符还是多字节序列的一部分？因为字节开头的位遵循某些模式：开头的 0 位表示它是一个单字节字符，*n* 1 位表示该字节是*n*字节序列的开头。

*   此外，不同的语言在输出它们时会将它们的原生字符串转换为不同的编码，例如，将它们打印到文件或屏幕上。因此，如果您对语言和平台之间的互换性感兴趣，您应该始终指定您希望如何输出您的语言的字符串类型。否则你会得到奇怪和意想不到的错误！

*   UTF-8 也是 XML 的标准。

# javascript - Javascript继承

> ID：892467
> 
> 赞同：0
> 
> 时间：2009-05-21T11:29:43.120
> 
> 标签：javascript, inheritance

我目前正在尝试几种不同的 Javascript 继承方法。我有以下代码：

（“借用”自[http://www.kevlindev.com/tutorials/javascript/inheritance/index.htm](http://www.kevlindev.com/tutorials/javascript/inheritance/index.htm)）

```
KV = {};

KV.extend = function(subClass, baseClass) {
       function inheritance() {}
       inheritance.prototype = baseClass.prototype;

       subClass.prototype = new inheritance();
       subClass.prototype.constructor = subClass;
       subClass.baseConstructor = baseClass;
       subClass.superClass = baseClass.prototype;
    }

function GridView() {
        var _ownerElement;
    }

    GridView.prototype.getOwnerElement = function() {

        return this._ownerElement;
    }

    GridView.prototype.setOwnerElement = function(ownerElement) {
        this._ownerElement = ownerElement; 
    }

    GridView.prototype.initialize = function() {
        this.setOwnerElement('test');
    }

function StreetGridView(dataURL, ownerElement) {
        StreetGridView.baseConstructor.call(this);

        StreetGridView.superClass.initialize();

        StreetGridView.superClass.setOwnerElement(ownerElement);

}

// subclass StreetGridView
KV.extend(StreetGridView, GridView); 
```

现在，当我创建 StreetGridView 的一个实例时，我可以在它上面调用 getOwnerElement() 没有问题。一切都按预期工作。

然而

当我创建另一个实例时，对实例 2 所做的任何更改都会反映在实例 1 中。

我知道这是使用原型作为共享实例信息的主要问题。今天早上我一直在绞尽脑汁，但想知道是否有人可以为我指明正确的方向！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-10-29T04:35:27.630

the_drow:

我在上面留下了关于使用您的解决方案调用超级构造函数两次的评论 - 但是让您挂在 inheritPrototype 的实现上感觉有点糟糕。首先，感谢 Nicholas Zakas，因为这是我对他的书 Professional JavaScript for Web Developers, 2nd Ed（第 181 页）的解释：

```
function inheritPrototype(sub,sup) {
  var proto = object(sup.prototype);// you'll need an object create method ;)
  proto.constructor = sub;
  sub.prototype = proto;
} 
```

现在替换你的：

```
StreetGridView.prototype = new GridView(); 
```

和，

```
StreetGridView.prototype = inheritPrototype(StreetGridView,GridView); 
```

而且您只调用了一次 GridView 构造函数！但是你会注意到对象方法。你需要类似的东西：

```
function object(o) {
  function F(){};
  F.prototype = o;
  return new F();
} 
```

如果你读过任何一本道格拉斯·克罗克福德的书，你就看过这个！

**无耻的插件：** *这东西很难理解，这正是我写一篇关于 TDD JavaScript 的文章的确切原因，整个第二部分有一堆继承模式的单元测试。我正在专门研究 Zakas 和 Crockford 关于对象创建和继承的书籍。你不必阅读我的文章（它目前是 Open Office .odt 格式），但你可以做的比下载我的代码并在 2 分钟内阅读更糟糕！这是链接：* [我的免费书](http://github.com/roblevintennis/Testing-and-Debugging-JavaScript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T11:44:22.263

灵感来袭！

我无法让这种模式发挥作用，所以如果你能发现它有什么问题，请告诉我。但是移动东西并使用组合继承，我似乎已经解决了这个问题。

我已包含以下代码并将此帖子留在论坛上以帮助其他人。

```
function GridView() {
        var _ownerElement;
    }

    GridView.prototype.getOwnerElement = function() {

        return this._ownerElement;
    }

    GridView.prototype.setOwnerElement = function(ownerElement) {
        this._ownerElement = ownerElement; 
    }

    GridView.prototype.initialize = function() {
        this.setOwnerElement('test');
    }

    function StreetGridView() {

        GridView.call(this);
    }

    StreetGridView.prototype = new GridView();

    StreetGridView.prototype.initialize = function(dataURL, ownerElement) {

        this.setOwnerElement(ownerElement);

        /* Constructor Code */

        $(this.getOwnerElement()).flexigrid
            (
                {
                    url: dataURL,
                    dataType: 'json',
                    colModel: [
                    { display: '', name: 'view', width: 20, sortable: true, align: 'center' },
                    { display: 'USRN', name: 'USRN', width: 80, sortable: true, align: 'center' },
                    { display: 'Street', name: 'Street', width: 260, sortable: true, align: 'left' },
                    { display: 'Locality', name: 'Locality', width: 200, sortable: true, align: 'left' },
                    { display: 'Town', name: 'Town', width: 200, sortable: true, align: 'left' },
                    { display: 'Open', name: 'Actions', width: 30, sortable: false, align: 'center' }
                    ],
                    sortname: "USRN",
                    sortorder: "asc",
                    usepager: true,
                    title: 'Streets',
                    useRp: true,
                    rp: 5,
                    showToggleBtn: false,
                    width: 'auto',
                    height: 'auto'
                }
            );
    } 
```

# .net - 我错过了一些关于哈希的有用性

> ID：892469
> 
> 赞同：6
> 
> 时间：2009-05-21T11:30:21.213
> 
> 标签：.net, security, hash

因此，哈希很有用，因为它们将密码/登录名/盐值组合更改为无法反转的代码。客户端将此哈希发送到服务器。服务器将散列与存储的散列列表进行比较，以查看客户端的用户是否可以被授予访问权限。但是如何防止恶意用户截获散列密码并编写自己的客户端将该散列发送到服务器？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-21T11:33:28.570

这就是[中间人攻击](http://en.wikipedia.org/wiki/Man-in-the-middle_attack)，与散列无关，为了减轻此类攻击，我们使用[安全套接字层](http://en.wikipedia.org/wiki/Secure_Sockets_Layer)和类似技术。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-21T11:35:57.460

如果有人持有您的数据库的备份或获得对实时数据库的只读访问权限，则哈希非常有用。然后他们无法计算出密码并将其发送到您的实时系统。这就是为什么要对它们[加盐](http://en.wikipedia.org/wiki/Salt_(cryptography))，这样具有只读访问权限的黑客就无法设置他的密码，然后查看其他人是否有相同的密码。

正如您所指出的，他们不会停止请求拦截（[中间人攻击](http://en.wikipedia.org/wiki/Man_in_the_middle_attack)）来阻止您需要使用安全连接以及数据包加密和签名。[HTTPS](http://en.wikipedia.org/wiki/Https)和[SSL](http://en.wikipedia.org/wiki/Secure_Sockets_Layer)是最常用的方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-21T11:39:31.383

在中间人拦截可能的情况下，一个简单的解决方案是挑战-响应协议。

最简单的形式如下：用户将他的名字发送给服务器，服务器选择一个随机数（*挑战*）并将其发送给客户端。客户端以某种预先确定的方式将密码与质询结合起来，对结果进行哈希处理并将其发送到服务器。服务器做同样的事情 - 组合和散列并检查它是否与客户端发送的结果相同。

每次选择不同的挑战，因此即使对于相同的密码，计算值也会不同，因此稍后重新发送计算值不会导致成功授权。

不必在服务器上存储原始密码 - 它可以只存储密码哈希，客户端也可以使用哈希并将该哈希与质询结合起来。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-21T11:38:31.697

**没有哈希不是那样使用的。**客户端首先发送密码（我建议使用 SSL），然后服务器根据该密码和盐计算哈希，并将其与密码存储中的数据进行比较。这样，*不良用户*就不可能掌握密码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-21T11:38:10.917

这取决于拦截的方法。

如果用户的机器被破坏到恶意软件可以读取他们的 cookie 的程度，那么你可以做的事情并不多。

要停止拦截网络通信，请确保使用 SSL（即 HTTPS 而不是 HTTP）。HTTP 可能在家庭或办公室网络中最容易受到攻击，尤其是在安全性较差的无线网络中。HTTPS 将为您提供一些针对受损网络的保护。这还包括本地网络上的数据包嗅探器。

最后一个要考虑的选项是多人使用的计算机。网吧就是一个例子。工作电脑可以是另一台。您可以设置一个较低的超时时间以最大程度地降低这种风险。

一些人可能会争论的一个选项是 IP 地址过滤，这意味着如果您收到来自不同 IP 的请求，则会使会话无效。这是一种粗略的方法，可能会导致比它解决的问题更多的问题。基本上有很多合法的情况，用户的 IP 地址会发生变化。许多公司网络以这种方式工作。包括移动宽带在内的无线漫游将频繁更改IP，尤其是当用户移动时（例如在火车上）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-21T11:42:16.057

在许多系统中，散列的值不是静态的，而是在每次请求需要身份验证的操作时使用一个[随机数。](http://en.wikipedia.org/wiki/Cryptographic_nonce)服务器向客户端发送一个唯一值，该值与秘密相结合并进行哈希处理。这可以防止重放中间人攻击。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-21T11:33:39.210

您使用与服务器的安全连接并通过它以明文形式发送密码。服务器对其进行散列并将其与数据库中的散列进行比较。散列的要点是，如果服务器的密码数据库被泄露，则无法从中检索您的密码。

# jquery - Jquery中的问题如果块

> ID：892494
> 
> 赞同：0
> 
> 时间：2009-05-21T11:36:40.233
> 
> 标签：jquery

var htm = $.ajax({ type: "GET", url: "./viewforms", async: false }).responseText;

```
var myObject = eval('(' + htm + ')');

alert(myObject.attributes[0]["type"]);

$("#updateDiv1").html(myObject.attributes[0]["type"]);
alert($("#updateDiv1").text());
l=$("#updateDiv1").text();
alert(l);
if(l =="String")
{
alert("if...");
} 
```

在上面的代码中，我从数据库中检索值..我得到了正确的答案..现在我将我的数据库返回值与字符串进行比较..它重新调整字符串但不知道为什么它没有进入 IF 块..请建议我。 ……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T11:41:32.783

尝试修剪`l`然后比较它。 [http://www.somacon.com/p355.php](http://www.somacon.com/p355.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T11:41:20.413

可能有额外的空白字符、空格、回车等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T11:45:34.070

试着放

```
$(document).ready(function() { 
  /* your code */
}) 
```

围绕你的代码。

# css - 当我调整窗口大小时，Div 部分会发生变化

> ID：892497
> 
> 赞同：0
> 
> 时间：2009-05-21T11:37:09.797
> 
> 标签：css, html

我并排放置了 2 个 div，一个包含徽标，第二个包含文本字段。当我以更大的分辨率查看此页面时，一切正常。但是，当我调整窗口大小时，第二个 div 也会被弄脏并低于第一个 div。

但我希望他们以任何决议并肩待在那里。请为此提供代码解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-21T11:43:19.410

我猜您使用 float 将它们彼此相邻放置。您可以用另一个您希望查看页面的最小宽度的 div 环绕这两个 div。这将阻止第二个 div 低于第一个

```
<div id="wrapper">
    <div id="logo">...</div>
    <div id="text">...</div>
</div> 
```

它的风格是：

```
#wrapper { width: 980px; }
#wrapper div { float: left; }
#logo { width: 200px; }
#text { width: 780px; } 
```

类似的东西。如果有人将窗口大小调整为小于 980 像素（或使用较低的屏幕分辨率），那么您将获得水平滚动。

**//编辑** 以响应评论，您可以使用 min-width 使其更灵活。会导致IE

```
#wrapper { min-width: 980px; }
#wrapper div { float: left; }
#logo { width: 200px; }
#text { min-width: 780px; } 
```

IE6 不支持 min-width 所以你可能需要修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T13:11:31.407

我尝试将两个 div 的总宽度减少 1%（未使用的 1%）.... 似乎对我有用 :) Myabe 这对某人很有用。

CSS：

```
#Content {
width: 100%; 
height: auto; 
margin-top: 26px; 
float: left;

}
#ContentLeft {
margin-left: 5px; 
float: left; 
width: 19%;
}

#ContentMain {
width: 80%; 
margin-right: 5px; 
float: right;
} 
```

HTML：

```
<html>
<body>
<div id="Content">
<div id="ContentLeft">Left menu</div>
<div id="ContentMain">Here goes the bigger content</div>
</div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T11:41:18.523

基本上，如果第二个 div 不合适，它需要去某个地方。在您的情况下，唯一的选择是裁剪，因此将行包装在具有溢出：隐藏的 div 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T11:43:42.030

第二个 div 滑到第一个下方，因为容器中没有足够的宽度来允许它们并排放置。

这可以通过两种方式解决：

1.  将容器节点的“溢出”属性更改为“隐藏”（甚至溢出）。
2.  设置容器的“最小宽度”。然而，这种方法受到 IE 所需的特殊 hack 的影响。此外，通常不能突然完成最小宽度方法。它必须从页面设计开始就计划好。

希望有帮助。

干杯！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-12T17:09:32.383

只是你的 10px(margin-left + margin-right) 超过 1%。这应该有效：

```
#Content {
width: 100%; 
height: auto; 
margin-top: 26px; 
float: left;
}

#ContentLeft {
margin-left: 1%; 
float: left; 
width: 19%;
}

#ContentMain {
width: 79%; 
margin-right: 1%; 
float: right;
} 
```

# smalltalk - 如何在 Squeak 中创建全局变量？

> ID：892503
> 
> 赞同：4
> 
> 时间：2009-05-21T11:38:39.840
> 
> 标签：smalltalk, squeak, global-variables

我不是指类变量。我想要一个可以在任何地方使用的变量。我应该在哪里定义它？[吱吱声]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-21T11:58:43.980

Squeak 将所有类实例和其他全局变量存储在名为“Smalltalk”的 SystemDictionary 中。你可以像这样定义一个全局变量：

```
Smalltalk at: #variableName put: theValue. 
```

引用变量`variableName`将返回`theValue`.

然而，好的 Smalltalk 风格是完全避免全局变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-21T11:50:50.267

一种方法是制作一个单身人士，就像[在这个答案](https://stackoverflow.com/questions/438729/smalltalk-singleton-pattern-how-do-i-initialize-the-instance-variables)中一样。

通常，您创建一个类变量和伴随的类方法，以使某些对象成为全局可访问的。以上面提到的单例为例。然后从其他地方访问此类变量：

```
global := MyClass myGlobalVar 
```

要成为全局可更改的，请创建 mutator 类方法并将其称为：

```
MyClass myGlobalVar: true 
```

还有其他方法，但是这个带有类变量的方法可以在 Smalltalk 方言中移植，因此从长远来看它是最安全的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T12:03:16.250

好吧，smalltalk 中的课程是全球可用的，您可以随时更改它。只需创建一个类并将您的更改代码添加为类方法。然后你可以通过调用访问你的东西

```
MyVariable thisOrThat
MyVariable updateThisOrThat: aThisOrThat 
```

# xpath - 在 XPath 中选择第一个结果

> ID：892505
> 
> 赞同：11
> 
> 时间：2009-05-21T11:39:28.123
> 
> 标签：xpath

我看过这个问题：[Select first instance only with XPath?](https://stackoverflow.com/questions/453191/select-first-instance-only-with-xpath)

但是，如果我有这样的节点集：

```
 <container value="">
  <data id="1"></data>
  <data id="2">test</data>
  <container>
    <data id="1">test</data>
    <data id="3">test</data>
  </container>
</container> 
```

现在我的情况是这个节点集在文档的深处，我有一个指向内部容器的指针。所以我必须在我的 XPath 前面加上“/container/container”（路径实际上更长，但对于这个例子来说应该这样做）。

编辑：我想要的是一个 id 为 1 的“数据”节点，它应该首先来自最低节点或最近的祖先。所以，如果我在“当前”（/container/container）上找不到它，我应该看看祖先并找到最近的一个（或者最后，什么都找不到）。我试过这个：

**/container/container/ancestor-or-self::container/data[@id="1"]**

这会带回一个带有两个节点的结果集。我想我可以使用 last() 来获得最深的，所以我最后还是坚持了下来，但无济于事。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-21T11:50:11.737

确保`last()`范围正确。尝试：

```
(/container/container/ancestor-or-self::container/data[@id="1"])[last()] 
```

相似地：

```
//container[last()] 
```

和：

```
(//container)[last()] 
```

不是一回事。第一个将返回层次结构每个级别的最后一个容器节点 - 多个匹配项 - 第二个将返回找到的最后一个容器节点 - 一个匹配项。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-21T11:47:04.003

你是如何尝试使用 last() 的？我认为这应该有效：

```
/container/container/ancestor-or-self::container/data[@id="1"][last()] 
```

编辑：

对，当然，我忘记了括号：

```
(/container/container/ancestor-or-self::container/data[@id="1"])[last()] 
```

这使得这与其他答案之一相同；但是，正如原始海报指出的那样，此表达式在以下情况下失败：

```
<container value="">
  <container>
    <data id="1">a3</data>
    <data id="3">a4</data>
  </container>
  <data id="1">a1</data>
  <data id="2">a2</data>
</container> 
```

忠于 stackoverflow 的精神，但是我可以将我的答案与其他答案之一结合起来，得到适用于所有情况的东西：

```
(/container/container/ancestor-or-self::container[data[@id="1"]])[last()]/data[@id="1"] 
```

顺便说一句，如果一个容器有多个 @id-is-1 <data> 子级，这将返回所有子级。只返回第一个这样的 <data> 元素：

```
(/container/container/ancestor-or-self::container[data[@id="1"]])[last()]/data[@id="1"][1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T11:46:52.663

我不是 100% 清楚你的要求，但如果我没看错，也许你只是想要：

```
/container/container/ancestor-or-self::container[1]/data[@id='1'] 
```

注意“[1]”

编辑：再想一想，以下对我来说适用于到目前为止寻找@id=$N的所有情况

```
/container/container/ancestor-or-self::container[data[@id=$N]][1]/data[@id=$N] 
```

非常极端的 xpathing 就在那里。基本上发生的事情是来自祖先或自我的节点集在位置 1 返回最低顺序 - 这就是你想要的 - 但你需要在它上面放置第二个条件，该节点也有一个你感兴趣的数据节点，一旦满足了这些条件，您就拥有了正确的节点，您现在只想进一步挖掘实际数据。

如果你把它拆开并将其视为一种算法，99% 的时间 xpath 会变得更容易:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-20T03:51:37.000

尝试[位置（）= 1]

前任。

> /container/container/ancestor-or-self::container/data[position()=1]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-21T11:48:25.717

代替

```
@id="1" 
```

你有没有尝试过：

```
position() == 1 
```

# .net - 将 .NET 表单作为 HWND 的父级

> ID：892512
> 
> 赞同：4
> 
> 时间：2009-05-21T11:40:00.320
> 
> 标签：.net, winforms, user-interface, winapi, c++-cli

我正在开发一个在某个应用程序内部运行的插件（C++/CLI DLL），对此我只知道 HWND。我的插件显示了各种.NET 表单，我希望它们充当主应用程序的子应用程序（例如，以主窗口为中心等）。这是我尝试过的：

```
// MyDialog.h
public ref class MyDialog : public System::Windows::Forms::Form {
    public:
        MyDialog(const int parentHWND);

    private:
        IntPtr parent_;
};

// MyDialog.cpp
// Attempt1: Use SetParent and CenterParent
MyDialog::MyDialog(const int parentHWND) : parent_(parentHWND) {
    SetParent(reinterpret_cast<HWND>(this->Handle.ToPointer()), reinterpret_cast<HWND>(parent_.ToPointer()));

    this->StartPosition = FormStartPosition::CenterParent;
} 
```

这似乎使 MyDialog 充当一个孩子（即您不能将它移到主应用程序之外等），但是对 CenterParent 的调用没有预期的结果。

我在网上找到了几个想法（包括[SO](https://stackoverflow.com/questions/213661/can-i-get-the-behavior-of-setting-my-winforms-forms-owner-using-an-hwnd-native)），建议从 HWND 创建一个 NativeWindow 并将其传递给 Show()：

```
// in MyDialog.h
void Show() new;

// MyDialog.cpp
// ...
void MyDialog::Show() {
    NativeWindow^ nw = gcnew NativeWindow();
    nw->AssignHandle(parent_);
    this->Show(nw);
} 
```

但是，在我可以测试的所有情况下，这似乎都会使主应用程序崩溃（有趣的是，在显示我的对话框之后）。如果我能得到它，我会用崩溃信息更新帖子。

我正在寻找有关如何始终如一地实现所需行为的建议。我所需要的只是能够在主窗口中居中一个无模式对话框，并让它充当一个孩子。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-12-21T12:15:56.890

我有一个类似的问题...如果您覆盖 Form.OnLoad 并且不调用 MyBase.OnLoad 那么 StartPosition.CenterParent 无效

# asp.net-mvc - 缓存 Asp.net Mvc 主页

> ID：892516
> 
> 赞同：1
> 
> 时间：2009-05-21T11:41:27.823
> 
> 标签：asp.net-mvc, caching

我在缓存我的 Asp.Net Mvc 应用程序的主页时遇到问题。

使用 [OutputCache(Duration=60, VaryByParam="None")] 操作过滤器可以很好地缓存所有其他页面。

问题是主页没有缓存。我注意到，如果我通过 Controller/Action（“Home/Index”）访问主页，那么它会缓存，但是当通过“/”访问时它不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-21T11:55:13.053

你使用的是什么版本的 asp.net-mvc？如果它是最新版本，那么您可能需要创建一个新项目并从“Default.aspx”中复制 Page_Load 方法，该方法在以后的版本中有所不同，并且我认为处理“/”缓存的轻微变化......

# iphone - UIScrollView contentOffset 在动画后跳转 - 在 3.0 beta 5

> ID：892521
> 
> 赞同：0
> 
> 时间：2009-05-21T11:42:37.570
> 
> 标签：iphone, uiscrollview

我有一个 UIScrollView，上面有几个 UITextFields。当用户编辑文本字段时，它会滚动以使 UITextField 居中。我遇到的问题是 UIScrollView 滚动到正确的位置，但在动画的最后一帧它跳转到 300,300。它在 2.2.1 中运行良好，但在 3.0 beta 5 中却不行。它也总是跳到正好 300,300。奇怪的是，当我调用 returnScrollAfterEdit 方法移动滚动视图时，它工作得很好。有什么想法可能导致这种情况吗？

```
- (void)scrollViewToCenterOfScreen:(UIView *)field withKeyboard:(bool)withKeyboard {
    CGFloat viewCenterY = field.center.y;  
    CGRect applicationFrame = [[UIScreen mainScreen] applicationFrame];
    CGFloat availableHeight = applicationFrame.size.height - 215;

    CGFloat y = viewCenterY - availableHeight / 2.0;

    NSLog([NSString stringWithFormat:@"w:%fh%favailH:%fy:%fx:%f", applicationFrame.size.width, applicationFrame.size.height, availableHeight, y, self.contentOffset.x]);

    如果 (y
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-04-13T16:44:04.727

已在 3.0 发行版中修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-18T17:34:43.290

我不确定这是否正是您正在寻找的，但 UITextView 也有一些疯狂的问题。如果我在视图中选择了任何文本，它将滚动到框架的底部。我通过在将文本添加到 UITextView 之前关闭 scrollEnabled 来解决此问题。

所以代码看起来像这样：

```
[textarea setText:@""]; //blank out the text to scroll back to the top
[textarea setScrollEnabled:NO]; //disable to avoid scrolling
[textarea setText:@"new text here"]; 
[textarea setScrollEnabled:YES];
[textarea resignFirstResponder]; //to drop annoying blue 
```

我希望这有帮助。

# linq - 如何通过 WCF 发送 Linq 数据类并将输入控件与此类属性绑定？

> ID：892530
> 
> 赞同：0
> 
> 时间：2009-05-21T11:45:49.093
> 
> 标签：linq, wcf, silverlight-3.0

对于**强类型**和**类型安全的**解决方案，我必须执行以下步骤。

1.  创建一些 Silverlight 应用程序。
2.  将输入控件绑定到 Linq 数据类。
3.  使用数据类属性中的规则验证数据。
4.  通过 WCF 向服务器发送数据。

但是，我有一个问题。

1.  如何将输入控件与 linq 数据类属性绑定？
2.  如何使用最少的层（层）和最少的 dll（对于 Silverlight 项目）来做到这一点？

PS。**.Net RIA Service** - May Preview 不是我的最终答案。因为所有必需的 dll 和一些生成的代码的大小。

**谢谢**，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T13:51:53.707

好吧，我很高兴您知道 .NET RIA 服务将提供所有这些东西，但我知道大小是一个考虑因素。但请记住，由于您似乎正在考虑使用 Silverlight 3，您可以使用缓存框架程序集的选项来大大减少您的 Xap 大小：

[http://www.wintellect.com/CS/blogs/jprosise/archive/2009/04/06/silverlight-3-s-new-assembly-caching.aspx](http://www.wintellect.com/CS/blogs/jprosise/archive/2009/04/06/silverlight-3-s-new-assembly-caching.aspx)

我不肯定缓存适用于 RIA 服务程序集，但如果是这样，则意味着它们只下载一次。

假设这不是您想要的，还有 2 个其他选项可以从 Linq 类（我假设您的意思是实体框架类）向客户端获取数据。正如您所提到的，最简单的方法是创建您自己的 WCF 服务。这样，您在服务器上编写数据类，代理类会在客户端自动生成模仿服务器类。这里的缺点是业务规则不会在两者之间共享。因此，您的数据验证属性将需要分别在客户端和服务器上编写和执行。

下一个选项是使用 ADO.NET 数据服务将数据从服务器移动到客户端。这是上一个选项的一个步骤，因为您不必自己编写 WCF 服务来托管数据；它是为你生成的。当然，它需要在 Xap 中打包一个额外的 Dll。

直接回答您的一些问题：

2.  您永远无法将输入控件直接绑定到 Linq 数据类。您只能将控件绑定到通过引用 WCF 服务（您自己编写的或者由 ADO.NET 数据服务提供的）生成的客户端代理类。
3.  如果您不使用 .NET RIA 服务，则需要创建一个自定义属性以链接到您的业务规则，然后手动处理数据绑定上的事件以读取该属性并强制执行您的规则。
4.  使用上述任一选项将数据发送到服务器 - 您自己的自定义 WCF 服务或 ADO.NET 数据服务。

关于将输入控件绑定到属性的最后一个问题如下所示：

```
MyControl.xaml.cs:

public MyControl() {
  this.DataContext = new LinqDataClass();
}

MyControl.xaml:
<TextBlock Text={Binding PropertyOnLinqDataClass}/> 
```

在这里，LinqDataClass 是服务器端 Linq 数据类的客户端表示形式，并且有一个名为 PropertyOnLinqDataClass 的属性。您需要在客户端实现 INotifyPropertyChanged 接口以正确支持 2 路数据绑定。

# c# - 为什么 lock(objLock) 比 lock(this) 好

> ID：892535
> 
> 赞同：8
> 
> 时间：2009-05-21T11:47:03.880
> 
> 标签：c#, locking

> **可能的重复：**
> [为什么 lock(this) {...} 不好？](https://stackoverflow.com/questions/251391/why-is-lockthis-bad)

* * *

在 C# 中，通常使用 lock(objLock)，其中 objLock 是一个仅为锁定目的而创建的对象。

为什么这比 lock(this) 更可取？除了锁定类本身之外，lock(this) 的负面影响是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-21T11:49:21.877

因为其他东西可能会锁定实例，所以你会遇到死锁。

如果您锁定您专门为此目的创建的对象，您就知道您处于完全控制之中，并且没有其他任何东西会意外地锁定它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T12:04:50.583

如果你锁定任何公开的东西，那么班级和其他班级都可以尝试获得锁定。创建同步对象很容易，而且总是很受欢迎；

```
private syncLock = new Object(); 
```

# java - 如何在 HttpServletRequest 中设置参数？

> ID：892537
> 
> 赞同：35
> 
> 时间：2009-05-21T11:47:11.553
> 
> 标签：java, web-applications

我正在使用*javax.servlet.http.HttpServletRequest*来实现 Web 应用程序。

*使用getParameter*方法获取请求的参数没有问题。但是我不知道如何在我的请求中设置参数。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-05-21T11:51:01.657

你不能，不使用标准 API。`HttpServletRequest`表示服务器收到的请求，因此添加新参数不是有效选项（就 API 而言）。

原则上，您可以实现一个子类，`HttpServletRequestWrapper`该子类包装原始请求并拦截`getParameter()`方法，并在转发时传递包装的请求。

如果你走这条路，你应该用 a`Filter`替换你`HttpServletRequest`的 a `HttpServletRequestWrapper`：

```
public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {
    if (servletRequest instanceof HttpServletRequest) {
        HttpServletRequest request = (HttpServletRequest) servletRequest;
        // Check wether the current request needs to be able to support the body to be read multiple times
        if (MULTI_READ_HTTP_METHODS.contains(request.getMethod())) {
            // Override current HttpServletRequest with custom implementation
            filterChain.doFilter(new HttpServletRequestWrapper(request), servletResponse);
            return;
        }
    }
    filterChain.doFilter(servletRequest, servletResponse);
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-05-21T17:26:39.607

如果您真的想这样做，请创建一个 HttpServletRequestWrapper。

```
public class AddableHttpRequest extends HttpServletRequestWrapper {

   private HashMap params = new HashMap();

   public AddableingHttpRequest(HttpServletRequest request) {
           super(request);
   }

   public String getParameter(String name) {
           // if we added one, return that one
           if ( params.get( name ) != null ) {
                 return params.get( name );
           }
           // otherwise return what's in the original request
           HttpServletRequest req = (HttpServletRequest) super.getRequest();
           return validate( name, req.getParameter( name ) );
   }

   public void addParameter( String name, String value ) {
           params.put( name, value );
   }

} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2009-05-21T11:53:34.507

根据您的问题，我认为您要做的是使用 RequestDispatcher() 存储一些东西（一个对象、一个字符串......），然后将其转发到另一个 servlet。为此，您不需要设置参数，而是使用属性

```
void setAttribute(String name, Object o); 
```

接着

```
Object getAttribute(String name); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-07-30T00:28:49.177

`@RequestParam`最受欢迎的解决方案通常有效，但对于 Spring 和/或 Spring Boot，除非您专门实施，否则这些值不会连接到带有注释的控制器方法中的参数`getParameterValues()`。我在此处和[此博客](https://www.ocpsoft.org/opensource/how-to-safely-add-modify-servlet-request-parameter-values/)中结合了解决方案：

```
import java.util.*;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletRequestWrapper;

public class MutableHttpRequest extends HttpServletRequestWrapper {

    private final Map<String, String[]> mutableParams = new HashMap<>();

    public MutableHttpRequest(final HttpServletRequest request) {
        super(request);
    }

    public MutableHttpRequest addParameter(String name, String value) {
        if (value != null)
            mutableParams.put(name, new String[] { value });

        return this;
    }

    @Override
    public String getParameter(final String name) {
        String[] values = getParameterMap().get(name);

        return Arrays.stream(values)
                .findFirst()
                .orElse(super.getParameter(name));
    }

    @Override
    public Map<String, String[]> getParameterMap() {
        Map<String, String[]> allParameters = new HashMap<>();
        allParameters.putAll(super.getParameterMap());
        allParameters.putAll(mutableParams);

        return Collections.unmodifiableMap(allParameters);
    }

    @Override
    public Enumeration<String> getParameterNames() {
        return Collections.enumeration(getParameterMap().keySet());
    }

    @Override
    public String[] getParameterValues(final String name) {
        return getParameterMap().get(name);
    }
} 
```

请注意，此代码不是超级优化的，但它可以工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-03-28T20:37:50.133

正如之前的帖子中提到的，使用 HttpServletReqestWrapper 是可行的方法，但是这些帖子中遗漏的部分是除了重写方法 getParameter() 之外，您还应该重写其他与参数相关的方法以产生一致的响应。例如，自定义请求包装器添加的参数值也应包含在方法 getParameterMap() 返回的参数映射中。这是一个例子：

```
 public class AddableHttpRequest extends HttpServletRequestWrapper {

    /** A map containing additional request params this wrapper adds to the wrapped request */
    private final Map<String, String> params = new HashMap<>();

    /**
     * Constructs a request object wrapping the given request.
     * @throws java.lang.IllegalArgumentException if the request is null
     */
    AddableHttpRequest(final HttpServletRequest request) {
        super(request)
    }

    @Override
    public String getParameter(final String name) {
        // if we added one with the given name, return that one
        if ( params.get( name ) != null ) {
            return params.get( name );
        } else {
            // otherwise return what's in the original request
            return super.getParameter(name);
        }
    }

    /**
     * *** OVERRIDE THE METHODS BELOW TO REFLECT PARAMETERS ADDED BY THIS WRAPPER ****
     */

    @Override
    public Map<String, String> getParameterMap() {
        // defaulf impl, should be overridden for an approprivate map of request params
        return super.getParameterMap();
    }

    @Override
    public Enumeration<String> getParameterNames() {
        // defaulf impl, should be overridden for an approprivate map of request params names
        return super.getParameterNames();
    }

    @Override
    public String[] getParameterValues(final String name) {
        // defaulf impl, should be overridden for an approprivate map of request params values
        return super.getParameterValues(name);
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-05-16T11:36:40.610

丢失的 getParameterMap 覆盖最终对我来说是一个真正的问题。所以这就是我最终的结果：

```
import java.util.HashMap;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletRequestWrapper;

/***
 * Request wrapper enabling the update of a request-parameter.
 * 
 * @author E.K. de Lang
 *
 */
final class HttpServletRequestReplaceParameterWrapper
    extends HttpServletRequestWrapper
{

    private final Map<String, String[]> keyValues;

    @SuppressWarnings("unchecked")
    HttpServletRequestReplaceParameterWrapper(HttpServletRequest request, String key, String value)
    {
        super(request);

        keyValues = new HashMap<String, String[]>();
        keyValues.putAll(request.getParameterMap());
        // Can override the values in the request
        keyValues.put(key, new String[] { value });

    }

    @SuppressWarnings("unchecked")
    HttpServletRequestReplaceParameterWrapper(HttpServletRequest request, Map<String, String> additionalRequestParameters)
    {
        super(request);
        keyValues = new HashMap<String, String[]>();
        keyValues.putAll(request.getParameterMap());
        for (Map.Entry<String, String> entry : additionalRequestParameters.entrySet()) {
            keyValues.put(entry.getKey(), new String[] { entry.getValue() });
        }

    }

    @Override
    public String getParameter(String name)
    {
        if (keyValues.containsKey(name)) {
            String[] strings = keyValues.get(name);
            if (strings == null || strings.length == 0) {
                return null;
            }
            else {
                return strings[0];
            }
        }
        else {
            // Just in case the request has some tricks of it's own.
            return super.getParameter(name);
        }
    }

    @Override
    public String[] getParameterValues(String name)
    {
        String[] value = this.keyValues.get(name);
        if (value == null) {
            // Just in case the request has some tricks of it's own.
            return super.getParameterValues(name);
        }
        else {
            return value;
        }
    }

    @Override
    public Map<String, String[]> getParameterMap()
    {
        return this.keyValues;
    }

} 
```

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2014-04-07T11:53:05.003

抱歉，为什么不使用以下结构：

```
request.getParameterMap().put(parameterName, new String[] {parameterValue}); 
```

# wpf - 如何提高 WPF 应用程序的性能

> ID：892546
> 
> 赞同：3
> 
> 时间：2009-05-21T11:50:23.780
> 
> 标签：wpf, performance, c#-3.0

我已经开发了 WPF 应用程序。在该应用程序中，我将 200mb 的照片加载到列表框。之后，我将这些图像添加到画布。一段时间后（即；添加 10mb 图像后）将照片添加到画布时，我遇到了一些错误，例如----

*****CLR 在 60 秒内无法从 COM 上下文 0x10b46f0 转换到 COM 上下文 0x10b4860。拥有目标上下文/单元的线程很可能要么进行非泵送等待，要么处理非常长时间运行的操作而不泵送 Windows 消息。这种情况通常会对性能产生负面影响，甚至可能导致应用程序变得无响应或内存使用量随着时间的推移不断累积。为避免此问题，所有单线程单元 (STA) 线程都应使用泵送等待原语（例如 CoWaitForMultipleHandles）并在长时间运行的操作期间定期泵送消息。*****

有什么方法可以提高我的应用程序的性能。我需要解决这个问题。

对此有任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-21T11:57:51.330

不要在您的 UI 线程上一次将所有 200 mb 的照片加载到列表框中。用户会同时查看 200 mb 吗？这需要您做一些工作，但您需要从后台线程延迟加载图像。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-21T11:58:04.637

看看这篇[文章](http://msdn.microsoft.com/en-us/magazine/cc163618.aspx)（Advanced Techniques To Avoid and Detect Deadlocks In .NET Apps），它可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T22:06:09.900

这看起来像两个问题，第一个是您正在后台线程中加载图像，但没有正确执行；因此，COM错误。仔细检查您是否有一个 STAThread 应用程序，并且图像加载线程没有与 WPF 调度线程错误地交互。这是MTA 与 STA的[讨论；](https://stackoverflow.com/questions/165316/stathread-and-multithreading)但是，WPF 需要 STA，而与之抗争是一场失败的战斗。

第二个问题似乎是应该如何做到这一点；也就是说，加载一堆图像进行显示。我会考虑使用 ListView 的惰性数据绑定，并让内置的虚拟化演示者管理图像的加载/显示。

这是一些关于使用[view-model](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)的文档。viewmodel 可以协调图像加载并为 ListView 提供一个绑定源，该绑定源将自动使应用程序工作。

一个更简单的替代方法可能是启动后台线程并将图像加载到 ObservableCollection<> 中，将其绑定到 ListView 并让框架处理显示。

我赞同 Greg D 所说的，加载 200mb 的图像听起来像是解决问题的方法。

# ruby-on-rails - 在模型的散列中创建 if 语句

> ID：892554
> 
> 赞同：0
> 
> 时间：2009-05-21T11:53:48.577
> 
> 标签：ruby-on-rails

我试图在 pdf 上显示所有居民及其家属，但家属没有立场，他们由居民的外键 user_id 标识。eg resident1.id = 5 ---dependent3.user_id = 5 表示dependent3 属于resident1，因此如果我想显示家属展位我应该怎么做，我想显示所有居民及其家属和展位信息家属作为家属所属居民的展位信息。现在我的信息应该在一个散列中，这样它就可以生成我的 pdf 文件..

我的代码是

> 数据 = [] c = 1 个居民。每个人都做 |r| data <<{"Fullname" => r.firstname, "Lastname" => r.lastname, "Street-Number" => r.stand.street_no, "street Name" => r.stand.streetname} if r.立场 || r.user_id = r.id 结束

请记住，我的家属和居民在同一张表中，但居民没有 user_id 外键，只有家属才有。

我的输出只显示有立场的居民的信息，而不是家属的信息。

请任何愿意提供帮助的人。因为我不知道我是否可以，但在哈希内有一个 if 语句，例如：

> 居民。每个人都做|r| data <<{"Fullname" => r.firstname, "Lastname" => r.lastname} if r.stand || r.user_id = r.id{"街道编号" => r.stand.street_no, "街道名称" => r.stand.streetname}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-09-09T01:37:13.663

Assuming that `.stand.street_no`, etc. is valid even if `.stand` is `false` (since it *could* be `false` and still be called if the `r.user_id == r.id` part is true), then the following would work:

```
data = residents.map do |r|
  hash = { "Fullname" => r.firstname, "Lastname" => r.lastname }
  hash.merge!({ "Street-Number" => r.stand.street_no, "street Name" => r.stand.streetname}) if r.stand || r.user_id == r.id
  hash
end 
```

Explanation:

1.  Iterate through each resident object and build a hash that contains values that we know will be used.
2.  Conditionally `merge!` in the extra keys if the `if` clause is true.
3.  Return the hash.

Doing this in a `map` eliminates the need to predeclare the `data` array, nor push the hash on each pass through the loop.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T11:59:26.040

```
data = []
residents.each do |r|
  tmp_hash = {"Fullname" => r.firstname, "Lastname" => r.lastname}

  if r.stand || r.user_id = r.id
    tmp_hash.merge({"Street-Number" => r.stand.street_no, "street Name" => r.stand.streetname})
  end

  data << tmp_hash

end 
```

# windows - 如何为无法处理文件路径中空格的程序指定没有空格的 C:\Program Files？

> ID：892555
> 
> 赞同：84
> 
> 时间：2009-05-21T11:54:22.397
> 
> 标签：windows

一个配置文件需要另一个文件的位置，

但该文件位于“C:\Program Files”中，

并且无法识别其中包含空间的路径，

有没有另一种方法来指定没有空格的位置？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2009-05-21T11:56:44.763

你应该可以使用

*   **“c:\Program Files”**（注意引号）
*   **c:\PROGRA~1**（简称）

尝试 c:\> dir /x （在 dos shell 中）

> 这将显示为非 8dot3 文件名生成的短名称。格式是 /N 的格式，在长名称之前插入短名称。如果不存在短名称，则会在其位置显示空白。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2017-08-28T16:46:49.240

永远不要硬编码这个位置。使用环境变量`%ProgramFiles%`或`%ProgramFiles(x86)%`.

指定这些时，请始终引用，因为 Microsoft 可能在其中放置了空格或其他特殊字符。

```
"%ProgramFiles%\theapp\app.exe"
"%ProgramFiles(x86)%\theapp\app.exe" 
```

此外，该目录可能以您不知道的语言表示。[http://www.samlogic.net/articles/program-files-folder-different-languages.htm](http://www.samlogic.net/articles/program-files-folder-different-languages.htm)

```
>set|findstr /i /r ".*program.*="
CommonProgramFiles=C:\Program Files\Common Files
CommonProgramFiles(x86)=C:\Program Files (x86)\Common Files
CommonProgramW6432=C:\Program Files\Common Files
ProgramData=C:\ProgramData
ProgramFiles=C:\Program Files
ProgramFiles(x86)=C:\Program Files (x86)
ProgramW6432=C:\Program Files 
```

使用这些命令来查找机器上的值。不要将它们硬编码到程序或 .bat 或 .cmd 文件脚本中。使用变量。

```
set | findstr /R "^Program"
set | findstr /R "^Common" 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-04-20T12:29:13.617

使用以下符号：

*   对于“ **C:\Program Files** ”，使用“ **C:\PROGRA~1** ”
*   对于“ **C:\Program Files (x86)** ”，使用“ **C:\PROGRA~2** ”

感谢@lit 在下面的评论中为您提供理想的答案：

> 使用环境变量**%ProgramFiles%**和**%ProgramFiles(x86)%**

：

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-05-21T12:34:32.520

我认为那些建议使用 C:\PROGRA~1 名称的人之所以遭到反对，是因为这些名称被视为最好被遗忘的 Windows 的遗留功能，这也可能是不稳定的，至少在不同的安装之间是不稳定的，尽管可能不在同一台机器。

此外，正如有人在对另一个答案的评论中指出的那样，可以将 Windows 配置为在文件系统中根本没有 8.3 旧名称。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-05-21T12:14:24.353

Windows shell（假设您使用的是 CMD.exe）使用 %ProgramFiles% 指向 Program Files 文件夹，无论它在哪里。由于默认的 Windows 文件打开器会考虑这样的环境变量，因此如果程序编写得很好，它应该支持这一点。

此外，使用相对地址可能是值得的。如果您使用的程序安装正确，它应该已经在 Program Files 文件夹中，因此您可以将配置文件称为 .\config_file.txt 如果它与程序位于同一目录，或者 ..\ other_program\config_file.txt 如果它位于与其他程序不同的目录中。这不仅适用于 Windows，而且适用于几乎所有现代操作系统，并且如果您正确设置了“开始于”框，或者直接从其文件夹运行它，它将正常工作。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-05-21T12:01:24.147

应该有一种方法可以`c:\program files`直接使用完整路径。通常，它涉及将字符串封装在引号中。例如，在 windows 命令行上；

```
c:\program files\Internet Explorer\iexplore.exe 
```

不会启动 Internet Explorer，但

```
"c:\program files\Internet Explorer\iexplore.exe" 
```

将要。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-21T11:57:05.013

不。

有时您可以引用文件名。

```
"C:\Program Files\Something" 
```

有些程序会容忍引号。由于您没有提供任何特定程序，因此无法判断报价是否适合您。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-21T12:01:34.380

我认为其他帖子已经回答了这个问题，但只是一些有趣的信息（来自命令提示符）：

目录 c:\ /ad /x

这将提供仅目录的列表，并提供它们的“短名称”。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-21T11:57:29.507

您可以尝试使用：

```
C:\PROGRA~1 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-04-04T06:23:08.957

作为其他答案的替代方案，您可以尝试**symbolic links**。

首先创建符号链接，然后根据链接安装应用程序。（根据具体情况，这可能更容易做到，例如，当应用程序在其代码中提及目标文件夹时）

符号链接将创建类似于文件夹快捷方式的东西，但被其他应用程序视为实际文件夹。

这就是你的做法：

*   `cmd`以管理员身份 运行
*   使用这个命令：`mklink /D "C:\LinkToProgramFiles" "C:\Program Files"`

然后，您开始在无法处理空格的应用程序中使用“C:\LinkToProgramFiles”。（此链接可以在 Windows 资源管理器中看到为带有快捷方式符号的文件夹）

* * *

如果您开始玩太多，请非常小心不要创建循环链接。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-21T11:57:07.603

尝试用引号括住路径。即“C:\Program Files\Appname\config.file”

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-09-09T23:39:42.470

您可以使用以下方法为无法处理文件路径中的空格的程序指定不带空格的 C:\Program Files：

```
'Path to Continuum Reports Subdirectory - Note use DOS equivalent (no spaces)
RepPath = "c:\progra~1\continuum_reports\" or
RepPath = C:\Program Files\Continuum_Reports  'si es para 64 bits.

' Path to Continuum Reports Subdirectory - Note use DOS equivalent (no spaces)
RepPath = "c:\progra~2\continuum_reports\" 'or
RepPath = C:\Program Files (x86)\Continuum_Reports  'si es para 32 bits. 
```

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2009-05-21T11:57:27.820

使用生成的短名称 (C:\Progra~1) 或用引号将路径括起来。

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2016-03-12T15:48:06.697

您可以在本地 D 或本地 C 创建一个文件夹 ProgramFiles 来安装那些可以安装到具有空格/字符的文件夹名称的应用程序。

# ruby - 从Ruby中的用户输入字符串中提取和多个整数？

> ID：892562
> 
> 赞同：2
> 
> 时间：2009-05-21T11:56:12.270
> 
> 标签：ruby

我想在同一行接受多个整数输入

例如：- 输入 -1 -1 500 500

这样我就可以将它们相乘。我正在从键盘输入字符串 - 那我该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-21T11:59:11.390

如果您键入包含以下内容的行`5 66 7 8`（由任何空格分隔），则会打印 ["5", "66", "7", "8"]：

```
p $stdin.readline.split 
```

要使它们成倍增加，请执行以下操作：

```
q = 1
$stdin.readline.split.each {|n| q *= n.to_i }
p q 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T15:26:26.090

或者你可以使用`String#scan`：

```
irb> "input -1 -1 500 500".scan(/[+-]?\d+/).map { |str| str.to_i } 
#=> [-1, -1, 500, 500 ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T11:59:13.137

```
array = input.split(' ') 
```

或者，如果您将它们作为命令行参数输入，只需使用 ARGV 数组

# c# - 我可以在没有 vs 2010 的情况下基于 .NET Framework 4.0 编写代码吗？

> ID：892563
> 
> 赞同：2
> 
> 时间：2009-05-21T11:56:14.733
> 
> 标签：c#, .net

我下载并安装了.net framework 4.0，但我没有安装VS 2010，因为VS 2010需要高性能的计算机硬件。我没有，但我希望尝尝 C# 4.0 的特性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-21T12:00:33.667

您需要 .net 4.0 编译器，目前仅适用于 vs2010。

该线程可能会回答您的问题 [，我可以在哪里下载没有 Visual Studio 2010 的 C# 4.0 编译器？](https://stackoverflow.com/questions/591726/where-i-can-download-compiler-for-c-4-0-without-visual-studio-2010)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T14:04:54.773

.NET 框架客户端配置文件包括编译器 (csc.exe)。例如，在我的机器上，它位于：

```
c:\Windows\Microsoft.NET\Framework64\v4.0.20506\csc.exe 
```

32 位版本位于：

```
c:\Windows\Microsoft.NET\Framework\v4.0.20506\csc.exe 
```

如果您熟悉命令行编译器语法，大多数应用程序都可以仅使用它、记事本并引用适当的程序集来编写。不过，这不会是一次非常愉快的经历。

# javascript - 我应该如何从 Javascript 更新 Mega Menus

> ID：892566
> 
> 赞同：0
> 
> 时间：2009-05-21T11:56:36.137
> 
> 标签：javascript, jquery, user-interface, menu

我在我维护的网站上有一些“超级菜单”风格的菜单。这些本质上是一组嵌套`<UL>`的 s。由于完整的菜单中大约有 150 到 200 个条目，它给页面增加了大量的体积，让屏幕阅读器很痛苦。

我计划更改菜单，以便仅在页面上输出顶级菜单，这将减少 99% 的内容，并且在非 JavaScript 客户端中仍然可用。

如果 javascript 可用，我计划用完整的大型菜单替换简单的顶级菜单。理想情况下，完整的菜单将存储在 javascript 文件中，因为这将具有让浏览器缓存它的额外好处（它不会经常更改）。

我的问题是，人们会如何推荐我将完整的菜单存储在 javascript 文件中。目前我只是有类似的东西......

```
var menuhtml = '<ul id="megamenu"><li>blar blar...</ul>';
$("#megamenu").html(menuhtml);
// more code here to get the menu to work as needed 
```

这似乎有点丑陋。显而易见的答案是通过 ajax 请求获取菜单 html，但这只有在我确定它会被缓存时才有效，因为如果我能提供帮助，我不想要任何额外的 http 请求。

如果有人对获得干净的解决方案有任何好的建议，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T12:06:33.763

如果您有服务器端编程，您可以做的是提供一个带有导航的 JSON JavaScript 文件。这将被浏览器缓存，然后 JSON 可用于构建菜单。

# c - make---linux和windows格式

> ID：892585
> 
> 赞同：2
> 
> 时间：2009-05-21T11:59:05.900
> 
> 标签：c, makefile, nmake

我遇到了一个大问题..我在 Linux OS 中使用 linux make 文件编译了我的 c 文件。

我想通过命令提示符使用相同的 make 文件在 Windows 中编译相同的文件。为此，我也有 nmake 实用程序和 Cygwin 实用程序。

我用简单的 make 文件的简单程序成功地做到了这一点..

但是当我使用复杂的 C 文件和复杂的 make 文件时无法编译。

我已将 linux make 文件中的“/”更改为 windows 中的“\”？还有什么变化吗？

我想知道“Windows 中是否有任何特殊的 make 文件格式？”

还有他们的区别。。

我真的很需要那个...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-21T22:24:45.277

不幸的是，nmake 只是受到 make 的粗略启发，而且他们并没有把很多重要的事情做对。到目前为止，最简单的做法是从在两个平台上使用相同风格的 make 开始。

在 linux 上，Gnu make 是默认和最佳选择。

在 Windows 上，有几个 Gnu make 的来源，有一些怪癖可供选择。就个人而言，我主要使用[来自 GnuWin32 项目的 Gnu make 的本机 win32 构建](http://gnuwin32.sourceforge.net/packages/make.htm)。您可能想要查看项目的其他包，因为其他一些包也很有用。

替代来源是[Cygwin](http://www.cygwin.com/)和[MinGW32/MSYS](http://www.mingw.org/)。

Cygwin 是在 Windows 内核之上提供 *nix 兼容环境的可靠尝试。它由一个 DLL 组成，该 DLL 导出了大量通过 Windows API 实现的 *nix（尤其是 POSIX）系统调用。该 DLL 对磁盘安装也有自己的想法，并且更喜欢 *nix 样式的路径名。DLL 本身是 GPL 许可的（尽管商业使用许可是收费的），并且在 Cygwin 环境中构建的程序默认需要它，因此这是一个需要考虑的因素。另一个因素是 Cygwin 对普通 Windows 用户不友好，因此基于它的开发项目通常最终对于非 unix 用户来说很难处理。然而，对于跨平台开发人员来说，Cygwin 非常有用，因为它可以为您提供 Makefile 所需的所有常见的可疑实用程序，

MinGW32 是一个移植项目，它在移植 GCC 编译器以作为本机 Windows 可执行文件运行方面做得非常好。如果与它们提供的头文件一起使用，则可以通过现代 Windows 安装附带的 C 运行时 DLL 使用几乎所有 Windows API。

MSYS 是 Cygwin 的轻量级分支，它包含一组最小的实用程序（以 *nix shell 开头），通常假定典型的 *nix Makefile 存在这些实用程序。与 Cygwin 不同，MSYS 被配置为默认目标是本机 Windows API。

我在这里试图暗示并且可能应该直截了当地说明的是，您的兼容性问题不会以使您使用的方言结束。

Makefile 语言本身高度依赖于可用的命令 shell，大多数严肃的项目 Makefile 最终使用许多 *nix 核心实用程序，例如 cp 和 rm。

我强烈建议从 make 的 GnuWin32 构建开始，并安装 MinGW32 和 MSYS。然后编写一个在 MSYS 和 linux 下都可以工作的 Makefile 相对容易，并且只需要少量特定于平台的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T12:03:45.610

您应该考虑使用 CMake 进行跨平台制作，但您真正的问题是您不必将“/”更改为“\”。如果您在 cygwin 或 msys（推荐）下运行，则应该为您处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T12:10:41.257

NMake 是一个windows 工具，只会解析windows 风格的路径，即带有驱动器号和反斜杠的路径。因此，您应该使用与 cygwin 一起安装的 GNU Make。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T12:01:56.050

nmake 应该可以读取您的 makefile，差异通常在 make 版本之间而不是操作系统之间。

最大的问题是你的目标平台实际上是什么，你是想让这段代码在 Windows 上本地运行，还是想在 Cygwin 下运行它？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-21T12:03:42.770

在两个平台上都使用 gnumake。我愿意。我已经很多年没有接触过 Visual C 了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-21T12:16:16.847

nmake 有它自己的格式而不是 windows 本身，因此 makefile 格式与 make 工具而不是 os 有关。对于简单的事情，g(nu)make 和 nmake 的格式相似，正如人们在考虑仅使用 gmake 之前建议的那样。

# sharepoint - 自定义 SharePoint:FormFields 到特定高度

> ID：892592
> 
> 赞同：1
> 
> 时间：2009-05-21T12:00:19.033
> 
> 标签：sharepoint, sharepoint-designer

我正在自定义一个 NewForm.aspx 页面，并以文本框的形式创建了一些新的 SharePoint:FormFields。我希望根据具体情况自定义这些框的高度，但我无法弄清楚。

我已经查看了 DisplaySize，但它只控制特定文本框的宽度，并且我已经看到添加：

`<style> .ms-long{width:100px;} </style>`

但这会改变每个 SharePoint:FormField 的大小，而不仅仅是一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T13:17:28.020

在完整的 html 输出中查找元素，并使用 id 而不是类作为 css 选择器。如果找不到合适的选择器或者需要使用ie不支持的选择器，可以使用javascript/jquery来查找和修改个别控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T21:17:12.323

I take it your a user of SharePoint Designer to be editing NewForm.aspx. Personally the route I would go down is to design a custom text box field and give it the desired size that way. Might not be what you want, but it's one way to do it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T13:48:56.537

如果您正在自定义 NewForm.aspx，并且想要自定义控件的外观，您还应该使用自己的 .css 文件自定义 CSS。这可能包括也可能不包括自定义母版页。

# javascript - 了解 JavaScript 中的原型继承

> ID：892595
> 
> 赞同：171
> 
> 时间：2009-05-21T12:00:43.383
> 
> 标签：javascript, oop, inheritance, constructor, prototype-programming

我是 JavaScript OOP 的新手。您能解释一下以下代码块之间的区别吗？我进行了测试，两个块都可以工作。最佳做法是什么，为什么？

第一块：

```
function Car(name){
    this.Name = name;
}

Car.prototype.Drive = function(){
    console.log("My name is " + this.Name + " and I'm driving.");
}

SuperCar.prototype = new Car();
SuperCar.prototype.constructor = SuperCar;

function SuperCar(name){
    Car.call(this, name);
}

SuperCar.prototype.Fly = function(){
    console.log("My name is " + this.Name + " and I'm flying!");
}

var myCar = new Car("Car");
myCar.Drive();

var mySuperCar = new SuperCar("SuperCar");
mySuperCar.Drive();
mySuperCar.Fly();
```

第二块：

```
function Car(name){
    this.Name = name;
    this.Drive = function(){ 
        console.log("My name is " + this.Name + " and I'm driving.");
    }
}

SuperCar.prototype = new Car();

function SuperCar(name){
    Car.call(this, name);
    this.Fly = function(){
        console.log("My name is " + this.Name + " and I'm flying!");
    }
}

var myCar = new Car("Car");
myCar.Drive();

var mySuperCar = new SuperCar("SuperCar");
mySuperCar.Drive();
mySuperCar.Fly();
```

为什么作者添加了using`Drive`和`Fly`方法`prototype`，而没有声明为类`this.Drive`内的方法和类中的方法？`Car``this.Fly``SuperCar`

为什么`SuperCar.prototype.constructor`需要设置回`SuperCar`？`constructor`设置时属性是否被覆盖`prototype`？我注释掉了这一行，没有任何改变。

为什么要调用`Car.call(this, name);`构造`SuperCar`函数？`Car`当我这样做时，属性和方法不会被“继承”

```
var myCar = new Car("Car"); 
```

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2009-05-21T13:29:39.197

添加到[Norbert Hartl 的答案](https://stackoverflow.com/questions/892595/understanding-prototypal-inheritance-in-javascript/892632#892632)中，不需要 SuperCar.prototype.constructor，但有些人将其用作获取对象构造函数的便捷方式（在本例中为 SuperCar 对象）。

仅从第一个示例开始， Car.call(this, name) 就在 SuperCar 构造函数中，因为当您执行此操作时：

```
var mySuperCar = new SuperCar("SuperCar"); 
```

这就是 JavaScript 所做的：

1.  实例化一个新的空白对象。
2.  新鲜对象的内部原型设置为 Car。
3.  SuperCar 构造函数运行。
4.  完成的对象被返回并设置在 mySuperCar 中。

注意 JavaScript 没有为你调用 Car。就原型而言，您没有为 SuperCar 设置的任何属性或方法都将在 Car 中查找。有时这很好，例如 SuperCar 没有 Drive 方法，但它可以共享 Car 的方法，因此所有 SuperCar 将使用相同的 Drive 方法。其他时候你不想分享，比如每辆超级跑车都有自己的名字。那么如何将每辆 SuperCar 的名称设置为自己的东西呢？您可以在 SuperCar 构造函数中设置 this.Name ：

```
function SuperCar(name){
    this.Name = name;
} 
```

这有效，但请稍等。我们不是在 Car 构造函数中做了完全相同的事情吗？不想重蹈覆辙。由于 Car 已经设置了名称，我们就直接调用它吧。

```
function SuperCar(name){
    this = Car(name);
} 
```

哎呀，您永远不想更改特殊`this`对象引用。还记得这4个步骤吗？抓住 JavaScript 给你的那个对象，因为它是保持 SuperCar 对象和 Car 之间宝贵的内部原型链接的唯一方法。那么我们如何设置名称，而不重复我们自己，也不会丢弃我们新鲜的 SuperCar 对象 JavaScript 花了这么多特别的精力来为我们准备呢？

两件事情。一：意思`this`是灵活的。二：汽车是一种功能。可以调用 Car，而不是使用原始的、新鲜的实例化对象，而是使用例如 SuperCar 对象。这为我们提供了最终解决方案，这是您问题中第一个示例的一部分：

```
function SuperCar(name){
    Car.call(this, name);
} 
```

作为一个函数，允许使用函数的[call 方法](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Function/call)调用 Car ，这将 Car 内部的含义更改为`this`我们正在构建的 SuperCar 实例。快！现在每辆 SuperCar 都有自己的 Name 属性。

总而言之，`Car.call(this, name)`在 SuperCar 构造函数中，为每个新的 SuperCar 对象提供了它自己唯一的 Name 属性，但不会复制 Car 中已有的代码。

一旦你理解了原型，它们并不可怕，但它们根本不像经典的类/继承 OOP 模型。我写了一篇关于[JavaScript 中原型概念](http://www.spheredev.org/wiki/Prototypes_in_JavaScript)的文章。它是为使用 JavaScript 的游戏引擎编写的，但它与 Firefox 使用的 JavaScript 引擎相同，因此应该都是相关的。希望这可以帮助。

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2009-05-21T12:10:36.703

这两个块的不同之处在于，在第一个示例`Drive()`中仅存在一次，而在第二种方法`Drive()`中，每个实例都将存在（每次执行`new Car()`该函数`drive()`都会再次创建）。或者不同的是，第一个使用原型存储函数，第二个使用构造函数。函数的查找是构造函数，然后是原型。因此，`Drive()`无论它是在构造函数中还是原型中，查找它都会找到它。使用原型更有效，因为通常每种类型只需要一个函数。

javascript 中的`new`调用会自动设置原型中的构造函数。如果要覆盖原型，则必须手动设置构造函数。

javascript 中的继承与`super`. 因此，如果您有一个子类，那么调用超级构造函数的唯一机会就是通过它的名称。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-10-29T13:49:58.343

Norbert，您应该注意，您的第一个示例几乎就是 Douglas Crockford 所说的伪经典继承。对此有几点需要注意：

1.  您将调用 Car 构造函数两次，一次来自 SuperCar.prototype = new Car() 行，另一个来自“构造函数窃取”行 Car.call(this...您可以创建一个辅助方法来继承原型，而您的汽车构造器只需运行一次，使设置更有效。
2.  SuperCar.prototype.constructor = SuperCar 行将允许您使用 instanceof 来标识构造函数。有些人希望其他人只是避免使用 instanceof
3.  引用变量如： var arr = ['one','two'] 当在超级（例如 Car）上定义时，将被所有实例共享。这意味着所有实例都会显示 inst1.arr.push['three']、inst2.arr.push['four'] 等！本质上，您可能不想要的静态行为。
4.  您的第二个块在构造函数中定义了 fly 方法。这意味着每次调用它时，都会创建一个“方法对象”。最好为方法使用原型！但是，如果您愿意，您可以将其保留在构造函数中 - 您只需要注意，因此您实际上只初始化原型文字一次（伪）： if (SuperCar.prototype.myMethod != 'function')...then define你的原型文字。
5.  'Why call Car.call(this, name)....'：我没有时间仔细查看你的代码，所以我可能错了，但这通常是为了让每个实例都可以保持自己的状态来修复我上面描述的原型链接的“静态”行为问题。

最后，我想提一下，我有几个可以在这里工作的 TDD JavaScript 继承代码示例：[TDD JavaScript 继承代码和论文](http://github.com/roblevintennis/Testing-and-Debugging-JavaScript)我很想得到您的反馈，因为我希望改进它并保持开源。目标是帮助经典程序员快速上手 JavaScript，并补充 Crockford 和 Zakas 书籍的学习。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-21T12:07:30.610

我不是 100% 确定，但我相信不同之处在于第二个示例只是将 Car 类的内容复制到 SuperCar 对象中，而第一个示例将 SuperCar 原型链接到 Car 类，以便运行时更改为Car 类也会影响 SuperCar 类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-07T02:11:37.987

```
function abc() {
} 
```

为函数 abc 创建的原型方法和属性

```
abc.prototype.testProperty = 'Hi, I am prototype property';
abc.prototype.testMethod = function() { 
   alert('Hi i am prototype method')
} 
```

为函数 abc 创建新实例

```
var objx = new abc();

console.log(objx.testProperty); // will display Hi, I am prototype property
objx.testMethod();// alert Hi i am prototype method

var objy = new abc();

console.log(objy.testProperty); //will display Hi, I am prototype property
objy.testProperty = Hi, I am over-ridden prototype property

console.log(objy.testProperty); //will display Hi, I am over-ridden prototype property 
```

[http://astutejs.blogspot.in/2015/10/javascript-prototype-is-easy.html](http://astutejs.blogspot.in/2015/10/javascript-prototype-is-easy.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-01T09:53:20.823

这里有几个问题：

> 您能否解释以下代码块之间的区别。我进行了测试，两个块都可以工作。

第一个只创建一个`Drive`函数，第二个创建其中两个：一个 on`myCar`和另一个 on `mySuperCar`。

以下代码在执行第一个或第二个块时会给出不同的结果：

```
myCar.Fly === mySuperCar.Fly // true only in the first case
Object.keys(myCar).includes("Fly") // true only in the second case
Object.keys(Car.prototype).length === 0 // true only in the second case 
```

> 最佳做法是什么，为什么？
> 为什么作者添加`Drive`和`Fly`方法 using `prototype`，但没有在类内和类中声明它们为`this.Drive`方法？`Car``this.Fly``SuperCar`

在原型上定义方法是更好的做法，因为：

*   每个方法只定义一次
*   每个方法也可用于在未执行构造函数的情况下创建的实例（调用时就是这种情况`Object.create(Car.prototype)`）；
*   您可以检查在实例的原型链中的哪个级别定义了某个方法。

> 为什么`SuperCar.prototype.constructor`需要设置回`SuperCar`？设置时是否会`constructor`覆盖属性`prototype`？我注释掉了这一行，没有任何改变。

`constructor`设置时不会覆盖该属性`prototype`。但是is的构造函数`new Car()`，`Car`所以如果你设置`new Car()`为`SuperCar.prototype`，那么显然`SuperCar.prototype.constructor`is `Car`。

只要您不重新分配到`prototype`，就存在不变性：`Constructor.prototype.constructor === Constructor`。例如，这适用于`Car`: `Car.prototype.constructor === Car`，但同样适用于`Array`, `Object`, `String`, ... 等。

但是，如果您将不同的对象重新分配给`prototype`，则该不变性将被破坏。通常这不是问题（正如您已经注意到的），但最好恢复它，因为它回答了*“哪个构造函数在创建新实例时使用这个原型对象？”这个问题。*一些代码可能会进行此类检查并依赖于它。请参阅[“为什么需要设置原型构造函数？”](https://stackoverflow.com/q/8453887/5459839) 对于这种情况。

> 为什么要调用`Car.call(this, name);`构造`SuperCar`函数？当我这样做时，Car 的属性和方法不会被“继承”吗
> 
> ```
> var myCar = new Car("Car"); 
> ```

如果您不这样做，`Car.call(this, name);`那么您的`SuperCar`实例将没有 name 属性。您当然可以决定只做`this.name = name;`，这只是复制`Car`构造函数中的代码，但在更复杂的情况下，重复这样的代码是不好的做法。

`new Car(name)`在构造函数中调用不会有帮助`SuperCar`，因为这将创建*另一个*对象，而您确实需要扩展该`this`对象。通过不使用`new`（`call`改为使用），您实际上告诉`Car`函数不要作为构造函数运行（即*不*创建新对象），而是使用您传递给它的对象。

### 时代变了

在现代版本的 JavaScript 中，您可以使用`super(name)`而不是`Car.call(this, name)`：

```
function SuperCar(name) {
    super(name);
} 
```

今天，您还将使用`class`语法并编写问题的第一个代码块，如下所示：

```
class Car {
    constructor(name) {
        this.name = name;
    }
    drive() {
        console.log(`My name is ${this.name} and I'm driving.`);
    }
}

class SuperCar extends Car {
    constructor(name) {
        super(name);
    }
    fly() {
        console.log(`My name is ${this.name} and I'm flying!`);
    }
}

const myCar = new Car("Car");
myCar.drive();

const mySuperCar = new SuperCar("SuperCar");
mySuperCar.drive();
mySuperCar.fly();
```

请注意，您甚至不必提及`prototype`属性即可实现目标。该`class ... extends`语法还负责将`prototype.constructor`属性设置为问题中的第一个块。

# java - 如何在 Websphere Portal 上显示来自 Struts portlet 的 Excel 内容

> ID：892597
> 
> 赞同：1
> 
> 时间：2009-05-21T12:00:53.180
> 
> 标签：java, struts, websphere, content-type, portlet

这是代码，它不显示 .csv 文件：

```
public class ForwardAction extends MultiAction {
private static final String FILE_ERROR = "<h3><center>INVALID FILE</center></h3>";
    public ActionForward doVizualizare(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {

    StringBuffer sb = new StringBuffer();
    sb.append("Name,Email,Phone");
    sb.append(System.getProperty("line.separator"));
    sb.append("Naveen,naveen@ibm.com,111-111-111");

    OutputStream resOut = response.getOutputStream();
    try {
        response.setContentType("application/octet-stream"); 
        response.setHeader("Content-Disposition", "attachment; filename=\"a.csv\"");
        resOut.write(sb.toString().getBytes());
    } catch (Exception e) {
        resOut.write(FILE_ERROR.getBytes());
    }
    return null;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T13:02:40.877

关闭并刷新输出流。

还要检查是否调用了 doVizualizare 方法

# asp.net-mvc - 针对 shibboleth 和授权的 asp.net mvc 身份验证

> ID：892616
> 
> 赞同：0
> 
> 时间：2009-05-21T12:05:29.317
> 
> 标签：asp.net-mvc, authentication, shibboleth

我从哪里获得有关当前连接用户的信息？也就是说，shibboleth 是如何传递信息的？

我可以根据从 shibboleth 获取的数据使用 [Authorize] 属性对操作设置一些限制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-09-08T21:44:53.567

Shibboleth 根据属性接受策略 (1.3.x) 或属性映射 (2.x) 文件中定义的标头名称，将与会话关联的用户属性发布到 HTTP 请求标头中。这些标头根据 CGI 规范定义的映射规则转换为 CGI 变量。

您应该了解此安全公告： [http ://shibboleth.net/community/advisories/secadv_20090615.txt](http://shibboleth.net/community/advisories/secadv_20090615.txt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-02T00:51:00.137

我从来没有使用过 shibboleth，但是您可以从 Controller.User 属性中获取有关用户的信息。它将返回当前线程的通用主体。使用此主体，您可以检查用户是否已通过身份验证并获取用户的登录名。这是因为登录后会设置一个身份验证 cookie，而该 cookie 包含的信息量有限。并且在登录后的每个请求中，仅检查此 cookie（如果它存在且有效 - 用户已通过身份验证）。
因此，如果您需要一些特定信息，您可以手动加载用户（最好在此处使用缓存）并检查您想要的任何内容。
您还可以在请求开始时创建自己的主体并将必要的信息附加到线程（例如，在请求开始时，使用来自基本主体的用户名从 db/cache 加载用户，创建并将您自己的主体设置为线程） . 在此之后，您可以检查您需要的用户的所有属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-12T14:18:59.497

你会把你自己的校长放在哪里？您在请求开始时说，但如果您不希望每个请求都授权怎么办？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-25T17:20:43.617

您需要在 Global.asax.cs 中创建一个具有以下签名的方法

```
protected void Application_PostAuthenticateRequest()
{
    //Your code here.
} 
```

这将在几乎所有其他操作完成之前自动调用（如果存在，MVC 将调用此方法，您不必在任何地方“打开”它），这就是您需要设置 Principal 的地方。例如，假设您有一个名为的标头，该标头`RolesHeader`具有逗号分隔的角色值，另一个标头`UserId`具有（duh）用户 ID。

您的代码，没有任何错误处理，可能看起来像：

```
protected void Application_PostAuthenticateRequest()
{
    var rolesheader = Context.Request.Headers["RolesHeader"];
    var userId = Context.Request.Headers["UserId"];
    var roles = rolesheader.Split(',');
    var principal = new GenericPrincipal(new GenericIdentity(userId), roles);
    Context.User = principal;
} 
```

它是该`[Authorize]`属性使用的 Principal/Identity，因此在请求生命周期开始时将其设置在此处意味着该`[Authorize]`属性将正常工作。

**其余的都是可选的，但我推荐它：**

我喜欢创建自己的自定义类来实现 IPrincipal 和 IIdentity，而不是使用 GenericPrincipal 和 GenericIdentity，因此我可以在其中填充更多用户信息。然后，我的自定义 Principal 和 Identity 对象具有更丰富的信息，例如分支编号或电子邮件地址或其他任何内容。

然后，我创建了一个名为的控制器`BaseController`，它具有以下内容

```
protected new CustomPrincipal User
{
    get
    {
        return (base.User as CustomPrincipal) ?? CustomPrincipal.GetUnauthorizedPrincipal();
    }
} 
```

这使我能够访问我所有丰富的自定义 Principal 数据，而不仅仅是 IPrincipal 中定义的数据。然后，我所有的真实控制器都继承自`BaseController`而不是直接继承自`Controller`.

显然，当使用这样的自定义 Principal 时，在 Application_PostAuthenticateRequest() 方法中，您将 Context.User 设置为 your`CustomPrincipal`而不是`GenericPrincipal`.

# .net - 创建两个数字的哈希码

> ID：892618
> 
> 赞同：66
> 
> 时间：2009-05-21T12:06:00.550
> 
> 标签：.net, algorithm

我正在尝试为`(a + b)`C# 中的复数类创建一个快速哈希码函数。

我已经多次看到这种`a.GetHashcode()^b.GetHashCode()`方法。但这将为`(a,b)`和提供相同的哈希码`(b,a)`。

是否有任何标准算法可以做到这一点，.Net 框架中是否有任何功能可以提供帮助？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2009-05-21T12:12:30.600

我为任意一组可散列项创建散列码的常规方法：

```
int hash = 23;
hash = hash * 31 + item1Hash;
hash = hash * 31 + item2Hash;
hash = hash * 31 + item3Hash;
hash = hash * 31 + item4Hash;
hash = hash * 31 + item5Hash;
// etc 
```

在你的情况下，`item1Hash`可能只是`a`，而且`item2Hash`可能只是`b`。

23 和 31 的值相对不重要，只要它们是质数（或至少是互质数）。

显然仍然会发生碰撞，但您不会遇到以下常见的令人讨厌的问题：

```
hash(a, a) == hash(b, b)
hash(a, b) == hash(b, a) 
```

`a`如果您对真正的价值和可能的价值有更多了解，`b`您可能会做得更好，但这是一个很好的初始实现，很容易记住和实现。请注意，如果您有可能构建带有“检查算术溢出/下溢”的程序集，则应将其全部放在未选中的块中。（溢出对于这个算法很好。）

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-05-21T12:11:50.943

这是一种考虑顺序的可能方法。（第二种方法被定义为扩展方法。）

```
public int GetHashCode()
{
    return a.GetHashcode() ^ b.GetHashcode().RotateLeft(16);
}

public static uint RotateLeft(this uint value, int count)
{
    return (value << count) | (value >> (32 - count))
} 
```

`Complex`看看.NET 4.0 的类如何做到这一点肯定会很有趣。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-05-21T12:12:55.700

一种标准方法是：

```
hashcode = 23
hashcode = (hashcode * 37) + v1
hashcode = (hashcode * 37) + v2 
```

23 和 37 互质，但您也可以使用其他数字。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-21T12:09:54.427

那这个呢：

```
(a.GetHashcode() + b).GetHashcode() 
```

为 (a,b) 和 (b,a) 提供不同的代码，而且它并不是那么花哨。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-05-20T14:06:32.450

@JonSkeet 提供了一种公平的通用算法，用于从 n 个哈希码计算哈希码，但假设您已经知道对象的哪些成员需要进行哈希处理，知道如何处理空成员，并省略了 n 个任意项的实现. 因此，我们扩展了他的答案：

1.  只有公共的、不可变的属性和字段才应该对对象哈希码有贡献。它们应该是公共的（或对公共同构），因为我们应该能够指望两个具有相同可见表面且具有相同哈希码的对象（暗示对象相等和哈希码相等之间的关系），并且它们应该是不可变的，因为对象的哈希码在其生命周期内永远不应该改变（从那时起，您可能最终会在哈希表的错误槽中找到一个对象！）。
2.  null 成员应作为常量散列，例如 0
3.  `fold`@JonSkeet 的算法是一个教科书示例，用于应用通常称为（`Aggregate`在 C# LINQ 中）的函数式编程高阶函数，其中`23`是我们的种子和`<hash accumulator> * 31 + <current item hash>`折叠函数：

在 F# 中

```
let computeHashCode items =
    items
    |> Seq.map (fun item -> if item = null then 0 else item.GetHashCode())
    |> Seq.fold (fun hash itemHash -> hash * 31 + itemHash) 23 
```

在 C# 中

```
Func<IEnumerable<Object>, int> computeHashCode = items =>
    items
    .Select(item => item == null ? 0 : item.GetHashCode())
    .Aggregate(23, (hash, itemHash) => hash * 31 + itemHash); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-15T08:31:50.263

这一切都取决于您要达到的目标。如果散列适用于散列结构`Dictionary`，那么您必须**平衡冲突率和散列速度**。要获得完全没有冲突的完美哈希，将更加耗时。类似地，最快的散列算法相对会发生更多的冲突。找到完美的平衡是这里的关键。此外，您应该考虑**您的有效散列可以有多大，以及散列是否应该是可逆的**！如果复数的实部和虚部始终为正，Noldorin 的方法会为您提供完美的哈希（读取无冲突）。如果您对罕见的碰撞没问题，这甚至适用于负数。但我担心它可以产生的值范围，这对我的口味来说相当大。

如果您追求完美的散列（出于某些学术/研究兴趣），即使对于负数也应该有效，您可以[看到这个解决方案](https://stackoverflow.com/questions/919612/mapping-two-integers-to-one-in-a-unique-and-deterministic-way/13871379#13871379)（以及同一线程中的一系列其他解决方案）。在我的测试中，它比我见过的任何其他产品都更快并且更好地利用空间。

# .net - .net OutOfMemory 异常

> ID：892622
> 
> 赞同：2
> 
> 时间：2009-05-21T12:07:34.120
> 
> 标签：.net, string, windows-mobile, memory-management, compact-framework

在对我正在为 Windows Mobile 编写的类库（使用 Compact Net Framework 2.0）进行一些最终测试时，我遇到了 OOM 异常。

基本上，我的库首先加载一个字典文件（一个带有单词列表的普通文本文件），然后加载另一个基于字典的文件（我称之为 KeyMap），其大小或多或少与先前加载的字典相同。

在我尝试加载大小约为 2.7MB 的西班牙语词典之前，上述文件一切正常（使用模拟器和我的真实设备）。到目前为止，我使用的其他语言词典没有任何 OOM 异常，每个词典大约为 1.8MB。使用西班牙语词典，我可以毫无问题地加载第一个文件，但是当我尝试读取第二个文件时，我得到了 OOM 错误。

下面我编写了我正在使用的代码。基本上我读取文件并将其内容分配给字符串变量（DictData 和 TextKeyMap）。然后我对字符串变量进行拆分，以将内容传递给字符串数组（Dict 和 KeyMap）。

```
'Loading Dictionary works
Dim ReadDictionary As StreamReader = New StreamReader(DictPath, Encoding.UTF8)
   DictData = ReadDictionary.ReadToEnd()
            ReadDictionary.Close()
            Dict = DictData.ToString.ToUpper.Split(mySplitSep.ToCharArray) 'mySplitSep=chr(10)
            DictData = "" 'perhaps "nothing" is better

 'Loading KeyMap gives me error
 Dim ReadHashKeyMap As StreamReader = New StreamReader(HashKeyMapPath, Encoding.UTF8)
    TextKeyMap = ReadHashKeyMap.ReadToEnd() '<-- OOM-error
            ReadHashKeyMap.Close()
            KeyMap = TextKeyMap.ToString.Split(mySplitSep.ToCharArray) 'mySplitSep=chr(10)
            TextKeyMap = "" 'perhaps "nothing" is better 
```

我是一个没有专业知识的业余程序员，所以我上面显示的代码可能会得到改进。我没有使用 ReadToEnd，而是尝试读取 For 循环中的每一行，但我得到了同样的错误（它也更慢）。

我认为该错误是由于 Windows Mobile 中 32MB 的连续内存限制所致。

你们中的任何人都可以帮助我，也许通过提出一些替代解决方案？也许问题是由于我上面显示的蹩脚代码？怎么样，在另一个线程中加载第二个文件？这能行吗？

我能得到的所有帮助将不胜感激。

**编辑**：前段时间我问了一个类似的问题（[here](https://stackoverflow.com/questions/678025/net-out-of-memory-exceptions-in-windows-mobile-how-to-overcome-this-problem)），但这个问题与处理字节接收更相关，并使用块来解决。在这种情况下，我正在处理字符串。

**Edit2**：这个库是一个拼写检查库。它工作得很好，并实现了一些相当先进的技术，例如 Soundex 和 DoubleMetaPhone 算法。到目前为止，唯一的主要问题是上面提到的问题，其中包含一个巨大的西班牙语文本文件。其他词典都还行。有关更多信息，请参阅[此链接](http://forum.xda-developers.com/showthread.php?t=495728)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T13:38:43.873

由于您没有说您正在使用此文件是什么，我假设您只是出于某种原因搜索一个单词。

首先，尝试将完整的文件加载到内存中可能不是一个好主意。相反，在文件中搜索您需要的数据（单词）可能会更有效率，并且也许在内存中保留某种索引信息以加快速度。

由于您尝试搜索的数据只是一个单词列表，因此扫描文件并在字典中记录单词的第一个字母发生变化的位置可能是个好主意。例如 A 从第 0 行开始；B 从第 200 行开始；C 从第 300 行等开始。使用这两条信息来填充您的字典；字母是键，行号是值。实际上，字典成为单词列表文件的高级索引。这本词典也很小。

然后，当您开始搜索一个单词时，使用该单词的第一个字母来搜索字典。这将为您提供文件中以该字母开头的单词所在的行号。使用行号（重新）打开文件并通过将流指针移动到目标行直接转到 word 文件中的该行。然后从那里搜索目标词。或者顺序搜索，一次一行（不推荐它会很慢，但更容易编码）。[或者，使用二进制印章](http://en.wikipedia.org/wiki/Binary_chop)搜索单词（更快，但更难编码）。尽管对于后者，您还需要知道以目标字母开头的单词在文件中的停止位置，因为您将搜索文件的一部分。我还建议您在文件中进行单词搜索，而不是将所有这些单词加载到内存中，否则您可能会回到开始出现 OOM 错误的位置。

如果您不确定任何事情，请在此处发表评论，我会尽力回答。

祝你好运

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T12:37:54.637

似乎您只是没有足够的内存来同时将所有文件中的所有文本保存在内存中。您可能需要想出一个策略来缓存有限的文件子集，并且足够智能以在请求不在缓存中的内容时返回文件。

如果练习的全部目的是您不必返回文件（例如，建立某种索引），您也可以尝试变得“聪明”并为 in 提出替代表示- 记忆文本，利用大多数西方语言的可压缩性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-21T13:01:29.907

我会说有问题的行是这一行：

```
Dict = DictData.ToString.ToUpper.Split(mySplitSep.ToCharArray) 
```

GC 无法跟上这条简单线后面临时对象的创建。“ToUpper”正在创建原始字符串的副本，“Split”正在从该副本中创建一个新数组（并且可能会为拆分算法本身使用更多内存）。顺便说一句，对“ToString”的调用是没用的，DictData 已经是一个字符串了，对吧？

就个人而言，我会逐块从流中读取数据，然后逐块将其拆分为 List<>。但是如果你想保持你的代码简短，试试这个，你永远不会知道：

```
DictData = ReadDictionary.ReadToEnd()
ReadDictionary.Close()
DictData = DictData.ToUpper()
GC.Collect()
Dict = DictData.Split(mySplitSep.ToCharArray)
DictData = Nothing
GC.Collect() 
```

我从来没有发现调用 GC.Collect 是一个好的解决方案。调用它通常意味着“应该做一些更好的事情”。但是.NET CF 下的内存管理有时很痛苦。

# ruby-on-rails - 如何以导轨形式处理多个模型

> ID：892624
> 
> 赞同：19
> 
> 时间：2009-05-21T12:08:01.903
> 
> 标签：ruby-on-rails, forms

[http://weblog.rubyonrails.org/2009/1/26/nested-model-forms](http://weblog.rubyonrails.org/2009/1/26/nested-model-forms)

这篇文章有助于学习如何以 rails 形式处理多个模型。只要模型是嵌套的，它就可以工作。如果不是呢？可以说，我有一个表单，用户填写个人详细信息、地址详细信息和一堆指定她的兴趣的复选框。在这个单一表单中至少涉及 3 个表，在没有 3 个不同的保存按钮的情况下，最好的处理方法是什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-05-21T14:24:00.210

两种选择：

首先是[ActivePresenter](https://github.com/jamesgolick/active_presenter)，它适用于此。

其次就是使用`fields_for`：

```
<%= form_for @user do |f| %>

   <%=f.label :name %>
   <%=f.text_field :name %>

   <%= fields_for @address do |fa| %>
      <%=fa.label :city %>
      <%=fa.text_field :city %>
   <% end %>

<% end %> 
```

然后在控制器中，保存记录。

```
 @user = User.new(params[:user]) 
 @address = Address.new(params[:address]) 
```

ActivePresenter 工作得很好。

还通过 Google 找到了一个[railsforum 帖子](http://railsforum.com/viewtopic.php?id=717)，效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-20T17:11:55.687

您可以参考**The Pragmatic Programmers 的本教程**

[高级 Rails 食谱](https://media.pragprog.com/titles/fr_arr/multiple_models_one_form.pdf)

# visual-studio - 在 vs2008 中产生 cmd.exe 错误

> ID：892636
> 
> 赞同：5
> 
> 时间：2009-05-21T12:11:24.813
> 
> 标签：visual-studio, visual-studio-2008, visual-c++

我创建了一个简单的 vc++ 控制台应用程序并尝试打印“Hello World”。我正在使用 Windows Server 2003 机器。

当我尝试构建这个项目时，我收到错误**错误：生成 cmd.exe**

我该如何解决？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-21T13:09:26.833

检查 cmd.exe 是否在`<Path>`环境变量中？

我只是通过`%SystemRoot%\system32`从`path`环境变量中删除了一个小测试，我遇到了同样的问题。

> 错误 4 生成“cmd.exe”时出错。项目 SEH

如果是路径问题，请尝试在下面添加`Projects and Solutions -> VC++ Directories`：

> $(SystemRoot)\System32

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-08-28T10:47:01.010

如果你得到这样的错误

只需打开*工具 -> 选项 -> 项目和解决方案 -> VC++ 目录*

并添加这些行：

1.  `$(SystemRoot)\System32`
2.  `$(SystemRoot)`
3.  `$(SystemRoot)\System32\wbem`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T16:57:30.697

[http://www.interact-sw.co.uk/iangblog/2005/09/12/cmdspawnerror](http://www.interact-sw.co.uk/iangblog/2005/09/12/cmdspawnerror)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-22T05:55:37.820

是的，我找到了问题所在。我无法找到 cmd.exe 的路径，所以转到 visualstudio tools->options->projects 和 ->vc++ 目录并指定 ($SystemRoot)/system32 然后它工作正常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-21T12:21:31.750

你在 Vista 上运行吗？这可能是需要以管理员身份运行 Visual Studio 的情况吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-21T13:27:15.533

我相信 cmd.exe 在 Windows Server 2003 上默认情况下不能由非管理用户运行，所以我会检查它的权限。当然，这假设您尚未以管理员身份运行它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-07-03T21:09:46.203

是的。（另一个奇怪的 Windows 错误）项目和解决方案 -> VC++ 目录 -> 可执行文件添加 $(SystemRoot)\System32 它可以工作

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-29T18:18:07.117

这对我来说是错误的，因为当前用户无法访问**cmd.exe 。**我做了什么来解决这个问题：

> 1.  关闭当前的 Visual Studio。
> 2.  通过右键单击 Visual Studio 并选择“以管理员身份运行”重新打开 Visual Studio
> 3.  现在运行项目。

**为什么它有效**

要访问 cmd.exe 应用程序必须具有运行它的权限。它无权访问它，因此下次您尝试正常访问它时它可以工作（无需以管理员身份运行应用程序）

**操作系统** Windows 7

# vba - 在隐藏的工作表或工作簿上可以执行哪些 Excel VBA 操作？

> ID：892659
> 
> 赞同：8
> 
> 时间：2009-05-21T12:18:57.450
> 
> 标签：vba, excel

隐藏的工作表/工作簿对可以在 VBA 代码中完成的操作有一些限制，例如大多数`Select`和`Selection`语句，以及来自 的任何内容`ActiveSheet`，但我似乎找不到任何限制列表。

Google、帮助系统中的内置文档和 MSDN 的网站都让我失望了。谁能指出我正确的方向？

编辑：工作簿打开

```
Set WB_Master = Workbooks.Open(Filename:=PATH_Master, ReadOnly:=False) 
```

然后隐藏

```
WB_Master.Windows(1).Visible = False 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-21T13:05:26.157

从 Visual Basic for Applications 帮助：

> 当一个对象被隐藏时，它会从屏幕上移除，并且它的 Visible 属性设置为 False。用户无法访问隐藏对象的控件，但它们可通过编程方式提供给正在运行的应用程序、可能通过自动化与应用程序通信的其他进程，以及在 Windows 中提供给 Timer 控件事件。

恐怕没有太多帮助，而且我通过谷歌找不到太多其他东西。

正如您自己所说， Select 方法和 Selection 属性不适用于隐藏的 Worksheet，但它们应该适用于隐藏的 Workbook。（如果我错了，请纠正我。）然而，总的来说，在工作表中选择范围并不总是那么有效，最好使用 Range 属性（它确实适用于隐藏的工作表）。

编辑：

即使工作表不可见，以下代码也会将 A1:A8 的颜色更改为青色：

```
Dim book2 As Workbook
Set book2 = Workbooks.Open("C:\Book2.xls")

book2.Worksheets("Sheet1").Visible = False
book2.Windows(1).Visible = False

With book2.Worksheets("Sheet1").Range("A1:E8").Interior
    .ColorIndex = 8
    .Pattern = xlSolid
    .PatternColorIndex = xlAutomatic
End With

book2.Windows(1).Visible = True
book2.Worksheets("Sheet1").Visible = True 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-07-19T05:47:04.163

您可以绕过隐藏工作表的任何限制，方法是在用户没有意识到的情况下取消隐藏它们，执行您需要的任何操作，然后再次隐藏它们。

此示例假定 Sheet2 是隐藏的。

```
Sub DoStuffToAHiddenSheetWithoutTheUserKnowingIt()
    'turns off screen repainting so the user can't see what you're doing
    'incidentally, this dramatically speeds up processing of your code
    Application.ScreenUpdating = False
    'note that if you're stepping through your code, screenupdating will be true anyway

    'unhide the sheet you want to work with
    Sheets("sheet2").Visible = True
        'do whatever you want here, including selecting cells if you want
        'Scagnelli is right though, only select cells if you have to

    'when you're finished, hide the sheet again
    Sheets("sheet2").Visible = False

    'make sure you turn screenupdating back on, or Excel will be useless
    Application.ScreenUpdating = True
End Sub 
```

如果您希望隐藏工作表，另一个有用的技巧是将它们设置为 xlVeryHidden，如果用户尝试通过菜单或功能区取消隐藏它们，这将阻止它们向用户列出。

# eclipse - 在eclipse中配置dojo

> ID：892660
> 
> 赞同：1
> 
> 时间：2009-05-21T12:19:21.397
> 
> 标签：eclipse, dojo

如何在 Eclipse 中配置 Dojo？有插件吗？这样做的步骤是什么？我正在使用 eclipse ganymede。尝试使用 ATF 时出现错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T14:05:46.523

我不认为 ATF 正在积极开发中。你可以试试 Aptana。否则，使用 Dojo 就相当于在项目中加载一个目录。除此之外的大多数 JS 工具可能与 Dojo 没什么关系

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:08:04.060

没有特定的插件，但 DOJO 基金会已经为它发布了一个自己的 IDE：http: [//maqetta.org/](http://maqetta.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T12:21:26.977

使用[Eclipse Ajax 工具包框架](http://www.eclipse.org/atf/)。

# embedded - 使用定时器计时会中断嵌入式微控制器

> ID：892661
> 
> 赞同：4
> 
> 时间：2009-05-21T12:19:39.180
> 
> 标签：embedded, interrupt, microchip, pic18

这个问题是关于在没有操作系统的情况下对小型微控制器进行编程。特别是，我目前对图片感兴趣，但问题很笼统。

我已经多次看到以下模式来保持时间：

定时器中断代码（比如定时器每秒触发一次）：

```
...
if (sec_counter > 0)
  sec_counter--;
... 
```

主线代码（非中断）：

```
sec_counter = 500; // 500 seconds

while (sec_counter)
{
  // .. do stuff
} 
```

主线代码可能会重复，将计数器设置为各种值（不仅仅是秒）等等。

在我看来，当`sec_counter`主线代码中的分配不是原子的时，这里有一个竞争条件。例如，在 PIC18 中，分配被转换为 4 个 ASM 语句（同时加载每个字节并在此之前从存储区中选择正确的字节）。如果中断代码出现在中间，则最终值可能已损坏。

奇怪的是，如果分配的值小于 256，则分配*是*原子的，所以没有问题。

我对这个问题是否正确？您使用什么模式来正确实现此类行为？我看到几个选项：

*   在每次分配给 sec_counter 之前禁用中断并在之后启用 - 这并不漂亮
*   不要使用中断，而是使用一个单独的计时器，该计时器启动然后轮询。这是干净的，但会用完整个计时器（在前一种情况下，1 秒触发计时器也可以用于其他目的）。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T12:59:32.157

在设置计数器之前，您肯定需要禁用中断。尽管它可能很丑陋，但它是必要的。在配置影响 ISR 方法的硬件寄存器或软件变量之前，始终禁用中断是一个很好的做法。如果您使用 C 语言编写，则应将所有操作视为非原子操作。如果你发现生成的程序集要查看太多次，那么最好放弃C语言，在程序集中编程。根据我的经验，这种情况很少见。

关于所讨论的问题，这是我的建议：

```
ISR:
if (countDownFlag)
{
   sec_counter--;
} 
```

并设置计数器：

```
// make sure the countdown isn't running
sec_counter = 500;
countDownFlag = true;

...
// Countdown finished
countDownFlag = false; 
```

您需要一个额外的变量，最好将所有内容包装在一个函数中：

```
void startCountDown(int startValue)
{
    sec_counter = 500;
    countDownFlag = true;
} 
```

这样你就可以抽象出启动方法（并在需要时隐藏丑陋）。例如，您可以轻松地将其更改为启动硬件计时器，而不会影响方法的调用者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T13:33:24.990

PIC 架构是原子的。它确保对内存文件的所有读-修改-写操作都是“原子的”。虽然执行整个读取-修改-写入需要 4 个时钟，但所有 4 个时钟都消耗在一条指令中，下一条指令使用下一个 4 个时钟周期。这是管道的工作方式。在 8 个时钟中，两条指令在流水线中。

如果该值大于 8 位，则会成为问题，因为 PIC 是 8 位机器，并且在多条指令中处理更大的操作数。这将引入原子问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T12:31:17.160

写入值然后检查它是否是所需的值似乎是最简单的选择。

```
do {
 sec_counter = value;
} while (sec_counter != value); 
```

顺便说一句，如果使用 C，您应该使变量 volatile。

如果您需要读取该值，则可以读取两次。

```
do {
    value = sec_counter;
} while (value != sec_counter); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-21T14:33:04.153

因为对 sec_counter 变量的访问不是原子的，所以如果你想要确定性的行为，真的没有办法避免在你的主线代码中访问这个变量之前禁用中断并在访问之后恢复中断状态。这可能是比为此任务专用一个硬件计时器更好的选择（除非您有多余的计时器，在这种情况下您最好使用一个）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-21T19:48:53.237

如果您下载 Microchip 的免费 TCP/IP 堆栈，其中的例程使用定时器溢出来跟踪经过的时间。特别是“tick.c”和“tick.h”。只需将这些文件复制到您的项目中即可。

在这些文件中，您可以看到它们是如何做到的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-23T15:35:58.650

少于 256 次移动是原子的并不那么好奇——移动一个 8 位的值是一个操作码，所以这就像你得到的那样是原子的。

在像 PIC 这样的微控制器上，最好的解决方案是在更改定时器值之前禁用中断。您甚至可以在更改主循环中的变量时检查中断标志的值，并根据需要进行处理。让它成为一个改变变量值的函数，你甚至可以从 ISR 中调用它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-21T12:47:36.613

那么，比较汇编代码是什么样的呢？

考虑到它是向下计数的，而且它只是一个零比较，如果它先检查 MSB，然后检查 LSB，应该是安全的。可能存在损坏，但它是否位于 0x100 和 0xff 之间的中间并且损坏的比较值为 0x1ff 并不重要。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-21T13:15:15.853

您现在使用计时器的方式，无论如何它都不会计算整秒，因为您可能会在周期中间更改它。所以，如果你不在乎的话。在我看来，最好的方法是读取值，然后比较差异。它需要更多的 OP，但没有多线程问题。（因为计时器具有优先级）

如果您对时间值更严格，我会在倒计时到 0 时自动禁用计时器，并在需要时清除计时器的内部计数器并激活。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-21T14:05:23.897

将 main() 上的代码部分移动到适当的函数，并让 ISR 有条件地调用它。

此外，为避免任何类型的延迟或丢失滴答声，请选择此定时器 ISR 作为高优先级中断（PIC18 有两个级别）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-08-19T18:42:33.877

一种方法是让中断保留一个字节变量，并让其他东西至少每 256 次计数器被调用一次；做类似的事情：

```
// ub==无符号字符；ui==无符号整数；ul==无符号长
ub now_ctr; // 这个被中断击中
ub prev_ctr;
ul big_ctr;

无效轮询计数器（无效）
{
  ub delta_ctr;

  delta_ctr = (ub)(now_ctr-prev_ctr);
  big_ctr += delta_ctr;
  prev_ctr += delta_ctr;
}
```

如果您不介意强制中断计数器与大计数器的 LSB 保持同步，则略有不同：

```
ul big_ctr;
无效轮询计数器（无效）
{
  big_ctr += (ub)(now_ctr - big_ctr);
}

```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-06-02T08:41:27.940

没有人解决*读取*多字节硬件寄存器的问题（例如计时器。计时器可能会在您读取它时翻转并增加其第二个字节。

说它是 0x0001ffff 并且你读了它。您可能会得到 0x0010ffff 或 0x00010000。

16 位外设寄存器对您的代码是*易失的。*

对于任何*易失*的“变量”，我使用双读技术。

```
do {
       t = timer;
 } while (t != timer); 
```

# iphone - 如何在 Objective C 中使用不同的数字类型

> ID：892664
> 
> 赞同：1
> 
> 时间：2009-05-21T12:20:54.887
> 
> 标签：iphone, objective-c, numbers

所以我试图在 Objective C 中用数字做一些事情，并意识到有很多选项，我只是对我的应用程序使用哪种类型感到困惑。

所以这里是类型。

*   NSNumber（这是一个类）
*   NSDecmial（这是一个结构）
*   NSDecimalNumber（这是一个类）
*   float/double（它们是原始类型）

所以基本上我需要做的是取一个 NSString，它代表基于十进制的小时数。（10.4 将是 10 小时和 (4/10)*60 分钟）并将其转换为：

1.  字符串表示 DH:M（这需要除法、乘法和基本算术）
2.  一个数字类型来存储以便以后计算（主要是在 NSTimeIntervals 和做减法之间转换）

哦，我也需要能够在这些上做一个绝对值

看起来困难的部分实际上是在类型之间转换。

对我来说，这是一个非常微不足道的问题，所以我不确定是迟到还是因为客观 C 数值类型很烂，但我可以用手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-21T12:49:36.950

将原始类型（double、CGFLoat、NSInteger）用于典型算术，以及当您需要将数字存储为实例变量时，该变量将主要用于其他地方的算术运算。您可以根据需要使用 C 数学函数（abs()、pow() 等）。NSTimeInterval 是 double 的 typedef，因此您可以将两者互换。

当您需要将数字存储为对象时使用 NSNumber，例如，如果您正在创建数字的 NSArray。Cocoa 的某些部分（如 Core Data 或键值编码）更多地处理 NSNumber 而不是原始类型，因此在这些情况下，您可能会发现自己使用 NSNumber 比平常更多。例如，如果您编写，`[timeKeepersArray valueForKeyPath:@"sum.seconds"]`您将返回一个 NSNumber，因此您可能会发现只保留该变量而不是将其转换为原语更容易。

由于在 NSNumber 和原始类型之间转换是少量的额外代码，因此通常您的应用程序最终会根据您对数字的处理方式偏爱其中一种。

哦，还有 NSDecmial 和 NSDecimalNumber？不要太担心它们，它们只会在您需要非常精确的十进制运算时出现，例如在存储财务数据时。

# java - 调用 System.gc() 或 finalize() 方法时，内部 (JVM) 发生了什么？

> ID：892665
> 
> 赞同：5
> 
> 时间：2009-05-21T12:21:06.620
> 
> 标签：java, garbage-collection, jvm, finalize

调用 System.gc() 或 finalize() 方法时，内部 (JVM) 发生了什么？

这真的是收集垃圾还是降低性能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-21T13:51:36.217

调用[System.gc()](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/System.html#gc())时发生的确切情况取决于 JVM。JVM 将此调用视为*建议*它可能是运行垃圾收集器的好时机，因此不要依赖它。

当 JVM 确定不再有对该对象的可访问引用时，垃圾收集器对该对象运行对象的[finalize()方法。](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html#finalize())你不应该在你的代码中调用它。请记住，finalize()*不会*在您的程序丢失该最终引用时被调用，而是在垃圾收集器运行的未来时间被调用，因此不要依赖它在特定时间点（或在全部）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-21T12:32:27.143

如果您想了解垃圾收集的内部原理，您应该阅读Sun 的[热点内存管理白皮书。](http://java.sun.com/javase/technologies/hotspot/gc/memorymanagement_whitepaper.pdf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T12:24:21.387

`System.gc()`顾名思义，通过调用垃圾收集器运行。此时，当对象真正被删除时，`finalize()`会在这些对象消失之前调用它们。

最后一个问题不应该有“ `or`”。这是垃圾收集*和*降低性能。

通常你根本不应该关心`gc`，因为它对你来说真的很好。有一些使用场景，你想在某个时间点摆脱很多对象；那么是可行的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T07:01:18.723

System.gc() 清理内存，并使用 finalize() 删除单个对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-09T07:07:46.887

是 System.gc(); 如果需要，将触发 finalize() 方法。公共类 TestGarbageCollection {

```
public static void main(String[] args) {
    while (true) {
        TestClass s = new TestClass();
        s.display();
        System.gc();
    }
} 
```

}

公共类TestClass {

```
public TestClass() {
    System.out.println("constructor");
}

public void display() {
    System.out.println("display");
}
@Override
public void finalize() {
    System.out.println("destructor");
} 
```

}

这将触发 finalize() 方法。是否覆盖本地类的 finalize 方法或 Object 的 finalize 方法都会被调用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-10-18T08:40:05.830

finalize() 是一种在对象准备好进行垃圾回收之前执行最后一段代码的方法（当对象没有强引用时）。

那么应该什么时候使用呢？仅在目前的两种情况下：

1.  作为安全措施，以确保关闭某些服务或进行某些所需的最终更改。例如 InputStream 类使用它来关闭 i/o 流。例如，您创建了一个 BufferedInputStream 实例。使用后手动关闭（）它。但是因为人们可能忘记这样做，所以 finalize() 充当了 close() 流的安全网。
2.  在使用 Native 的时候。因为垃圾收集器无法控制原生对象，所以可以使用 finalize() 作为回收它的一种手段。

除上述两种情况外永远不要使用它。明白为什么？我们需要了解对象的功能和生命周期。

简介：有一个单独的守护线程称为终结器线程，负责调用 finalize() 方法。终结队列是放置准备好调用 finalize() 方法的对象的队列。

1.  创建对象时，JVM 会检查该对象是否具有 finalize() 方法。如果有，那么它在内部说明这个特定对象有 finalize() 方法。

> 当一个对象准备好进行垃圾收集时，垃圾收集器线程检查该特定对象是否具有来自 (1) 中提到的表的 finalize()。

*   2a）如果没有，则将其发送以进行垃圾收集。

    2b) 它是有的，然后它被添加到终结队列中。它从表 (1) 中删除对象的条目。

终结器线程不断轮询队列。对于队列中的每个对象，都会调用其 finalize() 方法。在从 (2) 调用 finalize() 循环后，再次重复。如果此对象仍然没有强引用，则发送 GC。如果有，则调用 ALWAYS (2a)，因为该条目在 (2b) 中被删除

```
Basically finalize() method is only called once. 
```

那么上述循环有什么问题呢？

> 从（1）。它需要额外的时间来创建对象。Java 中的内存分配比 malloc/calloc 等快 5 到 10 倍。在记录表中的对象等过程中获得的所有时间都丢失了。我曾经尝试过。在循环中创建 100000 个对象，并在 2 种情况下测量程序终止所用的时间：一种没有 finalize()，第二种有 finalize()。发现它快了 20%。
> 
> 来自 (2b)：内存泄漏和饥饿。如果队列中的对象引用了大量内存资源，那么除非该对象准备好进行 GC，否则所有这些对象都不会被释放。如果所有对象都是重量级对象，则可能会出现短缺。
> 
> 来自 (2b)：因为 finalize() 只被调用一次，如果在 finalize() 中你有一个对“this”对象的强引用怎么办。下次对象的 finalie() 永远不会被调用，因此可能会使对象处于不一致的状态。
> 
> 如果在 finalize() 中抛出异常，则将其忽略。

您不知道何时调用 finalize()，因为您无法控制何时调用 GC。有时可能会发生您在 finalize() 中打印值但从未显示输出的情况，因为您的程序可能在调用 finalize() 时已经终止。

因此避免使用它。而是创建一个方法说 dispose() ，它将关闭必要的资源或最终日志等。 [完整的帖子](http://jatinpuri.com/?p=106)。我希望这能清除。

# java - java存储过程中需要用于MYSQL的OUT参数

> ID：892670
> 
> 赞同：2
> 
> 时间：2009-05-21T12:22:21.157
> 
> 标签：java, mysql, jdbc

我想创建一个用于连接 mysql 数据库的 java 程序。我想使用带有 1 个输出参数和 1 个输入参数的存储过程。

如何使用java检索结果？有没有可行的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T12:27:00.493

MySQL 文档“ [Basic JDBC Concepts”页面](http://dev.mysql.com/doc/refman/5.1/en/connector-j-usagenotes-basic.html)似乎有很多详细的示例。你试过那些吗？如果您尝试过但遇到问题，请发布一些代码。

# jquery - 如何保证将缓存 ajax 响应？

> ID：892671
> 
> 赞同：3
> 
> 时间：2009-05-21T12:22:25.993
> 
> 标签：jquery, ajax

我想进行 ajax 调用，但我想确保它会被缓存。我正在使用 jquery。

有没有办法确保请求保留在大多数流行浏览器的缓存中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-21T12:33:52.520

使用 jQuery，您可能希望显式添加带有`ifModified`选项的 If-Modified-Since 标头，默认情况下为 false：

```
$.ajax({
     ...
     ifModified: true,
     ...
}); 
```

如果您的 dataType 是or `cache`，您还需要强制设置一个选项为 true 。对于其他数据类型，默认情况下是这样。`jsonp``script`

有关这些选项的说明，请参阅[`jQuery.ajax()`文档](http://docs.jquery.com/Ajax/jQuery.ajax#options)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T12:30:31.437

GET 请求可能会被浏览器缓存（取决于浏览器缓存大小等），但 POST 不会被缓存。

问候。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T12:28:10.520

在 http 响应上设置适当的标头，例如 Expires 标头和缓存控制指令。

有关更多详细信息，请参见[此处](http://www.mnot.net/cache_docs/#CONTROL)，但简而言之，您希望设置标题以指示：

*   资源应该被缓存一段时间（过期标头）
*   资源是可缓存的（缓存控制：公共标头）

或者，您可能希望让用户请求文件但发回“未修改的响应”，这样可以节省重新下载正文（对于大文件）。在这种情况下，您应该使用响应标头来指示

*   上次修改资源的时间（上次修改时间标头），允许客户端告诉服务器版本的旧版本
*   文件的电子标签，这是一种哈希码，让服务器知道客户端的版本。请注意电子标签的生成方式......在某些服务器上，电子标签会破坏负载平衡。

这两种方法都会让客户端缓存响应，并减少重新下载响应的次数。另外，我喜欢避免在可缓存响应中设置 cookie，因为某些缓存不会缓存具有 cookie 的响应，而某些缓存会缓存包含 cookie 的响应，这两者都可能不合适。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-21T12:29:07.057

我认为所有 AJAX 响应都会被缓存，除非您指定不缓存。您还可以查看[jQuery Cache](http://semanticsearch.org/jquery-cache-allows-caching-page-content) (?)。

# c++ - 关于加密方法

> ID：892673
> 
> 赞同：0
> 
> 时间：2009-05-21T12:23:14.493
> 
> 标签：c++, symbian

我正在使用密码学 api 的加密功能（乐趣声明为虚拟）

```
//fun declaration
TBool EncryptL(const TDesC8 &aInput, TDes8 &aOutput);

//function calling
TBuf8<10> text;
TBuf8<10> cipher;
text.Copy(_L("Hello"));
iEncryptor.EncryptL(text,cipher); it shows error expression syntax error

//fun definition
TBool CRSAAlgo::EncryptL(const TDesC8 &aInput,TDes8 &aOutput) 
{
    if(iEncryptor)
    {
        TInt len = iEncryptor->MaxInputLength();
    }
} 
```

我想知道什么是确切的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T09:11:23.730

这里的主要问题，您的编译器抱怨的原因是您使用 iEncryptor 作为对象或引用，而它可能是 C++ 指针。

要进入下一阶段，请尝试使用：

iEncryptor->EncryptL(文本,密码);

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-21T14:15:09.853

由于您没有发布从编译器获得的确切错误消息，我不得不猜测。

我认为问题在于您显示的*EncryptL*函数期望获取*TDesC8 类型*的参数，并且您将*TBuf8<10>*传递给它。除非*TDesC8*是*TBuf8<10>*的 typedef，否则它们是不同的，因此对于编译器不兼容的类型。

Ypou 也使用*iEncryptor*一次作为指针：*iEncryptor->MaxInputLength();* 在您将错误视为对象的位置：*iEncryptor.EncryptL(text,cipher);* . 只有一种形式是正确的。由于我们没有您提供的更多代码，我不知道是哪个，但鉴于后者有错误，我怀疑是后者。

# c# - 隔离存储和 Windows Vista 是否存在任何问题？

> ID：892680
> 
> 赞同：1
> 
> 时间：2009-05-21T12:25:15.067
> 
> 标签：c#, .net, isolatedstorage

我的问题与以下所示的问题相似但不一样：

> [使用独立存储时“找不到文件”](https://stackoverflow.com/questions/72626/could-not-find-file-when-using-isolated-storage)

我编写了一个应用程序，将用户设置保存在隔离存储中的文件中，我使用用户存储进行程序集存储。

应用程序在启动时检查独立存储中的文件，如果不存在则假定这是应用程序第一次运行并要求用户对其进行配置，然后此过程将保存到独立存储中。

在 Windows XP 中这工作正常，我没有看到任何问题。但是，我正在他们的 Windows Vista 笔记本电脑上向客户端运行演示，当我第二次运行客户端以显示设置已保存时，应用程序找不到该文件。

是否有任何已知问题可能导致在 Windows Vista 而不是 Windows XP 中发生这种情况？

检索独立存储的两个引用都在同一个 .cs 文件中，因此发出调用的绝对是同一个程序集，而且我没有以其他用户身份登录，所以我知道它是同一个用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T12:30:53.247

更改应用程序版本后，隔离存储位置将立即更改。
存储应用程序配置的正确位置是所有用户的 \ProgramData 和用户设置的 \Users\\AppData。

# php - 保护 Plesk 登录页面免受搜索引擎的攻击

> ID：892682
> 
> 赞同：2
> 
> 时间：2009-05-21T12:25:39.403
> 
> 标签：php, apache, .htaccess, search-engine, plesk

我想知道是否可以保护“ [https://www.DOMAIN.com:8443](https://www.DOMAIN.com:8443) ” URL 免受搜索引擎列表的影响，也许使用 htaccess 将 8443 端口从“DOMAIN”重定向到其他地方？

> **这是 VZPP Plesk - 登录 登录到 Plesk。请输入您的登录信息。用户名。密码。界面语言。用户默认，英语（美国），德语（德国）... [https://www.DOMAIN.com:8443/](https://www.DOMAIN.com:8443/) -**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-07-01T00:15:28.707

您将需要创建一个`robots.txt`包含以下内容的文件：

```
User-agent: *
Disallow: / 
```

并将其放入`usr/local/psa/admin/htdocs`. 请注意，位置可能因您的安装而异。

之后，验证该文件是否`http://my.domain.com:8443/robots.txt`指向该文件并具有相同的内容。还要确保`http://my.domain.com/robots.txt`（为您的公共站点提供服务的端口 [通常是隐含的端口 80]）*不*指向同一个文件。如果是这样，那么您的网站将根本不会被索引。

该文件将告诉 Google 和其他机器人不要索引 Plesk 页面，例如登录页面。有关 robots.txt 的更多信息，请查看有关 robots.txt 的[Google 帮助页面](https://www.google.com/support/webmasters/bin/answer.py?hl=en&answer=156449&ctx=cb&src=cb&cbid=-112hkfkbg6bjn&cbrank=2)或[从 Google 的搜索结果中删除页面或网站](http://www.google.com/support/webmasters/bin/answer.py?answer=164734)。此外，您可能希望将您的域添加到[Google 网站管理员工具](https://www.google.com/webmasters/tools/)，并通过检查[删除页面](https://www.google.com/webmasters/tools/removals)检查 Plesk 页面是否确实已被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T12:46:16.803

尝试使用（如果我正确理解了您的问题）

```
<meta name="robots" content="noindex,nofollow,noarchive"/> 
```

和谷歌关于robots.txt ......不记得语法......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T00:59:00.800

[您可以在此处](http://www.askapache.com/htaccess/apache-variable-fun-in-htaccess.html)阅读有关使用带有 mod_rewrite 的用户代理检测的信息，如何为[Google](http://googlewebmastercentral.blogspot.com/2008/03/speaking-language-of-robots.html)、[Yahoo!设置您的 robots.txt](http://help.yahoo.com/l/us/yahoo/search/webcrawler/slurp-02.html) , 和[MSN/Live Search](http://blogs.msdn.com/webmaster/archive/2008/09/12/is-your-robots-txt-file-on-the-clock.aspx) - 然而，这一切都假设有理智和合作的机器人。几乎没有什么办法可以防止攻击性的“黑帽”机器人。

# objective-c - 覆盖对象的接口生成器实例化？

> ID：892683
> 
> 赞同：0
> 
> 时间：2009-05-21T12:26:04.720
> 
> 标签：objective-c, cocoa, cocoa-touch, xcode, model-view-controller

我正在为 iPhone 开发，并且我有一个类`DataManager`，用于维护我的应用程序数据。当应用程序启动/退出时，数据从磁盘读取/写入磁盘以创建此类的实例，使用 NSKeyedArchiver（和 Unarchiver）类，因为 DataManager 遵守 NSCoding 协议。

我遇到的一个问题是我需要 DataManager 可以被我的许多其他 IB 类访问，因此它被定义为 IB 中的一个对象，并且这些类有一个出口。DataManager 是使用标准的 init: 方法（或者可能是 initWithCoder:?）创建的，但由于 IB 没有适当的文件（或文件中的 NSData）来实例化对象，因此它没有初始内容。

那么，有没有办法告诉 IB*不要*自动实例化该类呢？这将改为使用我的应用程序委托执行，例如：

**AppDelegate.h**

```
IBOutlet DataContext *context; 
```

**AppDelegate.m**

```
context = [NSKeyedUnarchiver unarchiveObjectWithData:dataLoadedFromFile]; 
```

如您所见，这带来了一个问题。上下文不会被实例化两次，一次由 InterfaceBuilder，然后第二次由我的应用程序委托？

我想防止将上下文维护为委托中的 ivar，因为这似乎偏离了 MVC 范式，而是倾向于单例模式。（控制器不应该对我脑海中的数据负责。它显然可以维护对它的引用，但不应该负责将它提供给其他类。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T13:49:35.973

> 当应用程序启动/退出时，数据从磁盘读取/写入磁盘以创建此类的实例，使用 NSKeyedArchiver（和 Unarchiver）类，因为 DataManager 遵守 NSCoding 协议。
> 
> 我遇到的一个问题是我需要 DataManager 可以被我的许多其他 IB 类访问，因此它被定义为 IB 中的一个对象……如您所见，这提出了一个问题。上下文不会被实例化两次，一次由 InterfaceBuilder，然后第二次由我的应用程序委托？

是的。

首先，您应该考虑这是控制器还是模型对象。在我看来，它就像一个控制器。

如果是，那么您应该将模型移动到一个或多个单独的对象，并使那些 NSCoding 兼容，并使数据管理器加载和保存这些对象。此解决方案的一个好处是，您可以告诉数据管理器在收到内存不足警告时保存对象并清除它们，而不仅仅是在退出时。

# iphone - AudioQueueNewInput 降低 AVAudioPlayer 的播放音量

> ID：892695
> 
> 赞同：2
> 
> 时间：2009-05-21T12:29:54.557
> 
> 标签：iphone

我正在使用 Stephen Celis 的 SCListener 类来记录 iPhone 麦克风的音频电平。我还通过使用 AVAudioPlayer 播放音频。例如，用户按下“播放”以启动在后台播放的声音，然后可以选择对着麦克风吹气以播放更多、更短的声音。代码一切正常，在应该播放的时候播放所有声音，但是，当您开始使用 SCListener 收听时，AVAudioPlayer 的音量会*大大降低。*我已经将罪魁祸首缩小到 SCListener 源代码中的这一行：

AudioQueueNewInput(&format, listenerCallback, self, NULL, NULL, 0, &queue);

我绞尽脑汁，不知道如何在这条线执行后将播放音量保持在最高水平。我也和斯蒂芬·塞利斯谈过，他不知道发生了什么。我想，iPhone 可能会在使用麦克风时调低输出音量，以免引入反馈，但似乎应该有一种方法可以禁用它。

总之：

1.  使用 AVAudioPlayer 开始播放长音频文件 - 100% 音量（响亮）。
2.  启用 SCListener 并开始监听（调用 AudioQueueNewInput）。
3.  AVAudioPlayer 声音的输出音量大大降低
4.  调用 [[SCListener sharedListener] stop] 来处理队列
5.  AVAudioPlayer 声音恢复更高的播放音量

有没有人见过这样的事情或对如何保持更高的播放音量有任何想法？我已将音量参数明确设置为 1.0f，以确保增益处于最高水平。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-01-26T09:51:29.327

你可以试试这个：

```
UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,sizeof (audioRouteOverride),&audioRouteOverride); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-10T18:19:05.813

我不熟悉 Stephen Celis 的工作，但如果 tposchel 的建议不起作用，那么在调试模式下查看 InputQueue 的值与 OutputQueue 的音频值可能会有一些价值（但这很棘手，因为这些回调方法是实时线程）。

这可能会提供信息，因为它会告诉您操作系统认为它正在发送到您的输出设备（耳机或内置扬声器）的内容。

解决此问题的蛮力方法是手动标准化（或按比例放大）OutputQueue 回调中的值。也许这并不能解决您的根本问题，但在您找到答案之前可能是一个hack。

# c# - 我在哪里可以找到 C# 的不清晰蒙版？

> ID：892696
> 
> 赞同：3
> 
> 时间：2009-05-21T12:30:24.773
> 
> 标签：c#, image-processing, image-manipulation

我一直在尝试找到一个代码片段来在 C# 中做一个非锐化掩码，但找不到一个有效或完整的。我找到了一个 PHP 版本，但我想在 C# 中找到一个，然后再进行从 PHP 转换的所有艰苦工作。

我只是一个初学者。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T14:22:40.367

[AForge.NET Framework](http://www.aforgenet.com/framework/)包括许多图像处理过滤器并支持插入您自己的过滤器。[您可以在他们自己的图像处理实验室](http://www.aforgenet.com/projects/iplab/)应用程序中看到它的实际效果。

* * *

更新：AForge.NET 有一个基于卷积的[锐化](http://www.aforgenet.com/framework/docs/html/c5a43907-302d-3d0d-1ab1-a39b9d0f7013.htm)过滤器（请参阅[卷积过滤器](http://www.aforgenet.com/framework/features/convolution_filters.html)），但没有提及不锐化掩码过滤器本身。再说一遍，您可以使用高斯模糊滤镜并从原始图像中减去结果，这基本上就是 unsharp mask 滤镜的作用。或者，基本的锐化可能足以满足您的需求。

* * *

更新：进一步看，AForge.NET 确实有一个[高斯锐化](http://www.aforgenet.com/framework/docs/html/4600a4d7-825b-138f-5c31-249a10335b26.htm)，这似乎是一个不锐化蒙版过滤器的实现，你*可以*控制一些参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T16:38:22.810

你愿意使用 FFT 吗？变换、删除或强调高频以品味、反转变换、如果需要的话与原始重新组合？那里几乎没有任何许可问题，因为 FFT 库比比皆是。

或者，您可以手动制作蒙版，根据需要改变大小和常数，然后将它们与图像像素进行卷积（嵌套的“for”循环......）。

这是一个 3x3x1 掩码作为文本文件，其尺寸在值之前给出：

//3x3x1

// x 大小

3

// y 大小

3

//z大小

1

//z = 0

2 3 2

3 5 3

2 3 2

//结尾

这可以扩展到 3 个维度（因此给出了 z 大小）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-01-20T21:27:46.440

最新版本的开源 C# 图像库具有不锐化蒙版滤镜（以及高斯模糊、亮度/对比度等），并且非常易于使用。

您将[在此处找到如何应用非锐化蒙版的教程](http://labs.kaliko.com/2010/01/c-unsharp-mask-filter.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T13:03:29.827

看看这个博客条目是否能帮助你朝着正确的方向前进：

[http://anand-vinay.blogspot.com/2008/01/unsharp-mask-in-cnet.html](http://anand-vinay.blogspot.com/2008/01/unsharp-mask-in-cnet.html)

**编辑：好的，该博客条目不起作用，抱歉链接错误。**

我确实找到了一个完整的应用程序，您可以使用源代码下载它，其中包含我认为您正在寻找的代码。

[http://www.ctyeung.com/Csharp/index.html](http://www.ctyeung.com/Csharp/index.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-21T14:31:35.280

Christian Graus 的[C# 傻瓜图像处理第 2 部分](http://www.codeproject.com/KB/GDI-plus/csharpfilters.aspx)包含源代码，以及如何进行不锐化的说明（假设您的意思是平滑）。整个系列很好地介绍了使用 GDI（在 C# 中）进行图像处理，并且不需要外部库。

# linq-to-sql - 多个 DBML 文件 - 类型共享？

> ID：892697
> 
> 赞同：1
> 
> 时间：2009-05-21T12:30:28.003
> 
> 标签：linq-to-sql, datacontext

我有一个客户端/服务器应用程序，其中客户端和服务器有一些公用表（作为应用程序的一部分保持同步）。

我们目前将这些表（即 FileDetails）存储在 Shared.dbml 文件中。到目前为止，任何返回 FileDetails 集结果的存储过程都已放置在 Shared.dbml（即使它是仅服务器）SP 中。

我发布了 LINQ to SQL 支持 DBML 上的基类属性，我想也许我可以有一个 Server.dbml，它扩展了我的 Shared.dbml。从理论上讲，这会给我一个包含所有共享表和 SP 以及特定于服务器的元素的 ServerDataContext。通常在 SQL 设计器中，我会将 SP 拖放到 FileDetails 表上以显示这是返回的内容，但是由于该类位于不同的 DBML 中，这是不可能的，并且在 XML 中我不认为 ElementType IdRef="1" 方法将起作用（因为 ref 需要指向另一个文件）

我发现我可以通过手动编辑 XML 返回类型来解决这个问题：

```
<Function Name="dbo.SELECT_FTS_FILES" Method="SELECT_FTS_FILES">
    <Return Type="ISingleResult&lt;DataTypes.FileDetails&gt;" />
</Function> 
```

我的问题是，有没有人对这种方法有任何经验，并且可以指出我更多的资源？它是否有任何明显的缺点（除了手动 XML 更新）

欢迎所有反馈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T12:41:54.113

您可以从您的数据上下文继承。但是，在您的新数据上下文中，您将无法使用 linq 设计器，您必须手动编写代码。

你有什么理由不想要两个数据上下文？

继承和 LinqToSql 通常不能很好地结合在一起。如果你对它有很深的需求，你应该研究另一个像 NHibernate 这样的 ORM。

# dll - 如何创建 DTD 文件的 DLL 文件？

> ID：892701
> 
> 赞同：0
> 
> 时间：2009-05-21T12:31:58.330
> 
> 标签：dll, dtd

我有 9 个 DTD 文件示例 [xhtml dtd1](http://www.w3.org/TR/xhtml11/DTD/xhtml11-flat.dtd) [xhtml dtd2](http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd)

我想创建一个包含所有 9 个 dtd 的 DLL 文件。所以你们中的任何人都可以帮助我创建它或告诉我从哪里开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T12:49:08.403

如果您发布您的网络应用程序或编译您的网站，如果它们驻留在类库中，它会将它们转换为 dll。

# database - 用于大量简单事务的数据库/数据存储

> ID：892708
> 
> 赞同：0
> 
> 时间：2009-05-21T12:34:02.787
> 
> 标签：database, data-structures, file-io, filesystems

我编写了一个 PHP 应用程序，它需要存储数百万个介于 0 和 10,000,000 之间的整数。每个数字非常频繁地递增 1（平均每秒更新 100 个值）并且非常频繁地读取（每秒读取 20,000 次）。这些数字每晚、每周、每月或每年都重置为 0。

我对 MySQL 有相当好的处理，但感觉有点矫枉过正，而且在这个过程中效率不高。

以前有没有人处理过这个问题，和/或可以对合适的数据存储系统有所了解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T12:37:30.237

取决于你有多少内存，以及你必须保留它们多长时间——你可以只使用 APC 缓存或 memcache。memcache 有一个很好的增量操作，所以它非常高效。

顺便说一句，你说你需要 20K 读取。你是用 PHP 做的吗？在一台服务器上还是在集群上？听起来你需要一些架构指导..... :)

如果它是一个网络应用程序，您将使用一个集群。如果它不是一个网络应用程序，我建议你考虑用不是 PHP 的东西重新做它。Java、C++ 和 c# 浮现在脑海中。

# c# - 异常和内存

> ID：892714
> 
> 赞同：4
> 
> 时间：2009-05-21T12:36:17.650
> 
> 标签：c#, exception, exception-handling, garbage-collection

当抛出或遇到异常时：

```
void ThrowException()
{
    try
    {
        throw new Exception("Error");
    }
    catch
    {
    }
} 
```

**是它以及它是如何从内存中处理的？**

上面的代码与下面的代码在 Exception 对象的内存处理方面有何不同？

```
void ThrowException()
{
    try
    {
        throw new Exception("Error");
    }
    catch(Exception e)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-21T12:40:03.680

异常不从 IDisposable 继承，因此不需要处置。与所有 .NET 对象一样，内存释放由 GC 完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T12:40:29.090

Exception 实例只是充当内存中的另一个对象 - 在 catch 方法之后，没有对该实例的任何剩余引用，因此它将在下一次垃圾收集扫描中被删除。

异常通常不会从 IDisposable 继承，因为实际上不应该有与异常关联的外部资源。如果你*这样做*。有一个 IDisposable 异常，你应该认真看看你的架构和代码设计是否正确。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-21T12:44:00.940

简短的回答。不用担心，垃圾收集器会这样做。

长答案。“忘记”你曾经知道的关于内存管理的一切，阅读[Top 20 。网络垃圾收集文章](http://drowningintechnicaldebt.com/blogs/royashbrook/archive/2007/06/22/top-20-net-garbage-collection-gc-articles.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-21T12:41:37.467

当不再有任何对 Exception 类的引用并且垃圾收集器最终轮到它时，它将被垃圾收集。异常对象的处理方式与堆上分配的任何其他对象一样。

由于异常对象是向上冒泡的，因此当不再有方法可以将其捕获或抛出更高的堆栈时，它将不再具有对它的引用。

这两个示例将具有相同的效果，因为它们都不会将异常抛出更高，当方法返回时它将失去引用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-21T12:45:05.963

由于异常没有实现`IDisposable`，当它们不再被引用时，它们会像任何其他对象一样被垃圾收集器自动删除，因此您不必关心它们。只需实现一个示例类：

```
class CustomException : Exception {
    ~CustomException() {
        Console.WriteLine("Exception removed");
    }
}

class Program {
    static void Throw() {
        throw new CustomException();
    }
    static void Main(string[] args) {
        try {
            Throw();
        }
        catch {

        }
    }
} 
```

# com - 从 64 位应用程序加载/与 vb6 COM dll 交互

> ID：892715
> 
> 赞同：1
> 
> 时间：2009-05-21T12:36:38.960
> 
> 标签：com, dll, vb6, 64-bit

我正在开发一个具有多个用 VB6 编写的 dll 的应用程序。VB6 代码包括 COM dll 和 ocx 控件。其余代码使用 C++ 和 C#。我被分配了使应用程序代码库与 64 位架构兼容的任务。大量的帮助材料可用于 C/C++ 代码，因此手头没有问题。但是要将所有这些 vb6 代码重写为 .net 或其他语言以使其与 64 位兼容并不容易。我也不了解所有底层逻辑，所以假设重写是不可能的。

另一方面，我们都知道 VB6 dll 不能在 64 位环境中工作。那么我的选择是什么。

1）将每个dll转换成一个EXE，它将以32位加载，它可以通过COM接口与我其余的64位应用程序交互。您预见到这种方法有什么问题吗？

2）我编辑注册表并将所有VB6 dll加载到进程外，使它们加载到dllhost中。

3）制作一个32位exe，在该exe中引用所有这些VB6 dll并将该exe加载到32位地址空间中，我的应用程序的64位部分与32位exe通信。

使用上述所有方法，我想到的主要问题是如何处理 OCX 控件？？？？

有任何想法吗？如果没有比上述哪一个更受您青睐的新想法，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-11-09T10:53:40.513

我正在从 SQL 2000 x86 迁移到 SQL 2008 x64。

在这里，我们面临着类似的问题。我决定使用 DCOM。

它将如何运作？

32 位服务器将托管程序集，64 位计算机将使用 DCOM 调用。

有性能损失。顺便说一句，与重写相比的努力......当然值得做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T14:32:47.260

如果您有大量用于在进程中运行的现有 VB6 代码，我首先会质疑迁移到 64 位是否真的值得付出努力。64 位对于服务器应用程序有很多优势，但对于桌面应用程序，32 位通常完全足够了。由于 WOW64 预计至少可用十年，因此几乎没有人反对在 64 位 Windows 上运行 32 位应用程序。

关键是，虽然可以通过使用进程外服务器来调整应用程序，使其至少部分在 64 位模式下运行，但这可能会对性能（以及内存开销）产生重大影响. 奇怪的是，客户因此绝对不会从选择 64 位版本的应用程序中受益。

也就是说，我会说 2) 或 3) 将是自然的选择。2) 当然更容易实现，但是 3) 让您可以更好地控制应该创建多少进程外服务器以及如何管理它们的生命周期。

# .net - .NET 程序集中 64 位公钥令牌的用途？

> ID：892719
> 
> 赞同：1
> 
> 时间：2009-05-21T12:38:02.827
> 
> 标签：.net

.NET 程序集中 64 位公钥令牌的用途是什么。我了解与用于签署程序集的私钥相对应的公钥嵌入在程序集本身中。当整个公钥可用时，64 位公钥令牌有什么用途？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T12:43:12.363

它是程序集的完全限定名称的一部分——使用 64 位令牌最终是唯一的，不会引起问题，同时不会使程序集名称过长。

# .htaccess - .htaccess mod_rewrite 使用变量

> ID：892722
> 
> 赞同：0
> 
> 时间：2009-05-21T12:38:44.913
> 
> 标签：.htaccess, mod-rewrite, variables

我想让我的网站网址看起来像

```
http://example.com/place/info?var=info&morevars=ifneeded 
```

Place 和 info 也是变量，但它们有一个固定的名称，后面的名称会有所不同。**编辑**这是我要重写的网址

```
http://example.com/test.php?place=test&action=info&var=info&morevars=ifneeded 
```

这是我到目前为止所拥有的

```
RewriteEngine on

RewriteRule ^([A-Za-z0-9-]+)/?$ test.php?place=$1 [NC]
RewriteRule ^([A-Za-z0-9-]+)/([A-Za-z0-9-]+)/?$ test.php?place=$1&action=$2 [NC] 
```

我认为有一种方法可以用 {QUERY_STRING} 做到这一点，但我不能让它只工作 500 个错误，或者它不会产生差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T13:57:16.113

您已设置自动将原始请求查询附加到新查询的[`QSA`标志：](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewriteflags)

```
RewriteEngine on
RewriteRule ^([A-Za-z0-9-]+)/?$ test.php?place=$1 [NC,QSA]
RewriteRule ^([A-Za-z0-9-]+)/([A-Za-z0-9-]+)/?$ test.php?place=$1&action=$2 [NC,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T13:18:34.443

你错过了第一个 /

```
RewriteEngine on

RewriteRule ^/([A-Za-z0-9-]+)/ test2.php?place=$1 [NC]
RewriteRule ^/([A-Za-z0-9-]+)/([A-Za-z0-9-]+)/ test2.php?place=$1&action=$2 [NC] 
```

# embedded - 将 ADC 二进制转换为电压

> ID：892723
> 
> 赞同：9
> 
> 时间：2009-05-21T12:39:24.133
> 
> 标签：embedded, analog-digital-converter

假设我有一个 12 位模数转换器（4096 个 bin）。假设我有一个 0 到 5 伏的信号。

将 ADC 二进制转换为伏特的正确转换公式是什么？

```
V = ADC / 4096 * 5 
```

或者

```
V = ADC / 4095 * 5 
```

我是否因为 ADC 中有 4096 个 bin 而除以 4096？

还是我除以 4095，因为这是 ADC 返回的最高值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-21T12:48:28.310

Brian 关于检查 ADC 数据表的建议是理想的。但！假设您的最大电压 (5V) 等于最大 ADC 输入（12 位 = 4095），则以下转换应该适合您：

```
const float maxAdcBits = 4095.0f; // Using Float for clarity
const float maxVolts = 5.0f;      // Using Float for clarity
const float voltsPerBit = (maxVolts / maxAdcBits);

float yourVoltage = ADCReading * voltsPerBit; 
```

使用 Excel 快速检查数学让我相信这是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-10-25T19:55:54.050

V = ADC / 4096 * 5

是将数字值转换回模拟电压（近似值）的正确公式。

这是根据由 Walt Kester（Newnes，2005 年）编辑的*The Data Conversion Handbook*提供的，可在（截至 2018 年 10 月 18 日）在：

[https://www.analog.com/en/education/education-library/data-conversion-handbook.html](https://www.analog.com/en/education/education-library/data-conversion-handbook.html)

具体参见第 2 章中的图 2.4 和 2.5： [![数据转换手册中的图 2.4 和 2.5](https://i.stack.imgur.com/l3frg.png)](https://i.stack.imgur.com/l3frg.png)

在您的情况下，FS 将是 5 V。（当然，您使用的是 12 位 ADC，而不是 3 位 ADC。）请注意，即使 ADC 值是最大可能值（在您的情况下为 4095） ，相应的模拟电压将略低于“满量程”电压（在您的情况下为 5 V）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-21T12:47:36.863

ADC 的规范*应该*确定 5V 是如何用 12 位表示的。

我怀疑 4095 对应于 5V，因此您的第二个解决方案是正确的。否则，您将永远无法正确识别 5V 信号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-23T15:26:52.410

对于 12 位值，最大可表示值为 4095，但当然总共有 4096 个值（包括零）。假设您的 ADC 是线性的，那么是的，4095 相当于**满量程**。这不一定是 5V，但无论您的参考电压是否等于**或**超过该电压的值（当然）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-07T09:04:09.967

你想有多挑剔？如果您真的想挑剔，那么您还应该考虑每个“bin”代表一个小范围的值（在您的情况下约为 1.2 mV）。那么在转换成电压值的时候，是要返回bin中间的电压值，还是bin下边缘的电压值呢？也就是说，您是否想在您报告的值中有效地“截断”或“舍入”？

此外，ADC 的步长可能是均匀的（线性），但要注意 ADC 对范围两端的 bin 的作用。这些箱子可能是其他箱子宽度的一半。这取决于 ADC，因此请检查规格。

这个问题是否重要取决于您的应用程序。

# java - 检查 Java 反射调用的正确方法？

> ID：892725
> 
> 赞同：16
> 
> 时间：2009-05-21T12:39:56.097
> 
> 标签：java, reflection

[我昨晚](https://stackoverflow.com/questions/891071/java-reflection-getdeclaredmethod-with-class-types)发布了一个关于 Java 反射的问题，今天早上发现了编译器警告。

```
C:\javasandbox\reflection>javac ReflectionTest.java
Note: ReflectionTest.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.

C:\javasandbox\reflection>javac -Xlint:unchecked ReflectionTest.java
ReflectionTest.java:17: warning: [unchecked] unchecked call to
getDeclaredMethod(java.lang.String,java.lang.Class<?>...) as a member of the raw
type java.lang.Class

        myMethod = myTarget.getDeclaredMethod("getValue");
                                             ^
ReflectionTest.java:22: warning: [unchecked] unchecked call to
getDeclaredMethod(java.lang.String,java.lang.Class<?>...) as a member of the raw
type java.lang.Class

        myMethod = myTarget.getDeclaredMethod("setValue", params);
                                             ^
2 warnings 
```

是否有“正确”的方法来检查这些返回的方法？（即有没有适当的方法来摆脱这些警告？）

源代码：

```
import java.lang.reflect.*;

class Target {
    String value;

    public Target() { this.value = new String("."); }
    public void setValue(String value) { this.value = value; }
    public String getValue() { return this.value; }
}

class ReflectionTest {
    public static void main(String args[]) {
        try {
            Class myTarget = Class.forName("Target");

            Method myMethod;
            myMethod = myTarget.getDeclaredMethod("getValue");
            System.out.println("Method Name: " + myMethod.toString());

            Class params[] = new Class[1];
            params[0] = String.class;
            myMethod = myTarget.getDeclaredMethod("setValue", params);
            System.out.println("Method Name: " + myMethod.toString());

        } catch (Exception e) {
            System.out.println("ERROR");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2009-05-21T12:43:12.190

改变

```
Class myTarget = Class.forName("Target"); 
```

至

```
Class<?> myTarget = Class.forName("Target"); 
```

这基本上意味着，“我知道它是通用的，但我对类型参数一无所知。” 它们在语义上是等价的，但编译器可以区分。有关更多信息，请参阅[相关的 Java 泛型常见问题解答条目](http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedTypes.html)（“无界通配符实例化和原始类型有什么区别？”）。

# java - spring security中更新用户权限后如何立即启用权限？

> ID：892733
> 
> 赞同：25
> 
> 时间：2009-05-21T12:40:55.283
> 
> 标签：java, spring-security

我正在使用spring-security框架。当我更新权限时，它不会立即生效。我必须退出当前用户（意味着注销），然后重新访问（意味着登录）将更新用户的权限.

是一种在spring security中更新用户权限后立即启用权限的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2011-05-18T07:57:07.423

您可以 像这样在[AbstractSecurityInterceptor中设置 alwaysReauthenticate](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/access/intercept/AbstractSecurityInterceptor.html#alwaysReauthenticate)

```
<bean id="filterSecurityInterceptor" class="org.springframework.security.web.access.intercept.FilterSecurityInterceptor">
        <property name="alwaysReauthenticate" value="true"/>
 ...
</bean> 
```

当然你应该注意，因为 99,9% 你不需要重新认证。由于身份验证可能使用数据库或其他东西，您的性能可能会降低。但是通常你有一个缓存，比如带有休眠的 2nd Level，所以每次加载 userdetails 应该是在所有权限没有改变的情况下只进行内存操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-11-06T19:45:56.683

Gandalf 解决方案有效但不完整。为了让 Spring Security 考虑新权限（例如，允许访问以前不可用的页面），您需要创建一个包含新权限列表的新身份验证对象（例如，新 UsernamePasswordAuthenticationToken）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-25T17:32:54.330

以下线程解释了如何在每个请求中重新加载您的用户/主体：

[Spring Security 中的每个请求都从数据库中重新加载 UserDetails 对象](https://stackoverflow.com/q/23072235/42962)

完全披露我是上述链接中问题的问答的作者。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T18:43:35.233

重置线程本地上下文是不够的，您还需要更新会话：

```
UserContext userContext = (UserContext) context.getAuthentication().getPrincipal();
if (userContext != null && userContext.getUsername() != null) {
    //This is my function to refresh the user details
    UserDetailsBean userDetails = getUserDetailsBean(userContext.getUsername());
    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
    if (authentication instanceof UsernamePasswordAuthenticationToken) {
        UsernamePasswordAuthenticationToken auth = (UsernamePasswordAuthenticationToken) authentication;
        auth.setDetails(userDetails);
    }
    return userDetails;
} else {
    throw new ServiceException("User not authenticated");
}
request.getSession().setAttribute(HttpSessionSecurityContextRepository.SPRING_SECURITY_CONTEXT_KEY, SecurityContextHolder.getContext()); 
```

至少在 google appengine 中，会话不是引用，并且通过修改本地线程不会自动更新，您必须手动 session.set 您的对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-21T12:49:11.400

由于您没有在问题中提供确切的详细信息，我假设您有以下情况：

1.  您正在提供 UserDetailsS​​ervice 以在用户尝试登录时加载 UserDetails
2.  作为该服务的一部分，您正在查询数据库/DAO 以加载有关用户权限的详细信息，并基于此设置授予的权限
3.  当您说“当我更新权限时”时，您指的是更新用户在数据库中的权限（或您存储数据的任何内容）。

如果是这样，那么您所看到的就是设计使然 - Spring Security 仅在用户第一次尝试登录时为其加载 UserDetails，然后从那时起将其存储在 Session 中。通常这是有道理的，因为它避免了应用程序必须对每个请求执行有关用户详细信息的相同查询。此外，用户的权限在 99.9% 的访问中通常不会发生变化。

要更改此行为，您可能需要考虑在某处添加“刷新”命令/页面，该命令/页面将触发一些代码（您必须编写），这些代码将重新查询 UserDetailsS​​ervice 并替换 SecurityContext 中的 UserDetails。我不相信有任何内置的方法可以做到这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-26T23:54:25.443

您可以创建自己的 UserDetails 接口实现，该接口从您的身份验证机制返回，允许访问 GrantedAuthorities[]。然后将您的新权限直接添加到该 UserDetails 对象。如果用户可以同时打开多个会话（或者如果多个用户共享相同的通用登录名），您可能会遇到问题，新权限只会在您更改的会话上看到。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2011-12-29T10:39:41.643

你可以试试这个

```
SecurityContextHolder.getContext().setAuthentication(SecurityContextHolder.getContext().getAuthentication()); 
```

# asp.net - 连接到源文件 XYZ 的撤消管理器时出错

> ID：892754
> 
> 赞同：22
> 
> 时间：2009-05-21T12:45:33.887
> 
> 标签：asp.net, visual-studio, visual-studio-2008

我最近在 Visual Studio 2008 中调试 ASP.NET 应用程序时遇到错误：

'连接到源文件 XYZ 的撤消管理器时出错'

知道如何摆脱错误吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-08-03T02:37:29.383

更简单：

> 我的实验包括简单地打开 Designer.cs 文件，在文件的某处键入一个字符，删除新字符，保存文件并重新编译。

[在That One Developer Blog](http://development.thatoneplace.net/2009/03/error-connecting-to-undo-manager-of.html)上找到，它对我来说非常有效。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-05-21T12:47:04.680

你不知道吗？就在我发布这个之后，我在[Scott Hanselman 的博客](http://www.hanselman.com/blog/ErrorConnectingToUndoManagerOfSourceFileQuotwhateverDesignerquot.aspx)中找到了一个解决方法，在评论中：

> 1）右键单击设计器文件并选择删除
> 
> 2) 右键单击​​ aspx 文件并选择转换为 Web 应用程序

感谢马修，无论你是谁。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-05T06:49:16.570

我也面临同样的问题。我通过从项目中排除这个文件并重建解决方案来解决它。然后再次包含此文件...完成！

祝你好运！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-12-14T16:50:45.567

我现在面临同样的错误。我必须在编辑 aspx 文件时打开设计器文件，一旦完成，保存两者。您甚至不必在设计器中键入任何文本。那成功了！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-05-18T20:07:43.383

这个对我有用：--“打开 desiner.cs 文件在其中输入一些文本删除您输入的文本。保存并构建应用程序”

非常感谢吉滕德拉库马尔！！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-12-16T07:09:41.573

打开 desiner.cs 文件 在其中输入一些文本 删除您输入的文本。保存并构建应用程序。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-03-07T09:39:14.180

*** 我知道这是一个老问题，并且已经回答了，但我正在添加我的答案，希望它会对某人有所帮助

在我的情况下，引用的文件是 .cs 类，并且由于没有 .desiner.cs 文件，我需要另一个解决方案

所以我的解决方案是在 Windows 资源管理器中导航解决方案文件夹并删除 .suo 文件，重新打开解决方案并重建

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-02-05T20:46:43.447

关闭解决方案并删除临时 ASP.Net 文件目录为我解决了这个问题。[[关联]](http://forums.asp.net/t/1100585.aspx)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-11T20:06:36.603

当我错误地双击一个 asp.net 按钮并在 aspx 文件和 .cs 文件中删除它而不是在 Designer.cs 文件中时，我得到了这个错误。确保所有三个得到的文件都已更新。

# winforms - Infragistics UltraWinGrid EmptyDataText 等效？

> ID：892760
> 
> 赞同：1
> 
> 时间：2009-05-21T12:47:00.437
> 
> 标签：winforms, custom-controls, infragistics

我们使用 Infragistics UltraWinGrid 作为自定义控件的基类。将使用此控件显示搜索结果的项目之一需要在未找到匹配项时显示用户友好的消息。

我们希望将该功能封装到派生控件中——因此使用控件的程序员除了设置要显示的消息之外不需要进行任何自定义。这必须以通用方式完成 - 一种尺寸适合所有数据集。

UltraWinGrid 中是否已经允许这种类型的使用？如果是这样，我会在哪里找到它隐藏。:-)

如果需要对该功能进行编码，我可以考虑一种算法，该算法将向设置的任何记录集添加一条空白记录并将其放入网格中。在您看来，这是处理解决方案的最佳方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-08-13T19:10:51.500

我不知道这是否会有所帮助，但这是完成线程。我没有找到内置的方法，所以我解决了这个问题如下：在我继承 UltraGrid 的类中

```
Public Class MyGridPlain
Inherits Infragistics.Win.UltraWinGrid.UltraGrid 
```

我添加了两个属性，一个用于指定开发人员在空数据情况下想要说什么，另一个用于使开发人员能够将他们的消息放置在他们想要的位置

```
Private mEmptyDataText As String = String.Empty
Private mEmptyDataTextLocation As Point = New Point(30, 30)Public Shadows Property EmptyDataTextLocation() As Point
Get
     Return mEmptyDataTextLocation
End Get
Set(ByVal value As Point)
    mEmptyDataTextLocation = value
    setEmptyMessageIfRequired()
End Set
End Property

Public Shadows Property EmptyDataText() As String
Get
   Return mEmptyDataText
End Get
Set(ByVal value As String)
  mEmptyDataText = value
  setEmptyMessageIfRequired()
End Set
End Property 
```

我添加了一个方法来检查空数据并设置消息。另一种方法将删除现有的空消息。

```
 Private Sub setEmptyMessageIfRequired()

        removeExistingEmptyData()

        'if there are no rows, and if there is an EmptyDataText message, display it now.
        If EmptyDataText.Length > 0 AndAlso Rows.Count = 0 Then
            Dim lbl As Label = New Label(EmptyDataText)
            lbl.Name = "EmptyDataLabel"
            lbl.Size = New Size(Width, 25)
            lbl.Location = EmptyDataTextLocation
            ControlUIElement.Control.Controls.Add(lbl)
        End If
    End SubPrivate Sub removeExistingEmptyData()
       'any previous empty data messages?
       Dim lblempty() As Control = Controls.Find("EmptyDataLabel", True)
       If lblempty.Length > 0 Then
           Controls.Remove(lblempty(0))
       End If

   End Sub 
```

最后 - 我在网格的 InitializeLayout 事件中添加了对空数据的检查。

```
Private Sub grid_InitializeLayout(ByVal sender As Object, _
      ByVal e As Infragistics.Win.UltraWinGrid.InitializeLayoutEventArgs) _
      Handles MyBase.InitializeLayout    

     setEmptyMessageIfRequired()

End Sub 
```

# c++ - Optimizing member variable order in C++

> ID：892767
> 
> 赞同：52
> 
> 时间：2009-05-21T12:48:13.787
> 
> 标签：c++, performance, optimization, embedded

I was reading a [blog post](http://forums.introversion.co.uk/defcon/introversion/viewtopic.php?p=79603#79603) by a game coder for [Introversion](http://Introversion.co.uk) and he is busily trying to squeeze every [CPU](http://en.wikipedia.org/wiki/Central_processing_unit) tick he can out of the code. One trick he mentions off-hand is to

> "re-order the member variables of a class into most used and least used."

I'm not familiar with C++, nor with how it compiles, but I was wondering if

1.  This statement is accurate?
2.  How/Why?
3.  Does it apply to other (compiled/scripting) languages?

I'm aware that the amount of (CPU) time saved by this trick would be minimal, it's not a deal-breaker. But on the other hand, in most functions it would be fairly easy to identify which variables are going to be the most commonly used, and just start coding this way by default.

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2009-05-21T17:13:07.513

Two issues here:

*   Whether and when keeping certain fields together is an optimization.
*   How to do actually do it.

The reason that it might help, is that memory is loaded into the CPU cache in chunks called "cache lines". This takes time, and generally speaking the more cache lines loaded for your object, the longer it takes. Also, the more other stuff gets thrown out of the cache to make room, which slows down other code in an unpredictable way.

The size of a cache line depends on the processor. If it is large compared with the size of your objects, then very few objects are going to span a cache line boundary, so the whole optimization is pretty irrelevant. Otherwise, you might get away with sometimes only having part of your object in cache, and the rest in main memory (or L2 cache, perhaps). It's a good thing if your most common operations (the ones which access the commonly-used fields) use as little cache as possible for the object, so grouping those fields together gives you a better chance of this happening.

The general principle is called "locality of reference". The closer together the different memory addresses are that your program accesses, the better your chances of getting good cache behaviour. It's often difficult to predict performance in advance: different processor models of the same architecture can behave differently, multi-threading means you often don't know what's going to be in the cache, etc. But it's possible to talk about what's *likely* to happen, most of the time. If you want to *know* anything, you generally have to measure it.

Please note that there are some gotchas here. If you are using CPU-based atomic operations (which the atomic types in C++0x generally will), then you may find that the CPU locks the entire cache line in order to lock the field. Then, if you have several atomic fields close together, with different threads running on different cores and operating on different fields at the same time, you will find that all those atomic operations are serialised because they all lock the same memory location even though they're operating on different fields. Had they been operating on different cache lines then they would have worked in parallel, and run faster. In fact, as Glen (via Herb Sutter) points out in his answer, on a coherent-cache architecture this happens even without atomic operations, and can utterly ruin your day. So locality of reference is not *necessarily* a good thing where multiple cores are involved, even if they share cache. You can expect it to be, on grounds that cache misses usually are a source of lost speed, but be horribly wrong in your particular case.

Now, quite aside from distinguishing between commonly-used and less-used fields, the smaller an object is, the less memory (and hence less cache) it occupies. This is pretty much good news all around, at least where you don't have heavy contention. The size of an object depends on the fields in it, and on any padding which has to be inserted between fields in order to ensure they are correctly aligned for the architecture. C++ (sometimes) puts constraints on the order which fields must appear in an object, based on the order they are declared. This is to make low-level programming easier. So, if your object contains:

*   an int (4 bytes, 4-aligned)
*   followed by a char (1 byte, any alignment)
*   followed by an int (4 bytes, 4-aligned)
*   followed by a char (1 byte, any alignment)

then chances are this will occupy 16 bytes in memory. The size and alignment of int isn't the same on every platform, by the way, but 4 is very common and this is just an example.

In this case, the compiler will insert 3 bytes of padding before the second int, to correctly align it, and 3 bytes of padding at the end. An object's size has to be a multiple of its alignment, so that objects of the same type can be placed adjacent in memory. That's all an array is in C/C++, adjacent objects in memory. Had the struct been int, int, char, char, then the same object could have been 12 bytes, because char has no alignment requirement.

I said that whether int is 4-aligned is platform-dependent: on ARM it absolutely has to be, since unaligned access throws a hardware exception. On x86 you can access ints unaligned, but it's generally slower and IIRC non-atomic. So compilers usually (always?) 4-align ints on x86.

The rule of thumb when writing code, if you care about packing, is to look at the alignment requirement of each member of the struct. Then order the fields with the biggest-aligned types first, then the next smallest, and so on down to members with no aligment requirement. For example if I'm trying to write portable code I might come up with this:

```
struct some_stuff {
    double d;   // I expect double is 64bit IEEE, it might not be
    uint64_t l; // 8 bytes, could be 8-aligned or 4-aligned, I don't know
    uint32_t i; // 4 bytes, usually 4-aligned
    int32_t j;  // same
    short s;    // usually 2 bytes, could be 2-aligned or unaligned, I don't know
    char c[4];  // array 4 chars, 4 bytes big but "never" needs 4-alignment
    char d;     // 1 byte, any alignment
}; 
```

If you don't know the alignment of a field, or you're writing portable code but want to do the best you can without major trickery, then you assume that the alignment requirement is the largest requirement of any fundamental type in the structure, and that the alignment requirement of fundamental types is their size. So, if your struct contains a uint64_t, or a long long, then the best guess is it's 8-aligned. Sometimes you'll be wrong, but you'll be right a lot of the time.

Note that games programmers like your blogger often know everything about their processor and hardware, and thus they don't have to guess. They know the cache line size, they know the size and alignment of every type, and they know the struct layout rules used by their compiler (for POD and non-POD types). If they support multiple platforms, then they can special-case for each one if necessary. They also spend a lot of time thinking about which objects in their game will benefit from performance improvements, and using profilers to find out where the real bottlenecks are. But even so, it's not such a bad idea to have a few rules of thumb that you apply whether the object needs it or not. As long as it won't make the code unclear, "put commonly-used fields at the start of the object" and "sort by alignment requirement" are two good rules.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-21T13:00:16.243

Depending on the type of program you're running this advice may result in increased performance or it may slow things down drastically.

Doing this in a multi-threaded program means you're going to increase the chances of 'false-sharing'.

Check out Herb Sutters articles on the subject [here](https://web.archive.org/web/20130723111632/http://www.drdobbs.com/article/print?articleId=217500206&siteSectionName=parallel)

I've said it before and I'll keep saying it. The only real way to get a real performance increase is to measure your code, and use tools to identify the real bottle neck instead of arbitrarily changing stuff in your code base.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-21T13:04:49.963

It is one of the ways of optimizing the [working set size](http://en.wikipedia.org/wiki/Working_Set_Size). There is a good [article](http://msdn.microsoft.com/en-us/magazine/cc301376.aspx) by John Robbins on how you can speed up the application performance by optimizing the working set size. Of course it involves careful selection of most frequent use cases the end user is likely to perform with the application.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-21T17:44:58.430

We have slightly different guidelines for members here (ARM architecture target, mostly THUMB 16-bit codegen for various reasons):

*   group by alignment requirements (or, for newbies, "group by size" usually does the trick)
*   smallest first

"group by alignment" is somewhat obvious, and outside the scope of this question; it avoids padding, uses less memory, etc.

The second bullet, though, derives from the small 5-bit "immediate" field size on the THUMB LDRB (Load Register Byte), LDRH (Load Register Halfword), and LDR (Load Register) instructions.

5 bits means offsets of 0-31 can be encoded. Effectively, assuming "this" is handy in a register (which it usually is):

*   8-bit bytes can be loaded in one instruction if they exist at this+0 through this+31
*   16-bit halfwords if they exist at this+0 through this+62;
*   32-bit machine words if they exist at this+0 through this+124.

If they're outside this range, multiple instructions have to be generated: either a sequence of ADDs with immediates to accumulate the appropriate address in a register, or worse yet, a load from the literal pool at the end of the function.

If we do hit the literal pool, it hurts: the literal pool goes through the d-cache, not the i-cache; this means at least a cacheline worth of loads from main memory for the first literal pool access, and then a host of potential eviction and invalidation issues between the d-cache and i-cache if the literal pool doesn't start on its own cache line (i.e. if the actual code doesn't end at the end of a cache line).

(If I had a few wishes for the compiler we're working with, a way to force literal pools to start on cacheline boundaries would be one of them.)

(Unrelatedly, one of the things we do to avoid literal pool usage is keep all of our "globals" in a single table. This means one literal pool lookup for the "GlobalTable", rather than multiple lookups for each global. If you're really clever you might be able to keep your GlobalTable in some sort of memory that can be accessed without loading a literal pool entry -- was it .sbss?)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-23T03:26:51.030

While locality of reference to improve the cache behavior of data accesses is often a relevant consideration, there are a couple other reasons for controlling layout when optimization is required - particularly in embedded systems, even though the CPUs used on many embedded systems do not even have a cache.

**- Memory alignment of the fields in structures**

Alignment considerations are pretty well understood by many programmers, so I won't go into too much detail here.

On most CPU architectures, fields in a structure must be accessed at a native alignment for efficiency. This means that if you mix various sized fields the compiler has to add padding between the fields to keep the alignment requirements correct. So to optimize the memory used by a structure it's important to keep this in mind and lay out the fields such that the largest fields are followed by smaller fields to keep the required padding to a minimum. If a structure is to be 'packed' to prevent padding, accessing unaligned fields comes at a high runtime cost as the compiler has to access unaligned fields using a series of accesses to smaller parts of the field along with shifts and masks to assemble the field value in a register.

**- Offset of frequently used fields in a structure**

Another consideration that can be important on many embedded systems is to have frequently accessed fields at the start of a structure.

Some architectures have a limited number of bits available in an instruction to encode an offset to a pointer access, so if you access a field whose offset exceeds that number of bits the compiler will have to use multiple instructions to form a pointer to the field. For example, the ARM's Thumb architecture has 5 bits to encode an offset, so it can access a word-sized field in a single instruction only if the field is within 124 bytes from the start. So if you have a large structure an optimization that an embedded engineer might want to keep in mind is to place frequently used fields at the beginning of a structure's layout.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-21T12:52:06.883

Well the first member doesn't need an offset added to the pointer to access it.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-21T14:28:42.773

In C#, the order of the member is determined by the compiler unless you put the attribute [LayoutKind.Sequential/Explicit] which forces the compiler to lay out the structure/class the way you tell it to.

As far as I can tell, the compiler seems to minimize packing while aligning the data types on their natural order (i.e. 4 bytes int start on 4 byte addresses).

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-21T13:41:57.173

I'm focusing on performance, execution speed, not memory usage. The compiler, without any optimizing switch, will map the variable storage area using the same order of declarations in code. Imagine

```
 unsigned char a;
 unsigned char b;
 long c; 
```

Big mess-up? without align switches, low-memory ops. et al, we're going to have an unsigned char using a 64bits word on your DDR3 dimm, and another 64bits word for the other, and yet the unavoidable one for the long.

So, that's a fetch per each variable.

However, packing it, or re-ordering it, will cause one fetch and one AND masking to be able to use the unsigned chars.

So speed-wise, on a current 64bits word-memory machine, aligns, reorderings, etc, are no-nos. I do microcontroller stuff, and there the differences in packed/non-packed are reallllly noticeable (talking about <10MIPS processors, 8bit word-memories)

On the side, it's long known that the engineering effort required to tweak code for performance other than what a good algorithm instructs you to do, and what the compiler is able to optimize, often results in burning rubber with no real effects. That and a write-only piece of syntaxically dubius code.

The last step-forward in optimization I saw (in uPs, don't think it's doable for PC apps) is to compile your program as a single module, have the compiler optimize it (much more general view of speed/pointer resolution/memory packing, etc), and have the linker trash non-called library functions, methods, etc.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-21T12:52:53.497

In theory, it could reduce cache misses if you have big objects. But it's usually better to group members of the same size together so you have tighter memory packing.

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2009-05-21T13:08:43.857

I highly doubt that would have any bearing in [CPU](http://en.wikipedia.org/wiki/Central_processing_unit) improvements - maybe readability. You can optimize the executable code if the commonly executed basic blocks that are executed within a given frame are in the same set of pages. This is the same idea but would not know how create basic blocks within the code. My guess is the compiler puts the functions in the order it sees them with no optimization here so you could try and place common functionality together.

Try and run a profiler/optimizer. First you compile with some profiling option then run your program. Once the profiled exe is complete it will dump some profiled information. Take this dump and run it through the optimizer as input.

I have been away from this line of work for years but not much has changed how they work.

# macos - 无法在 Mac 中启动 XMonad

> ID：892772
> 
> 赞同：2
> 
> 时间：2009-05-21T12:49:36.610
> 
> 标签：macos, xmonad

我已经完成了[XMonad 的](http://www.haskell.org/haskellwiki/Xmonad/Using_xmonad_on_Apple_OSX)Mac 教程中的每一步。但是，我无法启动它。

我的 shell 最初没有正确运行我的 .profile。我的 PATH 现在可以正常工作了。我运行以下命令失败

```
startx 
```

我得到

```
font_cache: Scanning user font directories to generate X11 font caches
font_cache: Updating FC cache
xauth:  creating new authority file /Users/Masi/.serverauth.2188

Xquartz: X11.app = /Applications/Utilities/X11.app/Contents/MacOS/X11
Xquartz: Starting X server: /Applications/Utilities/X11.app/Contents/MacOS/X11 --listenonly
X11.app: main(): argc=2
        argv[0] = /Applications/Utilities/X11.app/Contents/MacOS/X11.bin
        argv[1] = --listenonly
Waiting for startup parameters via Mach IPC.
X11.app: do_start_x11_server(): argc=6
        argv[0] = /usr/X11/bin/X
        argv[1] = :0
        argv[2] = -nolisten
        argv[3] = tcp
        argv[4] = -auth
        argv[5] = /Users/Masi/.serverauth.2188
Xquartz starting:
X.Org X Server 1.4.2-apple42
Build Date: 20090517
(EE) XKB: Couldn't open rules file /usr/X11/share/X11/xkb/rules/base
(EE) XKB: Couldn't open rules file /usr/X11/share/X11/xkb/rules/base
font_cache: Done 
```

我试图通过按未成功使用 XMonad

```
Ctrl-Shift Enter 
```

我对命令一无所获。

**如何在 Mac Leopard 中成功启动 XMonad？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-21T13:17:48.970

/usr/X11/lib/X11/xinit/xinitrc 是一个文本文件，你不能执行它，你应该运行 X11

`open -a X11`

# vb.net - 使用 VB.NET 从 PC 发送 SMS？

> ID：892775
> 
> 赞同：0
> 
> 时间：2009-05-21T12:50:02.957
> 
> 标签：vb.net, sms

hai 如何使用 vb.net 2005 中的 AT 命令集发送带有发件人姓名而不是电话号码的短信。这是否可能给我一个想法。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T13:00:11.923

大多数手机的AT指令在[27.007](http://www.3gpp.org/ftp/Specs/html-info/27007.htm)中规定，而与SMS相关的指令在[27.005](http://www.3gpp.org/ftp/Specs/html-info/27005.htm)中规定。我不记得 sms 命令是否支持名称作为输入，但您应该能够使用 AT+CPBF 至少作为两步解决方案来查找号码。

# ruby-on-rails - 如何将 SQL“IN”语句与 rails Active Record find 和 .map 一起使用

> ID：892777
> 
> 赞同：1
> 
> 时间：2009-05-21T12:50:15.030
> 
> 标签：ruby-on-rails, syntax-error

```
roles = Role.find_all_by_simulation_id(session[:sim_id])
forum_posts = Post.find(:all, :conditions => ["role_id = ? AND created_at > ?", roles.map(&:id), session[:last_login]]) 
```

错误：

```
SQLite3::SQLException: near ",": syntax error: SELECT * FROM "posts" WHERE (role_id = 1,2,3,4 AND created_at > '2009-05-21 11:54:52') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T13:10:34.727

改变这个：

```
forum_posts = Post.find(:all, :conditions => ["role_id = ? AND created_at > ?", roles.map(&:id), session[:last_login]]) 
```

到

```
forum_posts = Post.find(:all, :conditions => ["role_id IN (?) AND created_at > ?", roles.map(&:id), session[:last_login]]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T12:52:56.883

我认为 Role_id = 1,2,3,4 中的逗号。我认为它需要 role_id='1,2,3,4' 如果它是一个字符串或 role_id IN (1,2,3,4) 如果你想对整数进行 OR 样式比较。

# php - windows xp上的php扩展

> ID：892779
> 
> 赞同：0
> 
> 时间：2009-05-21T12:50:30.553
> 
> 标签：php, windows, php-extension

我已经在我的 xp 上安装了 php，但未能向 mysql 添加扩展

这是我在 php.ini 中所做的：

```
[PHP_MYSQL]
extension=php_mysql.dll 
```

并且有这样一个文件`ext/`

但是当我查看时`phpinfo()`，才发现仍然没有添加 mysql 扩展。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T12:58:04.220

在您的 php.ini 文件中执行以下操作：

```
extension=ext/php_mysql.dll 
```

这应该存在于`[PHP]`配置部分下，而不是`[PHP_MYSQL]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-08T09:23:51.310

> [PHP_MYSQL]

这一点不会引起问题吗？猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T12:52:53.777

你在用阿帕奇吗？如果是这样，请检查 apache\bin 中的 php.ini，因为这可能是使用的 ini 文件。

正如 Evgeniy Savichev 指出的那样，正在解析的文件的名称显示在“加载的配置文件”下的 phpinfo 中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-12T06:27:37.150

为了避免配置问题，我会安装 XAMPP ( [http://www.apachefriends.org/en/xampp.html](http://www.apachefriends.org/en/xampp.html) )，它会安装 php、apache 和 mysql 并将其全部配置为工作服务器安装。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-22T00:52:51.860

确保您已安装 mysql 客户端 DLL 并位于 %PATH% 的某个位置。此外，您可以使用像[depwalker](http://dependencywalker.com)这样的工具来加载 php_mysql.dll 并查看缺少的动态链接是什么。

# css - 如何通过纺织品设计链接？

> ID：892780
> 
> 赞同：0
> 
> 时间：2009-05-21T12:51:13.517
> 
> 标签：css, textile

是否可以将样式属性或类应用于纺织品中的链接？我试图找到参考，但一无所获。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-11-05T15:20:17.337

```
"{color:red}This is a testlink":http://www.google.com 
```

或者

```
"(myclass)This is a testlink":http://www.google.com 
```

# java - 为某些用户启用 Log4j 日志记录

> ID：892787
> 
> 赞同：2
> 
> 时间：2009-05-21T12:52:41.297
> 
> 标签：java, logging, log4j

在 log4j.properties 文件中，我将 Level 设置为 ERROR。对于某些用户，我需要将 Level 设置为 DEBUG。我能够在运行时更改日志记录级别，但这将为同时访问应用程序的所有用户启用。是否有任何其他方法可以为选定用户启用日志记录？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-21T13:02:09.110

我想您有一个 Web 应用程序或类似的应用程序，并且有多个可识别的用户同时访问它？

您无法在 Log4j 中*轻松*更改每个用户的配置。但是我会考虑以下内容（这假设一个 Web 服务器或类似服务器，每个用户请求都在一个单独的线程上）：

1.  一旦用户进行了调用，就可以识别进行服务器调用的用户。将该用户数据存储在[MDC中](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/MDC.html)
2.  实现自定义 Log4J [appender](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/Appender.html)。对于每个来电，您可以检查存储在 MDC 中的用户，并根据需要调整严重性/日志记录。

这是一点工作（鉴于上述假设），但应该工作。显然，如果我对您的架构所做的假设不正确，则它是无效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T12:49:28.007

这个问题在 logback（log4j 的继任者）中用[TurboFilters](http://logback.qos.ch/manual/filters.html#TurboFilter)解决了。请参阅标题为“MDCFilter 和 MarkerFilter 配置”的示例。如果您需要进一步的帮助，请联系 logback-user 邮件列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T13:00:38.880

对，但是。

您可以使用所涉及的类+用户来命名您的记录器，而不仅仅是类，并在方法上创建记录器（或者如果您想获得幻想，将记录器缓存在用户键入的某种池中），然后配置适当地记录。

它对代码非常混乱和侵入，但由于用户是运行时属性，我不知道如何（缺少 AspectJ 或其表亲）如何避免这种混乱。

另一种选择是专门格式化您的日志消息并在日志消息中包含用户名，然后解析日志。这将为每个人启用调试（显然这可能是一个性能问题），但如果更多关注的是隔离用户日志记录而不是限制调试调用的数量，那可能是一个解决方案。

# google-app-engine - 如何同步到 Google App Engine 上的开发数据存储？

> ID：892793
> 
> 赞同：5
> 
> 时间：2009-05-21T12:53:10.110
> 
> 标签：google-app-engine, sync, google-cloud-datastore

我在 Google App Engine 的实时数据存储中获得了一些数据，但也希望有一个本地副本以用于本地开发。进行偶尔同步的最佳方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-22T17:47:27.383

没有简单的方法可以做到这一点，但有一些可能性：

*   如果您的应用程序是 Python（但不是 Django），请使用官方[批量上传](http://code.google.com/appengine/docs/python/tools/uploadingdata.html)器（来自 GAE-Python SDK）
*   如果您的应用程序在 Django 中，请使用[Gaebar](http://aralbalkan.com/1784)
*   如果您的应用程序使用 Java，请使用[Datanucleus REST API](http://www.datanucleus.org/products/accessplatform_1_1/rest/api.html)

您还可以尝试其他一些旨在解决此问题的开源项目。[AppRocket](http://code.google.com/p/approcket/)是一个很有前途的项目，但该项目只有一个提交者，过去几个月没有任何活动......

此外，星[号 59](http://code.google.com/p/googleappengine/issues/detail?id=59&colspec=ID%20Type%20Status%20Priority%20Stars%20Owner%20Summary%20Log%20Component)和[776](http://code.google.com/p/googleappengine/issues/detail?id=776&colspec=ID%20Type%20Status%20Priority%20Stars%20Owner%20Summary%20Log%20Component)以使其被谷歌正式收录。

# xml - Visual Studio > XML 解析器 > 注册 URI 前缀

> ID：892799
> 
> 赞同：4
> 
> 时间：2009-05-21T12:54:50.980
> 
> 标签：xml, visual-studio, parsing, uri

我开始使用 Visual Studio 来编写我的 XUL，因为它给了我智能感知和验证，因为我使用了一个特殊的 XUL xml-schema。

这种方法仍然存在一些问题，我想修复这些问题以使 VS 成为更可用的 XUL-IDE。

VS 对 chrome 协议一无所知，并在以下 xml 代码中给了我一个错误（“无法识别 URI 前缀”）：

```
<!DOCTYPE window SYSTEM "chrome://myApp/locale/main.dtd"> 
```

这不是VS的错。由于它不知道协议，它无法解释 URI，它不知道 main.dtd 所在的位置，因此不知道其中声明的实体，这将在其他地方。

我的目标是扩展 XML 解析器或 VS 或其他任何东西，以便它可以解释 URI。这不应该是一项艰巨的任务，因为 chrome 所做的只是根据“chrome.manifest”文件中的信息将 URI 映射到文件路径，所以

chrome://myApp/locale/main.dtd

实际上是这样的

file:///c:/somefolder/myapp/locale/main.dtd

我只需要知道，我如何告诉 VS / XML 解析器关于 URI 前缀以及如何解释它，以便它链接到真实文件。

有没有人有什么建议？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-31T04:10:20.530

我会尝试以下方法：

1.  在 Chrome 的下一行使用另一个 Doctype 标记，除了这个使用 file:// URI 方案。
2.  如果这不起作用，请尝试使用文件 URI 本身完全替换 chrome URI。

在某些情况下，允许使用多个 doctype 标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-05T02:39:11.507

深入了解适用于您的安装的 Visual Studio 安装目录下的 Program Files。

您将找到 Xml 的子目录，以及 Schemas 的子目录。

例如，在我的系统上，目录是：

> C:\Program Files\Microsoft Visual Studio 9.0\Xml\Schemas

您在此处输入的任何架构文件都将根据架构的 URI 与您编辑的 XML 文件相匹配。

我相信（但尚未测试）DTD 以同样的方式得到支持；只需将您的 DTD 放在此目录中，并确保 DTD 的 URI 匹配。

旁注：模式和 DTD 使用 URI（通用资源*标识符*），而不是 URL（通用资源*定位器*）。*URI 实际上并没有提供关于在哪里*找到它的任何信息。这只是一个名字。

**更新**

事实证明 Visual Studio 不支持 DTD，所以我的想法不会浮动。

不过还有另一种可能性：由于 Visual Studio*确实*支持架构，因此您可以通过将 DTD 转换为架构来获得一些吸引力。一个快速的谷歌发现[DTD2Schema](http://www.w3.org/2000/04/schema_hack/)，一个基于 perl 的[W3](http://www.w3.org)站点本身的工具。可能值得一试...

# css - IE 6.0 z-index 问题

> ID：892805
> 
> 赞同：0
> 
> 时间：2009-05-21T12:57:32.193
> 
> 标签：css, internet-explorer-6, z-index

我在 IE 6.0 中遇到 CSS 的 Z-index 属性问题

HTML

```
<div id="banner"></div> 
```

CSS

```
#banner{
  background:url(pix/banner.PNG) top no-repeat;
  z-index = -1;
} 
```

网址： http: [//www.whizlabs.com/examprep/](http://www.whizlabs.com/examprep/)

在 IE 6.0 中，它会在女孩的额头上显示一条线，显示在页面顶部的横幅中。在其他浏览器中，线路不来。我该如何解决这个问题？

请帮我。

谢谢德维什 M

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T13:17:59.437

真的没有理由将女孩分成不同的图像。

只需使用单个图像，然后将其相对于包装器的右上角定位

```
#banner{
    background:url(pix/girl.PNG) top no-repeat; /* where girl is the whole girl */
    position:relative;
    top:0;
    right:150px;
} 
```

然后确保在您的标题 div 下

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T13:22:53.920

Z-index 对静态定位的元素没有影响，因此您需要将 css`position`属性设置为其他值，例如`relative`，但我认为在这种情况下您不应该使用 z-index 。

为了快速修复，您可以尝试以下操作：

```
 * html #banner { margin-top: -1px; } 
```

上述技巧仅适用于 MSIE6。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T13:06:11.333

尝试将线条的标记放在女孩的标记之前，并使用 css 放置两者。在类似的情况下，它通常对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T13:28:45.623

同样对于 Z-Index，请确保使用从 1 开始的数字。

如果您在使用某个元素时遇到问题，请尝试给它一个 Position 属性以及给它的父元素一个 Position 和一个 Z-Index。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-22T00:47:47.220

z-index 仅适用于定位元素。

另外，您只能交换同一元素所包含的元素的深度 - 嵌套元素（一个在另一个中）不能跳出它们的嵌套！

# php - php中的错误处理

> ID：892810
> 
> 赞同：1
> 
> 时间：2009-05-21T12:59:17.993
> 
> 标签：php, error-handling

我有一个文件可以打开一个 URL 并读取它并进行解析。现在，如果该 URL 变为 dwon 并且我的文件无法打开它，那么我需要的是应该生成错误邮件，但在终端或 konsole 上不应出现错误消息。我怎样才能做到这一点？请帮忙！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T13:05:29.947

你总是可以做这样的事情（我假设你正在使用 file_get_contents）

```
$file = @fopen("abc.com","rb");
if(!$file) { 
    @mail(.......); 
    die(); 
} 
//rest of code. Else is not needed since script will die if hit if condition 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T13:21:15.453

如果您通过网络检索文件，请改用 curl。它具有内置的错误处理功能，它会告诉您发生的错误。使用 file_get_contents 不会告诉您出了什么问题，它也不会遵循重定向。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://domain.com/file');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
$result = curl_exec($ch);
if ( $result == false ) {
    $errorInfo = curl_errno($ch).' '.curl_error($ch);
    mail(...)
} else {
    //Process file, $result contains file contents
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T13:06:28.057

```
if (!$content = file_get_contents('http://example.org')) {
  mail(...);
} 
```

# 2d - 绘制等距游戏世界

> ID：892811
> 
> 赞同：180
> 
> 时间：2009-05-21T12:59:27.663
> 
> 标签：2d, isometric

在 2D 游戏中绘制等距图块的正确方法是什么？

我已阅读参考资料（例如[this one](https://www.gamedev.net/articles/programming/general-and-gameplay-programming/isometric-n-hexagonal-maps-part-i-r747)），这些参考资料建议以一种将地图二维数组表示中的每一列锯齿形呈现的方式呈现图块。我想它们应该更多地以菱形方式绘制，在屏幕上绘制的内容与 2D 阵列的外观更密切相关，只需旋转一点。

两种方法都有优点还是缺点？

* * *

## 回答 #1

> 赞同：520
> 
> 时间：2009-05-21T13:57:19.560

*更新：更正了地图渲染算法，添加了更多插图，更改了格式。*

或许“之字形”技术用于将图块映射到屏幕的优势可以说是图块`x`和`y`坐标位于垂直轴和水平轴上。

**“绘制钻石”方法：**

通过使用“绘制菱形”绘制等距地图，我认为这指的是通过`for`在二维数组上使用嵌套循环来渲染地图，例如这个例子：

```
tile_map[][] = [[...],...]

for (cellY = 0; cellY < tile_map.size; cellY++):
    for (cellX = 0; cellX < tile_map[cellY].size cellX++):
        draw(
            tile_map[cellX][cellY],
            screenX = (cellX * tile_width  / 2) + (cellY * tile_width  / 2)
            screenY = (cellY * tile_height / 2) - (cellX * tile_height / 2)
        ) 
```

*优势：*

该方法的优点是它是一个简单的嵌套`for`循环，具有相当直截了当的逻辑，可以在所有图块中始终如一地工作。

*坏处：*

这种方法的一个缺点是地图上瓦片的坐标`x`和`y`坐标会在对角线上增加，这可能会使将屏幕上的位置直观地映射到表示为数组的地图上变得更加困难：

[![平铺地图的图像](https://i.stack.imgur.com/CZZ0k.png)](https://i.stack.imgur.com/CZZ0k.png)

然而，实现上面的示例代码会有一个陷阱——渲染顺序将导致应该在某些图块后面的图块被绘制在前面的图块之上：

[![不正确的渲染顺序产生的图像](https://i.stack.imgur.com/cfeJO.png)](https://i.stack.imgur.com/cfeJO.png)

为了修正这个问题，内部`for`循环的顺序必须颠倒——从最高值开始，向着较低的值渲染：

```
tile_map[][] = [[...],...]

for (i = 0; i < tile_map.size; i++):
    for (j = tile_map[i].size; j >= 0; j--):  // Changed loop condition here.
        draw(
            tile_map[i][j],
            x = (j * tile_width / 2) + (i * tile_width / 2)
            y = (i * tile_height / 2) - (j * tile_height / 2)
        ) 
```

通过上述修复，应该更正地图的渲染：

[![从正确的渲染顺序生成的图像](https://i.stack.imgur.com/ITLw0.png)](https://i.stack.imgur.com/ITLw0.png)

**“之字形”方法：**

*优势：*

也许“之字形”方法的优点是渲染的地图可能看起来比“菱形”方法更垂直紧凑：

[![锯齿形渲染方法看起来很紧凑](https://i.stack.imgur.com/ajPic.png)](https://i.stack.imgur.com/ajPic.png)

*坏处：*

从尝试实现之字形技术来看，缺点可能是编写渲染代码有点困难，因为它不能像`for`在数组中的每个元素上嵌套循环一样简单：

```
tile_map[][] = [[...],...]

for (i = 0; i < tile_map.size; i++):
    if i is odd:
        offset_x = tile_width / 2
    else:
        offset_x = 0

    for (j = 0; j < tile_map[i].size; j++):
        draw(
            tile_map[i][j],
            x = (j * tile_width) + offset_x,
            y = i * tile_height / 2
        ) 
```

此外，由于渲染顺序的交错性质，尝试找出图块的坐标可能有点困难：

[![锯齿形订单渲染上的坐标](https://i.stack.imgur.com/MOvf8.png)](https://i.stack.imgur.com/MOvf8.png)

注意：此答案中包含的插图是使用所提供的瓷砖渲染代码的 Java 实现创建的，使用以下`int`数组作为地图：

```
tileMap = new int[][] {
    {0, 1, 2, 3},
    {3, 2, 1, 0},
    {0, 0, 1, 1},
    {2, 2, 3, 3}
}; 
```

平铺图像是：

*   `tileImage[0] ->`一个盒子，里面有一个盒子。
*   `tileImage[1] ->`一个黑匣子。
*   `tileImage[2] ->`一个白色的盒子。
*   `tileImage[3] ->`一个盒子，里面有一个高大的灰色物体。

**关于瓷砖宽度和高度的说明**

上述代码示例中使用的变量`tile_width`和`tile_height`是指表示地砖的图像中地砖的宽度和高度：

[![显示平铺宽度和高度的图像](https://i.stack.imgur.com/7MFIP.png)](https://i.stack.imgur.com/7MFIP.png)

只要图像尺寸和平铺尺寸匹配，使用图像的尺寸就可以了。否则，瓷砖地图可能会被渲染为瓷砖之间的间隙。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-21T17:39:44.057

无论哪种方式都能完成工作。我假设之字形的意思是这样的：（数字是渲染的顺序）

```
..  ..  01  ..  ..
  ..  06  02  ..
..  11  07  03  ..
  16  12  08  04
21  17  13  09  05
  22  18  14  10
..  23  19  15  ..
  ..  24  20  ..
..  ..  25  ..  .. 
```

你说的钻石是指：

```
..  ..  ..  ..  ..
  01  02  03  04
..  05  06  07  ..
  08  09  10  11
..  12  13  14  ..
  15  16  17  18
..  19  20  21  ..
  22  23  24  25
..  ..  ..  ..  .. 
```

第一种方法需要渲染更多图块以便绘制全屏，但您可以轻松地进行边界检查并跳过任何图块完全离开屏幕。这两种方法都需要进行一些数字运算才能找出 01 块的位置。最后，两种方法在一定水平的效率所需的数学方面大致相等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-24T21:59:02.693

如果您有一些超出钻石边界的图块，我建议您按深度顺序绘制：

```
...1...
..234..
.56789.
..abc..
...d... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-11T16:11:21.557

Coobird 的答案是正确的、完整的。但是，我将他的提示与其他站点的提示结合起来，创建了适用于我的应用程序（iOS/Objective-C）的代码，我想与任何来这里寻找此类东西的人分享。请，如果您喜欢/投票赞成这个答案，请对原件做同样的事情；我所做的只是“站在巨人的肩膀上”。

至于排序顺序，我的技术是修改后的画家算法：每个对象都有（a）底部的高度（我称之为“水平”）和（b）“底部”或“脚”的 X/Y图像（例如：化身的底部在他的脚下；树的底部在它的根部；飞机的底部是中心图像等）然后我只是从最低到最高排序，然后从最低（屏幕上最高）到最高基- Y，然后是最低（最左边）到最高的 base-X。这以人们期望的方式呈现瓷砖。

将屏幕（点）转换为平铺（单元格）并返回的代码：

```
typedef struct ASIntCell {  // like CGPoint, but with int-s vice float-s
    int x;
    int y;
} ASIntCell;

// Cell-math helper here:
//      http://gamedevelopment.tutsplus.com/tutorials/creating-isometric-worlds-a-primer-for-game-developers--gamedev-6511
// Although we had to rotate the coordinates because...
// X increases NE (not SE)
// Y increases SE (not SW)
+ (ASIntCell) cellForPoint: (CGPoint) point
{
    const float halfHeight = rfcRowHeight / 2.;

    ASIntCell cell;
    cell.x = ((point.x / rfcColWidth) - ((point.y - halfHeight) / rfcRowHeight));
    cell.y = ((point.x / rfcColWidth) + ((point.y + halfHeight) / rfcRowHeight));

    return cell;
}

// Cell-math helper here:
//      http://stackoverflow.com/questions/892811/drawing-isometric-game-worlds/893063
// X increases NE,
// Y increases SE
+ (CGPoint) centerForCell: (ASIntCell) cell
{
    CGPoint result;

    result.x = (cell.x * rfcColWidth  / 2) + (cell.y * rfcColWidth  / 2);
    result.y = (cell.y * rfcRowHeight / 2) - (cell.x * rfcRowHeight / 2);

    return result;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-06T12:50:37.677

您可以使用距观察者最高点和最近点的欧几里得距离，但这并不完全正确。它导致球形排序顺序。你可以通过从更远的地方看来解决这个问题。离得越远，曲率就会变平。因此，只需将 x、y 和 z 分量中的每一个添加 1000 即可得到 x'、y' 和 z'。x'*x'+y'*y'+z'*z' 上的排序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-09T16:22:01.360

真正的问题是当您需要绘制一些相交/跨越两个或多个其他图块的图块/精灵时。

经过 2 个月（困难）的个人问题分析后，我终于为我的新 cocos2d-js 游戏找到并实现了“正确的渲染绘图”。解决方案包括为每个图块（易受影响的）映射哪些精灵是“前、后、顶部和后面”。一旦这样做，您就可以按照“递归逻辑”绘制它们。

# nhibernate - NHibernate - 不正确的想法？基于Join的子类模型

> ID：892820
> 
> 赞同：0
> 
> 时间：2009-05-21T13:01:13.323
> 
> 标签：nhibernate, nhibernate-mapping

我有一个简单的模型类（Part），它从单个表（t_Part）中提取信息。

我想要一个名为 (ProducedPart) 的模型的子类，它仍将利用 NHibernate 的缓存机制，但只会是 (Part) 的实例，它们在名为“t_PartProduction”的表中具有外键关系。我不需要*第二*张桌子的模型。

我只需要 ProducedPart 的只读版本

我总是可以为此实现一个外观/存储库，但我希望设置一个映射，当我在 NH 中询问“ProducedPart”时，可以将“t_Part”与“PartProduction”结合起来。

这是使用NH的错误方式吗？

**编辑**

所以，SQL 看起来像

```
SELECT p.* 
FROM t_Part p 
INNER JOIN t_PartProduction pp ON pp.PartID = p.PartID 
WHERE pp.ProductionYear = '2009' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T13:17:14.790

不，这是完全可能的。在 NHibernate 文档中查找“每个子类的表”继承模型。它实际上会将其实现为 LEFT JOIN，因此当您加载 Part 时，它会根据另一行是否存在创建您的 Part 或 ProducedPart 类的实例。您可以在[nhibernate.info](http://nhibernate.info/doc/nhibernate-reference/inheritance.html#inheritance-tablepersubclass)上找到文档。

不过，我不确定您是否可以将 ProducedPart 设为只读。

我从这个假设：

```
WHERE pp.ProductionYear = '2009' 
```

您只需要生产年份为 2009 年的子类，即如果 t_PartProduction 中有不同年份的记录，您希望将此 Part 视为普通 Part 对象，而不是 ProducedPart，那么您可以考虑创建视图定义在您的数据库中，它是 t_PartProduction 的过滤版本，然后使您的子类连接到该视图而不是基表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T13:18:18.237

我相信你正在寻找的是一个加入的子类。在 FNH 中，它看起来像：

```
public class PartMap : ClassMap<Part>
{
    public PartMap()
    {
        Id(x => x.Id)

        JoinedSubClass<ProducedPart>("PartID", sub => { 
            sub.Map(x => x.Name); 
            sub.Map(x => x.ProductionYear); 
        });
    }
} 
```

为了让 NHibernate 缓存结果，您需要映射子类（如果您没有映射它，您将无法让 NH 首先加载它）。

[从FNH 组线程](http://groups.google.com/group/fluent-nhibernate/browse_thread/thread/daa4b4960248fc4a?hl=en)中引入一些上下文，但它不会明确地是只读的。在我看来，将内容设为只读对于 NHibernate 来说并不合适。这由数据库和连接更好地控制（即创建一个到数据库的连接，该连接只对正在访问的表/视图具有 SELECT 权限）。有关我对此事的更多想法，请参阅[我](https://stackoverflow.com/questions/768191/how-to-create-a-readonly-session-in-nhiberate/769712#769712)对先前关于 NHibernate 中的只读会话的​​ SO 问题的回答。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T14:10:58.923

这里的关键是同时使用NHibernate 映射定义的`where`和`mutable`元素。`class`

使用 Fluent NHibernate，这看起来像：

```
 public Part()
    {
        WithTable("t_Part");

        Id(i => i.Id).ColumnName("PartID");
        Map(m => m.Name).ColumnName("Part");

        SetAttribute("where", "PartID IN ( SELECT pp.PartID FROM t_PartProduction pp WHERE pp.ProductionYear = '2009' ) ");

        ReadOnly();
    } 
```

# jquery - AJAX 验证理念 - 包含 ValidationSummary 和 ValidationMessage

> ID：892835
> 
> 赞同：2
> 
> 时间：2009-05-21T13:04:49.107
> 
> 标签：jquery, html, asp.net-mvc, jquery-validate, xval

我一直在研究许多 ASP.Net MVC 客户端验证想法，包括 xVal。这目前不提供 ValidationSummary，所以我选择做一个 AJAX 帖子，它遍历 ModelState 错误并使用成功的 AJAX 帖子上的错误消息更新 DIV。

问题是您的 ValidationMessage * 字段旁边不会被填充。我想出了一个我还没有测试过的替代想法，因为我还不知道让它工作的完整语法，但我想我会看看你们的想法。

我认为可能存在的一个问题是，当您发布到控制器中的 Edit/Create Action 方法并且想要返回 JSON 对象时，我不确定这是否合法，因为 JSON 仅用于 GET 操作。

如果您认为这是一个好主意并希望提供帮助，请留下答案和任何代码片段以使其正常工作。如果您认为这是一个头脑发热的计划并且可以做得更好，请告诉我如何。

控制器：

```
if (!ModelState.IsValid)
{
            var err = ModelState.Where(f => f.Value.Errors.Count > 0);    
            if (Request.IsAjaxRequest())
            {
                   return this.Json(err);
            }
            else
            {
                  return View(PostedItem); 
            }
} 
```

看法：

```
 $(function() {

    $('#createForm').ajaxForm({
        success:fillSummary
    });

    //click events
    $('#btnSave').click( function(){
        $('#createForm').submit();
    });

    function fillSummary(data) 
    {
       //Loop through the modelstate errors returned
        $.each(data)
       {
            //Append Summary DIV with error message
            //Look for span with the ModelState key name and set it to visible
       }           
    }

    <div id="summary">
       <%= Html.ValidationSummary("Create was unsuccessful. Please correct the errors and try again.")%>
    </div>
    <form action="<%=Url.Action("Create") %>" method="post" id="createForm">

        <fieldset>
            <div>
                 <label for="Title">Title:</label>
                <%= Html.TextBox("Title",Model.Title) %>
                <%= Html.ValidationMessage("Title", "*") %>
                <span id="val_Title" style="display:none">*</span>              
            </div>
   </form>
   <input type="button" value="Save" id="btnSave" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T13:52:55.357

在我当前的 ASP.NET MVC 项目中，我有很多用于 AJAX 的 POST 操作，并且也遇到了验证问题。我所做的是创建一个包装对象，该对象从这些动作中的每一个返回，看起来像这样......

```
public class JsonWrapper
{
   public object Data { get; set; }
   public bool IsError { get; set; }
   public string Message { get; set; }
} 
```

如果操作中的验证没有任何类型的错误，我会将我想要返回的任何数据放在 Data 属性中。但是，如果有任何类型的验证错误或其他异常，我将 IsError 标志设置为 true 并在 Message 属性中设置错误消息。然后在操作结束时，我将对象序列化为 JSON 并将其返回，（是的，您可以通过 POST 操作执行此操作）...

```
return Json(myJsonWrapper); 
```

从客户端，在我的 AJAX POST 代码的 onSuccess 中，我检查错误，并采取任何必要的操作......（注意，此时在代码中，从服务器返回的对象已经通过 jQuery 反序列化为 JS 对象）

```
function onSuccess(jsonWrapper) {
    if (!jsonWrapper.IsError) {
        var myDataFromAction = jsonWrapper.Data;
        //Do stuff with my data
    }
    else {
        MessageBox.ShowMessage(jsonWrapper.Message);
    }
} 
```

这不适合您的场景开箱即用，但您可以做一些类似于概念的事情。希望这至少能给你一些想法。

# apache-flex - 使用 Flash 作为 shell 加载 Flex 应用程序并传递 URLVars？

> ID：892845
> 
> 赞同：0
> 
> 时间：2009-05-21T13:06:19.570
> 
> 标签：apache-flex, flash, shell

我的 flex 应用程序中出现了预加载器的问题。我在开发 Flash 应用程序时从来没有遇到过这个问题，所以我想到了使用 Flash 应用程序作为外壳，其唯一目的是在加载 flex 应用程序时显示预加载器。不过我不知道该怎么做，而且我还需要能够将 FlashVars 从 shell flash 应用程序传递到 flex 应用程序。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T13:19:04.660

Flex 通过 Application 类支持预加载器，因此您不必求助于 hack。Flex 3 开发人员指南第 1 章中详细描述了它。14（“应用程序容器”）。我从未编写过纯 Flash 预加载器，但我认为它与 Flex 所做的不同。也许他们两个有冲突？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T17:40:27.380

我将首先同意 Simon 的观点，但有一些方法可以创建您正在谈论的黑客。

不幸的是，Flex 中应用程序的父层覆盖了 numChildren，因此它总是返回 -1。这意味着您既不能从 flex 访问父 swf，也不能直接从 Flash 访问后代 SWF（有趣的是，如果 Flex 应用程序加载 Flash swf，这不是问题）。

解决方法：

1.  创建自定义事件。将冒泡设置为真，将可取消设置为假。
2.  在 Flash 层上为该事件添加事件侦听器。
3.  从 Flex 应用程序的应用程序层调度它。

处理该事件的函数现在可以使用事件的目标属性来访问 Flex 应用程序的应用程序层。

# c++ - c++ win32弹出动画

> ID：892849
> 
> 赞同：1
> 
> 时间：2009-05-21T13:08:35.867
> 
> 标签：c++, winapi

我正在创建一个使用弹出窗口的应用程序。但是，我想为这个弹出窗口设置动画（一个win32窗口，一个HWND），例如让它从我的屏幕底部慢慢延伸，向上移动。我应该对 SetWindowPos 函数进行几十次调用，中间稍作停顿，还是有更好的方法来做到这一点，使用 c++ 和 win32？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-21T13:10:49.437

您还可以使用*[AnimateWindow()](http://msdn.microsoft.com/en-us/library/ms632669(VS.85).aspx)* Windows API 函数。

# iphone - iPhone上的UIActivityIndi catorView问题

> ID：892852
> 
> 赞同：1
> 
> 时间：2009-05-21T13:09:05.307
> 
> 标签：iphone, objective-c

我想在更改视图时在我的 iphone 上显示 UIActivityIndi​​catorView。我写了以下代码：

```
- (void)viewDidLoad 
{

  spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
  [spinner setCenter:CGPointMake(320/2.0, 460/2.0)]; // I do this because I'm in landscape mode
  [self.view addSubview:spinner];
} 
```

在按钮的单击事件上，我想更改视图，在此期间我想显示该 indicatorView 所以，我写

```
-(IBAction)buttonClick:(id)sender
{

    [spinner startAnimating];
    ViewController *lController = [[ViewController alloc] initWithNibName: @"View" bundle:nil];
    self.viewController = lController;
    [lController release];
    //
    [[self mainController] dismissModalViewControllerAnimated:YES];
    [lViewController.view removeFromSuperview];
    [self.view addSubview: lController.view];
    [spinner stopAnimating];
 } 
```

它没有显示指标，所以请告诉我我错在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-11-26T16:14:43.850

UIActivityIndi​​cator 在主线程上动画（动画帧在每个运行循环中改变）。如果您启动、执行代码和停止，它永远没有机会制作动画（因为它永远不会退出当前的运行循环）。

尝试在后台线程上运行您的代码。这将允许主线程处理动画帧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T18:05:46.610

`buttonClick`看起来您正在添加微调器的“`lController.view`顶部”（之前在 中添加`viewDidLoad`）。很难从您的代码段中看出模态解雇发生了什么，所以让我们假设这不是罪魁祸首。

您可以尝试`[self.view bringSubviewToFront:spinner]`在添加新子视图后调用，或者`[self.view insertSubview:lController.view belowSubview:spinner]`将视图放在微调器下方。您可能还希望将`hidesWhenStopped`微调器上的属性设置为，`YES`以便在停止时自动隐藏。

要记住的另一件事是加载和切换视图实际上可能不会花费那么长时间，因此如果事情发生得太快，微调器可能不会出现。

# jquery - 在 jQuery 中替换元素并返回新元素

> ID：892861
> 
> 赞同：24
> 
> 时间：2009-05-21T13:11:20.823
> 
> 标签：jquery, replace

如何替换 jQuery 中的元素并返回替换元素而不是被删除的元素？

我有以下情况。我有许多复选框，一旦您单击其中一个，该复选框就会被加载图标替换。一旦发生了一些 AJAX 问题，加载图标就会被一个勾号图标代替。

使用 jQuery's [`replaceWith`](http://docs.jquery.com/Manipulation/replaceWith)，您可以执行以下操作：

```
$("input[type='checkbox']").click(function() {

  $(this).replaceWith("<img src='loading.jpg' alt='loading'/>");
  $.post("somepage.php");
  $(this).replaceWith("<img src='tick.jpg' alt='done'/>"); 

}); 
```

但是，这不起作用，因为`replaceWith`返回已删除的元素，而不是添加的元素。所以在 AJAX 东西完成后，`loading.jpg`将永远留在那里。

有什么方法可以返回替换元素而不选择它？

提前致谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-21T13:25:12.073

给加载图像一个类，然后在 post 回调中，使用该类作为选择器来查找刚刚注入的图像。

```
$("input[type='checkbox']").click(function() {
  $(this).replaceWith("<img src='loading.jpg' alt='loading' class='loading-image' />");
  $.post("somepage.php", function() {
      $('.loading-image').replaceWith("<img src='tick.jpg' alt='done'/>");
  });
}); 
```

如果您可能一次运行其中的几个，则可以获取最近的父级`this`并将其用作搜索类时的上下文。

**编辑**：另一种替代方法是使用变量来存储新元素，并且无需在函数返回时应用类和搜索新元素。

```
$("input[type='checkbox']").click(function() {
  var loading = $("<img src='loading.jpg' alt='loading' />");
  $(this).replaceWith(loading);
  $.post("somepage.php", function() {
      loading.replaceWith("<img src='tick.jpg' alt='done'/>");
  });
}); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-05-21T13:32:18.987

创建一个元素并将其用作参数来替换：

```
 $('input[type=checkbox]').click(function() {
    var img = document.createElement('img');
    img.src = 'loading.jpg';
    $(this).replaceWith(img);
    $.post('somepage.php', function() {
        $(img).replaceWith('<img src="tick.jpg" alt="done"/>');
    });
}); 

```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-21T13:16:06.307

你可以使用索引给它一个唯一的 id：

```
$("input[type='checkbox']").click(function() {
  var index = $("input[type='checkbox']").index(this);
  $(this).replaceWith("<img src='loading.jpg' id='myLoadingImage" + index + "' alt='loading'/>");
  $.post("somepage.php");
  $('#myLoadingImage'+index).replaceWith("<img src='tick.jpg' alt='done'/>"); 

}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-09T09:43:01.517

如果没有必要专门使用replaceWith 方法——您可以使用与replaceWith 相反的replaceAll 方法。

在这里查看答案：（[对一年后提出的类似问题的回答）](https://stackoverflow.com/questions/4399424/using-this-after-replacewith/4399529#4399529) replaceAll将作为参数传递的对象中的每个元素或与作为参数传递的选择器匹配的元素替换为匹配的元素并返回匹配的元素（新内容）。

这样，tvanfosson 答案中的编辑（以及 Keeper 答案中的代码）将如下所示：

```
$("input[type='checkbox']").click(function() {
    var loading = $("<img src='loading.jpg' alt='loading' />").replaceAll($(this));
    $.post("somepage.php", function() {
        loading.replaceWith("<img src='tick.jpg' alt='done'/>");
    });
}); 
```

它只是短了一行，但为了简洁起见，并包括使用 replaceAll() 的选项，我认为将这个答案添加到这个旧的和更多查看的问题中是合适的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-21T13:49:29.937

您的代码不起作用的原因是第一个**replaceWith**替换了**this**引用的项目。第二个**replaceWith**尝试再次替换它，但是由于它已经消失了，所以没有什么可以替换的。并且勾号图标不会显示。

您最好的选择是使用 tvanfosson 建议的 post 回调函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-03-26T09:46:17.190

检查这个。

```
$.fn.replaceWithMod = function(obj) {
var $a = $(obj);
this.replaceWith($a);
return $a;  
};

var newObj  = $('a').replaceWithMod('<div>New Created Object</div>');
$(newObj).css('color','green'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-20T00:24:49.077

我编写了一个小插件来实现类似的结果，因为我希望能够在一行代码中检索新项目的指针。

```
(function($){
    $.fn['overwrite'] = function(target){
        $(target).replaceWith(this);
        return this;
    }
}(jQuery)); 
```

使用示例：

```
$("input[type='checkbox']").click(function() {
    var $loading = $("<img src='loading.jpg' alt='loading' class='loading-image' />").overwrite( this );
    $.post("somepage.php", function() {
        $loading.replaceWith("<img src='tick.jpg' alt='done'/>");
    });
}); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-05-21T13:36:09.527

为什么不像这样制作一个中间 jquery 对象？...

```
$("input[type='checkbox']").click(function() {
    var insertedElement = $("<img src='loading.jpg' alt='loading'/>");
    $(this).replaceWith(insertedElement);
    $.post("somepage.php");
    var anotherInsertedElement = $("<img src='tick.jpg' alt='done'/>");
    $(this).replaceWith(anotherInsertedElement);
    //do something with either of the inserted elements
}); 
```

# c# - 使用 where 执行单选

> ID：892862
> 
> 赞同：0
> 
> 时间：2009-05-21T13:12:27.577
> 
> 标签：c#, .net, sql, subsonic

我想用 subsonic 2.2 实现以下 SQL 语句

```
SELECT Product.* FROM Product WHERE Product.OurPrice <> Product.RetailPrice 
```

我开始使用的 Subsonic 选择查询：

```
SubSonic.SqlQuery select = new SubSonic.Select()
.From<Product>()
.Where(Product.Columns.OurPrice)
.IsNotEqualTo(... object /*Should be Product.Columns.RetailPrice, but that's giving and exception*/...); 
```

我的问题是如何告诉 SubSonic 2.2 针对同一张表中的另一列生成 where 条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T16:22:59.173

看起来您正在尝试比较查询中的两列。这在 SubSonic 2.2 中是不可能的，除非您使用内联查询：

[http://subsonicproject.com/docs/Inline_Query_Tool](http://subsonicproject.com/docs/Inline_Query_Tool)

您还可以使用基于视图或表格的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T18:29:47.250

上述问题的解决方案：

```
ProductCollection products = new SubSonic.InlineQuery().ExecuteAsCollection<ProductCollection>
(@"SELECT Product.ProductId, ... Product.ModifiedBy, Product.ModifiedOn, Product.IsDeleted FROM Product WHERE (Product.OurPrice <> Product.RetailPrice)");

Repeater1.DataSource = products;
Repeater1.DataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T19:18:46.823

您可以像这样使用旧的 Query 对象（仍包含在 2.2 中）：

```
Query q = new Query(Product.Schema.TableName).WHERE("OurPrice <> RetailPrice");
ProductCollection products = new ProductCollection();
products.LoadAndCloseReader(q.ExecuteReader()); 
```

# iphone - 强制关闭 iPhone

> ID：892863
> 
> 赞同：1
> 
> 时间：2009-05-21T13:12:39.870
> 
> 标签：iphone, xcode, shutdown

是否可以强制 iPhone 关机（当然，以**编程方式）？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-21T13:20:58.730

不是在未越狱的手机上，不。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-21T13:25:37.627

以编程方式，您可以对一组乐高头脑风暴进行编程，以同时按下顶部按钮和主页按钮，直到它关闭；-)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-21T17:00:53.277

正如已经回答的那样：没有。

一般来说，这些问题的答案很简单。问问自己：“这个功能可以用来干扰 iPhone*作为手机*的操作吗？”

如果答案是肯定的，那么不，你不能这样做。

# apache-flex - Flex 调整 Canvas 的大小在哪里放置这样的代码？（内图）

> ID：892870
> 
> 赞同：0
> 
> 时间：2009-05-21T13:14:26.073
> 
> 标签：apache-flex, actionscript-3, canvas, components, resize

我有两个 Canvas A 和 B，A 是 B 的子级。A 可以通过一些用户操作来调整大小，例如向其基础添加一些 UI 组件。A 由另一个父画布 B 界定，如果其子 A 变得太大，则该画布 B 应显示 scolling 句柄。

我希望 A 具有与 B 相同的宽度和高度（或非常接近），而 A 的计算宽度和高度小于 B 的宽度和高度。

如果 A 的 w 或 h 大于 B 的 w 或 h，则 A 应该增长并且 B 将显示滚动。我希望它有点清楚。

**我的问题是我在哪里以及如何做这样的逻辑？**

[画布图 http://www.picimg.com/uploads/18cd2277adde7d50da2bc708075f4fac.png](http://www.picimg.com/uploads/18cd2277adde7d50da2bc708075f4fac.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T13:31:17.977

Canvas 继承的 UIComponent 类具有 minHeight 和 minWidth 属性。您可以将 A 的 minHeight/Width 绑定到 B 的宽度和高度，因此每当调整 B 的大小时，A 的最小尺寸也会发生变化。还支持绑定到表达式（参见下面的示例）。当 A 变得太大而无法一次全部显示时，B 将自动显示滚动条，您只需要提供固定的高度和宽度（或其他一些尺寸限制）。添加子项后，A 也会自动调整大小。

```
<mx:Canvas id="B" width="..." height="...">
    <mx:Canvas id="A" minHeight="{B.height-20}" minWidth="{B.width-20}">
        <!-- your content widgets -->
    </mx:Canvas>
</mx:Canvas> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T13:27:28.077

您只需将 B 上的滚动策略设置为自动。这样，如果 A get 太大，B 就会有滚动条。这应该在 MXML 中完成。

```
<mx:Canvas name="B" width=100 height=100 scrollPolicy="auto">
    <mx:Canvas name="A" width=90 height=90>
        ...
    </mx:Canvas>
</mx:Canvas> 
```

# ajaxcontroltoolkit - Ajax Control Toolkit MaskedEdit Extender的高级使用

> ID：892875
> 
> 赞同：0
> 
> 时间：2009-05-21T13:16:06.087
> 
> 标签：ajaxcontroltoolkit, maskededitextender

如何使用 Ajax Control Toolkit MaskedEdit 扩展器实现以下目标？

字母 + 任意数量的数字字符，例如 Z234、Z235、Z24 等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T13:25:24.603

看来[这可能是不可能的](http://forums.asp.net/t/1338427.aspx)......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-30T18:48:50.200

mask="A999" 不工作吗？如果它始终采用 Z[number][number][number] 格式……试试 mask="Z999"。

# flash - 无论如何在浏览器中赋予 Flash 焦点而不需要用户单击它？

> ID：892879
> 
> 赞同：3
> 
> 时间：2009-05-21T13:16:44.527
> 
> 标签：flash, focus

我有一个 Flash (flex) Web 应用程序，当它第一次加载时，光标在用户名字段中闪烁。但是，您无法开始输入，因为 Flash 没有焦点。您必须先单击 Flash 应用程序。无论如何让Flash专注于负载？这是在 html 中还是在 flash 中？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T13:38:36.917

你应该使用Javascript。这是官方的操作方法：http: [//kb2.adobe.com/cps/155/tn_15586.html](http://kb2.adobe.com/cps/155/tn_15586.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T08:09:19.253

注释中描述的 Zilupe 链接的方法仅适用于 Windows IE，可能还不够好。

我自己没有尝试过，对于页面上的评论，它似乎不可靠，但请查看：[Firefox Focus and Actual Links](http://blogs.adobe.com/accessibility/2009/04/firefox_focus_and_actual_links_1.html)。

这是一个非常烦人的问题，它有效地扼杀了您在 Flash 应用程序中所做的任何可访问性工作。使用非 IE 浏览器的盲人用户将无法使用您的应用程序，因为他们根本无法单击它来获得焦点。

上次我调查这个问题时，我发现一些 FF 开发人员的评论说这实际上是 Mozilla 的错（抱歉，丢失了链接）但老实说我不在乎。Adobe 应该追赶 Mozilla 并努力解决这个问题，这符合 Adob​​e 的利益。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-04-01T20:03:58.807

查看 SWFObject。出于安全原因，FLASH 永远不会自动对焦 - 否则窃取键盘输入将是一件轻而易举的事。

# php - PHP中的Flex输入和输出

> ID：892897
> 
> 赞同：0
> 
> 时间：2009-05-21T13:21:00.943
> 
> 标签：php, apache-flex

我想将 flex 中的输入值打印到 PHP。

**我的弹性代码...**

```
<mx:HTTPService id="sendReq" result="google(event)" showBusyCursor="true" method="POST" url="http://localhost/search/index.php" useProxy="false">
        <mx:request xmlns="">
            <keyword>
                {keyword.text}
            </keyword>
        </mx:request>
    </mx:HTTPService>

    <mx:TextInput text="" id="keyword" left="130.5" top="89" right="228.5" height="40" fontSize="20" fontWeight="bold" borderStyle="outset" focusThickness="0"/>

    <mx:Button click="sendReq.send();" id="search" label="search"  right="133.5" top="91" height="40" width="75" alpha="1.0" fillAlphas="[1.0, 1.0]"/> 
```

**我的PHP代码，**

```
$keyword = $_POST['keyword'];
echo $keyword; 
```

但我无法从 Flex 接收关键字。任何人都可以在这里找到我无法得到的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T13:30:01.520

你试过使用 FireBug 吗？它是一个 Firefox 扩展，可以准确地向您展示 flex 客户端和服务器之间的连接发生了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T17:21:14.750

我没有时间解决这个问题，但这里有一些调试它的建议：

首先，我将跟踪您的 HTTPRequest 的开始标记中的所有内容。

```
<mx:HTTPService id             = "sendReq" 
                result         = "trace( event )" 
                fault          = "trace( event )" 
                showBusyCursor = "true" 
                method         = "POST" 
                url            = "http://localhost/search/index.php"
                useProxy       = "false"> 
```

如果您的请求有问题，您绝对无法知道——您的请求没有错误处理程序！

在 PHP 方面，调试这样的应用程序的最佳方法是使用一些日志记录系统。

这是一个非常通用的日志记录功能：

```
define( 'PATH_TO_LOG_FOLDER', "../Logs" );

public function log( $message ){
    $logFileName = "log";
    if(!$fp = @fopen(PATH_TO_LOG_FOLDER. DIRECTORY_SEPARATOR . 
             $logFileName .date('Y-m-d').".log", 'a+')){
        return FALSE;
    }

    flock(  $fp, LOCK_EX  );    
    fwrite( $fp, $message );
    flock(  $fp, LOCK_UN  );
    fclose( $fp );
} 
```

在[http://localhost/search/index.php](http://localhost/search/index.php)调用

```
$message = "";
for( $_REQUEST as $key => $val )
{
    $message .= "$key = $val\n";
}
log( $message ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T13:38:52.080

检查您的请求是否到达您的 php 脚本（即在脚本开始时记录一个字符串）。要查看脚本的内容：

```
print_r(getallheaders());
print_r($HTTP_RAW_POST_DATA);
print_r($_POST); 
```

抱歉，对 flex 无能为力 :(。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T13:45:47.790

我将首先编写一个接受输入的 php 脚本，然后通过电子邮件发送给您或将日志记录到文件中，以确保您的事务的发送部分正常工作；然后，一旦您确定它可以正常工作，请继续验证是否返回了预期的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-22T11:24:08.783

过去当我使用httpservice时，我没有设置方法参数（默认是'get'）

所以我用过类似的东西

```
<mx:HTTPService id="myCall" 
    url="{'somephp.php'}"
    result="resultHandler(event)" 
    fault="faultHandler(event)"
    showBusyCursor="false" 
    resultFormat="e4x"> 
    <mx:request>
        <somethingToSend>post data inside here</somethingToSend>
        <time>{new Date().getTime()}</time>
    </mx:request>
</mx:HTTPService> 
```

然后在我的php里面

$someVarThatsjustComeThrough = $_REQUEST["somethingToSend"];

如果您使用 php 回显任何内容，请以 XML 格式回显。这将使您在弹性方面的工作更容易处理。

始终投入时间，它会阻止 IE 潜在地缓存 php 调用。

# f# - 你如何在 F# 中定义货币类型

> ID：892899
> 
> 赞同：6
> 
> 时间：2009-05-21T13:21:32.333
> 
> 标签：f#, types

您能否建议在 F# 中定义货币类型的最佳方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-21T13:47:54.870

永远，永远，使用 System.Decimal 来存储财务数据！（除非您不关心不准确性和舍入错误！） [https://docs.microsoft.com/dotnet/api/system.decimal](https://docs.microsoft.com/dotnet/api/system.decimal)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-21T14:04:20.513

输入钱= int `<dollars>`？

甚至没有尝试过看看......你可以定义任意单位，还是它只适用于明确定义的单位？

显然你可能想要

输入money = int `<thousandths_of_currency>` （或几十便士，或其他）。

为了更准确。

编辑：

小数采用类型，因此您可以将货币定义为：

```
[<Measure>]

type = pounds

type money = decimal<pounds> 
```

这可以确保货币不会意外交叉转换，例如：

如果

```
balance = decimal<pounds> 
```

和

```
payment = decimal<dollars>

newbalance = balance + payment 
```

将无法编译，您必须将付款转换为`decimal<pounds>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-07-07T17:31:38.837

[Luca Bolognese 建议](http://blogs.msdn.com/lucabol/archive/2008/08/29/downloading-stock-prices-in-f-part-i-data-modeling.aspx)根据浮动定义自己的 Money 类型：

```
[<Measure>] type money
let money (f:float) = f * 1.<money> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-10-30T19:47:06.097

F# 现在内置了对**Measures 和Units**的支持。根据该功能的首席工程师 Kennedy 的说法，它的目标是**金融**应用程序以及其他解决方案。

所以在用 F# 定义我自己的货币类型之前，我会先看看这个。

维尔纳

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-21T13:26:54.800

使用长的，并在其中存储便士（或十分之一便士）。

你可以使用像 Decimal 这样的类，但通常最终[会很慢](https://stackoverflow.com/questions/366852/c-decimal-datatype-performance)。

# sql - SQL Server 版本更新表

> ID：892903
> 
> 赞同：0
> 
> 时间：2009-05-21T13:22:49.257
> 
> 标签：sql, sql-server, database, sql-server-2008

我是一家软件开发公司的一员，正在寻找一种在发布新版本软件时更新我的​​ SQL Server 表的好方法。我知道答案可能是以一种或另一种形式使用脚本。

我正在考虑编写自己的 .NET 程序来运行脚本，以使其更容易和用户友好。我想知道这些方面是否有任何工具。任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T13:57:27.203

建议你看看 Red_gate 的 SQlCompare

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T13:57:53.973

您使用哪种产品来安装软件？像 InstallShield 这样的产品现在通常包含 SQL 步骤作为安装脚本的一个选项。

否则，您可以考虑使用 isql/osql 通过批处理文件从命令行运行脚本。

我目前正在咨询的一位开发人员编写了一个相当漂亮的 SQL 安装程序。我会问他什么时候进去，他是怎么做的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T14:06:13.723

我一直在使用 Red Gate 的 SQL Compare。此外，您需要确保提供回滚脚本，以防您需要返回到以前的版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-22T10:10:44.030

看看[DB Ghost Packager Plus](http://www.innovartis.co.uk/products/packagerplus.aspx)。

将您的源数据库和比较和同步引擎打包到一个简单的 EXE 中进行部署。安装程序 EXE 将在安装时自动更新任何目标模式以匹配源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-08-26T14:12:18.550

Red Gate 的 SQL Compare 可生成更改脚本，Red Gate 的 Multi Script 可轻松将其同时发送到多个 SQL 数据库。

# iphone - 更改 iPhone 导航栏的高度

> ID：892905
> 
> 赞同：5
> 
> 时间：2009-05-21T13:22:56.947
> 
> 标签：iphone, uinavigationbar

我的客户端无法读取 iPhone 的默认字体，尺寸太小。我有一个带有导航栏的应用程序，我需要将其中的所有内容都放大，例如字体大小。

IB似乎不允许这样做……有什么帮助吗？

非常感谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-21T14:11:18.987

更新：今天（2012 年）自定义 UI 的趋势要大得多，所以我想说下面的答案太苛刻了。但是，仍然没有支持自定义高度的方法，但是您当然可以从 UINavigationBar 派生并覆盖一些调整大小的方法。这可能*不会*让你被拒绝（尽管它仍然是一个灰色区域，只是苹果今天可能会忽略的东西）。

获得所需大小后，您可以使用 iOS 5 自定义 API 添加自定义背景图像（请参阅 WWDC 2011 Session 114 - Customizing the Appearance of UIKit Controls）。

*2009年的原始答案：*

> 这通常是不可能的。
> 
> 更重要的是，我认为让导航栏更高是违反 Apple Human Interface Guidelines 的，你的应用程序可能会因此而被 App Store 拒绝。请确保您的客户在继续之前了解此风险。
> 
> （指出拒绝风险通常是说服客户不要做出无意义决定的好方法。）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-12-15T12:03:09.467

这里的许多答案都不正确或不完整，所以我想在这里添加我的答案，希望它可以启发一些人。

首先，改变导航栏的高度并没有错。评论说它不允许或违反准则的人只是误解了这些准则。

自 iOS 5 以来，调整或更改 UINavigationController 内使用的默认导航栏的功能已成为 SDK 的一部分。

```
- (instancetype)initWithNavigationBarClass:(Class)navigationBarClass toolbarClass:(Class)toolbarClass NS_AVAILABLE_IOS(5_0); 
```

更改状态栏高度的最简单方法是在初始化导航控制器时使用此方法，传入您的自定义 UINavigationBar 子类。

```
TestViewController *t = [[TestViewController alloc] init];
UINavigationController *nav = [[UINavigationController alloc] initWithNavigationBarClass:[MyNavigationBar class] toolbarClass:[UIToolbar class]];
[nav setViewControllers:@[t]];  
[self.window setRootViewController:nav];
[self.window makeKeyAndVisible]; 
```

这种自定义 UINavigationBar 类的示例可能如下所示：

```
@interface MyNavigationBar : UINavigationBar
@end

@implementation MyNavigationBar

- (CGSize)sizeThatFits:(CGSize)size
{
        CGSize s = [super sizeThatFits:size];
        s.height = 90; // Or some other height
        return s;
}

@end 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-07-21T20:01:47.020

如果您决定只更改导航栏中的字体大小，您可以这样做（通常在您`UIViewController`的`viewDidLoad`方法中）：

```
UILabel *titleLabel = [[UILabel alloc] initWithFrame:CGRectZero];

[titleLabel setBackgroundColor:[UIColor clearColor]];
// here's where you can customize the font size
[titleLabel setFont:[UIFont boldSystemFontOfSize:18.0]];
[titleLabel setTextColor:[UIColor whiteColor]];
[titleLabel setText:self.title];
[titleLabel sizeToFit];
[titleLabel setCenter:[self.navigationItem.titleView center]];

[self.navigationItem setTitleView:titleLabel];

[titleLabel release]; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-03-21T07:55:44.543

通过子类化，您可以实现**并且仍然支持 iOS 3+**：

## 完整示例：

```
#import <UIKit/UIKit.h>

@interface ASNavigationBar : UINavigationBar
@property (nonatomic , retain) UIImage *backgroundImage;
@end 
```

和实施：

```
#import "ASNavigationBar.h"

@implementation ASNavigationBar
@synthesize backgroundImage = _backgroundImage;

-(void) setBackgroundImage:(UIImage *)backgroundImage
{
    if (_backgroundImage != backgroundImage)
    {
        [_backgroundImage release];
        _backgroundImage = [backgroundImage retain];
        [self setNeedsDisplay];
    }
}

-(void) drawRect:(CGRect)rect
{
    // This is how the custom BG image is actually drawn
    [self.backgroundImage drawInRect:rect];
}

- (CGSize)sizeThatFits:(CGSize)size 
{
    // This is how you set the custom size of your UINavigationBar
    CGRect frame = [UIScreen mainScreen].applicationFrame;
    CGSize newSize = CGSizeMake(frame.size.width , self.backgroundImage.size.height);
    return newSize;
}
@end 
```

## 重要笔记：

1.  如果背景图片带有透明区域，则必须将其 barStyle 属性设置为“半透明”，否则透明区域将为黑色。
2.  如果 NavigationBar 的高度超过 44 磅，则必须考虑 BarButtonItems 的位置可能不正确。它们都将固定在栏的底部。您可以通过覆盖 layoutSubviews 并更改它们的 origin.y 值来解决此问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-16T07:29:33.573

您不应更改导航栏的高度。来自 Apple Programming Guide on View Controller：

自定义导航栏外观

在导航界面中，导航控制器拥有它的 UINavigationBar 对象并负责管理它。不允许更改导航栏对象或直接修改其边界、框架或 alpha 值。但是，允许修改一些属性，包括：

● barStyle 属性

● 透光性

● tintColor 属性

（取自苹果：[https](https://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/NavigationControllers.html) ://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/NavigationControllers.html ）

更新——IOS 7——仍然只能更改可用的属性，但下面是关于如何在导航栏中实现灵活性的精彩教程[http://www.appcoda.com/customize-navigation-status-bar-ios -7/](http://www.appcoda.com/customize-navigation-status-bar-ios-7/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-17T09:39:17.587

要添加到 Skela 的答案：

如果您在情节提要中启动导航控制器，则可以将情节提要中 UINavigationBar 的类更改为自定义导航栏。

[![在此处输入图像描述](https://i.stack.imgur.com/sL9tg.png)](https://i.stack.imgur.com/sL9tg.png)

[![在此处输入图像描述](https://i.stack.imgur.com/clH7p.png)](https://i.stack.imgur.com/clH7p.png)

然后在类中实现改变高度

```
@interface MyNavigationBar : UINavigationBar
@end

@implementation SwitchAssessmentNavigationBar

- (CGSize)sizeThatFits:(CGSize)size
{
        CGSize s = [super sizeThatFits:size];
        s.height = 200; // Or some other height
        return s;
}

@end 
```

# asp.net - 用于 ASP.NET 的 Windows 身份验证和表单身份验证一起使用

> ID：892911
> 
> 赞同：4
> 
> 时间：2009-05-21T13:24:31.797
> 
> 标签：asp.net, authentication, iis-6, forms-authentication, windows-authentication

我正在开发一个面向内部的应用程序，它需要通过 Windows 身份验证自动对用户进行身份验证并回退到表单身份验证。在计算机上的用户作为组帐户（例如运营中心）登录的情况下会发生回退。我担心用户可能“欺骗”Windows 身份验证帐户的安全性。你们中的任何人都知道适合这种特定场景的设计模式和实用理念吗？

技术限制： IIS 6 上的 .NET 3.5（IIS 7 目前在我们的环境中还不能启动）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T14:43:22.900

[这里](http://msdn.microsoft.com/en-us/library/ms972958.aspx)有一篇关于 MSDN 的旧文章，其中涉及在 IIS 中设置的自定义 401 重定向 - 希望对您有所帮助。

# c# - 从 MS Access OLE 对象列创建图像文件（使用 C# 或 VB.NET）

> ID：892912
> 
> 赞同：1
> 
> 时间：2009-05-21T13:24:54.120
> 
> 标签：c#, vb.net, object, ole

OLE 对象列包含图像，但图像类型 (jpg/gif/tiff) 未知。这些图像需要从数据库中提取并保存到磁盘。该应用程序主要使用 VB.NET，但也欢迎使用 C# 示例。

谢谢拉胡尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T14:06:11.133

尝试使用`System.Drawing.Image.FromStream`加载图像。您可以使用从字节数组制作流`System.IO.MemoryStream foo = new System.IO.MemoryStream(MyByteArray);`

一旦你加载了图像，你可以使用任何你想要保存的 GDI 东西（例如`ImageInstance.Save(FileName);`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-21T16:01:14.443

创建一个足够大的字节数组来保存 OLE 对象：

```
Dim bArr(Len(<OLE Object Field>)) as Byte 
```

读取 OLE 对象列的第一行并将其放入字节数组中。

对于 GIF 文件，字节 0 到 2 将具有 ASCII 值“GIF”。对于 JPEG 文件，字节 6 到 9 通常具有值“JFIF”。对于 PNG 文件，字节 1 到 3 将具有 ASCII 值“PNG”。

TIFF 比较困难，因为有很多不同的 TIFF 标准。

一旦确定了文件类型，就可以使用 Brian 的方法来保存文件

# c# - 我在哪里可以找到解释如何获取 C/C++ 函数头并在 C# 中使用 dllimport 定义它的参考资料？

> ID：892913
> 
> 赞同：0
> 
> 时间：2009-05-21T13:25:02.713
> 
> 标签：c#, dllimport

我正在使用 setupapi.dll 来确定 USB 设备的连接性。它在 64 位版本的 Windows（XP、Vista）中无法正常工作。我怀疑声明不太正确，但不确定如何验证。MS 似乎没有提供 dllimport 信息，但它们确实列出了所有函数定义。有没有我可以用来在函数头和 dllimport 声明之间转换的资源？

我使用过 pinvoke.net，但在提供的定义中，它似乎没有考虑 64 位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T13:28:14.173

您正在寻找的工具称为 C++/CLI。它*旨在*处理这些标头并生成互操作代码 - 无需使用 P/Invoke。

在 C++/CLI 中编写轻量级包装程序集，然后在 C# 代码中使用它。

（很难提供更具体的答案，因为您并没有真正说明它是*如何*无法正常工作的......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T13:36:43.020

查看[pinvoke.net](http://pinvoke.net)。它有一大套 Win32 API 已经翻译成 DllImport 定义（包括 setupapi.dll）。

# java - 对需要在事务中的 DDL 语句进行单元测试

> ID：892923
> 
> 赞同：0
> 
> 时间：2009-05-21T13:26:53.240
> 
> 标签：java, oracle, unit-testing, ddl, dml

我正在开发一个使用 Oracle 内置身份验证机制来管理用户帐户和密码的应用程序。该应用程序还使用行级安全性。基本上，通过应用程序注册的每个用户都会获得一个 Oracle 用户名和密码，而不是“USERS”表中的典型条目。用户还会收到某些表格上的标签。这种类型的功能要求在许多情况下将 DML 和 DDL 语句的执行结合起来，但这会带来一个问题，因为 DDL 语句执行隐式提交。如果在 DDL 语句执行后发生错误，事务管理不会回滚所有内容。例如，当新用户向系统注册时，可能会发生以下情况：

1.  开始交易
2.  将人员详细信息插入表中。（即名字、姓氏等）-DML
3.  创建一个 oracle 帐户（创建由密码标识的用户 testuser；） -DDL 隐式提交。交易结束。
4.  新交易开始。
5.  执行更多 DML 语句（插入、更新等）。
6.  发生错误，事务只回滚到第 4 步。

我了解上述逻辑按设计工作，但我发现很难对此类功能进行单元测试并在数据访问层对其进行管理。我让数据库关闭或在单元测试期间发生错误，导致测试模式被本应回滚的测试数据污染。发生这种情况时擦除测试模式很容易，但我担心生产环境中的数据库故障。我正在寻找管理这个的策略。

这是一个 Java/Spring 应用程序。Spring 提供事务管理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T13:33:52.760

首先我不得不说：这样做是个坏主意。有两个原因：

1.  连接基于用户。这意味着您在很大程度上失去了连接池的好处。它也不能很好地扩展。如果您同时有 10,000 个用户，您将不断打开和关闭硬连接（而不是软连接池）；和
2.  正如您所发现的，创建和删除用户是 DDL 而不是 DML，因此您失去了“事务性”。

不知道你为什么选择这样做，但我**强烈**建议你在应用程序而不是数据库层实现用户。

至于如何解决你的问题，基本上你不能。就像您在序列中间创建表或索引一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T14:46:03.427

您应该将 Oracle 代理身份验证与行级安全性结合使用。

阅读：[http ://www.oracle.com/technology/pub/articles/dikmans-toplink-security.html](http://www.oracle.com/technology/pub/articles/dikmans-toplink-security.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T14:41:42.530

我不同意之前的一些评论，并说使用内置的 Oracle 帐户安全性有很多优点。如果您必须使用某种带有附加信息的用户影子表来扩充它，那么如何将 Oracle 帐户创建包装在一个单独的包中，该包被声明为 PRAGMA AUTONOMOUS_TRANSACTION 并向正在执行插入操作的包返回成功/失败状态影子表？我相信这会将 Oracle 帐户的创建与事务隔离开来。

# assembly - 为什么 x86 寄存器要这样命名？

> ID：892928
> 
> 赞同：25
> 
> 时间：2009-05-21T13:27:28.637
> 
> 标签：assembly, x86, history, naming

例如，累加器被命名为`EAX`and，而指令指针被调用`IP`。我也知道有字节称为`CL`and `DH`。我知道所有名称都必须有一个约定，但它是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-21T13:28:44.253

C 和 D 是数字/类型，H 表示高位，L 表示高位寄存器的低位。 [http://en.wikipedia.org/wiki/X86](http://en.wikipedia.org/wiki/X86)

维基百科解释得很好。

更多来自维基百科：

1.  AX/EAX/RAX：累加器
2.  BX/EBX/RBX：基础
3.  CX/ECX/RCX：计数器
4.  DX/EDX/RDX：数据/一般

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2009-05-21T13:30:04.077

[我发现的东西](http://www.swansontec.com/sregisters.html)

```
* EAX - Accumulator Register
* EBX - Base Register
* ECX - Counter Register
* EDX - Data Register
* ESI - Source Index
* EDI - Destination Index
* EBP - Base Pointer
* ESP - Stack Pointer 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2009-05-21T13:31:28.787

它的历史。x86 来自 8086，8080 来自 8008，8008 来自 4004。有 16 位寄存器 AX、BX 等，对于 80386，它们被“扩展”为 32 位。

补充：顺便说一句，摩托罗拉 68K 从一开始就有 32 位寄存器，所以在最初的几十年里编程要容易得多。我参与的项目选择英特尔是出于商业原因，而不是技术原因。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-21T13:31:44.417

较旧的处理器具有名为 A、B 等的累加器（按字母顺序排列）。在开发 16 位和 32 位累加器时，工程师添加了一个 X（扩展）。所以这都是关于历史的，因为 C 语言是这样称呼的，因为它是从 B 语言（贝尔实验室）发展而来的。

该约定只是内部的，以跟上他们已经熟悉的名称。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-21T13:34:34.693

这里有一些很好的答案：[x86 汇编寄存器——为什么它们的工作方式是这样的？](https://stackoverflow.com/questions/228200/x86-assembly-registers-why-do-they-work-the-way-they-do)

# javascript - jQuery - 自定义库 - 适用于 FF、Chrome、Safari 和 IE8，但不适用于 IE7 - 指针？

> ID：892929
> 
> 赞同：0
> 
> 时间：2009-05-21T13:27:49.510
> 
> 标签：javascript, jquery, debugging, internet-explorer-7

我真的对以下内容感到困惑。

在 FF/Chrome 等中创建图库时，单击下一步将图像移到一个上，并且悬停状态保持供您再次单击。在 IE7 中，图像移动到一个，然后悬停状态失败，并且不会重新出现。我在页面上的其他效果继续起作用。

我的 jQuery 可能不是最好的，所以我为混乱道歉。除了手头的问题，欢迎任何一般的 jQuery 指针。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtm11-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >
<head>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
    <meta name="author" content="" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="robots" content="all" />

    <title>GA - 2009 yee haw</title>
    <script type="text/javascript"></script>
    <script type="text/javascript" src="/js/jquery-1.3.2.min.js"></script>
    <script type="text/javascript" src="/js/jquery.dimensions.min.js"></script>
    <script type="text/javascript" src="/js/jquery.easing.1.3.js"></script>
    <style type="text/css" media="all">
        @import "/css/screen.css";
    </style>
</head>

<body>

            <script type="text/javascript">
                <!--//
                function DrawGalleryOptions(div) {

                    $('gallery').css({width: '503px'});
                    $(div).append('<div class="gallery-title"><p style="font-size:14px;">no title</p><div class="gallery-bg gallery-bg-small"></div></div>');
                    $(div).append('<div class="gallery-nav"></div>');
                    $('.gallery-nav').append('<div class="gallery-bg"></div><div class="gallery-controls"><p class="gall-title"><a class="gallleft" href="#galleryleft" title="">Previous Image</a><a class="gallright" href="#galleryright" title="">Next Image</a></p></div>');

                    $('.gallery-title, .gallery-nav, .gallery-bg').css({ position: 'absolute', left: '0px', height: '30px', width: '503px' });
                    $('.gallery-nav').css({ height: '60px', bottom: '-60px' });
                    $('.gallery-bg').css({ backgroundColor: '#5974c5', opacity: 0.7, height: '60px', zIndex: 1000 });
                    $('.gallery-title').css({ top: '-30px'});
                    $('.gallery-controls').css({ position: 'absolute', zIndex: 1002 });
                    $('.gallery-bg-small').css({height: '30px'});
                    $('.gallery-title p').css({zIndex: 1002, color: '#ffffff', position: 'absolute', padding: '5px'});
                    $('.gallery-controls p').css({ posistion: 'absolute', zIndex: 1005, left: '0px', top: '0px' });
                    $('a.gallleft').css({ width: '82px', height: '45px', display: 'block', textIndent: '0', backgroundImage: 'url(/image/galleryleft.gif)', backgroundPosition: 'left top', backgroundRepeat: 'no-repeat', fontSize: '11px', color: '#ffffff', top: '15px', left: '15px', position: 'absolute', paddingTop: '25px' });
                    $('a.gallright').css({ width: '53px', height: '45px', display: 'block', textIndent: '0', backgroundImage: 'url(/image/galleryright.gif)', backgroundPosition: 'right top', backgroundRepeat: 'no-repeat', fontSize: '11px', color: '#ffffff', top: '15px', left: '430px', position: 'absolute', paddingTop: '25px' });
                }

                function ShowGalleryOptions() {

                    jQuery.easing.def = "easeOutQuint";
                    $('.gallery-title').animate({ top: '0px' }, 800);
                    $('.gallery-nav').animate({ bottom: '0px' }, 800);

                }

                function HideGalleryOptions() {

                    $('.gallery-title').animate({ top: '-30px' }, 800);
                    $('.gallery-nav').animate({ bottom: '-60px' }, 800);

                }

                function StopAll() {

                    $('.gallery-title').stop();
                    $('.gallery-nav').stop();

                }

                function MoveGallery(pic) {

                    $('#test2').html('>> <br />' + pic[_GalleryCurrent].src + " " + pic[_GalleryCurrent].height + " " + pic[_GalleryCurrent].width + "<br />Current: " + _GalleryCurrent);

                    $('.gallery').append('<img id="gallery-current" style="display:none;" src="' + pic[_GalleryCurrent].src + '" width="' + pic[_GalleryCurrent].width + '" height="' + pic[_GalleryCurrent].height + '" alt="' + pic[_GalleryCurrent].alt + '" />');
                    $('#gallery-current').css({ opacity: 0, display: 'block' });
                    $('.gallery img').css({ position: 'absolute', top: '0px', left: '0px' });
                    //jQuery.easing.def = "easeOutElastic";

                    $('.gallery-title p').html(pic[_GalleryCurrent].alt);

                    $('#gallery-current').animate({ opacity: 1 }, 1200, function() {

                        $('#gallery-last').remove();
                        $('#gallery-current').attr('id', 'gallery-last');

                    });

                }

                $(function() {

                    var pic;
                    pic = $(".gallery").children("img");
                    _GalleryMax = pic.length - 1;
                    _GalleryCurrent = 0;

                    //$('#test2').html('>><br />' + pic[_].src + " " + pic[0].height + " " + pic[0].width + "<br />Current: " + _GalleryCurrent);

                    $('.gallery').css({ height: 283, overflow: 'hidden', position: 'relative' });
                    $('.gallery').html('');

                    DrawGalleryOptions('.gallery');

                    $('.gallery').append('<img id="gallery-last" src="' + pic[_GalleryCurrent].src + '" width="' + pic[_GalleryCurrent].width + '" height="' + pic[_GalleryCurrent].height + '" alt="' + pic[_GalleryCurrent].alt + '" />');
                    $('.gallery-title p').html(pic[_GalleryCurrent].alt);

                    $('.gallery').hover(function() {

                        //alert('on');
                        StopAll();
                        ShowGalleryOptions();

                    },
                    function() {

                        //alert('off');
                        StopAll();
                        HideGalleryOptions();

                    });

                    $('a.gallright').click(function() {

                        $('#gallery-current').stop(false, true);

                        //alert('boota');
                        _GalleryCurrent = _GalleryCurrent + 1;
                        if (_GalleryCurrent > _GalleryMax) {
                            _GalleryCurrent = 0;
                        }

                        MoveGallery(pic);

                    });

                    $('a.gallleft').click(function() {

                        $('#gallery-current').stop(false, true);

                        //alert('boota');
                        _GalleryCurrent = _GalleryCurrent - 1;
                        if (_GalleryCurrent < 0) {
                            _GalleryCurrent = _GalleryMax;
                        }

                        MoveGallery(pic);

                    });

                });

                //-->

            </script>

            <div class="gallery">

                <img class="gall-img" src="/image/gallery1.jpg" width="503" height="283" alt="Person on a lake" />
                <img class="gall-img" src="/image/gallery2.jpg" width="503" height="283" alt="Building university" />
                <img class="gall-img" src="/image/gallery3.jpg" width="503" height="283" alt="Random colours" />
                <img class="gall-img" src="/image/gallery4.jpg" width="503" height="283" alt="Abstract - dark blue?" />
                <img class="gall-img" src="/image/gallery5.jpg" width="503" height="283" alt="Random abstract" />

            </div>

            <div id="test2" style="font-size:18px;"></div>

</body>
</html> 
```

非常感谢任何帮助！

编辑#1：除上述内容外，我读到 IE7 的 img 选择器存在问题，但我尝试将其更改为通用类名等，但无济于事。还有更多线索吗？

编辑＃2：我仍在为此苦苦挣扎-我在这里添加了一个实时示例：（似乎太新而无法添加链接，抱歉！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-23T16:49:44.313

我建议在可公开访问的服务器上放置一个测试页面，以供其他人使用 IE7 在我们自己的环境中实时查看。

这将使我们能够更快地看到正在发生的事情，并帮助理解和诊断行为。

我可以 c&p 你的代码，但我仍然需要找到图片等来检查它。

在此之前，请查看适用于 IE 的 Firebug Lite：http: [//getfirebug.com/lite.html](http://getfirebug.com/lite.html)并仅包含以下内容：

```
<script src="http://getfirebug.com/releases/lite/1.2/firebug-lite-compressed.js"></script> 
```

我猜想 b/c 它可以在其他浏览器中使用，并且您使用的 jQuery 已经很好地规范化了，这可能是 CSS 问题，但是在我看到示例页面之前，它只是一个快速的猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T21:58:37.783

多次播放后修复了该问题。正如基思所说，这只是一个 CSS 错误。

IE7 需要一点提醒一些元素的 zindex 级别，所以我插入了以下内容

```
$('.gallery-nav, .gallery-title').css({ position: 'absolute', left: '0px', zIndex: '1100' }); // random reassignement of gallery zIndex, because IE7 doesn't behave 
```

在移动画廊功能内部（就在动画之前）。

喜悦！

# emacs - EmacsW32 使用旧的 Windows 缩短文件名重命名缓冲区

> ID：892934
> 
> 赞同：1
> 
> 时间：2009-05-21T13:28:46.513
> 
> 标签：emacs, emacsw32

让我们看看我是否可以在 stackoverflow 上联系到 EmacsW32 用户。

我刚刚从[http://ourcomments.org/Emacs/EmacsW32.html安装了 EmacsW32 的补丁版本](http://ourcomments.org/Emacs/EmacsW32.html)

我发现 .txt 文件与 Emacs 相关联非常好，因此当您单击一个文件时，emacsclient 会在 Emacs 的运行实例中打开它。

问题是，由于某种原因，缓冲区被重命名为旧式缩短文件名，因此，例如，文件“activities-2008.txt”的缓冲区被重命名为“ACTIV~1.TXT”，我不这样做不喜欢。

如何让 EmacsW32 不重命名缓冲区，而是使用整个文件名作为缓冲区名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T14:11:47.503

艾克，太糟糕了。

[为什么不直接使用标准Windows emacs 发行版](http://ftp.gnu.org/gnu/emacs/windows/)附带的 emacsclientw呢？

它确实有一个问题，如果 Emacs 尚未运行，您会收到一个烦人的“无错误”错误框，但任何真正的 emacs 用户在登录时都会首先启动 emacs。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T19:53:46.063

解决了。

问题不在于 emacs，而在于在注册表中关联文件类型时 Windows 运行程序的方式。

在我的注册表中，我为将 txt 文件与 Emacs 相关联的键设置了以下值：

```
C:\emacs-23.0.91.1\Emacs\bin\emacsclientw.exe -n "%1" 
```

问题是 %1，它被一个短文件名替换。

根据此消息[http://lists.gnu.org/archive/html/help-emacs-windows/2009-05/msg00022.html](http://lists.gnu.org/archive/html/help-emacs-windows/2009-05/msg00022.html)：

```
 %L is long file names.

 %1 is long file names IF
 * Explorer can find the exe file (it does not look very hard)
 AND
 * The file header says it is Win 95 aware Win16 exe, or
 * It is a 32 bit program

 Else %1 will be a short name. 
```

解决方案是在 reg 键中使用**%L**代替**%1 。**

# visual-studio - 如何告诉 Visual Studio 我的代码不在 App_Code 文件夹中？

> ID：892935
> 
> 赞同：0
> 
> 时间：2009-05-21T13:28:55.017
> 
> 标签：visual-studio

我们一直在将 Visual Studio 2005 Team Suite 用于一个相当大的 Web 项目。现在，我们正在将另一个 Web 应用程序添加到我们当前的项目中......它基本上是完整的，我们只是将整个东西作为一个文件夹添加到我们当前的项目中。项目构建、运行……一切都很好……但是这个新的子项目没有任何类型的 Intellisense 可以识别我们为此子项目创建的类。

我认为这可能是因为该项目的代码不在 App_Code 文件夹中，因此 Visual Studio 不知道在哪里可以找到它。那有意义吗？如果是这样，我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T13:40:51.637

据我所知，事情就是这样。出于某种原因，2005 年 Web 应用程序的默认模板就是这样做的。如果你只需要一些小东西，让不在 App_Code 中的类实现一个接口，然后当你与驻留在 App_Code 之外的代码交互时使用它（无论出于何种原因）。

否则，您可以选择使用不同的项目模型（2005 不附带，因此需要单独安装，转换可能很重要）： [http ://webproject.scottgu.com/CSharp/Migration2/Migration2 .aspx](http://webproject.scottgu.com/CSharp/Migration2/Migration2.aspx)

# javascript - Facebook Connect 对话框不会自动关闭

> ID：892942
> 
> 赞同：1
> 
> 时间：2009-05-21T13:30:28.633
> 
> 标签：javascript, facebook

我已经将 Facebook Connect 实现到 HTML 页面中，正如教程在此处解释的那样

[http://wiki.developers.facebook.com/index.php/Trying_Out_Facebook_Connect](http://wiki.developers.facebook.com/index.php/Trying_Out_Facebook_Connect)

但是，当用户使用 Facebook 对话框登录后，对话框不会关闭，只是在对话框中显示我的网页？

有没有人遇到过同样的问题并且知道我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T13:44:54.360

您的 xd_receiver.html 文件是否存在并位于正确的位置，如 FB.init 调用中所指定的那样？我想我记得当我的 xd_receiver.html 文件的相对 URL 错误时遇到了这样的奇怪问题，因此浏览器没有找到它。

# .net - 是否有 .NET 3.0 到 4.0 BCL 增量的简明列表？

> ID：892943
> 
> 赞同：8
> 
> 时间：2009-05-21T13:30:40.690
> 
> 标签：.net

有没有人知道或有 .NET 4.0 中的 BCL 如何从 3.0 更改的详细列表？换句话说，添加或弃用了哪些类型（或者它们是如何改变的）？

我所能找到的只是新功能的列表，例如 Wikipedia[文章](http://en.wikipedia.org/wiki/C_Sharp_(programming_language)#Features_of_C.23_4.0)、任何关于它的无穷无尽的 MSDN 博客条目，或者关于 SO（[#1](https://stackoverflow.com/questions/888893/whats-new-in-c-4-for-a-static-typed-guy)、[#2](https://stackoverflow.com/questions/237041/confirmed-features-of-net-4-0)）的一些问题。了解这些很重要，但我也对我们必须使用哪些新类型感兴趣。

在使用 VS2010 Beta 1 时，我注意到一些看起来很有趣的新版本：

1.  [`BigInteger`](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger(VS.100).aspx)
2.  [`Lazy<T>`](http://msdn.microsoft.com/en-us/library/dd642331(VS.100).aspx)
3.  整个[System.Collections.Concurrent](http://msdn.microsoft.com/en-us/library/system.collections.concurrent(VS.100).aspx)命名空间。
4.  添加到线程，例如[并行](http://msdn.microsoft.com/en-us/library/system.threading.parallel(VS.100).aspx)类型和[任务](http://msdn.microsoft.com/en-us/library/system.threading.tasks(VS.100).aspx)命名空间
5.  [图表](http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting(VS.100).aspx)命名空间
6.  ETC...

我知道它仍处于测试阶段，情况可能会发生变化，但我认为现在值得尝试学习所有新课程（不仅仅是大肆宣传的课程）。

我真的不想编写自己的反射和差异工具来生成这个列表，所以我希望这个列表（或生成它的工具）已经存在。

顺便说一句，我已经检查过[Reflector](http://www.red-gate.com/products/reflector/)的[插件](http://www.codeplex.com/reflectoraddins)，而[Diff](http://www.codingsanity.com/diff.htm)插件（虽然很棒）感觉不太对劲。我认为深入了解肮脏的细节会很棒，但仅获取高级增量列表似乎有点过头了。

编辑：

使用 bdukes 答案，我创建了一个 Google Docs[电子表格](http://spreadsheets.google.com/pub?key=rpsf2ykPRSB2lFloARfLPuw)，其中列出了 4.0 Beta 1 中的所有新类型。它还包含指向 MSDN 在线文档的链接（或通用类型的 Google 搜索，因为它们的 URI 不容易自动生成）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-21T13:36:04.220

我怀疑那里还有一个很好的编译列表（正如你所说，它仍然是一个测试版）。

您可能想查看 NDepend 以获得更可控的差异体验（请参阅[Patrick 的一些更改的帖子](http://codebetter.com/blogs/patricksmacchia/archive/2009/05/21/a-quick-analyze-of-the-net-fx-v4-0-beta1.aspx)）。

**更新**：BCL 团队刚刚发布[了一篇关于他们的最新](http://blogs.msdn.com/bclteam/archive/2009/05/22/what-s-new-in-the-bcl-in-net-4-beta-1-justin-van-patten.aspx)消息的博客文章。这包括：

*   代码合同
*   并行扩展
*   `BigInteger`
*   协方差和反方差
*   元组
*   `SortedSet<T>`&`ISet<T>`
*   文件系统枚举改进
*   `MemoryMappedFiles`
*   注册表改进
*   全球化数据更新为 Unicode 5.1
*   `ResourceManager`改进
*   压缩改进

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T13:37:43.000

MSDN 上有一篇文章（虽然不是一个简洁的增量列表）确实介绍了新内容并指向更多阅读内容：http: [//msdn.microsoft.com/en-us/library/dd409230(VS. 100).aspx](http://msdn.microsoft.com/en-us/library/dd409230(VS.100).aspx)（[直接链接到 BCL 部分](http://msdn.microsoft.com/en-us/library/dd409230(VS.100).aspx#base_class_libraries)）

# c# - 将可索引属性与 i4o 库一起使用

> ID：892956
> 
> 赞同：1
> 
> 时间：2009-05-21T13:34:26.143
> 
> 标签：c#, .net, indexing, clr

我想使用 [Indexable()] 属性在类上定义一些属性，以便将类与 i4o 库 ( [http://www.codeplex.com/i4o](http://www.codeplex.com/i4o) ) 一起使用，但是当我尝试编译代码时 Visual Studio说它找不到可索引的命名空间。

这是 CLR 的一部分吗？我需要哪个命名空间/库来编译它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-21T13:46:53.170

它不是标准框架的一部分。您将需要确定包含此 IndexableAttribute 的程序集并在您的项目中引用它。

它位于哪里？我不知道。谁告诉你你需要这样做？是i4o吗？如果是这样，它可能在 i4o 项目附带的二进制文件之一中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-21T13:49:21.357

[Indexable()] 不是 .NET Framework 中包含的属性。它已从 i4o 中删除，以支持其他方法。有关如何使用它的详细信息，请参阅[此博客文章。](http://staxmanade.blogspot.com/2008/12/i4o-indexspecification-for.html)

# vbscript - 如何使用 VBScript 从 LDAP 获取 Active Directory 拨入权限设置？

> ID：892958
> 
> 赞同：1
> 
> 时间：2009-05-21T13:34:52.103
> 
> 标签：vbscript, active-directory, permissions, ldap

在 Active Directory 中，有一个名为“Dial-In”的选项卡，在该选项卡下是一个具有三个设置的单选按钮控件：

```
Allow Access
Deny Access
Control access through remote access policy 
```

我想编写一个 VBScript 来获取用户名，并返回该用户的设置。（我实际上是在修改现有的 VBScript，这就是我被迫使用该工具的原因）。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T13:37:21.333

这是我能想到的最佳解决方案。很容易修改它以输出所有用户的设置。

```
Main

Function Main
  'Usage: cscript /nologo lookup.vbs mydomain username
  Wscript.Echo CanDialIn(Wscript.Arguments(0), Wscript.Arguments(1))
  Main = 0
End Function

Function CanDialIn(domainname, username)
  'Take a user name and query whether they have permission to Dial in or not
  'http://www.microsoft.com/technet/scriptcenter/resources/qanda/aug05/hey0825.mspx
  Const ADS_SCOPE_SUBTREE = 2
  Dim objConnection
  Dim objCommand
  Dim objRecordSet

  Set objConnection = CreateObject("ADODB.Connection")
  Set objCommand =   CreateObject("ADODB.Command")
  objConnection.Provider = "ADsDSOObject"
  objConnection.Open "Active Directory Provider"
  Set objCommand.ActiveConnection = objConnection

  objCommand.Properties("Page Size") = 1000
  objCommand.Properties("Searchscope") = ADS_SCOPE_SUBTREE 

  'Three possible values for msNPAllowDialin:
  'TRUE = "Allow Access"
  'FALSE = "Deny Access"
  'EMPTY = "Control access through remote access policy"
  objCommand.CommandText = _
    "SELECT msNPAllowDialin FROM 'LDAP://dc=" & domainname & ",dc=com' WHERE objectCategory='user' AND sAMAccountName = '" & username & "'"
  On Error Resume Next
  Set objRecordSet = objCommand.Execute
  if objRecordSet.EOF then
    CanDialIn = "Could not find user " & username
  else
    if objRecordSet.Fields("msNPAllowDialin").Value = True then
      CanDialIn = "Allow"
    else
      if objRecordSet.Fields("msNPAllowDialin").Value = False then
        CanDialIn = "Deny"
      else
        CanDialIn = "Control"
      end if
    end if  
  end if
End Function 
```

# api - 有没有办法（API/脚本）与 Virtual PC 一起工作？

> ID：892978
> 
> 赞同：1
> 
> 时间：2009-05-21T13:41:12.200
> 
> 标签：api, virtual-pc

有没有办法与 Virtual PC ¹交互？

希望做一些基本的事情，比如启动和关闭（选择保存或关闭等）特定的虚拟机。

例如，除了模拟按键之外的任何解决方案都可以

*   WMI
*   COM+
*   ADSI
*   电源外壳

1 - 专门用于 Microsoft Virtual PC 中的 Virtual PC（即在 Vista 和更早版本上运行的虚拟 PC），而不是 Windows Virtual PC（即 Win7 中的 PC）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-11-05T17:59:32.217

这不是您所追求的，但您可以在 Virtual PC.exe 上使用一整套命令行参数来启动和暂停 VM，以及设置屏幕模式和禁用/启用各种选项。

您可以在这篇[MS KB 831501 文章](http://support.microsoft.com/kb/831501)中找到它们。

> “虚拟 PC.exe” [-singlepc] [-quiet] [-usehostdiskcache] [-pc virtual_machine_name [-disableclose] [-disableopt] [-s3bitclip] [-setbiosno bios_serial_number] [-setassettagasset_tag] [-extnetworking] [-启动] [{-fullscreen|-window}] [-geometry widthxheight{+|​​-}x offset{+|-}y offset] [{-minimize|-restore}] [{-pause|-resume}]] [ -help] [-registervm 文件名.vmc] [-startvm 文件名.vmc]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T14:14:15.610

唉，不，请参阅[http://www.aspdeveloper.net/Virtual_PC/rn-739-16434_Virtual_PC_API.aspx](http://www.aspdeveloper.net/Virtual_PC/rn-739-16434_Virtual_PC_API.aspx)。

# ios - 如何将子视图置于 iOS 上的滚动视图之上？

> ID：892983
> 
> 赞同：0
> 
> 时间：2009-05-21T13:42:13.647
> 
> 标签：ios

在 iOS 开发中，我想在基于视图的应用程序中添加一个子视图。我在上面有滚动视图，上面有包含标签的视图，我使用 Interface Builder 来设计这些视图。

如何将子视图置于滚动视图之上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T23:34:06.043

如果您的意思是在 xib 中，请先将滚动视图拖入，然后将其他子视图拖到滚动视图上。

如果您的意思是以编程方式，这应该有效：

```
[scrollView addSubview: mySubview]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T14:20:11.667

我在 IB 中执行此操作的方法是将文档窗口中的查看模式设置为大纲视图（第二个按钮）。然后我将视图从库中拖动到滚动视图的顶部，它将作为滚动视图的子视图插入。

如果您在滚动视图旁边看到一个显示三角形，它将插入新视图作为子视图。

# emacs - 如何切换分屏 Emacs，其中一个屏幕是编辑器，而另一个屏幕是终端仿真器？

> ID：892987
> 
> 赞同：3
> 
> 时间：2009-05-21T13:42:45.097
> 
> 标签：emacs, terminal-emulator

我已经 ssh'ed 到远程机器并启动了 emacs。我打开了一个小型 python 应用程序，然后将屏幕一分为二，另一个是 Mx 终端仿真器。我想在一个部分编辑脚本，然后按 Cx o 并在另一部分运行它。不幸的是，我似乎无法离开终端仿真器 Cx o，它最终只是输入 x o。

有没有更好的快速方法来做我想做的事情？还是有一个按键可以让我切换回编辑器部分？

**编辑**：我只是尝试做'Mx shell'，而不是'Mx term'，这让我可以使用Cx o 进行切换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T14:08:52.767

在*终端*窗口时，C-^ o 切换到其他窗口，C-^ Ch 获得更多帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T13:55:00.937

ALT-X 其他窗口

C-TAB 也适用于本地。那会通过SSH翻译吗？如果没有，将 other-window 绑定到另一个将通过 SSH 的密钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T15:29:17.700

我找到了这篇文章，并相应地自定义了 .emacs 文件。 [http://nex-3.com/posts/45-efficient-window-switching-in-emacs](http://nex-3.com/posts/45-efficient-window-switching-in-emacs)

# sql-server - 恢复数据库

> ID：892995
> 
> 赞同：2
> 
> 时间：2009-05-21T13:44:33.707
> 
> 标签：sql-server, database

我不得不卸载 SQL Server 2005，因为它被配置为仅在 windows 身份验证模式下使用，然后以混合模式再次安装。我必须在那里备份我唯一的数据库，并在重新安装 sql server 时再次恢复它，虽然备份已成功执行，但是当我尝试恢复它时，它给了我一个错误

```
System.Data.SqlClient.SqlError: The media has 2 media families but only 1 are provided. All members must be provided. (Microsoft.SqlServer.Smo) 
```

我正在使用 SQL Server Management Studio，并尝试通过右键单击数据库文件夹，选择还原数据库选项，然后在“还原目标”和“还原源”中提供数据库名称来还原数据库从设备选项，然后提供我的 .bak 文件（数据库的备份文件）的路径，但事情不起作用，说恢复失败并给出上述错误描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T14:08:15.403

我建议您不要使用 SSMS GUI 来执行数据库 RESTORE，除非您熟悉所有各种选项和设置。使用 T-SQL RESTORE 命令，您可以明确定义要执行的操作。

我建议您首先使用 RESTORE VERIFYONLY 命令验证您的数据库备份文件。

请参阅联机 SQL Server 书籍：

[http://msdn.microsoft.com/en-us/library/ms188902.aspx](http://msdn.microsoft.com/en-us/library/ms188902.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T15:55:02.600

如果您还没有尝试过：创建一个与您要从中恢复的数据库同名的空白数据库，文件位于完全相同的位置。右键单击空白数据库并从备份中恢复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T14:16:41.660

您是否有可能备份了两个备份文件（即条带备份），而您只在还原中指定了其中一个？恢复似乎在抱怨如果找不到启动恢复所需的所有文件。

# django-templates - 如何在 Django 中获取服务器名称以获得完整的 url？

> ID：892997
> 
> 赞同：23
> 
> 时间：2009-05-21T13:44:54.517
> 
> 标签：django-templates

我正在使用 django 模板来创建电子邮件。我做这样的事情：

```
msg_html = render_to_string('email/%s.html' % template_name, context)
msg = EmailMultiAlternatives(subject, msg_text, from_email, to_list)
msg.attach_alternative(msg_html, "text/html")
msg.content_subtype = "html"
msg.send() 
```

我的模板使用如下命名的 url 模式： {% url url_name parameter %}

效果很好，除了它会呈现一个相对的url，比如：/app_name/url_node/parameter

通常这就足够了，但由于这是一封电子邮件，我真的需要它是一个完整的 url - 前面有服务器名称，例如： [http://localhost:8000/app_name/url_node/parameter](http://localhost:8000/app_name/url_node/parameter)。

我怎样才能做到这一点？如何动态获取服务器名称？（我不想肯定地对其进行硬编码）。

另一种提问方式：我如何获得 HttpServletRequest.getContextPath() ala Java，而不是在 Django/Python 中？

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-22T09:27:02.717

使用站点应用程序：

```
Site.objects.get_current().domain 
```

直接来自文档的示例：

```
from django.contrib.sites.models import Site
from django.core.mail import send_mail

def register_for_newsletter(request):
    # Check form values, etc., and subscribe the user.
    # ...

    current_site = Site.objects.get_current()
    send_mail('Thanks for subscribing to %s alerts' % current_site.name,
        'Thanks for your subscription. We appreciate it.\n\n-The %s team.' % current_site.name,
        'editor@%s' % current_site.domain,
        [user.email])

    # ... 
```

# java - 是定义“ProbableBugException”代码异味、偏执狂还是好的做法？

> ID：892999
> 
> 赞同：2
> 
> 时间：2009-05-21T13:45:15.153
> 
> 标签：java

在我的 Java 代码中，我偶尔会遇到必须从库函数中捕获已检查异常的情况，我*很确定*在我的用例中不会发生这种情况。

此外，在编码时，我有时会注意到我依赖来自其他模块（我自己的）的某些输入来拥有或不拥有特定功能。例如，我可能希望字符串采用某种格式等。在这些情况下，我经常会进行验证步骤，尽管我自己控制发送输入的代码。

目前，我正在开发一个非常复杂的产品，我希望它非常可靠。除其他外，我希望它从捕获的异常中收集信息并自动提交错误报告。**因此，对于上述两种情况，我定义了一个（未经检查的）“ProbableBugException”，它告诉我在传递输入数据的代码中犯了一个错误。**

那是a）愚蠢，b）偏执狂还是c）好的做法？这将是主观的，我将提出三个 wiki 答案，以便我们可以在不扭曲代表的情况下投票。

**ETA**： *感谢 Svend 指出 Java 有断言，我没有意识到这一点。断言实际上几乎就是我的问题所在，但我只从 C 中知道它们并且从未在那里使用过它们。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-21T13:49:09.827

我认为使用[断言](https://docs.oracle.com/javase/7/docs/technotes/guides/language/assert.html)是您真正想要的（“可能是错误”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T13:45:35.700

这很愚蠢，因为：

*   异常应该更具体，例如 InvalidInputException
*   你应该更仔细地考虑输入端，如果你觉得你需要那种异常，它可能会不稳定

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T13:48:59.233

这是一个很好的做法，因为：

*   你可能有一个同事在输入端编码，你们两个可能误解了对方
*   如果你犯了错误，修复它变得微不足道
*   在输入端是某种插件的情况下，它可以帮助插件开发人员（可能是外部的）提供正确的输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T13:52:00.790

我总是期待意想不到的事情。

我经常有这样的代码：（ $div 在我的代码中永远不会是 0 ）

```
if( $div != 0 ) {
   $var = $var2 / $div;
} else {
    /*
     * It should never happen
     */   
    throw Exception( 'relevant message' );
} 
```

我总是保护自己免受我和其他人的伤害**