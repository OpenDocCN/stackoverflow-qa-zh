# StackOverflow 问答 000888000-000888999

# asp.net - ASP.NET，jQuery UI 对话框在页面中显示 1-2 秒

> ID：888000
> 
> 赞同：1
> 
> 时间：2009-05-20T13:46:16.203
> 
> 标签：asp.net, jquery, user-interface

我有一个 ASP.NET 页面，我将在页面加载中检查用户是否已登录系统（通过检查会话值），如果未登录，它将显示一个用于登录的 jQueryUI 对话框。

我的 ASPX 页面在 head 标记中包含这些脚本

```
<style type="text/css">
    body { font-size: 62.5%; }
    label, input { display:block; }
    input.text { margin-bottom:12px; width:95%; padding: .4em; }
    fieldset { padding:0; border:0; margin-top:25px; }
    h1 { font-size: 1.2em; margin: .6em 0; }
    div#users-contain {  width: 350px; margin: 20px 0; }
    div#users-contain table { margin: 1em 0; border-collapse: collapse; width: 100%; }
    div#users-contain table td, div#users-contain table th { border: 1px solid #eee; padding: .6em 10px; text-align: left; }
    .ui-button { outline: 0; margin:0; padding: .4em 1em .5em; text-decoration:none;  !important; cursor:pointer; position: relative; text-align: center; }
    .ui-dialog .ui-state-highlight, .ui-dialog .ui-state-error { padding: .3em;  }

</style>
<script type="text/javascript">
$(function() {

    var name = $("#name"),
        email = $("#email"),
        password = $("#password"),
        allFields = $([]).add(name).add(email).add(password),
        tips = $("#validateTips");

    function updateTips(t) {
        tips.text(t).effect("highlight",{},1500);
    }

    function checkRegexp(o,regexp,n) {

        if ( !( regexp.test( o.val() ) ) ) {
            o.addClass('ui-state-error');
            updateTips(n);
            return false;
        } else {
            return true;
        }

    }

    $("#dialog").dialog({
        bgiframe: true,
        autoOpen: false,
        height: 250,
        modal: true,
        buttons: {
                Cancel: function() {
                $(this).dialog('close');
                },                                  
                NewUser: function() {
                 $(this).dialog('close');
                 window.location.href="Register.aspx";
                },
                'Sign in': function() {
                var bValid = true;
                allFields.removeClass('ui-state-error');

                bValid=true;
                isValidationFails=false;
                if (bValid)
                {              
                                        // Go to another page

                    } 
                }
            }
        },
        close: function() {
            allFields.val('').removeClass('ui-state-error');
        }
    });

    $('#create-user').click(function() {
         $(this).dialog('close');
         window.location.href="Register.aspx"
    })
    .hover(
        function(){ 
            $(this).addClass("ui-state-hover"); 
        },
        function(){ 
            $(this).removeClass("ui-state-hover"); 
        }
    ).mousedown(function(){
        $(this).addClass("ui-state-active"); 
    })
    .mouseup(function(){
            $(this).removeClass("ui-state-active");
    });

//});
var isAuthenticated = $("#isAuthenticated").val();
if (isAuthenticated && isAuthenticated == "false")
{
  $("#dialog").dialog("open");
} 
```

});

```
</script> 
```

服务器端代码（在 Page_Load 中）

```
 if (Session["trCustomerId"] != null)
        {
            Response.Write("Logged in user");
            ClientScript.RegisterHiddenField("isAuthenticated", "true");
        }
        else
        {
            ClientScript.RegisterHiddenField("isAuthenticated", "false");
        } 
```

该程序现在运行良好。但问题是当页面加载时，它在屏幕上显示 UIDialog div 1-2 秒然后消失。我不想这样显示。谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T14:09:17.017

尝试将对话框标记上的样式设置为 display:none;

```
#dialog{
   display: none;
} 
```

如果 dialog.open 不适合您，您可以显示它。

```
$('#dialog').show() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-21T14:12:30.223

试试这个，在 html 代码类型 style="display:none;" #dialog 浏览器首先加载 html

# java - Tips or tools for debugging Spring applications?

> ID：888015
> 
> 赞同：16
> 
> 时间：2009-05-20T13:47:48.993
> 
> 标签：java, spring, debugging

I am trying to use Spring for the first time in an application. The general issue that comes up repeatedly is how to debug Spring. The framework is configuration heavy so traditional code debugging seems fruitless. I have no real idea how to go about troubleshooting short of turning on the debugging level logs (which are lacking) and scanning through.

Are there any general tips or tools to assist Spring debugging?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T19:06:34.327

如果您使用的是 Eclipse，那么请使用 Spring IDE（可从 Eclipse 的 Help 菜单中的 Eclipse Marketplace 获得）。这将提供代码完成、bean 可视化和热链接到您的配置文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T14:05:57.850

我不认为 Spring 调试应该与任何其他调试场景有任何不同。

您使用的是 Spring 的哪些方面？如果您正确使用依赖注入，那么我预计不会出现任何问题。

但是，如果您通过它们的名称（在运行时，使用`ApplicationContext.getBean()`）动态解析 bean，那么我可以看到这将导致您在预测控制流等方面出现问题，并建议您重新访问您的 IoC。

编辑：提供 Spring 源代码非常有用。它很好地组合在一起并且非常易读，因此可能在调试时使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T13:52:50.713

我通常只在 eclipse 中使用 java 调试器——它在大多数类上都能正常工作。一些类在编译/运行时通过字节码更改进行包装 - 对于这些类，您通常不能在方法中放置断点，但是您可以在方法入口处设置断点。

如果你有一个非常具体的情况，你可能应该在你的问题中详细说明一下。

我通常对日志记录级别也满意 - 你认为它们有什么问题？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-09-13T16:13:53.553

截至 09/2011（版本：2.6.1.RELEASE，内部版本号：201105041000），真正令人烦恼的是调试器不会在闭包内停止，因此您必须记住在您想要的内部放置一个断点检查; 这很好，因为它“几乎”去不同的班级，很多时间并不重要，但是当它这样做时，你必须记住这一点。

# c# - 在调试器可视化器中获取变量名

> ID：888017
> 
> 赞同：7
> 
> 时间：2009-05-20T13:48:26.107
> 
> 标签：c#, visual-studio, debugging, debuggervisualizer

有没有办法在 Visual Studio 调试器可视化工具中获取目标对象的基础变量名称？内置的字符串可视化器可以做到这一点：

```
string myStr = "abc\ndef";
Debugger.Break(); 
```

单击 的可视化工具图标`myStr`，您将看到“表达式”文本框显示“myStr”。我怎样才能在我自己的可视化器中得到这个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-21T16:49:48.683

这是不可能的。提供给可视化工具的唯一信息是值。

字符串可视化器之所以得名，是因为它实际上不是真正的可视化器。也就是说，它是一个调试器功能，它具有对底层元数据的更高级别的访问权限，更重要的是表达式评估器。

# datatable - Display DateTime data in users TimeZone in DataTable

> ID：888018
> 
> 赞同：3
> 
> 时间：2009-05-20T13:48:35.247
> 
> 标签：datatable, timezone

We have a reporting application where all DateTimes are stored in UTC in the database (SQL server 2005)

The reporting application works simply be retrieving a DataTable and binding to a DataGrid displaying the information.

If we know the logged in users time zone (e.g. +3 GMT), is there any way to update the DataTables dates which are in UTC to now display in the users time zone?

We know we can spool thorugh each column/row in the DataTable and do a conversion but is there a better more efficient way?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T14:01:28.373

我会修改显示给用户的时间。保持它的存储方式一致，还要存储他们的时区是什么，然后修改 UI 以显示正确的本地时间。例如，如果他们的时区是中央标准时间，那么您可以使用类似于以下代码的内容：

```
SomeDataObject someDataObject = new SomeDataObject();

someDataObject.TimeZone = -5; //UTC Timezone for Central Standard Time
someDataObject.Time = DateTime.Now;

DateTime someTime = someDataObject.Time;
someTime.Add(someDataObject.TimeZone); // Display this back to the user 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T14:12:35.417

如果使用 .NET，则有一个专门为此目的而制作的内置类。摘自文章的TimeZoneInfo ( [http://msdn.microsoft.com/en-us/library/system.timezoneinfo.aspx )：](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.aspx)

> TimeZoneInfo 对象可以表示任何时区，TimeZoneInfo 类的方法可以将一个时区的时间转换为任何其他时区的对应时间。TimeZoneInfo 类的成员支持以下操作：
> 
> *   检索已由操作系统定义的时区。
> *   枚举系统上可用的时区。
> *   在不同时区之间转换时间。
> *   创建操作系统尚未定义的新时区。
> *   序列化时区以供以后检索。

希望这可以帮助。

# sql - 在 VB.NET 中比较数组

> ID：888020
> 
> 赞同：4
> 
> 时间：2009-05-20T13:48:41.940
> 
> 标签：sql, vb.net, arrays

在我进入问题的具体细节之前，让我提供一些细节来解释我想要完成的工作。

我有两个数据源——一个是包含部件号、描述等的 SQL Server。另一个是没有传统意义上的数据库的 CAD 系统。我要做的是从 SQL Server 中读取材料清单，并将其与 CAD 装配图进行比较，以确保 CAD 系统包含与 SQL Server 相同的信息。

从 SQL Server 获取数据相当简单。我查询数据库并填充数据网格。完毕。快的。简单的。

从 CAD 系统获取数据的过程要复杂一些。我必须加载装配图以获取所有零部件的列表，然后加载这些单独的图纸以从图纸中提取“零件编号”属性。这是一个耗时且缓慢的过程（不幸的是），因为必须实际访问每个文件。我将这些属性加载到一个数组中（我想一个列表可能更有效）。

所以现在我有一个带有零件编号的数据网格和数组。我需要比较它们并相应地为网格着色。如果零件在两者中都存在，则网格应保持透明，如果仅存在于网格中，则将行着色为黄色，如果仅存在于数组中，则添加红色行。

据我所知，这意味着在网格的每一行上循环遍历数组。思考过程是这样的：

1.  默认网格为黄色行。
2.  遍历网格并遍历数组进行比较。如果找到匹配项，则使该行透明并从数组中删除该元素。
3.  步骤 2 完成后，数组应该只包含在网格中找不到的元素。调整数组大小以删除空元素。
4.  将数组的元素添加到网格中，并将这些新行涂成红色。

这种逻辑的问题在于，从性能的角度来看，它似乎很昂贵。肯定有更好的方法吗？此外，如果我以某种方式（如度假村）修改网格，我必须再次完成该过程。我真的很感激对此的一些建议。

谢谢！

注意：在 Visual Studio 2005 中编写。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T14:04:32.937

您可以将 CAD 系统中的数据加载到字典中（按零件编号索引）。然后你可以遍历网格并检查它是否存在于字典中，这是一个快速操作（ O(1) ）。你可以完全按照你说的做，删除字典中找到的元素，然后在数据网格中添加剩余的元素。

下面是一些用于创建和使用字典的代码（使用 C# 样式注释来保留格式）：

```
//First argument is your key type, second is your item type
Dim cadParts As New Dictionary(Of Integer, Part)

//Add items to the parts dictionary
For Each part As Part In cadPartsArray
  cadParts.Add(part.PartNumber,part)
Next

//Check if a part exists
Dim partNumber As Integer = 12345
If cadParts.ContainsKey(partNumber) ...

//Remove a part
cadParts.Remove(partNumber)

//Go through the remaining values
For Each part As Part In cadParts.Values ... 
```

编辑：

1) 是的，如果您的键（此处为部件号）是字符串，则将使用 Dictionary(Of String,...)。

2）我假设您有一个名为 Part 的类，其中包含有关零件的一些信息。如果您只有一个零件号，而没有其他信息，那么您可以创建一个 Hashset。它与字典基本相同，但在这种结构下，值也是您的键。您将创建一个像这样的哈希集：

```
Dim cadParts As New Hashset(Of String) 
```

我不会通过代码示例，因为它非常接近字典。ContainsKey 变为 Contains，并且 Add 仅接受一个参数（此处为您的部件号）。

3）是的，遍历它们并将它们添加到哈希集中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T14:20:37.507

如果零件编号是唯一的（在您要搜索的值中不重复），那么您可以使用排序字典。然后删除重复项并使用剩余的项目。

要进行比较，您可以使用以下零件编号：

```
if(dictionary.ContainsKey(partNumber))
    dictionary.Remove(partNumber)
end if 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T14:31:43.337

鉴于一次只能看到一定数量的数据网格行，在 OnPaint 方法中实现一些代码可能会更快（我在这里有点生疏，如果不完全正确，请道歉）对于每行检查零件信息数组并设置每行的背景颜色，因为它变得可见，甚至可能将每行标记为已处理，因此不需要重复操作。与一次处理所有行相比，这里可能会获得初始性能提升。

没有实际意义；但从以前的经验来看，这听起来像是您正在与 AutoDESK Inventor 文件交互？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T14:55:24.147

另一种解决方案可能是实现 IComparable(Of T) 接口

这将要求您构建一个用于两种情况的类。

```
Public Class Item
    Implements IComparable(Of Item)

    Private _Description As String
    Public Property Description() As String
        Get
            Return _Description
        End Get
        Set(ByVal value As String)
            _Description = value
        End Set
    End Property

    Private _PartNo As Integer
    Public Property PartNo() As Integer
        Get
            Return _PartNo
        End Get
        Set(ByVal value As Integer)
            _PartNo = value
        End Set
    End Property

    Public Function CompareTo(ByVal other As Item) As Integer Implements System.IComparable(Of Item).CompareTo
        ' Your rules for comparing content for objects
        If other.PartNo <> Me.PartNo Then Return 1
        If other.Description <> Me.Description Then Return 1

        ' Return 0 if the object are the same
        Return 0
    End Function
End Class 
```

这是一个适用于上层实现的小测试。

```
 Dim item As New Item
    item.Description = "Desc"
    item.PartNo = 34

    Dim item2 As New Item
    item2.Description = "Desc"
    item2.PartNo = 35

    Dim item3 As New Item
    item3.Description = "Desc"
    item3.PartNo = 36

    Dim listFromDatabase As New Generic.List(Of Item)
    listFromDatabase.Add(item)
    listFromDatabase.Add(item2)

    If listFromDatabase.Contains(item2) Then
        MessageBox.Show("item2 was found in list")
    End If

    If Not listFromDatabase.Contains(item3) Then
        MessageBox.Show("item3 was NOT found in list")
    End If 
```

希望它有所帮助， - 丹

# flash - Reading the text file line by line and push to an array in AS3

> ID：888023
> 
> 赞同：10
> 
> 时间：2009-05-20T13:49:10.923
> 
> 标签：flash, actionscript-3

I need some code in AS3 that will read a text file line by line and insert it into an array. Is this possible without having any special character?

**sample.txt**

```
 car
    van
    scooter
    bike 
```

I need to read the file and insert it into an array like:

```
Array[0]=car
Array[1]=van
Array[2]=scooter
Array[3]=bike 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-05-20T14:02:10.617

像这样的东西可能会起作用：

```
var myTextLoader:URLLoader = new URLLoader();

myTextLoader.addEventListener(Event.COMPLETE, onLoaded);

function onLoaded(e:Event):void {
    var myArrayOfLines:Array = e.target.data.split(/\n/);
}

myTextLoader.load(new URLRequest("myText.txt")); 
```

onLoaded 函数中的数组将包含您的项目数组。

编辑——为了好玩，我用一个示例文件运行了代码，它就像一个魅力。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-20T14:13:50.500

下面是使用 ActionScript 3 加载和读取不同文件类型的示例：

```
 import flash.filesystem.FileMode;
      import flash.filesystem.FileStream;
      import flash.filesystem.File;

      var myFile:File = File.appResourceDirectory; // Create out file object and tell our File Object where to look for the file
      myFile = myFile.resolve("mySampleFile.txt"); // Point it to an actual file

      var fileStream:FileStream = new FileStream(); // Create our file stream
      fileStream.open(myFile, FileMode.READ);

      var fileContents:String = fileStream.readUTFBytes(fileStream.bytesAvailable); // Read the contens of the 
      fileContents_txt.text = fileContents; // Display the contents. I've created a TextArea on the stage for display

      fileStream.close(); // Clean up and close the file stream 
```

读取字符串后，您可以使用 int.valueOf() 将字符串转换为整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-09-15T06:49:32.653

这将适用于小文件，而不适用于像防火墙或网络服务器日志文件这样的巨大文件。

这些文件根本不会完全加载到内存中。

有没有解决方案 1/ 读取文件，直到遇到行尾字符，2/ 处理读取的内容，3/ 然后继续直到下一个行尾/文件结尾字符？

我认为可以使用文件流一次读取 1 个字节并查看它是否包含换行符，然后将该字节内容推送到数组中，直到遇到 EOL 字符，但我在 AS 中还不够强大写这样的东西而不会失去我 3 个月的生命……另外，我不太确定这个过程的速度。

任何人 ？我宁愿不提出单独的问题，因为这基本上是相同的需求，但对于更大的文件......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-23T16:31:00.500

emmmm，用空格作为分隔符确实有点奇怪。我的意思是，你可以这样做：

```
var result:Array = [];
for each (var s:String in source.split(" ")) {
     var a:Array = s.split("=");
     result[a[0]] = a[1];
} 
```

还是靠""来拆分，真的不是什么好主意，不能用JSON、CSV、XML吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-04-18T11:54:05.623

如果您使用的是实时录制，则文本的生成速度比 .json 或 .xml 等其他格式更快。但是 xml 和 json 更容易阅读和解析。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-18T08:46:06.263

对于那些想知道大文本文件的人，在读取换行字节之前，您无法知道何时会出现换行符。我建议的是有一个循环，而不是读取所有字节

> fileStream.readUTFBytes(fileStream.bytesAvailable);

你一次做几百个字节，处理你需要的任何东西，然后继续阅读。

# cocoa - 默认情况下，核心数据获取（NSFetchRequest）是否以任何特定方式排序？

> ID：888028
> 
> 赞同：2
> 
> 时间：2009-05-20T13:50:23.310
> 
> 标签：cocoa, core-data

我有一个基本问题。假设您有一个要在 NSManagedObjectContext 上执行的 NSFetchRequest。如果获取请求没有明确设置任何排序描述符，那么对象是否每次都是随机的，或者它们是否会按照最初添加到托管对象上下文的顺序被吐出到数组中？我在文档的任何地方都找不到这个答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T14:10:34.563

不，它们不能保证被订购。根据您使用的数据存储类型（我从未尝试过），您可能会碰巧看到一致的顺序，但这不是您应该以任何方式依赖的东西。

不过，按创建日期订购很容易。只需向您的实体添加一个日期属性，将其初始化为 中的当前日期`awakeFromInsert`，然后在您的 fetch 中指定该排序描述符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T14:07:57.283

订单可能不是“每次都是随机的”，但据我所知，您不能/不应该依赖它。如果您需要特定的顺序，请使用排序描述符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-02T00:01:36.240

我在这里看到两个问题：每次都会以相同的顺序出现吗？而且，这是按插入顺序排列的吗？

它以设定的顺序出现，这是某种顺序。请注意，NSSet 只是一个接口，并且有实现 NSSet 的私有类。这意味着，虽然如果您调用 allObjects 反对它，您返回的某些 NSSet 实例可能会以某种一致的顺序返回它们，但几乎可以肯定的是，它是哈希排序的，因为集合几乎普遍实现为哈希字典。

由于散列算法的变化很大，具体取决于存储的内容和散列方式，因此您可能会“幸运”地发现它每次都以相同的顺序出现，但是当某些情况发生非常轻微的变化时又会措手不及。

因此，从技术上讲，它并不是真正随机的，它可能处于某种稳定的顺序中。

对于第二个问题，我会说它几乎肯定**不是**插入顺序。

Marc 处理 awakeFromInsert 的建议是一个很好的建议，也是您想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T22:00:53.823

没有对订购的保证。例如，我可以实现一个以随机顺序返回结果的 NSAtomicStore 或 NSIncrementalStore，这将是完全正确的。我已经看到 SQLite 商店在不同版本的操作系统上也返回不同的顺序。

# vbscript - VBScript - 不知道为什么我的参数与变量的使用方式不同

> ID：888033
> 
> 赞同：3
> 
> 时间：2009-05-20T13:51:30.017
> 
> 标签：vbscript, variables, arguments

我编写了一个 VBScript 来枚举特定日期事件日志中的事件。

第一个查询从今天日期和昨天日期之间的 NT 事件日志事件中选择，

```
Set colEvents = objWMIService.ExecQuery _
    ("Select * from Win32_NTLogEvent Where TimeWritten >= '" _ 
        & dtmStartDate & "' and TimeWritten < '" & dtmEndDate & "'") 
```

然后从上面的查询中，我想从日志文件中提取事件 ID。

```
For Each objEvent in colEvents
    If objEvent.Eventcode = EventNu And (objEvent.LogFile = EventLog) Then 
```

我已将以下内容放入脚本中并且它可以工作，但是我想通过命令行（即 EventLogCheck.vbs EventNumber LogFile ）使用参数，但如果我使用脚本的参数部分，则不会返回任何项目。这让我发疯了。下面的完整脚本使用变量，我已经注释掉了参数部分，但您可以取消注释并使用它。我究竟做错了什么？谢谢你的帮助！

```
Const CONVERT_TO_LOCAL_TIME = True
Dim EventLog

EventNu = 18
EventLog = "System"

'Input from the command line
'If Wscript.Arguments.Count <= 1 Then
'   Wscript.Echo "Usage: EventLogCheck.vbs EventNumber LogFile"
'   Wscript.Quit
'End If

'EventNu = WScript.Arguments.Item(0)
'EventLog = WScript.Arguments.Item(1)

'For Each Computer In Wscript.Arguments

Set dtmStartDate = CreateObject("WbemScripting.SWbemDateTime")
Set dtmEndDate = CreateObject("WbemScripting.SWbemDateTime")
'DateToCheck = CDate("5/18/2009")
DateToCheck = date
dtmStartDate.SetVarDate DateToCheck, CONVERT_TO_LOCAL_TIME
dtmEndDate.SetVarDate DateToCheck + 1, CONVERT_TO_LOCAL_TIME

strComputer = "."
Set objWMIService = GetObject("winmgmts:" _
    & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")
Set colEvents = objWMIService.ExecQuery _
    ("Select * from Win32_NTLogEvent Where TimeWritten >= '" _ 
        & dtmStartDate & "' and TimeWritten < '" & dtmEndDate & "'") 

For Each objEvent in colEvents
 If objEvent.Eventcode = EventNu And (objEvent.LogFile = EventLog) Then
    'Wscript.Echo "Category: " & objEvent.Category
    Wscript.Echo "Computer Name: " & objEvent.ComputerName
    Wscript.Echo "Event Code: " & objEvent.EventCode
    Wscript.Echo "Message: " & objEvent.Message
   ' Wscript.Echo "Record Number: " & objEvent.RecordNumber
   ' Wscript.Echo "Source Name: " & objEvent.SourceName
    Wscript.Echo "Time Written: " & objEvent.TimeWritten
    Wscript.Echo "Event Type: " & objEvent.Type
   ' Wscript.Echo "User: " & objEvent.User
    Wscript.Echo objEvent.LogFile
   End if
Next
'Next
WScript.Echo EventNu
WScript.Echo EventLog 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T13:59:56.410

传递的参数被视为字符串类型。但是，EventNu 应该是一个整数。因此，您必须使用[`CInt`](http://www.w3schools.com/VBScript/func_cint.asp)and将参数转换为正确的类型[`CStr`](http://www.w3schools.com/VBScript/func_cstr.asp)：

```
EventNu = CInt(WScript.Arguments.Item(0))
EventLog = CStr(WScript.Arguments.Item(1)) 
```

# sql-server - 如何选择出现在文本列表中的行？

> ID：888045
> 
> 赞同：0
> 
> 时间：2009-05-20T13:54:16.017
> 
> 标签：sql-server, tsql

我有一个 SqlServer 客户表

```
customer (first_name, last_name, home_phone, cell_phone) 
```

和电话号码的文本文件列表，例如

```
9876543210,
4564561234,
1231231234,
1234567890, 
```

customer 表中的电话号码以 +1dddddddddd 格式存储：其中 dddddddddd 是电话号码。

如何在文本列表中找到家庭或手机号码出现的所有客户记录？

文本列表大约有 1000 个数字，所以理想情况下我只想粘贴一次。如何创建一个临时数字表来进行查询？

```
SELECT first_name, last_name
FROM customer
WHERE home_phone IN (
  SELECT * FROM temporary_table
) 
```

但这与客户电话号码格式不匹配，并且只检查家庭电话号码而不是手机号码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T14:55:33.210

要将值加载到表中，请使用：

```
CREATE TABLE numbers (number VARCHAR(20))

BULK INSERT numbers
FROM 'c:\path_to\numbers.csv' 
WITH 
( 
    FIELDTERMINATOR = ',', 
    ROWTERMINATOR = '\r\n' 
) 
```

请注意`'c:\path_to\numbers.csv'`，服务器应该可以通过此路径访问，而不是客户端。

这意味着为您的服务器运行的帐户设置权限。

要查询，请使用：

```
SELECT  *
FROM    customer
WHERE   home_phone IN
        (
        SELECT  '+1' + number
        FROM    numbers
        )
        OR cell_phone IN
        (
        SELECT  '+1' + number
        FROM    numbers
        ) 
```

不要使用`SUBSTRING`on`home_phone`和`cell_phone`: 这将阻止使用索引来访问这些字段并降低查询效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T13:57:26.587

您可以[使用 an`OR`检查多个条件](http://www.sql-tutorial.net/SQL-AND-OR.asp)并[`SUBSTRING`去除前导`+1`](http://msdn.microsoft.com/en-us/library/ms187748.aspx)：

```
SELECT first_name, last_name
FROM customer
WHERE SUBSTRING(home_phone,3,10) IN (
  '9876543210',
  '4564561234',
  '1231231234',
  '1234567890'
)
OR SUBSTRING(cell_phone,3,10) IN (
  '9876543210',
  '4564561234',
  '1231231234',
  '1234567890'
) 
```

该`SUBSTRING`函数不是标准的 ANSI SQL，因此在数据库之间会略有不同，例如它可能被称为`SUBSTR`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T14:02:27.963

我会使用电话号码的子字符串进行比较。例如：

```
select first_name
     , last_name
  from customer
 where ( substring(home_phone, 2, 10) in (
                       '9876543210',
                      '4564561234',
                      '1231231234',
                      '1234567890'
  )
  OR  substring (cell_phone, 2, 10) in (
                       '9876543210',
                      '4564561234',
                      '1231231234',
                      '1234567890'
  )) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T14:05:31.657

对于云雀，您可以尝试将数字放入一个看起来像数组的 xml 对象中（即，您可以将其作为参数传递给存储过程），然后将其延伸到一个关系并将其与您的客户表连接起来：

```
declare @numbers xml
set @numbers = '<numbers>
<number value="9876543210"/>
<number value="4564561234"/>
<number value="1231231234"/>
<number value="1234567890"/>
</numbers>'

SELECT first_name, last_name 
FROM  customers
join @number.nodes('//number') as t(c)
 on c.value('@value','varchar(10)') = '+1'+customers.homephone 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T14:14:13.480

```
SELECT * FROM customer WHERE home_phone = REPLACE("+1", "", "+19876543210"); 
```

在此处查看其他很酷的 MySQL 字符串功能：http: [//dev.mysql.com/doc/refman/5.0/en/string-functions.html](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html)

# java - Java中的集中式数据库连接管理

> ID：888046
> 
> 赞同：1
> 
> 时间：2009-05-20T13:54:16.233
> 
> 标签：java, database-connection, jndi

出于合规性原因，我的组织希望将我们的数据库连接设置从属性/XML 配置文件中取出并放入中央注册表 - 理想情况下联合多台物理机器，以避免单点故障。

我一直在研究使用 JNDI 来实现这一点的可能性，但我自己并没有太多使用它的经验。有没有人有尝试做类似事情的经验？或者关于如何实现这一点的任何更好的想法？

我应该补充一点，我们的应用程序是独立的，不在任何 J2EE 容器中运行，因此任何容器特定的连接管理技术可能不是特别有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T17:26:01.830

这可能是一个好的开始：

```
HashMap<String,String> dsNames = new HashMap<String,String>();
System.setProperty(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.fscontext.RefFSContextFactory");
    System.setProperty(Context.PROVIDER_URL, "file:/home/user/tmp");
    InitialContext ic = new InitialContext();
    dsNames.put("yourDataSourceName", "jdbc/your_jndi_name");
    // Construct BasicDataSource reference
    Reference ref = new Reference("javax.sql.DataSource",
            "org.apache.commons.dbcp.BasicDataSourceFactory", null);
    ref.add(new StringRefAddr("driverClassName", "theDriver"));
    ref.add(new StringRefAddr("url","theDBURL"));
    ref.add(new StringRefAddr("username", "obvious"));
    ref.add(new StringRefAddr("password", "obvious"));
    ref.add(new StringRefAddr("maxActive", "10"));
    ref.add(new StringRefAddr("maxIdle", "3"));
    ref.add(new StringRefAddr("initialSize", "3"));
    ref.add(new StringRefAddr("maxWait", "5"));
    ic.rebind("jdbc/your_jndi_name", ref);

    //And to get a reference to your data source anywhere else in your program:
    InitialContext ic2 = new InitialContext();
    DataSource myDS = (DataSource) ic2.lookup(dsNames.get(dsName)); 
```

现在如您所见，我正在使用池连接工厂，但您可以替换它以满足您的需要。此外，初始上下文工厂是 FSContext，这意味着将在常规文件系统中查找 JNDI 名称，URL 上下文工厂必须可用，但我从未使用过它。使用的大多数类都在 javax.naming 包中。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T14:03:09.290

您试图遵守哪些法规？

您可以做的一件事是依赖通过 JNDI 公开的数据源。但是，这意味着您的连接设置位于您配置数据源的位置。

我怀疑您是否需要对数据库连接设置进行“水平调整”。您是否有特定的理由认为将设置放在一个地方可能会给您的应用程序带来风险？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T16:22:03.440

坚持使用 XML/属性文件方法可能更简单，但使用某种集中配置管理系统来控制这些文件的内容。

据推测，如果您必须考虑集中数据源配置之类的东西，那么您已经有了一些东西（CFEngine、puppet、chef、rdist...）来管理操作系统配置文件——那么为什么不直接使用它呢？

# c++ - 模拟管理员用户时使用 AddIPAddress 时出现问题

> ID：888047
> 
> 赞同：6
> 
> 时间：2009-05-20T13:54:25.923
> 
> 标签：c++, c, winapi, network-programming

当以非管理员用户身份登录时，我正在尝试使用 AddIPAddress 将临时 IP 地址添加到 NIC。AddIPAddress 的 MSDN 文档指出，如果函数由非管理员用户调用，则 ERROR_INVALID_HANDLE 作为错误返回。

鉴于我已经通过 API 调用 LogonUser() 和 ImpersonateLoggedOnUser() 来调用 AddIPAddress。现在我的应用程序认为它以管理员身份登录，但 AddIPAddress 仍然失败并显示 ERROR_INVALID_HANDLE。

MSDN 还指出..

“注意网络上的组策略、企业策略和其他限制可能会阻止这些功能成功完成。在尝试使用这些功能之前，请确保应用程序具有必要的网络权限。”

是否可以使用模拟调用 AddIPAddress？如果是这样怎么办？我猜我需要更改上面提到的权限，但我不知道在这方面要更改什么。

任何帮助，将不胜感激！

附加：在尝试使用 CreateProcessAsUser 调用 netsh（再次以普通用户身份登录）时，我还画了一个空白，并使用模拟管理员用户的句柄来启动进程。总是返回指示权限不足的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-12T18:03:09.803

如果您使用的是 Windows Vista，您可能需要提升权限。

在 Vista 中默认启用[UAC 。](http://technet.microsoft.com/en-us/library/cc709628.aspx)这使得即使作为管理员，您也使用有限的用户令牌，除非您明确提升。当你这样做时，用户会看到一个对话框来允许或拒绝请求。

有关这方面的更多信息，请参阅[用户帐户控制兼容性的 Windows Vista 应用程序开发要求](http://msdn.microsoft.com/en-us/library/bb530410.aspx#vistauac_topic6b)。

在以管理员身份登录后，您可能想尝试使用[CheckTokenMembership](http://msdn.microsoft.com/en-us/library/aa376389(VS.85).aspx)来验证您是否已正确提升。我怀疑您获得了有限的用户令牌，因此对特权资源的请求失败了。

祝你好运。

# sql-server - SQL Server 2008 混合混合模式安全性？

> ID：888052
> 
> 赞同：1
> 
> 时间：2009-05-20T13:54:58.073
> 
> 标签：sql-server, security, authentication

我们第一次在 Web 服务器上设置 SQL Server 2008 标准版。我们通常在本地 Intranet 上安装 SQL Server，并且只使用 Windows 身份验证。

Web 服务器的最佳实践身份验证模式是什么？我可以使用混合模式而不用担心安全吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T13:57:18.273

是的，只要您在应用程序中不使用“sa”并且您在此处设置了“sa”密码非常非常强。（或重命名“sa”并创建一个虚拟“sa”帐户）。

大多数商店使用混合模式，因为 Web 服务器、防火墙、跨域问题、第 3 方应用程序等都合谋阻止 Windows 身份验证

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T14:10:04.097

尽管您可以使用混合模式身份验证，但如果您的所有服务器都在同一个域中，那么您应该强烈考虑仅使用 Windows 身份验证。

推荐的最佳做法是使用 Windows 身份验证，除非特别需要这样做。

请参阅 SQL Server 联机丛书，尤其是安全说明“如果可能，请使用 Windows 身份验证”：

[http://msdn.microsoft.com/en-us/library/ms144284.aspx](http://msdn.microsoft.com/en-us/library/ms144284.aspx)

# mysql - 按照与 IN 语句相同的顺序对查询结果进行排序

> ID：888053
> 
> 赞同：-2
> 
> 时间：2009-05-20T13:55:00.087
> 
> 标签：mysql

我有以下查询

```
SELECT * FROM campaigns where campaign_id IN ( 'idStrOne', 'idStrTwo', 'idStrThree' ); 
```

其结果由表活动的主键“id”排序。这不是我想要的顺序。

我希望结果以与 IN 函数的参数相同的顺序返回。所以在这种情况下，我想要的顺序是

```
idStrOne, idStrTwo, idStrThree 
```

我如何得到这个订单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T13:59:52.277

您可以尝试在 ORDER BY 子句中添加 CASE 表达式

```
SELECT * 
FROM campaigns 
WHERE campaign_id IN ( 'idStrOne', 'idStrTwo', 'idStrThree' )
ORDER BY 
(CASE campaign_id WHEN 'idStrOne' THEN 1 WHEN 'idStrTwo' THEN 2 ELSE 3 END); 
```

# powershell - powershell 获取文件的前 x MB

> ID：888063
> 
> 赞同：7
> 
> 时间：2009-05-20T13:56:31.627
> 
> 标签：powershell

获取文本文件的前 x 行非常简单，但我需要文件的前 x MB。鉴于我是 PowerShell 新手，如果您能在脚本上给我一些注释，我们将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-20T14:39:48.123

```
Get-Content foo.exe -TotalCount 1MB -Encoding byte 
```

如果您碰巧使用[PowerShell 社区扩展](http://pscx.codeplex.com)，请执行以下操作：

```
Format-Hex foo.exe -count 1MB 
```

注意：如果您使用的是 PowerShell V2，请务必获取 PSCX 1.2 beta。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T14:32:14.113

独立于 PowerShell，我只使用该`head`命令。（这是一个标准的 Unix 命令，但[它可用于 Windows](http://unxutils.sourceforge.net/)。）该`-c`选项允许您指定所需的字节数。

```
头 -c 1024 foo.exe

```

# php - PHP 5.3 魔术方法 __invoke

> ID：888064
> 
> 赞同：39
> 
> 时间：2009-05-20T13:56:46.417
> 
> 标签：php, oop, magic-methods

本主题扩展了[我何时/应该在 PHP 中使用 __construct()、__get()、__set() 和 __call()？](https://stackoverflow.com/questions/250616/when-do-should-i-use-construct-get-set-and-call-in-php) 其中谈到`__construct`,`__get`和`__set`魔术方法。

从 PHP 5.3 开始，有一个新的魔术方法称为`__invoke`. `__invoke`当脚本尝试将对象作为函数调用时，将调用该方法。

现在在我对这个方法所做的研究中，人们把它比作 Java 方法`.run()`——参见[Interface Runnable](http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Runnable.html)。

考虑了很久，我想不出你为什么会打电话`$obj();` 而不是打电话`$obj->function();`

即使您正在迭代对象数组，您仍然会知道要运行的主函数名称。

那么`__invoke`魔术方法是另一个例子，“仅仅因为你可以，并不意味着你应该”在 PHP 中的快捷方式，还是在某些情况下这实际上是正确的做法？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2016-02-08T18:58:27.573

当您需要一个必须维护某些内部状态的[可调用对象](http://php.net/manual/en/language.types.callable.php)时，使用 是[`__invoke`](http://php.net/manual/en/language.oop5.magic.php#language.oop5.magic.invoke)有意义的。假设您要对以下数组进行排序：

```
$arr = [
    ['key' => 3, 'value' => 10, 'weight' => 100], 
    ['key' => 5, 'value' => 10, 'weight' => 50], 
    ['key' => 2, 'value' => 3, 'weight' => 0], 
    ['key' => 4, 'value' => 2, 'weight' => 400], 
    ['key' => 1, 'value' => 9, 'weight' => 150]
]; 
```

[usort](http://php.net/manual/en/function.usort.php)函数允许您使用某些函数对数组进行排序，非常简单。但是在这种情况下，我们想使用它的内部数组`'value'`键对数组进行排序，可以这样做：

```
$comparisonFn = function($a, $b) {
    return $a['value'] < $b['value'] ? -1 : ($a['value'] > $b['value'] ? 1 : 0);
};
usort($arr, $comparisonFn);

// ['key' => 'w', 'value' => 2] will be the first element, 
// ['key' => 'w', 'value' => 3] will be the second, etc 
```

现在也许您需要再次对数组进行排序，但是这次使用`'key'`作为目标键，有必要重写函数：

```
usort($arr, function($a, $b) {
    return $a['key'] < $b['key'] ? -1 : ($a['key'] > $b['key'] ? 1 : 0);
}); 
```

如您所见，该函数的逻辑与前一个相同，但是由于需要使用不同的键进行排序，我们不能重用前一个。这个问题可以通过在`__invoke`方法中封装比较逻辑并定义要在其构造函数中使用的键的类来解决：

```
class Comparator {
    protected $key;

    public function __construct($key) {
            $this->key = $key;
    }

    public function __invoke($a, $b) {
            return $a[$this->key] < $b[$this->key] ? 
               -1 : ($a[$this->key] > $b[$this->key] ? 1 : 0);
    }
} 
```

实现它的 Class 对象`__invoke`是“可调用的”，它可以在函数可能存在的任何上下文中使用，所以现在我们可以简单地实例化`Comparator`对象并将它们传递给`usort`函数：

```
usort($arr, new Comparator('key')); // sort by 'key'

usort($arr, new Comparator('value')); // sort by 'value'

usort($arr, new Comparator('weight')); // sort by 'weight' 
```

**以下段落反映了我的主观意见，因此，如果您愿意，现在可以停止阅读答案；）**：尽管前面的示例显示了 非常有趣的用法`__invoke`，但这种情况很少见，我会避免使用它，因为它确实可以完成令人困惑的方式，通常有更简单的实现替代方案。在同一排序问题中的一个替代示例是使用返回比较函数的函数：

```
function getComparisonByKeyFn($key) {
    return function($a, $b) use ($key) {
            return $a[$key] < $b[$key] ? -1 : ($a[$key] > $b[$key] ? 1 : 0);
    };
}
usort($arr, getComparisonByKeyFn('weight'));
usort($arr, getComparisonByKeyFn('key'));
usort($arr, getComparisonByKeyFn('value')); 
```

[虽然这个例子需要对lambdas](http://php.net/manual/en/functions.anonymous.php)有更多的了解| [关闭|](http://php.net/manual/en/functions.anonymous.php) [匿名函数](http://php.net/manual/en/functions.anonymous.php)更简洁，因为它不会创建一个完整的类结构来存储外部值。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2009-05-20T14:16:15.597

> 这个答案在 2009 年写的有点过时了。请持保留态度。

PHP 不允许像其他语言那样传递函数指针。函数不是PHP 中的[第一类](http://en.wikipedia.org/wiki/First-class_function)。函数是第一类主要意味着你可以将一个函数保存到一个变量中，然后随时传递并执行它。

该`__invoke`方法是 PHP 可以容纳伪一流函数的一种方式。

该`__invoke`方法可用于传递可以充当[闭包](http://en.wikipedia.org/wiki/Closure_(computer_science))或[延续](http://en.wikipedia.org/wiki/Continuation)的类，或者仅作为可以传递的函数。

许多函数式编程依赖于一流的函数。即使是普通的命令式编程也可以从中受益。

假设您有一个排序例程，但想要支持不同的比较功能。好吧，你可以有不同的比较类来实现 __invoke 函数并将实例传递给类到你的排序函数，它甚至不必知道函数的名称。

真的，你总是可以做一些事情，比如传递一个类并让一个函数调用一个方法，但是现在你几乎可以谈论传递一个“函数”而不是传递一个类，尽管它不像其他语言那样干净。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-05-20T14:15:22.027

我相信这个功能的存在主要是为了支持 5.3 的新闭包功能。闭包作为类的实例公开`Closure`，并且可以直接调用，例如`$foo = $someClosure();`. 一个实际的好处`__invoke()`是可以创建标准的回调类型，而不是使用字符串、对象和数组的奇怪组合，具体取决于您引用的是函数、实例方法还是静态方法。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-05-12T03:01:45.000

如果你知道你正在处理某种类型的对象，你真的不应该打电话`$obj();`。`$obj->function();`也就是说，除非你想让你的同事摸不着头脑。

该`__invoke`方法适用于不同的情况。特别是当您希望提供一个通用的可调用对象作为参数时。

想象一下，你在一个类中有一个方法（你必须使用并且不能更改），它只接受一个可调用对象作为参数。

```
$obj->setProcessor(function ($arg) {
    // do something costly with the arguments
}); 
```

现在假设您想要缓存和重用一个冗长操作的结果，或者访问该函数之前使用的参数。定期关闭可能会很厚实。

```
// say what? what is it for?
$argList = [];

$obj->setProcessor(function ($arg) use (&$argList) {
    static $cache;
    // check if there is a cached result...
    // do something costly with the arguments
    // remember used arguments
    $argList[] = $arg;
    // save result to a cache
    return $cache[$arg] = $result;
}); 
```

看，如果你碰巧需要`$argList`从其他地方访问，或者只是清理停滞条目的缓存，你就有麻烦了！

这里来`__invoke`救援：

```
class CachableSpecificWorker
{
    private $cache = [];

    private $argList = [];

    public function __invoke($arg)
    {
        // check if there is a cached result...

        // remember used arguments
        $this->argList[] = $arg;

        // do something costly with the arguments

        // save result to a cache
        return $this->cache[$arg] = $result;
    }

    public function removeFromCache($arg)
    {
        // purge an outdated result from the cache
        unset($this->cache[$arg]);
    }

    public function countArgs()
    {
        // do the counting
        return $resultOfCounting;
    }
} 
```

使用上面的类处理缓存数据变得轻而易举。

```
$worker = new CachableSpecificWorker();
// from the POV of $obj our $worker looks like a regular closure
$obj->setProcessor($worker);
// hey ho! we have a new data for this argument
$worker->removeFromCache($argWithNewData);
// pass it on somewhere else for future use
$logger->gatherStatsLater($worker); 
```

这只是一个简单的例子来说明这个概念。可以更进一步，创建一个通用的包装器和缓存类。以及更多。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-20T14:24:35.893

这是两件事的结合。您已经正确识别出其中之一。这确实就像 Java 的`IRunnable`接口，每个“可运行”对象都实现相同的方法。在 Java 中，该方法被命名为`run`; 在 PHP 中，该方法名为`__invoke`，您无需事先显式实现任何特定的接口类型。

第二个方面是*语法糖*，因此`$obj->__invoke()`您可以跳过方法名称而不是调用，因此看起来好像您是在直接调用对象`$obj()`：

PHP 有闭包的关键部分是第一个。该语言需要一些已建立的方法来调用闭包对象以使其完成工作。语法糖只是让它看起来不那么难看的一种方式，就像所有带有双下划线前缀的“特殊”函数一样。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-05-18T20:49:26.347

# 结论（基于以上所有）

一般来说，我认为 __invoke(){...} 魔术方法是抽象类对象主要功能的使用或直观的对象设置（在使用它的方法之前准备对象）的绝佳机会。

案例 1 - 例如，假设我使用了一些第三方对象，它实现了 __invoke 魔术方法，通过这种方式可以轻松访问对象实例的主要功能。要使用它的主要功能，我只需要知道 __invoke 方法需要什么参数以及这个函数（闭包）的最终结果是什么。通过这种方式，我能够使用类对象的主要功能，只需很少的努力来研究对象功能（请注意，在此示例中，我们不需要知道或使用任何方法名称）。

从真实代码中抽象...

代替

```
$obj->someFunctionNameInitTheMainFunctionality($arg1, $arg2); 
```

我们现在使用：

```
$obj($arg1, $arg2); 
```

我们现在还可以将对象传递给其他期望其参数可调用的函数，就像在常规函数中一样：

代替

```
someFunctionThatExpectOneCallableArgument($someData, [get_class($obj), 'someFunctionNameInitTheMainFunctionality']); 
```

我们现在使用：

```
someFunctionThatExpectOneCallableArgument($someData, $obj); 
```

__invoke 还提供了一个很好的使用快捷方式，那么为什么不使用它呢？

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-02-25T14:54:11.917

当脚本尝试将对象作为函数调用时，会调用**__invoke()方法。**

注意：此功能自`PHP 5.3.0`.

```
<?php
    class CallableClass
    {
        public function __invoke($x)
        {
            var_dump($x);
        }
    }
    $obj = new CallableClass;
    $obj(5);
    var_dump(is_callable($obj));
?> 
```

上面的示例将输出：

> 整数（5）
> 
> 布尔（真）

点击查看[参考](https://www.php.net/manual/en/language.oop5.magic.php#object.invoke)。

# database - 在 AIX 上从 isql 调用的 Sybase 存储过程：如何处理返回码

> ID：888066
> 
> 赞同：2
> 
> 时间：2009-05-20T13:57:09.880
> 
> 标签：database, unix, stored-procedures, sybase, batch-processing

我有一个 AIX 批处理作业，它使用 isql 在 Sybase 中执行存储过程。存储过程在某些情况下返回错误代码。我希望 isql 将该返回码传递给 AIX 脚本。

我可以在 isql 中捕获存储的 proc 的返回代码，还是我必须编写某种输出文件并让我的 AIX 脚本检查它？

这是 isql 命令的外观。它在 Korn shell 脚本中运行。

```
isql -D$database -S$server -U$userId -P$password << EOF
EXEC MY_STORED_PROC $AN_INPUT_PARAMETER
go
EOF 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T14:32:48.433

如果我没记错的话，`$?`设置为命令返回值。在该行之后添加类似这样的`EOF`内容：

```
 if [[ $? != 0 ]]; then
    print "stored procedure failed"
    exit
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-12T16:53:29.097

这是你想要达到的目标吗？

```
isql -D$database -S$server -U$userId -P$password << EOF | grep RETVAL | awk -F"=" '{print $2}' | read value
declare @retval int
EXEC @retval = MY_STORED_PROC $AN_INPUT_PARAMETER
SELECT "RETVAL=" + convert(varchar, @retval)
go
EOF

echo "Procedure returned: $value" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-23T11:56:04.753

添加`--retserverror`ISQL 命令，然后`$?`按照 Nikolai 所述使用。

# java - 合并 JXTreeTable 中的单元格

> ID：888076
> 
> 赞同：5
> 
> 时间：2009-05-20T14:00:00.920
> 
> 标签：java, swing, merge, cells, jxtable

我想合并 JXTreeTable 中的两个单元格。这可能吗？我已经阅读了[在 JTable 中合并单元格](https://stackoverflow.com/questions/476721/merging-cells-in-jtable)的解决方案，但这不适用于 JXTreeTables。

我的意思是合并单元格：我想创建一个这样的结构：

`node 1    | title for 3 cells | title for 3 cells |
  subnode |  c1  | c2  |  c3  |  c1  | c2  |  c3  |
  subnode |  c1  | c2  |  c3  |  c1  | c2  |  c3  |` 

所以“3 个单元格的标题”是通过在同一行/节点上合并 3 个不同的单元格来创建的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-31T07:10:17.757

不幸的是，根据[http://www.inf.furb.br/~piva/downloads/compilador/Compilador/Compilador/bibliotecas%20extras/swinglabs-0.8.0-bin/swinglabs/docs/api/org/jdesktop/swingx/ JXTreeTable.html](http://www.inf.furb.br/~piva/downloads/compilador/Compilador/Compilador/bibliotecas%20extras/swinglabs-0.8.0-bin/swinglabs/docs/api/org/jdesktop/swingx/JXTreeTable.html)和其中的链接，似乎类本身没有这样的“合并”功能 - 在我看来，您只需要在应用程序级代码中执行类似“合并”的操作。

# c++ - 如何使用 CMake 将文件添加到 Eclipse CDT 项目？

> ID：888085
> 
> 赞同：2
> 
> 时间：2009-05-20T14:01:06.407
> 
> 标签：c++, eclipse, cmake

我在使用 CMake 将源文件和头文件添加到我的 Eclipse CDT 项目中时遇到问题。在我的测试项目（生成和构建良好）中，我有以下 CMakeLists.txt：

```
cmake_minimum_required(VERSION 2.6)

project(WINCA)

file(GLOB WINCA_SRC_BASE "${WINCA_SOURCE_DIR}/src/*.cpp")
file(GLOB WINCA_SRC_HPP_BASE "${WINCA_SOURCE_DIR}/inc/*.hpp")

add_library(WINCABase ${WINCA_SRC_BASE} ${WINCA_SRC_HPP_BASE}) 
```

这工作正常，但生成的 Eclipse 项目文件不包含指向源文件或头文件的链接。有谁知道为什么？我必须使用任何其他 cmake 命令将文件实际添加到项目中吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-14T01:52:55.297

我意识到你已经有一段时间没有发布这个了，但是fwiw，它适用于我为 Eclipse/Ganymede 生成的 CMake 2.6 或 2.7（主干）版本。我要做的是第一次运行

```
cmake -G "Eclipse CDT4 - Unix Makefiles" /path/to/src 
```

它生成 Eclipse 项目文件以及 makefile，然后在 Eclipse 中“导入项目”。

工作精美...

狡猾

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T16:41:15.337

我使用 CMake 2.4，而不是 2.6，但在 2.4 中，他们特别警告不要使用 GLOB 来查找要构建的文件。

这是因为它会注意到是否添加或删除了新文件，因此它无法找出依赖关系。

如果您必须将文件显式添加到 CMakeLists.txt 中，则此文件将比 makefile 和缓存文件更新。所以 CMake 会知道重新生成它们。

如果文件是用 glob 添加的，CMake 不知道随着您添加新文件而发生的更改，因此 CMake 不知道它必须重新生成 makefile 等。这对于常规 makefile 和 Visual Studio 项目是相同的。

除非 CMake 2.6 文档明确表示可以添加这样的文件，否则我会避免使用它。在 cmake 中管理源文件并不难。您多久添加一次新文件？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-15T11:26:04.517

我遇到的问题是我做了一个“源内”构建而不是“源外”构建。现在它工作正常，实际上维基上有很多关于此的信息，但不知何故我误解了它。

# java - 如何使用特定语言环境在 Java 中将 String 转换为 Double？

> ID：888088
> 
> 赞同：41
> 
> 时间：2009-05-20T14:01:46.017
> 
> 标签：java, localization

我想将我作为字符串获得的一些数字转换为双精度数，但这些数字不在美国标准语言环境中，而是在不同的语言环境中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2009-05-20T14:04:50.363

试试[`java.text.NumberFormat`](http://java.sun.com/javase/6/docs/api/java/text/NumberFormat.html)。来自 Javadocs：

> 要为不同的区域设置格式化数字，请在对 getInstance 的调用中指定它。
> 
> ```
> NumberFormat nf = NumberFormat.getInstance(Locale.FRENCH); 
> ```
> 
> 您还可以使用 NumberFormat 来解析数字：
> 
> ```
> myNumber = nf.parse(myString); 
> ```

[`parse()`](http://java.sun.com/javase/6/docs/api/java/text/NumberFormat.html#parse(java.lang.String))返回一个[`Number`](http://java.sun.com/javase/6/docs/api/java/lang/Number.html)；所以要得到一个`double`，你必须打电话[`myNumber.doubleValue()`](http://java.sun.com/javase/6/docs/api/java/lang/Number.html#doubleValue())：

```
 double myNumber = nf.parse(myString).doubleValue(); 
```

请注意，这`parse()`将永远不会返回`null`，因此这不会导致`NullPointerException`. 相反，如果失败则`parse`抛出一个检查。`ParseException`

**编辑：**我最初说还有另一种转换方式`double`：将结果转换为`Double`并使用拆箱。我认为，由于使用了一个通用实例`NumberFormat`（根据 Javadocs for [`getInstance`](http://java.sun.com/javase/6/docs/api/java/text/NumberFormat.html#getInstance(java.util.Locale))），它总是会返回一个`Double`. 但是[DJClayworth](https://stackoverflow.com/users/19276/djclayworth)指出，Javadocs for [`parse(String, ParsePosition)`](http://java.sun.com/javase/6/docs/api/java/text/NumberFormat.html#parse(java.lang.String,%20java.text.ParsePosition))（由 调用`parse(String)`）表示`Long`如果可能返回 a。因此，**将结果转换为`Double`是不安全的，不应尝试！**
*谢谢，DJClayworth！*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-20T14:17:58.590

NumberFormat is the way to go, but you should be aware of its peculiarities which crop up when your data is less than 100% correct.

I found the following usefull:

[http://www.ibm.com/developerworks/java/library/j-numberformat/index.html](http://www.ibm.com/developerworks/java/library/j-numberformat/index.html)

If your input can be trusted then you don't have to worry about it.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-26T04:04:29.823

刚学java和编程。有类似的问题。在我的教科书中发现了这样的东西：

```
Scanner sc = new Scanner(string);
double number = sc.nextDouble(); 
```

这本书说扫描器会自动解码字符串变量中的内容，并且 Scanner 类会自动适应设置的语言环境，系统语言环境是默认设置，但这很容易设置为其他内容。

我以这种方式解决了我的问题。也许这可以解决上述问题而不是解析？

另外：我喜欢这种方法的原因是，当使用摇摆对话框框进行输入然后尝试使用解析将字符串转换为双精度时，我得到了 NumberFormatException。事实证明，parse 只使用美国数字格式，而 Scanner 可以处理所有格式。即使使用逗号 (,) 小数分隔符，扫描仪也能完美地完成输入工作。由于投票最多的答案使用 parse 我真的不知道它将如何解决这个特定问题。您必须以美国格式输入您的数字，然后将它们转换为您的语言环境格式。当数字键盘带有逗号时，这是相当不方便的。

现在你们都可以把我撕成碎片了；）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-20T14:06:39.097

你使用一个`[NumberFormat](http://java.sun.com/j2se/1.4.2/docs/api/java/text/NumberFormat.html)`. [这](http://www.java-forums.org/java-text/7645-parsing-number-using-numberformat.html)是一个例子，我认为它看起来是正确的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-20T14:05:35.727

使用 java.text.DecimalFormat 应该没有问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-20T14:07:58.530

使用 NumberFormat.getNumberInstance(Locale)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-20T14:11:38.400

你知道它是哪个地区吗？然后你可以使用

```
DecimalFormat format = DecimalFormat.getInstance(theLocale);
format.parse(yourString); 
```

这甚至适用于科学记数法、带有百分号的字符串或带有货币符号的字符串。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-10-09T13:54:23.337

以下是`parseDouble`将 a 转换`String`为 a 的方法`Double`：

**doubleExample.java**

```
import java.io.BufferedReader;

import java.io.IOException;

import java.io.InputStreamReader; 

public class doubleExample {

        public static void main(String[] args) {

                Double myDouble = new Double("0");
                System.out.println("Please enter a number:");

                try
                {
                        //get the number from console
                        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
                        myDouble = Double.parseDouble(br.readLine());
                }
                //if invalid value was entered
                catch(NumberFormatException ne)
                {
                        System.out.println("Invalid value" + ne);
                        System.exit(0);
                }
    catch(IOException ioe)
                {
                        System.out.println("IO Error :" + ioe);
                        System.exit(0);
                }

                System.out.println("Double value is " + myDouble);
        }
} 
```

# windows - 用于 Windows Mobile 的 C++ WinInet 包装器

> ID：888091
> 
> 赞同：0
> 
> 时间：2009-05-20T14:02:17.873
> 
> 标签：windows, mobile, wrapper, wininet

环境：Win32、C++/VS2008

我需要使用 Windows Mobile 手机从 Internet 发出 HTTP（*而不是*HTTPS）请求并节省时间 + 重新发明轮子，想知道这里是否有人可能会分享一个简单的 C++（Win32？）WinInet 包装器或类似的班级？

到目前为止，我使用 Google 发现的最接近的是在[codeproject](http://www.codeproject.com/KB/IP/wininet_wrapper_part1.aspx)上，但想知道这里是否有人可能有更好的实现。

谢谢你。 **:)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T08:56:56.110

WinInet API 在 Windows 上与在 Windows CE 上相同。而且它非常容易编程。为什么在继续之前需要一个非常简单的 C API 的 c++ 包装器？

如果您需要有关 WinInet 的帮助，请提出一个实际问题。

在最简单的情况下，WinInet 的使用将从 InternetOpen 开始，然后是 InternetOpenUrl 和 InternetReadFile。制作一个类来总结对它的访问实际上是留给读者的练习。

# vb.net - .Net 列表到 SOAP 数组并返回到 .Net 列表

> ID：888098
> 
> 赞同：1
> 
> 时间：2009-05-20T14:04:06.387
> 
> 标签：vb.net, soap

在 Web 服务 CarService 中，

*   我有一门叫汽车的课。
*   Car 有很多属性，即 Car.Color。
*   CarService 有一个名为 GetCars() 的方法。
*   在 GetCar 中，我有一个循环，它附加了一个列表，你猜对了……汽车。

    将汽车列表调暗为新列表（汽车）

    Do While rdr.Read() If rdr.GetValue(1).ToString().Length > 0 Then Dim c As Car = New Car c.Color = rdr.GetValue(1).ToString() carList.Add(c)结束 If 循环

GetCars() 返回汽车列表。
我在另一个项目中还有另一个页面使用该数据。
或者至少，我愿意，这是我的问题..

如果我做..

```
Dim myNewCars As List(Of Namespace.Car)
myNewCars = CarServiceProxy.GetCars() 
```

我得到：

“Namespace.Car 的一维数组”类型的值无法转换为“System.Collections.Generic.List(Of Namespace.Car)”。

将这个一维数组转换回汽车列表的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T14:09:17.717

不改变什么？使用`List<T>`接受的构造函数`IEnumerable<T>`- 所以在 C# 中（我的 VB 不是很好）：

```
List<Car> myNewCars = new List<Car>(CarServiceProxy.GetCars()); 
```

如果你能改变事情；或许可以考虑诸如 WCF 用法之类的事情，您可以在其中指定（所有方法的）集合类型 -`scvutil /collectionType:`开关。不过，更改为 WCF 堆栈并非易事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T14:08:19.187

使用 .NET 3.5（和 .NET 4.0），您可以：

```
Dim myNewCars As List(Of Namespace.Car)
myNewCars = CarServiceProxy.GetCars().ToList() 
```

# windows - 多作业池打印机控制

> ID：888099
> 
> 赞同：0
> 
> 时间：2009-05-20T14:04:22.360
> 
> 标签：windows, pdf, printing, pdf-generation, pooling

我们在池中配置了 4 台具有相同托盘/纸张的打印机。可以提交多个作业，并且它将以循环方式将作业发送到每个空闲的打印机。这很好用，但是.. 我们正在开发一个基于 Web 并生成 PDF 输出文件的新应用程序。数据“集”可能涉及 3 个不同的打印“作业”，这些打印“作业”出现在 3 个不同的托盘上，但一旦完成，最好仅从其中一个打印机上提取。有什么建议如何发送 3 个打印“作业”，但该“组”作业都排在只有一台物理打印机上吗？目前有一个 3rd 方后台处理程序，它很旧，有点蹩脚，我

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-04T16:14:40.503

最好的方法是在将 PDF 文件发送到打印机之前合并它们。这将允许在单个打印作业中发送 PDF 文件“集”，并确保将它们发送到单个打印机。这将与 Windows 打印机池兼容，并且可以在没有 3rd 方后台处理程序应用程序的情况下工作。

组合 PDF 文件的一种方法是使用免费的 PDFTK 命令行工具包，网址为： [http ://www.accesspdf.com/pdftk/](http://www.accesspdf.com/pdftk/)

cat 命令可用于将 PDF 文件组合成单个 PDF 用于打印作业“设置”：

```
pdftk 1.pdf 2.pdf 3.pdf cat output 123.pdf 
```

# python - 为什么python在解释之前将源代码编译为字节码？

> ID：888100
> 
> 赞同：15
> 
> 时间：2009-05-20T14:04:26.167
> 
> 标签：python, compiler-construction, interpreter, bytecode

为什么python在解释之前将源代码编译为字节码？

为什么不直接从源头解释呢？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-05-20T14:07:45.037

几乎没有解释器真正地*直接*逐行解释代码——这实在是太低效了。几乎所有解释器都使用一些可以轻松执行的中间表示。此外，可以对这个中间代码进行小的优化。

Python 还存储了这段代码，这对于下次执行这段代码有很大的好处：Python 不再需要解析代码；解析是编译过程中最慢的部分。因此，字节码表示大大减少了执行开销。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-20T14:07:35.990

因为您可以编译`.pyc`一次并从中多次解释。

因此，如果您多次运行脚本，您只需解析一次源代码的开销。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-20T14:07:17.970

因为直接从字节码解释更快。一方面，它避免了进行词法分析的需要。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-20T14:12:39.520

一遍又一遍地重新分析和解析源代码，而不是只做一次（通常是第一次`import`），显然是一种愚蠢而毫无意义的浪费努力。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-07-27T16:55:51.280

虽然它有一个小的效率方面（您可以将字节码存储在磁盘或内存中），但它主要是工程：它允许您将解析与解释分开。解析器通常是令人讨厌的生物，充满了边缘情况，并且必须遵守深奥的规则，例如使用适量的前瞻和解决移位减少问题。相比之下，解释非常简单：它只是一个使用字节码操作码的大 switch 语句。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-07-26T11:03:26.430

我非常怀疑原因是性能，尽管它是一个很好的副作用。我想说的是，自然而然地认为围绕某种高级汇编语言构建的 VM 比在某些源代码字符串中查找和替换文本更实用。

编辑：

好吧，很明显，谁曾在我的帖子上投过 -1 票而没有留下合理的评论来解释，他们对虚拟机（运行时环境）知之甚少。

[http://channel9.msdn.com/shows/Going+Deep/Expert-to-Expert-Erik-Meijer-and-Lars-Bak-Inside-V8-A-Javascript-Virtual-Machine/](http://channel9.msdn.com/shows/Going+Deep/Expert-to-Expert-Erik-Meijer-and-Lars-Bak-Inside-V8-A-Javascript-Virtual-Machine/)

# c# - ASP.NET：CheckBoxList 和 OnSelectedIndexChanged 的 问题

> ID：888114
> 
> 赞同：0
> 
> 时间：2009-05-20T14:07:01.920
> 
> 标签：c#, asp.net

我遇到了 CheckBoxList 和 OnSelectedIndexChanged 的​​问题：

```
 <asp:UpdatePanel runat="server">
                <ContentTemplate>

                     <asp:CheckBoxList 
                        id="lstWatchEType" 
                        runat="server" 
                        DataTextField="DescriptionText" 
                        DataValueField="Id"
                        AutoPostBack="true"
                        OnSelectedIndexChanged="lstWatchEType_SelectedIndexChanged"/>

                </ContentTemplate>
            </asp:UpdatePanel> 
```

这是在 Page_Load (!IsPostBack) 中填充的

```
public static void PopulateWatchEType(CheckBoxList list, Guid clientId)
        {
            OffertaDataContext db = new OffertaDataContext();

            var ds = (from e in db.EnquiryTypes select new {
                Id = e.Id,
                DescriptionText = e.DescriptionText,
                IsWatching = !db.WatchXrefEnquiryTypes.Any(f => f.ClientId.Equals(clientId) && f.EnquiryTypeId==e.Id && f.Inbox==false)
            });

            list.DataSource = ds;
            list.DataBind();

            foreach(var item in ds)
            {
                list.Items.FindByValue(item.Id.ToString()).Selected = item.IsWatching;
            }
        } 
```

我的问题在于：

```
 protected void lstWatchEType_SelectedIndexChanged(Object sender, EventArgs e)
    {
        ListItem item = lstWatchEType.SelectedItem;
        ...
    } 
```

哪里 item 总是列表中的第一个元素？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T15:37:11.377

selected item 属性将返回列表中索引最低的选定项目。如果第一个项目被选中，那么它将返回第一个项目。

要获取最新选择的项目，也许您可​​以创建一个全局变量并在索引更改时设置该变量。您可以创建一个 ListItem 集合，该集合首先包含所有初始选定索引，如 Kirtan 建议的那样，然后创建一个新集合，该集合在选定索引更改时包含所有最新选择。匹配这两个列表，新列表中没有旧列表中的任何项目都是您最近选择的索引。

希望这可以帮助。

# .net - 是否可以查看附属程序集的内容？

> ID：888118
> 
> 赞同：0
> 
> 时间：2009-05-20T14:07:41.060
> 
> 标签：.net, localization, satellite-assembly

我认为某家公司生产的应用程序中的一些附属程序集已不复存在。我想确认它们是我认为的（命名是正确的，但是......）并看看它们里面有什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T14:14:47.923

[.NET Reflector](http://www.red-gate.com/products/reflector/)可能是您的答案。

公司可能[混淆](http://en.wikipedia.org/wiki/Obfuscation)了它的程序集，但你只能通过查看反汇编代码才能发现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T14:17:01.883

试试[反光板](http://www.red-gate.com/products/reflector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-29T13:37:36.353

[JetBrains 的dotPeek](https://www.jetbrains.com/decompiler/)也可以完成这项工作

# authentication - 某台计算机的唯一标识

> ID：888123
> 
> 赞同：0
> 
> 时间：2009-05-20T14:08:08.220
> 
> 标签：authentication, identify

我有以下情况，似乎在网上找不到任何东西，或者我正在寻找错误的东西：

我正在开发一个基于网络的数据存储系统。有不同的用户和不同的地方，只有某些用户被允许访问系统的某些部分。现在，我们不希望他们在家中或使用不同于他们在工作场所使用的计算机连接到这些部件（原因不同）。

现在我的问题是：如果有办法让工作场所电脑通过浏览器以某种方式向服务器标识自己，我该怎么做？哦，是的，它应该是基于网络的。

我希望我解释了它，以便每个人都理解。感谢您提前回复。

... dg

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T14:17:26.080

由于您要基于网络，因此您可以：

检查远程主机的 IP 地址（将其与已知的内部子网等进行比较）

在认证过程中，你可以ping远程IP，看看返回的数据包的TTL，如果太低，则计算机不能来自本地网络。（当然这可以被打破，但这只是一件事）

如果您是通过 IIS 进行的，那么您可以集成到 SSO 中（如果可以的话，可能是最好的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T14:18:59.443

如果它应该是基于 Web 的（我的意思是 Web 服务器应该能够唯一地识别用户的机器），那么您的选择是有限的：就其本身而言，您无法从浏览器的标头或请求正文中获得任何信息这使您可以识别机器。由于明显的隐私影响，我想这是设计使然。

虽然有一些选择，但没有一个是无痛的：您可以使用 ActiveX 控件，但它只能在 Windows 上运行（而不是在我认为的所有浏览器上）并且需要提升的权限。你可以想到一个 Firefox 插件（显然只有 Firefox）。无论如何，一个普通的浏览器会逃避识别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T14:20:39.490

对此只有少数真正的解决方案。这里有一对：

1.  使用域身份验证，并禁止通过 VPN 连接的用户。
2.  使用已知的 IP 范围来允许或禁止访问。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T14:37:23.463

我同意 Lenni 的观点……如果 IP 地址是静态的，或者 DHCP 服务器始终将相同的 IP 地址分配给同一台机器，那么 IP 地址是一种可能的解决方案。

或者，您也可以考虑通过“个人证书”进行身份验证......这就是他们在 Firefox 中所指的，不知道这是不是标准名称。（显然我以前没有使用过这些。）

基本上，它们是安装在客户端（用户）机器上的 SSL 或 PKI 证书，用于*将该*机器识别为它所说的机器——也就是说，如果用户尝试从没有证书的机器连接或者没有您允许的证书，您会拒绝他们。

我不知道这方面的问题......对于同一用户来说，从一台计算机上取下证书并使用正确密码将其安装在另一台计算机上（即它验证*用户）**可能*相对容易，或者它可能是以某种方式专门键入该机器（即它验证*机器*）。快速的谷歌搜索并没有找到任何明显的“如何”说明它是如何工作的，但它可能值得研究。

 **---劳伦斯

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-05-20T14:10:02.130

IP地址。不是防弹安全，而是一个开始。

# sql-server-2005 - 有没有更好的方法来确定表中的列是否为空？

> ID：888126
> 
> 赞同：0
> 
> 时间：2009-05-20T14:08:23.163
> 
> 标签：sql-server-2005, tsql

我在 SQL Server 2005 数据库中有一个说 T 的表，它有两列 A 和 B，它们通常没有任何值。如何检查 A 和 B 是否为空（全为零长度字符串）？

我有这种天真的方式-

```
select count(*) as A_count from T where A <> '' 
```

假设 A 的数据类型为 varchar。

我想知道是否可以使用系统表获得相同的信息，如果可以，那会比这个查询更快吗？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T14:11:34.047

您的方法基本上是正确的，尽管您问题中的措辞不准确。empty 是否包括 NULL 或非零长度的空字符串？

您可以通过以下方式处理这些情况：

```
select count(*) as A_count from T where isnull(rtrim(ltrim(A)), '') <> '' 
```

另外，请确保 A 列上有索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T14:13:14.277

如果我们谈论的是零长度字符串，那么我会这样做：

```
select count(*) as A_count from T where LEN(A) > 0 
```

但是请记住，如果 A 可能为空，那么这些行将不会被 LEN(A) > 0 或 LEN(A) = 0 捕获，并且在这种情况下，您必须在 A 周围包裹一个 ISNULL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T14:28:51.500

如果您的列可以为空，则必须按如下方式修改查询：

select count(*) as A_count from T where COALESCE(A, '') <> ''

否则你不会算空值。

# teamcity - 64 位上的 NCover - CorFlags 修复 - corflags：错误 CF008：指定的文件没有有效的托管标头

> ID：888144
> 
> 赞同：0
> 
> 时间：2009-05-20T14:10:36.733
> 
> 标签：teamcity, code-coverage, ncover, corflags

我正在尝试应用修复程序以允许 NCover v1.5.5 通过我的 TeamCity 持续集成服务器在 Windows Server 2008 X64 上运行，如本博客所述：

[http://abdullin.com/journal/2008/6/6/how-to-run-free-ncover-on-a-64-bit-machine.html](http://abdullin.com/journal/2008/6/6/how-to-run-free-ncover-on-a-64-bit-machine.html)

这是我的日志：

```
[09:47:04]: run-unit-tests:
[09:47:04]: [echo] Running NCover: tools\ncover\NCover.Console.exe with workingdir='build\Debug\UnitTests'
[09:47:04]: [exec] NCover.Console v1.5.5 - Code Coverage Analysis for .NET - http://ncover.org
[09:47:04]: [exec] Copyright (c) 2004-2005 Peter Waldschmidt
[09:47:04]: [exec]
[09:47:04]: [exec]
[09:47:04]: [exec] Command: ..\..\..\tools\nunit\nunit-console.exe
[09:47:04]: [exec] Command Args: "UnitTests.dll" "/xml:..\..\test-reports\UnitTests.xml" "/nologo"
[09:47:04]: [exec] Working Directory: .
[09:47:04]: [exec] Assemblies:
[09:47:04]: [exec] Coverage Xml: D:\TeamCity\buildAgent\work\a65ff8d0771db303\build\test-reports\Coverage.xml
[09:47:04]: [exec] Coverage Log: Coverage.Log
[09:47:04]: [exec]
[09:47:07]: [exec] Waiting for profiled application to connect.......N.N.N.N..N.......
[09:47:07]: [exec] Tests run: 11, Failures: 0, Not run: 5, Time: 1.096 seconds
[09:47:07]: [exec]

[09:47:07]: [exec]
[09:48:04]: [exec] Connected
[09:48:04]: [exec] **Profiled process terminated. Profiler connection not established.**
[09:48:04]: BUILD FAILED 
```

所以我试图应用 CorFlags 技巧使其工作，但我收到一个错误：

C:\Program Files (x86)\Microsoft.NET\SDK\v2.0\Bin>CorFlags.exe D:\TeamCity\build Agent\work\a65ff8d0771db303\tools\NCover\NCover.exe /32BIT+

Microsoft (R) .NET Framework CorFlags 转换工具。版本 2.0.50727.42 版权所有 (c) Microsoft Corporation。版权所有。

**corflags：错误 CF008：指定的文件没有有效的托管标头**

有任何想法吗？？帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T15:41:17.237

实际上，我通过升级到更新版本的 NUnit 并将我的 NCover 任务更改为指向 X86 版本来解决这个问题：

```
 <exec program="tools\ncover\NCover.Console.exe" workingdir="${build.dir}\Debug\UnitTests">
        <arg value="//w &quot;.&quot;" />
        <arg value="//x &quot;..\..\test-reports\Coverage.xml&quot;" />
        <arg value="&quot;..\..\..\lib\NUnit-2.4.8-net-2.0\bin\nunit-console-x86.exe&quot;" />
        <arg value="&quot;UnitTests.dll&quot; &quot;/xml:..\..\test-reports\UnitTests.xml&quot; &quot;/nologo&quot;" />
    </exec> 
```

# .net - 如何说服我的管理员从 ASP.NET 2.0 升级到 3.5？

> ID：888145
> 
> 赞同：5
> 
> 时间：2009-05-20T14:10:50.163
> 
> 标签：.net, asp.net, .net-3.5, .net-2.0, asp.net-3.5

我试图说服我的 Web 服务器管理员将我们的 .NET 框架版本从 2.0 升级到 3.5。从服务器管理员的角度来看，我想知道升级的最佳理由是什么。显然，有保持最新、安全等方面的首要想法。我正在寻找一些坚定而快速的理由，让他们更难拒绝。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T14:13:40.407

升级 .NET 框架版本对他们来说不是什么大不了的事，因为它不会影响您已经拥有的东西（例如 2.0 应用程序）。它还将使您能够在更新的框架中开发新的应用程序，以便内置诸如 LINQ 和更好的 ASP.NET AJAX 之类的东西。

谈论说服他们将实际应用程序升级到 3.5 框架完全是另一回事，您需要对升级应用程序进行某种成本效益分析以说服他们（如果这实际上是您正在寻找的）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T14:14:38.550

From a server admin perspective? Not a lot, to be honest. The .NET framework is mainly a developer stack (LINQ, ASP.NET MVC, etc). The decision of which version of the OS/IIS would be more interesting from the admin angle.

I think you're going to have to justify 3.5 on a development basis (offsetting the resource cost of deployment/validation etc), not a sysadmin one.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T14:14:24.493

If you use AJAX then ASP.Net AJAX was inbuilt for 3.5 and also LINQ for SQL is a good plus

But here is a site [.Net Frameworks](http://dufoli.wordpress.com/2007/09/11/net-framework-11-20-30-35-21/) that shows the difference and added features from .net frameworks 1.0 and on. Compare those features to what you'll actually use to show its a huge plus.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T14:14:31.780

A good argument in favor of upgrading is that you are not upgrading the .NET runtime (the CLR) by upgrading from 2.0 to 3.5\. From a server admin perspective the .NET 3.5 install is really just adding new libraries.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T14:14:46.257

Not sure if this would sway them from a server admin perspective, but I think LINQ support and Silverlight support are two of the more attractive features with 3.5\.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T14:15:26.160

The best argument is going to be more for the application developers -- new functionality. As long as they're releasing security patches for .NET 2.0 it'll be hard to make a pure sysadmin-y type argument.

A better tack might be to persuade the higher-ups. "Hey, there's this new functionality like ASP.NET AJAX that's going to make us way more productive, produce more functionality in a shorter amount of time". Then they can lean on the sysadmins.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-20T14:14:10.733

.Net 3.5 安装在 .Net 2.0 旁边，而不是代替 .Net 2.0，因此从某种意义上说，这不是升级，因为一切突然变得更好（或更糟）或实际上以任何方式改变了现有服务器。

其价值在于能够开发利用框架中新功能的新代码。

# asp-classic - 在 asp 经典中获取完整路径的虚拟路径

> ID：888147
> 
> 赞同：8
> 
> 时间：2009-05-20T14:11:13.220
> 
> 标签：asp-classic, server.mappath, virtual-path

如何在 ASP 经典中获取完整路径的虚拟路径。请注意，完整路径可能位于虚拟目录下，因此过于简单

```
virtPath = Replace(fullPath, Server.MapPath("/"), "") 
```

方法行不通。

编辑：为了澄清，下面是一个例子

*   完整的 Windows 文件路径（已知）： **\\MyServer\MyShare\Web\Site\Logs\Test.txt**
*   我的网站有一个名为**Logs**的虚拟目录，它指向**\\MyServer\MyShare\Web\Site\Logs\**。
*   虚拟路径（未知）：/ Logs/ **Text.txt**
*   http路径（未知，需要）： **[http://Site/Logs/Test.txt](http://Site/Logs/Test.txt)**
*   该代码位于主应用程序的 asp 页面中，而不是任何虚拟目录下。它位于与相关文件不同的服务器上。
*   IIS 6.0

    如何从完整文件路径中找到虚拟路径？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2010-06-03T20:13:55.177

如果有人感兴趣，Anthony Jones 的回答向我展示了始终如一地获取应用程序相对根的方法。因此，如果您有一个位于[http://example.com的站点和一个位于](http://example.com)[http://localhost/example](http://localhost/example)的本地开发等价物，您可以使用以下函数找到您的根目录：

```
Function ToRootedVirtual(relativePath)
    Dim applicationMetaPath : applicationMetaPath = Request.ServerVariables("APPL_MD_PATH")
    Dim instanceMetaPath : instanceMetaPath = Request.ServerVariables("INSTANCE_META_PATH")
    Dim rootPath : rootPath = Mid(applicationMetaPath, Len(instanceMetaPath) + Len("/ROOT/"))
    ToRootedVirtual = rootPath + relativePath
End Function 
```

然后你可以这样调用它来获取根路径：

```
ToRootedVirtual("/") 
```

哪个会返回：

*   /在example.com上
*   /example/ 在 localhost/example 上

您也可以不使用斜线使用它：

```
ToRootedVirtual("") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T20:10:13.497

如果我理解了这个问题。

**假设**

完整路径是当前应用程序或子应用程序中的路径。它不是仅限于父应用程序的路径，也不是通向同级应用程序的路径。所需路径是相对于当前应用程序路径的。

**方案 1**

路径如

“/someApp/someFolder/someSubFolder/file.ext”

应该解决它： -

“~/someFolder/someSubFolder/file.ext”

（虽然 ~/ 符号不是 ASP 经典的理解）。

**方案 2**

“/someApp/someSubApp/SomeSubFolder/file.ext”

你还想要：-

“~/someFolder/someSubFolder/file.ext”

**方案 3**

该应用程序是该站点的根应用程序：-

“/someFolder/someSubFolder/file.ext”

仍然会变成

“~/someFolder/someSubFolder.file.ext”

**解决方案**

解决这个问题的关键是：-

```
Dim sAppMetaPath : sAppMetaPath = Request.ServerVariables("APPL_MD_PATH") 
```

对于上述场景，这将导致如下结果：-

1.  “/LM/W3SVC/33230916/Root/someApp”
2.  “/LM/W3SVC/33230916/Root/someApp/someSubApp”
3.  “/LM/W3SVC/33230916/根”

还

```
Dim sInstanceMetaPath: sInstanceMetaPath = Request.ServerVariables("INSTANCE_META_PATH") 
```

在所有情况下都会返回

“/LM/W3SVC/33230916”

通过一些数学简化，我们可以得出函数：-

```
Function ToAppRelative(virtualPath)

    Dim sAppMetaPath : sAppMetaPath = Request.ServerVariables("APPL_MD_PATH")
    Dim sInstanceMetaPath: sInstanceMetaPath = Request.ServerVariables("INSTANCE_META_PATH")

    ToAppRelative = "~/" & Mid(virtualPath, Len(sAppMetaPath) - Len(sInstanceMetaPath) - 3)

End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T14:20:11.253

Although there may be a better way, I always did this by creating a config variable where I manually specify the root path that is not part of the virtual path. This is because you do not know if the site will be deployed as root, under a folder in root web, or in a virtual directory.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T17:40:15.280

好吧，我的答案并不比 OrbMan 的好……

我以这样一种方式组织我的应用程序，即每个包含都是相对的......

那是

而不是 \myapp\lib\somefile.asp 我使用 ..\lib\somefile.asp

在其他情况下，我只是按照 Orbman 所说的去做......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T21:20:40.293

以下是您如何通过 ASP 解决 html 中的根相关路径，以便您的站点可以移植到不同的托管目录。

这个小片段将生成正确的前缀来设置您的 URL：

```
Mid(Request.ServerVariables("APPL_MD_PATH"),Len(Request.ServerVariables("INSTANCE_META_PATH"))+6) 
```

您可以在 LINK、IMG、超链接等中使用它，如下所示：

```
<link href="<%= Mid(Request.ServerVariables("APPL_MD_PATH"),Len(Request.ServerVariables("INSTANCE_META_PATH"))+6) %>/assets/css/master.css" rel="stylesheet" type="text/css" /> 
```

因此，将您的路径编码为相对于根的路径（以 / 开头），然后将此代码段放在第一个斜杠前面的引号内：

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T11:34:10.213

**服务器的虚拟路径是：**

```
<%Response.Write "http://" & Request.ServerVariables("server_name") &  
left(Request.ServerVariables("SCRIPT_NAME"),InStrRev(Request.ServerVariables("SCRIPT_NAME"),"/"))   %>
</p> 
```

# visual-studio - Visual Studio 报告错误“PFX - 导入密钥/对象错误已存在”

> ID：888148
> 
> 赞同：2
> 
> 时间：2009-05-20T14:11:25.107
> 
> 标签：visual-studio, clickonce, pfx

我有一个[Visual Studio 2008](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2008) [ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)解决方案，我试图在打开“签名清单”的情况下进行编译。

选中此选项后，系统会提示我输入 PFX 文件密码，输入正确密码后，我会收到错误消息：

> “导入密钥时出错”/“对象已存在”。

我确定我已经灌了一些东西。我试图运行以下无济于事。

```
CERTUTIL -importPFX -user <pfxname>.pfx AT_SIGNATURE 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-10-29T12:52:11.727

我有同样的问题。使用“以管理员身份运行”启动 Visual Studio 解决了该问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-08-27T15:04:15.183

我不知道这是否有助于解决这个问题，但我在从 Vista 升级到 Windows 7 后遇到了类似的情况，只需更改 MachineKeys 文件夹的权限（C:\Documents and Settings\All Users\ApplicationData\Microsoft \Crypto\RSA\ 在 Windows 7 中）

请参阅此处： [证书问题 - Windows 7 升级后导入密钥“对象已存在”时出错](https://stackoverflow.com/questions/1341108/certificate-problem-error-importing-key-object-already-exists-after-windows-7/1341619#1341619)

让我知道这是否有帮助:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T20:57:41.180

我刚刚发现解决此问题的另一种方法：取消选中“签署 ClickOnce 清单”，从解决方案资源管理器中的项目中排除证书文件。重命名证书文件。没关系，只要不一样。重新启用签名并选择新文件。按要求输入密码。建造，耶！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-09-09T23:38:53.180

只是想添加我自己对这个问题的经验。

在进行了一系列系统类型更改后，我的突然出现了……其中一个正在打开 Vista UAC 以测试我正在开发的应用程序。

遇到这个确切的问题，它不会编译。我吓坏了...

...修复 ...\RSA\MachineKeys 文件夹上的权限似乎已经解决了问题，但查看它的权限并注意到 devenv.exe（VS IDE）没有被告知“以管理员身份运行”此问题可能是由 UAC 限制引起的。

我*讨厌*Vista 中的伪管理员模式......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-21T20:21:03.500

我目前也遇到了困难。我的情况与此有些不同，因为我正在尝试为我的程序集生成一个强名称密钥文件

我还没有解决这个问题，但我相信这是因为无论出于何种原因，密钥已经存在于用于生成密钥的 CSP 的密钥存储中。为什么密钥已经存在，我不知道，也没有找到删除它的方法，但是当我这样做时我会更新这个问题

# ruby-on-rails - Select all checkboxes

> ID：888173
> 
> 赞同：3
> 
> 时间：2009-05-20T14:14:27.550
> 
> 标签：ruby-on-rails, forms, checkbox

In my Rails app I've created a set of checkboxes as follows:

```
<div class="form_row">
        <label for="features[]">Features:</label>
        <% ['scenarios', 'news', 'role_profiles', 'private_messages', 'chatrooms', 'forums', 'polls'].each do |feature| %>
        <br><%= check_box_tag 'features[]', feature, (@features || {}).include?(feature) %>
        <%= feature.humanize %>
        <% end %>
</div> 
```

I'd like to know how to create a button that would "Select All".

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-08-24T15:55:47.180

使用 jQuery；

```
<script type="text/javascript">
      function selectAll(){
        $("input:checkbox").each(function(){
          $(this).attr('checked', true);
        });

        return false;
      }
</script> 
```

HTML 按钮：

```
<a href="#" onclick="selectAll()">Select All</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T18:42:12.393

If you use the Prototype JS, you might find this blog post helpful. It gives a fairly concise way to perform a select all.

[http://www.ryboe.com/2008/07/10/select-all-checkboxes-with-prototype-js.html](http://www.ryboe.com/2008/07/10/select-all-checkboxes-with-prototype-js.html)

In your view you could use the following snippet to create a "Select All" link:

```
<%= link_to_function("Select All","checkboxes.each(function(e){ e.checked = 1 })") %> 
```

In addition, you'd need the following Javascript code somewhere on the same page (or maybe even abstracted out to the `public/javascripts/application.js` file

```
var checkboxes = [];
checkboxes = $$('input').each(function(e){ if(e.type == 'checkbox') checkboxes.push(e) });
var form = $('options'); /* Replace 'options' with the ID of the FORM element */
checkboxes = form.getInputs('checkbox'); 
```

Here's the full source of a working example, if this doesn't work you might need to check to make sure your JS libraries are loading properly.

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title></title>
    <script type="text/javascript" src="http://www.google.com/jsapi" charset="utf-8"></script>
    <script type="text/javascript" charset="utf-8">
      var checkboxes;
      google.load("prototype", "1.6");
      google.setOnLoadCallback(function(){
        checkboxes = [];
        checkboxes = $$('input').each(function(e){ if(e.type == 'checkbox') checkboxes.push(e) });
        var form = $('options'); /* Replace 'options' with the ID of the FORM element */
        checkboxes = form.getInputs('checkbox');
      });
    </script>
  </head>
  <body>
    <form id="options">
      <fieldset><input type="text" value="test"></fieldset>
      <fieldset><input type="checkbox" value=0> 0</fieldset>
      <fieldset><input type="checkbox" value=1> 1</fieldset>
      <fieldset><input type="checkbox" value=2> 2</fieldset>
      <fieldset><input type="checkbox" value=3> 3</fieldset>
    </form>
    <a href="#" onclick="checkboxes.each(function(e){e.checked = 1})">Select All</a>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-01T12:50:44.223

我认为您可以使用这样的查询

```
<script>
$('#check_all').on("click", function(){
  var check = $('input[type="checkbox"]');
    check.prop("checked", !check.prop("checked"));
});
</script> 
```

并且 html 将类似于

```
<%= button_tag 'select / unselect all', id: 'check_all', class:'b' %> 
```

# wpf - 在 WPF 扩展器中更改标题的背景颜色

> ID：888179
> 
> 赞同：4
> 
> 时间：2009-05-20T14:15:17.657
> 
> 标签：wpf, user-interface, expander

我正在尝试更改扩展器背景颜色。这似乎很容易，但我无法让它工作。

```
<Expander Name="expOneDay">
        <Expander.Header>
            <TextBlock Foreground="CadetBlue" Text="Some Text" HorizontalAlignment="Stretch" />
        </Expander.Header>
 ...

</Expander><br/><br/> 
```

为什么没有`HorizontalAlignment="Stretch"`帮助？我正在尝试将宽度绑定`Header`到宽度，`Expander`但结果并不好看。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-20T14:33:28.370

在这里，这应该可以解决问题....您应该将标题模板的宽度设置为扩展器的宽度。

```
<Expander Name="expOneDay" 
          HorizontalAlignment="Stretch"
          HorizontalContentAlignment="Stretch" Width="Auto">
     <Expander.Header >
          <Border Background="Bisque">
               <TextBlock Foreground="White" Text="Steve" 
                          Width="{Binding ElementName=expOneDay, Path=ActualWidth}"
                          HorizontalAlignment="Stretch" />
          </Border>
     </Expander.Header>
</Expander> 
```

# c# - 将 DataTable 转换为 CSV 流

> ID：888181
> 
> 赞同：30
> 
> 时间：2009-05-20T14:15:20.623
> 
> 标签：c#, csv, datatable

当前有一个 DataTable，但希望通过 WebHandler 将其流式传输给用户。[FileHelpers](http://www.filehelpers.com/)有`CommonEngine.DataTableToCsv(dt, "file.csv")`. 但是，它将其保存到文件中。如何将其保存到流中？当我知道高级列或它们没有更改时，我知道该怎么做，但我想直接从数据表中生成列标题。

如果我知道我只是创建类的列：

```
[DelimitedRecord(",")]
public class MailMergeFields
{
    [FieldQuoted()]
    public string FirstName;
    [FieldQuoted()]
    public string LastName;
} 
```

然后使用 FileHelperEngine 并添加记录：

```
FileHelperEngine engine = new FileHelperEngine(typeof(MailMergeFields));

MailMergeFields[] merge = new MailMergeFields[dt.Rows.Count + 1];

// add headers
merge[0] = new MailMergeFields();
merge[0].FirstName = "FirstName";
merge[0].LastName = "LastName";

int i = 1;              
// add records
foreach (DataRow dr in dt.Rows)
{
    merge[i] = new MailMergeFields();
    merge[i].FirstName = dr["Forename"];
    merge[i].LastName = dr["Surname"];
    i++;
} 
```

最后写入一个流：

```
TextWriter writer = new StringWriter();
engine.WriteStream(writer, merge);
context.Response.Write(writer.ToString()); 
```

不幸的是，由于我事先不知道这些列，因此我无法事先创建该类。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2009-05-20T14:40:58.823

你可以自己快速写一些东西：

```
public static class Extensions
{
    public static string ToCSV(this DataTable table)
    {
        var result = new StringBuilder();
        for (int i = 0; i < table.Columns.Count; i++)
        {
            result.Append(table.Columns[i].ColumnName);
            result.Append(i == table.Columns.Count - 1 ? "\n" : ",");
        }

        foreach (DataRow row in table.Rows)
        {
            for (int i = 0; i < table.Columns.Count; i++)
            {
                result.Append(row[i].ToString());
                result.Append(i == table.Columns.Count - 1 ? "\n" : ",");
            }
        }

        return result.ToString();
    }
} 
```

并测试：

```
 public static void Main()
  {
        DataTable table = new DataTable();
        table.Columns.Add("Name");
        table.Columns.Add("Age");
        table.Rows.Add("John Doe", "45");
        table.Rows.Add("Jane Doe", "35");
        table.Rows.Add("Jack Doe", "27");
        var bytes = Encoding.GetEncoding("iso-8859-1").GetBytes(table.ToCSV());
        MemoryStream stream = new MemoryStream(bytes);

        StreamReader reader = new StreamReader(stream);
        Console.WriteLine(reader.ReadToEnd());
  } 
```

编辑：重新您的评论：

这取决于您希望如何格式化 csv，但通常如果文本包含特殊字符，您希望将其括在双引号中，即：“my,text”。您可以在创建 csv 的代码中添加检查以检查特殊字符并将文本括在双引号中（如果是）。至于 .NET 2.0 的东西，只需在您的类中将其创建为辅助方法或删除方法声明中的 this 一词并像这样调用它： Extensions.ToCsv(table);

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-20T02:00:52.340

**更新 1**

我已将其修改为使用 StreamWriter，添加一个选项以检查您的输出中是否需要列标题。

```
public static bool DataTableToCSV(DataTable dtSource, StreamWriter writer, bool includeHeader)
{
    if (dtSource == null || writer == null) return false;

    if (includeHeader)
    {
        string[] columnNames = dtSource.Columns.Cast<DataColumn>().Select(column => "\"" + column.ColumnName.Replace("\"", "\"\"") + "\"").ToArray<string>();
        writer.WriteLine(String.Join(",", columnNames));
        writer.Flush();
    }

    foreach (DataRow row in dtSource.Rows)
    {
        string[] fields = row.ItemArray.Select(field => "\"" + field.ToString().Replace("\"", "\"\"") + "\"").ToArray<string>();
        writer.WriteLine(String.Join(",", fields));
        writer.Flush();
    }

    return true;
} 
```

如您所见，您可以通过初始 StreamWriter 选择输出，如果使用 StreamWriter(Stream BaseStream)，则可以将 csv 写入 MemeryStream、FileStream 等。

**起源**

我有一个简单的 csv 函数数据表，它对我很有帮助：

```
 public static void DataTableToCsv(DataTable dt, string csvFile)
    {
        StringBuilder sb = new StringBuilder();

        var columnNames = dt.Columns.Cast<DataColumn>().Select(column => "\"" + column.ColumnName.Replace("\"", "\"\"") + "\"").ToArray();
        sb.AppendLine(string.Join(",", columnNames));

        foreach (DataRow row in dt.Rows)
        {
            var fields = row.ItemArray.Select(field => "\"" + field.ToString().Replace("\"", "\"\"") + "\"").ToArray();
            sb.AppendLine(string.Join(",", fields));
        }

        File.WriteAllText(csvFile, sb.ToString(), Encoding.Default);
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-20T14:35:47.523

如果您可以将数据表转换为 IEnumerable 这应该适合您...

```
 Response.Clear();
    Response.Buffer = true;

    Response.AddHeader("content-disposition", "attachment;filename=FileName.csv");
    Response.Charset = "";
    Response.ContentType = "application/text";
    Response.Output.Write(ExampleClass.ConvertToCSV(GetListOfObject(), typeof(object)));
    Response.Flush();
    Response.End();

public static string ConvertToCSV(IEnumerable col, Type type)
        {
            StringBuilder sb = new StringBuilder();
            StringBuilder header = new StringBuilder();

            // Gets all  properies of the class
            PropertyInfo[] pi = type.GetProperties();

            // Create CSV header using the classes properties
            foreach (PropertyInfo p in pi)
            {
                header.Append(p.Name + ",");
            }

            sb.AppendLine(header.ToString().Remove(header.Length));

            foreach (object t in col)
            {
                StringBuilder body = new StringBuilder();

                // Create new item
                foreach (PropertyInfo p in pi)
                {
                    object o = p.GetValue(t, null);
                    body.Append(o.ToString() + ",");
                }

                sb.AppendLine(body.ToString().Remove(body.Length));
            }
            return sb.ToString();
        } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-20T07:04:43.093

我不知道这是否从 VB 转换为 C# ok，但如果你不想在你的数字周围加上引号，你可以比较数据类型如下..

```
public string DataTableToCSV(DataTable dt)
{
    StringBuilder sb = new StringBuilder();
    if (dt == null)
        return "";

    try {
        // Create the header row
        for (int i = 0; i <= dt.Columns.Count - 1; i++) {
            // Append column name in quotes
            sb.Append("\"" + dt.Columns[i].ColumnName + "\"");
            // Add carriage return and linefeed if last column, else add comma
            sb.Append(i == dt.Columns.Count - 1 ? "\n" : ",");
        }

        foreach (DataRow row in dt.Rows) {
            for (int i = 0; i <= dt.Columns.Count - 1; i++) {
                // Append value in quotes
                //sb.Append("""" & row.Item(i) & """")

                // OR only quote items that that are equivilant to strings
                sb.Append(object.ReferenceEquals(dt.Columns[i].DataType, typeof(string)) || object.ReferenceEquals(dt.Columns[i].DataType, typeof(char)) ? "\"" + row[i] + "\"" : row[i]);

                // Append CR+LF if last field, else add Comma
                sb.Append(i == dt.Columns.Count - 1 ? "\n" : ",");
            }
        }
        return sb.ToString;
    } catch (Exception ex) {
        // Handle the exception however you want
        return "";
    }

} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-03T00:13:49.383

如果您希望在不创建文件的情况下将 CSV 流式传输给用户，那么我发现以下方法是最简单的方法。您可以使用任何扩展/方法来创建 ToCsv() 函数（它根据给定的 DataTable 返回一个字符串）。

```
 var report = myDataTable.ToCsv();
        var bytes = Encoding.GetEncoding("iso-8859-1").GetBytes(report);

        Response.Buffer = true;
        Response.Clear();
        Response.AddHeader("content-disposition", "attachment; filename=report.csv");
        Response.ContentType = "text/csv";
        Response.BinaryWrite(bytes);
        Response.End(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-20T15:46:56.147

您可以尝试使用类似的东西。在这种情况下，我使用一个存储过程来获取更多数据表并使用 CSV 导出所有数据表。

```
using System;
using System.Text;
using System.Data;
using System.Data.SqlClient;
using System.IO;

namespace bo
{
class Program
{
    static private void CreateCSVFile(DataTable dt, string strFilePath)
    {
        #region Export Grid to CSV
        // Create the CSV file to which grid data will be exported.
        StreamWriter sw = new StreamWriter(strFilePath, false);
        int iColCount = dt.Columns.Count;

        // First we will write the headers.

        //DataTable dt = m_dsProducts.Tables[0];
        for (int i = 0; i < iColCount; i++)
        {
            sw.Write(dt.Columns[i]);
            if (i < iColCount - 1)
            {
                sw.Write(";");
            }
        }
        sw.Write(sw.NewLine);

        // Now write all the rows.
        foreach (DataRow dr in dt.Rows)
        {
            for (int i = 0; i < iColCount; i++)
            {
                if (!Convert.IsDBNull(dr[i]))
                {
                    sw.Write(dr[i].ToString());
                }
                if (i < iColCount -1 )
                {
                    sw.Write(";");
                }
            }
            sw.Write(sw.NewLine);
        }
        sw.Close();

        #endregion
    }
    static void Main(string[] args)
    {
        string strConn = "connection string to sql";
        string direktorij = @"d:";
        SqlConnection conn = new SqlConnection(strConn); 
        SqlCommand command = new SqlCommand("sp_ado_pos_data", conn);
        command.CommandType = CommandType.StoredProcedure;
        command.Parameters.Add('@skl_id', SqlDbType.Int).Value = 158;
        SqlDataAdapter adapter = new SqlDataAdapter(command);
        DataSet ds = new DataSet();
        adapter.Fill(ds);
        for (int i = 0; i < ds.Tables.Count; i++)
        {
            string datoteka  = (string.Format(@"{0}tablea{1}.csv", direktorij, i));
            DataTable tabela = ds.Tables[i];
            CreateCSVFile(tabela,datoteka );
            Console.WriteLine("Generišem tabelu {0}", datoteka);
        }
        Console.ReadKey();
    }
  }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-22T16:14:55.177

我使用了以下代码，从某人的博客中掠夺（请原谅缺乏引用）。它通过引用每个字段值以相当优雅的方式处理引号、换行符和逗号。

```
 /// <summary>
    /// Converts the passed in data table to a CSV-style string.      
    /// </summary>
    /// <param name="table">Table to convert</param>
    /// <returns>Resulting CSV-style string</returns>
    public static string ToCSV(this DataTable table)
    {
        return ToCSV(table, ",", true);
    }

    /// <summary>
    /// Converts the passed in data table to a CSV-style string.
    /// </summary>
    /// <param name="table">Table to convert</param>
    /// <param name="includeHeader">true - include headers<br/>
    /// false - do not include header column</param>
    /// <returns>Resulting CSV-style string</returns>
    public static string ToCSV(this DataTable table, bool includeHeader)
    {
        return ToCSV(table, ",", includeHeader);
    }

    /// <summary>
    /// Converts the passed in data table to a CSV-style string.
    /// </summary>
    /// <param name="table">Table to convert</param>
    /// <param name="includeHeader">true - include headers<br/>
    /// false - do not include header column</param>
    /// <returns>Resulting CSV-style string</returns>
     public static string ToCSV(this DataTable table, string delimiter, bool includeHeader)
    {
        var result = new StringBuilder();

        if (includeHeader)
        {
            foreach (DataColumn column in table.Columns)
            {
                result.Append(column.ColumnName);
                result.Append(delimiter);
            }

            result.Remove(--result.Length, 0);
            result.Append(Environment.NewLine);
        }

        foreach (DataRow row in table.Rows)
        {
            foreach (object item in row.ItemArray)
            {
                if (item is DBNull)
                    result.Append(delimiter);
                else
                {
                    string itemAsString = item.ToString();
                    // Double up all embedded double quotes
                    itemAsString = itemAsString.Replace("\"", "\"\"");

                    // To keep things simple, always delimit with double-quotes
                    // so we don't have to determine in which cases they're necessary
                    // and which cases they're not.
                    itemAsString = "\"" + itemAsString + "\"";

                    result.Append(itemAsString + delimiter);
                }
            }

            result.Remove(--result.Length, 0);
            result.Append(Environment.NewLine);
        }

        return result.ToString();
    } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-01-17T14:48:58.500

```
public void CreateCSVFile(DataTable dt, string strFilePath,string separator)
        {               
            #region Export Grid to CSV
            // Create the CSV file to which grid data will be exported.

            StreamWriter sw = new StreamWriter(strFilePath, false); 
            int iColCount = dt.Columns.Count;
            for (int i = 0; i < iColCount; i++)
            {    
                sw.Write(dt.Columns[i]);    
                if (i < iColCount - 1)
                {
                    sw.Write(separator);
                }  
            }    

            sw.Write(sw.NewLine);

            // Now write all the rows.
            foreach (DataRow dr in dt.Rows)
            {
                for (int i = 0; i < iColCount; i++)
                {
                    if (!Convert.IsDBNull(dr[i]))
                    {
                        sw.Write(dr[i].ToString());  
                    }

                    if (i < iColCount - 1)
                    {
                        sw.Write(separator);
                    }
                }
                sw.Write(sw.NewLine);
            }

            sw.Close();
            #endregion
        } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-10-04T23:49:34.617

BFree 的回答对我有用。我需要将流直接发布到浏览器。我想这是一个常见的选择。为此，我在 BFree 的 Main() 代码中添加了以下内容：

```
//StreamReader reader = new StreamReader(stream);
//Console.WriteLine(reader.ReadToEnd());

string fileName = "fileName.csv";
HttpContext.Current.Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
HttpContext.Current.Response.AddHeader("content-disposition", string.Format("attachment;filename={0}", fileName));
stream.Position = 0;
stream.WriteTo(HttpContext.Current.Response.OutputStream); 
```

# ms-access - MS Access MSChart.Graph.8 not printing

> ID：888184
> 
> 赞同：0
> 
> 时间：2009-05-20T14:15:28.530
> 
> 标签：ms-access, printing, charts

> Software: Microsoft Access 2007 SP2
> Database File Version: Access 2000

I have an access program that I inherited from a previous employee. It uses forms for reports and since I don't have much experience in access I have continued to do this. I have created a copy of the program for another project and modified it to suit.

I am having trouble getting more then one chart to print. All the charts display in form view, they all have the same properties (excepting data, position, etc.) For some reason they are not printing. They don't even show up in the print preview.

I am thinking it must be something with the graphs themselves as they sometimes lose all information. I have to open the graphs in edit mode and change the data source from column to row and back again so that it gets redrawn. (Refresh doesn't fix it)

So right now I don't even have a clue as to where to look so ideas are welcome.

Edit #1

It seems to be a problem with linking to an unbound form.

> Subform Field Linker: Can't build a link between unbound forms.

The query for the main form is

```
SELECT tTest.ixTest, tMotorTypes.ixMotorType, tMotorTypes.asMotorType, tMotorTypes.fDeprecated, tTestType.asTest, tTest.asSerialNum, tTest.asOrderNum, tTest.asFrameNum, tTest.asRotorNum, tTest.asOperator, tTest.iStation, tTest.dtTestDate, tTest.ixTestType
FROM tMotorTypes 
INNER JOIN (tTestType 
  INNER JOIN tTest ON tTestType.ixTestType=tTest.ixTestType) 
ON tMotorTypes.ixMotorType=tTest.ixMotorType; 
```

The query for the chart is:

```
SELECT qGraphRSTTemperatures.Frequency, qGraphRSTTemperatures.[Drive End], qGraphRSTTemperatures.[Non Drive End], qGraphRSTTemperatures.[Air In], qGraphRSTTemperatures.Core 
FROM qGraphRSTTemperatures 
ORDER BY qGraphRSTTemperatures.ixTemperature; 
```

Query qGraphRSTTemperatures:

```
SELECT tElectricalData.dblFrequency AS Frequency, tTemperatures.dblDrvEnd AS [Drive End], tTemperatures.dblNonDrvEnd AS [Non Drive End], tTemperatures.dblAirIn AS [Air In], tTemperatures.dblCore AS Core, tSubTest.ixTest, tTemperatures.ixTemperature
FROM (tSubTest INNER JOIN tElectricalData ON tSubTest.ixSubTest = tElectricalData.ixSubTest) 
  LEFT JOIN tTemperatures ON tElectricalData.ixElectrical = tTemperatures.ixElectrical
WHERE (((tSubTest.ixSubTestType)=5))
ORDER BY tSubTest.ixTest, tTemperatures.ixTemperature; 
```

So how come, in the form view it shows the graph with the correct data when linked thus:

> Child field: ixTest
> Master field: ixTest

but won't print the graph.

The graph will print if I remove the links, but then I have all the data from chart query as it is not limited by ixTest.

edit #2

It seems to be a data retrieval/rendering issue in printing. Is there anything in printing that changes the context of records with respect to parent/child relationships?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-07-07T18:00:53.737

遇到了类似的问题... 带有图表的报告工作正常，直到我没有捕获的报告代码出现无效的语法问题。

显然，报告的代码无法正确编译，因此它没有正确链接到图表和子报告，即使手动输入链接字段，我也会得到相同的错误。

我的建议是检查表单或报告上的代码......然后编译代码并修复任何问题。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-16T12:44:28.593

我的报告也有类似的问题。我创建了一个组中的图表，为每个类别（比如部门）提供一个单独的图表。这些图表在报告视图（每个部门）和打印预览中都显示良好，但是当我打印到 pdf 时，只打印第一个图表。如果我打开报告并转到打印预览，然后打印到 PDF，效果很好。如果这是您在这里遇到的问题，那么我的解决方法是：

我使用 VBA 遵循顺序来解决问题。当在我的主窗体上单击一个按钮时，会发生以下事件（1）在打印预览中打开报告（隐藏），（2）打开打印对话框，创建 PDF 后，（3）报告关闭。

Dim stDocName As String stDocName = "我的报告名称"

(1) DoCmd.OpenReport stDocName, acViewPreview, , , acHidden

(2) DoCmd.RunCommand acCmdPrint

(3) DoCmd.Close acReport，“我的报告名称”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T19:22:01.073

我的解决方案来解决这个问题。

我创建了带有图形/图表的单独报告。我只是将表格中的图表复制并粘贴到报告中，它们就起作用了。

我不想这样做，因为它比以前使用了几张纸。我也对这个解决方案不满意，因为为什么仍然存在这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T19:12:36.293

检查控件的“显示时间”属性并确保将其设置为“始终”（如果您通过代码执行此操作，则始终为 0）。

要寻找的其他一些东西是“自动激活”属性。我相信它默认设置为“双击”。

# asp.net - Entity framework context as static

> ID：888185
> 
> 赞同：33
> 
> 时间：2009-05-20T14:15:56.923
> 
> 标签：asp.net, entity-framework

In a web application it would be ok if i declare the context of a entity framework model as static? it would be ok? its not recommended? why? Thanks!

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-05-20T16:18:24.150

几乎绝对不是。

随着越来越多的对象被查询/保存，ObjectContexts 变得越来越大。

同样不建议在线程之间共享 ObjectContext，因为您将不得不处理锁定问题和不确定的副作用。

不久前我写了一篇关于这个话题的小贴士。

[技巧 18 - 如何决定你的 ObjectContext 的生命周期](http://blogs.msdn.com/alexj/archive/2009/05/07/tip-18-how-to-decide-on-a-lifetime-for-your-objectcontext.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-20T14:20:01.207

This [answer sort of answers your question](https://stackoverflow.com/questions/549393/linqtosql-declare-and-instantiate-datacontext-best-practice), so does [this one](https://stackoverflow.com/questions/786516/using-a-datacontext-static-variable). I certainly wouldn't consider having it as static!

Rick Strahl has [an in depth article](http://www.west-wind.com/WebLog/posts/246222.aspx) on the lifecycle management.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T14:21:16.133

I had done this the first time I implemented the entity framework. The problem was that the whole application was getting "completed" events so I had to do a lot of code figuring out where the call came from.

I decided to refactor so each page would have an instance of the context. I like it much better now.

/my experience

# java - Java EE 环境中的单元测试

> ID：888191
> 
> 赞同：5
> 
> 时间：2009-05-20T14:17:05.313
> 
> 标签：java, unit-testing, jakarta-ee

我们正在将我们的应用程序迁移到 Java EE 容器中，并寻找用于单元测试（和集成测试）我们迁移的应用程序的工具。我们的要求包括：

*   临时测试：按需手动运行测试的能力（供开发人员在开发代码时使用）
*   批量测试：定期运行大量（且不断增长的）测试集的能力
*   容器内：在容器中部署时使用 EJB 的集成测试
*   单元测试：不一定在 EJB 上下文中测试类
*   很高兴拥有：设置简单，与 ant/IDE 集成
*   无需测试 Servlet/JSP - 仅 POJO 和 EJB

你用什么来实现Java EE环境下的测试？您部署了哪些技术/设置？

我的研究发现了 Cactus 和 JUnitEE：您成功设置它们了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T14:20:40.940

JUnit(EE) 是我支持的每个主要项目（1 亿美元以上）都使用的。这真的是一个很棒的工具，当您决定寻找其他工作机会时，知道如何使用它是非常宝贵的。

我支持一个不使用单元测试的政府金融系统，但经过大量的推动，我们最终实现了 JUnit。我现在使用的系统是大型政府机构的现代化改造，我们使用 JUnit 进行所有单元测试。支持现代化的两家大公司使 JUnit 成为所有子项目的标准。我们有大约 200 名开发人员顺利使用它。

它设置起来既快速又容易，一旦你理解了它，你就可以利用它的功能，它将证明它是多么的无价。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T14:55:48.590

我们使用普通的 JUnit 进行单元测试和集成测试。我们使用 VM 参数在两者之间切换，并使用直接与服务器的标记对测试进行注释。我们确实有一个自定义的 TestSuite 类，尽管它会根据这些信息查找并运行测试，因为它比手动维护要运行的测试更容易且更不容易出错。

在我们的例子中，我们使用 Spring 远程处理与 servlet 和 EJB（通过 servlet）对话，测试这两种情况只是 Eclipse 中的一个单独的启动配置。

几年前我们使用了 JunitEE，但最终放弃了它，转而只使用 JUnit。这使我们能够让开发人员在没有服务器的情况下完成所有测试，并在他们的 IDE 中运行单元测试和我称之为低级集成测试。然后我们让构建机器针对现在部署在实际服务器中的相同代码运行相同的集成测试。这使得开发周期更快，因为我们很少需要运行服务器和部署服务代码。

# .net - Resources for Programming a 'Watchdog' for a complex system

> ID：888196
> 
> 赞同：0
> 
> 时间：2009-05-20T14:17:37.513
> 
> 标签：.net, asp.net, health-monitoring

I have to write a service to monitor a complex system. I searched Google for some articles, but didn't find exactly what I was looking for. Does anyone have any good resources for writing a service to monitor a complex system?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T19:25:51.930

我最喜欢的方法包括从监视您要监视的应用程序的应用程序发送 WM_COPYDATA 消息。发送消息（超时）并查看获得响应需要多长时间。当该响应超出带外时，则终止该过程。

很长一段时间以来，我一直将[这段代码](http://www.koders.com/csharp/fid47D396D37237BF6C0E17E571F516BA72EDB8E02B.aspx)用作执行此操作的基础。我不知道它是从哪里开始的，但对第一个写它的人表示敬意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T14:26:26.090

我想你是在问[健康监测](http://www.4guysfromrolla.com/articles/031407-1.aspx)。这是来自 MSDN 的关于.Net中内置[健康监控功能的在线文档。](http://msdn.microsoft.com/en-us/library/ms998306.aspx)除其他外，这使您可以定义用于审核特定事件的规则，例如应用程序中的错误或登录尝试失败。

# c# - 限制对继承属性的访问 C#

> ID：888198
> 
> 赞同：1
> 
> 时间：2009-05-20T14:17:59.853
> 
> 标签：c#, inheritance

假设我继承了一个具有多个公共属性和/或方法的类，但是我不希望它们成为我类的公共属性/方法 - 换句话说，我想让这些属性成为我类的受保护属性。

这可以实现吗？

我希望我足够清楚，如果没有，请告诉我，我会尝试更好地解释自己。

**编辑：**

是的，谢谢大家的回答，但我认为我不够清楚。我想要完成的是：

我编写了一个扩展 ListView 控件的 Windows 控件。ListView 有一个可以修改的公共集合 Items。这一切都很好，但是由于我需要额外的数据，我编写了将项目添加到列表视图的新方法。

到目前为止，这一切都很好，但是 Items 集合仍然可以被任何东西修改，这是一个问题，因为如果通过直接操作 Items 集合来添加项目，则不会收集到我需要的所有数据，从而导致错误。

由于我们希望在不同的项目中多次重复使用这个控件，我们担心迟早会使用默认的添加项目到 Items 集合的方式（真的只是时间问题）。我们只是在寻找一种方法来防止这种情况发生，例如当 Items 集合变大时抛出异常，但它的预期方式。

我希望这一切现在都有意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T14:30:31.137

继承就是说“您可以像使用基类一样使用这个派生类，并且它提供了专门的行为。”

如果您*不能*以与基类相同的方式使用派生类，那么您不应该使用继承：您违反了[Liskov 的可替代性原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。在这种情况下，使用组合而不是继承。（就我个人而言，无论如何我并没有过多地使用类到类的继承，更喜欢组合 - 我发现专业化方面真正有效而没有问题的情况相对较少。当它*确实*有效时，它很棒！）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T15:11:49.883

永不说永不。这可能不是最好的主意，但它似乎对我有用。这通过在子类中重新实现项目然后使用属性隐藏它来隐藏项目。我添加了一个“CustomExposedItems”属性，这样您就可以看到现有的项目仍然可以在基础 ListView 中访问。

```
public partial class CustomListView : ListView
{
    public CustomListView()
    {
        InitializeComponent();
    }

    public System.Windows.Forms.ListView.ListViewItemCollection CustomExposedItems
    {
        get
        {
            return base.Items;
        }

    }

    [EditorBrowsable(EditorBrowsableState.Never)]    
    [Browsable(false)]    
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
    [Obsolete("Use the new custom way of adding items xyz")]
    public new System.Windows.Forms.ListView.ListViewItemCollection Items    
    { 
        get { throw new NotSupportedException(); }    
    }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-20T14:26:11.927

不，你不能那样做。您能做的最好的事情是创建一个类并包装从它派生的基类 - 但这当然会破坏继承。（我假设你不能修改基类。如果可以，你应该重新考虑设计，因为看起来你的新类不应该从基类派生。）

```
class BaseClass
{
     public String IWantThis { get; set; }
     public String IDoNotWantThis { get; set; }
}

class MyClass
{
    private BaseClass baseClass = new BaseClass();

    public String IWantThis
    {
        get { return this.baseClass.IWantThis; }
        set { this.baseClass.IWantThis = value; }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T14:21:01.127

你不能通过继承来做到这一点。这实际上就是继承的意义所在。**is-a 关系**不能减少接口。派生类必须是基类的完整表示。

将您的继承变成参考。您可以通过调用它来重用“基类”的实现。（组合而不是继承。）如果您需要多态，请添加一个公共接口或将公共部分移动到一个单独的抽象基类中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T15:05:47.010

我不使用 AOP（也许是 PostSharp）来放置您不想使用的属性，然后您可以根据您的方面以某种适当的方式处理它。

# maven-1 - Why does maven install fail during javadoc generation?

> ID：888199
> 
> 赞同：9
> 
> 时间：2009-05-20T14:18:06.343
> 
> 标签：maven-1

When running 'maven install', I get the following..

> [INFO] [javadoc:javadoc {execution: default}] [INFO] ------------------------------------------------------------------------ [ERROR] BUILD ERROR [INFO] ------------------------------------------------------------------------ [INFO] An error has occurred in JavaDocs report generation:Exit code: 1 - java.lang.NullPointerException at com.sun.tools.doclets.formats.html.PackageUseWriter.generatePackageUse(PackageUseWriter.java:180) at com.sun.tools.doclets.formats.html.PackageUseWriter.generatePackageList(PackageUseWriter.java:124) at com.sun.tools.doclets.formats.html.PackageUseWriter.generatePackageUse(PackageUseWriter.java:110) at com.sun.tools.doclets.formats.html.PackageUseWriter.generatePackageUseFile(PackageUseWriter.java:99) at com.sun.tools.doclets.formats.html.PackageUseWriter.generate(PackageUseWriter.java:78) at com.sun.tools.doclets.formats.html.ClassUseWriter.generate(ClassUseWriter.java:116) at com.sun.tools.doclets.formats.html.HtmlDoclet.generateOtherFiles(HtmlDoclet.java:92) at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.startGeneration(AbstractDoclet.java:122) at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.start(AbstractDoclet.java:64) at com.sun.tools.doclets.formats.html.HtmlDoclet.start(HtmlDoclet.java:42) at com.sun.tools.doclets.standard.Standard.start(Standard.java:23) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at com.sun.tools.javadoc.DocletInvoker.invoke(DocletInvoker.java:269) at com.sun.tools.javadoc.DocletInvoker.start(DocletInvoker.java:143) at com.sun.tools.javadoc.Start.parseAndExecute(Start.java:340) at com.sun.tools.javadoc.Start.begin(Start.java:128) at com.sun.tools.javadoc.Main.execute(Main.java:41) at com.sun.tools.javadoc.Main.main(Main.java:31)

Command line was: `/home/fsl/jdk1.6.0_12/jre/../bin/javadoc @options @packages @argfile`

What am I doing wrong?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-02-18T09:39:45.817

此外，如果您有：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-javadoc-plugin:2.9.1:jar (default-cli) on project coolproject-api: MavenReportException: Error while creating archive:
[ERROR] Exit code: 1 - javadoc: warning - No source files for package org.coolproject.api
[ERROR] javadoc: warning - No source files for package org.coolproject.api
[ERROR] javadoc: warning - No source files for package org.coolproject.api.listeners
[ERROR] javadoc: error - No public or protected classes found to document. 
```

Java 编译器理解具有包样式名称的源目录，例如：

```
coolproject-api/java/org.coolproject.api/ 
```

它没有问题，但*maven-javadoc-plugin*没有。因此，尝试将您的“物理”包布局更改为：

```
coolproject-api/java/org/coolproject/api/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-03-31T11:18:28.710

要在 maven-javadoc-plugin 中删除 -use 选项，请使用以下配置：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-javadoc-plugin</artifactId>
            <configuration>
                <use>false</use>
                <links>
                    <link>http://java.sun.com/javase/6/docs/api/</link>
                </links>
            </configuration>
        </plugin> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-08-10T12:44:34.850

有一个未修复的[错误](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5101868)似乎是您的问题。从错误描述中，已知的解决方法是删除 -use 选项或使用 JDK 1.4.2。您使用的是 Java 6，所以可能就是这种情况。

NullPointerException 发生的行是：

```
printHyperLink("", pkg.name(), Util.getPackageName(pkg), true); 
```

那么问题可能是由于您的 package.html 文件中的拼写错误而发生的？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T02:43:12.437

从那个错误报告中，当一个人在默认包中有类并且 -use 开启时，就会发生这种情况。因此，一种解决方案是将默认包中的类移动到命名包中。

恼人的是，这个错误在一些发行版（例如 MacOS X Lion）的 javadoc 工具中没有得到修复。

至少从源代码的检查来看，该错误似乎已在 openjdk 6 中得到修复。该源的下载地址为：http: [//download.java.net/openjdk/jdk6/](http://download.java.net/openjdk/jdk6/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-08T07:50:51.320

查看您的环境变量并删除该`CLASSPATH`变量或添加您的包路径。

`javadoc`使用类路径来确定包。如果路径不在您的变量中，它将失败。

# subsonic - Subsonic - Bit operation in Where Clause

> ID：888202
> 
> 赞同：0
> 
> 时间：2009-05-20T14:19:11.083
> 
> 标签：subsonic, where-clause, bit

I'm trying to make something like this:

```
int count = new Select().From(tblSchema).Where("Type & 1").IsEqualTo("1").GetRecordCount(); 
```

And the error message is:

Incorrect syntax near '&'.

Must declare the scalar variable "@Deleted".

Is it possible to do that with SubSonic?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T09:13:35.677

这似乎是 SubSonic 在生成要执行的 SQL 时命名其参数的方式中的错误。

发生的事情是 SubSonic 正在查看“Type & 1”，然后创建一个参数以与名为 @Type&10 的参数进行比较，该参数不是有效的 SQL 参数名称。因此，您最终会从原始查询中得到以下 SQL。[您应该向http://code.google.com/p/subsonicproject/](http://code.google.com/p/subsonicproject/)提交错误

同时，您现在可以通过使用内联查询来解决该错误：

[http://subsonicproject.com/docs/Inline_Query_Tool](http://subsonicproject.com/docs/Inline_Query_Tool)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T03:25:50.637

> 必须声明标量变量“@Deleted”

第二个错误是由于对您正在查询的表使用逻辑删除（该表有 isDeleted 或 Deleted 列）引起的。

但我正在查看代码，我不确定该参数是如何进入那里的。据我所知，[SqlQuery.GetRecordCount方法不调用 CheckLogicalDelete()。](http://www.google.com/codesearch/p?hl=en#uMk-eK7JVdM/trunk/SubSonic/SqlQuery/SqlQuery.cs&q=GetRecordCount)该错误消息是否无关？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-20T16:35:44.350

关于您要完成的工作有点模糊，但这是一个最好的猜测。

```
int count = new Select().From(tbl.Schema).Where(tbl.TypeColumn).IsEqualTo(true).GetRecordCount(); 
```

# c# - 哪段代码性能更高？

> ID：888204
> 
> 赞同：4
> 
> 时间：2009-05-20T14:19:27.883
> 
> 标签：c#, .net, optimization, premature-optimization

我有一些我正在审查的代码，用于将一些文本转换为`MD5 Hash`. 效果很好。`MD5Hhash`它用于为*gravatar 头像*创建一个。这里是 ：-

```
static MD5CryptoServiceProvider md5CryptoServiceProvider = null;

public static string ToMD5Hash(this string value)
{
    //creating only when needed
    if (md5CryptoServiceProvider == null)
    {
        md5CryptoServiceProvider = new MD5CryptoServiceProvider();
    }

    byte[] newdata = Encoding.Default.GetBytes(value);
    byte[] encrypted = md5CryptoServiceProvider.ComputeHash(newdata);
    return BitConverter.ToString(encrypted).Replace("-", "").ToLower();
} 
```

注意我们是如何`MD5CryptoServiceProvider`在第一次调用这个方法时创建的？（为了简单起见，这里不用担心比赛条件）。

我想知道，如果我将用于创建提供程序的行更改为这个...

```
using(var md5CryptoServiceProvider = new MD5CryptoServiceProvider())
{
    ... snip snip snip ....
} 
```

现在，如何使用/使用这种方法？好吧，假设它是 StackOverflow 的主页 -> 为每个帖子生成用户的 md5 哈希，这样我们就可以生成他们的 gravatar url。所以视图可以调用这个方法几十次。

不要试图浪费太多时间来强调[过早的优化](http://www.codinghorror.com/blog/archives/000061.html)等......哪个会更好？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-20T14:23:03.710

我会对线程安全更感兴趣...... MSDN 没有（除非我错过它）说这`MD5CryptoServiceProvider`是线程安全的，所以 IMO 最好的选择是每次通话都有一个......

得到错误答案的速度并不重要；-p

你可能*不想*做的（解决线程安全问题）是有一个静态实例并`lock`围绕它......当它可以在不同的请求上并行运行时，它将序列化你的所有加密代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T14:49:29.633

测试它并计时。第一个性能更高，但可能并不重要。

```
using System;
using System.Diagnostics;
using System.Security.Cryptography;
using System.Text;

namespace ConsoleApplication11
{
    class Program
    {
        static void Main(string[] args)
        {
            Stopwatch timer=new Stopwatch();
            int iterations = 100000;
            timer.Start();
            for (int i = 0; i < iterations; i++)
            {
                string s = "test" + i;
                string t=s.ToMd5Hash0();
            }
            timer.Stop();
            Console.WriteLine(timer.ElapsedTicks);

            timer.Reset();
            timer.Start();
            for (int i = 0; i < iterations; i++)
            {
                string s = "test" + i;
                string t = s.ToMd5Hash1();
            }
            timer.Stop();
            Console.WriteLine(timer.ElapsedTicks);

            Console.ReadKey();
        }
    }
    public static class Md5Factory
    {
        private static MD5CryptoServiceProvider md5CryptoServiceProvider;
        public static string ToMd5Hash0(this string value)
        {
            if (md5CryptoServiceProvider == null)
            {
                md5CryptoServiceProvider = new MD5CryptoServiceProvider();
            }
            byte[] newData = Encoding.Default.GetBytes(value);
            byte[] encrypted = md5CryptoServiceProvider.ComputeHash(newData);
            return BitConverter.ToString(encrypted).Replace("-", "").ToLower();
        }
        public static string ToMd5Hash1(this string value)
        {
            using (var provider = new MD5CryptoServiceProvider())
            {
                byte[] newData = Encoding.Default.GetBytes(value);
                byte[] encrypted = provider.ComputeHash(newData);
                return BitConverter.ToString(encrypted).Replace("-", "").ToLower();
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-20T14:28:21.703

我希望现有代码会稍微快一些，因为它可以节省每次调用时重建 MD5CryptoServiceProvider，但我也希望时间由对 ComputeHash() 的调用支配。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-20T14:28:39.237

我个人不明白为什么这两种方式都很重要，想想为了生成页面而必须运行的其他代码的捆绑。它的六个一个和六个其他的，无论哪种方式节省都将是微不足道的。

# jquery - datepicker.iso8601 周偏移

> ID：888205
> 
> 赞同：2
> 
> 时间：2009-05-20T14:19:28.633
> 
> 标签：jquery, week-number

我正在使用 datepicker.iso8601Week() 来计算从选定日期开始的星期（在 jQuery UI datepicker 中）。

根据iso8601Week，一周从周二到周一，我需要从周一到周日。如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T15:34:41.460

希望这可以帮到你。

抱歉，我没有足够的时间进行详细的单元测试。

```
function getDateRangeOfWeek(week){
    var date = new Date();
    var currentWeek = $.datepicker.iso8601Week(date);
    date.setDate(date.getDate() - date.getDay() + 1 + (7 * (week -  currentWeek)));
    var result = [];
    for(var i = 0;i < 7;i++){
        var d = new Date();
        d.setDate(date.getDate() + i)
        result[i] = d;
    }
    return result;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T14:27:33.313

**周一**开始

 **```
$('#date').DatePicker({
    starts: 1
}); 
```

**周日**开始

 **```
$('#date').DatePicker({
    starts: 0
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T16:09:20.503

根据[JQuery UI](http://docs.jquery.com/UI/Datepicker/iso8601Week) Datepicker 文档，该`iso8601Week`函数从星期一开始，如果它应该遵循[ISO 8601 标准](http://en.wikipedia.org/wiki/ISO_8601#Week_dates)，这是唯一理智的事情。如果您有不同的行为，我会认为这是一个错误。你可以看看[这里](http://dev.jqueryui.com/browser/trunk/ui/ui.datepicker.js#L853)的实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-22T01:06:33.443

让 datepiker 与 Drupal 日历一起工作我发现每周过滤工作不正确，因为 datepicker.iso8601Week 函数返回了无效值。好吧，尽管有官方文档之类的所有事实，我的一周还是从星期三开始的 :) 这就是问题所在。我完成了以下技巧：

```
 var date = $.datepicker.iso8601Week(new Date(dateText));
   var dateDay = $.datepicker.formatDate('D', new Date(dateText));
   if (dateDay == 'Mon' || dateDay == 'Sun') {
   date = date+1;
   } 
```

这段代码在点击后返回周一和周日（以及所有其他日子）的正确周数。如果您使用 datepicker 作为内联过滤器界面，您可能还希望保留单击日期并从单击位置开始显示日历。我通过在末尾带有月份名称的确切长度的 URL 来执行此操作：

```
var setMon = window.location.pathname.slice(20);
var setDay = window.location.pathname.slice(17,19);
var setYear = window.location.pathname.slice(8,12);
$('.datep').datepicker({
   defaultDate: $.datepicker.parseDate("dd MM y", setDay+" "+setMon+" "+setYear)
}); 
```

希望这可以帮助其他人，因为我花了很多时间来弄清楚如何修复周数。干杯。

# wpf - What is the best way to not have DependencyProperties conflict with actual properties?

> ID：888207
> 
> 赞同：0
> 
> 时间：2009-05-20T14:19:51.033
> 
> 标签：wpf, user-controls, dependency-properties

I find that when I make Dependency Properties, most of them **conflict** with names of properties in the UserControl, e.g Background, Width, etc. so my strategy is to **prefix all of my custom properties with "The"** so I have, e.g.

*   TheBackground
*   TheWidth

etc.

I tried using the "new" keyword which gets rid of the warning, but that leads to conflicts at runtime.

**Has anyone come upon better naming strategies for DependencyProperties in custom user controls?**

```
public partial class SmartForm : UserControl
{
    public SmartForm()
    {
        InitializeComponent();
        DataContext = this;

        TheBackground = "#FFD700";
    }

    #region DependencyProperty: TheBackground
    public string TheBackground
    {
        get
        {
            return (string)GetValue(TheBackgroundProperty);
        }
        set
        {
            SetValue(TheBackgroundProperty, value);
        }
    }

    public static readonly DependencyProperty TheBackgroundProperty =
        DependencyProperty.Register("TheBackground", typeof(string), typeof(SmartForm),
        new FrameworkPropertyMetadata());
    #endregion
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T14:27:50.223

如果您的 UserControl 具有背景属性，为什么还要添加另一个？

这个新背景是什么背景？“这”？不？那么它控制什么背景呢？

完成这句话：“这是 XXXX 控件的背景颜色。”

属性名称现在应该是 XXXXBackground。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T22:06:27.527

你的意思是你想要一个覆盖？

就我而言，我没有将 Width 作为 DepedencyProperty

在我的自定义控件中，我有：

```
 public double Width
    {
        get
        {
            if (_backgroundImage != null)
                return _backgroundImage.Width;
            else
                return double.NaN;
        }
        set
        {
            if (_backgroundImage != null)
                _backgroundImage.Width = value;
        }
    } 
```

编译器向我显示警告，但一切似乎都正常。

# wpf - How to "Decorate" a control in WPF?

> ID：888217
> 
> 赞同：1
> 
> 时间：2009-05-20T14:20:53.823
> 
> 标签：wpf

I want that some of the controls in my window will be surrounded by a border and a label above them that will contains a title, which tells something about a control (e.g. a list of persons, surrounded by a border, and above the list there is a label with the text "My Persons"). Since I want apply this on many controls, I don't want to write a specific xaml for each one of them. Should I create a user control, or is there a way to use styles/templates for that?

Visual Example:

[http://dl.getdropbox.com/u/829214/example.GIF](http://dl.getdropbox.com/u/829214/example.GIF)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T14:42:45.670

我会研究装饰器和装饰器层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T15:46:30.283

实现此目的的另一种方法是创建从 contentcontrol 派生的自定义/用户控件。使用内容控件来改变内容并将控件设计为您想要的外观。

# vb.net - CruiseControl .Net Plugin Vb.net Error

> ID：888220
> 
> 赞同：0
> 
> 时间：2009-05-20T14:21:32.590
> 
> 标签：vb.net, plugins, cruisecontrol.net

I am trying to make my own Labeller plugin for Cruise Control .Net 1.4.3\. I have made a class based on another plug in example but I keep getting an error

Class 'AssemblyVersionLabeller' must implement 'Function Generate(integrationResult As IIntegrationResult) As String' for interface 'ThoughtWorks.CruiseControl.Core.ILabeller'

Here is my code :

Imports Exortech.NetReflector Imports ThoughtWorks.CruiseControl.Core Imports ThoughtWorks.CruiseControl.Core.Util

Namespace NetAssembly.CCNet.Label _ Public Class AssemblyVersionLabeller Implements ILabeller Public Sub Run(ByVal result As IIntegrationResult) result.Label = Generate(result) End Sub

```
 Public Function Generate(ByVal integrationResult As IIntegrationResult) As String
        Dim label As String = integrationResult.LastIntegration.Label

        Return label
    End Function

    <ReflectorProperty("prefix", Required:=False)> _
    Public Prefix As String = String.Empty

  End Class 
```

End Namespace

What am I doing wrong? What have I missed?

Background Info:

I am using VS2005\. I cant use CrusieControl 1.4.4 RC2 (which has an Assembly Labeller) because my source control's plugin (SCM Anywhere) doesnt work with it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T20:12:29.450

我不能仅通过查看您的代码来判断，但如果您需要有关如何编写标签的示例（尽管是 C# 代码），您可以查看[BrekiLabeller](http://sourceforge.net/projects/brekiccnetutils/)代码（由我编写）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T13:54:27.623

我相信你忘记了覆盖声明..

```
Public Overrides Function Generate 
```

# methodology - 长期持有的、不正确的编程假设

> ID：888224
> 
> 赞同：281
> 
> 时间：2009-05-20T14:22:07.503
> 
> 标签：methodology

我正在对初级（也许是高级）软件工程师的常见错误和错误假设进行一些研究。

你坚持最久但最终得到纠正的假设是什么？

例如，我误解了整数的大小不是标准，而是取决于语言和目标。说起来有点尴尬，但就是这样。

坦率地说; 你有什么坚定的信念，你大概维持了多久？它可以是关于算法、语言、编程概念、测试或任何关于编程、编程语言或计算机科学的内容。

* * *

## 回答 #1

> 赞同：545
> 
> 时间：2009-05-21T00:34:41.183

很长一段时间以来，我一直认为其他人都对所有编程概念（设计模式、最新的新语言、计算复杂性、lambda 表达式，应有尽有）都有这种超级掌握。

阅读博客、Stack Overflow 和编程书籍似乎总是让我觉得我落后于所有程序员必须凭直觉知道的事情的曲线。

随着时间的推移，我意识到我正在有效地将我的知识与许多人的集体知识进行比较，而不是单个人，这对任何人来说都是一个相当高的标准。现实世界中的大多数程序员都拥有完成工作所需的知识库，并且有很多他们薄弱或完全不了解的领域。

* * *

## 回答 #2

> 赞同：308
> 
> 时间：2009-05-20T14:28:24.730

人们知道他们想要什么。

在很长一段时间里，我以为我会与人交谈，他们会描述一个问题或工作流程，然后我会将其放入代码中并使其自动化。事实证明，每次发生这种情况时，他们认为自己想要的实际上并不是他们想要的。

编辑：我同意大部分评论。这不是一个技术性的答案，也可能不是提问者想要的。它不仅适用于编程。我敢肯定，这也不是我坚持时间最长的假设，但这是我在这短短的 10 年里学到的最引人注目的事情。我确信这纯粹是我的幼稚，但我的大脑是/被连接的方式以及我进入商业世界之前的教学和经验让我相信我会做我所回答的；我将能够使用代码和计算机来解决人们的问题。

我想这个答案类似于罗宾关于非程序员理解/关心我在说什么的。它是关于将业务学习为一个敏捷、迭代、交互式的过程。这是关于学习成为编程代码猴子和成为软件开发人员之间的区别。这是关于意识到两者之间存在差异，并且要在该领域真正出色，不仅仅是语法和打字速度。

编辑：这个答案现在是社区维基，以安抚人们对这个答案感到不安，给我代表。

* * *

## 回答 #3

> 赞同：292
> 
> 时间：2009-05-20T15:50:32.660

我知道性能问题出在哪里而无需分析

* * *

## 回答 #4

> 赞同：232
> 
> 时间：2009-05-20T17:17:12.113

我应该只有一个函数/方法的退出点。

* * *

## 回答 #5

> 赞同：228
> 
> 时间：2009-05-20T14:25:42.240

非程序员理解我在说什么。

* * *

## 回答 #6

> 赞同：219
> 
> 时间：2009-05-20T14:25:12.520

那个没有错误的软件是可能的。

* * *

## 回答 #7

> 赞同：199
> 
> 时间：2009-05-20T14:26:10.537

私有成员变量是实例私有的，而不是类私有的。

* * *

## 回答 #8

> 赞同：166
> 
> 时间：2009-05-20T16:27:16.737

我认为静态打字在你的键盘上非常安静。

* * *

## 回答 #9

> 赞同：162
> 
> 时间：2009-05-20T20:25:27.693

在开始开发之前，您可以完全理解问题。

* * *

## 回答 #10

> 赞同：158
> 
> 时间：2009-05-21T07:31:14.333

聪明的人总是比我聪明。

当我犯错时，我真的可以打败自己，并且经常因为自嘲而被指责。我曾经敬畏地看着很多开发人员，并且经常认为，由于他们在*X*上比我了解更多，所以他们比我了解更多。

随着我不断地积累经验和结识更多的人，我开始意识到，虽然他们在特定学科上的知识比我多，但他们不一定比我/你*聪明。*

故事的寓意：**永远不要低估你能带来什么。**

* * *

## 回答 #11

> 赞同：131
> 
> 时间：2009-05-20T18:58:41.410

在很长一段时间里，我认为糟糕的编程只是发生在边缘的事情……正确地做事是常态。这几天我没那么天真了。

* * *

## 回答 #12

> 赞同：113
> 
> 时间：2009-05-20T15:52:26.637

我想我应该尽可能地抽象。由于太多交织在一起的小功能，我因此受到了打击。

现在我尝试让事情尽可能简单和解耦。重构以使某些东西抽象比预测我需要如何抽象某些东西要容易得多。

因此，我从开发管理所有这些的框架转移到完成工作的功能片段。从来没有回头，除了当我想到我天真地认为我会成为开发下一件大事的人的时候。

* * *

## 回答 #13

> 赞同：103
> 
> 时间：2009-05-21T07:52:44.897

女人觉得计算机程序员很性感……

* * *

## 回答 #14

> 赞同：100
> 
> 时间：2009-05-20T15:37:51.843

软件的质量将导致更大的销售。有时会，但并非总是如此。

* * *

## 回答 #15

> 赞同：82
> 
> 时间：2009-05-20T14:28:15.573

所有语言（大部分）都是平等的。

很长一段时间以来，我认为选择的语言并没有真正对开发过程的难度和项目成功的潜力产生太大影响。这绝对不是真的。

为工作选择正确的语言与做出的任何其他单个项目决策一样重要/关键。

* * *

## 回答 #16

> 赞同：81
> 
> 时间：2009-05-23T01:29:24.823

大的注释/代码比率是一件好事。

我花了一段时间才意识到代码应该是自我记录的。当然，如果代码不能更清晰，或者如果有重要原因导致某事被完成，那么这里和那里的评论会很有帮助。但是，一般来说，最好将评论时间花在重命名变量上。它更干净、更清晰，并且注释不会与代码“不同步”。

* * *

## 回答 #17

> 赞同：66
> 
> 时间：2009-05-20T14:23:45.050

这种编程是不可能的。

不是开玩笑，我一直认为编程是一件不可能学的东西，我总是远离它。当我接近代码时，我永远无法理解它。

然后有一天，我只是坐下来阅读了一些基本的初学者教程，并从那里开始工作。今天我作为一名程序员工作，我喜欢它的每一分钟。

补充一点，我认为编程并不容易，这是一个挑战，我更喜欢学习，没有什么比解决一些编程问题更有趣的了。

* * *

## 回答 #18

> 赞同：65
> 
> 时间：2009-05-20T15:21:20.553

“On Error Resume Next”是某种错误处理

* * *

## 回答 #19

> 赞同：64
> 
> 时间：2009-05-20T21:16:33.330

该编程软件需要强大的高等数学基础。

在我开始编码之前的几年里，我总是被告知要成为一名优秀的程序员，你必须擅长高级代数、几何、微积分、三角函数等。

十年后，我只需要做一次八年级学生做不到的事情。

* * *

## 回答 #20

> 赞同：63
> 
> 时间：2009-05-20T17:40:22.970

*   公司高管关心代码的质量。
*   行数越少越好。

* * *

## 回答 #21

> 赞同：63
> 
> 时间：2009-05-20T15:25:51.433

那优化==用汇编语言重写。

当我第一次真正理解汇编（来自 BASIC）时，似乎使代码运行得更快的唯一方法就是在汇编中重写它。花了好几年的时间才意识到编译器可以非常擅长优化，特别是对于具有分支预测等功能的 CPU，它们可能会在合理的时间内比人类做得更好。此外，与花时间从高级语言转换为低级语言相比，花时间优化算法可能会给您带来更好的胜利。此外，过早的优化是万恶之源……

* * *

## 回答 #22

> 赞同：58
> 
> 时间：2009-05-20T19:08:36.257

我会说将日期的年份元素存储为 2 位数字是困扰整整一代开发人员的假设。[Y2K](http://en.wikipedia.org/wiki/Year_2000_problem)上花的钱非常可怕。

* * *

## 回答 #23

> 赞同：57
> 
> 时间：2009-05-20T14:27:31.410

除了插入/冒泡排序之外的任何东西都是非常简单的黑魔法。

* * *

## 回答 #24

> 赞同：50
> 
> 时间：2009-05-20T22:21:04.870

XML 将是一种真正可互操作且人类可读的数据格式。

* * *

## 回答 #25

> 赞同：48
> 
> 时间：2009-05-20T15:13:01.833

C++ 在本质上比所有其他语言都要好。

这是我在大学几年前从一个朋友那里收到的。我把它随身携带了很长时间（我现在脸红了）。只有在使用它 2 年左右之后，我才能看到它们的裂缝。

没有人——也没有什么——是完美的，总有改进的余地。

* * *

## 回答 #26

> 赞同：47
> 
> 时间：2009-05-20T15:04:46.000

我相信创建程序会和课堂上教的完全一样……你和一群人坐下来，讨论一个问题，想出一个解决方案等等。相反，现实世界是“这里是我的问题，我需要解决，去吧”，十分钟后你又得到了另一个，让你没有时间有效地计划你的解决方案。

* * *

## 回答 #27

> 赞同：42
> 
> 时间：2009-05-20T16:29:31.430

当主流**设计模式**被引入 CS 课程时，我认为它们很棒。在那之前我已经编程了大约 8 年的业余爱好，我真的对如何创建好的抽象没有扎实的理解。

设计模式就像魔术一样；你可以做非常整洁的事情。后来我发现了函数式编程（通过 Mozart/Oz、OCaml、后来的 Scala、Haskell 和 Clojure），然后我明白许多模式只是样板，或者额外的复杂性，因为语言不够表达。

当然，几乎总是有某种模式，但它们在表达语言中处于更高的水平。现在我一直在用Java做一些专业的编码，当我不得不使用诸如访问者或命令模式之类的约定，而不是模式匹配和高阶函数时，我真的感到很痛苦。

* * *

## 回答 #28

> 赞同：38
> 
> 时间：2009-05-20T14:29:33.060

在我编程的最初几年里，我没有意识到 1 Kbyte 在技术上是 1024 字节，而不是 1000 字节。我总是对我的数据文件的大小似乎与我预期的略有不同这一事实感到有些困惑。是。

* * *

## 回答 #29

> 赞同：36
> 
> 时间：2009-05-20T14:27:24.250

该条件检查如下：

```
if (condition1 && condition2 && condition3) 
```

以未指定的顺序执行...

* * *

## 回答 #30

> 赞同：35
> 
> 时间：2009-05-20T16:23:59.567

如果我单独执行，我的编程会更快更好。

* * *

## 回答 #31

> 赞同：31
> 
> 时间：2009-05-21T14:25:38.723

“该项目将在 2 周内完成”

和

“这将需要 2 个小时来实施”

* * *

## 回答 #32

> 赞同：30
> 
> 时间：2009-06-21T14:32:06.640

我可以在没有注释的情况下理解我自己的代码！！！

* * *

## 回答 #33

> 赞同：28
> 
> 时间：2009-05-21T05:39:42.553

我以为我会需要它。

* * *

## 回答 #34

> 赞同：25
> 
> 时间：2009-05-21T14:14:23.847

像 Python 或 Ruby 这样的动态类型语言在某种程度上不太适合用于大型项目。

* * *

## 回答 #35

> 赞同：25
> 
> 时间：2009-05-27T11:48:07.020

那时我作为菜鸟的一个假设是，在该领域工作多年的人自然会成为更好的开发人员。

* * *

## 回答 #36

> 赞同：24
> 
> 时间：2009-05-20T15:39:20.717

这很尴尬，但是很长时间以来我并没有真正掌握引用类型和值类型之间的区别。我认为您必须使用 ref 关键字以不同的方法更改对象。

这是我应该知道的 C# 最基本的概念之一。

* * *

## 回答 #37

> 赞同：22
> 
> 时间：2009-05-25T09:43:30.993

这真的很尴尬，但是当我开始学习如何编程时，没有什么能让我满意。我想写电子游戏。不是所有这些书要我写的琐碎的小程序。所以我决定我可以轻松地跳过 10 章而忽略基础知识。

所以我基本上忽略了变量！

问题是我没有从约定中识别关键字：

```
Car car = new Car(); //good
Car test = new Car(); //wrong must be lowercase car!

for (int i = 0; i < 10; i++) //good
for (int test = 0; test < 10; test++)//wrong must be i 
```

我这样做了一年多，甚至做了一个 3000 行的井字游戏！那时我为自己的出色表现而激动不已，直到我在 Internet 上的 150 行中找到了一个井字游戏。然后意识到我是个白痴，然后重新开始。

* * *

## 回答 #38

> 赞同：20
> 
> 时间：2009-05-20T14:24:56.377

那个编程很简单。

* * *

## 回答 #39

> 赞同：20
> 
> 时间：2009-05-20T22:06:25.617

Unix 和 Linux 操作系统设计得很好......我可能应该限定这个（！）

首先，这种观点得到了以下反真理的强化：

*   随后开发的每一个操作系统最终都对 Unix 进行了糟糕的重新设计（也有人提到 Lisp，在这方面更真实）。
*   构成“Unix哲学”的规则列表。并不是它们错了，而是 Unix 本身紧跟它们的暗示。

说它们设计*得*很好/做得很好可能更真实，当然它们的一部分是，但即使这也只是相对于某些糟糕版本的 Windows 的相对判断。以下是一些做得不好的事情的例子：

*   配置一团糟，临时平面文件配置不好
*   C 编程语言应该在很久以前就已经被替换了（被[D](http://en.wikipedia.org/wiki/D_%28programming_language%29)之类的东西）
*   shell 脚本是精神分裂症。它不适合开发，因为它是为快速打字而设计的速记。
*   目录结构命名错误
*   GNU 工具链不必要地晦涩难懂
*   普遍目的总是胜过特殊目的的信念

总体而言，它们需要不必要的专业知识来操作。或者更确切地说，只有适度理解的大量知识。

这并不全是坏事。Linux 在政治上更好，并没有被业务需求所破坏，但遗憾的是，在很大程度上，很多技术高地已经失去了。

* * *

## 回答 #40

> 赞同：19
> 
> 时间：2009-06-19T12:47:15.823

当我从大学毕业后第一次开始工作时，我希望更多的高级开发人员会知道他们在做什么。男孩是我错了....

* * *

## 回答 #41

> 赞同：19
> 
> 时间：2009-05-20T15:23:05.603

好的，我很早就学会了编程。我14岁左右。我持有各种疯狂的信念，但不要问我确切的时间，因为那是……很久以前。

*   好的，所以，我有一段时间相信，如果您在 Java 中使用术语同步，那么 Java 会为您解决这个令人讨厌的同步问题

*   至少有半年甚至更长时间，我都相信静态类型会提高性能。

*   我相信释放某些东西会将内存返回给操作系统。

*   我相信 malloc 调用归结为检查操作系统上是否有足够的可用空间，因此 malloc 会很便宜。

*   很长一段时间以来，我一直认为 Java 在构建时考虑了其他语言的所有优点和缺陷，是一种“完美融合”，可以吸收其他语言的最佳属性并拒绝错误。

*   我大大高估了 LinkedLists 优于 ArrayLists 的案例数量。

*   我认为 NP-hardness 证明了没有 INSTANCE 可以有效地解决，这在一段时间内是非常错误的。

*   由于“旅行推销员问题”，我以为在旅行社网站上找到最佳飞行计划需要很长时间，因为我自豪地对我的亲戚笑了（当我很小的时候，好吗？！）

可以想出更多。不知道我坚持了多久。对不起。

PS：
啊，好吧，这个清理得不是那么慢，但是我看到新手经常这样做，所以我想你可能会感兴趣：我还认为要存储不确定数量的东西，你需要为每个声明一个新变量。所以我会创建变量 a1, a2, a3, ...，而不是使用一个变量 a，我会声明它是一个向量。

* * *

## 回答 #42

> 赞同：18
> 
> 时间：2009-05-22T18:11:06.020

这是朝九晚五的工作

* * *

## 回答 #43

> 赞同：18
> 
> 时间：2009-05-20T19:13:56.493

我曾经认为应用程序的大部分工作实际上是编程。我确信这在某些情况下是正确的，但根据我的经验，我花在研究、记录、讨论和分析上的时间比实际编码要多。（我的工作是运行基于激光的传感器的软件，确定如何最好地控制硬件比编写代码更具挑战性。）

我还曾经认为，程序员可以回头向旁边的人（通常）提问的开放环境是程序员团队敲定解决方案的最佳环境。事实证明，一个黑暗的孤独房间更有效率，有团队或没有团队。

当我毕业时，我认为专业编程就像在大学里编程，这意味着我会得到输入和预期输出，并要求我填写进行转换的黑匣子。实际上，我必须弄清楚输入、输出和黑匣子。

我以前不认为营销和销售人员是人类的祸害，如此幼稚。

* * *

## 回答 #44

> 赞同：17
> 
> 时间：2009-05-20T14:26:30.023

在上线之前**没有缺陷**是可能的。

这绝对不是真的，即使是 P2 缺陷有时也会被打开。

* * *

## 回答 #45

> 赞同：17
> 
> 时间：2009-05-21T07:30:52.837

代码审查是浪费时间。

从一家完全可选的公司搬到一家强制性（甚至经过审计）的公司后，我开始了解它们的用处。对代码进行第二次观察，即使是最琐碎的部分，也可以：

**A** ) 当你搞砸一些琐碎的事情时，让你避免尴尬（例如，在我以前的工作中，一次琐碎的代码审查会阻止我们向客户发送数百封垃圾邮件）

**B**）可以教你一开始不知道的东西（我在目前的工作中一直在学习新的库——不可避免地在一家大公司，有人已经偶然发现了你遇到的问题并在解决问题方面做得更好它 - 这只是知道在哪里看的问题）

**C** ) 至少要确保除了你自己之外的其他人知道事情是如何运作的。

最后，我在这里提交的代码比我以前的工作更快乐，尽管那时我以为我什么都知道:)

* * *

## 回答 #46

> 赞同：16
> 
> 时间：2009-05-21T10:14:49.603

与 UNIX 相比，NT 操作系统的设计存在缺陷。事实证明，NT 内核和设计决策与任何现代 UNIX 类系统非常相似，并且您在内核中遇到的大多数问题都是由有缺陷的公司编写的第三方有缺陷的驱动程序造成的。

* * *

## 回答 #47

> 赞同：16
> 
> 时间：2009-05-20T18:58:37.120

如果每行都评估条件，并且如果您编写如下代码：

```
Dim a as Boolean = True
If a Then
    Console.WriteLine("1")
    a = False
    Console.WriteLine("2")
Else
    Console.WriteLine("3")
End If 
```

那么输出将是：

```
1
3 
```

* * *

## 回答 #48

> 赞同：15
> 
> 时间：2009-05-27T20:05:34.003

我是一个优秀的程序员！

* * *

## 回答 #49

> 赞同：15
> 
> 时间：2009-05-20T15:06:47.290

.NET 结构（C# 和 VB.NET）是引用类型，就像类一样。

在 .NET 1.0 出现之前或之后不久，我“收到”了那条智慧（我不知道从哪里来，它可能完全从我的脑海中冒出来，就像宙斯额头上的雅典娜），并且一直保留到大约 4 个月前 Jon Skeet 放弃了这个概念。

谢谢乔恩。

PS 与编程无关，但我还相信（直到大约 5 分钟前）“阿波罗完全从宙斯的额头上跳了出来”。

* * *

## 回答 #50

> 赞同：15
> 
> 时间：2009-05-22T18:00:44.787

字节和字符实际上是相同的——“ASCII”只是将字节值映射到屏幕上的字形的一种方式。

阅读[Unicode](http://en.wikipedia.org/wiki/Unicode)真的让我大开眼界（尽管我还没有完全理解它）。

* * *

## 回答 #51

> 赞同：14
> 
> 时间：2009-05-20T14:27:56.820

我曾经认为编写 Win32 应用程序就足够了。

此外，每个程序都必须带有 GUI，因为命令行是“过时的”。

* * *

## 回答 #52

> 赞同：14
> 
> 时间：2009-05-27T04:50:59.837

那一天，我有一个现实的想法，即构建一些重要的代码/系统/任何东西需要多长时间。

* * *

## 回答 #53

> 赞同：14
> 
> 时间：2010-07-08T19:57:06.150

我可以阅读 SO 并完成任何工作。

* * *

## 回答 #54

> 赞同：13
> 
> 时间：2009-06-08T11:51:41.107

面向对象始终是设计源代码的最佳方式，而且永远都是。

* * *

## 回答 #55

> 赞同：13
> 
> 时间：2009-05-20T18:55:51.680

我认为提高数据库性能所需要做的就是将数据库置于第 3 范式。

* * *

## 回答 #56

> 赞同：12
> 
> 时间：2009-05-20T18:41:06.187

That this:

```
SomeClass object(initialValue); 
```

and this:

```
SomeClass object = initialValue; 
```

were guaranteed to be equivalent in C++. I thought the second form was guaranteed to be interpreted as if it had been written as the first form. Not so: see [C++ Initialization Syntax](https://stackoverflow.com/questions/372665/c-instance-initialization-syntax).

* * *

## 回答 #57

> 赞同：11
> 
> 时间：2009-05-20T19:39:11.547

我仍然遇到的一些问题是以下误解——即使我*知道*得更清楚，我仍然会努力坚持下去：

*   *所有的利益相关者都会客观地做出关于软件设计*的决定。那些没有参与编写代码的人会完全基于对我们开发人员并不总是有意义的情感做出各种决定。
*   *项目预算总是有意义的*——我见过一些公司很乐意多年来每月减少 [例如] 50,000 美元，而不是支付 250,000 美元在 6 个月内完成一个项目。如果政府不花钱，他们的年度预算就会失去——所以他们会花钱的，不管是地狱还是高水位。让我吃惊的是，有多少项目资金被浪费在了这样的事情上。
*   *您应该始终为正确的工作使用正确的工具*——有时这个决定不在您的手中。有时它从高处下来，“你应该为这个项目使用*X*技术”，让你想“WTF！谁想出了*这个*荒谬的想法？”......支付你的薪水的人，就是那个人，现在完成它.
*   *编程思想是第一位的，其他一切都是次要的。* 实际上，需要满足最后期限和业务目标才能获得薪水。有时你会做出最糟糕的决定，因为你只是没有*时间*以正确的方式去做……就像有时那个词就在你的舌尖上，但回忆起来的那一刻会让你选择一个不同的、更少的理想的词。并不总是有时间把事情做好，有时只有时间去做——不管怎样。因此，所谓的经验丰富的开发人员经常使用反模式，他们必须在明天交付给您最好的客户的软件的演示截止日期前 10 分钟敲出问题的解决方案。

* * *

## 回答 #58

> 赞同：11
> 
> 时间：2009-05-20T20:49:01.483

当我在 TI-83 上编程时，我认为你不能为自己分配一个变量。所以（忽略这是 C 代码，而不是 TI-BASIC）而不是编写

```
c = c + 1; 
```

我会写

```
d = c + 1;
c = d; 
```

当我了解它时`+=`，`++`它让我大吃一惊。

* * *

## 回答 #59

> 赞同：11
> 
> 时间：2009-05-23T13:08:35.263

IDE 会变得更快。

* * *

## 回答 #60

> 赞同：10
> 
> 时间：2009-05-20T17:10:56.947

我应该始终优化我的代码。这并不是说我不应该在写它之前考虑它，而是我应该认真思考如何从每个语句中挤出每一点性能，甚至到牺牲可读性的地步。

* * *

## 回答 #61

> 赞同：9
> 
> 时间：2009-05-20T14:32:57.873

XML 名称空间（或更糟糕的是，格式良好）在某种程度上比尝试不使用它们更困难。

一个非常常见的错误，即使在 W3C！

* * *

## 回答 #62

> 赞同：9
> 
> 时间：2009-07-29T09:39:40.493

当有人说服我相信会有一台能够在 3 秒内运行无限循环的计算机时，我想我是 10 岁。

* * *

## 回答 #63

> 赞同：9
> 
> 时间：2009-05-21T08:56:23.787

我的错误假设：虽然总有一些改进的余地，但就我而言，我几乎是一名优秀的程序员。

当我刚从大学毕业时，我已经做了 6 年的 C 编程，对“结构化编程”了如指掌，认为“OO”只是一种时尚，并认为“伙计，我很好！！”

10 年后，我在想“好吧，那时我远没有我想象的那么好……*现在*我明白了多态性以及如何编写干净的 OO 程序……*现在*我真的很棒了” .

所以不知何故，我总是很好，但也总是*比*以前好得多。

在那之后不久，一分钱就掉了下来，我终于有了“一些”谦逊。总是有更多的东西要学（还没有用像 Haskell 这样的纯函数式语言编写合适的程序）。

* * *

## 回答 #64

> 赞同：8
> 
> 时间：2009-05-20T18:18:54.047

在 C++ 中，很长一段时间以来，我一直认为编译器在为**纯**虚方法**定义时会拒绝您。**

 **当我意识到我错了时，我很惊讶。

很多时候，当我告诉其他人为其抽象类提供其纯虚拟析构函数的默认实现时，他/她睁大眼睛看着我。而且我从这里知道接下来将进行长时间的讨论......这似乎是一种普遍的信念，在 C++ 初学者中有些传播（我也认为自己......我目前仍在学习！）

[维基百科链接到 c++ 的纯虚方法](http://en.wikipedia.org/wiki/Virtual_function#C.2B.2B_2)

* * *

## 回答 #65

> 赞同：8
> 
> 时间：2010-06-07T03:33:43.210

至少 6 年来，我一直坚信每个问题都只有 1 个解决方案。

完全不知道具有不同复杂性、空间/时间权衡、OOP 与功能与命令、抽象级别和不可判定问题的多种算法。当这种幸福的天真打破时，它打开了一个充满可能性的世界，并关上了简单地坐下来建造东西的大门。我花了很长时间才弄清楚如何选择一个并使用它。

* * *

## 回答 #66

> 赞同：7
> 
> 时间：2009-06-19T12:47:51.127

天，

我只是设计和编写代码。

没有需求收集、文档或支持。

干杯，

* * *

## 回答 #67

> 赞同：7
> 
> 时间：2009-06-19T14:36:14.060

*   我的同事正在/正在编写所谓的错误代码，因为他们很烂/很烂。我花了一段时间才知道我应该首先检查到底发生了什么。大多数时候，糟糕的代码是由于缺乏管理、客户不想检查他们真正想要的东西并开始改变主意，比如没有明天，或者其他任何人无法控制的情况，比如经济危机。
*   客户要求“昨天”的功能，因为他们很愚蠢：不是真的。这是关于沟通。如果有人告诉他们一切都可以在 1 周内完成，你猜怎么着？他们会在 1 周内想要它。
*   “永远不要更改有效的代码”。这不是一件好事IMO。您显然不必更改真正有效的方法。但是，如果您从不更改一段代码，因为它应该可以工作并且更改起来太复杂，那么您最终可能会发现该代码并没有真正做到它应该做的事情。例如：我看到一个销售佣金计算软件在两年内计算错误，因为没有人愿意维护该软件。销售人员没有人知道这件事。这个公式太复杂了，他们真的不知道如何检查数字。

* * *

## 回答 #68

> 赞同：7
> 
> 时间：2009-05-20T20:45:31.117

作为一个老程序程序员，当我第一次开始用 Java 为一个爱好项目编程时，我并没有真正理解 OO。在没有真正理解接口要点的情况下编写了大量代码，试图通过将所有内容强制到继承层次结构中来最大化代码重用 - 希望 Java 在事物不适合清理到一个层次结构中时具有多重继承。我的代码有效，但我现在对那些早期的东西感到畏缩。

当我开始阅读有关动态语言并试图找出一种好的学习语言时，阅读有关 Python 的重要空白让我感到厌烦——我确信我会讨厌它。但是当我最终学会了 Python 时，它变成了我真正喜欢的东西。我们通常会努力使用任何语言来获得一致的缩进级别，但没有得到任何回报（除了视觉可读性）。在 Python 中，我发现在缩进级别方面我并没有比以前做更多的努力，Python 处理了我在其他语言中不得不使用大括号或其他任何东西的问题。它现在让我觉得 Python 更干净了。

* * *

## 回答 #69

> 赞同：6
> 
> 时间：2009-06-17T21:43:58.207

评论越多越好。我一直试图让我的代码尽可能地可读——主要是因为我几乎可以肯定会修复我漏掉的错误。所以在过去的几年里，我曾经有一段又一段的评论。

最终，我突然意识到，在某一点上，更多的评论——无论结构多么整齐——没有任何价值，实际上维护起来很麻烦。这些天来，我采用目录+脚注的方法，每个人都为此感到高兴。

* * *

## 回答 #70

> 赞同：6
> 
> 时间：2009-05-21T07:04:57.817

我最近才发现在 Hello World 中执行了超过一百万条指令！我写的c++程序。我从来没有对像单个 cout 语句这样简单的事情抱有这么大的期望

* * *

## 回答 #71

> 赞同：6
> 
> 时间：2009-05-20T19:38:36.367

以前从未遇到过整数提升......并认为'z'在这段代码中将保持255：

```
unsigned char x = 1;
unsigned char y = 2;
unsigned char z = abs(x - y); 
```

z 的正确值为 1

* * *

## 回答 #72

> 赞同：6
> 
> 时间：2009-05-20T20:16:41.110

OO 不一定比非 OO 更好。

我认为 OO 总是更好。然后我发现了其他技术，例如函数式编程，并意识到 OO 并不总是更好。

* * *

## 回答 #73

> 赞同：6
> 
> 时间：2009-06-11T18:31:25.517

我们作为软件工程师可以理解用户真正想要什么。

* * *

## 回答 #74

> 赞同：6
> 
> 时间：2009-05-23T12:13:47.993

不要使用高级实现特定的功能，因为您可能希望“有时”切换实现。我一次又一次地这样做了，而且几乎总是没有发生这种转变。

* * *

## 回答 #75

> 赞同：6
> 
> 时间：2009-05-20T20:58:23.570

goto 是有害的。

现在我们继续或中断。

* * *

## 回答 #76

> 赞同：6
> 
> 时间：2009-05-27T11:43:50.380

我是一名年轻的初出茅庐的开发人员，希望专业地做这件事，因为这是我所爱的，这是我曾经认为我通过短暂的经验了解到的观点是错误的

当您根本不将用户界面与逻辑分开时，您最终会遇到的可怕混乱是可以接受的，这也是每个人编写软件的方式

没有太多的复杂性或抽象性

一级责任——我从来没有真正有过这个概念，这对我来说非常有形成性

测试是我在卧室编码时不需要做的事情

我不需要源代码控制，因为它对我所做的项目来说太过分了

开发者无所不能，我们应该知道如何设计图标并做出令人敬畏的布局

Dispose 并不总是需要终结器

每当发生任何类型的错误时都应引发异常

异常是针对错误情况的，很多时候只返回一个指示失败的值是可以的。我最近开始理解这一点，我一直在说它并且仍然抛出异常更长的时间

我可以编写一个完全没有错误的应用程序

* * *

## 回答 #77

> 赞同：6
> 
> 时间：2010-06-24T10:20:29.087

我曾经认为[Internet Explorer 6 盒子模型](http://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug)是 MS 想出的一个邪恶愚蠢的想法，只是为了破坏与其他浏览器的兼容性。

许多 CSSing 让我相信它更合乎逻辑，并且可以使页面设计维护（更改块填充/边框/边距）更加容易。

想想物理世界：改变 A4 页面的内边距或边框宽度不会改变页面宽度，只会减少内容的空间。

* * *

## 回答 #78

> 赞同：6
> 
> 时间：2010-12-19T18:26:43.780

唯一的本地化/国际化问题是翻译信息。

我曾经认为所有其他语言（我没有语言环境的概念）在所有方面都像英语，除了单词和语法。因此，要将软件本地化/国际化，您只需要让翻译人员翻译显示给用户的字符串即可。然后我开始意识到：

*   有些语言是从右到左书写的。
*   一些脚本使用上下文塑造。
*   日期、时间、数字等的格式存在很大差异。
*   程序图标和图形对某些人群来说可能毫无意义或令人反感。
*   有些语言有不止一种“复数形式”。
*   ...

即使在今天，我有时也会读到令我惊讶的国际化问题。

* * *

## 回答 #79

> 赞同：5
> 
> 时间：2009-05-21T14:47:55.323

我曾经认为我是一个非常好的程序员。担任该职位 2 年。

当你在真空中工作时，很容易填满房间:-D

* * *

## 回答 #80

> 赞同：5
> 
> 时间：2009-05-21T14:50:42.353

现在流行的 $ 符号作为 java/javascript 标识符的一部分是非法的。

* * *

## 回答 #81

> 赞同：5
> 
> 时间：2009-05-20T17:31:18.807

*   编程语言 == 编译器/解释器
*   编程语言 == IDE
*   编程语言 == 标准库

* * *

## 回答 #82

> 赞同：5
> 
> 时间：2011-03-23T00:21:44.060

“这次会成功的”

* * *

## 回答 #83

> 赞同：5
> 
> 时间：2009-10-12T22:08:45.703

我的学校教育将为我在该领域的工作做好准备。

* * *

## 回答 #84

> 赞同：5
> 
> 时间：2009-05-21T21:05:58.930

认为我了解编程中某种语言/主题的一切。只是不可能。

* * *

## 回答 #85

> 赞同：5
> 
> 时间：2009-05-22T18:15:23.813

C++ 是最酷的语言！

* * *

## 回答 #86

> 赞同：5
> 
> 时间：2009-05-25T09:19:36.597

订阅许多 RSS 提要、阅读许多博客和参与开源项目非常重要。

我意识到，真正重要的是我花更多的时间在编码上。我有阅读和关注许多博客的习惯，虽然它们是丰富的信息来源，但实际上不可能吸收所有内容。平衡阅读非常重要，并且更加注重实践。

注册。开源的，恐怕不会流行。我曾尝试参与开源，其中大部分是 .NET。我很震惊地看到许多开源项目甚至没有遵循正确的架构。我在 .NET 中看到一个系统没有使用分层架构，并且数据库连接代码到处都是，包括背后的代码，我放弃了。

* * *

## 回答 #87

> 赞同：5
> 
> 时间：2009-05-21T23:36:25.163

由于性能问题，像 Java 和 .NET 这样的虚拟机架构对于除了玩具项目之外的任何东西基本上都毫无价值。

（好吧，公平地说，也许这在某些时候是真的。）

* * *

## 回答 #88

> 赞同：5
> 
> 时间：2009-05-28T02:54:31.243

经理们知道他们在谈论什么。

* * *

## 回答 #89

> 赞同：5
> 
> 时间：2010-04-03T21:00:19.960

学习语言只是学习语法，以及标准库中最常见的部分。

* * *

## 回答 #90

> 赞同：5
> 
> 时间：2010-07-12T16:02:07.737

字节码解释语言（如 C# 或 F#）比那些直接编译为机器代码的重置按钮慢。

好吧，当我开始相信（在 80 年代）时，这是真的。然而，即使在 C# 中——有时我有时想知道“将内部循环放入 .cpp 文件是否会使我的应用程序运行得更快”）。

幸运的是，没有。

可悲的是，我几年前才意识到这一点。

* * *

## 回答 #91

> 赞同：4
> 
> 时间：2009-08-28T07:46:29.503

我需要在函数开始时定义我将在函数中使用的所有变量（Pascal 风格）。

我曾经认为我需要在开始编码之前考虑我的函数要使用的所有资源并定义它们，这可能是因为我的第一语言是 Pascal，这是我的要求。然后，当我移至 C 语言时，我将定义仅在这些循环之外的循环内使用的临时变量，而不考虑循环内范围，以便“一切都将在开始时定义”。

我花了几年的时间才明白，提前定义所有资源并不是一头牛，而且范围界定本身对于代码的可读性是极其重要的。

* * *

## 回答 #92

> 赞同：4
> 
> 时间：2009-05-20T19:25:18.733

假设我要使程序 100% 完整且没有错误，并将其报告为“已完成”。有时公司想在有很多错误时发布程序以首先获得市场份额。

* * *

## 回答 #93

> 赞同：4
> 
> 时间：2009-05-20T19:29:02.300

在我完成 CS 学校后，我可以开始工作并将我在学校学到的知识用于实际应用。（我真的希望我不会浪费 4 年的时间来学习操作系统和序言）

* * *

## 回答 #94

> 赞同：4
> 
> 时间：2009-06-19T12:50:28.767

人们会关心最佳实践，甚至是一致性。

* * *

## 回答 #95

> 赞同：4
> 
> 时间：2009-05-22T15:49:55.907

每个人都想为一个问题生成最好的\最适合的代码......

* * *

## 回答 #96

> 赞同：4
> 
> 时间：2011-02-03T12:57:33.830

总有一种“正确”的做事方式。离开大学后，我坚持这个假设太久了。

当然，我开始意识到，完成一项任务总是有很多方法。每种方法总是有优点和缺点。查看可用的信息，做出决定，然后确保你可以向你的老板证明它的合理性。

* * *

## 回答 #97

> 赞同：4
> 
> 时间：2009-05-21T21:09:44.180

该ASCII以与二进制不同的方式存储

* * *

## 回答 #98

> 赞同：4
> 
> 时间：2009-05-20T18:22:05.087

我可以花几天时间尝试减少我的业务层使用的内存量，只是后来才意识到我的项目的 WinForms (GUI) 使用的内存是应用程序其余部分的 4 倍。

* * *

## 回答 #99

> 赞同：4
> 
> 时间：2009-05-21T00:21:58.073

SQL WHERE 子句中整数的按位比较在查询性能方面实际上是免费的。

碰巧的是，对于前 50 万行左右，这在某种程度上是正确的。在那之后，它被证明是非常无联合国的。

* * *

## 回答 #100

> 赞同：4
> 
> 时间：2009-05-21T05:10:49.520

很长一段时间（大约 5 年），我认为 PHP 很摇滚。

我以为我知道算法。然后我加入了 Topcoder.com

* * *

## 回答 #101

> 赞同：4
> 
> 时间：2009-05-22T00:23:36.037

早期，大多数个人计算机都有用于加载和存储程序的盒式磁带接口。当时我没有电脑，但我可以阅读所有与电脑有关的东西（主要是杂志）（这是 70 年代后期 - 我没有互联网）。出于某种原因，我的印象是程序是直接从盒式磁带执行的，而计算机拥有任何 RAM 的唯一原因是在程序运行时存储变量。我想当代码必须执行跳转指令时，它会以某种方式倒带或将磁带推进到正确的位置并从那里继续。

* * *

## 回答 #102

> 赞同：4
> 
> 时间：2009-05-22T09:36:31.277

其他人都在使用最新最好的技术，而我的团队是唯一一个使用劣质过时工具的人。（神秘的cobol恐龙除外）

* * *

## 回答 #103

> 赞同：4
> 
> 时间：2009-05-23T13:22:50.583

也就是说，*作为我编写的代码的所有者*，我是唯一应该理解或触摸它的人。

* * *

## 回答 #104

> 赞同：4
> 
> 时间：2009-07-29T10:39:47.293

[替代文字 http://images.despair.com/products/demotivators/teamwork.jpg](http://images.despair.com/products/demotivators/teamwork.jpg)

* * *

## 回答 #105

> 赞同：4
> 
> 时间：2010-04-17T21:41:11.517

这种编程是为初级人员准备的，最好的项目经理是不会编程的人。

* * *

## 回答 #106

> 赞同：4
> 
> 时间：2010-04-03T21:25:03.307

当我第一次听说“鸭子打字”时，我认为实际上是“管道打字”，类似于人们常说的鸭带。“鸭子打字”听起来是错误的，而“管道打字”有一种奇怪的感觉（拼凑在一起的类型）。

* * *

## 回答 #107

> 赞同：4
> 
> 时间：2010-06-14T20:23:06.713

你永远不会完成你没有开始的项目。

看起来真的很愚蠢，但我推迟了这么多项目，因为规模简直是压倒性的。刚刚完成了一个项目的怪物，我意识到如果我意识到它的范围，我永远不会开始。但实际上，即使是最复杂的系统在分解成离散和定义的部分时也非常简单。然而，从宏观层面来看，它很快就势不可挡。

* * *

## 回答 #108

> 赞同：4
> 
> 时间：2010-07-12T16:04:03.613

不熟悉 SQL 和关系数据库的程序开发人员/程序员不需要任何正式培训或了解如何使用和/或使用 SQL，并且快速阅读**SQL For Dummies**之类的内容就足以使用关系数据库像**Oracle**和**SQL Server**。

在处理存储在 Oracle 和 SQL Server 等关系数据库中的数据的应用程序中，很多错误往往是由于缺乏理解或如何使用关系数据库的语言造成的；***SQL***。

我曾经为一家软件供应商工作，他们认为开发人员所需要的只是 SQL For Dummies 书或类似的东西，他们将完全有能力处理任何关系数据库问题。现在这家供应商的客户拥有数百 GB 的数据库，这种 SQL 知识的缺乏正在以负面的方式重新出现。问题不仅是查找和/或更新和插入性能不佳，而且数据库本身的实际设计才是真正的障碍。

如果当时开发负责人能够像对待构建应用程序所用的语言一样尊重 SQL 和关系数据库，那么现在所有这些都可以避免并导致成本大大降低。

不要认为 SQL 不重要，因为它最终会回来困扰你。您可能可以暂时摆脱它，甚至数年，但您最终会达到一个临界点，如果不完全重新设计数据库，您就无法取得进展，那是成本最高的时候。

* * *

## 回答 #109

> 赞同：4
> 
> 时间：2011-03-23T00:48:49.630

回到我的 C++ 时代的开始（很久以前），我被 Java 学者包围着。当被问及 C++ 相对于 Java 的优势时（通常是一个我试图将其视为做作而忽略的问题，但你去了），我会在我的回答中包含 C++ 给你的引用*和*指针。Java 的人会看起来难以置信，并建议引用*是*指针，然后把我笑出房间。我坚持认为引用和指针在 C++ 中是不同的。

而且，公平地说，我是对的。引用和指针在语义和句法上是不同的。不幸的是，我用一个谬误来支持我的主张：底层实现是不同的。

我坚信，通过标准化，引用是语法中的*名称别名*`typedef`，就像 a是没有存储的类型别名一样。

我确信引用不是对象并且没有存储空间，它们只是提供了“名称”到“对象”的多个顶级映射。在这方面，我认为它们就像文件系统中的*软链接*：

```
Code: int a = 3; int& b = a;

 Names          Objects           Memory

+-----+     +-------------+     +-------+
|  a  |---->|             |     |       |
+-----+     |             |     |       |
            |     int     |---->|   3   |
+-----+     |             |     |       |
|  b  |---->|             |     |       |
+-----+     +-------------+     +-------+ 
```

当然，虽然优化可能会导致这种情况，但引用确实有存储空间。它们是不同的对象，即使语法尽力将其从程序员那里抽象出来。

可以这么说，我很失望地得知关闭优化的编译器可能将引用实现为指针，需要取消引用操作：我实际上是在创建文件系统中的*硬链接*的类比：

```
Code: int a = 3; int& b = a;

 Names          Objects           Memory

+-----+     +-------------+     +-------+
|  a  |---->|     int     |---->|       |
+-----+     +-------------+     |       |
                                |   3   |
+-----+     +-------------+     |       |
|  b  |---->|     int&    |---->|       |
+-----+     +-------------+     +-------+ 
```

标准 C++ 实际上并没有指定应该如何实现引用，所以我的理论可能适用于某些工具链，但它在任何主流编译器中都没有……而且标准中肯定没有说明。

* * *

## 回答 #110

> 赞同：3
> 
> 时间：2009-06-10T15:08:06.290

C/C++ 中 if 语句的评估顺序是特定于编译器的。所以写：

if ( 指针 != NULL ) && ( 指针->doSomething() )

不安全，因为可以交换评估顺序。我最近发现（经过多年的撒谎），它是 ANSI-C 规范的一部分，您可以保证订单及其完全安全。

詹姆士

* * *

## 回答 #111

> 赞同：3
> 
> 时间：2009-08-31T13:01:04.683

其他人会像我一样被已知的错误所困扰，并将修复它们作为项目工作的优先事项。

* * *

## 回答 #112

> 赞同：3
> 
> 时间：2009-06-19T12:49:09.250

在学校，你被教导编程是“读取输入、处理数据、写入输出”。实际上，很少有处理步骤——大多数编码只是“读取输入，输出”

通常，它要么是“从用户读取，写入数据库”，要么是“从数据库读取，显示在屏幕上”。这两个案例涵盖了您将要做的大约 95% 的工作。

* * *

## 回答 #113

> 赞同：3
> 
> 时间：2009-06-19T12:49:32.153

通过实现客户想要的来满足客户 - 不幸的是，这意味着客户知道他想要什么。

* * *

## 回答 #114

> 赞同：3
> 
> 时间：2009-06-19T12:50:40.403

代码越少越好。现在我知道，如果代码更容易阅读/理解，有时值得拥有更多代码行

* * *

## 回答 #115

> 赞同：3
> 
> 时间：2010-01-04T10:29:29.220

在我的计算机科学课程中教授的[卡诺图](http://en.wikipedia.org/wiki/Karnaugh_map)编程中，我永远找不到实际用途。

* * *

## 回答 #116

> 赞同：3
> 
> 时间：2009-05-20T19:42:19.683

事实证明，在 Linux 下检查内存分配是否返回引用并不重要，因为它实际上会*欺骗*你，或者在将来的某个时间实际分配内存，或者如果没有，则完全中止你的程序有你需要的内存。

* * *

## 回答 #117

> 赞同：3
> 
> 时间：2009-05-21T07:08:52.350

从大学时代开始，我就认为自己是编程大师。因为我可以编码，但其他人不能。但是当我加入一家公司时，我对自己对基础知识的无知感到震惊。我对自己的所有假设都被证明是错误的！现在我知道我需要知道什么和我不知道什么！

* * *

## 回答 #118

> 赞同：3
> 
> 时间：2009-07-29T10:22:16.697

Python 是一种不切实际、令人讨厌的语言（我仍然可以阅读一些关于我早期代码的评论，抱怨它），而 C++ 是唯一真正的面向对象语言。

我错了，我仍然感到羞愧。

* * *

## 回答 #119

> 赞同：3
> 
> 时间：2009-05-23T05:11:15.130

我持有时间最长（因此代价最高）的错误假设是：“业务的要求是理智和合理的，我只是还没有理解它们。”

> 墙上有 100 个绿色假设，
> 如果一个绿色假设意外倒下，
> 那么墙上就会有 99 个绿色假设。

交替：

> 矮胖子坐在墙上。
> 矮胖子摔倒了，
> 所有国王的马和所有的国王男人，
> 埃菲姆说，他只是个技术人员。

* * *

## 回答 #120

> 赞同：3
> 
> 时间：2009-05-22T09:31:47.183

我一直认为任何为任何语言编写任何代码的人都会使用编辑程序。

我和我的一个客户一起工作，他让我主要是作为支持，并为他写一些更复杂的东西。有一天，他搞砸了一个文件，很重要。他不小心保存了自己的三个多小时的工作，当我问他为什么不经常保存时，他回答说：“因为我还没有完成”。当然，这不是一个可以接受的答案，我又戳又戳了一点。我最终发现他从未使用过任何编辑程序，永远！甚至没有notepad.exe！他一直在使用在线 CPanel 编辑器来编辑文件！它甚至没有“查找”功能。他在完成之前无法保存，因为他正在编辑网站上的实时文件！

不用说我大吃一惊，他至今仍在使用 CPanel 编辑器...

* * *

## 回答 #121

> 赞同：3
> 
> 时间：2010-01-04T09:41:26.870

我不需要快速重构面向对象的代码。马丁福勒终于睁开了我的眼睛。

* * *

## 回答 #122

> 赞同：3
> 
> 时间：2009-10-13T01:30:41.787

OOP 的好处是您可以重用*对象*，而实际上它是通过创建具有相同接口的新对象来重用*其余代码。*

实际上，对象可能占代码的 2%，因此重用只会为您带来 2% 的好处。真正的好处是通过创建一个允许所有其他代码完全不同的新对象来重用其他 98% 的代码。现在您可以重用 98% 的代码。将某些东西写为对象所需的时间延长 3 倍，这是非常值得的。

例如，如果您有一个绘图程序并且突然想要绘制一个新形状，您只需更改 ShapeObject（同时保持界面相同）。程序中的其他任何内容都无需更改。

* * *

## 回答 #123

> 赞同：3
> 
> 时间：2009-05-21T07:17:31.443

在上大学时（90 年代中期），他们的计算机实验室里只有 Windows 3.11 机器（我知道，奇怪的大学）。

有一段时间，我认为**只有 Windows 平台与我作为一名专业程序员相关**，而所有其他平台只是从历史学术角度来看才有趣。

从学校毕业并了解了现代 unix 和 linux 环境后，我不禁对我*蹩脚*的学校感到愤怒和失望。

我还不敢相信我在没有见过 bash shell 甚至没有听说过 emacs 或 vim 的情况下获得了计算机工程学位。

* * *

## 回答 #124

> 赞同：3
> 
> 时间：2009-05-21T07:19:19.943

在不浪费一个字节或一个 CPU 周期的情况下编写高效的程序非常重要。

但有了更多的经验，它不是关于字节或 CPU 周期，而是关于你的思想流，连续的、不间断的，就像一首诗。

本质上，不要太努力。

* * *

## 回答 #125

> 赞同：3
> 
> 时间：2009-05-22T17:43:57.653

学习正则表达式将节省您的时间

* * *

## 回答 #126

> 赞同：3
> 
> 时间：2009-05-23T13:05:04.100

那，通过学习一*门精确的科学*，我不需要提高我有限的社交技能。

* * *

## 回答 #127

> 赞同：3
> 
> 时间：2009-06-10T15:23:15.667

我会成为别人的富有的编程软件

* * *

## 回答 #128

> 赞同：3
> 
> 时间：2010-04-03T20:59:12.803

那些测试只是拖延的另一种方法。

* * *

## 回答 #129

> 赞同：3
> 
> 时间：2010-11-23T15:02:31.200

我通过阅读 K&R 自学了 C。不幸的是，我没有逐字阅读它，并且一定错过了一些东西。我编写了自己的 malloc 和 calloc 版本，我从一个工作到另一个工作都随身携带，因为我没有意识到你可以只链接到现有的库。我这样做了好几年，直到有人终于问我为什么要携带这些东西，“嗯......你确实意识到你可以链接到现有的图书馆，对吧​​？”

* * *

## 回答 #130

> 赞同：3
> 
> 时间：2010-06-19T21:45:59.480

PHP 的 mysql_fetch_row 是从已执行的 SQL 查询中检索数据的唯一方法。

老实说 - 我在没有使用 mysql_fetch_array 的情况下编写了整个 Web 应用程序，并且每次我想更改函数以添加额外的列时都必须更改一堆数字。

* * *

## 回答 #131

> 赞同：2
> 
> 时间：2009-05-21T15:04:01.690

这很尴尬，但很长一段时间以来，我一直认为嵌套我的方法调用或进行多个方法调用比在 C# 中创建一个变量来存储每个方法调用的值更节省内存。

* * *

## 回答 #132

> 赞同：2
> 
> 时间：2009-05-21T18:32:56.807

不是坚持时间最长的，但在某个时间点和几年里，我：

*   以为 Microsoft Windows 是世界上唯一的操作系统（那是 1992 年）
*   了解 DOS 足以拥有“高级”操作系统知识。

这就是为什么我在高中没有选择“计算机课程”的原因。我以为我对计算机已经足够了解了。

后来在大学里，出于我的错误：

*   我认为 UNIX 操作系统/程序是完美的，而 DOS/Windows 永远不会接近它（当时它看起来如此真实，我想 Linus 也这么认为，这就是为什么 Linux 与 UNIX 如此相似而不是类似的原因。 . 其他操作系统）

最后，很长一段时间，我认为：

*   只有我的软件很烂，商业软件完美无瑕，因为……它是“商业”软件
*   美国的软件/工程师/产品是卓越的同义词，其他任何东西都只是糟糕的尝试。

* * *

## 回答 #133

> 赞同：2
> 
> 时间：2009-05-20T19:24:34.023

我摸索编程。通过研究 SICP 书，我发现我一无所知。至少现在我正在深入研究编程。

* * *

## 回答 #134

> 赞同：2
> 
> 时间：2009-05-20T17:28:29.297

如果你看不懂我的代码，你就是不懂语言。我有一些代码审查，我试图反驳这一点。

花了几年的时间才知道有时间和地点可以让您的代码变得神奇，它在库中，而不是在应用程序中。该应用程序是为了清晰和可读性。最好在隐藏在扩展方法和框架之后使用魔法。

* * *

## 回答 #135

> 赞同：2
> 
> 时间：2009-06-03T19:19:49.613

代码行越多，软件就越好。

* * *

## 回答 #136

> 赞同：2
> 
> 时间：2009-06-19T12:48:45.117

我从没想过我会成为一名专业的程序员，我以为我会从事电子工作。但最后，编程变得容易得多，而且报酬也高得多，以至于开始作为副业的工作成为了我的主要工作。

* * *

## 回答 #137

> 赞同：2
> 
> 时间：2009-06-19T12:49:56.987

我最大的先入之见是我会被允许以我想要的方式编程。然后我当然离开了大学，被一家拥有荒谬的框架、规则和程序的公司雇用，这不仅意味着我没有按照我想要的方式编程，而且意味着我的编程*很糟糕*。

* * *

## 回答 #138

> 赞同：2
> 
> 时间：2009-06-19T12:57:53.167

*   我以为我会连续编码 8 个小时。实际上，我每天有 4 小时的编码时间，1 小时的午餐时间，1 小时的茶歇时间，以及 2 小时的闲聊/闲聊/堆叠。

*   在工作之前，我以为所有的客户都是白痴，不知道两个关于计算机的废话。男孩，我错了。有时，我们得到比我们做得更好的人的项目，他们只是没有时间去做。

*   我认为隔间很糟糕，现在我喜欢它们：DI 实际上从有门的办公室搬到了隔间。我喜欢开放性。

*   所有程序员都不是运动型的。我以为我是唯一一个去健身房的人。在我工作的地方，我们至少有 10 个人每天早上 5 点去健身房。

*   我以为不会有女程序员。我们的一些线索是女士。

* * *

## 回答 #139

> 赞同：2
> 
> 时间：2009-06-10T15:34:39.450

那些营销人员关心你的工作。

* * *

## 回答 #140

> 赞同：2
> 
> 时间：2009-06-10T15:40:58.487

你需要一个客户规范来完成一个项目。很多时候，您都是从销售会议和记事本开始的。当然，在会议结束时，他们希望有一个截止日期，“只是大致了解一下”。

* * *

## 回答 #141

> 赞同：2
> 
> 时间：2009-06-08T02:18:57.543

您可以在其构造函数中 memset( this, 0, sizeof(TheObject) ) 一个 C++ 对象，而不会产生负面影响

* * *

## 回答 #142

> 赞同：2
> 
> 时间：2010-07-12T19:16:21.207

那....当断点有效时谁需要 JUnit 测试？（在调试模式下测试应用程序时）。后来才知道为什么......

* * *

## 回答 #143

> 赞同：2
> 
> 时间：2009-05-21T13:25:11.513

不知何故，一家经营着大量相当高知名度/高流量网站的公司实际上知道他们在做什么。结果他们在很大程度上是一无所知，并且非常幸运地处于他们所处的位置。所以我想道德是，

扎实的软件工程和最佳实践！=商业成功

或者....

最关键的软件系统 == 废话

* * *

## 回答 #144

> 赞同：2
> 
> 时间：2009-07-05T01:35:26.403

Java 将对象的副本传递给函数，而不是引用。

换句话说，我认为如果您将一个对象传递给一个方法，然后以某种方式更改该对象，它不会更改调用范围内的对象。我总是将对象传递给方法，操作它们，然后返回它们！

* * *

## 回答 #145

> 赞同：2
> 
> 时间：2009-05-23T09:49:39.470

总是没有足够的时间在截止日期之前完成它。

* * *

## 回答 #146

> 赞同：2
> 
> 时间：2010-06-14T20:08:38.543

**我可以让传统的程序程序员相信为什么 OOP 经常提供更好的解决方案。**

也就是说，描述世界的语言需要描述复杂对象及其关系的能力。

争论通常包括关于抽象类的废话，我的回答是“并非所有 OOP 程序员都是刚从 Uni 毕业并且仍然痴迷于抽象”。或者经典的，“在 OOP 中没有什么是我不能用严格的过程编程做的”，我通常回答说，“不是你**可以**，而是如果你有更广泛的工具集你是否**愿意**” .

我已经学会了接受他们不会通过与我相同的镜头来看待世界。

* * *

## 回答 #147

> 赞同：2
> 
> 时间：2009-05-20T16:17:50.750

所有 OOP 语言都具有相同的面向对象概念。

*   Java `interface`!= 方法的接口。
*   Java 接口是一种特定于语言的解决方案，可满足多重继承的需求。Ruby 的 mixins 试图解决同样的问题。
*   Javascript 中开箱即用的继承与 Java 实现继承的方式非常不同。

* * *

## 回答 #148

> 赞同：2
> 
> 时间：2009-05-20T19:30:17.243

假设如果我写的代码真的很好并且尽可能没有错误，那是我能做的最好的事情。事实证明，有时经理们更喜欢那些试图成为他们最喜欢的人而不是做得很好的人。

* * *

## 回答 #149

> 赞同：2
> 
> 时间：2009-05-20T19:58:08.713

与自动化相结合的编程优雅足以替代良好的老式测试。

* * *

## 回答 #150

> 赞同：2
> 
> 时间：2009-05-20T20:07:56.293

我曾经认为我永远不会像 MS 开发人员那样的顶级开发人员进行编程，但现在我认为我可以编写相同的干净代码甚至更好。

* * *

## 回答 #151

> 赞同：2
> 
> 时间：2009-05-22T02:20:16.690

我以为 Windows 3.1 只是一个玩纸牌游戏的平台。DOS 是 BASICA 的平台。

* * *

## 回答 #152

> 赞同：2
> 
> 时间：2009-05-22T06:56:24.987

当您彻底测试了代码后，就不需要进行错误处理了。

* * *

## 回答 #153

> 赞同：2
> 
> 时间：2009-05-23T13:00:05.670

**WTF 始终是一个糟糕的专业人士的证据。**

事实上，我最近一直意识到我在整个职业生涯中承诺了多少 WTF，但是当 StackOverflow 向我展示[它们只是另一个软件指标](https://stackoverflow.com/questions/84556/whats-your-favorite-programmer-cartoon/84609#84609)时，我感到很欣慰。

* * *

## 回答 #154

> 赞同：2
> 
> 时间：2009-05-23T13:18:34.960

这些变量实际上只是内存中特定区域的名称。

* * *

## 回答 #155

> 赞同：2
> 
> 时间：2009-05-25T09:59:06.860

只有程序员可以轻松地创建一个成功的应用程序。软件还与易用性、美观、文档和适当的营销有关。软件开发是多学科的，失败的一门学科可能会使应用程序失败。

* * *

## 回答 #156

> 赞同：2
> 
> 时间：2009-05-27T17:19:29.360

适合系统编程的语言*必须*支持 [可变] 变量。

* * *

## 回答 #157

> 赞同：2
> 
> 时间：2009-05-28T20:12:44.817

常见的不良假设：“代码质量是次要的”。更糟糕的假设：“代码质量根本不重要。”

*代码质量*可以是一个非常广泛的概念。[我在这里](http://metaphysicaldeveloper.wordpress.com/2009/04/20/quality-of-code/)非常彻底地讨论了它。

* * *

## 回答 #158

> 赞同：2
> 
> 时间：2009-07-29T09:56:02.333

我一直认为，要成为一名优秀的程序员，就必须了解系统的所有内部工作原理。我很惭愧，在你开始编码之前，我不知道关于该语言的所有知识，比如它的库、模式、片段。好吧，我不再那么天真了。

* * *

## 回答 #159

> 赞同：2
> 
> 时间：2010-07-12T15:57:48.827

这种简单性几乎总是胜过复杂性。KISS - 保持简单愚蠢的规则。

编辑：正如乔治在下面所说的那样，我把这个颠倒了。我的思绪一定在回复中迷失了。如果使用得当，简单几乎总能让你的代码变得更好。

* * *

## 回答 #160

> 赞同：2
> 
> 时间：2010-08-11T10:50:09.300

临时解决方案不是永久解决方案
，或者换句话说：变通办法不是永远的:)）。

* * *

## 回答 #161

> 赞同：1
> 
> 时间：2009-05-21T22:52:18.047

You can't diagnose 'intermittent errors' in production. Rebooting the server is the only way to fix it.

Maybe is was MORE true in my early days of ASP coding. But there are a lot of good profiling tools to find memory leaks and other weird issues. Perfmon also provides lots of good diagnostic data. Plus you should be coding diagnostic logging into your application.

* * *

## 回答 #162

> 赞同：1
> 
> 时间：2009-06-19T12:52:42.973

我原以为这将是一辆快车、松散的女人、私人飞机和大胆的冒险经历的过山车。等到我得到那个职业顾问的帮助......

* * *

## 回答 #163

> 赞同：1
> 
> 时间：2009-05-25T03:08:12.333

如果我有一个强大的静态类型系统，比如 ML 或 Haskell 中的那种，我应该用它来编码尽可能多的不变量。只有通过经验，我才知道有时让不变量是动态的会更好。

* * *

## 回答 #164

> 赞同：1
> 
> 时间：2009-06-03T21:01:56.320

选择和使用我们的开发方法是因为它们是同类中最好的。

然后我发现我们使用的工具对我们所做的事情、何时做以及我们如何做的影响比我想象的要大得多。

* * *

## 回答 #165

> 赞同：1
> 
> 时间：2009-05-21T13:46:44.467

分析和性能分析是一回事。

然后我发现分析器虽然总比没有好，但包含错误的假设，例如：

*   只有汇总重要，而不是细节
*   统计精度对于定位性能问题是必要的
*   测量时间和定位不必要的耗时操作是一回事

* * *

## 回答 #166

> 赞同：1
> 
> 时间：2009-05-20T20:18:15.147

Windows 中的线程很便宜。

事实证明这只是有点正确。一个线程有一定的开销，并且需要它自己的地址空间，它可以在那里生存和快乐。因此，如果我发现自己在一个应用程序中处理数十个线程，我会问自己如何才能将所有内容简化并整合到更少的线程中。

* * *

## 回答 #167

> 赞同：1
> 
> 时间：2009-05-21T20:48:22.523

标识列不能包含重复值： [Sql server 中的标识列](https://stackoverflow.com/questions/889855/identity-column-in-sql-server/889863#889863)

* * *

## 回答 #168

> 赞同：1
> 
> 时间：2009-07-04T20:45:35.567

规格齐全且充足

* * *

## 回答 #169

> 赞同：1
> 
> 时间：2009-05-21T06:45:14.047

运行时性能很重要。通常，总解决时间很重要。

自从学习了 python，我就摆脱了对静态类型的依赖。

* * *

## 回答 #170

> 赞同：1
> 
> 时间：2009-06-09T08:30:43.907

人们实际上关心正在使用的技术（开源/闭源）。

* * *

## 回答 #171

> 赞同：1
> 
> 时间：2009-05-22T17:40:14.150

那个 OOP 已经过时了 :( 直到今天我仍然后悔这样想。

* * *

## 回答 #172

> 赞同：1
> 
> 时间：2009-05-20T15:21:16.167

软件工程师对他们现在正在做什么或过去对您的软件做过什么总是诚实的。

* * *

## 回答 #173

> 赞同：1
> 
> 时间：2009-05-21T04:15:33.727

学习一门全新的语言真的很难。

* * *

## 回答 #174

> 赞同：1
> 
> 时间：2009-05-20T15:48:54.037

640K 对于任何人（DOS）都应该足够了。多年来，许多人普遍相信这一点。

我第一次拥有一个具有 8MB RAM 的系统时，我认为这远远超出了我的需要。它运行了操作系统（Mac）以及我正在使用的所有应用程序（Word、电子邮件、Firefox 等）。

* * *

## 回答 #175

> 赞同：1
> 
> 时间：2009-05-20T20:26:46.490

在可预见的将来，我写的所有东西都会在某个时候失败。

并不是说一切最终都不会分崩离析，而是在我的编程教育早期，当我发现 try..catch 块时……我将所有东西都包裹在其中……如果它们失败了，那将代表更大的东西我的程序无法处理的问题（例如，北极和南极互换了位置）

* * *

## 回答 #176

> 赞同：1
> 
> 时间：2009-05-21T07:23:51.557

我不知道 Javascript 中除以 0 的东西是 Infinity（IEEE 754 算术）。最近很难学会。

* * *

## 回答 #177

> 赞同：1
> 
> 时间：2009-05-21T22:20:38.623

那是因为我在我的“标准”环境中构建了该软件，它可以在每个人的机器/服务器上运行。只是发现我安装了一些实际正在使用的不起眼的库和服务。然后发现我利用了一个错误，该错误随后被修补。

* * *

## 回答 #178

> 赞同：1
> 
> 时间：2009-05-22T06:41:01.517

我知道要编写一个合适的 Web 应用程序，并且当我必须设计可以在所有浏览器中运行的东西时，我就很清楚了。

* * *

## 回答 #179

> 赞同：1
> 
> 时间：2009-05-22T14:14:27.457

理解指针和递归将是非常困难的。

VB6 中的整数与.Net 的大小不同。

VB6 可以进行位级操作。

专业程序员制作没有错误的软件。

* * *

## 回答 #180

> 赞同：1
> 
> 时间：2009-05-28T02:31:38.250

完整的 Unicode 支持是成功将软件部署到亚洲地区的先决条件。

* * *

## 回答 #181

> 赞同：1
> 
> 时间：2009-05-28T03:24:51.200

我认为编写足够好的软件是一件容易的事

* * *

## 回答 #182

> 赞同：1
> 
> 时间：2009-06-10T06:06:16.290

八十年代初，当我开始玩电脑（ZX81，内存为 1K）时，我花了几个小时从杂志上为游戏输入大量机器代码（字节，不是人类可读的汇编语言），基本上是使用 BASIC Poke 指令。

我相信，如果我错误地输入了一条指令，那么我将不得不回到开头并从头开始再次输入机器代码。

* * *

## 回答 #183

> 赞同：1
> 
> 时间：2010-08-11T11:30:58.943

线程=进程

* * *

## 回答 #184

> 赞同：1
> 
> 时间：2010-04-17T22:23:10.327

可以互换的 html 元素 id 和 name 属性。

事实证明，具有 'name' 属性的元素是相关的/used.referenced 用于 POST 等，而 'id' 属性用于 DOM 引用。

* * *

## 回答 #185

> 赞同：0
> 
> 时间：2009-05-20T15:37:18.257

当然，您可以查看[FindBugs](http://findbugs.sourceforge.net)和[PMD](http://pmd.sourceforge.net)，但这些是我最喜欢的陷阱和技巧（全是 Java）：

字段没有被覆盖，它们被遮蔽。

没有明确的 super.super 访问。

没有定义构造函数的类有一个隐式的零参数构造函数。今年我犯了一个与此相关的实际错误。

要获得对内部类父级的引用，您可以使用语法“Outer.this”来消除方法调用的歧义或进行同步。

类是 C++ 术语中的“自己的朋友”，该类的任何实例的私有方法和字段都可以从同一类的任何方法中引用，甚至是静态方法。这将使我早期的一些 clone() 和复制构造函数变得更加简单。

受保护的方法和字段可以在扩展类的静态上下文中访问，但前提是该类在同一个包中。我很高兴 flex.messaging.io.amf 不是密封包。

* * *

## 回答 #186

> 赞同：0
> 
> 时间：2009-05-25T03:40:47.663

初中学习算法时，我认为NPC只是非多项式问题，这意味着这个问题的复杂性并不比多项式更简单。直到我在大学里学习了计算理论，我才意识到我错了-_-b

* * *

## 回答 #187

> 赞同：0
> 
> 时间：2009-05-23T02:12:54.657

当它们相等时，该维度 n 是维度 (n+1) 的一个实例。

* * *

## 回答 #188

> 赞同：0
> 
> 时间：2010-12-14T19:21:35.613

那：

```
for (int i = 0; i < myObj.variable; i = i + 1) 
```

被优化为：

```
int j = myObj.variable; 
for (int i = 0; i < j; i = i + 1) 
```

哇，当我意识到它们每次都在运行时，我停止了代替 j 的函数调用！

原因：

```
for (int i = 0; i < myObj.variable; i = i + 1){ 
    if (function_argument == NULL){ 
        myObj.variable++; 
    } else { 
        printf("%d", myObj.variable);
    }
} 
```

不一样：

```
int j = myObj.variable;
for (int i = 0; i < j; i = i + 1){ 
    if (function_argument == NULL){ 
        myObj.variable++; 
    } else { 
        printf("%d", myObj.variable);
    }
} 
```

任意示例，但您可以看到优化将如何改变执行。

* * *

## 回答 #189

> 赞同：0
> 
> 时间：2009-05-21T05:04:27.010

销售人员现实地管理客户的期望。（接受过承诺不足和过度交付方面的培训）

该软件需求通常来自市场研究。

* * *

## 回答 #190

> 赞同：0
> 
> 时间：2009-05-21T07:34:17.027

他说他懂编程，一定是真的！

* * *

## 回答 #191

> 赞同：0
> 
> 时间：2009-05-23T13:50:16.053

认为我是唯一一个编写一段代码的人......然后当我需要那个例程时，我不记得我做了什么，只需复制/粘贴我自己的代码。

现在，我知道每个人都这样做。

* * *

## 回答 #192

> 赞同：0
> 
> 时间：2009-07-29T10:29:47.710

一个程序最终可以解决所有问题。

* * *

## 回答 #193

> 赞同：-1
> 
> 时间：2010-12-19T17:20:01.867

@Kyralessa：值得注意的是，在大多数处理器上，在汇编/机器语言中，函数可能会返回调用者以外的某个地方，同时使堆栈保持良好状态。事实上，在很多情况下这都是有用的。我在 6502 上第一次看到的一个变体，虽然在 Z80 上效果更好，但它是一个打印消息例程，其中要打印的文本紧跟在调用指令之后。执行将在零终止符之后恢复（或者，作为使用 Z80 时的轻微优化，在零终止符处，因为让零字节作为 NOP 执行比试图避免它更便宜）。

值得注意的是，在许多现代语言中，函数都有一个正常的退出点（它将在调用后恢复执行），但也可以通过抛出异常退出。即使在 C 语言中，也可以使用 setjmp/longjmp 来模拟这种行为。

* * *

## 回答 #194

> 赞同：-2
> 
> 时间：2009-05-25T03:42:50.953

Java 很慢。slashdot regurgitate(sp???) 上有这么多 perl 粉丝，这很可悲。

* * *

## 回答 #195

> 赞同：-2
> 
> 时间：2009-06-10T14:57:30.307

我将永远在 VB 中编程，我现在是 c#。

# .net - 为什么 IO.Directory.CreateDirectory 不应该成功？

> ID：888228
> 
> 赞同：9
> 
> 时间：2009-05-20T14:23:10.637
> 
> 标签：.net, file-io, permissions

我在 Vista Ultimate 机器上运行 Visual Studio 2008。当我创建一个全新的控制台应用程序并通过调试器运行以下代码时，我得到了预期的结果——`UnauthorizedAccessException`抛出 an 并且没有创建目录。

```
Sub Main()
    Dim path = "C:\Windows\zzzz"
    Try
        IO.Directory.CreateDirectory(path)
    Catch ex As Exception
        Console.WriteLine(ex.Message)
    End Try
    Console.WriteLine(IO.Directory.Exists(path).ToString)
    Console.ReadLine()
End Sub 
```

当我从生产解决方案中运行同样的代码时，该`IO.Directory.CreateDirectory()`方法*不会*引发异常，`IO.Directory.Exists()`返回 True，**并且该目录实际上并未在磁盘上创建。**

是否有任何项目/解决方案设置会使 IO.Directory.CreateDirectory() 的行为像这样变化？

**注意：**在这两种情况下，我都*没有*以管理员身份运行 Visual Studio。

**编辑：**生产应用程序与测试应用程序在同一个盒子上运行。

**编辑#2：**生产应用程序正在使用虚拟化。我点击我的电脑，导航到 C:\Windows，然后点击资源管理器工具栏上的“兼容性文件”，它把我带到了 C:\Users\myUser\AppData\Local\VirtualStore\Windows 我创建的目录所在的位置。

唯一悬而未决的问题是 - 为什么生产应用程序虚拟化，而测试控制台应用程序抛出异常？

**答：默认情况下，控制台应用程序是使用 app.manifest 创建的。生产应用程序（即 WPF 应用程序）没有 app.manifest。显然，如果可执行文件没有 app.manifest，Vista 将使用虚拟化。**

谢谢大家！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-20T14:30:44.290

Windows Vista 允许您创建目录，但它会将其存储在其他位置。只有创建它的应用程序才能在您指定的路径中看到。这就是 Exists 返回 true 的原因。

这样做是为了让旧的应用程序尝试将文件保存在没有权限的文件夹中不会失败。大多数人在尝试将文件保存在程序文件目录中的旧应用程序中遇到这种情况。

这称为虚拟化，您可以设置一个清单，说明您不希望它用于您的应用程序。此外，如果您以提升的权限运行，则它不适用（这不是您的情况）。

这也会影响注册表。

[你可以在这里](http://thelazyadmin.com/blogs/thelazyadmin/archive/2007/04/26/file-system-virtualization.aspx)阅读更多关于它的信息。

这是来自微软 的[参考。](http://technet.microsoft.com/en-us/magazine/cc138019.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T14:27:47.167

`Directory.CreateDirectory`如果文件夹已经存在，则不会抛出异常，因此您遇到的行为是正确的。

# sharepoint - 发布删除网站集

> ID：888234
> 
> 赞同：2
> 
> 时间：2009-05-20T14:23:55.240
> 
> 标签：sharepoint, spsite, sitecollection

我目前正在做一些测试，我尝试以编程方式删除网站集。因此，我意识到 SharePoint 的一些奇怪行为。

我使用以下代码来测试网站集删除。

```
private static void DeleteSiteCollection(string urlSiteToDelete)
{
    SPSecurity.RunWithElevatedPrivileges(delegate()
    {
       SPWebApplication webApp = SPWebApplication.Lookup(new Uri("http://wssdev06"));
       webApp.Sites.Delete(urlSiteToDelete);                    
       webApp.Update();
    });
} 
```

因此，当我使用现有网站集的 url 调用该方法时，将按预期删除网站集。但是，当我使用 null、空字符串或未连接到网站集的 url 调用该方法时，SharePoint 会删除位于根目录下的网站集（例如[http://wssdev06/](http://wssdev06/)）。

我不确定我是否太过于使用此 SPSiteCollection.Delete() 方法，或者我是否不了解网站集和托管路径的相关性，但我认为这是一个非常奇怪和令人担忧的行为。

我可以在不同的 Web 应用程序上重现这种行为，但还没有选择在另一个 SharePoint 环境中进行测试。

那么我做错了什么还是这是一个错误？

**更新：**

所以我做了更多的调查并意识到这一定与 SPSiteCollection 类的索引器有关，如果给定的 url 下没有网站集，则返回根网站集。看起来像一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T15:12:54.623

您的代码看起来正确。一种想法是添加对网站集的检查，以确保要删除的网站在网站集中。我意识到这并不能回答你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-23T18:52:54.440

每当您要求 SharePoint 使用 Url 查找网站集时，它最好返回 SPSite，即使这意味着它必须忽略 Url 的一部分。

有时这是一件非常好的事情。fi 如果你有一个列表的完整 url 并且想要找到对应的 SPSite 和 SPWeb。

但这可能非常危险，例如当您删除网站集并可能出现拼写错误时。如果您想确保获得正确的网站集，请首先查找 SPSite，并检查您获得的 SPSite 是否具有您想要的 Url。

BR

每

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T01:52:43.173

这听起来与 Microsoft 的 KB 968474 中描述的问题完全相同 - 如果使用了错误的 URL 路径，stsadm 可能会无意中删除根网站集。与您的症状类似，使用 stsadm -o restore 时，“如果 URL 路径不正确，则尝试针对唯一有效路径（即 URL 的根站点集）进行删除和还原。”

正如您所怀疑的，在我看来，底层站点删除 API 中存在一些错误。该算法可能会寻找“最接近的匹配”而不是“精确匹配”。

枚举网站集并验证完全匹配可能是避免这种情况的最佳方法。但是，我不会说您做错了什么，因为这与 Microsoft 示例代码非常接近，并且该函数的文档没有给出有关传递无效 URL 的警告。

# c++ - 在 C++ 中重写基的重载函数

> ID：888235
> 
> 赞同：55
> 
> 时间：2009-05-20T14:24:07.517
> 
> 标签：c++, inheritance, polymorphism, overriding

> **可能重复：**
> [C++ 重载决议](https://stackoverflow.com/questions/72010/c-overload-resolution)

我遇到了一个问题，在我的类覆盖其基类的一个函数后，所有重载版本的函数都被隐藏了。这是设计使然还是我只是做错了什么？

前任。

```
class foo
{
  public:
    foo(void);
    ~foo(void);
    virtual void a(int);
    virtual void a(double);
};

class bar : public foo 
{
  public:
    bar(void);
    ~bar(void);
    void a(int);
}; 
```

下面会给出一个编译错误，说明 bar 中没有 a(double) 函数。

```
main() 
{
  double i = 0.0;
  bar b;
  b.a(i);
} 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2009-05-20T14:34:46.653

在类栏中，添加

```
using foo::a; 
```

这是 C++ 中常见的“陷阱”。一旦在类作用域中找到名称匹配，它就不会在继承树上进一步查找重载。通过指定 'using' 声明，您将所有 'a' 的重载从 'foo' 带入 'bar' 的范围。然后重载工作正常。

请记住，如果存在使用 'foo' 类的现有代码，则其含义可能会因额外的重载而改变。或者额外的重载可能会引入歧义，并且代码将无法编译。詹姆斯霍普金的回答指出了这一点。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-05-20T14:31:59.717

这就是语言过去的工作方式。在*using*关键字之前，如果您覆盖了一个重载函数，则必须将它们全部重载：

```
class bar : public foo 
{
  public:
    bar(void);
    ~bar(void);
    a(int);
    a(double d) { foo::a(d); }  // add this
} 
```

这让很多人感到恼火，语言委员会增加了*使用*功能，但一些旧习惯很难改掉；和习惯者†有一个很好的论据。

正如詹姆斯霍普金斯指出的那样，通过添加*using*，程序员表达了派生类将在没有警告的情况下将任何未来的 foo::a() 覆盖添加到其可接受的签名列表中的意图。

这是他描述的一个例子：

```
#include <iostream>
class Base {
public:
  virtual void f(double){ std::cout << "Base::Double!" << std::endl; }
  // virtual void f(int) { std::cout << "Base::Int!" << std::endl; } // (1)
  virtual ~Base() {}
};

class Derived : public Base {
public:
  // using Base::f; // (2)
  void f(double) { std::cout << "Derived::Double!" << std::endl; }
};

int main(int, char **) {
  Derived d;
  d.f(21);
  return 0;
} 
```

输出将是“Derived::Double！” 因为编译器会将整数参数提升为双精度。g++ 4.0.1 -Wall 不会警告此促销已发生。

取消注释 (1) 以模拟对 Base 添加方法 Base::f(int) 的未来更改。即使使用 -Wall 和“Derived::Double！”，代码也会再次编译，而不会发出警告。仍然是输出。

现在取消注释 (2) 以模拟 Derived 程序员决定包括所有 Base::f 签名。代码编译（没有警告），但输出现在是“Base::Int！”。

—

† 我想不出一个英语单词来形容“那些有习惯的人”和“上瘾的人”太强了。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-05-20T14:38:26.380

这是设计使然。重载解决方案仅限于单个范围。当将附加函数添加到基类或命名空间范围时，它可以防止一些令人讨厌的有效代码更改含义的情况。

# eclipse-cdt - Eclipse CDT 调试控制台不显示程序输出

> ID：888241
> 
> 赞同：6
> 
> 时间：2009-05-20T14:25:31.117
> 
> 标签：eclipse-cdt, eclipse-3.4

我在带有[MinGW GCC 4.2.1](http://sourceforge.net/project/showfiles.php?group_id=2435&package_id=241304&release_id=532062)和[GDB 6.8-3](http://sourceforge.net/project/downloading.php?group_id=2435&filename=gdb-6.8-mingw-3.tar.bz2&a=53789889)的 Windows XP 上[为 C/C++ 开发人员使用 Eclipse IDE（Eclipse Ganymede 包 - 版本 3.4.2）](http://www.eclipse.org/downloads/packages/eclipse-ide-cc-developers/ganymedesr2)。

我面临的问题与[此处](http://dev.eclipse.org/newslists/news.eclipse.tools.cdt/msg12971.html)提到的问题非常相似。一个简单的 hello world 程序不会打印到调试器中的控制台输出。运行命令正确显示输出。我已经检查了 gdb 输出控制台和输出控制台。

在 Eclipse 的控制台窗口中获取输出的正确设置是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-09-20T07:55:57.120

//have you put endl at the end of your output?

```
int main()
{
    cout << "!!!Hello World!!!"; // prints nothing to console ; no endl
    cout << "!!!Hello World!!!" << endl; // prints !!!Hello World!!! twice
    return 0;
} 
```

# ms-access - Access 2007中的表单记录集没有返回数据

> ID：888244
> 
> 赞同：1
> 
> 时间：2009-05-20T14:26:00.367
> 
> 标签：ms-access, ms-access-2007

我正在访问中构建一个表单，该表单在选项卡控件中有几个子表单子表单工作正常，但是当我设置父表单的记录源属性并将一些文本框绑定到数据时，我发现已返回空记录集。

我已经尝试了几个不同的查询（每个查询都在单独的查询设计器中工作）无济于事。我还尝试将表单直接绑定到 Table 并且仍然返回空记录集。

我检查了过滤器，它们已关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T17:17:00.973

如果绑定到数据的文本框被锁定和禁用，则查询将默认返回空数据集。

表单的“数据输入”属性也需要设置为 false。将其设置为 true 将使表单仅用于数据输入。这可以防止在加载表单时出现后台数据集可能返回的任何数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T14:50:31.940

您是否尝试过在父表单上执行 Requery：

```
Me.RecordSource = "someQuery"
Me.Requery 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T21:04:21.250

您可以在设置数据源之前解锁和/或启用字段吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-30T15:26:07.977

尝试检查表中的关系，特别是如果您使用自动“查找”选项来创建关系。在设计视图中打开您的表并检查您的外键（FK）是否被正确索引（在字段属性下）。如果它们被索引，请确保您具有该特定字段的正确索引类型。例子; 具有以下列 PatientID(PK)、PatientName 和 TABLE B 的表 A，具有列 ID、PatientHeight、PatientWeight、PatientBP、PatientID(FK) 对于此类表 B，如果您的“PatientID(FK) 索引为“重复 OK”，您在表单中使用与该表相关的那些字段时会出现 RecordSet 错误，特别是如果表单从多个表中连接字段。总而言之，请尝试检查字段的索引，特别是如果它们对应于它们的关系类型

# asp.net - ASP.Net 菜单控件在母版页上使用时呈现不正确

> ID：888245
> 
> 赞同：3
> 
> 时间：2009-05-20T14:26:05.640
> 
> 标签：asp.net, master-pages, menu

当与母版页结合使用时，我正在努力为 ASP.Net 菜单控件的一个奇怪问题找到解决方案。

当用户导航到一个页面时 - via。菜单 - 从母版页继承，整个菜单只是扩展并在屏幕上闪烁。立即折叠并呈现页面.... 导致屏幕闪烁，令用户烦恼。

现在，有一些解决方法建议： - 从 web.config 中注释掉标记。- 在其 Page_Load 事件中为母版页提供 ID。都试过了，似乎没有解决我的问题:(。我会接受任何想法。

-香港

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-19T14:18:00.803

我记得曾经在我的一个站点上看到过。从那以后，我把菜单撕掉了，但是把它放回我的母版页后，我再也看不到闪烁了。这是一个简单菜单的代码，该菜单在母版页中没有闪烁；

```
<asp:Menu ID="menu" 
    DataSourceID="sitemap" 
    runat="server" />
<asp:SiteMapDataSource 
    ID="sitemap" 
    ShowStartingNode="false" 
    runat="server" /> 
```

自己没有尝试过，但是如何将菜单子项的默认类设置为不可见（例如，一类`invisibleMenu`），这意味着它最初以不可见的方式加载，然后使用一些 javascript 来消除不可见性？在 jQuery 中，类似

```
$('.invisibleMenu').removeClass('invisibleMenu'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-13T17:07:13.790

If I remember, I had the same problem and solve it in putting the menu in content place holder in the amster page:

```
<asp:ContentPlaceHolder ID="MenuZone" Runat="server">
   <asp:TreeView ID="TreeView1" Runat="server" DataSourceID="dsSiteMap" ImageSet="Simple"
                    NodeIndent="10" MaxDataBindDepth="3" ExpandDepth="0" OnTreeNodePopulate="TreeView1_TreeNodePopulate">
       <SelectedNodeStyle Font-Underline="True" ForeColor="#DD5555" HorizontalPadding="0px" VerticalPadding="0px"></SelectedNodeStyle>
       <NodeStyle Font-Names="Verdana" Font-Size="8pt" HorizontalPadding="0px" ForeColor="Black" NodeSpacing="0px" VerticalPadding="0px"></NodeStyle>
       <HoverNodeStyle Font-Underline="True" ForeColor="#DD5555"></HoverNodeStyle>
       <ParentNodeStyle Font-Bold="False" />
   </asp:TreeView>
   <asp:SiteMapDataSource ID="dsSiteMap" Runat="server" ShowStartingNode="False" /> 
```

And in not overwritting this placeholder in nested page.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-12T20:12:55.470

将菜单添加到 ASCX 页面或其自己的母版页，并将其包含在主母版页中。我自己从未遇到过这个问题，但发生了类似的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-11T15:37:31.127

如果知道您的问题是 ASP.Net 菜单控件在母版页上使用时呈现不正确，如果 asp.net 菜单不起作用，则使用用户控件而不是母版页，因为我们可以通过简单的操作来使用用户控件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-09-16T11:36:33.293

我也有同样的问题。但通过删除 jquery 调用解决了。:) 或者您可以下载 .js 脚本文件并将其保存在脚本文件夹中，而不是从在线引用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-09-12T14:50:14.080

万一其他人再次遇到这个问题，我在另一个 Stack Overflow 线程上解决了我的问题：

[如何摆脱丑陋的asp：菜单闪烁？](https://stackoverflow.com/questions/3240873/how-to-get-rid-of-ugly-aspmenu-flickering)

# wpf - 在 WPF 中调整列表视图的大小

> ID：888248
> 
> 赞同：1
> 
> 时间：2009-05-20T14:26:16.170
> 
> 标签：wpf, xaml, listview, wpf-controls, autosize

调整主窗口大小时如何调整列表视图的大小？

抱歉编辑。

想要设置 gridviewcolumn 的最小宽度。因此，当页面调整大小时，listview 列设置为最小宽度。可能吗？

谢谢标清

```
 </GridViewColumn>
                    <GridViewColumn     Header="Item">

                    </GridViewColumn>
                    <GridViewColumn  Header="Price">

                    </GridViewColumn>
                    <GridViewColumn   Header="Total Price1">

                    </GridViewColumn>
                </GridView>
            </ListView.View>

        </ListView>
    </Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T14:34:37.447

将其放入调整其内容大小的容器控件中。

```
<Grid>
  <ListView ... />
</Grid> 
```

或者

```
<DockPanel>
  <ListView ... />
</DockPanel> 
```

或其他...

在 WPF 中，容器控制大小和布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-02T07:10:23.023

您是否设置了列表框的 Horizo​​ntalContentAlignment？

# ruby-on-rails - Rails 语法错误

> ID：888249
> 
> 赞同：0
> 
> 时间：2009-05-20T14:26:25.123
> 
> 标签：ruby-on-rails, syntax-error

我看不到它的错误在哪里：

```
news = News.find(:all, :conditions => [":simulation_id => session[:sim_id] AND :created_at > session[:last_login]"]) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T14:31:30.840

试试这个：

```
news = News.find(:all, :conditions => ["simulation_id = ? AND created_at > ?", session[:sim_id], session[:last_login]]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T14:34:25.250

您的条件字符串不会按预期进行评估：

```
[":simulation_id => session[:sim_id] AND :created_at > session[:last_login]"] 
```

将其更改为

```
["simulation_id = ? AND created_at > ?", session[:sim_id], session[:last_login]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T18:31:54.083

您也可以调用`Model.all`，而不是`Model.find(:all)`看起来像这样：

```
news = News.all(:conditions => ["simulation_id = ? AND created_at > ?", session[:sim_id], session[:last_login]]) 
```

# web-services - 使用 Windows 身份验证的 ASMX/WCF Web 服务出现罕见且零星的 401 未经授权的错误

> ID：888255
> 
> 赞同：1
> 
> 时间：2009-05-20T14:26:42.597
> 
> 标签：web-services, asmx, http-status-code-401, unauthorized

我们有一个混合的 WCF 和 ASMX Web 服务，目前正在一个体面的项目中使用。现在，大多数时候一切都运行得很好，但是在极少数情况下，似乎是随机的，Web 服务开始阻止调用，这会将 401 Unauthorized 错误返回到相关页面。似乎是 ASMX 服务调用导致了这种情况，但鉴于这种情况并不经常发生并且不可重现，我不能肯定地说。

该错误在 IIS 重置后消失了，至少有一次它最终自行消失了。我们使用 Windows 身份验证作为禁用匿名访问的凭据类型。

有人对为什么会发生这种情况有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-07-14T16:05:40.720

我们最终找到的解决方案是一个小的注册表编辑，以禁用导致 IIS 登录问题的环回检查。我们实际上已经有了这个注册表编辑，但随着时间的推移已经忘记了它。

密钥位于：

```
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa 
```

添加一个`DisableLoopbackCheck`值为`1`and 的 DWORD 似乎可以解决问题

微软支持链接： http: [//support.microsoft.com/kb/896861](http://support.microsoft.com/kb/896861)

# input - 界定用户输入

> ID：888256
> 
> 赞同：1
> 
> 时间：2009-05-20T14:26:43.517
> 
> 标签：input, user-input, csv

用于分隔用户输入的最佳字符是什么？

例如，如果用户有无限数量的文本框可以输入内容，但每个文本框的值将连接到单个数据库字段中，那么分隔每个输入的最安全字符是什么？

我认为它应该是典型键盘上没有的字符。有没有一个角色就是为了这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T14:29:26.163

您可以使用 ASCII 控制字符之一。有一个名为“记录分隔符”的十六进制值 0x1E 可能适合您的需要。

**编辑**：顺便说一句，如果你想做正确的工作，你应该确保 \x1E 在用户输入中被转义。一种方法是使用另一个 ASCII 控制字符：\x1B，它是“转义”控制代码。因此，输入中的“\x1E”变为“\x1B\x1E”，“\x1B”变为“\x1B\x1B”。

当然，请记住，因为这些是非打印控制代码，它们无法显示。如果您想要一个可打印的表示，您可能想要使用像逗号这样的普通字符并将其从输入中转义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T14:29:59.190

我想一种方法是使用逗号，然后在用户输入中转义逗号。假设任何字符（甚至是字符序列）不能出现在用户输入中可能是不安全的——如果您可以在代码中输入它，那么用户可以将其输入到文本框中！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T14:28:07.647

通常逗号或分号用于分割数据。怎么样| 普通用户**从不**使用哪个？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T14:29:53.277

组合键怎么样？例如

```
|::| 
```

所以

```
this|::|and|::|that. Plus Those:Here and there.|::|Even this|that works 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T14:38:24.303

任何标记语言都可以做到这一点。它们有点冗长，但至少它们会在未来证明你的领域。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T14:45:52.807

使用♥ftw

# html - 如何显示已经格式化为 html 的 xml 响应（IE 不会在 xml 表之后显示任何内容）

> ID：888262
> 
> 赞同：0
> 
> 时间：2009-05-20T14:27:45.120
> 
> 标签：html, xml, xslt, xsd

如何显示已经格式化为 html 的 xml 响应（IE 不会在 xml 表之后显示任何内容）

如果您在 IE 中访问此页面，您会看到图表后没有显示任何内容： [http ://www.ratecatcher.com/prototype.htm](http://www.ratecatcher.com/prototype.htm)

这是主要的php代码：

$xml = file_get_contents($request); 回声 html_entity_decode($xml);

然后是给我带来问题的html：

之后，IE 中的用户将看不到任何内容。

有没有比 html_entity_decode 更好的方式来显示 html？我听说过 simplexml，但我不知道它是否适用于 html。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T14:41:18.980

您可以尝试使用 DOMDocument。

```
$dom = new DOMDocument('1.0', 'utf-8');
$dom->loadXML(file_get_contents($request));

echo $dom->saveXML(); // or saveHTML() 
```

# batch-file - 测试批处理文件中的文件属性

> ID：888264
> 
> 赞同：9
> 
> 时间：2009-05-20T14:27:47.273
> 
> 标签：batch-file, file-attributes

我正在写一个批处理文件，我需要知道一个文件是否是只读的。我怎样才能做到这一点 ？

我知道如何使用 %~a 修饰符获取它们，但我不知道如何处理此输出。它给出了类似-ra------的东西。如何在批处理文件中解析它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-20T14:46:28.657

像这样的东西应该工作：

```
@echo OFF

SETLOCAL enableextensions enabledelayedexpansion

set INPUT=test*

for %%F in (%INPUT%) do (
    set ATTRIBS=%%~aF
    set CURR_FILE=%%~nxF
    set READ_ATTRIB=!ATTRIBS:~1,1!

    @echo File: !CURR_FILE!
    @echo Attributes: !ATTRIBS!
    @echo Read attribute set to: !READ_ATTRIB!

    if !READ_ATTRIB!==- (
        @echo !CURR_FILE! is read-write
    ) else (
        @echo !CURR_FILE! is read only
    )

    @echo.
) 
```

当我运行它时，我得到以下输出：

```
文件：test.bat
属性：--a------
读取属性设置为：-
test.bat 是可读写的

文件：test.sql
属性：-ra------
读取属性设置为：r
test.sql 是只读的

文件：test.vbs
属性：--a------
读取属性设置为：-
test.vbs 是可读写的

文件：teststring.txt
属性：--a------
读取属性设置为：-
teststring.txt 是可读写的

```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-12-08T04:26:45.783

要测试特定文件：

```
dir /ar yourFile.ext >nul 2>nul && echo file is read only || echo file is NOT read only 
```

获取只读文件列表

```
dir /ar * 
```

获取读/写文件列表

```
dir /a-r * 
```

列出所有文件并报告是只读还是读/写：

```
for %%F in (*) do dir /ar "%%F" >nul 2>nul && echo Read Only:  %%F|| echo Read/Write: %%F 
```

***编辑***

如果文件名包含[.Patrick 的答案](https://stackoverflow.com/a/888385/1012053)`!`将失败。这可以通过在循环中打开和关闭延迟扩展来解决，但是还有另一种方法可以在`%%~aF`不诉诸延迟扩展甚至环境变量的情况下探测该值：

```
for %%F in (*) do for /f "tokens=1,2 delims=a" %%A in ("%%~aF") do (
  if "%%B" equ "" (
    echo "%%F" is NOT read only
  ) else (
    echo "%%F" is read only
  )
) 
```

# build-process - 在大型解决方案上组织结构/运行“构建”的最佳实践

> ID：888267
> 
> 赞同：3
> 
> 时间：2009-05-20T14:27:56.977
> 
> 标签：build-process, build

我正在制作一个非常大的网络应用程序（目前有 70 个项目和 150k 位置，但还有很多工作要做）。

我使用 FinalBuilder 运行构建脚本。但是，构建这样一个大型项目的最佳实践是什么？构建依赖项呢？我的项目结构对代码的性能有什么影响（如果有的话）？

我已经看过一些关于此的先前线程，但我找不到那些。我已经在解决方案中看到了超过 600 个项目的解决方案线程，为了得到明确的答案，让我们想象这个系统将增长到那个规模（我想知道如何组织一个比我的最终规模更大的项目，因为这意味着我可以组织一个更小的解决方案）。

如果重要的话，系统主要使用 .NET 3.5（C#、LINQ、SQL Server 等），但也会使用 Python/Erlang。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T14:42:01.333

我只有 40 个项目（但有几百万个 loc），我们拥有的主要最佳实践是：

*   识别项目之间的依赖关系
*   建立所有希望参与下一个版本的项目使用的标签的全球列表
*   确保每个愿意将自己的标签发布到此全局列表中的项目都已从来自全局的配置（标签列表）中制作了该标签
*   将“官方版本”（可能会部署到生产中的版本）注册到存储库中。

那样：

*   开发人员直接针对他们所依赖的其他项目的交付工作和编译他们的代码（而不是下载其他项目的源代码并在本地重新构建）。
    他们只有正确的交付，因为他们知道他们的依赖关系（即时和传递）
*   测试人员可以快速部署一组交付（来自全局标签列表）以执行各种测试（非回归、压力测试......）
*   发布管理可以将这些交付（在最终的全局构建之后）部署到预生产和生产平台上

这个想法是：

*   不要在每一步都重建交付
*   仅在开发阶段构建它（通过通用的统一构建脚本）
*   在发布之前再次构建它（用于预生产和生产平台）
*   仅针对这些交付进行编译和/或测试（而不是针对该场合下载和重新编译的源：当您有多个项目时，这是不切实际的）

主要最佳实践：
如果您自己的项目与其他项目的交付一起工作（而不是与其他项目的本地重新构建一起工作），那么它很有可能在软件生产生命周期的后续步骤中工作（测试、预生产、生产）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T14:45:15.257

您是否考虑过使用 NMaven 并将 70 个项目中的每一个都作为一个模块？这将允许您控制单个模块和整个父项目的构建、打包、版本控制和发布。它还可以帮助您解决不同模块、外部库甚至版本和不同生命周期范围之间的依赖关系（例如，您在测试生命周期中只需要 NUnit，但不需要在构建中打包它）。

这可能有助于更详细地解释这些项目的外观以及它们如何相互依赖。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T14:54:00.560

作为一个问题有点开放。让我们从我向客户建议的基本结构开始，在我拥有的分支机构内

1.  构建脚本
2.  Build Dependencies - 在构建机器上安装的东西
3.  库 - LIB、DLL、...直接从项目中引用
4.  文档来源 - 帮助来源
5.  来源
6.  部署脚本

然后 Sources 被组织在

1.  Admin - 管理控制台和脚本
2.  数据库 - 模式、脚本、初始数据
3.  常见的
4.  网络
5.  NT服务
6.  服务 - REST/SOAP 服务
7.  BizTalk - 您命名特定于产品的事物

# svn - Tortiose SVN 修订

> ID：888271
> 
> 赞同：1
> 
> 时间：2009-05-20T14:28:23.497
> 
> 标签：svn, tortoisesvn

如何在我的存储库中找到修订列表，而无需检查所有内容？我正在寻找不久前被删除的内容，但我不确定何时删除。我需要获取所有修订的列表，例如修订图，但不必检查所有内容。这有意义吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T14:32:51.647

右键单击，TortoiseSVN，回购浏览器。然后，您可以从连接到存储库而不是文件系统的浏览器检查修订图和其他所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T14:33:15.907

所有 svn 命令都接受存储库 URL 作为参数，因此您可以在不检查它们的情况下处理它们，例如：

> svn 日志[http://my.repo.url/something](http://my.repo.url/something)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T14:33:51.023

您正在寻找 Subversion 日志。您应该能够签出一个文件夹，而无需递归到其子目录。

如果您是从命令行执行此操作，则可以键入“svn log v [http://example.org/repository](http://example.org/repository) ”来查看修订列表和更改的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T14:30:32.447

我认为您必须至少检查可能包含已删除文件的文件夹。然后您可以使用上下文菜单访问历史记录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T14:34:30.367

我决定继续检查所有内容，并且能够从那里访问修订日志，而无需实际检查所有内容。

感谢您提供的任何帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T14:35:52.017

好吧，我认为您不必检查任何内容。您基本上从上下文菜单中选择 TortoiseSVN > Repo-browser 并将路径放入 SVN 存储库。打开存储库后，右键单击主根文件夹并选择显示日志。应该给你一个完整的修订历史。

# reporting-services - SSRS 矩阵行组作为实际行

> ID：888273
> 
> 赞同：3
> 
> 时间：2009-05-20T14:28:27.210
> 
> 标签：reporting-services

我不知道如何解释这一点，我尝试了很多不同的选择，但我想要的是这个。

我希望矩阵行组在布局中显示为实际行，而不是列。

因此，如果我用一列资源组和 2 个行组创建一个矩阵：项目组和项目名称，那么这 2 个不应位于单独的列中。我只想使该组加粗，并使其下方的同一列中的项目。

这只是一个例子，我真正的问题是当添加很多行组时，报告变得太宽了。

我想要它：

```
 |  resource1  |  resource2  |  resource3
group1   |
project1 |
project2 |
group2   |
project3 |
project4 | 
```

现在是什么：

```
 |  resource1  |  resource2  |  resource3
Group1  |  project1 |
        |  project2 |
Group2  |  project3 |
        |  project4 | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-04T14:36:56.193

将项目放在详细信息行中。为您的“组”数据添加父组。将上方的组总计添加到详细信息行。在我的情况下 Dimension2DetailAkro 是您的组数据，而 Dimension1DetailAkro 是您的“项目”组：

[http://3.bp.blogspot.com/_JVKkux5oAjM/Sifa2RBMKgI/AAAAAAAJNo/Tf8jXkvbcio/s1600-h/GroupingExample.gif](http://3.bp.blogspot.com/_JVKkux5oAjM/Sifa2RBMKgI/AAAAAAAAJNo/Tf8jXkvbcio/s1600-h/GroupingExample.gif)

希望这可以帮助

干杯

马库斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T18:56:40.600

您将每个组中的项目分成单独的行的要求会破坏分组。

每个矩阵行（分组）是离散的。您需要将项目和组数据分开，并将它们视为离散矩阵行。

一种方法（可能是唯一的方法）是使数据集以这种方式返回数据。

粗略地说：

```
SELECT group data, GroupID + '1111' AS DummySorting
UNION ALL
SELECT project data, GroupID + ProjectID 
```

# flash - 为什么使用预加载器时 NetStream FLV 播放会中断？

> ID：888276
> 
> 赞同：1
> 
> 时间：2009-05-20T14:29:03.527
> 
> 标签：flash, actionscript-3, flv

我有一些我想玩的 FLV。以下代码在直接运行 SWF 时可以正常工作：

```
 var sUrl:String = m_pMovieUrlList[iMovieIndex];
    m_kNetConnection = new NetConnection();
    m_kNetConnection.connect(null);
    m_kNetStream = new NetStream(m_kNetConnection);
    m_kNetStream.client = this;
    m_kVideo = new Video();
    m_kVideo.attachNetStream(m_kNetStream);
    m_kMovieContainer.addChild(m_kVideo);
    m_kNetStream.play(sUrl); 
```

但是，当它在预加载器内运行时，我得到一个 NetStream.Play.StreamNotFound NetStatusEvent。为什么会发生这种情况，我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T15:58:24.173

好吧，事实证明这是一件非常愚蠢的事情。我的网址如下所示：

“./media/video/Video1.flv”

...并将它们更改为：

“媒体/视频/Video1.flv”

...解决了问题。

# .net - 垃圾收集不会减少当前内存使用量 - 在释放模式下。为什么？

> ID：888280
> 
> 赞同：5
> 
> 时间：2009-05-20T14:29:45.837
> 
> 标签：.net, garbage-collection

我构建了一个快速程序，它需要遍历一个巨大的日志文件（几百万条记录）并从里面找到各种零碎的东西。由于数据量如此之大，我一直好奇地查看我的 Windows 任务管理器性能选项卡，看看正在使用多少 CPU 和内存。

程序成功获得我的结果后，CPU 使用率明显下降。但是在执行过程中看到我的内存使用量慢慢上升到几 GB 之后，它保持不变。

我尝试在函数结束时调用 GC.Collect()，尝试将内容设置为 null，尝试在 Release 模式下运行程序（我听说 GC.Collect() 在调试时可能无法正常工作模式）。

如果我关闭程序，内存使用量会立即下降，但我无法弄清楚为什么我无法在应用程序生命周期内清理我的应用程序。归根结底，这是一个一次性应用程序，但我只是想知道我错过了什么，即是什么保留了所有这些记忆。

想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-20T14:34:31.910

调用 GC.Collect() 只是一个收集垃圾的请求，它不是一个命令，所以如果 CLR 认为合适，它可能会选择忽略该请求。

例如，如果有很多垃圾会在收集时导致明显的延迟，但仍有可用内存来服务后续分配，那么 GC 可能会选择忽略您的请求。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-20T14:37:14.930

许多内存分配器（带有或不带垃圾收集）“囤积”它们已释放的内存，而不是将其归还给操作系统是正常的，因为在许多情况下，刚刚释放的内存将被再次请求并且速度更快将其保留在此过程中，而不是一直将其归还并一次又一次地向操作系统索要（由于页面对齐问题等原因，归还它还需要额外的努力）。

正如您所提到的，在一次性应用程序中，这不是问题。当我有一个长时间运行的应用程序时，我知道这将是对大量内存的临时需求，我使用的一种方法是生成一个子进程来执行需要大量内存的东西，因为当该进程结束时操作系统*会*收回记忆。在 Unix 系统（只是 fork）上更容易，但在 Windows 上也不错，如果有保证的话。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-13T00:30:50.660

有一种方法。我找到了这篇文章，它是西班牙语，确保你理解代码，它有效，我测试了 [ [http://www.nerdcoder.com/c-net-forzar-liberacion-de-memoria-de-nuestras-aplicaciones/ ][1]](http://www.nerdcoder.com/c-net-forzar-liberacion-de-memoria-de-nuestras-aplicaciones/%5d%5b1%5d)

```
[DllImport("kernel32.dll", EntryPoint = "SetProcessWorkingSetSize", ExactSpelling = true, CharSet = CharSet.Ansi, SetLastError = true)]
private static extern int SetProcessWorkingSetSize(IntPtr process, int minimumWorkingSetSize, int maximumWorkingSetSize);
public static void alzheimer()
{
    GC.Collect();
    GC.WaitForPendingFinalizers();
    SetProcessWorkingSetSize(System.Diagnostics.Process.GetCurrentProcess().Handle, -1, -1);
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-20T15:05:39.443

您的对象可能仍然以某种方式植根。您可以尝试使用内存分析器来查看是否是这种情况。我通常推荐 SciTech 的[.NET Memory Profiler](http://memprofiler.com/)来执行此操作，但 Red-Gate 也有一个[不错的内存分析器](http://www.red-gate.com/products/ants_performance_profiler/)。SciTech 和 Red-Gate 都提供试用版。也可以将[WinDBG 与 SOS 一起](http://www.microsoft.com/whdc/devtools/debugging/default.mspx)使用。

[这里](http://blogs.msdn.com/brada/archive/2005/03/17/398060.aspx)有一个所有分析器的有点过时的列表。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-20T14:34:50.647

当您调用 Collect() 时，不能保证垃圾收集器运行。它只是标记要收集的对象。下次 GC 运行时，它将“收集”标记的对象。

.NET 中无法强制 GC 在特定时间点收集 - 如果您需要此功能，则需要使用本机代码。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-20T14:36:12.983

不要忘记 CLR 最终使用的是 Windows 内核中的底层内存管理器，它可能有自己的关于何时释放内存的策略。例如，如果您正在使用的内存来自池，它可能只是返回到池中，而不是在您在用户级别释放它时释放它。因此，您的应用程序所拥有的内存量与分配给进程的内存量之间完全有可能（并且可能会）存在差异。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-20T14:36:01.347

Collect 方法不保证回收所有不可访问的内存。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-06-04T07:02:07.283

强制 GC.Collect 进行收集，像这样调用 GC.Collect(2); 这意味着您要求 GC 为整个堆执行完全阻塞 GC，2 表示您的堆的第 2 代。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-20T14:36:15.620

您应该查看 CLR 堆大小的性能计数器，而不是任务管理器中显示的分配给进程的总内存。Windows 不会回收分配给进程的内存，除非整个系统都缺乏内存，即使进程没有将内存用于任何事情。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2009-05-20T14:35:16.247

循环中使用的任何对象都实现了 IDisposable 吗？

# iphone - 在 UISearchBar 失去焦点时隐藏键盘

> ID：888289
> 
> 赞同：16
> 
> 时间：2009-05-20T14:31:04.490
> 
> 标签：iphone, cocoa-touch

我不知道为什么这这么难。我的页面顶部有一个 UISearchBar。当用户输入该 UISearchBar 时，它会自动过滤搜索栏下方的 UITableView 中的结果。不需要搜索按钮，因为我在按下键时进行搜索。

应用程序的流程是用户在搜索栏中键入搜索（显示键盘），然后将滚动表格视图中的结果 - 此时键盘需要消失。

我很难让键盘消失。

我知道我需要做：

```
 [searchBar resignFirstResponder]; 
```

让键盘消失，但我找不到我需要执行此操作的代表。我想在用户触摸表格视图时立即执行此操作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-12-04T04:29:06.663

尝试这个：

```
- (void)viewWillDisappear:(BOOL)animated {

    [super viewWillDisappear:animated];

    [searchBar resignFirstResponder];

} 
```

它对我有用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-01-05T16:07:27.463

我认为最简单（也是最好）的方法是对全局视图进行子类化并使用 hitTest:withEvent 方法来监听任何触摸。未注册键盘上的触摸，因此仅当您触摸/滚动/滑动/捏...其他地方时才调用 hitTest:withEvent，然后调用 [self endEditing:YES]。

这比使用 touchesBegan 更好，因为如果您单击视图顶部的按钮，则不会调用 touchesBegan。它也比使用暗屏更好，因为在复杂和动态的用户界面中，你不能把暗屏放在任何地方。此外，它比调用 [searchBar resignFirstResponder] 更好，因为屏幕上可能有很多文本字段，所以这适用于所有文本字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T14:52:24.510

您可能想像 Cydia（越狱包装 UI）那样做 - 有一个搜索按钮，当您按下搜索按钮时，它会关闭键盘。在您为预览键入内容时，结果仍会被过滤。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-08T14:00:04.933

一种可能性是 UISearchBar 属于一个控制器，它显示在 UIModalPresentationFormSheet 中。我有同样的问题，发现这与UIViewController的“disablesAutomaticKeyboardDismissal”方法有关。

[Apple 文档](https://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)说明如下：

> 在子类中重写此方法以在从需要输入视图的控件更改为不需要的控件时允许或禁止关闭当前输入视图（通常是系统键盘）。在正常情况下，当用户点击需要输入视图的控件时，系统会自动显示该视图。在不需要输入视图的控件中轻按随后会导致当前输入视图被关闭，但可能并非在所有情况下都如此。您可以在那些未解决的情况下覆盖此方法以允许关闭输入视图或使用此方法来防止在其他情况下关闭视图。
> 
> 此方法的默认实现在视图控制器的模态呈现样式设置为 UIModalPresentationFormSheet 时返回 YES，而对于其他呈现样式返回 NO。因此，系统通常不允许为模态表单关闭键盘。

在我的例子中，我在导航栏中显示了搜索栏，所以我必须创建一个 UINavigationViewController 的子类来覆盖该方法，如下所示：

```
- (BOOL)disablesAutomaticKeyboardDismissal {
    return NO;
} 
```

在那之后 resignFirstResponder 最终会让键盘消失。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-19T06:27:19.980

由于结果将在表格视图中，因此请使用`UIScrollView`的委托（`UITableView`响应）方法`- (void)scrollViewDidScroll:(UIScrollView *)scrollView`。

您需要让视图控制器响应`UITableView`的数据源和委托（在`.h`文件中）：

```
<UITableViewDataSource, UITableViewDelegate> 
```

比在`.m`文件中的初始化方法中添加：

```
self.tableView.dataSource = self;
self.tableView.delegate = self; 
```

最后，添加这个方法：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    [self.view endEditing:YES];
} 
```

这将使`UISearchBar`失去焦点，键盘将隐藏。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-19T05:31:58.003

回答可能太晚了，但这可能对将来的任何人都有帮助。这段特殊的代码对我有用。PS我不拥有这个解决方案，前段时间在网上找到的。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
UITouch *touch = [[event allTouches] anyObject];
if ([self.srchBar isFirstResponder] && [touch view] != self.srchBar)
{
    [self.srchBar resignFirstResponder];
}   
[super touchesBegan:touches withEvent:event];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-17T14:52:56.237

给定一个带有`searchBar`变量的视图，将此方法添加到视图中：

```
override func hitTest(_ point: CGPoint, with event: UIEvent?) -> UIView?
{
    if searchBar.isFirstResponder && !searchBar.point(inside: point, with: event){
        searchBar.resignFirstResponder()
    }
    return super.hitTest(point, with: event)
} 
```

# linq-to-sql - 您能否在单个事务中包含 linq-to-sql 更改和 ADO.NET 数据集表适配器更新？

> ID：888299
> 
> 赞同：0
> 
> 时间：2009-05-20T14:32:57.280
> 
> 标签：linq-to-sql, ado.net, transactions, dataset, devart

以下是我正在使用的相关技术：

*   Devart 的 dot Connect for Oracle（为 Oracle 提供方便的 Linq-to-Sql）。
*   强类型 ADO.NET 数据集。
*   一个甲骨文数据库。

这是挑战：

*   我的旧代码使用 ADO.NET 数据集和表适配器提交数据库更新。
*   我想开始将该代码转换为 Linq-to-Sql，但我想零敲碎打地做，以尽量减少代码流失和风险。

* * *

这是我的概念验证模式：

父表

*   父代号
*   父母名字

子表

*   孩子.Id
*   Child.ParentId
*   子名

这是我的概念验证代码块：

```
using System;
using System.Data.Common;
using DevArtTry1.DataSet1TableAdapters;

namespace DevArtTry1
{
    class Program
    {
        static void Main(string[] args)
        {
            using (DataContext1 dc = new DataContext1())
            {
                dc.Connection.Open();
                using (DbTransaction transaction = dc.Connection.BeginTransaction(System.Data.IsolationLevel.ReadCommitted))
                {
                    dc.Transaction = transaction;

                    Parent parent = new Parent();
                    parent.Id = 1;
                    parent.Name = "Parent 1";
                    dc.Parents.InsertOnSubmit(parent);
                    dc.SubmitChanges(); // By virtue of the Parent.Id -> Child.ParentId (M:N) foreign key, this statement will impose a write lock on the child table.

                    DataSet1.CHILDDataTable dt = new DataSet1.CHILDDataTable();
                    DataSet1.CHILDRow row = dt.NewCHILDRow();
                    row.ID = 1;
                    row.PARENTID = 1;
                    row.NAME = "Child 1";
                    dt.AddCHILDRow(row);

                    CHILDTableAdapter cta = new CHILDTableAdapter();
                     // cta.Transaction = transaction;  Not allowed because you can't convert source type 'System.Data.Common.DbTransaction to target type 'System.Data.OracleClient.OracleTransaction.
                    cta.Update(dt); // The thread will encounter a deadlock here, waiting for a write lock on the Child table.
                    transaction.Commit();
                }
            }

            Console.WriteLine("Successfully inserted parent and child rows.");
            Console.ReadLine();
        }
    }
} 
```

* * *

*   正如上面的注释所示，线程将在子数据适配器的更新调用上无限期地停止，因为它将无限期地等待子表上的写锁定。【注意外键关系：Parent.Id -> Child.ParentId (M:N)】

这是我的问题：

*   我想将整个代码块包装在一个事务中。
*   我可以这样做吗？考虑到：
    *   我想使用 Linq-to-Sql 的**SubmitChanges 方法**在父表上提交更新...
    *   我想使用 ADO.NET 数据集**表适配器**对 Child 表进行更新。

* * *

这里有两个有趣的脚注：

1.  这整个事情*是*相反的。也就是说，如果我想使用数据适配器提交对父表的更改并使用 linq-to-sql... 提交对子表的更改，那*将起作用*。
2.  我尝试将事务显式附加到数据适配器，但编译器不允许这样做，因为它是不同类型的事务。

    ```
     CHILDTableAdapter cta = new CHILDTableAdapter();
                cta.Transaction = transaction; // Not allowed because you can't convert source type 'System.Data.Common.DbTransaction' to target type 'System.Data.OracleClient.OracleTransaction'.
                cta.Update(dt);
                transaction.Commit(); 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T14:51:08.507

我对甲骨文的交易一无所知......但在 dotnet 方面，您应该可以自己控制交易。确保两种技术都使用相同的连接实例。

当我们通过连接而不是通过 ORM 控制事务时，我们使用事务范围：http: [//msdn.microsoft.com/en-us/library/ms172152.aspx](http://msdn.microsoft.com/en-us/library/ms172152.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-07-31T18:57:09.830

我有同样的问题，遇到这两个错误：

*   违反完整性约束 (ORA-02291)
*   “如果密钥不是数据库生成的，则无法插入具有相同密钥的实体”

问题是子对象的标识列设置不正确。如果 DotConnect LINQ 不假定身份密钥，则对象属性似乎是临时设置的，从而导致非顺序更新，从而导致完整性违规。

这是修复：

*   LINQ 需要知道孩子的主键是实体键并且是自动生成的。
*   在 Oracle 中，为子对象设置一个自动递增的键。
*   首先创建一个序列：

    > ```
    >  DROP SEQUENCE MyChild_SEQ;
    >   CREATE SEQUENCE MyChild_SEQ
    >       MINVALUE 1
    >       MAXVALUE 999999999999999999999999999
    >       START WITH 1
    >       INCREMENT BY 1
    >       CACHE 20; 
    > ```

*   接下来创建 OnInsert 触发器：

    > ```
    > CREATE OR REPLACE TRIGGER MyChild_AUTOINC 
    > BEFORE INSERT
    > ON MyChildObject
    > FOR EACH ROW
    > BEGIN
    >   SELECT MyChild_SEQ.nextval
    >   INTO :NEW.MyChild_ID
    >   FROM dual;
    > END MyChild_AUTOINC ; 
    > ALTER TRIGGER MyChild_AUTOINC ENABLE 
    > ```

*   修改存储模型以合并新的自动生成的主键：

    *   在 dotConnect 的 EntityDeveloper 中，打开您的 LINQ 存储模型（.LQML 文件）。
    *   将子对象的实体键设置为“自动生成值”，并将自动同步设置为“OnInsert”。
    *   保存存储模型，然后在 Visual Studio 中清理并重建解决方案。
    *   删除任何显式设置子主键的代码。
        *   LINQ 将隐式将此识别为自动递增，并检索触发器创建的 ID。
*   在代码中，创建子对象后，将其附加到父对象，如下所示：

    > ```
    > ChildType newChild = new ChildType();
    > DataContext.InsertOnSubmit(newChild);
    > Parent.Child = newChild; 
    > ```

以下是更多资源：

*   插入具有递增主键的行
    *   [http://www.devart.com/forums/viewtopic.php?p=45900](http://www.devart.com/forums/viewtopic.php?p=45900)
*   使用级联序列 ORA 保存实体上下文的问题
    *   [http://www.devart.com/forums/viewtopic.php?p=45850](http://www.devart.com/forums/viewtopic.php?p=45850)
*   自动增量列支持 (LinqConnect+Oracle)
    *   [http://www.devart.com/forums/viewtopic.php?t=18577](http://www.devart.com/forums/viewtopic.php?t=18577)

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T15:17:18.827

使用 TransactionScope 类。

请注意，如果您使用不同的数据库（或者它们位于不同的服务器上），您需要检查您的 DTC 配置。

# visual-studio-2008 - 使用 Visual Studio 2008 进行 Prefast

> ID：888303
> 
> 赞同：7
> 
> 时间：2009-05-20T14:33:35.500
> 
> 标签：visual-studio-2008, visual-c++, prefast

有什么方法可以在***Visual Studio 2008 Professional*****添加中启用Prefast**？

 *我正在尝试编译本机 C++ 代码。

我尝试过以下事情，

1.  下载的 Windows SDK
2.  将编译器的 Bin / Include / Lib 路径设置为 SDK。
3.  为 c/c++ 编译添加了附加选项 (/Analyze:WX-)

我相信这些步骤应该设置适当的编译器来使用 prefast 进行静态分析。此设置实际上适用于 Visual Studio 2005。但是它不适用于 Visual Studio 2008。

它总是有两个问题

1.  链接：警告 LNK4044：无法识别的选项 '/MANIFESTUAC:level='asInvoker' uiAccess='false''；忽略
2.  致命错误 LNK1103：调试信息损坏；重新编译模块

我相信 1 的原因是 Windows SDK 没有识别 /MANIFESTUAC 选项。这已在 Visual Studio 2008 中引入。原因 2，不知道 :)。

任何想法/建议/指针都是最受欢迎的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-10-12T06:22:48.353

VS 2008 具有内置的代码分析功能（FxCop 和 PREfast）。您可以在*Project->Properties->Configuration Properties->C/C++->Advanced->Enable Code Analysis For C/C++ on Build*处打开它。

然后您可以尝试从 PREfast 编译一些示例并查看警告。

祝你好运！

编辑：专业版没有这样的选择:(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-14T14:33:15.257

您不需要单独使用 Prefast。使用 /analyze 编译器开关访问 Visual C++ Prefast。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-12T19:54:11.440

代码分析适用于 VS C++ Express，但适用于 Visual Studio……我找不到它……VS C++ Express 和 VS 有一些差异。

# asp.net - asp.net 自动为按钮生成 onclick 事件

> ID：888304
> 
> 赞同：0
> 
> 时间：2009-05-20T14:33:42.100
> 
> 标签：asp.net, jquery

ASP.NET 似乎正在为生成的任何按钮生成自己的 onclick 事件。

看起来像这样

javascript:__doPostBack(

这会阻止 jQuery 正常工作。

有谁知道如何阻止 asp.net 引擎这样做？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T14:40:08.420

您只需要在处理按钮的 jquery 代码中添加**return false即可。**

```
$("myaspbutton").click(function(e){

   //your code

   return false;****
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T14:37:29.127

```
<asp:Buttton runat="server" ID="myButton" Text="MyButton" OnClientClick="alert('hi');" /> 
```

**更新：**
您可以动态绑定点击事件：

```
$('#<%=myButton.ClientID%>').click(function(e) {
//your code here
e.preventDefault();
}); 
```

# bash - 无法引用 Bash 中的参数

> ID：888316
> 
> 赞同：1
> 
> 时间：2009-05-20T14:35:45.027
> 
> 标签：bash, unix, scripting, parameters

我想把 TextA 放在 TextB 的开头

```
cat TextA A TextB 
```

问题是我不知道如何引用第一个和第二个参数，即下面称为A的脚本中的**TextA**和**TextB**：

```
 #!/bin/bash

  cat TextA > m1
  cat TextB > m2
  cat m1 m2 > TextB 
```

其中 m1 和 m2 是临时文件。

**如何在 shell 脚本中引用这两个文件？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T14:43:34.840

您可以使用`$0`,`$1`等`$2`来引用脚本中的变量。

`$0`是脚本本身的名称
`$1`是第一个参数
`$2`是第二个参数
等等

例如，如果你有这个命令：

```
a A1 A2 
```

然后在里面`a`你会有：

```
$0 = a
$1 = A1
$2 = A2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T14:44:59.533

在 bash 脚本中，第一个参数是 $1，第二个是 $2，依此类推。

如果您想要一个默认值，例如您可以使用的第三个参数：

```
var=${3:-"default"} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T14:40:15.953

你可以只使用附加（>>）

```
cat TextB >> TextA 
```

结果是 TextA 在 TextA 中的文本 TextB 之前

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T15:00:10.673

我会做以下事情：

```
#!/bin/bash

if [ $# -ne 2 ]
then
  echo "Prepend file with copyright notice"
  echo "Usage: `basename $0` <copyright-file> <mainfile>"
  exit 1
fi

copyright=$1
mainfile=$2

cat $mainfile > /tmp/m.$$
cat $copyright /tmp/m.$$ > $mainfile

#cleanup temporary files
rm /tmp/m.$$ /tmp/m2.$$ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-21T22:52:28.873

我很惊讶没有人提出以下结果

```
cat TextA TextB | tee > TextB 
```

这样，您可以避免创建临时文件的麻烦。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T14:51:03.140

看起来您可以执行以下操作：

```
 TextA="text a"
TextB="text b"
echo "$TextA $TextB" > file1 
```

或使用附加 (>>) 运算符。

# architecture - 合并核心库

> ID：888319
> 
> 赞同：2
> 
> 时间：2009-05-20T14:35:58.723
> 
> 标签：architecture, codebase

大约一年前，我们公司推出了一个较大的软件包，主要由两名高级开发人员编写。为了便于演示，我将其称为“项目 A”。从那时起，我们一直在开发一个新的软件包，“项目 B”，在它的树中是项目 A 的一个分支。

项目 B 有对项目 A 的引用，但是现在我们即将结束项目 B，我们还需要从 A 中引用 B。因此，在合并 A 的分支之后，在与 B 上线之前，我们想合并两个项目之间的核心库。

对于这种情况，您有哪些经验？这个项目有哪些最佳实践和经验教训？我们如何才能最好地合并核心库，同时对项目 A 中的其余源代码影响最小？

**编辑：** 您对保留项目 A 的命名空间但将代码定位在项目 B 的核心库（最终将成为公司的核心库）中的可行性有何看法？从那里，只需在遗留项目中引用新的公司核心库......

**编辑2：** 感谢您的回复。也许需要更多的技术说明。这两个项目密切相关，但每个项目都有自己的 .NET 类库项目作为核心库。除此之外，每个库都被其他各种 .NET 项目引用；内部和外部 Web 应用程序、表单应用程序等。我的更多问题是源代码应该放在哪里 - 我不认为它们应该保持两个独立的 .NET 项目，但一个项目包含两者，最初保留现有的命名空间. 随着我们继续开发，我们将重构、组合命名空间、清除重复功能等。毫无疑问，两个现有库中包含的功能将在即将到来的项目中有用，并且在现有的两个库之间共享也出现了新的需求“核心”库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T21:03:43.043

我认为这高度依赖于语言、环境和库类型（动态/静态链接）。你期待什么问题？

*   冲突标识符
*   重复功能
*   构建过程的变化
*   集成/单元测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T22:40:28.293

您是否对 B 和 A 之间的循环引用的可能性有疑问？

或者更多关于 A 和 BA 之间冲突命名空间的信息？

如果 A 和 BA 都在同一个项目的完全相同的命名空间 (A) 中，我认为你可能会遇到严重的冲突。

一种可能性是为这两个库添加一个命名空间前缀，并根据您想要的导入那个？

IE

A 变为 V1.A，BA 变为 V2.A（在项目 B 下）

那么如果你想要 V1，你只需导入 V1 命名空间，如果你想要 V2，你导入 V2 命名空间，我认为引用应该对齐？

您仍然会遇到一些问题，因为如果您弄乱了 A 的命名空间，您将破坏任何已经将其引用为 A 而不是 V1.A 的遗留代码。

老实说，我认为在项目中您的程序集和命名空间只需要是唯一的。因此，如果您有两个版本的程序集具有相同的命名空间......其中一个必须去。

# c# - WPF 中的 EndEdit 等效项

> ID：888324
> 
> 赞同：8
> 
> 时间：2009-05-20T14:36:33.777
> 
> 标签：c#, .net, wpf, data-binding, textbox

我有一个包含文本框的 WPF 窗口。我已经实现了一个在 Crtl-S 上执行的命令，它保存了窗口的内容。我的问题是，如果文本框是活动控件，并且我在文本框中新编辑了文本，则不会提交文本框中的最新更改。我需要跳出文本框以获取更改。

在 WinForms 中，我通常会在表单上调用 EndEdit，所有待处理的更改都会被提交。另一种选择是使用 onPropertyChange 绑定而不是 onValidation，但我宁愿不这样做。

与 EndEdit 等效的 WPF 是什么，或者在这种类型的场景中使用的模式是什么？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T19:36:02.957

根据 Pwninstein 的回答，我现在已经`EndEdit`在我的通用类中为 WPF 视图/Windows 实现了一个，它将查找绑定并强制对其进行更新，代码如下；

代码如下；

```
private void EndEdit(DependencyObject parent)
{
    LocalValueEnumerator localValues = parent.GetLocalValueEnumerator();
    while (localValues.MoveNext())
    {
        LocalValueEntry entry = localValues.Current;
        if (BindingOperations.IsDataBound(parent, entry.Property))
        {
            BindingExpression binding = BindingOperations.GetBindingExpression(parent, entry.Property);
            if (binding != null)
            {
                binding.UpdateSource();
            }
        }
    }            

    for(int i=0; i < VisualTreeHelper.GetChildrenCount(parent); i++)
    {
        DependencyObject child = VisualTreeHelper.GetChild(parent, i);
        this.EndEdit(child);
    }
}

protected void EndEdit()
{
    this.EndEdit(this);
} 
```

在我的保存命令中，我现在只是调用`EndEdit`方法，我不必担心其他程序员选择绑定方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-20T18:05:10.660

您可以使用如下代码强制更新特定绑定：

```
var bindingExpression = txtInput.GetBindingExpression(TextBox.TextProperty);
bindingExpression.UpdateSource(); 
```

更普遍地这样做是困难的，因为没有通用的方法来获取所有绑定，您也不一定希望它们全部更新。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-20T16:54:34.577

为避免需要制表符的问题，您可以简单地更改控件绑定的 UpdateSourceTrigger 属性。尝试以下操作：

```
<TextBox.Text>
    <Binding Path="MyProperty" UpdateSourceTrigger="PropertyChanged"/>
</TextBox.Text> 
```

这告诉 WPF 在 Text 属性更改时更新支持对象。这样一来，您就不必担心会打卡。希望这可以帮助！

**编辑：**

以下 SO 问题的公认答案提供了一种自动运行页面验证规则的方法。您可以修改它以改为在所有 BindingExpression 对象上调用 UpdateSource()。

**[关联](https://stackoverflow.com/questions/127477/detecting-wpf-validation-errors)**

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-20T18:29:25.507

我不同意 ArielBH。这里的问题是键盘和逻辑焦点之间的相互作用，除非您已将所有数据绑定更新触发器更改为 PropertyChanged，否则您可能会在某些情况下错过一些源数据更新（例如工具栏按钮单击）。例如，TextBox.Text 的默认更新触发器是 LostFocus，单击工具栏按钮不会模糊活动的 TextBox 焦点。

如果您有一些机制来注册控件，那么您可以显式强制数据绑定在 WinForms 应用程序中调用 EndEdit 的同一位置更新源。它既不整洁也不优雅，但它完成了工作。

如果有人提出了更好的解决方案，我也会全神贯注。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-20T16:40:42.437

嗨，好吧，在使用 WPF 时，需要采用不同的心态。

我基本上会将 TextBox 的 Text 属性绑定到我的属性之一（Model、ViewModel、Code-Behind，任何让你开心的东西）。因此，当您处理 CTRL+S 时，您只需转到已绑定的 clr 属性，然后愉快地继续处理您想要的所有数据。

希望对您有所帮助，如果您需要代码示例，请给我留言。爱丽儿

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-07-06T16:31:08.790

我相信您应该声明一个绑定组，然后在代码中引用该绑定组。我将我的放在根 Window 元素上，以便它获取 Window 上所有控件的绑定。

```
<Window.BindingGroup>
    <BindingGroup />
</Window.BindingGroup>

this.BindingGroup.CommitEdit(); 
```

# iis - 如何在 IIS 中重定向 URL 路径？

> ID：888325
> 
> 赞同：45
> 
> 时间：2009-05-20T14:36:55.960
> 
> 标签：iis, redirect, iis-6

在 IIS 6.0 中，是否有一种简单的方法可以将请求重定向到一个文件夹到另一个文件夹，同时保留路径的其余部分。

例如

如果我已将内容从：
mysite.org.uk/stuff移动
到
stuff.mysite.org.uk/

我可以自动将特定页面的请求（例如
mysite.org.uk/stuff/countrybriefing/tanzania/travel.html ）重定向
到
stuff.mysite.org.uk/countrybriefing/tanzania/travel.html

我知道 .htaccess 可以在 Apache 中做这样的事情，在 IIS 中是否有等价物？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-09-20T07:48:01.317

按以下方式格式化重定向 URL：

`stuff.mysite.org.uk$S$Q`

将`$S`说必须将任何路径应用于新 URL。 `$Q`表示必须将任何参数变量传递给新 URL。

在 IIS 7.0 中，您必须启用选项`Redirect to exact destination`. 我相信在 IIS 6.0 中也必须有这样的选项。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2009-05-20T14:41:54.983

取自[Microsoft Technet](http://www.microsoft.com/technet/prodtechnol/windowsserver2003/library/iis/6b855a7a-0884-4508-ba95-079f38c77017.mspx)。

# 在 IIS 6.0 (IIS 6.0) 中重定向网站

当浏览器请求您网站上的页面或程序时，Web 服务器会定位由 URL 标识的页面并将其返回给浏览器。当您在您的网站上移动一个页面时，您不能总是更正所有引用该页面旧 URL 的链接。为确保浏览器可以在新 URL 找到页面，您可以指示 Web 服务器将浏览器重定向到新 URL。

您可以将对一个目录中的文件的请求重定向到不同的目录、不同的网站或不同目录中的另一个文件。当浏览器请求原始 URL 的文件时，Web 服务器指示浏览器使用新的 URL 请求页面。

**重要的**

您必须是本地计算机上管理员组的成员才能执行以下过程。作为安全最佳做法，请使用不在管理员组中的帐户登录到您的计算机，然后使用 runas 命令以管理员身份运行 IIS 管理器。在命令提示符处，键入 runas /user:Administrative_AccountName "mmc %systemroot%\system32\inetsrv\iis.msc"。

# 程序

## 将请求重定向到另一个网站或目录

1.  在 IIS 管理器中，展开本地计算机，右键单击要重定向的网站或目录，然后单击属性。

2.  单击主目录、虚拟目录或目录选项卡。

3.  在此来源的内容应来自下，单击重定向到 URL。

4.  在“重定向到”框中，键入目标目录或网站的 URL。例如，要将 Catalog 目录中的所有文件请求重定向到 NewCatalog 目录，请键入 /NewCatalog。

## 将所有请求重定向到单个文件

1.  在 IIS 管理器中，展开本地计算机，右键单击要重定向的网站或目录，然后单击属性。

2.  单击主目录、虚拟目录或目录选项卡。

3.  在此来源的内容应来自下，单击重定向到 URL。

4.  在“重定向到”框中，键入目标文件的 URL。

5.  选中上面输入的确切 URL 复选框以防止 Web 服务器将原始文件名附加到目标 URL。

    您可以在目标 URL 中使用通配符和重定向变量来精确控制如何将原始 URL 转换为目标 URL。

    您还可以使用重定向方法将特定目录中文件的所有请求重定向到程序。通常，您应该将原始 URL 中的任何参数传递给程序，这可以通过使用重定向变量来完成。

    ## 将请求重定向到程序

6.  在 IIS 管理器中，展开本地计算机，右键单击要重定向的网站或目录，然后单击属性。

7.  单击主目录、虚拟目录或目录选项卡。

8.  在此来源的内容应来自下，单击重定向到 URL。

    在重定向到框中，键入程序的 URL，包括将参数传递给程序所需的任何重定向变量。例如，要将 Scripts 目录中的所有脚本请求重定向到记录请求的 URL 和随 URL 传递的任何参数的日志记录程序，请键入 /Scripts/Logger.exe?URL=$V+PARAMS=$P。$V 和 $P 是重定向变量。

9.  选中上面输入的确切 URL 复选框以防止 Web 服务器将原始文件名附加到目标 URL。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-20T14:58:27.120

如果您要创建大量重定向，那么在这些地方拥有大量虚拟目录是维护的噩梦。您可以尝试使用 ISAPI 重定向 IIS 扩展。然后，您所有的重定向都在一个地方进行管理。

[http://www.isapirewrite.com/docs/](http://www.isapirewrite.com/docs/)

它还允许您根据 reg ex 表达式等匹配模式。我曾在必须重定向 100 个页面的地方使用它，它节省了很多时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-07-09T14:22:51.933

这是[ISAPI_Rewrite 3](http://www.helicontech.com/isapi_rewrite/)的配置：

RewriteBase /

RewriteCond %{HTTP_HOST} ^mysite.org.uk$ [NC]

RewriteRule ^stuff/(.+)$ http://stuff.mysite.org.uk/$1 [NC,R=301,L]

# c# - 如何从 C# WebBrowser 执行 Javascript 函数？

> ID：888326
> 
> 赞同：0
> 
> 时间：2009-05-20T14:37:09.673
> 
> 标签：c#, javascript, ajax

我正在通过 C# 和 WebBrowser 进行一些网络自动化。有一个我需要“单击”的链接，但由于它触发了一个 Javascript 函数，显然需要执行代码而不是仅仅单击元素（即 element.InvokeMember("click")）。这是打开 Ajax 表单的元素的 href：

```
javascript:__doPostBack("ctl00$cphMain$lnkNameserverUpdate", "") 
```

我试过了：

```
webBrowser1.Document.InvokeScript("javascript:__doPostBack", new object[] { "ctl00$cphMain$lnkNameserverUpdate", "" }); 
```

和：

```
webBrowser1.Document.InvokeScript("__doPostBack", new object[] { "ctl00$cphMain$lnkNameserverUpdate", "" }); 
```

和其他一些事情。代码被命中，但脚本没有被触发。任何想法将不胜感激。

格雷格

顺便说一句，如果有用，这是完整的元素：

```
<a href="javascript:__doPostBack('ctl00$cphMain$lnkNameserverUpdate','')" onmouseout="window.status=''; return true" onmouseover="window.status='Update Nameservers'; return true" id="ctl00_cphMain_lnkNameserverUpdate" onclick="javascript:Layout.ChangeIframeToSrc('DropinLoad_Domain.aspx?controlRequest=ActionNameserversWithIP');return false;">NS51.DOMAINCONTROL.COM<br/>NS52.DOMAINCONTROL.COM<br/></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T14:56:47.963

看看这个链接：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.objectforscripting.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.objectforscripting.aspx)

我过去实际上使用过它，并且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T12:45:30.867

```
HtmlDocument doc = browser.Document;
HtmlElement head = doc.GetElementsByTagName("head")[0];
HtmlElement s = doc.CreateElement("script");
s.SetAttribute("text","function sayhello() { alert('hello'); }");
head.AppendChild(s);
browser.Document.InvokeScript("sayHello"); 
```

# mysql - mysql从数据库问题

> ID：888327
> 
> 赞同：0
> 
> 时间：2009-05-20T14:37:14.277
> 
> 标签：mysql, master-slave

目前我们有3个从数据库，

但几乎总是有一个比其他的慢得多（可能是主数据库后一个小时）

有没有人遇到过类似的问题？可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T04:49:02.197

我猜想其他一些进程正在与慢速副本相同的主机上运行，​​并且它正在占用资源。

尝试运行“top”（或使用 Nagios 或 Cactus 之类的）来监控三个副本主机上的系统性能，看看是否有任何可以观察到的趋势。CPU 使用率与 mysqld 之外的另一个进程挂钩，或者 I/O 不断饱和，诸如此类。

* * *

**更新：**阅读 MySQL 性能专家 Peter Zaitsev 的以下两篇文章：

*   [使用 MySQL 复制管理从属滞后](http://www.mysqlperformanceblog.com/2007/10/12/managing-slave-lag-with-mysql-replication/)
*   [与 MySQL 复制滞后作斗争](http://www.mysqlperformanceblog.com/2007/10/12/managing-slave-lag-with-mysql-replication/)

作者指出复制是单线程的，副本按顺序执行查询，而不是像在主服务器上那样并行执行。因此，如果您有一些运行时间很长的复制查询，它们可能会“阻塞队列”。

他建议补救措施是简化长时间运行的 SQL 查询，使它们运行得更快。例如：

*   如果您有一个影响数百万行的 UPDATE，请将其分解为多个作用于行子集的 UPDATE。

*   如果您将复杂的 SELECT 语句合并到您的 UPDATE 或 INSERT 查询中，请将 SELECT 分离到它自己的语句中，在应用程序代码中生成一组文字值，然后在这些上运行您的 UPDATE 或 INSERT。当然 SELECT 不会被复制，副本只会看到带有文字值的 UPDATE/INSERT。

*   如果您有一个长时间运行的批处理作业正在运行，它可能会阻止其他更新在副本上执行。您可以在批处理作业中放置一些睡眠，或者甚至编写批处理作业以检查复制延迟并在需要时睡眠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T05:02:49.587

所有从服务器是否都位于同一位置？就我而言，其中一个从属服务器位于另一个位置，这是一个网络问题。

# asp.net - DropDownList、ListItems 和 SelectedItem

> ID：888333
> 
> 赞同：2
> 
> 时间：2009-05-20T14:37:42.980
> 
> 标签：asp.net, drop-down-menu, selected

另请参阅：[填充相同列表项的下拉列表](https://stackoverflow.com/questions/428001/dropdowns-filled-with-same-list-item)

经过一天的跟踪和调试，我终于发现用相同的项目集合填充 3 个 DropDownLists 会导致最后一个选定的项目出现在所有 3 个列表中。

这似乎是由于项目的“选择性”是项目的属性，而不是列表的属性。

但是，这似乎**仅**在以编程方式选择项目时出现。

*编辑#2：因为每个人似乎都在回答错误的问题：以下是让我感到困惑的地方！*

当用户通过控件选择项目时，应用程序似乎按预期工作。-- 在 Web 界面中选择 3 个不同的项目会导致在 DB 中输入正确的 3 个不同的项目。

谁能解释为什么会这样？

编辑：我要问的问题是为什么它在浏览器中完全有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T20:13:26.260

这是因为您将相同的 ListItem 添加到两个不同的 DropDownList 控件。每个对象中显示的对象是相同的，因此更改该对象的值将反映在两个 DropDownLists 中。

将下拉列表视为查看对象集合的一种方式。您戳下拉菜单并告诉它更改它的选定值实际上只会导致它循环遍历其集合中的项目并更改*它们的*选择值。如果您对两个下拉菜单使用相同的对象集合，则更改集合中的值将导致两个下拉菜单看到相同的更改。

这就像在房子里有两扇窗户，都可以看到同一个狗屋。如果你告诉一个从 A 窗向外看的人去把狗屋漆成蓝色，即使你没有告诉从 B 窗外看的人把“他的”狗屋漆成蓝色，他仍然会看到一只蓝色的狗屋。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T14:45:31.310

这与 BindingContext 和集合有关。您需要制作集合的副本并绑定到这些副本。我认为这样做是为了使母子视图更容易，您可以根据所选的母元素获得正确的子元素。

如果您的集合是 DataTable，则将下拉列表绑定到它将使用它的 DefaultView。为避免这种情况，请将表格打包在数据视图中；

obj.DataSource = new DataView(dataTable, "", "", DataViewRowState.CurrentRows);

# java - 为什么生成 long serialVersionUID 而不是简单的 1L？

> ID：888335
> 
> 赞同：222
> 
> 时间：2009-05-20T14:37:43.963
> 
> 标签：java, serialization, code-generation, serialversionuid

当类在 Eclipse 中实现 Serializable 时，我有两个选择：添加默认值`serialVersionUID(1L)`或生成`serialVersionUID(3567653491060394677L)`。我认为第一个更酷，但很多时候我看到人们使用第二个选项。有什么理由生成`long serialVersionUID`吗？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2009-05-20T14:44:50.483

据我所知，这只是为了与以前的版本兼容。这仅在您之前忽略使用 serialVersionUID，然后进行了您知道应该[兼容](http://java.sun.com/javase/6/docs/platform/serialization/spec/version.html#6678)但导致序列化中断的更改时才有用。

有关更多详细信息，请参阅[Java 序列化规范](http://java.sun.com/javase/6/docs/platform/serialization/spec/version.html)。

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2009-05-20T14:45:33.540

序列化版本 UID 的目的是跟踪类的不同版本，以便执行对象的有效序列化。

这个想法是生成一个特定版本的类的唯一ID，然后当有新的细节添加到类时更改，例如新的字段，这会影响序列化对象的结构。

始终使用相同的 ID，例如`1L`意味着将来，如果更改类定义导致序列化对象的结构发生变化，那么在尝试反序列化对象时很可能会出现问题。

如果省略 ID，Java 实际上会根据对象的字段为您计算 ID，但我相信这是一个昂贵的过程，因此手动提供一个会提高性能。

以下是一些讨论类的序列化和版本控制的文章的链接：

*   [JDC 技术提示：2000 年 2 月 29 日](http://java.sun.com/developer/TechTips/2000/tt0229.html) *（链接已于 2013 年 2 月断开）*
*   [发现 Java 序列化 API 的秘密](http://www.oracle.com/technetwork/articles/java/javaserial-1536170.html)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2009-05-20T14:45:43.697

生成的主要原因是使其与已经具有持久副本的类的现有版本兼容。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2009-05-20T14:49:37.073

的“长”默认值是[Java 序列化规范](http://docs.oracle.com/javase/6/docs/platform/serialization/spec/version.html)`serialVersionUID`定义的默认值，根据默认序列化行为计算得出。

因此，如果您添加默认版本号，只要结构上没有任何变化，您的类将（反）序列化更快，但您必须注意，如果您更改类（添加/删除字段），您也会更新序列号。

如果您不必与现有的比特流兼容，您可以放在`1L`那里并在发生变化时根据需要增加版本。也就是说，当更改类的默认序列化版本与旧类的默认版本不同时。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2011-03-23T13:23:12.847

每次定义实现的类时，您绝对应该创建一个 serialVersionUID `java.io.Serializable`。如果您不这样做，则会自动为您创建一个，但这很糟糕。自动生成的 serialVersionUID 基于类的方法签名，因此如果您将来更改类以添加方法（例如），反序列化类的“旧”版本将失败。以下是可能发生的情况：

1.  创建类的第一个版本，而不定义 serialVersionUID。
2.  将您的类的实例序列化为持久存储；会自动为您生成一个 serialVersionUID。
3.  修改您的类以添加新方法，然后重新部署您的应用程序。
4.  尝试反序列化在步骤 2 中序列化的实例，但现在它失败了（当它应该成功时），因为它具有不同的自动生成的 serialVersionUID。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-05-20T14:45:50.327

如果您不指定 serialVersionUID，那么 Java 会即时生成一个。生成的 serialVersionUID 就是那个数字。如果您更改类中的某些内容并不会真正使您的类与以前的序列化版本不兼容，而是更改了哈希，那么您需要使用生成的超大数 serialVersionUID（或错误消息中的“预期”数字） . 否则，如果您自己跟踪所有内容，则 0、1、2... 会更好。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-08-19T06:52:20.463

当您使用 serialVersionUID(1L) 而不是生成 serialVersionUID(3567653491060394677L) 时，您是在说些什么。

你是说你有 100% 的信心，没有一个系统会接触这个类，它的版本号为 1 的这个类的序列化版本不兼容。

如果你能想到任何借口让它的序列化版本历史不为人知，那可能很难有把握地说。在它的一生中，一个成功的类将由许多人维护，存在于许多项目中，并存在于许多系统中。

你可以为此苦恼。或者你可以玩彩票希望输。如果您生成该版本，则出现问题的可能性很小。如果您假设“嘿，我打赌还没有人用过 1”，那么您的赔率就非常大了。正是因为我们都认为 0 和 1 很酷，所以你击中它们的几率更高。

-

当您生成 serialVersionUID(3567653491060394677L) 而不是使用 serialVersionUID(1L) 时，您是在说些什么。

你是说人们可能在这个类的历史上手动创建或生成了其他版本号，你不在乎，因为 Longs 的数字很大。

无论哪种方式，除非您完全了解在该类已经存在或将要存在的整个宇宙中序列化该类时使用的版本号历史，否则您就是在冒险。如果您有时间 100% 确定 1 是 AOK，那就去做吧。如果工作量太大，请继续盲目地生成数字。你更有可能赢得彩票而不是出错。如果是的话，告诉我，我给你买啤酒。

通过所有这些关于玩彩票的讨论，我可能给你的印象是serialVersionUID 是随机生成的。事实上，只要数字范围均匀分布在 Long 的每个可能值上就可以了。然而，它实际上是这样完成的：

[http://docs.oracle.com/javase/6/docs/platform/serialization/spec/class.html#4100](http://docs.oracle.com/javase/6/docs/platform/serialization/spec/class.html#4100)

你得到的唯一区别是你不需要随机源。您正在使用类本身的更改来更改结果。但是根据鸽巢原理，它仍然有可能出错并发生碰撞。这是难以置信的可能性。祝我好运。

然而，即使该类只存在于一个系统和一个代码库中，认为手动增加数字会使您发生冲突的可能性为零，但这只是意味着您不了解人类。:)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-11T10:16:54.153

好吧，serialVersionUID 是“静态字段不被序列化”规则的一个例外。ObjectOutputStream 每次将serialVersionUID 的值写入输出流。ObjectInputStream 将其读回，如果从流中读取的值与当前版本的类中的 serialVersionUID 值不一致，则抛出 InvalidClassException。而且，如果要序列化的类中没有官方声明的serialVersionUID，编译器会自动添加一个根据类中声明的字段生成的值。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-09-16T12:35:53.883

因为在很多情况下，默认 id 不是唯一的。所以我们创建 id 来制作独特的概念。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-05-22T20:53:58.600

要添加到@David Schmitts 的答案，根据经验，我总是会不习惯使用默认的 1L。我只需要返回并更改其中的一些几次，但我知道当我进行更改并每次将默认数字更新为 1 时。

在我目前的公司，他们需要自动生成的号码，所以我将其用于约定，但我更喜欢默认值。我的看法是，如果这不是您工作的约定，请使用默认值，除非您认为出于某种原因会不断更改序列化类的结构。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-04-24T16:55:29.887

序列化版本 UID 的目的是跟踪类的不同版本，以便执行对象的有效序列化。

这个想法是生成一个特定版本的类的唯一ID，然后当有新的细节添加到类时更改，例如新的字段，这会影响序列化对象的结构。

一个简单的解释：

你在序列化数据吗？

序列化基本上是将类数据写入文件/流/等。反序列化是将数据读回类。

你打算投入生产吗？

如果您只是用不重要/假数据测试某些东西，那么不要担心（除非您直接测试序列化）。

这是第一个版本吗？

如果是这样，设置 serialVersionUID=1L。

这是第二个、第三个等产品版本吗？

现在您需要担心 serialVersionUID，并且应该深入研究它。

基本上，如果在更新需要写入/读取的类时没有正确更新版本，则在尝试读取旧数据时会出错。

# sql - 在使用表时更新表中数据而不锁定表的最佳方法是什么？

> ID：888338
> 
> 赞同：5
> 
> 时间：2009-05-20T14:38:32.433
> 
> 标签：sql, sql-server, sql-server-2005, views, truncate

我在一个经常使用的 SQL Server 2005 数据库中有一个表。它有我们的产品可用性信息。我们每小时都会从我们的仓库中获得更新，在过去的几年里，我们一直在运行一个例程来截断表格并更新信息。这只需要几秒钟，直到现在都不是问题。我们现在有更多的人使用我们的系统来查询这些信息，因此我们看到很多由于阻塞进程而导致的超时。

... 所以 ...

我们研究了我们的选择，并提出了减轻问题的想法。

1.  我们会有两张桌子。表 A（活动）和表 B（非活动）。
2.  我们将创建一个指向活动表（表 A）的视图。
3.  所有需要此表信息（4 个对象）的东西现在都必须通过视图。
4.  每小时例程会截断非活动表，用最新信息更新它，然后更新视图以指向非活动表，使其成为活动表。
5.  该例程将确定哪个表处于活动状态并基本上在它们之间切换视图。

这有什么问题？在查询中切换视图会导致问题吗？这能行吗？

感谢您的专业知识。

*额外的信息*

*   该例程是一个 SSIS 包，它执行许多步骤并最终截断/更新相关表

*   阻塞进程是查询该表的另外两个存储过程。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T15:32:54.820

您是否考虑过使用[快照隔离](http://msdn.microsoft.com/en-us/library/ms345124(SQL.90).aspx)。它可以让你为你的 SSIS 东西开始一个大的交易，并且仍然从表中读取。

这个解决方案似乎比切换表格要干净得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T14:45:17.770

我认为这是错误的方式 - 更新表必须锁定它，尽管您可以将锁定限制为每页甚至每行。

我会考虑不截断表格并重新填充它。这总是会干扰试图阅读它的用户。

如果您确实更新而不是替换表，您可以通过另一种方式控制它 - 阅读用户不应该阻塞表并且可能能够摆脱乐观读取。

尝试将 with(nolock) 提示添加到读取 SQL 视图语句中。即使表格定期更新，您也应该能够让大量用户阅读。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T14:50:56.057

就个人而言，如果您总是要引入停机时间来对表运行批处理，我认为您应该在业务/数据访问层管理用户体验。引入一个表管理对象，该对象监视与该表的连接并控制批处理。

当新的批处理数据准备好时，管理对象停止所有新的查询请求（甚至可能排队？），允许现有查询完成，运行批处理，然后重新打开表进行查询。管理对象可以引发 UI 层可以解释的事件 (BatchProcessingEvent)，以让人们知道该表当前不可用。

我的 0.02 美元，

内特

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-20T15:29:41.830

刚刚读到你正在使用 SSIS

您可以使用来自以下网址的 TableDiference 组件：[http ://www.sqlbi.eu/Home/tabid/36/ctl/Det​​ails/mid/374/ItemID/0/Default.aspx](http://www.sqlbi.eu/Home/tabid/36/ctl/Details/mid/374/ItemID/0/Default.aspx)

[![替代文字](https://i.stack.imgur.com/HpaiZ.png)](https://i.stack.imgur.com/HpaiZ.png)
[（来源：[sqlbi.eu](http://www.sqlbi.eu/Portals/0/Articles/Table%20Difference%20Images/DataFlowSimple.png)）]

通过这种方式，您可以一个接一个地将更改应用于表，但是当然，这会慢得多，并且根据表的大小，服务器上需要更多的 RAM，但锁定问题将完全得到纠正。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-20T14:46:08.580

为什么不使用事务来更新信息而不是截断操作。

截断未记录，因此无法在事务中完成。

如果您的操作是在事务中完成的，那么现有用户将不会受到影响。

如何做到这一点取决于表的大小以及数据变化的剧烈程度等因素。如果您提供更多详细信息，也许我可以提供更多建议。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-20T15:13:41.363

一种可能的解决方案是尽量减少更新表所需的时间。

我将首先创建一个临时表以从仓库中下载数据。

如果您必须在决赛桌中进行“插入、更新和删除”

让我们假设决赛桌是这样的：

```
Table Products:
    ProductId       int
    QuantityOnHand  Int 
```

您需要从仓库更新 QuantityOnHand。

首先创建一个临时表，如：

```
Table Prodcuts_WareHouse
    ProductId       int
    QuantityOnHand  Int 
```

然后像这样创建一个“操作”表：

```
Table Prodcuts_Actions
    ProductId       int
    QuantityOnHand  Int
    Action          Char(1) 
```

更新过程应该是这样的：

1.截断表Prodcuts_WareHouse

2.截断表Prodcuts_Actions

3.用仓库中的数据填充Prodcuts_WareHouse表

4\. 用这个填充 Prodcuts_Actions 表：

插入：

```
INSERT INTO Prodcuts_Actions (ProductId, QuantityOnHand,Action)
SELECT     SRC.ProductId, SRC.QuantityOnHand, 'I' AS ACTION
FROM         Prodcuts_WareHouse AS SRC LEFT OUTER JOIN
                      Products AS DEST ON SRC.ProductId = DEST.ProductId
WHERE     (DEST.ProductId IS NULL) 
```

删除

```
INSERT INTO Prodcuts_Actions (ProductId, QuantityOnHand,Action)
SELECT     DEST.ProductId, DEST.QuantityOnHand, 'D' AS Action
FROM         Prodcuts_WareHouse AS SRC RIGHT OUTER JOIN
                      Products AS DEST ON SRC.ProductId = DEST.ProductId
WHERE     (SRC.ProductId IS NULL) 
```

更新

```
INSERT INTO Prodcuts_Actions (ProductId, QuantityOnHand,Action)
SELECT     SRC.ProductId, SRC.QuantityOnHand, 'U' AS Action
FROM         Prodcuts_WareHouse AS SRC INNER JOIN
                      Products AS DEST ON SRC.ProductId = DEST.ProductId AND SRC.QuantityOnHand <> DEST.QuantityOnHand 
```

到目前为止，您还没有锁定决赛桌。

5.在事务中更新最终表：

```
BEGIN TRANS

DELETE Products FROM Products INNER JOIN
Prodcuts_Actions ON Products.ProductId = Prodcuts_Actions.ProductId
WHERE     (Prodcuts_Actions.Action = 'D')

INSERT INTO Prodcuts (ProductId, QuantityOnHand)
SELECT ProductId, QuantityOnHand FROM Prodcuts_Actions WHERE Action ='I';

UPDATE Products SET QuantityOnHand = SRC.QuantityOnHand 
FROM         Products INNER JOIN
Prodcuts_Actions AS SRC ON Products.ProductId = SRC.ProductId
WHERE     (SRC.Action = 'U')

COMMIT TRAN 
```

通过上述所有过程，您可以将要更新的记录数量减至最少，从而缩短最终表在更新时被锁定的时间。

您甚至可以在最后一步不使用事务，因此在命令之间将释放表。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-20T15:17:06.550

如果您可以使用 SQL Server 企业版，那么我建议您使用 SQL Server 分区技术。

您可以将当前所需的数据保存在“实时”分区中，并将更新版本的数据保存在“辅助”分区中（不可用于查询，而是用于管理数据）。

将数据导入“辅助”分区后，您可以立即切换“实时”分区输出和“辅助”分区输入，从而导致零停机时间且无阻塞。

完成切换后，您可以截断不再需要的数据，而不会影响新活动数据（以前的辅助分区）的用户。

每次您需要执行导入作业时，您只需重复/反转该过程。

要了解有关 SQL Server 分区的更多信息，请参阅：

[http://msdn.microsoft.com/en-us/library/ms345146(SQL.90).aspx](http://msdn.microsoft.com/en-us/library/ms345146(SQL.90).aspx)

或者你可以问我:-)

**编辑：**

附带说明一下，为了解决任何阻塞问题，您可以使用 SQL Server 行版本控制技术。

[http://msdn.microsoft.com/en-us/library/ms345124(SQL.90).aspx](http://msdn.microsoft.com/en-us/library/ms345124(SQL.90).aspx)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-20T15:13:22.893

我们在我们的高使用率系统上执行此操作，并且没有遇到任何问题。但是，与所有事物数据库一样，确保它会有所帮助的唯一方法是在 dev 中进行更改，然后对其进行负载测试。不知道您的 SSIS 包还有其他用途，它仍然可能导致阻塞。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-20T15:46:43.887

如果表不是很大，您可以在应用程序中缓存数据一小段时间。它可能不会完全消除阻塞，但会减少发生更新时查询表的机会。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-20T17:10:56.180

也许对阻塞的进程进行一些分析是有意义的，因为它们似乎是你的环境中已经改变的一部分。只需要一个写得不好的查询来创建您所看到的块。除非查询写得不好，否则该表可能需要一个或多个覆盖索引来加速这些查询并让您重新开始工作，而无需重新设计您已经工作的代码。

希望这可以帮助，

账单

# continuous-integration - 在 TeamCity 构建配置中包含搜索路径

> ID：888344
> 
> 赞同：1
> 
> 时间：2009-05-20T14:40:09.980
> 
> 标签：continuous-integration, teamcity

通常，当开发人员在我们公司的机器上本地编译某个混合 C++/C# 解决方案时，他们会使用 .vssettings 配置文件。此配置文件中包含的内容之一是对 Lib 和 Include 文件的各种目录路径的引用。

但是，我们的 buildAgent 机器（使用 TeamCity）被设置为无菌的，并且在其上安装了构建任何给定解决方案/项目所需的最低限度。这意味着上面示例的混合 C++/C# 项目将无法访问设置了包含搜索路径等内容的 IDE 配置。TC 通过允许您为任何给定的 buildConfiguration（甚至通过 buildAgent）设置各种变量来解决这个问题......

但是如何在 TC 中获得 WORK 的包含搜索路径？我正在从 Source Control (Perforce) 复制我想要 Included ^((1))的本地副本，然后尝试定义环境变量^((2)) - 但 TC 未能构建^((3))。

我确定我的某些配置有误，但是对于我的生活来说，我无法弄清楚是什么！

非常感激任何的帮助，

布隆

[(1) VSC 客户端映射 - Perforce]

> //depot/OpenSource/Boost-1.33.0/boost/... //team-city-agent/OpenSource/boost/...

[(2) buildConfig 环境变量定义]

> env.Include = %system.teamcity.build.checkoutDir%\OpenSource

[(3) TC 构建日志片段]

> [16:57:39]：[项目“xxx.sln”（构建目标）：] e:\buildagent\work\ef1853a454da9d94\xxx\rowsbase.cpp(5, 0)：错误 C1083：无法打开包含文件：'boost/dynamic_bitset.hpp'：没有这样的文件或目录

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-29T01:57:22.673

首先，您应该尝试在命令行上使用 msbuild 或 vcbuild 自己编译解决方案，因为 TeamCity 会执行类似的操作。如有必要，将 msbuild 文件夹添加到 Path 系统变量。然后打开命令行并输入：

msbuild.exe YourSolution.sln

或者

msbuild.exe YourSolution.sln /p:Configuration=Release

取决于您是要在调试模式还是发布模式下这样做。这应该给出相同的 C1083 错误。

这是修复：

1.  添加你需要的目录的路径添加一个环境变量（其实就是系统变量），我建议你调用INCLUDE。

2.  打开文件夹 .../Microsoft Visual Studio 9.0/VC/vcpackages/ 中的文件 VCProjectEngine.dll.config.xml。

将 INCLUDE 系统变量添加到包含行。对我来说，它来取代： Include="$(VCInstallDir)include;$(VCInstallDir)atlmfc\include;$(WindowsSdkDir)\include;$(FrameworkSDKDir)include"

与：包括=“$（VCInstallDir）include；$（VCInstallDir）atlmfc\include；$（WindowsSdkDir）\include；$（FrameworkSDKDir）include；$（INCLUDE）”

3.  测试它是否有效：打开一个新的命令行（需要在更改环境变量后将其考虑在内）并尝试构建您的解决方案，如上所示。这对我使用 #include 的文件构建 C++ 解决方案很有用。

4.  现在让我们也让它在 TeamCity 中工作。您可以在此时运行 TC 构建以查看它是否可以，但它不适合我。转到 TC 构建配置的“属性和环境变量”，并添加一个名为 INCLUDE 的环境变量，其值与上面的 INCLUDE 系统变量中的路径相同。

现在这应该可以了。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-07-23T20:03:45.090

将构建代理服务设置为作为非“本地系统”帐户运行解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-05-05T22:40:47.423

我遇到了一个问题，我的 C++ 项目将在构建代理上的 Visual Studio 中构建，但在通过 TC 构建时它们失败了。构建代理正在运行 Windows，并且代理作为服务运行（TeamCity 构建代理服务）。问题是该服务作为“本地系统”而不是配置 Visual Studio 的用户运行。我更改了服务，因此它将以“构建”用户身份登录，并且一切正常。

# shell - SSH 连接到 Box B 后，如何在 Box A 上捕获您的用户名？

> ID：888346
> 
> 赞同：0
> 
> 时间：2009-05-20T14:40:21.383
> 
> 标签：shell, ssh, scripting, solaris, ksh

也许不是措辞最好的问题，但希望这是一个直截了当的问题。

该场景是从框 A 上的个人帐户通过 SSH 连接到框 B 上的通用帐户。框 B 上运行的脚本需要捕获个人帐户名称以进行日志记录。有什么方法可以捕获这个，无论是通过 SSH 本身还是通过 shell 捕获的一些信息？我们在 Solaris 上使用 ssh2（反射）和 KornShell（ksh）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T15:17:19.420

如果您完全控制客户端计算机，则可以部署 identd 来获取用户名。

从脚本中获取名称的完整过程：

1.  走上进程树，找到 sshd
2.  走 netstat -p 以查找远程 IP 和端口。
3.  连接到端口 113 上的客户端并询问。

您可能必须禁用权限分离才能按原样工作；然而，修改它以使其不工作应该是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T15:10:04.567

*   您无法可靠地记录远程用户名
*   您可以记录连接的 IP（请参阅 SSH_CONNECTION 变量）
*   您可以有一个标准，他们使用 ssh 的别名记录远程用户名作为登录过程的一部分，或者他们将用户名存储在 .ssh/environment 文件中（但允许设置环境可能需要 ssh/sshd 配置变化）。

    alias sshblah='ssh blah "REMOTEUSER=$USER; bash' （除非那不起作用，而且我还没有试图找出原因 - 如果您使用 tcsh 等，情况会有所不同）。

[您可以通过这种方式](http://www.roumenpetrov.info/articles/locale_env_in_ssh_session.html)使用环境传递，并选择您允许设置的变量。您必须让用户为 $USER 设置一些替代项，例如 $REMOTE_USER=$USER，然后允许 $REMOTE_USER 通过。而且您相信他们不会错误地设置它，或者忘记设置它（您可以通过修改[此机制](http://lists.apple.com/archives/macos-x-server/2008/Jun/msg00251.html)来处理这种情况，但会有点烦恼）。

请注意，您几乎**必须**信任连接的客户端才能告诉您用户是谁 - 您可以使欺骗用户名变得困难/烦人，但除非您使用每用户证书而不是他们都知道的通用登录名/密码，否则您无法验证谁连接了。

# svn - 跟踪更改：svn + latex

> ID：888347
> 
> 赞同：14
> 
> 时间：2009-05-20T14:40:35.593
> 
> 标签：svn, latex, diff, markup, tracking

在 MS Word 中，有一个很好的功能叫做“跟踪更改”，它允许程序跟踪编辑。这在与其他人协作时很有用，因为您可以启用各种可视化模式，以便轻松查看其他人所做的更改。

我正在编辑大量用 LaTeX 编写并存储在 subversion 存储库中的文档。我希望能够轻松突出不同版本之间的变化。有谁知道一个很好的系统，用于对 LaTeX 文件进行一对修订并自动生成字级（不仅仅是行级）差异标记（即一种颜色或样式用于未更改的文本，另一种颜色用于添加内容，另一种用于删除等）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-20T15:20:52.847

您可能会看一下[latexdiff](http://w3.pppl.gov/~hammett/comp/tex/latexdiff.html)，它需要两个乳胶文档并生成一个新的乳胶文件，突出显示两个文档之间的更改，并带有下划线和删除线（按您的要求逐字）。[在此处](https://www.inf.unibz.it/dis/wiki/doku.php?id=latex:diff)查看结果的屏幕截图。

使用示例：

> ~/bin/latexdiff old.tex new.tex > diff.tex

[LyX](http://www.lyx.org)似乎也可以[跟踪更改](http://wiki.lyx.org/LyX/NewInLyX14#toc3)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-20T14:44:04.510

看看[latexdiff](http://w3.pppl.gov/~hammett/comp/tex/latexdiff.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-07-26T00:39:49.617

尝试使用在 sourceforge 托管的 trackchanges 项目。它可以在有和没有 GUI 支持的情况下工作。需要安装python。链接是[http://sourceforge.net/projects/trackchanges/](http://sourceforge.net/projects/trackchanges/)

# java - JGoodies 内存泄漏？？- Spring 尝试显示视图时出现内存不足异常

> ID：888348
> 
> 赞同：2
> 
> 时间：2009-05-20T14:40:43.380
> 
> 标签：java, validation, spring, jgoodies

在组件验证期间或之后，我有时会遇到内存不足异常。我试图分析一个 <= 20000 的大型验证结果，它起作用了，所以我做得更大。异常发生在值 > 20000 时，是否有人知道任何固有的 jgoodies 内存泄漏，以及验证框架、组件绑定器或其他任何东西？

> java.lang.OutOfMemoryError 线程“signal-validationPerformanceTest”中的异常：java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:100) 处的 java.util.Arrays.copyOf(Arrays.java:2882) 处的 Java 堆空间。 lang.AbstractStringBuilder.append(AbstractStringBuilder.java:390) at java.lang.StringBuffer.append(StringBuffer.java:224) at org.springframework.core.style.DefaultValueStyler.style(DefaultValueStyler.java:107) at org.springframework .core.style.DefaultValueStyler.style(DefaultValueStyler.java:72) at org.springframework.core.style.DefaultValueStyler.style(DefaultValueStyler.java:100) at org.springframework.core.style.DefaultValueStyler.style(DefaultValueStyler.java :87) 在 org.springframework.core.style.DefaultValueStyler.style(DefaultValueStyler.java:66）在 org.springframework.core.style.StylerUtils.style(StylerUtils.java:47) 在 org.springframework.webflow.core.collection.LocalAttributeMap.toString(LocalAttributeMap.java:312) 在 java.lang.String.valueOf (String.java:2827) 在 org.springframework.core.style.DefaultValueStyler.style(DefaultValueStyler.java:78) 在 org.springframework.core.style.DefaultToStringStyler.styleValue(DefaultToStringStyler.java:91) 在 org.springframework。 core.style.DefaultToStringStyler.styleField(DefaultToStringStyler.java:79) at org.springframework.core.style.ToStringCreator.append(ToStringCreator.java:156) at org.springframework.webflow.engine.impl.FlowSessionImpl.toString(FlowSessionImpl. java:207) 在 java.lang.String.valueOf(String.java:2827) 在 org.springframework.core.style.DefaultValueStyler。样式（DefaultValueStyler.java:78）在 org.springframework.core.style.DefaultValueStyler.style（DefaultValueStyler.java:107）在 org.springframework.core.style.DefaultValueStyler.style（DefaultValueStyler.java:72）在 org.springframework .core.style.DefaultToStringStyler.styleValue(DefaultToStringStyler.java:91) at org.springframework.core.style.DefaultToStringStyler.styleField(DefaultToStringStyler.java:79) at org.springframework.core.style.ToStringCreator.append(ToStringCreator.java :156) 在 org.springframework.webflow.engine.impl.FlowExecutionImpl.toString(FlowExecutionImpl.java:499) 在 java.lang.String.valueOf(String.java:2827) 在 java.lang.StringBuffer.append(StringBuffer. java:219) 在 org.springframework.webflow.execution.repository.support.SimpleFlowExecutionRepository。putFlowExecution(SimpleFlowExecutionRepository.java:130) at org.springframework.webflow.executor.FlowExecutorImpl.resume(FlowExecutorImpl.java:226) at com.mason.core.application.flow.ApplicationFlowEngine$SignalEventTask.execute(ApplicationFlowEngine.java:188)在 com.mason.core.application.flow.ApplicationFlowEngine$1.run(ApplicationFlowEngine.java:99) 在 java.lang.Thread.run(Thread.java:619)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T22:42:25.670

打开 -XX:+HeapDumpOnOutOfMemoryError（假设您有一个 SUN JVM）并将堆转储加载到[Eclipse Memory Analyzer](http://www.eclipse.org/mat/)中。应该很容易找出需要太多内存的内容。

# asp.net-mvc - Windows 身份验证和 SQL 成员资格服务

> ID：888349
> 
> 赞同：3
> 
> 时间：2009-05-20T14:40:47.997
> 
> 标签：asp.net-mvc, authentication, windows-authentication, sqlmembershipprovider

我有一个 ASP.Net MVC 内部网站，它使用 Windows 身份验证来了解谁登录（不允许匿名浏览）。当用户第一次访问时，我从他们那里收集了一些非常基本的信息，用于他们的联系人对象（例如姓名、电子邮件、国家/地区），然后将这些信息存储在应用程序数据库中。

我想让站点角色基于，所以我需要能够为每个用户分配一个角色（用户、管理员等）。我可以使用 ADS 组来做到这一点，但这似乎相当重量级。我可以使用 ASP.Net 提供的 SQL Membership 服务来存储他们的用户名以及他们所属的角色，还是我会被迫收集密码等（违背了使用 Windows 身份验证的要点）？这是否也与 ASP.Net MVC [Authorize] 属性集成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T14:58:32.797

在“正常”的 ASP.NET 中当然可以使用这种组合（Windows 身份验证和 SQL for Roles），因此 MVC 也应该可以。

这是[一个可能有帮助的链接](http://weblogs.asp.net/scottgu/pages/Recipe_3A00_-Implementing-Role_2D00_Based-Security-with-ASP.NET-2.0-using-Windows-Authentication-and-SQL-Server.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T15:02:15.457

是的，你可以这样做。

Authorize 使用 IPrincipal 的 IsInRole 方法来确定用户是否属于给定角色。

您可以在 Global.asax 中的 AuthenticateRequest 事件期间切换 IPrincipal 的默认实现，并使用您的实现方式来处理它。

以下是一些示例代码，它们可能实际上可以工作和编译，并且不会让您的网站受到黑客的攻击：

```
private void Application_AuthenticateRequest(object sender, EventArgs e)
{
    if (!Request.IsAuthenticated)
    {
        Context.User = new MyPrincipal { Identity = new MyIdentity 
                { Type = UserType.Inactive, Id = int.MinValue }};
        Thread.CurrentPrincipal = Context.User;
    }
    else
    {
        HttpCookie authCookie = Request.Cookies[
            FormsAuthentication.FormsCookieName];
        if (authCookie != null)
        {
            FormsAuthenticationTicket authTicket =
                   FormsAuthentication.Decrypt(authCookie.Value);

            var identity = Db.GetIdentity(
              authTicket.Name, new HttpRequestWrapper(Request));
        Context.User = new MyPrincipal { Identity = new MyIdentity 
                { Type = UserType.Inactive, Id = int.MinValue }};
        Thread.CurrentPrincipal = Context.User;
        }
    }
} 
```

# sql - 附加和分离数据库

> ID：888354
> 
> 赞同：0
> 
> 时间：2009-05-20T14:41:28.853
> 
> 标签：sql, sql-server

当我将 Northwind 数据库（使用 sp_attach_db）附加到 SQL Server 2005 时，它成功完成。但是当我运行这个查询时

```
SELECT FT_TBL.Description, 
   FT_TBL.CategoryName, 
   KEY_TBL.RANK
FROM Categories AS FT_TBL INNER JOIN
   CONTAINSTABLE (Categories, Description, 
      '("sweet and savory" NEAR sauces) OR
      ("sweet and savory" NEAR candies)'
      , 10
   ) AS KEY_TBL
   ON FT_TBL.CategoryID = KEY_TBL.[KEY] 
```

它给了我这个错误

“不能在表或索引视图 'Categories' 上使用 CONTAINS 或 FREETEXT 谓词，因为它不是全文索引。”

可能的解决方案是什么？我们需要创建全文索引吗？

请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T14:45:22.387

是的，为了使用 CONTAINSTABLE，表需要定义一个全文索引。

# apache - 让 Apache 在每个页面视图上执行命令

> ID：888360
> 
> 赞同：0
> 
> 时间：2009-05-20T14:42:41.237
> 
> 标签：apache, command, ubuntu-9.04, apache-config

每次请求网页时，有没有办法让 Apache 运行命令/程序？我知道我可以每分钟左右扫描一次日志以查找新条目，但是我可以让 Apache 直接调用该命令吗？在其中一个配置文件中可能有这样的选项，但如果有我不知道它是什么。我的服务器运行的是 Ubuntu 9.04。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T14:48:17.437

您可以使用 CustomLog 指令将访问日志通过管道传输到脚本或程序，这在您的情况下可能很有用。您所要做的就是以您选择的语言在 STDIN 上设置一个 while 循环（或类似结构），然后从那里执行您的命令。

[http://httpd.apache.org/docs/2.2/logs.html#piped](http://httpd.apache.org/docs/2.2/logs.html#piped)

# regex - 如何匹配正则表达式中的事物列表？

> ID：888362
> 
> 赞同：1
> 
> 时间：2009-05-20T14:42:45.870
> 
> 标签：regex, perl

我正在解析一个文件，其中一部分是记录，格式如下：

```
CategoryA--
5: UserA
6: UserB
7: UserC
CategoryB--
4: UserA
5: UserB 
```

我想将它移动到一个看起来像这样的哈希：

```
{ UserA => { CategoryA => 5, CategoryB => 4, }, 
  UserB => { CategoryA => 6, CategoryB => 5, },
  UserC => { CategoryA => 7, },
} 
```

我该如何做正则表达式？

编辑：它不必纯粹是正则表达式 - 只是在 perl 和循环中也会很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T15:06:15.480

您需要两个正则表达式，一个用于识别新类别，一个用于解析用户记录。

```
#!/usr/bin/perl

use strict;
use warnings;

my %users;
my $cur;
while (<DATA>) {
    if (my ($category) = /^(.*)--$/) {
        $cur = $category;
        next;
    }
    next unless my ($id, $user) = /([0-9]+): (\w+)/;
    die "no category found" unless defined $cur;
    $users{$user}{$cur} = $id;
}

use Data::Dumper;
print Dumper \%users;

__DATA__
CategoryA--
5: UserA
6: UserB
7: UserC
CategoryB--
4: UserA
5: UserB 
```

或者，如果您有 Perl 5.10 或更高版本，您可以将命名捕获与一个正则表达式一起使用：

```
#!/usr/bin/perl

use 5.010;
use strict;
use warnings;

my %users;
my $cur;
while (<DATA>) {
    next unless /^(?:(?<category>.*)--|(?<id>[0-9]+): (?<user>\w+))$/;
    if (exists $+{category}) {
        $cur = $+{category};
        next;
    }
    die "no category found" unless defined $cur;
    $users{$+{user}}{$cur} = $+{id};
}

use Data::Dumper;
print Dumper \%users;

__DATA__
CategoryA--
5: UserA
6: UserB
7: UserC
CategoryB--
4: UserA
5: UserB 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T15:15:43.060

这个 perl 代码似乎可以满足您的需求（主要是一次更改）。我对数据结构的布局略有不同，但不多。

```
#!/usr/bin/perl

use strict;

my @array = (
    "CategoryA--",
    "5: UserA",
    "6: UserB",
    "7: UserC",
    "CategoryB--",
    "4: UserA",
    "5: UserB"
);

my ($dataFileContents, $currentCategory);

for (@array) {
    $currentCategory = $1 if (/(Category[A-Z])--/);
    if (/(\d+): (User[A-Z])/) {
        $dataFileContents->{$2}->{$currentCategory} = $1
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T19:56:48.077

不完全是想在这里打高尔夫球，但可以一次交替完成：

```
my ( %data, $category );
while ( <DATA> ) { 
    next unless /^(?:(Category\w+)|(\d+):\s*(User\w+))/;
    ( $1 ? $category = $1 : 0 ) or $data{$3}{$category} = $2;    
} 
```

`Data::Dumper`（实际上是[Smart::Comments](http://search.cpan.org/perldoc?Smart::Comments)）显示输出：

```
{
  UserA => {
             CategoryA => '5',
             CategoryB => '4'
           },
  UserB => {
             CategoryA => '6',
             CategoryB => '5'
           },
  UserC => {
             CategoryA => '7'
           }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T15:10:01.153

这将为您拆分它。

```
prompt> ruby e.rb 
[["CategoryA--", nil, nil], [nil, "5", "UserA"], [nil, "6", "UserB"], [nil, "7", "UserC"], ["CategoryB--", nil, nil], [nil, "4", "UserA"], [nil, "5", "UserB"]]
prompt> cat e.rb 
s = <<TXT
CategoryA--
5: UserA
6: UserB
7: UserC
CategoryB--
4: UserA
5: UserB
TXT
p s.scan(/(^.*--$)|(\d+): (.*$)/)
prompt> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-21T05:51:41.500

```
#!/usr/bin/perl

use strict;
use Data::Dumper;

print "Content-type: text/html\n\n";

my ($x,%data);
do {
    if (/^(Category\w+)/) {
        $x=$1;
    } elsif (/^([0-9]+):\s*(User\w)/) {
        if (!defined($data{$2})) {
            $data{$2} = {$x,int($1)};
        } else {
            $data{$2}{$x} = int($1);
        }
    }   
} while (<DATA>);

print Dumper \%data;

__DATA__
CategoryA--
5: UserA
6: UserB
7: UserC
CategoryB--
4: UserA
5: UserB 
```

* * *

结果：

```
$VAR1 = {
    'UserC' => {
        'CategoryA' => 7
                 },
    'UserA' => {
        'CategoryA' => 5,
        'CategoryB' => 4
                 },
    'UserB' => {
         'CategoryA' => 6,
         'CategoryB' => 5
     }
}; 
```

# mysql - mysql查询帮助（like语句）

> ID：888382
> 
> 赞同：2
> 
> 时间：2009-05-20T14:45:53.510
> 
> 标签：mysql, stored-procedures, sql-like

我正在使用 mysql，我有一个存储过程，它有一个输入变量。

我想在 select 语句中使用这个变量（带有 like 子句）。

例如：

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `DeleteDataByTransactionID` $$
CREATE DEFINER=`root`@`%` PROCEDURE `DeleteDataByTransactionID`(in **$TransactionID** varchar(50))

BEGIN

delete from sqlstatements where tempsql like '%'+ **$TransactionID** + '%';

END $$

DELIMITER ; 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T14:48:35.110

```
DELIMITER $$
DROP PROCEDURE IF EXISTS `DeleteDataByTransactionID`
$$
CREATE DEFINER=`root`@`%` PROCEDURE `DeleteDataByTransactionID`(TransactionID VARCHAR(50))
BEGIN
        DELETE
        FROM    sqlstatements
        WHERE   tempsql LIKE CONCAT('%', TransactionID, '%');
END
$$
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-08-18T06:54:55.197

实际上，如果调用者没有正确参数化对存储过程的调用，则接受的答案版本对 SQL 注入开放。我建议在存储过程中使用准备好的语句，如下所示是安全的，而不是依赖调用者：

```
DELIMITER $$
CREATE PROCEDURE `DeleteDataByTransactionID`
(
    TransactionID VARCHAR(50)
)
BEGIN

SET @sql = 
 "DELETE 
  FROM sqlstatements
  WHERE   
     tempsql LIKE CONCAT('%', ?, '%')";

SET @transid  = TransactionID;

PREPARE stmt FROM @sql;
EXECUTE stmt USING @transid;
DEALLOCATE PREPARE stmt;

END
$$ 
```

# opengl - 无法在 Ubuntu 8.0.4 中制作 VW34（Oxford Active Vision Lab 库）

> ID：888383
> 
> 赞同：0
> 
> 时间：2009-05-20T14:45:56.503
> 
> 标签：opengl, gcc, computer-vision

我正在尝试制作一个名为 VW34 的非常不起眼的应用程序，它是一个使用 openGL 的计算机视觉库。在大多数应用程序成功编译后，我在 make 过程中遇到错误“GeomObjects/point3d.cpp:88: error: 'VW::Point3D VW::operator+(const VW::Point3D&, const VW::Point3D&)' 应该已在“大众”内部声明”。

据说这个代码可以在我的系统（Ubuntu 8.0.4.2）上干净地编译。所以我可能缺少一些依赖，但我不知道是哪个。我正在使用 gcc-4.1 和 automake1.9（根据自述文件需要）。

以下是我对自述文件创建者使用的同一操作系统的全新安装所遵循的安装说明：http: [//people.mech.kuleuven.be/~tdelaet/installation_scenlibEXTRA.txt](http://people.mech.kuleuven.be/~tdelaet/installation_scenlibEXTRA.txt)

以下是 make 连续运行的输出：

```
make  all-recursive
make[1]: Entering directory `/home/dewayne/Downloads/VW34'
Making all in VNL
make[2]: Entering directory `/home/dewayne/Downloads/VW34/VNL'
make[2]: Nothing to be done for `all'.
make[2]: Leaving directory `/home/dewayne/Downloads/VW34/VNL'
Making all in VW
make[2]: Entering directory `/home/dewayne/Downloads/VW34/VW'
make  all-am
make[3]: Entering directory `/home/dewayne/Downloads/VW34/VW'
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I../VNL  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT GeomObjects/point3d.o -MD -MP -MF "GeomObjects/.deps/point3d.Tpo" -c -o GeomObjects/point3d.o `test -f 'GeomObjects/point3d.cpp' || echo './'`GeomObjects/point3d.cpp; \
    then mv -f "GeomObjects/.deps/point3d.Tpo" "GeomObjects/.deps/point3d.Po"; else rm -f "GeomObjects/.deps/point3d.Tpo"; exit 1; fi
GeomObjects/point3d.cpp:88: error: ‘VW::Point3D VW::operator+(const VW::Point3D&, const VW::Point3D&)’ should have been declared inside ‘VW’
GeomObjects/point3d.cpp:143: error: ‘VW::Point3D VW::operator/(const VW::Point3D&, double)’ should have been declared inside ‘VW’
make[3]: *** [GeomObjects/point3d.o] Error 1
make[3]: Leaving directory `/home/dewayne/Downloads/VW34/VW'
make[2]: *** [all] Error 2
make[2]: Leaving directory `/home/dewayne/Downloads/VW34/VW'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/dewayne/Downloads/VW34'
make: *** [all] Error 2 
```

这是配置的输出：

```
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for gawk... no
checking for mawk... mawk
checking whether make sets $(MAKE)... yes
checking for g++... g++
checking for C++ compiler default output file name... a.out
checking whether the C++ compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking for style of include used by make... GNU
checking dependency style of g++... gcc3
checking for gcc... gcc
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking dependency style of gcc... gcc3
checking whether gcc and cc understand -c and -o together... yes
checking how to run the C preprocessor... gcc -E
checking for a BSD-compatible install... /usr/bin/install -c
checking whether make sets $(MAKE)... (cached) yes
checking for ranlib... ranlib
checking for X... libraries , headers 
checking for dirent.h that defines DIR... yes
checking for library containing opendir... none required
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for ANSI C header files... yes
checking for sys/wait.h that is POSIX.1 compatible... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking fcntl.h usability... yes
checking fcntl.h presence... yes
checking for fcntl.h... yes
checking float.h usability... yes
checking float.h presence... yes
checking for float.h... yes
checking malloc.h usability... yes
checking malloc.h presence... yes
checking for malloc.h... yes
checking stddef.h usability... yes
checking stddef.h presence... yes
checking for stddef.h... yes
checking for stdlib.h... (cached) yes
checking for string.h... (cached) yes
checking sys/file.h usability... yes
checking sys/file.h presence... yes
checking for sys/file.h... yes
checking sys/ioctl.h usability... yes
checking sys/ioctl.h presence... yes
checking for sys/ioctl.h... yes
checking sys/time.h usability... yes
checking sys/time.h presence... yes
checking for sys/time.h... yes
checking termios.h usability... yes
checking termios.h presence... yes
checking for termios.h... yes
checking for unistd.h... (cached) yes
checking for stdbool.h that conforms to C99... yes
checking for _Bool... yes
checking for an ANSI C-conforming const... yes
checking for inline... inline
checking for off_t... yes
checking for size_t... yes
checking whether time.h and sys/time.h may both be included... yes
checking whether struct tm is in sys/time.h or time.h... time.h
checking for working volatile... yes
checking for error_at_line... yes
checking for pid_t... yes
checking vfork.h usability... no
checking vfork.h presence... no
checking for vfork.h... no
checking for fork... yes
checking for vfork... yes
checking for working fork... yes
checking for working vfork... (cached) yes
checking whether gcc needs -traditional... no
checking for stdlib.h... (cached) yes
checking for GNU libc compatible malloc... yes
checking for stdlib.h... (cached) yes
checking for unistd.h... (cached) yes
checking for getpagesize... yes
checking for working mmap... yes
checking for stdlib.h... (cached) yes
checking for GNU libc compatible realloc... yes
checking return type of signal handlers... void
checking for dup2... yes
checking for floor... no
checking for gettimeofday... yes
checking for memset... yes
checking for munmap... yes
checking for pow... no
checking for sqrt... no
checking for strerror... yes
checking for tzset... yes
checking X11/Xlib.h usability... yes
checking X11/Xlib.h presence... yes
checking for X11/Xlib.h... yes
checking X11/Xutil.h usability... yes
checking X11/Xutil.h presence... yes
checking for X11/Xutil.h... yes
checking X11/forms.h usability... no
checking X11/forms.h presence... no
checking for X11/forms.h... no
configure: WARNING: **** xforms not found **** libVWXForms.a will not be compiled
checking for dc1394_dma_setup_capture in -ldc1394_control... no
configure: WARNING: **** libdc1394 not found **** libVWFirewire.a will not be compiled
checking GL/gl.h usability... yes
checking GL/gl.h presence... yes
checking for GL/gl.h... yes
checking GL/glu.h usability... yes
checking GL/glu.h presence... yes
checking for GL/glu.h... yes
checking for /usr/include/gtkgl--/glarea.h... no
configure: WARNING: **** gtkgl-- not found **** libVWGTK.a will not have GL support
checking how to run the C++ preprocessor... g++ -E
checking glow.h usability... no
checking glow.h presence... no
checking for glow.h... no
checking for GLOW location... /home/dewayne/Downloads/glow_104/glow_src
checking for gethostbyname... yes
checking for connect... yes
checking for remove... yes
checking for shmat... yes
checking for IceConnectionNumber in -lICE... yes
checking for Qt... ls: cannot access /lib/libqt*: No such file or directory
/usr/lib/libqthreads.so.12
/usr/lib/libqthreads.so.12.3.1
no
configure: creating ./config.status
config.status: creating Makefile
config.status: creating VNL/Makefile
config.status: creating VW/Makefile
config.status: creating VWFirewire/Makefile
config.status: creating VWMeteor/Makefile
config.status: creating VWYorick/Makefile
config.status: creating VWGL/Makefile
config.status: creating VWGTK/Makefile
config.status: creating VWWx/Makefile
config.status: creating VWGLOW/Makefile
config.status: creating VWQt/Makefile
config.status: creating VWX/Makefile
config.status: creating VWXForms/Makefile
config.status: creating config.h
config.status: config.h is unchanged
config.status: executing depfiles commands
Components to be compiled:
    Core:
      libVNL.a...            yes
      libVW.a...             yes
    GUI:
      libVWX.a...            yes
      libVWXForms.a...       no
      libVWGL.a...           yes
      libVWGLOW.a...         yes
      libVWGTK.a...           (gl support - no)
      libVWWx.a...            (gl support - )
      libVWQt.a...           no
    Hardware:
      libVWMeteor.a...       yes
      libWVYorick.a...       yes
      libVWGTI.a...          no
      libVWFirewire.a...     no 
```

这是make的扩展输出：

```
make  all-recursive
make[1]: Entering directory `/home/dewayne/Downloads/VW34'
Making all in VNL
make[2]: Entering directory `/home/dewayne/Downloads/VW34/VNL'
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT alloc.o -MD -MP -MF ".deps/alloc.Tpo" -c -o alloc.o alloc.cpp; \
    then mv -f ".deps/alloc.Tpo" ".deps/alloc.Po"; else rm -f ".deps/alloc.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT bignum.o -MD -MP -MF ".deps/bignum.Tpo" -c -o bignum.o bignum.cpp; \
    then mv -f ".deps/bignum.Tpo" ".deps/bignum.Po"; else rm -f ".deps/bignum.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT copy.o -MD -MP -MF ".deps/copy.Tpo" -c -o copy.o copy.cpp; \
    then mv -f ".deps/copy.Tpo" ".deps/copy.Po"; else rm -f ".deps/copy.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT error.o -MD -MP -MF ".deps/error.Tpo" -c -o error.o error.cpp; \
    then mv -f ".deps/error.Tpo" ".deps/error.Po"; else rm -f ".deps/error.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT numerictraits.o -MD -MP -MF ".deps/numerictraits.Tpo" -c -o numerictraits.o numerictraits.cpp; \
    then mv -f ".deps/numerictraits.Tpo" ".deps/numerictraits.Po"; else rm -f ".deps/numerictraits.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT numericlimits.o -MD -MP -MF ".deps/numericlimits.Tpo" -c -o numericlimits.o numericlimits.cpp; \
    then mv -f ".deps/numericlimits.Tpo" ".deps/numericlimits.Po"; else rm -f ".deps/numericlimits.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT rational.o -MD -MP -MF ".deps/rational.Tpo" -c -o rational.o rational.cpp; \
    then mv -f ".deps/rational.Tpo" ".deps/rational.Po"; else rm -f ".deps/rational.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT vnlmath.o -MD -MP -MF ".deps/vnlmath.Tpo" -c -o vnlmath.o vnlmath.cpp; \
    then mv -f ".deps/vnlmath.Tpo" ".deps/vnlmath.Po"; else rm -f ".deps/vnlmath.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT complextraits.o -MD -MP -MF ".deps/complextraits.Tpo" -c -o complextraits.o complextraits.cpp; \
    then mv -f ".deps/complextraits.Tpo" ".deps/complextraits.Po"; else rm -f ".deps/complextraits.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT complex.o -MD -MP -MF ".deps/complex.Tpo" -c -o complex.o complex.cpp; \
    then mv -f ".deps/complex.Tpo" ".deps/complex.Po"; else rm -f ".deps/complex.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT crossproductmatrix.o -MD -MP -MF ".deps/crossproductmatrix.Tpo" -c -o crossproductmatrix.o crossproductmatrix.cpp; \
    then mv -f ".deps/crossproductmatrix.Tpo" ".deps/crossproductmatrix.Po"; else rm -f ".deps/crossproductmatrix.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT matops.o -MD -MP -MF ".deps/matops.Tpo" -c -o matops.o matops.cpp; \
    then mv -f ".deps/matops.Tpo" ".deps/matops.Po"; else rm -f ".deps/matops.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT trace.o -MD -MP -MF ".deps/trace.Tpo" -c -o trace.o trace.cpp; \
    then mv -f ".deps/trace.Tpo" ".deps/trace.Po"; else rm -f ".deps/trace.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT transpose.o -MD -MP -MF ".deps/transpose.Tpo" -c -o transpose.o transpose.cpp; \
    then mv -f ".deps/transpose.Tpo" ".deps/transpose.Po"; else rm -f ".deps/transpose.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT unaryfunction.o -MD -MP -MF ".deps/unaryfunction.Tpo" -c -o unaryfunction.o unaryfunction.cpp; \
    then mv -f ".deps/unaryfunction.Tpo" ".deps/unaryfunction.Po"; else rm -f ".deps/unaryfunction.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT linearoperators3.o -MD -MP -MF ".deps/linearoperators3.Tpo" -c -o linearoperators3.o linearoperators3.cpp; \
    then mv -f ".deps/linearoperators3.Tpo" ".deps/linearoperators3.Po"; else rm -f ".deps/linearoperators3.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT linearsystem.o -MD -MP -MF ".deps/linearsystem.Tpo" -c -o linearsystem.o linearsystem.cpp; \
    then mv -f ".deps/linearsystem.Tpo" ".deps/linearsystem.Po"; else rm -f ".deps/linearsystem.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT costfunction.o -MD -MP -MF ".deps/costfunction.Tpo" -c -o costfunction.o costfunction.cpp; \
    then mv -f ".deps/costfunction.Tpo" ".deps/costfunction.Po"; else rm -f ".deps/costfunction.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT nonlinearminimizer.o -MD -MP -MF ".deps/nonlinearminimizer.Tpo" -c -o nonlinearminimizer.o nonlinearminimizer.cpp; \
    then mv -f ".deps/nonlinearminimizer.Tpo" ".deps/nonlinearminimizer.Po"; else rm -f ".deps/nonlinearminimizer.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT realnpolynomial.o -MD -MP -MF ".deps/realnpolynomial.Tpo" -c -o realnpolynomial.o realnpolynomial.cpp; \
    then mv -f ".deps/realnpolynomial.Tpo" ".deps/realnpolynomial.Po"; else rm -f ".deps/realnpolynomial.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT realpolynomial.o -MD -MP -MF ".deps/realpolynomial.Tpo" -c -o realpolynomial.o realpolynomial.cpp; \
    then mv -f ".deps/realpolynomial.Tpo" ".deps/realpolynomial.Po"; else rm -f ".deps/realpolynomial.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT leastsquarescostfunction.o -MD -MP -MF ".deps/leastsquarescostfunction.Tpo" -c -o leastsquarescostfunction.o leastsquarescostfunction.cpp; \
    then mv -f ".deps/leastsquarescostfunction.Tpo" ".deps/leastsquarescostfunction.Po"; else rm -f ".deps/leastsquarescostfunction.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT leastsquaresfunction.o -MD -MP -MF ".deps/leastsquaresfunction.Tpo" -c -o leastsquaresfunction.o leastsquaresfunction.cpp; \
    then mv -f ".deps/leastsquaresfunction.Tpo" ".deps/leastsquaresfunction.Po"; else rm -f ".deps/leastsquaresfunction.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT fastops.o -MD -MP -MF ".deps/fastops.Tpo" -c -o fastops.o fastops.cpp; \
    then mv -f ".deps/fastops.Tpo" ".deps/fastops.Po"; else rm -f ".deps/fastops.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT sparsematrixlinearsystem.o -MD -MP -MF ".deps/sparsematrixlinearsystem.Tpo" -c -o sparsematrixlinearsystem.o sparsematrixlinearsystem.cpp; \
    then mv -f ".deps/sparsematrixlinearsystem.Tpo" ".deps/sparsematrixlinearsystem.Po"; else rm -f ".deps/sparsematrixlinearsystem.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT sample.o -MD -MP -MF ".deps/sample.Tpo" -c -o sample.o sample.cpp; \
    then mv -f ".deps/sample.Tpo" ".deps/sample.Po"; else rm -f ".deps/sample.Tpo"; exit 1; fi
sample.cpp:60: warning: this decimal constant is unsigned only in ISO C90
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT matlabfilewrite.o -MD -MP -MF ".deps/matlabfilewrite.Tpo" -c -o matlabfilewrite.o matlabfilewrite.cpp; \
    then mv -f ".deps/matlabfilewrite.Tpo" ".deps/matlabfilewrite.Po"; else rm -f ".deps/matlabfilewrite.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT matlabheader.o -MD -MP -MF ".deps/matlabheader.Tpo" -c -o matlabheader.o matlabheader.cpp; \
    then mv -f ".deps/matlabheader.Tpo" ".deps/matlabheader.Po"; else rm -f ".deps/matlabheader.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT matlabprint2.o -MD -MP -MF ".deps/matlabprint2.Tpo" -c -o matlabprint2.o matlabprint2.cpp; \
    then mv -f ".deps/matlabprint2.Tpo" ".deps/matlabprint2.Po"; else rm -f ".deps/matlabprint2.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT matlabprint.o -MD -MP -MF ".deps/matlabprint.Tpo" -c -o matlabprint.o matlabprint.cpp; \
    then mv -f ".deps/matlabprint.Tpo" ".deps/matlabprint.Po"; else rm -f ".deps/matlabprint.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT matlabprintformat.o -MD -MP -MF ".deps/matlabprintformat.Tpo" -c -o matlabprintformat.o matlabprintformat.cpp; \
    then mv -f ".deps/matlabprintformat.Tpo" ".deps/matlabprintformat.Po"; else rm -f ".deps/matlabprintformat.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT matlabprintscalar.o -MD -MP -MF ".deps/matlabprintscalar.Tpo" -c -o matlabprintscalar.o matlabprintscalar.cpp; \
    then mv -f ".deps/matlabprintscalar.Tpo" ".deps/matlabprintscalar.Po"; else rm -f ".deps/matlabprintscalar.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT matlabread.o -MD -MP -MF ".deps/matlabread.Tpo" -c -o matlabread.o matlabread.cpp; \
    then mv -f ".deps/matlabread.Tpo" ".deps/matlabread.Po"; else rm -f ".deps/matlabread.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT matlabwrite.o -MD -MP -MF ".deps/matlabwrite.Tpo" -c -o matlabwrite.o matlabwrite.cpp; \
    then mv -f ".deps/matlabwrite.Tpo" ".deps/matlabwrite.Po"; else rm -f ".deps/matlabwrite.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT Templates/complexops_inst.o -MD -MP -MF "Templates/.deps/complexops_inst.Tpo" -c -o Templates/complexops_inst.o `test -f 'Templates/complexops_inst.cpp' || echo './'`Templates/complexops_inst.cpp; \
    then mv -f "Templates/.deps/complexops_inst.Tpo" "Templates/.deps/complexops_inst.Po"; else rm -f "Templates/.deps/complexops_inst.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT Templates/cvector_inst.o -MD -MP -MF "Templates/.deps/cvector_inst.Tpo" -c -o Templates/cvector_inst.o `test -f 'Templates/cvector_inst.cpp' || echo './'`Templates/cvector_inst.cpp; \
    then mv -f "Templates/.deps/cvector_inst.Tpo" "Templates/.deps/cvector_inst.Po"; else rm -f "Templates/.deps/cvector_inst.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT Templates/matrix_inst.o -MD -MP -MF "Templates/.deps/matrix_inst.Tpo" -c -o Templates/matrix_inst.o `test -f 'Templates/matrix_inst.cpp' || echo './'`Templates/matrix_inst.cpp; \
    then mv -f "Templates/.deps/matrix_inst.Tpo" "Templates/.deps/matrix_inst.Po"; else rm -f "Templates/.deps/matrix_inst.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT Templates/matrixref_inst.o -MD -MP -MF "Templates/.deps/matrixref_inst.Tpo" -c -o Templates/matrixref_inst.o `test -f 'Templates/matrixref_inst.cpp' || echo './'`Templates/matrixref_inst.cpp; \
    then mv -f "Templates/.deps/matrixref_inst.Tpo" "Templates/.deps/matrixref_inst.Po"; else rm -f "Templates/.deps/matrixref_inst.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT Templates/matrixfixed_inst.o -MD -MP -MF "Templates/.deps/matrixfixed_inst.Tpo" -c -o Templates/matrixfixed_inst.o `test -f 'Templates/matrixfixed_inst.cpp' || echo './'`Templates/matrixfixed_inst.cpp; \
    then mv -f "Templates/.deps/matrixfixed_inst.Tpo" "Templates/.deps/matrixfixed_inst.Po"; else rm -f "Templates/.deps/matrixfixed_inst.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT Templates/vector_inst.o -MD -MP -MF "Templates/.deps/vector_inst.Tpo" -c -o Templates/vector_inst.o `test -f 'Templates/vector_inst.cpp' || echo './'`Templates/vector_inst.cpp; \
    then mv -f "Templates/.deps/vector_inst.Tpo" "Templates/.deps/vector_inst.Po"; else rm -f "Templates/.deps/vector_inst.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT Templates/vectorref_inst.o -MD -MP -MF "Templates/.deps/vectorref_inst.Tpo" -c -o Templates/vectorref_inst.o `test -f 'Templates/vectorref_inst.cpp' || echo './'`Templates/vectorref_inst.cpp; \
    then mv -f "Templates/.deps/vectorref_inst.Tpo" "Templates/.deps/vectorref_inst.Po"; else rm -f "Templates/.deps/vectorref_inst.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT Templates/vectorfixed_inst.o -MD -MP -MF "Templates/.deps/vectorfixed_inst.Tpo" -c -o Templates/vectorfixed_inst.o `test -f 'Templates/vectorfixed_inst.cpp' || echo './'`Templates/vectorfixed_inst.cpp; \
    then mv -f "Templates/.deps/vectorfixed_inst.Tpo" "Templates/.deps/vectorfixed_inst.Po"; else rm -f "Templates/.deps/vectorfixed_inst.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT Templates/det_inst.o -MD -MP -MF "Templates/.deps/det_inst.Tpo" -c -o Templates/det_inst.o `test -f 'Templates/det_inst.cpp' || echo './'`Templates/det_inst.cpp; \
    then mv -f "Templates/.deps/det_inst.Tpo" "Templates/.deps/det_inst.Po"; else rm -f "Templates/.deps/det_inst.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT Templates/symmatrix_inst.o -MD -MP -MF "Templates/.deps/symmatrix_inst.Tpo" -c -o Templates/symmatrix_inst.o `test -f 'Templates/symmatrix_inst.cpp' || echo './'`Templates/symmatrix_inst.cpp; \
    then mv -f "Templates/.deps/symmatrix_inst.Tpo" "Templates/.deps/symmatrix_inst.Po"; else rm -f "Templates/.deps/symmatrix_inst.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT Templates/diagmatrix_inst.o -MD -MP -MF "Templates/.deps/diagmatrix_inst.Tpo" -c -o Templates/diagmatrix_inst.o `test -f 'Templates/diagmatrix_inst.cpp' || echo './'`Templates/diagmatrix_inst.cpp; \
    then mv -f "Templates/.deps/diagmatrix_inst.Tpo" "Templates/.deps/diagmatrix_inst.Po"; else rm -f "Templates/.deps/diagmatrix_inst.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT Templates/filematrix_inst.o -MD -MP -MF "Templates/.deps/filematrix_inst.Tpo" -c -o Templates/filematrix_inst.o `test -f 'Templates/filematrix_inst.cpp' || echo './'`Templates/filematrix_inst.cpp; \
    then mv -f "Templates/.deps/filematrix_inst.Tpo" "Templates/.deps/filematrix_inst.Po"; else rm -f "Templates/.deps/filematrix_inst.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT Templates/filevector_inst.o -MD -MP -MF "Templates/.deps/filevector_inst.Tpo" -c -o Templates/filevector_inst.o `test -f 'Templates/filevector_inst.cpp' || echo './'`Templates/filevector_inst.cpp; \
    then mv -f "Templates/.deps/filevector_inst.Tpo" "Templates/.deps/filevector_inst.Po"; else rm -f "Templates/.deps/filevector_inst.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT Templates/fortrancopy_inst.o -MD -MP -MF "Templates/.deps/fortrancopy_inst.Tpo" -c -o Templates/fortrancopy_inst.o `test -f 'Templates/fortrancopy_inst.cpp' || echo './'`Templates/fortrancopy_inst.cpp; \
    then mv -f "Templates/.deps/fortrancopy_inst.Tpo" "Templates/.deps/fortrancopy_inst.Po"; else rm -f "Templates/.deps/fortrancopy_inst.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT Templates/matlabprint_inst.o -MD -MP -MF "Templates/.deps/matlabprint_inst.Tpo" -c -o Templates/matlabprint_inst.o `test -f 'Templates/matlabprint_inst.cpp' || echo './'`Templates/matlabprint_inst.cpp; \
    then mv -f "Templates/.deps/matlabprint_inst.Tpo" "Templates/.deps/matlabprint_inst.Po"; else rm -f "Templates/.deps/matlabprint_inst.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT Templates/matrixexp_inst.o -MD -MP -MF "Templates/.deps/matrixexp_inst.Tpo" -c -o Templates/matrixexp_inst.o `test -f 'Templates/matrixexp_inst.cpp' || echo './'`Templates/matrixexp_inst.cpp; \
    then mv -f "Templates/.deps/matrixexp_inst.Tpo" "Templates/.deps/matrixexp_inst.Po"; else rm -f "Templates/.deps/matrixexp_inst.Tpo"; exit 1; fi
if g++ -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT Templates/sparsematrix_inst.o -MD -MP -MF "Templates/.deps/sparsematrix_inst.Tpo" -c -o Templates/sparsematrix_inst.o `test -f 'Templates/sparsematrix_inst.cpp' || echo './'`Templates/sparsematrix_inst.cpp; \
    then mv -f "Templates/.deps/sparsematrix_inst.Tpo" "Templates/.deps/sparsematrix_inst.Po"; else rm -f "Templates/.deps/sparsematrix_inst.Tpo"; exit 1; fi
if gcc -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT NetLib/F77_aloc.o -MD -MP -MF "NetLib/.deps/F77_aloc.Tpo" -c -o NetLib/F77_aloc.o `test -f 'NetLib/F77_aloc.c' || echo './'`NetLib/F77_aloc.c; \
    then mv -f "NetLib/.deps/F77_aloc.Tpo" "NetLib/.deps/F77_aloc.Po"; else rm -f "NetLib/.deps/F77_aloc.Tpo"; exit 1; fi
if gcc -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT NetLib/exit.o -MD -MP -MF "NetLib/.deps/exit.Tpo" -c -o NetLib/exit.o `test -f 'NetLib/exit.c' || echo './'`NetLib/exit.c; \
    then mv -f "NetLib/.deps/exit.Tpo" "NetLib/.deps/exit.Po"; else rm -f "NetLib/.deps/exit.Tpo"; exit 1; fi
if gcc -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT NetLib/s_cmp.o -MD -MP -MF "NetLib/.deps/s_cmp.Tpo" -c -o NetLib/s_cmp.o `test -f 'NetLib/s_cmp.c' || echo './'`NetLib/s_cmp.c; \
    then mv -f "NetLib/.deps/s_cmp.Tpo" "NetLib/.deps/s_cmp.Po"; else rm -f "NetLib/.deps/s_cmp.Tpo"; exit 1; fi
if gcc -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT NetLib/d_lg10.o -MD -MP -MF "NetLib/.deps/d_lg10.Tpo" -c -o NetLib/d_lg10.o `test -f 'NetLib/d_lg10.c' || echo './'`NetLib/d_lg10.c; \
    then mv -f "NetLib/.deps/d_lg10.Tpo" "NetLib/.deps/d_lg10.Po"; else rm -f "NetLib/.deps/d_lg10.Tpo"; exit 1; fi
if gcc -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT NetLib/s_cat.o -MD -MP -MF "NetLib/.deps/s_cat.Tpo" -c -o NetLib/s_cat.o `test -f 'NetLib/s_cat.c' || echo './'`NetLib/s_cat.c; \
    then mv -f "NetLib/.deps/s_cat.Tpo" "NetLib/.deps/s_cat.Po"; else rm -f "NetLib/.deps/s_cat.Tpo"; exit 1; fi
if gcc -DHAVE_CONFIG_H -I. -I. -I.. -I..  -I/home/dewayne/Downloads/glow_104/glow_src  -g -O2 -MT NetLib/s_copy.o -MD -MP -MF "Ne 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T07:04:04.340

您没有遗漏任何依赖项，代码只是被破坏了。

以下代码：

```
namespace VW {
  struct Foo {
      friend Foo operator+(const Foo&, const Foo&);
  };
}
VW::Foo VW::operator+(const Foo& lhs, const Foo& rhs) { return lhs; } 
```

从 gcc-4.1 产生相同的错误，但使用 gcc-3.4 编译（代码是在 2004 年编写的，当时 gcc-3.4 是最新的）。

幸运的是，有一个简单的修复：

```
namespace VW {
  struct Foo {
      friend Foo operator+(const Foo&, const Foo&);
  };
  Foo operator+(const Foo& lhs, const Foo& rhs); // FIX
}
VW::Foo VW::operator+(const Foo& lhs, const Foo& rhs) { return lhs; } 
```

# c - 解决循环 typedef 依赖？

> ID：888386
> 
> 赞同：39
> 
> 时间：2009-05-20T14:46:28.967
> 
> 标签：c, circular-dependency

在对这些结构进行类型定义时，解决以下循环依赖的最佳方法是什么？
*注意 C 语言标签 - 我正在寻找标准 gcc C 中的解决方案。*

```
typedef struct {
    char* name;
    int age;
    int lefthanded;
    People* friends;
} Person;

typedef struct {
    int count;
    int max;
    Person* data;
} People; 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2010-06-10T23:06:08.863

答案在于声明和定义之间的区别。您试图在同一步骤中声明和定义（在通过 typedef 的新类型的情况下）。您需要将它们分解为不同的步骤，以便编译器提前知道您在说什么。

```
typedef struct Person Person;
typedef struct People People;

struct Person {
    char* name;
    int age;
    int lefthanded;
    People* friends;
};

struct People {
    int count;
    int max;
    Person* data;
}; 
```

请注意在顶部添加了两个“空”类型定义（声明）。这告诉编译器新类型 Person 的类型是“struct Person”，因此当它在 struct People 的定义中看到它时，它就知道它的含义。

在您的特定情况下，您实际上可以只预先声明 People typdef，因为这是在定义之前使用的唯一类型。当您开始定义 struct People 时，您已经完全定义了 Person 类型。因此，以下内容也可以使用，但**不推荐**使用，因为它很脆弱：

```
typedef struct People People;

typedef struct {
    char* name;
    int age;
    int lefthanded;
    People* friends;
} Person;

struct People {
    int count;
    int max;
    Person* data;
}; 
```

如果您交换结构定义的顺序（将 struct People 移动到 Person 的 typedef 之上），它将再次失败。这就是使它变得脆弱的原因，因此不推荐。

请注意，如果您包含指定类型的结构而不是指向它的指针，则此技巧不起作用。因此，例如，以下内容**将不会编译**：

```
typedef struct Bar Bar;

struct Foo
{
    Bar bar;
};

struct Bar
{
    int i;
}; 
```

上面的代码给出了一个编译器错误，因为当它试图在 struct Foo 的定义中使用 Bar 类型时它是不完整的。换句话说，它不知道要为结构成员“bar”分配多少空间，因为那时它还没有看到 struct bar 的定义。

此代码**将编译**：

```
typedef struct Foo Foo;
typedef struct Bar Bar;
typedef struct FooBar FooBar;

struct Foo
{
    Bar *bar;
};

struct Bar
{
    Foo *foo;
};

struct FooBar
{
    Foo     foo;
    Bar     bar;
    FooBar  *foobar;
}; 
```

即使使用 Foo 和 Bar 中的循环指针，这也有效，因为类型 'Foo' 和 'Bar' 已预先声明（但尚未定义），因此编译器可以构建指向它们的指针。

当我们开始定义 FooBar 时，我们已经定义了 Foo 和 Bar 的大小，因此我们可以在其中包含实际的对象。我们还可以包含一个指向 FooBar 类型的自引用指针，因为我们已经预先声明了该类型。

请注意，如果您将 struct FooBar 的定义移到 struct Foo 或 Bar 的定义之上，则由于与前面示例相同的原因（不完整类型），它将无法编译。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2009-05-20T14:54:09.170

前向声明结构之一：

```
 struct people;

typedef struct {
  /* same as before */
  struct people* friends;
} Person;

typedef struct people {
  /* same as before */
} People; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-21T02:47:20.370

至于可读性：

```
typedef struct Foo_ Foo;
typedef struct Bar_ Bar;

struct Foo_ {
    Bar *bar;
};

struct Bar_ {
    Foo *foo;
}; 
```

It might be a good idea to avoid `typedef struct` altogether;

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-20T14:53:08.860

由于`Person`只需要一个指向 的指针`People`，因此只需预先声明后者就可以了：

```
typedef struct People People; 
```

然后将第二个声明更改为仅使用 struct 标记进行声明，如下所示：

```
struct People {
    int count;
    int max;
    Person data[];
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-20T14:57:25.747

```
struct _People;

typedef struct {
    char* name;
    int age;
    int lefthanded;
    struct _People* friends;
} Person;

struct _People {
    int count;
    int max;
    Person data[1];
}; 
```

注意：是`Person data[];`标准的吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T14:55:05.253

```
struct People_struct;

typedef struct {
    char* name;
    int age;
    int lefthanded;
    struct People_struct* friends;
} Person;

typedef struct People_struct {
    int count;
    int max;
    Person data[];
} People; 
```

# iphone - 如果我将未使用的函数放入项目中随处可见的大型 CoolFunctions.h / CoolFunctions.m 文件中，这有关系吗？

> ID：888388
> 
> 赞同：1
> 
> 时间：2009-05-20T14:46:34.663
> 
> 标签：iphone, objective-c

我想为所有我发现可重用和有用的酷函数创建一个大文件，并将它们全部放入单个文件中。嗯，一开始我没有很多，所以我想制作几个文件不值得考虑。我会使用杂注标记在视觉上将它们分开。

但问题是：那些未使用的方法会以任何方式打扰吗？我的应用程序会爆炸或性能下降吗？或者编译器/链接器是否足够聪明，知道不需要函数 A 和 B，因此不会将它们的“代码”复制到我生成的应用程序中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T14:55:39.043

这听起来像是一场绝对的建筑和维护噩梦。作为实践问题，您*永远不*应该使用您认为有用的一组随机方法来创建一个巨大的 blob 文件。将方法添加到适当的类或类别中。有关blob 反模式的信息，请参见[此处，这就是您在此处所做的。](http://sourcemaking.com/antipatterns/the-blob)

直接回答您的问题：不，从不调用的方法不会影响您的应用程序的性能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-20T14:56:13.957

不，它们不会直接影响您的应用。但请记住，所有未使用的代码都会使您的函数文件更难阅读和维护。另外，编写你现在没有实际使用的函数可以很容易地引入错误，这些错误直到你开始使用这些函数时才会变得明显，这可能会非常令人困惑，因为你已经忘记了它们是如何使用的' 是写出来的，并且可能会认为它们是正确的，因为你已经很久没有碰它们了。

此外，在像 Objective-C 这样的面向对象语言中，全局函数实际上应该只用于特殊的、非常可重用的情况。在大多数情况下，您应该改为在类中编写方法。我的应用程序中可能有一两个全局函数，通常与调试有关，但通常没有别的。

所以不，它不会伤害任何东西，但我仍然会避免它并专注于编写你现在需要的代码，此时此刻。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T14:53:28.627

代码仍会被编译并链接到项目中，只是不会被您的代码使用，这意味着您生成的可执行文件会更大。

我可能会将函数拆分为单独的文件，具体取决于它们要处理的公共区域，所以我有一个图像函数库，与字符串操作函数库分开，然后包括与手头项目相关的任何一个.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T14:53:05.693

我不认为 .h 文件中有未使用的函数会以任何方式伤害你。如果您在构建目标中编译所有包含未使用函数的相应 .m 文件，那么您最终将生成比所需更大的可执行文件。如果您通过静态库包含代码，情况也是如此。

如果您确实使用了某个函数，但没有包含正确的 .m 文件或库，那么您将收到链接错误。

# c - 搜索图像模式

> ID：888390
> 
> 赞同：1
> 
> 时间：2009-05-20T14:47:07.143
> 
> 标签：c, parallel-processing

我需要做一个程序来做到这一点：给定一个图像（5 * 5 像素），我必须搜索在另一个图像中存在多少这样的图像，由许多其他图像组成。也就是说，我需要在图像中搜索给定的模式。

使用的语言是 C。我必须使用并行计算来搜索 4 个角度（0º、90º、180º 和 270º）。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T14:56:35.517

似乎直截了当。

*   创建 0°、90°、180° 和 270° 旋转的 4 个版本的图像。
*   启动四个线程，每个线程都有一个版本的图像。
*   `(0,0)`对于从到的所有职位`(width - 5, height - 5)`
    *   将参考图像的 25 个像素与当前位置的 25 个像素进行比较
    *   如果使用某些指标它们足够相等，请报告结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T16:33:20.157

**使用归一化相关来确定模板的匹配。**

@Daniel，Daniel 的解决方案非常适合利用您的多个 CPU。他没有提到有用的质量指标，我想建议一种在图像处理中非常常见的质量指标。

我建议使用[归一化相关](http://www.mathworks.com/access/helpdesk/help/toolbox/images/index.html?/access/helpdesk/help/toolbox/images/normxcorr2.html)[1] 作为比较指标，因为它输出一个从 -1 到 +1 的数字。其中 0 表示没有相关性，如果两个模板相同，则输出 1，如果两个模板完全相反，则输出 -1。

[计算归一化相关性后，您可以通过阈值测试](http://en.wikipedia.org/wiki/Thresholding_(image_processing))或峰均值测试[2] 来测试是否找到了模板。

[1 - 脚注] 你如何实现归一化相关？它非常简单，只有两个 for 循环。一旦你有一个足够好的实现，你可以通过检查相同的图像是否让你得到 1 来验证你的实现。

[2 - 脚注] 你做最大（数组）/平均值（数组_无峰值）的比率。然后阈值以确保您具有良好的峰均比。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T15:21:39.117

无需创建图像的另外三个版本，只需以不同方式处理它们或使用类似于我在[此处](https://stackoverflow.com/questions/42519/how-do-you-rotate-a-two-dimensional-array/43333#43333)创建的类的东西。更好的是，只需复制 5x5 矩阵并旋转它们。然后，您可以线性扫描图像以进行所有旋转（这是一件好事）。

这个问题不能很好地扩展到并行处理，因为瓶颈肯定是访问图像数据。让多个线程访问相同的数据会减慢速度，特别是如果线程“不同步”，即一个线程比其他线程更远地通过图像，因此其他线程最终重新加载第一个线程已丢弃的数据.

所以，我认为最有效的解决方案是创建四个线程来扫描 5 行图像，每次旋转一个线程。第五个线程一次加载一行图像数据并将该行传递给四个扫描线程中的每一个，等待所有四个线程完成，即加载一行图像，附加到五个行缓冲区，启动四个扫描线程，等待线程结束并重复，直到读取所有图像行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T19:22:28.163

5 * 5 = 25

25 位适合整数。

每个图像都可以编码为 4 个整数的数组。

迭代你的大图，（希望它不是太大），拉出所有 5 * 5 子图像，转换为 4 个整数的数组并进行比较。

# wpf - wpf浏览器控件的块脚本调试

> ID：888391
> 
> 赞同：1
> 
> 时间：2009-05-20T14:47:28.857
> 
> 标签：wpf, webbrowser-control

我已经为我的 WPF 浏览器应用程序使用了浏览器控件。我想禁用脚本错误消息。请让我确切知道，因为我对这个应用程序非常陌生。提前致谢。

除了在 Internet 选项的高级选项卡上禁用脚本消息之外的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T09:27:16.873

这里的问题是 WPF`WebBrowser`没有像在 2.0 控件中那样实现这个属性。

您最好的选择是`WindowsFormsHost`在您的 WPF 应用程序中使用 a 并使用 2.0 的`WebBrowser`属性：`SuppressScriptErrors`. 即使这样，您也需要完全信任该应用程序才能执行此操作。

不是人们所说的理想，但它几乎是目前唯一的选择。

# javascript - 有没有办法将以下 VBScript 更改为 javascript？

> ID：888392
> 
> 赞同：1
> 
> 时间：2009-05-20T14:47:54.783
> 
> 标签：javascript, excel, vbscript

我正在尝试将一些 VBScript 转换为 javascript，但我怀疑这是否可能，因为它似乎特定于 MS 应用程序和代码。我需要两种可能结果中的任何一种的帮助：a）实际将代码转换为 javascript，或 b）证明当前无法将其转换为 javascript。

我认为特定于 MS 的特定 VBScript 语句是：

```
set oExcel = CreateObject("Excel.Application")
set oBook = oExcel.Workbooks.Add
oBook.HTMLProject.HTMLProjectItems("Sheet1").Text = sHTML
oBook.HTMLProject.RefreshDocument()
oExcel.Visible = True
oExcel.UserControl = True 
```

有没有人很好地连接了 javascript 和 Excel 以提供解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T14:54:12.400

当然是这样的：-

```
 var excel = new ActiveXObject("Excel.Application")
 var book = excel.Workbooks.Add()

 //The line below doesn't work in Excel 2007
 // book.HTMLProject.HTMLProjectItems["Sheet1"].Text = sHtml

 var sheet =  book.Sheets("Sheet1")
 sheet.Range("A2").Value = "Hello World"
 excel.Visible = true
 excel.UserControl = true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T14:53:37.660

您只能使用 JScript 而不是 JavaScript 来执行此操作 -[这将向您展示如何](http://msdn.microsoft.com/en-us/library/aa394616(VS.85).aspx). 如果您只使用 IE，这可能没问题。

# c# - 在 MOSS 2007 中使用 RunWithElevatedPrivileges 更新 WebPart 属性

> ID：888399
> 
> 赞同：0
> 
> 时间：2009-05-20T14:49:34.530
> 
> 标签：c#, sharepoint

作为 MOSS 2007 解决方案的一部分，我有一个显示当天“术语”的 Web 部件。这些术语存储在一个非常混乱的 XML 文件中，因此它们都可以很好地解析，然后应该将名为 LastUpdatedOn 的属性更新为当前时间。

我的问题是管理员级别的帐户可以毫无问题地看到这一点，但查看者收到错误消息，指出他们没有足够的权限来保存 Web 部件的属性。

我在提升的特权委托中运行代码，并实例化了一个新的上下文来解决上下文仍然认为当前用户不是系统帐户的事实。

[完整代码的 Pastebin 可以在这里找到](http://pastebin.com/m23120ce)

问题线是：

```
SaveProperties = true;
LastUpdatedOn = DateTime.Now.ToString(); 
```

将这些注释掉意味着我的 Web 部件可以工作，但它总是会在每次页面加载时显示一个随机术语，而不是 24 小时保持相同的术语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T17:24:22.643

为什么不将您的种子基于今天的日期并跳过保存值？

样本：

```
Random r = new Random(DateTime.Now.DayOfYear + 365 * DateTime.Now.Year);
r.Next(count); 
```

这将为您每天提供一个新的随机值。

# hibernate - Jdo/Hibernate 中的分离对象——它们到底有什么用？

> ID：888401
> 
> 赞同：2
> 
> 时间：2009-05-20T14:49:52.177
> 
> 标签：hibernate, orm, jpa, jdo

有人可以向我解释在 Web 应用程序的上下文中使用分离对象有什么好处吗？AFAIK 它们仅在对象以某种方式超出事务的“词汇”范围时才有用，但通常在 Web 应用程序中，当您的事务结束时，您只需将对象发送到视图层，它们不会被重新附加。

据我所知，分离对象仅在您稍后要合并/重新附加它时才有用，而且我看不到与仅将对象直接更新到数据库相比的优势。

任何示例代码表示赞赏。

编辑：为了澄清起见，我试图了解分离对象与瞬态对象的优势（例如，用于数据库但以后无法重新附加的对象）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T17:37:10.747

分离的对象也可能保存其版本号（如果您有版本控制列）。例如，如果您采用实体编辑器的方法，加载实体并将其存储在 http-session（或其他寿命较长的存储）中，然后在以后的交互中更新它并将其合并回不同的会话，然后 Hibernate 可以自动检查该实体（或合并对象图中的其他实体）没有被同时修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T17:24:20.553

假设您有一个包含几十个下拉列表的页面，这些下拉列表是从各个表的行中填充的。您不希望每次呈现页面时都必须往返于数据库，因此您可以获取对象列表、分离它们并将它们存储在某个地方。只要您注意避免引用可能延迟加载的属性，就可以了。

# isapi - 如何将 www.mydomain.net 重定向到 www.mydomain.net/blog

> ID：888402
> 
> 赞同：0
> 
> 时间：2009-05-20T14:49:55.840
> 
> 标签：isapi

我正在使用“离子 Isapi 重写过滤器”

我有一个带有空根 www.mydomain.net 的网站，我希望，当有人使用此 url 时，重定向到我的博客 www.mydomain.net/blog，这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T15:13:24.453

您不需要重写器来执行 REDIRECT。

您可以使用 docroot 中的默认文档（例如 index.html）执行此操作，其中包含 Meta Refresh 标记。

index.html 的内容可能是这样的：

```
<META HTTP-EQUIV=Refresh CONTENT="0; URL=blog"> 
```

现在，如果您真的想要 REWRITE，那就不同了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T21:23:49.667

我将假设由于您使用的是在 IIS 上运行的 Isapi Rewrite 过滤器（此答案适用于其他服务器，但我的说明专门针对 IIS）。您真的[不想使用元刷新](http://en.wikipedia.org/wiki/Meta_refresh)，而出于 SEO 目的，您想使用永久 (301) 重定向。

在 IIS 中，您可以通过以下方式执行此操作：

1.  创建一个空的 index.html 页面
2.  在 IIS 中右键单击该页面并打开“属性”对话框
3.  在“文件”选项卡上，选择“重定向到 URL”
4.  将“重定向到”值更改为[http://www.mydomain.net/blog](http://www.mydomain.net/blog)
5.  选中“此资源的永久重定向”复选框

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-10T12:38:59.347

[这是ISAPI_Rewrite 3](http://www.helicontech.com/isapi_rewrite/) Lite（免费）的解决方案：

```
RewriteBase /
RewriteCond %{HTTP_HOST ^www\.mydomain\.net$ [NC]
RewriteRule ^$ /blog [NC,R=301,L] 
```

# python - 让 Emacs 使用 UTF-8 和 Python 交互模式

> ID：888406
> 
> 赞同：7
> 
> 时间：2009-05-20T14:50:56.137
> 
> 标签：python, emacs, encoding, utf-8, terminal

当我从 Mac OS 的 Terminal.app 启动 Python 时，python 将编码识别为 UTF-8：

```
$ python3.0
Python 3.0.1 (r301:69556, May 18 2009, 16:44:01) 
[GCC 4.0.1 (Apple Inc. build 5465)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import sys
>>> sys.stdout.encoding
'UTF-8' 
```

这对 python2.5 是一样的。

但是在 Emacs 中，编码是 US-ASCII。

```
Python 3.0.1 (r301:69556, May 18 2009, 16:44:01) 
[GCC 4.0.1 (Apple Inc. build 5465)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import sys
>>> sys.stdout.encoding
'US-ASCII' 
```

如何让 Emacs 与 Python 通信，以便 sys.stdout 知道使用 UTF-8？

* * *

编辑：由于我没有代表来编辑接受的答案，这正是在 Aquaemacs 1.6、Mac OS 10.5.6 上对我有用的方法。

在 python-mode-hook 中，我添加了这一行

```
(setenv "LANG" "en_GB.UTF-8") 
```

显然，Mac OS 需要“UTF-8”，而 dfa 说 Ubuntu 需要“UTF8”。

此外，我必须通过执行 Cx RET p 然后键入“utf-8”两次来设置输入/输出编码。我可能应该找出如何永久设置它。

感谢 dfa 和 Jouni 共同帮助我找到答案。

这是我最后的python-mode-hook：

```
(add-hook 'python-mode-hook
  (lambda ()
        (set (make-variable-buffer-local 'beginning-of-defun-function)
             'py-beginning-of-def-or-class)
        (define-key py-mode-map "\C-c\C-z" 'py-shell)
        (setq outline-regexp "def\\|class ")
        (setenv "LANG" "en_GB.UTF-8"))) ; <-- *this* line is new 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T15:00:14.883

检查您的环境变量：

```
$ LANG="en_US.UTF8" python -c "import sys; print sys.stdout.encoding"
UTF-8
$ LANG="en_US" python -c "import sys; print sys.stdout.encoding"  
ANSI_X3.4-1968 
```

在你的 python 钩子中，尝试：

```
(setenv "LANG" "en_US.UTF8") 
```

# jquery - 如何将可调整大小的 jQuery 与图像绑定？

> ID：888407
> 
> 赞同：2
> 
> 时间：2009-05-20T14:50:57.727
> 
> 标签：jquery, jquery-ui

我想知道如何使用 jQuery 即时制作可调整大小的图像。就像图像具有可调整大小的边框一样，我们可以用鼠标拖动该边框以使图像变小或变大。当我使用可调整大小时，只有背景大陆变大，但图像大小仍然相同。提前感谢您的宝贵回复！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T15:02:32.837

像这样的图像html：

```
<img id="resizebleImage" src="images/mypic.gif" width="200px"
height="135px"> 
```

**jQuery**

```
$(function(){
   $("#resizebleImage").resizable();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T14:53:54.943

您是否将调整大小应用于 div 容器或实际图像？

如：

```
$('img').resizable(); 
```

抱歉，不确定语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-04-11T22:57:27.633

CSS

```
.container { width:130px; height:200px; }
.container img { 
width:100%; /* Set to auto to preserve aspect ratio */
height:100% } 
```

HTML：

```
<div class=container><img src=yourimg.jpg /></div> 
```

JS

```
$('div.container').resizable() 
```

在FF工作

# c# - 如何使用 C# 从套接字中检索 Java 数据？

> ID：888409
> 
> 赞同：0
> 
> 时间：2009-05-20T14:51:00.567
> 
> 标签：c#, java, .net

我想`BigInteger`在套接字中发送数据，而我的朋友想检索数据。
我正在使用 Java，但我的朋友使用 C#。

```
String str = "Hello";
BigInteger big = new BigInteger(str.getBytes);
byteToBeSent[] = big.toByteArray(); 
```

我`byteToBeSent[]`通过套接字发送这个字节数组（）。我的朋友想检索“你好”。

这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T15:12:07.997

在 Java 中，使用[String.getBytes(encoding)](http://java.sun.com/j2se/1.4.2/docs/api/java/lang/String.html#getBytes%28java.lang.String%29)发送您的字符串并指定编码以匹配您朋友的阅读方式（例如 UTF-8）。

由于你们都同意编码机制，这会将您的字符串转换为可在 C# 端翻译的字节流。

我不确定你的 BigInteger 机制在做什么，但我不相信它是可移植的，也不能处理相当大的字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T14:56:30.460

老实说，您最好的选择是使用 C# 中内置的编码类。

```
string str = "Hello";
byte[] data = System.Text.Encoding.UTF8.GetBytes(str); 
```

然后通过套接字发送。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T15:00:47.847

你为什么用`BigInteger`发送String数据？或者这只是一个例子？

如果要发送字符串数据，请使用`String.getBytes(String encoding)`，发送结果并使用 解码`System.Text.Encoding`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T15:36:51.533

在 C# 端，您可以使用 System.Text.Encoding.ASCII.GetString(bytesToConvert[]) 将接收到的字节数组转换回字符串。

我曾认为这是将字符串转换为字节数组的某种 Java 习惯用法。它确实将字符串正确转换为 ASCII 字节，并且由于 BigInteger 长度是任意的，因此字符串的长度应该不是问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T14:58:46.760

您需要[为 C# 获取自定义 BigInteger 类](http://msdn.microsoft.com/en-us/magazine/cc163696.aspx)。

但是将“Hello”解析为大整数是行不通的。我要发送文本，最好使用 Navaars 方法。

# git - git-checkout 新名称下文件的旧版本

> ID：888414
> 
> 赞同：308
> 
> 时间：2009-05-20T14:52:07.523
> 
> 标签：git

我`main.cpp`在我的编辑器中打开了文件“”。

我也想`main.cpp`在编辑器中看到“”的先前版本。

我现在的做法是这样的。

```
close "main.cpp" in the editor

prompt> mv main.cpp tmp
prompt> git checkout HEAD^ main.cpp
prompt> mv main.cpp old_main.cpp
prompt> mv tmp main.cpp
prompt>

open "main.cpp" and "old_main.cpp" in the editor 
```

能不能简化，这样我就不用在编辑器中关闭“main.cpp”了？

我希望的是`git-checkout`可以做到这一点的变体。

* * *

更新：我在 mac osx 10.5.7 上使用 git

```
prompt> git --version
git version 1.6.0.4
prompt> 
```

* * *

UPDATE2：Jakub Narębski 的回答是：

```
prompt> git show HEAD^:dir1/dir2/dir3/main.cpp > old_main.cpp
prompt> 
```

* * *

UPDATE3：Karmi 的回答，针对特定修订：

```
prompt> git show 4c274dd91dc:higgs/Higgs.xcodeproj/project.pbxproj > old_project.pbxproj
prompt> 
```

* * *

## 回答 #1

> 赞同：363
> 
> 时间：2009-05-20T15:27:10.040

您可以`git show`为此使用：

```
git show HEAD^:main.cpp > old_main.cpp 
```

（注意和`:`之间有冒号 [ ] 字符。）语法在[git rev-parse](http://www.kernel.org/pub/software/scm/git/docs/git-rev-parse.html "git-rev-parse(1) Manual Page")手册页中描述，在“指定修订”部分的最后一点旁边：`HEAD^``main.cpp``<revision>:<path>`

> `<rev>:<path>`, 例如`HEAD:README`, `:README`,`master:./README`
> 
> 后缀`:`后跟路径命名树状对象中给定路径上的 blob 或树，该对象由冒号之前的部分命名。 `:path`（冒号前有一个空白部分）是下面描述的语法的一种特殊情况：记录在给定路径的索引中的内容。`./`以or开头的路径`../`相对于当前工作目录。给定的路径将被转换为相对于工作树的根目录。这对于从与工作树具有相同树结构的提交或树中寻址 blob 或树最有用。

请注意，`<path>`这里是相对于项目**顶层目录的****完整**路径，即带有目录的目录。（或者，更准确地说，是“ *<revision>* ”，通常可以是任何*<tree-ish>*，即代表树的东西。）**`.git/`**

 ****如果要使用相对于当前目录的路径，则需要使用`./<path>`语法（或`../path`从当前目录向上）。

^(**编辑 2015-01-15：**添加了有关相对路径语法的信息)

* * *

在大多数情况下，您可以使用低级（管道）`git cat-file`命令获得相同的输出：

```
git cat-file blob HEAD^:main.cpp > old_main.cpp 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-05-20T21:18:32.797

`>`只是为了添加 Jakub 的答案：如果您只对浏览终端中的文件内容感兴趣，您甚至不必将输出重定向到带有的文件。你可以运行`$ git show 58a3db6:path/to/your/file.txt`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2021-01-29T14:02:46.740

## 单一用例

为了获得一致的结帐行为，包括`autocrlf`等，请使用辅助文件夹（例如 TEMP）并从旧/不同的文件状态恢复文件状态，如下所示：

```
git --work-tree TEMP/ restore -s <commit> main.cpp
mv TEMP/main.cpp old_main.cpp 
```

笔记：

```
git show <commit>:main.cpp > old_main.cpp 
```

.. 只会从存储库中生成原始读取。

## 使用第二个工作树 - 匿名或链接

为了更舒适地使用替代文件状态（无需重命名），请使用辅助“匿名”目录作为（长期）并行工作树，如下所示：

```
# one time setup
mkdir WD2
cd WD2
echo gitdir: WD1 > .git

# operate freely here with an alternative file set while the same branch is checked out in git
git restore -s <commit> main.cpp 
```

（WD2：辅助目录的路径。WD1：主目录的路径 - 绝对或相对）

注意：任何类型的 git 项目工作（恢复 / 添加 / 提交 / 切换 ...，构建任务）都可以使用该替代文件集完成 - 就好像 WD1 中的工作树文件突然被交换了一样。硬链接可用于有效地镜像大型存储库中未更改的文件。

同样，可以通过[git-worktree](https://git-scm.com/docs/git-worktree/)使用“链接的工作树” （自 git v2.6.7 以来的新功能）。这会导致更多的 git 开销，但允许同时在不同的分支（或分离的头）上签出和工作，而无需使用额外的 repo。

# .net - 64 位的 Exiv2（或其他 EXIF 编写器）

> ID：888417
> 
> 赞同：0
> 
> 时间：2009-05-20T14:52:32.170
> 
> 标签：.net, 64-bit, jpeg, exif, exiv2

我需要一种将 EXIF 标记从 .NET 代码添加到 jpeg 图像的非破坏性方式。到目前为止，我发现 Exiv2 和 .NET 包装器 Exiv2net 在添加或更新标签时效果很好。但是，我的代码需要在 64 位机器上运行（并且由于其他原因编译为 64 位），在我看来，Exiv2 代码只能编译为 32 位。

因此，我正在寻找使用 64 位版本的 Exiv2 和 Exiv2net 或完全使用其他工具包的人。有没有人见过这样的事情？

顺便说一句，WPF 中的 BitmapMetadata 在更新时会删除 EXIF 标记，并且不适用于我的目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-11-12T08:45:00.113

如果你知道你的目标系统会有一个 Perl 解释器，你可以捆绑[exiftool](http://www.sno.phy.queensu.ca/~phil/exiftool/)并调用它来代表你的应用程序工作。您甚至可以将其[编译为独立的可执行文件](http://web.archive.org/web/20080822004405/http://www.expertsrt.com/tutorials/Matt/perlPAR.html)。

# java - envers + hibernate 入门（简单和完整的示例）

> ID：888426
> 
> 赞同：3
> 
> 时间：2009-05-20T14:53:51.077
> 
> 标签：java, hibernate, hibernate-envers

我有 Hibernate 工作，想尝试添加[Envers 审计/修订功能](http://www.jboss.org/envers/)，但似乎无法弄清楚需要什么。（我的示例编译并运行正常，我获得了常规的 Hibernate 功能，但我的数据库中没有出现审计表。）以前有人做过吗？它是否适用于使用 HSQLDB 方言的 H2 数据库？网上有没有简单**完整**的示例程序？

**编辑：**让我稍微改一下。最后，我希望我的构建过程创建一个 .jar 文件，我可以将其安装在另一台计算机上，并使用适当的 .properties 文件和 JDBC 驱动程序创建（或允许我创建）适当的数据库表（如果它们不存在）。我怎样才能做到这一点？

**编辑：**到目前为止，如果我想运行 Jamie B 建议的 ant 任务，我必须调整我的类路径，以便它找到隐藏在 Hibernate 工具 zip 中的 envers jar 文件和[hibernate-tools jar 文件。](https://stackoverflow.com/questions/952084/where-the-heck-is-org-hibernate-tool-ant-hibernatetooltask/952775#952775)而且我还没有让事情奏效。如果/当我这样做时，我想也许我可以创建一个 SQL 文件并将其作为资源放在我的最终 .jar 文件中，然后我可以在我的程序本身中使用它。（尽管考虑到安全问题，我的脑海中出现了一面红旗……嗯……）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-05T14:37:53.423

听起来您正在寻找以下休眠属性：

```
hibernate.hbm2ddl.auto 
```

从[文档](http://docs.jboss.org/hibernate/stable/core/reference/en/html/configuration-optional.html)中：

> 创建 SessionFactory 时自动验证模式 DDL 或将其导出到数据库。

这会自动创建根据您设置的[envers 属性命名的模式表。](http://www.jboss.org/files/envers/docs/index.html#configuration)不需要额外的库或 ant 任务。

例如，我将它添加到`hibernate.cfg.xml`我`update`的开发数据库中。您还可以使用 Hibernate 的`configuration`对象以编程方式添加此属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T20:27:00.270

您是否阅读了参考文档的第 6 章（www.jboss.org/file-access/default/members/envers/downloads/envers-1.2.0.ga-hibernate-3.3.pdf）？看起来 _AUD 表不是以标准 Hibernate 方式创建的；有一个 AntTask 可以增强它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-11-18T09:56:41.600

经过一些实验后，我用 envers 生成了工作表

我使用了这些参数 hibernate.hbm2ddl.auto=create-drop

出现错误是因为表存在，所以我认为，该参数 hibernate.hbm2ddl.auto=update 将解决它

日志：

```
 5755 [main] INFO org.hibernate.cfg.HbmBinder - Mapping class: myappcompany.base.Company_AUD -> company_AUD
5782 [main] INFO org.hibernate.cfg.HbmBinder - Mapping class: org.hibernate.envers.DefaultRevisionEntity -> REVINFO
5915 [main] INFO org.hibernate.impl.SessionFactoryImpl - building session factory
6746 [main] INFO org.hibernate.impl.SessionFactoryObjectFactory - Not binding factory to JNDI, no JNDI name configured
6784 [main] INFO org.hibernate.tool.hbm2ddl.SchemaExport - Running hbm2ddl schema export
6785 [main] INFO org.hibernate.tool.hbm2ddl.SchemaExport - exporting generated schema to database
9004 [main] ERROR org.hibernate.tool.hbm2ddl.SchemaExport - Unsuccessful: create table company (ID bigint not null auto_increment, CREATED datetime, CREATED_BY varchar(255), MODIFIED datetime, MODIFIED_BY varchar(255), NAME varchar(255) not null, primary key (ID))
9004 [main] ERROR org.hibernate.tool.hbm2ddl.SchemaExport - Table 'company' already exists
10227 [main] INFO org.hibernate.tool.hbm2ddl.SchemaExport - schema export complete 
```

我的配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:p="http://www.springframework.org/schema/p" xmlns:util="http://www.springframework.org/schema/util"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.5.xsd">

    <!--
    Data Source config 
     -->
    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close" p:driverClassName="${jdbc.driver}" p:url="${jdbc.url}"
        p:username="${jdbc.username}" p:password="${jdbc.password}" />

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager"
        p:entity-manager-factory-ref="entityManagerFactory" />

    <!-- 
    JPA config   
    -->
    <tx:annotation-driven />

    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
        p:persistence-xml-location="${persistence.xml.location}"
        p:data-source-ref="dataSource">
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"
                p:showSql="true" p:generateDdl="true">
            </bean>
        </property>
        <property name="jpaProperties">
            <value>
                hibernate.ejb.naming_strategy=org.hibernate.cfg.DefaultNamingStrategy
                hibernate.dialect=${hibernate.dialect}
                hibernate.hbm2ddl.auto=${hibernate.hbm2ddl.auto}
            </value>
        </property>
    </bean>

    <bean
        class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />
</beans> 
```

过几天我会做一个完整的例子

# c# - 在 Vista 中获取便携式设备的路径

> ID：888427
> 
> 赞同：3
> 
> 时间：2009-05-20T14:53:52.150
> 
> 标签：c#, .net, windows-vista

我正在尝试编写一个快速应用程序来修复我的 MP3 播放器上的 ID3 标签，但遇到了一个烦人的障碍。当我将 MP3 播放器插入 USB 时，它显示在 Vista 中的便携式设备类别下，并且没有分配驱动器号。我正在使用 Vista x64 Home Premium 和 .NET 3.5。

路径类似于“计算机\MP3 设备”

尝试仅使用该路径是行不通的，并且据我所见，没有 SpecialFolder 指向我要到达的位置。我试过打开磁盘管理并分配一个驱动器号，但便携式设备没有出现。

我几乎只想能够做一个 Directory.GetFiles(...)。有没有办法让我做到这一点？有没有其他人在Vista中遇到过这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T14:58:38.023

如果它不作为大容量存储设备出现，则不会映射到文件系统中。

# java - Weblogic - 如何关闭服务器进行维护？

> ID：888430
> 
> 赞同：0
> 
> 时间：2009-05-20T14:54:00.933
> 
> 标签：java, jakarta-ee, weblogic

我需要关闭 Weblogic 10.3 中的服务器（它将只有一个应用程序部署）并在用户请求应用程序时显示“维护中”页面。

有没有办法使用两个托管服务器或 WLST 以某种方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-23T04:52:16.527

我的第一个想法是通过 nginx 或 apache（或 tomcat）代理请求我的第二个想法是您将托管服务器放在集群中，当应用程序离线时，集群解析为显示维护页面的托管服务器. 第三个想法是，如果 dns 解析为 myserver.mydomain.com:9333/ 您可以停止一个托管服务器并启动另一个，您的客户不会知道差异，想知道客户浏览器中的缓存如何影响这一点？

# sql-server-2005 - 在 SQL 程序集中找不到类

> ID：888435
> 
> 赞同：0
> 
> 时间：2009-05-20T14:54:26.613
> 
> 标签：sql-server-2005, assemblies, clr

我正在尝试制作我的第一个 CLR 程序集\存储过程。我已经使用 CSC 编译了代码，并将程序集添加到 SQL Server。程序集出现了，但课程似乎不见了。

C# 代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;
using Microsoft.SqlServer.Server;

namespace TextFunctions

public class RegularExpressions
{
[Microsoft.SqlServer.Server.SqlFunction]
public static string RegExReplace(string input, string pattern, string replacement)
    {

        Regex Reginstance = new Regex(pattern);

        return Reginstance.Replace(input, replacement);

    } 
```

}

结束 C# 代码

创建功能代码

```
CREATE Function RegExReplace(@Input NVARCHAR(512),@Pattern NVARCHAR(127), @Replacement     NVARCHAR(512))
RETURNS NVARCHAR(512) EXTERNAL NAME RegEx.RegularExpressions.RegExReplace 
```

错误在程序集“RegEx”中找不到类型“RegularExpressions”。

1）你能看到我在做什么粗暴吗？

2) sql server 中是否有一个表或视图可以让我查看程序集中的类和函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T15:00:49.237

根据您的代码片段，您的`RegularExpressions`类位于`TextFunctions`命名空间中。

更改 T-SQL 代码以使用 TextFunctions.RegularExpressions.RegExReplace 应该可以修复它。

# configuration - 有什么方法可以将部分添加到 ConfigurationManager 不会解析的 .config 文件中

> ID：888445
> 
> 赞同：3
> 
> 时间：2009-05-20T14:56:17.780
> 
> 标签：configuration, web-config, app-config

我不想为我的应用创建单独的配置文件，而是将数据存储在 web.config 中。

我只想在其中放置一些 XML 并手动解析它，因为 ConfigurationManager 的当前实现不适合我的情况。

但是，如果没有虚拟类和属性，我无法在其中添加我的 XML，而不会出现配置错误：解析器错误消息：无法识别的元素 XXXXX。即使我创建了虚拟配置类，我也无法在所有情况下都修复此错误......

有什么方法可以标记我的 XML 不被解析，以便我可以使用 System.XML 手动获取数据。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T20:42:09.187

使用 System.Configuration.IgnoreSectionHandler。

例子：

```
<configuration>
  <configSections>
    <section 
        name="myCustomSection" 
        type="System.Configuration.IgnoreSectionHandler, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" 
        allowLocation="false" />
  </configSections>
...
  <myCustomSection>
     ...
  </myCustomSection>
...
</configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T20:43:41.773

如果您想将数据存储在 .configs 中，我建议您创建一个自定义配置部分

www.codeproject.com/KB/cs/CustomConfigurationSectio.aspx

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T20:39:49.007

我认为你不能这样做——如果你在 *.config 文件中玩弄，你需要符合配置文件的 XML 模式——这意味着，你需要根据指定的模式来设置你的部分，如果在这种情况下，ConfigurationManager 将能够解析它们（并且会这样做）。

如果您需要不符合标准 .NET 配置架构的额外配置信息，您将不得不使用额外的、单独的配置文件 - 我没有看到任何其他方式，抱歉。

马克

# c# - 用于根据收件人过滤附件的 Outlook 2007 插件

> ID：888454
> 
> 赞同：0
> 
> 时间：2009-05-20T14:58:02.410
> 
> 标签：c#, outlook, office-2007

我的问题是我需要将附件邮件发送给域用户和非域用户。域用户将收到附件的 .lnk，而非域用户将收到物理文件。

现在，我正在为域用户捕获 Outlook 的发送事件和内部划分的邮件，我创建了文件的 .lnk 并将其附加并发送给用户。至于非域用户，我附加了物理文件并发送给用户。但是这些事情是通过内部发送两封邮件来完成的，所以我无法维护 CC、BCC 信息。我需要在一封邮件中完成这些事情。因此，可以在 Outlook 插件中根据收件人过滤附件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T22:07:02.730

我不认为你可以在前景层面做到这一点。我更倾向于通过编写接收器在交换 smtp 级别执行此操作。

编辑：

[http://msdn.microsoft.com/en-us/library/aa579185.aspx](http://msdn.microsoft.com/en-us/library/aa579185.aspx) [http://msexchangeteam.com/archive/2006/12/04/431755.aspx](http://msexchangeteam.com/archive/2006/12/04/431755.aspx) [http://www.msexchange.org/articles_tutorials/ exchange-server-2007/planning-architecture/understanding-transport-agents-part1.html](http://www.msexchange.org/articles_tutorials/exchange-server-2007/planning-architecture/understanding-transport-agents-part1.html)

# php - 将 GET 请求发送到基于 POST 的脚本？

> ID：888459
> 
> 赞同：0
> 
> 时间：2009-05-20T14:58:40.690
> 
> 标签：php, forms

我的网站上有一个基于 POST 的搜索功能。但是，现在我希望能够提供搜索某些关键字的链接，但这当然是不可能的，因为表单不处理 GET 请求。有没有解决的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T15:01:04.353

使用超级全局

```
$_REQUEST 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T15:01:33.447

将表单的方法设置为 GET

```
<form action="/search" method="GET"> 
```

如果服务器上的搜索应用程序允许通过 get 进行搜索，这将起作用。请注意，无论如何您都应该使用 GET 进行搜索。POST是进行修改和发布数据。您正在“获取”搜索结果，因此请使用 GET。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T15:02:11.947

您可以使用 javascript 从链接中发布表单。如何执行此操作的示例位于此处：

[http://mentaljetsam.wordpress.com/2008/06/02/using-javascript-to-post-data-between-pages/](http://mentaljetsam.wordpress.com/2008/06/02/using-javascript-to-post-data-between-pages/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T15:04:20.553

我会考虑更改您的表单以使用 GET 进行操作。

将 GET 用于搜索机制是合适的，因为 GET 方法用于幂等请求。即你可以重复执行它们而不用担心改变状态。POST 的语义是您正在发布数据并执行更改（无论在这种情况下是否*真的*发生）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T15:49:00.463

```
<input type="text" id="searchcat"></input>
<form method="POST">
    ...
    <input type="submit" onclick="this.form.action='/search?cat=' + document.getElementById('searchcat').value"></input>
</form> 
```

也许这个解决方案会有所帮助？当然，“searchcat”控件似乎是一种组合框。并且 onclick 处理程序更好地用作 JS 函数，而不是内联...

实际上，当您单击此提交时 - 浏览器会生成所有 HTTP 标头，从您的表单数据中收集请求正文，然后使用 url 发送请求，其中包含 GET 变量本身。这样，您将在搜索服务器端处理程序中同时拥有 GET 和 POST 数据。

通过处理控件上的 onChange 来更改实际中的 GET 变量会更好。但是这个例子在没有 IDE 的情况下更加冗长且难以阅读。

# php - 如何在 PHP 中对大文件进行 base64 解码

> ID：888461
> 
> 赞同：7
> 
> 时间：2009-05-20T14:58:53.640
> 
> 标签：php, memory, base64

我的 PHP Web 应用程序有一个 API，可以接收经过 base64 编码的相当大的文件（最大 32 MB）。目标是将这些文件写入我的文件系统的某个位置。当然是解码。什么是最不占用资源的方法？

**编辑：**通过 API 接收文件意味着我的 PHP 应用程序中有一个 32MB 的字符串，而不是磁盘某处的 32MB 源文件。我需要将该字符串解码到文件系统上。

使用 PHP 自己的 base64_decode() 并没有减少它，因为它使用*大量*内存，所以我一直遇到 PHP 的内存限制（我知道，我可以提高这个限制，但我对允许 PHP 使用 256MB 左右感觉不好每个进程）。

还有其他选择吗？我可以手动做吗？还是将文件编码写入磁盘并调用一些外部命令？任何想法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-05-21T20:51:00.707

尽管这有一个公认的答案，但我有一个不同的建议。

如果您从 API 中提取数据，则不应将整个有效负载存储在变量中。使用 curl 或其他 HTTP 提取器，您可以自动将数据存储在文件中。

假设您通过一个简单的 GET url 获取数据：

```
$url = 'http://www.example.com/myfile.base64';
$target = 'localfile.data';

$rhandle = fopen($url,'r');
stream_filter_append($rhandle, 'convert.base64-decode');

$whandle = fopen($target,'w');

stream_copy_to_stream($rhandle,$whandle);
fclose($rhandle);
fclose($whandle); 
```

好处：

*   应该更快（减少大量变量的复制）
*   很少的内存开销

如果您必须从临时变量中获取数据，我可以建议这种方法：

```
$data = 'your base64 data';
$target = 'localfile.data';

$whandle = fopen($target,'w');
stream_filter_append($whandle, 'convert.base64-decode',STREAM_FILTER_WRITE);

fwrite($whandle,$data);

fclose($whandle); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-20T15:05:16.637

以更小的块解码数据。Base64 数据的四个字符等于“Base256”数据的三个字节。

因此，您可以将每个 1024 个字符分组并将它们解码为 768 个八位字节的二进制数据：

```
$chunkSize = 1024;
$src = fopen('base64.data', 'rb');
$dst = fopen('binary.data', 'wb');
while (!feof($src)) {
    fwrite($dst, base64_decode(fread($src, $chunkSize)));
}
fclose($dst);
fclose($src); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-05T15:30:35.020

传输 32Mb 字符串不是一个好主意。但我有一个适合我的任务的解决方案，它可以接受从浏览器到应用服务器的任何大小的文件。算法： **客户端**

1.  Javascript：使用 FileReader 和 readAsDataURL() 从 INPUT 读取文件到 FILE var。
2.  将 FILE 中的所有数据从开头剪切到第一个“，”位置，将其与 array_chunks 拆分为 max_upload_size/max_post_size php var。
3.  发送带有 UID、块编号和块数量的块并等待响应，然后一个接一个地发送另一个块。

**服务器端** 写入每个块，直到最后一个。然后用流做base64：

```
$src = fopen($source, 'r');
$trg = fopen($target, 'w');
stream_filter_append($src, 'convert.base64-decode');
stream_copy_to_stream($src, $trg);
fclose($src);
fclose($trg); 
```

...现在您在 $target 本地路径中有您的 base64 解码文件。笔记！你不能读写同一个文件，所以 $source 和 $target 必须不同。

# .net - MSXML2.SAXXMLReader.6.0 不解析

> ID：888462
> 
> 赞同：0
> 
> 时间：2009-05-20T14:59:40.627
> 
> 标签：.net, xml, sax

我正在使用 .net 框架的 XmlTextWriter 从 C# 中写出一些 xml。这工作正常。我写出的一些字符串包含字符值 5（注意我不是指字符 '5'，而是指 ascii 值 5）。

现在，我从 xml 规范中了解到这个字符在 xml 中是非法的。但是，我不在乎它是否非法，我希望它在我的 xml（不合格）文档中。这样我就可以将可能包含一些二进制数据的字符串写入文档。

好的，所以 System.Xml.XmlTextWriter 会把这些非法的 xml 字符写好，并在 xml 中将其编码为`"&#5x;"`. 但是，我想通过使用 MSXML2.SAXXMLReader.6.0 在 C++ 应用程序中阅读它们。此解析器在遇到这些字符之一时会引发 fatalError。

我尝试修改解析器的一些属性以使其工作。我的理解是 IE 在内部使用了这个解析器，我可以用 IE 加载非法的 xml ok。那么，当我不能解析它时，IE 是如何解析它的。

我错过了什么吗？IE 是否使用不同的解析器。有没有办法让 MSXML2.SAXXMLReader.6.0 解析器工作？我是否需要使用不同的解析器（如果需要，您能否推荐一个具有可用源代码的解析器，以便如果它不符合我的要求，我可以修复它）？

我可以在 .Net 解析器上设置一个属性，以允许解析这些非法字符。我想我正在寻找一个可以在 C++ 中与 SAX 解析器一起使用的等价物。 [http://msdn.microsoft.com/en-us/library/system.xml.xmlwritersettings.checkcharacters.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlwritersettings.checkcharacters.aspx)

非常感谢，
-斯科特

**注意**我不相信 CDATA 部分会允许对这个字符进行编码。请参阅此处： http: [//msdn.microsoft.com/en-us/library/ms256076](http://msdn.microsoft.com/en-us/library/ms256076(VS.85).aspx)
(VS.85).aspx ，即使它确实如此。我不想使用 CDATA 部分，我想在属性值中使用字符。我也意识到我可以对它进行base64编码，但我也不想这样做......我想违法，我希望能够解析非法的xml。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T15:16:19.640

不，不可能解析 XML 中的控制字符。

准确地说，这将使您的文档不同于 XML 文档。

这是规范的硬连线部分。如果要解析非法字符，则必须编写自己的 NON-COMPLIANT 解析器。

按照：

[http://lists.xml.org/archives/xml-dev/199804/msg00502.html](http://lists.xml.org/archives/xml-dev/199804/msg00502.html)

# wpf - 密码框绑定

> ID：888466
> 
> 赞同：12
> 
> 时间：2009-05-20T15:00:38.177
> 
> 标签：wpf, mvvm, binding, passwordbox

我刚刚开始使用 MV-VM 和 WPF，并且在理解一些绑定问题时遇到了问题。

我有一个登录页面，其中包含一个`ComboBox`和一个`PasswordBox`. `ComboBox`看起来像这样：

```
<ComboBox Name="comboBox1" SelectedItem="{Binding Path=Username}"> 
```

这很好用 - 每次`SelectedItem`更改时我的值都会更新`ComboBox`！

在我的 ViewModel 中，我有一个`ICommand`使用此方法来确定登录按钮是否处于活动状态：

```
public bool CanLogin()
{
    return !string.IsNullOrEmpty(Username) && !string.IsNullOrEmpty(Password);
} 
```

所以我的问题是我没有`PasswordBox`绑定到 ViewModel 上的 Password 属性 - 所以我无法判断它何时更新。

那么如何获得`PasswordBox`ViewModel 的值呢？`PasswordBox`我读过的所有内容都只是说出于安全原因不要绑定 a 。我会简单地取消对 CanLogin() 的密码限制，但我需要将值传递给 AccountService。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-05-20T16:37:32.037

有趣的。

查看此博客文章，看看它是否对您有所帮助。 [http://blog.functionalfun.net/2008/06/wpf-passwordbox-and-data-binding.html](http://blog.functionalfun.net/2008/06/wpf-passwordbox-and-data-binding.html)

显然链接现在已经死了，所以这是原始解决方案（在[此处](http://www.wpftutorial.net/PasswordBox.html)找到）：

你可以使用附加的属性来创建一个这样的助手：

```
公共静态类 PasswordHelper
{
    公共静态只读 DependencyProperty PasswordProperty =
        DependencyProperty.RegisterAttached("密码",
        typeof（字符串），typeof（密码助手），
        新的 FrameworkPropertyMetadata(string.Empty, OnPasswordPropertyChanged));

    公共静态只读 DependencyProperty AttachProperty =
        DependencyProperty.RegisterAttached("附加",
        typeof(bool), typeof(PasswordHelper), new PropertyMetadata(false, Attach));

    私有静态只读 DependencyProperty IsUpdatingProperty =
       DependencyProperty.RegisterAttached("IsUpdating", typeof(bool),
       类型（密码助手））；

    公共静态无效 SetAttach（DependencyObject dp，布尔值）
    {
        dp.SetValue（附加属性，值）；
    }

    公共静态布尔 GetAttach(DependencyObject dp)
    {
        返回 (bool)dp.GetValue(AttachProperty);
    }

    公共静态字符串 GetPassword(DependencyObject dp)
    {
        返回（字符串）dp.GetValue（密码属性）；
    }

    公共静态无效 SetPassword（DependencyObject dp，字符串值）
    {
        dp.SetValue（密码属性，值）；
    }

    私有静态布尔 GetIsUpdating(DependencyObject dp)
    {
        返回（布尔）dp.GetValue（IsUpdatingProperty）；
    }

    私有静态无效 SetIsUpdating（DependencyObject dp，布尔值）
    {
        dp.SetValue(IsUpdatingProperty, value);
    }

    私有静态无效 OnPasswordPropertyChanged（DependencyObject 发件人，
        DependencyPropertyChangedEventArgs e)
    {
        PasswordBox passwordBox = 作为 PasswordBox 的发件人；
        passwordBox.PasswordChanged -= PasswordChanged；

        if (!(bool)GetIsUpdating(passwordBox))
        {
            passwordBox.Password = (string)e.NewValue;
        }
        passwordBox.PasswordChanged += PasswordChanged;
    }

    私人静态无效附加（DependencyObject发件人，
        DependencyPropertyChangedEventArgs e)
    {
        PasswordBox passwordBox = 作为 PasswordBox 的发件人；

        如果（密码框 == 空）
            返回;

        if ((bool)e.OldValue)
        {
            passwordBox.PasswordChanged -= PasswordChanged；
        }

        if ((bool)e.NewValue)
        {
            passwordBox.PasswordChanged += PasswordChanged;
        }
    }

    私有静态无效密码更改（对象发送者，RoutedEventArgs e）
    {
        PasswordBox passwordBox = 作为 PasswordBox 的发件人；
        SetIsUpdating（密码框，真）；
        设置密码（密码框，密码框.密码）；
        SetIsUpdating（密码框，假）；
    }
}

```

用它：

```
<PasswordBox w:PasswordHelper.Attach="True" 
             w:PasswordHelper.Password="{Binding Text, ElementName=plain, Mode=TwoWay}" 
             Width="100"/> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2010-07-09T16:16:35.693

[我在这里](http://gist.github.com/468331)发布了一个 GIST ，它是一个可绑定的密码框。

# .net - 针对数据库的 vb.net 文本框验证？

> ID：888470
> 
> 赞同：1
> 
> 时间：2009-05-20T15:00:59.720
> 
> 标签：.net, validation, user-interface, textbox, event-handling

我的表单中的一个字段是用户输入 id 的文本框。这是另一个表的外键，所以我需要在让它们提交之前针对该表反弹数据。我宁愿不使用 textchanged 因为他们键入的每个字母都可能引发另一个查询，失去焦点只会显示错误或在他们已经在另一个字段中时验证（不确定如果他们只是单击提交是否会触发）。

我宁愿不要强迫某人的注意力留在那个领域，但也许这是最好的方式？

有没有一种方法可以休眠并等待 X 秒内是否有另一个传入的键事件？如果是这样，我可以看看它是一个字母或数字还是一个制表符或返回？

还有另一个我应该挂钩的用户友好的事件吗？

我应该拉下表格该列的副本并在那里实时比较吗？（我可以处理添加一个刷新按钮来拉一个新的缓存）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T15:05:06.857

您可能需要考虑为此使用计时器控件。

每次按键时禁用和启用控件，以重置超时。

然后当定时器事件触发时，禁用控件并查询数据库。

编辑：我仍然认为你最好的选择可能是失去焦点事件。

# c# - C# 是否有任何高抽象级别的密码库？

> ID：888473
> 
> 赞同：1
> 
> 时间：2009-05-20T15:01:57.797
> 
> 标签：c#, cryptography

[CodingHorror 的加密冒险](http://www.codinghorror.com/blog/archives/001267.html)和 Coda Hale 对此的评论让我想知道是否有任何加密库提供 Coda 所描述的加密服务类型。即为特定目的提供正确的当前密码学方法。Coda 提到了 BouncyCastle，但该库没有提供我正在寻找的高度抽象的加密方法。

例如，如果您需要加密一封电子邮件，您会选择专门用于该目的的方法或类，但加密诸如查询字符串或状态信息之类的短期消息可能会在不同的类/方法中提供。有这样的图书馆吗？可以保持最新的存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T18:40:16.233

听起来您正在寻找非常简单的东西？我不认为你会找到那个。密码学并不简单。我建议学习[System.Security.Cryptography 命名空间](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aspx)中的类。考虑到一些加密算法有多复杂，我想说这些类中的许多方法仍然符合“高级抽象”的条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T20:51:27.450

您可能想看看 Jeff Atwood 很久以前在 CodeProject.com 上写的一篇文章

[http://www.codeproject.com/KB/security/SimpleEncryption.aspx](http://www.codeproject.com/KB/security/SimpleEncryption.aspx)

您可能仍然需要编写一些包装类来进一步抽象它，但我认为这是一个好的开始。

# msbuild - 发布时出现无法加载类型错误

> ID：888478
> 
> 赞同：9
> 
> 时间：2009-05-20T15:02:22.447
> 
> 标签：msbuild, cruisecontrol.net, aspnet-compiler

尝试使用 aspnet_compiler 发布后出现以下错误

```
errorASPPARSE: Circular file references are not allowed.
errorASPPARSE: Unknown server tag 'uc2:FAQ'.
errorASPPARSE: Could not load type 'CompoundControls.BBar'.
errorASPPARSE: Could not load type 'CompoundControls.PPIndicator'.
errorASPPARSE: Unknown server tag 'm:Calendar'.
errorASPPARSE: Could not load type 'SharedUserControls.VCDetails'.
errorASPPARSE: Could not load type 'SharedUserControls.VPDetails'.
errorASPPARSE: Could not load type 'SharedUserControls.VPrDetails'.
errorASPPARSE: Could not load type '.PopupPaymentCardCCVHelp'. 
```

任何想法如何解决它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-08-23T16:05:02.803

有几个原因会导致您`Circular file references are not allowed`出错。

如果不查看项目的结构或代码，很难确定确切的原因。

但是，如果我要进行有根据的猜测，我会这样做：

*   查看下一个错误：`Unknown server tag 'uc2:FAQ'.`，似乎无法编译该用户控件。
*   这个用户控件也很可能是这里的争论点。其余的是`UserControl`未编译的结果。
*   如果是这样，则检查用户控件中对母版页/任何其他页面的任何引用（类似于`<%@ Reference Control="~/app.master" %>`ascx 文件中的内容）。

***此外***，当您在不知不觉中陷入这种情况（通过[批处理](http://msdn.microsoft.com/en-us/library/ms171473.aspx)）时，会发生用户控件的不那么明显的循环引用问题：

`PageA.aspx -> uc1.ascx -> PageB.aspx (batching) -> uc1.ascx -> PageA.aspx (batching)`

如果这是可能的原因，请尝试[`batch=false`](http://msdn.microsoft.com/en-us/library/s10awwz0.aspx)在您的配置中进行设置：

```
<configuration>
  <system.web>
    <!-- should prevent errorASPPARSE: Circular file references are not allowed -->
    <compilation batch="false" />
  </system.web>
</configuration> 
```

希望这可以帮助。

# c# - 使用 Unity 框架，注入 System.Windows.Forms.Form 页面

> ID：888479
> 
> 赞同：1
> 
> 时间：2009-05-20T15:02:23.757
> 
> 标签：c#, winforms, dependency-injection

我有一个表格：

```
public partial class mdiAuthenticationForm : Form
    {
        public Services.Authentication.IAuthentication Authenticator { get; set; 
        public Services.Authentication.IAuthorization Authorizor { get; set; } 
```

我想为上面的两个属性注入具体的类。

我对它们每个都有一个类型，并且正在使用 app.config 获取配置信息。但是，我不想为每个页面创建一个接口，只是为了注入，那么，我怎样才能注入到每个页面中呢？

基本上，我应该在下面的 type 元素中放入什么 type 属性，或者，我该怎么做？

```
 <type type="" mapTo="mdiAuthenticationForm,project">
  <typeConfig extensionType="Microsoft.Practices.Unity.Configuration.TypeInjectionElement, Microsoft.Practices.Unity.Configuration">
      <property name="Authenticator" propertyType="Services.Authentication.IAuthentication,project">
        <dependency name="mssqlauth" />
      </property>
    <property name="Authorizor" propertyType="Services.Authentication.IAuthorization,project">
      <dependency name="mssqlautz" />
    </property>
  </typeConfig>
  </type> 
```

顺便说一句，我正在为此使用 Unity 框架。

谢谢你。

编辑：我得到容器，然后我试图通过使用这个注入：

```
Container.Configure<InjectedMembers>().ConfigureInjectionFor<mdiAuthenticationForm>(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T03:45:08.187

我让它工作，不漂亮，但它工作。最后一个问题是我必须在我的界面中包含 Form.ShowDialog。

首先是我从 Program.cs 创建和调用表单的代码的主要部分，然后是我的界面。我希望这是模态的，这就是我使用 ShowDialog 的原因。我还将这两个属性移到了一个新的控制器中，但我仍然要设置一个属性，以确保它正常工作。

```
 container.Configure<InjectedMembers>().ConfigureInjectionFor<IAuthenticationForm>();
    containers.Configure(container);
    IAuthenticationForm f = container.Resolve<IAuthenticationForm>();
    f.ShowDialog();

public interface IAuthenticationForm
{
    Optimal4.Services.Authentication.IAuthorization Authorizor { get; set; }
    void checkAuthentication();
    System.Windows.Forms.DialogResult ShowDialog();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T04:16:41.450

基本上你想使用属性注入来注入 mdiAuthenticationForm 的依赖项。你不能做类似下面的事情吗？

在配置文件中添加类型映射：

```
<container>
  <types>
    <type type="IAuthentication,PutAssemblyNameHere" mapTo="Authentication,PutAssemblyNameHere"/>
    <type type="IAuthorization,PutAssemblyNameHere" mapTo="Authorization,PutAssemblyNameHere"/>
    <type type="mdiAuthenticationForm,PutAssemblyNameHere"/>
  </types>
</container> 
```

将依赖属性放在身份验证和授权属性上。

```
[Dependency]
public Services.Authentication.IAuthentication Authenticator { get; set;} 
[Dependency]
public Services.Authentication.IAuthorization Authorizor { get; set; } 
```

然后最后在您的代码中，执行以下操作以获取 mdiAuthenticationForm 的实例：

```
mdiAuthenticationForm form = container.Resolve<mdiAuthenticationForm>(); 
```

如果您不想在配置文件中添加 mdiAuthentication，您还可以执行以下操作：

```
mdiAuthenticationForm form = new mdiAuthenticationForm();
container.BuildUp<mdiAuthenticationForm>(form); 
```

这应该解决对现有实例的依赖关系并将它们连接起来。

# javascript - 检测浏览器关闭/导航到其他页面并注销的最佳方法

> ID：888483
> 
> 赞同：8
> 
> 时间：2009-05-20T15:02:48.607
> 
> 标签：javascript, gwt, logout, onunload

我正在用 GWT 编写一个应用程序，我需要检测用户何时离开我的应用程序或何时关闭浏览器窗口（onUnload 事件）并执行注销（会话失效和其他一些清理任务）。注销操作由 servlet 执行。

我目前通过挂钩 onUnload() 事件并打开一个指向注销 servlet 的新窗口来执行此操作。

有一个更好的方法吗？欢迎任何其他建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T15:40:39.157

看起来 GWT 确实为此举办了一个活动。

[关闭事件](http://google-web-toolkit.googlecode.com/svn/javadoc/1.6/com/google/gwt/user/client/Window.ClosingEvent.html)。

看起来你需要实现一个[ClosingHandler](http://google-web-toolkit.googlecode.com/svn/javadoc/1.6/com/google/gwt/user/client/Window.ClosingHandler.html "关闭处理程序")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T15:04:59.337

为什么不制作一个非常短暂的会话 cookie，它会在每次页面加载时重置，然后添加一个跟踪 cookie。当用户返回时，您会注意到跟踪 cookie，但没有会话 cookie。使会话到期并在那时清除所有内容。

弹出窗口阻止程序会在阻止 onUnload 窗口打开时阻止您的会话清理，因为这是垃圾邮件发送者使用的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-11-09T22:56:13.690

这是关闭事件的工作方式：

```
Window.addWindowClosingHandler(new Window.ClosingHandler()
{
 @Override
 public void onWindowClosing(ClosingEvent event)
 {
  event.setMessage("Are you sure?");
 }
}); 
```

然后 GWT 让用户有机会说是或否。当然，您也可以在其中添加一个测试，看看他们是否有任何未保存的数据或您想要的任何数据。不设置消息或将其设置为 null 不会执行任何操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T00:28:01.743

做到这一点的方法是使用`Window.addWindowClosingHandler`@Carnell 和@BillLyons 所说的那样。但是我使用了一种附加技术来检测浏览器是否已关闭或是否再次访问该页面（通过刷新或返回导航）。

下面是一个可以帮助您的实用程序类。只需调用以下行`onModuleLoad`进行测试。

**使用示例**：

```
@Override
public void onModuleLoad() {
    if (BrowserCloseDetector.get().wasClosed()) {
        GWT.log("Browser was closed.");
    }
    else {
        GWT.log("Refreshing or returning from another page.");
    }
} 
```

**实用程序类**：

```
import com.google.gwt.user.client.Cookies;
import com.google.gwt.user.client.Window;

public class BrowserCloseDetector {
    private static final String COOKIE = "detector";
    private static BrowserCloseDetector instance;

    private BrowserCloseDetector() {
        Window.addWindowClosingHandler(new Window.ClosingHandler() {
            public void onWindowClosing(Window.ClosingEvent closingEvent) {
                Cookies.setCookie(COOKIE, "");
            }
        });
    }

    public static BrowserCloseDetector get() {
        return (instance == null) ? instance = new BrowserCloseDetector() : instance;
    }

    public boolean wasClosed() {
        return Cookies.getCookie(COOKIE) == null;
    }
} 
```

# image-processing - 形状描述符

> ID：888490
> 
> 赞同：0
> 
> 时间：2009-05-20T15:05:31.147
> 
> 标签：image-processing, shapes, contour

我有一个二进制蒙版的图像，我想表征蒙版中黑色区域的轮廓，我发现了几个功能来检测两个区域之间的边界，但只是作为一个新图像，但我想要的是描述这个边界，不是一个新的图像。Java高级成像或其他库中是否有任何功能可以应用于蒙版以检索黑色区域的几何形状的表示？表示可以是形状的矢量化、多边形近似、链码……我所发现的只是该问题的理论解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T16:49:10.197

您是否愿意编写一个遍历边界并收集边界像素列表的例程？如果你有这样一个列表，它会让你形成你心目中的描述符吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T21:26:36.197

[您可以尝试基于直方图的描述符，例如 SIFT、SURF 等。在 OpenCV 中，实现](http://opencv.willowgarage.com/documentation/cpp/common_interfaces_for_feature_detection_and_descriptor_extraction.html#descriptorextractor)了几个高级描述符 如果您的描述符需要仿射协变（尺度和旋转不变），我强烈建议您尝试 SIFT。[局部二进制模式](http://en.wikipedia.org/wiki/Local_binary_patterns)也是一种有效的选择。

# sql - 如何在插入期间将标识用作列值

> ID：888493
> 
> 赞同：4
> 
> 时间：2009-05-20T15:06:01.737
> 
> 标签：sql, sql-server, tsql

我有一个包含 SQL 语句的存储过程，类似于：

```
CREATE PROCEDURE SaveUser
@UserName nvarchar(10),
@FirstName nvarchar(150),
@LastName nvarchar(150)

AS
BEGIN

    INSERT INTO Users (UserName, FirstName, LastName)
    VALUES (@UserName, @FirstName, @LastName)

    SELECT SCOPE_IDENTITY()

END 
```

部分用户无法登录系统，没有用户名；但是，用户名字段上有一个唯一索引，因此我希望能够插入用户 ID #，这是一个自动递增字段，作为用户名。

有谁知道允许我执行类似操作的 MS SQL Server 方法或变量？

```
INSERT INTO Users (UserName, FirstName, LastName)
VALUES (ISNULL(@UserName, SCOPE_IDENTITY()),@FirstName,@LastName) 
```

**编辑**我现在的意图是使用类似下面的东西

```
DECLARE @NextID int
SET @NextID = IDENT_CURRENT(Users) + IDENT_INCR(Users)

INSERT INTO Users (UserName, FirstName, LastName)
VALUES (ISNULL(@UserName, @NextID), @FirstName, @LastName) 
```

我只想知道是否有一个内置方法可以保证这将是一致的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T15:13:12.737

插入 NULL 或随机字符串，然后使用 scope_identity 更新

```
INSERT INTO Users (UserName, FirstName, LastName)
VALUES (ISNULL(@UserName, CAST(NEWID() AS varchar(50)),@FirstName,@LastName)

UPDATE Users
SET @UserName = CAST(SCOPE_IDENTITY() AS int)
WHERE UserId = SCOPE_IDENTITY() 
```

（抱歉，如果 newid 没有直接投射......现在无法测试）

它可以用一个聚合来完成，但它不可靠（2次调用）快速连续等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T15:26:34.800

您也可以在检索时解决此问题，而不是复制 ID 列。例如，假设您让任意用户的用户名为 NULL。然后，您可以检索用户名，例如：

```
select 
   UserName = IsNull(UserName,UserId)
from WebUsers 
```

编辑：如果您喜欢名称的唯一约束，您可以使用计算列：

```
create table WebUsers (
    id int identity,
    name varchar(12),
    uniqueid as isnull(name,id)
)

create unique index ix_webusers_uniqueid on WebUsers (uniqueid) 
```

列 uniqueid 是一个计算列，无论何时使用它都会转换为 isnull(name,id)。使用此设置，您可以在一个查询中插入用户：

```
insert into WebUsers (name) values ('Dark Lord')
insert into WebUsers (name) values ('The Ring')
insert into WebUsers (name) values (NULL)
insert into WebUsers (name) values (NULL) 
```

但不能重复用户；以下将因错误而退出：

```
insert into WebUsers (name) values ('The Ring') 
```

您可以查询 uniqueid 以查找命名用户的用户名，或任何匿名用户的 id：

```
select uniqueid from WebUsers 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T15:11:32.100

您可以添加一个 AFTER INSERT 触发器，使用插入表中的 Identity 列的值更新 UserName 字段。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-01-21T20:30:13.183

对于使用 SQL Server 2008 或更高版本的任何人，有一个新功能可以很容易地解决此问题，并且无需进行任何应用程序或 Proc 更改：**过滤索引**。过滤索引允许您在索引上放置 WHERE 条件，以便索引将忽略这些值。在这种情况下，您可以忽略 null UserName 值，即使在唯一索引中也是如此。

语法如下：

```
CREATE UNIQUE INDEX IX_Users_UserName ON Users (UserName) 
                         WHERE UserName is not null 
```

使用过滤索引来解决这个特定问题也意味着您不需要将垃圾数据放入 UserName 字段中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-18T16:04:17.163

如何将其包装在事务中，并仅使用您的 spid 作为用户名。像这样：

```
CREATE PROC BlahBlah
...
BEGIN
BEGIN TRAN UserInsert
BEGIN TRY

    INSERT INTO Users (UserName, FirstName, LastName)    
    VALUES (COALESCE(@UserName,@@SPID), @FirstName, @LastName)

    IF @UserName IS NULL
    BEGIN
    DECLARE @MyUserID int  
    SET @MyUserID = (SELECT SCOPE_IDENTITY())

    UPDATE Users
    SET UserName = @MyUserID
    WHERE UserID = @MyUserID
    END
END TRY
BEGIN CATCH
    ROLLBACK TRAN UserInsert
    RETURN
END CATCH
COMMIT TRAN UserInsert
END 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T15:26:29.840

它必须分两步完成。在这种情况下，我将简单地使用 NEWID() 函数生成一个随机 GUID 值以用于用户名，然后使用更新语句对其进行更新。由于您使用存储过程，因此在这种情况下使用的步骤量不会导致重大问题。

关于 NEWID 的详细信息和它的使用可以在[这里找到](http://msdn.microsoft.com/en-us/library/aa276822.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-20T18:39:11.900

How about wrapping it in a transaction, and just using your spid for the UserName. Like this:

```
CREATE PROC BlahBlah
...
BEGIN
BEGIN TRAN UserInsert
BEGIN TRY

    INSERT INTO Users (UserName, FirstName, LastName)    
    VALUES (COALESCE(@UserName,@@SPID), @FirstName, @LastName)

    IF @UserName IS NULL
    BEGIN
    DECLARE @MyUserID int  
    SET @MyUserID = (SELECT SCOPE_IDENTITY())

    UPDATE Users
    SET UserName = @MyUserID
    WHERE UserID = @MyUserID
    END
END TRY
BEGIN CATCH
    ROLLBACK TRAN UserInsert
    RETURN
END CATCH
COMMIT TRAN UserInsert
END 
```

A few other points: - This seems like a really weird requirement. You may want to have a look at your design. - Beware of [SCOPE_IDENTITY() issues with parallel query plans](http://connect.microsoft.com/SQLServer/feedback/ViewFeedback.aspx?FeedbackID=328811). The [OUTPUT](http://msdn.microsoft.com/en-us/library/ms177564(SQL.90).aspx) clause is much safer at present, until the bug gets resolved.

# asp.net - ASP.Net Onclick 事件不适用于 ajaxcontroltoolkit

> ID：888495
> 
> 赞同：0
> 
> 时间：2009-05-20T15:06:16.197
> 
> 标签：asp.net, events, ajaxcontroltoolkit, onclick

我使用 vs2008 和 c# 设计了一个 Web 应用程序。我已经完成了许多版本，并且所有版本似乎都运行良好。

昨天我决定用 ajax 日历替换 de vs calendar，为此我使用了 ajaxcontroltoolkit。新日历也运行良好。

但是我表单中的按钮停止工作。

onclick 事件什么都不做。我已经改回旧日历，一切正常。

该按钮在后面的代码上调用一个方法。

那么，你们中的任何人都知道我做错了什么吗？还有其他方法可以做到这一点吗？

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T18:20:58.910

谢谢你的回答

我的问题是我在我的表单上使用这个**onsubmit="return setHourglass();**以便用户知道页面何时等待响应。

像这样的东西：

 **下面是脚本代码

函数 setHourglass() { document.body.style.cursor = 'wait'; }

我删除了它并且工作正常，但我真的不知道这种行为的动机：|

# sharepoint - 我需要一个可以在 Sharepoint 2007 中显示一个小时的字段

> ID：888496
> 
> 赞同：0
> 
> 时间：2009-05-20T15:06:37.603
> 
> 标签：sharepoint, sharepoint-2007

我在 Sharepoint 2007 中有一个网站。我需要创建一个页面，其中有一个字段，用户可以在其中输入一个小时（例如 22:00）。然后，我将进行一些 CAML 查询，要求获取小时数小于或大于特定小时数的页面。

我知道 Sharepoint 有 Datetimefield，但是这个只显示日期，你不能设置小时。

一些解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T20:53:35.170

也许我在这里遗漏了一些东西......但是你不能将小时存储在一个普通的 Int 字段数据类型中并对其进行 CAML 查询吗？

# ruby-on-rails - 您如何跟踪视图的页面浏览量

> ID：888498
> 
> 赞同：7
> 
> 时间：2009-05-20T15:06:50.813
> 
> 标签：ruby-on-rails, ruby

是否有此插件或我可以使用的 gem。当在控制器中调用视图时，我正在考虑将其写入表中。这是最好的方法吗？我看到stackoverflow有这个功能他们是怎么做到的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-20T15:34:03.927

[Google Analytics](http://www.google.com/analytics/) - 让 Google 或其他第三方分析提供商免费为您处理。我认为您不想在每个页面加载时都进行文件写入 - 可能代价高昂。另一种选择是将信息存储在内存中并定期写入数据库，而不是在每次页面加载时写入。

[编辑] 这是一个有趣的问题。[我就更有效的问题寻求帮助](https://stackoverflow.com/questions/888809/whats-more-costly-on-every-page-view-database-writes-or-file-writes)- 数据库写入与文件写入 - 那里也有一些很好的反馈。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T21:47:32.347

如果您只是想轻松获得一些东西，您可以使用实时分析提供程序，例如[W3 Counter](http://www.w3counter.com/)

它为您提供实时数据（与谷歌分析相反）并且部署相对简单（全局模板中的几行），但可能无法为您提供所需的粒度。我想这取决于您是否希望以编程方式在应用程序中显示/使用此信息或用于统计目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T15:18:36.907

显然，有第三方统计服务（Google Analytics、Mint 等），但如果您必须自己做，那么每次有人点击页面时进行写入将严重影响您的数据库。

我会将单个命中写入文件系统或 memcached 上的中间文件，然后每 10 到 15 分钟触发一个任务，该任务将解析​​该数据并将其插入数据库。

# php - 如何在eclipse中运行php脚本

> ID：888500
> 
> 赞同：8
> 
> 时间：2009-05-20T15:07:02.827
> 
> 标签：php, eclipse, scripting, eclipse-pdt

我安装了 Eclipse PDT-all-in-one-win32-2.0.0GA 和 WampServer 2.0。

我尝试在 Eclipse 中作为 PHP 脚本运行，但出现此错误：

“当前调试器没有任何已定义的 PHP 可执行文件。”

如何创建这个 .exe ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T18:21:16.883

> 好的，但我没有 php.exe。我只在我的项目中创建 Test.php。

为了运行 **.php* 文件，您需要安装 PHP，并且因为您已经安装了 WAMP，所以应该没问题。

> “当前调试器没有任何已定义的 PHP 可执行文件。”

如果您按照您所说的那样安装了 WAMP，请尝试在本地硬盘驱动器上查找*php.exe*，然后在 Eclipse 中设置指向它的路径（例如*c:\wamp\bin\php\php5.2.9-2\php .exe*）。转到*Window\Preferences\PHP\PHP Executables*并将此路径添加到列表中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T15:42:49.243

您无需创建此 .exe

在 Eclipse 中，您需要配置调试器设置。调试器需要知道 php.exe 文件所在的位置。

编辑：php.exe 随 Windows 上的标准 PHP 安装一起提供。当您从[www.php.net](http://www.php.net)下载 PHP 时，您会在安装 PHP 的目录中的某处找到 php.exe 文件。

希望这可以帮助 ：-）

# asp.net-mvc - ASP.NET MVC 控制器中的会话对象为空

> ID：888501
> 
> 赞同：0
> 
> 时间：2009-05-20T15:07:13.577
> 
> 标签：asp.net-mvc

这是一个奇怪的问题，因为昨天我在 Cassini (VS2008) 中执行我的代码，并且在控制器的操作方法中，Session 对象是有效的并持有会话数据。今天重启VS2008，打开项目，Session对象为null。

在 ASP.NET MVC 应用程序的控制器代码中，Session 对象可能为空的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T15:19:27.623

我发现了问题。

我使用 LINQ 从业务层检索 IEnumerable，然后在视图中对其进行迭代。问题是 LINQ 是延迟加载的，并且没有尝试加载列表的内容（存储在 Session 对象中），直到它尝试在视图中对其进行迭代。我通过使用 .ToList() 扩展方法强制在控制器中加载来解决这个问题。

# asp.net - 您将非 ASP.NET MVC ASP.NET 称为什么？

> ID：888502
> 
> 赞同：1
> 
> 时间：2009-05-20T15:07:19.020
> 
> 标签：asp.net, asp.net-mvc, ambiguity

当 ASP.NET 出现时，人们开始将 ASP 3（及以下）称为经典 ASP。在提到与 ASP.NET MVC 相关的 ASP.NET（非 MVC）时，有人会这样做吗？

在回答将普通 ASP.NET 称为“非 ASP.NET MVC ASP.NET！”的问题时，这似乎很尴尬。

请不要解释两者之间的区别-我知道这不是问题！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T15:09:45.927

ASP.NET 是两者的总称。非 mvc 只是称为“WebForms”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T15:08:48.627

它要么只是“ASP.NET”，要么是“WebForms”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-20T15:09:16.537

ASP.NET = WebForms 和 MVC。WebForms 是“经典”，而 MVC 是新事物。

# php - 我的自动重定向登录页面方法在 PHP 中是否正确？

> ID：888507
> 
> 赞同：2
> 
> 时间：2009-05-20T15:08:33.433
> 
> 标签：php, session, logout

我有一个用户可以有很多朋友的社区网站。在显示他所有的朋友时，我想包括他的朋友是在线还是离线。

我的方法是，当用户登录时，在状态列“在线”上创建一个会话并更新用户表。如果他单击注销按钮，那么我会将状态设置为“离线”。如果他没有点击注销按钮就关闭了浏览器怎么办？这是我想做的事情：

```
session_start();
if (!isset($_SESSION['LAST_ACTIVITY'])) {
    // initiate value
    $_SESSION['LAST_ACTIVITY'] = time();
}
if (time() - $_SESSION['LAST_ACTIVITY'] > 3600) {
    // last activity is more than 10 minutes ago
    session_destroy();
    //direct to a php, say this user is idle and thus status = offline
    header("location: update_status.php?user=".$_SESSION['username']."&status=offline");
    // den redirect them to login page
} else {
    // update last activity timestamp
    $_SESSION['LAST_ACTIVITY'] = time();
} 
```

这是合适的方式吗？

* * *

### 编辑：

看看一些简单的示例代码会很有帮助，如何检查用户何时在线并在用户访问页面时更新？

我需要包含`php?user=$_SESSION['userid']`在每个链接中吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T15:21:02.160

好吧，如果您确定用户是否已注销，只需通过您的在线/离线列 - 那么关闭浏览器窗口（不点击您的注销链接/按钮）的用户仍将登录。

这里的常规方法是跟踪用户何时在您的网站上移动，存储他们最后一次导航到页面的时间。然后你设置一个预定义的常量来让用户活跃（比如在过去 15 分钟内浏览你的页面） - 然后你在你的 SQL 查询中使用它来获取每个访问者的朋友并且一直在的用户网站在过去 15 分钟内。

在您将时间存储为日期时间的 SQL 查询中（这是对 MySQL 的查询），这可能类似于：

```
SELECT col1, col2, col3 FROM Users WHERE DATE_ADD(LastActive, INTERVAL 15 MINUTE) > NOW() AND UserIsFriendOfCurrentUser 
```

当然，您的查询需要调整以更好地适应您的设置，但希望您能理解。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T15:19:36.623

在我看来，这行不通。当用户关闭浏览器时，您在此处放置的代码将永远不会被调用。

一种可能的方法是在用户调用页面时保存用户上次在数据库中处于活动状态的时间。如果用户的最后一个活动比 5 分钟前的时间长，您可以将他视为离线，并将其显示给其他用户。

我认为phpbb3就是这样做的......

当用户关闭浏览器时获取事件很繁重并且并不总是有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T15:20:43.237

在标头位置重定向之后，一定要把这一行：

```
die(); 
```

并非所有用户代理（浏览器、网络蜘蛛等）都会监听您的重定向标头。杀死脚本是确保他们不会获得页面其余部分的唯一安全方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-12-29T18:43:59.573

数据库会话可能是您管理谁在线和谁不在线的好方法。从理论上讲，它们应该自行到期。我在我的博客上写了一篇关于它的操作方法，您可以在[http://brennydoogles.wordpress.com/2011/09/06/taking-control-of-your-php-sessions-using-database-sessions阅读更多内容/](http://brennydoogles.wordpress.com/2011/09/06/taking-control-of-your-php-sessions-using-database-sessions/)

这还有一个额外的好处，就是允许您在需要时远程终止用户会话:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T15:20:20.257

最好的方法是存储登录用户的活动时间。当他们导航到页面或执行操作时，将数据库中的“上次活动”时间更新为当前时间。如果此时间超出阈值（例如 15 分钟），则您可以将用户归类为不再活动。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T21:53:42.727

您不应该`$_SESSION`用于存储上次活动时间。每次用户访问一个页面时，更新一个名为`last_activity`users 表中当前时间的列：

```
<?php
session_start();

$userId = (int)$_SESSION['user']; // make sure it's an integer
$db->exec('
    UPDATE users 
    SET last_activity = NOW() 
    WHERE id = ' . $_SESSION['id']
);
//... 
```

当你检索你的朋友列表时，添加一个 if 语句来检查他们是否在线（这是 MySQL 版本）：

```
SELECT 
    u.user_name, u.name, etc,
    IF(
        UNIX_TIMESTAMP() - UNIX_TIMESTAMP(u.last_activity) < 300, 
        1, 0
    ) as online
    ... 
```

300是秒所以5分钟。根据需要进行调整。然后可以像这样访问您的朋友：

```
$friends = $db->query(/* above SQL */);
foreach($friends as $friend)
{
    if($friend['online'] == 1)
        // online specific stuff
    else
        // offline specific stuff
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-20T15:20:06.933

我在您的代码中看到了几个问题：

```
if (time() - $_SESSION['LAST_ACTIVITY'] > 3600) {
  // last activity is more than 10 minutes ago
  session_destroy();
  //direct to a php, say this user is idle and thus status = offline
  header("location: update_status.php?user=".$_SESSION['username']."&status=offline");
} 
```

在这段代码中，您销毁会话，*然后*从刚刚销毁的会话中获取用户名。

顺便说一句，如果我理解您的问题，那么您不会通过此代码获得预期的行为。

您检查用户是否刚刚访问您的站点（您启动的会话的所有者）是否已空闲超过 10 分钟，如果是，则您刚刚断开他的连接，因为它试图重新进入该站点。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-20T15:20:07.950

据我了解，您的解决方案是即使用户最后一次访问网站是在 10 分钟前，该用户仍被标记为在线。

您应该将用户上次在您的站点上处于活动状态的时间保存在数据库中。当用户查看您的好友列表时，这一次您也可以查看是否是 10 分钟前，即该好友处于非活动状态。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-20T16:11:31.997

在我们的项目中，我们使用这种技术：

> 1.  登录后的每个用户都与会话 ID 相关联。
> 2.  浏览器通过计时器发送带有 AJAX 的“活动请求”。
> 3.  一个轻量级的服务器端脚本更新数据库中的最后一个活动，通过会话 ID 搜索用户。
> 4.  cronjob 更新所有超时用户，将它们标记为离线（实际上会话 id 为空），并为每个用户执行注销例程，以避免损坏业务层上的数据。

用户会发生什么？直到用户关闭他的浏览器 - 活动正在更新。关闭浏览器后，用户会超时并标记为离线。当用户试图到达任何需要授权的位置时——我们要做的第一件事是通过会话 ID 在 DB 中找到他，如果没有——他只能看到登录表单（即 include(); exit(); ）。

坏事 - 选项卡式浏览器在同一窗口中为每个打开的选项卡使用相同的会话 ID。但是我们的项目是一个游戏，一个浏览器的多用户是不允许的。实际上，当 2 个或更多用户尝试从一个浏览器的不同选项卡登录时，这种情况非常罕见......

# .net - linq to sql 在内存中创建后插入实体

> ID：888511
> 
> 赞同：0
> 
> 时间：2009-05-20T15:09:15.910
> 
> 标签：.net, linq-to-sql

我正在为汽车租赁场所建立一个预订引擎。

我有一个 Booking l2s 对象，它有一个 Car 和 Location 对象（以及后续的 FK CarID / LocationID 字段）。

在预订过程的第一步中，我新建了一个 Booking() 类。这在会话中传递到后续页面。

随着用户继续执行该过程，设置了 CarID 和 LocationID 属性，但是由于 Booking 对象尚未持久化回数据库，因此我无法引用 Booking.Car.CarModel。

所以我正在做的是明确设置它：

```
Booking.Car = DB.Car.Where(x => x.id == Booking.CarID).Single(); 
```

等等

当需要保存预订时，它会抛出：

> 已尝试附加或添加一个不是新的实体，可能是从另一个 DataContext 加载的。这是不支持的。

因此，它似乎认为 Booking 实体并不新鲜。如果我尝试清除我明确设置的值（Booking.Car = null），它会引发另一个错误：

> 尝试删除 Car 和 Booking 之间的关系。但是，不能将关系的外键之一 (Booking.CarID) 设置为 null。

而现在我被难住了...

* * *

# 最终解决方案

我最终做的（在尝试了一堆不同的事情之后）只是在保存预订之前，我从当前上下文中重新加载了 Car 和 Location 对象。效率不高，但是嗯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T15:15:24.480

我很确定您的数据上下文处理有问题。您是否为每个请求创建一个？如果答案是肯定的，那么问题在于您的对象与不同的上下文相关联。您必须将它们从用于从数据库中获取它们的上下文中分离出来，并将它们重新附加到您要用于存储它们的上下文中。

# c# - 不了解 C# 中的对象实例化

> ID：888514
> 
> 赞同：5
> 
> 时间：2009-05-20T15:09:28.080
> 
> 标签：c#, instantiation

这篇文章谈到了我对 C# 类的理解以及为什么它们比静态函数更可取的一个空白。

我正在尝试获取对象列表。列表中的每个对象代表表中的一条记录。这在静态函数中很容易做到。

使用一个类，我已经能够做到以下几点：

调用例程：

```
ListOfBusinesses l = new ListOfBusinesses ();
List<Business> b = l.listBusinesses(); 
```

课程：

```
 public class Business
 {
    public string Bupk { get; set; }
    public string Bu_name { get; set; }

 }  

 public class ListOfBusinesses
 {
    public List<Business> listBusinesses()
    {

      List<Business> businesses = new List<Business>();
      businesses.Add(new Business("1", "Business Name 1"));
      businesses.Add(new Business("2", "Business Name 2"));

      return businesses;
    }
 } 
```

我不能重写这个类，这样就可以用一行来完成：

```
ListOfBusinesses l = new ListOfBusinesses(); 
```

在我看来，上面的 ListofBusinesses 类只不过是一个封装在一个没有属性的类中的静态函数，只是为了拥有一个类而存在。

我试过了：

```
public class ListOfBusinesses
{
    List<Business> businesses;

    public List<Business> ListOfBusinesses()
    {

      List<Business> businesses = new List<Business>();
      businesses.Add(new Business("1", "Business Name 1"));
      businesses.Add(new Business("2", "Business Name 2"));

      return businesses;
    }
} 
```

但收到编译器错误“成员名称不能与封闭类型相同”。例如，我尝试使用构造函数，但缺少一些东西。

任何帮助都会在我误解了一段时间的领域启发我。

迈克·托马斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-20T15:28:53.533

我认为您混淆了静态函数、构造函数和工厂方法的概念。

**静态函数**

定义

这是一种方法，它不能访问（并且不与）`this`类的实例。

例子

```
public class BusinessHelper
{   
    public static List<Business> ListBusinesses()
    {

        List<Business> businesses = new List<Business>();
        businesses.Add(new Business("1", "Business Name 1"));
        businesses.Add(new Business("2", "Business Name 2"));

        return businesses;
    }
} 
```

用法

使用类名而不是类的实例调用静态方法。

```
List<Business> businesses = BusinessHelper.ListBusinesses(); 
```

**构造函数**：这是一个创建`this`类实例的方法。它没有返回值，并在实例化对象时调用。

例子

```
public class BusinessList
{   
    public List<Business> TheList;

    public BusinessList()
    {    
        TheList = new List<Business>();
        TheList.Add(new Business("1", "Business Name 1"));
        TheList.Add(new Business("2", "Business Name 2"));   
    }
} 
```

用法

创建对象的新实例。

```
BusinessList myBusinessList = new BusinessList();
businesses = myBusinessList.TheList; 
```

**工厂方法**

定义

这是一种创建对象实例、以某种方式实例化它并返回对它的引用的方法。

例子

```
public class BusinessList
{   
    public List<Business> TheList;

    public static BusinessList BusinessListWithTwoCompanies()
    {
        BusinessList instance = new BusinessList();

        businesses = new List<Business>();
        businesses.Add(new Business("1", "Business Name 1"));
        businesses.Add(new Business("2", "Business Name 2"));

        return instance;
    }
} 
```

用法

调用工厂方法*而不是*创建新对象。

```
BusinessList myBusinessList = BusinessList.BusinessListWithTwoCompanies();
businesses = myBusinessList.TheList; 
```

* * *

另外需要注意两点：

1.  您声明一个`businesses`字段，但继续实例化在您的方法中调用的*另一个*变量并返回它。场上什么都不会发生。小心变量范围。`businesses``ListOfBusinesses()``businesses`

2.  您不能拥有与类同名的成员（字段、属性或方法）。这是为没有返回类型的构造函数保留的（见上文）。这就是您收到编译器错误的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-20T15:16:09.050

当然。与其封装`List<Business>`，不如扩展它。然后你只需要在构造函数中添加一些东西。

```
public class ListOfBusinesses : List<Business> {
    public ListOfBusinesses() : base() {
        Add(new Business("1", "Business Name 1"));
        Add(new Business("2", "Business Name 2"));
    }
} 
```

要使用它：

```
List<Business> l = new ListOfBusinesses(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T16:00:22.407

对于所有 OO 语言，对象实例化基本相同。使用类而不是静态函数可以提供更大的灵活性并最终减少编码，尤其是在跟踪许多类似项目时。

想想书籍和图书馆。

如果您将书籍作为对象类，那么您可以实例化它以创建大量书籍并将它们存储在您的图书馆中。您创建的每一本书都是独一无二的。如果您没有对其进行任何更改，那么每本实例化的书似乎都是原版的副本（尽管在低级别每本书都有一个唯一的序列号）。它具有相同的封面、页数和内容，但您可以轻松地将您的名字写在一份副本中，从而使其与其他副本不同。

如果您将这本书设为静态，那么虽然您不能创建单独的副本，但您正在查看同一本书，但从不同的角度来看。如果你在里面写下你的名字，那么你的名字就会出现在这本书的每个视图中。

我不会发布任何代码，因为当我一直在输入这些代码时，很多其他人已经为您的业务对象发布了代码示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T15:14:35.697

您正在寻找工厂方法而不是构造函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-20T15:16:19.610

您的编译器错误是因为您的类名是“ListOfBusinesses”，方法名也是“ListOfBusinesses”。如果它是一个构造函数，这会很好，但由于你有一个返回类型，C# 认为你的意思是它是一个方法而不是一个构造函数。

至于获取您的企业列表，为什么不创建一个这样的类：

```
public class BusinessService {
   public List<Business> GetBusinesses() {
       // Build and return your list of objects here.
   }
} 
```

然后使用它：

```
BusinessService service = new BusinessService();
List<Business> businesses = service.GetBusinesses(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-20T15:19:13.503

您试图返回与构造函数中的类不同的东西

```
public class ListOfBusinesses
{
    ...

    public List<Business> ListOfBusinesses()
    {
        ... 
```

您不能在构造函数中指定返回类型，您需要：

```
public ListOfBusinesses()
{
    ... 
```

正如迈克托马斯所说，如果你想要的话，你应该使用工厂。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-20T15:16:42.667

问题是您使用了**用于调用**类的构造函数的保留字（新）。

构造函数的语义是返回正在创建的类的一个实例，它遵循没有返回值和类同名的规则。

如果不是这样，那么，如果你做任何事情`new MyObject`......你（或就此而言的编译器）应该如何知道返回类型？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-20T15:21:56.823

一般来说，您不会创建 ListOfBusinesses 类，除非 ListOfBusinesses 具有 List<Business> 中不可用的某些属性。处理此问题的最简单方法是 Business 类上的静态方法，如下所示：

```
public class Business
{
    //Business class methods/properties/fields

    static List<Business> GetList()
    {
        List<Business> businesses = new List<Business>();
        businesses.Add(new Business("1", "Business Name 1"));
        businesses.Add(new Business("2", "Business Name 2"));
        return businesses;
    }
} 
```

虽然这是直截了当的方法，但走这条路的最终结果是将此方法从业务类中重构到对象工厂中，通常通过像 NHibernate 或 Castle Windsor 这样的 ORM 框架提供。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-20T15:24:17.380

正如人们之前所说 - 你的语法不在这里。`ListOfBusiness()`是一个构造函数并且不显式返回一个对象。相反，它对 的新实例进行操作，`ListOfBusiness`并且应该负责任何必要的创建。

也就是说 - 如果您创建的方法`List<Business>`很简单，那么绝对没有理由将它作为静态方法的一部分。您甚至可以在 List 上定义一个扩展方法，该方法接受一个空列表并填充它。这称为工厂模式，其中对象的方法或实例负责创建新实例。

您想要考虑扩展`ListOfBusiness`到实例化类的地方是是否有需要跟踪的属性或状态。如果`List<Business>`每次调用时都发生了变化，或者如果您需要一个地方来添加新的业务，那么`ListOfBusiness`该类可能对此很有用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-20T16:25:23.607

如果我没记错的话，您想访问数据库并通过单行调用检索对象列表。

首先，您需要一个封装了 db 访问并公开 List 方法的 DAO 类。在 DAO 中，您可以使用 NHibernate、Linq2XXX 或任何您想要的（示例）

```
public class BusinessItem
{
    public string Code { get; set; }
    public string Description { get; set; }
}

public class BusinessItemsDAO
{
...
    public List<BusinessItem>   List()
    {
        // fake... should retrieve from db
        var list = new List<BusinessItem>();

        // returs the list
        return list;
    }
...
} 
```

您的客户端代码可以调用

```
var listOfBusinessItems = new BusinessItemsDAO().List(); 
```

如果您启用了 Linq，则返回 IQueryable 而不是 List 可能会有所帮助。

# asp.net-mvc - 返回带有 ModelState 错误的键列表

> ID：888521
> 
> 赞同：5
> 
> 时间：2009-05-20T15:11:13.427
> 
> 标签：asp.net-mvc, modelstate, asp.net-mvc-validation

如何返回所有有错误的键的列表/数组？

我试图做下面的事情，但它说由于某种原因我不能有那种表达方式。

```
ModelState.ToList(item => item.Value.Errors.Count > 0) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-22T08:38:03.190

```
var errors = from modelstate in ModelState.AsQueryable().Where(f => f.Value.Errors.Count > 0) select new  {  Title = modelstate.Key  }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T15:42:42.333

计数是一种方法。在 is 之后需要 ()s。但无论如何，我更喜欢 Any：

```
from item in ModelState
where item.Value.Errors.Any()
select item.Key 
```

# seam - 远程接缝持久性

> ID：888523
> 
> 赞同：0
> 
> 时间：2009-05-20T15:11:23.787
> 
> 标签：seam, transactions, entitymanager, persist

我在.xhtml 文件中有一个按钮，它调用一个远程调用java 函数的javascript 函数（在jboss seam 环境中）。该 java 函数有一个 entityManager.persist(object)。你知道为什么这行代码不提交到数据库吗？它表示事务尚未开始。我假设在远程上下文中我没有开始事务，因为如果我在调用相同 java 函数而不是使用上面的 javascript 的那个按钮上放置一个动作，它工作正常；entityManager 持久化对象，我可以在数据库中看到它。

有谁知道我如何才能使用javascript调用java函数来实际持久化对象？（我必须使用 javascript 因为我需要回调函数）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T22:18:54.843

为了确保交易您可以扩展 org.jboss.seam.util.Work：

```
new Work()
{
    @Override
    protected Object work() throws Exception {
        // do your stuff
        return null;  
    }
}.workInTransaction() 
```

# cvs - 大规模冲突解决

> ID：888526
> 
> 赞同：0
> 
> 时间：2009-05-20T15:11:39.837
> 
> 标签：cvs, tortoisecvs, wincvs

我正在使用 CVS，合并后，我有数百个冲突。这些冲突都不是问题（由于主干和分支上的关键字扩展差异，它们是不重要的更改）。

我知道没有对文件进行任何更改，因为这只是将供应商分支合并到主干中。已经随机检查了几十个文件以验证这一点。

有没有一种快速解决所有冲突的方法，而无需手动完成每个冲突？（我可以使用 TortoiseCVS、WinCVS 和命令行）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-02T19:12:27.637

你能再做一次合并吗？

做一个

> 简历更新-kk

在合并之前，这不会扩展关键字。
唯一有问题的关键字是 $Log 一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T15:30:54.650

您可以在 Emacs 中编写一个宏来执行此操作而没有太多麻烦 - 如果您习惯于 emacs/elisp，或者您可能可以在没有 elisp 的情况下使用 emacs 中的键盘宏来执行此操作，然后使用 ^u^u^u^ u^u^x^e（重复键盘宏 (^x^e) 1024 次；每个 ^u 将计数增加 4 倍）。该宏将是解决文件中的一个冲突所需的命令的简单重复。您还可以将所有有冲突的文件加载到缓冲区中，然后使用 elisp 或键盘宏来解决冲突，然后切换到下一个缓冲区，然后重复此操作。

如果有更简单的方法，我不会感到惊讶，但这会奏效。即使您必须将所有文件加载到缓冲区中，然后运行键盘宏，您也可以这样做并在相对较短的时间内完成。

伪emacs：

```
cvs status | grep conflict >/tmp/foo;
load /tmp/foo into an emacs buffer
edit buffer to remove all but the file/pathnames (use keyboard macros!)
load them all into buffers:
^x^(        (start-macro)
^@^e        (mark (or control-space), then end-of-line)
ESC-w       (copy)
^n^a        (next-line, beginning of line (set up for next iteration))
^x^f        (load-file)
^y          (yank saved)
<RETURN>    (load it - you could resolve conflicts right here and save)
^xb         (switch to buffer)
foo<RETURN> (go back to foo)
^x^)        (end macro)
^x^e        (repeat macro once) or
^u^u^u^u^u^x^e (repeat macro 1024 times or until BEEP) 
```

现在您在 emacs 缓冲区中拥有数百个文件，您可以设置一个宏来获取下一个缓冲区、解决冲突并保存它 - 然后重复**该**宏 N 次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T15:08:58.793

我将回答我自己的问题，因为@jesup 建议的 EMACS 解决方案对于 15 年没有使用 EMACS 的人来说是不切实际的！

就我而言，因为我知道唯一的冲突在于 $LOG$ 关键字的扩展，我并不真正关心评论的内容。我看到了两种可能的解决方案：

1.  返回供应商源的导入并确保禁用关键字扩展并重做合并。

2.  勇敢地将所有供应商文件复制到冲突文件上（从而解决冲突）。就我而言，我知道我们没有做出任何改变，这是一个没有风险的选择。

我选择了 2。使用[BeyondCompare](http://www.scootersoftware.com/moreinfo.php)进行的基于规则的比较确认所有文件都只有“不重要”的更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-07T22:25:27.740

这是我为此编写的一个 C++ 程序。它在 Visual Studio 2008 Express 中编译，也可能在任何其他编译器中编译。

这个输入输出是通过redirect，可能不太方便，但是可以写个cmd文件来调用，比如

```
@echo off
copy /y %1 \temp\t
resolve %2 %3 < \temp\t > %1
del \temp\t 
```

代码是

```
// resolve.cpp
#include "stdafx.h"
#include "string.h"

int main(int argc, char* argv[])
{
    const int MAXWIDTH = 10000;
    char line[MAXWIDTH];

    enum { ECHO, OLD, NEW, ERROR };

    int state = ECHO;
    int num = 0;
    int quiet = 0;
    int pick = OLD;

    for (int i = 1; i < argc; ++i)
    {
        if (!strcmp(argv[i],"-h") || !strcmp(argv[i],"--help") || !strcmp(argv[i],"?"))
        {
            printf("Automatically fix CVS merge conflicts.\n"
                "Options:\n"
                " -n use the bottom code, the new code (default uses top, old code).\n"
                " -q quiet\n"
                " -h help\n"
                "use stdin and stdout for input/output and stderr for status.");
            return 0;
        }
        else if (!strcmp(argv[i],"-n"))
        {
            pick = NEW;
        }
        else if (!strcmp(argv[i],"-q"))
        {
            quiet = 1;
        }
        else
            fprintf(stderr,"unknown option %s\n",argv[i]);
    }

    while (fgets(line, MAXWIDTH, stdin))
    {
        // trim trailing whitespace
        for (int i = strlen(line); i >= 0 && line[i] < ' '; --i) 
            line[i] = 0;

        ++num;
        if (!strncmp(line,"<<<<<<< ",8))
        {
            state = (state==ECHO) ? OLD : ERROR;
            if (!quiet)
                fprintf(stderr,"At line: %d\n", num);
        }
        else if (!strcmp(line,"======="))
        {
            state = (state==OLD) ? NEW : ERROR;
        }
        else if (!strncmp(line,">>>>>>> ",8))
        {
            state = (state==NEW) ? ECHO : ERROR;
        }
        else
        {
            if (state == ECHO || state == pick)
                printf("%s\n",line);
            if (!quiet && state != ECHO)
                fprintf(stderr,"%c%s\n", (state==pick) ? '+' : '-', line);
            continue;
        }
        if (!quiet)
            fprintf(stderr,"%s\n",line);
    }
    return 0;
} 
```

免责声明：您可能想要验证您的输出。

# asp.net - jQuery 和 ASP.NET 控件问题

> ID：888527
> 
> 赞同：1
> 
> 时间：2009-05-20T15:11:43.583
> 
> 标签：asp.net, javascript, jquery

如果我有一个呈现为带有 ID 的 html 控件的自定义 ASP.NET 控件，我正在尝试使用 jQuery 向输入控件添加一个属性。

但是，我遇到了一些问题：

首先，我的 jQuery 无法选择它。

我到目前为止：

```
$(document).ready(function() {
  $(client id of the input control).attr('onclick', function () { alert('hey!'); });
}); 
```

好像 jQuery 试图找到输入控件但不能。

有任何想法吗？

**更新：**

通常，提供的解决方案会起作用，但由于这是一个 SharePoint Publishing .aspx 页面，因此不允许使用代码块...尝试其他解决方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T15:20:01.193

只需在 jQuery 中连接 click 事件。

```
$(document).ready(function() {
    $(id of the input control)click(function() {
        alert('hey!');
    });
}); 
```

此外，请确保您不只是将您键入的 ID 放入 jQuery 中的控件中。ASP.Net 使用与您为控件提供的 ID 大不相同的 ID 呈现控件。在我运行的其中一个网站上，我有以下按钮：

```
<asp:Button ID="btnSignup" runat="server" Text="Sign Up" /> 
```

呈现的 HTML 中的 ID 不是 btnSignup，它实际上呈现为 ctl00_cpLeft_btnSignup。要使用 jQuery 选择该控件，您可以执行以下操作：

```
$("input[id$='btnSignup'").click(function() { ... }); 
```

**编辑：**

```
$("input[id$='btnSignup'}").click(function() { ... }); 
```

您还可以选择使用：

```
$("#<%= btnSignup.ClientID %>").click(function() { ... }); 
```

编辑：

我研究了使用 <%= ... %> 方法，您必须将 javascript**放入**ASPX/ASCX 文件本身才能使其工作。因此，我会坚持使用正则表达式方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T15:15:03.293

你用什么作为输入控件的ID？

您必须使用控件的 ClientID，而不是它的 ID。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T15:21:36.543

您需要使用它的 ClientID。如果您的 ASP.NET 标记如下所示：

```
<uc:MyControl runat="server" ID="myControl1" /> 
```

您的 jQuery 选择器应如下所示：

```
$(document).ready(function() {
  $("<%=myControl1.ClientID%>").attr('onclick', function () { alert('hey!'); });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T15:17:16.363

[使用 jQuery 选择 ASP.NET 生成的 ID](http://ralphwhitbeck.com/2009/01/31/SelectingAASPNETGeneratedIDWithJQuery.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T15:14:24.903

您的 ASP.NET 控件是在母版页还是用户控件中？ASP.NET 会在你的 ID 前面加上一堆标识符，以确保它是唯一的。

在 HTML 中出现的控件的 ID 是什么？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T15:19:32.380

如果您将呈现的 HTML 控件的 ID 设置为提供给 ASP.NET 控件的 ID，则需要了解 ASP.NET 如何处理控件 ID 命名空间。本质上，嵌套在控件中的每个控件都需要始终保证唯一标识符。ASP.NET 通过获取分配给控件的 ID 并在其前面加上包含该控件的每个控件的 ID 来维护这一点。因此，页面上的控件将包含一个 id 字符串，该字符串将上升到页面本身的表单。

您不想重新构建这个客户端。相反，Control 定义了 ClientID，它将返回在客户端呈现的控件的 ID。将其嵌入到您的 jQuery 中，或者嵌入到 jQuery 可以看到的 javascript 变量中（如果您将 jQuery 放在单独的脚本文件中），您应该没问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-20T15:20:09.227

只是为了通知您，**不需要 document.ready 部分**，使用 asp.net 控制将 id 更改为与预期不同的东西，在它的开头抛出一个**ct100....**，所以这种方式看起来对于实际的 id 名称，即使 asp.net 在开头抛出损坏的代码，因为它会查找具有以指定文本结尾的 ID 的所有元素 (*)。

```
$(function() {
   $("*[id$='idofcontrol']".click(function() { alert('hey!'); });
}); 
```

或转到视图源并复制 id 名称并将其粘贴到您的代码中，或者仅使用 css 类选择器，如下所示：

```
$(function() {
      $('.myclassname').click(function() { alert('hey!'); });
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-20T19:54:43.807

既然您提到了 Sharepoint，您可能会对[EndUserSharepoint](http://www.endusersharepoint.com)上的这个系列感兴趣，该系列专注于将[jQuery 与 Sharepoint](http://www.endusersharepoint.com/?cat=513)集成。作者讨论了让 jQuery 来操作 webpart。

# c++ - 枚举结构的成员？

> ID：888531
> 
> 赞同：5
> 
> 时间：2009-05-20T15:12:27.217
> 
> 标签：c++, c, enumeration

有没有办法在 C++ 或 C 中枚举结构（结构 | 类）的成员？我需要获取成员名称、类型和值。我之前在一个变量是全局范围的小项目中使用过以下示例代码。我现在遇到的问题是需要将一组值从 GUI 复制到对象、文件和 VM 环境中。我可以创建另一个“穷人的”反射系统，或者希望有更好的东西，我还没有想到。有人有想法吗？

编辑：我知道 C++ 没有反射。

```
union variant_t {
   unsigned int  ui;
   int           i;
   double        d;
   char*         s;
};

struct pub_values_t {
   const char*      name;
   union variant_t* addr;
   char             type;  // 'I' is int; 'U' is unsigned int; 'D' is double; 'S' is string
};

#define pub_v(n,t) #n,(union variant_t*)&n,t
struct pub_values_t pub_values[] = {
   pub_v(somemember,  'D'),
   pub_v(somemember2, 'D'),
   pub_v(somemember3, 'U'),
   ...
};

const int no_of_pub_vs = sizeof(pub_values) / sizeof(struct pub_values_t); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T15:21:54.357

显而易见，C 或 C++ 中没有反射。因此没有可靠的枚举成员变量的方法（默认情况下）。

如果您可以控制数据结构，则可以尝试 a`std::vector<boost::any>`或 a`std::map<std::string, boost::any>`然后将所有成员变量添加到向量/地图。

当然，这意味着您的所有变量都可能在堆上，因此这种方法会影响性能。使用 std::map 方法，这意味着你会有一种“穷人”的反映。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-21T11:09:15.203

您可以在中间文件中指定您的类型并从中生成 C++ 代码，例如可以从 idl 文件生成 COM 类。生成的代码为这些类型提供反射功能。

我为不同的项目做了类似的两种不同的方式：

*   由 Ruby 脚本解析的自定义文件以进行生成
*   将类型定义为 C# 类型，使用 C# 的反射获取所有信息并从中生成 C++（听起来很复杂，但效果出奇的好，编写类型定义与编写 C++ 定义非常相似）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T15:22:13.170

Boost 有一个随时可用的[Variant](http://www.boost.org/doc/libs/1_39_0/doc/html/variant.html)库，可以满足您的需求。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-21T10:53:13.583

最简单的方法 - 切换到 Objective-C 或 Objective-C++。该语言具有良好的内省性，并且与 C/C++ 源代码完全兼容。

你也可以使用 m4/cog/... 来同时生成结构和他从一些元描述中的描述。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T15:28:28.947

感觉就像您正在构建某种调试器。如果您确保在构建可执行文件时生成 pdb 文件，我认为这应该是可行的。

不确定您要在什么上下文中进行此枚举，但是在您的程序中，您应该能够从 Microsofts **dbghelp.dll**调用函数以从变量等中获取类型信息。（我假设您使用的是 Windows，这当然可能不是这样）

希望这有助于让你更进一步。

干杯!

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-21T11:26:52.953

由于 C++ 没有内置反射，因此您只能获取有关结构内容的信息，分别教您的程序。

这可以是通过从一种格式生成结构，之后您可以使用该格式来了解结构信息，或者通过解析 .h 文件来提取结构信息。

# c# - 如何更新 C# Windows 控制台应用程序中的当前行？

> ID：888533
> 
> 赞同：593
> 
> 时间：2009-05-20T15:12:53.160
> 
> 标签：c#, windows, console

在 C# 中构建 Windows 控制台应用程序时，是否可以写入控制台而无需扩展当前行或转到新行？例如，如果我想显示一个百分比来表示进程距离完成有多近，我只想更新与光标在同一行的值，而不必将每个百分比都放在新行上。

这可以通过“标准”C# 控制台应用程序来完成吗？

* * *

## 回答 #1

> 赞同：894
> 
> 时间：2009-05-20T15:18:58.140

如果您只打印`"\r"`到控制台，光标会回到当前行的开头，然后您可以重写它。这应该可以解决问题：

```
for(int i = 0; i < 100; ++i)
{
    Console.Write("\r{0}%   ", i);
} 
```

注意数字后面的几个空格，以确保删除之前的任何内容。
还要注意使用`Write()`而不是，`WriteLine()`因为您不想在行尾添加“\n”。

* * *

## 回答 #2

> 赞同：285
> 
> 时间：2009-05-20T15:17:18.593

您可以使用`Console.SetCursorPosition`设置光标的位置，然后在当前位置写入。

这是一个显示简单“微调器”的[示例：](https://docs.microsoft.com/en-gb/archive/blogs/brada/showing-progress-in-a-console-windows)

```
static void Main(string[] args)
{
    var spin = new ConsoleSpinner();
    Console.Write("Working....");
    while (true) 
    {
        spin.Turn();
    }
}

public class ConsoleSpinner
{
    int counter;

    public void Turn()
    {
        counter++;        
        switch (counter % 4)
        {
            case 0: Console.Write("/"); counter = 0; break;
            case 1: Console.Write("-"); break;
            case 2: Console.Write("\\"); break;
            case 3: Console.Write("|"); break;
        }
        Thread.Sleep(100);
        Console.SetCursorPosition(Console.CursorLeft - 1, Console.CursorTop);
    }
} 
```

请注意，您必须确保用新输出或空白覆盖任何现有输出。

更新：由于有人批评该示例仅将光标向后移动一个字符，因此我将添加此内容以澄清：使用`SetCursorPosition`您可以将光标设置到控制台窗口中的任何位置。

```
Console.SetCursorPosition(0, Console.CursorTop); 
```

将光标设置到当前行的开头（或者您可以`Console.CursorLeft = 0`直接使用）。

* * *

## 回答 #3

> 赞同：95
> 
> 时间：2009-05-20T15:58:24.067

到目前为止，对于如何做到这一点，我们有三个相互竞争的替代方案：

```
Console.Write("\r{0}   ", value);                      // Option 1: carriage return
Console.Write("\b\b\b\b\b{0}", value);                 // Option 2: backspace
{                                                      // Option 3 in two parts:
    Console.SetCursorPosition(0, Console.CursorTop);   // - Move cursor
    Console.Write(value);                              // - Rewrite
} 
```

我一直使用`Console.CursorLeft = 0`第三个选项的变体，所以我决定做一些测试。这是我使用的代码：

```
public static void CursorTest()
{
    int testsize = 1000000;

    Console.WriteLine("Testing cursor position");
    Stopwatch sw = new Stopwatch();
    sw.Start();
    for (int i = 0; i < testsize; i++)
    {
        Console.Write("\rCounting: {0}     ", i);
    }
    sw.Stop();
    Console.WriteLine("\nTime using \\r: {0}", sw.ElapsedMilliseconds);

    sw.Reset();
    sw.Start();
    int top = Console.CursorTop;
    for (int i = 0; i < testsize; i++)
    {
        Console.SetCursorPosition(0, top);        
        Console.Write("Counting: {0}     ", i);
    }
    sw.Stop();
    Console.WriteLine("\nTime using CursorLeft: {0}", sw.ElapsedMilliseconds);

    sw.Reset();
    sw.Start();
    Console.Write("Counting:          ");
    for (int i = 0; i < testsize; i++)
    {        
        Console.Write("\b\b\b\b\b\b\b\b{0,8}", i);
    }

    sw.Stop();
    Console.WriteLine("\nTime using \\b: {0}", sw.ElapsedMilliseconds);
} 
```

在我的机器上，我得到以下结果：

*   退格键：**25.0 秒**
*   回车：**28.7 秒**
*   设置光标位置：**49.7 秒**

此外，`SetCursorPosition`导致明显的闪烁，这是我在使用任何一种替代方案时都没有观察到的。所以，道德是尽可能**使用退格或回车**，**感谢你教我**一个更快的方法，所以！

* * *

**更新**：在评论中，Joel 建议 SetCursorPosition 相对于移动的距离是恒定的，而其他方法是线性的。进一步的测试证实了这种情况，**但是**恒定的时间和缓慢的速度仍然很慢。在我的测试中，将一长串退格键写入控制台比 SetCursorPosition 快，直到大约 60 个字符。因此，退格对于替换短于 60 个字符（或更多）的行部分更快，**并且**它不会闪烁，所以我将坚持我最初对 \b 的认可而不是 \r 和`SetCursorPosition`.

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2009-05-20T15:36:51.207

您可以使用**\b**（退格）转义序列来备份当前行上特定数量的字符。这只是移动当前位置，不会删除字符。

例如：

```
string line="";

for(int i=0; i<100; i++)
{
    string backup=new string('\b',line.Length);
    Console.Write(backup);
    line=string.Format("{0}%",i);
    Console.Write(line);
} 
```

在这里，**line**是要写入控制台的百分比行。诀窍是为先前的输出生成正确数量的**\b**字符。

**与\r**方法相比，此方法的优势在于，即使您的百分比输出不在行首，也可以工作。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2009-05-20T15:21:51.317

`\r`用于这些场景。
`\r` **表示回车，表示光标返回到行首。**
这就是为什么 Windows 使用`\n\r`它作为新的行标记。
`\n`将您向下移动一行，然后`\r`将您返回到该行的开头。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2009-05-20T17:42:48.487

`ConsoleSpinner`我只需要和divo的班级一起玩。我的远没有那么简洁，但是我不喜欢那个类的用户必须编写自己的`while(true)`循环。我正在拍摄更像这样的体验：

```
static void Main(string[] args)
{
    Console.Write("Working....");
    ConsoleSpinner spin = new ConsoleSpinner();
    spin.Start();

    // Do some work...

    spin.Stop(); 
} 
```

我用下面的代码意识到了这一点。由于我不希望我的`Start()`方法阻塞，我不希望用户担心编写类似`while(spinFlag)`循环，并且我希望同时允许多个微调器我不得不产生一个单独的线程来处理纺纱。这意味着代码必须复杂得多。

另外，我还没有做过那么多的多线程，所以有可能（甚至可能）我在那里留下了一个或三个微妙的错误。但到目前为止它似乎工作得很好：

```
public class ConsoleSpinner : IDisposable
{       
    public ConsoleSpinner()
    {
        CursorLeft = Console.CursorLeft;
        CursorTop = Console.CursorTop;  
    }

    public ConsoleSpinner(bool start)
        : this()
    {
        if (start) Start();
    }

    public void Start()
    {
        // prevent two conflicting Start() calls ot the same instance
        lock (instanceLocker) 
        {
            if (!running )
            {
                running = true;
                turner = new Thread(Turn);
                turner.Start();
            }
        }
    }

    public void StartHere()
    {
        SetPosition();
        Start();
    }

    public void Stop()
    {
        lock (instanceLocker)
        {
            if (!running) return;

            running = false;
            if (! turner.Join(250))
                turner.Abort();
        }
    }

    public void SetPosition()
    {
        SetPosition(Console.CursorLeft, Console.CursorTop);
    }

    public void SetPosition(int left, int top)
    {
        bool wasRunning;
        //prevent other start/stops during move
        lock (instanceLocker)
        {
            wasRunning = running;
            Stop();

            CursorLeft = left;
            CursorTop = top;

            if (wasRunning) Start();
        } 
    }

    public bool IsSpinning { get { return running;} }

    /* ---  PRIVATE --- */

    private int counter=-1;
    private Thread turner; 
    private bool running = false;
    private int rate = 100;
    private int CursorLeft;
    private int CursorTop;
    private Object instanceLocker = new Object();
    private static Object console = new Object();

    private void Turn()
    {
        while (running)
        {
            counter++;

            // prevent two instances from overlapping cursor position updates
            // weird things can still happen if the main ui thread moves the cursor during an update and context switch
            lock (console)
            {                  
                int OldLeft = Console.CursorLeft;
                int OldTop = Console.CursorTop;
                Console.SetCursorPosition(CursorLeft, CursorTop);

                switch (counter)
                {
                    case 0: Console.Write("/"); break;
                    case 1: Console.Write("-"); break;
                    case 2: Console.Write("\\"); break;
                    case 3: Console.Write("|"); counter = -1; break;
                }
                Console.SetCursorPosition(OldLeft, OldTop);
            }

            Thread.Sleep(rate);
        }
        lock (console)
        {   // clean up
            int OldLeft = Console.CursorLeft;
            int OldTop = Console.CursorTop;
            Console.SetCursorPosition(CursorLeft, CursorTop);
            Console.Write(' ');
            Console.SetCursorPosition(OldLeft, OldTop);
        }
    }

    public void Dispose()
    {
        Stop();
    }
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-05-20T15:22:38.583

在行的开头显式使用 Carrage Return (\r) 而不是（隐式或显式）在末尾使用换行符 (\n) 应该得到你想要的。例如：

```
void demoPercentDone() {
    for(int i = 0; i < 100; i++) {
        System.Console.Write( "\rProcessing {0}%...", i );
        System.Threading.Thread.Sleep( 1000 );
    }
    System.Console.WriteLine();    
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-09-14T15:09:26.380

```
 public void Update(string data)
    {
        Console.Write(string.Format("\r{0}", "".PadLeft(Console.CursorLeft, ' ')));
        Console.Write(string.Format("\r{0}", data));
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-06-16T20:53:36.273

从 MSDN 中的控制台文档：

> 您可以通过将 Out 或 Error 属性的 TextWriter.NewLine 属性设置为另一个行终止字符串来解决此问题。例如，C# 语句 Console.Error.NewLine = "\r\n\r\n"; 将标准错误输出流的行终止字符串设置为两个回车和换行序列。然后可以显式调用错误输出流对象的WriteLine方法，如C#语句中的Console.Error.WriteLine();

所以 - 我这样做了：

```
Console.Out.Newline = String.Empty; 
```

然后我可以自己控制输出；

```
Console.WriteLine("Starting item 1:");
    Item1();
Console.WriteLine("OK.\nStarting Item2:"); 
```

到达那里的另一种方式。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-10-18T07:21:45.080

如果您想让生成的文件看起来很酷，这很有效。

```
 int num = 1;
                var spin = new ConsoleSpinner();
                Console.ForegroundColor = ConsoleColor.Green;
                Console.Write("");
                while (true)
                {
                    spin.Turn();
                    Console.Write("\r{0} Generating Files ", num);
                    num++;
                } 
```

这是我从下面的一些答案中得到并修改它的方法

```
public class ConsoleSpinner
    {
        int counter;

        public void Turn()
        {
            counter++;
            switch (counter % 4)
            {
                case 0: Console.Write("."); counter = 0; break;
                case 1: Console.Write(".."); break;
                case 2: Console.Write("..."); break;
                case 3: Console.Write("...."); break;
                case 4: Console.Write("\r"); break;
            }
            Thread.Sleep(100);
            Console.SetCursorPosition(23, Console.CursorTop);
        }
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-07-04T05:34:21.080

如果您想更新一行，但信息太长而无法在一行上显示，则可能需要一些新行。我遇到了这个问题，下面是解决这个问题的一种方法。

```
public class DumpOutPutInforInSameLine
{

    //content show in how many lines
    int TotalLine = 0;

    //start cursor line
    int cursorTop = 0;

    // use to set  character number show in one line
    int OneLineCharNum = 75;

    public void DumpInformation(string content)
    {
        OutPutInSameLine(content);
        SetBackSpace();

    }
    static void backspace(int n)
    {
        for (var i = 0; i < n; ++i)
            Console.Write("\b \b");
    }

    public  void SetBackSpace()
    {

        if (TotalLine == 0)
        {
            backspace(OneLineCharNum);
        }
        else
        {
            TotalLine--;
            while (TotalLine >= 0)
            {
                backspace(OneLineCharNum);
                TotalLine--;
                if (TotalLine >= 0)
                {
                    Console.SetCursorPosition(OneLineCharNum, cursorTop + TotalLine);
                }
            }
        }

    }

    private void OutPutInSameLine(string content)
    {
        //Console.WriteLine(TotalNum);

        cursorTop = Console.CursorTop;

        TotalLine = content.Length / OneLineCharNum;

        if (content.Length % OneLineCharNum > 0)
        {
            TotalLine++;

        }

        if (TotalLine == 0)
        {
            Console.Write("{0}", content);

            return;

        }

        int i = 0;
        while (i < TotalLine)
        {
            int cNum = i * OneLineCharNum;
            if (i < TotalLine - 1)
            {
                Console.WriteLine("{0}", content.Substring(cNum, OneLineCharNum));
            }
            else
            {
                Console.Write("{0}", content.Substring(cNum, content.Length - cNum));
            }
            i++;

        }
    }

}
class Program
{
    static void Main(string[] args)
    {

        DumpOutPutInforInSameLine outPutInSameLine = new DumpOutPutInforInSameLine();

        outPutInSameLine.DumpInformation("");
        outPutInSameLine.DumpInformation("bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb");

        outPutInSameLine.DumpInformation("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa");
        outPutInSameLine.DumpInformation("bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb");

        //need several lines
        outPutInSameLine.DumpInformation("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa");
        outPutInSameLine.DumpInformation("bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb");

        outPutInSameLine.DumpInformation("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa");
        outPutInSameLine.DumpInformation("bbbbbbbbbbbbbbbbbbbbbbbbbbb");

    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-10-01T21:13:33.260

这是我对 s soosh 和 0xA3 的回答的看法。它可以在更新微调器时使用用户消息更新控制台，并且还具有经过时间指示器。

```
public class ConsoleSpiner : IDisposable
{
    private static readonly string INDICATOR = "/-\\|";
    private static readonly string MASK = "\r{0} {1:c} {2}";
    int counter;
    Timer timer;
    string message;

    public ConsoleSpiner() {
        counter = 0;
        timer = new Timer(200);
        timer.Elapsed += TimerTick;
    }

    public void Start() {
        timer.Start();
    }

    public void Stop() {
        timer.Stop();
        counter = 0;
    }

    public string Message {
        get { return message; }
        set { message = value; }
    }

    private void TimerTick(object sender, ElapsedEventArgs e) {
        Turn();
    }

    private void Turn() {
        counter++;
        var elapsed = TimeSpan.FromMilliseconds(counter * 200);
        Console.Write(MASK, INDICATOR[counter % 4], elapsed, this.Message);
    }

    public void Dispose() {
        Stop();
        timer.Elapsed -= TimerTick;
        this.timer.Dispose();
    }
} 
```

用法是这样的：

```
class Program
{
    static void Main(string[] args)
    {
        using (var spinner = new ConsoleSpiner())
        {
            spinner.Start();
            spinner.Message = "About to do some heavy staff :-)"
            DoWork();
            spinner.Message = "Now processing other staff".
            OtherWork();
            spinner.Stop();
        }
        Console.WriteLine("COMPLETED!!!!!\nPress any key to exit.");

    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-10-10T14:10:37.630

这是另一个：D

```
class Program
{
    static void Main(string[] args)
    {
        Console.Write("Working... ");
        int spinIndex = 0;
        while (true)
        {
            // obfuscate FTW! Let's hope overflow is disabled or testers are impatient
            Console.Write("\b" + @"/-\|"[(spinIndex++) & 3]);
        }
    }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-01-30T09:48:35.123

我在 vb.net 中寻找相同的解决方案，我找到了这个，它很棒。

但是，正如@JohnOdom 建议的那样，如果前一个大于当前一个，则可以更好地处理空格。

我在 vb.net 中创建了一个函数，并认为有人可以得到帮助..

这是我的代码：

```
Private Sub sPrintStatus(strTextToPrint As String, Optional boolIsNewLine As Boolean = False)
    REM intLastLength is declared as public variable on global scope like below
    REM intLastLength As Integer
    If boolIsNewLine = True Then
        intLastLength = 0
    End If
    If intLastLength > strTextToPrint.Length Then
        Console.Write(Convert.ToChar(13) & strTextToPrint.PadRight(strTextToPrint.Length + (intLastLength - strTextToPrint.Length), Convert.ToChar(" ")))
    Else
        Console.Write(Convert.ToChar(13) & strTextToPrint)
    End If
    intLastLength = strTextToPrint.Length
End Sub 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-11-08T14:28:01.017

我正在对此进行搜索，以查看我编写的解决方案是否可以针对速度进行优化。我想要的是一个倒数计时器，而不仅仅是更新当前行。这就是我想出的。可能对某人有用

```
 int sleepTime = 5 * 60;    // 5 minutes

            for (int secondsRemaining = sleepTime; secondsRemaining > 0; secondsRemaining --)
            {
                double minutesPrecise = secondsRemaining / 60;
                double minutesRounded = Math.Round(minutesPrecise, 0);
                int seconds = Convert.ToInt32((minutesRounded * 60) - secondsRemaining);
                Console.Write($"\rProcess will resume in {minutesRounded}:{String.Format("{0:D2}", -seconds)} ");
                Thread.Sleep(1000);
            }
            Console.WriteLine(""); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-12-04T21:50:05.883

受@E.Lahu 解决方案的启发，实现了百分比进度条。

```
public class ConsoleSpinner
{
    private int _counter;

    public void Turn(Color color, int max, string prefix = "Completed", string symbol = "■",int position = 0)
    {
        Console.SetCursorPosition(0, position);
        Console.Write($"{prefix} {ComputeSpinner(_counter, max, symbol)}", color);
        _counter = _counter == max ? 0 : _counter + 1;
    }

    public string ComputeSpinner(int nmb, int max, string symbol)
    {
        var spinner = new StringBuilder();
        if (nmb == 0)
            return "\r ";

        spinner.Append($"[{nmb}%] [");
        for (var i = 0; i < max; i++)
        {
            spinner.Append(i < nmb ? symbol : ".");
        }

        spinner.Append("]");
        return spinner.ToString();
    }
}

public static void Main(string[] args)
    {
        var progressBar= new ConsoleSpinner();
        for (int i = 0; i < 1000; i++)
        {
            progressBar.Turn(Color.Aqua,100);
            Thread.Sleep(1000);
        }
    } 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2013-04-12T02:50:53.693

该`SetCursorPosition`方法适用于多线程场景，其他两种方法不适用

# python - Django 中的多对一字段

> ID：888550
> 
> 赞同：8
> 
> 时间：2009-05-20T15:15:54.790
> 
> 标签：python, django

我正在尝试在“Many”类中定义一个多对一字段。例如，假设一个用户只能是一个组的成员，但一个组可以有多个用户：

```
class User(models.Model):
    name = models.CharField()

class Group(models.Model):
    name = models.CharField()
    # This is what I want to do -> users = models.ManyToOneField(User) 
```

Django 文档将告诉在 User 模型中将组字段定义为 ForeignKey，但我需要在 Group 模型中定义关系。据我所知，没有 ManyToOneField，我宁愿不必使用 ManyToManyField。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-20T15:21:28.600

`ManyToOne`如您所料，`ForeignKey`在 Django中调用了一个字段。您必须在您的`User`类上定义它才能使逻辑正常工作，但是 Django 会`Groups`自动在模型上提供一个 reverse 属性：

```
class Group(models.Model):
    name = models.CharField(max_length=64)

class User(models.Model):
    name = models.CharField(max_length=64)
    group = models.ForeignKey(Group)

g = Group.objects.get(id=1)
print g.user_set.all()  # prints list of all users in the group 
```

请记住，Django 的模型位于关系数据库之上......无法在指向多个外键的表中定义单个 FK 字段（即没有 M2M），因此将 ManyToOne 关系放在Groups 对象不映射到基础数据存储。如果您正在编写原始 SQL，那么无论如何您都可以使用从用户表到组表的外键来建模这种关系，如果这样想的话会有所帮助。如果存在这样的概念，则使用在 Group 实例上定义的属性的语法和逻辑`ManyToOne`将比在 User 上定义的 ForeignKey 简单得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T15:34:12.040

假设 Users 构造是内置的身份验证系统...我建议创建某种 Profile 模型并将 OneToMany 字段附加到它。然后，您可以[将 Profile 模型与用户模型挂钩](http://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T15:53:46.650

您可能应该只使用内置的反向查找来查看：

```
group = Group.objects.get(id=1)
users_in_group = group.user_set.all() 
```

为任何外键或与相关模型的多对多关系自动创建反向查找集。

如果你想用一个更友好的名字来引用它，或者在返回之前提供额外的过滤，你总是可以将调用包装在一个方法中：

```
class Group(models.Model):
    name = models.CharField(max_length=64)

    def users(self):
        return self.user_set.all() 
```

两者都可以从模板中调用：

```
{{ group.user_set.all }}

{{ group.users }} 
```

# f# - 使用委托/DLR Lambda 覆盖实例方法？

> ID：888565
> 
> 赞同：0
> 
> 时间：2009-05-20T15:18:22.680
> 
> 标签：f#, dynamic-language-runtime, reflection.emit

为了学习 F# 和 .Net，我一直在玩即将发布的 DLR。

为此，我一直在玩反射，努力实现一个与 clr 完美集成的基本类型系统。虽然我能够实例化一个扩展 Object 的简单类型，但在调用它定义的方法时出现错误。

因为在一天结束时 DLR LambdaExpressions 编译为委托，我所做的是从生成的委托中取出生成的 MethodInfo 并调用它，用生成的方法的参数填充堆栈。然后返回它。正是在这一点上，我得到了我的错误。

这是我的代码：

```
open System
open System.Reflection
open System.Reflection.Emit

type ConstructorInformation=
    {Types:System.Type array}

type MethodInformation=
    {ParamTypes:System.Type array;
     Name:string
     Impl:System.Delegate}

let rec addConstructors (t:TypeBuilder) (baseType:System.Type) constructorInfos =
    match constructorInfos with
        |ci::rest ->
            let cb = t.DefineConstructor(MethodAttributes.Public, CallingConventions.Standard,ci.Types)
            let ilGen = cb.GetILGenerator()

            ilGen.Emit(OpCodes.Ldarg_0)
            Array.iteri (fun (index:int) _-> ilGen.Emit(OpCodes.Ldarg, index+1)) ci.Types
            ilGen.Emit( OpCodes.Call, baseType.GetConstructor(ci.Types) )
            addConstructors t baseType rest
        |[] -> ()

let rec addMethods (tb:TypeBuilder) baseType methodInfos =
    match methodInfos with
    |mi::rest ->
        let mb = tb.DefineMethod(mi.Name, MethodAttributes.Public, typeof<obj>, mi.ParamTypes)
        let ilGen = mb.GetILGenerator()
        ilGen.Emit(OpCodes.Ldarg_0)
        Array.iteri (fun index _ -> ilGen.Emit(OpCodes.Ldarg, index+1)) mi.ParamTypes
        ilGen.EmitCall(OpCodes.Call, mi.Impl.Method, mi.ParamTypes)
        ilGen.Emit(OpCodes.Ret)
        addMethods tb baseType rest
    |[] -> ()

let defineType (baseType:System.Type) constructorInfos methodInfos= 
    let ab =  AppDomain.CurrentDomain.DefineDynamicAssembly( AssemblyName("test"), AssemblyBuilderAccess.Run)
    let mb = ab.DefineDynamicModule("test")
    let typeBuilder = mb.DefineType("testType", TypeAttributes.Public, baseType)// | TypeAttributes.Class
    addConstructors typeBuilder baseType constructorInfos
    addMethods typeBuilder baseType methodInfos
    typeBuilder.CreateType()

type Delegate1 = delegate of obj -> obj
let echo y:#obj= (y :> obj)
let del1 : Delegate1 = new Delegate1(echo)

let mis:MethodInformation list=[{Impl=del1; Name="Echo"; ParamTypes=[|(typeof<obj>)|]}]
let cis:ConstructorInformation list=[]
let t= defineType (typeof<obj>) cis mis
let cinfo = t.GetConstructor([||])
let instance =cinfo.Invoke([||])
instance.GetType()
(t.GetMethod("Echo")).Invoke(instance, [| (1:>obj)|]) 
```

这是我的错误，来自 fsi：

```
System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.MethodAccessException: clo@51.Invoke(System.Object)
   at testType.Echo(Object )
   --- End of inner exception stack trace ---
   at System.RuntimeMethodHandle._InvokeMethodFast(Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeTypeHandle typeOwner)
   at System.RuntimeMethodHandle.InvokeMethodFast(Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeTypeHandle typeOwner)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at <StartupCode$FSI_0002>.$FSI_0002._main()
stopped due to error 
```

任何帮助或建议将不胜感激 - 我有点 .Net 新手，所以我的错误可能很简单。

迈克·科胡特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T17:20:34.020

嗯，我解决了。生成的 cil 不好。此外，我必须对委托进行动态调用，而不是它所面对的函数。

```
#light

open System
open System.Reflection
open System.Reflection.Emit

type ConstructorInformation=
    {Types:System.Type array}

type MethodInformation=
    {ParamTypes:System.Type array;
     Name:string;
     Impl:System.Delegate;
     mutable Field:FieldBuilder option}

let rec addConstructors (t:TypeBuilder) (baseType:System.Type) constructorInfos =
    match constructorInfos with
        |ci::rest ->
            let cb = t.DefineConstructor(MethodAttributes.Public, CallingConventions.Standard,ci.Types)
            let ilGen = cb.GetILGenerator()

            ilGen.Emit(OpCodes.Ldarg_0)
            Array.iteri (fun (index:int) _-> ilGen.Emit(OpCodes.Ldarg, index+1)) ci.Types
            ilGen.Emit( OpCodes.Call, baseType.GetConstructor(ci.Types) )
            addConstructors t baseType rest
        |[] -> ()

let rec addMethods (tb:TypeBuilder) baseType methodInfos =
    match methodInfos with
    |mi::rest ->
        let fb = tb.DefineField(mi.Name+"_field", typeof<Delegate>, FieldAttributes.Public);
        mi.Field <- Some(fb)
        let mb = tb.DefineMethod(mi.Name, MethodAttributes.Public, typeof<obj>, mi.ParamTypes)
        let ilGen = mb.GetILGenerator()
        let arrayLocal = ilGen.DeclareLocal((typeof<obj[]>))
        ilGen.Emit(OpCodes.Ldarg_0)
        ilGen.Emit(OpCodes.Ldfld, fb)
        ilGen.Emit(OpCodes.Ldc_I4, Array.length mi.ParamTypes)
        ilGen.Emit(OpCodes.Newarr, typeof<obj>)
        ilGen.Emit(OpCodes.Stloc, arrayLocal)
        ilGen.Emit(OpCodes.Ldloc, arrayLocal)
        Array.iteri (fun index _ -> ilGen.Emit(OpCodes.Ldc_I4, index)
                                    ilGen.Emit(OpCodes.Ldarg, index+1)
                                    ilGen.Emit(OpCodes.Stelem_Ref)
                                    ilGen.Emit(OpCodes.Ldloc, arrayLocal)) mi.ParamTypes
        ilGen.EmitCall(OpCodes.Callvirt, (mi.Impl.GetType()).GetMethod("DynamicInvoke", [|(typeof<obj[]>)|]), mi.ParamTypes)
        ilGen.Emit(OpCodes.Ret)
        addMethods tb baseType rest
    |[] -> ()

let defineType (baseType:System.Type) constructorInfos methodInfos= 
    let ab =  AppDomain.CurrentDomain.DefineDynamicAssembly( AssemblyName("test"), AssemblyBuilderAccess.Run)
    let mb = ab.DefineDynamicModule("test")
    let typeBuilder = mb.DefineType("testType", TypeAttributes.Public, baseType)// | TypeAttributes.Class
    addConstructors typeBuilder baseType constructorInfos
    addMethods typeBuilder baseType methodInfos
    typeBuilder.CreateType()

type Delegate1 = delegate of obj -> obj
let echo y:#obj= (y :> obj)
let del1 : Delegate1 = new Delegate1(echo)

type Delegate2 = delegate of obj * obj -> obj
let echoFirst (x:#obj) (y:#obj)=(x:>obj)
let echoFirstDelegate:Delegate2 = new Delegate2(echoFirst)
echoFirstDelegate.DynamicInvoke( [|(1:>obj);(2:>obj)|])
//let mis:MethodInformation list=[{Impl=del1; Name="Echo"; ParamTypes=[|(typeof<obj>)|];Field=None}]
//let cis:ConstructorInformation list=[]
//let t= defineType (typeof<obj>) cis mis
//let cinfo = t.GetConstructor([||])
//let instance =cinfo.Invoke([||])
//instance.GetType()
//(t.GetField("Echo_field")).SetValue(instance, del1)
//let fieldDelegate = (t.GetField("Echo_field")).GetValue(instance) :?> Delegate
//(t.GetMethod("Echo")).Invoke(instance, [| (1:>obj)|])

//del1.DynamicInvoke( [|(1:>obj)|])

let mis:MethodInformation list=[{Impl=del1; Name="Echo"; ParamTypes=[|(typeof<obj>)|];Field=None};
                                {Impl=echoFirstDelegate; Name="EchoFirst"; ParamTypes=[| (typeof<obj>);(typeof<obj>)|]; Field=None}]
let cis:ConstructorInformation list=[]
let t= defineType (typeof<obj>) cis mis
let cinfo = t.GetConstructor([||])
let instance =cinfo.Invoke([||])
instance.GetType()
(t.GetField("Echo_field")).SetValue(instance, del1)
let fieldDelegate = (t.GetField("Echo_field")).GetValue(instance) :?> Delegate
(t.GetMethod("Echo")).Invoke(instance, [| (1:>obj)|])
(t.GetField("EchoFirst_field")).SetValue(instance, echoFirstDelegate)
(t.GetMethod("EchoFirst")).Invoke(instance, [| (1:>obj);(2:>obj)|]) 
```

# java - 在 Spring MVC 应用程序中修复 Null EntityManger？

> ID：888581
> 
> 赞同：7
> 
> 时间：2009-05-20T15:20:34.767
> 
> 标签：java, spring, jpa, spring-mvc, entitymanager

在下面的代码中，我注入的 EnitityManager 有问题，它**总是显示为 null**；

```
public class GenericController extends AbstractController {

    @PersistenceContext(unitName = "GenericPU")
    private EntityManager em;

    protected ModelAndView handleRequestInternal(
            HttpServletRequest request,
            HttpServletResponse response) throws Exception {
        //(em == null) is always trigged
        if (em == null) throw new NullPointerException("em is null");
        Collection<Generic> Generics = em.createNamedQuery("Generic.findAll").getResultList();

        ModelAndView mav = new ModelAndView("Generic");
        mav.addObject(Generics); 
        return mav;
    }
} 
```

*这是在dispatcher-servlet.xml*中定义的 bean 定义。

```
<bean id="Generic" class="com.application.web.GenericController" /> 
```

EnitityManager 应该基于 tx:annotation-based 注入，在*persistence-context.xml*文件中定义。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd">

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.microsoft.sqlserver.jdbc.SQLServerDriver" />
        <property name="url" value="removed" />
        <property name="username" value="removed" />
        <property name="password" value="removed" />
    </bean>

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="persistenceUnitName" value="GenericPU" />
        <property name="dataSource" ref="dataSource" />
        <property name="jpaDialect">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />
        </property>
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="showSql" value="true" />
                <property name="generateDdl" value="false" />
                <property name="databasePlatform" value="org.hibernate.dialect.SQLServerDialect" />
            </bean>
        </property>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory"/>
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager" proxy-target-class="true"/>

    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>

</beans> 
```

*持久性上下文是从applicationContext.xml*加载的

 *```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd">    
    <import resource="classpath:META-INF/persistence-context.xml"/>
</beans> 
```

类路径导入已完成，因为 ORM 实体作为 JAR 文件包含在项目中。请注意，我相信持久性上下文正在加载，因为如果 Spring 无法解析其配置文件，它将不允许部署应用程序。

这是我的*persistence.xml*。

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
  <persistence-unit name="CoolOrmJpaPU" transaction-type="RESOURCE_LOCAL">
    <class>com.application.orm.jpa.Generic</class>
    <!-- bunch more classes -->
  </persistence-unit>
</persistence> 
```

还有我的*web.xml*

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>2</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>*.htm</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>redirect.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

有谁可以帮我离开这里吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T19:17:08.830

我今天很幸运能够与一位顾问讨论这个问题，他能够帮助我解决整个问题。

所以我的问题是 Spring MVC 建立**了两个不同的上下文**，一个应用程序上下文，定义在 applicationContext.xml 和一个 web 上下文，定义在 dispatcher-servlet.xml 中。

一个上下文中的 bean 不能与另一个上下文中的 bean 对话，因此当我在 applicationContext.xml 中初始化我的持久性上下文时，我无法在 dispatcher-servlet.xml 加载的 bean 中访问它，即我的控制器。

当 Netbeans 自动为我的 Spring MVC 生成基础时，它默认设置了它。在一些大型 Web 应用程序中，将应用程序的 Web 部分与其他逻辑（持久性、业务代码等）区分开来是有意义的。就我而言，我试图将我的实体管理器直接自动注入到我的控制器中，这对我不利。

为了解决这个问题，我移动了这条线

```
<import resource="classpath:META-INF/persistence-context.xml"/> 
```

从 applicationContext.xml 到我的 dispatcher-servlet.xml。然后，我的控制器从 @PersistanceContext 注释中正确地注入了 EntityManagers。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T15:58:59.883

我认为您需要一个文件`persistence.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0"
    xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">

  <persistence-unit name="GenericPU">
     <class>com.domain.MyClass</class>
  </persistence-unit>

</persistence> 
```

我认为如果文件具有不同的名称，它将不起作用，尤其是因为您没有在任何地方告诉 EntityManager 工厂新名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T16:54:00.427

我曾经使用较旧的 spring 版本，当您必须将 setProperty() 放入 bean 并在 spring-bean 定义中设置属性标记时，例如：

```
<bean id="Generic" class="com.application.web.GenericController" />
    <property name="em" ref="entityManager" />
</bean> 
```

也许您应该使用 transactionManager 或 entityManagerFactory bean...

PD：我个人更喜欢注入依赖项的旧方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T19:03:18.683

你包括了吗

```
<context:annotation-config /> 
```

在您的春季 XML 中。参考[这里](http://static.springframework.org/spring/docs/2.5.x/reference/xsd-config.html#xsd-config-body-schemas-context)

# eclipse - 在 TreeViewer 中为行着色

> ID：888593
> 
> 赞同：3
> 
> 时间：2009-05-20T15:21:38.867
> 
> 标签：eclipse, user-interface, plugins, jface

如何在 TreeViewer 中为行着色？

似乎自上一个版本以来发生了一些变化，现在我们正在迁移到 Eclipse 3.4。

如果您可以提供代码示例或将我指向执行此操作的开源项目，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-12-19T12:19:29.727

您可以将 ColumnLabelProvider 与覆盖`getBackground`方法一起使用：

```
TreeViewerColumn column = new TreeViewerColumn(treeViewer, SWT.NONE);
column.getColumn().setText("Column name");
column.setLabelProvider(new ColumnLabelProvider() {
    @Override
    public String getText(Object element) {
        return element.toString();
    }

    @Override
    public Color getBackground(Object element) {
        return new Color(Display.getCurrent(), 0, 255, 0);
    }
}); 
```

# java - Eclipse 在单独的窗口中打开控制台应用程序

> ID：888599
> 
> 赞同：21
> 
> 时间：2009-05-20T15:21:59.880
> 
> 标签：java, eclipse, debugging

当您运行/调试它们时，有没有办法配置 eclipse 在新窗口中打开控制台应用程序而不是它自己的控制台？

我正在调试一个客户端/服务器应用程序，我想同时查看这两个应用程序的输出，而不必在选项卡之间切换......

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-05-20T15:29:56.510

在 Eclipse 中，您可以有两个控制台视图...在控制台视图上，您​​有一个名为“打开控制台”的按钮（控制台视图中最右边的按钮）。如果单击此选项并选择选项 3（新控制台视图），您将看到两个控制台。

如果您右键单击控制台选项卡并单击“分离”，则控制台将从 Eclipse 框架中分离。（对于 Eclipse Juno，请参阅下面的 HRJ 评论）

您可以通过单击“显示选定的控制台”按钮（控制台视图右侧的第二个按钮）来选择要在每个控制台上看到的输出

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T19:01:29.033

我对此有一个不同的解决方案，适用于我的情况，并且可能会被其他人适应。

我实际上想要一个真正的第二个控制台窗口——在我的例子中是 gnome-terminal。我想要这个是因为我想要 ANSI 颜色支持并且我想要 JLine 正确运行。我可以单独启动我的程序并远程连接以进行调试，但这很烦人。

找到运行 Java 的位置，因为 JRE eclipse 将作为调试配置的一部分运行。在那里创建一个名为 gjava 的脚本，为其提供以下内容，并将其设置为可执行文件：

```
#!/bin/sh
gnome-terminal -x java $* 
```

然后，在您的启动配置中，在公共页面上，取消选中“分配控制台”。在 JRE 页面的 Java 可执行文件下，选择“Alternate”并输入 gjava。

当 Eclipse 在调试模式下启动时，它将启动一个 gnome 终端并将剩余的参数传递给 Java 处理器，该处理器将在其窗口内运行。

此时，您就有了一个真正的控制台，它支持 JLine、ANSI 颜色和完整的调试支持。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-28T10:18:19.730

当您创建第二个控制台时，单击“Pin Console”，这将使控制台连接到它用于的最后一个应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-29T19:44:33.600

这是一个老问题，但我遇到了这个问题——就我而言，我有一个 Python 程序，我想在单独的 DOS 窗口中运行。

我的解决方案是在“外部工具”下为 CMD.exe 创建一个运行配置。

*   我打开了`Run > External Tools > External Tools Configurations...`
*   我右键单击`Program`（在左侧）并选择`New Configuration`并将其命名为“RunFooUnderCMD”（Foo 是我的项目）
*   在“位置”下，我把`C:\Windows\System32\cmd.exe`
*   在“工作目录”下，我放了`${workspace_loc:Foo/}`
*   在“参数”下，我将以下所有内容放在一行中：

```
/c start cmd /c python -u ${workspace_loc:Foo/path/to/startup.py} 
```

*（请注意，即使是 Windows，我也使用了正斜杠）*

并单击“应用”和“关闭”。

瞧！我可以导航到“运行 > 外部工具 > 1 RunFooUnderCMD”并运行我的程序。

Eclipse 还自动提供更多菜单快捷方式；探索这些留给读者作为练习。:-)

# x86 - 为什么主 PIC 的中断结束会导致三重故障（重启）？

> ID：888603
> 
> 赞同：4
> 
> 时间：2009-05-20T15:22:42.000
> 
> 标签：x86, interrupt, hobby-os

好的，在学校我们正在开发一个操作系统。我的项目一直是开发一个 ATA 硬盘驱动程序。当我的教授指出我只是向从 PIC 发送中断结束命令而不是主 PIC 时，我认为我的中断服务程序运行良好。

我的问题是，每当我向主 PIC 发送中断结束时，它会导致三重故障，然后导致我的系统重新启动。现在我已经取消/注释了一堆行，似乎每当将中断结束发送到主 PIC 的函数留在代码中时，我都会遇到三重错误。

现在我很确定以下几点：

1.  进入我的 ISR 时中断被禁用
2.  我正在正确发送中断结束字节（经过类测试）
3.  我没有重新确认相同的中断

这引起了巨大的挫败感，所以我希望有人可以在不需要查看我们的代码的情况下给我一些指导。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T15:28:57.433

我只能猜测这个。这里有一些事情要检查。

*   EOI 是否超出了您的细分市场限制？
*   EOI 是否在只读页面上？
*   您的中断处理程序是否具有访问 EOI 的正确权限级别？
*   您是否使用了正确的段寄存器？

其中任何一个都可能导致故障。如果描述符表损坏或开始时设置不正确，这反过来可能导致双重或三重错误。

# c# - C#中的可靠多播

> ID：888604
> 
> 赞同：0
> 
> 时间：2009-05-20T15:22:48.067
> 
> 标签：c#, networking, network-programming, messaging, network-protocols

在 c#/.Net 3.5 中，我有哪些可靠多播的选项？

我不想使用 MSMQ。

我对商业和开源选项持开放态度。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T16:26:54.367

看看[EmCaster](http://code.google.com/p/emcaster/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T16:41:06.820

[http://www.29west.com/](http://29west.com "29西")声称是可用的最低延迟可靠多播解决方案。我还没有证实这个说法，但在与他们交谈时，他们最大的竞争似乎不是其他供应商，而是内部开发。为什么不直接建立自己的多播组，直接使用呢？“Unix Network Programming Volume 1”的第 21 章描述了如何做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T05:36:33.870

在评估了一堆之后，我用过的最好的是[Mesongo RMF——](http://www.mesongo.com/rmf.aspx)它有一个非常干净的 API 和良好的监控工具。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T16:30:46.560

[ActiveMQ](http://activemq.apache.org/)是 Apache 组织的优秀产品。有很多语言的绑定，包括 C#。

在商业世界中， [Tibco EMS](http://www.tibco.com/software/messaging/enterprise-message-service/default.jsp)是一个不错的选择。它有 C# 和 Java 的绑定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T18:00:04.397

实用的变体，PGM，它在你的 Windows 映像中，在说 server 2003 上寻找它，甚至是 XP 和朋友.. 有它的套接字选项（Rdm 或类似的）。

# c++ - 是否可以在 STL 映射中使用自定义类代替 std::pair？

> ID：888611
> 
> 赞同：2
> 
> 时间：2009-05-20T15:24:39.327
> 
> 标签：c++, map, std-pair

这可能吗？

```
#include <map>

class Example {

  private:
  std::map<std::string, std::string, less<std::string>,
    std::allocator< CustomPair<std::string, std::string> > > myMap;
}; 
```

在上面的示例中，CustomPair 将是一个包含键和值的模板类。如果这是可能的，那么简单还是我应该注意什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T15:30:08.227

只能推测你的真正意图是什么，所以我假设你已经有一个包含键和值的类。在这种情况下，带有自定义比较的 std::set 可能是比 std::map 更好的选择。

然后，您需要提供一个仅比较类的关键部分的比较，并且只要对象在集合中，关键部分就必须是 const （不随时间变化）。正如评论中提到的，集合的元素只能作为 const 访问，因此如果要更改此类元素的值，则需要 const_cast 写入访问权限或声明成员可变。

在另一个答案**中，iain**提出了另一个非常好的建议。如果您很少插入容器并且主要访问容器以搜索元素，那么排序的 std::vector 和 std::binary_search 是该集合的非常有效的替代方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T15:30:51.093

我更有可能使用 std::set。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-20T16:27:28.733

我会使用 lothar 描述的集合，或者使用`std::vector`“有效 STL”第 23 章中描述的排序：“考虑用排序向量替换关联容器”。

这样做的原因是`std::binary_search`带有自定义比较器的排序向量的速度几乎与地图查找一样快，有时甚至更快，并且迭代速度要快得多。虽然插入操作更昂贵（您必须在每次插入后调用排序）。但是，许多地图用例很少插入。

向量将比集合更灵活。

我用这种方法替换了包含 2000 个复杂对象（由 int 索引）的映射，在服务器类系统上，迭代和处理映射中的每个对象从 50 秒缩短到不到 5 秒。地图查找时间没有明显差异。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-05-20T16:00:30.957

我认为你可以做到但不会得到预期的效果，因为使用`std::allocator`将通过 完成`rebind<std::pair>`，从而覆盖你对`CustomPair`. 事实上，你放什么类型可能并不重要，STL 函数会忽略它。至少他们中的一些人肯定会这样做，但我不确定所有人都会这样做。严格来说，这几乎可以肯定是依赖于实现的。我不知道标准是怎么说的。

# c# - Model-View-Presenter：验证 UI

> ID：888613
> 
> 赞同：3
> 
> 时间：2009-05-20T15:25:05.177
> 
> 标签：c#, validation, user-interface, mvp

我正在寻找关于如何在模型-视图-演示者架构中进行 UI 验证的最佳实践方法。

我需要验证一些带有很多控件的表单。为了方便用户，我将所有错误或警告与控件的引用一起存储在日志中，然后显示给用户，以便他可以立即跳转到他必须修复的控件。这是在视图部分完成的，这实际上是错误的，因为验证应该在演示者中进行以交换视图。

对我来说，在演示者中进行此验证的问题在于，它不仅要检查提供的值是否错误，还需要检查单选按钮是否已被选中以启用文本框，例如，该文本框必须包含一些文本。

我正在考虑在演示者中使用 BindingSource，因为它反映了 UI 更改并且对演示者可见。但我不确定这是否是正确的方法（我认为这有点难看）？

顺便说一句：验证不仅仅发生在我写入数据库之前；它已经在用户处理表单时发生。

谁能想到这样做的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-30T10:41:44.197

我们终于找到了解决办法。它将按照我的预期完成，使用由不同验证器类处理的演示器中的数据集（我们的每个“页面”一个）。最困难的部分是，当控件相互依赖时（但最终它只是检查是否在 DataSet 中设置了值）。目前无法跳转到控件来修复错误，但稍后将通过反射通过将控件的名称传递给 LogEntries 来添加该控件，然后视图可以确定该控件的位置。

# c# - 带有字符串的自定义where子句？

> ID：888616
> 
> 赞同：0
> 
> 时间：2009-05-20T15:26:07.437
> 
> 标签：c#, .net, subsonic

我正在使用两个连接对象的 SubSonic.SqlQuery 返回一个数据集，但我似乎无法弄清楚如何执行这个 where 子句：

```
Month(SubmittedOn)=Month(GETDATE()) AND Year(SubmittedOn)=Year(GETDATE()) 
```

我试着这样做，但它不喜欢 .IsEqualTo(string)：

```
.Where("Month(SubmittedOn)").IsEqualTo("Month(getdate()") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T15:28:08.963

看起来你缺少一个括号。尝试：

```
.Where("Month(SubmittedOn)").IsEqualTo("Month(getdate())") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T16:24:34.910

您只能将值传递给 SubSonic 中的约束方法 (IsEqualTo)，因此以下内容将获取 3 月份提交的所有行：

```
.Where("Month(SubmittedOn)").IsEqualTo(3) 
```

以下将获取当月提交的所有行：

```
.Where("Month(SubmittedOn)").IsEqualTo(DateTime.Now.Month) 
```

# c# - 正则表达式检查打开的标签

> ID：888617
> 
> 赞同：0
> 
> 时间：2009-05-20T15:26:16.843
> 
> 标签：c#, regex

我在制作将返回非自动关闭标签的正则表达式时遇到问题。所以我希望它返回如下标签：

```
<blah> 
```

但不是这样的标签：

```
<blah/> 
```

我有以下正则表达式：

```
<(o|p)(.*?)> 
```

稍微简化了一点，尽管它很奇怪，但忽略它所做的其余部分。这将匹配所有标签，但我需要一个忽略标签自动关闭的匹配项。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T15:28:17.450

试试这个正则表达式：

```
<(?:o|p)(?:[^"'>/]+|"[^"]*"|'[^']*')*> 
```

假定有效的 XHTML 语法。

# continuous-integration - 烟雾测试应该有多复杂？

> ID：888622
> 
> 赞同：2
> 
> 时间：2009-05-20T15:26:39.900
> 
> 标签：continuous-integration, smoke-testing

因此，在这一点上，我们已经在当前项目上运行了很多个月的每日构建。不过，与日常构建一起进行的冒烟测试并不是很复杂——我们在我们的主类库上运行了一些 nUnit 测试（诚然，它并没有提供很好的代码覆盖率），并且我们确保事情可以编译并建造。有问题的应用程序是一个 ASP.NET 站点，它使用一些业务对象（包括 LINQ-to-SQL）。

我们是否应该运行更复杂的冒烟测试，尤其是在 ASP.NET 站点上？就此而言，我们将如何为 ASP.NET 站点开发冒烟测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T15:39:34.133

除了单元测试之外，最好将站点启动到带有一些示例数据的登台服务器。尽可能接近生活。然后使用 HTTP 流量生成脚本来模拟用户流量和会话。您可以在后端监控调试日志、异常和其他测试代码。您还可以在此处进行性能测量。

就像你自己在浏览器中使用它的更激烈的迭代版本一样。

您可以通过定义（或通过检查）您的公共资源及其输入来做到这一点。然后，这些脚本可以尝试并导致验证问题、站点流程的奇怪排列以及在实时设置中测试站点整个上下文的其他事情。

如果测试不完整……从单元测试到“它是否与真实数据和流量配合得很好”，那么您最终将像无头鸡一样在稍后修复错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T15:46:15.510

从本质上讲，冒烟测试应该是肤浅的：它可以编译吗？部署？欢迎页面是否加载？也许加载一个测试页面，该页面对数据库进行查询以查看此连接是否也有效。就是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T15:42:37.733

你不应该做冒烟测试。你知道这个词的词源吗？电子产品中的“烟雾测试”是指您打开电源并查看是否有烟雾冒出。

您应该进行更全面的单元测试；足以为您提供良好的代码覆盖率。这是您在每次构建时都应该执行的操作。您还应该尝试进行部署，并运行一些“安装验证测试”。

# c# - c#中的动态RSS提要

> ID：888624
> 
> 赞同：0
> 
> 时间：2009-05-20T15:27:55.280
> 
> 标签：c#, dynamic, rss, feed

什么是创建动态 RSS 提要的好方法？目前，我编写了一个能够创建静态文件的函数，但我只是好奇在某些时间/天运行它的最佳方法是什么？例如，我创建了一个列出今天发生的所有项目的 RSS 提要，并且我希望它在上午 12:01 填充。我还写了另一个 RSS 提要，列出了下一个要发生的项目。

为了澄清起见，我已经创建了实际制作 Feed 的函数，我只是在寻找一种好方法来安排此过程以定期、可确定的方式运行。

我在 VS 2008 的 .net 3.5 框架上用 C# 编程。

@John - 我正在使用 WebForms，我真的没有充分的理由不只是这样写，我只是创建了静态提要，因为我知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T15:37:24.483

为此使用[计划任务](http://www.codeproject.com/KB/cs/tsnewlib.aspx)怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T15:43:15.953

如果您有权访问 Windows 调度程序，请为此创建一个脚本。如果不是，我会在 12:01 之后首次访问页面时创建它，然后使用缓存技术进行后续调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T15:13:24.813

您可以使用更简单的方法来完成此操作。

只需在您的处理程序中实现文件缓存。将文件名设置为 xml 的创建日期，并在所需时间后忽略该文件。失效后对 rss 的第一个请求将从您的数据库中获取数据。

# java - 休眠 - 更新/选择后相同的结果

> ID：888632
> 
> 赞同：0
> 
> 时间：2009-05-20T15:29:28.303
> 
> 标签：java, hibernate, select, jpa, caching

hibernateSession.createQuery("select foo where id = 1");
// 此命令返回 id 为 1 的项目。

// [BREAK POINT STOP] ==> 我进入 MySQL 并手动删除此项目。
// [BREAK POINT CONTINU]

hibernateSession.createQuery("select foo where id = 1");
// 此命令也返回 id 为 1 的项目！:-(

与 hibernateSession.flush()/hibernateSession.clean() 相同，
我认为我没有很好地使用我的休眠缓存...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T15:42:51.040

第一个查询将该对象加载到休眠会话中。您删除数据库中的行没有影响，因为您使用的是同一个会话。

您需要启动一个新会话或从会话中[逐出](https://www.hibernate.org/hib_docs/v3/api/org/hibernate/Session.html#evict(java.lang.Object))对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T15:41:41.977

绝对是缓存问题。您使用的是同一个会话吗？尝试关闭会话并从工厂获取一个新会话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T17:20:21.810

尝试这个

```
Object o = hibernateSession.createQuery("select foo where id = 1").uniqueResult();

// [BREAK POINT STOP] ==> I go in MySQL and I delete this item manualy.

hibernateSession.evict(o);
hibernateSession.createQuery("select foo where id = 1"); 
```

如果可行，那么您的问题在于 L1 缓存。L1 缓存始终存在，与给定的 Session 对象相关联，并且独立于 L2 缓存，这是所有休眠缓存文档所讨论的内容。L1缓存的目的是满足如果你在同一个会话中两次获得同一个数据库对象，这两个引用将满足r1 == r2的要求。

基本上，当可以同时修改数据库时使用休眠并不简单。

# c# - 防止 DataGridView 自动提交对数据绑定对象的编辑

> ID：888638
> 
> 赞同：0
> 
> 时间：2009-05-20T15:30:18.320
> 
> 标签：c#, winforms, datagridview

通过在编辑单元格时自动更新数据源中的基础对象，我的 DataGridView 非常“有用”。我想防止这种情况发生并自己进行更新（这样我就可以通过在我们的自定义撤消管理器中注册的方式执行更新）。

我假设这样做的方法是处理 CellValueChanged 事件，但是当调用事件处理程序时，底层对象已经更新。

是否有防止 DataGridView 这样做的正确方法？也许有一个我可以处理的特定事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T15:36:58.150

这并不能直接回答您的问题，但是我可能会建议您设计您的对象，使其在值更改之前（或之后）引发事件，以便可以通知您的“撤消管理器”。这样你的逻辑就不会绑定到网格上。如果以后您将此对象与其他对象一起使用，您也可以通知其他人有关正在更改的值。我的 0.02 美元

代码示例：

```
public class SomeClass
{
    private int myInt;
    public event EventHandler MyIntChanging;
    public event EventHandler MyIntChanged;

    protected void OnMyIntChanging()
    {
        var handler = this.MyIntChanging;
        if (handler != null)
        {
            this.MyIntChanging(this, new EventArgs());
        }
    }

    protected void OnMyIntChanged()
    {
        var handler = this.MyIntChanged;
        if (handler != null)
        {
            this.MyIntChanged(this, new EventArgs());
        }
    }

    public int MyInt
    {
        get
        {
            return this.myInt;
        }
        set
        {
            if (this.myInt != value)
            {
                this.OnMyIntChanging();
                this.myInt = value;
                this.OnMyIntChanged();
            }

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T15:52:00.897

我完全同意 BFree 的建议。如果您不想遵循这种方式，请使用在数据写入基础对象之前发生的[Datagridview.CellValidating事件，甚至允许取消操作。](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellvalidating.aspx)

# c# - 是否应该避免使用静态类，因为它使依赖注入变得困难？

> ID：888639
> 
> 赞同：8
> 
> 时间：2009-05-20T15:30:24.853
> 
> 标签：c#, dependency-injection, mocking, testability

有人负责创建一组“核心”库，创建了一组静态类，提供各种实用程序，包括日志记录、审计和常用数据库访问方法。

我个人认为这很糟糕，因为我们现在有一组难以测试的核心库，因为我无法模拟/存根这些类或对它们的构造函数进行任何注入。

我想我可以使用 TypeMock 将它们存根，但我宁愿免费做。

你怎么看？

编辑

如果您认为它们不难测试，您能否举例说明如何测试它们。这些静态类实例化其他类型来完成它们的功能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T15:38:38.973

静态类（方法）不一定要避免，只要它们没有隐藏的依赖关系。当然，您可以将依赖项传递给静态方法 - 它不应该存储在内部并修改以后调用的行为。
在这种情况下测试它们也应该没有问题。

但我也对你提到的案例有不好的预感。我知道其中一些静态“包装器”实用程序类 - 在大多数情况下它们真的很臭:)

**编辑：**
也许我应该澄清一下。我只会将静态类/方法用于非常小的杰出任务。当静态类开始初始化依赖项时，当然应该避免它们。如果你不能测试这些静态类，它们就已经有很大的工作要做了。

正如您提到的，在这个问题的[第一个答案中](https://stackoverflow.com/questions/205689/class-with-single-method-best-approach#206481)是反对静态类的论点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T16:50:27.377

修改这些静态类以利用依赖注入有多难？如果您将 DI 设为可选（如果可能），则基本上可以通过正确执行 DI 来使用静态类进行模拟，同时不更改任何“正常”行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-05T17:04:38.727

以下摘自[《对象技术杂志》：将职责与静态方法分离以实现细粒度可配置性](http://www.jot.fm/issues/issue_2012_04/article3.pdf)

> 静态方法通过硬连线实例创建对测试的开发造成障碍。对开源 Smalltalk 代码中的 120 个静态方法的研究表明，在 120 个静态方法中，只有 6 个不能同样很好地实现为实例方法，但事实并非如此，因此给调用者带来了对这些静态方法的隐式依赖的负担

# user-interface - 我怎么能在另一个小部件中使用 QColorDialog 而不是单独的对话框？

> ID：888646
> 
> 赞同：9
> 
> 时间：2009-05-20T15:31:30.127
> 
> 标签：user-interface, qt, qt4, color-picker

我想使用[QColorDialog](http://doc.trolltech.com/4.5/qcolordialog.html)不是作为对话框窗口，而是作为可以插入到布局中的小部件。（更具体地说，作为上下文菜单中的自定义子菜单）

我查看了 QColorDialog 源代码，我可能可以复制 QColorDialog 内部实现的一部分来实现这一点，但是有没有更简洁的方法来做到这一点？我正在使用 Qt 4.5.1 ...

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-26T17:49:05.753

QColorDialog 是一个对话框，这意味着它是一个小部件。您需要做的就是设置一些窗口标志并根据需要将其放入布局中。这是一个（经过测试的）示例：

```
#include <QApplication>
#include <QMainWindow>
#include <QColorDialog>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    /* setup a quick and dirty window */
    QMainWindow app;
    app.setGeometry(250, 250, 600, 400);

    QColorDialog *colorDialog = new QColorDialog(&app);
    /* set it as our widiget, you can add it to a layout or something */
    app.setCentralWidget(colorDialog);
    /* define it as a Qt::Widget (SubWindow would also work) instead of a dialog */
    colorDialog->setWindowFlags(Qt::Widget);
    /* a few options that we must set for it to work nicely */
    colorDialog->setOptions(
                /* do not use native dialog */
                QColorDialog::DontUseNativeDialog
                /* you don't need to set it, but if you don't set this
                    the "OK" and "Cancel" buttons will show up, I don't
                    think you'd want that. */
                | QColorDialog::NoButtons
    );

    app.show();
    return a.exec();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-03-01T17:34:16.500

您可以通过设置正确的窗口标志以非常简单的方式将其清理干净。

```
QColorDialog8 colorDialog = new ....
colorDialog->setWindowFlags(Qt::SubWindow); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T16:20:28.013

您可能想查看一些 Qt 解决方案，它们至少可以完成您想要的部分功能。例如，请参阅[Color Picker](http://www.qtsoftware.com/products/appdev/add-on-products/catalog/4/Widgets/qtcolorpicker/)解决方案，他们注意到它现在也可作为 LGPL 许可的库使用。

作为一种替代方法（并且可能支持较少），我记得 Qt-Labs 中关于将 Qt 小部件（包括`QDialog`s）嵌入到`QGraphicsScene`. 您可能会这样做，然后更改图形场景上的视图，以便只有您感兴趣的颜色选择器对话框的部分对用户可见。然而，这听起来很骇人听闻。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T16:16:05.900

尝试继承 QColorDialog

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-12-17T16:25:59.933

使用`QGraphicsView`并添加`QDialog`到它。`QGraphicsView`如果要显示对话框，请添加到小部件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-22T17:18:16.847

基于@Wiz 的回答，我使用一些 C++11 功能（lambdas 和 auto；与 VS2010 和 gcc 4.6 与 Qt 5.1.1 一起使用）从工具栏按钮上制作了一个弹出菜单：

```
auto dialog = new QColorDialog();
dialog->setWindowFlags( Qt::Widget );
dialog->setOptions( QColorDialog::DontUseNativeDialog | QColorDialog::ShowAlphaChannel );

auto action = new QWidgetAction( 0 );
action->setDefaultWidget( dialog );

auto menu = new QMenu();
menu->addAction( action );

// The dialog-as-widget closes on Ok/cancel, but the menu that holds it 
// doesn't. We connect the two here. Because the dialog hides itself,
// we need to reshow it when the menu is coming up again.
connect( menu,   &QMenu::aboutToShow,     [=] { dialog->show(); } );
connect( dialog, &QColorDialog::rejected, [=] { menu->hide();   } );
connect( dialog, &QColorDialog::colorSelected,
    [=]( const QColor& color )
    {
        menu->hide();
        OnFillColorChanged( color ); // Call the "slot" in this class
    });

auto button = new QToolButton();
button->setIcon( QIcon( ":/images/whatev.png") );
button->setText( tr("Fill") );
button->setStatusTip( tr("Choose fill color") );
button->setMenu( menu );
button->setPopupMode( QToolButton::InstantPopup );
button->setToolButtonStyle( Qt::ToolButtonTextUnderIcon );

toolbar->addWidget( button ); // toolbar is defined elsewhere 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-20T10:21:37.823

基于“金属”的先前回答，我建议您在 QAction 的派生类中创建以下方法：

```
void MyQAction::setPopupDialog(QDialog* dialog) {

  QWidgetAction* action = new QWidgetAction(NULL);
  action->setDefaultWidget(dialog);

  QMenu* menu = new QMenu();
  menu->addAction(action);
  // Fix issues related to the way the dialogbox hide/show. Restablish proper handling,
  // based on our requirement.
  connect(menu, SIGNAL(aboutToShow()), dialog, SLOT(show()));
  connect(dialog, SIGNAL(finished(int)), menu, SLOT(hide()));

  setMenu(menu);
} 
```

这将使任何对话框的过程自动化。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-05-20T16:23:59.270

如果有办法干净地做到这一点，我不知道。在我看来，你有几个选择：

*   将其子类化并复制实际构建小部件的代码，进行编辑以删除创建对话窗口的部分并将其替换为其他容器。
*   如果您不打算使用该特定对话框，则 qt 解决方案中的颜色三角形小部件可能会起作用，因为它不是对话框窗口。您可以在 http://doc.trolltech.com/solutions/4/qtcolortriangle/qtcolortriangle.html 找到它（从链接中删除空格）

# wpf - 为包含按钮的 WPF 用户控件创建自定义单击事件处理程序？

> ID：888647
> 
> 赞同：3
> 
> 时间：2009-05-20T15:31:31.640
> 
> 标签：wpf, user-controls, click, event-handling

在为带有嵌套按钮控件的自定义 WPF 用户控件分配单击事件处理程序时，您是否发现过问题？我愿意。

当您将此类用户控件放在主窗口中时，比如说 Main.xaml，MouseLeftButtonDown 不起作用，但 PreviewMouseLeftButtonDown 就像一个魅力。

但是想象一下，您自己告诉团队中的每个开发人员在使用您的用户控件时使用此事件...您库中的一些用户控件有 MouseLeftButtonDown，其他的 PreviewMouseLeftButtonDown...。这是一团糟，您不同意吗？

所以我有一个解决方案，但我希望有人看看是否有一些优雅的方法可以创建名为“Click”的自定义事件处理程序。

在我的名为 CustomButton.xaml.cs 的用户控件中，到目前为止：

```
public partial class CustomButton: UserControl
{

    public CustomButton()
        : base()
    {
        this.InitializeComponent();

    }

    public delegate void ClickHandler(object sender, EventArgs e);
    public event EventHandler Click;

    public void Button_Click(object sender, RoutedEventArgs e) {//execute daddy's button click
            (((sender as Button).Parent as Grid).Parent as CustomButton).Click(sender, e);

            e.Handled = false;

    } 
```

在我的 CustomButton.xaml

```
<UserControl
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
x:Class="YourCompany.UI.Controls.CustomButton" d:DesignHeight="72.5" d:DesignWidth="200">
<UserControl.Resources>
blablabla
</UserControl.Resources>

<Grid x:Name="LayoutRoot">
    <Button Style="{DynamicResource CustomButton}" 
            Width="{Binding ElementName=CustomButton, Path=ActualWidth}" 
            Cursor="Hand" Foreground="#ffffff" FontSize="28" Margin="8,8,0,12" 
            HorizontalAlignment="Left" 
            Content="Custom Button" Click="Button_Click" />

</Grid> 
```

现在在调用者 Main.xaml 中，我有：

```
<Window x:Class="YourCompany.MyProject.Main"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="MyProject!" Height="600" Width="800" 
MinWidth="800" MinHeight="600" WindowState="Maximized" WindowStartupLocation="CenterScreen"
xmlns:bigbola="clr-namespace:YourCompany.UI.Controls;assembly=YourCompany.UI.Controls">

<mycontrols:CustomButton Name="test" MyImage=".\Images\btnOptions.png" Cursor="Hand" 
            Texto="See options" Click="test_Click"
            Margin="168.367,176.702,253.609,0" ToolTip="See all options" Height="76.682" 
            VerticalAlignment="Top"></mycontrols:CustomButton> 
```

解释：

在用户控件中，当您单击嵌套按钮时，它会执行其父自定义“单击”处理程序。

有没有一种优雅的方式来达到同样的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T15:49:40.387

偏离 mdm20 所说的内容......当您可以更轻松地创建 CustomControl（扩展现有控件功能的控件，例如按钮时，为什么要创建 UserControl（分组为 1 的控件集合） )? 假设 Button 是您在 CustomButton 中想要的唯一控件，我强烈建议您使用 CustomControl 来代替您拥有的东西（UserControl）。

UserControl 与 CustomControl 的示例在[这里](http://www.wpftutorial.net/CustomVsUserControl.html)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T15:42:16.750

如果您实现一个按钮，为什么不直接从按钮派生？

不过，要回答您的问题，您只需要这个。

```
if (Click != null) Click(this, EventArgs.Empty); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T15:40:34.240

这条线不能：

```
(((sender as Button).Parent as Grid).Parent as CustomButton).Click(sender, e); 
```

被替换为

```
this.Click(sender, e); 
```

?

除此之外，尽管答案取决于您想要的确切行为。如果您想单击用户控件的事件以仅在单击内部按钮时触发，那么我认为您以正确的方式处理它。另一方面，如果您希望在单击用户控件范围内的任何位置时触发单击事件，那么您可能是最好的样式或从标准按钮控件继承。请记住，在 WPF 中，按钮的内容可以是任何其他元素，包括另一个按钮。

# asp.net - 对具有一对多关系的对象使用版本乐观锁定时出现 NHibernate StaleObjectStateException

> ID：888650
> 
> 赞同：0
> 
> 时间：2009-05-20T15:32:10.967
> 
> 标签：asp.net, nhibernate

根据 Billy McCafferty 的最佳实践文章中的建议，我正在使用 NHibernate 和 ASP.Net，每个请求都使用一个会话（对不起，我不能包含链接）。我已经成功地使用了版本乐观锁定，将更新的对象保存在 HTTP Session 对象中，并使用 SaveOrUpdate 方法重新附加到 NHibernate 会话。

但是，我的最新页面需要更新一组子对象。我使用了 NHibernate 手册（第 17 章）的父子示例中建议的方法。这在单个请求中加载和保存时有效。但是，当在一个请求中加载、保存在 HTTP 会话中并使用 SaveOrUpdate 在后续请求中重新附加时，我在刷新 NHibernate 会话时会收到 StaleObjectException。即使没有对子对象集合进行任何更改，也会发生这种情况。

对父对象的属性所做的更改会保存到数据库中，因此 NHibernate 似乎试图更新该对象两次。我怀疑这与映射中的级联选项有关，但为了使父/子关系正常工作，这些是必需的。

这是我的映射文件：

**父类映射**

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <class name="NHS.WebTeam.PharmacyFirst.Medication, PharmacyFirst" table="Medication" lazy="false" optimistic-lock="version" where="Deleted=0">
    <id name="ID" column="Medication_ID" unsaved-value="0">
      <generator class="identity" />
    </id>

    <version column="version" name="Version"/>
    <property name="Deleted" column="Deleted" />

    <property name="Name" column="Name" />

    <bag name="Prices" access="field.camelcase-underscore" lazy="false" inverse="true" cascade="all">
      <key column="Medication_ID"/>
      <one-to-many class="NHS.WebTeam.PharmacyFirst.MedicationPrice, PharmacyFirst" />
    </bag>

  </class>
</hibernate-mapping> 
```

**子类映射**

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <class name="NHS.WebTeam.PharmacyFirst.MedicationPrice, PharmacyFirst" table="Medication_Price" lazy="false" optimistic-lock="version" where="Deleted=0">
    <id name="ID" column="Medication_ID" unsaved-value="0">
      <generator class="identity" />
    </id>

    <many-to-one name="Medication" column="medication_id" not-null="true" cascade="none"/>
    <property name="DateFrom" column="Date_From" />
    <property name="Price" column="Price" />

  </class>
</hibernate-mapping> 
```

请有人帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-08-28T19:04:08.427

对于其他发现此问题的人，似乎该问题已在 nhibernate 2.1 中修复，因此您应该更新。

# sql-server - 确保 MS SQL Server、DB 级别中的数据正确

> ID：888651
> 
> 赞同：2
> 
> 时间：2009-05-20T15:32:21.217
> 
> 标签：sql-server, tsql, validation, triggers

假设我有一个具有以下布局的表格：

```
Id  Int PRIMARY KEY IDENTITY
DateFrom datetime NOT NULL
DateTo datetime NOT NULL
UserId Int 
```

UserId 是用户表的外键，显然还有更多与这个问题无关的数据。

我想要做的是确保每个用户，不能有任何重叠的“期间”，也就是说，我们有用户 1 的一行数据，从 2009 年 5 月 15 日到 2009 年 5 月 18 日，则数据库中不能有任何其他行包含任何这些日期（2009 年 5 月 15 日至 18 日，包括两个日期）。

我将如何以最好的方式解决这个问题？我最初的想法是使用触发器，但我不确定如何和/或是否有更好的方法来做一些像这样的更多“自定义”数据验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T15:35:53.410

我的朋友，我相信你是正确的。触发器正是出于这个原因而设计的，用于实施业务规则。

联机丛书文档有一些示例可以帮助您入门。

[http://msdn.microsoft.com/en-us/library/ms189799.aspx](http://msdn.microsoft.com/en-us/library/ms189799.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T15:35:54.110

您需要使用 INSERT/UPDATE 触发器。确保在编写触发器时它可以处理一次插入或更新多行的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T15:55:47.173

一个常见的问题。您可以使用约束：

[http://sqlblog.com/blogs/alexander_kuznetsov/archive/2009/03/08/storing-intervals-of-time-with-no-overlaps.aspx](http://sqlblog.com/blogs/alexander_kuznetsov/archive/2009/03/08/storing-intervals-of-time-with-no-overlaps.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T16:00:41.173

一种方法，特别是如果您的粒度是在日级别（顺便说一下，如果是这种情况并且您是 SQL Server 2008，那么您可能应该使用日期类型而不是日期时间），是另一个表，如：UserId int, Day datetime, Primary Key (UserId, Day) 然后插入、删除、更新用户在原始表中的任何插入、删除、更新的所有天数，只让服务器的唯一性约束PK为你做验证。

# jquery - 在 IE 中使用 jQuery 获取属性

> ID：888653
> 
> 赞同：2
> 
> 时间：2009-05-20T15:32:52.620
> 
> 标签：jquery, internet-explorer, attributes

我有简单的按钮：

```
<button type="button" id="somebutton" value="start">blah</button> 
```

在 jQuery 中，在 bind('click, function(){.... 我有这个：

```
$(this).attr("value") 
```

当然，这样做是获取属性的值，在这种特殊情况下是：“开始”。好的，这在 Firefox 中有效，我得到了正确的“开始”值。但是在 IE 7 中，我得到的值是“somebutton”。

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-12-08T00:33:14.360

我知道这是不久前发布的，但万一有人正在寻找答案......

IE 将 .val() 和 .attr("value") 报告为按钮元素的文本标签（内容），而不是 value 属性的实际值。

您可以通过暂时删除按钮的标签来解决它：

```
var label = $(this).text(); 
$(this).text('');
var buttonValue = $(this).val();
$(this).text(label); 
```

IE 中的按钮还有一些其他的怪癖。我在[这里发布了大多数问题的修复程序](http://gist.github.com/251287)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T15:49:16.813

我以前也遇到过。我不知道为什么会这样`<button>`。它可能是 jQuery 中的错误，也可能是 IE 中的错误，也可能是两者的结合。

最后，我选择了一个标准`<input type="button"/>`来解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-01-29T07:55:12.693

使用 button.attributes.value.nodeValue 应该给你正确的值。有关详细信息，请参阅[jQuery 错误 #1954](http://bugs.jquery.com/ticket/1954)。

关于问题中的原因：您遇到了 IE 的错误之一。在这种情况下，jQuery 还没有提供解决方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T15:51:53.890

要解决此问题，您将不得不丢失`<button>`标签并`<input>`转而使用标签。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T20:43:59.667

使用`<input>`标签。它应该工作

# pdf - LaTeX \newcommand \par 问题

> ID：888657
> 
> 赞同：2
> 
> 时间：2009-05-20T15:34:06.453
> 
> 标签：pdf, latex, pdflatex

当我分配一个新命令并在 \par 的开头调用它时，变量文本和下一个单词之间的空格丢失了。

\newcommand{\testcmd}{这是一个测试}

\par \testcmd foobar。

将呈现为：

这是一个测试foobar。

\par foo \testcmd 吧。

渲染为： foo 这是一个测试栏。

有人遇到过这个并有解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T17:36:46.333

我不知道这里发生的确切事情，但有几种方法可以恢复该空间：

1.  `\newcommand{\testcmd}{This is a test } % <- space before closing brace`
2.  `par \testcmd{} foobar % <- note {}`
3.  最冗长但也是最健壮的方式：

    \使用包{xspace}

    \newcommand{\testcmd}{这是一个测试\xspace}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T22:34:37.070

实际上，一个更简单的答案是：

```
\newcommand{\testcmd}{This is a test}

\par \testcmd \ foobar. 
```

注意 foobar （斜线和空格）之前的额外“\”。不需要额外的包裹。它与最常见的方法相同，例如：

```
Mr.\ Smith
etc.\ and
Proc.\ Amer.\ Math.\ Soc. 
```

# reporting-services - 我如何在 SSRS 中表示未知数量的列？

> ID：888661
> 
> 赞同：9
> 
> 时间：2009-05-20T15:34:22.897
> 
> 标签：reporting-services, sql-server-2000

我正在 Sql Server Reporting Services 中处理一个相当复杂的报告。我的 SP 返回动态数量的列，每个列都是动态命名的。

基本上想到一个计时应用程序。动态的每一列代表一个时间段，该时间段为该团队计费。如果在报告涵盖的时间段内没有向该存储桶收取时间，则不会显示。每个存储桶都有自己的标识符，我需要将其作为列标题。

我有一个返回这一切的 SP。它通过使用 exec 语句执行一些动态 SQL 来做到这一点（我知道很难看，但我在 SQL 2000 上，所以 PIVOT 选项不起作用）

我可以有无限数量的桶，任何或全部都可能显示。

我发现了这个 - [http://www.codeproject.com/KB/reporting-services/DynamicReport.aspx](http://www.codeproject.com/KB/reporting-services/DynamicReport.aspx) - 这很有帮助，但在示例中他的列数有限，他只是根据哪些列隐藏或显示它们价值观。就我而言，我有可变数量的列，所以不知何故我需要报告来添加列。

有什么想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2010-08-12T14:12:51.983

只要您知道最大列数，就可以在一段时间后执行此操作。

首先，使用查询的结果命名列，以便您可以将其传递给查询或在那里派生它。其次，只需构建报表，就好像它具有最大列数，如果它们为空则隐藏它们。

例如，我必须建立一个报告，报告最多一年的月度销售数字，但这些月不一定从一月份开始。我在一列中传递了月份名称，然后是我的报告的数字。在 .rdl 上，我构建了 12 组列，每个可能的月份一组，如果该列为空，则使用表达式隐藏该列。结果是报告似乎扩展到所需的列数。

当然，从某种意义上说，它并不是真正动态的，因为它可以在不知道上限的情况下根据需要扩展。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2011-07-16T02:57:53.520

这是可以做到的。我这样做了，效果很好。在我的方法中，您不必知道最大列数或显示和隐藏列。使用矩阵并修改您的 sp 以将动态数据返回到此博客文章中提到的结构[http://sonalimendis.blogspot.com/2011/07/dynamic-column-rdls.html](http://sonalimendis.blogspot.com/2011/07/dynamic-column-rdls.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-10T03:47:59.640

构建 2 个相关数据集，第一个用于报告内容，第二个用于列标签列表。

报表内容的 Dataset 必须有固定数量的列和名称。您可以分配一些最大数量的列。

在此示例中，我将前 2 列设置为固定或始终可见，并且通过多值参数选择最多显示 4 列，或者取决于查询条件。和往常一样，我们也可能有一个总数。所以，它可能看起来像这样：

```
Fixed01, Fixed02, Dyna01, Dyna02, Dyna03, Dyna04, Total 
```

第二个数据集及其值将如下所示：

```
Name    Label
----    -----
Dyna01  Label01
Dyna02  Label02
Dyna03  Label03 
```

我省略了第四个标签，以证明并非所有列都被某个查询条件使用。请记住，两个数据集都与同一个查询相关。

现在创建一个名为@columns 的参数；使用第二个数据集填充其可用值和默认值。

对于这 4 个动态列中的每一个，使用以下表达式设置列可见性：

```
=IIf(InStr(join(Parameters!columns.Value,","),"Dyna01"),false,true) 
```

对于每个列标题文本框，使用以下表达式：

```
=Lookup("Dyna01", Fields!Name.Value, Fields!Label.Value, "dsColumns") 
```

至于 Total，这里是其可见性的表达式：

```
=       IIf(InStr(join(Parameters!columns.Value, ","), "Dyna01"), false, true)
AndAlso IIf(InStr(join(Parameters!columns.Value, ","), "Dyna02"), false, true)
AndAlso IIf(InStr(join(Parameters!columns.Value, ","), "Dyna03"), false, true)
AndAlso IIf(InStr(join(Parameters!columns.Value, ","), "Dyna04"), false, true) 
```

这是它的价值：

```
= IIf(InStr(join(Parameters!columns.Value, ","), "Dyna01"), Fields!C01.Value, 0)
+ IIf(InStr(join(Parameters!columns.Value, ","), "Dyna02"), Fields!C02.Value, 0)
+ IIf(InStr(join(Parameters!columns.Value, ","), "Dyna03"), Fields!C03.Value, 0)
+ IIf(InStr(join(Parameters!columns.Value, ","), "Dyna04"), Fields!C04.Value, 0) 
```

就这些了，希望对你有帮助。

另外，第二个 Dataset`dsColumns`还可以保存其他列属性，例如：颜色、宽度、字体等。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-18T10:11:41.160

我认为最好的方法是添加表中的所有列，并在您从 SP 获得的参数的帮助下编辑它的可见性属性。这将解决动态列的目的，但是在查看报告时，您会得到很多空白，您可以使用[SSRS 解决这些问题 - 动态隐藏列时保持表格的宽度相同？](https://stackoverflow.com/questions/1440381/ssrs-keep-a-table-the-same-width-when-hiding-columns-dynamically/1440462#1440462)你的报告就准备好了

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T15:44:07.527

我过去曾需要这样做，我得出的结论是“你不能”，但我对此并不积极。如果您找到解决方案，我很想*听听*。

想到的一个问题是，您需要使用要从存储过程中返回的列的名称来定义报告，如果您不知道这些名称或有多少，怎么能你定义报告？

我对如何做到这一点的唯一想法是通过 C# 动态创建报告定义（.rdl 文件），但当时我找不到这样做的 MS API，我怀疑现在是否存在. 我找到了一个开源的，但我没有走那条路。

# windows - 可以生成小型、独立的 Windows EXE 的脚本语言？

> ID：888666
> 
> 赞同：3
> 
> 时间：2009-05-20T15:34:49.027
> 
> 标签：windows, scripting, exe

我想做一些轻量级的数据处理——一些二进制数据操作，然后转换为文本序列化。结果被写入文件，并由外部程序（由我的程序运行）处理。数据处理比我在批处理文件中考虑的要多。

我更喜欢使用脚本语言，但不必先安装该语言。目标计算机大多是较旧的 Windows 机器，它们与网络断开连接（没有更新，例如 PowerShell）

我不熟悉用于创建 EXE 文件的各种语言工具。哪些解决方案运行良好且不会产生大文件？（即，整个解释器包加上我的脚本。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T15:41:59.387

为了我的钱（它是免费的）[AutoIt 3](http://www.autoitscript.com/)正是你想要的。AutoIt 产生相对较小的（250k 是标准开销）小型独立 exe。它有一个完整的 perl 像 regex 引擎，所以你的轻量级数据处理应该是轻而易举的（我自己在里面写了一些非常繁重的数据处理脚本）。[下载 autoit](http://www.autoitscript.com/autoit3/downloads.shtml)时一定要获得包含 Scite 的完整版本，这使得编译到 exe 成为一键式操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T15:38:28.363

我知道我可能会为此感到愤怒，但 VB 6 是一个可行的选择。自 XP SP2（我认为可能更早）以来，Windows 已经安装了它的运行时。不确定远景。

还有使用 VBScript 和 JScript 的 Windows Scripting Host。 [http://en.wikipedia.org/wiki/Windows_Script_Host](http://en.wikipedia.org/wiki/Windows_Script_Host)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-21T18:19:26.210

在等待答案时，我遇到了可以制作 Ruby .exe（我最熟悉 Ruby）的 Shoes 的答案，尽管 2.4MB 的大小比我想要的大一点，但我得到了它的大部分工作。但是，我发现更改应用程序焦点时它会崩溃。

我切换到“常规”终端脚本，发现[ruby​​script2exe](http://www.erikveen.dds.nl/rubyscript2exe/)，在[解决了 ruby​​gems 的问题](http://www.ruby-forum.com/topic/161485)后，它似乎可以工作，并创建了一个 ~700kb 的文件。

我确实喜欢其中的一些选项，但此时不值得重新开发。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-20T16:38:22.953

Lua 是这类东西的绝佳选择。你可以将它集成到你的可执行文件中，或者使用独立的 Lua 解释器来运行你的脚本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-20T16:36:27.297

[Python](http://python.org/)与[py2exe](http://www.py2exe.org/)。取决于你所说的小是什么意思。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T16:42:18.487

您是否考虑过使用 PowerShell 脚本。那里的数据处理可能更丰富。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-20T16:24:46.460

为什么不敲开一个 .NET 应用程序？IDE 有免费版本，并且该框架作为标准组件随 Windows 一起提供（其中还包括一个 C# 编译器，碰巧。）

# iphone - 从 IBAction 获取按钮的文本 - iPhone

> ID：888668
> 
> 赞同：30
> 
> 时间：2009-05-20T15:35:08.403
> 
> 标签：iphone, objective-c, cocoa, interface-builder

当调用 IBAction 时：

```
-(IBAction) onClick1: (id) sender; 
```

发件人传递了什么？由于它是通过 IB 连接的，我不太确定。我的问题是如何让按钮的文本成为传递的对象（最有可能是 NSString），以便我可以在动作实现中调用它。

```
-(IBAction) onClick1: (id) sender {
  NSLog(@"User clicked %@", sender);
  // Do something here with the variable 'sender'
} 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2009-05-20T15:43:24.173

`sender`应该是启动操作的控件。但是，您不应假定它的类型，而应将其定义为`id`. 相反，在实际方法中检查对象的类，如下所示：

```
- (IBAction)onClick1:(id)sender {
    // Make sure it's a UIButton
    if (![sender isKindOfClass:[UIButton class]])
        return;

    NSString *title = [(UIButton *)sender currentTitle];
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-05-20T15:38:55.650

其实是：

```
-(IBAction) onClick1: (id) sender {
  NSLog(@"User clicked %@", sender);
  // Do something here with the variable 'sender'
} 
```

`sender`不是 a `NSString`，它是 type `id`。它只是发送事件的控件。因此，如果您的方法是在单击按钮时触发的，`UIButton`则将发送被单击的对象。您可以以编程方式访问所有标准`UIButton`方法和属性。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2011-02-07T05:43:27.463

```
-(IBAction)onClick:(id) sender {
     UIButton *btn = (UIButton *)sender;

    //now btn is the same object. And to get title directly
    NSLog(@"Clicked button: %@",[[btn titleLabel] text]);
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-10-18T12:26:14.240

只需编写以下代码

```
-(IBAction) getButtonTitle:(id)sender
{
     UIButton *button = (UIButton *)sender; 
     NSString *buttonTitle = button.currentTitle;
     NSLog(@"Button Title %@",buttonTitle);

} 
```

就是这样……你做到了！！！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-20T15:40:05.257

Sender 应该定义为类型 id，而不是 int 或 NSString。发送者是调用该方法的实际对象；如果你将它连接到一个按钮，它将是一个 UIButton，如果它是一个文本字段，一个 UITextField。您可以使用它从控件中获取信息（例如文本字段的当前字符串值），或者如果您有多个控件连接到同一个操作方法，则将其与 IBOutlet 实例变量进行比较。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-11-27T19:00:52.203

您可以使用以下内容获取按钮标签并确定单击了哪个标签：

```
NSLog(@"Clicked button: %@",[[sender titleLabel] text]); 
```

要回答您的问题，id 是来自 IB 的对象。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-02T10:21:12.273

从按钮获取文本：

```
 NSLog(@"Date::%@",[btn titleForState:UIControlStateNormal]); 
```

# c++ - Microsoft 对象，Release() 函数返回值？

> ID：888673
> 
> 赞同：7
> 
> 时间：2009-05-20T15:35:57.993
> 
> 标签：c++, com, pointers, directx, reference-counting

我很好奇，因为我在 MSDN 上找不到这个。我发现该`Release()`函数存在于各种 COM 对象中，我显然应该使用这些对象来删除指针。但我不确定它到底返回了什么？我曾经认为它会返回仍然存在的对剩余对象的引用数，因此类似于：

```
while( pointer->Release() > 0 ); 
```

显然会释放对该指针的所有引用吗？

还是我什么都没看到？

*注意我是从`IDirect3DTexture9::Release()`函数的概念说的

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-20T15:45:07.757

除了 Mehrdad 所说的，Release 的返回值仅用于调试目的。生产代码应该忽略它。

**循环直到 Release() 返回 0 绝对是一个错误**——你永远不应该释放你不拥有的引用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-20T15:41:02.743

你的理论是正确的。COM 内存管理基于引用计数。接口的`Release`方法`IUnknown`将减少引用计数并返回它。该函数不会释放*引用*。它不知道谁持有参考。它只是减少引用计数，直到它达到零，然后对象将被破坏。这是危险的，因为其他人可能仍然持有对它的引用，该引用在对象销毁后将变为无效。

因此，您应该只为您之前调用`Release`的每个调用。`AddRef`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-20T15:46:07.570

Release() 将返回对象的当前引用计数。但你不应该这样做：

```
while( pointer->Release() > 0 ); 
```

这将使引用计数为零并销毁对象。

> 在 COM 中，一个简单的经验法则是每个 AddRef() 都应该有相应的 Release()（只有一个）。

通常 Release() 实现如下所示：

```
int nCount = InterlockedDecrement(&this->m_cRef); //Decrement the ref count
if (nCount == 0) 
{
    delete this;
}
return nCount; 
```

# excel - 将 PowerPoint 幻灯片中的嵌入式 Excel 工作簿导出到 Excel

> ID：888675
> 
> 赞同：0
> 
> 时间：2009-05-20T15:36:16.933
> 
> 标签：excel, vba, export, powerpoint

我有一个带有嵌入式 Excel 工作簿的 PowerPoint 演示文稿，名称： `ThisWorkbook` 我需要导出`ThisWorkbook`到 Excel 文件中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T06:35:06.997

您确定工作表名为“ThisWorkbook”吗？ `ThisWorkbook`是用于引用代码模块所在的工作簿的引用。在插入工作表时，它将被命名为“Presentation1 中的工作表”或类似名称。

要保存文件，您可以在 Excel 代码模块中使用以下内容（当工作表处于活动状态时，Alt+F11）

```
ThisWorkbook.SaveAs Filename:="mypath\myfilename.xls" 
```

# c# - 从 web 服务填充后将项目添加到 Telerik Ajax RadComboBox

> ID：888686
> 
> 赞同：4
> 
> 时间：2009-05-20T15:37:47.367
> 
> 标签：c#, telerik

我正在使用最新的 2009 RadCombobox Ajax 控件，并且正在使用内置功能从 Web 服务中填充它。

我还想再推一个项目到盒子里，这样用户就可以选择不选择任何东西。本质上使控件成为可选的。现在，如果他们选择了某样东西然后改变了主意，他们根本无法将它变回一无所有。

每次我尝试添加一些它不起作用或完全清除从网络服务填充的内容时。而且我不希望 web 服务返回并清空项目只是为了使控件正常工作。

```
<telerik:RadComboBox ID="combo" runat="server"
                    Skin="Office2007"
                    AllowCustomText="false"
                    EnableLoadOnDemand="true" 
                    AppendDataBoundItems="true" 
                    Text=""
                    Width="300" Height="200">
                    <ExpandAnimation Type="None" />
                    <CollapseAnimation Type="None" />
                    <WebServiceSettings Path="~/Service.asmx" Method="GetStuff" />

                </telerik:RadComboBox> 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T18:46:49.140

你有这样的想法吗？加载数据后添加一个额外的项目。

```
 <script type="text/javascript">
    //<![CDATA[
    function OnClientItemsRequested(sender, eventArgs) {
      var combo = $find("<%= RadComboBox1.ClientID %>");
      var intextput = "<All Items>";
      var comboItem = new Telerik.Web.UI.RadComboBoxItem();
      comboItem.set_text(intextput);
      comboItem.set_value("-1");
      combo.trackChanges();

      combo.get_items().add(comboItem);
      comboItem.select();
      combo.commitChanges();
      comboItem.scrollIntoView();
    }
    //]]>
  </script>

 <telerik:RadComboBox runat="server" ID="RadComboBox1" 
      EnableLoadOnDemand="true" 
      OnClientItemsRequesting="OnClientItemsRequesting"
      OnClientItemsRequested="OnClientItemsRequested">
      <WebServiceSettings Method="GetMyData" Path="http://localhost:1606/Service1.asmx" />
    </telerik:RadComboBox> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-07-20T15:13:25.253

除了马格努斯的回答，将项目添加到您会做的顶部

```
combo.get_items().insert(0, comboItem); 
```

客户端文档在这里：

[http://www.telerik.com/help/aspnet-ajax/combo_clientsideradcomboboxitemcollection.html](http://www.telerik.com/help/aspnet-ajax/combo_clientsideradcomboboxitemcollection.html)

# javascript - 服务器端的渐进增强？

> ID：888703
> 
> 赞同：0
> 
> 时间：2009-05-20T15:40:44.070
> 
> 标签：javascript, server-side, progressive-enhancement

目前，我们页面上的许多链接都在页面加载时更改`href="javascript:void(0);"`，但如果您不耐烦（就像大多数用户一样），您可以在页面加载之前单击链接并登陆更笨重、非 JavaScript、非 ajax 的页面。

这些天我在考虑渐进增强，我预测我们的大多数用户都将启用 javascript（还没有数据，我们还没有发布 alpha）

**生成一些指示用户已为会话启用了 javascript，然后提供假定 javascript 的页面是不是一个坏主意？（即让服务器`href="javascript:void(0);"`从一开始就放置）**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T16:09:21.203

为什么不这样做呢？

```
<a href="oldversion.htm" onclick="...something useful......; return false;">link</a> 
```

`return false`告诉浏览器不要继续访问 href 中的 url。

现在 js 访问者得到花哨的 js，非 js 用户默默回退；并且无需在页面加载时更改链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T15:52:50.240

您是否对负载进行渐进式增强？您可以尝试将其移至（跨浏览器版本）DOMReady。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T16:07:47.837

你不能把它委托给文档，以保持你的 HTML 干净吗？

例如，在 jQuery 中：

```
$( document )
    .click( function(){ return false })
    .ready( function(){ $( this ).unbind( "click" ) } ) 
```

# sql-server-2005 - 如何在 SQL Server Management Studio 中查看 SSIS 包？

> ID：888709
> 
> 赞同：79
> 
> 时间：2009-05-20T15:42:04.270
> 
> 标签：sql-server-2005, ssis, ssms

啊！我通过导入向导创建了一个 SSIS 包，但使用 Management Studio 在服务器上找不到 SSIS 包。当我进入作业调度程序时，执行 SSIS 包也不会作为选项出现。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2009-05-20T15:50:51.803

当您启动 SSMS 时，它允许您选择服务器类型和服务器名称。在服务器类型下拉列表中，选择“集成服务”并连接到服务器。

然后你就可以看到数据库中有哪些包。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-20T15:49:53.053

该向导可能将包创建为文件。在您的系统上搜索扩展名为 .dtsx 的文件。这是实际的“SSIS 包”文件。

至于在 Management Studio 中加载它，您实际上并没有通过那里查看它。如果您的计算机上加载了 SQL Server 2005，请查看程序组。您应该找到一个与 Visual Studio 具有相同图标的应用程序，名为“SQL Server Business Intelligence Development Studio”。它基本上是 VS 2005 的精简版，允许您创建 SSIS 包。

创建一个空白解决方案并将您的 .dtsx 文件添加到其中以编辑/查看它。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-17T13:10:45.443

如果您安装了**SQL Server**，还有一个用于查找本地 SSIS 包的菜单选项。

在“*开始”菜单*> “*所有程序*”>“ *Microsoft Sql Server* ”中，应该有一个用于“*集成服务*”>“*执行包实用程序*”的菜单选项（如果 SSIS 包含在您的 SQLserver 安装中，则此选项可用）。

当您打开执行包实用程序时，在“*服务器名称*”文本框中输入您的本地 sql 服务器名称，然后单击“*包*”按钮，您将在弹出窗口中看到您保存的包。从这里你可以运行你之前保存的包

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-07-26T11:49:28.157

1.  打开 SQL Server 管理工作室。
2.  转到连接到服务器并选择服务器类型作为集成服务并提供服务器名称，然后单击连接。
3.  转到左上角的对象资源管理器。
4.  您可以在对象资源管理器中看到 Stored Package 文件夹。
5.  展开 Stored Package 文件夹，在这里您可以看到 SSIS 接口。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-10-10T12:54:32.753

如果将包部署到 SSMS 上的“集成服务目录”，则可以使用 Visual Studio 检索包。

[![在此处输入图像描述](https://i.stack.imgur.com/GCkQO.png)](https://i.stack.imgur.com/GCkQO.png)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-01-02T22:58:23.003

遇到计划作为 sql 作业运行的 SSIS 包，您可以通过查看 sql 作业属性来确定 SSIS 包的位置；SQL作业->属性->步骤（从左侧选择页面）->选择作业（从作业列表）->编辑->作业步骤属性显示这获得了SSIS包的所有配置，包括其原始路径，在我的情况下，它在“MSDB”下</p>

现在连接到 sql 集成服务；- 打开 sql management studio - 将服务器类型选择为“集成服务” - 输入服务器名称 - 您将在“存储包”下看到您的 SSIS 包

要编辑包右键单击并导出到“文件系统”，您将获得扩展名为 .dtx 的文件，它可以在 Visual Studio 中打开，我使用的是 Visual Studio 2012 版本

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2020-04-22T07:33:36.660

1.  您可以在对象资源管理器的集成服务选项下找到它。
2.  您可以在部署所有包的集成服务目录下找到这些包。

# c++ - 如何在不将它们放入编译器库文件夹的情况下链接 .lib 文件？

> ID：888718
> 
> 赞同：2
> 
> 时间：2009-05-20T15:43:12.427
> 
> 标签：c++, linker

我的代码中有没有一种方法可以链接到我需要的库文件，这样我就不必设置我使用的每个单独的编译器？

我希望能够使用 Visual C++.net 2005、G++ 等。我正在尝试制作一个跨平台的游戏引擎，但有些平台使用自定义编译器，我想让我的引擎尽可能多才多艺。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T17:57:43.933

有一个名为[mpc](http://www.ociweb.com/products/mpc)的工具可以从同一个[mpc DSL](http://en.wikipedia.org/wiki/Domain-specific_language)创建 makefile 和 VC 项目。如果您使用该工具，您将在 pmc 文件中指定链接依赖项（库）一次，它会生成 g++ 的 makefile 和 Visual Studio 的项目文件，其中包含有关如何链接库的必要信息。

从[mpc](http://www.ociweb.com/products/mpc)主页：

> 支持多个版本的 make（GNU、Microsoft、Borland、Automake）、Visual C++ 6.0 和 Visual Studio 2003、2005 和 2008。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T03:21:04.653

我不完全理解您的问题，确定有一种方法可以通过 Visual C++ 的 -L dir 选项在 UNIX 中指定您的库，看来您可以使用 /LIBPATH 来覆盖环境库路径。

我怀疑您是否希望在代码中执行此操作，因为库路径通常与头文件不同。

您可能希望创建一个自定义 make 文件，为您使用的不同平台和工具设置正确的编译器选项和路径。似乎这就是建议的 mpc 工具试图完成的任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T15:47:07.847

我知道 Visual C++ 有`#pragma`注释行。不确定其他人是否这样做。

```
#pragma comment(lib, "SomeLib.lib") 
```

你可能想看的是Scons。[http://www.scons.org/wiki/FrequentlyAskedQuestions#head-00ce208eece451fe9879c6f8dd1c45b56f4c76d1](http://www.scons.org/wiki/FrequentlyAskedQuestions#head-00ce208eece451fe9879c6f8dd1c45b56f4c76d1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T15:48:33.383

我认为这会帮助你：

```
#ifdef _DEBUG
#   pragma comment( lib, "dir1/dir2/mylibd.lib" )
#else
#   pragma comment( lib, "dir1/dir2/mylib.lib" )
#endif 
```

编辑：可能 g++ 不支持通过代码进行链接。Daniel 建议使用 makefile，这将是一个不错的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-21T04:31:29.090

Qt 的 qmake 听起来类似于 mpc。您在 .pro 文件中定义项目和参数，然后 qmake 创建一个 Makefile 或 Visual Studio 项目文件。

这是跨平台开发的痛点之一，但好消息是所需的库列表通常不会经常更改。

# opengl - 如何在单个 glVertexPointer 中批处理相同的正方形

> ID：888722
> 
> 赞同：1
> 
> 时间：2009-05-20T15:43:52.847
> 
> 标签：opengl

我读过那篇文章来优化绘图，可以一次使用相同的纹理绘制一组图形。
但是我如何将我的单打正方形连接在一起以形成一个发送到 glVertexPointer 的图形。

（阅读[PowerVR MBX.3D 应用程序开发建议.1.0.67a](http://www.imgtec.com/factsheets/SDK/PowerVR%20MBX.3D%20Application%20Development%20Recommendations.1.0.67a.External.pdf) - 第 5 页）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T13:26:25.410

我认为您正在考虑“软件转换”步骤。我假设您有一个正方形的某种顶点数组，并且想将该数组的几个不同实例连接成一个包含正方形所有顶点的大数组，然后最后绘制大数组。

在这种情况下，大数组将包含预先转换的顶点数据，然后在一次绘制调用中发送到 GPU。既然你知道要画多少个正方形，就说 N 个。该数组必须能够包含 N*4*3 个元素（假设您在 3d 中工作，因此每个顶点有 3 个坐标）。

然后，软件转换步骤将遍历所有正方形并将转换后的数据附加到大数组中，而大数组又可以通过调用**glVertexPointer()**来绘制。

但是，我对这个软件转换步骤有点怀疑。这意味着您将自己处理所有这些转换，这意味着您没有使用 GPU 的强大功能。也就是说，您将使用 CPU 能力而不是 GPU 能力来获得转换后的坐标。就我个人而言，我会从创建纹理图集开始，然后为每个正方形生成所有纹理坐标。这只需要一次，因为纹理坐标不会改变。然后，您可以在开始绘制正方形之前通过调用**glTextureCoordPointer()**使用纹理坐标（推矩阵 i、绘制四边形、弹出矩阵等）

编辑：

> 是的，这就是我想要的。你确定它在cpu上慢吗？从他们所说的多次调用 glVertexPointer 和 glDrawArrays 的开销会更慢。

我收回我的怀疑！:) 你为什么不采取一些措施，只是为了它？权衡必须至少是你必须改组更多的数据。因此，如果 GPU 无法保存所有这些数据，则可能需要进行常规转换。

哦，还有一件事。蝴蝶一动，它的数据就必须手动重新转换，当您让 GPU 为您转换数据时，不需要这样做。因此，当每个实例变脏时，您必须为每个实例标记一些状态，并且您需要在执行绘图调用之前重新转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T20:25:20.437

看起来你想使用索引？请参阅 glDrawElements。

# mysql - 如何让 Phusion Passenger、MySQL 和 Rails 在生产环境中发挥出色

> ID：888729
> 
> 赞同：4
> 
> 时间：2009-05-20T15:45:14.980
> 
> 标签：mysql, ruby-on-rails, ruby, passenger

我编写了一个在没有数据库的情况下运行良好的 Rails 应用程序。现在，我将注册数据库放入其中。它在生产中不起作用。当然，在我的 Mac 上一切正常。

这是生产环境： - Ubuntu Hardy - Phusion Passenger - Rails 2.3.2

机器上的 MySQL 运行良好。

我有包含正确信息的 database.yml 文件。我可以毫无问题地运行迁移：

```
rake db:migrate RAILS_ENV=production 
```

数据库正在正确更新。

所以，我点击 tmp/restart 并点击该站点。我收到了 500 错误，但没有任何内容写入生产日志（非常奇怪）。所以，我检查了 apache 日志，我收到了这条消息：

！！！捆绑的 mysql.rb 驱动程序已从 Rails 2.2 中删除。请安装 mysql gem 并重试：gem install mysql。

我已经安装了 MySQL gem（2.7 版）。我仍然收到此错误。

当我将生产数据库配置更改为指向虚拟 sqlite 数据库时，一切正常。当我将其更改回 MySQL 配置时，我收到相同的错误消息。

我完全没有想法，我希望它能够正常工作。我正在拔头发，非常感谢您提供的任何帮助。我已经包含了我能想到的所有内容，但如果有更多信息有用，请告诉我。

谢谢！

杰森

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T19:08:35.833

弄清楚了。呜呼！

总结：Ruby 企业版（更新，感谢宏立！）有自己的一套宝石。即使我正在更新 gem，它也不是Passenger 正在阅读的那个。

我是这样想的：

```
>> /usr$ whereis gem

gem: /usr/bin/gem /usr/bin/gem1.8 /opt/ruby-enterprise-1.8.6-20090201/bin/gem

>> /usr$ cd /opt/ruby-enterprise-1.8.6-20090201/bin/

>> /opt/ruby-enterprise-1.8.6-20090201/bin$ ls -l

total 2624
-rwxr-xr-x 1 root root    3907 2009-03-26 14:47 erb
-rwxr-xr-x 1 root root     813 2009-03-26 14:47 gem
-rwxr-xr-x 1 root root     349 2009-03-26 14:47 irb
-rwxr-xr-x 1 root root     386 2009-03-26 14:47 passenger-config
-rwxr-xr-x 1 root root     402 2009-03-26 14:47 passenger-install-apache2-module
-rwxr-xr-x 1 root root     396 2009-03-26 14:47 passenger-make-enterprisey
-rwxr-xr-x 1 root root     392 2009-03-26 14:47 passenger-memory-stats
-rwxr-xr-x 1 root root     392 2009-03-26 14:47 passenger-spawn-server
-rwxr-xr-x 1 root root     386 2009-03-26 14:47 passenger-status
-rwxr-xr-x 1 root root     391 2009-03-26 14:47 passenger-stress-test
-rwxr-xr-x 1 root root     366 2009-03-26 14:47 rackup
-rwxr-xr-x 1 root root     367 2009-03-26 14:47 rails
-rwxr-xr-x 1 root root     364 2009-03-26 14:47 rake
-rwxr-xr-x 1 root root    1560 2009-03-26 14:47 rdoc
-rwxr-xr-x 1 root root      64 2009-03-26 14:46 ree-version
-rwxr-xr-x 1 root root    1516 2009-03-26 14:47 ri
-rwxr-xr-x 1 root root 2609905 2009-03-26 14:46 ruby
-rwxr-xr-x 1 root root     178 2009-03-26 14:47 testrb

>> /opt/ruby-enterprise-1.8.6-20090201/bin$ ./gem list

*** LOCAL GEMS ***

actionmailer (2.3.2)
actionpack (2.3.2)
activerecord (2.3.2)
activeresource (2.3.2)
activesupport (2.3.2)
fastthread (1.0.5)
passenger (2.1.2)
postgres (0.7.9.2008.01.28)
rack (0.9.1)
rails (2.3.2)
rake (0.8.4)
sqlite3-ruby (1.2.4)

>> /opt/ruby-enterprise-1.8.6-20090201/bin$ ./gem install mysql

Building native extensions.  This could take a while...
Successfully installed mysql-2.7
1 gem installed 
```

然后，我重新启动了实例，它工作了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-20T20:36:24.037

@Jason Butler：我没有足够的声誉发表评论，所以我会将其作为答案发布。

拥有自己的宝石的不是 Phusion Passenger，而是 Ruby Enterprise Edition。这实际上已记录在案，并解释了其原因：[http ://www.rubyenterpriseedition.com/documentation.html#_how_ree_installs_itself_into_the_system](http://www.rubyenterpriseedition.com/documentation.html#_how_ree_installs_itself_into_the_system)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T15:50:34.127

您是否尝试过通过 sudo 安装 mysql gem？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T16:03:46.660

我也收到了这个错误。您不能只 gem install mysql 而不将其指向您的 mysql_config 文件，例如：

```
sudo gem install mysql -- --with-mysql-config=/path/to/user/local/mysql/bin/mysql_config 
```

我不得不从 macports 安装 mysql，因为我的系统上没有可用的标头。我之前使用的是 MAMP。

Macports 安装到 /opt 所以我的 mysql-config 路径是 /opt/local/bin/mysql_config5

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T17:55:46.043

mysql bin目录是否在生产中运行Rails的用户路径中？

# sql - 两个 SQL COUNT() 查询？

> ID：888731
> 
> 赞同：10
> 
> 时间：2009-05-20T15:45:42.517
> 
> 标签：sql

我想计算表中的总记录数和符合某些条件的总记录数。我可以通过两个单独的查询来完成这些：

```
SELECT COUNT(*) AS TotalCount FROM MyTable;
SELECT COUNT(*) AS QualifiedCount FROM MyTable
  {possible JOIN(s) as well e.g. JOIN MyOtherTable mot ON MyTable.id=mot.id} 
  WHERE {conditions}; 
```

有没有办法将这些组合成一个查询，以便我在一行中获得两个字段？

```
SELECT {something} AS TotalCount, 
  {something else} AS QualifiedCount 
  FROM MyTable {possible JOIN(s)} WHERE {some conditions} 
```

如果没有，我可以发出两个查询并将它们包装在一个事务中，以便它们保持一致，但我希望用一个来完成。

编辑：我最关心原子性；如果需要两个子 SELECT 语句，只要有来自某个地方的 INSERT 不会使两个响应不一致，就可以了。

编辑 2： CASE 的答案很有帮助，但在我的具体情况下，条件可能包括与另一个表的 JOIN（忘记在我的原始帖子中提及，抱歉）所以我猜这种方法行不通。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-20T15:52:23.610

一种方法是将表连接到自身：

```
select
   count(*) as TotalCount,
   count(s.id) as QualifiedCount
from
   MyTable a
left join
   MyTable s on s.id = a.id and {some conditions} 
```

另一种方法是使用子查询：

```
select
   (select count(*) from Mytable) as TotalCount,
   (select count(*) from Mytable where {some conditions}) as QualifiedCount 
```

或者您可以将条件放在一个案例中：

```
select
   count(*) as TotalCount,
   sum(case when {some conditions} then 1 else 0 end) as QualifiedCount
from
   MyTable 
```

有关的：

[SQL 组合几个 SELECT 结果](https://stackoverflow.com/questions/843642/sql-combining-several-select-results/843666#843666)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-05-20T15:47:46.723

在 Sql Server 或 MySQL 中，您可以使用 CASE 语句执行此操作：

```
select 
    count(*) as TotalCount,
    sum(case when {conditions} then 1 else 0 end) as QualifiedCount
from MyTable 
```

编辑：如果您在条件中使用 JOIN，这也有效：

```
select 
    count(*) as TotalCount,
    sum(case when {conditions} then 1 else 0 end) as QualifiedCount
from MyTable t
left join MyChair c on c.TableId = t.Id
group by t.id, t.[othercolums] 
```

GROUP BY 是为了确保您只能从主表中找到一行。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-20T15:54:20.407

如果您只是计算行数，则可以使用嵌套查询。

```
select 
    (SELECT COUNT(*) AS TotalCount FROM MyTable) as a,
    (SELECT COUNT(*) AS QualifiedCount FROM MyTable WHERE {conditions}) as b 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-09T19:59:48.437

在 Oracle SQL Developer 中，我必须在我的选择中添加 * FROM，否则会出现语法错误：

```
select * FROM 
    (select COUNT(*) as foo FROM TABLE1),
    (select COUNT(*) as boo FROM TABLE2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T16:57:47.940

MySQL 不计算 NULL，所以这也应该有效：

```
SELECT count(*) AS TotalCount, 
  count( if( field = value, field, null)) AS QualifiedCount 
  FROM MyTable {possible JOIN(s)} WHERE {some conditions} 
```

如果 QuailifiedCount 字段来自 LEFT JOIN，则效果很好，并且您只关心它是否存在。获取用户数，以及填写地址的用户数：

```
SELECT count( user.id) as NumUsers, count( address.id) as NumAddresses
  FROM Users
  LEFT JOIN Address on User.address_id = Address.id; 
```

# regex - 如何从 Unix shell 变量中提取与模式匹配的子字符串

> ID：888735
> 
> 赞同：5
> 
> 时间：2009-05-20T15:46:12.763
> 
> 标签：regex, unix, shell, sed, grep

我对 Unix shell 脚本比较陌生。这是我的问题。我用过这个脚本...

```
isql -S$server -D$database -U$userID -P$password << EOF > $test
exec MY_STORED_PROC
go
EOF

echo $test 
```

要生成此结果...

```
Msg 257, Level 16, State 1:
Server 'MY_SERVER', Procedure 'MY_STORED_PROC':
Implicit conversion from datatype 'VARCHAR' to 'NUMERIC' is not allowed.  Use
the CONVERT function to run this query.
(1 row affected)
(return status = 257) 
```

我不想回显 isql 输出，而是提取“257”并将其粘贴到另一个变量中，以便可以从脚本中返回 257。我在想某种 sed 或 grep 命令可以做到这一点，但我真的不知道从哪里开始。

有什么建议么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-20T16:06:30.460

bash 可以从 shell 变量的内容中剥离部分内容。

`${parameter#pattern}`返回 $parameter 的值，不包括开头匹配的部分`pattern`。

`${parameter%pattern}`返回 $parameter 的值，没有匹配的末尾部分`pattern`。

我想有更好的方法可以做到这一点，但这应该可行。所以你可以把它组合成：

```
% strip the part before the value:
test=${test#Msg }
% strip the part after the value:
test=${test%, Level*}
echo $test 
```

如果您对该`(return status = xxx)`部分感兴趣，它将是：

```
result=${test#*(result status = }
result=${result%)*}
echo $result 
```

bash 手册页的相关部分是“参数扩展”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T16:04:21.790

这是一个快速而肮脏的技巧，尽管你真的应该自己开始学习这些东西：

```
RC=`tail -1 $test |sed 's/(返回状态 = \([0-9]\+\))/\1/'`

```

# asp.net - 如何在没有安装 Visual Studio 的机器上使用 MSHTML？

> ID：888738
> 
> 赞同：0
> 
> 时间：2009-05-20T15:46:16.977
> 
> 标签：asp.net, asp.net-mvc, vb.net, iis-6, mshtml

我在我的 ASP.NET-MVC 应用程序中使用 mshtml 来解析 HTML。在我安装了 VS2008 Professional 的开发机器上运行良好。在我安装了 VS Express 2008/WebDev 的登台机器上运行良好。但是当尝试在没有 Visual Studio 版本的生产服务器上加载 COM 对象时，它会引发 FileNotFoundException。

> ```
> Exception type: FileNotFoundException 
>     Exception message: Could not load file or assembly 
> ```
> 
> 'Microsoft.mshtml, Version=7.0.3300.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' 或其依赖项之一。该系统找不到指定的文件。

我不想在生产机器上安装 Visual Studio。我读过一个[建议](http://bytes.com/groups/net-vb/425451-assembly-reference-problem)，运行 C:\Program files\Common Files\Merge modules\vs_piaredist.exe 解决了这个问题，但这个目录在我的生产机器上不存在。如何在生产机器上使用 mshtml？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T17:46:16.767

使用开发机器上的 vs90_piaredist 似乎是解决方案。互操作程序集称为 Microsoft.mshtml.dll，它位于 C:\Program Files\Microsoft.NET\Primary Interop Assemblies。运行 vs90_piaredist 在生产机器上创建了这个目录，并在其中放置了 5 个互操作 dll，包括 Microsoft.mshtml.dll。

这个[线程](http://www.tech-archive.net/Archive/DotNet/microsoft.public.dotnet.framework.interop/2007-06/msg00127.html)对这个问题进行了一些很好的讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T15:55:30.920

不是 mshtml IE 依赖吗？生产箱装的是什么版本的IE？考虑升级到至少 6

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T17:47:45.593

IE 是非托管代码，因此需要有一个互操作层才能从托管到非托管。主[互操作组件](http://www.google.com/url?sa=t&source=web&ct=res&cd=1&url=http%3A%2F%2Fmsdn.microsoft.com%2Fen-us%2Flibrary%2Faax7sdch.aspx&ei=zkEUSvrHAo2KtAPE--zhDQ&usg=AFQjCNHL-MW34fCk8dGvsIi7PzIpl8ZNrg&sig2=wWCN_3ND6aKrMwNR-Ao6fw)(PIA) 是通常由供应商提供的组件。这就是为什么建议您运行 piaredist.exe

# ruby-on-rails - Rails：集成测试thinking_sphinx 与黄瓜和webrat - 我如何索引事务夹具？

> ID：888744
> 
> 赞同：2
> 
> 时间：2009-05-20T15:46:58.223
> 
> 标签：ruby-on-rails, cucumber, thinking-sphinx, webrat

我想对我使用的搜索功能进行一些 Cucumber/webrat 集成测试，`thinking_sphinx & sphinx`但问题是在典型的黄瓜测试期间数据已加载然后在事务中回滚，因此 thinking_sphinx 无法对其进行索引。或者，有没有办法只为一部分测试关闭事务？

你解决了这个问题吗？

[编辑 - 请不要建议模拟搜索结果。我希望集成测试来测试所有功能的集成，包括thinking_sphinx]。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T12:48:26.943

我看到这个声明中的问题：

> 在典型的黄瓜测试期间，数据被加载，然后在事务中回滚，因此 thinking_sphinx 无法索引它

让 thinking_sphinx 索引结果可能不会*很快*，但在事务中肯定是*可能*的。由于它是一个单一的集成测试，而不是为你的每个（许多）单元测试完成，我会接受速度的打击。

所以现在你需要弄清楚如何在事务期间触发重新索引。

```
# somewhere in /features/support:
before('@reindexing') do
  require 'Rake'

  class MyModel
    after_save :force_reindex!

    def force_reindex!
      # in case multiple runs of this block cause the hook
      # to get added multiple times, let's check to make sure
      # we haven't already reindexed for this save
      return if @__reindexed
      Rake["thinking_sphinx:rebuild"].execute
      @__reindexed = true
    end
  end
end

after('@reindexing') do
  class MyModel
    def force_reindex!
      # do nothing; the hook still gets called, but that's ok
    end
  end
end 
```

在`/features/integration.feature`（或其他）中，您将拥有

```
@reindexing
Feature: The whole shebang, altogether

  Scenario: ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-30T07:29:53.507

通过使用数据库清理插件并修改我们的 features/support/env.rb，我们能够让我们的黄瓜测试成功地与 think sphinx 一起工作，如下所示：

```
# Sets up the Rails environment for Cucumber
ENV["RAILS_ENV"] ||= "cucumber"

...

# http://github.com/bmabey/database_cleaner
require 'database_cleaner'
DatabaseCleaner.strategy = :truncation
Before do
  DatabaseCleaner.clean
end

ThinkingSphinx::Configuration.instance.build
ThinkingSphinx::Configuration.instance.controller.start
at_exit do
  ThinkingSphinx::Configuration.instance.controller.stop
end
ThinkingSphinx.deltas_enabled = true
ThinkingSphinx.updates_enabled = true
ThinkingSphinx.suppress_delta_output = true

# Re-generate the index before each Scenario
Before do
  ThinkingSphinx::Configuration.instance.controller.index
end 
```

如您所见，我们还创建了一个“黄瓜”环境和一个单独的数据库（为了同时运行黄瓜和规格而不会发生冲突） - 所以您需要在您的 database.yml 和 sphinx 中添加一个“黄瓜：”条目。 yml 如果你也想这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-08-12T15:36:28.943

链接的建议不起作用，因为 Rake 任务在单独的过程中调用索引器，因此在测试事务之外。

我不知道有什么办法可以解决这个问题，除了关闭测试事务以便 sphinx 索引进程可以看到新的和更新的记录。为此，在您的 中`TestCase`，只需添加该行

```
self.use_transactional_fixtures = false 
```

请记住，您需要在测试结束时管理清除所有数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-26T18:30:21.463

我不建议您测试不属于您的组件。这将是一个非常脆弱的测试，因为它将取决于特定版本的 sphinx 中的特定排名算法，该算法可能会在以后发生变化，从而在未来返回不可预测的结果。

但是，如果您想这样做，我建议运行单独的索引以通过 mysql 适配器或 xmlpipe2 选项使用测试数据库进行测试（xml2pipe 显然可以让您更改数据集而无需更改 sphinx 文件中的索引选项） . 这可能需要您一次单独设置测试数据，删除索引（使用 ruby​​ shell 命令），然后强制重新索引（等待索引文档的总数与已知的数据库记录数量相同) 并针对数据运行测试。

我真的会警告不要像我说的那样测试索引，您可能会发现自己不得不处理不断中断的测试或缓慢的测试运行时间（取决于您索引的数据量）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T11:06:01.190

这可能比它的价值更麻烦，但是您是否尝试过打开增量索引？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-11T02:20:57.820

我尝试了建议的解决方案，但 sphinx 超时并出现以下错误。我认为在启用事务装置时无法重新索引 sphinx。

错误：索引'document_core'：sql_query_pre [0]：超过锁定等待超时；尝试重启事务

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-09-04T13:20:36.167

另一个使用标签来分离黄瓜思维狮身人面像测试的例子在[这里](http://blog.new-bamboo.co.uk/2009/9/4/cucumber-tags-for-fun-and-profit)使用黄瓜标签。

# iis-6 - GetRouteData (System.Web.Routing) 中未设置对象引用

> ID：888747
> 
> 赞同：3
> 
> 时间：2009-05-20T15:47:28.267
> 
> 标签：iis-6, routing, module, httpcontext

这让我发疯。我已经在 Web 窗体应用程序上实现了 Web.Routing。该应用程序工作正常，然后莫名其妙地（至少目前）抛出以下错误消息：

> 你调用的对象是空的。在 System.Web.Routing.RouteCollection.GetRouteData(HttpContextBase httpContext) 在 System.Web.Routing.UrlRoutingModule.PostResolveRequestCache(HttpContextBase context) 在 System.Web.Routing.UrlRoutingModule.OnApplicationPostResolveRequestCache(Object sender, EventArgs e) 在 System.Web。 HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

此错误是间歇性的，并且在该站点上进行任何导航都不会重新创建该错误。

我对错误的解释是，对服务器的请求导致 PostResolveRequestCache 事件的 httpContext 为空，但我不确定这怎么可能。

通过重新启动应用程序池可以解决问题。

该应用程序在 IIS6 上运行，因此，我在 aspnet_isapi.dll 中添加了一个通配符应用程序映射，未选中“验证该文件是否存在”。这是为了启用没有文件扩展名的友好 url，但是我正在考虑将其更改为可能的解决方法。这背后的想法是，可能有一个请求被发送到服务器，该请求正在被拾取不应该的模块。

我的实施已经过定制，但遵循 Haack 先生制定的一般准则。由于错误的性质，我不确定我的任何代码是否会提供很多洞察力，但我显然愿意应要求这样做。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-14T17:46:28.283

添加自定义文件扩展名并不理想，但阻止了进一步的错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-12-14T06:45:52.067

可能与正在修改的路由集合有关。见[其他问题](https://stackoverflow.com/questions/1899188/exceptions-in-system-web-routing-routecollection-getroutedata)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-09T12:05:26.730

该错误与 .Net 中不是线程安全的集合一致。

请查看我对这个[类似问题的最后回答](https://stackoverflow.com/questions/1899188/exceptions-in-system-web-routing-routecollection-getroutedata/22961936#22961936)

# php - 在教义中更新文本字段会产生异常

> ID：888749
> 
> 赞同：2
> 
> 时间：2009-05-20T15:47:47.113
> 
> 标签：php, database, codeigniter, frameworks, doctrine

我有一个文本字段，其中包含例如以下文本：-

“一种传统的英式菜肴，包括约克郡布丁面糊中的香肠，通常与蔬菜和肉汁一起食用。”

此文本字段采用一种仅使用其 ID 更新项目记录的形式。如果我编辑部分文本字段并替换“和肉汁”。用“幽默”。这样文本字段现在包含

“一种传统的英式菜肴，包括约克郡布丁面糊中的香肠，通常与蔬菜和幽默一起食用。”

我得到以下异常： -

> 致命错误：C:\Projects\nitrous\lightweight\system\database\Doctrine\Query\Abstract.php:780 中未捕获的异常 'Doctrine_Query_Exception' 和消息 'Unknown component alias humous' 堆栈跟踪：C:\Projects\nitrous\lightweight \system\database\Doctrine\Query\Abstract.php(767): Doctrine_Query_Abstract->getQueryComponent('humous') C:\Projects\nitrous\lightweight\system\database\Doctrine\Query\Set.php(58): Doctrine_Query_Abstract ->getAliasDeclaration('humous') C:\Projects\nitrous\lightweight\system\database\Doctrine\Query\Abstract.php(2092): Doctrine_Query_Set->parse('i.details = 'A ...') C :\Projects\nitrous\lightweight\system\database\Doctrine\Query.php(1058): Doctrine_Query_Abstract->_processDqlQueryPart('set', Array) C:\Projects\nitrous\lightweight\system\database\Doctrine\Query\Abstract.php(971): Doctrine_Query->getSqlQuery(Array) C:\Projects\nitrous\lightweight\system\database\Doctrine\Query\Abstract.php( 1030): Doctrine_Query_Abstract->_execute(Array) C:\Projects\nitrous\lightweight\system\appl 在 C:\Projects\nitrous\lightweight\system\database\Doctrine\Query\Abstract.php 在第 780 行

如果有人感兴趣，我正在使用与 CodeIgniter 1.7.0 挂钩的 Doctrine 1.0.6。

我实际执行更新的学说查询如下所示：-

```
public function updateItems($id, $arrayItem) {
    $query = new Doctrine_Query();
    $query->update('Item i');

    foreach($arrayItem as $key => $value) {
        $query->set('i.'.$key, "'".$value."'");
    }

    $query->where('i.id = ?', $id);
    return $query->execute();
} 
```

这看起来很奇怪，因为如果我替换整个字符串“约克郡布丁面糊中的传统英式菜肴，通常与蔬菜和幽默一起食用。” 对于完全不同的东西，比如“测试”，它不会抛出异常并且工作得很好。这让我感到困惑......它是 Doctrine 中的错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T16:48:55.507

很明显，Doctrine 认为

1.  你给它“幽默”，而不是包含“幽默”的长字符串，并且
2.  那个“幽默”不是数据，而是一个别名。

我会怀疑你正在对数据字符串做你认为你正在做的事情。Doctrine 中是否有设置让它转储它生成的实际 SQL？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T16:59:36.230

我找到了解决我自己问题的方法。看来这是 Doctrine 1.0.6 中的一个已知错误。我已经升级到 Doctrine 1.1.1，这似乎已经解决了这个问题。

我建议尝试不同版本的 Doctrine，看看这是否也能解决您的问题！感谢您回答人们，如果你这样做了。

# c# - 自我处理的事件是否会阻止实例被垃圾收集？

> ID：888750
> 
> 赞同：3
> 
> 时间：2009-05-20T15:47:50.263
> 
> 标签：c#, .net, events, mvvm, garbage-collection

我阅读了问题的答案[是否事件处理程序会停止垃圾收集？](https://stackoverflow.com/questions/298261/do-event-handlers-stop-garbage-collection-from-occuring)，但是当发布者是目标时会发生什么？

更具体地说，我正在为 WPF 应用程序使用 MVVM 设计。模型视图类在每次更改时都会引发 NotifyPropertyChanged。在某些类中，我需要在修改某些内容时调用一个方法。

我想这样做：

```
this.PropertyChanged += this.MyHandler; 
```

这个实例会被 GC 销毁吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T15:58:39.993

GC 查看并查看对对象的任何引用当前是否植根于应用程序。处理像上面这样的循环引用是足够聪明的。

此外，它足够聪明地处理您有两个对象 A 和 B 的情况，并且：

```
A.Event += B.Handler; 
B.Event += A.Handler; 
```

如果 A 和 B 都超出范围，GC 足够聪明，可以找到并清理这两个对象，即使它们相互订阅。但是，如果一个单独的对象（正在使用）引用其中任何一个，它将阻止两者都被收集。

与参考计数解决方案相比，这是真正的 GC 解决方案的主要优势之一。引用计数将无法收集到这一点，但 .NET gc 将完美地处理它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T15:57:13.100

是的，GC 将清理对象，因为引用它的对象外部没有任何东西。

GC 获取在根级别保存的所有引用（静态字段、每个线程堆栈上的引用等）并从这些跳转到这些可能引用的对象，然后跳转到这些对象可能引用的对象等等。随着它的进行，它将每个对象标记为“不被收集”。一旦它咀嚼过它们，任何尚未标记为“不被收集”的东西都将被收集起来。

当您遵循这一点时，GC 无法从根目录获取您的对象，因此它将被收集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T15:55:38.983

是的，它会的，GC 足够智能，可以确定循环引用并收集所涉及的对象。

它甚至会在多个对象上处理它，因此如果 objectA 正在侦听 objectB 上的事件，而 objectB 正在侦听 objectA 上的事件，前提是它们都未被引用，GC 会发现它可以将它们收集在一起。

（我能快速找到的最佳参考是[这里](https://stackoverflow.com/questions/400706/circular-references-cause-memory-leak)的另一个 SO 问题）

# sql-server - 卸载存在数据库问题的 sql server 2005 实例

> ID：888751
> 
> 赞同：0
> 
> 时间：2009-05-20T15:47:56.723
> 
> 标签：sql-server, sql-server-2005, uninstallation

在非生产机器上，我有两个 SQL Server 2005 实例。我想卸载第二个实例，但有两个问题。虽然这是一台非生产机器，但我想确保第一个实例的安全，这样我就不必重新构建任何东西。

我已经有一个月的二审了。当我今天启动实例 #2 时，我发现一个用户数据库缺少 LDF。我不需要任何数据。

此外，根据之前在该服务器上完成的工作，一个单独的数据库*处于 recovery*模式。同样，我不需要任何数据。

我的目标是安全地卸载第二个实例。在第二种情况下，我不需要任何数据。

即使这两个数据库有问题，卸载是否会顺利进行？如果没有，我应该怎么做才能确保卸载顺利进行？我可以安全地分离正在恢复的数据库吗？我可以安全地分离缺少 LDF 的数据库吗？我应该采取其他步骤来确保实例卸载顺利进行吗？我可以简单地让实例停止，运行卸载，然后删除数据库文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T15:56:59.980

卸载应该没有任何问题。但是，如果您在实例一上的数据从您的问题看来如此重要，那么您不应该在没有事先备份系统的情况下进行任何类型的安装/卸载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T15:53:56.943

如果您想在继续卸载之前恢复顺序，您可以在没有日志文件的情况下修复数据库。

这可以通过首先分离没有日志文件的数据库然后重新附加它，使用系统存储过程构建一个新的日志文件来完成

sp_attach_single_file_db

请参阅联机丛书：http: [//msdn.microsoft.com/en-us/library/ms174385.aspx](http://msdn.microsoft.com/en-us/library/ms174385.aspx)

也就是说，您应该能够分离所有用户数据库并继续执行特定于实例的卸载，而不会出现问题。

# peoplesoft - PeopleSoft 中的 Pagelet

> ID：888752
> 
> 赞同：0
> 
> 时间：2009-05-20T15:48:17.953
> 
> 标签：peoplesoft

我们可以在工具 8.50 中为 Pagelet 动态传递参数吗？我正在寻找使用 Pagelets 创建仪表板，用户需要在其中动态传递参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T11:33:24.847

没有多少人能够回答这个问题，因为工具 8.50 直到今年 9 月 / 10 月才会提供给 Oracle 以外的人。

# asp.net - 仅当 VPN 进入我的办公室网络时，开发网站上的 ExceptionHandling 错误

> ID：888756
> 
> 赞同：0
> 
> 时间：2009-05-20T15:48:50.870
> 
> 标签：asp.net, enterprise-library, vpn

我在 ASP.NET Web 应用程序中使用企业库异常处理块。我昨天刚在工作中使用这个应用程序（非 VPN），一切正常。我今天在家工作，一旦我将表单验证到应用程序中，我就会收到此错误：

*为 exceptionHandling 创建配置节处理程序时出错：无法加载文件或程序集“Microsoft.Practices.EnterpriseLibrary.ExceptionHandling，Version=4.1.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（HRESULT 异常：0x80131040）（C:\Projects\ThesaurusSME\ThesaurusSME\web.config 第 5 行）*

此错误在*c:\EntLib41Src\Blocks\Common\Src\Configuration\SystemConfigurationSourceImplementation.cs*中发生，在此方法中：

```
public override ConfigurationSection GetSection(string sectionName)
{
  ConfigurationSection configurationSection = ConfigurationManager.GetSection(sectionName) as ConfigurationSection;

  SetConfigurationWatchers(sectionName, configurationSection);

  return configurationSection;
} 
```

我检查了 bin 文件夹中的所有文件，都是 4.1.0.0。

```
<configSections>
    <section name="loggingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.LoggingSettings, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    <section name="exceptionHandling" type="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Configuration.ExceptionHandlingSettings, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    <section name="dataConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Data.Configuration.DatabaseSettings, Microsoft.Practices.EnterpriseLibrary.Data, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/> 
```

引用这些部分的 web.config 的所有其他部分也显示 4.1.0.0。

如果有帮助，InnerException/FusionLog 会说：

> /Users/heckacr1/AppData/Local/Temp/Temporary ASP.NET Files/root/ac718580/56b7f71/Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.DLL。日志：尝试下载新 URL 文件：///C:/Users/heckacr1/AppData/Local/Temp/Temporary ASP.NET Files/root/ac718580/56b7f71/Microsoft.Practices.EnterpriseLibrary.ExceptionHandling/Microsoft.Practices.EnterpriseLibrary .ExceptionHandling.DLL。日志：正在尝试下载新的 URL 文件：///C:/Projects/ThesaurusSME/ThesaurusSME/bin/Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.DLL。EnterpriseLibrary.ExceptionHandling/Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.DLL。日志：正在尝试下载新的 URL 文件：///C:/Projects/ThesaurusSME/ThesaurusSME/bin/Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.DLL。EnterpriseLibrary.ExceptionHandling/Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.DLL。日志：正在尝试下载新的 URL 文件：///C:/Projects/ThesaurusSME/ThesaurusSME/bin/Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.DLL。 **警告：比较程序集名称导致不匹配：公钥令牌错误：无法完成程序集设置（hr = 0x80131040）。探测终止。**"

为什么只有当我离开有线 Intranet 并使用 VPN 时才会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-12-30T14:56:46.500

您可能仍然没有遇到这个麻烦，但我在这里找到了解决方案：http: [//chiragrdarji.wordpress.com/2009/01/05/an-error-occurred-creating-the-configuration-section-microsoftpracticesenterpriselibrarythe-located -装配清单定义不匹配装配参考/](http://chiragrdarji.wordpress.com/2009/01/05/an-error-occurred-creating-the-configuration-section-microsoftpracticesenterpriselibrarythe-located-assemblys-manifest-definition-does-not-match-the-assembly-reference/)

# windows - 如何在 vim 中键入某些命令，如 CTRL-] ^Wc 等。在德语键盘上

> ID：888770
> 
> 赞同：7
> 
> 时间：2009-05-20T15:50:52.503
> 
> 标签：windows, vim, keyboard-layout

我坐在这里感觉很傻 - vim 帮助告诉我点击`**CTRL**``**]**`（点击帮助中的链接）我无法得到它！？^Wc 也有同样的问题（关闭拆分窗口）

我有一个德语键盘，尤其是`**CTRL**``**]**`它似乎不适合我。

我该怎么做？

到目前为止，感谢您的帮助，除了`**CTRL**``**]**`! 知道如何使它工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-25T11:11:07.027

我有一个克罗地亚语键盘和几乎相同的问题（由于我没有，例如“]”）。您是否考虑过将这些键重新映射到您可以使用的东西而不是 Ctrl-] 键。

例如，普通*输入*对我来说效果很好。

为此，您只需转到“/vimfiles/ftplugin/”目录，并创建一个名为 help.vim 的文件（如果您对仅在 HELP 类型的文件中使用该组合键感兴趣）。在其中输入

```
nmap <buffer> <Enter> <C-]>
"for just following the link
nmap <buffer> <C-Enter> <C-w><C-]><C-w>T
"for following the help topic in a new split (often useful) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-20T16:01:12.717

首先，在这种类型的帮助文件中，`^`符号表示您需要`Ctrl`用键敲击。`^Wc`意思是打`Ctrl`+ `W`，然后`c`放开`^W`。看起来您可能需要使用`Ctrl`++来获取`AltGr`+ 。`9``Ctrl``]`

其次，`Ctrl`("Control") 应该等同于`Strg`德语键盘上的 ("Steering"?) 键。

（[键盘等效](http://carbon.cudenver.edu/~tphillip/GermanKeyboardLayout.html)项，供您参考。我想您*可以*将 Vim 设置为对德语键盘更友好，但这超出了我的知识和 Google-fu。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-25T10:58:45.023

我想我自己发现了。如果我“假装”有一个英文键盘，然后单击 Ctr-+（Ctr-“加号”），它似乎可以工作。（在“ü”的左边）。

这是英文键盘上 ] 符号的位置。

让我想知道还有什么像这样映射的？有人有想法吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-18T08:58:14.373

在 Vim 中，您可以使用 strg+click 来跟随链接作为 ctrl+] 的替代方法。虽然这并不理想，但它至少允许像我这样的 Vim 初学者浏览手册。

# spring - 将自定义属性存储在 applicationContext.xml Spring 文件中

> ID：888771
> 
> 赞同：8
> 
> 时间：2009-05-20T15:51:10.803
> 
> 标签：spring, properties

我需要为使用 spring 框架的 web 应用程序存储一些配置参数。

通常我会使用 configurationfile.properties 文件，但我想知道是否可以将这些值存储在 applicationContext.xml 文件中。

一种解决方法是创建一个 JavaBean 类来存储值，并使用 spring 构建该类，如下所示：

```
<bean id="configurationBean" class="mypackage.someClass">
 <property name="confValue1">
   <value>myValue1</value>
 </property>
 ....
</bean> 
```

但我想知道是否有一种方法可以存储这些参数而无需创建该类。

提前致谢。

* * *

我认为符合我要求的最佳解决方案是使用 java.util.Properties 实例作为 Spring Bean。

谢谢你们。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-28T10:47:57.017

这应该使用以下语法。

```
<bean id="props" class="java.util.Properties" >
    <constructor-arg>
        <props>
            <prop key="myKey">myValue</prop>
            <prop ...>
        </props>
    </constructor-arg>
</bean> 
```

您正在利用 java.util.Properties 具有接受 Properties 对象的复制构造函数这一事实。

我为一个 HashSet 执行此操作，该 HashSet 也有一个复制构造函数（HashMaps 和 ArrayLists 也是如此），它工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T16:03:50.433

Spring 内置支持在应用程序上下文 XML 中指定属性。请参阅Spring 参考文档的[第 3.3.2.4 节。](http://static.springframework.org/spring/docs/2.5.x/reference/beans.html#beans-collection-elements)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T07:06:32.697

我认为您将使用 Spring 的 PropertyPlaceholderConfigurer 获得最佳结果，它允许您将常规 .properties 文件中的值与 bean 上定义的属性进行映射。

[http://static.springframework.org/spring/docs/2.5.x/reference/beans.html#beans-factory-placeholderconfigurer](http://static.springframework.org/spring/docs/2.5.x/reference/beans.html#beans-factory-placeholderconfigurer)

该示例显示了如何直接在 javax.sql.DataSource 实例上设置 JDBC 连接属性，从而无需中间“配置 bean”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T13:47:07.447

最好的方法是使用 spring PropertyPlaceholderConfigurer

```
<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:yourconfigurationfile.properties</value>
        </list>
    </property>
</bean> 
```

然后

```
<bean id="configurationBean" class="mypackage.someClass">
    <property name="confValue1">
        <value>${myvalue1}</value>
    </property>
    ....
</bean> 
```

在你的configurationfile.properties

```
myvalue1= value1 
```

# c# - 将表单添加到面板 c# 时，键盘快捷键不起作用

> ID：888777
> 
> 赞同：0
> 
> 时间：2009-05-20T15:53:18.910
> 
> 标签：c#, .net, winforms, keyboard-shortcuts

我正在编写一个应用程序，其中有一个带有面板的表单。我注意到，当我向面板添加另一个表单时，添加的表单的键盘快捷键停止工作。

我正在使用以下代码：

```
MainMenu m = new MainMenu();
m.TopLevel = false;
m.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None;
m.Dock = System.Windows.Forms.DockStyle.Fill;
pnl.Controls.Add(m);
m.Visible = true;
pnl.ResumeLayout(); 
```

反正有没有让键盘快捷键起作用？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T16:32:53.653

我的第一个猜测（这完全是一个猜测）是您在构造子对象时需要传递父/所有者，而不仅仅是分配父对象……您能告诉我们您的那部分代码吗？

此外，只需浏览您的代码，对于 MainMenu，将 Dock 设置为 Fill ... 似乎很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T20:12:12.150

将表单添加到另一个表单内的面板？这不是受支持的方案；坦率地说，我很惊讶它没有抛出异常。更好的方法是使用 UserControls。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T15:15:59.347

我发现这是由于焦点问题。

从那以后，我将表单转换为用户控件，问题就消失了。

# apache-flex - 数据网格项渲染

> ID：888783
> 
> 赞同：0
> 
> 时间：2009-05-20T15:55:12.700
> 
> 标签：apache-flex, actionscript

我试图渲染一个 html 文本，其中大约 10 个字符串与 Datagrigd 列连接在一起。我可以渲染它，但不能渲染到单元格的大小。我试图将其嵌入 HBox 中，然后将其放入单元格中。但是我无法调整单元格的大小，因为我看到 HBox 正在缩小，即使单元格中有足够的空间。有人可以帮我把这个 HBox 安装到 Datagrid 单元格的大小。

我尝试使用 UpdateDisplayList() 但它进入无限循环并且屏幕正在冻结。请在下面找到代码。

下面是调用渲染器的类。有人可以帮帮我吗。

包 components.myReports { 导入 mx.collections.ArrayCollection; 导入 mx.containers.HBox；导入 mx.containers.VBox；导入 mx.controls.DataGrid；导入 mx.controls.dataGridClasses.DataGridColumn；导入 mx.core.ClassFactory；导入渲染器.HtmlTextRenderer；

```
public class MyReportsComponent extends VBox
{
    [Bindable] 
```

// public var meterList:ArrayCollection = model.Lookups.getInstance().metersList;

```
 private var _reportsList:ArrayCollection;

    private var myReports:ArrayCollection = new ArrayCollection([
            {name:"Christina Coenraets",description:"myReports1", dateRefreshed:"05-18-2009", dateCreated:"05-18-2009" , scheduledTime: "05-18-2009",operations:"" },
            {name:"Christina Coenraets",description:"myReports1", dateRefreshed:"05-18-2009", dateCreated:"05-18-2009" , scheduledTime: "05-18-2009",operations:""},
            {name:"Christina Coenraets",description:"myReports1", dateRefreshed:"05-18-2009", dateCreated:"05-18-2009" , scheduledTime: "05-18-2009",operations:""},
            {name:"Christina Coenraets",description:"myReports1", dateRefreshed:"05-18-2009", dateCreated:"05-18-2009" , scheduledTime: "05-18-2009",operations:""},
            {name:"Christina Coenraets",description:"myReports1", dateRefreshed:"05-18-2009", dateCreated:"05-18-2009" , scheduledTime: "05-18-2009",operations:""},
            {name:"Christina Coenraets",description:"myReports1", dateRefreshed:"05-18-2009", dateCreated:"05-18-2009" , scheduledTime: "05-18-2009",operations:""},
            {name:"Christina Coenraets",description:"myReports1", dateRefreshed:"05-18-2009", dateCreated:"05-18-2009" , scheduledTime: "05-18-2009",operations:""},
            {name:"Christina Coenraets",description:"myReports1", dateRefreshed:"05-18-2009", dateCreated:"05-18-2009" , scheduledTime: "05-18-2009",operations:""},
            {name:"Christina Coenraets",description:"myReports1", dateRefreshed:"05-18-2009", dateCreated:"05-18-2009" , scheduledTime: "05-18-2009",operations:""},
            {name:"Christina Coenraets",description:"myReports1", dateRefreshed:"05-18-2009", dateCreated:"05-18-2009" , scheduledTime: "05-18-2009",operations:""},
            {name:"Christina Coenraets",description:"myReports1", dateRefreshed:"05-18-2009", dateCreated:"05-18-2009" , scheduledTime: "05-18-2009",operations:""},
            {name:"Christina Coenraets",description:"myReports1", dateRefreshed:"05-18-2009", dateCreated:"05-18-2009" , scheduledTime: "05-18-2009",operations:""},
            {name:"Christina Coenraets",description:"myReports1", dateRefreshed:"05-18-2009", dateCreated:"05-18-2009" , scheduledTime: "05-18-2009",operations:""},
            {name:"Christina Coenraets",description:"myReports1", dateRefreshed:"05-18-2009", dateCreated:"05-18-2009" , scheduledTime: "05-18-2009",operations:""}

        ]);

    public function MyReportsComponent()
    {
        //TODO: implement function
        super();            

    }

    public function set reportsList(arr:ArrayCollection):void{

        _reportsList = arr

    }

  override protected function createChildren():void  {

      var dataGrid:DataGrid ;
      var dataGridColumn:DataGridColumn;
      var mainContainer:HBox;
      this.removeAllChildren();

      mainContainer = new HBox();
      mainContainer.width = this.parent.width;
      mainContainer.minHeight = 1000;
      mainContainer.horizontalScrollPolicy = "off";
      mainContainer.verticalScrollPolicy = "of";
      mainContainer.percentHeight = 100;
      mainContainer.percentWidth = 75;

      dataGrid =  new DataGrid();

      var row:Array=new Array("name","description","dateRefreshed","dateCreated","scheduledTime","operations");             
      var colName:String; 
      var gridcolumns:Array=new Array(); 
      for(var i:int=0;i<row.length;i++) 
           { 

             dataGridColumn=new DataGridColumn(); 
             dataGridColumn.dataField=row[i].toString(); 
             trace(row[i].toString());
             if(row[i].toString()== "operations")
                {                     
                 dataGridColumn.itemRenderer = new ClassFactory(HtmlTextRenderer);                          
                 dataGridColumn.width = 200;
                }else { 
                 dataGridColumn.width = 70;
                }
             dataGridColumn.resizable=true;  

             gridcolumns.push(dataGridColumn); 
        } 

      dataGrid.columns = gridcolumns;         
      dataGrid.width = 700;
      dataGrid.height= 400;
      dataGrid.dataProvider = myReports;
      mainContainer.addChild(dataGrid);
      this.addChild(mainContainer);
      this.validateNow(); 

   }

} 
```

}

渲染器-----

包渲染器 { 导入 mx.containers.HBox; 导入 mx.controls.TextArea；

```
public class HtmlTextRenderer extends HBox
{
    private var text:Array=new Array("Edit","Delete","Run","EMail","RetrieveFile","Public","Private","SharedReport","ScheduledReport");
    private var html:String =  null;
    public var operations:TextArea; 

    public function HtmlTextRenderer()
    {
        //TODO: implement function
        super();
    }
    override protected function createChildren():void 
    {
        super.createChildren();         

        for(var i:int = 0 ;i < text.length ;i++)
        {                   
          html+=targetHTML(text[i].toString());

        }   

        operations = new TextArea();
        operations.htmlText =  html; 
        this.percentWidth = 100;
        this.percentHeight = 100;
        this.addChild(operations);         
    }

    private function targetHTML(name:String):String
    {           
        return "<a href='event:" + name +  "'>" + name + "</a>";
    }

    /* override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void{

        super.updateDisplayList(unscaledWidth,unscaledHeight);

    } */

    private function updateSize()
    {
        var w:int = this.measuredWidth +100;
        trace("The width of the Text is "+this.measuredWidth);
        this.width = w;
        this.parent.width = w;

    }  

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T04:08:29.283

您是否尝试过让项目渲染器只是一个 textArea？

# api - 从 PowerPoint（.ppt 或 .pptx）文件中提取文本？

> ID：888784
> 
> 赞同：1
> 
> 时间：2009-05-20T15:55:23.040
> 
> 标签：api, powerpoint, text-extraction

我目前正在使用 OpenOffice 宏和 pdf2text 程序的组合来提取文本，并希望找到一种更简单、更有效的方法来从 PowerPoint 文件中提取文本。

我尝试使用 Apache POI 库，但运气不佳，在尝试处理我正在查看的文件时遇到了库中的许多异常，并且不想特别筛选库的源代码。

有没有一种简单的方法可以在不使用上述库的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T17:59:27.567

如果您有 MS Office 并将 PPT 保存为 RTF（富文本格式），则它仅包含演示文稿中的文本。然后，您可以在任何能够理解 RTF 文件的编辑器中打开该文件并将其保存为文本 (TXT) 文件。

我希望这也适用于 Open Office。

既然您谈到了 API，这可能不是适合您的方式，但也许它会给您带来新的想法。说，您使用多个宏分阶段进行转换......

编辑：我很好奇，做了一个简短的谷歌搜索

这是我[在 www.openoffice.org 页面之一上找到的](http://www.openoffice.org/servlets/ReadMsg?list=users&msgNo=113293)

> 正如该线程中的人们所指出的，从 OO 文档中检索文本并不难，因为它只是可以用 perl 脚本解析的压缩 xml。问题在于首先将 Microsoft Powerpoint 文档转换为压缩的 XML 格式。
> 
> 我发现 File -> Wizards -> Document Converter 正是这样做的。只需告诉它您要转换 Powerpoint 文档，而不是模板，将其指向您的源目录以及您希望它吐出结果的位置，然后您就离开了。
> 
> 然后我找到 unzip -p $file.sxi content.xml | perl -p -e "s/<[^>] *>/\n/g;s/ +//;s/\n\n* /\n/g;" -w
> 
> 非常适合提取文本。

抱歉，我没有方便的 Open Office 来尝试这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T21:49:36.613

pptx 文件相对容易处理，因为它们只是压缩的 xml - 您可以解压缩它们，然后从解压缩文件的 'ppt/slides' 子目录中的文件内容中删除所有 xml 标签，从而产生大部分相关的文字。

ppt 文件完全是另一回事，而且这个过程变得更加痛苦，因为来自 catdoc 包的规范工具 catppt 容易受到缓冲区溢出的影响，这使得它几乎无用（它在很大比例的 ppt 文件上存在段错误）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-22T21:22:54.767

LibreOffice-5 文件 - 导出 - HTML 包括幻灯片内容和演示者备注。然后，在 Firefox 或其他浏览器中打开 .html 文件，然后打开文件 - 将页面另存为 - 文本文件（或实用程序，例如`pandoc -o file.txt file.html`）。

# ajax - 从 Ajax 调用服务时出现 Web 服务错误“无法创建类型”

> ID：888794
> 
> 赞同：15
> 
> 时间：2009-05-20T15:56:54.863
> 
> 标签：ajax, web-services, asp.net-2.0

我已经下载了 Ajax Control 工具包

当我从 Ajax 控件工具包模板创建网站时，我可以在单个文件 (asmx) 中创建一个 Web 服务，并将其连接到工具包中提供的不同 Ajax 控件。

但是，如果我将 Toolkit 添加到现有的 ASP.Net 2.0 应用程序 Web 项目中，我将无法在单个 asmx 文件中创建 Web 服务。如果我创建一个 Web 服务 VS 也总是会创建一个代码隐藏文件。由于此对 Web 服务的调用（或直接在浏览器中加载服务）生成以下错误：

```
Parser Error 
Description: An error occurred during the parsing of a resource required to service this request. Please review the following specific parse error details and modify your source file appropriately.

Parser Error Message: Could not create type 'AddAjaxToApplication.List'.
Source Error: 

Line 1:  <%@ WebService Language="C#" CodeBehind="List.asmx.cs" Class="AddAjaxToApplication.List" %> 
```

有谁知道如何解决这个问题？

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-05-21T08:24:28.483

我最终解决了这个问题。

在 VS 2005 中，我只需右键单击 Web 服务并选择“查看标记”。我刚刚更改了标记以使用正确的命名空间：

```
Line 1:  <%@ WebService Language="C#" CodeBehind="List.asmx.cs" Class="List" %> 
```

我刚刚从命名空间中删除了项目名称以匹配 List.asmx 使用的命名空间，这个错误就消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-07-19T18:45:20.103

在我的实例中，我将类重命名为与 .asmx 文件不同的名称，因此当从 .aspx 代码中引用该文件时，它会生成此错误。

所以我有“AjaxManager.asmx”，但已将该类重命名为“AjaxService”，并且标记不匹配。就我而言，离开完全限定的命名空间不会导致任何问题。因此，如果您更改类名（可能不推荐），请确保更正标记，如下所示：

```
<%@ WebService Language="vb" CodeBehind="AJAXManager.asmx.vb" Class="MyProject.UI.AjaxService" %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T11:50:55.013

我在创建 Web 服务时发现的另一件重要的事情和简单的解决方案。**尽量避免在文件后面创建代码**

我在 iis 7 的虚拟目录中访问 Web 服务时遇到了同样的问题，然后我创建了内联代码 asmx 文件然后访问它，它是可访问的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T15:56:17.090

`MyService.asmx.cs`我通过将文件后面的代码移动到目录来解决了这个问题`App_Code`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-17T11:00:21.393

我通过确保将`MyService.dll`其部署在`/bin`我的`Web.config`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-30T11:39:20.097

如果指定的类文件的路径确实存在，请检查 Published 文件夹，对我来说，App_Code 文件夹不存在于已发布目录中，因此我手动将文件夹放在那里并且它运行良好:-)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-16T13:30:37.010

我通过像这样给出代码隐藏的完整路径来解决这个问题

CodeBehind="~/codebehind.asmx.cs"

# silverlight - Silverlight 开发人员希望获得一些设计师技能 - 我从哪里开始？

> ID：888800
> 
> 赞同：5
> 
> 时间：2009-05-20T15:58:00.103
> 
> 标签：silverlight, user-interface, xaml

我想重新设计 Silverlight 应用程序，使其更具视觉吸引力。不幸的是，我上的是计算机科学学校，而不是设计学校，我很难确定两种颜色是否匹配。我该如何开始？让我补充一点，时间和金钱都是因素，因此追求设计学位不是一个选择（尽管它可能是理想的）。

编辑：我还需要学习如何实现良好的设计，因此有关工具集（Blend 或 Illustrator？）的任何指导也会有所帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T16:11:48.610

设计是很难教授的东西之一。只有一小部分可以教。其余的必须通过经验和实践来学习。如果你有艺术/表达的倾向，你的学习曲线会更短。以下是一些可以帮助您入门的事情：

颜色理论：

[http://www.tigercolor.com/color-lab/color-theory/color-theory-intro.htm](http://www.tigercolor.com/color-lab/color-theory/color-theory-intro.htm)

[http://www.colormatters.com/colortheory.html](http://www.colormatters.com/colortheory.html)

设计基础：

[http://desktoppub.about.com/cs/graphicdesign/a/designbasics.htm](http://desktoppub.about.com/cs/graphicdesign/a/designbasics.htm)

[http://www.online.tusc.k12.al.us/tutorials/grdesign/grdesign.htm](http://www.online.tusc.k12.al.us/tutorials/grdesign/grdesign.htm)

软件：

[http://www.adobe.com/products/illustrator/](http://www.adobe.com/products/illustrator/)

[http://www.adobe.com/products/photoshop/compare/](http://www.adobe.com/products/photoshop/compare/)

软件教程：

[http://www.adobe.com/designcenter/video_workshop/](http://www.adobe.com/designcenter/video_workshop/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T16:02:42.450

如果您真的只对让您的应用程序看起来更漂亮感兴趣，那么使用来自最新 Silverlight Toolkit 的内置主题之一可能是一个明智的选择。

检查下方的链接。

[工具包 - 主题](http://silverlight.codeplex.com/Wiki/View.aspx?title=Silverlight%20Toolkit%20Overview%20Part%203)

[杰西自由博客 - 主题](http://jesseliberty.com/2008/10/28/toolkit-release-themes/)

编辑：我自己不是一个设计师，但我知道如果我想对这个主题有所了解，我会先去 Silverlight 展示页面，看看可以做的一些事情，并从中汲取灵感应用。

[银光展柜](http://silverlight.net/Showcase/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T16:04:43.943

访问[库珀](http://www.cooper.com/insights/books/)网站。那里列出的书籍非常值得一读。“关于面孔”尤其属于需要进行 UI 工作的任何人的图书馆。

# c - 如何确定 Pi (π) 的准确度

> ID：888807
> 
> 赞同：7
> 
> 时间：2009-05-20T15:59:05.093
> 
> 标签：c, optimization, trigonometry, floating-accuracy, lookup-tables

优化我们正在开发的游戏，我们正在进入每个 CPU 周期获胜都很重要的阶段。我们使用弧度计算围绕其他对象旋转的对象的位置，我想减少查找表中不必要的精度。为此，我们大量使用了预定义的 Pi。**这个 Pi 应该有多准确？**

所以，我的问题是：

*   **准确到什么程度才足够准确？**
*   或者更好的是，**如何确定所需的精度？**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-20T16:02:15.023

您不妨让它与您可以存储的任何浮点表示一样准确。使用相同类型的更准确的浮点数执行计算不会花费更长的时间。

准确度通常以有效位数来衡量；您需要自己决定您感兴趣的准确度位数。如果您对 pi 使用不太准确的值，则该值的不准确性将传播到它所在的其他计算中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-20T16:09:36.023

作为比较：我认为 NASA 使用 pi 精度为小数点后 7 位，以便能够停靠在太空中。

首先，我们需要确定您的位置计算需要有多准确，即程序中取决于 pi 的公式必须有多准确。我们需要从那里开始，以了解实现此目标所需的 pi 准确度。

一旦确定了这一点，您可能可以或多或少地使用直接的数值分析来确定 pi 所需的精度。我可以帮助你，但我需要位置公式来做到这一点:)

编辑：我怀疑你的公式线性依赖于 pi，即你没有使用一些晦涩的函数 f(x,y,z,pi) ，其中 pi 是平方或类似的。在这种情况下，公式的准确性是 pi 准确性的一个因子，例如 k*eps(pi)。否则，它基本上是 f 对 pi 的导数的一个因数。不计算所有其他参数 f 的准确性取决于！

干杯！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-20T16:52:54.953

这取决于您的计算中有多少[有效数字。](http://en.wikipedia.org/wiki/Significant_figures)给定公式

C = pi * d

*如果你想知道直径一英里*的圆的圆周有多少*英寸*，你需要六位数的圆周率来保持你想要的精度，因为一英里有 63,360 英寸，一英里有 199,051 英寸圆周。由于答案中有六位有效数字，因此我需要六位 pi 来计算所需的精度。

 *3.14 * 63,360 = 198950.4

3.142 * 63,360 = 199077.12

3.1416 * 63,360 = 199051.776

3.14159 * 63,360 = 199051.1424

如您所见，在这种情况下，我得到了正确的答案，只有 5 位 pi，但情况并非总是如此。您至少需要与有效数字一样多的 pi 数字，以*确保*您有足够的精度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T16:06:26.437

如果您要预先计算并存储它，您可以使用系统上的数学库尽可能准确地计算一次。一个不错的选择是：

```
double PI = (16.0 * atan(1/5)) - (4.0 * atan(1/239)); 
```

这将为您提供一个相当准确的 PI 值，您可以在启动时计算并根据需要重复使用。很难获得比易于重复使用的版本更准确的版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T16:05:35.160

目前尚不清楚您在做什么。您是否正在根据角度查找坐标？在这种情况下，Pi 的准确性根本无关紧要。重要的是查找表的大小，您当然会以尽可能高的准确度预先计算它。除了您正在考虑将数据类型从单数更改为双数之外，进一步的准确性不会花费额外的执行时间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T16:08:00.800

如果您要预先计算该值，使其尽可能准确地存储，但要真正了解实际需要的准确度，您必须查看您的公式和其他组件的准确度，而不是确保您拥有的准确度pi 与其他组件匹配。数值分析会给你大量的线索。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-05-20T17:01:14.063

圣经说 Pi 的值为 3（[链接](http://www.purplemath.com/modules/bibleval.htm)）。所以当然你应该使用它:)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-08-18T16:57:11.867

圆周率的新公式

```
Pi=2.m.sin(90/m)

Pi=3.m.sin(60/m)

Pi=4.m.sin(45/m)

Pi=5.m.sin(36/m) 
```

为数以百万计的PI免费计算器XP,XM,....推荐m=1.0E+10000000成功计算器需要安装netframework2.0

[http://harry-j-smith-memorial.com/index.html](http://harry-j-smith-memorial.com/index.html)

# database - 每个页面视图的成本更高 - 数据库写入或文件写入？

> ID：888809
> 
> 赞同：6
> 
> 时间：2009-05-20T16:00:14.483
> 
> 标签：database, performance, file-io

当您需要在应用程序的每个页面视图上记录一些数据时，最有效的解决方案是什么 - 您应该写入文件还是写入数据库？

或者两者都不是——也许您应该将数据缓存在内存或文件中，并且偶尔只将其写入数据库（或文件系统，如果您使用内存缓存）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-20T16:15:56.963

如果它只是记录少量数据而没有后续查找，则几乎可以保证直接文件 I/O 更高效。但是，您正在失去 DBMS 的所有优势——索引、事务完整性（实际上是一般的 ACID）、并发访问等。

听起来您几乎是在谈论简单的日志记录。如果是这种情况，并且您不需要对结果数据进行频繁的复杂查询，那么如果性能是一个严重的问题，您可能最好使用直接文件 I/O。不过要小心并发写入问题。

如果 RDBMS 的属性是可取的，您可能会考虑使用 SQLite，对于简单的负载，它会以更少的开销为您提供比大多数 RDBMS 更好的性能，但代价是一些好处（高度并发访问和网络可用性）其他机器是几个“大人物”）。但是，在一般情况下，它仍然不会像直接文件 I/O 那样快。

您后来提到它用于页面查看跟踪让我问：您是在增加计数器，而不是记录有关页面查看的数据吗？如果是这样，我强烈建议使用 SQLite 之类的东西（执行 UPDATE tbl SET counter = counter+1 之类的东西）。您真的不想涉及手动执行此操作所涉及的时间问题 - 如果您做得不对，您将开始失去同时访问的计数（A读取“100”，B读取“100” , A 写“101”，B 写“101”；B 应该写 102，但无法知道）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T17:26:00.473

从概念上讲，写入数据库总是比写入文件慢。数据库也必须写入文件，需要额外的通信开销才能将数据写入数据库，因此它可以将其写入文件。因此，它必须更慢。

也就是说，数据库在磁盘 I/O 方面做得很好，可能比你做得更好。如果您发现简单的文件记录器比将其写入数据库要慢，请不要感到惊讶。该数据库有很多 I/O 优化，并且有一些您可能没有的技巧可用（取决于您的网络语言和环境）。

如果答案随着时间而改变，请不要感到惊讶。当您的站点很小时，登录到数据库非常快。随着站点的增长，日志记录表可能会成为一个主要问题：它使用大量磁盘空间，使备份永远耗时，并且在您尝试查询时消耗所有磁盘 I/O。这就是为什么您应该自己对这两种方法进行基准测试的原因。然后，您可以在将来条件发生变化时重新测试。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-20T16:18:52.323

访问数据库很可能比写入文件更昂贵。

如果您的每秒页面浏览量很高，并且数据不需要立即在数据库中可用，那么写入文件并定期将数据加载到数据库中将是一个更优化的解决方案。

然而，这一切都取决于您在每次页面查看时记录的数据的性质，以及它对所服务的任何业务功能的重要性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-20T16:10:55.087

这在很大程度上取决于您对数据安全的需求。如果您可以承受在崩溃时丢失一些数据的能力，那么将数据保存在内存中并定期将其写入持久存储肯定是最有效的方法。

**编辑：**您提到了综合浏览量。在这种情况下，我会将计数器保存在内存中并定期更新数据库表（比如每分钟左右）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-20T16:06:33.957

那要看。

它确实如此：它取决于您使用的 DBMS 和/或 OS+文件系统。换句话说：您的里程会有所不同。

如果您只是将数据附加到某个地方，现代 DBMS/OS+文件系统应该同样快速地处理这个问题。当您想要更改数据时会出现问题。

缓存 - 也取决于您可以负担的缓存粒度（需要记录每个步骤的崩溃安全与潜在节省）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-12-23T12:38:48.860

使用像[redis](http://code.google.com/p/redis/)这样的混合解决方案，它是为这类东西设计的

# xsd - JAXB 选择列表

> ID：888810
> 
> 赞同：5
> 
> 时间：2009-05-20T16:00:16.853
> 
> 标签：xsd, jaxb, xjc

我有以下架构

```
<complexType name="BookShelf">
   <sequence>
      <element name="newBook" type="string" minOccurs="0" maxOccurs="unbounded"/>
      <element name="oldBook" type="string" minOccurs="0" maxOccurs="unbounded"/>
   </sequence>
</complexType> 
```

XJC 生成带有两个列表的 BookShelf 类，一个用于 newBook，一个用于 oldBook。出色的！

现在我希望书籍以任何顺序出现。所以我将我的架构重写为：

```
<complexType name="BookShelf">
   <sequence>
      <choice minOccurs="0" maxOccurs="unbounded">
         <element name="newBook" type="string"/>
         <element name="oldBook" type="string"/>
      </choice>
   </sequence>
</complexType> 
```

但是现在 XJC 生成的 BookShelf 只有一个类型为 newBookOrOldBook 的列表`List<JAXBElement<String>>`。

我不关心书籍出现的顺序，我想允许 XML 编写器按照他\她希望的任何顺序指定书籍，但我仍然希望每种类型的书籍作为生成的 BookShelf 类中的列表。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-03-26T12:46:31.213

您可以使用JAXB2 [Basics中的](https://github.com/highsource/jaxb2-basics)[Simplify 插件](https://github.com/highsource/jaxb2-basics/wiki/JAXB2-Simplify-Plugin)。如果您并不真正关心顺序，它可以简化和属性，这会使事情变得容易得多。这是一个示例（摘自文档）：`@XmlElements``@XmlElementRefs`

考虑以下选择：

```
<xs:complexType name="typeWithReferencesProperty">
    <xs:choice maxOccurs="unbounded">
        <xs:element name="a" type="someType"/>
        <xs:element name="b" type="someType"/>
    </xs:choice> 
</xs:complexType> 
```

这通常会生成如下属性：

```
@XmlElementRefs({
    @XmlElementRef(name = "a", type = JAXBElement.class),
    @XmlElementRef(name = "b", type = JAXBElement.class)
})
protected List<JAXBElement<SomeType>> aOrB; 
```

您可以使用`simplify:as-element-property`元素将此复杂属性重新建模为两个元素属性或`simplify:as-reference-property`两个参考属性。

并不是说在引用属性的情况下，您必须自定义其中一个`xs:element`而不是`xs:choice`.

```
<xs:complexType name="typeWithReferencesProperty">
    <xs:choice maxOccurs="unbounded">
        <xs:element name="a" type="someType">
            <xs:annotation>
                <xs:appinfo>
                    <simplify:as-element-property/>
                </xs:appinfo>
            </xs:annotation>
        </xs:element>
        <xs:element name="b" type="someType"/>
    </xs:choice> 
</xs:complexType> 
```

结果是：

```
@XmlElement(name = "a")
protected List<SomeType> a;
@XmlElement(name = "b")
protected List<SomeType> b; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T13:05:25.047

如果不编写一些自定义 java 或 XSLT，我认为这在 JAXB 中是不可能的。

JAXB 不太擅长在具有不同结构的对象和 xml 之间进行映射，例如您的。此外，当在 Java 中转换为两个单独的列表时，旧书相对于新书的排序将丢失，而 JAXB 通常希望保留信息。

以下内容*不能*回答您的问题，但也许这是朝着您想要的方向迈出的一步：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="bookShelf" type="BookShelf"/>
  <xs:complexType name="BookShelf">
    <xs:sequence>
      <xs:sequence minOccurs="0" maxOccurs="unbounded">
        <xs:element name="newBook" minOccurs="0" type="xs:string"/>
        <xs:element name="oldBook" minOccurs="0" type="xs:string"/>
      </xs:sequence>
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

我没有用 JAXB 试过这个，但我认为它会生成一个包含两个字段的*类**列表，* *newBook*和*oldBook*。因此，您不必强制转换或使用 instanceof，而只需检查 null 以查看它是哪一个。正如我所说，这*不是*一个解决方案，但可能更接近一点。

 **** * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T17:15:51.333

也许是这样的？

```
<schema 
   elementFormDefault = "qualified" 
   xmlns              = "http://www.w3.org/2001/XMLSchema"
   xmlns:xs           = "http://www.w3.org/2001/XMLSchema"
   xmlns:tns          = "urn:cheeso.examples.2009.05.listofbooks" 
   targetNamespace    = "urn:cheeso.examples.2009.05.listofbooks" 
  >

  <element name="Shelf" nillable="true" type="tns:BookShelf" />

  <complexType name="BookShelf">
    <sequence>
      <element minOccurs="0" maxOccurs="1" name="Store" type="tns:ArrayOfChoice1" />
    </sequence>
  </complexType>

  <complexType name="ArrayOfChoice1">
    <choice minOccurs="0" maxOccurs="unbounded">
      <element minOccurs="1" maxOccurs="1" name="newBook" nillable="true" type="tns:newBook" />
      <element minOccurs="1" maxOccurs="1" name="oldBook" nillable="true" type="tns:oldBook" />
    </choice>
  </complexType>

  <complexType name="Book">
    <attribute name="name" type="string" />
  </complexType>

  <complexType name="newBook">
    <complexContent mixed="false">
      <extension base="tns:Book" />
    </complexContent>
  </complexType>

  <complexType name="oldBook">
    <complexContent mixed="false">
      <extension base="tns:Book" />
    </complexContent>
  </complexType>

</schema> 
```

当然你可以简化为

```
<schema 
   elementFormDefault = "qualified" 
   xmlns              = "http://www.w3.org/2001/XMLSchema"
   xmlns:xs           = "http://www.w3.org/2001/XMLSchema"
   xmlns:tns          = "urn:cheeso.examples.2009.05.listofbooks" 
   targetNamespace    = "urn:cheeso.examples.2009.05.listofbooks" 
  >

  <element name="Shelf" nillable="true" type="tns:BookShelf" />

  <complexType name="BookShelf">
    <sequence>
      <element minOccurs="0" maxOccurs="1" name="Store" type="tns:ArrayOfChoice1" />
    </sequence>
  </complexType>

  <complexType name="ArrayOfChoice1">
    <choice minOccurs="0" maxOccurs="unbounded">
      <element minOccurs="1" maxOccurs="1" name="newBook" nillable="true" type="xs:string" />
      <element minOccurs="1" maxOccurs="1" name="oldBook" nillable="true" type="xs:string" />
    </choice>
  </complexType>

</schema> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-21T15:38:34.177

我想我必须拒绝在一个元素中混合不同元素列表的想法（在一个书本上混合新旧书籍），特别是因为我打算在其他元素中引用这些元素的列表（新旧书籍列表） . 如果我不这样做，它很快就会成为 Java 代码中的噩梦。我以以下架构结束：

```
<schema
   xmlns="http://www.w3.org/2001/XMLSchema"
   xmlns:tns="http://www.example.org/books"
   targetNamespace="http://www.example.org/books"
   elementFormDefault="qualified"
>
   <complexType name="BookShelf">
      <sequence>
         <element name="newBooks" type="tns:NewBookList" minOccurs="0" />
         <element name="oldBooks" type="tns:OldBookList" minOccurs="0" />
      </sequence>
   </complexType>

   <complexType name="NewBookList">
      <sequence>
         <element name="newBook" type="tns:NewBook" maxOccurs="unbounded" />
      </sequence>
   </complexType>

   <complexType name="OldBookList">
      <sequence>
         <element name="oldBook" type="tns:OldBook" maxOccurs="unbounded" />
      </sequence>
   </complexType>

   <complexType name="NewBook" />
   <complexType name="OldBook" />
</schema> 
```

感谢大家帮助我意识到这一点。这种模式将导致更清晰和简单的 Java 代码以及更易读和可预测的 XML 文档。

# java - 在哪些情况下，Java 引用相等性可能不同于未覆盖 equals() 类型的对象的 equals() 相等性？

> ID：888815
> 
> 赞同：1
> 
> 时间：2009-05-20T16:00:44.153
> 
> 标签：java

是否有任何魔法悬挂在任何地方，这可能意味着

```
(object0 == object1) != (object0.equals(object1)) 
```

其中 object0 和 object1 都属于某种类型，尚未覆盖 Object.equals()？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-20T16:05:48.760

不，这正是 Object 的定义。[等于（）](http://java.sun.com/javase/6/docs/api/java/lang/Object.html#equals(java.lang.Object))。

*...当且仅当 x 和 y 引用同一个对象（x == y 的值为 true）时，此方法才返回 true ...*

```
public boolean equals( Object o ) { 
   return this == o;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-20T16:13:08.903

是的，如果“`object0`不覆盖的类型`Object.equals()`”是指特定类型而不是超类。

如果`object0`and`object1`属于 B 类型，B 扩展 A，并且 A 覆盖`equals(Object obj)`但 B 没有覆盖，那么 B 可能不会覆盖`equals(Object obj)`but `(object0 == object1) != (object0.equals(object1))`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-20T16:37:17.980

好吧，如果`object0 == null`和`object1 == null`，第一个将提供`true`，第二个将提供`NullPointerException`。除此之外，应该没有明显的差异。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-20T18:09:46.173

尽管对象不会覆盖`equals()`自己，但对象的超类之一可能会覆盖该`equals()`方法。

如果您使用的是 eclipse：打开`object.java`文件并按两次 control-o。输入“ *equals* ”并检查是否只看到一个“ *equals* ”方法：Object 的 equals 方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-20T16:04:19.247

Object.java src 将其 equals 方法定义为：

```
 return (this == obj) 
```

所以不行 ：-）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-20T18:14:37.083

是的，`null == null`是真的，但`null.equals(null)`没有定义。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-20T16:03:28.237

不，如果`equals()`没有被覆盖，如果对象是内存中相同的相同对象，则返回 true。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-20T16:04:19.670

不。 的实际类`object0`（不一定是变量的声明类型）*必须*已覆盖`equals()`。尝试打印：

```
object0.getClass() 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-20T16:07:09.337

这是 Object.equals 的源代码：

```
public boolean equals(Object obj) {
  151           return (this == obj);
  152       }
  153 
```

所以不行。

# sharepoint - 哪些是关于 Sharepoint 2007 的最佳论坛？

> ID：888818
> 
> 赞同：3
> 
> 时间：2009-05-20T16:01:30.503
> 
> 标签：sharepoint, sharepoint-2007

你能告诉我一些关于 Sharepoint 2007 的好论坛吗？我发现没有很多关于这个的专门网站。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T16:15:21.783

[SharePoint 产品和技术](http://social.msdn.microsoft.com/Forums/en-US/category/sharepoint)下的论坛怎么样？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T16:29:01.180

我同意有时很难找到好的社区。不过，StackOverflow 是解决 SharePoint 问题的好地方！此外，您可以将您的 rss 阅读器指向 SharePointBlogs.com，并获得一些指向大量半活跃博主的指针，他们乐于回答作为评论发布在其博客上的问题，只要它们与主要帖子主题相关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T02:34:16.513

我个人最喜欢的是 [SharePointu.com]。原因很简单，有几位真正的 SharePoint 大师，他们很有耐心和经验。
别忘了，最棒的地方是 forum/Microsoft.com。你可以看到很多女士们出现在那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T17:56:14.873

SharePoint 在 Twitter 上有一个非常强大的社区。显然，了解这些玩家需要一些时间，但 Joel Oleson 整理了一篇很好的博客文章来帮助您开始在 SharePoint Twitter 社区中入门。

[http://www.sharepointjoel.com/Lists/Posts/Post.aspx?ID=222](http://www.sharepointjoel.com/Lists/Posts/Post.aspx?ID=222)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T21:28:15.380

如果您正在寻找最终用户/一般问题，请查看[最终用户 SharePoint](http://www.endusersharepoint.com/STP/)。

# flash - Adobe Flash 对等应用程序

> ID：888823
> 
> 赞同：3
> 
> 时间：2009-05-20T16:02:48.347
> 
> 标签：flash, air, chat, p2p

我正在做一个会议系统，使用 Adob​​e Flash AS3 和 Adob​​e Air 为最终用户显示文档 (PDF)。作为一项要求，我们需要在最终用户之间开发一些交互工具，例如聊天、发送文件、投票等，但我应该基于点对点连接来完成。（由于成本和安全原因，不允许使用客户端/服务器方法）

我的问题是：**可以通过 Flash/ActionScript/Air 进行这种点对点通信的应用程序吗？执行此操作的代码或方法是什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T16:07:36.947

是的，它可以 - 您需要查看当前处于测试阶段的 adobe stratus：http: [//labs.adobe.com/technologies/stratus/](http://labs.adobe.com/technologies/stratus/)

丹尼帕特森有一些很好的信息： [http ://www.dannypatterson.com/labs.cfm](http://www.dannypatterson.com/labs.cfm)

但是...您确实必须在某个时候连接到 rtmfp 服务器，但我相信在那之后所有信息都是点对点传递的...所以我不确定它是否适用于您的情况, 但值得一试:)

# python - 守护python的BaseHTTPServer

> ID：888834
> 
> 赞同：12
> 
> 时间：2009-05-20T16:04:22.493
> 
> 标签：python, daemon, basehttpserver

我正在开发一个需要嵌入 HTTP 服务器的守护程序。我正在尝试使用 BaseHTTPServer 来执行此操作，当我在前台运行它时，它工作正常，但是当我尝试将守护进程分叉到后台时，它停止工作。我的主应用程序继续工作，但 BaseHTTPServer 没有。

我相信这与 BaseHTTPServer 将日志数据发送到 STDOUT 和 STDERR 的事实有关。我将这些重定向到文件。这是代码片段：

```
# Start the HTTP Server
server = HTTPServer((config['HTTPServer']['listen'],config['HTTPServer']['port']),HTTPHandler)

# Fork our process to detach if not told to stay in foreground
if options.foreground is False:
    try:
        pid = os.fork()
        if pid > 0:
            logging.info('Parent process ending.')
            sys.exit(0)            
    except OSError, e:
        sys.stderr.write("Could not fork: %d (%s)\n" % (e.errno, e.strerror))
        sys.exit(1)

    # Second fork to put into daemon mode
    try: 
        pid = os.fork() 
        if pid > 0:
            # exit from second parent, print eventual PID before
            print 'Daemon has started - PID # %d.' % pid
            logging.info('Child forked as PID # %d' % pid)
            sys.exit(0) 
    except OSError, e: 
        sys.stderr.write("Could not fork: %d (%s)\n" % (e.errno, e.strerror))
        sys.exit(1)

    logging.debug('After child fork')

    # Detach from parent environment
    os.chdir('/') 
    os.setsid()
    os.umask(0) 

    # Close stdin       
    sys.stdin.close()

    # Redirect stdout, stderr
    sys.stdout = open('http_access.log', 'w')
    sys.stderr = open('http_errors.log', 'w')    

# Main Thread Object for Stats
threads = []

logging.debug('Kicking off threads')

while ...
  lots of code here
...

server.serve_forever() 
```

我在这里做错了什么还是 BaseHTTPServer 以某种方式阻止了守护进程？

编辑：更新代码以演示额外的、以前缺少的代码流，并且 log.debug 显示在我的分叉后台守护程序中，我在分叉后点击代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T21:17:13.127

经过一番谷歌搜索后，我[终于偶然发现了这个 BaseHTTPServer 文档](http://pymotw.com/2/BaseHTTPServer/index.html#module-BaseHTTPServer)，之后我得到了：

```
from BaseHTTPServer import BaseHTTPRequestHandler, HTTPServer
from SocketServer import ThreadingMixIn

class ThreadedHTTPServer(ThreadingMixIn, HTTPServer):
  """Handle requests in a separate thread."""

server = ThreadedHTTPServer((config['HTTPServer']['listen'],config['HTTPServer']['port']), HTTPHandler)
server.serve_forever() 
```

这在很大程度上是在我分叉并最终解决了我的问题之后发生的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-02-11T23:13:09.603

以下是使用[python-daemon](http://pypi.python.org/pypi/python-daemon)库执行此操作的方法：

```
from BaseHTTPServer import (HTTPServer, BaseHTTPRequestHandler)
import contextlib

import daemon

from my_app_config import config

# Make the HTTP Server instance.
server = HTTPServer(
    (config['HTTPServer']['listen'], config['HTTPServer']['port']),
    BaseHTTPRequestHandler)

# Make the context manager for becoming a daemon process.
daemon_context = daemon.DaemonContext()
daemon_context.files_preserve = [server.fileno()]

# Become a daemon process.
with daemon_context:
    server.serve_forever() 
```

与守护程序一样，您需要决定在程序成为守护程序后如何与程序交互。例如，您可能会注册一个 systemd 服务，或编写一个 PID 文件等。不过，这些都超出了问题的范围。

特别是，它超出了问题的范围：一旦它成为一个守护进程（必须与任何控制终端分离），[我该如何停止守护进程](https://stackoverflow.com/questions/12517482/how-to-stop-a-daemon)？作为定义程序行为的一部分，这由您决定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T17:06:00.043

首先实例化一个 HTTPServer。但是您实际上并没有告诉它在任何提供的代码中开始服务。在您的子进程中尝试调用`server.serve_forever()`.

[请参阅此](http://snippets.dzone.com/posts/show/654)以供参考

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-12-20T15:58:56.323

一个对我有用的简单解决方案是覆盖`BaseHTTPRequestHandler`方法`log_message()`，因此我们防止在标准输出中进行任何类型的写入，并避免在妖魔化时出现问题。

```
class CustomRequestHandler(BaseHTTPServer.BaseHTTPRequestHandler):

    def log_message(self, format, *args):
            pass

...
rest of custom class code
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T16:15:36.230

只需使用[daemontools](http://cr.yp.to/daemontools.html)或其他类似的脚本，而不是滚动您自己的守护进程。最好不要在脚本中使用它。

此外，您最好的选择：不要使用 BaseHTTPServer。这真的很糟糕。python 有很多不错的HTTP 服务器，例如[cherrypy](http://cherrypy.org)或[paste](http://pythonpaste.org/)。两者都包括现成的守护脚本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-02-13T05:07:24.410

自从我最初发布以来，这已经征求了答案，我想我会分享一些信息。

输出的问题与日志记录模块的默认处理程序使用 StreamHandler 的事实有关。处理此问题的最佳方法是创建您自己的处理程序。如果您想使用默认的日志记录模块，您可以执行以下操作：

```
# Get the default logger
default_logger = logging.getLogger('')

# Add the handler
default_logger.addHandler(myotherhandler)

# Remove the default stream handler
for handler in default_logger.handlers:
    if isinstance(handler, logging.StreamHandler):
        default_logger.removeHandler(handler) 
```

同样在这一点上，我已经开始为我的嵌入式 http 服务器使用非常好的[Tornado](http://tornadoweb.org "龙卷风")项目。

# regex - 用于验证姓名和姓氏的正则表达式？

> ID：888838
> 
> 赞同：40
> 
> 时间：2009-05-20T16:05:25.737
> 
> 标签：regex, c#, globalization

尽管这似乎是一个微不足道的问题，但我很确定它不是:)

我需要验证来自世界各地的人的姓名和姓氏。想象一下我需要删除的大量姓名和姓氏的巨大列表，并尽可能删除我识别出的任何杂物。我怎样才能用正则表达式做到这一点？如果只是英文的，我认为这会削减它：

```
^[a-z -']+$ 
```

但是，我还需要支持这些情况：

*   其他标点符号，因为它们可能在不同的国家/地区使用（不知道是哪个，但也许你会！）
*   不同的 Unicode 字母集（重音字母、希腊语、日语、中文等）
*   没有数字或符号或不必要的标点符号或符文等。
*   标题、中间名首字母、后缀不是此数据的一部分
*   名字已经被姓氏分开了。
*   我们准备强制简化极其罕见的名字（存在一个名为'@'的人，但让这个角色无处不在是没有意义的。使用实用主义和良好的感觉。）
*   请注意，许多国家/地区都有关于名称的法律，因此需要遵循一些标准

是否有一种标准的方法来验证这些字段，我可以实施以确保我们的网站用户有很好的体验，并且在列表中注册时可以实际*使用他们的名字*？

我会寻找类似于您可以在谷歌上找到的许多“电子邮件地址”正则表达式的东西。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2009-05-20T16:12:24.007

我同情在这种情况下需要限制输入，但我不相信这是可能的——Unicode 是巨大的、不断扩展的，世界各地名称中使用的子集也是如此。

与电子邮件不同，对于人们可以使用的名称，甚至他们可以在各自政府注册为官方的表示形式，没有普遍认可的标准。我怀疑任何正则表达式最终都无法通过世界*某处**某人*认为有效的名称。

 *当然，您确实需要清理或转义输入，以避免[Little Bobby Tables](http://xkcd.com/327/ "小鲍比桌")问题。对于您允许的输入可能还有其他限制，例如用于存储、呈现或操作名称的底层系统。因此，我建议您首先确定您的验证所属系统所需的限制，并仅基于这些限制创建验证表达式。在某些情况下，这可能仍会造成不便，但应该很少见。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-05-20T19:03:21.150

我会尝试自己给出一个正确的答案：

名称中唯一应该允许的标点符号是句号、撇号和连字符。我在极端案例列表中没有看到任何其他案例。

关于数字，只有一种情况是 8。我想我可以放心地拒绝这种情况。

关于信件，任何信件都是有效的。

我也想包括空间。

这将总结为这个正则表达式：

```
^[\p{L} \.'\-]+$ 
```

这提出了一个问题，即撇号可以用作攻击向量。它应该被编码。

所以验证代码应该是这样的（未经测试）：

```
var name = nameParam.Trim();
if (!Regex.IsMatch(name, "^[\p{L} \.\-]+$")) 
    throw new ArgumentException("nameParam");
name = name.Replace("'", "&#39;");  //&apos; does not work in IE 
```

谁能想到一个名字不应该通过这个测试的原因，或者一个可以通过的 XSS 或 SQL 注入？

* * *

完整的测试解决方案

```
using System;
using System.Text.RegularExpressions;

namespace test
{
    class MainClass
    {
        public static void Main(string[] args)
        {
            var names = new string[]{"Hello World", 
                "John",
                "João",
                "タロウ",
                "やまだ",
                "山田",
                "先生",
                "мыхаыл",
                "Θεοκλεια",
                "आकाङ्क्षा",
                "علاء الدين",
                "אַבְרָהָם",
                "മലയാളം",
                "상",
                "D'Addario",
                "John-Doe",
                "P.A.M.",
                "' --",
                "<xss>",
                "\""
            };
            foreach (var nameParam in names)
            {
                Console.Write(nameParam+" ");
                var name = nameParam.Trim();
                if (!Regex.IsMatch(name, @"^[\p{L}\p{M}' \.\-]+$"))
                {
                    Console.WriteLine("fail");
                    continue;
                }
                name = name.Replace("'", "&#39;");
                Console.WriteLine(name);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-05-20T16:13:13.723

我只会允许所有内容（空字符串除外）并假设用户知道他的名字是什么。

有2种常见情况：

1.  您关心姓名是否准确，并根据真实的纸质护照或其他身份证件或信用卡进行验证。
2.  您并不在意，用户无论如何都可以注册为“Fred Smith”（或“Jane Doe”）。

在情况 (1) 中，您可以允许所有字符，因为您正在检查纸质文档。

在情况 (2) 中，您也可以允许所有字符，因为“123 456”实际上并不比“Abc Def”更差。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2009-05-20T16:09:13.247

我认为你最好用正则表达式*排除*你不想要的字符。试图让每个变音符号、重音 e、连字符等都变得非常疯狂。只需排除数字（但是一个名叫“乔治·福曼四世”的人呢）和你知道你不想要的符号，比如@#$%^ 或者你有什么。但即便如此，使用正则表达式也只能保证输入与正则表达式匹配，它不会告诉你它是一个有效的名称。

**在澄清这是试图防止 XSS 后编辑：**名称字段上的正则表达式显然不会自行停止 XSS。但是，如果您想走这条路，[本文有一个关于过滤的部分是一个起点：](http://tldp.org/HOWTO/Secure-Programs-HOWTO/cross-site-malicious-content.html#AEN1479)

> ```
> s/[\<\>\"\'\%\;\(\)\&\+]//g; 
> ```
> 
> David A. Wheeler 的“Linux 和 Unix 安全编程 HOWTO”，v3.010 版 (2003)

[v3.72, 2015-09-19](https://dwheeler.com/secure-programs/Secure-Programs-HOWTO/cross-site-malicious-content.html#AEN2223)是更新的版本。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-05-20T16:18:10.953

顺便说一句，您打算只允许拉丁字母，还是还打算尝试验证中文、阿拉伯语、印地语等？

正如其他人所说，甚至不要*尝试*这样做。退后一步，问问自己你真正想要完成什么。然后尝试在不对人们的名字是什么或他们的意思做任何假设的情况下完成它。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-05-20T16:13:55.330

我不认为这是个好主意。即使您找到了合适的正则表达式（可能使用 Unicode 字符属性），这也不会阻止用户输入像*John Doe*、*Max Mustermann*（甚至有人使用该名称）、*Abcde Fghijk*或*Ababa Bebebe*这样的伪名称。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-04-08T00:29:28.607

您可以使用以下正则表达式代码来验证 2 个由空格分隔的名称，并使用以下正则表达式代码：

^[A-Za-zÀ-ú]+ [A-Za-zÀ-ú]+$

## 或者只是使用：

[[:lower:]] = [a-zà-ú]

[[:upper:]] =[A-ZÀ-Ú]

[[:alpha:]] = [A-Za-zÀ-ú]

[[:alnum:]] = [A-Za-zÀ-ú0-9]

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-20T17:35:55.490

由于所有可能的极端情况，验证名称之类的东西是一个非常困难的问题。

# 角落案例

*   什么[都在这里](http://en.wikipedia.org/wiki/List_of_unusual_personal_names)

清理输入并让他们输入任何他们想要的名称，因为确定什么是有效名称，什么不是可能超出您正在做的任何事情的范围；鉴于潜在的奇怪和合法名称的范围几乎是无限的。

如果他们想称自己为 Tricyclopltz^2-Glockenschpiel，那是他们的问题，而不是你的问题。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2011-05-05T10:16:38.903

我似乎在这里偶然发现了一个非常有争议的主题。然而，有时在通行证上带走亲爱的小鲍比桌子并将小罗伯特连同他的分号和 SQL 注释行一起送到校长办公室是件好事——。

VB.NET 中的这个 REGEX 包括常规字母字符和各种转折欧洲字符。然而，可怜的老詹姆斯麦克特里斯坦-史密斯三世将不得不输入他的血统书作为吉姆三世。

```
<asp:RegularExpressionValidator ID="RegExValid1" Runat="server"
                    ErrorMessage="ERROR: Please enter a valid surname<br/>" SetFocusOnError="true" Display="Dynamic"
                    ControlToValidate="txtSurname" ValidationGroup="MandatoryContent"
                    ValidationExpression="^[A-Za-z'\-\p{L}\p{Zs}\p{Lu}\p{Ll}\']+$"> 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-04-28T05:39:57.670

这个在 JavaScript 中非常适合我： `^[a-zA-Z]+[\s|-]?[a-zA-Z]+[\s|-]?[a-zA-Z]+$`

这是方法：

```
function isValidName(name) {
    var found = name.search(/^[a-zA-Z]+[\s|-]?[a-zA-Z]+[\s|-]?[a-zA-Z]+$/);
    return found > -1;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-08-20T12:15:45.360

脚步：

1.  首先删除所有重音
2.  应用正则表达式

去除重音：

```
private static string RemoveAccents(string s)
{
    s = s.Normalize(NormalizationForm.FormD);
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < s.Length; i++)
    {
        if (CharUnicodeInfo.GetUnicodeCategory(s[i]) != UnicodeCategory.NonSpacingMark) sb.Append(s[i]);
    }
    return sb.ToString();
} 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2012-06-28T00:23:41.933

这有点帮助：

`^[a-zA-Z]'?([a-zA-Z]|\.| |-)+$`

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2016-03-10T07:45:58.240

`^([A-Z]{1}+[a-z\-\.\']*+[\s]?)*` 如果需要，这个应该可以 添加一些特殊字符。

# c# - .NET 自定义表单设计器：如何实现 IMenuCommandService？

> ID：888845
> 
> 赞同：3
> 
> 时间：2009-05-20T16:06:34.767
> 
> 标签：c#, winforms, .net-2.0, form-designer

我有一个很久以前为数据库项目编写的报表设计器。它使用了很多 winapi 魔法，因此我被迫“以适当的方式”重写某些部分。

感谢 MSDN 杂志（[这里](http://msdn.microsoft.com/en-us/magazine/cc163871.aspx)和[这里](http://msdn.microsoft.com/en-us/magazine/cc163634.aspx)）和[CodeProject](http://www.codeproject.com/KB/cs/DesignSurfaceExtended.aspx)的一些文章，我能够实现设计器表面、工具箱和撤消/重做引擎。

1.  到目前为止，我在该主题上发现的每个资源都有些过时了。你能指出新鲜/全面的文章吗？

2.  [上面提到的文章](http://msdn.microsoft.com/en-us/magazine/cc163871.aspx)中的代码似乎不起作用。

    MenuCommandService.ShowContextMenu 被调用但没有出现，因为 globalVerbs 集合中没有任何 DesignerVerbs。我是否应该手动添加与剪切/粘贴等设计器操作相对应的“标准”操作？如果是，我该如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-26T16:18:53.787

感谢 SharpDevelop 资源，我能够找出解决方案

这个最小的实现（一些标准命令，不再）对我有用

```
using System;
using System.Collections.Generic;
using System.ComponentModel.Design;
using System.Diagnostics;
using System.Windows.Forms;
using System.Drawing;

namespace DesignerHost
{
    class MenuCommandServiceImpl : MenuCommandService
    {
        DesignerVerbCollection m_globalVerbs = new DesignerVerbCollection();

        public MenuCommandServiceImpl(IServiceProvider serviceProvider)
            : base(serviceProvider)
        {
            m_globalVerbs.Add(StandartVerb("Cut", StandardCommands.Cut));
            m_globalVerbs.Add(StandartVerb("Copy", StandardCommands.Copy));
            m_globalVerbs.Add(StandartVerb("Paste", StandardCommands.Paste));
            m_globalVerbs.Add(StandartVerb("Delete", StandardCommands.Delete));
            m_globalVerbs.Add(StandartVerb("Select All", StandardCommands.SelectAll));

        }

        private DesignerVerb StandartVerb(string text, CommandID commandID)
        {
            return new DesignerVerb(text,
                delegate(object o, EventArgs e) 
                {
                    IMenuCommandService ms = 
                        GetService(typeof(IMenuCommandService)) as IMenuCommandService;
                    Debug.Assert(ms != null);
                    ms.GlobalInvoke(commandID); 
                }
            );
        }

        class MenuItem : ToolStripMenuItem
        {
            DesignerVerb verb;

            public MenuItem(DesignerVerb verb)
                : base(verb.Text)
            {
                Enabled = verb.Enabled;
                this.verb = verb;
                Click += InvokeCommand;
            }

            void InvokeCommand(object sender, EventArgs e)
            {
                try
                {
                    verb.Invoke();
                }
                catch (Exception ex)
                {
                    Trace.Write("MenuCommandServiceImpl: " + ex.ToString());
                }
            }
        }

        private ToolStripItem[] BuildMenuItems()
        {
            List<ToolStripItem> items = new List<ToolStripItem>();

            foreach (DesignerVerb verb in m_globalVerbs) 
            {
                items.Add(new MenuItem(verb));
            }
            return items.ToArray();
        }

        #region IMenuCommandService Members

        /// This is called whenever the user right-clicks on a designer.
        public override void ShowContextMenu(CommandID menuID, int x, int y)
        {
            // Display our ContextMenu! Note that the coordinate parameters to this method
            // are in screen coordinates, so we've got to translate them into client coordinates.

            ContextMenuStrip cm = new ContextMenuStrip();
            cm.Items.AddRange(BuildMenuItems());

            ISelectionService ss = GetService(typeof (ISelectionService)) as ISelectionService;
            Debug.Assert(ss != null);

            Control ps = ss.PrimarySelection as Control;
            Debug.Assert(ps != null);

            Point s = ps.PointToScreen(new Point(0, 0));
            cm.Show(ps, new Point(x - s.X, y - s.Y));
        }

        #endregion

    }
} 
```

**更新**

找到了[类似的解决方案](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2006/09/03/8635.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T18:03:26.927

一个月前我遇到了同样的问题，[在这里](http://mef.codeplex.com/)从 CodePlex 得到了一些非常有趣和有用的东西。[我在Brad Abram 的博客](http://blogs.msdn.com/brada/archive/2009/04/13/managed-extensibility-framework-preview-5-released.aspx)文章中读到了这一点。其中包括许多关于框架可扩展性的示例，自定义 Windows 窗体设计器界面就是其中之一。

**链接文本 1： http: [//mef.codeplex.com/](http://mef.codeplex.com/)**

**链接文本 2：http: [//blogs.msdn.com/brada/archive/2009/04/13/managed-extensibility-framework-preview-5-released.aspx](http://blogs.msdn.com/brada/archive/2009/04/13/managed-extensibility-framework-preview-5-released.aspx)**

谢谢。

# plugins - QuickTime 插件不发送 cookie

> ID：888847
> 
> 赞同：1
> 
> 时间：2009-05-20T16:07:10.960
> 
> 标签：plugins, quicktime

该应用程序有一个带有缩略图的页面。单击缩略图会调用播放器对象上的 SetURL() javascript 函数。

在 Windows 上的 Safari 中，大约 75% 的时间，插件会发出请求，发送 cookie，然后一切顺利。另外 25% 的时间，它在一半的时间内都无法加载，当它加载时，它不会循环。当它失败时，我们会看到以下请求：

127.0.0.1 - [20/May/2009:11:15:19 -0400] "GET /full/?id=1 HTTP/1.1" 302 - "-" 80 7542 0 QuickTime/7.6 (qtver=7.6;os= Windows NT 5.1Service Pack 3) 127.0.0.1 - [20/May/2009:11:15:19 -0400] "GET /denied/ HTTP/1.1" 200 3385 "-" 80 9050 0 QuickTime/7.6 (qtver=7.6 ;os=Windows NT 5.1Service Pack 3) 127.0.0.1 - [20/May/2009:11:15:20 -0400] "GET /full/?id=1 HTTP/1.1" 200 2639638 "-" 80 2005787 2 Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/525.27.1 (KHTML, like Gecko) 版本/3.2.1 Safari/525.27.1

第一个请求直接来自插件，并且该请求不包含会话 cookie，因此应用程序将其重定向到“未经授权的访问”页面。然后我们看到插件向重定向页面发出请求。然后我们看到来自浏览器本身的相同初始请求。该请求包含 cookie，因此它成功。大约一半的时间，电影播放，另一半没有。

正如我所说，如果我们在一个页面上有 10 个缩略图，那么其中至少 7 个都可以正常工作，因此我们知道插件实际上已加载。没有 javascript 错误。

我在 IE 中看到过类似的行为，但无法始终如一地重现它。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-09-15T21:26:36.667

在我们的开发服务器上，我们通过密码保护服务器级别的站点（通过 htpasswd）。

在 Firefox 中，第一次为新电影调用 SetURL() 时，浏览器将等待并弹出密码警报，无论它是否在钥匙串中“记住”。发送凭据后，QuickTime 将加载电影。

在 Chrome 中，它被记住了。

IE 仍然不会交换文件。立即下载 Charles Proxy...

# apache-flex - AS3 类函数范围

> ID：888850
> 
> 赞同：1
> 
> 时间：2009-05-20T16:07:37.650
> 
> 标签：apache-flex, actionscript-3

如果我有 2 个类并且第一个类扩展了第二个类，那么第二个类如何从第一个类调用静态函数？

```
 package p1 {
    class a {
        static function a1() {
            //do soemthing
        }
    }

    class b extends a {
        static function b1() {
            //do something else
        }
    }
} 
```

```
 a.a1(); // this works
b.a1(); // this doesn't work
b.b1(); //this works 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T16:57:54.943

当“B 扩展 A”时 - 这实际上与“B 类具有 A 的所有方法和属性”不同。不是类，而是 B 类的对象实现了在 A 类中定义的所有属性和方法。当您调用静态方法或属性时 - 您处理的是类而不是对象（它看起来非常类似于命名空间的用法）。

添加：解决您的任务的唯一方法是覆盖 B 类中的 a1(args) 并在其中调用 super.a1(args) ... 1 串代码。但在我看来，如果无法避免这种用法，您就有软件架构师的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-20T16:15:12.643

使用 super 调用父方法。

```
super.b1(); 
```

编辑：好的，看看你写的内容，我认为你需要将 a1 的范围设置为公开或受保护。

# javascript - JQuery 选择器和“is”的问题

> ID：888853
> 
> 赞同：2
> 
> 时间：2009-05-20T16:08:41.830
> 
> 标签：javascript, jquery, jquery-selectors

我很难理解为什么某个特定的选择器不适合我。诚然，我是一个 JQuery 新手。

这会正确选择页面上的**第一个**div.editbox 并将其着色为黄色：

```
$('div.editbox:first').css("background-color","yellow"); 
```

但是，此`if ... is`构造使**每个**框在鼠标悬停时出现突出显示的边框。

```
$('div.editbox').bind('mouseover', function(e) {
    if ($(this).is('div.editbox:first')) {$(this).css("border", "1px solid red");}
}); 
```

我尝试过诸如 '.editbox :first'、'.editbox div:first' 等变体。

本质上，我希望能够可靠地测试这是类名的第一个还是最后一个元素。

谢谢！

编辑：这是我正在使用的 HTML：

```
<body>
<div class="container">
<p></p>
<div class="editbox" id="box1">Foo</div>
<div class="editbox" id="box2">Bar</div>
<div class="editbox" id="box3">Baz</div>
<div class="responsebox" id="rbox"></div>
</div>
</body> 
```

这只是一个概念验证页面；实际页面当然要复杂得多。再说一遍：我想要的是可靠地检测我是在第一个还是最后一个“div.editbox”中。我使用的解决方法是：

```
$('div.editbox:last').addClass("lasteditbox"); 
```

然后测试`if ($(this).is(".lasteditbox"))`哪个有效，但这似乎很笨拙，我正在尝试学习使用 JQuery 执行此操作的正确方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T16:13:52.630

如果您希望鼠标悬停在 div 内的类编辑框的第一次出现上

```
$('div.editbox:first').mouseover(function() {
   $(this).css("border", "1px solid red");
}); 
```

**编辑**

```
$('div.editbox').mouseover(function() {
   $(this).css("border", "1px solid yellow");
}).filter(':first').mouseover(function(){
  $(this).css("border", "1px solid red");
}).filter(':last').mouseover(function(){
  $(this).css("border", "1px solid blue");
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T16:19:19.390

**更新：**这适用于第一个元素。

```
$('div.editbox').bind('mouseover', function(e) {
 if ($("div.editBox").index(this) == 0) {
      $(this).css("border", "1px solid red");
    }
}); 
```

对于最后一个元素，此选择器有效：

```
if($("div.editBox").index(this) == ($("div.editBox").length-1)){
     $(this).css("color","red");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T16:16:19.317

你试过了吗

```
if ($(this).is(':first')) {$(this).css("border", "1px solid red");} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T16:38:36.713

```
 $('div.editbox').mouseover(function() {
       //change the css for all the elements
       $(this).css("background-color", "yellow");
    })
    .filter(':first,:last').mouseover(function(){
      //execlude the first and the last
      $(this).css("background-color", "Blue");
    }) 
```

# java - JTabbedPane：选项卡本身之前和之后的组件

> ID：888856
> 
> 赞同：0
> 
> 时间：2009-05-20T16:08:56.150
> 
> 标签：java, user-interface, google-chrome, jtabbedpane

这类似于问题[How to build a Google-chrome tabs and menubar interface in Java Swing?](https://stackoverflow.com/questions/464149/how-to-build-a-google-chrome-tabs-and-menubar-interface-in-java-swing) （我想完成同样的事情），但更重要的是：如何将组件放在 JTabbedPane 中选项卡的前面和后面？

我自己已经提出了按钮的想法，但我宁愿有一个 JTabbedPane，因为它确实是这样，但在侧面装饰了一个按钮或图标。

我已经看到来自 Kirill 的[laf-widget](https://laf-widget.dev.java.net/)项目为几个 LaF 做了类似的事情（选项卡左侧的放大镜图标）。然而，我必须承认，我还不够精通理解他是如何做到的——而且这似乎是一个有点复杂的过程，一个人“物理地”改变有问题的 LaF（字节码操纵它），注入 laf - 将小部件放入 UI 代表 - 我仍然不知道 JTabbedPane 或 TabbedPaneUI 是如何实际调制以注入该图标/按钮的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T08:14:13.233

我最后问了[Substance LaF](https://substance.dev.java.net/see.html) /laf-widget 的 Kirill，他是如何设法在装饰 JTabbedPanes 的 laf-widget 的选项卡前面放置一个按钮的，这是他的回答：

> 它依赖 BasicTabbedPaneUI.tabAreaInsets 字段为按钮腾出空间，并通过按钮组件的自定义 setBounds 将其自身定位在该区域中。
> 
> 有关更多代码，请参阅 laf-widget 项目中的 TabOverviewButton 和 TabOverviewDialogWidget 类。
> 
> 一般来说，选项卡式窗格 UI 委托是最不吸引人的增强之一，因为它有很多私有和包保护方法

谢谢，基里尔！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T08:26:24.987

[JIDE](http://www.jidesoft.com/)有一个选项卡式窗格作为其组件套件的一部分，它以简单的 setBeforeComponent() 和 setAfterComponent() 方法公开此功能。

这里有一个演示：[http ://www.jidesoft.com/products/1.4/jide_demo.jnlp](http://www.jidesoft.com/products/1.4/jide_demo.jnlp)

# excel - 在 Excel 中相加两次

> ID：888857
> 
> 赞同：0
> 
> 时间：2009-05-20T16:08:58.460
> 
> 标签：excel, time

我今天有点头疼，是由 excel 和它控制一切的方式引起的。我需要将两个时间值相加，然后除以我为该时间收取的费用，以计算出我一小时花费了多少。

所以说我在 12:30:00 被收取了一天的费用

在第 2 天，我被收取了 13:20:00 的费用

第 3 天，我被收取 20:30:00 的费用

总共花了我1000英镑

计算将是

1000 英镑/（12:30:00 + 13:20:00 + 20:30:00 = 46:20:00）

我想我会得到答案

1000 / Sum(12:30:00+13:20:00+20:30:00) = 每小时价格

但它不...

我想我需要某种时间转换功能或将其除以 24 以获得小时数，但我被卡住了

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T16:23:22.940

Excel 将时间表示为小数天，因此您的函数实际上表示每天的费率。
假设您的时间在单元格 A1:A3 中，您可以将函数调整为：

```
1000 / Sum(A1:A3) / 24 
```

这将为您提供每小时的费率（根据我的计算，每小时 21.58 英镑）。

正如其他人所提到的，您需要将单元格设置为货币格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T16:29:00.867

假设您的 hh:mm:ss 值在页面下方（A 列）运行，在下一列中输入公式

```
=(A1-INT(A1))*24 
```

在这下面你可以把你的公式

```
= 1000 / SUM(A1:A3) 
```

但不要忘记将其格式化为数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T16:20:37.063

Excel 应该正确执行计算，但它只是显示为时间。将结果单元格格式化为“数字”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T16:24:53.123

您可以使用 HOUR 和 MINUTE 函数来获取时间值的小时和分钟部分，但是正如 lc 提到的，您需要确保单元格的格式设置为数字，因为它将默认为时间。

# perl - Perl Getopt::Long 相关问题 - 相互排斥的命令行参数

> ID：888864
> 
> 赞同：5
> 
> 时间：2009-05-20T16:10:59.827
> 
> 标签：perl, command-line, getopt

我的 perl 脚本中有以下代码：

```
我的$目录；
我的文件;
我的帮助；
我的男人；
我的 $verbose;

undef $目录；
undef @files;
undef $帮助；
undef $人;
undef $详细;

获取选项（
           "dir=s" => \$directory, # 具有默认值的可选变量 (false)
           "files=s" => \@files, # 允许逗号分隔的可选变量
                                # 文件名列表以及多个
                    # 此选项的出现次数。
           “帮助|？” => \$help, # 具有默认值的可选变量 (false)
           "man" => \$man, # 具有默认值的可选变量 (false)
           "verbose" => \$verbose # 带有默认值的可选变量 (false)
          );

    如果（@files）{
    @files = split(/,/,join(',', @files));
    }

```

处理互斥命令行参数的最佳方法是什么？在我的脚本中，我只希望用户只输入“--dir”或“--files”命令行参数，但不能同时输入。无论如何配置Getopt来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T16:21:09.853

我不认为 Getopt::Long 有办法做到这一点，但它很容易自己实现（我假设有一个使用函数返回一个字符串，告诉用户如何调用程序):

```
die usage() if defined $directory and @files; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T16:24:04.623

为什么不只是这样：

```
if ($directory && @files) {
  die "dir and files options are mutually exclusive\n";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T16:37:34.143

您可以简单地检查两个变量中是否存在值。

```
if(@files && defined $directory) {
    print STDERR "You must use either --dir or --files, but not both.\n";
    exit 1;
} 
```

或者，如果您想简单地忽略在第一个 --dir 或 --files 之后指定的任何选项，您可以将两者都指向一个函数。

```
#!/usr/bin/perl

use Getopt::Long;

my $directory;
my @files;
my $mode;
my $help;
my $man;
my $verbose; 

GetOptions(
    "dir=s" => \&entries,    # optional variable with default value (false)
    "files=s" => \&entries,  # optional variable that allows comma-separated
                             # list of file names as well as multiple 
                             # occurrences of this option.
    "help|?" => \$help,      # optional variable with default value (false)
    "man" => \$man,          # optional variable with default value (false)
    "verbose" => \$verbose   # optional variable with default value (false)
);

sub entries {

   my($option, $value) = @_;

    if(defined $mode && $mode ne $option) {
        print STDERR "Ignoring \"--$option $value\" because --$mode already specified...\n";
    }
    else {
        $mode = $option unless(defined $mode);
        if($mode eq "dir") {
            $directory = $value;
        }
        elsif($mode eq "files") {
            push @files, split(/,/, $value);
        }
    }

    return;

}

print "Working on directory $directory...\n" if($mode eq "dir");
print "Working on files:\n" . join("\n", @files) . "\n" if($mode eq "files"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T21:42:29.753

```
use strict;
use warnings;
use Getopt::Long;

my($directory,@files,$help,$man,$verbose);

GetOptions(
  'dir=s'   => sub {
    my($sub_name,$str) = @_;
    $directory = $str;

    die "Specify only --dir or --files" if @files;
  },

  # optional variable that allows comma-separated
  # list of file names as well as multiple 
  # occurrences of this option.
  'files=s' => sub {
    my($sub_name,$str) = @_;
    my @s = split ',', $str;
    push @files, @s;

    die "Specify only --dir or --files" if $directory;
  },    

  "help|?"  => \$help,
  "man"     => \$man,
  "verbose" => \$verbose,
);

use Pod::Usage;
pod2usage(1) if $help;
pod2usage(-exitstatus => 0, -verbose => 2) if $man; 
```

```
=head1 名称

示例 - 使用 Getopt::Long 和 Pod::Usage

=head1 概要

示例 [选项] [文件 ...]

 选项：
   -help 简短的帮助信息
   -man 完整文档

=head1 选项

=超过 8

=项目B

打印简短的帮助信息并退出。

=项目B

打印手册页并退出。

=返回

=head1 描述

B 将读取给定的输入文件并做一些事情
对其内容有用。

=切

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-08T18:16:43.087

您可以使用`Getopt::Long::Descriptive`. 它与 有点不同`Getopt::Long`，但如果您要打印使用摘要，它会为您完成所有这些工作，从而有助于减少重复。

在这里，我添加了一个名为 的隐藏选项`source`，因此`$opt->source`它将包含值`dir`或`files`取决于给定的选项，它将`one_of`为您强制执行约束。给出的值将在`$opt->dir`或中`$opt->files`，以给出的值为准。

```
my ( $opt, $usage ) = describe_options(
    '%c %o',
    [ "source" => hidden => {
        'one_of' => [
            [ "dir=s" => "Directory" ],
            [ "files=s@" => "FilesComma-separated list of files" ],
        ]
    } ],
    [ "man" => "..." ],          # optional variable with default value (false)
    [ "verbose" => "Provide more output" ],   # optional variable with default value (false)
    [],
    [ 'help|?' => "Print usage message and exit" ],
);
print( $usage->text ), exit if ( $opt->help );

if ($opt->files) {
    @files = split(/,/,join(',', @{$opt->files}));
} 
```

脚本其余部分的主要区别在于，所有选项都包含为`$opt`变量的方法，而不是每个选项都有自己的变量，如 with `Getopt::Long`。

# .net - 在 .NET 中创建新的最大化 MDI 子窗体时出现图标问题

> ID：888865
> 
> 赞同：16
> 
> 时间：2009-05-20T16:11:21.620
> 
> 标签：.net, winforms, icons, mdi

我有一个 .NET 3.5 MDI WinForms 应用程序。

我设置了一个子表单的`Icon`属性，图标正确显示在表单的左上角。然后我最大化子窗体，图标仍然可以。

*在子窗体仍然最大化的情况*下，我打开另一个子窗口，它会自动最大化。此表单的图标不是`Icon`属性中的图标，而是默认的 .NET 图标（带有蓝色、红色和黄色方块的那个）。但是，如果我*调整*MDI 父窗体的大小，图标会自行重置并正确显示。

有没有人有解决方法或知道为什么会这样？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2011-07-15T00:26:28.917

对 Calanus 的解决方案稍作修改：

```
 private void MdiBase_Load(object sender, EventArgs e)
    {
        // Fixes bug where loading form maximised in MDI window shows incorrect icon.
        this.Icon = Icon.Clone() as Icon;
    } 
```

这允许您在设计时设置图标（就像其他表单一样），并且不需要任何硬编码文件或资源访问。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-06-28T16:48:39.980

是的，我找到了解决方案...

解决方法是在子窗体的加载事件上再次设置图标，如下所示：

```
private void StatsForm_Load(object sender, EventArgs e)
{
    //bug that means you have to set the desired icon again otherwise it reverts to default when child form is maximised
    Icon = new System.Drawing.Icon("research.ico");
} 
```

这确实意味着您必须首先将相关图标文件添加到您的 VS 项目/解决方案中，并将其设置为“始终复制”，以便在构建解决方案时进行复制。

HTH 卡兰努斯

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-09-21T10:34:29.980

我发现唯一的解决方案是停用然后重新激活 MDI 子项：

```
document.Show();
// Work-around for error in WinForms that causes MDI children to be loaded with the default .NET icon when opened maximised.
ActivateMdiChild(null);
ActivateMdiChild(document); 
```

这是[MSDN 论坛上的回复](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/bf71c250-ae36-4d75-a6ad-4058e3fac9da)中给出的解决方案，它对我有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-07-03T10:05:19.877

```
private void frmChild_Shown(object sender, EventArgs e)
{
    // Work-around for maximized BUG
    this.Icon = this.MdiParent.Icon;
    this.WindowState = FormWindowState.Normal;
    this.WindowState = FormWindowState.Maximized;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-07-19T08:31:40.030

我发现这也可以解决问题。

```
myForm.WindowState = FormWindowState.Normal;
myForm.Show();
myForm.WindowState = FormWindowState.Maximized; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-05-03T19:01:24.503

我的解决方案：将 MdiChild“ShowIcon”属性设置为 true，分配一个 1x1 透明图标。问题解决了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-14T04:25:57.330

将此添加为 MDI Children 的 Form_Load 方法的第一行对我有用：

```
this.Icon = new Icon(this.Icon, this.Icon.Size); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-10-01T20:21:33.973

```
form.WindowState = FormWindowState.Normal
form.Show()
form.WindowState = FormWindowState.Maximized
form.Show() 
```

解决了我的问题！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-09-30T13:48:11.800

我发现解决此问题的最佳解决方法是[在这里](https://connect.microsoft.com/VisualStudio/feedback/details/106264/mdi-form-icon-formborderstyle-windowstate-maximized)。

```
aNewForm.FormBorderStyle = Windows.Forms.FormBorderStyle.FixedDialog
AddHandler aNewForm.SizeChanged, AddressOf Form_SizeChanged

aNewForm.Show()
aNewForm.WindowState = FormWindowState.Maximized

RemoveHandler aNewForm.SizeChanged, AddressOf Form_SizeChanged 
```

处理程序

```
Protected Sub Form_SizeChanged(ByVal sender As Object, ByVal e As EventArgs)

    If WindowState = FormWindowState.Maximized Then
        If FormBorderStyle <> FormBorderStyle.Sizable Then FormBorderStyle = FormBorderStyle.Sizable
    End If

End Sub 
```

# guid - MS Dynamics CRM - 数据库 GUID

> ID：888871
> 
> 赞同：8
> 
> 时间：2009-05-20T16:13:25.220
> 
> 标签：guid, dynamics-crm

我正在使用 SDK for CRM，并在我们的一个实体的一堆实例上打印出 PK。我用数据库的过滤视图重复了它，得到了相同的答案：

```
    1a6c691d-391a-de11-8b0e-0050568407cb
    bd7b0ff0-391a-de11-8b0e-0050568407cb
    ed272bfe-391a-de11-8b0e-0050568407cb
    ... 等等 ...

```

这些似乎不是有效的 GUID。一方面，它们看起来是错误的 - 它们几乎相同，这是 GUID 自基于 MAC 地址和时钟时间的旧版本 1 和 2 GUID 以来所没有的属性。然而，此外，GUID 中的某个 nibble 表示 GUID 的版本 - 此处的 nibble 不正确。（第三部分的第一个半字节，即：1a6c691d-391a-** *d* **e11-8b0e-0050568407cb） - 有效值为 1-5）（使用 MS 的 GUID 生成器生成 GUID - 该插槽将始终为 4。（至少对于我拥有的版本。））

这些是 GUID，还是只是 ID，我怎么知道？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-04T03:02:09.273

你是对的，它们是 GUID 并且它们是连续的。这些密钥不是由 CRM 生成的。它们由 SQL Server 生成。

SQL Server 有一个称为 uniqueidentifier 的 GUID 类型。它可以配置为 NEWID() 或 NEWSEQUENTIALID()。NEWID() 每次都会生成一个新的 GUID。NEWSEQUENTIALID() 第一次生成一个 GUID，然后在后续的数据库插入中按顺序递增它。

因此，您发现 Dynamics CRM 配置为 NEWSEQUENTIALID()。

有关此的更多信息在这里： [http ://www.mssqltips.com/tip.asp?tip=1600](http://www.mssqltips.com/tip.asp?tip=1600)

# javascript - 如何在 Firefox 中从 JavaScript 解析 HTML？

> ID：888875
> 
> 赞同：13
> 
> 时间：2009-05-20T16:14:34.000
> 
> 标签：javascript, ajax, firefox, dom

在 Firefox 中解析（获取 DOM 树）XmlHttpRequest 的 HTML 结果的最佳方法是什么？

编辑：

我*没有*DOM 树，我想获取它。

XmlHttpRequest 的“responseXML”仅在结果是实际 XML 时才有效，所以我只有 responseText 可以使用。

~~innerHTML hack 似乎不适用于完整的 HTML 文档（在 <html></html> 中）。~~- 事实证明它工作正常。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-20T17:21:18.733

**`innerHTML`**应该可以正常工作，例如

```
// This would be after the Ajax request:
var myHTML = XHR.responseText;
var tempDiv = document.createElement('div');
tempDiv.innerHTML = myHTML.replace(/<script(.|\s)*?\/script>/g, '');

// tempDiv now has a DOM structure:
tempDiv.childNodes;
tempDiv.getElementsByTagName('a'); // etc. etc. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-01-07T08:27:19.907

至少对于较新的 Firefox 版本，一种更简单的方法已经或即将推出。

[https://developer.mozilla.org/en/HTML_in_XMLHttpRequest](https://developer.mozilla.org/en/HTML_in_XMLHttpRequest)表明从 FF11 开始可以通过将`responseType`属性设置为`"document"`. 那时，HTML 将被解析，并且 DOM 会`responseXML`像 XML 文档一样被插入。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-10T09:10:36.577

您可以使用 DOMParser 来解析 HTML - 甚至是标签汤：

```
var parser = new DOMParser()
parser.parseFromString('<!DOCTYPE html><html><head><title>hi</title></head><body><p>hello<b>world</b></p>', 'text/html') 
```

我不知道它是否能很好地处理部分表标记，但它应该创建与浏览器本身对几乎任何标记相同的 DOM。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T16:42:03.197

如果您的数据是 XHTML，因此它是有效的 XML，那么 DOMParser (Mozilla) 或 loadXML (IE) 可能会有所帮助。如果没有，我想不出比剥离 and 然后将其传递给 a 的 innerHtml 更好的方法了。

请参阅 Flanagan 的 Javascript 指南（第 5 版）中的 21.1.3。

科林

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-20T16:19:54.007

循环 XMLHttpRequest 对象的 responseXML 属性。此外，如果您使用 innerHTML 附加 HTML 格式响应的 responseText，浏览器将解析文本并将其组装到 DOM 中，甚至在将其附加到文档流之前。

# html - 隐藏的单选按钮，但在 ie8 中围绕它的框

> ID：888876
> 
> 赞同：1
> 
> 时间：2009-05-20T16:14:48.527
> 
> 标签：html, css, internet-explorer

我用背景图像设置了单选按钮的样式，基本上我所做的是

```
<input type="radio" id="btn" name="btn" style="opacity: 0;filter: alpha(opacity = 0);position:absolute;">
<label for="btn">My Text</label> <!--- added styles to it ---> 
```

有了这个我得到这样的输出

```
Image1 that shows how the display should be: http://i39.tinypic.com/2vcyidg.png 
```

它在除IE8以外的每个浏览器中都可以正常工作，在IE8中，它在选择标签时显示了一个围绕隐藏按钮的虚线盒

```
Image2 shows the problems in ie8: http://i39.tinypic.com/j8l635.png 
```

我不能选择属性显示：无；就像在 IE 浏览器中一样，它会禁用单选按钮，所以我必须隐藏它。

我怎样才能在ie8中隐藏那个虚线框？

谢谢你。

问候，

什尚特·托迪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T16:24:15.353

您不使用 <input type="hidden" /> 有什么原因吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T16:39:36.290

如果你可以使用 javascript：

```
<input onfocus="this.blur()" type="radio" id="btn" name="btn" style="opacity: 0;filter: alpha(opacity = 0);position:absolute;" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-05-14T20:24:56.440

我有一个类似的问题，我的单选按钮和复选框显示边框，但仅在 IE 中。就我而言，这是一个 CSS 问题，其中这些输入被视为与文本输入相同。我只是在样式表中定义了一个新类并指定了一个零像素的边框。

# asp.net - ASP.Net 事件循环顺序

> ID：888879
> 
> 赞同：6
> 
> 时间：2009-05-20T16:15:06.030
> 
> 标签：asp.net, events, event-handling, event-loop

我遇到了很多问题（通常是在上一页的按钮单击事件之前执行页面加载事件），我决定查找它并发布事件循环排序：

```
 Method                              Called    Controls
     ------------------------------------------------------
1\.   Constructor                         Always    All
2\.   AddParsedSubObject                  Always    All
3\.   DeterminePostBackMode               Always    Page
4\.   OnInit                              Always    All
5\.   LoadPageStateFromPersistenceMedium  Postback  Page
6\.   LoadViewState                       Postback  All
7\.   ProcessPostData1                    Postback  Page
8\.   OnLoad                              Always    All  //Page Load
9\.   ProcessPostData2                    Postback  Page
10\.  RaiseChangedEvents                  Postback  Page
11\.  RaisePostBackEvent                  Postback  Page //Button Clicks
12\.  OnPreRender                         Always    All  //Put page load events here
13\.  SaveViewState                       Always    All
14\.  SavePageStateToPersistenceMedium    Always    Page
15\.  Render                              Always    All
16\.  OnUnload                            Always    All 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-21T11:21:02.077

以下是当您拥有母版页时所涉及的事件的完整列表：

> [ASP.NET 页面事件生命周期](http://weblogs.asp.net/ricardoperes/archive/2009/03/08/asp-net-page-events-lifecycle.aspx)

1.  Page.OnPreInit
2.  MasterPageControl.OnInit（用于母版页上的每个控件）
3.  Control.OnInit（针对页面上的每个控件）
4.  MasterPage.OnInit
5.  Page.OnInit
6.  Page.OnInitComplete
7.  Page.LoadPageStateFromPersistenceMedium
8.  Page.LoadViewState
9.  MasterPage.LoadViewState
10.  Page.OnPreLoad
11.  Page.OnLoad
12.  MasterPage.OnLoad
13.  MasterPageControl.OnLoad（对于母版页上的每个控件）
14.  Control.OnLoad（针对页面上的每个控件）
15.  OnXXX（控制事件）
16.  MasterPage.OnBubbleEvent
17.  Page.OnBubbleEvent
18.  Page.OnLoadComplete
19.  Page.OnPreRender
20.  MasterPage.OnPreRender
21.  MasterPageControl.OnPreRender（用于母版页上的每个控件）
22.  Control.OnPreRender（针对页面上的每个控件）
23.  Page.OnPreRenderComplete
24.  MasterPageControl.SaveControlState（对于母版页上的每个控件）
25.  Control.SaveControlState（针对页面上的每个控件）
26.  Page.SaveViewState
27.  MasterPage.SaveViewState
28.  Page.SavePageStateToPersistenceMedium
29.  Page.OnSaveStateComplete
30.  MasterPageControl.OnUnload（针对母版页上的每个控件）
31.  Control.OnUnload（针对页面上的每个控件）
32.  MasterPage.OnUnload
33.  Page.OnUnload

# c# - Datagrid CurrentRowIndex 返回 -1？

> ID：888880
> 
> 赞同：1
> 
> 时间：2009-05-20T16:15:10.473
> 
> 标签：c#, .net, windows-mobile, compact-framework

这似乎很奇怪。我有一个绑定到 List 或 Inventory[] 的 Datagrid (.net 3.5 cf)。当我单击一行然后单击按钮以执行操作时，当我绑定到列表时 CurrentRowIndex 为-1。当我绑定到 Inventory[] 并执行相同的操作时，CurrentRowIndex 返回所选行，为什么会这样？

```
grdBatch.DataSource = InventoryItems.ToArray(); 
```

对比

```
grdBatch.DataSource = InventoryItems; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T17:33:22.720

嗯，我在复制问题时遇到了麻烦（数组和列表对我来说都很好）。目标系统是什么？另外，您正在执行的操作是什么？

您可以尝试使用 BindingSource 作为列表和数据网格之间的中介，但不确定它是否会有所帮助。这些方面的东西：

```
BindingSource bs = new BindingSource();
bs.DataSource = InventoryItems;
grdBatch.DataSource = bs; 
```

# c# - 对于静态类型的人来说，C# 4 中的新功能

> ID：888893
> 
> 赞同：3
> 
> 时间：2009-05-20T16:16:55.603
> 
> 标签：c#, .net-4.0

首先让我说我知道动态，没有 PIA，命名和可选参数，最后是协变和逆变。

在我的项目中，99% 的时间我的代码都是用 C# 编写的，我几乎从不使用 Office 自动化，我不打算很快使用任何动态语言，而且，除了 Office 自动化所必需的之外，我认为命名参数和可选参数是错误的（不，重载不算，如果你有那么多重载，问题出在设计上，而不是语言上）。

那么对于静态类型世界中的 C# 家伙有什么好处呢？，唯一的事情似乎是协变和逆变，这听起来不错，但我希望有更多的东西。我很高兴尝试的唯一一点是 Linq 的并行扩展，但仅此而已（这是 [可用于 3.5[作为 CTP](http://www.microsoft.com/downloads/details.aspx?FamilyId=348F73FD-593D-4B3C-B055-694C50D2B0F3&displaylang=en)）。

你为什么退出 C# 4？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-20T16:24:24.030

1.  更好的垃​​圾收集

2.  新的线程池引擎

3.  代码合同

4.  如果您不进行 ASP.NET WebForms 开发，您不会在意，但是那里也有显着的改进。

[.NET 4.0 新功能的学习资源](http://bogdanbrinzarea.wordpress.com/2009/04/24/learning-net-40-new-features/)

...点击链接以获取有关某些新功能的一些优质资源。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-20T16:19:04.133

从非 COM、非动态的角度来看，在 C# 4 中唯一令人兴奋的是协变和逆变。其他一切都以动态类型为中心。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-20T16:40:22.157

真正可选的默认参数、协/逆变（*一直是*Java 的优势）和 ParallelFX。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-20T16:20:12.307

工具箱中现在有一个新的图表控件......是的，我没有别的......

# asp.net - 将焦点设置到 MsgBox 对象

> ID：888896
> 
> 赞同：0
> 
> 时间：2009-05-20T16:17:20.313
> 
> 标签：asp.net, vb.net

在我的应用程序中，用户单击“保存”按钮，然后显示一个 MsgBox 确认，简单地说明“您确定要保存吗？”，或类似的内容。

它时好时坏，但偶尔，这个 MsgBox 会在浏览器后面加载，而不是成为焦点。我怎样才能阻止这种情况发生？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T18:05:04.950

如果您使用的是 ASP.NET WebForms 并且它是一个 Intranet 应用程序，您是否考虑过使用[ASP.NET AJAX ModalPopup 控件](http://www.asp.net/AJAX/AjaxControlToolkit/Samples/ModalPopup/ModalPopup.aspx)？这样一来，您实际上就没有第二个窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-23T12:16:16.023

在后面的代码中添加一个简单的 JavaScript 确认诊断的方法...

```
 buttonSaveId.Attributes.Add("OnClick" , "return (confirm('Do you really want to save ?! '));" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T16:20:22.727

你在谈论javascript消息框吗？

# vba - 如何在 Word 2007 VBA 中访问某种 OnLoad 事件？

> ID：888897
> 
> 赞同：2
> 
> 时间：2009-05-20T16:17:26.633
> 
> 标签：vba, ms-word, ms-office

我试图在第一次加载文档时触发一些代码，但是有两个问题。首先，我不知道在第一次打开文档时调用哪个方法来触发某些东西。其次，如果他们禁用了宏，我如何确保在启用它们时调用它？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T16:49:39.127

该`Document_Open`事件在您的文档首次加载时发送。要使用它，请在 VBA 代码中输入以下内容`ThisDocument`：

```
Private Sub Document_Open()

    '// your code goes here'

End Sub 
```

至于禁用的宏，我不知道启用宏后将立即调用的方法。

# c# - C# Socket.LocalEndPoint 在某些机器上返回 0.0.0.0

> ID：888899
> 
> 赞同：0
> 
> 时间：2009-05-20T16:17:43.607
> 
> 标签：c#, sockets

为什么此时 LocalEndpoint = 0.0.0.0？根据文档，它应该是系统选择的适当地址。注意：这只发生在某些机器上。大多数机器返回我期望的 IP 地址。这是 .NET 中的错误吗？

```
using (Socket s = new Socket(AddressFamily.InterNetwork, 
   SocketType.Stream, ProtocolType.Tcp))
   {
       Console.WriteLine("Connecting");
       s.Connect("www.google.com", 80);
       Console.WriteLine("Connected OK");
       s.Send(new byte[] { 1 });
       Console.WriteLine("Sent Byte OK");
       Console.WriteLine("Local EndPoint = " + 
       s.LocalEndPoint.ToString());
    }
    //Local EndPoint = 0.0.0.0 
```

我也试过做

```
s.Bind(new IPEndPoint(IPAddress.Any, 0)); 
```

直接在创建套接字之后，它没有任何区别。“问题”机器总是返回 0.0.0.0。

这是 ipconfig /all 的结果

```
Windows IP Configuration

    Host Name . . . . . . . . . . . . : andrepc
    Primary Dns Suffix  . . . . . . . : 
    Node Type . . . . . . . . . . . . : Unknown
    IP Routing Enabled. . . . . . . . : No
    WINS Proxy Enabled. . . . . . . . : No 
```

以太网适配器本地连接 2：

```
 Media State . . . . . . . . . . . : Media disconnected
    Description . . . . . . . . . . . : VIA VT6105 Rhine Fast Ethernet Adapter
    Physical Address. . . . . . . . . : 00-30-18-67-A0-EB 
```

以太网适配器本地连接：

```
 Connection-specific DNS Suffix  . : 
    Description . . . . . . . . . . . : Realtek RTL8029 PCI Ethernet Adapter
    Physical Address. . . . . . . . . : 00-C0-DF-E7-C9-5D
    Dhcp Enabled. . . . . . . . . . . : Yes
    Autoconfiguration Enabled . . . . : Yes
    IP Address. . . . . . . . . . . . : 10.0.0.6
    Subnet Mask . . . . . . . . . . . : 255.0.0.0
    Default Gateway . . . . . . . . . : 10.0.0.2
    DHCP Server . . . . . . . . . . . : 10.0.0.2
    DNS Servers . . . . . . . . . . . : 10.0.0.2
    Lease Obtained. . . . . . . . . . : Wednesday, May 20, 2009 5:39:06 PM
    Lease Expires . . . . . . . . . . : Thursday, May 21, 2009 5:39:06 PM 
```

10.0.0.6 将是我期望的 IP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-03T01:22:46.627

我认为您从我的测试中获得了套接字上本地端点的正确结果，这基本上是默认 ip，因为“0.0.0.0”基本上告诉套接字如果您使用该套接字侦听，则侦听所有网络适配器。IPEndpoint.Any 属性基本上等于“0.0.0.0”的 ip。

我认为您使用 netstat 获取本地 IP，因为您正在使用该方法解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T08:16:25.850

好的决定使用解决方法。测试和工作。谁能想到这样做的原因可能无法提供准确的 IP/端口？

```
static void Main(string[] args)
{
    try
    {
        using (Socket s = new Socket(AddressFamily.InterNetwork, 
            SocketType.Stream, ProtocolType.Tcp))
        {
            Console.WriteLine("Connecting");
            s.Connect("www.google.com", 80);
            Console.WriteLine("Connected OK");
            s.Send(new byte[] { 1 });
            Console.WriteLine("Sent Byte OK");
            Console.WriteLine("Local EndPoint Netstat       = " + 
                GetLocalEndPoint(s));
            Console.WriteLine("Local EndPoint LocalEndPoint = " + 
                ((IPEndPoint)s.LocalEndPoint).ToString());
        }
    }
    catch (Exception e)
    {
        Console.WriteLine("Exception - " + e.Message);
    }
}

static string GetLocalEndPoint(Socket s)
{
    Console.WriteLine(DateTime.Now.TimeOfDay.ToString() + 
        " Find IP LocalEndPoint");

    IPGlobalProperties properties = IPGlobalProperties.GetIPGlobalProperties();
    TcpConnectionInformation[] connections = 
        properties.GetActiveTcpConnections();
    IPEndPoint remoteEP = (IPEndPoint)s.RemoteEndPoint;
    foreach (TcpConnectionInformation netstat in connections)
    {
        if (remoteEP.ToString() == netstat.RemoteEndPoint.ToString())
        {
            Console.WriteLine(DateTime.Now.TimeOfDay.ToString() + 
                " Find IP LocalEndPoint OK");
            //Use the "Netstat" IP but the socket.LocalEndPoint port
            return new IPEndPoint(netstat.LocalEndPoint.Address, 
                ((IPEndPoint)s.LocalEndPoint).Port).ToString();
        }
    }
    return string.Empty;
}

Connecting
Connected OK
Sent Byte OK
09:57:38.5312500 Find IP LocalEndPoint
09:57:38.5312500 Find IP LocalEndPoint OK
Local EndPoint Netstat       = 10.0.0.6:1711
Local EndPoint LocalEndPoint = 0.0.0.0:1711 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-23T10:16:36.290

we tested it now and IP 0.0.0.0 is returned when "ipconfig -all" windows command line command returns at first place Adapter that is **disconnected**.

If you "closed / stop" (I dont know what word in English it exactly is, I dont have English Windows) the adapter, you see that it return right IP.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T16:35:05.583

尝试使用 ((IPEndPoint)s.LocalEndPoint).ToString());

# smalltalk - 在 Squeak 中，如何包装每个发送方法？

> ID：888900
> 
> 赞同：2
> 
> 时间：2009-05-20T16:17:43.900
> 
> 标签：smalltalk, squeak, object-model

我创建了一个类，在那个类中我有一个方法'sendMessage: to: withArgs:'，它接收一个对象、一个消息和一个参数数组。该方法用于向对象发送消息并执行一些算法。要使用此方法，我必须创建我创建的类的实例 x 并执行 x sendMessage: '+' to: '7' withArgs: '#(5)' 之类的操作。使用参数 5 向对象 7 发送消息“+”的结果，以及我的算法所做的一些事情。但我想要的是该算法将在每个方法调用中使用，这意味着 7+5 将调用我的'sendMessage: to: withArgs:'。我怎样才能做到这一点？或者至少，在发送给每个对象的每个方法中是否调用了某些东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T16:30:38.290

在 Squeak 中，请参见 ObjectTracer 类。类注释描述了如何使用它。你应该能够用它来完成你所需要的，或者至少用它作为模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T16:31:20.113

这有点有趣，我们刚刚在 Squeak irc 频道中讨论过这个问题。或许可以看看 ObjectViewer。

在您的示例中，您希望拦截发送到 SmallInteger 的消息。有趣的是，ObjectViewer 几乎可以与每个类一起使用，但 SmallInteger 除外。

因此，要拦截发送到 myObject 的消息，请执行此操作。

创建类 Intercepter，让它继承自 ObjectTracer，也许。将 doesNotUnderstand 更改为对您有用的内容：

```
doesNotUnderstand: aMessage
   "do Mojo to aMessage as you describe it" 
```

然后，为了让你的东西继续运行，创建你的拦截器：

```
myIntercepter := Intercepter on: myObject. 
```

接着

```
myObject become: myInterceptor. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-25T10:00:29.463

看看[反射率](http://scg.unibe.ch/Research/Reflectivity/)。

不幸的是，一些论文链接不起作用，我不记得从头顶发出的确切调用，但是根据需要检测代码真的很容易，甚至在运行时也可以。使用 class 查找示例`Link`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T21:44:38.860

您可以使用方法包装器。要查看方法包装器是什么，您可以查找一篇名为“Wrappers to the rescue”的论文。我认为有一个已经实现方法包装器的 squeak 包。此外，您可以看到在最新版本的 Pharo 中如何进行测试代码覆盖分析，因为它使用一种方法包装器来查看在测试运行期间评估了哪些方法。干杯，加博托

# django - Django - 计算模型实例视图（用于“顶级条目”应用程序）

> ID：888905
> 
> 赞同：0
> 
> 时间：2009-05-20T16:19:02.977
> 
> 标签：django, django-models, django-views, django-middleware

我是新手，很困惑。我想创建一个模块来跟踪文章和博客模型的“热门”实例。我不想接触文章或博客模型的代码。这是中间件的候选人吗？看着`HttpRequest.path`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T02:05:04.153

查看 request.path 的中间件很难看，因为它引入了对用于显示文章和博客文章的 URL 模式细节的依赖。如果您不介意这种耦合，那么您不妨保存性能损失并在网络服务器日志文件上进行分析。（**编辑**：[视图中间件](http://docs.djangoproject.com/en/dev/topics/http/middleware/#process_view)将是一个更好的选择，因为它为您提供了可调用的视图及其参数。我仍然更喜欢装饰器方法，因为它不会在不相关的视图上产生开销，但是如果您不想要，视图中间件也可以工作触摸博客/文章应用程序的 URLconf）。

我会使用一个视图装饰器，您可以将它包裹在 object_detail 视图（或您的自定义等效视图）周围。您可以直接在 URLconf 中执行此包装。像这样的东西：

```
def count_hits(func):
    def decorated(request, *args, **kwargs):
        # ... find object and update hit count for it...
        return func(request, *args, **kwargs)
    return decorated 
```

你可以在views.py中应用它：

```
@count_hits
def detail_view(... 
```

或在您的 URLconf 中：

```
url(r'^/blog/post...', count_hits(detail_view)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-30T23:32:44.050

你可以创建一个通用的 Hit 模型

```
class Hit(models.Model):
    date = models.DateTimeFiles(auto_now=True)
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey('content_type', 'object_id') 
```

在你的 view.py 你写这个函数：

```
def render_to_response_hit_count(request,template_path,keys,response):
    for  key in keys:
        for i in response[key]:
             Hit(content_object=i).save()
    return render_to_response(template_path, response) 
```

以及您感兴趣的意见回报

```
return render_to_response_hit_count(request,   'map/list.html',['list',],
        {
            'list': l,
        }) 
```

这种方法使您不仅可以计算命中，还可以按时间、内容类型等过滤命中历史……

由于命中表可能会快速增长，您应该考虑删除策略。

# c# - 用于获取客户端机器 MAC 地址的 Web 服务器

> ID：888907
> 
> 赞同：1
> 
> 时间：2009-05-20T16:19:14.710
> 
> 标签：c#, asp.net, iis

我正在尝试为在线构建的 C# winform 应用程序构建一些复杂的东西，并尝试在这里和那里收集一些信息。我在网上查看过，可以使用任何一种方法来获取网络上计算机的 mac 地址System.Net.NetworkInformation 或 System.Management.ManagementClass（由于某些原因我无法引用）。我的烦恼在哪里

1.  我的网络服务器在线可以知道连接到它的客户端机器的mac地址吗？
2.  如果问题 1 是真的，我猜它会使用 IP（如果我错了，请纠正我）如果客户端的机器位于代理服务器后面或使用多个 Web 代理怎么办？
3.  如果问题 1 和 2 是肯定的，如何从 Web 服务器执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T16:30:23.890

不，没有简单的方法可以做到这一点。

MAC 地址只能在同一个子网上解析 - 假设这不是一个相当小的 Intranet 应用程序，您将不会与您的客户端在同一个子网上。

理论上，使用远程 WMI 查询客户端是可行的——但防火墙和权限问题并非易事。同样，除非您可以控制所有客户 - 您不太可能在这里取得成功。

你唯一能做的就是一个可下载的应用程序——可能是 Flash、Silverlight 或 ActiveX——它会为你询问本地机器。我不确定该信息是否会被浏览器沙盒化。

我的猜测是有一种更简单的方法来做你想做的事情——但你需要提供更多关于你*为什么*想要 MAC 地址的细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T16:23:02.953

您无法从 Web 服务器获取任何此类信息，因此您不应该尝试。考虑到机器可能有多个 IP 地址和多个 MAC 地址，并且可能位于代理服务器或网络地址转换设备之后，或者更糟。

IP 地址属于网络层，一般不应该被应用层使用。如果不出意外，网络管理员不太可能在对网络进行更改时咨询开发人员，这将使您的假设无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T17:06:37.033

正如其他回复所暗示的那样，获取 IP 地址可能无法满足您的需求。你想用这些信息做什么？

您可能想尝试使用[System.Management.ManagementObjectSearcher](http://msdn.microsoft.com/en-us/library/system.management.managementobjectsearcher.aspx "管理对象搜索器")对象来查询此类信息。我知道这可以用来获取每个连接的网络适配器的 MAC 地址。这个逻辑必须在客户端，然后可以将您需要的任何信息传递给服务器。

看起来[此 Google 网上论坛帖子](http://groups.google.com/group/microsoft.public.dotnet.framework/msg/99c7fc19e42d5409)可能会满足您的需求。这是有趣的一点：

```
using System.Management;

ObjectQuery query = new ManagementObjectSearcher("SELECT * FROM Win32_NetworkAdapterConfiguration"); 
ManagementObjectCollection queryCollection = query.Get();
foreach( ManagementObject mo in queryCollection )
{
     foreach(string s in addresses)
     { 
            Console.WriteLine( "IP Address ‘{0}’", s); 
     }
     foreach(string s in subnets)
     { 
            Console.WriteLine( "IP Subnet ‘{0}’", s); 
     }
} 
```

# css - 如何将 div 居中并使其围绕其中的 div 展开？

> ID：888908
> 
> 赞同：5
> 
> 时间：2009-05-20T16:19:18.250
> 
> 标签：css, html

我有一个我想要居中的页面，在整个内容周围有一个背景和一个边框。

我制作了一个 div 并使用我想要的背景颜色和边框设置进行设置。

问题是它里面有浮动的 div 并且背景没有围绕浮动 div 伸展。我能够让它工作的唯一方法是设置位置：绝对。然后边框确实围绕浮动 div 展开，但我无法使用常规 html/css 将它们居中。

我发现了一个 javascript hack 让它居中，但它只在页面加载后居中，而且看起来很糟糕。

我确信有一种方法可以让容器扩展并仍然居中，我只是想不通。

这是一个分享我的问题的示例 html 页面

```
<div style="background-color: Red; width: 980px; position: absolute;" id="container">
    <br />
    <br />
    <br />
    <br />
    <div style="width: 400px; background-color: Black; float: left;">
        <br />
        <br />
    </div>
    <div style="width: 400px; background-color: Blue; float: left;">
        <br />
        <br />
    </div>
</div> 
```

这是使它工作的Javascript（使用Jquery）

```
$(function() {
        var winH = $(window).height();
        var winW = $(window).width();
        $("#container").css('left', winW / 2 - $("#container").width() / 2);
    }); 
```

必须有更好的方法。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T16:25:33.370

`auto`用作 left 和 right以使`margin`元素居中。

在浮动元素之后放置一个元素，并用于`clear`将其放在它们下方。由于它不是浮动的，它会影响外部 div 的大小。

```
<div style="margin: 0 auto; background-color: Red; width: 980px;" id="container">
    <br />
    <br />
    <br />
    <br />
    <div style="width: 400px; background-color: Black; float: left;">
        <br />
        <br />
    </div>
    <div style="width: 400px; background-color: Blue; float: left;">
        <br />
        <br />
    </div>
    <div style="clear: both; height: 0; overflow: hidden;"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T16:31:45.167

也许我对你的问题理解得不够好，但我认为你正在寻找类似的东西。这是我们的简单布局：

```
<html>
    <head>
        ...
    </head>

    <body>

        <div id="center">
            <!-- your content -->
        </div>

    </body>

</html> 
```

为了让 div#center 的内容移动到页面的中心，我们需要以下 CSS：

```
body {
    text-align: center;
}

div#center {
    text-align: left;
    width: 600px;    // Or some other arbitrary width
    margin: 0 auto;
} 
```

这将使身体内的一切居中。但是， text-align: center; 属性也将应用于 body 的孩子，所以我们用第二个样式规则取消它。或者，代替 div#center，您可以使用以下样式规则：

```
body * {
    text-align: left;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T16:24:48.583

这是一个棘手的问题，但我在样式表中使用了以下代码；

```
<style>div.sentor {text-align: center; height: 100%;} div.child{margin-left: auto; margin-right: auto; width: 95%; height: 100%;}</style> 
```

然后在体内；

```
<div class="sentor">
<div class="child">
    <div id="mycontent"> 
```

这应该可以解决问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T21:24:34.297

利用：

```
<div style="margin:0 auto; overflow:hidden; background-color: Red; width: 980px; id="container"> 
```

边距：0 自动；将使红色 div 居中。

溢出：隐藏；将使红色 div 拉伸以包含两个浮动 div。

# data-structures - 存储库模式与“智能”业务对象

> ID：888911
> 
> 赞同：58
> 
> 时间：2009-05-20T16:19:42.073
> 
> 标签：data-structures, architecture, repository-pattern

在 .NET（Winforms、WPF、ASP.NET）上创建更大规模的企业级应用程序时，我看到了两个主要的“思想流派”。

有些人使用“存储库模式”，它使用知道如何获取、插入、更新和删除对象的存储库。这些对象相当“愚蠢”，因为它们不一定包含大量逻辑——例如，它们或多或少是数据传输对象。

另一个阵营使用我所谓的“智能”业务对象，它们知道如何加载自己，它们通常有一个 Save()、可能是 Update() 甚至是 Delete() 方法。在这里，您真的不需要任何存储库 - 对象本身知道如何加载和保存自己。

**大问题是**：您使用或喜欢哪个？为什么？

您是否在所有应用程序中使用相同的方法，或者您是否有任何特定标准何时选择一种方法而不是另一种？如果是这样 - 这些标准是什么？

我并不是想在这里发起一场激烈的战争——只是想了解每个人对此的看法以及您的意见，以及为什么您使用一种（或两种）模式而不是另一种模式。

感谢您的任何建设性意见！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-05-20T16:24:29.830

由于单一职责原则，我使用存储库模式。我不希望每个单独的对象都必须知道如何保存、更新、删除自己，因为这可以由一个单一的通用存储库处理

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-05-20T16:35:16.720

存储库模式不一定会导致哑对象。如果对象在保存/更新之外没有逻辑，那么您可能在对象之外做了太多事情。

理想情况下，您永远不应该使用属性从对象中获取数据、计算事物并将数据放回对象中。这是封装的突破。

所以对象不应该是贫血的，除非你使用简单的 DTO 对象和 CRUD 操作。

然后将持久性关注点与对象关注点分开是拥有单一职责的好方法。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2010-10-08T16:16:57.457

这是我遇到的两篇有趣的文章

[存储库是新的单例](http://ayende.com/Blog/archive/2009/04/17/repository-is-the-new-singleton.aspx)

[DAL 应该一直到 UI](http://ayende.com/Blog/archive/2009/04/18/the-dal-should-go-all-the-way-to-ui.aspx)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-09-11T23:01:50.930

[我认为使用 Repository 模式与ActiveRecord](http://en.wikipedia.org/wiki/Active_record_pattern)模式最重要的副作用是测试和可扩展性。

如果您的 ActiveRecord 对象不包含存储库本身，您将如何隔离测试用例中的数据检索？你不能轻易伪造或嘲笑它。

除了测试之外，交换数据访问技术也会变得更加困难，例如从 Linq-to-SQL 到 NHibernate 或 EntityFramework（尽管这并不经常发生）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-06T23:49:47.257

这确实取决于应用程序的需求，但是在处理复杂的业务模型时，我更喜欢 ActiveRecord。我可以在一个地方封装（和测试）业务逻辑。

大多数 ORM（EF、nHibernate 等）都用作您的存储库。许多人认为 ORM 之上的一层将所有数据交互封装为 Repository，我认为这是不正确的。根据 Martin Fowler 的说法，存储库将数据访问封装为一个集合。因此，为所有数据检索/变异提供单独的方法可能是使用数据映射器或数据访问对象。

使用 ActiveRecord，我喜欢有一个“实体”基类。我通常在这个基类中使用 ORM（存储库），所以我的所有实体都有 GetById、AsQueryable、Save 和 Delete 方法。

如果我更多地使用面向服务的架构，我将使用存储库（一个屏蔽直接数据访问*或*ORM 的存储库）并直接在我的服务中调用它。

# objective-c - 在考虑 Objective-c 中的“库”时，我必须想象什么？

> ID：888912
> 
> 赞同：0
> 
> 时间：2009-05-20T16:19:48.373
> 
> 标签：objective-c, cocoa, frameworks

对我来说，库是做有用事情的类的集合。通常情况下，这在很多项目中都很有用。在objective-c方面也是如此吗？那里的图书馆到底是什么？只有类有方法？还是函数集合？它们是否必须被编译才能称为“库”？“框架”之间的隔离在哪里？不都一样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T16:55:06.133

根据[Wikipedia](http://en.wikipedia.org/wiki/Cocoa_(API)#Main_frameworks "维基百科上的可可文章")的说法：“框架在功能上类似于共享库，共享库是一个编译后的对象，可以在运行时动态加载到程序的地址空间中，但框架添加了相关的资源、头文件和文档。”

框架本质上是捆绑中的共享库（二进制，类似于 DLL），还包括使用该库所需的所有信息（如头文件、文档、国际化资源等）。没有所有附加功能的框架只是一个库。

并不要求框架本质上是面向对象的，尽管我认为这是 Cocoa 的规范。

对于 Cocoa，框架的概念通常取代（增强）库的概念。然而，Objective-C 工具链没有强加这样的要求。您可以使用纯源“库”或 unix 风格的二进制库（例如 .so 文件）。我认为这些通用术语中的“库”......它只是有用代码的集合，源代码或二进制形式。另一方面，框架是对 OS X 具有特定含义的特定事物。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T16:25:53.993

假设您正在谈论一个使用 Cocoa 框架的库，而不仅仅是一个用普通的旧 Objective-C 语言编写的库，那么库（或框架）是一组类的集合，它们协同工作以执行特定任务。我不会将 ObjC 框架组织为函数的集合，因为这完全违背了语言的范式。

至于库和框架之间的区别，这可能有点主观。对我来说，库（在您的问题的上下文中）是用 C 语言编写的，可能更类似于非 OO 函数集合。如上所述，框架将是一个完整的类包。因此，CocoaDev 上的消息传递框架将是一个框架，而您可以在 iPhone 上访问的 sqlite3 API 将是一个库。再说一次，这只是我。其他人可能对这些术语有不同的解释。

# gwt - 禁止控制单击上下文菜单，gwt 1.6

> ID：888917
> 
> 赞同：2
> 
> 时间：2009-05-20T16:20:13.973
> 
> 标签：gwt

我的 gwt 1.6 应用程序拦截了对超链接的鼠标单击，因此当用户按住 shift 键单击指向“作者”的链接时，他们会得到一个 Edit... 对话框，而不是导航到作者的页面。这很好用。

我现在想让用户控制单击以选择多个作者，但我不知道如何抑制浏览器的默认弹出菜单。此代码正确处理 shift-clicks，但在托管浏览器中失败，当我在 Firefox 中进行 control-click 和半失败时（handleCtrlClick() 被调用，但我仍然得到浏览器菜单）：

```
 public void onModuleLoad() {
    Event.addNativePreviewHandler(this);
  }

  //
  // Preview events-- look for shift-clicks on paper/author links, and pops up
  // edit dialog boxes.
  // And looks for control-click to do multiple selection.
  //
  public void onPreviewNativeEvent(Event.NativePreviewEvent pe) {
    NativeEvent e = pe.getNativeEvent();
    switch (Event.getTypeInt(e.getType())) {
    case Event.ONCLICK:
      if (e.getShiftKey()) { handleShiftClick(e); }
      if (e.getCtrlKey()) { handleCtrlClick(e); }
      break;
    case Event.ONCONTEXTMENU:
      if (e.getCtrlKey()) {  // THIS IS NOT WORKING...
        e.preventDefault();
        e.stopPropagation();
      }
      break;
    }
  } 
```

永远不会调用在 ONCONTEXTMENU 案例中设置的断点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-23T02:45:42.593

IIRC ctrl + 单击是选择多个项目的正确方法，而不是 ctrl + 右键单击​​，除非您使用的是单键鼠标（iMac），在这种情况下我无法帮助您。

你能提供更多细节吗？

**编辑：**

为什么不覆盖上下文菜单（例如禁用它）然后创建您自己的上下文菜单小部件（可能基于垂直MenuBar + MenuItems）并仅在Ctrl + RightClick 上显示它？

换句话说，您将创建一个有点像这样的 MouseHandler（伪代码）：

```
public void onMouseDown(MouseDownEvent event) {
    Widget sender = (Widget) event.getSource();

    int button = event.getNativeButton();

    if (button == NativeEvent.BUTTON_LEFT) {
        if(event.is_ctrl_also)
        {
             // Add to selection
             selection = selection + sender;
        }
        else
        {
             // Lose selection and start a new one
             selection = sender;
        }
    }
    else if(button == NativeEvent.BUTTON_RIGHT) {
        if(event.is_ctrl_also)
        {
            // show context menu
            this.contextmenu.show();
        }
        else
        {
            // do something else
        }
    }

    return;
} 
```

我没有遇到 Ctrl-Leftclick 触发 ContextMenu 事件的错误，但我相信您也可以只使用排列来为 Firefox 制定解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T20:55:32.373

我越来越近了：

```
 public void onModuleLoad() {
    Event.addNativePreviewHandler(this); // Catch shift- or control- clicks on links
    addContextMenuEventListener(RootPanel.getBodyElement());
  }`protected native void addContextMenuEventListener(Element elem) /*-{
    elem.oncontextmenu = function(e) {
      return false; // TODO: only return false if control key down...
    };
  }-*/;`
```

这完全禁用了右键菜单；我真的只想在按下控制键的情况下禁用它...

# hibernate - 为什么 Spring 的 HibernateTemplate 的 loadAll() 方法会为每一行生成更新？

> ID：888921
> 
> 赞同：2
> 
> 时间：2009-05-20T16:20:34.100
> 
> 标签：hibernate, spring

我有一个由国家组成的数据库表。在我扩展 HibernateDAOSupport 的 DAO 中，以下方法...

```
public List<Country> getCountries() {
    return getHibernateTemplate().loadAll(Country.class);
} 
```

...生成以下活动：

```
Hibernate: update countries set name=?, iso_alpha_2=?, iso_alpha_3=? where id=?
Hibernate: update countries set name=?, iso_alpha_2=?, iso_alpha_3=? where id=?
Hibernate: update countries set name=?, iso_alpha_2=?, iso_alpha_3=? where id=?
...
once for each row 
```

但是，该方法有效。我得到了我的国家/地区列表，但是所有更新是什么？

我对这个类的映射并不是很奇特：

```
<class name="Country" table="countries">
    <id name="id" column="id">
        <generator class="identity"/>
    </id>
    <property name="name" column="name"/>
    <property name="alpha2" column="iso_alpha_2" />
    <property name="alpha3" column="iso_alpha_3" />
</class> 
```

谁能指出我正确的方向？为什么 loadAll 会触发更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T16:36:20.823

Hibernate 显然认为它从数据库加载的值已经改变，所以它正在刷新更新。

您可以在类映射中设置 'mutable="false"'，这应该会停止更新，但这并不理想。

尝试在类映射上设置 'dynamic-update="true"'，这至少会显示 Hibernate 认为需要更新的列。国家表中的值实际上是否以任何方式发生了变化？我认为，如果您在 org.hibernate.type 包上设置调试日志记录，您还将获得调试输出，显示更新语句绑定的值。

如果模型对象试图变得聪明，例如修剪空白，对数据库不保留的值进行更改，则可能会发生这种效果。

# python - isDigit() 用于有理数？

> ID：888925
> 
> 赞同：4
> 
> 时间：2009-05-20T16:21:22.583
> 
> 标签：python, string

我正在尝试评估我界面的一个文本框中的字符串是否是数字（即不是文本或其他任何内容）。在 Python 中，有一个名为 isdigit() 的方法，如果字符串仅包含数字（没有负号或小数点），它将返回 True。如果我的字符串是有理数（例如：1.25），是否有另一种方法可以评估。

示例代码：

```
if self.components.txtZoomPos.text.isdigit():
        step = int(self.components.txtZoomPos.text) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T16:27:07.877

[1.25 是实数](http://en.wikipedia.org/wiki/Real_number)常用的表示法，[有理数较少](http://en.wikipedia.org/wiki/Rational_number)使用。Python 的[float](http://docs.python.org/library/functions.html#float)会在转换失败时引发[ValueError 。](http://docs.python.org/library/exceptions.html#exceptions.ValueError)因此：

```
def isReal(txt):
    try:
        float(txt)
        return True
    except ValueError:
        return False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T16:27:23.163

`try`/`catch`在 Python 中非常便宜，尝试`float`从不是数字的字符串构造 a 会引发异常：

```
>>> float('1.45')
1.45
>>> float('foo')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: invalid literal for float(): foo 
```

您可以执行以下操作：

```
try:
    # validate it's a float
    value = float(self.components.txtZoomPos.text)
except ValueError, ve:
    pass # your error handling goes here 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-10-04T05:37:38.383

现有答案是正确的，因为更 Pythonic 的方式通常是`try...except`（即 EAFP）。

但是，如果您真的想进行验证，您可以在使用`isdigit()`.

```
>>> "124".replace(".", "", 1).isdigit()
True
>>> "12.4".replace(".", "", 1).isdigit()
True
>>> "12..4".replace(".", "", 1).isdigit()
False
>>> "192.168.1.1".replace(".", "", 1).isdigit()
False 
```

请注意，这不会将浮点数视为与整数有任何不同。如果您真的需要它，您可以添加该检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T16:25:17.957

如果文字无效，int() 或 float() 会抛出 ValueError

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T16:26:19.313

`float()``ValueError`如果转换失败，则抛出 a 。因此，尝试将您的字符串转换为浮点数，然后捕获`ValueError`.

# vb.net - 我应该使用类型代码的接口吗？

> ID：888930
> 
> 赞同：0
> 
> 时间：2009-05-20T16:23:24.530
> 
> 标签：vb.net, interface, types

我正在做一个有几个不同代码的项目。这些代码基本上都是这样使用的：

```
CodeKey
Description

GetList
GetSpecific
SetProperties 
```

我所有的课程都实现了这一点。然而，我对使用接口犹豫不决，因为一个问题——类型代码因类型而异。有些是字符串，有些是整数，有些是字节。我可以看到使用接口的唯一方法是将 typeCode 设置为接口中的对象，然后在我需要使用它时进行转换，但这似乎有点愚蠢。有任何想法吗？这是在 VB.NET 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T19:21:41.377

当我阅读它时，您可以使用通用接口。

```
Interface IYourType(Of T)
  Property CodeKey As T
  Property Description As String
  Sub GetList...
  Sub GetSpecific...
  Sub SetProperties...
End Interface 
```

我不确定我是否完全理解您的问题，但您的类型问题显然是对泛型的使用。

祝你好运 - 丹

# c# - 对于引用类型如何使用 IEquatable 减少铸件的使用？

> ID：888949
> 
> 赞同：2
> 
> 时间：2009-05-20T16:26:26.303
> 
> 标签：c#, casting, iequatable

我读过几篇文章

*使用 IEquatable 的引用类型减少了强制转换的使用*

有人可以提供一个令人信服的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T16:39:30.567

[只是在达里奥的解释](https://stackoverflow.com/questions/888949/for-reference-types-how-does-using-iequatablet-reduce-the-use-of-casting/888989#888989)之后添加一个简单的例子：

```
class Person : IEquatable<Person>
{
    public string Name { get; set; }

    public override bool Equals(object obj)
    {
        if (obj is Person)
        {
            Person other = (Person)obj;
            // check equality
        }
        return base.Equals(obj);
    }

    #region IEquatable<Person> Members

    public bool Equals(Person other)
    {
        // check equality without cast
    }

    #endregion
} 
```

注意：这只是一个小片段，说明了为什么这避免了`cast`. 对于正确的实施检查[文档](http://msdn.microsoft.com/en-us/library/ms131187.aspx)：

> 如果你实现了 IEquatable<(Of <(T>)>)，你还应该重写 Object..::.Equals(Object) 和 GetHashCode 的基类实现，以便它们的行为与 IEquatable<(Of <(T>)>)..::.Equals 方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T16:34:28.440

你知道[这篇文章](http://www.codeproject.com/KB/dotnet/IEquatable.aspx?display=PrintAll)吗？它说

> 如果你想拥有自己的实现，你可以重写这个方法。由于 Equals 方法有一个 Object 类型的参数，因此需要进行强制转换才能访问特定于类的成员。
> 
> 这就是 IEquatable 接口的用武之地。IEquatable 是 .NET 2.0 中的一个新通用接口，它允许您执行与 System.Object.Equals 方法相同的操作，但不必执行强制转换。所以，在实现这个接口的时候，可以减少强制转换的次数，这对性能来说是一件好事。尤其是在大量使用泛型集合时，因为泛型集合在其某些方法（List.Equals()、List.IndexOf()、List.LastIndexOf()、...）中使用了这种相等比较。

由于其泛型类型参数，`IEquatable<T>`可以在编译时提供类型检查，因此您不必使用`object`s 进行强制转换和后期绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T16:31:41.003

我相信你的答案在这里， http: [//msdn.microsoft.com/en-us/library/ms131190.aspx](http://msdn.microsoft.com/en-us/library/ms131190.aspx)。阅读页面上的备注部分。

# wpf - 在主窗口的边界处剪辑一个 wpf 弹出窗口

> ID：888956
> 
> 赞同：3
> 
> 时间：2009-05-20T16:27:59.450
> 
> 标签：wpf, popup, window, clip

据我了解，弹出窗口存在于它自己的可视化树中。但是，我注意到了一些属性，Clip 和 ClipToBounds。我想要做的是在窗口的右边缘和下边缘可视地剪辑一个弹出窗口，而不管弹出窗口独立于窗口边界的事实。我没有使用 XAML，但如果有人知道如何在 XAML 中进行操作，那很好。我可以使用 System.Windows.Application.Current.MainWindow 进入主窗口。是否有可能从中获得可用于剪辑弹出窗口的值？我假设如果有一个我可以使用的值，那么我将能够将弹出窗口的剪辑绑定到该值。这实际上是没有必要的，因为在弹出窗口最初打开后，如果窗口被移动或调整大小，弹出窗口就会关闭。所以我真的只需要在弹出窗口打开时对其进行剪辑。我想这样做的原因是因为虽然我使用的是弹出窗口，但我不希望它显示为存在于窗口之外的弹出窗口。仅供参考，这是用于自定义日期框的弹出日历。任何想法，以及对我可能有的误解的澄清，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-12-22T14:10:59.473

此外，可以从不直接在主窗口上的用户控件启动弹出窗口。因此，在这种情况下，使用弹出窗口会更容易。与 XAML 中的 UC 相对应

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-05-20T05:31:05.107

我知道这是一年前的帖子，但万一其他人来这里寻找答案......如果您不需要弹出窗口位于窗口之外，为什么要使用弹出窗口呢？简单地使用画布中的控件（例如）并通过其 Visibility 属性控制它会容易得多。然后你会自动得到你的剪辑。

# performance - 客户端缓存有问题？

> ID：888958
> 
> 赞同：1
> 
> 时间：2009-05-20T16:28:32.460
> 
> 标签：performance, algorithm, data-structures, caching

我想在客户端缓存数据。可以采用的最佳算法/数据结构是什么？

案例 1\. 要存储的数据需要极快的字符串搜索能力。
案例 2\. 缓存的数据集可能很大。我不想增加客户端的内存使用量，也不想进行网络和磁盘访问调用，这会减慢客户端的处理时间

解决方案：

案例1：我认为[后缀树/Tries](http://www.cs.mcgill.ca/~cs251/OldCourses/1997/topic7/)在这种情况下为您提供了一个很好的解决方案。

案例2：这里要考虑的两个问题是：

1.  以最小的内存消耗存储大数据
2.  不要进行任何网络调用来访问缓存中不可用的任何数据。LRU 缓存模型是我能想到的一种解决方案，但这并不能阻止我膨胀内存。

有没有办法在不影响数据的情况下写入文件和访问（安全方面）？

如果有任何不清楚的地方，请告诉我。

**编辑：** 乔希，我知道我的要求是不现实的。为了缩小我的要求，我正在寻找使用 LRU 算法存储的东西。如果我们可以对此 LRU 进行动态大小配置并对其进行最大限制，那就太好了。这将减少访问网络/数据库的调用次数并提供良好的性能。

如果这个 LRU 算法适用于可以解释的压缩数据，但开销很小（但比网络调用少），它会好得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T16:34:08.830

查看所有可用的缓存框架/库——我发现 Ehcache 非常有用。您还可以让它只在内存中保留一些（最近的），并在指定的内存使用情况下故障转移到磁盘。磁盘调用仍然会比网络调用快得多，并且您可以避免占用所有内存。

[缓存](http://ehcache.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T16:33:51.717

不幸的是，我认为你的期望是不切实际的。

保持较小的内存使用量，但也不进行磁盘访问调用意味着您无处存储数据。

此外，要回答您有关安全性的问题，**没有**“安全”的客户端数据存储（假设您正在谈论 Web 应用程序）。您可以对其进行加密，但这会破坏您的速度要求以及需要服务器端处理。存储在客户端和从客户端发送的所有内容都是可疑的。

也许如果你能更详细地描述这个问题，我们可以提出一些现实的解决方案。

# javascript - 在 Ruby 和 JavaScript 中测试未定义的变量？

> ID：888963
> 
> 赞同：23
> 
> 时间：2009-05-20T16:29:35.080
> 
> 标签：javascript, ruby, undefined

在 JavaScript 中，有一种有用的方法可以测试从未在任何给定点定义的变量。例如，如果变量**bob**尚未定义，以下代码片段将返回**true ：**

 **```
typeof(bob)=='undefined' 
```

如何在 Ruby 中完成相同的测试？

编辑：我正在寻找一个本质上同样紧凑的测试。我已经使用异常等提出了一些尴尬的近似值，但这些不是很漂亮！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2009-05-20T16:34:06.363

```
defined?(variable_name)

irb(main):004:0> defined?(foo)
=> nil
irb(main):005:0> foo = 1
=> 1
irb(main):006:0> defined?(foo)
=> "local-variable" 
```

这是一篇很好[的](http://redhanded.hobix.com/inspect/methodCheckDefined.html)文章。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-20T16:35:21.683

`defined?`是一个函数，如果项目未定义，则返回 nil。

```
defined? somevar
=> nil
somevar = 12
defined? somevar
=> "local-variable" 
```

所以：

```
if defined?(somevar)
  do_something
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-20T16:39:31.237

请记住定义？如果定义了变量，则返回一个字符串，否则返回 nil，因此对其结果使用条件检查。我认为语法暗示它将返回一个布尔值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-05T08:32:21.453

所有用例：

```
defined? ur_variable
=> nil

ur_variable= 12
defined? ur_variable
=> "local-variable"

another_variable = nil
defined? another_variable
=> "local-variable" 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-18T14:14:53.163

也可以这样测试。

```
 if somevar.nil
        # not set do something
    else
        # is set do something else
    end 
```

# javascript - Javascript window.open 被 IE 弹出窗口阻止程序阻止

> ID：888964
> 
> 赞同：12
> 
> 时间：2009-05-20T16:29:57.090
> 
> 标签：javascript, popup

谁能帮忙，我有一个被阻止的弹出窗口。这是一个弹出窗口，因为有人点击了我网站上的打印图片。

我认为当弹出窗口通过时 IE 不应该阻止这些`onclick`？

任何人都可以帮忙吗？`child1`始终返回变量，就像启用了`NULL`弹出窗口阻止程序一样...

也许问题是`onclick`事件随后将控制权传递给了一个新函数，该函数加载了一个 html 文件并执行`child.document.write`

这是我的简单代码..

```
var width = 800;
var height = 600;
var left = parseInt((screen.availWidth / 2) - (width / 2));
var top = parseInt((screen.availHeight / 2) - (height / 2));
var windowFeatures = "width=" + width + ",height=" + height 
   + ",menubar=yes,toolbar=yes,scrollbars=yes,resizable=yes,left=" 
   + left + ",top=" + top + "screenX=" + left + ",screenY=" + top;      

child1 = window.open("about:blank", "subWind", windowFeatures); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-20T16:40:46.430

问题是 open 只会在您导航到当前主机中的某个位置时返回对窗口的引用。您正在导航到不在您的主机内的 about:blank。

尝试将空白.htm 文件添加到您的站点并打开它。我仍然不确定 document.write 是否被允许该文档不会被打开以进行写入，尽管您可能能够操作现有空白文档的 DOM。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-20T19:35:58.633

Internet Explorer 弹出窗口阻止程序在设置为`Medium`过滤级别时，不会阻止由 JavaScript 打开的窗口（如果它们是由用户操作启动的）。以下在 IE 6、7 和 8 中运行良好：

```
<script type="text/javascript">
function openWin() {
    var width = 800;
    var height = 600;
    var left = Math.floor((screen.availWidth - width) / 2);
    var top = Math.floor((screen.availHeight - height) / 2);
    var windowFeatures = "width=" + width + ",height=" + height +
            ",menubar=yes,toolbar=yes,scrollbars=yes,resizable=yes," +
            "left=" + left + ",top=" + top +
            "screenX=" + left + ",screenY=" + top;
    child1 = window.open("about:blank", "subWind", windowFeatures);
    writeTo(child1);
}
function writeTo(w) {
    w.document.write('Test');
}
</script>
<a href="#" onclick="openWin();return false;">Test</a> 
```

请注意，`document.write`在某些 Web 浏览器中无法在新打开的窗口中使用。另请注意，这可能会在其他浏览器中触发弹出窗口阻止程序，即使它在 Internet Explorer 中显示也是如此。

我已经看到`onclick`在某些情况下，从事件调用 JavaScript 会导致弹出窗口阻止程序触发。这似乎与onclick事件的距离有关*。* `window.open()`在调用之前调用函数的函数级别太多`window.open()`。如果没有看到您的确切实施，我无法告诉您这是否是您遇到的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-20T16:37:20.337

它会阻止它，因为它不是具有 target="_blank" 的锚点。您正在以编程方式创建弹出窗口。

只需在您提供的代码示例之后执行此操作。

```
if (!child1) {
      alert('You have a popup blocker enabled. Please allow popups for www.yourSite.com');
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-08-22T08:26:15.993

请尝试代码

```
var newWin = window.open(...);
if (newWin && newWin.top) {
    // popup has opened
} else {
    // popup has been blocked
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T16:40:59.893

我建议您使用 target="_blank" 而不是 window.open() 制作一个虚拟 [form]。

我希望它有效。

问候。

PD：我想将您的网站添加到“受信任的网站”不是一种选择，对吧？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-11T04:10:42.700

我有一个想法，即 10/11：

```
let win = window.open();
setTimeout(function(){
    win.customParam = 'xxxx';
}); 
```

在 win 中，您可以在窗口加载后使用计时器或循环获取 customParam：

# asp.net-mvc - 有哪些方法可以在 ASP.NET MVC 中停止表单的多次回发？

> ID：888965
> 
> 赞同：21
> 
> 时间：2009-05-20T16:29:59.383
> 
> 标签：asp.net-mvc, postback, submit, action-filter

一个常见的 Web 问题是用户多次单击表单的提交按钮，因此服务器多次处理该表单。当用户点击后退按钮提交表单并再次处理时，也会发生这种情况。

在 ASP.NET MVC 中阻止这种情况发生的最佳方法是什么？

我看到的可能性是：

1.  提交后禁用按钮 - 这会绕过多次点击而不是导航
2.  立即重定向接收操作 - 浏览器似乎将这些重定向排除在历史记录之外
3.  在会话和表单上放置一个唯一令牌 - 如果它们匹配则处理表单 - 如果不清除表单以重新提交

还有更多吗？

这些是否有一些特定的实现？

我可以看到第三个选项被实现为带有 HtmlHelper 扩展的 ActionFilter，其方式与防伪工具类似。

期待收到您的 MVC'ers 的来信。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-20T19:20:43.563

人们经常忽略处理这个问题的最传统方法，即使用**nonce 键**。

您可以像其他人提到的那样使用**[PRG](http://en.wikipedia.org/wiki/Post/Redirect/Get)**，但 PRG 的缺点是它不能解决双击问题，它需要额外访问服务器进行重定向，并且由于最后一步是 GET 请求，因此您不需要'不能直接访问刚刚发布的数据（尽管它可以作为查询参数传递或在服务器端维护）。

我喜欢 Javascript 解决方案，因为它*大部分*时间都有效。

**然而，**Nonce 键始终有效。**nonce 键是服务器生成的随机唯一 GUID（也保存在数据库中）并嵌入到表单中。当用户发布表单时，随机数键也会被发布。一旦 POST 进入服务器，服务器就会验证其数据库中是否存在 nonce 键。如果是，服务器从数据库中删除密钥并处理表单。因此，如果用户 POST 两次，则不会处理第二个 POST，因为在处理第一个 POST 后删除了 nonce 键。**

 **nonce 密钥还有一个额外的优势，它通过防止[重播攻击](http://en.wikipedia.org/wiki/Replay_attack)（中间人嗅探您的 HTTP 请求，然后将其重播到将其视为合法的服务器）带来了额外的安全性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-20T16:46:49.147

您应该始终将重定向作为对 POST 的 HTTP 响应返回。当用户使用浏览器中的前进/后退按钮来回导航时，这将防止 POST 再次发生。

如果您担心用户双击您的提交按钮，只需使用一个小脚本在提交时立即禁用它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T16:48:55.710

您可能想查看[Post-Redirect-Get](http://en.wikipedia.org/wiki/Post/Redirect/Get) (PRG) 模式：

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T16:35:02.290

这确实不是 MVC 特定的，但我们在网页上遵循的模式是通过 AJAX 调用而不是整页 POST 执行操作。所以导航到一个 url 永远不会执行任何操作，只是显示表单。AJAX 调用不会出现在历史记录中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T16:44:38.903

除了禁用按钮外，您还可以在整个网页上添加一个透明的 div，这样单击就不会执行任何操作。我们在我的工作中这样做并添加一个友好的标签，说明处理请求..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-24T04:40:19.047

我发现最优雅的解决方案是使用 ActionFilters：

[博客文章在这里](http://rionghost.azurewebsites.net/2013/02/24/prevent-repeated-requests-using-actionfilters-in-asp-net-mvc/)

# algorithm - 查找字符串不同的第一个索引的算法？

> ID：888967
> 
> 赞同：2
> 
> 时间：2009-05-20T16:30:22.410
> 
> 标签：algorithm, arrays, sorting, indexing, unique

我有一组字符串，我需要知道它们都不同的第一个索引。我可以想到两种方法来做到这一点：（下面的伪代码就在我的脑海中，可能有很多错误）

第一种方式：

```
var minLength = [go through all strings finding min length];
var set = new set()
for(i=0;i<minlength;i++)
{
  for(str in strings)
  {
    var substring = str.substring(0,i);
    if(set.contains(substring))
      break; // not all different yet, increment i
    set.add(substring)
  }
  set.clear(); // prepare for next length of substring
} 
```

这让我觉得很恶心，因为使用了一套似乎不需要的数据结构。

第二种方式：

```
var minLength = [go through all strings finding min length];
strings.sort();
for(i=0;i<minlength;i++)
{
  boolean done = true;
  char last = null;
  for(str in strings)
  {
    char c = str[i];
    if(c == last)
    {
      // not all different yet, increment i
      done = false;
      break;
    }
    last = c;
  }
  if(done)
    return i;
} 
```

但是让我很恼火的是我必须先运行排序，因为排序算法就其本质而言，可以访问我正在寻找的信息。

肯定有比我上面列出的更有效的方法。最终我想将它抽象为任何类型的数组，但这将是微不足道的，并且将其视为字符串问题更简单。

有什么帮助吗？

**更新：我显然没有很好地解释自己。如果我的字符串是 [“apple”、“banana”、“cucumber”、“banking”]，我希望函数返回 3，因为有两个字符串（“banana”和“banking”）通过索引 0 匹配， 1 和 2，所以 3 是它们都是唯一的第一个*索引*。

正如丹尼尔在下面提到的，表达我的需求的更好方法是：“我想找到索引 i，在我所有的字符串上调用 substring(0,i) 将导致所有唯一值。”**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T16:57:48.923

这是未经测试的，但这是我的尝试。（我可能让它变得比我不得不做的更复杂，但我认为这是一种不同的看待它的方式。）

基本思想是编译在第一个元素处匹配的项目组，然后找到每个组的最大唯一索引，检查每个连续索引处的元素。

```
int FirstUniqueIndex<T>(IEnumerable<IEnumerable<T>> myArrayCollection)
{
    //just an overload so you don't have to specify index 0 all the time
    return FirstUniqueIndex(myArrayCollection, 0);
}

int FirstUniqueIndex<T>(IEnumerable<IEnumerable<T>> myArrayCollection, int StartIndex)
{
    /* Group the current collection by the element at StartIndex, and
     * return a collection of these groups. Additionally, we're only interested
     * in the groups with more than one element, so only get those.*/

    var groupsWithMatches = from var item in myArrayCollection //for each item in the collection (called "item")
                            where item.Length > StartIndex //that are long enough
                            group by item[StartIndex] into g //group them by the element at StartIndex, and call the group "g"
                            where g.Skip(1).Any() //only want groups with more than one element
                            select g; //add the group to the collection

    /* Now "groupsWithMatches" is an enumeration of groups of inner matches of
     * your original arrays. Let's process them... */

    if(groupsWithMatches.Any()) 
        //some matches were found - check the next index for each group
        //(get the maximum unique index of all the matched groups)
        return groupsWithMatches.Max(group => FirstUniqueIndex(group, StartIndex + 1));
    else
        //no matches found, all unique at this index
        return StartIndex;
} 
```

* * *

对于上述的非 LINQ 版本（我会将其更改为使用 List 集合，但任何集合都可以）。我什至会删除 lambda。再次未经测试，所以尽量不要将锋利的工具对准我的方向。

```
int FirstUniqueIndex<T>(List<List<T>> myArrayCollection, int StartIndex)
{
    /* Group the current collection by the element at StartIndex, and
     * return a collection of these groups. Additionally, we're only interested
     * in the groups with more than one element, so only get those.*/

    Dictionary<T, List<List<T>>> groupsWithMatches = new Dictionary<T, List<List<T>>>();

    //group all the items by the element at StartIndex
    foreach(var item in myArrayCollection)
    {
        if(item.Count > StartIndex)
        {
            List<List<T>> group;
            if(!groups.TryGetValue(item[StartIndex], out group))
            {
                //new group, so make it first
                group = new List<List<T>>();
                groups.Add(item[StartIndex], group);
            }

            group.Add(Item);
        }
    }

    /* Now "groups" is an enumeration of groups of inner matches of
     * your original arrays. Let's get the groups with more than one item. */

    List<List<List<T>>> groupsWithMatches = new List<List<List<T>>>(groups.Count);

    foreach(List<List<T> group in groupsWithMatches)
    {
        if(group.Count > 1)
            groupsWithMatches.Add(group);
    }

    if(groupsWithMatches.Count > 0)
    {
        //some matches were found - check the next index for each group
        //(get the maximum unique index of all the matched groups)

        int max = -1;
        foreach(List<List<T>> group in groupsWithMatches)
        {
            int index = FirstUniqueIndex(group, StartIndex + 1);
            max = index > max ? index : max;
        }
        return max;
    }
    else
    {
        //no matches found, all unique at this index
        return StartIndex;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T21:31:01.023

你看过[Patricia trie](http://en.wikipedia.org/wiki/Radix_tree)吗？（[谷歌代码上可用的Java实现](http://code.google.com/p/patricia-trie/)）

![替代文字](https://upload.wikimedia.org/wikipedia/commons/thumb/a/ae/Patricia_trie.svg/320px-Patricia_trie.svg.png)

构建trie，然后遍历数据结构，找到所有内部节点的最大字符串位置（上面函数中的黑点）。

这似乎应该是一个 O(n) 操作。我不确定您的 set 实现是否为 O(n) - 它“闻起来”像 O(n ² ) 但我不确定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T16:40:03.530

按照您的建议使用套装，这正是正确的做法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T17:14:18.513

您应该能够在不排序的情况下执行此操作，并且在最坏的情况下只查看每个字符串中的每个字符一次。

这是一个将索引放到控制台的 ruby​​ 脚本：

```
mystrings = ["apple", "banana", "cucumber", "banking"]
minlength = getMinLengthString(mystrings) #not defined here

char_set = {}

(0..minlength).each do |char_index|
  char_set[mystrings[0][char_index].chr] = 1
  (1..mystrings.length).each do |string_index|
    comparing_char = mystrings[string_index][char_index].chr
    break if char_set[comparing_char]
    if string_index == (mystrings.length - 1) then
      puts string_index
      exit
    else
      char_set[comparing_char] = 1
    end     
  end
  char_set.clear
end
puts minlength 
```

结果是 3。

这是 C# 中相同的一般代码段，如果它对您来说更清晰：

```
string[] mystrings = { "apple", "banana", "cucumber", "banking" };

//defined elsewhere...
int minlength = GetMinStringLengthFromStringArray(mystrings);

Dictionary<char, int> charSet = new Dictionary<char, int>();

for (int char_index = 0; char_index < minlength; char_index++)
{
    charSet.Add(mystrings[0][char_index], 1);

    for (int string_index = 1; string_index < mystrings.Length; string_index++)
    {
        char comparing_char = mystrings[string_index][char_index];

        if (charSet.ContainsKey(comparing_char))
        {
             break;
        }
        else
        {
             if (string_index == mystrings.Length - 1)
             {
                  Console.Out.WriteLine("Index is: " + string_index.ToString());
                  return;
             }
             else
             {
                  charSet.Add(comparing_char, 1);
             }
        }
    }

    charSet.Clear();
}
Console.Out.WriteLine("Index is: " + minlength.ToString()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T16:40:31.763

```
int i = 0;
while(true)
{
    Set set = new Set();
    for(int j = 0; j < strings.length; j++)
    {
         if(i >= strings[j].length) return i;
         String chr = strings[j].charAt(i);
         if(set.hasElement(chr))
             break;
         else
             set.addElement(chr);
    }
    if(set.size() == strings.length)
        return i;
    i++;
} 
```

必须先检查前置条件。

编辑：现在使用一套。改变了语言。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T21:12:11.903

这是我在 Python 中的解决方案：

```
words = ["apple", "banana", "cucumber", "banking"]

for i in range(len(min(words))):
    d = defaultdict(int)
    for word in words:
        d[word[i]] += 1
    if max(d.values()) == 1:
        return i 
```

我没有写任何东西来处理当你到达最短单词末尾时没有找到最小索引的情况，但我相信你明白了。

# mysql - 如何使用字符串/列值作为 mysql 日期间隔常量（DAY、MONTH ...）？

> ID：888971
> 
> 赞同：24
> 
> 时间：2009-05-20T16:30:42.970
> 
> 标签：mysql, datetime

我有三列：日期列、整数列和 varchar 列，如下所示：

```
+------------+------+---------+
| date       |value |  unit   |
+------------+------+---------+
| 2009-01-01 |    2 | DAY     | 
| 2009-02-01 |    3 | MONTH   | 
+------------+------+---------+ 
```

我想在 mysql date_add() 函数中使用整数和 varchar 列的值作为“INTVERAL”表达式的一部分，添加到“日期”列中的日期。

例如： date_add( **2009-01-01** , INTERVAL **2** **DAY** )，因此 '2009-01-01' 来自 'date' 列，'2' 来自 "value"/integer 列，而 " DAY”来自 'unit'/varchar 列。

选择看起来像这样：

```
select date_add(table.date_column, INTERVAL table.integer_column table.varchar_column) from table 
```

问题是：它不起作用。日期和整数列有效，所以可以：

```
 select date_add(table.date_column, INTERVAL table.integer_column DAY) from table 
```

但是**一旦我尝试用列中的字符串值替换“DAY”关键字，我就会收到一条错误消息。**

有任何想法吗？

我想更普遍的问题是：

*如何使用动态检索的值作为常量/键表达式？*mysql中有一种“eval”函数吗？

这个问题困扰了我很长时间，任何帮助都会非常棒。

打

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2011-11-28T08:42:20.897

不幸的是 MySQL 在 INTERVAL 之后需要一个关键字，而不是任何字符串或数值。您可以通过使用 CASE 语句来实现您想要的，并使用不同的关键字给出不同的案例。

例如，假设您想将具有适当单位的值添加到日期，那么 SQL 语句将如下所示：

```
SELECT CASE unit
       WHEN "DAY" THEN date_add(date, INTERVAL value DAY)
       WHEN "MONTH" THEN date_add(date, INTERVAL value MONTH)
       END
       AS newDate
FROM table 
```

顺便说一句，也适用于 WHERE 子句:)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-20T16:43:08.360

我认为您最好对单位列的每个可能值使用 CASE 语句，因为它是一个有限的宇宙。您可以选择是将该列保留为 varchar，还是使用整数代码。

我不鼓励使用动态执行的 SQL 语句，即使是从现有表生成的，除非您在限制插入表中的值时 120% 小心。如果您以某种方式在表中获得以下值，您会怎么做？哎呀！

```
+------------+------+----------------------------- --------+
| 日期 |值 | 单位 |
+------------+------+----------------------------- --------+
| 2009-01-01 | 2 | 天 |
| 2009-02-01 | 3 | 月 |
| 2009-03-01 | 4 | DAY) FROM 表；DROP TABLE 表；|
+------------+------+----------------------------- --------+

```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2009-05-20T16:45:35.280

我正在我的机器上重新安装 MySQL，所以我无法测试它，但如果 CONCAT() 在这里允许的话，将它们连接成一个有效的字符串可能会有所帮助：

```
SELECT 
   DATE_ADD(
      table.date_column, 
      INTERVAL CONCAT(
         table.integer_column,
         ' ',
         table.varchar_column
      )
   ) 
```

# iphone - 哪个更好：写函数，还是写方法？什么成本更高？

> ID：888974
> 
> 赞同：3
> 
> 时间：2009-05-20T16:30:53.483
> 
> 标签：iphone, cocoa-touch, uikit

目前我正在为我的第一个 Objective-C API 做一些决定。没什么大不了的，只是对我自己的一点帮助，以便将来更快地完成工作。

在阅读了几个小时关于不同模式（如创建类别、单例等）的信息后，我发现了一些我喜欢的东西，因为它对我来说似乎很容易维护。我正在制作一组有用的功能，它们在任何地方都很有用。

所以我所做的是：

1）我创建了两个新文件（.h、.m），并为“类”命名：SLUtilsMath、SLUtilsGraphics、SLUtilsSound 等。我认为这是一种“命名空间”，所以所有这些东西都会被称为 SLUtils******。我将它们全部添加到一个 Group SL 中，其中包含一个子组 SLUtils。

2）然后我只是将我的函数签名放在 .h 文件中，并将函数的实现放在 .m 文件中。猜猜看：它有效！我对它很满意，而且它很容易使用。唯一令人讨厌的是，每次需要时我都必须包含适当的标题。不过没关系，因为这很正常。不过，我可以将它包含在标题前缀 pch 文件中。

但是后来我去厕所，一个鬼出来了，说：“喂！做真正的方法而不是函数不是更好吗？你不应该做类方法，这样你就不得不调用一个方法。比函数？那不是更酷，性能不是更好吗？好吧，为了可读性，我更喜欢这些功能。另一方面，他们没有像方法这样的“命名参数”，afaik。

那么在这种情况下你更喜欢什么？

当然，我不想在使用有用的方法或函数之前分配对象。那会很麻烦。

也许厕所鬼是对的。有一种更酷的方法。好吧，就我个人而言，这很棒：

```
MYNAMESPACECoolMath.h

#import <Foundation/Foundation.h>

@interface MYNAMESPACECoolMath : NSObject {
}

+ (float)randomizeValue:(float)value byPercent:(float)percent;

+ (float)calculateHorizontalGravity:(CGPoint)p1 andPoint:(CGPoint)p2;

// and some more
@end 
```

然后在代码中，我只需导入 MYNAMESPACECoolMath.h 并调用：

CGFloat myValue = [MYNAMESPACECoolMath randomizeValue:10.0f byPercent:5.0f];

没有讨厌的实例化、初始化、分配等等。对我来说，该模式看起来像是 java 中的静态方法，非常好用且易于使用。

据我所知，优于函数的优势在于代码具有更好的可读性。在查看 CGRectMake(10.0f, 42.5f, 44.2f, 99.11f) 时，如果您不太熟悉，可能需要查看这些参数代表什么。但是，当您使用“命名”参数进行方法调用时，您会立即看到参数是什么。

当涉及到随处可用的简单有用的方法/函数时，我想我错过了对单例类产生重大影响的要点。制作特殊类型的随机值不属于任何东西，它是全局的。像草一样。像树一样。像空气。每个人都需要它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T16:40:53.043

在性能方面，*静态类中的**静态*方法编译为与函数几乎相同的东西。

 *您会招致的任何实际性能影响都将出现在对象实例化中，您说过您希望避免这种情况，因此这不应该成为问题。

就偏好或可读性而言，有一种趋势是过度使用静态方法，因为人们认为 Obj-C 是一种“仅限面向对象”的语言，如 Java 或 C#。在那个范式中，（几乎）所有东西都必须属于一个类，所以类方法是规范。事实上，他们甚至可以称它们为函数。这两个术语在那里可以互换。然而，这纯粹是约定俗成的。约定这个词甚至可能过于强烈。在它们的位置使用函数绝对没有错，如果不需要帮助处理这些方法/函数的类成员（甚至是静态成员），它可能更合适。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-20T16:54:11.410

您的方法的问题在于它的“实用”性质。几乎任何带有“util”这个词的东西都表明你已经为你不知道在哪里适合你的对象模型的东西创建了一个垃圾场。这可能意味着您的对象模型与您的问题空间不一致。

与其研究如何打包实用函数，不如考虑这些函数应该作用于哪些模型对象，然后将它们放在这些类上（如果需要，创建类）。

在 Josh 看来，虽然 ObjC 中的函数没有任何问题，但它是一种*非常*强大的面向对象语言，直接基于面向对象语言的鼻祖 Smalltalk。您不应该轻易放弃 OOP 模式；他们是可可的心脏。

我一直创建私有辅助函数，并为某些对象创建公共便利函数（NSLocalizedString() 就是一个很好的例子）。但是，如果您正在创建不是方法前端的公共实用程序函数，您应该重新考虑您的模式。第一个警告信号是希望将“util”一词放在文件名中。

**编辑**

根据您添加到问题中的特定方法，您应该查看的是类别。例如，`+randomizeValue:byPercent:`是一个非常好的 NSNumber 类别：

```
// NSNumber+SLExtensions.h
- (double)randomizeByPercent:(CGFloat)percent;
+ (double)randomDoubleNear:(CGFloat)percent byPercent:(double)number;
+ (NSNumber *)randomNumberNear:(CGFloat)percent byPercent:(double)number;

// Some other file that wants to use this
#import "NSNumber+SLExtensions.h"
randomDouble = [aNumber randomizeByPercent:5.0];
randomDouble = [NSNumber randomDoubleNear:5.0 byPercent:7.0]; 
```

如果你得到很多这些，那么你可能希望将它们分成 NSNumber+Random 之类的类别。但是，使用类别使其成为现有对象模型的一部分，而不是创建其唯一目的是处理其他对象的类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T16:42:16.317

如果您想避免实例化一堆实用程序对象，则可以使用[单例实例。](https://stackoverflow.com/questions/145154/what-does-your-objective-c-singleton-look-like)

不过，使用纯 C 函数并没有错。只要知道您将无法使用@selector 将它们传递给诸如performSelectorOnMainThread 之类的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T17:42:20.377

当谈到方法与函数的性能时，Mike Ash 在他的帖子[“常用操作的性能比较”](http://www.mikeash.com/?page=pyblog/performance-comparisons-of-common-operations.html)中有一些很好的数字。Objective-C 消息发送操作非常快，以至于您必须有一个非常紧凑的计算循环才能看到差异。我认为在你的方法中使用函数与方法将归结为其他人描述的风格设计问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-21T07:26:55.997

优化系统，而不是函数调用。

实施最容易理解的内容，然后当整个系统正常工作时，对其进行分析并加快速度较慢的内容。我非常怀疑静态类的 Objective-C 运行时开销是否会对您的整个应用程序产生一点影响。

# c# - 哪个必填字段验证器失败？

> ID：888979
> 
> 赞同：0
> 
> 时间：2009-05-20T16:32:42.577
> 
> 标签：c#, asp.net, validation

因此，我在 asp.net/c# 中完成了几个需要验证的表单。如果其中一个验证器失败，我想更改文本框的类和客户端/回发的标签。我通常这样做的方式是手动验证表单客户端和服务器端。有没有办法使用验证器而不是一堆 if 语句来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T16:42:35.770

您可以在客户端使用标准的 asp.net 验证器，它可能会在字段旁边或验证摘要中为您提供一些文本。您可能可以使用一些 3rd 方插件，这些插件将在自定义 CSS 样式等方面更进一步。

看看这些 .NET 验证器的替代方案：

*   [http://www.delphicsage.com/home/blog.aspx?d=545](http://www.delphicsage.com/home/blog.aspx?d=545)
*   [http://validator.codeplex.com/](http://validator.codeplex.com/)
*   [http://www.ajaxprojects.com/ajax/tutorialdetails.php?itemid=362](http://www.ajaxprojects.com/ajax/tutorialdetails.php?itemid=362)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T16:41:24.447

[Required Field Validator Extender](http://www.brentlamborn.com/post/AJAX-Control-Toolkit-RequiredFieldValidator-Extender.aspx)控件就是您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T16:39:16.243

一般来说，这正是验证器的用途。但是客户端验证可能不一定只是改变字段的类（可能会改变它的颜色）。这种表示验证问题的方式有多重要？

# xslt - FOP: fo:block width 属性被忽略？

> ID：888997
> 
> 赞同：10
> 
> 时间：2009-05-20T16:36:16.627
> 
> 标签：xslt, xsl-fo, apache-fop

我正在设法从 google-chart 生成带有一个折线图的 PDF，但是生成的列标题的质量不符合我们的需要，所以我想自己生成。

应该使用此任务来完成，`[fo:table]`但我无法成功定位标题（宽度和边距/填充）。

总而言之，我想使用`[fo:block]`设置宽度属性加上负边距（即`width="1.5cm" margin-top="-2em"`）来放置标题，但宽度不生效。

你知道怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-21T16:49:39.713

“宽度”属性不适用于 fo:block（请参阅[http://www.w3.org/TR/xsl11/#fo_block](http://www.w3.org/TR/xsl11/#fo_block)）。如果要重新定义宽度，则需要使用 fo:block-container ( [http://www.w3.org/TR/xsl11/#fo_block-container](http://www.w3.org/TR/xsl11/#fo_block-container) ) 或其他生成所谓参考区域的元素。很难理解您的预期布局到底是什么。也许您还可以尝试使用“start-indent”和“end-indent”属性来间接影响 fo:block 的实际宽度。高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T16:54:56.677

最后我没能做到这一点，因为 [fo:inline] 试图收集所有可用空间。

一个技巧是将边距（左侧或右侧）设置为 90% 或更多以*填补*该空白，但我不知道之前的 [fo:inline] 文本是在一、两行或更多行中呈现的。

我发现生成列标题的唯一方法是使用 [fo:table] 并为每个单元格添加边距（左右）。

PS：我使用 FOP-0.95

* * *

## 回答 #3

> 赞同：-10
> 
> 时间：2011-12-20T12:47:31.893

对于 FOP，您可以使用表格来设置宽度，而不是直接在块上应用它。**************************