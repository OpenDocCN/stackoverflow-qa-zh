# StackOverflow 问答 10184000-10184999

# solr - 使用 Apache Tika 和 Solr 时的关键点/挑战

> ID：10184007
> 
> 赞同：1
> 
> 时间：2012-04-17T01:44:52.433
> 
> 标签：solr, apache-tika

最近我参与了一项任务，其中一部分需要使用 Apache Solr（用于文档搜索）和 Apache Tika（从文档中提取元文本或纯文本）

我还没有集成 Solr 和 tika，但是我已经分别与他们两个一起工作过，我可能有一组与 Apache Solr 和 Apache Tika 相关的问题，可能是初学者水平或平均水平。

以下是我对 Solr 所做的实践类型，例如创建了一个虚拟数据库，编写了一个程序，配置了 schema.xml 的东西，运行了 Solr 服务器，以及从数据库中获取文档并存储在 Solr 文档索引中的程序，制作了一个简单的客户端来获取数据从 Solr 通过 JSON 接口，制作了一个程序，使 MySQL 数据库与 Apache 的 Solr 文档索引保持同步。

以下是我使用 tika 进行的实践类型，例如编译和安装的 Tika，了解它的文档解析能力。.. 我的示例任务语句：我的项目的一部分需要存储大约 100,000 个文档（这 100,000 个（Doc、PDF、Txt）文档的数据由 Apache tika 获取并推送到 MySql 的数据库，然后再推送到 apache Solr 的文档数据库）进行*全文搜索*并通过客户端界面（浏览器）搜索它们

*   在简单的编程级别，这项任务将完成，

我想了解与管理索引或 Solr 中的其他内容相关的挑战，例如

** 在高级阶段是否需要优化 Solr 的开源代码？

** 虽然 Solr 以正确的方式工作，但它是否提供了任何具体的挑战？

** 最初需要考虑哪些关键事项，Solr 应该以正确的方式工作。

** 你认为有什么额外的工具可以用来监控 Solr 的工作吗？

希望您对我的问题有所了解？

** 另外我想知道您是否有任何使用 apache Tika 和 apache Solr 的经验，以及需要考虑的任何挑战或关键事项？

您想推荐具体的来源吗？或者如果您有任何文件或任何您认为有帮助的东西。

# c# - Visual C# combox1.Items.Add("test"); 错误？

> ID：10184013
> 
> 赞同：0
> 
> 时间：2012-04-17T01:45:34.953
> 
> 标签：c#, .net, winforms, visual-studio-2010, .net-3.5

当我尝试将项目添加到组合框中时，我得到：

“未处理 NullReferenceException” “未将对象引用设置为对象的实例。”

无论我如何将代码添加到组合框，都会发生这种情况。

```
comboBox1.Items.Add("test"); 
```

或者

```
try
{
    Parties.Open();
    String test = "SELECT PartyName FROM Parties WHERE PartyID = 4";
    selectParty = new OleDbCommand(test, Parties);
    OleDbDataReader testing = selectParty.ExecuteReader();
    while (testing.Read())
    {
        MessageBox.Show(testing.GetValue(0).ToString());
        comboBox1.SelectedIndex =  comboBox1.Items.Add(testing.GetValue(0).ToString());
    }
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
    return;
} 
```

（上面凌乱的代码......沮丧！）

我对 .NET 和 C# 还很陌生，我不明白这里发生了什么，我所到之处的一切都告诉我上面的代码应该可以工作，但事实并非如此。MSDN 简单列出：

```
comboBox1.Items.Add("Text"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T01:59:48.177

您要在哪里向 ComboBox 添加项目？

如果在 InitializeComponent(); 之前调用上述代码，将会抛出异常。在表单构造函数中。或者，如果您在代码中的其他地方分配组合框。

确保所有代码都在 InitializeComponent() 之后完成，这是在设计器中调用代码的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T02:04:27.087

当使用设计器修改 UI 时，visual studio 会添加一个 InitializeComponents() 方法。

您应该在表单构造函数主体中调用 InitializeComponents() 方法。如果代码与控件交互，则需要将代码放在 InitializeComponent 调用之后。任何不与控件交互的代码都可以在 InitializeComponents() 之上或之下。

此外，如果您在设计器 Visual Studio 中双击一个控件，将创建一个 Form_Load 事件处理程序，该处理程序在表单构造函数之后运行。

# python - 使用 scapy 完成 HTTP GET

> ID：10184016
> 
> 赞同：1
> 
> 时间：2012-04-17T01:45:51.007
> 
> 标签：python, http, html-parsing, packet, scapy

我正在尝试使用 scapy 来运行完整的 HTTP 会话。也就是说，我想手动执行三种方式的握手、GET 请求、接收 HTML 文件所需的确认以及终止连接。使用 [1] 我已经完成了三路握手和 GET 请求，但我似乎无法捕获从服务器发送的原始 HTML 数据包，而且我显然无法再发送回一个 ack 数据包。有任何想法吗？

此外，我最终希望能够解析 HTML 的原始数据包。如果有人知道如何从一个 scapy 数据包中做到这一点，我将不胜感激。

[1] [http://www.thice.nl/creating-ack-get-packets-with-scapy/](http://www.thice.nl/creating-ack-get-packets-with-scapy/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:45:28.603

金比，

我在工作，现在只能解析而不是在 scapy 中启动连接。所以我会解决你的第二个请求。我们正在查看我在此处提供的内容。包含 html 和 http 请求的层是 (Raw).load 如果数据包包含 html 或 http 请求，我将首先测试该层是否存在（haslayer），然后如果数据包是“http 数据包” “这里只是在 IF 语句中检查 80，但是您可能只使用嗅探网络过滤器中的端口。我在此片段中包含了直接从电线上嗅探或在此处拉入 pcap 的选项。（调整端口等如果您使用的是非标准）

```
#!/usr/bin/python -tt

from scapy import *
import sys

def parse(pkt):
    if pkt.haslayer(TCP) and pkt.getlayer(TCP).dport == 80 and pkt.haslayer(Raw):
        print pkt.getlayer(Raw).load

if '-l' in sys.argv:
    sniff(prn=parse)

else:
    pkts = rdpcap(sys.argv[1])
    for pkt in pkts:
       parse(pkt) 
```

当然，以此为起点，您可以调整第 8 行，不仅可以选择 dport，还可以选择例如运动。让我知道这是否有帮助，祝你好运！

**PS更改以下**

```
from scapy import * 
```

至

```
from scapy.all import * 
```

取决于你的版本..

# cocoa - 我怎样才能让我的块更新？

> ID：10184022
> 
> 赞同：0
> 
> 时间：2012-04-17T01:46:30.823
> 
> 标签：cocoa, block

我将块存储在`NSDictionary`. 这是这些块之一：

```
void(^RunningApplications)(void) = ^{
        NSArray *runningApps = [[NSWorkspace sharedWorkspace] runningApplications];
        NSMutableArray *appNames = [[NSMutableArray alloc] initWithCapacity:[runningApps count]];
        for (NSRunningApplication *app in runningApps)
            [appNames addObject:[app localizedName]];
        NSLog(@"%@", [[NSWorkspace sharedWorkspace] runningApplications]);
    }; 
```

第一次访问此块时，我会看到当前正在运行的应用程序`NSLog`。但是，如果我打开另一个应用程序，然后再次调用该块，我只会看到显示的原始列表，而不是新打开的应用程序的新列表。如何通过此块接收更新的列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T02:12:51.953

您的问题与块（或字典）无关，与您 (ab) 使用的方式有关`-runningApplications`。从[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html)：

> 类似于 NSRunningApplication 类的属性，这个属性只有在主运行循环以普通模式运行时才会改变。使用键值观察来通知此数组属性的更改，而不是轮询。

为此，以下演示了正确的行为：

```
#import "AppDelegate.h"

const static NSString *runningApplicationsContext = @"running applications observation";

@implementation AppDelegate

@synthesize window = _window;

- (void)dealloc
{
    [[NSWorkspace sharedWorkspace] removeObserver:self
                                       forKeyPath:@"runningApplications"
                                          context:&runningApplicationsContext];
    [super dealloc];
}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    [[NSWorkspace sharedWorkspace] addObserver:self
                                    forKeyPath:@"runningApplications"
                                       options:NSKeyValueObservingOptionNew
                                       context:&runningApplicationsContext];
}

- (void)observeValueForKeyPath:(NSString *)keyPath 
                      ofObject:(id)object 
                        change:(NSDictionary *)change 
                       context:(void *)context
{
    if (context == &runningApplicationsContext) {
        NSArray *runningApps = [(NSWorkspace *)object runningApplications];
        NSMutableArray *appNames = [[NSMutableArray alloc] initWithCapacity:[runningApps count]];
        for (NSRunningApplication *app in runningApps) {
            [appNames addObject:[app localizedName]];
        }
        NSLog(@"%@", [[NSWorkspace sharedWorkspace] runningApplications]);
        [appNames release];
    }
} 
```

这还有另一个好处：您可以检查`change`字典以确定哪些应用程序触发了通知，以防您感兴趣。这使您免于缓存/跟踪以前的`runningApplications`结果。

编辑：跟进您的评论，这里有一些代码可以很好地与您的块（剥离了我认为在您的较大应用程序中执行某些操作的死代码）存储在字典中并从观察者方法调用：

```
#import "AppDelegate.h"

const static NSString *runningApplicationsContext = @"running applications observation";

@interface AppDelegate () {
    NSDictionary *_blocks;
}

@end

@implementation AppDelegate

@synthesize window = _window;

- (void)dealloc
{
    [[NSWorkspace sharedWorkspace] removeObserver:self
                                       forKeyPath:@"runningApplications"
                                          context:&runningApplicationsContext];
    [_blocks release];
    [super dealloc];
}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    _blocks = [[NSDictionary alloc] initWithObjectsAndKeys:(id)
               ^{
                   NSLog(@"%@", [[NSWorkspace sharedWorkspace] runningApplications]);
               }, @"RunningApplications",
               nil];

    [[NSWorkspace sharedWorkspace] addObserver:self
                                    forKeyPath:@"runningApplications"
                                       options:NSKeyValueObservingOptionNew
                                       context:&runningApplicationsContext];
}

- (void)observeValueForKeyPath:(NSString *)keyPath 
                      ofObject:(id)object 
                        change:(NSDictionary *)change 
                       context:(void *)context
{
    if (context == &runningApplicationsContext) {
        dispatch_block_t getRunningApplications = [_blocks objectForKey:@"RunningApplications"];
        getRunningApplications();
    }
}

@end 
```

# database-design - 众包游戏社区的社区标准？

> ID：10184023
> 
> 赞同：2
> 
> 时间：2012-04-17T01:46:34.303
> 
> 标签：database-design, artificial-intelligence, crowdsourcing

我托管了一些 Source 游戏服务器并运行一个插件，将玩家聊天转储到 MySQL 数据库。我有一段安静的聊天记录，并且正在寻找一些有趣的事情。我想建立一个系统，让我的社区成员确定什么是“可接受的”，什么不是“可接受的”。

我的想法是它会像这样工作：不知何故，我允许我的社区成员查看聊天日志（不识别谁说了什么），他们将日志标记为“可接受”或“不可接受”。我必须弄清楚它是否只会显示某个时间范围内的一段文本，或者只是某个时间范围内的特定用户，或者只是个别行（可能很好......也可能意味着用户完全错过了聊天的上下文）。

这有点像验证码系统，多个用户最终会对同一系列的聊天日志进行评分。从那里，我会得到单词组的值。理论是，它会创建一个阈值，在该阈值中某些事物可以接受，而另一些则不能。在对一定数量的现有日志进行评分后，我将有一种有意义的方式来确定一条消息是否符合我的社区定义的标准。

我的问题是这些——

1.  你会建议我向我的用户展示正在评分日志的内容吗？我应该向他们展示一组 X 聊天台词吗？我应该每隔 5 分钟显示所有聊天行吗？我是否应该通过在 X 行的时间范围内仅显示 1 个用户的消息来缩小这两个窗口？还是用户应该单独为每行评分？我计划限制特定社区成员每天可以评分的行数/组数。
2.  设计存储所有这些数据的数据库的合适方法是什么？目前，每个单独的聊天行都作为它自己的行存储在 MySQL 中。每个人都有一个唯一的 ID 以及游戏中发送的聊天消息的全文。我也有收到它的玩家名称和服务器，但我认为这些不是必要的。
3.  我想以这样的方式创建它，使其变得自给自足/适应社区以及他们认为可以接受的东西。随着时间的推移，更多的行将被分级并添加到阈值/计算中，以确定消息是“好”/“坏”。如果有人建造了这样的东西，你能指出我在建造它时应该避免的陷阱吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:30:14.290

如果可能，我宁愿考虑用户能够实时将消息标记为不适当。普通用户可以做到，而不必找人离线查看。如果您不能或不想采用这种方法：消息可能会在任何其他消息的上下文之外被识别为不合适的，但是查看连续的消息流，按照它们实时出现的顺序可能是有帮助。我可能会去给他们 X 连续的消息。使用实时标记，我会在之前和之后建议一些消息，标记的消息是红色的，或者类似的东西。

当用户查看一定数量的消息时，您可以尝试建立某种奖励系统。如果您允许实时标记消息，则可以奖励查看标记消息以确认标记状态的人。

知道它是哪个播放器可能很有用。如果玩家发布了一些不适当的消息，您可以发出警告或禁令或其他东西。服务器可能不是那么有用，但我完全是为了存储一些额外的信息，您以后可能会发现它们的用途。

我不会真的沉迷于数据库存储。根据您要执行的操作类型，拥有一个包含时间（或只是自动递增 ID，或两者兼有）、播放器、服务器、消息、isInappropriate 列的表应该没问题。

您可以采取的一种方法（一旦您将一些消息标记为不合适）将非常类似于垃圾邮件过滤器（您应该能够找到足够多的材料）。

一般考虑是在标记为不适当时您是要宽松还是严格（您是否希望遗漏一些不适当的消息或标记一些很好的消息）。查看 Precision / Recall 以对此有所了解。

我怀疑在聊天环境中，在大多数情况下，只需查找（并可能尝试自动识别）出现在不适当消息中的特定单词就足够了。

# python - 如何使用期货来解析 RSS？

> ID：10184025
> 
> 赞同：1
> 
> 时间：2012-04-17T01:46:39.203
> 
> 标签：python, rss

我是 python 新手......你被警告了。

[我从http://wiki.python.org/moin/RssLibraries](http://wiki.python.org/moin/RssLibraries)复制了一个示例，但我不断收到错误消息

```
"future_calls = [Future(feedparser.parse,rss_url) for rss_url in hit_list]
TypeError: __init__() takes exactly 1 argument (3 given)" 
```

这是我的代码：

```
import feedparser
from futures import Future

hit_list = [ "http://feeds.reuters.com/news/artsculture", "http://feeds.reuters.com/reuters/healthNews" ] # list of feeds to pull down

# pull down all feeds
future_calls = [Future(feedparser.parse,rss_url) for rss_url in hit_list]
# block until they are all in
feeds = [future_obj() for future_obj in future_calls]

entries = []
for feed in feeds:
    entries.extend( feed[ "item" ] )
    sorted_entries = sorted(entries, key=lambda entry: entry["title"])
    print sorted_entries 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T02:05:38.047

你确定你使用的是正确的模块吗？你有：

```
from futures import Future 
```

但如果您打算使用链接到的[RssLibraries](http://wiki.python.org/moin/RssLibraries)页面中的模块，那么它应该是

```
from future import Future 
```

（并且您需要`future`从该页面上的链接下载该模块）。

看起来您实际上正在使用[futures 模块](http://pypi.python.org/pypi/futures)，它是 Python 3[`concurrent.futures`](http://docs.python.org/dev/library/concurrent.futures.html)模块的后向端口，用于早期版本的 Python。

# google-app-engine - 在 Google App Engine 中从祖先路径生成密钥

> ID：10184026
> 
> 赞同：0
> 
> 时间：2012-04-17T01:46:45.157
> 
> 标签：google-app-engine, google-cloud-datastore

我有一个名为 Request 的模型。使用父用户创建请求，如下所示：

```
request = Request(parentUserKey) 
```

现在，用户的 key_name 是该用户的电子邮件，所以当我创建一个新用户时，我会：

```
user = User(key_name = 'abc@gmail.com') 
```

所以我现在要做的是使用 Key.from_path 为请求创建一个密钥，所以我尝试：

```
requestKey = Key.from_path('User', 'abc@gmail.com', 'Request', 1) 
```

我放 1 是因为我将使用此密钥通过以下方式获取 ID 高于 1（或任何其他任意 int）的所有请求：

`requestQuery.filter("__key__ >", requestKey)`

然后出于测试目的，我尝试通过 将密钥转换为字符串`keyString = str(requestKey)`，但出现以下错误：

`Cannot string encode an incomplete key`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:18:05.303

要详细说明 Guido 所写的内容，手动创建密钥可能不是解决问题的最佳方法。相反，如果您将所有用户的请求实体存储在用户的实体组中，您可以使用祖先查询简单直接地检索它们。

首先，为了使所有 Request 实体成为 User 的子实体，我们将稍微改变您实例化 Request 对象的方式：

```
request = Request(parent=parentUser) # Where parentuser is a User already in the datastore
# Do whatever else you need to do to initialize this entity
request.put() 
```

现在，要获取属于 User 的所有 Request 对象，您只需：

```
requests = Request.all().ancestor(parentUser).fetch(1000)
# Obviously, you want to intelligently manage the condition of having
# more that 1000 Requests using cursors if need be. 
```

使用所有路径信息手动创建密钥的能力很棒，但它通常也需要做更多的工作。

这是否解决了您的用例？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T04:46:17.297

id 为 0 的密钥无效。代替该过滤器，使用祖先查询。

# javascript - 初始化后添加backbone.js事件

> ID：10184027
> 
> 赞同：9
> 
> 时间：2012-04-17T01:46:48.360
> 
> 标签：javascript, backbone.js

这段代码没有太多上下文，但会说明我的问题。这是一个在 AMD 模块中定义的主干视图，我使用它通过 require.js 加载

本质上，我希望能够在初始化运行后将事件添加到 Backbone 视图。目前我正在制作一个空的事件对象，然后在一个名为 addView 的方法中，每次调用该函数时都会添加一个事件。这目前不起作用。

我不确定事件是在什么时候注册的，但我怀疑我必须以某种方式让视图在`events`对象更改时更新它的侦听器？

有人知道我如何在初始化后向 Backbone.js 添加事件吗？

```
 define([
    'jQuery',
    'Backbone'],

    function ($, Backbone) {

        var contentViews = new Array();

        var SlidePanelView = Backbone.View.extend({

            events: {},

            /// <param name="targetDataAtt">The unique value inside the target's Data-Slide-Panel-Id attribute</param>  
            /// <param name="event">Backbone event to trigger view</param>
            /// <param name="destroyOnRemove">True to destroy view when removed, False otherwise (Default true)</param>  
            addView: function (targetDataAtt, event, view, destroyOnRemove) {
                destroyOnRemove = typeof destroyOnRemove !== 'undefined' ? destroyOnRemove : true;

                this.events[event] = "viewEventFired";
                contentViews[targetDataAtt] = { View: view, DestroyOnRemove: destroyOnRemove };
            },

            viewEventFired: function (e) {

                var target = $(e.target);
                var id = target.attr('data-slide-panel-id');
                console.log(id);
            }

        });

        // Return a singleton??
        return new SlidePanelView;

    }); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T02:01:50.670

If I'm understanding the question correctly, after you add additional events to the events hash, call [delegateEvents()](http://backbonejs.org/#View-delegateEvents) on the view to re-bind events.

```
 addView: function (targetDataAtt, event, view, destroyOnRemove) {
       destroyOnRemove = typeof destroyOnRemove !== 'undefined' ? destroyOnRemove : true;
       this.events[event] = "viewEventFired";
       this.delegateEvents();
       contentViews[targetDataAtt] = { View: view, DestroyOnRemove: destroyOnRemove };
    } 
```

It does unbind all the existing event bindings and rebinds all the events in the events hash again, and I'm not sure of the underlying performance issues of doing that, but its something to be aware of.

# .net - 什么是堆中的类型对象

> ID：10184030
> 
> 赞同：8
> 
> 时间：2012-04-17T01:47:06.020
> 
> 标签：.net, heap-memory, clr

我知道当在堆中创建对象时，它们还有另外两个字段：

1.  同步块索引
2.  类型对象指针

所以我想知道什么时候在堆内存中创建类型对象，它保存什么样的数据？它只代表Type的元数据？

我一直无法找到有关此的详细信息。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T02:04:13.910

Type 对象还包含支持该类型上的任何静态字段的字节以及一个方法表，该表中定义的每个方法都有一个条目。

如果方法已至少执行一次，则方法表中的每个条目都指向 JIT 编译的本机代码。

类型对象是在第一次实例化类型或第一次引用静态类型成员时创建的。

如果您想深入了解 CLR 的功能，我强烈建议您购买 Jeffrey Richter 的书，[CLR via C# 。](https://rads.stackoverflow.com/amzn/click/com/0735627045)第 4 章中标题为“运行时事物如何关联”的部分详细介绍了堆上的 .NET 类型分配过程。

2005年[5 月版的 MSDN 杂志](http://download.microsoft.com/download/3/a/7/3a7fa450-1f33-41f7-9e6d-3aa95b5a6aea/MSDNMagazineMay2005en-us.chm)有一篇题为“ [JIT 和运行：深入了解 .NET Framework 内部结构以了解 CLR 如何创建运行时对象](http://web.archive.org/web/20110406235301/http://msdn.microsoft.com/en-us/magazine/cc163791.aspx)”的文章，其中包含一些很好的信息，特别是关于[类型基础](http://web.archive.org/web/20110406235301/http://msdn.microsoft.com/en-us/magazine/cc163791.aspx#S6)和[MethodTable](http://web.archive.org/web/20110406235301/http://msdn.microsoft.com/en-us/magazine/cc163791.aspx#S8)的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-13T06:02:18.120

所有转换异常、类型匹配和不匹配都由 CLR`Type Object`在 .Net 的帮助下完成和处理。创建类型的最简单和最快的方法`Type Object`是通过`typeof`运算符，如下所示：

```
 var fileTypeObjectInHeap = typeof(File); 
```

如果您曾经在 C# 中做过类似的事情 - 将对象的类型`o`与某个已知类型进行比较（此处`FileInfo`）：

```
var fileName = @"C:\sample.txt";
object o = new FileInfo(fileName);
if (o.GetType() == typeof(FileInfo)) { ... } 
```

那么你在`Type Object`不知不觉中使用了那种类型。

对应于您的应用程序使用的每种类型（准确地说是 AppDomain）`Type Object`，堆中的单个实例被引用用于所有此类目的。有关更多详细信息和内部信息 - 通过 C# 第四版从 CLR 引用 Jeffrey Richter：

> Type 对象表示作为轻量级对象的类型引用。如果您想了解更多关于类型本身的信息，那么您必须获取一个 TypeInfo 对象，该对象表示一个类型定义。您可以通过调用 System.Reflection.IntrospectionExtensions 的 GetTypeInfo 扩展方法将 Type 对象转换为 TypeInfo 对象。

```
Type typeReference = ...; // For example: o.GetType() or typeof(Object) 
TypeInfo typeDefinition = typeReference.GetTypeInfo(); 
```

# javascript - 向下滚动后导航淡入？

> ID：10184037
> 
> 赞同：3
> 
> 时间：2012-04-17T01:48:07.657
> 
> 标签：javascript, jquery, navigation, mootools, fadein

我想得到一个和这个网站完全一样的导航：http: [//www.interviewmagazine.com/](http://www.interviewmagazine.com/)

向下滚动约 700 像素左右后会出现一个导航栏。它是一个具有淡入效果的固定导航，当您滚动回顶部时具有淡出效果。

我试图看看他们是如何编写代码的，但无法弄清楚。

听起来像 mootools 吗？

如果有人可以提供帮助，那就太棒了。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T01:58:35.847

您可以使用 jQuery 和 CSS 创建这样的菜单，在以下情况下根据需要交换类：

```
var posit = window.scrollTop();
if (posit == [your designated fadein location]) {
    //do something;
}

CSS: position : fixed, opacity : 0, height : 0; overflow : hidden 
```

交换类以将高度更改为固定数量

```
animate({opacity : 1.0}, 'fast', function() {
    //callback;
}); 
```

您必须为用户滚动设置一个侦听器，但这应该可以帮助您入门。您所需要的只是 jQuery 和一个浏览器，一种将项目分割成可管理部分的合乎逻辑的方法和时间。

编辑：这是你的小提琴。

[http://jsfiddle.net/lazerblade01/fNn7K/26/](http://jsfiddle.net/lazerblade01/fNn7K/26/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-11T17:50:17.747

对于通过 stackoverflow 搜索的任何人，这是我的尝试：

```
$(function(){
    // Check the initial Poistion of  Sticky Header
    var stickyHeaderTop = $('#stickyheader').offset().top;

    $(window).scroll(function(){
            if( $(window).scrollTop() > stickyHeaderTop ) {
                    $('#stickyheader').css({position: 'fixed', top: '0px'});
                    $('#stickyheader').css('opacity', '1');
            } else {
                    $('#stickyheader').css({position: 'static', top: '600px'});
                    $('#stickyheader').css('opacity', '0');
            }
    }); 
 }); 
```

这是一个**小提琴演示** [http://jsfiddle.net/uFq2k/297/](http://jsfiddle.net/uFq2k/297/)

这是这段代码的一个小修改版本：[如何在向下滚动一点后粘贴 div](https://stackoverflow.com/questions/14496240/how-can-i-stick-the-div-after-scrolling-down-a-little)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T08:26:22.743

David Walsh 有一个他称之为 ScrollSpy 的东西——很像 twitter 的滚动间谍——只是它做了不同的事情。

推特可以对进入视野的特定兴趣元素做出反应。

walsh 的插件可以在用户滚动到特定阈值并返回时做出反应并为您提供事件。

[http://davidwalsh.name/mootools-scrollspy](http://davidwalsh.name/mootools-scrollspy)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T01:52:14.160

你可以试试[Twitter 的 Bootstrap](http://twitter.github.com/bootstrap/components.html)。查看他们的第二个工具栏。

# silverlight - “对 Web 服务的调用将失败……”再一次

> ID：10184039
> 
> 赞同：0
> 
> 时间：2012-04-17T01:48:27.083
> 
> 标签：silverlight, visual-studio-2010

去年有人报告遇到过这个问题（“您要调试的 Silverlight 项目使用 Web 服务。除非 Silverlight 项目托管在包含 Web 服务的同一个 Web 项目中并从该项目启动并启动，否则对 Web 服务的调用将失败。”）并接受了“将托管 Silverlight 应用程序的 Web 项目设置为您的启动项目”的答案。

我看到了相同的消息，但认为解决方案可能必须有所不同。我正在 VS 2010 中构建一个 Silverlight 应用程序来访问 Google Weather API，其中 VB 作为代码隐藏。API 将返回一个 XML 文件，其中包含指定城市的数据（例如，“http://www.google.com/ig/api?weather=london,england”）。解决方案资源管理器仅显示我的 VB/Silverlight 项目（“GetWeather”），“项目属性”对话框将启动对象显示为“GetWeather.App”——这是唯一的选择。我正在尝试使用 WebClient 对象进行调用并使用 XDocument 对象来解析返回。但我反复收到上述错误信息，没有其他结果。我究竟做错了什么？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:40:22.410

我将添加一个简单的 Web 项目并将其配置为托管 Silverlight 应用程序。无论如何，您都需要在某个地方托管应用程序，那么为什么不在您的解决方案中创建一个存根 ASP.NET 应用程序呢？最简单的方法是创建一个新的 Silverlight 应用解决方案，选择一个 ASP.NET Web 项目作为宿主，然后将现有代码复制到该解决方案。然后，您应该将 Web 项目设置为启动项目。这应该使调试**更**容易。

此外，请记住配置客户端访问策略以启用跨域调用。看看[这篇文章](http://msdn.microsoft.com/en-us/library/cc838250%28v=VS.95%29.aspx#crossdomain_communication)

# json - Flash ActionScript 2 JSON 返回 [object Object]

> ID：10184044
> 
> 赞同：0
> 
> 时间：2012-04-17T01:49:12.970
> 
> 标签：json, actionscript

我试图在 ActionScript 2 中获取 JSON 对象的值，但它一直返回未定义或 [object Object]。

这是我的代码：

```
 for (var i:Number = 0; i < oProduct.prosAndCons.pros.length; i++) {
        if (i == oProduct.prosAndCons.pros.length) {
            break;
        };
        //
        mcProsCons.txtPros.htmlText += oProduct.prosAndCons.pros[i]+ "<br /><br />";
    }; 
```

这是返回的 JSON：

```
{
    "prosAndCons": {
        "pros": [
            {
                "cute animals": {
                    "link": "http://searchreviews.com/best/q-1661072-cute-animals",
                    "excerptCount": 1,
                    "excerpt": "Cute songs and cute animals."
                }
            },
            {
                "cute toy": {
                    "link": "http://searchreviews.com/best/q-3584162-cute-toy",
                    "excerptCount": 6,
                    "excerpt": "All in all it's a very cute toy that holds up to a lot of use."
                }
            },
            {
                "cute songs": {
                    "link": "http://searchreviews.com/best/q-1769522-cute-songs",
                    "excerptCount" :2,
                    "excerpt": "Cute songs and cute animals."
                }
            },
            {
                "chunky magnetic letters": {
                    "link": "http://searchreviews.com/best/q-662-chunky-magnetic-letters",
                    "excerptCount": 1,
                    "excerpt": "The chunky magnetic letters are perfect for little hands and the magnets that hold them to the fridge are enclosed so there is no worry of a swallow hazard."
                }
            },
            {
                "catchy song": {
                    "link": "http://searchreviews.com/best/q-672-catchy-song",
                    "excerptCount": 4,
                    "excerpt": "\" You made a match, look what you have done ,\" It's a very catchy song!"
                }
            }
        ]
    }
} 
```

谁能告诉我我做错了什么？自从我用带有 JSON 的 AS2 编码以来已经有一段时间了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T02:57:45.130

一些注意事项：

*   `prosAndCons.pros[0]`是一个对象。

*   数组中共有 5 个对象`prosAndCons.pros`，每个对象包含一个内部对象，如下所示：

    1.  “可爱的动物”
    2.  “可爱的玩具”
    3.  “可爱的歌曲”
    4.  “厚实的磁性字母”
    5.  《好听的歌》

*   它们中的每一个都具有三个属性：
    1.  “关联”
    2.  “摘录数”
    3.  “摘抄”

* * *

尝试将其用作您的 JSON（如果您能够编辑它）：

```
{"prosAndCons":{"pros":[{"name":"cute animals","link":"http://searchreviews.com/best/q-1661072-cute-animals","excerptCount":1,"excerpt":"Cute songs and cute animals."},{"name":"cute toy","link":"http://searchreviews.com/best/q-3584162-cute-toy","excerptCount":6,"excerpt":"All in all it's a very cute toy that holds up to a lot of use."},{"name":"cute songs","link":"http://searchreviews.com/best/q-1769522-cute-songs","excerptCount":2,"excerpt":"Cute songs and cute animals."},{"name":"cute magnetic letters","link":"http://searchreviews.com/best/q-662-chunky-magnetic-letters","excerptCount":1,"excerpt":"The chunky magnetic letters are perfect for little hands and the magnets that hold them to the fridge are enclosed so there is no worry of a swallow hazard."},{"name":"cute song","link":"http://searchreviews.com/best/q-672-catchy-song","excerptCount":4,"excerpt":"\" You made a match, look what you have done ,\" It's a very catchy song!"}]}} 
```

有了这个，你就可以做这样的事情：

```
for(var i:int = 0; i < oProduct.prosAndCons.pros.length; i++)
{
    var pro:Object = oProduct.prosAndCons.pros[i];

    trace(pro.name);
    trace(pro.link);
} 
```

# python - python中带有特殊方法的单链表，卡住了

> ID：10184048
> 
> 赞同：1
> 
> 时间：2012-04-17T01:49:43.037
> 
> 标签：python, linked-list, complexity-theory, nodes, singly-linked-list

具有两个类 Node 和 LinkedList 的单链表很容易实现。但是我的问题是当涉及到一个只有第一个节点访问的单链表时（没有存储长度，没有最后一个节点访问，并且没有使用虚拟节点）。我无法绕开或在网上找到太多关于的特殊方法类似于具有O（1）复杂度的pythons内置列表操作，例如：

```
aa = LinkedList()  --  creates empty list
aa.first()  --  similar to aa[0]
aa.rest()  --  similar to aa[1:]
aa.cons(item)  --  similar to aa[item:]
[item] + aa  --  similar to aa.insert(0, item) 
```

任何形式的领导、帮助、指导将不胜感激。出于某种原因，如果没有虚拟节点或存储长度和迭代器，我无法将 python 的内置列表运算符解释为我自己在 LinkedList 中的方法。看着它，我似乎离得很近，但我所做的或发现的一切似乎都无济于事。谢谢你。

```
class Node:
  def __init__(self, data=None, next=None):
    self.data = data
    self.next = next

  def getData(self):
    return self.data

  def getNext(self):
    return self.next

  def setData(self, newdata):
    self.data = newdata

  def setNext(self, newnext):
    self.next = newnext

  def __str__(self):
    return str(self.data)

  def __repr__(self):
    return "Node(%s, %s)" % (repr(self.data), repr(self.next))

  def __eq__(self, other):
    return self.data == other.data and self.next == other.next

class myList:
  def __init__(self):
    self.first = Node()

  def add(self, data):
    newNode = Node() # create a new node
    newNode.data = data
    newNode.next = self.first # link the new node to the 'previous' node.
    self.first = newNode #  set the current node to the new one

  def first(self):
    return self.first.data

  def __repr__(self):
    plist = []
    for i in self:
        plist.append(i)
    return "LinkedList(%s)" % str(plist) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T02:03:13.220

在没有看到您的代码的情况下，我认为我可以给出的基本提示是，如果您在基于链接列表的操作期间，它将涉及大量迭代。使用类似的东西`aa.cons(item)`效率低下并且基于迭代，因为与基于数组的列表不同，您不能跳转到特定索引处的项目。

对于以下示例，我将假设您的`LinkedList`类有一个名为的变量`first`指向列表中的第一项，每个类`Node`都有一个名为的变量`next`指向列表中的下一项，还有一个名为的变量`data`将数据保存在那个节点。

对于`aa.first()`，这应该很容易，因为您已经有一个`head`指向第一项的变量。把那个退回来。

对于其他方法，您将需要迭代。这是一个如何循环并打印出列表的示例。

```
current = list.first
while current is not None:
    print current.data
    current = current.next 
```

对于`aa.rest()`，您必须跳过第一项，然后遍历列表的其余部分。要在列表中迈出一步，您基本上会跟踪您当前的位置并进行迭代。要返回 list[1:]，我想最简单的方法是创建一个新列表，然后迭代，将所有项目从 1 添加到末尾。

`aa.rest()`真的只是 的一个特例`aa.cons(item)`。您遍历列表直到当前指针到达`item`，然后创建一个包含之后所有内容的新列表。

您不一定要从`rest()`and中返回新列表`cons(...)`，这仅取决于您要如何实现它。我会留下插入供您考虑。

如果 a`LinkedList`只有一个指向 的指针，`head`除了添加到列表的前面或访问第一项之外，您不会得到 O(1)，其他所有内容都将大约为 O(N)。

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T04:41:24.863

@sgusc 发现到目前为止你所拥有的一个真正的大问题：命名一个函数`first`并命名一个数据属性`first`。后者最终覆盖了前者（因为函数实际上是在`class`而不是实例中）。

解决这个问题可以提供接近工作的东西。我简化了一些事情，添加了一个小测试驱动程序，并添加了一个`__iter__`使用生成器依次生成每个节点的数据的程序，以便`for i in self`(in `myList.__repr__`) 可以工作。差异：

```
--- a/user1337598.py
+++ b/user1337598.py
@@ -1,4 +1,4 @@
-class Node:
+class Node(object):
   def __init__(self, data=None, next=None):
     self.data = data
     self.next = next
@@ -19,27 +19,36 @@ class Node:
     return str(self.data)

   def __repr__(self):
-    return "Node(%s, %s)" % (repr(self.data), repr(self.next))
+    return "Node(%r, %r)" % (self.data, self.next)

   def __eq__(self, other):
     return self.data == other.data and self.next == other.next

-class myList:
+class myList(object):
   def __init__(self):
-    self.first = Node()
+    self.first = None

   def add(self, data):
-    newNode = Node() # create a new node
-    newNode.data = data
-    newNode.next = self.first # link the new node to the 'previous' node.
+    newNode = Node(data, self.first) # create a new node
     self.first = newNode #  set the current node to the new one

-  def first(self):
+  def getFirst(self):
     return self.first.data

+  def __iter__(self):
+      node = self.first
+      while node is not None:
+          yield node.data
+          node = node.next

   def __repr__(self):
     plist = []
     for i in self:
         plist.append(i)
     return "LinkedList(%s)" % str(plist)
+
+if __name__ == '__main__':
+    lst = myList()
+    lst.add(1)
+    lst.add(2)
+    print repr(lst) 
```

请注意，即使类名`repr`是. 我通常编写要使用的函数，例如：`LinkedList``myList``repr``self.__class__.__name__`

```
def __repr__(self):
    return '%s(%r, %r)' % (self.__class__.__name__, self.item1, self.item2) 
```

这也允许基类`__repr__`为派生类工作（有时在派生类的帮助下）。

# powershell - 通过 PowerShell 和 WMI 从用户名中获取用户的电子邮件地址？

> ID：10184052
> 
> 赞同：11
> 
> 时间：2012-04-17T01:50:33.323
> 
> 标签：powershell, active-directory, wmi, powershell-2.0

我有一个用户的网络登录名。从 PowerShell 和 WMI 是否可以获得该用户的有效电子邮件？请注意，登录名与电子邮件中的名称不同，因此我不能将登录名与电子邮件域结合起来。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-17T03:24:50.507

**最简单的方法是使用Active-Directory。**

由于您使用的是 PowerShell 标记而不是 PowerShell V2.0，因此您可以使用 ADSI。

```
Clear-Host
$dn = New-Object System.DirectoryServices.DirectoryEntry ("LDAP://WM2008R2ENT:389/dc=dom,dc=fr","jpb@dom.fr","Pwd")

# Look for a user
$user2Find = "user1"
$Rech = new-object System.DirectoryServices.DirectorySearcher($dn)
$rc = $Rech.filter = "((sAMAccountName=$user2Find))"
$rc = $Rech.SearchScope = "subtree"
$rc = $Rech.PropertiesToLoad.Add("mail");

$theUser = $Rech.FindOne()
if ($theUser -ne $null)
{
  Write-Host $theUser.Properties["mail"]
} 
```

您也可以在过滤器中使用`userPrincipalName`代替，因为您可以使用*user@domain*形式。`sAMAccountName``userPrincipalName`

 ** * *

**使用 WMI**：如果您绝对想使用 WMI。

```
$user2Find = "user1"
$query = "SELECT * FROM ds_user where ds_sAMAccountName='$user2find'"
$user = Get-WmiObject -Query $query -Namespace "root\Directory\LDAP"
$user.DS_mail 
```

您可以在本地服务器上或域内的计算机上使用第二个解决方案，但是从域外向 WMI 进行身份验证要复杂一些。

* * *

**使用 PowerShell 2.0**

```
Import-Module activedirectory
$user2Find = "user1"
$user = Get-ADUser $user2Find -Properties mail
$user.mail 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-14T21:12:52.580

这是另一种可能的方式（[原始来源](http://www.powershellmagazine.com/2012/11/14/pstip-how-to-get-the-email-address-of-the-currently-logged-on-user/?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3a%20PowershellMagazine%20%28PowerShell%20Magazine%29&utm_content=Google%20Reader)）：

```
PS> [adsisearcher].FullName
System.DirectoryServices.DirectorySearcher

PS> $searcher = [adsisearcher]"(objectClass=user)"
PS> $searcher

CacheResults             : True
ClientTimeout            : -00:00:01
PropertyNamesOnly        : False
Filter                   : (objectClass=user)
PageSize                 : 0
PropertiesToLoad         : {}
ReferralChasing          : External
SearchScope              : Subtree
ServerPageTimeLimit      : -00:00:01
ServerTimeLimit          : -00:00:01
SizeLimit                : 0
SearchRoot               :
Sort                     : System.DirectoryServices.SortOption
Asynchronous             : False
Tombstone                : False
AttributeScopeQuery      :
DerefAlias               : Never
SecurityMasks            : None
ExtendedDN               : None
DirectorySynchronization :
VirtualListView          :
Site                     :
Container                :

PS> $searcher = [adsisearcher]"(samaccountname=$env:USERNAME)"
PS> $searcher.FindOne().Properties.mail 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-14T14:18:32.833

不是 WMI，但这也可以完成这项工作：

```
PS> ([adsi]"WinNT://$env:USERDOMAIN/$env:USERNAME,user").Properties["mail"] 
```*

# mysql - MySQL 在几天内查询轮班 - 更简单的方法？

> ID：10184053
> 
> 赞同：1
> 
> 时间：2012-04-17T01:50:37.563
> 
> 标签：mysql, sql, database

我有一些关于 MySQL 的报告，下面的代码是我目前对该问题的解决方案。

直到我开始考虑员工轮班时间超过午夜时，这似乎很简单，因此必须调整查询。现在我有 php 根据日期/时间跨度生成不同的查询，如下所示：

如果工作班次在同一天（即：两天的上午 8 点至晚上 8 点）：

```
SELECT <select statements>
FROM <from statements>
WHERE
(
    (Date = '2012-04-16' AND Time BETWEEN '08:00:00' AND '20:00:00')
    OR
    (Date = '2012-04-02' AND Time BETWEEN '08:00:00' AND '20:00:00')
); 
```

如果轮班超过午夜，它会变得复杂（即：两天的晚上 8 点到早上 8 点）：

```
SELECT <select statements>
FROM <from statements>
WHERE
(
    (
        (Date = '2012-04-16' AND Time >= '20:00:00')
        OR
        (Date = '2012-04-17' AND Time <= '08:00:00')
    )
    OR
    (
        (Date = '2012-04-17' AND Time >= '20:00:00')
        OR
        (Date = '2012-04-18' AND Time <= '08:00:00')
    )
); 
```

可以想象，这些查询在我添加到报告中的每一天都变得非常冗长和繁重。必须有一种更聪明的方法来做到这一点 - 任何人都可以提供任何见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T23:17:50.647

如果你想要更优雅的代码，这部分：

```
 (Date = '2012-04-16' AND Time >= '20:00:00')
    OR
    (Date = '2012-04-17' AND Time <= '08:00:00') 
```

可以改成：

```
 (Date, Time) >= (DATE('2012-04-16'), TIME('20:00:00'))
    AND 
    (Date, Time) <= (DATE('2012-04-17'), TIME('08:00:00')) 
```

复合索引对`(Date, Time)`您和上述版本都有帮助。

* * *

如果您有其中几个条件，例如您的示例：

```
SELECT <select statements>
FROM <from statements>
WHERE
(
    (
        (Date = '2012-04-16' AND Time >= '20:00:00')
        OR
        (Date = '2012-04-17' AND Time <= '08:00:00')
    )
    OR
    .....
    OR 
    (
        (Date = '2012-05-27' AND Time >= '20:00:00')
        OR
        (Date = '2012-05-28' AND Time <= '08:00:00')
    )
) 
```

你可以把它变成：

```
SELECT <select statements>
FROM <from statements>
  CROSS JOIN
      ( SELECT TIME('20:00:00') AS start_time
             , TIME('08:00:00') AS end_time
      ) AS cc
  JOIN
      ( SELECT d                   AS this_day
             , d + INTERVAL 1 DAY  AS next_day
        FROM
          ( SELECT DATE('2012-04-16') AS d
          UNION ALL
            ...
          UNION ALL
            SELECT '2012-05-27'
          ) AS s 
      ) AS selected
     ON  (Date, Time) >= (selected.this_day, cc.start_time)
     AND (Date, Time) <= (selected.next_day, cc.end_time  ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-20T13:05:26.037

我最近遇到了这样的问题，我要写一个包括夜班在内的三个班次的代码，其中包括当天和第二天。

**这是代码：**

```
Select *, Case When Shifts = 'Night' and 
(DATEPART(HOUR,DATEADD(day,1,SystemDate_PST))>='00'               //next day data// 
and DATEPART(HOUR,DATEADD(day,1,SystemDate_PST)) <='06')
THEN DATEADD(DAY,-1, SystemDate_PST) else SystemDate_PST               // to show next day data as current day data//
end as Timings from 
(
Select *,
case 
when DATEPART(HOUR, SystemDate_PST)*60+DATEPART(MINUTE, SystemDate_PST) between
06*60+30 and 14*60+30 then 'Morning'
When DATEPART(HOUR, SystemDate_PST)*60+DATEPART(MINUTE, SystemDate_PST) between
23*60-30 and  23*60+60 then 'Night' 
when datepart(HOUR,dateadd(day,1,SystemDate_PST)) >='00' 
and datepart(HOUR,dateadd(day,1,SystemDate_PST))*60 + DATEPART(MINUTE, SystemDate_PST
<=07*60-30 then 'Night'
else 'Noon' 
end as Shifts from (Select * from Table) a )b 
```

*我的轮班时间是： **早上：06:30 AM - 14:29 PM** **中午：14:30 PM - 22:29 PM** **晚上：22:30 PM - 06:29 AM***

# android - Android : 在 Android 处于睡眠模式时监听数据包数据

> ID：10184054
> 
> 赞同：1
> 
> 时间：2012-04-17T01:51:48.603
> 
> 标签：android, tcp, cpu, sleep

如前一个问题的答案所述，CDMA 和 GSM 无线电保持开启，即使在 Android 设备上的 CPU 进入睡眠状态后也是如此。我的问题是...

1.  接到电话时，是什么唤醒了 CPU / 电话？
2.  当通过与服务器的活动 TCP 连接接收到数据时，是否有类似的机制来唤醒我的应用程序，即使在手机进入睡眠模式之后也是如此？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T01:59:26.827

您可能想考虑向您的设备发送推送通知（如果您不是特别需要 TCP）。

查看来自 Google (http://code.google.com/android/c2dm/) 的（免费）Android 云到设备消息传递 (C2DM) 服务。

设置需要一些工作，并且仅在 2.2+ 上受支持，但确实简化了客户端/服务器架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T02:02:14.550

CPU 休眠时无法接收数据。

CPU需要时不时的唤醒一次，看看有没有新的数据。在您检查新数据的代码中，如果有新数据，您可以保持清醒并继续进行处理。

您肯定想了解 BroadcastReceiver 和 android 警报。基本上，您可以告诉 Android 每 5 分钟或其他时间向您发送一次警报，即使它正在睡觉。当您的 BroadcastReceiver 收到来自 android 的警报时，它会唤醒 CPU，并保持足够长的时间来检查您是否有新数据或您正在尝试做的任何事情。如果你有新数据，你可以告诉 CPU 保持清醒，然后你就可以开始处理新数据了。

这是一个[合理的教程](http://mobile.tutsplus.com/tutorials/android/android-fundamentals-scheduling-recurring-tasks/)。当然，Android 开发者文档也很有帮助。

# objective-c - SenTestCase 未调用异步单元测试

> ID：10184056
> 
> 赞同：0
> 
> 时间：2012-04-17T01:52:02.410
> 
> 标签：objective-c, ios5, asynchronous, sentestingkit

当我运行我的单元测试时，我没有到达我的断点，并且我认为测试没有正确运行我的代码。

我正在尝试进行异步测试，这是我的困难的一部分。

我如何设置测试以便`testLookupBook`调用，因为我希望这会导致其他所有内容都被正确调用。

我猜测要测试的函数应该在头文件中的某个位置，但我确实以`test`.

这是我的头文件：

```
@interface jabBookScanTest : SenTestCase {
    jabBookScan *instance;
    NSArray *searchResult;
}
@end 
```

测试的实现在这里：

```
- (void)MethodNameToCallBack:(jabBookScan *)manager 
            resultFromServer:(NSArray *)s {
    searchResult = s;
}

- (BOOL)waitForCompletion:(NSTimeInterval)timeoutSecs {
    NSDate *timeoutDate = [NSDate dateWithTimeIntervalSinceNow:timeoutSecs];
    BOOL done = false;
    do {
        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:timeoutDate];
        if([timeoutDate timeIntervalSinceNow] < 0.0)
            break;
    } while (!done);

    return done;
}

- (void)testLookupBook {
   NSDate *fiveSecondsFromNow = [NSDate dateWithTimeIntervalSinceNow:5.0];
   [instance lookupBook:(NSString *)@"9780262140874"];
   [[NSRunLoop currentRunLoop] runUntilDate:fiveSecondsFromNow];
   STAssertTrue([self waitForCompletion:90.0], @"Failed to get any results in time");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T23:26:07.163

我忘记将方法添加到我的头文件中。

```
@interface jabBookScanTest : SenTestCase<jabBookScanDelegate> {
    jabBookScan *instance;
    NSArray *searchResult;
}
- (void) testLookupBook;

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T10:01:40.570

我会这样做

```
- (void)testLookupBook {
   NSDate *fiveSecondsFromNow = [NSDate dateWithTimeIntervalSinceNow:5.0];
   [instance lookupBook:(NSString *)@"9780262140874"];
   WAIT_WHILE(searchResult == nil, 1.0); 
} 
```

-macro`WAIT_WHILE(expressionIsTrue, seconds)`将评估输入，直到表达式不为真或达到时间限制。下面是使用 NSRunLoop 模式。您可以在这里找到该项目：

[https://github.com/hfossli/AGWaitForAsyncTestHelper](https://github.com/hfossli/AGWaitForAsyncTestHelper)

# android - 二维手机游戏

> ID：10184058
> 
> 赞同：0
> 
> 时间：2012-04-17T01:52:05.670
> 
> 标签：android, ios, cocos2d-iphone, unity3d, coronasdk

我正在寻找创建一个 2d 手机游戏（iPhone 和 Android）。是否有任何资源您知道以下详细信息（是的，我用谷歌搜索了它）：

*   电晕SDK
*   可可 2d
*   统一
*   游戏沙拉

作为一点背景，我从事 iOS 编程已经有 2 年了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T02:40:36.427

您显然没有对您的问题进行足够的研究，因为谷歌搜索[corona cocos2d unity](http://www.google.com/search?q=corona+cocos2d+unity&ie=UTF-8&oe=UTF-8&hl=fr&client=safari)得出了[一个简单的优秀比较，不是 3，而是 6 游戏引擎](http://www.burtonsmediagroup.com/blog/2010/06/game-engines-for-iphone-ipad-android-cocos2d-corona-torque-unity-3d/)。这部杰作的所有功劳归功于伯顿媒体集团的作者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T04:36:07.513

我会推荐 Cocos2d，因为在我看来，它与 Corona 一样甚至更好，而且它是免费的。

newboston 的视频系列是帮助您入门的一些重要资源，首先是对 cocos2d 的介绍，然后是如何制作 RPG。这是对 cocos2d 的一个非常好的介绍，可以帮助您理解编程语言。（我不确定您已经知道哪些编程语言） [http://www.youtube.com/playlist?list=PL452AE69EA1EAC535](http://www.youtube.com/playlist?list=PL452AE69EA1EAC535)

玩得开心

# javascript - 是否有 CSS :visible (scroll) 选择器？

> ID：10184065
> 
> 赞同：13
> 
> 时间：2012-04-17T01:52:47.573
> 
> 标签：javascript, css

我想仅使用 CSS 更改可见元素的样式。有选择器吗？它只需要与 Chrome 和 Firefox 一起工作。（我正在构建一个扩展/插件）

如果没有，有没有办法用轻量级的 JavaScript 改变可见元素的样式？

* * *

**当前滚动位置内可见**。一个元素可以在滚动视野之外，或者部分可见。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T02:04:51.810

没有用于评估可见性的标准纯 CSS 规则。

正如其他人所说，jQuery（如果你想使用 jQuery）既有[CSS 选择器扩展](http://api.jquery.com/visible-selector/) `:visible`，也有能力`.is(':visible')`在任何给定的 jQuery 对象上执行以获取任何给定 DOM 元素上的计算样式`.css("display")`或`.css("visibility")`。

在纯 javascript 中确定对象是否可见并不是特别简单，因为您必须获取 computedStyle （考虑所有可能影响元素的 CSS 规则）并且您必须确保没有父对象被隐藏导致要隐藏的子元素。这是我在我自己的个人库中的一个功能：

```
//----------------------------------------------------------------------------------------------------------------------------------
// JF.isVisible function
//
// Determines if the passed in object is visible (not visibility:hidden, not display: none 
// and all parents are visible too.
//
// Source: http://snipplr.com/view/7215/javascript-dom-element-visibility-checker/
//----------------------------------------------------------------------------------------------------------------------------------
JF.isVisible = function(obj)
{
    var style;

    if (obj == document) return true;

    if (!obj) return false;
    if (!obj.parentNode) return false;
    if (obj.style) {
        if (obj.style.display == 'none') return false;
        if (obj.style.visibility == 'hidden') return false;
    }

    //Try the computed style in a standard way
    if (window.getComputedStyle) {
        style = window.getComputedStyle(obj, "")
        if (style.display == 'none') return false;
        if (style.visibility == 'hidden') return false;
    } else {
        //Or get the computed style using IE's silly proprietary way
        style = obj.currentStyle;
        if (style) {
            if (style['display'] == 'none') return false;
            if (style['visibility'] == 'hidden') return false;
       }
    }

    return JF.isVisible(obj.parentNode);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T02:00:10.080

`:visible`这对我来说 就像一个选择器：http: [//api.jquery.com/visible-selector/](http://api.jquery.com/visible-selector/)

**编辑**`javascript`：在您的“无 CSS”警告之前看到您的标签。

但这是一个 CSS 选择器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T02:02:08.137

没有办法选择不可见的元素，使用纯 CSS

[http://www.w3.org/TR/selectors/](http://www.w3.org/TR/selectors/)

但是，如果您有类名或其他选择器，则使用 jquery 您可以执行以下操作

```
jQuery(selector).each(function(){
    Var $this=$(this);
    if ($this.css('visibility')==='hidden')
       //set your style
}) 
```

编辑：编辑后，绝对没有办法单独使用 CSS 来选择视口中的内容。它是一种上下文无关的语言。

但是，您总是可以使用 jquery 处理元素偏移位置，并确定它是否在当前视口内（window.scrollposition 或类似的东西）。不过，这种类型的解决方案很快就会变得混乱。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T02:07:28.903

没有纯粹的 CSS 方法可以做到这一点。正如 Kirean 的评论已经说过的，为什么你只想设置可见元素的样式？不可见的元素无论如何都不会显示它们的样式。如果您不希望不可见元素占用空间（也称为布局），则应使用`display: none;`

如果你真的想要一个选择器来选择可见元素，你可以按照 Widor 的建议使用 jQuery。您可以首先使用 jQuery 选择可见元素，向它们添加一个类，然后使用 CSS 选择该类的元素。

```
$('div:visible').addClass('visibleElement');

.visibleElement {
  color: red;
} 
```

# c# - 设计按键控制的最佳方式是什么？

> ID：10184066
> 
> 赞同：0
> 
> 时间：2012-04-17T01:52:52.973
> 
> 标签：c#, wpf

我需要设计一个控件来捕获用户按下的击键并将其视为输入。

然后我需要将它显示给用户，以便他们知道他们按下了哪一个。

我尝试使用文本框，并连接到 ValueChanged 事件，但由于某种原因它两次显示密钥。

有谁知道已经构建的可以处理此功能的控件？

旁注：我不需要使用修饰键或类似功能的实现，我只是暂时尝试跟踪单个击键。

另一种看待它的方式是：在几乎所有 PC 视频游戏中，您都可以更改游戏设置中的键绑定。您转到设置，找到您要查找的键绑定，选择它，然后点击一个键，然后它会捕获该键并将键绑定更改为用户输入的键。

**这**正是我正在寻找的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T02:35:49.097

执行此操作的简单方法是数据绑定。在 WPF 中，这很容易。您可以将数据从一个控件绑定到另一个控件。下面我将一个接受用户输入的文本框绑定到一个显示它的标签上。

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <TextBox Height="23" HorizontalAlignment="Left" Margin="45,55,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" />
    <Label Content="{Binding ElementName=textBox1, Path=Text}" Height="28" HorizontalAlignment="Left" Margin="45,135,0,0" Name="label1" VerticalAlignment="Top" Width="142" />
</Grid> 
```

更复杂的答案是进行命令绑定。它的作用是捕获 UserControl 或 Window 上的特定键绑定并执行给定的命令。这有点复杂，因为它需要您创建一个实现 ICommand 的类。

更多信息在这里：http: [//msdn.microsoft.com/en-us/library/system.windows.input.icommand.aspx](http://msdn.microsoft.com/en-us/library/system.windows.input.icommand.aspx)

我个人是 Josh Smith 实现的 RelayCommand 的忠实粉丝。[这里](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090051)有一篇很棒的文章。

总之，虽然你可以做到这一点。

**XAML：**

```
<Window.InputBindings>
        <KeyBinding Key="Escape" Command="{Binding KeyPressCommand}"/>
</Window.InputBindings> 
```

**代码：** 您需要创建一个 RelayCommand 类。

```
public class RelayCommand : ICommand
{
    private readonly Action<object> _execute;
    private readonly Predicate<object> _canExecute;

    public RelayCommand(Action<object> execute, Predicate<object> canExecute)
    {
        if (execute == null)
            throw new ArgumentNullException("execute");

        _execute = execute;
        _canExecute = canExecute;
    }

    public event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }

    public void Execute(object parameter)
    {
        _execute(parameter);
    }

    public bool CanExecute(object parameter)
    {
        return _canExecute == null || _canExecute(parameter);
    } 
```

然后要在你的主窗口中实现它，你需要这样做。

```
 private RelayCommand _keyPressCommand;

    public RelayCommand KeyPressCommand
    {
        get
        {
            if (_keyPressCommand== null)
            {
                _keyPressCommand = new RelayCommand(
                 KeyPressExecute,
                 CanKeyPress);
            }
            return _keyPressCommand;
        }
    }

private void KeyPressExecute(object p)
{
    // HANDLE YOUR KEYPRESS HERE
}

private bool CanSaveZone(object parameter)
{
   return true;
} 
```

如果你选择第二个选项，我真的建议你看看 Josh Smith 的 MSDN 文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T02:28:40.940

对于这种情况，您必须捕获表单事件，请参阅此 Stack Overflow 重复问题，它将为您提供答案

[Fire Form KeyPress 事件](https://stackoverflow.com/questions/5499463/fire-form-keypress-event)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T15:46:20.820

我最终不得不做的是：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <TextBox Name="textBox1" PreviewKeyDown="previewKeyDown" />
</Grid> 
```

然后在我的偶数处理程序中这样做：

```
private void previewKeyDown(object sender, KeyEventArgs e)
{
    e.Handled = true;
    textBox1.Text = e.Key.ToString();
} 
```

这基本上通过设置禁用了文本框的默认键功能

```
e.Handled =  true 
```

然后我将文本框的文本更改为我需要的，这是按下的键。

# ruby-on-rails - 我是否必须注册并从 Google 获取密钥才能“使用 Google 登录”？

> ID：10184069
> 
> 赞同：0
> 
> 时间：2012-04-17T01:54:10.960
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise, omniauth

我正在使用omniauth让我的用户“登录”谷歌、雅虎等。

但是突然之间它停止了工作。我仍然可以看到通过 URL 将用户数据发送到服务器，但是omniauth 不接受它。由于某种原因，它说“无效凭据”。

这是我的配置：

```
config.omniauth :open_id, :store => OpenID::Store::Filesystem.new('/srv/www/myapp/tmp'), :name => 'google', :identifier => 'https://www.google.com/accounts/o8/id', :require => 'omniauth-openid' 
```

但现在我看到这里还有一个我可以使用的谷歌策略（而不是 open-id）：[https ://github.com/intridea/omniauth/wiki/List-of-Strategies](https://github.com/intridea/omniauth/wiki/List-of-Strategies)

虽然它需要一个 KEY，所以现在我很困惑。为什么 google 接受很多策略？我应该使用哪个？

我的开放身份策略是否仍然有效？我该如何调试呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T02:13:46.410

如果您最近更新了您正在使用的 Omniauth gem 的版本，您可能不再需要安装所需的 gem。他们将不同的提供者分成自己的宝石。

有关该问题的讨论，请参见[https://github.com/intridea/omniauth/issues/451](https://github.com/intridea/omniauth/issues/451)。

有关 Google OAuth2 可能有用的信息：[https ://developers.google.com/accounts/docs/OAuth2Login](https://developers.google.com/accounts/docs/OAuth2Login)

# asp.net-mvc - 捕获 ASP.NET MVC 错误和 WebActivator

> ID：10184072
> 
> 赞同：1
> 
> 时间：2012-04-17T01:54:36.267
> 
> 标签：asp.net-mvc, error-handling, webactivator

我想知道是否可以在不修改 web.config 或 global.asax 文件的情况下捕获未处理的错误。

理想情况下，我会使用 WebActivator 包并具有以下内容：

```
[assembly: WebActivator.PostApplicationStartMethod(typeof(MyProject.Initialize), "Start")]

namespace MyProject
{
    using System;
    using System.Collections.Generic;
    using System.Web;
    using System.Web.Mvc;

    internal static Initialize
    {
        public static void Start()
        {
              // this doesn't work
              HttpContext.Current.ApplicationInstance.Error += ApplicationInstance_Error;
        }

        // this never fires
        static void ApplicationInstance_Error(object sender, EventArgs e)
        {
            throw new NotImplementedException();
        }
    }
} 
```

**问题 #1：** 是否可以在不修改 web.config 或 global.asax 文件的情况下捕获未处理的错误？

**问题2：** 如何？

**更新：**我在下面发布了一个答案。我不确定这是否是最好的方法。任何意见表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T02:24:43.193

我能够使用这种方法得到一些工作：

```
[assembly: WebActivator.PreApplicationStartMethod(typeof(MyProject.Initialize), "Start")]

namespace MyProject
{
    using System;
    using System.Collections.Generic;
    using System.Web;
    using System.Web.Mvc;

    internal static Initialize
    {
        public static void Start()
        {
            GlobalFilters.Filters.Add(new WatchExceptionAttribute());
        }
    }

    public class CustomHandleErrorAttribute : HandleErrorAttribute
    {
        public override void OnException(ExceptionContext filterContext)
        {
            // do your thing here.
        }
    }
} 
```

# c# - 如何使用生成的 ClientID 将 UserControl 包装在 DIV 中

> ID：10184076
> 
> 赞同：1
> 
> 时间：2012-04-17T01:55:29.630
> 
> 标签：c#, asp.net, webusercontrol

如果我有`UserControl`这样的：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="Foo.ascx.cs" Inherits="Foo" %>
<asp:TextBox runat="server" ID="TxtFoo" /> 
```

我将它包含在我的页面中，如下所示：

```
...
<uc:Foo runat="server" ID="UcFoo" />
... 
```

我想让我`UserControl`被包裹在 a`DIV`中`ClientID`，如下所示：

```
<div id="ctl00$ContentPH$UcFoo">
  <input type="text" name="ctl00$ContentPH$UcFoo$TxtFoo" id="ctl00$ContentPH$UcFoo$TxtFoo" />
</div> 
```

但实际上我得到*的内容没有`DIV`标签*。所以这里的问题是：**如何告诉 ASP.NET 使用自动生成的 ClientID 在 DIV 中呈现我的控件？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T02:25:37.373

`<div>`使用`id`属性将 UserControl 的内容包装在 a中：

```
<div id="<%= this.ClientID %>">
    <asp:TextBox runat="server" ID="TxtFoo" />
</div> 
```

请注意，`ClientID`将包含下划线，而不是美元符号（如您的示例中所示）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T01:59:21.383

选项1：

```
<asp:Panel runat="server">
  <asp:TextBox runat="Server" Id="txtFoo" />
</asp:Panel> 
```

选项 2：

编写一个自定义控件，覆盖 Render 方法并写出您自己的字符串...

HTH。

# php - 在 NetBeans PHP 中重命名命名空间？

> ID：10184077
> 
> 赞同：7
> 
> 时间：2012-04-17T01:55:37.347
> 
> 标签：php, netbeans

有没有办法在 NetBeans ide 中轻松重命名影响所有其他命名空间声明的命名空间？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-17T22:02:53.280

这是一种解决方法，但可以帮助您更改项目中的所有命名空间声明：

1.  单击包含所有源文件的文件夹（例如项目根目录中的 src/）
2.  按 CTRL+H
3.  在搜索字段中键入要替换的名称空间或名称空间的一部分（例如 Foo\Bar），并将名称空间定位到“替换为”字段（例如 Foo\MyNewBar）
4.  点击替换
5.  一段时间后，屏幕底部将显示所有可以替换的位置。您可以全部替换或仅选择其中一些。但请注意，所有文件都会在更改后自动保存。

# javascript - Protovis JQuery 更改直方图 Xticks

> ID：10184078
> 
> 赞同：0
> 
> 时间：2012-04-17T01:56:10.573
> 
> 标签：javascript, jquery, html, histogram, protovis

我正在[玩 Protovis 直方图示例](http://mbostock.github.com/protovis/ex/histogram.html)，我想知道是否可以在保持直方图不变的同时更改 x 刻度的值。现在 x 轴从 0 到 5 变化，但是如果我想保持整个直方图相同但只是将 x 轴刻度更改为从 10 到 15 变化呢？那可能吗？

我认为更改应该在以下代码中的某处：

```
vis.add(pv.Rule)
.data(x.ticks())
.left(x)
.bottom(-5)
.height(5)
.anchor("bottom").add(pv.Label)
.text(x.tickFormat); 
```

但我不太确定代码在做什么。非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:36:54.317

嗨迈克尔在页面底部的那个链接中你可以看到代码

```
 var experiment = {
  trials: 10000, // number of trials
  variables: 5 // number of random variables
};
experiment.values = pv.range(experiment.trials).map(function() {
  return pv.sum(pv.range(experiment.variables), Math.random);
}); 
```

只需尝试将 variables 参数更改为 10 或您所需的值。它应该工作..

# objective-c - 使用标签栏控制器（故事板）防止访问 UIViewControllers

> ID：10184080
> 
> 赞同：1
> 
> 时间：2012-04-17T01:56:34.813
> 
> 标签：objective-c, ios, authentication, uiviewcontroller, uistoryboard

我目前遇到了我的 iOS 应用程序的问题。
我正在尝试采用渐进式登录模式，即：用户无需登录即可访问某些应用程序。

所需功能如下：

*   用户可以随时查看所有需要登录的导航项
*   当用户尝试访问需要登录的 uiview(controller) 时，他们将收到 UIAlertView 提示，要求他们登录。（最好在应用程序识别出启动的 segue 目标受限时出现 UIAlertView）。

起初我使用 UIViewController 的一个子类，在指定的初始化程序 (initWithCoder) 中，它会检查 NSUserDefaults 以查看用户是否已登录。然后我将其子类化。限制如下：

*   不能使用 UIViewController 的其他子类，即 UITableViewController
*   UIAlertView 在视图出现后出现，如果子类 UIViewController 假设用户已登录，我假设这会导致错误。

**问题摘要：**
我想知道如何有条件地阻止用户访问某些 UIView(Controller) 和 UIViewController 的子类，以及在发生这种情况时出现 UIAlertView。

**更新 1**
类别和/或协议能否成为可行的解决方案？

**更新 2**
CodaFi 指出单例是管理用户状态的绝佳解决方案。

有了这个实现，我现在需要弄清楚如何控制用户的访问。
当我使用故事板时，我觉得最通用的实现是继承 UIStoryboardSegue，并在执行方法上检查用户是否试图访问受限的 UIViewController（也许受限控制器具有指定所需状态的协议属性：登录/出去）。然而这里的陷阱是你不能在故事板图形编辑器中选择 UIStoryboardSegue 的类/子类。我知道我可以以编程方式执行此操作，但这似乎很乏味，因为我必须将 IBActions 添加到执行 segues 的方法中，而且我认为这不适用于 navigationController 和 tabbarControllers 等元素的行为方式。

*有没有人有一个可行的解决方案来限制用户的导航？*

**更新 3**
我已经为这个问题添加了一个答案，但是我仍然认为它没有答案，因为我写的答案没有考虑导航栏控制器之间的 segues。但是，它可能对某些人有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T04:47:50.743

所以，我已经回答了如何使用自定义转场来做到这一点。

现在我明白了我真正的问题是与 tabbarcontrollerdelegate 协议的心理脱节。

作为防止访问选项卡的解决方案，我创建了一个类来处理所述选项卡栏控制器

```
#import <Foundation/Foundation.h>

@interface TabBarDelegate : NSObject<UITabBarControllerDelegate,UIAlertViewDelegate>{
    UITabBarController *cachedTabBarController;
}

@end

#import "TabBarDelegate.h"

@implementation TabBarDelegate

-(BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController{
    NSLog(@"%s",__FUNCTION__);
    NSLog(@"Pretending the user isnt logged in");

    if(true){
        NSString *message = [NSString stringWithFormat:@"You require an account to access %@",viewController.tabBarItem.title];
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Account Required" message:message delegate:self cancelButtonTitle:@"Okay" otherButtonTitles: @"Login",@"Create Account",nil];
        [alert show];
        //Hold tabbarcontroller property for alert callback
        cachedTabBarController = tabBarController;
        return false;
    }

    return true;
}

-(void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex{
    if(cachedTabBarController){
        switch (buttonIndex) {
            case 1:
                //Login
                [cachedTabBarController performSegueWithIdentifier:@"tabBarToLogin" sender:cachedTabBarController];
                break;
            case 2:
                //Sign up
                [cachedTabBarController performSegueWithIdentifier:@"tabBarToSignup" sender:cachedTabBarController];
                break;
            default:
                break;
        }
        //Release tab bar controller from memory
        cachedTabBarController = nil;
    }
}

@end 
```

然后我在applicationDidFinishLaunching中将它连接到我的appDelegate ...

```
//Hook up tab bar delegate
    mainTabController = (UITabBarController*)self.window.rootViewController;
    mainTabBarDelegate = [[TabBarDelegate alloc] init];
    mainTabController.delegate = mainTabBarDelegate; 
```

和瞧

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:25:39.873

好的，所以我有一部分解决方案。

它仅适用于您可以选择自定义 segue 的情况（我只编写了推送代码，而不是模态代码）。

协议“UIViewControllerAuthentication”适用于所有需要身份验证的控制器，该协议包含一个检索所需身份验证状态的方法。

```
enum authenticationStatus {
notLoggedIn = 0,
noPassword = 1,
loggedIn = 2
};

@protocol UIViewControllerAuthentication <NSObject>

-(enum authenticationStatus)authStatusRequired;

@end 
```

需要身份验证的控制器符合此协议：

```
-(enum authenticationStatus)authStatusRequired{
return loggedIn;
} 
```

然后将其用于经过身份验证的推送 segue

```
@interface SeguePushWithAuth : UIStoryboardSegue

@end
-(void)perform{
    NSLog(@"custom segue destination : %@",self.destinationViewController);
    NSLog(@"custom segue source : %@",self.sourceViewController);
    NSLog(@"custom segue dest conforms to protocol : %i",[self.destinationViewController conformsToProtocol:@protocol(UIViewControllerAuthentication)]);

    if([self.destinationViewController conformsToProtocol:@protocol(UIViewControllerAuthentication)]){
        UIViewController <UIViewControllerAuthentication> *destination = (UIViewController <UIViewControllerAuthentication> *)self.destinationViewController;
        if (!((int)[AccountModel userAuthStatus] >= (int)[destination authStatusRequired])) {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Authentication" message:@"You need an account to access this area" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Login",@"Create Account", nil];
            //alert
            [alert show];
            return;
        }
    }

    [[self.sourceViewController navigationController] pushViewController:self.destinationViewController animated:true];
}

@end 
```

然后在 uistoryboard 中使用自定义 segues

这是允许目标控制器取消转场的好模式。
然而，它远不是我想要的，因为我希望能够验证将标签栏控制器链接到他们的孩子的 segues。

# objective-c - 从未调用过可达性通知

> ID：10184082
> 
> 赞同：7
> 
> 时间：2012-04-17T01:56:57.733
> 
> 标签：objective-c, ios, app-store, appstore-approval, reachability

我很难在我的代码中使用可达性。我想通过在启动时启动观察者然后只接收更改通知来保持它非常简单。在以下代码中，从不调用reachabilityChanged 方法。我尝试了很多迭代，但这是最简单的版本。它编译并运行。请帮忙...

****** *** *** AppDelegate.h 代码***** ** *******

 **```
#import <UIKit/UIKit.h>

#ifdef PHONEGAP_FRAMEWORK
    #import <PhoneGap/PGViewController.h>
    #import <PhoneGap/PGURLProtocol.h>
    #import <PhoneGap/Reachability.h>
#else
    #import "PGViewController.h"
    #import "PGURLProtocol.h"
    #import "Reachability.h"

#endif

@interface AppDelegate : NSObject < UIApplicationDelegate, UIWebViewDelegate, PGCommandDelegate> {
    NSString* invokeString;
}

@property (nonatomic, copy)  NSString* invokeString;
@property (nonatomic, strong) IBOutlet UIWindow* window;
@property (nonatomic, strong) IBOutlet PGViewController* viewController;

@end 
```

****** *** *** AppDelegate.m 代码片段***** ** *******

 **```
#import "AppDelegate.h"

#import "MainViewController.h"

#ifdef PHONEGAP_FRAMEWORK
    #import <PhoneGap/PGPlugin.h>
    #import <PhoneGap/PGURLProtocol.h>
    #import <PhoneGap/Reachability.h>
#else
    #import "PGPlugin.h"
    #import "PGURLProtocol.h"
    #import "Reachability.h"

#endif

@implementation AppDelegate
@synthesize invokeString, window, viewController;

- (void) reachabilityChanged:(NSNotification *)notice
{

    NSLog(@"???????? CODE NEVER GETS HERE ??????????");

    Reachability *reach = [notice object];
    NSParameterAssert([reach isKindOfClass: [Reachability class]]);
    NetworkStatus remoteHostStatus = [reach currentReachabilityStatus];

    if(remoteHostStatus == NotReachable) {NSLog(@"**** Not Reachable ****");}
    else if (remoteHostStatus == ReachableViaWiFi) {NSLog(@"**** wifi ****"); }
    else if (remoteHostStatus == ReachableViaWWAN) {NSLog(@"**** cell ****"); }
}

- (BOOL) application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions
{    

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reachabilityChanged:) name:kReachabilityChangedNotification object:nil];

    Reachability *reach = [Reachability reachabilityForInternetConnection];
    [reach startNotifier];

    NetworkStatus remoteHostStatus = [reach currentReachabilityStatus];

    NSLog(@”???? ALWAYS INITS WITH Not Reachable ????”);
    if(remoteHostStatus == NotReachable) {NSLog(@"init **** Not Reachable ****");}
    else if (remoteHostStatus == ReachableViaWiFi) {NSLog(@"int **** wifi ****"); }
    else if (remoteHostStatus == ReachableViaWWAN) {NSLog(@"init **** cell ****"); }

    // ...

}

@end 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-17T03:25:14.687

你的对象可达性是自动释放的，所以它是 dealloc 并且不再工作了。

我试试你的代码，它对我有用：

**AppDelegate.h 代码**

```
[...]
@property (retain, nonatomic)  Reachability* reach;
[...] 
```

**AppDelegate.m 代码片段**

```
[...]
@synthesize reach;

- (void) reachabilityChanged:(NSNotification *)notice
{

    NSLog(@"!!!!!!!!!! CODE IS CALL NOW !!!!!!!!!!");

    NetworkStatus remoteHostStatus = [reach currentReachabilityStatus];

    if(remoteHostStatus == NotReachable) {NSLog(@"**** Not Reachable ****");}
    else if (remoteHostStatus == ReachableViaWiFi) {NSLog(@"**** wifi ****"); }
    else if (remoteHostStatus == ReachableViaWWAN) {NSLog(@"**** cell ****"); }
}

- (BOOL) application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions
{    

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reachabilityChanged:) name:kReachabilityChangedNotification object:nil];

    self.reach = [Reachability reachabilityForInternetConnection]; //retain reach
    [reach startNotifier];

    NetworkStatus remoteHostStatus = [reach currentReachabilityStatus];

    NSLog(@"???? ALWAYS INITS WITH Not Reachable ????");
    if(remoteHostStatus == NotReachable) {NSLog(@"init **** Not Reachable ****");}
    else if (remoteHostStatus == ReachableViaWiFi) {NSLog(@"int **** wifi ****"); }
    else if (remoteHostStatus == ReachableViaWWAN) {NSLog(@"init **** cell ****"); }

    // ...

}

[...]
-(void)dealloc{
    [reach release];
    [super dealloc];
}

@end 
```****

# javascript - 使用数组和下拉列表使用 JQuery 自动完成

> ID：10184083
> 
> 赞同：0
> 
> 时间：2012-04-17T01:57:02.360
> 
> 标签：javascript, jquery

我正在尝试创建一个脚本，该脚本将使用 JQuery 的自动完成文本框来显示已按州过滤的数组中的县数据。状态是一个下拉列表。例如：如果用户选择了“伊利诺伊州”作为州，根据他们在文本框中输入的乞求字母，自动补全会为他们提供最接近的县名。我成功地能够按状态过滤数组，然后用正确的数据加载数组，但我在尝试将数组加载到自动完成时遇到问题。这是代码段。非常感谢您的帮助：

```
 <body >
    <script type="text/javascript">

    function findCounties(State)
      {
var County = new Object();

var xmlhttp;
if (window.XMLHttpRequest)
{
    // code for IE7+, Firefox, Chrome, Opera, Safari

     xmlhttp = new XMLHttpRequest();
}
else
{
    // code for IE6, IE5
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
}

if (xmlhttp != null)
{
    xmlhttp.open("GET","US_Counties.csv",false); // the false makes this synchronous!
    xmlhttp.send();
    var text = xmlhttp.responseText;

    // text contains the ENTIRE CONTENTS of the text file
    // you *could* just write those contents directly to the HTML output:

    // but you might want to process that one line at a time.  if so:
    var lines = text.split("\n");

    var cntCounty = 0;
        for (var n=0; n<lines.length; n++)
        {
            if(lines[n].indexOf(State) > 0){
                var line = lines[n];
                var populate = line.split(',');

                County[cntCounty] = populate[1];
                cntCounty++;

            }//IF
        }//for
    $(function() {
            var Counties = [{
         a_state: []
        };
        for(var i in County) {

        var item = County[i];

            Counties.a_state.push({ 
            "label" : item.County
        "value" : item.County`enter code here`
        });
    ];

  j$("#counties").autocomplete({
    source: Counties 
  }).data("autocomplete")._renderItem = function(ul, item) {
    return $("<li>").data("item.autocomplete", item).append("<a>" + item.label ++ "</a>").appendTo (ul);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:00:59.130

我使用了这个 javascript 代码：

```
var stateList, countyList;

$(document).ready( function() {
    $.ajax({type: "GET",
            url: "US_counties.csv", // list of counties
            cache: false,
            error: function (xhr, textStatus, errorThrown) {
                window.alert(textStatus);
            },
            success: function (text, textStatus, xhr) {
                var s1 = $('#s1')[0]; // the select box
                stateList = [];
                // each line has one county on it
                $.each(text.split("\n"), function (ix, elt) {
                    var items = elt.split(','),
                        stateName = items[0],
                        countyName = items[3], a;
                    if (typeof stateList[stateName] == 'undefined') {
                        a = [];
                        a.push(countyName);
                        stateList[stateName] = a;
                        // add state to the select box
                        s1.options[s1.options.length] = new Option(stateName, stateName);
                    }
                    else {
                        stateList[stateName].push(countyName);
                    }
                });

                // set the change event handler for the dropdown
                $('#s1').bind('change', function() {
                    countyList = stateList[this.value];
                    $("#t1") // the text box
                        .autocomplete({ source: countyList })
                        .val('');
                });

                // trigger a 'fake' change, to set up the autocomplete
                $('#s1').trigger('change');
            }});
}); 
```

解释：`stateList`是一个列表列表。该列表的内部索引是州名，或者在我的例子中是州的缩写（AL、AK、A​​Z 等）。中的每一项`stateList`都是字符串列表，每一项都是该州的县名。

代码的作用：

*   为文档就绪事件注册一个函数。
*   在该函数中，通过 ajax 获取县列表的 CSV。
*   在该 ajax 调用的成功回调中，解析结果。对于每个新状态，向 中添加一个项目`stateList`，然后将该状态添加到下拉列表中。将该县添加到该州的县列表中。还将更改事件处理程序绑定到下拉列表。
*   在更改处理程序中，将自动完成应用于“县名”文本框。来源是下拉列表中所选州的县名列表。

* * *

**编辑**- 仅供参考，我从[这个列表](http://www.census.gov/geo/www/gazetteer/files/Gaz_counties_national.txt)中得到了县列表，只是用逗号替换了制表符。用逗号替换制表符不是必需的，但它使我更容易在文本编辑器中浏览列表。如果您不用逗号替换制表符，那么您需要修改对制表符的调用`elt.split()`以拆分制表符。

# mysql - MySQL - 如何在不破坏现有数据的情况下增加数据库中现有列的 varchar 大小？

> ID：10184086
> 
> 赞同：66
> 
> 时间：2012-04-17T01:57:09.317
> 
> 标签：mysql

我有一个当前的专栏，`varchar(100)`我想制作它`10000`。

是不是很简单

```
alter table table_name set column col_name varchar (10000); 
```

我害怕破坏现有的数据。如果我运行这个查询我会好吗？或者我应该以另一种方式做我`alter`的专栏吗？

谢谢！

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-04-17T01:59:30.860

增加 varchar 列的大小是安全的。您不会损坏您的数据。

如果它有助于您安心，请记住，您**始终可以在更改数据结构之前运行数据库备份**。

顺便说一句，正确的语法是：

```
ALTER TABLE table_name MODIFY col_name VARCHAR(10000) 
```

此外，如果列之前允许/不允许空值，则应在列类型之后的 alter table 语句末尾添加适当的语法。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-04-17T02:04:51.760

我通常使用这种说法：

```
ALTER TABLE `table_name`
  CHANGE COLUMN `col_name` `col_name` VARCHAR(10000); 
```

但是，我认为 SET 也可以，从未尝试过。:)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-12-24T07:41:24.627

我想解释不同的 alter table 语法 - 请参阅[MySQL 文档](http://dev.mysql.com/doc/refman/5.7/en/alter-table.html)

在列上添加/删除默认值：

```
ALTER TABLE table_name
ALTER COLUMN col_name {SET DEFAULT literal | DROP DEFAULT} 
```

对于重命名列，更改其数据类型并可选择更改列顺序：

```
ALTER TABLE table_name
CHANGE [COLUMN] old_col_name new_col_name column_definition
[FIRST|AFTER col_name] 
```

用于更改列的数据类型和可选地更改列顺序：

```
ALTER TABLE table_name
MODIFY [COLUMN] col_name column_definition
[FIRST | AFTER col_name] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-09T15:22:42.967

对我来说，这是一个：

ALTER TABLE 表名 MODIFY 字段名 VARCHAR(128) NOT NULL;

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2018-05-29T20:35:25.527

我正在使用 mysql，下面的语法对我来说效果很好，

```
ALTER TABLE table_name MODIFY col_name VARCHAR(12); 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2018-07-31T10:31:25.063

对我来说，这已经奏效了-

ALTER TABLE table_name ALTER COLUMN column_name VARCHAR(50)

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2017-08-06T07:23:45.363

使用这个语法：alter table table_name modify column col_name varchar (10000);

# magento - 我的 magento 网站无法向客户发送电子邮件

> ID：10184088
> 
> 赞同：0
> 
> 时间：2012-04-17T01:57:30.120
> 
> 标签：magento

有谁知道为什么 Magento 1.4 无法发送新订单和帐户激活的电子邮件通知？当我提交联系我们表格时，它给出了以下错误。

`Unable to submit your request. Please, try again later`对此的任何想法/建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T18:00:31.600

请提供更多信息。这是在 Linux 机器、Windows 等上吗？还要检查 php 配置 SMTP 设置。像任何 php 应用程序一样，电子邮件被传递到主机系统或 php.ini 中指定的服务器。您是否有已知的工作 SMTP 服务器可以访问？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:32:01.373

您需要检查的第一件事是管理面板中是否禁用了电子邮件通信。

# c - 此代码如何工作以反转数字位？

> ID：10184089
> 
> 赞同：11
> 
> 时间：2012-04-17T01:57:36.780
> 
> 标签：c, bit-manipulation, reverse

```
unsigned reverse_bits(unsigned input)
{  
     //works on 32-bit machine  
     input = (input & 0x55555555) <<  1 | (input & 0xAAAAAAAA) >>  1;
     input = (input & 0x33333333) <<  2 | (input & 0xCCCCCCCC) >>  2;
     input = (input & 0x0F0F0F0F) <<  4 | (input & 0xF0F0F0F0) >>  4;
     input = (input & 0x00FF00FF) <<  8 | (input & 0xFF00FF00) >>  8;
     input = (input & 0x0000FFFF) << 16 | (input & 0xFFFF0000) >> 16;

      return input;
} 
```

这是如何运作的？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-17T03:43:30.927

假设我有一手 8 张牌：

```
7 8 9 10 J Q K A 
```

我们怎样才能扭转它们？一种方法是交换相邻对：

```
8 7 10 9 Q J A K 
```

然后，交换相邻的 2 组：交换 8 7 和 10 9 等：

```
10 9 8 7 A K Q J 
```

最后，四人交流，人数是 8 人的一半：

```
A K Q J 10 9 8 7 
```

完毕。

您可以按不同的顺序执行此操作。为什么？因为交换相对于彼此是*稳定的。*例如，当我们将卡的上半部分与下半部分交换时，这些对保持相同的顺序。或者当我们交换对时，两半保持相同的顺序。

这就是代码对位操作所做的事情。例如，为了交换对，我们可以使用掩码 01010101 来挑选偶数位，使用掩码 10101010 来挑选奇数位，使用按位与运算：

```
 ABCDEFGH     ABCDEFGH
& 01010101   & 10101010
----------   ----------
= 0B0D0F0H     A0C0E0G0 
```

请记住，and 的规则是给定一些位值 X，X & 1 = X 和 X & 0 = 0。掩码中的 1 位保留该值，掩码中的 0 位产生 0。这称为掩码因为它看起来就像在喷漆等中使用的面具。1 位“覆盖”你不想用零“绘画”的地方。

接下来，左结果左移一位，右结果右移。这带来了交换：

```
 B0D0F0H0     0A0C0E0G 
```

最后，将两者与逻辑或结合起来。OR 的规则是 X 或 0 是 X。这两个部分各有 0，而另一个有非零，因此这些位简单地合并：

```
 B0D0F0H0
| 0A0C0E0G
----------
= BADCFEHG 
```

现在这些对被交换了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-17T02:15:59.783

可以通过归纳来理解。

从基本情况开始，一个两位数

```
input = (input & 0x1) <<  1 | (input & 0x2) >>  1; 
```

现在进展到一个四位数

```
input = (input & 0x5) <<  1 | (input & 0xA) >>  1; // swap bits
input = (input & 0x3) <<  2 | (input & 0xc) >>  2; // swap bit pairs 
```

进展到 8 位数字

```
input = (input & 0x55) <<  1 | (input & 0xAA) >>  1; // swap bits
input = (input & 0x33) <<  2 | (input & 0xCC) >>  2; // swap bit pairs
input = (input & 0x0F) <<  4 | (input & 0xF0) >>  4; // swap bit nibbles 
```

等等。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-17T15:30:51.527

代码首先交换单个相邻位，然后交换相邻的位对，依此类推，每次交换的大小加倍，直到最后交换整数大小一半的块。交换是通过用 AND 屏蔽要移动的位来完成的，移动它们，然后将结果 OR' 在一起。

下面的动画有助于可视化正在发生的事情，记住虽然交换大小按顺序增加，但每个大小的所有交换都是并行发生的。

![交换](../Images/9e790acf8bb26c267613371b3f01eed2.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-17T02:12:30.687

让`b[0], b[1], b[2], ..., b[31]`是`input`从最低有效位开始的位。然后`b[1], b[0], b[3], b[2], ..., b[31], b[30]`将是位

```
input = (input & 0x55555555) <<  1 | (input & 0xAAAAAAAA) >>  1; 
```

基本上，它交换`input`. 类似地，其他 4 行交换相邻对、4 组、8 组，最后是 16 位组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T08:20:46.883

```
unsigned reverse_bits(unsigned input)
{  
     //works on 32-bit machine  
     input = (input & 0x55555555) <<  1 | (input & 0xAAAAAAAA) >>  1;
     input = (input & 0x33333333) <<  2 | (input & 0xCCCCCCCC) >>  2;
     input = (input & 0x0F0F0F0F) <<  4 | (input & 0xF0F0F0F0) >>  4;
     input = (input & 0x00FF00FF) <<  8 | (input & 0xFF00FF00) >>  8;
     input = (input & 0x0000FFFF) << 16 | (input & 0xFFFF0000) >> 16;
     printf("\nvalue = %x",input);
     return input;
}

int _tmain()
{
    // TODO: Please replace the sample code below with your own.

    int value;
    signed int res,bit;
    signed int stPos, len;
    value = 0x12345678;

    reverse_bits(value);
    printf("\nvalue = %x",value);
    char buffer [33];
    itoa (value,buffer,2);
    printf ("\nbinary: %s\n",buffer);

    return 0;
} 
```

# java - 如何使用 GCJ 编译 Java Servlet 和许多其他类？

> ID：10184090
> 
> 赞同：2
> 
> 时间：2012-04-17T01:57:39.670
> 
> 标签：java, tomcat, gcj

目前，我有一个用 Java 编写的后端系统，用于处理、按摩并将数据转发到外部 HSM 模块进行加密。当时认为它足够安全。但是，最近的审计结果要求所有后端 Java 类也必须受到保护。

我已经阅读了 GCJ，它将 Java 字节代码编译为本机代码。这肯定会使逆向工程变得更加困难。

经过 30 多个小时的谷歌搜索和尝试，我什至无法进行编译。我未能在我的 5 个 servlet 和数百个其他 java 类上使用 GCJ 进行编译。这也意味着，我还没有用 tomcat 测试它，我不知道这是怎么回事。

所以这里是我想知道的问题：

1) 有没有人成功用 GCJ 编译 java sevlet 并在 Tomcat 下运行它？如果是，是否有任何与编译 java servlet 直接相关的指南或示例？

2) 我在保护 java 类方面是否走在正确的道路上？如果不是，那么更好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T03:06:34.690

> 我已经阅读了 GCJ，它将 Java 字节代码编译为本机代码。这肯定会使逆向工程变得更加困难。

这是一个错误的假设。如果您想混淆您的 Java 字节码，请使用 ProGuard。

> 有没有人成功地用 GCJ 编译 java sevlet 并在 Tomcat 下运行它？如果是，是否有任何与编译 java servlet 直接相关的指南或示例？

想想你想在这里做什么。Tomcat 通过在 Jar 文件或目录中导入类文件来动态加载 servlet。GCJ 将 Java 类编译为可执行文件或本机库文件。Tomcat 将无法在运行时加载这些本机二进制文件。

您可以通过嵌入 Jetty 并使用 GCJ 编译它来制作自己的 Web 服务器，但我怀疑这是否是您真正想要做的。有大量的字节码混淆工具可以解决这个问题。ProGuard 是 Google 推荐用于 Android 开发的，并且是免费的。

**更新**

如果您在应用程序中使用反射，您可以使用 proguard.cnf 文件中的以下行将 ProGuard 配置为不重命名/删除某些类。

```
-keep public class * extends com.package.ClassName
-keepclassmembers class * extends com.package.ClassName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:41:30.453

您可以[使用 Excelsior JET 本地编译 Tomcat Web 应用程序](http://www.excelsior-usa.com/protect-java-web-applications.html)（注意：我为 Excelsior 工作）

# groovy - Groovy 控制台读取输入

> ID：10184091
> 
> 赞同：24
> 
> 时间：2012-04-17T01:57:42.290
> 
> 标签：groovy, input, groovy-console

我刚刚开始学习 Groovy，并且正在尝试使用 GroovyConsole。

有没有办法可以读取用户输入？我尝试了下面的代码，但出现错误。

```
BufferedReader br = new BufferedReader(new InputStreamReader(System.in))

打印“输入：”

输入 = br.readLine()

println "你输入了：$input"
```

这是我收到的错误：

```
抛出异常
2012 年 4 月 17 日 02:52:39 org.codehaus.groovy.runtime.StackTraceUtils 清理

警告：清理堆栈跟踪：

java.io.IOException：流已关闭
```

有什么我需要进口的吗？

任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-06T21:43:10.220

我来到这里试图找出从命令行读取用户输入的最简单方法......我在[其他地方](http://mrhaki.blogspot.se/2010/09/gradle-goodness-get-user-input-values.html)找到了答案，将在此处发布以记录“真正的”Groovy 方式，因为它仍然缺失：

```
def username = System.console().readLine 'What is your name?'
println "Hello $username" 
```

正如 Larry Battle 所说，如果使用 groovy 控制台，请确保查看输出的背景“黑色”窗口并输入输入。

**编辑**

在[控制台](http://docs.oracle.com/javase/7/docs/api/java/io/Console.html)不可用的环境中，例如从您的 IDE 运行，可能，请改用它：

```
println "What is your name?"
println "Your name is ${System.in.newReader().readLine()}" 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-12-20T17:31:38.807

```
def readln = javax.swing.JOptionPane.&showInputDialog
def username = readln 'What is your name?'
println "Hello $username." 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-04-30T18:18:40.110

您的代码有效。

```
BufferedReader br = new BufferedReader(new InputStreamReader(System.in))
print "Input:"
def userInput = br.readLine()
println "You entered: $userInput" 
```

假设您在 Windows 上，唯一的问题是正在从后台控制台读取输入，该控制台在 groovyconsole 之前启动。 ![在此处输入图像描述](../Images/ce62de52887135303d7908da8e77823d.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-10T12:28:15.753

你可以尝试这样的事情，它可以在任何 o/s 的命令行中工作，也可以在 GoovyConsole 中 - 它会弹出一个对话框 [如上一篇文章所述]：

```
def cons = System.console()
def yn
if (cons) {
    yn = {((cons.readLine(it + " (y/n) ")?:"n").trim()?:"n")?.charAt(0).toLowerCase().toString() }
} else {
    cons = javax.swing.JOptionPane.&showInputDialog
    yn = {((cons(it + " (y/n) ")?:"n").trim()?:"n")?.charAt(0).toLowerCase().toString() }
}
if (yn("Did you want to do something?") == 'y')
    ...do something here!... 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-21T16:31:25.147

如果您的 System.console() 为空，您可以

```
Scanner scan = new Scanner(System.in);
String s = scan.nextLine() 
```

# regex - 用于在收缩周围查找转义撇号的正则表达式

> ID：10184094
> 
> 赞同：2
> 
> 时间：2012-04-17T01:58:13.100
> 
> 标签：regex, sed

我有一些这样的文字：

```
i18n_en_it_IT.xml:<li>risalire all&\#39;autore.</li> 
```

就像这样（注意第一个中的转义磅符号，但第二个中没有）

```
i18n_en_it_IT.xml:<li>risalire all&#39;autore.</li> 
```

如果我运行 sed 表达式来替换

```
&\#39; 
&#39; 
```

带有斜撇号 (d\u2019) 它适用于第一种情况（带有转义），但不适用于第二种情况，我不知道为什么？我在这里看到的唯一区别是我从第二个中删除了双重转义，但由于某种原因它与 all'autore 不匹配并用 alld\u2019autore 替换它？

```
 s/\([A-Za-z]\+\)&\\#39;\([A-Za-z]\+\)/\1\\u2019\2/g
 s/\([A-Za-z]\+\)&#39;\([A-Za-z]\+\)/\1\\u2019\2/g 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T03:02:51.910

使用`sed -r`, 简化了屏蔽，如果我在后面加上 , 可以更改这两个表达式`\\`，`&\\#39;`以`?`将其标记为可选：

```
cat pounds.xml | sed -r 's/([A-Za-z]+)&\\?#39;([A-Za-z]+)/\1\\u2019\2/g' 
```

# php - PHP 谷歌地图嵌入动态位置

> ID：10184095
> 
> 赞同：0
> 
> 时间：2012-04-17T01:58:15.300
> 
> 标签：php, html, maps

嘿，我正在尝试使用谷歌地图 iframe 来显示地图，其中包含我网站中两个位置之间的方向。问题是我经常需要用不同的地址重新加载页面，我无法简单地替换 iframe 的城市以产生新的结果。

这是 iframe 的代码

```
<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.co.uk/maps?f=d&amp;source=s_d&amp;saddr=london&amp;daddr=Leeds,+UK&amp;hl=en&amp;geocode=FaHzEQMd-wv-_yl13iGvC6DYRzGZKtXdWjqWUg%3BFT_xNAMd6V7o_ymZvWTaSj55SDGp3BMC_bqtUQ&amp;aq=1&amp;oq=l&amp;sll=53.800651,-4.064941&amp;sspn=22.225372,67.631836&amp;mra=ls&amp;ie=UTF8&amp;t=m&amp;ll=52.654755,-0.848175&amp;spn=2.29307,1.44201&amp;output=embed"></iframe><br /><small> 
```

我试图做的只是简单地通过 php 替换城市名称（例如 london 与`<?php $firstTown ?>`），但更新结果没有运气，因为它似乎使用旧坐标。

我将如何继续在每个页面加载时查看带有 php 变量城市的地图？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:44:45.473

```
<? 
if ($partner->post_adres)
{
$map_url = $partner->post_adres.','.$partner->post_postcode.','.$partner->post_city;
$map_url = str_replace(" ", "+", $map_url);
?>
<iframe width="350" height="250" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"  src="http://maps.google.nl/maps?q=<?=$map_url?>&hl=nl&ie=UTF8&t=v&hnear=<?=$map_url?>&z=13&amp;output=embed"></iframe>
<?php
} 
```

为我工作

# php - 有没有人使用 Silverstripe 的这个用户定义表单模块？

> ID：10184097
> 
> 赞同：0
> 
> 时间：2012-04-17T01:58:27.240
> 
> 标签：php, silverstripe

这是一个很长很短的问题，因为与其他人相比，Silverstripe 在 CMS 市场上仍然很新……

正如主题标题所述，有没有人玩过 silverstripe 并使用其中一个用户定义的表单模块作为其核心 API 的一部分？

我想知道是否有人尝试成功修改模块以满足他们自己的自定义要求？

我觉得这方面的挑战是缺少代码示例或文档来了解用户定义的表单是如何工作的，以及我如何修改和操作其配置设置以达到我想要实现的目标？

有没有人可以在这方面提供帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:49:13.857

我用过这个模块。您希望进行哪些修改？您可以轻松地装饰或子类化模块的部分以添加自定义功能，而无需修改核心代码。

这里有一些文档可以让您深入了解 Decorator 选项。

[http://doc.silverstripe.org/sapphire/en/reference/dataobjectdecorator](http://doc.silverstripe.org/sapphire/en/reference/dataobjectdecorator)

但是，是的，让我们知道你想要做什么，我应该能够给你更详细的建议:)

鉴于您在下面的其他信息 -

为此使用 UDF 可能不值得，所需的工作不会比从头开始创建前端表单的更直接的选项更多或更少。[http://doc.silverstripe.org/sapphire/en/topics/forms](http://doc.silverstripe.org/sapphire/en/topics/forms)

但是，如果您想继续使用 UDF，则需要执行以下操作-

1) 扩展 UserDefinedForm 例如。CustomUserDefinedForm 将 UserDefinedForm 扩展为有一个额外的字段/dbfield，您可以在其中选择要映射到的 DataObject 的名称。

2) 装饰 EditableFormField 以具有一个额外的字段，将其映射到 DataObject 的适当字段。

3) 扩展 UserDefinedForm_Controller 例如。CustomUserDefinedForm_Controller 扩展了 UserDefinedForm_Controller 并覆盖了 'process' 方法。这是保存表单和发送电子邮件的地方。您需要添加代码以循环遍历字段并将它们保存到表单上指定的数据对象中。

# java - 使用画布播放视频

> ID：10184100
> 
> 赞同：0
> 
> 时间：2012-04-17T01:58:35.743
> 
> 标签：java, android

我正在android中开发实时视频壁纸应用程序，它将拍摄视频并将其设置为动态壁纸。但是，我不能使用 videoview，因为绘图仅在画布上完成，我不确定如何使用画布播放视频。

在这方面的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T04:29:15.363

You need to get the frames from video as byte array and display on canvas by converting this byte array as bitmap and call the following method.

```
canvas.drawbitmap(yourbitmap,0,0,null); 
```

More information can be had from the following link.

[http://developer.android.com/guide/topics/graphics/2d-graphics.html#frame-animation](http://developer.android.com/guide/topics/graphics/2d-graphics.html#frame-animation)

Hope this will help you.

# web-services - Silverlight 和 Web 服务

> ID：10184105
> 
> 赞同：1
> 
> 时间：2012-04-17T01:59:25.827
> 
> 标签：web-services, silverlight-4.0

我是 silverlight 新手，在连接 Web 服务时遇到问题：wsf.cdyne.com/WeatherWS/Weather.asmx。我不确定最简单的方法是什么，互联网上的每个教程都将我引向了一个新的方向。有人可以简单介绍一下我必须做些什么才能将 xml 数据导入我的 silverlight 项目吗？

非常感谢！

到目前为止，我的 silverlight 项目中引用了 Web 服务，并且：

```
public MainPage()
        {
            InitializeComponent();
            ServiceReference1.WeatherSoapClient service = new ServiceReference1.WeatherSoapClient();
            service.GetCityForecastByZIPCompleted += new EventHandler<ServiceReference1.GetCityForecastByZIPCompletedEventArgs>(service_GetCityForecastByZIPCompleted);

            service.GetCityForecastByZIPAsync("54481");
        }

        public void service_GetCityForecastByZIPCompleted(object sender, ServiceReference1.GetCityForecastByZIPCompletedEventArgs e)
        {
            MessageBox.Show("done: " + e.Result);
        } 
```

但 e.result 只返回“Lab_09.ServiceRe3ference1.ForecastReturn”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T13:48:24.863

您所有的 XML 数据都在`e.Result`. 您可以设置一个断点`e.Result`并探索 XML 响应。

例如，`MessageBox.Show(e.Result.City);`显示 Stevens Point。

同样，`MessageBox.Show(e.Result.ForecastResult[0].Temperatures.DaytimeHigh.ToString());`将显示第一`days(ForcastResult[0])`天的高点。

# file - 根据名称在终端中移动东西

> ID：10184112
> 
> 赞同：4
> 
> 时间：2012-04-17T02:00:22.367
> 
> 标签：file, bash, parsing, terminal, directory

编辑：我认为这已成功回答，但我不能检查'直到稍后。我已经按照建议重新格式化了它。

**问题**：我有一系列文件，每个文件都有一个 XXXXNAME 形式的名称，其中 XXXX 是一些数字。我想将它们全部移动到名为 XXXX 的单独文件夹中，并将它们命名为 NAME。我可以手动执行此操作，但我希望通过将它们命名为 XXXXNAME，我可以通过某种方式告诉终端（我认为这是正确的名称，但不太确定）将它们移动到那里。就像是

mv *NAME */NAME

但是在第一种情况下它需要任何 * 并将其反刍到路径。

这是在某种形式的 Linux 上，带有 bash shell。

在现实生活中，这些文件是 0000GNUmakefile，带有顺序编号。作为我研究的一部分，我必须制作许多类似但略有改动的程序版本，以便在集群上编译和运行。编写一个程序来编辑所有文件并首先放在正确的位置可能会更快，但我没有。

这可能非常简单，如果我知道正确的话，我应该能够自己找到答案。问题是，我没有受过正规的编程培训，所以我不知道该叫什么来搜索它们。所以希望这会让我得到答案，也许下次我自己知道如何找到类似事情的答案。有了我所掌握的基本编程，我确信我可以编写一个程序来为我做这件事，但我希望有一种简单的方法来做到这一点，只需使用终端中已有的功能。我可能不应该被允许玩这些东西。

谢谢你的帮助！我实际上可以用 C 和 Python 进行相当多的编程，但这主要是通过反复试验，我仍然不知道在终端中我能做什么和不能做什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T03:46:48.983

实现这一目标的方法有很多。

我发现旧的备用`sed`设备`awk`通常是最强大的。

```
ls | sed -rne 's:^([0-9]{4})(NAME)$:mv -iv & \1/\2:p' 
```

如果您对命令看起来正确感到满意，请通过 shell 传递命令行：

```
ls | sed -rne 's:^([0-9]{4})(NAME)$:mv -iv & \1/\2:p' | sh 
```

我将 NAME 放在括号中并使用`\2`它，以便如果它的变化超出您的示例所示，您可以提出一个正则表达式来更好地处理您的文件名。

在`gawk`（GNU awk，大多数 GNU/Linux 发行版中发现的变体）中做同样的事情：

```
ls | gawk '/^[0-9]{4}NAME$/ {printf("mv -iv %s %s/%s\n", $1, substr($0,0,4), substr($0,5))}' 
```

与第一个示例一样，这会生成命令，如果它们对您有意义，则可以通过附加`| sh`到行尾来通过 shell 进行管道传输。

请注意，对于所有这些`mv`命令，我​​添加了`-i`and`-v`选项。这是为了保护你。阅读手册页`mv`（通过`man mv`在您的 Linux 终端中输入），看看您是否应该愿意将它们排除在外。

另外，我假设您的所有目录都已经存在。你没有提到他们是否这样做。如果他们不这样做，这里有一个创建目录的方法。

```
ls | sed -rne 's:^([0-9]{4})(NAME)$:mkdir -p \1:p' | sort -u 
```

与其他人一样，追加`| sh`以运行命令。

我应该提一下，通常建议使用`for`（在 Tim 的回答中）之类的结构，或者`find`代替解析`ls`. 也就是说，当您的文件名格式`/[0-9]{4}word/`像`sed`.

最后，如果`NAME`您实际上是指“任何字符串”而不是文字字符串“NAME”，那么在我上面的所有示例中，替换`NAME`为`.*`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T03:06:53.507

以下脚本将为您执行此操作。将脚本复制到远程计算机上的文件中（我们将其称为 sortfiles.sh）。

```
#!/bin/bash

# Get all files in current directory having names XXXXsomename, where X is an integer
files=$(find . -name '[0-9][0-9][0-9][0-9]*')

# Build a list of the XXXX patterns found in the list of files
dirs=
for name in ${files}; do
  dirs="${dirs} $(echo ${name} | cut -c 3-6)"
done

# Remove redundant entries from the list of XXXX patterns
dirs=$(echo ${dirs} | uniq)

# Create any XXXX directories that are not already present
for name in ${dirs}; do
  if [[ ! -d ${name} ]]; then
    mkdir ${name}
  fi
done

# Move each of the XXXXsomename files to the appropriate directory
for name in ${files}; do
  mv ${name} $(echo ${name} | cut -c 3-6)
done

# Return from script with normal status
exit 0 
```

从命令行，执行`chmod +x sortfiles.sh`

执行脚本`./sortfiles.sh`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T03:25:02.513

只需打开终端应用程序，`cd`进入包含您要移动/重命名的文件的目录，然后将这些命令复制并粘贴到命令行中。

```
for file in [0-9][0-9][0-9][0-9]*; do
  dirName="${file%%*([^0-9])}"
  mkdir -p "$dirName"
  mv "$file" "$dirName/${file##*([0-9])}"
done 
```

这假定您要重命名和移动的所有文件都在同一个目录中。文件通配还假定文件名的开头至少有四位数字。如果数字超过四个，它仍然会被捕获，但如果少于四个则不会。如果少于四个，`[0-9]`则从第一行中删除适当数量的 s。

它不处理“NAME”（即您想要的新文件的名称）以数字开头的情况。

有关bash 中的字符串操作的更多信息，请参阅[此站点。](http://tldp.org/LDP/abs/html/string-manipulation.html)

# cocoa - 单击 NSTableCellView 中的 NSTextView 时如何在 NSTableView 中选择一行？

> ID：10184113
> 
> 赞同：5
> 
> 时间：2012-04-17T02:00:26.187
> 
> 标签：cocoa, nstableview, nstextview

我有一个基于视图的单列 NSTableView。在我的 NSTableCellView 子类中，我有一个可选择但不可编辑的 NSTextView。

当用户直接单击 NSTableCellView 时，该行会正确突出显示。但是当用户单击该 NSTableCellView 内的 NSTextView 时，该行不会突出显示。

如何获得对 NSTextView 的点击以传递给 NSTableCellView 以便该行突出显示？

类层次结构如下： NSScrollView > NSTableView > NSTableColumn > NSTableCellView > NSTextView

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T01:54:02.423

这就是我最终做的事情。我做了一个 NSTextView 的子类并覆盖了 mouseDown: 如下...

```
- (void)mouseDown:(NSEvent *)theEvent
{
    // Notify delegate that this text view was clicked and then
    // handled the click natively as well.
    [[self myTextViewDelegate] didClickMyTextView:self];
    [super mouseDown:theEvent];
} 
```

我正在重用 NSTextView 的标准委托...

```
- (id<MyTextViewDelegate>)myTextViewDelegate
{
    // See the following for info on formal protocols:
    // stackoverflow.com/questions/4635845/how-to-add-a-method-to-an-existing-protocol-in-cocoa
    if ([self.delegate conformsToProtocol:@protocol(MyTextViewDelegate)]) {
        return (id<MyTextViewDelegate>)self.delegate;
    }
    return nil;
} 
```

在标题中...

```
@protocol MyTextViewDelegate <NSTextViewDelegate>
- (void)didClickMyTextView:(id)sender;
@end 
```

在委托中，我实现了 didClickMyTextView: 来选择行。

```
- (void)didClickMyTextView:(id)sender
{
    // User clicked a text view. Select its underlying row.
    [self.tableView selectRowIndexes:[NSIndexSet indexSetWithIndex:[self.tableView rowForView:sender]] byExtendingSelection:NO];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-26T00:48:53.103

或者，使用 NSTextField，然后，

```
textfield.bezeled = NO;
textfield.drawsBackground = NO;
textfield.editable = NO;
textfield.selectable = YES;
[textfield setRefusesFirstResponder: YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T04:15:32.763

我认为您基本上遇到了与我在这里遇到的问题相同的问题：[将事件传递到](https://stackoverflow.com/questions/6296998/how-to-pass-scroll-events-to-parent-nsscrollview). 请参阅已接受的答案。

按照相同的模式，您将继承 NSTextView 并覆盖`- (void)mouseUp:(NSEvent *)theEvent`以将事件传递给 superView，我假设它是 tableView：

```
- (void)mouseUp:(NSEvent *)theEvent {
    [superView mouseUp:theEvent]; 
} 
```

# javascript - 将 youtube、stackoverflow 或 facebook 主页加载到 iframe 标记时出错

> ID：10184116
> 
> 赞同：0
> 
> 时间：2012-04-17T02:01:16.937
> 
> 标签：javascript, html

当我尝试使用以下代码将 facebook 或您的 youtube 加载到 iframe 标签中时，什么也没有发生。页面未加载到 iframe 标记中，此问题出现在 youtube、stackoverflow 和 facebook 等多个网站上

代码：

```
 <head>
        <title>HTML Test</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        </head>

        <body>

        <p>Below is an iframe.</p>
        <iframe src="http://www.youtube.com/" width="400" height="150">
         <p>iframes are not supported by your browser.</p>
        </iframe>

        </body>
        </html> 
```

请有任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T02:13:27.143

我尝试过这个

[http://jsfiddle.net/KPk6n/1](http://jsfiddle.net/KPk6n/1)

看着控制台，我明白了

> X-Frame-Options 禁止显示

所以我认为那些网站不允许框架，可能有一个解决方法，但我想说你应该尊重它们而不是框架它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T02:11:47.237

您所说的网站可能会禁用 iFrame 的访问。

我的网站在这个例子中工作得很好：http: [//jsfiddle.net/3vxvm/](http://jsfiddle.net/3vxvm/)

# actionscript-3 - AS3：是否可以创建一个变量来保存实例名称？

> ID：10184117
> 
> 赞同：0
> 
> 时间：2012-04-17T02:01:36.860
> 
> 标签：actionscript-3, flash

我试图拥有一个更动态的函数，并希望允许函数实例名称输出文本是可变的。

例如

```
function example_function(url,instance_name){
      instance_name.text = url;
}

example_function('www.example.com','url_txt');
example_function('www.another.com','more_txt'); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T02:07:34.223

是的，只需将字符串解析到实例所有者旁边的方括号中。例如：

```
this[instance_name].text = url; 
```

更多信息：

拿这个对象：

```
var obj:Object = {
    property1: 10,
    property2: "hello"
}; 
```

它的属性可以像你期望的那样访问：

```
obj.property1;
obj.property2; 
```

或者如上所述：

```
obj["property1"];
obj["property2"]; 
```

我建议使用我创建的这样的函数来收紧你的代码：

```
function selectProperty(owner:*, property:String):*
{
    if(owner.hasOwnProperty(property)) return owner[property];
    else throw new Error(owner + " does not have a property \"" + property + "\".");

    return null;
}

trace(selectProperty(stage, "x")); // 0
trace(selectProperty(stage, "test")); // error 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T02:13:04.343

这绝对是可能的，但使用这样的字符串并不是真正的最佳实践。相反，您可以传入对您尝试修改的变量的引用。

```
function example_function(url : String, instance : TextField) : void {
    instance.text = url;
}

example_function("www.example.com", url_txt); 
```

这为您提供了强类型，因此您可以在编译时判断您是否在 TextField 上进行操作。如果你不是，你会得到一个错误，因为 'text' 属性不存在。通过这种方式，您将能够更快地发现和追踪错误。

但是，如果您必须使用字符串执行此操作，则可以使用字符串键访问任何对象上的任何属性，例如：

```
var myInstance = this[instance_name] 
```

所以在你的例子中，你可以这样做：

```
function example_function(url : String, instance : TextField) : void {
    this[instance_name].text = url;
}

example_function("www.example.com", "url_txt"); 
```

# mysql - 在 MySQL 查询中需要帮助 - GROUP BY

> ID：10184124
> 
> 赞同：1
> 
> 时间：2012-04-17T02:02:42.420
> 
> 标签：mysql, sql, aggregate-functions

我需要帮助来为我的数据库创建查询。

我有2张桌子，

**资产**包括（主机名、所有者、工程师、日期、分支）

**由 (id, name, address, region) 组成的**分支****

 **branch.id 是连接到asset.branch 的主键，显然是外键。

我想创建一个查询来显示分支信息（id、名称、地址、区域）和该分支中的资产数量。

我试过这个查询：

```
SELECT b.id, b.name, b.address, b.xcor, b.ycor, b.status, 
  COUNT(a.hostname) AS noofasset
FROM branch b, asset a 
WHERE a.branch = b.id
GROUP BY b.id; 
```

它一目了然，但无法显示其中没有资产的分支信息。我需要一个查询，该查询还显示具有 0 资产的分支。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T02:05:27.253

```
SELECT b.id, b.name, b.address, b.xcor, b.ycor, b.status, 
  COUNT(a.hostname) AS noofasset
FROM branch b
LEFT JOIN  asset a 
  on a.branch = b.id
GROUP BY b.id, b.name, b.address, b.xcor, b.ycor, b.status 
```

左连接表示包括所有分支，无论资产是否存在。

这个[网站](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)在视觉上解释了左、右外全和连接类型。我喜欢它：D

使用您更熟悉的语法（我认为）

```
SELECT b.id, b.name, b.address, b.xcor, b.ycor, b.status, 
  COUNT(a.hostname) AS noofasset
FROM branch b, asset a 
WHERE a.branch(+) = b.id
GROUP BY b.id; 
```**

# c - 堆的交换功能似乎很奇怪

> ID：10184128
> 
> 赞同：1
> 
> 时间：2012-04-17T02:03:53.493
> 
> 标签：c

哟。我有这个非常简单的交换功能，似乎不起作用。可能是一个指针问题，所以任何建议都会很好。

```
void swap(pQueue *h, int index1, int index2) {
  student *temp = &h->heaparray[index1];
  h->heaparray[index1] = h->heaparray[index2];
  h->heaparray[index2] = *temp;    
} 
```

`pQueue`是一个堆指针，`index1`并且`index2`保证是有效的索引。

`student *temp`确实得到了的值，`heaparray[index1]`但是当`heaparray[index2]`被分配临时值时，`heaparray[index2]`保持不变。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T02:37:07.473

您需要将`h->heaparray[index1]`（不是其地址）的实际值复制到`temp`，然后将该值复制到`h->heaparray[index2]`中，如下所示：

```
void swap(pQueue *h, int index1, int index2) {
  student temp = h->heaparray[index1];
  h->heaparray[index1] = h->heaparray[index2];
  h->heaparray[index2] = temp;    
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T02:05:28.253

`*temp`没有得到 的值`heaparray[index1]`，它得到了它的地址。

# php - 如何获得从数据库中检索到的图像的固定尺寸？

> ID：10184133
> 
> 赞同：1
> 
> 时间：2012-04-17T02:04:22.863
> 
> 标签：php, html, css

我正在使用 PHP 和 MYSQL 从我的数据库中获取图像和其他文本信息以显示在我的页面上。这工作正常。问题是存储在数据库中的图片大小不同。所以我应用了一些 HTML 和 CSS 来获得固定大小的图片以显示在我的页面上。不幸的是，这不起作用。这是我的代码：

**HTML：**

```
 <table>
    <tr>
      <td><b>The title</b></td>
    </tr>
    <tr>
      <td class="foto_style"><img src="http:/mypage.com/pictures/mypic.png" /></td>
    </tr>
  </table> 
```

**CSS：**

```
 .foto_style{width: 50px; height:50px;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T02:07:14.770

将您的 CSS 更改为：

```
.foto_style img {
  width: 50px; 
  height:50px;
}​ 
```

# algorithm - 根据某些选择标准在树中查找节点

> ID：10184138
> 
> 赞同：0
> 
> 时间：2012-04-17T02:04:50.857
> 
> 标签：algorithm

```
 [BASE]
                 / \  \
                C1  C2 C3
                /\       \
               C4 C5      C6 
```

我有一棵像上面这样的树。这是一个不平衡的 N 子树。问题是，我需要根据某些条件选择其中一个节点。像

```
Select C1 when k1 = a
Select C4 when K1 = a and K2=b and K3=C
Select C5 when k1 = a and k'=z

Select C2 when K'' = b
Select C3 when k5 = 9
Select C6 when k5=9 and k6 = 10 
```

程序的输入将是键值对的任意长度，例如如果输入是`k1=a,k2=b,k3=c,k8=10` - 我应该选择`C4`，因为这是最佳匹配。

理想情况下，我正在考虑遍历树，并且对于每个节点，都有一个可以与输入集匹配的选择标准。但很快我就发现，这棵树可能非常大，Base 节点下可以有数以万计的子节点。因此，逐节点进行可能不是一个好主意。如果有办法更有效地选择节点，我很想知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:13:33.257

看起来您的 k 指向目录结构，并且该结构的叶子（每个目录正好有一个叶子）是您要查找的节点。您可以将此字符串作为另一个值保存在节点中。尚不清楚的问题是 k 与树的关系如何，例如

```
a->c1
a/b/c->c4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:19:37.117

我找到了一个像这样的可行解决方案

```
----------------------------------------
|rowId|param1|param2|param3|param4|node|
----------------------------------------
|10   | a   |      |      |      | C1  |
----------------------------------------
|14   | a   | b    |  c   |      | C4  |
----------------------------------------
|18   | a   | b    |      |      | C5  |
---------------------------------------- 
```

让我们称之为条件表。每列代表输入序列 (k)，对于值的不同组合，有一个要选择的节点。该表可以认为是内存数据结构或 RDBMS 中的真实表。

# php - 图片上传不起作用

> ID：10184141
> 
> 赞同：1
> 
> 时间：2012-04-17T02:04:53.333
> 
> 标签：php, mysql, html, file-upload

我真的很想得到你的帮助。我认为自己是一名中级 PHP 程序员，但我以前从未使用过文件上传。我被这个问题困扰了很长时间。这是我的代码的简化版本，我 99% 确定错误出在此处。输出始终是“该文件不是图像文件”。

这是我的 HTML...

```
<form action="upload.php" method="post" enctype="multipart/form-data">
<input type="file" id ="partyPic"><br/>
<button  type="button" onClick="uploadFile()">upload</button>
</form> 
```

这是我的PHP...

```
$image = $_FILES['image']['tmp_name'];

if (!isset($image)){

  //Create default image.

}else{

$image =  mysql_real_escape_string(file_get_contents($_FILES['image']['tmp_name']));
$name = mysql_real_escape_string($_FILES['image']['name']);
$image_size = getimagesize($_FILES['image']['tmp_name']);
}

if($image_size == FALSE){
echo 'The file wasn\'t an image file.';
}else{
//I have code that successfully uploads stuff to my database.
} 
```

如果您能提供帮助，将不胜感激。

谢谢你，瑞克瑞恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T02:33:18.177

[从http://www.php.net/manual/en/features.file-upload.post-method.php](http://www.php.net/manual/en/features.file-upload.post-method.php)上传示例：

**基本形式：**

```
<!-- The data encoding type, enctype, MUST be specified as below -->
<form enctype="multipart/form-data" action="__URL__" method="POST">
    <!-- MAX_FILE_SIZE must precede the file input field -->
    <input type="hidden" name="MAX_FILE_SIZE" value="30000" />
    <!-- Name of input element determines name in $_FILES array -->
    Send this file: <input name="userfile" type="file" />
    <input type="submit" value="Send File" />
</form> 
```

**PHP：**

```
<?php

$uploaddir = '/var/www/uploads/';
$uploadfile = $uploaddir . basename($_FILES['userfile']['name']);

echo '<pre>';
if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {
    echo "File is valid, and was successfully uploaded.\n";
} else {
    echo "Possible file upload attack!\n";
}

echo 'Here is some more debugging info:';
print_r($_FILES);

print "</pre>";

?> 
```

手册中的示例。

**所以你应该建立这样的东西：**

```
<form enctype="multipart/form-data" action="upload.php" method="POST">
    <input type="hidden" name="MAX_FILE_SIZE" value="30000" />
    Send this file: <input name="userfile" type="file" />
    <input type="submit" value="Send File" />
</form> 

<?php
if($_SERVER['REQUEST_METHOD'] == 'POST' && $_FILES['userfile']['error'] == 'UPLOAD_ERR_OK'){
    $uploaddir = '/var/www/uploads/';
    $uploadfile = $uploaddir . basename($_FILES['userfile']['name']);
    list($width, $height, $type, $attr) = getimagesize($_FILES['userfile']['tmp_name']);

    if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {
        echo "File was successfully uploaded.\n";
        ... Do Database stuff
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T02:07:55.250

您的文件输入 id 是`partyPic`. 你应该使用`$_FILES['partyPic']`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T04:08:57.287

试试这个：

```
<form action="upload.php" method="post" enctype="multipart/form-data">
<input type="file" name ="image" id="partyPic"><br/>
<button  type="button" onClick="uploadFile()">upload</button>
</form> 
```

# facebook-javascript-sdk - FQL 查询返回不一致的结果

> ID：10184142
> 
> 赞同：0
> 
> 时间：2012-04-17T02:05:00.487
> 
> 标签：facebook-javascript-sdk, facebook-fql

我有以下 FQL 查询：

```
var comment_query  = "SELECT link_id, owner, owner_comment, title, summary, url, created_time FROM link WHERE owner=me() AND url='"+url+"'",
    like_query     = 'SELECT uid, page_id, type FROM page_fan WHERE uid = me() AND page_id='+pageId,
    likes          = FB.Data.query(like_query),
    comments       = FB.Data.query(comment_query);
FB.Data.waitOn([likes,comments],function(result) {
  ...
}); 
```

结果在某些浏览器和计算机上间歇性地为空。

作为初步测试，我在同一个房间里有两台电脑。两者都使用相同的 Facebook 帐户，都运行 Windows 7，都在最新版本的 Firefox 上，都以安全模式启动 Firefox，都已清除缓存。

一台计算机返回结果，另一台始终为空。

我发现唯一会触发返回结果（如果浏览器返回空结果）是将页面放入[Facebook debugger](http://developers.facebook.com/tools/debug)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T21:42:37.033

是否总是同一台计算机不接收数据？Firefox 安全模式不会以某种方式影响结果的可访问性吗？无论如何，从同一个帐户中背靠背检索数据是否存在一些锁定？例如，登录了相同的 FB 帐户并且 ACTIVE 可能会被视为非法机器人进行数据检索？只是抛出想法。当您尝试使用不同的 Facebook 帐户访问页面时会发生什么？如果两者都正常，则表示FB阻止了您使用一个帐户访问页面的源的频繁更改。否则，这意味着一台计算机的浏览器有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:05:59.587

一直没有找到确切的原因。

访问令牌有效。

帐户或权限之间没有牢固的联系。浏览器/计算机之间的结果不一致 - 对于某些人来说它总是可以工作，而对于其他人来说它永远不会。对于某些人来说，它开始工作，然后在以后失败了。

最后决定跳过查询，直接[打开一个对话框](http://developers.facebook.com/docs/reference/dialogs/feed/)。

# c# - 多维列表 C#

> ID：10184145
> 
> 赞同：4
> 
> 时间：2012-04-17T02:05:22.463
> 
> 标签：c#, arrays, list, multidimensional-array

我需要创建一个多维守卫 List 三个值，X、Y 和 Z，而我需要一个 List 是因为一旦查询到该值，就必须删除该数组。

查询看起来像这样：List [0] [0] = X, List [0] [a] = Y and List [0] [2] = X，这样我就可以只删除索引 0 而他已经删除所有其他三个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T02:13:00.483

如果您需要创建一个多维列表，您可以随时创建一个列表列表，如下所示：

```
var multiDimensionalList = new List<List<string>>{
    new List<string>{"A","B","C"},
    new List<string>{"D","E","F"},
    new List<string>{"G","H","I"},
};
Console.WriteLine(multiDimensionalList[2][1]); // Prints H

multiDimensionalList[2].RemoveAt(1);
Console.WriteLine(multiDimensionalList[2][1]); // Prints I

multiDimensionalList[2][1] = "Q";
Console.WriteLine(multiDimensionalList[2][1]); // Prints Q 
```

请注意，尝试通过赋值替换不存在的值会引发异常：

```
multiDimensionalList[2][5] = "R"; // Throws an ArgumentOutOfRangeException 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T02:12:01.550

您的问题很难理解，但也许您正在寻找的可以通过数组数组来完成？无论如何，这就是在某些语言中实现多维数组的方式。

在您的情况下，您可能正在使用列表列表：List>。这将满足您通过删除外部 List<> 对象中的第一个元素来删除“所有其他三个”的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T02:12:02.243

很抱歉，您的问题有点难以理解，但我会尝试一下。请不要互换 Array 和 List 这两个词，因为它们在 C# 中是不同但相关的概念。我相信您的意思是使用 [] 括号的数组。尽管您可能需要考虑使用列表，因为它们有一种很好的方法可以通过使用元素从列表中删除某些元素。MSDN 有一些关于如何进行的很好的信息。 [List(T).Remove 方法](http://msdn.microsoft.com/en-us/library/cd666k3e.aspx)

该列表将自行重组以根据需要删除或添加元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T02:32:55.013

我不确定我是否遵循您的逻辑，因为您同时使用字符串和整数作为第二个索引器，并且引用`X`了两次，但不是`Z`. 假设这些是拼写错误，我将猜测您想要什么。

您是否考虑过具有`X`、`Y`、 AND`Z`属性的自定义类型和索引器来为您提供所描述的行为：

您也没有提及您的值是什么类型，所以我正在使用`object`，但请随意替换您自己的类型（或泛型类型）

```
public class MyType
{
    private object[] backingArray = new object[3];
    public object this[int index]
    {
        get { return backingArray[index]; }
        set { backingArray[index] = value; }
    }

    public object X 
    {
        get { return backingArray[0]; }
        set { backingArray[0] = value; }
    }
    public object Y
    {
        get { return backingArray[1]; }
        set { backingArray[1] = value; }
    }
    public object Z 
    {
        get { return backingArray[2]; }
        set { backingArray[2] = value; }
    }
} 
```

* * *

然后你可以像这样使用它：

```
List<MyType> list = new List<MyType>();
list = PopulateList();  // fill list with values

var x = list[0][0];
var y = list[0][1];
var z = list[0][2]; 
```

当然，这个实现取决于你的第二维总是由 3 个元素组成。如果它不一致，那么其他答案之一将满足您的需求。

# ruby - 为什么 to_a 和 to_ary 在 Array 的子类中表现不同？

> ID：10184148
> 
> 赞同：5
> 
> 时间：2012-04-17T02:05:33.393
> 
> 标签：ruby, duck-typing

如果您有 Array 的子类 X，则doing`X#to_a`返回一个数组对象，而doing`X#to_ary`返回一个x 对象。

虽然我理解这`to_a`意味着“我可以变成一个数组”，而`to_ary`意味着“我的行为就像一个数组”，但我不明白为什么前者实现了类的改变而后者没有。

`to_a`此外，根据 Liskov 替换原则，返回 Array 的子类是否足够？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T02:45:33.860

“因为这就是它的定义方式”足够了吗？

> ### [`to_a`](http://ruby-doc.org/core-1.9.3/Array.html#method-i-to_a)
> 
> 退货`self`。如果在 的子类上调用`Array`，则将接收者转换为`Array`对象。

> ### [`to_ary`](http://ruby-doc.org/core-1.9.3/Array.html#method-i-to_ary)
> 
> 退货`self`。

可能不是，所以我们在这里进入兔子洞。

除了文档明确指出它就是这样的事实之外，推理可能只有 Matz 等人才能真正回答。

尽管似乎[`to_ary`在发生隐式类型转换时使用](http://ruby.runpaint.org/variables#fn-3)了它。它对隐式转换的使用似乎也反映在[此功能请求](http://bugs.ruby-lang.org/issues/4917)中。换句话说，如果一个对象响应`to_ary`，那么它应该被视为一个`Array`，并且它在内部以这种方式使用。因此`to_a`，当您（明确地）想要一个`Array`而不是某个子类时。

是的，返回一个子类仍然会满足 LSP（假设子类不决定从根本上改变`Array`它不会的行为），但该原则仅说明一个子类*可以*替换它的基类，而不是它需要是。不过，无论如何，我不确定这是否重要，因为您正在调用`to_a`您的明确要求不同的对象（与上面有关隐式转换的推理一起使用），因此您说您不想要替代品对象类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T04:31:00.880

As a general rule, the implicit conversions are automatically called by the interpreter, and they are intended to only convert things that are very much like the type that was required but not found.

The *explicit* conversions, however, can be called on disparate types as long as there is some way to get from point a to point b, even if that involves some sort of polar route or a detour.

So you simply have more freedom for a leap with to_a, but I agree that it seems like *X* should be good enough.

# c# - 使用多个子文件夹中的文件填充 datagridview

> ID：10184151
> 
> 赞同：0
> 
> 时间：2012-04-17T02:05:48.643
> 
> 标签：c#, recursion, datagridview, filesystems

`datagridview`在尝试用简单文件填充我的过程中，我遇到了一个设计问题。

我已经在我的`Settings`文件中声明了一个主目录。我需要`datagridview`在 7 个子文件夹中搜索这个父目录。每个子文件夹都有一堆子文件夹（我正在管理的机器的名称）。其中每一个都包含我需要添加到网格中的文件。

例子：

`C:\Users\me\Documents\MASTERDIRECTORY\Folder7\Machine Name1\file.txt`

`C:\Users\me\Documents\MASTERDIRECTORY\Folder7\Machine Name2\file.txt`

显然需要某种递归代码来执行搜索，但我应该如何开始呢？性能方面，我应该将这些文件路径添加到数组列表中，然后将其转换为我的网格吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:06:05.610

这样的事情可能会有所帮助：-

```
string filePath = @"C:\Users\me\Documents\MASTERDIRECTORY\Folder7"

                foreach (string Folder in Directory.GetDirectories(filePath))
                {

                  foreach (string file in Directory.GetFiles(Folder))
                     {
                       // here you can grab the log file path and add it to you Gridview
                     }

                } 
```

# c# - foreach 循环中的 Orderby 日期时间查询

> ID：10184152
> 
> 赞同：0
> 
> 时间：2012-04-17T02:05:48.747
> 
> 标签：c#, linq

嗨，我有一个休息服务，其中有一个学生列表，每个学生都有一个附加到创建的日期时间。

在我的客户端，我想在这个日期时间之前从最新开始订购，在我的客户端，代码如下所示：

```
 public FindStudent()
    {
        InitializeComponent();
        string uriGroups = "http://localhost:8000/Service/Student";
        XDocument xDoc = XDocument.Load(uriGroups); 
```

它列出了第一次创建的学生，我想了一会儿我可以在 orderby 查询中添加到 foreach var 节点，但我认为这行不通，无论如何我可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T03:19:15.563

为了根据日期和时间对某些内容进行排序，您需要在 for-each 循环中将其转换为日期和时间，您只需遍历从 xml 文档中获取的纯文本，它不会被排序，因为它是文本，但您可以创建带有变量的学生类 `Studentid, FirstName LastName" TimeAdded TimeAdded`再次遍历文档，将所有信息写入对象学生将每个对象添加到列表中，按照您想要的方式对列表进行排序，然后我认为它应该按照您想要的顺序显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T03:24:59.743

您可以按如下方式使用 Linq to XML

```
var temp = from feed in xDoc.Descendants("Students")
orderby Convert.ToDateTime(feed.Element("CreatDate").Value) descending
select new Student
{
    ID = Convert.ToInt32(feed.Element("ID").Value),
    //rest of the properties
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:08:32.980

```
XDocument xDoc = XDocument.Load(uriGroups); 
var sortedXdoc = xDoc.Descendants("Student")
               .OrderByDescending(x => Convert.ToDateTime(x.Element("TimeAdded").Value)); 
```

# javascript - 控制 JSON 在 Windows Phone WebBrowser (IE) 中未定义

> ID：10184154
> 
> 赞同：1
> 
> 时间：2012-04-17T02:06:02.127
> 
> 标签：javascript, json, internet-explorer, windows-phone-7, webbrowser-control

我目前正在使用 WebBrowser 控件在 Windows Phone 7 上构建应用程序。WebBrowser 被导航到一个 URL，但我也将我自己的 javascript 注入到控件中。

然而，似乎在其他平台上运行良好的代码（Android 和 iOS 的 WebView）似乎在 WebBrowser 中不起作用：

```
function parseToString(outObject)
{
    var outJSON = null;
    try{
        if(outObject != null){
            outJSON = JSON.stringify(outObject);
        }
    }
    catch(err)
    {
        outJSON = err.message;
    }
    window.external.Notify(outJSON);
} 
```

我发现在 try 块中抛出了“控制 JSON 未定义”。

有人可以推荐一种在 WebBrowser/IE 中对 JSON 进行字符串化的替代方法吗？此外，我不能使用外部库，因为这些 javascripts 被注入到 WebBrowser 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:34:33.353

WP7 浏览器不提供`JSON`对象，因此您需要使用第三方库才能将对象转换为 JSON 字符串。我过去使用过这两种方法：

*   [Douglas Crockford 的 JSON 库](https://github.com/douglascrockford/JSON-js)。
*   [knockoutJS toJSON](http://knockoutjs.com/documentation/json-data.html)函数。

请参阅此相关问题：

[在 jQuery 中序列化为 JSON](https://stackoverflow.com/questions/191881/serializing-to-json-in-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:48:35.387

我遇到了同样的问题，但随后在 HTML 文档的顶部添加了以下内容：

```
<!DOCTYPE html> 
```

不幸的是，如果您无权访问 HTML 文档并且只注入 JavaScript，这将无济于事，但有人可能会发现它很有用。

# java - jQuery Ajax/码头；Chrome javascript 控制台显示来自服务器响应的“未捕获的语法错误：意外的标识符”

> ID：10184155
> 
> 赞同：0
> 
> 时间：2012-04-17T02:06:02.593
> 
> 标签：java, jquery, ajax, jetty

我正在尝试让 jQuery 移动应用程序从我在另一台计算机上运行的服务器读取数据。当我加载页面时，我收到“加载数据时出错”。消息而不是我的“Hello World”

元素。在 Chrome 的 JavaScript 控制台中，我被告知在我的服务器的“Hello World”响应中有“Uncaught SyntaxError: Unexpected identifier”。

我被卡住了，有什么建议吗？我的 js 和我的 Jetty 服务器的代码粘贴在下面：

这是我的 JavaScript/jQuery：

```
<script>

$.ajax({
    url: 'redacted-my computer's ip',
    dataType: 'jsonp',

    timeout: 5000,
    success: function(data, status){
        $("p").html(data);
        }
    ,
    error: function(){
        $("p").html('There was an error loading the data.');
    }
});

</script> 
```

这是我的Java代码：

```
public class HelloServlet extends HttpServlet{
private String greeting="Hello World";
public HelloServlet(){}
public HelloServlet(String greeting)
{
    this.greeting=greeting;
}
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
{
    response.setContentType("text/plain");
    response.setStatus(HttpServletResponse.SC_OK);
    response.getWriter().println(greeting);

}
/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    // TODO code application logic here
    Server server = new Server(8082);
    HelloServlet helloServ = new HelloServlet();

    ServletContextHandler context = new ServletContextHandler(ServletContextHandler.SESSIONS);
    context.setContextPath("/");
    server.setHandler(context);

    context.addServlet(new ServletHolder(helloServ), "/*");

    try {
        server.start();
    } catch (Exception ex) {
        Logger.getLogger(HelloServlet.class.getName()).log(Level.SEVERE, null, ex);
    }
    try {
        server.join();
    } catch (InterruptedException ex) {
        Logger.getLogger(HelloServlet.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T02:21:44.727

“Hello World”不是 jsonp 格式，这可能是导致错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T16:49:01.043

了解到要真正获得“Hello World”消息以正确显示跨浏览器，我需要在我的完整函数中访问 data.ResponseText

# powershell - powershell中的.replace和-replace有什么区别？

> ID：10184156
> 
> 赞同：24
> 
> 时间：2012-04-17T02:06:05.360
> 
> 标签：powershell, methods, replace

我的印象是 .replace 和 -replace 是完全相同的东西，但是我发现我无法用 .replace 完成一些 RegEx 任务，而我可以用 -replace 完成。有人可以指出我缺少什么吗？

```
Broken Regex replace:
$a=$a.Replace('.:\\LOGROOT\\', "\\$env:computername\logroot\")

Working Regex replace:
$a=$a -Replace('.:\\LOGROOT\\', "\\$env:computername\logroot\") 
```

ps：下面的 URL 让我认为有 .replace 选项我不熟悉，但我似乎找不到任何关于如何使用它们的附加信息，或者如何访问这些选项的帮助。[http://www.computerperformance.co.uk/powershell/powershell_regex.htm](http://www.computerperformance.co.uk/powershell/powershell_regex.htm) Regex.Replace(String, String, String, RegexOptions) 以及：Regex.Replace(String, String, MatchEvaluator, RegexOptions) 方法。

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-17T04:49:53.503

`Replace`虽然@Keith Hill 的回答解释了方法和运算符之间的区别`-replace`，但解释了为什么您可能看不到相同的结果，这是因为您使用的`String.Replace`是字符串替换的方法，而`-replace`运算符使用正则表达式替换。您可以为此目的使用[Regex.Replace方法，您应该会看到相同的效果：](http://msdn.microsoft.com/en-us/library/e7f5w83z.aspx)

```
[regex]::replace($a,'.:\\LOGROOT\\', "\\$env:computername\logroot\") 
```

简而言之，`-replace`运算符与`Regex.Replace`（上面链接的特定重载）相同，但通常`Replace()`可以是实例或静态方法，可以做任何与`-replace`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-17T02:57:34.070

它们不是同一件事。`.Replace`是 System.String 或任何其他类型上的 .NET 方法，其实例方法名为`Replace`. `-replace`是一个使用正则表达式的 PowerShell 运算符。运行`man about_operators`以查看有关`-replace`操作员的更多信息。

# android - onResume 中的 Android 服务 mBoundService null

> ID：10184159
> 
> 赞同：1
> 
> 时间：2012-04-17T02:06:52.977
> 
> 标签：android, service

我正在使用[此处](http://developer.android.com/reference/android/app/Service.html#LocalServiceSample)解释的 android 服务。我正在打电话并试图`doBindService()`在. 这是我遇到问题的地方。此时，仍然为空，大概是因为还没有被调用。`onCreate()``mBoundservice``onResume()``mBoundService``mConnection.onServiceConnected()`

有没有办法可以调用`mBoundService`in 的方法`onResume()`，或者当时没有办法解决它为 null 的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:15:30.480

[官方开发指南](http://developer.android.com/guide/topics/fundamentals/bound-services.html#Basics)中没有明确说明bindService() 实际上是一个异步调用：

> 客户端可以通过调用 bindService() 绑定到服务。当它这样做时，它必须提供一个 ServiceConnection 的实现，它监视与服务的连接。bindService() 方法不带值立即返回，但是当 Android 系统在客户端和服务之间建立连接时，它会在 ServiceConnection 上调用 onServiceConnected() 来传递客户端可以用来与服务通信的 IBinder。

在调用 bindService() 之后和系统准备/实例化一个可用的服务实例（非 NULL）并将其交回 ServiceConnection.onServiceConnected() 回调之前有一个滞后（虽然是瞬时的，但仍然是一个滞后）。onCreate() 和 onResume() 之间的时间间隔太短，无法克服延迟（如果活动第一次打开）。

假设你想在 onResume() 中调用 mBoundservice.foo()，一个常见的解决方法是在第一次创建活动时在 onServiceConnected() 回调中调用它，并设置一个布尔状态，并且在 onResume() 方法中，只有当设置状态，以有条件地控制代码执行，即根据[不同的 Activity 生命周期](http://developer.android.com/guide/topics/fundamentals/activities.html#ImplementingLifecycleCallbacks)调用 mBoundservice.foo() ：

```
LocalService mBoundservice = null;
boolean mBound = false;

... ...

private ServiceConnection mConnection = new ServiceConnection() {
  @Override
  public void onServiceConnected(ComponentName className, IBinder service) {
    LocalBinder binder = (LocalBinder) service;
    mBoundservice = binder.getService();
    mBound = true;
    // when activity is first created:
    mBoundservice.foo();
  }

  ... ...
};

... ...

@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  // call bindService here:
  doBindService();
}

@Override
protected void onResume() {
  super.onResume();
  // when activity is resumed:
  // mBound will not be ready if Activity is first created, in this case use onServiceConnected() callback perform service call.
  if (mBound) // <- or simply check if (mBoundservice != null)
    mBoundservice.foo();
}

... ... 
```

希望这可以帮助。

# backbone.js - Backbone：从未渲染过的视图有什么意义？

> ID：10184165
> 
> 赞同：0
> 
> 时间：2012-04-17T02:07:43.517
> 
> 标签：backbone.js

我正在尝试结合文档从其他人的 Backbone 应用程序中学习 Backbone。有两件事我不明白，我无法从文档中弄清楚。希望有人能解释一下...

**该应用程序的要点** 这是一个应用程序，您可以在其中将公司名称拖放到框中。

该应用程序具有公司视图、公司模型和公司集合。

它还有一个 Bucket View、一个 Bucket Model 和 Buckets Collection

它还有一个不与任何模型关联的通用 App View。

问题...

**首先-永远不会渲染视图是否很奇怪？**

App View 是这样实例化的

```
window.App = new AppView(); 
```

它会在应用程序中进行不同的操作（使用公司名称等填充存储桶并设置一些事件）。但是，App View 永远不会被渲染。另一方面，Bucket View 和 Company View 都在代码中的不同点呈现。例如，

```
 var view = new BucketView({model: bucket});
  this.$("#bucket-list").append(view.render().el); 
```

但从来没有那个应用程序视图。这个 App View 也没有渲染功能。那么它有一个从未渲染过的视图是不是很奇怪？它的代码应该在其他地方吗？

**第二**考虑到 App 视图永远不会被渲染，他们有什么理由必须将默认设置更改为`el`布局中主容器 div 的名称？例如，在 App 视图中，他们这样做......

```
el: $("#mainapp"), 
```

但是，如果此视图从未呈现，是否有任何理由更改默认设置`el`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T02:45:35.467

当您正常创建 Backbone.View 实例时，它会立即`el`为您生成一个视图。这用作视图将管理的所有 HTML 的占位符，并且您通常`el`在 render 方法中使用 HTML 填充视图，正如您已经指出的那样。

但是，在某些情况下，您不想呈现一组全新的 HTML 元素。相反，您需要管理一些已经是 DOM 一部分的现有 HTML。在这种情况下，您可以通过在构造函数中指定 ，轻松地将主干视图附加到现有 DOM 元素`el`，如您在该`el: $("#mainapp")`行中所示。

当一个 Backbone 视图看到它已经有一个`el`时，它不会生成它自己的。相反，它使用它所传递的东西。

So, to directly answer your two questions:

### 1) First- Is it weird that a view would never be rendered?

No, because ...

### 2) if this view's never rendered, is there any reason to change the default setting of el?

The question is slightly off in a manner that that can't be directly answered. In reality, the view is never rendered *because* they are setting the `el` in the call to the constructor.

# verilog - 匹配流中字节的正确方法？-verilog

> ID：10184166
> 
> 赞同：1
> 
> 时间：2012-04-17T02:07:50.233
> 
> 标签：verilog

我对硬件设计相当陌生，我不确定如何解决这个问题。我正在使用一个 64 位宽的流，它也有包结束和包开始信号。我需要在 SOP 的偏移处找到一个特定的字节序列。目标是将流传递给另一个模块，并且每次声明 SOP 时，一个匹配信号将告诉下一个模块是否会在传入的数据包中找到字节序列。

我想我需要将信号转移到一个大的移位寄存器（16x64 以适应搜索空间）并在这些切片上进行比较。但似乎我还需要 SOP 和 EOP 的移位寄存器，以使这些信号与数据保持同步（匹配将与 SOP 一起断言）。我是在正确的轨道上，还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T03:03:13.773

在那种情况下，我认为您的想法是正确的。如果下游模块必须在接收 SOP 之前知道匹配是否存在，那么我只需将所有数据和两个控制信号制作一个 16 或 17 级管道。

如果对于某种区域限制而言寄存器太多，您可以考虑在等待检查时使用小内存来保存数据包。

# java - Ormlite - BaseDaoImpl 扩展时构造函数调用失败

> ID：10184169
> 
> 赞同：4
> 
> 时间：2012-04-17T02:07:58.233
> 
> 标签：java, ormlite

我有以下表格 -

```
@DatabaseTable(tableName="b", daoClass=B_DaoImpl.class)
public class B {

   @DatabaseField
   public String b1 ;

   public B(){
     // For Ormlite
   }
}

@DatabaseTable(tableName="a", daoClass=A_DaoImpl.class)
public class A {

   @DatabaseField
   public String a1 ;

   @DatabaseField(foreign=true)
   public B b;

   public A(){
     // For Ormlite
   }
} 
```

对于这些表，关联的 Dao 和 DaoImpl 如下

```
public interface A_Dao extends Dao<A, String>{}
public interface B_Dao extends Dao<B, String>{}

public class B_DaoImpl extends BaseDaoImpl<User, String> implements B_Dao {

   public B_DaoImpl(ConnectionSource connectionSource) throws SQLException {
      super(connectionSource, B.class);
   }
}

public class A_DaoImpl extends BaseDaoImpl<User, String> implements A_Dao {

   public A_DaoImpl(ConnectionSource connectionSource) throws SQLException {
      super(connectionSource, A.class);
   }
} 
```

数据库助手如下：

```
 public class DatabaseHelperImpl extends OrmLiteSqliteOpenHelper implements DatabaseHelper {

   private A_DaoImpl aDao = null;
   private B_DaoImpl bDao = null;

   public B_DaoImpl getBDao() throws SQLException {
       if (bDao == null) {
          bDao = getDao(B.class);
       }
       return bDao;
   }

   public A_DaoImpl getA() throws SQLException {
        if (aDao  == null ) {
          aDao = getDao(A.class);
        }
        return aDao;
   }
} 
```

现在，当我尝试打电话时——

```
ADao aDao = databaseHelper.getA(); 
```

它出现以下错误：

```
 Could not call the constructor in class class A_DaoImpl 
```

现在，如果我在 A 中没有外键 - 即如果 A 不包含*public B b*，它可以正常工作。我在这里缺少什么吗？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T02:37:23.993

我怀疑在异常堆栈跟踪结束时缺少原因消息。例如，如果我复制上面的示例，我会得到：

```
java.sql.SQLException: Could not call the constructor in class class 
      com.j256.ormlite.table.CustomDaoTest$A_DaoImpl
  at com.j256.ormlite.misc.SqlExceptionUtil.create(SqlExceptionUtil.java:22)
  ...
Caused by: java.lang.reflect.InvocationTargetException
  at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
  ...
Caused by: java.lang.IllegalArgumentException: Foreign field class
>>>>      com.j256.ormlite.table.CustomDaoTest$B does not have id field  <<<<<<
  at com.j256.ormlite.field.FieldType.configDaoInformation(FieldType.java:332)
  ... 
```

因为`A`有class的外部字段`B`，所以`B`需要有一个id字段。外部字段需要标识字段。

我确定`A`并且`B`是您的课程的简单版本，因此如果您发布更多异常，包括所有原因信息，我将适当地编辑我的答案。

# jquery - 如何使用简单模态创建多个叠加层？

> ID：10184170
> 
> 赞同：0
> 
> 时间：2012-04-17T02:08:30.223
> 
> 标签：jquery, simplemodal

尝试使用简单模式创建多个叠加层。查看了文档以及 Stack 上的其他几篇帖子，但没有成功。希望更多有经验的 jQuery 开发人员可以加入并提供帮助。

HTML：

```
<div class="basic-modal work-thumb">
    <a class="basic" href="#">
        <img src="thumbnail.png" />
    </a>
    <a class="basic" href="#">
        <img src="thumbnail.png" />
    </a>
</div>

<div id="modal-help">
    Modal Content here...
</div>
<div id="modal-faq">
    Modal Content here...
</div> 
```

JS：

```
$('.basic-modal .basic').click(function (e) {
    e.preventDefault();
    $('#modal-' + this.id).modal({
        position:[232,218],
        escClose:true,
        overlayClose:true
    });
        return false;
});//end simple modal 
```

覆盖有效，但#modal-help 中的内容不显示。任何帮助/建议都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T04:51:04.537

将最后点击的 div 设置为比刚刚点击的 div 低的 zvalue。这将导致新单击的 div 首先显示在图层中。

# c# - 如何在显示 mvc 视图之前“预处理”ajax 调用？

> ID：10184171
> 
> 赞同：0
> 
> 时间：2012-04-17T02:08:44.817
> 
> 标签：c#, ajax, model-view-controller, rest

我不是 ajax 专家，所以我很难找到更好的答案。我尝试创建单独的“.js”文件，其中包含对休息服务的调用（用于验证用户会话），但它不起作用。

我的目标是在加载我的视图（在 MVC 中）之前验证用户会话。使用验证与数据库的给定会话的逻辑的唯一方法是使用 ajax 通过 url 调用休息服务。

此代码运行良好（在主视图中）：

```
<script type="text/javascript">
    $(function () {
        $.get('@Url.Action("GetSession", "Auth")', function (getdata) {
            if (getdata.UserID && getdata.SessionID && getdata.SourceIP) {
                $.post('http://website.com/Rest/Authenticate/ValidateUserSession', JSON.stringify(getdata), function (response) {
                    if (response == false) { window.location.replace('@Url.Action("SignUp", "Auth")'); }
                });
            } else {
                window.location.replace('@Url.Action("SignUp", "Auth")');
            }
        });
    });
</script>
<h2>
    Home</h2>

    @*The content here should not appear, unless session is validated.*@ 
```

唯一的问题是，验证过程需要 3 到 5 秒，因此无论验证成功与否，在 ajax 调用返回结果之前，用户都会看到主页。如果验证/响应返回`false`，它将重定向到 sigup 页面。

我不知道这个过程的最佳实践是什么。现在我不希望主页视图显示给用户，除非会话得到验证。希望我能解释清楚。如果您有更好的主意，请提出建议。

附加信息：

如果可能的话，我喜欢这样做：

```
<script type="text/javascript">
    if(!validated()){
       window.location.replace('@Url.Action("SignUp", "Auth")');
    }
</script>
<h2>
    Home</h2>

    @*The content here should not appear, unless session is validated.*@ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T02:34:30.597

1.  为什么不能在服务器端使用其余服务？从技术上讲，应该没有理由不能这样做。这是一个讨论该问题的教程：http: [//codebetter.com/johnvpetersen/2012/03/22/accessing-a-asp-net-webapi-rest-service-from-asp-net-mvc/](http://codebetter.com/johnvpetersen/2012/03/22/accessing-a-asp-net-webapi-rest-service-from-asp-net-mvc/)

那应该照顾一切。如果由于某种原因这对您来说是不可能的，那么您可以执行以下操作，

1.  使您的主页成为局部视图。

2.  不要加载主页，而是加载一个带有处理图标（或您想要显示的任何消息）的空白页面。

3.  与 REST 服务对话，如果收到回复，则使用 JQuery 加载主页的部分视图，否则加载注册部分视图。

这是一篇讨论如何使用 JQuery 加载 MVC 部分视图的文章：http: [//www.codeproject.com/Articles/34221/JQuery-Partial-Views-in-ASP-NET-MVC](http://www.codeproject.com/Articles/34221/JQuery-Partial-Views-in-ASP-NET-MVC)

# mysql - mysql 从 1 列中选择 2 个不同的子字符串和单个 WHERE

> ID：10184173
> 
> 赞同：2
> 
> 时间：2012-04-17T02:09:01.777
> 
> 标签：mysql, sql

我正在尝试从单个列中的多个条件从 sql 中提取数据，
我怎样才能让它工作？

```
SELECT RIGHT(productID, 2) AS 'a', SUBSTRING(productID,1,2) AS 'b', productID 
FROM products 
WHERE `group`='$one' 
  AND `a` LIKE 'AA%' 
  AND `b` LIKE '$two' 
```

我正在尝试获取该行的前 2 个字母和同一行的最后 2 个字母，并检查是否 group=$one 但收到此错误

```
 Unknown column 'b' in 'where clause' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T02:29:46.587

```
SELECT RIGHT(productID, 2) AS 'a', SUBSTRING(productID,1,2) AS 'b', productID 
FROM products 
WHERE `group`='$one' 
GROUP BY productID
HAVING
  a = 'AA' 
  and b LIKE '$two' 
```

不需要像它的两个位置％增加执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T03:14:19.680

我创建了一个简单的表（StackOverFlow 测试表的 sotest）并向其中添加了一个名为 col1 的 VARCHAR 列。下面的代码对我有用。

```
SELECT RIGHT(col1, 2) AS a, SUBSTRING(col1,1,2) AS b, col1 as col FROM sotest  Having a like 'in%' and b like 'te%' 
```

回报如下

```
|  a |  b  |     col      |
|'in'| 'te'| 'test_jermin'| 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T02:18:57.537

```
SELECT RIGHT(productID), 2)
                      ^---extra bracket 
```

在指定要提取多少个字符之前终止函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T02:19:48.550

那是因为你在`RIGHT`函数调用中的错误，你有一个放错位置的括号。将 SELECT 的语句更改为：

```
SELECT RIGHT(productID, 2) 
```

# c++ - 将字符串转换为二进制的最快方法？

> ID：10184178
> 
> 赞同：19
> 
> 时间：2012-04-17T02:09:55.397
> 
> 标签：c++, string, binary, type-conversion

我想使用字符串类将字符串转换为二进制。逐个字符地做这个字符的快速方法是什么。环形？还是有一些功能可以为我转换？1 和 0 的二进制。

一个字符串是：

```
#include <string>
using namespace std;
int main(){
  myString = "Hello World";
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-17T02:25:25.553

使用`std::bitset`会起作用：

```
#include <string>
#include <bitset>
#include <iostream>
using namespace std;
int main(){
  string myString = "Hello World";
  for (std::size_t i = 0; i < myString.size(); ++i)
  {
      cout << bitset<8>(myString.c_str()[i]) << endl;
  }
} 
```

输出：

```
01001000
01100101
01101100
01101100
01101111
00100000
01010111
01101111
01110010
01101100
01100100 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-14T09:13:35.223

尝试使用此方法。例子：

```
#include <iostream>
#include <bitset>
using namespace std;

string TextToBinaryString(string words) {
    string binaryString = "";
    for (char& _char : words) {
        binaryString +=bitset<8>(_char).to_string();
    }
    return binaryString;
}
int main()
{
    string testText = "Hello World";
    cout << "Test text: " << testText << "!\n";
    cout << "Convert text to binary: " << TextToBinaryString(testText) << "!\n";

    return 0;
} 
```

结果代码：

```
Test text: Hello World!                                                                                                                                                                                 
Convert text to binary: 0100100001100101011011000110110001101111001000000101011101101111011100100110110001100100! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-24T08:17:17.130

`char * buf = data.c_str; //buf is binary`

# node.js - 使用 _id 引用时哪个最有利于性能？使用 _id 检索时，我收到错误 INVALID OBJECT ID

> ID：10184180
> 
> 赞同：1
> 
> 时间：2012-04-17T02:10:02.900
> 
> 标签：node.js, mongodb, mongoose, object-identity

我应该如何引用另一个集合中的集合，唯一的用户名或默认 _id（对象 id）或插入新记录时递增的普通 id。我读到对象 ids 提高了 mongoose 的性能，但我无法使用 _ids 检索记录作为它给出的错误 INVALID OBJECT ID 。使用其他键（如用户名）检索时我没有收到错误。但随着 _id 提高性能，我正在尝试使用它。

```
 Model.find({_id : "idstring"}) 
```

我在定义模式时尝试了这两种方法，

1) _id 没有定义，因为它会自动创建

2）我这样定义_id：_id：{类型：Schema.ObjectId}

在这两种方式中，我在检索记录时都收到错误“无效的对象 ID”

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:58:10.993

您需要从字符串创建一个 ObjectID

```
 var ObjectId = require('mongoose').Types.ObjectId;
 var myObjectId = ObjectId.fromString('myhexstring'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T00:06:27.303

1) 和 2) 都做同样的事情。最好选择 1) 并让猫鼬为你做这件事。

我不知道性能必然。_id 字段只是由 mongodb 为您唯一索引，因此查询中的性能增益将由此产生。如果您的查询很慢，您可以随时索引您想要的任何其他字段。_id 肯定更容易使用。

INVALID OBJECT ID 错误是由于传递的东西不能被猫鼬转换为 ObjectId。您可以传递十六进制字符串或 mongoose.Types.ObjectId 的实例。十六进制字符串的长度应为 24 个字符。仔细检查这个值。

此外，为您完成了将字符串显式转换为 ObjectId 的操作，因此无需手动进行。

# php - PHP & MySQL：将存储的 TIMESTAMP 转换为用户的本地时区

> ID：10184192
> 
> 赞同：14
> 
> 时间：2012-04-17T02:12:37.463
> 
> 标签：php, mysql, datetime, timezone, timezone-offset

所以我有一个带有评论功能的网站，其中评论的时间戳存储在 MySQL 数据库中。据我了解，时间戳在存储时转换为 UTC，然后在检索时转换回默认时区。就我而言，我的服务器位于中央夏令时时区 (CDT)。

我计划通过输入表单从每个用户那里获取时区。我只是想知道如何将 TIMESTAMP 值转换为用户的时区。

*   首先，我会从 UTC 转换为本地时区吗？还是 CDT 到本地时区？
*   其次，我将如何在 PHP 中做到这一点？我会这样做：

```
$userTimezone = new DateTimeZone($userSubmittedTimezoneString);
$myDateTime = new DateTime($storedTimestamp, $userTimezone);

```

...或者这不正确？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-17T03:55:57.703

日期/时间/日期时间值在您提供时存储在 MySQL 中。即，如果您`INSERT`将字符串`2012-04-17 12:03:23`放入一`DATETIME`列，这就是将要存储的值。它将在内部转换为可能准确也可能不准确的时间戳（见下文），但是当您再次查询该值时，您将得到相同的值；往返是透明的。

如果您尝试在 SQL 中进行时间计算，可能会出现问题。即任何需要SQL 来考虑时区和/或服务器时间的操作。例如，使用`NOW()`. 对于任何这些操作，*应*正确设置时区和/或服务器时间。请参阅[时区问题](http://dev.mysql.com/doc/refman/5.1/en/timezone-problems.html)。

如果这与您无关并且您只需要在 PHP 中进行计算，您只需要确保您知道要从哪个时区转换到哪个时区。为此目的，将所有时间标准化为 UTC*会*很方便，但这不是必需的，因为从任何时区到任何其他时区的时区转换也一样有效，只要您清楚要从哪个时区转换并。

```
date_default_timezone_set('Asia/Tokyo'); // your reference timezone here

$date = date('Y-m-d H:i:s');

/* INSERT $date INTO database */;

$date = /* SELECT date FROM database */;

$usersTimezone = new DateTimeZone('America/Vancouver');
$l10nDate = new DateTime($date);
$l10nDate->setTimeZone($usersTimezone);
echo $l10nDate->format('Y-m-d H:i:s'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T02:37:12.683

没有可靠的方法来获取用户的时区。时区信息不在 HTTP 标头中发送。您能做的最好的事情是：

1.  将 IP 地址与地理数据库匹配 - 或 -
2.  使用 Javascript 获取用户计算机上设置的时间，然后将其发送到服务器 (AJAX) 或在客户端创建时间字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T03:23:50.177

```
$timezone = new DateTimeZone('America/Vancouver');

$date = new DateTime(date('m/d/Y h:i:s a', time()));
$date->setTimeZone($timezone);
echo $date->format('l F j Y g:i:s A')."\n"; 
```

替换`new DateTime(date('m/d/Y h:i:s a', time()));`为`new DateTime("UTC Time");`

`DateTimeZone()`您可以为每个用户输入创建一个新对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T03:28:24.107

做到这一点的方法是使用javascript。我认为最好的方法是将用户 GMT 存储到他的 cookie 中，然后在 PHP 进程表单中检索它。

```
<script language="javascript">

function TimeZoneCookie()
{
 var u_gmt = (-(new Date().getTimezoneOffset()))/60;
 var o_date = new Date("December 31, 2025");
 var v_cookie_date = o_date.toGMTString();
 var str_cookie = "utimezone="+u_gmt;
 str_cookie += ";expires=" + v_cookie_date;
 document.cookie=str_cookie;
}
//---------------------
TimeZoneCookie();

</script> 
```

`u_gmt`解释：

1.  `Date().getTimezoneOffset()`以分钟为单位返回**到 GMT-0**的偏移量
2.  由于`getTimezoneOffset()`会将偏移量返回**到 GMT-0**而不是**从 GMT-0**开始，因此我们需要将其转过来。如何？很简单，只要知道`-*-=+`& `-*+=-`。如果你知道基本的数学，你就已经知道这个原理了。
3.  正如我在*步骤 1* `getTimezoneOffset()`中所说的，将以分钟为单位返回偏移量，所以我们只需将其除以 60，就可以得到 gmt 偏移量格式。

**结果：** `(-(new Date().getTimezoneOffset()))/60`

* * *

现在在 PHP 中检索 cookie：

```
<?php

$user_timezone = $_COOKIE['utimezone'];

?> 
```

# linux - Haskell：从 /proc 读取。严格和懒惰的问题。进程统计

> ID：10184202
> 
> 赞同：8
> 
> 时间：2012-04-17T02:14:10.770
> 
> 标签：linux, haskell, system

从 /proc 读取文件时我的行为非常奇怪如果我用 prelude 的 readFile 懒惰地读取 /proc/pid/stat - 它可以工作，但不是我想要的方式。使用 Data.ByteString.readFile 切换到严格阅读会给我一个空字符串。

我需要在这里严格阅读，以便能够在短时间内比较两次阅读的结果。

所以使用 System.IO.readFile 读取 /proc/pid/stat 根本不起作用。它在 0.5 秒的间隔内给了我相同的结果。我认为这是由于懒惰和半封闭句柄或其他原因......打开和关闭文件句柄显式有效。

```
h <- openFile "/proc/pid/stat" ReadMode
st1 <- hGetLine h; hClose h 
```

但是，如果我们有严格的字节串阅读，为什么要这样做。对？

这就是我卡住的地方。

```
import qualified Data.ByteString as B
B.readFile "/proc/pid/stat" >>= print 
```

这总是返回一个空字符串。也在 GHCI 中进行了测试。有什么建议么。谢谢。

---**更新**---

谢谢丹尼尔的建议。

这是我真正需要做的。这可能有助于充分展示我的困境并带来更一般的建议。

我需要计算过程统计信息。这里以部分代码（只是 CPU 使用率）为例。

```
cpuUsage pid = do
  st1 <- readProc $ "/proc" </> pid </> "stat"
  threadDelay 500000 -- 0.5 sec
  st2 <- readProc $ "/proc" </> pid </> "stat"
  let sum1 = (read $ words st1 !! 13) +
             (read $ words st1 !! 14)
      sum2 = (read $ words st2 !! 13) +
             (read $ words st2 !! 14)
  return $ round $ fromIntegral (sum2 - sum1) * jiffy / delay * 100
  where
    jiffy = 0.01
    delay = 0.5
    readProc f = do
      h <- openFile f ReadMode
      c <- hGetLine h
      hClose h
      return c 
```

1.  由于懒惰，Prelude.readFile 不起作用
2.  ByteString 中的严格函数不起作用。谢谢丹尼尔的解释。
3.  如果我将整个计算塞入其中，withFile 将起作用（它会正确关闭句柄），但是由于计算需要时间，因此间隔不会严格为 0.5。
4.  显式打开和关闭句柄并使用 hGetContents 不起作用！出于同样的原因 readFile 没有。

在这种情况下唯一有效的是在上面的代码片段中使用 hGetLine 显式打开和关闭句柄。但这还不够好，因为某些 proc 文件不止一行，例如 /proc/meminfo。

所以我需要一个可以严格读取整个文件的函数。类似于 hGetContents 但严格的东西。

我试图这样做：

```
readProc f = do
  h <- openFile f ReadMode
  c <- hGetContents h
  let c' = lines c
  hClose h
  return c' 
```

希望这些行会触发它完整读取文件。没运气。仍然得到一个空列表。

任何帮助，建议非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T02:26:35.740

`ByteString`代码是

```
readFile :: FilePath -> IO ByteString
readFile f = bracket (openBinaryFile f ReadMode) hClose
    (\h -> hFileSize h >>= hGet h . fromIntegral) 
```

但`/proc/whatever`不是真正的文件，它是按需生成的，当你`stat`获取文件大小时，你得到 0。所以`ByteString`'`readFile`成功读取了 0 个字节。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T06:02:33.047

在编码这种类型的东西之前，通常最好检查一下 Hackage 上是否已经存在某些东西。在这种情况下，我找到了[procstat](http://hackage.haskell.org/packages/archive/procstat/latest/doc/html/System-Linux-ProcStat.html)包，它似乎工作得很好：

```
import System.Linux.ProcStat

cpuUsage pid = do
  Just before <- fmap procTotalTime <$> procStat pid
  threadDelay 500000 -- 0.5 sec
  Just after  <- fmap procTotalTime <$> procStat pid
  return . round $ fromIntegral (after - before) * jiffy / delay * 100
  where
    procTotalTime info = procUTime info + procSTime info
    jiffy = 0.01
    delay = 0.5 
```

# sql-server - SQL Server 2008 - 为一组中的多条记录填充一列

> ID：10184204
> 
> 赞同：0
> 
> 时间：2012-04-17T02:14:47.413
> 
> 标签：sql-server, count

```
set row pro1 pro2  Dup
1   1   AB2  AB2
1   1   AB6  AB4
1   1   AB2  NB3
2   1   AN2  QW3  
2   2   BH1  BH1
3   1   AJ1  AJ1
4   1   HU3  HU3
4   1   BH2  BH2 
```

我想填充`dup = 'Case1'`给定集合的位置，`pro1 = pro2`; 要求该集中有超过 1 条记录。预期结果：

```
set row pro1 pro2  Dup
1   1   AB2  AB2   CASE1
1   1   AB6  AB4   NULL
1   1   AB2  NB3   NULL
2   1   AN2  QW3   NULL
2   2   BH1  BH1   CASE1 
3   1   AJ1  AJ1   NULL   (even though it matches, but its just one record)
4   1   HU3  HU3   CASE1
4   1   BH2  BH2   CASE1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:40:12.463

```
with C as
(
  select pro1,
         pro2,
         dup,
         count(*) over(partition by [set]) as setcount
  from YourTable
)
update C
set dup = 'CASE!'
where pro1 = pro2 and
      setcount > 1 
```

[SE-Data 的](https://data.stackexchange.com/stackoverflow/query/67018)工作样本

# mysql - 复杂的SQL：如何过滤技术支持和计算顺序的重复数据

> ID：10184205
> 
> 赞同：2
> 
> 时间：2012-04-17T02:15:08.083
> 
> 标签：mysql, sql, duplicates

我有一个大问题。谁能帮我一把？

我的第一个目标是：用查询语句过滤重复数据（选择不删除），即由于重复反馈，同一ServiceID的EndTime和Qos的各种条目。规则是只保留同一 ServiceID 的 Qos 最低的记录。如果有几条记录的 Qos 最低，则只保留这些记录中的任何一条。客户接受并更喜欢这种方案。在这个例子中，对于 ID=6,7 和 8，只保留 6 或 7。我在这里得到了这个目标的答案：

```
SELECT DISTINCT serviceid,tcid,endtime,qos 
FROM (SELECT * 
      FROM service 
      ORDER BY serviceid, qos, id) AS base 
GROUP BY serviceid 
```

目标2：Qos=1 表示服务满意。每个技术支持工程师实现的每月满意服务总量称为“个人本月满意服务总量”。“本月个人总体满意服务”排名当月前2名的技术支持工程师称为“本月以来前2名”。如果他们足够优秀，每个月都有资格获得“本月以来的前2名”，那么他们可以被称为“优秀1级”。总而言之，这一步是计算“1 级优秀”。在此示例中，一月的“本月以来排名前 2”是 Andrew 和 Jacob，二月的“Top 2”是 Andrew、Dlyan 和 Jacob。因此，“一等奖”的荣誉称号授予了Andrew和Jacob（仅这2位录音师）。

请帮助我完成目标 2（最后我应该达到目标 4，最终目标），目标 2 的结果应该是

```
TCID
安德鲁
雅各布
```

说明：全年有一些技术服务数据（ServiceID、TCID、EndTime、QoS），ID是唯一的主键，因为有一些重复。

差点忘了说，只是提醒一下，客户端只接受SQL而不是数据库中的存储过程来实现它。我只需要查询语句，因为客户不允许我们写数据库。

```
 some data: 
```

```
ServiceID ID TCID EndTime Qos
2000 2 雅各布 2011/1/1 2
2000 3 雅各布 2011/1/1 2
2001 4 雅各布 2011/1/1 2
2002 5 雅各布 2011/2/3 1
2003 6 泰勒 2011/1/4 1

```

数据结构：

*   ID：记录的唯一主键
*   ServiceID：某个服务的ID
*   TCID：技术支持工程师的ID
*   EndTime：服务的结束时间
*   Qos：服务质量（1满意；2一般；3不满意/不满意）。

DDL 和插入 SQL(mysql5):

```
CREATE TABLE `service` (
  `ServiceID` INTEGER(11) NOT NULL,
  `ID` INTEGER(11) NOT NULL ,
  `TCID` VARCHAR(40)  NOT NULL,
  `EndTime` DATE NOT NULL,
  `Qos` CHAR(1)  NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `ID` (`ID`)
);
COMMIT;
INSERT INTO `service` (`ServiceID`, `ID`, `TCID`, `EndTime`, `Qos`) VALUES
  (2004, 9, 'Jacob', '2011-02-04', '1'),
  (2000, 2, 'Jacob', '2011-01-01', '2'),
  (2000, 3, 'Jacob', '2011-01-01', '2'),
  (2001, 4, 'Jacob', '2011-01-01', '2'),
  (2002, 5, 'Jacob', '2011-02-03', '1'),
  (2003, 6, 'Tyler', '2011-01-04', '1'),
  (2003, 7, 'Tyler', '2011-01-04', '1'),
  (2003, 8, 'Tyler', '2011-01-03', '2'),
  (2005, 10, 'Jacob', '2011-02-05', '1'),
  (2006, 11, 'Jacob', '2011-02-04', '2'),
  (2007, 12, 'Jacob', '2011-01-08', '1'),
  (2008, 13, 'Tyler', '2011-02-06', '1'),
  (2009, 14, 'Dylan', '2011-02-08', '1'),
  (2010, 15, 'Dylan', '2011-02-09', '1'),
  (2014, 16, 'Andrew', '2011-01-01', '1'),
  (2013, 17, 'Andrew', '2011-01-01', '1'),
  (2012, 18, 'Andrew', '2011-02-19', '1'),
  (2011, 19, 'Andrew', '2011-02-02', '1'),
  (2015, 20, 'Andrew', '2011-02-01', '1'),
  (2016, 21, 'Andrew', '2011-01-19', '1'),
  (2017, 22, 'Jacob', '2011-01-01', '1'),
  (2018, 23, 'Dylan', '2011-02-03', '1'),
  (2019, 24, 'Dylan', '2011-01-09', '1'),
  (2020, 25, 'Dylan', '2011-01-01', '1'),
  (2021, 26, 'Andrew', '2011-01-03', '1'),
  (2021, 27, 'Dylan', '2011-01-11', '1'),
  (2022, 28, 'Jacob', '2011-01-09', '1'),
  (2023, 29, 'Tyler', '2011-01-19', '1'),
  (2024, 30, 'Andrew', '2011-02-01', '1'),
  (2025, 31, 'Dylan', '2011-02-03', '1'),
  (2026, 32, 'Jacob', '2011-02-04', '1'),
  (2027, 33, 'Tyler', '2011-02-09', '1'),
  (2028, 34, 'Daniel', '2011-01-06', '1'),
  (2029, 35, 'Daniel', '2011-02-01', '1');
 COMMIT; 
```

这是我的前 2 个目标，还有 2 个，我打算一个接一个地完成所有这些步骤。任何人都可以帮助实现第一个目标吗？我知道这很复杂，非常感谢您提前。

目标3：那么，计算“二等奖”（不包括“本月以来排名前2”的工程师）等于计算排名第三和第四的工程师。在这个例子中，“2 级杰出”是 Tyler。

目标4：最终目标是把“一等优秀”和“二等优秀”结合起来。结果将最终传输到报告进行渲染。我的数据集应该如下所示：

```
TCID       level
Andrew     top2
Jacob      top2
Tyler      top4
```

目标 1 的结果应该是这样的：

```
2000 2 雅各布 2011/1/1 2
2001 4 雅各布 2011/1/1 2
2002 5 雅各布 2011/2/3 1
2003 6 泰勒 2011/1/4 1
2004 9 雅各布 2011/2/4 1
2005 10 雅各布 2011/2/5 1
2006 11 雅各布 2011/2/4 2
2007 12 雅各布 2011/1/8 1
2008 13 泰勒 2011/2/6 1
2009 14 迪拉 2011/2/8 1
2010 15 迪拉 2011/2/9 1
2011 19 安德鲁 2011/2/2 1
2012 18 安德鲁 2011/2/19 1
2013 17 安德鲁 2011/1/1 1
2014 16 安德鲁 2011/1/1 1
2015 20 安德鲁 2011/2/1 1
2016 21 安德鲁 2011/1/19 1
2017 22 雅各布 2011/1/1 1
2018 23 迪拉 2011/2/3 1
2019 24 迪拉 2011/1/9 1
2020 25 迪拉 2011/1/1 1
2021 26 安德鲁 2011/1/3 1
2022 28 雅各布 2011/1/9 1
2023 29 泰勒 2011/1/19 1
2024 30 安德鲁 2011/2/1 1
2025 31 迪拉 2011/2/3 1
2026 32 雅各布 2011/2/4 1
2027 33 泰勒 2011/2/9 1
2028 34 丹尼尔 2011/1/6 1
2029 35 丹尼尔 2011/2/1 1

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:49:26.330

最后，我找到了一个使用集算器来解决这个问题的解决方案。集算器是我找到的唯一解决方案。是的，它可以返回一个 resultSet 对象并由报告工具调用（我使用的是 Jasper）。但我仍然需要一个 SQL 解决方案。所以，请告诉我是否有任何 SQL 解决方案。感谢您的回复。

![集算器解决方案](../Images/413dba79b6572d6c367e9ecd885a06ae.png)

以下是有关此解决方案的一些信息：http: [//www.esproc.com/tour/what-is-esproc.html](http://www.esproc.com/tour/what-is-esproc.html)

或者这里是一个 SQL Server 解决方案（但不适合 mysql）：[http ://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/e11c754d-559e-4eb7-9682-e998ea3387d9](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/e11c754d-559e-4eb7-9682-e998ea3387d9)

希望这可以帮助遇到同样麻烦的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:18:55.003

此查询打算为每个 SERVICE_ID 仅选择一行，它将仅包括相应 SERVICE_ID 的 QO 最低的记录，即使这样，它也通过仅选择一个来避免多行。正如您提到的“保留这些记录中的任何一条”，我使用 rowid 随机选择一条记录

您可以针对此条件运行选择查询，以查看提取的记录是否适合您，然后再运行删除命令

```
 DELETE FROM SERVICE S
 WHERE S.SERVICEID IN (SELECT DISTINCT S.SERVICEID
                         FROM SERVICE S
                        GROUP BY S.SERVICEID
                       HAVING COUNT(*) > 1)
   AND S.QOS =
       (SELECT MIN(S1.QOS) FROM SERVICE S1 WHERE S1.SERVICEID = S.SERVICEID)
   AND ROWID =
       (SELECT MIN(ROWID) FROM SERVICE S1 WHERE S1.SERVICEID = S.SERVICEID)

Hope it helps 
```

# macos - NSOpenPanel 可以打开预先选择的包而不是显示包的内容吗？

> ID：10184208
> 
> 赞同：1
> 
> 时间：2012-04-17T02:15:39.380
> 
> 标签：macos, cocoa, nsopenpanel, nssavepanel

我正在尝试显示一个预选文件的 NSOpenPanel。

我在用着

```
 openPanel.directoryURL = fileURL;
    [openPanel runModal]; 
```

设置文件（假设 fileURL 是一个有效的 NSURL）并显示面板。

当文件的 NSURL 引用“普通”文件时，事情会很好。打开面板打开到正确的目录并选择正确的文件。

当 NSURL 引用一个包（例如应用程序包或本地化 PDF）时，事情不会像我想要的那样工作。在这些情况下，NSOpenPanel 打开以显示包的内容，而不是包含包的目录。

我可以使用一些已弃用的方法来正确打开面板（我认为），但我宁愿避免使用这些方法。

有没有办法打开一个 NSOpenPanel 并使用非弃用方法正确预选了一个包？

# ios - ios Mapview 属性不持久

> ID：10184212
> 
> 赞同：0
> 
> 时间：2012-04-17T02:16:17.113
> 
> 标签：ios, mkmapview, exc-bad-access

我正在尝试使用该`mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated`方法来限制我的 mapview 的区域，但是每当我调用我的 mapview 的区域 ( `[self.userMapView setRegion:regionLimit]`) 时，它都会给我一个 EXC_BAD_ACCESS 错误。

无论我尝试从 mapView 调用什么属性，都会引发此错误。我将我的地图视图设置为具有适当插座的地图视图，我什至可以`set region`在`viewDidLoad`消息中调用。

如何防止这些属性引发错误的访问错误？如果没有可以回答，任何人都可以将我引导到解释如何调试这样的东西的资源？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T03:56:43.410

请参阅[here](http://www.touch-code-magazine.com/how-to-debug-exc_bad_access/)，了解他调试 EXC_BAD_ACCESS 错误和导致这些错误的常见错误。在您的情况下，我敢打赌您的财产早已死去并被回收利用，或者一开始就从未初始化过。

# string - 带字符串操作的汇编语言

> ID：10184214
> 
> 赞同：0
> 
> 时间：2012-04-17T02:16:30.767
> 
> 标签：string, assembly

我需要一些指向此分配的帮助：程序将返回字符串中字母“the”序列的出现总数。[注意：我们正在寻找字母“the”而不仅仅是单词“the”。因此，例如，您还将计算“there”或“then”中的“the”。）所以我应该首先查看它是否为 't'，然后下一个字符是否为 'h' 和 'e'之后，如果是这样，增加总数。我的代码需要帮助。我想不通我的逻辑。关于如何做到这一点的任何建议都会对我有所帮助。到目前为止，这是我尚未完成的代码，我的主要问题是，即使第一个字符显然是“w”，但它的执行就像是“t”一样，我的跳转都在执行：

```
#include "stdafx.h"
#include <iostream>

using namespace std;

int main(int argc, char* argv[])
{
//  your properly formatted assembly language data here
char Decl[] = "We hold these truths to be self-evident, that "
              "all men are created equal, that they are "
              "endowed by their Creator with certain "
              "unalienable Rights, that among these are "
              "Life, Liberty and the pursuit of Happiness. "
              "That to secure these rights, Governments are "
              "instituted among Men, deriving their just "
              "powers from the consent of the governed, "
              "That whenever any Form of Government becomes "
              "destructive of these ends, it is the Right of "
              "the People to alter or to abolish it, and to "
              "institute new Government, laying its foundation "
              "on such principles and organizing its powers in "
              "such form, as to them shall seem most likely to "
              "effect their Safety and Happiness. Prudence, "
              "indeed, will dictate that Governments long "
              "established should not be changed for light and "
              "transient causes; and accordingly all epxerience "
              "hath shewn, that mankind are more disposed to "
              "suffer, while evils are sufferable, than to "
              "right themselves by abolishing the forms to "
              "which they are accustomed. But when a long train "
              "of abuses and usurpations, pursuing invariably "
              "the same Object evinces a design to reduce them "
              "under absolute Despotism, it is their right, "
              "it is their duty, to throw off such Government "
              "and to provide new Guards for their future "
              "security. Such has been the patient sufferance "
              "of these Colonies; and such is now the "
              "necessity which constrains them to alter their "
              "former Systems of Government. The history of "
              "the present King of Great Britain is a history "
              "of repeated injuries and usurpations, all "
              "having in direct object the establishment of "
              "an absolute Tyranny over these States. To "
              "prove this, let Facts be submitted to a "
              "candid world. Entered by Thomas Arnol ";

unsigned short int total = 0;

     __asm {
//  your syntatically correct assembly language code here
//  column alignment markers below (to guide you)
//      |       |               |
        cld                     ;set left to right scan
        lea     edi, Decl       ;load offset of string
        mov     ecx, 1649       ;length of string +1
        mov     al, 't'         ;load first character into al to be scanned
more1:
repne   scasb                   ;scan byte by byte
        cmp     ecx, 0          ;see if end of string
        je      skip1           ;dont do any more processing
        jmp     case2

skip1:  cmp     ecx, 0 
        ja      more1

case2:  mov     ebx, ecx        ;how many characters left?
        not     ebx             ;form positive index to string
        add     ebx, 1649       ;and point to letter
        cmp     Decl[ebx+1], 'h'    ;compare next letter
        je      case3
        jmp     more1

case3:  mov     ebx, ecx
        not     ebx
        add     ebx, 1649
        cmp     Decl[ebx+2], 'e'
        je      final1
        jmp     more1

final1: inc     total

    }
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T03:29:43.127

在第一次匹配时（`scasb`执行后），执行以下跳转：

```
jmp     case2  ; meaning the string is not over
...
je      case3  ; meaning the second char is 'h'
...
je      final1   ; meaning the third character is 'e' 
```

然后函数退出。比赛没有外循环。如果您有匹配项，则不会执行该`jmp more1`行 - 仅当“t”之后的第三个字符不是“e”时。

说真的，你甚至在调试你的代码吗？一个简单的步骤将很快揭示这么多。例如，Visual Studio 可以做到这一点，并在 Watch 窗口中轻松地显示寄存器和带有寄存器的表达式。

编辑：计算 ebx 以获取第二个和第三个字符的逻辑是完全无关的。您已经有一个指向字符串中正确位置的寄存器 - 那是您的`edi`after `scasb`。代替

```
case2:  mov     ebx, ecx        ;how many characters left?
    not     ebx             ;form positive index to string
    add     ebx, 1649       ;and point to letter
    cmp     Decl[ebx+1], 'h'    ;compare next letter 
```

你可以做

```
case2: cmp [edi], 'h' 
```

然后

```
cmp [edi+1], 'e' 
```

# linux - 使用 GCC 和埃及生成综合调用图

> ID：10184219
> 
> 赞同：7
> 
> 时间：2012-04-17T02:17:32.103
> 
> 标签：linux, gcc, static-libraries, call-graph

我正在尝试生成一个全面的调用图（完成对 Linux、运行时、很多的低级调用）。

我已经使用“-fdump-rtl-expand”静态编译了我的源文件并创建了 RTL 文件，我将其传递给名为埃及的 PERL 脚本（我相信它是 Graphviz/Dot）并生成了调用图的 PDF 文件。这完美地工作，完全没有问题。

除此之外，有些库被调用，这些库被显示为内置的。我想看看是否有办法不将调用图打印为库中的真实调用？

如果问题不清楚，请告诉我。

![](../Images/45da9fe2628e6d0500bcb72bee1a10fb.png)

[http://i.imgur.com/sp58v.jpg](https://i.imgur.com/sp58v.jpg)

基本上，我试图避免调用图生成 <built-in>

有没有办法做到这一点 ？

- - - - 代码 - - - - -

```
#include <cilk/cilk.h>
#include <stdio.h>
#include <stdlib.h>

unsigned long int t0, t5;
unsigned int NOSPAWN_THRESHOLD = 32;

int fib_nospawn(int n)
{
  if (n < 2) 
    return n;
  else 
    {
      int x = fib_nospawn(n-1);
      int y = fib_nospawn(n-2);
      return x + y;
    }
}

// spawning fibonacci function
int fib(long int n)
{
  long int x, y;
  if (n < 2) 
    return n;
  else if (n <= NOSPAWN_THRESHOLD)
    {
      x = fib_nospawn(n-1);
      y = fib_nospawn(n-2);
      return x + y;
    }
  else 
    {
      x = cilk_spawn fib(n-1);
      y = cilk_spawn fib(n-2);
      cilk_sync;
      return x + y;
    }
}

int main(int argc, char *argv[])
{
  int n;
  long int result;
  long int exec_time;

  n = atoi(argv[1]);
  NOSPAWN_THRESHOLD = atoi(argv[2]);
  result = fib(n);

  printf("%ld\n", result);
  return 0;
} 
```

我从源代码编译了 Cilk 库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T22:31:25.757

我可能已经找到了问题的**部分解决方案**：

您需要将以下选项传递给埃及

```
--include-external 
```

这产生了一个稍微更全面的调用图，尽管仍然有“可见

![](../Images/1147ce547ec1a342a7a8a84358da792b.png)

[http://i.imgur.com/GWPJO.jpg?1](https://i.imgur.com/GWPJO.jpg?1)

谁能建议我是否在调用图中获得更多深度？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-12T14:47:32.360

You can use the [GCC VCG Plugin](https://code.google.com/p/gcc-vcg-plugin/): A gcc plugin, which can be loaded when debugging gcc, to show internal structures graphically.

`gcc -fplugin=/path/to/vcg_plugin.so -fplugin-arg-vcg_plugin-cgraph foo.c`

Call-graph is place to store data needed for inter-procedural optimization. All datastructures are divided into three components: `local_info` that is produced while analyzing the function, `global_info` that is result of global walking of the call-graph on the end of compilation and `rtl_info` used by RTL back-end to propagate data from already compiled functions to their callers.

# objective-c - 目标 c：EXC_BAD_ADDRESS

> ID：10184222
> 
> 赞同：-2
> 
> 时间：2012-04-17T02:17:45.250
> 
> 标签：objective-c, exc-bad-access

谁能告诉我为什么这会导致 EXC_BAD_ADDRESS 错误？

```
int startIndex = NSRangeFromString(current).location + NSRangeFromString(current).length;
NSLog(@"%d", NSRangeFromString(current).location + NSRangeFromString(current).length);
NSLog(@"%@", startIndex); 
```

任何引用 startIndex 都会导致错误

第二行打印 6，所以 startIndex 应该打印 6？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T02:26:04.350

如果 startIndex 是一个 int 的 float 那么你需要使用

`NSLog(@"%d", startIndex);`或者`NSLog(@"%f", startIndex);`

`%@`仅适用于对象

# esb - ws-discovery：如何在中央存储库（Governance Registry）中获取服务，用他们的真实姓名而不是Discovered-3442536235？

> ID：10184223
> 
> 赞同：0
> 
> 时间：2012-04-17T02:18:12.497
> 
> 标签：esb, wso2

部署在 Application Server (AS) 上的服务并未以其真实姓名存储在工具 WSO2 Governance Registry 中。如何提出已在 AS 中部署的相同名称？例如，实现的服务 xxx 出现在名为 Discovered-2409424825 的 WSO2 Governance Registry 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:00:05.323

在 ws-discovery 中，我们保留服务名称到 UUID 的映射。ServiceID 是自动生成的 UUID。用户无法更改它。但他可以为范围定义有效的 URI。在范围内您可以保留服务名称，所以它很容易识别..

# javascript - 从 10 开始倒计时，当计时器反应到 0 时重复

> ID：10184229
> 
> 赞同：2
> 
> 时间：2012-04-17T02:19:09.457
> 
> 标签：javascript, jquery, countdown

我想从 10 秒倒计时到 0。当它达到 0 时，DIV 将重新加载，计时器将重新开始。我有这个功能可以让它完全按照我的意愿去做，但问题是当倒计时达到 0 并回到 10 时，它会计数 -1 *reload* -2 *reload* -3 *reload* -4 *reload*等等。这**不是**我想要的！:)

这是我的代码：

```
var time = setInterval(countdown, 1000);
function countdown() {
    var count = 10;
    countdown = setInterval(function() {
        $('#countdown').html(count + ' sekunder kvar');

        if(count == 0) {
            $('#weather-data').load('jquery-fetch/fetch-weatherdata.php?place=' + myplace);
            clearInterval(countdown);
        }

        count--;
    }, 1000);
} 
```

如何解决我的问题，使计时器从 10 倒计时到 0 并永远重复该倒计时？

提前致谢。

**编辑**

当此函数第一次达到 0 并重新开始时，它的计数如下：10、9、8、10、7、6、5、4、3、2、1、10、9、8、7、10 , 6, 5, 4, 3, 2, 1, 10, 9, 8, 10, 7, 6 等等。为什么这段代码会这样？

```
function countdown() {
    var count = 10;
    var timerId = setInterval(function() {
        $('#countdown').html(count + ' sekunder kvar');
        count--;

        if(count == 0) {
            $('#weather-data').load('jquery-fetch/fetch-weatherdata.php?place=' + myplace);
            clearInterval(timerId);
            countdown();
        }
    }, 1000);
}

countdown(); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T02:20:59.407

我在你的脚本中看到了很多问题......所以不知道你是如何让它工作的......

1.  ~~函数名不能有`-`，所以调用不起作用：S~~
2.  `countdown`是您内部的一个全局变量`function countdown()`，与您的函数名称相同，实际上是`countdownception`
3.  `Interval`当你打电话时，你每秒钟都在有效地创建一个新的`countdown`

要实现您想要的，请尝试更简单的方法：

```
function countdown() {
    // your code goes here
    var count = 10;
    var timerId = setInterval(function() {
        count--;
        console.log(count);

        if(count == 0) {
            // your code goes here
            count = 10;
        }
    }, 1000);
}

countdown(); 
```

[http://jsfiddle.net/Xrbm5/13/](http://jsfiddle.net/Xrbm5/13/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T02:27:03.367

看看你的代码在做什么。

您正在设置每秒运行的时间间隔。没关系。

不好的是，每一秒，这个间隔都会创建一个新的间隔，从 10 开始倒计时。

此外，您正在设置`countdown`为全局变量。因此，当您的第一个计数器达到零时，它实际上会清除 LAST 计时器，让第一个计时器愉快地继续为负数，而您一直在产生新的间隔。

总的来说，这是一场灾难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T02:50:01.760

如果您只想每 10 秒更新一次页面，那么：

```
setTimeout(function() {
   // run some code
},10000); 
```

如果您想要倒计时，则仅在每个偶数 10 处重置计数器。以下添加了启动和停止功能，它从停止的位置重新统计。此外，如果正在运行，单击开始不会启动另一个。

```
var weatherRefresh = (function() {
  var count = 10;
  var timerRef;
  return {
    start: function() {

      // If already running, leave it running
      if (timerRef) return;

      timerRef = setInterval(function() {
        // Display count
        document.getElementById('dislayedCount').innerHTML = count;

        if (!count--) {
          // count is zero, refresh weather info
          // and start again
          count = 10;
        }
      }, 1000);
    },
    stop: function() {
      timerRef && clearInterval(timerRef);
      timerRef = null;
    }
   };
}()); 
```

以及一些使其工作的按钮（或在页面加载时启动它）：

```
<button onclick="weatherRefresh.start();">Start</button>
<button onclick="weatherRefresh.stop();">Stop</button> 
```

请注意，该功能只会**大约**每秒运行一次，如果系统很忙，它将无法按时运行并且会缓慢漂移，但每次不会太多，因此可能无关紧要。

# objective-c - 如何区分未设置的浮点数和值为 0 的浮点数？

> ID：10184230
> 
> 赞同：6
> 
> 时间：2012-04-17T02:19:12.810
> 
> 标签：objective-c, undefined, equality, cgfloat

我有一个方法，当给定一个未设置的浮点数而不是值为 0 的浮点数时，我需要做不同的事情。基本上，我需要检查一个变量是否已经存在，如果它的值为 0，则将其计数为设置.

那么，**我应该使用什么占位符作为未设置值**（nil、NULL、NO 等）以及**如何测试变量是否**未设置而不返回值为 0 的 true？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-17T02:28:19.250

您可以将您的浮点数初始化为 NaN（例如通过调用[`nan()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/nan.html)or [`nanf()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/nanf.html)），然后测试[`isnan()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/isnan.html)它们是否已更改为保存数字。（请注意，测试`myvalue == nan()`将*不起作用*。）

这既相当简单（你可能会`math.h`在任何情况下包括在内）并且在概念上是明智的：任何未设置为数字的值都是“不是数字”......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T02:27:32.680

当变量合法地获取该常量的值时，使用常量值来指示未设置状态通常会导致错误。

考虑使用`NSNumber`来存储您的浮动。这样它不仅可以是`nil`，它会默认为那个状态。

这假设您只需要少量的浮点数。如果您需要数百万个，`NSNumber`可能会太慢且占用大量内存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T03:56:47.880

不要重载这些`float`属性（我们称它们为 X 和 Y），而是`isValid`为每个属性创建一个单独的标志。初始化标志以指示尚未设置浮动，并提供您自己的设置器来适当地管理标志。所以你的代码可能看起来像：

```
if (self.isXValid == YES) {
    self.Y = ... // assigning to Y sets isYValid to YES
}
else if (self.isYValid == YES) {
    self.X = ... // assigning to Y sets isXValid to YES
} 
```

您实际上可以更进一步，让 X 的设置器也分配 Y，反之亦然。或者，如果 X 和 Y 密切相关，以至于您可以根据另一个的值来计算一个，那么您实际上只需要一个变量来处理这两个属性。

# facebook - Facebook 将其图标注入链接页面的技巧是什么？

> ID：10184234
> 
> 赞同：4
> 
> 时间：2012-04-17T02:19:56.390
> 
> 标签：facebook, favicon, chromium

当 A 在 Facebook 上发布链接，然后 B 在 Chrome 中单击该链接（不是在 Firefox 中，并且尚未测试其他链接）时，B 会看到选项卡上显示的蓝色背景图标 (favicon.ico) 上的 Facebook 白色“f”的链接页面。有时，大概当页面有自己的图标时，刷新该选项卡会将图标替换为正确的图标；但大多数情况下，Facebook 图标仍然存在。起初我认为 Facebook 以某种棘手的方式使用框架，但使用 View Source，情况似乎并非如此。一个人如何编程一个 href 或重定向，以便像 Facebook 那样将自己的 favicon 预加载到链接页面上？

![（截屏）](../Images/a8e84d6c6b94ee84ea81fec42baa6d88.png)

这是我尝试过但没有成功的方法，我的图标被替换为什么都没有（并且仅显示在 Firefox 的选项卡和导航栏中，仅显示在 Chromium 的选项卡中，但这无关紧要）：

[http://unixshell.jcomeau.com/tmp/linktest/index.html](http://unixshell.jcomeau.com/tmp/linktest/index.html)

```
jcomeau@unixshell:~/www/www/tmp/linktest$ cat index.html
<html>
<head>
<link rel="shortcut icon" href="favicon.ico" />
</head>
<body>
<a href="redirect.html?url=http://homesteadingsurvivalism.myshopify.com/">homesteadingsurvivalism.myshopify.com</a>
</body>
</html>
jcomeau@unixshell:~/www/www/tmp/linktest$ cat redirect.html 
<html>
<head>
<link rel="shortcut icon" href="favicon.ico" />
<script language="javascript" type="text/javascript">
var newpage = window.location.search.substring(5);
window.setTimeout('window.location = newpage; ', 3000);
</script>
</head>
<body>
<p>Redirecting to selected site, please wait...</p>
</body> 
```

在严的评论之后，我也尝试了没有成功的redirect.cgi：

```
jcomeau@unixshell:~/www/www/tmp/linktest$ cat redirect.cgi; QUERY_STRING=url=http://this.is.a.test/ ./redirect.cgi 
#!/bin/bash
echo -ne "Content-type: text/html\r\n"
echo -ne "Location: ${QUERY_STRING:4}\r\n"
echo -ne "\r\n"
cat <<-EOF
    <html>
    <head>
    <link rel="shortcut icon" href="favicon.ico" />
    </head>
    <body>
    Redirecting to ${QUERY_STRING:4}
    </body>
    </html>
    EOF
Content-type: text/html
Location: http://this.is.a.test/

<html>
<head>
<link rel="shortcut icon" href="favicon.ico" />
</head>
<body>
Redirecting to http://this.is.a.test/
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T00:54:45.237

当我向[http://www.facebook.com/l.php?u=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DBwCjI4mWPFI&h=yAQG6-ic8AQF_aOjn3QCJxdul6VnDN1Ho_ltT2gX90NF-vQ](http://www.facebook.com/l.php?u=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DBwCjI4mWPFI&h=yAQG6-ic8AQF_aOjn3QCJxdul6VnDN1Ho_ltT2gX90NF-vQ)发出 GET 请求时，我得到了以下响应（为了便于阅读，我在 HTML 中添加了一些换行符）：

```
HTTP/1.1 200
Content-Length: 349
Cache-Control: private, no-cache, no-store, must-revalidate
Expires: Sat, 01 Jan 2000 00:00:00 GMT
P3P: CP="Facebook does not have a P3P policy. Learn why here: http://fb.me/p3p"
Pragma: no-cache
Refresh: 1;URL=http://www.youtube.com/watch?v=BwCjI4mWPFI
X-Content-Type-Options: nosniff
X-Frame-Options: DENY
Set-Cookie: ***removed***
Content-Type: text/html; charset=utf-8
X-FB-Debug: ***removed***
Date: Fri, 27 Apr 2012 00:49:25 GMT
Connection: close

<html>
<head></head>
<body>
<script type="text/javascript">
document.location.replace("http:\/\/www.youtube.com\/watch?v=BwCjI4mWPFI");
</script>
<script type="text/javascript">
setTimeout("(new Image()).src=\"\\\/laudit.php?r=JS&u=http\\u00253A\\u00252F\\u00252Fwww.youtube.com\\u00252Fwatch\\u00253Fv\\u00253DBwCjI4mWPFI\";",5000);
</script>
</body>
</html> 
```

一个简短的试验得知`Refresh`标题足以让这个工作。这是 PHP 中的一个简单实现：

```
<?php

header("Refresh: 1;URL=http://www.a-website-without-favicon.com/");

?> 
```

但是，如前所述：这仅在您所指的网站没有网站图标时才有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T02:44:37.057

虽然我不完全确定 Facebook 是如何做到的，但您可以尝试使用[此处](https://stackoverflow.com/questions/1237707/load-website-into-div)建议的代理 PHP 脚本和 AJAX 内容加载。

```
/* proxy.php */
<?php echo file_get_contents($_GET['url']);?>

<html><body><div id="contentArea"></div></body></html>

$("#contentArea").load('proxy.php?url=http://example.com'); 
```

首先，您将使用您喜欢的`favicon.ico`. 然后使用 AJAX，您将加载保留旧`favicon.ico`.

# vim - 如何让vim默认跳转到第一个标签

> ID：10184236
> 
> 赞同：3
> 
> 时间：2012-04-17T02:20:08.780
> 
> 标签：vim, editor, ctags

我在红帽工作。我发现这个操作系统中的 Vim 在我执行时默认不会跳转到第一个标签`:ta foo`。

例如，有几个标签名为“foo”。而现在我进入`:ta foo`，它会像这样显示出来`:ts foo`。所以每次我都要输入`q 1`跳到第一个。这似乎很不方便。我可以改变它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T15:52:32.070

我注意到我的 .vimrc 中的以下设置阻止了跳转到第一个标签。

`set cscopetag`

# asp.net - 保存 QueryString 以保护 URL 操作

> ID：10184251
> 
> 赞同：0
> 
> 时间：2012-04-17T02:22:51.857
> 
> 标签：asp.net, request.querystring

有没有办法在页面加载后保存查询字符串 ID？我正在寻找的原因是......我应该在页面上来回走动，更重要的是，如果用户尝试修改 id，那么它不应该影响我的页面结果，因为我将不是从查询字符串中读取 Id但从一些保存道具或类似的东西。

举个例子：假设页面第一次加载......我有这个网址：

```
http://www.somesite.com/Shop/Product/Detail.aspx?ProductId=100 
```

如果用户尝试修改 querystirng 并重新加载页面，那么 page_load 不应该从查询字符串中读取，而是从保存的道具或其他东西中读取？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T02:38:07.457

在您的页面加载事件中查看 Page.IsPostBack 属性。首次加载页面时为假。然后您应该验证您的参数，并可能将它们保存到会话或视图状态。

```
If Page.IsPostback = false Then
    'Validate Request("ProductID") here
    'Save in viewstate or session state
Else
    'Retrieve ProductID from viewstate or session state
End If 
```

如果用户更改了查询字符串，您应该将其视为新页面加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T02:47:24.080

这是行不通的，因为它违背了互联网的基本性质。**互联网是无国籍的。**

每次用户更改查询字符串时，都会将其视为新的 Url，存储参数将毫无用处。Page.IsPostback 也不起作用，因为每次 Url 更改都将是第一次点击。

话虽如此，您仍然可以解决它，

1.  对于每个 Url，您都可以传递一个唯一标识符（如 GUID。）

2.  一旦页面点击，您可以在会话中保存参数并使用它们并使用 Guid 映射两个请求。

但是问题仍然存在，如果用户再次更改该 Guid，它将被视为新请求。您可以提前一步开始​​保存该 GUID，以确保仅处理系统生成的 GUID，但总体而言，它只会使您的系统变得复杂。

我的猜测是，您可能正在为您的问题寻找错误的解决方案。如果您可以分享您的实际目标，那么我们也许可以向您推荐一些更具体的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T02:47:32.333

您不能阻止用户编辑查询字符串值并尝试查看另一个页面的内容或执行某些操作。你可以做的是你可以在页面加载中检查这个用户有足够的权限访问这个页面。

```
Ex : www.mysite.com/editproduct.aspx?productid=4 
```

在`editproduct.aspx`中，您必须检查产品 4 是否可以由正在访问页面的当前用户访问。（可能他应该是创建者/他应该在特定的高级用户组中等等......取决于您的情况）。如果他有权访问，则向用户显示编辑表单，否则将其隐藏并显示消息“您无权访问此资源”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T22:02:59.203

没有办法; 但是，您可以使用 session 来验证何时调用 Page_load。

```
If ( Page.isPostBack = true ) {
    Session("SAVE") = false;
} 
```

在 Request.Querystring 语句之前的一段时间内，您验证了“保存”会话状态。

# visual-studio-2008 - 如何在 T4 模板中使用自定义指令？

> ID：10184252
> 
> 赞同：0
> 
> 时间：2012-04-17T02:23:06.107
> 
> 标签：visual-studio-2008, .net-3.5, c#-3.0, t4

我在一个项目中创建了一个自定义 T4 指令处理器，现在我想在另一个项目的 T4 模板中使用该处理器，但我收到以下错误：

> `MyNamespace.MyCustomDirectiveProcessor`名为 ' ' 的指令处理器的类型 ' '`MyCustomDirectiveProcessor`并非派生自 `Microsoft.VisualStudio.TextTemplating.DirectiveProcessor`。转换将不会运行。

我的指令处理器类是这样定义的：

```
using Microsoft.VisualStudio.TextTemplating;

namespace MyNamespace
{
    public class MyCustomDirectiveProcessor : DirectiveProcessor
    {
        // etc.
    }
} 
```

*我需要做什么才能使自定义指令起作用？*我已按照[本文档](http://msdn.microsoft.com/en-us/library/cc138364%28v=vs.90%29.aspx)中的指南将指令处理器添加到注册表。我在项目的后期构建步骤中这样做，我已经定义了我的指令处理器类，并且我确保项目已构建并添加了注册表项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:53:58.880

经过一番挖掘，我在这里发现了问题。原来我使用的是旧版本的**Microsoft.VisualStudio.TextTemplating.dll**。我的版本是**8.1.0.0**，如“添加引用”对话框中所列。

安装[Visual Studio 2008 SDK 1.0](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=508)后，我看到我有一个新版本：**9.0.0.0**。当我构建链接到新版本 .DLL 的项目时，一切正常。

希望这可以帮助一些仍然在 VS2008 上迷失的可怜灵魂！

# linux - 禁用调度程序以减少自旋锁上的 cpu 时间

> ID：10184253
> 
> 赞同：0
> 
> 时间：2012-04-17T02:23:07.177
> 
> 标签：linux, scheduler, kvm, spinlock

在 linux 中，在 kvm 环境中，当 VM 中的某个进程锁定某个资源并被抢占时，需要该锁定资源的 VM 的其他进程将花费时间进行自旋锁。当分配给处理器时，该进程将解锁资源。

我想禁用调度程序预清空，直到进程解锁资源。这将减少自旋锁上的 cpu 时间。

如何实现上述？IE

1.  如何找出VM中的进程是否锁定了某些资源？

2.  那么如何通知调度器在资源解锁之前不要抢占进程呢？

如果在任何地方错了，请纠正我..

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T02:48:18.647

使用 spinlock_irq_save() 调用。它以原子方式禁用中断和抢占并锁定自旋锁。有关用例，请参见[http://www.kernel.org/doc/Documentation/spinlocks.txt](http://www.kernel.org/doc/Documentation/spinlocks.txt)。

# asp.net - 使用 HttpValidationStatus.IgnoreThisRequest

> ID：10184254
> 
> 赞同：0
> 
> 时间：2012-04-17T02:23:19.953
> 
> 标签：asp.net, caching

我正在研究缓存失效机制，遇到了 HttpValidationStatus.IgnoreThisRequest。

我了解，当指定此项时，ASP.Net 会将响应视为缓存未命中。

另一点是此响应中收到的动态值不会替换现有缓存，因此后续请求将使用已缓存的结果。

1.  这样的机制有什么用？
2.  为什么有人想要使用已经缓存的结果，即使有了最新的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-24T07:52:49.420

使用 HttpValidationStatus.IgnoreThisRequest。适用于您不想仅为该请求显示缓存页面的情况。

例子：

```
public void Page_Load()
{
  Response.Cache.AddValidationCallback(new HttpCacheValidateHandler(ValidateCache), null);
}

public static void ValidateCache(HttpContext context, Object data, ref HttpValidationStatus status) 
{
    validationstatus = context.Request.IsAuthenticated ? HttpValidationStatus.IgnoreThisRequest : HttpValidationStatus.Valid;
} 
```

在这种情况下，我想为除登录用户之外的所有人提供缓存页面。

考虑一个 cms：我可能希望编辑器看到刚刚编辑的页面，而不是缓存的页面。

# android - 我们如何找到启动其他应用程序的信息？

> ID：10184256
> 
> 赞同：2
> 
> 时间：2012-04-17T02:23:31.230
> 
> 标签：android, android-intent, action, manifest, intentfilter

我需要允许用户绘制/素描/绘画一些东西。已经有很多应用程序（比如 Skitch，我将以此为例）完成这项任务。所以我不想重新发明轮子。
在Android中，理论上，我们可以通过intent来启动其他activity。这有点像 Unix 中的“管道”。
问题是，我不知道如何获取启动 Skitch 的信息。
要将 Skitch 集成到我的应用程序中，我需要知道它支持的动作、完成时返回的意图（如果有的话）。

我在我的设备中安装了 Skitch、[photoshop](http://www.openintents.org/en/node/362)和许多其他触控绘图应用程序，但这段代码不起作用：

```
Uri data = Uri.fromFile(file);
Intent i = new Intent(Intent.ACTION_EDIT);
i.setData(data);
i.setType("image/*");                               
startActivityForResult(i, ACTIVITY_DRAW); 
```

我可以通过以下方式从我的应用程序启动 Skitch：但显然我无法通过这种方式获得任何返回结果（代码来自[这里](https://stackoverflow.com/questions/2780102/open-another-application-from-your-own-intent)）。

```
Intent i = new Intent(Intent.ACTION_MAIN);
PackageManager manager = getPackageManager();
i = manager.getLaunchIntentForPackage("com.evernote.skitch");
i.addCategory(Intent.CATEGORY_LAUNCHER);
startActivity(i); 
```

我的问题：是否有标准方法来查找启动第三方应用程序的信息？[这个网站](http://www.openintents.org/)
是共享/获取此类信息的唯一途径吗？ 或者，如果您对我的问题有任何建议，请帮助我。 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T05:13:24.833

您可能已经知道如何从您的应用程序中调用另一个应用程序 Activity **[..这里提到了这种方式。](https://stackoverflow.com/questions/2728465/how-to-call-one-android-application-from-another-android-application)**

```
Intent intent = new Intent(Intent.ACTION_RUN); 
intent.setComponent(new ComponentName("<packet name>", "<class name>")); 
List list = packageManager.queryIntentActivities(intent, packageManager.COMPONENT_ENABLED_STATE_DEFAULT); 

if(list.size() > 0) 
{ 
 Log.i("Log", "Have application" + list.size()); 
 startActivity(intent); 
} 
else 
{ 
    Log.i("Log", "None application"); 
} 
```

您的所有要求主要是调用任何活动的两件事

1) 该活动的包名称 2) 活动类名称

这两个信息只有在开源或免费使用的情况下才可用..如 Zxing、Google Maps Application。

还有另一种启动应用程序活动的方法，例如，

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_CALL);
intent.setData(Uri.parse("tel:" + numberField.getText())); // set the Uri
startActivity(intent); 
```

要使用这种方式，需要知道要调用的 Activity 的正确 Action 以及要传递的正确参数。

再说一次，这些信息只有在开源或免费使用的情况下才可用......比如 Facebook 和 Gmail 应用程序来分享和发布消息。

因此，如果您正在搜索可以告诉您需要传递什么来调用设备中的任何特定商业应用程序的任何东西，您不会直接找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T06:58:49.807

这是一个老问题，但也许它可以帮助某人知道 Sony 的 AppXplore 应用程序（免费）显示您设备上安装的每个应用程序的活动包和名称，因此您最终可以使用它们来执行明确的意图。

# c - 如何从places.sqlite firefox 数据库中检索值？

> ID：10184263
> 
> 赞同：2
> 
> 时间：2012-04-17T02:24:43.360
> 
> 标签：c, firefox, sqlite

好吧，我正在尝试从`places.sqlite`数据库中获取一些值。但是当我这样做时

`$ sqlite3 /home/<user>/.mozilla/firefox/xx.default/places.sqlite "SELECT url FROM moz_places"`

我收到以下错误：`Error: file is encrypted or is not a database`如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T12:32:39.500

最有可能的是，“sqlite3”命令使用的 sqlite3-library 与 firefox 使用的一个版本不匹配。在我的笔记本电脑上，您引用的命令执行没有错误。（Ubuntu 10.10、Firefox 11.0、libsqlite3-0 3.7.2-1ubuntu0.1）

（参考：[错误：文件已加密或不是数据库](https://stackoverflow.com/questions/1513849/error-file-is-encrypted-or-is-not-a-database)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T16:56:23.547

在 Firefox 3.6 前后，用于这些文件的 SQLite 版本更改为使用 3.7 或更高版本。当您尝试使用许多流行的 SQLite 浏览器时遇到的错误正是您所看到的。（错误：文件已加密或不是数据库）

我知道您正在使用 *nix 框，但如果您可以访问 Windows 框，SQLite Expert Personal 版本 3.4.31.2253 支持浏览 Firefox 15.0.1 的此文件。

当前版本的 SQLite 浏览器（确实有 Linux 版本）不使用 SQLite 3.7，因此它不会打开 Firefox 15.01places.sqlite 或 cookies.sqlite..

抱歉，我没有方便的 Linux 机器来测试那里可用的 SQL 浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T18:43:53.713

听起来仍然像版本控制问题。如果您的 SQLite 库是动态加载的，则您可能选择了错误的版本。检查您的 LD_LIBRARY_PATH 环境变量（我假设您在 *nix 机器上）。

# java - JDBC 代码不会创建表

> ID：10184265
> 
> 赞同：0
> 
> 时间：2012-04-17T02:25:01.530
> 
> 标签：java, jdbc

当前尝试使用测试 SQL 运行将对象插入到 Customer 表中。但是，我运行测试的所有内容，编译器都会返回以下异常：

```
Exception in thread "main" java.lang.RuntimeException: error finding Customer
    at edu.depauw.csc480.dao.CustomerDAO.find(CustomerDAO.java:78)
    at edu.depauw.csc480.dao.CustomerDAO.insert(CustomerDAO.java:87)
    at edu.depauw.csc480.dao.DatabaseManager.insertCustomer(DatabaseManager.java:84)
    at edu.depauw.csc480.Test.main(Test.java:18)
Caused by: java.sql.SQLSyntaxErrorException: Table/View 'CUSTOMER' does not exist.
    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source) 
```

我一遍又一遍地查看代码，但是，我似乎找不到错误，因为它编译得很好，只是没有运行。下面是我的 CustomerDAO 类中的创建方法和查找方法。

```
public Customer find(int custID) {
        if (cache.containsKey(custID)) return cache.get(custID);

        try {
            String qry = "select name from CUSTOMER where custID = ?";
            PreparedStatement pstmt = conn.prepareStatement(qry);
            pstmt.setInt(1, custID);
            ResultSet rs = pstmt.executeQuery();

            String name = rs.getString("name");
            String address = rs.getString("address");
            String email = rs.getString("email");

            rs.close();

            Customer cust = new Customer (this, custID, name, address, email);

            cache.put(custID, cust);
            return cust;
        } catch (SQLException e) {
            dbm.cleanup();
            throw new RuntimeException("error finding department", e);
        }
    }

    // Insert new CartItem & returns it if the key does not already exist.

    public Customer insert (int custID, String name, String address, String email) {
        try {
            // make sure that the deptid is currently unused
            if (find(custID) != null)
                return null;

            String cmd = "insert into CUSTOMER(custID, name, address, email) "
                       + "values(?, ?, ?, ?)";
            PreparedStatement pstmt = conn.prepareStatement(cmd);
            pstmt.setInt(1, custID);
            pstmt.setString(2, name);
            pstmt.setString(3, address);
            pstmt.setString(4, email);

            pstmt.executeUpdate();

            Customer cust = new Customer(this, custID, name, address, email);

            cache.put(custID, cust);

            return cust;
        }
        catch(SQLException e) {
            dbm.cleanup();
            throw new RuntimeException("error inserting new department", e);
        }
    } 
```

关于导致错误的任何想法？

**编辑：这是我的 CustomerDAO.java 类，它与其他 SQL 命令一起处理表的创建。**

```
public class CustomerDAO {

    private Connection conn;
    private DatabaseManager dbm;
    private Map<Integer, Customer> cache;

    public CustomerDAO (Connection conn, DatabaseManager dbm) {
        this.conn = conn;
        this.dbm = dbm;
        this.cache = new HashMap<Integer, Customer>();
    }

    static void create(Connection conn) throws SQLException {
        Statement stmt = conn.createStatement();
        String s = "create table CUSTOMER("
                + "name string, "
                + "custID string, "
                + "address string, "
                + "email string " 
                + "primary key(custID))";
        stmt.executeUpdate(s);
    }

    // Modifies CartItem table and adds foreign key constraints (tables need to already be created)

    //static void addConstraints(Connection conn) throws SQLException {
        //Statement stmt = conn.createStatement();
        //String s = "alter table Customer "
        //      + "foreign key(shoppingCartID) references shoppingCart(shoppingCartID)";
        //stmt.executeUpdate(s);
    //}

    //Finds CartItem object by primary key.

    public Customer find(int custID) {
        if (cache.containsKey(custID)) return cache.get(custID);

        try {
            String qry = "select name from CUSTOMER where custID = ?";
            PreparedStatement pstmt = conn.prepareStatement(qry);
            pstmt.setInt(1, custID);
            ResultSet rs = pstmt.executeQuery();

            String name = rs.getString("name");
            String address = rs.getString("address");
            String email = rs.getString("email");

            rs.close();

            Customer cust = new Customer (this, custID, name, address, email);

            cache.put(custID, cust);
            return cust;
        } catch (SQLException e) {
            dbm.cleanup();
            throw new RuntimeException("error finding department", e);
        }
    }

    // Insert new CartItem & returns it if the key does not already exist.

    public Customer insert (int custID, String name, String address, String email) {
        try {
            // make sure that the deptid is currently unused
            if (find(custID) != null)
                return null;

            String cmd = "insert into CUSTOMER(custID, name, address, email) "
                       + "values(?, ?, ?, ?)";
            PreparedStatement pstmt = conn.prepareStatement(cmd);
            pstmt.setInt(1, custID);
            pstmt.setString(2, name);
            pstmt.setString(3, address);
            pstmt.setString(4, email);

            pstmt.executeUpdate();

            Customer cust = new Customer(this, custID, name, address, email);

            cache.put(custID, cust);

            return cust;
        }
        catch(SQLException e) {
            dbm.cleanup();
            throw new RuntimeException("error inserting new department", e);
        }
    }

    //Clears Data from CartItem Table

    void clear() throws SQLException {
        Statement stmt = conn.createStatement();
        String s = "delete from CUSTOMER";
        stmt.executeUpdate(s);
        cache.clear();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T02:36:06.823

该错误表明它找不到表“客户”。如果您可能拼错了表名，请检查您的数据库。也许您的连接有问题，请尝试从数据库中的任何其他表中检索数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T02:49:48.927

关键在这里

```
Caused by: java.sql.SQLSyntaxErrorException: Table/View 'CUSTOMER' does not exist. 
```

解决方法：

第一步，检查create方法和query方法的连接是否是同一个数据库。

第二步，调试你的代码。在 create 方法中设置断点，当方法执行时
检查表 'CUSTOMER' 是否创建。

# clojure - 使用doseq 和atoms 而不是循环/递归

> ID：10184266
> 
> 赞同：1
> 
> 时间：2012-04-17T02:25:04.430
> 
> 标签：clojure

我一直在用 Clojure 重写 Land Of Lisp 的兽人战斗游戏。在此过程中，我使用了更实用的样式。我想出了两种方法来编写更高级别的游戏循环的一部分。一个涉及循环/递归，另一个使用doseq 和atoms。下面是两个函数：

```
(defn monster-round [player monsters]
  (loop [n 0 p player]
    (if (>= n (count monsters))
      p
      (recur (inc n)
         (if (monster-dead? (nth monsters n))
           p
           (let [r (monster-attack (nth monsters n) p)]
             (print (:attack r))
             (:player r)))))))

(defn monster-round-2 [player monsters]
  (let [p (atom player)]
    (doseq [m monsters]
      (if (not (monster-dead? m))
        (let [r (monster-attack m @p)]
             (print (:attack r))
             (reset! p (:player r)))))
    @p)) 
```

我更喜欢第二种方法，因为代码更简洁，更容易理解。第一种方法更好有什么理由吗？还是我错过了另一种方法来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T02:56:32.830

这是等价的吗？如果是这样，我更喜欢它-它比您的解决方案更紧凑，更清晰（恕我直言！），并且功能强大

```
(defn monster-round [monsters player]
  (if-let [[monster & monsters] monsters]
    (recur monsters
      (if (monster-dead? monster)
        player
        (let [r (monster-attack monster player)]
          (print (:attack r))
          (:player r))))
    player)) 
```

（注意：我将参数顺序更改为`monster-round`使递归看起来更好）

更一般地说，你不应该`n`在你的“功能”版本中引入（如果你有一个索引，它就不是真正的功能......）。很少需要对序列进行索引。如果你更努力地抵制诱惑，我想你会写出上面的例程......

但是，在写完之后，我想：“嗯。这只是对怪物的迭代。为什么我们不能使用标准形式？它不是 for 循环，因为玩家会改变。所以它必须是折叠（即减少），这带球员前进”。然后很容易写：

```
(defn- fight [player monster]
  (if (monster-dead? monster)
    player
    (let [r (monster-attack monster player)]
      (print (:attack r))
      (:player r))))

(defn monster-round [player monsters]
  (reduce fight player monsters)) 
```

哪个（如果它符合您的要求）是正确答案（tm）。

（也许我没有回答这个问题？我认为你错过了更好的方法，如上所述。一般来说，你应该能够围绕数据结构进行计算，这通常不需要突变；通常你可以 - 并且应该 -使用标准形式，如 map 和 reduce，因为它们有助于为其他人记录流程）。

# fonts - 如何将 Google 字体转换为 png 或 gif？

> ID：10184278
> 
> 赞同：4
> 
> 时间：2012-04-17T02:26:34.970
> 
> 标签：fonts, typography, google-font-api

我一直在使用 Google 字体作为我的网络应用程序的徽标。但似乎它的渲染效果不如我预期的那么好。但我仍然喜欢我一直在使用的字体。所以我想把它变成 png 或 gif 并将图像用作徽标。

做这样的事情最简单的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T02:35:18.740

虽然 Aatch 认为 Web 字体不必创建图像的想法是正确的，但您始终可以将字体下载到您的计算机并在 Photoshop 中创建徽标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T02:34:34.153

截取在浏览器中呈现最好的文本的屏幕截图。KDE 和 Windows 中的 Ctrl-PrintSrc。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T02:45:32.610

在 Mac 上截屏：CMD+Shift+4 在 Windows 上：在 Linux 上打开打印屏幕程序：PrintSrc

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T17:16:29.773

截图，在 Photoshop 中裁剪。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-23T23:43:40.467

我发现这个很棒的网站可以帮助您将 Google 字体文本转换为图像。该网站是[Picas](https://picas.vercel.app/)。[Picas](https://picas.vercel.app/)是开源的。你可以在他们的仓库中找到源代码。

请参阅[https://picas.vercel.app/](https://picas.vercel.app/)。

请参阅源代码[https://github.com/djyde/Picas](https://github.com/djyde/Picas)。

**预习：**

[![在此处输入图像描述](../Images/4c1d03f27633495c878c5ae6c6acf934.png)](https://i.stack.imgur.com/YL756.png)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2018-01-25T14:38:32.300

我遇到了同样的需要谷歌字体的静态图像。

这是一个巨大的时间消耗，所以我最终用 puppeteer/lambda 自动化了它。我有可供下载的每种谷歌字体的最新渲染@ [gfontpng.com](https://gfontpng.com/)

# java - 为什么这个 getFile 实例可以与 SVNKit 一起使用？

> ID：10184281
> 
> 赞同：0
> 
> 时间：2012-04-17T02:26:47.977
> 
> 标签：java, svnkit

我正在尝试从 SVNKit 文档中的文档中编写/改编的方法，但无济于事。如果文件与特定修订版匹配，我正在尝试打印出文件的内容。问题是我不确定如何正确使用 getfile 调用。我只是不确定我需要传递给它的字符串。任何帮助将不胜感激！！

```
 public static void listEntries(SVNRepository repository, String path, int revision, List<S_File> file_list) throws SVNException {
      Collection entries = repository.getDir(path, revision, null, (Collection) null);
      Iterator iterator = entries.iterator();
      while (iterator.hasNext()) {
           SVNDirEntry entry = (SVNDirEntry) iterator.next();

           if (entry.getRevision() == revision) {
                SVNProperties fileProperties = new SVNProperties();
                ByteArrayOutputStream baos = new ByteArrayOutputStream();
                S_File toadd = new S_File(entry.getDate(), entry.getName(), entry.getRevision());                

                try {                        
                    SVNNodeKind nodeKind = repository.checkPath(path + entry.getName(), revision); //**PROBLEM HERE**

                    if (nodeKind == SVNNodeKind.NONE) {
                        System.err.println("There is no entry there");
                        //System.exit(1);
                    } else if (nodeKind == SVNNodeKind.DIR) {
                        System.err.println("The entry is a directory while a file was expected.");
                        //System.exit(1);
                    }                        
                    repository.getFile(path + entry.getName( ), revision, fileProperties, baos);

                } catch (SVNException svne) {
                    System.err.println("error while fetching the file contents and properties: " + svne.getMessage());
                    //System.exit(1);
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:59:42.923

问题可能与早期版本中的路径不同有关，例如 /Repo/components/new/file1.txt [rev 1002] 可能已从 /Repo/components/old/file1.txt [rev 1001] 移出. 尝试在路径 /Repo/components/new/ 处获取修订版 1001 的 file1.txt 将引发 SVNException。

SVNRepository 类有一个[getFileRevisions](http://svnkit.com/kb/javadoc/org/tmatesoft/svn/core/io/SVNRepository.html#getFileRevisions%28java.lang.String,%20java.util.Collection,%20long,%20long%29)方法，该方法返回一个 Collection，其中每个条目都有一个给定修订号的路径，因此可以将该路径传递给 getFile 方法：

```
String inintPath = "new/file1.txt";
Collection revisions = repo.getFileRevisions(initPath, 
                       null, 0, repo.getLatestRevision());
Iterator iter = revisions.iterator();
while(iter.hasNext())
{
SVNFileRevision rv = (SVNFileRevision) iter.next();

InputStream rtnStream = new ByteArrayInputStream("".getBytes());
    SVNProperties fileProperties = new SVNProperties();
    ByteArrayOutputStream baos = new ByteArrayOutputStream();

    repo.getFile(rv.getPath(), rv.getRevision(), fileProperties, baos); 
} 
```

# android - (Android) 向 sqlite 插入数千行

> ID：10184282
> 
> 赞同：1
> 
> 时间：2012-04-17T02:26:48.657
> 
> 标签：android, sqlite

我无法将大量数据插入 Android sqlite 数据库（约 7000 行数据）。我正在使用 InsertHelper，但它似乎并没有加快速度。有没有其他方法可以有效地将这么多数据插入到数据库中？

谢谢。

编辑：

我找到了解决办法。我的插入代码如下（为简洁起见省略了细节）：

```
public void addEntries(ArrayList<KeywordMap> keywords) {
        if (keywords == null || keywords.size() == 0)
            return;

        mDb.beginTransaction();

        String sql = "Insert into " + AUTOCOMPLETE_TABLE + " (path, name, course_id, " +
                "course_id_norm, type, year) values(?,?,?,?,?,?)";
        SQLiteStatement insert = mDb.compileStatement(sql);

        for (KeywordMap keyword : keywords) {
            insert.bindString(1, keyword.path);
            insert.bindString(2, keyword.name);
            insert.bindString(3, keyword.cid);
            insert.bindString(4, keyword.cid_norm);
            insert.bindDouble(5, keyword.type);
            insert.bindDouble(6, keyword.year);

            insert.execute();
        }

        mDb.setTransactionSuccessful();
        mDb.endTransaction();
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T03:03:40.387

```
db.beginTransaction()

//insert, insert, insert … n-insert

db.setTransactionSuccessful();
db.endTransaction(); 
```

# php - 上传图片并创建链接

> ID：10184283
> 
> 赞同：-1
> 
> 时间：2012-04-17T02:26:57.653
> 
> 标签：php, upload

我正在尝试创建一个 php 页面，该页面允许您将图片上传到数据库，然后立即从那里创建一个链接（mywebsite.com/image/random-numbers-and-letters/），它将重定向到页面等等. 我对 php 还很陌生，在这个主题上找不到任何很有帮助的东西。图片将是唯一上传的东西，没有密码、描述或任何东西。

感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T02:30:51.300

[PHP 手册](http://us.php.net/manual/en/features.file-upload.post-method.php)解释了如何编写用于上传的 HTML 表单，以及如何将上传的文件移动到您选择的目录和文件名。因此，只需将文件移动到 www 目录中的目录，并使用您在移动文件时选择的文件名创建链接。

请务必检查并正确处理重复的文件名。

# ruby-on-rails - 解码base64 cookie时未设置会话中的user_id？

> ID：10184285
> 
> 赞同：0
> 
> 时间：2012-04-17T02:27:05.703
> 
> 标签：ruby-on-rails, session

```
 def create
    user = User.find_by_email(params[:email])

    if user && user.authenticate(params[:password])
      session[:foo] = "bar"
      session[:user_id] = user.id
      redirect_to root_url, notice: "Signed in!"
    else
      flash.now[:error] = "Email or password is invalid."
      render "new"
    end
  end 
```

当我解码 base64 cookie 时，我得到：

```
{I"session_id:EFI"%14cd484a34917f7d923ef8222c16e0e1;TI"foo;FI"bar;FI"_csrf_token;FI"1ajWlOZok1Amp8Nh9uOdUWzeM20b873zocEbyiR+b1ao=;FI"user_id;Fi } 
```

为什么 my`session[:foo]`设置但不是 my `session[:user_id]`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:02:39.340

在我看来它已设置，但它的值`user_id`是这样的，它的`Marshal.dump`输出（这是 cookie 存储的）是不可打印的或空白字符。如果您对为什么 only`user_id`会以这种方式受到影响感兴趣，则必须查看 marshal 格式的详细信息（似乎没有被广泛记录）。我猜想对于整数，ruby 基本上会吐出字节值，这通常会导致无法打印。

我不知道您是如何进行 base64 解码的，但是如果您在 ruby​​ 控制台中进行解码，则检查的默认输出确实显示不可打印的字符

# python - Django 存储来自 _POST 的 HTML 输入数组

> ID：10184286
> 
> 赞同：0
> 
> 时间：2012-04-17T02:27:08.127
> 
> 标签：python, html, django, json

所以我将一个站点从 PHP(Codeigniter) 转换为 Django，认为这将是一个很好的学习方式。我可以解决大多数问题，但是我被困在这个问题上。

在 PHP 中我可以`$e->estimate = json_encode($_POST['estimate']);`

要将 HTML 输入数组作为 JSON 编码字符串存储在数据库中，python/django 是否提供任何类似的功能。

我正在查看，`simplejson.dumps(request.POST['estimate'])`但这会引发 MultiValueDictKeyError

POST 包含以下项目`estimate[discount] estimate[tax]
estimate[shipping]`

那么 Django/Python 可以做上面的事情，获取一个 HTML 输入数组，JSON 解析它并将其存储在数据库中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T02:47:06.057

在查看了 django 中的文档后，我发现 request.POST 是一个 QueryDict 对象。

> 类 QueryDict
> 
> 在 HttpRequest 对象中，GET 和 POST 属性是 django.http.QueryDict 的实例。QueryDict 是一个类字典类，定制用于处理同一个键的多个值。这是必要的，因为某些 HTML 表单元素，特别是 为同一个键传递多个值。

在[https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.QueryDict](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.QueryDict)。

由于字典（JSON 对象或 Python 字典）不能有多个键，因此 JSON 序列化程序会抛出 MultiValueDictKeyError，表示您有多个相同的键。

不确定 php 是如何做到的，但可以通过以下方式之一进行修复

1.  复制 POST QueryDict 并修改内容，这样就没有任何重复的键。

2.  更改正在提交的表单数据。

使用 QUEyDict 的原因是，对于提交的表单，您可能有效地从表单中获取多个键，用于多选字段等。

希望有帮助。

标记

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T02:55:47.580

你遇到的问题是`MultiValueDictKeyError`里面没有`estimate`钥匙`MultiValueDict` `request.POST`。尝试

```
# list existed keys
request.POST.keys()
# or
discount = request.POST.get('estimate[discount]')
tax = request.POST.get('estimate[tax]')
shipping = request.get('estimate[shipping]') 
```

然后你可以构建类似的东西

```
estimate = dict(discount=discount, tax=tax, shipping=shipping)
simplejson.dumps(estimate) 
```

但是，这*不是* [Django 中处理表单的正常方式](https://docs.djangoproject.com/en/1.4/#forms)。

# svn - 如何将我的本地 svn 项目导入新创建的 svn 存储库并保留历史信息

> ID：10184289
> 
> 赞同：1
> 
> 时间：2012-04-17T02:28:16.280
> 
> 标签：svn

我们公司的svn服务器崩溃了，数据全部丢失。

这是一个在开发机器上有最新数据的项目，我想将它导入到新创建的svn服务器，并保留提交历史信息（至少是版本号），然后让其他人将那里的项目切换到新服务器。

是否可以？以及如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T10:22:12.100

如果您有备份，则可以使用以下命令将其还原到新机器：

```
svnadmin load "C:\SvnData\Project" < "C:\Backup.dump" 
```

如果您没有备份，您可以导出然后将当前工作副本导入新存储库，但您将丢失版本控制历史记录。

# ruby-on-rails - 在 Rails 控制器中重构代码

> ID：10184290
> 
> 赞同：1
> 
> 时间：2012-04-17T02:28:17.960
> 
> 标签：ruby-on-rails, controller, refactoring

我的控制器中有两个动作

```
def up_vote
    lesson = Lesson.find(params[:id])
    current_user.up_vote!(lesson)
    flash[:message] = 'Thanks for voting!'
    redirect_to lesson_path(lesson)
end

def down_vote
    lesson = Lesson.find(params[:id])
    current_user.down_vote!(lesson)
    flash[:message] = 'Thanks for voting!'
    redirect_to lesson_path(lesson)
end 
```

我想知道什么是重构这个的好方法（记住 DRY）？我在网上读到我不应该试图滥用 before_filter。那我还能用什么？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T03:52:56.493

```
def vote_up
  vote(:up)
end

def vote_down
  vote(:down)
end

protected

def vote(direction)
  lesson = Lesson.find(params[:id])
  current_user.send :"#{direction}_vote!",lesson
  flash[:message] = 'Thanks for voting!'
  redirect_to lesson_path(lesson)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T02:31:10.987

最明显的是使用带有`up_or_down`参数的单一方法。

```
def vote(up_or_down)
    lesson = Lesson.find(params[:id])
    if up_or_down.eql? "up"
      current_user.up_vote!(lesson)
    elsif up_or_down.eql? "down"
      current_user.down_vote!(lesson)
    else
      # send an error message or just return
    end
    flash[:message] = 'Thanks for voting!'
    redirect_to lesson_path(lesson)
end 
```

# jquery - Jquery 显示/隐藏切换下一步

> ID：10184293
> 
> 赞同：1
> 
> 时间：2012-04-17T02:28:29.430
> 
> 标签：jquery, toggle, show-hide

我在页面上有多个产品都通过数据库拉入。在每个我都有一个评论框，我想通过单击评论按钮来显示和隐藏。

我的Javascript：

```
$(document).ready(function(){

    $("#product-box div#product-comment-box").hide();
    //$("#product-box div.comment").show();

$("#product-box div.comment").click(function(){
    $("li div#product-comment-box").toggle();
}); 
```

我的产品区域 HTML：

```
<li><div id="product-box">
    <div id="product-image"><a href="#"><img src="images/image_2.jpg"></a></div>
    <div id="product-controls">
        <a href="#"><div id="button" class="more"><p>More</p></div></a>
        <a href="#"><div id="button" class="add"><p>Add</p></div></a>
        <div id="button" class="comment"><p>Comment</p></div>
        <a href="#"><div id="button" class="like"><p>Like</p></div></a>
    </div>
    <p>Product Name</p>
    <div id="product-comment-box">Comment</div>
    </div></li> 
```

**但这正在设法切换每个产品上的所有评论框**，我如何最好地将它们分开？我尝试使用 next 和 nextAll，但没有运气。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T02:32:28.623

您必须使用`this`来引用当前评论。记住选择器在做什么，获取 DOM 中匹配的所有内容。

```
$("#product-box div.comment").click(function(){
    $(this).closest('li').find('div#product-comment-box').toggle();
}); 
```

虽然按 id 选择似乎不是一个好主意。尝试给那个 div 一个类，然后选择它。

```
//Change
<div id="product-comment-box">Comment</div>

//To
<div class="product-comment-box">Comment</div>  

//then select using class instead.
$("#product-box div.comment").click(function(){
    $(this).closest('li').find('div.product-comment-box').toggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T03:11:42.293

您也可以尝试这种方式...传递 id 像

```
 <div id="comment<?php echo "Your db id" ?>" class="show_to_public">

              </div>
              <div id="product-comment-box<?php echo "Your db id" ?>">

              </div> 
```

这样你就可以在你的jquery中将它分开为..

```
 $('.show_to_public').click(function(e){   
        var id=$(this).attr("id").replace("comment","");
        $('#product-comment-box'+id).toggle();
      }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T03:15:13.337

在单击处理程序中，`this`关键字是指您单击的元素。

从[文档](http://api.jquery.com/bind/)：

handler 参数采用回调函数，如上所示。在处理程序中，关键字 this 指代处理程序绑定到的 DOM 元素。要使用 jQuery 中的元素，可以将其传递给普通的 $() 函数。例如：

```
$('#foo').bind('click', function() {
  alert($(this).text());
}); 
```

您需要利用该元素来找到您正在寻找的元素。在你的例子中，这样的事情会起作用：

```
$(this).closest('li').find('.product-comment-box') 
```

...几乎。请注意，我使用了一个名为“product-comment-box”的类而不是 ID。这是因为 ID 仅用于唯一元素，并且永远不应该用于多个元素。因此，您还需要将所有重复的 ID 替换为类。只需将 'id' 替换为 'class' 应该可以在您使用的代码段中使用，但按钮除外，因为它们已经有一个类。对于那些，您可以用空格分隔类：

```
<div class="button like">... 
```

# mysql - 为什么我的数据库消失然后出现，现在又消失了？

> ID：10184294
> 
> 赞同：0
> 
> 时间：2012-04-17T02:28:32.327
> 
> 标签：mysql, phpmyadmin, cpanel

我在 cpanel 上，并与 phpmyadmin 一起工作。

我创建了一个子域，然后创建了一个数据库，并更改了一些设置。（2 天前）

但是现在当我登录到 cpanel 时，我看到有这样的东西`ctrl + z`！我的意思是 5 个月前创建的唯一数据库现在仍然存在，我 2 天前创建的数据库不在我的数据库列表中！+ 我更改了菜单设置（将“数据库”菜单放在顶部，将“首选项”菜单放在 cpanel 主页的底部......）但现在就像默认的 cpanel 设置一样。

有什么问题？

*   我 75% 确定我的 cpanel 登录没有被黑客入侵。
*   我更改了 cpanel 密码，但没有更改 phpmyadmin 密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T02:33:15.387

您的主机可能已恢复备份。问他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T02:55:38.713

最近我的 vps 帐户也发生了类似的事情。虽然我的数据库出现在 mysql 数据库菜单列表中，但它们在备份菜单中不再可用。我尝试更改主题并解决了问题。我遇到问题的主题是 X3。

在我的情况下，我认为主题一定是由于最近的控制面板更新而被破坏，因为我注意到登录页面发生了巨大变化，但我不确定这是否与您正在处理的问题相同。

为了澄清，我改变了 WHM 而不是 cpanel 中的主题。从 X3 到 X2。X2 显然已贬值，因此无论根本问题是什么，这都不是长期解决方案；只是想我会分享以防万一它帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T03:03:02.983

您的虚拟主机只能为您分配一个数据库。联系他们的支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T16:33:31.403

我发现了问题。

我联系了主机提供商，我发现了问题。他说根据你那里的网络问题以及我们之前更换服务器的操作，你的主机有时是新服务器加载的，有时是以前的服务器加载的！因此，当我从我的计算机创建数据库时，它连接到第一个数据库，然后您浏览网页或再次我从另一个地方检查网站，然后我连接到第二个服务器，发现没有任何数据库！

我没有太多经验，所以我不知道，这个答案是真的还是开玩笑！

# css - “E:target”在 iframe 中不起作用？

> ID：10184297
> 
> 赞同：2
> 
> 时间：2012-04-17T02:28:47.523
> 
> 标签：css, google-chrome, target

**在 Chrome 20.0.1115.1 dev-m 中修复此错误**

* * *

我在 chrome20 中发现了一个错误。你知道吗？

[http://jsdo.it/GeckoTang/x9Lo](http://jsdo.it/GeckoTang/x9Lo)

HTML(http://jsdo.it/GeckoTang/x9Lo)

```
<iframe src="http://jsrun.it/GeckoTang/x9Lo"></iframe> 
```

HTML(http://jsrun.it/GeckoTang/x9Lo)

```
<div id="hoge1">
<div id="hoge2">
    <a href="#hoge1">#hoge1</a>
    <a href="#hoge2">#hoge2</a>
</div>
</div> 
```

CSS

```
#hoge1:target {background:red;}
#hoge1:target [href$="#hoge1"]{font-weight:bold;}
#hoge2:target {background:gold;}
#hoge2:target [href$="#hoge2"]{font-weight:bold;} 
```

*   不工作
    *   铬 20.0.1096.1 开发-m
    *   20.0.1104.0 金丝雀
*   在职的
    *   Chrome 19.0.1084.24 测试版（Mac）
    *   铬18
    *   IE9
    *   火狐11.0
    *   火狐3.6.12
    *   火狐10.0
    *   Firefox Nightly13.0a
    *   Safari5.1.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T02:32:16.027

尝试在目标上使用`name`除了。`id`

# c# - 使用 asp.net mvc 3 的信用卡详细信息的数据类型

> ID：10184302
> 
> 赞同：0
> 
> 时间：2012-04-17T02:29:59.420
> 
> 标签：c#, asp.net-mvc-3, data-annotations

有点困惑，我尝试在我的信用卡详细信息和电话中使用 int 数据类型的最大和最小长度，但我不知道如何去做。

```
 [Required(ErrorMessage = "Telephone is required")]
    public int Telephone { get; set; }
    [Required(ErrorMessage = "Card Type is required")]
    [DisplayName("Card Type")]
    [StringLength(20)]
    public string CardType { get; set; }
    [Required(ErrorMessage = "Card Holders Name is required")]
    [DisplayName("Card Holders Name")]
    [StringLength(160)]
    public string CardHoldersName { get; set; }
    public int CardNumber { get; set; }
    public int CardExpMonth { get; set; }
    public int CardExpYear { get; set; }
    [ScaffoldColumn(false)]
    public decimal Total; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T02:38:59.397

为什么将卡号存储为整数？字符串不是更合适吗？

字符串可以处理您需要的任何 cc 号码。它还可以处理（用于进一步处理）用户在数字之间输入空格的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T02:35:34.473

如果要以`CardNumber`数字格式存储 ，请使用`long`. [一个 32 位签名`int`的最大值是`2,147,483,647`](https://stackoverflow.com/questions/94591/what-is-the-maximum-value-for-a-int32)——记住，[`int`](http://msdn.microsoft.com/en-us/library/5kzh1b5w%28v=vs.110%29.aspx)是它的[同义词`System.Int32`](https://stackoverflow.com/questions/62503/c-int-or-int32-should-i-care)——远不足以容纳一个 16 位的信用卡号。A [`long`(aka `System.Int64`)](http://msdn.microsoft.com/en-us/library/ctetwysk%28v=vs.110%29.aspx)的最大值为`9,223,372,036,854,775,807`，因此它可以容纳每个 18 位数字。

请注意，a `uint`（无符号 32 位整数）仍然不够大，因为它的最大值仅为`4,294,967,295`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T03:44:48.697

使用`BigInteger`命名空间中可用的结构`System.Numerics`

我认为这对你有用

[http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)

在 .NET 中处理令人难以置信的大量数字

[http://www.codeproject.com/Articles/2728/C-BigInteger-Class](http://www.codeproject.com/Articles/2728/C-BigInteger-Class)

# android - 如何判断 AsyncTaskLoader 是否正在运行

> ID：10184304
> 
> 赞同：4
> 
> 时间：2012-04-17T02:30:15.967
> 
> 标签：android, asynctaskloader

我开始`AsyncTaskLoader`使用这个：

```
getLoaderManager().initLoader(0, null, this); 
```

我想我可以用它来判断它是否正在运行：

```
Boolean isRunning = (getLoaderManager().getLoader(0) != null && getLoaderManager().getLoader(0).isStarted()); 
```

但`isRunning`总是返回`true`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T02:17:37.380

int LoaderManager.LoaderCallbacks' onLoadFinished 方法，我通常

```
getLoaderManager().destroyLoader(loader.getId()); 
```

然后

```
Boolean isRunning = getLoaderManager().getLoader(0) != null 
```

# c# - 使用缓存 ASP.NET

> ID：10184306
> 
> 赞同：0
> 
> 时间：2012-04-17T02:30:22.900
> 
> 标签：c#, asp.net-mvc, session, caching

如何在 ASP.NET 中使用所有用户都可以访问的缓存，而不仅仅是特定的用户上下文，同时在用户关闭浏览器窗口或过期（如会话对象）时自动删除此缓存的特定键？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T02:34:35.377

缓存可供所有用户访问，您可以将其设置为在一段时间后过期：

```
Cache.Insert("key", myTimeSensitiveData, null, 
DateTime.Now.AddMinutes(1), TimeSpan.Zero); 
```

通过实现 global.asax 的会话结束事件，您可以在会话到期时删除缓存条目

```
void Session_End(Object sender, EventArgs E) 
{ 
  Cache.Remove("MyData1");
} 
```

有关缓存的更多详细信息，请参阅[此内容](http://msdn.microsoft.com/en-us/library/aa478965.aspx)

**编辑：** 关于您在用户关闭浏览器时如何做出反应的问题，我认为这并不简单。您可以在客户端尝试 javascript 来处理“卸载”事件，但这并不可靠，因为浏览器/客户端可能会崩溃。在我看来，“心跳”方法会起作用，但需要额外的努力。有关更多信息，请参阅此[问题](https://stackoverflow.com/questions/3682386/how-to-know-a-user-has-left-the-website-or-close-the-browser-window-immediately)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T02:52:55.567

您必须使用[Session_OnEnd() 事件](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionstatemodule.end.aspx)从缓存中删除该项目。但是，如果用户只是关闭浏览器，则不会触发此事件。该事件只会在会话超时时触发。您可能应该添加一个检查以查看该项目是否已被删除：

```
public void Session_OnEnd()
{
    // You need some identifier unique to the user's session
    if (Cache["userID"] != null)
        Cache.Remove("userID");
} 
```

此外，如果您希望缓存中的项目在用户会话期间保持活动状态，则需要对项目使用滑动到期并在每次请求时刷新它。我在 OnActionExecuted（仅限 ASP.NET MVC）中执行此操作。

```
protected override void OnActionExecuted(ActionExecutedContext filterContext)
{
    // Put object back in cache in part to update any changes
    // but also to update the sliding expiration
    filterContext.HttpContext.Cache.Insert("userID", myObject, null, Cache.NoAbsoluteExpiration,
        TimeSpan.FromMinutes(20), CacheItemPriority.Normal, null);

    base.OnActionExecuted(filterContext);
} 
```

# iphone - 将“-fno-objc-arc”标志批量添加到（多个）源文件

> ID：10184307
> 
> 赞同：11
> 
> 时间：2012-04-17T02:30:25.903
> 
> 标签：iphone, objective-c, ios, xcode4, automatic-ref-counting

将 Xcode 项目转换为 ARC（自动引用计数）后，我需要为我的一些源文件（主要是第三方代码）禁用 ARC。

我知道我需要为这些文件中的每一个设置“-fno-objc-arc”标志，但是 Xcode 没有给我批量编辑的选项 - 我需要手动将此标志添加到每个文件中，这可能很乏味如果您需要为多个文件设置它。

有没有人对此有聪明的方法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-17T02:32:05.470

选择要添加标志的那些（使用`Shift`和/或`Command`），然后按`Enter`显示标志编辑器。按*完成*将输入的标志应用到选定的文件。

**教程**

我撰写了[一篇博](http://blog.evanmulawski.com/?p=36)文作为此过程的教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T15:39:59.043

到目前为止，最简单的选项就是使用 Edit > Refactor 下的 ARC 转换工具。

这不是很清楚，但基本上你只需检查任何你想使用 ARC 的文件，然后取消选中你不想使用的任何文件。这将执行以下操作：

1) 未选中的文件将应用 -fno-objc-arc 标志

2) 选中的文件将转换为 ARC

3) 已被检查的已转换为 ARC 的文件将保持不变

再仔细阅读一遍。有时让人们感到困惑的是，他们认为在再次运行该工具时应该不选中已经转换的文件，但这会错误地将 -fno-objc-arc 应用于这些文件（导致泄漏）。

您应该将 ARC 转换工具视为“批量选择 ARC 兼容文件并转换尚未 ARC 的文件”工具，而不是直接转换工具。

您可以根据需要多次运行转换工具 - 效果不是累积的（尽管将文件转换为 ARC 是不可逆的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T02:36:36.917

> 我需要设置不应该支持 ARC 的文件（主要是 3rd-party 代码）。

除了管理标志之外，您可以简单地为这些源创建一个静态库，然后链接。

# android - 如何将自动首选项文件绑定到android中的自定义首选项

> ID：10184315
> 
> 赞同：4
> 
> 时间：2012-04-17T02:32:21.273
> 
> 标签：android, sharedpreferences, preferenceactivity, listpreference

我刚刚为我正在创建的一个示例应用程序实现了一个首选项屏幕。我按照谷歌网站上给出的指南进行操作。一切都很好，我加载了一个 ListPreference 并且我能够存储它并保留它。这里还有一个小问题。我已经为应用程序定义了一个自定义首选项文件，但首选项屏幕的这种自动处理似乎是在自己创建一个首选项文件。现在我试图让这个代码工作，但它没有得到自定义首选项文件。

```
 final Preference customPrefs = getPreferenceScreen().findPreference(Utils.PREFS_NAME);

    customPrefs.setOnPreferenceClickListener(new OnPreferenceClickListener() {

        public boolean onPreferenceClick(Preference preference) {
            customPrefs.getEditor().commit();
            return true;
        }
    }); 
```

无论如何，有没有办法将自定义首选项文件与此自动首选项类绑定？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T22:05:51.187

`PreferenceActivity`您可以通过调用其`getPreferenceManager().setSharedPreferencesName("file_name")`方法为用于存储您的首选项的文件设置自定义名称。请记住，您需要在调用*之前*`addPreferencesFromResource`进行设置，否则您的 UI 仍会将内容更改回错误的文件（默认文件）。

正如我所说，您*不需*要这样做，因为您可以使用系统提供的默认文件。如果/当您需要在其他地方阅读首选项时，您可以调用`PreferenceManager.getDefaultSharedPreferences(Context context)`.

我已经[在另一个问题中谈到了这些言论](https://stackoverflow.com/a/8156525/489607)。

另请记住，某些方法已被弃用。如果您正在编写新代码，请尽量避免使用它们并遵循新的“片段方式”做事。

# javascript - Nodejs从字符串执行导出的函数

> ID：10184319
> 
> 赞同：3
> 
> 时间：2012-04-17T02:33:00.650
> 
> 标签：javascript, node.js

我想知道是否可以在nodejs中运行一个名为字符串的函数。所有这些代码都在服务器端运行，根本没有浏览器外观。

**`test.js`假设我使用以下代码导出文件**

```
module.exports.test = function(x)
{
   console.log(x*5);
} 
```

**我能以某种方式做到这一点吗？**

**main.js**

```
imp = require('test.js');
toExecute = "test";

// somehow call imp.test using toExecute` 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T02:40:31.753

当然：

```
imp[toExecute](5); 
```

日志`25`。

# java - 在mysql数据库中保存blob文件

> ID：10184321
> 
> 赞同：0
> 
> 时间：2012-04-17T02:33:11.627
> 
> 标签：java, mysql, xml, model-view-controller, jsp

我正在使用休眠项目在我的 springmvc 中的 mysql 数据库中保存 blob 文件。但是在上传了几个 blob 文件后，我的项目中出现错误，因为内存错误 java 堆空间不足。谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T02:38:46.013

您的应用程序不会释放文件的内容。不知何故，对它们的引用保留在内存中。您可以使用探查器来跟踪此引用存在的位置。

# objective-c - 如何更改 navigationController 的 rootViewController

> ID：10184325
> 
> 赞同：-2
> 
> 时间：2012-04-17T02:34:09.750
> 
> 标签：objective-c

在 appDelegate 中，我创建了一个 A_NavigationController 成为 self.window.rootViewController，并设置一个 X_ViewController 成为 rootViewController，在另一个 viewController 推送后，我创建一个新的 B_NavigationController ，设置一个新的 Y_ViewController 成为 rootViewController 并使用 presentModalViewController 方法，添加了 B_NavigationeController。现在我想做的是，当我解散 Y_ViewController 时可以改变 A_NavigationController 的 rootViewController。

```
 self.viewController = [[AViewController alloc] initWithNibName:@"AViewController" bundle:nil];
    self.navCon=[[UINavigationController alloc]initWithRootViewController:self.viewController];

    self.window.rootViewController = self.navCon;

  BViewController *bView=[[BViewController alloc]initWithNibName:@"BViewController" bundle:nil];
        UINavigationController *navCon=[[UINavigationController alloc]initWithRootViewController:bView];
        [self.navigationController presentModalViewController:navCon animated:YES];

//in BViewController.m
//I want a method to change the window's rootViewController. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T02:46:10.410

“rootViewController”只是navigationStack底部的UIViewController。要更改它，您只需将索引 0 处的对象设置为您想要的任何控制器

# c# - 无法使用接口转换类型异常的对象

> ID：10184334
> 
> 赞同：-2
> 
> 时间：2012-04-17T02:35:07.867
> 
> 标签：c#

我在单独的程序集中创建了一个接口，并在 2 个不同的项目中添加了对它的引用。

在一个项目中，我尝试创建一个实现接口的类型的实例，但我得到了一个无法转换类型异常的对象。

这是代码，这里显示了 3 个代码片段。例外当然是 Form1_load

```
namespace InvoiceBuilder
{
    public interface IInvoiceBuilder
    {
        string Execute(ListView.CheckedListViewItemCollection items);
    }
}

   private void Form1_Load(object sender, EventArgs e)
    {
        Assembly assembly = Assembly.LoadFrom(@"c:\users\malcolm\documents\mdsdevstudio\InvoiceBuilder.dll");

        Type type = assembly.GetType("InvoiceBuilder.WordDocumentBuilder");

        IInvoiceBuilder instanceOfMyType = (IInvoiceBuilder)Activator.CreateInstance(type);

        string msg = instanceOfMyType.Execute(new ListView.CheckedListViewItemCollection(null));
        MessageBox.Show(msg);
    }

namespace InvoiceBuilder 
{
public class WordDocumentBuilder : IInvoiceBuilder
{
    string _clientName;
    //    Object _templateFile = @"C:\Data\Invoices\Invoicetemplate.doc";
    //    const string _invoicesPath = @"C:\Data\Invoices";
    Object _templateFile = @"C:\Users\Malcolm\Documents\Invoicing\Invoicetemplate.doc";
    const string _invoicesPath = @"C:\Users\Malcolm\Documents\Invoicing";
    List<Task> _tasks;
    TimesheetsDBDataContext _ctx = new TimesheetsDBDataContext();
    bool _newInvoicePerProject;
    decimal _gstRate = 0;
    double _hours=0;
    decimal _subtotal=0;
    decimal _total = 0;
    decimal _gst = 0;
    string _invoiceNo;
    string _msg = "";

    public WordDocumentBuilder()
    {
    }

    public string Execute(ListView.CheckedListViewItemCollection items)
    {
        return BuildDocument(items);
    }

    public string BuildDocument(ListView.CheckedListViewItemCollection items)
    {
        try
        {
            MainForm frm = new MainForm();
            frm.ShowDialog();
            _newInvoicePerProject = frm.CreateNewInvoicePerProject;
            _gstRate = frm.GstRate / 100;
            GetTasks();
            ProcessData(items);
        }
        catch (Exception ex)
        {
            _msg += ex.ToString();
        }

        return _msg;
    }

    private void ProcessData(ListView.CheckedListViewItemCollection items)
    {
        IQueryable list=null;
        List<TimesheetSelection> selections = GetSelectionList(items);
        if (_newInvoicePerProject)
        {
            list = from tsh in _ctx.TimeSheets
                   join sl in selections on tsh.tshID equals sl.tshID
                   group tsh by tsh.tshProID into g
                   select g;
        }
        else
        {
            list = from tsh in _ctx.TimeSheets
                   join sl in selections on tsh.tshID equals sl.tshID
                   group tsh by tsh into g
                   select g;
        }

        foreach (IGrouping<int, TimeSheet> timesheets in list)
        {
            BuildDocument(timesheets.ToList());
            UpdateRowsAsInvoiced(timesheets.ToList());
            AddInvoiceRow();
        }
    }

    private void BuildDocument(List<TimeSheet> timesheets)
    {
        Word._Application word=null;
        Word._Document doc;
        Word.Table table;
        Object missing = System.Reflection.Missing.Value;
        Object bookmarkname;
        object range=0;

        try
        {
            word = new Word.Application();

            //doc = word.Documents.Add();//
            doc = word.Documents.Open(ref _templateFile, ref missing, ref missing, ref missing, ref missing,
                ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing,
                ref missing, ref missing, ref missing, ref missing);

            GetInvoiceNo();
            string filename = GetDocumentFilename();
            _msg += filename + "created." + Environment.NewLine;

            bookmarkname = "InvoiceNo";
            doc.Bookmarks.get_Item(ref bookmarkname).Range.Text = _invoiceNo;
            bookmarkname = "InvoiceDate";
            doc.Bookmarks.get_Item(ref bookmarkname).Range.Text = DateTime.Today.ToString("dd/MM/yyyy");
            bookmarkname = "ClientName";
            _clientName = _ctx.Clients.Where(cli => cli.cliID == _ctx.Projects.Where(prj => prj.proID == timesheets[0].tshProID).Single().proCliID).Single().cliClientName;
            doc.Bookmarks.get_Item(ref bookmarkname).Range.Text = _clientName;
            bookmarkname = "Project";
            doc.Bookmarks.get_Item(ref bookmarkname).Range.Text = _ctx.Projects.Where(prj => prj.proID == timesheets[0].tshProID).Single().proProjectName;

            //doc.Range(ref range, ref range).Tables[1].Range.Font.Size = 0;

            table = doc.Range(ref missing, ref missing).Tables[1];
            table.Range.Font.Size = 9;

            int row = 2;
            foreach (TimeSheet timesheet in timesheets)
            {
                table.Rows.Add(ref missing);
                table.Cell(row, 1).Range.InsertAfter(timesheet.tshDate.Value.ToString("dd/MM/yyyy"));
                table.Cell(row, 1).Range.Bold = 0;

                table.Cell(row, 2).Range.InsertAfter(_tasks.Where(tsk => tsk.tskID == timesheet.tshTskID).Select(tsk => tsk.tskTaskDescription).Single());
                table.Cell(row, 2).Range.Bold = 0;

                table.Cell(row, 3).Range.InsertAfter(timesheet.tshDescription.ToString());
                table.Cell(row, 3).Range.Bold = 0;

                table.Cell(row, 4).Range.InsertAfter(timesheet.tshRate.Value.ToString("0.00"));
                table.Cell(row, 4).Range.Bold = 0;

                table.Cell(row, 5).Range.InsertAfter(timesheet.tshHours.ToString());
                table.Cell(row, 5).Range.Bold = 0;

                row += 1;
                _hours += Convert.ToDouble(timesheet.tshHours);
                _subtotal += Convert.ToDecimal(timesheet.tshHours) * timesheet.tshRate.Value;
            }

            string totaldesc;

            totaldesc = string.Format("Subtotal ({0} Hours):", _hours.ToString());

            table = doc.Range(ref missing, ref missing).Tables[2];

            table.Cell(1, 1).Range.InsertAfter(totaldesc);
            table.Cell(1, 1).Range.Bold = 1;

            _subtotal = Math.Round(_subtotal, 2);
            table.Cell(1, 2).Range.InsertAfter(string.Format("{0:c}", _subtotal));
            table.Cell(1, 2).Range.Bold = 1;

            _gst = Math.Round(_subtotal * _gstRate, 2);
            _total = Math.Round(_subtotal + _gst, 2);

            //Add Gst row
            table.Rows.Add(ref missing);
            table.Cell(2, 1).Range.InsertAfter("GST");
            table.Cell(2, 1).Range.Bold = 1;
            table.Cell(2, 2).Range.InsertAfter(string.Format("{0:c}", _gst));
            table.Cell(2, 2).Range.Bold = 1;

            //Add Total row
            table.Rows.Add(ref missing);
            table.Cell(3, 1).Range.InsertAfter("Invoice Total");
            table.Cell(3, 1).Range.Bold = 1;
            table.Cell(3, 2).Range.InsertAfter(string.Format("{0:c}", _total));
            table.Cell(3, 2).Range.Bold = 1;

            object fname = (object)filename;
            doc.SaveAs(ref fname, ref missing, ref missing, ref missing, ref missing, ref missing,
                ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing,
                ref missing, ref missing, ref missing);

            Object oFalse = false;
            doc.Close(ref oFalse, ref missing, ref missing);

        }
        catch (Exception ex)
        {
            throw ex;
        }
        finally
        {
            word.Quit(ref missing, ref missing, ref missing);
            word = null;
        }

    }

    private void UpdateRowsAsInvoiced(List<TimeSheet> timesheets)
    {
        foreach(TimeSheet timesheet in timesheets)
        {
            timesheet.tshInvoiced = true;
        }
        _ctx.SubmitChanges();
    }

    private void AddInvoiceRow()
    {
        Invoice invoice = new Invoice();

        invoice.invDate = DateTime.Today;
        invoice.invInvoiceNo = _invoiceNo;
        invoice.invClient = _clientName;
        invoice.invTotalHours = _hours;
        invoice.invSubtotal = _subtotal;
        invoice.invGST = _gst;
        invoice.invInvoiceTotal = _total;

        _ctx.Invoices.InsertOnSubmit(invoice);
    }

    private string GetDocumentFilename()
    {
        string filename = _invoicesPath + @"\Invoice_" + _invoiceNo + ".doc";

        return filename;
    }

    private void GetInvoiceNo()
    {
        string invno = DateTime.Today.ToString("yyyyMMdd");
        int suffix = 65;

        while (true)
        {
            suffix += 1;
            invno = DateTime.Today.ToString("yyyyMMdd") + ((char)suffix).ToString();
            bool exists = _ctx.Invoices.Where(inv => inv.invInvoiceNo == invno).Count() > 0;
            if (exists)
                break;
        }

        _invoiceNo = invno;
    }

    private List<TimesheetSelection> GetSelectionList(ListView.CheckedListViewItemCollection items)
    {
        List<TimesheetSelection> list = new List<TimesheetSelection>();

        foreach (ListViewItem lvi in items)
        {
            list.Add(new TimesheetSelection { tshID = Convert.ToInt32(lvi.Text) });
        }
        return list;
    }

    private void GetTasks()
    {
        _tasks = (from tsk in _ctx.Tasks select tsk).ToList(); 
    }
}

public class TimesheetSelection
{
    public int tshID { get; set; }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T02:46:25.470

很可能您有不止一个地方定义 IInvoiceBuilder 接口（即，您在单独的库和主程序中有接口）。

完整的错误信息将比代码页更有用......

# git - 如何在每次 git 提交时自动更新文件？

> ID：10184335
> 
> 赞同：0
> 
> 时间：2012-04-17T02:35:17.603
> 
> 标签：git, maven, glassfish

我希望在每次 git 提交时自动更新我的存储库中的文件（使用任何值，我只想更改其时间戳）。我怎样才能做到这一点？

我的理由是当我在服务器上构建它时强制我的 Glassfish 应用程序服务器重新加载我的 web 应用程序。我需要`touch`一个文件`.reload`来实现这一点。我不想手动执行此操作，而是希望`git pull origin; mvn build`在我的服务器上也保存`touch`该`.reload`文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T03:38:36.480

您可以只使用 Maven Antrun 插件或 Groovy Maven 插件甚至 Maven Exec 插件来执行 .reload 文件。但是，您也可以使用例如 Maven Cargo 插件将应用程序部署到 Glassfish 服务器作为构建的一部分。然后您甚至不必触摸重新加载文件，因为 Maven 会在服务器上重新部署应用程序作为构建的一部分..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T00:05:43.407

[git-hooks](http://book.git-scm.com/5_git_hooks.html)，多亏了我上面问题的评论者，似乎是要走的路。由于另一个答案，maven cargo 也是一个好方法；事实上，也许更适合部署，但如果你想做一些更通用的 git-hooks 更好。

# excel - Excel 2007 具有 2 个条件的条件格式，一个基于另一列

> ID：10184339
> 
> 赞同：7
> 
> 时间：2012-04-17T02:35:53.037
> 
> 标签：excel, excel-2007, vba

我正在使用 Excel 2007 中的表格。我试图根据其值及其状态（在另一列中）以一种格式突出显示一列中的单元格。

例如，我试图突出显示毛利润为负且状态为“IN”的所有单元格（仅单元格，而不是行）。这样做的正确方法是什么？我已经尝试过 if 语句，但没有太大的成功。而且我不确定如何将两个条件应用于单元格。我需要选择单元格的列或范围吗？还是我必须选择第一个单元格并复制格式？

谢谢，

```

例子：

```
项目 # 状态 毛利润

1 英寸 24.00 美元

2 出 $(34.00)

3 出 $12.00

4 英寸 18.00 美元

5 英寸 (9.00)

6 英寸 (40.00)

7 出 $32.00

8 出 $45.00

9 出 $23.00

10 英寸 43.00 美元

11 出 $(18.00)

12 美元 7.00 美元

13 英寸 $(25.00)

平均 $6.00

```

            回答 #1

赞同：14

时间：2012-04-17T03:32:27.103

这适用于 Excel 2010：

我假设您要突出显示的单元格在 C 列中...

*   突出显示 C 列中的所有单元格
*   点击条件格式->高亮单元格规则->更多规则
*   选择“使用公式...”
*   对于公式，输入： =AND(C2<0, $b2="IN")
*   单击“格式”按钮并选择您选择的突出显示颜色
*   点击确定

尽管您已经根据最顶层的单元格定义了公式，但 Excel 将推广到整个列。

```

# excel - 用于排除列标题从 Access 2007 传输到 Excel 2007 的代码

> ID：10184342
> 
> 赞同：2
> 
> 时间：2012-04-17T02:36:27.980
> 
> 标签：excel, ms-access, ms-access-2007, vba

这是我正在使用的代码。

它工作正常，但我需要知道排除列标题需要哪些额外代码。

```
Private Sub Command104ContrDonatWeekly_Click()
On Error GoTo Command104ContrDonatWeekly_Click_Err

    DoCmd.OpenQuery "Contributors Who Donated in Past Week", acViewNormal, acEdit

    xlfile = "C:\Users\Michael1\Desktop\KSN\DistributionListWeekly.xlsb"
    DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel12, _
    "Contributors Who Donated in Past Week", xlfile, True, "EmailList"

    Shell "Excel.exe " & xlfile, vbNormalFocus

Command104ContrDonatWeekly_Click_Exit:
    Exit Sub

Command104ContrDonatWeekly_Click_Err:
    MsgBox Error$
    Resume Command104ContrDonatWeekly_Click_Exit

End Sub 
```

这是一些代码

[如何编写 VBA 代码以隐藏 Excel 中的所有列和行标题？](https://stackoverflow.com/questions/3624110/how-to-write-vba-code-to-hide-all-the-column-and-row-headings-in-excel)

我不太清楚它需要与我已经使用的代码一起放在哪里。

```
Private Sub hideHeadings()
  Dim wrkbk As Workbook
  Dim wrksh As Worksheet
  Dim prev As Window

  Set prev = ActiveWindow

  For Each wrkbk In Workbooks
    For Each wrksh In wrkbk.Worksheets
        wrksh.Activate
        ActiveWindow.DisplayHeadings = False
    Next wrksh
  Next wrkbk

  prev.Activate

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T18:25:26.807

从访问：

```
Sub XLTrans()
''Reference: Microsoft ActiveX Data Object x.x Library
Dim rs As New ADODB.Recordset
Dim xl As Object ''Excel.Application
Dim wb As Object ''Workbook

Set xl = CreateObject("Excel.Application")

Set wb = xl.Workbooks.Add

''Connection relevant for 2007 or 2010
rs.Open "MyTableOrQuery", CurrentProject.AccessConnection

wb.Sheets(1).Cells(1, 1).CopyFromRecordset rs

xl.Visible = True

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T10:34:13.460

If you insist on using the transferspreadsheet;

```
DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel12, "tbl_one", xlfile, True

Dim xl As Object
Dim wb As Object

Set xl = CreateObject("Excel.Application")
Set wb = xl.Workbooks.Open(xlfile)

xl.DisplayAlerts = False
With wb.Worksheets(1)
    .Rows(1).Delete
End With
wb.Save
xl.Visible = True 
```

# sharepoint - Sharepoint People View - 添加包含组的列

> ID：10184347
> 
> 赞同：0
> 
> 时间：2012-04-17T02:37:04.060
> 
> 标签：sharepoint, sharepoint-2010

我想通过添加包含组信息的列来自定义人员视图。似乎我无法从列表设置中执行此操作，因为组列不存在。所以我想我需要在这里做一些定制开发。

推荐什么，我应该从头开始创建一个 web 部件并手动填充一个网格。或者有没有一种简单的方法来定制当前列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T00:55:17.257

我刚刚创建了一个 webpart 并使用 Sharepoint 对象模型 API 手动填充了网格。

# java - 用户单击通知时如何启动活动？

> ID：10184351
> 
> 赞同：16
> 
> 时间：2012-04-17T02:37:16.163
> 
> 标签：java, android, notifications, android-activity

我正在尝试转换我在教程中找到的一些代码供我自己使用。最初，当用户单击我的应用生成的通知时，代码会启动系统联系人列表。我正在尝试自己创建一个`Activity`而不是启动联系人列表，但它不起作用。更具体地说，没有任何反应。没有错误，我的`Activity`也没有加载。点击后通知窗口消失，原来`Activity`的仍然可见。

这是我的代码：

```
public class MyBroadcastReceiver extends BroadcastReceiver {
    private NotificationManager mNotificationManager;
    private int SIMPLE_NOTFICATION_ID;

    public void onReceive(Context context, Intent intent){
        Bundle extras = intent.getExtras();

        String deal = (String) extras.get("Deal");
        String title = "Deal found at " + (String) extras.get("LocationName");

        mNotificationManager = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notifyDetails = new Notification(R.drawable.icon, title,System.currentTimeMillis());

        Class ourClass;
        try {
            ourClass = Class.forName("com.kjdv.gpsVegas.ViewTarget");
            Intent startMyActivity = new Intent(context, ourClass);

            PendingIntent myIntent = PendingIntent.getActivity(context, 0,startMyActivity, 0);
            notifyDetails.setLatestEventInfo(context, title, deal, myIntent);
            notifyDetails.flags |= Notification.FLAG_AUTO_CANCEL;
            notifyDetails.flags |= Notification.DEFAULT_SOUND;
            mNotificationManager.notify(SIMPLE_NOTFICATION_ID, notifyDetails);
        }
        catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
} 
```

这是我在`AndroidManifext.xml`文件中的条目...

```
 <activity android:name=".ViewTarget" android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.kjdv.gpsVegas.ViewTarget" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
   </activity> 
```

这就是我`Activity`想要推出的...

```
public class ViewTarget extends ListActivity {
    public ListAdapter getListAdapter() {
        return super.getListAdapter();
    }

    public ListView getListView() {
        return super.getListView();
    }

    public void setListAdapter(ListAdapter adapter) {
        super.setListAdapter(adapter);
    }

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.locations);
        Log.v("db", "Inside ViewTarget");
    }
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-17T03:16:49.517

您在哪个 Android 版本上运行？您可能想尝试改用 NotificationCompat。此类包含在最新的支持包中。

```
Intent notificationIntent = new Intent(context, ViewTarget.class);
PendingIntent contentIntent = PendingIntent.getActivity(context,
                0, notificationIntent,
                PendingIntent.FLAG_CANCEL_CURRENT);

NotificationManager nm = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);

Resources res = context.getResources();
NotificationCompat.Builder builder = new NotificationCompat.Builder(context);
builder.setContentIntent(contentIntent)
       .setSmallIcon(R.drawable.app_icon)
       .setLargeIcon(BitmapFactory.decodeResource(res, R.drawable.app_icon))
       .setTicker(payload)
       .setWhen(System.currentTimeMillis())
       .setAutoCancel(true)
       .setContentTitle("Message")
       .setContentText(payload);
Notification n = builder.getNotification();

n.defaults |= Notification.DEFAULT_ALL;
nm.notify(0, n); 
```

编辑：我知道这是一个旧线程/问题，但这个答案帮助我在点击通知时显示活动。对于那些这不起作用的人可能是因为您没有在清单中“注册”该活动。例如：

```
<activity
   android:name="com.package.name.NameOfActivityToLaunch"
   android:label="Title of Activity" >
   <intent-filter>
     <action android:name="com.package.name.NAMEOFACTIVITYTOLAUNCH" />

     <category android:name="android.intent.category.DEFAULT" />
   </intent-filter>
</activity> 
```

而且，希望这应该有效。希望它有所帮助...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T02:01:18.270

我解决了这个问题。我忘记在清单文件的活动声明中包含包名称。

错误的：

```
activity android:name=".ViewTarget" android:label="@string/app_name" 
```

正确的：

```
activity android:name="com.kjdv.gpsVegas.ViewTarget" android:label="@string/app_name" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-20T14:28:52.220

您应该为 Intent 设置操作和类别。

```
Intent startMyActivity = new Intent(context, ourClass);
startMyActivity .setAction(Intent.ACTION_MAIN);
startMyActivity .addCategory(Intent.CATEGORY_LAUNCHER); 
```

有用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T03:04:30.233

您可以尝试删除 Intent 过滤器，它看起来像这样：

```
<activity android:name=".ViewTarget" android:label="@string/app_name" /> 
```

另外，不确定此代码是否有效：

`ourClass = Class.forName("com.kjdv.gpsVegas.ViewTarget"); Intent startMyActivity = new Intent(context, ourClass);`

你可以这样尝试吗：

`Intent startMyActivity = new Intent(context, ViewTarget.class);`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-17T03:20:59.583

检查此代码

```
 public class TestActivity extends Activity {
private static final int UNIQUE_ID = 882;

public static NotificationManager nm;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

        Intent navigationIntent = new Intent();

    navigationIntent.setClass(classname.this, MainActivity.class);

    PendingIntent pi = PendingIntent.getActivity(this, 0, navigationIntent,
            0);

    String body = "New notificattion added!!!";
    String title = "Notification";

    Notification n = new Notification(R.drawable.icon, body,
            System.currentTimeMillis());

            //this is for giving number on the notification icon

    n.number = Integer.parseInt(responseText);

    n.setLatestEventInfo(this, title, body, pi);
    n.defaults = Notification.DEFAULT_ALL;

    nm.notify(UNIQUE_ID, n); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-17T05:05:32.373

为了`Activity`从一个启动一个`Intent`，你需要添加一个标志：

```
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

即使您在`Intent`的构造函数中声明类也是如此。

# c - OpenGL - 调整窗口大小时保持纵横比

> ID：10184353
> 
> 赞同：4
> 
> 时间：2012-04-17T02:37:29.633
> 
> 标签：c, opengl

我正在方形窗口中绘制多边形。当我调整窗口大小时，例如通过全屏显示，纵横比受到干扰。从参考文献中，我找到了一种保留纵横比的方法。这是代码：

```
 void reshape (int width, int height) {
    float cx, halfWidth = width*0.5f;
    float aspect = (float)width/(float)height; 
    glViewport (0, 0, (GLsizei) width, (GLsizei) height);
    glMatrixMode(GL_PROJECTION); 
    glLoadIdentity(); 
    glFrustum(cx-halfWidth*aspect, cx+halfWidth*aspect, bottom, top, zNear, zFar);
    glMatrixMode (GL_MODELVIEW);
} 
```

这里，cx 是 X 中 zNear 平面的眼睛空间中心。我请求是否有人可以解释我如何计算这个。我相信这应该是 glFrustum() 最初两个参数的平均值。我对吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T04:47:56.163

看起来您想要做的是在纵横比发生变化时保持视野或视角。请参阅标题为[9.085 如何调用 glFrustum() 以匹配我对 gluPerspective() 的调用的部分？](http://www.opengl.org/archives/resources/faq/technical/transformations.htm)有关如何执行此操作的详细信息，请参阅 OpenGL 常见问题解答。这是简短的版本：

```
fov*0.5 = arctan ((top-bottom)*0.5 / near)
top = tan(fov*0.5) * near
bottom = -top
left = aspect * bottom
right = aspect * top 
```

有关详细信息，请参阅链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T04:36:08.563

前两个参数是眼睛空间中左右裁剪平面的 X 坐标。除非您正在使用离轴技巧（例如，在多个显示器上显示未居中的投影），否则左右应该具有相同的幅度和相反的符号。这将使您的 cx 变量为零。

如果您在理解 glFrustrum 时遇到困难，您总是可以使用 gluPerspective 来代替，它有一个稍微简化的界面。

# javascript - 如何在 GridView 页面更改上刷新父浏览器窗口

> ID：10184356
> 
> 赞同：1
> 
> 时间：2012-04-17T02:38:14.383
> 
> 标签：javascript, asp.net, .net, vb.net, gridview

我正在使用 ASP.net；我有一个弹出式浏览器窗口，其中包含一个带有文本框的数据绑定网格视图。它有一个“添加到订单”按钮，该按钮接受输入的值并更新数据库，然后关闭弹出窗口并刷新父级。这目前`window.opener.document.forms[0].submit();self.close();`在 RegisterScriptBlock 中完美使用

我现在需要在 gridview 页面 chage 上更新数据库，这样文本框的值就不会丢失。我放入`window.opener.document.forms[0].submit();`了数据网格的 PageIndexChanging 事件，但它不刷新父窗口。使用订单行刷新父窗口有助于用户查看他们已经订购的内容。我的更新数据库方法运行良好，只是没有刷新父浏览器。我也试过“window.opener.location.href = window.opener.location.href”无济于事。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:56:33.430

In parent aspx page write one JavaScript function

```
 function fnReload() {
        alert('hi')
        window.location.href = window.location.href;
    }

Protected Sub grdDisplay_PageIndexChanging(sender As Object, e As System.Web.UI.WebControls.GridViewPageEventArgs) Handles grdDisplay.PageIndexChanging 
    Dim strScript As New StringBuilder() 
    Call addItems() 
    grdDisplay.PageIndex = e.NewPageIndex 
    Call search() 
    ScriptManager.RegisterStartupScript(this.Page, this.Page.GetType(), "reload", "window.opener.fnReload();", true);
End Sub 
```

Also insert on alert in `fnReload()` function to check that this function called or not.

# ruby-on-rails - 当安装了 Xcode 4.3.2 并且缺少 gcc 时，如何使用 RVM 安装 Ruby 1.9.3？

> ID：10184357
> 
> 赞同：6
> 
> 时间：2012-04-17T02:38:25.663
> 
> 标签：ruby-on-rails, xcode, macos, rvm

我得到了一台带有 Lion 的新 iMac 并安装了 Xcode 4.3.2。运行后

```
curl -L get.rvm.io | bash -s stable 
```

我打开了一个新的`bash`，并使用

```
$ rvm install 1.9.3 
```

安装 Ruby 1.9.3，但出现错误，日志说 C 编译器不存在。并`rvm requirements`说：

```
$ rvm requirements
  [...]
Xcode 4.3+ users
- please be warned
- only ruby-1.9.3-p125+ is partially supported
- in case of any compilation issues:
 * downgrade to Xcode 4.1
 * uninstall Xcode and install osx-gcc-installer
and reinstall your rubies. 
```

那么这是否意味着我可能需要降级到 Xcode 4.1？如果我想保留 Xcode 4.3.2 怎么办？那么 1.9.3-p125+ 是否能够工作，但只能部分工作？

更新：或者安装 Ruby 1.9.2 怎么样——它可以与最新的 Rails 3.2.3 一起使用吗？如果是这样，如何添加gcc？（使用 Xcode 的 gcc？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T12:35:13.150

要安装 1.9.2 或更低版本，您需要按照此博文中的说明进行操作。它概述了如何获得与 Xcode 不冲突但可用于构建 Ruby 的 GCC 副本。

[Xcode 4.3、自制软件和 Ruby](http://jfire.io/blog/2012/03/02/xcode-4-dot-3-homebrew-and-ruby/)。

您无法安装 osx-gcc-installer，因为它会与 Xcode 4.3.2 冲突，覆盖 llvm-gcc 和 clang 的工作版本。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-17T14:36:41.760

安装[osx-gcc-installer](https://github.com/kennethreitz/osx-gcc-installer/downloads)

使用最新的红宝石：

```
rvm install ruby 
```

它将是`1.9.3-p125`最新的红宝石

# jquery - 对 jQuery 验证和服务器端验证使用相同的规则

> ID：10184360
> 
> 赞同：1
> 
> 时间：2012-04-17T02:38:56.870
> 
> 标签：jquery, json, validation

由于用户看到的规则应该与服务器使用的规则相同，因此我想将验证规则存储在 JSON 文件中并为这两种情况加载它们。

但是，jQuery 验证插件似乎使用了无效 JSON 的设置，例如

```
$('form').validate( {
    rules : {
        userid : {
            required : true,
            maxlength : 20
        }
    }
}); 
```

请注意没有一个键或字符串值是双引号的。这让我的服务器端 JSON 解析器很难过。我该怎么做才能只维护一套规则？

我的想法是，当请求实际发送到服务器时，我的服务器（在我的情况下为 Java servlet）将打开包含变量的 json 文件`rules`并对其进行解析，以便它知道将什么逻辑应用于发布的参数，并且是接受还是拒绝他们。

但是，JSON 规范不允许像 javascript 数组那样不带引号的键和值，所以我不能存储规则，因为它们通常只用于 jQuery 使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T02:52:46.600

虽然 JavaScript 文字并不总是有效的 JSON，但 JSON 始终是有效的 JavaScript 表达式。你可以使用它：

```
$('form').validate( {"rules":{"userid":{"required":true,"maxlength":20}}} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T02:53:03.650

有效的 json 是 Javascript 对象文字语法的子集。基本上，

```
{
    key1: 2,
    key2: true
} 
```

等同于：

```
{
    "key1": 2,
    "key2": true
} 
```

文字数字、布尔值和 null 是 JSON 中的特定值，因此如果您的解析器阻塞它们，那么您的解析器不正确。

您可以在 Javascript 中使用“JSON”。

JSON 实际上是 JavaScript 对象表示法，它被明确设计为有效的 Javascript，以至于这个想法是最坏的情况是你可以使用 eval 来解析它。JQuery 不使用特定的语法，它只需要一个特定的**结构化**对象，它不是映射，javascript 对象中没有字符串键的概念，只有有效标识符的成员和无效的成员。

如果您有一个名为 people-seen 的字段，那么您可以像这样将该规则输入到验证器中：

```
{ "people-seen": {
   required: true
}} 
```

# javascript - 拖动时光标变回 I 形

> ID：10184364
> 
> 赞同：3
> 
> 时间：2012-04-17T02:39:51.443
> 
> 标签：javascript, css, html

我的代码如下。我也有它在[http://jsfiddle.net/S2JHa/](http://jsfiddle.net/S2JHa/)

我不明白为什么当我在我的图片上单击并拖动鼠标时光标会变为 I 形。

如果我删除“一些文本”，那么它不会改变。这发生在 Chrome 中。FF没问题。

如果你能告诉我如何解决这个问题，我将不胜感激。谢谢！

```
<div id="window">
    <div>some text</div>
  <div id="sketch" class="box">
    <div class="contents">
      <canvas id="image-layer"></canvas>
    </div>
  </div>
</div>
​ 
```

CSS：

```
#window #sketch
{
    padding: 1cm 0;
}
#window #sketch canvas
{
    left: 0;
    position: absolute;
    top: 0;
}
#window #sketch .contents
{
    cursor: crosshair;
    position: relative;
}
div.box
{
    background-color: #fff;
    border: 1px solid black;
    border-radius: 0.3cm;
    cursor: move;
    left: 0;
    position: fixed;
    top: 0;
}
​ 
```

JavaScript：

```
function image_onload(e) {
    var image = e.target;

    $("div.box").draggable({
        cancel: "div.box div.contents",
        containment: "document"
    });

    var x = $("#window #sketch");

    // size to fit image
    x.css("width", image.width);
    x.css("height", image.height);

    // center sketch inside parent window
    x.css("left", ($(window).width() - x.width()) / 2);

    var canvas = document.getElementById("image-layer");

    canvas.height = image.height;
    canvas.width = image.width;

    var context = canvas.getContext("2d");
    context.drawImage(image, 0, 0);
}

function open(url) {
    var image = new Image();

    image.src = url;
    image.onload = image_onload;
}

open("http://upload.wikimedia.org/wikipedia/commons/6/63/Wikipedia-logo.png"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T04:00:31.780

如果您不想与画布进行交互，您可以取消 onmousedown 事件，如下所示：

```
canvas.onmousedown = function () {
    return false;
} 
```

您将需要：

```
canvas.onselectstart = function () { 
    return false;
} 
```

在此处查看更新的 jsfiddle：http: [//jsfiddle.net/S2JHa/11/](http://jsfiddle.net/S2JHa/11/)

# javascript - parseInt 总是返回 NaN？

> ID：10184368
> 
> 赞同：7
> 
> 时间：2012-04-17T02:40:21.890
> 
> 标签：javascript, nan, parseint

长话短说，我试图验证电话字段。我添加了`isNaN`and`parseInt`用于在该字段中检查，`" "`但那说

下面这个永远不会验证为真..我错过了什么？

```
if(isNaN(parseInt(phone))){
        error.text("Sorry but this phone field requires numbers only");
        return false;
    } else {
    return true;

    } 
```

它总是失败......即使我在字段中输入一个数字并提交，它也永远不会读取真实。我总是收到错误消息。

***编辑：***我正在测试表单中的输入值，`phone`是字段的名称。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-17T02:45:52.303

将 JS 字符串强制转换为数字的各种方法及其后果：

[![使用上述技术转换各种字符串的结果](../Images/c8e62c4d6a667b69d976d03a8474a370.png)](https://i.stack.imgur.com/ryT6p.png)
[（来源：[phrogz.net](http://phrogz.net/JS/string_to_number.png)）]

我个人使用`*1`它，因为它打字很短，但仍然很突出（与一元 + 不同），要么给我用户输入的内容，要么完全失败。我只`parseInt()`在我*知道*最后会忽略非数字内容时使用，或者当我需要解析非 base-10 字符串时使用。

**编辑**：根据您的评论，如果使用`phone.val()`已修复，则

1.  您正在使用 jQuery（您从未提及，并且应该有），并且
2.  您实际上拥有/拥有一个 jQuery 对象，包装了一个或多个 DOM 元素（可能只有一个）。

每当您这样做时`var foo = $('…');`，该`foo`变量都会引用一个或多个元素的 jQuery 对象。您可以通过`var fooEl = foo[0];`或`var fooEl = foo.get(0);`...从中获取第一个实际的 DOM 元素，但即便如此，您*仍然*有一个 DOM 元素，而不是它的特定属性。

对于表单输入，您需要`.value`从 DOM 元素中获取 jQuery`.val()`方法所做的事情。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-17T02:43:32.097

`parseInt`有时有点奇怪：

```
> parseInt("123-456-789")
123 
```

幸运的是，您可能可以通过以下方式解决您的问题：

```
> Number("123-456-789")
NaN 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-17T02:44:02.727

如果第一个字符无法转换为数字，则 parseInt 仅返回 NaN。

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-31T17:51:05.207

我已经看到`Number()`建议，但这仍然允许像`-21`or之类的东西`123.456`。检查字符串中是否缺少非数字的最佳方法如下：

```
function hasNonDigit(str){
  return /\D/g.test(str.toString());
}

console.log(hasNonDigit("123-456-7890"));
console.log(hasNonDigit("1234567890"));
```

# php - PHP正则表达式中的“字符类范围乱序”？

> ID：10184369
> 
> 赞同：12
> 
> 时间：2012-04-17T02:40:29.367
> 
> 标签：php, regex

我试图让这项工作一段时间但徒劳无功。我想创建一个 php 正则表达式来检查字符串是否具有至少一个数字和至少一个符号（ _-+=*& ）

这是我的正则表达式

```
 $result = preg_match('/^(?=.*\d)(?=.*[_-+=*&]).{3,}$/',$pass); 
```

我收到以下错误警告：preg_match() [function.preg-match]: Compilation failed: range out of order in character class at offset 17 in myfile.php on line 8

有什么帮助吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-17T02:46:01.270

`-`需要转义，或放置在列表的开头/结尾`[...]`：

```
$result = preg_match('/^(?=.*\d)(?=.*[-_+=*&]).{3,}$/',$pass); 
```

如果你不这样做，`-`则被解释为范围运算符，如果`x > y`你`[x-y]`得到那个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-05T16:24:20.477

`/u`当我收到此*警告*时，我在模式的末尾使用了。就试一试吧。这意味着**不贪婪的模式**

```
$pattern = "^([ `anything` ])$/u"; 
```

# mysql - 临时表中的自动增量

> ID：10184375
> 
> 赞同：0
> 
> 时间：2012-04-17T02:41:40.543
> 
> 标签：mysql, sql, auto-increment, temp-tables

我正在尝试创建一个具有自动递增关键字段的临时表。但我一直遇到语法错误。

这是我正在尝试的：

```
CREATE TEMPORARY TABLE
    RETURN_ARTISTS
        (KEY INT(11) NOT NULL AUTO_INCREMENT,
        ARTIST_1_KEY INT(11),
        ARTIST_2_KEY INT(11));

INSERT INTO RETURN_ARTISTS (1,1);

DELETE TABLE RETURN_ARTISTS; 
```

这是我不断收到的错误：

```
Err] 1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INT(11) NOT NULL AUTO_INCREMENT,
        ARTIST_1_KEY INT(11),
        ARTIST_2_KEY INT(' at line 3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T03:00:01.073

首先`key`是保留字，用`转义

其次，当使用 auto_increment 列时，该列必须定义为键。

```
CREATE TEMPORARY TABLE
`RETURN_ARTISTS`
    (`KEY` INT(11) NOT NULL AUTO_INCREMENT,
    ARTIST_1_KEY INT(11),
    ARTIST_2_KEY INT(11),
    KEY (`KEY`)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T02:50:23.593

`key`是保留字，因此您必须对其进行转义：

```
 (`KEY` INT(11) NOT NULL AUTO_INCREMENT,
     ^---^--- escapes 
```

或者，最好使用不同的字段名称。

# c++ - 用自己的版本替换 std::async 但 std::promise 应该在哪里生活？

> ID：10184377
> 
> 赞同：11
> 
> 时间：2012-04-17T02:42:14.740
> 
> 标签：c++, multithreading, c++11, future, promise

我正在使用 vc2011，结果发现 std::async(std::launch::async, ... ) 有点错误（有时它不会产生新线程并并行运行它们，而是重用线程和一个接一个地运行任务）。当我进行昂贵的网络调用时，这太慢了。所以我想我会编写自己的异步函数。我被卡住了，std::promise 应该在哪里生活？在 1) 线程函数、2) 异步函数或 3) 调用函数中。

代码：

```
#include <future>
#include <thread>
#include <iostream>
#include <string>
#include <vector>

std::string thFun() {
    throw std::exception("bang!");
    return "val";
}

std::future<std::string> myasync(std::promise<std::string>& prms) {
//std::future<std::string> myasync() {
    //std::promise<std::string> prms; //needs to outlive thread. How?

    std::future<std::string> fut = prms.get_future();
    std::thread th([&](){
        //std::promise<std::string> prms; //need to return a future before...
        try {
            std::string val = thFun();

            prms.set_value(val);

        } catch(...) {
            prms.set_exception(std::current_exception());
        }

     });

    th.detach();
    return fut;
}

 int main() {

    std::promise<std::string> prms; //I really want the promise hidden iway in the myasync func and not live here in caller code but the promise needs to outlive myasync and live as long as the thread. How do I do this?
    auto fut = myasync(prms);

    //auto fut = myasync(); //Exception: future already retrieved

    try {
        auto res = fut.get();
        std::cout << "Result: " << res << std::endl;

    } catch(const std::exception& exc) {
        std::cout << "Exception: " << exc.what() << std::endl;
    }

 } 
```

我似乎无法理解 std::promise 需要比 async 函数寿命更长（并且与线程一样长）的事实，因此 promise 不能作为 async func 中的局部变量存在。但是 std::promise 也不应该存在于调用者代码中，因为调用者只需要了解期货。而且我不知道如何在线程函数中实现承诺，因为异步需要在调用线程函数之前返回一个未来。我在这个问题上摸不着头脑。

有人有什么想法吗？

编辑：我在这里强调这一点，因为顶部评论有点误导。虽然允许 std::asycn 的默认值是 dererred 模式，但当显式设置 std::launch::async 的启动策略时，它必须表现得“好像”线程立即产生并运行（参见 en 中的措辞.cppreference.com/w/cpp/thread/async）。请参阅 pastebin.com/5dWCjjNY 中的示例，以了解这不是 vs20011 中所见行为的一种情况。该解决方案效果很好，并将我的实际应用程序加速了 10 倍。

编辑 2：MS 修复了这个错误。更多信息在这里：[https ://connect.microsoft.com/VisualStudio/feedback/details/735731/std-async-std-launch-async-does-not-behave-as-std-thread](https://connect.microsoft.com/VisualStudio/feedback/details/735731/std-async-std-launch-async-does-not-behave-as-std-thread)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-17T03:29:32.890

这是一种解决方案：

```
future<string> myasync()
{
    auto prms = make_shared<promise<string>> ();

    future<string> fut = prms->get_future();

    thread th([=](){

        try {
            string val = thFun();
            // ...
            prms->set_value(val);

        } catch(...) {
            prms->set_exception(current_exception());
        }

     });

    th.detach();

    return fut;
} 
```

在堆上分配 promise，然后将`[=]`shared_ptr 值传递给它到 lambda。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T22:57:52.710

您需要将承诺移动到新线程中。Andrew Tomazos 的答案是通过创建一个`std::promise`共享所有权来做到这一点，这样两个线程都可以拥有承诺，当当前线程从当前范围返回时，只有新线程拥有承诺，即所有权已经转移。但是`std::promise`是可移动的，所以应该可以将它直接移动到新线程中，除了捕获它的“明显”解决方案不起作用，因为 lambda 不能通过移动捕获，只能通过复制（或通过引用，这将不能像你得到一个悬空的参考一样工作。）

但是，`std::thread`支持将右值对象传递给新线程的启动函数。因此您可以声明 lambda 以`std::promise`按值获取参数，`promise`即将 lambda 传递而不是捕获它，然后将 promise 移入`std::thread`eg的参数之一

```
std::future<std::string> myasync() {
    std::promise<std::string> prms;

    std::future<std::string> fut = prms.get_future();
    std::thread th([&](std::promise<std::string> p){
        try {
            std::string val = thFun();

            p.set_value(val);

        } catch(...) {
            p.set_exception(std::current_exception());
        }

     }, std::move(prms));

    th.detach();
    return fut;
} 
```

这会将 Promise 移动到`std::thread`对象中，然后将其（在新线程的上下文中）移动到 lambda 的参数`p`中。

# git - Gitolite：git push origin master 失败并显示“致命：远程...”

> ID：10184378
> 
> 赞同：1
> 
> 时间：2012-04-17T02:42:23.703
> 
> 标签：git, push, gitolite

我们有一个新的 gitolite 服务器，我在那里工作，我无法将 repo 推送到服务器。

我克隆了 conf 文件，添加了我的 repo，然后将其推回。在确认空仓库存在后，我将仓库克隆到我的计算机上。我收到一条错误消息，警告您克隆了一个空的仓库。所以为了测试这个，我添加了一个 README，并提交它。没问题。但是，当我尝试使用更改将其推回服务器时，我得到一个`fatal: The remote end hung up unexpectedly`.

这也可能值得注意，但是当我在回购中工作时，我有一个小脚本用于提示，告诉我何时没有推送回购......这里不存在。

任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T04:10:50.220

确保：

*   您的`HOME`环境变量已定义
*   您的公钥在`%HOME%/.ssh`（或`$HOME/.ssh`在 Unix 上）

gitolite 的诀窍是公钥以你的名字命名。
即它不是以默认公钥名称（id_rsa.pub）命名的

在这种情况下，您需要一个 ssh 配置文件来指定私有（以及扩展为公共）密钥的名称：

```
$ vi ~/.ssh/config

host gitolite
     user git
     hostname yourgitserver.com
     identityfile ~/.ssh/mypubkey 
```

然后[更改您的遥控器](https://stackoverflow.com/questions/2432764/how-to-change-a-remote-repository-uri-using-git)：

```
git remote set-url orgin gitolite:your-project 
```

并尝试推动。它应该工作。

# php - 从示例中实现 Yii RESTful API - _sendResponse 函数生成 500 错误

> ID：10184382
> 
> 赞同：1
> 
> 时间：2012-04-17T02:43:17.743
> 
> 标签：php, yii, yii-inheritance

我正在尝试实现[http://www.yiiframework.com/wiki/175/how-to-create-a-rest-api](http://www.yiiframework.com/wiki/175/how-to-create-a-rest-api)`_sendResponse`并且在他们指定的功能上遇到了一些问题。下面是我的功能，但首先，让我解释一下问题。

我有一个`abstract class BaseAPIController extends Controller`有这个`_sendResponse`功能的。我有一个`SomeObjectController extends BaseAPIController`. 在我的`actionList`函数中，我有一行：

`$this->_sendResponse(200, CJSON::encode($rows), 'application/json');`

生成所需的输出。但是，状态码是 500！

即使我这样做：

`$this->_sendResponse(200, ' ', 'application/json');`

我仍然获得状态 500！

但是当我这样做时

`$this->_sendResponse(200);`

一切都很好，我得到了预期的空响应，状态码为 200。

这真让我抓狂！我需要做什么才能使其正常工作？

```
 protected function _sendResponse($status = 200, $body = '', $content_type='text/html')
    {
            $status_header = 'HTTP/1.1 ' . $status . ' ' . $this->_getStatusCodeMessage($status);

            header($status_header);

            header('Content-Type: ' . $content_type);

            if ($body != '')
            {
                    echo $body;
            }

            else
            {
                    $message = '';

                    switch($status)
                    {
                            case 401:
                                    $message = 'Not authorized.';
                                    break;
                            case 404:
                                    $message = 'Not found.';
                                    break;
                            case 500:
                                    $message = 'Internal server error.';
                                    break;
                            case 501:
                                    $message = 'Method not implemented.';
                                    break;
                            default:
                                    break;
                    }

                    $signature = ($_SERVER['SERVER_SIGNATURE'] == '') ?
                            $_SERVER['SERVER_SOFTWARE'] . ' Server at ' . $_SERVER['SERVER_NAME'] . ' Port ' . $_SERVER['SERVER_PORT'] :
                            $_SERVER['SERVER_SIGNATURE'];

                    // Needs to be completed with templates.

                    $body = '
                            <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
                            "http://www.w3.org/TR/html4/strict.dtd">
                            <html>
                            <head>
                                    <meta http="Content-Type" content="text/html"; charset=iso-8859-1">
                                    <title>' . $status . ' ' . $this->_getStatusCodeMessage($status) . '</title>
                            </head>
                            <body>
                                    <h1>' . $this->_getStatusCodeMessage($status) . '</h1>
                                    <p>' . $message . '</p>
                                    <hr />
                            </body>
                            </html>
                            ';
                    echo $body;
            }

            Yii:app()->end();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:18:30.227

感谢@acorncom 的启发，我查看了错误日志：

`PHP Fatal error: Call to undefined function app() in /Library/WebServer/Documents/iK9/iK9/iK9/protected/modules/api/controllers/BaseAPIController.php on line 68`

当然，我有一个语法错误。而不是`Yii::app()->end();`我有`Yii:app()->end()`.

如果有人能告诉我为什么没有产生堆栈跟踪，我想知道。

# php - 具有多个链接的单个 FancyBox 表单

> ID：10184386
> 
> 赞同：1
> 
> 时间：2012-04-17T02:44:01.437
> 
> 标签：php, jquery, fancybox

我试图找出一种方法来拥有多个链接和 1 个弹出式 FancyBox 表单。当用户单击其中一个国家/地区时，我希望在下拉菜单中选择该国家/地区。一切都很好，除了我不知道如何在下拉列表中选择值。谁能帮我这个？先感谢您 ：）。

```
 <script type="text/javascript">
jQuery(document).ready(function() {

$("a.country-form").fancybox({
        'scrolling' : 'no',
                'titleShow' : false,
                'onClosed'  : function() {
            $("#country_error").hide();
        }       
    });

    $("#country_form").bind("submit", function() {

        if ($("#country_country").val() == 0) {
            $("#country_error").show();
            $.fancybox.resize();
            return false;
        }

        $.fancybox.showActivity();

        $.ajax({
            type    : "POST",
            cache   : false,
            url     : "process.php",
            data    : $("#country_form").serializeArray(),
            success: function(data) {
                $.fancybox(data);
            }
        });

        return false;
    });
}
</script>

<a class="country-form" href="#country_form" >Submit textbook (Canada)</a>
<a class="country-form" href="#country_form" >Submit textbook (United States)</a>
<a class="country-form" href="#country_form" >Submit textbook (United Kingdom)</a>

<div style="display:none">
<form id="country_form" name="country_form" method="post" action="">
<p id="country_error">* There was a problem with your submission.</p>
<h1>Submit textbook in (COUNTRY HERE)</h1>
<label for="country">Country: </label>
<select name="country" id="country_country">
<option value="0">Country...</option>
<option value=1>Canada</option>
<option value=2>United States</option>
<option value=3>United Kingdom</option>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T03:01:04.723

将 rel 属性设置为链接

```
<a class="country-form" rel='1' href="#country_form" >Submit textbook (Canada)</a>
<a class="country-form" rel='2' href="#country_form" >Submit textbook (United States)</a>
<a class="country-form" rel='3' href="#country_form" >Submit textbook (United Kingdom)</a> 
```

然后尝试

```
$("a.country-form").fancybox({
        'scrolling' : 'no',
         'onStart' : function(){
              $("#country_country").val($(this).attr('rel'));
          },
                'titleShow' : false,
                'onClosed'  : function() {
            $("#country_error").hide();
        }       
    }); 
```

# authentication - cakePHP 中未找到授权适配器

> ID：10184388
> 
> 赞同：5
> 
> 时间：2012-04-17T02:44:09.523
> 
> 标签：authentication, cakephp-2.0

当我尝试登录应用程序时，我正在尝试将我的代码从本地移动到服务器

![在此处输入图像描述](../Images/f72f1f16c98dd07f2998d9f9ca810fe6.png)

```
Here is my AppController
class AppController extends Controller{
    /*  Determines what logged-in users access to */
    var $components = array('Auth','Session');

    public function isAuthorized($user){
        return true;
    }

    public function beforeFilter(){
        $userdetails = array();
        $this->Auth->autoRedirect = false;
        $this->Auth->loginAction = array('controller' => 'users', 'action' => 'login');
        $this->Auth->loginRedirect = array('controller' => 'matches', 'action' => 'index');
        $this->Auth->authorize = 'controller';
        $this->Auth->authError= 'You need permissions to access this page';
        $this->Auth->allow('users');
        $this->set('Auth',$this->Auth);
        $userdetails = $this->Auth->user();
        $this->set('myUser', $userdetails['username']);
        $this->set('myRole', $userdetails['user_role_id']);
        $this->set('pStatus', $userdetails['password_status']);
    }
}

Here is my Login Action in UsersController
public function login(){
        $this->Auth->autoRedirect = false;
        $id = $this->Auth->user('id');
        if(empty($id)){
            if($this->request->is('post')){
                if($this->Auth->login()){
                    $this->redirect($this->Auth->redirect());   
                }else{
                    $this->Session->setFlash('Invalid Username or password');
                }
            }
        }else{
            $this->redirect(array('action'=>'index'));
        }   
    } 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-17T08:51:46.383

您授权控制器的部分`beforeFilter`应正确大写：

所以：

`$this->Auth->authorize = 'Controller';`

代替：

`$this->Auth->authorize = 'controller';`

该特定语句试图查找`controllerAuthorize.php`并且应该查找`ControllerAuthorize.php`. 这在 Windows 上不会导致问题，但在 Unix 系统上会出现问题。

# asp.net - 无法在 asp.net 中获取只读文本框的值

> ID：10184392
> 
> 赞同：3
> 
> 时间：2012-04-17T02:44:46.077
> 
> 标签：asp.net, textbox, compiler-errors, readonly-attribute

我有一个像这样的 asp,net 文本框

```
<asp:TextBox readonly="true" ID="txtLastService" runat="server"></asp:TextBox> 
```

当我试图在后面的代码中将其值获取到日期变量 LastService 时，我收到此错误

> 从字符串“”到类型“日期”的转换无效。
> 
> 异常详细信息：System.InvalidCastException：从字符串“”到类型“日期”的转换无效。源错误：第 26 行：oItem.LastService = txtLastService.Text 源文件：.\admin\vehicle\add.aspx.vb 行：26

我在其他页面中使用了相同的代码，它工作正常，除了这个页面有任何帮助

编辑

请注意，当我单击表单上的提交时，文本框的值不为空。而且当我删除只读属性时，我没有得到错误。但我需要这个文本框是只读的，因为我使用 javascript 来选择日期并设置它的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T02:47:36.187

这个错误对我来说似乎非常不言自明。字符串是“”，您正在尝试将其转换为日期。那么，如何将空字符串转换为日期呢？那会是什么日子？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T03:56:06.237

而不是`Readonly="true"`，尝试使用`Enabled="false"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T03:19:28.700

为什么不使用 a[`HiddenField`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hiddenfield.aspx)代替？

```
<asp:hiddenfield id="txtLastService" runat="server"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T12:49:51.803

尝试使用 Request.Form[txtLastService.UniqueID] 如果 C# 和 Request.Form(txtLastService.UniqueID) 如果 vb.net

# c# - 搜索日期的问题

> ID：10184406
> 
> 赞同：1
> 
> 时间：2012-04-17T02:46:17.497
> 
> 标签：c#, asp.net, sql, sql-server-2008, search

我在使用日期字段搜索数据时遇到问题。

我有一个正在执行搜索的存储过程：

```
ALTER PROCEDURE [dbo].[spSearchTraining]
(
  @CourseName VARCHAR(50)= null,
  @TrainingProvider VARCHAR(50)= null,
  @TrainingCost VARCHAR(50) = null,
  @StartDate Varchar(50) = null,
  @EndDate Varchar(50)= null,
  @RowCount int output

)
AS
 BEGIN

  SELECT *  FROM vwTrainingDetails 
  WHERE ( CourseName Like '%' + @CourseName +'%' or @CourseName is null)
  AND ( TrainingProvider Like '%' + @TrainingProvider + '%' or @TrainingProvider is null)
  AND ( Cost Like '%' +  @TrainingCost +'%'  or @TrainingCost is null)
  AND ([Start Date] >=  @StartDate or @StartDate is null)
  AND ([Start Date] <=  @EndDate  or @EndDate is null)

  select @RowCount=@@ROWCOUNT

END 
```

我传递我的参数如下：

```
//Create and add a parameter to Parameters collection for the stored procedure.
        MyDataAdapter.SelectCommand.Parameters.Add(new SqlParameter("@CourseName", SqlDbType.VarChar, 40));
        MyDataAdapter.SelectCommand.Parameters.Add(new SqlParameter("@TrainingProvider", SqlDbType.VarChar, 40));
        MyDataAdapter.SelectCommand.Parameters.Add(new SqlParameter("@TrainingCost", SqlDbType.VarChar, 40));
        MyDataAdapter.SelectCommand.Parameters.Add(new SqlParameter("@StartDate", SqlDbType.VarChar, 40));
        MyDataAdapter.SelectCommand.Parameters.Add(new SqlParameter("@EndDate", SqlDbType.VarChar, 40));

        //string mysdate = (StartTextBox.Text).ToString;
        //Assign the search value to the parameter.
        MyDataAdapter.SelectCommand.Parameters["@CourseName"].Value = (CourseTextBox.Text).Trim();
        MyDataAdapter.SelectCommand.Parameters["@TrainingProvider"].Value = (ProviderTextBox.Text).Trim();
        MyDataAdapter.SelectCommand.Parameters["@TrainingCost"].Value = (CostTextBox.Text).Trim();
        MyDataAdapter.SelectCommand.Parameters["@StartDate"].Value = (StartTextBox.Text);
        MyDataAdapter.SelectCommand.Parameters["@EndDate"].Value =(EndTextBox.Text); 
```

我遇到的问题是，当我按原样运行时，存储过程不会返回任何内容。如果我注释掉：

```
MyDataAdapter.SelectCommand.Parameters["@StartDate"].Value = (StartTextBox.Text);
MyDataAdapter.SelectCommand.Parameters["@EndDate"].Value =(EndTextBox.Text); 
```

然后它可以工作，但无法使用日期进行搜索。

当我从服务器执行存储过程并传入包括日期在内的参数时，它工作正常。

有人可以帮我看看我做错了什么！！！？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T16:41:28.373

如果您使用的是 SQL 2008，那么您可以使用 CAST 函数将字符串类型的参数 @StartDate 和 @EndDate 转换为 Date

```
AND ([Start Date] >=  CAST(@StartDate AS DATE) or @StartDate is null)
AND ([Start Date] <=  CAST(@EndDate  AS DATE) or @EndDate is null) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:57:24.177

改变这个：

```
@StartDate Varchar(50) = null,
@EndDate Varchar(50)= null, 
```

对此：

```
@StartDate DATE = null,
@EndDate DATE = null, 
```

然后改变这个：

```
MyDataAdapter.SelectCommand.Parameters.Add(
    new SqlParameter("@StartDate", SqlDbType.Date));
MyDataAdapter.SelectCommand.Parameters.Add(
    new SqlParameter("@EndDate", SqlDbType.Date)); 
```

对此：

```
// I don't know the exact format of your date, 
// fill-in this accordingly from your Substring'd textboxes:
int startYear = int.Parse(...); 
int startMonth = int.Parse(...); 
int startDay = int.Parse(...); 

int endYear = int.Parse(...); 
int endMonth = int.Parse(...); 
int endDay = int.Parse(...); 

DateTime startDate = new DateTime(startYear,startMonth,startDay);
DateTime endDate = new DateTime(endYear,endMonth,endDay);

MyDataAdapter.SelectCommand.Parameters["@StartDate"].Value = startDate;
MyDataAdapter.SelectCommand.Parameters["@EndDate"].Value = endDate; 
```

* * *

您还可以将参数缩短为：

```
MyDataAdapter.SelectCommand.Parameters.AddWithValue("@CourseName",
    CourseTextBox.Text.Trim());
MyDataAdapter.SelectCommand.Parameters.AddWithValue("@TrainingProvider", 
    ProviderTextBox.Text.Trim());        
MyDataAdapter.SelectCommand.Parameters.AddWithValue("@TrainingCost", 
    CostTextBox.Text.Trim());

MyDataAdapter.SelectCommand.Parameters.AddWithValue("@StartDate", startDate);
MyDataAdapter.SelectCommand.Parameters.AddWithValue("@EndDate", endDate); 
```

* * *

还有一件事，例如将其更改`@TrainingCost VARCHAR(50) = null,`为`@TrainingCost NUMERIC(18,6) = null`。

然后改变这个：

```
MyDataAdapter.SelectCommand.Parameters.Add(
   new SqlParameter("@TrainingCost", SqlDbType.Varchar, 40)); 
```

至：

```
MyDataAdapter.SelectCommand.Parameters.Add(
   new SqlParameter("@TrainingCost", SqlDbType.Decimal)); 
```

然后也改变它：

```
MyDataAdapter.SelectCommand.Parameters["@TrainingCost"].Value = 
     decimal.Parse(CostTextBox.Text.Trim()); 
```

或这个：

```
MyDataAdapter.SelectCommand.Parameters.AddWithValue("@TrainingCost", 
    decimal.Parse(CostTextBox.Text.Trim())); 
```

因此，也改变你的存储过程，这看起来很不寻常，Cost 字段是钱；钱不应该作为字符串处理。转换这个：

```
AND ( Cost Like '%' +  @TrainingCost +'%'  or @TrainingCost is null) 
```

对此：

```
AND (Cost = @TrainingCost or @TrainingCost is null) 
```

同样，如果您需要 null，请正确处理它：

```
MyDataAdapter.SelectCommand.Parameters["@TrainingCost"].Value = 
     CostTextBox.Text.Trim().Length == 0 ? 
       (decimal?) null :
       (decimal?) decimal.Parse(CostTextBox.Text.Trim()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:27:42.023

在您的 SP 中使用以下查询

```
SELECT *  
FROM vwTrainingDetails    
WHERE ( CourseName Like '%' + ISNULL(@CourseName,CourseName) +'%')
AND ( TrainingProvider Like '%' + ISNULL(@TrainingProvider, TrainingProvider) + '%')
AND ( Cost Like '%' +  ISNULL(@TrainingCost,Cost) +'%')
AND ([Start Date] >=  ISNULL( @StartDate, [Start Date]))
AND ([Start Date] <=  ISNULL(@EndDate, [Start Date])) 
```

# c++ - 即使删除线程，线程数也会增加很多

> ID：10184411
> 
> 赞同：13
> 
> 时间：2012-04-17T02:46:45.213
> 
> 标签：c++, multithreading, qt, qnetworkaccessmanager

有一个应用程序，其中我有 QOBJects，它们都包含一个 QNetworkAccessManager。我知道建议只对每个应用程序进行一次调用，但由于我同时进行了 6 次以上的调用，因此我需要这样。所以，这就是我启动线程的方式。

```
FileUploader *fileUploader = new FileUploader(_fileList);
QThread *fileUploaderThread = new QThread();
fileUploader->moveToThread(fileUploaderThread);

// uploader > model
connect(fileUploader, SIGNAL(progressChangedAt(int)), _model, SLOT(reportProgressChanged(int)), Qt::QueuedConnection);
connect(fileUploader, SIGNAL(statusChangedAt(int)), _model, SLOT(reportStatusChanged(int)), Qt::QueuedConnection);
// uploader > its thread
connect(fileUploader, SIGNAL(canceled()), fileUploaderThread, SLOT(quit()), Qt::QueuedConnection);
connect(fileUploader, SIGNAL(finished()), fileUploaderThread, SLOT(quit()), Qt::QueuedConnection);
// uploader > this
connect(fileUploader, SIGNAL(canceled()), this, SLOT(deleteFinishedUploader()), Qt::QueuedConnection);
connect(fileUploader, SIGNAL(finished()), this, SLOT(deleteFinishedUploader()), Qt::QueuedConnection);
connect(fileUploader, SIGNAL(finishedCurrentUpload()), this, SLOT(uploadNextFileOrFinish()), Qt::QueuedConnection);
// thread > this
connect(fileUploaderThread, SIGNAL(finished()), this, SLOT(checkIfAllThreadsAreFinished()), Qt::QueuedConnection);
connect(fileUploaderThread, SIGNAL(finished()), this, SLOT(deleteFinishedThread()), Qt::QueuedConnection);
// this > uploader
connect(this, SIGNAL(cancel()), fileUploader, SLOT(cancel()), Qt::QueuedConnection);

fileUploaderThread->start();
QMetaObject::invokeMethod(fileUploader, "init", Qt::QueuedConnection);
QMetaObject::invokeMethod(fileUploader, "uploadAt", Qt::QueuedConnection, Q_ARG(int, startIndex));

QMutexLocker locker(&_mutex);
_threadCount++; 
```

每个线程都以列表的索引开始，以便他们可以获取他们需要上传的内容并继续执行大约 5 个步骤（使用 QNetworkAccessManager 调用）。当没有更多项目要上传时，fileUploader 会发出“finished()”信号，它会调用我所做的`deleteFinishedThread`事情`deleteFinishedUploader`：

```
QThread *thread = qobject_cast<QThread*>(sender());

if(thread != NULL) thread->deleteLater(); 
```

或者

```
FileUploader *fileUploader = qobject_cast<FileUploader*>(sender());

if(fileUploader != NULL) fileUploader->deleteLater(); 
```

这些假设在完成后删除线程。

问题是，每次我启动（例如）3 个线程，每个线程都有 1 个文件要上传和处理，线程数会增加 8-10。这意味着如果我重新启动上传过程几次，线程数将从大约 5 变为 100。

我究竟做错了什么？还是我最大的问题是我使用“Windows 任务管理器”来控制它？我正在处理我删除的 QNAM 的所有回复，所有内容似乎都被删除了，但是当线程数不断增加时，我仍然摸不着头脑......

编辑：在我的文件上传器中，我在堆栈上创建了一个对象（管理器），它在堆栈上有一个 QNetworkAccessManager。当文件上传器被删除时，它会在管理器上调用“deleteLater()”，但它永远不会被删除。我们试图删除 Manager 并将其设置为 NULL，但这给了我们访问冲突，因为 Manager 还没有完成（QNetwork.dll 报告了这个问题，所以它必须是 QNAM 内部仍在运行的东西）。当我们没有遇到访问冲突时，对象被删除并且线程数恢复正常。QNAM 中有什么可以阻止我在超出范围时删除它？我应该在堆上创建 QNAM 吗？在这个阶段，即使调用 deleteLater()，也不会调用任何析构函数......

另外，如何减少句柄数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T08:52:07.490

我可能是错的，但我认为你的信号有问题：

```
// uploader > its thread
connect(fileUploader, SIGNAL(canceled()), fileUploaderThread, SLOT(quit()), Qt::QueuedConnection);
connect(fileUploader, SIGNAL(finished()), fileUploaderThread, SLOT(quit()), Qt::QueuedConnection);
// uploader > this
connect(fileUploader, SIGNAL(canceled()), this, SLOT(deleteFinishedUploader()), Qt::QueuedConnection);
connect(fileUploader, SIGNAL(finished()), this, SLOT(deleteFinishedUploader()), Qt::QueuedConnection); 
```

请记住，当多个插槽连接到同一个信号时，它们会按照连接顺序执行。在这里，当fileUploader完成时，它`finished()`会先调用`quit()`线程的方法，然后调用`deleteFinishedUploader()`方法。信号也一样`canceled()`。但是，与此同时，线程已完成，因此无法对 fileUploader 进行任何事件处理（的后果`moveToThread(...)`）。`deleteLater()`需要事件处理，因此您的 fileUploader 将永远不会被删除...

我不是 100% 以另一种方式安排你的连接会让事情正常工作：`deleteLater()`可以调用并且线程在之后立即退出，没有事件处理。

解决方案可能是`moveToThread()`将 fileUploader 重新分配给主线程，或者重新分配给仍在处理其事件循环的线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T08:14:51.933

不是答案，而是：

```
 fileUploaderThread->start();
    QMetaObject::invokeMethod(fileUploader, "init", Qt::QueuedConnection);
    QMetaObject::invokeMethod(fileUploader, "uploadAt", Qt::QueuedConnection, Q_ARG(int, startIndex)); 
```

意味着您启动偶数循环，然后将要执行的插槽或信号排队。假设（通常）`QObject`该线程中还有其他。由于事件循环已经开始，它们可能会执行它们的插槽或信号。如果您希望“init”和“uploadAt”成为事件循环运行时首先调用的方法，则在启动事件循环之前将它们排队（如果线程未启动，它们将永远不会被执行）。

来自[QMetaObject::invokeMethod](http://qt-project.org/doc/qt-4.8/qmetaobject.html#invokeMethod)：

> 如果 type 是 Qt::QueuedConnection，则将发送一个 QEvent 并在应用程序进入主事件循环后立即调用该成员。

在这种情况下，事件被发送到线程事件循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T09:39:56.147

经过大量“几乎放弃”后，我想出了线程的解决方案。Synxis 关于插槽顺序的说法是真实的。

但是，我仍然对文件句柄有一些问题，如果有人有更好的答案，我很乐意接受。

我将代码更改为：

```
...
// uploader > this
connect(fileUploader, SIGNAL(canceled()), this, SLOT(deleteFinishedUploader()), Qt::QueuedConnection);
connect(fileUploader, SIGNAL(finished()), this, SLOT(deleteFinishedUploader()), Qt::QueuedConnection);
// uploader > its thread
connect(fileUploader, SIGNAL(destroyed()), fileUploaderThread, SLOT(quit())); 
```

这意味着当对象被删除时线程会停止（quit()）。即使文档指出，这实际上也有效：

> 该信号在对象 obj 被销毁之前立即发出，并且不能被阻塞。
> 
> 发出此信号后，立即销毁所有对象的子对象。

这意味着这个信号会在任何东西被破坏之前发出（这意味着我会在其中的上传者被删除之前退出线程）？还不够好，这可能是一个更好的方法。但是，atm，每次上传者完成并在 20 秒左右后恢复正常时，我的线程数都会下降很多（一些“观察者线程”必须被 Windows 等杀死）。

# java - 使用 Java 从 FTP 服务器中删除文件

> ID：10184417
> 
> 赞同：2
> 
> 时间：2012-04-17T02:47:41.200
> 
> 标签：java, ftp, delete-file

我正在编写一个涉及多个客户端的应用程序。一个客户端使用 FTP 将文件上传到服务器，然后另一个客户端下载该文件并将其删除。我使用 FTP 服务器作为中间人来交换信息，因为我不希望用户必须进行端口转发。我已经知道如何上传文件，但我不知道如何删除文件。使用 FTP 删除文件的命令是：

```
DELE <filename> 
```

我试过这样做，但没有成功。这是我尝试过的代码：

```
public static void deleteFile(String name) throws IOException
{
    URL url = new URL("ftp://a1111111:password@mywebsite.com/public_html/misc/screenshots/picture.png;type=i");
    BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(url.openConnection().getOutputStream()));
    writer.write("DELE picture.png");
    writer.flush();
} 
```

我有一种感觉，我提供的 <filename> 可能是错误的，因为我没有在路径中包含目录名称。但是，由于我在 URL 中明确告诉了文件的路径，所以我不太确定应该为 < 文件名 > 输入什么。

我已经阅读了该网站上关于与此非常相似的问题的其他问题，并且所有回复都告诉使用图书馆。问题是，这些库中的大多数都是用纯 Java 编写的，因此该库的开发人员必须想办法在没有库的情况下完成我想做的事情。我也想这样做。我不喜欢在我制作的东西上附加我自己以外的额外文件。所以请不要告诉我使用图书馆——这不是我要找的。

如果您需要任何澄清，请询问！

**编辑：**如果我使用此代码接收响应：

```
 byte[] response = new byte[conn.getInputStream().available()];
    conn.getInputStream().read(response);
    System.out.println("Response: " + new String(response)); 
```

我的命令刚刚得到回应：

```
Response: DELE test1.png 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:24:03.823

我认为您需要在两个单独的操作中进行检索和删除；[我找到的一些随机文档`FtpURLConnection`](http://www.docjar.com/docs/api/sun/net/www/protocol/ftp/FtpURLConnection.html)部分说：

> 此类打开给定 URL 的 FTP 输入（或输出）流。它作为一次性 FTP 传输工作：
> 
> 登录
> 获取（或放置）文件
> 断开连接

我在文档中没有看到任何允许删除文件的方法。

您可能希望使用该`URL`机制来检索文件，但我会选择使用原始套接字来删除文件。创建到 FTP 命令端口的新连接，登录并`DELE`手动发出命令。如果这是您要采取的唯一步骤，您可能能够摆脱相对较差的错误处理，也许只有两个`read()`请求，并在完成后简单地向用户显示输出脚本。

这有点脏，但我完全理解不想携带一兆字节的额外资源来达到道德上的`echo -e "user foo\npass password\ndele /path/to/file\nlogout" | nc ftp.remote.example.com 21`.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-17T05:48:43.067

你能用一些FTP客户端来做这个操作吗？

您可以从 Apache commons-net尝试[http://commons.apache.org/net/api-3.1/org/apache/commons/net/ftp/FTPClient.html 。](http://commons.apache.org/net/api-3.1/org/apache/commons/net/ftp/FTPClient.html)它很容易使用。

# ruby-on-rails - Rspec 和 Rails 控制器的期望

> ID：10184420
> 
> 赞同：1
> 
> 时间：2012-04-17T02:48:25.750
> 
> 标签：ruby-on-rails, rspec, rspec2

全部，

在测试中遇到一些问题，如下所示：

```
it "does something" do
  controller.should_receive(:some_method).once

  expect {
    post :create, some_params_hash, some_session_hash
  }.to change(Something, :count).by(1)
end 
```

导轨侧的控制器 - 粗略示例：

```
class SomethingsController
  before_filter :some_method

  def create
    respond_with Something.create params[:something]
  end

  def some_method
    puts 'some_method'
  end
end 
```

*如果*我删除 controller.should_receive 期望，这一切都很好，并且工作得很好。如果我保持期望 - 测试失败。

奇怪的是它并没有因为不满足的期望而失败——它实际上似乎满足了 should_receive(:some_method) 的期望——只是记录创建和随后的变更评估失败了。

所以 - 问题：

这是在作为此测试的一部分调用的控制器上指定期望的正确方法吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T22:03:09.247

一个常见的 rspec 错误是认为您设置的方法期望`should_receive`只是监视应用程序以确保某些事情发生。但实际上它将自己插入到流程中并完全*替换*了方法。

因此，您的控制器`some_method`将被替换为只返回 nil 的控制器。返回 nil 的 before 过滤器将停止所有处理。你的动作永远不会被调用。

将您的期望更改为：

```
controller.should_receive(:some_method).once.and_return true 
```

另请注意，您的示例正在测试两件事 - 它确保您的操作调用`some_method`并确保持久的Somethings的数量增加一。这很好，但如果你真的只打算检查后者，你可以使用存根而不是期望，它更紧凑一点：

```
controller.stub some_method: true 
```

**更新：**我应该补充一点，在最新版本的 Rails 中，控制器过滤器的返回值被忽略了。（过滤器可以通过渲染一些东西来阻止动作执行。）但是，rspec`should_receive`替换你的方法的原理仍然是正确的并且普遍适用。

# bash - 仅当文件存在时如何将输出重定向到文件？

> ID：10184421
> 
> 赞同：3
> 
> 时间：2012-04-17T02:48:29.483
> 
> 标签：bash

这与 clobber / noclobber 功能相反。如果文件已经存在，我只想更新它。我知道我可以使用多个命令来做到这一点，但是是否有一个操作员可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T09:32:30.523

我能想到的最接近的是`[[ -f "$filename" ]] && do something > "$filename"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T18:41:19.970

我 RTFMed 和运营商还不存在。

# java - 在JAVA中获取已编译类的方法和属性

> ID：10184422
> 
> 赞同：0
> 
> 时间：2012-04-17T02:48:50.990
> 
> 标签：java, class

是否可以获取 .class 文件包含的所有属性和方法。我只能访问 .class 文件，我需要知道该文件中包含的所有属性、方法和类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T02:52:08.007

尝试[javap](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/javap.html)。

# linux - 如何设置 PVM 的环境？

> ID：10184423
> 
> 赞同：0
> 
> 时间：2012-04-17T02:48:53.670
> 
> 标签：linux, ubuntu, pvm

我正在使用 Ubuntu v11.04。如何设置 PVM 的环境变量？

在手册中，它写道，“最简单的方法是在 .cshrc 文件中设置这些变量”，但我找不到任何 .cshrc 文件。我找到 cshrc.stub。

如果有人曾经使用过 PVM？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T03:20:34.823

我没有使用过 PVM，但您要查找的文件取决于您使用的 shell。如果您使用 csh，则可以在您的主目录中找到 .cshrc。请注意，它是一个隐藏文件，因此您需要将`ls -a`其列出。如果你使用 bash shell，那么你应该在你的主目录中找到 .bashrc。

要在 csh 中设置环境变量，您将使用该`setenv`命令。对于 bash，它将是`export`.

# c# - 'Order' 不包含采用 0 个参数的构造函数

> ID：10184424
> 
> 赞同：-4
> 
> 时间：2012-04-17T02:48:57.777
> 
> 标签：c#, constructor, arguments

我得到的“订单”不包含带有 0 个参数的构造函数。因此，基于该错误，我知道它在我的公共课程订单中。我在看什么？谢谢！

```
public class Order
{
    public int QuantityOrdered { get; set; }
    public double TotalPrice;
    public const double PRICEEACH = 19.95;

    virtual public double totalPrice
    {
        set
        {
            TotalPrice = QuantityOrdered * PRICEEACH;
        }
    }
}

public class ShippedOrder : Order
{
    public const double SHIPPINGFEE = 4.00; 
    public override double totalPrice
    {
        set
        {
            totalPrice = base.TotalPrice + SHIPPINGFEE;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T03:04:45.693

在您提供的代码中未列出的 Order 类中必须有一个构造函数。

当您没有为类定义任何构造函数时，编译器会为您提供一个隐式无参数构造函数。

但是，当您添加带有参数的构造函数时，例如。`public Order(string someString) {}`，你失去了这个隐式构造函数。

您需要执行以下操作之一：

1.  添加一个显式的无参数构造函数，例如。`public Order() {}`

2.  更新实例化 Order 对象的代码以传递它正在寻找的参数，例如。`new Order(someString)`

3.  从期望参数的 Order 中删除构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T03:05:44.230

您可以收到该错误消息的唯一方法是，如果您有：

1.  在您的类中接受 1 个或多个参数的构造函数。
2.  一个接受 0 个参数的构造函数，但要么是受保护的要么是私有的，并且您正试图在访问之外调用构造函数。

# c# - 使用 PredicateBuilder 使用 linq 对实体进行动态查询

> ID：10184426
> 
> 赞同：1
> 
> 时间：2012-04-17T02:49:15.027
> 
> 标签：c#, entity-framework, predicatebuilder

我正在尝试在一个非常简单的表上运行查询，但没有得到任何结果。该表包含具有以下列的操作日志：

*   ID
*   ActionTypeID（创建、编辑或删除）
*   EntryID（创建/编辑/删除条目的id）
*   TableName（提交操作的位置）
*   控件名称
*   人员（执行该操作的人。具有部门的 nt-user）
*   日期

我想要得到的是所有 EntryID 的列表，其中 ActionTypeID == 1 和以动态字符串列表之一结尾的 Person（部门）。问题是只应检查操作日志中一个 EntryID 的第一个操作以匹配其中一个部门。

我知道这听起来很奇怪。这可能是由于我的英语不好和我以前的同事的数据库设计障碍造成的。我不知道哪个更糟。

我试图得到我想要的结果是这样的：

```
var predicate = PredicateBuilder.False<ActionLog>();
var pOuter = PredicateBuilder.True<ActionLog>();

pOuter = pOuter.And(h => h.TableName.ToUpper() == "Contact".ToUpper());
pOuter = pOuter.And(h => h.ActionType.ID == 1);

foreach (var dep in b.DepartmentList)
{
    predicate = predicate.Or(x => x.Person.EndsWith("/" + dep.Value));
}

pOuter = pOuter.And(predicate.Expand());

mContactIDs = (from h in db.ActionLog
orderby h.Date
select h).AsExpandable().Where(pOuter).Select(x => x.EntryID).Distinct().ToList(); 
```

但这会将“人员”以所选部门结尾的所有条目返回给我。我只想用这个 EntryID 检查第一个条目。

我希望任何人都能理解我要从困惑的德语翻译成奇怪的英语的内容。

哦-顺便说一句，这是.Net 3.5

**编辑** 我认为我在找到正确的解释时遇到了一些问题——我会用一些虚拟数据来尝试。

```
ID | ActionTypeID | EntryID | TableName  | ControlName | Person             | Date
----------------------------------------------------------------------------------------
1  | 1            | 3       | 'Contacts' | NULL        | 'xxxx/department1' | 04/11/2012
2  | 1            | 3       | 'Contacts' | NULL        | 'yyyy/department2' | 04/11/2012
3  | 1            | 5       | 'Contacts' | NULL        | 'yyyy/department2' | 04/13/2012
4  | 1            | 14      | 'Contacts' | NULL        | 'zzzz/department1' | 04/16/2012 
```

在我的示例中，我将搜索带有“以'/department2'结尾的人创建了第一次出现的新EntryID”、“TableName == 'Contacts'”和“ActionTypeID == 1”的日志条目。我想收到的结果将是（仅 EntryIDs）5，因为这是 Department2 的用户是第一个用户的唯一条目 使用 ActionTypeID 1 插入此 EntryID。我知道这很愚蠢，如果我设计了数据库我不会这样做，但现在我必须处理它。如果要查询的部门数量不是动态的，我将使用以下代码段：

```
IQueryable<ActionLog> log = db.ActionLog;
mContactIDs = (from k in db.Contacts
    where (from h in log
        where h.TableName == "Contacts"
        && h.EntryID == k.ID
        && h.ActionType.ID == 1
        orderby h.Date
        select h).FirstOrDefault().Person.EndsWith("/" + b.Department)
    select k.ID).ToList(); 
```

但我不知道如何将那些动态部门与愚蠢的设计联系起来（以及一个条目的多个 ActionTypeID 1（创建）。我什至不知道为什么应用程序会保存这个）

谢谢你，本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T04:01:11.527

`dep.Value`我认为问题在于foreach 循环内捕获的变量值（即）。复制变量并在表达式中使用它。这个问题在[这里](https://stackoverflow.com/questions/271440/c-sharp-captured-variable-in-loop)解释。

```
foreach (var dep in b.DepartmentList)
{
    var depValue = dep.Value;
    predicate = predicate.Or(x => x.Person.EndsWith("/" + depValue));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:19:26.437

我决定改用 Entity SQL。

```
 List<int> mContactIDs = new List<int>();
        using (var db = new Entities())
        {
            string queryString = @"
                                SELECT  
                                    VALUE H.EntryID
                                FROM    
                                    Entities.ActionLog AS H
                                WHERE 
                                    H.ID IN (
                                        SELECT VALUE TOP (1) Hi.ID
                                        FROM Entities.ActionLog AS Hi
                                        WHERE Hi.ActionType.ID = 1
                                        AND Hi.TableName = 'Kontakt'
                                        AND Hi.EntryID = H.EntryID
                                        ORDER BY Hi.Date    
                                    )
                                {0}
                                GROUP BY H.EntryID";

            List<string> lDepartments = new List<string>();
            foreach (var dep in b.DepartmentList)
            {
                lDepartments.Add(string.Format(" H.Person LIKE '%{0}' ", dep.Value));
            }

            string sDepartmentQuery = string.Empty;
            if (lDepartments.Count > 0)
            {
                sDepartmentQuery = string.Format(" AND ({0}) ", string.Join(" OR ", lDepartments.ToArray()));
            }

            var result = db.CreateQuery<int>(string.Format(queryString, sDepartmentQuery));
            if (result != null && result.Count() > 0)
            {
                mContactIDs = result.ToList();
            }
        } 
```

# css - CSS单击吸盘鱼菜单不会在chrome中保持打开状态

> ID：10184430
> 
> 赞同：1
> 
> 时间：2012-04-17T02:50:12.660
> 
> 标签：css, google-chrome, submenu, suckerfish

我在 CSS 中构建了一个简单的 Suckerfish 菜单，当用户单击主项目时，将显示一个子菜单。

标记：

```
<div class="bodywrapper">
<a class="button" href="#"></a>
   <ul class="menu">
      <li>test test test</li>
      <li>test test test test test test test test test test test test test test test</li>
   </ul>

</div> 
```

CSS：

```
.button{
  display: block;
  background-color: red;
  width: 10px;
  height: 27px;

}

.button:focus +ul, .button:active +ul{
  display: block;
}

.menu{
  display: none;
  border: 1px black solid;
}

.menu:hover{
    display: block;
}​ 
```

我的代码在这里：http: [//jsfiddle.net/pLgLj/](http://jsfiddle.net/pLgLj/)

该菜单在 Firefox 和 IE 中正常工作，当单击红色方块时，菜单会显示，直到我们单击其他位置。但是，在 chrome 中，只有在单击并按住红色方块时才会显示菜单。

我不知道是什么原因造成的。有人可以启发我吗？

注意：我想只用纯 CSS 而不用 javascript 来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:17:43.677

`tabindex`解决方案是在按钮的标记中添加一个属性：

```
<div class="bodywrapper"> 
<a class="button" tabindex="0" href="#"></a>  <---tab index added here.
   <ul class="menu"> 
      <li>test test test</li> 
      <li>test test test test test test test test test test test test test test test</li> 
   </ul> 

</div> 
```

# github - 推送到 GitHub 远程时未找到存储库

> ID：10184433
> 
> 赞同：10
> 
> 时间：2012-04-17T02:50:26.967
> 
> 标签：github, git-push

我在 GitHub 上创建了一个名为“messages”的存储库和一个同名的本地存储库。我正在尝试将文件从本地存储库推送到远程但收到此错误：

> 错误：未找到存储库。
> 致命：远端意外挂断。

我认为这是一个身份验证问题。当我跑

```
ssh -T git@github.com 
```

我确实收到一条消息，表明我的密钥不起作用。所以我将我的 ~/.ssh/github_rsa.pub 添加到我在 GitHub 上的帐户中的 SSH 密钥中（删除了那里已经存在的那个）并再次运行该命令。这次我收到一条消息说 -

> 嗨，septer！您已成功通过身份验证，但 GitHub 不提供 shell 访问权限。

从我读到的这似乎是预期的信息。所以，我再次尝试了推送。但收到同样的错误。未找到存储库。

```
Swapnas-MacBook-Pro:messages sony$ git remote -v show
origin  git@github.com:seterr/messages.git (fetch)
origin  git@github.com:seterr/messages.git (push)
Swapnas-MacBook-Pro:messages sony$ git push -u origin master
ERROR: Repository not found.
fatal: The remote end hung up unexpectedly 
```

当我在 GitHub 上查看我的存储库时，我看到：

> 现有的 Git 存储库？
> `cd existing_git_repo`
> `git remote add origin git@github.com:septerr/messages.git`
> `git push -u origin master`

有什么问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-26T22:30:12.223

如果您收到此错误并且错字不是原因，就像我的情况一样，请尝试打开 .git/config 并删除该部分：

```
[remote "origin"]   
url = git@github.com:yourgitusername/my_project.git  
fetch = +refs/heads/*:refs/remotes/origin/* 
```

然后重新运行以下命令（替换 'yourgitusername'）：

```
git remote add origin git@github.com:yourgitusername/my_project.git   
git push -u origin master 
```

这为我解决了这个问题。归功于这个类似问题的答案：[Git Push ERROR: Repository not found](https://stackoverflow.com/a/10660430/1091431)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-01T13:30:54.967

I had the same problem. My issue was misunderstanding that I had to first create the empty repo on github before pushing to it. Doh! Including this here for anyone else who doesn't realize.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-17T03:59:36.440

与 github 告诉您的相比，您的远程地址是：

```
 git@github.com:seterr/messages.git    <== your remote
 git@github.com:septerr/messages.git   <== GitHub actual repo address 
```

你忘记了 ' `p`' `septerr`。

如“ [GitHub 推送/拉取错误](https://stackoverflow.com/questions/9937055/github-pushing-pulling-error/9937756#9937756)”中所述，GitHub 存储库地址对拼写错误或大小写敏感。

* * *

[尼克](https://stackoverflow.com/users/337903/nick)在评论中提到：

> 我遇到了一个问题，由于 GitHub 用户名的更改，我需要更改我的 repo 地址。
> 这是它的代码：

```
git remote set-url origin git@github.com:username/reponame.git 
```

> 这将使用 username 的 GitHub 用户名将远程名称设置为 origin。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-10-28T18:22:11.283

如果您在 Mac 上使用 OS-X，并且您的远程没有凭据的 HTTPS URL，那么 KeyChain 可能用于凭据。

您的 KeyChain 中的凭据是否可能不正确？也许您更改了密码，或者您有两个 github 帐户但使用了错误的帐户？

如果有疑问，请打开 KeyChain 应用程序并删除“github.com”条目，然后当您下一次执行 fetch/pull/push 等操作时，系统会再次提示您输入您的 github 用户名和密码。

以上所有假设您之前已按照[https://help.github.com/articles/set-up-git#platform-mac上的指南启用“密码/钥匙串缓存”](https://help.github.com/articles/set-up-git#platform-mac)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T11:47:05.893

我也遇到了这个问题，结果是我没有授予用户对 repo 的访问权限，所以错误消息有点误导。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-10T08:09:15.233

这可能对某人有所帮助，当您将 ssh 密钥添加到 Github 时，您必须添加到您的用户帐户的配置文件设置中，而不是存储库部署密钥。

如果您有多个私有存储库，这将适用于所有存储库。我确实犯了一个错误，将我的 ssh 密钥添加到一个私有存储库，所以当我尝试克隆另一个存储库时，我收到错误“找不到存储库...”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-15T06:33:38.153

这是一篇旧帖子，但我想我会添加更新，以防任何查看此线程的人遇到类似问题并正在寻找修复。成功登录后，我也收到“找不到存储库”错误；问题不是由于拼写错误，而是因为**我没有正确定义我的个人访问令牌的范围。**如果您使用 2FA 登录 GitHub，则在使用命令行时需要使用个人访问令牌代替密码。创建该令牌时，请确保您查看清单并为令牌提供适当的范围以读取/写入存储库。否则，您将能够登录，但无法执行其他操作。

有关 GitHub 范围的更多信息： [https ://developer.github.com/apps/building-oauth-apps/scopes-for-oauth-apps/](https://developer.github.com/apps/building-oauth-apps/scopes-for-oauth-apps/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-06T23:02:35.777

我联系了 github 支持，如果我使用的是 Windows 机器，他们告诉我在 Windows 凭据管理器中检查我的 git 凭据。似乎不知何故 git 凭据不正确。我更正了凭据并推送工作。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-04-16T10:28:12.973

问题是冒号 (:) 后的用户名。您应该使用斜线，然后它可以工作：

git clone ssh://git@github.com/USERNAME/REPONAME.git

分号代表 PORT 而不是 ssh url 中的用户名。

git clone ssh://git@gitgub.com:22/REPONAME.git

# bash - 不适用于 tcsh：set kk=`cd $THE_PATH; 密码`

> ID：10184435
> 
> 赞同：1
> 
> 时间：2012-04-17T02:50:37.403
> 
> 标签：bash, csh, tcsh

在 BASH 中获取绝对路径的典型方法是：

```
`cd $THE_PATH; pwd` 
```

但这不适用于 tcsh/csh。如果在 tcsh，你

```
set kk=`cd $HOME; pwd` 
```

kk 将保存绝对路径的正确值，但是，很奇怪，“ls $kk”给你错误，它说路径不存在~！！

谁能告诉我为什么会这样？谢谢。

[编辑]

```
set kk=`cd $HOME; pwd`
cd $kk 
```

会给这个：

```
"^[]2;myid@machine003:/u/myid^G: No such file or directory." 
```

不过echo $kk就好啦~

```
"/u/myid" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:24:41.027

问题是您定义了一个`cwdcmd`别名。关于手册`tcsh` [页](http://linux.die.net/man/1/tcsh)`cwdcmd`

```
... Runs after every change of working directory. ... 
```

即：当您执行`cd`定义的`echo`命令时，也会执行并将输出保存到`$kk`变量中。

为避免这种情况，您可以删除`cwdcmd`别名：

```
unalias cwdcmd 
```

但请注意，这样做的副作用是所需的功能（可能是设置`xterm`标题）不再起作用。

# sockets - 如何使用 TCP 协议检查字节是否成功发送？

> ID：10184436
> 
> 赞同：5
> 
> 时间：2012-04-17T02:50:49.903
> 
> 标签：sockets, tcp

我在进行网络编程时遇到问题。我正在使用 TCP 协议在服务器和客户端之间进行通信。我的代码正在运行，但我还无法检测到数据是成功发送还是失败了。我有以下问题：

1.  如何检查字节是否已通过套接字 TCP 成功发送？
2.  TCP协议中的确认（ACK）如何工作？
3.  如何使用套接字编程进行安全通信？

您可以用 C#、Java 或 PHP 进行解释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T03:28:15.960

最好将 TCP/IP 如何工作的解释留作研究练习，而不是专门的 SO 问题。虽然通常的第一站可能是[Wikipedia](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)，但这可能无法从概念层面为您提供很好的介绍。在评论中还有一个[TCP 教程](http://www.ssfnet.org/Exchange/tcp/tcpTutorialNotes.html)的链接。

然而，从本质上讲，TCP 顾名思义，是一种传输控制协议，它提供了一种可靠传输字节流的机制。给定一个字节流，TCP 基本上可以确保接收者以正确的顺序接收字节。如果流中间的一个字节“丢失”了，那么 TCP 可以检测到这一点并安排重新传输。所有这些对接收方都是透明的。TCP 的神奇之处在于，接收方只是从套接字中读取数据，并且数据以正确的顺序出现。

当您使用 TCP 套接字时，您无需处理 ACK 和 NACK 以及重传。所有这些对您的应用程序都是透明的。

现在，您可以检测到另一端已经离开，但您无法知道另一端确实收到或没有收到您的消息。这是[二将军的问题](http://en.wikipedia.org/wiki/Two_Generals%27_Problem)。

但实际上，如果您对 TCP 的工作原理感兴趣，请阅读[W Richard Stevens 的 TCP/IP Illustrated](https://rads.stackoverflow.com/amzn/click/com/0201633469)。不是试图欺骗你，而是要理解它，你真的需要离开并阅读它（无论是在线还是在枯树上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T03:22:29.713

1.  通常，无论您用于发送数据的哪个函数都会返回发送的字节数，您必须对其进行计数并确保它们都已发送。具体的例子[在这里](http://www.php.net/manual/en/function.socket-recv.php)。

2.  ACK(nowledgement) 数据包被发送：在建立与另一个套接字的连接期间、发送数据时以及终止与远程主机的连接时。基本上，它们的目的是让对方知道您的一端是否收到了发送的数据。除非您正在编写原始套接字，否则您不会对它们进行破坏，出于明显的原因（例如实现标准），我不建议您这样做。此外，除非您拥有 root/管理员访问权限，否则大多数系统都禁止打开原始套接字。如果您仍然对原始套接字感兴趣，请阅读[此](http://www.php.net/manual/en/function.socket-create.php)内容；您还应该阅读[TCP RFC](https://www.ietf.org/rfc/rfc793.txt)及其相关文档。

3.  SSL 的实现取决于你想怎么做，这意味着你希望你的协议如何工作。PHP 特定的 OpenSSL 函数在[这里](http://php.net/manual/en/book.openssl.php)。如果您想了解更多关于 HTTPS 的内部工作原理，我相信您应该阅读[这里](https://www.rfc-editor.org/rfc/rfc2818)。

此外，如果您正在制定自己的协议，我相信看看[Google 的 Protocol Buffers](https://code.google.com/p/protobuf/)可能会很有用。毋庸置疑，在尝试之前，您应该对互联网的一般运作方式以及您的目标有所了解。

PS：关于原始套接字，你真的应该尝试用一些 C 知识来做它们，因为出于某种原因，其他语言的文档似乎很少，或者几乎没有（可能是因为真的不需要接触它们）。无论如何，这可能很有用：[http ://www.tenouk.com/Module43a.html](http://www.tenouk.com/Module43a.html)

# oracle11g - Oracle DB 可以与 Tornado 一起使用吗？

> ID：10184439
> 
> 赞同：0
> 
> 时间：2012-04-17T02:52:08.247
> 
> 标签：oracle11g, tornado

到目前为止，我只将 Tornado 与 MySQL 一起使用，但我需要它来使用 Oracle 数据库中的数据。这很容易做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:20:12.163

您可以使用[SQLAlchemy](http://www.sqlalchemy.org/)。从他们的网站：

> SQLAlchemy 包括 SQLite、Postgresql、MySQL、**Oracle的方言**、MS-SQL、Firebird、Sybase 等方言，其中大部分支持多个 DBAPI

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:42:33.400

由于您使用 python 编写 Tornado，因此可以使用任何 python 工具。你可以在 pypi 上看到所有与 oracle 相关的项目：[http ://pypi.python.org/pypi?%3Aaction=search&term=oracle&submit=search](http://pypi.python.org/pypi?%3Aaction=search&term=oracle&submit=search)

但是请注意，除非您使用异步驱动程序，否则您的所有数据库调用都将被阻塞，这意味着您的各个 Tornado 服务器线程都将被卡住等待后端。我似乎找不到任何异步 Oracle 驱动程序，祝你好运。

也就是说，mysql 驱动程序（以及 tornado 提供的 tornado.database 模块）是同步的。tornado 的创建者认为，只要不执行任何慢速查询，就可以使用异步驱动程序。

# mocking - PHPUnit 模拟多重期望

> ID：10184440
> 
> 赞同：4
> 
> 时间：2012-04-17T02:52:14.480
> 
> 标签：mocking, phpunit

来自 Google Mock 的背景，我很惊讶这不起作用，除非我做错了。

我只是想确保**永远不会**使用**特定的类类型**调用方法，但可能会为其他类类型调用方法。所以这是我拥有的代码，它解释了我想要什么：

```
$this->entityManagerMock
      ->expects($this->any())
      ->method('persist');
$this->entityManagerMock
     ->expects($this->never())
     ->method('persist')
     ->with($this->isInstanceOf('MySpecificClass')); 
```

现在我收到类似这样的消息：

```
Doctrine\ORM\EntityManager::persist(DifferentClassType Object (...)) was not expected to be called. 
```

当我期望第一个期望来处理它时。

我试过了，但结果是一样的：

```
$this->entityManagerMock
      ->expects($this->any())
      ->method('persist')
      ->with($this->anything());
$this->entityManagerMock
     ->expects($this->never())
     ->method('persist')
     ->with($this->isInstanceOf('MySpecificClass')); 
```

这是我第一次在 PHPUnit 中使用模拟，但在我看来它`with`已经损坏和/或没有用。我知道现在大多数 Web 开发人员都使用 TDD，所以必须有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T21:40:59.457

作为一种解决方法，您可以使用[`returnCallback`](http://www.phpunit.de/manual/3.6/en/test-doubles.html)：

```
$this->entityManagerMock
     ->expects($this->any())
     ->method('persist')
     ->will($this->returnCallback(function ($object) {
         self::assertNotInstanceOf('MySpecificClass', $object);
     })); 
```

# java - 加密库如何确定您是否使用正确的密钥来解密消息？

> ID：10184443
> 
> 赞同：0
> 
> 时间：2012-04-17T02:52:30.837
> 
> 标签：java, encryption, cryptography, rsa

我已经使用 rsa 使用我的公钥-e（对应的私钥-d）加密了一条小消息。但是如果我用另一个私钥 d' 解密它，它会给出一个`bad padding exception`.
它怎么知道我用错了钥匙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T02:58:25.193

使用填充方案确实可以让解密者很好地了解他要么使用了错误的密钥，要么正在处理损坏的数据。

填充方案具有明确定义的明文最终字节集。如果您使用错误的密钥解密，则生成的“明文”基本上是随机垃圾，因此极不可能以有效的填充序列结束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T00:57:27.740

大多数 RSA 库默认使用[PKCS#1 块类型 2](https://www.rfc-editor.org/rfc/rfc2313)填充来进行公钥加密。在这种情况下，数据必须至少比模数大小小 11 个字节，并且明文填充如下：

00 02 r [1] r [2] r [3] r [4] ... r [M] ... 00 [你的明文字节]

其中 M >= 8 和 ri[是]随机正字节：它们都是非零的。

这是将模数提高到 e^(次方的实际值。)因此，解密后解密器可以检查结果是否如下所示，即

1.  高位字节为 0
2.  高位字节的下一个是 2
3.  至少接下来的 8 个字节非零
4.  在此之后某处出现零字节

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T01:13:07.633

该机制实际上很简单，因为它很聪明。

想象一个对 8 个字节的块进行加密的分组密码：它将每个明文消息分成 8 个字节的组，并将每个组加密为单个块。说到最后一个区块，有两种可能：

1.  该块短于 8 个字节，并且必须填充到正好 8 个字节。在这种情况下，必须将一些字节数*n附加到块中。*这些字节中的每一个都具有相同的二进制值*n*。所以最后一个块看起来像其中一个，其中`d`是一个字节的数据：

    > dddddd 1 dddddd
    > 2 2
    > ddddd 3 3 3
    > 。. .
    > d 7 7 7 7 7 7 7

2.  该块正好是 8 个字节长。在这种情况下，*整个*块被附加到消息中，所以最后 2 个块看起来像这样：

    > dddddddd 8 8 8 8 8 8 8 8

现在，当消息被解密时，解密器可以明确地知道要删除多少字节的填充。如果最后一个块不以`n`字符结尾，每个字符都带有二进制值`n`，它就知道消息已被破坏或使用错误的密钥解密。

* * *

不要将此填充与用于修改消息*开头*的初始化向量或 IV 混淆。填充的目的是确保消息只包含完整的块，并允许解密器验证密钥。IV 是一个随机的字节序列，确保相同的明文可以使用相同的密钥多次加密，但每次仍生成不同的密文。

# delphi - 在 Windows 7 中看不到性能对象

> ID：10184450
> 
> 赞同：2
> 
> 时间：2012-04-17T02:53:25.587
> 
> 标签：delphi, windows-7, performancecounter, performance

我希望将我的应用程序的一些状态注册为性能对象，以便我可以利用 Windows 性能监视器监控其性能。

但是我在使用 Windows 7 时遇到了问题：即使我的应用程序正在运行，也无法在性能监视器列表中看到性能对象。

我的代码和本教程中的Delphi项目一模一样： [http ://www.wehlou.com/Code/perfmon/index.htm](http://www.wehlou.com/Code/perfmon/index.htm)

但是，本教程中提供的解决方案也不适用于 Windows 7。

这样的解决方案在~~Windows XP 和~~2003 中运行良好。

我不知道 Windows 7 中是否有一些更改导致我的性能对象丢失。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T06:49:16.960

Is your Windows 7 computer a 64-bits machine? You may have to provide both a 32 and 64 bits version:

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa371636(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371636(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:24:21.460

**简短的回答：**

是的，您可以在 Windows 7 x32 下手动修复 2 个对象性能计数器（DeltaCount 和 RawCount）问题。PerfMonClient.exe 生成的 2 个文件是可用的（即 symfile.h 和 symfile.ini）。

注意： 的用法请参考 MSDN `lodctr.exe`。

在此之前，应创建如下注册表项：

```
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\PerfMonClient\Performance]
"Open"="PerfData_Open"
"Close"="PerfData_Close"
"Collect"="PerfData_Collect"
"Library"=hex(2):25,00,53,00,79,00,73,00,74,00,65,00,6d,00,52,00,6f,00,6f,00,\
  74,00,25,00,5c,00,53,00,79,00,73,00,74,00,65,00,6d,00,33,00,32,00,5c,00,50,\
  00,65,00,72,00,66,00,4d,00,6f,00,6e,00,44,00,4c,00,4c,00,2e,00,64,00,6c,00,\
  6c,00,00,00 
```

注意：库指向 %SystemRoot%\System32\PerfMonDLL.dll（性能 DLL 的位置）。

即使在 Windows XP 下，任何使用 PerfMonClient.exe 应用程序安装和/或卸载它们的尝试都不起作用。把它给忘了。

* * *

**看感觉：**

![PerMonClient1](../Images/17ea4cc3d22251e076534b4b6d74ba0b.png)

![PerMonClient2](../Images/6373e838b8235c6ae5c76ef8a1532a93.png)

* * *

**清单**

符号文件.h：

```
#define OBJECT_1   0
#define DEVICE_COUNTER_1   2
#define DEVICE_COUNTER_2   4 
```

符号文件.ini：

```
[info]
drivername=PerfMonClient
symbolfile=symfile.h
[languages]
009=English
[text]
OBJECT_1_009_NAME=PerfMonTest Performance Counters
OBJECT_1_009_HELP=A demo application for your unbridled pleasure
DEVICE_COUNTER_1_009_NAME=RawCount
DEVICE_COUNTER_1_009_HELP=A count of something that goes up and down
DEVICE_COUNTER_2_009_NAME=DeltaCount
DEVICE_COUNTER_2_009_HELP=Something going up all the time, Windows shows difference per time unit 
```

# javascript - javascript滚动到div类的底部

> ID：10184453
> 
> 赞同：2
> 
> 时间：2012-04-17T02:55:04.960
> 
> 标签：javascript, django, html

您好我正在尝试在 django 中实现一个简单的聊天框，并且想知道如何使用 javascript 滚动到 div 类的底部？基本上，当页面加载时，我希望用户可以看到发送给他们的最新消息，而不是最近的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:06:58.167

我最近为了类似的事情不得不这样做。我找到了一个基本的 jquery 插件，可以将元素平滑地滚动到屏幕上。

```
(function($) {

  $.fn.scrollMinimal = function() {

    var cTop = this.offset().top;
    var cHeight = this.outerHeight(true);
    var windowTop = $(window).scrollTop();
    var visibleHeight = $(window).height();

    if (cTop < windowTop) {
      $('body').animate({'scrollTop': cTop}, 'slow', 'swing');
    } else if (cTop + cHeight > windowTop + visibleHeight) {
      $(jQuery.browser.webkit ? "body": "html")
        .animate({'scrollTop': cTop - visibleHeight + cHeight}, 'slow', 'swing');
    }
  };

}(jQuery)); 
```

像这样使用：

```
$('#chat').scrollMinimal(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T03:15:26.240

好吧，基本脚本是设置 scrollTop 等于 scrollHeight，所以你需要一个这样的脚本：

```
var DIV = document.getElementById('theDIVElement');
DIV.scrollTop = DIV.scrollHeight; 
```

您只需要更改`theDIVElement`为您的 DIV id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T03:54:31.963

这是我在聊天中使用的脚本：

```
<SCRIPT LANGUAGE="JavaScript"> 
<!-- 
function myScroll() { 
    window.scrollBy(0,01) 
    setTimeout('myScroll()',100); } 
if (document.layers || document.all) 
    myScroll() 
//--></SCRIPT> 
```

这也适用于添加新消息时，如果您滚动到底部的速度太快，则在您尝试阅读时会很难看到您的眼睛。

# jquery - 锚标记直接链接需要覆盖

> ID：10184462
> 
> 赞同：0
> 
> 时间：2012-04-17T02:55:44.530
> 
> 标签：jquery, css, redirect, hash

[http://2012.delineamultimedia.com/#home_contact](http://2012.delineamultimedia.com/#home_contact)

我知道这有点老套，但是我需要这个链接和其他锚标签来做同样的事情。转到此链接时，页面（部分）的标题被屏蔽，因为固定导航覆盖了内容...

我正在使用 scrollto jQuery 插件，并在它到达时给它一个负边距顶部以补偿固定导航......这是一个例子......

```
<script type="text/javascript">
$(function() {
  $('ul.nav a').bind('click',function(event){
    var $anchor = $(this);

     $('html, body').stop().animate({
     scrollTop: $($anchor.attr('href')).offset().top-139
     }, 1500,'easeOutBounce');

     event.preventDefault();
     });
 });
</script> 
```

问题是这仅在触发滚动功能时才有效。因此，我一直在尝试执行以下操作，并且我需要帮助才能使其正常工作，以便当有人直接链接到哈希标签[http://2012.delineamultimedia.com/#home_contact](http://2012.delineamultimedia.com/#home_contact)或任何其他相关页面时知道向下移动额外的空间，以便清除导航。

```
<script type="text/javascript">
$(document).ready(function(){
function checkHash() {
    if (location.hash === "#home_contact") {
        navClick('#home_contact');
    }
    else if (location.hash === "#/index.html") {
        navClick('index.html');
    }
}
window.onhashchange = checkHash;
window.onload = checkHash;
});
</script> 
```

这样做的目的是在单击哈希链接时激活 navItem。出于某种原因，这不起作用，任何人都可以帮我让它工作吗？在此先感谢您的时间！我希望这是有道理的，很难解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T03:30:01.967

我会搭载您现有的功能。在页面加载时触发导航上的点击事件。

```
 $(document).ready(function(){
       switch(location.hash){
             case '#home_contact':
                 $('a.contact-nav').trigger('click');
                 break;
             default:
                 $('#top_logo a').trigger('click');
                 break;
       };     
 }); 
```

换句话说。单击您的导航已经有效，您可以重复使用该功能。

# asp.net - 水晶报表正在使母版页的菜单消失

> ID：10184475
> 
> 赞同：0
> 
> 时间：2012-04-17T02:57:45.793
> 
> 标签：asp.net, crystal-reports, master-pages

出于某种原因，每当我转到我的网站页面上的水晶报告时，我的主导航栏就会消失。以下是网站标题（带有导航菜单）的样子：

![该网站应该是什么样子](../Images/241df8308ab651e2a39e62586ba6e9f7.png)

这是页面上有报告时的样子：

![报告的样子](../Images/eaa8ae7231282184bf9e2867b797d727.png)

有人可以告诉我是什么原因造成的，我该如何解决？顺便说一句，我正在使用母版页作为标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T03:38:51.947

更环保的是，Crystal Report 查看器是报表的动态 HTML 表示。它结合了 JavaScript、HTML 和 CSS（呃，什么没有）来代表您在网页上的报告。当 CrystalReportViewer 控件呈现到您的页面时，工具栏由对链接的 .JS 的 JavaScript 调用提供支持。

我的观点是，所有这些都引入了很多可能与您现有页面发生冲突的东西。特别是可能会发生 JavaScript 错误（这可能会导致某些事情停止呈现）或报告使用的 CSS 恰好应用了您从未打算应用到页面中的对象的样式。

我强烈建议将 Web Developer 工具栏和/或 FireBug 安装到 FireFox、IE 或这些天提供的任何浏览器。根据我的经验，FireFox 对这些的实现非常好。

当页面加载时，您可以使用 Web Developer 工具栏的“CSS”菜单来实际禁用应用于页面的部分或全部样式。如果禁用 Crystal 相关样式（或全部）使您丢失的工具栏出现，那么它可能是您的 CSS 中的冲突。前端开发人员会知道调整样式（即添加 !important 指令到样式，更改类/id 名称等）来解决这个问题。

或者，FireBug 可能会报告 JavaScript 错误（哎呀，即使是 FireFox 也可以在控制台中显示这些错误），这可能表明存在阻止完成渲染工具栏的问题。

一个外部可能性是报告本身包含标记。例如，如果报表中的某些字段包含恰好由浏览器呈现的 HTML，则可以创建一个打开的 div 标记、css 样式甚至 JavaScript，这些都可以完成我上面解释的所有内容。

我希望这可以为您缩小范围。故障排除快乐！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T22:51:41.770

我遇到了同样的问题，经过数小时的搜索，我终于解决了...检查一下... [http://scn.sap.com/thread/1926659](http://scn.sap.com/thread/1926659)

在 crystalreportviewer css 文件中，我调整了 div class = clear 并更改了 height 属性并禁用了溢出：隐藏。希望这对你有用。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-02T15:28:29.227

我在网上搜索后找到了解决方案，非常简单。

在 Site Master 上，更改所有具有“clear”样式的位置的名称，例如“clear1”，并在 site.css 中使用该名称进行更改。

问题在于与 Crystal Report css 的命名空间冲突。

希望这有帮助。

# javascript - Django 在页面可用时动态加载部分页面

> ID：10184476
> 
> 赞同：1
> 
> 时间：2012-04-17T02:58:03.367
> 
> 标签：javascript, ajax, django, dynamic

我正在制作一个 Django 页面，该页面有一个侧边栏，其中包含一些从外部网站加载的信息（例如公共汽车到达时间）。

我是 Web 开发的新手，我认为这是一个瓶颈。实际上，页面在加载来自其他站点的数据时会挂起几分之一秒。在获得此信息之前它不会显示任何内容，因为它会运行 python 脚本来获取数据，然后再将其烘焙到 html 中。

理想情况下，它会显示直接从我的 Web 服务器加载的大部分页面，然后有一点“加载”gif 或其他东西，直到它在显示之前真正设法抓取数据。

我怎样才能做到这一点？我认为javascript会有用吗？如何让它与我现有的轮询脚本集成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:07:29.017

您可能不需要最新信息，因此让[另一个进程](http://www.b-list.org/weblog/2007/sep/22/standalone-django-scripts/)将数据加载到缓存中，并让您的网站从本地缓存中读取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:23:47.413

集成此类内容的最简单但不是最漂亮的方法是使用 iframe。只需为次要内容制作 iframe，它们会在适当的时候自行加载。不需要javascript。

# javascript - 我想在几秒钟后自动显示 div

> ID：10184479
> 
> 赞同：2
> 
> 时间：2012-04-17T02:58:30.740
> 
> 标签：javascript, popup, dialog

我需要制作一个 div 并在几秒钟后弹出一条消息来加载窗口，大概需要 5 秒。

我正在通过谷歌寻找一些资源，并在这个[网站上](http://www.queness.com/post/1696/create-a-beautiful-looking-custom-dialog-box-with-jquery-and-css3)找到了一个很好的例子， 但是，在这个资源中，它不支持的一件事是能够设置时间。在评论中，一位用户对设置时间提出了质疑，而创作者提出了这样的建议

> var show = setTimeout("popup()", 3000);

但这对我不起作用！

当然，我问了同样的问题，但现在没有得到答案。

在这里，我将链接到我正在处理的[页面。](http://xn--mkro5kr2lovb719a7espng.com/)对不起，是日文！您可以找到我试图在几秒钟后显示的红色弹出框。

```
<script>
$(document).ready(function () {

    // if user clicked on button, the overlay layer or the dialogbox, close the dialog  
    $('a.btn-ok, #dialog-overlay, #dialog-box').click(function () {     
        $('#dialog-overlay, #dialog-box').hide();       
        return false;
    });

    // if user resize the window, call the same function again
    // to make sure the overlay fills the screen and dialogbox aligned to center    
    $(window).resize(function () {

        //only do it if the dialog box is not hidden
        if (!$('#dialog-box').is(':hidden')) popup();       
    }); 

});

//Popup dialog
function popup(message) {

    // get the screen height and width  
    var maskHeight = $(document).height();  
    var maskWidth = $(window).width();

    // calculate the values for center alignment
    var dialogTop =  (maskHeight/3) - ($('#dialog-box').height());  
    var dialogLeft = (maskWidth/2) - ($('#dialog-box').width()/2); 

    // assign values to the overlay and dialog box
    $('#dialog-overlay').css({height:maskHeight, width:maskWidth}).show();
    $('#dialog-box').css({top:dialogTop, left:dialogLeft}).show();

    // display the message
    $('#dialog-message').html(message);
}
</script>

<body<?php if(is_home()): ?> onload="popup('<p>「千葉県　行政書士」などの<br />&nbsp;Yahoo! 検索で上位表示している、このウェブサイトを、&lt;br />&nbsp;あなたのものにしませんか?</p>')"<?php endif; ?>>
<div id="dialog-overlay"></div>
    <div id="dialog-box">
        <div class="dialog-content">
            <div id="arrows"><img src="<?php bloginfo('template_url'); ?>/img/dilog-box_arrow.png" alt="" ></div>
            <div id="dialog-message"></div>
            <div class="al_c"><a href="<?php echo home_url(); ?>/sales/" target="_self"><img src="<?php bloginfo('template_url'); ?>/img/dialog-box_btn_off.png" class="btn" alt="HPレンタルの詳細ページへ" /></a></div>
            <a href="#" class="button">閉じる&lt;/a>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T03:10:36.770

你可以这样做：

```
<script>
$(document).ready(function () {

    // if user clicked on button, the overlay layer or the dialogbox, close the dialog  
    $('a.btn-ok, #dialog-overlay, #dialog-box').click(function () {     
        $('#dialog-overlay, #dialog-box').hide();       
        return false;
    });

    // if user resize the window, call the same function again
    // to make sure the overlay fills the screen and dialogbox aligned to center    
    $(window).resize(function () {

        //only do it if the dialog box is not hidden
        if (!$('#dialog-box').is(':hidden')) popup();       
    }); 

});

//Popup dialog
function popup(message) {

    // get the screen height and width  
    var maskHeight = $(document).height();  
    var maskWidth = $(window).width();

    // calculate the values for center alignment
    var dialogTop =  (maskHeight/3) - ($('#dialog-box').height());  
    var dialogLeft = (maskWidth/2) - ($('#dialog-box').width()/2); 

    // assign values to the overlay and dialog box
    $('#dialog-overlay').css({height:maskHeight, width:maskWidth}).show();
    $('#dialog-box').css({top:dialogTop, left:dialogLeft}).show();

    // display the message
    $('#dialog-message').html(message);
}
</script>

<body>
 <div id="dialog-overlay"></div>
  <div id="dialog-box">
      <div class="dialog-content">
          <div id="arrows"><img src="<?php bloginfo('template_url'); ?>/img/dilog-box_arrow.png" alt="" ></div>
          <div id="dialog-message"></div>
          <div class="al_c"><a href="<?php echo home_url(); ?>/sales/" target="_self"><img src="<?php bloginfo('template_url'); ?>/img/dialog-box_btn_off.png" class="btn" alt="HPレンタルの詳細ページへ" /></a></div>
          <a href="#" class="button">閉じる&lt;/a>
      </div>
  </div>
</div>
<?php if(is_home()) { ?>
<script>
  window.onload = function () {
    setTimeout(function () {
      popup('<p>「千葉県　行政書士」などの<br />&nbsp;Yahoo! 検索で上位表示している、このウェブサイトを、&lt;br />&nbsp;あなたのものにしませんか?</p>');
    }, 5000);
  };
</script>
<?php } ?> 
```

注意 last 之后的代码`</div>`。通过检查条件，当条件为真时，创建一个`window.onload`带有 setTimeout 的脚本，然后使用匿名函数调用该`popup()`函数。

在 setTimeout 中使用匿名函数比使用引号更安全，因为如果引号中有变量，这将是一个安全风险。例子：

```
setTimeout("popup(" + a + )", 1000); 
```

如果我这样定义变量`a`：

```
a = '"something that will popup"); maliciousFunction('; 
```

然后浏览器将调用 2 个函数（您的函数和一个恶意函数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T03:15:00.083

尝试这个：

```
$(window).load(function() {
    window.setTimeout('popup()', 5000);
}); 
```

# python - Matplotlib EPS 导出忽略插值='最近的'

> ID：10184480
> 
> 赞同：2
> 
> 时间：2012-04-17T02:58:40.683
> 
> 标签：python, matplotlib

我想将*没有*插值的热图导出为 EPS 文件。使用`imshow()`with `interpolation='nearest'`，如果我导出为 PDF（或 PNG 或 SVG），图像看起来正确，没有插值。但如果我导出为 EPS，它似乎忽略了`interpolation='nearest'`.

有没有什么方法可以导出为 EPS 而无需插值？

以下是演示导出文件类型差异的示例代码：

```
import numpy as np
import matplotlib.pyplot as plt

data = np.random.rand(4,4)

fig = plt.figure()
ax = fig.add_subplot(111)
ax.imshow(data,interpolation='nearest')

fig.savefig('test.eps')
fig.savefig('test.pdf')
fig.savefig('test.png') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:13:23.350

较新版本的 matplotlib 接受参数`interpolation='none'`，这可能会产生预期的效果。对于您的代码，这将显示为

```
import numpy as np
import matplotlib.pyplot as plt

data = np.random.rand(4,4)

fig = plt.figure()
ax = fig.add_subplot(111)
ax.imshow(data,interpolation='none')

fig.savefig('test.eps')
fig.savefig('test.pdf')
fig.savefig('test.png') 
```

# java - java中的参数多态性与简单示例

> ID：10184490
> 
> 赞同：2
> 
> 时间：2012-04-17T03:01:00.107
> 
> 标签：java, generics, polymorphism

我已经对该主题进行了进一步研究，并且我意识到，对于纯粹详细说明参数多态性的示例，它不能使用“实现”（它将详细说明子类型多态性），而应该使用泛型。

这是我之前的问题： [什么是 Java 中的参数多态性（示例）？](https://stackoverflow.com/questions/10179449/what-is-parametric-polymorphism-in-java-with-example)

这是重新编写的代码，可以使用具有单个问题的泛型。

```
class Pet<T>
{
  private T pet;

  public Pet(T pet)
  {
    this.pet = pet;
  }

  public String talks()
  {
    // what do i write here?
    // pet.talks(); is undefined for type T
  }
}

class Cat
{
  public String talks()
  {
    return "Meow";
  }
}

class Dog
{
  public String talks()
  {
    return "Woof";
  }
}

public class TestPet
{

  public static void main(String[] args)
  {
    Pet<Cat> cat = new Pet<Cat>(new Cat());
    System.out.println("Cat says " + cat.talks());

    Pet<Dog> dog = new Pet<Dog>(new Dog());
    System.out.println("Dog says " + dog.talks());
  }

} 
```

我的代码有一个问题，在评论中有详细说明。我不确定如何在不使用 implements 命令的情况下编写它。你知道要写什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T03:05:12.257

您需要添加一个上限，`T`以便它实现一个接口，该接口保证该`talks()`类型中有一个方法`T`。

```
class Pet<T extends Talker>
{
    private T pet;

    public Pet(T pet)
    {
        this.pet = pet;
    }

    public String talks()
    {
        return pet.talks(); // is now defined for type T
    }
}

interface Talker
{
    String talks();
} 
```

演示，[感谢 Ray Toal](https://stackoverflow.com/questions/10184490/parametric-polymorphism-in-java-with-simple-example/10184512#comment13072024_10184512)：http: [//ideone.com/yiAqM](http://ideone.com/yiAqM)

# c++ - 在我的 MFC 应用程序中报告了错误的内存泄漏

> ID：10184493
> 
> 赞同：1
> 
> 时间：2012-04-17T03:01:50.840
> 
> 标签：c++, visual-c++, mfc

为格式不佳道歉-在我的手机上写这个。

退出我的 MFC（也是 cli）应用程序时，我收到许多错误的内存泄漏报告。

经调查，MFC AfxDiagnosticInit 函数被调用得太早，因此在调用我的 CWinApp 析构函数之前发生内存泄漏转储，导致许多误报内存泄漏

如何确保更快地调用 AfxDiagnosticInit，以便在泄漏转储开始之前调用我的静态变量析构函数（例如 CMyApp）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T00:18:00.047

只是跟进：我发现了真正的问题，这与它是一个混合模式的 C++/CLI 应用程序有关，并且 CLI 不允许 CRT 关闭。

此处修改问题： [混合模式 C++/CLI 应用程序未正确关闭 CLR](https://stackoverflow.com/questions/10219942/mixed-mode-c-cli-app-not-shutting-down-clr-correctly)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T03:09:18.927

尝试找到`WinMain()`构造 CWinApp 的相同函数，并将其放置在`AfxDiagnosticInit()`那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-27T07:08:54.247

作为替代解决方案，您还可以使用以下方法禁用 MFC 的自动内存泄漏转储：

```
AfxEnableMemoryLeakDump(FALSE); 
```

自 Visual Studio 2010 起支持此功能。有关文档，请参见[此处](https://msdn.microsoft.com/en-us/library/dd554973.aspx)。

您可以将泄漏物倾倒在更合适的位置`_CrtDumpMemoryLeaks();`

# mysql - 如何在 InnoDB 中不回收 auto_increment ID

> ID：10184494
> 
> 赞同：4
> 
> 时间：2012-04-17T03:02:06.393
> 
> 标签：mysql, innodb, auto-increment

我最近[读到](http://dev.mysql.com/doc/refman/5.1/en/innodb-auto-increment-handling.html)，由于 InnoDB`AUTO_INCREMENT`在服务器重新启动时如何重新计算值，ID 列表高端的任何记录都可能被重用其 ID。

通常，这不是问题，因为当删除用户时，与该 ID 关联的所有内容也会从其他表中删除。

但我故意让他们的论坛帖子成为孤立的，标记为“由*=User #123=*发布”，以便保留过去的对话。显然，如果一个 ID 被重用，这将是一个问题。

我以前从未遇到过这个问题，因为总是有足够多的新用户使 ID 不太可能以这种方式被重用。然而，在我的新项目中，注册很少见，并且经常删除非活动用户（特别是因为“Open Alpha”帐户仅持续三天作为预览），并且这种 ID 重用现在已经发生了三对三。

我通过为`AUTO_INCREMENT`其他地方保存正确的值并使用它而不是依赖内部值来“解决”这个问题。有没有一种实际的方法让 InnoDB 记住实际的最后一个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:28:01.747

5.5 文档建议将自动增量值存储在您已经拥有的其他位置。

另一种解决方案是模拟 SEQUENCE ，这样您就不会在实际表本身中使用自动增量。这已经在 SO上[反复](https://stackoverflow.com/questions/3292197/emulate-auto-increment-in-mysql-innodb)[讨论过](https://stackoverflow.com/questions/805808/emulating-a-transaction-safe-sequence-in-mysql)。[MYSQL 性能博客提到了](http://www.mysqlperformanceblog.com/2008/04/02/stored-function-to-generate-sequences/)它。

又一个 MySQL 数据搞砸了其他 RDBMS 没有......

# iphone - 编辑： UITextView 标签被切成两半（水平）

> ID：10184495
> 
> 赞同：1
> 
> 时间：2012-04-17T03:02:23.787
> 
> 标签：iphone, objective-c, ios, uibutton, contentsize

我需要帮助解决这个特殊的问题。我有一个多项选择题应用程序，我可以选择 UITextview。有时，无论出于何种原因，选项 D 都会被减半。

截屏： ![D选项减半！](../Images/639c0f136a5bae2330624bbe38c21538.png)

不知道这里发生了什么。我基本上让 UITextView 框架调整到它的 contentSize。

```
 CGRect dFrame = choiceD.frame;
                dFrame.size.height = choiceD.contentSize.height;
                choiceD.frame = dFrame; 
```

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T03:10:49.500

计算字符串的大小：

```
 NSString *choiceDString = @"Equal the present value....";
    CGSize size = [choiceDString sizeWithFont:[UIFont systemFontOfSize:CHOICE_FONT_SIZE] constrainedToSize:CGSizeMake(CHOICE_WIDTH, 100000)]; 
```

初始化一个标签以包含选择字符串：

```
 UILabel *choiceDLabel = [[UILabel alloc] initWithFrame:CGRectMake(0,0,size.width,size.height)];
    choiceDLabel.text= choiceDString; 
```

为按钮添加子视图标签：

```
 [button addSubview:choiceLabel]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T03:16:55.373

使用此代码..您已根据您的文本长度定义标签的高度...

```
NSString *summary;
summary = @" your text";
CGSize sizeofbuttonorlable = [summary sizeWithFont:[UIFont systemFontOfSize:30] 
               constrainedToSize:CGSizeMake(self.view.bounds.size.width - 40, MAXFLOAT)  
                   lineBreakMode:UILineBreakModeWordWrap];

CGRect frame = CGRectMake(0.0f, 0.0f, 320.0f, sizeofbuttonorlable.height);
UILabel *choiceDLabel = [[UILabel alloc] initWithFrame:frame];
choiceDLabel.text= summary;
[button addSubview:choiceLabel]; 
```

希望，这会帮助你......冷静

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T04:57:43.047

我的建议是首先计算您在 textView 中输入的文本的大小，例如：-

```
 //Give the maximum size of label which that label can have.
CGSize maximumLabelSize = CGSizeMake(300,500);
CGSize expectedLabelSize = [Label.text sizeWithFont:Label.font constrainedToSize:maximumLabelSize lineBreakMode:UILineBreakModeWordWrap];

      //adjust the label the new height.
CGRect newDescFrame = Label.frame;
newLabelFrame.size.height = expectedLabelSize.height;
NSLog(@"%f",newLabelFrame.size.height);
      //adjust the label the new width.
newLabelFrame.size.width = expectedLabelSize.width;
NSLog(@"%f",newLabelFrame.size.width);
      //Set the label size according to the new height and width.
label.frame = newLabelFrame; 
```

在 textView 中输入文本后编写上述代码。希望它有所帮助。谢谢:)

# facebook - 丢失了我网站的 Facebook appid

> ID：10184499
> 
> 赞同：0
> 
> 时间：2012-04-17T03:03:12.500
> 
> 标签：facebook, app-id

我们在 Facebook 注册了我们的网站。

然后我们想开始使用 Facebook Javascript API 来利用 Facebook 提要对话框（请参阅[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)）

我们如何才能知道我们得到的 appid 是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T03:11:19.437

**设置 fb 开发者账号（简而言之）**

1.  转到 Facebook 搜索栏并输入“开发者”。当 Facebook Developer 应用程序出现时，将其添加到您的个人资料中。

2.  根据新规则，您的帐户必须经过验证。请在此处添加您的手机或信用卡/借记卡[来验证您的帐户](http://www.facebook.com/confirmphone.php)

3 个简单的步骤来获取 Facebook 应用程序 ID

1.  转到您的 Facebook 开发者帐户中的[应用程序](https://developers.facebook.com/apps)

2.  在左侧，您将找到您从中创建的应用程序列表，找到所需的应用程序应该不难，所以点击它。

3.  然后您将看到该应用程序的摘要，其中第一个应该是`App ID/API Key`

田田

我希望这有帮助

# objective-c - 如何为没有标题栏的模态窗口强制键盘焦点

> ID：10184502
> 
> 赞同：0
> 
> 时间：2012-04-17T03:04:08.020
> 
> 标签：objective-c, cocoa

我想运行一个类似于 Finder Go To Folder 的简单对话框。

我使用了一个 NSPanel 制作了这个 Document Modal 并使用 runModal 运行。这有效，但显示一个标题。

如果我关闭标题栏（在 IB 中），按钮会起作用，但 NSTextField 不会获得键盘焦点。我尝试了很多技术来使其成为 firstResponder 或设置为 key，setBecomesKeyOnlyIfNeeded:NO 但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:10:16.613

您需要继承`NSWindow`、覆盖`- (BOOL)canBecomeKeyWindow`和返回`YES`。

默认情况下，无边框窗口不能成为关键窗口。

# java - 要求 java 的矩阵库（PCA / 线性回归）

> ID：10184503
> 
> 赞同：1
> 
> 时间：2012-04-17T03:04:17.123
> 
> 标签：java, matrix

我正在做一个java项目。我们必须在这个项目中添加 PCA 和线性回归函数。你能告诉我可以做这些矩阵的事情的java lib吗？非常感谢！

顺便说一句，我曾经使用 Matlab Builder For Java 将 matlab 代码转换为“.jar”。然而，老板出于效率的原因拒绝了这个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:48:30.367

这是[一个对不同 Java 矩阵库进行基准测试的出色站点](http://code.google.com/p/java-matrix-benchmark/)。

> Java Matrix Benchmark (JMatBench) 是用于评估 Java 线性代数库的速度和稳定性的工具。用户可以使用此工具为他们的应用程序选择最佳库，开发人员可以使用该工具来识别错误和弱点。其目标是帮助改善 Java 平台上的高性能计算状态。
> 
> JMatBench 严格测试各种矩阵大小和线性代数运算的性能。运行时性能基准衡量每个库在最佳条件下的运行速度。它通过考虑 JavaVM 运行时优化来生成准确的结果，动态调整它运行的平台，并使用完善的良好基准测试技术。稳定性基准评估了几个标准线性代数运算的准确性、灵敏度和处理上溢/下溢条件的能力。

# ios - MDM:iOS mdm 命令发送格式

> ID：10184504
> 
> 赞同：6
> 
> 时间：2012-04-17T03:04:18.167
> 
> 标签：ios, command, mdm

我处于 MDM Server 实施的初始阶段，我知道当 MDM Server 想要向 iOS 设备发送 MDM 命令时，服务器会发送推送通知，然后设备会回复服务器，格式为

放置：/服务器

```
<plist version="1.0">
    <dict>
    <key>Status</key> 
       <string>Idle</string> 
       <key>UDID</key> 
       <string> [ redacted ] </string>
   </dict> 
</plist> 
```

然后，MDM 服务器会响应已为设备排队的任何命令，但我不清楚这一行。

我想知道设备中是否没有这样的 iOS 代理应用程序，那么服务器必须以哪种格式将命令发送到 iOS 设备。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T03:32:33.837

对于 iOS MDM，不需要 iOS 第三方代理应用程序，因为 MDM 代理实现是内置于 iOS 平台的。

如果 MDM Server 想向 iOS 设备发送一些命令，它可以使用 MDM 推送通知，在 iOS 设备收到推送通知后，设备联系服务器，然后将排队的命令提供给客户端。

服务器链接已在注册时安装在 iOS 设备中的 MDM 配置文件中提供。对于 MDM 服务器和 iOS 设备之间的通信使用 plist（xml 格式），您记录 MDM 服务器和 iOS 设备之间的通信日志，您可以看到实时的 MDM plist，或者您可以在 MDM 协议参考文档中查看示例 plist 和另见[MDM_Protocol](https://media.blackhat.com/bh-us-11/Schuetz/BH_US_11_Schuetz_InsideAppleMDM_WP.pdf) pdf。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T16:56:36.600

该协议在以下文档中进行了说明，[http://adcdownload.apple.com//Documents/mobile_device_management_protocol/mobiledevicemanagement_121211.pdf](http://adcdownload.apple.com//Documents/mobile_device_management_protocol/mobiledevicemanagement_121211.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:39:15.350

这个问题的答案由 Apple 提供的 MDM 协议参考提供。它是一个 XML plist。

# android - 适用于 Android 的 Facebook SDK 示例

> ID：10184505
> 
> 赞同：0
> 
> 时间：2012-04-17T03:04:20.050
> 
> 标签：android, eclipse, facebook

今天，我下载了Android的Facebook SDK并导入到eclipse中。当我尝试 FB Sample 应用程序时，它提示错误：

项目“FB 示例应用”缺少必需的 Java 项目：“Facebook SDK for Android - 5fec77c”

我不知道修复它。谁能帮我？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T04:52:05.667

您也可以导入库项目`Facebook SDK`并将其标记为`library`通过转到导入项目的属性。

然后转到您的示例项目并转到属性并添加该库项目。

另请查看此**[问题](https://stackoverflow.com/questions/573581/specifying-android-project-dependencies-in-eclipse)** “有关更多详细信息，您可以搜索“Android 如何将项目添加为库项目”，您会发现许多分步博客/教程”

# php - 将两个数组组合成第三个数组

> ID：10184508
> 
> 赞同：2
> 
> 时间：2012-04-17T03:04:38.217
> 
> 标签：php

我有两个数组

```
$arr1 = array(
    'setting_one' => 'abc',
    'setting_two' => 'def',
    'setting_three' => 'test'
);

$arr2 = array(
    'setting_two' => 'user defined'
);

$arr3= array(); 
```

我想`$array3`看起来像

```
array(
    'setting_one' => 'abc';
    'setting_two' => 'user defined',
    'setting_three' => 'test'
); 
```

如何将两个数组合并为第三个数组？举一个现实世界的例子，前两个数组是设置数组，第一个数组是全局数组，而第二个数组是用户定义的设置。第三个数组是两个数组的组合，而第二个数组值优于全局设置数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T03:05:50.443

```
$arr3 = array_merge($arr1, $arr2); 
```

这会将 arr2 合并到 arr1 中（这意味着任何冲突都可以通过使用 arr2 中的值来解决）。

请注意，这不是递归的，并且不会以您可能期望的方式合并子数组。

[http://php.net/array_merge](http://php.net/array_merge)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T03:06:54.760

```
$arr3 = array_merge($arr1, $arr2); 
```

array_merge() 为您从第二个数组覆盖。

# android - 如何为我的应用程序导入 ZXing 库以编码 QR 码（虽然我的手机预装了 ZXing 扫描仪应用程序）

> ID：10184511
> 
> 赞同：1
> 
> 时间：2012-04-17T03:05:10.097
> 
> 标签：android, qr-code, zxing, barcode-scanner

我正在尝试做一个应用程序来为我扫描的多个条形码的信息创建一个最终的二维码。我想知道您如何将 ZXing 库导入到您的代码中？假设用户已经在他们的手机中安装了 ZXing 扫描仪，我是否可以只连接应用程序以生成条形码而不导入所有库，因为它会使我的应用程序变得沉重？

对于从 ZXing 导入 Qrencoder.java，我需要哪些必要的代码部分？或者甚至有可能吗？

我在两个月前发现了这个：[http](http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/) ://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/ 我已经尝试安装那个 apache 但对我来说这是一个非常痛苦的过程。那么有没有其他的方法呢？

问候

西特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T03:55:17.547

是的，只需使用意图。除了此处的集成代码之外，您不需要任何代码：[http](http://code.google.com/p/zxing/wiki/ScanningViaIntent) ://code.google.com/p/zxing/wiki/ScanningViaIntent 同一类具有在屏幕上编码条形码的方法。

# javascript - Javascript/jQuery 似乎无法让 ClearInterval 工作

> ID：10184513
> 
> 赞同：0
> 
> 时间：2012-04-17T03:05:17.217
> 
> 标签：javascript, jquery, onload, clearinterval

我正在阅读一本 jQuery 书籍并尝试做一个示例。在示例中，屏幕上出现闪电，该部分工作正常。问题是，当您切换选项卡，然后切换回来时，闪电开始快速连续闪烁。该问题应该使用 window.onblur 和 window.onfocus 事件来解决，但它不起作用。谁能看到我做错了什么？

隐藏了三张不同id的闪电图片，三种不同的功能使每一张都闪烁。goLightning() 设置每个函数执行的时间间隔，stopLightning() 应该清除该时间间隔。这部分似乎不适用于我所知道的一切。这是代码：

```
$(document).ready(function(){
    goLightning();
    window.onblur = stopLightning;
    window.onfocus = goLightning;
    var int1; var int2; var int3;

    // this function sets the lightning interval
    function goLightning() {
        int1 = setInterval(function() { lightning_one(); },4000);
        int2 = setInterval(function() { lightning_two(); },5000);
        int3 = setInterval(function() { lightning_three(); },7000);
     }

     // this function clears the lightning when the window isn't focused
     function stopLightning() {
        window.clearInterval(int1);
        window.clearInterval(int2);
        window.clearInterval(int3);
    }

    // these three functions make the lightning flash and seem to be working fine
    function lightning_one() {
            $("#container #lightning1").fadeIn(250).fadeOut(250);
    }
    function lightning_two() {
        $("#container #lightning2").fadeIn(250).fadeOut(250);
    }
    function lightning_three() {
        $("#container #lightning3").fadeIn(250).fadeOut(250);
    }
}); 
```

我不知道为什么这不起作用。似乎 stopLightning() 没有清除间隔，或者 window.onblur 不起作用。无论如何，任何反馈都会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T03:07:07.640

在设置新间隔之前添加`stopLightning()`到 , 的开头。`goLightning()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T03:15:45.400

重新排列以下行：

```
goLightning();
window.onblur = stopLightning;
window.onfocus = goLightning;
var int1; var int2; var int3; 
```

改为：

```
var int1, int2, int3, w = window;
w.onblur = stopLightning;
w.onfocus = goLightning;
goLightning(); 
```

接下来，使用变量`w`而不是函数`window`中的变量，`stopLightning()`以确保您使用对正确窗口的引用。此外，正如@Kolink 所提到的，在函数`stopLightning()`的开头调用 to`goLightning()`以确保在焦点事件被多次触发的情况下不会运行多个实例。

**编辑**我在设置事件后将呼叫移至`goLightning()`- 未经测试，但我认为这样会更好？

# magento - 我可以以编程方式添加具有特定 ID 的产品吗？

> ID：10184522
> 
> 赞同：0
> 
> 时间：2012-04-17T03:07:06.957
> 
> 标签：magento

如何使用指定的 product_id/entity_id 添加新产品？

```
$newprod = new Mage_Catalog_Model_Product();
$newprod->setProductId( 100 ); // how do i make this work
$newprod->setSku(... ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:23:55.777

你可以尝试这样的事情：

```
$product = Mage::getModel('catalog/product')->load($desiredId);

if(!$product){ //这里也可能是 $product->getSku()
$product->set.......//在这里设置必填字段
$product->setEntityId($desiredId); //我们不会搞砸事情，因为具有所需 id et 的产品不存在
$产品->保存()
}

```

# java - Android：从 C++ Native Activity 调用 Java 类

> ID：10184527
> 
> 赞同：1
> 
> 时间：2012-04-17T03:08:08.737
> 
> 标签：java, c, android-ndk, native-activity

Java代码：

```
 package local.ttt;

    import android.graphics.Bitmap;
    import android.graphics.Canvas;
    import android.graphics.Color;
    import android.graphics.Paint;
    import android.graphics.Typeface;

    public class Text2Bitmap {
        static Bitmap getBitmap(String text,int fontsize) {
            Paint paint=new Paint();
            paint.setStyle(Paint.Style.FILL);
            paint.setColor(Color.WHITE);
            paint.setTextSize(fontsize);
            paint.setAntiAlias(true);
            paint.setTypeface(Typeface.DEFAULT);

            int outwidth=(int)Math.round(paint.measureText(text));
            Bitmap bitmap=Bitmap.createBitmap(outwidth,fontsize,Bitmap.Config.ALPHA_8);

            Canvas canvas=new Canvas(bitmap);
            canvas.drawText(text,0,fontsize-1,paint);

            return bitmap;
        }
    } 
```

C源：

```
 ...
            MY_ASSERT(vm_cached!=NULL);
            JNIEnv* env;
            jint res=vm_cached->AttachCurrentThread(&env,NULL);
            MY_ASSERT(res==0);
            jclass activityClass=env->FindClass("android/app/NativeActivity");
            MY_ASSERT(activityClass!=NULL);
            jmethodID getClassLoader=env->GetMethodID(activityClass,"getClassLoader","()Ljava/lang/ClassLoader;");
            MY_ASSERT(getClassLoader!=NULL);
            MY_ASSERT(nativeActivityObjHnd!=NULL);
            jobject cls=env->CallObjectMethod(nativeActivityObjHnd,getClassLoader);
            jclass classLoader=env->FindClass("java/lang/ClassLoader");
            MY_ASSERT(classLoader!=NULL);
            jmethodID findClass=env->GetMethodID(classLoader,"loadClass","(Ljava/lang/String;)Ljava/lang/Class;");
            MY_ASSERT(findClass!=NULL);
            jstring strClassName=env->NewStringUTF("Llocal/ttt/Text2Bitmap;");
            jclass text2bitmapClass=(jclass)env->CallObjectMethod(cls,findClass,strClassName); //fails here
            MY_ASSERT(text2bitmapClass!=NULL);
            res=vm_cached->DetachCurrentThread();
            MY_ASSERT(res==0);
            ... 
```

它失败了：

```
W/dalvikvm(5614): dvmFindClassByName 拒绝 'Llocal/ttt/Text2Bitmap;'
W/dalvikvm(5614): threadid=9: 线程以未捕获的异常退出 (group=0x4002d560)
E/AndroidRuntime(5614)：致命异常：线程 10
E/AndroidRuntime(5614): java.lang.ClassNotFoundException: Llocal/ttt/Text2Bitmap; 在加载器 dalvik.system.PathClassLoader[.]
E/AndroidRuntime(5614)：在 dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
E/AndroidRuntime(5614): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:551)
E/AndroidRuntime(5614)：在 java.lang.ClassLoader.loadClass(ClassLoader.java:511)
E/AndroidRuntime(5614): 在 dalvik.system.NativeStart.run(Native Method)

```

请问有什么提示我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:15:19.920

不确定是什么导致了您的错误（您没有指出行在哪里，或者您在调试时遇到困难的特定行），但我会继续指出我看到的一些快速错误。

第一个错误是您需要使用`CallStaticObjectMethod`，因为您正在调用静态方法。你`jmethodid findClass`有一个methodID，而不是一个类，这是误导和错误的。您也有两个参数，但您似乎只传递了一个参数。

基本上，您需要：

`(env)->GetStaticMethodID(jclass,"method name", "Parameter list")`

--jclass 是类引用 --"method name" 是方法名 IN 引号 --"Parameter list" 是参数列表，需要查找语法。

跳过一些东西......调用你需要的东西：

`(env)->CallStaticObjectMethod(jclass,jmid,parameter1,parameter2)`

--jclass 再次是具有静态方法的类。--jmid 是您从上面的函数中获得的 java 方法 ID。--parameter1和parameter2是java方法需要的参数。

最后，我认为这可能只是一种偏好，但我不会将线程附加到 JVM，直到您获得所有必要的信息来跳转到 JVM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T04:02:03.427

不要乱用 java 类加载器。使用此代码：

```
MY_ASSERT(vm_cached!=NULL);

JNIEnv* env;
jint res = vm_cached->AttachCurrentThread(&env,NULL);
MY_ASSERT(res==0);

jclass t2bClass = env->FindClass("local/ttt/Text2Bitmap");
MY_ASSERT(t2bClass!=NULL);

jmethodID getBitmap = env->GetStaticMethodID(t2bClass, "getBitmap","(Ljava/lang/String;I)Landroid/graphics/Bitmap;");
MY_ASSERT(getBitmap!=NULL);

jstring text = ...;
int fontsize = ...;
jobject bitmap = env->CallStaticObjectMethod(t2bClass, getBitmap, text, fontsize);
MY_ASSERT(bitmap!=NULL);

// process bitmap here
// ...

res=vm_cached->DetachCurrentThread();
MY_ASSERT(res==0); 
```

# spine.js - 如何在spine.js中使用没有哈希符号的常规网址？

> ID：10184529
> 
> 赞同：0
> 
> 时间：2012-04-17T03:08:52.047
> 
> 标签：spine.js

我正在尝试以[http://localhost:9294/users](http://localhost:9294/users)而不是[http://localhost:9294/#/users的形式实现 url](http://localhost:9294/#/users)

根据文档，这似乎是可能的，但我无法让它适用于“书签”网址。

澄清一下，直接浏览到[http://localhost:9294/users](http://localhost:9294/users)会给出 404 “未找到：/users”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:26:35.900

您可以像这样在 Spine 中打开 HTML5 历史记录支持：

`Spine.Route.setup(history: true)`

通过将`history: true`参数传递给`Spine.Route.setup()`它将启用没有哈希的精美 URL。

这方面的文档实际上被隐藏了一点，但它在这里（倒数第二部分）：[http ://spinejs.com/docs/routing](http://spinejs.com/docs/routing)

**编辑：**

为了获得可以直接导航到的 url，您必须在“服务器”端进行操作。例如，使用 Rails，您必须构建一种方法来获取 url 的参数（在本例中为“/users”），并相应地将其传递给 Spine。以下是 Spine 文档的摘录：

> 但是，使用 History API 时需要注意一些事项。首先，您发送到 navigate() 的每个 URL 都需要有一个真实的 HTML 表示。尽管此时浏览器不会请求新的 URL，但如果页面随后重新加载，它将被请求。换句话说，你不能像散列片段那样组成任意 URL；传递给 API 的每个 URL 都需要存在。实现这一点的一种方法是使用服务器端支持。
> 
> 当浏览器请求一个 URL（期望一个 HTML 响应）时，您首先要确保在服务器端端点存在并且是有效的。然后你可以只提供主应用程序，它将读取 URL，调用适当的路由。例如，假设您的用户导航到[http://example.com/users/1](http://example.com/users/1)。在服务器端，您检查 URL /users/1 是否有效，以及 ID 为 1 的用户记录是否存在。然后，您可以继续提供 JavaScript 应用程序。
> 
> 这种方法的警告是它不会给搜索引擎爬虫任何真实的内容。如果您希望您的应用程序可抓取，则必须检测爬虫机器人请求，并为它们提供“平行的内容世界”。不过，这超出了本文档的范围。

让它正常工作绝对是一个很好的努力，但它可以完成。在不知道您正在使用的堆栈的情况下，不可能给您一个具体的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:04:55.040

如本文所述，我使用了以下重写。

[http://www.josscrowcroft.com/2012/code/htaccess-for-html5-history-pushstate-url-routing/](http://www.josscrowcroft.com/2012/code/htaccess-for-html5-history-pushstate-url-routing/)

# android - 从assets xml文件中获取drawable

> ID：10184530
> 
> 赞同：0
> 
> 时间：2012-04-17T03:08:56.427
> 
> 标签：android

我在**资产文件夹中有一个背景****xml** desc 文件，我怎样才能获得**可绘制**的obj？xml文件如下：

 ****```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<item android:state_focused="false">
    <shape>
        <gradient android:startColor="#2b2c2d" android:endColor="#404142" android:angle="270" />
    </shape>
</item>
<item android:state_focused="true">
    <shape>
        <gradient android:startColor="#2b2c2d" android:endColor="#404142" android:angle="270" />
    </shape>
</item> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:10:33.140

只需将文件放在可绘制文件夹中，您就可以从那里以 R.drawwable.filename（通过代码）和 @drawable/yourfilename（通过 XML）的形式获取它。

通常，您不应将 shape.xml 文件放在 assets 文件夹中。在 assets 文件夹中，我们通常放置自定义字体、音频文件、视频文件等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T03:14:24.040

在您的布局中，您可以将可绘制对象设置为背景，如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="@drawable/drawable_name_without_the_.xml"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/> 
```****

# ruby-on-rails - 在 Rails 中跟踪用户的点击和页面访问

> ID：10184531
> 
> 赞同：8
> 
> 时间：2012-04-17T03:09:13.680
> 
> 标签：ruby-on-rails, google-analytics, tracking

我想监控用户在我的 Rails 应用程序中的页面访问和点击以提出建议。我的问题是：

*   有这方面的 Rails gem，还是 Google Analytics 是标准？如果后者是真的，那么我应该如何将页面访问链接到特定的用户配置文件？
*   在 Rails 中，application.html.erb 中有一个部分是典型的，它为所有页面共享。如果我在 application.html.erb 中添加 Google Analytics 浏览量跟踪代码，它是否能够跟踪所有单个页面？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T03:12:22.950

还有其他方法，但绝大多数可能使用谷歌分析。存在几个可以帮助您与 GA 集成以获取数据的 gem。见这里： [https](https://www.ruby-toolbox.com/categories/Web_Analytics) ://www.ruby-toolbox.com/categories/Web_Analytics 。

根据您的第一个问题，您似乎需要比 GA 提供的更多洞察力。我以前使用过 ClickTale ( [http://www.clicktale.com](http://www.clicktale.com) ) 和 Woopra ( [http://www.woopra.com](http://www.woopra.com) )，效果很好。本文还列出了其他几个替代方案 - 请注意 Clicky 的高分：http: [//imimpact.com/web-stats-alternatives-to-google-analytics/](http://imimpact.com/web-stats-alternatives-to-google-analytics/)。

每当用户加载新页面时，Google Analytics（以及几乎所有这些其他问题）都会自动处理您的第二个问题，因为它是由 URL 键入的。这意味着，尽管您将 GA 脚本代码放在一个位置，但每个唯一页面都会单独跟踪。

如果您有 AJAX 请求更改该页面而不更改 URL，则需要深入研究 GA 脚本 API。本质上，每当您想要跟踪 AJAX 驱动的链接/按钮点击时，您都需要推送一个新的 url（可能带有 #）。见这里： [http ://davidwalsh.name/ajax-analytics](http://davidwalsh.name/ajax-analytics)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-17T05:00:41.407

我有偏见，但如果您需要将页面视图实时集成到应用程序中，我建议您查看[印象派。](https://github.com/charlotte-ruby/impressionist)使用分析，您总会有一些滞后时间，并且您还依赖于外部依赖项。如果您需要这种控制，Impressionist 是很好的选择，但如果您只是在寻找简单的指标并且不需要将它们拉入应用程序，那么分析可能是要走的路。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-09-16T13:51:32.823

[在https://github.com/ankane/ahoy](https://github.com/ankane/ahoy)查看 Ahoy 。只需在您的应用程序中添加几行代码，您就可以跟踪页面浏览量并将它们与用户帐户相关联。

您可以进一步自定义 Ahoy 以跟踪客户端（使用 JavaScript）和服务器的自定义事件。

Ahoy 不依赖任何第三方服务。

# c# - 使变量在 ASP.NET MVC 3 中普遍可访问？

> ID：10184535
> 
> 赞同：1
> 
> 时间：2012-04-17T03:10:28.370
> 
> 标签：c#, asp.net-mvc-3

因此，当您使用 Java 制作网站时，您有一个称为 Session 的东西，只要浏览器会话正在进行，您就可以在其中存储您想要的任何信息。

我对使用 ASP.NET MVC 3 还很陌生，并且能够在正确的时间传递正确的数据，这让我经常感到困惑。在大多数情况下，我理解将变量从视图传递到控制器并返回到其他视图。

但我想知道是否有一种方法可以让我们说，从任何视图中获取用户的地址？我知道它是`User.Identity.Name`内置的，这对于检查用户是否在他们自己的页面上等非常方便。但是有没有办法让用户对象具有可在任何地方访问的自定义信息？

我目前正在我的网站上建立一个声誉系统（很像这个网站），不同的声誉可以让你做不同的事情。所以在很多视图中我需要说“嘿，如果用户有这个声誉，让他们看到这个功能。” 但是，如果我必须将用户传递到每个视图中，这将非常乏味。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:19:55.887

我认为您正在寻找[HttpContext.Session](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.session%28v=vs.100%29.aspx)。

如果您想了解有关会话和 ASP.NET MVC 的更多信息，请查看[本文](http://www.codethinked.com/aspnet-mvc-request-flow)以更好地了解在请求期间会话何时可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T03:27:27.587

你可以保持你的自定义类对象是 Session。会话将跨请求可用。

假设您有这样的课程

```
public class LoggedInUser
{
  public string DisplayName { set;get;}
  //Other relevant properties. relevant only not everything !
} 
```

你可以像这样将它存储在会话中

```
LoggedInUser objLoggedInUser=new LoggedInUser();
objLoggedInUser.DisplayName="Johnson";
Session["LoggedUser"]=objLoggedInUser; 
```

现在无论你想要什么，你都可以像这样从会话中读取它

```
LoggedInUser objLoggedInUser;
if(LoggedInUser objLoggedInUser=!=null)
{
  objLoggedInUser=(LoggedInUser)Session["LoggedUser"];
  // Now you can access objLoggedInUser.DisplayName
} 
```

我会将此功能包装到一个函数中并调用该函数以在任何我想要的地方获取数据。

# javascript - 如何防止在Javascript中双击选择文本

> ID：10184539
> 
> 赞同：8
> 
> 时间：2012-04-17T03:10:57.107
> 
> 标签：javascript, onclick, click, dom-events, textselection

假设我在页面中有一个`ul`( `li`) 列表：

```
<ul>
 <li>xxx<li>
 <li>xxx<li>
</ul> 
```

该元素`li`是可单击和可双击的，它们与这些事件相关联，而我`return false`在这两个事件中。

```
$('ul li').on('click',function(){
    //do what I want
    return false;
}).on('dblclick',function(){
    //do what I want
    return false;
}); 
```

但是当用户双击元素时，里面的文本`li`会被选中。如何防止这种情况？

> **更新：**

现在解决了，我将以下代码与**NiftyDude**的 css 选择器一起使用：

```
$('ul li').on('click',function(){
    //do what I want
    return false;
}).....on('dragstart',function(){return false;}).on('selectstart',function(){return false;}); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-17T03:13:33.993

您可以使用 css 禁用文本选择（请注意，这将有效地禁用所有选择方法，而不仅仅是双击）

```
ul li {
   -webkit-touch-callout: none;
   -webkit-user-select: none;
   -khtml-user-select: none;
   -moz-user-select: none;
   -ms-user-select: none;
   user-select: none;
} 
```

[http://jsfiddle.net/T3d7v/1/](http://jsfiddle.net/T3d7v/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T03:38:50.807

您无法阻止选择的发生，但您可以在选择完成后立即清除：

```
<script type="text/javascript">
document.ondblclick = function(evt) {
    if (window.getSelection)
        window.getSelection().removeAllRanges();
    else if (document.selection)
        document.selection.empty();
}
</script> 
```

为了防止通过“三次单击”选择整个段落，这里是所需的代码：

```
var _tripleClickTimer = 0;
document.ondblclick = function(evt) {
    ClearSelection();
    window.clearTimeout(_tripleClickTimer);

    //handle triple click selecting whole paragraph
    document.onclick = function() {
        ClearSelection();
    };

    _tripleClickTimer = window.setTimeout(function() {
           document.onclick = null; 
    }, 1000);
};

function ClearSelection() {
    if (window.getSelection)
        window.getSelection().removeAllRanges();
    else if (document.selection)
        document.selection.empty();
} 
```

[源/现场测试](http://jsfiddle.net/uQNBX/)。

这应该适用于任何浏览器，请报告任何不工作的浏览器。

# iphone - 少量不需要的数据进入 iCloud

> ID：10184543
> 
> 赞同：4
> 
> 时间：2012-04-17T03:11:57.817
> 
> 标签：iphone, icloud

我不希望将任何内容备份到 iCloud。但是，我的数据无法重新创建，因此我需要将其放在应用程序的文档目录中。对于每个文件，我都做了标准：

```
 - (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
{
    if (&NSURLIsExcludedFromBackupKey == nil) { // iOS <= 5.0.1
        const char* filePath = [[URL path] fileSystemRepresentation];

        const char* attrName = "com.apple.MobileBackup";
        u_int8_t attrValue = 1;

        int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
        return result == 0;
    } else { // iOS >= 5.1
        return [URL setResourceValue:[NSNumber numberWithBool:YES] forKey:NSURLIsExcludedFromBackupKey error:nil];
    }
} 
```

我那里有 5mB 的数据。但我的应用仍在 iCloud 中注册 0.2kB（通过设置->iCLoud->管理存储）。所以，为了确定，我这样做了：

```
-(void)resetBackupAttributes {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSArray *fileListAct = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:documentsDirectory error:nil];
    for (NSString *path in fileListAct) {
        [self addSkipBackupAttributeToItemAtURL:[NSURL fileURLWithPath:path]];
    }

    NSArray *paths2 = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *cacheDirectory = [paths2 objectAtIndex:0];
    NSArray *fileListCache = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:cacheDirectory error:nil];
    for (NSString *path in fileListCache) {
        [self addSkipBackupAttributeToItemAtURL:[NSURL fileURLWithPath:path]];
    }
    NSArray *paths3 = NSSearchPathForDirectoriesInDomains(NSPreferencePanesDirectory, NSUserDomainMask, YES);
    NSString *preferencesDirectory = [paths3 objectAtIndex:0];
    NSArray *fileListPref = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:preferencesDirectory error:nil];
    for (NSString *path in fileListPref) {
        [self addSkipBackupAttributeToItemAtURL:[NSURL fileURLWithPath:path]];
    }
} 
```

它仍然有 0.2kB！有什么我想念的吗？是否会备份少量数据，无论...像目录树还是其他东西？我真正想知道的是，这 0.2kB 是否会因为我不遵守数据存储指南而被拒绝？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T16:21:40.150

好的，所以我会将我的评论放入答案中：

> 您的应用程序默认 plist 是否有可能在云中备份？- 但是你可以在你的 iOS（模拟器）和互联网之间连接一个代理。只需捕获所有传出数据并查看实际传输的内容;)。例如鱿鱼人

[这是SquidMan](http://squidman.net/squidman/index.html)的链接，以防万一……<br> 正如您所说，您也认为它是 plist。您可以通过设置带有一些垃圾数据的密钥来验证这一点，并查看总量是否增加。;)

# c# - 将值从局部视图提交到父视图模型

> ID：10184545
> 
> 赞同：0
> 
> 时间：2012-04-17T03:12:24.303
> 
> 标签：c#, asp.net-mvc-3, partial-views

假设我有一个包含复选框和数值的局部视图。我有一个 ViewModel，它包含一个实现局部视图的模型——术语。当我提交它时，在条款部分视图中所做的修改不会反映到 ViewModel 的条款属性中。我可能误解了一个或另一个关于它是如何工作的概念，有人愿意指出吗？

**看法**

```
@model ViewModel
@using (Html.BeginForm("ViewAction", "ViewController", FormMethod.Post))
{
 // Other ViewModel Property Editors

 @Html.Partial("Terms", Model.Terms)
 <input type="submit" value="Submit" />
} 
```

**局部视图**

```
@model Terms

@Html.CheckBoxFor(m => m.IsAccepted)
@Html.EditorFor(m => m.NumericalValue) 
```

**控制器**

```
[AcceptVerbs(HttpVerbs.Get)]
public ActionResult ViewAction(int id)
{
 ViewModel vm = GetVmValues();
 return View(vm);
}

[AcceptVerbs(HttpVerbs.Post)]
public ActionResult ViewAction(ViewModel vm)
{
 // Access ViewModel properties
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:25:18.187

默认模型绑定器希望您的条款模型的控件 ID 被命名为`Terms.IsAccepted`和`Terms.NumericalValue`. 您需要为您的`Terms`模型创建一个编辑器模板，然后调用`@Html.EditorFor(m=> m.Terms)`而不是使用部分。

[您可以在此处](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-4-custom-object-templates.html)阅读有关编辑器模板的更多信息。它来自 MVC 2，但仍然应该是相关的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T04:56:03.433

将 Partial View 的模型类型更改为“ViewModel”而不是“Terms”。这是更新的代码：

看法：

```
@model ViewModel
@using (Html.BeginForm("ViewAction", "ViewController", FormMethod.Post))
{
 // Other ViewModel Property Editors

 @Html.Partial("Terms", Model)  //Set parent 'ViewModel' as model of the partial view
 <input type="submit" value="Submit" />
} 
```

局部视图：

```
@model ViewModel

@Html.CheckBoxFor(m => m.Terms.IsAccepted)
@Html.EditorFor(m => m.Terms.NumericalValue) 
```

生成的 Html 将是：

```
<input id="Terms_IsAccepted" name="Terms.IsAccepted" type="checkbox" value="true"> 
```

虽然[DefaultModelBinder](http://msdn.microsoft.com/en-us/library/system.web.mvc.defaultmodelbinder.aspx)将值提供者（例如表单数据/路由数据/query-stirng/http 文件）映射到复杂对象，但它会搜索具有名称作为对象属性的值。在您的情况下，要构建“ViewModel”的“Terms”子对象，它将搜索名称为“Terms.IsAccepted”、“Terms.NumericalValue”等的值。Html 助手使用属性路径表达式生成html 元素的名称，这就是为什么您必须使用父 ViewModel 作为局部视图的模型的原因。

希望这可以帮助...

# asp.net - 现有 ASP.Net 网站的附属跟踪计划

> ID：10184546
> 
> 赞同：0
> 
> 时间：2012-04-17T03:12:32.933
> 
> 标签：asp.net, affiliate

我要求我们现有的 ASP.NET 网站具有某种附属跟踪服务。我正在寻找易于集成到 ASP.NET 的第三方附属跟踪工具。有什么建议么？开源附属工具也会很棒，但我怀疑是否有任何..提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T00:07:06.090

Nexus Web Development 为我们定制了一款，效果很好，我们可以根据需要增强它的功能。

# php - Jquery使用未知的POST变量通过远程验证

> ID：10184548
> 
> 赞同：0
> 
> 时间：2012-04-17T03:13:39.940
> 
> 标签：php, jquery, ajax, jquery-validate

所以我正在帮助某人解决另一个关于如何使用 jquery 的验证插件[验证文本区域的问题。](http://docs.jquery.com/Plugins/Validation/)我能想出的最佳解决方案是使用该[`remote`](http://docs.jquery.com/Plugins/Validation/Methods/remote)方法通过 ajax 传递字符串，并让服务器端脚本返回字数。

这工作正常，但我遇到了两个让我陷入困境的问题。一个问题，但有两个方面：

为了使元素被视为通过远程响应进行验证，返回的数据（以 json 或 xml 格式）必须基本上采用以下形式：

```
{"element-name" : true} 
```

例如，如果我想验证`answer1`表单中名为 的元素`id=test`，它可能如下所示：

```
$("#test").validate({
    rules: {
        answer1: {
            remote: {
                url: "check_wordcount.php",
                type: "post",
                data: {
                    wordcount: 5
                }
            }
        }
    }
} 
```

但是有可能不是想要字数，而是我想确认它没有使用亵渎，没有拼写错误，使用提示中随机给出的 3 个关键字等。也许有 4 个文本区域，每个区域都有他们自己的一组关键字，但本质上仍然需要相同的验证。为了`validate`将`remote`测试视为通过，响应数据必须包含（在上面的示例中）：

```
{"answer1" : true} 
```

换句话说，它不能只为进一步的浏览器端逻辑传回一些有用的数据，它必须特定于该元素，并且必须知道它需要满足哪些参数才能为真。

对于第二部分（并且仅在这种情况下），这并不算太糟糕，因为您可以将元素值以外的其他参数传递给服务器脚本（在这种情况下，最小字数）。

但这确实限制了服务器端脚本的可重用性。如果我有多个表单，或者甚至只有一个包含多个需要相同验证的文本区域的表单怎么办？我觉得选择要么是

一个。预先注册所有可能传入的潜在表单值，

湾。假设第一个值是元素名称/值对

C。或者，在传回之前疯狂地清理数组键，而不完全知道它是否甚至是元素名称。

我唯一的另一个想法是我可以传入另一个名为“元素名称”的参数，看看它是否在 POST 数组中。这仍然让我处于消毒的位置（这当然不是一件坏事，但我不确定多少是太多了）。

是否有更简单的方法来传递服务器端脚本盲信息并期望获得安全、一致的结果？

# c# - 鼠标悬停在后面的代码上时堆栈面板突出显示

> ID：10184551
> 
> 赞同：2
> 
> 时间：2012-04-17T03:14:09.157
> 
> 标签：c#, wpf, xaml, custom-controls, stackpanel

从后面的代码中，我可以为我的 groupbox 和 stackpanel 设置一些通用的东西，但是我找不到任何关于如何从后面的代码中突出显示堆栈面板的信息。

```
 GroupBox groupbox = new GroupBox(); 
        groupbox.Header = String.Format(node.Element("StudentID").Value); 
        groupbox.Width = 100; 
        groupbox.Height = 100; 
        groupbox.Margin = new Thickness(1); 

        TextBlock textBlock = new TextBlock(); 
        textBlock.Text = String.Format(node.Element("FirstName").Value + " " + (node.Element("LastName").Value)); 
        textBlock.TextAlignment = TextAlignment.Center; 

        TextBlock textBlock1 = new TextBlock(); 
        textBlock1.Text = (DateTime.Parse(node.Element("TimeAdded").Value)).ToString("d"); 
        String.Format("{0:d/M/yyyy}", DateTime.Parse(node.Element("TimeAdded").Value)); 
        textBlock1.TextAlignment = TextAlignment.Center; 
        textBlock1.VerticalAlignment = VerticalAlignment.Bottom; 

        StackPanel stackPanel = new StackPanel(); 
        stackPanel.Children.Add(groupbox); 

        stackPanel.Children.Add(textBlock); 
        stackPanel.Children.Add(textBlock1); 
        stackPanel.Margin = new Thickness(5); 
```

我希望在鼠标悬停时创建一个浅灰色的突出显示，此代码也属于自定义控件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T03:52:24.467

为 MouseEnter 和 MouseLeave 事件添加处理程序：

```
public MainWindow()
{
    InitializeComponent();

    StackPanel stackpanel = new StackPanel(); 
    stackpanel.MouseEnter += new MouseEventHandler(stackpanel_MouseEnter);
    stackpanel.MouseLeave += new MouseEventHandler(stackpanel_MouseLeave);
}

void stackpanel_MouseLeave(object sender, MouseEventArgs e)
{
    StackPanel stackpanel = (StackPanel)sender;
    stackpanel.Background = Brushes.Transparent;
}

void stackpanel_MouseEnter(object sender, MouseEventArgs e)
{
    StackPanel stackpanel = (StackPanel)sender;
    stackpanel.Background = Brushes.LightGray;
} 
```

# java - 作为初学者编写我自己的 Java Map 实现

> ID：10184554
> 
> 赞同：0
> 
> 时间：2012-04-17T03:14:28.330
> 
> 标签：java

我是 Java 集合的新手。我正在通过地图，所以请告诉我，就像java提供地图一样，我们也可以制作自己的地图吗？假设一个名为`MineMap`. 请告诉我如何实现这一目标。我在谷歌上搜索，我发现了这样的事情：

```
public interface MyMap
{
    public void put(Object key,Object value);
    public Object get(Object key);
    public int size();
    public Set keySet();
    public Set entrySet();
    public interface MyEntry
    {
        public Object getKey();
        public Object getValue();
    }
} 
```

及其实施：

```
class MySimpleMap implements MyMap
{
    private ArrayList keys;
    private ArrayList values;
    private int index;

    public MySimpleMap()
    {
        keys=new ArrayList();
        values=new ArrayList();
        index=0;
    }  

    public void put(Object key,Object value)
    {
        keys.add(key);
        values.add(value);
        index++;
    }

    public Object get(Object key)
    {
        int i=keys.indexOf(key);
        if (i>=0)
            return values.get(i);
        else
            return null;
    }

    public int size()
    { 
        return index;
    }

    public Set keySet()
    {
       HashSet set=new HashSet();
       set.addAll(keys);
       return set;
    }

    //Nested class starts...
    class MySimpleEntry implements MyMap.MyEntry
    {
       Object key;
       Object value;

       public MySimpleEntry(Object k,Object v)
       {
           key=k;
           value=v;
       }

      public Object getKey()
      {
          return key;
      }

      public Object getValue()
      {
          return value;
      }
 }// Nested class ends.

 public Set entrySet()
 {
     HashSet set=new HashSet();
     for (int i=0;i<index;i++)
     {
        Object k=keys.get(i);
        Object v=values.get(i);
        MySimpleEntry temp=new MySimpleEntry(k,v);
        set.add(temp);
     }
     return set;
 }
 } 
```

最后这是使用它的类：

```
class MyMapDemo
{
    public static void main(String arr[])
    {
        MySimpleMap map=new MySimpleMap();
        map.put("Amit","Java");
        map.put("Rahul",".Net");
        map.put("Nitin","SQT");
        map.put("Ajay","PHP");
        map.put("Raman","Java");
        System.out.println("There are "+map.size()+" elemenets in the map...");
        System.out.println("contents of Map...");
        Set s=map.entrySet();
        Iterator itr=s.iterator();
        while(itr.hasNext())
        {
            MyMap.MyEntry m=(MyMap.MyEntry) itr.next();
            System.out.println(m.getKey()+"\t"+m.getValue());
        }
        Scanner in=new Scanner(System.in);
        System.out.println("Enter Name to find out course, ctrl+c to terminate...");
        while(true)
        {
            System.out.println("Name:");
            String n=in.nextLine();
            System.out.println("Course is:"+map.get(n));
        }
 }
} 
```

但我需要一些更简单的实现。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T03:37:17.920

您提到您是初学者并想实现自己的地图。在初学者级别，编写地图还为时过早。集合框架已经对几种数据类型进行了优化和验证。理解这些而不是重新发明轮子很重要。

*   您可以轻松获取 java 库源并尝试查看它们是如何实现集合类的。它是最先进的开发，涵盖了许多微小的细节。

*   关于实施。

但是，您发现的任何东西都不能直接归类为地图。毫无疑问会做类似的事情。

*   不是通用实现。
*   不实现 Map 因此可以将 impl 与现有的 Map 类型变量一起使用，反之亦然。
*   不能使用**Collections.class**中的算法。

您可能想要编写实现，例如包含上述功能。

```
// Hash map java library defined as follows.
public class HashMap<K,V>
    extends AbstractMap<K,V>
    implements Map<K,V>, Cloneable, Serializable

// Hence, you may want to write this.
public class MyMap<K,V>
    extends AbstractMap<K, V> // May skip this
    implements Map<K,V>, Cloneable, Serializable // important
{
   //Now it will ask to write all the methods which are defined in Map interface.
   //These are minimum methods required for Map operations.
} 
```

# c++ - iPhone C++/Objective-C 异常

> ID：10184556
> 
> 赞同：3
> 
> 时间：2012-04-17T03:14:41.713
> 
> 标签：c++, objective-c, exception-handling

有人知道在 XCode for iPhone 应用程序中启用 C++ 异常处理的后果吗？默认情况下它似乎被禁用。

C++ 和 Objective C 异常是否相同，或者 C++ 异常只能被 C++ 代码捕获，反之亦然？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T05:24:47.413

> 有人知道在 XCode for iPhone 应用程序中启用 C++ 异常处理的后果吗？

这是 C++ 异常处理的正常选择。如果您正在使用 C++ 库，则可能*需要*启用此功能。

您不能假设异常会干净地跨越图像边界传播。也就是说，您不能假设它被定义为*穿过*Foundation 框架并在另一侧捕获。IOW，*在 MyApp 中抛出 MyLib->through Foundation->catch*会导致未定义的行为。因此，您必须假设您需要在 MyLib 中捕获这些内容。

与 OS X 不同，iPhone 的 C++ 和 ObjC 异常*不是*使用“零成本异常”实现的。由于展开表的大小和编译器支持，没有使用零成本异常，它有利于执行速度而不是大小。

启用例外需要一定的速度和一定的大小——我预计对于 iOS 上的大多数程序来说，这不到 10%。

最终，*需要*确定是否应该启用异常，它们会引入*一些*执行和大小开销。除非您正在使用非常专业的 C++ 库，否则您应该假设您需要启用它们。但是，支持该功能。

> C++ 和 Objective C 异常是否相同，或者 C++ 异常只能被 C++ 代码捕获，反之亦然？

在 64 位 OS X 和 iOS 环境中，可以使用任一处理程序捕获 C++ 和 ObjC 异常。在 32 位 OS X 中，它们使用不同的异常模型。因此，'catch all' 表达式（用任一语言编写）可以在 iOS 和 64 位 OS X 中捕获*C* ++ 和 ObjC 异常，但在 32 位 OS X 中不能。

# android - SDK - R18 仍然有一些错误

> ID：10184567
> 
> 赞同：0
> 
> 时间：2012-04-17T03:16:02.363
> 
> 标签：android, arcgis

libs/ 文件夹中的一些 jar 库在某些情况下不会被拾取。
就像安卓示例工程“HelloWord”的arcgis一样，编译没有问题，但不能正常运行。

```
04-16 14:56:33.104: D/dalvikvm(9369): Late-enabling CheckJNI
04-16 14:56:33.134: I/dalvikvm(9369): Turning on JNI app bug workarounds for target SDK version 7...
04-16 14:56:33.234: D/ArcGIS.LifeCycle(9369): map.onChildViewAdded
04-16 14:56:33.244: D/ArcGIS.LifeCycle(9369): map.initLayer
04-16 14:56:33.244: D/ArcGIS.LifeCycle(9369): >>>layer init startcom.esri.android.map.ags.ArcGISTiledMapServiceLayer
04-16 14:56:33.244: D/ArcGIS.LifeCycle(9369): layer init...
04-16 14:56:33.244: W/dalvikvm(9369): VFY: unable to find class referenced in signature (Lorg/codehaus/jackson/JsonNode;)
04-16 14:56:33.244: I/dalvikvm(9369): Could not find method org.codehaus.jackson.JsonNode.get, referenced from method com.esri.android.a.e.a
04-16 14:56:33.244: W/dalvikvm(9369): VFY: unable to resolve virtual method 4781: Lorg/codehaus/jackson/JsonNode;.get (Ljava/lang/String;)Lorg/codehaus/jackson/JsonNode;
04-16 14:56:33.244: D/dalvikvm(9369): VFY: replacing opcode 0x6e at 0x0005
04-16 14:56:33.244: I/dalvikvm(9369): Could not find method 
org.codehaus.jackson.JsonNode.getTextValue, referenced from method com.esri.android.a.e.a
04-16 14:56:33.244: W/dalvikvm(9369): VFY: unable to resolve virtual method 4784:  Lorg/codehaus/jackson/JsonNode;.getTextValue ()Ljava/lang/String;
04-16 14:56:33.244: D/dalvikvm(9369): VFY: replacing opcode 0x6e at 0x000b
04-16 14:56:33.244: E/HtcAppUsageStatsListener(9369): afterPerformResume
04-16 14:56:33.244: E/HtcAppUsageStatsListener(9369): java.lang.NullPointerException
04-16 14:56:33.244: E/HtcAppUsageStatsListener(9369):   at android.app.HtcAppUsageStatsListener.afterPerformResume(HtcAppUsageStatsListener.java:77)
04-16 14:56:33.244: D/ArcGIS.TileCache(9369): max number of cached tiles:1000
04-16 14:56:33.244: D/ArcGIS.LifeCycle(9369): sdcache inited.
04-16 14:56:33.244: D/ArcGIS.TileCache(9369): SDCardCache
04-16 14:56:33.244: E/dalvikvm(9369): Could not find class 
'org.codehaus.jackson.JsonFactory', referenced from method com.esri.core.internal.b.a.e.<clinit>
04-16 14:56:33.244: W/dalvikvm(9369): VFY: unable to resolve new-instance 717 
(Lorg/codehaus/jackson/JsonFactory;) in Lcom/esri/core/internal/b/a/e;
04-16 14:56:33.244: D/dalvikvm(9369): VFY: replacing opcode 0x22 at 0x0000
04-16 14:56:33.244: W/dalvikvm(9369): VFY: unable to find class referenced in signature (Lorg/codehaus/jackson/JsonFactory;)
04-16 14:56:33.254: I/dalvikvm(9369): Could not find method org.codehaus.jackson.JsonFactory.createJsonParser, referenced from method com.esri.core.internal.b.a.e.a
04-16 14:56:33.254: W/dalvikvm(9369): VFY: unable to resolve virtual method 4760:   Lorg/codehaus/jackson/JsonFactory;.createJsonParser 
(Ljava/io/InputStream;)Lorg/codehaus/jackson/JsonParser;
04-16 14:56:33.254: D/dalvikvm(9369): VFY: replacing opcode 0x6e at 0x016c
04-16 14:56:33.254: I/dalvikvm(9369): Could not find method org.codehaus.jackson.JsonFactory.createJsonParser, referenced from method com.esri.core.internal.b.a.e.a
04-16 14:56:33.254: W/dalvikvm(9369): VFY: unable to resolve virtual method 4761: Lorg/codehaus/jackson/JsonFactory;.createJsonParser (Ljava/lang/String;)Lorg/codehaus/jackson/JsonParser;
04-16 14:56:33.254: D/dalvikvm(9369): VFY: replacing opcode 0x6e at 0x0022
04-16 14:56:33.254: I/dalvikvm(9369): Could not find method org.codehaus.jackson.JsonFactory.createJsonParser, referenced from method com.esri.core.internal.b.a.e.a
04-16 14:56:33.254: W/dalvikvm(9369): VFY: unable to resolve virtual method 4761:     
Lorg/codehaus/jackson/JsonFactory;.createJsonParser (Ljava/lang/String;)Lorg/codehaus/jackson/JsonParser;
04-16 14:56:33.254: D/dalvikvm(9369): VFY: replacing opcode 0x6e at 0x001f
04-16 14:56:33.254: D/dalvikvm(9369): DexOpt: unable to opt direct call 0x1296 at 0x02 in Lcom/esri/core/internal/b/a/e;.<clinit>
04-16 14:56:33.264: W/dalvikvm(9369): Exception Ljava/lang/NoClassDefFoundError; thrown while initializing Lcom/esri/core/internal/b/a/e;
04-16 14:56:33.274: D/ArcGIS(9369): Failed to initialize the MapView.
04-16 14:56:33.274: D/ArcGIS(9369): java.lang.ExceptionInInitializerError
04-16 14:56:33.274: D/ArcGIS(9369):     at com.esri.core.internal.a.a.k.a(Unknown Source)
04-16 14:56:33.274: D/ArcGIS(9369):     at com.esri.android.map.ags.ArcGISTiledMapServiceLayer.initModel(Unknown Source)
04-16 14:56:33.274: D/ArcGIS(9369):     at com.esri.android.map.ags.ArcGISTiledMapServiceLayer.initModel(Unknown Source)
04-16 14:56:33.274: D/ArcGIS(9369):     at com.esri.android.map.LayerView.initLayer(Unknown Source)
04-16 14:56:33.274: D/ArcGIS(9369):     at com.esri.android.map.MapView$1.a(Unknown Source)
04-16 14:56:33.274: D/ArcGIS(9369):     at com.esri.android.map.MapView$1.call(Unknown Source)
04-16 14:56:33.274: D/ArcGIS(9369):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-16 14:56:33.274: D/ArcGIS(9369):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-16 14:56:33.274: D/ArcGIS(9369):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
04-16 14:56:33.274: D/ArcGIS(9369):     at         java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
04-16 14:56:33.274: D/ArcGIS(9369):     at java.lang.Thread.run(Thread.java:864)
04-16 14:56:33.274: D/ArcGIS(9369): Caused by: java.lang.NoClassDefFoundError:         org.codehaus.jackson.JsonFactory
04-16 14:56:33.274: D/ArcGIS(9369):     at com.esri.core.internal.b.a.e.<clinit>(Unknown Source)
04-16 14:56:33.274: D/ArcGIS(9369):     ... 11 more
04-16 14:56:33.274: D/ArcGIS.LifeCycle(9369): sdcard inited.
04-16 14:56:33.294: D/ArcGIS.LifeCycle(9369): map.onSizechanged
04-16 14:56:33.294: D/ArcGIS.LifeCycle(9369): !!! onSizeChangedSignal
04-16 14:56:33.294: D/ArcGIS.LifeCycle(9369): map.onLayout
04-16 14:56:33.304: D/ArcGIS.LifeCycle(9369): map.onLayout
04-16 14:56:33.314: D/memalloc(9369): /dev/pmem: Mapped buffer base:0x51fbc000 size:27017216 offset:24928256 fd:56 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:03:04.910

我们可能遇到了同样的[错误](https://stackoverflow.com/questions/10340604/is-ant-1-8-used-with-androids-sdk-buildafter-tools-revision-17-buged)——在我的情况下，解决方案是将 Ant 目标分成两个调用（即“ant myParameters myTarget1 myTarget2”和“ant myParameters debug delivery”）。无论如何，希望这对您有用 - Google 需要为其未记录/错误的更改添加更好的支持（并且 stackoverflow 不是解决并非源于愚蠢的问题的最佳场所，因为复杂问题的生命周期不会太长这里）。

如果这对您不起作用，请详细说明您的问题。

# android - 通过上下文菜单将文本从edittext复制到剪贴板时出现异常？

> ID：10184569
> 
> 赞同：0
> 
> 时间：2012-04-17T03:16:44.600
> 
> 标签：android, copy, textview, contextmenu, clipboard

**尝试将 TextView 文本复制到剪贴板时，我做错了吗？**

我的活动课程中的代码：

```
@Override
public boolean onContextItemSelected(MenuItem item) {
    String selectedItem = item.getTitle().toString().trim();
    try {
    ClipboardManager clipboard = (ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);
    ClipData clip;
    if (selectedItem.equals("Copy Query")) {
        clip = ClipData.newPlainText("Query",tv1.getText());
    clipboard.setPrimaryClip(clip);
    }           
    return true;
} 
```

错误：

```
04-17 03:10:54.056: E/AndroidRuntime(503): FATAL EXCEPTION: main
04-17 03:10:54.056: E/AndroidRuntime(503): java.lang.NoClassDefFoundError: android.content.ClipboardManager
04-17 03:10:54.056: E/AndroidRuntime(503):  at com.ewe.radixcalculator.CalculatorActivity.onContextItemSelected(CalculatorActivity.java:68)
04-17 03:10:54.056: E/AndroidRuntime(503):  at android.app.Activity.onMenuItemSelected(Activity.java:2199)
04-17 03:10:54.056: E/AndroidRuntime(503):  at com.android.internal.policy.impl.PhoneWindow$ContextMenuCallback.onMenuItemSelected(PhoneWindow.java:2744)
04-17 03:10:54.056: E/AndroidRuntime(503):  at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:143)
04-17 03:10:54.056: E/AndroidRuntime(503):  at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:855)
04-17 03:10:54.056: E/AndroidRuntime(503):  at com.android.internal.view.menu.MenuDialogHelper.onClick(MenuDialogHelper.java:137)
04-17 03:10:54.056: E/AndroidRuntime(503):  at com.android.internal.app.AlertController$AlertParams$3.onItemClick(AlertController.java:874)
04-17 03:10:54.056: E/AndroidRuntime(503):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
04-17 03:10:54.056: E/AndroidRuntime(503):  at android.widget.ListView.performItemClick(ListView.java:3382)
04-17 03:10:54.056: E/AndroidRuntime(503):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
04-17 03:10:54.056: E/AndroidRuntime(503):  at android.os.Handler.handleCallback(Handler.java:587)
04-17 03:10:54.056: E/AndroidRuntime(503):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-17 03:10:54.056: E/AndroidRuntime(503):  at android.os.Looper.loop(Looper.java:123)
04-17 03:10:54.056: E/AndroidRuntime(503):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-17 03:10:54.056: E/AndroidRuntime(503):  at java.lang.reflect.Method.invokeNative(Native Method)
04-17 03:10:54.056: E/AndroidRuntime(503):  at java.lang.reflect.Method.invoke(Method.java:521)
04-17 03:10:54.056: E/AndroidRuntime(503):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-17 03:10:54.056: E/AndroidRuntime(503):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-17 03:10:54.056: E/AndroidRuntime(503):  at dalvik.system.NativeStart.main(Native Method)
04-17 03:10:54.056: E/AndroidRuntime(503): Caused by: java.lang.ClassNotFoundException: android.content.ClipboardManager in loader dalvik.system.PathClassLoader[/data/app/com.ewe.radixcalculator-2.apk]
04-17 03:10:54.056: E/AndroidRuntime(503):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
04-17 03:10:54.056: E/AndroidRuntime(503):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
04-17 03:10:54.056: E/AndroidRuntime(503):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T04:16:14.783

从您的堆栈跟踪中，很明显`ClipboardManager`您正在使用未找到。快速查找显示`ClipboardManager`，Android 中有两个。

1.  [`ClipboardManager`](http://developer.android.com/reference/android/text/ClipboardManager.html)(android.text.ClipboardManager) 自 API 1
2.  [`ClipboardManager`](http://developer.android.com/reference/android/content/ClipboardManager.html)(android.content.ClipboardManager) 自 API 11

根据您的实现，我猜您打算使用仅包含在 API 11 中的后者。因此，您的代码会导致错误。

Eclipse 不会向您显示错误，因为您已`android.text.ClipboardManager`在导入部分中导入。

要解决此问题，请导入正确的包并指向相关的 API 版本。

如果您想`android.text.ClipboardManager`用于旧版本，我认为应该没问题。这是我将如何做到的。希望这可以帮助。

```
@Override
public boolean onContextItemSelected(MenuItem item) {
    String selectedItem = item.getTitle().toString().trim();
    try {
    ClipboardManager clipboard = new ClipboardManager();
    if (selectedItem.equals("Copy Query")) {
        clipboard.setText(tv1.getText().toString());
    }           
    return true;
} 
```

# php - 使用 Yii findAll 返回一个带有所有属性的模型

> ID：10184572
> 
> 赞同：0
> 
> 时间：2012-04-17T03:17:03.233
> 
> 标签：php, activerecord, yii

我还是 Yii 的新手，想知道如何从`$models = MyModel::model()->findAll();`.

比如说，以 ONE:MANY 的方式`MyModel`有一个关系。`MyChildModels`

直接来自 Yii 网站上的 Rest 示例，我有：

```
foreach ($models as $model) {
    $rows[] = $model->attributes;
}

$this->_sendResponse(200, CJSON::encode($rows), 'application/json'); 
```

我得到了模型的所有属性，但没有得到连接的关系属性。

同样，我可以将`$rows`行更改为：

```
$rows[] = $model->myChildModels; 
```

...我得到`myChildModels`每个模型的所有属性，但没有任何属性（如我所料）。

但我想要的是全套 -`Model`属性加上所有的`myChildModels`属性和它们的属性。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T03:32:14.023

我对 Yii 做同样的事情。这是我的做法。

```
$models = MyModel::model()->findAll();
    if ($models){
    echo CJSON::encode($models);
    } 
```

我通常不发送 JSON 标头，但如果您愿意，可以发送。

```
header('Content-type: application/json'); 
```

对于相关模型试试这个。

```
foreach ($models as $model) {
        $rows[] = $model->attributes;               
        $rows[] = $model->related->attributes;
    } 
```

# c++ - 广度优先搜索修剪和内存泄漏 C++

> ID：10184573
> 
> 赞同：1
> 
> 时间：2012-04-17T03:17:09.327
> 
> 标签：c++, memory-leaks, graph-theory, breadth-first-search

我正在做一个项目，需要我解决一个你不能左转的迷宫。该程序运行良好，除非输入非常大。

我的总体策略是在图中将迷宫中的每个点设置为 4 个节点，分别对应于 UP、DOWN、LEFT 和 RIGHT，其中每个节点都有一条直线和向右的边，其中直线的权重为 0，而右边的权重为 1 . 边在我的代码中表示为一个对象，并且有一个指向目标节点及其源节点的指针。

为了找到最佳路径（右转最少的路径），我使用了带有双端队列的广度优先搜索。我使用双端队列能够将权重 1 的节点推到后面，将权重 0 的节点推到前面。但是，我在搜索期间分配了少量内存并且没有在任何地方清理它，这可能导致我的程序无法通过非常大的迷宫输入。

这是代码（特别是检查 BFS 中节点的相邻边的 for 循环）：

```
 //t is a node object in the graph that has been popped out of the deque

    //loop that checks each adjacent node from t (adj is a vector of edges)
    for(unsigned int i = 0; i < t.adj.size(); i++)
    {
        if(!t.adj[i].used)
        {
            if(!t.adj[i].dest->visited)
            {
                //Memory leak location
                t.adj[i].dest->prev = new node(t);

                t.adj[i].used = true;

                //weight of an edge is 1 if it's a right turn, 0 otherwise
                if(t.adj[i].weight == 1) 
                {
                    //put the heavier nodes on the end of the queue
                    nodes.push_back(t.adj[i].dest);
                }
                //0-weight nodes on the top
                else nodes.push_front(t.adj[i].dest);                
            }

        } 
```

我一直在试图弄清楚如何更好地修剪搜索以及当我绝对不​​再需要这些节点时如何释放此分配。但是我需要一些指导来思考这个问题。让我知道是否需要额外的代码。

谢谢。

编辑：节点和边缘类（请原谅我无视标准类设计原则，只是快速将它们放在一起）：

```
class node
{
public:
    node();
    node(Direction d, int r, int c, NodeType t);
    ~node(); //empty definition
    node(const node* n);
    node(const node& n);
    node& operator=(const node& n);
    node& operator=(const node* n);

    void addAdj(node* a, int w);
    void printAdj() const;
    string direction() const;

    void print() const;
    bool operator<(const node& n) const;

    int distance; //from start
    bool visited;
    node* prev;
    vector<Edge> adj;
    Direction dir;
    int row, col;
    NodeType type;
};
///////////////////////
struct Edge
{

    Edge();
    Edge(node* o, node* d, int c);

    node* org;
    node* dest;
    int weight;
    bool used; 
```

};

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:23:00.553

如果`node`需要一个指向的指针`t`（因此您不需要`t`' 类型的完整定义（`node`？）对于`node::adj[]::dest::prev`' 的声明并按`node`值获取（而不是动态分配它）对于`t.adj[i].dest->prev`？

这将确保您不会泄漏内存，因为您没有动态分配任何东西。缺点是您需要确保没有对`t`via `dest::prev`once`t`的引用超出范围。

在这种情况下，您将更改行

```
t.adj[i].dest->prev = new node(t); 
```

至

```
t.adj[i].dest->prev = node(&t); 
```

您将需要一个特殊值来表示无效`prev`（之前是 NULL）。也许使用`node(NULL)`？

替代方案：使用共享指针（如果您不使用 C++11，BOOST 会提供一个选择）以确保在所有引用消失时自动解除分配。您必须确保不会永远保留循环引用，以防止释放“僵尸”节点（不会再次使用但无法释放的节点，因为仍然存在对它们的引用

# computer-science - “计算空间”一词的含义是什么？

> ID：10184574
> 
> 赞同：1
> 
> 时间：2012-04-17T03:17:26.690
> 
> 标签：computer-science

术语“计算空间”是什么意思？

我能够在维基百科中找到对“计算时间”一词的非常清楚的解释。即确定性图灵机 M 在输入 x 上所需的时间是机器在停止并输出答案（“是”或“否”）之前进行的状态转换或步骤的总数。但是我找不到“计算空间”的类似明确定义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T03:28:56.897

计算空间表示执行算法所需的内存量（用 表示，`n`输入的大小 - 就像计算时间一样）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T03:35:11.120

该定义在您引用的同一篇文章中给出，其中空间是存储位置的数量（或多少内存），因此使用您的措辞

> 确定性图灵机 M 在输入 x 上所需的空间是机器在停止并输出答案（“是”或“否”）之前所需的存储位置或内存的总数。

这就是为什么在维基百科文章中他们将其表述为（空间或时间）。

> 可以对空间要求做出类似的定义。尽管时间和空间是最著名的复杂性资源，但任何复杂性度量都可以视为计算资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T03:51:18.333

在网上找到了一些东西（请参阅详细信息）：- [http://www.mozart-oz.org/documentation/tutorial/node12.html](http://www.mozart-oz.org/documentation/tutorial/node12.html)

计算空间通常由计算存储和一组执行线程组成。到目前为止，我们看到的是一个单一的计算空间。在处理逻辑编程时，会出现一个更复杂的结构，其中包含多个嵌套的计算空间。计算空间结构的一般规则如下。

这意味着每个进程都加载到内存中，并且它们的边界非常明确。每次在内存中获取这样的进程空间和加载程序是困难的**，这是发明乳清线程的原因之一**。

每个线程都有一些公共处理空间，例如（堆栈）和公共区域（创建它们的进程空间），因此我们需要定义适当的线程通信。

# java - Java - 递归程序 - 将基数为 10 的数字转换为任何基数

> ID：10184577
> 
> 赞同：7
> 
> 时间：2012-04-17T03:18:01.410
> 
> 标签：java, recursion

我正在尝试使用转换将基数为 10 的数字转换为任何基数。现在这是我想出的代码。我有一种悲伤的感觉，这可能是完全错误的。下图是如何进行此过程的示例。

[http://i854.photobucket.com/albums/ab107/tonytauart/rrrr.png](http://i854.photobucket.com/albums/ab107/tonytauart/rrrr.png)

```
public static void main(String[] args) {

  int base;
  int number;

    Scanner console = new Scanner(System.in);

    System.out.println("Please enter the base");
        base = console.nextInt();
    System.out.println("Please enter the Number you would like to convert");
        number = console.nextInt();

        System.out.println(Converter(base, number));
}

public static int Converter(int Nbase, int Nnumber){

    int answer;
    int Rcontainer =0;
    int cnt = 0;
    int multiplier;
    int temp;
    double exp;

    if(Nnumber/Nbase == 0){
        cnt++;
        exp = Math.pow(10,cnt); 
        multiplier = (int)exp;
         answer = (Nnumber%Nbase)* multiplier + Rcontainer;

    }
    else
      {
       exp = Math.pow(10,cnt);
       multiplier = (int)exp;
       cnt++;
       temp = Rcontainer;
       Rcontainer = (Nnumber%Nbase)* multiplier + temp;   

       Nnumber = Nnumber/Nbase;
        answer = Converter(Nbase,Nnumber);
       }  
        return answer;
} 
```

}

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-29T06:50:02.080

我刚刚为一个comp sci类完成了这个问题。我不得不递归地解决这个问题：

```
public static String convert(int number, int base)
{
    int quotient = number / base;
    int remainder = number % base;

    if (quotient == 0) // base case
    {
        return Integer.toString(remainder);      
    }
    else
    {
        return convert(quotient, base) + Integer.toString(remainder);
    }            
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-17T06:02:10.940

```
public class Converter {

    private static char symbols[] = new char[] { '0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T' };

    public static void main ( String args[] )
    {
                 Converter converter = new Converter ();
        System.out.println( converter.convert ( 31, 16 ));
    }

    public String convert ( int number, int base )
    {
        return convert(number, base, 0, "" );
    }

    private String convert ( int number, int base, int position, String result )
    {
        if ( number < Math.pow(base, position + 1) )
        {
            return symbols[(number / (int)Math.pow(base, position))] + result;
        }
        else
        {
            int remainder = (number % (int)Math.pow(base, position + 1));
            return convert (  number - remainder, base, position + 1, symbols[remainder / (int)( Math.pow(base, position) )] + result );
        }
    }
} 
```

这将从 Base 2 转换为 Base 36，尽管您可以通过添加更多符号来扩展它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-16T23:32:53.900

在 Java 中实现它的一种快速方法是：

```
Integer.toString(int i,int radix); 
```

例如，

```
Integer.toString(255,2) 
```

将返回“11111111”。我不确定您是否只是在寻找快速解决方案，或者您是否真的想自己实现转换方法。这将是一个快速的解决方案。参考这篇文章：[API中的base之间转换的方法是什么？](https://stackoverflow.com/questions/13654671/what-is-the-method-in-the-api-for-converting-between-bases)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-12T05:48:25.840

如果您只是尝试转换基数（例如转换为基数 2），请尝试以下代码：

`Integer.parseInt(Integer.toString(numberToConvert,base))`

对于特别基地2：

`Integer.parseInt(Integer.toBinaryString(numberToConvert))`

[Integer](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html)包含可以使用的其他方法，例如 toHexString。这些假设`numberToConvert`以 10 为基数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-27T18:15:17.770

```
public class Converter {

    private static char symbols[] = new char[]{'0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L',
                    'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T' };

    public static void main(String args[]) {
        Converter converter = new Converter();
        System.out.println(converter.convert(31, 16));
    }

    public String convert(int number, int base) {
        return convert(number, base, 0, "");
    }

    private String convert(int number, int base, int position, String result) {
        if (number < Math.pow(base, position + 1)) {
            return symbols[(number / (int) Math.pow(base, position))] + result;
        } else {
            int remainder = (number % (int) Math.pow(base, position + 1));
            return convert(number - remainder, base, position + 1, symbols[remainder / (int) (Math.pow(base, position))] + result);
        }
    }

} 
```

# android - Android JNI：调用 System.loadLibrary() 导致 SEGV

> ID：10184579
> 
> 赞同：2
> 
> 时间：2012-04-17T03:18:20.520
> 
> 标签：android, java-native-interface

> **可能重复：**
> [应用程序在 Eclipse 中调试/运行，但 .APK 在解析包含自定义视图的 XML 布局时会给出 .classNotFoundException](https://stackoverflow.com/questions/10079585/application-works-in-debug-run-from-eclipse-but-apk-gives-classnotfoundexce)

我正在重新使用来自另一个应用程序的现有 NDK 编译库。

当我尝试使用 System.loadLibrary() 加载库时，它与 SIGSEGV 一起崩溃。

简单地说，我正在这样做：

```
 static {
        System.loadLibrary("testlib");
      } 
```

我相信这个库很好，因为它正在另一个应用程序中使用（未经修改）。我也可以通过这种方式加载其他库而没有任何问题。

我对使用 Android/NDK 还是很陌生——有什么我需要小心指定或设置的东西，可能我错过了？

这是我在日志中看到的内容：

```
04-17 09:33:37.725  6100  6100 D dalvikvm: Trying to load lib /data/data/com.test.android/lib/libtestlib.so 0x4051617
0
04-17 09:33:37.733  6100  6100 D dalvikvm: Added shared lib /data/data/com.test.android/lib/libtestlib.so 0x40516170
04-17 09:33:37.733  6108  6108 I DEBUG   : *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
04-17 09:33:37.733  6108  6108 I DEBUG   : Build fingerprint: 'verizon/venus2_vzw/cdma_venus2:2.3.4/4.5.1-110-VNS-35/120113:user/release-keys'
04-17 09:33:37.733  6108  6108 I DEBUG   : pid: 6100, tid: 6100  >>> com.test.android <<<
04-17 09:33:37.733  6108  6108 I DEBUG   : signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000018
04-17 09:33:37.733  6108  6108 I DEBUG   :  r0 00000005  r1 aca83d13  r2 000415a6  r3 81db5c4c
04-17 09:33:37.733  6108  6108 I DEBUG   :  r4 00000000  r5 00000000  r6 81db5c4c  r7 81db5c40
04-17 09:33:37.733  6108  6108 I DEBUG   :  r8 0000cec8  r9 81c8734d  10 002b1284  fp 00000000
04-17 09:33:37.733  6108  6108 I DEBUG   :  ip fffffe8c  sp bef91e48  lr aca6661b  pc aca45c0e  cpsr 20000070
04-17 09:33:37.733  6108  6108 I DEBUG   :  d0  643a64696f72646e  d1  6472656767756265
04-17 09:33:37.733  6108  6108 I DEBUG   :  d2  81dbd63081dc20c8  d3  81dc30a081c84481
04-17 09:33:37.733  6108  6108 I DEBUG   :  d4  81c844b981db6ccc  d5  81dc20b481dc209c
04-17 09:33:37.733  6108  6108 I DEBUG   :  d6  81dc20cc81c844ad  d7  81c844a181dbb618
04-17 09:33:37.733  6108  6108 I DEBUG   :  d8  0000000000000000  d9  0000000000000000
04-17 09:33:37.733  6108  6108 I DEBUG   :  d10 0000000000000000  d11 0000000000000000
04-17 09:33:37.733  6108  6108 I DEBUG   :  d12 0000000000000000  d13 0000000000000000
04-17 09:33:37.733  6108  6108 I DEBUG   :  d14 0000000000000000  d15 0000000000000000
04-17 09:33:37.733  6108  6108 I DEBUG   :  d16 bef91b68405515a8  d17 0000000000000000
04-17 09:33:37.733  6108  6108 I DEBUG   :  d18 0707070703030303  d19 0000000000000000
04-17 09:33:37.733  6108  6108 I DEBUG   :  d20 0100010001000100  d21 0100010001000100
04-17 09:33:37.733  6108  6108 I DEBUG   :  d22 0000000000000000  d23 0000000000000000
04-17 09:33:37.733  6108  6108 I DEBUG   :  d24 0000000000000000  d25 0000000000000000
04-17 09:33:37.733  6108  6108 I DEBUG   :  d26 0100010001000100  d27 0100010001000100
04-17 09:33:37.733  6108  6108 I DEBUG   :  d28 0100010001000100  d29 0100010001000100
04-17 09:33:37.733  6108  6108 I DEBUG   :  d30 00c7000000c10000  d31 00d3000000cd0000
04-17 09:33:37.733  6108  6108 I DEBUG   :  scr 20000012 
```

如果我在模拟器上运行它，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:47:11.217

```
System.loadLibrary() loads library from current project and System.load(fullPathLibName) load library from specific path. 
```

所以，使用 System.load()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T02:37:07.270

找到了答案。
我的线索是，如果我通过 eclipse 运行它会运行良好，并且只有在创建 .apk 文件时才会出现这个问题。

我在这里找到了解决方案：[Application works in debug / run from Eclipse, but .APK give .classNotFoundException when parsing XML layout that contains a custom View](https://stackoverflow.com/questions/10079585/application-works-in-debug-run-from-eclipse-but-apk-gives-classnotfoundexce)

# java - 正则表达式在正则表达式中工作，但不在 Java 中

> ID：10184580
> 
> 赞同：1
> 
> 时间：2012-04-17T03:18:23.390
> 
> 标签：java, regex

我有一个简单的正则表达式，它搜索一个句子以查看它是否包含单词 of|for|in|at，这是我的正则表达式，它几乎可以在正则表达式中工作：

[^A-Za-z]of|for|in|at[^A-Za-z]

我在以下情况下运行它：

```
show me the weather of seattle
show me the weather in seattle
show me the weather for seattle
show me the weather at seattle 
```

这是结果：

![在此处输入图像描述](../Images/6a95c719956ec66ea3360a172711d953.png)

当我在我的 Java 代码中使用它时，它根本不起作用。在正则表达式中也显示了我在开始和结束时定义的空间。有人可以告诉我的正则表达式有什么问题以及如何在一个句子中搜索多个单词之一

我总是在我的 java 中得到 else 条件，这意味着它不匹配正则表达式。这是我的java代码：

```
public class Regex 
{
public static void main(String[] args)
{
    String str = "show me the weather in seattle";

    if(str.matches("[^A-Za-z]of|for|in|at[^A-Za-z]")){
        System.out.println("Yayyy!!");
    }
    else{
        System.out.println("OMG now what to do");
    }       
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:24:03.810

```
[^A-Za-z](?:of|for|in|at)[^A-Za-z] 
```

您想对“或”匹配进行分组，否则它认为您的意思是：

```
[^A-Za-z]of  OR  for  OR  in  OR  at[^A-Za-z] 
```

这很可能不是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T04:35:09.230

这不工作`.*[^A-Za-z](of|for|in|at)[^A-Za-z].*`吗？当然，你需要做额外的检查来检查边界情况，其中 of|for|in|at 是单词的开头或结尾。

# javascript - javascript数组数字键导致多余的“未定义”

> ID：10184581
> 
> 赞同：2
> 
> 时间：2012-04-17T03:18:50.910
> 
> 标签：javascript, json

我当前的 webApp 有一个 OOD 系统，每个元素都有一个 id 并放置在每个页面的元素数组中。每个新元素的 id 是一个连续的数字，无论元素放置在哪个页面上，例如，如果我们在一个有 7 个页面的项目中有 25 个元素，那么新元素的 ID 无论放置在哪个页面都会是 26。例如，一个项目的第一页有 2 个元素，ID 为 1 和 4 将是：

`[undefined, proto.constructor, undefined, undefined, proto.constructor ]`

这种方式引用元素将非常容易，因为我只需要元素的页码和 ID，我可以调用元素，例如 pages[1].elements[1]。但是我使用这种方法的问题是，它会导致最终 JSON 中出现过多的“未定义”元素，这会使 JSON 不必要地太大。有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T03:21:36.000

使用 JS 对象而不是数组。它仍然可以有看起来像数字的键（它们实际上是字符串，但数组也是如此）并且具有相同的常量时间查找优势。

所以，不要像这样的代码......</p>

```
var objectsById = [];
objects[object.id] = object; 
```

…而不是像这样编写代码：

```
var objectsById = {};
objects[object.id] = object; 
```

JSON 输出将是简洁的（尽管不一定是排序的）：

```
{ "42":"someserializablevalue", "17":"another JSON value" }; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-17T03:25:05.497

在分配的末尾或开头添加一个类似'_'的字符串

```
var id=2
var array['_'+id]=value 
```

以 hits 方式而不是索引和映射所有元素， away 将被分配为关联数组 ob 元素

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-17T03:30:06.323

为什么不用空字符串初始化数组成员

像这样：

```
var arr = ['','','','','','','','','','']; 
```

或像这样：

```
var arr = new Array(10);
for(i=0;i<arr.length;i++)
   arr[i]=''; 
```

# hadoop - hbase 支持 hive 时是否支持所有 hive 查询？

> ID：10184582
> 
> 赞同：2
> 
> 时间：2012-04-17T03:18:59.690
> 
> 标签：hadoop, hbase, hive

我主要对 GROUP BY、HAVING、AVG、PERCENTILE 等聚合函数感兴趣。

如果没有，是否有任何替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T01:49:44.977

这些都应该工作。与“常规”Hive 表相比，由 HBase 支持的 Hive 表仅使用不同的存储处理程序。但是，据我所知，存储处理程序对可以通过 Hive 运行的查询没有任何影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:31:29.810

[https://cwiki.apache.org/Hive/languagemanual-udf.html](https://cwiki.apache.org/Hive/languagemanual-udf.html)是 Hive 中可用的 UDF 和函数的最终列表。

# ios - iOS - 核心数据 - NSManagedObjectContext - 不确定是否保存

> ID：10184583
> 
> 赞同：1
> 
> 时间：2012-04-17T03:19:04.717
> 
> 标签：ios, core-data, nsmanagedobjectcontext

**概述**

*   我有一个使用核心数据的 iOS 项目
*   我正在插入一个对象，然后我想保存它。
*   我不确定保存是否有效。
*   当应用程序进入后台时，保存似乎正在工作
*   使用模拟器时，如果我单击 Xcode 上的停止按钮，保存似乎不起作用。

**问题**

1.  保存真的发生了吗？
2.  我是否因为创建了一个基于视图的应用程序而面临问题（核心数据复选框不可用）？

**遵循的步骤**

*   我正在使用模拟器对其进行测试。
*   插入一个对象（代码在下一节）
*   保存插入的对象（代码在下一节中）
*   我按下 Xcode 上的停止按钮停止运行应用程序

**输出注意到**

```
setBeforeSave.count = 1
setAfterSave.count = 0 
```

*   保存前，该`NSManagedObjectContext`方法`insertedObjects`返回 1 个对象
*   保存前，`NSManagedObjectContext`方法`insertedObjects`返回0个对象
*   当按下 Xcode 停止按钮时，当应用程序重新启动时，以前的数据不可用（是不是因为我在 xcode 上单击了停止）
*   managedObjectContext 不为零
*   该`NSManagedObjectContext`方法`save:`返回`YES`。

**插入对象的代码**

```
Test *test = [NSEntityDescription insertNewObjectForEntityForName:@"Test" inManagedObjectContext:self.database.managedObjectContext]; 
```

**要保存的代码：**

```
//database is a property of the type UIManagedDocument

NSSet *setBeforeSave = [self.database.managedObjectContext insertedObjects];
NSLog(@"setBeforeSave.count = %i", setBeforeSave.count);

NSError *error = nil;

if(![self.database.managedObjectContext save:&error])
    NSLog(@"error = %@", error);    

NSSet *setAfterSave = [self.database.managedObjectContext insertedObjects];
NSLog(@"setAfterSave.count = %i", setAfterSave.count); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T03:25:43.487

根据 UIManagedDocument 文档，您不应在任何一个内部托管上下文中调用 save 。相反，如果您想保存数据，您应该做两件事之一。

1.  使用 undoManager，因为它会将上下文标记为脏，并准备好保存。

2.  调用 [document updateChangeCount:UIDocumentChangeDone];

因此，在您的情况下，您应该将该保存调用替换为：

```
[self.database updateChangeCount:UIDocumentChangeDone]; 
```

您的数据将被保存。

**编辑**

提供额外的细节。UIManagedDocument 有两个 MOC。在父/子关系中。孩子是您在调用 document.managedObjectContext 时得到的那个。现在，当 NSManagedObjectContext 有父对象时，将更改传播到父对象的正常方法是调用 save:。但是，UIManagedDocuememt 做了其他事情，并且它的文档明确指出不要在父上下文或子上下文中调用 save。

那么，如何保存东西呢？好吧，您告诉 UIManagedDocument 它是“脏的”并且需要保存。有两种方法可以做到这一点，或者使用 undoManager，或者调用 updateChangeCount:。

在执行其中任何一项操作时，UIManagedDocument 的内部将确保通知父上下文有关更改。在未来的某个时刻，父级将影响对实际后备存储（即磁盘上的文件）的更改。

此外，当“保存”上下文时，它可能会或可能不会保留对已更改对象的引用。您可以设置一个属性，告诉它保留已保存的对象或释放它们。

希望这可以解决您的问题。

不过，总结一下，请参阅原始答案。

顺便说一句，您实际上可以通过在命令行参数中添加“-com.apple.CoreData.SQLDebug 1”来查看 SQL 存储在下面执行的操作的日志。您可以在“编辑方案”对话框中执行此操作。

# python - 在 Google App Engine 上同步 Memcache 和 Datastore

> ID：10184591
> 
> 赞同：3
> 
> 时间：2012-04-17T03:20:55.290
> 
> 标签：python, google-app-engine, memcached, google-cloud-datastore

我正在使用 Google App Engine 编写聊天应用程序。我想记录聊天记录。不幸的是，Google App Engine 数据存储区只允许您每秒写入一次。为了解决这个限制，我正在考虑使用内存缓存来缓冲写入。为了确保不丢失数据，我需要定期将数据从 memcache 推送到数据存储中。

有没有办法在 Google App 上安排这样的工作。引擎？还是我以完全错误的方式解决这个问题？

我正在使用 API 的 Python 版本，因此首选 Python 解决方案，但我对 Java 非常了解，可以将 Java 解决方案翻译成 Python。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T03:48:40.390

听起来像是错误的方式，因为您有丢失 memcache 数据的风险。

您可以每秒写入一个实体组一次。

您可以非常快速地编写单独的实体组。因此，这实际上取决于您如何构建数据。例如，如果您将整个聊天记录保存在一个实体中，则您每秒只能编写一次该聊天记录。而且您将被限制为 1MB。

您应该在聊天中为每条消息编写一个单独的实体，您可以非常非常快速地编写，但您需要设计一种方法将所有消息拉到一起，以便记录日志。

**编辑**我同意 Peter Knego 的观点，即每条消息使用一个实体的成本会变得太昂贵。他的后端建议也很不错，尽管如果您的应用程序很受欢迎，后端的扩展性就不会那么好。

我试图避免分片，但我认为这是必要的。如果您不熟悉分片，请阅读以下内容：[https ://developers.google.com/appengine/articles/sharding_counters](https://developers.google.com/appengine/articles/sharding_counters)

分片将是为对话中的所有消息编写一个实体与每条消息一个实体之间的中间体。您将在多个实体之间随机拆分消息。例如，如果您将消息保存在 3 个实体中，则可以写入 5x/秒（我怀疑大多数人类对话会比这更快）。

在获取时，您需要抓取 3 个实体，并按时间顺序合并消息。这将为您节省很多成本。但是您需要编写代码来进行合并。

另一个好处是您的对话限制现在是 3MB 而不是 1MB。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T08:43:16.110

要绕过实体组的写入/更新限制（请注意，没有父级的实体是他们自己的实体组），您可以为每条聊天消息创建一个新实体，并在其中保留一个属性来引用他们所属的聊天。

然后，您将通过查询找到属于某个聊天的所有聊天消息。但这会非常低效，因为您需要为每个用户查询每条新消息。

因此，请遵循上述建议，但还要执行以下操作：

1.  查看[后端](https://developers.google.com/appengine/docs/python/backends/)。这是永远在线的实例，您可以在其中聚合内存中的聊天消息（并立即/定期将它们刷新到数据存储区）。当用户请求最新的聊天消息时，您已经将它们保存在内存中并会立即提供它们（与使用 Datastore 相比节省时间和成本）。请注意，后端并非 100% 可靠，它们可能会不时出现故障 - 相应地调整聊天消息刷新到数据存储。

2.  查看[频道 API](https://developers.google.com/appengine/docs/python/channel/overview)。这将允许您在有新的聊天消息时通知用户。这样，您就可以避免轮询新的聊天消息并减少数量或请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T16:06:45.957

为什么不使用拉任务？如果您对任务队列不够熟悉，我强烈推荐这个 Google 视频。前 15 分钟将涵盖可能适用于您的情况的拉取队列信息。任何涉及每条消息更新的事情都可能会变得非常昂贵：数据库操作，如果您涉及任何索引，这将*大大加剧。*视频链接： [https ://www.youtube.com/watch?v=AM0ZPO7-lcE&feature=player_embedded](https://www.youtube.com/watch?v=AM0ZPO7-lcE&feature=player_embedded)

I would simply set up my chat entity when users initiate it in the on-line handler, passing back the entity id to the chat parties. Send the id+message to your pull queue, and serialize the messages within the chat entity's TextProperty. You wont likely schedule the pull queue cron more often than once per second, so that avoids your entity update limitation. Most importantly: your database ops will be *greatly* reduced.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T09:50:02.687

我认为您可以创建将保留数据的任务。这样做的好处是，与 memcached 不同，任务是持久化的，因此不会丢失任何聊天记录。

当有新的聊天进来时，创建一个任务来保存聊天数据。在任务处理程序中执行持久化。您可以将任务队列配置为每秒拉 1 次（或稍慢），并将任务中保存的每一位聊天数据保存在临时表中（在不同的实体组中），并且每个任务都拉临时表中所有未保存的聊天，将它们保存到聊天实体，然后将它们从临时表中删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T12:42:28.747

我认为您可以将聊天会话用作实体组并保存聊天消息。
这个每秒一次的限制不是现实，你可以以更高的速度更新/保存，我一直在这样做，我对此没有任何问题。memcache 是易失的，对于您想要做的事情来说是错误的选择。如果您开始遇到写入速率问题，您可以开始设置任务以保存数据。

# sql - 多语言表 - 复合键是要走的路吗？

> ID：10184593
> 
> 赞同：2
> 
> 时间：2012-04-17T03:21:05.010
> 
> 标签：sql, composite-primary-key

有一堆需要翻译的项目，我有三张桌子。`Languages`,`Fruits`和`FruitNames`

这是我将使用的代码（在 ms SQL 中）

```
CREATE TABLE [FruitNames] (
    [LanguageId] INT NOT NULL ,
    [FruitId] INT NOT NULL ,
    [name] NVARCHAR( 100 ) NOT NULL ,
    FOREIGN KEY (LanguageId) REFERENCES Languages(id),
    FOREIGN KEY (FruitId) REFERENCES Fruits(id),
    PRIMARY KEY ([LanguageId],[FruitId])
) 
```

假设我永远不会为一个项目需要两个相同语言的名称，那么使用复合键有优势吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:28:26.100

对我来说，这似乎是一个非常好的复合键候选者。我不能说整体的可扩展性，但如果你翻译的只是水果的名字，这应该没问题。

# php - PHP：将 MIME 与 in_array 匹配

> ID：10184594
> 
> 赞同：0
> 
> 时间：2012-04-17T03:21:20.253
> 
> 标签：php, cakephp

我有一个包含“好”mime 类型列表的数组：

```
public $imageMimes = array('image/jpeg', 'image/png', 'image/gif', 'image/bmp', 'image/tiff'); 
```

我正在测试它：

```
if (in_array($this->data['PictureForm']['file']['type'], $imageMimes)) {
...} 
```

当我打印针变量时，我得到图像/png，但不匹配？任何想法为什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T03:28:17.730

好像你需要不`$this->imageMimes`使用`$videoMimes`

所以你犯了两个错误：

1.  您试图访问一个局部变量（不存在），而不是对象属性

2.  你用错了名字

# nuget - 使用 NuGet 包还原将 PostSharp 部署到源存储库中

> ID：10184596
> 
> 赞同：1
> 
> 时间：2012-04-17T03:22:22.733
> 
> 标签：nuget, postsharp

是否可以将 PostSharp 与 NuGet 包还原一起部署到源存储库中？我可以通过提交 postsharp 包来完成这项工作，但这在一定程度上否定了包还原功能的价值。

**这就是我所做的。**

*   我试图像这样设置 posthap：[Deploying post sharp into a source repo](http://doc.sharpcrafters.com/postsharp-2.1/Default.aspx##PostSharp-2.1.chm/html/41129237-a5d4-4acf-aef4-c46759ccfb4b.htm)

*   我已经设置了 nugget 以使用而不像这样提交：[Using NuGet without Committing Packages to Source Control](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages#Setup)

我在我的 csproj 中看到了这个

```
<Import Project="..\packages\PostSharp.2.1.6.13\tools\PostSharp.targets" />
<Import Project="$(SolutionDir)\.nuget\nuget.targets" /> 
```

（我重新订购它们无济于事）

我的构建服务器（CC.net）报告以下错误：

```
D:\wwwroot\www.snip.co.nz\http\www.snip.co.nz.csproj (714,3):

errorMSB4019: The imported project     "D:\wwwroot\www.snip.co.nz\packages\PostSharp.2.1.6.13\tools\PostSharp.targets" was not found. Confirm that the path in the &lt;Import&gt; declaration is correct, and that the file exists on disk.

CacheAttribute.cs (8,7):
errorCS0246: The type or namespace name 'PostSharp' could not be found (are you missing a using directive or an assembly reference?) 
…etc… 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T22:17:26.350

您当前（v2.1.6.13）必须修复 csproj 以支持包还原，在 Import 目标元素中添加此处显示的条件：

```
<Import Project="..\packages\PostSharp.2.1.6.13\tools\PostSharp.targets"  
     Condition="Exists('..\packages\PostSharp.2.1.6.13\tools\PostSharp.targets')" /> 
```

# xcode - NSArray arrayWithObjects：限制为九个对象

> ID：10184599
> 
> 赞同：0
> 
> 时间：2012-04-17T03:22:45.070
> 
> 标签：xcode, nsarray

我从 NSArray arrayWithObjects 得到明显不一致的行为：我正在尝试创建一个 19 个元素的数组，但我的代码行只创建了 9 个元素。使用字符串的测试有效。这就是我所看到的。

```
cellButtonsArray = [NSArray arrayWithObjects: @"z", @"z", @"z", @"z", 
                    @"z", @"z", @"z", @"z", @"z", @"z", @"z", @"z", @"z",
                    @"z", @"z", @"z", @"z", @"z", @"z", nil];

NSLog(@"count of cellButtonsArray = %i", [cellButtonsArray count]); 
```

输出为：“count of cellButtonsArray = 19” //这是测试代码，没问题。

我的真实代码使用在标题中声明的 UIButtons 对象。如果我使用两个每个包含九个元素的数组，一切都很好。但是，以下代码不会引发任何警告或错误，并且适用于前九个单元格。其余的被忽略。

```
cellButtonsArray = [NSArray arrayWithObjects:cell0, cell1, cell2, cell3, cell4,
                   cell5, cell6, cell7, cell8, cell9, cell10, cell11, cell12, cell13,
                   cell14, cell15, cell16, cell17, cell18, nil];

NSLog(@"count of cellButtonsArray = %i", [cellButtonsArray count]); 
```

输出为：“cellButtonsArray 的计数 = 9”

显然，计数不是我所期望的。该数组在少于九个对象的情况下正常工作。否则一切正常，除了未更新的九个按钮（单元格）。有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T03:30:06.223

创建数组时 cell9 是 nil 吗？

arrayWithObjects 在遇到任何 nil 时停止添加对象，而不仅仅是您在最后指定的 nil。

# java - 在 testng 的 @BeforeTest 中访问 spring 上下文

> ID：10184602
> 
> 赞同：5
> 
> 时间：2012-04-17T03:23:04.293
> 
> 标签：java, testng, spring-test

我想在我的`@BeforeTest`方法中将一些 web 范围注册到 spring 上下文中。但事实证明，春天的背景仍然`null`在那个时候。

不过，如果我更改为`@BeforeMethod`. 我想知道如何访问 中的上下文`@BeforeTest`，因为我不希望每个测试方法都重复范围注册代码。

下面是我的代码片段。

```
public class MyTest extends MyBaseTest {
    @Test public void someTest() { /*...*/ }
}

@ContextConfiguration(locations="/my-context.xml")
public class MyBaseTest extends AbstractTestNGSpringContextTests {
    @BeforeTest public void registerWebScopes() {
        ConfigurableBeanFactory factory = (ConfigurableBeanFactory)
                this.applicationContext.getAutowireCapableBeanFactory();
        factory.registerScope("session", new SessionScope());
        factory.registerScope("request", new RequestScope());
    }   

    /* some protected methods here */
} 
```

这是运行测试时的错误消息：

```
配置失败：@BeforeTest registerWebScopes
java.lang.NullPointerException
    在 my.MyBaseTest.registerWebScopes(MyBaseTest.java:22)

```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T17:16:04.863

调用`springTestContextPrepareTestInstance()`您的 BeforeTest 方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-22T20:07:29.690

TestNG 在`@BeforeTest`方法之前运行`@BeforeClass`方法。被`springTestContextPrepareTestInstance()`注释`@BeforeClass`并设置 `applicationContext`. 这就是为什么`applicationContext`仍然`null`在一个`@BeforeTest`方法中。`@BeforeTest`用于对一组标记的测试进行分组。（它不会在每种`@Test`方法之前运行，所以有点用词不当）。

而不是 using `@BeforeTest`，您可能应该使用（在当前类中`@BeforeClass`的第一个之前运行一次）。`@Test`确保它取决于`springTestContextPrepareTestInstance`方法，如

```
@BeforeClass(dependsOnMethods = "springTestContextPrepareTestInstance")
public void registerWebScopes() {
    ConfigurableBeanFactory factory = (ConfigurableBeanFactory) 
            this.applicationContext.getAutowireCapableBeanFactory();
    factory.registerScope("session", new SessionScope());
    factory.registerScope("request", new RequestScope());
} 
```

这些`@BeforeMethod`作品也是如此（正如你所提到的），因为它们在`@BeforeClass`方法之后运行。

# c# - ADO 异常操作数类型冲突

> ID：10184603
> 
> 赞同：2
> 
> 时间：2012-04-17T03:23:06.780
> 
> 标签：c#, sql-server, ado.net

嗨，我遇到了一个奇怪的错误，需要另一双眼睛

我有这个代码：

```
 con.Open();
    var cmd = new SqlCommand("INSERT INTO [lntmuser].[attach] ([sysid],[name],[att_size],[cid],[flags],[contents]) VALUES (@sysid, @name, @att_size, @cid, @flags, @contents)", con) { CommandType = CommandType.Text };
    (Blah, Blah, ASIGN FIRST 5 VALUES, These All work)
    cmd.Parameters.AddWithValue("@contents", SqlDbType.Image).Value = aa.contents ?? (object) DBNull.Value; 
```

其中 aa.contents 的类型为 byte[]。起初尝试没有

```
"?? (object) DBNull.Value;" 
```

我得到了一个“插入需要@contents 参数”，所以我添加了 ?? （对象）DBNull.Value；现在，当我运行单元测试时，出现以下丑陋的错误：

```
RestoreTest.TestMultiParAttLookUp : FailedSystem.Data.SqlClient.SqlException : Operand  type clash: nvarchar is incompatible with image
at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean  breakConnection)
at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler,  SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject  stateObj)
at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior,   RunBehavior runBehavior, Boolean returnStream, Boolean async)
at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior,  RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult result, String methodName, Boolean sendToPipe)
at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
at bcDAL.RestoreFunc.ExecuteSQL(List`1 emailIds, List`1 attIds, String conStrA, String  conStrM) in RestoreFunc.cs: line 173
at bcDAL.RestoreFunc.RestoreEntry(String sysid, String conStrA, String conStrM) in  RestoreFunc.cs: line 22
at tcUnitTests.RestoreTest.TestMultiParAttLookUp() in RestoreTest.cs: line 18 
```

nvarchar 在哪里发挥作用？ [我正在查看这个问题，](https://stackoverflow.com/questions/2420708/operand-type-clash-nvarchar-is-incompatible-with-image)但是我在分配值之前明确说明了 SQL 数据类型。

我可能只是需要一些睡眠哈哈。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T03:28:51.617

这里的问题是 ADO.NET 无法分辨是什么类型`DBNull.Value`，如您引用的问题中所述。就像答案说的那样，ADO.NET 无法判断它是什么数据类型，所以它默认为一个。

它不那么漂亮，并且不遵循与其他人相同的约定，但它可以完成工作。建议将其放在 2 行以上，而不是您拥有的单行上。

```
var contentsParam = new SqlParameter("@contents", SqlDbType.Image);
contentsParam.Value = aa.contents ?? (object) DBNull.Value;
cmd.Parameters.Add(contentsParam);   
cmd.ExecuteNonQuery(); 
```

# sql - 如何在两列上选择数据库中的唯一行？

> ID：10184605
> 
> 赞同：1
> 
> 时间：2012-04-17T03:23:52.477
> 
> 标签：sql, sql-server-2008

我在网上找到了类似的解决方案，但没有一个能够应用于我的具体问题。

我正在尝试将数据从一个表“唯一化”到另一个表。在我的原始表格中，数据如下所示：

```
USERIDP1    USERIDP2     QUALIFIER     DATA
1           2            TRUE          AB
1           2                          CD
1           3                          EF
1           3                          GH 
```

用户 ID 由两部分组成，USERIDP1 和 USERIDP2 连接在一起。我想传输与在他们拥有的任何行中具有 QUALIFIER=TRUE 的用户相对应的所有行，但忽略在其任何行中没有 TRUE QUALIFIER 的用户。

澄清一下，将转移用户 12 的所有行，但不会转移用户 13 的所有行。输出将如下所示：

```
USERIDP1    USERIDP2     QUALIFIER     DATA
1           2            TRUE          AB
1           2                          CD 
```

所以基本上，我需要找到具有不同用户 ID 组件（涉及两个唯一字段）的行，这些行也具有 QUALIFIER=TRUE 的行，并复制所有且仅所有这些用户的行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T03:35:51.867

虽然这个嵌套查询对于大表来说会很慢，但可以这样做。

```
SELECT DISTINCT X.USERIDP1, X.USERIDP2, X.QUALIFIER, X.DATA
FROM YOUR_TABLE_NAME AS X
WHERE EXISTS (SELECT 1 FROM YOUR_TABLE_NAME AS Y WHERE Y.USERIDP1 = X.USERIDP1
              AND Y.USERIDP2 = X.USERIDP2 AND Y.QUALIFIER = TRUE) 
```

它也可以写成与自身的内部连接：

```
SELECT DISTINCT X.USERIDP1, X.USERIDP2, X.QUALIFIER, X.DATA
FROM YOUR_TABLE_NAME AS X
INNER JOIN YOUR_TABLE_NAME AS Y ON Y.USERIDP1 = X.USERIDP1
                                AND Y.USERIDP2 = X.USERIDP2 AND Y.QUALIFIER = TRUE 
```

对于大型表，为 QUALIFIER = TRUE 的行创建一个仅包含 USERIDP1 和 USERIDP2 列的新辅助表，然后使用类似于上面第二个选项的内部连接将此表与原始表连接。请记住创建适当的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T07:26:47.973

这应该可以解决问题 - 如果 id 字段存储为整数，那么您将需要转换/转换为 Varchars

```
SELECT 1 as id1,2 as id2,'TRUE' as qualifier,'AB' as data into #sampled
UNION ALL SELECT 1,2,NULL,'CD' 
UNION ALL SELECT 1,3,NULL,'EF'
UNION ALL SELECT 1,3,NULL,'GH'

   ;WITH data as
    (
    SELECT
    id1 
    ,id2 
    ,qualifier
    ,data
    ,SUM(CASE WHEN qualifier = 'TRUE' THEN 1 ELSE 0 END) 
        OVER (PARTITION BY id1 + '' + id2) as num_qualifier
    from #sampled
    )
    SELECT 
    id1
    ,id2
    ,qualifier
    ,data
    from data
    where num_qualifier > 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T03:38:09.283

```
Select * 
from yourTable
INNER JOIN (Select UserIDP1, UserIDP2 FROM yourTable WHERE Qualifier=TRUE) B
ON yourTable.UserIDP1 = B.UserIDP1 and YourTable.UserIDP2 = B.UserIDP2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T03:43:02.277

将子查询作为 where 子句怎么样？

```
SELECT *
  FROM theTable t1
 WHERE CAST(t1.useridp1 AS VARCHAR) + CAST(t1.useridp2 AS VARCHAR) IN
         (SELECT CAST(t2.useridp1 AS VARCHAR) + CAST(t.useridp2 AS VARCHAR)
            FROM theTable t2
           WHERE t2.qualified
         ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T03:44:57.123

这是mysql中的一个解决方案，但我相信它应该很容易转移到sql server。使用子查询挑选出具有至少一个 True 'qualifier' 行的 (id1, id2) 组合组；然后将其加入（id1，id2）上的原始表。

```
mysql> SELECT u1.*
       FROM users u1
       JOIN (SELECT id1,id2
             FROM users
             WHERE qualifier
             GROUP BY id1, id2) u2
       USING(id1, id2);

+------+------+-----------+------+
| id1  | id2  | qualifier | data |
+------+------+-----------+------+
|    1 |    2 |         1 | aa   |
|    1 |    2 |         0 | bb   |
+------+------+-----------+------+
2 rows in set (0.00 sec) 
```

# javascript - 使用 Jquery 插入 LI 元素时，JavaScript 有时不会调整 UL 元素的高度

> ID：10184606
> 
> 赞同：13
> 
> 时间：2012-04-17T03:24:01.393
> 
> 标签：javascript, html, ajax, height

我有一个包含 N 列的 Html/JavaScript 应用程序，这些列需要足够大，包含所有列中所有可能的 LI 元素。

简单的解决方案似乎计算每列中所有项目的高度，补偿填充，然后将高度设置为每列的总高度。

当 LI 元素包含纯文本时，这很有效。不幸的是，当 LI 元素包含图像时，各种浏览器都会出现问题。例如，当我第一次在 FireFox 中加载页面时，它看起来像下面的屏幕截图，但在再次刷新时，它工作正常。它在 Chrome 中也无法按预期工作。

![屏幕截图显示 UL 元素的高度与 LI 元素不同步](../Images/e2c355430c0e5cfb71b991af08077baf.png)

我的应用程序在页面加载时没有预先填充 LI 元素 - 它使用 JavaScript，如下所示：

```
function populateUnsetAnswers(unsetCategoryAnswers) {
    for (i in unsetCategoryAnswers) {
        if (unsetCategoryAnswers.hasOwnProperty(i.toString())) {
            $('#categoryQuestionArea #possibleAnswers').append(
                categoryAnswerLiTag(unsetCategoryAnswers[i])
            );
        }
    }
}

function categoryAnswerLiTag(unsetCategoryAnswer) {
    var html = '<li id="' + unsetCategoryAnswer.id + '">';

    if (unsetCategoryAnswer.image) {
        html += '<img class="categoryAnswerImage" title="';
        html += unsetCategoryAnswer.text;
        html += '" src="/trainingdividend/rest/streaming/';
        html += unsetCategoryAnswer.image.fileName;
        html += '" style="height: ';
        html += unsetCategoryAnswer.image.height;
        html += ';';
        html += '" />';
    } else {
        html += unsetCategoryAnswer.text
    }

    html += '</li>';

    return html;
} 
```

页面加载完成后，ajax 请求获取所有要放入 LI 元素的对象，然后调用上面的第一个函数。

在创建了所有 LI 元素之后，我在它之后调用这个函数：

```
function resize() {
    var currentHeight, totalHeight;
    totalHeight = 0;

    $("#categoryQuestionArea ul").children().each(function() {
        currentHeight = $(this).height();

        totalHeight += currentHeight + 13;
    });

    $("#categoryQuestionArea ul").height(totalHeight);
    $("#categoryQuestionArea div#separator").css("padding-top", (totalHeight / 2) + "px");
} 
```

有没有办法告诉 jQuery，“在所有 LI 都完全加载并且图像已经渲染之前，不要调用 resize()”？

我认为发生的事情是在初始页面加载时，这些 LI 元素的高度为 0 或一个较小的值，因为它不包含图像，所以我的 resize 函数正在计算错误的结果（我用一些警报语句对此进行了测试）。只要填充了 LI 并且加载了图像，就可以很好地计算总高度。

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T20:28:18.373

从字面上回答您提出的问题，如果您只想`resize()`在所有图像完成加载时调用，那么您需要`onload`为这些图像安装处理程序，并且当您记录最后一个现在已加载时，您可以调用该`resize()`函数。你可以这样做（下面的代码解释）：

```
var remainingAnswerImages = 0;

function categoryAnswerImageLoadHandler() {
    --remainingAnswerImages;
    if (remainingAnswerImages === 0) {
        resize();
    }
}

function populateUnsetAnswers(unsetCategoryAnswers) {
    // add one extra to the image count so we won't have any chance 
    // at getting to zero  before loading all the images
    ++remainingAnswerImages;
    var possibleAnswers$ = $('#categoryQuestionArea #possibleAnswers');
    for (i in unsetCategoryAnswers) {
        if (unsetCategoryAnswers.hasOwnProperty(i.toString())) {
            possibleAnswers$.append(categoryAnswerLiTag(unsetCategoryAnswers[i]));
        }
    }
    // remove the one extra
    --remainingAnswerImages;
    // if we hit zero on the count, then there either were no images 
    // or all of them loaded immediately from the cache
    // if the count isn't zero here, then the 
    // categoryAnswerImageLoadHandler() function will detect when it does hit zero
    if (remainingAnswerImages === 0) {
        resize();
    }
}

function categoryAnswerLiTag(unsetCategoryAnswer) {
    var obj = document.createElement("li");
    obj.id = unsetCategoryAnswer.id;

    if (unsetCategoryAnswer.image) {
        // count this image
        ++remainingAnswerImages;
        var img = new Image();
        img.onload = img.onerror = img.onabort = categoryAnswerImageLoadHandler;
        img.title = unsetCategoryAnswer.text;
        img.style.height = unsetCategoryAnswer.image.height;
        img.src = "/trainingdividend/rest/streaming/" + unsetCategoryAnswer.image.fileName;
        obj.appendChild(img);
    } else {
        obj.innerHTML = unsetCategoryAnswer.text;
    }
    return obj;
} 
```

作为解释，此代码进行了以下更改：

*   添加一个变量`remainingAnswerImages`来跟踪仍有多少图像需要加载。
*   为每个创建的标签添加一个 onload 处理程序，`<img>`以便我们可以跟踪它的加载时间。
*   每次我们使用 onload 处理程序为标签生成 HTML 时，递增`remainingAnswerImages`。
*   添加完所有 HTML 后，检查`remainingAnswerImages`计数是否为零（仅当没有图像或所有图像立即从浏览器缓存加载时才会出现这种情况）。如果是这样，请立即调用 resize()。
*   在将为每个图像调用的 onload 处理程序中，递减`remainingAnswerImages`，如果计数达到零，则调用`resize()`.
*   添加图像时，添加一个额外的`remainingAnswerImages`作为门，以防止计数为零，直到我们完成添加图像。完成添加图像后，将额外的图像取出。
*   我还重写了`categoryAnswerLiTag()`函数以直接创建 DOM 对象，而不是将一堆字符串连接到 HTML 中。在这种情况下，代码更易于阅读和维护。
*   我也将你的循环`$('#categoryQuestionArea #possibleAnswers')`移出了你的`for`循环，因为它每次都解决相同的问题。最好在循环之前执行一次。此外，在大多数情况下，这可以简化为，`$('#possibleAnswers')`因为 id 在页面中应该是唯一的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T12:30:42.797

这是一个检查图像是否已加载的 jquery 插件：[https ://github.com/alexanderdickson/waitForImages](https://github.com/alexanderdickson/waitForImages)

您的案例的示例用法是：

```
$('#categoryQuestionArea').waitForImages(function() {
   resize();
}); 
```

我也将只检查 的总高度，`<ul>`而不是循环遍历列表项，因为如果稍后列表项上的填充、边距或边框发生更改，您将不得不手动更改脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T17:09:24.853

如果您在第一页加载时确实遇到图像问题，可能是因为它们没有被缓存，因此无法立即使用。所以测量它们的高度会导致不好的结果......你是否调试过通过 jQuery 获取的高度（例如

```
currentHeight = $(this).height();
console.log(currentHeight); 
```

做到这一点的唯一方法是我认为观察所有图像的加载事件（也可能是错误）并计算所有请求是否已完成

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T18:14:36.370

我猜你的 HTML 搞砸了。特别是您的`<img>`标签。

将`width`和`height`属性添加到您的`<img>`标签。一切都会神奇地解决。

请参阅此 jsfiddle 以了解我的意思：http: [//jsfiddle.net/Ralt/Vwg7P/](http://jsfiddle.net/Ralt/Vwg7P/)

即使那里没有图像，`width`and`height`属性也会占用图像所需的空间。一旦加载了 DOM。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T21:39:29.517

另一个简单的*等高 CSS 解决方案：*

**LOGIC**非常简单——所有的列/LI 都用**.eH{ padding-bottom: X;浮动。margin-bottom: -X }**和 wrapper/UL 是**.eW{overflow: hidden}**

*X = 安全系数的任意数量的 px*

**示例：http:** [//jsfiddle.net/rahen/TXVYD/4/](http://jsfiddle.net/rahen/TXVYD/4/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T17:48:19.723

尝试使用

```
$('img').load(function(){
    //put code here
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-24T10:18:01.120

这是一个 CSS 问题，很可能是由于固定高度，项目要么浮动要么绝对定位。

有很多方法可以解决这个问题。

1.  给一个`min-height`而不是固定一个高度。

    ```
    #container { min-height: 100px; } 
    ```

2.  清除`float`并且不设置任何高度

    ```
    #container { overflow: hidden; } 
    ```

3.  添加每个元素后，使用脚本添加高度。就像下面的 jQuery 片段

    ```
    $("#container").append($("#theimg"));
    $("#container").height($("#container").height()+$("#theimg").height()); 
    ```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-26T14:13:33.137

这听起来就像我在编写 SudoSlider 时遇到的问题之一。

下面我复制了我解决它的代码。只需`autoheightwidth(i, 0, true)`在您的 resize() 函数中调用。

基本思想是您不知道浏览器何时完成加载图像，因此不是依赖单一的高度调整，而是在每次发生某些事情时调整高度（主要是图像已经加载）。

如果您在前两种方法中更改“obj”和“li”的引用，它应该可以工作。

它的可读性不是很好，但是当我编码它时，我非常关注大小。

```
// Automaticly adjust the height and width, i love this function. 
// Before i had one function for adjusting height, and one for width.
function autoheightwidth(i, speed, axis) // Axis: true == height, false == width.
{
    obj.ready(function() {// Not using .load(), because that only triggers when something is loaded.
        adjustHeightWidth (i, speed, axis);
        // Then i run it again after the images has been loaded. (If any)
        // I know everything should be loaded, but just in case. 
        runOnImagesLoaded (li.eq(i), falsev, function(){
            adjustHeightWidth (i, speed, axis);
        });
    });
};
function adjustHeightWidth (i, speed, axis)
{
    var i = getRealPos(i); // I assume that the continuous clones, and the original element is the same height. So i allways adjust acording to the original element.
    var target = li.eq(i);
    // First i run it. In case there are no images to be loaded. 
    var b = target[axis ? "height" : "width"]();
    obj.animate(
        axis ? {height : b} : {width : b},
        {
            queue:falsev,
            duration:speed,
            easing:option[8]/*ease*/
        }
    );
}
function runOnImagesLoaded (target, allSlides, callback) // This function have to be rock stable, cause i use it ALL the time!
{
    var elems = target.add(target.find('img')).filter('img');
    var len = elems.length;
    if (!len)
    {
        callback();
        // No need to do anything else. 
        return this;
    }
    function loadFunction(that)
    {
        $(that).unbind('load').unbind('error');
        // Webkit/Chrome (not sure) fix. 
        if (that.naturalHeight && !that.clientHeight)
        {
            $(that).height(that.naturalHeight).width(that.naturalWidth);
        }
        if (allSlides)
        {
            len--;
            if (len == 0)
            {
                callback();
            }
        }
        else
        {
            callback();
        }
    }
    elems.each(function(){
        var that = this;
        $(that).load(function () {
            loadFunction(that);
        }).error(function () {
            loadFunction(that);
        });
        /*
         * Start ugly working IE fix. 
         */
        if (that.readyState == "complete") 
        {
            $(that).trigger("load");    
        }
        else if (that.readyState)
        {
            // Sometimes IE doesn't fire the readystatechange, even though the readystate has been changed to complete. AARRGHH!! I HATE IE, I HATE IT, I HATE IE!
            that.src = that.src; // Do not ask me why this works, ask the IE team!
        }
        /*
         * End ugly working IE fix. 
         */
        else if (that.complete)
        {
            $(that).trigger("load");
        }
        else if (that.complete === undefined)
        {
            var src = that.src;
            // webkit hack from http://groups.google.com/group/jquery-dev/browse_thread/thread/eee6ab7b2da50e1f
            // data uri bypasses webkit log warning (thx doug jones)
            that.src = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="; // This is about the smallest image you can make. 
            that.src = src;
        }
    }); 
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-24T11:56:38.917

我想我可能会为您提供解决方案。

我的解决方案的主要思想在于 CSS。你想有 3 列相同的高度，对吧？你可以有这样的东西：http: [//jsfiddle.net/agilius/NvzZp/46/](http://jsfiddle.net/agilius/NvzZp/46/)

那里有很多 CSS，但主要思想是这样的：

1.  我使用 .inner 和 .column 类在实际内容下模拟 3 列布局。
2.  内容放置在上面（通过 z-index 2 > .inner zindex 1），其宽度与下面的列相同。
3.  当内容添加到内容区域时，主#container 的高度会更新。
4.  由于 .inner 是 top,left,right,bottom = 0，它会更新，并且由于 .columns 具有 100% 的高度，它们会更新它们的高度以匹配 #containers 高度。

观察。

您可以在 .column 类中设置您认为合适的填充、边框、边距。

不需要javascript。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-04-23T17:15:12.450

我认为浏览器不知道图像的尺寸，因为它们没有加载。

要么尝试将调用包装`resize`在一个

```
jQuery(document).load( function funcName() {
   ...
} ) 
```

或在 HTML标签中给出图像`width`和`height`属性。`img`

也许两者兼而有之

# visual-c++ - 如何在 Visual C++ 中进入 main() 函数之前管理加载 dll

> ID：10184609
> 
> 赞同：3
> 
> 时间：2012-04-17T03:24:40.983
> 
> 标签：visual-c++, dll

Visual C++程序在Visual Studio Express 2008进入主函数前如何加载dll？在其他人开发的项目中，“a.ext:native”加载了一个 dll，但我不知道这是如何配置的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T03:45:04.077

有多种方法可以指示操作系统加载 DLL。最常见的方法是链接到 .lib 文件（通过项目的链接器设置），其中 .lib 是与 DLL 关联的构建时存根。当链接器在链接阶段找到这个.lib 文件时，它就知道该DLL 是必需的，并在内部修改EXE 以告诉操作系统该DLL 必须存在才能使程序运行。

当程序稍后运行时，操作系统首先查找所有需要的 DLL——甚至在开始执行程序代码之前。如果缺少这些 DLL 中的任何一个，操作系统会抛出一个错误，弹出一个错误框，并且程序将无法运行。

也可以动态加载 DLL，但这并不常见。

# ios5 - 无法在 ios5 基于页面的应用程序中加载 NIB

> ID：10184610
> 
> 赞同：0
> 
> 时间：2012-04-17T03:24:42.000
> 
> 标签：ios5

我正在使用下面的代码从另一个视图调用 rootviewcontroller

`rootviewpage = [[RootViewController alloc]initWithNibName:@"RootViewController" bundle:nil]; [self.view addSubview:rootviewpage.view];`

但应用程序终止..请检查下面的错误消息.Tanks

由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法在包中加载 NIB：“NSBundle（已加载）”，名称为“RootViewController” ***第一次抛出调用堆栈：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T03:26:53.740

您的项目中没有名称为 RootViewController 的 nib（用于接口的 .xib 文件）。

# ruby-on-rails - 找不到 libcurl 或 curl/curl.h (RuntimeError)

> ID：10184615
> 
> 赞同：58
> 
> 时间：2012-04-17T03:25:03.077
> 
> 标签：ruby-on-rails, ruby, curl, gem, curb

我正在尝试在 Windows 计算机上安装遏制 0.8.0，但我似乎无处可去。我一直在我的谷歌搜索中尝试每个网站 3 页的深度。拜托，任何人都知道如何安装这个单一的东西。我已下载 curl 并将其解压缩到 C:\curl。我已将其添加到我的路径并正在运行命令：

```
gem install curb -- --with-curl-lib=C:\curl\bin --with-curl-include=C:\curl\include 
```

但它不起作用。我不断收到同样的错误。有什么建议么？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2013-01-04T15:38:03.070

如果你在 ubuntu 上：

```
sudo apt-get install libcurl3 libcurl3-gnutls libcurl4-openssl-dev 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2018-11-12T12:32:52.120

如果你是 ubuntu 18.04/20.04.2 LTS：

```
sudo apt-get install libcurl4 libcurl4-openssl-dev 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-17T04:58:15.773

`curb`gem 需要`libcurl`，与 相关但不同的东西`curl`。这`curl`是构建的库。该丢失的文件是cURL[开发版本的一部分。](http://curl.haxx.se/dlwiz/?type=devel)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-10-08T14:51:17.727

对于 Amazon Linux（也许还有 centos/redhat/fedora）执行以下操作：

```
sudo yum install libcurl libcurl-devel 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-02-13T09:41:07.243

如果你在高山：

```
apk add --update curl-dev 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-12-29T10:17:50.583

输入这个以摆脱 curl/curl.h 错误

```
sudo apt-get install libcurl3 libcurl3-gnutls libcurl4-openssl-dev 
```

在此之后，如果您之前没有安装过 freeTDS，您将收到一个错误

尝试运行

```
sudo apt-get install freetds-dev 
```

在此之后

```
gem install tiny_tds 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-03-03T17:10:06.963

首先，通过运行更新您的包列表

```
sudo apt-get update 
```

然后安装libcurl3的开发版

```
sudo apt-get install libcurl3-dev 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-01-23T20:53:27.770

这样的头文件通常打包在一个`xxx-dev`包中。在这种情况下`libcurl-dev`。

通常他们还提供解析为最新版本的包的“虚拟”包。如果有多个实现可用，那么它会列出并要求您选择您想要的一个，否则它将继续并选择最新的一个。

```
vagrant@my_box $ sudo apt-get install libcurl-dev
Reading package lists... Done
Building dependency tree
Reading state information... Done
Package libcurl-dev is a virtual package provided by:
  libcurl4-openssl-dev 7.22.0-3ubuntu4.17
  libcurl4-nss-dev 7.22.0-3ubuntu4.17
  libcurl4-gnutls-dev 7.22.0-3ubuntu4.17
You should explicitly select one to install.

E: Package 'libcurl-dev' has no installation candidate
vagrant@my_box $ # I pick gnu implementation version 4.
vagrant@my_box $ sudo apt-get install libcurl4-gnutls-dev
...
vagrant@my_box $ 
```

查看所有版本：

```
$ aptitude versions libcurl
Package libcurl-ocaml:
p   0.5.3-2build3                      precise        500

Package libcurl-ocaml-dev:
p   0.5.3-2build3                      precise        500

Package libcurl-ocaml-dev:i386:
p   0.5.3-2build3                      precise        500

Package libcurl-ocaml:i386:
p   0.5.3-2build3                      precise        500

Package libcurl3:
p   7.22.0-3ubuntu4                    precise        500
i   7.22.0-3ubuntu4.15                                100
p   7.22.0-3ubuntu4.17                 precise-securi 500

......

Package libcurl3-gnutls:i386:
p   7.22.0-3ubuntu4                    precise        500
p   7.22.0-3ubuntu4.17                 precise-securi 500

......

Package libcurl4-gnutls-dev:
p   7.22.0-3ubuntu4                    precise        500
i   7.22.0-3ubuntu4.17                 precise-securi 500

Package libcurl4-gnutls-dev:i386:
p   7.22.0-3ubuntu4                    precise        500
p   7.22.0-3ubuntu4.17                 precise-securi 500
......

$ # see only curl4 related stuff
$ aptitude versions libcurl4
Package libcurl4-gnutls-dev:
p   7.22.0-3ubuntu4                    precise        500
i   7.22.0-3ubuntu4.17                 precise-securi 500

Package libcurl4-gnutls-dev:i386:
p   7.22.0-3ubuntu4                    precise        500
p   7.22.0-3ubuntu4.17                 precise-securi 500

Package libcurl4-nss-dev:
p   7.22.0-3ubuntu4                    precise        500
p   7.22.0-3ubuntu4.17                 precise-securi 500

Package libcurl4-nss-dev:i386:
p   7.22.0-3ubuntu4                    precise        500
p   7.22.0-3ubuntu4.17                 precise-securi 500

Package libcurl4-openssl-dev:
p   7.22.0-3ubuntu4                    precise        500
p   7.22.0-3ubuntu4.17                 precise-securi 500

Package libcurl4-openssl-dev:i386:
p   7.22.0-3ubuntu4                    precise        500
p   7.22.0-3ubuntu4.17                 precise-securi 500
$
$ 
```

如果您没有开发 lib 的名称，您可以进行盲目搜索，例如（`grep`s 用于虚拟包）：

```
$ aptitude search curl | grep dev | grep ^v
v   libcurl-dev                     -
v   libcurl-dev:i386                -
v   libcurl-ocaml-dev-g55y9         -
v   libcurl-ocaml-dev-owsj4:i386    -
v   libcurl-ssl-dev                 -
v   libcurl-ssl-dev:i386            -
v   libcurl3-dev                    -
v   libcurl3-dev:i386               -
v   libcurl3-gnutls-dev             -
v   libcurl3-gnutls-dev:i386        -
v   libcurl3-nss-dev                -
v   libcurl3-nss-dev:i386           -
v   libcurl3-openssl-dev            -
v   libcurl3-openssl-dev:i386       -
v   libcurl4-dev                    -
v   libcurl4-dev:i386               -
v   libghc-curl-dev-1.3.7-134ce:i38 -
v   libghc-curl-dev-1.3.7-26a38     -
v   libghc-download-curl-dev-0.1.3\. -
v   libghc-download-curl-dev-0.1.3\. -
v   libghc-hxt-curl-dev-9.1.1-66e48 -
v   libghc-hxt-curl-dev-9.1.1-66e48 -
$ 
```

# java - Java 整数与字符串自动装箱设计

> ID：10184618
> 
> 赞同：1
> 
> 时间：2012-04-17T03:25:15.467
> 
> 标签：java, autoboxing

在 Java 中，我可以执行以下操作来简洁地防范 a `NullPointerException`：

```
if ("myString".equals(someOtherString)) 
```

但我不能对整数做同样的事情，例如

```
if (5.equals(someOtherInteger)) 
```

我得到一个编译时错误。关于为什么做出这个设计决定的任何想法？或者任何可以解释它的资源？提前致谢。

**编辑**：`someOtherInteger`是一个`Integer`，不是一个`int`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-17T03:34:39.280

`String`在Java中一直是一个对象。字符串没有自动装箱，原则上也不可能。最近引入了从基元`int`到对象的自动装箱。`Integer`

问一下为什么尝试访问基元的成员变量不会调用自动装箱是有效的（`95.toString(radix)`实际上会很方便），但我想原因是它不被认为是一个可能的用例，因为几乎每个`wrappedPrimitive.method()`都有等效`WrapperClass.method( primitive )`版本。

`equals()`对于原始类型通常是不必要的，因为`==`它已经存在。但是，您确实为它提供了一个很好的案例作为 null-guard...`5 == integerInstance`将尝试拆箱实例，`NullPointerException`如果实例是，则抛出 a `null`，不幸的是。（一开始我并没有完全理解你的观点。）

也就是说，如果我们能听到目前或在引入自动装箱时从事 Java 工作的人关于他们是否考虑过这种功能，那将是非常酷的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-17T03:43:13.940

[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html)指定装箱转换只能在赋值转换、方法调用转换或强制转换期间发生。由于您既没有分配`5`给变量，也没有将其作为参数传递给方法，也没有显式地将其强制转换为`Integer`，因此不会为您自动装箱。

> 赋值转换（第 5.2 节、第 15.26 节）将表达式的类型转换为指定变量的类型。
> 
> 赋值转换可能会导致 OutOfMemoryError（**由于装箱转换**（第 5.1.7 节））、NullPointerException（由于取消装箱转换（第 5.1.8 节））或 ClassCastException（由于未经检查的转换（ §5.1.9)) 在运行时抛出。
> 
> 方法调用转换（第 5.3 节、第 15.9 节、第 15.12 节）应用于方法或构造函数调用中的每个参数，并且除了在一种情况下，执行与赋值转换相同的转换。
> 
> 方法调用转换可能会导致 OutOfMemoryError（**作为装箱转换的结果**（第 5.1.7 节））、NullPointerException（作为取消装箱转换的结果（第 5.1.8 节））或 ClassCastException（作为未经检查的转换的结果） (§5.1.9)) 在运行时抛出。

* * *

> 强制转换上下文允许使用以下之一：
> 
> ...
> 
> 装箱转换（§5.1.7）可选地后跟扩大参考转换（§5.1.5）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T03:26:39.847

您可以使用

```
if (someOtherInteger!=null && someOtherInteger == 5) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T03:39:33.877

我怀疑 autoboxing 没有为 literal 实现`5`，而它是为 string 实现的`myString`，作为一种安全措施。自动装箱一个带有双引号的句法结构是安全的`""`，因为引号不太可能是无意的，因此用户的意图很明确并且不会损害类型安全。

但是，文字`5`可能是用户的拼写错误——或者它可能是一个字符串，而不是一个整数。因此，为了保持在面向对象编程中使用之前必须声明变量以防止拼写错误（以及许多其他优点）（即使它是隐式的，如自动装箱）`5`的好处，不会自动装箱。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T03:28:14.933

`int`是一种原始类型，它本身不支持任何方法。要比较 2 `ints`，您只需使用以下`==`约定：

```
if(a == b) 
```

有一个[`Integer`](https://stackoverflow.com/questions/529457/performance-of-java-matrix-math-libraries)类是一个`int`支持一些其他方法调用的包装器

编辑：

根据您要比较的编辑，`Integer`但问题是文字 5 不是`Integer`您必须为其创建一个新整数。

```
Integer myInt = 5;
if(myInt.equals(someOtherInteger)) ... 
```

这种设计是由于原语没有任何方法这一事实所固有的。至于原语是否应该支持方法（或根本不存在）是关于 Java 是否是纯面向对象语言的争论的组成部分（由于原语存在这一事实，许多人说不）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T03:31:08.210

以下是关于不同比较的一些阅读：http: [//www.leepoint.net/notes-java/data/expressions/22compareobjects.html](http://www.leepoint.net/notes-java/data/expressions/22compareobjects.html)

不确定是否是内置设计拒绝`int`

如果你这样做

```
Integer s=5;
Integer d=5;
if(d.equals(s)){
    System.out.println("Fun");
} 
```

它工作得很好。

# javascript - 为什么我的 for 循环不适用于我的 Javascript 属性？

> ID：10184623
> 
> 赞同：5
> 
> 时间：2012-04-17T03:25:43.033
> 
> 标签：javascript, ecmascript-5

我创建了这个对象及其属性：

```
var obj = {};

Object.defineProperty( obj, "value", {
  value: true,
  writable: false,
  enumerable: true,
  configurable: true
});

var name = "John";

Object.defineProperty( obj, "name", {
  get: function(){ return name; },
  set: function(value){ name = value; }
}); 
```

然后我对它们调用一个 for 循环：

```
for ( var prop in obj ) {
  console.log( prop );
} 
```

根据我的教程，应该会产生以下结果：

```
value
name 
```

但相反，它只显示价值。为什么名字不显示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T03:29:48.477

`enumerable`in`defineProperty`的默认值为`false`; 不可枚举的属性不会出现在`for…in`循环中。（这就是`enumerable`标志的全部意义。）如果你也添加`enumerable:true`到你的第二个定义中，它会“修复”它。

查看[一些文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperty)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T03:30:45.947

由于 name 属性未定义为可枚举，因此将 name 定义设置为

```
Object.defineProperty( obj, "name", {
  enumerable: true,
  get: function(){ return name; },
  set: function(value){ name = value; }
}); 
```

它会出现。

# android - 从 Spinner 获取字符串

> ID：10184627
> 
> 赞同：0
> 
> 时间：2012-04-17T03:26:48.310
> 
> 标签：android, string, spinner, selecteditem

所以我一直在遵循一些关于类似问题的建议，但不知何故我无法进入它。我有一个名为“e”的微调器，当用户单击它下方的按钮时，我想从中检索选定的字符串。

我实现了这样的嵌套类：

```
class SelectedListener implements OnItemSelectedListener{
            public void onItemSelected(AdapterView<?> parent, View view, int pos, long id){
                String selected = parent.getItemAtPosition(pos).toString();
            }

            public void onNothingSelected(AdapterView parent){
                //does nothing
            }
        }
        e.setOnItemSelectedListener(new SelectedListener()); 
```

只是按照这里其他用户的建议和 android 开发人员教程，事情是，在此之后，如果我想将它保存到 String 变量中，我不知道应该进行哪个调用来检索它，如下所示：

```
String selected = //don't know what to put here 
```

希望已经足够清晰了。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T03:32:11.390

我相当确定：

```
e.getSelectedItem().toString() 
```

# objective-c - 设置吸气剂会做什么？

> ID：10184630
> 
> 赞同：0
> 
> 时间：2012-04-17T03:27:14.203
> 
> 标签：objective-c, syntax, setter, getter

首先，一些上下文：在回答关于 SO 的问题时，我遇到了一篇文章，其中作者一直试图设置一个语法类似于`[self.propertyGetter:newValue];`. 出于某种原因，它编译了，我心想，“这将构成对 nil 的调用，不是吗？”。所以，我的问题是，这到底为什么“有效”？（非常清楚，发帖人抱怨这没有效果，所以“工作”是指编译）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T03:40:15.127

您引用的代码是`[self.propertyGetter:newValue]`. 下面是 Objective-C 编译器如何解析它。

左括号之后的第一件事必须是消息的接收者。在该代码中，接收者是 的值`self.propertyGetter`。编译器转换`self.propertyGetter`为`[self propertyGetter]`. 所以我们可以重写你引用的代码`[[self propertyGetter]:newValue]`。

现在编译器需要找出消息的选择器。您通常会看到一个关键字选择器，例如`setStatusBarHidden:animated:`，它是一系列关键字后跟冒号。但事实证明，关键字可以是零长度的。所以冒号本身就是一个有效的关键字选择器。所以编译器会这样看：`[[self propertyGetter] :newValue]`. （使用长度为零的关键字几乎总是非常糟糕的风格。）

您可以使用该选择器声明一个实例方法。例如：

```
- (void):(NSObject *)newValue; 
```

如果`[self propertyGetter]`返回具有该方法的类的对象，则代码将编译并运行。

如果编译器看到*任何*具有类似名称的方法的类并`[self propertyGetter]`返回 type `id`，则代码将编译（因为是通配符类型，如果您尝试向其发送*任何*已知的消息选择器`id`，编译器不会抱怨）。但是，如果实际上不理解消息，应用程序将在运行时崩溃。*`[self propertyGetter]``:`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T03:31:24.977

这是因为默认情况下所有的 Objective-C 对象都是动态实体。它会编译，但会在运行时崩溃。

[来源](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocStaticBehavior.html)。*

# sql - 创建当属性变为负数时删除行的触发器[oracle sql]？

> ID：10184631
> 
> 赞同：1
> 
> 时间：2012-04-17T03:27:16.260
> 
> 标签：sql, oracle, triggers

我想创建一个触发器，当它的一个属性变为负数时将删除一行。到目前为止，我有这个，但它似乎不是有效的 sql：

```
CREATE OR REPLACE TRIGGER ZERO_COPIES_TRIGGER
after
update of counter_attribute
on my_table
referencing new as new
for each row when(new.copies < 0)
begin
  delete from my_table where my_table.id = :new.id;
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T03:59:04.567

这是行不通的。您不能对由行级触发器操作的表执行 DML。您将收到“变异表”错误。

要获得您想要的结果，最好的办法是有一个标志或指示列来标识*要删除*的记录。然后，有一个单独的作业或进程或任何实际执行删除的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T17:03:19.030

为了完整起见：另一种选择是有一个语句触发器，它扫描表然后执行删除，如下所示：

```
CREATE OR REPLACE TRIGGER ZERO_COPIES_TRIGGER
      AFTER UPDATE OF COUNTER_ATTRIBUTE ON MY_TABLE
BEGIN
  FOR aROW IN (SELECT ID
                 FROM MY_TABLE
                 WHERE COPIES < 0)
  LOOP
    DELETE FROM MY_TABLE
      WHERE ID = aROW.ID;
  END LOOP;
END ZERO_COPIES_TRIGGER; 
```

或者，如果您*真的*想找点乐子，您可以使用复合触发器来处理删除，而不需要进行表扫描，同时仍然避免可怕的“MUTATING TABLE”错误，如下所示：

```
CREATE OR REPLACE TRIGGER COMPOUND_ZERO_COPIES_TRIGGER
  FOR UPDATE OF COUNTER_ATTRIBUTE ON MY_TABLE
COMPOUND TRIGGER
  TYPE NUMBER_TABLE IS TABLE OF NUMBER;
  tblDELETE_IDS  NUMBER_TABLE;

  BEFORE STATEMENT IS
  BEGIN
    tblDELETE_IDS := NUMBER_TABLE();
  END BEFORE STATEMENT;

  AFTER EACH ROW IS
  BEGIN
    IF :NEW.COPIES < 0 THEN
      tblDELETE_IDS.EXTEND;
      tblDELETE_IDS(tblDELETE_IDS.LAST) := :NEW.ID;
    END IF;
  END AFTER EACH ROW;

  AFTER STATEMENT IS
  BEGIN
    IF tblDELETE_IDS.COUNT > 0 THEN
      FOR I IN tblDELETE_IDS.FIRST..tblDELETE_IDS.LAST LOOP
        DELETE FROM MY_TABLE
          WHERE ID = tblDELETE_IDS(I);
      END LOOP;
    END IF;
  END AFTER STATEMENT;
END COMPOUND_ZERO_COPIES_TRIGGER; 
```

分享和享受。

# git - git revert 提交/推送但保留更改

> ID：10184637
> 
> 赞同：23
> 
> 时间：2012-04-17T03:28:18.943
> 
> 标签：git, commit, revert

它是这样的：

*   我有我修改的文件 A 和 B

*   我只是假设提交并推送 A，但不小心同时提交并推送了 A 和 B

*   我做了一个“git push old-id:master”，所以在 github 上它显示“Master is now old-id”，其中 old-id 是我之前的最后一次提交，所以我认为它回到了我提交之前。

问题：

*   在我的本地，我如何撤消具有 A 和 B 的提交，只提交 A，只推送 A？

注意：我确实需要将 A 和 B 的更改保留在我的本地。最终结果应该是：

*   本地 - 新 A 和新 B
*   Github - 新A和旧B

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-17T03:31:08.523

```
$ git reset <old-id>    # Undo the commit after old-id
$ git add A             # stage A for a new commit
$ git commit            # make the new commit
$ git push              # push it 
```

# database - 如果我在同一事务中未提交的更新后阅读结果是什么

> ID：10184640
> 
> 赞同：1
> 
> 时间：2012-04-17T03:28:36.330
> 
> 标签：database

我正在使用带有 Java JPA 的 Google App Engine。隔离级别在事务内部是可序列化的；重复读取外部事务。

我搜索了很多文章，每个人都在谈论事务之间的行为，但没有人提到**在同一个事务中读取**。

例子 ：

```
/* data in User table with {ID=1,NAME='HANK'}  */

BEGIN;
UPDATE User SET name = 'MING' WHERE ID=1;
SELECT name FROM User WHERE ID = 1;
COMMIT; 
```

结果：仍然 {ID=1, NAME='HANK'}

我的问题：

1.  隔离级别设置是否会影响同一事务中的查询？
2.  同一笔交易的规则是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:37:36.343

在同一事务中完成的任何查询都将立即对其自身可见。在您的示例中，如果您读取 ID 为 1 的行，您将看到它已更新。不同之处在于其他用户如何受您的交易影响。根据您的隔离级别，其他用户可能会：

*   被阻止，其他用户会等到你提交/回滚
*   读取事务前的数据（快照隔离）
*   即使没有提交也可以读取最新的数据（读取未提交）

我只是触及了隔离级别的皮毛，已经有很多关于这个主题的书。

# java - 方法打印表格不正确

> ID：10184644
> 
> 赞同：0
> 
> 时间：2012-04-17T03:29:14.050
> 
> 标签：java

我想知道是否有人可以帮助我解决我遇到的一个小问题。

我正在尝试打印一个包含 100 个项目的数组，每行需要 10 个项目，之后它开始一个新行。我已经成功地做到了这一点，但是，每一列中的每一行都显示相同的数字。例如。我的输出是：

```
1 1 1 1 1 1 1 1 1 1
2 2 2 2 2 2 2 2 2 2 
```

当它应该显示为以下内容时：

```
1 2 3 4 5 6 7 8 9 10
11 12 13 14 15 16 17 18 19 20 
```

这是我用来打印表格的以下方法：

```
public static void printTable(int[] emirps) {
    for (int i = 0; i < 100; i++) {
        for (int j = 0; j < 10; j++) {
            // After 10 go to a new line
            System.out.printf("%d\t", emirps[i]);
        }
        System.out.println("");
    }
} 
```

如果有人能帮我查明我犯错的地方，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T03:33:17.587

`emirps[i]`您每次都通过内循环打印相同的内容。有几种方法可以解决这个问题。这是一个：

```
public static void printTable(int[] emirps) {
    for (int i = 0; i < 100; i += 10) {
        for (int j = 0; j < 10; j++) {
            // After 10 go to a new line
            System.out.printf("%d\t", emirps[i + j]);
        }
        System.out.println();
    }
} 
```

这是另一个（不是很优雅）：

```
public static void printTable(int[] emirps) {
    for (int i = 0; i < 100; ++i) {
        System.out.printf("%d\t", emirps[i]);
        if (i % 10 == 9) {
            System.out.println();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T03:33:09.640

您没有`j`在此代码中的任何地方使用索引。

以下是您应该如何打印：

`System.out.printf("%d\t", emirps[i+j]);`

请注意您现在如何在 print 语句中同时使用`i`和`j`索引。此外，为了让您的行偏移量正常工作，您应该`i`在循环的每一步增加 10。

或者，声明`emirps`为二维数组。那么签名`printTable()`将是：

`public static void printTable(int[][] emirps)`

在该设置中，打印的方式如下：

`System.out.printf("%d\t", emirps[i][j]);`

所以在第一个设置中，`i+j`一起索引到一个一维数组中。在第二个设置中，`i`是行和`j`列，一起索引到二维数组中。看起来您正在做一个一维数组，但另一个示例供您将来参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T03:37:19.793

这看起来像家庭作业，所以这里没有给你答案，而是给你一个提示：

对于第一个循环的第一次迭代，i = 0。在这种情况下，您将 j 从 0 增加到 9。请注意，i 始终保持不变。这是您打印第一行的时候。

一旦你完成了第二个 for 循环，i 增加 1 到，现在 i = 1。同样，你将 j 从 0 增加到 9，并且 i 保持在 1。这是你打印第二行的时候。

这会重复 100 次，因为 i 从 0 变为 99。

有两种方法可以解决这个问题：

1.  使用一个 for 循环，并确定何时打印行尾字符。
2.  使用两个 for 循环，每个循环最多 10 个。通过简单的乘法和加法计算您的索引。

您应该尝试并实现这两种方法。它将帮助您更好地理解循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T03:36:17.573

使用模运算符。每次你的数字可以除以 10 而没有余数时，你可以换行，因为你已经填满了这一行。您可以使用百分号 (%) 的“模运算符”获得余数。它可以像 / 一样使用，除了商不是结果，而是除法运算的余数是结果。

```
public static void main(String[] args)
{
    StringBuilder builder = new StringBuilder();
    for (int i = 0; i < 100; i++)
    {
        if (i != 0 && i % 10 == 0)
        {
            builder.append('\n');
        }
        builder.append(i + " ");
    }
    System.out.println(builder.toString());
} 
```

打印出来：

```
0 1 2 3 4 5 6 7 8 9 
10 11 12 13 14 15 16 17 18 19 
20 21 22 23 24 25 26 27 28 29 
30 31 32 33 34 35 36 37 38 39 
40 41 42 43 44 45 46 47 48 49 
50 51 52 53 54 55 56 57 58 59 
60 61 62 63 64 65 66 67 68 69 
70 71 72 73 74 75 76 77 78 79 
80 81 82 83 84 85 86 87 88 89 
90 91 92 93 94 95 96 97 98 99 
```

# c++-cli - DevExpress ExtraEditors 选中的组合框不同步？

> ID：10184647
> 
> 赞同：0
> 
> 时间：2012-04-17T03:29:46.527
> 
> 标签：c++-cli, devexpress, checked

我正在尝试使用两个 devExpress checkedComboBoxes（框）来维护一个列表及其反列表（即，两个组合框中的相同项目，并且必须仅在其中一个列表中检查它们）。

我正在使用 C++/CLI，所以对于我处理的每个盒子

```
EditValueChanged += gcnew System::EventHandler(this, &SelectionControl::exclBox_EditValueChanged); 
```

调用到

```
void
box_ToggleAntibox(
DevExpress::XtraEditors::CheckedComboBoxEdit^ box,
DevExpress::XtraEditors::CheckedComboBoxEdit^ antibox )
{
using namespace DevExpress::XtraEditors::Controls ;

cli::array<String ^> ^ sAnti = gcnew cli::array<String ^>(2*box->Properties->Items->Count) ;
int ii = 0;
String ^ delim = ", ";
for each (CheckedListBoxItem^ i in box->Properties->GetItems()) {
    if (i->CheckState==Windows::Forms::CheckState::Unchecked)
    {
        sAnti[ii] = i->Value->ToString();
        ++ii;
        sAnti[ii] = delim;
        ++ii;
    }
}

String ^ result = String::Concat(sAnti);
antibox->EditValue = result;

} 
```

正如 devExpress 文档似乎说要设置编辑值，而不是简单地遍历框列表并将反列表设置为 !Checked。

但是，它似乎不起作用（正确的项目被添加到文本窗口，但没有检查任何内容）。此外，如果我在事件完成后查看我的框，我发现文本窗口中的字符串值是正确的（反映了我选择的内容），但如果我打开它，则所有项目都被选中。

有人有什么建议我可以尝试吗？

设置每个项目的 CheckState::Checked 会更好吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T01:40:29.617

我花了一些时间与 DevExpress 支持人员交谈。简短的回答是，这应该有效——但对我们无效。您的里程可能会有所不同，但我们的解决方案是将两个组合框放在表单上的单独控件上。

# javascript - 使用 JQuery 创建唯一 ID

> ID：10184649
> 
> 赞同：0
> 
> 时间：2012-04-17T03:30:01.533
> 
> 标签：javascript, jquery

这个问题很可能是重复的（但我找不到），所以如果它是多余的，我深表歉意。我正在尝试使用 JQuery 的 .remove 函数来允许（显然）删除`li`我的静态 HTML 原型中的元素。与其为每个`li`我想删除的内容写一个 javascript 块，我想知道是否可以单独使用 JS 创建递增的 ID。（我正在使用与 HAML 和 SASS 一起使用的[服务）。](http://get-serve.com)这就是我所拥有的。

/view-file.html.haml

```
%ul
  %li#removeThis1
    %a.remover1{:src => "#"} Remove 
```

/application.js

```
...
$(".remover1").click(function () {
  $("li#removeThis1").fadeOut( function() { $(this).remove(); });
}); 
```

关于如何增加等的任何`.remover1`想法`.remover2`？`li##removeThis1`与`#removeThis2`等类似。

我需要所有这些都发生在页面加载时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T03:34:14.460

元素之间有祖先的关系，所以只要利用它对你有利。

```
 // don't bother numbering the class. Use a common class
$(".remover").click(function () {

       // find the closest ancestor with an ID that start with "removeThis"
    $(this).closest("li[id^=removeThis]")
           .fadeOut( function() { $(this).remove(); });
}); 
```

* * *

或者，如果您真的不需要祖先的 ID，也可以在那里使用一个类......

```
 // don't bother numbering the class. Use a common class
$(".remover").click(function () {

       // find the closest ancestor with the class "removeThis"
    $(this).closest(".removeThis")
           .fadeOut( function() { $(this).remove(); });
}); 
```

* * *

最终，如果您要使用 ID，您需要在服务器端生成它们，然后使用处理程序从元素中提取 ID 的数字部分，并将其连接到祖先的选择器中。

# php - 将数据从 MySQL 拉入 json 数组

> ID：10184655
> 
> 赞同：4
> 
> 时间：2012-04-17T03:30:37.567
> 
> 标签：php, mysql, json

我正在尝试使用 php 中的 json 从我的数据库中提取数据。我有一些元素需要具体说明，然后才能将它们发布在页面上。

我想从 mysql 中“获取”数据并将其返回到 json_encode。如何使用 SELECT 方法执行此操作。有些人使用了 PDO 方法，而其他人使用了 mysql_assoc，这让我很困惑。

例如，

我有以下行：'id'、'title'、'start'、'backgroundColor'...等。以及所有这些的默认值。($array[] = "someValue = default")

我希望它像这样导出：

```
array(
      'id' => 1,
      'title' => "someTitle",
      'start' => "2012-04-16",
      'backgroundColor' => "blue",
      'someValue' = > "default",
      ...
      ),   ....
 )); 
```

如果有人可以用最好的细节帮助我，我会很棒！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T03:48:00.467

如果您想使用 PDO 执行此操作，那么这里是一个示例：

```
<?php 
$dbh = new PDO("mysql:host=localhost;dbname=DBNAME", $username, $password);

$sql = "SELECT `id`, `title`, `time`, `start`, `backgroundColor` 
        FROM my_table";

$result = $dbh->query($sql)->fetchAll(PDO::FETCH_ASSOC);
//To output as-is json data result
//header('Content-type: application/json');
//echo json_encode($result);

//Or if you need to edit/manipulate the result before output
$return = [];
foreach ($result as $row) {
    $return[] = [ 
        'id' => $row['id'],
        'title' => $row['title'],
        'start' => $row['start'].' '.$row['time'],
        'backgroundColor' => $row['backgroundColor']
    ];
}
$dbh = null;

header('Content-type: application/json');
echo json_encode($return);
?> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T03:33:42.230

您不会“获取到 json 数组”。

您将数据库结果提取到 PHP 数组中，然后在提取完成后将该 php 数组转换为 json 字符串。

例如

```
$data = array();
while ($row = mysql_fetch_assoc($results)) {
   $data[] = $row;
}
echo json_encode($data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T03:40:08.817

你可以从mysql获取结果，然后将其格式化为json

```
 $array = array();
    while($row = mysqli_fetch_array($result))
    {
        array_push($array,$row);
    }
    $json_array = json_encode($array); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T03:36:23.050

[请在此处](http://dev.mysql.com/doc/refman/5.5/en/select.html)检查 SELECT 方法

一般来说，它看起来像这样

```
$data = array(); // result variable

$i=0

$query = "SELECT id,title,start,backgroundColor FROM my_table"; // query with SELECT

$result = mysql_query($query);

while($row = mysql_fetch_assoc($result)){ // iterate over results
      $data['item'][$i]['id'] = $row['id']; // rest similarly 
      ...
      ...

      $i++; 
}

header('Content-type: application/json'); // display result JSON format
echo json_encode(array(
     'success' => true,
     'data' => $data // this is your data variable
)); 
```

# html - 什么时候需要添加“宽度：100%；” 到您的网站？

> ID：10184661
> 
> 赞同：-1
> 
> 时间：2012-04-17T03:31:34.877
> 
> 标签：html, css, width

我只是坐在这里在一个小型网站上工作，我注意到添加 width:100% 会生成一个滚动条，您可以稍微浏览一下。这真的让我很生气。那么什么时候需要添加呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T04:09:46.000

width:100% 值使 div 或页面实际上是 100% 宽。这意味着如果您在 100% 宽的元素旁边有任何边距、填充或其他元素，则会有一个滚动条。

因此，为避免这种情况，请确保没有填充或宽度。

而当必须使用 width:100% 是一个很难回答的问题时，这完全取决于设计师和项目。

没有什么能强迫你使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:54:09.303

在大多数情况下，您不需要使用 100% 宽度。因为当你使用 div 时默认显示：block; 如果您不需要浮动属性，它会自动 100% 适合。

# jquery - jquery：下拉列表中未捕获的 SyntaxError

> ID：10184663
> 
> 赞同：0
> 
> 时间：2012-04-17T03:31:39.610
> 
> 标签：jquery, syntax-error

[我从这里](https://stackoverflow.com/questions/10183659/jquery-toggle-dropdown-menu-possibility)上一个问题的答案中得到了以下代码。我刚刚在 Chrome 中调试了我的代码，我得到了，`Uncaught SyntaxError: Unexpected token ILLEGAL on line 6`但是所有的括号都匹配，所以我有点困惑。

```
jQuery(document).ready(function () {
    $(".current a").mouseenter(function(){
       $(this).siblings("ul").show();
    }).mouseout(function(){
       $(this).siblings("ul").hide();
    });​
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T03:48:07.787

看起来很疯狂，上面的错误是由关闭后的额外行或空格引起的`;`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-17T03:41:37.363

```
$(document).ready(function () {
$(".current a").mouseenter(function(){
   $(this).siblings("ul").show();
}).mouseout(function(){
   $(this).siblings("ul").hide();
});​ 
```

});​</p>

用 $ 替换 jQuery

# excel - AppleScript 从 Excel 工作表中获取活动单元格的值

> ID：10184665
> 
> 赞同：1
> 
> 时间：2012-04-17T03:31:44.060
> 
> 标签：excel, applescript

试图从 Excel 工作表中获取当前突出显示的单元格的值

```
set x to null
tell application "Microsoft Excel"
    tell worksheet "Sheet1" of active workbook
       set x to value of active cell as string
       display dialog x
    end tell
end tell 
```

以上 AppleScript 将 x 设置为“缺失值”。我在这里做错了什么，还有其他方法可以获取活动单元格的值吗？

我正在为 MAC 版本 14.0.0 使用 Microsoft Excel 2011

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T05:12:37.210

如果您查看 excel 的 applescript 字典，您会看到“活动单元格”是应用程序的一个属性。它不是工作表或工作簿的属性。所以这行得通...

```
tell application "Microsoft Excel"
    set x to value of active cell as string
    display dialog x
end tell 
```

它也是一个窗口的属性，所以这也有效......

```
tell application "Microsoft Excel"
    tell window 1
        set x to value of active cell as string
        display dialog x
    end tell
end tell 
```

# visual-studio - 是否有适用于 Visual Web Developer 11 Beta 的 ISO 或 EXE 下载？

> ID：10184669
> 
> 赞同：1
> 
> 时间：2012-04-17T03:32:15.937
> 
> 标签：visual-studio, visual-web-developer, visual-studio-2012

我可以下载 Visual Web Developer 11 Beta ISO 或 EXE 吗？

我有一个非常糟糕的互联网连接，一直掉线，所以我想在朋友的地方下载它，如果有帮助的话，不要使用 Web 平台安装程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T03:37:44.003

如果您是 MSDN 订阅者，您应该能够从[MSDN 订阅者下载页面](http://msdn.microsoft.com/subscriptions/downloads/)下载 ISO 。但我想你不是，考虑到你在问这个问题！

不幸的是，我找不到在 Microsoft 网站上公开提供的 Visual Web Developer 11 Beta 的官方 ISO。

但是，您可以[在此处下载 Visual Studio 11 的 4 个版本中的任何一个的 ISO](http://www.microsoft.com/visualstudio/11/en-us/downloads#vs)，其中包括 Visual Web Developer 的所有功能。例如，[专业版可在此处获得](http://www.microsoft.com/visualstudio/11/en-us/downloads#professional)。下载量稍大，但如果互联网连接稳定，那应该不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:37:58.160

谢谢大家，但我在这里找到了它[http://www.microsoft.com/download/en/details.aspx?id=28975](http://www.microsoft.com/download/en/details.aspx?id=28975) VS11_BETA_ULT_ENU.iso 就是一个。

现在我已经全部启动并运行了我不确定我是否喜欢它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T03:39:13.567

您可以使用 Internet 下载管理器，即使您的连接断开，下载的部分也不会损坏。

# windows - 如何使用批处理根据 Windows 语言环境格式化日期？

> ID：10184672
> 
> 赞同：1
> 
> 时间：2012-04-17T03:32:36.587
> 
> 标签：windows, date, batch-file, format, locale

我有一个将比较日期的批处理文件。问题是我们需要在不同的设置中测试它，不同的语言意味着不同的日期格式。

例如获取 Test.log 文件的修改日期（不知道语言环境日期格式是什么）

```
for %%i in (c:\Test.log) do (
call :testprocess %%~ti
) 
```

我想在 yyyy/MM/dd 中格式化 Test.log 的修改日期。

在不知道语言环境日期格式的情况下如何实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:09:04.303

我已经找到了解决方案。我失去了我的参考链接。所以我调整了一些代码并根据我的需要使用它。

```
 for %%i in (c:\Test.log) do (
    call :testprocess %%~ti
    )

    :testprocess
    set temptime=%1 
```

在注册表中搜索关键字 International 获取 iDate 和 sDate 的值。

```
 set KEY_DATE="HKCU\Control Panel\International"
    FOR /F "usebackq skip=4 tokens=1,3" %%A IN (`REG QUERY %KEY_DATE% /v iDate 2^>nul`) DO set iDate=%%B
    FOR /F "usebackq skip=4 tokens=1,3" %%A IN (`REG QUERY %KEY_DATE% /v sDate 2^>nul`) DO set sDate=%%B 
```

我使用[sDate](http://technet.microsoft.com/en-us/library/cc959650.aspx)值作为 delims= 并使用[iDate](http://technet.microsoft.com/en-us/library/cc978637.aspx)作为语言环境日期的格式。

```
 FOR /F "tokens=1-3 delims=%sDate%" %%A IN ("%temptime%") DO (
        IF "%iDate%"=="0" (
            SET fdd=%%B
            SET fmm=%%A
            SET fyyyy=%%C
        )
        IF "%iDate%"=="1" (
            SET fdd=%%A
            SET fmm=%%B
            SET fyyyy=%%C
        )
        IF "%iDate%"=="2" (
            SET fdd=%%C
            SET fmm=%%B
            SET fyyyy=%%A
        )
    )

    echo %fyyyy%/%fMM%/%fdd% 
```

你也可以参考ff。用法在[这里](http://www.robvanderwoude.com/datetiment.php)。

希望这对你们有帮助。

# android - 在带有 xml 布局的视图中画一条线

> ID：10184675
> 
> 赞同：0
> 
> 时间：2012-04-17T03:33:00.970
> 
> 标签：android, layout

我想知道是否可以在带有 xml 布局的视图上的任何位置画一条线。

我的应用程序是这样的。当点击其中一个按钮时，我需要从按钮的边框到图像画一条线。简单地说，将创建的线将是某种箭头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T04:37:34.583

创建任何布局并在每个布局之间提供一个小边距。用一些颜色填充边缘间隙，这会给你一条线。

# c++ - 在 C++ 中继承时出错

> ID：10184676
> 
> 赞同：-1
> 
> 时间：2012-04-17T03:33:04.740
> 
> 标签：c++, inheritance

```
class RandomFleet : public PlaceFleet
{ 
```

这是我的 RandomFleet，需要从 Placefleet 继承。（这是在 RandomFleet.h 中）

我的错误：无效使用未定义类型'class Battleships::PlaceFleet'

我已经包含了“PlaceFleet.h” 我已经尝试过 class Battleships::RandomFleet : public BattleShips::PlaceFleet

我不知道为什么它不能正确继承。

**编辑：**也不是 PlaceFleet 和 RandomFleet 都是“战舰”命名空间的一部分 - 我不是“使用命名空间战舰”所以我怀疑这与它有关吗？

**用代码编辑：**

```
#ifndef PLACEFLEET_H_
#define PLACEFLEET_H_
#include"Place.h"
#include"Board.h"
class Battleships::PlaceFleet
{ //Functions and variables };
#endif 
```

//上面是 PlaceFleet.h，下面是 RandomFleet.h

```
#ifndef RANDOMFLEET_H_
#define RANDOMFLEET_H_
#include"PlaceFleet.h"
class RandomFleet : public PlaceFleet
{//This is where compiler shows error
//Functions and variables
};
#endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T03:38:45.500

这是您应该遵循的模板：

```
// PlaceFleet.h
#ifndef PLACEFLEET_H_
#define PLACEFLEET_H_

class PlaceFleet {

};

#endif

// RandomFleet.h
#ifndef RANDOMFLEET_H_
#define RANDOMFLEET_H_

#include "PlaceFleet.h"

class RandomFleet : public PlaceFleet {

};

#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T03:59:39.527

那是因为我没有使用

```
namespace Battleships
 {
   //classes here
 } 
```

（我试图做类战舰::PlaceFleet）

# vb.net - 使用 vb.net 在 Web 服务器上编辑 TXT 文件

> ID：10184680
> 
> 赞同：0
> 
> 时间：2012-04-17T03:33:20.310
> 
> 标签：vb.net, text, edit

我是编程新手，特别是 vb.net。

我正在为客户创建一个 Flash 全动画网站，该网站从外包（在同一网络主机上）读取其文本和图像。

他们要求一个管理页面来编辑文本和图像。

我正在考虑制作一个将文本文件读入动态文本框的 asp.net 页面。用户可以对其进行编辑然后保存，以便 Flash 播放器读取新文本。

我的问题是，我需要使用授权用户名和密码创建 FTP 连接吗？

由于asp.net网页将在同一台服务器上，它可以打开txt文件并对其进行编辑和覆盖而不需要FTP连接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T04:05:09.577

就 ASP.Net 引擎可以访问文件夹和文件而言，我认为您可以使用纯 IO 来实现这一点。

看看[这个 VB.Net 代码](http://www.freevbcode.com/ShowCode.asp?ID=4492)以供参考。

[这](http://www.codeproject.com/Articles/18072/Allow-your-ASP-NET-to-Access-your-Resources)可能有助于授予对 ASP.Net 帐户的访问权限。

[这里](https://stackoverflow.com/questions/1479711/asp-net-reading-and-writing-to-the-file-system-outside-the-application)提到了另一种方法

# python - 构造日期时间 obj 的问题？

> ID：10184681
> 
> 赞同：0
> 
> 时间：2012-04-17T03:33:28.407
> 
> 标签：python, datetime

我正在尝试制作一个与当前日期具有相同年份和月份的对象，但将日期更改为该月的不同日期。

```
from datetime import timedelta, date, datetime

whole = date.today()
wholestr= str(whole)
vali = wholestr.split('-')
year=int(vali[0])
month=int(vali[1])
day=int(vali[2])
sub = datetime.date(year,month,16)
print sub 
```

这里它说 ints 在构造时工作，但我收到一个错误，说它需要一个 datetime.date obj 而不是 ints。

[http://docs.python.org/library/datetime.html#date-objects](http://docs.python.org/library/datetime.html#date-objects)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T03:38:14.417

我相信您的问题是`datetime.date`当您只想拨打`date`倒数第二行时您会拨打电话。更改为仅使用`date`给了我这个结果：

```
>>> from datetime import timedelta, date, datetime
>>> whole = date.today()
>>> wholestr = str(whole)
>>> vali = wholestr.split('-')
>>> year = int(vali[0])
>>> month = int(vali[1])
>>> day = int(vali[2])
>>> sub = date(year, month, 16)
>>> sub
datetime.date(2012, 4, 16)
>>> print sub
2012-04-16 
```

或者，您可以`datetime`像这样调用：

```
>>> datetime(year, month, 16)
datetime.datetime(2012, 4, 16, 0, 0) 
```

就个人而言，这就是为什么我总是喜欢只做`import datetime`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T03:41:53.283

你的问题很简单：

```
from datetime import [some items including] datetime 
```

导入完成后，`datetime`指的是以前称为的`datetime.datetime`，`datetime.date`否则称为`datetime.datetime.date`。

您可以使用`date`（由于您导入了它，现在指的是其他情况下的内容`datetime.date`）或仅使用`import datetime`并限定所有名称，例如，`whole = datetime.date.today()`等等。我自己更喜欢后者，因为否则很容易迷路，但这是个人喜好。

# android - 将 TextView 对象动态添加到 Fragment

> ID：10184683
> 
> 赞同：4
> 
> 时间：2012-04-17T03:33:45.713
> 
> 标签：android, android-fragments, dynamic, textview

当它们在我的 XML 中静态定义时，我已经能够使用 Fragment 中的 TextView 元素。但是当我尝试动态/编程创建它们时，我看不到任何显示。我已经创建了一个我遇到的问题的简单示例。

这个有效，我看到屏幕更新了。

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) 
    {
        View v = inflater.inflate(R.layout.hello_world, container, false);  
        TextView tv = (TextView)v.findViewById(R.id.text);
        tv.setText("Fragment #" + mNum);
        tv.setBackgroundDrawable(getResources().getDrawable(android.R.drawable.gallery_thumb));
        return v;
    } 
```

这个不行 XML 文件 diagtextvertical.xml 就是这样：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    >
</LinearLayout> 
```

代码如下。

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
    Bundle savedInstanceState) 
{
       //good View v = inflater.inflate(R.layout.diaglist, container, false);   
       View v = inflater.inflate(R.layout.diagverticaltext, container, false);  
       mycontainer = container;

       LinearLayout l = (LinearLayout)inflater.inflate(R.layout.diagverticaltext, container, false);
       TextView tv = new TextView(container.getContext());
       tv.setText("Testing...");
       l.addView(tv);
       tv = new TextView(container.getContext());
       tv.setText("Testing1...");
       l.addView(tv);
       tv = new TextView(container.getContext());
       tv.setText("Testing2...");
       l.addView(tv);
        return v;
} 
```

我曾尝试使用 getActivity() 代替 container.getContext()，但没有运气。我不清楚如何将布局映射到实际的视图实例——这与在 Activity 中执行此操作不同。

我的问题还有第二部分。我的实际目标是根据轮询数据异步更新视图，所以我遇到的一个问题是，当我在自己的回调中调用时，如何获得 ViewGroup 和充气器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:31:02.780

我是 android 开发的新手，但我认为你应该返回`l`而不是`v`在你的 onCreateView 中，或者你应该将 TextViews 添加到`v`.

# sencha-touch - 在 Dataview Sencha Touch 2 中创建 DataItem

> ID：10184684
> 
> 赞同：1
> 
> 时间：2012-04-17T03:33:53.690
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我需要创建一个具有以下结构的数据视图组件

[结构](http://desmond.imageshack.us/Himg338/scaled.php?server=338&filename=imgdj.png&res=landing)

我学会了如何创建简单的文本组件，但这种结构比较困难。我使用此代码，但只是名称字段

```
Ext.define('DEMO.view.product.ListItem', {
extend: 'Ext.dataview.component.DataItem',
xtype: 'product-list-item',
config: {
    cls: 'product-list-item',
    dataMap: {
        getName: {
            setHtml: 'name'
        }
    },
    name: {
        cls: 'x-name',
        flex: 1
    },
    layout: {
        type: 'hbox',
        align: 'left'
    }
},
applyName: function(config){
    return Ext.factory(config, Ext.Component, this.getName());
},
updateName: function(newName, oldName) {
    if (newName) {
        this.add(newName);
    }

    if (oldName) {
        this.remove(oldName);
    }
} 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:45:03.517

只需要添加其他组件作为名称。例如，

```
Ext.define('App.view.UserItem', {
  extend: 'Ext.dataview.component.DataItem',
  xtype: 'useritem',
  config: {
    cls: 'user-item',
    firstName: { cls: 'first-name', flex: 1 },
    lastName: { cls: 'last-name', flex: 2 },
    layout: { type: 'hbox', align: 'center' },
    dataMap: {
      getFirstName: { setHtml: 'firstName' },
      getLastName: { setHtml: 'lastName' }
    }
  },

  applyFirstName: function(config) {
    return Ext.factory(config, Ext.Component, this.getFirstName());
  },

  updateFirstName: function(newFirstName, oldFirstName) {
    if(newFirstName) this.add(newFirstName);
    if(oldFirstName) this.remove(oldFirstName);
  },

  applyLastName: function(config) {
    return Ext.factory(config, Ext.Component, this.getLastName());
  },

  updateLastName: function(newLastName, oldLastName) {
    if(newLastName) this.add(newLastName);
    if(oldLastName) this.remove(oldLastName);
  }
}); 
```

更多详情，请访问[http://www.sencha.com/blog/dive-into-dataview-with-sencha-touch-2-beta-2/](http://www.sencha.com/blog/dive-into-dataview-with-sencha-touch-2-beta-2/)

# python - 有没有办法确定传递给 Hadoop/Dumbo/Mrjob 中映射作业的文件名？

> ID：10184692
> 
> 赞同：1
> 
> 时间：2012-04-17T03:35:16.160
> 
> 标签：python, hadoop, mrjob

全部，

我正在创建一个接口来处理一些海量数据并生成 arff 文件以进行一些机器学习。我目前可以收集这些功能 - 但我无法将它们与派生它们的文件相关联。我目前正在使用 Dumbo

```
def mapper(key, value):
    #do stuff to generate features 
```

是否有任何方便的方法来确定打开的文件名并将其内容传递给映射器函数？

再次感谢。-山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:17:56.250

[如此处](https://github.com/klbostee/dumbo/wiki/Running-programs)所述，您可以使用 -addpath yes 选项。

> -addpath 是（将每个输入键替换为由相应输入文件的路径和原始键组成的元组）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:27:56.653

If you're able to access the job configuration properties, then the `mapreduce.job.input.file` property should contain the file name of the current file.

I'm not sure how you get at these properties in Dumbo/Mrjob though - the docs specify that periods (in the conf names) are replaced with underscores, and then looking through the source for PipeMapRed.java, looks like everything single job conf property is set as a env variable - so try and access an env variable named `mapreduce_job_input_file`

[http://hadoop.apache.org/mapreduce/docs/r0.21.0/mapred_tutorial.html#Configured+Parameters](http://hadoop.apache.org/mapreduce/docs/r0.21.0/mapred_tutorial.html#Configured+Parameters)

# xslt - 如何使用 XSLT 创建超链接？

> ID：10184694
> 
> 赞同：7
> 
> 时间：2012-04-17T03:35:33.207
> 
> 标签：xslt

我是 XSLT 的新手。我想使用 XSLT 创建一个超链接。应该是这样的：

阅读我们的**隐私政策。**

“隐私政策”是链接，单击此链接后，应重定向到示例“www.privacy.com”

有任何想法吗？:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-17T04:02:44.627

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <html>
   <a href="www.privacy.com">Read our <b>privacy policy.</b></a>
  </html>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于*任何*XML 文档（未使用）时，会产生想要的结果**：

```
<html><a href="www.privacy.com">Read our <b>privacy policy.</b></a></html> 
```

**这由浏览器显示为**：

阅读我们的**隐私政策。**

**现在想象在 XSLT 样式表中没有任何内容是硬编码的——而是数据在源 XML 文档中**：

```
<link url="www.privacy.com">
 Read our <b>privacy policy.</b>
</link> 
```

**然后这个转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="link">
  <a href="{@url}"><xsl:apply-templates/></a>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于上述 XML 文档时，会产生所需的正确结果**：

```
<a href="www.privacy.com">
 Read our <b>privacy policy.</b>
</a> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-15T20:04:18.290

如果您想从 XML 文件中读取超链接值，这应该可以：

假设：**href**是 XML 特定元素的属性。

```
 <xsl:variable name="hyperlink"><xsl:value-of select="@href" /></xsl:variable>
 <a href="{$hyperlink}"> <xsl:value-of select="@href" /></a> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-17T03:41:36.670

如果您想在 XSLT 中拥有超链接，那么您需要使用 XSLT 创建 HTML 输出。在 HTML 中，您可以像这样创建超链接

```
<a href="http://www.yourwebsite.com/" target="_blank">Read our privacy policy.</a> 
```

在此，整个文本成为指向 www.yourwebsite.com 的超链接

# objective-c - 从其他类访问 int 变量

> ID：10184697
> 
> 赞同：0
> 
> 时间：2012-04-17T03:35:43.990
> 
> 标签：objective-c, xcode, cocoa

我有两个窗口，我的主窗口“窗口”和“帮助窗口”都在我的 App Delegate 中。在我的主窗口中，它的视图是子类的，我想在其中绘制一个矩形。我的帮助窗口也有一个矩形，但上面有一个 NSTracker。我想要做的是在我的窗口子类中绘制我的矩形，x 和 y 坐标等于我的 NSTracker 位置。我遇到的问题是当我尝试输入坐标时它崩溃了，有什么想法我可能做错了吗？谢谢

//我的窗口子类叫做CutoutView。这一切都在draw rect中

```
AppDelegate *controller = [[[NSApp delegate] window] contentView];

        xValue = controller.mouseLoc.x;
        yValue = controller.mouseLoc.y;

        NSRectFillUsingOperation(NSMakeRect(xValue,yValue, 600, 400), NSCompositeClear);
        [self update]; 

- (void)update
{
    NSLog(@"test");
    [self setNeedsDisplay:YES];
} 
```

//我的AppDelegate和tracker helpView是对我的第二个窗口“Help Window”视图的引用

```
-(void)updateTrackingAreas
{
    if(trackingArea != nil) {
        [self.helpView removeTrackingArea:trackingArea];
        [trackingArea release];
    }

    opts = (NSTrackingActiveAlways | NSTrackingMouseEnteredAndExited | NSTrackingMouseMoved);

    trackingArea = [ [NSTrackingArea alloc] initWithRect:[self.helpView bounds]
                                                 options:opts
                                                   owner:self
                                                userInfo:nil];
    [self.helpView addTrackingArea:trackingArea];
    }

    -(void)mouseMoved:(NSEvent *)theEvent
    {
        mouseLoc = [NSEvent mouseLocation];
        NSLog(@"mouseMoved: %f %f", mouseLoc.x, mouseLoc.y);

    } 
```

在我的 CutoutView 中，我是否因为 AppController 在不同的窗口“helpWindow”中而弄错了？还是与我的 int 值有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:07:11.860

您的代码有很多问题，很明显您从根本上误解了一些基本概念。

首先，您声明此代码在您的`drawRect:`方法中；

```
AppDelegate *controller = [[[NSApp delegate] window] contentView];

xValue = controller.mouseLoc.x;
yValue = controller.mouseLoc.y;

NSRectFillUsingOperation(NSMakeRect(xValue,yValue, 600, 400), NSCompositeClear);
[self update]; 
```

有几个明显的缺陷。首先，当你调用的方法 ( ) 返回一个时，你为什么要声明`controller`它是类型？`AppController*``-contentView``NSView`

你`AppController`不是一个视图（至少它不应该是！），所以你应该这样声明对象：

```
NSView* mainView = [[[NSApp delegate] window] contentView]; 
```

如果您确实将视图用作控制器，那么这是完全错误的。请参阅下面的关于 MVC 的说明。

您没有指定`mouseLoc`财产的来源。我们需要看看这是在哪里声明的，因为这会影响它是否有问题。

您的绘图代码调用`[self update]`，它只是告诉视图重绘自身。这将导致无限循环，因为每次绘制视图时都会强制重绘。你*永远不*`setNeedsDisplay:`应该从里面打电话`drawRect:`。

即使进行了这些更改，这段代码的结构也很糟糕，设计也被破坏了。

就目前而言，您的代码违反了模型-视图-控制器模式。一个视图不应该知道其他视图。您需要重组事物，以便您的视图显示控制器的属性，而无需了解其他视图。这意味着您必须将鼠标位置存储在控制器（或模型对象）中，并使用某种方法让视图访问该信息，最好是数据源协议或类似的。在[我对另一个问题的回答中，](https://stackoverflow.com/a/8264252/50122)我举了一个例子来说明如何做到这一点。

您需要阅读[Cocoa 绘图指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaDrawingGuide/Introduction/Introduction.html)。您还需要学习更多[核心 Cocoa 概念](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/Introduction/Introduction.html#//apple_ref/doc/uid/TP40002974)，因为很明显您误解了 Cocoa 应该如何工作。

# c# - 如何使用 C# 为 Outlook 配置缓存交换模式？

> ID：10184702
> 
> 赞同：2
> 
> 时间：2012-04-17T03:36:20.353
> 
> 标签：c#, .net, outlook, ms-office, office-interop

我正在开发一个需要为 Outlook 配置缓存交换模式的工具。我尝试干预注册表，但这似乎不是一个好方法，因为在 Outlook 2010 中它是非常不可预测的。现在，我正在研究使用 Outlook 主互操作程序集或组策略程序集。我可以找到读取当前配置但无法设置它们的方法。有没有办法做到这一点？有没有其他方法可以实现相同的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-07T21:50:31.203

You can use [Redemption](http://www.dimastr.com/redemption/) and set the [RDOExchangeMailboxStore](http://www.dimastr.com/redemption/rdostore.htm#RDOExchangeMailboxStore).IsCached property.

# javascript - 在 Firefox 中使用 Javascript/JQuery Mouseover 淡出（不断重复）

> ID：10184707
> 
> 赞同：0
> 
> 时间：2012-04-17T03:36:49.467
> 
> 标签：javascript, jquery

我正在尝试使用 JS/JQuery 制作将淡出然后淡入不同数据（在本例中是图片）的图块，然后当您将鼠标移开时将其反转。现在我的代码在 Chrome 中运行良好，但是当我在 FireFox 中对其进行测试时，它会继续执行淡入/淡出命令。我查找了人们使用代码的类似情况，`$(this).stop().fadeOut(function()`但由于我正在执行多个淡入淡出并加载信息，因此无法正确执行动画。有谁知道解决这个问题？

```
 <script>
$(document).ready(function()
{
    var hov = false;
    $(".previewBox").mouseenter(function()
    {
        if(hov === false)
        {
            hov = true;
            $(this).fadeOut(function() 
            { 
                $(this).load(function() 
                { 
                    $(this).fadeIn(); 
                }); 
                $(this).attr("src", "Images/Portfolio/Art_Bike_Flip.png"); 
            });
        };
    });

    $(".previewBox").mouseleave(function()
    {
        if(hov === true)
        {
            hov = false;
            $(this).fadeOut(function()
            {
                $(this).load(function()
                {   
                    $(this).fadeIn();
                });
            $(this).attr("src", "Images/Portfolio/Art_Bike_Preview.png");
            }); 
        };
    });
});
</script>`enter code here` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:52:38.343

这里有几个问题。首先`.load`不是检测图像加载的可靠方法。某些浏览器在缓存图像时不会触发加载事件，因此脚本将失败。您需要使用类似`waitForImages`or的插件`imageLoaded`。

[https://github.com/alexanderdickson/waitForImages](https://github.com/alexanderdickson/waitForImages)我推荐这个。

也`.stop()`可以很好地满足您的需求，如果它似乎在某些情况下取消了淡入淡出，请尝试`.stop(true, true)`，它应该可以很好地制作动画，即使加载数据和多个淡入淡出也是如此。您可能需要对其进行调整，以便仅将停止命令放置在最后一个渐变发生时。

当你只需要一个时，你也在制作大量的 jQuery 对象。将其限制为一个对象将使您的脚本更加高效。

```
var previewBox = $('.previewBox'); 
```

然后你可以在任何地方使用那个：

```
previewBox.mouseenter(function()
{
   if(hov === false)
   {
      hov = true;
      previewBox.stop().fadeOut(function(){
           previewBox.imagesLoaded(function... 
```

在您使用一个类的多个实例的情况下，您需要将您的事件彼此隔离。你可以这样做`.each`

```
$('.previewBox').each(function(){
     var previewBox = $(this);
     previewBox.mouseenter(function(){ .... 
```

通过将所有当前逻辑包装在 a 中，`.each`您将避免元素之间的事件交互。通过这种方式，事件`mouseenter mouseleave`和附加的逻辑将隔离绑定到具有该类的元素的每个实例，而不是绑定到该类的所有元素。

# c# - 通过 URL 检查文件的内容类型？

> ID：10184713
> 
> 赞同：0
> 
> 时间：2012-04-17T03:37:47.017
> 
> 标签：c#, mime-types, content-type, httpwebresponse

我正在开发一个从不同地方下载各种媒体的应用程序——其中很多是用户输入的。我发现在 http 响应中发现的很多内容类型都是垃圾。似乎主要用于视频。所以一个例子是网络上某个地方的 .wmv 文件，但是当我去抓取它时，它说它的内容类型是文本/纯文本。

除了这个响应内容类型之外，还有其他方法可以检查文件类型吗？我正在阅读一些关于文件幻数的信息，但我不确定它有多可靠......也许它比响应内容类型更可靠？

建议或想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:47:11.453

唯一万无一失的方法是实际尝试打开文件（使用您的应用程序）并查看它是否被正确解析。

但是，如果您想要一个可以使用的 API，它将尝试从给定的数据中确定正确的 MIME 类型，您可以使用[FindMimeFromData](http://msdn.microsoft.com/en-us/library/ms775107%28v=vs.85%29.aspx)。虽然这是本机 Win32 函数，但您仍然可以通过[p/invoke](http://www.pinvoke.net/default.aspx/urlmon.findmimefromdata)使用它。

# python - 寻找更优雅的解决方案

> ID：10184714
> 
> 赞同：2
> 
> 时间：2012-04-17T03:37:51.007
> 
> 标签：python

> 返回数组中数字的总和，除了忽略以 6 开头并延伸到下一个 7 的数字部分（每个 6 后面至少有一个 7）。如果没有数字，则返回 0。
> 
> ```
> sum67([1, 2, 2]) ? 5
> sum67([1, 2, 2, 6, 99, 99, 7]) ? 5
> sum67([1, 1, 6, 7, 2]) ? 4 
> ```

```
def sum67(nums):
    dontadd = 0
    sum = 0
    for i in range(0, len(nums)):
        if dontadd == 0:
            if nums[i] == 6:
                dontadd = 1
            else:
                sum += nums[i]
        else:
            if nums[i] == 7:
                dontadd = 0
            else:
                pass# nothing happens. It is useful as a placeholder when a statement is required syntactically
    return sum 
```

从codingbat 中寻找更优雅的解决方案。这个答案似乎并不直观

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T03:57:15.697

如果我们可以只删除我们不想要的元素，那么我们可以使用简单的求和。这是一个例子：

```
def sum67(nums):
    nums=nums[:]
    while 6 in nums:
        i=nums.index(6)
        j=nums.index(7,i)
        del nums[i:j+1]
    return sum(nums) 
```

首先，我们`nums=nums[:]`用来制作副本。调用者可能不希望`nums`改变。

`nums.index(6)`查找值为 6 `nums.index(7,i)`的第一个元素的索引。查找 index 之后值为 7 的第一个元素的索引`i`。`del nums[i:j+1]`然后删除从`i`to范围内`j`的元素，包括 at 的元素`j`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T04:04:39.197

我最喜欢 Python 的一点是它可以很容易地解决问题。

```
def skip67(seq):
    skipping = False
    for value in seq:
        skipping = skipping or value == 6
        yield 0 if skipping else value
        skipping = skipping and value != 7

def sum67(seq):
    return sum(skip67(seq))

>>> sum67([1, 2, 2])
5
>>> sum67([1, 2, 2, 6, 99, 99, 7])
5
>>> sum67([1, 1, 6, 7, 2])
4 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T03:46:22.493

这还不错（你可能会争辩说它试图太聪明了）。

```
>>> def sum67(nums):
...     while 6 in nums:
...         index = nums.index(6)
...         while nums.pop(index) != 7:
...             pass
...     return sum(nums)
... 
>>> sum67([1, 2, 3])
6
>>> sum67([1, 2, 2, 6, 99, 99, 7])
5
>>> sum67([1, 1, 6, 7, 2])
4
>>> sum67([1, 2, 2, 6, 99, 99, 7, 8, 1, 6, 0, -1000, 7, 2])
16 
```

这是一个非常愚蠢的（不适用于负数）

```
>>> import re
>>> def sum67(nums):
...     return sum(int(j) for j in re.sub(r'6\d*?7', '', ''.join((str(i) for i in nums))))
>>> sum67([1, 2, 3])
6
>>> sum67([1, 2, 2, 6, 99, 99, 7])
5
>>> sum67([1, 2, 2, 6, 99, 99, 7, 8, 1, 6, 0, 7, 2])
16 
```

请不要写这样的代码：p

在我独自离开之前，还有一个更糟糕的班轮：

```
>>> def sum67(nums):
...     return sum(i if i != 6 else -sum(nums[pos+1:nums.index(7,pos)+1]) for pos, i in enumerate(nums))
... 
>>> sum67([1, 2, 2, 6, 99, 99, 7])
5
>>> sum67([1, 2, 2, 6, 99, 99, 7, 8, 1, 6, 0, -1000, 7, 2])
16 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-17T05:25:10.560

```
def sum67(L):
    it = iter(L)
    return sum(all(i!=7 for i in it) if i == 6 else i for i in it) 
```

如果您对它的工作原理感兴趣，可以使用更易读的版本：

```
def slice67(L):
    it = iter(L)

    for i in it:
        if i != 6:
            yield i
        else:
            while next(it, 7) != 7:
                pass

print sum(slice67([1, 2, 2])) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-17T03:46:44.063

```
def sum67(nums):
  i=0
  sum=0
  n=len(nums)
  while i<n:
    if nums[i]==6:
      i=nums.index(7,i)
    else:
      sum += nums[i]
    i+=1
  return sum 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-17T03:46:15.437

此版本不修改列表。

```
def sum67(xs):
  xs = iter(xs)
  s = 0
  for x in xs:
    if x == 6:
      while x != 7:
          x = xs.next()
    else:
      s += x
  return s 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-17T04:02:10.700

我的解决方案与 OP 并没有太大的不同，但总的来说，我喜欢总是在那里进行加法操作并且只是有逻辑将“accum”的值在 1 和 0 之间切换的想法。

```
def sum67(nbrs):
    total = 0
    accum = 1
    for nbr in nbrs:
        if nbr==6:
            accum=0
        total += nbr*accum
        if accum==0 and nbr==7:
            accum=1
    return total 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-17T05:44:51.427

这个怎么样？

```
>>> def sum67(l):
...     sum = 0
...     add = True
...     for i in l:
...         add = add and (i != 6)
...         sum += add and i or 0
...         add = add or i == 7
...     return sum
... 
>>> print sum67([1, 2, 3]) 
6
>>> print sum67([1, 2, 2, 6, 99, 99, 7]) 
5
>>> print sum67([1, 1, 6, 7, 2]) 
4
>>> print sum67([1, 2, 2, 6, 99, 99, 7, 8, 1, 6, 0, -1000, 7, 2])
16 
```

它利用了 Python 将布尔表达式计算为决定结果的第一个操作数的值这一事实，例如，在`sum += add and i or 0`, 如果`add`是`False`，它进入该`or`部分并计算为`0`，如果`add`是`True`，它将计算为`i`。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-17T04:02:39.080

这是一个可能更容易理解的版本：

```
def sum67(nums):
    found6 = False
    result = 0
    for n in nums:
        if n==6:
            found6 = True
            continue
        if n==7 and found6:
            found6 = False
            continue
        if not found6:
            result += n
    return result 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-10-28T14:39:29.973

具有列表理解的单行：

`def sum67(nums): return sum([x for index, x in enumerate(nums) if (((nums[(index - nums[index::-1].index(6)):].index(7) + (index - nums[index::-1].index(6))) < index) if (6 in nums[:index+1]) else True)])`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-10-24T22:09:48.273

```
def sum67(nums):
  while 6 in nums:
    for x in nums[nums.index(6):]:
      nums.remove(x)
      if x == 7:
        break
  return sum(nums) 
```

# php - node.js 中的基本 smtp 服务器

> ID：10184720
> 
> 赞同：2
> 
> 时间：2012-04-17T03:38:53.893
> 
> 标签：php, sockets, node.js, tcp

我正在尝试在 node.js 中编写一个愚蠢（无脑）的 smtp 服务器，作为测试其他应用程序的存根服务器。

我有一组基本的响应，它适用于`telnet`.

但是，当我的 php/Codeigniter 应用程序使用它时，它运行得如此缓慢以至于毫无用处，并且我偶尔会遇到`fwirite() broken socket`错误。

*   php 应用程序使用真正的 smtp 服务器运行良好
*   使用 telnet 时 node.js 应用程序运行良好

我错过了关键或明显的步骤吗？我处理不当的套接字或系统指针资源有什么问题吗？

它非常快速和肮脏，但这就是重点：

```
var net = require('net');

net.createServer(function (socket) {

  var mode = 'nodata';

  socket.on('data', function(data) {

    var data_string = data.toString();
    console.log(data_string);

    if (mode == 'nodata') {

      if (data_string.substring(0, 4) == 'EHLO') {
        socket.write('hello ' + data_string.substring(5, data_string.length - 1) + '\r\n');
      } else if (data_string.substring(0, 10) == 'AUTH LOGIN') {
        socket.write('250 ok\r\n');
      } else if (data_string.substring(0, 10) == 'MAIL FROM:') {
        socket.write('250 ok\r\n');
      } else if (data_string.substring(0, 8) == 'RCPT TO:') {
        to = data_string.substring(8, data_string.length - 1);
        socket.write('250 ok its for ' + to + '\r\n');
      } else if (data_string.substring(0, 4) == 'DATA') {
        socket.write('354 ok send it\r\n');
        mode = 'data';
      } else if (data_string.substring(0, 4) == 'QUIT') {
        socket.write('221 Goodbye\r\n');
        socket.end();
        return;
      }

    } else if (mode == 'data') {

      if (data_string.substring(0, 1) == '.') {
        socket.write('250 message queued\r\n');
        mode = 'nodata';
      }

    }

  });

}).listen(3434); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:54:56.200

你错过了我期望的大部分换行逻辑：不确定这是否会导致你观察到的行为问题，但你可能想要使用功能更全的东西（[也许像这个](https://gist.github.com/278814)），以防你有一些您的实现并没有真正正确处理的极端情况。它是否可以与 telnet 以外的任何其他邮件客户端一起使用？

# data-structures - 动态数组的运行时间增加一个常数而不是加倍

> ID：10184721
> 
> 赞同：2
> 
> 时间：2012-04-17T03:39:04.203
> 
> 标签：data-structures, dynamic-tables

我刚考完试，其中一个问题总结如下：

给定一个大小为 1000 的空数组，向数组中插入 n 个元素的摊销成本是多少？当数组已满时，我们不会将数组增加一倍，而是将其增加 1000 并将所有元素复制到新数组中，就像对动态表一样。

我回答了 O(n) 但我完全不确定我的答案。我知道加倍动态表的摊销运行时间是 2，但我找不到关于增长恒定大小的动态表的太多信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T12:53:52.720

让我们的初始大小是 A，增量也是 A，我们有 N 个增长步骤。每一步都需要 k*Size 基本操作来复制元素（并在需要时清除内存）。

成本 = k * (A + (A+A) + (A+2A) + ... + (A+(N-1) *A)) = k* (A*N +A*(1 + 2 + 3 +。 .. + (N-1))) = k * (A*N + A*N*(N-1)/2) = O(N^2 * A) = **O(N^2)**（假设 A 是持续的）

1 + 2 + 3 +... + (N-1) 是[算术级数之和](http://en.wikipedia.org/wiki/Arithmetic_progression)

PS 将阵列加倍成本 O(N)

# android - 父文本居中，2 个可变宽度视图与两侧对齐

> ID：10184724
> 
> 赞同：0
> 
> 时间：2012-04-17T03:39:16.173
> 
> 标签：android, android-layout

我要完成的项目的要求之一是重现类似于导航栏的 iOS UI 功能。

（我意识到从 Android 设计的角度来看这很糟糕，但我对此无能为力。）

对于那些不知道我在[这里](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/mobilehig/Art/ui_navbar.jpg)尝试完成什么的人来说，这是一个例子。关键是要有一个始终居中的 TextView 栏，同时可以使两个可变宽度的按钮左右对齐。即使两个按钮之一消失，标题仍必须居中。

通过使用虚拟的不可见视图来强制左右“组件”具有相同的宽度，这种行为并不难实现。

上述不起作用的用例是标题太长而无法在逻辑上居中（或者缺少左按钮。）在这种情况下，我的解决方案会强制将标题快速椭圆化。所需的行为是将标题扩展到该空白区域。

任何帮助，将不胜感激。我意识到这种解释可能相当混乱。我很乐意澄清任何观点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T03:45:17.747

您是否尝试过RelativeLayout？[http://developer.android.com/reference/android/widget/RelativeLayout.html](http://developer.android.com/reference/android/widget/RelativeLayout.html)

使用RelativeLayout，您可以让TextView 填充该顶栏的整个宽度，除了左右的一些layout_margin 为按钮留出空间。左右按钮将位于 RelativeLayout 的第二层（在 TextView 下方）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T03:53:32.827

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:text="Button" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:layout_toRightOf="@id/button1"
        android:layout_toLeftOf="@id/button2"
        android:ellipsize="middle"
        android:text="TextView" />

</RelativeLayout> 
```

# javascript - 如何让不刷新和重定向页面？

> ID：10184726
> 
> 赞同：0
> 
> 时间：2012-04-17T03:39:35.783
> 
> 标签：javascript, ajax

> **可能重复：** [如何在不刷新的情况下重写 URL，例如 GitHub.com](https://stackoverflow.com/questions/4371705/how-to-rewrite-url-without-refresh-like-github-com)

例如，Google Plus 的导航栏做到了：如果你点击导航栏的按钮，你会看到一个 div 被更新，**并且 URL 被改变**。不能ajax？怎么办？谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T04:07:33.213

他们做三件事：

1.  使用ajax加载数据
2.  他们更改了页面的 url（注意 - 页面没有加载，只是查询字符串发生了变化）。
3.  他们将此网址推送到浏览器的历史记录中。

所有这些都可以通过使用 javascript 来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T03:52:34.660

不是ajax，似乎不太可能。但你可以模仿更新但url没有改变

```
<a href="###" onclick="update()"/> 
```

功能更新，可以通过ajax发送请求

# java - 二十一点 Java 代码测试

> ID：10184727
> 
> 赞同：-2
> 
> 时间：2012-04-17T03:39:46.547
> 
> 标签：java, computer-science, blackjack

我在测试二十一点 java 代码时遇到问题，这是以下代码：

```
package view;

/*
////In this applet, the user plays a game of Blackjack.  The
////computer acts as the dealer.  The user plays by clicking
////"Hit!" and "Stand!" buttons.

////The programming of this applet assumes that the applet is
////set up to be about 466 pixels wide and about 346 pixels high.
////That width is just big enough to show 2 rows of 5 cards.
////The height is probably a little bigger than necessary,
////to allow for variations in the size of buttons from one platform
////to another.

*/

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

import model.Card;
import model.Deck;
import model.Hand;

public class GUI21 extends JApplet {

public void init() {

  // The init() method creates components and lays out the applet.
  // A BlackjackCanvas occupies the CENTER position of the layout.
  // On the bottom is a panel that holds three buttons.  The
  // BlackjackCanvas object listens for events from the buttons
  // and does all the real work of the program.

setBackground( new Color(130,50,40) );

BlackjackCanvas board = new BlackjackCanvas();
getContentPane().add(board, BorderLayout.CENTER);

JPanel buttonPanel = new JPanel();
buttonPanel.setBackground( new Color(220,200,180) );
getContentPane().add(buttonPanel, BorderLayout.SOUTH);

JButton hit = new JButton( "Hit!" );
hit.addActionListener(board);
buttonPanel.add(hit);

JButton stand = new JButton( "Stand!" );
stand.addActionListener(board);
buttonPanel.add(stand);

JButton newGame = new JButton( "New Game" );
newGame.addActionListener(board);
buttonPanel.add(newGame);

}  // end init()

public Insets getInsets() {
  // Specify how much space to leave between the edges of
  // the applet and the components it contains.  The background
  // color shows through in this border.
return new Insets(3,3,3,3);
}

// --- The remainder of this class consists of a nested class ---

class BlackjackCanvas extends JPanel implements ActionListener {

  // A nested class that displays the card game and does all the work
  // of keeping track of the state and responding to user events.

Deck deck;         // A deck of cards to be used in the game.

Hand dealerHand;   // Hand containing the dealer's cards.
Hand playerHand;   // Hand containing the user's cards.

String message;  // A message drawn on the canvas, which changes
                //    to reflect the state of the game.

boolean gameInProgress;  // Set to true when a game begins and to false
                        //   when the game ends.

Font bigFont;      // Font that will be used to display the message.
Font smallFont;    // Font that will be used to draw the cards.

BlackjackCanvas() {
     // Constructor.  Creates fonts and starts the first game.
  setBackground( new Color(0,120,0) );
  smallFont = new Font("SansSerif", Font.PLAIN, 12);
  bigFont = new Font("Serif", Font.BOLD, 14);
  doNewGame();
}

public void actionPerformed(ActionEvent evt) {
      // Respond when the user clicks on a button by calling
      // the appropriate procedure.  Note that the canvas is
      // registered as a listener in the GUI21 class.
  String command = evt.getActionCommand();
  if (command.equals("Hit!"))
     doHit();
  else if (command.equals("Stand!"))
     doStand();
  else if (command.equals("New Game"))
     doNewGame();
}

void doHit() {
      // This method is called when the user clicks the "Hit!" button.
      // First check that a game is actually in progress.  If not, give
      // an error message and exit.  Otherwise, give the user a card.
      // The game can end at this point if the user goes over 21 or
      // if the user has taken 5 cards without going over 21.
  if (gameInProgress == false) {
     message = "Click \"New Game\" to start a new game.";
     repaint();
     return;
  }
  playerHand.addCard( deck.takeCardfromDeck() );
  if ( playerHand.getScore() > 21 ) {
     message = "You've busted!  Sorry, you lose.";
     gameInProgress = false;
  }
  else if (playerHand.getScore() == 5) {
     message = "You win by taking 5 cards without going over 21.";
     gameInProgress = false;
  }
  else {
     message = "You have " + playerHand.getScore() + ".  Hit or Stand?";
  }
  repaint();
}

void doStand() {
       // This method is called when the user clicks the "Stand!" button.
       // Check whether a game is actually in progress.  If it is,
       // the game ends.  The dealer takes cards until either the
       // dealer has 5 cards or more than 16 points.  Then the 
       // winner of the game is determined.
  if (gameInProgress == false) {
     message = "Click \"New Game\" to start a new game.";
     repaint();
     return;
  }
  gameInProgress = false;
  while (dealerHand.getScore() <= 16 && dealerHand.getCardsinHand() < 5)
     dealerHand.addCard( deck.takeCardfromDeck() );
  if (dealerHand.getScore() > 21)
      message = "You win!  Dealer has busted with " + dealerHand.getCardsinHand() +".";
  else if (dealerHand.getScore() == 5)
      message = "Sorry, you lose.  Dealer took 5 cards without going over 21.";
  else if (dealerHand.getScore() > playerHand.getScore())
      message = "Sorry, you lose, " + dealerHand.getScore()
                                        + " to " + playerHand.getScore() + ".";
  else if (dealerHand.getScore() == playerHand.getScore())
      message = "Sorry, you lose.  Dealer wins on a tie.";
  else
      message = "You win, " + playerHand.getScore()
                                        + " to " + dealerHand.getScore() + "!";
  repaint();
  }

  void doNewGame() {
      // Called by the constructor, and called by actionPerformed() if
      // the use clicks the "New Game" button.  Start a new game.
      // Deal two cards to each player.  The game might end right then
      // if one of the players had blackjack.  Otherwise, gameInProgress
      // is set to true and the game begins.
  if (gameInProgress) {
          // If the current game is not over, it is an error to try
          // to start a new game.
     message = "You still have to finish this game!";
     repaint();
     return;
  }
  deck = new Deck();   // Create the deck and hands to use for this game.
  dealerHand = new Hand();
  playerHand = new Hand();
  deck.shuffle();
  dealerHand.addCard( deck.takeCardfromDeck() );  // Deal two cards to each player.
  dealerHand.addCard( deck.takeCardfromDeck() );
  playerHand.addCard( deck.takeCardfromDeck() );
  playerHand.addCard( deck.takeCardfromDeck() );
  if (dealerHand.getScore() == 21) {
      message = "Sorry, you lose.  Dealer has Blackjack.";
      gameInProgress = false;
  }
  else if (playerHand.getScore() == 21) {
      message = "You win!  You have Blackjack.";
      gameInProgress = false;
  }
  else {
      message = "You have " + playerHand.getScore() + ".  Hit or stand?";
      gameInProgress = true;
  }
  repaint();
  }  // end newGame();

  public void paintComponent(Graphics g) {
     // The paint method shows the message at the bottom of the
     // canvas, and it draws all of the dealt cards spread out
     // across the canvas.

  super.paintComponent(g); // fill with background color.

  g.setFont(bigFont);
  g.setColor(Color.green);
  g.drawString(message, 10, getSize().height - 10);

  // Draw labels for the two sets of cards.

  g.drawString("Dealer's Cards:", 10, 23);
  g.drawString("Your Cards:", 10, 153);

  // Draw dealer's cards.  Draw first card face down if
  // the game is still in progress,  It will be revealed
  // when the game ends.

  g.setFont(smallFont);
  if (gameInProgress)
     drawCard(g, null, 10, 30);
  else
     drawCard(g, dealerHand.getCard(0), 10, 30);
  for (int i = 1; i < dealerHand.getCardsinHand(); i++)
     drawCard(g, dealerHand.getCard(i), 10 + i * 90, 30);

  // Draw the user's cards.

  for (int i = 0; i < playerHand.getCardsinHand(); i++)
     drawCard(g, playerHand.getCard(i), 10 + i * 90, 160);

  }  // end paint();

  void drawCard(Graphics g, Card card, int x, int y) {
       // Draws a card as a 80 by 100 rectangle with
       // upper left corner at (x,y).  The card is drawn
       // in the graphics context g.  If card is null, then
       // a face-down card is drawn.  (The cards are 
       // rather primitive.)
  if (card == null) {  
         // Draw a face-down card
     g.setColor(Color.blue);
     g.fillRect(x,y,80,100);
     g.setColor(Color.white);
     g.drawRect(x+3,y+3,73,93);
     g.drawRect(x+4,y+4,71,91);
  }
  else {
     g.setColor(Color.white);
     g.fillRect(x,y,80,100);
     g.setColor(Color.gray);
     g.drawRect(x,y,79,99);
     g.drawRect(x+1,y+1,77,97);
     if (card.getSuit() == card.getSuit() || card.getSuit() == card.getSuit())
        g.setColor(Color.red);
     else
        g.setColor(Color.black);
     g.drawString(card.toSymbol(), x + 10, y + 30);
     g.drawString("of", x+ 10, y + 50);
     g.drawString(card.toSymbol(), x + 10, y + 70);

  }  // end drawCard()

  } // end nested class BlackjackCanvas

  }
  } // end class HighLowGUI 
```

但是，每当我测试它时，我都会收到以下错误：

```
Exception in thread "AWT-EventQueue-1" java.util.UnknownFormatConversionException: Conversion = 'i'
    at java.util.Formatter$FormatSpecifier.conversion(Unknown Source)
    at java.util.Formatter$FormatSpecifier.<init>(Unknown Source)
    at java.util.Formatter.parse(Unknown Source)
    at java.util.Formatter.format(Unknown Source)
    at java.util.Formatter.format(Unknown Source)
    at java.lang.String.format(Unknown Source)
    at model.Card.toSymbol(Card.java:38)
    at view.GUI21$BlackjackCanvas.drawCard(GUI21.java:266)
    at view.GUI21$BlackjackCanvas.paintComponent(GUI21.java:232)
    at javax.swing.JComponent.paint(Unknown Source)
    at javax.swing.JComponent.paintChildren(Unknown Source)
    at javax.swing.JComponent.paint(Unknown Source)
    at javax.swing.JComponent.paintChildren(Unknown Source)
    at javax.swing.JComponent.paint(Unknown Source)
    at javax.swing.JLayeredPane.paint(Unknown Source)
    at javax.swing.JComponent.paintChildren(Unknown Source)
    at javax.swing.JComponent.paintToOffscreen(Unknown Source)
    at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(Unknown Source)
    at javax.swing.RepaintManager$PaintManager.paint(Unknown Source)
    at javax.swing.RepaintManager.paint(Unknown Source)
    at javax.swing.JComponent.paint(Unknown Source)
    at java.awt.GraphicsCallback$PaintCallback.run(Unknown Source)
    at sun.awt.SunGraphicsCallback.runOneComponent(Unknown Source)
    at sun.awt.SunGraphicsCallback.runComponents(Unknown Source)
    at java.awt.Container.paint(Unknown Source)
    at javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)
    at javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)
    at javax.swing.RepaintManager.seqPaintDirtyRegions(Unknown Source)
    at javax.swing.SystemEventQueueUtilities$ComponentWorkRequest.run(Unknown Source)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

任何建议都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T03:47:17.210

注意堆栈跟踪的顶部：

```
Exception in thread "AWT-EventQueue-1" java.util.UnknownFormatConversionException: Conversion = 'i'
    at java.util.Formatter$FormatSpecifier.conversion(Unknown Source)
    at java.util.Formatter$FormatSpecifier.<init>(Unknown Source)
    at java.util.Formatter.parse(Unknown Source)
    at java.util.Formatter.format(Unknown Source)
    at java.util.Formatter.format(Unknown Source)
    at java.lang.String.format(Unknown Source)
    at model.Card.toSymbol(Card.java:38) 
```

`toSymbol()`那是在告诉您您的课程方法中发生了错误`Card`（顺便说一句，您还没有发布）。问题是您的`toSymbol()`方法显然使用了错误的格式字符串，或者至少使用了与要使用它格式化的数据不匹配的格式字符串。因此，请查看格式字符串并阅读 Javadocs 中的格式说明符并找出您做错了什么。

# mysql - 什么是独立于数据库（适用于 mysql 和 sqlite3）的解决方案来计算 SQL 中两个日期之间的天数？

> ID：10184728
> 
> 赞同：3
> 
> 时间：2012-04-17T03:39:48.083
> 
> 标签：mysql, sql, sqlite, date

Datediff 是 mysql 和 sql server 中用于计算两个日期之间天数的函数。但是 Datediff 在 sqlite3 中不起作用。计算两个日期之间天数的独立数据库（适用于 mysql 和 sqlite3）方法是什么？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:01:46.587

如果您以正确的方式管理数据类型，则可以使减法正常工作，并且以同样的方式，在所有 3 个系统中。

因为 SQLite 没有 datetime 数据类型，您可以将日期值存储为整数，并正常减去日期。

MSSQL 允许减去 datetime，当转换为 int 时，将为您提供它们之间的天数。

MySQL 应该允许 DATE 数据类型的减法。（你可以检查这个。）

# ruby - Ruby rails - 使用获取参数重定向到不同的视图

> ID：10184729
> 
> 赞同：1
> 
> 时间：2012-04-17T03:39:49.823
> 
> 标签：ruby, ruby-on-rails-3

我有一个“创建”函数，它将重定向到一个名为“视图”的新视图。“view”使用get方法，所以需要在url中提供参数。

“创建”创建一个新项目 123，并使用 url 重定向/呈现“视图”`/view?id=123` 我还想在重定向到这个视图时传递一些额外的参数，`/view?id=123&note=duplicate`

我该怎么做呢？

```
 def create   
    @i = Book.createNewItem(params[:name])
    if @i[:error] == ""
      render action: 'view',
    else
      redirect_to book_home_path
    end
  end

  def view
    Book.getItem(params[:id]) #some backend update stuff
    @i = Book.find_by_book_num(params[:id])
    return @i
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-18T06:03:40.430

您可以使用

```
 render :action=>'view', :id=>123, :note=>"duplicate" 
```

这将自动生成 'get' url 以查看操作，如下所示：

```
 "/view?id=123&note=duplicate" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:50:21.870

你可以把它当作简单的

```
 redirect_to "/view?id="+@i+"&note=duplicate" 
```

试试看...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T08:43:02.357

您可以在哈希中传递其他参数，像这样传递给 url 助手：

```
redirect_to book_view_path(id: @i.id, note: 'duplicate') 
```

或者

```
redirect_to action: "view", id: 5, note: 'duplicate' 
```

# ruby - 如何在 Sinatra 代码中发出 POST 请求？

> ID：10184737
> 
> 赞同：6
> 
> 时间：2012-04-17T03:40:42.377
> 
> 标签：ruby, sinatra

单击表单中的按钮将发送一个 POST 请求，由以下代码处理。

```
post '/register' do
   #send post request to http://www.randomsite.com
   #parse response
   #do something with it
   @user = User.first(:name => params['regUsername'])
   if @user == nil
     @user = User.create(
     :name         => params['regUsername'],
     :pass         => Password.create(params['regPassword']),
     :email        => params['regEmail'],
     :created_date => Time.now
     )
     redirect '/'
   else
     "User already exists."
   end
end 
```

如何从 Ruby 代码中向其他网站发送另一个 POST 请求？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T03:49:43.230

使用来自 Ruby 标准库或[HTTParty](https://github.com/jnunemaker/httparty/blob/master/examples/basic.rb) gem的[Net::HTTP 。](https://github.com/augustl/net-http-cheat-sheet/blob/master/post_form.rb)

# plugins - 如何在 Dynamics CRM4 C# 插件中迭代 1:N 关系

> ID：10184738
> 
> 赞同：2
> 
> 时间：2012-04-17T03:40:45.470
> 
> 标签：plugins, dynamics-crm, crm, dynamics-crm-4

我们的 Account 实体与自定义实体“BookingAccount”具有 1:N 关系。关系的名称是 new_Account_new_BookingAccount。在插件中，如果我尝试迭代集合

```
foreach (new_BookingAccount ba in myAccount.new_Account_newBookingAccount)
{
    ...
} 
```

它为空 - 即使存在相关的 BookingAccounts。

我应该重新查询 BookingAccounts 还是可以在集合属性上调用一些“填充”方法？如果是这样，最好的方法是如何做到这一点？如果你不能迭代它，集合属性的意义何在。

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:45:15.267

您的代码应该可以工作。如果您将使用早期绑定的实体类编写客户端，您将看到此类集合利用通用[GetRelatedEntity](http://msdn.microsoft.com/en-us/library/gg326130.aspx)方法。代码将如下所示：

```
 /// <summary>
        /// 1:N account_activity_parties
        /// </summary>
        [Microsoft.Xrm.Sdk.RelationshipSchemaNameAttribute("account_activity_parties")]
        public System.Collections.Generic.IEnumerable<MyCrmNamespace.ActivityParty> account_activity_parties
        {
            get
            {
                return this.GetRelatedEntities<MyCrmNamespace.ActivityParty>("account_activity_parties", null);
            }
            ...
        } 
```

此代码应该在所有情况下都能正常工作。当然，可能存在一些安全问题。您的代码在某些 CRM 用户凭据下执行，您应该确保用户有足够的权限来浏览这两个实体。
但最重要的是你应该注意的是你如何检索实例`myAccount`。你提到这段代码是在插件内部使用的。但是你没有提到它是什么样的插件（pre-stage，post-stage），你在这个插件中处理什么样的消息，你是怎么做的检索实体的实例`myAccount`。如果直接调用检索方法，则应填充所有属性。但如果`myAccount`来自输入参数，不能保证将为所有属性设置所有实际值。可能是集合为空的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T02:06:10.297

Ah - the collection needs to be loaded explicitly:

```
orgContext.LoadProperty(account, "new_BookingAccount_new_ExternalCode");
foreach (new_BookingAccount ba in myAccount.new_Account_new_BookingAccount)
{
    ...
} 
```

(Though this can't be done if the accouont is a new entity, so needs some sort of check beforehand):

```
if (account.CreatedOn == null)
    return; 
```

Seems like a lot of work for simple collection iteration

# php - PHP & MongoDB - 查询数组

> ID：10184739
> 
> 赞同：1
> 
> 时间：2012-04-17T03:40:46.733
> 
> 标签：php, mongodb

我可以很好地进行边界框位置查询，如下所示：

```
$cursor = $coll->find(array('loc' => array('$within' => array('$box' => $box)))); 
```

另一个基本查询有效：

```
$cursor = $coll->find(array('type' => $filter)); 
```

但是当我尝试将两者合并到一个新查询中时，它不起作用：

```
$cursor = $coll->find(array(

    array('loc' => array('$within' => array('$box' => $box))), 

    array('type' => $filter)

)); 
```

我是否错误地处理了查询字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:03:14.717

您的语法不正确，您应该这样做：

```
$cursor = $coll->find(array(
    'loc' => array('$within' => array('$box' => $box)),
    'type' => $filter,
)); 
```

即，有一个包含所有查询部分的数组。

# php - Symfony2 如何在不扩展 ControllerResolver 的情况下找到正确的控制器？

> ID：10184742
> 
> 赞同：1
> 
> 时间：2012-04-17T03:41:23.503
> 
> 标签：php, symfony

我一直在查看 Symfony2 代码，但在不扩展/覆盖 ControllerResolver 类的功能的情况下，我无法弄清楚它是如何找出要使用的正确控制器的。我不认为默认的 ControllerResolver 能够为控制器找到像 BundleName:Bundle:action 这样的控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:39:02.877

控制器在 HTTPKernel 类 (https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/HttpKernel.php) 中解析。这就是那里发生的事情

```
 // load controller
    if (false === $controller = $this->resolver->getController($request)) {
        throw new NotFoundHttpException(sprintf('Unable to find the controller for path "%s". Maybe you forgot to add the matching route in your routing configuration?', $request->getPathInfo()));
    } 
```

一旦控制器被解析，控制器类就会出现在请求的 __controller 属性中。

# jquery - 如何让这个滚动功能在 jQuery 上工作？

> ID：10184748
> 
> 赞同：0
> 
> 时间：2012-04-17T03:41:59.150
> 
> 标签：jquery, function, syntax, error-handling, scroll

我正在尝试实现这个滚动功能，它应该可以工作，但是当我尝试时，它给了我一个语法错误。有人可以告诉我为什么/如何解决它吗？

```
Scroller = function(element) {
  this.element = this;
  this.startTouchY = 0;
  this.animateTo(0);

  element.addEventListener('touchstart', this, false);
  element.addEventListener('touchmove', this, false);
  element.addEventListener('touchend', this, false);
} 
```

我确定我必须改变`Scroller = function(element)`，但我不知道要改变什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:46:43.267

这：

```
element.addEventListener(‘touchstart’, this, false);
element.addEventListener(‘touchmove’, this, false);
element.addEventListener(‘touchend’, this, false); 
```

应该是这样的：

```
element.addEventListener('touchstart', this, false);
element.addEventListener('touchmove', this, false);
element.addEventListener('touchend', this, false); 
```

不同之处在于我用普通的单引号替换了样式引号。你是用 Word 还是什么的？！

你还应该改变这个：

```
var Scroller = function() { 
```

对此：

```
function Scroller() { 
```

# c# - 使用 Visual Studio C# 从 MS Access 检索数据

> ID：10184754
> 
> 赞同：1
> 
> 时间：2012-04-17T03:43:21.803
> 
> 标签：c#, ms-access, double

好了，说点背景吧。我发现用 C# 做一个共享 DLL 很困难，而且真的不值得这么麻烦，因为这只是一个已经完成的学校项目，无论如何我宁愿走这条路。

所以我通过这段代码将数据放入 MS Access 中。

```
 public void SetBal(double money)
    {
        bal = money; //balance equals whatever money that was sent to it
        string query = "Insert into Users" + "([Money])" + "Values (@Money)" + "where Users.UserID = 1";
        dbconn = new OleDbConnection(connection);
        OleDbCommand insert = new OleDbCommand(query, dbconn);
        insert.Parameters.Add("Money", OleDbType.Char).Value = bal;
        dbconn.Open();
        try
        {
            int count = insert.ExecuteNonQuery();
        }
        catch (OleDbException ex)
        {

        }
        finally
        {
            dbconn.Close();
        }

    } 
```

好吧，这行得通。问题是当我试图从数据库中检索数据时。

```
 public double GetBal()
    {
        string query = "SELECT Users.Money FROM Users";
        bal = Convert.ToDouble(query);
        return bal;
    } 
```

我无法将查询结果转换为双精度。我不知道代码是否只是错误的，或者我只是以错误的方式去做。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T04:03:51.143

```
public double GetBal()
{
  // Make sure you change this to a real userID that you pass in.
  var query = "SELECT Users.Money FROM Users WHERE Users.UserID = 1";

  double balance = 0;

  using (var dbconn = new OleDbConnection(connectionString)) {
    var command = new OleDbCommand(query, dbconn);
    dbconn.Open();

    // Send the command (query) to the connection, creating an
    // OleDbReader in the process. We want it to close the database
    // connection in the process so we pass in that behavior as an
    // argument (CommandBehavior.CloseConnection)
    var myReader = command.ExecuteReader(CommandBehavior.CloseConnection);

    // this while loop will keep executing until there are no more rows
    // to read from the database. myReader.Read() moves to the next row
    // in the database too. The first read() puts you at the first row.
    while(myReader.Read()) 
    {
        // Use the reader's GetDouble() method to read the data and convert
        // it to a double. The 0 is there because it is the first column in
        // the results. for example to read the third column, it would be
        // myReader.GetDouble(2).
        balance = myReader.GetDouble(0));
    }
    // because there is only one row (query said where Users.UserID = 1) the
    // above loop will only execute once.

    // Close the reader so we can tell the command that the connection
    // can be closed...because CommandBehavior.CloseConnection was specified
    myReader.Close();
  }

  // return the value we got from the database
  return balance;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T03:48:28.250

您需要创建/打开您的连接，然后执行查询。您为插入完成了它 - 现在您需要使用选择查询在 get 方法中创建相同的内容。您需要执行查询，然后将查询结果转换为双精度。

# matlab - MATLAB Simulink 到工作区

> ID：10184759
> 
> 赞同：0
> 
> 时间：2012-04-17T03:44:12.890
> 
> 标签：matlab, simulink

我只是无法理解这一点。我制作了一个框图，并使用脉冲发生器产生方波。我正在尝试进行 PID 控制。

然后我将脉冲和输出都输入到工作区。我不明白的是为什么这两个变量的长度不一样？！脉冲2000左右，系统输出20000左右，也就是10倍！！

如何？！如果我投入2000分，我怎么能得到20000分？

谢谢

# java - Primefaces 标签不起作用

> ID：10184760
> 
> 赞同：2
> 
> 时间：2012-04-17T03:44:22.190
> 
> 标签：java, jsf-2, primefaces

我正在尝试使用 Eclipse 3.6 和 Glassfish 3.1 作为应用服务器来启动我的 Primefaces 3.2 开发。

当我尝试使用这个非常简单的代码从 Eclipse 发布我的应用程序时。

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">

<ui:composition template="WEB-INF/template.xhtml">
    <ui:define name="content">
        <p:panel header="Login Form">
            <h:form>
                <p:button value="With Icon!" icon="bookmark" />
                <br />
                <p:spinner />
            </h:form>
        </p:panel>
    </ui:define>
</ui:composition>
</html> 
```

Primefaces 没有渲染。按钮显示但没有图标，微调器仅显示输入文本。

不确定，但我已将 primefaces jar 文件放在 WEB-INF/lib 文件夹中。

虽然我在 glassfish 日志中看到了这个错误。

```
[#|2012-04-17T11:37:56.864+0800|INFO|glassfish3.1.2|javax.enterprise.resource.webcontainer.jsf.renderkit|_ThreadID=23;_ThreadName=Thread-2;|WARNING: FacesMessage(s) have been enqueued, but may not have been displayed.
sourceId=null[severity=(ERROR 2), summary=(One or more resources have the target of 'head', but no 'head' component has been defined within the view.), detail=(One or more resources have the target of 'head', but no 'head' component has been defined within the view.)]|#] 
```

**更新：**

抱歉，这是我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
</web-app> 
```

我的模板

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets">
<head>
  <title><ui:insert name="title">My Test Application</ui:insert></title>
</head>
<body>
<div id="header">
    <ui:insert name="header">
        <h1>Header</h1>
    </ui:insert>
</div>
<div id="content">
  <ui:insert name="content">

  </ui:insert>
</div>

<div id="footer">
  <ui:insert name="footer">
        <br/><br/>Footer!
  </ui:insert>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T04:42:30.243

例如，您需要在 template.xhtml 文件中进行以下更改

```
<f:view>
  <h:head>
   <title><ui:insert name="title">insert title</ui:insert></title>
   <meta content="text/html; charset=UTF-8" http-equiv="Content-type" />
   <link type = "text/css"  rel="stylesheet" href="/your/theme/skin.css" />
   </h:head> 
```

希望这会帮助你。

# .htaccess - 如果不存在则添加后缀

> ID：10184771
> 
> 赞同：0
> 
> 时间：2012-04-17T03:46:38.180
> 
> 标签：.htaccess, mod-rewrite

**如果后缀`/`不存在，如何使用 .htaccces / mod_rewrite 添加？**

例如

输入： `http://stackoverflow.com/chat`

输出：`http://stackoverflow.com/chat/`

* * *

这是我当前的 .htaccess

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/admin
RewriteRule ^([^/]*)/$ /index.php?view=$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T03:50:24.643

您希望在最后一条规则之前有一个重定向规则，例如：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/admin
RewriteRule ^(.+[^/])$  $1/                [R=301,L]
RewriteRule ^([^/]*)/$  /index.php?view=$1 [L] 
```

（未经测试）。

编辑：哎呀，忘了添加尾随 / ！

# android - 通过 RemoteViews 设置按钮可绘制

> ID：10184776
> 
> 赞同：1
> 
> 时间：2012-04-17T03:47:11.140
> 
> 标签：android, button, icons, drawable, android-appwidget

我正在构建一个包含按钮的小部件。按钮中的图标（通常`drawableLeft="@drawable/some_image"`在 XML 中设置）需要动态更改。我认为我可以用来`RemoteViews.setString(R.id.widget_button, "drawableLeft", "@drawable/some_image")`动态设置图标，但小部件无法正确加载。有谁知道如何`RemoteViews`动态设置按钮的图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:41:52.120

`drawLeft`没有等效的直接方法：从您需要使用的代码[`setCompoundDrawables`](http://developer.android.com/reference/android/widget/TextView.html#setCompoundDrawables%28int,%20int,%20int,%20int%29)及其相关方法中设置它。不幸的是，这些是多种参数方法，`RemoteViews`似乎没有公开可用，所以你可能不走运。

一种可能的解决方案（但非常笨拙）：使用不同的可能图像实现多个布局，然后使用该[`RemoteViews.addView`](http://developer.android.com/reference/android/widget/RemoteViews.html#addView%28int,%20android.widget.RemoteViews%29)函数动态加载它们。

可能会奏效。

# iphone - Xcode 中的 iPhone 存储和检索

> ID：10184780
> 
> 赞同：1
> 
> 时间：2012-04-17T03:47:18.030
> 
> 标签：iphone, ios, xcode, cordova

我为 Android 开发了一个可以播放 mp3 的 PhoneGap 应用程序。我已经使用 Xcode 在 iPhone 上成功安装了该应用程序，但是有两件事我不知道该怎么做：

1.  如何将媒体文件传输到 iPhone sdcard？（对于 Android，我使用“adb push”）
2.  默认情况下，media.play() 将从 iOS 中的哪个目录播放？（对于 Android，它是位于 /sdcard/ 的 sd 卡根目录）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:50:08.110

我从来没有使用过phoneGapp，但我知道在原生应用程序中是一个html+js包装器，所以你拥有的原生应用程序可能是有效的？

因此，如果您有 Xcode，只需将您的 mp3 文件拖放到左侧“项目导航器”的文件夹中，您可以使用任何文件夹，但对于组织，请使用资源，如果您愿意，可以创建一个子文件夹。

数据将存储在您的应用程序包的沙盒文件系统中。

您也可以将数据保存在应用程序的“文档”文件夹中，但这是在运行时完成的，而不是“资产”。

因此您的应用程序包文件的目录可以通过 NSBundle 访问：

```
 NSString *bundleRoot = [[NSBundle mainBundle] bundlePath];
     NSLog(@"the bundle Root: %@",bundleRoot);

     NSFileManager *fm = [NSFileManager defaultManager];
     NSArray *dirContents = [fm contentsOfDirectoryAtPath:bundleRoot error:nil];

     NSLog(@"content of bundle ::%@", dirContents); 
```

该代码将向您显示

```
the bundle Root: /Users/tkt/Library/Application Support/iPhone Simulator/5.1/Applications/2BD76563-7D7C-4E30-9F37-6B099CBB2B47/jozziApp.app 
```

对于模拟器，以及它在设备中的等价物。

以及捆绑包的内容：

```
content of bundle ::(
    "aboutIcon.png",
    "bio.html",
    "bio_bgnd.png",***) 
```

所以这不是为了phoneGap，而是告诉你如何导入，以及文件在哪里！

祝你好运

# asp.net-mvc - mvc3 SelectList SelectedValue 在编辑视图中显示但未返回

> ID：10184781
> 
> 赞同：0
> 
> 时间：2012-04-17T03:47:21.037
> 
> 标签：asp.net-mvc, post, selectlist, selectedvalue, actionresult

我有一个带有以下下拉列表的编辑视图：

```
 @Html.DropDownListFor(model => model.Size, 
          new SelectList(Enumerable.Empty<SelectListItem>(), "Size", "Size"),
          Model.Size,  
          new { id = "WoodSize" })
    @Html.ValidationMessageFor(model => model.Size) 
```

控制器的相关部分是：

```
 [HttpPost]
    public ActionResult Edit(Part part)
    {
        try
        {
            if (ModelState.IsValid)
            {
                unitOfWork.PartRepository.Update(part);
                unitOfWork.Save();
                return RedirectToAction("Index");
            }
        }
        catch (DataException)
        {
            //Log the error (add a variable name after DataException)
            ModelState.AddModelError("", "Unable to save changes. Try again, and if the problem persists, see your system administrator.");
        }
        return View(part); 
```

SelectedValue 在 Get 上显示，但除非更改，否则不会在 Post 上返回给控制器，更新失败。如果手动选择了值，则返回选择并更新成功。似乎 SelectValue 实际上并没有选择任何东西，而只显示默认文本。

我必须错过一些东西，但我不知道是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:13:45.267

您的第三个参数只是一个标签，因此您可以让下拉菜单说“选择大小”，例如，它不包含值。在您的实例中，您使用 Model.Size 值作为标签

如果您的模型值与可用选项列表中的值匹配，那么它将标记为已选中，并在您提交时将值发送给您的控制器。

# sql - SQL返回一个字段包含相同数据但其他字段包含不同数据的行

> ID：10184783
> 
> 赞同：2
> 
> 时间：2012-04-17T03:47:48.973
> 
> 标签：sql, group-by, distinct

我正在尝试编写一条 SQL 语句来查找表中对于一个字段包含相同值的所有行。但是，我只想为单独的属性返回具有*不同值的行。*这有点难以解释。

我有一个带有架构的老师表：

```
TeacherName varchar(50)
CourseN     int
Quarter     varchar(50) 
```

这三个字段组合起来构成了主键，因此只要季度不同，同一位老师就可以教授同一门课程。我要解决的问题是，**如何返回至少教授两门不同课程（不分季度）的所有教师的（不同）姓名？**

这是一个实验室，我已经尝试解决这个问题大约一个星期，但我无法弄清楚，所以我想我会来这里。上一个问题要求找出至少两次教授*同一课程的教师的不同姓名列表。*我想出了这个：

```
SELECT DISTINCT [TeacherName] 
FROM            [Teacher]
GROUP BY        [TeacherName], 
                [CourseN] 
HAVING   COUNT( [CourseN] ) >= 2 
```

然而，我现在试图解决的问题是相似的，但同样，我只需要不止一次出现在表格中并教授至少两门不同课程的老师。我也非常感谢一些指导，而不仅仅是答案，因为我准确了解数据库在做什么很重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T04:07:08.987

在这种情况下，您应该能够获得不同的列表，而不必使用 DISTINCT 这个词，特别是如果它可以“不分季度”。本质上，您只需要在子查询表中有 >=2 行的教师，每个唯一的教师-课程编号组合有 1 行。

```
select TeacherName
from (
    select TeacherName, CourseN
    from Teacher
    group by TeacherName, CourseN
    ) t1
group by TeacherName
having count(*) >=2 
```

# api - 如何使用 Qt API 制作包含鼠标光标的屏幕截图？

> ID：10184784
> 
> 赞同：2
> 
> 时间：2012-04-17T03:47:56.387
> 
> 标签：api, qt

我希望屏幕截图中有鼠标光标，但是 QT 中的抓取 API -`QPixmap::grabWindow()`只能制作没有光标的屏幕截图。

我可以自己在图片中绘制光标，但我必须获取光标图片，并且屏幕截图中的光标将与不可更改的光标图片保持一致。太丑了 有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T11:28:46.297

根据 QPixmap::grabWindow 文档，它不会捕获鼠标光标，

我认为您需要自己获取鼠标位置并绘制光标。您可以使用 API 从 QWidget 获取 QCursor `QCursor cursor() const`。

并且 QCursor 有`QPixmap pixmap ()`API，你可以使用这个 Pixmap 来绘制鼠标光标。

抱歉，如果我无法正确理解您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-07T14:47:48.020

这是跨平台解决方案：

```
#include <assert.h>
#include <QCursor>
#include <QPainter>

#ifdef Q_OS_LINUX
#include <X11/X.h>
#include <X11/Xlib.h>
#include <X11/Xutil.h>
#include <X11/extensions/Xfixes.h>
#else // Q_OS_WINDOWs
#include <Windows.h>
#include <wingdi.h>
#pragma comment (lib, "User32.lib")
#pragma comment (lib, "Gdi32.lib")
#include <QtWinExtras>
#endif

namespace imageutil {

#ifdef Q_OS_LINUX

/* WebCore/plugins/qt/QtX11ImageConversion.cpp */
QImage qimageFromXImage(XImage* xi) {
    QImage::Format format = QImage::Format_ARGB32_Premultiplied;
    if (xi->depth == 24)
        format = QImage::Format_RGB32;
    else if (xi->depth == 16)
        format = QImage::Format_RGB16;

    QImage image = QImage(reinterpret_cast<uchar*>(xi->data), xi->width, xi->height, xi->bytes_per_line, format).copy();

    // we may have to swap the byte order
    if ((QSysInfo::ByteOrder == QSysInfo::LittleEndian && xi->byte_order == MSBFirst)
            || (QSysInfo::ByteOrder == QSysInfo::BigEndian && xi->byte_order == LSBFirst)) {

        for (int i = 0; i < image.height(); i++) {
            if (xi->depth == 16) {
                ushort* p = reinterpret_cast<ushort*>(image.scanLine(i));
                ushort* end = p + image.width();
                while (p < end) {
                    *p = ((*p << 8) & 0xff00) | ((*p >> 8) & 0x00ff);
                    p++;
                }
            } else {
                uint* p = reinterpret_cast<uint*>(image.scanLine(i));
                uint* end = p + image.width();
                while (p < end) {
                    *p = ((*p << 24) & 0xff000000) | ((*p << 8) & 0x00ff0000)
                         | ((*p >> 8) & 0x0000ff00) | ((*p >> 24) & 0x000000ff);
                    p++;
                }
            }
        }
    }

    // fix-up alpha channel
    if (format == QImage::Format_RGB32) {
        QRgb* p = reinterpret_cast<QRgb*>(image.bits());
        for (int y = 0; y < xi->height; ++y) {
            for (int x = 0; x < xi->width; ++x)
                p[x] |= 0xff000000;
            p += xi->bytes_per_line / 4;
        }
    }

    return image;
}

#endif // Q_OS_LINUX

QPixmap takeScreenShot(const QRect& area) {
    QRect screen; /* interested display area */
    QImage qimage; /* result image */

#ifdef Q_OS_LINUX
    QPoint cursorPos;

    Display* display = XOpenDisplay(nullptr);
    Window root = DefaultRootWindow(display);

    XWindowAttributes gwa;
    XGetWindowAttributes(display, root, &gwa);

    const auto goodArea = QRect(0, 0, gwa.width, gwa.height).contains(area);
    if (!goodArea) {
        screen = QRect(0, 0, gwa.width, gwa.height);
        cursorPos = QCursor::pos();
    } else {
        screen = area;
        cursorPos = QCursor::pos() - screen.topLeft();
    }

    XImage* image = XGetImage(display, root, screen.x(), screen.y(), screen.width(), screen.height(), AllPlanes, ZPixmap);
    assert(nullptr != image);

    qimage = qimageFromXImage(image);

    /* draw mouse cursor into QImage
     * https://msnkambule.wordpress.com/2010/04/09/capturing-a-screenshot-showing-mouse-cursor-in-kde/
     * https://github.com/rprichard/x11-canvas-screencast/blob/master/CursorX11.cpp#L31
     * */
    {
        XFixesCursorImage* cursor = XFixesGetCursorImage(display);
        cursorPos -= QPoint(cursor->xhot, cursor->yhot);
        std::vector<uint32_t> pixels(cursor->width * cursor->height);
        for (size_t i = 0; i < pixels.size(); ++i)
            pixels[i] = cursor->pixels[i];
        QImage cursorImage((uchar*)(pixels.data()), cursor->width, cursor->height, QImage::Format_ARGB32_Premultiplied);
        QPainter painter(&qimage);
        painter.drawImage(cursorPos, cursorImage);
        XFree(cursor);
    }

    XDestroyImage(image);
    XDestroyWindow(display, root);
    XCloseDisplay(display);

#elif defined(Q_OS_WINDOWS)
    HWND hwnd = GetDesktopWindow();
    HDC hdc = GetWindowDC(hwnd);
    HDC hdcMem = CreateCompatibleDC(hdc);

    RECT rect = { 0, 0, GetDeviceCaps(hdc, HORZRES), GetDeviceCaps(hdc, VERTRES) };
    const auto goodArea = QRect(rect.left, rect.top, rect.right, rect.bottom).contains(area);
    if (!goodArea) {
        screen = QRect(rect.left, rect.top, rect.right, rect.bottom);
    } else {
        screen = area;
    }

    HBITMAP hbitmap(nullptr);
    hbitmap = CreateCompatibleBitmap(hdc, screen.width(), screen.height());
    SelectObject(hdcMem, hbitmap);
    BitBlt(hdcMem, 0, 0, screen.width(), screen.height(), hdc, screen.x(), screen.y(), SRCCOPY);

    /* draw mouse cursor into DC
     * https://stackoverflow.com/a/48925443/5446734
     * */
    CURSORINFO cursor = { sizeof(cursor) };
    if (GetCursorInfo(&cursor) && cursor.flags == CURSOR_SHOWING) {
        RECT rect;
        GetWindowRect(hwnd, &rect);
        ICONINFO info = { sizeof(info) };
        GetIconInfo(cursor.hCursor, &info);
        const int x = (cursor.ptScreenPos.x - rect.left - rect.left - info.xHotspot) - screen.left();
        const int y = (cursor.ptScreenPos.y - rect.left - rect.left - info.yHotspot) - screen.top();
        BITMAP bmpCursor = { 0 };
        GetObject(info.hbmColor, sizeof(bmpCursor), &bmpCursor);
        DrawIconEx(hdcMem, x, y, cursor.hCursor, bmpCursor.bmWidth, bmpCursor.bmHeight,
                   0, nullptr, DI_NORMAL);
    }

    qimage = QtWin::imageFromHBITMAP(hdc, hbitmap, screen.width(), screen.height());
#endif // Q_OS_LINUX

    return QPixmap::fromImage(qimage);
}

} // namespace imageutil 
```

不要忘记添加到 qmake：

```
win32: QT += winextras
unix:!macx: LIBS += -lX11 -lXext -lXfixes 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T18:06:16.760

QPixmap::pixmap 仅在光标为像素图时有效。当前游标是标准游标时不起作用。一些想法总是可以得到一个包含实际光标的像素图？

# cordova - 在 Android 中为 phoneGap 加载图像到 Tomcat 服务器

> ID：10184788
> 
> 赞同：1
> 
> 时间：2012-04-17T03:48:24.757
> 
> 标签：cordova, android-emulator, phonegap-plugins

我是phoneGap的新手。我想要的是上传图像，然后将图像下载到 Tomcat 服务器上。我找到了几个上传和下载图片的示例，但它们都是针对 PHP 服务器的。如果有人可以告诉我如何为 Tomcat Server 执行此操作。从我的模拟器中我上传了图像，但在服务器上我什么也看不到。如果有人可以指导我如何做同样的事情。谢谢。

# javascript - 循环 jquery $.get，如何知道循环何时完成

> ID：10184792
> 
> 赞同：0
> 
> 时间：2012-04-17T03:48:40.750
> 
> 标签：javascript, jquery

我正在尝试执行一个循环，在其中使用 jquery $.get 从另一个页面加载一些内容。

这是我正在做的事情：

```
for(var i=0; i<users.length; i++) {
    var myURL = "http://url.com/user.php?user=";

    myURL = myURL + users[i];

    $.get(myURL, function(data){
        $('table').append( data )
    });

} 
```

该部分一切正常，它使用返回的数据更新我的表。我的问题是我想显示一个加载图标，甚至只是显示“加载”的文本，直到它完成从其他页面加载所有数据。

我会让你免于我尝试过的所有不起作用的事情，因为我真的很讨厌 JS，这会很尴尬。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:51:20.947

```
var doneCounter = 0;
for(var i=0; i<users.length; i++) {
    var myURL = "http://url.com/user.php?user=";

    myURL = myURL + users[i];

    $.get(myURL, function(data){
        $('table').append( data );
        doneCounter++;
        if(doneCounter == users.length)  hideBusy(); 
    });

} 
```

# jquery - 使用带有 2 个菜单的 jQuery 突出显示菜单项

> ID：10184793
> 
> 赞同：0
> 
> 时间：2012-04-17T03:49:31.253
> 
> 标签：jquery

我有 2 个菜单。一个在标题中；另一个显示在页面的左侧边栏上。

**标题**

```
<div id="topmenu">
    <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/baseball">Baseball</a></li>
        <li><a href="/football">Football</a></li>
    </ul>
</div> 
```

**在棒球页面上**

```
<div id="leftmenu">
    <ul id="teams">
        <li><a href="/yankees">Yankees</a></li><br />
        <li><a href="/redsox">Red Sox</a></li><br />
        <li><a href="/cubs">Cubs</a></li><br />
    </ul>
</div> 
```

以下是我突出显示#topmenu 的方法（说来话长，但它有效）：

```
 $(function(){

    var url = window.location.pathname, 
        urlRegExp = new RegExp(url.replace(/\/$/,'') + "$"); 
        $('#topmenu li a').each(function(){

            if(urlRegExp.test(this.href.replace(/\/$/,''))){
                $(this).addClass('blue');
            }
        });
   }); 
```

挑战在于#leftmenu：

1 - 我正在使用 jQuery 显示/隐藏每个 -li- 的内容

2 - 当页面最初加载时，#topmenu 项目被突出显示，但我也希望 #leftmenu 中的第一个项目也被突出显示。换句话说，**我希望在选择#topmenu 项和选择第一个#leftmenu 项时显示相同的页面。我怎样才能做到这一点？**

如果有帮助，棒球页面的设置如下：

**棒球.php**

```
<div id="header">
</div>

<div id="main">
<?php include('baseball_stuff.php'); ?>
</div>

<div id="footer">
</div> 
```

然后我在#topmenu 中链接到ballball.php 并在#leftmenu 中链接到ballball_stuff.php，因此我不必复制内容。

jsfiddle：http: [//jsfiddle.net/Ft8FR/](http://jsfiddle.net/Ft8FR/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:53:27.087

你的这部分问题对我来说没有任何意义

> 我希望在选择#topmenu 项目和选择第一个#leftmenu 项目时出现相同的页面。我怎样才能做到这一点？

不过你之前说的还是有道理的。所以我会回答这个问题，希望它是你想要的。

> 我还希望突出显示#leftmenu 中的第一项

```
$('#leftmenu li:first').addClass('blue'); 
```

# backbone.js - 为什么主干路由需要默认路由

> ID：10184796
> 
> 赞同：2
> 
> 时间：2012-04-17T03:49:52.110
> 
> 标签：backbone.js, router

我用backbone.js @创建一个测试用例：http: [//jsfiddle.net/VWBvs/5/](http://jsfiddle.net/VWBvs/5/)

路线定义为

```
var AppRouter = Backbone.Router.extend({
        routes: {
            "/posts/:id" : "getPost",
            "/download/*path": "downloadFile",  
            "*actions" : "defaultRoute"
        },
        getPost: function(id) {
            alert(id);
        },
        defaultRoute : function(actions){
            alert(actions);
        },
        downloadFile: function( path ){ 
            alert(path); // user/images/hey.gif 
        },
        loadView: function( route, action ){ 
            alert(route + "_" + action); // dashboard_graph 
        }
    });

    var app_router = new AppRouter;

    Backbone.history.start();​ 
```

当我改变功能

```
 defaultRoute : function(actions){
            alert(actions);
        }, 
```

至

```
defaultRoute : function(actions){
            var action = actions
        }, 
```

所有其他路线都不起作用，这意味着不会弹出对话框。

但是当重新更改代码时，一切正常。

这真的很奇怪，让我很困惑。真诚的求救......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T03:57:52.410

正如您所拥有的，代码`defaultRoute`是唯一触发的路线。如果您希望其他两条路线触发，则必须删除前导斜线。

```
routes: {
  "posts/:id" : "getPost",
  "download/*path": "downloadFile",  
  "*actions" : "defaultRoute"
} 
```

# ruby-on-rails - Ruby on Rails：Rails 3.0.10 中没有方法错误

> ID：10184797
> 
> 赞同：1
> 
> 时间：2012-04-17T03:50:06.570
> 
> 标签：ruby-on-rails

```
abstract (1.0.0)
actionmailer (3.2.2, 3.0.10, 3.0.5, 3.0.3, 2.3.5, 2.1.0)
actionpack (3.2.2, 3.0.10, 3.0.5, 3.0.3, 3.0.0.beta3, 2.3.5, 2.1.0)
activemodel (3.2.2, 3.0.10, 3.0.5, 3.0.3, 3.0.0.beta3)
activerecord (3.0.10)
activeresource (3.2.2, 3.0.10, 3.0.5, 3.0.3, 2.3.5, 2.1.0)
activesupport (3.2.2, 3.0.10, 3.0.5, 3.0.3, 3.0.0.beta3, 2.3.5, 2.1.0)
arel (3.0.2, 2.0.10, 2.0.6)
bcrypt-ruby (3.0.1, 2.1.2)
bson (1.1.5)
bson_ext (1.1.5)
builder (3.0.0, 2.1.2)
bundle (0.0.1)
bundler (1.1.3, 1.1.1, 1.1.0)
cancan (1.6.7, 1.4.1)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.3.1, 1.2.0)
devise (2.0.4, 1.5.3, 1.1.5)
erubis (2.7.0, 2.6.6)
execjs (1.3.0)
hike (1.2.1)
i18n (0.6.0, 0.5.0, 0.3.7)
journey (1.0.3)
jquery-rails (2.0.2, 2.0.1)
jquery_datepicker (0.3.4)
json (1.6.6, 1.6.5)
libv8 (3.3.10.4 x86-linux)
mail (2.4.4, 2.2.19, 2.2.12, 2.2.7)
memcache-client (1.8.5)
mime-types (1.18, 1.17.2, 1.16)
mongo (1.1.5)
mongoid (2.0.0.beta.20)
multi_json (1.2.0)
mysql2 (0.3.11)
nifty-generators (0.4.2)
orm_adapter (0.0.7)
polyglot (0.3.3, 0.3.1)
rack (1.4.1, 1.2.5, 1.2.1, 1.1.3, 1.0.1)
rack-cache (1.2)
rack-mount (0.6.14, 0.6.13)
rack-ssl (1.3.2)
rack-test (0.6.1, 0.5.7, 0.5.6)
rails (3.0.10)
railties (3.2.2, 3.0.10, 3.0.5, 3.0.3)
rake (0.9.2.2, 0.8.7)
rdoc (3.12)
rolify (3.1.0)
sass (3.1.15)
sass-rails (3.2.5)
sprockets (2.1.2)
sqlite3 (1.3.5)
therubyracer (0.9.10)
thor (0.14.6)
tilt (1.3.3)
treetop (1.4.10, 1.4.9)
tzinfo (0.3.33, 0.3.32, 0.3.23)
uglifier (1.2.4)
warden (1.1.1, 1.0.3)
will_paginate (3.0.3, 3.0.pre2) 
```

以上是宝石清单..

我正在维护一个基本的待办事项，它将在每个任务中定义子任务，但该命令`task=Todo.tasks.new`不会导致方法错误

```
amrit@PC148881:~/mytodos$ rails console
Loading development environment (Rails 3.0.10)
1.9.2-p290 :001 > todo=todo.first
NoMethodError: You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.first
    from (irb):1
    from /home/amrit/.rvm/gems/ruby-1.9.2-p290@1.9.2/gems/railties-3.0.10/lib/rails/commands/console.rb:44:in `start'
    from /home/amrit/.rvm/gems/ruby-1.9.2-p290@1.9.2/gems/railties-3.0.10/lib/rails/commands/console.rb:8:in `start'
    from /home/amrit/.rvm/gems/ruby-1.9.2-p290@1.9.2/gems/railties-3.0.10/lib/rails/commands.rb:23:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'
1.9.2-p290 :002 > todo=Todo.first
 => #<Todo id: 1, name: "Office", description: "work to be completed at office", created_at: "2012-04-17 08:53:35", updated_at: "2012-04-17 08:53:35"> 
1.9.2-p290 :003 > task=Todo.tasks.new
NoMethodError: undefined method `tasks' for #<Class:0xae32588>
    from /home/amrit/.rvm/gems/ruby-1.9.2-p290@1.9.2/gems/activerecord-3.0.10/lib/active_record/base.rb:1014:in `method_missing'
    from (irb):3
    from /home/amrit/.rvm/gems/ruby-1.9.2-p290@1.9.2/gems/railties-3.0.10/lib/rails/commands/console.rb:44:in `start'
    from /home/amrit/.rvm/gems/ruby-1.9.2-p290@1.9.2/gems/railties-3.0.10/lib/rails/commands/console.rb:8:in `start'
    from /home/amrit/.rvm/gems/ruby-1.9.2-p290@1.9.2/gems/railties-3.0.10/lib/rails/commands.rb:23:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'
1.9.2-p290 :004 > ^C
1.9.2-p290 :004 > t=Task.new
 => #<Task id: nil, description: nil, due_date: nil, due_time: nil, completed: nil, todo_id: nil, created_at: nil, updated_at: nil> 
1.9.2-p290 :005 > t.description="meeting"
 => "meeting" 
1.9.2-p290 :006 > t.save
 => true 
1.9.2-p290 :007 > task=Todo.tasks.new
NoMethodError: undefined method `tasks' for #<Class:0xae32588>
    from /home/amrit/.rvm/gems/ruby-1.9.2-p290@1.9.2/gems/activerecord-3.0.10/lib/active_record/base.rb:1014:in `method_missing'
    from (irb):7
    from /home/amrit/.rvm/gems/ruby-1.9.2-p290@1.9.2/gems/railties-3.0.10/lib/rails/commands/console.rb:44:in `start'
    from /home/amrit/.rvm/gems/ruby-1.9.2-p290@1.9.2/gems/railties-3.0.10/lib/rails/commands/console.rb:8:in `start'
    from /home/amrit/.rvm/gems/ruby-1.9.2-p290@1.9.2/gems/railties-3.0.10/lib/rails/commands.rb:23:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'
1.9.2-p290 :008 > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T04:40:07.813

您可能无意中调用`tasks`了 Class 而不是实例。试试这个：

```
task=todo.tasks.new 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T05:58:34.100

这似乎是你正在做的一个简单的错字

`todo=todo.first`, 但什么是第二`todo`？因为看起来你还没有定义它；在你的第二个例子中你做

```
todo=Todo.first 
```

检查你用大写“T”做的第二个例子，尝试纠正，或者你可以尝试

```
todo = Todo.all.first 
```

（假设你有一个名为 Todo 的 AR 模型）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:52:08.320

谢谢 ！！我得到了答案，我在创建我正在尝试的实例时犯了一个错误：t=Todo.new t=Todo.tasks.new 而不是：t=Todo.new x=t.tasks。

# macos - 使一个 Cocos2d mac 窗口透明

> ID：10184799
> 
> 赞同：0
> 
> 时间：2012-04-17T03:50:13.157
> 
> 标签：macos, opengl, cocos2d-iphone

如何使 cocos2d mac 窗口透明，而不是默认的黑色，以便您可以看到桌面？

# iphone - CLLocation 方法 distanceFromLocation 的问题：结果不准确

> ID：10184802
> 
> 赞同：9
> 
> 时间：2012-04-17T03:50:41.673
> 
> 标签：iphone, objective-c, core-location, cllocation

我正在尝试使用 distanceFromLocation: 方法来计算我手里拿着 iPhone 行走的总距离。到目前为止，我一直在四处寻找以帮助纠正我令人困惑、不准确和看似武断的结果。在这些代码片段中，theLabel 只是我的应用程序界面中存在的标签对象，distanceMoved 是我试图存储我走过的总距离的变量，而 locMan 是在我的@interface 文件中声明的位置管理器.

```
- (void)viewDidLoad
{
   locMan = [[CLLocationManager alloc] init];
   locMan.delegate = self;
   [locMan startUpdatingLocation];
   isInitial = true;
   distanceMoved = 0.0;
   [super viewDidLoad];
}

-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
   distanceMoved += [newLocation distanceFromLocation: oldLocation];
   theLabel.text = [NSString stringWithFormat: @"%f meters", distanceMoved];
} 
```

对于解决我在这里做错的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-17T20:00:28.837

1.  过滤掉缓存的（旧的）位置数据，
2.  过滤掉无效的定位结果（准确率 < 0），
3.  将精度要求设置为`kCLLocationAccuracyBest`,
4.  设置最小距离过滤器，最好至少 10 米以过滤掉位置噪声。
5.  **编辑**`oldLocation`：当nil时不要计算距离。

您可以做的还有更多，但只要您获得足够好的水平精度（<30m），这应该可以工作。您可以过滤掉低准确度的结果，但是您必须自己跟踪 oldLocation ，这有点复杂。

添加一个 NSLog（见下文），以便您了解发生了什么。如果您仍然没有得到好的结果，请发布 NSLog 的输出，以便我们查看发生了什么并提供更多帮助。

```
-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    NSTimeInterval age = -[newLocation.timestamp timeIntervalSinceNow]; 

    if (age > 120) return;    // ignore old (cached) updates

    if (newLocation.horizontalAccuracy < 0) return;   // ignore invalid udpates

    // EDIT: need a valid oldLocation to be able to compute distance
    if (oldLocation == nil || oldLocation.horizontalAccuracy < 0) return; 

    CLLocationDistance distance = [newLocation distanceFromLocation: oldLocation];

    NSLog(@"%6.6f/%6.6f to %6.6f/%6.6f for %2.0fm, accuracy +/-%2.0fm",
        oldLocation.coordinate.latitude,
        oldLocation.coordinate.longitude,
        newLocation.coordinate.latitude,
        newLocation.coordinate.longitude, 
        distance,
        newLocation.horizontalAccuracy);

    distanceMoved += distance;
    theLabel.text = [NSString stringWithFormat: @"%f meters", distanceMoved];
}

- (void)viewDidLoad
{
   locMan = [[CLLocationManager alloc] init];
   locMan.delegate = self;
   locMan.desiredAccuracy = kCLLocationAccuracyBest;
   locMan.distanceFilter = 10;

   [locMan startUpdatingLocation];
   isInitial = true;
   distanceMoved = 0.0;
   [super viewDidLoad];
} 
```

**如果您想使用[didUpdateLocations执行相同的操作，请](https://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/occ/intfm/CLLocationManagerDelegate/locationManager%3adidUpdateLocations%3a)**针对 iOS6**进行编辑：（因为现在不推荐使用上述方法）最简单的解决方案是简单地将每个位置保存在一个属性中，以便在下次更新时您拥有以前的位置。在类中声明一个属性来保存`oldLocation`：**

 **```
@property (nonatomic, retain) CLLocation* oldLocation; 
```

然后在委托方法中保存每个`newLocation`以`oldLocation`供下次调用委托方法时使用：

```
-(void)locationManager:(CLLocationManager *)manager didUpdateToLocations:(NSArray *)locations
{
    CLLocation* newLocation = [locations lastObject];

    NSTimeInterval age = -[newLocation.timestamp timeIntervalSinceNow]; 

    if (age > 120) return;    // ignore old (cached) updates

    if (newLocation.horizontalAccuracy < 0) return;   // ignore invalid udpates

    // EDIT: need a valid oldLocation to be able to compute distance
    if (self.oldLocation == nil || self.oldLocation.horizontalAccuracy < 0) {
        self.oldLocation = newLocation;
        return; 
    }

    CLLocationDistance distance = [newLocation distanceFromLocation: self.oldLocation];

    NSLog(@"%6.6f/%6.6f to %6.6f/%6.6f for %2.0fm, accuracy +/-%2.0fm",
        self.oldLocation.coordinate.latitude,
        self.oldLocation.coordinate.longitude,
        newLocation.coordinate.latitude,
        newLocation.coordinate.longitude, 
        distance,
        newLocation.horizontalAccuracy);

    distanceMoved += distance;
    theLabel.text = [NSString stringWithFormat: @"%f meters", distanceMoved];

    self.oldLocation = newLocation;    // save newLocation for next time
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T03:55:21.620

您没有设置位置管理器的准确性。浏览苹果文档，它类似于accuracy = bestfornavigation。或者其他的东西。这应该会像地狱一样耗尽电池，但就是为了这种目的。

编辑：只记得我手头有它。

```
// Create the Location Manager
locationManager = [[CLLocationManager alloc] init];

// Configure the Location Manager
locationManager.delegate = self;
locationManager.desiredAccuracy = kCLLocationAccuracyBestForNavigation; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T03:55:43.357

```
CLLocationDistance distance = [secondLocation distanceFromLocation:firstLocation];  // distance is expressed in meters

CLLocationDistance kilometers = distance / 1000.0;
// or you can also use this..
CLLocationDistance meters = distance;

NSString *distanceString = [[NSString alloc] initWithFormat: @"%f", kilometers];

flot totaldistancecovered = [distanceString floatValue];

//Now,you can use this float value for addition...
// distanceMoved  should be float type variable which is declare in .h file...

 distanceMoved = distanceMoved + totaldistancecovered ;
 theLabel.text = [NSString stringWithFormat: @"%f meters", distanceMoved]; 
```

希望对你有帮助..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T04:21:58.757

您应该做的第一件事是通过检查您从位置管理器收到的第一个更新的时间戳来释放第一个更新，它通常会缓存最后一个已知位置。其次要记住准确性，你得到的初始值总是在一个很大的范围内。**

# android - 向客户发送自定义 Android 应用程序

> ID：10184804
> 
> 赞同：1
> 
> 时间：2012-04-17T03:51:17.380
> 
> 标签：android, installation, sharing, apk

我开发了一个我们现在提供的蓝牙应用程序，但客户要求进行一些定制。我已经完成了定制，但不想将其投放市场，因为我们向他收取了 100.00 美元的更改费用，而且我不希望其他人免费下载它（对他来说似乎不公平）。我怎样才能将应用程序发送给他，以便他可以轻松安装它？他不是开发人员，因此没有 Eclipse 来安装应用程序。

抱歉这么简单的问题，但我看到的只是人们与已经有 eclipse 的朋友共享应用程序。

谢谢你，特拉维斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T04:07:07.217

就像其他人说的那样，`apk`通过电子邮件发送文件并要求他安装它。如果您不希望他将 apk 发送给其他人，您可以尝试将包与他的设备号/ID、谷歌帐户或其他任何东西配对。当然，您应该在代码中实现它，最好以安全的方式（对您和他）。

您可能需要向他提供说明，以在他的设备的设置中启用“**从未知来源安装**”。

# android - TableRow 中的 SeekBar 宽度？

> ID：10184806
> 
> 赞同：1
> 
> 时间：2012-04-17T03:51:19.923
> 
> 标签：android, custom-controls, android-tablelayout

我需要创建一个控件，以便在工作中更轻松地开发一些屏幕。
控件很简单，只有两个按钮和一个 SeekBar。仅用于增加或减少 SeekBar 值的按钮。

这是我的代码：

```
public class SeekbarCheckbox extends TableLayout {
private SeekBar _Seekbar;
private CheckBox _CheckBox;
private TableRow _tr;

public SeekbarCheckbox(Context context, int max) {
    super(context);

     _tr = new TableRow(context);

     Button bt1 = new Button(context);
     bt1.setText("-");
     _tr.addView(bt1);

     _Seekbar = new SeekBar(context);
     _Seekbar.setMax(max);
     _tr.addView(_Seekbar);

     Button bt2 = new Button(context);
     bt2.setText("+");
     _tr.addView(bt2);

     this.addView(_tr, new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

} 
```

}

问题是，当我在应用程序中使用这个控件时，我得到了一个无用宽度的 SeekBar。我分享一张图片以查看结果。

我不能发图片，所以我分享一个链接。 [http://img685.imageshack.us/img685/6756/controlk.png](http://img685.imageshack.us/img685/6756/controlk.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:30:56.350

我试图找到您的问题的解决方案。如果您在 seekbar 上将 weight 设置为 1，那么它将获取所有空间，接受按钮所需的最小空间。对我来说，这段代码运行良好。

```
public class SeekbarCheckbox extends TableLayout {
    private SeekBar _Seekbar;
    private CheckBox _CheckBox;
    private TableRow _tr;

    public SeekbarCheckbox(Context context, int max) {
        super(context);

         _tr = new TableRow(context);

         Button bt1 = new Button(context);
         bt1.setText("-");
         _tr.addView(bt1);

         _Seekbar = new SeekBar(context);
         _Seekbar.setMax(max);
         TableRow.LayoutParams ob = new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT,
                                                              LayoutParams.WRAP_CONTENT,
                                                              1);
         _tr.addView(_Seekbar, ob);

         Button bt2 = new Button(context);
         bt2.setText("+");
         _tr.addView(bt2);

         _tr.setBackgroundColor(Color.BLUE);
         this.addView(_tr);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T04:37:05.533

为视图设置权​​重值应该可以解决问题。

对于按钮：

```
setLayoutParams(new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 2f)); 
```

搜索栏：

```
setLayoutParams(new TableRow.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT, 10f)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T05:33:37.030

替换您的布局代码，如下所示

```
 public SeekBarcheckbox(Context context, int max) {
    super(context);

     _tr = new TableRow(context);
     _tr.setWeightSum(10f);
     Button bt1 = new Button(context);
     bt1.setText("-");
     TableRow.LayoutParams layoutParams=new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT,2f);
     _tr.addView(bt1, layoutParams);
     _Seekbar = new SeekBar(context);
     _Seekbar.setMax(max);
   TableRow.LayoutParams layoutParams1=new TableRow.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT,7f);
     _tr.addView(_Seekbar,layoutParams1);
     Button bt2 = new Button(context);
     bt2.setText("+");
     LinearLayout.LayoutParams layoutParams3=new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT,1f);
     _tr.addView(bt2,layoutParams3);
     LinearLayout.LayoutParams layoutParams2=new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
     this.addView(_tr,layoutParams2);

} 
```

我在活动中使用了以下代码

```
 seekBarcheckbox=new SeekBarcheckbox(this, 100);
    setContentView(seekBarcheckbox); 
```

它为我工作......

# php - 如何在 git 子模块中拥有我的项目特定文件？

> ID：10184809
> 
> 赞同：1
> 
> 时间：2012-04-17T03:51:34.850
> 
> 标签：php, git, cakephp, twig, git-submodules

我有一个 cakephp 项目。让我们称之为*超级*项目。

它有自己的 github 存储库。

*Super*有从这个 repo 中提取的 git 子模块。[https://github.com/predominant/TwigView](https://github.com/predominant/TwigView)

问题是我需要有自己的项目特定扩展，所以我需要在[https://github.com/predominant/TwigView](https://github.com/predominant/TwigView)的 Lib 文件夹中创建新文件，并且我需要在文件 View/TwigView 中添加 require_once 语句[https://github.com/predominant/TwigView](https://github.com/predominant/TwigView)的.php

我想尽可能多地维护 git 子模块。

我知道我可以分叉[https://github.com/predominant/TwigView](https://github.com/predominant/TwigView)并添加项目特定的扩展文件和更改。

*Super*然后将这个分叉版本作为 git 子模块。

但是，我对此并不满意，因为这意味着

1.  从上游更新分叉版本稍微困难一些
2.  我需要每个项目有 1 个分叉版本。

*在 Project Super*和其他 cakephp 项目中使用[https://github.com/predominant/TwigView](https://github.com/predominant/TwigView)作为 git 子模块的最干净且易于维护的方法是什么？

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T04:17:34.607

1.  不，更新你的分叉项目应该更难。
    如果您只是将上游（原始`TwigView`仓库）添加为远程，您可以将任何更改从上游拉到本地子模块，然后推回您的 fork。
    （如“[为分叉的 Github 存储库拉取新更新](https://stackoverflow.com/questions/3903817/pull-new-updates-for-forked-github-repository/3903835#3903835)”中所述）
    当然，这稍微难一些，但这是推荐的工作流程。
2.  为什么每个 repo 一个 fork？
    分叉背后的想法是获得发布权限（您可以推送到分叉，因为您拥有它）。
    为什么不在独特的`TwigView`分叉中推送到每个项目的分支？*

# ipad - 锁定模式后 iPad 的旋转问题

> ID：10184813
> 
> 赞同：1
> 
> 时间：2012-04-17T03:52:35.267
> 
> 标签：ipad

我的应用程序支持这两种模式。它完美地支持旋转，但只有一个小问题。

当我在纵向模式下使用我的应用程序并且我锁定设备而不是旋转并解锁它时，它仍然保持纵向模式。我能做些什么来避免这种情况。

在横向中，当我锁定它而不是纵向解锁它时，它工作正常。

谢谢

# actionscript-3 - 用于其他平台（如 C#）的 flash/vector 资产生成

> ID：10184821
> 
> 赞同：0
> 
> 时间：2012-04-17T03:53:44.747
> 
> 标签：actionscript-3, flash, resources, embedded-resource

Flash 的魔力（有些人声称它失败了）是 Flash IDE。Flash IDE 非常适合为我的目的生成资产。本质上，您可以绘制或导入您喜欢的任何内容，然后分配一个类名。导出为 swf，然后加载另一个知道要查找什么的 swf。

缺乏生成内容/资产的图形方式对我来说有点限制。有可能为每个资源生成一个矢量文件，但与闪存中的生产管道相比，它相当麻烦。

是否有任何库可以显示 swf 嵌入式类并与之交互，或创建用于不同环境的内容的替代方法？

# java - 循环搜索数组，打印多个结果

> ID：10184822
> 
> 赞同：0
> 
> 时间：2012-04-17T03:53:49.287
> 
> 标签：java, arrays, loops

我必须搜索凯迪拉克对象数组以显示某个模型的结果，比如说“Escalade”，我无法确定我的代码具体需要放在哪里才能在控制台屏幕上打印结果。当我尝试打印我现在拥有的东西时，我一直陷入循环。关于我的程序的其他一切都在工作，我只需要能够在控制台屏幕上显示多个结果。

这是我的代码：

```
 while( response != null )
    {
      if( response.length() > 0 )
      {
        count = 0;
        found = false;
        while( count < data.length && data[count] != null && !found )
        {
          item = data[count].getModel();
          if( item.equalsIgnoreCase( response ) )
          {

            found = true;
          }
          else{
            count++;
          }
          message = "Model:  " + data[count].getModel() + "\n" +
                    "Stock Number:  " + data[count].getStockNum() + "\n" +
                    "Color            :  " + data[count].getColor() + "\n" +
                    "Price  :  " + data[count].getPrice();
          System.out.print( message );
        }

        if( !found )
          message = "Model not found in array.";
    }
    }
    response = JOptionPane.showInputDialog( prompt );
  } 
```

此外，搜索的第二部分是显示在用户输入的 3000 美元以内的汽车的搜索结果，并且肯定也会对此提供一些指导，因为这两种类型的搜索相对相似。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:59:57.610

您没有显示所有代码，但如果您处于无限循环中，请查看循环条件。看起来您正在检查是否`response`不为空，但`response`从未在循环内分配，因此一旦进入，您将被卡住。

此外，`count`由于您在循环中检查它，因此可能应该每次都增加。当找到一个时，您不会增加它，因此循环永远不会中断。

我建议从头开始重新编写这段代码。我认为你可以简化你的条件，让你自己（和评分者）更容易理解。

我会让你开始。

```
do {
    response = JOptionPane.showInputDialog( prompt );
    for (int i=0; i < data.length; i++) {
        // do stuff with data[i] here
    }
} while(response != null); 
```

我认为 do-while 循环对于检查用户输入是有意义的。如果您正在循环遍历任何元素，则 for 循环是有意义的。从这里您可以检查用户输入，无需计算长度，因为 equalsIgnoreCase() 将为您处理字符串比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T04:06:47.560

如果匹配或找到模型，您的内部循环永远不会结束。因此，在这种情况下，循环将变为无限。您需要增加内部循环中的计数。因此，此增量应该独立发生，您可以安全地完成内部循环.但是，一旦找到模型并在此之后显示其信息，您可以在这里轻松地做另一件事来打破内部循环。

```
while( count < data.length && data[count] != null && !found )
        {
          item = data[count].getModel();
          if( item.equalsIgnoreCase( response ) )
          {

            found = true;
            break;
          }
          else{
            count++;
          }
          message = "Model:  " + data[count].getModel() + "\n" +
                    "Stock Number:  " + data[count].getStockNum() + "\n" +
                    "Color            :  " + data[count].getColor() + "\n" +
                    "Price  :  " + data[count].getPrice();
          System.out.print( message );
        } 
```

希望这会帮助你。

# sql - SPARQL：相当于 SQL UPDATE？

> ID：10184823
> 
> 赞同：7
> 
> 时间：2012-04-17T03:53:59.093
> 
> 标签：sql, sql-update, sparql

我想知道 SPARQL 是否有相当于 SQL“更新”查询的功能？我在哪里可以找到适合初学者的教程？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T05:27:00.177

是 – [SPARQL 更新](http://www.w3.org/TR/sparql11-update/)，SPARQL 1.1 中的新功能。我强烈推荐 Bob DuCharme 的[Learning SPARQL](http://www.learningsparql.com/)书。我不知道有什么好的初学者教程，但是如果您知道如何使用 SPARQL 查询数据，那么 SPARQL 更新规范中的示例应该可以帮助您入门。

# c++ - 为什么这种依赖类型不能算作使用模板参数的特化？

> ID：10184824
> 
> 赞同：5
> 
> 时间：2012-04-17T03:54:18.507
> 
> 标签：c++, templates, gcc, specialization

我正在尝试将专业分组在一起以避免多次编写它们。例如，在下面的代码中，我尝试将“float”和“double”特化为 foo::func(); 的一种实现情况。然后我对“bool”使用另一种实现。

```
template<typename T> struct foo;

template<typename T> struct bar;
template<> struct bar<float> { typedef float Type; };
template<> struct bar<double> { typedef double Type; };

/* specialize for float and double here */
template<typename T> struct foo<typename bar<T>::Type> {
    static void func() { ... }
};

template<> struct foo<bool> {
    static void func() { ... }
}; 
```

这在 GCC 4.4.3 中出错。（这是一个目标编译器，因为它是 Ubuntu Server 10.04 LTS 的库存，据称还有三年的寿命。）错误是：

```
foo.cpp:8: error: template parameters not used in partial specialization:
foo.cpp:8: error:         ‘T’ 
```

该错误指的是 foo 的第一个特化（对于“float”和“double”）。

我看不出我在这里违反了 C++ 的哪一部分——如果有人知道这一章和经文，我将不胜感激。此外，如果有人知道实现相同目标的另一种方法（重新使用特定类型组的特化，而没有不必要的冗长代码），我也将不胜感激任何建议！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T05:32:40.633

```
template<typename T> struct foo<typename bar<T>::Type> {
    static void func() { ... }
}; 
```

您`T`在不可演绎的上下文中使用，因此`T`即使编译器知道`bar<T>::Type`.

假设你写，

```
foo<double> foodouble; 
```

那么你可能会想，实例化时会选择`bar`哪个专门的？仅当编译器可以确保不存在另一个定义为嵌套类型的特化时，这似乎是合理的，如下所示：`double``foo``bar``double`

```
template<> struct bar<int> { typedef double Type; }; 
```

现在`bar<double>::Type`和`bar<int>::Type`双方都给`double`。所以底线是： 可能存在无数个特化`bar`，所有这些都可能`double`作为嵌套类型提供，使得编译器无法*唯一地*推导出`bar`类模板的模板参数。

* * *

您可以将[SFINAE](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)用作：

```
#include <iostream>

template<typename T> struct bar { typedef void type; };
template<> struct bar<float> { typedef bar<float> type; };
template<> struct bar<double> { typedef bar<double> type; };

template<typename T> 
struct foo : bar<T>::type
{
    static void func() 
    { 
        std::cout << "primary template for float and double" << std::endl; 
    }
};

template<> 
struct foo<bool> 
{
    static void func() 
    { 
       std::cout << "specialization for for bool" << std::endl; 
    }
};

int main()
{
     foo<float>::func();
     foo<double>::func();
     foo<bool>::func();
} 
```

输出（[在线演示](http://ideone.com/XVkE3)）：

```
primary template for float and double
primary template for float and double
specialization for for bool 
```

请注意，这`struct foo : bar<T>::type`不再是专业化。它是一个主要模板。另请注意，它可能不是您想要的，因为它禁用了除`float`,`double`和`bool`;以外的类型参数的类模板的所有实例化。例如，您不能使用`foo<int>`. 但我也注意到您未定义主模板，所以我希望这个解决方案符合您的要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T05:29:01.627

我不认为你正在尝试的是可能的。[我在这里](https://stackoverflow.com/questions/6398912/template-parameters-not-used-in-partial-specialization)发现了一个类似的问题。我没有链接，但是 c++ 标准的相关部分是 14.8.2.5。这是关于模板参数推导部分的引用：

```
The non-deduced contexts are:
— The nested-name-specifier of a type that was specified using a qualified-id.
— A non-type template argument or an array bound in which a subexpression references a template
parameter.
— A template parameter used in the parameter type of a function parameter that has a default argument
that is being used in the call for which argument deduction is being done.
— A function parameter for which argument deduction cannot be done because the associated function
argument is a function, or a set of overloaded functions (13.4), and one or more of the following apply:
— more than one function matches the function parameter type (resulting in an ambiguous deduc-
tion), or
— no function matches the function parameter type, or
— the set of functions supplied as an argument contains one or more function templates.
— A function parameter for which the associated argument is an initializer list (8.5.4) but the parameter
does not have std::initializer_list or reference to possibly cv-qualified std::initializer_list
type. [ Example:
template<class T> void g(T);
g({1,2,3});
// error: no argument deduced for T
— end example ]
— A function parameter pack that does not occur at the end of the parameter-declaration-clause. 
```

在您的情况下，您使用合格的 id 指定类型，因此无法推断出参数。

无需过多考虑，作为一种快速解决方法，您可以向 foo 添加第二个非类型 bool 参数 - 类似于：

```
template<typename T, bool is_decimal = false>
struct foo {...}; // general case

template<typename T>
struct foo<T, true> { ... }; // case where T is float or double 
```

祝你好运...

# jquery - jQuery CSS：下拉交互

> ID：10184826
> 
> 赞同：0
> 
> 时间：2012-04-17T03:54:39.700
> 
> 标签：jquery, css

我的代码有以下问题->它似乎没有与 jQuery 交互，但我在 js 控制台中没有收到任何错误：

此菜单中的主要下拉标题是**Trails**

当 Trails 悬停在它上面时，它应该显示如下`<li>`

**jQuery：**

```
jQuery(document).ready(function () {
    $(".current a").mouseenter(function(){
       $(this).siblings("ul").show();
    }).mouseout(function(){
       $(this).siblings("ul").hide();
    });
}); 
```

**CSS：**

```
//Controls the sub li    
#wrapper #contentarea #blue_box .centerblue_txt ul li ul li{
        width:185px;
        padding:5px 0 5px 5px;
        border-top:1px dotted #424242;
        border-bottom:0px;
    }
//Controls the sub ul
    #wrapper #contentarea #blue_box .centerblue_txt ul li ul{
        border:1px solid red;
        display:none;
    } 
```

**HTML:** -*这种 HTML 格式由 PYROCMS 提供，我无法控制它*

```
<li class="current">
        <a href="">Trials</a>
        <ul>
            <li class="first">
                <a href="">Link One</a>
            </li>
            <li>
                <a href="">Link Two</a>
            </li>
            <li>
                <a href="">Link Three</a>
            </li>
            <li class="last">
                <a href="">Link Four</a>
            </li>
        </ul>
    </li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T04:16:34.987

嘿，这可能不是您所要求的，但这将解决您的问题。

将此添加到您的 CSS 并删除该 jQuery 脚本

```
​.curre​nt > ul {
display: none;
}

​.current:hover > ul {
display: block;
}​ 
```

因为即使出于某种模糊的原因您的 jQuery 无法正常工作，让我告诉您即使您运行它也不会产生预期的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T04:52:54.963

这是你要杰西的答案。为了帮助减少发生冲突的可能性，您可以创建自己的命名空间。jQuery 本身可以使用，最常见的是，`$`或者您也可以使用实际的单词/名称`jQuery`来代替 $。但是您也可以使用您想要的任何单词/名称创建自己的版本。在脚本名称的开头是一个变量，在我的示例中，我使用了您的名字，如下所示：

```
var jess = jQuery; 
```

然后，无论何时使用`jess`它都会使用变量值，即 jQuery。所以：

```
jess(document).ready() 
```

相当于：

```
$(document).ready() 
```

并：

```
jQuery(document).ready() 
```

至于无法查看或单击子菜单，这是因为您的 jquery 调用仅在您将鼠标悬停在父元素上时才显示子菜单，这意味着一旦您的鼠标移开它，您就会丢失子菜单。当涉及到菜单和子菜单时，请参考 tea_totaler 的建议并使用 CSS，它对用户来说更容易和更清晰

这是[一篇关于命名空间的不错的文章](http://javascriptweblog.wordpress.com/2010/12/07/namespacing-in-javascript/)。

如果你坚持使用 jQuery 作为子菜单，你可以使用`.toggle`函数而不是`.show`and`.hide`函数。将其创建为`onClick`事件而不是`mouseenter`和/或`mouseOver`事件。同样，您不会对使用 JS 的菜单获得最大的感觉，建议使用 CSS，但`.toggle`我认为这将是鼠标事件的一个很好的替代品

这是一个[小提琴](http://jsfiddle.net/azPUC/)，您可以使用简单而基本的 CSS 来获得您想要的结果。

# ruby-on-rails - 从 Rails 应用程序中的文本区域格式化

> ID：10184827
> 
> 赞同：0
> 
> 时间：2012-04-17T03:54:46.320
> 
> 标签：ruby-on-rails, textarea, carriage-return

我有一个 Rails 应用程序，它有一个文本输入框供用户添加他们的工作描述。我需要它来维护段落，但它只是在一行上提供所有内容......

eg:这是用户在文本区输入的方式...

这是我工作了 12 年的精彩电影。这一直是爱的劳动。

一旦用户提交表单，这就是它的结束方式......

这是我工作了 12 年的精彩电影。这一直是爱的劳动。

我认为这是代码的相关部分 -

.field .name= f.label :description .value= f.text_area :description, :rows => 5,

代码位于 .haml 文件中。

任何帮助将不胜感激。干杯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T06:11:14.040

尝试[simple_format](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-simple_format)：

```
my_text = "Here is some basic text...\n...with a line break."

simple_format(my_text) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T04:41:47.227

在显示时，您可以使用 Redcarpet markdown。

```
def markdown(content)

  markdown =Redcarpet::Markdown.new(Redcarpet::Render::XHTML,:hard_wrap=>true,:filter_html=>true,:autolink=>true,:no_intra_emphasis=>true)
  markdown.render(content).html_safe

end 
```

在用户界面上

> 降价（@movie.description）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T05:05:01.047

换行符仍然存在，只是没有转换为 HTML 换行符。要查看这一点，请查看包含内容的页面源。您将在那里看到换行符。

这些换行符需要转换为 html 换行符，即`<br>`.

要解决此问题，请在您的视图模板中，将您对内容的引用从 更改`text`为`text.gsub("\n","<br>\n")`。

# mysql - 按案例排序

> ID：10184828
> 
> 赞同：1
> 
> 时间：2012-04-17T03:54:46.843
> 
> 标签：mysql, sql, sql-order-by

这是一个有效的 SQL 语句吗

```
select title
from table
order by case when title like "%string%" then 0 else 1 end asc 
```

如果我使用`title = "string"`我会得到有效的结果。如何更改它以使其接受 %string%

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T04:10:59.670

```
select title
from table
order by case when title regexp "string" then 0 else 1 end asc; 
```

> > 我不是说**`^string`**因为你在寻找**`%string%`**.

# iphone - iOS 上的多页应用

> ID：10184836
> 
> 赞同：1
> 
> 时间：2012-04-17T03:56:08.547
> 
> 标签：iphone, ios, multipage

我是 iOS 开发的新手，我一直在尝试构建一个应用程序。但我坚持一个我想实施的想法。

这个想法是实现一个多页应用程序，但不完全像一本书。如果您查看 Epicurious 应用程序，并且如果您搜索任何成分，搜索结果会以多页格式显示。在底部，它显示搜索结果编号（例如 5 of 77），当用户从右向左滑动时，会出现下一个结果。

有人可以告诉我哪种类型的应用程序（基于页面的应用程序或实用程序应用程序）可以让我这样做，以及如何实现如上所述的多个页面？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T04:03:25.910

演示此功能的模板是基于页面的应用程序，但您需要为您的搜索结果要求添加一些自定义代码。

最好从空白或单视图应用程序开始，然后添加搜索控件和 UIPageViewController。

[有一个关于techotopia](http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_UIPageViewController_Application)的很好的教程可以帮助你入门。

# python - 如何让服务员服务器在 EC2 实例中工作？

> ID：10184838
> 
> 赞同：0
> 
> 时间：2012-04-17T03:56:19.970
> 
> 标签：python, amazon-ec2, pyramid, waitress

我想从 EC2 实例建立一个部分开发的网站。该网站正在使用 Pyramid Web 框架开发。是否可以从 EC2 设置简单的女服务员服务器？

我尝试了[这些说明](http://docs.pylonsproject.org/projects/pyramid/en/1.0-branch/tutorials/modwsgi/index.html)来设置 Apache 服务器。但是当我将浏览器指向公共 DNS 时，我收到“网站响应时间过长”的错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T04:28:46.040

First of all, I'd recommend using mod_wsgi. I think it's the easiest to set up. Ignoring that, waitress is a **WSGI server**. It can run on port 80 directly if you want to.

```
[server:main]
use = egg:waitress
host = 0.0.0.0
port = 80 
```

Unfortunately, if you do this, you need to be root. A better approach is to set the waitress server on an unprivileged port such as 8000 and use a reverse proxy to forward requests to your site.

Look at the deployment recipes in the pyramid cookbook here:

[http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/deployment/index.html](http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/deployment/index.html)

# xml - 使用 xslt 删除在 XML 中相似且不完全相同的节点上的删除

> ID：10184846
> 
> 赞同：0
> 
> 时间：2012-04-17T03:57:35.093
> 
> 标签：xml, xslt

如果我有这个 xml 文件：

```
<root> 
        <node id="a">
            <section id="a_1">
               <item id="0">
                    <attribute>
                        <color>Red</color>
                    </attribute>
               </item>
            </section>

            <section id="a_2">
               <item id="0">
                    <attribute>
                        <color>Red</color>
                    </attribute>
               </item>
            </section>            
        </node>

        <node id="b">
            <section id="b_1">

                <user id="b_1a">
                    <attribute>
                        <name>John</name>
                    </attribute>
                </user>

                <user id="b_1b">
                    <attribute>a</attribute>
                </user>

            </section>

            <section id="b_1" method="create">

                <user id="b_1a">
                    <attribute>
                        <name>John</name>
                    </attribute>
                </user>

                <user id="b_1c">
                    <attribute>a</attribute>
                </user>

            </section>

            <section id="b_2">                
                <user id="b_1a">
                    <attribute>
                        <name>John</name>
                    </attribute>
                </user>

            </section>
        </node>
 </root> 
```

我希望输出是这样的：

```
 <root> 
        <node id="a">
            <section id="a_1">
               <item id="0">
                    <attribute>
                        <color>Red</color>
                    </attribute>
               </item>
            </section>

            <section id="a_2">
               <item id="0">
                    <attribute>
                        <color>Red</color>
                    </attribute>
               </item>
            </section>            
        </node>

        <node id="b">
            <section id="b_1">

                <user id="b_1a">
                    <attribute>
                        <name>John</name>
                    </attribute>
                </user>

                <user id="b_1b">
                    <attribute>a</attribute>
                </user>

            </section>

            <section id="b_1" method="create">

                <user id="b_1c">
                    <attribute>a</attribute>
                </user>

            </section>

            <section id="b_2">                
                <user id="b_1a">
                    <attribute>
                        <name>John</name>
                    </attribute>
                </user>

            </section>
        </node>
 </root> 
```

正如我们所看到的，只要 id 相同，它就会被视为一个部分 id，即使它上面有其他方法。因此，我们删除了第二部分 id (b_1) 中包含“方法创建”的用户 id (b_1a)。这真的让我很沮丧，我无法省略该方法。所以任何帮助将不胜感激。如果我们查看部分 id b_2，它也有相同的用户 id b_1 和相同的“John”，但我们不会删除它，因为它在不同的部分 id 中。所以基本上我们根据section id来比较它。

PS：元素可以是任何东西，不总是用户或部分，但只要 id 相同。

非常感谢。

亲切的问候，约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:05:41.707

Although I am not entirely clear on the requirements, I think you may want to group elements by their **id** and the containing section **id**. This means you may be able to use an **xsl:key** to look-up elements

```
<xsl:key 
   name="lookup" 
   match="section//*[@id]" use="concat(ancestor::section[1]/@id, '|', @id)" /> 
```

Here we are looking up elements (any element) based on their section ID and their own ID. Then it is just a case of ignoring elements in sections where there is another element with a matching id that exists in the lookup.

```
<xsl:template 
   match="section//*[@id]
     [generate-id() 
     != generate-id(key('lookup', concat(ancestor::section[1]/@id, '|', @id))[1])]" /> 
```

(This is effectively saying, is this element the first element in the look-up. If not, ignore it)

Here is the full XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:key name="lookup" match="section//*[@id]" use="concat(ancestor::section[1]/@id, '|', @id)" />

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="section//*[@id][generate-id() != generate-id(key('lookup', concat(ancestor::section[1]/@id, '|', @id))[1])]" />
</xsl:stylesheet> 
```

When applied to your sample XML, the following is output

```
<root>
   <node id="a">
      <section id="a_1">
         <item id="0">
            <attribute>
               <color>Red</color>
            </attribute>
         </item>
      </section>
      <section id="a_2">
         <item id="0">
            <attribute>
               <color>Red</color>
            </attribute>
         </item>
      </section>
   </node>
   <node id="b">
      <section id="b_1">
         <user id="b_1a">
            <attribute>
               <name>John</name>
            </attribute>
         </user>
         <user id="b_1b">
            <attribute>a</attribute>
         </user>
      </section>
      <section id="b_1" method="create">
         <user id="b_1c">
            <attribute>a</attribute>
         </user>
      </section>
      <section id="b_2">
         <user id="b_1a">
            <attribute>
               <name>John</name>
            </attribute>
         </user>
      </section>
   </node>
</root> 
```

# jquery - 查找 jquery 的源包含伪选择器

> ID：10184851
> 
> 赞同：0
> 
> 时间：2012-04-17T03:58:02.310
> 
> 标签：jquery

我想找到实现[contains psuedo-selector的](http://api.jquery.com/contains-selector/)[jquery 源代码](https://github.com/jquery/jquery)部分。因为我想看看他们是如何做到的，以便为我正在做的类似事情提供想法。

但我似乎无法找到这是在哪里实现的。

其他人可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T04:01:43.547

它属于 Sizzle（选择器引擎）：[https ://github.com/jquery/sizzle/blob/master/sizzle.js#L753](https://github.com/jquery/sizzle/blob/master/sizzle.js#L753)

# entity-framework - 实体框架代码优先：使用控制台应用程序初始化数据库

> ID：10184852
> 
> 赞同：3
> 
> 时间：2012-04-17T03:58:02.707
> 
> 标签：entity-framework, code-first

我正在尝试运行初始化代码，但它没有运行。这是我在主要方法中的内容

```
 static void Main(string[] args)
    {
        Database.SetInitializer<Context>(new RecipesSeedData());

    } 
```

我是否应该在 main 中添加其他内容以使其运行以下代码？当我在调试器中单步执行代码时，它甚至没有进入初始化代码，这让我觉得我错过了一些重要的东西。

```
public class RecipesSeedData : DropCreateDatabaseAlways<Context>
{
    protected override void Seed(Context context)
    {
        var mt = new MenuType {MenuTypeId = 1};

        context.MenuTypes.Add(mt);

        base.Seed(context);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T04:04:32.703

您刚刚告诉 EF 在初始化数据库时它需要使用您的初始化程序，但您没有告诉它实际初始化数据库。当您对 DbContext 进行一些操作时，数据库将被初始化。这是一篇很棒的帖子，它准确地描述了幕后发生的事情：http: [//blog.oneunicorn.com/2011/04/15/code-first-inside-dbcontext-initialization/](http://blog.oneunicorn.com/2011/04/15/code-first-inside-dbcontext-initialization/)（包括有关 DbInitializers 的详细信息）

# ruby-on-rails - Rails、Stripe 和 Subscriptions - 模型

> ID：10184853
> 
> 赞同：8
> 
> 时间：2012-04-17T03:58:04.087
> 
> 标签：ruby-on-rails, stripe-payments

在我的网站中，我的所有 Stripe 集成都在工作，但我仍在努力思考如何确定订阅是否处于活动状态。我曾考虑将所有内容都保存在本地数据库中，但随后我会从 Stripe 获得重复数据。但是，如果 Stripe 是主记录，如果它们已关闭并且我无法确定用户是否有活动订阅怎么办？在我看来，应该有一种方法可以将所有内容同步在一起。我应该与帐户/用户保留某种当前订阅到期日期吗？

模型应该存储哪些订阅信息？这应该是用户模型的一部分还是单独的“订阅”模型的一部分？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-07T04:00:29.420

只需存储一个标志，指示订阅是否处于活动状态，订阅时默认设置为 true。

然后设置条带回调挂钩，以在订阅过期/取消/其他情况下通知您的应用程序。收听 customer.subscription.updated 并查看状态字段，可以是活动、过期、取消或未付款。

条带会立即通知您，因此无需承担不断检查的开销。如果条带由于某种原因无法进行回调，它将使用指数退避重试几次，因此非常健壮。

不要自己实现订阅，也不要定期运行作业以与条带同步。使用条纹回调钩子，这两种策略都是完全不必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:45:03.407

我使用 SaaS Rails Kit 的方法是将信息保留在订阅模型中，包括 next_renewal_at 字段，而*不是*让 Stripe 来进行计费。相反，我有一个每日 cron 作业，它对所有具有 new_renewal_at = 今天的订阅进行计费，因此您可以立即知道收费是否失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T04:57:45.027

> “什么订阅信息应该与模型一起存储？这应该是用户模型的一部分还是作为单独的“订阅”模型的一部分？”

将所有信息存储在订阅模型中，并将该模型与用户相关联。由于订阅有自己的元数据并且它们实际上是一个不同的实体，因此将它们分开存储是有意义的。

> “但是，如果 Stripe 是主记录，如果它们出现故障并且我无法确定用户是否有活动订阅怎么办？在我看来，应该有一种方法可以将所有内容同步在一起。我应该保留某种日期吗？帐户/用户的当前订阅到期时间？”

如果您正在检查每个请求或登录的订阅，那么每次都点击条带 API 可能没有意义......这是很多开销。这一切都取决于您的用例，但运行一个每日（或每小时）的 cron 作业可能是有意义的，该作业点击条带 api 检查订阅到期，然后更新本地订阅存储。

# javascript - 需要经过身份验证的 WCF REST 架构建议

> ID：10184854
> 
> 赞同：1
> 
> 时间：2012-04-17T03:58:24.987
> 
> 标签：javascript, wcf, rest, authentication, kendo-ui

我一直在做大量的研究和阅读，以至于我的脑海中充满了各种选择。我想做的是创建一个 WCF 服务，该服务将使用基于角色的身份验证包含数据访问和业务逻辑。我想从使用 KendoUI 的 JavaScript 应用程序中使用此服务。我确实有基于消息的安全工作，并且我有 SqlMembershipProvider 和 SqlRoleProvider 在示例 WCF 服务中工作。从另一个 .NET 应用程序访问时它工作正常；我真正感到困惑的地方是使用 JavaScript 以 RESTful 方式访问它的最佳方式。

从我目前所读到的，听起来直接从 JS 到 WCF REST 可能不是最简单或最受支持的路径。许多与 REST 相关的 WCF 扩展已被弃用（例如 WCF REST Starter Kit 已弃用；WCF Web API 最近成为 ASP.NET Web API，不再引用 WCF？）。因为看起来做 REST 的“官方”方式是使用 ASP.NET Web API，而 ASP.NET Web API 现在是 ASP.NET MVC 的一部分，这让我觉得也许我应该用一个ASP.NET MVC 应用程序提供带有 KendoUI 代码的页面，这些代码将对 MVC 应用程序进行 RESTful 调用，然后将调用转发到 WCF 服务。我可以使用[此答案中描述的技术](https://stackoverflow.com/questions/5237162/authentication-with-an-soa-approach-using-c-sharp)实现 MVC 应用程序将与 Forms Authentication 一起使用的自定义 MembershipProvider 以集中 WCF 服务中的授权/身份验证逻辑，同时使其完全集成到 MVC 层以及利用 ASP.NET Forms 身份验证的功能（例如自动重定向和cookies）。

回顾一下，对我来说重要的部分是：1\. 一个身份验证、角色感知的 WCF 服务，以及 2\. 以最简单的方式从 JavaScript 应用程序访问其方法。我想尽可能地利用内置或开箱即用的功能。我在上面提出的架构是否合理？它是我能得到的那么简单，还是有比这更简单的方法？

非常感谢，亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:29:41.577

我强烈建议您转向使用 ASP.Net Web API 框架。您可以使用 ASP.Net MVC 和 Web API 的组合来实现您提到的所有内容，包括身份验证\授权。

查看 Visual Studio 创建新的 ASP.Net MVC 项目时生成的模板。它包含身份验证工作流程的基本实现。您可以从此工作流派生实施。

ASP.Net 中的表单身份验证归结为在响应中设置表单身份验证票证 cookie，然后使用 ASP.Net 提供的身份验证\授权基础结构来强制执行任何身份验证\授权约束。这与 ASP.Net、MVC、WCF（在 ASP.Net 兼容模式下）无缝协作。

# solr - 卡桑德拉还是 SOLR？是什么为前端读取查询提供了更好的性能？

> ID：10184858
> 
> 赞同：15
> 
> 时间：2012-04-17T03:59:28.177
> 
> 标签：solr, lucene, indexing, cassandra, solandra

我的团队要求我在 Cassandra 和 SOLR 之间进行选择，以便更快地响应@前端查询。我告诉他们 Cassandra 是 NOSQL 数据库，而 SOLR 是索引。但是后来他们说我们可以将完整的数据库推送到 SOLR（比如将 SOLR 用作数据库），或者我们可以将 Cassandra 与 SOLR 一起使用。都糊涂了。

我们正在处理的数据量就像 10 亿个分布在 4 个 MySQL 表中（使用连接获取），我们只从网站获得读取查询。我们不需要全文搜索

我认为 SOLR 不能轻易被击败的是它的全文搜索功能，但我们不需要它。

那么，SOLR 还有什么 Cassandra 无法提供的，Cassandra 有什么可以在我们的特定情况下替代 SOLR 的呢？

换句话说，谁的表现会更好？卡桑德拉一个人？SOLR 作为一个单独的数据库？还是两者一起？最重要的是为什么和为什么不呢？

对我来说，在我的下一次团队会议上用优势支持我的选择真的很重要，就好像为什么一个比另一个更好一样。

并提前感谢。

**编辑：**

*   **SOLANDRA**不是一个选择，因为我猜它没有那么成熟，也不再需要维护
*   **DataStax**不是一个选项，因为 SOLR 功能仅在企业版中提供

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T00:43:32.960

如果你不需要 Solr 的全文搜索功能，我认为没有理由选择它而不是 Cassandra。

（披露：我为 DataStax 工作。）

在操作上，由于基于 Dynamo 的架构，处理 Cassandra 集群会简单得多。对 Solr 进行分片可能会非常痛苦，这也是我们 DataStax 将搜索内置到 DSE 中的重要原因之一；这是*很多*人想要避免的。我不是想在 DSE 上卖给你，只是指出 Solr 的缺点。

例如，当您想使用 Solr 更改分片数量时，您必须创建并构建一个全新的索引。您必须担心 Solr 集群的死锁。还有其他几个限制：[http ://wiki.apache.org/solr/DistributedSearch](http://wiki.apache.org/solr/DistributedSearch)

你还没有说太多关于你需要支持什么样的查询。添加该信息将为您提供更好的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T05:39:52.690

*   Cassandra 是一个 NoSQL 数据存储，旨在处理大量数据。兆字节及以上。它绝对是为执行而设计的。
*   请记住，NoSQL DB 或数据存储在查询方面的功能有限。他们不会有 JOIN 查询。因为这会杀死一个系统。想想吧！
*   您肯定能够非常快地读/写，并且可以查询一些数据。
*   灵活的模式，您可以将稀疏数据推送到其中。也就是说，在一般数据库中，您将 NULL 推送为空条目，在这里您根本不推送它 :) 您不需要！
*   没有全文搜索。

**这就是大 BUT 的用武之地。**

*   说了这么多，另一端的 SOLR 是 TF-IDF 全文搜索引擎。虽然您可以将它用于您的数据库。
*   灵活的架构。只需标记不需要的字段。
*   Solr 将有助于快速标记、解析和索引数据。会有极好的反响。它返回 XML，您可以解析 XML 以创建可表示的数据。
*   读取查询很快，我的意思是非常快。但是我没有比较 Cassandra 和 SOLR 可以分享。

最后，因为你想要 CASSANDRA 和 SOLR 在一起。看看[SOLANDRA（前 Lucandra）](https://github.com/tjake/Solandra)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-17T12:09:11.963

你也可以看看[Datastax](http://www.datastax.com/products/community)
There's Community and Enterprise edition，虽然我认为 Solr 不包含在社区版中:(

Solandra 不再积极开发，作者移至 Datastax 并继续在那里工作。

恕我直言，Cloudera 用于 Hadoop，即 Datastax 用于 Cassandra。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T10:01:59.563

Solrs indexing features would out perform Cassandra for reads. It'll index popular queries so frequent ones will be faster still. It was built for reads, cassandra is built to store. But as already stated Cassandra will scale awesomly if that's needed. Why not benchmark single node, 1 mill random text strings, 1mill query average. Either of em will out perform mysql let alone mysql join queries. PS solr will soon support joins I think solr 4.....

# javascript - Javascript 仅返回包含特殊属性的父对象

> ID：10184859
> 
> 赞同：3
> 
> 时间：2012-04-17T03:59:31.303
> 
> 标签：javascript, jquery, javascript-objects

假设我有一个如下对象：

```
var Obj = {
             a: {
                   name: 'X',
                   age: 'Y',
                   other: {
                             job: 'P',
                             location: {
                                          lat: XX.XXXX,
                                          lng: YY.YYYYY,
                                          .........
                                       }
                          }
                }
          }; 
```

**我的目标：** 我需要一种方法来检查 a 的存在`key`并为任何级别的嵌套返回其直接父对象。

**示例** 如果我搜索`lat`该方法将返回`location`对象，如果我搜索`job`它将返回`other`，依此类推。

请帮忙。谢谢....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T04:43:43.137

尝试这个：

```
function findObjectWithProperty(obj, term){
    if (typeof obj == 'object'
        && Object.prototype.toString.call(obj) !== '[object Array]'){
        for(var prop in obj){
            if (obj.hasOwnProperty(prop)){
                if (prop==term)
                    return obj;
                var result = findObjectWithProperty(obj[prop], term);
                if (result != null)
                    return result;
            }
        }
    }
    return null;
} 
```

利用：

```
var location = findObjectWithProperty(Obj, 'lat');
var other = findObjectWithProperty(Obj, 'job'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T04:15:19.007

我不知道为这个问题编写一个通用函数，比如 c# 中的反射，但是这个函数可能会有所帮助，尽管不是通用的。

```
//Object.
var Obj = {
             a: {
                   name: 'X',
                   age: 'Y',
                   other: {
                             job: 'P',
                             location: {
                                          lat: 31.88,
                                          lng: 71.88

                                       }
                          }
                }
          };

function getParentObject(key,obj){  
  switch(key){
    case "lat" || "lng":   return obj.a.other.location; break;
    //write other cases...
    default:return obj;
  }
}

//Call
var lng = getParentObject("lat",Obj).lng; 
```

# ruby-on-rails - 简单的文章用户关联中的“无法定义单例”错误

> ID：10184865
> 
> 赞同：0
> 
> 时间：2012-04-17T04:00:19.453
> 
> 标签：ruby-on-rails

组合一个简单的文章用户关联，其中用户是文章的作者

```
class Article < ActiveRecord::Base
  attr_accessor :id, :name, :title, :title_image, :keywords, :related_urls, :content, :meldd
  validates_presence_of :title, :name, :title_image, :keywords, :related_urls, :content
  as_enum :status, [:new, :draft, :private, :published], :column => "article_status", :prefix => true
  validates_as_enum :status
  belongs_to :author, :class_name => 'User'

end

class User < ActiveRecord::Base
  validates_format_of :pen_name, :with => /\A[[:word]]+\Z/
  validates_format_of :email, :with => /\A([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})\Z/i

  has_many :articles, :foreign_key => 'author_id'

  easy_roles :roles
end 
```

相关的规范是 require 'spec_helper' require_relative '../support/cells/articles/recent_updates_data'

```
describe Article do
  include ArticlesCellSpecHelpers

  before(:each) do
    @it = stub_model Article
  end

  describe "basic, existential structure" do
    it "starts with blank attributes" do
      @it.name.should be_nil
      @it.title.should be_nil
      @it.title_image.should be_nil
      @it.keywords.should be_nil
      @it.related_urls.should be_nil
      @it.content.should be_nil
    end

    it "is an ActiveRecord subclass" do
      @it.should be_a ActiveRecord::Base
    end

  describe "associations" do
    it "has an author" do
      author = stub_model User, :pen_name => 'Joe Blow', :email => 'joe.blow@example.com'
      params = recent_updates_data.first()
      params[:author_id] = author.id
      params[:status] = :published
      article = stub_model Article, params
      article.author_id.should == author.id
    end
  end 
```

这很奇怪，但是如果您注释掉“belongs_to :author, :class_name => 'User'” 那么所有测试都很好，但是如果该行存在，则会引发以下错误：

```
Article basic, existential structure is an ActiveRecord subclass
     Failure/Error: @it = stub_model Article
     TypeError:
       can't define singleton
     # ./spec/models/article_spec.rb:9:in `block (2 levels) in <top (required)>' 
```

关于如何解决这个问题的任何建议？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T04:09:48.437

您使用的“描述...做”层次结构不正确。`before do`应该包裹在`describe ...do`. 例如

```
describe "basic, existential structure" do

  # put this before block into the describe block
  before(:each) do
    @it = stub_model Article
  end

  it "starts with blank attributes" do
  end
end 
```

# c# - 如何知道虚空运行？

> ID：10184869
> 
> 赞同：1
> 
> 时间：2012-04-17T04:01:08.430
> 
> 标签：c#, asp.net, void

想询问 void 类型，所以我可以知道它是否有效

在 PHP 中我可能有这样的条件：

```
if(mysql_query($query))
{ bla bla }
else
{ print error } 
```

如何在 ASP.NET 上这样做？

我正在尝试这样：

```
if (k.EditPassword(username.Text, oldPassTxt.Text, newPassTxt.Text) == true )
{
Response.Redirect("sample.aspx");
}
else
{ print error } 
```

但当然不能那样，因为 void 不是布尔值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T04:24:28.413

通常，执行可能失败的工作的 void 函数会以其他方式通知您它们失败了。他们通常会抛出异常：

```
try
{
    k.EditPassword(...)
}
catch(ApplicationException ex)
{
    // print Exception
}
Response.Redirect(...) 
```

其他时候他们会设置一个状态变量或其他东西：

```
k.EditPassword(...)
if (k.Result == Result.OK)
    Response.Redirect(...)
else
    // print error... 
```

查看您尝试处理的条件的文档或源代码是了解如何处理它的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T04:03:45.933

您可以使用文字控件并向其中添加文本。所以你的代码会是这样的，

```
if (k.EditPassword(username.Text, oldPassTxt.Text, newPassTxt.Text) == true )
{
Response.Redirect("sample.aspx");
}
else
{ Literal1.Text = error; } 
```

文字应该在设计文件中，您可以从工具箱中添加它。

但更好和正确的方法是，

1.  记录下来。（你需要一个日志机制）

2.  写一个单元测试:)

# c# - Visual Studio 中非项目文件的语法高亮显示

> ID：10184872
> 
> 赞同：2
> 
> 时间：2012-04-17T04:01:21.857
> 
> 标签：c#, visual-studio, syntax-highlighting

我有一个简单的 C# 项目，它在启动时加载外部 C# 文件以用作脚本。不幸的是，在 Visual Studio 中编辑任何这些“非项目”文件时，我只能获得最基本的语法突出显示，因为项目中的类和类型在这个外部文件的上下文中是未知的。

如果不将文件添加到我的项目中（破坏它们作为外部脚本的目的），有什么方法可以定义外部接口或以其他方式说服 Visual Studio (2008) 在类的上下文中解析这些文件中的代码在项目中？

一些澄清（感谢早期的回答者）

*   人们应该能够在不访问我的源代码的情况下编辑这些脚本
*   人们不必设置整个 Visual Studio 项目来编辑一个可能包含少于 10 行实际代码的源文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:08:41.433

您将始终需要对这些类的引用。也许您可以将这些文件作为链接添加到项目或带有引用的新项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T22:56:35.243

Visualstudio 需要一些信息来完成此操作。

我会考虑桥模式，您需要在同一个文件中添加类主体

*   [http://en.wikipedia.org/wiki/Bridge_pattern](http://en.wikipedia.org/wiki/Bridge_pattern)

或使用模拟对象 - 您可以轻松地使用它们来提供语法突出显示而无需共享您的代码（此处相同 - 全部在一个文件中）：

*   [http://en.wikipedia.org/wiki/Mock_object](http://en.wikipedia.org/wiki/Mock_object)

如果您允许拥有一个项目文件，您可以将脚本和辅助类分开。

# android - 如何在 Android 中减小 JPEG 图像的大小

> ID：10184873
> 
> 赞同：7
> 
> 时间：2012-04-17T04:01:31.217
> 
> 标签：android, image, encoding, compression, jpeg

在我的应用程序中，我正在调用相机应用程序并拍照并将其保存在特定目录中（例如 /sdcard 等）

图片保存为 JPEG 图像。如何减小图像的大小？是否有任何可用的图像编码器或压缩可用？

我在另一个帖子中看到： [Android 缩小相机图片的大小](https://stackoverflow.com/questions/8757341/android-reduce-size-of-camera-picture)

但这是缩放图像。我正在寻找可以压缩或编码的东西。是否可以？

提前致谢，佩马尔

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-17T04:25:40.190

我不确定你是否可以尝试这个。为了首先减小图像的大小，你应该在将图像保存到特定目录之前将图像转换为位图，然后压缩位图设置图像的质量并将其写入正确的路径。可以更改图像的质量，希望这可以帮助您减小图像的大小。

```
bitmap.compress(Bitmap.CompressFormat.JPEG, 100, out);` 
```

[接口](http://developer.android.com/reference/android/graphics/Bitmap.html#compress%28android.graphics.Bitmap.CompressFormat,%20int,%20java.io.OutputStream%29)：

```
compress (Bitmap.CompressFormat format, int quality, OutputStream stream) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T04:25:20.600

可能下面的代码对您有用

```
 opt = new BitmapFactory.Options();
        opt.inTempStorage = new byte[16 * 1024];
        opt.inSampleSize = 4;
        opt.outWidth = 640;
        opt.outHeight = 480;
        Bitmap imageBitmap = BitmapFactory
                .decodeStream(in, new Rect(), opt);
        Bitmap map = Bitmap.createScaledBitmap(imageBitmap, 100, 100, true);
        BitmapDrawable bmd = new BitmapDrawable(map);
        ByteArrayOutputStream bao = new ByteArrayOutputStream();
        map.compress(Bitmap.CompressFormat.PNG, 90, bao);
        ba = bao.toByteArray();
        imagedata=Base64.encodeBytes(ba); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-05T11:18:07.660

使用受这篇文章启发的 Glide

[https://developer.android.com/topic/performance/graphics/load-bitmap](https://developer.android.com/topic/performance/graphics/load-bitmap)

吉尔德 API

[https://bumptech.github.io/glide/](https://bumptech.github.io/glide/)

```
// using some options for JPEG
RequestOptions myOptions = new RequestOptions()
                        .encodeFormat(Bitmap.CompressFormat.JPEG)
                        .override(1280, 1024) // this is what you need to take care of WxH
                        .fitCenter(); // or centerCrop
// uri may be local or web url anything
Glide.with(this).asBitmap().load(uri).apply(myOptions).listener(new RequestListener<Bitmap>() {
                    @Override
                    public boolean onLoadFailed(@Nullable GlideException e, Object model, Target<Bitmap> target, boolean isFirstResource) {
                        showSnackBar("There was some error in fetching images");
                        return false;
                    }

                    @Override
                    public boolean onResourceReady(Bitmap bitmap, Object model, Target<Bitmap> target, DataSource dataSource, boolean isFirstResource) {
                        // do whatever with the bitmap object here
                        return true;
                    }
                }).submit(); 
```

# forms - 在 Play 2.0 中用常量值绑定表单域？

> ID：10184874
> 
> 赞同：2
> 
> 时间：2012-04-17T04:01:32.903
> 
> 标签：forms, scala, binding, playframework-2.0

我有一个包含多个字段的 scala 表单。表单中的字段映射到 Java 类的成员变量。我想将其中一个字段（比如 userId）与一个值绑定（我不希望用户为此字段输入值。相反，我想将其作为参数传递给 scala 模板）。但是，我无法手动绑定表单域。非常感谢任何帮助。

请参阅下面的示例以便于理解：

```
`@(itemForm: Form[Item], user: User)
 @import helper._
 @main("Item list") {
 @if(user != null) {
    @form(routes.Application.newItem()) {
    @itemForm("userId") = @user.id /**I want to bind the userId form field */
        @inputText(itemForm("title")) 
        @inputText(itemForm("description"))
        @inputText(itemForm("price"))
        <input type="submit" value="Create">
    }
}
}` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:50:48.587

在这种情况下，最好将它作为动作的参数传递（记得修改路由声明）

```
@form(routes.Application.newItem(user.id)){
   .... 
```

你也可以只使用普通的html

```
<input type="hidden" name="userId" value="@user.id" /> 
```

**编辑：**

验证在行动。注意：在隐藏字段旁边的页面上显示错误是没有意义的，因此您不需要错误消息的占位符。将 VALID 值传递到隐藏字段由您决定。向无法更改隐藏字段值的用户显示验证错误是不好的概念。

```
public static Result newItem(){
    Form<ItemModel> itemForm = form(ItemModel.class).bindFromRequest();
    if (itemForm.hasErrors(){
        return badRequest(newItemView.render(itemForm));
    }    
    itemForm.get().save();
    return ok("Your new item is saved...");
} 
```

# php - 如果 foreach 和条件

> ID：10184891
> 
> 赞同：0
> 
> 时间：2012-04-17T04:04:31.767
> 
> 标签：php, if-statement, foreach

请帮我解决这个问题，

亲爱的大家。

ref: foreach ($getvalue as $isi){if ($isi->eventHour == "00.01-00.30" 是来自数据库的数据

$clock_now == 现在时钟

$sdate = 选择日

$今天=今天

这是我的脚本复选框禁用

```
 <?php 
 foreach ($getvalue as $isi){
 if ($isi->eventHour == "00.01-00.30" or $clock_now >= "00.02" and $sdate == $today)
 echo 'disabled';
 }
 ?> 
```

如果 foreach 有一个值/true，那么这个脚本输出是 echo disable

但是当 foreach 没有 value/false 时，这个脚本输出不显示 echo disable

问题是

如何在 foreach 没有值的情况下显示 echo 'disabled'？

工作`or $clock_now >= "00.02" and $sdate == $today`和显示回声也被禁用

多谢

对不起我的英语不好

最良好的问候

法会

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T04:13:53.503

你的英语很糟糕:)

由于您的问题不是很清楚，我只希望您想要的是`is_null()`or `isset()`。

```
if(is_null($isi->eventHour))
{
//do your work here

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T04:14:06.343

尝试这个，

```
<?php 

 $status = "disabled";  

 foreach ($getvalue as $isi){

    $status = "";

    if ($isi->eventHour == "00.01-00.30" or $clock_now >= "00.02" and $sdate == $today)
    {
       $status = "disabled";
    }
 }

 echo $status;

 ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T04:14:24.423

```
foreach ($getvalue as $isi){
    $eh = explode('-',$isi->eventHour);
    foreach($eh as $k=>$e)
        $eh[$k] = abs(trim($e));

    if(!is_numeric($eh[1])) $eh[1] = $eh[0];
    if ( ($clock_now >= $eh[0] && $clock_now<=$eh[1] && $sdate == $today) || empty($isi->eventHour))
        echo 'disabled';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T04:17:51.147

您必须确定该值是否为空，如果它为空，则执行一个 if 语句，如果不执行另一个

```
<?php 
 foreach ($getvalue as $isi){

if (empty($isi->eventHour)) {

    echo 'disabled';

}
if(!empty($isi->eventHour))
{
   if ($isi->eventHour == "00.01-00.30" or $clock_now >= "00.02" and $sdate == $today)
   echo 'disabled';
}
 }
?> 
```

# html - 如何通过触摸事件捏合和缩放 HTML 5 画布？

> ID：10184898
> 
> 赞同：0
> 
> 时间：2012-04-17T04:05:38.500
> 
> 标签：html, canvas

如何通过触摸事件捏合和缩放 HTML 5 画布？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:27:41.353

试试 jgesture 库——它也有很多不错的事件。

[http://jgestures.codeplex.com/](http://jgestures.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T10:21:05.640

如果你不想依赖 jQuery，还有[hammer.js](http://eightmedia.github.io/hammer.js/)。

# vb.net - 在 Visual Basic 中读取文件到变量

> ID：10184900
> 
> 赞同：-2
> 
> 时间：2012-04-17T04:05:56.897
> 
> 标签：vb.net, file, variables

我希望能够将文件放入变量中，以便与它进行交互。例如，我可以将一个 wav 文件放入一个变量中并播放它，而无需分发单独的文件。例如，这是否可能通过使用 Base64。例如，我见过一些 Python 程序在代码中嵌入了图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T04:46:09.557

是的，您可以想象将二进制 .wav 文件的内容存储为静态的 uuencoded 文本数组。

可能更好的方法是为您的二进制数据创建一个“资源”：

[http://msdn.microsoft.com/en-us/library/xbx3z216.aspx](http://msdn.microsoft.com/en-us/library/xbx3z216.aspx)

# iterator - Pythonic 绘制多边形的方法

> ID：10184901
> 
> 赞同：0
> 
> 时间：2012-04-17T04:05:58.440
> 
> 标签：iterator, draw, python, polygon

具体来说，我有一个点列表。我想将这些点连接在一起以创建一个多边形。

显而易见的方法是 C 风格：

```
 39 def drawPoly(poly):
 40     for i in range(0, len(poly)):
 41         p1 = poly[i]
 42         p2 = poly[i + 1]
 43         canvas.create_line(blah) 
```

有没有一种更pythonic的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T04:19:54.573

编辑：我想我误解了你的例子，`poly`元组列表是否正确？我正在更改我的答案以反映[ckhan 的观察结果](https://stackoverflow.com/a/10185041/5987)，`create_line`即 Tk 画布方法，并且您的多边形可能没有关闭。

```
def drawPoly(poly):
    x1 = y1 = None
    for x2, y2 in poly + poly[0]:
        if x1 is not None:
            canvas.create_line(x1, y1, x2, y2)
        x1, y1 = x2, y2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T04:26:33.343

好吧，既然`create_line`可以获取点列表，您需要做的就是复制前两个元素并在最后填充它们：

```
from Tkinter import Tk, Canvas, mainloop
master = Tk()
points = [10, 10, 50, 10, 50, 50, 10, 50 ]
c = Canvas(master, width=200, height=100)
c.pack()
c.create_line(points + points[0:2], fill = "red")
mainloop() 
```

# mysql - 如何给本地机器上的 mysql 数据库带来大量流量？

> ID：10184902
> 
> 赞同：0
> 
> 时间：2012-04-17T04:06:06.987
> 
> 标签：mysql, performance, load-testing

有没有办法给我本地机器上的 mysql 数据库带来大量流量（非常频繁的读写）？有没有可用的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T04:09:07.827

你应该看看[mysqlslap](http://dev.mysql.com/doc/refman/5.1/en/mysqlslap.html)。

# php - 无法序列化，因为它没有无参数构造函数soap客户端php

> ID：10184903
> 
> 赞同：0
> 
> 时间：2012-04-17T04:06:07.750
> 
> 标签：php, soap

我尝试使用 php soap 客户端从 web 服务中提取数据，但我遇到了肥皂错误

```
SoapFault Object (
    [message:protected] => Server was unable to process request. ---> There was an error generating the XML document. ---> <>f__AnonymousType2a`2[System.String,System.Object[]] cannot be serialized because it does not have a parameterless constructor. 
    [string:Exception:private] => 
        [code:protected] => 0
        [file:protected] => /Users/resarahman/Documents/xampp/htdocs/testing/soap/test.php
        [line:protected] => 17
        [trace:Exception:private] => Array ( 
            [0] => Array ( 
                [file] => /Users/resarahman/Documents/xampp/htdocs/testing/soap/test.php 
                [line] => 17 
                [function] => __call 
                [class] => SoapClient 
                [type] => -> 
                [args] => Array ( 
                    [0] => GetPublicSalesBanners 
                    [1] => Array ( 
                        [0] => Array ( 
                            [saleCategoryID] => 40F80218-A9E1-43C4-96FF-4C046D192A21 
                            [countryID] => AS 
                            [languageID] => EN 
                            [getTopThree] => 1 
                        ) 
                    ) 
                ) 
            ) 
            [1] => Array ( 
                [file] => /Users/resarahman/Documents/xampp/htdocs/testing/soap/test.php 
                [line] => 17 
                [function] => GetPublicSalesBanners 
                [class] => SoapClient 
                [type] => -> 
                [args] => Array ( 
                    [0] => Array ( 
                        [saleCategoryID] => 40F80218-A9E1-43C4-96FF-4C046D192A21 
                        [countryID] => AS 
                        [languageID] => EN 
                        [getTopThree] => 1 
                    ) 
                ) 
            ) 
        ) 
        [previous:Exception:private] => 
        [faultstring] => Server was unable to process request. ---> There was an error generating the XML document. ---> <>f__AnonymousType2a`2[System.String,System.Object[]] cannot be serialized because it does not have a parameterless constructor. 
        [faultcode] => soap:Server 
        [detail] => ) 
```

请求和响应

要求 ：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://ws.ozsale.com.au/API/V2">
    <SOAP-ENV:Body>
        <ns1:GetPublicSalesBanners>
            <ns1:saleCategoryID>40F80218-A9E1-43C4-96FF-4C046D192A21</ns1:saleCategoryID>
            <ns1:countryID>AS</ns1:countryID>
            <ns1:languageID>EN</ns1:languageID>
            <ns1:getTopThree>true</ns1:getTopThree>
        </ns1:GetPublicSalesBanners>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

回复：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <soap:Body>
        <soap:Fault>
            <faultcode>soap:Server</faultcode>
            <faultstring>Server was unable to process request. ---&gt; There was an error generating the XML document. ---&gt; &lt;&gt;f__AnonymousType2a`2[System.String,System.Object[]] cannot be serialized because it does not have a parameterless constructor.</faultstring>
            <detail />
        </soap:Fault>
    </soap:Body>
</soap:Envelope> 
```

到目前为止，这是我的代码：

```
<?php
// create a connection to the local host mono .NET pull back the wsdl to get the functions names
  // and also the parameters and return values
  $client = new SoapClient("http://www.ozsale.com.au/api/v2/api.asmx?WSDL",
    array(
      "trace"      => 1,    // enable trace to view what is happening
      "exceptions" => 0,    // disable exceptions
      "cache_wsdl" => 0) 
  );

  // get a response from the WSDL zend server function getQuote for the day monday
  $data = $client->GetPublicSalesBanners(array(
    'saleCategoryID' => '40F80218-A9E1-43C4-96FF-4C046D192A21',
    'countryID'=> 'AS',
    'languageID'=> 'EN', 
    'getTopThree' =>'1'
  ));

  print_r($data);

  // display what was sent to the server (the request)
  echo "<p>Request :".htmlspecialchars($client->__getLastRequest()) ."</p>";
  // display the response from the server
  echo "<p>Response:".htmlspecialchars($client->__getLastResponse())."</p>";
  ?> 
```

关于 api 的文档可以在这里找到[http://www.ozsale.com.au/API/V2/api.asmx?op=GetPublicSalesBanners](http://www.ozsale.com.au/API/V2/api.asmx?op=GetPublicSalesBanners)

有人知道这里有什么问题吗？是我的代码还是网络服务的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T04:50:56.883

看起来他们的结局是错误的。我刚刚跑了soapUI在那里尝试它并得到了完全相同的错误。

此外，该错误似乎是 ASP 错误（服务器端），而不是 PHP 错误（客户端 - 你的）。

联系他们的支持（假设他们有支持）。

**编辑：** 此外，我只是在玩他们的其他公共方法之一`GetPublicSalesCategories`，它只接受`countryID`和`langaugeID`使用`AS`作为国家/地区产生与以前相同的错误。但是，如果我更改`countryID`为`AU`或`US`我没有收到错误（我没有得到任何有用的数据，但它是一个`<result>true</result>`响应。

也许您的国家/地区代码`AS`无效？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T04:47:18.657

这些东西`System.String`看起来`System.Object`很像.NET错误，可能在服务器端（不是你的错）。

# c++ - 起始地址无限循环

> ID：10184905
> 
> 赞同：1
> 
> 时间：2012-04-17T04:06:37.270
> 
> 标签：c++, file, iostream, memory-address

我试图在读取文件时获取文件每一行的起始地址，并将其打印到屏幕上，但由于某种原因，它只会导致无限循环。我正在阅读的文件只是一个普通的文本文件。这就是我现在要做的。

```
#include <iostream>
#include <iomanip>
#include <fstream>
#include <string>
using namespace std;

int main(int argc, char* argv){
    ifstream file;
    string name, lnstr;
    int addy;

    if (argc > 1)
        name = argv[1];
    else
    {
        cout << "Please Enter Your Filename: ";
        getline(cin, name);
    }
    file.open(name.data());
    if(!file)
    {
        perror(name.data());
        exit(1);
    }
    addy = 0;
    while(getline(file, lnstr))
    {
        cout << file.seekg(addy, ios::beg) << endl;
        addy++;
    }
} 
```

即使我将0作为seekg的第一个参数，它仍然会导致无限循环，或者它只是显示相同的数字一堆。不知道我错过了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T04:39:18.727

当您调用 ios::beg 时，您将 get 指针的位置设置为文件的开头。您实际上并不需要此调用，此代码应该适合您：

```
file.open(name.c_str()); // open file
if(file) {
  while(getline(file, lnstr)) {
    cout<< lnstr <<endl;
  }
} 
```

[更多关于 seekg 的信息](http://www.cplusplus.com/reference/iostream/istream/seekg/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T04:43:17.023

我想你想要[`tellg`](http://www.cplusplus.com/reference/iostream/istream/tellg/)，不是`seekg`。

# grails - grails 应用程序的内存使用情况

> ID：10184906
> 
> 赞同：2
> 
> 时间：2012-04-17T04:06:42.930
> 
> 标签：grails, memory-management, out-of-memory

我想知道 grails 应用程序可以使用多少内存。它是否取决于安装的域类、插件的数量？我正在开发一个应用程序，当我在 tomcat 上测试它时，它不断地耗尽内存。目前使用近 500MB。

此外，如果不是这种情况，您能否建议我可以使用哪些内存管理方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T07:02:14.537

看看[Grails Java Melody](http://grails.org/plugin/grails-melody)插件。它将为您提供有关正在运行的应用程序的各种统计数据，在您的情况下，内存统计数据应该会有所帮助，但是这把应用程序监控的瑞士军刀还有很多。

最初您是否尝试过使用 JVM 设置，例如：-XX:PermSize=256m -XX:MaxPermSize=1g -Xms256m -Xmx512m

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T04:25:25.003

Java、Groovy 和 Grails 的内存使用量极少。500Mb 真的很小，从 1Gb 开始很常见（我的意思是 tomcat 内存配置）。所以，不用担心500Mb，没关系。

至于域，类等 - 当然所有新类，所有新代码，它都需要一些内存，但我敢肯定，对于你的情况，它只是内存的百分之几，所有其他的都被 Grails 库、Tomcat 使用， JVM等

PS还有一个常见的Tomcat问题`PermGem space`- [https://stackoverflow.com/search?q=permgem+space](https://stackoverflow.com/search?q=permgem+space)

# javascript - Javascript 类“未定义” - IE7

> ID：10184909
> 
> 赞同：0
> 
> 时间：2012-04-17T04:06:52.070
> 
> 标签：javascript, class, internet-explorer-7, prototypejs

为什么每次我去测试前端更改 IE 都会给这个过程增加大约 2/3 小时的头痛？那不是我的问题顺便说一句......我的问题是为什么我`FooBar is undefined`在文件中定义一个JS类时会得到一个：

```
var FooBar = {
    field1: '',
    field2: '',
    someFunction: function(variable) {
        field1 = variable;
    }
} 
```

...并尝试从另一个 JS 文件中调用它：

```
FooBar.someFunction("Hello World"); 
```

...在 IE7 中。在 IE 8+、FF 6+、Chrome 5+ 和 Safari 中没有问题。但 IE 7 似乎不喜欢它。有任何想法吗？

**编辑：**

文件按照本示例中的排列顺序加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T00:13:02.997

`@Baz1nga`并`@jfriend00`在这里谈到了根本原因。页面上还有另一个问题，这是我以前从未见过的问题。

另一个错误：

```
"Expected Identifier, string or number" 
```

由于另一个脚本中的废话而被抛出。有问题的具体废话是参数列表中的尾随逗号 ( **,** )，后面没有参数值。例如：

```
someFunction(param1, param2, param3,); 
```

奇怪的是，其他浏览器似乎可以处理这种语法……但是 IE7 呢？BOOM，灾难性的语法死亡！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T04:44:29.443

a) 确保 IE 中没有抛出 js 错误，有一些 IE 特定的 JS 问题，打开选项以在 js 错误发生时显示弹出窗口

b）确保首先加载您的类变量定义文件，然后再加载该类的用法。还稍微修改一下语法：

```
var FooBar = FooBar || {
    field1: '',
    field2: '',
    someFunction: function(variable) {
        field1 = variable;
    }
} 
```

c）最后添加一些调试代码以查看您使用该类的文件是否正在执行，添加一些警报语句。

```
setTimeout(function(){
alert("before calling foorbar");
FooBar.someFunction("Hello World");
alert("foobar called");
},500); 
```

# opengl - GLUtesselator：零面积三角形和 T 形交点的问题

> ID：10184917
> 
> 赞同：1
> 
> 时间：2012-04-17T04:07:52.453
> 
> 标签：opengl, triangulation, tesselation

当我尝试使用 GLUtesselator 对文本实体进行三角测量时遇到了这个问题。但是，它可以在使用 GLUtesselator 对任何多边形进行三角剖分期间发生。问题是有时 GLUtesselator 会生成面积为零的三角形。大多数时候您可以忽略它们，但在某些情况下它们不能被忽略。我试图找到一个解决方案，以便给定多边形的最终三角剖分没有任何零面积三角形或 T 形交点。据我所知，GLUtesselator 是可用的最强大和最稳定的 tesselator 之一，所以我想坚持下去，不介意做一些后处理来修复三角剖分，而不是自己编写一个新的 tesselator。

我将尝试演示字符“H”的镶嵌问题。请注意，我是 stackflow 的新用户，所以我还不能发布图片，没有图片就不可能解释这个问题，所以我只是将 URL 发布到我描述问题的博客上。您也可以在 GLUtesselator 上查看它：零面积三角形和 T 形交点的问题[http://www.dixittech.com/blog](http://www.dixittech.com/blog)

我认为这是一个非常基本的问题，它的解决方案将使许多在类似领域工作的开发人员受益。我相信我不是第一个偶然发现它的人。有什么建议可以做到吗？任何替代方法也非常受欢迎。

# c# - 无法从 Asp.net 中的 SharePoint 文档库打开 MS Office word 文件

> ID：10184918
> 
> 赞同：1
> 
> 时间：2012-04-17T04:07:57.747
> 
> 标签：c#, asp.net, sharepoint, sharepoint-2010

我的 apx 页面中有一个链接，该链接超链接到 sharePoint 文档库 ms word 文件，当我单击链接 MS word 启动但无法打开文档时，我收到以下错误消息，使用 chrome 解决问题。IE8的问题。任何的想法？

```
Could not open 'http://myWeb:82/sites/A/B/myFile.docx 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:54:17.617

谢谢 Brijesh - 您的解决方案解决了这个问题。安装修复程序后需要重新启动计算机

# php - 如何在ajax中获取文本字段值？

> ID：10184919
> 
> 赞同：0
> 
> 时间：2012-04-17T04:08:17.800
> 
> 标签：php, javascript, ajax

我有一个包含来自数据库的动态数据的表，每行包含一个文本字段和 2 个链接（接受或拒绝）。那么如果用户点击这些链接中的任何一个，该行将消失，其余行仅在表中可见。

通过单击每个链接，我使用 ajax 获取每一行的 ID，但是我还需要获取文本字段值。我怎么才能得到它？在获得价值后，我需要在 ajax 中使用，我需要使用 php+sql 将其插入数据库。

这是我的**ajax 部分的链接**：

```
 $('a.accept').click(function(d) {
    d.preventDefault();
    var parent = $(this).parent();
    $.ajax({
      type: 'get',
      url: 'Test.php',
      data: 'ajax=1&accept=' + parent.attr('id').replace('record-',''),
      beforeSend: function() {
        parent.animate({'backgroundColor':'#fb6c6c'},300);
      },
      success: function() {
        parent.slideUp(300,function() {
          parent.remove();
        });
      }
    });
  });

}); 
```

如何在其中包含文本字段值？

请评论我，我真的需要解决它，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T04:53:21.940

使用以下，你很高兴。你还有额外的 '});' 在 JS 片段的最后一行。我把它删除了。但请确保您按照以下模式为文本字段提供 id：

```
文本-​​fld-RECORD_ID
```

在哪里

```
RECORD_ID
```

是记录的 ID。

```
$('a.accept').click(function(d) {
    d.preventDefault();
    var parent = $(this).parent();
    var id = parent.attr('id').replace('record-','');
    //make sure that text field has ID in pattern 'text-fld-RECORD_ID'
    var text_fld = $('#text-fld-'+id).val();
    $.ajax({
      type: 'post', // I suggest using post; get will be harmful in such occasions
      url: 'Test.php',
      data: {ajax:1,accept:id,text:text_fld},
      beforeSend: function() {
        parent.animate({'backgroundColor':'#fb6c6c'},300);
      },
      success: function() {
        parent.slideUp(300,function() {
          parent.remove();
        });
      }
    });  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T04:20:12.470

您可以手动将文本添加到 GET 请求中。

（片段）

```
data: 'ajax=1&accept=' + parent.attr('id').replace('record-','') + '&text=VALUE', 
```

替换`text`为您希望在 PHP 中收到的名称。替换`VALUE`为您要抓取的页面上输入的文本 - 并且不要忘记对值进行编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T04:21:27.073

您首先需要文本字段的 id 名称。然后你可以做这样的事情：

```
var textboxvalue = $('name or id of textfield').val(); 
```

然后您需要将此值附加到您的数据字符串中：

```
data: 'ajax=1&textvalue='+textboxvalue+'accept=' + parent.attr('id').replace('record-',''), 
```

然后你可以使用`$_GET['textvalue'];`来获取文本框的值。

# php - MySQL & PHP：汇总表中的数据

> ID：10184924
> 
> 赞同：1
> 
> 时间：2012-04-17T04:09:07.620
> 
> 标签：php, mysql, html

好的，伙计们，这可能有一个简单的答案，但现在已经困扰了我几个小时。

我正在使用 PHP/HTML 从 MySQL 表生成一个表。在 MySQL 表 (TimeRecords) 中，我有一个 StartTime 和 EndTime 列。在我的 SELECT 语句中，我从 StartTime 中减去 EndTime 并将其别名为 TotalHours。到目前为止，这是我的查询：

```
$query = "SELECT *,((EndTime - StartTime)/3600) AS TotalPeriodHours
    FROM TimeRecords
    WHERE Date
    BETWEEN '{$CurrentYear}-{$CurrentMonth}-1'
    AND '{$CurrentYear}-{$CurrentMonth}-31'
    ORDER BY Date
    "; 
```

然后我通过一个 HTML 表循环它。到目前为止，一切都很好。我想做的是将所有的 TotalHours 相加并将其放入一个单独的 DIV 中。关于 1）如何编写 select 语句和 2）在哪里从 PHP/HTML 调用该代码的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T04:22:31.267

尝试这个

```
$query= "
    SELECT ((EndTime - StartTime)/3600) AS Hours, otherFields, ...
    FROM TimeRecords
    WHERE 
        Date BETWEEN '{$CurrentYear} - {$CurrentMonth} - 1'
        AND '{$CurrentYear}-{$CurrentMonth} - 31' ";

$records =mysql_query($query);
$sum= 0;
while($row=mysql_fetch_array($records))
{
      echo"$row['otherFields']";
      echo"$row['Hours']";
     $sum+=$row['Hours'];
 } 

 echo" Total Hours : $sum "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:10:21.813

如果您使用[GROUP BY WITH ROLLUP具有唯一 id，则可以在同一查询中执行此操作](http://dev.mysql.com/doc/refman/5.1/en/group-by-modifiers.html)

```
$query = "
    SELECT unique_id,SUM((EndTime - StartTime)/3600) AS TotalPeriodHours
    FROM TimeRecords
    WHERE Date BETWEEN '{$CurrentYear}-{$CurrentMonth}-1'
      AND '{$CurrentYear}-{$CurrentMonth}-31'
    GROUP BY unique_id WITH ROLLUP
    ORDER BY Date
"; 
```

在这种情况下，您查询的最后一个结果包含 NULL 和总总数。如果您没有唯一的 ID，则需要按照 Naveen 的回答在 PHP 中执行此操作。

对您的代码的一些评论：

*   使用 SELECT * 不被认为是好的做法。选择您需要的列。
*   并非所有月份都有 31 天，因此这可能会产生意想不到的结果。如果您使用的是 PHP5.3+，则可以使用

    $date = new DateTime(); $endDate = $date->format('Ymt');

此处的“t”标志获取该月的最后一天。有关 DateTime 的更多信息，请参阅[PHP 文档](http://uk.php.net/DateTime)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T04:15:13.637

只需将单个查询与**Sum()**一起使用。如果您已经显示所有行，您也可以手动计算它。（如果分页或使用 LIMIT，您将需要一个单独的查询，如下所示。）

```
$query = "
    SELECT Sum(((EndTime - StartTime)/3600)) AS SumTotalPeriodHours
    FROM TimeRecords
    WHERE 
        Date BETWEEN '{$CurrentYear} - {$CurrentMonth} - 1'
        AND '{$CurrentYear}-{$CurrentMonth} - 31'
"; 
```

# ruby-on-rails - 载波上传缓存

> ID：10184927
> 
> 赞同：4
> 
> 时间：2012-04-17T04:09:33.323
> 
> 标签：ruby-on-rails, security, carrierwave

载波上传缓存功能如何工作？从我[读过](http://rickenharp.posterous.com/using-carrierwave-caching-on-heroku)的内容来看，它似乎保留了上传的文件，`public/uploads/tmp`以避免在重新显示表单时重新上传。我猜缓存会被分配一个唯一的ID，但仍然可以公开访问。如何使敏感上传更安全或完全禁用此功能？

避免这种情况的一种方法是将上传器作为与目标模型分开的模型，这样验证错误就不需要重新上传。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T13:55:04.657

CarrierWave 将上传的图像保存在缓存目录中，因此您可以轻松地在验证错误的情况下重新提交表单，而无需强制用户重新上传图像。默认的缓存目录是，`public/uploads/tmp`但您可以通过设置`cache_dir`配置参数来更改它。

通常上传的图片无需认证即可下载。因此，将上传和缓存的文件放在公共目录中是可以的。您还可以更改您的上传器类，使其具有`filename`生成唯一随机 ID 的方法，以使其不易被猜到。

顺便说一句，[这篇博](http://cloudinary.com/blog/ruby_on_rails_image_uploads_with_carrierwave_and_cloudinary)文描述了如何在云中存储和转换图像并通过 CDN 交付的同时集成 CarrierWave。

# html - 为什么 在一个容器DIV中的多个浮动DIVS之后使用？

> ID：10184934
> 
> 赞同：13
> 
> 时间：2012-04-17T04:10:15.607
> 
> 标签：html, css

我在很多地方都遇到过`<div class="clear"></div>`，但我不知道为什么会这样做？有人可以简要介绍一下，为什么在 css 中使用它？这是CSS：

```
div.clear {
    clear:both;
} 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-17T04:19:37.697

元素的高度由其子元素确定（除非明确设置）。例如：

```
+------A------+
|+-----------+|
||     B     ||
|+-----------+|
|+-----------+|
||     C     ||
|+-----------+|
+-------------+ 
```

A 的高度由其子 C 的下边界所在的位置决定。

现在，浮动元素不计入其父母的高度，它们被排除在常规流程之外：

```
+------A------+
+--+---------++
   |    B    |
   +---------+
   +---------+
   |    C    |
   +---------+ 
```

A 元素被折叠到最小高度，因为它的两个子元素是浮动的。

引入清除元素以恢复正确的高度：

```
+------A------+
|  +---------+|
|  |    B    ||
|  +---------+|
|  +---------+|
|  |    C    ||
|  +---------+|
|+-----D-----+|
+-------------+ 
```

D 元素是具有`clear`属性集的零高度元素。这会导致它低于浮动元素（它会*清除*它们）。这导致 A 有一个常规的子元素来计算它的高度。至少这是最典型的用例。

引入额外 HTML 元素通常更好的解决方案是将 A 设置为`overflow: hidden`虽然。这具有强制计算高度的效果，这具有将高度增加到所需大小的相同效果。不过，此解决方案可能有也可能没有其他副作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T04:12:32.117

就是清除浮动样式。

清除：[http ://www.w3.org/wiki/CSS/Properties/clear](http://www.w3.org/wiki/CSS/Properties/clear)

浮动：[http ://www.w3.org/wiki/CSS/Properties/float](http://www.w3.org/wiki/CSS/Properties/float)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T04:27:59.773

总而言之，这就像告诉浏览器不允许在前一个元素的左侧或右侧出现任何内容（即，任何元素，无论是 div、span、anchor、table 等）。这将使下一个元素移动到下一行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-20T09:11:44.560

deceze 的解释很好。但是`<div class="clear"></div>`老方法和不专业的尝试使用

```
#anyelement:after {
  display: block;
  content: ".";
  clear: both;
  font-size: 0;
  line-height: 0;
  height: 0;
  overflow: hidden;
} 
```

只需继续添加其他需要清除的元素，`#firstlement:after, .secondelement:after`依此类推。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T04:30:24.493

当我们使用基于浮动的布局编写代码时，我们面临的最常见问题是父 div 容器没有扩展到子浮动元素的高度。解决此问题的典型解决方案是在浮动元素之后添加一个具有清晰浮动的元素，或者向父 div 添加一个 clearfix。

我给你两个很好的例子，以便更好地理解清除浮动：-

[http://webdesignerwall.com/tutorials/css-clearing-floats-with-overflow](http://webdesignerwall.com/tutorials/css-clearing-floats-with-overflow)

[http://www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-08T11:05:10.740

上面已经介绍了所有的技术细节。更一般地说，这种元素充当浮动元素的“硬线”，将它们正确地垂直放置在另一个之下。值得一提的是，现在有更好的方法。

# debugging - 如何使用ILspy调试一个dll？

> ID：10184935
> 
> 赞同：5
> 
> 时间：2012-04-17T04:10:24.900
> 
> 标签：debugging, process, ilspy

我想使用 ILspy 调试一个 dll，如图：

![在此处输入图像描述](../Images/d3e9db762e930c5eff03ef3f87884ff9.png)

但它只能显示两个过程：

![在此处输入图像描述](../Images/eeba5693ac42c3e2ecf891b2a386fb9c.png)

但在 vs2010 中，我可以附加更多进程： ![在此处输入图像描述](../Images/cf4a2fec4063d0e40dc8a82289bd6b2d.png)

如何在 ILspy 中显示 w3wp.exe？谁能帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T21:55:04.913

以管理员身份运行 ILSpy 为我解决了这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T04:21:31.070

从 ILSpy 源代码（ICSharpCode.ILSpy.Debugger.UI.AttachToProcessWindow）：

```
 Process currentProcess = Process.GetCurrentProcess();
        foreach (Process process in Process.GetProcesses()) {
            try {
                if (process.HasExited) continue;
                // Prevent attaching to our own process.
                if (currentProcess.Id != process.Id) {
                    bool managed = false;
                    try {
                        var modules = process.Modules.Cast<ProcessModule>().Where(
                            m => m.ModuleName.StartsWith("mscor", StringComparison.OrdinalIgnoreCase));

                        managed = modules.Count() > 0;
                    } catch { }

                    if (managed) {
                        list.Add(new RunningProcess {
                                    ProcessId = process.Id,
                                    ProcessName = Path.GetFileName(process.MainModule.FileName),
                                    FileName = process.MainModule.FileName,
                                    WindowTitle = process.MainWindowTitle,
                                    Managed = "Managed",
                                    Process = process
                                 });
                    }
                }
            } catch (Win32Exception) {
                // Do nothing.
            }
        } 
```

似乎比较直接...

它是预览软件，因此在确定进程是否使用托管代码的算法中可能存在缺陷。

您可能只需下载源代码并更改即可解决此问题

`bool managed = false;`

到

`bool managed = true;`

并重新编译。

我没有安装完整版本的 IIS7，所以我无法尝试重新创建您的问题，但我怀疑我是否会遇到同样的问题，因为我的 Visual Studio 开发服务器在 ILSpy 中显示良好，而您的却没有。也许您的环境与上述算法有一些不同之处。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T19:49:27.843

32 位与 64 位也可能发挥一些作用

# python - 如何检测鼠标点击使用 PySide 创建的 GUI 中显示的图像

> ID：10184941
> 
> 赞同：4
> 
> 时间：2012-04-17T04:11:16.923
> 
> 标签：python, qt, user-interface, pyside

首先，我是 Python、Qt 和 PySide 的新手，如果这个问题看起来太简单，请原谅我。

我要做的是在使用 PySide API 构建的 GUI 中的网格中显示一堆照片。此外，当用户点击照片时，我希望能够显示与该照片对应的信息。此外，我希望用于显示照片的容器/小部件允许更改照片，例如，我应该能够替换网格中的任何照片，而不会导致重新从头开始创建整个照片网格。

最初我尝试使用 QLabel 来显示 QPixmap，但我意识到（无论是否错误）我无法检测到标签上的鼠标点击。经过一番搜索，我得到的印象是我应该继承 QLabel（或其他相关类）并以某种方式覆盖 QWidget（QLabel 的父类）mousePressEvent() 以启用鼠标点击检测。问题是我不确定如何做到这一点，或者是否有任何替代小部件可以用来包含我的照片而不是 QLabel，而无需进行子类定制。

谁能建议一个比 QLabel 更合适的容器来显示照片，同时允许我检测照片上的鼠标点击，或者提供一些代码片段用于子类化 QLabel 以使其能够检测鼠标点击？

提前感谢您的任何回复。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T05:08:57.523

我添加了一个如何发出信号并连接到另一个插槽的示例。[文档](http://qt-project.org/wiki/Signals_and_Slots_in_PySide)也很有帮助

```
from PySide.QtCore import *
from PySide.QtGui import *

import sys

class Main(QWidget):

    def __init__(self, parent=None):
        super(Main, self).__init__(parent)

        layout  = QHBoxLayout(self)

        picture = PictureLabel("pic.png", self)
        picture.pictureClicked.connect(self.anotherSlot)

        layout.addWidget(picture)
        layout.addWidget(QLabel("click on the picture"))

    def anotherSlot(self, passed):
        print passed
        print "now I'm in Main.anotherSlot"

class PictureLabel(QLabel):

    pictureClicked = Signal(str) # can be other types (list, dict, object...)

    def __init__(self, image, parent=None):
        super(PictureLabel, self).__init__(parent)        
        self.setPixmap(image)

    def mousePressEvent(self, event):
        print "from PictureLabel.mousePressEvent"
        self.pictureClicked.emit("emit the signal")

a = QApplication([])
m = Main()
m.show()
sys.exit(a.exec_()) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-18T15:48:31.977

即使问题已经得到解答，我也想提供一种可以在不同情况下使用的其他方式（见下文）：

```
from PySide.QtCore import *
from PySide.QtGui import *

import sys

class Main(QWidget):

    def __init__(self, parent=None):
        super(Main, self).__init__(parent)

        layout  = QHBoxLayout(self)
        picture = QLabel()
        picture.setPixmap("pic.png")
        layout.addWidget(picture)
        layout.addWidget(QLabel("click on the picture"))

        makeClickable(picture)
        QObject.connect(picture, SIGNAL("clicked()"), self.anotherSlot)

    def anotherSlot(self):
        print("AnotherSlot has been called")

def makeClickable(widget):
    def SendClickSignal(widget, evnt):
        widget.emit(SIGNAL('clicked()'))
    widget.mousePressEvent = lambda evnt: SendClickSignal(widget, evnt)

a = QApplication([])
m = Main()
m.show()
sys.exit(a.exec_()) 
```

这种方式并不意味着子类`QLabel`化，因此它可用于向使用 QtDeigner 制作的小部件添加逻辑。

**优点：**

*   可用于 QTdesigner 编译文件
*   可以应用于任何类型的小部件（您可能需要包含`super`对覆盖函数的调用以确保小部件的正常行为）
*   相同的逻辑可用于发送其他信号

**缺点：**

*   您必须使用`QObject`语法来连接信号和插槽

# javascript - 谷歌地图 - 使用给定折线的两点之间的最短路线

> ID：10184942
> 
> 赞同：4
> 
> 时间：2012-04-17T04:11:18.670
> 
> 标签：javascript, google-maps, google-maps-api-3

我一直在为我的城市开发一个关于公共交通的网页原型。这是典型的页面，您可以在其中输入出发地和目的地地址，该页面显示您应该乘坐哪些公交线路穿过德市。

我遇到了一个大问题：从 A 点到 B 点有一条同向行驶的公交线路（用折线表示）。我找到了计算点和折线之间最短距离的最佳公交线路。这里一切都很好，但是当我想从 B 点到 A 点（之前的相同点）时，那个方向没有公交线路，但是页面会一直提示之前的公交线路。

简而言之，公共汽车在这些点之间仅以一种方式行驶，但绘制的多段线没有方向，因此它在两种情况下都有效（A 到 B 和 B 到 A）。

有没有办法考虑折线的方向 AB？

我一直在考虑将其作为节点之间的最短路径问题来处理，在公交线路不应该去的方向上成本很高。但我也认为，这有点过分了。你怎么看？

提前致谢

**更新：**

一个想法是使用折线的路径索引，并且仅当路径索引在这些点之间增长时才考虑起点和目的地之间的路线（折线）。

我使用[v3_BdccGeo.js](http://groups.google.com/group/google-maps-js-api-v3/browse_thread/thread/)来获取点和折线之间的最小距离，但是这个函数不返回最近的点，只返回距离。如果我能找到最近的点，它也可能不属于路径索引，而是属于折线段（在这种情况下，我无法获得折线路径中点的索引）。

如果有什么需要澄清的，就直说吧。提前致谢

**更新 2：**

解决了！最后，我制作了检查折线的索引，v3_BdccGeo.js 确实返回了我需要的索引。

# gwt - 如何在 GWT 中调用类

> ID：10184947
> 
> 赞同：-1
> 
> 时间：2012-04-17T04:12:03.403
> 
> 标签：gwt

我是 GWT 的新手。我面临以下问题。当我将我的 UserDAO 类调用到 GWt main （入口点）时，它会给我以下错误**Plugin failed to connect to Development mode server**。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:29:07.603

此链接将为您提供更多帮助

[在远程环境中调试 GWT 应用程序](https://stackoverflow.com/questions/8910472/debugging-a-gwt-application-in-a-remote-environment)

[http://notepad2.blogspot.in/2010/12/debug-google-web-toolkit-applications.html](http://notepad2.blogspot.in/2010/12/debug-google-web-toolkit-applications.html)

# jquery - jquery中RadWindow的模态对话框/替换？

> ID：10184950
> 
> 赞同：0
> 
> 时间：2012-04-17T04:12:40.157
> 
> 标签：jquery, modal-dialog

我想打开一个弹出式样式页面。我很想看看人们可能有的任何例子。

在 RadWindow 我会做这样的事情：

```
 RadWindow statusWindow = new RadWindow();
    statusWindow.NavigateUrl = "./StatusWindow.aspx" + qs;
    statusWindow.ID = "sendWindow";
    statusWindow.Visible = true;
    statusWindow.Height = Unit.Pixel(180);
    statusWindow.Width = Unit.Pixel(595);
    statusWindow.Modal = true; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T04:14:28.823

像这样使用`window.open`：

```
var myWindow = window.open('','','width=200,height=100');
myWindow.focus(); 
```

但是请注意，除非您的窗口是由于用户操作（单击等）而直接打开的，否则它可能会在大多数浏览器中作为弹出窗口被阻止。

* * *

编辑：如果你想完全覆盖主页，你可以这样做：

```
var myWindow = window.open();
myWindow.focus(); 
```

# php - 将密码从 iPhone 应用程序安全传输到 Web 服务器

> ID：10184951
> 
> 赞同：1
> 
> 时间：2012-04-17T04:12:44.370
> 
> 标签：php, iphone, ios5, nsurlrequest

这可能是在其他地方问过的，但我肯定找不到它......

我正在构建一个 iPhone 应用程序，它将从 UITextFields 获取用户名和密码并使用它们登录。

我的 php 脚本需要 $_REQUEST["user"] 和 $_REQUEST["password"] 才能登录。我得到了这个工作：

```
- (IBAction)submit:(id)sender {
    NSString *url=[NSString stringWithFormat:@"https://localhost:8443/index.php?at=main&pre=login&pre=login&user=%@&password=%@", _usernameentered, _passwordentered];
    NSLog(@"%@",url);
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]];
}; 
```

但是，密码仍然以纯文本形式发送。我需要将其作为 POST 变量发送，但我不知道该怎么做。我觉得应该有几行代码来说明 POST 变量是什么，但我在互联网上找不到任何东西。也许我正在使用错误的术语进行搜索。

另外，我正在为 ios5 开发，所以我不想给我们 ASIHTTPrequest。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T04:24:10.020

你想使用[NSURLConnection](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html)。这是一个[指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)。使用 HTTPS 很好。

# c++ - 声音 API Ubuntu Linux

> ID：10184956
> 
> 赞同：5
> 
> 时间：2012-04-17T04:13:24.137
> 
> 标签：c++, c, linux, audio, ubuntu

我想编写一些本机 C/C++ 代码来获取一些未压缩的 PCM 音频数据并通过我在 Ubuntu Linux 12.04 上的扬声器播放出来。您能告诉我安装了哪些不同的默认音频 API/库吗？它们的底层架构是什么？它们如何与内核交互？（系统调用）

（我听说过不同的术语，如 ALSA、PulseAudio、OSS 等，但我并不清楚它们的作用以及它们如何组合在一起。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T07:04:18.273

在 Linux 上，您有**很多**Linux 音频 API 可供选择。[这是我几年前制作的一张图表，展示了各种 Linux 音频 API 之间的关系。](http://blogs.adobe.com/penguinswf/files/penguinswf/linuxaudio.png)

但是，如果您只针对 Ubuntu Linux 并使用 C/C++，并且不需要任何花哨的东西（只需获取原始 PCM 数据并将其推送到扬声器），我建议您使用 PulseAudio 并坚持“简单“API。[一个简单的例子可以在这里找到](http://freedesktop.org/software/pulseaudio/doxygen/simple.html)。这是获得概念验证工作阻力最小的途径。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T04:38:04.087

简单来说，ALSA 为 Linux 中的音频提供了低级基础架构，而 Pulse 提供了更高（更适合桌面）级别。就大多数主流 Linux 发行版（包括 Ubuntu）而言，OSS 已经过时。

您询问系统调用。您不会通过系统调用在 Linux 中使用音频。如果您选择直接使用 ALSA（对于简单的音频播放来说不是一个好主意），您将使用它的用户空间库 libasound2（甚至 OSS 也将通过 /dev/ 文件而不是系统调用来使用）。

如果您只针对现代 Linux 发行版，请考虑使用 Pulse API。如果您想要更灵活地了解您的目标发行版和跨平台支持的潜力，您可以尝试一个抽象出操作系统特定音频 API 的库 - 例如，PortAudio (http://www.portaudio.com /)。

如果您从未做过任何音频开发，您可能会发现像 PortAudio 这样的库比直接寻址 PulseAudio 更容易使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T04:30:53.553

[FMOD](http://www.fmod.org) should be great for you. It's fairly easy to integrate to any C++ project (and many more languages) and runs under Windows, **Linux (32bit and 64bit)**, Mac, Android, PS3, Xbox, etc. Also [FMOD Ex](http://www.fmod.org/products/fmodex.html) provides both a low-level API and data-driven API.

It is free to use if you are not planning on making money with your application. Otherwise you might have to pay for a license starting at about 100$.

# c++ - wxWidgets 中的自定义内存分配

> ID：10184957
> 
> 赞同：1
> 
> 时间：2012-04-17T04:13:26.083
> 
> 标签：c++, memory, memory-management, wxwidgets

有没有办法为所有 wxWidgets 使用自定义分配器？因为它总是从某个内存分配器中获取内存？我过去没有找到任何关于此的主题，并且我看不到通过文档获得此主题的方法。如果有，有人可以提供一个如何做到这一点的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:23:03.027

您应该能够重载全局 new 和 delete。至少当您启用[调试](http://docs.wxwidgets.org/2.8/wx_debuggingoverview.html)内存时，wxWidgets 内部使用的是这种方式。

但这可能存在一些[问题](https://stackoverflow.com/q/2104459/79455)。

您也可以通过重载 new 和 delete 来编辑 wxWidgets 源以使用您自己的分配器，就像在[wx/memory.h中所做的那样](http://svn.wxwidgets.org/viewvc/wx/wxWidgets/trunk/include/wx/memory.h?revision=71102&view=markup)

# c - 使用具有 c 语言 .crt 文件的 SSL 对 HTPPS 进行身份验证

> ID：10184960
> 
> 赞同：0
> 
> 时间：2012-04-17T04:14:24.347
> 
> 标签：c, ssl, curl, https

谁能告诉我有关使用 ssl 的 HTTPS 身份验证的信息。我有一个 crt 文件。验证 HTTPS 所需的文件是什么。我正在使用 CURl 。任何使用 CURl 对 HTTPPS 进行身份验证的 c 语言示例程序都是非常值得赞赏的。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:31:02.563

我假设您正在谈论[libcurl](http://curl.haxx.se/libcurl/c/example.html)，并且您已经查看了[此处](http://curl.haxx.se/libcurl/c/simplessl.html)的示例。这使用 PEM 文件：从[docs](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTSSLCERTTYPE) for`CURLOPTSSLCERTTYPE`中，支持的格式是 PEM 和 DER：您的 CRT 文件可能是 DER 格式，因此请尝试示例中的代码。

如果您有一个有效的 .crt 客户端证书，它没有被成功解释为 DER 格式文件，您可以[将其转换为 PEM 格式](http://www.sslshopper.com/article-most-common-openssl-commands.html)。

# ruby-on-rails - 从 Rails 获取嵌套的 JSON 输出

> ID：10184963
> 
> 赞同：3
> 
> 时间：2012-04-17T04:14:33.293
> 
> 标签：ruby-on-rails, model-associations

假设我有一个带有两个模型的 Rails 应用程序`Post`和`Comment`. 一个帖子`has_many`评论和一个评论`belongs_to`一个帖子。
如何覆盖操作中的`respond_to`函数`show`以获得包含属性和对象`Post`数组的JSON 响应？`Comment`

目前它是 vanilla Rails 的默认设置：

```
# posts_controller.rb
def show
  @post = current_user.posts.find(params[:id])

  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @post }
  end
 end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T05:45:12.133

您可以使用 Active Record 序列化方法来做到这一点。

```
to_json 
```

下面的代码应该可以工作。

```
 format.json { render json: @post.to_json(:include => :comments) } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T04:28:24.760

Try using [active_model_serializers](https://github.com/josevalim/active_model_serializers) for json serialization. It is easy to include associated objects and also separates things by having a different file for serialization.

Example:

```
class PostSerializer < ApplicationSerializer
    attributes :id, :title, :body
    has_many :comments
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T04:31:01.927

You can override `to_json` in model or you can use [Jbuilder](http://railscasts.com/episodes/320-jbuilder) or [rabl](http://railscasts.com/episodes/322-rabl).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T06:05:47.693

Rails 提供了最好的响应方式：

在您的控制器顶部定义**respond_to 。**喜欢 ：

```
class YourController < ApplicationController
  respond_to :xml, :json

  def show
    @post = current_user.posts.find(params[:id])
    respond_with (@post)
  end
end 
```

有关更多信息，请查看：[http ://davidwparker.com/2010/03/09/api-in-rails-respond-to-and-respond-with/](http://davidwparker.com/2010/03/09/api-in-rails-respond-to-and-respond-with/)

# sql - SQL 查询出错

> ID：10184964
> 
> 赞同：1
> 
> 时间：2012-04-17T04:14:47.263
> 
> 标签：sql, sql-server, sql-server-2008

在 SQL Server 2008 中运行此查询时出现错误：

```
EXEC master..xp_cmdshell'bcp 
       "select Row_ID, Service_Code,Skill from Account_Service" 
       queryout "d:\text.txt" -c -T -x' 
```

错误是：

> SQLState = 08001，NativeError = 2
> 错误 = [Microsoft][SQL Server Native Client 10.0]命名管道提供程序：无法打开与 SQL Server [2] 的连接。
> SQLState = 08001，NativeError = 2
> 错误 = [Microsoft][SQL Server Native Client 10.0]在建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。检查实例名称是否正确以及 SQL Server 是否配置为允许远程连接。有关详细信息，请参阅 SQL Server 联机丛书。
> SQLState = S1T00，NativeError = 0
> 错误 = [Microsoft][SQL Server Native Client 10.0]
> 登录超时已过期

![在此处输入图像描述](../Images/cdf3e6f9fc2b6a2bc16ef2d436392647.png)

**注意**: `Shared Memory`, `Named Pipes`,`TCP/IP`都在 SQL Server 配置管理器中**启用**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:28:38.550

查看 SQL 配置管理器。我猜 TCP/IP Protocoll 没有启用，所以你可以通过访问你的 SQL Server。共享内存。因此，如果您在自己的 SQL Server 上，则可以连接，但不能从另一台机器访问它。

否则我会说这是一个网络问题，因为您看到连接超时。可能是防火墙软件被阻止或无法访问您的服务器。

最有可能的原因是我遇到的，适合你的判断是禁用 SQL Server 的 TCP/IP 协议。

# macos - Cocoa：如何创建 CFUrl/NSUrl 以从 ExtAudioFileOpenURL 的内存缓冲区中读取

> ID：10184966
> 
> 赞同：2
> 
> 时间：2012-04-17T04:15:06.917
> 
> 标签：macos, cocoa, file, url, buffer

一些函数，如 ExtAudioFileOpenURL，只接受 URL 作为文件的路径。这很好，但是如果您的文件在容器或内存缓冲区中，是否仍然可以创建指向此的 URL？

例如

```
char * w = read_sample_bytes(...);
CFURLRef url = CFURLCreateForBuffer(..., w, ...);
ExtAudioFileOpenURL(url, &extAudioFile);
etc.. 
```

还是我必须将数据提取到一个临时文件并为其创建一个 url？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T05:14:53.407

大概，您将首先创建一个`AudioFileID`with ，然后使用您需要的API`AudioFileInitializeWithCallbacks`包装结果。使用这种方法在内存中创建/读取文件不需要 CF/NS-URL。`ExtAudioFileWrapAudioFileID``ExtAudioFile`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:13:16.303

您无法创建指向内存区域的 URL。

对于您的特定目的，您必须按照 Justin 的建议或使用[Audio Queue Services](http://developer.apple.com/library/mac/documentation/MusicAudio/Reference/AudioQueueReference/)。

# linux - linux文件属性

> ID：10184969
> 
> 赞同：1
> 
> 时间：2012-04-17T04:15:22.600
> 
> 标签：linux, file, system-calls

使用 open syscall 写入和创建文件，文件没有属性。fedora16 gcc-4.6.3

```
#include <stdlib.h>
#include <unistd.h>
#include <fcntl.h>

int main()
{
    char *  str= "helloworld";
    int fd = open("test.db",O_WRONLY|O_CREAT|O_TRUNC|O_APPEND);

    write(fd,str,10);

    close(fd);
    return 0;
} 
```

ll test.db

> ----------。1 jiamo jiamo 14 Apr 17 11:34 test.db

虽然它不会创建具有默认文件属性的文件，例如`touch test.db`

掩码：0002

如果删除 O_TRUNC `int fd = open("test1.db",O_WRONLY|O_CREAT|O_APPEND)` 文件属性是：

> ----rwx---。1 jiamo jiamo 14 Apr 17 12:29 test1.db

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T04:28:51.757

将所需的权限添加到 open() 系统调用：

```
int fd = open("test.db",O_WRONLY|O_CREAT|O_TRUNC|O_APPEND, 0666); 
```

从文档中：

```
mode must be specified when O_CREAT is in the flags, and is ignored otherwise.
The argument mode specifies the permissions to use in case a new file is created. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T04:29:09.383

您需要将模式传递给[`open`](http://linux.die.net/man/3/open). 然后它也会设置权限。`open`是一个可变参数函数，您可以向它传递更多参数

```
int open(const char *path, int oflag, ... ); 
```

做类似的事情

```
open(LOCKFILE, O_WRONLY | O_CREAT | O_EXCL,
S_IRUSR | S_IWUSR | S_IRGRP | S_IROTH); 
```

[在此处](http://www.gnu.org/software/libc/manual/html_node/Permission-Bits.html#Permission-Bits)检查各种权限位

# c# - MVC EnumMember 自定义字符串

> ID：10184972
> 
> 赞同：2
> 
> 时间：2012-04-17T04:15:43.537
> 
> 标签：c#, model-view-controller, enums

我有这组枚举用于货币目的

```
[DataContract]
public enum PaymentCurrency
{

    /// <summary>
    /// Canadian dollar.
    /// </summary>
    [EnumMember(Value = "CA$")]
    CAD = 1,
} 
```

当我想显示特定项目时，例如 CAD，我希望它显示为“CA$”字符串。我通过为其分配一个值来尝试它，它不起作用，我没有太多线索。有任何想法吗 ？谢谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T04:22:02.087

该属性的`value`参数用于序列化。`EnumMember`不显示目的。请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/aa347875.aspx)。

要获得该值，您必须对其进行序列化，然后解析 XML。

另一种方法是编写自己的辅助方法并利用 C# 内置`DescriptionAttribute`：

```
public enum PaymentCurrency
{
  [DescriptionAttribute("CA$")]
  CAD,
  [DescriptionAttribute("US$")]
  USD,
  EURO
} 
```

然后在一个类中使用你自己的辅助方法，`EnumUtils`你可以这样做：

```
public class EnumUtils
{
  public static string stringValueOf(Enum value)
  {
    var fi = value.GetType().GetField(value.ToString());
    var attributes = (DescriptionAttribute[]) fi.GetCustomAttributes( typeof(DescriptionAttribute), false);
    if (attributes.Length > 0)
    {
        return attributes[0].Description;
    }
    else
    {
        return value.ToString();
    }
  }

  public static object enumValueOf(string value, Type enumType)
  {
    string[] names = Enum.GetNames(enumType);
    foreach (string name in names)
    {
      if (stringValueOf((Enum)Enum.Parse(enumType, name)).Equals(value))
      {
          return Enum.Parse(enumType, name);
      }
    }

    throw new ArgumentException("The string is not a description or value of the specified enum.");
  }
} 
```

# android - 从另一个包停止 Android 服务

> ID：10184973
> 
> 赞同：0
> 
> 时间：2012-04-17T04:15:44.440
> 
> 标签：android, bluetooth

在有人告诉我这无法做到之前，我已经对为什么进程不能相互干扰以及在什么条件下这是可能的进行了大量研究。我们的问题是设备之间的蓝牙支持不一致，某些设备上的解决方案是停止现有的蓝牙服务并运行一个单独的应用程序（BlueFTP），然后该应用程序能够侦听释放的端口并管理 OPP 通信。

*   `android.permission.RESTART_PACKAGES`权限加号`ActivityManager.restartPackage()`不起作用，因为它只是重新启动有问题的包。
*   `Process.killProcess`由于明显的原因不起作用（阅读 API）
*   `android.permission.KILL_BACKGROUND_PROCESSES`权限加号`ActivityManager.killBackgroundProcesses()`被忽略，因为（我相信根据 API）蓝牙应用程序不被视为后台应用程序，因此没有资格被杀死。

目前，如果客户在使用特定手机时遇到问题，我们会让他们转到正在运行的应用程序并在刷新 BlueFTP 之前强制停止有问题的 OPP 服务，以便端口侦听器启动。违规服务有多个可能的名称，具体取决于手机和 Android 版本。

所以。该过程目前是手动的，但我希望有一种方法可以通过镜像设置中的强制停止选项的代码来实现。更轻松的选择可能是协助打开该服务的设置，而不是需要向客户解释如何到达那里，但如果有可用的完整解决方案，我更喜欢完整的解决方案。请注意，虽然我们的开发手机具有 root 访问权限，但客户端手机不会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T04:37:54.600

您可以在其他应用程序中为您的服务使用隐式意图来关闭它们。它也不需要额外的权限，除非您的服务对其访问强制执行权限。

哦，我忽略了它是第三方应用程序的事实。在那种情况下，你真的做不了什么。对不起。

# python - py2app 在使用 virutalenv 时没有将 Python.framework 复制到新应用程序

> ID：10184974
> 
> 赞同：9
> 
> 时间：2012-04-17T04:16:07.137
> 
> 标签：python, osx-lion, virtualenv, pyobjc, py2app

环境：MacOS X 10.7.2，系统安装python 2.7.1，virtualenv 1.7.2，pyobjc 2.3，py2app 0.6.4+

我有一个新创建的 virtualenv，安装了 pyobc 2.3 和 py2app。当我运行 python setup.py py2app 来创建一个应用程序（例如在 py2app/examples/simple 中）时，一切似乎都可以编译并且它确实生成了一个可双击的应用程序，但是在单击该应用程序后，我收到以下错误：

```
A Python runtime not could be located.  You may need to install a framework build of Python, or edit the PyRuntimeLocations array in this application's Info.plist file. 
```

但是，如果我在 Lion 的标准安装中遵循相同的过程。该应用程序运行良好且符合预期。

关于如何使 virtualenv 和 py2app 相互配合的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T06:01:38.337

`py2app`永远不要将系统 Python 复制到它生成的应用程序包中。如果你想制作一个可以部署在多个 OS X 版本上的独立应用程序，你需要使用`py2app`单独安装的 Python，比如从 python.org 安装程序。参见，例如，[Py2App 找不到标准模块](https://stackoverflow.com/questions/1346297/py2app-cant-find-standard-modules)

# apachebench - ab（Apache Bench）错误：apr_poll：在 Windows 上指定的超时已过期（70007）

> ID：10184975
> 
> 赞同：52
> 
> 时间：2012-04-17T04:16:09.860
> 
> 标签：apachebench

我正在从我的 Windows 7/SP1 客户端对 IIS 7.5 (WinR2/SP1) 进行负载测试。我有一个脚本可以进行三个`ab`调用，例如：

```
start /B cmd /c ab.exe -k -n 500 -c 50 http://rhvwr2vsu410/HelloWebAPI/Home/SyncProducts > SyncProducts.txt 
```

当并发> 5时，我很快就会收到错误消息

```
apr_poll: The timeout specified has expired (70007) 
```

并`ab`停止提出请求。我什至没有达到*Completed 100 requests*。

这发生在启动我的脚本后 30 秒内。[ab](http://httpd.apache.org/docs/2.0/programs/ab.html)文档页面提供的内容不多。[相关堆栈溢出问题](https://stackoverflow.com/questions/9156537/why-does-a-simple-thin-server-stop-responding-at-16500-requests-when-benchmarkin)。[服务器故障相关问题](https://serverfault.com/questions/10852/what-limits-the-maximum-number-of-connections-on-a-linux-server)。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-08T17:51:37.600

您必须拥有 2.4 版本并使用[`-s timeout`option](http://httpd.apache.org/docs/2.4/programs/ab.html)。

编辑：

[https://www.wampserver.com/](https://www.wampserver.com/) - 包括 Apache 2.4.x Win32 和 Win64。

已弃用~~但仍然可用，但我不知道直到何时~~才可用：

您可以使用我的 win32-x86 二进制文件（在 Visual Studio 2008 下从trunk 8 Feb 2013 编译）：

*   ~~http://mars.iti.pk.edu.pl/~nkg/ab-standalone.exe~~（不再可用）
*   ~~http://mars.iti.pk.edu.pl/~nkg/ab-standalone-src.zip~~（不再可用）

我是使用：[http](http://code.google.com/p/apachebench-standalone/wiki/HowToBuild) ://code.google.com/p/apachebench-standalone/wiki/HowToBuild和 [http://ftp.ps.pl/pub/apache//apr/binaries/win32/apr-1.3 .6-iconv-1.2.1-util-1.3.8-win32-x86-msvcrt60.zip](http://ftp.ps.pl/pub/apache//apr/binaries/win32/apr-1.3.6-iconv-1.2.1-util-1.3.8-win32-x86-msvcrt60.zip)（只是不可用）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-07-29T08:44:52.883

```
ab --help 

-s timeout      Seconds to max. wait for each response
                    Default is 30 seconds 
```

添加选项：**-s 120**到 ab 命令，其中 120 是新的超时。如果还不够，那就再高点……

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-02-03T10:04:58.130

ab --帮助

```
-s      timeout      Seconds to max. wait for each response
                    Default is 30 seconds

-k                    Use HTTP KeepAlive feature 
```

这个对我有用

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-13T15:13:18.113

听起来像一个ab错误。

我在 OS X 上遇到了类似的问题（现在你提到它发生在 Windows 上，我更有信心 ab 是罪魁祸首）。我四处分析和跟踪我的 Web 应用程序，但找不到任何东西。然后我测试了 nginx 的静态页面，它仍然给了我错误。所以我然后去找了一个替代品...... jMeter。效果很好，但我仍然想知道ab问题是什么。

# php - 在与 PDO 相同的 mysql 语句中使用“AND”和“OR”

> ID：10184977
> 
> 赞同：0
> 
> 时间：2012-04-17T04:16:16.537
> 
> 标签：php, mysql, sql, pdo

是否有可能做到这一点？

假设我有一张桌子：`data`

```
$id_1 = "checking";
$id_2 = "box";
$id_users = 1;

id    id_1        id_2         id_users
1     checking    box             1
2     checking    circle          1
3     box         checking        1
4     box         checking        1

$sql = $db->prepare("SELECT COUNT(*) FROM data WHERE ((id_1 = ? AND id_2= ?) OR (id_1 = ? AND id_2 = ?)) AND id_users = ?");
$sql -> execute(array($id_1, $id_2, $id_2, $id_1, $id_users));
echo count($sql); 
```

有了这个，我只得到 1 的输出。从技术上讲，我应该得到 3 的输出，对吗？因为选中和框有 3 种可能性。

SQL 应该检查任一表的 和 的两种`checking`组合`box`。

有人可以告诉我我在这里做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T04:19:56.293

看起来您正在[`count()`](http://php.net/manual/en/function.count.php)使用已经计算过的 SQL `COUNT`ed 行数。
刚刚怎么样`echo $sql`？

```
$sql = $db->prepare("SELECT COUNT(*) FROM data WHERE ((id_1 = ? AND id_2= ?) OR (id_1 = ? AND id_2)) AND id_users = ?");
$sql->execute(array($id_1, $id_2, $id_2, $id_1, $id_users));
echo $sql->fetch(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T04:28:50.750

MДΓΓ БДLL 说的没问题，但你也可以使用命名参数：

```
$sql = $db->prepare("SELECT COUNT(*) FROM data WHERE ((id_1 = :id1 AND id_2= :id2) OR (id_1 = :id2 AND id_2 = :id1)) AND id_users = :idusers");
$sql -> execute(array(':id1' => $id_1, ':id2' => $id_2, ':idusers' => $id_users)); 
```

你需要获取结果

```
$result = $sql->fetch();
echo $result[0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T04:30:22.427

在您的查询中，您似乎将 id_1 作为参数传递给 id_2 并将 id_2 参数作为 id_1 传递，因此根据您的查询，只有一种 and 的组合`id_1 = checking` ，`id_2 = box`因此您将输出计数作为 1 而不是这个，以避免参数混淆使用

```
$sql -> execute(array(':id1' => $id_1, ':id2' => $id_2, ':idusers' => $id_users)); 
```

# asp.net-mvc-3 - 如何使用带有 ASP.NET MVC3 的 Ninject 3.0 将对象注入非控制器对象

> ID：10184978
> 
> 赞同：0
> 
> 时间：2012-04-17T04:16:24.683
> 
> 标签：asp.net-mvc-3, webforms, ninject, httpmodule

我有一个 MVC3 项目，我正在使用 Ninject 将实体框架上下文注入其中。我正在使用 Ninject 包 (3.0.0.15)、Ninject.MVC3 (3.0.0.6) 和 Ninject.Web.Common (3.0.0.7)。一切都很好，除非我尝试在文件后面注入 WebForms 代码。我假设这是因为我没有正确连接某些东西，但不确定如何连接它。Ninject 也无法在 Razor 实例化的文件中工作。

这是我的代码背后的代码：

```
[Inject]
public IDbContext DataContext { get; set; } 
```

Context 属性每次都显示为 null。在我更新到 Ninject 3.0 之前它工作得很好。

我的启动方法如下：

```
public static void Start()
{
    DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
    DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
    Bootstrapper.Initialize(CreateKernel);
} 
```

关于如何让 Ninject 将 DataContext 注入 WebForm 和 Razor 实例化的类的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:44:08.830

为此，您需要安装`Ninject.Web`NuGet（撰写本文时的最新版本是 3.0.0.5），然后让您的网络表单从以下位置派生`Ninject.Web.PageBase`而不是`System.Web.UI.Page`：

```
public partial class WebForm1 : Ninject.Web.PageBase
{
    [Inject]
    public IDbContext Ctx { get; set; }

    protected void Page_Load(object sender, EventArgs e)
    {
    }
} 
```

另请注意，我用作`Ctx`属性名称是因为在您隐藏的类上已经有一个名为[Context的属性（您应该收到编译时警告）。](http://msdn.microsoft.com/en-us/library/system.web.ui.page.context.aspx)`System.Web.UI.Page`

# javascript - 从 NED Big Ints 生成序列化的 rsa 公钥/私钥

> ID：10184985
> 
> 赞同：5
> 
> 时间：2012-04-17T04:17:53.373
> 
> 标签：javascript, python, ssh, pseudocode

我们正在生成 rsa 密钥，并希望将它们存储为公共和私有 base64 哈希，就像我习惯在我的 Linux 机器上的 ~/.ssh 文件夹中看到的那样。

但是，我们正在处理 RSA 原语 - n、e 和 d 值。

如何从这些值中生成 base64 散列？反之亦然（如果不明显）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:16:08.553

base64 是一种用于表示为文本的二进制数据的编码方案，而不是散列算法。如果你指的是指纹，那就是MD5。

对于指纹和 base64 编码的数据，您可以查阅甚至重用[Twisted 的 Conch 实现](http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.0.0/twisted/conch/ssh/keys.py#L583)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-04T23:15:43.747

您需要使用正确的 ASN.1 编码，然后使用 base64。

不幸的是，我不知道正确的 ASN.1 编码是什么（我自己也不太了解 ASN.1）。它内置于 openssl，但我找不到从命令行访问它的方法。[您可以使用http://www.openssl.org/docs/crypto/RSA_print.html](http://www.openssl.org/docs/crypto/RSA_print.html)和[http://www.openssl.org/docs/crypto/rsa.html](http://www.openssl.org/docs/crypto/rsa.html)从 C 编写它

标签中有python。pyopenssl 包装了 openssl 并可能提供更简单的路径 - [https://code.launchpad.net/pyopenssl](https://code.launchpad.net/pyopenssl) - 但从源代码来看，它们似乎太高级了（它们似乎没有暴露 RSA 结构）。

如果你说 ASN.1（或者有一个这样做的库，比如[http://pyasn1.sourceforge.net/](http://pyasn1.sourceforge.net/)）那么这可能就是你所需要的 - [https://polarssl.org/kb/cryptography/asn1-key -结构在der-and-pem](https://polarssl.org/kb/cryptography/asn1-key-structures-in-der-and-pem)

（我意识到这是相当不完整的——我不是在寻找赏金，只是倾倒我所知道的，以防它足以提供帮助——基本上“ASN.1 for DER”是你所缺少的部分；它定义了结构以便在回读时可以将不同的部分分开）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-05T11:22:23.393

几个小时后有空时，我会用更多细节和解码器更新它。

```
def bitlength_and_integer_in_bytes(n):
    bytes_length = n.bit_length()//8+1
    return bytes_length.to_bytes(4, "big")+n.to_bytes(bytes_length, "big")

def gen_id_rsa_pub(n,e):
    return b"ssh-rsa "+base64.b64encode(b"\x00\x00\x00\x07ssh-rsa"+bitlength_and_integer_in_bytes(e)+bitlength_and_integer_in_bytes(n))+b" RSA key description"
open("id_rsa.pub", "bw").write(gen_id_rsa_pub(n,e))
##import base64
##from pyasn1.codec.der import decoder
##s = "\n".join(open(".ssh/id_rsa").readlines()[1:-1])
##d = decoder.decode(base64.b64decode(s))
import base64
from pyasn1.codec.der import encoder
from pyasn1.type.univ import *
#below from http://stackoverflow.com/a/9758173/443348
def egcd(a, b):
    if a == 0:
        return (b, 0, 1)
    else:
        g, y, x = egcd(b % a, a)
        return (g, x - (b // a) * y, y)

def modinv(a, m):
    g, x, y = egcd(a, m)
    if g != 1:
        raise Exception('modular inverse does not exist')
    else:
        return x % m

#got example values from https://en.wikipedia.org/wiki/RSA_(algorithm)#A_working_example
p = 61
q = 53
n = p*q #3233
totient_n = (p-1)*(q-1) # 3120
e = 17 # Should be coprime to 3120
d = modinv(e, totient_n) #2753

s = Sequence()
def setvalues(sequence, values):
    for index, value in enumerate(values):
        sequence.setComponentByPosition(index, value)

q = n/p

setvalues(s, map(Integer, (0, n, e, d, p, q, d%(p-1), d%(q-1), modinv(q,p))))
id_rsa = b"-----BEGIN RSA PRIVATE KEY-----\n"+base64.b64encode(encoder.encode(s))+b"\n-----END RSA PRIVATE KEY-----\n"
open("id_rsa", "bw").write(id_rsa) 
```

# java - 当每个条件导致返回时，if vs if-else vs switch

> ID：10184986
> 
> 赞同：1
> 
> 时间：2012-04-17T04:18:26.057
> 
> 标签：java, language-agnostic

`if`谁能解释使用,`if else`或`switch`在类似于以下的相当大的代码块之间的权衡（即使它可以忽略不计） ？如果比较的是 String 或另一个 Object 而不是 int，情况会有所不同吗？这些示例是用 Java 编写的，但它是一个一般性问题。

**编辑**

正如几个答案所述，开关会更快，如果有多种情况，可能应该使用开关。但是，没有人评论过这样`if`的`if else`长链。引发这个问题的原因是，我经常在无法使用开关的地方创建这些块，因为大多数情况需要多个表达式。我想排除`else`感觉草率，但这并不是真正必要的，所以为什么要包括它呢？

```
public String getValueString(int x) {
    if (x == 1) return "one";
    if (x == 2) return "two";
    if (x == 3) return "three";
    if (x == 4) return "four";
    ...
    return null;
} 
```

VS

```
public String getValueString(int x) {
    if (x == 1) return "one";
    else if (x == 2) return "two";
    else if (x == 3) return "three";
    else if (x == 4) return "four";
    ...
    return null;
} 
```

VS

```
public String getValueString(int x) {
    switch(x) {
        case 1: return "one";
        case 2: return "two";
        case 3: return "three";
        case 4: return "four";
        ...
    }
    return null;        
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T04:22:16.860

如果您有很多案例，那么该`switch`方法是首选方法。原因是前两个本质上需要对所有 if 语句进行线性搜索。因此，这`O(N)`取决于您拥有的案件数量。

另一方面，`switch`语句的优化方式不同，可以是`O(log(N))`或者甚至是`O(1)`为了找到正确的情况。

* * *

编译器如何实现`O(log(N))`甚至`O(1)`？

*   案例值的二进制搜索将允许它在`O(log(N))`.
*   如果 case 值足够密集，编译器甚至可以使用由 case 变量索引的跳转表。在这种情况下，它是`O(1)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T04:22:06.247

大多数编译器会将您问题中的示例优化为几乎甚至完全相同。因此，问题在于可读性。

如果你有一个或两个案例，一个`if`陈述通常是有意义的。如果你有很多，特别是如果每​​种情况的代码都很小，那么`switch`就所需的代码而言，语句往往更经济，并且更容易阅读。

但是，至少在某种程度上，可读性是个人喜好的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T04:23:17.453

Switch 在可以使用时比 if/else 块快。当条目超过 5 个时，它被实现为查找。这提供了一些有关性能的信息：[“else if”是否比“switch() case”快？](https://stackoverflow.com/questions/767821/is-else-if-faster-than-switch-case)

我相信在这些情况下它也更具可读性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T04:39:36.967

`if`对于较少的项目，语句和语句之间不会有显着的性能差异`switch`。在`switch`语句中，每个项目都是在同一时间直接访问的，因此最后一个项目将与第一个项目花费相同的时间。In`if`语句访问最后一个项目将比第一个项目花费更长的时间，因为它必须遍历它之前的所有项目。无论如何，对于您的示例中较少的项目，延迟不会很明显。

[这是关于这个主题的一个很好的讨论](http://www.dotnetperls.com/if-switch-performance)。看一看。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T05:16:25.747

如果您有大量类似于提供的示例中的条件，那么我会推荐一个 Map。

```
Map<Integer,String> map = new HashMap<Integer,String>();
map.put(1,"one");
map.put(2,"two");
map.put(3,"three");
map.put(4,"four"); 
```

我不确定权衡。我想它的行为类似于 switch 语句。它将降低代码的圈复杂度，使其更具可读性。

# c# - 编写用于 C# 的非托管 C++ DLL

> ID：10184988
> 
> 赞同：2
> 
> 时间：2012-04-17T04:18:52.533
> 
> 标签：c#, c++, windows, visual-studio-2010, dll

我是一名 Linux C++ 开发人员，我需要为 windows 编写 C++ dll，用于 C# 应用程序。

问题是将 DLL 导入 C#，我不知道该怎么做。在我朋友的项目中，很可能会使用任何类型的非托管 dll，我负责这样做:-D

我需要导入 DLL 中的所有对象和函数，而我的搜索只导致了 DllImport 等等。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T05:11:58.827

您可以使用 C++/CLI 作为非托管 C++ 的包装器。有关 C++/CLI 及其功能的更多信息，您可以使用此链接

[http://www.functionx.com/cppcli](http://www.functionx.com/cppcli)

你可以快速浏览一下

[http://www.codeproject.com/Articles/19354/Quick-C-CLI-Learn-C-CLI-in-less-than-10-minutes#A8](http://www.codeproject.com/Articles/19354/Quick-C-CLI-Learn-C-CLI-in-less-than-10-minutes#A8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T04:30:03.183

Have you thought to keep the Dll's in C++ (port then recompiled under VS.NET) less effort than a C# port.

I have in the past made a shared memory DLL to allow LabVIEW (Windows7) and a Winforms C#.NET appl. to share data storage via this dll.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T05:18:55.420

看看这个教程。它显示了完成您想要的两种方法：[如何编组 C++ 类](http://www.codeproject.com/Articles/18032/How-to-Marshal-a-C-Class)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T04:22:05.427

你想要 DllImport

这里有一堆信息：-

[http://msdn.microsoft.com/en-us/library/aa288468(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa288468(v=vs.71).aspx)

还有更多关于谷歌的内容，以及与 DllImport 相关的许多 stackoverflow 问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T04:25:22.937

有很多方法可以解决这个问题。您可以在 C++ 中编写一个 CLR dll，它放置一个 C# 可以直接“对话”的接口。这是一个不错的选择，因为您可以保持本机 C++ 不变，而不是让所有代码都基于 CLR。

搜索 C++/CLI

您还可以使用 dllimport 和朋友创建标准 dll。