# StackOverflow 问答 000909000-000909999

# java - 使用 ClassLoader 方法检索类下的所有资源作为输入流

> ID：909000
> 
> 赞同：3
> 
> 时间：2009-05-26T05:03:07.530
> 
> 标签：java, classloader

我的问题是您认为很常见的问题，但到目前为止我还没有找到解决方案。

在 Tomcat 5.5 下构建 Java Web 应用程序（尽管要求它可以部署在任何地方，例如在 WebLogic 环境下，因此需要将资源作为流加载）。良好的做法要求将资源文件放在*WEB-INF/classes下并使用 ClassLoader 的**getResourceAsStream()*方法加载。当您知道要加载的资源的名称时，一切都很好。

*我的问题是我需要加载位于classes*的子目录中的所有内容（包括递归地在非空子目录中）。

因此，例如，如果我在*WEB-INF/classes*下有以下内容：

*文件夹X/文件夹Y*

*文件夹X/文件夹Y/fileA.properties*

*文件夹X/fileB.properties*

我需要加载fileA.properties 和fileB.properties 类，但在启动应用程序之前实际上并不知道它们的名称（即我需要能够从WEB-INF/classes 下的任何目录中任意加载资源）。

最优雅的方法是什么？我可以查询什么对象来找到我需要的信息（每个所需资源的资源路径）？最好使用非 servlet 特定的解决方案（如果可能，将其全部保存在类加载框架中）。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T05:07:28.350

据我所知，没有这样的能力，因为类加载器只尝试加载它被要求的东西。它不会预取类路径上的所有项目，也不会将它们视为目录结构。

我解决问题的方法是在构建时在所有相关资源的文本文件中创建一个目录列表，并将其包含在战争中，然后通过这种方式进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T13:19:58.220

你可以用一些技巧来做到这一点:)

获取资源作为 URL，提取协议：

*   文件协议 - 获取 URL 路径并且你有一个文件夹，扫描文件。
*   jar/zip 协议 - 提取 jar/zip 路径并使用 JarFile 浏览文件并提取路径/包下的所有内容。

# asp.net - 如何将数据发布到 ASP.NET HttpHandler？

> ID：909002
> 
> 赞同：14
> 
> 时间：2009-05-26T05:03:26.827
> 
> 标签：asp.net, ajax, httphandler

我正在尝试将大量数据发送到 HTTP 处理程序。由于 URL 长度限制，我无法使用 GET 发送它，所以我决定改为发布它。问题是我无法理解这些值。context.Request.Form 显示它有 0 个项目。那么有没有办法可以将数据发布到 HttpHandler？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-27T02:29:05.133

有一些代码可以帮助诊断问题。你有没有尝试过这样的事情？

jQuery代码：

```
$.post('test.ashx', 
       {key1: 'value1', key2: 'value2'}, 
       function(){alert('Complete!');}); 
```

然后在你的`ProcessRequest()`方法中，你应该能够做到：

```
string key1 = context.Request.Form["key1"]; 
```

您还可以在 ProcessRequest() 方法中检查请求类型以调试问题。

```
if(context.Request.RequestType == "POST")
{
    // Request should have been sent successfully
}
else
{
    // Request was sent incorrectly somehow
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-03-09T10:46:10.747

我也有同样的问题。这是一个客户端/AJAX 问题。我必须将 AJAX 调用请求标头“ContentType”设置为

```
application/x-www-form-urlencoded 
```

让它工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-02-13T11:49:27.690

我遇到了同样的问题，最终发现将内容类型设置为“json”是问题所在......

```
contentType: "application/json; charset=utf-8" 
```

这是一些流行教程建议您在 $ajax 调用中添加的一行，并且适用于 ASPx WebServices，但由于某种原因，它不适用于使用 POST 的 HttpHandler。

很难捕捉，因为查询字符串中的值工作正常（另一种在网络上看到的技术，尽管为此使用 POST 没有多大意义）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-08-27T19:46:55.910

面临类似的问题。在纠正了所有问题之后，我还漏掉了一件事`web.config`——将动词更改为`*`OR `GET,POST`。之后一切正常。

```
<httpHandlers>
    ...
    <add verb="*" path="test.ashx" type="Handlers.TestHandler"/>
</httpHandlers> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-19T10:28:18.263

POST 字段包含在

```
HttpContext.Request.Params 
```

要检索它们，您可以使用

```
var field = HttpContext.Request.Params["fieldName"]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-26T05:08:39.423

您发送到 HTTP 处理程序的 POST 数据必须是查询字符串格式`a=b&c=d`。`Request["a"]`您可以使用(will return )在服务器端检索它`b`，依此类推。

# javascript - 获取对象的第一个索引

> ID：909003
> 
> 赞同：204
> 
> 时间：2009-05-26T05:03:55.953
> 
> 标签：javascript, javascript-objects

考虑：

```
var object = {
  foo: {},
  bar: {},
  baz: {}
} 
```

我该怎么做：

```
var first = object[0];
console.log(first); 
```

显然，这不起作用，因为第一个索引名为`foo`，而不是`0`。

```
console.log(object['foo']); 
```

有效，但我不知道它被命名为 foo。它可以被命名为任何东西。我只想要第一个。

* * *

## 回答 #1

> 赞同：333
> 
> 时间：2013-07-10T20:00:53.853

只是为了好玩，这适用于 JS 1.8.5

```
var obj = {a: 1, b: 2, c: 3};
Object.keys(obj)[0]; // "a" 
```

这与您看到的顺序相同

```
for (o in obj) { ... } 
```

* * *

## 回答 #2

> 赞同：204
> 
> 时间：2010-05-04T23:58:58.240

如果您想要简洁的内容，请尝试：

```
for (first in obj) break;

alert(first); 
```

包装为函数：

```
function first(obj) {
    for (var a in obj) return a;
} 
```

* * *

## 回答 #3

> 赞同：77
> 
> 时间：2009-05-26T05:34:41.093

他们并没有*真正*订购，但你可以这样做：

```
var first;
for (var i in obj) {
    if (obj.hasOwnProperty(i) && typeof(i) !== 'function') {
        first = obj[i];
        break;
    }
} 
```

`.hasOwnProperty()`忽略原型对象很重要。

* * *

## 回答 #4

> 赞同：76
> 
> 时间：2013-11-06T14:07:31.427

这不会给你第一个，因为 javascript 对象是无序的，但是在某些情况下这很好。

```
myObject[Object.keys(myObject)[0]] 
```

* * *

## 回答 #5

> 赞同：61
> 
> 时间：2009-05-26T05:22:40.530

如果对象的顺序很重要，则应修改 JSON 模式以将对象存储在数组中：

```
[
    {"name":"foo", ...},
    {"name":"bar", ...},
    {"name":"baz", ...}
] 
```

或许：

```
[
    ["foo", {}],
    ["bar", {}],
    ["baz", {}]
] 
```

正如 Ben Alpert 指出的那样，Javascript 对象的属性是无序的，如果您希望它们以与对象字面量中指定的相同顺序进行枚举，那么您的代码就会被破坏——没有“第一个”属性。

* * *

## 回答 #6

> 赞同：40
> 
> 时间：2017-01-05T10:16:25.140

对于对象的第一个键，您可以使用

```
console.log(Object.keys(object)[0]);//print key's name 
```

为价值

```
console.log(object[Object.keys(object)[0]]);//print key's value 
```

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2009-05-26T05:06:50.457

无法获取第一个元素，因为 JavaScript 中的“哈希”（对象）具有无序属性。最好的办法是将键存储在数组中：

```
var keys = ["foo", "bar", "baz"]; 
```

然后使用它来获得正确的值：

```
object[keys[0]] 
```

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2017-08-28T16:47:42.117

ES6

```
const [first] = Object.keys(obj) 
```

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2013-08-29T18:21:55.230

使用下划线，您可以使用 _.pairs 将第一个对象条目作为键值对获取，如下所示：

```
_.pairs(obj)[0] 
```

然后该键将可与另一个`[0]`下标一起使用，该值与`[1]`

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2009-05-26T05:12:20.030

我昨天有同样的问题。我是这样解决的：

```
var obj = {
        foo:{},
        bar:{},
        baz:{}
    },
   first = null,
   key = null;
for (var key in obj) {
    first = obj[key];
    if(typeof(first) !== 'function') {
        break;
    }
}
// first is the first enumerated property, and key it's corresponding key. 
```

不是最优雅的解决方案，我很确定它可能会在不同的浏览器中产生不同的结果（即规范说枚举不需要以与定义相同的顺序枚举属性）。但是，我的对象中只有一个属性，所以这不是问题。我只需要第一把钥匙。

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2009-05-26T05:17:34.983

你可以这样做：

```
var object = {
    foo:{a:'first'},
    bar:{},
    baz:{}
}

function getAttributeByIndex(obj, index){
  var i = 0;
  for (var attr in obj){
    if (index === i){
      return obj[attr];
    }
    i++;
  }
  return null;
}

var first = getAttributeByIndex(object, 0); // returns the value of the
                                            // first (0 index) attribute
                                            // of the object ( {a:'first'} ) 
```

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2017-03-08T14:59:03.443

获取对象的第一个键

```
const myObject = {
   'foo1': { name: 'myNam1' },
   'foo2': { name: 'myNam2' }
}

const result = Object.keys(myObject)[0];

// result will return 'foo1' 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2013-06-01T15:12:19.003

基于[CMS](https://stackoverflow.com/users/5445/cms) [答案](https://stackoverflow.com/a/909036/1250044)。我没有直接获取值，而是在其索引处获取键并使用它来获取值：

```
Object.keyAt = function(obj, index) {
    var i = 0;
    for (var key in obj) {
        if ((index || 0) === i++) return key;
    }
};

var obj = {
    foo: '1st',
    bar: '2nd',
    baz: '3rd'
};

var key = Object.keyAt(obj, 1);
var val = obj[key];

console.log(key); // => 'bar'
console.log(val); // => '2nd' 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2011-12-30T03:22:32.443

我的解决方案：

```
Object.prototype.__index = function(index)
{
    var i = -1;
    for (var key in this)
    {
        if (this.hasOwnProperty(key) && typeof(this[key])!=='function')
            ++i;
        if (i >= index)
            return this[key];
    }
    return null;
}
aObj = {'jack':3, 'peter':4, '5':'col', 'kk':function(){alert('hell');}, 'till':'ding'};
alert(aObj.__index(4)); 
```

# java - 避免初始内存堆大小错误

> ID：909018
> 
> 赞同：21
> 
> 时间：2009-05-26T05:11:32.137
> 
> 标签：java, memory-management

我使用以下命令运行 Java 代码：

```
$ java -Xms4G -Xmx4G myjavacode 
```

我的 cpu 的 RAM 容量是 6GB。

但是它总是无法执行给我这个错误消息：

```
Invalid initial heap size: -Xms5G
The specified size exceeds the maximum representable size.
Could not create the Java virtual machine 
```

有没有办法设置 Java 选项以便我们可以执行代码？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-26T05:52:52.210

您已超出 JVM 的最大堆大小。这取决于 JVM 和操作系统。在大多数 32 位系统中，最大值将为 2Gb，而与可用的物理内存无关。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-05-26T08:07:45.027

默认情况下，Java 将以 32 位模式运行。请务必为其提供 -d64 选项以使其进入 64 位模式。一旦进入 64 位模式，分配 6GB JVM 应该不会有任何问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-26T06:16:20.773

实际上，32 位系统的最大内存大小可能会有所不同，最高可达 4 GB，但 2 GB 是一个常见值。通常可以重新链接内核以将其增加到 3 或 3.5 GB。当然，问题在于您没有地址空间来映射更多内存。你试过64位机器吗？

另外，请记住在执行此操作之前将 ulimit 设置得更高。

# java - 在 Java 中解析 XML dateTime 的最佳方法是什么？

> ID：909022
> 
> 赞同：46
> 
> 时间：2009-05-26T05:12:39.077
> 
> 标签：java, xml

在 Java 中解析 XML dateTime 的最佳方法是什么？合法的 dateTime 值包括 2002-10-10T12:00:00-05:00 和 2002-10-10T17:00:00Z

是否有一个很好的开源库我可以使用，或者我应该使用 SimpleDateFormat 或类似的东西推出我自己的库？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2011-04-20T15:20:07.800

还有[javax.xml.bind.DatatypeConverter#parseDateTime(String xsdDateTime)](http://download.oracle.com/javase/6/docs/api/javax/xml/bind/DatatypeConverter.html#parseDateTime%28java.lang.String%29)，它是 JDK 的一部分。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2009-05-26T06:17:37.747

我想你想[`ISODateTimeFormat.dateTimeNoMillis()`](http://joda-time.sourceforge.net/api-release/org/joda/time/format/ISODateTimeFormat.html#dateTimeNoMillis())从[Joda Time](http://joda-time.sourceforge.net)那里得到。一般来说，我*强烈*建议您远离 Java 中的内置日期/日历类。Joda Time 设计得更好，支持不变性（特别是格式化程序是不可变的和线程安全的），并且是 Java 7 中新的日期/时间 API 的基础。

示例代码：

```
import org.joda.time.*;
import org.joda.time.format.*;

class Test
{   
    public static void main(String[] args)
    {
        parse("2002-10-10T12:00:00-05:00");
        parse("2002-10-10T17:00:00Z");
    }

    private static final DateTimeFormatter XML_DATE_TIME_FORMAT =
        ISODateTimeFormat.dateTimeNoMillis();

    private static final DateTimeFormatter CHECKING_FORMAT =
        ISODateTimeFormat.dateTime().withZone(DateTimeZone.UTC);

    static void parse(String text)
    {
        System.out.println("Parsing: " + text);
        DateTime dt = XML_DATE_TIME_FORMAT.parseDateTime(text);
        System.out.println("Parsed to: " + CHECKING_FORMAT.print(dt));
    }
} 
```

输出：

```
Parsing: 2002-10-10T12:00:00-05:00
Parsed to: 2002-10-10T17:00:00.000Z
Parsing: 2002-10-10T17:00:00Z
Parsed to: 2002-10-10T17:00:00.000Z 
```

（请注意，在输出中，两者都以相同的 UTC 时间结束。格式化的输出使用 UTC，因为我们在`withZone`调用时要求它这样做。）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-26T14:48:09.947

StaxMan 是绝对正确的。为了使用 SimpleDateFormat，您需要关闭每个 SimpleDateFormat 中的松散解析并迭代几种 SimpleDateFormat 格式，直到找到解析日期而不抛出异常的格式。如果您保持松散的解析，当您真的不想要匹配时，您很容易得到匹配，并且[XSD:DateTime 的词法空间](http://www.w3.org/TR/xmlschema-2/#dateTime)在格式上留下了一些 SimpleDateFormat 无法在单个表达式中处理的灵活性。

XML Schema 1.0 确实使用了 ISO 8601，正如 Jon Skeet 所建议的，Joda Time 实施了 ISO 8601，因此这是一个有效的选项。

如果您想将其全部保存在本机 Java 包中，还可以将[XMLGregorianCalendar](http://java.sun.com/j2se/1.5.0/docs/api/javax/xml/datatype/XMLGregorianCalendar.html)与[DatatypeFactory](http://java.sun.com/j2se/1.5.0/docs/api/javax/xml/datatype/DatatypeFactory.html)结合使用来解析和创建 XSD:Datetime 字符串。

请参阅 DatatypeFactory.newXMLGregorianCalendar 和 XMLGregorianCalendar.toXMLFormat

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-08-14T22:52:23.977

# tl;博士

```
Instant instant = Instant.parse( "2002-10-10T17:00:00Z" );
OffsetDateTime odt = OffsetDateTime.parse( "2002-10-10T12:00:00-05:00" ); 
```

# 细节

其他答案是正确的，但现在已过时。他们使用现在被 java.time 框架取代的麻烦的旧类。

没有“XML dateTime”之类的东西。[XML](https://en.wikipedia.org/wiki/XML)没有定义文本以外的任何数据类型。

# 使用 java.time

输入字符串恰好符合[ISO 8601](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)标准格式。因此无需指定格式化模式，因为 java.time 类在解析/生成字符串时默认使用 ISO 8601。

## `Instant`

第二个输入字符串以 a 结尾，是 的`Z`缩写`Zulu`，表示[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)。

该类代表[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)[`Instant`](http://docs.oracle.com/javase/8/docs/api/java/time/Instant.html)时间线上的一个时刻，分辨率为[nanoseconds](https://en.wikipedia.org/wiki/Nanosecond)。

```
String input = "2002-10-10T17:00:00Z":
Instant instant = Instant.parse( input ); 
```

## `OffsetDateTime`

第一个输入字符串包含一个与 UTC 的偏移量，因此我们将其解析为`OffsetDateTime`.

```
String input = "2002-10-10T12:00:00-05:00" ;
OffsetDateTime odt = OffsetDateTime.parse( input ); 
```

## `ZonedDateTime`

如果您有一个特定的时区，而不仅仅是与 UTC 的偏移，请应用它。

使用. 格式的[正确时区名称](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)`continent/region`。切勿使用不属于真正时区、不标准化、甚至不唯一（！）的 3-4 个字母缩写。

```
ZoneId zoneId = ZoneId.of( "America/Cancun" );
ZonedDateTime zdt = odt.atZone( zoneId ); 
```

[![在此处输入图像描述](https://i.stack.imgur.com/S0Mnt.png)](https://i.stack.imgur.com/S0Mnt.png)

# 关于 java.time

java.time框架内置于 Java 8 及更高版本中[。](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)这些类取代了旧的麻烦的日期时间类，例如`java.util.Date`, `.Calendar`, & `java.text.SimpleDateFormat`。

[现在处于维护模式](https://en.wikipedia.org/wiki/Maintenance_mode)的[Joda-Time](http://www.joda.org/joda-time/)项目建议迁移到 java.time。

要了解更多信息，请参阅[Oracle 教程](http://docs.oracle.com/javase/tutorial/datetime/TOC.html)。并在 Stack Overflow 上搜索许多示例和解释。

许多 java.time 功能在 ThreeTen-Backport 中向后移植到 Java 6 和 7，并在[ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP)中[进一步](http://www.threeten.org/threetenbp/)适应[Android](https://en.wikipedia.org/wiki/Android_(operating_system))。

ThreeTen [-Extra](http://www.threeten.org/threeten-extra/)项目通过附加类扩展了 java.time。该项目是未来可能添加到 java.time 的试验场。您可能会在这里找到一些有用的类，例如`Interval`、`YearWeek`、`YearQuarter`等。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-11T08:31:37.963

请参阅[Parse and format dateTime values](http://www.java2s.com/Code/Java/XML/ParseandformatxsdateTimevalues.htm)，尽管： - 它采用“GMT”作为默认时区 - 如果有尾随不可解析部分，它不会抱怨 - 不考虑 TimeZone 在错误的“GMT+”上默认为“GMT” xxx"

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-10-21T17:29:45.487

在 XML Beans v2 中会这样`XmlDateTime.Factory.parse(dateTimeString)`，但这很尴尬，因为它需要一个带有开始和结束标记的元素，例如`<mytime>2011-10-20T15:07:14.112-07:00</mytime>`

更简单的方法是调用`(new org.apache.xmlbeans.GDate(dateTimeString)).getDate()`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-03-29T17:26:26.120

[http://xmlbeans.apache.org/samples/DateTime.html](http://xmlbeans.apache.org/samples/DateTime.html)

有 XmlDateTime 类。只需执行 XMLDateTime.stringToDate(xmlDateTime)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-05-07T10:40:51.887

您还可以使用[newXMLGregorianCalendar](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/datatype/DatatypeFactory.html#newXMLGregorianCalendar%28java.lang.String%29) in `javax.xml.datatype.DatatypeFactory`，它可以让您进行详细控制，包括检测是否指定了时区。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-26T06:32:53.223

理想情况下，模式感知（或用作事物基础）的 XML 处理包应该为类型化内容提供访问器。我知道一个（[http://woodstox.codehaus.org/](http://woodstox.codehaus.org/)），但它（还）不提供对日期/时间的访问，只是提供更简单的类型（数字、数组、QNames 等）。有一个支持 javax.xml.datatype.XMLGregorianCalendar 的请求。

唉，没有多少人这样做。但是，如果您使用的是特定的包（如 XOM 或 JDOM 等），在他们的用户列表上问这个问题可能不是一个坏主意。

# c# - 在 C# 中将 DataTable 记录绑定或拉取到 MessageBox 文本

> ID：909024
> 
> 赞同：3
> 
> 时间：2009-05-26T05:12:46.830
> 
> 标签：c#, datatable, messagebox

我正在尝试使消息框文本提供数据表结果。以下是我到目前为止编写的代码片段：

字符串 mystring = comboBox1.Text; if (mystring.Substring(0, 12) == ("公司名称")) { textBox2.Text = mystring.Substring(13); ADOCon.ConnectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;数据源=C:\Users\Name\Desktop\SmallBizDb.mdb"; ADOCon.Open();

```
 OleDbCommandBuilder CBuilder = new OleDbCommandBuilder(DAdapter);
            DAdapter = new OleDbDataAdapter("Select Companies.Company_Name From Companies Where Companies.Company_Name = '" + textBox2.Text + "'", ADOCon);

            DAdapter.Fill(DTable);
            MessageBox.Show(DTable.ToString());
            ADOCon.Close();
            ADOCon.Dispose();
        }
        else 
```

基本上，例如，如果最终用户键入“公司名称-公司一”，我希望出现一个消息框，说明来自 sql 查询的数据表 (DTable) 信息。目前，我有“messagebox.Show(DTable.ToString());”，它不起作用。此外，我见过的所有其他示例都使用行索引，例如“.Rows [0]”，因为不涉及行号，所以我不能使用它，而是数据中的 sql“where”语句中的列名和记录名适配器。

这里有很多绒毛，所以我的主要问题是如何转换我的数据结果，以便它们显示在消息框中。

谢谢，

DFM

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-26T05:35:18.487

我不确定您想要什么，但是如果您想在数据表中显示值，您应该能够从中获取数据并以您想要的任何顺序显示它。我想你想做类似的事情

```
 System.Text.StringBuilder b = new System.Text.StringBuilder();
        foreach (System.Data.DataRow r in dt.Rows)
        {
            foreach (System.Data.DataColumn c in dt.Columns)
            {
                b.Append(c.ColumnName.ToString() + ":" + r[c.ColumnName].ToString());
            }
        }
        MessageBox.Show(b.ToString()); 
```

这将遍历所有返回的行，并为每一行（结果中的每个公司）添加数据表的 ColumnName:ActualValue 表单中的详细信息。

当然，我不确定在这样的消息框中显示未知数量的数据是个好主意，这只是您可以做到的一种方式。

# css - 影响嵌入页面样式的 Javascript 小部件

> ID：909025
> 
> 赞同：5
> 
> 时间：2009-05-26T05:13:05.940
> 
> 标签：css, widget

我目前正在开发一个可以嵌入页面的小部件。但是，在嵌入时，它会影响嵌入页面的样式（字体、文本、布局等）。

我想知道 Clearspring 和其他小部件框架如何封装它们的小部件，以免影响嵌入页面。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-26T05:19:01.190

制作您的小部件，例如在一个具有唯一 Id（或类，如果有多个）的 div 下，它最不可能与主机页面上的其他部件发生冲突。一个很好的例子可能是`#company-widjet-name`. 看看 jQuery UI 是如何做到的（`.ui-widget input`）。

然后您可能需要执行某种本地化重置，以避免父页面的 CSS 填满您的设计。修改诸如[Eric Meyer 的重置之](http://meyerweb.com/eric/thoughts/2007/05/01/reset-reloaded/)类的东西以适应。请避免，`#uniqueId * { padding: 0, margin: 0 }`因为它会导致头痛。

只要你做

```
#uniqueId a {
    property: value;
} 
```

特异性应该足够强以正确设置元素的样式，而不会让主机页面的 CSS 无意中更改它。

# eclipse - 我想轻松更改 Eclipse 文本编辑器的颜色！

> ID：909029
> 
> 赞同：4
> 
> 时间：2009-05-26T05:15:35.530
> 
> 标签：eclipse

Eclipse 是默认的，背景颜色是白色，但很多开发者使用深色（黑色）并认为是使用白色还是绿色的字母颜色。我几乎找不到颜色模板可以一击更改 Eclipse 的编辑器颜色的工具。你知道特色网站吗？

如果可以在像 MIFES 这样的开头选择深色，让我快乐

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-26T06:14:01.887

我不完全理解您的问题，但要更改 Eclipse 的编辑器背景颜色，只需转到菜单：*Window* > *Preferences*，然后在对话框中转到*General* > *Text Editors*。在该表单中，只需从*外观颜色选项*列表中选择*背景颜色*，然后使用右侧的颜色选择器进行更改。对于其他格式选项，请转到同一对话框中的*常规*>*​​ 颜色和字体*。

 ***注意：如果您创建一个新的，所有这些格式更改都会保存在您的工作区中，它将以默认设置开始

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-09-07T07:51:56.137

作为一个很晚的后续行动（刚刚通过搜索找到），现在有 Eclipse 颜色主题，一个您可以从市场上获取的插件。[它使您能够使用来自各个站点](http://www.eclipsecolorthemes.org/)的颜色主题并直接加载它们。

他们甚至得到了一些相对接近的 Netbeans 相似物（这就是我寻找一个的原因）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T06:14:58.017

如果您的意思是“主题”，因为 Netbeans 有“深色粉彩”主题 - 那么 Eclipse 当前没有此功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-23T02:36:41.333

在较新版本的 eclipse 中，我们有一个选项**Switch to Theme...**

[![在此处输入图像描述](https://i.stack.imgur.com/Xia6E.png)](https://i.stack.imgur.com/Xia6E.png)

这应该可以解决问题。

# c++ - 关于从引用到字符串的转换

> ID：909035
> 
> 赞同：1
> 
> 时间：2009-05-26T05:16:46.123
> 
> 标签：c++, symbian

我正在做 RSA 加密

我想将公钥类的引用转换为字符串，以便我可以传递给服务器

```
//declaration

const CRSAPrivateKey &iRSAPrivateKey =iRSAKeyPair->PrivateKey();

const CRSAPublicKey &iRSAPublicKey =iRSAKeyPair->PublicKey() ; 
```

我已经转换`&iRSAPublicKey`成`TBuf`

我尝试了很多但未能转换

请帮我摆脱困境

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T15:20:35.217

[如果您使用 CRSAPublicKey，您可能从http://developer.symbian.com/main/tools_and_sdks/developer_tools/supported/crypto_api/index.jsp](http://developer.symbian.com/main/tools_and_sdks/developer_tools/supported/crypto_api/index.jsp)下载了 Symbian 密码库及其文档

诚然，文档并不明确，但我敢冒昧地说，您可以将模数和指数组件发送到任何其他 RSA 引擎以重构公钥：

```
HBufC8* localModulusBuffer = iRSAPublicKey.N().BufferLC();

HBufC8* localExponentBuffer = iRSAPublicKey.E().BufferLC(); 
```

然后，如果您真的需要，只需将 2 HBufC8 复制到 TBuf 中。

请记住，带有尾随“C”的方法会将它们返回的内容留在清理堆栈中。

# iphone - 来自 URL 编码问题的 NSArray

> ID：909038
> 
> 赞同：1
> 
> 时间：2009-05-26T05:18:40.130
> 
> 标签：iphone, cocoa, character-encoding

所以我有以下代码：

```
NSURL *baseURL = [NSURL URLWithString:@"http://www.baseurltoanxmlpage.com"];
NSURL *url = [NSURL URLWithString: @"page.php" relativeToURL:baseURL];
NSArray *array = [NSArray arrayWithContentsOfURL:url]; 
```

如果XML页面如下：

```
<array><dict><key>City</key><string>Montreal</string></dict></array> 
```

数组返回正常。但是，如果 XML 文件如下：

```
<array><dict><key>City</key><string>Montréal</string></dict></array> 
```

数组返回 null。我想这与特殊的字符“é”有关。我将如何处理这些角色？XML 页面是使用 PHP 生成的。utf8_encode() 函数使数组返回，但我不知道如何处理编码的“é”字符。

**这是工作解决方案：**

```
NSString *stringArray = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil];
NSArray *array = [stringArray propertyList];

NSLog(stringArray);
NSLog(@"%@", array);
NSLog([[[array objectAtIndex:0] valueForKey:@"City"] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]); 
```

第一个日志打印出“é”罚款。在第二个日志中，它被编码并打印为“\U00e9”。在第三个日志中，它被解码并打印为“é”（这是我正在寻找的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T05:30:28.023

如您所述，您需要返回一个 UTF8 或 UTF16 编码的 XML 文档。然后`NSString`使用该方法制作对象[`stringByReplacingPercentEscapesUsingEncoding:`](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-BCIECHFE)，使用相关编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T05:52:06.907

NSString 有一个[方法可以在 encoding 中返回数据，](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/clm/NSString/stringWithContentsOfURL:encoding:error:)从 URL 读取数据：

+(id)stringWithContentsOfURL:encoding:error:

在[字符串编码](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/c_ref/NSStringEncoding)部分查看可能的编码以找到合适的编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T16:29:47.417

查看 的`NSString`文档[`:propertyList`](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-propertyList)，我们看到：

*   `Parses the receiver as a text representation of a property list, returning an NSString, NSData, NSArray, or NSDictionary object, according to the topmost element.`

[属性列表](http://developer.apple.com/documentation/Cocoa/Conceptual/PropertyLists/AboutPropertyLists/AboutPropertyLists.html#//apple_ref/doc/uid/10000048i-CH3-SW2)是Apple 特定的文档，它以 XML 格式存储 、 、 和其他核心类型的`NSString`表示`NSDictionary`。`NSArray`这些`.plist`文件通常用于存储首选项或应用程序设置。

默认情况下，此 XML 格式的属性列表文档以[UTF-8](http://en.wikipedia.org/wiki/UTF-8)编码。当您将您的`NSString`变成属性列表元素时，对`"é"`字符进行编码会将其替换为[UTF-8 Unicode 字符`"\U00e9"`](http://www.java-tips.org/java-se-tips/java.io/output-french-characters-to-the-console.html)。

# c - 文件大小 c 与大小数据字符串的大小不同

> ID：909043
> 
> 赞同：1
> 
> 时间：2009-05-26T05:22:19.690
> 
> 标签：c, windows, file

我有一个要写入的文件，然后将其大小更改为写入其中的文本大小，例如：

```
FILE * file... 
```

我从文件中获取所有数据并将文件的大小更改为数据的大小，但它有所不同。字符串的大小小于文件长度，它会剪切它并丢失数据。可能是什么问题？

```
while(fgets(cLine, sizeof(cLine), file) )
    str.append((string)cLine);
fputs(str.c_str(),file);
_chsize( fileno(file), (int)str.size() ); 
```

当我检查它总是`fileLength(fileno(file))`大于`str.size()`！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-26T05:25:51.743

也许是 CRLF？提防：

`fopen(filename, "r")`与`fopen(filename, "rb")`,

同样

`fopen(filename, "w")`与`fopen(filename, "wb")`。

原因是因为`"r"`or`"w"`将翻译 CRLF，而`"rb"`or`"wb"`会将数据视为二进制。在大多数平台上，这被忽略了。例如，[OS X 上的 fopen 手册页](http://developer.apple.com/documentation/Darwin/Reference/Manpages/man3/freopen.3.html)：

> 模式字符串还可以包括字母“b”作为第三个字符或作为上述任何两个字符串中的字符之间的字符。这完全是为了与 ISO/IEC 9899:1990（“ISO C90”）兼容，没有任何效果；“b”被忽略。

MSDN 上的[fopen 页面有](http://msdn.microsoft.com/en-us/library/yeby3zcb.aspx)不同的说法：

> **b**
> 
> 以二进制（未翻译）模式打开；涉及回车和换行字符的翻译被禁止。
> 
> 如果在 mode 中没有给出**t**或**b**，则默认翻译模式由全局变量[_fmode](http://msdn.microsoft.com/en-us/library/ee2849wt.aspx)定义。如果**t**或**b** 以参数为前缀，则函数失败并返回**NULL**。
> 
> 有关在 Unicode 和多字节流 I/O 中使用文本和二进制模式的更多信息，请参阅[文本和二进制模式文件 I/O](http://msdn.microsoft.com/en-us/library/ktss1a9b.aspx)和[文本和二进制模式中的 Unicode 流 I/O](http://msdn.microsoft.com/en-us/library/c4cy2b8e.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T05:50:20.593

根据您在 cr/lf 的代码中执行的操作以及您正在运行的操作系统，如果您以文本模式打开文件，则在读取/写入文件时可能会在后台发生一些翻译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-26T06:52:45.927

乔纳森一针见血。

确保您正在以二进制格式读取文件，或者如果您确定该文件仅包含文本（这就是您想要的全部）然后准备文件字符为 unicode 或其他格式。

您还会发现会自动添加额外的控制字符，尤其是 EOF 字符。

我的问题是为什么你从文件中读取数据，只是为了再次将其写回？

# c - Windows 中的生成文件

> ID：909046
> 
> 赞同：4
> 
> 时间：2009-05-26T05:24:22.620
> 
> 标签：c, windows, makefile

我有一个名为`'X'`. 在`X`我有两个子文件夹：`src`和`include`.

该`src`文件夹包含一个 C 文件`main.c`，该`include`文件夹包含一个文件`main.h`。

我想`X`在 Windows 命令提示符下编写一个生成文件来构建这些文件（从文件夹）。我尝试了很多但没有效果。首先，我需要 Linux 中的 make 文件格式，一旦有了，我将在 Windows 中这样做。

有人可以帮我这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-26T05:35:27.410

试试下面的链接，在那里你会找到格式，基本上所有你需要构建你的 Makefile：

[http://mrbook.org/blog/tutorials/make/](http://mrbook.org/blog/tutorials/make/)

[http://www.opussoftware.com/tutorial/TutMakefile.htm](http://www.opussoftware.com/tutorial/TutMakefile.htm)

[http://oucsace.cs.ohiou.edu/~bhumphre/makefile.html](http://oucsace.cs.ohiou.edu/~bhumphre/makefile.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-26T07:53:43.963

制作 Makefile 后，您可以使用 MinGW 的 mingw32-make - GNU make 的 Windows 本机构建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-01T05:05:28.973

1.  在文件资源管理器中打开文件夹 ( `X`)。

2.  右键单击任意位置 > 新建 > 文本文档。

3.  右键单击文件>重命名>删除`.txt`扩展名。

4.  使用您喜欢的文本编辑器打开 makefile。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-13T00:19:52.900

您可以使用[NMake](https://docs.microsoft.com/en-us/cpp/build/reference/nmake-reference)，这是 Linux 制作的 Windows 替代品。它是 Visual Studio 附带的命令行工具。

尽管语法非常相似，但您会发现一些差异。所以在 Linux 上运行的 makefile 可能无法直接与 windows 中的 NMake 一起运行。

在 Linux 中，这些行例如：

```
gcc -c main.cpp -o main.o
gcc -o app main.o -lstdc++ 
```

在 Windows 中，可能应该更改为：

```
cl.exe /c main.cpp /Fomain.o
link.exe /OUT:app.EXE main.o 
```

因此，makefile 需要版本才能在 Windows 中使用 NMAKE。

要“按原样”使用 makefile，您应该尝试使用在 Windows 中模拟 Linux 命令的工具，例如[Cygwin](https://www.cygwin.com/)。

# sql - SQL 按平均值过滤

> ID：909059
> 
> 赞同：0
> 
> 时间：2009-05-26T05:34:55.320
> 
> 标签：sql

我有两个表产品和评论
每个产品都有几个评论通过评论表中的外键 product_id 链接
另外每个评论都有一个名为 rating 的十进制值
我希望获得平均评分高于 a 的所有产品的名称某些阈
值

```
SELECT p.name
FROM products p
INNER JOIN reviews r ON p.id = r.product_id
WHERE avg(r.rating) > 3 
```

MySQL 不允许我在 where 子句中使用 avg 函数。
我该怎么做这样的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-26T05:36:36.783

使用“拥有”

```
SELECT p.name, avg(r.rating) as average
FROM products p
INNER JOIN reviews r ON p.id = r.product_id
GROUP BY p.name
HAVING avg(r.rating) > 3 
```

# python - 如何使用 awk、Perl 或 Python 挖掘 XML 文档？

> ID：909062
> 
> 赞同：3
> 
> 时间：2009-05-26T05:35:57.970
> 
> 标签：python, xml, perl, awk

我有一个具有以下数据格式的 XML 文件：

```
<net NetName="abc" attr1="123" attr2="234" attr3="345".../>
<net NetName="cde" attr1="456" attr2="567" attr3="678".../>
.... 
```

谁能告诉我如何使用 awk one-liner 对 XML 文件进行数据挖掘？比如我想知道abc的attr3。它将返回 345 给我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-26T05:47:28.993

一般来说，[你不会](https://stackoverflow.com/questions/701166/can-you-provide-some-examples-of-why-it-is-hard-to-parse-xml-and-html-with-a-rege)。如果不尝试简洁地进行 XML/HTML 解析就已经够难了，虽然您可能能够拼凑出一个使用有限的 XML 子集成功的解决方案，但最终它会失败。

此外，[已经编写了许多具有出色 XML 解析器的出色语言](https://stackoverflow.com/questions/773340/can-you-provide-an-example-of-parsing-html-with-your-favorite-parser)，那么为什么不使用其中一种来让您的生活更轻松呢？

我不知道是否有为 awk 构建的 XML 解析器，但我担心如果你想用 awk 解析 XML，你会得到很多“锤子是用来钉子的，螺丝刀是用来螺丝钉的”答案。我确信它可以完成，但是用 Perl 快速编写一些使用 XML::Simple（我个人最喜欢的）或其他一些 XML 解析模块的东西可能会更容易。

为了完整起见，我想指出，如果您的代码段是整个文件的示例，则它不是有效的 XML。有效的 XML 应该具有开始和结束标记，如下所示：

```
<netlist>
  <net NetName="abc" attr1="123" attr2="234" attr3="345".../>
  <net NetName="cde" attr1="456" attr2="567" attr3="678".../>
  ....
</netlist> 
```

我确信无效的 XML 有它的用途，但是一些 XML 解析器可能会抱怨它，所以除非你死心塌地地使用 awk 单线器来尝试半屁股“解析”你的“XML”，否则你可能想要考虑使您的 XML 有效。

作为对您的编辑的回应，我仍然不会将其作为单行符，但这是您可以使用的 Perl 脚本：

```
#!/usr/bin/perl

use strict;
use warnings;
use XML::Simple;

sub usage {
  die "Usage: $0 [NetName] ([attr])\n";
}

my $file = XMLin("file.xml", KeyAttr => { net => 'NetName' });

usage() if @ARGV == 0;

exists $file->{net}{$ARGV[0]}
  or die "$ARGV[0] does not exist.\n";

if(@ARGV == 2) {
  exists $file->{net}{$ARGV[0]}{$ARGV[1]}
    or die "NetName $ARGV[0] does not have attribute $ARGV[1].\n";
  print "$file->{net}{$ARGV[0]}{$ARGV[1]}.\n";

} elsif(@ARGV == 1) {
  print "$ARGV[0]:\n";
  print "  $_ = $file->{net}{$ARGV[0]}{$_}\n"
    for keys %{ $file->{net}{$ARGV[0]} };

} else {
  usage();
} 
```

使用 1 或 2 个参数从命令行运行此脚本。第一个参数是`'NetName'`你要查找的，第二个是你要查找的属性。如果没有给出属性，它应该只列出该的所有属性`'NetName'`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-26T07:23:43.103

我编写了一个`xml_grep2`基于[XML::LibXML的工具，它是](http://search.cpan.org/dist/XML-LibXML)[libxml2](http://xmlsoft.org)的 perl 接口。

你会通过这样做找到你正在寻找的价值：

```
xml_grep2 -t '//net[@NetName="abc"]/@attr3' to_grep.xml 
```

该工具可以在[http://xmltwig.com/tool/找到](http://xmltwig.com/tool/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-26T12:53:00.973

xmlgawk 可以非常轻松地使用 XML。

```
$ xgawk -lxml 'XMLATTR["NetName"]=="abc"{print XMLATTR["attr3"]}' test.xml 
```

这一个班轮可以解析 XML 并打印“345”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-26T13:16:07.277

如果你没有 xmlgawk 并且你的 XML 格式是固定的，那么普通的 awk 就可以了。

```
$ nawk -F '[ ="]+' '/abc/{for(i=1;i<=NF;i++){if($i=="attr3"){print $(i+1)}}}' test.xml 
```

该脚本可以返回“345”。但我认为这是非常危险的，因为普通的 awk 不能使用 XML。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-29T19:33:42.230

你可以试试这个漂亮的小脚本：[http ://awk.info/?doc/tools/xmlparse.html](http://awk.info/?doc/tools/xmlparse.html)

# unix - 在不同进程之间传递文件描述符的可移植方式

> ID：909064
> 
> 赞同：26
> 
> 时间：2009-05-26T05:36:50.573
> 
> 标签：unix, fork, share, file-descriptor

在大多数 UNIX 系统上，通过 fork() 可以轻松地为子/父进程在进程之间传递打开的文件；但是我需要在孩子已经分叉之后分享一个 fd。

我发现一些[网页](http://www.regatta.cs.msu.su/doc/usr/share/man/info/ru_RU/a_doc_lib/aixprggd/progcomc/skt_comms.htm)告诉我 sendmsg() 可能适用于任意进程；但这似乎非常依赖于操作系统并且很复杂。[portlisten](http://lists.canonical.org/pipermail/kragen-hacks/2002-January/000292.html)似乎是我能找到的最好的例子，但我更喜欢像 libevent 这样的好的包装库，它隐藏了 kqueue、pool 等的所有魔力。

有谁知道是否有一些图书馆（和便携式方式）可以做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-26T06:13:30.843

最好的办法是尝试通过 Unix 域套接字发送文件描述符。这在 Stephens 和网络上的一些地方都有描述，但如果你问得好，我可以为你挖掘代码。

如今，这将非常便携；很多被认为是“不可移植”的东西（例如`mmap`！）现在非常普遍。如果您需要比“当今大多数系统”更便携，那么您将面临很多有趣的问题，但如果您告诉我们更多关于您正在做什么以及您正在使用的平台的信息（也许是非 Unix POSIX 平台？）我们也许可以提供帮助。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-05-26T06:20:22.593

有一个基于 Unix 域套接字的机制，用于在进程之间传输文件描述符（例如套接字 - 当然不能进行内存映射） - 使用`sendmsg()`系统调用。

您可以在[Stevens](https://rads.stackoverflow.com/amzn/click/com/0131411551)（如 Curt Sampson 提到的）以及[Wikipedia](http://en.wikipedia.org/wiki/File_descriptor)中找到更多信息。

[您可以在Sending file descriptor by Linux socket](https://stackoverflow.com/questions/28003921/sending-file-descriptor-by-linux-socket/)找到一个关于工作代码的更新的问题。

# opengl-es - OpenGL ES 中 glNormal3f 的用途是什么？

> ID：909066
> 
> 赞同：7
> 
> 时间：2009-05-26T05:38:57.450
> 
> 标签：opengl-es

OpenGL ES 中 glNormal3f 的用途是什么？如果 OpenGL ES 中没有可用的即时模式，我会使用 glNormal3f 做什么？示例代码会很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-26T06:36:23.260

我认为有一个 glColor 函数是出于同样的原因。如果所有顶点的整个几何图形的法线都相同，则可以在调用 glDrawArrays/glDrawElements 之前使用 glNormal 指定它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T07:00:47.800

我能想到的唯一原因是它可以支持有效地表达许多顶点共享相同法线的表面。使用基于数组的方法，您必须为每个顶点创建一个具有相同值的数组，这会浪费内存。

我觉得很好奇[手册页](http://www.khronos.org/opengles/sdk/1.1/docs/man/)（OpenGL ES 1.1，那里）甚至没有提到它。我发现了一个甚至声称已经不存在的[iPhone 编程教程(PDF)。](http://deimos3.apple.com/WebObjects/Core.woa/FeedEnclosure/utah.edu.1668842900.01668842919.1705385205/enclosure.pdf)`glNormal()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T07:17:55.457

OpenGL ES 1.1 确实提到了它，但是是的，这是 iPhone 编程教程中的一个错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-26T07:17:56.970

您不应该再使用这些功能。坚持使用 glXXXXArray()。我怀疑它们只是留在那里以使 OpenGL 到 OpenGL ES 的传输更容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-04T16:00:12.347

在**OpenGL|ES 中 glNormal3f()**不是一个不推荐使用的函数，
因为它对于在 {X,Y} 平面中渲染**平面 2D 形状很有用：**

而不是使用：

```
glEnableClientState( GL_NORMAL_ARRAY );
glNormalPointer( GL_FLOAT, 0, vbuf + normal_offset ); 
```

它更简单，并且需要更少的 VBO 内存来调用：

```
glNormal3f( 0, 0, 1 ); 
```

# visual-c++ - 如何在 vc++ 中显示列表项？

> ID：909073
> 
> 赞同：1
> 
> 时间：2009-05-26T05:45:10.323
> 
> 标签：visual-c++, c++-cli

如何在 c++cli 中的控制台窗口上填充列表（字符串）项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-26T06:00:17.373

您是在以下之后还是您想知道如何从控制台输入读取并存储在字符串中（然后存储在我假设的列表中），这是第一种情况，如何将字符串存储在列表中（并输出列表）：

```
#include <iostream>
#include <string>
#include <list>

using std::string;
using std::list;
using std::cout;
using std::endl;

list<string> strlist;

strlist.push_back(string("string one"));
strlist.push_back(string("string two"));
strlist.push_back(string("and so on"));

for (list<string>::iterator it = strlist.begin(); it != strlist.end(); ++it)
{
    std::cout << (*it) << std::endl;
} 
```

注意：列表包含字符串的副本，这意味着当您将字符串分配给列表以及从列表中返回它们时，您最终会复制字符串。为避免这种情况，您可以为字符串分配内存并仅在列表中保留指针：

```
list<string*> ls;
ls.push_back(new string("string one")); 
```

等等。

这也很有效，上面更详细地了解如何访问列表元素，在复制算法中，这一切都发生在幕后：

```
copy( strlist.begin(), strlist.end(), ostream_iterator<string>( cout, ", " ) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T06:12:10.330

您可以使用**std::copy** in**和**std::ostream_iterator**在**将元素复制到输出中，如下所示：****

 ****```
#include <iostream>
#include <string>
#include <list>
#include <algorithm>

int main( int, char*[] )
{
    using namespace std;

    list<string>    mylist;

    mylist.push_back( "String1" );
    mylist.push_back( "String2" );
    mylist.push_back( "String3" );

    copy( mylist.begin(), mylist.end(), ostream_iterator<string>( cout, ", " ) );
} 
```

# javascript - 使用 WMODE="window" 时使用 JS 捕获 Flash 插件上的右键单击事件

> ID：909077
> 
> 赞同：3
> 
> 时间：2009-05-26T05:48:19.270
> 
> 标签：javascript, apache-flex, browser, flash

我正在为 Flash 应用程序使用自定义右键单击上下文菜单（覆盖默认的 adobe 菜单）。对于这个 Uza 的右键单击解决方案 ( [http://www.uza.lt/blog/2007/08/solved-right-click-in-as3](http://www.uza.lt/blog/2007/08/solved-right-click-in-as3) ) 效果很好。

但是，flash 播放器插件（用于 Firefox/Chrome 等）有一个错误，当它使用 WMode 进行 html 嵌入时会破坏​​国际字符的使用。WMode="widnow" 有效。

[http://bugs.adobe.com/jira/browse/FP-501](http://bugs.adobe.com/jira/browse/FP-501)

这个问题可以在这里更好地看到 -

[http://www.5etdemi.com/blog/archives/2005/06/firefox-wmodetransparent-is-completely-screwy-and-breaks-textfields/](http://www.5etdemi.com/blog/archives/2005/06/firefox-wmodetransparent-is-completely-screwy-and-breaks-textfields/)

**问题**

我需要捕获从 Flash 播放器插件触发的右键单击事件到 Web 浏览器容器，而不在 html 嵌入标签上使用 WMode（即 WMode="window"）

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-04-18T11:25:13.227

右键单击 JS hack 在不透明和透明模式下工作，因为浏览器在其自己的显示树中呈现 Flash。在这种模式下，浏览器接收鼠标事件，让它们由 JS 处理，然后将它们传递给 Flash 插件。（这就是为什么在透明模式下输入重音或非拉丁字符存在错误的原因，因为某些浏览器无法正确传递它们）。

在其他窗口模式中，Flash 对象不是 html DOM 的一部分。相反，它只是被赋予了一个显示的矩形，并且可以直接绘制到它。它还直接从操作系统获取键盘和鼠标事件，所以我不希望任何 JS 上下文菜单黑客可以在任何主流浏览器中工作。

# c++ - Matlab 与 Visual C++？

> ID：909078
> 
> 赞同：3
> 
> 时间：2009-05-26T05:48:39.113
> 
> 标签：c++, visual-studio-2008, matlab, programming-languages

我正在做一个使用大量图表的 Windows 应用程序。它实际上是一个数据查看器。我开始做 Matlab，因为它更容易，但我意识到它太慢了。我想换一种语言。有人向我推荐了 Visual C++ 或 Java。但我不确定。我应该使用什么语言？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-26T07:22:04.713

在我看来，使用另一种“更快”的语言所获得的速度提升不如改进你的算法那么多。

MATLAB 的“问题”是它允许您做一些讨厌的事情，例如在紧密循环中调整矩阵的大小。您真的应该尝试使用以下命令查明瓶颈：

```
 profile on
  ... run your program
  profile off
  profile report 
```

这将为您提供有关哪个函数需要多长时间执行以及哪一行造成最大瓶颈的很好的信息。您还可以查看函数被调用的次数以及包含的 M-Lint 代码检查报告。

这些测量和提示可以向您显示算法的瓶颈。如果您确定没有办法使用更智能的算法来减少函数的调用次数/速度。比如我真的需要一个智能向量足够大的大二维矩阵，或者如果我找到了一个工件，我为什么还要继续搜索工件。您可以在 c/c++ 中编写遇到最多性能问题的函数，并将其用作 matlab 中的函数。您可以通过正确选择在 c/c++ 中实现的函数来获得很大的加速。从 MATLAB 调用 ac/c++ 函数有一定的开销，或者更准确地说，在 c/c++ 中从 MATLAB 获取数据有一定的开销，因此调用 10000 次的函数在 c 中不是最好的实现/c++，你

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-26T13:50:47.037

首先，正如其他答案所提到的，您需要分析您的代码以找出瓶颈所在。我会在 The MathWorks 上查看[Doug Hull 的博客](http://blogs.mathworks.com/videos/)，特别[是有关使用分析器的这篇文章](http://blogs.mathworks.com/videos/2009/04/17/speeding-up-dougs-solution-with-the-profiler/)。这将帮助您找出所有工作在您的代码中完成的位置。

如果减速的根源与数据处理有关，则可能有多种方法可以加快速度（矢量化、编写 mex 文件等）。

如果减速的根源是您的 GUI，这可能更容易解决。有许多来自 Doug 和[其他 MathWorkers](http://blogs.mathworks.com/)的博客文章，我已经看到这些文章涉及 GUI 设计。也有一些关于 SO 处理的问题（[这里是一个](https://stackoverflow.com/questions/272511/how-to-create-a-gui-inside-a-function-in-matlab)）。如果您正在处理显示非常大的数据集，[Jiro Doke](http://www.mathworks.com/matlabcentral/fileexchange/15850)在 The MathWorks File Exchange 上提交的这篇文章可能有助于加快速度。

很难给你更具体的建议，因为我不知道你是如何设计你的 GUI 的，但如果这成为显示数据的瓶颈，那么在你完成之前*有*很多资源可以用来提高它的速度切换到另一种语言的麻烦。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-26T05:55:45.637

这取决于你的要求是什么。

使用matlab的优势在于数值计算能力强。如果不需要，那么使用 matlab 没有任何优势。在这种情况下，所有这些语言都可以，还有许多其他语言（Python、C#、...）也是如此。这取决于您最熟悉哪种**语言**。

如果您**确实**想要 matlab 的优势，那么：

1.  尝试在matlab中进行优化。大多数优化技术与语言无关。
2.  有一些工具可以自动将 matlab 转换为 C。然后，您可以尝试在所有优化的情况下进行编译。然而，我严重怀疑这会有多大帮助，尤其是考虑到 GUI 部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-26T07:37:14.480

不要忘记您可以在 C++ 中创建可以从 Matlab 调用的函数。和 TADA，您可以访问这两种环境！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-26T06:16:24.427

据我所知，最常见的方法是先在 Matlab 上做概念证明或只是主要算法，因为它易于使用和数学计算方便，然后将其转化为“真正的”编程语言以提高性能。通常 C 或 C++ 充当“真正的”语言，但在你的情况下，目标是做一个 Windows 应用程序，也许 C# 将是最好的选择。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-09T08:09:24.917

I suggest you using Java and the JFreeChart ([http://www.jfree.org/jfreechart/](http://www.jfree.org/jfreechart/)) library. I found very easy (and fast) developing applications with a lot of charts of different typologies. If you don't need particularly fast performances, you can use Java. I suppose that there are similar libraries for C#, but I'm not sure.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-26T08:26:09.607

我发现如果您的应用程序变得更复杂，MATLAB 中的 GUI 编程会变得非常糟糕。BTW MATLAB 也可以很容易地从 Java 调用（反之亦然，当前版本基本上提供了交互式 Java 控制台）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-26T08:30:54.140

顺便说一句，如果您仍然需要 Matlab 的数学能力，您可能需要查看[Scilab](http://www.scilab.org)。它是开源和免费的，并且它有如何与其他 C# 或 C++ 集成的示例。我创建了 Scilab 在后台运行的项目以执行所有数据数学运算；并使用 C# 的[ZedGraph](http://zedgraph.org/wiki/index.php?title=Main_Page)库显示它们。像魔术一样工作！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-26T05:53:36.640

我会使用 C#。它比 C++ 更容易，并且与 Windows 平台很好地集成。只需为它找到一个免费的图形库，你就可以开始了。

根据您的语言偏好，还有很多其他选项。例如。Qt 与 Python 或 C++。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-27T08:40:11.173

*   Matlab 和 Scilab 的替代品是另一个免费软件：Octave。我不了解 Scilab，但 Octave 语法与 matlab 几乎相同，因此您可以轻松导入代码。

如果你需要花哨的工具箱，Scilab 和 Octave 可能会让你失望，所以检查一下。

您可以在 C++ 程序中执行 Octave 函数： [http ://en.wikipedia.org/wiki/GNU_Octave](http://en.wikipedia.org/wiki/GNU_Octave)

*   我不认为你可以从你的 C++ 程序中调用你自己的 m-files 函数。过去，Matlab 编译器允许用户在不安装 Matlab 的情况下运行 matlab 程序，但在不安装一个巨大的库（如果我没记错的话是 250 MB）的情况下也是如此。没关系，如果您的 Matlab 程序占用 20 kB，您必须分发庞大的库。请有人编辑/评论今天的情况！

自从我使用 Matlab 的 GUI“功能”以来已经有一段时间了，但那时（2005 年）我发现它很糟糕。丑陋，难用，非常难维护，依赖于windows参数的用户设置。请也对此发表评论或编辑，他们可能已经取得了进展！

如果他们没有，我相信 Matlab 不是您想要交付给任何人的程序的方法。

如果你可以使用 Visual Studio 来做你的 GUI，那就去做吧。我赞同之前的观点：随心所欲。如果您需要 Matlab 函数，请选择您喜欢的支持 Matlab 库的函数。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-26T07:11:26.530

首先，Visual C++ 不是一种语言，它是一种用于开发应用程序的 IDE。

第二……你懂哪些语言？您可以有多种选择。看看：

*   C++ + Qt（我的首选，功能强大且易于理解）
*   C# + .NET 或 WPF
*   爪哇

如果您能提供更多信息，我们可以找到符合您需求的语言。

# javascript - 附加到 JSON 表示法？

> ID：909084
> 
> 赞同：2
> 
> 时间：2009-05-26T05:51:22.370
> 
> 标签：javascript, json

我有以下 JSON 对象：

```
new Ajax.Request(url, {
   method: 'post',
   contentType: "application/x-www-form-urlencoded",
   parameters: {
          "javax.faces.ViewState": encodedViewState,
          "client-id": options._clientId,
          "component-value": options._componentValue
   }
}); 
```

现在，我希望能够以编程方式附加到“参数”对象，但我不确定我将如何实际执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-26T05:55:09.537

你可以简单地分配给它。但您可能希望在创建请求之前执行此操作。

```
var parameters = {
      "javax.faces.ViewState": encodedViewState,
      "client-id": options._clientId,
      "component-value": options._componentValue
}
parameters.foo = 'bar';

var myAjax = new Ajax.Request(url, {
    method: 'post',
    contentType: "application/x-www-form-urlencoded",
    parameters: parameters
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-26T05:59:47.923

假设 JSON 对象在 Ajax.Request Javascript 函数中被命名为 obj。您现在可以像这样添加到参数对象：

```
obj['parameters']['someproperty'] = 'somevalue'; 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-26T05:57:56.320

*调用new*后不能附加到它，因为 Prototype 在创建时会自动发送并开始处理 Ajax 请求，如果需要更改参数对象，请执行以下操作：

```
var params = {
      "javax.faces.ViewState": encodedViewState,
      "client-id": options._clientId,
      "component-value": options._componentValue
      // Either add your additional properties here as:
      // propertyName : propertyValue
};
// Or add your properties here as:
// params.propertyName = propertyValue;
new Ajax.Request(url, {

method: 'post',

contentType: "application/x-www-form-urlencoded",

parameters: params
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-03-24T17:37:22.817

这是我用来附加到 JSON 对象的现有`data`属性的解决方案，但我需要它足够通用以处理不同的键值对。这是我根据这篇似乎对我有用的帖子创建的内容。

```
doAction : function(mData){
    this.data = mData;
    this.appendData = function(mDataToAppend){
        var jsonStrAr = JSON.stringify(mDataToAppend).replace('{','').replace('}','').split('","');
        for(var v = 0; v < jsonStrAr.length; v++){
            var m = jsonStrAr[v].split(':');
            this.data[m[0].replace(/"/g,'')] = m[1].replace(/"/g,'');
        }
    }
} 
```

结果是具有*n*到多个属性的单个 JSON 对象，然后可以通过`JSON.stringify()`ajax 请求中的命令将其发送到服务器。仍然对 JSON 感到舒服/思考，所以可能有更好的方法来做到这一点 - 在这种情况下，我全神贯注。

# silverlight-3.0 - 如何在 silverlight3.0 中播放 Youtube 视频

> ID：909087
> 
> 赞同：2
> 
> 时间：2009-05-26T05:53:08.607
> 
> 标签：silverlight-3.0

我正在开发一个 silverlight 应用程序，我想在其中播放 youtube 视频。任何建议请。任何示例或任何链接供参考。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-26T06:12:59.987

这是一个关于这个问题的有趣线程，在 SL 3.0 beta 中有一些示例：

[http://silverlight.net/forums/t/53008.aspx](http://silverlight.net/forums/t/53008.aspx)

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-07T18:39:19.503

[http://slyi.silverlight.googlepages.com/youtube2.html](http://slyi.silverlight.googlepages.com/youtube2.html)

正在工作。现在使用的链接是错误的，但如果你改变它，这个例子仍然有效！

# gridview - 更改列的顺序

> ID：909091
> 
> 赞同：1
> 
> 时间：2009-05-26T05:54:10.507
> 
> 标签：gridview, auto-generate, autogeneratecolumn

我正在使用网格视图。我有 4 个自动生成的列和 1 个由我自己生成的列。现在首先显示我生成的列，然后显示自动生成的列。我想先显示自动生成的列，然后再显示我生成的列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-26T06:10:33.953

为此，您需要知道数据字段（要绑定的**数据**项）并使用模板或 boundcolumns 来完成此操作，例如：

自动生成柱状网格

```
<asp:GridView id="gv" runat="server" AutoGenerateColumns="True">
</asp:GridView> 
```

手动生成柱网

```
<asp:GridView ID="gv" runat="server" AutoGenerateColumns="false">
    <Columns>
        <asp:BoundField HeaderText="My First Column" DataField="myField1" />
        <asp:BoundField HeaderText="My Second Column" DataField="myField2" />
        <asp:BoundField HeaderText="My Third Column" DataField="myField3" />

        <asp:TemplateField HeaderText="My Fourth Column">
            <ItemTemplate>
                <asp:Label ID="lbl" runat="server" Text='<%# Eval("myField4") %>' />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

您可以使用**BoundField**或**TemplateField**，使用模板您可以做更多事情，创建下拉菜单而不是标签等......在**BoundField 输出将始终是标签**，您只能使用格式化字符串值.NET 命名法，如**{0:d}**

您可以使用更多预定义的模板，例如复选框、按钮、超链接、命令和图像。

# python - 为什么 Python 3 中不再提供编译器包？

> ID：909092
> 
> 赞同：43
> 
> 时间：2009-05-26T05:54:30.677
> 
> 标签：python, compiler-construction, python-3.x

我只是惊喜地发现[Python 的编译器包](http://docs.python.org/library/compiler)的文档，但注意到它在 Python 3.0 中消失了，没有任何明确的替换或解释。

我似乎在 python-dev 上找不到任何关于如何做出这个决定的讨论 - 有没有人对这个决定有任何见解？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-05-26T06:24:50.990

我相信该功能现在已内置：

*   [编译](http://docs.python.org/3/library/functions.html#compile)
*   [ast](http://docs.python.org/3.3/library/ast.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-01T15:06:30.790

提供决策线索的具体参考：

*   [https://mail.python.org/pipermail/python-3000/2007-May/007577.html](https://mail.python.org/pipermail/python-3000/2007-May/007577.html)
*   [政治人物 3108](https://www.python.org/dev/peps/pep-3108/)

而且，为了它的价值，我启动了编译器包的 Python3 端口，在 stdlib 之外进行维护：

*   [https://github.com/pfalcon/python-compiler](https://github.com/pfalcon/python-compiler)
*   [https://pypi.org/project/python-compiler/](https://pypi.org/project/python-compiler/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-24T21:04:54.807

为了它的价值，我开始将`compiler`包移植到 Python3：[https](https://github.com/pfalcon/python-compiler) ://github.com/pfalcon/python-compiler 。在撰写本文时，它生成与 CPython3.5 兼容的字节码，并且可以编译该版本的整个标准库。

# wpf - WPF列表框不重绘

> ID：909093
> 
> 赞同：0
> 
> 时间：2009-05-26T05:54:49.617
> 
> 标签：wpf, listbox, redraw

我在 XAML 中定义了一个列表框：

```
<ListBox x:Name="directoryList"
                 MinHeight="100" 
                 Grid.Row="0"
                 ItemsSource="{Binding Path=SelectedDirectories}"/> 
```

SelectedDirectories 是列表 DataContext 类型的属性`List<DirectoryInfo>`

作为列表框数据上下文的类实现了 INotifyPropertyChanged。当集合更改时，项目已成功添加到列表中，但是显示不会更新，直到我通过调整列表框的大小来强制重新绘制。

任何想法为什么？

编辑：INotifyPropertyChanged 实现

```
public class FileScannerPresenter : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;
        private FileScanner _FileScanner;

        public FileScannerPresenter()
        {
            this._FileScanner = new FileScanner();
        }

        public List<DirectoryInfo> SelectedDirectories
        {
            get
            {
                return _FileScanner.Directories;
            }
        }

        public void AddDirectory(string path)
        {
            this._FileScanner.AddDirectory(path);
            OnPropertyChanged("SelectedDirectories");
        }

        public void OnPropertyChanged(string property)
        {
            if (this.PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(property));
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-26T06:26:30.007

尝试

```
ObservableCollection<DirectoryInfo> 
```

相反 - 您无缘无故地触发了整个 ListBox 的刷新，并且您不需要让您的托管类实现 INotifyPropertyChanged - 它很容易只是窗口的一个属性。关键是永远不要将属性设置为新实例。所以：

```
class SomeWindow : Window {
    public ObservableCollection<DirectoryInfo> SelectedDirectories {get; private set;}

    SomeWindow() { SelectedDirectories = new ObservableCollection<DirectoryInfo>(); }

    public void AddDirectory(string path) {
        SelectedDirectories.Add(new DirectoryInfo(path));
    }
} 
```

如果您最终使用该 FileScanner 类，则需要改为实现 INotifyCollectionChanged - 这样，ListBox 知道要动态添加/删除什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T07:05:54.887

**（见下面的更新）**。WPF 似乎工作正常。我将您的代码放入一个新项目中。**每当我单击按钮调用 AddDirectory 时，列表框就会更新。您应该不需要更多的代码更改。** 问题似乎是其他问题。您的 UI 中是否有多个线程？

我没有 FileScanner 类型。所以我创建了一个虚拟对象，如下所示。

```
public class FileScanner
   {
      string _path;
      public FileScanner()
      {     _path = @"c:\";      }
      public List<DirectoryInfo> Directories
      {
         get
         {
            return Directory.GetDirectories(_path).Select(path => new DirectoryInfo(path)).ToList();
         }
      }

      internal void AddDirectory(string path)
      {         _path = path;      }
   } 
```

您的 FileScannerPresenter 类没有更改。或者您的列表框 XAML。我创建了一个带有 DockPanel 的窗口，其中包含您的列表框、文本框和按钮。

**更新：**保罗·贝茨是对的。它之所以有效，是因为我每次都从 Bound 属性返回一个新列表。列表的数据绑定总是让我很困惑。通过更多的修补，做到这一点的简单方法是：

*   使 FileScanner#Directories 返回一个`ObservableCollection<DirectoryInfo>`（`INotifyCollectionChanged`为您实现）。一直更改所有签名以返回此类型而不是`List<DirectoryInfo>`
*   FileScanner 和 FileScannerPresenter 本身不必实现任何 INotifyXXX 接口。

    ```
    //  in FileScanner class def         
      public ObservableCollection<DirectoryInfo> Directories
      {
         get
         {  return _DirList;  }
      }
      internal void AddDirectory(string path)
      {
         _path = path;
         //var newItems = Directory.GetDirectories(_path).Select(thePath => new DirectoryInfo(thePath)).ToList();
         //_DirList.Concat( newItems );  -- doesn't work for some reason.
         foreach (var info in Directory.GetDirectories(_path).Select(thePath => new DirectoryInfo(thePath)).ToList())
         {
            _DirList.Add(info);
         }
      } 
    ```

# sifr - 检测 sifr 在页面上处于活动状态

> ID：909101
> 
> 赞同：1
> 
> 时间：2009-05-26T05:57:46.443
> 
> 标签：sifr, detect

我希望能够在页面加载后检查 sIFR 是否已激活，以便我可以进行其他调整 - 有点像设置 () 替代行为

由于 sIFR 已经在检查 flash 的存在，是否有一个简单的全局标志我可以参考，或者我应该只查询 DOM 以查看是否添加了 sIFR 替换的类？

如果您可以仅在标志上进行测试，那将更加优雅；-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-26T17:23:12.193

使用 sIFR 3，您可以检查`sIFR.isActive`.

# vb6 - VB6 中的 Clong 溢出

> ID：909103
> 
> 赞同：2
> 
> 时间：2009-05-26T05:57:57.363
> 
> 标签：vb6, types

`Clong`由于值非常大，在使用数据类型时，我在 VB 6.0 中遇到溢出错误。如何克服这一点？还有什么比`Clong`数据类型更高的可用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-26T06:03:40.300

您可以使用**Double**而不是 Long，因为它可以容纳更大的数字。函数是 CDbl() 而不是 CLng()。

在 VB6.0 中，Long 为 32 位，最多可保存值：2,147,483,648
A Double 为 64 位，最多可保存旧值：1.79769313486231570E+308

**编辑：**请参考这个[参考](http://msdn.microsoft.com/en-us/library/aa263420(VS.60).aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-26T06:33:42.440

根据您真正的大值有多大，VB6 Currency 数据类型可能是一个不错的选择。

它支持 -922,337,203,685,477.5808 到 922,337,203,685,477.5807 范围内的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-26T06:10:57.183

我相信 MSVS2010 中即将推出的 VB 具有`CLonger`（64 位）、`CEvenLongerYet`（128 位）和`CTooDamnLongForSensibleUse`（256 位）数据类型。

</幽默>

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-26T08:57:36.503

以下是 VB6 参考手册[主题中有关数据类型的一些选项](http://msdn.microsoft.com/en-us/library/aa263420(VS.60).aspx)

*   Long（长整数）4 字节 -2,147,483,648 到 2,147,483,647
*   Single（单精度浮点）4 字节 -3.402823E38 到 -1.401298E-45 用于负值；1.401298E-45 到 3.402823E38 为正值。大约 6 或 7 位有效数字精度。
*   Double（双精度浮点）8 字节 -1.79769313486231E308 到 -4.94065645841247E-324 用于负值；4.94065645841247E-324 到 1.79769313486232E308 为正值。大约 15 或 16 位有效数字精度。
*   货币（缩放整数）8 字节 -922,337,203,685,477.5808 到 922,337,203,685,477.5807
*   十进制 14 字节 +/-79,228,162,514,264,337,593,543,950,335，无小数点；+/-7.9228162514264337593543950335，小数点右侧 28 位；最小的非零数是 +/-0.0000000000000000000000000001

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-12-10T18:37:51.580

尽量避免除以零。如果代码的分子和分母对象为零，请尝试使分母等于 1。因此，零/零 = 溢出零/1 = 零（无溢出）

# .net - 在 windows mobile 6 中拨打 IVR 并发送 DTMF 字符串

> ID：909113
> 
> 赞同：1
> 
> 时间：2009-05-26T06:03:47.960
> 
> 标签：.net, windows-mobile

我是 moblie developmentmnet.in 该应用程序的新手：-

应用程序应该能够拨打 IVR 并发送 DTMF 字符串 2\. DTMF 字符串将是 2a) 电话号码 2b) 字符串代码，如 *21*0236661201# 3\. 转移电话的选项 3a) 当电话号码输入，拨打IVR并发送*21* [phoneNumber]#

谁能给我链接....或代码....

提前谢谢...问候Pankaj Pareek

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T14:32:36.700

[这些方面](http://blog.opennetcf.com/ncowburn/2007/03/09/InteractingWithInteractivePhoneServicesIn3LinesOfCode.aspx)的东西？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T20:18:58.063

我不知道 IVR 是什么，但你使用[Phone API](http://msdn.microsoft.com/en-us/library/bb416387.aspx)。您使用[MakePhoneCall](http://msdn.microsoft.com/en-us/library/bb416260.aspx)拨打号码（[.net 示例](http://msdn.microsoft.com/en-us/library/aa446543.aspx?ppud=4)）和[PhoneSendDTMFStart](http://msdn.microsoft.com/en-us/library/bb416510.aspx) / [PhoneSendDTMFStop](http://msdn.microsoft.com/en-us/library/bb416506.aspx)发送 DTMF 音。

DTMF 功能仅在 WM6 及更高版本中可用。如果您想在 WM5 中支持 DTMF，您将需要使用另一种方法。

# javascript - 通过 Javascript 播放动态嵌入的声音对象

> ID：909117
> 
> 赞同：6
> 
> 时间：2009-05-26T06:05:59.190
> 
> 标签：javascript, ajax, audio, embed

我需要使用 AJAX 为 HTML 页面后台加载一些 WAV 文件。我使用 AJAX 获取 WAV 文件的详细信息，然后使用 embed 标记，我可以确认文件已成功加载，因为当我将 autostart 设置为 true 时，文件会播放。但是，我需要仅在用户单击按钮（或触发事件）时播放文件。以下是我预加载这些文件的代码：

```
function preloadMedia() {
  for(var i = 0; i < testQuestions.length; i++)  {
  var soundEmbed = document.createElement("embed");
  soundEmbed.setAttribute("src", "/media/sounds/" + testQuestions[i].mediaFile);
  soundEmbed.setAttribute("hidden", true);
  soundEmbed.setAttribute("id", testQuestions[i].id);
  soundEmbed.setAttribute("autostart", false);
  soundEmbed.setAttribute("width", 0);
  soundEmbed.setAttribute("height", 0);
  soundEmbed.setAttribute("enablejavascript", true);
  document.body.appendChild((soundEmbed));
} 
```

}

我使用以下代码播放文件（基于用户想要播放的声音文件）

```
function soundPlay(which) {
  var sounder = document.getElementById(which);
  sounder.Play();
} 
```

这里出了点问题，因为我测试过的浏览器都没有使用上面的代码播放文件。没有错误，代码只是返回。

我会把它留在那里（也就是说 - 我会说服客户将所有 WAV 转换为 MP3 并使用 MooTools）。但我意识到我可以播放**不是动态嵌入**的声音文件。

因此，相同的 soundPlay 函数适用于以下列方式嵌入的文件：

```
<embed src="/media/sounds/hug_sw1.wav" id="sound2" width="0" heigh="0" autostart="false" enablejavascript="true"/> 
```

HTML 中的任何位置。

它在所有浏览器中都运行良好。

有人对此有任何线索吗？这是所有浏览器中某种未记录的安全限制吗？（请记住，文件确实是动态预加载的，我可以通过将 autostart 属性设置为 true 来确认 - 它们都在播放）。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T06:13:04.727

嗯..也许，您需要在调用 preloadMedia() 之后*等待*嵌入对象加载其“src”？

您确定调用 soundPlay() 时加载了媒体文件吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-03-03T22:45:22.547

我知道你的问题现在有点老了，但如果你仍然想知道......

```
soundEmbed.setAttribute("id", testQuestions[i].id); 
```

您使用相同的`id`两次，但`getElementById`只返回一个元素，或者`false`如果它没有找到完全匹配的元素。

你可以尝试这样的事情：

```
soundEmbed.setAttribute("id", "soundEmbed_"+testQuestions[i].id); 
```

*始终牢记 a`id`必须是唯一的*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:13:12.483

只是为了提高兼容性的提示：我[在这里](http://www.phon.ucl.ac.uk/home/mark/audio/play4.htm)读到，对于 MacOS 上的 Firefox，宽度和高度需要 > 0。

# c# - 使用 OLEDB 更新图像的问题

> ID：909119
> 
> 赞同：1
> 
> 时间：2009-05-26T06:06:12.293
> 
> 标签：c#, image, oledb

我在 C# 窗口 Visual Studio 2005 上工作。我使用 OLEDB 命令将图像保存在 SQL Server 上。在插入中，我在图像字段上插入空值。它运行良好，但是当我尝试更新图像时出现问题。我的更新查询是：

```
using (OleDbCommand Update = new OleDbCommand(
                 "UPDATE [BoardDetail] SET BoardImage= '(?)' WHERE BoardID='" + oItem.BoardID + "' AND BoardSerialNo='" + oItem.BoardSerialNo + "' ", connection))             
             {
                 OleDbParameter imageParameter =
                 Update.Parameters.Add("@image", OleDbType.Binary);
                 imageParameter.Value = content;
                 imageParameter.Size = content.Length;
                 Update.ExecuteNonQuery();
             } 
```

它运作良好，但图像列上的值为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-11-14T22:31:18.737

问题在于参数的定义。改变：

```
SET BoardImage= '(?)' 
```

至

```
SET BoardImage= @image 
```

# javascript - 如何返回上一页

> ID：909121
> 
> 赞同：1
> 
> 时间：2009-05-26T06:06:38.907
> 
> 标签：javascript

这可能是一个非常简单的问题，但是我在使用`onclick="javascript:history.back(-1);"`PHP 时遇到了问题。在第一页中，我得到了一个搜索结果，并且我使用了一个发布操作来获取搜索条件。从这个页面，我可以查看搜索结果的详细信息。当我返回 IE 的搜索结果页面时，除了页面显示“网页已过期”之外，我什么也得不到。

我能做些什么来解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-26T06:10:35.107

您应该使用 POST/redirect/GET 模式：

*   [http://www.theserverside.com/patterns/thread.tss?thread_id=20936](http://www.theserverside.com/patterns/thread.tss?thread_id=20936)
*   [http://en.wikipedia.org/wiki/Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T06:10:37.243

当您返回该页面时，IE 似乎没有重新发布表单。您是否考虑过使用 GET 请求进行搜索？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T06:10:38.413

问题（可能）是您可能正在使用 POST 请求来生成搜索结果。

只是我的好奇心：您使用的是哪个版本的 IE？！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-26T06:29:45.630

尝试将表单发布到自身（同一页面）而不是另一个页面，然后如果出现错误，您不必“返回”，因为您已经在那里了！只需再次打印表单并填写发布的值以及表单中的某些内容未验证的消息。

# asp.net - 在 ASp.NET MVC 中，你如何记住下拉列表的状态？

> ID：909123
> 
> 赞同：2
> 
> 时间：2009-05-26T06:10:16.327
> 
> 标签：asp.net, asp.net-mvc, validation

我有这个动作：

```
public ActionResult Add([Bind(Include = "Title,Description")] product product2Add){
--SNIP--
} 
```

我正在使用视图模型模式，在其中创建了一个特殊`AddProduct_ViewModel`类，其中包含我的产品类以及我在视图中需要的任何其他内容。其中包括 2 个下拉列表；一个对所有各种产品类别进行数据库查找，另一个列出产品供应商。

当我对失败的产品进行验证时，我看不到如何轻松保存下拉列表的状态（无需执行一些冗长的数据库代码）。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T06:44:17.270

在控制器中，您可以调用：

```
Request.Form.Get("MyDropDownListId"); 
```

获取所选选项的 value 属性。

在回发后再次构建下拉列表时，您可以使用此值重新设置所选项目。

**当您的模型中有属性“PageSize”时在视图中设置所选项目的**示例：****

 **```
Response.Write(Html.DropDownList("pageSize",
            Model.PageSizes.ToSelectList(p => p.ToString(), p => p.ToString(), p => p.Equals(Model.PageSize)))); 
```

使用扩展方法 ToSelectList()：

```
public static List<SelectListItem> ToSelectList<T>(this IEnumerable<T> enumerable, Func<T, string> text, Func<T, string> value, Func<T, bool> selected)
{
    var items = enumerable.Select(f => new SelectListItem() { Text = text(f), Value = value(f) }).ToList();
    return items;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2009-05-26T06:16:54.143

好吧..在MVC中没有视图状态，因此控件无法保存状态，尽管您可以使用一些技巧将其存储在使用javascript的cookie中 - 最好是jquery，或者在onChange事件中将此信息保存到服务器端。

# sql-server - SQL Server 动态列问题

> ID：909131
> 
> 赞同：2
> 
> 时间：2009-05-26T06:11:04.547
> 
> 标签：sql-server, database-design, ddl

我使用表格`GadgetData`来存储应用程序中小工具的属性。小工具基本上是一种自定义控件，具有 80% 的常见属性，如高度、宽度、颜色、类型等。每种小工具类型都有一些属性集是它们独有的。所有这些数据都必须存储在数据库中。目前我只存储常见的属性。我应该使用什么设计方法来存储这些列是动态的数据。

1.  创建具有作为 Columns 的公共属性的表，并添加额外的 Text 类型的列，以 XML 格式存储每个小工具类型的所有唯一属性。
2.  创建一个表，其中包含所有小工具类型中的所有可能列。
3.  为每种类型的小工具创建单独的表。
4.  你还有什么更好的推荐方式吗？

（注意：小工具类型的数量甚至可能超过 100 和 ）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-26T06:52:05.647

选项 3 是一个非常规范化的选项，但如果您必须跨多种类型进行查询，它会回来咬你——`SELECT`如果添加了新类型，每个都会有另一个连接。维护的噩梦。

选项 2（稀疏表）会有很多 NULL 值并占用额外空间。如果将来添加另一种类型，表定义也需要更新。没那么糟糕，但仍然很痛苦。

我在生产中使用选项 1（使用`xml`类型而不是`text`）。它允许我序列化从我的通用类型派生的任何类型，提取通用属性并将唯一的属性留在`XmlProperties`列中。这可以在应用程序或数据库（例如存储过程）中完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T07:01:58.967

**您的选择：**

1.  好一个。甚至可以强制模式等
2.  你不能让那些列不为空，所以你会在那里失去一些数据完整性
3.  只要您不允许搜索超过一种类型的小工具，就足够了，但选项 1 更好
4.  我会使用 ORM

**笔记：**

如果你想让你的数据库保持“关系”，但又不怕使用 ORM 工具，那么我会使用一个。在这种情况下，您可以（几乎）根据需要存储数据，但只要您正确映射它们，就可以正确处理它们。看：

*   [单表继承](http://martinfowler.com/eaaCatalog/singleTableInheritance.html)
*   [具体表继承](http://martinfowler.com/eaaCatalog/concreteTableInheritance.html)

如果您需要纯 SQL 解决方案，那么根据您的 RDBMS，我可能会使用 XML 列来存储特定于小工具类型的所有数据：您可以进行验证，使用新属性轻松扩展。然后您可以在一张表中拥有所有内容，快速搜索所有常见属性，还可以轻松搜索一个小工具的类型属性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-12-17T08:12:54.747

如果所有类型的小工具都有许多可以存储在一个表中的公共强制属性和几个可选属性，那么您最好使用第一种方法：这样您将使用最好的关系模式并使用 XML 简化您的生活。并且不要忘记使用将 XML 列链接到它的 XML Schema 集合：您将拥有完整的索引和 XQuery 功能。

如果小工具类型有**非常**不同的描述，并且在 5 个或更多不同的属性集中只有 1-3 个公共列，请使用第三种方法。

* * *

但是对于 100 多种小工具的情况，我会使用第一种方法：它具有良好的性能和易于支持和进一步开发的灵活性支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-26T06:38:24.567

根据“小工具”的不同程度，我不喜欢选项 2，会有很多空值浮动，如果您有一个列对于一个小工具是强制性的，但对于另一个小工具却没有使用，这可能会变得很糟糕。

如果小工具的数量不经常更改，我只会选择选项 3，因为它每次都需要更改数据库。

未提及的选项是将小工具存储在包含小工具唯一值的子表中。但这需要大量工作才能返回小工具详细信息或多次数据库调用。

离开选项 1，除了我将使用 SQL 服务器 XML 类型而不是文本之外，您可以在存储过程中使用 XQuery。

# debian - package.init 未安装

> ID：909138
> 
> 赞同：7
> 
> 时间：2009-05-26T06:13:57.533
> 
> 标签：debian, packaging, deb, dpkg, debhelper

我`project.init`在 debian 目录中有一个文件（以及`rules`,`control`等），`dh_installinit`我的文件中有一个`rules`文件（在`binary-arch`规则中）。

完成`dpkg-buildpackage`后，初始化脚本已复制到`debian/project/etc/init.d/project`，并创建了各种前/后脚本。

但是，当我实际安装 .deb （带有`dpkg -i`）时，init.d 脚本没有安装，所以我一定错过了这个过程的一部分。“[新维护者指南](http://www.debian.org/doc/maint-guide/)”在 init.d 细节上的内容非常少（它基本上说不要使用它们，因为它们太高级了）。

dh_installinit 命令的详细输出是：

```
dh_installinit
    install -p -m755 debian/project.init debian/project/etc/init.d/project
    echo "# Automatically added by dh_installinit">> debian/project.postinst.debhelper
    sed "s/#SCRIPT#/project/;s/#INITPARMS#/defaults/;s/#ERROR_HANDLER#/exit \$?/" /usr/share/debhelper/autoscripts/postinst-init >> debian/project.postinst.debhelper
    echo '# End automatically added section' >> debian/project.postinst.debhelper
    echo "# Automatically added by dh_installinit">> debian/project.prerm.debhelper
    sed "s/#SCRIPT#/project/;s/#INITPARMS#/defaults/;s/#ERROR_HANDLER#/exit \$?/" /usr/share/debhelper/autoscripts/prerm-init >> debian/project.prerm.debhelper
    echo '# End automatically added section' >> debian/project.prerm.debhelper
    echo "# Automatically added by dh_installinit">> debian/project.postrm.debhelper
    sed "s/#SCRIPT#/project/;s/#INITPARMS#/defaults/;s/#ERROR_HANDLER#/exit \$?/" /usr/share/debhelper/autoscripts/postrm-init >> debian/project.postrm.debhelper
    echo '# End automatically added section' >> debian/project.postrm.debhelper 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T21:27:37.283

您的包是否在`Conffiles`in 的块下有一个用于您的 init 脚本的条目`/var/lib/dpkg/status`，例如

```
Package: <project>
...
Conffiles:
 /etc/init.d/<project> d41d8cd98f00b204e9800998ecf8427e 
```

并`/var/lib/dpkg/info/<project>.conffiles`包含`/etc/init.d/<project>`？

这就是正在发生的事情......

默认情况下，初始化脚本被标记为配置文件，因为它们位于`/etc`. ¹

我猜你安装了包，删除了 init 文件，然后重新安装了包。

在这种情况下，删除初始化文件算作修改它²，并`dpkg`拒绝“覆盖”“配置文件”。

您应该能够通过`Conffiles`从`/var/lib/dpkg/status`.

笔记：

1.  [conffiles - Debian 新维护者指南](http://www.debian.org/doc/manuals/maint-guide/dother.en.html#conffiles)
2.  空文件具有 MD5sum `d41d8cd98f00b204e9800998ecf8427e`，但任何不匹配的校验和都会导致相同的行为

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-09-10T14:13:27.060

我相信您应该查看实用程序脚本“update-rc.d”，它负责在 /etc/init.d/ 中创建/删除符号链接。

在 DEBIAN 控制文件“postinst”和“postrm”中使用这个脚本。

例如对于“postinst”： update-rc.d mswitch start 20 2 3 4 5 。停止 0 1 6 。

例如对于“postrm”：update-rc.d mswitch remove

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T18:02:49.363

此时，我将检查创建的 .deb 文件的内容。您可以为此目的使用 dpkg-deb -c。

如果 init 脚本在 .deb 中，它应该安装在 /etc/init.d 中，就像这样：

```
...
drwxr-xr-x root/root 0 2009-06-03 14:01 ./etc/
drwxr-xr-x root/root 0 2009-06-03 14:01 ./etc/init.d/
-rwxr-xr-x root/root 2558 2009-02-13 11:27 ./etc/init.d/balance
...

```

如果您运行的是最新版本的 Debian，那么您的软件包内容可能是从 debian/tmp 生成的，而不是像您预期的那样从 debian/project 生成。您可以使用 dh_install 将文件从 debian/projet 移动到 debian/tmp。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-11T13:25:16.547

只是猜测，您是否对其他 dh_* 脚本使用了 -P 选项，但不是这个？如果您使用该选项，则需要在所有 dh_* 脚本上使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-17T10:33:49.473

当我只将 project.init 文件放入 debian-folder 并且*不*向规则文件添加任何特殊约束时，我取得了成功。在此步骤工作后，测试以添加您的特殊约束。

在 debian-folder 中控制成功`cat *.postinst.debhelper`包含：

```
# Automatically added by dh_installinit
if [ -x "/etc/init.d/<packagename>" ]; then
    if [ ! -e "/etc/init/<packagename>.conf" ]; then
        update-rc.d <packagename> defaults >/dev/null
    fi
    invoke-rc.d <packagename> start || exit $?
fi 
```

# java - While循环问题

> ID：909142
> 
> 赞同：1
> 
> 时间：2009-05-26T06:15:11.527
> 
> 标签：java, core

我正在从 while 循环内的串行端口读取数据，如下所示：

```
while((len = this.getIn().read(buffer)) > 0) {
    data = new String(buffer, 0, len);
    System.out.println("data len " + len);
    handleModemresponse(data);
} 
```

但是，在开始从流中读取数据时，具有断开连接按钮的主 AWT 窗口没有获得任何侦听器（整个窗口都没有获得侦听器）。它仅在传输完成时（即在 while 循环之外）进行侦听。

我希望我的 AWT 窗口在 while 循环中时也能监听我的操作。

有什么想法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-26T06:39:26.377

为读取操作创建一个新线程。

```
public class LongProcess implements Runnable {
  public void startProcess() {
    Thread t = new Thread(this);
    t.start();
  }

      public void run() {
// Define inputstream here
        while((len = inputStream.read(buffer)) > 0) {
         data = new String(buffer, 0, len);
         System.out.println("data len " + len);
         handleModemresponse(data);
        }
      }
    } 
```

**编辑**（在评论汤姆霍廷 - tackline 之后）：

```
SwingUtilities.invokeLater(new LongProcess ()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-26T06:24:18.183

看起来您将所有内容都放在一个线程中 - 因此，当您的工作方法正在进行时，您的 GUI 似乎被阻塞并且在循环结束之前不会响应任何操作。

您必须将您的 GUI 出勤率放在一个线程中，将您的工作方法放在另一个线程中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-26T06:24:58.963

您正在调用的读取方法正在阻塞。您需要将其移动到不同的线程中，以便您的听众继续工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-26T06:23:43.210

我怀疑您应该将此 while 循环推入一个单独的线程，以免在传输过程中占用您的 AWT 线程。

# user-interface - 自定义复选框

> ID：909144
> 
> 赞同：2
> 
> 时间：2009-05-26T06:16:02.163
> 
> 标签：user-interface, blackberry, java-me, blackberry-storm

我正在尝试将图像实现为复选框。

我有一个包含 2 列的列表，我想在右侧显示复选框图像，作为第三列。单击该图像时，图像将更改为不同的图像。

我可以通过哪种方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T07:37:41.890

一种方法是创建一个`Field`扩展的自定义`BitmapField`。此自定义字段可以包含两个位图图像（每个状态一个）。您甚至可以考虑使用四张图像，以便您也可以指示它何时具有焦点。例如：unchecked-non-focused、unchecked-focused、check-non-focused、checked-focused。

当您想要更改图像时（即在触摸事件或轨迹球点击时），只需`setBitmap()`使用适当的位图调用您的自定义字段。

# ios - 多行 uibutton

> ID：909150
> 
> 赞同：-6
> 
> 时间：2009-05-26T06:17:41.163
> 
> 标签：ios, objective-c, cocoa-touch, uibutton

如何`UIButton`在 iPhone 编程中将多行设置为 a 的标题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-26T06:23:51.120

```
someButton.lineBreakMode = UILineBreakModeWordWrap; 
```

在发布问题之前，请务必尝试养成查阅文档的习惯。Apple 的文档非常全面，通常会涵盖此类内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-08T08:31:18.297

你好，

UIButton 有一个名为 lineBreakMode 的属性，它允许您添加多行标题。我将设置它的两个主要内容是 UILineBreakModeWordWrap 或 UILineBreakModeCharacterWrap。

UILineBreakModeWordWrap 包装最后一个单词， UILineBreakModeCharacterWrap 包装在最后一个字符。

好像：`instanceOfUIButton.lineBreakMode = UILineBreakModeWordWrap;`

或者`instanceOfUIButton.lineBreakMode = UILineBreakModeCharacterWrap;`

希望这就是你的追求

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-11-16T10:26:01.943

请不要使用子视图。

```
someButton.lineBreakMode = UILineBreakModeWordWrap; 
```

这是做到这一点的正确方法。有一个针对德国社区的教程！

[http://bedifferently.wordpress.com/2011/11/16/uibutton-bearbeite-den-titel-teil-1/](http://bedifferently.wordpress.com/2011/11/16/uibutton-bearbeite-den-titel-teil-1/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-06-08T08:52:17.363

UIButton 不显示多行。这样做的方法是将Subview a UILabel 添加到按钮

# gnu - 如何通过 --program-prefix=PREFIX 从配置传递到子生成文件之一？

> ID：909151
> 
> 赞同：2
> 
> 时间：2009-05-26T06:18:04.110
> 
> 标签：gnu, autoconf

Autoconf 让我很困惑。

我尝试修改 Makefile.in 中的 COMPILE 如下

```
COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \
        $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -DFINALDIR=\"$(DESTDIR)$(bindir)\" 
```

但我对 FINALDIR 的使用是未定义的。正确的方法是什么？在我的辩护中，整个 autoconf 业务是一个预处理器的巢穴，隐藏着任何明显的东西。

在此先感谢...对不起，我是这样的工具！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T06:27:22.593

您可能需要将该定义移入`CPPFLAGS`or `AM_CPPFLAGS`; 很可能某些东西只运行 C 预处理器，而不运行编译器，或者至少运行编译器而不使用`${COMPILE}`.

# php - 我正在使用 Zend Studio for Eclipse，我正在尝试保存我的文件，但它失败了！

> ID：909153
> 
> 赞同：0
> 
> 时间：2009-05-26T06:19:49.723
> 
> 标签：php, ubuntu

我是 PHP 开发新手，昨天才使用 Zend。我遇到的一个问题是将文件保存在只读目录中。

我正在使用 Zend Studio 开发 PHP 脚本。我在 /opt/lampp/ 目录中的 Ubuntu 中安装了 XAMPP。

现在 /opt/lampp/htdocs 目录需要特权访问。我不能在那里保存任何东西。它要求我 sudo 一切。我知道这是出于安全原因。

现在，我可以在 opt/lampp/htdocs/project 目录中使用 sudo gedit index.php 并将文件保存在那里。但是我想用我的 Zend Studio 来开发脚本。

当我在 Zend 中打开 /opt/lampp/htdocs/project/index.php 中的文件时。我不能把它保存在那里。无法完成保存，因为资源的父级标记为只读

现在我不想将目录修改为读/写，我只想使用Zend Studio并允许zend将文件保存在目录中..请指导我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T06:31:28.793

好的，除了在 sudo 下运行 Zend 本身，我不确定你是否能够做到这一点。

您正在询问如何能够写入写保护目录。答案是“不要尝试”。

您要么必须取消保护它，要么想办法让 Zend 在未受保护的区域复制文件以进行编辑，然后在关闭它时将其复制回来（在 sudo 下）。

我知道我会选择哪个选项（我天生懒惰）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T06:30:46.470

在保存到*/opt/lampp/htdocs/*所需的权限下运行 Zend Studio ？

# sql - SQL Server 中 Oracle 的 RowID 等价物

> ID：909155
> 
> 赞同：94
> 
> 时间：2009-05-26T06:20:05.433
> 
> 标签：sql, sql-server, tsql, rowid, row-number

什么是 SQL Server 中 Oracle 的 RowID 的等价物？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2011-09-24T09:17:29.270

[来自 Oracle 文档](http://download.oracle.com/docs/cd/B19306_01/server.102/b14200/pseudocolumns008.htm)

> **ROWID 伪列**
> 
> 对于数据库中的每一行，ROWID 伪列返回该行的地址。Oracle 数据库 rowid 值包含定位行所需的信息：
> 
> *   对象的数据对象编号
> *   行所在的数据文件中的数据块
> *   该行在数据块中的位置（第一行为0）
> *   行所在的数据文件（第一个文件是 1）。文件号是相对于表空间的。

SQL Server 中与此最接近的等价物是`rid`具有三个组件的`File:Page:Slot`。

在 SQL Server 2008 中，可以使用未记录且不受支持的`%%physloc%%`虚拟列来查看这一点。这将返回一个`binary(8)`值，其中前四个字节中的页面 ID，然后是文件 ID 的 2 个字节，然后是页面上的插槽位置的 2 个字节。

标量函数`sys.fn_PhysLocFormatter`或`sys.fn_PhysLocCracker`TVF 可用于将其转换为更易读的形式

```
CREATE TABLE T(X INT);

INSERT INTO T VALUES(1),(2)

SELECT %%physloc%% AS [%%physloc%%],
       sys.fn_PhysLocFormatter(%%physloc%%) AS [File:Page:Slot]
FROM T 
```

示例输出

```
+--------------------+----------------+
|    %%physloc%%     | File:Page:Slot |
+--------------------+----------------+
| 0x2926020001000000 | (1:140841:0)   |
| 0x2926020001000100 | (1:140841:1)   |
+--------------------+----------------+ 
```

请注意，查询处理器不会利用这一点。虽然*可以*`WHERE`在子句中使用 this

```
SELECT *
FROM T
WHERE %%physloc%% = 0x2926020001000100 
```

SQL Server**不会**直接查找指定的行。相反，它将进行全表扫描，评估`%%physloc%%`每一行并返回匹配的行（如果有的话）。

要反转前面提到的 2 个函数执行的过程并获取`binary(8)`与已知 File、Page、Slot 值对应的值，可以使用以下值。

```
DECLARE @FileId int = 1,
        @PageId int = 338,
        @Slot   int = 3

SELECT CAST(REVERSE(CAST(@PageId AS BINARY(4))) AS BINARY(4)) +
       CAST(REVERSE(CAST(@FileId AS BINARY(2))) AS BINARY(2)) +
       CAST(REVERSE(CAST(@Slot   AS BINARY(2))) AS BINARY(2)) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-11-10T19:16:09.500

我必须对包含许多列的非常大的表进行重复数据删除，并且速度很重要。因此，我使用适用于任何表的这种方法：

```
delete T from 
(select Row_Number() Over(Partition By BINARY_CHECKSUM(*) order by %%physloc%% ) As RowNumber, * From MyTable) T
Where T.RowNumber > 1 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-05-26T06:30:25.817

如果您想唯一标识表中的一行而不是您的结果集，那么您需要考虑使用类似 IDENTITY 列的东西。请参阅 SQL Server 帮助中的“IDENTITY 属性”。SQL Server 不会像 Oracle 那样为表中的每一行自动生成 ID，因此您必须费心创建自己的 ID 列并在查询中显式获取它。

**编辑：**对于结果集行的动态编号，请参见下文，但这可能与 Oracle 的 ROWNUM 等效，我从页面上的所有评论中假设您想要上面的内容。对于 SQL Server 2005 及更高版本，您可以使用新的[Ranking Functions](http://msdn.microsoft.com/en-us/library/ms189798.aspx)函数来实现行的动态编号。

例如，我对我的查询执行此操作：

```
select row_number() over (order by rn_execution_date asc) as 'Row Number', rn_execution_date as 'Execution Date', count(*) as 'Count'
from td.run
where rn_execution_date >= '2009-05-19'
group by rn_execution_date
order by rn_execution_date asc 
```

会给你：

```
Row Number  Execution Date           Count
----------  -----------------        -----
1          2009-05-19 00:00:00.000  280
2          2009-05-20 00:00:00.000  269
3          2009-05-21 00:00:00.000  279 
```

[support.microsoft.com](http://support.microsoft.com/default.aspx?scid=KB;EN-US;q186133)上还有一篇关于动态编号行的文章。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-05-26T06:50:06.167

查看新的[ROW_NUMBER](http://msdn.microsoft.com/de-de/library/ms186734.aspx)函数。它是这样工作的：

```
SELECT ROW_NUMBER() OVER (ORDER BY EMPID ASC) AS ROWID, * FROM EMPLOYEE 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2011-09-28T16:54:13.690

Several of the answers above will *work around* the lack of a direct reference to a specific row, but *will not work* if changes occur to the other rows in a table. That is my criteria for which answers fall technically short.

A common use of Oracle's ROWID is to provide a (somewhat) stable method of selecting rows and later returning to the row to process it (e.g., to UPDATE it). The method of finding a row (complex joins, full-text searching, or browsing row-by-row and applying procedural tests against the data) may not be easily or safely re-used to qualify the UPDATE statement.

The SQL Server RID seems to provide the same functionality, but does not provide the same performance. That is the only issue I see, and unfortunately the purpose of retaining a ROWID is to avoid repeating an expensive operation to find the row in, say, a very large table. Nonetheless, performance for many cases is acceptable. If Microsoft adjusts the optimizer in a future release, the performance issue could be addressed.

It is also possible to simply use FOR UPDATE and keep the CURSOR open in a procedural program. However, this could prove expensive in large or complex batch processing.

**Caveat:** Even Oracle's ROWID would not be stable if the DBA, between the SELECT and the UPDATE, for example, were to rebuild the database, because it is the physical row identifier. So the ROWID device should only be used within a well-scoped task.

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-09-18T20:28:07.303

如果要对表中的行进行永久编号，请不要使用 SQL Server 的 RID 解决方案。它在旧 386 上的性能将比 Access 更差。对于 SQL Server，只需创建一个 IDENTITY 列，并将该列用作聚集的主键。这将在表上放置一个永久、快速的 Integer B-Tree，更重要的是，每个非聚集索引都将使用它来定位行。如果您尝试在 SQL Server 中进行开发，就好像它是 Oracle 一样，您将创建一个性能不佳的数据库。您需要针对引擎进行优化，而不是假装它是不同的引擎。

另外，请不要使用 NewID() 来使用 GUID 填充主键，否则会降低插入性能。如果必须使用 GUID，请使用 NewSequentialID() 作为列默认值。但是INT仍然会更快。

另一方面，如果您只想对查询产生的行进行编号，请使用 RowNumber Over() 函数作为查询列之一。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-05-26T06:22:43.913

来自[http://vyaskn.tripod.com/programming_faq.htm#q17](http://vyaskn.tripod.com/programming_faq.htm#q17)：

> *Oracle 有一个 rownum 来使用行号或行 ID 访问表的行。SQL Server 中是否有任何等价物？或者如何在 SQL Server 中生成带有行号的输出？*
> 
> SQL Server 中没有直接等效于 Oracle 的 rownum 或 row id。严格来说，在关系数据库中，表中的行是没有顺序的，行 id 并没有真正的意义。但是，如果您需要该功能，请考虑以下三种选择：
> 
> *   在表中添加一`IDENTITY`列。
>     
>     
> *   使用以下查询为每一行生成一个行号。以下查询为 pubs 数据库的 authors 表中的每一行生成一个行号。要使此查询起作用，表必须具有唯一键。
>     
>     
>     
>     ```
>     SELECT (SELECT COUNT(i.au_id) 
>             FROM pubs..authors i 
>             WHERE i.au_id >= o.au_id ) AS RowID, 
>            au_fname + ' ' + au_lname AS 'Author name'
>     FROM          pubs..authors o
>     ORDER BY      RowID 
>     ```
>     
>     
> *   使用临时表方法，将整个结果集连同`IDENTITY()` 函数生成的行 ID 一起存储到临时表中。创建临时表的成本很高，尤其是在处理大型表时。如果您的表中没有唯一键，请采用这种方法。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2010-01-28T17:21:13.293

如果您只想要一个小数据集的基本行编号，那么这样的东西怎么样？

```
SELECT row_number() OVER (order by getdate()) as ROWID, * FROM Employees 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-12T02:33:00.530

请参阅[http://msdn.microsoft.com/en-us/library/aa260631(v=SQL.80).aspx](http://msdn.microsoft.com/en-us/library/aa260631(v=SQL.80).aspx) 在 SQL Server 中，时间戳与 DateTime 列不同。这用于唯一标识数据库中的一行，而不仅仅是一个表，而是整个数据库。这可用于乐观并发。例如 UPDATE [Job] SET [Name]=@Name, [XCustomData]=@XCustomData WHERE ([ModifiedTimeStamp]=@Original_ModifiedTimeStamp AND [GUID]=@Original_GUID

ModifiedTimeStamp 确保您正在更新原始数据，并且如果该行发生另一次更新，则会失败。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-09-19T02:21:40.877

ROWID 是 Oracle 表上的隐藏列，因此，对于 SQL Server，构建您自己的列。添加一个名为 ROWID 的列，其默认值为`NEWID()`。

如何做到这一点：[将具有默认值的列添加到 SQL Server 中的现有表](https://stackoverflow.com/questions/92082/add-column-with-default-value-to-existing-table-in-sql-server)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2011-09-23T18:46:39.513

我从 MS SQL 示例中获取了这个示例，您可以看到 @ID 可以与整数或 varchar 或其他任何东西互换。这是我一直在寻找的相同解决方案，所以我分享它。享受！！

```
-- UPDATE statement with CTE references that are correctly matched.
DECLARE @x TABLE (ID int, Stad int, Value int, ison bit);
INSERT @x VALUES (1, 0, 10, 0), (2, 1, 20, 0), (6, 0, 40, 0), (4, 1, 50, 0), (5, 3, 60, 0), (9, 6, 20, 0), (7, 5, 10, 0), (8, 8, 220, 0);
DECLARE @Error int;
DECLARE @id int;

WITH cte AS (SELECT top 1 * FROM @x WHERE Stad=6)
UPDATE x -- cte is referenced by the alias.
SET ison=1, @id=x.ID
FROM cte AS x

SELECT *, @id as 'random' from @x
GO 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-03-23T08:11:01.737

您可以使用以下方法获取 ROWID：

1.创建一个包含自动增量字段的新表

2.使用 Row_Number 分析函数根据您的要求获取序列。我更喜欢这个，因为它有助于您希望 row_id 以特定字段或字段组合的升序或降序方式

示例：Row_Number() Over(Partition by Deptno order by sal desc)

以上示例将根据每个部门的最高工资为您提供序列号。分区依据是可选的，您可以根据您的要求将其删除

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2017-07-24T14:37:39.260

请试试

`select NEWID()`

来源：[https ://docs.microsoft.com/en-us/sql/t-sql/data-types/uniqueidentifier-transact-sql](https://docs.microsoft.com/en-us/sql/t-sql/data-types/uniqueidentifier-transact-sql)

# sql - Oracle：在触发器中使用子查询

> ID：909156
> 
> 赞同：4
> 
> 时间：2009-05-26T06:20:05.837
> 
> 标签：sql, oracle, triggers, subquery

如何解决 Oracle 不允许触发器中的子查询的限制。

这是我尝试创建的示例触发器，但由于无法使用子查询而无法创建。

```
CREATE OR REPLACE TRIGGER trigger_w_subquery
AFTER UPDATE OR INSERT ON project_archiving
FOR EACH ROW WHEN (old.archiving_status <> new.archiving_status
  AND new.archiving_status = 1
  AND (SELECT offer FROM projects WHERE projnum = :new.projnum) IS NULL
)
BEGIN
  INSERT INTO offer_log (offer, status, date)
  VALUES (null, 9, sysdate);
END; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-26T09:09:08.320

这个触发器会这样做：

```
CREATE OR REPLACE TRIGGER trigger_w_subquery
AFTER UPDATE OR INSERT ON project_archiving
FOR EACH ROW WHEN (old.archiving_status <> new.archiving_status
  AND new.archiving_status = 1
)
DECLARE
  l_offer projects.offer%TYPE;
BEGIN
  SELECT offer INTO l_offer 
  FROM projects 
  WHERE projnum = :new.projnum;

  IF l_offer IS NULL THEN
    INSERT INTO offer_log (offer, status, date)
    VALUES (null, 9, sysdate);
  END IF;
END; 
```

我假设从项目中选择总是会找到一行；如果不是，它将引发您可能需要处理的 NO_DATA_FOUND 异常。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-26T09:08:58.790

我希望你想要类似的东西

```
CREATE OR REPLACE TRIGGER trigger_w_subquery
AFTER UPDATE OR INSERT ON project_archiving
FOR EACH ROW 
WHEN (old.archiving_status <> new.archiving_status
  AND new.archiving_status = 1)
DECLARE
  l_offer projects.offer%TYPE;
BEGIN
  SELECT offer 
    INTO l_offer
    FROM projects 
   WHERE projnum = :new.projnum;

  IF( l_offer IS NULL )
  THEN
    INSERT INTO offer_log (offer, status, date)
      VALUES (null, 9, sysdate);
  END IF;
END; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-26T06:25:49.133

您可以将条件放入操作（在 BEGIN 和 END 之间）而不是“是否触发”中吗？是的，这意味着触发器体可能会更频繁地触发 - 但如果它能让你解决问题......

# javascript - onclick 事件未触发

> ID：909157
> 
> 赞同：0
> 
> 时间：2009-05-26T06:20:16.103
> 
> 标签：javascript

```
var subjectList;

function PageMaster()
{
    this.contentDiv = document.getElementById("content");
}

/**
 * Builds the main part of the web page based on the given XML document object
 *
 * @param {Object} xmlDoc   the given XML document object
 */

PageMaster.prototype.doIt = function(xmlDoc)

{
    alert("PageMaster()");

alert("Clear page...");
this.contentDiv.innerHTML = "";

if (null != xmlDoc) 
{
    alert("Build page...");

    //create div Post
    var divPost = document.createElement("div");
    divPost.className = "post";

    //create h1 element
    var h1Element = document.createElement("h1");
    var headingText = document.createTextNode("Invitations");
    h1Element.appendChild(headingText);

    //insert h1 element into div post
    divPost.appendChild(h1Element);

    subjectList = xmlDoc.getElementsByTagName("subject");   
    var groupList = xmlDoc.getElementsByTagName("group");

    for (var i = 0; i < subjectList.length; i++) //for each subject
    {
        var divEntry = document.createElement("div");
        divEntry.className = "entry";

        var subjectNum = subjectList[i].attributes[0].nodeValue;
        var subjectName = subjectList[i].attributes[1].nodeValue;
        var groupId = groupList[i].attributes[0].nodeValue;
        var groupName = groupList[i].attributes[1].nodeValue;
        var ownerId = groupList[i].attributes[2].nodeValue;

        //set up the invitation table attributes    
        var table = document.createElement("table");
        table.width = 411;
        table.border = 3;
        table.borderColor = "#990000"

        tableRow = table.insertRow(0);
        tableCell = tableRow.insertCell(0);

        var cellContent = "";

        //create invitation message
        var invitationMsg = "<p>Subject : " + subjectNum + " - " + subjectName + "</p>";
        invitationMsg += "<p>You are invited to join " + groupName + " (groupId : " + groupId + ") by owner Id:" + ownerId + "</p>";
        cellContent += invitationMsg;

        //create buttons
        cellContent += "<input type='button' id='acceptButton" + i + "' value='Accept' onclick='acceptInvitation(i)'>"
        cellContent += "<input type='button' id='declineButton" + i + "' value='Decline'>"

        tableCell.innerHTML = cellContent;

        divEntry.appendChild(table);

        var blankSpace = document.createElement("p");
        divEntry.appendChild(blankSpace);
        divPost.appendChild(divEntry); 
    }

    //insert div post into div content
    this.contentDiv.appendChild(divPost);
    }
};

function acceptInvitation(i)
{
    alert("hello");
    //alert(subjectList[i].attributes[0].nodeValue);
} 
```

以上是我的javascript代码的摘录。代码所做的是从带有接受和拒绝按钮的 xml 文件创建一个邀请组表。当用户按下接受时，表格将消失，下面的表格将向上移动。现在我只测试我的接受邀请按钮，看看它是否有效。但是我在接受按钮中的 onclick 功能由于某种我不明白的原因不起作用。未读取 acceptInvitation() 中的警报。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T06:27:58.893

关于什么：

```
cellContent += "[...] onclick='acceptInvitation("+i+")'>" 
```

这确保 i 是用变量的值而不是文字来评估的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T06:26:53.077

试着这样称呼它

```
onclick='acceptInvitation();' 
```

不像这样

```
onclick='acceptInvitation(i)' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T06:33:13.657

虽然可能没有解决核心问题，

```
onclick='acceptInvitation(i)' 
```

在这种情况下`i`将是未定义的。

```
onclick='acceptInvitation("+i+")' 
```

至少可以解决一个问题。此外，您正在使用一种不同寻常的 innerHTML 和 DOM 方法的混合。为什么不坚持使用 DOM 方法并使用 attachEvent/AddEventListener？

编辑：列表分开有一篇关于变量绑定的好文章[http://www.alistapart.com/articles/getoutbindingsituations/](http://www.alistapart.com/articles/getoutbindingsituations/)

下面是一个比较专业的例子。有关更通用的案例，请参阅文章（或使用像[Prototype](http://www.prototypejs.org)这样的库）

```
var click_hdlr = function() {
    return function() {
        return acceptInvitation.apply(this,arguments);
    }
}

var acc_btn = document.createElement("input");
acc_btn.setAttribute("type","button");
acc_btn.setAttribute("id","accept");
acc_btn.setAttribute("value","Accept");
acc_btn.addEventListener("click",click_hdlr(i),false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-26T06:34:55.357

不知道这是否是导致您的问题的原因，但是您的输出 onclick='acceptInvitation(i)' 我猜您要输出 acceptInvitation(value-of-i)，即 acceptInvitation(" + i + ")

# visual-sourcesafe - 为什么我的同事使用 Visual Source Safe 看到不同的项目文件 (*.csproj)

> ID：909160
> 
> 赞同：0
> 
> 时间：2009-05-26T06:21:36.303
> 
> 标签：visual-sourcesafe, csproj

我遇到了一个很奇怪的问题，我的公司使用Visual Source Safe
来控制版本，但是我发现我团队的不同成员在VSS中看到同一个.csproj文件不一样，很奇怪，你能帮帮我吗？谢谢！！

VSS 中有一个名为 IPRA.WinUi.Sal.Sra.csproj 的文件：

当汤姆登录时，文件'IPRA.WinUi.Sal.Sra.csproj'是：

```
<Reference Include="Ark.Client.WinUi, Version=2.0.0.0, Culture=neutral, processorArchitecture=MSIL">
  <SpecificVersion>False</SpecificVersion>
  <HintPath>..\ARAF\BusinessFramework\Ark.Client.WinUi.dll</HintPath>
</Reference>
<Reference Include="Ark.Common.Business, Version=1.0.0.0, Culture=neutral, processorArchitecture=MSIL" />
<Reference Include="Ark.Controls.Business, Version=0.0.0.0, Culture=neutral, processorArchitecture=MSIL">
  <SpecificVersion>False</SpecificVersion>
  <HintPath>..\ARAF\SystemFramework\Ark.Controls.Business.dll</HintPath>
</Reference> 
```

但是当 leo 登录时，相同的文件 'IPRA.WinUi.Sal.Sra.csproj' 是：

```
 <Reference Include="Ark.Client.WinUi, Version=2.0.0.0, Culture=neutral, processorArchitecture=MSIL">
  <SpecificVersion>False</SpecificVersion>
  <HintPath>..\ARAF\BusinessFramework\Ark.Client.WinUi.dll</HintPath>
</Reference>
<Reference Include="Ark.Common.Business, Version=1.0.0.0, Culture=neutral, processorArchitecture=MSIL" />
  <SpecificVersion>False</SpecificVersion>
  <HintPath>..\ARAF\BusinessFramework\Ark.Controls.WinUi.dll</HintPath>
<Reference Include="Ark.Controls.Business, Version=0.0.0.0, Culture=neutral, processorArchitecture=MSIL">
  <SpecificVersion>False</SpecificVersion>
  <HintPath>..\ARAF\SystemFramework\Ark.Controls.Business.dll</HintPath>
</Reference> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-26T06:33:07.293

他需要做一个获取最新，尝试构建树选项以进入您的开发文件夹。他可能将文件放到错误的文件夹中，因此他的文件没有更新。尝试验证您的工作文件夹是否设置正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T06:38:04.850

> 但是我发现我团队的不同成员在VSS中看到同一个.csproj文件是不一样的，

团队看到相同的 cs 项目？那么问题来了？

如果团队看到不同的文件，则其他人尚未签入或您未使用最新版本。离开时请务必尝试签入，并在开始工作时获取最新版本。

# sharepoint - 如何在 SharePoint Services 中隐藏站点层次结构中的文件夹

> ID：909162
> 
> 赞同：0
> 
> 时间：2009-05-26T06:21:54.990
> 
> 标签：sharepoint, wss

如何将 SharePoint Services 3.0 网站左侧的网站层次结构配置为不显示文件夹？

我们有数千个文件夹，加载页面需要很长时间！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T10:15:17.153

转到站点操作、站点设置、全部修改。
在“外观”中单击“树视图”。
在“树视图”中，取消选中启用树视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T10:59:25.510

一种方法是使用 SPWeb.Navigation 类从快速启动栏中删除所有不需要的项目。有关更多信息，请查看以下课程：

[http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.navigation.spnavigation.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.navigation.spnavigation.aspx)

[http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.navigation.spnavigation_members.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.navigation.spnavigation_members.aspx)

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T11:34:43.987

我假设您的意思是快速启动栏。如果不是，请给我留言，以便我更新答案。

简而言之，您想从站点设置页面配置导航。您快速进入并告诉它不显示任何子站点。有关详细说明，请查看此[页面](http://office.microsoft.com/en-us/sharepointserver/HA101181901033.aspx)。

# asp.net - 无法加载文件或程序集

> ID：909163
> 
> 赞同：0
> 
> 时间：2009-05-26T06:22:36.770
> 
> 标签：asp.net, vb.net

我在 .Net 中有一个 Web 应用程序，其中在某些页面中使用 Ajax 控件。这些页面在 localhost 中工作，但在托管时，包含 Ajax 的页面显示以下错误。

“/Allforkids”应用程序中的服务器错误。

安全异常

说明：应用程序试图执行安全策略不允许的操作。要授予此应用程序所需的权限，请联系您的系统管理员或在配置文件中更改应用程序的信任级别。

异常详细信息：System.Security.SecurityException：请求“System.Security.Permissions.FileIOPermission，mscorlib，Version=2.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”类型的权限失败。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

```
[SecurityException: Request for the permission of type 'System.Security.Permissions.FileIOPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' failed.]
   System.Security.CodeAccessSecurityEngine.Check(Object demand, StackCrawlMark& stackMark, Boolean isPermSet) +0
   System.Security.CodeAccessPermission.Demand() +58
   System.Reflection.Assembly.VerifyCodeBaseDiscovery(String codeBase) +118
   System.Reflection.Assembly.get_CodeBase() +35
   System.Web.Handlers.ScriptResourceHandler.GetCodeBaseWithAssert(Assembly assembly) +31
   System.Web.Handlers.ScriptResourceHandler.GetLastWriteTime(Assembly assembly) +36
   System.Web.Handlers.ScriptResourceHandler.GetAssemblyInfoInternal(Assembly assembly) +61
   System.Web.Handlers.ScriptResourceHandler.GetAssemblyInfo(Assembly assembly) +62
   System.Web.Handlers.RuntimeScriptResourceHandler.System.Web.Handlers.IScriptResourceHandler.GetScriptResourceUrl(Assembly assembly, String resourceName, CultureInfo culture, Boolean zip, Boolean notifyScriptLoaded) +325
   System.Web.Handlers.ScriptResourceHandler.GetScriptResourceUrl(Assembly assembly, String resourceName, CultureInfo culture, Boolean zip, Boolean notifyScriptLoaded) +33
   System.Web.UI.ScriptManager.GetScriptResourceUrl(String resourceName, Assembly assembly) +89
   System.Web.UI.ScriptRegistrationManager.RegisterClientScriptResource(Control control, Type type, String resourceName) +111
   System.Web.UI.ScriptManager.RegisterClientScriptResource(Control control, Type type, String resourceName) +9 
```

版本信息：Microsoft .NET Framework 版本：2.0.50727.3082；ASP.NET 版本：2.0.50727.3082

任何人都可以提供适当的解决方案来摆脱这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T06:27:44.277

这看起来像是您需要向托管服务提供商提出的问题。从错误中可以看出托管服务器中的配置设置禁止访问本地文件。

您可以尝试将其添加到您的 web.config 中：

```
<system.web>
  ...
  <trust level="Medium" originUrl="" />
  ...
</system.web> 
```

但是，如果托管服务提供商在 machine.config 中有一个设置取代了它，它不会有任何影响。这里有更多关于这方面的[信息](http://msdn.microsoft.com/en-us/library/ms998326.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T06:40:59.897

它可能是您的文件夹/文件的安全权限。您是否正在写入任何文件（如 Access DB）？确保服务器上的 ASP.Net 计算机帐户（例如 PCName\ASPNET）有权访问该文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T07:12:35.967

这是来自 Assembly 类的代码：

```
 private void VerifyCodeBaseDiscovery(String codeBase)
    {                
        if ((codeBase != null) &&
            (String.Compare( codeBase, 0, s_localFilePrefix, 0, 5, true, CultureInfo.InvariantCulture) == 0)) {
            System.Security.Util.URLString urlString = new System.Security.Util.URLString( codeBase );
            new FileIOPermission( FileIOPermissionAccess.PathDiscovery, urlString.GetFileName() ).Demand();
        }
    } 
```

在 .Demand() 方法上引发异常，要求 FileIOPermissionAccess.PathDiscovery 包含脚本的文件。

我的猜测是 IIS 工作进程没有对包含脚本的路径的 READ/BROWSE 访问权限。

如果您将自己的脚本注册到 ScriptManager，请检查文件路径（通常的经验法则，脚本不应位于父文件夹（例如 ..\Scripts）中）。

如果此异常出现在 AJAX 扩展脚本资源上，则 AJAX 扩展的安装可能存在问题。您需要让您的托管服务提供商进行检查。

PS。堆栈跟踪还有更多内容吗？堆栈中的第一个调用是“RegisterClientScriptResource”似乎很奇怪。

# cocoa - 在 webview 中打开链接但不是 iFrame

> ID：909164
> 
> 赞同：0
> 
> 时间：2009-05-26T06:22:42.337
> 
> 标签：cocoa, iframe, webview

我在 Cocoa 应用程序中有一个 webView，我以编程方式编辑内容。我想做的是在用户默认浏览器中打开点击的链接，所以我在这个问题的底部添加了代码。它运行良好，但如果加载的页面上有 iFrame，它将在默认浏览器中打开 iFrame 内容，并且无法在我的应用程序中正确显示该框架。有没有办法告诉 webview 打开链接但对 iFrames 不做任何事情？

```
- (void)webView:(WebView *)webView decidePolicyForNavigationAction:(NSDictionary *)actionInformation
        request:(NSURLRequest *)request
          frame:(WebFrame *)frame
decisionListener:(id)listener 
{

    // Open it in the default browser
    NSURL *url = [request URL];
    if (url)
    {
        [[NSWorkspace sharedWorkspace] openURL:url];
        [listener ignore];
    }
    else
    {
        [listener use];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-26T16:31:23.920

检查[导航操作字典](http://developer.apple.com/documentation/Cocoa/Reference/WebKit/Protocols/WebPolicyDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/constant_group/Action_Dictionary_Keys)。

# windows - Signing Windows x64 drivers to work without the test mode enabled

> ID：909181
> 
> 赞同：1
> 
> 时间：2009-05-26T06:27:41.703
> 
> 标签：windows, 64-bit, device-driver, drivers, signing

I would like to make my drivers to install on x64 Windows without the need to switch to Test Mode. Could you please advise how to achieve this?

Thanks

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-26T07:12:01.537

It's all here: [Driver Signing Requirements for Windows](http://www.microsoft.com/whdc/winlogo/drvsign/drvsign.mspx)

Warning: it costs money because you need a certificate.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-19T13:26:19.893

Here is a link to Microsoft's whitepaper about the steps necessary for driver signing: [Kernel Mode Code Signing Whitepaper](http://www.microsoft.com/whdc/winlogo/drvsign/kmcs_walkthrough.mspx)

# sql-server - sql server 数据字段 nvchar(x) 或 nvarchar(max)

> ID：909184
> 
> 赞同：1
> 
> 时间：2009-05-26T06:29:24.977
> 
> 标签：sql-server

将所有文本字段设置为 nvarchar(MAX) 是一种好习惯吗？如果我不确定该字段的大小是多少

会不会占用额外的空间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T06:35:27.243

如果您不确定，并且它对于可能非常大的评论字段之类的东西，那么`NVARCHAR(MAX)`类型就是要走的路。如果它是用于具有合理最大值的东西，比如邮政地址，那么类似的东西`NVARCHAR(100)`可能会更好。

使用的空间最多为放入其中的值的最大长度。

我的意思是，如果您插入一个 80 个字符的字符串，然后用 40 个字符替换更新它，分配的空间可能会保持为 80 个字符，直到数据库被压缩、表被重建等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T08:00:23.297

我不确定您在列中存储了什么，但您可能需要考虑使用 varchar 而不是 nvarchar。nvarchar 存储用于多语言数据的 unicode 数据，并且比 varchar 占用更多空间。如果该字段仅存储英语（例如），那么 varchar 可能是更好的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-26T08:01:21.110

varchar(max) 不会占用额外空间。

varchar(max) 的一个危险之处在于，有人可能会在其中存储大量数据。如果恶意用户，这可能会受到伤害。或错误的程序，输入一个 1MB 的地址行。没有客户端或 Web 应用程序会期望这样，并且可能会导致它们崩溃。

因此，作为最佳实践，创建具有指定最大长度的 varchar 字段。

# java - 球衣安全和会话管理

> ID：909185
> 
> 赞同：42
> 
> 时间：2009-05-26T06:29:38.643
> 
> 标签：java, jersey

有没有办法在泽西岛以编程方式获得会话管理或安全性，例如 Web 应用程序会话管理？还是事务、会话和安全性都由部署 Jersey 应用程序的容器处理？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2009-05-28T17:06:20.077

会话管理是部署 Jersey 的容器的权限。在大多数生产情况下，它将部署在执行会话管理的容器中。

下面的代码是一个简单的球衣资源示例，它获取会话对象并将值存储在会话中并在后续调用中检索它们。

```
@Path("/helloworld")
public class HelloWorld {

    @GET
    @Produces("text/plain")
    public String hello(@Context HttpServletRequest req) {

        HttpSession session= req.getSession(true);
        Object foo = session.getAttribute("foo");
        if (foo!=null) {
            System.out.println(foo.toString());
        } else {
            foo = "bar";
            session.setAttribute("foo", "bar");
        }
        return foo.toString();

    }
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2011-10-13T09:45:10.263

> 我认为会话是我们**永远不**应该在 RESTful 应用程序中使用的东西......

叶戈尔是对的。我们不应该像*传统的*Web 应用程序那样在服务器端维护状态。如果您想构建一个解耦的面向 SOA 的应用程序，您不需要为 REST Web 服务使用任何 API/框架。如果您需要或想要在服务器端维护全局客户端-服务器状态，那么您正在隐式构建我们可以描述为面向 SOA 的 [web] 应用程序，但使用 Jersey 就像是一种 [web] 开发框架。您无意中扭曲了 Web 服务（REST 或其他）的性质。您**可以**按照第一个答案中建议的方式进行操作，但您**不能这样**做。最终的结果不是一个 Web 服务，只是一个使用 Web 服务工具构建的常规应用程序。

-_o

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-11-05T12:34:02.717

是的，这是可能的。泽西岛[文件](https://jersey.java.net/documentation/latest/user-guide.html#d0e8757)说：

> 可以通过使用 @Context 注释注入 JAX-RS SecurityContext 实例来获得请求的安全信息。注入的安全上下文实例提供了与 HttpServletRequest API 上可用的功能等效的功能。注入的安全上下文取决于实际的 Jersey 应用程序部署。例如，对于部署在 Servlet 容器中的 Jersey 应用程序，Jersey SecurityContext 将封装从 Servlet 请求中检索到的安全上下文中的信息。如果 Jersey 应用程序部署在 Grizzly 服务器上，SecurityContext 将返回从 Grizzly 请求中检索到的信息。

例子：

```
@Path("basket")
public ShoppingBasketResource get(@Context SecurityContext sc) {
    if (sc.isUserInRole("PreferredCustomer") {
        return new PreferredCustomerShoppingBasketResource();
    } else {
        return new ShoppingBasketResource();
    }
} 
```

或者

```
@Path("resource")
@Singleton
public static class MyResource {
    // Jersey will inject proxy of Security Context
    @Context
    SecurityContext securityContext;

    @GET
    public String getUserPrincipal() {
        return securityContext.getUserPrincipal().getName();
    }
} 
```

或者，如果您希望通过注释开箱即用地确保安全性，请查看[这些文档](https://jersey.java.net/documentation/latest/user-guide.html#annotation-based-security)。

Jersey 还允许您自定义 SecurityContext：

> SecurityContext 可以通过 getSecurityContext() 方法直接从 ContainerRequestContext 中获取。您还可以使用 setSecurityContext(SecurityContext) 方法将请求上下文中的默认 SecurityContext 替换为自定义的。如果您在 ContainerRequestFilter 中设置自定义 SecurityContext 实例，则此安全上下文实例将用于注入 JAX-RS 资源类字段。通过这种方式，您可以实现自定义身份验证过滤器，该过滤器可以设置您自己的要使用的 SecurityContext。要确保尽早执行您的自定义身份验证请求过滤器，请使用 Priorities 中的常量将过滤器优先级设置为 AUTHENTICATION。尽早执行您的身份验证过滤器将确保所有其他过滤器、资源、

请参阅[有关如何将请求过滤器与 Jersey 一起使用的示例](https://jersey.java.net/documentation/latest/filters-and-interceptors.html#d0e6547)。并检查我的以下示例：

```
import javax.annotation.Priority;
import javax.ws.rs.Priorities;

@Provider
@Priority(Priorities.AUTHENTICATION)
public class AuthRequestFilter implements ContainerRequestFilter {
    @Context
    HttpServletRequest webRequest;

    @Override
    public void filter(ContainerRequestContext requestContext) throws IOException {
        final HttpSession session = webRequest.getSession();

        requestContext.setSecurityContext(new SecurityContext() {
            @Override
            public Principal getUserPrincipal() {
                return new PrincipalImpl((String)session.getAttribute("USER_NAME"));
            }

            @Override
            public boolean isUserInRole(String s) {
                return false;
            }

            @Override
            public boolean isSecure() {
                return false;
            }

            @Override
            public String getAuthenticationScheme() {
                return null;
            }
        });
    }
} 
```

警告！[这是在 Jersey 2.4 中引入的](https://java.net/jira/browse/JERSEY-1960)。Glassfish 4.0.0 使用旧的 Jersey 2.0，因此您必须[使用这些技巧来升级 Jersey](https://jersey.java.net/documentation/1.17/glassfish.html)（尚未证明效果很好）。或者更好的方法是下载[Glassfish 4.0.1 的夜间版本](http://dlc.sun.com.edgesuite.net/glassfish/4.0.1/nightly/latest-glassfish.zip)。但目前还不是完全稳定。我希望新版本能尽快发布。

**更新：** 目前 (2014-02-14) Glassfish 4.0.1 nightly build 使用 Jersey 2.5.1 并且上下文注入效果很好。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-06-13T05:31:55.920

杰克关于会话的回答是正确的。它们特定于您在其中执行的容器，尽管 Servlet 规范至少为您提供了 JavaEE 容器之间的可移植性。

至于安全性，您至少有机会通过使用 JaaS（Java 身份验证和授权服务）和[servlet 过滤器](http://java.sun.com/products/servlet/Filters.html)将其与您的 JAX-RS 特定代码分开。该过滤器可用于强制执行 HTTP 身份验证，并且在成功的身份验证后，使用适当的 Principal 设置 JaaS 主题。您的 JAX-RS 资源可以检查主题上的适当主体。由于您控制整个堆栈，因此您应该能够依赖资源中经过身份验证的用户（但一定要对此进行测试！），并且您可以根据资源代码中的当前操作强制执行授权。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-11-07T16:11:48.257

我通过让客户端添加授权标头并在 REST 方法中对其进行测试来解决此问题，如下所示：

```
@GET
@PRODUCES(MediaType.APPLICATION_JSON)
public String returnClients(@Context HTTPServletRequest request(
    String auth = request.getHeader("Authorization");
    Account acc = null;
    if (auth!=null) {
       Account acc = Utils.LoginAccount(auth);
    }
    if (acc == null)
     // not logged in, handle it gracefully 
```

这样就可以在不启动会话的情况下进行身份验证。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2010-05-07T09:22:08.423

对于 Jersey 安全性，您应该查看 jersey OAuth 支持。当您将系统的 API 公开给外部用户时，OAuth 非常适合。例如像linkedin api

[http://wikis.oracle.com/display/Jersey/OAuth](http://wikis.oracle.com/display/Jersey/OAuth)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-09-17T08:40:27.493

您可以使用 @path 将服务分组到单个名称空间下。例子 。

```
@Path("/helloworld")
public class HelloWorld {

    @GET
    @Produces("text/plain")
    public String hello() {

        return "";

    }
}
```

```
Instead of @Path("/helloworld") use
@Path("admin/helloworld") to expose you class as rest and bind filter on "admin/"
in web.xml as below.

<servlet>
            <servlet-name>jersey-serlvet</servlet-name>
            <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
            <init-param>
                <param-name>com.sun.jersey.config.property.packages</param-name>
                <param-value>/</param-value>
            </init-param>
            <load-on-startup>1</load-on-startup>
        </servlet>
        <servlet-mapping>
            <servlet-name>jersey-serlvet</servlet-name>
            <url-pattern>/rest/*</url-pattern>
        </servlet-mapping>
         <filter>
            <filter-name>myfilter</filter-name>
            <filter-class>com.Filterclass</filter-class>
        </filter>
        <filter-mapping>
            <filter-name>myfilter</filter-name>
            <url-pattern>/rest/admin/*</url-pattern>
        </filter-mapping> 
```

```
 public class Filterclass implements Filter {
       public void doFilter(ServletRequest request, ServletResponse response,
                FilterChain chain)
                throws IOException, ServletException {
                  try{
                       chain.doFilter(request, response);
                    }catch(Exception e){
                   e.printStackTrace();
                       }
          }
    }
```

您可以在此过滤器类中验证您的会话。

# linux - 在用户空间模拟文件描述符

> ID：909189
> 
> 赞同：2
> 
> 时间：2009-05-26T06:30:29.140
> 
> 标签：linux, file-descriptor

我想在用户空间中实现一个类似套接字的对象。有一个重要的要求是它应该是可轮询的（即它的状态应该可以通过 select 或 poll 调用进行查询）。

是否有实现此类对象的平台中立方式？

我知道在 Linux 上有 eventfd 可以满足需求，除了没有办法强制它既不表示 POLLIN 也不表示 POLLOUT。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T04:25:09.277

您可以使用 socketpair() 创建一对连接的 AF_UNIX 套接字。这比 pipe() 更好，因为它允许双向通信。如果这还不足以满足您的需求，另一种选择（需要 root 用于守护进程）将使用 as-yet-not-in-mainline-Linux [CUSE](http://lkml.org/lkml/2009/4/13/369)补丁在用户空间中创建设备驱动程序来执行您的任何操作喜欢。或者您可以直接连接到您的用户将使用的任何事件循环...

新的 linux eventfd 也可以模拟 POLLIN/POLLOUT，尽管不能同时模拟两者 - 将其值设置为 0xffffffffffffffff 用于 POLLIN 但不是 POLLOUT，0 用于 POLLOUT 但不是 POLLIN，或者两者都设置为其他任何值。

除了这些选项之外，没有平台中立的方法可以做到这一点，不。通常的模式是使用 FIFO 来唤醒事件循环，并在唤醒后使用其他 API 进行轮询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T08:58:06.503

您想构建一个可以通过系统调用访问的用户空间对象？即打开、读取、写入等...被重定向到您的用户空间对象？

您需要内核支持或 libc 支持，否则我看不出如何重定向系统调用。

eventfd 不是您要的，它是在内核空间中实现的。你描述了你真正的问题吗？[fifo](http://www.manpagez.com/man/2/pipe/)或[unix 域套接字](http://en.wikipedia.org/wiki/Unix_domain_sockets)可以满足您的需要吗？

[伪 tty](http://man-wiki.net/index.php/7:pty)呢？我不知道你是否可以通过伪造硬件流控制来阻止从主端写入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T09:36:16.893

真的不清楚您要做什么。如果你想要一个类似套接字的设备，为什么不使用套接字呢？你不会说...... POLLIN 和 POLLOUT 是怎么回事？

我有点怀疑您可能对使用伪终端设备感兴趣，请参阅 man 7 pty。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-27T04:19:51.717

使用管道（）。它给你两个 fd，一个写，一个读。使用 fd[1] 进行选择/投票。
使用 fd[0] 表示您的选择/投票活动。

# php - 是否有处理 URL 参数添加、删除或替换的 PHP 库？

> ID：909193
> 
> 赞同：2
> 
> 时间：2009-05-26T06:32:28.870
> 
> 标签：php, url-rewriting

当我们向 URL 添加参数时

$redirectURL = $printPageURL 。“？模式=1”；

如果 $printPageURL 是“ [http://www.somesite.com/print.php](http://www.somesite.com/print.php) ”，它会起作用，但如果 $printPageURL 在全局文件中更改为“ [http://www.somesite.com/print.php?newUser= 1](http://www.somesite.com/print.php?newUser=1) "，则 URL 格式错误。如果项目有 300 个文件，并且有 30 个文件以这种方式附加参数，我们需要更改所有 30 个文件。

如果我们使用 "&mode=1" 追加并且 $printPageURL 从 " [http://www.somesite.com/print.php?new=1](http://www.somesite.com/print.php?new=1) " 更改为 " [http://www.somesite.com/print.php](http://www.somesite.com/print.php) "，那么 URL 的格式也很糟糕。

PHP中是否有一个库可以自动处理“？” 和“&”，甚至检查现有参数是否已经存在并删除该参数，因为它将被后面的参数替换，如果 URL 继续增长是不好的？

**更新：**在几个有用的答案中，似乎没有预先存在的函数 addParam($url, $newParam) 所以我们不需要编写它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-26T07:26:07.140

使用组合[`parse_url()`](http://de2.php.net/manual/en/function.parse-url.php)来展开 URL、[`parse_str()`](http://de2.php.net/parse_str)展开查询字符串和[`http_build_query()`](http://de2.php.net/manual/en/function.http-build-query.php)重建查询字符串。之后，您可以从您获得的原始片段`parse_url()`和您使用构建的新查询字符串重建整个 url `http_build_query()`。随着查询字符串被分解为关联数组（键值对），修改查询就像在 PHP 中修改数组一样简单。

**编辑**

```
$query = parse_url('http://www.somesite.com/print.php?mode=1&newUser=1', PHP_URL_QUERY);
// $query = "mode=1&newUser=1"
$params = array();
parse_str($query, $params);
/*
 * $params = array(
 *     'mode'    => '1'
 *     'newUser' => '1'
 * )
 */
unset($params['newUser']);
$params['mode'] = 2;
$params['done'] = 1;
$query = http_build_query($params);
// $query = "mode=2&done=1" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-26T07:07:41.577

用这个：

[http://hu.php.net/manual/en/function.http-build-query.php](http://hu.php.net/manual/en/function.http-build-query.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-26T06:36:48.563

[http://www.addedbytes.com/php/querystring-functions/](http://www.addedbytes.com/php/querystring-functions/) 是一个很好的起点

编辑：还有[http://www.php.net/manual/en/class.httpquerystring.php](http://www.php.net/manual/en/class.httpquerystring.php)

例如：

```
$http = new HttpQueryString();
$http->set(array('page' => 1, 'sort' => 'asc')); 
$url = "yourfile.php" . $http->toString(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-10-28T18:23:11.077

当 url 采用以下形式时，这些解决方案都不起作用： xyz.co.uk?param1=2&replace_this_param=2 param1 一直被丢弃.. 这意味着它永远不会起作用！

如果您查看上面给出的代码：

```
function addParam($url, $s) {
    return adjustParam($url, $s);
}

function delParam($url, $s) {
    return adjustParam($url, $s);           
} 
```

这些功能是相同的 - 那么如何一个添加和一个删除？！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-26T08:04:21.617

使用 WishCow 和 sgehrig 的建议，这是一个测试：

（假设 URL 没有锚点）

```
<?php

    echo "<pre>\n";

    function adjustParam($url, $s) {        
        if (preg_match('/(.*?)\?/', $url, $matches)) $urlWithoutParams = $matches[1];
        else $urlWithoutParams = $url;  

        parse_str(parse_url($url, PHP_URL_QUERY), $params);

        if (strpos($s, '=') !== false) {
            list($var, $value) = split('=', $s);
            $params[$var] = urldecode($value);
            return $urlWithoutParams . '?' . http_build_query($params);      
        } else {
            unset($params[$s]);
            $newQueryString = http_build_query($params);
            if ($newQueryString) return $urlWithoutParams . '?' . $newQueryString;      
            else return $urlWithoutParams;
        }

    }

    function addParam($url, $s) {
        return adjustParam($url, $s);
    }

    function delParam($url, $s) {
        return adjustParam($url, $s);       
    }

    echo "trying add:\n";

    echo addParam("http://www.somesite.com/print.php", "mode=3"), "\n";
    echo addParam("http://www.somesite.com/print.php?", "mode=3"), "\n"; 
    echo addParam("http://www.somesite.com/print.php?newUser=1", "mode=3"), "\n";
    echo addParam("http://www.somesite.com/print.php?newUser=1&fee=0", "mode=3"), "\n";
    echo addParam("http://www.somesite.com/print.php?newUser=1&fee=0&", "mode=3"), "\n";
    echo addParam("http://www.somesite.com/print.php?mode=1", "mode=3"), "\n";  

    echo "\n", "now trying delete:\n";

    echo delParam("http://www.somesite.com/print.php?mode=1", "mode"), "\n";   
    echo delParam("http://www.somesite.com/print.php?mode=1&newUser=1", "mode"), "\n";     
    echo delParam("http://www.somesite.com/print.php?mode=1&newUser=1", "newUser"), "\n";   

?> 
```

输出是：

```
trying add:
http://www.somesite.com/print.php?mode=3
http://www.somesite.com/print.php?mode=3
http://www.somesite.com/print.php?newUser=1&mode=3
http://www.somesite.com/print.php?newUser=1&fee=0&mode=3
http://www.somesite.com/print.php?newUser=1&fee=0&mode=3
http://www.somesite.com/print.php?mode=3

now trying delete:
http://www.somesite.com/print.php
http://www.somesite.com/print.php?newUser=1
http://www.somesite.com/print.php?mode=1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-09-06T14:07:22.150

你可以试试这个：

```
function removeParamFromUrl($query, $paramToRemove)
{
    $params = parse_url($query);
    if(isset($params['query']))
    {
        $queryParams = array();
        parse_str($params['query'], $queryParams);
        if(isset($queryParams[$paramToRemove])) unset($queryParams[$paramToRemove]);
        $params['query'] = http_build_query($queryParams);
    }
    $ret = $params['scheme'].'://'.$params['host'].$params['path'];
    if(isset($params['query']) && $params['query'] != '' ) $ret .= '?'.$params['query'];
    return $ret;
} 
```

# programming-languages - 对于概念，最重要的编程语言是什么？

> ID：909195
> 
> 赞同：23
> 
> 时间：2009-05-26T06:32:57.620
> 
> 标签：programming-languages

在您看来，程序员最需要了解的语言是什么？我说的是**概念**，而不是语言的实用性。

列出语言和原因。例如，用于函数式编程的 Lisp、用于基于原型的 OOP 的 JavaScript 等。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2009-05-26T06:53:12.400

**必须知道**：

1）C（系统编程，了解机器架构）

2) Perl 或 Python 或 Ruby（实际日常任务）

3) Java 或 C# 或 C++（OOP，现在找工作非常重要）

**真的很重要：**

1) Haskell 或 ML（函数式编程；改变你的思维方式）

2) Lisp 或 Scheme（宏的威力）

**不错的补充：**

1）Forth（非常底层的显式堆栈操作+编写自己的解释器的乐趣）

2）汇编语言（了解你的 CPU 是如何工作的）

3）Erlang（并行处理）

4）Prolog（逻辑编程）

5) Smalltalk（真正的 OOP 和真正的交互式开发者）

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2009-05-26T06:55:10.057

*   您可以学习尽可能多的芯片的**汇编语言**以获得低级知识。
*   **C**学习更多关于低级工作的实用知识，因为几乎所有语言都是用 C 实现的。
*   **C++**在 C的低级优点之上进行面向对象编程。
*   **Pascal**学习如何使用强类型。
*   **Java**看看如何保护自己免受低级问题的影响。
*   **Perl**学习正则表达式、弱/动态类型和其他好东西。
*   **Python**查看强/动态/鸭子类型。
*   **Ruby**来了解面向对象是如何在 Perl 式弱/动态类型之上工作的。
*   **Common Lisp**的功能启发。
*   **强调递归的**方案。****
***   **Emacs Lisp**，因此您可以扩展 Emacs。*   **Haskell**看到纯函数式编程做得正确。*   **APL**让您学习如何*不*编写代码。*   **COBOL**，因此您可以通过维护遗留代码来赚钱。*   **Erlang**真正了解并发。（感谢 Pete Kirkham 纠正我。）*   **Scala**用于 JVM 上的函数式编程。*   **Clojure**用于 JVM 上的类似 Lisp 的函数式语言。*   **Prolog**了解逻辑编程。*   **D**所以你可以明白为什么所有的 D 狂热分子总是如此亲 D。*   **C#**，因此您可以为 .NET（和 Mono）编程。*   **F#**，因此您可以在 .NET 上进行函数式编程。*   **Forth**用于基于堆栈的语言。*   **PHP**所以你可以看到如何*不*创建语言。（开个玩笑。学习 PHP，因为它对 Web 开发非常有用。）*   **JavaScript**，因为它基本上是客户端 Web 脚本*的语言。**   **bash**是一种好的通用脚本语言。*   **Visual Basic**，因此您可以阅读老板编写的代码。=)*   **INTERCAL**表示“乐趣”。*   **脑残**，这样你就可以折磨你的朋友了。*   **LOLCODE**，这样你就可以说服他们在你让他们脑残之后仍然是你的朋友。**

 **...等等。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-05-26T06:42:07.713

C 用于了解大多数其他语言（实现）和操作系统是如何实现的

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-27T02:28:18.270

我认为最能结合实用性和编程概念覆盖面的三种语言是

*   C
*   Python
*   Javascript

从这些语言中，您可以学习低级系统编程、指针和内存管理、静态类型、动态类型、高级脚本、事件驱动编程、OO 编程、函数式编程。

显然，您不会像使用 Haskell 那样对函数式编程进行纯粹的介绍，但是您可以在 Python 和（尤其是）Javascript 中学习很多概念。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-26T06:57:53.797

您应该知道的不是语言，而是范式：

*   程序性（如 C、Pascal）
*   面向对象（如 Java、C++、Smalltalk）
*   函数式（如 Lisp、ML、Scala）

如果你用一种语言理解了其中一种范式，就很容易用相同的范式学习另一种语言。并且还有更多的领域需要理解的语言特别支持：

*   并行性（在 Erlang 或 Scala 中）
*   声明性模板（例如在 C++ 或 Prolog 中）
*   动态语言（例如 JavaScript）

最后，你应该总是知道引擎盖下发生了什么，所以你最好看看汇编程序。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-26T06:55:05.690

我会说：

*   C 或汇编程序以了解处理器的工作原理。
*   Smalltalk（或 C#、Java、Python、Ruby 等）了解面向对象编程。
*   Lisp（任何 Lisp、Scheme、Common Lisp、Clojure）了解高级编程、元编程（宏）等。
*   Haskell 了解类型推断和其他功能概念。

如果你喜欢分布式系统，我也会考虑学习 Erlang。这些是我推荐学习的语言，即使只是表面的，只是为了学习，即使你从未使用它们来编写真正的应用程序。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-05-26T06:56:52.503

最好了解各种。这使您对编程艺术有更好的整体看法，此外，您还可以选择最适合工作的工具。

我目前的清单是：-

*   C - 靠近机器编程。
*   Python——程序员的必杀技。
*   Perl - 当 s**t 发生时。
*   Java - 因为它会让你继续工作。
*   C# - 因为它会让你继续工作。
*   lisp、scheme 或其他功能可以让你的大脑摆脱常规。
*   SQL - 用于管理大型数据集。
*   JCL、COBOL、VAX DCL、CShell VB - 只是提醒您事情可能有多糟糕！

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-27T02:40:17.327

一个很好的**短名单**：

1.  C 用于机器概念
2.  Haskell 用于函数式编程
3.  面向对象编程的 Smalltalk（或者可能是 Ruby 或 Simula-67）
4.  Prolog 用于逻辑编程
5.  用于回溯和令人兴奋的字符串处理的图标
6.  用于 Unix 脚本的 Bourne shell

可能还包括

7.  宏方案
8.  用于正则表达式的 awk 或 Perl 或 ...
9.  FORTH 用于小型引导后缀的美妙之处:-)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-26T06:40:27.467

对于概念，我会选择汇编程序和 Java。

第一个是因为您应该详细了解机器的工作原理。

第二个是因为您应该了解如何保护自己免受机器工作方式的私密细节的影响:-)。我的意思是一种手头有一组丰富数据结构的语言（所以真正的 Java 可以是 Python、带有 Boost 的 C++ 等等）。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-26T06:49:06.480

好。我会说学习C和javascript。它们是使用最广泛的语言。

您可能想学习 Java/一些 .Net 语言和/或 python/ruby：它们更方便。

这样做的好处是所有这些语言都设计得相当好。例如，不要学习 PHP 或 C++，因为它们一团糟。它们被广泛使用，你可能有一天想学习它们，但它们会严重扰乱你的思维。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-05-26T09:36:04.460

[Limbo](http://www.vitanuova.com/inferno/papers/limbo.html) - 一种具有并发和通道的编程语言，C 应该演变成的。（另见[D](http://www.digitalmars.com/d/)，另一个 C 继任者）

似乎没有人提到任何声明性语言，所以这里有一些：

[Prolog](http://en.wikipedia.org/wiki/Prolog) - 一种用于逻辑编程的声明性语言

[Modelica](http://www.modelica.org/) - 一种用于建模系统的声明性 OO 语言。

[XSLT](http://www.w3.org/TR/xslt) - 一种用于转换 XML 的声明性语言。

对于并行性，你不会比[着色器语言](http://www.opengl.org/documentation/glsl/)和相关的[OpenCL](http://www.khronos.org/opencl/)更广泛- 通常在高端桌面上并行 512 个处理器，而不是 Erlang 的 4 个并行处理器（尽管有许多预定的进程）。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-05-27T17:36:42.790

这是一个很好的问题。我知道很多人，包括我自己，都陷入了一种陈规陋习，我们只是在大量编写代码，就像在麦当劳生产汉堡一样。编码变得过于机械化——我们知道如何完成工作，但我们常常忘记为什么这些事情要在幕后完成。

在我的世界里，教给我最多的还是 C++/C/ObjectiveC，尽管我每天都在工作中编写 C#。

在大多数情况下，学习 C++ 帮助我了解了内存管理以及各种对象如何存储在内存中等等——编程的实际科学。真正让我大开眼界的是斯坦福大学提供的编程范式课程，你可以从 iTunes 和 YouTube 上下来。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-05-26T06:40:38.667

您已经提到了两个，这里还有一些：

*   Java：Java 是 OOP 的一个很好的例子，因为你必须使用 oop，而且它从一开始就被设计成一种 OOP 语言。
*   BASIC：虽然已经过时，但它是过程语言的一个很好的例子，并且语法非常简单。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-26T06:42:09.663

用于读/写文档的伪代码。:p

我认为了解 C/C++ 或任何其他低级语言将帮助您了解托管/脚本语言如何工作的影响。例如指针将揭开变量引用的神秘面纱。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-05-26T06:46:10.607

对于网络编程：PHP、ANSI-SQL、javascript。

有些人可能会争辩说 HTML 和 CSS 不是编程语言。但它们对于 Web 应用程序开发至关重要。

* * *

对于桌面应用程序开发，使用 Qt 框架的 C++。Qt 为 C++ 提供了额外的“跨平台”功能。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-05-26T06:47:46.780

Pascal 或 Basic 用于入门和掌握过程编程的基础知识。

在学校，我们学习了 Haskel 的函数式编程。

然后应该尝试使用汇编程序或 C 来获得深度，并尝试使用 Java 来进行 OOP。

A 对此没有任何争论 - 这只是我的品味和我尝试过的。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-05-26T06:52:37.987

我会坐在 C/C++ 上，因为它为世界各地使用的其他语言设置了基础知识。

就我个人而言，我学习了 Java/JavaScript->VB（幸运的是短期课程）->C#->C++，除此之外还有一点 PHP 和 Perl。该行最好的部分是 C#，然后在 C++ 中移动。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-05-26T06:59:19.923

寻找一组*不同*的编程语言：

*   C++ / C# / Java 等
*   C / 汇编程序
*   Python、Ruby、Lua、Perl 等
*   sh、awk、sed、正则表达式
*   Prolog（或类似的）
*   Haskell / Lisp 等

您选择哪个并不重要，而是您从每个“类别”中选择一个。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2009-05-26T07:02:16.143

您应该了解一种脚本语言，以便您可以更快地制作应用程序原型。

也许是 python/ruby/perl 。如果您是一个喜欢他的 java 库的 Java 人，Groovy 也是一个替代方案。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2009-05-26T07:08:13.290

如果您想**了解**计算机和底层硬件，**C**是最重要的语言，通常被称为计算机的[通用语言](http://en.wikipedia.org/wiki/Lingua_franca)。[Stackoverflow](https://blog.stackoverflow.com/2009/02/podcast-42/)播客倾向于每周[至少报道](https://blog.stackoverflow.com/2009/04/podcast-51/) [一次](https://blog.stackoverflow.com/2009/04/podcast-48/)。

对此似乎有足够的答案，所以我就这样吧。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2009-05-26T07:49:28.183

已经提到了很多，但出于以下原因，我肯定会添加 C++（已经完成）：

**C++**用于**学习如何使用指针**并了解它们的主要思想。

尽管存在讨论是否 c++ 仍然是“更好”的语言（一切都取决于您真正想要做什么），但理解指针永远不会有坏处，以防万一您确实需要它们。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2009-05-26T07:58:36.030

到目前为止，我对答案进行了扫描，我很惊讶我没有看到任何关于 actionscript 的提及。

我认为如果你学习了一些 C/C++，然后是一些 Java，那么你应该为几乎所有的体面语言做好准备。我更喜欢看到我的代码在运行，我发现 Actionscript 3（不是 2 或 1）以及 Flex（它是 MXML）非常适合快速演示视觉概念。

所以 C & Java 有助于学习大多数语言的语法。Actionscript 3（非常类似于 java 语法）和 MXML 能够非常快速地直观地表达您的代码。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2009-05-28T03:38:01.670

C - 低级系统编程以及了解有关如何处理内存、堆栈、堆栈帧、堆等的通用概念。这些有助于理解高级语言

C++ - 主要是标准库（通用算法和容器的分离）、模板、命名空间，但也有 OO 概念。模板元编程将为您提供完全不同的软件编写视角，这是编译时执行与运行时执行。模板继承（静态与动态多态性）。

Python - 动态类型系统，列表理解 - 函数式编程（？），开发人员没有内存管理，缩进空间

Objective-C - 消息分派（可以分派到 nil）、动态类型系统（也可以是静态的）、后期绑定、OO 概念

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2009-06-03T03:20:52.580

这听起来可能很疯狂，但我首先学会了为 Windows 编写 VBScript 宏。我使用了一个模板，可在此处获得[http://vbscript-macro-template.blogspot.com/](http://vbscript-macro-template.blogspot.com/)我刚刚添加到它并试图理解它所做的一切。现在，几年后，我正在编写自己的桌面和数据库应用程序。

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2009-05-26T06:48:27.217

你应该从 C 开始，通过 C++、Java 和 goto WinForms，然后最好转到 .NET

# django - django 内联问题

> ID：909217
> 
> 赞同：0
> 
> 时间：2009-05-26T06:39:48.137
> 
> 标签：django, django-models, django-admin, django-forms

我做了一个名为 Fooinline 的内联。这个内联在 Django 1.02 中运行良好，但是一旦我升级到 Django 1.1，它就开始出现错误：

```
**TypeError at /admin/casd/aaas/4028cb901dd9720a011deadd85e8007f/
__init__() got an unexpected keyword argument 'request'** 
```

我的`Fooinline`代码是：

```
class FooInline(InlineModelAdmin):

 template = 'admin/edit_inline/tabular2.html'

 def formfield_for_dbfield(self,db_field, **kwargs):
#    if isinstance(db_field, (models.ForeignKey, models.ManyToManyField)):
#        BaseModelAdmin.formfield_for_dbfield(self, db_field, **kwargs)
#    else:
     kwargs['widget'] = FlatTextWidget
     return db_field.formfield(**kwargs) 
```

而我`FlatTextWidget`的是

```
class FlatTextWidget(HiddenInput):
 def __init__(self, attrs=None):
     if attrs is not None:
         self.attrs = attrs.copy()
         super(Widget, self).__init__(attrs)
     else:
         self.attrs = {}
         super(Widget, self).__init__()

def render(self, name, value, attrs=None):
    real_field = super(HiddenInput, self).render(name, value, attrs)
    x = value
    if x is None:
        x = ''
    return mark_safe( '%s%s' % (real_field, x) )

def _has_changed(self, initial, data):
    return False 
```

我称我`Fooinline`为

```
 class XYZInline(Fooinline):
    model=XYZ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T09:53:18.937

错误在您的`formfield_for_dbfield`中，应为：

```
def formfield_for_dbfield(self, db_field, **kwargs):
    kwargs['widget'] = FlatTextWidget
    return super(FooInline, self).formfield_for_dbfield(db_field,**kwargs) 
```

看看[contrib/admin/options.py#L71中的原始函数](http://code.djangoproject.com/browser/django/trunk/django/contrib/admin/options.py#L71)

# svn - 如何将 vss 存储库中的链接文件迁移到 svn 存储库

> ID：909218
> 
> 赞同：4
> 
> 时间：2009-05-26T06:40:00.213
> 
> 标签：svn, migration, visual-sourcesafe

如何将 vss 存储库中的链接文件迁移到 svn 存储库

# asp.net - 如何在 SQL 表中引用成员资格提供者用户？

> ID：909219
> 
> 赞同：0
> 
> 时间：2009-05-26T06:40:23.783
> 
> 标签：asp.net, membership-provider

当我创建 SQL 表并想在 ASP.NET 中引用成员资格提供者用户时，我使用什么类型的字段以及如何从用户那里获取值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-26T07:02:00.497

在 SQL Server 中，您将使用 UNIQUEIDENTIFIER 作为列类型并将其映射到**[dbo].[aspnet_Users].[UserId]**。这是假设您在 ASP.Net 应用程序中使用默认的 SqlMembership。要在 C# 中获取登录用户的 UserId，您可以使用：

```
MembershipUser mu = Membership.GetUser();  // This gets the CURRENTLY logged in user.
MembershipUser mu = Membership.GetUser("username");  // This gets the user with username username.
// Obviously you'd use only one of the above 2 lines, otherwise you'd get an error about mu being declared twice.
Guid currentUserId = (Guid)mu.ProviderUserKey; 
```

# tfs - 创建团队项目后如何确定 Team Foundation Server 中使用的流程模板

> ID：909223
> 
> 赞同：24
> 
> 时间：2009-05-26T06:41:02.143
> 
> 标签：tfs, tfs-process-template

我正在寻找一种方法来确定团队项目创建后使用的流程模板。我现在只能通过查看工作项类型来猜测。我在 Visual Studio 中找不到任何选项来检索此信息。我需要知道哪些流程模板用于不是我自己创建的团队项目。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-11-16T12:02:49.747

如果您检查您的工作项类型：

*   Scrum = 产品待办事项
*   敏捷 = 用户故事
*   CMMI = 要求

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-27T05:19:47.997

对于 TFS 2010 和 TFS 2012，您可以按照以下流程确定团队项目使用的流程模板：

1.  前往团队资源管理器；
2.  打开文档文件夹；
3.  过程指导；
4.  打开 ProcessGuidance.html，这将打开您的团队项目所基于的特定流程模板文档。

参考[线程](http://social.msdn.microsoft.com/Forums/en-US/tfsprocess/thread/eff17d27-b24f-4176-8721-26178d4e9084)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2010-11-12T18:46:47.907

没有办法说，一般来说。如果您创建（或编辑）流程模板，您可以将标识符放入属性中，然后您将能够跟踪哪些项目有*您的*模板

为此：编辑 Classification\Classification.xml 添加一个节点：tasks/task/taskXml/properties/property，如下所示：

`<property name="templateName" value="myTemplate_1.0.1" />`

使用此模板创建项目后，在对象模型中，您将能够从项目中提取此信息：

```
TfsTeamProjectCollection c = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(myuri);
WorkItemStore wis = tpc.GetService();
ICommonStructureService ICss = tpc.GetService();

foreach (Project p in wis.Projects)
{
  string ProjectName = string.Empty;
  string ProjectState = String.Empty;
  int templateId = 0;
  ProjectProperty[] ProjectProperties = null;
  ICss.GetProjectProperties(p.Uri.ToString(), out ProjectName, out ProjectState, out templateId, out ProjectProperties);
  Console.WriteLine("Project: {0}\tTemplate: {1}", ProjectName, ProjectProperties.Where(n => n.Name == "templateName").FirstOrDefault().Value);
}
```

templateId 始终为 -1，所以不要认为这会对您有所帮助。

另外 - 如果您有权，我建议将此属性添加到您集合中的所有模板（甚至是默认模板）中，以便您能够跟踪所有未来项目的模板。不知道他们为什么不把它放在默认模板中。（如果有足够多的人抱怨，也许他们会）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-29T10:59:08.243

我找到了另一种解决方法：在 SharePoint 管理中心中，您可以在网站集列表中看到描述所使用的流程模板的注释。我实际上是在寻找一种通过 TFS API 以编程方式检索它的方法，但找不到它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T18:18:59.670

使用 witadmin，您可以列出项目中的工作项类型。参数为 TPC url ，`/collection`/p 参数为项目名称。这是一个例子（下）。如果您知道特定于流程模板的工作项类型的名称，那么您就知道正在使用哪个流程模板。

我的测试 TFS 的命令控制台输出：

```
D:\Program Files\Microsoft Team Foundation Server 2010\Tools>witadmin listwitd /collection:http://suluserver:8080/tfs/De
faultCollection /p:"First Team Project"
Bug
Shared Steps
Task
Test Case
User Story
Issue
Risk
User Scenario
Risk-Issue 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-04T00:46:56.927

对于 Visual Studio Online，请转到您的收藏配置文件页面。您可以查看集合中的所有项目，包括流程模板信息。

收藏页面的 URL 格式应为： [https://[accountname].visualstudio.com/[collectionname]/_admin](https://[accountname].visualstudio.com/[collectionname]/_admin)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-12-06T17:20:00.307

这绝对是晚了，但这里有几个我在搜索时发现的不同资源：

1.  如果您有权访问 TFS 数据库：[确定流程模板 SQL](https://blogs.msdn.microsoft.com/dstfs/2013/09/27/determining-process-template-of-an-existing-team-project-in-tfs-2012/#comment-2183)
2.  开源 WinForms 应用程序：[https ://github.com/renevanosnabrugge/TFS-ProcessTemplateVersionCheck](https://github.com/renevanosnabrugge/TFS-ProcessTemplateVersionCheck)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-28T04:06:25.823

我不知道找出这个问题的防故障方法。

我会推荐以下内容：有一个名为 witexport.exe 的 exe 可以导出工作项的 xml。然后，您可以查看 xml 以查看使用了哪种模板。（即如果使用 conchango 模板，您将看到对它的引用。）

要运行它，请启动 VS 命令行提示符（在开始菜单中）。这是一个示例运行：

witexport /f "C:\Type.xml" /t "http:\MyServer:8080" /p MyProject /n "Sprint BackLog Item"

# ruby-on-rails - 对 Rails 应用程序的第一次请求非常慢

> ID：909225
> 
> 赞同：5
> 
> 时间：2009-05-26T06:41:29.897
> 
> 标签：ruby-on-rails, http, mongrel

我的 Rails 应用程序的第一个（工作会话）请求总是滞后的。切换到生产模式没有帮助。

我使用 mongrel，其他请求以可接受的速度处理。

我怎样才能让它更快？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T11:30:56.490

如果您在处理第一个请求时发布日志的内容，那么也许我们可以弄清楚是什么让它如此缓慢。例如，这是我的第一个用户访问该站点时的日志

```
Booting Mongrel (use 'script/server webrick' to force WEBrick)    
Rails 2.1.0 application starting on http://0.0.0.0:3000    
Debugger enabled    
Call with -d to detach    
Ctrl-C to shutdown server
** Starting Mongrel listening at 0.0.0.0:3000
** Starting Rails with development environment...
/usr/lib/ruby/gems/1.8/gems/actionpack-2.1.0/lib/action_controller/mime_type.rb:66: warning: already initialized constant CSV
** Rails loaded.
** Loading any Rails specific GemPlugins
** Signals ready.  TERM => stop.  USR2 => restart.  INT => stop (no restart).
** Rails signals registered.  HUP => reload (without restart).  It might not work well.
** Mongrel 1.1.5 available at 0.0.0.0:3000
** Use CTRL-C to stop.

Processing SessionsController#new (for 127.0.0.1 at 2009-05-26 12:26:00) [GET]
  Session ID: de2acf074759026e1ed6205724f547a9
  Parameters: {"action"=>"new", "controller"=>"sessions"}
Rendering sessions/new
Completed in 0.00587 (170 reqs/sec) | Rendering: 0.00298 (50%) | DB: 0.00092 (15%) | 200 OK [http://localhost/] 
```

我认为 170 reqs/sec 对我们的应用程序来说很好，但其他人可能会觉得很慢。从统计数据中可以看出，rails 提供了一半所需的时间用于呈现响应——在本例中为登录屏幕生成 HTML。如果这个请求需要很长时间，我的第一个调用端口将是与登录屏幕关联的视图和助手。

如果您确实有一个系统需要很长时间才能在第一个请求上进行自我初始化，那么为什么不偷偷摸摸地编写自己的启动程序，该程序首先运行 rails，然后通过 curl 发送虚假请求。这样你的用户就永远不会看到问题。

克里斯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-27T10:57:49.273

可能是因为您是：

*   需要并加载许多插件和 gem

*   与外部服务建立连接（然后缓存）

*   缓存您自己的页面，并且仅在第一个请求之后发生，除非您“加热”缓存

其中任何一个都将不可避免地增加第一个请求的响应时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-26T06:48:36.390

这可能与我们第一次在 Websphere 中启动应用程序需要很长时间的原因相同。

在安装新版本的应用程序（或重新启动 WAS）时，WAS 必须做很多初始工作来设置容器。

我们使用的解决方法是修改安装脚本和 WAS 启动脚本，以便它们在运行时自动浏览到应用程序（主页和选择的其他页面）。这样，第一次真正访问它是全速的。

我不知道如何用 Ruby 做到这一点，甚至不知道它是否可能。你必须弄清楚那个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-26T15:13:46.773

我猜您正在使用 Ferret 进行全文搜索？可能是雪貂连接需要一段时间才能初始化？当我检查您的日志时，似乎数据库和视图都需要正常的时间，但总时间仍然是 10 秒。所以我一定是别的东西，这就是为什么我猜测雪貂可能是问题所在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-10-03T18:17:51.453

也许您需要调整`PassengerPoolIdleTime`apache conf 中的 var。将其设置为 0 以永不停止您的 rails 进程。

# matlab - Matlab 编译器运行库

> ID：909234
> 
> 赞同：4
> 
> 时间：2009-05-26T06:45:40.153
> 
> 标签：matlab, licensing, matlab-compiler

我已经在 Matlab 中的 m 文件脚本上开发了代码，该脚本与测量计算 USB-DAQ 模块通信，我对此非常满意。问题是我不想为运行代码的计算机购买另一个许可证。我研究了[Matlab 编译器运行时工具](http://www.mathworks.com/products/compiler/)，它声称我可以部署我的 mcc 构建的可执行文件是免版税的。这是否意味着我可以在运行最终产品的主机上安装 MCRInstaller（从安装 Matlab 的计算机复制）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-26T08:38:33.843

是的。您在将运行由 Matlab 编译器生成的可执行文件的主机上安装 Matlab 编译器运行时 (MCR)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-09T08:13:57.077

是的，您可以安装 MCR 并使用部署工具轻松创建包含您需要的所有文件的软件包。

# jquery - 使用 jQuery 隐藏/显示表格列

> ID：909239
> 
> 赞同：1
> 
> 时间：2009-05-26T06:48:21.023
> 
> 标签：jquery, html, magento

我目前正在开发一个新的 Magento 模板，并且遇到了 jQuery 的问题。

我当前的 app/design/frontend/default/blank/template/catalog/product/list.phtml 代码类似于以下内容（该页面托管在此处： http://nordschleife.metaforix.net/118/118/index.html [。 php/松下.html](http://nordschleife.metaforix.net/118/118/index.php/panasonic.html) )

```
<table border="1">
  <tr>
    <th width="178">Image</th>
    <th width="84">Order Code</th>
    <th width="84">Description</th>
    <th width="69">Cell Origin</th>
    <th width="98">Capacity (mAh)</th>
    <th width="110"><p>Price</p>
      <p><?php echo $this->getChildHtml('currency2'); ?></p></th>
    <th width="39">Buy</th>
    <th width="131">Cell(s)</th>
    <th width="52">Voltage</th>
    <th width="49">Rating (Wh)</th>
    <th width="71">Part Number</th>
    <th id="chem" width="69">Chemistry</th>
    <th width="82"><p>Dimensions</p>
      <p>(LxWxH)</p></th>
    <th width="52">Weight (g)</th>
    <th width="37">Color</th>
  </tr>
   <?php $_iterator = 0; ?>
    <ol class="products-list" id="products-list">
    <?php foreach ($_productCollection as $_product): ?>
        <tr> 
        <td>
          <?php // Product Image ?>        
    </td>
         <td>
        <?php echo nl2br($_product->getSku()) ?>
         </td>
         <td>
            <?php // Product description ?>           
         </td>
         <td>
            <?php echo $_product->getAttributeText('country') ?>
         </td>
         <td>
            <?php echo $_product->getcapacity() ?>
         </td>
         <td>
            <?php echo $this->getPriceHtml($_product, true) ?>
         </td>
         <td>
            <?php //add to cart ?>
         </td>
         <td>
            <?php echo $_product->getcells() ?>
         </td>
         <td>
            <?php echo $_product->getvoltage() ?>
         </td>
         <td>
            <?php echo $_product->getrating() ?>
         </td>
         <td>
            <?php echo $_product->getmfgpartno(); ?>
         </td>
         <td>
            <?php //chemistry ?>
         </td>
         <td>
            <?php echo nl2br ($_product->getdimension()) ?>
         </td>
         <td>
            <?php echo (int)$_product->getweight() ?>
         </td>
         <td>
            <?php echo $_product->getAttributeText('color') ?>
         </td>
         </tr>       
        </div>
<?php endforeach; ?>
</table> 
```

我想使用 jQuery 在页面上有一个文本，允许用户单击并显示/隐藏表格的最后 5 列。

我已经将它放在文件中（想先尝试隐藏 1 列），但显然它不起作用：

```
<script type="text/javascript">
    function show() {
        jQuery(".chem").show();
    }
    function hide() {
         jQuery(".chem").hide();
     }
 </script>
<p><div>
jQuery
<span onclick="show() ">(More)</span>
<span onclick="hide() ">(Hide)</span> </div></p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-26T07:05:29.397

您可以使用 td/th 索引隐藏列：

```
$('#tableId td:nth-child(3), #tableId th:nth-child(3)').hide(); 
```

# xml - 美国在线联系人 API

> ID：909248
> 
> 赞同：0
> 
> 时间：2009-05-26T06:51:25.417
> 
> 标签：xml, api

Aol 联系人 API。您好，任何人都可以告诉我如何获取完整的联系人通讯录（包括好友姓名、电话号码、电子邮件等）。在使用 curl 使用以下查询时，我得到了这类信息：

## 询问：-

$aimStartUrl = " [http://api.oscar.aol.com/presence/get?f=xml&bl=1&k=](http://api.oscar.aol.com/presence/get?f=xml&bl=1&k=) ".$devId."&a=". urlencode($authToken);

## 得到结果：-

```
<groups>
 <group>
  <name>picopico</name>
  <buddies>
    <buddy>
     <aimId>mundufive</aimId>
     <displayId>mundufive</displayId>
     <state>offline</state>
     <userType>aim</userType>
     <presenceIcon>http://o.aolcdn.com/aim/img/offline.gif</presenceIcon>
   </buddy>
 </buddies>
</group> 
```

## 预期结果：-

完整的 xml（包括好友姓名、电话号码、电子邮件等）

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-26T06:52:46.847

签[出 XML-Parser](http://search.cpan.org/perldoc?XML::Parser "XML解析器") Perl 模块。

# architecture - DDD，反腐败层，如何做？

> ID：909264
> 
> 赞同：39
> 
> 时间：2009-05-26T06:56:47.590
> 
> 标签：architecture, domain-driven-design, rewrite, legacy

目前，我们必须构建一个基于遗留应用程序的应用程序。旧应用程序的代码应该被丢弃并重写，但通常情况下 - 我们不需要重写它，而是需要在它的基础上添加一些新的东西。最近，我们决定走 DomainDrivenDesign 路径。所以——反腐败层可以解决我们的问题。据我了解，这种方式应该可以逐步重写旧应用程序。

但是——我找不到任何好的例子。我将不胜感激**任何**信息。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-05-26T07:04:14.500

来自Eric Evans**的** [DDD 书（领域驱动设计：解决软件核心的复杂性） ：](https://rads.stackoverflow.com/amzn/click/com/0321125215)

> ANTICORRUPTION LAYER 的公共接口通常以一组服务的形式出现，尽管有时它可以采用实体的形式。

稍后

> 组织 ANTICORRUPTION LAYER 设计的一种方法是结合 FACADE、ADAPTERS（均来自 Gamma 等人 1995）和转换器，以及通常需要在系统之间进行通信的通信和传输机制。

因此，您可以通过查看建议的[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)和[外观模式](http://en.wikipedia.org/wiki/Facade_pattern)来找到示例。

我将尝试解释 Eric Evans 所说的话，您的反腐败层将作为服务出现在您的层之外。因此，在反腐败层之外，其他层将不知道他们正在与反腐败层“说话”。在该层内部，您将使用适配器和外观来包装您的遗留信息源。

有关反腐败层的更多信息：

*   [反腐败层剖析，第 1 部分](http://moffdub.wordpress.com/2008/09/21/anatomy-of-an-anti-corruption-layer-part-1/)
*   [构建经常需要的反腐败层](http://lostechies.com/joeybeninghove/2007/09/10/building-the-often-needed-anti-corruption-layer/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-05-27T15:59:17.900

在我的特定实现中，EmployeeAccessService 由存储库调用。它实际上是反腐败层的一个门面。它委托给 EmployeeAccessAdapter。适配器从遗留模型中获取一个对象（它从 EmployeeAccessFacade 获得），然后将其传递给 EmployeeAccessTranslator 以将对象从遗留模型转换为我的应用程序模型中的域对象。

**员工访问服务**

```
public Employee findEmployee(String empID){
    return adapter.findEmployee(empID);
} 
```

**员工访问适配器**

```
public Employee findEmployee(String empID){
    EmployeeAccessContainer container = facade.findEmployeeAccess(empID);
    return translator.translate(container);
} 
```

**员工访问翻译**

```
public Employee translate(EmployeeAccessContainer container){
    Employee emp = null;
    if (container != null) {
        employee = new Employee();
        employee.setEmpID(idPrefix + container.getEmployeeDTO().getEmpID());
        ...(more complex mappings) 
```

# sql - SQL 外键约束不允许关系

> ID：909267
> 
> 赞同：1
> 
> 时间：2009-05-26T06:57:31.487
> 
> 标签：sql

我会直奔主题。我正在现有数据库上建立一个网站，该数据库没有保持一致的关系。我现在正在尝试添加关系来解决这个一致性问题。

简化：我有一个库存项目表、位置表和一个零件表。

stock items 表使用可以在其他表中找到的 ID（外键）。此表使用多个列作为主键（包括 locationid 和 partnr + 其他一些） 我成功地在 stock items 表中的 Location ID 和 locations 表之间添加了关系。当我尝试添加库存项目表和零件表之间的关系时，会出现问题：

ALTER TABLE 语句与 FOREIGN KEY 约束（在parts 表、partnumber 表中）冲突。

我检查了约束，但没有。我试图寻找对不存在的部分的引用，但我可能写了一个错误的查询......

谁能帮我弄清楚如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T07:04:26.683

是的，听起来你写了一个错误的查询，并且引用了不存在的部分。

SELECT partnumberid, (其他字段)
FROM stockitems
WHERE partnumberid NOT IN (SELECT partnumberid FROM parts)

或者

SELECT partnumberid, (otherfields)
FROM stockitems si
LEFT JOIN parts p ON si.partnumberid = p.partnumberid
WHERE p.partnumberid IS NULL

# java - JAVA jar 执行问题

> ID：909271
> 
> 赞同：0
> 
> 时间：2009-05-26T06:58:59.533
> 
> 标签：java, ide, executable-jar

当我在 jidea ide 中执行应用程序时，它执行得很好。但是当我双击 jar 文件时，它显示 gui 很好，然后我单击一个按钮，该按钮必须创建一些对象，但只创建一些对象，在该操作中调用某些构造函数不会调用。但是当这在 ide 中完成时，所有的构造函数都被调用了！！！

这种行为的原因是什么？我会怎么做才能解决这种不同的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T07:04:11.880

您可能在您创建的 jar 中缺少一些类。检查 IDE 项目中的类路径并与系统类路径进行比较。两者之间的任何差异都需要包含在您的 jar（或您的 jar-classpath）中。

# .net - 我应该如何为 Sharepoint 的 .Net 开发创造良好的环境？

> ID：909274
> 
> 赞同：7
> 
> 时间：2009-05-26T06:59:52.497
> 
> 标签：.net, sharepoint, installation, development-environment

我的公司已经使用外部公司进行所有软件开发和基础设施，但现在我们想将其转移到内部。该公司在适用的情况下使用 Microsoft 产品来标准化环境。Sharepoint 将用作管理人员、销售人员等所需的所有工具的门户。Sharepoint 在一台服务器上运行，我们的数据库在另一台服务器上运行。他们都位于国外。现在的问题：

我怎样才能为开发和测试我们的软件建立一个良好的环境。即定制Web 部件、集成外部Web 服务等？

如何配备一个好的开发/测试服务器（硬件和软件）？

购买功能强大的服务器还是购买运行我们服务器虚拟副本的设备更好的工作站更好？

你的公司是如何解决这个问题的，你会改变你的设置吗？

关于马库斯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-26T08:01:15.697

我个人使用并推荐一个包含 SQL Server、MOSS 2007 和 Visual Studio 在内的所有内容的虚拟机。团队中的每个开发人员都应该拥有自己的副本。一台具有足够内存的优质笔记本电脑确实可以托管这样的虚拟机 - 但我更喜欢在托管它的服务器机房中拥有一台高端服务器，因为这简直就是摇滚。对于开发，您只需将桌面远程连接到虚拟服务器。

Eli Robillard 有一篇关于配置开发服务器的好[博文。](http://weblogs.asp.net/erobillard/archive/2007/02/23/build-a-sharepoint-development-machine.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-26T11:29:38.223

除了 Lars 所说的，我还建议您设置以下环境

1.  构建 - 使用持续集成按设定的时间表编译您的应用程序。我还建议您在构建过程中运行单元测试和冒烟测试，以使您的构建保持在已知状态
2.  集成测试 - 将其用作开发团队的沙箱，以确保所有组件的行为正确。把它想象成一个迷你制作。我建议至少每天一次将构建推送到这个环境，或者如果你真的能够从构建环境中进行每一个好的构建。
3.  QA - 这是一个供您的 QA 人员使用的专用沙箱。只有在功能准备好进行 QA 时，才应在此处推送构建。
4.  预生产/UAT - 这是 SharePoint 管理员和客户的专用沙箱。在这里，SharePoint 管理员测试部署，客户测试新功能并在生产前提供最终验收。这个环境应该被虚拟化，看起来与生产环境完全一样。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-26T11:45:44.947

我现在做 MOSS 开发，我目前使用的设置包括一个 Windows Server 2008 Standard 系统（以前是 VM，现在是物理机，但我没有个人偏好）：

*   Visual Studio 2008 标准版
*   2008 年的 WSS 3 Visual Studio 扩展（[链接](http://www.microsoft.com/downloads/details.aspx?familyid=7BF65B28-06E2-4E87-9BAD-086E32185E68&displaylang=en)）
*   SmartPart 模板（[链接](http://www.codeplex.com/smarttemplates)）
*   使用自己的域配置和设置 Active Directory
*   Exchange 配置和设置（非常适合访问 AD 配置文件中的 customAttributes，可用于管理用户数据并导入 SharePoint）
*   WSPBuilder（[链接](http://www.codeplex.com/wspbuilder)）
*   SQL Server 2005 标准版

硬件方面，我可以在具有 4GB 内存的双核 2.5Ghz 系统上运行上述所有功能 - 但最重要的是它*必须*是 32 位系统，这必须非常强调。您的开发环境*必须*是 32 位的，SharePoint 中有很多东西可以在 64 位下正常运行，但您不能在 64 位上针对它进行开发。

我将再次强调——你必须使用 32 位环境进行开发。

最后，永远不要在代码中假设文档库、列表或其他 SharePoint 功能的设置 GUID - 如果您需要以某种方式进行设置，请将其作为部署脚本的一部分。这样，您用于维护开发、UAT 和生产环境的管理开销将大大减少。

关于当前设置，我唯一要更改的是将 SQL Server 移到自己的硬件上，因为这样可以减少开销，并且还允许您调查与 SQL Server Reporting Services 和 SQL Server Reporting Services 等单独服务有关的 NTLM/Kerberos 双跃点问题业务数据目录。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-27T03:22:23.997

您应该查看 SharePointDevWiki.com 页面上的“构建 SharePoint 开发环境”。无法添加链接，因为我是“新用户”。

# python - 需要一些概述的 Python 代码

> ID：909279
> 
> 赞同：1
> 
> 时间：2009-05-26T07:02:10.557
> 
> 标签：python

我目前正在学习python（在一开始），所以我仍然对良好的代码方式以及我应该如何继续它有一些疑问。

今天我创建了这段代码，它应该随机从 01 到 60（但从 01 到 69 运行）

```
import random

dez = ['0', '1', '2', '3', '4', '5', '6']
uni = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9']
sort = []

while len(sort) <= 5:
    random.shuffle(dez)
    random.shuffle(uni)
    w = random.choice(dez)
    z = random.choice(uni)
    chosen = str(w) + str(z)
    if chosen != "00" and chosen not in sort:
        sort.append(chosen)
    print chosen 
```

我也怀疑如何让代码停在“60”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-26T07:05:48.087

您确实意识到您可以在 1 行中编写完全相同的代码，对吗？[使用randint](http://docs.python.org/library/random.html#random.randint)很容易：

```
>>> [random.randint(1,60) for _ in range(6)]
[22, 29, 48, 18, 20, 22] 
```

这将为您提供 6 个介于 1 和 60 之间的随机*整数*的列表。在您的代码中，您正在创建具有这些数字的*字符串。*但是，如果您故意将它们创建为字符串，则可以这样做：

```
>>> [str(random.randint(1,60)) for _ in range(6)]
['55', '54', '15', '46', '42', '37'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-26T07:07:45.540

你可以使用

```
random.randrange(1,60) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-03-19T13:49:53.267

要获得 1 到 59 范围内的 6 个唯一随机整数：

```
sample = random.sample(xrange(1, 60), 6)
# -> [8, 34, 16, 28, 46, 39] 
```

获取字符串：

```
['%02d' % i for i in sample]
# -> ['08', '34', '16', '28', '46', '39'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-26T07:06:29.287

通过在每个循环上洗牌，您不会获得真正的好处。在循环之前执行一次。

选择不是一个词

# java - IntelliJ 无法识别 JDK 版本

> ID：909282
> 
> 赞同：4
> 
> 时间：2009-05-26T07:02:28.343
> 
> 标签：java, intellij-idea, jdk1.5

我在 IntelliJ IDEA 8.1.1 上编写了一个 java 项目。当我转到 IntelliJ IDEA 8.1.1 的编译选项时，它会显示弹出消息框，因为它显示错误-

> 无法确定 JDK
> 更新 JDK 配置的版本。

即使我有正确的 JDK 版本，我的 PC 上也安装了 jdk1.5.0，可以在其他环境中正常工作。请建议我可能需要更改的任何设置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2011-04-14T10:52:47.663

我最近在 IntelliJ IDEA 9.0.4 中收到了同样的错误消息。“无法检测 JDK 版本”、“可能安装在 C:\Program Files\Java\jdk1.6.0_24 中的 JDK 已损坏。”

我能够通过从*项目结构中删除 JDK 来解决它 SDK*，然后重新添加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-08T01:46:28.840

此 JDK 安装的“java -version”的输出是什么？可能是输出在实际版本信息之前包含一些非标准字符串。此类字符串可以由系统上的环境变量添加。IDEA 可能无法解析此输出并正确检测 JDK 版本。

# iphone - 如何退出 NSThread

> ID：909283
> 
> 赞同：4
> 
> 时间：2009-05-26T07:02:39.027
> 
> 标签：iphone, objective-c, ios, nsthread

我正在使用这样的线程，

```
[NSThread detachNewThreadSelector:@selector(myfunction) toTarget:self withObject 
```

线程运行正常，我想在中间退出线程，我该怎么做。如果我使用 [NSThread exit] 应用程序挂起。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-26T07:30:58.223

您在哪个线程中运行“[NSThread exit]”？[NSThread exit] 在**当前**线程中运行，因此您需要将其作为*myfunction*选择器的一部分调用。如果你在主线程中调用它，它只会退出主线程。

此外，停止这样的线程也不是一个好主意，因为它会阻止线程退出清理资源。

*myfunction*应该基于与协调线程的共享变量退出。

```
- (void) myFunction
{
    while([someObject stillWorkToBeDone]) 
    { 
      performBitsOfWork();
    }
} 
```

您可以使用“withObject”在协调线程和工作线程之间共享一个引用。这样，协调线程可以更改共享对象中的实例变量，以便工作线程可以根据此条件停止其工作。

要退出工作线程，协调线程只需调用 smth，如：

```
[someObject setStillWorkToBeDone:false]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T11:20:25.527

你应该打电话

```
-[NSThread cancel] 
```

在您创建的线程上并检查

```
-[NSThread isCancelled] 
```

在你的 while 循环中。

# c++ - 拆分字符串

> ID：909289
> 
> 赞同：1
> 
> 时间：2009-05-26T07:04:28.603
> 
> 标签：c++

我有这个代码来分割一个字符串。出于某种原因，它只是坐在那里无所事事。我不确定问题是什么。顺便说一句，`delim = ' '`这里。

```
vector<string> split( const string &str, const char &delim )
{
    typedef string::const_iterator iter;

    iter beg = str.begin();

    vector<string> tokens;

    while(beg != str.end())
    {
        iter temp = find(beg, str.end(), delim);
        if(beg != str.end())
            tokens.push_back(string(beg, temp));
        beg = temp;
    }

    return tokens;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-29T01:39:35.687

这是另一个基于 Boost 的简短版本，它使用整个字符串作为分隔符：

```
std::vector<std::string> result;
boost::iter_split(result, str, boost::first_finder(delim)); 
```

或不区分大小写：

```
std::vector<std::string> result;
boost::iter_split(result, str, 
    boost::first_finder(delim, boost::is_iequal())); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-26T08:58:50.667

我必须喜欢[Boost](http://www.boost.org/doc/libs/1_39_0/doc/html/string_algo/usage.html#id3408774)，因为它也为此提供了一个方便的解决方案：

```
 std::vector<std::string> Split(const std::string &s, const std::string &d)
{
        std::vector<std::string> v;

        for (boost::split_iterator<std::string::iterator> i = boost::make_split_iterator(s, boost::first_finder(d, boost::is_iequal()));
             i != boost::split_iterator<std::string::iterator>();
             ++i) {
                v.push_back(boost::copy_range<std::string>(*i));
        }

        return v;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-26T07:10:19.200

我想我*可以*为你调试它，但从长远来看这对你没有帮助。这就是你要做的。

在每一行之后，放置一个 printf() 或 cout 语句，将更改的变量转储到标准输出。然后运行您的代码，将一组简单的参数传递给它：

```
vector<string> x = split ("Hello there, Bob.", ' '); 
```

然后，检查输出以了解您的实现为何不起作用。您可能不得不跳出代码，因为如果它只是坐在那里，您可能已经让自己成为那些新奇的无限循环之一。

> 授人以鱼，其食一日，授人*以*鱼，则永不饿。

或特里普拉切特版本：

> 给一个人点火，他会温暖一天，让一个人*着火*，他会温暖他的余生。

**更新：**

既然你说你实际上已经按照我的建议做了，这就是*我*从这样做中发现的。很明显，当您在循环结束时设置为时，它`beg`指向空间。这是通过在循环顶部打印字符串发现的- 在提取第一个单词后它从未改变。`temp``while``beg``while`

然后，当您执行 next 时`find`，它会找到完全相同的空格，而不是先跳过空格然后`find`正确调用。您需要跳过每个 之后的空格`find`，确保不会迭代超出字符串的末尾。

这是我的解决方案。随心所欲地使用它。

```
#include <iostream>
#include <string>
#include <vector>
#include <algorithm>
using namespace std;

vector<string> split( const string &str, const char &delim ) {
    typedef string::const_iterator iter;
    iter beg = str.begin();
    vector<string> tokens;

    while(beg != str.end()) {
        //cout << ":" << beg._Myptr << ":" << endl;
        iter temp = find(beg, str.end(), delim);
        if(beg != str.end())
            tokens.push_back(string(beg, temp));
        beg = temp;
        while ((beg != str.end()) && (*beg == delim))
            beg++;
    }

    return tokens;
}

int main () {
    vector<string> x = split ("Hello, my name is Bob. ", ' ');
    return 0;
} 
```

`while`如果在循环结束时没有那个空格跳过代码，输出是：

```
:Hello, my name is Bob. :
: my name is Bob. :
: my name is Bob. :
: my name is Bob. :
: my name is Bob. :
: my name is Bob. :
: my name is Bob. :
: my name is Bob. : 
```

以此类推，无穷无尽。*使用*跳过代码，您将获得：

```
:Hello, my name is Bob. :
:my name is Bob. :
:name is Bob. :
:is Bob. :
:Bob. : 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-26T07:11:38.650

您的 while 循环中存在一个问题，即如果找到分隔符，则在第一次调用`temp`后将指向第一个分隔符。`find`

在 while 循环结束时，您将`beg`值设置为`temp`.

现在`beg`也指向第一个分隔符。

下一次调用时`find`，它将再次返回当前值，`beg`因为它确实指向分隔符。

`temp`没有从之前的值继续前进，因此您处于无限循环中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-26T08:38:55.293

也许这个：

```
std::vector<std::string> &mysplit(const std::string &s, char delim, std::vector<std::string> &elems) {
    std::stringstream ss(s);
    std::string item;
    while(std::getline(ss, item, delim)) {
        elems.push_back(item);
    }
    return elems;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-26T07:34:53.377

```
vector<string> split( const string &str, const char &delim )
{
    typedef string::const_iterator iter;

    iter beg = str.begin();

    vector<string> tokens;

    while(beg != str.end())
    {
        iter temp = find(beg, str.end(), delim);
        if(beg != str.end())
            tokens.push_back(string(beg, temp));
        if(temp != str.end())
            temp++;
        beg = temp;
    }

    return tokens;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-26T09:22:18.060

您不必重新发明轮子，boost 为您提供了[字符串拆分](http://www.boost.org/doc/libs/1_39_0/doc/html/string_algo/usage.html#id3408774)功能。
示例代码：

```
string stringtobesplit = "AA/BB-CC")
vector<string> tokens;

boost::split(tokens, stringtobesplit, boost::is_any_of("/-")); 
// tokens now holds 3 items: AA BB CC 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-26T07:09:53.083

find() 将返回下一个标记的位置 X。然后，当您将其分配给 beg 并进入下一次迭代时，它将开始在位置 X 再次搜索 - 一次又一次 - 一次又一次......即您陷入了无限循环。

试试这个代码：

```
vector<string> split( const string &str, const char &delim )
{
    typedef string::const_iterator iter;

    vector<string> tokens;
    iter pos = str.begin(), last = str.begin();

    while(pos != str.end()) {
        last = pos;
        pos = find(pos, str.end(), delim);

        if (pos != str.end()) {
            string token = string(last, pos);
            if (token.length() > 0)
                tokens.push_back(token);

            last = ++pos;
        }
    }

    string lastToken = string(last, pos);
    if (lastToken.length() > 0)
        tokens.push_back(lastToken);

    return tokens;
} 
```

这有一个额外的好处，它将包括列表中的最后一个标记（例如，当在空间上分割时，字符串“ab c”现在将返回标记 a、b 和 c 而不是仅 a 和 b）并且多个分隔符不会导致空令牌。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-26T07:35:59.383

调试此代码的最简单方法是打印所有位置`beg`将。如果`beg`没有增加，那是你的问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-26T07:36:27.227

除了`beg`需要随着分隔符的大小而增加之外，还遗漏了一种特殊情况：字符串中没有分隔符的情况。

# c# - C#：我如何将这个命令行直接执行到 java.exe？

> ID：909303
> 
> 赞同：2
> 
> 时间：2009-05-26T07:08:06.163
> 
> 标签：c#, java, process, arguments, cmd

我正在编写一个需要运行 java.jar 服务器的程序。我需要直接运行该过程，这样我就可以将输出重写到一个文本框，并且总的来说可以完全控制它。我试着通过 CMD.exe 来做，但这不起作用，因为 CMD.exe 只会调用一个新进程 java.exe 而我无法控制它。我需要直接调用 java.exe 以便我可以控制并获取输出。你们谁能告诉我如何转换这个命令，以便我可以在 C# 中创建一个进程并调用它？

我需要转换这个 CMD 命令：

**“java -Xmx1024m -cp ./../libs/*;l2jserver.jar net.sf.l2j.gameserver.GameServer”**

进入

**我可以将命令行放入 Process.Arguments 中，这样我就可以直接调用 Java.exe。**

我已经尝试过……但它只是行不通。

我已经看了好几个小时了......请有人帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-26T08:05:11.227

部分问题可能是尽管框架文档说使用 Process 并不总是能正确解决针对 PATH 环境变量的问题。如果您知道 Java 所在文件夹的名称，则使用 Java.exe 的完整路径，否则使用如下函数：

```
 private void LocateJava()
    {
        String path = Environment.GetEnvironmentVariable("path");
        String[] folders = path.Split(';');
        foreach (String folder in folders)
        {
            if (File.Exists(folder + "java.exe"))
            {
                this._javadir = folder;
                return;
            } 
            else if (File.Exists(folder + "\\java.exe")) 
            {
                this._javadir = folder + "\\";
                return;
            }
        }
    } 
```

它有点 hacky，但它会找到 java.exe，前提是安装了 Java Runtime 并且它的文件夹位于 windows PATH 变量中。当您的程序第一次需要查找 Java 并随后使用以下命令启动 Java 时，请调用此函数：

```
 //Prepare the Process
   ProcessStartInfo start = new ProcessStartInfo();
   if (!_javadir.Equals(String.Empty)) {
        start.FileName = this._javadir + "java.exe";
   } else {
        start.FileName = "java.exe";
   }
   start.Arguments = "-Xmx1024m -cp ./../libs/*;l2jserver.jar net.sf.l2j.gameserver.GameServer";
   start.UseShellExecute = false;
   start.RedirectStandardInput = true;
   start.RedirectStandardOutput = true;

   //Start the Process
   Process java = new Process();
   java.StartInfo = start;
   java.Start();

   //Read/Write to/from Standard Input and Output as required using:
   java.StandardInput;
   java.StandardOutput; 
```

# asp.net - 有没有办法找出 asp.net 会话的年龄？

> ID：909308
> 
> 赞同：5
> 
> 时间：2009-05-26T07:09:06.377
> 
> 标签：asp.net, session

如何找出 asp.net (3.5) 会话的年龄？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-26T07:13:07.087

我不直接认为，但自己做会很容易。在 global.asax 中，您可以将代码添加到 Session_Start 偶数处理程序中，您可以在其中添加一个会话变量，该变量告诉您​​何时创建会话。

像这样的东西：

```
void Session_Start(object sender, EventArgs e) 
{
    // Code that runs when a new session is started
    Session["SessionStartTime"] = DateTime.Now;        
} 
```

然后，您可以通过在代码中执行以下操作来检查会话存在多长时间：

```
TimeSpan sessionLifeTime = DateTime.Now - (DateTime)Session["SessionStartTime"]; 
```

# types - 如何从结构数组转换为 Point3D 数组？

> ID：909310
> 
> 赞同：2
> 
> 时间：2009-05-26T07:09:49.467
> 
> 标签：types

我想将结构数组转换为 Point3D 数组。代码片段如下：

class Mymesh { public MeshGeometry3D Mesh3D // 属性 tanimlaniyor { get { return GetMesh3D(); } }

```
public struct mystruct
{
    public int m_i;
    public int m_j;
    public int m_k;

    public mystruct(int i, int j, int k)
    {
            m_i = i;
            m_j = j;
            m_i = k;
    }
}

private mystruct[] mypts = 
{
    new mystruct(20 , 7 , 7),   
    .
    .
    new mystruct(23 , 5 , 7)     
};

 public MeshGeometry3D GetMesh3D()
 {
   mesh.Positions.Add(mypts(1);   *// The error is given at just this line.*
   .
   .
   mesh.Positions.Add(mypts(50);
  }
 .
 . 
```

}

此代码正在生成错误消息“无法从 'Mymesh.mystruct' 转换为 'System.Windows.Media.Media3D.Point3D'。

我怎样才能克服这个错误？

提前致谢。

Onder YILMAZ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T07:30:46.333

为了能够构造一个 Point3D，您需要使用它的构造函数之一。
从[这个文档](http://msdn.microsoft.com/en-us/library/system.windows.media.media3d.point3d.aspx)看来，Point3D 有一个构造函数，它采用 3 个坐标，所以你可以改变它：

```
mesh.Positions.Add(mypts[1]); 
```

对此：

```
mesh.Positions.Add(mypts[1].m_i, mypts[1].m_j, mypts[1].m_k); 
```

您可能还想注意到这段代码中有很多语法错误。例如，索引数组是用`[]`而不是完成的`()`，当你打开一个括号时，你应该总是关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T07:35:06.997

有多种方法可以做到这一点：

1.  不要使用自定义结构，使用 Point3D 开头
2.  为您的结构定义显式或隐式转换，以将其转换/转换为 Point3D
3.  将 ToPoint3D 方法添加到您的结构
4.  只需使用 i、j 和 k 结构成员调用 .Add 方法

我将在这里展示第三个选项：

```
public Point3D ToPoint3D()
{
    return new Point3D(i, j, k);
} 
```

那么您只需在添加时调用该方法：

```
public MeshGeometry3D GetMesh3D()
{
    mesh.Positions.Add(mypts[1].ToPoint3D()); 
```

另请注意，您可能应该在此处使用循环：

```
foreach (mystruct p in mypts)
    mesh.Positions.Add(p.ToPoint3D()); 
```

另请注意以下几点：

*   您应该尽量避免使用名为 i、j 和 k 的结构成员，除非您指定内部循环寄存器。尝试使用 X、Y 和 Z，因为它们被普遍理解为坐标值
*   C# 中的数组从索引 0 开始，而不是 1
*   您使用 [] 来索引数组元素，而不是 ()
*   您的代码中缺少一些结尾括号

为什么我要提这个？因为对我来说很明显，您发布的代码不是您要编译或执行的代码。永远不要试图通过重写来简化代码。相反，制作一个简短但完整、可编译和可测试的程序，并将代码发布到该程序。让我们担心过载（当然，不要发布 1000 行，而是将其缩短到 10-20）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T07:44:04.577

感谢你们所有人，很抱歉，由于我的代码片段很少且错误。原始代码很长。我不能把它们都写出来。原始代码没有任何语法错误。

再次感谢。

一个 YILMAZ

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-26T07:53:39.113

```
public Point3D MystructToPoint3D(mystruct point)
{
    return new Point3D(point.m_i, point.m_j, point.m_k);
} 
```

如果你想透明地使用你的“mystruct”，就好像它是一个Point3D（例如你想修改一个方法内的坐标）你必须写一个[适配器](http://en.wikipedia.org/wiki/Adapter_pattern)：

```
struct Point3DAdapter : Point3D
{
    internal mystruct _point;

    public Point3DAdapter(ref mystruct point)
    {
        this._point = point;
    }

    public override double X
    {
        get { return _point.m_i; }
        set { _point.m_i = value; }
    }

    // same for Y and Z
} 
```

我不得不说我没有测试这段代码，我不太确定我是否可以通过 struct byref 或覆盖 struct 方法.. :)

# c++ - 如何删除 MS Word 加载项按钮？

> ID：909314
> 
> 赞同：0
> 
> 时间：2009-05-26T07:10:37.840
> 
> 标签：c++, ms-word

我需要以编程方式从 MS Word 中删除加载项。我已经删除了与之对应的注册表项，并且该按钮现在被禁用（单击它时没有任何反应），并且该加载项不再出现在 COM 加载项列表中。

但是，该按钮仍保留在“加载项”功能区菜单中。如何以编程方式删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-02T10:38:52.857

一周后没有答案。你可以说这是一个懒惰的问题，不是吗？

我目前正在使用[CodeProject](http://www.codeproject.com/KB/office/MSOfficeAuto.aspx)的解决方案。我的代码似乎可以工作，但**尚未经过**正确测试。

```
CoInitialize(NULL);
CLSID clsid;
IDispatch *pWApp, *pCommandBars, *pCommandBar, *pCommandBarControls, *pCommandBarControl;
VARIANT v;
HRESULT hr;

hr = CLSIDFromProgID(L"Word.Application", &clsid);
if (SUCCEEDED(hr))
{

    hr = CoCreateInstance(clsid, NULL, CLSCTX_LOCAL_SERVER, IID_IDispatch, (void **)&pWApp);
    if (SUCCEEDED(hr))
    {
        VariantInit(&v);
        hr = OLEMethod(DISPATCH_PROPERTYGET, &v, pWApp, L"Commandbars", 0);
        pCommandBars = v.pdispVal;

        VariantInit(&v);
        hr = OLEMethod(DISPATCH_PROPERTYGET, &v, pCommandBars, L"Count", 0);
        INT NumCommBars = v.intVal;

        for (INT i = 1; i <= NumCommBars; i++)
        {
            COleVariant CommandBarIndex((BYTE)i);
            VariantInit(&v);
            hr = OLEMethod(DISPATCH_PROPERTYGET, &v, pCommandBars, L"Item", 1, CommandBarIndex);
            if (FAILED(hr)) continue;
            pCommandBar = v.pdispVal;

            VariantInit(&v);
            hr = OLEMethod(DISPATCH_PROPERTYGET, &v, pCommandBar, L"Controls", 0);
            if (FAILED(hr)) continue;
            pCommandBarControls = v.pdispVal;

            VariantInit(&v);
            hr = OLEMethod(DISPATCH_PROPERTYGET, &v, pCommandBarControls, L"Count", 0);
            if (FAILED(hr)) continue;
            INT NumControls = v.intVal;

            for (INT j = 1; j <= NumControls; j++)
            {
                COleVariant CommandBarControlIndex((BYTE)j);
                VariantInit(&v);
                hr = OLEMethod(DISPATCH_PROPERTYGET, &v, pCommandBarControls, L"Item", 1, CommandBarControlIndex);
                if (FAILED(hr)) continue;
                pCommandBarControl = v.pdispVal;

                VariantInit(&v);
                hr = OLEMethod(DISPATCH_PROPERTYGET, &v, pCommandBarControl, L"Caption", 0);
                if (FAILED(hr)) continue;

                CString ControlCaption(v.bstrVal);

                if (ControlCaption.Find("MyCaption") != -1)
                {
                    OLEMethod(DISPATCH_METHOD, NULL, pCommandBarControl, L"Delete", 0);
                }

                pCommandBarControl->Release();
            }

            pCommandBar->Release();
            pCommandBarControls->Release();
        }

        OLEMethod(DISPATCH_METHOD, NULL, pWApp, L"Quit", 0);
        pCommandBars->Release();
        pWApp->Release();
    }
}

CoUninitialize(); 
```

希望这可以帮助其他有类似问题的人。

# c# - 如何从 C# 提交表单

> ID：909316
> 
> 赞同：0
> 
> 时间：2009-05-26T07:10:59.743
> 
> 标签：c#

我正在用 C# 开发一个内部应用程序，它调用银行网站之一。我需要在 DDL 中输入货币，在文本框中输入金额，并需要找出汇率。

这是我需要使用的链接..

[https://www.timesofmoney.com/remittance/secure/rmtExchRateCalculator.jsp?tab=US&sendercountry=US&sendercurrency=USD&uiId=TOML&partnerId=TOML](https://www.timesofmoney.com/remittance/secure/rmtExchRateCalculator.jsp?tab=US&sendercountry=US&sendercurrency=USD&uiId=TOML&partnerId=TOML) 我使用了 myWebClient.UploadValues(C#) 但该网站返回了一些错误...可以有人帮我解决这个..

## 我的代码：

```
 string uriString= "https://www.timesofmoney.com/remittance/secure/rmtExchRateCalculator.jsp?tab=US&sendercountry=US&sendercurrency=USD&uiId=TOML&partnerId=TOML";

    // Create a new WebClient instance.
    WebClient myWebClient = new WebClient();

    // Create a new NameValueCollection instance to hold some custom parameters to be posted to the URL.
    NameValueCollection myNameValueCollection = new NameValueCollection();

    // Add necessary parameter/value pairs to the name/value container.
    myNameValueCollection.Add("selCountry", "United States");
    myNameValueCollection.Add("rmtAmount", "100");

    byte[] responseArray = myWebClient.UploadValues(uriString, myNameValueCollection);

    Response.Write(Encoding.ASCII.GetString(responseArray)); 
```

* * *

我从网站得到的回复：

* * *

不便遗憾！

请检查您的浏览器设置以使您能够使用该网站。由于旧 cookie 和临时 Internet 文件，您可能会遇到此问题

删除临时 Internet 文件。

若要删除临时 Internet 文件，请按照下列步骤操作： 启动 Internet Explorer。在工具菜单上，单击 Internet 选项，然后单击常规选项卡。在 Internet 临时文件下，单击删除 Cookie。当系统提示您确认删除时，单击确定。单击删除文件。当系统提示您确认删除时，单击确定。在历史记录下，单击清除历史记录。当系统提示您删除访问过的网站的历史记录时，单击是。单击确定。关闭所有打开的浏览器并重新启动新浏览器

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-26T07:30:58.423

该页面似乎需要 cookie。看看[这里](http://couldbedone.blogspot.com/2007/08/webclient-handling-cookies.html)，看看如何使用 WebClient 处理 cookie。

要调试您的问题，您还可以安装标头嗅探工具，例如Firefox的[Live HTTP Headers或 Internet Explorer 的](https://addons.mozilla.org/de/firefox/addon/3829)[ieHTTPHeaders](http://www.blunck.se/iehttpheaders/iehttpheaders.html)，并尝试通过 WebClient（相同的用户代理、[Referrer](http://de.wikipedia.org/wiki/Referrer)等）发送相同的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T07:41:10.837

你可以试试 www.coinmill.com。我使用 javascript 来获得那里网站的汇率/货币转换没有问题。希望这可以帮助

# visual-studio-2008 - 下载需要授权的 HTML 内容？

> ID：909324
> 
> 赞同：0
> 
> 时间：2009-05-26T07:12:44.310
> 
> 标签：visual-studio-2008, authorization, webclient

我使用 Visual Studio 2008 的 System.Net 命名空间中的 WebClient 来下载 HTML 内容。

它在普通网站上做得很好，但对于一些需要授权的 4rum，例如warez-bb.org，它总是返回登录页面的 HTML。

我想知道是否有办法将用户名和密码发送到 WebClient？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-26T07:24:40.857

请参阅这篇文章： [如何在 C# 中使用 Webclient 填写表单和提交](https://stackoverflow.com/questions/793755/how-to-fill-forms-and-submit-with-webclient-in-c)

您可能需要使用 HttpWebRequest 并手动提交表单 POST 数据。

# .net - 如何通过 .NET 客户端调用 Axis Web 服务

> ID：909329
> 
> 赞同：1
> 
> 时间：2009-05-26T07:13:52.670
> 
> 标签：.net, web-services, axis

我有一个任务来调用并连接到 dotnet Web 应用程序中的 Axis Web 服务。

webservice，首先需要验证用户名和密码，应该在header中发送，只有在验证后，我们才能调用它的任何方法。

现在，我不知道如何传递凭据并调用 Web 服务。

我有显示如何访问 web 服务的 Java 代码，但我不知道如何在 .NET 中做同样的事情。

我想我必须使用 WSE 3.0。

这是Java代码：

```
Service  webService = new Service();
Call  calling    = (Call) webService.createCall();
calling.setProperty (Call.USERNAME_PROPERTY, "victor");
calling.setProperty (Call.PASSWORD_PROPERTY, "victor_s");
String userid="userid";
String password="password";
String endpoint= "SERVICEURL";

Service  service = new Service();
Call     call    = (Call) service.createCall();
call.setTargetEndpointAddress( new java.net.URL(endpoint) );
call.setOperationName(new QName(endpoint,methodName));
call.setProperty (Call.USERNAME_PROPERTY, "victor");
call.setProperty (Call.PASSWORD_PROPERTY, "victor_s");

String ItineraryDetailsInputXML="<?xml version=\"1.0\" encoding=\"UTF-8\"?><ItineraryDetailsInput lccp_srcstn=\"NDLS\" lccp_dstnstn=\"MAS\" lccp_trnnum=\"2616\" lccp_cls=\"SL\" lccp_resupto=\"MAS\" lccp_brdpt=\"NDLS\" lccp_day=\"27\" lccp_month=\"11\" lccp_year=\"2008\" lccp_qta=\"GN\" lccp_psgnname1=\"SANJEEV KUMAR \" lccp_psgnsex1=\"m\" lccp_psgnage1=\"60\" lccp_psgnberthpref1=\"Side_Upper\" lccp_psgnfoodpref1=\"Veg\" lccp_psgnconc1=\"SRCTZN\" lccp_psgnname2=\"Prasad\" lccp_psgnsex2=\"f\" lccp_psgnage2=\"60\" lccp_psgnberthpref2=\"Side_Lower\" lccp_psgnfoodpref2=\"\" lccp_psgnconc2=\"SRCTNW\" lccp_psgnname3=\"saa\" lccp_psgnsex3=\"m\" lccp_psgnage3=\"05\" lccp_psgnberthpref3=\"\" lccp_psgnfoodpref3=\"\" lccp_psgnconc3=\"\" lccp_psgnname4=\"ssss\" lccp_psgnsex4=\"m\" lccp_psgnage4=\"45\" lccp_psgnberthpref4=\"\" lccp_psgnfoodpref4=\"\" lccp_psgnconc4=\"\" lccp_psgnname5=\"\" lccp_psgnsex5=\"\" lccp_psgnage5=\"\" lccp_psgnberthpref5=\"\" lccp_psgnfoodpref5=\"\" lccp_psgnconc5=\"\" lccp_psgnname6=\"\" lccp_psgnsex6=\"\" lccp_psgnage6=\"\" lccp_psgnberthpref6=\"\" lccp_psgnfoodpref6=\"\" lccp_psgnconc6=\"\" userid=\""+userid+"\" password=\""+password+"\"/>";
StringBuffer buffer = new StringBuffer ();

String requestXml=ItineraryDetailsInputXML; 
```

我不知道如何使用 .NET 完成所有这些凭据传递。因此，我请求您指导我，我应该如何解决这个问题。另外，如果可以的话，请给我一些 .NET 中的示例代码，可以在其中完成上述场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-11-08T20:07:02.080

在 Visual Studio 中解析 WSDL。转到顶部菜单的“项目”菜单-> 根据您拥有的 VS 版本选择“添加 Web 引用”或“添加服务引用”。

然后，您只需在代码中创建一个新客户端。客户端将具有类似“客户端凭据”的内容，您可以在其中将用户名/密码传递给它：

```
WebServiceClient client = new WebServiceClient();
client.ClientCredentials.UserName.UserName = "xyz";
client.ClientCredentials.UserName.Password = "123"; 
```

顺便说一句，您连接到 AXYS Web 服务并不重要。Web 服务的全部意义在于能够使用标准，这样客户端就无关紧要了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T12:34:29.717

如果没有 WSDL，我也不知道，但我认为您没有理由使用 WSE 之类的过时代码。为什么你认为你必须这样做？

另外，您使用的是哪个版本的 .NET？你试过什么？

是您不知道如何从 .NET 调用 Axis 服务，还是您不知道如何从 .NET 调用*任何*服务？

# c# - WCF，更改端点的baseAdress

> ID：909332
> 
> 赞同：1
> 
> 时间：2009-05-26T07:14:49.270
> 
> 标签：c#, .net, wcf, .net-3.5

我对以下配置文件有几个问题：

```
<system.serviceModel>
  <bindings />
  <services>
    <service behaviorConfiguration="WcfReporting.Service1Behavior"
             name="WcfReporting.Service1">
      <endpoint address="" 
                binding="basicHttpBinding" bindingConfiguration=""
                contract="WcfReporting.IService1">
        <identity>
          <dns value="localhost" />
        </identity>
      </endpoint>
      <endpoint address="mex" binding="mexHttpBinding" 
                contract="IMetadataExchange" />
      <host>
        <baseAddresses>
          <add baseAddress="net.tcp://localhost:5050/" />
        </baseAddresses>
      </host>
    </service>
  </services>
  <behaviors>
    <serviceBehaviors>
      <behavior name="WcfReporting.Service1Behavior" >
        <!-- To avoid disclosing metadata information, set the value below to false 
             and remove the metadata endpoint above before deployment -->
        <serviceMetadata httpGetEnabled="true"/>
        <!-- To receive exception details in faults for debugging purposes, 
             set the value below to true. Set to false before deployment to 
             avoid disclosing exception information -->
        <serviceDebug includeExceptionDetailInFaults="false"/>
      </behavior>
    </serviceBehaviors>
  </behaviors>
</system.serviceModel> 
```

1.  为什么当我按 F5 重新启动服务时，服务会以这个 URL [http://localhost:2752/](http://localhost:2752/)开头……为什么不是我在 baseAddresses 中指定的 5050。

2.  如何添加另一个端点。我尝试使用端点地址="/Address2" binding="basicHttpBinding" contract="WcfReporting.IService1" />

我应该如何访问该服务，不仅可以使用[http://localhost/VirtualDir/](http://localhost/VirtualDir/)还可以使用[http://localhost/VirtualDir/address2](http://localhost/VirtualDir/address2)或者它是如何工作的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-26T17:29:14.347

如果您在 Visual Studio 2005 或更高版本中在 Cassini 中进行托管，则可以使用 Project/Properties/Web/Use Visual Studio Development Server/Specific Port 指定端口。

默认情况下，端口将被自动分配——这对 Web 服务不是很有帮助，因为您的客户可能希望使用固定的 URL。

在 IIS 或 Cassini 中托管时，您无需在配置文件中指定 <baseAddresses> - 基本 URL 由 Web 服务器提供。<baseAddresses> 元素在自托管时使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T10:38:11.057

> 如何添加另一个端点。我尝试使用端点地址="/Address2" binding="basicHttpBinding" contract="WcfReporting.IService1" />

您在此端点中指定的地址需要是本地的和相对的 - 例如，只需指定

```
<endpoint address="Address2"
          binding="basicHttpBinding"
          contract="WcfReporting.IService1" /> 
```

这将在完整地址处创建一个端点

```
net.tcp://localhost:5050/Address2 
```

但正如 Darin 已经指出的那样 - 如果您使用 IIS / WAS 来托管您的服务，则 *.svc 文件所在的虚拟目录将优先，并且指定的基地址将被忽略。为了真正使用基地址，您需要在控制台应用程序或 Windows 服务中自行托管服务。

马克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T07:19:58.150

如果您使用 Web 服务器（例如 Cassini 或 IIS）来托管您的 WCF 服务，则将从该服务器提供基地址。另请注意，您不能通过 HTTP 使用 TCP 绑定。如果您希望能够设置您需要自己托管服务的基地址属性（例如在 NT 服务、控制台或 Windows 应用程序中）。

# sql - T-SQL：如何在导入期间记录错误条目

> ID：909339
> 
> 赞同：0
> 
> 时间：2009-05-26T07:17:28.373
> 
> 标签：sql, sql-server-2005, tsql, error-handling

我进行导入并将列转换为其他数据类型。在导入期间，我检查是否可以将存储在列中的值转换为目标数据类型。如果不是，我输入一个默认值，例如，我将字符串转换为 int，当我无法转换字符串时，我插入 -1。

此时，如果我可以将错误条目记录到单独的表中，那就太好了，例如，而不是可解析的字符串 '1234' 'xze' 到达，所以我将 -1 放入目标表并将 'xze' 放入日志表. （T-）SQL可以做到这一点吗？

干杯，

安德烈亚斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T10:24:57.590

这对于 SSIS 数据流任务也很容易做到。您可能尝试的任何数据转换或查找步骤都有“成功”输出和“错误”输出。您只需将所有错误输出定向到“联合”转换，然后从那里进入一个公共错误表。所有成功的结果都会进入您的“成功”表。您甚至可以在错误表中添加额外的详细信息，以便为您提供清晰的错误消息。

这样做的好处是您仍然可以获得高性能，因为整个缓冲区都在系统中移动。您最终将有一个充满有效数据的缓冲区被批量写入成功表，而充满错误的小缓冲区被写入错误表。当一行发生错误时，该行将简单地从一个行缓冲区移动到另一个行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T10:38:04.913

如果您有一个临时表，您可以将好东西过滤到最终表中并执行连接（不存在）以查找日志表的垃圾

# c++ - 将动态分配的数组读入列表

> ID：909343
> 
> 赞同：0
> 
> 时间：2009-05-26T07:17:58.357
> 
> 标签：c++

目前，我一直在以编程方式从二进制数据文件中读取数据列表，如下所示：

```
tplR = (double*) malloc(sampleDim[0]*sizeof(double));
printf("tplR = %d\n", fread(tplR, sizeof(double), sampleDim[0], dfile));

```

但是，由于我想`find_if()`在这些列表上使用函数，我需要将 tplR 转换为 stl 中的列表类型。就一般 C++ 编程实践而言，仅当我真的需要时才将 tplR 放入列表中通常是一种好习惯吗？

如果我确实创建了另一个成员变量，例如 tplRList，那么将所有 sampleDim[0] 数量的双精度条目从 tplR 推入 tplRList 的最简单方法是什么？将它们一一推送，直到增量计数器等于 sampleDim[0]？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-26T07:36:26.760

您可以像这样将 find_if 与数组一起使用：

```
bool equals(int p)
{
    return p == 9;
}

int main(int argc,char *argv[])
{
    int a[10];

    for(int i = 0; i < 10; ++i)
    {
        a[i] = i;
    }

    int* p = std::find_if(a, a+10, equals);
    cout<<*p;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T07:25:09.233

你的假设是错误的。`std::find_if()`只需要一个迭代器，不一定是 STL 迭代器。碰巧它`double*`同时支持 * 和 ++，所以它也是一个迭代器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T07:40:32.197

布尔检查值（双值）；std::find_if(tplR, tplR + sampleDim[0], checkValue);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-26T08:35:47.060

```
#include <boost/lambda/lambda.hpp\>

using namespace boost::lambda;

static const double whateverValueYouWant(12.);

double *const tplR = (double*) malloc(sampleDim[0]*sizeof(double));
const size_t actualItemsRead = fread(tplR, sizeof(double), sampleDim[0], dfile);
printf("tplR = %d\n", actualItemsRead );

const double *begin = tplR;
const double *const end = tplR + actualItemsRead;
const double *const foundItem = std::find_if( begin, end, _1== whateverValueYouWant);

if( foundItem!=end )
{
     //value found
}
else
{
    //no such value
} 
```

# java - 生成类图

> ID：909346
> 
> 赞同：10
> 
> 时间：2009-05-26T07:19:56.090
> 
> 标签：java, class, uml, diagrams

大家好，我在项目发布结束时。所以为了继续工作，我们的经理要求我们为我们编写的代码生成类图。它的中等项目有 3500 个 java 文件。所以我认为我们需要生成类图。首先我需要知道逆向工程是如何工作的。我也在谷歌（绿色，紫罗兰色）中寻找了一些工具，但不确定它们是否有任何帮助。请建议我如何继续。也感谢一个好的入门教程。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-04T10:11:22.330

**我强烈推荐** [BOUML](http://bouml.free.fr/)。它的 Java 反向支持绝对是**ROCK SOLID**。

BOUML 还有许多其他优点：

*   它非常快（有史以来**最快**的 UML 工具，查看[基准测试](http://bouml.free.fr/benchmark.html)），
*   具有坚如磐石的 C++、Java、PHP 和其他导入支持，
*   它是多平台的（Linux、Windows、其他操作系统），
*   具有出色的 SVG 导出支持，这一点很重要，因为以矢量格式查看大图（在 Firefox 等中可以快速缩放）非常方便（您可以在“鸟瞰”视图和类详细视图之间快速切换），
*   它功能齐全，令人印象深刻的密集开发（看看[发展历史](http://bouml.free.fr/historic.html)，很难相信如此快速的进步是可能的）。
*   支持插件，具有模块化架构（这允许[用户贡献](http://bouml.free.fr/contrib.html)，看起来 BOUML 社区正在形成）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-26T08:03:20.373

您要使用的工具是[Doxygen](http://www.doxygen.org)。它类似于 Javadoc，但可以跨多种语言工作。如果找出依赖关系，可以调用 graphviz 来渲染类图。下面是几个[通过 Doxygen 运行的 Java 类](http://www.cypax.net/doxygen/html/inherits.html)的示例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-26T07:45:43.293

这更像是一个工具链而不是一个工具，我自己还没有尝试过。但这可能是一个起点。使用[UMLGraph](http://www.umlgraph.org/)、[ant](http://ant.apache.org/)和[GraphViz](http://www.graphviz.org/)。一步一步解释：[在这篇文章中](http://java.dzone.com/articles/reverse-engineer-source-code-u)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-26T09:16:09.150

我已经将 Visual Paradigm for UML 用于您想要做的事情，它非常好。

有关详细信息，请参见[此处](http://www.visual-paradigm.com/product/vpuml/demos/reversecode/instantreverse.jsp)。

只需转到工具-> 即时反转并选择您的包。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-27T21:19:37.927

您可以使用开源建模工具 ArgoUML [http://argouml.tigris.org/对类图进行逆向工程](http://argouml.tigris.org/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-29T13:54:55.893

[ObjectAid](http://www.objectaid.com)很不错。您可以将类拖到图表中并按照您想要的方式排列它们。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-26T07:47:24.897

UML 标准版（或更好）的 Visual Paradigm 会将 Java 文件逆向工程为类图。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-26T23:05:11.520

我想如果你的老板只是想让你忙到下一个项目开始，那么这并没有什么坏处，但你很快就会发现，创建一个包含 3500 个类的类图不会告诉你关于你的系统的任何信息。事实上，您并不真正想要一个包含超过 10 个类的图表。因此，一旦您将所有代码反转到您的建模工具中，您将需要开始组织和安排以找到含义。创建一个新图表，将一个重要的类放到它上面，并引入与该类直接相关的所有类。重复 300 个最重要的课程。别担心，它并不像听起来那么可怕，也许一周的工作。

作为记录，我选择的建模工具是[Sparx Systems](http://www.sparxsystems.com)的 Enterprise Architect 。它将反转 java 源或 .jar 文件。有 30 天免费试用版。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-26T07:33:09.310

有一些工具可以帮助您生成这些图表。这些要花钱。

否则，您可以尝试解析您的 Java 文件。这可以像创建一个简单的解析器一样简单，该解析器读取 Java 文件并将类的名称和所有导入语句写入文件并从那里生成类图，[graphviz](http://www.graphviz.org/)可以帮助您。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-27T19:53:15.510

我已经使用 Enterprise Architect 很多年了。一位 JBoss 开发人员向我推荐了它。它适用于所有类型的 UML 建模，包括类模型的逆向工程（Java、C# 和其他）。基本版本目前每个座位 120 美元，但它具有更昂贵工具的大部分功能，并且更容易学习。我特别喜欢它生成 HTML 和 RTF 文档的能力。

在工具和源代码之间同步代码非常容易。如果你愿意，甚至是双向的。

您的 PM 可能还喜欢它可以创建的活动和序列图。我也经常使用部署图。将所有这些都集中在一个工具中非常有帮助。

# java - 在 CRUD 中执行 C 的方法中，它应该返回什么？

> ID：909347
> 
> 赞同：2
> 
> 时间：2009-05-26T07:19:57.433
> 
> 标签：java, api, oop

想象一个接口，它有一个方法来创建**Address**类型的对象。这里涉及的实体是无关紧要的。

```
/**
 * @throws IllegalArgumentException if addy is null or invalid
 * @throws PersistenceException if db layer encounters a problem
 */
Object addAddress( Address addy ); 
```

*addAddress*将域对象插入数据库。

我将返回值保留为**Object**。我的问题是：返回类型应该是什么？通常我选择了一个布尔返回值（假设没有抛出异常）。有时我选择返回**Address**记录的自动生成的 PK 密钥。而且通常情况下，我只是将其保留为*void*。你通常做什么&为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-26T07:28:52.750

我传统上使用该方法返回生成的 id 或根本没有返回值。但我开始喜欢返回添加的对象本身并填充生成的 PK 的想法。如果对象有方法，您可以使用返回值并直接在其上调用方法，或者您可以直接将其传递给其他方法：

```
// invoke a method on the returned object
addAddress(theAddress).DoSomething();

// pass the object to some other method
SomeOtherMethod(addAddress(theAddress)); 
```

我不会做的是使用布尔值；add 方法中的失败是一种异常状态，应该这样处理，抛出异常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-26T07:24:09.983

`bool`绝对不好，因为在数据库中插入一行时，没有架构上合理的方法来找出实际出了什么问题（“架构上合理”是指服务层中没有单例和其他共享状态）。剩下的是 PK 和`void`，我更喜欢 PK，因为它可以更好地传达意图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-26T07:23:21.840

我返回自动生成的主键。您可以更新地址对象本身（您可能仍然想要），但返回它会使方法的意义显而易见。

这将使签名：

```
long addAddress(Address address); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-26T07:49:10.230

大多数时候我返回无效。我们使用了一个持久化框架（Hibernate）来更新对象的主键，所以不需要返回它。当插入不成功时，抛出异常。

持久化对象时不需要方法链接，但如果需要，Aaron Digulla 的建议也是一个很好的建议。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-26T07:36:10.443

如果你喜欢方法链，你可以`return this`：

```
dao
.addAddress (a1)
.addAddress (a2)
.addAddress (a3)
.addAddress (a4)
; 
```

# java - 我有什么方法可以覆盖 Java 中的系统属性吗？

> ID：909357
> 
> 赞同：0
> 
> 时间：2009-05-26T07:22:38.940
> 
> 标签：java, casting, jvm, runtime

我遇到了一个实际问题，这个问题可以描述如下。

我们正在开发一个组件（比如一个插件），以便在使用它们提供的 API 在外部 CMS 中触发事件时执行某些任务。他们提供了一些jar库，所以我们正在做的是实现他们提供的接口。然后在触发事件时调用内部方法。（CMS在第一个事件触发时只创建一个类实例，然后它只执行每个事件触发的方法）

功能可以概括如下，

```
import com.external.ProvidedInterface;

public class MonitorProgram implements ProvidedInterface{

   public void process(){
      //This method is called when an event is triggered in CMS
   }

} 
```

在我们的课程中，我们使用“javax.net.ssl.HttpsURLConnection”（JAVA 1.5）。但是 1.4 的 HttpsURLConnection 从 com.sun.net.ssl 迁移到了 javax.net.ssl。但似乎我所指的 CMS（我们实际上不知道他们的实现）使用了这样的东西

```
System.setProperty("java.protocol.handler.pkgs","com.sun.net.ssl.internal.www.protocol"); 
```

在我们的代码中导致 ClassCastException。

我想我的问题很清楚。在我们的例子中，我们无法设置 VM 参数，

```
-Djava.protocol.handler.pkgs= 
```

我们也不能使用，

```
System.setProperty("") 
```

因为 CMS 和我们的程序的 VM 实例相同。

我能做些什么来解决这个问题？和想法或经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T07:46:18.143

这对我来说不是很清楚。

是否要覆盖系统属性？你可以这样做。

在调用外部库方法之前覆盖 System.property，当方法返回时，您可以将旧的 System.property 设置回来

```
 final String propertyName = "Property";
    String oldProperty = System.getProperty(propertyName);
    System.setProperty(propertyName,"NEW_VALUE");
    monitorProgram.process();
    System.setProperty(propertyName,oldProperty); 
```

或者你想防止被调用的进程覆盖system.property？为什么不能手动设置系统属性？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T07:57:49.603

我认为让两段代码使用不同的属性不会有很大的成功。

但是，在您自己的代码中，您可以定义自己的 URLStreamHandlerFactory。这样做将允许您从 URL 创建 javax.net.ssl.HttpsURLConnection。虽然协议处理程序并不是最容易弄清楚的事情，但我认为您可以让他们完成这项工作。

请参阅[http://java.sun.com/developer/onlineTraining/protocolhandlers/](http://java.sun.com/developer/onlineTraining/protocolhandlers/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T07:34:08.183

1.  在堆栈跟踪中找到有问题的类
2.  使用[jad](http://www.varaneckas.com/jad)或类似工具进行反编译。
3.  修正属性名称
4.  编译生成的文件，然后替换 CMS jar 中的 .class 文件，或者将其放入类路径中较早的位置。
5.  使用[ant](http://ant.apache.org/)自动化这个过程（嗯，JAR 的编译和构建；而不是反编译）
6.  当它工作时，请确保将所有内容（原始文件、更改的文件、构建文件）保存在某个地方，以便您可以轻松地再次执行此操作。

虽然这听起来像是解决问题的荒谬或危险的方法，但它会起作用。特别是因为您的 CMS 提供商似乎没有积极开发他的产品。

# sql - Transact-SQL：插入 xyz ( select * from abc )

> ID：909361
> 
> 赞同：2
> 
> 时间：2009-05-26T07:23:30.717
> 
> 标签：sql, sql-server, tsql, for-loop

我想在 MS SQL 中实现一个在 Oracle PL/SQL 中看起来像这样的构造：

```
declare
asdf number;
begin
for r in (select * from  xyz) loop
   insert into abc (column1, column2, column3) 
   values (r.asdf, r.vcxvc, r.dffgdfg) returning id into asdf;

    update xyz set column10 = asdf where ID = r.ID;
end loop;
end; 
```

任何想法如何实现这一点都会有所帮助。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-26T07:30:40.093

这似乎只是一张表的副本，对吧？

好：

```
SELECT column1, column2, column3 INTO abc FROM xyz 
```

我想你也可以像

```
INSERT INTO abc SELECT column1, column2, column3 FROM xyz 
```

但在第二种情况下，您需要先创建表，第一种情况也会创建 TABLE

干杯约翰内斯

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-26T07:33:23.270

没有光标但带有 temp 列的版本：

```
-- //temporarily add the column (assume the table "abc" already exists)
ALTER TABLE "abc" ADD xyzID INT;
GO;
-- //insert all the data (assuming the ID field on "xyz" is called ID)
INSERT INTO "abc" (column1, column2, column3, xyzID) SELECT asdf, vcxvc, rdffgdfg, ID FROM "xyz";
-- //update "xyd" with the new ID
UPDATE "xyd" SET column10 = "abc".ID FROM "xyd" INNER JOIN "abc" ON "xyd".ID = "abc".xydID
-- //drop the temporary column
ALTER TABLE "abc" DROP COLUMN xyzID; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-26T07:31:45.613

```
declare @asdf int/varchar -- unsure of datatype
declare @vcxvcint/varchar -- unsure of datatype
declare @dffgdfg int/varchar -- unsure of datatype
declare @id int    
declare db_cursor CURSOR FOR SELECT asdf, vcxvc, dffgdfg FROM xyz

OPEN db_cursor
FETCH NEXT FROM db_cursor
INTO @asdf, @vcxvcint, @dffgdfg

WHILE @@FETCH_STATUS = 0
BEGIN    
  insert into abc (column1, column2, column3) values (@asdf, @vcxvcint, @vcxvcint)    
  set @id = scope_identity() -- This will get the auto generated ID of the last inserted row
  update xyz set column10 = @asdf where id = @    
  FETCH NEXT FROM db_cursor INTO @name    
END

CLOSE db_cursor
DEALLOCATE db_cursor 
```

当然，如果您尝试将光标潜入生产代码中，基本上所有 DBA 都会杀死您。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-26T07:56:42.787

如果我理解你的问题（我不精通 PL/SQL），看起来很容易：

```
INSERT INTO abc(column1, column2, column3) SELECT asdf, vcxvc, dffgdfg FROM xyz;
UPDATE xyz SET column10 = id; 
```

但我只是猜测你的意图，希望没有误解。

PS：正如其他人已经指出的那样，您必须已经创建了表 abc

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-11-07T02:03:37.003

希望这是您正在寻找的：

```
declare
asdf number;
begin
for r in (select * from  xyz) loop
   insert into abc (column1, column2, column3) 
   values (r.asdf, r.vcxvc, r.dffgdfg) returning id into asdf;

    update xyz set column10 = asdf where ID = r.ID;
end loop;
end; 
```

*会成为*

```
DECLARE @asdf int
DECLARE @ID int
DECLARE @MyTmpTableVar table(asdf int, abc_id int)

// insert records from your cursor r into table abc, 
// and return a temporary table with "id" and "asdf" fields from the xyz table
INSERT INTO abc(column1, column2, column3)
OUTPUT asdf, id INTO @MyTmpTableVar
SELECT r.asdf, r.vcxvc, r.dffgdfg
FROM xyz

// if it would return just one row and you wanted to find the value
//SELECT @asdf = asdf, @id = abc_id
//FROM @MyTmpTableVar

// update the table xyz with the values stored in temporary table
// restricting by the key "id"
UPDATE xyz
SET xyz.column10 = t.asdf
FROM @MyTmpTableVar AS t
WHERE xyz.id = t.abc_id 
```

* * *

Oracle中**returning子句**的sqlServer版本是**OUTPUT**子句。

请访问**[此 msdn 页面](http://msdn.microsoft.com/en-us/library/ms177564.aspx)**以获取完整信息

# sql - 访问：如果表不存在则创建表

> ID：909371
> 
> 赞同：3
> 
> 时间：2009-05-26T07:26:02.490
> 
> 标签：sql, ms-access

你能给出一个等同于 MySQL 'CREATE TABLE IF NOT EXISTS ...' 的 MS Access 吗？

**更新**

像这样的东西

```
IF <no such table>
CREATE TABLE history(<fields>) 
```

也很合适

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-26T10:07:25.567

对于 SQL DDL 代码，答案是否定的。ACE/Jet SQL 没有任何流控制语法，一个 ACE/Jet`PROCEDURE`只能执行一条 SQL 语句。是的，没错：ACE/Jet`PROCEDURE`不支持程序代码 :(

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-26T16:07:25.527

以下是如何通过 VBA 执行此操作：

```
Sub ViaVBA()
    Const strSQLCreateFoo_c As String = _
          "CREATE TABLE Foo" & _
          "(" & _
          "MyField1 INTEGER," & _
          "MyField2 Text(10)" & _
          ");"
    Const strSQLAppendBs_c As String = _
          "INSERT INTO Foo (MyField1, MyField2) " & _
          "SELECT Bar.MyField1, Bar.MyField2 " & _
          "FROM Bar " & _
          "WHERE Bar.MyField2 Like 'B*';"

    If Not TableExists("foo") Then
        CurrentDb.Execute strSQLCreateFoo_c
    End If
    CurrentDb.Execute strSQLAppendBs_c
End Sub

Private Function TableExists(ByVal name As String) As Boolean
    On Error Resume Next
    TableExists = LenB(CurrentDb.TableDefs(name).name)
End Function 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2009-06-12T21:41:54.990

为什么要创建表？如果是用于临时数据存储，那很好，否则通常不需要。

请参阅我网站上的 TempTables.MDB 页面，该页面说明了如何在您的应用程序中使用临时 MDB。[http://www.granite.ab.ca/access/temptables.htm](http://www.granite.ab.ca/access/temptables.htm)

# php - 通过 HTTP 从远程服务器复制图像

> ID：909374
> 
> 赞同：84
> 
> 时间：2009-05-26T07:27:15.313
> 
> 标签：php, image, import, curl, copy

我正在寻找一种使用 PHP 将图像从远程服务器导入/复制到本地文件夹的简单方法。我无法通过 FTP 访问服务器，但所有远程图像都可以通过 HTTP 访问（即[http://www.mydomain.com/myimage.jpg](http://www.mydomain.com/myimage.jpg)）。

使用示例：用户希望将图像添加到他的个人资料中。该图像已存在于网络上，并且用户提供了直接 URL。我不希望对图像进行热链接，而是从我的域中导入和提供服务。

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2009-05-26T08:57:36.753

如果您在服务器上启用了 PHP5 和 HTTP 流包装器，则将其复制到本地文件非常简单：

```
copy('http://somedomain.com/file.jpeg', '/tmp/file.jpeg'); 
```

这将处理所需的任何流水线等。如果您需要提供一些 HTTP 参数，您可以提供第三个“流上下文”参数。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-01-17T09:37:34.830

采用

```
$imageString = file_get_contents("http://example.com/image.jpg");
$save = file_put_contents('Image/saveto/image.jpg',$imageString); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-05-26T07:47:03.370

PHP 有一个内置函数 file_get_contents()，它将文件的内容读入字符串。

```
`<?php
//Get the file
$content = file_get_contents("[http://example.com/image.jpg](http://example.com/image.jpg)");

//Store in the filesystem.
$fp = fopen("/location/to/save/image.jpg", "w");
fwrite($fp, $content);
fclose($fp);
?>` 
```

`如果您希望将文件存储在数据库中，只需使用 $content 变量，不要将文件保存到磁盘。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-05-26T07:43:00.820

你有这四种可能性：

*   [远程文件](http://www.php.net/manual/en/features.remote-files.php)。这需要`allow_url_fopen`在 php.ini 中启用，但这是最简单的方法。

*   或者，如果您的 PHP 安装支持它，您可以使用[cURL 。](http://www.php.net/manual/en/book.curl.php)甚至还有一个[例子](http://www.php.net/manual/en/curl.examples-basic.php)。

*   如果你真的想手动使用[HTTP 模块](http://www.php.net/manual/en/book.http.php)。

*   甚至不要尝试[直接使用套接字](http://www.php.net/manual/en/book.sockets.php)。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-26T07:43:46.480

这是最基本的方法：

```
$url = "http://other-site/image.png";
$dir = "/my/local/dir/";

$rfile = fopen($url, "r");
$lfile = fopen($dir . basename($url), "w");

while(!feof($url)) fwrite($lfile, fread($rfile, 1), 1);

fclose($rfile);
fclose($lfile); 
```

但是，如果您正在做很多这样的事情（或者您的主机阻止了对远程系统的文件访问），请考虑使用 CURL，它更高效、速度更快并且在更多共享主机上可用。

您还可以欺骗用户代理，使其看起来像桌面而不是机器人！

```
$url = "http://other-site/image.png";
$dir = "/my/local/dir/";
$lfile = fopen($dir . basename($url), "w");

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)');
curl_setopt($ch, CURLOPT_FILE, $lfile);

fclose($lfile);
curl_close($ch); 
```

对于这两个实例，您可能希望通过 GD 传递它以确保它确实是一个图像。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-26T07:39:30.903

[使用file_get_contents](http://se2.php.net/file_get_contents)非常简单。只需提供 url 作为第一个参数。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-01-02T07:22:40.680

制作文件夹并将其命名为敌人示例下载打开记事本并插入此代码

例如，只需将[http://www.google.com/aa.zip](http://www.google.com/aa.zip)更改为您的文件并将其保存到 m.php

chamod php 文件到 666 和文件夹下载到 777

```
<?php
define('BUFSIZ', 4095);
$url = 'http://www.google.com/aa.zip';
$rfile = fopen($url, 'r');
$lfile = fopen(basename($url), 'w');
while(!feof($rfile))
fwrite($lfile, fread($rfile, BUFSIZ), BUFSIZ);
fclose($rfile);
fclose($lfile);
?> 
```

最后从您的浏览器输入这些 URL [http://www.example.com/download/m.php](http://www.example.com/download/m.php)

您将在下载文件夹中看到从其他服务器下载的文件

谢谢

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-26T07:28:33.953

使用 GET 请求下载图像并将其保存到服务器上的 Web 可访问目录。

当您使用 PHP 时，您可以使用`curl`从其他服务器下载文件。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-26T07:45:21.640

由于您已将问题标记为“php”，因此我假设您在服务器上运行 php。最好的办法是，如果您控制自己的 Web 服务器，然后将 cURL 编译成 php。这将允许您的 Web 服务器向其他 Web 服务器发出请求。从安全的角度来看，这可能非常危险，因此大多数基本的网络托管服务提供商都不会启用此选项。

这是[关于使用 cURL 的 php 手册页](http://php.net/manual/en/function.curl-exec.php)。在评论中，您可以找到下载和图像文件的示例。

如果您不想使用 libcurl，可以使用 fsockopen 编写代码。这是内置在 php 中的（但可能在您的主机上被禁用），并且可以直接读取和写入套接字。请参见[fsockopen 手册页上的示例](http://php.net/fsockopen)。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-06-10T23:23:28.573

对于那些需要保留原始文件名和扩展名的人

```
$origin = 'http://example.com/image.jpg';

$filename = pathinfo($origin, PATHINFO_FILENAME);
$ext = pathinfo($origin, PATHINFO_EXTENSION);

$dest = 'myfolder/' . $filename . '.' . $ext;

copy($origin, $dest); 
```

* * *

## 回答 #11

> 赞同：-5
> 
> 时间：2016-09-18T10:38:03.130

[这个答案](https://stackoverflow.com/a/16302092/1330787)帮助我将图像从服务器下载到客户端。

```
<a download="original_file.jpg" href="file/path.jpg">
  <img src="file/path.jpg" class="img-responsive" width="600" />
</a> 
```

# java - @ModelAttribute 注解参数的数据绑定

> ID：909396
> 
> 赞同：2
> 
> 时间：2009-05-26T07:34:09.667
> 
> 标签：java, spring, spring-mvc, annotations

我有一个 Spring 2.5 带注释的控制器，其中有一个用 @RequestMapping(method=RequestMethod.GET) 注释的方法，它执行一些逻辑来填充模型。

我还有一个用 @RequestMapping(method=RequestMethod.POST) 注释的方法来执行请求。这个方法有一个@ModelAttribute注解的参数，里面包含了我自己的表单pojo，我们称之为MyForm。我还有一个 MyForm 的初始化方法，也用 @ModelAttrribute 注释。现在到目前为止一切都按预期工作：在 POST 请求中，表单数据绑定到 MyForm，我可以处理它。

问题是我希望能够通过传入（GET）请求参数来预填充表单。因为我有 MyForm 的 @ModelAttribute 方法，所以我在我的模型中得到了一个 MyForm 实例，但它不会被填充，除非我专门将它用作我的 GET 方法的参数。

为什么我必须这样做，是否可以以不同的方式在我的表单上强制数据绑定以获取 GET 请求？我现在只是传入参数，但是因为它已经在模型中，所以我不必对它做任何事情，从而导致丑陋的未使用方法参数。

[编辑：一些代码示例来说明]

在获取请求时不填充表单的控制器：

```
@Controller
public class MyController {

  @ModelAttribute("myForm")
  public MyForm createForm() {
    return new MyForm();
  }

  @RequestMapping(method=RequestMethod.GET)
  public void handlePage(Model model) {
    //Do some stuff to populate the model....
  }

  @RequestMapping(method=RequestMethod.POST)
  public void processForm(@ModelAttribute("myForm") MyForm myForm) {
    //Process the form
  }
} 
```

当我更改 handlePage 方法的方法签名时，它会在获取请求中填充...

```
@RequestMapping(method=RequestMethod.GET)
public void handlePage(Model model, @ModelAttribute("myForm") MyForm myForm) {
  //Do some stuff to populate the model....
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T01:15:51.803

带有 的方法`@ModelAttribute`允许有任何`@RequestMapping`支持的参数，例如，您可以根据需要添加多少个`@RequestParam`参数来填充命令对象，甚至是 http 请求本身。我不确定您是否可以以相同的方式获取数据绑定器的实例。

再次阅读文档，我认为这个想法是该方法中的预填充将是数据库驱动的，这可能就是为什么如果不将作为参数添加到方法`@ModelAttribute`中就不会发生任何数据绑定的原因。`@ModelAttribute``@RequestMapping`

# php - 在 OO 中重写中型应用程序

> ID：909400
> 
> 赞同：1
> 
> 时间：2009-05-26T07:35:17.200
> 
> 标签：php, oop

我可以采取哪些方法将相当大的程序 php*大约 2000 行代码*应用程序重写为 oo 应用程序。我应该尝试这样做，还是应该在现有应用程序之上构建？我在学习编程时写了它，现在我想扩展它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T07:37:21.563

没有银弹。然而，你可以做的比拿起这本书更糟糕：http: [//www.amazon.co.uk/Working-Effectively-Legacy-Robert-Martin/dp/0131177052](http://www.amazon.co.uk/Working-Effectively-Legacy-Robert-Martin/dp/0131177052)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-26T08:05:53.753

我可能会执行以下操作，将应用程序转换为 MVC：

1.  确定每个功能的用途（是否处理请求参数、输出数据、查询数据库？）
2.  尝试重构完成上述所有功能的函数，方法是将它们拆分为只做其中一件事情的函数。
3.  对于每个函数，尝试找到一个合适的顶级对象/类，该对象/类可以包含该函数作为方法

    ```
    function addUserRecord($dbHandle, $userData) {[...]} 
    // Becomes
    class User {
        private $db;
        public function addUser($data) {
            [...]
        }
    } 
    ```

4.  对于可以从外部访问的每个单独的 *.php 文件，将其转换为相应控制器的操作：

    > *[http://foo.bar.com/user/addUser.php](http://foo.bar.com/user/addUser.php)* // 变成
    > *[http://foo.bar.com/user/add-user](http://foo.bar.com/user/add-user)*

    对应的控制器，使用[Zend_Framework](http://framework.zend.com)

    ```
    class UserController extends Zend_Controller_Action {
        public function addUserAction () {
           [...]
        }
    } 
    ```

5.  将所有输出特定的东西（例如回显）移动到视图中。

最困难的部分可能是创建合适的模型，但这非常重要，并且将成为您应用程序的基础。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T09:48:50.690

如果您希望添加新功能或显着扩展应用程序，请随时改进现有代码库。签入代码总是比签出更好。但是，做一个大的重写不是很好地利用时间。

编写测试来证明现有的遗留代码库正在满足重要的业务需求也将对您有所帮助。然后，您可以在不破坏应用程序的情况下更改遗留代码。如果您确实破坏了某些东西，您将知道是什么，大致是为什么，并且能够快速修复它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-26T09:35:16.350

**精心设计**的 OOP的优点是您的组件易于重用，并且简化了团队工作。Ant 再次支持代码更简单，您知道哪里是什么，并且在 OO 中您可以仅通过类名找到它。所以你决定是否需要它。有时*多就是少*...

# file - 将包含字符串的文件复制到 oneliner 位置 - cmd.exe 有更好的方法吗？

> ID：909414
> 
> 赞同：2
> 
> 时间：2009-05-26T07:39:24.243
> 
> 标签：file, copy, cmd

这个

```
 for /f "tokens=*" %i in ('dir *sonic.exe /s /b') do copy /y "%i" D:\temp\utils\ 
```

问题是有更好或更短的方法吗？

ps 我知道如果文件路径没有空格，可以省略“tokens=*”..

更新：我从旧的备忘单中找到了一种更短的查找（而不是复制）方法：

```
::START - RUN - cmd.exe
 dir d:\libs\*SubSonic*.dll /s /b>>list.txt&list.txt
:: START - RUN - CMD.EXE 
where /R D:\libs\ *SubSonic* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T07:42:59.133

您可以使用[`XCOPY`](http://technet.microsoft.com/en-us/library/bb491035.aspx).

这将起作用，但也会复制我认为不是您想要的目录结构：

```
XCOPY /S *sonic.exe D:\temp\utils 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T07:43:54.920

就像是

```
dir -r -i *sonic.exe | select-string "tokens=" | % {cp $_ d:\temp\utils} 
```

? [在 PS 中]

# c# - LINQ to NHibernate ActiveRecord 的状态

> ID：909417
> 
> 赞同：2
> 
> 时间：2009-05-26T07:40:44.193
> 
> 标签：c#, linq, activerecord, castle-activerecord

有谁知道 LINQ to NHibernate ActiveRecord 是否已准备好投入生产？

我即将开始一个项目，该项目的建模期限很紧。与我之前使用 LINQ to SQL 的经验相比，ActiveRecord 看起来像是赢家。LINQ to SQLs db first 很好，但一段时间后有点麻烦。LINQ to SQL 如此吸引人的原因在于 LINQ 查询。

可以在 ActiveRecord 中使用相同的 LINQ 语法吗？

社区如何看待 ActiveRecord 和 LINQ to ActiveRecord 用于生产？

五

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-10-17T15:46:57.287

时间过去了，NHibernate 从 2.1 开始就有 LINQ 提供程序，从 2.0 开始就有 ActiveRecord。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T07:50:22.160

LINQ to ActiveRecord 构建在 LINQ to NHibernate 之上。这暂时不会出现，但您可以在[Steve Strong 的博客](http://blogs.imeta.co.uk/sstrong/Default.aspx)上关注进度。

# maven-2 - maven，蚂蚁插件

> ID：909421
> 
> 赞同：0
> 
> 时间：2009-05-26T07:41:17.547
> 
> 标签：maven-2, ant, maven-plugin

是否可以将 ant 执行附加到特定的插件/目标？（我知道如果我这样做，我将失去 Maven 的声明性方面......）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-26T07:43:23.203

查看[Maven AntRun 插件](http://maven.apache.org/plugins/maven-antrun-plugin/)，这正是您正在寻找的

这是其主页上的一个示例

```
<project>
  ...
  <build>
    <plugins>
      ...
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-antrun-plugin</artifactId>
        <version>1.2</version>
        <executions>
          <execution>
            <phase> <!-- a lifecycle phase --> </phase>
            <configuration>

              <!-- ANT TASKS HERE -->

            </configuration>
            <goals>
              <goal>run</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      ...
    </plugins>
  </build>
  ...
</project> 
```

# c++ - 是否有一个智能指针在其目标在 C++ 中被销毁时自动为空

> ID：909437
> 
> 赞同：4
> 
> 时间：2009-05-26T07:46:17.847
> 
> 标签：c++, pointers, smart-pointers, qpointer

我找到[了 QPointer](http://doc.trolltech.com/4.5/qpointer.html)。还有其他人吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-26T08:11:38.827

[Boost](http://www.boost.org/doc/libs/1_39_0/libs/smart_ptr/weak_ptr.htm) -`weak_ptr`如果您也在使用`shared_ptr`. 您保留`weak_ptr`对由`shared_ptr`生命周期管理的实例的引用。当需要使用底层实例时，`shared_ptr`使用类的构造函数`shared_ptr`或`lock`方法将其转换为实例。如果底层实例被删除，操作将失败。使用与类相同的方式是线程安全的`shared_ptr`：

```
shared_ptr<int> p(new int(5));
weak_ptr<int> q(p);

// some time later

if(shared_ptr<int> r = q.lock())
{
    // use *r
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-26T08:10:10.203

"boost::weak_ptr" 与 "boost::shared_ptr" 配合得非常好（在 tr1 中也可用）

# multithreading - 无锁多读单写

> ID：909443
> 
> 赞同：5
> 
> 时间：2009-05-26T07:48:56.750
> 
> 标签：multithreading, delphi, lock-free

我有一个内存数据结构，由多个线程读取并由一个线程写入。目前我正在使用一个关键部分来使这个访问线程安全。不幸的是，即使只有另一个读者正在访问它，这也会阻止读者。

有两种方法可以解决此问题：

1.  使用 TMultiReadExclusiveWriteSynchronizer
2.  通过使用无锁方法消除任何阻塞

对于 2\. 到目前为止，我得到了以下内容（任何无关紧要的代码都被省略了）：

```
type
  TDataManager = class
  private
    FAccessCount: integer;
    FData: TDataClass;
  public
    procedure Read(out _Some: integer; out _Data: double);
    procedure Write(_Some: integer; _Data: double);
  end;

procedure TDataManager.Read(out _Some: integer; out _Data: double);
var
  Data: TDAtaClass;
begin
  InterlockedIncrement(FAccessCount);
  try
    // make sure we get both values from the same TDataClass instance
    Data := FData;
    // read the actual data
    _Some := Data.Some;
    _Data := Data.Data;
  finally
    InterlockedDecrement(FAccessCount);
  end;
end;

procedure TDataManager.Write(_Some: integer; _Data: double);
var
  NewData: TDataClass;
  OldData: TDataClass;
  ReaderCount: integer;
begin
  NewData := TDataClass.Create(_Some, _Data);
  InterlockedIncrement(FAccessCount);
  OldData := TDataClass(InterlockedExchange(integer(FData), integer(NewData));
  // now FData points to the new instance but there might still be
  // readers that got the old one before we exchanged it.
  ReaderCount := InterlockedDecrement(FAccessCount);
  if ReaderCount = 0 then
    // no active readers, so we can safely free the old instance
    FreeAndNil(OldData)
  else begin
    /// here is the problem
  end;
end; 
```

不幸的是，在旧数据实例被替换后，它存在一个小问题。如果 Read 方法中当前没有其他线程（ReaderCount=0），则可以安全地处理它，仅此而已。但如果不是这样，我该怎么办？我可以将它存储到下一次调用并在那里处理它，但是 Windows 调度理论上可以让读取器线程在 Read 方法中休眠并且仍然具有对 OldData 的引用。

如果您发现上述代码有任何其他问题，请告诉我。这将在具有多核的计算机上运行，​​并且上述方法将被非常频繁地调用。

万一这很重要：我正在使用带有内置内存管理器的 Delphi 2007。我知道内存管理器在创建新类时可能会强制执行一些锁定，但我暂时想忽略它。

编辑：从上面可能不清楚：对于 TDataManager 对象的整个生命周期，只有一个线程写入数据，而不是几个可能竞争写访问的线程。所以这是 MREW 的一个特例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-26T08:29:25.187

我不知道可以在 Intel86 代码上实现的任何无锁（或上面示例中的微锁定）MREW 方法。

对于小型（快速过期）锁，来自[OmniThreadLibrary](http://code.google.com/p/omnithreadlibrary/source/browse/branches/fast-notifications/OtlSync.pas)的旋转方法可以正常工作：

```
type
TOmniMREW = record
strict private
  omrewReference: integer;      //Reference.Bit0 is 'writing in progress' flag
public
  procedure EnterReadLock; inline;
  procedure EnterWriteLock; inline;
  procedure ExitReadLock; inline;
  procedure ExitWriteLock; inline;
end; { TOmniMREW }

procedure TOmniMREW.EnterReadLock;
var
  currentReference: integer;
begin
  //Wait on writer to reset write flag so Reference.Bit0 must be 0 than increase Reference
  repeat
    currentReference := omrewReference AND NOT 1;
  until currentReference = InterlockedCompareExchange(omrewReference, currentReference + 2, currentReference);
end; { TOmniMREW.EnterReadLock }

procedure TOmniMREW.EnterWriteLock;
var
  currentReference: integer;
begin
  //Wait on writer to reset write flag so omrewReference.Bit0 must be 0 then set omrewReference.Bit0
  repeat
    currentReference := omrewReference AND NOT 1;
  until currentReference = InterlockedCompareExchange(omrewReference, currentReference + 1, currentReference);
  //Now wait on all readers
  repeat
  until omrewReference = 1;
end; { TOmniMREW.EnterWriteLock }

procedure TOmniMREW.ExitReadLock;
begin
  //Decrease omrewReference
  InterlockedExchangeAdd(omrewReference, -2);
end; { TOmniMREW.ExitReadLock }

procedure TOmniMREW.ExitWriteLock;
begin
  omrewReference := 0;
end; { TOmniMREW.ExitWriteLock } 
```

我刚刚注意到这里可能存在对齐问题 - 代码应检查 omrewReference 是否为 4 对齐。会通知作者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-05-20T02:18:25.550

我有一个潜在的解决方案给你；它让新读者可以随时开始，直到作者想写为止。然后作者等待读者完成并执行其写入。写完后，读者可以再次阅读。

此外，此解决方案不需要锁或互斥锁，但它确实需要原子测试和设置操作。我不了解 Delphi，我用 Lisp 编写了我的解决方案，所以我将尝试用伪代码来描述它。

（CAPS 是函数名，所有这些函数都接受和返回不带参数）

```
integer access-mode = 1; // start in reader mode. 

WRITE  loop with current = accessmode, 
            with new = (current & 0xFFFFFFFe) 
            until test-and-set(access-mode, current to new)
       loop until access-mode = 0; 

ENDWRITE assert( access-mode = 0)
         set access-mode to 1

READ loop with current = ( accessmode | 1 ),
          with new = (current + 2),
          until test-and-set(access-mode, current to new)
ENDREAD loop with current = accessmode
             with new = (current - 2),
             until test-and-set(access-mode, current to new) 
```

要使用，阅读器在阅读前调用 READ，完成后调用 ENDREAD。单独的写入者在写入之前调用 WRITE，完成后调用 ENDWRITE。

这个想法是一个称为访问模式的整数，它在最低位保存一个布尔值，在高位保存一个计数。WRITE 将该位设置为 0，然后旋转直到足够的 ENDREAD 将访问模式倒计时为零。Endwrite 将访问模式设置回 1。将当前访问模式与 1 进行 READ OR 运算，因此只有在低位开始时它们的测试和设置才会通过。我加减 2 以单独保留低位。

要计算读者数量，只需将访问模式右移一位即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T18:16:23.957

只是一个补充 - 你在这里看到的通常被称为[危险指针](http://www.research.ibm.com/people/m/michael/ieeetpds-2004.pdf)。我不知道你是否可以在 Delphi 中做类似的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-27T06:49:21.863

自从我在 Delphi 中手忙脚乱以来已经有一段时间了，所以在使用之前验证这一点，但是......从内存中，如果你使用接口和使用 TInterfacedObject 的实现，你可以获得引用计数行为。

```
type
    IDataClass = interface
        function GetSome: integer;
        function GetData: double;

        property Some: integer read GetSome;
        property Data: double read GetData;
    end;

    TDataClass = class(TInterfacedObject, IDataClass)
    private
        FSome: integer;
        FData: double;
    protected
        function GetSome: integer;
        function GetData: double;
    public
        constructor Create(ASome: integer; AData: double);
    end; 
```

然后，您将所有变量都设为 ISomeData 类型（混合 ISomeData 和 TSomeData 是一个非常糟糕的主意……您很容易遇到引用计数问题）。

基本上，这将导致引用计数在您的阅读器代码中自动增加，它会在其中加载对数据的本地引用，并且当变量离开范围时它会减少，此时它将在那里取消分配。

我知道在接口和类实现中复制数据类的 API 有点乏味，但这是获得所需行为的最简单方法。

# javascript - Anagrams finder in javascript

> ID：909449
> 
> 赞同：23
> 
> 时间：2009-05-26T07:49:58.900
> 
> 标签：javascript, string, function, comparison, anagram

I am supposed to write a program in JavaScript to find all the anagrams within a series of words provided. e.g.:

`monk, konm, nkom, bbc, cbb, dell, ledl, llde`

The output should be categorised into rows:

```
1\. monk konm, nkom;
2\. bbc cbb;
3\. dell ledl, llde; 
```

I already sorted them into alphabetical order and put them into an array. i.e.:

`kmno kmno bbc bbc dell dell`

However I am stuck in comparing and finding the matching anagram within the array.

Any help will be greatly appreciated.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-26T08:20:12.227

Here is my take:

```
var input = "monk, konm, bbc, cbb, dell, ledl";
var words = input.split(", ");

for (var i = 0; i < words.length; i++) {

  var word = words[i];
  var alphabetical = word.split("").sort().join("");

  for (var j = 0; j < words.length; j++) {

    if (i === j) {
      continue;
    }

    var other = words[j];
    if (alphabetical === other.split("").sort().join("")) {
      console.log(word + " - " + other + " (" + i + ", " + j + ")");
    }
  }
}
```

where the output would be (the word, the match and the index of both):

```
monk - konm (0, 1)
konm - monk (1, 0)
bbc - cbb (2, 3)
cbb - bbc (3, 2)
dell - ledl (4, 5)
ledl - dell (5, 4) 
```

To get the characters in the in alphabetical order, I used split("") ot get an array, called sort() and used join("") to get a string from the array.

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-05-26T08:06:34.157

Javascript objects are excellent for this purpose, since they are essentially key/value stores:

```
// Words to match
var words = ["dell", "ledl", "abc", "cba"];

// The output object
var anagrams = {};

for (var i in words) {
    var word = words[i];

    // sort the word like you've already described
    var sorted = sortWord(word);

    // If the key already exists, we just push
    // the new word on the the array
    if (anagrams[sorted] != null) {
        anagrams[sorted].push(word);
    } 
    // Otherwise we create an array with the word
    // and insert it into the object
    else {
        anagrams[sorted] = [ word ];
    }
}

// Output result
for (var sorted in anagrams) {
    var words = anagrams[sorted];
    var sep = ",";
    var out = "";
    for (var n in words) {
        out += sep + words[n];
        sep = "";
    }
    document.writeln(sorted + ": " + out + "<br />");
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-07-15T06:21:20.030

> Simple Solution

```
function anagrams(stringA, stringB) {
    return cleanString(stringA) === cleanString(stringB);
}

function cleanString(str) {
    return str.replace(/[^\w]/g).toLowerCase().split('').sort().join()
}   

anagrams('monk','konm') 
```

> If it is anagrams function will return true otherwise false

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-05-16T00:50:39.657

I worked through a similar question to this today and wanted to share the results of my work. I was focused on just detecting the anagram so processing the list of words was not part of my exercise but this algorithm should provide a highly performant way to detect an anagram between two words.

```
function anagram(s1, s2){
  if (s1.length !== s2.length) {
    // not the same length, can't be anagram
    return false;
  }
  if (s1 === s2) {
    // same string must be anagram
    return true;
  }

  var c = '',
    i = 0,
    limit = s1.length,
    match = 0,
    idx;
  while(i < s1.length){
    // chomp the next character
    c = s1.substr(i++, 1);
    // find it in the second string
    idx = s2.indexOf(c);
    if (idx > -1) {
      // found it, add to the match
      match++;
      // assign the second string to remove the character we just matched
      s2 = s2.substr(0, idx) + s2.substr(idx + 1);
    } else {
      // not found, not the same
      return false;
    }
  }
  return match === s1.length;
} 
```

I think technically is can be solved like this:

```
function anagram(s1, s2){
  return s1.split("").sort().join("") === s2.split("").sort().join("");
} 
```

The reason I chose the earlier approach is that it is more performant for larger strings since you don't need to sort either string, convert to an array or loop through the entire string if any possible failure case is detected.

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-07-05T12:10:22.633

Probably not the most efficient way, but a clear way around using es6

```
function sortStrChars(str) {
  if (!str) {
    return;
  }
  str = str.split('');
  str = str.sort();
  str = str.join('');
  return str;
}

const words = ["dell", "ledl", "abc", "cba", 'boo'];

function getGroupedAnagrams(words) {
  const anagrams = {}; // {abc:[abc,cba], dell:[dell, ledl]}
  words.forEach((word) => {
    const sortedWord = sortStrChars(word);
    if (anagrams[sortedWord]) {
      return anagrams[sortedWord].push(word);
    }
    anagrams[sortedWord] = [word];
  });
  return anagrams;
}

const groupedAnagrams = getGroupedAnagrams(words);
for (const sortedWord in groupedAnagrams) {
  console.log(groupedAnagrams[sortedWord].toString());
}
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-02-10T20:57:01.837

I had this question in an interview. Given an array of words ['cat', 'dog', 'tac', 'god', 'act'], return an array with all the anagrams grouped together. Makes sure the anagrams are unique.

```
var arr = ['cat', 'dog', 'tac', 'god', 'act'];

var allAnagrams = function(arr) {
    var anagrams = {};
    arr.forEach(function(str) {
        var recurse = function(ana, str) {
            if (str === '') 
                anagrams[ana] = 1;
            for (var i = 0; i < str.length; i++)
                recurse(ana + str[i], str.slice(0, i) + str.slice(i + 1));
        };
        recurse('', str);
    });
    return Object.keys(anagrams);
}

console.log(allAnagrams(arr));
//["cat", "cta", "act", "atc", "tca", "tac", "dog", "dgo", "odg", "ogd", "gdo", "god"] 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-12-18T14:21:30.413

Best and simple way to solve is using for loops and traversing it to each string and then store their result in object.

Here is the solution :-

```
function anagram(str1, str2) {
    if (str1.length !== str2.length) {
        return false;
    }
    const result = {};
    for (let i=0;i<str1.length;i++) {
        let char = str1[i];
        result[char] = result[char] ? result[char] += 1 : result[char] = 1;
    }

    for (let i=0;i<str2.length;i++) {
        let char = str2[i];
        if (!result[char]) {
            return false;
        }
        else {
            result[char] = -1;
        }
    }
    return true;
}

console.log(anagram('ronak','konar'));
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2011-04-12T22:36:50.120

**I know this is an ancient post...but I just recently got nailed during an interview on this one. So, here is my 'new & improved' answer:**

```
var AnagramStringMiningExample = function () {

/* Author: Dennis Baughn
*  This has also been posted at: 
*  http://stackoverflow.com/questions/909449/anagrams-finder-in-javascript/5642437#5642437

*  Free, private members of the closure and anonymous, innner function
*  We will be building a hashtable for anagrams found, with the key 
*  being the alphabetical char sort (see sortCharArray()) 
*  that the anagrams all have in common. 
*/
    var dHash = {};

    var sortCharArray = function(word) {
        return word.split("").sort().join("");
    };

/* End free, private members for the closure and anonymous, innner function */

/* This goes through the dictionary entries. 
 *  finds the anagrams (if any) for each word,
 *  and then populates them in the hashtable. 
 *  Everything strictly local gets de-allocated 
 *  so as not to pollute the closure with 'junk DNA'.
*/
    (function() {
       /* 'dictionary' referring to English dictionary entries. For a real 
        *  English language dictionary, we could be looking at 20,000+ words, so 
        *  an array instead of a string would be needed.
        */
       var dictionaryEntries = "buddy,pan,nap,toot,toto,anestri,asterin,eranist,nastier,ratines,resiant,restain,retains,retinas,retsina,sainter,stainer,starnie,stearin";
       /* This could probably be refactored better.  
        * It creates the actual hashtable entries. */
       var populateDictionaryHash = function(keyword, newWord) {
          var anagrams = dHash[keyword];
          if (anagrams && anagrams.indexOf(newWord) < 0) 
            dHash[keyword] = (anagrams+','+newWord);
          else dHash[keyword] = newWord;
       };

       var words = dictionaryEntries.split(",");

       /* Old School answer, brute force
       for (var i = words.length - 1; i >= 0; i--) {
        var firstWord = words[i];
        var sortedFirst = sortCharArray(firstWord);
        for (var k = words.length - 1; k >= 0; k--) {
               var secondWord = words[k];
           if (i === k) continue;
            var sortedSecond = sortCharArray(secondWord);
            if (sortedFirst === sortedSecond)   
                       populateDictionaryHash(sortedFirst, secondWord);
        }
       }/*

        /*Better Method for JS, using JS Array.reduce(callback) with scope binding on callback function */
        words.reduce(function (prev, cur, index, array) { 
            var sortedFirst = this.sortCharArray(prev);
            var sortedSecond = this.sortCharArray(cur); 
            if (sortedFirst === sortedSecond) {
                var anagrams = this.dHash[sortedFirst];
                if (anagrams && anagrams.indexOf(cur) < 0) 
                   this.dHash[sortedFirst] = (anagrams + ',' + cur);
                else 
                   this.dHash[sortedFirst] = prev + ','+ cur;                    
            }
            return cur;
        }.bind(this));
    }());

    /* return in a nice, tightly-scoped closure the actual function 
     *  to search for any anagrams for searchword provided in args and render results. 
    */
    return function(searchWord) {
       var keyToSearch = sortCharArray(searchWord);
       document.writeln('<p>');
       if (dHash.hasOwnProperty(keyToSearch)) {
        var anagrams = dHash[keyToSearch];
        document.writeln(searchWord + ' is part of a collection of '+anagrams.split(',').length+' anagrams: ' + anagrams+'.');
       } else document.writeln(searchWord + ' does not have anagrams.');
       document.writeln('<\/p>');
    };
}; 
```

**Here is how it executes:**

```
var checkForAnagrams = new AnagramStringMiningExample();
checkForAnagrams('toot');
checkForAnagrams('pan');
checkForAnagrams('retinas');
checkForAnagrams('buddy'); 
```

**Here is the output of the above:**

> toot is part of a collection of 2 anagrams: toto,toot.
> 
> pan is part of a collection of 2 anagrams: nap,pan.
> 
> retinas is part of a collection of 14 anagrams: stearin,anestri,asterin,eranist,nastier,ratines,resiant,restain,retains,retinas,retsina,sainter,stainer,starnie.
> 
> buddy does not have anagrams.

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-07-16T13:43:09.170

My solution to this old post:

```
// Words to match
var words = ["dell", "ledl", "abc", "cba"],
    map = {};

//Normalize all the words 
var normalizedWords = words.map( function( word ){
  return word.split('').sort().join('');
});

//Create a map: normalizedWord -> real word(s)
normalizedWords.forEach( function ( normalizedWord, index){
  map[normalizedWord] = map[normalizedWord] || [];
  map[normalizedWord].push( words[index] );
});

//All entries in the map with an array with size > 1 are anagrams
Object.keys( map ).forEach( function( normalizedWord , index  ){
  var combinations = map[normalizedWord];
  if( combinations.length > 1 ){
    console.log( index + ". " + combinations.join(' ') );
  }
}); 
```

Basically I normalize every word by sorting its characters so *stackoverflow* would be *acefkloorstvw*, build a map between normalized words and the original words, determine which normalized word has more than 1 word attached to it -> That's an anagram.

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-03-14T16:33:39.820

My two cents.

This approach uses XOR on each character in both words. If the result is 0, then you have an anagram. This solution assumes case sensitivity.

```
let first = ['Sower', 'dad', 'drown', 'elbow']
let second = ['Swore', 'add', 'down', 'below']

// XOR all characters in both words
function isAnagram(first, second) {
  // Word lengths must be equal for anagram to exist
  if (first.length !== second.length) {
    return false
  }

  let a = first.charCodeAt(0) ^ second.charCodeAt(0)

  for (let i = 1; i < first.length; i++) {
    a ^= first.charCodeAt(i) ^ second.charCodeAt(i)
  }

  // If a is 0 then both words have exact matching characters
  return a ? false : true
}

// Check each pair of words for anagram match
for (let i = 0; i < first.length; i++) {
  if (isAnagram(first[i], second[i])) {
    console.log(`'${first[i]}' and '${second[i]}' are anagrams`)
  } else {
    console.log(`'${first[i]}' and '${second[i]}' are NOT anagrams`)
  }
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-12-18T16:59:24.350

the answer that comes to my mind:

```
function anagrams(stringA, stringB) {
  const aCharMap = buildCharMap(stringA);
  const bCharMap = buildCharMap(stringB);

  if (Object.keys(aCharMap).length !== Object.keys(bCharMap).length) {
    return false;
  }

  for (let char in aCharMap) {
    if (aCharMap[char] !== bCharMap[char]) {
      return false;
    }
  }

  return true;
} 
```

helper function:

```
function buildCharMap(str) {
  const charMap = {};

  for (let char of str.replace(/[^\w]/g, '')) {
    charMap[char] = charMap[char] + 1 || 1;
  }

  return charMap;
} 
```

**but** if you're looking for the easiest way:

```
function anagrams(stringA, stringB) {
  return cleanString(stringA) === cleanString(stringB);
}

function cleanString(str) {
  return str.replace(/[^\w]/g, '').toLowerCase().split('').sort().join('');
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-06-01T16:50:53.703

```
function isAnagram(str1, str2) {
  var str1 = str1.toLowerCase();
  var str2 = str2.toLowerCase();

  if (str1 === str2)
    return true;

  var dict = {};

  for(var i = 0; i < str1.length; i++) {
    if (dict[str1[i]])
      dict[str1[i]] = dict[str1[i]] + 1;
    else
      dict[str1[i]] = 1;
  }

  for(var j = 0; j < str2.length; j++) {
    if (dict[str2[j]])
      dict[str2[j]] = dict[str2[j]] - 1;
    else
      dict[str2[j]] = 1;
  }

  for (var key in dict) {
    if (dict[key] !== 0) 
      return false;
  }

  return true;
}

console.log(isAnagram("hello", "olleh")); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-12-08T11:52:52.077

I have an easy example

```
function isAnagram(strFirst, strSecond) {

 if(strFirst.length != strSecond.length)
       return false;

 var tempString1 = strFirst.toLowerCase();
 var tempString2 = strSecond.toLowerCase();

 var matched = true ;
 var cnt = 0;
 while(tempString1.length){
    if(tempString2.length < 1)
        break;
    if(tempString2.indexOf(tempString1[cnt]) > -1 )
        tempString2 = tempString2.replace(tempString1[cnt],'');
    else
        return false;

    cnt++;
 }

 return matched ;

 } 
```

Calling function will be `isAnagram("Army",Mary);` Function will return `true` or `false`

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-12-28T18:30:58.113

Maybe this?

```
function anagram (array) {
    var organized = {};
    for (var i = 0; i < array.length; i++) {
        var word = array[i].split('').sort().join('');
        if (!organized.hasOwnProperty(word)) {
            organized[word] = [];
        }
        organized[word].push(array[i]);
    }    
    return organized;
}

anagram(['kmno', 'okmn', 'omkn', 'dell', 'ledl', 'ok', 'ko']) // Example 
```

It'd return something like

```
{
    dell: ['dell', 'ledl'],
    kmno: ['kmno', okmn', 'omkn'],
    ko: ['ok', ko']
} 
```

It's a simple version of what you wanted and certainly it could be improved avoiding duplicates for example.

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-03-31T06:52:36.980

1.  Compare string length, if not equal, return `false`
2.  Create character Hashmap which stores count of character in `strA` e.g. `Hello` --> `{H: 1, e: 1, l: 2, o: 1}`
3.  Loop over the second string and lookup the current character in Hashmap. If not exist, return `false`, else decrement the value by `1`
4.  If none of the above return falsy, it must be an anagram

Time complexity: `O(n)`

```
function isAnagram(strA: string, strB: string): boolean {
  const strALength = strA.length;
  const strBLength = strB.length;
  const charMap = new Map<string, number>();

  if (strALength !== strBLength) {
    return false;
  }

  for (let i = 0; i < strALength; i += 1) {
    const current = strA[i];

    charMap.set(current, (charMap.get(current) || 0) + 1);
  }

  for (let i = 0; i < strBLength; i += 1) {
    const current = strB[i];

    if (!charMap.get(current)) {
      return false;
    }

    charMap.set(current, charMap.get(current) - 1);
  }

  return true;
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-06-26T12:04:46.747

```
 let words = ["dell", "ledl","del", "abc", "cba", 'boo'];

    //sort each item 
    function sortArray(data){
      var r=data.split('').sort().join().replace(/,/g,'');
      return r;
    }

    var groupObject={};
    words.forEach((item)=>{
    let sorteditem=sortArray(item);

//Check current item is in the groupObject or not.
    //If not then add it as an array
    //else push it to the object property
    if(groupObject[sorteditem])
      return groupObject[sorteditem].push(item);
    groupObject[sorteditem]=[sorteditem];
    });

    //to print the result
    for(i=0;i<Object.keys(groupObject).length;i++)
       document.write(groupObject[Object.keys(groupObject)[i]] + "<br>");

    /* groupObject value: 
    abc: (2) ["abc", "cba"]
    boo: ["boo"]
    del: ["del"]
    dell: (2) ["dell", "ledl"]

    OUTPUT:
    ------
    dell,ledl
    del
    abc,cba
    boo
    */ 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-02-03T13:24:09.027

```
function findAnagram(str1, str2) {

  let mappedstr1 = {}, mappedstr2 = {};

  for (let item of str1) {
    mappedstr1[item] = (mappedstr1[item] || 0) + 1;
  }

  for (let item2 of str2) {
    mappedstr2[item2] = (mappedstr2[item2] || 0) + 1;
  }

  for (let key in mappedstr1) {
    if (!mappedstr2[key]) {
      return false;
    }

    if (mappedstr1[key] !== mappedstr2[key]) {
      return false;
    }
  }

  return true;
}
console.log(findAnagram("hello", "hlleo")); 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2021-02-19T10:36:07.670

Another example only for comparing 2 strings for an anagram.

```
 function anagram(str1, str2) {
      if (str1.length !== str2.length) {
        return false;
      } else {
        if (
          str1.toLowerCase().split("").sort().join("") ===
          str2.toLowerCase().split("").sort().join("")
        ) {
          return "Anagram";
        } else {
          return "Not Anagram";
        }
      }
    }

    console.log(anagram("hello", "olleh"));
    console.log(anagram("ronak", "konar")); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-09-16T07:17:50.993

Another solution for isAnagram using reduce

```
const checkAnagram = (orig, test) => {
  return orig.length === test.length 
    && orig.split('').reduce(
      (acc, item) => {
        let index = acc.indexOf(item);
        if (index >= 0) {
          acc.splice(index, 1);
          return acc;
        }
        throw new Error('Not an anagram');
      },
      test.split('')
    ).length === 0;
};

const isAnagram = (tester, orig, test) => {
  try {
    return tester(orig, test);  
  } catch (e) {
    return false;
  }
}

console.log(isAnagram(checkAnagram, '867443', '473846'));
console.log(isAnagram(checkAnagram, '867443', '473846'));
console.log(isAnagram(checkAnagram, '867443', '475846')); 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-03-11T12:26:40.710

```
var check=true;
var str="cleartrip";
var str1="tripclear";
if(str.length!=str1.length){
console.log("Not an anagram");

check=false;
}
console.log(str.split("").sort());
console.log("----------"+str.split("").sort().join(''));
if(check){
if((str.split("").sort().join(''))===((str1.split("").sort().join('')))){
console.log("Anagram")
}
else{
console.log("not a anagram");
}
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-01-19T19:54:12.807

Here is my solution which addresses a test case where the input strings which are not anagrams, can be removed from the output. Hence the output contains only the anagram strings. Hope this is helpful.

```
/**
 * Anagram Finder
 * @params {array} wordArray
 * @return {object}
 */
function filterAnagram(wordArray) {
  let outHash = {};
  for ([index, word] of wordArray.entries()) {
    let w = word.split("").sort().join("");
    outHash[w] = !outHash[w] ? [word] : outHash[w].concat(word);
  }
  let filteredObject = Object.keys(outHash).reduce(function(r, e) {
    if (Object.values(outHash).filter(v => v.length > 1).includes(outHash[e])) r[e] = outHash[e]
    return r;
  }, {});

  return filteredObject;
}

console.log(filterAnagram(['monk', 'yzx','konm', 'aaa', 'ledl', 'bbc', 'cbb', 'dell', 'onkm']));
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-04-03T04:45:46.727

i have recently faced this in the coding interview, here is my solution.

```
 function group_anagrams(arr) {
      let   sortedArr = arr.map(item => item.split('').sort().join(''));
      let setArr = new Set(sortedArr);
      let reducedObj = {};
      for (let setItem of setArr) {
        let indexArr = sortedArr.reduce((acc, cur, index) => {
          if (setItem === cur) {
            acc.push(index);
          }
          return acc;
        }, []);
        reducedObj[setItem] = indexArr;
      }
      let finalArr = [];
      for (let reduceItem in reducedObj) {
        finalArr.push(reducedObj[reduceItem].map(item => arr[item]));
      }
      return finalArr;
    }
    group_anagrams(['car','cra','rca', 'cheese','ab','ba']); 
```

output will be like

```
[
  ["car", "cra", "rca"],
  ["cheese"],
  ["ab", "ba"]
] 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-05-01T03:45:04.400

My solution has more code, but it avoids using .sort(), so I think this solution has less time complexity. Instead it makes a hash out of every word and compares the hashes:

```
const wordToHash = word => {
  const hash = {};
  // Make all lower case and remove spaces
  [...word.toLowerCase().replace(/ /g, '')].forEach(letter => hash[letter] ? hash[letter] += 1 : hash[letter] = 1);
  return hash;
}
const hashesEqual = (obj1, obj2) => {
  const keys1 = Object.keys(obj1), keys2 = Object.keys(obj2);
  let match = true;
  if(keys1.length !== keys2.length) return false;
  for(const key in keys1) { if(obj1[key] !== obj2[key]) match = false; break; }
  return match;
}
const checkAnagrams = (word1, word2) => {
  const hash1 = wordToHash(word1), hash2 = wordToHash(word2);
  return hashesEqual(hash1, hash2);
}
console.log( checkAnagrams("Dormitory", "Dirty room") ); 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2020-06-22T03:56:33.977

```
/*This is good option since 
  logic is easy,
  deals with duplicate data,
  Code to check anagram in an array,
  shows results in appropriate manner,
  function check can be separately used for comparing string in this regards with all benefits mentioned above.
  */

var words = ["deuoll", "ellduo", "abc","dcr","frt", "bu","cba","aadl","bca","elduo","bac","acb","ub","eldou","ellduo","ert","tre"];
var counter=1;
var ele=[];
function check(str1,str2)
{   
    if(str2=="")
    return false;
    if(str1.length!=str2.length)
      return false;
    var r1=[...(new Set (str1.split('').sort()))]; 
    var r2=[...(new Set (str2.split('').sort()))]; 
    var flag=true;

    r1.forEach((item,index)=>
    {
    if(r2.indexOf(item)!=index)
    { flag=false;}
    });

    return flag;
}

var anagram=function ()
{
  for(var i=0;i<words.length && counter!=words.length ;i++)
  {
  if(words[i]!="")
  {
    document.write("<br>"+words[i]+":");
    counter++;
    }
    for(var j=i+1;j<words.length && counter !=words.length+1;j++)
    {
       if(check(words[i],words[j]))
       {
              ele=words[j];
             document.write(words[j]+"&nbsp");
             words[j]="";
              counter++;   
       }
     }
  }
}
anagram(); 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-06-27T11:03:04.680

If you just need count of anagrams

```
const removeDuplicatesAndSort = [...new Set(yourString.split(', '))].map(word => word.split('').sort().join())
const numberOfAnagrams = removeDuplicatesAndSort.length  - [...new Set(removeDuplicatesAndSort)].length 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2020-08-26T15:15:12.717

```
function isAnagram(str1, str2){
  let count = 0;

  if (str1.length !== str2.length) {
    return false;
  } else {
    let val1 = str1.toLowerCase().split("").sort();
    let val2 = str2.toLowerCase().split("").sort();
    for (let i = 0; i < val2.length; i++) {
      if (val1[i] === val2[i]) {
        count++;
      }
    }
  if (count == str1.length) {
    return true;
   }
 }
 return false;
}

console.log(isAnagram("cristian", "Cristina")) 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-02-21T17:16:56.603

```
const getAnagrams = (...args) => {
    const anagrams = {};

    args.forEach((arg) => {        
        const letters = arg.split("").sort().join("");

        if (anagrams[letters]) {
            anagrams[letters].push(arg);
        } else {
            anagrams[letters] = [arg];
        }
    });

    return Object.values(anagrams);
} 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2021-02-22T16:52:06.237

```
 function isAnagaram(str1, str2){
        if(str1.length!== str2.length){
            return false;
        }
        var obj1 = {};
        var obj2 = {};
        for(var arg of str1){
            obj1[arg] =  (obj1[arg] || 0 ) + 1 ;
        }
        for(var arg of str2){
            obj2[arg] =  (obj2[arg] || 0 ) + 1 ;
        }

        for( var key in obj1){
            if(obj1[key] !== obj2[key]){
                return false;
            }
        }
        return true;
    }

    console.log(isAnagaram('texttwisttime' , 'timetwisttext'));
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2021-07-18T20:28:40.427

```
let validAnagram = (firstString, secondString) => {
    if (firstString.length !== secondString.length) {
        return false;
    }

    let secondStringArr = secondString.split('');

    for (var char of firstString) {
        charIndexInSecondString = secondString.indexOf(char);
        if (charIndexInSecondString === -1) {
            return false;
        }
        secondString = secondString.replace(char, '');
    }

    return true;
} 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2021-08-23T07:53:11.257

```
const arr = ['monk', 'konm', 'nkom', 'bbc', 'cbb', 'dell', 'ledl', 'llde'];
let anagram = {};

for (let i = 0; i<arr.length; i++){
  const word = arr[i];
  const sortedWord = word.split("").sort().join("");
  let tempArray = [];
  if(anagram[sortedWord]){
    tempArray = anagram[sortedWord].length==1?anagram[sortedWord]:[...anagram[sortedWord]];
    tempArray.push(word);
    anagram[sortedWord] = tempArray;
  }else{
    anagram[sortedWord] = [word];
  }
}
console.log(Object.values(anagram)); 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2022-02-07T08:41:41.407

Here, I would first convert list of words in to anagram object. I am pushing anagram words in to new object where key is anagram. if anagram is already found in the object then I would concat the new word.

At last I am just taking out the values of result object. Code is self explanatory and short.

```
const input = "monk, konm, nkom, bbc, cbb, dell, ledl, llde";

const anagramCreater = (data) => { return data.split("").sort().join("");}

const anagram = input
.split(", ")
.reduce((acc, word) => {
  const anagramWord = anagramCreater(word);
  acc[anagramWord] = acc[anagramWord] 
    ? `${acc[anagramWord]},${word}` 
    : word;
  return acc;
}, {});
console.log(Object.values(anagram).join("\n")); 
```

* * *

## 回答 #32

> 赞同：-1
> 
> 时间：2020-02-07T06:56:53.557

```
function checkAnagram(str1, str2) {
    str1 = str1.toLowerCase();
    str2 = str2.toLowerCase();
    let sum1 = 0;
    let sum2 = 0;
    for (let i = 0; i < str1.length; i++) {
        sum1 = sum1 + str1.charCodeAt(i);
    }
    for (let j = 0; j < str2.length; j++) {
        sum2 = sum2 + str2.charCodeAt(j);
    }
    if (sum1 === sum2) {
        return "Anagram";
    } else {
        return "Not Anagram";
    }
} 
```

* * *

## 回答 #33

> 赞同：-1
> 
> 时间：2021-01-05T12:49:39.663

```
function findAnagrams (str, arr){
let newStr = "";
let output = [];

for (let i = 0; i < arr.length; i++) {
  for (let j = 0; j < arr[i].length; j++) {
    for (let k = 0; k < str.length; k++) {
      if (str[k] === arr[i][j] && str.length === arr[i].length) {
        newStr += arr[i][j];
      }
    }
  } if(newStr.length === str.length){
    output.push(newStr);
    newStr = "";
  }
  }
  return output;
} 
```

# java - 红黑树 （重新起草）

> ID：909452
> 
> 赞同：0
> 
> 时间：2009-05-26T07:50:48.853
> 
> 标签：java, tree, red-black-tree

```
/** The following function checks the red black tree black height
* @param n the root node is inputed then a traversal is done to calculate the black-height
* @return Return an error message / mesages informing the user whether or not the black height was maintained
* @author Ferron Smith
*/

public static void getCount (SkaRedBlackTreeNode skaRedBlackTreeNode) {
    VizRedBlackTreeNode n = skaRedBlackTreeNode.getVizRep();
if (validRoot(n))
    {
        static int lcount = leftCount(n);
        static int rcount = rightCount(n);

        if (rcount == lcount) {
            n.displayMsg("Black height maintained");
        }
        else
            // n.displayWarning("rcount " + rcount + " lcount " + lcount);
            n.displayError("Red Black Tree is unbalanced");
    }
}

/** The following function counts all the black node of the left side of the tree
 * @param n the left child is inputed and a traversal is done to count all the black nodes
 * */
public static int leftCount (VizRedBlackTreeNode n)
{
        if (n == null)
        return 0;
        else if (n.getrbtColr() == Color.black) 
                return 1 + leftCount(n.getLeft());
        else 
            leftCount(n.getLeft());    
}

/** The following function counts all the black node of the right side of the tree
 * @param n the right child is inputed and a traversal is done to count all the black nodes
 * */
public static int rightCount (VizRedBlackTreeNode n)
{   
    if (n == null)
    return 0;
    else if (n.getrbtColr() == Color.black) {
            return 1 + rightCount (n.getRight());
    else    
        rightCount(n.getRight());
    }
} 
```

这是重新草稿，你认为这个会起作用吗，我已经在某些条件下对其进行了测试，并且还没有让我失望

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T21:30:37.577

所以我意识到你在这里使用 java 工作，但这里有一些伪代码可能会有所帮助：

```
unsigned int blackHeight()
  height, heightLeft, heightRight = 0
  if black
    height++
  if left
    heightLeft = left->blackHeight()
  else
    heightLeft = 1
  if right
    heightRight = right->blackHeight()
  else
    heightRight = 1
  if heightLeft != heightRight
    //YOU HAVE A PROBLEM!
  height += heightLeft
  return height 
```

我自己才刚刚开始尝试使用红黑树，但我相信这个算法应该会给你调用它的任何节点上的黑色高度。

编辑：我想我应该有资格，这将是在一个节点内而不是在树内找到的代码。在 c++ 中，它将使用 someNode->blackHeight() 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T16:10:29.187

据我所知，您只在树下最左边和最右边的路径上检查黑色高度。红黑树的定义要求*所有*路径上的黑色高度相同。例如，您的程序不会标记此无效树：

```
 B
     / \
    /   \
   /     \
  B       B
 / \     / \
B   R   R   B 
```

此外，它不会检查循环或键是否按顺序排列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-03-21T10:52:13.050

```
 //enter code here

    private static void blackHeight(rbnode root) {
        if (root == null)
            return; 

        if (root.color == "black") {
            root.black_count = root.parent.black_count+1;

        } else {
            root.black_count = root.parent.black_count;
        }
        if ((root.left == null) && (root.right == null)) {              
            bh = root.black_count;              
        }               
        blackHeight(root.left);
        blackHeight(root.right);
    } 
```

# ssl - 多台服务器上的单一 SSL 证书

> ID：909453
> 
> 赞同：62
> 
> 时间：2009-05-26T07:51:08.383
> 
> 标签：ssl

对于我正在处理的项目，我将拥有多个服务器和许多子域（例如 - *.mydomain.com）。我正在考虑从 godaddy-Unlimited Subdomains (Wildcard) 获得这个 ssl 证书 $199.99/yr

我是否能够在所有服务器上使用该证书，或者我是否需要为每台服务器购买一个证书，因为它们每个都有一个唯一的 IP？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2009-05-26T08:11:52.023

证书绑定到主机名（或通配符主机名），因此您可以在多台机器上使用相同的证书。

但是，在请求证书时，您通常会在其中一台服务器上创建一个私钥。除了您收到的实际证书之外，还需要将此私钥复制到所有机器上。

一种情况是您将 www.domain.com 解析为负载均衡器的 IP，然后将流量转发到多个服务器。在这种情况下，您只需要复制（使用私钥）到集群中所有服务器的 www.domain.com 证书。

# c# - 在 C# 中生成随机对

> ID：909454
> 
> 赞同：1
> 
> 时间：2009-05-26T07:51:40.397
> 
> 标签：c#, performance, random, combinations

我的数据库中有一张桌子，上面有人员名单。我需要每天创建一个随机好友列表。

这个想法是，每天每个人都会与当天的不同随机人配对。

由于桌子可能会变得非常大，我想知道做这种事情的最佳方法是什么？

我想到了 2 个想法，但我对它们的性能不太确定。

1）我使用随机数生成器随机选择两个 id。问题在于我必须不断确保尚未调用数字，并且当我接近列表末尾时，这可能会变得非常慢。

2）从列表中他们下面的人开始每一个，然后每天简单地向下移动一个，直到你到达底部，此时我又回到顶部。

还有其他想法吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-26T07:55:13.383

也许你可以做一个随机排序表的查询，然后从上到下对人进行配对。第一个条目与第二个配对，第三个与第四个配对，依此类推。

SQL Server 示例：

```
SELECT * FROM Table ORDER BY NEWID() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T07:56:47.453

这并不难，使用随机生成器并不是很慢，但如果你很不幸，时间复杂度将变为 O(n^2)，最好的情况下为 O(1)，你喜欢这样吗？

但是，只要有一个连接两个人的表，看看他们的 ID 是否出现很快，如果没有，只需添加他们的 ID，使用 T-SQL 来释放额外的连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T08:28:22.583

在我看来，这个问题已经解决了。

1.  您想制作成对列表。
2.  您想要所有配对列表（每天一个）

您不需要为此使用随机函数。您只需要生成所有对列表。

Wikipedia 上的[Permutation](http://en.wikipedia.org/wiki/Permutation)页面包含您需要使用的算法的一些实现。

```
#!/usr/bin/perl -w
use strict;
use warnings;
use Data::Dumper;

sub permutation {
    my ($k, $s) = @_;

    for my $j (1..(@$s-1)) {
        my $n = ($k % $j) + 1;
        ($s->[$n], $s->[$j]) = ($s->[$j], $s->[$n]);
        $k = int($k / $j);
    }
    return $s;
}

for (1..3) {
    my $s = permutation($_, [1,2,3,4]);
    my ($a, $b, $c, $d) = @$s;
    print "$a\t$b\n";
    print "$c\t$d\n";
    print "------\n";
} 
```

# asp.net-mvc - ASP.NET MVC 网站的品牌/皮肤

> ID：909456
> 
> 赞同：4
> 
> 时间：2009-05-26T07:52:14.433
> 
> 标签：asp.net-mvc

我打算使用 ASP.NET MVC 新技术设计简单的网站。与经典网络表单相比，那里的许多概念都发生了变化，所以我的问题是如何准备网站以更改其外观或应用不同的品牌，最好为此目的使用不同的 dns 请求名称？

app_themes 是不是不能用？

提前感谢任何线索

汤姆。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-26T07:57:17.373

无论如何，App_Themes 从来都不是什么好东西。它是有限的。只需使用样式表，即可更改主题，您可以包含不同的样式表。只要你的标记是好的，那么你就不会有问题。（见[这篇文章](https://stackoverflow.com/questions/689759/asp-net-themes-should-they-be-used)）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-02-18T20:37:41.530

另一个更灵活的选择是创建一个不同的母版页，它可以具有完全不同的 html/css 结构。当您的视图加载时，您可以动态更改母版页。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-26T08:08:47.473

看看[Oxite](http://www.codeplex.com/oxite)。这个博客应用程序也有[皮肤功能](http://oxite.codeplex.com/Wiki/View.aspx?title=Skinning)。

# c# - 为什么我会在 C# 上使用 Powershell？

> ID：909457
> 
> 赞同：18
> 
> 时间：2009-05-26T07:52:27.587
> 
> 标签：c#, powershell

我知道 Powershell 非常强大，因为它是一种脚本语言，您可以在其中访问整个 .Net 框架（这就是我所知道的一切）。但是当我可以使用 C# 编写完全相同的代码时，我很难理解关于 Powershell 的大肆宣传是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-26T08:02:33.307

我想你问错问题了。应该是：*“既然可以使用 Powershell 编写相同的代码，为什么还要使用 C#？”*

这是重新审视脚本与编译软件的旧论点。脚本解决方案更灵活（您只需要记事本来编辑脚本，不需要编译器）。

对于一项小任务，编写、部署和更改脚本比在 Visual Studio 中创建项目、编译、部署到目标、更正代码、再次编译、再次部署...

对于任何更大的任务，我绝对更喜欢编译我的代码的 IDE。单独构建损坏的错误消息对于查找原因有很大帮助。（运行时效率通常在已编译的软件中更好，但在现代 CPU 中，差异可以归结为几毫秒，因此对于大多数项目来说，这不再重要了。）

您**可以**在 C# 或 Powershell 中执行任何类型的项目。这并不意味着你**应该**。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-26T08:16:31.843

当不将 Powershell 用作 shell 而是将其用作编程环境时，您可以将 Powershell 视为一种交互式 .NET 游乐场。我从不使用 Powershell 进行 GUI 原型设计，但我过去曾使用它来玩弄 .NET 对象及其解决特定问题的方法。每次进行更改时，简单地更改命令行比执行编辑/保存/编译/运行周期更有效率。

此外，这两种语言的适当域非常不同。Powershell 本质上是一个管理和自动化工具，它简化了对许多在其他环境中可能更难使用的东西的访问，如注册表、证书存储、WMI 等。

您可能不想使用 Powershell 编写企业级数据库应用程序，并且您可能不想编写 C# 程序只是为了在文件系统中复制一些内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-26T08:01:31.857

*   它不是一种编译语言。
*   它有一个插件生态系统，其中包含许多“库”，用于执行各种特定领域的事情，例如复制文件、玩 AD、Exchange。
*   对于一组不同的、略微重叠的工作，它是正确的工具。
*   它比 CMD.EXE 和其他从需要适合 8K RAM 的命令 shell 演变而来的东西更强大和一致。

为什么你仍然使用 C#，ILASM 可以通过更多的控制来做任何事情，而且你只是在 BCL 中调用东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-26T08:31:54.713

我将您的问题概括为以下内容：

> 为什么我会使用（我不太了解的高级语言）而不是（我更了解的低级语言）？

高级语言的重点是抽象常见任务，以便更快地编写它们。许多提出这个问题的人无法想象高级语言的这种好处，因为他们已经对他们的低级语言感到满意。

最后，这一切都取决于你是否愿意学习高级语言的抽象，希望你能像低级语言一样精通它。

# iphone - 使用 CGRectZero 在 UIView 类或子类上调用 initWithFrame 是什么意思？

> ID：909458
> 
> 赞同：4
> 
> 时间：2009-05-26T07:52:55.323
> 
> 标签：iphone, uikit

我已经看到了调用子类（例如）的代码，`initWithFrame`并且`UIView`事情`UILabel`似乎`CGRectZero`工作正常。用 2D 点实例化一个`UIView`子类是什么意思（这似乎是什么`CGRectZero`）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-26T12:55:57.503

这只是意味着您正在实例化视图而没有其框架的初始值。

例如，当您想要创建视图对象的实例并且不需要立即将其放入视图层次结构中时，就会这样做。可以稍后使用 setFrame: 来决定和设置框架。

在 SDK 2.x 中初始化 UITableViewCell 时通常使用 CGRectZero。tableView:cellForRowAtIndexPath: 中需要视图的实例，并且不需要在创建时提供框架，因为表格视图会自动定位单元格并在以后使其成为最佳大小。

# internet-explorer - 如何在同一个系统上安装多个版本的IE？

> ID：909459
> 
> 赞同：44
> 
> 时间：2009-05-26T07:53:27.803
> 
> 标签：internet-explorer, browser

> **可能重复：**
> [在同一台计算机上运行 Internet Explorer 6、Internet Explorer 7 和 Internet Explorer 8](https://stackoverflow.com/questions/574463/running-internet-explorer-6-internet-explorer-7-and-internet-explorer-8-on-the)

为了测试网页，

目前我的页面与我的 IE 一起工作，

但不是与他人。

是否可以安装多个版本？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-05-26T08:01:28.333

[MultipleIE](http://tredosoft.com/Multiple_IE) , [IETester](http://www.my-debugbar.com/wiki/IETester/HomePage)有很多类似的。

**多个 IE**支持 IE3 IE4.01 IE5 IE5.5 和 IE6 并且“不再维护，也没有继续维护的计划！谢谢，祝你好运！”。

**IETester**似乎是更好的选择：Windows 8 桌面、Windows 7、Vista 和 XP 上的 IE10、IE9、IE8、IE7 IE 6 和 IE5.5

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-05-26T07:59:36.493

我会使用虚拟机。使用 VMware Workstation 或类似产品创建一个 XP（或其他）VM，并对其进行快照。那是你最旧的版本。然后一次执行一个升级，每次都快照。然后，您可以切换到以后需要的任何快照，或者根据所有快照克隆独立的虚拟机，这样您就可以一次运行它们。您可能希望在不同的操作系统和不同的版本上进行测试，因此 VM 也会推广该解决方案，而不是破解多个 IE 以在单个 Windows 实例上共存的一次性解决方案。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-26T07:56:24.630

您可以使用 IETester ( [http://www.my-debugbar.com/wiki/IETester/HomePage](http://www.my-debugbar.com/wiki/IETester/HomePage) )

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-26T08:11:19.030

回答您的问题：不，不可能以“正常”方式（即不是黑客、沙箱或 VM 等）安装多个版本的 IE（如果这是您的意思）。在同一台机器上同时安装多个不同类型的浏览器是完全可以的，例如 IE8、Firefox 3 和 Chrome。

[SandboxIE](http://www.sandboxie.com/)应该允许您并排安装多个版本的 IE（以及其他软件），这比走虚拟机路线更容易。

但是，从 QA 的角度来看，我强烈建议在不同的机器上安装不同的版本，作为从测试的角度来看的最佳选择。这将为您提供最真实的测试环境。如果您没有硬件，那么虚拟机是其他一些答案中提到的下一个最佳选择。

# c# - 当我在两者之间使用 MessageBox.Show() 时我的代码如何工作，没有它就无法工作？

> ID：909465
> 
> 赞同：2
> 
> 时间：2009-05-26T07:54:12.123
> 
> 标签：c#, .net, messagebox

我将 .NET 的 WebBrowser 嵌入到具有其他一些按钮的表单中。

我正在开发的应用程序不使用键盘，而是使用触摸屏。所以它实际上只使用鼠标。为了向下滚动浏览器，我制作了两个自定义按钮。当我单击这些按钮时，它应该向浏览器发送“PageDown”键击，并且浏览器应该向下滚动。

所以点击事件的代码如下：

```
 theForm.Activate();
        Application.DoEvents();
        theBrowser.Focus();
        Application.DoEvents();
        SendKeys.Send(key); 
```

其中“theForm”是表单，“theBrowser”是浏览器实例。

所以当我点击按钮时，什么也没有发生。当我第一次单击浏览器，然后单击按钮时，它确实有效。但是我把重点放在了对吗？我给了应用程序足够的空间来设置焦点？

但现在我觉得很奇怪。当我放一个 MessageBox.Show("HELLO"); 在代码中，像这样：

```
 theForm.Activate();
    Application.DoEvents();
    theBrowser.Focus();
    MessageBox.Show("HELLO");
    Application.DoEvents();
    SendKeys.Send(key); 
```

...当我单击按钮时，它会立即工作。

所以问题是：为什么当我离开 MessageBox.Show() 时这段代码不起作用，但当我使用 MessageBox.Show() 时却起作用？

希望能帮到你，先谢谢了。。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T08:03:24.007

无需考虑您的方法是否正确。（我怀疑不是）。

我会赌你有比赛条件。这意味着浏览器控件需要比您允许的更多时间来加载和响应事件。

因此，当您执行 Message.Show 时，您发送事件的线程突然被阻止，它正在让浏览器控件完成初始化或其他操作。

从您的问题中很难知道您是在移动设备上运行还是在常规桌面上运行，因为有更好的方法来处理触摸。查看用于多点触控或 WPF 4.0 的 Window7 Api（也由 Surface Touch SDK 共享）。

希望有帮助。爱丽儿

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T08:07:56.150

在我看来，这似乎是错误的做法。

尝试按照此[C++ 示例](http://www.codeproject.com/KB/miscctrl/scrollbrowser.aspx?df=100&forumid=2537&exp=0&select=780783)或此[C# 示例](http://www.ben-rush.net/blog/PermaLink.aspx?guid=635eccfd-f33b-49f5-a351-02bf1a33cfdd&dotnet=consultant)的方式进行操作。

如果您要模拟按键，至少要明确说明您要向其发送消息的 HWND。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T08:03:26.783

可能是浏览器控件仍在加载文档，而消息框给了它足够的时间来完成。如果是这样，请等到浏览器的 IsBusy 属性为 false 或使用 DocumentCompleted 事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-26T08:04:04.287

我不知道，但总的来说，根据我的经验，尝试像这样以编程方式改变焦点是一个坏主意，你总是最终会寻找错误。有很多方法可以让窗口滚动，所以也许你应该尝试其他方法？例如，Web 浏览器中的 JavaScript 可以有效地滚动窗口。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-26T08:04:27.750

我怀疑你在这里有一场比赛，首先要做的是。聚焦控件可能不是即时的，并且您发送的击键去了其他地方，而在关闭消息框后，浏览器控件已经聚焦并获得了它的击键。

另外，引用 MSDN 关于[Control.Focus()](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.focus.aspx)的注释：

> Focus 是一种低级方法，主要用于自定义控件作者。相反，应用程序程序员应该对子控件使用[Select](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.select.aspx)方法或[ActiveControl](http://msdn.microsoft.com/en-us/library/system.windows.forms.containercontrol.activecontrol.aspx)属性，或对窗体使用[Activate](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.activate.aspx)方法。

所以使用其中之一可能比使用 Focus() 更好。

# search - 使用 Drupal 进行高级搜索（视图和 CCK）

> ID：909481
> 
> 赞同：14
> 
> 时间：2009-05-26T07:59:00.897
> 
> 标签：search, drupal, views, cck

我正在构建一个网站，其中产品保存在使用 CCK 创建的内容类型中。产品可以与多个分类词汇相关联。现在我需要一个高级产品搜索，用户可以使用它通过许多搜索参数（分类术语、CCK 字段值）进行搜索。我做了很多谷歌搜索，但我找不到足够灵活的模块。

我已经能够使用 Views 的参数创建几乎所有需要的功能，但我无法找到一种方法来制作没有我自己的自定义搜索框的搜索表单。这不是我正在寻找的解决方案。

问题如下：是否有合适的模块用于灵活的自定义搜索，还是只有一个自己的模块？是否有视图参数形式的模块。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-26T10:11:28.553

有一个“分面搜索”模块（[http://drupal.org/project/faceted_search](http://drupal.org/project/faceted_search)）提供了一个有趣的搜索概念，也适用于 CCK 字段。[你可以在这里](http://facetedsearch.davidlesieur.com/)看到一个演示。而是让您选择现有的值集（构面）并优雅地浏览它们，但它仍然是一种搜索。[（与http://drupal.org/project/cck_facets](http://drupal.org/project/cck_facets)一起使用）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-30T17:42:15.483

Faceted Search 和 ApacheSolr 集成模块是我推荐的两种（单独的）方法。

您是否用尽了 Views 暴露过滤器的所有可能性？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-09-19T18:09:41.517

浏览此视频教程以使用 Drupal 中的视图制作自定义搜索功能会很有帮助

[http://planetghost.com/views_search_drupal](http://planetghost.com/views_search_drupal)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-31T05:04:55.367

哪些功能无法通过 Views 重现？我已经完成了一些将视图用于搜索界面的工作，但我需要了解更多信息才能提供帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-15T18:51:44.217

我认为你必须开始使用 Views API 和视图提供的钩子。 [https://api.drupal.org/api/views/views.api.php/group/views_hooks/7](https://api.drupal.org/api/views/views.api.php/group/views_hooks/7)

非常重要的是views_get_view。查看文档，加载视图并使用 dpm（开发模块）检查视图。您可以通过编程方式对其进行修改，然后执行它。 [https://api.drupal.org/api/views/views.module/function/views_get_view/7](https://api.drupal.org/api/views/views.module/function/views_get_view/7)

请记住，您可以使用 hook_form_alter 修改视图的公开形式。

正如大家所说，分面搜索是一个非常好的选择，但视图非常灵活和容易。

希望有帮助！

# python - 以编程方式从 Yahoo! 获取联系人！地址簿

> ID：909508
> 
> 赞同：3
> 
> 时间：2009-05-26T08:05:48.837
> 
> 标签：python, yahoo

有没有办法以编程方式登录 Yahoo!，提供电子邮件 ID 和密码作为输入，并获取用户的联系人？

由于它的 ClientLogin 界面，我用 Gmail 实现了同样的目标。

Yahoo Address book API 提供 BBAuth，需要将用户重定向到 Yahoo 登录页面。但我正在寻找一种无需重定向即可通过 Yahoo 对用户进行身份验证的方法。Ning.com 的处理方式。

Python 中的代码示例将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-26T14:00:15.003

您可能想查看Yahoo! 提供的[联系人 API ！](http://developer.yahoo.com/social/rest_api_guide/contact_api.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-11T04:40:34.893

我刚刚找到了一个解决我的问题的python脚本

[http://pypi.python.org/pypi/ContactGrabber/0.1](http://pypi.python.org/pypi/ContactGrabber/0.1)

但它并不完整，仅获取地址簿的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-22T11:19:08.477

你可以试试这个 [http://developer.yahoo.com/social/contacts/](http://developer.yahoo.com/social/contacts/)

# java - 谁能告诉我哪个是学习春天的最好方法

> ID：909511
> 
> 赞同：1
> 
> 时间：2009-05-26T08:06:18.963
> 
> 标签：java, spring

谁能告诉我学习spring的最好方法。

我在struts方面有很好的工作经验。对jsp和hibernate一点经验

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-26T08:15:12.580

我发现[Spring in Action](http://www.amazon.co.uk/Spring-Action-Craig-Walls/dp/1933988134/ref=sr_1_1?ie=UTF8&s=books&qid=1243325673&sr=8-1)是一个很好的指南

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-26T23:19:24.547

最好的方法就是使用它！

使用 Spring 编写一个简单的应用程序（使用标准文档），然后返回并重写它。写很多代码。

春季食谱也是一本好书。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-26T08:09:50.657

开始阅读 Martin Fowler 的[Inversion of Control Containers and the Dependency Injection pattern](http://martinfowler.com/articles/injection.html)，然后开始阅读[Spring 的文档](http://static.springframework.org/spring/docs/2.5.x/reference/index.html)（我发现该文档是最好的书籍之一）。

当然，遵循互联网上的一些教程会有所帮助，但我发现首先阅读基础知识是理解框架的最佳选择

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-26T08:18:14.087

我还建议您阅读春季文档。您还可以探索[Spring MVC 快速教程](http://maestric.com/en/doc/java/spring) 无论如何，如果您是其他框架的专业人士，您也可以通过本教程来亲身体验 http://raibledesigns.com/wiki/Wiki.jsp?page=SpringControllers。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T21:45:27.047

我不太确定它有多重要，因为 Rod Johnson 和 EJB3 工作人员已经联手，并且似乎一起朝着同一个方向前进。EJB3 现在使用注解而不是另一个 XML 配置文件提供依赖注入。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-27T23:44:38.680

分发应包括一个名为 petstore 诊所的项目。这将为您提供有关如何将最新技术与完整弹簧堆栈一起使用的很好的概述。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2009-05-26T08:14:46.747

一本书会很有帮助。

嗯，我有上网学习的习惯。

例如：[完整的 Spring 教程 - http://www.roseindia.net/spring/index.shtml](http://www.roseindia.net/spring/index.shtml)

# .net - 什么版本的 .NET 附带什么版本的 Windows？

> ID：909516
> 
> 赞同：78
> 
> 时间：2009-05-26T08:08:10.330
> 
> 标签：.net, windows, version, .net-framework-version

查找 Windows 版本列表（包括服务包）以及 .NET 的原生版本¹可用。

例子：

Windows A - .NET Framework Z
Windows A Service Pack 1 - .NET Framework Z
Windows A Service Pack 2 - .NET Framework Y

* * *

¹本地我的意思是没有安装完成。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2009-05-26T08:11:06.177

这应该会给你你想要的所有答案：

[https://en.wikipedia.org/wiki/.NET_Framework_version_history#Overview](https://en.wikipedia.org/wiki/.NET_Framework_version_history#Overview)

由于新版本的 .NET 一直在发布，我觉得尝试将历史嵌入到这个答案中是不正确的，而只是将你引导到一个更新的源。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-06-07T10:56:42.117

下图完美地解释了它：

![哪个版本的网络是内置的](https://i.stack.imgur.com/WOcar.png)

来源： http: [//petermarcu.blogspot.ie/2010/02/which-version-of-net-is-built-into.html](http://petermarcu.blogspot.ie/2010/02/which-version-of-net-is-built-into.html)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2017-04-07T18:05:30.640

微软为此发布了一张图表。 [.NET Framework 版本和依赖项](https://docs.microsoft.com/en-us/dotnet/framework/migration-guide/versions-and-dependencies)

复选标记表示包含，加号表示可以安装。

# php - php5不会通过apache加载扩展，但是模块都显示使用php -m？

> ID：909518
> 
> 赞同：0
> 
> 时间：2009-05-26T08:08:53.480
> 
> 标签：php, macos, apc

我一直在尝试安装 PHP5-APC ( `http://uk.php.net/apc/`)。我使用 macports 来做到这一点。

当我运行 php -m 时，我得到了包括 apc 在内的许多模块的列表，但是 apache 错误日志给出了：

`PHP Warning: PHP Startup: Unable to load dynamic library '/opt/local/lib/php/extensions/no-debug-non-zts-20060613/apc.so' - (null) in Unknown on line 0`

并且 phpinfo() 中根本没有加载任何模块

请帮忙！我对此完全感到困惑。

谢谢，

担

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T09:28:26.270

`php-cli`并且`mod_php`是完全不同的运行时。您可以轻松安装不同的版本，它们通常从不同的`php.ini`文件中读取。

在这种情况下，问题在于 apc 扩展。尝试从您的`php.ini`文件（Apache 使用的文件）中将其注释掉。apc 是一个缓存，所以如果你只使用你的机器进行开发（我想你没有在 Mac 上托管任何东西），那么你实际上并不需要它。

# c# - 如何将文件的值持久存储在目录中？

> ID：909521
> 
> 赞同：6
> 
> 时间：2009-05-26T08:10:07.987
> 
> 标签：c#

我正在使用 C# 在 VS2005 中开发 Windows 应用程序。在我的项目中，我生成 dll 并将它们存储在一个目录中。dll 将被命名为 TestAssembly1、TestAssembly2、TestAssembly3 等。

所以考虑以上三个dll是否在目录中。下次用户使用我的项目时，我需要生成像 TestAssembly4、TestAssembly5 等的 dll。

那么如何在文件夹中存储 dll 的计数并在下次使用项目时增加它们呢？

该目录甚至可以包含 dll 以外的文件。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-26T08:15:20.083

就个人而言，我会使用二进制搜索来查找下一个程序集......

*   开始 n=1
*   TestAssembly1.dll 存在吗？（是的）
*   TestAssembly2.dll 存在吗？（是的）
*   TestAssembly4.dll 存在吗？（是的）
*   TestAssembly8.dll 存在吗？（是的）
*   TestAssembly16.dll 存在吗？（是的）
*   TestAssembly32.dll 存在吗？（不）

并且在 16 到 32 之间不使用二分搜索：

*   TestAssembly24.dll 存在吗？（是的）
*   TestAssembly28.dll 存在吗？（是的）
*   TestAssembly30.dll 存在吗？（不）
*   TestAssembly29.dll 存在吗？（是的）

所以使用 TestAssembly30.dll

这避免了单独保留计数的需要，因此即使您删除所有文件也可以使用 - 二进制搜索意味着您的性能不会太差。

未经测试，但如下所示；还要注意，*任何*基于文件存在的东西都会立即成为一种竞争条件（尽管通常是一个非常苗条的条件）：

```
 static string GetNextFilename(string pattern) {
        string tmp = string.Format(pattern, 1);
        if (tmp == pattern) {
            throw new ArgumentException(
                 "The pattern must include an index place-holder", "pattern");
        }
        if (!File.Exists(tmp)) return tmp; // short-circuit if no matches

        int min = 1, max = 2; // min is inclusive, max is exclusive/untested
        while (File.Exists(string.Format(pattern, max))) {
            min = max;
            max *= 2;
        }

        while (max != min + 1) {
            int pivot = (max + min) / 2;
            if (File.Exists(string.Format(pattern, pivot))) {
                min = pivot;
            }
            else {
                max = pivot;
            }
        }
        return string.Format(pattern, max);
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-26T08:14:37.043

您只需使用 Directory.GetFiles，为您要返回的文件传入一个模式：

[http://msdn.microsoft.com/en-us/library/wz42302f.aspx](http://msdn.microsoft.com/en-us/library/wz42302f.aspx)

```
string[] files = Directory.GetFiles(@"C:\My Directory\", "TestAssembly*.dll"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-26T08:30:59.647

无需大量检查文件是否已存在，您可以获取所有程序集的列表，提取它们的 ID 并返回最高 ID + 1：

```
int nextId = GetNextIdFromFileNames(
               "pathToAssemblies", 
               "TestAssembly*.dll", 
               @"TestAssembly(\d+)\.dll");

[...]

public int GetNextIdFromFileNames(string path, string filePattern, string regexPattern)
{
    // get all the file names
    string[] files = Directory.GetFiles(path, filePattern, SearchOption.TopDirectoryOnly);

    // extract the ID from every file, get the highest ID and return it + 1
    return ExtractIdsFromFileList(files, regexPattern)
           .Max() + 1;
}

private IEnumerable<int> ExtractIdsFromFileList(string[] files, string regexPattern)
{
    Regex regex = new Regex(regexPattern, RegexOptions.IgnoreCase);

    foreach (string file in files)
    {
        Match match = regex.Match(file);
        if (match.Success)
        {
            int value;
            if (int.TryParse(match.Groups[1].Value, out value))
            {
                yield return value;
            }
        }
    }
} 
```

# jquery - jquery回调被多次调用

> ID：909526
> 
> 赞同：17
> 
> 时间：2009-05-26T08:11:26.393
> 
> 标签：jquery, callback

当我在 jQuery 中使用淡入淡出/滑动/动画函数时，回调会为每个应用效果的元素调用多次。这当然是设计使然。我只想知道何时调用最后一个回调。

这是我想出的——当最后一个回调被触发时，它会淡出所有的 div 并显示一个 alert() 。

```
$("div").fadeOut(1000, function ()
{
     if ($("div").index($(this)) == $("div").length-1)
          alert("this is the final callback");
}); 
```

有没有一种更简单的方法来检查哪个回调是最后一个回调，或者这是唯一的方法？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2011-09-01T21:34:09.883

尝试查看[.promise() 的 jQuery 文档](http://api.jquery.com/promise/)

这应该有效：

```
$('div').fadeOut(1000).promise().done(function() {
   alert('all done');
}); 
```

像往常一样，关于这个的 jQuery 文档真的很模糊。但我不确定我能做到

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-05-26T08:39:47.397

当调用最后一个元素的 fadeOut 时，这将产生警报。那不一定是最后一个淡出。

```
var numDivs = $('div').length;
$('div').fadeOut(1000, function() {
  if( --numDivs > 0 ) return;
  alert('this is the final fadeout to complete');
}); 
```

在[JSFiddle上查看](http://jsfiddle.net/53GZS/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-26T08:19:26.160

```
$("div:not(:last)").fadeOut(1000);
$("div:last").fadeOut(1000, function() {
    alert("Hey!");
}); 
```

# delphi - 如何将自定义属性添加到表单

> ID：909532
> 
> 赞同：6
> 
> 时间：2009-05-26T08:12:59.510
> 
> 标签：delphi, forms, properties

我正在尝试将自定义属性添加到可以通过 Delphi 属性编辑器访问的基本表单。如果我只是像使用标准组件一样添加属性，则该属性将不会显示在属性编辑器中。这是我尝试过的：

```
unit TestForm;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs;

type
  TfrmEasyIPBase = class(TForm)
  private
    FTest: String;
  public
    { Public declarations }
  published
    property Test: String read FTest write FTest;
  end;

var
  frmEasyIPBase: TfrmEasyIPBase;

implementation

{$R *.dfm}

end. 
```

我必须在某个时候注册房产吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-26T08:34:14.617

RegisterCustomModule 应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T08:37:48.413

我现在无法访问 delphi，但尝试将您的 TForm descant 添加到您的项目中，添加新表单，编辑新表单的 pas 文件，使其看起来像

```
TMyNewForm = Class(TfrmEasyIPBase) 
```

同时编辑 MyNewForm 的 DFM 文件 - 更改`object MyNewForm`为`inherit MyNewForm`

# visual-studio - 每次运行时如何修复 Visual Studio 的“项目过期”消息

> ID：909533
> 
> 赞同：9
> 
> 时间：2009-05-26T08:13:19.773
> 
> 标签：visual-studio, dependencies, projects-and-solutions

我有一个包含 70 个项目的 Visual Studio (2005) 解决方案文件。
每次我按 F5 运行它时，它都会告诉我有 4 个项目已过期，并询问我是否要重建它们。即使我刚刚完成了完整的构建，它也会这样做。
我理解（原则上）其他项目之一必须更新这些项目所依赖的东西，但我该如何去找出什么？

是否有任何工具可以提供帮助，或者我应该遵循什么程序来找出导致 VS 标记这些项目以进行重建的原因？

更新：
对于那些感兴趣的人来说，我的电脑似乎是/是问题（我的高清最近一直在起作用）。当我试图追踪问题时，连续的重建开始产生编译错误。我进行了清理并构建并得到了大量（显然是虚假的）错误。一次重新启动后，然后进行重建，所有错误和依赖性问题都消失了。
打扰一下，我去备份所有重要文件时...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-26T10:15:34.160

我会连续两次运行正常的构建。第二次，我将 MSBUILD 详细程度设置为“正常”或更高（在工具-> 选项、“项目和解决方案”、“构建和运行”中。我会仔细阅读输出以查看实际构建的内容第二次。

事实上，现在我想起来了，如果这真的是一个循环，那么第二次构建的某些部分肯定是导致它第三次构建的原因，等等。也许你有一个后期构建步骤涉及用作早期步骤输入的程序集或其他资源的项目。解决方案中有 70 个项目，这样的事情很容易在不经意间引起，而且很难捕捉到。您可能必须对 MSBUILD 有足够的了解，以便能够检测到它的一个步骤何时决定它需要构建，因为某些东西发生了变化，然后才能充分了解您的解决方案，从而知道什么都不应该改变；然后看到不应该改变的事情*发生了变化。*

完成本练习后，您可能已经获得了一些洞察力，可以帮助您将解决方案分解为更小的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-08-02T23:11:43.100

将 .netmodule 链接到符合自定义构建步骤的项目时，我遇到了同样的问题。问题原来是我还链接了一个 C++ 库，并且 .netmodule 文件列在链接器输入的同一行。

示例：.lib .netmodule

代替：.lib \n .netmodule

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-12T14:48:28.553

比 John 在 Visual Studio 2013 中冗长的日志更快的方法是打开解决方案资源管理器的项目树；未找到的文件不会在文件名前面有小三角形（您通常可以在该文件中看到符号列表）。

删除这些文件，对我来说，AlwaysCreate 消息消失了（当详细级别设置为至少“正常”时，您只会看到“AlwaysCreate”）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-30T14:53:37.607

我遇到了这个问题，结果我有一个头文件添加到我的项目中，但我已经从磁盘中删除了。从修复的行为中删除不存在的头文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-29T17:30:38.167

在我删除了一些在我的项目中不再使用的源文件后，我在 VS2010 中遇到了这个确切的问题。只需从“构建”菜单中选择“清洁解决方案”，然后重建解决方案即可为我解决问题。

# iphone - 如何在 iphone 中输入 uitextfield 后立即计算？

> ID：909534
> 
> 赞同：1
> 
> 时间：2009-05-26T08:13:59.117
> 
> 标签：iphone, xcode, interface-builder

我有一个观点，我想要这样的功能..

第一个 UITextfield 是 ex-10000 的价格，第二个 UItextField 是 ex-70 的价格

第三个 UIlabel 将显示 ex- 7,000.00 美元的结果

我想要这个，而且只要我输入 7 结果标签应该显示 $ 700.00

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-26T19:49:28.497

要对每次按键做出反应，请实现 UITextFieldDelegate，尤其是 textField:shouldChangeCharactersInRange:replacementString: 方法，并将其设置为 priceField 和 percentField 的委托。本着以下精神的东西：

```
- (void)updatePrice {
   float price = [priceField.text floatValue];
   float percentage = [percentageField.text floatValue];
   resultLabel.text = [NSString stringWithFormat:@"$ %.2f", 
}

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
   [self updatePrice];
} 
```

# iphone - 为 iPhone 编写干净、高性能的代码

> ID：909536
> 
> 赞同：5
> 
> 时间：2009-05-26T08:14:07.667
> 
> 标签：iphone, performance, optimization, coding-style

几个月以来，我一直在使用 Objective-C 在 iPhone 上进行开发，并且在使用 Java 开发应用程序时，我一直在应用学习和改进的最佳实践。其中包括：设计具有单一职责的类，在适当的情况下应用设计模式，以及编写只做一件事的[简短方法。](http://c2.com/cgi/wiki?ShortMethods)对我来说，这些做法从[干净代码的](http://www.informit.com/articles/article.aspx?p=1235624)角度来看都是有益的，并且在很大程度上与领域无关。

我对结果非常满意。然而，一些 iPhone 开发人员独立地建议我不要这样做，因为他们说我写了太多的类和太多的方法。我曾多次被警告：

*   堆栈会爆炸
*   太多的类会减慢 iPhone 的速度（即被用户感知）
*   嵌套方法调用会损害性能（即用户可感知）

在实践中，我没有遇到过这些问题。从表面上看一些[iPhone 性能指标](http://www.mikeash.com/?page=pyblog/performance-comparisons-of-common-operations-iphone-edition.html)，在我看来，实现通用模式和短方法所需的额外方法调用和对象生命周期开销不太可能造成任何用户可察觉的延迟。然而，其他 iPhone 开发者的建议让我有点害怕。

我想继续学习和改进过去对我很有帮助的领域无关编程实践，但是在 iPhone 上进行开发时，我不希望走上一条以痛苦告终的路线！

那么关于这个平台——我是否应该放弃一些常见的最佳实践，更加注意优化方法调用和对象生命周期开销？还是我应该继续听从[Knuth 的](http://en.wikiquote.org/wiki/Donald_Knuth#Quotes_about_Donald_Knuth)建议：

> 过早的优化是编程中万恶（或至少大部分）的根源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T10:19:28.180

对我来说，这确实归结为可维护性。使用高质量的代码，您可以更轻松地维护系统。

我有与我一起工作的开发人员，当我建议他们采取捷径使系统正常工作时，他们鄙视我并延迟交付项目。从长远来看，它每次都付出了代价！！！

如果它是一个密集型应用程序，使用 opebGL 和什么不是那么性能可能会成为一个问题。如果它只是一个简单的实用程序或数据应用程序。我建议继续使用您知道的最佳代码实践，然后继续学习它们，因为它们非常宝贵。大多数模式在所有基础编程语言中都与领域无关并且有益。

如果你确实破坏了堆栈，那么将其中一些方法/类重新分解为单个调用（至少你知道它可能会发生并且会在它发生时立即注意到它）如果它没有那么你有很棒的代码来维护它任何半生不熟的代码猴子都可以很容易地阅读它，他们必须稍后再看它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T19:15:10.670

OO 应用程序变慢的整个问题仅仅是对象比结构化编程风格更容易失控。曾几何时，在改进方法调用优化之前，这可能会产生影响，尤其是在进行间接（即虚拟）调用时。

如果您的对象被大量使用，并且您有一些经常调用的较低级别的对象，那么使用它们可能会降低性能 - 但我说的是数百万次调用（我在我的时间，无论是非结构化的、结构化的还是面向对象的！）。如果您不断地分配和删除大量 (LOTS) 对象，也会对性能造成更大的影响。

不过，唯一的答案是看一看。如果你有一个对象被分配，快速连续删除，然后优化它（即使它看起来不那么优雅），如果你有一个对象你调用它的方法数千次，那么也优化它。（但是一旦你完成了这个测量，你就会测量它的性能并且你会改进慢的位！）

在“优雅”的代码和简单快速的代码之间需要权衡，不要走极端，你应该没问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-26T19:25:14.880

在开发相当复杂的黑莓应用程序时，我也有类似的经历。我也被告知要避免频繁的对象分配、内部类等。我们原来的应用程序是一团无法维护的混乱。我最近重写了应用程序，重点关注良好的 OO 设计（需要的模式、大量单一用途且通常不可变的对象等）。在很多地方，我违反了避免某些“昂贵”构造和对象分配的建议。生成的应用程序不仅更易于维护，而且更小。如果额外的对象分配产生了任何开销，我当然没有注意到。我认为这里的教训正是 Knuth 所说的。首先关注良好的设计，然后在需要时进行优化。此外，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-26T19:29:23.530

一般来说：不用担心。使用对象和消息可能成为潜在性能问题的唯一情况是您一次执行数百或数千个分配，或者每隔几毫秒发送数千个消息。您不希望在物理模拟中使用 Obj-C 对象来表示数千个 3D 矢量。

即使在循环中发送大量消息的情况下，也可以通过在循环之前存储指向适当方法的函数指针来获得更好的性能。

# sql-server - 如何在 SQL Server 中合并两个数据库？

> ID：909541
> 
> 赞同：11
> 
> 时间：2009-05-26T08:14:46.747
> 
> 标签：sql-server, database, merging-data

两个数据库具有相同的架构，但它们可能会与某些表中的主键发生冲突。所以我希望他们忽略重复的行，并继续进一步合并。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-26T13:58:07.677

首先，密钥冲突表明您当前使用的任何进程都是一个糟糕的进程。

要正确合并使用自动生成 (non_GUID) 键的两个数据库，您需要采取几个步骤。首先向父表添加一个新的自动生成的键，然后从两个表中导入所有数据，将旧的旧文件重命名为 ID_old，并将新文件重命名为旧的 id 名称。此时，您可以继续移动子表。您需要通过加入父表并将新的 id 字段作为外键的值而不是现有表中的值来复制到子表。您将需要对每个外键表重复此过程，如果该表也是父表，则需要在复制任何数据之前将 conversionid 字段添加到表中，以便您可以一直工作. 要正确地做到这一点，需要大量的数据库结构知识和大量计划。如果没有对两个源数据库进行良好备份，请不要考虑这样做。如果两个数据库都处于单用户模式时，该过程也可以发生，这也是最好的。

如果您使用自然键并且有重复项，那么您的问题就大不相同了。所有重复的关键记录都应该首先移动到一个单独的表中，并确定哪个是更正确的数据。在某些情况下，您会发现自然键实际上不是唯一的（它们很少是唯一的，这就是我几乎从不使用它们的原因）并且合并的数据库将需要使用某种类型的自动生成的键。这将涉及代码更改以及数据库更改，因此这是最后的选择。

使用自然键经常发现的是，每个键的数据都不同但相似（地址中的圣副街）在这种情况下标记要插入的记录之一，然后在分两步进行插入时，首先是记录没有重复项，然后是重复表中标记为插入的记录。请记住，您必须检查所有外键表中的所有记录，以确定保留哪些和不保留哪些。仅仅丢弃任何重复项是一个坏主意，这样您将丢失数据，可能是关键数据（例如客户的订单）。这是一个冗长乏味的过程，需要具有数据专业知识的人来做出决定。作为程序员，您应该为他们提供一个重复数据删除工具，让他们检查每组重复项的所有数据，并选择要保留的内容和要删除的内容，然后标记所有内容，它将运行一个插入记录的过程。请记住，在您的设计中，对于真正的重复项，将有一些子表（例如 orders ）需要将两者的记录发送到数据库以选择要输入的记录（orders 是一个示例），对于其他表您将要选择哪个是正确的（例如地址）。所以你可以看到这是一个复杂的过程，需要对数据库有透彻的了解。将有一些子表（例如 orders ）需要将两者的记录发送到数据库以选择要输入的记录（orders 是一个例子），对于其他表，您将要选择哪个是正确的（地址例如）。所以你可以看到这是一个复杂的过程，需要对数据库有透彻的了解。将有一些子表（例如 orders ）需要将两者的记录发送到数据库以选择要输入的记录（orders 是一个例子），对于其他表，您将要选择哪个是正确的（地址例如）。所以你可以看到这是一个复杂的过程，需要对数据库有透彻的了解。

如果你有很多重复，他们可能会清理并添加几个月的数据，所以一个工具真的很重要。这样做的人很可能是系统用户，而不是数据库专家或程序员，因为他们是唯一能够真正判断要保留哪些记录的人。在任何情况下您都可能需要做一些类似的事情，因为即使您拥有自动生成的密钥，也可能存在重复的记录。他们只是更难找到。

没有简单的方法可以合并两个数据库（即使使用 GUIDS，自然键也会出现重复的问题）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-24T11:25:58.570

我知道这是一个老话题，但我必须评论我在许多帖子中看到的一般方法，即尝试使用 SQL 查询本地完成所有事情。这些解决方案的共同点是在应用查询之前需要花费大量时间来创建和测试查询。

所以是的——您可以使用相对复杂的查询本地合并两个数据库，但您可以节省大量时间并免费使用第三方工具（大多数或全部都有功能齐全的免费试用版）。

市场上有很多这样的东西。Red Gate，已经在其他帖子中提到，是最好的之一，但您也可以尝试[ApexSQL Data Diff](http://www.apexsql.com/sql_tools_datadiff.aspx)、[dbForge](http://www.devart.com/dbforge/sql/studio/)、 [SQL 比较工具集](http://www.idera.com/productssolutions/sqlserver)和许多其他工具。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-26T08:22:30.893

最好的选择可能是使用第 3 方应用程序，例如[RedGate SQL Data Compare](http://www.red-gate.com/products/SQL_Data_Compare/index.htm)。花费一些钱，但编写该脚本 IMO 是值得的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-27T08:57:01.967

这是我近年来两次这样做的方式：http: [//byalexblog.net/merge-sql-databases](http://byalexblog.net/merge-sql-databases)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-04-27T17:34:05.107

因为如果你有主键作为 IDENTITY 这是我的建议（不应该需要修改架构）。

1.  设置所有外键，以便`ON UPDATE CASCADE`设置
2.  更新父表中的主键/标识字段，并添加您要合并到的相应表的字段的最大值（然后 FK 会将值级联到子表）
3.  对子表中的 PK / IDENTITY 字段执行相同操作
4.  按照[这个论坛答案](http://www.webmasterworld.com/forum47/2717.htm)的建议，在插入每个表的任一侧使用`SET IDENTITY_INSERT`ON / OFF，从父表开始，然后转到子表

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-11T10:28:46.697

您可以在合并数据库中的所有表中添加一个附加字段（例如称为 DatabaseID），并将其添加到主键中。这样，您可以保留原始键，同时在合并数据库中拥有唯一键 - 并且您可以判断该行来自哪个数据库。这就是[SQL-Hub](http://sql-hub.com "SQL 集线器")所做的 - 如果它只是一项临时工作，您可以通过免费试用来做到这一点。

# image - Opencv边缘提取

> ID：909542
> 
> 赞同：4
> 
> 时间：2009-05-26T08:14:48.197
> 
> 标签：image, image-processing, opencv, edge-detection

我有一张图像，我想创建一个边缘直方图。我将图像分成 1100 个图像块，并尝试在每个块中找到边缘及其方向（水平、垂直、45° 对角线、135° 对角线或非定向）。

如何提取有关边缘的信息？你有什么想法？

问候！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-27T16:01:02.763

我在这篇论文中找到了答案：Efficient Use of MPEG-7 Edge Histogram Descriptor by Won。

我的目标是找到以下优势：

![边缘类型](https://i.stack.imgur.com/h9Zcg.jpg)

将每个图像块分成 4 个部分，计算每个部分的平均灰度，并使用以下系数：

![系数](https://i.stack.imgur.com/DFlZm.jpg)

我们如下使用这个系数并得到 5 个值：

![指标](https://i.stack.imgur.com/K4vXr.jpg)

使用阈值，我们估计每种类型的边缘：

```
program SetEdgeType(max, m_nd, m_h, m_v, m_d_45, m_d_135)
{
if (max < TEdge) then EdgeHisto(0)++
else
{
 if (m_nd > T0)    then EdgeHisto(1)++
 if (m_h > T1)     then EdgeHisto(2)++
 if (m_v > T1)     then EdgeHisto(3)++
 if (m_d_45 > T2)  then EdgeHisto(4)++
 if (m_d_135 > T2) then EdgeHisto(5)++
}
endif
return(EdgeHisto)
} 
```

Savvas A. Chatzichristofis 将阈值选择为：TEdge=14，T0=0.68，T1=T2=0.98。

# python - 回调方法的工厂 - Python TKinter

> ID：909551
> 
> 赞同：1
> 
> 时间：2009-05-26T08:18:17.830
> 
> 标签：python, methods, factory

编写一个测试应用程序来模拟 PIO 行，我有一个非常简单的 Python/Tk GUI 应用程序。使用数字键 1 到 8 来模拟 PIO 引脚 1 到 8。按下按键 = PIO 高电平，松开按键 = PIO 变为低电平。我需要它不是问题。我有点陷入了一个兔子洞，试图使用工厂来创建按键回调函数。

这是一些精简的代码：

```
#!usr/bin/env python
"""
Python + Tk GUI interface to simulate a 8 Pio lines.
"""

from Tkinter import *

def cb_factory(numberic_key):
    """
    Return a call back function for a specific keyboard numeric key (0-9)
    """
    def cb( self, event, key=numberic_key ):
        bit_val = 1<<numberic_key-1
        if int(event.type) == 2 and not (bit_val & self.bitfield):
            self.bitfield |= bit_val
            self.message("Key %d Down" % key)
        elif int(event.type) == 3 and (bit_val & self.bitfield):
            self.bitfield &= (~bit_val & 0xFF)
            self.message("Key %d Up" % key)
        else:
            # Key repeat
            return
        print hex(self.bitfield)
        self.display_bitfield()
    return cb

class App( Frame ):
    """
    Main TK App class 
    """

    cb1 = cb_factory(1)
    cb2 = cb_factory(2)
    cb3 = cb_factory(3)
    cb4 = cb_factory(4)
    cb5 = cb_factory(5)
    cb6 = cb_factory(6)
    cb7 = cb_factory(7)
    cb8 = cb_factory(8)

    def __init__(self, parent):
        "Init"
        self.parent = parent
        self.bitfield = 0x00
        Frame.__init__(self, parent)

        self.messages = StringVar()
        self.messages.set("Initialised")

        Label( parent, bd=1, 
               relief=SUNKEN, 
               anchor=W, 
               textvariable=self.messages,
               text="Testing" ).pack(fill=X)

        self.bf_label = StringVar()
        self.bf_label.set("0 0 0 0 0 0 0 0")

        Label( parent, bd=1, 
               relief=SUNKEN, 
               anchor=W, 
               textvariable=self.bf_label,
               text="Testing" ).pack(fill=X)

 # This Doesn't work! Get a traceback saying 'cb' expected 2 arguements
 # but only got 1?
 #
 #       for x in xrange(1,9):
 #           cb = self.cb_factory(x)
 #           self.parent.bind("<KeyPress-%d>" % x, cb) 
 #           self.parent.bind("<KeyRelease-%d>" % x, cb) 

        self.parent.bind("<KeyPress-1>", self.cb1)
        self.parent.bind("<KeyRelease-1>", self.cb1)

        self.parent.bind("<KeyPress-2>", self.cb2)
        self.parent.bind("<KeyRelease-2>", self.cb2)

        self.parent.bind("<KeyPress-3>", self.cb3)
        self.parent.bind("<KeyRelease-3>", self.cb3)

        self.parent.bind("<KeyPress-4>", self.cb4)
        self.parent.bind("<KeyRelease-4>", self.cb4)

        self.parent.bind("<KeyPress-5>", self.cb5)
        self.parent.bind("<KeyRelease-5>", self.cb5)

        self.parent.bind("<KeyPress-6>", self.cb6)
        self.parent.bind("<KeyRelease-6>", self.cb6)

        self.parent.bind("<KeyPress-7>", self.cb7)
        self.parent.bind("<KeyRelease-7>", self.cb7)

        self.parent.bind("<KeyPress-8>", self.cb8)
        self.parent.bind("<KeyRelease-8>", self.cb8)

    def display_bitfield(self):
        """
        Display the PIO lines (1 for on, 0 for off)
        """
        bin_lst = []
        for x in xrange(8):
            bit = 1 << x
            if bit & self.bitfield:
                bin_lst.append("1")
            else:
                bin_lst.append("0")
        bin_lst.reverse()
        bin_str = " ".join( bin_lst )
        self.bf_label.set( bin_str )

    def message( self, msg_txt ):
        "set"
        self.messages.set( msg_txt )

    def cb_factory(self,  numberic_key ):
        """
        Return a call back function for a specific keyboard numeric key (0-9)
        """
        def cb( self, event, key=numberic_key ):
            bit_val = 1<<numberic_key-1
            if int(event.type) == 2:
                self.bitfield |= bit_val
                self.message("Key %d Down" % key)
            else:
                self.bitfield &= (~bit_val & 0xFF)
                self.message("Key %d Up" % key)
            print hex(self.bitfield)
            self.display_bitfield()
        return cb

##########################################################################

if __name__ == "__main__":

    root = Tk()
    root.title("PIO Test")
    theApp = App( root )

    root.mainloop() 
```

我终于得到了某种方法工厂来为回调工作，但我觉得它不是很令人满意。

所以我的问题是，你能有一个类方法工厂，它会按照我尝试的方式生成类方法（参见注释掉的代码和 App 类方法 cb_factory()）？

注意：是的，我知道这个应用程序一次只能按住 4 个键，但这对于我的目的来说已经足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T08:25:04.697

cb 期望“自我”和“事件”。也许它只从绑定中获取事件？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T14:03:10.257

回答您的后续问题。

我不确定您不了解哪一部分，但我猜您不太了解事件回调的工作原理？如果是这样，这很容易。Tk 在循环中运行以查找事件（按键、鼠标点击等）。当您将回调/函数绑定到事件时，您只是告诉它调用您的函数并将事件对象作为参数传递。然后，您可以查询事件对象以获取有关实际发生的事件的更多详细信息。您当前正在构建单独的回调函数并将每个函数绑定到 18 个键事件（在键 1-9 上按下和释放）。我认为您可以将其重写为简单地将 cb 作为您的类的方法，因为事件对象几乎肯定也会包含键码。

```
class:
  def __init__(self):
    for x in xrange(8):
      self.parent.bind("<KeyPress-%d>" % x, self.keyaction)
      self.parent.bind("<KeyRelease-%d>" % x, self.keyaction)

  def keyaction(self, event):
    key = event.keycode # attribute may have another name, I haven't checked tk docs
    ... do stuff ... 
```

由于我们现在使用**self** .keyaction 作为回调，它应该将 self 作为它的第一个参数。它从事件对象中获取其键码。现在，在创建函数时，两个值都不需要“内置”到函数中，因此不再需要为每个键实际创建不同的回调，并且代码更易于理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T12:50:31.540

这是修改后的代码，考虑到 SpliFF 的回答。我发现这在美学上更令人愉悦，但我不明白它是如何工作的，这让我很烦恼。所以，为了额外的功劳，谁能解释这是如何工作的？

```
#!usr/bin/env python
"""
Python + Tk GUI interface to simulate a 8 Pio lines.
"""

from Tkinter import *
from pio_handler import *

class App( Frame ):
    """
    Main TK App class 
    """

    def __init__(self, parent):
        "Init"
        self.parent = parent
        self.bitfield = 0x00
        Frame.__init__(self, parent)

        self.messages = StringVar()
        self.messages.set("Initialised")

        Label( parent, bd=1, 
               relief=SUNKEN, 
               anchor=W, 
               textvariable=self.messages,
               text="Testing" ).pack(fill=X)

        self.bf_label = StringVar()
        self.bf_label.set("0 0 0 0 0 0 0 0")

        Label( parent, bd=1, 
               relief=SUNKEN, 
               anchor=W, 
               textvariable=self.bf_label,
               text="Testing" ).pack(fill=X)

        # This is the clever bit!
        # Use a factory to assign a callback function for keys 1 to 8
        for x in xrange(1,9):
            cb = self.cb_factory(x)
            self.parent.bind("<KeyPress-%d>" % x, cb) 
            self.parent.bind("<KeyRelease-%d>" % x, cb) 

    def display_bitfield(self):
        """
        Display the PIO lines (1 for on, 0 for off)
        """
        bin_lst = []
        for x in xrange(8):
            bit = 1 << x
            if bit & self.bitfield:
                bin_lst.append("1")
            else:
                bin_lst.append("0")
        bin_lst.reverse()
        bin_str = " ".join( bin_lst )
        self.bf_label.set( bin_str )

    def message( self, msg_txt ):
        "set"
        self.messages.set( msg_txt )

    def cb_factory(self,  numeric_key ):
        """
        Return a call back function for a specific keyboard numeric key (0-9)
        """
        def cb( event, key=numeric_key ):
            bit_val = 1<<numeric_key-1
            if int(event.type) == 2:
                self.bitfield |= bit_val
                self.message("Key %d Down" % key)
            else:
                self.bitfield &= (~bit_val & 0xFF)
                self.message("Key %d Up" % key)
            print hex(self.bitfield)
            self.display_bitfield()
        return cb

##########################################################################

if __name__ == "__main__":

    root = Tk()
    root.title("PIO Test")
    theApp = App( root )

    root.mainloop() 
```

# java - 如何获取 EJB 监听端口？

> ID：909554
> 
> 赞同：1
> 
> 时间：2009-05-26T08:18:50.607
> 
> 标签：java, jakarta-ee, ejb

我目前正在开发一个库，用于监控对多个远程服务（WebServices、EJB...）的调用。

我要注册的参数之一是调用 EJB 的端口（像远程对象一样调用的无状态会话 Bean）

有没有标准化的方式来获取端口？或者我应该检查 JNDI 树以获取此类信息？

我正在使用 EJB 2.1 规范，但我也可以使用 EJB 3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-03-27T08:16:59.480

> 有没有标准化的方式来获取端口？

不，这不是规范的一部分，即不是标准的。虽然 EJB 规范要求支持 RMI-IIOP，但这不是访问 EJB 的常用方式，Java 客户端通常使用 JNP 或 T3 等专有协议。

> 或者我应该检查 JNDI 树以获取此类信息？

这方面也没有标准，所以你只是在解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T08:42:07.907

没有获取端口的标准方法。该端口通常特定于您要部署的应用服务器。甚至协议也是 appserver 特定的 :) - （RMI-JRMP、T3 等）

# c# - 如何获取程序集文件版本

> ID：909555
> 
> 赞同：813
> 
> 时间：2009-05-26T08:19:03.553
> 
> 标签：c#, .net, assemblies, version

其中`AssemblyInfo`有两个程序集版本：

1.  `AssemblyVersion`: 指定要归因的程序集的版本。
2.  `AssemblyFileVersion`：指示编译器为 Win32 文件版本资源使用特定版本号。Win32 文件版本不需要与程序集的版本号相同。

我可以`Assembly Version`使用以下代码行获得：

```
Version version = Assembly.GetEntryAssembly().GetName().Version; 
```

但我怎样才能得到`Assembly File Version`？

* * *

## 回答 #1

> 赞同：935
> 
> 时间：2009-05-26T08:26:47.110

请参阅我上面的评论，以澄清您真正想要的内容。希望就是这样：

```
System.Reflection.Assembly assembly = System.Reflection.Assembly.GetExecutingAssembly();
System.Diagnostics.FileVersionInfo fvi = System.Diagnostics.FileVersionInfo.GetVersionInfo(assembly.Location);
string version = fvi.FileVersion; 
```

* * *

## 回答 #2

> 赞同：252
> 
> 时间：2009-10-22T08:51:44.977

共有[三个版本](http://all-things-pure.blogspot.com/2009/09/assembly-version-file-version-product.html)： **程序集**、**文件**和**产品**。如果您没有明确指定它们，它们由不同的功能使用并采用不同的默认值。

```
string assemblyVersion = Assembly.GetExecutingAssembly().GetName().Version.ToString(); 
string assemblyVersion = Assembly.LoadFile("your assembly file").GetName().Version.ToString(); 
string fileVersion = FileVersionInfo.GetVersionInfo(Assembly.GetExecutingAssembly().Location).FileVersion; 
string productVersion = FileVersionInfo.GetVersionInfo(Assembly.GetExecutingAssembly().Location).ProductVersion; 
```

* * *

## 回答 #3

> 赞同：77
> 
> 时间：2013-02-25T17:11:17.183

当我想访问应用程序文件版本（在程序集信息 -> 文件版本中设置的内容）时，比如说在表单加载时为其设置标签文本以显示版本，我刚刚使用

```
versionlabel.Text = "Version " + Application.ProductVersion; 
```

这种方法**需要**参考`System.Windows.Forms`.

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2009-05-26T08:24:48.627

更新：正如 Richard Grimes 在[我引用的帖子](http://bytes.com/groups/net/420417-assemblyversionattribute)@Iain 和 @Dmitry Lobanov 中提到的，我的回答在理论上是正确的，但在实践中是错误的。

正如我应该从无数书籍等中记得的那样，虽然使用 设置这些属性`[assembly: XXXAttribute]`，*但它们会被编译器劫持并放入`VERSIONINFO`资源*中。

由于上述原因，您需要使用[@Xiaofu's answer](https://stackoverflow.com/a/909583/11635)中的方法，因为在从属性中提取信号后会剥离属性。

* * *

 ~~```
公共静态字符串 GetProductVersion()
{
  var 属性 = (AssemblyVersionAttribute)Assembly
    .GetExecutingAssembly()
    .GetCustomAttributes( typeof(AssemblyVersionAttribute), true )
    。单身的（）;
   返回属性。信息版本；
}

```~~ 

~~（来自[http://bytes.com/groups/net/420417-assemblyversionattribute](http://bytes.com/groups/net/420417-assemblyversionattribute) - 如那里所述，如果您正在寻找不同的属性，请将其替换为上述属性）~~

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-06-19T02:50:30.377

用这个：

```
((AssemblyFileVersionAttribute)Attribute.GetCustomAttribute(
    Assembly.GetExecutingAssembly(), 
    typeof(AssemblyFileVersionAttribute), false)
).Version; 
```

或这个：

```
new Version(System.Windows.Forms.Application.ProductVersion); 
```

# database - 页面结果在 [您选择的数据库]

> ID：909556
> 
> 赞同：0
> 
> 时间：2009-05-26T08:19:12.587
> 
> 标签：database, pagination

我想收集“最先进”的方法来为这个 wiki 中的任何数据库分页结果。

输入：我有一个巨大的表 PAGE_ME：

```
create table PAGE_ME (
    ID bigint not null,
    NAME varchar(32) not null,
    CREATED TIMESTAMP not null
) 
```

`id`不一定与 的顺序相同`created`。我想显示 和 之间的结果`5\. May 2008 09:03:01`，`3\. Aug 2008 11:00:01`一次 20 个，按时间排序，升序（5\. 五月第一）。查询应该返回`NAME`and `CREATED`（加上你需要对结果进行分页的任何内容），所以内部查询是：

```
select NAME, CREATED
from PAGE_ME
where CREATED between '2008-05-05 09:03:01' and '2008-08-03 11:00:01'
order by CREATED asc 
```

在键盘上，准备好……走吧！;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T09:04:00.967

[在这里阅读我的文章](http://weblogs.asp.net/fbouma/archive/2007/05/21/api-s-and-production-code-shouldn-t-be-designed-by-scientists.aspx)中的分页查询和这里的[sql server](http://weblogs.asp.net/fbouma/archive/2007/06/05/sqlserver-2005-paging-there-is-a-generic-wrapper-query-possible.aspx)。所有查询都适用于您向它们提出的任何查询，因此没有仅在某些情况下有效的技巧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T09:32:06.747

在 Oracle 中，一个常见的解决方案是：

```
select NAME, CREATED
from
( select NAME, CREATED, ROWNUM rn
  from
  ( select NAME, CREATED
    from PAGE_ME
    where CREATED between '2008-05-05 09:03:01' and '2008-08-03 11:00:01'
    order by CREATED asc
  )
  where ROWNUM <= :max_row
)
where rn >= :min_row 
```

在这里，:min_row 和:max_row 定义了当前页面的限制，例如 1 和 10、11 和 20，...

# iphone - 在没有滚动视图的简单 UIVIew 中为 UITextField 出现键盘时调整界面？

> ID：909562
> 
> 赞同：2
> 
> 时间：2009-05-26T08:20:38.793
> 
> 标签：iphone, xcode, interface-builder

有什么方法可以将简单 UIView 中的一些文本字段向上移动，这样它们就不会隐藏在键盘后面。？是否可以不使用 UIScrollView

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-26T20:55:59.487

应该可以只调整 UITextField 所在视图的框架位置。看看这段代码：

[http://iphoneincubator.com/blog/tag/uitextfield](http://iphoneincubator.com/blog/tag/uitextfield)

```
- (void)textFieldDidBeginEditing:(UITextField *)textField {  
    [self scrollViewToCenterOfScreen:textField];  
}  

- (void)scrollViewToCenterOfScreen:(UIView *)theView {  
    CGFloat viewCenterY = theView.center.y;  
    CGRect applicationFrame = [[UIScreen mainScreen] applicationFrame];  

    CGFloat availableHeight = applicationFrame.size.height - keyboardBounds.size.height;            // Remove area covered by keyboard  

    CGFloat y = viewCenterY - availableHeight / 2.0;  
    if (y < 0) {  
        y = 0;  
    }  
    scrollView.contentSize = CGSizeMake(applicationFrame.size.width, applicationFrame.size.height + keyboardBounds.size.height);  
    [scrollView setContentOffset:CGPointMake(0, y) animated:YES];  
} 
```

# c# - 将代码重构为 using 语句

> ID：909563
> 
> 赞同：2
> 
> 时间：2009-05-26T08:21:14.767
> 
> 标签：c#, using, sqlconnection, sqlcommand

我有一个带有很多方法的 dal 层，它们都调用存储过程，一些返回列表（所以使用`SqlDataReader`），其他的只有一个特定的值。

我有一个辅助方法可以创建`SqlCommand`：

```
 protected SqlCommand CreateSprocCommand(string name, bool includeReturn, SqlDbType returnType)
    {
        SqlConnection con = new SqlConnection(this.ConnectionString);
        SqlCommand com = new SqlCommand(name, con);
        com.CommandType = System.Data.CommandType.StoredProcedure;

        if (includeReturn)
            com.Parameters.Add("ReturnValue", returnType).Direction = ParameterDirection.ReturnValue;

        return com;
    } 
```

现在我的平均（过度简化）方法体看起来像：

```
SqlCommand cmd = CreateSprocCommand("SomeSprocName"); //an override of the above mentioned method
try {
   cmd.Connection.Open();
   using (var reader = cmd.ExecuteReader()) {
       //some code looping over the recors
   }
   //some more code to return whatever needs to be returned
}
finally {
   cmd.Connection.Dispose();
} 
```

有没有办法重构它，这样我就不会失去我的辅助功能（它会做很多其他重复的工作），而且还能使用`using`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-26T08:29:25.903

一种方法是将其从*返回*命令更改为*接受*使用该命令的委托：

```
protected void ExecuteSproc(string name,
                            SqlDbType? returnType,
                            Action<SqlCommand> action)
{
    using (SqlConnection con = new SqlConnection(this.ConnectionString))
    using (SqlCommand com = new SqlCommand(name, con))
    {
        con.Open();
        com.CommandType = System.Data.CommandType.StoredProcedure;

        if (returnType != null)
        {
            com.Parameters.Add("ReturnValue", returnType.Value).Direction = 
                ParameterDirection.ReturnValue;
        }
        action(com);
    }
} 
```

（请注意，我还删除了`includeReturn`参数并`returnType`改为可为空。只需传递`null`“无返回值”即可。）

您可以将其与 lambda 表达式（或匿名方法）一起使用：

```
ExecuteSproc("SomeName", SqlDbType.DateTime, cmd =>
{
    // Do what you want with the command (cmd) here
}); 
```

这样处理与创建在同一个地方，调用者不需要担心它。我非常喜欢这种模式——现在我们有了 lambda 表达式，它变得更加简洁了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-26T08:35:17.717

你可以这样做：

```
protected static SqlCommand CreateSprocCommand(SqlConnection con, string name, bool includeReturn, SqlDbType returnType)
{
    SqlCommand com = new SqlCommand(name, con);
    com.CommandType = System.Data.CommandType.StoredProcedure;

    if (includeReturn)
        com.Parameters.Add("ReturnValue", returnType).Direction = ParameterDirection.ReturnValue;

    return com;
} 
```

并这样称呼它：

```
using (SqlConnection con = new SqlConnection(this.ConnectionString))
using (SqlCommand cmd = CreateSprocCommand(con, "SomeSprocName", true, SqlDbType.Int)
{
    cmd.Connection.Open();
    using (var reader = cmd.ExecuteReader())
    {
        //some code looping over the recors
    }
    //some more code to return whatever needs to be returned
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-26T08:27:02.743

您可以嵌套 using 语句：

```
using (SqlCommand cmd = CreateSprocCommand("..."))
{
  using (var connection = cmd.Connection)
  {
     connection.Open();
     using (var reader = cmd.ExecuteReader())
     {
         ...
     }
     ...
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-26T08:25:02.933

怎么样：

```
using (SqlCommand cmd = CreateSprocCommand("whatever"))
{
  cmd.Connection.Open();
  using (var reader = cmd.ExecuteReader())
  {
   //blabla
  }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-26T08:27:04.817

你是这个意思吗 ？

```
using (SqlCommand cmd = CreateSprocCommand("SomeSprocName"))
{
    cmd.Connection.Open();
    using (var reader = cmd.ExecuteReader()) 
    {
        //some code looping over the recors
    }
} 
```

# asp.net - 在 IIS7 集成管道模式下从 StaticFileModule 捕获 404 异常

> ID：909564
> 
> 赞同：2
> 
> 时间：2009-05-26T08:21:29.913
> 
> 标签：asp.net, exception, iis-7, http-status-code-404

有谁知道是否有一种好的编程方式（不使用 CustomError 设置）来捕获/处理来自 IIS7 上集成管道模式下的 StaticFileModule 的 404 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-05-11T20:46:49.473

您是否尝试过覆盖 Global.asax.cs 中的 HttpApplication.Error 事件：

```
 protected void Application_Error (object sender, EventArgs e)
    {
        HttpException httpException = Context.Error as HttpException;
        if (httpException != null)
        {
            switch (httpException.GetHttpCode ())
            {
                case 404:
                    // do stuff here
                    //Server.ClearError ();
                    break;
            }
        }
    } 
```

# firefox - 提交表单后，FF3 从远程 IP 重定向到本地主机

> ID：909566
> 
> 赞同：0
> 
> 时间：2009-05-26T08:21:56.277
> 
> 标签：firefox, redirect, localhost, browser-cache

我正在使用本地 IP（例如 10.1.1.59:8080）访问网络上的另一台计算机。登录页面加载良好，但表单提交后 firefox (3) 重定向到本地主机而不是远程 IP。

IE6/7/8 没有问题，所以它似乎是一个 Firefox 问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-26T08:35:00.853

`8080.`这通常是代理服务器端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T08:39:48.940

就像上面建议的 shahkalpesh 一样，似乎与缓存有关。

刷新缓存解决了这个问题。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-02T13:01:10.853

实际上我对决议的看法是错误的。这不是浏览器缓存问题，但可能与 jboss/tomcat 有关 - 重新启动它们会暂时消除问题。当我刷新浏览器缓存时，我可能已经重新启动了 jboss，并将浏览器缓存误认为是根本原因。我设法在 Safari 和 IE 上重新创建了这个问题，所以我倾向于 jboss 是罪魁祸首。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-13T13:05:18.353

在这类问题中，源*通常*是服务器及其内容。

请编辑您的问题以更具体。

你输入了什么网址？

消息来源说了什么？

你的网络服务器的访问日志说了什么？

# c# - 为什么我的第一个单选按钮没有被选中？

> ID：909567
> 
> 赞同：1
> 
> 时间：2009-05-26T08:22:13.377
> 
> 标签：c#, .net, html, asp.net-mvc

我得到以下HTML：

```
<div class="horizontalRadio">
    <label for="SearchBag.DisplayTypeChips" id="DisplayTypeChipsLabel">
        <%=ViewData.Model.T9nProvider.TranslateById("CommonWeb.Chips")%>
    </label>
    <%=Html.RadioButton("displayType", DisplayTypes.Chip,
        Model.DisplayType.Equals(DisplayTypes.Chip.ToString(), StringComparison.InvariantCultureIgnoreCase),
        new { @id = "SearchBag.DisplayTypeChips" })%>
</div>
<div class="horizontalRadio">
    <label for="SearchBag.DisplayTypeGrid" id="DisplayTypeGridLabel">
        <%=ViewData.Model.T9nProvider.TranslateById("CommonWeb.Grid")%>
    </label>
    <%=Html.RadioButton("displayType", DisplayTypes.Grid,
       Model.DisplayType.Equals(DisplayTypes.Grid.ToString(), StringComparison.InvariantCultureIgnoreCase),
        new { @id = "SearchBag.DisplayTypeGrid" })%>
</div> 
```

每当`Model.DisplayType`是“网格”，一切都很好；第二个按钮被选中。
当值为“chip”时，不检查任何内容。在调试器中，我可以看到这`Model.DisplayType.Equals(DisplayTypes.Chip.ToString())`是真的。当我将按钮的名称更改为不同的名称时，它也可以工作。
发生我不想更改名称，因为这是有意义的名称。这是我在整个应用程序中使用的名称...

任何想法为什么这个名字是邪恶的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T08:32:13.933

ASP.NET MVC 中存在一个问题，即模型上的属性与“分组”元素（如选择或单选组）的名称同名。

有关详细信息，请参阅[http://weblogs.asp.net/ashicmahtab/archive/2009/03/27/asp-net-mvc-html-dropdownlist-and-selected-value.aspx](http://weblogs.asp.net/ashicmahtab/archive/2009/03/27/asp-net-mvc-html-dropdownlist-and-selected-value.aspx)。

可能是这样，值得一试。

# .net - x64 上的 .NET 客户端配置文件

> ID：909573
> 
> 赞同：3
> 
> 时间：2009-05-26T08:22:52.127
> 
> 标签：.net, installation, 64-bit, .net-client-profile

我知道 .NET 客户端配置文件[不针对 x64 或 ia64](http://blogs.windowsclient.net/trickster92/archive/2008/05/21/introducing-the-net-framework-client-profile.aspx)。不过不知道是什么意思？

它影响了两个部分

1.  如果我将我的应用程序设置为使用 VS 中的 .NET 客户端配置文件，并且它在 x64 上运行，它会工作吗？
2.  如果我将我的安装项目先决条件设置为需要 .NET 客户端配置文件而不是 .NET Framework 3.5 SP1，如果它在没有 .NET Framework 3.5 SP1 的 x64 计算机上运行会发生什么情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-09T13:51:58.627

如果用户还没有 .net 框架，客户端配置文件只是完整框架的精简版，旨在最大限度地减少安装时间。客户端配置文件本身不能安装在 x64 机器上，但如果安装了完整的框架，您的应用程序将正常工作。

请注意，从 .net 4.0 开始，客户端配置文件将支持所有架构，包括 x64（[请参见此处](http://blogs.msdn.com/jgoldb/archive/2009/05/27/net-framework-4-client-profile-introduction.aspx)）

就第 2 部分而言，如果 PC 上未安装 .net 框架，您将看到通常的“此应用程序需要 .net 框架”对话框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-02T21:11:06.523

1：理论上，**如果**用户安装了*常规*的.NET 3.5SP1，它应该可以工作（因为客户端配置文件是 3.5SP1 特定的 IIRC）

2：我希望你得到一些非常时髦的“无法运行”消息（错误）框

我会启动一个 x64 VM 并对其进行测试，但我现在在我的笔记本电脑上，它不会那样做（没有 VT）

# autocomplete - 无法让 YUI 自动完成功能工作

> ID：909580
> 
> 赞同：2
> 
> 时间：2009-05-26T08:25:30.280
> 
> 标签：autocomplete, yui

在过去的几个小时里，我一直在阅读 YUI 文档和代码，但无法正常工作。

我的远程数据源是 XML。我有一个本地代理来检索远程数据。

我已经通过 Firebug 确认，当我在输入字段中输入时，请求被发送出去并且数据被返回。但是，我配置为保存结果的 div 没有被写入。在检查 DOM 时，YUI 正在用用于保存结果的 html 结构填充我的 div，但没有内容。

经常记录调用函数“formatResult”来过滤结果。但是，这永远不会触发。我通过在函数中使用 alert() 对此进行了测试。

我不知道到底发生了*什么*。下面是我的 XML 格式和我的代码。我正在通过 YUI 加载器加载数据源和自动完成依赖项。

```
<div id="auto-search">
    <input type="text" id="auto-search-input" value=""/>
    <div id="auto-search-results"></div>
</div>

YAHOO.example.auto = function() {

    var searchDataSource = new YAHOO.util.XHRDataSource("http://localhost/insidersearchproxy.php"); 
    searchDataSource.responseType = YAHOO.util.XHRDataSource.TYPE_XML; 
    searchDataSource.responseSchema = { 
        resultNode : "RelatedResult", 
        fields: [ "rid","rtype", "title", "thumbURL" ]
    }

    var autosearch = new YAHOO.widget.AutoComplete("auto-search-input","auto-search-results", searchDataSource); 
    autosearch.generateRequest = function(sQuery) { 
        return "?q="+sQuery;
    }; 

    autosearch.resultsTypeList = false; // pass data as an object 

    autosearch.applyLocalFilter = true; // pass results thru filter
    autosearch.formatResult = function(oResultData, sQuery, sResultMatch) { 
        var sMarkup = (sResultMatch) ? sResultMatch : ""; 
        return sMarkup; 
    };

    return {
        searchDataSource: searchDataSource,
        autosearch: autosearch
    };
}();

<list>
  <RelatedResult>
    <rid>2014</rid>
    <rtype>Celebrity</rtype>
    <title>Adam Brody</title>
    <thumbURL>http://cm1.theinsider.com/media/0/52/65/wenn1302741.50.jpg</thumbURL>
  </RelatedResult>

  <RelatedResult>
    <rid>2776</rid>
    <rtype>Celebrity</rtype>
    <title>Adam Sandler</title>
    <thumbURL>http://cm1.theinsider.com/media/0/49/95/wenn1198212.50.jpg</thumbURL>
  </RelatedResult>
  <RelatedResult>

    <rid>3084</rid>
    <rtype>Celebrity</rtype>
    <title>Bryan Adams</title>
    <thumbURL>http://cm1.theinsider.com/media/0/1/46/RoomSer4.50.jpg</thumbURL>
  </RelatedResult>
  <RelatedResult>
    <rid>5747</rid>

    <rtype>Celebrity</rtype>
    <title>Amy Adams</title>
    <thumbURL>http://cm1.theinsider.com/media/0/56/87/wenn5095565.50.jpg</thumbURL>
  </RelatedResult>
  <RelatedResult>
    <rid>6572</rid>
    <rtype>Celebrity</rtype>

    <title>Adam Richard</title>
    <thumbURL>http://cm1.theinsider.com/media/0/7/97/Adam_Richard_small.50.jpg</thumbURL>
  </RelatedResult>
  <RelatedResult>
    <rid>9001</rid>
    <rtype>Celebrity</rtype>
    <title>Adam Goldberg</title>

    <thumbURL>http://cm1.theinsider.com/media/0/80/15/91969967.50.jpg</thumbURL>
  </RelatedResult>
  <RelatedResult>
    <rid>30897</rid>
    <rtype>Celebrity</rtype>
    <title>Adam Rothenberg</title>
    <thumbURL>http://cm1.theinsider.com/media/0/99/86/ex_bio_adam.50.jpg</thumbURL>

  </RelatedResult>
  <RelatedResult>
    <rid>58009</rid>
    <rtype>Celebrity</rtype>
    <title>Adam Lambert</title>
    <thumbURL>http://cm1.theinsider.com/media/0/361/95/271363.50.jpg</thumbURL>
  </RelatedResult>

</list> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-20T17:11:22.463

如果没有看到您的完整实现，很难确定，但您可以尝试关闭“applyLocalFilter”。换句话说，改变这一行：

```
autosearch.applyLocalFilter = true; // pass results thru filter 
```

改为：

```
autosearch.applyLocalFilter = false; 
```

有关使用您的代码的工作实现，请参阅我的测试页面：

[http://chris.photobooks.com/tests/autocomplete/test20090620.html](http://chris.photobooks.com/tests/autocomplete/test20090620.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-10T08:15:07.207

你当然应该重载'filterResponse'，而不是'formatResult'。后者只是一个回调，它允许您控制结果的显示方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-02-22T20:56:37.870

代替

```
YAHOO.example.auto = function() {...} 
```

尝试

```
YAHOO.example.BasicRemote = function() {...} 
```

# c# - .NET Windows 窗体问题的自定义设计器类

> ID：909587
> 
> 赞同：2
> 
> 时间：2009-05-26T08:27:13.710
> 
> 标签：c#, .net, winforms, custom-controls, design-time

我已经实现了一个继承自 DocumentDesigner 的自定义设计器类。.NET Framework 中的标准 Form 类使用 FormDocumentDesigner 类（也继承自 DocumentDesigner），但由于此类是内部的，因此无法从它继承并自定义其行为，我通过使用反射器复制了此类中的逻辑并插入它在我的自定义设计器类中（以便我的表单的默认设计时行为符合标准表单）。

一切正常，除了一件事：在我的自定义设计器类的 Initialize 方法中，我想插入一个 ToolStrip 控件，以便每次在设计时打开我的表单时，该控件都是可见和可编辑的。问题是每次在设计器中关闭并重新打开窗体时都会调用 Initialize 方法，这会导致每次创建 ToolStrip 控件的新实例并将其添加到窗体的 Controls 集合中。我正在寻找一种方法来检查代码中是否已经有一个 ToolStrip 控件序列化并避免添加另一个。

到现在才发现可以使用IDesignerHost的LoadComplete事件，检查Form的Controls集合中是否有ToolStrip。但是，任何更好的想法将不胜感激。

谢谢你的时间！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T09:46:00.307

好吧，LoadComplete 事件是正确的点。我通常检查 Loading 属性以检查 Initialize 是在加载时发生还是在加载后被调用。

```
IDesignerHost _host;
Form _form;

public override void Initialize(System.ComponentModel.IComponent component)
{
  _form = component as Form;
  _host = (IDesignerHost)this.GetService(typeof(IDesignerHost));
  if (_host != null)
  {      
   if (_host.Loading)
   {
     _host.LoadComplete += new EventHandler(_host_LoadComplete);
   }
   else
   {
     initializeForm();
   }
  }
}

void _host_LoadComplete(object sender, EventArgs e)
{
  _host.LoadComplete -= new EventHandler(_host_LoadComplete);
  initializeForm();
}

void initializeForm()
{
   if (_form!= null)
   {
      ...
   }
} 
```

另一种方法是创建一个可以放入表单的组件并为该组件创建一个设计器，而不是重新创建 FormDesigner。从组件设计器中，您可以使用**_host.RootComponent**属性获取父表单。

# java - Java/MSSQL：java.sql.SQLException 无效的对象名称'TableName'

> ID：909599
> 
> 赞同：4
> 
> 时间：2009-05-26T08:31:45.727
> 
> 标签：java, sql-server, sql-server-2005, tomcat

我正在尝试将 Java 应用程序从旧服务器移动到新服务器。该应用程序在 Tomcat 上运行，使用 Microsoft SQL Server 作为后端 DB，并使用数据源 (ODBC) 中定义的系统 DSN 来决定连接到哪里。旧服务器使用 Windows 2000/SQL Server 2000，新服务器使用 Windows 2003/SQL Server 2005。

ODBC 定义在服务器之间是相同的，并且定义了要使用的 DB。

在新服务器上，当用户尝试登录时，stdout.log 中会显示以下内容：

正在检查用户 **错误：java.sql.SQLException：[Microsoft][ODBC SQL Server Driver][SQL Server]无效的对象名称“UserTable”。**

数据库中确实存在一个名为**UserTable**的表，但通过管理界面显示为“ **dbo.USerTable ”。**

MSSQL 中是否有某个设置我应该调整以使其对“dbo”感到满意。前缀丢失，还是我错过了其他东西？

[编辑] 使用 Windows 身份验证，作为故障排除步骤，Public 和 Guest 角色已被授予对 DB 的完全权限。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-26T20:05:53.143

数据库登录名不同吗？dbo“前缀”只是定义对象的模式。因此，如果您的 ODBC 连接器使用 dbo 凭据登录该对象，则该对象应位于其默认模式中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-26T08:54:20.660

您必须首先使用 ODBC 吗？以我的经验，“本机”（类型 4）SQL Server 驱动程序更好。有一个[Microsoft 驱动程序](http://msdn.microsoft.com/en-us/data/aa937724.aspx)和[jTDS](http://jtds.sourceforge.net/)。我对 MS 驱动程序没有太多经验，但 jTDS 一个很好。

当然，如果您因其他因素而被迫使用 ODBC，这对您没有任何用处 - 但如果您有选择权，那么值得一试。在 Windows 机器上配置会少一件事情。

# css - 使可点击：在 100% 宽度和高度内设置元素

> ID：909606
> 
> 赞同：1
> 
> 时间：2009-05-26T08:33:51.887
> 
> 标签：css

 我有一个 css 问题，我卡住了。我无法让可点击的标题链接获得 100% 的高度；不使用 javascript。

我尝试了很多我在谷歌搜索时发现的东西，但没有一个能解决我的问题。

我得到这个结果： 

[替代文字 http://thomasstock.net/css100percent.jpg](http://thomasstock.net/css100percent.jpg)

这是我的html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="StyleSheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <table>
        <thead>
            <tr>
                <th>
                    <a href="#">header 1</a>
                </th>
                <th>
                    <a href="#">some very very very very very very very very very long header 2</a>
                </th>
                <th>
                    <a href="#">3</a>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    cell a1
                </td>
                <td>
                    cell a2
                </td>
                <td>
                    cell a3
                </td>
            </tr>
            <tr>
                <td>
                    cell b1
                </td>
                <td>
                    cell b2
                </td>
                <td>
                    cell b3
                </td>
            </tr>
        </tbody>
    </table>
</body>
</html> 
```

有了这个CSS：

```
table
{
    width: 300px;
    border-collapse: collapse;
}
th, td
{
    border: solid 1px;
}

th a
{
    background-color: Fuchsia;

    /* Making the headerlinks 100% width */
    width:100%;
    float:left;

    /* Making the headerlinks 100% height ??? */
    height: 100%; /* doesnt work! */
    min-height:100%;
}
tr
{
    height:100%;
} 
```

[在此处下载此代码](http://thomasstock.net/css100percent.zip)

**=> 如何使标题变成完全粉红色和可点击？**（不使用javascript？）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-26T08:35:41.600

您必须将s`a`内部显示为[块级元素](http://www.w3.org/TR/CSS21/visuren.html#block-boxes)：`th`

```
th a {
    display: block;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-26T08:37:36.123

您需要`display:block`在标题中设置链接。内联元素上的 height:width 属性被忽略；

```
th a
{
    display:block;
    background-color: Fuchsia;

    /* Making the headerlinks 100% width */
    width:100%;

    /* Making the headerlinks 100% height ??? */
    height: 100%;
} 
```

编辑：忘了提到要让 100% 的高度起作用，父级需要指定一个高度，例如

```
th 
{
    height: 40px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T22:16:14.767

可能不合理，但在某些情况下设置

```
th {
    white-space: nowrap;
} 
```

彻底摆脱问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-27T05:22:10.663

您可以将每个链接的任意高度设置为相当长：（可能是 6em？）然后将表格单元格的最大高度设置为`th`更短的值：（3em？）隐藏溢出。这样，所有链接都将高于表格单元格的高度，但会被隐藏的溢出截断 - 它们都应该是粉红色且可点击的。确保`display:relative;`在`th`' 上设置 a 否则旧版本的 IE 不会切断任何溢出。祝你好运 ：）

# d - 使用 D 编程语言的经验

> ID：909610
> 
> 赞同：19
> 
> 时间：2009-05-26T08:34:48.390
> 
> 标签：d

这里有人曾经使用过[D 编程语言](http://en.wikipedia.org/wiki/D_%28programming_language%29)吗？

它似乎有许多不错的特性，但它会达到那些当前广泛使用的语言（如 C++、Java 或 C#）的流行程度吗？

那么它是否值得学习，还是一种前景渺茫的孤立语言。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-05-26T08:54:19.193

我花了几天时间玩 D，看看它与 C++ 和 java 相比如何。它被定位为实现与 C++ 相同的另一种方式，但没有所有未定义的行为，并且添加了垃圾收集器、foreach 循环和其他一些现代细节。它编译为本机代码，因此您可以访问此场景中可能发生的所有常见优化。

整个 C 语言被封装为 D 的一个子集，作为构建语言大部分的较低级别的构建块。这有助于提高可移植性，但也可以防止 D 演变成单一一致的方法。

在 D 中本地运行任何 C 函数的能力开辟了包括系统编程的可能性领域——操作系统、驱动程序等。

D 中有两个常用的类框架。默认是 Phobos，它在设计上相当简陋和简单，允许您创建所需的结构，但提供的大型或复杂的构建块很少。另一个是[Tango](http://www.dsource.org/projects/tango)，它让人联想到 java 类库，包含一个更完整的框架。还有一个项目允许两个库的互操作性。

根据我的经验，D 是一种非常好的编码语言，与 C# 和 java 有很多共同点，并且允许通过 C 甚至程序集互操作访问原始机器。我看到的主要限制是缺乏良好的开发工具支持。那里有一些 IDE 和插件，但都不是很完整，因此同时使用文本编辑器和命令行构建工具可能会更好。

该语言有两个版本，D1 和 D2。目前，框架和编译器更好地支持 D1，并且 D2 添加了一些便利功能，使该语言更易于处理和使用。

**更新（2009 年 6 月）：** 我最近再次研究 D，并认为我应该关注[DSource](http://www.dsource.org/projects/)，它现在有许多不同的编译器项目，并且是 Tango 库、各种绑定、几个 GUI 工具包和几个IDE。有些项目在起步阶段就被放弃了，但我相信今天有不少项目正在发展壮大，并且取得了良好的进展。在这个阶段，看起来 D 的成功将取决于开源运动，而不是其祖先。

**更新（2012 年 2 月）** 虽然自上次编辑以来我对 D 的研究不多，但我会注意到 D2 现在已经发布，并得到了一本好书[The D Programming Language](http://erdani.com/index.php/books/tdpl/)的支持。典型的 Alexandrescu，它暴露了模板系统的很多细节，包括模板约束，这使得 D 成为比 C++ 的当前状态更具表现力和类型安全的工具。

除了阅读这本书，我自 2009 年以来就没有接触过 D 语言或其工具和社区，因此我无法评论它们迄今为止的成熟或成长。我知道一小部分专业程序员希望他们被允许在工作中使用该语言，但我们中的大多数人通常都坚持使用 C++ 和其他流行语言，而在 D 应该处于最佳状态的领域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-12T00:56:01.847

在查看语言流行度等问题时，我发现 Tiobe 是一个很好的资源[http://www.tiobe.com/content/paperinfo/tpci/index.html](http://www.tiobe.com/content/paperinfo/tpci/index.html)

如您所见，D 在前 20 名中。

# xml - 将 XML 导入 MS Access 2003 时，布尔变量作为字符串导入

> ID：909617
> 
> 赞同：2
> 
> 时间：2009-05-26T08:35:55.593
> 
> 标签：xml, ms-access, xml-import

我正在尝试通过 File>Get External Data>Import 将 XML 文件导入 MS Access 2003。我想将一个字段导入为布尔值。我已经预先构建了表格并仅导入数据。我很困惑 XML 中的布尔值应该是什么，以便它可以很容易地作为 aceess 布尔变量导入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-26T20:37:55.467

嗯，我会用 0 表示假，-1 表示真。但我怀疑它也会转换这些对......

```
假值真值
  0 -1
  0 {任何非零整数}
  假真
  否 是  

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-08T13:36:25.597

[您可以在此处](http://www.w3.org/TR/xmlschema-2/#built-in-primitive-datatypes)找到有关各种数据类型的正确 XML 表示的信息。对于布尔值，您可以使用“true”或“1”表示 true，使用“false”或“0”表示 false。还要注意日期、时间和日期时间的正确表示。

# php - 在我的本地 Windows 机器上，我如何编写脚本来每天下载漫画并将其通过电子邮件发送给自己？

> ID：909618
> 
> 赞同：5
> 
> 时间：2009-05-26T08:36:43.207
> 
> 标签：php, python, ruby, scheduled-tasks

在我的本地 Windows 机器上，我如何编写脚本来每天下载漫画并将其通过电子邮件发送给自己？

比如
[http://comics.com/peanuts/](http://comics.com/peanuts/)

**更新**：我知道如何将图像下载为文件。困难的部分是如何从我的本地 Windows 机器通过电子邮件发送它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-26T10:36:14.917

这取决于您想要的精确度。下载整个网页不会太具有挑战性 - 使用 wget，正如 Earwicker 上面提到的那样。

如果你想下载漫画的实际图像文件，你的武器库中需要更多。在 Python 中——因为这是我最了解的——我想你需要使用 urllib 来访问页面，然后使用正则表达式来识别页面的正确部分。因此，您需要知道页面的确切布局和图像的绝对 URL。

例如，对于 XKCD，以下工作：

```
#!/usr/bin/env python

import re, urllib

root_url = 'http://xkcd.com/'
img_url  = r'http://imgs.xkcd.com/comics/'

dl_dir   = '/path/to/download/directory/'

# Open the page URL and identify comic image URL
page  = urllib.urlopen(root_url).read()
comic = re.match(r'%s[\w]+?\.(png|jpg)' % img_url, page)

# Generate the filename
fname = re.sub(img_url, '', comic)

# Download the image to the specified download directory
try:
    image = urllib.urlretrieve(comic, '%s%s' % (dl_dir, fname))
except ContentTooShortError:
    print 'Download interrupted.'
else:
    print 'Download successful.' 
```

然后，您可以通过电子邮件发送它，但您感觉很舒服。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-26T08:43:31.693

快速浏览一下 google 会发现两个命令行程序，您应该能够将它们组合成一个批处理文件或使用您选择的脚本语言。

[http://www.gnu.org/software/wget/](http://www.gnu.org/software/wget/) - 下载

[http://www.beyondlogic.org/solutions/cmdlinemail/cmdlinemail.htm](http://www.beyondlogic.org/solutions/cmdlinemail/cmdlinemail.htm) - 发送电子邮件

您可以使用控制面板中的 Windows 任务计划程序使其每天运行。

如果您使用 Python，肯定会有方便的库来进行下载/发送电子邮件 - 浏览 Python 官方网站。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-26T10:56:17.480

在 RSS 提要上配置 feedburner，自己订阅电子邮件警报？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-26T09:36:28.437

这可能是您到达目标的最短距离。

这并不简单……您需要弄清楚如何解析图像，而花生示例似乎是一个不可预测的 URI，因此获取图像本身可能比看起来更困难。您最好的选择是**读取**远程网页的 HTML，**编写一个正则表达式**来解析图像 url。然后**邮件功能**将正常工作，通过将 mail() 函数中的标题设置为以下内容来发送 HTML 电子邮件：

```
$headers = "MIME-Version: 1.0\r\n";
$headers .= "Content-type: text/html;";
$headers .= " charset=iso-8859-1\r\n"; 
```

使用邮件中的图像标签。这将让您收到所有连环画一个接一个放置的电子邮件。您的电子邮件软件会执行 HTTP 请求来**为您下载图像**，因此您可以避免直接附加图像。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-26T17:02:32.233

通过电子邮件发送它很容易。选择您喜欢的语言的库并阅读文档。通过您的常规电子邮件帐户发送，或为其创建一个新的免费 G​​Mail 帐户。

*   [http://docs.python.org/library/email](http://docs.python.org/library/email)
*   [http://am.rubyonrails.org/](http://am.rubyonrails.org/)
*   [http://us.php.net/manual/en/function.mail.php](http://us.php.net/manual/en/function.mail.php)

不过，有时附件确实很棘手。如果不出意外，请使用您最喜欢的任何库来试一试，然后就您遇到的任何问题发布另一个具体问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-27T04:50:41.473

如果您已经知道如何下载文件，这非常简单。下载后，创建一个通过电子邮件将其发送给自己的 cronjob。

使用 phpmailer 之类的东西是通过电子邮件发送它的最简单方法

[http://phpmailer.codeworxtech.com/index.php?pg=examplebmail](http://phpmailer.codeworxtech.com/index.php?pg=examplebmail)

# ms-access - 索引损坏连接表中的备注字段

> ID：909619
> 
> 赞同：1
> 
> 时间：2009-05-26T08:36:46.793
> 
> 标签：ms-access

为了解决性能问题，我在表 A 中添加了一个索引。该表在与表 B 的查询中连接。添加索引会破坏表 B 中备注字段的输出。当我删除索引时，一切都很好。

希望我说清楚了，如果有兴趣，我可以添加一些有关查询本身的更多信息。

关于那个有什么想法吗？

干杯，拉蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T09:07:44.797

似乎这个问题与处理备忘录字段的常见错误有关。当我将查询功能从“group by”更改为“first”时，就像这里演示的[http://allenbrowne.com/bug-18.html](http://allenbrowne.com/bug-18.html)一样，一切正常。

奇怪的是，仅在我添加索引后才发生错误。

拉蒙

# authentication - 如何使用 curl 客户端证书身份验证上传？

> ID：909622
> 
> 赞同：3
> 
> 时间：2009-05-26T08:37:25.810
> 
> 标签：authentication, ssl, upload, curl

除了使用基本或摘要身份验证进行上传之外，服务是否可以生成证书供客户端下载以进行经过身份验证的上传？[例如，可以使用Keygen](http://www.whatwg.org/specs/web-apps/current-work/multipage/forms.html#the-keygen-element)，尽管在某处“保存证书”可能更直接。

一旦用户拥有证书，用户就可以通过 cURL 上传“foobar.png”。也许像这样：

```
curl -E mycert.pem -F "fileupload=@foobar.png" http://example.com/secure-upload.php 
```

有没有人设置类似的方案？我不确定这是否可能，因为`-E`手册页中的开关没有提到 POST。另外我不确定如何设置 httpd 服务来验证证书。希望只是一个[Apache SSL 指令](http://httpd.apache.org/docs/2.2/mod/mod_ssl.html)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-26T20:42:26.033

是的，有可能。-E 适用于任何 HTTP 方法。您当然需要使用 HTTPS:// 网址。

您还需要提供密码，并且需要了解 -E 采用私钥和连接的私有证书（通常，如手册页中所示）。

使用 Apache 的服务器端也只是遵循文档，是的。

# git - 如何从工作树中的更改创建新的 git 分支？

> ID：909628
> 
> 赞同：9
> 
> 时间：2009-05-26T08:38:26.777
> 
> 标签：git, branch

我对我的工作树进行了编辑，我想继续在分支中工作。会`git checkout -b new_branch`清除我当前对工作树的更改吗？如果是这样，我如何创建一个新分支并切换到它而不恢复我的工作树？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-26T08:43:34.113

做吧`git checkout -b new_branch`。它将创建新分支，而您的工作树中的更改保持不变。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-26T11:54:29.970

如果将来您需要查看 Git 是否会销毁您尚未提交的内容（它通常永远不会这样做），请使用`git stash`来隐藏您的更改。它不会保存 Git 不知道的文件，但 Git 也会拒绝覆盖未知文件以防签出和类似操作。

# asp.net - 如何在 ASP 类文件中使用会话？

> ID：909630
> 
> 赞同：0
> 
> 时间：2009-05-26T08:38:38.897
> 
> 标签：asp.net, visual-studio

我正在绑定数据库中的菜单。在 SQL 查询中，我通过

```
where userid="System.Web.HttpContext.Current.Session["uid"].ToString()" 
```

它正在工作，但每次登录都是一样的。

请问我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T09:53:42.677

您拥有的代码片段似乎有点偏离，因为您已将所有内容都用引号括起来，该行应该沿着

C＃

```
string sql = "select a,b,c from XXX where userid=" + System.Web.HttpContext.Current.Session["uid"].ToString(); 
```

VB

```
Dim sql As String = "select a,b,c from XXX where userid=" & System.Web.HttpContext.Current.Session("uid").ToString() 
```

这是假设会话条目 uid 已设置。

尽管考虑到帖子的标题，虽然这是一个单独的类，但最好在类的构造函数中传递值或将它们设置在实例化对象的属性上，而不是从类中访问会话！如果您需要在 Web 应用程序以外的其他地方（例如单元测试）进行测试，这将允许更好地测试代码。

高温高压

OneSHOT

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T09:42:28.080

您首先如何设置该会话 uid？

你真的设置了吗？您是否可以使用逐行调试进行跟踪，并查看自从您单击登录（按钮？）以来，您在哪里以及使用巫婆值设置该会话？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T09:58:16.037

一个可能的问题是：

查看您提供的示例代码，您可以在引号中调用 current.session，这意味着您正在传递字符串

System.Web.HttpContext.Current.Session["uid"].ToString()

在 where 子句中，这在 sql 中没有任何意义。

您需要将调用 current.session 的值附加到 sql 字符串。

尝试...

```
where userid='" & System.Web.HttpContext.Current.Session("uid").ToString() & "'" 
```

** 编辑 ** OneSHOT 在我写我的时候给出了同样的答案...... :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-26T10:03:53.890

如果您尝试在经典 ASP 和 ASP.Net 之间共享 Session 数据，那么这不是很容易，但是是可行的。

有关完整详细信息，请参阅以下 MSDN 页面：http: [//msdn.microsoft.com/en-us/library/aa479313.aspx](http://msdn.microsoft.com/en-us/library/aa479313.aspx)

# javascript - Javascript：如何将带有字符串参数的函数作为参数传递给另一个函数

> ID：909633
> 
> 赞同：19
> 
> 时间：2009-05-26T08:39:36.943
> 
> 标签：javascript

我需要做这样的事情：

```
<input type="button" value="click" id="mybtn" 
onclick="myfunction('/myController/myAction', 
                   'myfuncionOnOK('/myController2/myAction2', 
                                  'myParameter2');',
                   'myfuncionOnCancel('/myController3/myAction3', 
                                  'myParameter3');');"  /> 
```

这个问题的上下文是，在 onClick 上，我需要调用一个 javascript 函数，该函数将对我提供的 url 进行 ajax 调用。它将打开一个带有 OK 和 Cancel 按钮的模态 div。

到这里还好。但是我还需要告诉 javascript 函数，当在新 div 中单击 OK 按钮时，将调用另一个具有其他参数和 url 的函数。另一个用于取消按钮。

问题是我无法正确传递第二个参数，因为它没有正确转义并给我 javascript 错误。

我已经在 SO 中搜索了其他类似的 Javascript 问题，但似乎没有一个涵盖我需要做的事情。

任何人都知道如何将这种字符串参数传递给 javascript 函数？或者也许还有另一个更好的解决方案来传递我没有想到的这些东西。

提前致谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-26T08:57:11.013

一种方法是正确转义引号：

```
<input type="button" value="click" id="mybtn"
       onclick="myfunction('/myController/myAction', 
               'myfuncionOnOK(\'/myController2/myAction2\', 
                   \'myParameter2\');',
               'myfuncionOnCancel(\'/myController3/myAction3\', 
                   \'myParameter3\');');"> 
```

不过，在这种情况下，我认为更好的处理方法是将两个处理程序包装在匿名函数中：

```
<input type="button" value="click" id="mybtn"
       onclick="myfunction('/myController/myAction', 
                function() { myfuncionOnOK('/myController2/myAction2', 
                             'myParameter2'); },
                function() { myfuncionOnCancel('/myController3/myAction3', 
                             'myParameter3'); });"> 
```

然后，您可以像这样从内部调用它们`myfunction`：

```
function myfunction(url, onOK, onCancel)
{
    // Do whatever myfunction would normally do...

    if (okClicked)
    {
        onOK();
    }

    if (cancelClicked)
    {
        onCancel();
    }
} 
```

这可能不是`myfunction`实际的样子，但你明白了。关键是，如果您使用匿名函数，您将拥有更多的灵活性，并且您的代码也会更加简洁。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-26T08:57:55.067

试试这个：

```
onclick="myfunction(
    '/myController/myAction',
    function(){myfuncionOnOK('/myController2/myAction2','myParameter2');},
    function(){myfuncionOnCancel('/myController3/myAction3','myParameter3');}
);" 
```

然后你只需要调用这两个函数传递给`myfunction`：

```
function myfunction(url, f1, f2) {
    // …
    f1();
    f2();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-26T08:56:57.470

我，我会这样做：

HTML：

```
onclick="myfunction({path:'/myController/myAction', ok:myfunctionOnOk, okArgs:['/myController2/myAction2','myParameter2'], cancel:myfunctionOnCancel, cancelArgs:['/myController3/myAction3','myParameter3']);" 
```

JS：

```
function myfunction(params)
{
  var path = params.path;

  /* do stuff */

  // on ok condition 
  params.ok(params.okArgs);

  // on cancel condition
  params.cancel(params.cancelArgs);  
} 
```

但是我也可能将闭包绑定到自定义订阅事件。您确实需要为问题添加一些细节，但是作为[一流的](http://helephant.com/2008/08/functions-are-first-class-objects-in-javascript/)函数很容易通过，并且可以通过多种方式为它们获取参数。我会避免将它们作为字符串标签传递，但这种间接方式很容易出错。

# tfs - TFS 项目迁移实用程序

> ID：909645
> 
> 赞同：1
> 
> 时间：2009-05-26T08:44:00.307
> 
> 标签：tfs, tfs-migration

嗨，任何人都可以建议从 TFS 迁移到 TFS 首选开源的工具

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T08:52:39.507

TfsToTfsMigration.codeplex.com 有一个可用的工具包和源代码并且是活跃的，但是你知道......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-09-30T18:54:42.353

迁移什么——构建、源代码、实验室/虚拟机、工作项？

对于工作项，我最喜欢的做法是打开两个 excel 实例，一个连接到您的每个 TFS 项目。在查询中选择同一组字段。将所有项目从一个 Excel 复制到另一个。然后单击另一个上的发布。

# jboss - 如何从 JBoss JMS 主题中删除消息？

> ID：909646
> 
> 赞同：0
> 
> 时间：2009-05-26T08:44:07.530
> 
> 标签：jboss, jms

我在 jbossmq-destinations-service.xml 中配置了我的主题，如下所示：

```
<mbean code="org.jboss.mq.server.jmx.Topic"
    name="jboss.mq.destination:service=Topic,name=myTopicName">
  <depends optional-attribute-name="DestinationManager">
           jboss.mq:service=DestinationManager</depends>
  <depends optional-attribute-name="SecurityManager">
           jboss.mq:service=SecurityManager</depends>
  <attribute name="SecurityConf">
    <security>
      <role name="guest" read="true" write="true" create="true"/>
      <role name="publisher" read="true" write="true" create="false"/>
      <role name="durpublisher" read="true" write="true" create="true"/>
    </security>
  </attribute>
</mbean> 
```

通过对主题名称进行 JNDI 查找，我可以轻松地连接到主题以发布消息，并且一切正常。

但是，我希望能够以特定间隔清除消息，因为它们可能会根据其他一些系统功能而过时，但我找不到任何示例或说明如何执行此操作。

问题是，当我对主题进行 JNDI 查找时，它会返回一个 org.jboss.mq.SpyTopic，它没有任何删除消息的功能，甚至不知道该主题上有多少消息。所有示例似乎都表明 org.jboss.mq.server.JMSTopic 具有所有功能，但我不知道如何将 SpyTopic 转换为 JMSTopic 或如何设置主题以便 JNDI 查找将返回JMSTopic。

任何人都可以帮忙吗？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T07:19:27.773

经过大量的搜索，我终于想出了这个方法。

```
public static void removeAllMessagesFromTopic(String topicName)
{
    try
    {
        //==============================================================
        // Set up the name of the topic object.
        // Alternative way:
        // objName = new ObjectName(
        //     "jboss.mq.destination:service=Topic,name=" + topicName);
        //==============================================================
        String domain = "jboss.mq.destination";
        Hashtable<String, String> keys = new Hashtable<String, String>();
        keys.put("service", "Topic");
        keys.put("name", topicName);
        ObjectName objName = new ObjectName(domain, keys);

        //==============================================================
        // Get the MBean server
        //==============================================================
        MBeanServer server = (MBeanServer)MBeanServerFactory
                .findMBeanServer(null).iterator().next();

        //==============================================================
        // Invoke the MBean
        //==============================================================
        Integer msgCount = (Integer)server.getAttribute(objName, "AllMessageCount");

        log.debug("Invoking removeAllMessages. (" + msgCount + "messages)");

        server.invoke(objName, "removeAllMessages",
                new Object[] {},  // No paramaters needed for removeAllMessages
                new String[] {});

        log.debug("Messages removed.");
    }
    catch (Exception ex)
    {
        log.error("Failed to remove messages from topic. Exception: " + ex);
        ex.printStackTrace();
    }

} 
```

# c++ - 如何隐藏控制台窗口并显示启动画面？

> ID：909651
> 
> 赞同：4
> 
> 时间：2009-05-26T08:45:57.213
> 
> 标签：c++, c, windows, matlab, splash-screen

我使用 Matlab 编译器创建了一个 .exe 文件。该程序需要 15 秒才能启动。我想隐藏控制台窗口，并显示自定义启动画面。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T14:07:15.643

关于制作启动画面，[The MathWorks File Exchange](http://www.mathworks.com/matlabcentral/fileexchange/)上有一些提交的内容就是这样处理的：

*   来自 W Thielicke[的已编译 .exe GUI 的精美闪屏](http://www.mathworks.com/matlabcentral/fileexchange/21110)
*   [splash.m](http://www.mathworks.com/matlabcentral/fileexchange/5946)来自群涵。
*   [Roy Schestowitz 的启动画面](http://www.mathworks.nl/matlabcentral/fileexchange/4891)。

我个人没有使用过它们中的任何一个，但如果您想设计自己的闪屏功能，它们至少应该给您一些指导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T09:47:04.797

您可以编写一个“启动器”程序。

发射器将

1.  创建启动画面
2.  使用 CreateProcess() 或其他方法启动 matlab exe。
3.  等到matlab exe正确打开
4.  出口

棘手的一点是确定 matlab 程序何时启动。一种方法可能是在循环中调用 EnumWindows() 和 GetWindowText() 以查找 matlab 窗口标题，但如果您了解 matlab 程序的功能，您可能会想出更好的方法。

您可能需要继续检查 matlab 进程是否已终止，以防出现问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T15:50:12.973

要摆脱 DOS 窗口，请`mcc -e`使用`mcc -m`. 请参阅在线文档中的“MATLAB 编译器 > 函数参考”，由`doc()`. 不过，您可能不想这样做：DOS 窗口是最后的输出；这是未处理的异常、核心转储和其他诊断输出的所在。至少让它成为一个选项，这样您就可以拥有一个具有 DOS 窗口的调试版本。

根据我的经验，编译的独立 Matlab 程序的启动开销发生在控制转移到用户 M 代码之前，因此需要在外部程序中完成启动画面，或者连接到`mcc`生成的 C 包装器。您可以使用 Michael J 关于编写启动器的建议。不过，您不是在寻找`matlab.exe`Matlab 桌面窗口，因为这是一个独立的应用程序。要检测 Matlab 程序何时启动，请让您的 M 代码写出一个小临时文件作为程序执行的第一件事，并让您的启动器注意这一点。

# php - 如何保存 jQuery UI portlet 插件的顺序？

> ID：909652
> 
> 赞同：1
> 
> 时间：2009-05-26T08:46:27.867
> 
> 标签：php, javascript, jquery, jquery-ui

我正在使用 jQuery UI 中的 portlet 插件

我的问题是：

是否可以将 portlet 的顺序保存在数据库中，这样当用户回来时，他可以看到他的 portlet 以相同的顺序排序？如何？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-26T09:24:57.227

我在[这里找到了解决方案](http://www.nabble.com/saving-portlet-state-td21951006s27240.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T09:15:19.103

好吧，我无法真正回答您的问题，但我建议您这样做：

如果 portlet 的顺序不是关键任务，则使用 cookie 来存储顺序而不是使用数据库。这将为您节省宝贵的空间和性能。

此外，您还可以支持尚未登录的用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-27T03:18:06.667

我已经完成了 cookie 保存方法和我保存到数据库的操作。

数据库方式真的是最好的方式

当我使用 cookie 保存框位置时，页面将加载并且框将处于默认位置，然后当页面完成读取 cookie 时，它​​将从 cookie 数据中重新排列框，这使得页面看起来非常慢

# python - 使用 Python 和 urllib2 进行 Windows 身份验证

> ID：909658
> 
> 赞同：13
> 
> 时间：2009-05-26T08:48:09.440
> 
> 标签：python, urllib2

我想从需要我的 Windows 用户名和密码的网页中获取一些数据。

到目前为止，我有：

```
opener = build_opener()
try:
    page = opener.open("http://somepagewhichneedsmywindowsusernameandpassword/")
    print page
except URLError:
    print "Oh noes." 
```

urllib2 支持吗？我找到了[Python NTLM](http://code.google.com/p/python-ntlm/)，但这需要我输入我的用户名和密码。有没有办法以某种方式获取身份验证信息（例如，如果我更改了`network.automatic-ntlm-auth.trusted-uris`设置，就像 IE 或 Firefox 一样）。

# 在msander的回答后编辑

所以我现在得到了这个：

```
# Send a simple "message" over a socket - send the number of bytes first,
# then the string.  Ditto for receive.
def _send_msg(s, m):
    s.send(struct.pack("i", len(m)))
    s.send(m)

def _get_msg(s):
    size_data = s.recv(struct.calcsize("i"))
    if not size_data:
        return None
    cb = struct.unpack("i", size_data)[0]
    return s.recv(cb)

def sspi_client():
    c = httplib.HTTPConnection("myserver")
    c.connect()
    # Do the auth dance.
    ca = sspi.ClientAuth("NTLM", win32api.GetUserName())
    data = None
    while 1:
        err, out_buf = ca.authorize(data) # error 400 triggered by this line
        _send_msg(c.sock, out_buf[0].Buffer)

        if err==0:
            break

        data = _get_msg(c.sock)

    print "Auth dance complete - sending a few encryted messages"
    # Assume out data is sensitive - encrypt the message.
    for data in "Hello from the client".split():
        blob, key = ca.encrypt(data)
        _send_msg(c.sock, blob)
        _send_msg(c.sock, key)
    c.sock.close()
    print "Client completed." 
```

这是很好的撕毁`socket_server.py`（见[这里](http://lists.adullact.net/pipermail/atelier-dev-commits/2005-August/000316.html)）。但我收到错误 400 - 错误请求。有没有人有任何进一步的想法？

谢谢，

多姆

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-26T10:34:05.467

假设您正在 Windows 上编写客户端代码并且需要无缝 NTLM 身份验证，那么您应该阅读 Python-win32 邮件列表中的 Mark Hammond 的[Hooking in NTLM](http://mail.python.org/pipermail/python-win32/2008-June/007722.html)帖子，它基本上回答了相同的问题。这指向包含在 Python Win32 扩展中的 sspi 示例代码（包含在[ActivePython](http://www.activestate.com/activepython/)中，否则可以在[此处下载](https://sourceforge.net/projects/pywin32/files/)）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2009-05-26T10:08:29.433

网站可以使用多种形式的身份验证。

1.  HTTP 身份验证。浏览器会在此处弹出一个窗口，供您输入用户名和密码。有两种机制：基本机制和摘要机制。页面附带一个“授权”标题，告诉浏览器（或使用 urllib2 的程序）该做什么。

    在这种情况下，您必须配置您的 urlopener 以提供授权标头需要查看的答案。您需要构建[HTTPBasicAuthHandler](http://docs.python.org/library/urllib2.html#urllib2.HTTPBasicAuthHandler)或[HTTPDigestAuthHandler](http://docs.python.org/library/urllib2.html#urllib2.HTTPDigestAuthHandler)。

    AuthHandlers 需要[PasswordManager](http://docs.python.org/library/urllib2.html#urllib2.HTTPPasswordMgr)。这个密码管理器可能有一个硬编码的用户名和密码（非常常见），或者它可能很聪明，可以从一些 Windows API 中计算出你的 Windows 密码。

2.  应用程序身份验证。这是 Web 应用程序将您定向到一个页面的地方，该页面包含您填写用户名和密码的表单。在这种情况下，您的 Python 程序必须使用 urllib2 来执行 POST（[带有数据的请求](http://docs.python.org/library/urllib2.html#urllib2.urlopen)），其中数据是正确填写的表单。对帖子的回复通常包含一个 cookie，它允许您进一步访问。你不需要太担心 cookie，urllib2 会自动处理这个。

你怎么知道你有哪个？您将标头转储到响应中。来自 urllib2.openurl 的响应包括所有标题（在 中`page.info()`）以及页面内容。

阅读[Python 中的 HTTP 身份验证](https://stackoverflow.com/questions/720867/http-authentication-in-python)

[如何使用 urllib、urllib2 和 ClientCookie 通过 Python 脚本登录 phpBB3 论坛？](https://stackoverflow.com/questions/112768/how-would-one-log-into-a-phpbb3-forum-through-a-python-script-using-urllib-urlli)

[如何从（非网络）python 客户端访问经过身份验证的 Google App Engine 服务？](https://stackoverflow.com/questions/101742/how-do-you-access-an-authenticated-google-app-engine-service-from-a-non-web-pyt)

# hibernate - Hibernate - 子集合标识符在更新中更改

> ID：909662
> 
> 赞同：0
> 
> 时间：2009-05-26T08:49:01.667
> 
> 标签：hibernate, one-to-many, many-to-one

当我尝试更新对象 RFQ 时，Hibernate 倾向于更新其子集合 BQMaster 并尝试设置和更新 BQMaster 的标识符，这通常是不允许的。

**postgre 日志文件：**
*2009-05-22 11:16:53 错误：重复键违反唯一约束“bq_masters_pkey”*
*2009-05-22 11:16:53 声明：更新 bq_masters 设置 rfq_id=$1，**id=$2** where **id= 3 美元***

**控制台错误：**
*原因：java.sql.BatchUpdateException：批处理条目 0**更新 bq_masters set rf q_id=2, id=0 where id=49449** was aborted。调用 getNextException 查看原因。**在org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutor Impl.java:1257)**在 org.postgresql.core.v3.QueryExecutorImpl*
*的 org.postgresql.jdbc2.AbstractJdbc2Statement$BatchResultHandler.handle Error(AbstractJdbc2Statement.java:2392) org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(* *BatchingBatcher.java:58)**的**org.hibernate.execute(* *QueryExecutorImpl.ja va:334)* *.jdbc.AbstractBatcher.executeBatch（AbstractBatcher.java：195）*
 ******... 32 更多******

 **当它试图更新 bq_masters 的 id 时，这似乎很奇怪。它应该保留 id 并仅更新其他字段。

```
Criteria crit = session.createCriteria(BQMaster.class);
crit.add(Restrictions.eq("project",project);
crit.setFirstResult(5);
crit.setMaxResult(2);
List bqMasters = crit.list();  

RFQ rfq = (RFQ)session.get(RFQ.class, RFQId);
rfq.setBqMasters(bqMasters);
session.update(rfq); 
```

休眠映射：

```
<class name="RFQ" table="rfq">
  <id name="id" column="id">
     <generator class="native">
        <param name="sequence">rfq_id_seq</param>
     </generator>
  </id>

  <property name="reference" column="reference" />
  <property name="status" column="status" />
  <property name="created" column="created" />
  <property name="modified" column="modified" />

  <many-to-one name="project" class="Project" column="project_id" cascade="save-update" />

  <list name="subcons" table="rfq_subcons">
     <key column="rfq_id" />
     <list-index column="id"/>
     <many-to-many class="Subcon" column="subcon_id"/> 
  </list>

  <list name="bqMasters">
     <key column="rfq_id" />
     <list-index column="id"/>
     <one-to-many class="BQMaster"/>
  </list>
</class>  

<class name="BQMaster" table="bq_masters">
  <id name="id" column="id">
     <generator class="native">
        <param name="sequence">bq_masters_id_seq</param>
     </generator>
  </id>

  <property name="reference" column="reference" />
  <property name="description" column="description" />
  <property name="lod" column="lod" />
  <property name="uom" column="uom" />
  <property name="quantity" column="quantity" />
  <property name="parentId" column="parent_id" />
  <property name="groupId" column="group_id" />
  <property name="leaf" column="leaf" />
  <property name="active" column="active" />
  <property name="subcontract" column="subcontract" />
  <property name="created" column="created" />
  <property name="modified" column="modified" />

  <many-to-one name="project" class="Project" column="project_id" cascade="save-update" />

  <many-to-one name="page" class="Page" column="page_id" cascade="save-update" />

  <many-to-one name="rfq" class="RFQ" column="rfq_id" cascade="save-update" />

</class> 
```

数据库结构供参考：

```
CREATE TABLE rfq
(   
    id bigserial NOT NULL, 
    project_id bigint, 
    reference text, 
    status text, 
    created timestamp without time zone, 
    modified timestamp without time zone, 
    CONSTRAINT rfq_pkey PRIMARY KEY (id), 
    CONSTRAINT rfq_project_id_fkey FOREIGN KEY (project_id) 
    REFERENCES projects (id) MATCH SIMPLE ON UPDATE CASCADE ON DELETE CASCADE
);  

CREATE TABLE bq_masters
(
    id bigserial NOT NULL, 
    reference varchar(100), 
    project_id bigint, 
    page_id bigint, 
    rfq_id bigint,
    description text, 
    lod integer, 
    uom varchar(20), 
    quantity numeric, 
    parent_id bigint, 
    group_id bigint,
    leaf boolean, 
    active boolean, 
    subcontract boolean, 
    created timestamp without time zone, 
    modified timestamp without time zone, 
    CONSTRAINT bq_masters_pkey PRIMARY KEY (id), 
    CONSTRAINT bq_masters_project_id_fkey FOREIGN KEY (project_id) 
    REFERENCES projects (id) MATCH SIMPLE ON UPDATE CASCADE ON DELETE CASCADE, 
    CONSTRAINT bq_masters_page_id_fkey FOREIGN KEY (page_id)
    REFERENCES pages (id) MATCH SIMPLE ON UPDATE CASCADE ON DELETE CASCADE,
    CONSTRAINT bq_masters_rfq_id_fkey FOREIGN KEY (rfq_id)
    REFERENCES rfq (id) MATCH SIMPLE ON UPDATE CASCADE ON DELETE CASCADE
); 
```

我尝试在 RFQ 一对多映射中添加 inverse="true" 但无济于事，因为它不会更新相应 RFQ 对象的 BQMasters。

有人对解决这个问题有任何线索吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-26T10:10:47.120

Hibernate 完全按照您在内存中所做的工作。您将 bqmasters 放入 bqMasters 表中，并且将此关系映射到`rfq_id`bqmasters 中的列，因此它会更新外键。

为此，您必须使用逆。同一列`rfq_id`用于两个属性，Hibernate 只能使用一个。

您实际上在内存中存在一致性问题。如果将 bqmaster 添加到列表中，还需要更新它的 rfq 属性，因为它持有相同的父子关系，并且还映射到相同的数据库列。

顺便说一句，您不必对会话中已经存在的对象调用更新。Hibernate 将通知对象已更改并将更新它。

# google-maps - 将 GIcon() 用于谷歌地图的问题

> ID：909663
> 
> 赞同：3
> 
> 时间：2009-05-26T08:51:09.510
> 
> 标签：google-maps

当我不使用 GIcon() 时，位置点显示正确。但是，当我使用 GIcon() 时，位置显示在不正确的位置。这是我的代码：

```
<script language="javascript">
  var Icon = new GIcon();
  Icon.image = "images/myicon.png";
  Icon.iconSize = new GSize(10, 10);
  Icon.iconAnchor = new GPoint(5, 34);
  Icon.infoWindowAnchor = new GPoint(5, 2);
  var markers = [{'latitude': 169.132892, 'longitude': -44.698667, 'name': 'dsfsdfljsldk' }]; var map;
  var centerLatitude = 18.17;
  var centerLongitude = 127.57;
  var startZoom = 2;
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-26T16:20:31.507

[您的图标大小为 10x10 像素，但您已将其设置为距图标左上角](http://code.google.com/apis/maps/documentation/reference.html#GIcon.iconAnchor)10x34 像素。

您可能希望将您的图标锚定到图标大小为 10x10 的地图上。如果您希望锚点位于图标的中心，请将 iconAnchor 设置为 (5,5)。

# c# - XNA 的 UI 库

> ID：909671
> 
> 赞同：33
> 
> 时间：2009-05-26T08:54:36.133
> 
> 标签：c#, user-interface, xna, xbox360

我正在开发一个小而简单的 XNA 游戏，我注意到我花了太多时间来实现基本的 UI 功能，如菜单、（丰富的）文本渲染，包括换行和基本的 UI 布局，如元素对齐。

这是一个相当普遍的问题，我想知道是否有人知道处理这些事情的库。我知道 Windows 程序员可以使用一些很好的可换肤选项（我想到了 Crazy Eddie 的 GUI），但是当我瞄准 Xbox 360 时，我想找到一个纯托管的解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-26T09:40:01.283

[**xWinForms**](http://sourceforge.net/projects/xwinforms/)很容易成为 XNA 最完整和最积极维护的 GUI 系统。[**Window System for XNA** (WSX)](http://wsx.codeplex.com/)在过去取得了一些不错的进展（我一直在研究它），并且仍然是一个不错的系统，尽管它已经一年多没有维护了。最好的选择肯定是使用 xWinForms，至少在[WPF 互操作性出现](https://stackoverflow.com/questions/43596/how-well-does-wpf-blend-with-xna-in-real-life)之前（WPF/XNA 的下一个版本？）并且使所有其他选项有效地过时。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-26T09:31:37.620

有[XNA Simple Gui](http://www.codeplex.com/simplegui)和[xWinForms](http://www.ziggyware.com/news.php?readmore=374)。它们提供了一些基本的 GUI 元素。不过，还没有看到任何菜单组件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2010-06-24T18:23:25.313

查看 SQUID： http: [//www.ionstar.org/](http://www.ionstar.org/)

这是一个非常干净、快速且独立于引擎的 UI 系统。我已经广泛使用它并且非常喜欢使用它。下载内容包括 XNA 3.1、Truevision3D 和 SlimDX 的示例代码。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2011-08-11T16:49:20.030

我将推荐[Nuclex 框架的 GUI 库](http://nuclexframework.codeplex.com/wikipage?title=Nuclex.UserInterface&referringTitle=Home)。Nuclex 很棒、很活跃并且经过全面测试。它适用于 Windows 和 Xbox 360。它的设计也很棒。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-01T17:22:18.777

此处列出的大多数项目现在都已过时。

XNA 论坛上这个问题的官方主题是[http://xboxforums.create.msdn.com/forums/t/15274.aspx](http://xboxforums.create.msdn.com/forums/t/15274.aspx) [链接更新]

多年来，ZMan 一直在更新它。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-05-26T15:28:39.600

查看[游戏状态管理示例](http://creators.xna.com/en-US/samples/gamestatemanagement)以获取游戏菜单示例。

注意：最后我检查了一下，它在 XNA 3.0 中没有完全发挥作用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-01-28T02:51:30.677

见 FuchsGUI 它是一个轻量级的 GUI 库

[http://ghoshehsoft.wordpress.com/2011/02/11/xna-fuchsgui-part-i/](http://ghoshehsoft.wordpress.com/2011/02/11/xna-fuchsgui-part-i/)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-05-18T07:12:01.423

我曾经在我的一个项目中使用过这个[Neoforce Controls](http://neoforce.codeplex.com/)库。皮肤可以更改，默认的现代和类似太空的 UI 皮肤可能会让您感兴趣。

请注意，声明此库不会继续开发。无论如何，您可能会在那里找到有用的东西。

注：截至今年6月，此处移至GitHub并恢复开发： [https ://github.com/NeoforceControls/XNA](https://github.com/NeoforceControls/XNA)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-08-11T12:28:45.253

将核冬天添加到此列表中：[https ://bitbucket.org/sparklinlabs/nuclearwinter/](https://bitbucket.org/sparklinlabs/nuclearwinter/)

这是一个外观时尚的 GUI，并且在构建时考虑了触摸输入。

# php - 用于显示文件系统映像的 file_get_contents 或 readfile

> ID：909672
> 
> 赞同：12
> 
> 时间：2009-05-26T08:54:42.407
> 
> 标签：php, function

任何人都可以建议显示存储在文件系统中的图像的最佳 PHP 函数是什么 -`file_get_contents`或`readfile`. 我们正在从显示存储在数据库中的图像切换，因此我们仍然需要通过 PHP 文件调用图像并且不能直接链接到文件系统。我见过有人推荐这两种功能，但我倾向于使用`readfile`. 非常感谢您对此的任何意见。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-05-26T09:00:00.850

如果您不需要操作图像（调整大小，添加水印，...）[`readfile()`](http://de2.php.net/readfile)将是最好的选择，因为它将文件直接写入输出缓冲区。[`file_get_contents()`](http://de2.php.net/manual/en/function.file-get-contents.php)会将文件读入内存 - 需要大量内存来存放大文件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-27T15:00:43.540

在编写这样的脚本时一定要考虑**缓存！**

为静态图片提供服务的webserver会在下一次页面访问重新请求图片时与客户端进行协商，如果服务器判断客户端缓存的图片副本仍然有效，则图片不会被重传。

由于朴素的脚本不进行这种协商，因此图像将在每个页面请求时重新传输到客户端，从而花费您不必要的带宽。

为此，存在三种机制。我无法确切告诉您如何编写最佳脚本，因为我以前从未这样做过，而且我不确定不同的缓存标头如何互操作以及在什么 HTTP 版本上，但我鼓励您对此进行研究更远。

我知道的三种机制：

**过期**(HTTP/1.0)

最简单的一种。此标头告诉客户端图像在给定时刻之前肯定是有效的。在这段时间过去之前，客户端甚至不会向脚本发出请求，因此适当地设置它可以节省您（一些）服务器上的 CPU 周期和 Web 应用程序中的图像加载延迟。

您应该如何设置它完全取决于您的应用程序；您的图像是快速变化还是很少变化？如果图像在您发送给客户端的过期时间之前更改，客户端将看不到新图像。

例子：

```
header("Expires: " . gmdate('D, d-M-Y H:i:s \G\M\T', time() + 60)); // Valid for a minute 
```

（注：Expires 似乎已被HTTP/1.1 中的**Cache-Control取代）**

**If-Modified-Since** (HTTP/1.1)

如果 HTTP/1.1 客户端已经拥有图像的副本，则可以发送此标头，并记录副本的日期。然后，您可以在数据库中确定图像的当前版本是在更早还是更晚的时间更改。如果客户端的版本仍然是正确的，只需发送“304 Not Modified”响应并退出（从而避免传输图像）。

例子：

```
$cache_time   = parse_browsers_date_time_format($_SERVER["IF-MODIFIED-SINCE"]);
$actual_time  = get_current_resource_time_from_db();

if ($actual_time <= $cache_time) {
    header("HTTP/1.1 304 Not Modified");
    die;
}

// ... Produce and output resource here 
```

（注意：如果您还在原始响应中发送**Last-Modified ，客户可能只会实际发送****If-Modified-Since**。我不确定，请自行研究。）

 ****ETag/If-None-Match** (HTTP/1.1)

此方法类似于**If-Modified-Since**协商，但它使用图像的哈希值而不是时间来查看内容是否已更改。它的工作原理如下：服务器为图像计算一些哈希值，并在第一次在**ETag**标头中请求图像时发送此哈希值。

在后续请求中，服务器将在请求字段**If-None-Match**中发回哈希。如果客户端的哈希值与图像的当前哈希值相同，则图像之间没有更改，脚本只需发送“304 Not Modified”即可。

由于 ETags 似乎实际上旨在用于防止客户端请求中具有副作用（即 POST 和 PUT）的并发问题，并且因为计算哈希是一项代价高昂的操作，我认为 If-Modified-Since 方法将是一种更适合大多数文件服务应用程序。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-26T08:58:07.720

我会做类似的事情：

```
header('Content-type: image/jpeg');
readfile('something.jpg'); 
```

[readfile()](http://www.php.net/readfile)似乎对此目的更有用，因为它读取文件并将其写入输出缓冲区，返回从文件读取的字节数，或错误时返回 false。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-26T09:27:30.700

我应该使用[fpassthru](http://php.net/manual/en/function.fpassthru.php) 使用 fopen 可以更准确地处理错误。

PS：请确保您从文件系统直接输出的内容不会受到攻击！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-22T11:55:33.353

`file_get_contents()`是将文件内容读入字符串的首选方法。如果您的操作系统支持，它将使用内存映射技术来提高性能。但除此之外，我不知道什么更好。您可以尝试查看一个大文件是否可以提供更好的性能`file_get_contents()`，但我希望网络流量比服务器文件 IO 更令人担忧。并用于通过`readfile()`传入`content-type`.`header()`

# ruby-on-rails - 如何在 Ubuntu 中使用 gem？

> ID：909673
> 
> 赞同：77
> 
> 时间：2009-05-26T08:55:22.733
> 
> 标签：ruby-on-rails, ruby, ubuntu, rubygems, capistrano

我最近升级到 Ubuntu 9.04，但我在使用 gems 时遇到了问题。我使用 apt-get 安装了 Ruby、Rubygems 和 Rails。该`rails`命令确实有效。

然后我安装了 capistrano 和其他 gem，比如 heroku。为此，我使用了以下命令：

```
sudo gem install XXX 
```

当我想使用该`cap`命令时它不起作用：

```
bash: cap: command not found 
```

其他 gem 命令也是如此。

我有什么特别的事情要做以使 gem 命令起作用吗？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2009-05-26T10:23:38.997

## 我的宝石在哪里？

`gem environment`您可以使用该命令找到您的 gem 的存储位置。例如：

```
chris@chris-laptop:~$ gem environment
RubyGems Environment:
  - RUBYGEMS VERSION: 1.3.2

  - RUBY VERSION: 1.8.7 (2008-08-11 patchlevel 72) [i486-linux]
  - INSTALLATION DIRECTORY: /usr/lib/ruby/gems/1.8
  - RUBY EXECUTABLE: /usr/bin/ruby1.8
  - EXECUTABLE DIRECTORY: /usr/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-linux
  - GEM PATHS:
     - /usr/lib/ruby/gems/1.8
     - /home/chris/.gem/ruby/1.8
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES: 
```

如果您查看“GEM PATHS：”部分，您会看到 gem 可以存储在我笔记本电脑上的两个位置：`/usr/lib/ruby/gems/1.8`或者在`.gem`我的主目录中的目录中。

您还可以看到可执行文件存储在 EXECUTABLE DIRECTORY 中，在本例中为`/usr/bin`.

因为`/usr/bin`在我的路上，这让我可以跑步`cap`，`merb`等等`rails`。

### 更新你的路径

如果由于某种原因您的可执行目录不在您的路径上（例如，如果它是 /var/lib/gems/1.8/bin），那么您需要更新您的 PATH 变量。

假设您使用的是 bash shell。您可以通过在 shell 提示符下键入以下内容为当前会话快速执行此操作；假设您要添加`/var/lib/gems/1.8/bin`到路径中：

```
export PATH=$PATH:/var/lib/gems/1.8/bin 
```

然后按回车。这会将新目录附加到当前路径的末尾。`$PATH`注意和之间的冒号`/var/lib/gems/1.8/bin`

要为所有会话设置值，您需要编辑您的`.profile`或`.bashrc`文件并将同一行添加到文件末尾。我通常`.bashrc`无缘无故地编辑我的文件，这就是我一直在做的事情。完成后，保存文件，然后通过键入以下内容刷新您的环境：

```
bash 
```

在 shell 提示符下。这将导致`.bashrc`被重读。

`$PATH`在任何时候，您都可以通过键入来检查当前值

```
echo $PATH 
```

在 shell 提示符下。

这是我自己的一台服务器的示例，其中我的用户名是“chris”，机器名称是“chris-laptop”：

```
chris@chris-laptop:~$ 
chris@chris-laptop:~$ echo $PATH
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games
chris@chris-laptop:~$ 
chris@chris-laptop:~$ export PATH=$PATH:/var/lib/gems/1.8/bin
chris@chris-laptop:~$ 
chris@chris-laptop:~$ echo $PATH
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/var/lib/gems/1.8/bin
chris@chris-laptop:~$ 
```

## 我的宝石无法加载！

“ [Ruby gems won't load even though installed](https://stackoverflow.com/questions/3792080/ruby-gems-wont-load-even-though-installed/3793059#3793059) ” 突出了使用多个不同版本的 Ruby 的常见问题；有时 Gem 环境和 Gem 路径会不同步：

```
rb(main):003:0> Gem.path

=> ["/opt/ruby1.9/lib/ruby1.9/gems/1.9.1"]
irb(main):004:0> exit 
```

这里的任何 Ruby 进程都只在一个地方寻找它的 Gems。

```
:~/$ gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 1.3.7
  - RUBY VERSION: 1.9.1 (2009-05-12 patchlevel 129) [x86_64-linux]
  - INSTALLATION DIRECTORY: /opt/ruby1.9/lib/ruby/gems/1.9.1
  - RUBY EXECUTABLE: /opt/ruby1.9/bin/ruby1.9
  - EXECUTABLE DIRECTORY: /opt/ruby1.9/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-linux
  - GEM PATHS:
     - /opt/ruby1.9/lib/ruby/gems/1.9.1
     - /home/mark/.gem/ruby/1.9.1
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

仔细看gem环境的输出：

```
 - GEM PATHS:
     - /opt/ruby1.9/lib/ruby/gems/1.9.1 
```

这与 Gem.path 返回的路径不同：

```
["/opt/ruby1.9/lib/ruby1.9/gems/1.9.1"] 
```

很难说到底是什么导致`lib/ruby`了这种变化，`lib/ruby1.9`但很可能开发人员正在使用多个 Ruby 版本。一个快速`mv`或`ln`将解决问题。

如果您确实需要使用多个 Ruby 版本，那么您真的应该使用[rvm](http://rvm.beginrescueend.com/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-08-08T20:09:33.100

正如@Chris 所指出的，您需要将 gems 环境添加到您的路径中。您可以通过以下方式做到这一点：

```
echo 'export PATH=$PATH:/var/lib/gems/1.8/bin' | tee --append ~/.bashrc 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-26T09:07:20.650

*存储*gem 的文件夹必须在您的 PATH 上，例如我的文件夹是：

> /home/victor/.gem/ruby/1.8/bin

通过键入检查您的路径

```
echo $PATH 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-27T00:02:57.703

它看到在安装 ruby​​gems 时，现在在 ubuntu 9.04 中，我遇到了这个问题。我注意到在“gem 环境”中，可执行目录是“/var/lib/gems/1.8/bin”，而不是“/usr/bin”...这是 ruby​​gems 或 ubuntu 9.04 的问题？？

我遇到的解决方案是将“/var/lib/gems/1.8/bin”添加到我的 $PATH 这样做： export PATH=$PATH:/var/lib/gems/1.8/bin 但它没有被保存...我怎样才能保存我的路径？

谢谢...

解决：coloquei o export PATH=$PATH:/var/lib/gems/1.8/bin no ~/.bashrc！=]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T11:36:20.517

mkmf 是 ruby​​1.9.1-dev 软件包的一部分。此包包含 Ruby 1.9.1 扩展库所需的头文件。您需要通过执行以下操作安装 ruby​​1.9.1-dev 软件包：

sudo apt-get install ruby​​1.9.1-dev

# windows-services - 如何杀死由 Windows 2000 Server 上的服务启动的进程？

> ID：909676
> 
> 赞同：0
> 
> 时间：2009-05-26T08:56:45.817
> 
> 标签：windows-services, windows-server-2000

我需要杀死由 Windows 服务启动的 Windows 2000 生产服务器上的进程。但是，从 GUI 执行此操作只会给我“拒绝访问”，所以现在我正在考虑创建一个小型应用程序或脚本来执行此操作。我只能偶尔访问 GUI，我没有服务器的用户名、密码等。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T00:38:38.220

某些服务作为系统运行，您需要升级到系统用户才能杀死它。我建议您研究系统内部结构，以找到一种方法来帮助您实现所需的目标。

# performance - IIS 6.0 服务器太忙 HTTP 503 Connection_Dropped DefaultAppPool

> ID：909677
> 
> 赞同：2
> 
> 时间：2009-05-26T08:56:47.330
> 
> 标签：performance, http, iis

我们有一个运行在带有 2 台 64 位机器的 windows 2003 集群上的站点。

该站点需要能够处理超过 20,000 个并发用户

该站点所做的一件事是允许下载 2MB 文件（缓存在内存中）。

我们的 CPU 和内存使用率很低。我们也有多余的带宽。

由于用户下载文件所需的时间（某些用户的互联网连接速度较慢），我们的连接似乎已用完。

在 IIS 日志中，我们收到 HTTP 503 错误。

在 HTTPErr 日志中，我们主要得到 Connection_Dropped DefaultAppPool 和一些 Timer_EntityBody DefaultAppPool。

问题是：我们如何配置 IIS 以允许更多连接？或者我在这里缺少什么？

谢谢

设拉子

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-26T13:50:19.097

我们在所有高容量站点上运行此 reg 文件。

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters]
"EnablePMTUDiscovery"=dword:00000001
"MaxUserPort"=dword:0000fffe
"TCPTimedWaitDelay"=dword:0000003c
"TCPMaxSendFree"=dword:0000ffff
"SynAttackProtect"=dword:00000001 
```

请注意，需要重新启动服务器才能进行这些更改。

看：

*   [启用PMTU发现](http://technet.microsoft.com/en-us/library/cc957539.aspx)
*   [最大用户端口](http://technet.microsoft.com/en-us/library/cc758002(WS.10).aspx)
*   [TCPTimedWaitDelay](http://technet.microsoft.com/en-us/library/cc757512(WS.10).aspx)
*   [TCPMaxSendFree](http://technet.microsoft.com/en-us/library/cc736963.aspx)
*   [SynAttackProtect](http://technet.microsoft.com/en-us/library/cc781167(WS.10).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T09:35:40.653

很可能您需要增加允许的端口数量（请参阅[http://technet.microsoft.com/en-us/library/cc758002.aspx](http://technet.microsoft.com/en-us/library/cc758002.aspx)）

[这家伙](http://blogs.msdn.com/david.wang/archive/2006/04/12/HOWTO-Maximize-the-Number-of-Concurrent-Connections-to-IIS6.aspx)声称已经看到来自单台机器的 50K+ 并发连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T09:18:38.037

我不确定这是否适用于 IIS（尽管我不明白为什么不适用），但在 Linux 服务器上，我发现关闭 keep-alive 有助于限制并发连接的数量。

同样，*这*可能不适用，但我还发现将所有静态内容卸载到另一个较小的服务器有助于保持简洁（并且会大大降低 IIS 正在处理的连接数量）。大多数人会使用 nginx 或 lighttpd。在新的子域上循环使用它们非常简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-11T20:45:13.900

您需要在 IIS 应用程序池中设置队列限制

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2009-05-26T09:16:15.047

我认为您无法在任何一台机器上获得 20000 个并发连接 - 您可能需要考虑扩展到多个 Web 服务器。

# vb.net - win XP如何访问其他用户的注册表部分

> ID：909679
> 
> 赞同：1
> 
> 时间：2009-05-26T08:56:56.597
> 
> 标签：vb.net, windows-xp

如何在win XP 中访问其他用户的注册表部分？

我如何在我的机器上访问另一个用户的 HKey_current_user，在 vb2005 中，或者如果有人可以推荐一个已经可以做到的软件。

我正在尝试制作一个快速的注册表修复工具来修复损坏或损坏的用户

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T09:04:53.790

首先，您不能，如果启用了漫游配置文件，您机器上其他用户的注册表可能不完整或已过时。

话虽如此，您可以使用 HKEY_USERS\user-sid

显然，您必须以管理员身份运行才能访问其他用户数据。

要从 SID 转换为名称，请查看：[How can I convert from a SID to an account name in C#](https://stackoverflow.com/questions/499053/how-can-i-convert-from-a-sid-to-an-account-name-in-c)

要将名称转换为 SID，请查看以下内容：[Windows 中用户配置文件的唯一标识符](https://stackoverflow.com/questions/787419/unique-identifier-for-user-profiles-in-windows)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T20:56:02.480

只是一个意见，但通常运行远程注册表服务很麻烦。我已经使该实用程序在本地更正注册表项并远程运行该应用程序。PSExec 是 Mark 和现在 MS 提供的一款出色的免费实用程序，可在您构建和测试后运行您的实用程序。您可以给它一个要命中的系统列表，或者它将在域中的每个系统上运行它。您的帐户确实必须具有远程执行权限，但作为管理员，这通常不是问题。当您编写实用程序时要小心一点，因为您可能会在您不打算运行它的机器上运行它。

# resharper - Resharper 总是建议我制作 const 字符串而不是字符串

> ID：909681
> 
> 赞同：10
> 
> 时间：2009-05-26T08:57:03.663
> 
> 标签：resharper, constants

哪个好：

```
string sQuery = "SELECT * FROM table"; 
```

或者

```
const string sQuery = "SELECT * FROM table"; 
```

为什么 resharper 总是建议我这样做？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-26T08:59:28.200

后者更好 - 这意味着：

*   这不是一个实例变量，因此您不会在您创建的每个实例中都得到一个冗余的字符串引用
*   您将无法更改变量（您可能不想这样做）

在从其他程序集访问和版本控制方面，“const”还有一些其他影响，但看起来这是一个私有字段，所以它不应该成为问题。您通常可以*将*其视为：

```
static readonly string sQuery = ...; 
```

一般来说，我认为尽可能将字段设置为静态是一个好主意（如果它不因实例而变化，为什么它应该是实例变量？）并且尽可能只读（可变数据更难推理） . 如果您希望我详细介绍 和 之间的差异，请告诉`static readonly`我`const`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-26T08:59:33.847

如果字符串永远不会改变并且永远不会在程序集之外使用，那么 const 是一个好主意。如果它从不更改但*在*程序集之外使用，则静态只读可能是一个更好的主意 - const 在调用站点“烧录”，而不是存储在一个位置，因此重新编译包含 const 的程序集不会更新依赖程序集——它们也必须重新编译。另一方面，静态只读变量确实在依赖程序集中得到更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-26T08:58:52.740

ReSharper 仅在特定字符串引用从未更改时才建议这样做。在这种情况下，您可以使用`const string`而不是 just 来表达您的意图`string`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-26T08:59:32.333

这样做是因为如果你不小心在代码中为 sQuery 分配了一个新值，如果它是一个 const，你会得到一个编译错误，所以它会在编译时捕获一个错误。与它的建议相同，将在 ctor 中设置的成员变量设置为只读

# .net - app.config 文件和 XYZ.settings 文件有什么区别？

> ID：909688
> 
> 赞同：73
> 
> 时间：2009-05-26T08:57:57.720
> 
> 标签：.net, configuration, settings, appsettings

我实际上处于 .NET 相关内容的学习阶段，并且正在探索如何保存应用程序。我最终编写了自己的类，将设置保存在 XML 文件中，然后我发现 .NET 本身支持保存应用程序设置。

但我找到了两种方法来做到这一点。当我在 Visual Studio 2008 中打开添加新项目对话框时，它提供了创建设置文件 (.settings) 或配置文件 (.config) 的选项。两者之间有什么区别，应该在什么场景下使用它们？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2009-05-26T09:05:40.357

更新：在 ASP.NET Core Land 中，不再通过其中任何一个管理配置 -[请参阅 Travis Illig 的这篇精彩文章，其中 az 开启`Microsoft.Extension.Configuration`，`Microsoft.Extensions.Configuration.Binder`它实际上是所有这些的超集](http://www.paraesthesia.com/archive/2018/06/20/microsoft-extensions-configuration-deep-dive/)

* * *

设置（来自 .settings 集和`Configuration.AppSettings`）存储在 .config 文件中[以及许多其他内容]。

不同之处在于 .settings 的东西 [在 .NET 2.0 / VS2005 中添加] 在一组属于一起的设置之上分层了一个强类型类，而`Configuration.AppSettings`只是让您检索字符串，强制您进行任何转换，而不是有默认的概念。（配置类实际上已被分流到一个侧面程序集中以反映这一点 - 如果需要，您需要显式添加对 System.Configuration 的引用）。

将 .settings 添加到您的项目将导致添加一个 app.config 来容纳设置（如果您还没有设置）。每次更改组件/应用程序的设置列表时，都会自动生成读取设置的类。

.Settings 的其他功能是能够将某些设置指定为特定于用户的设置（并且还可以通过一次调用保存用户特定的设置）。

使用 .Settings 的最佳理由通常是您能够通过遵循属性的用法来清楚地识别谁在使用代码库中的哪个设置（并且每个集合都是 XML 文件中的一个单独块）。`Configuration.appSettings`在本质上更具全局性 - 它只是一组属性，您不知道哪个 DLL、子系统或类取决于特定的设置条目。有关更多信息，请参阅[Steven Smith](http://ardalis.com/applying-interface-segregation-to-configuration-files)的这篇博文。

最后，如果您对设置管理的了解还不够多，那么您不会因为完整性或大量的想法和角度而击败[Rick Strahl 的这篇关于该主题的帖子。](http://feedproxy.google.com/~r/RickStrahl/~3/I41oCo7CAW4/Building-a-better-NET-Application-Configuration-Class-revisited)

旁白：还有[本文概述的](http://whereslou.com/2014/05/23/asp-net-vnext-moving-parts-iconfiguration/)[ASP.NET vNext 配置](https://github.com/aspnet/Configuration)内容，它非常灵活，提供了不同的配置设置管理角度。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-26T09:07:13.333

设置文件是一个资源文件，您可以在其中指定不同的设置及其默认值。

这些值本身是在应用程序配置文件（.config 文件）中配置的。

永远不会部署设置文件，因此您将需要配置文件来进行配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-09-01T08:04:32.643

app.config 文件与应用程序存储在同一目录中。普通用户没有写权限（例如在“程序文件”中）。

设置文件应该存储在用户的“AppData”目录中（他有读/写权限）。

因此，将设置文件用于用户可配置选项。

# sql - 如何在 hsqldb 中执行“选择 current_timestamp”？

> ID：909702
> 
> 赞同：17
> 
> 时间：2009-05-26T09:01:49.303
> 
> 标签：sql, database, hsqldb, embedded-database

甲骨文：

```
select systimestamp from dual 
```

MySQL：

```
select current_timestamp 
```

SQL 服务器：

```
select current_timestamp 
```

PostgreSQL：

```
select current_timestamp 
```

问题是，如何获取[HSQLDB](http://hsqldb.org/)中的当前时间戳？我使用版本 1.8.0.10

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2011-07-03T10:25:37.813

在我使用的选择中

```
 SELECT CURRENT_DATE AS today, CURRENT_TIME AS now FROM (VALUES(0)) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2010-04-22T15:34:22.690

[@alexdown 的回答](https://stackoverflow.com/questions/909702/how-to-do-select-current-timestamp-in-hsqldb/909729#909729)非常正确——在 1.8 下，您需要一个单行关系来执行此操作，例如 Oracle`DUAL`或 InterBase/Firebird`RDB$DATABASE`表。

但是，当您迁移到 2.0 系列时，您将能够使用 SQL-99“VALUES 构造函数”而不依赖于单行关系：

```
sql> VALUES (current_timestamp);
2010-04-22 15:22:40.997 
```

如果您需要从 VALUES 选择的特定于供应商的默认值中重命名该列，您始终可以使用选择：`SELECT * FROM (VALUES (current_timestamp)) v(my_new_name)`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2011-08-03T08:22:14.913

您可以使用

```
CALL current_timestamp 
```

检索当前时间戳。根据 HSQL 邮件列表上的讨论，这比从`INFORMATION_SCHEMA.SYSTEM_TABLES`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-26T09:10:13.590

你可以写

```
select current_timestamp from tablename 
```

`tablename`数据库中的真实表在哪里。

查询的结果只是当前的时间戳。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-04-17T09:59:19.930

使用 HSQLDB 2.1 及更高版本，您拥有所有选项。

通过连接属性 hsqldb.syntax_ora、hsqldb.syntax_pgs、hsqldb.syntax_mss 或 hsqldb.syntax_mys=true，您可以使用其他数据库支持的形式。等效的 SQL 是`SET DATABASE SQL SYNTAX ORA TRUE`, 和其他方言类似。

HSQLDB 在所有模式下都支持的原生 SQLStandard 形式是这样的：

```
VALUES (CURRENT_TIMESTAMP) 
```

# logging - Log4Net 孵化？

> ID：909709
> 
> 赞同：3
> 
> 时间：2009-05-26T09:04:37.847
> 
> 标签：logging, log4net

这是什么意思“孵化”？好吧，我知道这个词是什么意思，但为什么将文件命名为“incubating-log4net-1.2.10.zip”Apache？log4net 是否仍在开发中，因为上一个版本是 2006 年？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-26T09:07:58.043

log4net 在大量产品中广泛用于生产，并且无论如何都没有死或测试版（并且是流行的 log4j 框架的重新实现，在 Java 世界中具有类似的普遍性）。

大多数时候，使用“孵化”和 0.xx 命名方案是一种疏忽，而不是人们可能推断的“这里是龙”/“这里有些东西不够有趣，无法战斗”。

一般来说，孵化标签意味着它没有作为 beta/test/release 周期的一部分正式发布。

更新：[该项目在提出问题时处于孵化状态，在 2007 年*毕业*](http://incubator.apache.org/projects/log4net.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T09:06:49.247

这基本上意味着它还不是官方的 Apache 项目。可能该项目已被放弃，因为它已经在孵化器中很长时间并且没有新版本。在 apache 邮件列表中询问以获取更多信息。

# vb.net - 如何将您运行的目录传递给VB中的可执行文件

> ID：909715
> 
> 赞同：0
> 
> 时间：2009-05-26T09:07:04.330
> 
> 标签：vb.net

这可能很简单，但我现在大脑冻结

如果我从命令行 cd 进入一个目录，然后运行我的可执行 VB.net 应用程序，有没有办法检测它从哪个目录启动。

我目前在我的 PATH 中有可执行文件，但理想情况下，该人会 cd 进入他们希望可执行文件对其执行操作的目录。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T09:08:58.647

IO.Directory.GetWorkingDirectory() 将为您提供 CD 所在的目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T09:11:43.197

你可以使用这个`Environment.CurrentDirectory`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T09:11:35.150

[Environment.CurrentDirectory](http://msdn.microsoft.com/en-us/library/system.environment.currentdirectory.aspx)为您提供该信息。请注意，此属性也是可分配的，因此您可以通过为其分配新值来更改当前工作目录。

# installation - 如何在 Visual Studio 安装项目中有 URL 图标？

> ID：909737
> 
> 赞同：1
> 
> 时间：2009-05-26T09:12:51.557
> 
> 标签：installation, windows-installer, icons, shortcut

我有一个使用标准 Windows 安装程序 (MSI) 部署的 winforms 应用程序，该安装程序是在 Visual Studio 中创建的。我想创建一个启动特定 URL 的自定义快捷方式。

快捷方式也需要有一个与之关联的自定义图标。

我能找到的只是能够为项目文件中的项目添加快捷方式（输出或手动添加的文件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-02T20:56:49.533

我找到了一种方法来做到这一点 - 首先您在解决方案文件夹中创建一个普通的 URL 快捷方式，并在同一文件夹中使用图标，然后将这些作为普通文件添加到安装程序中，最后使用安装程序界面创建一个快捷方式。

本质上，快捷方式指向知道图标文件位置的快捷方式，因为它是相对于第二个快捷方式的。

# xslt - XSL 选择元素有两个属性的地方

> ID：909739
> 
> 赞同：2
> 
> 时间：2009-05-26T09:13:21.573
> 
> 标签：xslt, xpath

如何选择具有两个属性的元素？

我可以

```
@name | @area 
```

这是“名称或区域”，但我该如何做“名称**和**区域”？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-26T09:17:09.583

好吧，不要使用`@name | @area`- 它不是“或”，它是一个偶然发生的连接。

对于“或”，执行`foo[@name or @area]`. 对于“和”，做`foo[@name and @area]`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-26T09:19:22.653

XPath 确实为您提供了一个`and`运算符，可用于使用谓词评估多个条件：

可能：

```
//MyElement[@name][@area]
//MyElement[@name and @area] 
```

# javascript - jQuery 到原型转换：鼠标悬停时动态 SlideUp div

> ID：909740
> 
> 赞同：0
> 
> 时间：2009-05-26T09:13:23.303
> 
> 标签：javascript, jquery, prototypejs, scriptaculous

我使用这个 jQuery 代码在其包装 div 上动态滑动一个 div：

```
jQuery.fn.masque = function(classSelector) {
    $(this).hover(function(){
        $(this).find(classSelector).stop().animate({height:'88px',opacity: '0.8'},400);
    },function () {
        $(this).find(classSelector).stop().animate({height:'0',opacity: '0'}, 300);
    });
};

$(document).ready(function(){$('.thumb').masque('.masque');}); 
```

HTML是这样的：

```
<div class="thumb">
  <a href="something.html"><img src="something.jpg" /></a>
  <div class="masque">
    <h3>Something</h3>
    <p> Something e</p>
  </div>
</div> 
```

“面具” div（CSS：高度：0；显示：无；位置：绝对；）在“拇指”包装 div（CSS：位置：相对；）内向上滑动。

我在同一页面中有很多“拇指” div，这就是为什么我需要动态完成它，所以只有特定“拇指”内的“面具”div 向上滑动（当鼠标没有结束时向下滑动） .

对于这个特定的项目，我已经从 jQuery 转移到 Prototype/Scriptaculous（不要问为什么 :-D），我需要将此代码转换为 Prototype/Scriptaculous ..

有人可以帮我吗？

*注意：它不需要完全等于 jQuery 代码我只需要相同的行为风格。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T10:26:13.640

主要问题是 scriptaculous 没有 stop()：你必须在某处保持效果。

也许会是

```
Element.addMethods({
    masque: function(selector) {
        this.observe('mouseover', function() {
            if(this._masqueEffect !== undefined) {
                this._masqueEffect.cancel();
            }
            this._masqueEffect = this.down(selector).morph({
                    style: {height:'88px',opacity: '0.8'},
                    duration: 400});
        });
        this.observe('mouseout', function() {
            if(this._masqueEffect !== undefined) {
                this._masqueEffect.cancel();
            }
            this._masqueEffect = this.down(selector).morph({
                    style: {height:'0px',opacity: '0'},
                    duration: 300});
        });
    }
});

(function(){ $$('.thumb').invoke('masque', '.masque'); }).defer(); 
```

我仍然不确定它是否真的正确或优雅！

# windows - 如何创建一个监听 Windows 事件的应用程序？

> ID：909746
> 
> 赞同：1
> 
> 时间：2009-05-26T09:16:08.307
> 
> 标签：windows, delphi

我如何编写一个侦听特定击键来启动它的 Windows 应用程序！就像谷歌桌面应用程序的工作方式一样，按两次 ctrl 就会弹出！

我更喜欢delphi中的示例，但我不介意其他语言！

*对于初学者，我认为它应该是在 Windows 中运行的服务（我可以创建一个服务应用程序）*

加思

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T10:45:24.087

[http://www.delphitricks.com/source-code/windows/install_a_keyboard_hook.html](http://www.delphitricks.com/source-code/windows/install_a_keyboard_hook.html)

[http://delphi.about.com/od/windowsshellapi/a/keyboard_hook.htm](http://delphi.about.com/od/windowsshellapi/a/keyboard_hook.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T15:08:50.920

你最好注册一个热键而不是安装一个全局键盘钩子：

[http://delphi.about.com/cs/adptips2001/a/bltip0601_3.htm](http://delphi.about.com/cs/adptips2001/a/bltip0601_3.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-26T18:03:43.360

参见 HotKeyManager： [http ://subsimple.com/delphi.asp](http://subsimple.com/delphi.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-26T09:35:25.320

提供安装全局键盘挂钩的服务。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-26T09:28:04.180

如果您愿意，可以使用自己的消息泵将其编写为服务，捕获所有 Windows 消息，检查与按键相关的消息，而不是将它们传递给默认消息处理程序。

我的 Delphi 很生锈（第 4 版），所以我不能说该怎么做。

在 C# 中编写服务的一个简单替代方法是设置一个不透明度为 0%、KeyPreview = True 和 ShowInTaskbar=False 的应用程序表单。

也许你的 Delphi 版本有类似的东西。

# jquery - jQuery循环通过两个级别的元素

> ID：909749
> 
> 赞同：1
> 
> 时间：2009-05-26T09:16:37.383
> 
> 标签：jquery, html, loops, foreach

我有一些看起来像这样的html：

```
<div class="block">
    <div id="item1"></div>
    <div id="item2"></div>
</div>

<div class="block">
    <div id="item3"></div>
</div> 
```

我正在尝试检查我的 div 是否包含特定元素。我需要遍历每个块，*然后*获取每个项目。

到目前为止我所拥有的

```
 $('.block:has(div)').each(function() {
            // do something with the block
    }); 
```

这很棒，因为它将返回所有包含项目的块。但我需要一些类似的东西

```
 $('.block:has(div)').each(function() {
             $('current place in loop' + li).each(function() {
                    // do something with each item element, before the block loop has finished
             });
    }); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-26T09:22:24.627

我希望你的意思是：

```
$('.block').each(function(){
    $(this).find('div').each(function(){
        //do your stuff
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-26T09:23:41.787

我不能 100% 确定这是否能回答您的问题，但以下工作不会：

```
$('.block:has(div)').each(function() {
  $(this).children('div').each(function() {
    // do something with each item element, before the block loop has finished
  });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-26T09:29:48.247

我会在嵌套的 each 中构建选择器，或者使用 find：

```
 $('.block:has(div)').each(function() {
     $('#' + this.id +  ' li').each(function() {
         //do stuff on list item            
     });
 }); 
```

或者

```
 $('.block:has(div)').each(function() {
     $(this).find('li').each(function() {
         //do stuff on list item            
     });
 }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-26T09:24:38.430

你试过用

```
$("#" + this) 
```

?
它主要用于 jquery 文档的每个示例（harshath 已经发布......太慢了，*呜咽*）

# c# - 数据库中访问控制列表的安全设计建议？

> ID：909750
> 
> 赞同：0
> 
> 时间：2009-05-26T09:16:55.950
> 
> 标签：c#, database, security, database-design, access-control

我的应用程序有访问控制列表的用户（这些都是表/模式/对象）。目前这些是从数据库中读取的，布尔值用于指示他们可以查看/操作的内容。但是，任何人仍然可以访问数据库并更改数据。有人可以就我可以做什么样的事情提供一些建议吗？我希望我很清楚我们有用户（uname + pass）和 acl（empui_access，empdat_manipulate）。任何通过代码等的安全解决方案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-26T10:54:21.290

就像是

```
table users
username: string
password_hash: hex
acl: bit array 
```

username 是用户名，password_hash 是密码的哈希值，带有一点盐。存储纯密码是错误的，但您已经知道了，不是吗？

ACL 被声明为字符串，但用作位数组。每个位代表一个特定的权限。1 表示用户有权限，0 表示他没有。要检查某个位的值，请在 acl 上执行按位与。如果结果非零，则授予访问权限。如果结果为零，则拒绝访问。

例如：

```
// permission to read employee data
public const long READ_EMPL_DATA = 0x01

...
{
    User user = database.GetSomeUser();
    // test for READ_EMPL_DATA permission
    if (0 != (user.ACL & READ_EMPL_DATA)) {
        // access granted
    } else {
        // access denied
    }
    // give READ_EMPL_DATA permission
    if (0 != (user.ACL & READ_EMPL_DATA))
        user.ACL = user.ACL & READ_EMPL_DATA
} 
```

要添加组支持，请添加几个表。

```
table group
groupname: string
acl: bit array

table user_group
user_id: id
group_id: id 
```

除了测试用户级别的权限外，还要测试用户所属的组。当然，您将编写一些辅助函数，也许是一个存储过程。

我希望这能让你开始。如果没有，我可以给你一个更具描述性的例子，或者更实际的代码，或者其他帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-26T14:30:38.890

这是 PostgreSQL 特有的，但您可能可以从[Veil](http://veil.projects.postgresql.org/curdocs/index.html)获得一些好主意。

# msbuild - MSbuild 内置变量

> ID：909754
> 
> 赞同：4
> 
> 时间：2009-05-26T09:18:06.650
> 
> 标签：msbuild

有人可以将其翻译成使用内置变量的语法吗？

```
\\myserver\builds\mybuild\Daily_20090525.1\Release\_PublishedWebsites\myWebsite 
```

它应该是这样的：

```
$(DropLocation)\mybuild\$(?...)\Release\_PublishedWebsites\myWebsite 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-07-08T21:05:07.923

这可能会有所帮助：将“mybuild\$(?...)”替换为“$(BuildNumber)”

我有一个类似的问题，我试图从放置位置复制到“最新”文件夹。我发现构建文件的最终目的地 (\MyServer\MyShare\builds\MyBuild\Daily_20090708.14\Mixed Platforms\Release) 使用变量转换为以下内容：$(DropLocation)\$(BuildNumber)\%(ConfigurationToBuild .PlatformToBuild)\%(ConfigurationToBuild.FlavorToBuild)

我还发现使用 Message 任务进行故障排除很有帮助。以下任务将告诉您变量转换为什么。 `<Message Text="$(DropLocation)\$(BuildNumber)\%(ConfigurationToBuild.PlatformToBuild)\%(ConfigurationToBuild.FlavorToBuild)\"/>` 要查看输出，请查看 BuildLog.txt。

PS：我的任务使用了上面提到的位于里面的属性和项目`<Target Name="AfterDropBuild">`。

# java - 如何使用 Java 通过 LAN 连接到 Access 数据库？

> ID：909755
> 
> 赞同：0
> 
> 时间：2009-05-26T09:18:11.813
> 
> 标签：java, database, ms-access, jdbc, lan

您知道有关如何使用 Java 访问 Access 数据库的任何好的指南吗？

我知道基础知识和基本 SQL，但我更多地考虑访问控制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-26T09:21:09.357

```
private static final String accessDBURLPrefix = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ=";
    private static final String accessDBURLSuffix = ";DriverID=22;READONLY=false}";

    // Initialize the JdbcOdbc Bridge Driver
    static {
        try {
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        } catch(ClassNotFoundException e) {
            System.err.println("JdbcOdbc Bridge Driver not found!");
        }
    }

    /** Creates a Connection to a Access Database */
    public static Connection getAccessDBConnection(String filename) throws SQLException {
        filename = filename.replace('', '/').trim();
        String databaseURL = accessDBURLPrefix + filename + accessDBURLSuffix;
        return DriverManager.getConnection(databaseURL, "", "");
    } 
```

一些有用的链接：

*   [http://blog.taragana.com/index.php/archive/how-to-access-ms-access-database-from-jdbc/](http://blog.taragana.com/index.php/archive/how-to-access-ms-access-database-from-jdbc/)
*   [http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=2691&lngWId=2](http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=2691&lngWId=2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T09:21:57.297

如果您的意思是在 Java 中使用关系数据库，您需要了解[JDBC](http://java.sun.com/docs/books/tutorial/jdbc/index.html)。

您将无法使用 JDBC 对安全性做很多事情。您必须使用[JAAS](http://java.sun.com/javase/6/docs/technotes/guides/security/)或[Spring Security 之](http://static.springframework.org/spring-security/site/reference/html/springsecurity.html)类的东西将其构建到应用程序中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T19:23:33.260

您可以通过 LAN n 上的共享驱动器共享数据库，然后将其添加到其他 PC 的系统 DSN，您可以通过 LAN 共享访问数据库 .. 为我工作

我知道字符串很旧，但可能对像我这样的人有用

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-05-26T09:19:51.357

JDBC是要走的路。Google for "JDBC tutorial" + mysql，你会得到你需要的一切。

# sql - 使用 A 列和 B 列的值更新 C 列

> ID：909759
> 
> 赞同：1
> 
> 时间：2009-05-26T09:19:50.437
> 
> 标签：sql, sql-update

我需要实现这一点

```
update [table]
set [column c] = ( select [column a] + ' ' + [column b] from [table] ) 
```

但我收到此错误消息

*子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。*

如何在没有不良结果的情况下达到预期效果:)

吉姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-26T09:21:58.670

这很容易：

```
update table
set c = a + ' ' + b 
```

这将更新表中的所有行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-26T09:26:07.600

尝试将 WHERE 子句添加到子查询中，以便它只选择一行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-26T18:56:49.833

UPDATE table SET c= a+' '+b;--------如果 a,b,c 是 char/var char 数据类型，则此方法有效。

如果它们是数字数据类型，则会出错。还要检查 C.for 的长度，例如：如果 C varchar2(30)、a varchar2(10) 和 b varchar2(15)，如果右侧值的长度更大，则会出现错误。

# email - Return-Path 标头的正确格式

> ID：909772
> 
> 赞同：3
> 
> 时间：2009-05-26T09:23:42.300
> 
> 标签：email, sendmail, return-path, tmail

我的应用程序使用*sendmail*发送出站电子邮件。我使用以下格式设置“发件人：”地址：

```
Fred Dibnah <fred@dibnah.com> 
```

我还使用完全相同的格式 设置了**回复**和**返回路径标头。**

这似乎在绝大多数情况下都有效，但我至少见过一个失败的例子，即当上述字符串的名称部分包含句点（句号）时：

```
Fred Dibnah, Inc. <fred@dibnah.com> 
```

这在**TMail**代码的深处失败了（我正在使用 Ruby），但这似乎是一件非常有效的事情。

我的问题是，我是否应该只使用电子邮件地址而不是上述名称 + 电子邮件格式来设置**Return-Path**和**Reply-To标头？**例如

```
fred@dibnah.com 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T03:32:26.503

在这种情况下，最好求助于[RFC。](http://www.lemis.com/email/email-rfc.html)

*阅读您的问题后，您*似乎不应该设置**Return-Path**值。最终目标 SMTP 服务器应该在将邮件传输到您的邮箱时设置此值（从 4.4 开始的[http://www.faqs.org/rfcs/rfc2821.html ）。](http://www.faqs.org/rfcs/rfc2821.html)

根据[http://www.faqs.org/rfcs/rfc2822.html，Reply-To](http://www.faqs.org/rfcs/rfc2822.html)**字段**可以有以下格式

1.  本地部分“@”域（例如 fred@dibnah.com）
2.  显示名称（例如 Fred Dibna）

我建议使用选项 1，因为它似乎是最基本的，并且您可能会遇到较少的问题。在选择选项 1 时，您的**回复**字段应如下所示：

```
Reply-To: fred@dibna.com 
```

# apache-flex - Flex 补间类

> ID：909774
> 
> 赞同：1
> 
> 时间：2009-05-26T09:23:54.967
> 
> 标签：apache-flex, animation, tween

有人告诉我好几次，或者我在不同的地方读过（不记得现在具体在哪里）不要使用 Flex SDK 中的 Tween 类，而是使用其他动画库，如 Tweener、TweenMax、GTween 等。 .

使用 Flex 补间有什么问题？是性能问题吗？

如果我想做状态转换，我应该使用第三方库进行自定义转换吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-02-20T13:11:38.370

作为参考，这里有一些有用的东西：

*   [Actionscript Tween 性能比较](http://www.greensock.com/tweening-speed-test/)- 使用默认 Flex 3 Tween 类时浏览器崩溃。
*   [Doob 先生的 Actionscript Tween 库列表](http://mrdoob.com/blog/post/636)。

如果您的目标只是*在皮肤中进行状态转换*，那么使用 Flex Effect 类是最简单的。Flex 4 即将发布，它完全重写了它的效果库，比 Flex 2/3 快得多。我使用 TweenMax 和 Flex 效果对 100 个 mx.controls.Button 实例进行了一个快速测试，每个实例 500 毫秒，一个接一个，并且 TweenMax 的速度大约是原来的两倍（这意味着我可以看到 15 个对象同时移动，而不是 7 或 8 个）。所以如果*可以*的话，我会用 TweenMax 做所有的动画。绝对是最通用/流行/模块化/优化的。但是对于皮肤，并且因为 Flex 效果已准备好在 MXML 中的皮肤中使用，请使用它们。

还可以查看[Tink 的 Efflex Flex 效果库](http://www.efflex.org/EfflexExplorer.html)，了解一些不错的 Container/Viewstack 效果（有些是 3D 的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T09:42:16.960

根据您一直在阅读的博客，他们可能会重点关注 Flash/actionscript。在这种情况下，它可能会推荐类似 tweenlight 或类似的东西。

如果您正在使用 flex 及其库，那么没有理由不使用 flex 效果（基于 flex 的 Tween 版本）。请注意，flex Tween 与 flash Tween 不同。但是你不必担心，如果你想移动一些东西，只需使用移动效果，如果你想淡化一些东西，只需使用淡化效果。

有些人可能会推荐另一个 tween 包，因为它会使整体 SWF 大小更小，但这取决于您构建最终 SWF 的方式。您是否将带有 flex 框架的 SWF 作为 RSL 部署（建议虽然 Google 无法搜索您的 SWF，但如果您这样做，请查看[此链接](http://kennethsutherland.com/2009/04/27/google-and-swfs/)），那么最好使用 Flex 效果。如果您没有将框架用作 RSL，那么将需要测试您的应用程序以查看哪个版本作为更大的 SWF 文件出现。

使用 flex 效果我从来没有遇到过任何性能问题。一些第 3 方补间包的效果不属于 flex 库的一部分，但除此之外，我想不出任何不使用 flex 效果/补间的充分理由。

# c++ - c++ 如果使用 sprintf 打印的字符多于 char 指针分配的字符，会发生什么情况？

> ID：909775
> 
> 赞同：2
> 
> 时间：2009-05-26T09:24:07.057
> 
> 标签：c++, printf

我认为这是使用 sprintf 的常用方法：

```
char pText[x];
sprintf(pText, "helloworld %d", Count ); 
```

但究竟会发生什么，如果 char 指针分配的内存比打印到的少？

即如果x 小于sprintf 的第二个参数的长度怎么办？

我在问，因为我在 sprintf 语句之后的代码中出现了一些奇怪的行为。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-26T09:29:24.973

一般不可能“确切地”回答会发生什么。这样做会调用所谓的[未定义行为](http://en.wikipedia.org/wiki/Undefined_behavior)，这基本上意味着任何事情都可能发生。

最好避免这种情况，并在可用的情况下使用安全功能：

```
char pText[12];
snprintf(pText, sizeof pText, "helloworld %d", count); 
```

请注意如何`[snprintf()](http://linux.die.net/man/3/snprintf)`采用额外的参数，即缓冲区大小，并且不会写入超出空间的内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-26T09:27:50.543

这是一个常见错误，会在 char 数组被覆盖后导致内存占用。因此，例如，在 char 数组之后的内存中可能有一些 int 或另一个数组，这些会被文本覆盖。

[在此处](http://www.ibm.com/developerworks/library/s-buffer-defend.html)查看有关整个问题（缓冲区溢出）的详细说明。还有一条评论说，某些体系结构提供了一个 snprintf 例程，该例程具有定义最大长度的第四个参数（在您的情况下为 x）。如果您的编译器不知道它，您也可以自己编写它以确保不会出现此类错误（或者只是检查您是否始终有足够的空间分配）。

请注意，此类错误之后的行为是未定义的，并且可能导致非常奇怪的错误。变量通常在可被 4 整除的内存位置对齐，因此在大多数情况下，您有时不会注意到错误，在大多数情况下，您已经写了太多的一两个字节（即忘记为 NUL 腾出位置），但在其他情况下会出现奇怪的错误案例。这些错误很难调试，因为其他变量会发生变化，并且错误通常会发生在代码的完全不同的部分。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-26T09:32:44.327

这称为*缓冲区溢出*。

`sprintf`将覆盖恰好遵循`pText`地址的内存。由于`pText`在栈上，`sprintf`可以覆盖局部变量、函数参数和返回地址，导致各种错误。这种代码会导致许多安全漏洞——例如，攻击者使用缓冲区溢出来编写指向他自己代码的新返回地址。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-26T09:28:40.997

这种情况下的行为是未定义的。通常，您会崩溃，但您也可能不会看到任何不良影响，不相关的变量中出现奇怪的值等等。您的代码还可能调用错误的函数、格式化您的硬盘驱动器并杀死其他正在运行的程序。最好通过为缓冲区分配更多内存来解决此问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-05-19T06:11:12.217

我已经这样做了很多次，你会收到内存损坏错误。AFAIK，我记得我做过这样的事情：-

```
vector<char> vecMyObj(10);
vecMyObj.resize(10);
sprintf(&vecMyObj[0],"helloworld %d", count); 
```

但是当调用vector的析构函数时，我的程序收到内存损坏错误，如果大小小于10，它将成功运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-26T09:26:53.683

你会拼写[**缓冲区溢出**](http://en.wikipedia.org/wiki/Buffer_overflow)吗？一种可能的结果是堆栈损坏，并使您的应用容易受到基于堆栈的利用。

# c# - 反射 - 获取嵌套对象的属性

> ID：909777
> 
> 赞同：2
> 
> 时间：2009-05-26T09:24:14.250
> 
> 标签：c#, reflection, propertyinfo, getproperties

指：[反射-设置返回的obj类型？](https://stackoverflow.com/questions/906327/reflection-setting-type-of-returned-obj) 我有一个对象 Call Jobcard，它有几个属性，其中一个是另一个名为 Customer 的对象，它有自己的属性，其中一个是另一个名为 Adress 的嵌套对象。

这两个函数也将处理其他对象类型。

```
private T PopulateObject<T>(T dataObj, System.Data.DataRow dataRow)
{

    //Type type = dataObj.GetType();
    System.Reflection.PropertyInfo[] proplist = dataObj.GetType().GetProperties();

    foreach ( System.Reflection.PropertyInfo propertyitem in proplist)
    {
        if(propertyitem.Name != "")
        //s += propertyitem.Name + ":" + (propertyitem.GetValue(dataObj,null)).ToString() + "\r\n";
            try
            {
                propertyitem.SetValue(dataObj, dataRow[propertyitem.Name], null);
            }
            catch (Exception ex)
            {
                if (ex.Message.Contains("does not belong to table"))
                {
                   propertyitem.SetValue(dataObj, PopulateChildObject(propertyitem, dataRow), null);
                }
                else
                throw;
            } 
    }
    return dataObj;
}

private object PopulateChildObject(object dataObj, System.Data.DataRow dataRow)
{

    System.Reflection.PropertyInfo[] proplist = dataObj.GetType().GetProperties();

    foreach ( System.Reflection.PropertyInfo propertyitem in proplist)
    {
        if(propertyitem.Name != "")
            try
            {
                propertyitem.SetValue(dataObj, dataRow[propertyitem.Name], null);
            }
            catch (Exception ex)
            {           
             if (ex.Message.Contains("does not belong to table"))
                {
                   propertyitem.SetValue(dataObj, PopulateChildObject(propertyitem, dataRow), null);
                }
                else
                throw;
            } 
    }
    return dataObj;
} 
```

问题是 PopulateChildObject 函数不起作用，因为 PropertyInfo 列表不是传递的 childObj 的列表。如果我查看手表中传递给 PopulateChildObject 的 dataObj，它有 0 个属性。此外，传递给 PopChildObj() 的 dataObj 的类型为 System.Reflection.RuntimePropertyInfo' 而不是 Customer 类型。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-26T09:27:24.913

`propertyitem`是`PropertyInfo`；您需要将属性中的*值*传递给它- 即

```
propertyItem.GetValue(dataObj, null); 
```

如果这个子对象是由父对象创建的，则不需要“设置”它；只需更新 underyling 对象：

```
PopulateChildObject(propertyitem.GetValue(dataObj, null), dataRow); 
```

您可能需要*创建*子对象（通常`Activator.CreateInstance`），在这种情况下您*需要*调用`SetValue`：

```
object child = propertyitem.GetValue(dataObj, null);
if(child == null) {
    child = Activator.CreateInstance(propertyitem.PropertyType);
    propertyitem.SetValue(dataObj, child, null);
}
PopulateChildObject(child, dataRow); 
```

`PopulateObject`不过，我想知道 -和之间真的有什么区别`PopulateChildObject`吗？感觉他们可能是同一个东西？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T18:36:40.533

获取 Nest 属性，例如 Developer.Project.Name

```
private static System.Reflection.PropertyInfo GetProperty(object t, string PropertName)
            {
                if (t.GetType().GetProperties().FirstOrDefault(p => p.Name == PropertName.Split('.')[0]) == null)
                    throw new ArgumentNullException(string.Format("Property {0}, is not exists in object {1}", PropertName, t.ToString()));
                if (PropertName.Split('.').Length == 1)
                    return t.GetType().GetProperty(PropertName);
                else
                    return GetProperty(t.GetType().GetProperty(PropertName.Split('.')[0]).GetValue(t, null), PropertName.Split('.')[1]);
            } 
```

# iphone - iphone内存管理

> ID：909785
> 
> 赞同：1
> 
> 时间：2009-05-26T09:26:09.050
> 
> 标签：iphone, performance, memory

我有一个返回 NSMutableArray 的方法：

//学生类的实现

```
-(NSMutableArray *)listOfStudents {
  NSMutableArray *students = [[NSMutableArray alloc] init];
  //add objects to students and other operations here
  return students;
} 
```

这里的问题是，我何时何地释放对象学生？如果它是一个实例变量，我会在 dealloc 方法中添加一个 [students release]，但事实并非如此。Student 类分配了对象，所以它拥有新的 NSMutableArray 并且它必须释放它，对吗？由于在返回之前我无法释放它，所以我在这里看到的唯一选择是......将其返回为：

```
return [students autorelease]; 
```

但是在 iPhone 上使用自动释放对象感觉不太对劲。这个方法会被调用很多次……我想尽快释放内存。此外，自动释放池位于主要功能中，看起来需要一段时间才能清理混乱。

你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T13:11:10.750

我倾向于在我的 iPhone 应用程序中尽可能避免使用自动释放，但在某些情况下它不会对你造成太大伤害。如果您通过此方法生成的数组将保留相当长的时间，那么您不会通过将其作为自动释放结果返回来牺牲任何性能或内存使用。

但是，如果您将非常频繁地使用和丢弃返回的对象，您可能希望做一些不同的事情。我的方法有一个命名约定，如果某些东西以“generate”为前缀，例如 generateStudentsArray，它会返回一个由调用者拥有的对象，并且必须手动释放（如复制）。这有助于避免使用自动释放的对象，但它增加了在进行内存管理时要记住的另一件事。

此外，由于内存分配/释放的成本很高（尤其是在 iPhone 上），您可能希望避免在一个调用很多的方法中频繁分配和释放，而是通过提前创建可变数组并将其传递到方法，它只添加到数组的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T10:03:32.393

你是对的，`autorelease`是在这种情况下使用的标准成语。

UIKit 实际上在每个事件循环开始时创建一个自动释放池并在结束时释放它，因此您的自动释放对象将在那时被清除；他们不会永远闲逛。

如果您有一个在单个事件周期内多次调用此方法的循环，您可能希望在该循环内创建自己的自动释放池，以便在每次迭代结束时释放这些对象，而不是构建大量对象在当前事件周期结束时释放。

但除非你正在做类似的事情，或者你遇到了另一种特定的内存不足情况，否则 UIKit 的标准自动释放池应该可以很好地处理它。

# visual-studio - 解决方案资源管理器项目上下文菜单

> ID：909786
> 
> 赞同：1
> 
> 时间：2009-05-26T09:26:49.173
> 
> 标签：visual-studio, visual-studio-2010

有没有办法向项目右键单击上下文菜单（）添加其他选项（特别是添加接口`Right Click a project > Add > [Class, new Item, new form,...]`）？

我在自定义对话框中找到了一个选项来放置“添加接口...”项目，但这始终被禁用。我在菜单定制的项目类别下找到了一个，所以我认为它会起作用......

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-03-17T16:57:38.167

我目前正在试用 ReSharper，它有自己的一组 Create New 上下文菜单条目（可键绑定），这些支持我所追求的一切。

ReSharper“新建”对话框的响应速度也比内置的 Visual Studio 快得多。

# c# - 如何获取应用程序的安装路径？

> ID：909788
> 
> 赞同：13
> 
> 时间：2009-05-26T09:27:00.843
> 
> 标签：c#, windows

在使用 C# 的 Windows 中，如何**从我的项目**中获取软件的安装路径（例如考虑 NUnit 或任何其他软件，如 MS word 等） ？还有如何设置我们在环境变量中设置的路径变量，以便我们可以通过在命令提示符下运行应用程序。

就像我将 NUnit 安装在“C:\ **我需要从我的项目中获取 NUnit 或安装在我的系统（具有 Windows XP）中的任何其他软件的位置或路径。**

编辑：就像我可以从注册表中获取已安装程序的路径一样。HKEY_CURRENT_USER->软件

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-26T09:39:55.497

使用系统和应用程序类。这将为您提供各种信息。

EG：Application.ExecutablePath

它还提供了做你想做的事情的方法。

编辑：另请参阅此处的注册表读/写说明：

[http://www.c-sharpcorner.com/UploadFile/sushmita_kumari/RegistryKeys102082006061720AM/RegistryKeys1.aspx?ArticleID=0ce07333-c9ab-4a6a-bc5d-44ea2523e232](http://www.c-sharpcorner.com/UploadFile/sushmita_kumari/RegistryKeys102082006061720AM/RegistryKeys1.aspx?ArticleID=0ce07333-c9ab-4a6a-bc5d-44ea2523e232)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-26T09:52:29.527

```
Application.ExecutablePath (includes filename)
Application.StartupPath (not includes filename) 
```

这将为您提供应用程序启动的路径。希望它是安装路径。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-05-26T09:46:31.257

```
string appFileName = Environment.GetCommandLineArgs()[0]; 
```

将为您提供可执行文件的完整路径和

```
string directory = Path.GetDirectoryName(appFileName); 
```

提取目录。

```
string envPath = Environment.GetEnvironmentVariable("PATH");
Environment.SetEnvironmentVariable(envPath + ";" + yourPath); 
```

编辑当前进程的 PATH 环境变量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-26T09:46:42.253

Application.StartupPath 用于在 c# 中获取安装位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-26T09:44:28.483

> 就像我将 Nunit 安装在“C:\

可能您使用的是 Windows Vista，它可以在 Program Files 中搜索，但不会在其他文件夹中查找。

> 在使用C#的windows中，如何获取软件的安装路径（例如考虑nunit）。？

这取决于您如何安装应用程序。安装程序知道路径，您可以对安装程序进行编程以将该路径写入某个地方，例如注册表。

> 还有如何设置我们在环境变量中设置的路径变量，以便我们可以通过在命令提示符下运行应用程序。

[如何在 C# 中获取和设置环境变量？](https://stackoverflow.com/questions/185208/how-do-i-get-and-set-environment-variables-in-c/185214)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-03T15:09:24.550

从注册表中提取值的步骤显示在以下代码段中。您可能已经知道应用程序放置其安装信息没有标准规则。下面显示的步骤适用于基于 COM 的应用程序，其中应用程序必须以合理的标准方式提供本地可执行路径。

对于非 com 应用程序，检查是否可以从已安装的应用程序缓存中提取某些数据。

我不想承认这个解决方案没有我想要的那么优雅。每个子项都必须连续打开，单方法打开是行不通的。

```
//string hiveName = @"CLSID"; // for 64 bit COM 7applications
string hiveName = @"WOW6432Node\CLSID"; // for 32 bit COM applications
using (RegistryKey key = Registry.ClassesRoot.OpenSubKey(hiveName))

{
  if (key != null) {
      using (RegistryKey key2 = key.OpenSubKey("{<YourAppGUID>}"))
  {
  if (key2 != null) {
    using (RegistryKey key3 = key2.OpenSubKey("LocalServer32"))
  {
  if (key3 != null) {
    return key3.GetValue("").ToString();
  }
} 
```

# php - PHP 中的异步处理或消息队列 (CakePHP)

> ID：909791
> 
> 赞同：33
> 
> 时间：2009-05-26T09:27:37.457
> 
> 标签：php, multithreading, cakephp, asynchronous, message-queue

我正在使用 CakePHP 构建一个网站，该网站处理通过 XML-RPC API 和 Web 前端上传的文件。文件需要被 ClamAV 扫描，需要生成缩略图等等。所有需要一些时间的资源密集型工作，用户不必等待。所以，我正在研究一般的 PHP 异步处理，特别是 CakePHP。

我遇到了看起来很有前途的 CakePHP的[MultiTask 插件。](http://blogs.bigfish.tv/adam/2009/02/16/new-cakephp-multitask-plugin/)我还遇到了各种消息队列实现，例如[dropr](https://www.dropr.org/)和[beanstalkd](http://xph.us/software/beanstalkd/)。当然，我还需要某种后台进程，可能使用某种 Cake Shell 来实现。我看到 MultiTask 使用[PHP_Fork](http://pear.php.net/package/PHP_Fork/docs)来实现一个多线程的 PHP 守护进程。

我需要一些关于如何以最佳方式将所有这些部分组合在一起的建议。

*   用 PHP 编写一个长期运行的守护进程是个好主意吗？我应该注意什么？
*   外部消息队列实现的优势是什么？MultiTask 插件不使用外部消息队列。它使用 MySQL 表来存储任务。
*   我应该使用什么消息队列？滴管？豆茎？还有什么？
*   我应该如何实现后端处理器？分叉 PHP 守护进程是个好主意还是只是自找麻烦？

我目前的计划是使用 MultiTask 插件或编辑它以使用 beanstald 而不是它自己的 MySQL 表实现。队列中的作业可以简单地由一个任务名称和一组参数组成。PHP 守护进程将监视传入的作业并将它们传递给它的一个子线程。将简单地使用给定的参数执行 CakePHP 任务。

对此有任何意见、建议、评论、陷阱或火焰吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-06-02T16:22:23.580

我使用[BeanstalkD](http://kr.github.com/beanstalkd/)和一个用 PHP 编写的后端来检索作业然后对它们采取行动取得了很好的效果。我将实际运行的作业包装在一个 bash 脚本中，即使它退出也能继续运行（除非我做一个' `exit(UNIQNUM);`'，当脚本检查它并实际退出时）。这样，重新启动的 PHP 脚本会清除所有可能已使用的内存，并且可以在每运行 25/50/100 个作业时重新启动。

使用它的几个优点是您可以在 BeanstalkD 作业中设置优先级和延迟 - “以较低的优先级运行它，但不要在 10 秒内开始”。我还曾在某个时间将许多作业排队（现在运行，5 秒后运行，30 秒后再次运行）。

通过适当的网络配置（并在网络其余部分可访问的 IP 地址上运行它），您还可以在一台服务器上运行 beanstalkd 守护程序，并从许多其他机器轮询它，所以如果有一个大生成的任务数量，可以在服务器之间拆分工作。如果需要在特定机器上运行一组特定的任务，我创建了一个“管”，它是该机器的主机名，如果不是全局的，它在我们的集群中应该是唯一的（对于文件上传很有用）。我发现它非常适合调整图像大小，通常在引用它的网页本身引用它将到达的 URL 之前将完成的较小图像返回到文件系统。

实际上，我即将开始为我的博客写一系列关于这个主题的文章（包括一些我已经推送了数百万个实时请求的代码技术）——我的 URL 链接自我的[用户个人资料](https://stackoverflow.com/users/6216/topbit)，位于 Stackoverflow .

（我写了[一系列](http://www.phpscaling.com/tag/beanstalkd/)关于 Beanstalkd 和工作排队的文章）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-26T10:29:03.510

如果您使用像 beanstalkd 这样的消息队列，您可以启动任意数量的进程（即使在同一台服务器上）。每个工作进程将从队列中取出一项作业并进行处理。如果您需要更多容量，您可以添加更多工作人员和更多服务器。

使用单线程工作者的好处是您不必处理进程内的同步。作业队列将确保没有作业会被处理两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T19:48:50.900

是否也值得检查一下与 EC2 结合使用的[Amazon SQS ？](http://aws.amazon.com/sqs/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-12T13:48:25.467

盖尔曼呢？对 php 的良好支持和集成以及并行任务、缩放、监控等功能......

# .net - 如何更改 ASP.NET MVC 中的默认视图位置方案？

> ID：909794
> 
> 赞同：35
> 
> 时间：2009-05-26T09:28:24.287
> 
> 标签：.net, asp.net-mvc, viewengine

我想根据当前的 UI 文化在运行时更改视图位置。如何使用默认的 Web 表单视图引擎来实现这一点？

基本上我想知道如何用`WebFormViewEngine`Spark 中的自[定义](http://sparkviewengine.com/)[IDescriptorFilter](http://sparkviewengine.com/documentation/viewlocations#CustomIDescriptorFilterimplementations)来实现。

是否有其他视图引擎可以让我在运行时控制视图位置？

* * *

**编辑：**我的网址应该如下所示`{lang}/{controller}/{action}/{id}`。我不需要依赖于语言的控制器，并且视图已使用资源进行本地化。然而，在某些语言中，很少有观点会有所不同。所以我需要告诉视图引擎首先查看特定于语言的文件夹。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-09-29T16:00:04.580

一个简单的解决方案是，从集合中`Appication_Start`获取适当的并更新其数组和. 没有hackery：默认情况下它是读/写的。`ViewEngine``ViewEngines.Engines`[`ViewLocationFormats`](http://msdn.microsoft.com/en-us/library/system.web.mvc.virtualpathproviderviewengine.viewlocationformats.aspx)[`PartialViewLocationFormats`](http://msdn.microsoft.com/en-us/library/system.web.mvc.virtualpathproviderviewengine.partialviewlocationformats.aspx)

```
protected void Application_Start()
{
    ...
    // Allow looking up views in ~/Features/ directory
    var razorEngine = ViewEngines.Engines.OfType<RazorViewEngine>().First();
    razorEngine.ViewLocationFormats = razorEngine.ViewLocationFormats.Concat(new string[] 
    { 
        "~/Features/{1}/{0}.cshtml"
    }).ToArray();
    ...
    // also: razorEngine.PartialViewLocationFormats if required
} 
```

Razor 的默认设置[如下所示](https://aspnetwebstack.codeplex.com/SourceControl/latest#src/System.Web.Mvc/RazorViewEngine.cs)：

```
ViewLocationFormats = new string[]
{
    "~/Views/{1}/{0}.cshtml",
    "~/Views/{1}/{0}.vbhtml",
    "~/Views/Shared/{0}.cshtml",
    "~/Views/Shared/{0}.vbhtml"
}; 
```

**请注意**，您可能还想更新[`PartialViewLocationFormats`](http://msdn.microsoft.com/en-us/library/system.web.mvc.virtualpathproviderviewengine.partialviewlocationformats.aspx)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-26T23:34:09.417

`VirtualPathProviderViewEngine.GetPathFromGeneralName`必须更改以允许来自路由的附加参数。它不公开，这就是为什么您必须将`GetPath`, `GetPathFromGeneralName`, `IsSpecificPath`... 复制到您自己的`ViewEngine`实现中。

你是对的：这看起来像是一个完整的重写。我希望`GetPathFromGeneralName`是公开的。

```
using System.Web.Mvc;
using System;
using System.Web.Hosting;
using System.Globalization;
using System.Linq;

namespace MvcLocalization
{
    public class LocalizationWebFormViewEngine : WebFormViewEngine
    {
        private const string _cacheKeyFormat = ":ViewCacheEntry:{0}:{1}:{2}:{3}:";
        private const string _cacheKeyPrefix_Master = "Master";
        private const string _cacheKeyPrefix_Partial = "Partial";
        private const string _cacheKeyPrefix_View = "View";
        private static readonly string[] _emptyLocations = new string[0];

        public LocalizationWebFormViewEngine()
        {
            base.ViewLocationFormats = new string[] { 
                    "~/Views/{1}/{2}/{0}.aspx", 
                    "~/Views/{1}/{2}/{0}.ascx", 
                    "~/Views/Shared/{2}/{0}.aspx", 
                    "~/Views/Shared/{2}/{0}.ascx" ,
                     "~/Views/{1}/{0}.aspx", 
                    "~/Views/{1}/{0}.ascx", 
                    "~/Views/Shared/{0}.aspx", 
                    "~/Views/Shared/{0}.ascx" 

            };

        }

        private VirtualPathProvider _vpp;

        public override ViewEngineResult FindView(ControllerContext controllerContext, string viewName, string masterName, bool useCache)
        {
            if (controllerContext == null)
                throw new ArgumentNullException("controllerContext");

            if (String.IsNullOrEmpty(viewName))
                throw new ArgumentException( "viewName");

            string[] viewLocationsSearched;
            string[] masterLocationsSearched;

            string controllerName = controllerContext.RouteData.GetRequiredString("controller");
            string viewPath = GetPath(controllerContext, ViewLocationFormats, "ViewLocationFormats", viewName, controllerName, _cacheKeyPrefix_View, useCache, out viewLocationsSearched);
            string masterPath = GetPath(controllerContext, MasterLocationFormats, "MasterLocationFormats", masterName, controllerName, _cacheKeyPrefix_Master, useCache, out masterLocationsSearched);

            if (String.IsNullOrEmpty(viewPath) || (String.IsNullOrEmpty(masterPath) && !String.IsNullOrEmpty(masterName)))
            {
                 return new ViewEngineResult(viewLocationsSearched.Union(masterLocationsSearched));
            }

            return new ViewEngineResult(CreateView(controllerContext, viewPath, masterPath), this);
        }

        private string GetPath(ControllerContext controllerContext, string[] locations, string locationsPropertyName, string name, string controllerName, string cacheKeyPrefix, bool useCache, out string[] searchedLocations)
        {
            searchedLocations = _emptyLocations;

            if (String.IsNullOrEmpty(name))
                return String.Empty;

            if (locations == null || locations.Length == 0)
                throw new InvalidOperationException();

            bool nameRepresentsPath = IsSpecificPath(name);
            string cacheKey = CreateCacheKey(cacheKeyPrefix, name, (nameRepresentsPath) ? String.Empty : controllerName);

            if (useCache)
            {
                string result = ViewLocationCache.GetViewLocation(controllerContext.HttpContext, cacheKey);
                if (result != null)
                {
                    return result;
                }
            }

            return (nameRepresentsPath) ?
                GetPathFromSpecificName(controllerContext, name, cacheKey, ref searchedLocations) :
                GetPathFromGeneralName(controllerContext, locations, name, controllerName, cacheKey, ref searchedLocations);
        }

        private string GetPathFromGeneralName(ControllerContext controllerContext, string[] locations, string name, string controllerName, string cacheKey, ref string[] searchedLocations)
        {
            string result = String.Empty;
            searchedLocations = new string[locations.Length];
            string language = controllerContext.RouteData.Values["lang"].ToString();

            for (int i = 0; i < locations.Length; i++)
            {
                string virtualPath = String.Format(CultureInfo.InvariantCulture, locations[i], name, controllerName,language);

                if (FileExists(controllerContext, virtualPath))
                {
                    searchedLocations = _emptyLocations;
                    result = virtualPath;
                    ViewLocationCache.InsertViewLocation(controllerContext.HttpContext, cacheKey, result);
                    break;
                }

                searchedLocations[i] = virtualPath;
            }

            return result;
        }

        private string CreateCacheKey(string prefix, string name, string controllerName)
        {
            return String.Format(CultureInfo.InvariantCulture, _cacheKeyFormat,
                GetType().AssemblyQualifiedName, prefix, name, controllerName);
        }

        private string GetPathFromSpecificName(ControllerContext controllerContext, string name, string cacheKey, ref string[] searchedLocations)
        {
            string result = name;

            if (!FileExists(controllerContext, name))
            {
                result = String.Empty;
                searchedLocations = new[] { name };
            }

            ViewLocationCache.InsertViewLocation(controllerContext.HttpContext, cacheKey, result);
            return result;
        }

        private static bool IsSpecificPath(string name)
        {
            char c = name[0];
            return (c == '~' || c == '/');
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-12-28T18:56:15.457

1）从剃刀视图引擎扩展类

`public class LocalizationWebFormViewEngine : RazorViewEngine`

2) 添加部分位置格式

```
public LocalizationWebFormViewEngine() 
{
    base.PartialViewLocationFormats = new string[] {
        "~/Views/{2}/{1}/{0}.cshtml", 
        "~/Views/{2}/{1}/{0}.aspx", 
        "~/Views/{2}/Shared/{0}.cshtml", 
        "~/Views/{2}/Shared/{0}.aspx"
    };

    base.ViewLocationFormats = new string[] {
        "~/Views/{2}/{1}/{0}.cshtml", 
        "~/Views/{2}/{1}/{0}.aspx", 
        "~/Views/{2}/Shared/{0}.cshtml", 
        "~/Views/{2}/Shared/{0}.aspx"
    };
} 
```

3) 为局部视图渲染创建覆盖方法

```
public override ViewEngineResult FindPartialView(ControllerContext controllerContext, String partialViewName, Boolean useCache)
{
    if (controllerContext == null)
    {
        throw new ArgumentNullException("controllerContext");
    }
    if (String.IsNullOrEmpty(partialViewName))
    {
        throw new ArgumentException("partialViewName");
    }

    string[] partialViewLocationsSearched;

    string controllerName = controllerContext.RouteData.GetRequiredString("controller");
    string partialPath = GetPath(controllerContext, PartialViewLocationFormats, "PartialViewLocationFormats", partialViewName, controllerName, _cacheKeyPrefix_Partial, useCache, out partialViewLocationsSearched);

    return new ViewEngineResult(CreatePartialView(controllerContext, partialPath), this);}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-26T09:49:52.387

我相信解决方案是创建您自己的继承自 WebFormViewEngine 的 ViewEngine。在构造函数中，它应该从当前线程检查当前 UI 文化并添加适当的位置。只是不要忘记将它添加到您的视图引擎中。

这应该看起来像这样：

```
public class ViewEngine : WebFormViewEngine
{
    public ViewEngine()
    {
        if (CultureIsX())
            ViewLocationFormats = new string[]{"route1/controller.aspx"};
        if (CultureIsY())
            ViewLocationFormats = new string[]{"route2/controller.aspx"};
    }
} 
```

在 global.asax 中：

```
ViewEngines.Engines.Add(new ViewEngine()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-23T20:59:56.673

下面是一个没有重写的本地化视图引擎。

简而言之，*每次*查找视图时，引擎都会将新位置插入视图位置。引擎将使用两种字符语言来查找视图。因此，如果当前语言是`es`（西班牙语），它将查找`~/Views/Home/Index.es.cshtml`.

有关详细信息，请参阅代码注释。

更好的方法是覆盖视图位置的解析方式，但这些方法是不可覆盖的；也许在 ASP.NET MVC 5 中？

```
public class LocalizedViewEngine : RazorViewEngine
{
    private string[] _defaultViewLocationFormats;

    public LocalizedViewEngine()
        : base()
    {
        // Store the default locations which will be used to append
        // the localized view locations based on the thread Culture
        _defaultViewLocationFormats = base.ViewLocationFormats;
    }

    public override ViewEngineResult FindPartialView(ControllerContext controllerContext, string partialViewName, bool useCache)
    {
        AppendLocalizedLocations();
        return base.FindPartialView(controllerContext, partialViewName, useCache:fase);
    }

    public override ViewEngineResult FindView(ControllerContext controllerContext, string viewName, string masterName, bool useCache)
    {
        AppendLocalizedLocations();
        returnbase.FindView(controllerContext, viewName, masterName, useCache:false);
    }

    private void AppendLocalizedLocations()
    {
        // Use language two letter name to identify the localized view
        string lang = Thread.CurrentThread.CurrentUICulture.TwoLetterISOLanguageName;

        // Localized views will be in the format "{action}.{lang}.cshtml"
        string localizedExtension = string.Format(".{0}.cshtml", lang);

        // Create an entry for views and layouts using localized extension
        string view =  "~/Views/{1}/{0}.cshtml".Replace(".cshtml", localizedExtension);
        string shared =  "~/Views/{1}/Shared/{0}".Replace(".cshtml", localizedExtension);

        // Create a copy of the default view locations to modify
        var list = _defaultViewLocationFormats.ToList();

        // Insert the new locations at the top of the list of locations
        // so they're used before non-localized views.
        list.Insert(0, shared);
        list.Insert(0, view);
        base.ViewLocationFormats = list.ToArray();
    }
} 
```

# reporting-services - 从值中消除 html 标签

> ID：909796
> 
> 赞同：0
> 
> 时间：2009-05-26T09:28:27.987
> 
> 标签：reporting-services, reportingservices-2005

我正在尝试从 ssrs 报告中显示的值中消除 HTML 标记。

我的解决方案是： =(new System.Text.RegularExpressions.Regex("<[^>]*>")).Replace((new System.Text.RegularExpressions.Regex("< STYLE >. *< /STYLE > ")).Replace(Fields!activitypointer1_description.Value,""),"")

问题是应该首先执行的第二个表达式（“< STYLE >. *< /STYLE >” 没有空格）没有做任何事情。结果包含来自 html 的样式，没有附加标签。

我没主意了。

C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-26T13:28:52.680

您需要添加 RegexOptions.Singleline，因为默认情况下，正则表达式将在换行符处停止。下面是一个控制台程序示例，您可以运行它来验证它：

```
string decription = @"<b>this is some 
text</b><style>and 
this is style</style>";
        Console.WriteLine(
            (new Regex( "<[^>]*>", RegexOptions.IgnoreCase | RegexOptions.Singleline ))
            .Replace(
                (new Regex( "<STYLE>.*</STYLE>", RegexOptions.IgnoreCase | RegexOptions.Singleline ))
                    .Replace( decription
                    , "" )
            , "" )
         ); 
```

# c++ - 如何知道一个进程是否已启动但在 Linux 中崩溃

> ID：909798
> 
> 赞同：1
> 
> 时间：2009-05-26T09:28:39.343
> 
> 标签：c++, c, linux, debugging, monitoring

考虑以下情况： - 我正在使用 Linux。我怀疑我的应用程序已经崩溃。我没有启用核心转储。日志中没有任何信息。

我怎么能确定，在系统重新启动后，我的应用程序已启动，但现在它没有运行，因为它已经崩溃了。

我的应用程序配置为服务，用 C/C++ 编写。

在某种程度上：**如何获取自系统启动以来已执行的所有进程/服务名称？**甚至可能吗？

我知道，我可以启用日志记录并再次启动该过程以导致崩溃。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-26T13:39:06.870

此功能包含在 Linux 内核中。它被称为：[BSD 进程记帐。](http://www.linuxjournal.com/article/6144)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-26T13:32:15.420

标准做法是为您的守护进程创建一个 pid 文件 (/var/run/$NAME.pid)，您可以在其中找到它的进程 ID，而无需手动解析进程树。然后，您可以检查该进程的状态，或者让您的守护进程响应信号（通常是 SIGHUP），并报告其状态。确保这个 pid 仍然属于您的进程是个好主意，最简单的方法是检查 /proc/$PID/cmdline。

附录：如果您只使用较新的 fedora 或 ubuntu，您的 init 系统是[upstart](http://upstart.ubuntu.com/)，它内置了监控和触发功能。

正如@emg-2 所指出的，BSD 进程记帐是可用的，但我认为这不是这种情况的正确方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-26T09:44:00.433

我建议您将您开始时写入某种日志文件的事实，可以是在每次启动时被覆盖的私有文件，也可以是通过[syslogd](http://www.linux-tutorial.info/modules.php?name=MContent&pageid=57)覆盖的文件。

此外，您可以记录时间戳心跳，以便准确知道它何时崩溃。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-26T09:41:09.910

您可能可以制作一个诱饵，即一个应用程序或 shell 脚本，它只是真正应用程序的包装，但会添加一些日志记录，例如“应用程序已启动”。然后您更改原始应用程序的名称，并将原始名称赋予您的诱饵。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-26T13:49:55.180

正如 JimB 所提到的，您让守护进程编写一个 PID 文件。`0`您可以通过`kill(2)`系统调用或程序向它发送信号来判断它是否正在运行`kill(1)`。返回状态将告诉您具有该 PID 的进程是否存在。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-26T15:06:12.843

守护进程应始终： 1) 使用 getpid() (man getpid) 或您的语言的等效命令将当前运行的实例的进程写入 /var/run/$NAME.pid。2) 将标准日志文件写入 /var/log/$NAME.log（对于当前运行的日志，较大的日志文件应拆分为 .0.log，对于其他日志，应将其拆分为 .X.log.gz，其中 X 是一个数字较低是较新的） 3）/应该/有一个兼容 LSB 的运行脚本，至少接受启动停止状态和重新启动标志。状态可用于检查守护程序是否正在运行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-26T09:43:42.773

我不知道获取所有已执行进程名称的标准方法；[但是，可能有一种方法可以使用SystemTap](http://sourceware.org/systemtap/)做到这一点。

如果你只是想监控你的进程，我建议在 fork 之后使用 waitid (man 2 wait)，而不是分离和守护进程。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-27T02:47:58.823

如果您的应用程序崩溃了，这与“您的应用程序从未启动”没有区别，除非您的应用程序写入系统日志。 `syslog(3)`是你的朋友。

要找到您的应用，您可以尝试多种想法：

*   查看`/proc`文件系统
*   运行`ps`命令
*   尝试`killall appname -0`检查返回码

# asp.net - 选择的值在 asp:Dropdownlist 中没有改变

> ID：909803
> 
> 赞同：6
> 
> 时间：2009-05-26T09:29:10.370
> 
> 标签：asp.net

我有一个简单的下拉列表（ffg）...

```
<asp:DropDownList   ID="DropDownList2" runat="server"  AutoPostBack="true" BackColor="LightSteelBlue" Font-Size="X-Small"
    OnSelectedIndexChanged="DropDownList2_SelectedIndexChanged1"  Style="z-index: 102; left: 37px; position: absolute; top: 85px" Width="331px"
    </asp:DropDownList> 
```

我将数据绑定到使用 onpageload 事件...

```
DropDownList2.DataSource = td.DataSet
DropDownList2.DataSource = td
DropDownList2.DataTextField = td.Columns("Name").ColumnName.ToString
DropDownList2.DataValueField = td.Columns("VendorCode").ColumnName.ToString
DropDownList2.DataBind() 
```

以及 `onleselectedindexchaged`我尝试像这样检索新值的事件...

```
Protected Sub DropDownList2_TextChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles DropDownList2.TextChanged
        Dim url As String = "sp_menu.aspx?sp=" & DropDownList2.SelectedValue
        Session.Remove("sp")
        Session("sp") = DropDownList2.SelectedValue
        Session("spnm") = DropDownList2.SelectedItem.Text & " (" & DropDownList2.Text & ")"
        Response.Redirect(url)
    End Sub 
```

但无论单击下拉列表中的哪个值，它总是会带来第一个值。请帮忙！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-26T09:39:10.007

好吧……有几件事……

First `DropDownList2_TextChanged`没有连接到您的 DropDownList ，所以我看不到该事件将如何触发，除非您在代码隐藏中进行连接

第二

你在这里说这段代码

```
DropDownList2.DataSource = td.DataSet
DropDownList2.DataSource = td
DropDownList2.DataTextField = td.Columns("Name").ColumnName.ToString
DropDownList2.DataValueField = td.Columns("VendorCode").ColumnName.ToString
DropDownList2.DataBind() 
```

在您的 PageLoad 事件中。您是否将其包裹在 中`If Not IsPostBack`，因为如果没有，那么您每次都会重新绑定，并丢失之前的选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-26T09:39:48.507

当您在 Page_Load 中进行数据绑定时，您本质上也是在重置选定项。

您应该将 Page_Load 中存在的任何绑定代码包装在 if(!IsPostBack) 块中。

编辑： ...或如果不是 IsPostBack Then ... End If 在 VB.NET

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-26T09:37:13.023

你可以尝试使用

```
DropDownList2.SelectedItem.Value 
```

代替

```
DropDownList2.SelectedItem.Text 
```

# asp-classic - 如何在经典 ASP 中将变量设为静态（或“全局”）？

> ID：909808
> 
> 赞同：7
> 
> 时间：2009-05-26T09:30:45.313
> 
> 标签：asp-classic, static, global-variables

我想让我的变量静态或“全局” - 所以与.NET中的静态效果相同；每个访问它的会话都会得到相同的结果，如果一个会话修改它，它也会影响其他所有人。

如何在经典 ASP 中实现这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-26T09:33:15.730

使用会话变量

```
Session("myVariableName") = "my new value" 
```

范围将是用户...

如果您想将范围扩大到网站中的所有用户，那么您可以使用 Application 变量

```
Application("myVariableName") = "my new value" 
```

您也可以在 global.asa 文件中重置或处理此问题

这是一种常见的做法：

**global.asa**文件：

```
<script language="vbscript" runat="server">

Sub Application_OnStart
  Application("visitors") = 0
End Sub

Sub Session_OnStart
  Application.Lock
  Application("visitors") = Application("visitors") + 1
  Application.UnLock
End Sub

Sub Session_OnEnd
  Application.Lock
  Application("visitors") = Application("visitors") - 1
  Application.UnLock
End Sub

</script> 
```

**默认.asp**文件：

```
<html>
 <head>
 </head>
 <body>
  <p>There are <%response.write(Application("visitors"))%> online now!</p>
 </body>
</html> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-26T09:35:07.847

如果您想要一个可在应用程序范围内访问的变量，您可以使用应用程序对象。请务必使用[Application.Lock/Unlock](http://msdn.microsoft.com/en-us/library/ms525184.aspx)以防止出现任何问题。

```
Application.Lock
Application("MyVariable") = "SomeValue"
Application.Unlock 
```

# php - 修剪 ip 地址八位字节

> ID：909811
> 
> 赞同：9
> 
> 时间：2009-05-26T09:32:17.650
> 
> 标签：php

我需要使用 php 从 ip 地址中修剪最后一个八位字节。基本上我试图删除第三个点之后的任何数字。我想知道是否有一个开箱即用的解决方案？因为我的正则表达式能力充其量是基本的。非常感谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-05-26T09:33:33.497

```
$trimmed = implode(".", array_slice(explode(".", $ip), 0, 3)); 
```

或者

```
$trimmed = substr($ip, 0, strrpos($ip, ".")); 
```

或者可能

```
$trimmed = preg_replace("/(\d{1,3})\.(\d{1,3}).(\d{1,3}).(\d{1,3})/", '$1.$2.$3', $ip); 
```

一种更数学的方法，它不会删除最后一个数字，而是用 0 替换它：

```
$newIp = long2ip(ip2long("192.168.0.10") & 0xFFFFFF00); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-26T10:07:04.817

这将删除最后一位数字和点。

```
$trimmed = preg_replace('/\.\d{1,3}$/', '', $ip); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T09:50:43.917

正则表达式

```
$ip = '192.168.20.10';
preg_replace_callback(
    '/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/'
    , create_function('$matches', '$matches[4] = "0"; array_shift($matches); return implode(".", $matches);')
    , $ip
); 
```

您也可以使用 ip2long 和 long2ip ......但对“盒子解决方案”一无所知：

```
$ip = ip2long('192.168.20.10') - 10;
echo long2ip($ip); 
```

# asp.net - ASP.NET Membership Provider - 在数据库而不是 Web.config 中指定设置

> ID：909819
> 
> 赞同：0
> 
> 时间：2009-05-26T09:34:07.303
> 
> 标签：asp.net, security, membership

我正在使用 ASP.NET 成员资格提供程序对我的 Web 应用程序中的用户进行身份验证。

我想做两件事

1.  使客户端能够配置诸如 maxInvalidPasswordAttempts 和 passwordAttemptWindow 等设置，而无需了解 web.config（例如通过 UI）
2.  为了能够在多个应用程序之间共享这些设置，以便在 SQL 数据库中定义它们一次，那么服务器上的所有 Web 应用程序都可以使用相同的设置。

我不确定这些是否可行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T09:42:41.403

您是否正在实施您自己的自定义会员资格提供者？

默认成员资格提供程序的属性连接到 web.config 值，但如果您实现自己的版本，覆盖默认值并从数据库中提取这些值应该是相对简单的......

看看[MSDN 上的示例实现](http://msdn.microsoft.com/en-us/library/6tc47t75(VS.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T09:41:40.003

您可以使用会员提供者[MaxInvalidPasswordAttempts](http://msdn.microsoft.com/en-us/library/system.web.security.membership.maxinvalidpasswordattempts.aspx)的此类属性，并编写从数据库填充设置的实现。

# python - pywikipedia 登录？

> ID：909834
> 
> 赞同：-1
> 
> 时间：2009-05-26T09:39:54.983
> 
> 标签：python, login, pywikibot

由于各种原因，我无法使用 login.py 登录，所以我想知道是否有人知道代码，以便我可以使用我的脚本登录维基百科，而无需运行单独的脚本？干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-21T05:37:05.790

答案很简单：你不能使用 pywikipedia 而不能够运行`login.py`.

该文件不仅提供了一个很好的用户界面来尝试您的配置：它包含我们在框架中用于登录的所有身份验证原语。如果没有登录，您将无法做很多事情，所以不。

如果您想要一个更有帮助的答案，您必须更准确：例如，为什么您不能使用 login.py，以及您需要对 Pywikipedia 进行哪些操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T23:21:39.197

当我无法以交互方式使用远程服务器（因此无法输入密码）时，一种对我有用的替代方法是将我的凭据复制到远程服务器。

默认情况下，您的远程权限存储在 中`~/.pywikibot/pywikibot.lwp`，过去我可以在本地登录，然后将此`.lwp`文件复制到远程服务器，然后我不再需要在远程服务器上输入密码。

我根本不认为这种方法是安全的，但它是一种黑客攻击。

# c# - C#：为什么运行 Java.exe 的进程运行良好，但窗口没有返回任何输出？

> ID：909840
> 
> 赞同：3
> 
> 时间：2009-05-26T09:41:13.747
> 
> 标签：c#, process

我创建了一个针对 Java.exe 文件的进程。该进程应该运行 Java.jar 服务器文件，并继续运行并提供输出反馈，直到服务器崩溃或我强行关闭它。一切正常.. 服务器正在运行.. 当我将 UseShellExecute 设置为 True 时，我可以看到黑色 CMD 窗口返回所有输出。但是当我将它设置为 false 并重定向输出时...... Window 是完全空白的（虽然服务器仍在运行）并且 OutputDataReceived 事件根本没有触发（我想我得到了它一次但那是当我关闭窗口，似乎 args 是空的），据我所知 StandardOutput.ReadToEnd() 也没有返回任何东西。为什么这个过程没有返回任何输出反馈？这是我的代码：

```
 gameServerProcess = new Process();
    gameServerProcess.StartInfo.UseShellExecute = false;
    gameServerProcess.StartInfo.RedirectStandardOutput = true;
    gameServerProcess.StartInfo.RedirectStandardInput = true;

    gameServerProcess.EnableRaisingEvents = true;
    gameServerProcess.Exited += new EventHandler(gameServer_WindowExit);

    window = new ServerWindow();
    gameServerProcess.OutputDataReceived += new DataReceivedEventHandler(window.server_recievedOutputStream);
    window.Show();

    gameServerProcess.StartInfo.FileName = @"D:\Program Files\Java\jdk1.6.0_12\bin\java.exe";
    gameServerProcess.StartInfo.WorkingDirectory = @"D:\Users\Zack\Desktop\ServerFiles\gameserver";
    gameServerProcess.StartInfo.Arguments = @"-Xmx1024m -cp ./../libs/*;l2jserver.jar net.sf.l2j.gameserver.GameServer";
    gameServerProcess.Start();
    gameServerProcess.BeginOutputReadLine(); 
```

我的“窗口”表单类代码应该接收带有输出数据的 DataReceivedEventArgs：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Diagnostics;

namespace MWRemoteServer
{
    public partial class ServerWindow : Form
    {
        private delegate void WriteOutputDelegate(string output);
        private WriteOutputDelegate writeOutput;

        public ServerWindow()
        {
            InitializeComponent();
            logBox.BackColor = Color.White;
            logBox.ForeColor = Color.Black;
            writeOutput = new WriteOutputDelegate(write);
        }

        public void server_recievedOutputStream(object sender, DataReceivedEventArgs args)
        {
            MessageBox.Show("Called window output!");
            if (args.Data != null)
            {
                BeginInvoke(writeOutput, new object[] { args.Data.ToString() });
            }
        }

        private void write(string output)
        {
            logBox.AppendText(output + Environment.NewLine);
        }
    }
} 
```

再次，该过程完全正常，并且 UseShellExecute 设置为 true 我可以看到它提供了我需要获取的所有信息。但是，当我将其设置为 false 时，它​​的空白似乎无法获取任何输出数据！

提前非常感谢你......我已经在这里待了好几个小时......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T09:46:36.483

你确定它写入标准输出吗？您是否尝试过检查标准错误？( `RedirectStandardError`/ `StandardError`/ `ErrorDataReceived`/ `BeginErrorReadLine`)。

如果它直接写入显示缓冲区（而不是 stderr/stdout），那么如果没有**大量**工作，它可能是不可能的。

# java - 如何获取覆盖 hashCode() 的对象的唯一 ID？

> ID：909843
> 
> 赞同：266
> 
> 时间：2009-05-26T09:42:02.450
> 
> 标签：java, identity, hashcode

当 Java 中的一个类没有覆盖**hashCode()**时，打印这个类的一个实例会给出一个很好的唯一编号。

Object 的 Javadoc 谈到了**hashCode()**：

> *在合理可行的情况下，由 Object 类定义的 hashCode 方法确实为不同的对象返回不同的整数。*

但是当类覆盖**hashCode()**时，我怎样才能得到它的唯一编号？

* * *

## 回答 #1

> 赞同：398
> 
> 时间：2009-05-26T09:46:41.660

[System.identityHashCode(yourObject)](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#identityHashCode%28java.lang.Object%29)将以整数形式给出 yourObject 的“原始”哈希码。不一定保证唯一性。Sun JVM 实现将为您提供与该对象的原始内存地址相关的值，但这是一个实现细节，您不应依赖它。

编辑：在汤姆下面的评论之后修改了答案。内存地址和移动对象。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2009-05-26T09:47:20.583

Object 的 javadoc 指定

> 这通常通过将对象的内部地址转换为整数来实现，但 JavaTM 编程语言不需要这种实现技术。

如果一个类覆盖了 hashCode，这意味着它想要生成一个特定的 id，这将（希望）具有正确的行为。

您可以使用[System.identityHashCode](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#identityHashCode(java.lang.Object))来获取任何类的 id。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-01-02T11:40:04.243

`hashCode()`方法不是为对象提供唯一标识符。而是将对象的状态（即成员字段的值）消化为单个整数。该值主要由一些基于哈希的数据结构（如地图和集合）使用，以有效地存储和检索对象。

如果您需要对象的标识符，我建议您添加自己的方法而不是覆盖`hashCode`. 为此，您可以创建如下所示的基本接口（或抽象类）。

```
public interface IdentifiedObject<I> {
    I getId();
} 
```

示例用法：

```
public class User implements IdentifiedObject<Integer> {
    private Integer studentId;

    public User(Integer studentId) {
        this.studentId = studentId;
    }

    @Override
    public Integer getId() {
        return studentId;
    }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-11-21T22:48:01.767

也许这种快速、肮脏的解决方案会奏效？

```
public class A {
    static int UNIQUE_ID = 0;
    int uid = ++UNIQUE_ID;

    public int hashCode() {
        return uid;
    }
} 
```

这也给出了正在初始化的类的实例数。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-01-08T14:32:53.977

如果它是一个可以修改的类，则可以声明一个类变量`static java.util.concurrent.atomic.AtomicInteger nextInstanceId`。（你必须以显而易见的方式给它一个初始值。）然后声明一个实例变量`int instanceId = nextInstanceId.getAndIncrement()`。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-12-09T21:22:15.540

我想出了这个解决方案，它适用于我在多个线程上创建对象并且可序列化的情况：

```
public abstract class ObjBase implements Serializable
    private static final long serialVersionUID = 1L;
    private static final AtomicLong atomicRefId = new AtomicLong();

    // transient field is not serialized
    private transient long refId;

    // default constructor will be called on base class even during deserialization
    public ObjBase() {
       refId = atomicRefId.incrementAndGet()
    }

    public long getRefId() {
        return refId;
    }
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-02-19T02:01:31.583

```
// looking for that last hex?
org.joda.DateTime@57110da6 
```

如果您在对对象`hashcode`执行 a 时查看 Java 类型，`.toString()`则底层代码是这样的：

```
Integer.toHexString(hashCode()) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-09-13T21:28:47.667

我遇到了同样的问题，到目前为止，我对任何答案都不满意，因为它们都不能保证唯一的 ID。

我也想打印对象 ID 以进行调试。我知道一定有办法做到这一点，因为在 Eclipse 调试器中，它为每个对象指定了唯一的 ID。

我提出了一个解决方案，即对象的“==”运算符仅在两个对象实际上是同一个实例时才返回true。

```
import java.util.HashMap;
import java.util.Map;

/**
 *  Utility for assigning a unique ID to objects and fetching objects given
 *  a specified ID
 */
public class ObjectIDBank {

    /**Singleton instance*/
    private static ObjectIDBank instance;

    /**Counting value to ensure unique incrementing IDs*/
    private long nextId = 1;

    /** Map from ObjectEntry to the objects corresponding ID*/
    private Map<ObjectEntry, Long> ids = new HashMap<ObjectEntry, Long>();

    /** Map from assigned IDs to their corresponding objects */
    private Map<Long, Object> objects = new HashMap<Long, Object>();

    /**Private constructor to ensure it is only instantiated by the singleton pattern*/
    private ObjectIDBank(){}

    /**Fetches the singleton instance of ObjectIDBank */
    public static ObjectIDBank instance() {
        if(instance == null)
            instance = new ObjectIDBank();

        return instance;
    }

    /** Fetches a unique ID for the specified object. If this method is called multiple
     * times with the same object, it is guaranteed to return the same value. It is also guaranteed
     * to never return the same value for different object instances (until we run out of IDs that can
     * be represented by a long of course)
     * @param obj The object instance for which we want to fetch an ID
     * @return Non zero unique ID or 0 if obj == null
     */
    public long getId(Object obj) {

        if(obj == null)
            return 0;

        ObjectEntry objEntry = new ObjectEntry(obj);

        if(!ids.containsKey(objEntry)) {
            ids.put(objEntry, nextId);
            objects.put(nextId++, obj);
        }

        return ids.get(objEntry);
    }

    /**
     * Fetches the object that has been assigned the specified ID, or null if no object is
     * assigned the given id
     * @param id Id of the object
     * @return The corresponding object or null
     */
    public Object getObject(long id) {
        return objects.get(id);
    }

    /**
     * Wrapper around an Object used as the key for the ids map. The wrapper is needed to
     * ensure that the equals method only returns true if the two objects are the same instance
     * and to ensure that the hash code is always the same for the same instance.
     */
    private class ObjectEntry {
        private Object obj;

        /** Instantiates an ObjectEntry wrapper around the specified object*/
        public ObjectEntry(Object obj) {
            this.obj = obj;
        }

        /** Returns true if and only if the objects contained in this wrapper and the other
         * wrapper are the exact same object (same instance, not just equivalent)*/
        @Override
        public boolean equals(Object other) {
            return obj == ((ObjectEntry)other).obj;
        }

        /**
         * Returns the contained object's identityHashCode. Note that identityHashCode values
         * are not guaranteed to be unique from object to object, but the hash code is guaranteed to
         * not change over time for a given instance of an Object.
         */
        @Override
        public int hashCode() {
            return System.identityHashCode(obj);
        }
    }
} 
```

我相信这应该确保在程序的整个生命周期中都有唯一的 ID。但是请注意，您可能不想在生产应用程序中使用它，因为它维护对您为其生成 ID 的所有对象的引用。这意味着您为其创建 ID 的任何对象都不会被垃圾回收。

由于我将其用于调试目的，因此我不太关心被释放的内存。

如果释放内存是一个问题，您可以修改它以允许清除对象或删除单个对象。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-07-24T03:44:43.363

只是从不同的角度增加其他答案。

如果您想重用“上面”的哈希码并使用您的类的不可变状态派生新的哈希码，那么对 super 的调用将起作用。虽然这可能/可能不会一直级联到 Object（即某些祖先可能不会调用 super），但它允许您通过重用来派生哈希码。

```
@Override
public int hashCode() {
    int ancestorHash = super.hashCode();
    // now derive new hash from ancestorHash plus immutable instance vars (id fields)
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-11-14T06:40:39.363

hashCode() 和 identityHashCode() 返回之间是有区别的。对于两个不相等（用 == 测试）的对象，o1、o2 hashCode() 可能是相同的。请参阅下面的示例，这是如何实现的。

```
class SeeDifferences
{
    public static void main(String[] args)
    {
        String s1 = "stackoverflow";
        String s2 = new String("stackoverflow");
        String s3 = "stackoverflow";
        System.out.println(s1.hashCode());
        System.out.println(s2.hashCode());
        System.out.println(s3.hashCode());
        System.out.println(System.identityHashCode(s1));
        System.out.println(System.identityHashCode(s2));
        System.out.println(System.identityHashCode(s3));
        if (s1 == s2)
        {
            System.out.println("s1 and s2 equal");
        } 
        else
        {
            System.out.println("s1 and s2 not equal");
        }
        if (s1 == s3)
        {
            System.out.println("s1 and s3 equal");
        }
        else
        {
            System.out.println("s1 and s3 not equal");
        }
    }
} 
```

# ruby - Ruby 路径管理

> ID：909855
> 
> 赞同：27
> 
> 时间：2009-05-26T09:44:30.947
> 
> 标签：ruby, relative-path

在 ruby​​ 程序中管理 require 路径的最佳方法是什么？

让我举一个基本的例子，考虑如下结构：

```
\MyProgram

\MyProgram\src\myclass.rb

\MyProgram\test\mytest.rb 
```

如果在我的测试中使用`require '../src/myclass'`，那么我只能从`\MyProgram\test`文件夹调用测试，但我希望能够从任何路径调用它！

我想出的解决方案是在所有源文件中定义以下行：

`ROOT = "#{File.dirname(__FILE__)}/.." unless defined?(ROOT)`然后总是使用`require "#{ROOT}/src/myclass"`

有更好的方法吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2010-09-10T13:31:07.803

从 Ruby 1.9 开始，您可以使用[require_relative](http://extensions.rubyforge.org/rdoc/classes/Kernel.html#M000039 "require_relative")来执行此操作：

```
require_relative '../src/myclass' 
```

如果您在早期版本中需要此功能，您可以根据[此 SO 注释](https://stackoverflow.com/questions/2681031/beginner-to-ruby-require-relative-problem/2681062#2681062)从扩展 gem 中获取它。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-26T11:32:20.823

这是一个稍微修改的方法：

```
$LOAD_PATH.unshift File.expand_path(File.join(File.dirname(__FILE__), "..", "src")) 
```

通过将源路径添加到 $LOAD_PATH（又名 $:)，您不必在需要代码时明确提供根等，即 `require 'myclass'`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-11-07T02:38:04.627

同样，噪音较小的恕我直言：

```
$:.unshift File.expand_path("../../src", __FILE__)
require 'myclass' 
```

要不就

```
require File.expand_path "../../src/myclass", __FILE__ 
```

在 (Debian) Linux 上使用 ruby​​ 1.8.7 和 1.9.0 进行测试 - 请告诉我它是否也适用于 Windows。

为什么标准库中没有内置更简单的方法（例如'use'、'require_relative'或sg）？更新：require_relative 从 1.9.x 开始就存在

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-01-03T17:02:56.733

使用以下代码要求特定文件夹中的所有“rb”文件（=> Ruby 1.9）：

```
path='../specific_folder/' # relative path from current file to required folder

Dir[File.dirname(__FILE__) + '/'+path+'*.rb'].each do |file|
  require_relative path+File.basename(file) # require all files with .rb extension in this folder
end 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-12-01T14:57:49.070

```
Pathname(__FILE__).dirname.realpath 
```

以动态方式提供绝对路径。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-26T11:38:22.933

sris 的答案是标准方法。

另一种方法是将您的代码打包为 gem。然后 ruby​​gems 将负责确保您的库文件在您的路径中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-11-12T12:11:12.990

这就是我最终得到的——一个 Ruby 版本的`setenv`shell 脚本：

```
 # Read application config                                                       
$hConf, $fConf = {}, File.expand_path("../config.rb", __FILE__)
$hConf = File.open($fConf) {|f| eval(f.read)} if File.exist? $fConf

  # Application classpath                                                         
$: << ($hConf[:appRoot] || File.expand_path("../bin/app", __FILE__))

  # Ruby libs                                                                     
$lib = ($hConf[:rubyLib] || File.expand_path("../bin/lib", __FILE__))
($: << [$lib]).flatten! # lib is string or array, standardize 
```

然后我只需要确保这个脚本在其他任何事情之前被调用一次，并且不需要接触各个源文件。

我在配置文件中放置了一些选项，例如外部（非 gem）库的位置：

```
# Site- and server specific config - location of DB, tmp files etc.
{
  :webRoot => "/srv/www/myapp/data",
  :rubyLib => "/somewhere/lib",
  :tmpDir => "/tmp/myapp"
} 
```

这对我来说效果很好，只需更改配置文件中的参数，我就可以在多个项目中重用 setenv 脚本。比 shell 脚本更好的选择，IMO。

# iphone - 为什么我必须最后调用 super -dealloc，而不是先调用？

> ID：909856
> 
> 赞同：30
> 
> 时间：2009-05-26T09:44:50.103
> 
> 标签：iphone, cocoa-touch, memory-management, uikit

正确的例子：

```
- (void)dealloc {
    [viewController release];
    [window release];
    [super dealloc];
} 
```

错误的例子：

```
- (void)dealloc {
    [super dealloc];
    [viewController release];
    [window release];
} 
```

Althoug 在几乎所有其他情况下，当覆盖一个方法时，我会首先调用 super 的方法实现，在这种情况下，Apple 总是在最后调用 [super dealloc]。为什么？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2009-05-26T10:10:06.497

它只是一个指导方针。之后可以调用其他指令`[super dealloc]`。但是您不能再访问超类的变量，因为它们在您调用时被释放`[super dealloc]`。在最后一行调用超类总是安全的。

如果 KVO 和依赖（触发）键依赖于已发布的成员变量，它们也会产生副作用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-26T09:51:39.593

我对 iPhone 编程一无所知，但我认为出于同样的原因，需要以相反的顺序调用析构函数。您要确保在调用超类之前清理所有“垃圾”。如果你反其道而行之，事情就会变得一团糟。例如，如果你的析构函数需要访问超级析构函数已经释放的内存：

```
class X {
    private Map foo;

    function __construct() {
        foo = new Map();
    }

    function __destruct() {
        foo.free;
    }
}

class Y extends X {
    function __construct() {
        super.__construct();
        map.put("foo", 42);
    }

    function __destruct() {
        super.__destruct();
        if (map.containsKey("foo")) {    // boooooooooom!
            doSomething();
        }
    }
} 
```

*您*可能不会在代码中遇到此问题，因为“您知道自己在做什么”，但不做此类事情是一种更安全且整体更好的做法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-26T15:07:12.683

[super dealloc] 正在释放对象使用的内存，包括指向 viewController 和 window 的指针。在释放变量后引用它们充其量是危险的。

看到[这个答案](https://stackoverflow.com/questions/562872/getting-a-segfault-excbadaccess-when-deallocating-variables/562885#562885)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-01-31T20:54:08.807

这是 [super dealloc] 必须放在最后的实际示例，否则对 removeFromRunLoop 的调用将导致崩溃。我不确定 NSOutputStream 的 removeFromRunLoop 内部发生了什么，但在这种情况下它似乎访问了“自我”。

设置：

```
[outputStream setDelegate:self];
[outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode]; 
```

交易地址：

```
- (void)dealloc {
    if (outputStream) {
        [outputStream close];
        [outputStream removeFromRunLoop:[NSRunLoop currentRunLoop]
                                forMode:NSDefaultRunLoopMode];
        [outputStream release];
        outputStream = nil;
    }
    delegate = nil;
    [super dealloc]; // must be last!
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-08-02T18:22:15.060

你实际上几乎`[super dealloc]`在最后，因为它释放了超类的变量并且它们不能再被访问。

一个例外是，如果您有一个 UITableViewController 的子类，它使用另一个类作为其表视图委托。在这种情况下，您必须在之后释放表视图委托，`[super dealloc]`因为表视图正在引用表视图委托，并且必须先释放表视图。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-08-06T14:00:28.707

[到最后一篇] 引用delegate的tableView难道不负责释放它自己的delegate吗？我认为它在设置时会保留它（因此您可以释放或自动释放它）并且它会自行处理？

至于 OP 问题，如果我正在构建，我将始终首先调用 super，如果我正在破坏，我将始终调用 super。我认为它是“我想要超级构建它想要的东西，这样我就可以在此基础上进行构建，并且我希望超级在我自己清理之后最后拆除。” 但实际上我使用的所有调用都在构造，但 dealloc 除外，所以这就是为什么你总是会在我的 dealloc 代码中看到它的原因。

# maven-2 - Maven 使用 SSH 将本地文件复制到远程服务器

> ID：909867
> 
> 赞同：63
> 
> 时间：2009-05-26T09:49:07.210
> 
> 标签：maven-2, ssh, deployment

Maven 可以使用 SSH 将本地文件复制到远程服务器吗？

我想在 Maven 配置文件中指定位置，并在每次执行部署阶段时将该文件（或多个文件）复制到服务器。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-09-10T16:51:05.593

maven-deploy-plugin 允许您配置部署阶段以使用 scp 部署到服务器。[文档](http://maven.apache.org/plugins/maven-deploy-plugin/examples/deploy-ssh-external.html)中有一个页面描述了如何完成。

我相信这将取代正常的部署而不是添加到它，所以它可能不是你所追求的。

如果您需要部署到传统的 Maven 存储库并将文件传递到远程服务器，则需要按照其他答案的建议使用 scp 任务。

在[这个答案](https://stackoverflow.com/questions/1405979/using-maven-for-deployment/1406397#1406397)中，我描述了如何配置 ftp 任务，scp 任务几乎相同，除了您可能需要添加密钥文件和密码属性（并且显然将任务名称从 ftp 更改为 scp）。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-03-23T11:05:36.660

看看[Maven Wagon 插件](http://www.mojohaus.org/wagon-maven-plugin/)

要使用简单的命令行手动尝试：`mvn org.codehaus.mojo:wagon-maven-plugin:1.0:upload -Dwagon.url=scp://username:userpassword@myserver -Dwagon.fromDir=target -Dwagon.includes=*.ear -Dwagon.toDir=/home/elisabetta`

在这两种情况下，请务必将 Wagon 的 SSH 扩展添加到您的 pom.xml：

```
<extensions>
    <extension>
        <groupId>org.apache.maven.wagon</groupId>
        <artifactId>wagon-ssh</artifactId>
        <version>2.8</version>
    </extension>
</extensions> 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-05-26T10:39:44.987

为什么不使用可以在 Maven 中运行的 Ant [SCP任务？](http://ant.apache.org/manual/Tasks/scp.html)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-08-11T15:30:01.840

*与PaoloC*相同的想法，使用带有 wagon-ssh 扩展名的**Maven Wagon 插件**，但在 pom 文件中配置并在指定阶段运行它，此示例将 war 文件复制到使用 SSH 的远程服务器：

```
<build>
  <plugins>
    <plugin>
      <groupId>org.codehaus.mojo</groupId>
      <artifactId>wagon-maven-plugin</artifactId>
      <version>1.0</version>
      <executions>
        <execution>
          <id>upload-to-myserver</id>
          <phase>deploy</phase>
          <goals>
            <goal>upload-single</goal>
          </goals>
          <configuration>
            <fromFile>${project.build.directory}/${project.build.finalName}.war</fromFile>
            <url>scp://username@myserver/path</url>
          </configuration>
        </execution>
      </executions>
    </plugin>
    <!-- other plugins ... -->
  </plugins>
  <extensions>
    <extension>
      <groupId>org.apache.maven.wagon</groupId>
      <artifactId>wagon-ssh</artifactId>
      <version>2.8</version>
    </extension>
  </extensions>
</build> 
```

`<phase>`标签是可选的。您可以使用以下命令仅运行上传执行：

```
mvn wagon:upload-single@upload-to-myserver 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-26T10:17:52.597

Maven 不是通用工具，它是使您的构建过程可重用的工具。我建议使用[嵌入式 antrun](http://maven.apache.org/plugins/maven-antrun-plugin/usage.html)构建步骤。在这一步中，您可以使用在 build.xml 中使用的普通 ant 语法来做任何事情。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-08-14T16:28:30.257

尽管这个问题并不新鲜，但我今天发现自己处于类似的情况。我的目标是在我必须通过隧道连接到的远程服务器上（通过另一台服务器）上传文件并运行命令。我设法为此打造了一个解决方案`ant`（再次可以从这里提到的 maven 触发）。

Ants`sshsession`任务仅创建一个可用于其中的任务的**隧道。**其中的任务不会自动在远程服务器上运行，但您可以将`sshexec`任务与**隧道**一起使用来实现这一点。此外，该`scp`任务现在可以通过隧道上传到远程服务器。这是一个例子：

```
<sshsession host="${jumphost}" port="22" username="${user}" password="${password}" trust="true">
    <localtunnel lport="${localTunnelPort}" rhost="${targethost}" rport="22"/>
    <sequential>
        <!-- run a command on the remote server (here mkdir) -->
        <sshexec host="localhost" port="${localTunnelPort}" username="${user.param}" password="${password.param}" command="mkdir ${home}/foobar" trust="true" />
        <!-- upload a file to the remote server -->
        <scp port="${localTunnelPort}" file="test_file.txt" todir="${user.param}:${password.param}@localhost:${home}/foobar/" trust="true" />
    </sequential>
</sshsession> 
```

# java - Windows 内存文件系统

> ID：909869
> 
> 赞同：8
> 
> 时间：2009-05-26T09:50:00.687
> 
> 标签：java, windows, filesystems, ramdisk

我有一个命令行可执行文件，需要在 Windows XP 上从 Java 运行。它使用文件作为输入和输出。但是我想避免文件IO的开销，所以我想到了一个内存RAM文件系统。

NetBSD 有`mount_mfs`.

你能推荐最方便的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-26T10:03:12.033

你还应该考虑你是否真的需要这个（过早的优化，yadda，yadda）。在所有现代操作系统上，文件系统 I/O 无论如何都会被缓存，因此经常使用的文件基本上与 RAM 磁盘一样快。

相关问题（有很多好的答案）： [用于编译的 RAM 驱动器 - 有这样的事情吗？](https://stackoverflow.com/questions/354254/ramdrive-for-compiling-is-there-such-a-thing)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-26T09:53:36.827

[Commons VFS](http://commons.apache.org/vfs/filesystems.html)为虚拟文件系统提供了方便的接口，包括内存文件系统。

# iphone - 如何制作不使用 nib 文件的基于视图的应用程序？

> ID：909870
> 
> 赞同：2
> 
> 时间：2009-05-26T09:50:30.483
> 
> 标签：iphone, cocoa-touch, uikit, nib

我在 Xcode 中选择了“基于视图”的应用程序模板。myProjectViewController.m 有以下代码：

```
/*
// Implement loadView to create a view hierarchy programmatically, without using a nib.
- (void)loadView {
}
*/ 
```

听起来不错。但是：模板生成了一个 myProjectViewController.xib 文件。我不明白的是：Xcode 如何将 ViewController 与那个 nib 连接起来？模板代码中写着“嘿，现在加载 myProjectViewController.xib！”的部分在哪里？我的意思是......我可以删除那个不需要的 nib 文件而不适当地设置其他任何东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T12:23:56.680

您可能希望参考[我](https://stackoverflow.com/questions/809898/loading-a-view-controller-view-hierarchy-programatically-in-cocoa-touch-without/812094#812094)对[这个问题](https://stackoverflow.com/questions/809898/loading-a-view-controller-view-hierarchy-programatically-in-cocoa-touch-without)的回答，我在其中描述了需要更改才能完全以编程方式生成视图层次结构的特定文件。此外，[该问题](https://stackoverflow.com/questions/616456/tutorial-on-not-using-interface-builder-for-iphone-gui-design)的答案中链接的一些参考资料可能对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T09:58:50.450

是的，您可以只删除 nib 并使用 NIb 中的类名称实现 IB 连接的方法，在 IB 中，您实际上将视图设置为视图的文件所有者。所以当你调用 initwithnib:"nibfilename" 它知道你在说什么。

这些元素使用 IBOutlets 和 IBActions 连接起来

# c# - 我可以从 WinForm 控件调用路由 WPF 命令吗

> ID：909871
> 
> 赞同：1
> 
> 时间：2009-05-26T09:50:37.440
> 
> 标签：c#, .net, wpf, winforms

在 Windows 窗体中，我引用了 WPF 包装器，它包装了 WinForm 控件。我想像往常一样处理 WinForm 控件中的事件，然后从 WPF 包装器调用适当的路由命令。可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T16:04:59.073

是的，只要您的命令目标是窗口主机。

# asp-classic - 在经典 ASP 的应用程序范围内使用字典对象

> ID：909877
> 
> 赞同：4
> 
> 时间：2009-05-26T09:52:11.290
> 
> 标签：asp-classic, dictionary, scope, scripting.dictionary

继[我的最后一个问题](https://stackoverflow.com/questions/909808/how-can-i-make-a-variable-static-or-global-in-classic-asp)之后，有人知道我如何在 Classic ASP 的应用程序范围内使用字典对象吗？您不能使用**Scripting.Dictionary** - 如果您尝试，您将看到类似于以下内容：

```
Application object error 'ASP 0197 : 80004005'
Disallowed object use /xxx.asp, line 2\. Cannot add object with apartment model behavior to the application intrinsic object. 
```

我在 (good ol') 4GuysFromRolla 上找到[了这篇文章](http://www.4guysfromrolla.com/aspfaqs/ShowFAQ.asp?FAQID=129)，但它指向[Microsoft 的免费 Lookup 组件](http://msdn.microsoft.com/workshop/server/downloads/lkuptbl.asp)和[Caprock Consulting 的免费 Dictionary 组件](http://www.caprockconsulting.com/comsoftware.asp)——两者都是死链接。

这篇文章清楚地解释了*为什么*不能在应用程序范围内使用**Scripting.Dictionary**，但我想知道是否有人知道免费的替代方案，或者我可以在哪里找到 4GuysFromRolla 提到的旧组件的副本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-07-16T06:13:06.260

我可以使用以下链接从 Caprock Consulting 下载字典组件：http://web.archive.org/web/20000619122506/http: [//www.caprockconsulting.com/data/CaprockDCT.zip](http://web.archive.org/web/20000619122506/http://www.caprockconsulting.com/data/CaprockDCT.zip)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-08-10T16:33:33.973

我有 LookupTable 组件，如果有兴趣可以提供给您。

但是，我注意到您可以在应用程序范围内使用 .NET HashTable，这可能对您有用。

这样做：

```
<object id="YOUR_VAR_NAME" progid="System.Collections.HashTable" runat="Server" scope="Application"></object> 
```

这将为您提供一个全局的、应用程序范围的 HashTable 对象。

不过要小心修改它，我遇到内存泄漏问题，最终应用程序会话处理变得不可靠（没有正确调用 SessionStart）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-08-21T18:30:11.743

我遇到了同样的问题，最后用我的字典内容提供了应用程序变量并添加了

```
 for each obj in application.Contents
        if Left(obj,6) = "urlLog" then
            application.Contents.Remove(obj)
        end if
    next 
```

杀死 application.end 上 global.asa 中的所有应用程序变量（您也可以使用，`Application.Contents.RemoveAll`但我听说它存在一些问题，它会留下一些变量并导致内存泄漏，即使我可以找到任何可靠的来源来证明它...

Caprock 字典对你有用吗？

# grails - 使用 - 在模板中标记

> ID：909885
> 
> 赞同：0
> 
> 时间：2009-05-26T09:53:59.743
> 
> 标签：grails

是否可以在模板中使用 <g:helpBallon> - 标记？当我插入它时，我得到一个空白页......我在哪里包含 javascript？

提前致谢 ！罗尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-30T18:13:14.497

您需要`<g:helpBalloons/>`在布局的标题中。

以下是一些不错的入门文档：

[http://www.grails.org/plugin/help-balloons](http://www.grails.org/plugin/help-balloons)

# python - 在 Python 中读取“原始”Unicode 字符串

> ID：909886
> 
> 赞同：2
> 
> 时间：2009-05-26T09:54:22.550
> 
> 标签：python, string, unicode, readability

我对 Python 很陌生，所以我的问题可能很愚蠢，但即使阅读了很多线程，我也没有找到问题的答案。

我有一个混合源文档，其中包含 html、xml、latex 和其他文本格式，并且我尝试将其转换为纯乳胶格式。

因此，我使用 python 将不同的命令识别为正则表达式，并用适当的 latex 命令替换它们。到目前为止，一切都很好。

现在我留下了一些“原始类型”的 Unicode 符号，例如希腊字母。不幸的是，手工完成的工作太多了。因此，我也在寻找一种聪明的方法来做到这一点。Python有没有办法识别/读取它们？我如何告诉 python 识别/读取例如 Pi 写成希腊字母？

我使用的代码的一个最小示例是：

```
fh = open('SOURCE_DOCUMENT','r')
stuff = fh.read()
fh.close()

new_stuff = re.sub('READ','REPLACE',stuff)
fh = open('LATEX_DOCUMENT','w')
fh.write(new_stuff)
fh.close() 
```

我不确定这是否是重要信息，但我使用的是在 Windows 上运行的 Python 2.6。

如果有人可以给我提示，我会非常高兴，至少在哪里可以找到相关信息或这可能如何工作。或者我是否完全错了，Python无法完成这项工作......

提前谢谢了。
干杯，
布丽塔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-26T10:09:09.230

您谈到“原始”Unicode 字符串。这意味着什么？Unicode 本身不是一种编码，但是有不同的编码来存储 Unicode 字符（阅读Joel 的[这篇文章](http://www.joelonsoftware.com/articles/Unicode.html)）。

Python 3.0 中的[open](http://docs.python.org/3.0/library/functions.html#open)函数采用一个可选`encoding`参数，可让您指定编码，例如 UTF-8（一种非常常见的 Unicode 编码方式）。在 Python 2.x 中，查看[codecs](http://docs.python.org/library/codecs.html)模块，它还提供了一个[开放](http://docs.python.org/library/codecs.html#codecs.open)函数，允许指定文件的编码。

**编辑：**或者，为什么不让那些糟糕的字符存在，并在顶部指定 LaTeX 文件的编码：

```
\usepackage[utf8]{inputenc} 
```

（我从未尝试过，但我认为它应该可以工作。不过，您[可能](http://termos.vemod.net/how-to-use-utf-8-encoding-with-latex)需要替换`utf8`为`utf8x`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T10:42:40.347

请首先阅读以下内容：

[每个软件开发人员绝对、绝对必须了解 Unicode 和字符集的绝对最低要求（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)

然后，回来问问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T10:39:30.430

您需要确定输入文档的“编码”。Unicode 可以编码数百万个字符，但文件只能包含 8 位值 (0-255)。因此，Unicode 文本必须以某种方式进行编码。

如果文档是 XML，它应该在第一行（encoding="..."；如果没有 "encoding" 字段，则 "utf-8" 是默认值）。对于 HTML，请查找“字符集”。

如果一切都失败了，请在编辑器中打开文档，您可以在其中设置编码（例如[jEdit](http://www.jedit.org/)）。尝试它们，直到文本看起来正确。然后将此值用作Python中的`encoding`参数。`codecs.open()`

# .net - 为什么在这里读取 StandardOut 失败？

> ID：909891
> 
> 赞同：0
> 
> 时间：2009-05-26T09:56:36.680
> 
> 标签：.net, vb.net

我目前正在尝试围绕 post-review 编写一个小包装器以自动发布，但是这个功能在涉及到时失败了 `Dim results As String = sOut.ReadToEnd()`，我不能；不知道为什么，

编辑：它不会产生错误，它似乎只是进入 ReadToEnd() 永远不会返回

我只是错过了一些明显的东西吗？

```
Function postReview() As String
            Dim psi As ProcessStartInfo = New System.Diagnostics.ProcessStartInfo("cmd.exe")
            psi.UseShellExecute = False
            psi.RedirectStandardOutput = True
            psi.RedirectStandardInput = True
            psi.RedirectStandardError = True
            Dim proc As Process = System.Diagnostics.Process.Start(psi)
            Dim strm As StreamReader = proc.StandardError
            Dim sOut As StreamReader = proc.StandardOutput
            Dim sIn As StreamWriter = proc.StandardInput
            MsgBox()
            sIn.WriteLine("cd " & IO.Directory.GetCurrentDirectory)

            sIn.WriteLine(Me.ToString)
            sIn.WriteLine("post-review.py -d --username=User --password=Pass")
            Dim results As String = sOut.ReadToEnd()

            sIn.WriteLine("exit")
            sIn.Close()
            sOut.Close()

            Return results

        End Function 
```

更多信息：实际命令正在工作，因为我可以看到它发布到审查委员会。但它似乎只是在等待 Stream 完成时陷入循环。

我试过 Read 和 Readline 但没有运气

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T10:05:46.630

我认为这可能是这条线给你带来了麻烦：

```
psi.UseShellExecute = True 
```

从[文档中](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardoutput.aspx)：

> 要使用 StandardOutput，必须将 ProcessStartInfo.UseShellExecute 设置为 false，并且必须将 ProcessStartInfo.RedirectStandardOutput 设置为 true

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T11:48:51.820

交换：

```
Dim results As String = sOut.ReadToEnd()
sIn.WriteLine("exit")
sIn.Close()
sOut.Close() 
```

和

```
sIn.WriteLine("exit")
Dim results As String = sOut.ReadToEnd()
psi.WaitForExit() 
```

我猜输出流还没有“结束”，因为你还没有退出。但是，退出后输出应该仍然可用。
而且您不需要关闭流，但您可能想等到进程退出（最后一行代码）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T10:08:07.233

请改用 Read 或 ReadLine。

# linux - 机顶盒黑客

> ID：909892
> 
> 赞同：-2
> 
> 时间：2009-05-26T09:57:31.983
> 
> 标签：linux, hardware, hardware-interface

我最近买了一个新的机顶盒，黑客精神召唤我用它来做事.. 我知道可能没有标准的程序来破解它/玩它仍然应该

所以我的问题是：

*   我需要具备哪些硬件知识才能基本了解机顶盒的工作原理。（任何方法）

*   如何与我的计算机建立接口？

*   什么外部硬件开发。我可能需要的套件/组件？

*   我如何确定它是否是一个 linux 机器？以后能得到关于linux内核版本的详细信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-26T10:01:46.967

回答你***所有***的问题：这取决于盒子。

简而言之，为您的硬件找到一个黑客社区并阅读。

# eclipse - Eclipse RCP：如何观察剪切/复制/粘贴命令的状态？

> ID：909895
> 
> 赞同：3
> 
> 时间：2009-05-26T09:59:15.240
> 
> 标签：eclipse, menu, command, toolbar, rcp

我目前正在努力使用以下 Eclipse RCP 命令：

*   `org.eclipse.ui.edit.cut`
*   `org.eclipse.ui.edit.copy`
*   `org.eclipse.ui.edit.paste`

我将它们用作工具栏中的命令贡献，但是当`handled`这些命令的“”状态发生变化时，UIElements（工具栏项）不会更新。

为了测试，我使用轮询机制来验证这些命令的状态是否真的根据当前关注的元素而改变，我发现处理程序保持不变，但处理程序的“已处理”状态正确更改，导致命令“已处理”状态也可以正确更改。

唯一的问题是，**这些状态更改中的任何一个都不会导致通知**（无论是在命令的`ICommandListener`还是在处理程序的`IHandlerListener`），所以 UIElements 不会得到更新。

下面是一些用于观察命令状态的测试代码：

```
ICommandService commandService = (ICommandService) PlatformUI.getWorkbench().getService(ICommandService.class);

final String commandId="org.eclipse.ui.edit.copy";
Command command = commandService.getCommand(commandId);
command.addCommandListener(new ICommandListener() {

    public void commandChanged (CommandEvent commandEvent) {
        System.out.println(">> Command changed: " + commandId);
    }
}); 
```

我是否遗漏了什么，或者这是剪切/复制/粘贴处理程序实现中的错误？有什么见解吗？

编辑： *命令一直处于启用状态，并且处理程序永远不会交换，只有处理程序的“ `handled`”状态（以及命令的“ `handled`”状态）根据哪个 ui 元素具有焦点而变化。但是，当此状态更改时没有通知。这会导致工具栏按钮始终处于启用状态，按下它们会导致`org.eclipse.core.commands.NotHandledException: There is no handler to execute for command`.*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-08T09:10:37.797

为剪切/复制/粘贴命令注册的处理程序是`org.eclipse.ui.internal.handlers.WidgetMethodHandler`. 此处理程序检查是否在当前显示器的焦点​​控件上声明了给定方法。执行时，该处理程序将使用反射调用该方法。

来自 WidgetMethodHandler 的片段：

```
 public final boolean isHandled() {
     return getMethodToExecute() != null;
 } 
```

将`getMethodToExecute()`使用 定位当前焦点控件`Display.getCurrent().getFocusControl()`，然后检查是否在其上声明了给定的触发方法。

诸如`org.eclipse.swt.widgets.Text`have`cut()`和方法之类的小部件`copy()`，`paste()`因此当焦点位于此类小部件上时，处理程序将为`isHandled()`.

但是，此处理程序不知道当前焦点控件何时更改（我认为甚至没有办法在显示器上观察到这一点），因此无法通知其动态“isHandled”状态的更改。

这导致剪切/复制/粘贴命令适用于弹出菜单，但在工具栏中使用时会出现很大问题，因为当处理程序没有通知时，它们的 UI 元素无法正确更新。

这让我要么不使用工具栏中的这些命令，要么使用轮询机制来更新 ui 元素（这也很糟糕且容易出错）。:-(

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-26T10:12:45.447

您的问题是您需要为非文本的任何内容注册处理程序，因为 Eclipse 需要知道如何将当前选择的“某事”复制到剪贴板。这就是处理程序所做的。[Eclipse wiki 中的这篇文章](http://wiki.eclipse.org/Platform_Command_Framework#Handlers)将帮助您开始如何创建和注册处理程序。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-06-08T01:49:36.853

我可能是错的，但问题的根源是处理程序始终处于启用状态。

请参阅[平台插件开发人员指南 > 程序员指南 > 插入工作台 > 使用命令的基本工作台扩展点 > 处理程序](http://help.eclipse.org/ganymede/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/workbench_cmd_handlers.htm)。

> `<activeWhen/>`和程序化核心表达式中的 表达式`plugin.xml`用于帮助确定处理程序激活的范围。例如，特定窗口、特定`Shell`、活动部件类型或活动部件。

```
 <extension
         point="org.eclipse.ui.handlers">
      ...
      <handler
            class="org.eclipse.ui.examples.contributions.view.SwapInfoHandler"
            commandId="org.eclipse.ui.examples.contributions.view.swap">
         <activeWhen>
            <reference
                  definitionId="org.eclipse.ui.examples.contributions.view.inView">
            </reference>
         </activeWhen>
         <enabledWhen>
            <count
                  value="2">
            </count>
         </enabledWhen>
      </handler>
      ... 
```

# c# - 如果发生未处理的异常，我需要关闭 WPF 应用程序吗？

> ID：909902
> 
> 赞同：0
> 
> 时间：2009-05-26T10:02:51.613
> 
> 标签：c#, wpf, application-shutdown

我有一个 WPF 应用程序，基本上 exe 是应用程序 UI 的加载程序，有时当发生未处理的执行时，会显示消息框，当我单击“确定”时它消失了，UI 消失了等等。exe 的实例仍然存在在那里，我需要一些机制，当发生未处理的异常时关闭 exe，因为我有检查多个实例的代码，因此用户必须杀死崩溃的实例。有什么建议或代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T10:07:34.583

您可以在 Application.DispatcherUnhandledException 事件中处理这些异常

# asp.net-mvc - ASP.NET MVC 单元测试

> ID：909909
> 
> 赞同：0
> 
> 时间：2009-05-26T10:04:47.413
> 
> 标签：asp.net-mvc, unit-testing

我想在 ASP.NET MVC 框架中尝试单元测试。但我不知道我必须选择哪个单元测试框架。

NUnit、xUnit.net、MbUnit。还是 Visual Studio 附带的单元测试框架，哪个更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T10:21:49.203

ASP.Net MVC 对框架没有任何特定要求，任何都可以正常工作。NUnit 是使用最广泛的，因此它是我的默认选择。

一旦你开始进行单元测试，其他一些框架会提供不同的高级特性，你可能想看看。

我不知道有人使用 MS 单元测试框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T18:07:46.453

如果您之前没有使用过任何测试框架，我建议您从[xUnit开始。](http://xunit.codeplex.com/)很难决定哪个框架更好，但我认为[xUnit](http://xunit.codeplex.com/)是 NUnit、MbUnit 和 MSTest 中“最现代的”。[从这篇文章](http://xunit.codeplex.com/Wiki/View.aspx?title=WhyDidWeBuildXunit)开始学习 xUnit ，然后[这个](http://blog.benhall.me.uk/2008/01/introduction-to-xunit.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-26T18:19:18.133

如果您对遵循 BDD 指南感兴趣，我强烈推荐使用 Moq 作为模拟框架的 xUnit.NET。这两者是当今可用的一些最具前瞻性和现代的单元测试框架，它们结合在一起构成了一个强大而灵活的单元测试平台。xUnit.NET 具有极强的可扩展性，因为它的 Fact 和 Trait 属性可以使用您自己的属性进行扩展，并且可以更改测试框架的行为以满足您的需求。

这种灵活性的一个很好的例子是 ObservationAttribute 和支持框架，它允许使用 xunit.net 进行 BDD 样式测试，可在此处找到：

[http://iridescence.no/post/Extending-xUnit-with-a-Custom-ObservationAttribute-for-BDD-Style-Testing.aspx](http://iridescence.no/post/Extending-xUnit-with-a-Custom-ObservationAttribute-for-BDD-Style-Testing.aspx)

我使用上面的 BDD 样式测试为我的 ASP.NET MVC 控制器创建了 Test-Class-Per-Unit 样式的 BDD 测试（以及我单元测试的所有其他内容。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-28T20:55:46.773

我正在使用 MSTest :) 所以现在你知道了一个 ;)

说真的，我认为 MSTest 是 TDD 入门的最佳框架。它是轻量级的，它可以生成你需要的所有东西，最重要的是，它集成在 Visual Studio 中......所以，你为什么不从 mstest 开始，然后你可以切换到高级框架没问题。

所以简而言之，我会推荐一个MSTest。

干杯

# c# - 如何找到已安装软件的执行路径

> ID：909910
> 
> 赞同：7
> 
> 时间：2009-05-26T10:05:10.313
> 
> 标签：c#, windows

如何在 c# 中找到已安装软件的执行路径，例如媒体播放器、vlc 播放器。我只需要找到他们的执行路径。如果我的 D 盘中安装了 vlc 播放器。如何从我的 c# 编码中找到 VLC.exe 的路径

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-26T10:19:53.450

使用 C# 代码，您可以通过以下方式找到一些可执行文件的路径：

```
private const string keyBase = @"SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths";
private string GetPathForExe(string fileName)
{
    RegistryKey localMachine = Registry.LocalMachine;
    RegistryKey fileKey = localMachine.OpenSubKey(string.Format(@"{0}\{1}", keyBase, fileName));
    object result = null;
    if (fileKey != null)
    {
        result = fileKey.GetValue(string.Empty);
        fileKey.Close();
    }

    return (string)result;
} 
```

像这样使用它：

```
string pathToExe = GetPathForExe("wmplayer.exe"); 
```

但是，您想要的应用程序很可能没有 App Paths 键。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-26T10:47:30.227

此方法适用于位于 Windows PATH 变量中定义的文件夹中的任何可执行文件：

```
private string LocateEXE(String filename)
{
    String path = Environment.GetEnvironmentVariable("path");
    String[] folders = path.Split(';');
    foreach (String folder in folders)
    {
        if (File.Exists(folder + filename))
        {
            return folder + filename;
        } 
        else if (File.Exists(folder + "\\" + filename)) 
        {
            return folder + "\\" + filename;
        }
    }

    return String.Empty;
} 
```

然后按如下方式使用它：

```
string pathToExe = LocateEXE("example.exe"); 
```

像 Fredrik 的方法一样，它只查找某些可执行文件的路径

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-27T18:46:00.157

我使用了 CurrentVersion\Installer\Folders 注册表项。只需输入产品名称即可。

```
private string GetAppPath(string productName)
    {
        const string foldersPath = @"SOFTWARE\Microsoft\Windows\CurrentVersion\Installer\Folders";
        var baseKey = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Registry64);

        var subKey = baseKey.OpenSubKey(foldersPath);
        if (subKey == null)
        {
            baseKey = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Registry32);
            subKey = baseKey.OpenSubKey(foldersPath);
        }
        return subKey != null ? subKey.GetValueNames().FirstOrDefault(kv => kv.Contains(productName)) : "ERROR";          
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-10T04:23:15.560

没有一个答案对我有用。经过几个小时的在线搜索，我能够成功获得安装路径。这是最终的代码。

```
public static string checkInstalled(string findByName)
    {
        string displayName;
        string InstallPath;
        string registryKey = @"SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall";

        //64 bits computer
        RegistryKey key64 = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Registry64);
        RegistryKey key = key64.OpenSubKey(registryKey);

        if (key != null)
        {
            foreach (RegistryKey subkey in key.GetSubKeyNames().Select(keyName => key.OpenSubKey(keyName)))
            {
                displayName = subkey.GetValue("DisplayName") as string;
                if (displayName != null && displayName.Contains(findByName))
                {

                    InstallPath = subkey.GetValue("InstallLocation").ToString();

                    return InstallPath; //or displayName

                }
            }
            key.Close();
        }

        return null;
    } 
```

你可以像这样调用这个方法

```
string JavaPath = Software.checkInstalled("Java(TM) SE Development Kit"); 
```

和繁荣。干杯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-26T10:11:04.013

看看[MsiEnumProductsEx](http://msdn.microsoft.com/en-us/library/aa370905(VS.85).aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-26T12:56:56.363

[这篇 stackoverflow.com 文章](https://stackoverflow.com/questions/24954/windows-list-and-launch-applications-associated-with-an-extension)描述了如何获取与特定文件扩展名关联的应用程序。

也许您可以使用这种技术来获取与某些扩展关联的应用程序，例如 avi 或 wmv - Medial Player 或在您的情况下为 VLC 播放器？

# winapi - 如何以编程方式确定 Windows 的当前默认代码页？

> ID：909913
> 
> 赞同：11
> 
> 时间：2009-05-26T10:06:07.957
> 
> 标签：winapi, character-encoding

我必须将 VB6 应用程序的字符串输出的编码转换为特定的编码。

问题是，我不知道字符串的编码，因为：

> 根据 VB6 文档，当访问某些 API 函数时，内部 Unicode 字符串会使用Windows的*默认代码页转换为 ANSI 字符串。*

因此，字符串输出的编码在不同的系统上可能不同，但我必须知道它才能执行转换。

如何使用 Win32 API 或 - 如果没有其他方法 - 通过读取注册表来读取默认代码页？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-28T16:52:49.463

[使用GetACP](http://msdn.microsoft.com/en-us/library/dd318070(VS.85).aspx)（用于返回默认代码页的 Win32 API 调用）可能会更简洁！（默认代码页通常称为“ANSI”）

```
int nCodePage = GetACP(); 
```

许多 API 调用（例如[`MultiByteToWideChar`](http://msdn.microsoft.com/en-us/library/dd319072(VS.85).aspx)）也接受常量值`CP_ACP`（零），这始终[意味着“使用系统代码页”](http://www.siao2.com/2005/01/06/347834.aspx)。因此，您实际上可能不需要知道当前的代码页，这取决于您想用它做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-26T10:19:12.297

[GetSystemDefaultLCID()](http://msdn.microsoft.com/en-us/library/dd318121(VS.85).aspx)为您提供系统区域设置。

如果 LCID 不够，而您确实需要代码页，请使用以下代码：

```
 TCHAR szCodePage[10];
  int cch= GetLocaleInfo(
    GetSystemDefaultLCID(), // or any LCID you may be interested in
    LOCALE_IDEFAULTANSICODEPAGE, 
    szCodePage, 
    countof(szCodePage));

  nCodePage= cch>0 ? _ttoi(szCodePage) : 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T16:46:33.593

这对我有用，谢谢，但可以更简洁地写成：

```
UINT nCodePage = CP_ACP;
const int cch = ::GetLocaleInfo(LOCALE_SYSTEM_DEFAULT,
     LOCALE_RETURN_NUMBER|LOCALE_IDEFAULTANSICODEPAGE,
     (LPTSTR)&nCodePage, sizeof(nCodePage) / sizeof(_TCHAR) ); 
```

# sql - 更优雅的 SQL？

> ID：909923
> 
> 赞同：2
> 
> 时间：2009-05-26T10:09:28.590
> 
> 标签：sql, database, oracle

下面的查询功能完善，查询单个表以查找通过`userid`序号列添加的最后 50 个用户名。

到目前为止的逻辑是：找出最高的用户ID；从中减去 50；将用户名拉回更大的地方。

然而，它看起来并不优雅，并且使用两个子查询来实现它的目标：

```
SELECT username  
FROM table  
WHERE userid IN  
  (SELECT userid  
   FROM table  
   WHERE userid >  
    (SELECT MAX(userid) -50  
     FROM table)) 
```

有没有办法减少这种嵌套？更高效？更优雅？任何帮助将不胜感激，因为这不是最好的方法！

干杯，非常感谢
阿里

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-26T10:19:14.823

提供的答案是正确的。您可以使用 ROWNUM 选择 TOP-N 样式的结果。

不过请注意，rownum 在谓词之后但在 ORDER BY 之前分配给查询结果。尝试以下操作：

```
SELECT username  
FROM 
  (SELECT username  
   FROM table  
   ORDER BY userid DESC)
WHERE rownum <= 50 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-26T10:14:14.693

```
SELECT * FROM (SELECT UserName FROM Table ORDER BY UserID DESC) 
WHERE RowNum <= 50 
```

...我想...自从我摆弄 Oracle 以来已经有一段时间了。

这与大致相同

`SELECT Top 50`在 SQL Server 中

和

`SELECT ... LIMIT`50 在 MySql 中

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-26T10:32:21.460

您可以使用 ROW_NUMBER() 根据其在有序列表中的位置为每一行分配一个数字。例如，以 1 开始对最高用户 ID 的行进行编号：

```
SELECT username
FROM (
    SELECT 
         ROW_NUMBER() OVER (ORDER BY user_id DESC) AS RowNr,
         *
    FROM users
) sub
WHERE RowNr < 50 
```

与问题中的查询不同，如果用户 ID 不连续，这将起作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-26T10:12:25.463

纯粹为了美观，我使用[SQLinForm](http://www.sqlinform.com/)，它是一个 Java 小程序，可以很好地格式化你的 SQL。它也很灵活，有很多选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-26T10:12:13.437

取决于您使用的数据库，但请尝试以下操作：

oracle：从表中选择用户名，其中rownum < 50 order by userid；

postgresql：按用户ID限制10从表顺序中选择用户名；

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-26T10:12:49.033

怎么样：

```
SELECT username FROM table ORDER BY userid DESC LIMIT 50 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-26T10:14:06.817

如果您在用户表中有一个 DateCreated 字段，您可以像这样进行查询：

```
SELECT TOP 50 username
FROM table 
ORDER BY DateCreated DESC 
```

# c++ - Qt：mouseMoveEvent 并干扰子对象的 hoverEnterEvent

> ID：909928
> 
> 赞同：4
> 
> 时间：2009-05-26T10:11:12.720
> 
> 标签：c++, qt, hover, qgraphicsview, mousemove

我`QGraphicsView`用来创建一种电路编辑器，其中有元素，有连接器。应该可以用电线连接这些连接器。但是，我有一个问题，当我从一个连接器拖动到另一个连接器时，Qt 抓住鼠标，而其他连接器停止接收`hoverEnterEvent`. 顺便说一句，在悬停连接器上调整大小，因此更容易击中它们。

再一次，是否可以在拖动时不抓住鼠标？

我在 Windows 上使用过 Qt 4.5。

根据要求，这里有一些来源： http: [//pastebin.com/m422b9495](http://pastebin.com/m422b9495)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-10-10T11:16:16.433

我认为您需要将[交互模式](https://doc.qt.io/qt-5/qgraphicsview.html#interactive-prop)设置为false。

另请参阅[DragMode](https://doc.qt.io/qt-5/qgraphicsview.html#DragMode-enum)

> 滚动手拖
> 
> > 光标变为指向手，拖动鼠标将滚动滚动条。此模式适用于交互和非交互模式。
> 
> 橡皮筋拖动
> 
> > 将出现一条橡皮筋。拖动鼠标将设置橡皮筋几何图形，并选中所有被橡皮筋覆盖的项目。非交互式视图禁用此模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-07T03:43:32.953

在拖动操作期间更改鼠标悬停行为有点典型。通常响应鼠标移动的小部件在拖动过程中往往不响应，除非它们可以接收相关的拖放。所以通常的悬停事件被抑制。（检查小部件是否接受一些放置是不够的，因为问题是小部件是否可以接受这种放置。）除了悬停事件之外，尝试使用拖动的进入和离开事件来调整连接器的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-18T13:06:00.147

您可以在源项中使用 mouseMoveEvent 来检查光标何时位于目标项上。

例如：

```
def mouseMoveEvent(self, event):
    item = self.scene().itemAt(event.scenePos(), self.scene().views([0].transform())

    if isinstance(item, NodeConnectionGraphicItem):
        if self.item_over_drag is None:
            self.item_over_drag = item
            item.highlighted_mouse_over = True
            ...
            item.update()
    elif self.item_over_drag is not None:
        self.item_over_drag.highlighted_mouse_over = False
        self.item_over_drag.update()
        self.item_over_drag = None 
```

# python - 将获取请求更改为 python 中的帖子？

> ID：909929
> 
> 赞同：0
> 
> 时间：2009-05-26T10:11:19.817
> 
> 标签：python, forms, post, get

我有这个-

> en.wikipedia.org/w/api.php?action=login&lgname=user&lgpassword=password

但它不起作用，因为它是一个获取请求。这个发布请求版本会是什么？

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-26T10:17:23.940

POST 请求的变量在 HTTP 标头中，而不是在 URL 中。检查[urllib](http://docs.python.org/library/urllib.html)。

编辑：试试这个（我从[这里](http://www.voidspace.org.uk/python/articles/urllib2.shtml)得到的）：

```
import urllib
import urllib2

url = 'en.wikipedia.org/w/api.php'
values = {'action' : 'login',
          'lgname' : 'user',
          'password' : 'password' }

data = urllib.urlencode(values)
req = urllib2.Request(url, data)
response = urllib2.urlopen(req)
the_page = response.read() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-26T10:34:21.003

```
params = urllib.urlencode({'action' : 'login', 'lgname' : 'user', 'lgpassword' : 'password'})
response = urllib.urlopen("http://en.wikipedia.org/w/api.php", params) 
```

可以在[此处](http://docs.python.org/library/urllib.html)找到有关 urllib 的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T10:23:00.573

由于您的示例使用 PHP，请使用 $_REQUEST，它包含 $_GET 和 $_POST 的内容。

# sql - SQL Server 使用 OPENROWSET 导出到 Excel

> ID：909933
> 
> 赞同：4
> 
> 时间：2009-05-26T10:11:45.137
> 
> 标签：sql, sql-server, excel, export-to-excel, openrowset

我使用以下语句成功导出到 excel：

```
insert into OPENROWSET('Microsoft.Jet.OLEDB.4.0', 
'Excel 8.0;Database=C:\template.xls;', 
'SELECT * FROM [SheetName$]') 
select * from myTable 
```

是否有任何标准方法可以使用此模板为 excel 工作表指定一个新名称，以便模板永远不会被写入，或者我是否必须想出一些解决方法？

在人们的体验中，最好的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-26T11:25:52.570

您必须使用动态 SQL。`OPENROWSET`etc 只允许文字作为参数。

```
DECLARE @myfile varchar(800)

SET @myfile = 'C:\template.xls'

EXEC ('
insert into OPENROWSET(''Microsoft.Jet.OLEDB.4.0'', 
''Excel 8.0;Database=' + @myfile + ';'', 
''SELECT * FROM [SheetName$]'') 
select * from myTable
') 
```

> 请记住：路径是相对于 SQL Server 运行的位置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-11-28T00:59:31.563

您不能先复制您的模板，然后将副本的文件名传递给 OPENROWSET 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-29T03:54:49.707

您可以在一个位置使用模板，在其他位置使用数据文件。当您运行脚本时，它将删除旧文件并生成一个新的数据文件。

```
 EXEC xp_cmdshell 'del D:\template.xls'
 EXEC xp_cmdshell 'copy C:\template.xls D:\template.xls'

 INSERT INTO OPENROWSET('Microsoft.Jet.OLEDB.4.0', 
 'Excel 8.0;Database=D:\template.xls;', 
 'SELECT * FROM [SheetName$]') 
  SELECT * FROM myTable 
```

# java - 休眠可以用空格映射 EnumTypes 吗？

> ID：909949
> 
> 赞同：5
> 
> 时间：2009-05-26T10:15:25.487
> 
> 标签：java, hibernate, jpa

有一个休眠映射遗留数据库我想使用 EnumTypes 将包含带有空格的字符串常量的某些列映射到某个 Enum 类。

映射：

```
@Entity
@Table(name = "OPERATOR")
public class Operator {   
    @Id
    @Column(name = "ID")
    private Long id;
    ...

    @Enumerated(EnumType.STRING)
    @Column(name = "STATUS")
    private Status status;
    ...
}

public enum Status {
    OPERATOR_CREATED("Operator created"),
    ACTIVE("Active"),
    END_DATED("End dated");

    private String name;

    Status(String status) {
       name = status;
    }
} 
```

如您所见，我们不能将数据库值直接用作枚举名称，因为它们中有空格。

我想知道是否可以为此使用枚举？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-26T14:39:55.000

查看[hibernate.org](https://www.hibernate.org/272.html)`GenericEnumUserType`中的描述（在“灵活解决方案”下）

修改`Status`如下：

```
public enum Status 
{
    OPERATOR_CREATED("Operator created"),
    ACTIVE("Active"),
    END_DATED("End dated");

    private String name;

    Status(String status) 
    {
       name = status;
    }

    public String toString()
    {
       return name;
    }

    public Status fromString( String value )
    {
        if ( "Operator created".equals( value ) 
        {
            return OPERATOR_CREATED;
        }
        //etc
    }
} 
```

现在`@Type`在您的实体上使用注释。

```
@Entity
@Table(name = "OPERATOR")
public class Operator {   
    @Id
    @Column(name = "ID")
    private Long id;
    ...

    @Column(name = "STATUS", columnDefinition = "VARCHAR(31)", nullable = false )
    @Type( type = "my.package.GenericEnumUserType",
           parameters = {
        @Parameter( name = "enumClass", value =  "my.package.Status" ),
        @Parameter( name = "identifierMethod", value = "toString" ),
        @Parameter( name = "valueOfMethod", value = "fromString" ) } )
    private Status status;
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-27T21:58:13.823

我有同样的情况，尝试使用`replace`函数，如下所示：

```
@ColumnTransformer(read = "replace(status::varchar, ' ', '')", write = "replace(?, 'End', 'End ')::status") 
```

您有下划线，因此需要对其进行一些修改。

`regexp_replace`如果有多个带空格的枚举值，也可以很方便。

注意，我使用的是 postgresql 9.6

# c# - 使用 C# 哪个更快 - System.Convert.ToString(objThatIsString) 或 (string)objThatIsString？

> ID：909951
> 
> 赞同：4
> 
> 时间：2009-05-26T10:15:45.877
> 
> 标签：c#, string

或 objThatIsString.ToString() 正如在 aswers 中指出的那样..更快而不是更明智..

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-26T14:41:34.017

@thijs：这是一个快速测试：

```
public class ToStringTest
{
    private object mString = "hello world!";
    Stopwatch sw = new Stopwatch();
    private List<long> ConvertToStringTimes = new List<long>();
    private List<long> ToStringTimes = new List<long>();
    private List<long> CastToStringTimes = new List<long>();

    public ToStringTest()
    {

        for (int i = 0; i < 100000; i++)
        {
            sw.Start();
            ConvertToString();
            sw.Stop();
            ConvertToStringTimes.Add(sw.ElapsedTicks);
            sw.Reset();

            sw.Start();
            ToString();
            sw.Stop();
            ToStringTimes.Add(sw.ElapsedTicks);
            sw.Reset();

            sw.Start();
            CastToString();
            sw.Stop();
            CastToStringTimes.Add(sw.ElapsedTicks);
            sw.Reset();    
        }
        Console.WriteLine("Average elapsed ticks after converting {0} strings",ConvertToStringTimes.Count);
        Console.WriteLine("ConvertToString: {0} ticks", ConvertToStringTimes.Average() );
        Console.WriteLine("ToString: {0} ticks", ToStringTimes.Average());
        Console.WriteLine("CastToString: {0} ticks",  CastToStringTimes.Average());
    }

    private string ConvertToString()
    {
        return Convert.ToString(mString);
    }

    public override string ToString()
    {
        return mString.ToString();
    }

    public string CastToString()
    {
        return (string) mString;
    }
} 
```

Results in:

Average elapsed ticks after converting 100000 strings

ConvertToString: 611.97372 ticks

ToString: 586.51461 ticks

CastToString: 582.25266 ticks

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-05-26T10:20:49.767

除了运行时类型检查外，直接强制转换不需要做任何检查——我希望*强制*转换更快。

您可能还想考虑`objThatIsString.ToString()`；因为 (for `string`) 这只是`return this;`，它应该很快——当然比`Convert.ToString`. 然后是运行时类型检查和虚拟调用之间的竞争；实际上，两者都非常非常快。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-26T10:21:37.567

演员阵容更快。

最终`Convert.ToString`会在一些开销后进行强制转换。它实际上是以尝试将其强制转换为 的形式进行的`IConvertible`，然后`ToString`在其上调用虚拟方法。因此，实际转换为`String`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-26T10:17:21.817

演员`(string)obj`应该更快。Convert 类实际上转换了不同类的对象，在这种情况下会变慢。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-26T10:51:00.987

有句谚语“数字说明一切”。这意味着您可以测量它，而不是假设某些东西！

因此，打包一个测试应用程序，运行您的测试并验证结果！

真正的问题可能是：我如何衡量哪种方式更快？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-26T10:20:00.987

我认为这`(string) objThatIsString`更快，因为编译器将能够在编译时进行这种转换。

然而，Jeff Atwood 认为它毕竟不重要（[编码恐怖：微优化剧院的悲惨悲剧](http://www.codinghorror.com/blog/archives/001218.html)）

# jquery - JQuery IE 生涩幻灯片动画

> ID：909955
> 
> 赞同：6
> 
> 时间：2009-05-26T10:16:37.857
> 
> 标签：jquery, internet-explorer

我有以下代码来为 div 的显示/隐藏设置动画。

```
$(".headerClosed, .headerOpen").live("click", function(){
  $(this).next().slideToggle("slow");
} 
```

这将显示和隐藏具有以下标记的 div：

```
<div class="details">
  <p>Date</p>
  <p>Text</p>
</div> 
```

问题出在 IE 中（惊喜，惊喜！），当 div 向下滑动时，动画是平滑的，直到结束时它猛拉。我知道这是由于 div 的填充/边距设置。

如果我使用 <div> 而不是 <p> 则动画是平滑的，但只要我向 <div> 添加任何填充或边距，动画就会抖动。如果 padding 和 margin 设置让它变得很奇怪，你怎么能滑下一个漂亮的带有间距的 div？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-12-23T10:25:21.897

您的利润可能正在崩溃。当您将`float`,`overflow: auto`或`overflow: hidden`应用于滑动元素时，不应再发生这种情况。

jQuery`overflow: hidden`在动画期间设置，因此边距不会塌陷。动画完成后，此属性将被删除。再次崩溃的边缘`<p>`，因此你在最后得到了一点生涩的跳跃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-26T10:27:03.000

将 div 包裹在另一个 div 中。将 padding/margin 添加到内部 div，并在外部 div 上调用动画。

```
<div class="details">
   <div class="hasMargins">
    <p>Date</p>
     <p>Text</p>
   </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T10:56:34.953

我遇到了同样的问题，我所做的是在幻灯片期间为边距和填充设置动画：

```
$(this).next().slideToggle("slow");
$(this).next().animate({ margin: "XXpx", padding: "XXpx" }, "slow"); 
```

将它们都设置为慢将确保它们同时完成。

# java - 如何将两个 FOR 合二为一

> ID：909956
> 
> 赞同：3
> 
> 时间：2009-05-26T10:16:54.393
> 
> 标签：java

这可能很愚蠢，但我想知道是否可能，让我们从 5x5 矩阵开始

```
int[][] x = new int[5][5];      
Random rg = new Random(); 
```

现在让我们用伪随机信息填充它

```
for(int i=0;i<5;i++){
    for(int j =0; j<5;j++){
        x[i][j] = rg.nextInt(); 
    }           
} 
```

但是我怎样才能用一个 Single for 做到这一点呢？

```
for(int i=0, j=0; i<5; (j==5?i++, j=0:j++){
    x[i][j] = rg.nextInt();
} 
```

这不起作用:(

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-05-26T10:18:44.233

您需要从单个索引计算行和列，然后：

```
for(int i = 0; i < 5 * 5; i++)
{
   int row = i / 5;
   int column = i % 5;
   x[row][column] = rg.nextInt();
} 
```

/ 和 % 的使用是经典的，在这里：当您遍历矩阵的索引时，除法用于确定您在哪一行。余数 (%) 即为列。

这个华丽的 ASCII 艺术展示了 1 维索引如何位于 2D 矩阵中：

```
 0  1  2  3  4
 5  6  7  8  9
10 11 12 13 14
15 16 17 18 19
20 21 22 23 24 
```

应该清楚的是，对于第一行中的任何值，该值除以 5 就是行索引本身，即它们都是 0。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-26T10:24:07.780

你真的不会从中获得任何好处。 **保持你的代码可读**。实际上，将建议的乘法和除法展开比循环更密集。（乘除和 mod 实际上是 ALU 中的一组复杂指令）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-26T10:23:03.490

另一种方法是：

```
int i,j;
for (i=0,j=0; i<5 && j<5; i = (i==4 ? 0 : i+1), j = (i==4 ? j+1 : j))
{
   x[i][j] = rg.nextInt();
} 
```

虽然，我更喜欢 unwind 的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-26T16:44:22.723

我很好奇，做了一个基准测试。

对于 Linux 上的 Suns HotSpot 64 服务器 jvm，嵌套循环和展开循环或多或少都一样快，并且几乎与迭代 [size*size] 的线性数组一样快。展开的循环实际上比嵌套循环慢，可能是因为它做了更多的数学运算。

但是，在 Windows 上的 IBM 的 jdk 1.5 32 位上，嵌套循环要慢 10 倍以上。

虽然，我不确定在这种情况下是编译器还是 jvm 很重要，较慢的测试是使用 IBM 的 RAD 编译的，它比 eclipse 3.4 早了一年

因此，用这些优化来搞乱你的代码的唯一原因是，如果你被困在一个带有旧 jvm 和编译器的“企业”平台上，这真的非常关键。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-26T18:39:48.997

一旦热点编译器运行它们几次，嵌套循环将非常快。请参阅[这篇优秀的文章以获得解释](http://www.javaspecialists.eu/archive/Issue158.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-08T07:17:27.377

最短的解决方案

```
int i = 0,j=0;
 for(;j<5;j+=i==4?1:0,i++){
    if(i==5)
       i=0;
    x[j][i] = rg.nextInt();

  } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-05-26T10:21:20.343

```
 int q = 5, r= 5;
 int [][] x = new int [q][r]

for(int i = 0; i < q * r; i++)
{
    int xaxis = i / q;
    int yaxis = i / r;

    x[xaxis][yaxis] = rg.nextInt();
} 
```

虽然我不知道你为什么要......你仍然有相同数量的迭代，这是恕我直言更难阅读并且需要更多的数学计算才能运行，所以如果你分析它可能会更慢

# linq - 使用 LINQ to SQL 更新

> ID：909960
> 
> 赞同：44
> 
> 时间：2009-05-26T10:18:32.097
> 
> 标签：linq, linq-to-sql

如何根据 LINQ to SQL 中的特定 ID 更新记录？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2009-05-26T10:25:07.277

LINQ 是一个查询工具（Q = Query）——所以除了通过（面向对象的）数据上下文（在 LINQ-to-SQL 的情况下）之外，没有神奇的 LINQ 方法可以只更新单行。要更新数据，您需要将其取出、更新记录并提交更改：

```
using(var ctx = new FooContext()) {
    var obj = ctx.Bars.Single(x=>x.Id == id);
    obj.SomeProp = 123;
    ctx.SubmitChanges();
} 
```

或者编写一个在 TSQL 中执行相同操作的 SP，并通过数据上下文公开该 SP：

```
using(var ctx = new FooContext()) {
    ctx.UpdateBar(id, 123);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-26T10:25:24.970

在没有更详细信息的情况下：

```
using(var dbContext = new dbDataContext())
{
    var data = dbContext.SomeTable.SingleOrDefault(row => row.id == requiredId);
    if(data != null)
    {
        data.SomeField = newValue;
    }
    dbContext.SubmitChanges();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T05:51:24.683

```
 DataClassesDataContext dc = new DataClassesDataContext();

 FamilyDetail fd = dc.FamilyDetails.Single(p => p.UserId == 1);

 fd.FatherName=txtFatherName.Text;
        fd.FatherMobile=txtMobile.Text;
        fd.FatherOccupation=txtFatherOccu.Text;
        fd.MotherName=txtMotherName.Text;
        fd.MotherOccupation=txtMotherOccu.Text;
        fd.Phone=txtPhoneNo.Text;
        fd.Address=txtAddress.Text;
        fd.GuardianName=txtGardianName.Text;

        dc.SubmitChanges(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-26T10:23:34.130

```
AdventureWorksDataContext db = new AdventureWorksDataContext();
db.Log = Console.Out;

// Get hte first customer record
Customer c = from cust in db.Customers select cust where id = 5;
Console.WriteLine(c.CustomerType);
c.CustomerType = 'I';
db.SubmitChanges(); // Save the changes away 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-05-02T20:17:37.327

一周前我找到了解决方法。您可以使用带有“ `ExecuteCommand`”的直接命令：

```
MDataContext dc = new MDataContext();
var flag = (from f in dc.Flags
                   where f.Code == Code
                   select f).First();
_refresh = Convert.ToBoolean(flagRefresh.Value);
if (_refresh)
{
    dc.ExecuteCommand("update Flags set value = 0 where code = {0}", Code);
} 
```

在`ExecuteCommand`语句中，您可以直接发送查询，其中包含您要更新的特定记录的值。

> value = 0 --> 0 是记录的新值；
> 
> code = {0} --> 是您将发送过滤器值的字段；
> 
> 代码 --> 是该字段的新值；

我希望这个参考有帮助。

# c# - c# Sql SiteMap Provider security Trimming 不起作用

> ID：909977
> 
> 赞同：1
> 
> 时间：2009-05-26T10:23:24.270
> 
> 标签：c#, sql, sitemap, security-trimming

当我使用 web.sitemap 时，菜单上的安全修剪工作正常。现在我已经切换到 Sql 站点地图提供程序，安全调整刚刚停止工作。

```
 <siteMap enabled="true" defaultProvider="AspNetSqlSiteMapProvider">
        <providers>
            <add name="AspNetSqlSiteMapProvider" type="SqlSiteMapProvider" securityTrimmingEnabled="true" connectionStringName="SiteMapConnectionString" sqlCacheDependency="SiteMapDatabase:SiteMap"/>
        </providers>
    </siteMap> 
```

我必须编辑 proc_GetSiteMap 以按正确的排序顺序返回我的菜单项，但它会返回站点地图表中的所有相关数据（包括角色）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-11-02T11:39:05.813

您是否限制了对应使用 web.config 文件限制的文件夹的访问。

例如：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.web>
        <authorization>
          <allow roles="Administrator" />
          <deny roles="user"/>
        </authorization>
    </system.web>
</configuration> 
```

在搜索时发现了一个链接，您也可以看看它： [http ://www.mytakeon.net/post/2006/09/The-SQL-SiteMap-Provider-and-trimming-by-roles-%28originally-posted -2006-09-20%29.aspx](http://www.mytakeon.net/post/2006/09/The-SQL-SiteMap-Provider-and-trimming-by-roles-%28originally-posted-2006-09-20%29.aspx)

# java - 编码时是否有可用于扫描的 IDE 插件？

> ID：909979
> 
> 赞同：0
> 
> 时间：2009-05-26T10:23:38.373
> 
> 标签：java, eclipse, plugins

可以使用 Fortify 等工具与 IDE 集成以扫描源代码以查找安全漏洞。但我期望的是像 eclipse 这样的 IDE 插件，它应该在输入代码时检查漏洞。（可能，对于 Java 程序，对于每个分号 (;)，它应该检查漏洞）。如果该工具建议在旅途中进行修复，那就太好了。以便开发人员可以修复漏洞，例如修复eclipse中的编译问题。与运行完整的代码扫描、检查漏洞、修复漏洞并再次扫描整个代码库相比，这确实会大大减少开发人员的时间。

市场上是否已有此类产品？如果没有，开发这样的东西是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T10:28:39.063

[FindBugs](http://findbugs.sourceforge.net/)可能以类似的方式工作，我已将它设置为每次编译新文件时运行，它会警告一些有趣的潜在错误。我所知道的唯一一个在您键入时运行的插件是[Checkstyle](http://checkstyle.sourceforge.net/)，所以也许有一个类似的插件可以检查安全漏洞？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-07T19:21:01.030

Cigital.com 他们有一个在“拼写检查”模式下工作的插件。当您键入时，它将突出显示漏洞代码。例如 SQL 注入、XSS 等。它工作得很好，不会像其他插件那样占用你的机器资源。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-26T10:32:23.177

您还可以查看 Ounce Labs 和 Coverity ...

# c# - 容易吗？在 C# 中使用变量访问对象的属性

> ID：909981
> 
> 赞同：1
> 
> 时间：2009-05-26T10:23:45.143
> 
> 标签：c#, dynamic

> **可能重复：**
> [属性名称并需要其值](https://stackoverflow.com/questions/798567/property-name-and-need-its-value)

你好，

这对大多数人来说应该很容易。我想通过使用变量值访问对象中的普通变量（比如说示例）。

例如：我有一个包含变量名称列表的数组，我想通过使用它们从对象中获取信息。显然这是错误的：

```
string[] variable_names = new string[] {"name", "surname"};
myObject.variable_names[0] = 1; 
myObject.variable_names[1] = 1; 
```

在其他语言（不是 C#）中，我使用：

```
myObject[variable_names[0]] = 1; 
```

我知道这个例子看起来很愚蠢，但这只是解释它的一种方式。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-26T10:33:04.533

您将需要使用反射来执行此操作。假设您要访问的是 myObject 的一个属性：

```
var type = myVariable.GetType();
var property = type.GetProperty("name");
property.SetValue(myVariable, 1, new object[] {}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-26T10:29:59.810

C# 是强类型，这意味着编译器会检查属性是否存在。因此，按名称动态访问属性并不容易。您需要为此使用反射。

我建议尽可能使用接口或其他方式来提供强类型，而不是解释这是如何工作的（我相信其他人会这样做）。C# 不是一种脚本语言，不应作为一种语言使用。

# c# - 如何生成“随机”但也“唯一”的数字？

> ID：909983
> 
> 赞同：11
> 
> 时间：2009-05-26T10:24:27.637
> 
> 标签：c#, random

随机数是如何产生的。？java等语言如何生成随机数，尤其是GUID如何生成随机数？我发现像伪随机数生成器这样的算法使用初始值。

但是我需要创建一个随机数程序，其中一旦出现的数字永远不会重复，即使系统重新启动等。我认为我需要将值存储在任何地方，以便我可以检查数字是否重复，但是当列表超出限制时，它会太复杂。？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-26T10:27:32.360

第一：如果保证这个数字永远不会重复，那么它就不是很随机。

第二：有很多[PRNG 算法](http://en.wikipedia.org/wiki/List_of_pseudorandom_number_generators)。

更新：

第三：有一个[针对 UUID（MS 称为 GUID）的 IETF RFC](https://www.rfc-editor.org/rfc/rfc4122)，但是如果您担心的话，您应该认识到 (U|G)UID 在密码学上是不安全的*。*

更新 2：

如果您想在生产代码中实际使用这样的东西（不仅仅是为了您自己的教育），**请**使用预先存在的库。如果你以前从未做过（或者即使你做过），这种代码几乎肯定会有细微的错误。

更新 3：

这是[.NET 的 GUID 的文档](http://msdn.microsoft.com/en-us/library/system.guid.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-26T10:29:38.877

有很多方法可以生成随机数。它通常通过系统/库调用来完成，该调用使用带有种子的伪数生成器，正如您已经描述的那样。

但是，还有其他获取随机数的方法，这些方法需要专门的硬件来获取真正的随机数。我知道一些[扑克网站](http://www.ultimatebet.net/help/random)使用这种硬件。阅读他们如何做到这一点非常有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T10:26:35.183

大多数随机数生成器都有一种“随机”重新初始化种子值的方法。（有时称为随机化）。

如果这不可能，您还可以使用系统时钟来初始化种子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-26T11:07:12.187

您可以使用此代码示例： http: [//xkcd.com/221/](http://xkcd.com/221/) 或者，您可以使用本书： [http ://www.amazon.com/Million-Random-Digits-Normal-Deviates/dp/0833030477](https://rads.stackoverflow.com/amzn/click/com/0833030477)

但说真的，不要自己实现它，使用现有的库。你不能成为第一个这样做的人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-26T11:24:46.517

特别是关于Java：

*   `java.util.Random`使用[线性同余生成器](http://en.wikipedia.org/wiki/Linear_congruential_generator)，这[不是很好](http://www.alife.co.uk/nonrandom/)
*   `java.util.UUID#randomUUID()`使用`java.security.SecureRandom`，一个用于各种加密安全 RNG 的接口——我相信默认是基于 SHA-1 的。
*   [UUID/GUID](http://en.wikipedia.org/wiki/UUID)不一定是随机的
*   在网上很容易找到比 更好的 RNG 实现`java.util.Random`，例如[Mersenne Twister](http://en.wikipedia.org/wiki/Mersenne_twister)或[multiply-with-carry](http://en.wikipedia.org/wiki/Multiply-with-carry)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-26T11:45:14.137

我了解到您正在寻找一种使用 C# 生成随机数的方法。如果是，[RNGCryptoServiceProvider](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rngcryptoserviceprovider.aspx)就是您要找的。

[编辑]

如果您使用 RNGCryptoServiceProvider 生成相当长的字节数，它可能是唯一的，但没有保证。理论上，真正的随机数并不意味着唯一。您掷骰子 2 次，两次都可能得到正面，但它们仍然是随机的。真正的随机！

我想要应用唯一性检查，您只需要推出自己的机制来保存先前生成的数字的历史记录。

# java - java 6 破坏了 webstart 应用程序安装，出现错误“java.lang.Exception：缓存失败”

> ID：909984
> 
> 赞同：0
> 
> 时间：2009-05-26T10:24:36.233
> 
> 标签：java, java-web-start, java-6

在生产环境中使用多年的 webstart 应用升级到最新的 java 版本（Java 6 update 13）后，停止安装并出现以下错误：

```
java.lang.Exception: cache failed forhttp://localhost:8080/ReactorStudio/studio/installer.jnlp
        at com.sun.javaws.Launcher.updateFinalLaunchDesc(Unknown Source)
        at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)
        at com.sun.javaws.Launcher.launch(Unknown Source)
        at com.sun.javaws.Main.launchApp(Unknown Source)
        at com.sun.javaws.Main.continueInSecureThread(Unknown Source)
        at com.sun.javaws.Main$1.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source) 
```

正确下载了应用程序 jnlp 和所有关联的 jar 文件。该应用程序还包含对安装程序 jnlp 文件的引用，该文件在应用程序运行的第一个文件中提取一些文件到本地磁盘。

关于问题是什么，或者我如何绕过这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T10:56:25.407

我们在升级到最新的 JRE 时遇到了类似的问题。我们的问题似乎与应该在 6u14 中修复的[这个错误有关。](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6809125)也许您的问题也相关。

我们发现的唯一解决方法是清除 webstart 缓存并再次启动应用程序。根据我们的经验，这似乎是大多数 webstart 问题的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-06T12:16:04.960

尝试从“launch.jnlp”文件的“jnlp”标签中删除 href="..."。

# asp.net-mvc - 添加强类型视图时使用 LINQ to SQL 的模型出现问题

> ID：909988
> 
> 赞同：2
> 
> 时间：2009-05-26T10:25:13.673
> 
> 标签：asp.net-mvc

我正在尝试基于 Nerd Dinner 教程创建一个简单的任务管理器解决方案

weblogs.asp.net/scottgu/archive/2009/04/28/free-asp-net-mvc-nerddinner-tutorial-now-in-html.aspx。

编辑：我已经删除了这些网址上的 http://，因为我没有足够的代表将链接添加到帖子中。

我已经构建了如下所示的模型：nerddinnerbook.s3.amazonaws.com/Part3.htm 除了晚餐是一项任务而 RSVP 是一个项目之外，它是相同的。

关系 task.projectId -> project.projectId 我在这些表中有更多字段，但到目前为止我一直保持模型中的公共部分任务类简单，以匹配教程。

我的问题是，当我尝试添加新视图并在对话框中选择“强类型视图”时，我的任务模型类没有显示在下拉列表中，有人知道为什么吗？

可能有点模糊，我只是想了解为什么会发生这种情况。

我想也许我的命名空间在某处不正确，或者我的课程不是公开的，但它是。

我通过执行 TaskRepository taskRepository = new TaskRepository(); 在我的控制器中获得了对我的存储库的引用 并且控制器具有对 TaskManager.Models 的使用引用；

都让我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T13:18:37.740

我不知道对话框如何选择类（除了它需要干净编译），但您可以选择任何随机类，然后编辑生成的 aspx 的第一行以替换您喜欢的类。****`***********